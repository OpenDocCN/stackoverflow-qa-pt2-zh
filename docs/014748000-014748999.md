# StackOverflow 问答 14748000-14748999

# symfony - 注册页面上的 FOSUser 捆绑登录部分

> ID：14748001
> 
> 赞同：0
> 
> 时间：2013-02-07T09:45:27.180
> 
> 标签：symfony, fosuserbundle

在注册页面（以及所有其他页面）上，我想在页面上有登录部分..

我这样做的方式是；

```
{% extends "FOSUserBundle::layout.html.twig" %}

{% block login %}
{% render "FOSUserBundle:Security:login" %}
{%  endblock %}

{% block fos_user_content %}
{% include "FOSUserBundle:Registration:register_content.html.twig" %}
{% endblock fos_user_content %} 
```

正确显示所有内容。当我成功登录时，它会登录并转到正确的页面。但是，当我输入密码错误时，它不会在同一页面上显示错误消息，而是转发到 /login 页面。我怎样才能防止这种情况发生并在当前页面上显示错误消息。

-login.html.twig；

```
{% block fos_user_content %}
{% if error %}
<div>{{ error|trans({}, 'FOSUserBundle') }}</div>
{% endif %}

<div id="HeaderLogin">
    <form action="{{ path("fos_user_security_check") }}" method="post">
        <input type="hidden" name="_csrf_token" value="{{ csrf_token }}" />

        <div id="HeaderLoginEmail">
            <input type="text" id="username" class="txtHeaderLogin" placeholder="Email" name="_username" required="required" /><br />
            <a class="Blue" href="/profile/change-password">Forgot Email?</a>
        </div>

        <div id="HeaderLoginPassword">
            <input class="txtHeaderLogin" placeholder="Password" type="password" id="password" name="_password" required="required" /><br />
            <a class="Blue" href="/profile/change-password"> Forgot Password?</a>
        </div>

        <div id="HeaderLoginButton">
            <input type="submit" class="btnHeaderLogin" id="_submit" name="_submit" value="{{ 'security.login.submit'|trans({}, 'FOSUserBundle') }}" />
        </div>
    </form>
</div>
{% endblock fos_user_content %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:22:20.733

这是正常行为。当您提交登录表单时，将调用登录操作。处理您的请求后，它会将您重定向到与您的路线不同的登录路线。

这是一个已知问题[https://github.com/FriendsOfSymfony/FOSUserBundle/issues/399](https://github.com/FriendsOfSymfony/FOSUserBundle/issues/399)并且已经在此处询问[FOSUserBundle: embedding the login form and selection its template](https://stackoverflow.com/questions/8040512/fosuserbundle-embedding-the-login-form-and-choosing-its-template)

但实际上创建自己的登录检查并不难。

# c# - 我在 vs 2012 中使用数据集，但在 Designer.cs 中查看 tableadapter 不生成代码

> ID：14748005
> 
> 赞同：2
> 
> 时间：2013-02-07T09:45:30.597
> 
> 标签：c#, visual-studio-2012, dataset, views

我在 sql2008 中创建数据库，包括表和视图。在 vs 2012 中使用数据集工作 sql。我将表拖到数据集代码生成表适配器。但是在数据集中拖动 veiws 不会生成代码表适配器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:54:14.197

如果 TableAdapter 没有自动生成，您是否尝试过右键单击 DataSet 背景并选择 Add new/Table Adapter？

# php - 如何解决 php 注意：未定义索引

> ID：14748010
> 
> 赞同：0
> 
> 时间：2013-02-07T09:45:44.573
> 
> 标签：php

我正在开发一个已经开发的 php 项目。现在我的工作是更改一些 css 文件。所以要做到这一点，我只是从服务器下载了所有文件以及数据库。完成所有设置后，我在浏览页面时遇到错误

```
Notice: Undefined index: lang_selected in language.php on line 38 
```

并且正在做这些事情的代码是

```
if((!isset($_GET['q'])) && ($_SESSION['lang_selected'] == "") && ($ln == 1))
  {

    $language = $setshow['es_lang'];

   if($language=="France")
    $lan="french";

    else if($language=="Croatian")
    $lan="croatian";

    else if($language=="Dutch")
    $lan="dutch";

    else if($language=="German")
    $lan="german";

    else if($language=="Greek")
    $lan="greek";

    else if($language=="Italian")
    $lan="italian";

    else if($language=="Indonesian")
    $lan="indonesian";

    else if($language=="Russia")
    $lan="russian";

    else if($language=="Spain")
    $lan="spanish";

    else if($language=="Usa")
    $lan="english_v1";

    else if($language=="China")
    $lan="chinese";

    else if($language=="Japanese")
    $lan="japanese";

    else if($language=="Korea")
    $lan="korean";

    else if($language=="Saudia")
    $lan="arabic";

    else if($language=="Norwegian")
    $lan="norwegian";

    else if($language=="Malaysian")
    $lan="malaysian";

    else if($language=="Persian")
    $lan="persian";

    else if($language=="Portuguese")
    $lan="portuguese";

    else if($language=="Serbain")
    $lan="serbain";

    else if($language=="Swedish")
    $lan="swedish";

    else if($language=="Thai")
    $lan="thai";

    else if($language=="Vietnamese")
    $lan="vietnamese";

    else if($language=="Turkey")
    $lan="turkish";

    unset($_SESSION['lang']);
   $_SESSION['lang']=$lan;
   $_SESSION['language']=$language;

  } 
```

那么有人可以告诉我为什么会出现这个错误以及如何解决这个问题吗？任何帮助和建议都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T09:47:30.670

要在不触发通知的情况下测试数组索引是否存在，请使用`isset()`.

```
if(isset($array['index'])) doSomething(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:47:21.850

您应该先测试是否`$_SESSION['lang_selected']`存在。

```
if(!isset($_GET['q']) && (isset($_SESSION['lang_selected']) && $_SESSION['lang_selected'] == "") && ($ln == 1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:47:50.450

检查是否使用 $_SESSION['lang_selected'] 设置

```
if(isset($_SESSION['lang_selected'])) {
    //do something when lang_selected contains a value
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:55:23.347

$_SESSION['lang_selected'] 有问题，我认为它没有设置。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-07T10:06:02.607

使用@$_SESSION['lang_selected'] 临时解决方案，

# javascript - 是否可以指定要使用的日期类型？

> ID：14748015
> 
> 赞同：0
> 
> 时间：2013-02-07T09:45:58.617
> 
> 标签：javascript, highcharts

我目前正在使用[HighCharts](http://www.highcharts.com/)为报告制作一个相当复杂的图表。

提供给图表的数据会根据提供给报告的各种过滤器而变化。例如，用户可以指定他们想要查看特定日、周或月的报告，从那里他们还可以控制图表以显示一年概览或他们正在查看的任何时期的概览。

我遇到的问题是 x 轴上的标签。再举一个例子；如果用户正在查看周时间段的年份概览，则图表上应有 53 个数据点，但这是按月标记的。我需要以 2 为单位按周数标记它，这个数字就可以了。

我已经找到了周数的日期格式化程序并在`highcharts.src.js`. 所以我只需要一种方法来指定要使用的日期格式，即日、周、月等。

到目前为止，我唯一能找到的任何用途（没有做任何事情）是API 的 x 轴部分的[这一部分：](http://api.highcharts.com/highcharts#xAxis.dateTimeLabelFormats)

```
{
    second: '%H:%M:%S',
    minute: '%H:%M',
    hour: '%H:%M',
    day: '%e. %b',
    week: '%e. %b', // This one here, how do I specify when to use this?
    month: '%b \'%y',
    year: '%Y'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:53:20.813

如果您需要自定义过滤器，则可以使用 setExtremes() 函数[http://api.highcharts.com/highstock#xAxis.events.setExtremes](http://api.highcharts.com/highstock#xAxis.events.setExtremes)。

要定义标签，您可以使用 formatter() [http://api.highcharts.com/highstock#xAxis.labels.formatter](http://api.highcharts.com/highstock#xAxis.labels.formatter)

但我假设您的意思是应该通过 tickPositioner() [http://api.highcharts.com/highstock#xAxis.tickPositioner动态定位的刻度](http://api.highcharts.com/highstock#xAxis.tickPositioner)

# c++ - 自动版本号在 Visual Studio express c++ 中使用宏工作

> ID：14748024
> 
> 赞同：1
> 
> 时间：2013-02-07T09:46:30.213
> 
> 标签：c++, visual-studio-2008, visual-c++

如何设置将自动执行版本号的宏或模板

例如

源代码将包含

主要版本号 1.0。次要版本号 0.0。构建 0.0 修订 0.0

所以，当我编译源代码文件时，上面的数字会自动更新。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:18:57.903

支持内部版本号和其他“自动更新文件版本”的典型方法是使用将内容写入`version.h`或类似的外部程序。

我曾经有一个小程序为我执行此操作，它会将版本从 1.0-00A 更新为 1.0-00B，如有必要，以此类推直到 1.0-99Z [但通常我会将其更改为 1.1-00A 或在那之前很久的事情]。

另一个变体使用您的版本控制系统来获取“它是什么源版本”，几乎所有版本控制系统都有办法为您提供当前源版本的编号（mercurial 中的“变更集编号”，“短哈希”在 git 中，明文中的“更改列表编号”，SVN 中的“修订”等）。

无论哪种方式，您都需要某种脚本或程序作为构建的一部分运行，以更新作为构建的一部分包含的文件。在 makefile 中这很容易，但大多数其他构建系统都有某种方式来“运行这个 {before, after} 构建”。

# python - Django 自定义推荐 + cron 作业

> ID：14748027
> 
> 赞同：0
> 
> 时间：2013-02-07T09:46:44.627
> 
> 标签：python, django, django-cron

我有自定义推荐：

```
python manage.py checksomething 
```

如何每两个小时运行一次？

我看到了 django-cron：

```
#example from doc
from django_cron import cronScheduler, Job

from MyMailFunctions import check_feedback_mailbox

class CheckMail(Job):
        # run every 300 seconds (5 minutes)
        run_every = 300

        def job(self):
                # This will be executed every 5 minutes
                check_feedback_mailbox()

cronScheduler.register(CheckMail) 
```

但是如何运行呢？会自动开启吗？我在服务器上设置了什么？这个文件应该在哪里？（在什么文件夹中？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:57:55.603

使用[crontab](http://en.wikipedia.org/wiki/Cron)，它的使用非常简单

要编辑您的 crontab：

```
$ crontab -e 
```

并添加您的工作：

```
* */2 * * * python /path/to/project/manage.py checksomething 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:55:34.687

django_cron 的想法是设置一个在项目中每 X 秒运行一次的作业。

您创建作业（在您的示例中为 CheckMail 函数）并设置其周期（run_every = 300，这意味着每 300 秒 = 5 分钟）。

设置作业后，您使用 cronScheduler.register(CheckMail) 注册作业。

要使作业每 5 分钟运行一次，您需要在 url.py 中添加以下内容：

```
import django_cron
django_cron.autodiscover() 
```

这样做将使 django_cron 处于活动状态，您的工作将每 5 分钟开始一次。

这是一个比从脚本调用 manage.py checksomthing 更好的方法。这样，您的 django 项目将在您的 django 项目中运行自己的工作，并且不依赖于正在运行的脚本。

# java - 从 jpanel 中绘制和删除 jlabels

> ID：14748028
> 
> 赞同：0
> 
> 时间：2013-02-07T09:46:44.753
> 
> 标签：java, swing, jpanel, jlabel

我正在通过设置顶部带有 jlabels 的 jpanels 网格（棋子图像）来制作国际象棋游戏 gui。我设置了板，每个正方形（jpanel）都有一个空的jlabel，可见性设置为false。然后，我浏览每个 jpanels 并将 jlabel 图片设置为与我的一件作品相对应的图像。我知道是否要画一块，因为我有一个变量 _board[8][8] 告诉我该位置是否被占用以及由谁占用。这就是我创建原始板的方式：

编辑：

我实际上改变了很多，这样我就不必每次都重新加载图像：

```
public ChessGameGUI(Square[][] board) throws IOException 
    {
        Dimension size = new Dimension(500, 400);
        Dimension boardSize = new Dimension(400, 400);

        layeredPane = new JLayeredPane();
        getContentPane().add(layeredPane);
        layeredPane.setPreferredSize(size);

        theBoard = new JPanel();
        layeredPane.add(theBoard, JLayeredPane.DEFAULT_LAYER);
        layeredPane.addMouseListener(this);

        GridLayout chessBoardLayout = new GridLayout(8,8);
        theBoard.setLayout(chessBoardLayout);
        theBoard.setPreferredSize(boardSize);
        theBoard.setBounds(0, 0, boardSize.width, boardSize.height);

        boolean drawWhite = true;

        // setup initial squares
        for(int y = 0; y < 8; y++)
        {
            for(int x = 0; x < 8; x++)
            {
                BorderLayout squareBorder = new BorderLayout();
                JPanel aChessSquare = new JPanel(squareBorder);

                if(drawWhite) aChessSquare.setBackground(Color.WHITE);
                else aChessSquare.setBackground(Color.GRAY);

                // load initial images
                if(board[x][y]._isOccupied)
                {
                    BufferedImage logo = null;

                    try{
                        // load the image
                        String path = findPieceImagePath(board, x, y);
                        logo = ImageIO.read(new File(path));
                        ImageIcon pieceImage = new ImageIcon(logo);

                        JLabel pieceJLabel = new JLabel();
                        pieceJLabel.setIcon(pieceImage); // new
                        pieceJLabel.setVisible(true); // new

                        aChessSquare.add(pieceJLabel);
                    } 
                    catch (IOException e)
                    { 
                        e.printStackTrace(); 
                    } // end try catch
                }// end if
                else
                {
                    JLabel pieceJLabel = new JLabel();
                    pieceJLabel.setVisible(false);
                    aChessSquare.add(pieceJLabel);
                }

                theBoard.add(aChessSquare);

                // alternate background colors
                if(x == 7);
                else drawWhite = !drawWhite;
            }
        }

        System.out.println("the number of components = " + theBoard.getComponentCount());

    } 
```

这可以很好地加载初始板，但是我似乎无法获得特定的组件。当我点击其中一个时，那个方块应该会亮起来。唯一获得绿色轮廓的正方形是左上角的正方形 (0, 0)。

```
public void mousePressed(MouseEvent e) 
    {
        System.out.println("mouse press x = " + e.getX() + " y = " + e.getY());

        // find which piece on the board is being clicked
        int gameX, gameY;
        gameX = e.getX() / 50;
        gameY = e.getY() / 50;

        System.out.println("gameX = " + gameX + " gameY = " + gameY);

        // out of bounds
        if(gameX < 0 || gameY < 0) return;

        // true if selected a piece on this team
        if(myGame._board[gameX][gameY]._isOccupied && !_pieceSelected && myGame._board[gameX][gameY]._team == myGame._turn) 
        {
            System.out.println("selected new piece");
            JPanel curSquare = (JPanel)theBoard.getComponentAt(gameX, gameY);
            curSquare.setBorder(BorderFactory.createLineBorder(Color.green));
            _pieceSelected = !_pieceSelected;

            return;
        } 
```

我想我对这条线有问题： JPanel curSquare = (JPanel)theBoard.getComponentAt(gameX, gameY);

但是，gameX 和 gameY 值已正确设置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:10:08.990

我认为您缺少将标签添加到每个面板的行。在“//设置初始方块”期间：

```
curLabel.setVisible(false);

```

应该：

```
curLabel.setVisible(false);
aChessSquare.add(curLabel);

```

# ios - 暂停视频录制

> ID：14748031
> 
> 赞同：7
> 
> 时间：2013-02-07T09:46:58.520
> 
> 标签：ios, xcode, video-recording

我正在尝试创建一个用户可以从相机录制视频的应用程序。此应用程序的功能之一必须是文件记录暂停。

例如：用户通过按下“开始”按钮开始录制。一段时间后，用户按下“暂停”按钮并暂停视频录制。然后用户按下“恢复”按钮，视频继续在同一文件中录制。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T21:30:53.437

设置一个 AVCaptureSession 和一个 AVAssetWriter 然后您可以使用布尔值“isRecording”打开和关闭录制。

```
 BOOL isRecording;

-(void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
     if(videoWriterInput.readyForMoreMediaData && isRecording) [videoWriterInput appendSampleBuffer:sampleBuffer];
} 
```

# android - 画圆角正方形

> ID：14748036
> 
> 赞同：5
> 
> 时间：2013-02-07T09:47:11.327
> 
> 标签：android, canvas, draw

我可以画出一个有锋利边缘的矩形，现在我需要把锋利的边缘弄圆。

怎么做？

这是我的代码：

```
 public void drawShape(Canvas canvas, Renderer renderer, float x, float y,
      int seriesIndex, Paint paint) {
    float halfShapeWidth = shape_width / 2;
    canvas.drawRect(x , y - halfShapeWidth, x + SHAPE_WIDTH, y + halfShapeWidth, paint);
   } 
```

如何通过传递相同的参数来制作这个圆角矩形？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-07T10:35:52.320

好的，我使用以下代码自己解决了这个问题：

```
RectF r = new RectF(1,2,3,4);
canvas.drawRoundRect(r, 0, 0, mPaint); 
```

希望它会帮助别人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T09:51:26.117

您可以使用[drawRoundRect](http://developer.android.com/reference/android/graphics/Canvas.html#drawRoundRect%28android.graphics.RectF,%20float,%20float,%20android.graphics.Paint%29)

在调用此函数之前，您需要将位置和尺寸打包到 RectF 中。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-02-07T09:52:31.973

```
public static Bitmap getRoundedCornerBitmap(Bitmap bitmap, int pixels) {
        Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(output);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = pixels;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);

        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return output;
    } 
```

# android - android ExpandableListView - 将某些组设置为不可扩展

> ID：14748049
> 
> 赞同：6
> 
> 时间：2013-02-07T09:47:51.313
> 
> 标签：android, expandablelistview

我有一个`ExpandableListView`并且我需要将某个组（groupPosition 已知并且始终相同）设置为不可扩展，并且`Activity`在单击时开始一个新组。有没有办法做到这一点？

**更新**

我也只需要一次扩展一个组，并尝试了以下方法（但这不能正常工作）：

```
 getExpandableListView().setOnGroupClickListener(
            new OnGroupClickListener() {
                @Override
                public boolean onGroupClick(ExpandableListView parent,
                        View v, int groupPosition, long id) {
                    if (groupPosition == 1) {
                        Toast.makeText(getApplicationContext(), "TEST",
                                Toast.LENGTH_SHORT).show();
                    } else if (groupPosition != lastExpandedGroupPosition) {
                        getExpandableListView().collapseGroup(
                                lastExpandedGroupPosition);
                    } else
                        getExpandableListView().expandGroup(groupPosition);
                    lastExpandedGroupPosition = groupPosition;

                    return true;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T10:32:58.917

这可以解决问题 - 在 onGroupClick 中检查您要特别处理的组，为其返回 true，为您希望通过默认操作（展开/折叠）处理的任何组返回 false。

```
 mExpandableListView.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {
        public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) {
            if(groupPosition == 2) {
                Toast.makeText(mContext, "Group 2 clicked", Toast.LENGTH_LONG).show();
                return true;
            } else
                return false;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:13:28.850

您可以对 ExpandableListView 使用 OnGroupClickListener 来限制组点击。

**更新**

```
private int previousGroupPosition = -1;
private boolean isDoubleTap = false;    

expLv.setOnGroupClickListener(new OnGroupClickListener()
{
    @Override
    public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) 
    {
        if(previousGroupPosition != -1)
            expLvTodoCategories.collapseGroup(previousGroupPosition);

        if(previousGroupPosition != groupPosition || isDoubleTap)
        {
            isDoubleTap = false;
            previousGroupPosition = groupPosition;
            if(groupPosition == 1)
            {
                 //Start Activity
            }
            else
            {
                expLv.expandGroup(groupPosition);
            }
        }
        else
            isDoubleTap = true;

        return true;
    }
}); 
```

试试上面的代码，它可能很有用..

# jquery - 窗口加载期间的 JSF2 jQuery

> ID：14748050
> 
> 赞同：1
> 
> 时间：2013-02-07T09:47:54.557
> 
> 标签：jquery, jsf-2

尝试从 JSF2 (Mojarra) 调用 jQuery。在窗口加载期间尝试显示警报消息。但不确定如何调用 jquery 功能。

任何帮助表示赞赏。

下面是js(test.js)的代码片段

```
$(window).load(function() {
 alert('window load occurred!');    
}); 
```

XHTML 代码如下

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
</h:head>
<h:outputScript library="js" name="test.js" target="head" />
<h:body>
</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:50:29.733

您首先应该包含 jquery js 库本身

添加

```
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

或者下载它并从本地加载它，就像加载 test.js 一样

```
<h:outputScript name="js\jquery.min.js" target="head" /> 
```

# asp.net - 如何使用 asp.net Entity Framework 配置 mysql？

> ID：14748051
> 
> 赞同：1
> 
> 时间：2013-02-07T09:47:59.113
> 
> 标签：asp.net, mysql, entity-framework

我正在尝试将 MySQL 数据库与来自 vs2010-12（Web 开发人员）的实体框架连接起来。

我已经下载并安装了 MySQLConnector( **MySQL-connector-net-6.6.5.msi** ) 来连接实体框架。

安装后我创建了一个新网站，添加了一个实体数据模型并尝试配置，但在**实体数据模型向导**中我无法看到 MySQL 的数据源来配置它与我的数据库。

任何人都对此有想法。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T23:15:22.220

下载这个：[http ://cl.ly/JqXO](http://cl.ly/JqXO)

请参考这个答案：[Visual Studio 2012 上的 mySQL 数据源](https://stackoverflow.com/questions/12684047/mysql-datasource-on-visual-studio-2012)

# sql - 为什么 getGeneratedKeys() 在 INSERT 之后不返回任何结果？

> ID：14748054
> 
> 赞同：2
> 
> 时间：2013-02-07T09:48:07.857
> 
> 标签：sql, jdbc

我有一个表，其中有一列被定义为自动生成键。执行以下代码时，我希望生成一个新密钥，但事实并非如此。插入了一行，但 ResultSet 为`ps.getGeneratedKeys()`空。

我正在使用 DB2：SQLLIB_ADCL_V97FP1。

```
 conn = getConnection();
        conn.setAutoCommit(false);
        String query = 
            "INSERT INTO MyTable " +
            "  (messe_nr, land5, variable_nr, bezeichnung_en, bezeichnung_de) " +
            "VALUES (?,?,?,?,?)";

        PreparedStatement ps = conn.prepareStatement(query, Statement.RETURN_GENERATED_KEYS);
        ps.setInt(1, fair.getFairId());
        ps.setString(2, variable.getCountryCode());
        ps.setInt(3, variable.getSort());
        ps.setString(4, variable.getLabel_en());
        ps.setString(5, variable.getLabel_de());

        log.debug(query);
        int count = ps.executeUpdate();
        if(count == 1) {
            ResultSet rs = ps.getGeneratedKeys();
            if(rs.next()) {
                variable.setId(rs.getBigDecimal(1).intValue());
            } else {
                log.error("Could not get autogen key after variable insert");
                throw new AVMSException(1500);
            }
            rs.close();
        }
        log.debug("inserted " + count);

        ps.close();
        conn.commit(); 
```

**更新**

我刚刚将项目部署到测试服务器，并没有出现问题。我的开发系统出了点问题——但是什么？我确实在一两天前安装了 Java 更新 - 1.7.0_13 - 这会导致这样的问题：-/？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T06:55:36.190

试试这个，它对我有用：

```
prepStmt = con.prepareStatement(sql, new String[]{"YOUR_ID_FIELD"});

//Setting Bind-Variables

prepStmt.executeUpdate();

        rs = prepStmt.getGeneratedKeys();  
        while (rs.next())
        {
            tAdresse.getAdressid().setValue(rs.getInt(1));
            System.out.println("Key: " + tAdresse.getAdressid().getIntValue());
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-17T11:22:00.717

您应该将“Statement.RETURN_GENERATED_KEYS”作为 PreparedStatement 的第二个参数传递。代码如下所示：-

```
Class.forName("com.mysql.cj.jdbc.Driver");

Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/database_name?user=databse_username&password=database_password");

PrepardStatement ps = conn.prepareStatement("INSERT INTO author(authorName) values(?)", Statement.RETURN_GENERATED_KEYS);

ps.setString(1, "Mark Twain");

int i = ps.executeUpdate();
System.out.println(i + " Records Added.");

ResultSet gK = ps.getGeneratedKeys();
if(gK.next()) {
long generatedId = gK.getLong(1);
} else {
System.out.println("Message => Generated Key cannot be accessed.");
}
} catch (SQLException e) {
e.printStackTrace();
} 
```

这里“author”是表名，“authorName”是列名。

# c++ - 如何使用 std::ifstream 读取用 QDataStream 编写的二进制文件

> ID：14748058
> 
> 赞同：2
> 
> 时间：2013-02-07T09:48:16.903
> 
> 标签：c++, qt, fstream

我想读取一个用 a 编写的二进制文件，`QDataStream`并在 LittleEndian 中用 a 编码`std::fstream`（在同一平台上，因此不关心具有不同格式的一种数据类型的问题）。

我怎样才能最好地做到这一点？据我所知，`std::fstream`没有内置功能来读取/写入 LittleEndian 数据。

我深入研究了问题并发现了以下内容（伪代码）：

```
ofstream out;      //initialized to file1, ready to read/write
ifstream in;       //initialized to file2; ready to read/write
QDataStream q_out; //initialized to file2; ready to read/write

int a=5, b;
//write to file1
out << a; //stored as 0x 35 00 00 00\. Curiously, 0x35 is the character '5' in ASCII-code
//write to file2
q_out << a; //stored as 0x 05 00 00 00

//read from file2 the value that was written by q_out
in >> b; //will NOT give the correct result

//read as raw data
char *c = new char[4];
in.read(c, 4);

unsigned char *dst = (unsigned char *)&b;
dst[3] = c[3];
dst[2] = c[2];
dst[1] = c[1];
dst[0] = c[0];
//b==5 now 
```

总结一下：`QDataStream`以不同于`std::fstream`. `QDataStream`有没有一种简单的方法可以读取使用写入的二进制数据`std::fstream`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T09:57:15.490

假设你在一台 Little Endian 机器上，这很有可能，然后读取包含以下 int 的文件：

```
05 00 00 00 
```

就像这样直截了当：

```
int32_t x;
in.read((char*)&x, sizeof(int32_t));
assert(x == 5); 
```

还有一些注意事项：

*   运算符`>>`并`<<`执行格式化 i/o，即它们将值转换为文本表示/从文本表示转换，这与您的情况无关。
*   `ios_base::binary`您应该以二进制模式（标志）打开文件。POSIX 不区分二进制和文本，但其他一些操作系统可以。

# objective-c - 请求访问联系人（日历、提醒、Facebook 等）自定义消息

> ID：14748063
> 
> 赞同：2
> 
> 时间：2013-02-07T09:48:38.347
> 
> 标签：objective-c, cocoa-touch, ios6

在要求用户授予联系人访问权限（提醒、Facebook 等）时，如何设置我自己的自定义消息？

从下图中可以看出，Path 应用程序要求访问联系人：

![在此处输入图像描述](../Images/abe88c2117ca13b1f3cb56242a85ef65.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:11:42.127

从[iOS 6 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/index.html)：

> 在 iOS 6 中，改进了日历、提醒事项、通讯录和照片的隐私控制。当应用程序尝试访问任何这些数据类型时，用户将看到访问对话框。用户可以在“设置”>“隐私”中打开和关闭访问。开发人员可以为每类隔离数据设置一个“用途”字符串。iOS 向用户显示此字符串，以帮助他们了解请求数据的原因。这些字符串可以使用 Xcode 的项目编辑器添加，该编辑器位于 Info 选项卡中。相关的键名以字符串“Privacy -”开头。

![在 Xcode 中编辑隐私设置](../Images/7433c40c4043d7c442a769db9630aeb1.png)

# perl - 无法使用 CPAN 安装/升级软件包

> ID：14748066
> 
> 赞同：1
> 
> 时间：2013-02-07T09:48:56.477
> 
> 标签：perl, cpan

我尝试使用 CPAN 安装一些模块，但它为每个模块提供以下错误。

```
CPAN installation problem " Package contains both files[bignum-0.30.tar] and directories[bignum-0.30]; not recognized as a perl package, giving up, won't make".
Untarred RRD-Simple-1.44.tar successfully
Package contains both files[RRD-Simple-1.44.tar] and directories[RRD-Simple-1.44]; not recognized as a perl package, giving up
  Package contains both files[RRD-Simple-1.44.tar] and directories[RRD-Simple-1.44]; not recognized as a perl package, giving up, won't make
Running Untarred RRD-Simple-1.44.tar successfully
Package contains both files[RRD-Simple-1.44.tar] and directories[RRD-Simple-1.44]; not recognized as a perl package, giving up
  Package contains both files[RRD-Simple-1.44.tar] and directories[RRD-Simple-1.44]; not recognized as a perl package, giving up, won't make
Running make test
  Make had some problems, won't test. 
```

虽然几天前它还在工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T09:36:38.450

我有同样的问题。删除`~/.cpan/CPAN/MyConfig.pm`和重新配置 cpan ( `#cpan> o conf init` ) 有帮助

# java - 计算图像代码的算法

> ID：14748083
> 
> 赞同：-2
> 
> 时间：2013-02-07T09:50:28.910
> 
> 标签：java, image-processing, hash, cbir

我正在分布式环境中开发基于内容的图像检索系统，我需要一种算法，该算法将图像作为输入并为我提供图像代码，该代码应该可以用于匹配视觉上相似的图像.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:00:30.670

[您可以按照此处](http://ieeexplore.ieee.org/xpl/articleDetails.jsp?reload=true&arnumber=5715530)所述创建图像哈希

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:11:53.897

这取决于图像的种类，一种可行的替代方法是不变矩（ hu 或 zernike ）

[我们在javaocr 库](http://sourceforge.net/projects/javaocr/)中使用此方法，随时从那里获取代码。

集群数学不变矩的主要优点是它提供了与集群中心的距离（例如：这是 90% 的黄瓜，但 20% 的苹果）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:18:01.650

我猜，你说的是人脸识别。如果是这样，那么这些是用于图像处理的少数算法。

1.  [特征脸](http://en.wikipedia.org/wiki/Eigenface)
2.  [弹性束图匹配](http://en.wikipedia.org/wiki/Elastic_Bunch_Graph_Matching)
3.  [主成分分析](http://en.wikipedia.org/wiki/Principal_Component_Analysis)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:32:52.780

您可以使用本地感知的bloom hash，这是Elliot Shepherd在java中的phash实现：http: [//pastebin.com/Pj9d8jt5](http://pastebin.com/Pj9d8jt5)

# silverlight - 如何在 Silverlight 客户端使用 ManagementObjectSearcher？

> ID：14748085
> 
> 赞同：1
> 
> 时间：2013-02-07T09:50:33.197
> 
> 标签：silverlight

我想在 System.Management 命名空间中使用 ManagementObjectSearcher 来获取客户端系统的属性。我使用 Silver light 作为客户端。有可能吗？请回复...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:11:30.297

Silverlight 不支持 ManagementObjectSearcher。

# jquery - 触发事件不起作用jQuery

> ID：14748087
> 
> 赞同：1
> 
> 时间：2013-02-07T09:50:34.643
> 
> 标签：jquery, triggers

当用户单击 a.test 链接时，我想模拟单击 li 旁边的 li 中的 a.active 链接，但由于某种原因，我的 jquery 代码无法正常工作。有任何想法吗？

查询

```
$('a.test').click(function() {
    $('a.active').parent().parent().next().find('a').trigger('click');
}); 
```

HTML

```
<a class="test">link</a>

<ul>
<li id="">
<div class="page">
<a class="active" href="javascript:function Z(){Z=""}Z()">1</a>
</div>
</li>
<li id="">
<div class="page">
<a class="" href="javascript:function Z(){Z=""}Z()">2</a>
</div>
</li>
<li id="">
<div class="page">...</div>
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:57:04.723

您没有在要触发点击事件的标签上绑定点击事件，只需绑定它，您的代码就可以工作。

**[现场演示](http://jsfiddle.net/rajaadil/NybHT/4/)**

```
$('a.test').click(function () {
    $('a.active').parent().parent().next().find('a').trigger('click');  
});

$('li a').click(function () {  
    alert($(this).text());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:56:42.173

在处理程序中调用你的点击事件`doc ready`：[*get* **fiddle**](http://jsfiddle.net/FWdaa/)

```
$(function(){
   $('a.test').click(function() {
      $('a.active').parent().parent().next().find('a').trigger('click');
   });
}); 
```

`and make sure to call the jquery library first.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T09:57:49.413

您需要在 jquery 范围内而不是在 html 中拥有 click 事件处理程序

+你应该使用`.on('click','subselector',function(){})`

+你的 Z 函数除了清空甚至没有声明为变量的 Z 之外什么都不做......所以即使点击被触发也不会发生任何事情

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:03:57.783

看到这个：http: [//jsfiddle.net/FmASe/](http://jsfiddle.net/FmASe/)

```
$('a.test').click(function () {
  $('a.active').closest('li').next().find('a').trigger('click');
});

$('li a').click(function () {  
    alert($(this).text());
}); 
```

只需绑定点击事件..

# android - 如何使布局适应多 Android API 级别以使用切换和切换按钮？

> ID：14748093
> 
> 赞同：1
> 
> 时间：2013-02-07T09:50:49.120
> 
> 标签：android, android-layout

我有两种布局，一种用于 API 级别 14 之前的布局，另一种用于之后的布局。我需要在 14 级 API 之前使用切换按钮，在 14 级之后使用切换按钮。

问题是我想在 R.id.button1 中使用相同的 id 或者我是否必须让每个都有不同的 id 并在 Java 代码中检查正在运行的 API 版本所以我通过 id 找到视图适用于 API。如果是这样，我该怎么做，请提供代码示例。**谢谢你的时间**。

这些是 XML 文件

**布局-v14**：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <Switch
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignParentRight="true"
        android:layout_marginRight="16dp" />

</RelativeLayout> 
```

**普通布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

    <ToggleButton
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignParentRight="true"
        android:layout_marginRight="16dp" />

</RelativeLayout> 
```

**Java 代码**

```
CompoundButton button = (CompoundButton) findViewById(R.id.button1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:54:58.143

它们都扩展了 CompoundButton，因此您可以使用相同的 ID，但是如果您想要相同的代码，则必须将用途限制为 CompoundButton 类。

**编辑**

```
CompoundButton button = (CompoundButton) findViewById(R.id.button1);
button.setChecked(checked); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:07:44.650

您可以使用[Build.VERSION](http://developer.android.com/reference/android/os/Build.VERSION.html)以编程方式获取 api 级别。

**编辑**

```
if(Build.VERSION_CODES.ICE_CREAM_SANDWICH == Build.VERSION.SDK_INT);
    ((Switch)v).switchMethodSpecefic(); 
```

# node.js - 与 Heroku web dynos + Node js + Mongo HQ 的并发性

> ID：14748094
> 
> 赞同：0
> 
> 时间：2013-02-07T09:50:50.943
> 
> 标签：node.js, mongodb, heroku

我正在 Heroku 上开发一个网络应用程序。我服务器上的大多数请求都是数据库操作。1 个 web dyno + 1 个 Mongo HQ replicaSet 可以处理多少并发请求？如何增加这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:08:13.687

与数据库（连接池）的打开连接数由您的 MongoDB 驱动程序确定，通常可以在客户端初始化时手动设置。

如果它们限制打开连接的数量，您应该检查您的数据库托管服务。

确保为每个 web dyno 初始化客户端一次，而不是在每个数据库请求上错误地初始化一次，因此实际上将使用连接池。

另外，请记住，测功机有 4 个核心，因此如果您使用“集群”运行 4 个进程，则每个进程都有自己的连接池。

# java - LinkedHashSet 删除重复对象

> ID：14748095
> 
> 赞同：6
> 
> 时间：2013-02-07T09:50:58.603
> 
> 标签：java, collections, set

我有一个简单的问题要问你，我有类 Product 有这样的字段：

```
private Integer id;
private String category;
private String symbol;
private String desc;
private Double price;
private Integer quantity; 
```

我想根据 ID 从 LinkedHasSet 中删除重复项，例如将具有相同 ID 但数量不同的产品添加到集合中，我想删除（更新）具有相同 ID 的产品，它将通过我的唯一 id 对象，如何要做到这一点？

eg Product: id=1, category=CCTV, symbol=TVC-DS, desc=Simple Camera, price=100.00, **quantity=1** Product: id=1, category=CCTV, symbol=TVC-DS, desc=Simple Camera,价格=100.00，**数量=3**

不会添加到设置中

我的代码：

```
 public void setList(Set<Product> list) {
    if(list.isEmpty()) 
        this.list = list;
    else {
        this.list.addAll(list);
        Iterator<Product> it = this.list.iterator();
        for(Product p : list) {
            while(it.hasNext()) {
                if(it.next().getId() != p.getId())
                    it.remove();
                    this.list.add(p);   
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T09:53:27.913

所有`Set`实现都删除重复项，`LinkedHashSet`也不例外。

`equals()`重复的定义是两个对象，根据它们的方法，它们彼此相等。如果您没有覆盖`equals`您的`Product`类，那么只有相同的引用将被视为相等 - 而不是具有相同值的不同实例。

因此，您需要为您的课程添加更具体的`equals`(and `hashcode`) 实现。有关一些示例和指导，请参阅[在 Java 中覆盖等号和哈希码](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)。（请注意，您也**必须**重写`hashcode`，否则您的类在哈希集中的行为将不正确。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:06:47.000

我不会直接回答你，而是给你一些建议。

1.  如果要放入`Product`a ，则`Set`需要实现其`equals()`和`hashCode()`方法。
2.  在实施时`equals()`，您必须决定**一种`Product`手段**的“平等” ，（`Set`在“平等”方面只能包含一个实例）。例如，如果两个`Product`实例“相等”，如果它们具有相同的**ID**就足够了，还是我们也应该考虑**数量**？在您的情况下回答这个问题并不容易，但请继续阅读。
3.  通常在这种情况下，只考虑 ID。在这种情况下，您不应该`Product`在内存中有两个具有不同 的实例`quantities`，因为其中一个将表示不正确的状态（即，特定产品的数量可以是 1 或 3，而不是一次两者）。
4.  我认为设计并不完全正确。`Product`在您的情况下，类代表一般产品描述（包括价格），因此`quantity`并不真正适合那里。如果有人可以订购几份`Product`我认为您应该创建另一个类，例如`Order`or`OrderLine`指定订购的产品和相应的数量，例如：

    > ```
    > class OrderLine {
    >   private Product product;
    >   private Integer quantity; 
    > } 
    > ```

    有了这样的设计，很容易回答第 2 点的问题。`Product.equals()`应该只比较 ID，`OrderLine.equals()`同时比较产品 (ID)**和**数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:54:01.103

我建议你实现自己的哈希函数，用相同的代码对具有相同 ID-s 的元素进行哈希处理。这将解决您的问题，而无需您明确编码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:54:48.350

该代码似乎两次添加到列表中。在`addAll()`调用期间一次，然后在迭代期间再次。在这种情况下，我相信第二次迭代就足够了。比较也应该修改为使用`equals`而不是`==`

```
public void setList(Set<Product> list) {
    if(list.isEmpty()) 
        this.list = list;
    else {
        //this.list.addAll(list); Do not add all
        Iterator<Product> it = this.list.iterator();
        for(Product p : list) {
            while(it.hasNext()) {
                if(it.next().getId().equals(p.getId()))
                {
                    this.list.add(p);
                }   
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:06:35.720

正如其他人已经说过的那样，您将需要从接口实现 (override `equals()`)`hashCode()`和 (最好) 。如果未正确实施这些方法，可能会导致意外的运行时行为。难以调试问题。因此，我建议您使用,和来实现这些方法。如何使用的示例可以在此链接中看到[http://www.javaworld.com/community/node/1859](http://www.javaworld.com/community/node/1859)`compareTo()``Comparable``Apache Commons` `EqualsBuilder``HashcodeBuilder``ComparableBuilder``Apache Commons builder`

# javascript - Asp.net 网格视图通过 Jquery 填充导致错误警报我的代码已附加？

> ID：14748099
> 
> 赞同：0
> 
> 时间：2013-02-07T09:51:19.200
> 
> 标签：javascript, jquery, asp.net, web-services, gridview

嗨，我试图用 jquery 填充网格，但它会发出警报错误开火？？？

首先我在我的代码中使用网格作为，

```
<asp:GridView ID="gvDetails" runat="server">
<HeaderStyle BackColor="#DC5807" Font-Bold="true" ForeColor="White" />
</asp:GridView> 
```

然后我在后面的代码中在表格上创建行，

```
 private void BindColumnToGridview()
        {
            DataTable dt = new DataTable();
            dt.Columns.Add("user_Id");
            dt.Columns.Add("user_Fullname");
            dt.Columns.Add("user_Need");
            dt.Rows.Add();
            gvDetails.DataSource = dt;
            gvDetails.DataBind();
            gvDetails.Rows[0].Visible = false;
        }

  if (!IsPostBack)
            {
                BindColumnToGridview();
            } 
```

然后我从会话中获取 id 并将其传递给 webservice，如下所示，

```
<script type="text/javascript" language="javascript">
var empId = '<%= Session["UserID"] %>';
</script>
<script type="text/javascript"> 
$(document).ready(function() {
alert(empId);
        $.ajax({ 
        type: "POST", 
        contentType: "application/json; charset=utf-8",
        url: "ServiceGetUser.asmx/BindDatatable", 
        data: "{'employeeId': '" + empId + "'}",
        dataType: "json", 
        success: function(data) {
        for (var i = 0; i < data.d.length; i++) {
        $("#gvDetails").append("<tr><td>" + data.d[i].user_Id + "</td><td>" + data.d[i].user_Fullname + "</td><td>" + data.d[i].user_Need + "</td></tr>");
        }
        },
        error: function(result) {
        alert("Error");
        } 
        }); 
        }); 

</script> 
```

我的网络服务，

```
 [WebMethod]

        public static UserDetails[] BindDatatable(string employeeId)
        {
            DataTable dt = new DataTable();
            List<UserDetails> details = new List<UserDetails>();

            UserSearch us = new UserSearch();
            DataSet ds = new DataSet();
            Connection cs = new Connection();
            ds = cs.CurrentStatus(employeeId);

                    foreach (DataRow dtrow in dt.Rows)
                    {
                        UserDetails user = new UserDetails();
                        user.user_Id = dtrow["user_Id"].ToString();
                        user.user_Fullname = dtrow["user_Fullname"].ToString();
                        user.user_Need = dtrow["user_Need"].ToString();
                        details.Add(user);
                    }

            return details.ToArray();
        }
        public class UserDetails
        {
            public string user_Id { get; set; }
            public string user_Fullname { get; set; }
            public string user_Need { get; set; }
        } 
```

它正在警告 id，之后它会警告“错误”并且不调试 web 服务，甚至不知道出了什么问题？？？

我已经包含了 jquery 库，因为它不是因为它

我得到这个作为例子，

```
http://www.aspdotnet-suresh.com/2012/03/bind-data-to-gridview-with-jquery-or.html 
```

希望您的建议

# c# - 将 Byte[] 解析为文件而不保存它

> ID：14748105
> 
> 赞同：1
> 
> 时间：2013-02-07T09:51:28.690
> 
> 标签：c#, .net

我正在查询一个返回字节 [] 的 Web 服务（外部系统）。这个 byte[] 是一个 csv 文件，我将 byte[] 作为 csv 保存到临时位置，然后将 csv 文件解析到数据库。

是否可以直接读取 byte[] 而不是将文件保存到临时位置，而是将其存储在内存中并将文件内容解析到数据库？

我将[打开字节 [] 作为文件查看，但实际上没有先将其保存为文件，](https://stackoverflow.com/questions/3199674/opening-byte-as-a-file-without-actually-saving-it-as-a-file-first)不确定现在情况是否发生了变化？任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:35:31.570

不是很容易找到，但标准中有一个 CSV 解析器。

```
 public void HandleMycontent(byte[] content)
    {
        using (var stream = new System.IO.MemoryStream(content))
        {
            using (var reader = new StreamReader(stream))
            {
                using (var parser = new Microsoft.VisualBasic.FileIO.TextFieldParser(reader))
                {
                    //parse my csv here
                }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T09:53:20.980

您可以使用`MemoryStream`该类而不是`FileStream`：

```
var stream = new MemoryStream(yourByteArray); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T09:55:02.783

您链接到的相关问题是关于**在 Word 中**加载它。这与仅在本地解析它非常不同。在这种情况下，只需将其连接到一个`MemoryStream`和[`CsvReader`（外部链接）](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)：工作完成：

```
using(var ms = new MemoryStream(theData))
using(var sr = new StreamReader(ms))
using(var reader = new CsvReader(sr)) {
    // read the data...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T09:55:12.387

不完全确定这一点，因为另一方面对象应该按照相同的逻辑进行序列化，但您可以尝试一下：

```
MemoryStream memoryStream = new MemoryStream();
BinaryFormatter binaryFormatter = new BinaryFormatter();
memoryStream.Write(serializedInstance, 0, serializedInstance.Length);
memoryStream.Seek(0, SeekOrigin.Begin);
string deserializedInstance = (string)binaryFormatter.Deserialize(memoryStream); 
```

# gridview - 如何设置 Winforms Devexpress GridView 宽度 100 百分比

> ID：14748107
> 
> 赞同：0
> 
> 时间：2013-02-07T09:51:31.857
> 
> 标签：gridview, devexpress

我设计了一个 Windows 应用程序。在该表单中包含具有更多列和更少列的 GridView。现在我想最适合 Gridview 100 百分比的列和宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:17:53.797

尝试以下操作：

```
MyGridView.BestFitColumns(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:42:24.687

我找到了解决方案：

*   GridView -> 右键单击​​ -> 最佳拟合（所有列）。

*   GridView -> 属性 -> OptionsView -> ColumnAutoWidth -> True

# javascript - 无法获取属性“提交”的值：对象为空或未定义

> ID：14748108
> 
> 赞同：2
> 
> 时间：2013-02-07T09:51:42.363
> 
> 标签：javascript, html, forms, submit

我有一个 iframe 和这样的表单：

```
<iframe id="FileUploadFrame" name="FileUploadFrame" src="" style="display: none; border: 0; width: 0; height: 0;">
            <form id="FileUploadForm" name="FileUploadForm" accept-charset="utf-8"  target="FileUploadFrame" enctype="multipart/form-data" encoding="multipart/form-data" method="POST" action="CIMtrek_Regional_WhseForm_FileUpload">
   </form>
</iframe> 
```

这就是我提交表格的方式`iframe`

```
function fileUpload() {

    //var UploadForm = document.forms["FileUploadForm"];
    var UploadForm = global.forms["FileUploadForm"];

    alert("Form : "+typeof global.forms["FileUploadForm"]);
    alert("Form : "+typeof global.forms["FileUploadFrame"]);
    iframeId = document.getElementById("FileUploadFrame");

    // Add event...
    var eventHandler = function () {

        if (iframeId.detachEvent) iframeId.detachEvent("onload", eventHandler);
        else iframeId.removeEventListener("load", eventHandler, false);

        // Message from server...
        if (iframeId.contentDocument) {
            content = iframeId.contentDocument.body.innerHTML;
        } else if (iframeId.contentWindow) {
            content = iframeId.contentWindow.document.body.innerHTML;
        } else if (iframeId.document) {
            content = iframeId.document.body.innerHTML;
        }

        document.getElementById(div_id).innerHTML = content;
    }
    if (iframeId.addEventListener) iframeId.addEventListener("load", eventHandler, true);
    if (iframeId.attachEvent) iframeId.attachEvent("onload", eventHandler);

    //alert('submitting form');
    //form.submit();
    //document.forms["FileUploadForm"].submit();
    alert(UploadForm.submit());
} 
```

但提交表单时出现以下异常：

```
Error: Unable to get value of the property 'submit': object is null or undefined 
```

请帮我找出问题并解决。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:57:56.903

没有`document.forms["FileUploadForm"]`原因您的表单位于 iframe 中。`document`iframe 的 与您`document`的脚本执行的不同。

在你的脚本中在函数的开头添加这一行

```
var iframe = document.getElementById('FileUploadFrame');
var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
var UploadForm = innerDoc.forms["FileUploadForm"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:03:11.667

获取方法`FileUploadForm`是：

```
iframeId = document.getElementById("FileUploadFrame");
//This is the trick
var ifrDoc = iframeId.contentDocument || iframeId.contentWindow.document;
var UploadForm = ifrDoc.getElementById("FileUploadForm"); 
```

或者您可以在框架中有一些代码将父级中的变量设置为表单，但我不相信这种方法。

来源：[访问 iframe 中的表单](https://stackoverflow.com/questions/478078/accessing-a-form-that-is-in-an-iframe)

* * *

**编辑：**

此外，为了使上传表单有效，它需要看起来像任何其他表单，除了：

*   表单标签必须指定`POST`方法
*   表单标签必须指定一个 enctype`multipart/form-data`
*   表单必须包含一个`<input type=file>`元素。

# java - Java jtable允许行选择

> ID：14748110
> 
> 赞同：3
> 
> 时间：2013-02-07T09:51:49.373
> 
> 标签：java, swing, jtable

我正在尝试制作一个显示用户列表的 jtable。该表格应允许用户选择整行但不允许编辑单元格。

到目前为止，我有这个，它阻止他们编辑单元格但是我如何允许他们选择行而不是单元格？

```
DefaultTableModel userTableModel = new DefaultTableModel(new Object[]{"Customer ID", "First Name", "Last Name"}, 0) {
    @Override
    public boolean isCellEditable(int row, int column) {
        return false;
    }
}; 
```

这表明我正在填充表格：

```
public void refreshCustomersList() throws SQLException, ClassNotFoundException {

    UserBeanList userList = dbConnector.getUserData();

    for (int i = 0; i < userList.size(); i++) {
        UserBean userBean = userList.getUserBeanAt(i);

        String[] data = new String[3];

        data[0] = userBean.getCustomerID();
        data[1] = userBean.getFirstName();
        data[2] = userBean.getLastName();

        userTableModel.addRow(data);

    }
    tableCustomers.setModel(userTableModel);
} 
```

正如我所说，我已禁用单元格编辑，但我如何只允许行选择。

我看到其他人的帖子说我应该放这个，但我不确定要放这个。

```
selectionTable.setSelectionMode(ListSelectionModel.SINGLE_SELECTION); 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T09:58:42.620

您是否尝试过`setRowSelectionAllowed(true)`您的 JTable 实例？

我建议尝试查看 javadocs [http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#setRowSelectionAllowed(boolean)](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#setRowSelectionAllowed(boolean))

并阅读从 javadocs 链接的教程：http: [//docs.oracle.com/javase/tutorial/uiswing/components/table.html](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

他们非常彻底:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T11:10:23.833

```
private void jTable1MousePressed(java.awt.event.MouseEvent evt) {                                     

int selectedRow;

ListSelectionModel rowSM = jTable1.getSelectionModel();

  rowSM.addListSelectionListener(new ListSelectionListener()
  {
    @Override
    public void valueChanged(ListSelectionEvent e) 
    {
        ListSelectionModel lsm = (ListSelectionModel) e.getSource();

        selectedRow = lsm.getMinSelectionIndex();

        int numCols = jTable1.getColumnCount();

        model = (DefaultTableModel) jTable1.getModel();

        System.out.print(" \n row " + selectedRow + ":");

        for (int j = 0; j < numCols; j++) 
        {
            System.out.print(" " + model.getValueAt(selectedRow, j));
        }

    }
});
} 
```

使用它，您可以获得整行的值，您单击特定行。

# php - 在我的 codeigniter 模型中使用文件操作函数时出现语法错误

> ID：14748112
> 
> 赞同：4
> 
> 时间：2013-02-07T09:52:10.483
> 
> 标签：php, codeigniter, codeigniter-2

我正在使用 codeigniter 开发一个电子商务网站。当我使用 fopen、fclose 等文件操作函数时，它在模型类中显示语法错误。有人知道如何解决吗？我在 autoload.php 中添加了“文件”助手。我检查了 NetBeans 和 Dreamweaver 中的语法错误。在这里，我添加了一个示例类，其中包含我面临的问题，

```
<?php
Class amazon extends CI_Model
{
var $feed = <<<EOD
    <?xml version="1.0" encoding="iso-8859-1"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
    <Header>
        <DocumentVersion>1.01</DocumentVersion>
        <MerchantIdentifier>M_EXAMPLE_123456</MerchantIdentifier>
    </Header>
  <MessageType>Product</MessageType>
  <PurgeAndReplace>false</PurgeAndReplace>
  <Message>
    <MessageID>1</MessageID>
    <OperationType>Update</OperationType>
    <Product>
        <SKU>INTRUG8888888</SKU>
        <StandardProductID>
          <Type>ASIN</Type>
          <Value>B0EXAMPLEG</Value>
        </StandardProductID>
        <ProductTaxCode>A_GEN_NOTAX</ProductTaxCode>
        <ItemPackageQuantity>1</ItemPackageQuantity>
        <NumberOfItems>100</NumberOfItems>
        <DescriptionData>
          <Title>Balaji53444</Title>
          <Brand>TESTERCLOTHING</Brand>
          <Description><![CDATA[INTRUGTEST123 Test description of test product.]]></Description>
          <BulletPoint>Test 3 Meterial</BulletPoint>
          <MSRP currency="USD">0.10</MSRP>
          <Manufacturer></Manufacturer>
          <ItemType>example-item-type</ItemType>     
        </DescriptionData>
        <ProductData>
          <Clothing>
                 <VariationData>
                    <Parentage>child</Parentage>
                    <Size>Small</Size>
                    <Color>White</Color>
                    <VariationTheme>SizeColor</VariationTheme>
                 </VariationData>
                 <ClassificationData>
                    <ClothingType>Shirt</ClothingType>
                    <Department>Mens</Department>
                    <StyleKeywords>Apparel</StyleKeywords>
                    <ColorMap>White</ColorMap>
                    <InnerMaterial>White</InnerMaterial>
                    <OuterMaterial>White</OuterMaterial>
                    <Season>All Seasons</Season>
                    <CollarType>Crew</CollarType>
                    <SleeveType>Short</SleeveType>
                    <IsAdultProduct>false</IsAdultProduct>
                 </ClassificationData>
          </Clothing>
        </ProductData>
   </Product>
  </Message>
</AmazonEnvelope>
EOD;

var $marketplaceIdArray = array("Id" => array('A333NV4543ZUPX1J3X'));
var $feedHandle = fopen('php://temp', 'rw+');

}
?> 
```

![在此处输入图像描述](../Images/fb7904b2334cf7a2fc09dbfdd149b5ef.png) ![在此处输入图像描述](../Images/ee41d93cb810115cd5b91c49e114cea1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:57:09.350

fopen 不是 codeigniter 函数，而是 php 核心函数。请通过 PHP 执行此文件，因为您的代码似乎没有任何语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:16:10.170

那是什么`var`？:)

`var`在 PHP 5 中已弃用。删除该 var，它不会给出错误。

如下更改文件的结尾：（或简单地删除`var`）

```
$marketplaceIdArray = array("Id" => array('A333NV4543ZUPX1J3X'));
$feedHandle = fopen('php://temp', 'rw+'); 
```

# excel - 启用其他复选框的主复选框

> ID：14748117
> 
> 赞同：0
> 
> 时间：2013-02-07T09:52:30.457
> 
> 标签：excel, vba, checkbox

您好，我不知道如何在 excel 2010 中制作一个**激活其他****复选框**的复选框。

 **![在此处输入图像描述](../Images/7a49b67074a6a9f4edf9be6b7b49fcf3.png)

我的意思是如果我选中第一个复选框，则另一个复选框也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:36:19.783

这里的简短示例。将名为 MasterCheckBox 的复选框添加到您的表单中。使用 UserFormEnableEvents 来抑制用户表单中的事件......如果你需要。

```
Option Explicit
Private UserFormEnableEvents As Boolean

Private Sub UserForm_Initialize()
  UserFormEnableEvents = True
End Sub

Private Sub MasterCheckBox_Change(): On Error GoTo Err_handler
  Dim userFormControl As Control

  UserFormEnableEvents = False

  For Each userFormControl In Me.Controls
    If (TypeOf userFormControl Is MSForms.CheckBox And _
      userFormControl.Name <> MasterCheckBox.Name) Then
        userFormControl.Value = Not userFormControl.Value
    End If
  Next

Err_handler:
  If (Err.Number <> 0) Then MsgBox Err.Description
  UserFormEnableEvents = True
End Sub 
```

![在此处输入图像描述](../Images/80da0c80c6d888b58076f54747003b7e.png)**

# hadoop - 如何在 Pig 的 Jython UDF 中增加 Hadoop 计数器

> ID：14748120
> 
> 赞同：0
> 
> 时间：2013-02-07T09:52:41.123
> 
> 标签：hadoop, jython, apache-pig

我想监控我的 Pig 工作的进度。大多数工作是在用 Jython 编写的 UDF 中完成的。有没有办法从 Jython UDF 中定义/增加 Hadoop 计数器？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T15:45:52.610

我现在无法检查它（对不起，未经测试的代码），但在 Java UDF（非常相似）与 Pig 0.8 中，它应该是这样的：

```
public class INC_COUNTER extends EvalFunc<DataBag> {

    @Override
    public DataBag exec(Tuple input) throws IOException {

        PigStatusReporter reporter = PigStatusReporter.getInstance();
        if (reporter != null) {
           reporter.getCounter(Counters.EXAMPLE).increment(1);//Counters.EXAMPLE is an enum value
        }
        return null;
    }
} 
```

我希望这可行，您可以将此代码转换为 Jython UDF 的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:54:55.217

您可以使用`setInt("<counter>", <value>)`. 然后每次 UDF 运行调用并使用`setInt("<counter>", getInt("<counter>") + 1)`. 我认为我曾经在 Hive UDF 中做过类似的事情。

在 Java[文档](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/conf/Configuration.html#setInt%28java.lang.String,%20int%29)中。

# mongodb - 演员（Akka）在数据库连接后没有收到消息

> ID：14748121
> 
> 赞同：0
> 
> 时间：2013-02-07T09:52:43.627
> 
> 标签：mongodb, scala, akka

我有一个非常简单的数据库编写器参与者，只是用于使用 Casbah 向 Mongo 写入一些条目，但它拒绝（没有错误）在连接到 DB 后接收任何消息。如果我从演员中删除`client`和`db`vals，它会收到消息。我也尝试过封装与某个对象的连接，但在连接到数据库后它仍然无法正常工作。

```
class DBWriter extends Actor with ActorLogging {
  val client = MongoClient(host, port)
  val db     = client(dbName)

  def receive = {
    case Write(collection, entry) => db(collection).save(entry)
  }
}

class StatisticsActor extends Actor with ActorLogging {
  val writer = context.actorOf(Props[DBWriter], "dbWriterActor")
  def receive = {
    case mes: SM => writer ! Write(....)
    case NoConnection => writer ! Write(....)
    case NCTime(time) => writer ! Write(....)
    ....
  }
  ....
} 
```

如何修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:59:01.327

发现了问题。这很简单，问题出在线程上，演员只是没有足够的时间连接到 mongo 并写入它，所有测试都通过了那一刻。

# solr - Apache Solr - 数据导入时物理内存增长过快

> ID：14748122
> 
> 赞同：3
> 
> 时间：2013-02-07T09:52:44.713
> 
> 标签：solr

我每晚运行 dataimport 命令 (127.0.0.1:8983/solr/dataimport?command=full-import)

几天后，我查看我的 solr 管理面板，物理内存超过 4gb。如果我删除索引（删除数据目录中的所有文件）然后运行数据导入，物理内存会下降到 1.1gb。如果不删除它，物理内存会以非常快的速度增长。

我需要像 clean=true 这样的附加参数吗？我想运行一个与删除数据目录基本相同的 cron 任务，然后运行完全导入以使我的物理内存尽可能低。

我正在使用 solr 4.0 的默认缓存设置。

```
<query>

<maxBooleanClauses>1024</maxBooleanClauses>

<filterCache class="solr.FastLRUCache"
             size="512"
             initialSize="512"
             autowarmCount="0"/>

<queryResultCache class="solr.LRUCache"
                 size="512"
                 initialSize="512"
                 autowarmCount="0"/>

<documentCache class="solr.LRUCache"
               size="512"
               initialSize="512"
               autowarmCount="0"/>

<enableLazyFieldLoading>true</enableLazyFieldLoading>

<queryResultWindowSize>20</queryResultWindowSize>
<queryResultMaxDocsCached>200</queryResultMaxDocsCached>

<listener event="newSearcher" class="solr.QuerySenderListener">
  <arr name="queries">
    <!--
       <lst><str name="q">solr</str><str name="sort">price asc</str></lst>
       <lst><str name="q">rocks</str><str name="sort">weight asc</str></lst>
      -->
  </arr>
</listener>
<listener event="firstSearcher" class="solr.QuerySenderListener">
  <arr name="queries">
    <lst>
      <str name="q">static firstSearcher warming in solrconfig.xml</str>
    </lst>
  </arr>
</listener>

<useColdSearcher>false</useColdSearcher>

<maxWarmingSearchers>2</maxWarmingSearchers>

</query> 
```

# php - 具有相同名称的 WSDL 函数。如何选择一个？

> ID：14748125
> 
> 赞同：3
> 
> 时间：2013-02-07T09:52:54.430
> 
> 标签：php, xml, wsdl

我将提供程序 wsdl 与 SoapClient 一起使用，但是当我使用命令 __getFunctions 时，我得到如下信息：

```
method1Rsp service(method1Req $parameters)
method2Rsp service(method2Req $parameters)
method3Rsp service(method3Req $parameters)
method4Rsp service(method4Req $parameters)
method5Rsp service(method5Req $parameters) 
```

所以，我只能调用函数“service()”或使用`__soapCall('service',$info)`，但我总是得到“method1”模式。如果我使用`__doRequest()`我可以在自写的 xml 中发送我想要的方法并且工作正常，但很遗憾......如果我在 $info 数组中发送方法名称，它也使用第一种方法。

**问题**：有没有办法使用`__soapCall()`或服务功能调用特定方法，或者我必须修改wsdl？

**编辑**：

这是一个用于的 xml 请求`__doRequest`：

```
<?xml version="1.0" encoding="UTF-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body>
        <LowFareSearchReq TargetBranch="" xmlns="http://www.travelport.com/schema/air_v20_0" xmlns:com="http://www.travelport.com/schema/common_v17_0">
            <com:BillingPointOfSaleInfo OriginApplication="UAPI"/>
            <SearchAirLeg>
                <SearchOrigin>
                    <CityOrAirport Code="LON" xmlns="http://www.travelport.com/schema/common_v17_0" />
                </SearchOrigin>
                <SearchDestination>
                    <CityOrAirport Code="MUC" xmlns="http://www.travelport.com/schema/common_v17_0" />
                </SearchDestination>
                <SearchDepTime PreferredTime="2013-02-10" />
                <AirLegModifiers>
                    <PreferredCabins>
                        <CabinClass Type="Economy" />
                    </PreferredCabins>
                </AirLegModifiers>
            </SearchAirLeg>
            <SearchPassenger Code="ADT" Age="30" xmlns="http://www.travelport.com/schema/common_v17_0"/>
            <AirPricingModifiers CurrencyType="EUR">
            </AirPricingModifiers>
        </LowFareSearchReq>
    </s:Body>
</s:Envelope> 
```

网络服务的位置与`http://webservicename/AirService`您必须使用的方法无关。这工作正常，但响应也是和 xml 字符串。此外，如果我在以后的更新中更改 wsdl 文件，架构不会更新。Using`__soapCall`返回一个 stdClass 对象并自动获取模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:57:35.533

我认为您可以使用自定义参数（method1Req 或 method2Req 等）调用服务。而PHPSoap库自己决定必要的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:18:38.057

假设您使用的是内部 SOAP 库，我认为您可以使用正确的参数调用不同的操作。您可以使用内部帮助程序类 SoapParam 来完成。让我们假设 method3req 需要用户名和登录参数。如果你想使用它，你应该有类似的东西：

```
 $soap = new SoapClient( $wsdl );

 class method3req{
   public $username;
   public $password;
 }

 $m3r = new method3req();

 $m3r->username = new SoapVar( 'user', SOAP_STRING, $namespace,...);
 $m3r->password = new SoapVar( 'pwd', SOAP_STRING, $namespace,...);

 $tmp = new SoapVar( $m3r, SOAP_ENV_OBJECT, $namespace, ...);
 $soap->__soapCall( 'service', $tmp ); 
```

你也可以寻找帮助类 SoapParam。

# android - Android：JOSNObject解析并同时解析XML并将它们添加到列表视图

> ID：14748128
> 
> 赞同：0
> 
> 时间：2013-02-07T09:53:05.340
> 
> 标签：android, json, xml-parsing

我正在开发一个应用程序，在该应用程序中我`JSON`从一个 URL 获得响应。在那个`JSON`响应中，我必须先解析`JSONObject`。然后，我必须解析 .xml 文件中的 XML 内容`JSONObject`。`JSON`这是我得到的响应示例：

```
{
"output": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Results>\n    <Feed prov=\"dmoz\">\n        <ResultSet id=\"webListings\" source=\"DMOZ\">\n            <Listing description=\" - A bike shop in Brisbane. Stocks mountain bikes, road bikes, and BMX bikes.\n                    \" rank=\"1\" siteHost=\"http://www.lifecycle.net.au/\" title=\"Lifecycle Bike Shop\">\n                <ClickUrl type=\"body\">http://www.lifecycle.net.au/</ClickUrl>\n            </Listing>\n            <Listing description=\" - Videos and pictures taken of both sport bikes and dirt bikes.\n                    \" rank=\"2\" siteHost=\"http://roadanddirt.com/\" title=\"Road and Dirt\">\n                <ClickUrl type=\"body\">http://roadanddirt.com/</ClickUrl>\n            </Listing>\n</Results>"
} 
```

`XML`这是我用于解析 API 并进入的Java 代码`String`：

```
 HttpClient hClient = new DefaultHttpClient();
        HttpGet hGet = new HttpGet("API here");
        ResponseHandler<String> rHandler = new BasicResponseHandler();
        data = hClient.execute(hGet, rHandler);

        JSONObject json = new JSONObject(data);
        // get xml string form jsonObject
        String str_xml = json.getString("output"); 
```

我已经解析了`JSONObject`a 中`String`的整个 XML，现在我必须解析整个 XML 并修复列表视图中的那些，明智的分类。请帮助我解析`XML`并将它们修复到列表视图中。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:58:34.660

从当前 json 中获取 xml 字符串：

```
 JSONObject json = new JSONObject("your json response");

 // get xml string form jsonObject

 String str_xml=json.getString("output");

 // now convert str_xml to xml document for xml parsing 
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
 DocumentBuilder db = factory.newDocumentBuilder();
 InputSource inStream = new InputSource();
 inStream.setCharacterStream(new StringReader(str_xml));
 Document doc = db.parse(inStream); //<<< get xml Document here 
```

# postgresql - postgres 转义字符

> ID：14748135
> 
> 赞同：10
> 
> 时间：2013-02-07T09:53:20.847
> 
> 标签：postgresql

我是 postgres 的新手，如何在 where 子句的**MESSAGE参数中转义 RTF 语法？**

```
select count(*) 
from communicationoutgoingmessagescheduledetails 
where email='chris.green@waynesreaves.com' 
and message='{\rtf1\deff0{\fonttbl{\f0 Times New Roman;}}{\colortbl\red0\green0\blue0 ;\red0\green0\blue255 ;}{\*\listoverridetable}{\stylesheet {\ql\cf0 Normal;}{\*\cs1\cf0 Default Paragraph Font;}{\*\cs2\sbasedon1\cf0 Line Number;}{\*\cs3\ul\cf1 Hyperlink;}}\splytwnine\sectd\pard\plain\ql{\cf0 first }{\b\cf0 paymen}{\b\cf0 t bold }{\cf0 rem}{\cf0 inder}\par\pard\plain\ql{\ul\cf0 se}{\ul\cf0 cond PAYMENT }{\b\ul\cf0 reminder}\b\ul\par}' 
and succeddful=-1 
and senttime::timestamp::date='2/7/2013 12:00:00 AM' 
```

## 更新

这是我得到的错误

```
WARNING:  nonstandard use of escape in a string literal LINE 4: and message='{\rtf1\deff0{\fonttbl{\f0 Times New Roman;}}{\c...

HINT:  Use the escape string syntax for escapes, e.g., E'\r\n'. 
ERROR:  invalid Unicode escape LINE 4: and message='{\rtf1\deff0{\fonttbl{\f0 Times New Roman;}}{\c...

HINT:  Unicode escapes must be \uXXXX or \UXXXXXXXX.
********** Error **********

ERROR: invalid Unicode escape SQL state: 22025 Hint: Unicode escapes must be \uXXXX or \UXXXXXXXX. Character: 124 
```

## 更新 2

这是我为从 PostgreSQL 获取结果集而执行的代码：

```
string sql = "select count(*) from communicationoutgoingmessagescheduledetails " +
                        "where email='" + email + "' ";

        if (message != string.Empty)
            sql += String.Format("and message='{0}' ", message);

        if (subject != string.Empty)
            sql += String.Format("and subject='{0}' ", subject);

        sql += "and successful=true " +
        "and senttime::timestamp::date='" + date.Date + "'";

        System.Data.IDbConnection connection = ORGen.Access.Config.Instance.Connection;
        IDbCommand command = connection.CreateCommand();

        connection.Open();
        command.CommandText = sql;
        bool retVal = Convert.ToInt16(command.ExecuteScalar()) > 0 ? true : false;
        connection.Close();

        command = null;
        connection = null; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-07T10:13:42.670

在 PostgreSQL 9.3 或更新版本上并且没有手动更改`standard_conforming_strings`设置，您不必转义除了单引号之外的任何内容，您可以像这样加倍：

```
'this is a single quote: ''. ' 
```

如果您使用的是旧版本，请设置`standard_conforming_strings`为`on`in`postgresql.conf`或双反斜杠并使用`E''`字符串表示法：

```
E'{\\rtf1' 
```

这[在用户手册的词汇结构部分](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html)都有解释。

但是，您确实应该使用您的语言的 PostgreSQL 客户端驱动程序来发送自动转义的**参数化语句**。不这样做可能会导致[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)漏洞 - 请参阅[此站点](http://bobby-tables.com)。

由于您将 C# 与 npgsql 一起使用，因此您可能需要[http://bobby-tables.com/csharp.html](http://bobby-tables.com/csharp.html)。更多细节在[npgsql 用户手册](http://npgsql.projects.pgfoundry.org/docs/manual/UserManual.html)中给出。

# c# - 为 Windows 创建 Kiosk 应用程序

> ID：14748137
> 
> 赞同：1
> 
> 时间：2013-02-07T09:53:25.447
> 
> 标签：c#, browser, kiosk

我想为 Windows 8 平板电脑创建 Kiosk 应用程序。
那么有没有一种通用的方法来创建这样的应用程序呢？
为 PC 和平板电脑创建桌面应用程序是否有任何区别（我的意思是，我的桌面应用程序是为 PC 上的 Windows 7 开发的，例如，在平板电脑上的 Windows 8 下是否可以正常工作）？[回到上一个问题，如果我在里面创建带有WebBrowser](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)
控件的 全屏应用程序，这会是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T01:57:57.257

Use Windows 8.1 Assisted Access feature to build Kiosk apps [http://blogs.msdn.com/b/hyperyash/archive/2013/10/25/enable-kiosk-mode-in-windows-8-1.aspx](http://blogs.msdn.com/b/hyperyash/archive/2013/10/25/enable-kiosk-mode-in-windows-8-1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:01:36.493

[从http://dev.windows.com/](http://dev.windows.com/)开始了解 Windows 8 应用程序。

如果通过平板电脑您正在考虑 Surface（不是 Pro），那么您正在查看 WinRT

应用商店应用将在 Win 8 和 RT 上运行，但不能在 Windows 7 上运行。Windows 7/8 桌面应用不会在 RT 上运行。

# php - 在变量值中附加一个while循环

> ID：14748139
> 
> 赞同：0
> 
> 时间：2013-02-07T09:53:32.103
> 
> 标签：php

我需要在每次注册后发送一封自动邮件，并且在 message 变量中，我需要运行所有注册产品的 while 循环。

这是代码：

```
<?php

$message = '<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Course booking mail</title>
<style type="text/css">.course_list_tbl {border:1px solid #BAC2CC;}</style></head>
<body marginheight="0" topmargin="0" marginwidth="0" leftmargin="0" style="margin: 0px; background-color: #eee; background-repeat: repeat; color:#56667d; font-size:14px;">
<table cellspacing="0" border="0" cellpadding="0" width="100%"><tr><td>
<table width="650" cellspacing="0" cellpadding="0" border="0" align="center" style="border-width: 3px; border-color: #ffffff; border-style: solid;">
  <tr><td style="background:#F3F3F3; border-bottom:1px solid #BAC2CC;">
<table width="650" border="0"><tr><td>
<img src="http://www.og-softskills.com/gcom/images/ogs_mail.png" style="margin:0; margin-left:10px; margin-top: 4px; display: block;" alt="" />
</td>
    <td style="color:#2a186e;"><h2>Altous Solutions</h2></td>
  </tr></table></td></tr>
  <tr>
    <td style="background:#c8cfd8; color:#2a186e;" valign="middle"><h3 style="text-shadow: #ffffff 0px 1px 0px; margin-left:10px;">Your Order Information</h3></td>
  </tr>
  <tr><td style="padding:5px 10px;">
    <p>
    Course Booking Successfully Completed! You have successfully registered 3 candidate for 2 Open Courses and also booked for 1 In-house Course. Thank You!
    </p>
    </td></tr><tr><td>
    <h4 style="margin-left:25px; margin-bottom:0px;">Open Course</h4>
    <table width="600" border="0" cellspacing="0" cellpadding="0" align="center" class="course_list_tbl">
  <tr>
    <th scope="col" class="course_list_tbl" width="5%">s/n</th>
    <th scope="col" class="course_list_tbl">Course</th>
    <th scope="col" class="course_list_tbl">Actions</th>
  </tr>';

$message .= if($pubc_row_count > 0){
    $pub_sn = 1;

while($get_pubc_bookings_info_row = @mysql_fetch_assoc($get_pubc_bookings_info_query)){

$org_id = user_info('id');

$get_pubc_bk_id = $get_pubc_bookings_info_row['booking_id'];
$get_pubc_c_id = $get_pubc_bookings_info_row['course_id'];  
$get_pubc_c_title = $get_pubc_bookings_info_row['title'];

 echo '<tr><td>'.$pub_sn.'</td> <td>'.$get_pubc_c_title.'</td><td class="bk_action_lnk"><a href="pubc_reg_invoice.php?bk_id='.$get_pubc_bk_id.'&amp;org_id='.$org_id.'&amp;c_id='.$get_pubc_c_id.'" target="_blank">Print Invoice</a> <a href="pubc_invoice_pdf.php?bk_id='.$get_pubc_bk_id.'&amp;org_id='.$org_id.'&amp;c_id='.$get_pubc_c_id.'" target="_blank">Invoice in PDF</a> <div class="clear"></div></td></tr>';

++$pub_sn;

}

};

$message .= '</table></td>/tr>
  <tr>
    <td style="padding:5px 10px;">
    <p>
    For further enquiries, contact us via: <br /> 909-804-6416, 555-330-4541 <br /> Email: training@altous.com 
    </p>
    </td></tr>
    <tr>
    <td align="center" style="border-top:2px solid #BAC2CC; border-bottom:2px solid #BAC2CC;">
    <p  style="font-size:12px;"><strong style="font-weight:bold;">Altous Solution</strong> <br>
 5th Floor, Pole Plaza.</p>
    </td>
  </tr></table></td></tr></table></body></html>';

?> 
```

可以肯定的是，这不会飞，因为在变量“消息”中附加 if 语句和 while 循环将遇到语法错误的砖墙。所以我真的对如何完成这项工作一无所知。

将不胜感激一些帮助...谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:56:11.857

```
<?php

$message = 'part of string';

if(some condition){
   $message  .= 'Other part of string';
}

while(some condition){
    $message  .= $var.'Other part of string';
}

echo $message; // will give you ful string

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:15:30.327

Prasanth Bendra 的回答基本上是正确的；你想把你的消息分成不同的部分，消息头、可变部分和页脚部分；然后有一些代码可以控制这些部分的插入。

为了改进，您可以将这些部分放在文件系统或数据库中，这意味着当您想要调整消息时不需要修改代码。

# iphone - 在 iPhone 上的 Facebook 上分享来自捆绑包和链接的图像

> ID：14748140
> 
> 赞同：1
> 
> 时间：2013-02-07T09:53:33.120
> 
> 标签：iphone, ios, objective-c

我想从我的 iphone 应用程序分享图像、链接等到 Facebook。我的应用程序链接、阳离子、名称和描述已成功发布。但我无法分享图像。请按照我的代码..

```
UIImage *image = [UIImage imageNamed:@"sample.png"];
NSData *imgData = UIImageJPEGRepresentation(image, 1.0);

self.dictionary =[[NSMutableDictionary alloc] initWithObjectsAndKeys:     @"https://www.google.com/ios", @"link",
 imgData, @"data",

 @"AppName", @"name",

 @"Testing", @"caption",

 @"say something about this", @"description",
 nil]; 
```

我的分享 facebook 代码是..

```
[facebook requestWithGraphPath:@"/me/feed" andParams:dictionary andHttpMethod:@"POST" andDelegate:self]; 
```

我的问题是如何从捆绑包中获取图像以及如何将选定的图像分享到 Facebook？请帮助我..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T09:58:54.723

使用如下：

```
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"image1" ofType:@"png"];
NSData *videoData = [NSData dataWithContentsOfFile:filePath];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"My hat image", @"message", data, @"source", nil];

[facebook requestWithGraphPath:@"/me/photos" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

# sql - 错误 = [Microsoft][SQL Server Native Client 11.0]

> ID：14748141
> 
> 赞同：0
> 
> 时间：2013-02-07T09:53:36.727
> 
> 标签：sql

在 sql server 2012 中编写此代码时出现此错误：

```
EXEC xp_cmdshell 'bcp "select [ProductID],[ProductName],[UnitPrice] from Northwind.dbo.Products" queryout "d:\bcptest2.txt" -T  -c -t, ' 
```

错误 = [Microsoft][SQL Server Native Client 11.0]在建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。检查实例名称是否正确以及 SQL Server 是否配置为允许远程连接。有关详细信息，请参阅 SQL Server 联机丛书。

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:50:34.843

您所做的查询正常工作。但是，您尚未在 SQL Server 中启用 TCP/IP。这可以通过执行以下操作来完成：

1.  打开“SQL Server 配置管理器”
2.  选择“SQL 本机客户端配置”
3.  在右侧窗格中，右键单击 TCP/IP 并选择启用
4.  重新启动 SQL Server 服务

您的查询现在应该可以正常工作了。

有关详细信息，请参阅以下 msdn 文档。[为 SQL Server 启用 TCP/IP 网络协议](http://msdn.microsoft.com/en-us/library/hh231672.aspx)

如果这不能解决问题，请告诉我，因为可能需要其他配置。

编辑：

您可以尝试从命令行运行以下命令吗（即 cmd.exe）：

```
 bcp "select [ProductID],[ProductName],[UnitPrice] from Northwind.dbo.Products" queryout "d:\bcptest2.txt" -T  -c -t 
```

让我知道这是否适合您（这样我们可以查看是 BCP 还是 xp_cmdshell 导致了问题）。您是否还可以查看以下内容：

1.  SQL 服务器配置为允许远程连接
    *   在 SSMS 中，右键单击服务器名称>属性>连接并勾选“允许远程连接”框
2.  您的用户是系统管理员吗？
3.  您的 SQL 服务器位于何处？（即它是本地安装还是在您网络上的服务器上？）
4.  它也是SQL的一个实例吗？

# jquery-ui - 如何在 JSF 页面中包含外部 Javascript 文件

> ID：14748145
> 
> 赞同：4
> 
> 时间：2013-02-07T09:54:03.293
> 
> 标签：jquery-ui, jsf, primefaces

我想在我的 JSF 页面中包含 jQuery UI **[http://code.jquery.com/ui/1.9.0/jquery-ui.js的 URL。](http://code.jquery.com/ui/1.9.0/jquery-ui.js)**我看到了许多说`<h:outputScript>`应该使用的问题，但在没有一个答案中我看到了一个关于如何包含 URL 的示例。仅当 js 文件存在于项目的某个文件夹中时，答案才有意义。

有人可以帮助我将它包含在我的页面中吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T11:13:59.653

只需按照通常的方式使用纯 HTML`<script>`元素。

```
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 
```

`<h:outputScript>`只能引用本地脚本。您只会错过它的动态版本控制、模块化和重定位优势，但从技术上讲，这对静态和外部脚本应该没有害处。

但是，可以使用自定义`ResourceHandler`将 a 的 URL 更改`<h:outputScript>`为纯 CDN 目的的外部 URL。[OmniFaces`CDNResourceHandler`](http://showcase.omnifaces.org/resourcehandlers/CDNResourceHandler)就是这样一个例子。

* * *

**与具体问题无关**，PrimeFaces 组件是围绕 jQuery/UI 构建的。你*绝对*肯定你需要一个单独的 jQuery UI 库实例吗？

# javascript - 保存条目后nodejs mongoose不会返回控制台

> ID：14748146
> 
> 赞同：2
> 
> 时间：2013-02-07T09:54:04.277
> 
> 标签：javascript, node.js, mongodb, mongoose

我使用控制台中的一小段代码来测试在 MongoDB 数据库中保存/检索条目。它看起来像这样：

```
var mongoose = require('mongoose');
var models = require('../models');
mongoose.connect('localhost', 'users');
var john = new models.User({ name:'John' });
john.save(function (err, john) {
    if (err) {
        console.log(err)
    }
    else {
        console.log(john.name);
    }
}); 
```

在我运行它之后，它会在保存条目时显示名称，然后不会将我返回到控制台并且不再显示任何消息。我怎样才能让它回到控制台？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T13:28:50.990

只要数据库连接仍然打开，您的 node.js 程序就不会退出，因此您需要在完成后关闭连接池，如下所示：

```
var mongoose = require('mongoose');
var models = require('../models');
mongoose.connect('localhost', 'users');
var john = new models.User({ name:'John' });
john.save(function (err, john) {
    if (err) {
        console.log(err)
    }
    else {
        console.log(john.name);
    }
    mongoose.disconnect();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:10:01.863

一旦对 save() 的调用完成，它就会将您返回到控制台，但那是在您的回调被调用之前。如果保存操作需要几分钟，您可以在此期间继续使用控制台进行游戏。

保存操作完成后，将调用您的回调并将 john.name 打印到控制台。在 REPL 中打印到控制台可能会有些棘手，因为它是在您输入的位置写入的。

所以我的猜测是你认为一切都被阻止了，因为你没有看到提示**>**但它实际上在那里，它只是 console.log 在那一行写的。如果您尝试其他命令，它应该仍然有效。

# xml - JAXB @XmlAnyElement 忽略 CDATA

> ID：14748148
> 
> 赞同：2
> 
> 时间：2013-02-07T09:54:06.387
> 
> 标签：xml, jaxb, cdata

我们的应用程序运行良好，直到我在传入的 xml 中遇到 CDATA 部分。我知道 xml 中的 CDATA 是很常见的情况。一些我们如何忘记它。我们通过以下方式使用 JAXB 映射

```
@XmlRootElement(name="MyRoot")
@XmlAccessorType(XmlAccessType.FIELD)
public class MyRoot {

    @XmlElement(name="One")
    private String one;

    @XmlElement(name="Three")
    private String three;

    @XmlAnyElement
    private List<Object> remaining = new ArrayList<Object>();

    public MyRoot() {
    }
} 
```

我从另一个应用程序收到以下 xml。我真的不明白为什么 JAXB 会忽略 /MyRoot/Two/bla2/one 中的 CDATA。转换后我看到这样的输出`<Two><bla><bla> <bla2><one> function matchwo(a,b) { if (a < b && a < 0) then { return 1;} else { return 0;}} </one></bla2> <Two>`（注意没有 CDATA）

# 这是 XML

```
<MyRoot>
<One></One>
<Two>
    <bla></bla>
    <bla2><one><![CDATA[  function matchwo(a,b) { if (a < b && a < 0) then { return 1;} else { return 0;}} ]]></one></bla2>
</Two>
<Three></Three>
<Four>some text</Four> 
```

请帮助我理解这个问题。我是否缺少 CDATA 的任何内容？提前致谢。

# maven - 具有不同组ID的依赖冲突解决方案？

> ID：14748151
> 
> 赞同：4
> 
> 时间：2013-02-07T09:54:25.913
> 
> 标签：maven

具有冲突内容的工件：

`org.javassist:javassist:jar:3.17.1-GA`&&`javassist:javassist:jar:3.12.1.GA`

前者来自Hibernate，后者来自Guava。两者最终都出现在最终的战争文件中。问题是经典的冲突解决机制失败了，因为组 id 不同。因此，这两个 jar 最终都成为了最终的项目可交付成果。

我不能只在托管依赖项中排除 Guava 的依赖项，因为该项目是一个多模块。一些模块使用没有 Hibernate 的 Guava。他们会错过他们对 javassist 的依赖。但是，如果我不这样做，“多余”的工件将在项目的 war 文件中弹出。

有没有办法告诉 Maven 这两个依赖项实际上是同一代码的两个不同版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:44:28.080

我会坚持以下解决方案：

1.  在项目的主 pom.xml 中添加对工件的显式依赖`javassist`（以便所有子模块都继承此依赖项）。
2.  `javassist`从 Hibernate 和 Guava 中排除。
3.  最重要的是：添加注释说明为什么需要`javassist`依赖 :)

# python - Python 2 以秒为单位的不同日期时间

> ID：14748152
> 
> 赞同：0
> 
> 时间：2013-02-07T09:54:27.520
> 
> 标签：python, datetime

```
from datetime import datetime, date, time
import time

fmt = '%Y-%m-%d %H:%M:%S'
d1 = datetime.now
time.sleep(5)
d2 = datetime.now
diff = (d2-d1).seconds
print(diff) 
```

我收到错误消息

```
diff = (d2-d1).seconds
TypeError: unsupported operand type(s) for -: 'builtin_function_or_method' and 'builtin_function_or_method' 
```

如何以秒格式区分两个日期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:59:39.490

您在`()`之后缺少括号`now`：

```
from datetime import datetime, date, time
import time

fmt = '%Y-%m-%d %H:%M:%S'
d1 = datetime.now()
time.sleep(5)
d2 = datetime.now()
diff = (d2-d1).seconds
print(diff) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T09:59:39.920

`now`是一个函数，所以你要减去的是两个函数。试试这个： `datetime.now() - datetime.now()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:00:32.360

问题是您没有调用 datetime.now 函数，您只是将 d1 和 d2 分配给函数的引用。这应该可以解决您的问题：

```
d1 = datetime.now() # note the function call
d2 = datetime.now() 
```

# rest - 如何开始编写 RESTful 服务？

> ID：14748154
> 
> 赞同：0
> 
> 时间：2013-02-07T09:54:32.230
> 
> 标签：rest, servlets

我正在尝试创建一个接受 JSON 参数并发出 JSON 响应的 RESTful Web 服务。

我想要的是接受对我的 URL 端点发出的 HTTP 请求。就像是，

> POST /the/endpoint HTTP/1.1 主机：mywebsite.com
> 
> {“姓名”：“您的姓名”，“部门”：“您的部门”}

在后端进行数据库读取，并提供相关参数，例如经理姓名、薪水等作为 JSON 对象作为响应。

最好的方法是什么？我正在考虑为此使用Java servlet？有没有更好的办法？

PS - 我刚刚开始如此详细的答案或教程链接到如何实现它将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:09:34.080

如果您想使用 Java，我建议您看一下 JAX-RS ... 由于 REST 是一个复杂的主题，这里有一个包含大量信息的 url。[http://code.google.com/p/implementing-rest/](http://code.google.com/p/implementing-rest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:27:15.957

作为一个完整的初学者，我相信无需大量阅读即可实现（几乎）RESTful API 的最佳方法是仅使用 HTML 页面和 HTML 表单以及后端处理来实现 API。

规则是：

1.  使用`<a>`标签提供相关资源的链接。（导航）
2.  使用`<form>`标签在服务器上启动任何类型的处理操作。（行动）

`PUT`然后，您可以通过使用渐进式增强来添加执行,的 Javascript AJAX 请求`PATCH`，而`DELETE`不是使用`POST`这三个请求（当然，保留 POST 以在客户端不知道结果 URI 的情况下创建资源），从而使其正确地 RESTful 。

然后，您可以点击并在 Web 浏览器中测试 API！Selenium 之类的工具可以自动执行此操作。

如果您需要提供 JSON，可以在 API 设计和测试后添加，尽管也存在处理 HTML 或 XHTML 响应的库，因此机器可读性不一定需要 JSON。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:30:58.660

如果您在 symfony 中使用 php，请尝试：[https](https://github.com/FriendsOfSymfony/FOSRestBundle) ://github.com/FriendsOfSymfony/FOSRestBundle这可以让您非常快速地创建一个真正的 REST 完整服务程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:03:05.787

是的，您可以使用 Servlet 和一些用于将 Json 对象编组/解组为 Java 对象的 Json 库轻松地做到这一点。

您可以使用 [Jackson](http://jackson.codehaus.org/)、 [Gson](http://code.google.com/p/google-gson/)等Json 库

但是你必须知道 REST 应用程序不仅仅只是处理请求和响应，它还需要处理其他非功能性需求，例如

*   验证
*   授权
*   安全等

当有现成的框架为您提供这些东西时，从 Servlet 从头开始​​构建它是矫枉过正和浪费时间 我最喜欢的是 Spring MVC 3.0

查看他们的项目站点以获取更多详细信息

只是为了向您展示在 Spring MVC 中设置一个是多么容易，请查看下面的教程 [Spring 3 REST 教程](http://www.mkyong.com/spring-mvc/spring-3-rest-hello-world-example/)

如果有帮助，请给帖子评分，干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T12:54:47.083

Vogella 让我的一天变得非常轻松，因为我在这里使用了一个带有 Eclipse 屏幕截图的超级示例来启动 Web 服务。看看[这里](http://www.vogella.com/articles/REST/article.html)。

# asp.net - ASP.NET MVC 4 框架中的自定义基于非属性的表单验证

> ID：14748155
> 
> 赞同：0
> 
> 时间：2013-02-07T09:54:34.470
> 
> 标签：asp.net, asp.net-mvc

有没有办法定义基于非属性的表单验证？

在 ASP.NET WebForms 中曾经有一个 asp:CustomValidator，它允许在代码隐藏页面中使用自定义程序员定义的函数来验证表单元素。是否可以在 MVC 框架中做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:10:31.797

试试这篇文章：

[http://msdn.microsoft.com/en-us/library/gg508808(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/gg508808(v=vs.98).aspx)

这仍然使用属性，但仅用于指定自定义验证代码的操作。

如果您确实需要，您始终可以使用表单输入元素的 onchange 事件来触发 AJAX 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:17:37.670

作为 AliRıza Adıyahşi，我将在我的控制器操作上创建一个 ActionFilter 属性。只是把它放在这里，这样问题就不再没有答案了。

# c# - gridview中的javascript在母版页下不起作用

> ID：14748156
> 
> 赞同：0
> 
> 时间：2013-02-07T09:54:35.820
> 
> 标签：c#, javascript, jquery, asp.net, gridview

我想从gridview中选择一行我正在使用以下代码：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {               
                e.Row.Attributes.Add("onclick", String.Format("javascript:__doPostBack('this','Select${0}')", e.Row.RowIndex));
            }
        } 
```

它工作正常，但使用母版页后它停止工作。请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:59:16.963

我们需要查看更多代码，但请尝试将此行添加到您的 MasterPage 的 Page_Load

```
ClientScript.GetPostBackEventReference(this, string.Empty); 
```

`__doPostBack`通过控件注册，这些控件通常不会导致像 LinkBut​​ton 这样的 POST。可能，在迁移到 MasterPage 之前，您的页面中可能有其中之一。

# sql - 使用新条目更新表列

> ID：14748157
> 
> 赞同：9
> 
> 时间：2013-02-07T09:54:38.590
> 
> 标签：sql, oracle, oracle-apex

我在 Oracle APEX 中工作，我想用下表中的新值更新报表中的列。报告查询如下图所示。

```
TABLE  "VENDOR_ACCOUNT" 
(  "VEN_ACCOUNTID"      NVARCHAR2(10), 
   "VEN_REGNO"          NVARCHAR2(10), 
   "VEN_TXDATE"         DATE, 
   "VEN_INVOICE_REFNO"  NVARCHAR2(10), 
   "TOTALAMOUNT"        NVARCHAR2(10), 
   "IN"                 NUMBER(10,0), 
   "OUT"                NUMBER(10,0) 
) 

SELECT "VEN_ACCOUNTID" , 
       "VEN_REGNO" , 
       "VEN_TXDATE" , 
       "VEN_INVOICE_REFNO" , 
       "TOTALAMOUNT" , 
       "IN",
       "OUT",   
       "TOTALAMOUNT"+"IN" as "CREDIT",
       "TOTALAMOUNT"-"OUT" as "DEBIT"
FROM Vendor_Account; 
```

所需场景：我想用和更新`TotalAmount`列。新的或值必须显示在下一条记录的列中。 `Debit``Credit``Debit``Credit``TotalBalance`![在此处输入图像描述](../Images/c3fc43ed1d55de0b5a175698aa05714a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:19:50.587

```
Select
    "VEN_ACCOUNTID" , 
    "VEN_REGNO" , 
    "VEN_TXDATE" , 
    "VEN_INVOICE_REFNO" , 
    "TOTALAMOUNT" AS "OLD_TOTALAMOUNT"
    "TOTALAMOUNT" + nvl(lag (nvl("IN",0)-nvl("OUT",0)) 
                             over (partition by "VEN_REGNO" order by "VEN_ACCOUNTID" 
                             )
                        ,0) AS "TOTALAMOUNT"
    "IN",
    "OUT",  
 from Vendor_Account; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T10:21:06.190

您可以使用 Oracle 分析功能`LAG`：

```
Select "VEN_ACCOUNTID" , 
        "VEN_REGNO" , 
        "VEN_TXDATE" , 
        "VEN_INVOICE_REFNO" , 
        "TOTALAMOUNT" , 
        "TOTALAMOUNT" + lag("IN",1) over (ORDER BY "VEN_ACCOUNTID")
                      - lag("OUT",1) over (ORDER BY "VEN_ACCOUNTID") AS "NEW_TOTALAMOUNT",
        "IN",
        "OUT",  
        "TOTALAMOUNT"+"IN" as "CREDIT",
        "TOTALAMOUNT"-"OUT" as "DEBIT"
FROM    Vendor_Account; 
```

# mongodb - MongoDB 中的引用完整性。哪个是更好的做法？

> ID：14748164
> 
> 赞同：0
> 
> 时间：2013-02-07T09:54:49.240
> 
> 标签：mongodb, join, nosql

假设我有一个文档和一个作者集合。我可以通过两种方式设计它：

第一种方式：

```
documents
{_id:1, title:"document 1", author:"John", age: 34}
{_id:2, title: "document 2", author: "Maria", age:42 }
{_id:3, title: "document 3", author: "John", age: 34}

authors
{_id:1, name:"John", age:34}
{_id:2, name:"Maria", age:42} 
```

第二种方式：

```
documents
{_id:1, title:"document 1", id_author:1}
{_id:2, title: "document 2", id_author: 2}
{_id:3, title: "document 3", id_author: 1}

authors
{_id:1, name:"John", age:34}
{_id:2, name:"Maria", age:42} 
```

第一种方法很好，因为我在检索文档时不必模拟 Join，我拥有文档集合中的所有数据。但是，另一方面，如果我必须改变 Maria 的年龄，我必须在两个系列中都这样做。

第二种方式相反，如果我需要一个文档及其作者的年龄，我需要先查询文档，然后再查询作者。但好消息是，当我必须更改 Maria 的年龄时，我只需要在作者集合中进行。

那么，哪种解决方案更好？我想您在作者集合中需要的字段越多，您使用第二种方式的可能性就越大。但是，如果我使用第一种方式，是否可以使用一个查询来更新两个集合中 Maria 的年龄？

哪个是最常用的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:12:57.090

多个集合中的更新将是一个事务。MongoDB 不支持事务。

两种方式都有各自的缺点。

第一种包含作者数据的方式可能更适合于其内容不会发生变化的日志记录情况。

当您期望作者的详细信息会随着时间而改变或增长时（大多数情况下），第二种方法会更好。

就像已经提到的那样，将文档嵌入到各自作者的文档中将是结合这两个建议的好处的一种方式，但从长远来看可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:07:13.013

第一种方法的问题是更新：

```
{_id:1, title:"document 1", author:"John", age: 34} 
```

我可以想象，实际上你会想要一个作者 ID 以及查询所需的一些细节（模式冗余）。

正如您所注意到的，这可能会带来问题：

> 但是，另一方面，如果我必须改变 Maria 的年龄，我必须在两个系列中都这样做。

年龄至少每年变化一次，如果年龄错误，则更频繁。姓名也可以更改，尤其是当您后来发现这个“约翰”有姓氏或者他的名字实际上是“约翰尼”时。

因此，在这里创建冗余的问题是作者文档可能会发生巨大变化，导致您必须运行性能极差的更新，这有时会大大增加您的工作集。至于它多久会导致这种情况，我不能用提供的信息说，这将由你决定。

通常，创建冗余的一种好方法是当您在当前文档的另一个文档中需要极少更新的属性时。这似乎不是这里的情况。

第二种方法通常是进行这种随机读取和更新关系的默认方法，但是还有第三种方法 - 嵌入。

您可以将文档嵌入到作者中。这取决于您要存储多少文档，因为 MongoDB 的最大文档大小为 16Meg。

话虽如此，一种可能性是：

```
{
    _id: {},
    name: 'John',
    age: 43,
    documents: [
        { id: 1, title: "New Document" }
    ]
} 
```

这样做的一个缺点是使用内存中的操作，例如`$pull`or`$push`不仅如此，而且如果您的文档持续且大幅增长，您可能会看到碎片。

但同样，这些只是供您参考的笔记，实际上取决于未提供的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:09:36.820

我建议混合使用这两种方法，“静态”信息将与文档集合一起保存，变量数据将集中在作者集合中，只有当需要检索变量数据时，我才会使用作者 ID找回他的年龄。像这样的东西：

```
documents
{_id:"1", title:"document 1", author:"John", authorId: "1"}
{_id:"2", title: "document 2", author: "Maria", authorId: "2"}
{_id:"3", title: "document 3", author: "John", authorId: "1"}

authors
{_id:"1", name:"John", age:34}
{_id:"2", name:"Maria", age:42} 
```

年龄是您不需要太频繁的东西，但可以经常更新，因此这将更好地处理这两种情况。

正如其他人所提到的，Mongo 不是事务性的，如果您一次性创建作者和文档，您可能会遇到问题。

# c++ - Unicode 规范化 C++ 源代码参考

> ID：14748166
> 
> 赞同：2
> 
> 时间：2013-02-07T09:54:54.040
> 
> 标签：c++, unicode, normalization, unicode-normalization

我想在 C++ 中实现[Unicode 规范化](http://www.unicode.org/reports/tr15/)，特别是 NFKC。为此，我需要一些任何语言的参考源代码（prefarable C++）。

或者你可能会建议我如何开始我的实施。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:09:44.790

您很幸运，因为`Lounge<C++>`SO.com 的常客正在用 C++ 编写完整的 Unicode 实现。它旨在完全替代 ICU，没有任何缺点：

[https://bitbucket.org/martinhofernandes/ogonek/](https://bitbucket.org/martinhofernandes/ogonek/)

它目前没有实现 NFKC，但实现了 NFC 和 NFD，可以用作“一些参考源代码”。

# asp.net-mvc - ASP.NET MVC - Web 项目中的模型

> ID：14748168
> 
> 赞同：3
> 
> 时间：2013-02-07T09:54:58.123
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, layer

我是 ASP.NET MVC 的新手，并继承了一个使用该技术的项目。

这样的 Web 项目包含三个文件夹`Views`：`Controllers`和`Model`. 据我了解，模型实际上包含您的域/业务逻辑，并由您的控制器调用。控制器本身充当视图和模型之间的委托者。

现在，在典型的分层架构中，任何项目中都不应该有对 Web/UI 项目的引用。

我觉得这很令人困惑：
-> UI 包含模型，在理想世界中，模型基于“领域驱动设计”原则。
-> UI 顶部的层（服务和数据访问）不能有对 UI 的引用

**如果他们不知道您的模型，您如何编写高效的服务和数据访问层？**

我在这里想念什么？Web.Model 是否与“DDD”不同，我是否还应该有一个单独的 BL 项目？如果是这样，那么 Web.Model 应该包含什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-07T10:59:23.677

我将模型视为一个概念。您可以拥有一个包含您的域（您的实体、您的服务等）的完全独立的项目，并在您的*“UI”*项目中引用它。在这种情况下，这将是您的*“模型”*。这是我通常做的事情，在我的模型文件夹中，我保留*“ViewModels”*，用于绑定/验证（用于 UI）。例如，如果我有一个 Employee 但我不想使用它的所有属性（或就此而言不同的属性），我将`EmployeeViewModel`按照我想要的方式创建一个调整它，我将添加验证（如果需要）和我会将它传递给我的视图。

这绝不是“正确的方式”/“唯一的方式”，但它过去对我有用，我想我会分享（另外，我的解释很糟糕，所以我真的希望这篇文章有道理，如果不需要或需要澄清 - 请告诉我）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:58:22.170

您不一定需要将模型放在同一个项目中。您当然可以将它们放在不同的层中。

这就是我通常设置我的项目的方式

**1) UI 项目**- 这是一个 MVC Web 应用程序类型的项目，我将在其中拥有我的控制器及其视图和其他与 UI 相关的东西

**2）业务实体**——这将是一个类库类型项目，我将在其中定义我的域对象（例如：客户）。这看起来与我的数据库模式看起来很相似。这些通常只是代表我的域模式的 POCO（我将其用于 CodeFirst 数据库生成）。

**3) 数据访问**- 这将是另一个具有数据访问类的类库类型项目。通常我的存储库类/接口、我的 DBContext 类和其他数据访问类将在这个项目中。

**4) 测试**- 项目的单元测试

![在此处输入图像描述](../Images/71173416091ee61c0eea6e348fa575bc.png)

已添加业务实体项目作为对数据访问项目的引用，以便我可以在我的数据访问代码中使用这些类。

业务实体和数据访问项目作为参考添加到 UI 项目中。我会从我的 Controllers/Service 类中调用数据访问方法。

您还可以根据需要在控制器和数据访问层之间添加服务/业务逻辑层。

我的 UI 项目 ViewModels 文件夹中也有几个 ViewModel 类。我在某些屏幕上使用它，我必须显示来自多个域对象的数据。我有一个映射/服务类，它将域对象映射到视图模型对象。如果您的项目是 bifg，您可以将其作为一个单独的项目保留在同一解决方案下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:48:32.393

*   视图包含您的 HTML 布局
*   控制器负责从模型或模型本身获取数据并将它们传递给视图的繁重工作。
*   模型用于为您的 BL 执行操作或获取数据。

提示：您可以使用 EntityFramework（我推荐它，因为它很容易上手）来获取您的数据，并且设置起来非常简单，从而消除了您的 DAL 并节省了您自己编写所有内容的时间。

服务：您可以拥有返回 XML/JSON（其他格式？）的控制器，方法是将您从 DB 获得的数据转换为 XML/JSON 并返回它而不是视图。查看 MVC 4 WebApi 了解更多详细信息，请注意，您也可以使用 mvc 3 进行几乎相同的操作

另请参阅[asp.net/mvc](http://asp.net/mvc)站点以获取入门教程，它们非常有用。

# asp.net - jqgrid jsonReader 配置

> ID：14748169
> 
> 赞同：2
> 
> 时间：2013-02-07T09:54:58.870
> 
> 标签：asp.net, jqgrid, webmethod, jsonreader

我是 jqgrid 的新手，最后我设置了一个网格。假设我需要设置 jsonReader 以便网格知道在 json 返回中从哪里获取我的网格数据。但是我尝试了几天后得到了空白单元格。

这是我的网格：

```
jQuery("#list48").jqGrid({
            url: 'dbtest.aspx/get_offsite_history2',
            datatype: "json",
            mtype: 'POST',
            ajaxGridOptions: { contentType: "application/json" },
            serializeGridData: function(postData) {
                return JSON.stringify(postData);
            },
            jsonReader: {
                root: function(obj) { alert(JSON.stringify(obj.d)); return obj.d; },
                repeatitems: false
            },
            height: 'auto',
            rowNum: 30,
            rowList: [10, 20, 30],
            colNames: ['name', 'start_date', 'duration', 'offsite_cat'],
            colModel: [
                          { name: 'name', index: 'name', width: 80, align: 'left', editable: true, edittype: 'text' },
                          { name: 'start_date', index: 'start_date', width: 120, align: 'left', editable: true, edittype: 'text' },
                          { name: 'duration', index: 'duration', width: 120, align: 'left', editable: true, edittype: 'text' },
                          { name: 'offsite_cat', index: 'offsite_cat', width: 120, align: 'left', editable: true, edittype: 'text'}],
            pager: "#plist48",
            viewrecords: true,
            sortname: 'name',
            caption: "Grouping Array Data",
            gridview: true
        }); 
```

这是从 url dbtest.aspx/get_offsite_history2 返回的服务器：

```
{"d":"[{\"name\":\"A\",\"start_date\":\"B\",\"duration\":\"C\",\"offsite_cat\":\"D\"}]"} 
```

我想通过设置“root：'d'”来获得结果，但我得到了 64 个空白行......

寻找评论...非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:49:52.443

您的问题的原因是您的服务器代码中的错误。您对 JSON 进行**了两次**序列化。在`d`对服务器响应的属性进行反序列化后，您仍然会得到 JSON 字符串 (!!!) 而不是对象。典型的错误是`JavaScriptSerializer.Serialize`在 web 方法中手动使用。应该返回**对象**本身而不是作为序列化结果的字符串。

在不修改当前服务器代码的情况下，您可以通过使用

```
jsonReader: {
    root: function (obj) {
        alert(typeof obj.d === "string" ? obj.d : JSON.stringify(obj.d));
        return typeof obj.d === "string" ? $.parseJSON(obj.d) : obj.d;
    },
    repeatitems: false,
    page: function () { return 1; },
    total: function () { return 1; },
    records: function (obj) {
        return typeof obj.d === "string" ? $.parseJSON(obj.d).length : obj.length;
    }
} 
```

或者（如果你使用`loadonce: true`）只是

```
jsonReader: {
    root: function (obj) {
        return typeof obj.d === "string" ? $.parseJSON(obj.d) : obj.d;
    },
    repeatitems: false
} 
```

因为您当前的服务器代码似乎没有实现数据分页，所以您应该将其增加到`rowNum`足够大的值，例如`rowNum: 10000`或 使用`loadonce: true`.

**更新**：你可以在[这里](http://www.ok-soft-gmbh.com/jqGrid/user2045340.htm)找到修改后的演示。它显示

![在此处输入图像描述](../Images/fa13b4fc45b598eb6e11e2fec7d93abd.png)

消息后`alert`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:22:42.210

我认为问题在于您返回的 json 数据的结构。

下面是我使用的一个：

```
{   "page":1,
    "rows":[{"id":"1","cell":["1","1","Row 1","3","9",""]},
            {"id":"2","cell":["2","2","Row 2","2","1",""]},
            {"id":"3","cell":["3","4","Row 3","2","0",""]}],
    "records":3,
    "total":1
} 
```

您可能需要为 id 添加 colModel 以唯一标识每一行。

例如

```
 colNames: ['id', 'name', 'start_date', 'duration', 'offsite_cat'],
        colModel: [
                      { name: 'id', index: 'id', hidden: true },
                      { name: 'name', index: 'name', width: 80, align: 'left', editable: true, edittype: 'text' },
                      { name: 'start_date', index: 'start_date', width: 120, align: 'left', editable: true, edittype: 'text' },
                      { name: 'duration', index: 'duration', width: 120, align: 'left', editable: true, edittype: 'text' },
                      { name: 'offsite_cat', index: 'offsite_cat', width: 120, align: 'left', editable: true, edittype: 'text'}], 
```

希望有帮助。

# java - 查找 Java Spring XML 目录（适用于 Spring 的现代 3.x 和旧 2.x 版本）

> ID：14748170
> 
> 赞同：1
> 
> 时间：2013-02-07T09:55:00.627
> 
> 标签：java, spring, xsd, xmlcatalog

对于 NetBeans 中的 XML 标记/属性完成，我需要 Java Spring 的 XML 目录（用于 Spring 的现代 3.x 和旧 2.x 版本）。

我在哪里可以找到它？

参考：

*   [NetBeans：如何提供离线 XML 模式？](https://stackoverflow.com/questions/3579413/netbeans-how-to-provide-offline-xml-schemas)
*   [http://en.wikipedia.org/wiki/XML_Catalog](http://en.wikipedia.org/wiki/XML_Catalog)

你可以帮帮我吗？

# iphone - 使用对象按字母顺序对 tableview 进行排序并显示字母 tableview 标题，作为通讯录

> ID：14748173
> 
> 赞同：0
> 
> 时间：2013-02-07T09:55:04.047
> 
> 标签：iphone, ios, objective-c, uitableview, nsobject

我正在为我的 iphone 应用程序创建联系人列表。我制作了一个包含以下属性的自定义对象类。

*   名
*   姓
*   ID

现在我想制作一个联系人列表，就像 iphone 的联系人列表一样。所以使用 ABCDE-... 作为 tableview 部分的标题。我正在关注本[教程](http://www.devx.com/wireless/Article/43374)。但他只是在处理弦乐。我的问题在于 CellForRow 内。在这里你可以看到我有什么 ATM。

```
 NSString *alphabet = [firstIndex objectAtIndex:[indexPath section]];

//---get all states beginning with the letter---
NSPredicate *predicate =
[NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alphabet];
NSLog(@"list content is here %@",[listContent valueForKey:@"name"]);
NSArray *contacts = [[listContent valueForKey:@"name"] filteredArrayUsingPredicate:predicate];
NSLog(@"Contacts array is %@",contacts);

    Contact *contact = nil;
    contact = [contacts objectAtIndex:[indexPath row]];
    NSLog(@"contact is in de else %@",contact.name);
    NSString *text = [NSString stringWithFormat:@"%@ %@",contact.name,contact.firstName];
    cell.textLabel.text = text;

   [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator]; 
```

我使用以下日志在第一行崩溃

```
2013-02-07 10:52:47.963 Offitel2[7807:907] list content is here (
    Claes,
    Geelen,
    Verheyen
)
2013-02-07 10:52:47.964 Offitel2[7807:907] Contacts array is (
    Claes
)
2013-02-07 10:52:47.964 Offitel2[7807:907] -[__NSCFString name]: unrecognized selector sent to instance 0x208e2c20
2013-02-07 10:52:47.965 Offitel2[7807:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString name]: unrecognized selector sent to instance 0x208e2c20' 
```

有人可以帮我吗？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:09:43.537

跟着这些步骤：

*   使用您要填充的单词的所有起始字母创建一个索引字母数组
*   现在排序：

    ```
    //sorting for english language
    indexAlphabetArray = (NSMutableArray *)[indexAlphabetArray sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
    ```

*   现在实施

    ```
    -(NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView
    {
        return indexAlphabetArray;
    } 
    ```

*   最后的建议，将所有名称和组名的字典作为字典中的键，例如：

    ```
    nameDictionary:{
        A:(
           Astart,
           Astop,
         )
        b:(
           bstart,
           bstop,
         )
    } 
    ```

*   这样`indexAlphabetArray = [nameDictionary allKeys];`

编辑：让您更轻松：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[nameDictionary valueForKey:[indexAlphabetArray objectAtIndex:section]] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *kCellID = @"cellID";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID];
    }
    NSArray *nameArray = [nameDictionary valueForKey:[indexAlphabetArray objectAtIndex:indexPath.section]];
    cell.textLabel.text = [nameArray objectAtIndex:indexPath.row];
    return cell;    
} 
```

# entity-framework-5 - 如何使用 Entity Framework 5.0 保存具有外键关系的表

> ID：14748178
> 
> 赞同：0
> 
> 时间：2013-02-07T09:55:14.590
> 
> 标签：entity-framework-5

我正在使用实体框架 5.0，但无法保存具有外键关系的表。我有一个名为“Order”（OrderID & Date）的表和一个名为“OrderLine”（Price、ID、OrderID）的表。使用以下代码，我无法保存 OrderLine。系统只是将数据保存在订单表中。

```
 using (var db = new DartProjectionsDb())
            {
                var view = new Order
                {
                    OrderID = e.Identity.Identifier,
                    Date = SystemTime.UtcNow(),

                };

                     OrderLine orderLine = new OrderLine();

                     orderLine.ID = 1;
                     orderLine.OrderID = e.Identity.Identifier;
                     orderLine.Price = 100;

                     view.OrderLines.Add(orderLine);

                db.Orders.Add(view);
                db.SaveChanges();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:22:25.860

尝试像这样将订单行添加到数据库中：

```
db.OrderLines.Add(orderline) 
```

但我本来希望 EF 在幕后做到这一点。

# php - 在 PHP 脚本运行时更新本地 JavaScript

> ID：14748182
> 
> 赞同：0
> 
> 时间：2013-02-07T09:55:27.863
> 
> 标签：php, javascript, html

我有一个 PHP 文件需要一段时间才能运行，它有几个部分，有没有办法在部分 PHP 文件完成后将命令发送回 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T09:59:23.883

PHP 在服务器端运行，javascript 在客户端运行。

首先 PHP 在服务器中运行，一旦完成，它就会将输出发送到客户端（浏览器）

您可以根据需要使用 AJAX

# perl - 调用子程序的最快方法

> ID：14748184
> 
> 赞同：2
> 
> 时间：2013-02-07T09:55:39.953
> 
> 标签：perl, module, subroutine

据我所知，在 Perl 中，我们可以使用以下技术从模块中调用子例程：

*   导出子程序`foo`，导入有该子程序的模块。最后在你的 perl 脚本中调用它。
*   `Object`在你的 perl 脚本中创建一个模块，最后`foo`使用 that调用`Object`。
*   `foo`使用它的路径直接调用，像这样`myDir::Module::foo();`。

如果我总是对调用子程序更好的方法感到困惑`foo`。如果我有一个动态脚本，我是从浏览器而不是命令行运行的，那么应该采用哪种方法，以便脚本花费更少的时间。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T11:37:43.553

在 Perl 中调用代码的最快和最好的方法是有区别的。

* * *

编辑：也请参阅 simbabques 的答案。他特别介绍了 #1 和 #3 之间的区别，以及为什么要使用其中任何一个。

* * *

### #1、#3：函数调用

您的 #1 和 #3 是相同的：子例程在全局可见的命名空间中具有唯一的名称。许多名称可以通过别名或导入模块映射到一个子例程。

如果您正在调用的函数的名称在编译时已知，则 sub 将在编译时解析。这假设您不会自发地重新定义您的功能。如果确切的函数只在运行时知道，这只是一个散列查找。

函数的调用方式有以下三种：

```
foo(@args);
&foo(@args);
@_ = @args; goto &foo; 
```

第一个（大括号有时是可选的）是默认的，并根据子原型验证您的论点（不要使用原型）。此外，还构建了一个完整的调用堆栈帧（包含许多有用的调试信息）。这需要时间。

第二个跳过原型验证，并假设您知道自己在做什么。这稍微快一些。我认为这是一种草率的风格。

第三个是尾声。这从当前子返回，返回值为`foo`。这很快，因为原型被忽略了，并且可以重用当前调用堆栈帧。这通常不是很有用，而且语法很丑陋。内联代码大约快一个数量级（即在 Perl 中，我们更喜欢循环而不是递归☹）。

### #2：方法调用

OO 的灵活性带来了巨大的性能代价：由于您调用消息的对象的类型直到运行时才知道，实际方法只能在运行时解析。

这意味着在被编入的包中`$foo->bar()`查找函数。如果在那里找不到，则会在父类中搜索。这很慢。如果您想使用 OO，请注意浅层次结构（→ 减少查找）。还要注意 Perls 默认的方法解析顺序是不寻常的。`bar``$foo``bless`

即使您知道类型，通常也不能将方法调用简化为函数调用。

如果`$foo`if of class `Foo`, and`Foo::bar`是 sub，`Foo::bar($foo)`则将跳过方法结果，甚至可能工作。但是，这会破坏封装，并且一旦`Foo`被子类化就会破坏。此外，如果`Foo`没有定义`bar`，这也不起作用，但该方法是在父类中定义的。

我通常赞成面向对象，直到从基准测试中清楚地看出这不会提供您需要的性能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T11:36:16.710

> *   导出子程序 foo，导入具有该子程序的模块。最后在你的 perl 脚本中调用它。

为了做到这一点，您将在实现 sub的 module/中使用[Exporter 。](https://metacpan.org/module/Exporter)`package`你告诉你的模块它将通过`@EXPORT_OK`and导出什么`@EXPORT`。如果您`use`是模块，则在编译时会将内容导入您当前的命名空间。以下 to 语句是等价的。

```
# This is the same...
use Module;
# ... as this

BEGIN {
  require Module;
  Module->import();
} 
```

如果您有要在主脚本中使用的东西，或者您要经常使用，您想这样做。一些示例是[List::Util](https://metacpan.org/module/List%3a%3aUtil)、[Data::Dumper](https://metacpan.org/module/Data%3a%3aDumper)或`use feature 'say'`. 当然你也可以在其他模块中使用它。

```
use Data::Dumper;
use List::Util qw(max);
use feature qw(say);

my @foo = (1, 2, 3, 4, 5, 23);
print Dumper \@foo;
say max(@foo); 
```

问题是在这里，你“污染”了你的命名空间。如果必须，请执行此操作，但请记住它发生在编译时，因此它**不是有条件**的。你**不能说**：

```
if ($foo) {
  use Some::Module 'foo';
  foo($foo);
} else {
  use Something::Else 'bar';
  bar();
} 
```

它将在编译时同时加载`Some::Module` **，** `Something::Else`从而增加程序消耗的时间和内存。该条件当然会起作用，但效率不高。

> *   在您的 perl 脚本中创建该模块的对象，最后使用该对象调用 foo。

这是面向对象的方法。它（如上所述）无法与其他方法相提并论。您不需要导入对象的方法。`use`您只需使用或（见上文）加载您的类（这是一个模块）`require`，创建一个实例并根据自己的喜好使用它的方法。但是，您需要一个面向对象的模块。如果您对它的工作原理感兴趣，请先查看[perlootut](http://perldoc.perl.org/perlootut.html)。

> *   使用路径直接调用 foo，例如 myDir::Module::foo();。

它实际上并不完全是它的路径，而是它的名称（空间）。例如，Data::Dumper`Dumper.pm`位于文件夹`Data`中，在您的目录中的某个位置`lib`。但这并不重要。

第一种方法的主要区别在于您省略了导入部分。如果您想构建有条件地加载某些模块的东西，或者如果您在一个巨大的（可能是遗留的）应用程序中并且不想污染命名空间，这很有用。

```
if ($order_has_some_condition) {
  require Very::Long::NameSpace::For::This::Condition::Module;
  Very::Long::NameSpace::For::This::Condition::Module::do_stuff_with_an_order($order);
} 
```

想象一下，这段代码在一个有 2k 行的遗留子代码中，并且发生了很多事情，其中​​大部分在我们的例子中从未被调用过。我们不希望`use`我们的模块，使其可用于在这段巨大的代码中处理的大约 100 种不同情况中的每一种。相反，我们只想在真正需要时才加载它。现在我们`require`使用全名直接调用模块并调用它的子。

总之，第一种方式和第三种方式各有千秋。它们都需要存在，如果合适的话，它们都应该被使用。在某些情况下，它只是味道，但在其他情况下，决定是有意义的。第二种，OOp，方法完全是另外一回事。

没有真正的速度差异，正如 Borodin 所说，Perl 很快。当然，如果您不`import`填充，则不必为导入“付费”。在 10 行脚本中，这无关紧要。在一个巨大文件中可能包含数千行代码和许多用例的遗留软件中，这非常重要。

我希望这可以帮助您做出决定。

# mysql - MySQL 中的 WITH 子句？

> ID：14748185
> 
> 赞同：4
> 
> 时间：2013-02-07T09:55:44.633
> 
> 标签：mysql, oracle, common-table-expression

MySQL 是否支持公用表表达式？例如在 Oracle 中有`WITH`子句？：

```
WITH aliasname
AS
  ( SELECT COUNT(*) FROM table_name )
SELECT COUNT(*) FROM dept,aliasname 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:01:31.977

```
SELECT t.name,
       t.num
  FROM TABLE t
  JOIN (SELECT c.id,COUNT(*) 'num1'
          FROM TABLE1 c
         WHERE c.column = 'a'
      GROUP BY c.id) ta1 ON ta1.id = t.id
 JOIN (SELECT d.id,COUNT(*) 'num2'
          FROM TABLE2 d
         WHERE d.column = 'a'
      GROUP BY d.id) ta2 ON ta2.id = t.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T09:56:41.270

一种方法是使用子查询：

```
 SELECT COUNT(*) 
  FROM dept,
  ( 
      SELECT COUNT(*) 
      FROM table_name
  ) AS aliasname 
```

请注意，`,`两个表之间的交叉连接两个表与您发布的查询相同。如果它们之间有任何关系，则可以`JOIN`改为使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-23T04:37:59.647

不，MySQL 不支持公用表表达式 (CTE)。`WITH tablealias as (....)`因此，您必须执行子查询，而不是使用。

例如，

```
WITH totalcount AS 
(select userid, count(*) as tot from logins group by userid)
SELECT a.firstname, a.lastname, b.tot
FROM users a
INNER JOIN 
totalcount b 
    on a.userid = b.userid 
```

可以在 MySQL 中重写为

```
SELECT a.firstname, a.lastname, b.totalcount
FROM users a
INNER JOIN 
(select userid, count(*) as tot from logins group by userid) b 
    on a.userid = b.userid 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-15T18:19:47.323

所以让我们谈谈`WITH`从句。

`WITH`子句和 INNER JOIN 否则 JOIN 是一种相同的，但`WITH`子句给你更多的自由度，尤其是在`WHERE`子句中；

我将创建一个视图，该视图将获取用户数、用户名等值。

首先（创建我们的表用户和插入用户）：

插入的用户表：

```
 CREATE TABLE users (id BIGINT(10) AUTO INCEREMENT PRIMARY KEY , name VARCHAR(50)) 
```

用户表：

```
CREATE TABLE users (id BIGINT(10) AUTO INCEREMENT PRIMARY KEY , name VARCHAR(50) , gender TINYINT(1)) 
```

第二（插入一些要使用的值）：

用户表：

```
INSERT INTO users (name,gender) VALUES ('Abolfazl M' , 1) 
```

我不想通过查询插入到inserted_users 中，但我想添加一个`TRUGGER`在将数据插入到users 表之前自动将数据插入到users_inserted 表中的方法。

第三（创建触发器 add_uinserted）：

```
DELIMITER $$

CREATE TRIGGER IF NOT EXISTS add_uinserted BEFORE INSERT ON users FOR EACH ROW 
BEGIN 

IF NEW.name <> '' THEN 

     INSERT INTO users_inserted (name) VALUES (NEW.name);

ELSE 

INSERT INTO users (name,gender) VALUES ('Unknown',NEW.gender);
INSERT INTO users_inserted (name) VALUES ('Unknown');

END IF;

END$$

DELIMITER ; 
```

运行查询，触发器将被创建，最后让我们创建一个视图来为我们提供具有 WITH 子句的查询的结果。

```
CREATE VIEW select_users AS

WITH GetCAll AS (
SELECT u1.id As Uid ,COUNT(u1.name) AS CnAll FROM users u1 
)

SELECT u1.name AS NAME,CASE 
WHEN s1.gender = 1 THEN "MALE"
WHEN s1.gender = 0 THEN "FEMALE"
ELSE "UNKNOWN"
END AS GENDER,CASE 
WHEN u1.id = gca.Uid THEN "INSERTED TO users_inserted"
ELSE "NOT INSERTED TO users_inserted"
END AS INSERTED,gca.CnAll FROM GetCAll AS gca INNER JOIN users u1; 
```

查询运行后，将创建视图，并通过调用视图**select_users**显示数据

最后一步（调用 select_users 视图）：

```
SELECT * FROM select_users 
```

感谢您查看我的答案，**就是这样！**

# javascript - 如何进行多个正则表达式替换

> ID：14748186
> 
> 赞同：1
> 
> 时间：2013-02-07T09:55:55.907
> 
> 标签：javascript, regex, string

我有我的域的这个字符串：

```
www.my.domain.com 
```

我希望我的输出是：

```
my.domain 
```

我目前这样做是这样的：

```
str.replace("www.","").replace(".com","") 
```

我怎样才能只用一个替换而不是两个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T09:57:32.713

试试这个正则表达式：

```
str.replace(/www\.|\.com/g, ''); 
```

如果你不熟悉语法`|`意味着“或”，让它匹配两边的模式。`\.`因为句点的其他意思是“任何字符”。`/g`使匹配和替换“全局”，即处理所有事件。如果您希望它不区分大小写，则可以`/gi`改用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T10:05:35.760

这是做什么： -

`str.replace(/^www\.|\.com$/g, '');`

具有开始和结束位置搜索。

www.my.comedy-domain.com 不会出错

# mercurial - 子存储库的 Mercurial 工作流程以避免“由于未提交的更改而无法合并”

> ID：14748188
> 
> 赞同：1
> 
> 时间：2013-02-07T09:56:03.783
> 
> 标签：mercurial, mercurial-subrepos

使用具有子存储库（“内部”）的 Mercurial 存储库（“外部”）时，通常会遇到问题，即您尝试在外部进行合并，但由于“未提交的更改”而失败当没有明显变化时（`hg st`外部显示没有变化）。

问题归结为子存储库状态：该`.hgsubstate`文件包含子存储库的变更集 ID，它实际上与子存储库工作副本变更集不同（或者，简单地说，子存储库中有未提交的更改）。

我可以在它发生时修复它，但是任何人都可以推荐一个用于拉取和合并的 Mercurial 工作流程，它**总是**可以避免这个问题吗？我可以通过玩测试回购等来解决它，但如果他们已经知道的话，也许有人可以为我和其他人节省一些时间。

工作流程越简单越好，因为这是针对一个小团队而不仅仅是一个人。

问题示例：

*   [http://mercurial.808500.n3.nabble.com/hgsubstate-not-updated-on-quot-pull-u-quot-or-quot-update-quot-td3995591.html](http://mercurial.808500.n3.nabble.com/hgsubstate-not-updated-on-quot-pull-u-quot-or-quot-update-quot-td3995591.html)

**更新 - 关于 .hgsubstate 工作原理的说明**

更新文件的唯一两个操作`.hgsubstate`（使用命令行时）如下：

1.  **如果你拉取外部项目的一个版本，你会得到任何 .hgsubstate 被签入（显然）**

2.  **如果您提交*外部*项目，则将`.hgsubstate`更新为内部项目的当前父变更集**

如果您更新子存储库但未对外部项目进行任何更改，那么如果您这样做，外部将不会显示任何更改`hg status`。**但是，**如果您运行`hg status -S`，您将获得子存储库（以及外部项目）的文件状态。显示的子存储库的文件状态是以下几种的混合：

a)**对 subrepo 中文件的任何未提交的工作副本更改**

b)对子存储库的**任何已*提交*的比更改集 ID 更新的更改`.hgsubstate`**

如果您尝试提交外部项目，即使没有`hg st`显示任何更改，如果 subrepo 确实具有更新的提示变更集，它也将允许您提交 .hgsubstate 文件的更新版本。因此，一个关键的策略是使用`hg st -S`它将显示您的子存储库中是否有任何待处理的内容，例如工作副本更改或比 in 中命名的 id 更新的更改集`.hgsubstate`。

# c - 将 2 通道 WAV 文件解交织成两个包含原始数据的文本文件

> ID：14748191
> 
> 赞同：2
> 
> 时间：2013-02-07T09:56:11.997
> 
> 标签：c

我有一个基于上述问题的任务。每个样本的采样频率和大小在问题中是已知的。我只需要了解为此所需的编码类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:01:10.137

使用文件格式规范（例如[这个](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)）来查看如何读取文件头、确定采样率、比特率等。

```
The canonical WAVE format starts with the RIFF header:

0         4   ChunkID          Contains the letters "RIFF" in ASCII form
                               (0x52494646 big-endian form).
4         4   ChunkSize        36 + SubChunk2Size, or more precisely:
                               4 + (8 + SubChunk1Size) + (8 + SubChunk2Size)
                               This is the size of the rest of the chunk 
                               following this number.  This is the size of the 
                               entire file in bytes minus 8 bytes for the
                               two fields not included in this count:
                               ChunkID and ChunkSize.
8         4   Format           Contains the letters "WAVE"
                               (0x57415645 big-endian form).

The "WAVE" format consists of two subchunks: "fmt " and "data":
The "fmt " subchunk describes the sound data's format:

12        4   Subchunk1ID      Contains the letters "fmt "
                               (0x666d7420 big-endian form).
16        4   Subchunk1Size    16 for PCM.  This is the size of the
                               rest of the Subchunk which follows this number.
20        2   AudioFormat      PCM = 1 (i.e. Linear quantization)
                               Values other than 1 indicate some 
                               form of compression.
22        2   NumChannels      Mono = 1, Stereo = 2, etc.
24        4   SampleRate       8000, 44100, etc.
28        4   ByteRate         == SampleRate * NumChannels * BitsPerSample/8
32        2   BlockAlign       == NumChannels * BitsPerSample/8
                               The number of bytes for one sample including
                               all channels. I wonder what happens when
                               this number isn't an integer?
34        2   BitsPerSample    8 bits = 8, 16 bits = 16, etc.
          2   ExtraParamSize   if PCM, then doesn't exist
          X   ExtraParams      space for extra parameters

The "data" subchunk contains the size of the data and the actual sound:

36        4   Subchunk2ID      Contains the letters "data"
                               (0x64617461 big-endian form).
40        4   Subchunk2Size    == NumSamples * NumChannels * BitsPerSample/8
                               This is the number of bytes in the data.
                               You can also think of this as the size
                               of the read of the subchunk following this 
                               number.
44        *   Data             The actual sound data. 
```

在那之后，你会发现原始 pcm 数据，像交错一样

```
[sample 1      ][sample 2      ]
[s1,ch1][s1,ch2][s2,ch1][s2,ch2] 
```

您可以以写入二进制模式打开每个样本的文本文件，然后循环遍历音频数据，读取单个样本/通道的字节，然后使用`fprintf`或`fwrite`将它们写入正确的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:03:48.560

采样频率与此无关，但每个样本的大小（通常每个样本每个通道 8 或 16 位）决定了您需要使用的指针大小，因此这里是每个通道 8 位的示例：

```
char* reader = begin; // interleaved
char* left = malloc(numsamples); // de-interleaved
char* right = malloc(numsamples);
while(reader<end) {
    *left = *reader;
    ++left;
    ++reader;
    *right = *reader;
    ++right;
    ++reader;
} 
```

要对 2 通道 16 位交错音频执行相同操作，只需将所有 3 个缓冲区声明`short*`为`malloc(numsamples*2)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:00:59.033

假设您已将 WAV 数据加载到内存中，您需要做的就是：

1.  打开两个输出文件（使用`fopen()`）。
2.  循环遍历样本数据，并为每个样本：
    *   将左声道的值放在第一个文件中
    *   将正确通道的值放在第二个文件中
3.  关闭文件。

# jquery - jQuery UI 自动完成 - 悬停时菜单消失

> ID：14748193
> 
> 赞同：61
> 
> 时间：2013-02-07T09:56:33.913
> 
> 标签：jquery, html, jquery-ui, jquery-ui-autocomplete

我正在尝试使用 jQuery UI Autocomplete 来显示 MySQL 数据库中的人名列表。基本功能正在工作 - 当您输入两个或更多字母时，会显示可能的名称列表 - 但是当我将鼠标悬停在列表上或按向下键访问列表时，它会消失（下面的 2 个屏幕截图可能有助于解释这个）。

这意味着自动完成变得毫无意义，因为我实际上无法访问列表！如果有人可以提供帮助，我将不胜感激！屏幕截图和代码发布在下面。

*输入前几个字符，出现菜单*

![截图 1](../Images/d1756084f32d94b0c1037bb6f8b07e57.png)

*但是将鼠标悬停或按下“向下”键，它会在选择之前消失*

![截图 2](../Images/d65dd487ebebe6890289b47713846a1e.png)

**HTML：**

```
 <div id="chooseaccount">
  Choose Account to Edit
  <div id="iechooseaccountlabel" class="labeldiv">
    <!--[if IE]>
     Enter Student Name
    <![endif]-->
   </div>

  <input type="text" class="inputs" id="editname" placeholder="Enter Student Name" />

  </div> 
```

**jQuery：**

```
$(document).ready(function(){

$("#editname").autocomplete({
 source: "names.php",
 minLength: 2,
});

}); 
```

**PHP：**

```
<?php  

$mysqli = new mysqli('********', '********', '**********', '*********');
$text = $mysqli->real_escape_string($_GET['term']);

$query = "SELECT name FROM users WHERE name LIKE '%$text%' ORDER BY name ASC";
$result = $mysqli->query($query);
$json = '[';
$first = true;
while($row = $result->fetch_assoc())
{
if (!$first) { $json .=  ','; } else { $first = false; }
$json .= '{"value":"'.$row['name'].'"}';
}
$json .= ']';
echo $json;

?> 
```

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2013-02-26T12:14:17.527

该错误是由于**两个**jQuery UI 文件同时加载到客户端浏览器时发生冲突引起的。如果您进入您的`<head>`部分，您可能会看到那里引用**了两个不同的 jQuery UI**文件。只需删除一个，它就会工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-21T22:49:09.960

我遇到了同样的问题，但我在 DOM 中一次只有一个 jquery-ui 脚本标签。我正在使用包含脚本标记的 Ajax 加载内容。如果我在一个页面上这样做了两次，它会破坏自动完成下拉菜单，即使第二个请求的内容正在替换第一个请求的内容。一种解决方法是在呈现包含 jquery-ui 脚本的内容之前添加此行：

`$.ui = null;`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-16T07:51:14.327

当两个jQuery UI文件同时加载到您的浏览器时会导致此错误。这可能会导致jquery冲突。删除未使用的 jquery UI 文件以解决错误。

在我的情况下 jquery-ui.min.js 文件无意中包含在 assets 文件夹中。要删除它，我在 config/main.php 的组件中添加了一个代码

```
 'clientScript' => array(
        'scriptMap' => array(
            'jquery-ui.min.js' => false,
        )), 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-05T09:31:46.120

我有同样的问题，我没有使用 jquery UI 两次，我的 jquery UI 是 jquery DataTable 的一部分。
我的问题通过以下代码解决了
注意：使用此代码，当我们不点击 UL 时，我们需要编写代码来关闭 UL

```
$(".gettingContactList").autocomplete({
     source:this.contactList,
     /*following focus function was written because when mouse
     was being hovered over the menu, the menu was disappearing*/
    focus:function(e,ui) { 
      $(e.toElement).parents().show()
    }
})
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-17T05:39:53.643

在您的标头中加载的 jquery 文件包含所有 UI 元素，并且自动添加到您的文件中的那个具有不需要上传的子元素，因此您应该将其删除。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-03T20:10:06.507

我在提前输入时遇到了类似的问题

我使用了focus()，问题就解决了。

例子：

```
$(ele).typeahead({source: $scope.varMap['abc'], items: undefined});
$(ele).focus(); 
```

# php - TCPDF - 缺少瑞典语字符

> ID：14748195
> 
> 赞同：1
> 
> 时间：2013-02-07T09:56:39.193
> 
> 标签：php, codeigniter, pdf, tcpdf

我在 Codeigniter 中使用 TCPDF 来生成 PDF 文件。

我有从“视图”到包含参数的“控制器”函数的链接。一个参数是**name = 'Högskolan'**。当我在控制器中获取此参数并以 PDF 显示时，有时它显示为“Högskolan”，有时显示为“Hgskolan”（缺少瑞典字符）。此问题仅在 IE 中发生（有时 - 并非总是如此）。

**当我使用File->Save as**和**File->Save**保存此文件时，也存在差异。使用第一个选项，文件保存为“Hgskolan.pdf”，第二个选项保存为“Högskolan.pdf”。

什么会导致这些问题？任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-18T03:11:05.043

我建议做这样的事情：[将重音字符转换为其纯 ascii 等价物](https://stackoverflow.com/questions/10054818/convert-accented-characters-to-their-plain-ascii-equivalents)

您会发现不带重音输出效果更好（当然，前提是它不会显着改变单词）。

正如 anttir 建议的那样，这可能是浏览器特定问题或系统问题不喜欢这些字符。您能否在其他浏览器或其他平台上测试输出以隔离问题。

我不能 100% 确定是 TCPDF 让你跳到那里，还是浏览器。您可以使用 Fiddler ( [http://fiddler2.com/](http://fiddler2.com/) ) 或 Charles ( [http://www.charlesproxy.com/](http://www.charlesproxy.com/) ) [两个调试代理] 来测试它。

# ios - 在 iOS 上使用 Core Graphics 在 PDF 中嵌入超链接

> ID：14748204
> 
> 赞同：6
> 
> 时间：2013-02-07T09:57:00.933
> 
> 标签：ios, pdf, hyperlink, core-graphics

我正在尝试做一件非常简单的事情：在 PDF 文件中写入一个用户可以实际点击的 URL。

我确信使用[libharu](https://github.com/libharu/libharu/wiki/Examples)可以做到。我正在寻找的是使用 Core Graphics 做同样的事情，因为我在我的应用程序中已经拥有的整个代码已经在使用这些方法。

== 编辑 ==

我想我找到了一些东西：`UIGraphicsSetPDFContextURLForRect`但我无法让它工作。

我正在使用类似的东西：

```
NSURL *url = [NSURL URLWithString:@"http://www.google.com"];
UIGraphicsSetPDFContextURLForRect( url, CGRectMake(0, 0, 100, 100)); 
```

但是，矩形是不可点击的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T11:13:35.350

好的，我设法弄清楚为什么它不起作用。

Core Graphics 上下文是“反转”的，原点位于页面左下角，而 UIKit 的原点位于左上角。

这是我想出的方法：

```
- (void) drawTextLink:(NSString *) text inFrame:(CGRect) frameRect {
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGAffineTransform ctm = CGContextGetCTM(context);

    // Translate the origin to the bottom left.
    // Notice that 842 is the size of the PDF page. 
    CGAffineTransformTranslate(ctm, 0.0, 842);

    // Flip the handedness of the coordinate system back to right handed.
    CGAffineTransformScale(ctm, 1.0, -1.0);

    // Convert the update rectangle to the new coordiante system.
    CGRect xformRect = CGRectApplyAffineTransform(frameRect, ctm);

    NSURL *url = [NSURL URLWithString:text];        
    UIGraphicsSetPDFContextURLForRect( url, xformRect );

    CGContextSaveGState(context);
    NSDictionary *attributesDict;
    NSMutableAttributedString *attString;

    NSNumber *underline = [NSNumber numberWithInt:NSUnderlineStyleSingle];
    attributesDict = @{NSUnderlineStyleAttributeName : underline, NSForegroundColorAttributeName : [UIColor blueColor]};
    attString = [[NSMutableAttributedString alloc] initWithString:url.absoluteString attributes:attributesDict];

    [attString drawInRect:frameRect];

    CGContextRestoreGState(context);
} 
```

这个方法的作用是：

*   获取当前上下文并对提供的矩形应用转换，以便获得一个在将框`UIGraphicsSetPDFContextURLForRect`标记为可点击时可以工作的矩形
*   `xformRect`使用上述方法将新矩形 ( ) 标记为可点击
*   保存当前上下文，以便以后所做的任何事情（颜色、大小、属性等）都不会在当前上下文中保持持久性
*   在提供的矩形中绘制文本（现在使用 UIKit 坐标系）
*   恢复上下文 GState

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-21T15:41:24.410

这是**Swift 5的转换代码**

```
let context = UIGraphicsGetCurrentContext()
let ctm = context?.ctm

// Translate the origin to the bottom left.
// Notice that 842 is the size of the PDF page. 
ctm?.translatedBy(x: 0.0, y: 842)

// Flip the handedness of the coordinate system back to right handed.
ctm?.scaledBy(x: 1.0, y: -1.0)

var xformRect: CGRect? = nil
if let ctm = ctm {
    xformRect = frameRect.applying(ctm)
}

let url = URL(string: text)
if let url = url {
    UIGraphicsSetPDFContextURLForRect(url, xformRect ?? CGRect.zero)
}

context?.saveGState()

let attributesDict =[
        .foregroundColor: UIColor.blue,
        .underlineStyle: NSUnderlineStyle.single.rawValue
    ]
let attString = NSMutableAttributedString(string: url?.absoluteString ?? "", attributes: attributesDict as? [NSAttributedString.Key : Any])

attString?.draw(in: frameRect)

context?.restoreGState() 
```

# c# - 如何将表名和选定字段作为参数传递

> ID：14748208
> 
> 赞同：1
> 
> 时间：2013-02-07T09:57:09.560
> 
> 标签：c#, asp.net, informix, parameterized-query

我收到以下错误：

> 错误：-201 消息：[Informix .NET 提供程序][Informix]出现语法错误。

当我尝试执行此代码时：

```
string table_name = resultDt.Rows[0][1].ToString();
string pdf_column = resultDt.Rows[0][0].ToString();
st.Append(" SELECT  ? FROM ?");
paramList.Clear();
paramList.Add("@tablename", table_name);
paramList.Add("@pdf_column", pdf_column);
resultDt =dalHelper.Return_DataTable(st.ToString(), CommandType.Text, paramList);
return resultDt; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:01:29.527

你不能。

请改用 String.Replace。

```
st.Append(" SELECT @pdf_column FROM @tablename");
st.Replace("@tablename", table_name);
st.Replace("@pdf_column", pdf_column); 
```

如果 table_name 和 pdf_column 无论如何来自用户输入，您应该使用 QuoteName 函数（即`QuoteName(table_name)`）来防止 sql 注入。不了解 Informix，但[这里](https://stackoverflow.com/a/3513052/157224)是 SqlServer 的一个。

# ssl - Puppet 代理无法连接到 master

> ID：14748211
> 
> 赞同：5
> 
> 时间：2013-02-07T09:57:30.327
> 
> 标签：ssl, puppet

从现在开始签署 Puppet-Agents 的 2 天以来，我一直在苦苦挣扎。问题如下：

在主人我删除所有现有的签名

> puppet cert clean esx-poc-1.xxx.de

在代理上，我删除了整个 ssl 目录

> rm -rf /var/lib/puppet/ssl/

在代理上运行以下命令之一后...

> puppet 证书生成 esx-poc-1.xxx.de --ca-location 远程 puppet 代理 --server puppetmaster.int.xxx.com --waitforcert 60 --test

...我可以列出主人的证书：

> 傀儡证书列表--全部

输出是：

> "esx-poc-1.xxx.de" (SHA256) 71:72:D8:3E:09:9E:B1:5C:DA:78:A8:B8:A1:2B:E4:09:B8:00: 8A:AF:49:02:CC:B2:B5:C3:25:79:59:0D:A8:F5 + "puppetmaster.int.xxx.com" (SHA256) 7B:00:8C:4F:CE: B2:0D:2F:A1:BB:A7:C4:25:B0:11:01:2B:EC:90:46:D1:CB:BE:AA:AD:3F:B4:70:0C:83: 3F:78（替代名称：“DNS:puppet”、“DNS:puppet.xxx.de”、“DNS:puppetmaster.int.xxx.com”）

与代理签约后：

> puppet 证书签名 esx-poc-1.xxx.de

指纹与上述不同：

> *   “esx-poc-1.xxx.de”（SHA256）49：F6：59：FD：3C：28：C6：54：7F：6E：A7：56：56：DB：64：9A：E2：08： 10:90:11:83:7A:A6:0E:E1:CD:39:F0:E0:1C:25

那是对的吗？

执行 agent-run aferwards 会导致以下错误：

```
Warning: Unable to fetch my node definition, but the agent run will continue: Warning: Error 400 on SERVER: Could not retrieve facts for esx-poc-1.xxx.de: Failed to submit 'replace facts' command for esx-poc-1.xxx.de to PuppetDB at puppetmaster.int.xxx.com:8081: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed: [certificate signature failure for /CN=puppetmaster.int.xxx.com] Info: Retrieving plugin Info: Loading facts in /var/lib/puppet/lib/facter/last_run.rb Info: Loading facts in /var/lib/puppet/lib/facter/pe_version.rb Info: Loading facts in /var/lib/puppet/lib/facter/puppi_projects.rb Info: Loading facts in /var/lib/puppet/lib/facter/root_home.rb Info: Loading facts in /var/lib/puppet/lib/facter/facter_dot_d.rb Info: Loading facts in /var/lib/puppet/lib/facter/iptables.rb Info: Loading facts in /var/lib/puppet/lib/facter/puppet_vardir.rb Error: Could not retrieve catalog from remote server: Error 400 on SERVER: Failed to submit 'replace facts' command for esx-poc-1.xxx.de to PuppetDB at puppetmaster.int.xxx.com:8081: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed: [certificate signature failure for /CN=puppetmaster.int.xxx.com] Warning: Not using cache on failed catalog Error: Could not retrieve catalog; skipping run 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T06:08:30.320

我自己也遇到了同样的问题。问题最终是`puppetdb-terminus`包的版本是，`1.1.0`而`puppetdb`它本身仍然是`1.0.5`.

降级`puppetdb-terminus`后`1.0.5`一切正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T21:40:39.500

在 puppet 3.4 中，我注意到如果未设置主机名，则可能会引发此错误。

例如; 我有两个 Debian 盒子；一个被命名`debian1`，另一个`debian2`在 hosts 文件中。但是，他们的两个`/etc/hostname`设置都在哪里`debian`；在我更改他们的名字`hostname`并设置他们的名字之后，`/etc/hostname`他们工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T15:15:01.490

更改 /etc/puppet 中文件的权限后出现此错误。将它们改回“pe-puppet”（对于企业版）为我解决了这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T23:44:41.527

这可能是一个愚蠢的问题，但是，你有这台机器的节点定义吗？IE，

```
node 'esx-poc-1.xxx.de' {
    .....
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-07T13:37:36.307

在完全重新安装 puppetdb 后，它终于可以工作了......

# javascript - 无法在 GridView 中单击按钮时打开弹出 div

> ID：14748217
> 
> 赞同：2
> 
> 时间：2013-02-07T09:57:51.833
> 
> 标签：javascript, jquery, asp.net, gridview

我里面有一个gridview和一个按钮。[我想做的是从此链接](http://www.ezzylearning.com/tutorials/demos/Popup_Dialog_Windows_using_JQuery.aspx)引用一个简单的弹出 div 。我想在单击按钮时打开它。

这是我的 HTML 代码：

```
<asp:GridView ID="gvContactUs" runat="server" AllowSorting="True" AutoGenerateColumns="False"
                        DataKeyNames="ContactID" Width="100%" CellPadding="3" CellSpacing="1" OnPageIndexChanging="gvContactUs_PageIndexChanging"
                        OnRowCommand="gvContactUs_RowCommand" OnRowDataBound="gvContactUs_RowDataBound"
                        OnRowDeleting="gvContactUs_RowDeleting" OnSorting="gvContactUs_Sorting" AllowPaging="True"
                        BackColor="White" BorderColor="White" BorderStyle="Ridge" BorderWidth="2px" GridLines="None">
                        <Columns>
                            <asp:TemplateField HeaderText="Edit" ItemStyle-HorizontalAlign="Center" HeaderStyle-Width="3%">
                                <ItemTemplate>
                                    <asp:Button Text="text" ID="hello" runat="server" />
                                    <div>
                                        <div id="overlay" class="web_dialog_overlay">
                                        </div>
                                        <div id="dialog" class="web_dialog">
                                            <table style="width: 100%; border: 0px;" cellpadding="3" cellspacing="0">
                                                <tr>
                                                    <td class="web_dialog_title">
                                                        Message
                                                    </td>
                                                    <td class="web_dialog_title align_right">
                                                        <a href="#" id="btnClose">Close</a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" style="padding-left: 15px;">
                                                        <div id="brands">
                                                            <%#Eval("Message")%></a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" style="text-align: center;">
                                                        <input id="btnSubmit" type="button" value="Submit" />
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                </ItemTemplate>
                                <HeaderStyle Width="7%" />
                                <ItemStyle HorizontalAlign="Center" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Name" ItemStyle-HorizontalAlign="Left">
                                <ItemTemplate>
                                    <%#Eval("Name")%>
                                </ItemTemplate>
                                <ItemStyle HorizontalAlign="Left" />
                                <HeaderStyle Width="11%" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Email" ItemStyle-HorizontalAlign="Left" HeaderStyle-Width="13%">
                                <ItemTemplate>
                                    <a href="mailto:<%#Eval("Email")%>" class="EmailLink">
                                        <%#Eval("Email")%></a>
                                </ItemTemplate>
                                <HeaderStyle Width="13%" />
                                <ItemStyle HorizontalAlign="Center" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Phone" HeaderStyle-HorizontalAlign="center" HeaderStyle-Width="7%">
                                <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
                                <ItemStyle HorizontalAlign="Center" Width="40px" />
                                <ItemTemplate>
                                    <%#Eval("Phone")%>
                                </ItemTemplate>
                                <HeaderStyle Width="8%" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Status" HeaderStyle-HorizontalAlign="center" HeaderStyle-Width="7%">
                                <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
                                <ItemStyle HorizontalAlign="Center" Width="40px" />
                                <ItemTemplate>
                                    <%#Eval("Subject")%>
                                </ItemTemplate>
                                <HeaderStyle Width="13%" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Delete" ItemStyle-HorizontalAlign="Center" HeaderStyle-Width="7%">
                                <ItemTemplate>
                                    <asp:LinkButton CommandName="Delete" CommandArgument='<%#Eval("ContactID") %>' runat="server"
                                        ID="lnkbtnDelete"><img src="Images/delete.gif" border="0" alt='Click to Delete this Entry' title='Click to Delete this Entry' />
                                    </asp:LinkButton>
                                </ItemTemplate>
                                <HeaderStyle Width="7%" />
                                <ItemStyle HorizontalAlign="Center" />
                            </asp:TemplateField>
                        </Columns>
                        <FooterStyle BackColor="#C6C3C6" ForeColor="Black" />
                        <HeaderStyle Height="30px" BackColor="#3E3050" Font-Bold="True" ForeColor="#ffffff" />
                        <PagerStyle ForeColor="Black" BackColor="#C6C3C6" HorizontalAlign="Right" />
                        <RowStyle Height="25px" BackColor="#DEDFDE" ForeColor="Black" />
                        <SelectedRowStyle BackColor="#9471DE" Font-Bold="True" ForeColor="White" />
                        <SortedAscendingCellStyle BackColor="#F1F1F1" />
                        <SortedAscendingHeaderStyle BackColor="#594B9C" />
                        <SortedDescendingCellStyle BackColor="#CAC9C9" />
                        <SortedDescendingHeaderStyle BackColor="#33276A" />
                    </asp:GridView> 
```

这是用于弹出窗口的 Css

```
.web_dialog_overlay
{
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
    background: #000000;
    opacity: .15;
    filter: alpha(opacity=15);
    -moz-opacity: .15;
    z-index: 101;
    display: none;
}
.web_dialog
{
    display: none;
    position: fixed;
    width: 380px;
    height: 200px;
    top: 50%;
    left: 50%;
    margin-left: -190px;
    margin-top: -100px;
    background-color: #ffffff;
    border: 2px solid #336699;
    padding: 0px;
    z-index: 102;
    font-family: Verdana;
    font-size: 10pt;
}
.web_dialog_title
{
    border-bottom: solid 2px #336699;
    background-color: #336699;
    padding: 4px;
    color: White;
    font-weight: bold;
}
.web_dialog_title a
{
    color: White;
    text-decoration: none;
}
.align_right
{
    text-align: right;
} 
```

这是弹出的jQuery代码：

```
$(document).ready(function () {

$(function () {
    $('input[id*=hello]').click(function () {
        ShowDialog(true);
        e.preventDefault();
        return false;
    });
});

$('[id$=btnShowModal]').live('click', function (e) {
    ShowDialog(true);
    e.preventDefault();

});

$("#btnClose").click(function (e) {
    HideDialog();
    e.preventDefault();
});

$("#btnSubmit").click(function (e) {
    var brand = $("#brands input:radio:checked").val();
    $("#output").html("<b>Your favorite mobile brand: </b>" + brand);
    HideDialog();
    e.preventDefault();
});
});
function ShowDialog(modal) {
    $("#overlay").show();
    $("#dialog").fadeIn(300);
    if (modal) {
        $("#overlay").unbind("click");
    } else {
        $("#overlay").click(function (e) {
            HideDialog();
        });
    }
}

function HideDialog() {
    $("#overlay").hide();
    $("#dialog").fadeOut(300);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:09:00.040

犯了一个愚蠢的错误：

```
 <asp:GridView ID="gvContactUs" runat="server" AllowSorting="True" AutoGenerateColumns="False"
                        DataKeyNames="ContactID" Width="100%" CellPadding="3" CellSpacing="1" OnPageIndexChanging="gvContactUs_PageIndexChanging"
                        OnRowCommand="gvContactUs_RowCommand" OnRowDataBound="gvContactUs_RowDataBound"
                        OnRowDeleting="gvContactUs_RowDeleting" OnSorting="gvContactUs_Sorting" AllowPaging="True"
                        BackColor="White" BorderColor="White" BorderStyle="Ridge" BorderWidth="2px" GridLines="None">
                        <Columns>
                            <asp:TemplateField HeaderText="Edit" ItemStyle-HorizontalAlign="Center" HeaderStyle-Width="3%">
                                <ItemTemplate>
                                    <asp:Button Text="text" ID="hello" runat="server" />
                                    <div>
                                        <div id="overlay" class="web_dialog_overlay">
                                        </div>
                                        <div id="dialog" class="web_dialog">
                                            <table style="width: 100%; border: 0px;" cellpadding="3" cellspacing="0">
                                                <tr>
                                                    <td class="web_dialog_title">
                                                        Message
                                                    </td>
                                                    <td class="web_dialog_title align_right">
                                                        <a href="#" id="btnClose">Close</a>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" style="padding-left: 15px;">
                                                        <div id="brands">
                                                            <%#Eval("Message")%></a>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                    <td>
                                                        &nbsp;
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td colspan="2" style="text-align: center;">
                                                        <input id="btnSubmit" type="button" value="Submit" />
                                                    </td>
                                                </tr>
                                            </table>
                                        </div>
                                    **</div>**
                                </ItemTemplate>
                                <HeaderStyle Width="7%" />
                                <ItemStyle HorizontalAlign="Center" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Name" ItemStyle-HorizontalAlign="Left">
                                <ItemTemplate>
                                    <%#Eval("Name")%>
                                </ItemTemplate>
                                <ItemStyle HorizontalAlign="Left" />
                                <HeaderStyle Width="11%" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Email" ItemStyle-HorizontalAlign="Left" HeaderStyle-Width="13%">
                                <ItemTemplate>
                                    <a href="mailto:<%#Eval("Email")%>" class="EmailLink">
                                        <%#Eval("Email")%></a>
                                </ItemTemplate>
                                <HeaderStyle Width="13%" />
                                <ItemStyle HorizontalAlign="Center" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Phone" HeaderStyle-HorizontalAlign="center" HeaderStyle-Width="7%">
                                <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
                                <ItemStyle HorizontalAlign="Center" Width="40px" />
                                <ItemTemplate>
                                    <%#Eval("Phone")%>
                                </ItemTemplate>
                                <HeaderStyle Width="8%" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Status" HeaderStyle-HorizontalAlign="center" HeaderStyle-Width="7%">
                                <HeaderStyle HorizontalAlign="Center"></HeaderStyle>
                                <ItemStyle HorizontalAlign="Center" Width="40px" />
                                <ItemTemplate>
                                    <%#Eval("Subject")%>
                                </ItemTemplate>
                                <HeaderStyle Width="13%" />
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="Delete" ItemStyle-HorizontalAlign="Center" HeaderStyle-Width="7%">
                                <ItemTemplate>
                                    <asp:LinkButton CommandName="Delete" CommandArgument='<%#Eval("ContactID") %>' runat="server"
                                        ID="lnkbtnDelete"><img src="Images/delete.gif" border="0" alt='Click to Delete this Entry' title='Click to Delete this Entry' />
                                    </asp:LinkButton>
                                </ItemTemplate>
                                <HeaderStyle Width="7%" />
                                <ItemStyle HorizontalAlign="Center" />
                            </asp:TemplateField>
                        </Columns>
                        <FooterStyle BackColor="#C6C3C6" ForeColor="Black" />
                        <HeaderStyle Height="30px" BackColor="#3E3050" Font-Bold="True" ForeColor="#ffffff" />
                        <PagerStyle ForeColor="Black" BackColor="#C6C3C6" HorizontalAlign="Right" />
                        <RowStyle Height="25px" BackColor="#DEDFDE" ForeColor="Black" />
                        <SelectedRowStyle BackColor="#9471DE" Font-Bold="True" ForeColor="White" />
                        <SortedAscendingCellStyle BackColor="#F1F1F1" />
                        <SortedAscendingHeaderStyle BackColor="#594B9C" />
                        <SortedDescendingCellStyle BackColor="#CAC9C9" />
                        <SortedDescendingHeaderStyle BackColor="#33276A" />
                    </asp:GridView> 
```

忘记关闭一个 div 并且在 jquery 代码中有一个小错误是：

```
 $(function () {
    $('input[id*=hello]').click(function (**e**) {
        ShowDialog(true);
        e.preventDefault();
        return false;
    });
}); 
```

**e**错过了。顺便谢谢大家...... :)

# php - PDF 扩展不加载

> ID：14748220
> 
> 赞同：-2
> 
> 时间：2013-02-07T09:57:57.353
> 
> 标签：php

我正在使用[filethingie](http://www.solitude.dk/filethingie/documentation)将文件上传到我的网站。当我上传文件时，它给出了以下错误。

```
[07-Feb-2013 08:52:28 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:55:00 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:55:01 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:57:16 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:57:16 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:58:19 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:58:19 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:58:28 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:58:29 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:58:52 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 08:58:55 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 09:02:19 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 09:02:25 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 09:02:29 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 09:02:54 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0
[07-Feb-2013 09:02:59 UTC] PHP Warning:  preg_match() [<a href='function.preg-match'>function.preg-match</a>]: Unknown modifier '\' in /home/softlogi/public_html/Softlogic_Research/ft-admin.php on line 113
[07-Feb-2013 09:03:06 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so' - /usr/local/lib/php/extensions/no-debug-non-zts-20090626/pdf.so: cannot open shared object file: No such file or directory in Unknown on line 0 
```

并显示

> name.pdf 未上传。不允许的文件类型

为什么会出现此问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:03:27.583

看起来您已将“pdf.so”添加到您的 php.ini，而没有实际[安装扩展](http://www.php.net/manual/en/install.pecl.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:08:37.550

```
PHP Startup: Unable to load dynamic library 
```

看起来 pdf 扩展名没有正确安装。您可以阅读插件的安装[部分](http://www.solitude.dk/filethingie/documentation#install)来修复此错误。然后阅读有关如何[使用](http://www.solitude.dk/filethingie/documentation#plugins)该插件的信息。只需按照说明进行操作，您就会没事的。

# android - android：隐藏和销毁从服务开始的活动

> ID：14748221
> 
> 赞同：0
> 
> 时间：2013-02-07T09:58:00.093
> 
> 标签：android, android-activity, android-dialog

我是 Android 开发的新手。我正在尝试通过我制作的动态壁纸获利，而广告投放公司希望我从活动的 onCreate 中调用他们的代码。

动态壁纸在我开始通过它获利之前没有任何活动，它是 WallpaperService 的扩展，所以我添加了一个。我设法创建了活动并使其半透明，但是当对话框关闭时它并没有关闭。我无法编辑对话框代码，因为它是通过对 .jar 的调用创建的，所以我想我可以设置一个侦听器以在对话框被关闭时设置，但我找不到任何可能有助于解决问题的实际示例下面的代码。

LWP.java

```
public class SBLiveWallpaper extends WallpaperService {
    super.onCreate();
    Intent i = new Intent();
  //  i.setClass(this, MainActivity.class);
    i.setComponent(new ComponentName("appname", "appname.MainActivity")); 
  //  i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(i);
} 
```

activity_main.xml 没有元素（只有 RelativeLayout）

MainActivity.java

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    AppBucksAPI.initialize(this, APPID, "APIKEY", true, null, null);
    AppBucksAPI.userOptOutDialog(this, "marketname");
} 
```

我可以使活动不透明，只需添加一个关闭按钮，但这很丑陋并且让用户感到困惑。

编辑澄清：我最初尝试直接从服务的 onCreate() 调用对话框。它会导致 LWP 在您可以将其设为活动 LWP 的屏幕中崩溃。我得到的错误是 android.view.WindowManager$BadTokenException: Unable to add window -- token null 不适用于应用程序。

在在这里发表原始帖子之前，我联系了 AppBucks 支持。他们的回应（粘贴在下面）促使我创建半透明活动。：

> 我相信这个错误意味着您传递给 AppBucksAPI.userOptOutDialog 方法的第一个参数有问题......从文档中看起来像这样的调用：
> 
> ```
> AppBucksAPI.userOptOutDialog(this, "<App Name>"); 
> ```
> 
> 此调用需要 Activity 或 Activity 上下文作为第一个参数。它需要这个，因为我们的默认退出对话框使用 AlertDialog 调用，它需要一个活动的 Activity 才能正确显示。如果您已经与服务一起创建了 Activity，则应该将该 Activity 作为第一个参数而不是“this”传递（或者您可以将此调用移至该 Activity 的 onCreate 而不是服务的 onCreate）。
> 
> 如果您的应用程序中没有活动，我发现这个 StackOverflow 问题的答案可能会有所帮助（简而言之，您可以在服务启动时创建一个透明活动，并从中调用 userOptOutDialog 而不是您的服务的 onCreate 方法）： [将 AlertDialog 显示为来自服务的系统覆盖窗口](https://stackoverflow.com/questions/3814126/display-alertdialog-as-system-overlay-window-from-service)

不幸的是，上面的文章在假设阅读它的人可以访问对话框的代码的情况下创建活动和关闭对话框。由于我无权访问它，因为它作为库导入到我的项目中，所以我需要知道如何从父活动中收听，以便孩子完成。

我做了一些挖掘，看起来这些中的任何一个都可以工作，这取决于活动是如何从我的代码生成的对话框调用开始的：

[http://developer.android.com/reference/android/app/Activity.html#finishActivityFromChild(android.app.Activity](http://developer.android.com/reference/android/app/Activity.html#finishActivityFromChild(android.app.Activity) , int)

或者

[http://developer.android.com/reference/android/app/Activity.html#finishFromChild(android.app.Activity)](http://developer.android.com/reference/android/app/Activity.html#finishFromChild(android.app.Activity))

今晚我会试一试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:06:24.980

查看 AppBucks API 和文档，我不认为使用 Activity 是强制性的。这只是最常见的方式。

我认为您也可以在服务 onCreate 中调用 AppBucks 方法吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:43:49.863

关闭您的对话框时，向您的活动发送一个意图以使其自行关闭。

例如

把它放在对话框关闭方法中：

```
sendBroadcast(new Intent(MainActivity.ACTION_TERMINATE)); 
```

然后在 MainActivity 添加并注册一个 BroadcastReceiver：

在活动中为接收者和过滤器添加字段：

```
private ActivityBroadcastReceiver mReceiver;
static final IntentFilter mFilter = new IntentFilter();
static {mFilter.addAction(ACTION_TERMINATE);} 
```

在 onCreate() 中实例化它：

```
mReceiver = new ActivityBroadcastReceiver(); 
```

在 onResume() 中注册它：

```
 registerReceiver(mReceiver, mFilter); 
```

在 onPause() 中取消注册：

```
unregisterReceiver(mReceiver); 
```

广播接收器在活动中的内部类看起来像这样

```
private class ActivityBroadcastReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        try {
            String action = intent.getAction();
            if (ACTION_TERMINATE.equals(action)) {
                finish();
            }
        } catch (Exception e) {
            Log.w(mTag, "Oops: " + e, e);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T15:25:59.640

AppBucks SDK 还公开了以下功能：

```
setIconAdsEnabledForUser
setPushAdsEnabledForUser 
```

这`AppBucksAPI.userOptOutDialog`基本上是一个方便的函数，它将对这些调用包装在一个 AlertDialog 中。对于您的应用程序，放弃便利功能并编写自己`AlertDialog`的直接调用启用功能的应用程序可能更有意义。这样，您将完全控制对话框关闭时发生的情况，并可以在需要时关闭您创建的新活动。

# ios - UITextView 自定义

> ID：14748225
> 
> 赞同：3
> 
> 时间：2013-02-07T09:58:14.823
> 
> 标签：ios, uitextview

我想在我的文本视图中格式化测试，一些粗体文本，一些像这样的斜体。uitextview可以吗？现在我正在使用带有 HTML 字符串的 webview。例如：

```
<html><head><style type=\"text/css\">h3 {color:white;} p {color:pink;} p {text-align: center} p {font-family:helvetica;font-size:20px;}</style></head><body>\
                                         <h3></h3>\
                                         <p><b>some text </b></p>\
                                         <p>Short some text</p>\
                                         <p>Child  Infusion  7.5 to 15 mg/kg/hr<br>ie 7.5 to 15 times weight per hour</p>\
                                         <p>Adult  Infusion  3 to 12 mg/kg/hr<br>ie 3 to 12 mg times weight per hour</p>\
                                         </body></html> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-07T10:01:54.240

您可以使用 NSAttributedString、设置文本字体、前景色和背景色、StrikeThrough 和阴影等。

属性字符串在字符及其属性之间建立关联。与 NSString 对象一样，也有两种变体，NSAttributedString 和 NSMutableAttributedString。虽然之前的 iOS 版本支持属性字符串，但直到 iOS 6 之后，按钮、标签、文本字段和文本视图等控件才定义了一个属性来管理属性。属性应用于一系列字符，例如，您可以为字符串的一部分设置删除线属性。还需要注意的是，属性字符串对象的默认字体是 Helvetica 12-point。如果您为完整字符串以外的范围设置字体属性，请记住这一点。可以使用属性字符串设置以下属性： NSString *const NSFontAttributeName; NSString *const NSParagraphStyleAttributeName; NSString *const NSForegroundColorAttributeName; NSString *const NSBackgroundColorAttributeName; NSString *const NSligatureAttributeName; NSString *const NSKernAttributeName; NSString *const NSStrikethroughStyleAttributeName; NSString *const NSUnderlineStyleAttributeName; NSString *const NSStrokeColorAttributeName; NSString *const NSStrokeWidthAttributeName; NSString *const NSShadowAttributeName; NSString *const NSVerticalGlyphFormAttributeName;

这里有些例子

```
//-----------------------------
// Create attributed string
//-----------------------------
NSString *str = @"example for underline \nexample for font \nexample for bold \nexample for italics";
NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:str];

// Add attribute NSUnderlineStyleAttributeName
//[attributedString addAttribute:NSUnderlineStyleAttributeName value:[NSNumber numberWithInt:NSUnderlineStyleSingle] range:NSMakeRange(12, 9)];
[attributedString addAttribute:NSUnderlineStyleAttributeName value:[NSNumber numberWithInt:NSUnderlineStyleSingle] range:NSMakeRange(12, 9)];

// Set background color for entire range
[attributedString addAttribute:NSBackgroundColorAttributeName
                         value:[UIColor yellowColor]
                         range:NSMakeRange(0, [attributedString length])];

// Create NSMutableParagraphStyle object
NSMutableParagraphStyle *paragraph = [[NSMutableParagraphStyle alloc] init];
paragraph.alignment = NSTextAlignmentCenter;

// Add attribute NSParagraphStyleAttributeName
[attributedString addAttribute:NSParagraphStyleAttributeName value:paragraph range:NSMakeRange(0, [attributedString length])];

// Set font, notice the range is for the whole string
    UIFont *font = [UIFont fontWithName:@"Helvetica" size:18];
[attributedString addAttribute:NSFontAttributeName value:font range:NSMakeRange(35, 4)];

// Set font, notice the range is for the whole string
UIFont *fontBold = [UIFont fontWithName:@"Helvetica-Bold" size:18];
[attributedString addAttribute:NSFontAttributeName value:fontBold range:NSMakeRange(53, 4)];

// Set font, notice the range is for the whole string
UIFont *fontItalics = [UIFont fontWithName:@"Helvetica-Oblique" size:18];
[attributedString addAttribute:NSFontAttributeName value:fontItalics range:NSMakeRange(71, 7)];

// Set label text to attributed string
[self.mytextView setAttributedText:attributedString]; 
```

`

# python - 正交投影 Python

> ID：14748226
> 
> 赞同：0
> 
> 时间：2013-02-07T09:58:14.370
> 
> 标签：python, matplotlib, projection, orthographic, matplotlib-basemap

我使用正交投影来绘制地图。我使用这个程序：

```
from mpl_toolkits.basemap import Basemap
import numpy as np    
import matplotlib.pyplot as plt   
import os, sys    
from sys import argv   
import pylab    
from mpl_toolkits.basemap import Basemap, shiftgrid    
from matplotlib import mpl     
from matplotlib import rcParams    
import matplotlib.pyplot as plt    
import matplotlib.mlab as mlab    
import matplotlib.patches as patches    
import matplotlib.path as path    
import matplotlib.dates as dt    
from numpy import linalg    
import netCDF4    
import time    
import datetime as d   
import sys    
import math    
from mpl_toolkits.axes_grid1 import make_axes_locatable   
from pylab import *

nc = netCDF4.Dataset ('tt.nc')    
latvar = nc.variables['lat']    
lat = latvar[:]    
lon = nc.variables['lon'][:]    
lat_0=30;lon_0=-25    
m1 = Basemap(projection='ortho',lon_0=-25,lat_0=30,resolution='l')    
m = Basemap(projection='ortho',lon_0=lon_0,lat_0=lat_0,resolution='l',\
    llcrnrx=0.,llcrnry=0.,urcrnrx=m1.urcrnrx/2.,urcrnry=m1.urcrnry/2.)

X, Y = m(lon, lat)    
O_x_1=nc.variables['O3']   
h=9    
lev=0    
minOzone=0    
maxOzone=40    
plotOzone = m.pcolor(X,Y,O_x_1[h,lev,:,:],vmin=minOzone,vmax=maxOzone)
ax=colorbar(plotOzone, shrink=0.8,norm=(0,40))    
m.drawcoastlines()   
m.drawparallels(np.arange(-90.,120.,30.))    
m.drawmeridians(np.arange(0.,420.,60.))    
plt.show() 
```

我必须怎么做才能使我的地图以欧洲为中心？

我已经玩过 lat_0 和 lon_0 但这并没有给出我想要的......

我无法添加数字来显示我获得了什么以及我想要什么......

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T12:36:00.703

lat_0 和 lon_0 用于设置投影的原点，而不是地图的范围。通常是失真最小的地方，因此您不希望原点偏离您感兴趣区域的中心太多。如果您不指定范围，底图将自动将地图围绕原点居中。

如果您知道要使用的范围（或边界框），则可以将地图居中（不同于其原点）。如果您知道“正交”投影中的角坐标，则可以使用示例中的关键字（llcrnrx 等）。我对 Basemap 1.0.6 中的 'llcrnrlon' 关键字不满意，它们似乎建议您可以输入地理坐标（纬度/经度）。

另一种方法是抓住轴并手动设置 x 和 y 限制。一个好处是您可以在声明 Basemap 对象之后执行此操作，然后您可以将其用于坐标转换。一个例子：

```
from mpl_toolkits.basemap import Basemap

fig = plt.figure(figsize=(5,5))

m = Basemap(projection='ortho',lon_0=5,lat_0=35,resolution='l')

m.drawcoastlines()
m.drawparallels(np.arange(-90.,120.,15.))
m.drawmeridians(np.arange(0.,420.,30.))

# your extent in lat/lon (dec degrees)
ulx = -10
uly = 65
lrx = 65
lry = 35

# transform coordinates to map projection
xmin, ymin = m(ulx, lry)
xmax, ymax = m(lrx, uly)

# set the axes limits
ax = plt.gca()
ax.set_xlim(xmin, xmax)
ax.set_ylim(ymin, ymax) 
```

确保地图声明中的投影符合您的需求，我刚刚选择了一个属于欧洲的原产地。

![在此处输入图像描述](../Images/13f56971d55df224a4a2a15b36ba1730.png)

# java - Java避免在不相交集的情况下锁定

> ID：14748231
> 
> 赞同：0
> 
> 时间：2013-02-07T09:58:24.933
> 
> 标签：java, multithreading, concurrency, java.util.concurrent

我有一个这样的用例。我的一种方法将 List 作为参数。当且仅当至少一个对象已被其他线程锁定时，我才需要保护关键部分。使用java.util.concurrent包如何实现？我可以想到简单的基于 HashTable 的解决方案，比如

```
class ContainsCriticalSections {
    HashTable<SomeObject, Thread> map; //shared by multiple threads

    someCriticalMethod(List<SomeObject> objects) {
        acquireLocks(objects);
        //do critical task
        releaseLocks(objects);
    }

    synchronized acquireLock(List<SomeObject> objects) {
        bool canLock = false;
        while (!canLock) {
               for (SomeObject obj : objects) {
                   if (!map.contains(obj)) {
                       canLock = true;   
                   }
                   else if(map.get(obj).equals(Thread.currentThread())) {// ensuring re-entrace
                       canLock = true; 
                   }
                   else {
                       canLock = false;    
                   }
               }
               if (!canLock) {
                   wait();
               }
        }
        for (SomeObject obj : objects) {
                   map.put(obj, Thread.currentThread());
        }   

    } 

    synchronized releaseLock(List<SomeObject> objects) {
            for (SomeObject obj : objects) {
                   map.reomve(obj);
            }
            notify();
    }

  } 
```

因此，在上述情况下，如果 A、B、C 和 D、E、F 的两次调用不会阻塞。但是，A、B、C 和 A、E、F 会阻塞。

但是，我强烈认为这里会有一些既定的范例（使用 java.util.Concurrent）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:34:27.733

我怀疑你正在寻找一个`ReadWriteLock`. 有关示例，请参见[ReentrantReadWriteLock 。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/ReentrantReadWriteLock.html)

一个`ReadWrite`锁允许多个并发`Read`锁，但任何获取锁的尝试`Write`都会阻塞，直到所有锁（`Read`或`Write`）都被释放。

因此，您的方法`List`应该请求`Write`锁定，而所有其他方法都请求`Read`锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:09:11.947

你需要获得所有的锁，否则即使当你进入临界区时没有人持有任何锁，当你在里面时有人可能会获得一个。这是可用于在多个锁下运行任务的方法：

```
public static void runUnderMultipleLocks (Runnable task, Object ... monitors)
{
    runUnderMultipleLocks (task, 0, monitors);
}

private static void runUnderMultipleLocks (Runnable task, int offset, Object ... monitors)
{
    if (offset == monitors.length) task.run ();
    else
    {
        synchronized (monitors [offset])
        {
            runUnderMultipleLocks (task, offset + 1, monitors);
        }
    }
} 
```

# css - 如果它的 HTML 在内容之后，我如何推动右浮动？

> ID：14748232
> 
> 赞同：12
> 
> 时间：2013-02-07T09:58:25.483
> 
> 标签：css, layout, css-float, responsive-design

我有一个大部分固定的 2 列布局：

*   第一列占用所需空间
*   第二列具有固定宽度并向右浮动

我想让它成为响应式设计，因此在较小的屏幕尺寸中，第二列在第一列下方结束。这意味着第二列的 HTML 必须在第一列之后。

我的问题是使用该标记时我似乎无法正确浮动右列。它最终浮动，但低于主要内容。

这是一个示例代码：

HTML：

```
<div class='content'>
    sdaohdosahdaf
    <br />adfafhaskldjs sgdafadkfjas
    <br />saodfhdpaofa]sdoas [fdf asfasfjasfdkasfad;sdlafa dfasds dad gad</div>
<div class='sidebar'>
    daobfhaohfasod agsdjfa
    <br />sidjaofhad
    <br />sojghfadpfjas
</div> 
```

CSS：

```
.content {
    background-color: lightblue;
    margin-right: 120px;
}
.sidebar {
    float: right;
    width: 120px;
    background-color: lightgreen;
} 
```

JS小提琴在这里：http: [//jsfiddle.net/zinkkrysty/U3fA8/](http://jsfiddle.net/zinkkrysty/U3fA8/)

我也尝试使用负边距，但似乎做不到。

如果您对我的问题有任何其他方法（除了在第一列设置宽度），请试一试

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:30:00.790

将它们放入父级并将侧边栏的位置设置为绝对，然后为响应式显示使用一组不同的样式

**html**

```
<div class="parent">
    <div class='content'>
        sdaohdosahdaf
        <br />adfafhaskldjs sgdafadkfjas
        <br />saodfhdpaofa]sdoas [fdf asfasfjasfdkasfad;sdlafa dfasds dad gad
    </div>
    <div class='sidebar'>
        daobf haohf asod agsdjfa
        <br />sidja ofhad
        <br />sojgh fadpfjas
    </div>
</div> 
```

**css**

```
.parent {
    position: relative;
}
.content {
    background-color: lightblue;
    margin-right: 120px;
}
.sidebar {
    position: absolute;
    top: 0px;
    right: 0px;
    width: 120px;
    background-color: lightgreen;
}
/* Responsive bit */
@media only screen and (max-width: 320px) {
    .content {
        background-color: orange;
        margin-right: 0px;
    }
    .sidebar {
        background-color: red;
        position: relative;
        width: 100%;
    }
} 
```

[例子](http://jsfiddle.net/U3fA8/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T10:20:00.257

让第**一个 div**有一个`position:absolute;`and with`left:0px;`并且`right`你可以有一个固定的浮动右 div 和一个动态浮动的左 div。

[**演示**](http://jsfiddle.net/AliBassam/amEDc/)

**HTML**

```
<div id="parentDiv">
    <div id="leftDiv">
    </div>
    <div id="rightDiv">
    </div>
</div> 
```

**CSS**

```
#parentDiv
{
    position:relative;
    overflow:hidden;
}
#leftDiv
{
    position:absolute;
    left:0px;
    top:0px;
    right:200px; //Increase it if you want a little space between the 2 divs.
    min-height:200px; // or bottom:0px; if you want a dynamic height
}
#rightDiv
{
    width:200px;
    float:right;
    min-height:200px;
} 
```

[**演示**](http://jsfiddle.net/AliBassam/amEDc/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:16:45.617

试试下面...它会帮助你...

```
.content {
    background-color: lightblue;
    float: left;
}
.sidebar {
    float: left;
    width: 120px;
    background-color: lightgreen;
} 
```

我认为您需要这样...尝试更新的小提琴：http: [//jsfiddle.net/U3fA8/1/](http://jsfiddle.net/U3fA8/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T10:17:04.677

尝试以 % 为单位的负边距

例如margin-top：-10%；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T10:32:26.517

看看你的小提琴**只需添加 margin-top:-60px;** 在您的 .sidebar css 中，它会向上移动。您的 CSS 将如下所示：

```
.content {
    background-color: lightblue;
    margin-right: 120px;
}
.sidebar {
    float: right;
    width: 120px;
    margin-top:-60px;
    background-color: lightgreen;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-17T06:21:21.483

基于[@9205892](https://stackoverflow.com/users/2985029/9205892)的洞察力，即您需要另一个包装器`div`，我发现您避免使用绝对定位（这可能会对两列之后的任何内容造成问题），并且仍然获得响应式设计。只需将这两个部分设置为“浮动”并指定它们的宽度（我只是给了它们百分比）。然后在响应`@media`部分，将每个部分的宽度设置为 100%，浏览器将它们一个接一个地放置。

### HTML

```
<div class="parent">
  <div class='content'>
    sdaohdosahdaf
    <br />adfafhaskldjs sgdafadkfjas
    <br />saodfhdpaofa]sdoas [fdf asfasfjasfdkasfad;sdlafa dfasds dad gad
  </div>
  <div class='sidebar'>
    daobf haohf asod agsdjfa
    <br />sidja ofhad
    <br />sojgh fadpfjas
  </div>
</div> 
```

### CSS

```
.parent {
  position: relative;
}

.content {
    background-color: lightblue;
    width: 60%;
    float: left;
}
.sidebar {
    top: 0px;
    right: 0px;
    width: 40%; /* 100% - .content.width */
    float: left;
    background-color: lightgreen;
}

/* Responsive bit*/
@media only screen and (max-width: 320px) {
  .content {
    background-color: orange;
    width: 100%; /* Leave no room for sidebar */
  }
   .sidebar {
    background-color: red;
    width: 100%; /* Sidebar is puffed up */
  }
} 
```

[演示](https://jsfiddle.net/U3fA8/34/)（基于其他答案的演示）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-19T01:42:38.287

最简单的解决方案是交换您的内容和侧边栏 div。

代替

```
<div class='content'>
    sdaohdosahdaf
    <br />adfafhaskldjs sgdafadkfjas
    <br />saodfhdpaofa]sdoas [fdf asfasfjasfdkasfad;sdlafa dfasds dad gad</div>
<div class='sidebar'>
    daobfhaohfasod agsdjfa
    <br />sidjaofhad
    <br />sojghfadpfjas
</div> 
```

你做：

```
<div class='sidebar'>
    daobfhaohfasod agsdjfa
    <br />sidjaofhad
    <br />sojghfadpfjas
</div>
<div class='content'>
    sdaohdosahdaf
    <br />adfafhaskldjs sgdafadkfjas
    <br />saodfhdpaofa]sdoas [fdf asfasfjasfdkasfad;sdlafa dfasds dad gad</div> 
```

你的CSS保持不变。这就是它的样子，正是你要找的:)

[http://jsfiddle.net/j1wu/vg08f4ep/](http://jsfiddle.net/j1wu/vg08f4ep/)

# razor - 剃刀例外

> ID：14748234
> 
> 赞同：3
> 
> 时间：2013-02-07T09:58:33.743
> 
> 标签：razor, servicestack

毫无疑问，我设置了一些错误，但我的 Razor 模板经常抛出异常，即使模板没有问题。这些通常是通过我进行构建来修复的。

如果我确实在模板中有错误，我会弹出一个窗口，要求我在 VS 中进行调试，但当然这实际上不允许我调试模板。

我的日志中的错误并不是那么有用（见下文）。

是否有可能避免虚假错误并在实际出现问题时获得更好的信息？

```
ServiceStack.Razor.Templating.TemplateCompilationException: Unable to compile template. Check the Errors list for details.
   at ServiceStack.Razor.Templating.TemplateService.CreateTemplate(String template, Type modelType)
   at ServiceStack.Razor.Templating.TemplateService.Compile(ViewPageRef viewPageRef, String template, Type modelType, String name)
   at ServiceStack.Razor.Templating.TemplateService.Compile(ViewPageRef viewPageRef, String template, String name)
   at ServiceStack.Razor.ViewPageRef.Compile(Boolean force) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:22:40.850

我自己也遇到了麻烦，因为 ServiceStack 吞下了异常，并且正如您所说，日志不显示 Errors 集合。有两种方法可以获取该信息：

1.  在 Visual Studio 的调试选项中取消选中**Enable Just My Code （****调试**->**选项和设置**）。如果您在**Debug** -> **Exceptions中检查了****Thrown** for **Common Language Runtime Exceptions**，您将获得异常，并能够查看 Errors 集合。

*****   几天前向 ServiceStack 存储库[提交了一次合并，这使得它记录了错误集合。](https://github.com/ServiceStack/ServiceStack/commit/b3b6a98166cba644446d20f20ceaa4f6f199f711)Demis Bellot 显然经常向 NuGet 推送新版本，因此它可能会在一两周内推出。**** 

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T14:41:05.813

我遇到了类似的问题。我发现找出错误所在的“最简单”的方法是下载所有服务堆栈，构建 razor 库的调试版本并将其链接到我的项目中。然后我在 ServiceStack.Razor.Templating.TemplateService.CreateTemplate 方法中设置了一个断点，并且能够看到完整的异常详细信息。从那里我了解到我在我的 razor 页面中包含了一个在我的项目中没有引用的导入。

自从我解决了这个问题以来，它非常可靠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T12:10:04.453

我有同样的问题。我的情况是，我删除了项目中引用的一些库，但对它们的引用仍然存在（尽管我认为删除了它，但无论如何），这就是问题所在。在我删除了对项目中不再存在的库的引用后，它立即起作用。****

# c# - 编写自定义 IIS 目录列表模块

> ID：14748239
> 
> 赞同：1
> 
> 时间：2013-02-07T09:58:46.190
> 
> 标签：c#, .net, iis

我目前正在寻找用自定义版本替换 IIS 7.5 中内置的“DirectoryListingModule”，以使列表更漂亮一些。问题是我似乎找不到任何关于编写托管模块来自己完成此任务的内容。我已经阅读了[Microsoft 网站](http://www.iis.net/learn/develop/runtime-extensibility/developing-iis-modules-and-handlers-with-the-net-framework)上的 IIS 7 模块/处理程序教程，虽然非常基础，但很有帮助。我也看过[Mike Volodarsky 的实现](http://mvolo.com/get-nice-looking-directory-listings-for-your-iis-website-with-directorylistingmodule/)，但遗憾的是没有提供源代码。我能找到的唯一其他资源可以返回到 Volodarsky 的博客或 Microsoft 页面（也是由 Volodarsky 编写的！）。我想我的意思是我不知道如何从 Microsoft 教程中的基本模块到 Volodarsky 示例的目录列表功能。

如果有人可以提供有关如何解决此问题的提示，我将不胜感激。如果有任何不清楚的地方也请告诉我（我写得很糟糕）。

提前致谢 ：）

编辑 - 为了清楚起见，我意识到我有很多阅读要做，并且不寻找任何人为我做我的工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:11:21.453

Mike Volodarsky 的实现非常简单：

您创建一个模块来拦截对应用程序中“目录”url 的请求。该模块将创建一个表示目录结构的对象集合并将其保存在 httpcontext

然后加载一个绑定到 httpcontext 保存内容的 aspx 页面。

我不明白你在问什么？

如果您无法开发该模块，您可以使用[Mike Volodarsky 的](http://mvolo.com/assets/pre-migration/mvolo-directorylisting-web-v2.1.zip)模块并自定义 aspx 页面...

# php - mysql_fetch_array 给出警告

> ID：14748242
> 
> 赞同：-3
> 
> 时间：2013-02-07T09:58:53.023
> 
> 标签：php

我有问题`mysql_fetch_array`。我收到警告：

```
mysql_fetch_array() expects parameter 1 to be resource, boolean given in D:\wamp\www\bb.php on line 6 bool(false) 
```

这是我的代码：

```
if (isset($_POST['chapter'])AND isset($_POST['verse'])){
  $db=mysql_connect("localhost","fruanthony","admin");  
  mysql_select_db("gths",$db);  
  $results=mysql_query("SELECT * FROM bible where verse=".$_POST['verse']."AND            chapter=".$_POST['chapter']);  
  while($a=mysql_fetch_array($results)){    
   echo $a['info'] ;
   echo "<br>";  
  }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:02:07.863

```
$results=mysql_query("SELECT * FROM bible where verse='".$_POST['verse']."' AND            chapter='".$_POST['chapter']."'"); 
```

您在查询值中缺少单引号`'".$_POST['chapter']."'"`请注意单引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:02:14.610

代替

`$results=mysql_query("SELECT * FROM bible where verse=".$_POST['verse']."AND chapter=".$_POST['chapter']);`

至

```
$results=mysql_query("SELECT * FROM bible where verse = '".$_POST['verse']."' AND chapter = '".$_POST['chapter']."'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:13:15.487

现在试试:)

```
if (isset($_POST['chapter']) AND isset($_POST['verse'])) {

// Dont ignore SQL injection
    $safeChapter = mysql_real_escape_string($_POST['chapter']);
    $safeVerse = mysql_real_escape_string($_POST['verse']);

    $db=mysql_connect("localhost","fruanthony","admin");  
    mysql_select_db("gths",$db);  
    $results=mysql_query("SELECT * FROM bible where verse='".$safeVerse."' AND chapter='".$safeChapter."';");  
    while($a=mysql_fetch_array($results))  
    {    
        echo $a['info'] ;
        echo "<br>";  
    }  
} 
```

# c# - Windows Phone 8 中的网格行定义问题

> ID：14748246
> 
> 赞同：0
> 
> 时间：2013-02-07T09:58:56.427
> 
> 标签：c#, xaml, grid, windows-phone-8

这里的关键问题。就我而言，我为我的应用程序组装了以下代码。不幸的是，它在布局中产生了更大的问题。即使我们将 RowDefinitions 与 Auto 放在一起，它也不会考虑 RowHeight 并进入 Windows Phone 模拟器的底部。

```
 <Grid>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid Grid.Row="0" x:Name="firstGrid" Tap="FirstGrid_OnTap"/>
            <Grid Grid.Row="1" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Button Content="A"/>
                <Button Grid.Column="1" Content="B"/>
            </Grid>
        </Grid>
    </Grid> 
```

在加载页面时，它会使用 ImageBrush 填充 firstGrid。因此，每当用户点击第一个网格时，它只会通过启用第二个网格的可见性向网格再插入一行。第二个网格将有几个按钮。当我看到第二个网格时我很惊讶，因为它隐藏在模拟器的底部。即使我进行了数百次不同的尝试，我也无法深入挖掘它实际存在的主要问题。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T09:59:04.163

根据我的理解，您需要在代码中进行此更改，第一行应该是自动的，第二行是 *.

```
 <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions> 
```

# ruby-on-rails - Rails has_many：通过验证

> ID：14748251
> 
> 赞同：3
> 
> 时间：2013-02-07T09:59:11.483
> 
> 标签：ruby-on-rails, validation, has-many-through

我无法通过关联从 has_many 验证模型。以下是相关型号：

**广播模型**

```
class Broadcast < ActiveRecord::Base

    attr_accessible :content,
                    :expires,
                    :user_ids,
                    :user_id

    has_many :users, through: :broadcast_receipts
    has_many :broadcast_receipts, dependent: :destroy

    validates :user_id, presence: true
    validates :content, presence: true

end 
```

**广播收据模型**

```
class BroadcastReceipt < ActiveRecord::Base

    belongs_to :broadcast
    belongs_to :user

    attr_accessible :user_id, :cleared, :broadcast_id

    validates :user_id      , presence: true
    validates :broadcast_id         , presence: true
end 
```

还与拥有_many 通过广播收据的广播收据的用户相关联。

问题似乎与以下行有关：

```
validates :broadcast_id         , presence: true 
```

每当我尝试创建广播时，我都会得到回滚，但没有给出错误消息。但是，当删除上述行时，一切都按预期工作。

这看起来像是在创建广播收据之前未保存广播的问题。
有什么方法可以验证在收据模型上设置了 broadcast_id 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-20T13:43:00.367

这似乎与此处讨论的问题相同：[https](https://github.com/rails/rails/issues/8828) ://github.com/rails/rails/issues/8828 ，已通过将 :inverse of 添加到连接模型的 has_many 关联中来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:27:12.693

您的代码结构可能存在一些问题。你可以试试这个版本。

```
class Broadcast < ActiveRecord::Base
  # I assume these are the recipients
  has_many :broadcast_receipts, dependent: :destroy
  has_many :users, through: :broadcast_receipts

  # I assume this is the creator
  validates :user_id, :content, presence: true
  attr_accessible :content, :expires, :user_id, :user_ids
end

class BroadcastReceipt < ActiveRecord::Base
  belongs_to :broadcast
  belongs_to :user

  # You should be able to validate the presence
  # of an associated model directly
  validates :user, :broadcast, presence: true

  attr_accessible :cleared
end 
```

# wpf - 在不阻塞当前 UI 的情况下创建 Win32 窗口

> ID：14748255
> 
> 赞同：0
> 
> 时间：2013-02-07T09:59:12.503
> 
> 标签：wpf, tooltip, win32gui

我有一个 WPF 应用程序，我想在单击按钮时创建新的 Win32 窗口（因为它是用 C++ 编写的窗口）。而且，我有一个问题。如果我将光标导航到按钮，则会显示工具提示。而且，点击按钮后，工具提示没有时间消失。

我怎样才能防止这种情况？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:52:51.657

如果工具提示消失，您可以覆盖工具提示的父资源以禁用动画，如下所示：

```
<Page
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:sys="clr-namespace:System;assembly=mscorlib"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
>
<Page.Resources>
    <PopupAnimation x:Key="{x:Static SystemParameters.ToolTipPopupAnimationKey}">None</PopupAnimation>
</Page.Resources>

<Button ToolTip="My ToolTip Content" Content="My Button Content" /> 
```

# shell - 如何计算字符串的 grep 结果，但指定排除项？

> ID：14748256
> 
> 赞同：0
> 
> 时间：2013-02-07T09:59:13.630
> 
> 标签：shell, sorting, count, awk, uniq

我有带有以下参数的邮件日志文件

```
relay=mx3.xyz.com

relay=mx3.xyz.com

relay=mx1.xyz.com

relay=mx1.xyz.com

relay=mx2.xyz.com

relay=home.xyz.abc.com

relay=127.0.0.1 
```

我想计算除 127.0.0.1 之外的所有中继

输出应该是这样的

```
total relay= 6

mx3.xyz.com = 2

mx1.xyz.com = 2

mx2.xyz.com = 1

home.xyz.abc.com = 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:02:45.097

如果您不介意使用 awk：

```
awk -F= '$2 != "127.0.0.1"  &&  /relay/ {count[$2]++; total++} 
  END { print "total relay = "total; 
        for (k in count) { print k" = " count[k]}
      }' maillog 
```

你也可以只用`uniq`and `grep`，虽然你不会这样得到你的总数：

```
 grep relay maillog  | cut -d= -f2 | grep -v 127.0.0.1 | uniq -c 
```

如果你不讨厌 perl：

```
perl -ne '/relay=(.*)/ and $1 ne "127.0.0.1" and ++$t and $h{$1}++;
  END {print "total = $t\n"; 
       print "$_ = $h{$_}\n" foreach keys %h;
  }' maillog 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:03:35.837

干得好：

```
 awk -F= '$2!="127.0.0.1"&&$2{t++;a[$2]++} END{print "total relay="t; for(x in a)print x"="a[x]}' yourfile 
```

输出将是：

```
total relay=6
mx2.xyz.com=1
mx1.xyz.com=2
mx3.xyz.com=2
home.xyz.abc.com=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:29:21.600

我肯定会为此使用 awk （@Faiz 的回答）。但是我制定了这个令人痛苦的管道

```
cut -d= -f2 filename | grep -v -e '^[[:space:]]*$' -e 127.0.0.1 | sort | uniq -c | tee >(echo "$(bc <<< $(sed -e 's#[[:alpha:]].\+$#+#' -e '$a0')) total") | sed 's/^ *\([0-9]\+\) \(.*\)/\2 = \1/' | tac 
```

输出

```
total = 6
mx3.xyz.com = 2
mx2.xyz.com = 1
mx1.xyz.com = 2
home.xyz.abc.com = 1 
```

请不要赞成这个答案；）

# javascript - 从 JSON 对象在 Titanium 中添加表行

> ID：14748264
> 
> 赞同：0
> 
> 时间：2013-02-07T09:59:43.190
> 
> 标签：javascript, titanium, appcelerator

我正在使用 Titanium 构建一个应用程序，我正在尝试从 JSON 对象生成汽车列表，但我似乎没有得到任何结果。当我在循环中记录变量时，我得到“未定义”。我在这里做错了吗？

```
var cars = [
    {title: 'VW Golf', pricePerHour: '6€'},
    {title: 'Peugeot 206', pricePerHour: '5€'},
    {title: 'Renault Clio', pricePerHour: '6,50€'}
];

var tableData = [];

var tableView = Titanium.UI.createTableView();

for (var i = 0; i < cars.length; i++) {

    var tR = Ti.UI.createTableViewRow({
        title: cars.title,
        height: 100
    });
    tableData.push(tR);
}
tableView.setData(tableData);
main.add(tableView);
main.open(); 
```

非常感谢您的帮助，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T15:51:21.007

我在循环中看不到您的调试语句。但是，您尝试在行标题中引用 cars.title，这将是未定义的。cars[i].title 将是对循环中当前对象的标题字段的引用。

# c# - asp:panel 在我单击任何单选按钮后立即隐藏

> ID：14748266
> 
> 赞同：-1
> 
> 时间：2013-02-07T09:59:49.650
> 
> 标签：c#, asp.net, .net

我有一个 asp:panel，上面有一些单选按钮/文本框。一旦我单击任何错误的单选按钮/文本框，面板就会自行隐藏，只有在我单击搜索按钮时才会发回。代码如下：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="PortfolioMenu.ascx.cs" Inherits="Jmmb.PortfolioManagement.WebSite.UserControls.PortfolioMenu" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<div class="navbar">
  <div class="navbar-inner">
    <%--<a class="brand" href="#"><asp:Literal ID="litSiteName" Text="<%$ Resources:General, SiteName %>" runat="server"></asp:Literal></a>--%>    
    <ul class="nav">

         <li>                  
            <asp:HyperLink ID="lnkNewPortfolio" runat="server" CssClass="">
                <i class="icon-plus"></i>
                <asp:Literal ID="Literal6" runat="server" Text="<%$ Resources:MenuItem_NewPortfolio %>"></asp:Literal>
            </asp:HyperLink>       
        </li>

        <li>                       
            <asp:HyperLink ID="lnkSearch" runat="server" CssClass="">
                <i class="icon-search"></i>
                <asp:Literal ID="litSearch" runat="server" Text="<%$ Resources:MenuItem_Search %>"></asp:Literal>
            </asp:HyperLink>       
        </li>
  <!--    <asp:PlaceHolder ID="PlaceHolder1" runat="server">
        <li class="dropdown">
          <a href="#" id="viewdrop" role="button" class="dropdown-toggle" data-toggle="dropdown">
            <i class="icon-folder-close">
            </i>
            <asp:Literal ID="literally2" runat="server" Text="<%$ Resources:MenuItem_View %>"></asp:Literal>
            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
            <li id="li1" runat="server">
              <asp:HyperLink ID="lnkStandardDocs" runat="server">
                <i class="icon-folder-open"></i>
                <asp:Literal ID="Literally8" runat="server" Text="<%$ Resources:MenuItem_Standard Documents%>"></asp:Literal>
              </asp:HyperLink>
            </li>
          </ul>
        </li>
      </asp:PlaceHolder> -->

      <asp:PlaceHolder ID="PlaceHolder2" runat="server">
        <li>
            <asp:Panel runat="server" Visible="true">
                <asp:TextBox ID="txtSearchAdvancedKeyword" runat="server" Text="<%$ Resources:MenuItem_Enter_Keyword %>" ></asp:TextBox>
                <asp:LinkButton runat="server" OnClick="search"><i class="icon-search" style="margin-bottom:5px"></i></asp:LinkButton>           </asp:Panel>
        </li>
        <li class="dropdown" style="margin-left:-74px;margin-top:-5px;">
          <a href="#" id="A1" role="button" class="dropdown-toggle" data-toggle="dropdown" style="margin-top:6px;padding-top:4px;padding-bottom:4px;">
            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="drop3" style="margin-left:-180px">
            <li id="li2" runat="server" style="margin:20px">
            <br />
                <asp:Literal ID="Literal10" runat="server">Search By</asp:Literal>
                <br />
              <asp:Panel runat="server" Width="500" Visible="true" >

                <!--<ul class="nav">-->
                    <br />
                    <asp:RadioButton ID="SearchAdvancedTypePortfolio" GroupName="SearchAdvancedType" runat="server"  />
                    <asp:Label runat="server" Text="Portfolio"></asp:Label>
                    <asp:Label runat="server" Text="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"></asp:Label>
                    <asp:RadioButton ID="SearchAdvancedTypeClient" GroupName="SearchAdvancedType" runat="server"/>
                    <asp:Label runat="server" Text="Client"></asp:Label>
                    <asp:Label runat="server" Text="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"></asp:Label>
                    <asp:RadioButton ID="SearchAdvancedTypeAgent" GroupName="SearchAdvancedType" runat="server"/>
                    <asp:Label runat="server" Text="Agent"></asp:Label>
                    <br />
                    <br />
                    <asp:TextBox runat="server" ID="txtSearchByNo" Text="Number"  Width="100"></asp:TextBox>
                    <asp:Label runat="server" Text="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"></asp:Label>
                    <asp:Literal runat="server">Or</asp:Literal>
                    <asp:Label runat="server" Text="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"></asp:Label>
                    <asp:TextBox runat="server" ID="txtSearchByName" Text="Name" Width="100"></asp:TextBox>
               <!-- </ul>-->

              </asp:Panel>
              <br />
                    <asp:Literal ID="Literal9" runat="server">And Or By</asp:Literal>
                    <br />
              <asp:Panel ID="Panel1" runat="server" Width="500">
              <div class="navbar-inner">
                <ul class="nav">
                    <br />
                    <asp:RadioButton ID="SearchAdvancedLastReviewDate" GroupName="SearchAdvancedDate" runat="server"/>
                    <asp:Label runat="server" Text="Last Review Date"></asp:Label>
                    <asp:Label runat="server" Text="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"></asp:Label>
                    <asp:RadioButton ID="SearchAdvancedNextReviewDate" GroupName="SearchAdvancedDate" runat="server"/>
                    <asp:Label runat="server" Text="Next Review Date"></asp:Label>
                    <asp:Label runat="server" Text="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"></asp:Label>
                    <asp:RadioButton ID="SearchAdvancedCreateDate" GroupName="SearchAdvancedDate" runat="server"/>
                    <asp:Label runat="server" Text="Create Date"></asp:Label>
                    <br />
                    <br />

                    <asp:CalendarExtender ID="SearchAdvancedAjaxTDateExtender1" runat="server" TargetControlID="txtSearchAdvancedDateStart"
                    PopupButtonID="image2" PopupPosition="BottomLeft">
                    </asp:CalendarExtender>

                            <asp:TextBox ID="txtSearchAdvancedDateStart" BackColor="White" runat="server" Text="Start" CssClass="" style="cursor :default" Width="100"></asp:TextBox>
                            <img id="SearchAdvancedImg1" alt="" src="~/Content/images/date_delete.png" runat="server"/>

                    <asp:Label ID="Label1" runat="server" Text="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"></asp:Label>

                    <asp:CalendarExtender ID="SearchAdvancedAjaxTDateExtender2" runat="server" TargetControlID="txtSearchAdvancedDateEnd"
                    PopupButtonID="image2" PopupPosition="BottomLeft">
                    </asp:CalendarExtender>

                            <asp:TextBox ID="txtSearchAdvancedDateEnd" runat="server" CssClass="" BackColor="White" Text="End" style="cursor :default" Width="100"></asp:TextBox>
                         <img id="SearchAdvancedImg2" alt="" src="~/Content/images/date_delete.png" runat="server"/>
                </ul>
                </div>
              </asp:Panel>
              <br />
                    <asp:Button runat="server" ID="btnSearchAdvanced" Text="Search" OnClick="submit"></asp:Button>
                    <br />
            </li>
          </ul>
        </li>
      </asp:PlaceHolder>

      <asp:PlaceHolder ID="phManageMenu" runat="server">
        <li class="dropdown">
          <a href="#" id="drop3" role="button" class="dropdown-toggle" data-toggle="dropdown">
            <i class="icon-tasks"></i>
            <asp:Literal ID="Literal1" runat="server" Text="<%$ Resources:MenuItem_Manage %>"></asp:Literal>
            <b class="caret"></b>
          </a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="drop3">
            <li id="liSettings" runat="server">
              <asp:HyperLink ID="lnkSettings" runat="server">
                <i class="icon-wrench"></i>
                <asp:Literal ID="Literal2" runat="server" Text="<%$ Resources:MenuItem_Settings %>"></asp:Literal>
              </asp:HyperLink>
            </li>
            <li id="liClients" runat="server">
              <asp:HyperLink ID="lnkClients" runat="server">
                <i class="icon-user"></i>
                <asp:Literal ID="Literal3" runat="server" Text="<%$ Resources:MenuItem_Clients %>"></asp:Literal>
              </asp:HyperLink>
            </li>
            <li id="liAccounts" runat="server">
              <asp:HyperLink ID="lnkAccounts" runat="server">
                <i class="icon-briefcase"></i>
                <asp:Literal ID="Literal4" runat="server" Text="<%$ Resources:MenuItem_Accounts %>"></asp:Literal>
              </asp:HyperLink>
            </li>
            <li id="liAttachments" runat="server">
              <asp:HyperLink ID="lnkAttachments" runat="server">
                <i class="icon-download-alt"></i>
                <asp:Literal ID="Literal5" runat="server" Text="<%$ Resources:MenuItem_Attachments %>"></asp:Literal>
              </asp:HyperLink>
            </li>
            <li>
              <asp:HyperLink ID="lnkRecommendation" runat="server" >
                <i class="icon-bullhorn"></i>
                <asp:Literal ID="Literal8" runat="server" Text="<%$ Resources:Recommendations %>"></asp:Literal>
              </asp:HyperLink>
            </li>

            <li class="divider"></li>
            <li id="liObjectives" runat="server">
              <asp:HyperLink ID="lnkObjectives" runat="server">
                <i class="icon-calendar"></i>
                <asp:Literal ID="Literal7" runat="server" Text="<%$ Resources:MenuItem_Objectives %>"></asp:Literal>
              </asp:HyperLink>
            </li>

          </ul>
        </li>
      </asp:PlaceHolder>
      <li class="divider-vertical"></li>             

    </ul> 

    <asp:PlaceHolder ID="phPortfolioNumber" runat="server" Visible="false">
        <ul class="nav pull-right"> 
          <li>            
              <asp:HyperLink ID="lnkPortfolio" runat="server">
                <asp:Label ID="lblPortfolioName" runat="server" Text="<%$ Resources:Label_PortolioName %>"></asp:Label>&nbsp;
                <asp:Literal ID="litPortfolioName" runat="server"></asp:Literal>&nbsp; 
                (<asp:Literal ID="litPortfolioNumber" runat="server"></asp:Literal>)
              </asp:HyperLink>     
          </li>                
        </ul>
    </asp:PlaceHolder>
  </div>
</div> 
```

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:23:25.970

尝试`AutoPostBack="False"`为您的 RadioButtons 设置属性：

```
<asp:RadioButton ID="SearchAdvancedLastReviewDate" GroupName="SearchAdvancedDate" AutoPostBack="False" runat="server"/> 
```

# mono - 使用 PushSharp 为推送通知注册 MonoDroid 设备

> ID：14748268
> 
> 赞同：2
> 
> 时间：2013-02-07T10:00:14.263
> 
> 标签：mono, xamarin.android, google-cloud-messaging, pushsharp

在我的 monodroid 应用程序中，我在使用 pushSharp 为推送通知注册某些设备时遇到问题。我的一般推送通知设置在 SGS2、SGS3 和 Nexus7 等新设备上运行良好，但在运行 2.2 和 2.2.1 的 Legend 和 Hero 上，注册失败（在调试中运行良好）。我已将问题缩小到 StartService 调用：

```
var intent = new Intent(GCMConstants.INTENT_TO_GCM_REGISTRATION);
intent.SetPackage(GSF_PACKAGE);
intent.PutExtra(GCMConstants.EXTRA_APPLICATION_PENDING_INTENT,
                PendingIntent.GetBroadcast(context, 0, new Intent(), 0));
intent.PutExtra(GCMConstants.EXTRA_SENDER, senders);
context.StartService(intent); 
```

清单文件看起来不错：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET" />
...
<!-- Google Cloud Messaging (GCM) for push messages -->
<permission android:name="my.package.name.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="my.package.name.permission.C2D_MESSAGE" />    
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

意图看起来很好（act = com.google.android.c2dm.intent.REGISTER pkg = com.google.android.gsf）并且senderId是正确的，但是GCMIntentService OnReceive方法永远不会被触发......

有时使用 logcat 可以看到以下错误消息（尽管不一致）：

```
E/C2DMRegistrar(  302): [C2DMReg] handleRequest caught java.io.IOException: SSL shutdown failed: I/O error during system call, Broken pipe. 
```

我不太确定如何解决这个问题，并希望得到任何帮助。

谢谢彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T19:11:48.317

您不需要这些权限，因为它们应该在您的 pushsharp 代码中设置...

```
 <permission android:name="my.package.name.permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name="my.package.name.permission.C2D_MESSAGE" />    
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

# visual-studio-2010 - 报告服务 - 最后交互式排序空值 - Reportviewer VS2010

> ID：14748273
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:00:27.913
> 
> 标签：visual-studio-2010, sorting, dynamic, reporting-services

SSRS 2008

我在一个也有空值的列上定义了交互式排序。

我希望空值**始终**出现在报告的**末尾**，无论方向是**Ascending 还是 Descending**。

VS2010中Reportviewer显示报表

用户单击列标题以激活交互式排序

欢迎所有帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:08:02.040

我可以在这里想到一种解决方法，它可能有帮助也可能没有帮助，但最坏的情况可能会给你更多的想法。

您可以尝试做的实际上是使用两个表，并将排序仅应用于一个，但使其看起来像报表中的一个表。

**创建两个表：**

![在此处输入图像描述](../Images/db826a0eccd237b9181e099ba8c0c055.png)

![在此处输入图像描述](../Images/76202b3a7d044a13d5c2bf346e62e8d8.png)

**对表应用过滤器以在第一个中显示非空值，在第二个中显示空值。**

![在此处输入图像描述](../Images/1118e211a9f300d41c3c7467fa8d496c.png)

我使用了以下表达式：

```
=IIf(IsNothing(Fields!val2.Value), "NULL", "NOTNULL") 
```

**将交互式排序应用于第一个表。**

这给出了结果：

![在此处输入图像描述](../Images/cdb261421281a93beb590167c9e16119.png)

![在此处输入图像描述](../Images/8353297081704c66acbb6a6e133f09f6.png)

所以在这个简单的例子中，它实现了你所追求的。

由于它实际上是两个对象，因此您可能会在用户意想不到的地方出现中断；这可以通过将对象与**Rectangle**保持在一起来缓解。

如果您正在寻找多个列，这可能不合适，但希望它有所帮助。

# jakarta-ee - 如何为嵌入式 EJB 容器定义测试数据源

> ID：14748280
> 
> 赞同：9
> 
> 时间：2013-02-07T10:00:49.590
> 
> 标签：jakarta-ee, jpa, glassfish, ejb, maven-glassfish-plugin

我正在尝试使用嵌入式 EJB 容器测试我的 EJB。在生产中，我依赖于应用服务器中配置的 JTA 数据源。但是，在测试期间，我想连接到不同的数据库（内存 Derby）。

问题是我看不到如何告诉 EJB 容器通过连接到内存中的 derby DB 来覆盖我的生产 persistence.xml（在 src/main/resources/META-INF 中）中定义的 JTA 数据源。JTA 数据源在 persistence.xml 文件中定义，如下所示：

```
<jta-data-source>jdbc/myDS</jta-data-source> 
```

## 尝试 1：使用测试 persistence.xml

我尝试创建一个测试 persistence.xml 文件（在 src/test/resources/META-INF 中），它定义：

```
<property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.EmbeddedDriver" />
<property name="javax.persistence.jdbc.url" value="jdbc:derby:memory:myDataBase;create=true;" />
<property name="javax.persistence.jdbc.user" value="sa" />
<property name="javax.persistence.jdbc.password" value="password" /> 
```

但这没有实际意义，因为当我指定 EJB 容器以使用被测模块时

```
Map properties = new HashMap();
properties.put(EJBContainer.MODULES, new File[] { new File("target/classes/") });
ec = EJBContainer.createEJBContainer(properties); 
```

容器只使用主 persistence.xml 文件而不是我的测试文件。

## 尝试 2：将主类和测试类合并到一个分解模块中

我认为使这种方法起作用的唯一方法是使用[此处](http://pschyska.blogspot.com.au/2011/06/unit-testing-ejb-31-with-netbeans-maven.html)描述的方法- 将被测模块的类复制到单独的位置（例如 target/ejb-testing-classes），然后复制测试 persistence.xml文件放在顶部，然后将这个新位置指定给 EJB 容器：

```
Map properties = new HashMap();
properties.put(EJBContainer.MODULES, new File[] { new File("target/ejb-testing-classes/") });
ec = EJBContainer.createEJBContainer(properties); 
```

但这似乎不必要地笨拙。如果我尝试在容器中部署预打包的模块（即依赖项），将来也可能会出现问题，因为我需要在合并之前分解 jar。

## 我的愿望：EJB 容器的数据源覆盖属性

我认为可能有其他属性可以传递到 EJB 容器中，但到目前为止，我只能找到适合[openEJB](http://tomee.apache.org/configuring-datasources-in-tests.html)或[websphere](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r0/index.jsp?topic=/com.ibm.websphere.nd.doc/info/ae/ae/rejb_emconproperties.html)的属性。我正在使用嵌入式 Glassfish 来提供我的嵌入式 EJB 容器，因为它是目标平台。*（我现在找到了 glassfish 属性 - 请参阅下面的更新 #1）*

当然，每个尝试使用嵌入式 EJB 容器和与生产数据库不同的数据源测试 EJB 的人都遇到过这个问题。甚至[这个人](https://stackoverflow.com/a/3939617/378606)也只是在这一点上放弃并使用了默认的嵌入式数据库，这对我来说不是一个选项。

任何帮助将非常感激。

***更新 1：****我找到了Glassfish EJB 容器接受[的属性列表，](http://docs.oracle.com/cd/E18930_01/html/821-2424/gjlde.html#gksnv)起初我似乎可以使用以下属性*

```
org.glassfish.ejb.embedded.glassfish.configuration.file 
```

*在 domain.xml 中定义数据源并将容器指向它。但是，根据[源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.glassfish.ejb/ejb-container/3.1.1/org/glassfish/ejb/embedded/EJBContainerProviderImpl.java#EJBContainerProviderImpl.getLocations%28java.util.Map%29)，除非还设置了 installation.root 属性，否则此属性将被忽略 - 这意味着需要预先安装 glassfish 才能运行我的测试。这会不可接受地降低我的 Maven 项目的可移植性。:(*

***更新 2：****我为这个问题创建了一个[JIRA 问题](http://java.net/jira/browse/GLASSFISH-19654)，并建议为 glassfish EJB 容器引入属性，该容器允许配置 JTA 数据源。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:31:10.097

无法使用嵌入式 Glassfish 完成。

正如我在更新 1 中所指出的，为了使用数据源配置嵌入式 EJB 容器，您必须：

1.  使用新数据源配置 domain.xml 文件
2.  配置嵌入式 EJB 容器以使用现有 Glassfish AS 安装
3.  配置嵌入式 EJB 容器以使用步骤 1 中的 domain.xml 文件。

所以（感谢第 2 步）再见，便携性。但这是我必须采用的“解决方案”，直到 Glassfish 开发人员解决我通过属性配置数据源的请求（请参阅问题上方的 JIRA 链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:51:19.477

对于我的东西，当不直接使用嵌入式容器但使用 Arquillian 项目时，它工作得很好。当使用 ShrinkWrap 助手时，我可以告诉通过测试 persistence.xml（以及其他替代品）。

这显示了一个非常简短的示例：[https ://community.jboss.org/thread/198239](https://community.jboss.org/thread/198239)

HTH，蒂莫

# jquery - Json 每 x 秒更新一次 SetInterval

> ID：14748290
> 
> 赞同：4
> 
> 时间：2013-02-07T10:01:13.357
> 
> 标签：jquery, json

我制作了这个脚本来获取一些 json 信息：

```
 $(document).ready(function(){

    $.ajax({
      url: 'url',
      dataType: 'json',
      cache: true,
      timeout: 30000,
      success: function(data) {

            // $('#output ul').append('<li>The feed loads fine');
            $('#output ul').empty();

            $.each(data.posts, function(i,data){ 

                $('#output ul').append('<li><a href="'+data.image+'"><img class="thumb" src="'+data.image+'" alt="" /></a><h3>'+data.title+'</h3><p>'+data.text+'</p></li>');

            });

        },
        error: function(){
            $('#output ul').append('<li>Error');
        }
    });
 }); 
```

但我想每 x 秒更新一次提要。我读了很多关于它的书，但我可以完成它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:04:34.360

```
var foo = function() {
    $.ajax({
      url: 'url',
      dataType: 'json',
      cache: true,
      timeout: 30000,
      success: function(data) {

            // $('#output ul').append('<li>The feed loads fine');
            $('#output ul').empty();

            $.each(data.posts, function(i,data){ 

                $('#output ul').append('<li><a href="'+data.image+'"><img class="thumb" src="'+data.image+'" alt="" /></a><h3>'+data.title+'</h3><p>'+data.text+'</p></li>');

            });

        },
        error: function(){
            $('#output ul').append('<li>Error');
        }
    });
    setTimeout(foo, 3000);
}

foo(); 
```

3000 是您希望在再次调用该函数之前等待的毫秒数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:05:30.883

使用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)重复调用代码块，并将您的代码放在某个函数中并将函数名称传递给`setInterval`第一个参数。您可以传递匿名函数而不是创建一个新函数，`repeatMe`但我更喜欢创建函数以使代码更具可读性。

```
function repeatMe(){
 $.ajax({
  url: 'url',
  dataType: 'json',
  cache: true,
  timeout: 30000,
  success: function(data) {

        // $('#output ul').append('<li>The feed loads fine');
        $('#output ul').empty();

        $.each(data.posts, function(i,data){ 

            $('#output ul').append('<li><a href="'+data.image+'"><img class="thumb" src="'+data.image+'" alt="" /></a><h3>'+data.title+'</h3><p>'+data.text+'</p></li>');

        });
    },
    error: function(){
        $('#output ul').append('<li>Error');
    }
 });
}

setInterval(repeatMe, 5000); 
```

**编辑**在第一次完成工作后，最好使用 setTimeout 而不是 setInterval 在成功发送下一次更新调用。我们还将 setTimeout 设置为错误，以保持重复调用更新。

```
function repeatMe(){
 $.ajax({
  url: 'url',
  dataType: 'json',
  cache: true,
  timeout: 30000,
  success: function(data) {
        // $('#output ul').append('<li>The feed loads fine');
        $('#output ul').empty();
        $.each(data.posts, function(i,data){ 

            $('#output ul').append('<li><a href="'+data.image+'"><img class="thumb" src="'+data.image+'" alt="" /></a><h3>'+data.title+'</h3><p>'+data.text+'</p></li>');
            setTimeout(repeatMe, 5000);
        });
    },
    error: function(){
        $('#output ul').append('<li>Error');
        setTimeout(repeatMe, 5000);
    }
 });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:05:14.080

```
setInterval(function(){

  $.ajax({
      url: 'url',
      dataType: 'json',
      cache: true,
      success: function(data) {

            // $('#output ul').append('<li>The feed loads fine');
            $('#output ul').empty();

            $.each(data.posts, function(i,data){ 

                $('#output ul').append('<li><a href="'+data.image+'"><img class="thumb" src="'+data.image+'" alt="" /></a><h3>'+data.title+'</h3><p>'+data.text+'</p></li>');

            });

        },
        error: function(){
            $('#output ul').append('<li>Error');
        }
    });

},30000);  //30000 == 30 seconds 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T10:05:39.223

```
$(document).ready(function(){
    setInterval(function() {
       $.ajax({
         url: 'url',
         dataType: 'json',
         cache: true,
         timeout: 30000,
         success: function(data) {    
            // $('#output ul').append('<li>The feed loads fine');
            $('#output ul').empty();

            $.each(data.posts, function(i,data){ 

                $('#output ul').append('<li><a href="'+data.image+'"><img class="thumb" src="'+data.image+'" alt="" /></a><h3>'+data.title+'</h3><p>'+data.text+'</p></li>');

            });

           },
            error: function(){
               $('#output ul').append('<li>Error');
           }
        });
    }, 1000 * x);
 }); 
```

上面的代码应该可以正常工作。只需在此处输入所需的秒数而不是 x：`1000 *x`

请记住，您应该将指向函数的指针作为第一个参数传递给 setInterval。如果你只是这样做，`setInterval($.ajax({...}), x)`你实际上是说 $.ajax 返回的函数应该每 x 秒执行一次。但它返回 jQuery 对象，而不是函数。这就是为什么在我的代码中 ajax 被包裹着`function() {}`

# c++ - 在向量 C++ 上操作时出现运行时断言错误

> ID：14748293
> 
> 赞同：2
> 
> 时间：2013-02-07T10:01:25.457
> 
> 标签：c++, stl, runtime, erase, assertion

我有一个向量数组**arr**，我想从数组向量中搜索并删除在其中一个元素中具有特定值的向量，称之为**elementA**。它发生在我身上，如果你看一下数组内部，这样的条件对于连续的几个连续向量是完全满足的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:08:23.960

在您的代码中：

```
int eStart = -1; int eEnd = -1; 
for ( int i=0; i<arr.size()-1; i++ )
{
    if ( -1 == eStart && arr[i].getElementA() == 0 )
        eStart = i;
    if ( arr[i].getElementA() == 0 )
        eEnd = i;
}
arr.erase( arr.begin()+eStart, arr.begin()+eEnd ); 
```

传递给擦除的第二个迭代器必须是您要擦除的最后一个迭代器（并且仅当您找到一些需要擦除的元素时才调用擦除）：

```
arr.erase( arr.begin()+eStart, arr.begin()+eEnd +1 ); 
```

错误：在算术期间检查“迭代器范围”：结果必须是`>=`第一个元素和`<=`最后一个元素。`begin()-1`不适合：当您不检查是否找到时，这就是您所拥有的，即`eRtart=-1`.

```
_SCL_SECURE_VALIDATE_RANGE(
        _Myptr + _Off <= ((_Myvec *)(this->_Getmycont()))->_Mylast &&
        _Myptr + _Off >= ((_Myvec *)(this->_Getmycont()))->_Myfirst);
    _Myptr += _Off; 
```

注意：不建议从 std::containers 继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:06:20.850

```
int eStart = -1; int eEnd = -1; 
for ( int i=0; i<arr.size()-1; i++ )
{
    if ( -1 == eStart && arr[i].getElementA() == 0 )
        eStart = i;
    if ( arr[i].getElementA() == 0 )
        eEnd = i;
}
if(estart != -1)    // added check <---------------------------------
    arr.erase( arr.begin()+eStart, arr.begin()+eEnd ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:54:18.263

你可以使用[remove-erase idioms](http://en.wikipedia.org/wiki/Erase-remove_idiom)来简化你的代码：

```
struct IsZeroA
{
  IsZeroA() {}
  bool operator()(ClassA a) 
  {
    return a.getElementA() == 0;
  }
};

arr.erase(std::remove_if(arr.begin(), arr.end(), IsZeroA()), arr.end()); 
```

如果您使用 C++11，则使用 lambda

```
arr.erase(std::remove(arr.begin(), arr.end(), 
         [](const ClassA& a){ return a.getElementA() == 0; })); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T21:24:50.900

现在我们不需要审查您的代码，而是提供“通用”解决方案。

我了解您明确希望利用要擦除的元素是连续的这一事实。

我们将使用**@billz**`IsZeroA`引入的谓词。

 **```
auto first=find_if(arr.begin(), arr.end(), IsZero()  );
if(first!=arr.end())
{
    auto last= find_if_not(first, arr.end(), IsZero()  );
    arr.erase(first,last);
} 
```

它可以简化为：

```
auto  first = find_if  (arr.begin(), arr.end(), IsZero()  );
arr.erase( first, find_if_not(first, arr.end(), IsZero()) ); 
```**

# hibernate - 更改 grails 中的连接池类型

> ID：14748303
> 
> 赞同：2
> 
> 时间：2013-02-07T10:02:03.300
> 
> 标签：hibernate, grails, database-connection, connection-pooling, c3p0

我需要将我的 grails 应用程序中的连接池类型更改为 c3p0。我在网上搜索过，也搜索过堆栈溢出，但找不到足够的资源。

我知道我需要在 resources.groovy 中创建一个新的数据源并覆盖现有的数据源。但我现在确切地知道我应该如何去做。

任何人都可以帮我解决它。请为此提供逐步指导，而不是提供一些我可以参考的链接，这是一种友好的请求。我已经提到了链接的数量，并且无法从中找出任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:02:40.593

尝试这些解决方案，在博客中有示例和分步指导。

[如何为具有多个数据源的 grails 2.X 应用程序配置 c3p0？](https://stackoverflow.com/questions/12532003/how-do-i-configure-c3p0-for-a-grails-2-x-application-with-multiple-datasources)

[配置 Grails 以使用自己的 DataSource 实现或代理标准 DataSource](https://stackoverflow.com/questions/3404255/configuring-grails-to-use-own-datasource-implementation-or-to-proxy-the-standard)

# php - PHP 在 while 中切换内容

> ID：14748304
> 
> 赞同：0
> 
> 时间：2013-02-07T10:02:05.480
> 
> 标签：php, while-loop

我有一个标准的 Mysqli/php 代码来回显项目列表。

因此，假设用户选择编辑指定的产品。产品正在一段时间循环中打印。我如何仅在 ex 中切换内容。产品 9 如果在 while 循环中打印了 100 个产品？

所有产品都在一个 Div 中。

一些代码例如：

```
$query = $mysqli->query("SELECT item_name, item_id FROM items");
while($items = $query->fetch_assoc()){

  echo $items['item_name'];
  echo '<a href="" onclick="switch content of only the single product that has been chosen">Edit me</a>'

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:10:10.080

您可以为此使用三元运算符：

```
$query = $mysqli->query("SELECT item_name, item_id FROM items");
while($items = $query->fetch_assoc())
{   
    $clickEvent = ($items['item_id'] == 9) ? 'for id 9' : 'for others';
    echo $items['item_name'];
    echo '<a href="" onclick="'.$clickEvent.'">Edit me</a>'
} 
```

# linux - Linux - Ubuntu：获取目录内所有 pdf 的全局大小

> ID：14748310
> 
> 赞同：0
> 
> 时间：2013-02-07T10:02:25.027
> 
> 标签：linux, command-line

我的服务器上有这个文件系统：

```
/a/b/c/<NAME>/*/deploy/*.pdf 
```

我的目标是获取 /a/b/c/ 中所有 PDF 文件的全局大小。所以，我应该得到所有目录和部署目录中所有 pdf 的大小。

我试过了：

```
sudo du -ch $(sudo find . -type f \(  -name '*.pdf' \)) 
```

但没有成功。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:11:27.607

```
find /a/b/c/*/deploy -name *.pdf | xargs du -ch 
```

# c++ - 为什么我不能使用单个非类型参数内联模板函数的显式实例化？

> ID：14748315
> 
> 赞同：1
> 
> 时间：2013-02-07T10:02:31.000
> 
> 标签：c++, templates, inline, header-files

假设我有一个在中声明和定义的非类型模板函数`f(int)`（参数`<int dim>`）。在我进一步添加了一个特化 for ，然后我显式地实例化了and的模板函数。`template.h``template.cpp``template.cpp``dim = 2``dim = 1``dim = 2`

文件编译正常，但在链接过程中出现错误：

```
Undefined symbols for architecture x86_64:
  "void f<2>(int)", referenced from:
      _main in main-2AW7ED.o
ld: symbol(s) not found for architecture x86_64 
```

但是，如果我`inline`从模板专业化中删除关键字（见下面的标记），整个事情就会按预期工作。所以我的问题来了：

**`inline`当它适用于基本模板时，为什么它不适用于专用模板，而其他所有东西都可以编译并正常工作？**

*主文件*

```
#include <iostream>
#include "template.h"

using namespace std;

int main(int, char** )
{
  f<1>(456); 
  f<2>(789);
} 
```

*模板.h*

```
template <int dim> void f(int src); 
```

*模板.cpp*

```
#include <iostream>
#include "template.h"

using namespace std;

template <int dim> inline
void f(int src)
{
  cout << "src = " << src << endl;
  cout << "dim (template) = " << dim << endl;
}

template <> inline // <== if I remove this "inline", everything works as expected
void f<2>(int src)
{
  cout << "src = " << src << endl;
  cout << "dim (fixed) = " << 2 << endl;
}

template void f<1>(int);
template void f<2>(int); 
```

PS：我用g++和clang++的命令`clang++ -o tmpl template.cpp main.cpp`编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:08:48.243

如果函数被声明`inline`，编译器*必须*不生成非内联版本，除非请求指向函数的指针，或者它决定在某些调用站点最好不要内联它（编译器不需要总是内联甚至如果你声明`inline`）。

现在要内联函数，编译器需要在编译调用站点时查看函数的定义。但是您在 a 中定义了函数`.cpp`并试图从不同的`.cpp`. 因此编译器*看*不到定义并尝试调用非内联版本。但它没有生成，因为您告诉编译器内联函数并且它没有看到需要非内联版本的任何用途，所以它没有生成它。如果您不声明`inline`，则始终会生成默认值，`extern`并且始终会生成非内联版本。并且您声明了要生成的显式实例，因此将是。

正如编译器不必内联一样，它也不必生成 extern 版本。我怀疑存在一些随机差异导致编译器在一种情况下生成非内联实例，而不是在另一种情况下生成。在任何一种情况下，如果您声明内联的内容，则必须在标头中定义它，除非您实际上只是从一个源中使用它（例如，有时私有方法可以内联并在实现中定义，因为您只在那个源中使用它们文件）。

# jquery - 使用带有 codeigniter 的 jquery 表单插件？

> ID：14748316
> 
> 赞同：0
> 
> 时间：2013-02-07T10:02:34.673
> 
> 标签：jquery, ajax, codeigniter, jquery-validate

我正在尝试通过 Jquery Form 插件处理表单，并使用 jquery 验证插件 [jQuery Form Plugin进行简单验证](http://malsup.com/jquery/form/)

只是表单停留在发送和获取结果，而不是在它自己发送到操作页面的页面内显示打印结果

```
 var JQUERY4U = {};
 JQUERY4U.UTIL = {
     setupFormValidation: function () {
         $("#addCatgory").validate({
             rules: {
                 categoryname: {
                     required: true,
                     minlength: 5
                 },
                 categoryslug: {
                     required: true,
                     minlength: 5
                 }
             },
             messages: {
                 categoryname: 'Please enter your name',
                 categoryslug: 'Please enter a valid email'
             }
         });
     }
 }
 $(document).ready(function () {
     $('#addCatgory').AjaxForm({
         url: 'dashboard/categories/add',
         target: '#result',
         beforeSubmit: JQUERY4U.UTIL.setupFormValidation(),
         success: function (msg) {
             $('#result').fadeIn('slow', function () {
                 $('#result').html(msg);
             });
         }
     });
 }); 
```

验证工作很好，完全没有问题，
但是在验证通过后，而不是将结果显示到结果 div 中，它带我进入带有成功消息的空白页面。
这是控制器功能。

```
public function add ()
    {
        $data = array();
        if (!empty($_POST)) {
            $this->model->insert();
            echo 'welcome';
            exit;
        }

        $data['parent_cats'] = $this->model->get_parent();
        $this->load->view('dashboard/addcategory', $data, FALSE);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:08:02.050

您需要提交ajaxForm

```
$(document).ready(function () {
  $(document).on('click','.submitButton',function(e){
     e.preventDefault();
     $('#addCatgory').AjaxForm({
         url: 'dashboard/categories/add',
         target: '#result',
         beforeSubmit: JQUERY4U.UTIL.setupFormValidation(),
         success: function (msg) {
             $('#result').fadeIn('slow', function () {
                 $('#result').html(msg);
             });
         }
     }).submit();
   })
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:18:38.203

摆脱您的整个`JQUERY4U.UTIL.setupFormValidation()`函数，因为它应该只在 DOM 就绪时调用一次，而不是在您单击提交时调用。（[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)用于初始化插件。）

初始化后，它会自动捕获所有事件，包括`click`提交按钮。因此，您然后[使用`submitHandler`回调函数来执行您的 Ajax 函数](http://docs.jquery.com/Plugins/Validation/validate#options)。

假设您内部的所有其他内容`.AjaxForm()`都是正确的：

```
$(document).ready(function () {

    $("#addCatgory").validate({
        rules: {
            categoryname: {
                required: true,
                minlength: 5
            },
            categoryslug: {
                required: true,
                minlength: 5
            }
        },
        messages: {
            categoryname: 'Please enter your name',
            categoryslug: 'Please enter a valid email'
        },
        submitHandler: function (form) {
            $(form).AjaxForm({
                url: 'dashboard/categories/add',
                target: '#result',
                success: function (msg) {
                    $('#result').fadeIn('slow', function () {
                        $('#result').html(msg);
                    });
                }
            });
            return false;
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/xMMLC/](http://jsfiddle.net/xMMLC/)**

# c# - excel工作表的C# Autofit方法

> ID：14748322
> 
> 赞同：3
> 
> 时间：2013-02-07T10:02:48.217
> 
> 标签：c#, .net, excel

我正在使用 C# .net 创建一个 excel 表。最后我想自动调整列。我正在使用以下代码。

```
 sheet0.Cells["A2:B2"].Columns.AutoFit(); 
```

但这是一个例外。谁能帮我解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-07T10:35:08.963

您可以使用：

```
sheet0.Columns.AutoFit(); 
```

* * *

这将重新调整此工作表中每一列的大小以最适合。

**自动调整文档：**

> 更改范围内的列宽或范围内的行高以实现最佳拟合。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-07T11:09:42.923

尝试这样做：

```
sheet0.Columns["A:B"].AutoFit(); 
```

# php - 如何在我的数据库中配对图像？

> ID：14748323
> 
> 赞同：0
> 
> 时间：2013-02-07T10:02:51.590
> 
> 标签：php, html, mysql, database

我很难给这个问题一个标题，我希望我足够清楚。我将 PHP 和 HTML 与 MYSQL 数据库一起使用。

看我有一个会员网站，每个新会员都会随机选择一名足球运动员作为他们的头像。足球运动员头像是从名为“头像”的文件夹中分配的。用户注册后，头像将移动到名为“used_avatars”的文件夹中。每个图像都被命名​​为足球运动员，因为我想在用户会员页面上显示所选球员的名字。

这是真正的问题：我想在会员网站上添加一个代表玩家国籍的标志。但我有几名巴西球员，只有一面巴西国旗。我如何将我的 5 名球员与一个标志配对。我正在考虑将图像命名为“巴西罗纳尔多”、“巴西卡洛斯”，然后在 PHP 中以某种方式将国家与名称分开，并将它们与旗帜和头像相匹配。这有意义吗？有没有更好的方法来做到这一点？我想我需要在我的数据库中创建一个新表来记录标志和头像匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:25:24.350

希望这可以帮助：

您需要一个包含国籍 id 字段的球员表格和一个包含国旗名称的国籍表格。

这样您就可以通过 id 选择玩家并加入国籍。

然后，您所要做的就是将玩家 ID 保存在用户“个人资料”中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:30:40.067

不要为新成员分配随机玩家头像，而是分配默认头像（卡通）。

1.  成员/用户表将有一列`avatar_id`。
2.  一张桌子`avatars_history (member_id, avatar_id, order)`。其中`order`将是更改它们的顺序。如有必要，您也可以约会。
3.  一张桌子`football_players (player_id, country_id, full_name, dob, world_rank, etc)`。
4.  一张表`avatars (player_id, avatar_id)`，其中`avatar_id`是图片的文件名。这意味着单个玩家可以拥有多张图片。

并将所有头像（具有唯一名称的玩家图片）保存在一个文件夹中。

# symfony - 在 symfony2 中查找所有条件

> ID：14748326
> 
> 赞同：8
> 
> 时间：2013-02-07T10:02:56.313
> 
> 标签：symfony, repository, entitymanager, findall

有没有办法在`findAll()`条件下使用该功能？

我想做类似的事情

```
->findAll('active'=1); 
```

我知道我可以编写自定义存储库类，但只是为了一个简单的“where-condition”，我认为有一种更简单的方法。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-07T10:07:25.353

您可以使用`findBy`：

```
$objects = $yourRepo -> findBy(array('key' => $value )); 
```

# excel - 范围 = 在 [vba] 之前找到的列

> ID：14748328
> 
> 赞同：1
> 
> 时间：2013-02-07T10:03:02.660
> 
> 标签：excel, vba

我目前正在创建一个 VBA 宏，它将搜索名为“电子邮件”或“电子邮件 - 个人电子邮件”的列（这是同一列，但这两个名称是替代品）。

因此，首先搜索电子邮件列，找到后检查电子邮件地址末尾是否有任何点。如果是，它应该删除它们。

我的 VBA 知识有限，而且我不是 IT 专家。所以我主要使用和修改我在互联网上找到的现有脚本。下面是我结合2个宏的代码。它工作正常，但仅当电子邮件列位于同一位置时（在本例中为 S 列）。我应该如何修改代码以使用发现电子邮件标题的列？

**我的代码：**

```
Sub GOOD_WORKS_No_Dots_at_End_of_Emails()
    Dim strSearch As String
    Dim aCell As Range

    strSearch = "Email*"

    Set aCell = Sheet2.Rows(1).Find(What:=strSearch, LookIn:=xlValues, _
    LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then
        Sheets("Data").Activate
            Dim LR As Long, i As Long
            LR = Range("S" & Rows.Count).End(xlUp).Row
            For i = 1 To LR
                With Range("S" & i)
                    If Right(.Value, 1) = "." Then .Value = Left(.Value, Len(.Value) - 1)
                End With
            Next i
            Sheets("Automation").Activate
            MsgBox "No Dots at the end of email addresses - Done!"
            End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:20:25.320

以下应该工作

```
'rowNum<~~~ Enter the row number your "Header fields" are in
 'returns a dictionary object
Function getAllColNum(ByVal rowNum As Long, ByVal searchString As Variant) As Object
    Dim allColNum As Object
    Dim i As Long
    Dim j As Long
    Dim width As Long
    Set allColNum = CreateObject("Scripting.Dictionary")
    colNum = 1
    With ActiveSheet
        width = .Cells(rowNum, .Columns.Count).End(xlToLeft).Column
        For i = 1 To width
             If InStr(UCase(Trim(.Cells(rowNum, i).Value)), UCase(Trim(searchString))) > 0 Then
                 allColNum.Add i, ""
             End If '
        Next i
    End With
    Set getAllColNum = allColNum
End Function

Sub GOOD_WORKS_No_Dots_at_End_of_Emails()
    Dim strSearch As String
    strSearch = "Email"
    Dim colNum As Variant
    Dim allColNum As Object
    Sheets("Data").Activate
    Dim LR As Long, i As Long
    Set allColNum = getAllColNum(1, searchString)
    For Each colNum In allColNum
        LR = Cells(Rows.Count, colNum).End(xlUp).Row
        For i = 1 To LR
            With Range(Cells(i, colNum), Cells(i, colNum))
                If Right(.Value, 1) = "." Then .Value = Left(.Value, Len(.Value) - 1)
            End With
        Next i
    Next colNum
    Sheets("Automation").Activate
    MsgBox "No Dots at the end of email addresses - Done!"
End Sub 
```

# sql - 通过组合两个表中的数据获取第三个表中的条件数据

> ID：14748330
> 
> 赞同：0
> 
> 时间：2013-02-07T10:03:04.947
> 
> 标签：sql, sql-server-2008

我有 3 个表： RoomRateChange 、 RoomRateCotract 和 DisplayInventory

房费变化：

```
| RoomID|RateID|Description|RateDate
----------------------
|   101   |  701|   abc       | 2013-04-01 00:00:00.000| 
```

房费合同：

```
| RoomID|RateID|           StartDate    |           EndDate      |Description
----------------------------------------------------------------------------------------
|   101   |  701|2013-04-01 00:00:00.000| 2013-04-30 00:00:00.000|null 
```

展示库存：

```
| RoomID|RateID|Description|RateDate
---------------------- 
```

我陷入了困境。对于特定的 RoomID、RateID 和特定的日期，如果我在 RoomRateChange 中有数据，那么我应该在第三个表（DisplayInventory）中添加来自 RoomRateChange 的描述值，否则我应该从 RoomRateCotract 表中选择描述值。

对于上述情况，输出应为

展示库存

```
| RoomID|RateID|Description|RateDate
----------------------
|   101   |  701|  abc     | 2013-04-01 00:00:00.000|
|   101   |  701|  NULL     | 2013-04-02 00:00:00.000|
|   101   |  701|  NULL     | 2013-04-03 00:00:00.000| 
```

以此类推，直到 30 日。

我正在使用 SQL Server 2008

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:14:29.390

似乎您可以使用递归 CTE 来获得结果：

```
;with data (roomid, rateid, startdate, enddate, description) as
(
  select roomid, rateid, startdate, enddate, description
  from RoomRateCotract
  union all
  select roomid, rateid, dateadd(day, 1, startdate), enddate, description
  from data
  where dateadd(day, 1, startdate) <= enddate
)
-- insert into DisplayInventory
select 
  r.roomid, 
  r.rateid,
  case 
    when r.ratedate = d.startdate 
    then r.description else d.description end description,
  d.startdate RateDate
from data d
left join RoomRateChange r
  on d.roomid = r.roomid
  and d.rateid = r.rateid 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/0786d/2)。

递归部分将获取每个房间和价格的开始/结束日期列表：

```
;with data (roomid, rateid, startdate, enddate, description) as
(
  select roomid, rateid, startdate, enddate, description
  from RoomRateCotract
  union all
  select roomid, rateid, dateadd(day, 1, startdate), enddate, description
  from data
  where dateadd(day, 1, startdate) <= enddate
)
select *
from data 
```

然后使用结果，您将加入以`RoomRateChange`获得结果。然后可以使用它来填充`DisplayInventory`表格。

# css - 如何为标签使用 CSS3 背景线性渐变（Highcharts）

> ID：14748334
> 
> 赞同：0
> 
> 时间：2013-02-07T10:03:15.880
> 
> 标签：css, background, highcharts, linear-gradients

我正在尝试设置 Highcharts 图表的样式，例如。[这个](http://www.highcharts.com/demo/)。

我正在寻找的是一种将 CSS3 背景线性渐变添加到 xAxis 和 yAxis 标签的解决方案。

有人已经启动并运行了类似的东西吗？还是 SVG 图表不可能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:19:02.090

您可以将标签的 useHTML 设置为 true，然后使用格式化程序定义您自己的 div 并使用 css3 样式，如下例所示：

```
labels: {
            useHTML: true,
            formatter: function () {
                return '<div class="label">' + this.value + ' </div>';
            }
        } 
```

[http://jsfiddle.net/MV4pb/](http://jsfiddle.net/MV4pb/)

[http://api.highcharts.com/highstock#xAxis.labels.formatter](http://api.highcharts.com/highstock#xAxis.labels.formatter) [http://api.highcharts.com/highstock#xAxis.labels.useHTML](http://api.highcharts.com/highstock#xAxis.labels.useHTML)

# php - Current_timestamp 未显示当地时间

> ID：14748335
> 
> 赞同：1
> 
> 时间：2013-02-07T10:03:24.017
> 
> 标签：php, mysql, phpmyadmin, timezone

我创建了一个表，付款时间`payment_time TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP`在我的数据库中。当我在将 payment_time 字段保留为空白的同时插入一个值时，时间已存储在 GMT -7 上，而我在 GMT +00 上停留。我认为这是因为服务器时区是 GMT -7。如何将本地时间插入数据库？即使不可能，那么我至少希望在从数据库输出时获得本地时间（我的意思是在查询时）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:03:11.137

看看这个。[http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html](http://dev.mysql.com/doc/refman/5.5/en//time-zone-support.html)

要更改全球时区：

```
mysql> SET GLOBAL time_zone = timezone; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:07:34.463

将时区设置命令放入该脚本中，从其中插入时间`SET time_zone = 'country_name/city';`，您可以通过 php 网站中不同国家和州的链接。假设我正在执行 xyz.php 脚本，它将时间插入数据库，那么它应该看起来像这样

```
<?php date_default_timezone_set('Asia/Kolkata'); //you ned to put this line of code at the start of the script ?> 
```

# xml - 在 Magento 中覆盖 CurrencyController

> ID：14748338
> 
> 赞同：0
> 
> 时间：2013-02-07T10:03:30.767
> 
> 标签：xml, magento, controller, overriding

我是 Magento 新手，我正在尝试覆盖控制器“app/code/core/Mage/Directory/controllers/CurrencyController.php”以在货币更改时清除购物车。

我尝试了很多方法来做到这一点，所以我相信在 XML 文件中丢失了......

有人可以帮我吗？？？

贝娄遵循我正在做的事情：

* * *

文件夹结构

_app _code _local _Emptycart _D​​irectory _controllers _CurrencyController.php

_app _code _local _Emptycart _D​​irectory _etc _config.xml

* * *

/app/code/local/Emptycart/Directory/etc/config.xml

```
<config>
    <frontend>
        <routers>
            <directory>
                <use>standard</use>
                <args>
                    <modules>
                        <Emptycart_Directory before="Mage_Directory">Emptycart_Directory</Emptycart_Directory>
                    </modules>
                </args>
            </directory>
        </routers>
    </frontend>
</config> 
```

* * *

/app/code/local/Emptycart/Directory/controllers/CurrencyController.php

```
<?php

require_once 'Mage/Directory/controllers/CurrencyController.php';
class Emptycart_Directory_CurrencyController extends Mage_Directory_CurrencyController
{
    public function switchAction()
    {
        die('it worked!');
        if ($curency = (string) $this->getRequest()->getParam('currency')) {
            Mage::app()->getStore()->setCurrentCurrencyCode($curency);
        }

        //Get cart helper
        $cartHelper = Mage::helper('checkout/cart');
        //Get all items from cart
        $items = $cartHelper->getCart()->getItems();
        //Loop through all of cart items
        foreach ($items as $item) {
            $itemId = $item->getItemId();
            //Remove items, one by one
            $cartHelper->getCart()->removeItem($itemId)->save();
        }

        $this->_redirectReferer(Mage::getBaseUrl());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:27:28.220

您可以使用此 [模块创建](http://www.silksoftware.com/magento-module-creator/)器创建模块的基本骨架。然后您可以将其与您创建的模块进行比较。这样调试变得容易。如果您想从头开始学习模块创建，请阅读[magento wiki 文章](http://www.magentocommerce.com/knowledge-base/categories/category/development/)。

# ios - 当我们从一个视图控制器移动到另一个视图控制器时如何检查设备方向？

> ID：14748340
> 
> 赞同：0
> 
> 时间：2013-02-07T10:03:37.147
> 
> 标签：ios, objective-c, uiviewcontroller

假设，我在处于横向模式的视图控制器中。当我推送新的视图控制器时，如何检查以前的视图控制器方向并更改此视图的方向？

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:07:51.507

它必须以自动化的方式完成。在每个视图控制器中，您必须定义此方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

您可以在其中设置控制器的方向。

在 iOS 5 或更早版本`UIViewController`中，默认情况下仅处理纵向。
要处理其他可能的方向，您必须在视图控制器中实现此方法：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

    return YES;
} 
```

您可能还想定义处理旋转的方法：

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration 
```

或者

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

或者以自动化的方式进行。

你可以在这里阅读更多[**。**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

> 处理视图旋转
> 
> 在 iOS 6 中，您的应用支持在应用的 Info.plist 文件中定义的界面方向。视图控制器可以覆盖supportedInterfaceOrientations 方法来限制支持的方向列表。一般情况下，系统只会在窗口的根视图控制器或呈现为填满整个屏幕的视图控制器上调用该方法；子视图控制器使用其父视图控制器为它们提供的窗口部分，并且不再直接参与有关支持哪些旋转的决策。应用程序的方向掩码和视图控制器的方向掩码的交集用于确定视图控制器可以旋转到哪些方向。
> 
> 你可以覆盖一个视图控制器的 preferredInterfaceOrientationForPresentation，该视图控制器旨在以特定方向全屏显示。
> 
> 在 iOS 5 和更早版本中，UIViewController 类仅以纵向模式显示视图。要支持其他方向，您必须重写 shouldAutorotateToInterfaceOrientation: 方法并为您的子类支持的任何方向返回 YES。如果您的视图的自动调整大小属性配置正确，那么您可能只需要这样做。但是，UIViewController 类为您提供了额外的钩子来根据需要实现额外的行为。通常，如果您的视图控制器打算用作子视图控制器，它应该支持所有界面方向。
> 
> 当可见视图控制器发生旋转时，将在旋转期间调用 willRotateToInterfaceOrientation:duration:、willAnimateRotationToInterfaceOrientation:duration: 和 didRotateFromInterfaceOrientation: 方法。viewWillLayoutSubviews 方法也会在视图被其父级调整大小和定位后调用。如果在方向更改发生时视图控制器不可见，则永远不会调用旋转方法。但是，viewWillLayoutSubviews 方法在视图变得可见时被调用。您对此方法的实现可以调用 statusBarOrientation 方法来确定设备方向。
> 
> 注意：在启动时，应用程序应始终将其界面设置为纵向。在 application:didFinishLaunchingWithOptions: 方法返回后，应用程序使用上述视图控制器旋转机制在显示窗口之前将视图旋转到适当的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:12:15.630

根据您的问题，您能否更详细地解释您的要求以及为什么要这样做不是很清楚。

根据我的理解，您可以在新视图控制器中检查设备的当前方向，这将是前一个视图中设备的先前方向。

问候拉胡尔·杜贝

# javascript - Javascript - 内部有暂停的循环

> ID：14748342
> 
> 赞同：0
> 
> 时间：2013-02-07T10:03:39.200
> 
> 标签：javascript, html5-video

我希望这发生在一个无限循环中，我可以在某个时候退出，但这不是重点..

所以我有一个带有视频或图像的 dom 元素列表。

我先看看，这是不是图片，如果是的话：

```
Display the image for X seconds
Then continue 
```

如果是视频

```
I play the video, and on the onend event, I continue 
```

现在我重新开始这个过程，再看一遍，视频还是图像？所以流程永远持续下去，当它到达终点时，它只是进入第一个元素。

现在做所有这些都不是问题，但是将其放入循环中并暂停 X 时间，或者直到视频播放完毕，我被卡住了。

这就是它的样子：

```
func = () ->
console.log "Loop started, now wait X seconds"

delay 3000, ->
    console.log "OK, I waited 3 seconds, now lets go on"

delay 1000, ->
    console.log "Cool, I waited another second, now lets go on"
console.log "Ok, nothing to do, lets start again.."
func() 
```

因此，在这种情况下，此循环应每 4 秒重新启动一次我可以查看的方法有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:26:22.073

我认为你的代码应该是这样的结构：

```
status = 'nothing'

function loop() {
    if status == 'nothing'

        if next item is image
            show image
            status = 'image'
            countdown = 1000 // time to display the image

        if next item is video
            play video
            videoIsEnded = false
            status = 'video'
            video.onend = function { videoIsEnded = true }

    if status == 'image'
        if countdown-- < 0
            hide image
            status = 'nothing'

    if status == 'video'
        if videoIsEnded
            hide video
            status = 'nothing'
}

setInterval(loop, 1000) // check the status every second 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:26:30.247

不要使用无限循环。

请改用[requestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)：

```
 // shim layer with setTimeout fallback
    window.requestAnimFrame = (function(){
      return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function( callback ){
                window.setTimeout(callback, 1000 / 60);
              };
    })();

    // usage: 
    // instead of setInterval(render, 16) ....

    (function animloop(){
      requestAnimFrame(animloop);
      render();
    })();
    // place the rAF *before* the render() to assure as close to 
    // 60fps with the setTimeout fallback. 
```

为了暂停，您可以使用时间戳：

[http://jsfiddle.net/q7qrP/1/](http://jsfiddle.net/q7qrP/1/)

# c# - 如何从 PSD 文件中获取 DPI

> ID：14748344
> 
> 赞同：3
> 
> 时间：2013-02-07T10:03:45.647
> 
> 标签：c#, .net, photoshop

我有几个 PSD 文件我正在使用[http://imageresizing.net/](http://imageresizing.net/)库将文件转换为 jpg

如何使用 C# 从 PSD 文件中获取 DPI 信息？

**更新** 我已经编写了以下代码但是问题是它在后台打开 Photoshop

```
ps.Application a = new ps.Application() { Visible = false };
a.Load(filePath);
ps.Document doc = a.ActiveDocument;
dpi = doc.Resolution;
a.ActiveDocument.Close();
a.Quit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:06:22.573

这些是我以编程方式打开 PS 时使用的第一个设置：

```
 // Open PhotoShop
                app = new ps.Application();
                app.Preferences.RulerUnits = ps.PsUnits.psPixels;
                app.DisplayDialogs = ps.PsDialogModes.psDisplayNoDialogs;
                app.Visible = false; 
```

# python - 停止 matplotlib 3D 曲面图的轴标签被切断

> ID：14748345
> 
> 赞同：15
> 
> 时间：2013-02-07T10:03:46.890
> 
> 标签：python, matplotlib

我正在编写一段代码来模拟原子在电场和磁场中的相互作用。其中一部分需要我在给定高度生成相互作用势的 3D 图。生成这些图的完整代码很长，并且分为几个模块，但是相关的绘图部分是：

```
# Function to plot 'PlotValues' at a height 'z'
def Plot_AtHeight(self, PlotValues, z=500, ReturnFig=False, ShowTime=False):

    # Calls out to the relevant function to calculate the values and return
    # these as an array
    PlotArray = self.Get_AtHeight(PlotValues, z)

    pylab.rcParams.update( \
        {'axes.labelsize': 18,
         'text.fontsize': 18,
         'xtick.labelsize': 18,
         'ytick.labelsize': 18
         })

    fig = pylab.figure()
    ax = Axes3D(fig)

    # Make the arrays of the points at which the values are calculated
    X, Y = np.mgrid[Xmin:Xmax:complex(0,Xpoints),
                   Ymin:Ymax:complex(0,Ypoints)]

    ax.plot_surface(X, Y, PlotArray, cmap=cm.jet)

    ax.set_xlabel('Position, x (nm)')
    ax.set_ylabel('Position, y (nm)')

    if PlotValues   == 'B':           ax.set_zlabel('Field Strength (G)',         fontsize=18)
    elif PlotValues == 'E':           ax.set_zlabel('Field Strength (V/m)',       fontsize=18)
    elif PlotValues == 'U_Stark':     ax.set_zlabel('Stark Interaction (J)',      fontsize=18)
    elif PlotValues == 'U_Zeeman':    ax.set_zlabel('Zeeman Interaction (J)',     fontsize=18)
    elif PlotValues == 'U':           ax.set_zlabel('Interaction Potential (J)',  fontsize=18)
    elif PlotValues == 'U_Stark_mK':  ax.set_zlabel('Stark Interaction (mK)',     fontsize=18)
    elif PlotValues == 'U_Zeeman_mK': ax.set_zlabel('Zeeman Interaction (mK)',    fontsize=18)
    elif PlotValues == 'U_mK':        ax.set_zlabel('Interaction Potential (mK)', fontsize=18)

    # If we are not in a time averaged environment then display the current
    # time (in ns) as the title to 1 decimal place.
    if not self.TimeAveraged and ShowTime:
        TimeStr = str(time*10**9)
        try:
            TimeTo1dp = '.'.join([TimeStr.split('.')[0], TimeStr.split('.')[1][0]])
        except:
            TimeTo1dp = TimeStr
        ax.set_title("t = %sns" % TimeTo1dp, fontsize=18)

    if not ReturnFig: pylab.show()
    elif ReturnFig: return fig 
```

此返回的图示例如下：

![创建的地块之一](../Images/2592fe36aa95e2edeb18d43df49914ec.png)

您可以看到轴标签和刻度有点乱。特别是，我希望有人可能知道如何阻止图像在底部被切断（即，使所有 1000 都清晰）。我在很多角度都有这个问题，有时轴标签被切断，有时刻度线但本质上是python打开以查看和保存绘图的窗口似乎不够大，并且扩展它会缩放整个图像，因此标签/蜱虫仍然被切断。

任何帮助将不胜感激，请不要提及减小字体大小或删除标签，因为这将进入报告，因此这些已修复。

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-03-05T16:36:00.917

您可以设置查看“距离”到您的情节，例如，

> 轴距 = 13

# android - 如何在扩展对话框中删除标题实现上下文

> ID：14748346
> 
> 赞同：1
> 
> 时间：2013-02-07T10:03:47.577
> 
> 标签：android, android-layout

正如我提到的，我只想删除代码中的标题

```
package com.example.dialogbox2;
    import android.app.Dialog;  
    import android.content.Context;  
    import android.os.Bundle;  
    import android.view.View;  
    import android.widget.Button;  
    public class Custom extends Dialog implements android.view.View.OnClickListener{  
        public Custom(Context context) {  
            super(context);  
    }  
    Button btn;  
        @Override  
        protected void onCreate(Bundle savedInstanceState) {  
            super.onCreate(savedInstanceState);  
            setContentView(R.layout.custom);  
            setTitle("This Is Sample Title");
            btn=(Button) findViewById(R.id.dismis_dialog);  
            btn.setOnClickListener(this);  
        }  
        @Override  
        public void onClick(View v) {  
            dismiss();  
        }  
    } 
```

当我删除`setTitle("This Is Sample Title");`代码时，它仍然显示一个黑色背景的小空间

这是我的布局

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
   android:layout_width="fill_parent"  
   android:layout_height="fill_parent"  
   android:background="#ef8e01"  
   android:orientation="vertical" >  
    <TextView  
     android:layout_width="fill_parent"  
     android:layout_height="wrap_content"  
     android:layout_margin="10dp"  
     android:text="@string/msg"  
     android:textColor="#000"
     android:background="@drawable/ic_launcher" >  
   </TextView>  
   <Button  
     android:layout_width="wrap_content"  
     android:layout_height="wrap_content"  
     android:layout_gravity="center_horizontal"  
     android:clickable="true" android:id="@+id/dismis_dialog"  
     android:text="@string/dismis" />  
  </LinearLayout> 
```

请帮我解决这个问题谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:07:17.903

使用它来删除您的标题栏：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

# c# - 使用 BinaryFormatter 将对象保存到文件

> ID：14748349
> 
> 赞同：1
> 
> 时间：2013-02-07T10:03:57.407
> 
> 标签：c#

我想把我的列表保存到一个文本文件中，所以我把它转换成一个数组，现在我想把它写下来。

```
 public void Save(Group g)
    {
        string[] lines = g.elementsList.ConvertAll(p => p.ToString()).ToArray();
        BinaryFormatter bf = new BinaryFormatter();
        using (Stream file = File.OpenWrite(path)) 
        {
            foreach (string line in lines)
            {
                using (MemoryStream ms = new MemoryStream())
                {
                    bf.Serialize(ms, lines);
                    byte[] ser = ms.ToArray();

                    <--------stuck here :(

                }
            }
        } 
```

我如何从这里继续？还是我应该改变整个方法..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:07:05.163

`BinaryFormatter`不写文字；如果您想写文本*，请不要使用`BinaryFormatter`*. 同样，您当前`lines`每次都在编写，而不是`line`. 但这都是学术性的：所有这些都只是：

```
File.WriteAllLines(path, lines); 
```

而已; 这就是执行此操作的全部代码。

# c# - 从 WinCE 设备拨打 RAS

> ID：14748351
> 
> 赞同：1
> 
> 时间：2013-02-07T10:04:07.657
> 
> 标签：c#, windows-ce, gprs, ras

我正在做一个更大的项目，其中一部分是为摩托罗拉 MC9596 扫描仪创建软件，但我坚持使用 FTP 服务器通过 GPRS 移动连接进行数据传输。

为此，我正在使用 OpenNETCF。

问题是我无法与我创建的条目拨号连接。这意味着设备的电话簿中有 2 个条目，test1 - 由设备生成，当我手动配置设备上的连接时，test2 是使用以下程序以编程方式创建的：

```
private const string CONNAME = "test2";
private const string PHONENR = "~GPRS!xxx.xxx-xxxxxxxx.eu";
private const string USER = "xx";
private const string PWD = "xx";
private const string DEVICE_TYPE = "modem";
private const string DEVICE_NAME = "Cellular Line";

private void createConnectionEntry()
{
    RasEntry rasEnt = new RasEntry()
    {
        Name = CONNAME,
        CountryCode = 0,
        AreaCode = "",
        PhoneNumber = PHONENR,
        DeviceName = DEVICE_NAME,
        DeviceType = DEVICE_TYPE,
        IPAddress = "0.0.0.0",
        IPAddressDns = "0.0.0.0"
    };

    /*rasEnt.Options |= (int)ConnectionOptions.UseCountryAndAreaCodes;
    rasEnt.Options |= (int)ConnectionOptions.UseLogonCredentials;*/
    rasEnt.Options = 4194304;

    RasDialParams dialParams = new RasDialParams()
    {
        UserName = USER,
        Password = PWD,
    };

    cEntry = Ras.CreateEntry(rasEnt, dialParams);
} 
```

注意“rasEnt.Options = 4194304”，这是硬编码的，通过手动配置连接来获得设备生成的设置的精确副本。奇怪的是，如果我在调试模式下比较 2 个条目，两者都相等 - 这意味着所有属性都相等，唯一的区别是名称。我确信这一点，也使用反射来比较对象。

我拨打连接：

```
RasError re = cEntry.Dial(false, new RasDialParams(CONNAME, USER, PWD)); 
```

如果 Test1 我得到“成功”，如果 Test2 “未知”错误。

你能帮我解决这个讨厌的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T18:34:34.427

现在我以手动添加必要的注册表项结束 - 只是在创建连接之前和之后检查了注册表的差异。不是一个干净的解决方案，但没有找到其他解决方案。它似乎工作稳定，我可以拨打这种方式创建的连接。我会看看，如果它在生产阶段还可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T11:40:56.930

主要问题是通过代码拨号：当我尝试时，我遇到了其他问题。虽然上面来自 Hogo 的代码帮助很大，但有一些技巧对无忧编码有用：

**首先，以下提示要求您手动拨号连接并通过在 Internet Explorer 上运行任何网站来测试您的 Internet。如果互联网正常工作，那么您最好通过代码拨号。**

**要手动执行：**

使用“网络和拨号连接”建立一个名为“GPRS”的新连接（使用此链接：[http](http://www.e-consystems.com/gprs.asp) ://www.e-consystems.com/gprs.asp ）。如果您使用 airtel SIM 将波特率从 19200 更改为 115200。连接它并检查互联网是否正常工作。

**通过代码拨号：**

1.  当您手动创建名为“GPRS”的连接时，GPRS 文件夹下会生成 3 个寄存器。(HKEY_CURRENT_USER\Comm\RasBook\GPRS) 。这些文件夹无法正常查看。需要在PDA中安装读取寄存器的应用程序。无需查看里面的内容，如果您这样做，则根据windows版本下载它们。

2.  在创建的 3 个寄存器中，只有两个是相关的（DevCfg 和 Entry）。手动拨号并连接到 Internet 后，将数据从 DevCfg 和 Entry 寄存器复制到文本文件（DevCfg.txt 和 Entry.txt），以便以后可以复制回这些值。要将寄存器复制到/从寄存器复制到文本文件，请使用：RegQueryValueEx(...)、RegOpenKeyEx(..)、RegSetValueEx(...) 和其他相关函数（请参阅[http://msdn.microsoft.com/en-us/库/windows/desktop/ms724911%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724911%28v=vs.85%29.aspx) )

例如：读取寄存器并写入文本文件：

```
public static bool ReadRegString(IntPtr hKey, string lpszSubKey, string lpValueName)
    {
        try
        {
            string str = "";
            byte[] lpData = new byte[684];
            uint lpcbValue = 684;
            uint dwType = Utils.REG_BINARY;
            IntPtr phkResult = new IntPtr();
            Utils.RegOpenKeyEx(hKey, lpszSubKey, 0, 0, ref phkResult);
            if (phkResult != IntPtr.Zero)
            {
                int x = Utils.RegQueryValueEx(phkResult, lpValueName, 0, ref dwType, lpData, ref lpcbValue);
                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < 684; i++)
                {
                    if (i != 683)
                        sb.Append(lpData[i].ToString() + "|");
                    else
                        sb.Append(lpData[i].ToString());
                }
                using (System.IO.StreamWriter outfile = new System.IO.StreamWriter(filePath))
                {
                    outfile.Write(sb.ToString());
                }
                Utils.RegCloseKey(phkResult);
        }
     }

if (Utils.ReadRegString(Utils.HKEY_CURRENT_USER, @"Comm\RasBook\GPRS", "DevCfg"))
        {
            textBoxSysVers.Text = "Succeeded Make Text File.";

        } 
```

3.  现在通过代码拨打我们使用RasEntry（添加必要的库；检查Hogo在[Making GPRS Connection programmatically using C# for windows CE 5.0中的答案？](https://stackoverflow.com/questions/14736416/making-gprs-connection-programmatically-using-c-sharp-for-windows-ce-5-0)）

a) 创建 RasEntry 对象

b) 将创建的文本文件“Entry.txt 和 DevCfg.txt”中的数据分别复制到寄存器 Entry 和 DevCfg。

c) 拨号 RasError re = cEntry.Dial(...)

例如：

```
 private const string CONNAME = "GPRS";
    private const string PHONENR = "*99#";
    private const string USER = "xx";
    private const string PWD = "xx";
    private const string DEVICE_TYPE = "modem";
    private const string DEVICE_NAME = "Cellular Line";

 { RasEntry cEntry = new RasEntry()
    {
        Name = CONNAME,
        CountryCode = 91,
        AreaCode = "120",
        PhoneNumber = PHONENR,
        DeviceName = DEVICE_NAME,
        DeviceType = DEVICE_TYPE,
        IPAddress = "0.0.0.0",
        IPAddressDns = "0.0.0.0",Options=4194304
    };

        RasDialParams dialParams = new RasDialParams()
        {
            UserName = USER,
            Password = PWD,
            EntryName = CONNAME,
            Domain = " "
        }

        if (Utils.WriteRegValue(Utils.HKEY_CURRENT_USER, @"Comm\RasBook\GPRS", "DevCfg","Entry",3))
        {
            RasError re = cEntry.Dial(false, new RasDialParams(CONNAME, USER, PWD));

            RasError rs = re;
            textBoxInfo.Text = re.ToString() + " : Dial Status";
            if(rs.ToString()=="Success")
            textBoxInfo.Text = cEntry.Status.State.ToString() + " : Dial Status";
        }
  }

public static Boolean WriteRegValue(IntPtr hKey, string lpszSubKey, string lpValueName1, string lpValueName1,uint dwType)
    {
        int iOper = 1;
        filePath = @"`enter code here`\DevCfg.txt";
        IntPtr phkResult = new IntPtr();
        Utils.RegOpenKeyEx(hKey, lpszSubKey, 0, 0, ref phkResult);
        if (phkResult == IntPtr.Zero)
        {
            int iSecurity = 0;
            int dwDisp = 0;
            RegCreateKeyEx(hKey, lpszSubKey, 0, null, 0, 0, ref iSecurity, ref phkResult, ref dwDisp);
        }
        if (phkResult != IntPtr.Zero)
        {
            byte[] bytes = new byte[684];
            string[] text = new string[684];
            using (System.IO.StreamReader streamReader = new System.IO.StreamReader(filePath, Encoding.UTF8))
            {
                text = streamReader.ReadToEnd().Split('|');
            }
            for (int i = 0; i < 684; i++)
            {
                bytes[i] = Convert.ToByte(Convert.ToInt32(text[i]));
            }
            iOper = Utils.RegSetValueEx(phkResult, lpValueName1, 0, dwType, bytes, (uint)bytes.Length);
            Utils.RegCloseKey(phkResult); 
```

} }

// 类似地从 lpValueName2 做

}}

hogo 的代码和 this 之间的区别在于 RasEntry 不是在这里创建的。它由寄存器提供。我在创建对象时遇到了困难，因此提出了建议。希望能帮助到你 ：）

# visual-studio-2012 - NLog.config 智能感知不起作用

> ID：14748353
> 
> 赞同：11
> 
> 时间：2013-02-07T10:04:17.660
> 
> 标签：visual-studio-2012, intellisense, nlog

我收到以下错误：

> 全局元素“ [http://www.nlog-project.org/schemas/NLog.xsd:nlog](http://www.nlog-project.org/schemas/NLog.xsd:nlog) ”已被声明。

还有很多不同类型的以下错误：

> 已经声明了complexType ' [http://www.nlog-project.org/schemas/NLog.xsd:NLogConfiguration '。](http://www.nlog-project.org/schemas/NLog.xsd:NLogConfiguration)
> 
> 已经声明了simpleType ' [http://www.nlog-project.org/schemas/NLog.xsd:NLogLevel '。](http://www.nlog-project.org/schemas/NLog.xsd:NLogLevel)

我安装了以下 nuget 包：

*   日志
*   NLog 配置
*   Intellisense(TM) 的 NLog 模式

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-07T10:04:17.660

在检查菜单 XML > Schemas 后，我意识到我有更多对相同模式的引用，所以我禁用了其中一个，这解决了问题。

![在此处输入图像描述](../Images/907d887ca7ce163601ceef3789abe6d7.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-30T02:59:21.237

```
<nlog autoReload="true" 
  xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd ..\Config\NLog.xsd">
...
</nlog> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-07T12:08:44.567

通过从 NuGet 安装 NLog.config（不要与实际的 NLog 混淆）包来解决此问题。

# django - 使用内联管理员修改对象时出现 ValidationError

> ID：14748355
> 
> 赞同：0
> 
> 时间：2013-02-07T10:04:21.447
> 
> 标签：django, admin

我有一个`Position`与模型相关的 ForeignKey 字段的`Emplacement`模型。在`Emplacement`我为`Position`.

我想要实现的是，当`num_position`在实例中修改字段时`Emplacement`，删除与该实例相关的位置并创建新的位置。

为此，我重写了`Emplacement`模型的`save()`方法并检查是否`num_position`已更改。

问题是`Emplacement`在修改其`num_position`字段后保存模型时，出现以下错误：

```
ValidationError: Select a valid choice. That choice is not one of the available choices. 
```

我想这与位置的删除/重新创建有关，但我找不到原因。

怎么了？

**模型.py**

```
class Emplacement(models.Model): 

    num_position = models.IntegerField()
    # more fields

    __original_num_position = None

    def __init__(self, *args, **kwargs):
        super(Emplacement, self).__init__(*args, **kwargs)
        self.__original_num_position = self.num_position

    def save(self, *args, **kwargs):

        if self.num_position != self._Emplacement__original_num_position:
            # if num_position has changed, delete existing positions and recreate <num_position> positions
            Position.objects.filter(emplacement=self).delete()            
            for i in range(self.num_position):
                position = Position()
                position.emplacement = self
                position.number = i+1
                position.save()

        super(Emplacement, self).save(*args, **kwargs)

class Position(models.Model):
    emplacement = models.ForeignKey(Emplacement)
    number = models.IntegerField() 
```

**管理员.py**

```
class PositionInline(admin.TabularInline):
    model = Position

class EmplacementAdmin(admin.ModelAdmin):
    inlines = [PositionInline]

my_site.register(Emplacement, EmplacementAdmin) 
```

**编辑**

我也尝试了一个信号，但得到了同样的错误：

```
@receiver(post_save, sender=Emplacement)
def create_positions(sender, instance, created, **kwargs):
    """Create positions when num_position has changed."""
    if instance.num_position != instance.old_num_position:
        Position.objects.filter(emplacement=instance).delete()
        for i in range(instance.num_position):
            position = Position()
            position.emplacement = instance
            position.numero = i+1            
            position.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T12:10:02.603

我遇到了完全相同的问题。最后通过不在模型端实现创建/删除逻辑而是在 Forms/FormSets 中解决它。

因此，在“主”管理类中，在您的情况下为“EmplacementAdmin”，扩展了 save_formset 方法：

```
def save_formset(self, request, form, formset, change):
    instance = form.instance
    deleted = []
    if instance and instance.__original_num_position != instance.num_position:
        ''' create new Positions if needed '''

        formset.delete_positions = None # pass on a list, QuerySet, whatever

    super(EmplacementAdmin, self).save_formset(request, form, formset, change) 
```

并像这样创建一个 PositionFormSet：

```
class PositionFormSet(BaseInlineFormSet):
    delete_positions = []

    @property
    def deleted_forms(self):
        deleted_forms = []
        try:
            deleted_forms = super(PositionFormSet, self).deleted_forms
        except AttributeError:
            pass
        for form in self.forms:
            if form.instance in self.delete_positions:
                 deleted_forms.append(form)
        self.delete_positions = []
        return deleted_forms 
```

并在您的 inlineadmin 中设置此表单集：

```
class PositionInline(admin.TabularInline):
    model = Position
    formset = PositionFormSet 
```

不完全是我的想法，但这个技巧对我有用。很想知道是否有一些更优雅的解决方案:-)

# eclipse - weblogic环境下的JRebel

> ID：14748359
> 
> 赞同：2
> 
> 时间：2013-02-07T10:04:37.350
> 
> 标签：eclipse, weblogic-10.x, jrebel

我通过启用 jrebel 远程处理并给定部署 URL 在 Eclipse 中创建了一个项目

```
http://172.27.162.28:7001/testJrebel/ 
```

在成功获得输出之前，我在 weblogic10 服务器中部署了 war 文件

我通过单击同步在我的 ecllipse IDE 中进行了一些更改

它给出以下错误...而不是提交...

> JRebel Remoting 没有响应。服务器已启动，但是否启用了 JRebel Remoting？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T21:55:05.877

从[零周转](http://zeroturnaround.com/forums/topic/jrebel-remoting-server-not-responding/) http/https 端口用于远程处理。如果您在浏览器中打开地址，您会收到响应吗？您的服务器是否配置为使用 JRebel 远程处理？您是否在服务器中使用最新版本的 JRebel 5.1.0？und.com/forums/topic/jrebel-remoting-server-not-responding/

我认为您必须**从**`Help (Menu) >> Check for Updates`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T23:07:18.287

您实际上必须使用**-Drebel.remoting_plugin=true显式启用远程处理功能**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T17:00:34.640

从命令行启动 WebLogic 时，需要`agentpath`在 JAVA_OPTIONS 中指定 JVM 参数。当您在 startup.sh 中设置它时，它适用于整个 Weblogic（管理服务器和实例服务器）。

[https://manuals.jrebel.com/jrebel/standalone/launch-from-command-line.html#weblogic-10-x-and-12-x](https://manuals.jrebel.com/jrebel/standalone/launch-from-command-line.html#weblogic-10-x-and-12-x)

之后，在您的 IDE 中，您需要配置*远程服务器*的调试并为要启用 JRebel 的每个模块创建 rebel.xml 文件。

如何检查，一切正常？启动网络服务器（在日志中您应该会看到 JRebel 横幅）并编辑一个类。保存后，您应该在日志中看到一行，通知该类已重新加载。

# tfs - 我的 TFS 中的本地文件未标记为只读

> ID：14748361
> 
> 赞同：0
> 
> 时间：2013-02-07T10:04:47.630
> 
> 标签：tfs, azure-devops

我在 TFS 下有一些项目。他们中的大多数都将本地版本（在我的硬盘上）标记为只读。我不知道为什么，但其中一些（来自特定项目）的本地版本未标记为只读。我已经尝试删除它们并执行“获取最新版本”我还尝试了“获取特定版本”。到目前为止没有运气。

我正在使用 tfs 的在线版本：[https ://xxx.visualstudio.com/](https://xxx.visualstudio.com/)

知道为什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T20:57:34.937

所以我自己也遇到了问题。看来您已设置为本地工作区。我发现这篇[文章](http://visualstudiomagazine.com/articles/2012/11/02/local-workspaces-in-tfs-2012.aspx)非常有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T12:42:28.350

这听起来像是在没有签出或在另一个编辑器（例如记事本）的情况下编辑了文件

*   在这种情况下，“获取最新版本”将不起作用
*   “获取特定版本 - 最新版本”应该可以解决问题
*   不得已：备份修改过的文件，取消映射（全部删除），映射（全部获取）

# android - 使用 Android SDK 从 BB10 发送短信

> ID：14748370
> 
> 赞同：1
> 
> 时间：2013-02-07T10:05:11.503
> 
> 标签：android, sms, blackberry-10, blackberry-android

是否有任何方法可以使用 Android SDK 在 BlackBerry 10 上发送 SMS 文本消息，因为根据[Android 应用程序的 BlackBerry 文档，](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_hardware_features.html) SMSManager 和 SMSMessage 硬件功能不受支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:08:31.800

看来这仅适用于运行 10.9.10.35 或更高版本的 Dev Alpha 设备。以下意图启动标准消息传递应用程序，包括目标电话号码和正文：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setType("vnd.android-dir/mms-sms");
intent.putExtra("address", adress);
intent.putExtra("sms_body", text);
startActivityForResult(intent, 0); 
```

[该文档](http://developer.blackberry.com/android/apisupport/unsupportedapi_blackberry10_intents.html)似乎表明这是不允许的，但它仍然有效：

> Android 应用程序无法为设备的其余部分提供系统范围的服务。例如：
> 
> *   拨号服务（处理 android.intent.action.ACTION_DIAL）
> *   查看功能（android.intent.action.ACTION_VIEW 的系统范围处理）
> *   数据共享功能（android.intent.action.ACTION_SEND）

我通过查询接受它的组件发现了处理意图的本机包名称，结果显示：

```
com.rim.messaging.NativeSmsMms 
```

果然，启动它按预期工作：

```
Intent intent = new Intent();
intent.setComponent(new ComponentName(
        "com.rim.messaging",
        "com.rim.messaging.NativeSmsMms"));
startActivityForResult(intent, 0); 
```

请注意，Android 版本不存在，因此以下意图将不起作用：

```
Intent intent = new Intent();
intent.setComponent(new ComponentName(
        "com.android.mms",
        "com.android.mms.ui.ComposeMessageActivity"));
startActivityForResult(intent, 0); 
```

在我们的 Dev Alpha 设备上进行测试后，我最初认为这是不可能的，但显然它最初是在没有*文本消息*应用程序的情况下发布的。去搞清楚。

# logging - 在 Firebug 中过滤日志级别

> ID：14748372
> 
> 赞同：1
> 
> 时间：2013-02-07T10:05:29.183
> 
> 标签：logging, firebug

优秀的 Firebug 提供了日志功能，如`console.error()`和`console.info()`。但是，Firebug 中的选项卡（或药丸？）仅选择*完全相同的*级别。也就是说，当我点击“错误”时，我得到了所有的错误（这很好），但是当我点击“警告”时，我*只*得到了所有的警告，而*不是*错误——这很糟糕。

这是错误还是功能？有选择吗？难道我不应该能够看到所有的警告和错误，而*不会*被调试的东西所困扰吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:05:10.323

目前没有选项只显示警告和错误。因此，我创建了一个[增强请求](http://code.google.com/p/fbug/issues/detail?id=4621)，允许在 Firebug 问题跟踪器中同时选择多个过滤器。

# android - Android ProgressDialog 褪色背景消失 Nexus 4 平台 4.2.1

> ID：14748376
> 
> 赞同：0
> 
> 时间：2013-02-07T10:05:34.883
> 
> 标签：android, android-layout

带有 4.2.1 平台的 Nexus 4 设备会出现问题。当简单地调用以下代码时`Fragment`：

`ProgressDialog.show(getActivity(), "test", "test");`

对话框显示正常和背景变暗，但当变暗时，它立即变暗，使背景透明。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:09:56.400

尝试这个：

```
ProgressDialog.getWindow().clearFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND); 
```

它将解决您的问题。

# c# - 稍后在 XNA 中的游戏中创建 DrawableGameComponent 的实例

> ID：14748382
> 
> 赞同：0
> 
> 时间：2013-02-07T10:05:42.730
> 
> 标签：c#, xna, xna-4.0

我已经挣扎了很久。

我有一个名为**Game1的主***游戏*类和一个名为**myShowUp的***DrawableGameComponent*继承的*ShowUp*类

 ******通常的方法是将组件**myShowUp**添加到**Game1**对象中，使其成为游戏的一部分（直接在**Game1**的 Initialize 方法中），如下所示：

```
class Game1 : Microsoft.Xna.Framework.Game
{
    ShowUp myShowUp;

    ...

    protected override Initialize ()
    {
        this.myShowUp = new ShowUp(this);
        this.Components.Add(this.myShowUp);
    }
    ...
} 
```

此方法确实有效，并且**myShowUp**显示并成为游戏中的独立对象。

我想要的是稍后在游戏对象列表中实例化并添加对象（例如在窗口中单击之后）

这是我的尝试：

```
class Game1 : Microsoft.Xna.Framework.Game
{
    MouseState myMouseState;

    ...

    ...

    protected override void Update(GameTime gameTime)
    {
        myMouseState = Mouse.GetState();

        if (myMouseState.LeftButton == ButtonState.Pressed)
        {
            this.myShowUp = new ShowUp(this);   // Nothing
            this.Components.Add(this.myShowUp); // Happens..
        }

        base.Update(gameTime);
    }

    ...
} 
```

到目前为止，我找到了一个方法，我只保留第一个语法（即，将实例化保留到 Initialize 方法中）并在*ShowUp*类中定义一个名为**activate**的布尔值。如果**激活**是真的，我会执行指令来显示它，否则什么也不会。在我的*Game*对象的 Update 方法中，如果按下左按钮将激活的变量更改为 true，我会调用myShowUp的**activate** ( **)** **。**

 ****这种方法有效，但我不太满意，我希望它就像在代码中的任何位置实例化我的*游戏*对象中的对象以使其成为其中的一部分一样简单。有没有办法做到这一点？

就像是 ：

```
class Game1 : Microsoft.Xna.Framework.Game
{
    ShowUp myShowUp;
    MouseState myMouseState;

    ...

    ...

    protected override Initialize ()
    {
        this.Components.Add(this.myShowUp);
    }

    ...

    protected override void Update(GameTime gameTime)
    {
        myMouseState = Mouse.GetState();

        if (myMouseState.LeftButton == ButtonState.Pressed)
        {
            this.myShowUp = new ShowUp(this);
        }

        base.Update(gameTime);
    }

    ...
} 
```

这会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:20:03.957

您的代码中有一个小错误。您将创建组件的多个实例 - 每次更新一个。这是因为在创建组件之前，您没有检查*之前*的鼠标状态是否`Released`为`myShowUp`空。这是一些经过测试的工作代码（检查两个条件）：

```
MouseState lastMouseState;

protected override void Update(GameTime gameTime)
{
    MouseState mouseState = Mouse.GetState();

    if(mouseState.LeftButton == ButtonState.Pressed
            && lastMouseState.LeftButton == ButtonState.Released
            && myShowUp == null)
    {
        Components.Add(myShowUp = new ShowUp(this));
    }

    lastMouseState = mouseState;

    base.Update(gameTime);
} 
```

当然 - 我不确定为什么这个错误会导致`ShowUp`根本不出现 - 因为你正在创建它的多个实例 - 你希望能够看到它。`ShowUp`您的组件中可能存在错误。

对于它的价值，这是我测试过的代码：

```
class ShowUp : DrawableGameComponent
{
    public ShowUp(Game game) : base(game) { }

    Texture2D texture;
    SpriteBatch sb;

    protected override void LoadContent()
    {
        sb = new SpriteBatch(GraphicsDevice);
        texture = this.Game.Content.Load<Texture2D>("test");
        base.LoadContent();
    }

    public override void Draw(GameTime gameTime)
    {
        sb.Begin();
        sb.Draw(texture, new Vector2(100), Color.White);
        sb.End();
        base.Draw(gameTime);
    }
} 
```

请注意，在运行*后* `Game.Initialize`添加组件将导致该组件`Initialize`和`LoadContent`方法在添加到`Components`集合后立即运行。

请注意，为了您将来的参考，`DrawableGameComponent`已经带有`Enabled`和`Visible`属性 - 允许您跳过`Update`和`Draw`分别针对该实例。**********

# caching - AppFabric 可以部署在 Windows 7 上吗？

> ID：14748384
> 
> 赞同：6
> 
> 时间：2013-02-07T10:05:47.637
> 
> 标签：caching, deployment, windows-7, appfabric

我希望在几个用例中使用 AppFrbric 1.1 进行数据缓存。它的[下载页面](http://tinyurl.com/a75kvr7)上的系统要求表明它适用于 Windows Server 2008 及更高版本，用于生产环境，同时可以安装在 Windows 7 上进行开发和测试。

我的产品是基于 Web 的，可以为中型客户部署在服务器环境中，但对于单用户部署，它应该可以部署在运行 Windows 7 的工作站上。

那么，AppFabric 是否应该包含在我的解决方案中？如果部署，它会对 Windows 7 产生任何技术影响（我怀疑，不是）？以及它是否有任何我需要注意的与法律/合规相关的含义。

顺便说一句，由于对支持的影响，我不能有两种缓存实现。如果无法使用 AppFabric，那么我可能不得不求助于自定义解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:47:02.393

当然，您可以在 Windows 7 上使用它（我做到了）。另外，不要将 Client Api ( [Nuget Here](http://nuget.org/packages/ServerAppFabric.Client/) ) 与缓存服务 ( [downlaod here](http://www.microsoft.com/en-us/download/details.aspx?id=27115) ) 混淆。

系统要求很容易理解：在生产中，您将使用专用服务器来托管在 Windows Server 上运行的缓存服务。对于开发来说，你肯定会使用 Windows 7 或 8。缓存服务可以安装在这些系统上，但你的可用性和性能会降低。但是，对于这个环境来说，它并不那么重要。

# multithreading - System.threading.timer 回调不规则

> ID：14748389
> 
> 赞同：1
> 
> 时间：2013-02-07T10:06:14.050
> 
> 标签：multithreading

我正在开发高度线程化的 C# Windows 服务，我们使用 System.threading.timer 在特定时间后通知客户端。

当我们有较少的计时器初始化时，它对我来说很好，但是当我们使用更多的计时器来调用回调方法时，我们在预定义的时间后没有得到回调方法。

我们收到不定期的回调..

谢谢...

# java - 使用 Spring 配置 Apache James

> ID：14748393
> 
> 赞同：2
> 
> 时间：2013-02-07T10:06:25.703
> 
> 标签：java, spring, email, james

我使用 Apache James 在我的项目中发送电子邮件，为此我在我的机器上运行 apache james 服务器。我正在寻找是否可以使用 spring 配置 james，因为我正在使用 spring 框架并且所有内容都在其中配置。还有它是否能够发送多部分消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T08:44:31.527

是的，您可以使用 spring 配置 james。

1.  您只需要在 james 上创建一个帐户
2.  在 spring 电子邮件上使用 james 用户帐户

# c# - 为什么可以在 C# 中创建原始数据类型？

> ID：14748399
> 
> 赞同：-3
> 
> 时间：2013-02-07T10:06:48.183
> 
> 标签：c#, types

为什么在 C# 中可以制作原始数据类型？

这个功能有什么样的实际用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:11:15.833

我假设你的意思是`struct`。有多种用途：

*   表示简单的数据，例如 a`Point`或`ComplexValue`不保证每个实例的对象开销：它只是一组（最好是不可变的）复合值
*   出于互操作目的，使用显式布局将字段映射到内存
*   [避免](http://marcgravell.blogspot.co.uk/2011/10/assault-by-gc.html)海量数据集的GC 问题

然而，在 C#中声明 a是***非常罕见的。***`struct`即*非常*罕见。没有人让你这样做，如果你不喜欢他们：不要创造任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:12:20.327

如果您来自 Java 世界，则没有“原始”数据类型之类的东西。所有这些所谓的原始数据类型都是 System 命名空间中的对象（来自 MSDN）。

但是，您可以创建用户定义的类型......这就是“类”、“枚举”和“结构”的整个概念。

请参阅此处以了解 C# 中的“原始”数据类型的实际含义：

[C#中的原始数据类型](http://msdn.microsoft.com/en-us/library/ms228360(v=vs.80).aspx)

# sql - 如何在 sql server 2008 中使用子查询？

> ID：14748401
> 
> 赞同：2
> 
> 时间：2013-02-07T10:06:54.330
> 
> 标签：sql, sql-server-2008, count, subquery

我知道这个问题可能会重复......但我有这样的查询，我的表中有一个字段“Compute_CRM_State”。该字段包含诸如“已批准、待定、已取消”之类的数据，但现在我想获取已批准、待定或已取消的总数。我用子查询试过了。我可以获得已批准或待处理或已取消的总数，但是.. 我多次获得相同的记录。

![结果我从我的查询中得到什么。](../Images/99bb0a3df8165d754a760b8cd52965d7.png)

询问 ：

```
SELECT        (SELECT        COUNT(Compute_CRM_State) AS Expr1
                          FROM            CRM_Doctor_Request
                          WHERE        (CRM_State_Id = 1)) AS PENDING,
                             (SELECT        COUNT(Compute_CRM_State) AS Expr2
                               FROM            CRM_Doctor_Request AS CRM_Doctor_Request_3
                               WHERE        (CRM_State_Id = 2)) AS Approved,
                             (SELECT        COUNT(Compute_CRM_State) AS Expr3
                               FROM            CRM_Doctor_Request AS CRM_Doctor_Request_2
                               WHERE        (CRM_State_Id = 3)) AS CANCELLED
FROM            CRM_Doctor_Request AS CRM_Doctor_Request_1 
```

应该只显示 1 条计数记录。但它正在显示表中记录数包含的次数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:09:29.580

您没有正确获得总计数并获得许多记录的原因是`COUNT`s 被选为相关子查询，因此您将获得表中每条记录的计数。

要解决这个问题，您必须在外部查询中使用聚合函数，而不是来自相关子集。要获取每个状态的总计数，请使用`CASE`表达式执行以下操作：

```
SELECT
  SUM(CASE WHEN CRM_State_Id = 1 THEN 1 ELSE 0 END) AS PENDING,
  SUM(CASE WHEN CRM_State_Id = 2 THEN 1 ELSE 0 END) AS Approved,
  SUM(CASE WHEN CRM_State_Id = 3 THEN 1 ELSE 0 END) AS CANCELLED
FROM  CRM_Doctor_Request; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/86e27/2)

* * *

**或者：**您可以使用`PIVOT`表运算符来做同样的事情：

```
SELECT 
  [1] AS PENDING, 
  [2] AS Approved, 
  [3] AS Cancelled
FROM 
( 
   SELECT * FROM CRM_Doctor_Request
) AS t
PIVOT
(
  COUNT(Compute_CRM_State)
  FOR  CRM_State_Id IN([1], [2], [3])
) AS p; 
```

[**像这样**](http://www.sqlfiddle.com/#!3/86e27/8)。

# sccm - 使用 SCCM SDK 卸载应用程序

> ID：14748402
> 
> 赞同：2
> 
> 时间：2013-02-07T10:06:54.487
> 
> 标签：sccm

我一直在尝试使用 SCCM 卸载设备或用户上的应用程序。我已成功创建将安装应用程序的应用程序分配，但我无法将其卸载。我一直在使用的代码是：

```
IResultObject assignment = this.manager.CreateInstance("SMS_ApplicationAssignment");
IResultObject application =
        this.manager.GetInstance("SMS_Application.CI_ID=16777339");

assignment["ApplicationName"].StringValue = application["LocalizedDisplayName"].StringValue;
assignment["AssignedCI_UniqueID"].StringValue = application["CI_UniqueID"].StringValue;
assignment["AssignedCIs"].IntegerArrayValue = new[] { application["CI_ID"].IntegerValue};
assignment["AssignmentName"].StringValue = "Deepak's deployment";
assignment["CollectionName"].StringValue = "Deepak's Collection of Devices";
assignment["DisableMomAlerts"].BooleanValue = true;
assignment["NotifyUser"].BooleanValue = false;
assignment["OfferFlags"].IntegerValue = 0;
assignment["DesiredConfigType"].IntegerValue = 1;           
assignment["OverrideServiceWindows"].BooleanValue = false;
assignment["RebootOutsideOfServiceWindows"].BooleanValue = false;
assignment["SuppressReboot"].IntegerValue = 0;
assignment["TargetCollectionID"].StringValue = "UKN0000F";
assignment["EnforcementDeadline"].DateTimeValue = DateTime.Now.AddDays(1);
assignment["StartTime"].DateTimeValue = DateTime.Now;
assignment["UseGMTTimes"].BooleanValue = false;
assignment["UserUIExperience"].BooleanValue = false;
assignment["WoLEnabled"].BooleanValue = false;
assignment["RequireApproval"].BooleanValue = true;
assignment["OfferTypeId"].IntegerValue = 2;
assignment.Put(); 
```

此代码会将应用程序作为安装部署放置在 SCCM 中。如何将其作为卸载部署获取？有一个`AppAction`枚举，我怀疑它是由客户端使用的，而不是在服务器上。

```
typedef enum AppAction
{
    appDiscovery = 0, 
    appInstall = 1, 
    appUninstall = 2
} AppAction; 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-21T14:08:14.207

需要更改的设置是**DesiredConfigType**。

**对于您的代码，在put()**之前添加以下内容：

```
assignment["DesiredConfigType"].IntegerValue = 2; 
```

值 1 表示安装（必需），2 表示卸载（不允许）。

[https://msdn.microsoft.com/en-us/library/hh949014.aspx](https://msdn.microsoft.com/en-us/library/hh949014.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T13:32:20.337

我这样做的方法是首先使用[uninstall.exe](http://www.tarma.com/support/uninstall.htm)来确定程序的guid，然后为我要卸载的包创建一个程序，然后调用uninstall.exe /whatever 作为命令。这适用于显示在添加/删除中的大多数应用程序，如果它没有显示在那里，那么无论如何它都必须是一个 hack（或脚本）才能卸载。我相信你失败的原因是因为如果在 sccm 中没有卸载*部署*的命令，那么它就没有什么可运行的了。

创建卸载程序后，您可以从代码中调用该部署，瞧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T14:24:23.143

只要您尝试使用的目标程序是通过 MSI（Microsoft 安装程序）安装的，那么您就可以遍历注册表以找到您的产品（注册表位置：“HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall”）只需查看每个 DisplayName 值。

在我们的环境中，我使用 Powershell 完成了这项任务，并且我们设置了一个专门卸载我们所追求的任何东西的程序。

希望这会有所帮助......愤怒。

# xslt - 带有变量名链接的 XSL 转换

> ID：14748403
> 
> 赞同：1
> 
> 时间：2013-02-07T10:06:56.127
> 
> 标签：xslt

我有以下 XSL 渲染到我的 HTML 中：

```
<xsl:for-each select="user"> 
<xsl:variable name="exampleurl"> 
<xsl:choose> 
    <xsl:when test="objecttype='2'">
         Check this out: 
         <strong><a class="link" href="http://www.example.com/beinspired">Inspiration</a></strong>.
     </xsl:when> 
</xsl:choose> 
</xsl:variable> 
<xsl:value-of select="$exampleurl" />
</xsl:for-each> 
```

但是，当我打印变量 $exampleurl 时，只有文本“检查一下：灵感”。被打印。但是“灵感”这个词并不是我想要的可点击的 URL。
如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:12:27.550

value-of 创建一个文本节点，你想要

```
<xsl:copy-of select="$exampleurl" /> 
```

（或者当然在这种情况下你根本不需要变量，但我认为这只是一个小例子？

# netbeans - 解密存储在 Netbeans 上的 FTP 密码

> ID：14748410
> 
> 赞同：2
> 
> 时间：2013-02-07T10:07:16.670
> 
> 标签：netbeans

无论如何都可以解密存储在 Netbeans（来自 PHP 项目）上名为“keyring”的文件夹中的 FTP 密码，假设我有来自我的 Windows 帐户的信息？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-06T14:48:40.287

我丢失了我的一个 ftp 站点的密码。我试图连接 Wireshark 嗅探 TCP 连接。我设法找回丢失的密码。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-07T10:09:24.107

**[错误的 ！见下文]**不，密码不是“加密”而是“散列”，这是单向操作。

* * *

**编辑：**这个答案是可耻的错误，自 3 年以来一直这样坐在这里。非常抱歉，我什至不知道我为什么回答了这么愚蠢的问题。

取回此密码的一种简单方法是尝试使用它连接到服务器并使用 Wireshark 嗅探 TCP 连接来转储它。

# javascript - 使用 JavaScript/jQuery 在鼠标悬停时显示元素的 ID

> ID：14748412
> 
> 赞同：1
> 
> 时间：2013-02-07T10:07:23.520
> 
> 标签：javascript, jquery

我一直试图弄清楚这一点，但我还没有。

我正在构建锚标签的 html 列，我想知道将鼠标悬停在其上的那个的 id。

它应该很简单，但似乎我碰壁了，我看不出如何解决这个问题。

我遇到的问题是控制台上显示的 id 始终是数组的最后一个 id。而不是那个我想要特定锚的ID。

任何建议都非常受欢迎。

这是我的代码：

```
//Anchor builder
var numberOf = flatParamDateArray.length;

for (i = 0; i < numberOf; i++) {
    var param2Slider = document.createElement("a");
    param2Slider.id = 'sliderAnchor' + i;
    sliderAnchorId = param2Slider.id;
    param2Slider.name = 'param2Slider';
    param2Slider.className = 'nav2Slider a';
    document.getElementById('nav2Slider').appendChild(param2Slider);
    $('.nav2Slider a').onmouseover = function () {
        console.log('flatParamDateArray index: ' + param2Slider.id);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:11:07.090

**1.**将其**移出**，并**在**for循环之后：

```
$('.nav2Slider a').onmouseover = function () {
    console.log('flatParamDateArray index: '+param2Slider.id);
} 
```

**2.**改为：`onmouseover()`_`mouseover()`

```
$('.nav2Slider a').mouseover(function() {
    console.log('flatParamDateArray index: '+param2Slider.id);
}); 
```

**3.**要获取 ID，这是您需要的代码：

```
 console.log('flatParamDateArray index: '+ $(this).prop('id')); 
```

**奖金：**

由于您正在动态添加链接，因此您应该使用该[`.on()`](http://api.jquery.com/on/)函数将事件处理程序的数量减少到一个（而不是每个元素一个）：

```
$('.nav2Slider').on('mouseover', 'a', function() {
    console.log('flatParamDateArray index: '+ $(this).prop('id'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:10:44.133

您的变量`param2Slider`是全局变量，`for`循环会更改每个循环的值。这意味着循环完成后`param2Slider`只包含最后一个值。

试试这个：

```
$('.nav2Slider a').on('onmouseover', function () {
    console.log('flatParamDateArray index: ' + $(this).attr('id'));
}); 
```

编辑：onmouseover ... & 当然你应该把这个片段移出循环

# cordova - PhoneGap setKeepCallback - 它是什么？

> ID：14748423
> 
> 赞同：12
> 
> 时间：2013-02-07T10:07:56.810
> 
> 标签：cordova, phonegap-plugins

我做了一个项目，在那里我建立了从我的蓝牙插件到我的 javascript 的成功通信。从我的Javascript中，我在java中以这种方式注册了对我的插件的回调：

```
if (action.equals(ACTION_REGISTER_CALLBACK)) {

            if(mJSCallback != null) {
                pluginResult = new PluginResult(PluginResult.Status.ERROR, "An event callback has already been registered.");
            } else {
                mJSCallback = callbackId;
                pluginResult = new PluginResult(PluginResult.Status.NO_RESULT);
                pluginResult.setKeepCallback(true);
            }

        } 
```

这当然是在 exec 函数中完成的。因为蓝牙事件不是在某个时间点出现的事实，我注册了一个广播接收器，它向我的 javascript 发送消息，例如当找到一个设备时。

```
if(BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {

    sendMessagetoJSCallback(new PluginResult(PluginResult.Status.OK, "Discovery finished."));

} 
```

发送的所属函数：

```
public void sendMessagetoJSCallback(PluginResult res) {
    res.setKeepCallback(true);
    success(res, mJSCallback);
} 
```

在那种情况下，我真正不明白的是，setKeepCallback 在这些不同的函数中做了什么。我以为会有文档，但没有。

有人可以告诉我吗？[我在https://github.com/phonegap/phonegap-plugins/tree/master/Android/PhoneListener](https://github.com/phonegap/phonegap-plugins/tree/master/Android/PhoneListener)上定位了开发

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-17T23:38:36.783

这意味着保留 JS 端的回调以供从本机（Java）端到 JS 端的进一步调用。它在 cordova.js 代码中管理的某个地方。

例如，如果您查看 Network-Information 插件： [https](https://github.com/apache/cordova-plugin-network-information/blob/master/src/android/NetworkManager.java#L221) ://github.com/apache/cordova-plugin-network-information/blob/master/src/android/NetworkManager.java#L221 ，您会在每个网络状态中看到它(WIFI,3G,4G,offline,...) 插件将结果发送到 JS 并保持回调在 JS 站点中的相同成功回调中收到。

# jsp - 缺少包含 TLD 的 JAR 资源

> ID：14748424
> 
> 赞同：0
> 
> 时间：2013-02-07T10:07:57.550
> 
> 标签：jsp, tags, tld, custom-tag

**我创建了一个****库**——customtags.jar

 **![在此处输入图像描述](../Images/4875b6c605edba2e556b0fded3e26dc7.png)

**taglib.tld 结构如下**

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">

<tlib-version>1.0</tlib-version>
<short-name>custom</short-name>
<uri>taglib</uri>

<tag-file> 
    <name>label</name> 
    <path>/WEB-INF/tags/Label.tag</path> 
</tag-file> 
<tag-file> 
    <name>textarea</name> 
    <path>/WEB-INF/tags/TextArea.tag</path> 
</tag-file> 
<tag-file> 
    <name>textfield</name> 
    <path>/WEB-INF/tags/TextField.tag</path> 
</tag-file> 
```

**在 index.jsp 页面中**

```
<%@taglib prefix="custom" uri="customtags.jar"%> 
```

![在此处输入图像描述](../Images/45f884c1cf8752ef81cb9f46ec9ee4c4.png)

**如果我改变**

```
<%@taglib prefix="custom" uri="WEB-INF/lib/customtags.jar"%> 
```

![在此处输入代码](../Images/34f3534709ef4491a50065c950822459.png)

请更正并更新我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:39:20.983

`tags`尝试直接在下面创建一个目录`WEB-INF`并将您的`jar`放在这个目录中。

请注意，此错误提到它正在此目录中查找： ![在此处输入图像描述](../Images/df5090bf42209f4fac865a8463ed3615.png)**

# python - SSH 使用 Pythondb 使用私钥

> ID：14748427
> 
> 赞同：0
> 
> 时间：2013-02-07T10:08:04.127
> 
> 标签：python, mysql, ssh, mysql-python

我需要使用 Python SSH 进入数据库，为此我使用 PythonDB。我看到了[这个](https://stackoverflow.com/questions/9070708/ssh-first-with-mysqldb-in-python)问题，其中详细说明了如何执行此操作，但我似乎无法正确使用语法。有人能指出我正确的方向吗......？我还需要使用私钥，我将如何插入...？

```
ssh -L 9990:127.0.0.0:3396 <79.xxx.xx.xxx>

database = MySQLdb.connect(host'127.0.0.0', port=3306, user='jack', passwd='pass', db='test') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:43:22.393

正如对 ssh-tunnel 中[另一个问题](https://stackoverflow.com/questions/9070708/ssh-first-with-mysqldb-in-python)的回答中所说，您正在从本地机器上的端口 9990 转发到删除机器上的（标准 mysql）端口。要通过该 ssh 隧道发送请求，您需要连接到端口 9990 而不是 3306：

```
database = MySQLdb.connect(host'127.0.0.0', port=9990, .... 
```

# android - achartengine 可移动折线图

> ID：14748428
> 
> 赞同：0
> 
> 时间：2013-02-07T10:08:06.933
> 
> 标签：android, charts, achartengine

我只是用 achartengine 创建了一个新图表，我注意到当我移动图表时，它会越过 x 和 y 轴。感谢 Dan，通过将我的 achartengine 更新到 1.1.0 版本来解决这个问题。无论如何，我看到这个问题已经在 achartengine 演示中解决了，但我不能理解为什么它不能在我的图表上解决问题。

![在此处输入图像描述](../Images/38fad81a0e229d80ea65c64077fdb974.png)

我猜我做错了什么，我的 xml 代码是：

```
<RelativeLayout
android:id="@+id/rlMyChartsGridDown"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_below="@+id/rlMyChartsTopGrid"
android:background="@drawable/weeks_grid_down" >

<LinearLayout
    android:id="@+id/chart"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
     /> 
```

我的Java代码是：

```
 public GraphicalView weightView(Context context) {

        manageData = new ManageData(context);
        TimeSeries series = new TimeSeries("The day");
        TimeSeries maxSeries = new TimeSeries("Max Weight");
        TimeSeries minSeries = new TimeSeries("Min Weight");

        int count = 0;
        float sum = 0;
        float max = 0;
        int preWeek = 0;

            manageData.open();
            cursor = manageData.getProfile();
            manageData.close();

            if ((cursor.moveToFirst()) && (cursor.getCount() != 0)) {
            weightUnit = cursor.getString(C_PROFILE_WEIGHT_UNIT);
            weight = cursor.getFloat(C_PROFILE_WEIGHT);
            bmi = cursor.getFloat(C_PROFILE_BMI);
            weightGain();
            cursor.close();
            minSeries.add(0,weight);
            maxSeries.add(0,weight);

            minSeries.add(12,weight+1);
            maxSeries.add(12,weight+2);
            minSeries.add(42,weight+minWeight);
            maxSeries.add(42,weight+maxWeight);
            }   

        manageData.open();
        Cursor cursor = manageData.getDiaryInfo();
        manageData.close();
        cursor.moveToFirst();

        if (cursor.getCount() > 0) {
            preWeek = cursor.getInt(DIARY_WEEK);
        }

        while (!cursor.isAfterLast()) {

            if ((cursor.getInt(DIARY_WEEK) == preWeek)
                    && (cursor.getFloat(WEIGHT) != 0)) {
                count++;
                sum = sum + cursor.getFloat(WEIGHT);

                cursor.moveToNext();
            } else {
                if (count != 0) {
                    series.add(preWeek, sum / count);

                    if (max < sum / count) {
                        max = sum / count;
                    }
                }
                sum = 0;
                count = 0;
                preWeek = cursor.getInt(DIARY_WEEK);

                if (cursor.getFloat(WEIGHT) != 0) {
                    count++;
                    sum = sum + cursor.getFloat(WEIGHT);
                }

                cursor.moveToNext();
            }
        }

        if (max < sum / count) {
            max = sum / count;
        }
        series.add(preWeek, sum / count);
        cursor.close();

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(series);
        dataset.addSeries(minSeries);
        dataset.addSeries(maxSeries);

        XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer();

        // Customization Weight line
        XYSeriesRenderer renderer = new XYSeriesRenderer();
        renderer.setColor(0xff154916);
        renderer.setLineWidth(3);
        renderer.setPointStyle(PointStyle.CIRCLE);
        renderer.setFillPoints(true);

        // Customization maxWeight line
        XYSeriesRenderer rendererMax = new XYSeriesRenderer();
        rendererMax.setColor(0xff8EC239);
        rendererMax.setLineWidth(2);

        // Customization minWeight line
        XYSeriesRenderer rendererMin = new XYSeriesRenderer();
        rendererMin.setColor(0xffF7931E);
        rendererMin.setLineWidth(2);

        mRenderer.setMargins(new int[] {20, 35, 20, 20 });
        mRenderer.setApplyBackgroundColor(true);
        mRenderer.setBackgroundColor(Color.TRANSPARENT);
        mRenderer.setMarginsColor(color);

        mRenderer.addSeriesRenderer(renderer);
        mRenderer.addSeriesRenderer(rendererMax);
        mRenderer.addSeriesRenderer(rendererMin);

        mRenderer.setYLabelsColor(0, Color.BLACK);
        mRenderer.setXLabelsColor(Color.BLACK);
        mRenderer.setLabelsTextSize(18);
        mRenderer.setAxesColor(Color.BLACK);
        mRenderer.setLabelsColor(Color.BLACK);

        mRenderer.setYLabelsAlign(Align.RIGHT);
//      mRenderer.setYAxisAlign(Align.LEFT, 0);

        mRenderer.setXTitle("Week");
        if(weightUnit.equals("kg")){
        mRenderer.setYTitle("Weight (kg)");
        } else {
            mRenderer.setYTitle("Weight (lb)");
        }
        mRenderer.setZoomButtonsVisible(true);   
        mRenderer.setLabelsColor(0xff418614);

        mRenderer.setLegendTextSize(15);
        mRenderer.setPointSize(5);
//      mRenderer.setZoomEnabled(false, false);
//      mRenderer.setPanEnabled(true, false);
        mRenderer.setXAxisMax(43);
        mRenderer.setXAxisMin(0);
        if(max>maxWeight + weight){
        mRenderer.setYAxisMax(max + 10);
        } else {
            mRenderer.setYAxisMax(maxWeight + weight + 10);
        }
        mRenderer.setYAxisMin(0);

        return ChartFactory.getLineChartView(context, dataset, mRenderer);

    } 
```

我的主要java代码是：

```
public void onClick(View v) {
switch (v.getId()) {
case R.id.tbMyChartsWeight:
    tbMyChartsWeight.setChecked(true);
    tbMyChartsWaist.setChecked(false);
    tbMyChartsMood.setChecked(false);

    line = new LineGraph();
    gView = line.weightView(this);
    layout = (LinearLayout) findViewById(R.id.chart);
    layout.removeAllViews();
    layout.addView(gView);
    return;
case R.id.tbMyChartsWaist:
    tbMyChartsWeight.setChecked(false);
    tbMyChartsWaist.setChecked(true);
    tbMyChartsMood.setChecked(false);

    line = new LineGraph();
    gView = line.waistView(this);
    layout = (LinearLayout) findViewById(R.id.chart);
    layout.removeAllViews();
    layout.addView(gView);
    return;
case R.id.tbMyChartsMood:
    tbMyChartsWeight.setChecked(false);
    tbMyChartsWaist.setChecked(false);
    tbMyChartsMood.setChecked(true);

    line = new LineGraph();
    gView = line.mentalView(this);

    layout = (LinearLayout) findViewById(R.id.chart);
    layout.removeAllViews();
    layout.addView(gView);
    return;
default:
    break;
} 
```

}

我希望有人可以帮助我，我很抱歉我的英语不好谢谢大家：]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:58:23.830

您正在使用透明背景。您可以通过使用其他背景类型或不设置任何背景来解决此问题。

# wordpress - 如何在 wordpress 插件中使用foursquare公共搜索api来避免暴露我们的密钥/秘密

> ID：14748430
> 
> 赞同：1
> 
> 时间：2013-02-07T10:08:10.373
> 
> 标签：wordpress, foursquare

我正在向我的 wordpress 插件添加位置并想使用[foursquare公共API](https://developer.foursquare.com/docs/venues/search). 我想了解的是这将如何工作，因为我的插件将安装在各种系统上。如您所见，用户不需要经过身份验证，因此我可以在插件中提供我们自己的 client_id 一个 client_secret 来调用 api，但这会将它们暴露给公众，并且某些竞争对手可能会滥用它来破坏速率限制。处理这个问题的最佳方法是什么？例如 instagram 是如何工作的？即使我没有登录foursquare，我也可以使用位置搜索，他们是如何做到的？我的想法是代理对我们 api 的调用，并通过添加我们的 client_id/secret 从我们的 api 进行调用，并让用户选择性地插入他自己的，但是硬编码插件的 id/secret 真的是个坏主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:15:11.540

有一种方法; 您的插件的每个用户都应该分别获得foursquare API凭据并将其填写在插件（仪表板）的设置中以激活它。

# android - 三星 Galaxy Note II 的设备宽度是多少？

> ID：14748431
> 
> 赞同：1
> 
> 时间：2013-02-07T10:08:14.760
> 
> 标签：android, mobile, browser, web, device-width

我找不到适用于网络浏览器的三星 Galaxy Note II 的真实设备宽度，我找到了 320 像素、480 像素和 640 像素这 3 个不同的值，但我不知道哪个是正确的。

顺便说一句，我在[维基百科](http://en.wikipedia.org/wiki/List_of_displays_by_pixel_density)上找到了按像素密度排列的显示器列表，但没有设备宽度......

编辑：我正在寻找在移动浏览器（视口）中声明的网络设备宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:11:57.563

你见过这个吗。？

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

他们是

超大屏幕至少为 960dp x 720dp

大屏幕至少为 640dp x 480dp

普通屏幕至少为 470dp x 320dp

小屏幕至少为 426dp x 320dp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:12:15.147

如果您想以编程方式找到它，只需查看这个问题。 [以像素为单位获取屏幕尺寸](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

如果没有，你可以在这里问：[https ://android.stackexchange.com/](https://android.stackexchange.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:47:15.773

嘿，我有一个便条 2，我从 DisplayMetrics 得到宽度，它说它是 720 像素，高度是 1280 像素

# sql - Ole db 命令和事务。一般错误

> ID：14748438
> 
> 赞同：0
> 
> 时间：2013-02-07T10:09:00.223
> 
> 标签：sql, transactions, ssis

我有一个 OLE DB 命令，它最初包含一个简单的三行更新：

> 更新 raw_CommissionPaid 设置 PolicyNumber = ? 其中 PolicyNumber = ？

这工作正常，完全符合预期，一切都很好。

我最近决定，虽然这有可能出错并造成很大的损害，所以我决定把它全部放在一个事务中，监控受影响的行，如果它的变化超过我的预期，就回滚，所以我改变了我对此的更新：

> BEGIN TRY BEGIN TRAN UpdateCommissionsPaidPolNo
> 
> 更新 raw_CommissionPaid 设置 PolicyNumber = ? 其中 PolicyNumber = ？
> 
> IF @@ROWCOUNT <> 1 RAISERROR('行数 <> 1', 11, 1)
> 
> COMMIT TRAN END TRY BEGIN CATCH ROLLBACK TRAN UpdateCommissionsPaidPolNo
> 
> ```
>  PRINT 'UpdateCommissionsPaidPolicyNumber script failed'
> 
>   SELECT
>         ERROR_MESSAGE() as ErrorMessage            END CATCH 
> ```

然而，这给了我它通常给出的“语法错误或一般错误”消息。我从上一个问题中记得，有时它无法将参数映射到？如果它们嵌入在其他 SQL 中，我认为这可能是问题所以将其更改为以防万一：

> 声明@FNumber varchar(20) 声明@LNumber varchar(20)
> 
> 设置@FNumber = ? 设置@LNumber = ?
> 
> BEGIN TRY BEGIN TRAN UpdateCommissionsPaidPolNo
> 
> 更新 raw_CommissionPaid 设置 PolicyNumber = @FNumber 其中 PolicyNumber = @LNumber
> 
> IF @@ROWCOUNT <> 1 RAISERROR('行数 <> 1', 11, 1)
> 
> COMMIT TRAN END TRY BEGIN CATCH ROLLBACK TRAN UpdateCommissionsPaidPolNo
> 
> ```
>  PRINT 'UpdateCommissionsPaidPolicyNumber script failed'
> 
>   SELECT
>         ERROR_MESSAGE() as ErrorMessage            END CATCH 
> ```

但从这里我仍然得到：

> 语法错误、权限违规或其他非特定错误

我意识到这可能是因为打印或错误消息的返回，但删除它们并没有改变任何东西，它仍然失败

我确定 sql 是有效的，因为我在 SQL Server Management Studio 中对其进行了测试。

有人遇到过这个吗？是否有我应该更改的设置以允许这种更改？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:48:29.437

阅读[此站点](http://msdn.microsoft.com/en-gb/library/ms137690%28v=sql.90%29.aspx)后，我了解到，如果我将数据流任务 TransactionOption 属性设置为受支持，那么如果它失败，它应该会自行回滚失败的部分。

有了这些知识，我想我唯一需要做的就是让它意识到正在更新的多行被视为错误。所以把它改成这样：

> 更新 raw_CommissionPaid 设置 PolicyNumber = ? 其中 PolicyNumber = ？
> 
> IF @@ROWCOUNT <> 1 RAISERROR('行数 <> 1', 11, 1)

应该让它自己回滚。

# angularjs - angular.js 使用 ng-options 仅显示唯一值

> ID：14748440
> 
> 赞同：19
> 
> 时间：2013-02-07T10:09:14.413
> 
> 标签：angularjs

如果我有一个数组

```
$scope.colors = [
{name:'black', shade:'dark'},
{name:'white', shade:'light'},
{name:'red', shade:'dark'},
{name:'red', shade:'dark'},
{name:'yellow', shade:'light'} 
```

];

是否可以使用 ng-options 在下拉列表中构建一个只有唯一值的选择元素，所以红色只会显示一次？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-07T10:51:46.173

[AngularUI](http://angular-ui.github.com/)正是您所需要的，“独特”过滤器（[src 代码](https://github.com/angular-ui/angular-ui/blob/master/modules/filters/unique/unique.js)）。

例子：

```
ng-options="color in colors | unique:'name'" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-08-04T08:39:08.100

您可以使用[angular.filter](https://github.com/a8m/angular-filter)模块的 uniq/unique 过滤器。
**用法：** `collection | unique: 'property'` 或`collection | unique: 'nested.property'`

**JS：**

```
$scope.colors = [
 {name:'black', shade:'dark'},
 {name:'white', shade:'light'},
 {name:'red', shade:'dark'},
 {name:'red', shade:'dark'},
 {name:'yellow', shade:'light'}
]; 
```

**HTML：**

```
<select ng-options="color in colors | unique:'name'"></select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T20:02:04.583

我没有发现上面的回复有效。我做了以下事情：

以这种方式实现了我`ng-options`的：

```
<select ng-model="test" ng-options="cand.candidate for cand in candidates  | unique:'candidate'">
   <option value="">Select Candidate</option>
</select> 
```

将您的模块添加到您的应用程序中：

```
var app = angular.module('phonecatApp', ['ui.unique']); 
```

使用 Bower 仅安装 Ui Utils Unique。[链接到说明。](http://angular-ui.github.io/ui-utils/)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2016-05-29T18:16:32.463

```
src="js/vendor/bower_components/angular-filter/dist/angular-filter.js"> 
angular.module('app', ['angular.filter'])
ng-repeat="color in colors | unique:'name'">{{color.name}} 
```

# java - guice - 提供者总是返回相同的实例

> ID：14748442
> 
> 赞同：1
> 
> 时间：2013-02-07T10:09:23.117
> 
> 标签：java, dependency-injection, guice, guice-servlet

我正在使用 guice 3 和 guice-servlet 3。在模块中，我定义了这种类型的绑定：

```
[...]
bind(View.class).annotatedWith(Names.named("view1")).to(View1Impl.class);
bind(View.class).annotatedWith(Names.named("view2")).to(View2Impl.class);
[...] 
```

在注入的类 View1Impl 中，我定义了以下内容：

```
public class View1Impl {

    @Inject @Named("view1") Provider<View> viewProvider;

    @Inject
    void init() {
        View viewA = viewProvider.get();
        View viewB = viewProvider.get();

        log.debug(viewA == viewB);
        log.debug(viewA == this);
    }

} 
```

两个语句都返回 true。但事实并非如此。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:04:21.023

您可能已经检查过这一点——您已经列出了您使用的“那种”绑定——但值得仔细检查一下，在您的未编辑代码中，所涉及的类都没有被谨慎地注释`@Singleton`或绑定到`Singleton.class`范围。此外，请确保您的任何绑定都不使用`toInstance()`，这当然总是在所有情况下都返回该预先构造的实例，并且实际上是单例绑定。

我们有一个案例，我们重构了一个`bindView`方法，最终忘记了我们将其设置为始终将其参数绑定为单例（这样视图的父容器和视图的控制器可以注入相同的视图）。

除非，正如 Danyel 所暗示的那样， Guice 中编码了[循环依赖检测](http://code.google.com/p/google-guice/source/browse/core/src/com/google/inject/internal/InternalContext.java#30)，并且由于您`provider.get()`在`@Inject`-annotated 方法中调用您的方法，因此您可能正在调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:34:02.040

如果您查看 Guice 的源代码，就会清楚实际做了什么：

```
final ThreadLocal<Object[]> localContext;

/** Looks up thread local context. Creates (and removes) a new context if necessary. */
<T> T callInContext(ContextualCallable<T> callable) throws ErrorsException {
    Object[] reference = localContext.get();
    if (reference[0] == null) {
        reference[0] = new InternalContext();
        try {
            return callable.call((InternalContext)reference[0]);
        } finally {
            // Only clear the context if this call created it.
            reference[0] = null;
        }
    } else {
        // Someone else will clean up this context.
        return callable.call((InternalContext)reference[0]);
    }
} 
```

显然，当您的对象被注入时，Guice 将其存储在该`ThreadLocal`变量中。现在，根据这个代码片段，它会在注入时立即释放。因此，可能在您的“范围”中，它在其他地方被初始化，可能在注入开始时 - 在注入结束时，它被释放。

# javascript - 在 jQuery(document).ready() 之后从外部位置运行 javascript

> ID：14748446
> 
> 赞同：0
> 
> 时间：2013-02-07T10:09:33.177
> 
> 标签：javascript, jquery, external, document-ready

外部 javascript 在页面内容的 div 中加载如下：

```
<script type="text/javascript" src="http://example.com/example.js"></script> 
```

外部脚本打印时事通讯的注册表单，如下所示：

```
document.write("<body>\n<form method=\"post\" action ETC...."); 
```

问题是外部服务器很慢，并且这个第三方脚本在 jQuery(document).ready() 之前加载，这会延迟幻灯片 facebook 插件等。

**加载整个页面后，如何使此脚本在页面内容中的当前位置呈现？**

（我在不同的线程中尝试了很多建议的解决方案，但没有一个对我有用......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:13:42.193

`$(window).load`下载所有文件/资产后将触发使用它。

```
$(window).load(function () {
  // run code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:19:41.977

```
<body onload="RunScript();">

function RunScript()
{
   document.write("<body>\n<form method=\"post\" action ETC....");
} 
```

或者

```
document.onload=function ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:16:20.113

您需要做的是“注入”页面已加载的脚本：

```
$(function () {
     $('body').append('<script src="example.com/script.js"></script>');
}); 
```

这将在文档准备好时执行，但这不是问题，因为脚本将异步加载。

# html - Angular.js 使用引导程序并动态创建行

> ID：14748449
> 
> 赞同：9
> 
> 时间：2013-02-07T10:09:37.200
> 
> 标签：html, twitter-bootstrap, angularjs

我试图弄清楚如何使用指令动态创建带有类`bootstrap`的行 div 。`row-fluid``angular.js``ng-repeat`

这是角度：

```
 <div ng-repeat="task in tasks" class="row-fluid">
     <div class="span6 well">{{task.name}}</div>
 </div> 
```

**但这**不起作用。`bootstrap`我希望生成的html 是：

[http://jsfiddle.net/YKkXA/2/](http://jsfiddle.net/YKkXA/2/)

基本上我需要对 ng-repeat 内的索引进行 mod 2，如果它为 0，则关闭`</div>`并创建一个新的`<div class="row-fluid">`. 这怎么可能？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-19T10:56:13.973

这个想法是过滤您的项目以便对它们进行分组，然后`ngRepeat`再对子项目进行迭代。

首先，将该过滤器添加到您的模块中：

```
module.filter('groupBy', function() {
    return function(items, groupedBy) {
        if (items) {
            var finalItems = [],
                thisGroup;
            for (var i = 0; i < items.length; i++) {
                if (!thisGroup) {
                    thisGroup = [];
                }
                thisGroup.push(items[i]);
                if (((i+1) % groupedBy) === 0) {
                    finalItems.push(thisGroup);
                    thisGroup = null;
                }
            }
            if (thisGroup) {
                finalItems.push(thisGroup);
            }
            return finalItems;
        }
    };
}); 
```

在您的控制器中（因为如果您直接在模板中过滤，那么您将有一个[$digest 循环](https://stackoverflow.com/a/12340772/535203)）：

```
function TaskCtrl() {
    $scope.tasksGroupBy2 = $filter('groupBy')(taskGroup, 2);
} 
```

在你的`.html`：

```
<div ng-repeat="taskGroup in tasksGroupBy2" class="row-fluid">
    <div ng-repeat="task in taskGroup" class="span6 well">{{task.name}}</div>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-05T15:05:27.367

作为对 Anthony 给出的答案的改进，我想说使用 slice 方法而不是经历所有这些条件可以为自己省去很多麻烦。

尝试按如下方式定义您的过滤器：

```
module.filter('group', function() {
    return function(items, groupItems) {
        if (items) {
            var newArray = [];

            for (var i = 0; i < items.length; i+=groupItems) {
                if (i + groupItems > items.length) {
                    newArray.push(items.slice(i));
                } else {
                    newArray.push(items.slice(i, i + groupItems));
                }
            }

            return newArray;
        }
    };
}); 
```

之后，您可以调用控制器上的过滤器，正如 Anthony 在他的回复中指出的那样：

```
function Controller ($scope) {
    $scope.itemsGrouped = $filter('group')(itemsArray, 5);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T09:43:08.900

题外话：使用引导程序，您可以将 class="span6 well" 的 div 放入一个 bigass 行，因为它们会很好地堆叠。（您也将获得响应式布局）。抱歉，这只是引导程序无法处理的行为示例。安东尼和雷米吉奥是对的；您必须创建一个额外的模块车辆，它将生成沉浸在您的 ng 重复标签中的 div。

# javascript - 绑定 popstate 事件不起作用

> ID：14748452
> 
> 赞同：9
> 
> 时间：2013-02-07T10:09:42.920
> 
> 标签：javascript, google-chrome, firefox, browser-history, popstate

我试图将此代码输入浏览器的控制台：

```
window.onpopstate = function() {alert(1);} 
```

然后单击返回按钮。没有显示警报。难道我做错了什么？还是不允许从控制台将 popstate 事件绑定到页面？

使用 Chrome 24 和 Firefox 18

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T04:07:24.567

在控制台中输入

```
window.onpopstate = function() {alert(1);}; history.pushState({}, ''); 
```

然后单击返回按钮。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-06-02T00:26:57.367

我更喜欢按如下方式添加 popstate 侦听器，以防止覆盖已经存在的内容`window.onpopstate`：

```
window.addEventListener('popstate', function(){alert(1);}); 
```

# javascript - 鼠标悬停在块上

> ID：14748457
> 
> 赞同：-2
> 
> 时间：2013-02-07T10:09:46.693
> 
> 标签：javascript, jquery

我的要求是这样的！

当我将鼠标悬停在“？”上时 将出现一个带有链接和视频超链接的块。现在鼠标悬停功能应该可以工作，直到我进入块。当我从块/从？中移动光标时，应该发生 mouseout 事件。因为我是 javascript 的新手，所以我对此没有太多想法。请提供有关此的任何示例

编辑：添加了实际代码：

```
<apex:outputLink styleClass="helpLink" onmouseover="$('{!$Component.Foo}').style.display ='block';"> 
<apex:image value="/s.gif" styleClass="helpIcon" /></apex:outputLink>
<apex:outputPanel id="Foo" styleClass="video" >
    <a href="" target="_blank" onmouseout="$('{!$Component.Foo}').style.display = 'none';" >link</a> 
</apex:outputPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:18:04.717

您的假设实际上是正确的。我猜你想要这个事件过程的直接代码。将事件绑定到您的块元素就足够了，例如：

```
$('#myTarget').bind('mouseover', function() { $(this).html('over'); });
$('#myTarget').bind('mouseout', function() { $(this).html('out'); }); 
```

这是 jsfiddle 演示的链接：http: [//jsfiddle.net/hDvaB/](http://jsfiddle.net/hDvaB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:13:41.077

将块的 HTML 标签放在具有鼠标悬停功能的元素内。

为了完成这项工作，需要定义块相对于某些父元素的绝对位置。您只需放置 css 属性`top`并`left`定义块相对于父级的显示位置。

尝试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:29:37.733

我认为 hover() 可能会更好：

```
$("div").hover(function(){
$(this).html("in");},
 function(){
$(this).html("out");
 }); 
```

小提琴：http: [//jsfiddle.net/devWaleed/vQgMm/1/](http://jsfiddle.net/devWaleed/vQgMm/1/)

# html - 官方标题使用原则？

> ID：14748461
> 
> 赞同：2
> 
> 时间：2013-02-07T10:09:55.523
> 
> 标签：html, header, accessibility, html-heading

W3C 没有明确说明我们应该如何使用标题，或者我找不到此类信息。

资源：

*   [http://www.w3.org/TR/html401/struct/global.html#h-7.5.5](http://www.w3.org/TR/html401/struct/global.html#h-7.5.5)
*   [http://www.w3.org/TR/WCAG-TECHS/H42.html](http://www.w3.org/TR/WCAG-TECHS/H42.html)
*   [http://www.w3.org/TR/WCAG-TECHS/G141](http://www.w3.org/TR/WCAG-TECHS/G141)

这非常简短，并提出了许多问题，例如：

1.  “有些人认为跳过标题级别是不好的做法。他们接受`H1 H2 H1`而他们不接受`H1 H3 H1`，因为标题级别`H2`被跳过了。” - 那么，我们应该跳过它们吗？
2.  设计侧边栏时 - 应该使用哪些标题？`H2`?
3.  设计页脚时 - 应该使用哪些标题？`H2`?
4.  标题是用于列表（如页脚中的帖子列表）吗？
5.  应该`H1`在一个页面上只使用一次？
6.  在设计“帖子列表页面”时——每个条目通常由 TITLE 和 EXCEPT 组成——我们应该使用`H1`标题吗？或者`H2`或者`DIV`?
7.  由于标题是块级元素，我假设链接进入内部？对于`span`应该以不同寻常的方式设置标题样式的 's 也是如此？

如果有人能对此有所了解，那就太好了:)谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T14:08:10.067

> 1.有些人认为跳过标题级别是不好的做法。他们接受 H1 H2 H1 而他们不接受 H1 H3 H1 因为标题级别 H2 被跳过了。” - 那么，我们应该跳过它们吗？

正如理查德所说，这取决于程序员。一般来说，标题会在您的页面中构建结构，就像您在学校为论文制作的大纲一样。有一个网站，可以根据标题为您创建大纲。进一步的 WebAIM 发现，人们使用技术，[比如知道自己处于什么级别](http://webaim.org/projects/screenreadersurvey4/#levels)，所以跳来跳去，可能会让一些人感到困惑。

> 2.在设计侧边栏时 - 应该使用哪些标题？氢2？

我通常会输入一个`<h2>`，以便人们可以更轻松/更快地导航到它。老实说，我已经有一年左右没有积极设计过页面了，所以如果我要做某事，如果侧边栏确实不需要标题，我可能会使用[ARIA来代替，并分配“补充”角色。](http://www.w3.org/WAI/intro/aria.php)使用 HTML5，我可以简单地使用`<aside>`标签，它本身就具有补充作用。

> 3.在设计页脚时 - 应该使用哪些标题？氢2？

我通常不在页脚中使用标题。您可以将 contentinfo 角色分配给 footer `div`，或者使用 HTML5`<footer>`标签，它再次具有原生属性。这篇[关于 ARIA](http://www.paciellogroup.com/blog/2010/10/using-wai-aria-landmark-roles/)的博文很有帮助。

> 4.Headings 是用来做列表的（比如页脚中的帖子列表）？

当然，你可以这样做：

```
<h3>My favorite Movies</h3>
<ol>......</ol> 
```

> 5.H1应该在一个页面上只使用一次吗？

漫长而无休止的辩论。我认为 H1 应该只用于内容的标题，例如 SO 上的问题标题。HTML5 小组中有一个讨论，新标签，例如`<section>`重置我上面提到的层次结构/大纲，并且`h1`可以使用。我**不是**粉丝，也不赞成这一点。

> 6.在设计“帖子列表页面”时-每个条目通常由TITLE和EXCEPT组成-我们应该使用H1作为标题吗？还是 H2 或 DIV？

我会用`h2`'s

> 7.既然标题是块级元素，我假设链接在里面？对于应该以不寻常方式设置标题样式的跨度也是如此？

正确的做法是`<h_><a>Words</a></h_>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T07:55:08.470

您应该阅读HTML5 规范的“[标题和部分”部分。](http://www.w3.org/TR/html5/sections.html#headings-and-sections)获得正确的标题是可访问性的一个重要方面。

使用标题（和部分），您可以告诉各种用户代理您的页面是如何构建的，哪些内容属于一起，哪些内容彼此分开。

想想一个有 3 列的典型网站。第一列是网站导航，第二列是主要内容，第三列是次要内容。现在，由于不同的背景颜色、边距、边框等等，能够看到的人可能会立即掌握页面上的三个“区域”。但是视障或盲人无法从页面的图形设计中获得线索。机器（如搜索引擎）也不是。因此我们使用标题/分段元素，因此他们可以从标记中获取信息（页面的结构）。

每个 HTML5 文档都有一个**大纲**，它是通过使用标题`h1`- `h6`（和`hgroup`）和/或分段元素（、、、、`section`）`article`创建`nav`的`aside`。您可以将其视为某种[TOC](http://en.wikipedia.org/wiki/Table_of_contents)。

虽然能够看到的人通过查看图形设计来初步了解页面结构，但使用屏幕阅读器和机器的人通过阅读页面大纲来了解页面结构，例如：

```
(1.) John Doe's Example Blog
  (1.1) Navigation
  (1.2) My first year at ACME
  (1.3) Recent blog posts 
```

这可能是以下示例文档的大纲：

仅使用标题：

```
<body>
  <h1>John Doe's Example Blog</h1>
  <h2>Navigation</h2>
  <h2>My first year at ACME</h2>
  <h2>Recent blog posts</h2>
</body> 
```

根据计算的大纲使用具有级别的分段元素和标题：

```
<body>
  <h1>John Doe's Example Blog</h1>
  <nav>
    <h2>Navigation</h2>
  </nav>
  <article>
    <h2>My first year at ACME</h2>
  </article>
  <aside>
    <h2>Recent blog posts</h2>
  </aside>
</body> 
```

`h1`随处使用切片元素：

```
<body>
  <h1>John Doe's Example Blog</h1>
  <nav>
    <h1>Navigation</h1>
  </nav>
  <article>
    <h1>My first year at ACME</h1>
  </article>
  <aside>
    <h1>Recent blog posts</h1>
  </aside>
</body> 
```

（后两者在语义上是等价的！）

使用分段元素时，您甚至可以完全省略标题，大纲仍然是相同的，尽管“未命名”（这不是很有帮助！）：

```
<body>
  <nav></nav>
  <article></article>
  <aside></aside>
</body> 
```

这将是相应的大纲：

```
(1) (Untitled Section)
  (1.1) (Untitled Section)
  (1.2) (Untitled Section)
  (1.3) (Untitled Section) 
```

您可以使用此[在线大纲](http://gsnedders.html5.org/outliner/)来查看哪些文档创建了哪些大纲。

> 那么，我们应该跳过它们吗？

*为什么*你首先要跳过关卡？它可能永远不会*好*，所以不，你*不应该*跳过关卡。但如果发生这种情况，我不会认为这是一个严重的错误。

但是请注意，根据您跳过的准确程度，特别是如果您没有跳过该级别的所有标题，则可能会创建错误的大纲。例如，参见这个简单的文档：

```
<body>
<h1>Interesting stories</h1> <!-- this is the site heading -->

  <h2>My first snow</h2> <!-- this is a story -->
    <h3>What I thought snow would be like</h3> <!-- this is a subsection of that story -->
    <h3>How I experienced it actually</h3> <!-- also subsection -->
    <h3>Why I'm disappointed by snow</h3> <!-- also subsection -->

  <h2>More stories about snow</h2> <!-- this is not part of the story, but a kind of "See also" for the site/page -->
</body> 
```

现在，如果您将最后一个更改`h2`为`h3`，突然间这个“更多故事”部分将成为故事的一个子部分。如果您将其更改为`h4`，它将成为一个小节。

> 设计侧边栏时 - 应该使用哪些标题？`H2`? 设计页脚时 - 应该使用哪些标题？`H2`?

这些问题一般都无法回答。这取决于您的网站*、*页面*和*内容。但是，是的，在许多情况下，“典型页面”`h2`将是正确的候选人。页面标题（不要与主要内容标题混淆！）是`h1`，主要内容是`h2`，次要内容（侧边栏等）是`h2`。如果您的页脚需要一个标题（不是每个都需要），那么`h2`在这种情况下也是如此。

> 标题是用于列表（如页脚中的帖子列表）吗？

这实际上取决于内容和上下文。

您必须提出的重要问题（通常，对于所有航向决定）：

1.  此内容是否“属于”上一个标题？
2.  **如是：**
    1.  它是某种子部分吗？→ 分别使用更高一级的标题。使用一个`section`元素（以及它内部的可选标题）
    2.  此内容是否没有自然的“副标题”？→ 不要在这里使用标题
3.  **如果否：**分别使用低一级的标题。使用不是相关切片元素的子元素的切片元素
    *   （您必须重复此步骤，直到您的标题/部分是它所属标题的子标题）

> 应该`H1`在一个页面上只使用一次？

没有。正如我所解释的，您可以使用页面上`h1`的*所有*标题（*如果*您使用分段元素！）。

> 在设计“帖子列表页面”时——每个条目通常由 TITLE 和 EXCEPT 组成——我们应该使用`H1`标题吗？或者`H2`或者`DIV`?

您可能应该`article`为每个条目使用一个元素。所以你会自动得到一个标题（=大纲中的一个条目），可以这么说，就像`article`一个切片元素一样。现在，您可以使用`h1`它（无论`article`放置在哪里！），或者您可以使用计算的标题级别（如果`article`是 的直接子级`body`，您将使用`h2`. 如果它更深一层，`h3`. 等等.)。

* * *

使用分段元素和标题，以便创建有用的大纲。

如果您标记网页，请只查看创建的大纲一分钟：这有意义吗？您是否了解页面的结构，它有哪些部分？层次结构是否正确？此大纲中是否缺少页面的单独区域/部分？一个部分是它不属于的部分的子部分吗？（例如，您经常看到*站点*导航是页面主要内容的子项，当然这是不正确的：通常它们应该在*同一*级别，都是*站点*标题的子项）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:38:36.647

`<h_>`从其原始用途的角度来看，这些标签有点多余。随着 CSS 的普遍存在，类似这样的标签`<h4>`几乎可以描述所有意图和目的。

*如果您有一个包含多个部分的页面，那么以某种方式表示这**一点*是有意义的，并且在`<section id="">`完全采用HTML5标记之前，标题对于阅读源代码很有用。考虑因素可能包括：

 *1.  搜索引擎优化：如果你把一段文本作为**标题**，你就是在告诉搜索引擎，“嘿，这很重要！”。这在多大程度上重要还有待讨论。
2.  代码可读性：如果有多个人在项目上工作，**标题**是了解页面副本中出现中断的好方法。您可以`<!-- Sidebar Here -->`使用类似的效果来执行此操作，但对某些人来说，这是矫枉过正的。

> “有些人认为跳过标题级别是不好的做法。他们接受 H1 H2 H1 而他们不接受 H1 H3 H1，因为跳过了标题级别 H2。” - 那么，我们应该跳过它们吗？

这是由程序员自行决定的。您可能决定使用`<h1>`页面标题、`<h2>`章节标题，但这不是一成不变的。无论如何，您都可以使用 CSS 重新设置标题的样式，因此您可以更喜欢层次结构而不是外观。如果您认为**侧边栏与****标签云**同等重要，请给它们相同的标题分类。

> 由于标题是块级元素，我假设链接进入内部？对于应该以不寻常方式设置标题样式的跨度也是如此？

这是绝对正确的。

我所说的要点是 W3C 标准可供参考。**制作网络浏览器、RSS 阅读器等**的开发团队关心它们，因为这意味着他们不必相互讨论新标签。想象一下，谷歌、微软和苹果就何时应该使用`<h4>`或标签举行跨党派会谈......噩梦燃料！`<span>`

如果上面**问题 2-6**中的主题不是一成不变的，那么常识就是故障保险。那，并与您的同事交谈并同意前进的方向。很抱歉重复我自己，但**标准仅供参考**。

希望有帮助！*

# objective-c - Xcode + CocosBuilder：无法创建类型的类

> ID：14748465
> 
> 赞同：1
> 
> 时间：2013-02-07T10:10:06.807
> 
> 标签：objective-c, xcode, cocos2d-iphone

我使用来自 cocosBuilder 的 Xcode 4.5 + CocosBuilder-3.0 alpha + cocos2d：

```
cocos2d: cocos2d-iphone v2.1-rc0
cocos2d: compiled with Profiling Support: NO
cocos2d: OS version: 6.0 (0x06000000)
cocos2d: GL_VENDOR:   Apple Computer, Inc.
cocos2d: GL_RENDERER: Apple Software Renderer
cocos2d: GL_VERSION:  OpenGL ES 2.0 APPLE
cocos2d: GL_MAX_TEXTURE_SIZE: 4096
cocos2d: GL_MAX_TEXTURE_UNITS: 8
cocos2d: GL_MAX_SAMPLES: 4
cocos2d: GL supports PVRTC: YES
cocos2d: GL supports BGRA8888 textures: YES
cocos2d: GL supports NPOT textures: YES
cocos2d: GL supports discard_framebuffer: YES
cocos2d: GL supports shareable VAO: NO 
```

我尝试连接我的 MainMenuScene。我在cocosbuilder上新建了一个项目，添加了CClayer的新文件子类，并将CClayer CustomClass设置为'MainMenuScene'。然后我将 MainMenuScene.cb、MainMenuScene.ccb、我和 Builder 的图像发布并复制到我的 Xcode 项目中，并将其添加到我的项目中 + 将我的项目设置为目标成员。

![在此处输入图像描述](../Images/0936a006eb0ae079b3afdd08440df096.png)

然后我在我的 AppDelegate.m 中添加了以下行：

```
- (BOOL)application:(UIApplication *)application 
    didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CCScene* myScene = [CCBReader sceneWithNodeGraphFromFile:@"MainMenuScene.ccbi"];
} 
```

但是在这个字符串中我看到**CCBReader: Could not create class of type MainMenuScene** 为什么？？？请帮帮我。[我在这里](http://www.cocos2d-iphone.org/forum/topic/111740)找到了一篇文章，但我不明白如何在我的项目中使用它。

# c# - 如何以编程方式将 ics 文件转换为 pdf 格式？

> ID：14748467
> 
> 赞同：1
> 
> 时间：2013-02-07T10:10:08.420
> 
> 标签：c#

我有一个 ics 文件。我想使用 c# 以编程方式将其转换为 pdf 格式。你能告诉我如何以编程方式做到这一点。我需要为此使用任何dll吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:14:40.303

如果您不想将 ics 文件作为平面文件（作为平面文本）处理，则可以使用[DDay.iCal](http://sourceforge.net/projects/dday-ical/)之类的东西通过对象模型获取数据。从那里开始，您将使用例如[iTextSharp](http://sourceforge.net/projects/itextsharp/)创建您的 pdf。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:14:01.463

您将需要一个 pdf 转换库。有几种可用的，一些付费的，一些免费的。

这是一个免费的例子：[http ://www.pdfsharp.com/PDFsharp/](http://www.pdfsharp.com/PDFsharp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:14:28.107

您可以`.ics`像使用简单文本文件一样使用文件。因此，您可以使用任何允许创建 pdf 的库。

我使用[itextsharp](http://mlichtenberg.wordpress.com/2011/04/13/using-c-and-itextsharp-to-create-a-pdf/)。你可以在这里下载：http: [//sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:22:06.727

您可以使用 NET 库 Aspose.iCal 来解析 ICS 文件

[http://www.aspose.com/community/blogs/salman.sarfraz/archive/2008/11/21/where-is-aspose-icalendar.aspx](http://www.aspose.com/community/blogs/salman.sarfraz/archive/2008/11/21/where-is-aspose-icalendar.aspx)（以前是[http://www.aspose.com/categories /file-format-components/aspose.network-for-.net/default.aspx](http://www.aspose.com/categories/file-format-components/aspose.network-for-.net/default.aspx) )

[并且使用http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)上的 iTextSharp或类似软件创建 PDF。

# php - 表达式引擎从“存档”部分排除当前查看页面的条目

> ID：14748470
> 
> 赞同：0
> 
> 时间：2013-02-07T10:10:10.253
> 
> 标签：php, expressionengine

我需要显示一个带有后续存档部分的新闻页面。我想从存档部分中排除当前查看的条目。

到目前为止，这是我的表达式引擎/PHP 代码：

```
<article  class="d1-d8 tp1-tp4 ml-all mp-all">
         {exp:channel:entries channel="news" limit="1" status="open" sort="asc"}
              <h2><a href="#">{title}</a></h2>
             <p>{testo_notizia}</p> 
```

然后我将上面的 entry_id 分配到一个 php 变量中

```
 <?php $entry_id = '{entry_id}'; ?> 
```

继续我的表达式引擎代码

```
{/exp:channel:entries}
             <h2>Archivio news</h2>

<?php echo $entry_id; ?>   //THIS SHOWS CORRECTLY

  {exp:channel:entries channel="news" entry_id="not <?php echo $entry_id; ?>" status="open" sort="asc" dynamic="no"} 
//THE FILTER IS NOT WORKING/EXCLUDING THE PREVIOUS ENTRY_ID FROM THE LISTING
    <div class="titoli-notizie">
                  <h3><a href="{url_title_path='/news/view'}">{title}</a></h3>
                  </div>
             {/exp:channel:entries}
             </article> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:49:45.690

我通过使用特殊的 url_title="not {segment_2}" 而不是依赖 php 变量来解决，这在我看来是一个更甜蜜的选择。

# simperium - Simperium 收到无效更改

> ID：14748472
> 
> 赞同：0
> 
> 时间：2013-02-07T10:10:18.207
> 
> 标签：simperium

我正在开发与 Simperium 的集成，集成已完成并且已经在测试机器上运行了一段时间，我开始在其中一台设备上遇到此错误，并且它不断重复任何想法？

MeetingPad[891:1103] Simperium error (ActionLinks82), received an invalid change for (a18852011efe4964a6fdeb1853c790f3) 2013-02-07 10:07:05:277 MeetingPad[891:1103] Simperium client ios-7f43b434754d882923e966df5d885755 received change (ActionLinks82) ios- 4176925448fa8ae0a2f1d0937627aa6b: { ccids = ( 3f3b4550b23147d49e194038feea09a6 ); clientid = "ios-4176925448fa8ae0a2f1d0937627aa6b"; 简历 = 5112df4b37a401031dcc5be1；ev = 2; id = 9ca0b7ad04314ab9888d75691be784b5；o = "-"; }

如果这发生在用户帐户上，指导是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:15:51.700

要检查的一件事是您使用的是最新版本的代码。该存储库最近[在 GitHub 上开源](https://github.com/Simperium/simperium-ios)。曾经有一个与 nil 值相关的错误，可能导致无效差异出现在您的更改流中，但现在应该修复它。

假设您使用的是最新代码，错误是否会针对相同的“id”值连续重复，还是存在不同的值？

查看发生此错误的 Simperium 代码，如果您几乎同时在本地和远程删除了一个对象，它可能会显示出来。在您的应用程序中，ActionLinks 是否符合该模式，即您是否在多个客户端中创建和删除了很多它们？

如果这确实是原因，那么错误是无害的，我们应该修补代码。让我知道你发现了什么。

# android - Android viewPager 适配器

> ID：14748479
> 
> 赞同：0
> 
> 时间：2013-02-07T10:10:42.937
> 
> 标签：android, android-viewpager, adapter

当我关闭（`onPause`）我的应用程序并重新打开它时`onResume`， 不会调用`ViewPager`扩展`FragmentPagerAdapter`覆盖方法的适配器。`getItem()`我该如何调用它？这是我的 viewPager 适配器：

```
public class MyPagerAdapter extends FragmentPagerAdapter {

    private final String TAG = "MyPagerAdapter";
    private int MAX_COUNT = 100;
    fragment1 myFragment;

    public MyPagerAdapter(FragmentManager fm) {

        super(fm);
        Log.d(TAG, "Created adapter for pager");

    }

    public void setCount(int count) {
        MAX_COUNT = count;
    }

    @Override
    public Fragment getItem(int position) {

        Log.d(TAG, "getting item at " + position);

        myFragment = new fragment1();

        myFragment.position = position;
        Log.d("Fragment", "Position: " + position);

        return myFragment;
    }

    @Override
    public int getCount() {

        return MAX_COUNT;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:50:13.103

在活动的 onStart() 方法中初始化您的视图寻呼机。OnCreate() 方法在活动创建后调用。或者在 OnRestart() 方法上再次调用它。有关详细信息，请参阅[活动生命周期](http://developer.android.com/guide/components/activities.html)

# java - java - 为什么返回类型为long或double时返回整数时java不给出错误？

> ID：14748481
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:10:45.950
> 
> 标签：java, types, casting

```
public double delhi(Integer a)
    {
        return (int)a;
    } 
```

如果你没有得到它，请查看方法的返回类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:12:46.847

因为，一个 int 可以放入一个 double 中。它被称为[**扩大原始转换**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:21:58.663

方法上声明的返回类型用于在堆栈上分配内存以存储返回值。在这里，通过将返回类型声明为`double`编译器将分配比实际返回值（32 位）所需的更多空间（64`int`位）。因此，预计不会有数据丢失`(up)conversion`。因此，编译器和运行时都不会抱怨并且可以正常工作。尝试相反，将返回类型设置为`int`并返回 a `long`or `double`。您将收到编译器错误，因为存在数据损坏的可能性。

# mysql - 为什么 VISUAL PARADIGM 8.0 不能从 ERD 创建数据库？

> ID：14748484
> 
> 赞同：0
> 
> 时间：2013-02-07T10:11:01.573
> 
> 标签：mysql, jdbc, visual-paradigm

我尝试使用 mysql java 连接器 jar 库使用[VISUAL PARADIGM](http://www.visual-paradigm.com/)生成数据库 4 小时，但仍然出现以下错误：

> [错误] 将 Quote SQL Identifier 选项设置为 Auto 或 Yes 可以解决此问题

我的mysql版本是5.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:11:01.573

问题是 MySQL 5.5 不支持“类型”表选项，新选项是“引擎”。因此，您只需将 mysql 版本更改为 <5.5 或找到一种方法来编辑 jdbc 库以使用引擎选项而不是类型来创建查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:44:18.113

Visual Paradigm 确实支持为 MySQL 5.5 生成数据库。请确保您在“数据库配置”对话框中选择了 5.0.5 或更高版本以避免此问题。

# php - 在 CodeIgniter 中将选中的复选框从 jQuery 传递到 PHP

> ID：14748487
> 
> 赞同：0
> 
> 时间：2013-02-07T10:11:08.270
> 
> 标签：php, jquery, ajax, codeigniter, checkbox

我正在编写一个 PHP 自我评估表，它有 5 个问题类别，每个类别 10 个问题。在应用程序的开头，我有 5 个复选框来表示这些类别，它们会被自动选中。这个想法是，每当用户取消选中一个类别时，该类别的问题会立即从表单中消失，当他们再次检查时，它们会回来。在 jQuery 和 AJAX 的帮助下应该可以实现的东西。

我使用 CodeIgniter 的 form_helper 制作了复选框：

```
for($i = 1; $i<=5; $i++) {
$this->formapp_model->printCatName($i);
$data = array('name'=>'category$i', 'id'=>'category$i', 'value'=>'$i', 'checked'=>TRUE);
echo form_checkbox($data);
} 
```

我有一个功能可以在类别 ID 之后从数据库中打印该类别的所有 10 个问题，当我按原样发布它们时效果很好：

```
$this->formapp_model->printCategory(1);
$this->formapp_model->printCategory(2);
$this->formapp_model->printCategory(3);
$this->formapp_model->printCategory(4);
$this->formapp_model->printCategory(5); 
```

使用这个帮助： [通过 jQuery 将复选框是否被选中，传递给 PHP](https://stackoverflow.com/questions/3141735/passing-whether-a-checkbox-is-checked-via-jquery-to-php) 我能够为 jQuery 收集它，我需要类似的东西

```
var category1 = $('#category1:checked').val(); 
```

为了检查复选框是否已被选中。我也试过

```
var category1 = $('#category1:checked').post(); 
```

因为使用 post 来让 PHP 识别它似乎是合乎逻辑的。

对于打印选择，例如

```
if (isset($_POST['category 1'])) { $this->formapp_model->printCategory(1); } else { echo "This category is not selected."; } 
```

我试过了，但 PHP 无法识别 jQuery 给出的消息，这意味着无论复选框是否被选中，该类别的问题都会永久消失。我检查`echo var_export($_POST);`并注意到所有 jQuery 打印出来的是：array ()。上面提到的问题非常有用，但错过了一些我需要让它工作的信息。提问者还使用数组而不是单独的变量，所以我不知道如何正确编辑它。

我是 jQuery 和 AJAX 的完全新手，所以我很难掌握我需要什么才能让 jQuery 和 PHP 按照我描述的方式进行动态通信。我在 stackoverflow 上跑来跑去寻找类似的案例，但没有一个完全满足我的需要。但是，如果这是一个重复的问题，我深表歉意。感谢任何帮助的人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:51:22.177

PHP 是服务器端，您需要在客户端出现/消失问题，这意味着您希望使用 jQuery 本身（或常规 js，但由于您已经在加载 jQuery，因此使用库本身会更快）。

老实说，我并没有真正关注你的观点是如何运作的，所以我只会给出一些基本的代码来给你这个想法。您创建复选框和问题，为每个问题提供唯一 ID。然后在复选框的单击方法中，您确定要显示哪些问题。

HTML：

```
<div id="checkboxes">
    <input type="checkbox" id="box1" class="check" checked="checked"/>
    <input type="checkbox" id="box2" class="check" checked="checked" />
    <input type="checkbox" id="box3" class="check" checked="checked" />
    <input type="checkbox" id="box4" class="check" checked="checked" />
    <input type="checkbox" id="box5" class="check" checked="checked" />
</div>
<div id="question1" class="question">
    <p>Question 1</p>
</div>
<div id="question2" class="question">
    <p>Question 2</p>
</div>
<div id="question3" class="question">
    <p>Question 3</p>
</div>
<div id="question4" class="question">
    <p>Question 4</p>
</div>
<div id="question5" class="question">
    <p>Question 5</p>
</div> 
```

jQuery：

```
$(".check").on("click",function(){
    var id = $(this).attr("id");
    var id2 = id.substr(id.length -1);
    var question = "question"+id2;
    if($(this).is(":checked"))
    {
        $("#"+question).css("display","block");
    } else {
        $("#"+question).css("display","none");
    }
}); 
```

演示：http: [//jsfiddle.net/calder12/taSPX/1](http://jsfiddle.net/calder12/taSPX/1)

# android - 动态地将数据提供给列表

> ID：14748488
> 
> 赞同：1
> 
> 时间：2013-02-07T10:11:10.913
> 
> 标签：android, list, button

我是 android 的新手，我正在设计一个应用程序描述......当我点击按钮时，我保留了一个编辑文本和一个按钮……

```
 public class Dynamic extends Activity {

 ArrayList<Getters> x=new ArrayList<Getters>();

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b=(Button)findViewById(R.id.nameok);
    final EditText ed=(EditText)findViewById(R.id.name);
    b.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            // TODO Auto-generated method stub
            String name=ed.getText().toString();
            Getters y=new Getters(name);
            x.add(y);
            ListView lv= (ListView)findViewById(R.id.listView1);
            Demo demo=new Demo();
        lv.setAdapter(demo);

        }
    });

}
public class Demo extends BaseAdapter
{

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return x.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        View v = convertView;

        if (v == null) {
            LayoutInflater vi = LayoutInflater.from(parent.getContext());
            v = vi.inflate(R.layout.forlist, null);
        }
        //View v=LayoutInflater.from(getApplicationContext()).inflate(R.layout.forlist, null);
        TextView listname=(TextView)findViewById(R.id.listname);
        listname.setText(x.get(position).name);

        return v;
    }

}

public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
   } 
```

吸气剂..

```
 public class Getters {
public Getters(String name) {

    this.name = name;
}

String name;

public String getName() {

     Log.v("name---",""+name);
    return name;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:24:27.793

请先[看看这个](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)，然后实现你的代码，这样它就很容易实现。

**编辑 ：**

[http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)

希望您能了解如何动态管理列表数据。

**编辑**

只需编写以下代码即可在列表视图中添加事件

```
b.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            // TODO Auto-generated method stub
            String name=ed.getText().toString();
            your List_view_obj.add(name);
            //call adapter class and pass that string                
           your List_view_obj.setAdapter(your adapter's obj);

           your_adapter_obj.notifyDataSetChanged();

        }
    }); 
```

希望你明白了。

# css - 如何互锁div？

> ID：14748489
> 
> 赞同：1
> 
> 时间：2013-02-07T10:11:11.683
> 
> 标签：css, html, pinterest, interlocked

我想从这里互锁未定义数量的 div（如在 Pinterest 中）：

```
++++++++ ********
+      + *      *
+      + *      *
+      + ********
+      +         
++++++++ 
~~~~~~~~ --------
~      ~ -      -
~      ~ -      -
~~~~~~~~ -      -
         -      -
         -      -
         -      -
         -      -
         -------- 
```

对此：

```
++++++++ ********
+      + *      *
+      + *      *
+      + ********
+      + --------
++++++++ -      -
~~~~~~~~ -      -
~      ~ -      -
~      ~ -      -
~~~~~~~~ -      -
         -      -
         -      -
         -------- 
```

CSS或其他东西有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:12:01.823

这已经被问了一百万次了。

大多数人使用砌体：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:32:37.520

感谢zessx ，我从[zessx的答案中引用了这个答案。](https://stackoverflow.com/questions/14747800/how-do-i-align-a-div-to-top)

```
<h2>Without columns</h2>
<div class="box">1 Lorem Ipsum</div>
<div class="box">2 Lorem Ipsum Lorem Ipsum</div>
<div class="box">3 Lorem Ipsum</div>
<p class="clear">&nbsp;</p>
<div class="box">4 Lorem Ipsum Lorem</div>
<div class="box">5 Lorem Ipsum</div>
<div class="box">6 Lorem Ipsum</div>
<p class="clear">&nbsp;</p>
<div class="box">7 Lorem Ipsum</div>
<div class="box">8 Lorem Ipsum</div>
<h2>With columns</h2>
<div class="column">
<div class="box">1 Lorem Ipsum</div>
<div class="box">4 Lorem Ipsum Lorem</div>
<div class="box">7 Lorem Ipsum</div>
</div>
<div class="column">
<div class="box">2 Lorem Ipsum Lorem Ipsum</div>
<div class="box">5 Lorem Ipsum</div>
<div class="box">8 Lorem Ipsum</div>
</div>
<div class="column">
<div class="box">3 Lorem Ipsum</div>
<div class="box">6 Lorem Ipsum</div>
</div> 
```

CSS

```
.box { 
width: 50px;
min-height: 50px;
background: #ccc;
margin: 3px;
padding: 3px;
float: left;
}
.clear {
clear: both;
height: 0px;
}
.column {
width:60px;
float: left;
} 
```

[看演示](http://jsfiddle.net/Dineshkani/GCvdb/)

# android - Android：如何在我的适配器中获得经纬度

> ID：14748493
> 
> 赞同：1
> 
> 时间：2013-02-07T10:11:19.847
> 
> 标签：android, google-maps

当我输入我的地址时，我想得到一个地方的纬度和经度。我有一项以编程方式创建的自定义 dailog 的活动，它有地址字段，当我输入我的地址时，我需要获取纬度和对数。下面是我试图获取 lat 和 lng 详细信息的适配器代码

```
 public void performAction(View v, final Activity activity) {

            Context myContext = v.getContext();
            PopUpMenu popUpMenu = (PopUpMenu) v.getTag();
            String result = popUpMenu.getMenuName();
            if (result != null
                    && result.equalsIgnoreCase(myContext.getResources().getString(
                            R.string.addnewplace))) {
                 AttractionData attractionData = new AttractionData();
   createDiloag(attractionData,activity.getResources().getString(R.string.addnewplace));
                setgpsLocation();

            }

        public void setgpsLocation() {

            final EditText address = new EditText(this.activity);
            String addressText = address.getText().toString();

            try {
                final StringBuffer myAddress = new StringBuffer();
                if(addressText!=null&&!addressText.trim().equals("")){
                    myAddress.append(addressText);
                }
                Geocoder gcd = new Geocoder(parentActivity, Locale.getDefault());
                List<Address> addresses = gcd.getFromLocationName(addressText, 5);

                 if (addressList != null && addressList.size() > 0) {  

             Address location = addressList.get(0);
             location.getLatitude();
             location.getLongitude();

            // int lat = (int) (addressList.get(0).getLatitude() * 1e6);  
            // int lng = (int) (addressList.get(0).getLongitude() * 1e6);  

            AttractionData attractionData = new AttractionData();
             attractionData.setLatitude(location.getLatitude());
             attractionData.setLongitude( location.getLongitude());

            } catch (Exception e) {
                Log.e(TAG, "Error", e);
            }
        } 
```

我无法获得 lat lng 详细信息，不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:16:12.107

我认为问题出在以下几行：

```
final EditText address = new EditText(this.activity);
String addressText = address.getText().toString(); 
```

`addressText`每次您都将是一个空字符串，因为您正在创建一个新的 EditText 而不是使用现有活动中的一个。

尝试将其替换为：

```
final EditText address = (EditText)this.activity.findViewById(R.id.your_edit_text_id); 
```

并替换`your_edit_text_id`为布局文件中的 id。

* * *

如果您以编程方式创建了视图，则为它提供一个 getter。

在您的活动中：

```
public EditText getAddressEditText() {
    return this.mAddressEditText;
} 
```

然后像这样使用它：

```
final EditText address = this.activity.getAddressEditText(); 
```

# sql - DB2 存储过程中的错误

> ID：14748495
> 
> 赞同：0
> 
> 时间：2013-02-07T10:11:22.307
> 
> 标签：sql, stored-procedures, db2, java-stored-procedures

以下存储过程有什么问题？

```
CREATE PROCEDURE TEST
     (IN mbr VARCHAR(30),
      OUT sql_state CHAR(5)
    ) 
DYNAMIC RESULT SETS 1 LANGUAGE SQL BEGIN DECLARE SQLSTATE CHAR(5);
DECLARE rs CURSOR WITH RETURN TO CLIENT FOR
    SELECT
            *
        FROM
            A.XYZ;
OPEN rs;
SET
sql_state = SQLSTATE;

END @; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:31:42.537

如果您在命令编辑器中运行它，那么您只需要

> 将您的默认终止字符从分号 (;) 更改为其他字符

它会起作用。

您可以在此处查看 IBM 技术说明：[http ://www-01.ibm.com/support/docview.wss?uid=swg21224723](http://www-01.ibm.com/support/docview.wss?uid=swg21224723)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T13:58:47.857

根据信息中心，[SQL 代码`-104`](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z9.doc.codes/src/tpc/n104.htm)意味着您在某处有一个非法符号。在完整的错误消息中，它应该指示该非法符号的位置。

我的猜测是您的语句终止符有些混淆，请看[这篇文章](http://eddyleesinti.blogspot.com/2007/12/db2-changing-statement-terminator.html)。

# php - 致命错误 - 打开的文件太多

> ID：14748499
> 
> 赞同：36
> 
> 时间：2013-02-07T10:11:29.983
> 
> 标签：php, phpunit

我尝试在我的新机器上运行 PHPUnit 测试，但出现此错误：

> PHP 致命错误：未捕获的异常 'UnexpectedValueException' 带有消息 'RecursiveDirectoryIterator::__construct(/usr/lib/php/pear/File/Iterator)：无法打开目录：/usr/lib/php/pear 中打开的文件太多/文件/迭代器/Factory.php:114

旧机器上的相同代码运行良好......

新机环境：PHP 版本：PHP 5.3.21 (cli) 旧机：PHP 5.3.14

PHPUnit 每次输出：

```
................EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE 65 / 66 ( 98%)
E

Time: 34 seconds, Memory: 438.50Mb

There were 50 errors:

1) XXXXXXXXXXX
PHP Fatal error:  Uncaught exception 'UnexpectedValueException' with message 'RecursiveDirectoryIterator::__construct(/usr/lib/php/pear/File/Iterator): failed to open dir: Too many open files' in /usr/lib/php/pear/File/Iterator/Factory.php:114 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-07T10:39:32.630

这可能是对运行代码的服务器的限制。每个操作系统只允许一定数量的打开文件/句柄/套接字。当服务器被虚拟化时，这个限制通常会进一步降低。在 Linux 服务器上，您可以使用 来检查当前限制`ulimit -n`，如果您具有 root 访问权限，则可以使用相同的命令来增加它。我假设Windows服务器也有一种方法。否则，您无能为力（除了要求您的主机或管理员增加它）。

更多可配置的限制：

在某一方面的变化`/etc/security/limits.conf`

```
soft nofile 1024
hard nofile 65535 
```

将 ulimit 增加`ulimit -n 65535` or`echo 65535 > /proc/sys/fs/file-max` 或 in `/etc/sysctl.conf`：

```
fs.file-max=65535 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2018-06-02T20:22:31.513

如何提高文件打开限制（Linux 或 Max OS）：

```
ulimit -n 10000 
```

解决`phpunit`or/and `phpdbg`and的问题`Warning: Uncaught ErrorException: require([..file]): failed to open stream: Too many open files in [...]`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-12-13T13:29:36.843

在php中，在执行之前，试试这个

```
exec('ulimit -S -n 2048'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-03T16:42:02.040

从睡眠模式“唤醒”我的电脑后，我遇到了这个问题。

像这样重新启动 php-fpm 修复它。经典将其关闭并重新打开解决方案。

`sudo /etc/init.d/php-fpm restart`

我认为这可能与我最近添加到 php.ini 中的 xdebug 有关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-10T17:55:20.427

不要为以后存储 DirectoryIterator 对象；当您存储超过操作系统限制（通常为 256 或 1024）时，您将收到“打开的文件过多”的错误消息。

例如，如果目录有太多文件，这将产生错误：

```
<?php 
$files = array(); 
foreach (new DirectoryIterator('myDir') as $file) { 
    $files[] = $file; 
} 
?> 
```

据推测，这种方法也是内存密集型的。

来源： http: [//php.net/manual/pt_BR/directoryiterator.construct.php#87425](http://php.net/manual/pt_BR/directoryiterator.construct.php#87425)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-06T14:09:22.543

当您忘记将某些内容包装在闭包中时，我注意到在 PHP 中会发生这种情况。仔细查看您最近的差异，您可能能够深入了解这一点（在我的情况下，我`$faker`在 Laravel PHP 单元工厂中引用而没有关闭。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-16T08:28:14.420

在服务器 debian 上你也可以去

***/etc/php/php7.xx/fpm/pool.d/www.conf***

> rlimit_files = 10000

```
/etc/init.d/php7.xx restart 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-20T11:12:19.687

我遇到了与 Http 池相关的错误，我在池中添加了太多 url（大约 2000 个 url）。

我不得不将网址分成更小的批次，并且错误停止了。

我认为它是 Guzzle Pool 的工作原理，它不会在整个池完成之前关闭 curl 连接。

**前任。**

```
$responses = Http::pool(function (Pool $pool) use ($chunk) {
    return collect($chunk)->map(fn($url) => $pool->get($url));
}); 
```

**变成：**

```
collect($urls)
    ->chunk(25)
    ->each(function ($chunk) {
        $responses = Http::pool(function (Pool $pool) use ($chunk) {
            return collect($chunk)->map(fn($url) => $pool->get($url));
        });
    }); 
```

Http 函数是 Laravel 使用 Guzzle Http 客户端的包装函数。[https://laravel.com/docs/9.x/http-client](https://laravel.com/docs/9.x/http-client)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-31T02:03:29.483

每次 PHP 尝试加载 Redis 库时，我都会收到此错误，但它是由我一开始并没有真正想到的事情引起的。当我的程序运行一段时间时，我不断收到这个错误，做一个重复的过程。我发现我打开了一个 cURL 会话 ( `$ch = new curl_init(...)`)，它在类的析构函数中关闭，但从未调用过该析构函数。我解决了这个问题，打开文件过多的错误消失了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-10T15:38:02.710

也许，您对 file 有一些错误`/etc/init.d/phpx.x-fpm`。让我们重新启动它：

```
sudo /etc/init.d/php7.2-fpm restart 
```

# linux - 如何在 qmake 中设置库顺序？

> ID：14748504
> 
> 赞同：3
> 
> 时间：2013-02-07T10:11:41.297
> 
> 标签：linux, linker, g++, makefile, qmake

我们在使用 qmake 在 Ubuntu Linux 上构建 C++ 软件时遇到问题。
问题是：我们使用一些库，例如 OpenCV，它可以在一个系统中有不同的版本。
qmake 自动将 -L/usr/lib 或 -L/usr/lib/x86_64-linux-gnu 添加到 g++ 参数中，并在其后添加 LIBS 变量的内容。
因此与不同版本的 OpenCV 存在冲突，使用的是系统版本，但我们需要自定义版本，位于我们的构建树中。是否有任何方法可以更改 -L 中的库顺序或其他方法来解决此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T20:05:10.563

执行此操作有两个组件：

首先，您需要确保将它们正确包含在您的 .pro 文件中。用类似的东西来做这个（这是来自我当前的项目）：

```
LIBS +=      L${OPENCV_HOME}/lib \
            -lopencv_core \
            -lopencv_highgui \ 
```

您可以用任何路径替换环境变量。我发现使用这样的环境变量很方便，因为您还需要标头包括：

```
INCLUDEPATH += $$(OPENCV_HOME)/include/opencv2 \
               $$(OPENCV_HOME)/include/opencv \
               $$(OPENCV_HOME)/include 
```

这使您可以创建项目并正确构建它们。

但是，当您尝试运行它们时，由于您的应用程序找到了错误的库（如您所说的从系统库中），您可能会遇到各种问题 - 您需要正确设置 LD_LIBRARY_PATH 变量。在这种情况下，我有一个启动脚本（您可以在您的用户配置文件或其他地方执行此操作），其中包含：

```
export LD_LIBRARY_PATH=${OPENCV_HOME}/lib 
```

然后在系统库之前首先查看 LD_LIBRARY_PATH 上的那个（以及其他）位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T21:59:02.983

另一个 hack 是利用`LIBS = $(SUBLIBS) ...`Makefile qmake 写入的部分。即，调用生成`Makefile`的 with

```
make SUBLIBS=-L/path/to/your/opencv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T08:39:52.100

我有同样的问题，我通过设置`QMAKE_LIBDIR`到构建树的 lib 目录来解决。QMake 在此值之后自动添加系统库路径，从而允许正确检测所需的库：

```
QMAKE_LIBDIR = /path/to/desired/opencvlib 
```

# subquery - Envers @ManyToMany 子查询

> ID：14748506
> 
> 赞同：0
> 
> 时间：2013-02-07T10:11:48.363
> 
> 标签：subquery, hibernate-envers

我有一个经过审计的实体 A。实体 A 包含字段“名称”和实体 B 的集合（注释为多对多关系）。我创建了 A 的实例、定义的名称、实体 B 的集合，并将其全部保存到 DB 中。这是修订 #1。然后我更改了 A 的名称并在 DB 中更新它。这是修订版 #2。我使用以下方法在修订版 #2 中获取 A 类的所有实体

```
List<A> list = getAuditReader().createQuery().forEntitiesAtRevision(A.class, 2)
    .add(AuditEntity.revisionNumber().eq((int) revisionId)).getResultList(); 
```

我在修订版 #2 获得实体 A，但 Envers 还从修订版 #1 获取与此 A 相关的实体 B 的集合。这是 Envers 使用的查询示例：

```
SELECT a_b_aud.a_id, a_b_aud.b_id
FROM   a_b_aud CROSS JOIN b_aud
WHERE  a_b_aud.b_id=b_aud.id 
       AND b_aud.rev=(SELECT max(b_aud2.rev)) FROM b_aud AS b_aud2 WHERE b_aud2.rev<=2 AND b_aud.id=b_aud2.id)
       AND a_b_aud.rev=(SELECT max(a_b_aud2.rev)) FROM a_b_aud AS a_b_aud2 WHERE a_b_aud2.rev<=2 AND a_b_aud.a_id=a_b_aud2.a_id AND a_b_aud.b_id=a_b_aud2.b_id) 
```

但实际上我需要 NULL 作为实体 B 的集合，以防它在修订版 #2 中没有任何更改（由于性能问题）。

此查询中有两个子选择。如果我们有多个与 A（C、D、E、F）相关的实体集合，并且每个 b_aud 和 a_b_aud 大约有 10 万行，则上面的查询将花费大量时间。我将实体 B 定义为未审计（即未将 @Audited 注释添加到 B 中）并通过以下方式定义 AB 关系：

```
@ManyToMany
@Cascade({org.hibernate.annotations.CascadeType.SAVE_UPDATE})
@JoinTable(name = "a_b", joinColumns = @JoinColumn(name = a_id))
@Audited(targetAuditMode = RelationTargetAuditMode.NOT_AUDITED)
public Set<B> getBs(); 
```

它修复了第一个 SUBSELECT。但是如果请求的修订不存在（在我的情况下＃2），我找不到不查询 B 的标准解决方案。所以查询应该如下所示：

```
SELECT a_b_aud.a_id, a_b_aud.b_id
FROM   a_b_aud CROSS JOIN b_aud
WHERE  a_b_aud.b_id=b_aud.id b_aud.rev=2 AND a_b_aud.rev=2 
```

我找到的唯一解决方案是使用本机 sql 查询并使用 hibernate 模板执行它。然后使用 ResultTransformer 将结果值转换为实体 A。

有人可以帮忙解决这个问题吗？是否需要添加标准配置/注释以避免第二个 SUBSELECT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:25:49.213

Envers 中没有在请求时不加载相关实体的选项。但是，并非*总是*延迟加载 B 实体（无论关系上的注释如何），因此如果您不想执行加载它们的查询，只需不要访问该字段。

如果您想要更好的读取性能，您可能还想查看有效性审计策略，请参阅[http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#d5e4085](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#d5e4085)。它的读取速度更快，但写入速度较慢。

# android - 如何将录制的文件存储到android的内部存储器中？

> ID：14748507
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:11:49.050
> 
> 标签：android

我正在将用户的声音录制到外部存储器中。但如果用户在手机中没有 SD 卡。录制的文件应该保存到内部存储器中。

```
static final String PREFIX = "record";
static final String EXTENSION = ".3gpp";

if (file == null) {
                File rootDir = Environment.getExternalStorageDirectory();
                file = File.createTempFile(PREFIX, EXTENSION, rootDir);
            } 
```

如何将相同的文件保存到内部存储器？

提前谢谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:27:03.003

您必须首先检查外部存储卡的可用性。如果可用，那么您可以将文件保存在其中。其他在手机内存中。

这是您使用内部存储的方式：

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

检查外部存储的可用性：

```
boolean mExternalStorageAvailable = false;
boolean mExternalStorageWriteable = false;
String state = Environment.getExternalStorageState();

if (Environment.MEDIA_MOUNTED.equals(state)) {
    // We can read and write the media
    mExternalStorageAvailable = mExternalStorageWriteable = true;
} else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
    // We can only read the media
    mExternalStorageAvailable = true;
    mExternalStorageWriteable = false;
} else {
    // Something else is wrong. It may be one of many other states, but all we need
    //  to know is we can neither read nor write
    mExternalStorageAvailable = mExternalStorageWriteable = false;
} 
```

有关更多信息，[请](http://developer.android.com/guide/topics/data/data-storage.html)查看

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T10:18:53.177

```
 Try this:

   File rootDir = Environment.getExternalStorageDirectory();

   rootDir.mkdir();

   try {
    output=File.createTempFile(PREFIX, EXTENSION, rootDir);
} catch (IOException e1) {
   e1.printStackTrace();
} 
```

# c# - linq 按连续块分组

> ID：14748510
> 
> 赞同：17
> 
> 时间：2013-02-07T10:11:55.227
> 
> 标签：c#, linq

假设我有以下数据：

> 时间状态
> 10:00 开
> 11:00 关
> 12:00 关
> 13:00 关
> 14:00 关
> 15:00 开
> 16:00 开

我怎么能把使用 Linq 的东西分组到类似的东西中

> [开, [10:00]], [关, [11:00, 12:00, 13:00, 14:00]], [开, [15:00, 16:00]]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T10:16:37.263

创建一个`GroupAdjacent`扩展，例如[此处](https://github.com/morelinq/MoreLINQ/blob/master/MoreLinq/GroupAdjacent.cs)列出的扩展。

然后它很简单：

```
var groups = myData.GroupAdjacent(data => data.OnOffStatus); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T13:55:01.153

您也可以使用一个 Linq 查询来执行此操作，该查询使用一个变量来跟踪更改，如下所示。

```
int key = 0;
var query = data.Select(
    (n,i) => i == 0 ? 
        new { Value = n, Key = key } : 
        new 
        { 
            Value = n, 
            Key = n.OnOffFlag == data[i - 1].OnOffFlag ? key : ++key 
        })
    .GroupBy(a => a.Key, a => a.Value); 
```

基本上，它为每个项目分配一个键，当当前项目不等于前一个项目时，该键会递增。当然，这假设您的数据在列表或数组中，否则您必须尝试不同的方法

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T13:42:49.960

这是一个*核心*LINQ 解决方案，`Enumerable.Zip`用于比较连续元素并生成连续键：

```
var adj = 0;
var t = data.Zip(data.Skip(1).Concat(new TimeStatus[] { null }),
        (x, y) => new { x, key = (x == null || y == null || x.Status == y.Status) ? adj : adj++ }
    ).GroupBy(i => i.key, (k, g) => g.Select(e => e.x)); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-07T10:27:49.167

可以这样做。

1.  迭代集合。
2.  使用`TakeWhile<Predicate>`条件是集合的第一个元素的文本 On 或 Off。
3.  迭代从第一点开始的子集并重复上述步骤并连接字符串。

希望能帮助到你..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T10:38:12.810

您可以解析列表并分配一个连续的键，例如定义一个类：

```
public class TimeStatus
{
    public int ContiguousKey { get; set; }
    public string Time { get; set; }
    public string Status { get; set; }
} 
```

您可以通过循环、维护计数并检测状态何时从 On 变为 Off 等方式为连续键分配值，这将为您提供如下列表：

```
List<TimeStatus> timeStatuses = new List<TimeStatus> 
            {
                new TimeStatus { ContiguousKey = 1, Status = "On", Time = "10:00"},
                new TimeStatus { ContiguousKey = 1, Status = "On", Time = "11:00"},
                new TimeStatus { ContiguousKey = 2, Status = "Off", Time = "12:00"},
                new TimeStatus { ContiguousKey = 2, Status = "Off", Time = "13:00"},
                new TimeStatus { ContiguousKey = 2, Status = "Off", Time = "14:00"},
                new TimeStatus { ContiguousKey = 3, Status = "On", Time = "15:00"},
                new TimeStatus { ContiguousKey = 3, Status = "On", Time = "16:00"}
            }; 
```

然后使用以下查询，您可以提取状态和分组时间：

```
 var query = timeStatuses.GroupBy(t => t.ContiguousKey)
    .Select(g => new { Status = g.First().Status, Times = g }); 
```

# java - Java web start 使用 javascript 启动应用程序

> ID：14748511
> 
> 赞同：1
> 
> 时间：2013-02-07T10:11:56.847
> 
> 标签：java, javascript, jnlp, java-web-start

我正在开发一个需要在客户端计算机上进行完全访问的网站。我发现 Web Start 是从浏览器开始创建 java 桌面应用程序的解决方案（不是小程序）。

问题是每次应用程序启动一个经常完成的任务时都需要下载 jnlp 文件。

我不希望用户创建桌面快捷方式或从 app manager 启动它。我想使用 javascript 从浏览器启动应用程序，例如：

```
navigator.appManager.start("app"); 
```

如果无法完成，也许我可以创建一个浏览器插件，这样我就可以访问该应用程序。因此，当应用程序第一次启动时，它会自行安装在机器上。我突然想到要制作一个小程序来启动应用程序。

尝试了“重复”中的示例。它只是打开一个带有特定地址的新窗口。

```
BasicService bs = (BasicService)ServiceManager.lookup("javax.jnlp.BasicService");
bs.showDocument(new URL("http://adress")); 
```

我想再次启动 jnlp wep 应用程序而不提示用户下载 jnlp，但第一次除外。

# r - 有没有办法从 j 部分中分配 R data.table 列的类

> ID：14748514
> 
> 赞同：4
> 
> 时间：2013-02-07T10:12:04.447
> 
> 标签：r, class, data.table

假设我想在一列`class`中的所有项目上设置。`data.table`我觉得应该有一种方法可以从`DT[,j]`零件内部做这种事情，但它似乎不起作用。我必须使用`$`. 有谁知道为什么？

```
> DT <- data.table(L = letters, N = 1:26)
> sapply(DT, class)
          L           N 
"character"   "integer" 
> DT[, {class(N) <- "MyClass"}]   # Doesn't work
[1] "MyClass"
> sapply(DT, class)
          L           N 
"character"   "integer" 
> DT[, class(N) <- "MyClass"]    # Doesn't work
[1] "MyClass"
> sapply(DT, class)
          L           N 
"character"   "integer" 
> class(DT$N) <- "MyClass"    # Works
> sapply(DT, class)
          L           N 
"character"   "MyClass" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:19:41.657

```
DT[,N:=as.myclass(N)] 
```

应该管用

# php - PHP foreach 关联数据

> ID：14748526
> 
> 赞同：0
> 
> 时间：2013-02-07T10:12:33.710
> 
> 标签：php, joomla

我的 PHP 不是很好我正在尝试为 joomla 构建一个小模块，目前我有这个代码：

```
<?php $a = array(1, 2, 3, 4); ?>
    <div class="bannercontainer">
        <ul>
<?php foreach($a as $v): ?>
    <li data-transition="fade" data-startalign="left,bottom" data-zoom="in" data-zoomfact="5" data-endalign="center,top" data-panduration="12" data-colortransition="4">
        <img alt="" src="images/slides/image1.jpg" data-thumb="images/thumbs/thumb1.jpg">
        <div class="creative_layer">
            <div class="clear"></div>
        </div>
    </li>
<?php endforeach; ?>
        </ul>
    </div>
</div> 
```

基本上，数组中的每个数字都会为滑块生成一个带有图像等的列表项。但是我如何将其他东西与它相关联，以便它生成但也取决于 xml 文件中的设置，例如它也会改变`<li data-transition="fade" data-startalign="left,bottom" data-zoom="in" data-zoomfact="5" data-endalign="center,top" data-panduration="12" data-colortransition="4">`- 这个缩放效果以及图像路径等。

非常感谢任何帮助..谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:15:57.017

只需将更多信息放入您传递给的数组中`foreach`，例如：

```
$banners = array(
    0 => array('color' => 'blue'),
    1 => array('color' => 'red', 'animation' => 'fade'),
    2 => array('color' => 'green', 'animation' => 'slide'),
); 
```

然后你可以在你的 foreach 中使用它：

```
foreach($banners as $banner) {
    echo $banner['color'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:16:53.587

如果设置保存在模块的 .xml 文件中，您可以使用`$params->get('param_name');`它从 xml 中获取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:21:49.840

您需要预定义这些值并将它们存储在您使用的数组中。并且不要直接打印出来。最好存储输出并在最后打印出来：

```
$a = array(
        array(
            'data-transition' => 'fade',
            'data-startalign' = > 'left,bottom',
            ...
            'data-thumb' => 'images/thumbs/thumb1.jpg'
        ),
        array(
            'data-transition' => 'no-fade',
            'data-startalign' = > 'top,bottom',
            ...
            'data-thumb' => 'images/thumbs/thumb2.jpg'
        )
        ...
    );

$output = '<div class="bannercontainer">
             <ul>';
foreach( $a as $v ) {
    $output .= '<li data-transition="'.$v['data-transition'].'" data-startalign="'.$v['data-startalign'].'" data-zoom="in" data-zoomfact="5" data-endalign="center,top" data-panduration="12" data-colortransition="4">
        <img alt="" src="'.$v['data-thumb'].'" data-thumb="'.$v['data-thumb'].'">
        <div class="creative_layer">
            <div class="clear"></div>
        </div>
    </li>';
}

$output .= '</ul>
    </div>';

echo $output; 
```

基本上你现在正在做的是创建一个 4 大小的循环并打印出同样的东西。

# html - div内的项目没有调整大小

> ID：14748528
> 
> 赞同：1
> 
> 时间：2013-02-07T10:12:44.383
> 
> 标签：html, image-resizing, css

我很难让特定 Div 中的所有项目在该 Div 中调整大小，具体取决于 Div 的宽度（当前为宽度：100%）。

我试过使用 display:inline-block 但这似乎不起作用。必须有一些东西可以工作吗？基本上我有一个宽度为 100% 的 Div 包装器，然后是一个特定宽度的 Div 容器。

所有这些中的 Div 的背景都有一个背景图像，我需要根据宽度自动调整它的大小。该网站缩小了大小，因此它对移动设备友好，这就是我遇到背景图像仍然很大的问题的地方。

有问题的页面的链接在这里 -[链接到页面](http://test.snowflakesoftware.com/)

下面的代码，就是上面提到的一堆 Div：

```
#content-home {
    float: left;
    min-width: 100%;
    padding: 40px 0px;
}

.home_container {
    margin: 0 auto;
    width: 320px;
} 
```

希望大家能帮上忙！作为一个警告，它也是一个 WordPress 网站，但这只是一个 CSS 问题。我不太确定是否有 Javascript 或 jQuery 函数能够处理这个想法？

谢谢！

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:13:51.017

似乎问题在于您正在混合 % 和 px 单位来计算宽度。尝试仅对两个宽度都使用 %。

如果这不是问题，请尝试仅使用“宽度”而不是“最小宽度”。似乎“最小宽度”属性可能是问题所在。

# android - 当手机在前台和后台之间切换时Android调用特定方法

> ID：14748535
> 
> 赞同：0
> 
> 时间：2013-02-07T10:13:08.293
> 
> 标签：android, android-intent, android-activity

我正在开发一个 Android 应用程序，当用户将我的应用程序切换到后台时，我必须在其中调用特定的 Web 服务，反之亦然。

当用户将我的应用程序移动到后台时，我必须调用一个特定的方法（Web 服务），而当用户将我的应用程序切换到前台时，应该调用一个方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:22:42.807

阅读并了解[Android Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)，您将获得答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T12:29:00.843

覆盖**Activity的****onPause** () 和**onResume** () 方法并在那里实现您的调用。

 ***   当应用程序进入后台（不可见）时调用 onPause()。
*   当应用程序进入前台时调用 onResume()**

# javascript - Node-Canvas 图像抗锯齿似乎不起作用

> ID：14748536
> 
> 赞同：3
> 
> 时间：2013-02-07T10:13:09.093
> 
> 标签：javascript, node.js, canvas, antialiasing, cairo

我正在尝试使用 node.js 和[node-canvas](https://github.com/LearnBoost/node-canvas)包生成动画文件，逐帧提取。部分动画包括缩放和移动图像。我的问题是似乎没有抗锯齿发生，尽管根据节点画布和[cario](http://cairographics.org/)（画布后面的图形库）应该默认进行抗锯齿。此外，[根据 node-canvas](https://github.com/LearnBoost/node-canvas#anti-aliasing)可以使用这个 systex 控制抗锯齿`ctx.antialias = 'gray';`，但它似乎也没有做任何事情。如果我可以提供更多细节可能会有所帮助，请告诉我。有什么方法可以直接使用 node-canvas 甚至 cairo 来为图像转换添加抗锯齿功能？

PS我正在使用`ctx.drawImage`方法来绘制图像，我也已经尝试过使用`patternQuality = 'best';`但没有成功。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T08:08:01.360

在*升级*模式时，cairo 默认使用双线性插值，这看起来应该是合理的。但是，当*缩小*比例时，cairo 当前（从 1.12.14 开始）没有正确的抗锯齿模式。没有办法做到这一点，除非实际将该功能添加到 cairo 本身，但请参阅下面的潜在解决方法。

cairo 中的“antialias”设置控制光栅化形状和文本的抗锯齿，而不是图案。控制模式抗锯齿的设置称为“cairo_pattern_set_filter”，具有以下值：

```
CAIRO_FILTER_FAST,             // usually the same as NEAREST
CAIRO_FILTER_GOOD,             // usually the same as BILINEAR
CAIRO_FILTER_BEST,             // usually the same as BILINEAR
CAIRO_FILTER_NEAREST,          // for upscaling, this is pixel-replication
CAIRO_FILTER_BILINEAR,         // for upscaling, this is linear interpolation
CAIRO_FILTER_GAUSSIAN          // not implemented, should not be used 
```

但如前所述，它们都不适用于缩小规模。

一些人使用的解决方法是以 2 为单位缩小图像。也就是说，将图像在两个维度上都缩小到一半，直到它大致达到所需的大小。然后可以将此缩小的图像与缩小小于 2 的修改变换一起使用。

# android - Android 应用人像模式

> ID：14748537
> 
> 赞同：0
> 
> 时间：2013-02-07T10:13:10.343
> 
> 标签：android, user-interface, screen-orientation

我正在开发一个安卓应用程序。此应用程序处于纵向模式。我更改了清单文件，如下所示

```
 <application android:icon="@drawable/icon"
    android:label="@string/app_name" 
    android:theme="@style/customTheme" 
    android:allowBackup="true">

    <activity android:name=".Favorites"
       android:label="@string/app_name" 
       android:screenOrientation="portrait" 
       android:configChanges="keyboardHidden|orientation">
       <intent-filter>
          <action android:name="android.intent.action.MAIN" />
          <category android:name="android.intent.category.LAUNCHER" />
       </intent-filter>
    </activity>

    <activity android:name=".DBHelper">
    </activity>

    <activity android:name=".Find" 
       android:screenOrientation="portrait" 
       android:configChanges="keyboardHidden|orientation">
    </activity>
</application> 
```

在大屏幕上运行良好。当我在**超大**屏幕中打开它时，屏幕并不好，即视图中的所有控件都在对角切割。
**看图片：** ![在此处输入图像描述](../Images/b2a0d5e575bfe8ff59db95ea48be6351.png)

当我`android:screenOrientation="portrait"`从清单文件中删除标签时，我的 Xlarge 屏幕正常显示。我无法完全理解这个问题，任何人都可以帮助我解决这个问题。我希望我的应用程序只能处于纵向模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:57:47.777

您可以为不同的屏幕尺寸保留不同的布局，为此您需要为不同的屏幕尺寸创建不同的布局并将其放入名为的不同文件夹中

1.  layout-large : 用于大尺寸屏幕的纵向模式
2.  layout-medium : 用于中等尺寸屏幕的纵向模式
3.  layout-xlarge : 用于 xlarge 屏幕的纵向模式
4.  layout-large-land ：用于大尺寸屏幕的横向模式
5.  layout-medium-land ：用于中等尺寸屏幕的横向模式
6.  layout-xlarge-land : 用于 xlarge 屏幕的横向模式

现在安卓操作系统会自动选择合适的屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:17:03.967

您需要为 xlarge-port 提供布局..以便您的布局可以在 xlarge 屏幕中进行调整。

# java - Selenium Web 驱动程序单击操作

> ID：14748539
> 
> 赞同：0
> 
> 时间：2013-02-07T10:13:16.547
> 
> 标签：java, selenium, webdriver, selenium-webdriver, htmlunit

我在 selenium 中有一个代码，它可以动态地单击菜单页面中的选项卡。有时会发生该选项卡不可点击（它只是一个内部的平原） `td`，`span`当`Web Driver`尝试单击此选项卡时，我的程序被冻结（没有抛出异常或任何东西）。

我无法避免点击这样的标签，但我想以某种方式防止点击后冻结。那么我可以设置一些超时时间或者告诉 selenium 如果元素不可点击该怎么办？

```
driver.findElement(By.xpath(
    format("//span[@class='rf-tab-lbl'][text()='{0}']",
        navigation.getGroup()))).click();
//if the tab is currently selected (hence is not clickable) selenium won't click 
// on it and program freezes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:45:02.407

请尝试来自不同网站的另一个页面。这可能是一个 JS 循环问题。我在某些 URL 的 HtmlUnit 中遇到了这样的问题。我在 HtmlUnit 用户组中提出了问题。他们告诉我 JS 无限循环导致冻结。超时对我也不起作用。

我试图申请自己的时间。那也没有用。

请参阅以下问题以应用自己的超时

[HtmlUnit WebClient 超时](https://stackoverflow.com/questions/14559746/htmlunit-webclient-timeout)

如果它适用于其他网站，则问题可能是特定于网站的。您可以在 eclipse 中附加 Selenium 的源代码并检查/调试它卡住的位置。我对 HtmlUnit 做了同样的事情。我达到了解析方法，但没有出来。

如果仍然无法正常工作，请联系 Selenium 支持。

# ruby-on-rails-3 - 带有rails 3的mongoid中的日期过滤器查询

> ID：14748541
> 
> 赞同：0
> 
> 时间：2013-02-07T10:13:20.427
> 
> 标签：ruby-on-rails-3, mongodb, date, mongoid

我正在使用`mongodb(Mongoid)`和`rails 3.`

我有一个领域`"timestamp": ISODate("2013-02-07T04: 41: 52.773Z").`

现在我想在范围内搜索日期意味着 fromdate 和 todate 变量。

的价值`fromdate: "2013-02-01" and todate: "2013-02-08".`

我正在尝试使用 `where(:timestamp.gt => fromdate, :timestamp.lt => todate)`但没有得到正确的输出。

我如何进行查询以查找日期范围内的数据..???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:51:03.497

您需要将“2013-02-01”转换为 Ruby 中的 Date 对象。见[http://www.ensta-paristech.fr/~diam/ruby/online/ruby-doc-stdlib/libdoc/date/rdoc/classes/DateTime.html#M000215](http://www.ensta-paristech.fr/~diam/ruby/online/ruby-doc-stdlib/libdoc/date/rdoc/classes/DateTime.html#M000215)

# java - 如何从石英表中删除未使用的触发器

> ID：14748551
> 
> 赞同：7
> 
> 时间：2013-02-07T10:13:49.170
> 
> 标签：java, spring, quartz-scheduler

我将 spring 与 Quartz 一起使用，一切正常，但一些以前配置的触发器也被执行，因为它们存储在 Quartz 表中。我们可以手动删除所有未配置的触发器并执行应用程序，但这不是一个好习惯。我想通过 spring+quartz 属性或其他解决方案删除所有触发器。

当我在spring配置文件中配置了3个触发器时

```
<property name="triggers">
    <list>
        <ref bean="FirstTrigger" />
        <ref bean="secondTrigger" />
        <ref bean="ThirdTrigger"/>
    </list>
</property> 
```

服务器启动时，所有触发器都存储在 Quartz 表中，并带有相应的 cron 触发器和作业详细信息。如果我删除了配置中的任何触发器，例如上面我删除了第二个触发器，但它没有从 Quartz 表中删除。那时DBtrigger（删除触发器）也执行了。

在 spring + Quartz 集成中，是否有任何属性可以处理这个问题或者我们需要为这个问题做些什么？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-03T10:54:08.277

如果您将触发器存储在数据库中（假设您的触发器是基于 cron 的），您可以像这样简单地删除记录：

```
DELETE FROM QRTZ_CRON_TRIGGERS WHERE SCHED_NAME='scheduler' and TRIGGER_NAME='myTrigger' and TRIGGER_GROUP='DEFAULT';
DELETE FROM QRTZ_TRIGGERS WHERE SCHED_NAME='scheduler' and TRIGGER_NAME='myTrigger' and TRIGGER_GROUP='DEFAULT'; 
```

您也可以考虑查看其他 Quartz DB 表以查找与您的工作相关的剩余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:21:17.330

[您可以使用Quartz API](http://www.quartz-scheduler.org/documentation/quartz-2.3.0/quick-start)访问 Quartz 调度程序、作业、触发器等。

看看这个[Quartz CookBook](http://www.quartz-scheduler.org/documentation/quartz-2.3.0/cookbook/)，你会发现如何列出所有定义的触发器，等等。也许你应该使用这个 API 删除不必要的触发器。

# r - for循环中的跳过错误

> ID：14748557
> 
> 赞同：101
> 
> 时间：2013-02-07T10:14:05.917
> 
> 标签：r, for-loop

我正在做一个 for 循环，为我的 6000 X 180 矩阵（每列 1 个图）生成 180 个图，一些数据不符合我的标准，我得到了错误：

```
"Error in cut.default(x, breaks = bigbreak, include.lowest = T) 
'breaks' are not unique". 
```

我对这个错误很好，我希望程序继续运行 for 循环，并给我一个列表，列出哪些列导致了这个错误（作为一个可能包含列名的变量？）。

这是我的命令：

```
for (v in 2:180){
    mypath=file.path("C:", "file1", (paste("graph",names(mydata[columnname]), ".pdf", sep="-")))
    pdf(file=mypath)
    mytitle = paste("anything")
    myplotfunction(mydata[,columnnumber]) ## this function is defined previously in the program
    dev.off()
} 
```

注意：我发现了很多关于 tryCatch 的帖子，但没有一个对我有用（或者至少我无法正确应用该功能）。帮助文件也不是很有帮助。

帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-02-07T11:02:42.157

一种（肮脏的）方法是使用`tryCatch`空函数进行错误处理。例如，以下代码引发错误并中断循环：

```
for (i in 1:10) {
    print(i)
    if (i==7) stop("Urgh, the iphone is in the blender !")
}

[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6
[1] 7
Erreur : Urgh, the iphone is in the blender ! 
```

但是你可以将你的指令包装成一个`tryCatch`不做任何事情的错误处理函数，例如：

```
for (i in 1:10) {
  tryCatch({
    print(i)
    if (i==7) stop("Urgh, the iphone is in the blender !")
  }, error=function(e){})
}

[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6
[1] 7
[1] 8
[1] 9
[1] 10 
```

但是我认为您至少应该打印错误消息以了解在让代码继续运行时是否发生了不良情况：

```
for (i in 1:10) {
  tryCatch({
    print(i)
    if (i==7) stop("Urgh, the iphone is in the blender !")
  }, error=function(e){cat("ERROR :",conditionMessage(e), "\n")})
}

[1] 1
[1] 2
[1] 3
[1] 4
[1] 5
[1] 6
[1] 7
ERROR : Urgh, the iphone is in the blender ! 
[1] 8
[1] 9
[1] 10 
```

**编辑：**所以`tryCatch`在你的情况下申请将是这样的：

```
for (v in 2:180){
    tryCatch({
        mypath=file.path("C:", "file1", (paste("graph",names(mydata[columnname]), ".pdf", sep="-")))
        pdf(file=mypath)
        mytitle = paste("anything")
        myplotfunction(mydata[,columnnumber]) ## this function is defined previously in the program
        dev.off()
    }, error=function(e){cat("ERROR :",conditionMessage(e), "\n")})
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-12-24T01:07:44.713

这是一个简单的方法

```
for (i in 1:10) {

  skip_to_next <- FALSE

  # Note that print(b) fails since b doesn't exist

  tryCatch(print(b), error = function(e) { skip_to_next <<- TRUE})

  if(skip_to_next) { next }     
} 
```

请注意，尽管有错误，但循环完成了所有 10 次迭代。您显然可以`print(b)`用您想要的任何代码替换。您还可以在其中包含多行代码`{`，`}`如果您在其中包含多行代码`tryCatch`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T11:13:20.107

`myplotfunction()` 如果错误会发生（即如果中断是唯一的）并且只为那些不会出现的情况绘制它，是否可以先在函数中或之前测试，而不是捕获错误？！

# android - 滑动菜单导入错误

> ID：14748558
> 
> 赞同：1
> 
> 时间：2013-02-07T10:14:08.293
> 
> 标签：android, slidingmenu

我正在尝试将 SlidingMenu 导入到我自己的项目中，所以我从[SlidingMenu Library](https://github.com/jfeinstein10/SlidingMenu "滑动菜单库")下载源代码并将其作为 android 库项目导入，也称为 SlidingMenu 作为项目名称。

在那之后，出现了很多错误，我做了一些尝试修复它：

*   将其 android:minSdkVersion 更改为 10
*   将 ActionBarSherlock & android-support-v13 设置为 SlidingMenu 的库
*   清理并重建整个 SlidingMenu 项目

那里仍然有很多错误......

我该如何解决 ？

![在此处输入图像描述](../Images/bbdd1a8c38618d18a719ae2a2bf15a02.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:11:39.640

您可以使用：带有 SlidingMenu 的 android:minSdkVersion 7

并从 Project Properties -> Android -> 选择 Android 4.2 作为目标。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:34:09.667

您是否在清单中指定了 targetApi？

# c# - Linq：在已连接的表上包含一个连接

> ID：14748559
> 
> 赞同：1
> 
> 时间：2013-02-07T10:14:13.450
> 
> 标签：c#, mysql, linq

我想知道这在 Linq 中是否可行：我有三个表：

```
Request
--id
--Adress
--Description
Nav.Properties:
-- RequestStatus

RequestStatus
--RequestId
--PubDate
--StatusTypeId
Nav.Properties:
-- Request
-- StatusType

StatusType
--Id
--StatusTypeDescription
Nav.Properties
-- RequestStatus 
```

在 Linq 中，我可以设法将前两个表连接在一起：

```
var RequestWithStatus = dbContext.Requests.Include("RequestStatus").ToList<fullRequest>(); 
```

但是......我想要的是 StatusTypeDescription 列也包含在这个查询中（所以在第三个表上使用连接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:27:53.687

如果一个Request实例可以有一个RequestStatus，一个RequestStatus实例可以有一个StatusType，那么你可以简单地做

```
var requestList = dbContext.Requests.Include("RequestStatus.StatusType").ToList(); 
```

Include（在 System.Data.Entity 中）还有一个“lambda”（表达式>）重载（不确定它是否适用于 mysql）

```
var requestList = dbContext.Requests.Include(m => m.RequestStatus.StatusType).ToList(); 
```

您的所有数据都将出现在列表中（急切加载）。

然后你可以访问描述

```
var firstRequest = requestList.First();
var requestDescription = firstRequest.Description;
var statusTypeDescription = firstRequest.RequestStatus.StatusType.Description; 
```

或更安全

```
var statusTypeDescription = firstRequest.RequestStatus != null && firstRequest.RequestStatus.StatusType != null 
          ? firstRequest.RequestStatus.StatusType.Description
          : string.Empty; 
```

# asp.net - ASPNETCOMPILERERROR - 对象引用未设置为对象实例

> ID：14748560
> 
> 赞同：1
> 
> 时间：2013-02-07T10:14:14.840
> 
> 标签：asp.net

我在发布 Web 项目时收到 ASPNETCOMPILERERROR。

这个项目在 .net 4.0 中，我们在 VS2012 中发布。

构建成功，但在发布时出现以下错误

ASPNETCOMPILERERROR - 对象引用未设置为对象实例。

请让我们知道如何解决该问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:13:40.280

我能够解决这个问题。

导致参考问题的 dll 之一，但构建正在成功。

按照以下步骤解决

1.  签入临时文件夹（C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files），其中 VS 为每个页面创建 dll（我在发布时选择了单独的程序集）
2.  在创建 dll 之前，它会生成 .Compiled 文件，然后将每个文件转换为 dll。
3.  我们发现其中一个页面没有转换为 dll，而是创建了一个扩展名为 .delete 的文件并停止了。
4.  现在我们从 VS 运行我们的应用程序并尝试打开无法转换为 dll 的页面。
5.  现在我们把这个问题当作一个例外。

希望这对其他人有帮助。

# r - 根据 r 中的范围类别创建汇总表

> ID：14748562
> 
> 赞同：2
> 
> 时间：2013-02-07T10:14:19.570
> 
> 标签：r, summary

我的数据格式如下：

```
input<-data.frame(
    region=c("A","T","R","R","T"),
    geomorph=c("F","F","S","S","P"),
    depth=c(2.6,3.5,5.8,6.7,8.9))

> input
  region geomorph depth
1      A        F   2.6
2      T        F   3.5
3      R        S   5.8
4      R        S   6.7
5      T        P   8.9 
```

我想创建一个汇总表，以便对于给定的深度类别（即 0-3,3-6,6-10）区域（即 A、R、T）和地貌（即 F、S ,P) 的计数和表示如下：

```
output<-data.frame(
    depth.category=c("0-3","3-6","6-10"),
    total=c(1,2,2),
    A=c(1,0,0),
    R=c(0,1,1),
    T=c(0,1,1),
    F=c(1,1,0),
    S=c(0,1,1),
    P=c(0,0,1))

> output
  depth.category total A R T F S P
1            0-3     1 1 0 0 1 0 0
2            3-6     2 0 1 1 1 1 0
3           6-10     2 0 1 1 0 1 1 
```

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:20:31.533

首先，只需使用 , 创建间隔`cut`，然后使用`table`和`cbind`结果：

```
intervals <- cut(input$depth, breaks=c(0, 3, 6, 10))

cbind(table(intervals),
      table(intervals, input$region),
      table(intervals, input$geomorph))
#          A R T F P S
# (0,3]  1 1 0 0 1 0 0
# (3,6]  2 0 1 1 1 0 1
# (6,10] 2 0 1 1 0 1 1 
```

上面的输出是一个`matrix`. 如果需要，请使用以下内容`data.frame`：

```
temp <- cbind(table(intervals),
      table(intervals, input$region),
      table(intervals, input$geomorph))

temp <- data.frame(depth.category = rownames(temp),
                   as.data.frame(temp, row.names = 1:nrow(temp)))
names(temp)[2] <- "Total"
temp
#   depth.category Total A R T F P S
# 1          (0,3]     1 1 0 0 1 0 0
# 2          (3,6]     2 0 1 1 1 0 1
# 3         (6,10]     2 0 1 1 0 1 1 
```

# ios - 静态库中添加的可达性

> ID：14748563
> 
> 赞同：1
> 
> 时间：2013-02-07T10:14:22.930
> 
> 标签：ios, objective-c, xcode, static-libraries, reachability

我有我的静态库 在这个项目中，我添加了一个 Reachability.h .m 文件。所以，我有一些链接器错误：我还添加了 CFNetwork 和 System.Configuration 框架

```
Undefined symbols for architecture i386:
  "_SCNetworkReachabilityCreateWithAddress", referenced from:
      +[Reachability reachabilityWithAddress:] in libAdvertisingPromotions.a(Reachability.o)
  "_SCNetworkReachabilityCreateWithName", referenced from:
      +[Reachability reachabilityWithHostName:] in libAdvertisingPromotions.a(Reachability.o)
  "_SCNetworkReachabilityGetFlags", referenced from:
      -[Reachability connectionRequired] in libAdvertisingPromotions.a(Reachability.o)
      -[Reachability currentReachabilityStatus] in libAdvertisingPromotions.a(Reachability.o)
  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
      -[Reachability startNotifier] in libAdvertisingPromotions.a(Reachability.o)
  "_SCNetworkReachabilitySetCallback", referenced from:
      -[Reachability startNotifier] in libAdvertisingPromotions.a(Reachability.o)
  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
      -[Reachability stopNotifier] in libAdvertisingPromotions.a(Reachability.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:35:19.100

我已经解决了这个问题...我在使用我的静态库的测试应用程序项目中添加了 systemconfiguration.framework

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:24:51.607

您必须确定您的 Reachability.h .m 已被编译。您需要进入“构建阶段”，然后进入“编译源”并添加 Reachability.m 以编译源。

# php - 从 PHP 中包含括号的字符串中提取文本

> ID：14748568
> 
> 赞同：3
> 
> 时间：2013-02-07T10:14:34.377
> 
> 标签：php, string

我有一个带有州名称和代码的字符串，如下所示

```
KT16(Ottershaw) 
```

现在我需要从中提取文本`()`。我需要提取 Ottershaw。我怎么能用php做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T10:16:49.840

应该 ：

```
preg_match('/\(([^\)]*)\)/', 'KT16(Ottershaw)', $matches);
echo $matches[1]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T10:17:24.813

只需获取第一个左括号和最后一个右括号之间的子字符串：

```
$string = "KT16(Ottershaw)";
$strResult = substr($string, stripos($string, "(") +1,strrpos($string, ")") - stripos($string, "(")-1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T09:23:31.773

这是一个示例代码，用于提取 '[' 和 ']' 之间的所有文本并将其存储为 2 个单独的数组（即一个数组中括号内的文本和另一个数组中括号外的文本）

```
function extract_text($string)
   {
    $text_outside=array();
    $text_inside=array();
    $t="";
    for($i=0;$i<strlen($string);$i++)
    {
        if($string[$i]=='[')
        {
            $text_outside[]=$t;
            $t="";
            $t1="";
            $i++;
            while($string[$i]!=']')
            {
                $t1.=$string[$i];
                $i++;
            }
            $text_inside[] = $t1;

        }
        else {
            if($string[$i]!=']')
            $t.=$string[$i];
            else {
                continue;
            }

        }
    }
    if($t!="")
    $text_outside[]=$t;

    var_dump($text_outside);
    echo "\n\n";
    var_dump($text_inside);
  } 
```

输出：extract_text("你好，你好吗？"); 将产生：

```
array(1) {
  [0]=>
  string(18) "hello how are you?"
}

array(0) {
} 
```

extract_text("你好 [http://www.google.com/test.mp3] 你好吗？"); 会产生

```
array(2) {
  [0]=>
  string(6) "hello "
  [1]=>
  string(13) " how are you?"
}

array(1) {
  [0]=>
  string(30) "http://www.google.com/test.mp3"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:16:30.143

以下正则表达式应该可以工作：

```
/\[(.*?)\]/ 
```

# c# - 所有 C# 泛型实例的静态成员变量是否通用？

> ID：14748569
> 
> 赞同：15
> 
> 时间：2013-02-07T10:14:34.760
> 
> 标签：c#, generics, static-variables

在 C# 中，我有一个泛型类：

```
public class MyGeneric<ParameterClass> where ParameterClass: MyGenericParameterClass, new() {
    public static int Variable;
} 
```

现在在 C++ 中，如果我用不同的参数实例化一个模板类，每个完整的类都会得到它自己的`Variable`，所以[我不能说](https://stackoverflow.com/q/3198249/57428)

```
MyGeneric.Variable = 1; // invalid in C++ 
```

在 C++ 中，但似乎我可以在 C# 中这样做。

我想澄清...

如果我有一个带有静态成员变量的泛型，该变量是否在所有泛型实例之间共享？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-07T10:27:43.617

[ECMA C# 语言规范的第 25.1.4 节](http://www.ecma-international.org/publications/standards/Ecma-334.htm)

> 泛型类声明中的静态变量在**同一封闭构造类型（第 26.5.2 节）的所有实例之间共享，但在不同封闭构造类型的实例之间不共享。** 无论静态变量的类型是否涉及任何类型参数，这些规则都适用。

您可能会看到这篇博文：[Gus Perez](http://social.msdn.microsoft.com/profile/gus%20perez/)的泛型类中的[静态字段](http://blogs.msdn.com/b/gusperez/archive/2005/08/09/449363.aspx)

你也不能在 C# 中这样做。

```
MyGeneric.Variable = 1; 
```

考虑以下来自 ECMA 语言规范的示例。

```
class C<V>
{
    static int count = 0;
    public C()
    {
        count++;
    }
    public static int Count
    {
        get { return count; }
    }
}
class Application
{
    static void Main()
    {
        C<int> x1 = new C<int>();
        Console.WriteLine(C<int>.Count);  // Prints 1 
        C<double> x2 = new C<double>();
        Console.WriteLine(C<double>.Count); // Prints 1 
        Console.WriteLine(C<int>.Count);  // Prints 1 
        C<int> x3 = new C<int>();
        Console.WriteLine(C<int>.Count);  // Prints 2 
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T10:23:01.773

```
MyGeneric<MyClass>.Variable
MyGeneric<MyOther>.Variable 
```

这两个是不同的静态变量，被视为单独的类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T10:22:15.843

不它不是。泛型类型可以是“开放的”或“封闭的”。开放类型类似于`List<T>`未定义类型参数的类型。`List<int>`是封闭型。

本质上，运行时不会将开放类型视为正确的“类型” - 只有封闭版本才是真正的类型。所以，`MyGeneric<int>`和`MyGeneric<string>`是两种完全不同的类型，因而有自己的静态变量实例。

*由于您不能*以您建议的方式调用您的静态成员，这一点变得更加明显：`MyGeneric.Variable`不会在 C# 中编译。

此控制台应用程序代码非常简单地说明了这一点：

```
class Program
{
    static void Main(string[] args)
    {
        Test<int>.i = 2;
        Test<string>.i = 8;

        Console.WriteLine(Test<int>.i);   // would write "8" if the fields were shared
        Console.WriteLine(Test<string>.i);
        // Console.WriteLine(Test.i); // does not compile
        // Console.WriteLine(Test<>.i); // does not compile
    }
}

class Test<T>
{
    public static int i;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T10:19:55.717

不，它不共享。

对于. `MyGeneric<T>`_`T`

请检查静态成员是否没有非泛型`MyGeneric`类。`Variable`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-26T11:02:09.347

如前所述，您的问题的答案是否定的。但是，您可以做的是使用泛型类的父类，并在其中放置静态变量。您需要调用的任何方法都可以抽象到该父类中。

```
abstract class MyBase
{
    protected static MyBase selected;

    public abstract void Deselect();
} 
```

```
class MyGeneric<T> : MyBase
{
    public void Select()
    {
        if (selected != null)
        {
            if (selected != this)
            {
                selected.Deselect();
            }
        }
        selected = this;
        //...
    }

    public override void Deselect()
    {
        //...
    }
} 
```

# python - Python不同的结构数组中的日期时间

> ID：14748580
> 
> 赞同：0
> 
> 时间：2013-02-07T10:15:07.930
> 
> 标签：python, datetime, struct, for-in-loop, namedtuple

```
import struct
from collections import namedtuple

StructDeviceInfo = namedtuple('DeviceInfo', ['DeviceID', 'Capturing','Receiving','Socket','DateTime'])
DeviceInfoList = []

def threaded_function():
    while True:
        if any(x.Capturing == True and x.Datetime in DeviceInfoList different second > 5 for x in DeviceInfoList) : #here,how to do on here?
              print('True') 
```

如果 Capturing Value 中的 DeviceInfoList 数组为 TRUE，同时 Datetime 与 datetime.now 不同，则超过 5 秒。然后打印真实，如何做到这一点？

p/s：Capturing 为 TRUE 且 datetime 大于 5 秒，必须是相同的数组索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:20:33.660

```
delta = datetime.datetime.now() - x.Datetime
if delta.total_seconds() > 5:
    # difference is greater than 5 seconds 
```

应用于您的示例，假设它`x.Datetime`实际上是一个`datetime.datetime`对象：

```
if any((
        x.Capturing == True and 
        (datetime.datetime.now() - x.Datetime).total_seconds() > 5
       ) for x in DeviceInfoList): 
```

# drupal - 如何在drupal 7中按价格添加过滤器

> ID：14748581
> 
> 赞同：1
> 
> 时间：2013-02-07T10:15:08.243
> 
> 标签：drupal, drupal-7

我创建了一个内容类型产品。它具有价格，评级和其他领域。每当我为此产品类型添加内容时，它都会为我提供该产品的提交日期。我为这种内容类型添加了 10 个内容，并创建了一个在列表中显示所有产品的视图。现在我想为“价格、日期和评级”提供一个过滤器。

例如，如果我选择价格，那么它应该从最低价格到最高价格值对产品视图列表进行排序。

任何模块都可以实现这一点？或任何其他可以使产品过滤器发生这种情况的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:27:35.960

如果您编辑视图并为您的字段价格添加排序标准，则应该有一个显示它的选项（复选框）。

如果您勾选“向访问者公开此排序，以允许他们更改它”，排序过滤器将出现在视图顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T07:09:10.143

我在 drupal 中使用了 Better Exposed Filters 模块来满足相同的要求。我觉得它对你很有用。

只需从此链接安装模块：http: [//drupal.org/project/better_exposed_filters](http://drupal.org/project/better_exposed_filters)

1.  启用模块。并转到视图（创建一个新视图并添加您的字段。例如，根据您的要求，价格、评级、日期。否则，如果您已经创建了一个视图，则使用相同的视图并对其进行编辑。）
2.  单击公开表单（提前）并选择“更好的公开过滤器”。
3.  现在在排序标准中选择您想要的过滤器（例如，价格、评级、日期）。
4.  单击使用 AJAX 并选择“是”（必填字段）。
5.  单击保存并使用过滤器欣赏您的视图。

希望这会有用。

# android - 单击保存按钮后，Android 相机意图保持在捕获状态

> ID：14748583
> 
> 赞同：0
> 
> 时间：2013-02-07T10:15:20.607
> 
> 标签：android, android-camera-intent

我尝试使用相机意图捕获视频并在 onActivityResult 中获取视频。除某些情况外，它工作正常。

当我在某些手机中长时间拍摄视频时，当我单击保存按钮时，它会返回到相机本身。当我从那里按下后退按钮时，它会返回我的应用程序，但会返回一个新活动。

```
// Calling camera intent
Intent intent = new Intent(
                     android.provider.MediaStore.ACTION_VIDEO_CAPTURE);
            startActivityForResult(intent, 1);
@Override
protected void onActivityResult(int requestCode, int resultCode,
        Intent videoReturnedIntent) {
    super.onActivityResult(requestCode, resultCode, videoReturnedIntent);

    if (resultCode == RESULT_OK) {

        float size = 0;
        Uri selectedVideo = videoReturnedIntent.getData();

        String[] filePathColumn = { MediaStore.Video.Media.DATA };
        Cursor cursor = getContentResolver().query(selectedVideo,
                filePathColumn, null, null, null);
        if (cursor != null) {
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            filePath = cursor.getString(columnIndex);
            cursor.close();
                    }
                }
              } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:57:33.730

当您的活动被终止时，就会发生这种情况。我建议创建一个服务，因为那样的话，Android 只会杀死它，以防手机内存太低。如果您可以查找要接收的一些广播（取决于您要执行的操作），您可以设置一个广播接收器，然后在广播接收时调用该服务，否则也终止该服务。这样，即使服务也不会一直运行。

# uitableview - 如何使用动画从 UITableView 中删除行？

> ID：14748584
> 
> 赞同：3
> 
> 时间：2013-02-07T10:15:25.217
> 
> 标签：uitableview, delete-row

我在从表视图中删除行时遇到问题。当按下行中的删除按钮时，我正在使用下面的代码：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:control.tag-100 inSection:0];
[resultList removeObjectAtIndex:indexPath.row];
[resultView beginUpdates];
[resultView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
[resultView endUpdates];
//[resultView reloadData]; 
```

第一行已成功删除，但随后索引不正确。因此，当我删除最后一行时，它会给出索引越界异常。

细胞生成代码为：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"personalizeTableCell";

    PersonalizeCell *cell = (PersonalizeCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[PersonalizeCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];        
    cell.title.text = @"text";
    cell.rateView.tag = indexPath.row + 100;
    return cell;
} 
```

我哪里错了？

更新：

```
 for (NSInteger j = 0; j < [venuesTableView numberOfSections]; ++j)
    {
        for (NSInteger i = 0; i < [venuesTableView numberOfRowsInSection:j]; ++i)
        {
           PersonalizeCell* cell = (PersonalizeCell*)[venuesTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:j]];
           cell.rateView.tag = 100 + i;
        }
    } 
```

解决了我的问题。感谢内纳德 M。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T10:27:44.537

假设您`[NSIndexPath indexPathForRow:control.tag-100 inSection:0];`返回正确的索引路径....您是否尝试在开始`removeObjectAtIndex`/结束更新“括号”内移动调用？：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:control.tag-100 inSection:0];
[resultView beginUpdates];
[resultList removeObjectAtIndex:indexPath.row];
[resultView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
[resultView endUpdates]; 
```

### 更新：

显然`cell.rateView.tag`，在您删除第一个单元格后，您就错了。因此，在每次删除（即每次`removeObjectAtIndex...`）之后，您必须重新遍历剩余的 tableview-cells 并重新分配正确的标签值（`cell.rateView.tag = indexPath.row + 100`）！否则，您`[NSIndexPath indexPathForRow:control.tag-100 inSection:0];`将返回错误的 indexPath，从而导致您的越界错误！

### 重新分配标签值：

您不必重新加载整个表格，只需遍历剩余的单元格，然后重新分配标签值`[resultView endUpdates];`：

```
NSMutableArray *cells = [[NSMutableArray alloc] init];
for (NSInteger j = 0; j < [tableView numberOfSections]; ++j)
{
    for (NSInteger i = 0; i < [tableView numberOfRowsInSection:j]; ++i)
    {
        [cells addObject:[tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:j]]];
    }
} 
```

现在做：

```
for (PersonalizeCell* cell in cells)
{
    cell.rateView.tag = // new calculated tag
} 
```

（或者直接在第一个代码片段的内循环中进行重新分配。）

* * *

这是整个过程的一些非常典型的代码，示例中的表中有两行：

请注意，facebookRowsExpanded 是您必须拥有的类变量：

```
if ( [theCommand isEqualToString:@"fbexpander"] )
{
NSLog(@"expander button......");
[tableView deselectRowAtIndexPath:indexPath animated:NO];

NSArray *deleteIndexPaths;
NSArray *insertIndexPaths;

facebookRowsExpanded = !facebookRowsExpanded;
// you must do that BEFORE, not AFTER the animation:

if ( !facebookRowsExpanded ) // ie, it was just true, is now false
    {
    deleteIndexPaths = [NSArray arrayWithObjects:
            [NSIndexPath indexPathForRow:2 inSection:0],
            [NSIndexPath indexPathForRow:3 inSection:0],
             nil];
    [tableView beginUpdates];
    [tableView
        deleteRowsAtIndexPaths:deleteIndexPaths
        withRowAnimation: UITableViewRowAnimationMiddle];
    [tableView endUpdates];
    }
else
    {
    insertIndexPaths = [NSArray arrayWithObjects:
            [NSIndexPath indexPathForRow:2 inSection:0],
            [NSIndexPath indexPathForRow:3 inSection:0],
             nil];
    [tableView beginUpdates];
    [tableView
        insertRowsAtIndexPaths:insertIndexPaths
        withRowAnimation: UITableViewRowAnimationMiddle];
    [tableView endUpdates];
    }

// DO NOT do this at the end: [_superTableView reloadData];
return;
} 
```

注意：您的**numberOfRowsInSection**代码必须使用 facebookRowsExpanded

（类似于“如果 facebookRowsExpanded 返回 7，否则返回 5”）

注意：您的**cellForRowAtIndexPath**代码必须使用 facebookRowsExpanded。

（它必须返回正确的行，具体取决于您是否展开。）

# javascript - jQuery 自定义 UL 类型下拉列表：blur() 在 iOS 上不起作用

> ID：14748590
> 
> 赞同：0
> 
> 时间：2013-02-07T10:15:34.140
> 
> 标签：javascript, jquery, drop-down-menu

我做了一个基于 jQuery 的选择框。

除了 iPhone 上的模糊功能（我在我的 Macbook 上的 iOS 模拟器上测试过）之外，一切都运行良好。它在 Android 上运行良好。这是我写的。

```
$('.listSelect a').on('click',function(e){
    var text = $(this).text();
    $('.listSelected').removeAttr('tabindex').removeClass('focus').blur().find('strong').text(text);
    //$('.listSelect').slideUp('fast');
    e.preventDefault();
});
$('.listSelected').on('click',function(e){
    var attr = $(this).attr('tabindex');
    if(typeof attr == 'undefined' || attr == false){
        $(this).attr('tabindex','0');
    } else {
        console.log('Yes!');
        $(this).removeAttr('tabindex');
    }
    $(this).toggleClass('focus').focus();
    $('.listSelect').slideToggle('fast');
}).on('blur',function(){
    $('.listSelect').slideUp('fast');
    $(this).removeAttr('tabindex').removeClass('focus');
}); 
```

这是我的代码：http: [//jsfiddle.net/nori2tae/jXTTh/](http://jsfiddle.net/nori2tae/jXTTh/)

只需点击下拉列表之外的任何位置（聚焦）。列表不想回到 iPhone 上。

任何 mod 建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:18:18.003

[Focus](http://api.jquery.com/focus/) / [Blur](http://api.jquery.com/blur/)仅适用于表单元素，例如 input、select 或 textarea。

你需要的是[stopPropagation](http://api.jquery.com/event.stopPropagation/)。

...或类似的东西：

```
$(document).on('touchend', function(e) {
    if ( !$('body').has(e.target).length ) {
        $('.listSelect').slideUp('fast');
    }
}); 
```

[演示](http://jsfiddle.net/5J5gX/)

# java - 在 Java 中用字节数组替换 BufferedInputStream

> ID：14748591
> 
> 赞同：1
> 
> 时间：2013-02-07T10:15:35.940
> 
> 标签：java, arrays, bufferedinputstream

以下代码使用 BufferedInputStream 从文件中读取数据并以块的形式对其进行处理。我想修改这段代码，而不是通过流来自文件的数据，我想让它来自字节数组。我已经将文件的数据读入一个字节数组，我想使用这个 while...loop 来处理数组数据，而不是使用文件流中的数据。不知道该怎么做：

```
FileInputStream in = new FileInputStream(inputFile);
BufferedInputStream origin = new BufferedInputStream(in, BUFFER);

int count;

while ((count = origin.read(data, 0, BUFFER)) != -1)
{
  // Do something
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:17:47.657

您可以使用[ByteArrayInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayInputStream.html)将现有字节数组包装成一个`InputStream`，以便您可以像从任何其他字节数组中读取一样`InputStream`：

```
byte[] buffer = {1,2,3,4,5};
InputStream is = new ByteArrayInputStream(buffer);

byte[] chunk = new byte[2];
while(is.available() > 0) {
    int count = is.read(chunk);
    if (count == chunk.length) {
        System.out.println(Arrays.toString(chunk));
    } else {
        byte[] rest = new byte[count];
        System.arraycopy(chunk, 0, rest, 0, count);
        System.out.println(Arrays.toString(rest));
    } 
} 
```

```
Output:
[1, 2]
[3, 4]
[5] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:19:40.913

下面将把 FileInputStream 中的所有数据读入字节数组：

```
FileInputStream input = new FileInputStream (file);
ByteArrayOutputStream output = new ByteArrayOutputStream ();
byte [] buffer = new byte [65536];
int l;
while ((l = input.read (buffer)) > 0)
    output.write (buffer, 0, l);
input.close ();
output.close ();
byte [] data = output.toByteArray (); 
```

# jaxb - xmlns:xsi 和 xsi:noNamespaceSchemaLocation 的 Jaxb 顺序

> ID：14748593
> 
> 赞同：1
> 
> 时间：2013-02-07T10:15:51.660
> 
> 标签：jaxb, xml-namespaces

我正在使用 JAXB 创建一个 xml。使用 marshaller.setProperty( Marshaller.JAXB_NO_NAMESPACE_SCHEMA_LOCATION, "bla-bla.xsd");

正在生成的 xml 是

```
<Interface xsi:noNamespaceSchemaLocation="bla-bla.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

但是由于某种原因正在解析这个 xml 的应用程序没有解析它，因为他们需要这种格式

```
<Interface xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="bla-bla.xsd"> 
```

更改目标应用程序不是一种选择:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T17:17:07.223

以下利用 JAXB 和 StAX 的方法似乎可以为您提供所需的输出，但由于属性的顺序并不重要，因此不能保证始终有效。

```
import javax.xml.bind.*;
import javax.xml.stream.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Interface.class);

        XMLOutputFactory xof = XMLOutputFactory.newFactory();
        XMLStreamWriter xsw = xof.createXMLStreamWriter(System.out);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_NO_NAMESPACE_SCHEMA_LOCATION, "bla-bla.xsd");
        marshaller.marshal(new Interface(), xsw);
    }

} 
```

**输出**

```
<?xml version="1.0"?><Interface xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="bla-bla.xsd"></Interface> 
```

# iframe - YouTube 视频的内 嵌窗口

> ID：14748595
> 
> 赞同：0
> 
> 时间：2013-02-07T10:15:59.827
> 
> 标签：iframe, hyperlink, youtube

我有一个链接包围的图像：

```
<a href="http://www.youtube.com/watch?v=9bZkp7q19f0"><img src="image.png"></a> 
```

我想在新窗口中打开这个链接，就像我在这个网站上找到的一样：[http ://www.licensario.com/](http://www.licensario.com/)

您可以通过它的播放按钮识别它。按下它，将出现一个内联窗口。

我认为他们使用`jquery-youtube-tubeplayer`，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:34:43.287

根据上述网站的来源，他们使用[LightBoxMe作为内联窗口，这是一个与](http://buckwilson.me/lightboxme/)[TubePlayer](https://github.com/nirvanatikku/jQuery-TubePlayer-Plugin)结合的 jQuery 插件（和[这里](http://www.tikku.com/jquery-youtube-tubeplayer-plugin)）。每个网站上都写着如何使用这些脚本。

# c# - 如何从源代码传递查询字符串？

> ID：14748599
> 
> 赞同：0
> 
> 时间：2013-02-07T10:16:13.663
> 
> 标签：c#, asp.net

我正在尝试从 html 源代码中传递查询字符串，该链接位于 ListView 的 ItemTemplate 中

```
<a href='<%# "Photos.aspx?AlbumID="+Eval("AlbumID") "&address=" + Request.QueryString["Id"].ToString() %>'> 
```

我试过这段代码，但它没有用。有多个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:19:06.297

我认为应该只是`Request["Id"]`。

但是，它返回一个类型的对象，`object`并且当与`+`带有字符串的运算符一起使用时，不需要在`ToString()`其上调用该方法。它在连接期间自动调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:21:54.830

您在 Eval() 之后缺少一个 + ，并且在 a 标签上缺少一个 runat="server" 。另外，对于数据绑定的东西，我更喜欢 asp:HyperLink 而不是普通的 a 标记：

```
<asp:Listview runat="server" ID="TestLV">
    <ItemTemplate>
        <asp:HyperLink runat="server" ID="TestHL" NavigateUrl='<%# "Photos.aspx?AlbumID=" + Eval("AlbumID") + "&address=" + Request.QueryString["Id"] %>' ></asp:HyperLink>
    </ItemTemplate>
</asp:Listview> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:32:21.617

我认为您在连接值时有错误...您可以尝试如下...

也许它会帮助你...

```
 <a href='Photos.aspx?AlbumID=<%# Eval("AlbumID") + "&address=" + Request.QueryString["Id"].ToString() %>'> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T17:23:43.643

我认为有两个错误。一是在Eval后面忘记了一个+操作数，二是eval返回一个对象，放这种类型的内联代码不会自动调用ToString()方法，所以必须显式设置：Eval("专辑 ID").ToString()。

希望这可以帮助。

```
<a href='<%# "Photos.aspx?AlbumID="+ Eval("AlbumID").ToString() + "&address=" + Request.QueryString["Id"].ToString() %>'> 
```

# json - 在 pl/pgsql 中获取 json 值

> ID：14748607
> 
> 赞同：3
> 
> 时间：2013-02-07T10:16:36.503
> 
> 标签：json, postgresql

我有类似的json字符串`'{"ww":11}'`

如何在 pl/pgsql 中获得值 11？

我尝试：

```
json_var := '{"ww":11}'::json

json_var->ww;
json_var->"ww";
json_var.ww; 
```

这一切都失败了。

请帮忙！德米特里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:34:12.257

`json`类型只是文本。使用它的好处是语法检查。只是。

检查[这个问题](https://stackoverflow.com/q/10560394/131874)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-07T20:50:05.923

您需要将其类型转换为 Json 才能做到这一点。

***选择 '{"ww":11}'::json->'ww' 作为 ww_value***

返回....

11

# javascript - 集合/数组中的事件

> ID：14748616
> 
> 赞同：3
> 
> 时间：2013-02-07T10:16:57.127
> 
> 标签：javascript, events

在我的 jQuery Web 应用程序中，我使用的事件非常多。
我对服务器执行 ajax 客户端请求（名称为“comm”）的组件有一个队列。
此队列类似于 Backbone.js 集合。

因此，每次我将一个新的请求对象放入“comm”的集合时，comm 对象都会收到一个“add”事件，并且“comm”的“worker”方法会查看当前是否有正在进行的请求。如果没有人，worker 方法会处理请求，最后，当一切正常时，会在请求对象上触发“完成”事件。

在此通信组件中，一次只能有一个请求。如果我将一个请求对象添加到“comm”并且“add”事件被触发并且工作方法看到已经有一个请求，那么什么都不会发生。

我的问题是：在这种情况下，对于“事件基础设施”，处理这个未处理的请求对象的最佳方法是什么？

到目前为止，我有两种不同的方法：

1）我可以做以下事情：如果我正在进行的请求完成了，worker方法可以检查集合中是否有未处理的请求对象并处理它。这很简单，不涉及任何事件。

2) 或者不同的东西：如果工作方法由于“添加”事件而启动并且看到已经有一个正在进行的请求，我可以实现类似：“我无法充分响应这个添加事件，我把你放回去.请在200毫秒后再次触发自己，也许我有时间。”

也许有人已经遇到过类似的问题并且对此有很好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:56:51.757

我认为解决这个问题的一个好方法是实现在队列上触发的“下一个”事件。每次触发“完成”事件时，它应该触发队列​​中的下一个事件，然后查看是否有任何未处理的请求，如果有，则根据您的逻辑选择一个（我假设 FIFO）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:34:02.633

如果我理解你是正确的，你想链接请求或其他异步事件吗？那么[promises](http://blogs.msdn.com/b/ie/archive/2011/09/11/asynchronous-programming-in-javascript-with-promises.aspx)模式是一个优雅的解决方案。

JQuery 已经用[Deferred 对象](http://api.jquery.com/category/deferred-object/)实现了它。

使用 JQuery 1.8+，请求链接可以很简单：

```
$.ajax(...).then(
    function() {
        return $.ajax(...);
    }
).then(
    function() {
        return $.ajax(...);
    }
); 
```

但是你也可以围绕它构建一个更加动态和复杂的架构。例如，您可以实现您的队列，使其始终存储最后一个未解决的承诺，以便您可以在它已经处于活动状态时将新的处理程序附加到它。

**通用示例：**

```
var Queue = function() {
    // start with resolved promise
    var promise = $.Deferred().resolve();

    this.add = function(handler) {
        // chain and replace latest with next promise
        promise = promise.then(function() {
            var deferred = $.Deferred();
            handler(deferred);
            return deferred;
        }).promise();
    }
};

var q = new Queue();
q.add(function(deferred) {
    setTimeout(function() { alert('handler 1'); deferred.resolve(); }, 1000);
});
q.add(function(deferred) {
    setTimeout(function() { alert('handler 2'); deferred.resolve(); }, 1000);
}); 
```

**[JSFiddle 演示](http://jsfiddle.net/NsCPe/)**

在这里，处理程序获取一个延迟对象作为参数，如果它们“完成”，则负责解决（或拒绝）它。另一种更灵活的可能性是处理程序必须自己创建延迟对象并返回其承诺，这样您也可以使用其他承诺，例如 $.ajax 返回的承诺

# html - HTML5 + phonegap 应用程序中的身份验证

> ID：14748628
> 
> 赞同：2
> 
> 时间：2013-02-07T10:17:29.380
> 
> 标签：html, cordova

我正在后端的 HTML5 + Jquery 和 REST 服务上构建应用程序。此应用程序适用于桌面用户和移动用户。所以我们正在使用 phonegap 构建移动版本。此应用程序是一个安全的应用程序，需要登录屏幕。但现在我正在修复如何实现这一点。1\. 如果我将应用程序移动到 ASP.Net MVC，那么我无法使用 phonegap 创建构建。2\. 对于 phonegap，我发现[http://www.raymondcamden.com/index.cfm/2011/11/10/Example-of-serverbased-login-with-PhoneGap](http://www.raymondcamden.com/index.cfm/2011/11/10/Example-of-serverbased-login-with-PhoneGap)但我认为这不适合桌面用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:23:44.830

您可以使用您选择的身份验证技术保护服务器端，然后将您的 AJAX 调用传递给其余服务并传递凭据。

例如，如果您想使用 ASP.NET MVC 编写服务，您可以使用简单的 HTTP 基本身份验证来保护它，然后在您的请求中传递用户/密码字符串。

要实现登录屏幕，您可以编写一个虚拟控制器方法，您的登录屏幕可以调用该方法来检查身份验证是否有效。

如果您想要一个示例 ASP.NET MVC 后端和一个使用 jQuery 的 PhoneGap 前端，那么我在[GitHub 上](https://github.com/red-gate/nomad-crm-sample)有一些示例代码和一个描述构建应用程序的[博客](http://vsnomad.com/tag/dtw-crm-sample/)

# jquery - 对象随着子菜单代码的消失而消失 - jQuery 错误？

> ID：14748633
> 
> 赞同：0
> 
> 时间：2013-02-07T10:17:49.803
> 
> 标签：jquery, visibility, mouseover, submenu

我正在建立一个站点，并且有一个带有下拉菜单的菜单。由于设计的性质，我目前检测鼠标何时悬停在菜单项上；并显示相关的子菜单。

```
 <div class="menu-responsibility menu-item">
                                            <a class="menu-click" href="<?php echo ($baseURL);?>responsibility" title="Responsibility" ></a>

                                                            <div class="sub-responsibility">
                                                                <ul class="sub-list">
                                                                    <li><a href="<?php echo $baseURL; ?>responsibility/social" title="Social Responsibility">Social</a></li>
                                                                    <li><a href="<?php echo $baseURL; ?>responsibility/environmental" title="Environmental Responsibility">Environmental</a></li>
                                                                    <li><a href="<?php echo $baseURL; ?>responsibility/philanthropy" title="Philanthropy">Philanthropy</a></li>
                                                                </ul>      
                                                            </div>
                            </div> 
```

这是我写的JS：

```
 /* NOTE: Visibility was added due to display objects being clickable with 0 opacity. */
$(".menu-click").hover(function () {
$(this).css('visibility', 'visible');
$(this).parent().css('visibility', 'visible');
$(this).parent().fadeTo("fast", 1);
}, function () {
if ($(this).parent().is(':hover')) {
//alert ("hovering");
} else {
    $(this).parent().fadeTo("fast", 0);
}
});

$(".menu-click").parent().mouseleave(function () {
$(this).fadeTo("fast", 0, function() {
    // this function will called after the opacity animation has completed
    $(this).delay(500).css('visibility', 'hidden');
});
});
    /*End Sub-Menu Function */ 
```

这在褪色时效果很好；但是当不透明度为0并且元素仍然可见时，可以单击它们（只是看不到），这是不可接受的。

错误： *有时*，完全随机地，菜单（和相邻的子菜单）的某些悬停状态会消失。它们不再存在，无法突出显示。如果您在其中一个菜单项上快速移动鼠标，这将随机发生。当“结果”菜单项执行此操作时，Firebug 会显示以下内容。无法再突出显示。

```
<div class="menu-home menu-item">
<div class="menu-services menu-item" style="visibility: hidden; opacity: 0;">
<div class="menu-results menu-item" style="opacity: 0; visibility: hidden;">
<div class="menu-clients menu-item" style="visibility: hidden; opacity: 0;">
<div class="menu-about menu-item" style="opacity: 0; visibility: hidden;">
<div class="menu-responsibility menu-item" style="opacity: 0; visibility: hidden;">
<div class="menu-contact menu-item"> 
```

很奇怪的bug，希望大家帮忙！我的开发站点可用并且可能会有所帮助：[http ://www.kipdo.com](http://www.kipdo.com)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:04:41.717

您的问题可能与您如何使用 .parent() 函数有关。

我建议您宁愿使用 JQuery 的 .hide() 和 .show() 函数，而不是更改内联 CSS。另一个建议是使用父标签来维护悬停/隐藏/显示，这样您就不必处理菜单中任何链接的父级，在 .

# tsql - TSQL计算具有重叠日期范围的记录的每日总和

> ID：14748634
> 
> 赞同：0
> 
> 时间：2013-02-07T10:17:50.780
> 
> 标签：tsql, group-by, datediff

我有 3 个表，1 个（PortfolioInstrument）持有在一个投资组合中持有的工具（Instrument），持有（Holding）跨越一个日期范围（DateAdded，DateRemoved）。另一个 (Price) 持有每种工具 (Instrument) 的每日 (TradeDate) 收盘价 ([Close])。第三个可能有用，（CalcDate）保存我们重新计算持有量并从投资组合中添加和删除工具的日期（CalcDate）。

```
SELECT SUM([Close]*Holding), TradeDate 
FROM Price p1 INNER JOIN PortfolioInstrument pio ON pio.Instrument = p1.Instrument 
AND pio.Portfolio = 3 
WHERE EXISTS (SELECT TradeDate FROM Price p 
INNER JOIN PortfolioInstrument pi ON pi.Instrument = p.Instrument AND Portfolio = 3
WHERE TradeDate >= pi.DateAdded AND 
(TradeDate < pi.DateRemoved OR pi.DateRemoved IS NULL) 
AND p1.ID = p.ID GROUP BY TradeDate) GROUP BY TradeDate 
```

这是 PortfolioInstrument 数据集的示例

```
ID  Portfolio Instrument Holding    DateAdded               DateRemoved

16256   3   410     714.28571       2007-10-01 00:00:00.0   2007-11-01 00:00:00.0
16257   3   611     564.97174       2007-10-01 00:00:00.0   2007-11-01 00:00:00.0
16258   3   538     1,797.75281     2007-10-01 00:00:00.0   2007-11-01 00:00:00.0
...
16302   3   5352    1,067,319.75    2008-02-01 00:00:00.0   2008-04-01 00:00:00.0
16303   3   5353    1,057,800.875   2008-02-01 00:00:00.0   2008-04-01 00:00:00.0
16304   3   11952   0               2008-02-29 00:00:00.0   2008-04-01 00:00:00.0
16305   3   11952   261,484,400     2008-04-01 00:00:00.0   2008-05-01 00:00:00.0
...
16315   3   8374    14,199.99902    2009-01-30 00:00:00.0   <null>
16316   3   11952   246,102,960     2009-01-30 00:00:00.0   2009-02-27 00:00:00.0
16317   3   11952   246,148,912     2009-02-27 00:00:00.0   2009-04-01 00:00:00.0 
```

这样做的问题是它包括所有具有 DateRemoved < TradeDate 的 Holdings，因此每个重新计算日期都会有一个跳转，它们应该从集合中删除。查看了 Stackoverflow 上的各种 DateDiff 方法，但无法弄清楚在这种情况下如何使用它们进行分组。另请注意，现金工具（Instrument = 11952）在某个时候进入投资组合，然后每个月都获得一个条目，正如您所看到的那样，它在几个月内减少到 0，我认为在生成的 SQL 中这无关紧要.

谢谢。

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:18:32.520

目前还不是很清楚为什么要使用相同连接的另一个实例。如果您想排除特定的藏品 where `DateRemoved <= TradeDate`，您可以直接在 WHERE 子句中检查：

```
SELECT SUM(p1.[Close]*pio.Holding), TradeDate 
FROM Price p1
INNER JOIN PortfolioInstrument pio
ON pio.Instrument = p1.Instrument AND pio.Portfolio = 3 
WHERE p1.TradeDate >= pio.DateAdded
  AND (p1.TradeDate < pio.DateRemoved OR pio.DateRemoved IS NULL) 
GROUP BY p1.TradeDate
; 
```

但是，如果要丢弃至少一行满足条件的一整*组*相同行，则可以使用 HAVING 子句，如下所示：`TradeDate``DateRemoved <= TradeDate`

```
SELECT SUM(p1.[Close]*pio.Holding), TradeDate 
FROM Price p1
INNER JOIN PortfolioInstrument pio
ON pio.Instrument = p1.Instrument AND pio.Portfolio = 3 
GROUP BY p1.TradeDate
HAVING COUNT(CASE WHEN p1.TradeDate <= pio.DateRemoved) THEN 1 END) = 0
; 
```

与适用于单个行的 WHERE 子句不同，HAVING 是针对一组行进行评估的。在这种情况下，COUNT() 函数用于计算组中的行数`p1.TradeDate <= pio.DateRemoved`。如果至少有一个，则该组将从输出中丢弃，因为我在这里假设的要求是没有这样的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:12:32.787

找不到解决方法，最终拉入原始行并在代码中进行计算。

# wpf - 每个视图一个视图模型？

> ID：14748635
> 
> 赞同：1
> 
> 时间：2013-02-07T10:17:52.477
> 
> 标签：wpf, xaml, mvvm, wpf-controls, wpfdatagrid

我正在开发一个显示 3 个数据网格的 UI 应用程序，每个数据网格都相互依赖（selectedItem 绑定）

这是我到目前为止所做的：

datagrid1 有一个 Model 和一个 ViewModel，

datagrid2 有一个 Model 和一个 ViewModel，

datagrid3 有一个模型和一个视图模型。

`DataContext`并且所有三个 ViewModel 都使用每个`<Datagrid.DataContext>`属性映射到 View 。为每个模型设置 ViewModel 的原因是，数据网格必须从数据库中各自的表中选择项目。

但是现在当我尝试`SelectedItem`在每个数据网格中设置时我遇到了困难。我正在为一个数据网格粘贴示例代码。像这样，我也为其他两个数据网格创建了视图模型。

XAML

```
<DataGrid DataContext="{Binding Path=HostData,NotifyOnTargetUpdated=True,Mode=OneWay}" 
AutoGenerateColumns="False" Name="hostDatagrid" Margin="171,32,235,230">
<Datagrid.DataContext>
<host:HostViewModel>
</Datagrid.DataContext>
<DataGrid.Columns>
<DataGridTextColumn Header="Host" Width="auto" Binding="{Binding HostID}" />
 <DataGridTextColumn Header="Status" Width="auto" Binding="{Binding HostStatus}"/> 
 </DataGrid.Columns>
</DataGrid>
 <DataGrid DataContext="{Binding Path=LogData,NotifyOnTargetUpdated=True,Mode=OneWay}"
 AutoGenerateColumns="False" Name="LogDatagrid" Margin="103,108,102,145">
<Datagrid.DataContext>
<host:LogViewModel>
</Datagrid.DataContext>
 <DataGrid.Columns>
<DataGridTextColumn Header="Host ID" Width="auto"  Binding="{Binding HostID}" />
<DataGridTextColumn Header="Logs" Width="auto"  Binding="{Binding LogID}" />
<DataGridTextColumn Header="Log Path" Width="auto"  Binding="{Binding LogPath}"/>
<DataGridTextColumn Header="Date" Width="auto"  Binding="{Binding Date}"/>
<DataGridTextColumn Header="Last Activity" Width="auto"  Binding="{Binding LastActivity}"/> 
```

c#- 模型

```
 public LogFileModel()
 {

 }
 private int _hostID;
 public int HostID
 {
     get { return _hostID; }
     set { _hostID= value; OnpropertyChanged("HostID"); }
 }

 private string _logid;
 public string LogID
 {
     get { return _logid; }
     set { _logid= value; OnpropertyChanged("LogID"); }
 }

 private string _logpath;
 public string LogPath
 {
     get { return _logPath; }
     set { _logPath = value; OnpropertyChanged("LogPath"); }
 }

 private DateTime _date;
 public DateTime Date;
 {
     get { return _date; }
     set { _date= value; OnpropertyChanged("Date"); }
 }

 private bool _activity;
 public bool LastActivity
 {
     get { return _activity; }
     set { _activity= value; OnpropertyChanged("LastActivity"); }
 } 
```

视图模型

```
 LogModel _myModel = new LogModel(); 
  private ObservableCollection<LogFileModel> _logFileData = new 
  ObservableCollection<LogFileModel>();  
  public  ObservableCollection<LogFileModel> LogFileData
 {
    get { return _logFileData; }
     set { _logFileData = value; OnPropertyChanged("LogFileData"); }
 }    public LogFileViewModel()
{
     initializeload();
     timer.Tick += new EventHandler(timer_Tick);
     timer.Interval = new TimeSpan(0, 0, 3);
     timer.Start();
 }

 ~LogFileViewModel()
 {
     Dispose(false);
 }

 protected virtual void Dispose(bool disposing)
 {
     if (!disposed)
     {
         if (disposing)
         {
             timer.Stop();
             timer.Tick -= new EventHandler(timer_Tick);
         }
         disposed = true;
     }
 }

 private void timer_Tick(object sender, EventArgs e)
 {
     try
     {
         LogFileData.Clear();
         initializeload();
     }
     catch (Exception ex)
     {
         timer.Stop();
         Console.WriteLine(ex.Message);

     }
 }

 private void initializeload()
 {
     try
     {
         DataTable table = _myModel.getData();

        for (int i = 0; i < table.Rows.Count; ++i)
             LogFileData.Add(new LogFileModel
             {
                HostID= Convert.ToInt32(table.Rows[i][0]),
                LogID = table.Rows[i][1].ToString(),
                LogPath = table.Rows[i][2].ToString(),
                Date = Convert.ToDateTime(table.Rows[i][3]),
                LastAcivity= table.Rows[i][4].ToString(),                   
             });
     }

     catch (Exception e)
     {
         Console.WriteLine(e.Message);
     }
 }
 public event PropertyChangedEventHandler PropertyChanged;

 private void OnPropertyChanged(string propertyname)
{
     var handler = PropertyChanged;
     if (handler != null)
         handler(this, new PropertyChangedEventArgs(propertyname));
 }

 public class LogModel
 {
     public DataTable getData()
     {
         DataTable ndt = new DataTable();
         SqlConnection sqlcon = new  SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
         sqlcon.Open();
      //for this select statement only I have created separate ViewModel for the respective Model
         SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM [LocalDB].[dbo].[LogFiles]", sqlcon);
         da.Fill(ndt);
         da.Dispose();
         sqlcon.Close();
         return ndt;
     }
 } 
} 
```

有没有其他方法可以克服这个问题并为一个视图使用一个视图模型，以及它们各自的数据网格 - 选择语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:14:52.150

您始终可以自由地将视图拆分为不同的子视图（如用户控件）。您也可以对 ViewModel 做同样的事情。

您可以创建一个 ViewModel 来表示知道三个子视图模型的整个视图...

```
public class MainViewModel : ViewModel
{
    private LogViewModel _SubLogViewModel = new LogViewModel();
    public LogViewModel SubLogViewModel
    {
        get
        {
            return _SubLogViewModel;
        }
        set
        {
            if (_SubLogViewModel != value)
            {
                _SubLogViewModel = value;
                OnpropertyChanged("SubLogViewModel");
            }
        }
    }

    private HostViewModel _SubHostViewModel = new HostViewModel();
    public HostViewModel SubHostViewModel
    {
        get
        {
            return _SubHostViewModel;
        }
        set
        {
            if (_SubHostViewModel != value)
            {
                _SubHostViewModel = value;
                OnpropertyChanged("SubHostViewModel");
            }
        }
    }

    private Host _SelectedHost;
    public Host SelectedHost
    {
        get
        {
            return _SelectedHost;
        }
        set
        {
            if (_SelectedHost!= value)
            {
                _SelectedHost= value;
                OnpropertyChanged("SelectedHost");
                if(this.SelectedHost != null && this.SubLogViewModel != null)
                {
                    this.SubLogViewModel.LoadLogFor(this.SelectedHost);
                }
            }
        }
    }
} 
```

和 XAML 类似：

```
<Grid>
    <Grid.DataContext>
        <host:MainViewModel />
    </Grid.DataContext>

    <DataGrid Name="hostDataGrid" DataContext="{Binding SubHostModel}" SelectedItem="{Binding SelectedHost, Mode=TwoWay}">
        ...
    </DataGrid>

    <DataGrid Name="LogDatagrid" DataContext="{Binding SubLogModel}">

    </DataGrid>
</Grid> 
```

# php - 将方法移出 Codeigniter 控制器

> ID：14748637
> 
> 赞同：0
> 
> 时间：2013-02-07T10:17:59.123
> 
> 标签：php, codeigniter

我在我的一个 Codeigniter 控制器中得到了这个。但我希望其他控制器可以访问它，但我认为 $this 关键字会有不同的含义，而它需要引用它加载到的控制器。

```
function checkSecurity($user, $page)
{
    if($this->mod_backend->canUserAccessPage($user, $page))
    {
        $this->load->view('header');
        $this->load->view($page, $data);
        $this->load->view('footer');       
    }
    else
    {
        $this->load->view('header');
        $this->load->view('unauthorised', $data);
        $this->load->view('footer');               
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:26:25.987

如果您需要应用程序中的所有控制器都可以访问一个方法，您可以在`MY_Controller.php`文件中实现一个类，然后您的所有控制器都必须扩展这个类而不是`CI_Controller`.

例如在 MY_Controller.php

```
<?php

class My_Controller extends CI_Controller{
    public function checkSecurity($user, $page)
    {
        if($this->mod_backend->canUserAccessPage($user, $page))
        {
            $this->load->view('header');
            $this->load->view($page, $data);
            $this->load->view('footer');       
        }
        else
        {
            $this->load->view('header');
            $this->load->view('unauthorised', $data);
            $this->load->view('footer');               
        }
    }

} 
```

然后在你的控制器中你必须扩展这个类：

```
<?php

class Other_Controller extends My_Controller{
   //Do the stuff

   //You can call your function in every controller
   $this->checkSecurity('my_user', 'my_page');

} 
```

# java - 为什么我们不应该从另一个公共调用公共方法？

> ID：14748641
> 
> 赞同：12
> 
> 时间：2013-02-07T10:18:09.490
> 
> 标签：java

有人告诉我，我们不应该从同一个类中的另一个公共方法调用一个类的公共方法。现在我无法理解这一点，因为我没有看到任何问题。一旦一个方法被宣布为公共的，那么它的契约就会在生命周期内被固定，因此从另一个公共方法调用它应该没有任何问题。

所以我不确定这种说法是否属实，或者可以从另一个公共 api 调用公共 api [这是从设计角度来看的]？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T10:21:49.063

当您尝试时，您的编译器是否会阻止您？不？那么在这方面它是合法的。

提供此“建议”的人是否提供任何解释标准的规范文件（在行业内或在您的组织内）？不？然后是意见。

咨询贵公司的标准，否则，我称之为废话。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-03T13:03:43.760

如果您从其他公共方法调用公共方法，它会使单元测试更加复杂。如果一种方法依赖于同一类的另一种方法，则不能模拟它来单独测试它。因此，您可能必须为同一方法编写两次测试代码。

另请参阅[对调用另一个方法的方法进行单元测试](https://stackoverflow.com/questions/363596/unit-testing-a-method-that-calls-another-method)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-07T10:23:11.157

当您经常从同一类的其他公共方法调用公共方法时，这可能意味着您有不必要的实用程序方法。也许您应该尝试更加 DRY 以简化维护并使您的 API 易于掌握。

但这只是一个警告，从另一个方法调用公共方法是完全有效的，您会发现许多`java.lang`标准代码的例子就是这样做的。

一个例子`java.lang.String`：

```
1462    public boolean startsWith(String prefix) {
1463        return startsWith(prefix, 0);
1464    } 
```

将某些方法设为私有只是为了强制执行关于不调用其他公共方法的公共方法的规则是没有意义的。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-09T10:03:54.870

在我看来，由于继承，您应该避免在另一个方法中调用公共方法。考虑类：

```
public class Parent {

    //return sum
    public double getSum(double... value){
        //implementation
    }

    //return average
    public double getAverage(int count){
        //call getSum
        double sum = getSum(20, 40, 60);
        return sum / count;

    }
}

public class Child extends Parent {

    @Override
    public int getSum(double... obj){
        // change implementation
        // always return 100;
    }
} 
```

如果你调用 Child 对象的 getAverage 方法，你会得到一些意想不到的值，Child 对象的整个接口都被破坏了。您也必须覆盖 getAverage 方法...

字符串类示例

```
1462    public boolean startsWith(String prefix) {
1463        return startsWith(prefix, 0);
1464    } 
```

从这个角度来看是错误的，因为字符串是最终的，所以你不能继承它并覆盖它的公共方法..

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-12-03T16:30:19.860

我只是在这里总结答案并添加一些上下文：

*   在同一个类中重用来自公共方法的公共方法是合法的编译方式。
*   它被认为是 API 设计的一种不好的做法，因为它使您的类设计容易继承错误，因为它可能会覆盖一个方法而不覆盖另一个方法，从而破坏了您的类的逻辑（这一点来自一个著名的 Java“最佳实践”书“有效的Java”，在那里得到了很好的解释，并且在这个问题的另一个答案中也得到了很好的解释）
*   在另一个答案中也提到了，您不能模拟公共方法，因此可能需要关注单元测试

我的 2 美分：

*   使类“最终”不再是一个坏习惯，因为您不会为继承设计 API。
*   我不认为单元测试有问题，如果您的方法之一是私有的，您可以像编写测试一样编写测试。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-07T10:22:16.173

我不确定他的意思。您显然可以从另一个公共方法调用公共方法。这不是一个坏主意——即使是 Java 的源代码也有一个公共方法调用另一个公共方法的方法。

你为什么不问问建议你的人解释原因？我认为他比我们更能说明问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-07T10:46:11.970

当然，您可以从另一个公共方法调用任何公共方法，无论它是在同一个类中还是在另一个类中。但是标准对于不同的组织来说确实很重要。给他/她一些有效的例子。

# java - Java 数组中的某些字段为空，处理这些

> ID：14748642
> 
> 赞同：0
> 
> 时间：2013-02-07T10:18:21.803
> 
> 标签：java, arrays, nullpointerexception

我有以下代码片段。

说明：我有一个名为 result 的数组。该数组由不同的字符串属性组成，例如“city”、“countryName”和“IATA”。

通过 for 循环，我尝试访问和检索所有上述字段。

我现在的问题是：虽然“city”和“countryName”总是有一个值，但“IATA”有时没有一个值，因此返回“null”，一旦我访问一个空的“IATA”就会导致 nullPointerException .

我试过这个：

```
if(entry.getIATA().equals(null)) {

                    } else {
                        startIATA[count] = entry.getIATA();
                    } 
```

但是，当我尝试访问一个为空的字段时，这个 if 条件不起作用。有谁知道我该如何解决这个问题？

这是相关的代码片段：

```
private String[] startIATA = new String[200];  //That is more than long enough

...

for (int count = 0; count < result.getAirports().length(); count++) {
                    AirportsEntry entry = result.getAirports().get(count);

                    // Block for StartAirport

                    HorizontalPanel hp = new HorizontalPanel();
                    hp.setSpacing(5);
                    hp.add(new Label(entry.getCity()));
                    hp.add(new Label(entry.getCountryName()));
                    hp.add(new Label(entry.getIATA()));
                    GWT.log("IATA: " + entry.getIATA());

                    if(entry.getIATA().equals(null)) {

                    } else {
                        startIATA[count] = entry.getIATA();
                    }

                    startAirportVP.add(hp);

                } 
```

非常感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:20:09.313

在访问对象的属性之前执行简单的空检查。

```
if(entry != null && entry.getIATA() != null){
    startIATA[count] = entry.getIATA();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:21:51.300

您不能使用`equals`方法来检查空值。使用`==`：

```
if (entry.getIATA () == null) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:24:35.233

使用这个： if (entry.getIATA() != null)

# ruby - 如何使用 Watir (Ruby) 从不可见元素中读取文本？

> ID：14748645
> 
> 赞同：6
> 
> 时间：2013-02-07T10:18:51.283
> 
> 标签：ruby, watir, watir-webdriver

页面上有一个不可见但具有我想要捕获的值的 div。在其上调用文本会返回一个空字符串。

如何在不处理原始 html 的情况下获得显示的值？无论浏览器中文本的可见性如何，我都可以强制 .text 返回我的实际值吗？

```
irb(main):1341:0> d.first.visible?
=> false

irb(main):1344:0> d.first.html
=> "<div class=\"day\">7</div>"

irb(main):1345:0> d.first.text
=> "" 
```

PS：有很多很多div（页面正在缓存响应并相应地显示它们）。我考虑更改页面中的所有 display:none 或单击以使它们可见，但如果可能的话，我希望避免这种情况。如果不可能，更改所有显示的解决方案 none 将是首选的解决方法。

PPS：该死的，我试图超载可见的？Watir::Element 类中的方法总是返回 true，但这并没有成功。

```
irb(main):1502:0> d.first.visible?
=> true

irb(main):1504:0> d.first.text
=> "" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T17:48:18.380

对于较新版本的 Watir，现在有一种`Element#text_content`方法可以为您执行以下 JavaScript。

```
e = d.first
e.text_content
#=> "7" 
```

**对于旧版本的 Watir（原始答案）：**

您可以使用 JavaScript 来获取此信息。

```
e = d.first
browser.execute_script('return arguments[0].textContent', e)
#=> "7" 
```

请注意，这仅适用于类似 Mozilla 的浏览器。对于类似 IE 的浏览器，您需要使用`innerText`. 虽然如果您使用的是 watir-classic，它只是`d.first.innerText`（即`execute_script`不需要）。

***使用属性值：***

事实证明，您可以使用该`attribute_value`方法使其更简单。似乎它可以获得与 javascript 相同的属性值。

```
d.first.attribute_value('textContent')
#=> "7" 
```

***使用 inner_html***

如果元素只包含文本节点（即没有元素），您还可以使用`inner_html`：

```
d.first.inner_html
#=> "7" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T15:58:57.860

尝试使用该`execute_script`方法将“可见”的值更改为可见。比如`document.getElementById('id').style.visibility = 'visible'`假设它有一个ID。如果没有，您可以随时要求开发人员在元素上放置一个 test-id（或者自己做）。

# android - android 操作系统版本的图像质量差异

> ID：14748651
> 
> 赞同：-2
> 
> 时间：2013-02-07T10:19:04.933
> 
> 标签：android

在 android 4.0.3 中，我的应用程序的图像质量很好，但在 android 2.0 中，图像质量不如为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:00:27.803

我认为您测试的设备上的显示质量和颜色数量不同。在两台设备上试用[此应用程序](https://play.google.com/store/apps/details?id=lt.screentest)，或将相同的总部图片上传到两台设备以确保。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:06:31.317

主要是因为diff设备的分辨率和显示质量。例如。相反，当在更便宜的设备上玩游戏质量低时，在配置设备上它显示出真棒。

# javascript - Highcharts highstock 使用 ipad touch 拖动

> ID：14748654
> 
> 赞同：1
> 
> 时间：2013-02-07T10:19:19.323
> 
> 标签：javascript, jquery, svg, highcharts, highstock

我正在开发一个 highcharts (highstock) 实现，我不想在底部显示导航器或滚动条，所以在桌面上，您只需使用鼠标单击并拖动图表即可沿系列导航.

有人知道在 ipad 上执行类似操作的最佳方法是什么吗？目前 ipad 只是在图表上触摸并显示带有十字准线的工具提示。

任何帮助都会很棒，谢谢。

[http://jsbin.com/irixeh/10/edit](http://jsbin.com/irixeh/10/edit)

# asp.net - 如何为 Web 应用程序创建 exe？

> ID：14748661
> 
> 赞同：1
> 
> 时间：2013-02-07T10:19:27.720
> 
> 标签：asp.net, web-applications, exe

我使用 Visual Studio 2012 (ASP.Net 4.5 - C#) 和 Web 服务开发了一个 Web 应用程序。两者都在一个单一的解决方案中。我需要将我的解决方案转换为 EXE 文件（为我的 Web 应用程序创建 EXE）。我真正需要的是，如果运行我的设置文件，它应该在 IIS 中托管我的 Web 应用程序和 Web 服务。请提供解决我问题的步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-30T05:16:21.527

安静的迟到的答案：我不能在这里发布整个项目，但我会在这里发布**流程图**，您可以尝试一下。

此处流程图中的所有步骤都应以编程方式控制。

***1\. 启动应用程序的步骤。***

[![在此处输入图像描述](../Images/1fc288096be67c7c82ea3fb1e35f3efd.png)](https://i.stack.imgur.com/sm3jT.png)

注意：如果您使用的是本地数据库（.mdf），请忽略第三层（是否添加了网站）

用于本地数据库的连接字符串：

```
public string ConnectionString =
            "Data Source=(local);Initial Catalog=YOUR_DATABASE_NAME;Integrated Security=True"; 
```

但请记住，您需要安装 dotnet 框架才能运行您的应用程序。不用担心，因为您可以在应用程序设置项目中设置先决条件。

以下流程图过程的所有代码。

**是否安装了 IIS**：

> 注意：我发布了 IIS 7 及更高版本的代码。

```
public bool IsIISInstalled()
        {
            return Registry.GetValue(@"HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InetStp",
                "VersionString", null) != null;
        } 
```

**安装 IIS**

```
public int InstallIIS()
        {
            string DISM_CMD_CODE = "START /WAIT DISM /Online /Enable-Feature /FeatureName:IIS-ApplicationDevelopment /FeatureName:IIS-ASP /FeatureName:IIS-ASPNET /FeatureName:IIS-BasicAuthentication /FeatureName:IIS-CGI /FeatureName:IIS-ClientCertificateMappingAuthentication /FeatureName:IIS-CommonHttpFeatures /FeatureName:IIS-CustomLogging /FeatureName:IIS-DefaultDocument /FeatureName:IIS-DigestAuthentication /FeatureName:IIS-DirectoryBrowsing /FeatureName:IIS-FTPExtensibility /FeatureName:IIS-FTPServer /FeatureName:IIS-FTPSvc /FeatureName:IIS-HealthAndDiagnostics /FeatureName:IIS-HostableWebCore /FeatureName:IIS-HttpCompressionDynamic /FeatureName:IIS-HttpCompressionStatic /FeatureName:IIS-HttpErrors /FeatureName:IIS-HttpLogging /FeatureName:IIS-HttpRedirect /FeatureName:IIS-HttpTracing /FeatureName:IIS-IIS6ManagementCompatibility /FeatureName:IIS-IISCertificateMappingAuthentication /FeatureName:IIS-IPSecurity /FeatureName:IIS-ISAPIExtensions /FeatureName:IIS-ISAPIFilter /FeatureName:IIS-LegacyScripts /FeatureName:IIS-LegacySnapIn /FeatureName:IIS-LoggingLibraries /FeatureName:IIS-ManagementConsole /FeatureName:IIS-ManagementScriptingTools /FeatureName:IIS-ManagementService /FeatureName:IIS-Metabase /FeatureName:IIS-NetFxExtensibility /FeatureName:IIS-ODBCLogging /FeatureName:IIS-Performance /FeatureName:IIS-RequestFiltering /FeatureName:IIS-RequestMonitor /FeatureName:IIS-Security /FeatureName:IIS-ServerSideIncludes /FeatureName:IIS-StaticContent /FeatureName:IIS-URLAuthorization /FeatureName:IIS-WebDAV /FeatureName:IIS-WebServer /FeatureName:IIS-WebServerManagementTools /FeatureName:IIS-WebServerRole /FeatureName:IIS-WindowsAuthentication /FeatureName:IIS-WMICompatibility /FeatureName:WAS-ConfigurationAPI /FeatureName:WAS-NetFxEnvironment /FeatureName:WAS-ProcessModel /FeatureName:WAS-WindowsActivationService";
            string command = DISM_CMD_CODE;
            ProcessStartInfo pStartInfo = new ProcessStartInfo("cmd.exe", "/c " + command);
            Process p = new Process();
            p.StartInfo = pStartInfo;
            //p.WaitForExit();
            p.Start();
            return 1;
        } 
```

**是否添加了网站**

```
public bool IsWebsiteAddedInIIS(string WebsiteName)
        {
            ServerManager serverManager = new ServerManager();
            var site = serverManager.Sites.FirstOrDefault(s => s.Name == WebsiteName);
            if (site == null)
            {
                //No site added
                return false;
            }
            else
            {
                //site added
                return true;
            }
        }

public int CreateNewWebsite(string SiteName, string PublishedFilesPath)
        {
            ServerManager serverManager = new ServerManager();
            var site = serverManager.Sites.FirstOrDefault(s => s.Name == SiteName);
            if (site == null)
            {
                serverManager.Sites.Add(SiteName, "http", "*:8080:", PublishedFilesPath);
                serverManager.CommitChanges();
                return 1;
            }
            else
            {
                return 2;
            }
        }

public void StartWebsite(string SiteName)
        {
            ServerManager serverManager = new ServerManager();
            var site = serverManager.Sites.FirstOrDefault(s => s.Name == SiteName);
            if (site != null)
            {
                site.Stop();
                site.Start();
            }
        }

        public void StopWebsite(string SiteName)
        {
            ServerManager serverManager = new ServerManager();
            var site = serverManager.Sites.FirstOrDefault(s => s.Name == SiteName);
            if (site != null)
            {
                site.Stop();
            }
        } 
```

**获取网站网址**

```
public string GetWebsiteURL(string SiteName)
        {
            //string SiteUrl = "";
            //ServerManager serverManager = new ServerManager();
            //var site = serverManager.Sites.FirstOrDefault(s => s.Name == SiteName);
            //var siteBindings = site.GetCollection("bindings");
            //string protocol = (string)siteBindings["protocol"];
            //string bindingInfo = (string)siteBindings["bindingInformation"];
            //if (protocol.StartsWith("http", StringComparison.OrdinalIgnoreCase))
            //{
            //    string[] parts = bindingInfo.Split(':');
            //    if (parts.Length == 3)
            //    {
            //        //Get the port in use HERE !!!
            //        string port = parts[1];
            //        SiteUrl = "localhost:" + port;
            //    }
            //}
            //return SiteUrl;

            int port = 0;
            string SiteUrl = "";
            ServerManager serverManager = new ServerManager();
            var site = serverManager.Sites.FirstOrDefault(s => s.Name == SiteName);
            foreach (Binding binding in site.Bindings)
            {
                port = binding.EndPoint.Port;
                SiteUrl = "localhost:" + port + "/index.aspx";
                break;
            }
            return SiteUrl;
        } 
```

**初始化浏览网站**

> 您必须将 Cefsharp 铬浏览器安装到您的 Windows 窗体中

**安装包 CefSharp.WinForms -版本 75.1.143**

```
public void InitBrowser(string Address)
        {
            Cef.Initialize(new CefSettings());
            browser = new ChromiumWebBrowser(Address);
            Controls.Add(browser);
            browser.Dock = DockStyle.Fill;
        } 
```

谢谢..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T17:16:38.230

也许您需要创建一个 Web 设置项目。“Web 设置项目为部署网站提供了最高级别的灵活性。尽管 Web 设置项目对开发人员来说更加复杂，但它们允许您生成 MSI 包、预编译网站并执行应用程序可能执行的几乎任何设置任务要求。

许多网站不需要自定义配置。在这些情况下，您可以简单地构建您的 MSI 文件并准备好进行部署。但是，更复杂的场景包括依赖项（例如特定的操作系统版本或服务包）、自定义注册表项或管理员配置。Web 设置项目允许您部署满足这些要求的网站。”

查看第 8 章“调试和部署”中的“MCTS Self-Paced Training Kit (Exam 70-515) - Web Applications Development with Microsoft .NET Framework 4”一书。

希望这可以帮助。

# drupal - Drupal menu_attributes 父类

> ID：14748664
> 
> 赞同：0
> 
> 时间：2013-02-07T10:19:39.693
> 
> 标签：drupal, menu, hyperlink

所以我使用 menu_attributes ( [http://drupal.org/project/menu_attributes](http://drupal.org/project/menu_attributes) ) 将特定的类添加到我的菜单项中。对我来说一个问题是这些被添加到链接本身

```
<li class="leaf active menu-mlid-873><a class="customClass active" href="/">Home</a></li> 
```

但我想以某种方式使它像这样，以便该类也用于链接的父级

```
<li class="customClass leaf active menu-mlid-873><a class="customClass active" href="/">Home</a></li> 
```

我尝试使用`theme_menu_alter`但似乎无法弄清楚如何从那里获得课程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:20:57.230

覆盖 theme_menu_link 函数。[http://api.drupal.org/api/drupal/includes!menu.inc/function/theme_menu_link/7](http://api.drupal.org/api/drupal/includes!menu.inc/function/theme_menu_link/7)

# php - 将 Span 标签添加到 CI 表单标签标签

> ID：14748669
> 
> 赞同：1
> 
> 时间：2013-02-07T10:19:46.720
> 
> 标签：php, codeigniter

随着我的模板的设置方式，我试图在我的 Codeigniter 登录表单的表单标签内放置一个 span 标签。

我知道我做错了，但不确定我的修复并希望有人能提示我。当我渲染它时，它给了我一个数组到字符串转换错误。

```
$attributes = array('class' => 'span12', 'id' => 'username');
echo form_input('<span class="icon16 icomoon-icon-user-3 right gray marginR10"></span>username', '', $attributes); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:34:28.153

保持简单，例如：

```
echo "<label for='short'>**<span class='icon16 icomoon-icon-user-3'></span>**Short Description</label><br/>";
$attributes = array('name'=>'shortdesc','class' => 'span12','id'=>'username');
echo form_input($attributes); 
```

# gsoap - gsoap：强制 WS-Discovery 1.0 而不是 1.1

> ID：14748673
> 
> 赞同：0
> 
> 时间：2013-02-07T10:19:54.110
> 
> 标签：gsoap, ws-discovery

我正在使用 gsoap 及其插件 wsddapi 来实现 WS-Discovery。

我需要实现 WS-Discovery v1.0，但插件只输出 v1.1 消息。在插件的源代码中，他们说它对 v1.1 和 v1.0 都有效，但我无法理解如何强制 gsoap 使用 v1.0 消息。

你有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T00:08:47.067

为了生成 WS-Discovery 1.0 的 wsddapi 插件引用的 soapClient.cpp 代码，您可以使用如下命令：

```
 soapcpp2 -xa /usr/share/gsoap/WS/wsdd10.h -I /usr/share/gsoap/import 
```

另一方面，可以使用以下代码生成 WS-Discovery 1.1 的代码：

```
 soapcpp2 -xa /usr/share/gsoap/WS/wsdd.h -I /usr/share/gsoap/import 
```

也许您的路径因包装、操作系统而异......

# c# - 如何在网格视图的行命令中找到控件？

> ID：14748675
> 
> 赞同：5
> 
> 时间：2013-02-07T10:19:58.583
> 
> 标签：c#, asp.net, .net, vb.net, visual-studio

如何在网格视图**的行命令中找到控件？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-07T10:40:54.783

实际上 GridViewCommandEventArgs 中没有 Row，因此您需要从命令源命名容器中获取行

```
GridViewRow row = (GridViewRow)(((Control)e.CommandSource).NamingContainer); 
```

那么你就可以使用

```
TextBox myTextBox = row.FindControl("MyTextBoxId") as TextBox; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-07T11:56:17.833

如果您使用 LinkBut​​ton

```
 LinkButton ctrl = e.CommandSource as LinkButton;
   if (ctrl != null)
    {
        GridViewRow row = ctrl.Parent.NamingContainer as GridViewRow;
        TextBox txtDescription = (TextBox)row.FindControl("txtDescription");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-11T12:14:21.570

```
GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);

Label lblProdId = (Label)row.FindControl(“lblproductId”); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T11:04:32.123

如果你想在行命令中找到一个控件使用

```
controlname controlId=(controlname)e.FindControl("controlId"); 
```

例如，如果你想找到一个ID为**lbl的****标签**，那么使用..

 **```
Label lbl = (Label)e.Row.FindControl("lbl"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-04T14:45:08.583

您可以在控件中使用“CommandArgument”和“CommandName”。这里有2个论点：

```
<asp:LinkButton ID="UpdateButton" runat="server" CommandName="Update" CommandArgument='<%# Container.DataItemIndex + ";" + Eval("idinterlocuteur") %>'> 
```

然后在你后面的代码中你可以获得参数：

```
string[] arg = e.CommandArgument.ToString().Split(';');
int index = Convert.ToInt16(arg[0]);
string idinterlocuteur = arg[1]; 
```

现在你争论找到你的控制：

```
CheckBox Check1 = GridView1.Rows[index].FindControl("MyCheckboxinrow") as CheckBox; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-25T12:23:26.410

```
<asp:TemplateField HeaderText="Next Date To Attend" ItemStyle-CssClass="col-md-2" >
            <EditItemTemplate>
                 <asp:TextBox ID="NextAttendTextBox" CssClass="col-sm-12" runat="server"></asp:TextBox>
                <span class="text-muted">DD-MM-YYYY</span>
            </EditItemTemplate>
            <ItemTemplate>
               <%#Eval("NextAttend") %>
            </ItemTemplate>
            <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Update Status" ItemStyle-CssClass="col-md-1" >
            <EditItemTemplate>
                 <div class="btn-group">

                <asp:LinkButton ID="LinkButton31" class="btn btn-sm btn-success" CommandArgument='<%#Container.DataItemIndex %>' CommandName="UpdateStat" runat="server" >
                    <i class="ace-icon fa fa-save"></i></asp:LinkButton>
               <asp:LinkButton ID="LinkButton32" class="btn btn-sm btn-error" CommandName="Cancel" runat="server" >
                    <i class="ace-icon fa fa-close"></i></asp:LinkButton>
                    </div>
            </EditItemTemplate>
            <ItemTemplate>
                <div class="btn-group">
                <asp:LinkButton ID="LinkButton3" class="btn btn-sm btn-warning" CommandName="Edit" runat="server" >
                    <i class="ace-icon fa fa-upload"></i></asp:LinkButton>

                    </div>
            </ItemTemplate>
            <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" />
        </asp:TemplateField>

 if (e.CommandName == "UpdateStat")
        {
            HiddenField IDHiddenField=(HiddenField)GridView1.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("IDHiddenField");
            TextBox CurrentStatDesTextBox=(TextBox)GridView1.Rows[Convert.ToInt32(e.CommandArgument)].FindControl("CurrentStatDesTextBox");} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-30T06:49:17.560

GridViewRow gvr = (GridViewRow)((Control)e.CommandSource).NamingContainer; int rowIndex = gvr.RowIndex;

```
 string Cat_name = (GridView1.Rows[rowIndex].FindControl("TxtName") as TextBox).Text; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-30T06:52:27.753

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)    
{

GridViewRow gvr = (GridViewRow)((Control)e.CommandSource).NamingContainer;
int rowIndex = gvr.RowIndex;

string Cat_name = (GridView1.Rows[rowIndex].FindControl("TxtName") as TextBox).Text;

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-26T13:35:14.267

如果您在 gridview 项目模板中使用用户控件，则`((Control)e.CommandSource).NamingContainer`可能不会返回您的 gridviewrow。

在这种情况下，我使用以下代码获取当前行：

```
var c = ((Control) e.CommandSource).NamingContainer;
while (c.GetType() != typeof(GridViewRow))
{
    c = c.Parent;
}
var currentRow = (GridViewRow) c; 
```

它不漂亮，但它有效。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-29T15:03:55.197

```
 GridViewRow row = (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);                    
                    HiddenField hdMeasurementId = ((HiddenField)row.FindControl("hdMeasurementId")); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-13T18:14:58.670

GridViewCommandEventArgs 不支持行，所以使用命名容器来查找控件。

```
 protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
       Control ctrl = e.CommandSource as Control;  
       if (ctrl != null)
       {
           GridViewRow gvRow = ctrl.Parent.NamingContainer as GridViewRow; 
           Label slno = (Label)gvRow.FindControl("slno");  // Find Your Control here
           TextBox txtno = (TextBox)gvRow.FindControl("txtno");  // Find Your Control here
           // Your work start here
       }
    } 
```**

# ios - 从“CCTMXLayer*”分配给“CCTMXTiledMap*”的不兼容指针类型

> ID：14748677
> 
> 赞同：0
> 
> 时间：2013-02-07T10:20:05.000
> 
> 标签：ios, objective-c, methods, warnings

我在构建和运行代码时收到两个警告。该应用程序仍然可以运行并且不会崩溃，但我不明白为什么我会收到这两个警告。第一个警告列在标题中，第二个警告指出“找不到方法'-checkForAndResolveCollisions'。

```
-(id) init
{

if( (self=[super init]) ) {

    CCLayerColor *blueSky = [[CCLayerColor alloc] initWithColor:ccc4(100, 100, 250, 255)];
    [self addChild:blueSky];

    map = [[CCTMXTiledMap alloc] initWithTMXFile:@"level1.tmx"];
    [self addChild:map];

    player = [[Player alloc] initWithFile:@"koalio_stand.png"];
    player.position = ccp(100, 50);
    [map addChild:player z:15];

    [self schedule:@selector(update:)];

    walls = [map layerNamed:@"walls"]; *

}
return self;

}

-(void)update:(ccTime)dt
{
[player update:dt];

[self checkForAndResolveCollisions:player]; **
} 
```

标题警告显示在带 * 的行上 The method not found 警告显示在带 ** 的行上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:32:52.963

看起来您只需将“ `checkForAndResolveCollisions:`”的方法声明添加到该类 .h / @interface 文件中。

# c# - 使用 C# Page .aspx 中的参数调用 Javascript 函数

> ID：14748678
> 
> 赞同：0
> 
> 时间：2013-02-07T10:20:08.583
> 
> 标签：c#, javascript, asp.net

我有 RegisterClientScriptBlock，它写在 .aspx 文件的页面加载中`protected void Page_Load(object sender, EventArgs e)`

该脚本实际上从 URL 获取 ID，然后将其传递给 javascript 的 openticketPageLoad() 函数。

**但它没有进入 openticketPageLoad() 函数。但是 .aspx 页面正在加载。**

openTickets.aspx.cs

```
public partial class Default : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
ClientScript.RegisterClientScriptBlock(this.GetType(), "openTicketsScript", "<script type=\'type/javascript\'>$(document).ready(function(){openticketPageLoad(" + Request.QueryString["ID"].ToString() + ");});</script>".ToString(), true);
}
} 
```

在我的 javascript 文件中

```
function openticketPageLoad(b)
{
alert(b); //No alert window coming.
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:23:46.393

请参阅此处的文档：http: [//msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerclientscriptblock.aspx)

最后一个参数是一个布尔值，它指定 ASP.net 是否应该生成 Script 标记。正如您已经指定它们一样，如果您查看源代码，我希望您正在生成嵌套的脚本标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:24:14.460

试试这个

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "openTicketsScript", "<script type=\'type/javascript\'>$(document).ready(function(){openticketPageLoad(" + Request.QueryString["ID"].ToString() + ");});</script>".ToString(), true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T17:04:50.837

也许您可以做的是直接在页面正文的加载事件中将调用分配给您的 javascript 函数。要从内容页面分配正文的加载功能，可以执行以下操作：

```
HtmlGenericControl body = this.Master.FindControl("body") as HtmlGenericControl;
                body.Attributes.Add("onLoad", "openticketPageLoad(" + Request.QueryString["ID"].ToString() + ");"); 
```

并在母版页中将 runat="server" 添加到正文元素：

```
<body id="body" runat="server"> 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T17:13:34.250

你可以试试下面的代码：

```
public partial class Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        ClientScript.RegisterClientScriptBlock(this.GetType(), 
                "openTicketsScript", string.Format("openticketPageLoad({0});", Request.QueryString["ID"]), true);
    }
} 
```

# javascript - 谷歌广告不再显示？

> ID：14748680
> 
> 赞同：0
> 
> 时间：2013-02-07T10:20:10.900
> 
> 标签：javascript, adsense

这有点奇怪 - 我的网站上有谷歌地图 v3 的好广告。

但是在此页面上，它们没有显示... [http://www.haroldstreet.org.uk/munros/](http://www.haroldstreet.org.uk/munros/) （它们应该位于右栏的空白处，并且位于页面的最底部。）

但是它们确实经常在通过在其末尾添加“？somemadeuptag = x”来扩展同一页面的URL之后出现。（即使页面没有使用 URL 标签）

基于相同底层动态代码 [http://www.haroldstreet.org.uk/wainwrights/](http://www.haroldstreet.org.uk/wainwrights/)的类似页面 没有此类问题。

再次嗨我-我现在系统地删除了所有不相关的代码，以提供以下大大简化的页面（没有其他 JS，没有谷歌地图，也没有 CSS 结构）...... [http://www.haroldstreet.org。 uk/test/](http://www.haroldstreet.org.uk/test/) 至少对我来说这显示了相同的行为 - 谷歌广告应该是顶部和底部的横幅，如果失败则显示灰色。

无论浏览器如何，这似乎都发生在我身上 关于为什么会发生这种情况的任何想法？

* * *

稍后添加：

好的，我仍然有问题，但我添加了替代广告，所以它在[http://www.haroldstreet.org.uk/munros/](http://www.haroldstreet.org.uk/munros/)页面上并不那么明显 - 现在显示的是 amozon 广告。

简化的页面内容仍在此测试页面上，它仍然没有显示适当的广告 - 在顶部和底部的两个空灰色横幅中...... [http://www.haroldstreet.org.uk/test/](http://www.haroldstreet.org.uk/test/)

我仍然看不出有什么问题 - 谷歌可以禁止苏格兰山脉的名称吗？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T09:31:50.693

我实际上并没有解决这个问题 - 对于任何感兴趣的人来说，这个简化页面上仍然很明显...... [http://www.haroldstreet.org.uk/test](http://www.haroldstreet.org.uk/test)

但以下可能对某人有用的解决方法......

首先，我将我的广告代码升级到最新版本并将其设置为显示备用广告（在本例中来自亚马逊）。这是一个有用的替代只有空的广告空间 - 见这个例子...... [http://www.haroldstreet.org.uk/waypoints/download/?list=humps](http://www.haroldstreet.org.uk/waypoints/download/?list=humps)

然后对于我更重要的 /munros/ 页面 - 我在 google 广告代码中添加了以下行。

```
 google_page_url = "http://www.haroldstreet.org.uk/waypoints/download/?list=munros&area=04"; 
```

这似乎促使谷歌重新提供密切相关的广告，并恢复谷歌添加到我的 /Munros/ 页面。

所以它不是一个修复，而是一个合理的工作回合

塔菲尔

# javascript - YANDEX API 打开一个未显示的地理点

> ID：14748686
> 
> 赞同：0
> 
> 时间：2013-02-07T10:20:34.800
> 
> 标签：javascript, maps, yandex, yandex-api

我正在尝试打开未显示的地理点的气球。官方 api 文档说

> 如果显示该点，则打开它或它的簇气球

但是如果它没有显示，我该如何打开它？我试图将地图滚动到它的位置然后打开它，但是`TypeError: this._Hh.getMap(...) is null`打开气球时仍然出现错误。

```
function bymShowPoint(pId)
{

    var point = bymGetPoint(pId);
    var pState = bymClusterer.getObjectState(point);

    if (!pState.isShown)
    {

        bymScrollToPoint(pId);

    }

    if (pState.isClustered)
    {

        pState.cluster.state.set('activeObject',point);
        pState.cluster.balloon.open();

    }

    else
    {

        point.balloon.open();

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:58:46.240

如果点在集群中，API 不允许您打开不可见点的气球。我解决它的方法（在 yandex 社区的帮助下）是：

1.  使用该点的数据在该点的位置打开地图的气球
2.  从集群器中删除点（隐藏图标）
3.  在地图的事件中`balloonclose`，将移除的点添加到聚类器

# java - 计算 int 数组中唯一对的有效方法

> ID：14748688
> 
> 赞同：1
> 
> 时间：2013-02-07T10:20:40.087
> 
> 标签：java, arrays, algorithm, int

这是我的第一篇文章，希望它符合网站的发布指南。首先感谢所有社区：几个月来读你并学到了很多:o)

前提：我是 IT 的一年级学生。

这是问题：我正在寻找一种有效的方法来计算给定正 int 数组（这就是我所知道的）中唯一对的数量（恰好出现两次的数字），例如，如果：

```
int[] arr = {1,4,7,1,5,7,4,1,5}; 
```

arr 中唯一对的数量为 3 (4,5,7)。

我在...评估我的提案的效率时遇到了一些困难，比方说。

这是我做的第一个代码：

```
int numCouples( int[] v ) {
int res = 0;
int count = 0;
for (int i = 0 ; i < v.length; i++){
    count = 0;
    for (int j = 0; j < v.length; j++){
        if (i != j && v[i] == v[j]){
            count++;
        }
    }
    if (count == 1){
        res++;
    }
}
return res/2;
} 
```

这不应该是好的，因为它检查整个给定数组的次数与给定数组中元素的数量一样多......如果我错了，请纠正我。

这是我的第二个代码：

```
int numCouples( int[] v) {
int n = 0;
int res = 0;
for (int i = 0; i < v.length; i++){
    if (v[i] > n){
        n = v[i];
    }
}
int[] a = new int [n];
for (int i = 0; i < v.length; i++){
    a[v[i]-1]++;
}
for (int i = 0; i < a.length; i++){
    if (a[i] == 2){
        res++;
    }
}
return res;
} 
```

我想这应该比第一个更好，因为它只检查给定数组的 2 次和 n 数组的 1 次，当 n 是给定数组的最大值时。如果 n 很大，我猜可能不太好......

嗯，2个问题：

1.  我是否理解如何“衡量”代码的效率？

2.  有更好的方法来计算给定数组中唯一对的数量吗？

编辑：该死的我刚刚发布，我已经被答案淹没了！谢谢！我会仔细研究每一个，暂时我说我没有得到那些涉及 HashMap 的内容：在我的知识范围内（因此再次感谢您的洞察力：o））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:34:52.557

```
public static void main(String[] args) {
    int[] arr = { 1, 4, 7, 1, 5, 7, 4, 1, 5 };

    Map<Integer, Integer> map = new HashMap<Integer, Integer>();

    for (int i = 0; i < arr.length; i++) {
        Integer count = map.get(arr[i]);
        if (count == null)
            map.put(arr[i], 1);
        else
            map.put(arr[i], count + 1);
    }

    int uniqueCount = 0;

    for (Integer i : map.values())
        if (i == 2)
            uniqueCount++;

    System.out.println(uniqueCount);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:14:10.530

好吧，这是您的两个问题的另一个答案：

```
am I understanding good how to "measure" the efficiency of the code? 
```

有多种方法可以衡量代码的效率。首先，人们区分*记忆效率*和*时间效率*。计算所有这些值的常用方法是了解算法构建块的效率。看看[维基](http://en.wikipedia.org/wiki/Algorithmic_efficiency)。

例如，使用快速排序进行排序需要`n*log(n)`操作。遍历数组只需要`n`操作，其中`n`是输入中的元素数。

```
there's a better way to count the number of unique pairs in a given array? 
```

这是您的另一种解决方案。这个复杂性将是：，`O(n*log(n)+n)`Big [O 符号](http://en.wikipedia.org/wiki/Big_O_notation)在哪里。`O(...)`

```
import java.util.Arrays;

public class Ctest {
  public static void main(String[] args) {
    int[] a = new int[] { 1, 4, 7, 1, 7, 4, 1, 5, 5, 8 };
    System.out.println("RES: " + uniquePairs(a));
  }

  public static int uniquePairs(int[] a) {
    Arrays.sort(a);
    // now we have: [1, 1, 1, 4, 4, 5, 5, 7, 7]

    int res = 0;
    int len = a.length;
    int i = 0;

    while (i < len) {
      // take first number
      int num = a[i];
      int c = 1;
      i++;

      // count all duplicates
      while(i < len && a[i] == num) {
        c++;
        i++;
      }
      System.out.println("Number: " + num + "\tCount: "+c);
      // if we spotted number just 2 times, increment result
      if (c == 2) {
        res++;
      }
    }

    return res;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:26:12.743

```
int [] a = new int [] {1, 4, 7, 1, 7, 4, 1, 5, 1, 1, 1, 1, 1, 1};
Arrays.sort (a);

int res = 0;
for (int l = a.length, i = 0; i < l - 1; i++)
{
    int v = a [i];
    int j = i + 1;
    while (j < l && a [j] == v) j += 1;
    if (j == i + 2) res += 1;
    i = j - 1;
}

return res; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-07T10:33:22.283

```
public static void main(String[] args) {
    int[] arr = {1,4,7,1,7,4,1,5};
    Map<Integer, Integer> counts = new HashMap<Integer,Integer>();
    int count = 0;

    for(Integer num:arr){
        Integer entry = counts.get(num);

        if(entry == null){
            counts.put(num, 1);
        }else if(counts.get(num) == 1){
            count++;
            counts.put(num, counts.get(num) + 1);
        }
    }

    System.out.println(count);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:29:21.833

您可以使用 HashMap 轻松分组。这是我的代码。

```
int[] arr = {1,1,1,1,1,1,4,7,1,7,4,1,5};
    HashMap<Integer,Integer> asd = new HashMap<Integer, Integer>();
    for(int i=0;i<arr.length;i++)
    {
        if(asd.get(arr[i]) == null)
        {
            asd.put(arr[i], 1);
        }
        else
        {
            asd.put(arr[i], asd.get(arr[i])+1);
        }
    }

    //print out
    for(int key:asd.keySet())
    {
        //get pair
        int temp = asd.get(key)/2;
        System.out.println(key+" have : "+temp+" pair");
    } 
```

添加用于检查唯一对，您可以删除打印出来的一个

```
//unique pair
    for(int key:asd.keySet())
    {
        if(asd.get(key) == 2)
        {
            System.out.println(key+" are a unique pair");
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T11:19:34.980

一段时间后，另一个解决方案应该很好用。

```
public getCouplesCount(int [] arr) {
    int i = 0, i2;
    int len = arr.length;
    int num = 0;
    int curr;
    int lastchecked = -1;

    while (i < len-1) {
        curr = arr[i];
        i2 = i + 1;
        while (i2 < len) {
            if (curr == arr[i2] && arr[i2] != lastchecked) {
                num++; // add 1 to number of pairs
                lastchecked = curr; 
                i2++; // iterate to next
            } else if (arr[i2] == lastchecked) {
                // more than twice - swap last and update counter
                if (curr == lastchecked) {
                    num--;
                }
                // swap with last
                arr[i2] = arr[len-1];
                len--;
            } else {
                i2++;
            }
        i++;
    }

return num;
} 
```

我不确定它是否有效，但它比首先对数组进行排序或使用哈希图更有效......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-01T13:44:46.470

```
var sampleArray = ['A','B','C','D','e','f','g'];
 var count = 0;
 for(var i=0; i<=sampleArray.length; i++) {
    for(var j=i+1; j<sampleArray.length; j++) {
        count++;
        console.log(a[i] ,',', a[j]);
    }
 }
 console.log(count); 
```

这是我尝试过的简单方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-01T14:09:13.193

使用 ConcurrentHashMap 的 Java8 并行流版本

```
int[] arr = {1,4,7,1,5,7,4,1,5};
Map<Integer,Long> map=Arrays.stream(arr).parallel().boxed().collect(Collectors.groupingBy(Function.identity(),
        ConcurrentHashMap::new,Collectors.counting()));
map.values().removeIf(v->v!=2);
System.out.println(map.keySet().size()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-08T20:04:15.157

```
 #include <bits/stdc++.h>
 using namespace std;
 int main() 
 {
    ios_base::sync_with_stdio(false);
    cin.tie(NULL);
    int arr[9] = {1,4,7,1,5,7,4,1,5};    // given array
    int length=9;                        // this should be given
    int count=0;
    map<int,int> m;
    for(int i=0;i<length;i++)
        m[arr[i]]++;
    cout<<"List of unique pairs : ";
    for(auto it=m.begin();it!=m.end();it++)
        if(it->second==2)
        {
            count++;
            cout<<it->first<<" ";
        }
    cout<<"\nCount of unique pairs(appears exactly twice) : "<<count;
    return 0;
 }

 OUTPUT :
 List of unique pairs : 4 5 7 
 Count of unique pairs(appears exactly twice) : 3

 Time Complexity : O(N) where N is the number of elements in array
 Space Complexity : O(N) total no. of unique elements in array always <=N 
```

# selenium - Selenium：如何从 html 源中获取纯文本？

> ID：14748692
> 
> 赞同：2
> 
> 时间：2013-02-07T10:21:03.943
> 
> 标签：selenium, automated-tests, htmlunit

我将通过用 HtmlUnit 替换 Selenium 来重写我的所有测试项目，因为我无法像使用“HtmlPage:asText”方法使用 htmlunit 那样在 selenium 中获取纯文本。获取纯文本可以帮助我轻松验证页面的内容，而无需注意标签的存在与否。

例如像这样的纯文本“一，二三”可能对应许多html源：

```
<p>One, two three</p> 
```

或`<table> <tr><td>One1</td><td>two</td><td>three</td> </tr></table>` 或`<div><span>One, </span> <span>two, </span> <span>three, </span> </div>`

通过使用 HtmlUnit，我可以编写功能测试，而无需注意实际内容将如何以 html 格式表示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:42:37.857

这只会在页面中为您提供纯文本

```
String pageSource=driver.findElement(By.tagName("body")).getText(); 
```

下面的逻辑将为您提供整个页面源。

```
driver.getPageSource(); 
```

# java - 在 Struts 2 中的 request.getAttribute(..) 中获取 Null

> ID：14748698
> 
> 赞同：1
> 
> 时间：2013-02-07T10:21:15.127
> 
> 标签：java, parameters, struts2

设置属性

```
public class VoucherApproverListAction extends ActionSupport implements
SessionAware, ServletRequestAware, Preparable {
private HttpServletRequest servletRequest;

    public HttpServletRequest getServletRequest() {
        return servletRequest;
    }

    @Override
    public void setServletRequest(HttpServletRequest servletRequest) {
        this.servletRequest=servletRequest;
    }

public void prepare() throws Exception {
servletRequest.setAttribute("id",tCaseVouchrDto.getId());
}
} 
```

获取属性

```
 public class VoucherAction extends ActionSupport implements
    SessionAware, ServletRequestAware, Preparable {
    private HttpServletRequest servletRequest;

        public HttpServletRequest getServletRequest() {
            return servletRequest;
        }

        @Override
        public void setServletRequest(HttpServletRequest servletRequest) {
            this.servletRequest=servletRequest;
        }

    public void prepare() throws Exception {
   String paramValue = (String)servletRequest.getAttribute("id");
        logger.info("@-----Id===-----@" + paramValue);
    }
    } 
```

成功后从VoucherApproverListAction动作类重定向到VoucherAction动作类获取`null`paramValue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:12:00.963

> 成功后从 VoucherApproverListAction 动作类重定向到 VoucherAction 动作类

这就是问题所在，如果您发送重定向，请求属性会丢失。您需要在下一个请求之前传递一个参数或将其保存在会话中。

# php - 在mysql中按用户ID上传文件？

> ID：14748700
> 
> 赞同：1
> 
> 时间：2013-02-07T10:21:19.350
> 
> 标签：php, mysql

我有两张表，一张用于用户，一张用于图片我想要实现的是，如果我登录，我可以为用户上传图片因为不允许用户上传图片我想上传图片他们和每个用户都将能够查看自己的图像。我有一个工作代码来上传多个图像，但现在如何将它们分配给特定用户。下面的代码只是上传多张图片。

```
<form action="" method="POST" enctype="multipart/form-data">
    <input type="file" name="files[]" multiple/>
    <input type="submit"/>
</form>
<?php
$username = (isset ($_POST['username']));
if(isset($_FILES['files'])){
    $query = "INSERT into tish_images(`FILE_NAME`,`FILE_SIZE`,`FILE_TYPE`)
             VALUES(:FILE_NAME,:FILE_SIZE,:FILE_TYPE)";
    $stmt  = $con->prepare($query);
    $errors= array();
    foreach($_FILES['files']['tmp_name'] as $key => $error ){
        if ($error != UPLOAD_ERR_OK) {
            $errors[] = $_FILES['files']['name'][$key] . ' was not uploaded.';
            continue;
        }
        $file_name = $key.$_FILES['files']['name'][$key];
        $file_size = $_FILES['files']['size'][$key];
        $file_tmp  = $_FILES['files']['tmp_name'][$key];
        $file_type = $_FILES['files']['type'][$key];  
        if($file_size > 2097152){
            $errors[] = 'File size must be less than 2 MB';
            continue;
        }
        try{       
            $stmt->bindParam( ':FILE_NAME', $file_name , PDO::PARAM_STR );
            $stmt->bindParam( ':FILE_SIZE', $file_size, PDO::PARAM_STR );
            $stmt->bindParam( ':FILE_TYPE', $file_type, PDO::PARAM_STR );
            $stmt->execute();

            $desired_dir="image_uploads";

            if(is_dir($desired_dir)==false){
                mkdir($desired_dir, 0700);// Create directory if it does not exist
            }
            if(is_file($desired_dir.'/'.$file_name)==false){
                move_uploaded_file($file_tmp,$desired_dir.'/'.$file_name);
            }else{    //rename the file if another one exist
                $new_file=$desired_dir.'/'.$file_name.time();
                move_uploaded_file($file_tmp,$new_file) ;               
            }
        }catch(PDOException $e){
            $errors[] = $file_name . 'not saved in db.';
            echo $e->getMessage();
        }   
    }
    if(empty($error)){
        echo "Success";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:42:19.777

您有单独的用户表和图像表还是一张表？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:48:33.690

你可以做一件事。在 images 表中为 user_id 创建一个列，并在插入图像时相应地插入相应的 user_id。因此，在前端，您可以拥有所有用户的下拉列表，或者如果您使用会话来存储用户 ID，那么您可以轻松获得。

如果您需要其他任何东西，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:49:45.017

您需要一个`users_uploads`包含以下字段的表格：`user_id`和`file_name`. 之后，您将获得如下数据：

```
user_id : file_name
1 : abc.jpg
2 : 123.png
1 : xyz.bmp
1 : blah.mp3
3 : blah.mp3 
```

如果您想像可能一样将所有上传内容存储在一个列中`abc.jpg;xyz.bmp;blah.mp3`，但它比以前的方式慢，因为您需要处理存储在该列中的字符串。想象一下，您想删除一个文件`xyz.bmp`，您需要提取所有文件，从数组中删除该特定条目，然后将它们写回该单元格。这需要更长的时间，而不是从数据库中删除或选择一行......严重。

# ruby - 如何在 ruby 中为 OpenSSL 设置 ca-bundle 路径

> ID：14748701
> 
> 赞同：17
> 
> 时间：2013-02-07T10:21:20.547
> 
> 标签：ruby, openssl, certificate, ca

我在 ruby​​ 中遇到问题，OpenSSL 无法验证 SSL 证书。我认为这是由于脚本不知道 ca-bundle.pem 引起的。是否可以手动配置 ca-bundle.pem 的路径？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-10T12:19:20.080

OpenSSL 使用`SSL_CERT_FILE`环境变量。你可以在你的 ruby​​ 脚本中使用类似于第一个引入`require`OpenSSL 之前的东西来设置它：

```
ENV['SSL_CERT_FILE'] = '/path/to/ca-bundle.pem' 
```

或者，如果您愿意，您可以`SSL_CERT_FILE`根据您的情况在操作系统环境、Web 服务器配置等中设置环境变量。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-07T10:24:43.037

您可以通过以下方式做到这一点：

```
SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T19:44:18.613

这都是因为`SSL_CERT_FILE`有一个错误的价值，它的价值可能不存在。因此，您必须将其值设置为您的证书文件为`ENV['SSL_CERT_FILE]='path/to/ca-bundle.p'`. 如果您使用的是 Rails，则可以将其放入初始化程序中。如果您想要一个可以为您做所有事情的 gem，请使用[https://github.com/stevegraham/certified](https://github.com/stevegraham/certified)。

# php - Fullcalendar 不在 Magento 块内渲染

> ID：14748702
> 
> 赞同：1
> 
> 时间：2013-02-07T10:21:24.793
> 
> 标签：php, javascript, magento, fullcalendar

我在 Magento 社区中有一个自定义块，它重写了 Adminhtml 中的“订单”选项卡，并将其替换为 Fullcalendar（arshaw.com 的），它显示了产品何时发货的事件。

我已经实现了一个 JSON 提要，它依赖于我的自定义模块控制器来填充和保存数据。这很好用，一旦我点击月/今天/上一个/下一个，我就可以看到产品。但是，这不是它应该如何工作的。它应该在页面加载时呈现，除了我看到的只是按钮。

我曾尝试在 javascript 中引用它所在的选项卡，例如。

```
jQuery('#diagram_tab_orders_content').tabs({
    show: function(event, ui) {
        jQuery('#dashCalendar').fullCalendar('render');
} 
```

其中#dashCalendar 是我的标签的 id / class。

除非这不会呈现日历。它只是改变了 diagram_tab_orders_content 的 CSS。

我在 Stackoverflow 上看到了一个类似的主题，您必须明确引用日历所在的选项卡才能正确呈现。这是我试图实现的，以便在文档准备好时呈现日历。

任何有关如何在文档准备好时呈现此日历的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T09:24:03.270

所以我发现了日历的问题，它与 Magento 中的选项卡有关。在 Javascript 中显式引用选项卡会导致渲染出现问题，因此我不得不重写 Dashboard 块。

我的 ModuleName/etc 文件夹中的 Config.xml：

```
<global>
        <!-- Blocks -->
        <blocks>
            <adminhtml>
                <rewrite>
                    <dashboard>ModuleName_Block_Adminhtml_Calendar</dashboard>
                </rewrite>
            </adminhtml>
        </blocks>
</global> 
```

然后在我的 ModuleName/Block/Calendar.php 文件中设置模板：

```
public function __construct()
    {   //this creates the template block for the calendar
        parent::__construct();
        $this->setId('Calendar');
        $this->setTemplate('moduleName/calendar/calendar.phtml');
    } 
```

复制/粘贴提供的完整日历的 JSON 示例页面，将您的 events: 标记设置为您的 .php 文件，该文件使用 JSON 从您的数据库生成/请求数据。如果您想使用提供的 CSS 自定义您的主题，您将在登录 Adminhtml 时看到带有事件的日历呈现。您将在下方看到“填充”。它是我的控制器中的一个操作，它检索数据并将 JSON 提要回显到日历。

```
events: {
           url: "<? echo $this->getUrl('moduleName/adminhtml_calendar/populate') ?>"
        }, 
```

现在日历正确呈现事件。

# csv - 如何使用 CSV 文件中的特殊字符处理 Highcharts？

> ID：14748705
> 
> 赞同：2
> 
> 时间：2013-02-07T10:21:34.870
> 
> 标签：csv, highcharts, special-characters

我有一个由 Highcharts 读取的带有德语字符（“ä”、“ü”）的 CSV 文件。但是这些特殊字符无法正确显示。我试图更改文本编码，UTF8，LATIN1，...，但徒劳无功。

有人有小费吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:50:41.270

至少部分解决方案是在 CSV 编辑器中切换编码几次，然后最后切换回 UTF8。然后它起作用了。

但是，轴标题中的特殊字符只有在使用 ISO Latin 1 时才会出现。否则，仍然是难看的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:29:57.373

您应该在所有文件中使用 utf-8 编码。

[http://jsfiddle.net/ZXnhL/](http://jsfiddle.net/ZXnhL/)

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container'
    },
    xAxis: {
        categories: ['ä', 'ä']
    },        
    series: [{
        data: [29, 71]        
    }]
}); 
```

效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T04:03:30.610

我很难在 Highcharts 中打印特殊字符。这就是我解决问题的方式。将 'useHTML' 设置为 true 以打印标题中的特殊字符。我认为这可能对访问此页面的人有所帮助。标题：{ useHTML：true，文本：'每月 - 温度'}，

# algorithm - 算法时间复杂度

> ID：14748715
> 
> 赞同：-2
> 
> 时间：2013-02-07T10:21:58.217
> 
> 标签：algorithm, big-o, time-complexity

我正在研究一种算法，该算法在最坏的情况下会执行许多这样的操作：

```
N + (N -1) + (N - 2) + (N - 3) + ... + [N - (N -1)] + (N -N) 
```

在大 O 符号分析中，这个算法是线性的、二次的还是其他的？

非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:23:30.317

这是数学。你的总和正好等于`N*(N+1)/2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:33:02.653

你的公式是“小高斯”。它等于n(n+1)/2。

![高斯技巧方程](../Images/1dce49ea0a7d23a83e7728cf4c00d7c3.png)

这是 O( (n*n + n)/2 ) = O(n ² )

# c++ - Visual Studio 2012 中的 c++11 std::mutex 编译器错误

> ID：14748717
> 
> 赞同：3
> 
> 时间：2013-02-07T10:21:59.673
> 
> 标签：c++, multithreading, c++11, locking, mutex

这是关于 C++11 标准中死锁的探索。

在C++ Concurrency in Action的sec3.2.4中有一个防止多线程死锁的例子。此外，对于没有这本书的人，还有一个几乎相似的例子可以参考： [http ://en.cppreference.com/w/cpp/thread/lock_tag](http://en.cppreference.com/w/cpp/thread/lock_tag)

我遇到的问题是这两个代码的代码在Visual Studio 2012中出现编译器错误。错误消息是：

```
'std::mutex::mutex': cannot access private member declared in class 'std::mutex' 
```

这个问题也发生在以下比 cppreference.com 更简单的代码中：

```
struct bank_account {
    std::mutex m;
};
void transfer(bank_account &from, bank_account &to)
{
    std::lock(from.m, to.m);
}
int _tmain(int argc, _TCHAR* argv[])
{
    bank_account my_account;
    bank_account your_account;

    std::thread t1(transfer, my_account, your_account);  // compiler-error!

    std::system("pause");
    return 0;
} 
```

在 Visual Studio 2012 中解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T10:27:43.143

`mutexes`不可复制或可分配，并且`std::thread`构造函数正在尝试制作副本。您可以通过使用`std::reference_wrapper`via来规避此问题`std::ref`：

```
std::thread t1(transfer, std::ref(my_account), std::ref(your_account)); 
```

或者，您可以通过临时`bank_accounts`：

```
std::thread t1(transfer, bank_account(), bank_account()); 
```

这很可能会导致`bank_accounts`“移动”而不是复制，尽管也有可能通过*复制省略*来避免复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:28:01.200

您正在复制`my_account`和`your_account`复制[std::thread](http://en.cppreference.com/w/cpp/thread/thread)，但 std::mutex 既不可复制也不可移动。

尝试通过引用传递：

```
 std::thread t1(transfer, std::ref(my_account), std::ref(your_account)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:26:52.347

从[这个参考](http://en.cppreference.com/w/cpp/thread/mutex)：

> 互斥锁类是不可复制的。

不能复制或移动互斥锁。

# perl - 编译的 Perl GUI 应用程序

> ID：14748718
> 
> 赞同：1
> 
> 时间：2013-02-07T10:22:01.033
> 
> 标签：perl, qt, user-interface, gtk, tk

我正在寻找制作基于 GUI 的应用程序的选项。

应用程序需要与 http 服务器、数据库和 GUI 保持一致。所以我知道的最好的选择是拥有 perl。

我正在寻找一种方法来编译代码以确保安全性也易于开发 GUI。

我已经开始使用 Perl/TK，但是编写 GUI 的每一行都需要很多时间，而且调试起来也很困难。

是否有任何选项可以使 GUI 构建类似于 QT 或 .NET，以便可以轻松拖放 GUI 控件。

如果我使用 PerlQT，可以拖放吗？是否可以在 PerlQT 中编译代码？这是否适用于linux和windows？有没有像 PerlGTK 之类的其他选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:10:41.383

如果您认为“编译” Perl 脚本可以解决任何问题，您可能会感到失望。

*   通常，perl 解释器只是与纯源代码和任何使用的模块捆绑到一个庞大的可执行文件中。该脚本并未真正编译。这让一切变得更容易。此外，编译与安全性*无关*，充其量只能提供一些模糊性。
*   否则，您可能会走上疯狂的路线并使用将 Perl 操作码序列化为 C 代码的东西，然后编译它。请注意，虽然 perl 将源代码编译为操作码，但它已经执行了部分操作码，因此运行操作码序列化与运行实际程序不同。

在 *nix 系统上，编译 Perl 脚本是愚蠢的，因为解释器很容易获得。

如果您想将 Perl 和外部代码融合到一个程序中（！= 一个可执行文件），请查看 XS 语言（将 C 绑定到 Perl）或`Inline`模块系列。

(Perl-)Qt 非常棒，但我上次查看最近的绑定时，这些东西看起来维护不足且处于试验阶段。我相信您可以以某种方式利用 QtDesigner 进行设计部分，并将 Perl 代码与它挂钩。如果您在每个目标系统上都有一个编译器，这应该是非常可移植的。哈哈

您应该认真考虑的其他 GUI 工具包是 GTK 和 Wx。.Net 就出来了。

请意识到 Perl 是一种非常动态的语言。虽然编译不太可能有用，但您可以使用匿名子例程等函数式编程技术和编译时代码生成等元编程技术来简化您的 GUI 编码。如果您像编写 Java 或其他相当静态（和编译）的语言一样编写 Perl，那么如果 Perl 看起来很痛苦，我不会感到惊讶。

# rest - zf2 restful 未达到更新方法

> ID：14748720
> 
> 赞同：2
> 
> 时间：2013-02-07T10:22:06.863
> 
> 标签：rest, zend-framework2

我做了一个安静的控制器，如果我发送 id，get 方法会接收它。但是，当我更新表单时，我希望更新方法能够处理，但我无法为此获得正确的配置，并且在遇到此问题 1 天后，我决定将其修复在这里。

这里的代码涉及模块配置中的路由：

```
 'activities' => array(
            'type' => 'segment',
            'options' => array(
                'route' => '/activities[/:id][/:action][.:formatter]',
                'defaults' => array(
                    'controller' => 'activities'
                ),
                'constraints' => array(
                    'formatter' => '[a-zA-Z0-9_-]*',
                    'id' => '[0-9_-]*'
                ),
            ),
        ), 
```

控制器组长：

```
namespace Clock\Controller;

use Zend\Mvc\Controller\AbstractRestfulController;
use Zend\Mvc\MvcEvent;
use Zend\View\Model\ViewModel;
use Zend\Form\Annotation\AnnotationBuilder;
use Zend\Form;
use Doctrine\ORM\EntityManager;
use Doctrine\ORM\EntityRepository;
use Clock\Entity\Activity;
use \Clock\Entity\Project;

Wich contains the get method:

    public function get($id)
    {
        $entity = $this->getRepository()->find($id);
        $form = $this->buildForm(new Activity());
        #$form->setAttribute('action', $this->url()->fromRoute("activities", array('action' => 'update')));
        $form->setAttribute('action', "/activities/$id/update");
        $form->bind($entity);
        return array(
            "activities" => $entity,
            "form" => $form
        );
    } 
```

这支持了这种观点：

```
<h3>Edit activity</h3>
<div>
    <?php echo $this->form()->openTag($form);?>
    <?php echo $this->formSelect($form->get("project"));?><br>
    <?php echo $this->formInput($form->get("duration"));?><br>
    <?php echo $this->formInput($form->get("description"));?><br>
    <input type="submit" value="save changes" />
    <?php echo $this->form()->closeTag($form);?>
</div> 
```

发送后，我希望活动中的更新方法能够控制，但我得到：

```
A 404 error occurred
Page not found.

The requested controller was unable to dispatch the request.

Controller:
    activities 
```

编辑：@DrBeza 这是我得到的，我认为（不是路线大师）是正确的：

```
Zend\Mvc\Router\Http\RouteMatch Object
(
    [length:protected] => 21
    [params:protected] => Array
        (
            [controller] => activities
            [id] => 30
            [action] => update
        )

    [matchedRouteName:protected] => activities
) 
```

--

而已。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T11:22:13.867

## Quick Fix

The RouteMatch object tries to dispatch `ActivitiesController::updateAction` but you have defined `ActivitiesController::update` That's due to you using a Restful Controller. the `Controller::update`-Method is specifically tied to `PUT`-Requests. You need to define an extra method to handle updates via `POST`-Requests.

I suggest you define `ActivitiesController::updateAction`, make clear in the docblock it is meant to handle POST-Update requests and refactor both `::updateAction` and `::update` to share as much common helper-methods as possible for a fast solution.

## Common URI Structur information

As a nice information to have when you start developing RESTful applications/APIs: The ruby community suggests the following url-structure for your resources:

```
# These are restful 
/resource          GET (lists)   | POST (creates)
/resource/:id      PUT (updates) | DELETE (deletes)

# these are just helpers, not restful, and may accept POST too.
/resource/new      GET (shows the create-form), POST
/resource/:id/edit GET (shows the update-form), POST 
```

## Detailed Problem Analysis

A restful update will be sent by an consumer via `PUT`, but browsers sending HTML-forms may only send `GET` or `POST` requests. You should never use `GET` to create something. So you have to use `POST` in a forms-context.

Looking at the problem from an architectural perspective a multitude of possibilities emerge, depending on how big your application is.

*   For a small application, tight integration (formhandling and API handling in the controller) apply best.
*   Getting bigger you may want to split up API-Controllers (only restful actions) from Helper-Controllers (form, website handling) which talk to your API-Controllers
*   Being big (multitude of API-Users) you will want to have dedicated API Servers and dedicated Website Servers (independent applications!). In this case your website will consume the API serverside (thats what twitter is doing). API Servers and Website Servers still may share libraries (for filtering, utilities).

## Code Sample

As an educational example I made [an gist to show how such a controller could look like](https://gist.github.com/Silone/5019600) in principle. This controller is a) untested b) not production ready and c) only marginally configurable.

For your special interest here two excerpts about updating:

```
/* the restful method, defined in AbstractRestfulController */
public function update($id, $data)
{
    $response = $this->getResponse();

    if ( ! $this->getService()->has($id) )
    {
        return $this->notFoundAction();
    }

    $form = $this->getEditForm();
    $form->setData($data);

    if ( ! $form->isValid() )
    {
        $response->setStatusCode(self::FORM_INVALID_STATUSCODE);
        return [ 'errors' => $form->getMessages() ];
    }

    $data = $form->getData(); // you want the filtered & validated data from the form, not the raw data from the request.

    $status = $this->getService()->update($id, $data);

    if ( ! $status )
    {
        $response->setStatusCode(self::SERVERSIDE_ERROR_STATUSCODE);
        return [ 'errors' => [self::SERVERSIDE_ERROR_MESSAGE] ];
    }

    // if everything went smooth, we just return the new representation of the entity.

    return $this->get($id);
} 
```

and the `editAction` which satisfies browser-requests:

```
public function editAction()
{
    /*
     * basically the same as the newAction
     * differences:
     *  - first fetch the data from the service
     *  - prepopulate the form
     */

    $id = $this->params('id', false);
    $dataExists = $this->getService()->has($id);

    if ( ! $dataExists )
    {
        $this->flashMessenger()->addErrorMessage("No entity with {$id} is known");
        return $this->notFoundAction();
    }

    $request = $this->getRequest();
    $form = $this->getEditForm();
    $data = $this->getService()->get($id);

    if ( ! $request->isPost() )
    {
        $form->populateValues($data);
        return ['form' => $form];
    }

    $this->update($id, $request->getPost()->toArray());
    $response = $this->getResponse();

    if ( ! $response->isSuccess() )
    {
        return [ 'form' => $form ];
    }

    $this->flashMessenger()->addSuccessMessage('Entity changed successfully');
    return $this->redirect()->toRoute($this->routeIdentifiers['entity-changed']);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T16:34:53.780

该错误消息表明调度进程无法找到请求的控制器操作，因此使用`notFoundAction()`.

我会检查匹配的路线并确保值符合预期。您可以通过将以下内容添加到模块的`onBootstrap()`方法中来做到这一点：

```
$e->getApplication()->getEventManager()->attach('route', function($event) {
    var_dump($event->getRouteMatch());
    exit;
}); 
```

# javascript - jQuery Print - 打印前显示预览

> ID：14748721
> 
> 赞同：2
> 
> 时间：2013-02-07T10:22:07.967
> 
> 标签：javascript, jquery, jquery-ui, printing

我想打印页面的一部分，即 div。我还需要引用 css 文件，所以它会像我们在页面中看到的那样被打印出来。

> 我尝试使用[jQPrint](http://archive.plugins.jquery.com/project/jqPrint)然后[printThis](https://github.com/jasonday/printThis)。但是当我第二次单击按钮时，我的 IE7 浏览器崩溃了。不知道是什么问题。我的页面有很多元素（100 多个输入字段和 3 个网格）

***最后，我按照这个[http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm](http://www.bennadel.com/blog/1591-Ask-Ben-Print-Part-Of-A-Web-Page-With-jQuery.htm)实现了。现在没有崩溃！***

**现在如何在发送打印机之前显示打印预览对话框？**

*像这样的[https://github.com/etimbo/jquery-print-preview-plugin](https://github.com/etimbo/jquery-print-preview-plugin)，我也尝试过，但它不起作用:(*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T23:01:49.073

我在之前的工作中完成了同样的任务，并完成了以下示例。我们将其设置为我们发送到打印机的设计的任何部分，我们将复制 HTML，并使用该内容创建一个动态页面，然后触发浏览器打印对话框。如果你想做你所要求的，没有很多“魔法”，这是处理它的好方法。

# kineticjs - 使用 kineticjs 在画布中拖动组

> ID：14748722
> 
> 赞同：0
> 
> 时间：2013-02-07T10:22:13.613
> 
> 标签：kineticjs

我有一个基于 html5 Canvas 的应用程序。我已经使用 kineticjs 库进行拖放。它有多个拖放组。如果我将画布尺寸增加到更大的尺寸，它会延迟拖动。我们如何提高拖动性能。它可以很容易地在 iPad 和平板设备上引起注意。我创建了一个示例。jsfiddle.net/MRVCg/5/embedded/result/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:15:04.077

我认为这是一个有效的问题，

[http://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-shape-caching-with-kineticjs/)

您应该尝试将形状缓存为图像以获得更好的性能。你可以这样做：

```
shape.toImage({
  // define the size of the new image object
  width: 100,
  height: 100,
  callback: function(img) {
    // cache the image as a Kinetic.Image shape
    var image = new Kinetic.Image({
      image: img
    };
  }
}); 
```

# sql - 如何在 PL/SQL 中查找字符串中不同字符的计数和名称

> ID：14748730
> 
> 赞同：4
> 
> 时间：2013-02-07T10:22:30.423
> 
> 标签：sql, oracle, plsql, stringtokenizer, string-aggregation

我对 PL/SQL 很陌生，我需要获取字符串中不同字符的名称和计数。例如，如果我有一个字符串`str="helloexample"`，我需要得到不同字符的输出`str`，即`heloxamp`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T11:03:32.563

您可以按如下方式使用正则表达式：

```
SET serveroutput ON
DECLARE
     str        VARCHAR2(20):='helloexample';
     str_length NUMBER;
     c          VARCHAR2(20):=NULL;
     d          NUMBER;
BEGIN
     str_length:=LENGTH(str);
     FOR i IN 1..str_length
     LOOP
          IF regexp_instr(c,SUBSTR(str,i,1))>0 THEN
               NULL;
          ELSE
               c:=c||SUBSTR(str,i,1);
          END IF;
     END LOOP;
     dbms_output.put_line(c);
END; 
```

答案是：

```
heloxamp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:57:29.047

如果 WM_CONCAT 不适合你，你可以使用这个技巧：

```
select rtrim(xmlagg(xmlelement(e, str)).extract('//text()'), ',') as output
  from (select substr(str, level, 1) str, level l,
               row_number() over (partition by substr(str, level, 1) 
                                      order by level) rn
          from (select 'helloexample' str  from dual) d
        connect by level <= length(str)
        order by level)
 where rn = 1;

SQL> select rtrim(xmlagg(xmlelement(e, str)).extract('//text()'), ',') as output
  2    from (select substr(str, rownum, 1) str, level l,
  3                 row_number() over (partition by substr(str, rownum, 1) order by level) rn
  4            from (select 'helloexample' str  from dual) d
  5          connect by level <= length(str)
  6          order by level)
  7   where rn = 1;

OUTPUT
--------------------------------------------------------------------------------
heloxamp 
```

# c - 长整数运算中的歧义？

> ID：14748734
> 
> 赞同：1
> 
> 时间：2013-02-07T10:22:40.640
> 
> 标签：c, long-integer, integer-arithmetic

看看下面的一段代码：

```
#include <stdio.h>

int main(void)  
{  
int a;

a = 2147483647;
printf("a + 1 = %d \t sizeof (a + 1) = %lu\n", a + 1, sizeof (a + 1));
printf("a + 1L = %ld \t sizeof (a + 1L) = %lu\n", a + 1L, sizeof (a + 1L));

a = -1;
printf("a + 1 = %d \t sizeof (a + 1) = %lu\n", a + 1, sizeof (a + 1));
printf("a + 1L = %ld \t sizeof (a + 1) = %lu\n", a + 1L, sizeof (a + 1L));  //why a + 1L does not yield long integer ?

return 0;
} 
```

这将产生以下输出：

```
a + 1 = -2147483648   sizeof (a + 1) = 4  
a + 1L = 2147483648   sizeof (a + 1L) = 8  
a + 1 = 0    sizeof (a + 1) = 4  
a + 1L = 0   sizeof (a + 1) = 8 
```

为什么`a + 1L`在最后一行产生 0 而不是长整数 4294967296 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:24:51.710

> 为什么最后一行中的 a + 1L 不会产生长整数 4294967296 ？

因为将`int`-1 转换为 a`long int`会导致`long int`值为 -1，并且`-1 + 1 = 0`.

转换`-1`为另一种类型只会导致`4294967295`目标类型是无符号 32 位类型（通常`unsigned int`是这样，通常是`uint32_t`，如果提供）。但是，将值加 1 会换成 0。

因此，要获得`4294967296`，您需要一个中间演员，

```
(uint32_t)a + 1L 
```

所以 that`-1`首先转换为`uint32_t`with 值`4294967295`，然后转换为`long`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:47:31.433

在第一种情况下：2147483647 是一个 32 位有符号值，十六进制表示为 0x7fffffff。向它添加 1 会得到一个 32 位值，十六进制 0x80000000，在 32 位有符号整数中为 -2147483648（由于溢出），如果将其视为 64 位有符号整数，则值为 2147483648。

在第二种情况下：-1 是一个 32 位有符号值，十六进制表示为 0xffffffff。向它添加 1 会得到一个 32 位值，十六进制 0x00000000，在有符号整数中为 0。

当您在 64 位中添加 1 时，首先会发生**符号扩展**，因此您实际上添加了 0xFFFFFFFFFFFFFFFF 和 0x0000000000000001，和预期的一样为 0。

如果您考虑符号扩展，则没有歧义。

# javascript - 谷歌地图：具有自定义 overlayMapType 的 $.goMap()

> ID：14748738
> 
> 赞同：0
> 
> 时间：2013-02-07T10:22:46.710
> 
> 标签：javascript, google-maps, jquery-plugins, google-maps-api-3, overlay

首先：我尝试重新制作一个名为 regionkarten.com 的网站[，](http://www.regionalkarten.com/g_map_wrapper.html) 它是一家德国地图出版商。此页面使用 Google API v2 来显示我们的自定义地图。

我的工作是将页面更新到 API v3。现在我找到了 jQuery GoMap 插件并尝试使用它，但它似乎不支持**自定义地图**。

我试图用自定义地图定义一个 Overly

```
var ehsTypeBOptions =
{
    getTileUrl: function(coord, zoom)
    {
        var x = coord.x;
        var y = coord.y;
        return "http://regionalkarten.com/_map/ehs_village_maps/is_maps/z"+zoom+"/"+coord.y+"/"+coord.x+".png";
    },
    tileSize: new google.maps.Size(256, 256),
}; 
```

并将其加载到地图中：

```
map.overlayMapTypes.insertAt(0, new google.maps.ImageMapType(ehsTypeBOptions)); 
```

没有 GoMap 也能正常工作。所以我尝试了：

```
$.goMap.overlayMapTypes.insertAt(0, new google.maps.ImageMapType(ehsTypeBOptions)); 
```

你猜怎么着，它没有用:(

[GoMaps 网页](http://www.pittss.lv/jquery/gomap/examples.php)和谷歌不是很有帮助。请记住，我必须将自定义地图加载到叠加层中。我需要覆盖层后面的真实谷歌地图，因为我们的地图不是无缝的。我希望你对 GoMap 有一些想法或经验。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:52:59.520

`$.goMap`不返回本机`google.maps.Map`实例，因此您不能在那里使用 Maps-API-methods。

google.maps.Map-instance 可以通过`$.goMap.map`.

**除此之外：**我建议不要使用这个库，自 1 年以来没有任何更新，这一切都可以在没有任何额外库的情况下完成。

**更重要的是：**在您继续使用 之前`ImageMapType`，这不是适合您的 MapType，因为 TileServer 似乎不为整个世界提供图块。

当用户平移或缩放以使视口中的某个区域没有可用的平铺时，该区域将显示为灰色空间。您最好使用 a[`Overlay MapType`](https://developers.google.com/maps/documentation/javascript/maptypes#OverlayMapTypes)并将叠加层的背景图像设置为 TileUrl（此外，您可以使用检查 Tile 是否可用的条件来减少对 tile-server 的不必要请求）

# c# - 每次单击按钮时添加到 int 并显示在文本框中 c#

> ID：14748741
> 
> 赞同：1
> 
> 时间：2013-02-07T10:22:53.813
> 
> 标签：c#, textbox, int, add

我对编程很陌生，每次单击按钮时，我都会尝试这样做，它会在 an 的值上加一个`int`并将其显示在**textbox**中。我的代码是：

```
private void button1_Click(object sender, EventArgs e)
{
    int a = 100;
    a++;

    txtBox1.Text = a.ToString();
} 
```

因此，当我单击它显示在文本框 101 中的按钮时，但是当我再次单击它时，我希望文本框显示 102 和 103 等。有什么想法吗？我认为这很容易并且使用循环的一些变体，但我尝试了一些东西，但似乎没有任何效果。任何提示将非常感谢！谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:25:33.273

您必须将您的价值存储在方法主体之外。

```
private int a = 100;

private void button1_Click(object sender, EventArgs e)
{        
     a++;

      txtBox1.Text = a.ToString();
} 
```

您在程序中所做的是，每当您单击按钮时，新 Integer`a`的值被声明为 100，然后您将其增加 1，这就是您总是看到“101”的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:26:43.613

```
int a = 100;
txtBox1.Text = a.ToString();
  ...... 
```

私人无效按钮1_Click（对象发送者，EventArgs e）{

```
 a++;

   txtBox1.Text = a.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:33:49.650

可以不创建全局字段并在文本框中存储点击次数。如果您有多个按钮，这将特别方便。

```
private void button1_Click(object sender, EventArgs e)
    {     
        if (txtBox1.Tag is int)
        {
            int a = (int)txtBox1.Tag;
            a++;

            txtBox1.Tag = a;

            txtBox1.Text = a.ToString();
        }
        else
        {
            txtBox1.Tag = 100;
            txtBox1.Text = 100;
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:25:18.857

在您的代码`a`中，每次单击按钮时，您都会一遍又一遍地为它分配一个值。

您应该在方法之外声明变量`button1_Click`：

```
class Window1
{
    int a = 100;
    ....
    private void button1_Click(object sender, EventArgs e)
        {
            a++;
            txtBox1.Text = a.ToString();
        }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:51:43.137

每次执行时间函数时，放置`int a = 100;`在里面`button1_Click(object sender, EventArgs e)`将设置为 100。`a`如果您需要一个计数器，请将其放在函数之外（然后它将只初始化一次。）并在执行函数时将其递增。

**解决方案**

```
int a = 100;
private void button1_Click(object sender, EventArgs e)
{        
    a++;

    txtBox1.Text = a.ToString();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T10:25:37.170

您需要声明`a`为包含您的方法的类的成员：

```
private int _a = 100;

private void button1_Click(object sender, EventArgs e)
{
    _a++;

    txtBox1.Text = _a.ToString();
} 
```

如果您不这样做，则每次单击按钮时都会有一个新实例，因此您将始终在文本框中看到 101。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-09T16:23:37.830

如果你想优化你的代码而不是首先设置文本框属性`text = 100` 并在按钮点击事件中只写一行代码

```
private void button1_Click(object sender, EventArgs e)
{            
    txtBox1.Text = (Convert.ToInt32(txtBox1.Text) + 1).ToString();
} 
```

如您所知，C# 逐行编译代码，并且您只有一行代码，它可以提供更快的性能。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-04-17T16:54:01.613

```
static int a = 100;

private void button1_Click(object sender, EventArgs e)
{        
     a++;

      txtBox1.Text = a.ToString();
} 
```

# shell - 在 shell 脚本中声明变量的方法

> ID：14748742
> 
> 赞同：1
> 
> 时间：2013-02-07T10:22:54.950
> 
> 标签：shell, variables, declaration

以下两种在shell脚本中声明变量的方法有什么区别？

```
var='some/path'

var=${var:-"some/path"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:31:35.183

```
var='some/path' 
```

总是将 var 设置为 some/path

```
var=${var:-"some/path"} 
```

如果 var 尚未设置，则只会将 var 设置为 some/path。如果它被设置，它的值不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:30:46.420

```
#this will set var value with some/path, 
#no matter var is empty or not (overwrite)
var='some/path' 

# this will set value of var to "some/path" 
#only if var is empty/or not declared yet.
var=${var:-"some/path"} 
```

# ios - UIWebView 显示之前加载的页面

> ID：14748743
> 
> 赞同：0
> 
> 时间：2013-02-07T10:22:57.287
> 
> 标签：ios, objective-c, uiwebview

在我的应用程序中，表格视图的每个单元格内都会显示一个 Web 视图。为了增加响应，我们决定将网页保存为图像。所以我制作了一个不可见的网页视图，并一页一页地加载并创建了页面的图像

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

图像已创建，但偶数图像丢失，奇数图像创建两次。也就是说，如果我正在创建四个图像，例如 image1, image2, image3, image4 。第一个和第二个图像是相同的 image2 将丢失，然后第三个和第四个相同并且 image4 将丢失。

有谁知道发生了什么？我怎样才能得到所有的图像？

编辑：保存图像的代码

```
 NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    CGSize pageSize = webView.frame.size;
    UIGraphicsBeginImageContext(pageSize);

    CGContextRef resizedContext = UIGraphicsGetCurrentContext();
    [[webView layer] renderInContext:resizedContext];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    NSData* imageData = UIImageJPEGRepresentation(image, 1.0);

    NSString  * filName;

        filName=[NSString stringWithFormat:@"%@_Potrait_%d.jpg",[currentSctionItem. titleName stringByReplacingOccurrencesOfString:@" " withString:@"_"],fileSavingAtIndex];

    NSString * filePath = [documentsDir stringByAppendingPathComponent:filName];
    [imageData writeToFile:filePath atomically:NO];
    NSLog(@"File created At path:%@",filePath);

    fileSavingAtIndex++;

        if (fileSavingAtIndex>=currentSctionItem.numberOfPagesLandscape) {
           //stop    
        }
        else{
            [webView loadHTMLString:[currentSctionItem potaraitHtmlAtThePage:fileSavingAtIndex] baseURL:baseURL]; 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T03:50:50.847

我通过为每个页面加载创建一个新的 Web 视图来修复它。这不是正确的方法，但现在可以了

```
if (fileSavingAtIndex>=currentSctionItem.numberOfPagesLandscape) {

            }
            else{
                UIWebView * webVw =[[UIWebView alloc] initWithFrame:PotraitwebViewFrame];
                 webVw.delegate=self;
                [webVw loadHTMLString:[currentSctionItem potaraitHtmlAtThePage:fileSavingAtIndex] baseURL:baseURL];
            } 
```

# android - Android向ListViews添加插入边框

> ID：14748746
> 
> 赞同：0
> 
> 时间：2013-02-07T10:23:03.033
> 
> 标签：android, android-listview

我创建了一个列表视图，想知道如何为我的列表项添加边框，如下图所示

![在此处输入图像描述](../Images/3ffbd056b537dabe158d98b78bd49b86.png)

分隔线drawable.xml

```
<?xml version="1.0" encoding="utf-8"?>
  <shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle" >
<solid android:color="#cdcdcd"/>    
<stroke android:width="1dp" android:color="#ffffff"/>
<padding android:left="0dp" android:top="0dp"
        android:right="0dp" android:bottom="0dp" />
</shape> 
```

列表视图.xml

```
 <ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:divider="@drawable/divider"
    android:dividerHeight="1.0sp"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:30:26.733

您可以在列表视图中添加分隔线。

```
 <ListView
        android:id="@+id/listView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:divider="@drawable/divider_line"
        android:layout_weight="1" >
    </ListView> 
```

或在自定义布局的底部添加一行，确保在为列表视图定义自定义布局时底部不应有填充或边距。

```
<RelativeLayout
    android:id="@+id/top_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"

     >

                ................      add views of your choice   

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:src="@drawable/divider_line" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T21:04:02.787

请在 oncreate() 方法中输入此代码

```
 listView = (ListView) findViewById(R.id.listchilds);

    int[] colors = { 0xFFDAD7CE, 0xFFF9F8F5, 0 }; 
    listView.setDivider(new GradientDrawable(Orientation.TOP_BOTTOM, colors));
    listView.setDividerHeight(2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:25:34.703

利用：

```
 android:divider="@drawable/mydivider" 
```

在您的 listView xml 属性中

# css - 等待完整图像加载时的占位符背景/图像？

> ID：14748750
> 
> 赞同：54
> 
> 时间：2013-02-07T10:23:19.873
> 
> 标签：css

我的页面上有几张图片。我发现页面在图像加载之前就开始渲染（这很好），但视觉效果不是很好。最初，用户会看到：

```
 --------hr--------
 text 
```

然后几毫秒后页面跳转显示：

```
--------hr--------
[           ]
[   image   ]
[           ]
text 
```

有没有一种简单的方法可以显示图像将占据**的宽度和高度的灰色背景图像，直到图像本身加载？**

复杂的因素是我事先不知道图像的高度和宽度：它们是响应式的，并且只是设置为`width: 100%`包含 div。这是 HTML/CSS：

```
<div class="thumbnail">
<img src="myimage.jpeg" />
<div class="caption">caption</div>
</div>
img { width: 100% } 
```

这是一个 JSFiddle 来说明基本问题：http: [//jsfiddle.net/X8rTB/3/](http://jsfiddle.net/X8rTB/3/)

我已经研究过[LazyLoad](http://www.appelsiini.net/projects/lazyload)之类的东西，但我不禁觉得必须有一个更简单的非 JS 答案。还是我事先不知道图像的高度是一个无法克服的问题？我确实知道图像的纵横比。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-05-13T08:53:10.780

不要直接引用图像，而是将其粘贴在 DIV 中，如下所示：

```
<div class="placeholder">
    <div class="myimage" style="background-image: url({somedynamicimageurl})"><img /></div>
</div> 
```

然后在你的 CSS 中：

```
.placeholder {
    width: 300;
    height: 300;
    background-repeat: no-repeat;
    background-size: contain;
    background-image: url('my_placeholder.png');
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2018-07-02T10:26:10.960

请记住 - 建议使用*div*背景方法的先前答案将通过将图像从*img*转换为*div*背景来改变图像的语义。这将导致搜索爬虫无法索引这些图像、浏览器延迟加载这些图像（除非您明确预加载它们）等。

这个问题的一个解决方案（虽然不使用*div背景方法）是为您的图像添加一个**div*包装器，并根据您需要提前知道的图像的纵横比为其添加*padding-top 。*下面的代码适用于纵横比为 2:1（高度为宽度的 50%）的图像。

```
<div style="width:100%;height:0; padding-top:50%;position:relative;">
  <img  src="<imgUrl>" style="position:absolute; top:0; left:0; width:100%;">
</div> 
```

当然 - 这种方法的主要缺点是您需要提前知道图像的纵横比。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-05-23T12:54:24.010

在开始研究延迟加载和其他 JavaScript 之前，有一件非常简单的事情需要检查。确保您正在加载的 JPEG 图像在启用“渐进式”选项的情况下保存！

这将导致他们迭代地加载图像，从低分辨率且下载速度更快的占位符开始，而不是在渲染之前等待最高分辨率的数据。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-10-22T17:38:54.147

随意*复制*这个：

```
<script>
    window.addEventListener("load", function () {
        document.getElementById('image').style.backgroundColor = 'transparent';
    });
</script>

<body>
    <image src="example.example.example" alt="example" id="image" style="background-color:blue;">
</body> 
```

我从这里得到这个：*[预加载器会继续加载，并且在加载内容时不会消失](https://stackoverflow.com/questions/49983243/preloader-keeps-on-loading-and-doesnt-disappear-when-the-content-is-loaded)*。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-25T17:29:37.940

这很简单...

此方案允许加载默认为占位符图像的个人资料照片。

您可以将多个 CSS 背景图像加载到一个元素中。当头像照片失败时，占位符图像默认显示为 div。

如果您使用通过 CSS 背景图像加载的 div 元素，则可以使用以下样式：

```
#avatarImage {
    background-image: url("place-holder-image.png"), url("avatar-image.png");
} 
```

```
<div id="avatarImage"></div> 
```

[![在此处输入图像描述](../Images/4e2de6cde41358f3cfedbbb54eaa1431.png)](https://i.stack.imgur.com/MJWxn.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-07T10:33:41.267

我唯一能想到的，为了尽量减少对文本的跳转效果，就是设置`min-height`图像将出现的位置，我会说 - 将其设置为您所知道的“较短”图像。这样跳转就不那么明显了，你不需要使用lazyLoad等等......但是它并不能完全解决你的问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-17T18:14:20.573

除了已经提到的所有解决方案之外，最后一个解决方案是隐藏文档，直到加载所有内容。

```
window.addEventListener('load', (e) => {
  document.body.classList.add('loaded');
});
```

```
body {
  opacity: 0;
}
body.loaded {
  opacity: 1;
}
```

```
<div id="sidebar">
  <img src="http://farm9.staticflickr.com/8075/8449869813_1e62a60f01_b.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-1.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-2.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-3.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-4.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-5.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-6.jpg" />
</div>
```

或者在加载所有内容时显示一些动画：

```
window.addEventListener('load', (e) => {
  document.body.classList.add('loaded');
});
```

```
.loader {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid #3498db;
  width: 70px;
  height: 70px;
  -webkit-animation: spin 2s linear infinite;
  /* Safari */
  animation: spin 2s linear infinite;
  position: absolute;
  left: calc(50% - 35px);
  top: calc(50% - 35px);
}

@keyframes spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

body :not(.loader) {
  opacity: 0;
}

body .loader {
  display: block;
}

body.loaded :not(.loader) {
  opacity: 1;
}

body.loaded .loader {
  display: none;
}
```

```
<div class="loader"></div>
<div id="sidebar">
  <img src="http://farm9.staticflickr.com/8075/8449869813_1e62a60f01_b.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-1.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-2.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-3.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-4.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-5.jpg" />
  <img src="https://www.nla.gov.au/sites/default/files/pic-6.jpg" />
</div>
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-18T16:27:56.373

这是一种天真的方法，

```
img {
    box-shadow: 0 0 10px 0 rgba(#000, 0.1);
} 
```

您可以操纵这些值，但它会在图像周围创建一个非常浅的边框，不会推送内容。图像可以在他们想要的任何时间加载，您可以获得良好的用户体验。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-20T20:03:56.923

您可以在开发者工具控制台中找到图像的宽度和高度，例如在 Chrome 中，您可以单击开发者工具控制台中的光标图标，当您将鼠标悬停在页面上时，它将突出显示页面中元素的所有属性.

这将帮助您找到图像的宽度和高度，因为如果您将鼠标悬停在图像顶部，它将为您提供图像的尺寸和其他更多属性。您还可以为每个图像制作一个单独的*div*，并使*div*相对于图像的宽度和高度。你可以这样做：

主*div*将包含图像以及图像下方的背景 div。

HTML：

```
<html>
  <head>
     <meta charset="utf-8">
  </head>
  <body>
      <div class=".mainDiv">
        <div class="below"></div>
        <img src="https://imgix.bustle.com/uploads/image/2020/2/13/da1a1ca4-95ec-40ea-83c1-4f07fac8b9b7-eqb9xdwx0auhotc.jpg" width="500"/>
       </div>
  </body>
</html> 
```

CSS：

```
.mainDiv {
  position: relative;
}

.below {
  position: absolute;
  background: #96a0aa;
  width: 500px;
  height: 281px;
}

img {
  position: absolute;
} 
```

结果将`.below`位于图像下方，因此当图像无法加载时，用户将看到灰色`.below`div。您看不到`.below`div，因为它隐藏在图像下方。您唯一会看到这种情况的是图像加载延迟时。这将解决您的所有问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-24T14:28:13.160

我有办法。但是您需要为此使用 JavaScript。

的HTML：

```
img = document.getElementById("img")
text = document.getElementById("text")
document.addEventListener("DOMContentLoaded", () => {
    img.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAA1BMVEWIiIhYZW6zAAAASElEQVR4nO3BgQAAAADDoPlTX+AIVQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwDcaiAAFXD1ujAAAAAElFTkSuQmCC";
    text.innerHTML = "Loaded but image is not";
});

window.onload = function() {
    img.src = "https://media.geeksforgeeks.org/wp-content/uploads/20190913002133/body-onload-console.png";
    text.innerHTML = "Image is now loaded";
};
```

```
#img {
    width: 400px;
    height: 300px;
}
```

```
<hr>

<img id="img" src="https://media.geeksforgeeks.org/wp-content/uploads/20190913002133/body-onload-console.png">

<p>Here is the Image</p>
<p id="text">Not Loaded</p>
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-18T07:25:35.653

这是我对[Tailwind CSS](https://tailwindcss.com/)所做的，但它只是 CSS：

```
img {
  @apply bg-no-repeat bg-center;

  body.locale-en & {
    background-image: url("data:image/svg+xml;utf8,<svg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'><text x='50%' y='50%' style='font-family: sans-serif; font-size: 12px;' dominant-baseline='middle' text-anchor='middle'>Loading…&lt;/text></svg>");
  }

  body.locale-fr & {
    background-image: url("data:image/svg+xml;utf8,<svg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'><text x='50%' y='50%' style='font-family: sans-serif; font-size: 12px;' dominant-baseline='middle' text-anchor='middle'>Chargement…&lt;/text></svg>");
  }
} 
```

# php - 在 PHP 测验中加载下一个数组项

> ID：14748753
> 
> 赞同：0
> 
> 时间：2013-02-07T10:23:28.097
> 
> 标签：php, arrays

我正在创建一个小型 PHP 测验，并且我有一个`Multidimensional Array`设置（其中包含我的问题标题和问题），然后我`rand_array`用来选择其中一个数组并将其显示到我的页面中。显示后，我用`unset($row);`它从我的中删除它，`Multidimensional Array`这样同一个问题就不会显示两次。

共有三个按钮（用于三个答案），单击该按钮会给用户 0、10 或 20 分。我用它来取回积分：

`if (isset($_POST["Answer1"])){
$points = $points + 20;
initialQuestions();
}`

我`initialQuestions();`再次运行以获得下一个问题，但这显然会重置我的整个数组，我如何让它跳到下一个问题，从数组中删除前一个项目最终导致它成为一个空白数组？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:33:54.770

初始问题（）？你的数组在哪里？使用 initialQuestions($question_array) 并返回没有当前问题的数组；

像这样的东西

```
$questions = array('your array');
function initialQuestions($questions) {
//get some question
//remove it from array
return $questions;//return this array
} 
```

然后

```
if (isset($_POST["Answer1"])){ $points = $points + 20; $questions = initialQuestions($questions); 
```

或全球化 $questions 数组

```
function initialQuestions() {
global $questions;
//get some question
//remove it from array
} 
```

但对我来说最好的是使用 $_SESSION 来存储您的 $question 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:25:16.170

使用数组拼接而不是未设置导致值被清空但密钥仍然存在

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T03:19:04.183

您可以从 all_question 数组中随机提取一个问题，并将这个“使用过的”问题保存到 Session 中，然后无论您在 POST 中做什么，下次当您从 all_question 中提取“下一个”问题时，您只需检查它是否已存储在“已使用”会话中，如果是，请再次拉取，如果没有，您得到了您想要的。

```
<?php
session_start();

$all_question = array(
    //put all your question here...
);

//pull a question out
$new_question = pull_question( $all_question );

//save this question to the 'used' session
$_SESSION['used_question'][] = $new_question;

?> 
```

# linux - vncconfig 无法在启动时自动工作

> ID：14748757
> 
> 赞同：1
> 
> 时间：2013-02-07T10:23:31.233
> 
> 标签：linux, unix, ksh, vnc

我正在使用 vnc 连接到 linux 系统（redhat）。每次我想将东西从 Windows 复制/粘贴到 linux 时，我都必须启动 vncconfig。我在互联网上搜索了如何在启动时自动启动 vncconfig。该行类似于 vncconfig -nowin &。我把这一行放在 ~/.vnc/xstartup 文件中。

但这不起作用。我必须在终端中再次输入命令 vncconfig 才能启用复制粘贴。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-30T03:13:33.487

可能是您在 exec 行之后或窗口管理器之后启动 vncconfig，而它应该在之前。如果您仍在寻找答案，最好将您的脚本副本发布以查看。

# curl - cURL 是否支持 FXP（Site2Site 传输）

> ID：14748759
> 
> 赞同：0
> 
> 时间：2013-02-07T10:23:43.237
> 
> 标签：curl, libcurl

维基百科文章说 cURL 不支持 FXP（文件交换协议）。

[http://en.wikipedia.org/wiki/Comparison_of_FTP_client_software](http://en.wikipedia.org/wiki/Comparison_of_FTP_client_software)

我正在使用 libcurl。是否有任何解决方法可以使用 libcurl 实现 Site2Site(FXP)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:43:25.750

不，libcurl 不支持该功能。它实际上曾经在几年前的某个时间点使用过，但是在重组中删除了该功能，并且由于没有人费心照顾代码这一事实。

这不是您可以轻松解决的问题，不。

# android - Android ListView addHeaderView 不适用于简单视图

> ID：14748762
> 
> 赞同：2
> 
> 时间：2013-02-07T10:23:52.990
> 
> 标签：android, android-layout, android-listview

我正在膨胀 a`View`并将其添加到 a`ListView`中，以将其用作`ListView`. `ListView`问题是除非我更改`View`为例如，否则视图不会呈现，我不能在这里`TextView`使用简单`View`的吗？为什么？

这是添加垫的代码：

```
LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
view top_pad = inflater.inflate(R.layout.search_pad, null);
list.addHeaderView(top_pad); 
```

pad XML 文件**layout.search_pad**

```
<?xml version="1.0" encoding="UTF-8"?>
<View 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent"
    android:layout_height="5dp"
    android:background="#333" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-29T16:31:00.597

可以将 View 类型的 Item 添加到您的标题中，问题是如果没有告诉视图应该至少有多高，并且视图不包含子项，则 ListView 会将其标题缩小到 0 高度.

所以为了修复我的实现，我在 XML 中添加了一个

```
android:minHeight="@dimen/minHeader" 
```

minHeader 在哪里

```
<dimen name="minHeader">5dp</dimen> 
```

这里再次标注 addHeaderView(View v)：

> 注意：首次引入时，只能在使用 setAdapter(ListAdapter) 设置适配器之前调用此方法。从 KITKAT 开始，可以随时调用此方法。如果 ListView 的适配器没有扩展 HeaderViewListAdapter，它将使用 WrapperListAdapter 的支持实例进行包装。

抱歉，来晚了，快乐编码。

# python - python中的动态模块导入（代码从3.2到3.3）

> ID：14748764
> 
> 赞同：0
> 
> 时间：2013-02-07T10:23:58.847
> 
> 标签：python, windows, python-3.x, python-import, python-module

我需要动态导入一个模块并创建一个类。
这是我在 Python 3.2 中的工作代码：

```
klass = {}
mod = __import__('sites.' + self.className + '_login', fromlist=[self.className])
klass[self.className] = getattr(mod, self.className)
klass[self.className](**self.args) 
```

该模块位于`sites`文件夹内。它被称为`my_site_login`该模块中的类`my_site`。

由于我升级到 Python 3.3，代码停止工作。我读到的`_____import_____`是替换为`importlib.import_module`. 我尝试了几种方法来做到这一点，但我无法让它工作。

这是我尝试过的：
[https ://stackoverflow.com/a/8790051/1095101](https://stackoverflow.com/a/8790051/1095101)

```
mod = getattr(import_module('sites.' + self.className + '_login'), self.className) 
```

我不记得我还尝试过什么。我能说的是，`print()`我在任何导入尝试后立即放置的所有内容都没有显示出来。我没有收到任何错误消息。它什么也不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:27:15.070

你想重组它；在`sites`包`__init__.py`文件中，导入*所有*需要动态导入的模块。

然后只使用属性访问：

```
import sites

mod = getattr(sites, self.className + '_login')
klass[self.className] = getattr(mod, self.className)
klass[self.className](**self.args) 
```

如果您的`my_site_login.py`模块是动态生成的，`importlib.import_module()`则可调用的工作非常简单：

```
importlib

mod = importlib.import_module('sites.{}_login'.format(self.className))
klass[self.className] = getattr(mod, self.className)
klass[self.className](**self.args) 
```

从交互式命令提示符可以正常工作：

```
>>> import importlib
>>> importlib.import_module('sites.my_site_login')
<module 'sites.my_site_login' from './sites/my_site_login.py'> 
```

在 Python 2.7、3.2 和 3.3 中进行了测试。

# android - 在 android 画布上绘制点

> ID：14748773
> 
> 赞同：1
> 
> 时间：2013-02-07T10:24:29.067
> 
> 标签：android, android-canvas, android-view

我正在开发提供追踪字母功能的 android 游戏应用程序。这是我第一次使用 android 图形。这里我使用 Canvas 作为我的应用程序。我想在画布上显示虚线字母，允许用户在屏幕上追踪字母。为此，我创建了虚线字母的图像并将这些图像设置在背景中。

现在我想在这些虚线字母图像上以特定的（x，y）坐标绘制点。但问题是 android canvas 取决于不同的屏幕尺寸。因此，我必须根据屏幕尺寸缩放这些点（x，y）坐标。我也参考[了这个](https://stackoverflow.com/questions/11739730/is-canvas-in-android-proportional-on-different-devices)链接，但不清楚。

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:38:23.520

首先找到屏幕的高度和宽度。

```
int width = game.getWindowManager().getDefaultDisplay().getWidth();
int height = game.getWindowManager().getDefaultDisplay().getHeight(); 
```

缩放背景以覆盖屏幕

```
Bitmap background_scaled=Bitmap.createScaledBitmap(background, width, height, true); 
```

转换 (x,y) --> (x_scaled,y_scaled)

```
int x_scaled=x*((float)width/(float)background.getWidth());
int y_scaled=y*((float)width/(float)background_getHeight()); 
```

画点

```
canvas.drawPoint(x_scaled,y_scaled,new Paint()); 
```

# c# - 检测应用程序的最后一次运行在 c# 中已崩溃

> ID：14748776
> 
> 赞同：-1
> 
> 时间：2013-02-07T10:24:42.743
> 
> 标签：c#, .net-4.0, crash

当我的应用程序开始调整时，我想知道它是否在最后一次运行，是否崩溃或成功关闭。请注意，应用程序应自行检测它，并且不要使用外部应用程序来检查它。

我如何使用 C# 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T10:27:27.360

应用程序应该在某种持久性存储上设置一个“正常关闭”标志，作为关闭时它做的最后一件事。

当它启动时，检查是否设置了这个标志。如果没有，你上次运行时要么崩溃，要么被强行终止。如果是，请将其重置以准备当前运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:37:46.763

您可以在 Program.cs 中使用

```
#if !DEBUG
AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
Application.ThreadException += new ThreadExceptionEventHandler(Application_ThreadException);
#endif

Application.EnableVisualStyles();
Application.SetCompatibleTextRenderingDefault(false);
Application.Run(new FrmMain()); 
```

这样您将处理所有错误，您可以记录它们，甚至在出现严重故障时重新启动应用程序并为用户恢复会话。注意`#if !DEBUG`条件，没有它会很难调试，因为所有未处理的异常都会落在这里。

# magento - 保存扩展配置数据 Magento

> ID：14748778
> 
> 赞同：0
> 
> 时间：2013-02-07T10:24:46.960
> 
> 标签：magento

我一直在试图弄清楚 magento 如何为 System.xml 中给出的模块保存配置数据。原因？我想在将用户提供的数据存储到数据库之前对其进行编辑。有什么线索吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:50:40.100

看一下`Mage_Core_Model_Store::setConfig`函数（和 getConfig 用于读取值）。您可能必须编写一个监听`store_save_before`事件的观察者。

Magento 将配置数据存储在`core_config_data`数据库表中 - path 列是 system.xml 文件中 XML 元素的层次结构，与用于从 config.xml 文件中读取默认值的 XPath 相同，并且 value 列包含保存的值。

当使用例如`Mage::getStoreConfig( 'path', $storeId );`Magento 访问数据时，首先在表中搜索路径值对，如果没有找到它，它会从 config.xml 文件中读取默认值。

# ios - 在从 iPhone 设备中删除应用程序之前，他们是否可以通过任何方式调用任何网络服务

> ID：14748782
> 
> 赞同：0
> 
> 时间：2013-02-07T10:25:02.930
> 
> 标签：ios

当用户从 iPhone 删除应用程序时，我想调用 Web 服务以取消设备授权。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:27:11.707

从 iPhone 中删除 App 时不会触发任何事件。所以很抱歉，但您在删除 App 时不能调用任何网络服务或做任何事情。

# ant - 如何使用 ANT 脚本将服务器置于调试模式

> ID：14748784
> 
> 赞同：0
> 
> 时间：2013-02-07T10:25:03.940
> 
> 标签：ant, weblogic

我可以使用 ANT 启动 Weblogic 服务器我现在需要在调试模式下启动此服务器，请帮助

使用以下脚本启动服务器。

```
 <target name="startserver" depends="stopserver">
        <wlserver dir="${domain.home}/${domain.name}" host="${host}" port="${port}" domainname="${domain.name}"
                  servername="${admin.server.name}" action="start" username="${username}" password="${password}"
                  beahome="${bea.home}" weblogichome="${weblogic.home}" verbose="true" noexit="true" protocol="t3"
                  classpath="${weblogic.home}/server/lib/weblogic.jar">
            <jvmarg value="-server"/>
            <jvmarg value="-Xms256m"/>
            <jvmarg value="-Xmx512m"/>
            <jvmarg value="-XX:PermSize=128m"/>
            <jvmarg value="-XX:MaxPermSize=256m"/>
        </wlserver>
    </target> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:27:34.190

您可以在 ant 任务中添加以下 jvmarg。

```
-Xdebug -Xnoagent -Xrunjdwp:transport=dt_socket,address=8473,server=y,suspend=n -Djava.compiler=NONE 
```

# css - 无法使@font-face 在 IE 上工作

> ID：14748790
> 
> 赞同：0
> 
> 时间：2013-02-07T10:25:23.260
> 
> 标签：css, font-face

我不能让@font-face 在 IE 上工作。我尝试了很多建议的方法，但似乎没有任何效果。

*   我在这里生成了我的字体：[fontsquirrel](http://www.fontsquirrel.com/fontface/generator)
*   我为这个网站添加了 mime 类型“.woff”。

CSS：

```
@font-face {
  font-family: 'fbahava_regularregular';
  src: url('http://2send.co.il/Content/Fonts/fbahava-regular-webfont.eot');
  src: url('http://2send.co.il/Content/Fonts/fbahava-regular-webfont.eot?#iefix') format('embedded-opentype'),
  url('http://2send.co.il/Content/Fonts/fbahava-regular-webfont.woff') format('woff'),
  url('http://2send.co.il/Content/Fonts/fbahava-regular-webfont.ttf') format('truetype'),
  url('http://2send.co.il/Content/Fonts/fbahava-regular-webfont.svg#fbahava_regularregular') format('svg');
  font-weight: normal;
  font-style: normal;
}

.btn_submit {
    font-family: 'fbahava_regularregular' ,Arial;
    height: 56px;
    padding: 0px 35px;   
    background-image: url('../images/btn_pix.png');
    border: 0 solid white;
    font-size: 48px;
    border-radius: 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    box-shadow: 0 1px 0 #BE331B inset, 1px 0 0 #A42A15 inset, -1px 0 0 #A42A15 inset, 0 -1px 0 #8C200E inset, 0 2px 0 rgba(255, 255, 255, 0.3) inset, 0 0 4px rgba(255, 255, 255, 0.3) inset, 0 1px 2px rgba(0, 0, 0, 0.3);
    -webkit-box-shadow: 0 1px 0 #BE331B inset, 1px 0 0 #A42A15 inset, -1px 0 0 #A42A15 inset, 0 -1px 0 #8C200E inset, 0 2px 0 rgba(255, 255, 255, 0.3) inset, 0 0 4px rgba(255, 255, 255, 0.3) inset, 0 1px 2px rgba(0, 0, 0, 0.3);
    -moz-box-shadow: 0 1px 0 #BE331B inset, 1px 0 0 #A42A15 inset, -1px 0 0 #A42A15 inset, 0 -1px 0 #8C200E inset, 0 2px 0 rgba(255, 255, 255, 0.3) inset, 0 0 4px rgba(255, 255, 255, 0.3) inset, 0 1px 2px rgba(0, 0, 0, 0.3);
    cursor: pointer;
} 
```

我被卡住了，任何想法都会受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:29:51.577

你应该单引号你是参考：

```
.btn_submit{
    font-family: 'fbahava_regularregular' ,Arial; 
} 
```

# ruby-on-rails - 在导轨中穿线

> ID：14748794
> 
> 赞同：0
> 
> 时间：2013-02-07T10:25:31.247
> 
> 标签：ruby-on-rails, multithreading

我一次初始化了 250 个线程，它们返回更新数据库中的一些数据。我在我的 rails 2 应用程序中使用 Postgresql 数据库。我设置了池大小 100 和最大连接数 100，但问题是在 100 个连接后，剩余线程会导致诸如“致命错误：客户端太多”之类的问题。所以现在我想要的是，只要任何线程完成其进程，然后终止该线程。所以要实现这一点我该怎么办？

这是我的代码：

```
consider detail = "contains 250 items in an array"
 threads = []
      detail.each do |item|
          threads << Thread.new( item) do | item |
           # block of code
          end
      end
   threads.each { | t | t.join } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:42:17.360

我希望您使用的是实施了连接池的 Rails 2.2。检查这个：

[http://guides.rubyonrails.org/2_2_release_notes.html#connection-pooling](http://guides.rubyonrails.org/2_2_release_notes.html#connection-pooling)

这个[http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html)

# css - CSS3：如何为缩放和旋转设置单独的缓动功能

> ID：14748795
> 
> 赞同：1
> 
> 时间：2013-02-07T10:25:31.290
> 
> 标签：css, css-transitions

这是我做动画的CSS。

> 变换：缩放（0）旋转Y（180度）；

我必须为缩放和旋转提供单独[的过渡定时功能。](http://www.w3schools.com/cssref/css3_pr_transition-timing-function.asp)但根据我的研究，我只能给出如下所示的内容，这实际上为缩放和旋转提供了相同的缓动功能。

> 过渡：转换 .7s 缓进出；

任何人都知道为缩放和旋转提供单独的计时功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:39:03.870

您可以创建多个动画，第一个将缩放，第二个将旋转，并为每个动画分配不同的缓动持续时间。然后可以将多个动画分配给单个元素。

请参阅本指南[http://css-tricks.com/snippets/css/keyframe-animation-syntax/](http://css-tricks.com/snippets/css/keyframe-animation-syntax/)了解如何实现这一点

引用链接：

> 多个动画 - 您可以用逗号分隔值以在选择器上声明多个动画。

```
.animate-this {
   animation: 
      first-animation 2s infinite, 
      another-animation 1s;
} 
```

# mysql - 插入mysql时出错？

> ID：14748796
> 
> 赞同：0
> 
> 时间：2013-02-07T10:25:31.553
> 
> 标签：mysql, join, insert

```
 INSERT INTO project_dim
            (project_id,
             project_name,
             client_name,
             list_type,
             project_start_date,
             project_create_date,
             actual_project_end_date,
             scheduled_end_date,
             created_by,
             project_manager,
             project_specialty,
             quota_country,
             quota,
             create_date,
             update_date)
VALUES      ( (SELECT p.project_id,
                      p.project_name,
                      p.client_name,
                      p.list_type,
                      pt.project_start_date,
                      Date(p.created_date),
                      pt.actual_completion_date,
                      pt.scheduled_completion_date,
                      p.created_by,
                      Concat(ep.first_name, ' ', ep.last_name),
                      sp.specialty_name,
                      pqd.country,
                      pqd.quota
               FROM   project_details p,
                      project_tracker pt,
                      employee_details ep,
                      specialty sp,
                      project_quota_details pqd
               WHERE  p.project_tracker_id = pt.project_tracker_id
                      AND p.project_id = pqd.project_id
                      AND pqd.specialty_id = sp.specialty_id),
              NULL,
              NULL ) 
```

我在 select 语句的值之后插入 null，null。是不是有点不对劲？我收到此错误消息

# 1241 - 操作数应包含 1 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:37:11.610

```
INSERT INTO project_dim
        (project_id,
         project_name,
         client_name,
         list_type,
         project_start_date,
         project_create_date,
         actual_project_end_date,
         scheduled_end_date,
         created_by,
         project_manager,
         project_specialty,
         quota_country,
         quota,
         create_date,
         update_date)
VALUES      ( SELECT p.project_id,
                  p.project_name,
                  p.client_name,
                  p.list_type,
                  pt.project_start_date,
                  Date(p.created_date),
                  pt.actual_completion_date,
                  pt.scheduled_completion_date,
                  p.created_by,
                  Concat(ep.first_name, ' ', ep.last_name),
                  sp.specialty_name,
                  pqd.country,
                  pqd.quota,
          null,
          null
           FROM   project_details p,
                  project_tracker pt,
                  employee_details ep,
                  specialty sp,
                  project_quota_details pqd
           WHERE  p.project_tracker_id = pt.project_tracker_id
                  AND p.project_id = pqd.project_id
                  AND pqd.specialty_id = sp.specialty_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:30:39.960

尝试使用`INSERT INTO...SELECT..FROM`而不是`INSERT INTO..VALUES`. 您可以将`null`值包含为列。

您还缺少`JOIN`table 的条件`employee_details ep`。您还需要添加：

```
INSERT INTO project_dim 
(
  project_id, project_name, client_name, list_type,
  project_start_date, project_create_date, actual_project_end_date,
  scheduled_end_date, created_by, project_manager, project_specialty,
  quota_country, quota, create_date, update_date
)
SELECT p.project_id,
       p.project_name,
       p.client_name,
       p.list_type,
       pt.project_start_date,
       Date(p.created_date),
       pt.actual_completion_date,
       pt.scheduled_completion_date,
       p.created_by,
       Concat(ep.first_name, ' ', ep.last_name),
       sp.specialty_name,
       pqd.country,
       pqd.quota, 
       NULL, 
       NULL
FROM   project_details p
INNER JOIN project_tracker pt
  ON p.project_tracker_id = pt.project_tracker_id
INNER JOIN project_quota_details pqd
  ON p.project_id = pqd.project_id
INNER JOIN specialty sp
  ON pqd.specialty_id = sp.specialty_id
INNER JOIN employee_details ep
  ON       --- add join condition here for this table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:30:28.150

最好删除 values 子句并只使用 SELECT （在 SELECT 子句中有几个空列用于您需要的空白列）。

像这样的东西： -

```
INSERT INTO Project_Dim 
( Project_Id, Project_Name, Client_Name, List_Type, Project_Start_Date, Project_Create_Date, Actual_Project_END_Date, Scheduled_End_Date, Created_By, Project_Manager, Project_Specialty, Quota_Country, Quota, Create_Date, Update_Date

) 
select p.Project_Id, p.Project_Name, p.Client_Name, p.List_Type, pt.Project_Start_Date, DATE(p.Created_Date), pt.Actual_Completion_Date, pt.Scheduled_Completion_Date, p.Created_By, CONCAT(ep.First_Name, ' ', ep.Last_Name), sp.Specialty_Name,pqd.Country,pqd.Quota, null, null from Project_Details p, Project_Tracker pt, Employee_Details ep, Specialty sp, Project_Quota_Details pqd where p.Project_Tracker_Id=pt.Project_Tracker_Id and p.Project_Id=pqd.Project_Id and pqd.Specialty_Id = sp.Specialty_Id 
```

# jmeter - 如何从 Eclipse 运行 jmeter 脚本

> ID：14748797
> 
> 赞同：5
> 
> 时间：2013-02-07T10:25:31.740
> 
> 标签：jmeter, jmeter-plugins

请让我知道是否可以从 Eclipse 运行 jmeter 脚本？如果是，请告诉我这个过程。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-09-18T12:00:50.960

**使用 Eclipse 外部工具**

1.  *Eclipse 菜单*：运行 -> 外部工具 -> 外部工具配置...
2.  对话框*外部工具配置*打开
3.  从左侧的树中选择*程序*
4.  使用*鼠标左键*并从鼠标菜单中选择*新建*或使用左侧图标（树上方）并选择*新建启动配置*
5.  在树的右侧，打开面板，可以在其中填写此新 lauch 配置的详细信息
6.  输入*名称*：**JMeter 示例**
7.  输入为*位置*：**安装 JMeter 的位置** （在 Windows 上类似`C:\Program Files\apache\jmeter\bin\jmeter.bat`）（在 Linux 上类似`/opt/apache/jmeter/bin/jmeter`）
8.  输入*工作目录*：**${workspace_loc:/jmeter-project}**（使用按钮**Browse Workspance...**，在 JMeter 脚本所在的工作区中选择项目。这里`jmeter-project`显示了项目）
9.  使用按钮**Run**关闭对话框，该按钮应启动 JMeter。

**信息**图标*Stop*不起作用，因为这实际上启动了一个脚本，该脚本启动了 Java 应用程序 JMeter。

**可选地添加参数**

1.  Enter as *Arguments* :（**`-t src\test\jmeter\sample.jmx`**要启动的 JMeter 脚本的路径）
2.  输入为*参数*：（**`-q src\test\jmeter\environment.properties`**一些外部属性文件，使用`${__P(key-name)}`）

有关详细信息，请参阅[JMeter 选项](http://jmeter.apache.org/usermanual/get-started.html#options)和 [参数化测试](http://jmeter.apache.org/usermanual/best-practices.html#parameterising_tests)。

# php - 使用 php 和 smtp 发送电子邮件时必须遵守规则，以避免被标记为垃圾邮件或被过滤

> ID：14748801
> 
> 赞同：2
> 
> 时间：2013-02-07T10:25:34.550
> 
> 标签：php, smtp, email-spam, spam-prevention

我正在编写一个带有登录系统的 PHP 脚本，一旦注册过程成功完成，它就会发送激活电子邮件，但是我注意到，对于某些电子邮件提供商，我的电子邮件通知直接进入垃圾邮件文件夹或被智能屏幕（hotmail）过滤，而对于一些不甚至不会在垃圾邮件文件夹中发送。

我正在使用这个类来发送我的电子邮件：

[http://forums.eukhost.com/f15/php-class-send-mail-via-smtp-auth-14644/](http://forums.eukhost.com/f15/php-class-send-mail-via-smtp-auth-14644/)

我对附件没有特殊要求，但我想知道是否缺少某些内容，我可以做些什么来避免电子邮件过滤器。

标题是否需要包含额外信息？

消息大小不应该低于一定大小？

还有什么要遵守的规则吗？

我并没有真正向任何人发送垃圾邮件，只是激活电子邮件和通知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T10:46:24.803

要通过 Gmail 垃圾邮件过滤器获取我的网络应用程序的电子邮件，我必须：

1) 在邮件服务器上设置[DKIM](http://en.wikipedia.org/wiki/DKIM)并签署所有外发电子邮件
2) 设置[SPF](http://en.wikipedia.org/wiki/SPF_record)记录
3) 确保电子邮件是多部分的（包含 HTML 和纯文本），而不仅仅是 HTML
4) 确保 HTML 电子邮件格式正确（html 打开和关闭标签等）。
5) 确保邮件服务器的反向 DNS 设置正确

这对我来说是一个漫长的夜晚，让所有这些杂物都设置好了。但是，这些步骤似乎为我赢得了足够的“也许不是垃圾邮件”积分来通过。您还可以使用第三方电子邮件主机，专门确保与网络应用程序相关的电子邮件得到传递。

# php - 在 MySQL 外域中搜索

> ID：14748804
> 
> 赞同：0
> 
> 时间：2013-02-07T10:25:49.467
> 
> 标签：php, mysql, sql, foreign-keys

我对 PHP 和 MySQL 还很陌生。

我有两个表如下：

```
1.`users`: `id`//primary key
         : `name`//user's name

2.`events`: `u_id`//index key and foreign field to users' id
          : `u_name` 
```

用户将`id`在表单中输入一个。这`id`将在`users`表格中进行搜索，并将获取相关详细信息并将其插入`events`表格中。

我已经创建了外部字段，直到现在我创建了一个函数，该函数将其`id`作为变量并将表中的详细信息`users`作为变量返回，然后将其插入`events`表中。但是，这意味着使用“很多”变量，我认为外国字段有什么用。我仍在学习 PHP，不知道如何使用 FOREIGN 字段从一个表查找和插入到另一个表。我只知道如何创建外国领域。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:35:47.257

这就是你在说的吗？
这就是创建外键的方式。

```
CREATE TABLE parent (id INT NOT NULL,
                     PRIMARY KEY (id)
);
CREATE TABLE child (id INT, parent_id INT,
                    INDEX par_ind (parent_id),
                    FOREIGN KEY (parent_id) REFERENCES parent(id)
                      ON DELETE CASCADE
); 
```

如果我不明白你的问题，请道歉

**更新**

```
INSERT table1 (col1, col2, col3)
SELECT col1, col2, col3
FROM table2
WHERE col1 = 'xyz' 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T16:45:28.907

您不需要将用户名存储在事件表中。外键的要点是您只需将用户 ID 存储在事件表中，因为这是对用户的 REFERENCE。

要获取事件的用户名，比如事件编号 6，您可以这样做

```
select name from users join events on users.id = events.u_id where events.id = 6 
```

因此，您不应该尝试将用户数据插入事件表中。只需将 ID 放在那里，您就可以使用外键检索用户数据。

# c# - MobileServiceInvalidOperationException 500 - 插入表时发生内部服务器错误

> ID：14748805
> 
> 赞同：1
> 
> 时间：2013-02-07T10:26:00.360
> 
> 标签：c#, azure, windows-8, microsoft-metro, azure-mobile-services

我想制作一个将 blob 上传到 azure 存储的示例应用程序。我已经关注[了这个](http://code.msdn.microsoft.com/windowsapps/Upload-File-to-Windows-c9169190)和[这个](http://www.nickharris.net/2012/11/how-to-upload-an-image-to-windows-azure-storage-using-mobile-services/)，两种方式都抛出了`MobileServiceInvalidOperationException`500 - 内部服务器错误。请尽快给我解决方案。谢谢。

这是错误日志

> 插入错误：{ AlbumId：22，
> 名称：'ff'，
> 描述：'ff'，ThumbnailUrl：空，
> ThumbnailFileName：'73a594b1-1abb-476d-a1ce-73a12d6ee278_thumbnail.png'，ImageUrl：空，文件名：'73a594b1-1abb -476d-a1ce-73a12d6ee278.png', imageurl:' [https://xxxxxxx.blob.core.windows.net/mypictures-undefined/undefined?se=2013-02-07T10%3A44%3A57Z&sr=b&sp=w&sig=qDBnnVOyo8XCNSUNJcn49IMcN4laDIgjZ8oM9TdiHBI %3D](https://xxxxxxx.blob.core.windows.net/mypictures-undefined/undefined?se=2013-02-07T10%3A44%3A57Z&sr=b&sp=w&sig=qDBnnVOyo8XCNSUNJcn49IMcN4laDIgjZ8oM9TdiHBI%3D) ', thumbnailurl: ' [https://xxxxxxx.blob.core.windows.net/mypictures-undefined/undefined?se=2013-02-07T10%3A44%3A57Z&sr=b&sp=w&sig=qDBnnVOyo8XCNSUNJcn49IMcN4laDIgjZ8oM9TdiHBI%3D](https://xxxxxxx.blob.core.windows.net/mypictures-undefined/undefined?se=2013-02-07T10%3A44%3A57Z&sr=b&sp=w&sig=qDBnnVOyo8XCNSUNJcn49IMcN4laDIgjZ8oM9TdiHBI%3D) ' }
> {
> [错误：[Microsoft][SQL Server Native Client 10.0][SQL Server]在 INSERT 的 SET 子句或列列表中多次指定列名“ImageUrl”。在同一个子句中，一列不能分配多个值。修改子句以确保一列只更新一次。如果此语句更新或将列插入视图，列别名可以隐藏代码中的重复。] sqlstate: '42000', code: 264
> }

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-07T15:55:32.530

您在同一个 (JavaScript) 对象上有两个属性，它们的大小写不同，但它背后的 Windows Azure SQL 数据库实例在列名方面不区分大小写。

似乎您的 C# 类包含一个名为`ImageUrl`（注意大小写）的属性，然后在您的表的插入脚本中（根据[您引用的参考](http://code.msdn.microsoft.com/windowsapps/Upload-File-to-Windows-c9169190)），您正在`item.imageurl`使用所有小写字母。

你可以将[DataMember](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datamemberattribute%28v=vs.110%29.aspx)属性添加到你的 C# 属性中，你会没事的，我怀疑。

```
[DataMember(Name = "imageurl")]
public String ImageUrl { get; set; } 
```

相同的`ThumbnailUrl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:02:33.660

[我已经通过这篇文章](http://www.windowsazure.com/en-us/develop/mobile/tutorials/upload-images-to-storage-dotnet/)的参考解决了这个问题。我的一个建议是，如果您想要将 blob 上传到 Azure 的演示，请访问该链接，不要在[MSDN 示例](http://social.msdn.microsoft.com/Forums/is/azuremobile/thread/code.msdn.microsoft.com/windowsapps/Upload-File-to-Windows-c9169190)中浪费您的时间。

# web-services - 自动生成 DTO

> ID：14748809
> 
> 赞同：1
> 
> 时间：2013-02-07T10:26:21.650
> 
> 标签：web-services, jakarta-ee, maven, jpa, dto

我有一个 Web 服务，它公开了数百个从 JPA 实体派生的 DTO。是否可以自动生成此 DTO （**而不是映射）？**

谢谢。

# webview - 在 Webview 中增加 HTML 的字体

> ID：14748811
> 
> 赞同：0
> 
> 时间：2013-02-07T10:26:22.340
> 
> 标签：webview, visual-studio-2012, windows-store-apps

我正在设计 Windows 8 Reader 应用程序，我必须使用控件在“Webview”中显示 HTML 内容。我现在得到了这个。我的问题是如何在 webview 中增加 HTML 内容中的字体。我不知道如何开始。任何人都可以帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:34:00.737

我主要为android开发。但我确实有一个朋友遇到了同样的问题。你可以做些什么来解决这个问题是为 webview 调用 javascript 。

这样您就可以从您调用的 javascript 中编辑网站的样式。

但这就是我现在要寻找的方向..

**编辑..**

它应该是这样的：

```
 YourWebView.InvokeScript("your script", null); 
```

# jquery - jQuery AJAX POST 上缺少 Location 标头

> ID：14748820
> 
> 赞同：6
> 
> 时间：2013-02-07T10:26:56.393
> 
> 标签：jquery, ajax, xmlhttprequest

我正在使用 jQuery 执行 AJAX POST，如下所示：

```
self.post = function (path, data) {
    return $.ajax({
        url: this.createUri(path),
        type: "POST",
        contentType: "application/json",
        dataType: "json",
        data: ko.toJSON(data)
    });
}; 
```

这里我只返回 AJAX Deferred 对象。响应由另一个对象处理：

```
api.post(menuItemsUri, self.newItem)
    .done(function (data, textStatus, request) {
        console.log(request.getResponseHeader("Location")); // undefined
    })
    .always(function () {
        // reset the current item
        self.newItem.update({});
    }); 
```

服务器返回一个`201 Created`Response 并设置 Location 标头。我可以在 Chrome 网络选项卡中看到这一点：

```
Access-Control-Allow-Origin:*
Cache-Control:no-cache
Content-Length:0
Date:Thu, 07 Feb 2013 10:25:04 GMT
Expires:-1
Location:http://localhost:49978/sites/1/menus/65/items/19
Pragma:no-cache 
```

`XmlHttpRequest`但是，在 jQuery AJAX 回调中传递的对象中缺少 Location 标头。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-07T15:58:06.880

问题是这是一个 CORS 请求，根据[CORS 规范](http://www.w3.org/TR/cors)，仅公开了以下“简单响应标头”：

*   缓存控制
*   内容-语言
*   内容类型
*   过期
*   最后修改
*   编译指示

要公开其他标头，您需要将它们包含在[Access-Control-Expose-Headers](http://www.w3.org/TR/cors/#access-control-expose-headers-response-header)标头中，例如：

```
Access-Control-Expose-Headers: location 
```

进行此更改后，XmlHttpRequest 对象可以通过`getResponseHeader("Location")`.

对于正常（非 CORS）请求，这不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:50:11.130

您是手动添加位置标头，还是希望服务器脚本自动返回它？因为它可能实际上没有设置。
除非您要重定向，否则我希望它不会被设置，并且 Chrome 实际上可能只是将其本身添加为“有用”。

也许只是尝试在脚本中明确设置位置标头，那么它肯定应该在那里，但这可能会产生不希望的副作用。

# spring-mvc - 将请求参数的子集映射到spring mvc中的对象

> ID：14748826
> 
> 赞同：6
> 
> 时间：2013-02-07T10:27:07.387
> 
> 标签：spring-mvc

在我们的 web 应用程序中，使用 Spring MVC 3.2 我们显示了许多不同对象的分页列表，并且列表中其他页面的链接构造如下：

```
/servlet/path?pageNum=4&resultsPerPage=10&sortOrder=ASC&sortBy=name 
```

尽管 URL 中可能还有其他请求参数（例如，搜索过滤器）。

所以我们有这样的控制器方法：

```
@RequestMapping(method = RequestMethod.GET, value="/ajax/admin/list")
public String ajaxlistGroups(Model model,
   @RequestParam(value="pageNumber",required=false,defaultValue="0") Long pageNumber,
   @RequestParam(value="resultsPerPage",required=false,defaultValue="10") int resultsPerPage,
   @RequestParam(value="sortOrder",required=false,defaultValue="DESC") String sortOrder,
 @RequestParam(value="orderBy",required=false,defaultValue="modificationDate")String orderBy)  {
// create a PaginationCriteria object to hold this information for passing to Service layer
// do Database search
// return a JSP view name

} 
```

所以我们最终得到了这个笨拙的方法签名，在应用程序中重复了几次，每个方法都需要创建一个 PaginationCriteria 对象来保存分页信息，并验证输入。

如果这些请求参数存在，有没有办法自动创建我们的 PaginationCriteria 对象？例如，将以上内容替换为：

```
@RequestMapping(method = RequestMethod.GET, value="/ajax/admin/list")
public String ajaxlistGroups(Model model, @SomeAnnotation? PaginationCriteria criteria,
  )  {
 ...
   } 
```

即，在 Spring 中有没有办法从常规 GET 请求中获取定义的 requestParams 子集，并自动将它们转换为对象，以便在 Controller 处理程序方法中使用？我以前只使用过@ModelAttribute，这似乎不正确。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T11:41:31.720

Spring 3.2 应该自动将请求参数映射到自定义 java bean。

```
@RequestMapping(method = RequestMethod.GET, value="/ajax/admin/list")
public String ajaxlistGroups(Model model, PaginationCriteriaBean criteriaBean,
  )  {
 //if PaginationCriteriaBean should be populated as long as the field name is same as 
 //request parameter names.
} 
```

我不确定 Spring 如何神奇地实现这一点（没有 @ModelAttribute），但上面的代码对我有用。

还有另一种方式可以达到同样的目的，其实可以实现更多，那就是spring AOP。

```
<bean id="aspectBean" class="au.net.test.aspect.MyAspect"></bean>
<aop:config>
    <aop:aspect id="myAspect" ref="aspectBean">
    <aop:pointcut id="myPointcut"
        expression="execution(* au.net.test.web.*.*(..)) and args(request,bean,..)" />
    <aop:before pointcut-ref="myPointcut" method="monitor" />
    </aop:aspect>
</aop:config> 
```

在应用程序上下文中，我们声明**Aspect** bean 以及**Pointcut**以及**建议**，在您的情况下是**在建议之前**

以下是源代码

```
 public class PaginationCriteriaBean {

        private String id;
        private String name;

        public String getId() {
            return id;
        }

        public void setId(String id) {
            this.id = id;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }
    }
//custom Aspect
public class MyAspect {

    public void monitor( HttpServletRequest request,PaginationCriteriaBean bean){
        //populate your pagination bean
        bean.setId(request.getParameter("id"));
        bean.setName("my new name");
    }
}

    @RequestMapping(value="/app")
    public String appRoot(HttpServletRequest request,PaginationCriteriaBean bean){
        System.out.println(bean.getId());
        System.out.println(bean.getName());
        return "app";
    } 
```

通过这样做，切面将拦截spring控制器并根据请求参数填充PaginationCriteriaBean，您甚至可以更改请求中的原始值。通过这个 AOP 实现，您可以对分页应用更多逻辑，例如日志记录和验证等。

# google-chrome - CSS显示：阻止在Windows 7上的google-chrome上不起作用

> ID：14748827
> 
> 赞同：1
> 
> 时间：2013-02-07T10:27:09.450
> 
> 标签：google-chrome, css

我在css中遇到了一个奇怪的问题。您可以在[此处](http://mymovierack.com/site/stackoverflow)查看带有复选框的表单。带有复选框的文本未正确对齐。它分成两行。它在 Linux 和 opera 上的 FF、IE、Chromium 上运行良好，但在 Windows 7 上的 chrome 上运行良好。
现在这是有趣的部分。右键单击任何感觉，例如。必须监视和检查元素。这是第一个匹配的 CSS 规则

```
.addCheckbox label, .addRadio label {
font-size: 15px;
} 
```

编辑它并添加`display:block`. 所以新的CSS将是

```
.addCheckbox label, .addRadio label {
font-size: 15px;
display: block;
} 
```

现在通过取消选中禁用新添加的 CSS `display:block`，瞧，您可以看到完美呈现的表单。所以我用相同的 CSS 得到不同的渲染。任何人都知道如何解决这个问题？相同的 CSS 最初在 windows 7 上的 chrome 上运行良好，直到最近有人指出。

浏览器信息：Windows 7 上的 Chrome 24.0.1312.57

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:00:54.457

从复选框类中删除 float:left，我认为这里不需要。并用左边距调整标签标签。

此外，从此类中：.radio.inline、.checkbox.inline... 尝试删除 display: inline-block 并使用填充和边距控制 li 和 span。要记住我，请尝试使用 display: block 作为记住我的标签。

希望能帮助到你。

# ruby-on-rails-3 - 向 Rails 添加复杂的 JS 插件时的最佳实践是什么？

> ID：14748833
> 
> 赞同：1
> 
> 时间：2013-02-07T10:27:18.360
> 
> 标签：ruby-on-rails-3, jquery-plugins, javascript

通常，需要在 Rails 中使用复杂的 JS 库。书籍和指南建议，对于所有 js/css/images，我们应该使用资产管道

现在，当我的 JS 需要额外的图像、css 和类似的东西时应该怎么做？我能找到的所有有用的东西都是 [http://railsapps.github.com/rails-javascript-include-external.html](http://railsapps.github.com/rails-javascript-include-external.html)

如果我在资产管道的文件夹中分配资源，插件通常会中断。将所有内容都放在一个文件夹中似乎非常不合规矩，您可能会失去资产管道机制的所有好处

在这种情况下，您认为最佳做法是什么？

**更新：**事实上，我正在使用第三方轮播，它需要大量资源，这些资源与轮播脚本本身存储在同一目录中。由于该脚本的编码/记录不正确，因此重新排列其资源非常困难。

由于我在网上没有找到任何关于它的信息，所以我同意 Mike 的回答：

**如果您必须将所有内容放在同一个文件夹中，请在 vendor/assets 目录中的某处进行**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:29:34.117

对于 3rd 方 JS、图像和 CSS，将它们添加到`vendor/assets`（例如 3rd 方 JS 到`vendor/assets/javascripts`、图像到`vendor/assets/images`和 CSS 到`vendor/assets/stylesheets`）。

如果您*必须*在与 JS 代码相同的文件夹中添加图像，那么至少它不会污染您的工作目录。

不要忘记，如果没有加载第 3 方 JS 文件，您可能需要添加`//= require_tree ../../../vendor/assets/javascripts/.`到您的文件中。`application.js`

# sql - 在连接表和聚合函数的访问 SQL 查询中使用 DATEPART 函数

> ID：14748836
> 
> 赞同：0
> 
> 时间：2013-02-07T10:27:23.740
> 
> 标签：sql, ms-access, datepart

我想在表格中选择日期的年份和季度部分，而不是整个日期。我构建了以下查询来实现这一点：

```
SELECT Clients.ClientID,
       Sum(AccountVals.ValuationAmount) AS SumOfValuationAmount,
       Datepart("YYYY", AccountVals.valuationAmount) AS valYear,
       Datepart("Q", AccountVals.valuationAmount) AS valQuarter
FROM   (Accounts
        INNER JOIN Clients
          ON Accounts.ClientID = Clients.ClientID)
       INNER JOIN AccountVals
         ON Accounts.AccountID = AccountVals.AccountID
GROUP  BY Clients.ClientID,
          SumOfValuationAmount,
          valYear,
          valQuarter; 
```

尽管我已经成功地使用`DATEPART`了一个简单的选择查询，但这个查询既是一个聚合函数又是一个链接表的事实让我很震惊。有任何想法吗？

编辑：我意识到我的查询没有任何标准，这意味着它可能试图聚合来自不同日期的结果，因此它无法显示日期部分。我尝试添加类似`HAVING valYear = 2012 AND valQuarter = 3`但得到相同的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:31:23.713

我认为您不能在`group by`子句中使用别名，至少在没有子查询的情况下不能。一种解决方案是在组中重复精确的表达式，fe：

```
group by
        Clients.ClientID
,       datepart("YYYY", AccountVals.valuationAmount) 
,       datepart("Q", AccountVals.valuationAmount) 
```

# meteor - 流星路由器 + PhantomJS

> ID：14748840
> 
> 赞同：2
> 
> 时间：2013-02-07T10:27:33.213
> 
> 标签：meteor, phantomjs

我的 Meteor 应用程序使用 Meteor 路由器进行导航，并使用 Spiderable 插件来获取被搜索引擎索引的页面。Spiderable 调用 phantomjs 获取页面内容。这种方法适用于除主页以外的大多数页面。

```
 '/': ->
    'home'
  '/otherurl': ->
    'otherpage' 
```

我做了一些调试，发现在spiderable.js中page.evaluate的回调在请求主页的情况下总是返回false

```
...  
setInterval(function() {
  var ready = page.evaluate(function () {
    if (typeof Meteor !== 'undefined' && typeof(Meteor.status) !== 'undefined' && Meteor.status().connected) {
      Meteor.flush();
      return Meteor._LivedataConnection._allSubscriptionsReady();
    }
    return false;
  });
... 
```

有什么建议么？

# asp.net-mvc-3 - 创建操作以获取和显示存储在会话中的购物车对象

> ID：14748843
> 
> 赞同：0
> 
> 时间：2013-02-07T10:27:43.447
> 
> 标签：asp.net-mvc-3, session

大家好...我是 ASP.NET MVC 的新手。我有一个疑问。 **不使用 EF使用****MVC** razor **My Home 控制器类**在购物车中添加更多产品

 **```
 public void AddOrderItem(Int64 ID, int quantity)
    {            
        OrderDO order = (OrderDO)Session["Order"];
        order.Items.Add(new OrderItem(ID, quantity));
        Session["Order"] = order;  
    }
}
 public class OrderDO
    {
        private IList<OrderItem> _items;
        public OrderDO()
        {
            this._items = new List<OrderItem>();
        }
        public IList<OrderItem> Items
        {
            get { return this._items; }
        }
    }
    public class OrderItem
    {
        public OrderItem()
        {
        }
        public OrderItem(Int64 ID, int quantity)
        {
            this.ID= ID;
            this.Quantity = quantity;
        }
        public Int64 ID{ get; set; }
        public int Quantity { get; set; }
    } 
```

我在产品页面中的脚本是

```
$(document).ready(function () {
        $('#AddToCard').click(function () {
            var ProductID = $('#txtproductID').val();
            var Quantity = $('#txtQuantity').val();

            $.ajax({
                type: "POST",
                url: '../Home/AddOrderItem',
                data: { ID: ProductID, quantity: Quantity },
                success: function (data) {

                    if (data) {

                    }
                }
            });
        }); 
```

在上面的代码中正常工作。我点击购物车按钮，如何获取详细购物清单

```
 public ActionResult Details(int id)
        {
            OrderDO order = (OrderDO)Session["Order"];

            return View();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T14:41:55.803

您可以将其作为模型传递给视图：

```
public ActionResult Details(int id)
{
    OrderDO order = (OrderDO)Session["Order"];
    return PartialView(order.Items);
} 
```

它将被强输入到这个模型，你可以显示详细信息：

```
@model IEnumerable<OrderItem>
@ {
    var grid = new WebGrid(Model);
}

@grid.GetHtml() 
```

并且由于您似乎正在使用 AJAX 调用此控制器操作，因此请不要忘记在`success`回调中将结果插入 DOM：

```
$.ajax({
    type: "POST",
    url: '../Home/AddOrderItem',
    data: { ID: ProductID, quantity: Quantity },
    success: function (data) {
        $('#someContentPlaceholder').html(data);
    }
}); 
```**

# android - 从 url 加载图像但 ANR 显示并强制关闭应用程序

> ID：14748850
> 
> 赞同：0
> 
> 时间：2013-02-07T10:28:10.730
> 
> 标签：android, xml-parsing, image-loading, android-anr-dialog

嗨，我的应用程序是关于解析 xml 文件，然后从 url 加载图像以及文本并将其显示在列表视图中，但是每当我从 url 加载图像并且在向下滚动列表视图时它无法加载图像正确并强制关闭应用程序。现在如何克服这种情况。请帮助这里是我从 url 和文本下载图像的代码。

```
public class NewsRowAdapter extends ArrayAdapter<Item> 
{
    LoadingImage loadingImage;
    Bitmap bitmap = null;
    private Activity activity;
    private List<Item> items;
    private Item objBean;
    private int row;
    /*private DisplayImageOptions options;
    ImageLoader imageLoader;*/

    public NewsRowAdapter(Activity act, int resource, List<Item> arrayList) 
    {
        super(act, resource, arrayList);
        this.activity = act;
        this.row = resource;
        this.items = arrayList;

        /*options = new DisplayImageOptions.Builder().showStubImage(R.drawable.blank).showImageForEmptyUrl(R.drawable.blank).cacheInMemory().cacheOnDisc().build();
        imageLoader = ImageLoader.getInstance();*/

    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
    {
        View view = convertView;
        ViewHolder holder;
        if (view == null) 
        {
            LayoutInflater inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(row, null);

            holder = new ViewHolder();
            view.setTag(holder);
        } else 
        {
            holder = (ViewHolder) view.getTag();
        }

        if ((items == null) || ((position + 1) > items.size()))
            return view;

        objBean = items.get(position);

        holder.tvTitle = (TextView) view.findViewById(R.id.tvtitle);
        holder.tvDesc = (TextView) view.findViewById(R.id.tvdesc);
        holder.tvDate = (TextView) view.findViewById(R.id.tvdate);
        holder.imgView = (ImageView) view.findViewById(R.id.image);
        holder.pbar = (ProgressBar) view.findViewById(R.id.pbar);

        if (holder.tvTitle != null && null != objBean.getTitle() && objBean.getTitle().trim().length() > 0) 
        {
            holder.tvTitle.setText(Html.fromHtml(objBean.getTitle()));
        }
        if (holder.tvDesc != null && null != objBean.getDesc()
                && objBean.getDesc().trim().length() > 0) {
            holder.tvDesc.setText(Html.fromHtml(objBean.getDesc()));
        }
        if (holder.tvDate != null && null != objBean.getPubdate() && objBean.getPubdate().trim().length() > 0)
        {
            holder.tvDate.setText(Html.fromHtml(objBean.getPubdate()));
        }
        if (holder.imgView != null) 
        {
            if (null != objBean.getLink() && objBean.getLink().trim().length() > 0) 
            {
                final ProgressBar pbar = holder.pbar;
                pbar.setVisibility(View.INVISIBLE);
                //---------CHANGES MADE FOR LOADING IMAGE----------//
                Log.d("IMAGE NULL----------", objBean.getLink());

                try 
                {

                    URL linkurl = new URL(objBean.getLink());

                    bitmap = BitmapFactory.decodeStream(linkurl.openConnection().getInputStream());

                    holder.imgView.setImageBitmap(bitmap);

                } catch (MalformedURLException e) 
                {
                    e.printStackTrace();

                } catch (IOException e) 
                {
                    e.printStackTrace();
                }

                /*try 
                {
                    loadBitmap(objBean.getLink());

                } catch (IOException e) 
                {
                    e.printStackTrace();
                }
                */

                /*imageLoader.init(ImageLoaderConfiguration.createDefault(activity));
                imageLoader.displayImage(objBean.getLink(), holder.imgView, options, new ImageLoadingListener()
                {
                            @Override
                            public void onLoadingComplete() 
                            {
                                pbar.setVisibility(View.INVISIBLE);

                            }

                            @Override
                            public void onLoadingFailed() 
                            {
                                pbar.setVisibility(View.INVISIBLE);
                            }

                            @Override
                            public void onLoadingStarted()
                            {
                                pbar.setVisibility(View.VISIBLE);

                            }
                });*/

            } else 
            {
                holder.imgView.setImageResource(R.drawable.ic_launcher);
            }
        }

        return view;
    }

    public class ViewHolder
    {

        public TextView tvTitle, tvDesc, tvDate;
        private ImageView imgView;
        private ProgressBar pbar;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:31:25.990

使用 AsyncTask 下载图像。检查这个：[http ://android-developers.blogspot.in/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.in/2010/07/multithreading-for-performance.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:31:55.843

您正在 UI 线程上运行网络操作，尝试创建一个 AsyncTask 对作业执行，或者一个线程。这很容易，您所要做的就是将代码移过来。

由于您在适配器上使用 this，这意味着您将填充项目列表，您可能需要查看[this](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)。因为您想避免 listviews getView 问题的常规问题。

还有一些开源库可以帮助将 url 加载到图像中。例如[，来自 Koush 的 UrlImageViewHelper](https://github.com/koush/UrlImageViewHelper)可以帮助您很好地做到这一点。从您的适配器只需调用：

```
 if (holder.imgView != null) {
        if (null != objBean.getLink() && objBean.getLink().trim().length() > 0) {
            final ProgressBar pbar = holder.pbar;
            pbar.setVisibility(View.INVISIBLE);
            //---------CHANGES MADE FOR LOADING IMAGE----------//
            Log.d("IMAGE NULL----------", objBean.getLink());

            String linkurl = new URL(objBean.getLink().toString());
            UrlImageViewHelper.setUrlDrawable(holder.imgView, linkurl, R.id.your_default_drawable);

        } 
```

# c# - 将 Html.DisplayFor 编码为输入值的问题

> ID：14748851
> 
> 赞同：1
> 
> 时间：2013-02-07T10:28:15.560
> 
> 标签：c#, html, .net, asp.net-mvc, html-helper

我的代码：

```
@Html.DisplayFor(modelItem => item.nomOuvrage)
<div class="controls">
    <input type="text" value="@Html.DisplayFor(modelItem => item.nomOuvrage)" />
</div> 
```

结果：

![在此处输入图像描述](../Images/66c98f820e9c10b8c25c797461831bb9.png)

你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:05:38.820

"" 之间的 html 编码值有问题吗？

作为`HtmlHelper.DisplayFor`用途`MvcHtmlString.Create()`

和[MvcHtmlString](http://msdn.microsoft.com/fr-fr/library/system.web.mvc.mvchtmlstring%28v=vs.108%29.aspx)

> 表示不应再次编码的 HTML 编码字符串。

你应该只使用

```
@Html.TextBoxFor(m => item.nomOuvrage) 
```

# c# - 构建 WCF 项目时的 Visual Studio 输出目录

> ID：14748853
> 
> 赞同：0
> 
> 时间：2013-02-07T10:28:27.090
> 
> 标签：c#, visual-studio-2010, wcf

我有一个包含十几个项目的 vs2010 解决方案。其中一个项目是一个包含 WCF 服务的类库，该服务由另一个作为客户端的项目（启动项目）使用。WCF 项目的输出构建目录设置为`\bin`for`all configurations`和`any cpu`. 问题是当我进行调试构建时，似乎所有 dll 都转到了`\bin\Debug`，**只有一些**转到`\bin`. 例如 WCF 服务 Dll 不出`\bin`现在`\bin\Debug`. 这会导致 Visual Studio 主机找不到必要的 dll，从而使我的 WCF 服务无法访问。

我已经搜索了高点和低点来完成这项工作，但一直被这种奇怪的 VS 行为所困扰。为什么 VS 不会输出所有 dll 以`\bin`喜欢它在项目属性中设置的内容？为什么它在所有输出都应该去的时候继续创建一个`debug`文件夹？`\bin``\bin`

如果有人能对此有所启发，那就太好了。

# java - 在安装任何软件（PHP、Java 等）之前检查要求的 Python 脚本

> ID：14748854
> 
> 赞同：-2
> 
> 时间：2013-02-07T10:28:36.377
> 
> 标签：java, python

我正在使用 python，并尝试开发一个涵盖以下几点的脚本

例如，当我们尝试在 linux 机器上安装特定软件（如 PHP 或 Java 等）以及运行 python 脚本时

```
 It should check the minimum requirements that needs to install that particular software(like PHP or Java that we will pass the this software name along with the script file)?
   Which version of that software is installed ? 
```

我的意思是当我们以特定的软件名称运行脚本时，脚本应该首先找到安装它的要求，其次是否安装了软件，如果安装了该软件的版本是什么？

例如要知道我们将使用的 linux 机器上是否安装了 PHP `php -V`，还要查找 java 的版本，我们将使用`java -version`.

所以最后谁能告诉我一个基本概念，我们是否可以从单个 python 脚本中动态找到软件版本以及安装该特定软件所需的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:33:33.110

```
from os import system
phpstatus = system('php --version')
javastatus = system('java -version')

if phpstatus != 0:
    print 'Missing: PHP'
if javastatus != 0:
    print 'Missing: Java' 
```

如果两者中的任何一个在返回值中都为**BUT** 0，则说明您缺少模块。
*（这不是最佳选择，您很可能会看到大量不需要的文本，但这是一个开始）*

列出所有已安装的软件（buntu/debian）：

```
from subprocess import Popen, PIPE
stdout, stderr = Popen(['dpkg', '--get-selections'], stdout=PIPE, stderr=PIPE).communicate() 
```

然后只需遍历它并找到已安装的内容与您需要的内容。这一切都归结为基础知识，**你需要什么**，你需要一个你需要在系统中出现的项目列表。没有它，就没有办法自动化缺少的东西，因为你不能开发一些东西（截至今天) 可以了解您的期望、安装的内容以及缺少的内容。

您需要： 您需要**安装的项目列表** 匹配该项目，安装什么。

# android - 卡在 Flag_Activity_ClearTop

> ID：14748857
> 
> 赞同：1
> 
> 时间：2013-02-07T10:28:49.087
> 
> 标签：android, android-intent

我被困在使用标志活动清除​​顶部使用情况中。它给我带来了一个巨大的问题。有时它有效，有时无效。我不重要。这真的让我很困惑。请帮忙

在这里，我从 Login Acitivy -> Activity A -> Activity B->InviteGroupViaPinEmailActivity-> 点击按钮，我打开一个警报对话框，然后按下此对话框的退出按钮，我正在调用以下代码。

```
 Intent userMenu = new Intent(InviteGroupViaPinEmailActivity.this,LoginActivity.class);
                                                       userMenu.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                                userMenu.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
                                                startActivity(userMenu);
                                                finish(); 
```

有一段时间它出现在LoginActivity，但是当我按下所有活动时，Activity B->Acitivity A再次出现，然后它终于退出了。

什么问题。请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:54:04.330

我认为您在转到 LoginActivity -> Activity A 时完成了 Login Acitivity。当您使用 clear top flag 时，您的 Login Activity 应该在您的堆栈中处于活动状态。请确保您尚未完成登录活动。

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Log.e("onkeyDown>>>>", "Called>>>>>");
            finish();
        }
        return super.onKeyDown(keyCode, event);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:34:54.240

您可以使用

清单中的 android:noHistory="true" 用于纠正所有问题的活动。您是否尝试过？

# ios - iOS：ASIHTTPRequest 上传

> ID：14748859
> 
> 赞同：0
> 
> 时间：2013-02-07T10:28:56.300
> 
> 标签：ios, sharepoint, asihttprequest

我使用`ASIHTTPRequest`.
出于某种原因`ASIHTTPRequest`，会在文件大小中添加额外的数据。
**例如**，我上传了原始大小的 DOC 文件`1 105 920 b`，但在服务器上大小为`1 106 150`. 因此文件损坏。

当我打开损坏的文件时，顶部是：

```
Content-Disposition: form-data; name="mydocfile.doc";
filename="mydocfile.doc"
Content-Type: application/msword 
```

如何强制`ASIHTTPRequest`不向原始文件添加其他数据？

* * *

**[编辑]** 我用来上传的代码很简单：

```
request = [ASIFormDataRequest requestWithURL:url];
[request setRequestMethod:@"PUT"];
[request setUseKeychainPersistence:YES];
[request setFile:pathToLocalFile forKey:@"docfile"];
[request setTimeOutSeconds:120];    
[request startAsynchronous]; 
```

# c++ - 从函数返回值时使用 c_str() 的差异

> ID：14748860
> 
> 赞同：2
> 
> 时间：2013-02-07T10:28:55.947
> 
> 标签：c++, string

如果我有以下两个功能

```
std::string foo1()
{
    std::string temp;
    ...
    return temp;
} 
```

和

```
const char* foo2()
{
    std::string temp;
    ...
    return temp.c_str();
} 
```

和一个以 const char* 作为输入的函数；

```
void bar(const char* input) { ... } 
```

哪个更安全：

```
bar(foo1().c_str()); 
```

或者

```
bar(foo2()); 
```

如果我想做的只是将一个字符串作为输入传递给 bar 然后不关心任何一个`foo`函数的返回值，这真的很重要吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T10:32:02.553

```
const char* foo2()
{
    std::string temp;
    ...
    return temp.c_str();
} 
```

`foo2()`是不安全的，您将 a 返回`const char*`到一个局部变量，该变量将在函数返回时指向垃圾。

只需使用`foo1`which 在 C++ 中是一种安全且惯用的方式来返回一个对象。[NRVO](http://en.wikipedia.org/wiki/Return_value_optimization)`foo1`可能会启动，它会在返回时删除 temp 的副本。

```
std::string foo1()
{
    std::string temp;
    ...
    return temp;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T10:32:02.547

```
const char* foo2()
{
    std::string temp;
    ...
    return temp.c_str();
} 
```

根本不安全，因为`temp`会被破坏，所以你将返回一个悬空指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-07T10:32:45.907

酒吧（foo2（））；完全是错误的......因为当 foo2 返回时，临时 std::string 被破坏并且 c_str() 返回的指针现在指向无效位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-07T10:32:55.057

只要原始字符串对象不被破坏，c_str 的字符数组就有效。[以前有人问过这个问题。](https://stackoverflow.com/questions/6456359/what-is-stdstringc-str-lifetime). 在你的函数结束时，`temp`被销毁，这意味着`foo2()`返回一个无效的指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T10:33:57.367

该`foo2`版本是不安全的，因为返回的指针`c_str()`无效，因为`std::string` `temp`从`foo2`. `foo1`更安全，因为它返回`std::string` `temp`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-07T10:32:21.673

`foo2`返回一个指向局部变量内部的指针，该变量在退出函数时被销毁。（那很糟）

# php - 如何在 Moodle 主题设计中定义自定义块区域？

> ID：14748862
> 
> 赞同：6
> 
> 时间：2013-02-07T10:29:15.043
> 
> 标签：php, html, css, moodle

我正在尝试设计一个具有**side-pre** region 和**bottom region**的新主题。在这个底部区域（从左到右）我必须并排添加 4 个块。请帮助我，如何定义区域（区域，位置）以及我必须修改哪些文件。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T13:52:22.000

您可以在 theme/config.php 文件中设置您的自定义区域，例如 -

```
'course' => array(
        'file' => 'general_layout.php',
        'regions' => array('side-pre', 'bottom-region' ),
        'defaultregion' => 'side-pre',
        'options' => array('langmenu' => true),
    ), 
```

并在布局文件 theme/layout/yourlayout.php 中定义区域

```
<div id="region-pre" class="block-region">
   <div class="region-content">
       <?php echo $OUTPUT->blocks_for_region('bottom-region') ?>
   </div>
</div> 
```

有关更多详细信息，请查看moodle doc - [http://docs.moodle.org/dev/Themes_2.0](http://docs.moodle.org/dev/Themes_2.0)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-08T01:22:05.863

在主题选择器中，您可以选择您喜欢的主题，例如....**站点管理 -> 外观 -> 主题 -> 主题选择器**

# c# - 如何使用 HtmlTextWriter 编写 html 注释？

> ID：14748863
> 
> 赞同：4
> 
> 时间：2013-02-07T10:29:16.273
> 
> 标签：c#, html, .net, htmltextwriter

我[`HtmlTextWriter`](http://msdn.microsoft.com/en-us/library/bt7b938d.aspx)用来将 html 输出到流中。但是，我缺少一种编写 html 注释的方法。当然，我可以写一个扩展方法

```
public static void WriteComment(this HtmlTextWriter writer, string comment)
{
  writer.Write("<!-- ");
  writer.WriteEncodedText(comment);
  writer.Write(" -->");
} 
```

但这确实感觉有点不雅 - 是否有一些我没有看到的内置方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:01:09.007

[在检查规范](http://www.w3.org/TR/html-markup/syntax.html#comments)之后，我可以争辩说这些扩展可能更正确，

```
public static void WriteBeginComment(this HtmlTextWriter writer)
{
    writer.Write(HtmlTextWriter.TagLeftChar);
    writer.Write("!--");
}

public static void WriteEndComment(this HtmlTextWriter writer)
{
    writer.Write("--");
    writer.Write(HtmlTextWriter.TagRightChar);
}

public static void WriteComment(this HtmlTextWriter writer, string comment)
{
    if (
        comment.StartsWith(">") || 
        comment.StartsWith("->") || 
        comment.Contains("--") ||
        comment.EndsWith("-"))
    {
        throw new ArgumentException(
            "text does not meet HTML5 specification",
            "comment");
    }

    writer.WriteBeginComment();
    writer.Write(comment);
    writer.WriteEndComment();
} 
```

# powershell - 为什么执行 PowerShell 的自定义构建过程模板失败

> ID：14748867
> 
> 赞同：4
> 
> 时间：2013-02-07T10:29:30.707
> 
> 标签：powershell, tfs, tfsbuild, powershell-3.0

我修改了自定义构建过程模板以在构建服务器上执行 Powershell。这样我就可以运行一些脚本来自动部署我们的 SharePoint 解决方案。在我将构建服务器 Powershell 版本从 2.0 升级到 3.0 之前，一切都运行良好（这需要在我安装 SCVMM Admin Console 2012 时完成，而 Powershell 3.0 是先决条件）。

在构建模板本身中，我使用**Microsoft.TeamFoundation.Build.Workflow.Activities.InvokeProcess**工作流程项来执行具有以下属性的 PowerShell 命令：

> 参数：String.Format(" ""& '{0}' -DropLocation '{1}' {2} "" ", ScriptFilename, BuildDetail.DropLocation, PostDropScript2Arguments)
> 
> 文件名：“powershell”
> 
> 输出编码：System.Text.Encoding.GetEncoding（System.Globalization.CultureInfo.InstalledUICulture.TextInfo.OEMCodePage）

现在每次我尝试执行构建时，都会收到以下错误：

> 异常消息：找不到文件：PowerShell（类型 FileNotFoundException） 异常堆栈跟踪：服务器堆栈跟踪：
> 在 Microsoft.TeamFoundation.Build.Workflow.Activities.InvokeProcess.ProcessWrapper.Start() 在 Microsoft.TeamFoundation.Build.Workflow.Activities.InvokeProcess .InvokeProcessInternal.RunCommand(AsyncState state) at System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Object[]& outArgs) 在 System.Runtime.Remoting.Messaging.StackBuilderSink.AsyncProcessMessage (IMessage msg, IMessageSink replySink)
> 
> 在 [0] 处重新引发异常：在 System.Runtime.Remoting.Proxies.RemotingProxy.Invoke(Object NotUsed, MessageData& msgData) 在 System.Func `2.EndInvoke(IAsyncResult result) at System.Activities.AsyncCodeActivity`1的 System.Runtime.Remoting.Proxies.RealProxy.EndInvokeHelper(Message reqMsg, Boolean bProxyCase) .System.Activities.IAsyncCodeActivity.FinishExecution(AsyncCodeActivityContext context, IAsyncResult result) at System.Activities.AsyncCodeActivity.CompleteAsyncCodeActivityData.CompleteAsyncCodeActivityWorkItem.Execute(ActivityExecutor executor, BookmarkManager bookmarkManager)
> 
> 内部异常详细信息：
> 
> 异常消息：系统找不到指定的文件（类型 Win32Exception）异常堆栈跟踪：在 System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo) 在 Microsoft.TeamFoundation.Build.Workflow.Activities.InvokeProcess.ProcessWrapper.Start()

似乎构建不再能够将“powershell”命令与实际的 PowerShell 文件链接。

我已经手动进入构建服务器并在命令行中键入“powershell”，它启动了 PowerShell，正如预期的那样。

以前有没有其他人遇到过这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T12:08:06.063

在工作流程的 invokeprocess 步骤中添加 powershell.exe 的完整文件路径，它应该始终有效（我不相信环境设置）并且知道，以您自己的帐户登录服务器不等于构建在特定帐户下运行的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T12:11:08.017

在我的情况下，部署 Windows 管理框架 3.0 后发生了同样的错误。它通过重新启动构建控制器和代理来解决。

# php - Codeigniter 2：如何将自动加载的语言文件切换为不同的语言

> ID：14748869
> 
> 赞同：3
> 
> 时间：2013-02-07T10:29:34.720
> 
> 标签：php, codeigniter, codeigniter-2

来自 CodeIgniter 用户指南

> 如果您发现在整个应用程序中全局需要一种特定语言，您可以告诉 CodeIgniter 在系统初始化期间自动加载它。这是通过打开 application/config/autoload.php 文件并将语言添加到自动加载数组来完成的。

我在会话中存储有关用户语言的信息。

```
$this->session->set_userdata('lang', $lang); 
```

如何更改自动加载的全局 lang 文件的语言（为用户使用的语言）（默认语言是从 config.php 加载的 - 这显然是理解的）

```
$autoload['language'] = array('global'); 
```

这可能吗，如果没有，应该怎么做？我需要扩展 CI_Controller 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T10:31:05.953

毕竟，我认为最好的解决方案是像这样扩展 CI_controller Simple

```
class MY_Controller extends CI_Controller {

    function __construct() {
        parent::__construct();

        // Global Lang File
        $this->lang->load('global', $this->session->userdata('lang'));

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T11:18:20.177

这是可能的，但您需要从会话中加载所需的语言：

```
$this->lang->load('filename', 'language'); 
```

从手册：

其中 filename 是您希望加载的文件的名称（不带文件扩展名），而 language 是包含它的语言集（即英语）。如果缺少第二个参数，将使用 application/config/config.php 文件中设置的默认语言。

加载所需的语言文件后，您可以使用此功能访问任何文本行：

```
$this->lang->line('language_key'); 
```

当然，您的语言文件将在“应用程序/语言”中

# jquery - 当 HTML 格式错误时替换所有实例特定标记

> ID：14748871
> 
> 赞同：1
> 
> 时间：2013-02-07T10:29:47.763
> 
> 标签：jquery, asp-classic

我们正在尝试编写一个脚本，用它们的内容替换不推荐使用的标签，例如`<font>`。我们所拥有的大致如下：

```
while($("font").length > 0) {
    $("font").each(function() {
        $(this).replaceWith($(this).html());
    });
} 
```

while 循环只是因为如果字体标签被替换为它的内容并且其中一个元素子元素也是字体标签，那么它会同时捕获父元素和子元素。

我们的问题是我们无法控制输出的内容——这是由我们的客户输入的。我们最近看到的一个格式错误的 HTML 示例是`<p><font><span><font><div></font><strong></strong><strong></div></span></font></p>`. 显然，这是严重的格式错误，在理想的世界中，我们的客户会正确输入。上面的脚本在所有体面的浏览器（Chrome、Firefox 和 Safari）以及令人惊讶的 IE 9 中都可以完美运行。但是它在 IE 6-8 中中断，导致这些标签中的任何内容都没有显示。我们的目标是替换所有字体标签，并且仍然显示其中的内容。

有谁知道我们可以使用 jQuery 或经典 ASP 达到预期效果的任何方式？

另请注意，在这个特定的客户案例中，它非常基本 - 仅请求替换 1 个标签。其他情况包括 Word 在将文本从 Word 传输到网站时添加的标签、`<i>`、`<b>`等`<span>`。

提前致谢， 问候， 理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:20:29.840

从输出中替换所有 <font> 和 </font> 标记不是更容易吗？在给定的情况下，这仍然不会提供验证 XHTML 代码（<div> 在 <span> 中，未封闭的 <strong>），但可能足以查看文本。

以下是在经典 ASP 中使用正则表达式的方法：

```
function removeFontTags(s_text)
    dim obj_regex
    set obj_regex = new RegExp

    obj_regex.IgnoreCase = true
    obj_regex.Global = true
    obj_regex.Pattern = "\<\/?font\>"

    removeFontTags = obj_regex.replace(s_text, "")

    set obj_regex = Nothing
end function

Response.Write removeFontTags("<p><font><span><font><div></font><strong></strong><strong></div></span></font></p>")

' returns: <p><span><div><strong></strong><strong></div></span></p> 
```

但也许你可以通过这种方式添加更多的卫生设施来展示你需要的东西。

# facebook - facebook 从 2013 年 7 月 2 日开始返回代理电子邮件而不是主电子邮件

> ID：14748892
> 
> 赞同：1
> 
> 时间：2013-02-07T10:30:49.300
> 
> 标签：facebook, facebook-graph-api

从今天开始，当向我的应用程序调用新用户的“/me”时，我得到的用户详细信息包括 facebook 代理电子邮件地址。在请求的权限中，我要求提供 user_about_me、publish_stream、email、user_location、friends_birthday、user_birthday、publish_actions。

什么可能导致它？我必须提到，在 2013 年 2 月 6 日添加更改之前，它运行良好......

# c# - 在执行 WPF 时更改本地化

> ID：14748899
> 
> 赞同：1
> 
> 时间：2013-02-07T10:31:18.007
> 
> 标签：c#, .net, wpf, visual-studio-2010, localization

我有一个 WPF 应用程序，我希望它是两种语言。我复制了我的`Resources.resx`并构建了我的两种语言，如下所示：

![在此处输入图像描述](../Images/5a82d99e5908b3d66710bee29602fd1e.png)

所以当我第一次加载我的时候，`MainApplication` 我这样做：

```
Properties.Resources.Culture = new CultureInfo("es-ES"); 
```

之前

```
InitializeComponent(); 
```

所以一切都以所需的语言加载。现在我想更进一步，我`Select language`在我的应用程序上设计了一个：

![在此处输入图像描述](../Images/c3f53c23aad64182a757e0ac443c92a9.png)

关于如何在**执行时**为不同语言重新加载界面的任何想法？

**编辑：**

我找到[了这个](http://www.codeproject.com/Articles/22967/WPF-Runtime-Localization?msg=4490202#xx4490202xx)链接，并且似乎有效。但我有一个问题。当我试图找到`Resources x:key`它时，它会启动一个错误......它说`ResourceReferenceKeyNotFoundException`。去[这里](https://stackoverflow.com/questions/14750583/resourcereferencekeynotfoundexception-declared-on-dictionary-xaml)检查我的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T12:15:34.413

您想更改 UI 线程的文化，这应该有效：

```
var culture = new CultureInfo("en-US");
Thread.CurrentThread.CurrentCulture = culture;
Thread.CurrentThread.CurrentUICulture = culture;
FrameworkElement.LanguageProperty.OverrideMetadata(typeof(FrameworkElement), new FrameworkPropertyMetadata(XmlLanguage.GetLanguage(CultureInfo.CurrentCulture.IetfLanguageTag))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:17:49.133

我关注[了这个](http://www.codeproject.com/Articles/22967/WPF-Runtime-Localization)有趣的链接。

# haskell - GHC 不执行 2 阶段部分应用程序内联

> ID：14748900
> 
> 赞同：2
> 
> 时间：2013-02-07T10:31:20.180
> 
> 标签：haskell, optimization, inline, ghc

我有这个功能：

```
{-# INLINE f #-}
f x =
    \ y ->
        \z -> ... 
```

它是这样定义的（有关技巧，请参阅[GHC 文档](http://www.haskell.org/ghc/docs/latest/html/users_guide/pragmas.html#inline-pragma)），因为我需要 2 阶段应用程序内联，例如。

```
comp (f a) ...
...
comp pAppliedF b1 b2 ... =
    f'1 = pAppliedF b1 -- I need these 2 functions inlined
    f'2 = pAppliedF b2 
```

但是，我得到`Core`这样的：

```
fa = \ y z -> ...
...
-- `comp` is inlined
-- Even though there are happy partial applications:
let f'1 = fa smth1
    f'2 = fa smth2
in ... 
```

如何在这里智取 GHC？

**更新**
在现实世界中（呵呵）：

*   [`f`](https://github.com/leventov/yarr/blob/4efddadf2c824f3b7c2c824018678997601b4c60/yarr/Data/Yarr/Shape.hs#L189)

*   [`comp`](https://github.com/leventov/yarr/blob/4efddadf2c824f3b7c2c824018678997601b4c60/yarr/Data/Yarr/Convolution/Repr.hs#L165), 下面 20 行: [`f'1`,`f'2`](https://github.com/leventov/yarr/blob/4efddadf2c824f3b7c2c824018678997601b4c60/yarr/Data/Yarr/Convolution/Repr.hs#L178) , 实际上是压缩的`fixed-vector`

*   [program](https://gist.github.com/leventov/4730311/raw/5d036ba4175760fe25bdbc957cbb317608367dd4/blur.hs) ( `comp (f a)`there), [run](https://gist.github.com/leventov/4730311/raw/3ad410e06cfc017b30dfaaba3e43b2bf4fc0e529/run) (with `-fexpose-all-unfoldings`), [`Core`](https://gist.github.com/leventov/4730311/raw/ad859c098f899134e5f897f06e5cafcebc4a81ef/blur-core.hs)--`$wa2`在后者中`fa`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:14:48.477

在这些定义的 where 子句中添加 {-# INLINE f'1 #-} 和 f'2。

# android - 安卓脸书登录

> ID：14748908
> 
> 赞同：2
> 
> 时间：2013-02-07T10:31:35.133
> 
> 标签：android, facebook

我有一个 android 应用程序，我必须通过它登录到 facebook。我正在使用 facebook sdk 的会话对象登录。但是，如果设备中安装了实际的 facebook 应用程序，则登录不起作用。

下面是我的代码

```
public class FacebookSettings extends FragmentActivity{
/** Called when the activity is first created. */

private static final int LOGIN = 0;
private static final int LOGGED_IN = 1;
private static final int FRAGMENT_COUNT = LOGGED_IN +1;
private Button publishButton;
private Fragment[] fragments = new Fragment[FRAGMENT_COUNT];
private Session mSession;

private boolean isResumed = false;

@Override
public void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    uiHelper.onPause();
    isResumed=false;
}

@Override
public void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    uiHelper.onResume();
    isResumed=true;
}

protected static final String LOG_TAG = "FACEBOOK_TEST";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.fb_settings);
    publishButton=(Button) findViewById(R.id.publishButton);
    android.support.v4.app.FragmentManager fm = getSupportFragmentManager();
    fragments[LOGIN] = fm.findFragmentById(R.id.Login_Fragment);
    fragments[LOGGED_IN] = fm.findFragmentById(R.id.Logged_in_Fragment);

    android.support.v4.app.FragmentTransaction transaction = fm.beginTransaction();
    for(int i = 0; i < fragments.length; i++) {
        transaction.hide(fragments[i]);
    }
    transaction.commit();

    uiHelper = new UiLifecycleHelper(this, callBack);
    uiHelper.onCreate(savedInstanceState);

}

private void showFragment(int fragmentIndex, boolean addToBackStack) {
    android.support.v4.app.FragmentManager fm = getSupportFragmentManager();
    android.support.v4.app.FragmentTransaction transaction = fm.beginTransaction();
    for (int i = 0; i < fragments.length; i++) {
        if (i == fragmentIndex) {
            transaction.show(fragments[i]);
        } else {
            transaction.hide(fragments[i]);
        }
    }
    if (addToBackStack) {
        transaction.addToBackStack(null);
    }
    transaction.commit();
}

private void onSessionStateChange(Session session, SessionState state, Exception exception) {
    // Only make changes if the activity is visible
    if (isResumed) {
        Log.d("facebook","isResumed \n\n\n\n"+state.name());

        android.support.v4.app.FragmentManager manager = getSupportFragmentManager();
        // Get the number of entries in the back stack
        int backStackSize = manager.getBackStackEntryCount();
        // Clear the back stack
        for (int i = 0; i < backStackSize; i++) {
            manager.popBackStack();
        }
        if (state.isOpened()) {
            Log.d("facebook","State isOpened in on session state changed");
            // If the session state is open:
            // Show the authenticated fragment
            publishButton.setVisibility(View.VISIBLE);
            showFragment(LOGGED_IN, false);
        } else if (state.isClosed()) {
            Log.d("facebook","State isClosed in on session state changed");
            // If the session state is closed:
            // Show the login fragment
            publishButton.setVisibility(View.INVISIBLE);
            showFragment(LOGIN, false);
        }
    }
}

@Override
protected void onResumeFragments() {
    // TODO Auto-generated method stub
    super.onResumeFragments();
    Session session = Session.getActiveSession();

    if (session != null && session.isOpened()) {
        // if the session is already open,
        // try to show the selection fragment
        Log.d("facebook","State isOpened in resume fragments\n\n\n");
        publishButton.setVisibility(View.VISIBLE);
        showFragment(LOGGED_IN, false);
    } else {
        // otherwise present the splash screen
        // and ask the user to login.
        Log.d("facebook","State isClosed in resume fragments\n\n\n");
        publishButton.setVisibility(View.INVISIBLE);

        showFragment(LOGIN, false);
    }
}

private UiLifecycleHelper uiHelper;

private Session.StatusCallback callBack=new StatusCallback() {

    @Override
    public void call(Session session, SessionState state, Exception exception) {
        // TODO Auto-generated method stub
        Log.d("facebook","in status call back \n\n\n\n");
        Log.d("facebook","state\n\n\n\n"+session.isClosed());
        Log.d("facebook","state\n\n\n\n"+session.isOpened());
        Log.d("facebook","state\n\n\n\n"+state.isClosed());
        Log.d("facebook","state\n\n\n\n"+state.isOpened());
        onSessionStateChange(session,state,exception);
    }
};

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    uiHelper.onActivityResult(requestCode, resultCode, data);
}

@Override
public void onDestroy() {
    super.onDestroy();
    uiHelper.onDestroy();
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    uiHelper.onSaveInstanceState(outState);
}

} 
```

请帮忙谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T13:41:04.830

我想你正在寻找这个：

```
 <meta-data
        android:name="com.facebook.sdk.ApplicationId"
        android:value="@string/applicationId" /> 
```

facebook sdk 使用此元数据将会话附加到您的应用程序。您也可以在使用构建器创建会话时设置它

```
 new Session.Builder(this).setApplicationId(Constants.Facebook.APP_ID) 
```

参考 HelloFacebookSample 中的 AndroidManifest.xml

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T14:43:47.817

我认为问题在于您在 Facebook 页面上输入的密钥哈希与 Facebook 应用程序发送的密钥哈希不同。解决方案之一是在 onCreate() 方法中添加以下代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

try {
    PackageInfo info = getPackageManager().getPackageInfo(
            "com.facebook.samples.loginhowto", 
            PackageManager.GET_SIGNATURES);
    for (Signature signature : info.signatures) {
        MessageDigest md = MessageDigest.getInstance("SHA");
        md.update(signature.toByteArray());
        Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
        }
} catch (NameNotFoundException e) {

} catch (NoSuchAlgorithmException e) {

}
... 
```

将 com.facebook.samples.loginhowto 替换为您的包裹信息。在日志中查找 KeyHash 并将其添加到您的开发人员页面中。您可以在 Facebook 开发者页面[facebook](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)上找到更多信息。但请记住，这是临时解决方案，很可能仅适用于您从 Facebook 应用程序获得密钥哈希的帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T11:04:43.617

我们也遇到过同样的问题，但它是在 iPhone 应用程序中。当我们在 iPhone 上开发一个 facbook 应用程序时，如果安装了 fb 应用程序本身，login 不起作用。我们解析它，将我在其中创建 facebook 应用程序的 Iphone 应用程序包标识符放在 facebook 开发人员页面中。

我希望当您在 db 开发人员页面中为 android 创建一个 fb 应用程序时，这种类似的字段会丢失。请检查一下。

# php - htaccess 文件从服务器到 localhost 服务器配置

> ID：14748909
> 
> 赞同：0
> 
> 时间：2013-02-07T10:31:35.773
> 
> 标签：php, .htaccess

我有一个托管在服务器中的 php 应用程序。那里一切正常。现在我的工作是对 css 文件进行一些更改。所以我只是将所有文件以及数据库从服务器下载到我的本地主机（LAMP）。在我的本地主机中，我设置了数据库的所有用户名和密码。现在，当我浏览页面时，它只显示一个空白页面。之后我只是检查了`.htaccess`文件。现在这个 htaccess 文件被配置为实时服务器环境。现在我对 htaccess 配置没有任何好主意。所以有人可以帮我解决htaccess重定向问题我的`htaccess`代码看起来像这样

```
<IfModule mod_php4.c>
php_value session.use_trans_sid 0
php_value session.cookie_time 3600
php_value session.gc_maxlifetime 3600
#php_value session.cookie_domain ".dummysite.com"
</IfModule>
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_+-]+)\.html $1.php
#RewriteRule 404\.shtml$ 404.php
Options +SymLinksIfOwnerMatch
RewriteBase /
RewriteCond %{HTTP_HOST} .
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST}<>%{REQUEST_URI} ^([A-Za-z0-9]+)\.dummysite\.com<>/([^/]*) 
RewriteCond %1<>%3 !^(.*)<>\1$ [NC]
RewriteRule   ^(.*)$ - [E=USER:%1]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{HTTP_HOST} !^www\. 
RewriteCond %{HTTP_HOST} !^dummysite\.com 
RewriteCond %{ENV:USER} ^(.+)$
RewriteRule ^(.*) company_index.php?uid=%1

RewriteCond %{HTTP_HOST} ^www\.([A-Za-z0-9]+)\.dummysite\.com 
RewriteRule ^(.*) company_index.php?uid=%1

RewriteRule categories\/([a-zA-Z0-9_+-]+)\.html browsecats.php?browse=$1
RewriteRule categories\/([a-zA-Z0-9_+-]+)\/([0-9]+)\/([a-zA-Z0-9_+-]+)\.html browsecats.php?browse=$1&cid=$2
RewriteRule listings\/([a-zA-Z0-9_+-]+)\.html listings.php?browse=$1
RewriteRule listings\/([a-zA-Z0-9_+-]+)\/([0-9]+)\.html listings.php?browse=$1&pg=$2
RewriteRule listings\/([a-zA-Z0-9_+-]+)\/([0-9]+)\/([a-zA-Z0-9_+-]+)\.html listings.php?browse=$1&cid=$2
RewriteRule listings\/([a-zA-Z0-9_+-]+)\/([0-9]+)\/([a-zA-Z0-9_+-]+)\/([0-9]+)\.html listings.php?browse=$1&cid=$2&pg=$4
RewriteRule ^([a-zA-Z0-9_+-]+)\.htm$ $1.html 
```

这里 dummy site 是网站名称。我刚刚更换了它们。那么有人可以告诉我如何在我的 LAMP 服务器上进行设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:46:20.553

有时会显示 500 错误的空白页。显示错误的活动设置

在 php.ini 中更改 error_reporting(E_ALL);

在脚本 ini_set('display_errors', '1');

要知道文件在哪里，请创建一个包含以下内容的脚本

//命名脚本infophp.php

```
<?php
phpinfo();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:36:50.377

这很简单

1）。转到 LAMP -> apache -> apachemodules，在这里通过检查打开“rewrite_module”。

2）。重新启动服务器。

# python - 从特定范围内生成一组排序的随机数

> ID：14748910
> 
> 赞同：6
> 
> 时间：2013-02-07T10:31:40.000
> 
> 标签：python, random, generator

我想生成一组 x 唯一的随机数并在 Python 中对它们进行排序。例如：范围(1000, 10000) x = 100

我已经想出导入随机数并使用 random.randrange 方法，然后循环获取 100 个随机数，最后对它们进行排序。

但是，我不知道如何获得唯一的数字（这样它们就不会重复） - 我应该验证每个循环吗？或者还有其他更简单的方法吗？我应该如何对它们进行排序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-07T10:34:35.470

采用[`random.sample`](http://docs.python.org/3/library/random.html#random.sample)

```
numbers = random.sample(xrange(1000, 10000), 100)  # or `range` in Python 3 
```

排序部分很容易 - 使用该[`list.sort`](http://docs.python.org/3/library/stdtypes.html#list.sort)方法。

```
numbers.sort() 
```

默认情况下，这会将其从最小数字排序到最大数字，但它需要一个可选`key`参数来确定对其进行排序。

还有一个[`sorted`](http://docs.python.org/3/library/functions.html#sorted)函数不会就地修改列表，而是返回一个排序列表。

```
numbers_sorted = sorted(numbers) 
```

这也有一个可选`key`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-26T23:44:09.927

[`more_itertools`](https://github.com/erikrose/more-itertools)实现[`random_combinations`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.random_combination) itertools 配方，`r`如果给定一个排序的输入，它返回排序的随机数。

```
import more_itertools as mit

mit.random_combination(range(1000, 10000), r=100)
# (1016, 1112, 1233, 1367, 1446, 1460, 1518, 1807, 1832, 1956, ...) 
```

这与`random.sample`返回未排序结果的 不同。

* * *

**细节**

查看配方，我们可以看到为什么要建立这个顺序。

从[itertools 食谱](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.random_combination)：

```
def random_combination(iterable, r):
    """Return a random *r* length subsequence of the elements in *iterable*.
        >>> random_combination(range(5), 3)  # doctest:+SKIP
        (2, 3, 4)
    This equivalent to taking a random selection from
    ``itertools.combinations(iterable, r)``.
    """
    pool = tuple(iterable)
    n = len(pool)
    indices = sorted(sample(range(n), r))
    return tuple(pool[i] for i in indices) 
```

`range()`本质上是排序的，并成为`pool`从中选择随机元素的。尽管索引是随机选择的，但它们稍后会被排序。由于`pool`和`indices`都已排序，因此结果也已排序。

总之，这与@Volatility 的答案相同，只是为您处理排序。

*Cavaet*：[`random_combinations`](https://more-itertools.readthedocs.io/en/latest/api.html#more_itertools.random_combination)要求迭代的长度超过 的值`r`，否则会引发错误。

# java - 复制字段但跳过空值的时尚方式

> ID：14748920
> 
> 赞同：2
> 
> 时间：2013-02-07T10:31:59.423
> 
> 标签：java, pojo

我正在将 XML 读入 JAXB pojos，并希望将字段合并到我的实体 pojos。但是，如果 XML 中的值为 null（即 XML 中不存在该值），我不想覆盖现有值。所以现在我有很长的代码集是这样的：

```
 if (addressDetails.getNAME1() != null) {
            org.setName1(addressDetails.getNAME1());
        }
        if (addressDetails.getNAME2() != null) {
            org.setName2(addressDetails.getNAME2());
        }
        if (addressDetails.getNAME3() != null) {
            org.setName3(addressDetails.getNAME3());
        } 
```

这是丑陋、嘈杂和声纳对圈复杂性的尖叫。你会怎么做呢？想到的事情：

*   util 使用反射（速度慢且类型不安全）
*   包装类到实体类（详细，样板）

我的目标是可读且没有大量额外代码的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:59:57.920

看看 Google 的 Guava 代码库。它有一些处理空值的实用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T11:19:18.313

这是一个基于 Spring 的[BeanUtils 类](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework/spring-beans/3.0.3.RELEASE/org/springframework/beans/BeanUtils.java#BeanUtils.copyProperties%28java.lang.Object%2Cjava.lang.Object%2Cjava.lang.String%5B%5D%29)的灵活但**缓慢的解决方案**

```
PropertyDescriptor[] descriptors = getPropertyDescriptors(YourSourceClass.class);
List<String> ignoredProperties = new ArrayList<String>();
for(PropertyDescriptor pd : descriptors){
    if(pd.getReadMethod().invoke(yourSourceObject) == null){
        ignoredProperties.add(pg.getBaseName());
    }   
}

BeanUtils.copyProperties(yourSourceObject, yourTargetObject, ignoredProperties.toArray()); 
```

它无需为您可能想要设置的每个字段编写显式的 null 检查、getter 和 setter。

如果你想避免反射，你可以缩短这个结构：

```
if (addressDetails.getNAME3() != null) {
        org.setName3(addressDetails.getNAME3());
} 
```

使用像番石榴这样的实用方法[`Objects.firstNonNull`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/Objects.html#firstNonNull)

```
 org.setName3(Objects.firstNonNull(addressDetails.getNAME3(), org.getName3())); 
```

这不会帮助您避免为每个属性编写一行，但无论如何它会大大缩短代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-07T10:34:07.047

我建议使用反射（当然通过 BeanUils 类库），它可以巧妙地完成这项工作。

# ios - Kal 数据源代表

> ID：14748922
> 
> 赞同：0
> 
> 时间：2013-02-07T10:32:00.683
> 
> 标签：ios, objective-c

我正在使用 Kal [https://github.com/klazuka/Kal](https://github.com/klazuka/Kal)来实现日历。我正在使用情节提要，因此我将 KalViewController 作为子项添加到容器视图控制器中。

```
kal.delegate = self;

kal.dataSource = dataSource;

dataSource = [[CalendarDataSourceDelegate alloc] init];

kal = [[KalViewController alloc] init];

[self addChildViewController:kal];
[kal didMoveToParentViewController:self];
[self.calendarioView addSubview:kal.view];

[clickEvent insertPrintAdd:zona_competicion]; 
```

我使用外部对象作为数据源委托，但是在通过 web 服务从我的后端获取数据后，我不知道如何调用委托来加载带有获取数据的日历：

```
@implementation CalendarDataSourceDelegate

    - (id)init
    {
        if ((self = [super init])) {
            items = [[NSMutableArray alloc] init];
            matches = [[NSMutableArray alloc] init];
            buffer = [[NSMutableData alloc] init];

        }
        [self fetchHolidays];

        return self;
    }

    - (eventMatch *)eventAtIndexPath:(NSIndexPath *)indexPath
    {
        return [items objectAtIndex:indexPath.row];
    }

    #pragma mark UITableViewDataSource protocol conformance

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *identifier = @"MyCell";
        eventNoAddedCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
        if (!cell) {
            cell = [[eventNoAddedCell alloc] initWithStyle:UITableViewCellSelectionStyleNone reuseIdentifier:identifier];
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            cell.imageView.contentMode = UIViewContentModeScaleAspectFill;
        }

        eventMatch *event = [self eventAtIndexPath:indexPath];

        cell.escudoLocal.image =  [UIImage imageNamed:[NSString stringWithFormat:@"%@.png",event.equipoLocal ]];
        cell.escudoVis.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@.png",event.equipoVisitante ]];
        cell.equipoLocal.text = event.equipoLocal;
        cell.equipoVisitante.text = event.equipoVisitante;
        cell.competicion.text = event.competicion;
        cell.jornada.text = event.jornada;
        cell.hora.text = event.hora;
        cell.canalesTV.text = event.canalesTV;

        [self fetchHolidays];

        return cell;
    }

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        return [items count];
    }

    #pragma mark Fetch from the internet

    - (void)fetchHolidays
    {
        NSString *urlStr = [NSString stringWithFormat:@"http://backend.exular.net/contenido/webservices/xlr_ws_calendario.php?idp=105"];
        dataReady = NO;
        [matches removeAllObjects];
        conn = [NSURLConnection connectionWithRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlStr]] delegate:self];
        [conn start];
    }

    - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
    {
        [buffer setLength:0];
    }

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
    {
        [buffer appendData:data];
    }

    - (void)connectionDidFinishLoading:(NSURLConnection *)connection
    {
        NSError *error=nil;

        NSDictionary *tempDic = [NSJSONSerialization JSONObjectWithData:buffer options:kNilOptions error:&error];

        NSArray *array = [tempDic valueForKey:@"nodes"];

        NSDateFormatter *fmt = [[NSDateFormatter alloc] init] ;
        [fmt setDateFormat:@"dd/MM/yyyy"];
        for (NSDictionary *jornada in array) {
            NSDate *d = [fmt dateFromString:[jornada objectForKey:@"fecha"]];
            [matches addObject:[eventMatch equipoVisitante:[jornada valueForKey:@"id_visitante"] equipoLocal:[jornada valueForKey:@"id_local"] resultadoVisitante:[jornada valueForKey:@"res_visitante"] resultadoLocal:[jornada valueForKey:@"res_local"] canalesTV:[jornada valueForKey:@"cadenas"] date:d time:[jornada valueForKey:@"hora"] jornada:[jornada valueForKey:@"jornada"] competicion:[jornada valueForKey:@"competicion"]]];    }

        dataReady = YES;
        [callback loadedDataSource:self];

    }

    -(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
    {
        NSLog(@"HolidaysCalendarDataSource connection failure: %@", error);
    }

    #pragma mark KalDataSource protocol conformance

    - (void)presentingDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate delegate:(id<KalDataSourceCallbacks>)delegate
    {
        /*
         * In this example, I load the entire dataset in one HTTP request, so the date range that is
         * being presented is irrelevant. So all I need to do is make sure that the data is loaded
         * the first time and that I always issue the callback to complete the asynchronous request
         * (even in the trivial case where we are responding synchronously).
         */

        if (dataReady) {
            [callback loadedDataSource:self];
            return;
        }

        callback = delegate;
        [self fetchHolidays];
    }

    - (NSArray *)markedDatesFrom:(NSDate *)fromDate to:(NSDate *)toDate
    {
        if (!dataReady)
            return [NSArray array];

        return [[self matchesFrom:fromDate to:toDate] valueForKeyPath:@"date"];
    }

    - (void)loadItemsFromDate:(NSDate *)fromDate toDate:(NSDate *)toDate
    {
        if (!dataReady)
            return;

        [items addObjectsFromArray:[self matchesFrom:fromDate to:toDate]];
    }

    - (void)removeAllItems
    {
        [items removeAllObjects];
    }

    #pragma mark -

    - (NSArray *)matchesFrom:(NSDate *)fromDate to:(NSDate *)toDate
    {
        NSMutableArray *matchesUpdate = [NSMutableArray array];
        for (eventMatch *match in matches)
            if (IsDateBetweenInclusive(match.date, fromDate, toDate))
                [matchesUpdate addObject:match];

        return matches;
    }

    - (void)dealloc
    {
        matches=nil;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T22:28:36.987

首先，我觉得奇怪的是你在使用 KalViewController 后分配它，我会按照相反的顺序来做：

```
kal = [[KalViewController alloc] init];
kal.delegate = self;
kal.dataSource = dataSource; 
```

那你为什么不打电话呢？：

```
[kal reloadData]; 
```

# git - 重新设置已分支的分支

> ID：14748929
> 
> 赞同：2
> 
> 时间：2013-02-07T10:32:09.297
> 
> 标签：git, version-control, git-rebase

我正在尝试切断存储库历史的一部分，以便我可以将其移植回存储库，`git replace`如[本文所述](http://git-scm.com/2010/03/17/replace.html)。

本文中描述的案例与我的存储库之间的主要区别在于，我的主分支已经存在分支。在我删除历史后，我想保持这些分支的布局和它们的分支点相同。

我的历史大概是这样的

```
 cut here
      |
      v
o--o--o--o--o--o--o master
            \  \  \
             \  \  o--o   A
              \  o--o--o  B
               o--o--o    C 
```

在“cut here”提交之前，master 没有分支。

我想要实现的是：

```
o--o--o history

initial tree at cut
        |
        v
        o--o--o--o--o master
               \  \  \
                \  \  o--o   A
                 \  o--o--o  B
                  o--o--o    C 
```

这意味着仅在初始树上 rebase master 是不够的，但我还需要在 master 的 rebase 之后在其等效的新提交上重播所有现有分支。我不想只重播新主人上的所有分支，因为那可能会产生冲突。

是否有任何智能且希望自动的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:39:48.543

这些命令将获得您正在寻找的结果：

```
git checkout --orphan temp-branch CUT–COMMIT
git commit // This will create your new initial commit
git rev-parse HEAD // To get the SHA of this commit
git replace CUT-COMMIT NEW-COMMIT
git filter-branch -- --all 
```

如果您对它的工作方式和原因有任何疑问，请感受树来发表评论。在执行此类操作之前，您可能需要备份您的存储库。

**从[过滤器分支文档](http://www.kernel.org/pub/software/scm/git/docs/git-filter-branch.html)**：

> 注意：此命令尊重 .git/info/grafts 和 .git/refs/replace/。如果您定义了任何移植或替换参考，运行此命令将使它们永久化。

# php - Zend 框架错误通知

> ID：14748937
> 
> 赞同：0
> 
> 时间：2013-02-07T10:32:38.963
> 
> 标签：php, mysql, zend-framework

我正在尝试运行此代码..但我收到一条错误消息..

```
Notice: Undefined offset: 0 in C:\wamp\www\address\application\views\scripts\index\index.phtml on line 64
Call Stack
#   Time    Memory  Function    Location
1   0.0006  374544  {main}( )   ..\index.php:0
2   0.0866  4624240 Zend_Application->run( )    ..\index.php:26
3   0.0866  4624240 Zend_Application_Bootstrap_Bootstrap->run( )      ..\Application.php:366
4   0.0867  4624416 Zend_Controller_Front->dispatch( )  ..\Bootstrap.php:97
5   0.0984  5320368 Zend_Controller_Dispatcher_Standard->dispatch( )    ..\Front.php:954
6   0.1136  5637296 Zend_Controller_Action->dispatch( ) ..\Standard.php:295
7   0.1154  5674032 Zend_Controller_Action_HelperBroker->notifyPostDispatch( )  ..\Action.php:527
8   0.1154  5674792 Zend_Controller_Action_Helper_ViewRenderer->postDispatch( ) ..\HelperBroker.php:277
9   0.1155  5674792 Zend_Controller_Action_Helper_ViewRenderer->render( )   ..\ViewRenderer.php:960
10  0.1166  5675008 Zend_Controller_Action_Helper_ViewRenderer->renderScript( ) ..\ViewRenderer.php:921
11  0.1166  5675008 Zend_View_Abstract->render( )   ..\ViewRenderer.php:900
12  0.1168  5716176 Zend_View->_run( )  ..\Abstract.php:888
13  0.1171  5724528 include(   'C:\wamp\www\address\application\views\scripts\index\index.phtml' )  ..\View.php:108 
```

这是我的代码...

```
<?php
if (isset($_POST['search']))
{

$db = new Zend_Db_Adapter_Pdo_Mysql(array(
'host'     => 'localhost',
'username' => 'root',
'password' => '',
'dbname'   => 'addressdb'
));

$db->setFetchMode(Zend_Db::FETCH_OBJ);
$result = $db->fetchAll('SELECT * FROM user WHERE u_name = ?', $_POST['search']);

echo $result[0]->add1;

echo'<br><br><table width="200px" >';
echo'<tr ><th class="search">Name</th><td class="search">:</td><td class="search">'. $_POST['name'].'</td></tr>';
echo'<tr ><th class="search">Address1</th><td class="search">:</td><td class="search">'.$result[0]->add1.'</td></tr>';
echo'<tr ><th class="search">Address2</th><td class="search">:</td><td class="search">how</td></tr>';
echo'<tr ><th class="search">Address3</th><td class="search">:</td><td class="search">are</td></tr>';
echo'<tr ><th class="search">Telephone</th><td class="search">:</td><td class="search">you..</td></tr></table>';

}
?> 
```

谁能告诉我怎么了？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:47:58.810

尝试做：

```
$result = $db->fetchAll('SELECT * FROM user WHERE u_name = ?', $_POST['search']);

$countResult = count($result);
if($countResult > 0 ) {
  echo $result->add1;
}
else {
   ..you dont have any records, show some proper message
} 
```

如果您正在获取单行，那么您可以执行以下操作：

```
$result = $db->fetchRow('SELECT * FROM user WHERE u_name = ?', $_POST['search']);
$countResult = count($result);
if($countResult > 0 ) {
   echo $result->add1;
}
else {
   ..you dont have any records, show some proper message
} 
```

# c - Carmack/Welsh 逆平方根算法是否有偏差

> ID：14748938
> 
> 赞同：6
> 
> 时间：2013-02-07T10:32:40.543
> 
> 标签：c, algorithm, math

在实施[“Carmack 的平方根平方根”算法](https://stackoverflow.com/questions/1349542/john-carmacks-unusual-fast-inverse-square-root-quake-iii)时，我注意到结果似乎有偏差。以下代码似乎给出了更好的结果：

```
float InvSqrtF(float x)
{
    // Initial approximation by Greg Walsh.
    int i  = * ( int* ) &x;
    i  = 0x5f3759df - ( i >> 1 );
    float y  = * ( float * ) &i;
    // Two iterations of Newton-Raphson's method to refine the initial estimate.
    x *= 0.5f;
    float f = 1.5F;
    y  = y * ( f - ( x * y * y ) );
    y  = y * ( f - ( x * y * y ) );
    * ( int * )(&y) += 0x13; // More magic.
    return y;
} 
```

关键区别在于倒数第二个“更神奇”的行。由于初始结果因一个相当恒定的因素而太低，因此只需一条指令即可将 19 * 2^(exponent(y)-bias) 添加到结果中。它似乎给了我大约 3 个额外的位，但我是否忽略了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T20:53:03.870

牛顿法会产生偏差。要找到其零的函数，

```
f(y) = x - 1/y² 
```

是凹的，所以 - 除非你从一个开始`y ≥ √(3/x)`- 牛顿方法只产生近似值`≤ 1/√x`（并且严格更小，除非你从精确的结果开始）与精确的算术。

浮点运算偶尔会产生太大的近似值，但通常不会在前两次迭代中产生（因为初始猜测通常不够接近）。

所以是的，存在偏差，添加少量通常会改善结果。但不总是。例如，在 1.25 或 0.85 附近的区域，没有调整的结果要好于有调整的结果。在其他地区，调整会产生一点点额外的精度，在其他地区会更多。

`x`在任何情况下，应将要添加的魔法常数调整到最常从中获取最佳结果的区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T19:33:29.077

由于此方法是一种近似值，因此结果有时会被高估，而有时会被低估。您可以在[McEniry 的论文](http://www.daxia.com/bibis/upload/406Fast_Inverse_Square_Root.pdf "麦肯尼纸")中找到一些关于此错误如何针对不同配置分布的不错的数字，以及它们背后的数学原理。

因此，除非您有可靠的证据证明在您的应用领域中结果明显有偏差，否则我宁愿按照[Lomont 的文档](http://www.lomont.org/Math/Papers/2003/InvSqrt.pdf "克里斯·洛蒙论文")中的建议调整魔法常数:-)

# android - 创建自定义列表或网格视图

> ID：14748946
> 
> 赞同：4
> 
> 时间：2013-02-07T10:33:03.077
> 
> 标签：android, android-arrayadapter, baseadapter

在创建自定义列表/网格视图时，我知道要创建自定义适配器。我对何时使用阵列适配器/基本适配器来创建自定义视图感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:43:14.190

对于带有图像和文本的 Android 自定义 ListView，您可以参考本教程 [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

如果你有任何问题，你可以在这里问...

基本上

**列表适配器**

扩展适配器，它是 ListView 和支持列表的数据之间的桥梁。

**基础适配器**

可以在 ListView（通过实现专门的 ListAdapter 接口}和 Spinner（通过实现专门的 SpinnerAdapter 接口）中使用的 Adapter 通用实现的通用基类。

**阵列适配器**

由任意对象数组支持的具体 BaseAdapter。

请参考以下链接

[列表适配器](http://developer.android.com/reference/android/widget/ListAdapter.html)

[基础适配器](http://developer.android.com/reference/android/widget/BaseAdapter.html)

[阵列适配器](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

# php - 1 到多个 mysql 语句加上显示图像和文本

> ID：14748952
> 
> 赞同：0
> 
> 时间：2013-02-07T10:33:36.250
> 
> 标签：php, mysql, one-to-many

大家好，我对这个一对多的声明有一点问题。我在 mysql 数据库和文件夹中添加图像，这部分是完美的。但是当我想展示它们时，这是我最棘手的部分。我不知道我创建数据库的方式或代码中的问题出在哪里。所以这里有两个：

我的两个表是 text 和 imagess 在 text 表中： text_id - 主要 text_field - 唯一

在 imagess 表中： id - 主要名称标题路径

我的代码是这样的：

```
 <?php

     $result = mysql_query("SELECT * FROM text text_id, imagess id WHERE (text_id=id AND text_field=title) ");

     while($row = mysql_fetch_assoc($result)){
     echo '<br>№'.$row['text_id'].'<br>';

     echo''.$row['title'].'<br>'
     .$row['text_field'];

     echo'<br><img src="'.$row['path'].'?url='.$row['path'].'/>';
     }

     ?> 
```

我的目标是学习如何用 2-3 张图片显示 1 个标题 + 文字。我希望有人能解释我的错误在哪里，因为从我正在阅读的书中没有这样的事情。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:41:17.587

在一对多的关系中，您必须忽略“1”的多次出现。您还必须在外键上加入您的 imagess 表。您的查询中有错误，“FROM text text_id”表示您在名为 text_id 的文本上创建了别名。

```
<?php
 $currentTextId = -1;
 $result = mysql_query("SELECT * FROM text, imagess WHERE (text.text_id=imagess.text_id) ORDER BY text.text_id");

 while($row = mysql_fetch_assoc($result)){
     if($row['text_id']!=$currentTextId){
         $currentTextId=$row['text_id']
         echo '<br>№'.$row['text_id'].'<br>';
     }

     echo''.$row['title'].'<br>'.$row['text_field'];
     echo'<br><img src="'.$row['path'].'?url='.$row['path'].'/>';
 }

 ?> 
```

# python - Python 字符串列表：如何从两个字符串列表的比较中检索唯一值？

> ID：14748954
> 
> 赞同：0
> 
> 时间：2013-02-07T10:33:41.243
> 
> 标签：python, python-2.7

我有 2 个长度不等、未排序的字符串列表，我想检索较长列表中唯一的值。我使用的真实列表包含数千个值。listA 中的值总是在 listB 中找到。所有值只能在给定列表中找到一次。

例子 ：

listA = ['b0001', 'b0003', 'b0007', 'b0004'] listB = ['b0001', 'b0005', 'b0007', 'b0017', 'b0004', 'b0003', 'b0002', 'b0432']

预期结果 ：

listC = 'b0005', 'b0017', 'b0002', 'b0432']

我尝试使用 set 函数和交集或 enumerate 函数，但最终得到错误...

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T21:08:05.743

一个更合适的方法是使用集合。

```
setA = set(listA)
setB = set(listB)
listC = list(setB - setA) 
```

这里的减号表示集合 B 和 A 之间的差异。

此致

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:39:09.803

使用列表理解：

```
>>> listC = [item for item in listB if item not in listA]
>>> listC
['b0005', 'b0017', 'b0002', 'b0432'] 
```

# c# - 脚本无法从后面的代码中运行

> ID：14748955
> 
> 赞同：1
> 
> 时间：2013-02-07T10:33:48.330
> 
> 标签：c#, javascript, jquery, asp.net

单击framedialog内容页面内的下载按钮后，我需要关闭下载窗口（使用jquery framedialog打开）。我正在创建一个单独的 iframe 来发送下载文件作为响应：（Download.aspx 根据文件 ID 将文件发送到客户端）

```
var script = @"<script language=JavaScript>function Export(fileID)
                            {
                                    var iframe = document.createElement('iframe');
                                    iframe.src = 'DownloadForm.aspx?ID='+ fileID;
                                    iframe.style.display = 'none';
                                    document.body.appendChild(iframe);
                                    //alert('AlertBox'); 
                            }
                            </script>"; 
Page.ClientScript.RegisterStartupScript(typeof(string), "Startup", script); 
```

完成下载后，我将关闭下载窗口。但我的问题是，如果我使用注释的 alertBox，那么我的两个代码都可以正常工作（下载并关闭）。但我希望它在没有警报框的情况下发生。当我不使用警告框时，不会调用 Download.aspx 页面。（我认为脚本在我注册时不会发送到客户端，并且警报框正在让它做某事）..不知道它为什么会发生..请帮助..提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:35:26.127

试试这个

```
Page.ClientScript.RegisterStartupScript(getType(), "Startup", script, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:39:02.483

您可以改为使用：

`ScriptManager.RegisterStartupScript(this, GetType(), "StartupScript", script, true);`

在哪里`script`：

```
var script = @"function Export(fileID)
                            {
                                    var iframe = document.createElement('iframe');
                                    iframe.src = 'DownloadForm.aspx?ID='+ fileID;
                                    iframe.style.display = 'none';
                                    document.body.appendChild(iframe);
                                    //alert('AlertBox'); 
                            }
                            //Export(YourFileIDHere);"; 
```

但是，您还应该注意，代码仅定义了要包含在脚本中的函数。您不要在 JS 代码中的任何地方调用此函数。（所以我已经包含了一个注释代码，可以取消注释以执行函数，使用适当的`fileID`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-07T10:44:18.857

用这个..

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "function   name", true); 
```

对于您的情况，它将是。

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "Export(file Id);", true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T05:50:39.740

我找到了解决我的问题的方法。基本上我在客户端完成下载之前关闭了下载窗口。所以，我在下载窗口的父页面中添加了下载（隐藏）文件的框架，然后我关闭了下载窗口

# java - JSF 动态导航

> ID：14748963
> 
> 赞同：1
> 
> 时间：2013-02-07T10:34:10.273
> 
> 标签：java, jsf-2, navigation, el

我对 JSF 动态导航有一些问题。我正在使用 JSF 2.2 版本。我正在尝试组织动态导航

```
<h:commandButton value="Enter" action="loginController.result"> 
```

登录控制器.java

```
import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
@SessionScoped
public class LoginController implements Serializable {

private static final long serialVersionUID = 1L;

public String result(){
    return "register";
}

} 
```

它不起作用。当我尝试转到所需的页面时，它写道：“无法找到与 from-view-id '/index.xhtml' 匹配的导航案例，用于操作 'loginController.result' 和结果 'loginController.result'”。我试图返回 "register.xhtml","\register.xhtml","\register" 等。但它也没有用。当我写：

```
<h:commandButton value="Enter" action="register"> 
```

它正在正常工作。我知道让它工作的方法是什么。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:56:25.293

您必须使用 EL 表达式，以便 JSF 调用您的 JSF bean 方法：

```
<h:commandButton value="Enter" action="#{loginController.result}"> 
```

否则，`action`属性的值将被解释为字符串文字，这就是为什么您*在*使用`action="register"`.

# javascript - 一次性替换 javascript 中的所有内容

> ID：14748967
> 
> 赞同：-2
> 
> 时间：2013-02-07T10:34:13.260
> 
> 标签：javascript

我必须用（一个引号）替换`""`（两个引号`"`）。我用了：

```
string.replace(/""/g,'"') 
```

但如果它有`""""`（四个引号），它会用`"`（一个引号）替换它再次用（一个引号）替换`""`（两个引号`"`）。

我需要`""""`（四个引号）应该替换为`""`（两个引号）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:59:04.167

您在问题中提供的代码已经**完全按照**您所说的做：

```
'I like """"orange"""" and ""apple""'.replace(/""/g,'"');
// Returns:
'I like ""orange"" and "apple"'

'""'.replace(/""/g,'"');
// Returns:
'"'

'""""'.replace(/""/g,'"');
// Returns:
'""' 
```

除非您在问题中遗漏了某些信息，否则没有什么可以解决的。

出于这个原因，我相信问题出在您的代码中的其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:45:55.280

如果你想用两个引号替换四个引号，这样做：

```
var string = "\"\"\"\"";
string = string.replace("\"\"\"\"", "\"\"") 
```

# orchardcms - 内容类型在 Orchard 中“可创建”（或不可创建）到底意味着什么？

> ID：14748969
> 
> 赞同：1
> 
> 时间：2013-02-07T10:34:17.873
> 
> 标签：orchardcms

在 Orchard 中定义内容类型时，可以选择是否使其“可创建”。据我所知，可以通过管理仪表板创建（和编辑）可创建类型。副作用似乎是，如果一个类型不可创建，即使是该类型的现有项目也无法编辑（它们根本没有列在“内容”下），我觉得这有点违反直觉。

除了在管理仪表板中的可见性之外，将内容类型标记为**不可创建还有其他含义吗？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T18:43:01.973

这意味着它出现在“新建”管理菜单项和内容管理屏幕下。就这些。这就是它的意思。

不可创建类型与任何其他类型一样可编辑，但您需要为它们提供自己的管理链接。

# c# - C# 更改单个 DateTime 的格式

> ID：14748970
> 
> 赞同：0
> 
> 时间：2013-02-07T10:34:25.547
> 
> 标签：c#, datetime, formatting

我正在创建第三方库使用的 DateTimes（我当然无法控制）。我正在使用这个 3rd 方库来编写一些文件，包括我正在创建的 DateTimes。

我想以不同的格式打印我的日期，但我无法控制第三方如何转换 DateTime，并且我无法在每个 DateTime 转换之间更改我的文化信息，我也不能继承 DateTime 来覆盖 ToString（就像没有人一样能够）。

有没有办法将特定格式绑定到 DateTime 以便每次调用 ToString 方法都使用这种格式？

```
DateTime firstDate = new DateTime(2013, 02, 07); //I would like this DateTime to be printed this way: 2013-02-07
DateTime secondDate = new DateTime(2013, 02, 07); //I would like this DateTime to be printed this way: Thursday, February 07, 2013

thirdPartyLib.SetFirstDate(firstDate);
thirdPartyLib.SetSecondDate(secondDate);
thirdPartyLib.PrintBothDate(); //This method convert both DateTime in strings 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T12:15:29.067

如果您确定 set datetime 方法将调用`ToString()`并将其保存在您的第三方库中，那么您可以使用以下类

```
public static class ThirdPartyLibHelper {
    public static void SetSecondDate(DateTime dateTime) {
        Thread.CurrentThread.CurrentCulture=new System.Globalization.CultureInfo("en-Us");
        var dateTimeFormat=Thread.CurrentThread.CurrentCulture.DateTimeFormat;
        dateTimeFormat.SetAllDateTimePatterns(new[] { "" }, 'T');
        dateTimeFormat.SetAllDateTimePatterns(new[] { "yyyy-MM-dd" }, 'd');
        thirdPartyLib.SetSecondDate(dateTime);
    }

    public static void SetFirstDate(DateTime dateTime) {
        Thread.CurrentThread.CurrentCulture=new System.Globalization.CultureInfo("en-Us");
        var dateTimeFormat=Thread.CurrentThread.CurrentCulture.DateTimeFormat;
        dateTimeFormat.SetAllDateTimePatterns(new[] { "" }, 'T');
        dateTimeFormat.SetAllDateTimePatterns(new[] { "dddd, MMMM dd, yyyy" }, 'd');
        thirdPartyLib.SetFirstDate(dateTime);
    }
} 
```

测试代码

```
DateTime firstDate=new DateTime(2013, 02, 07);
DateTime secondDate=new DateTime(2013, 02, 07);

ThirdPartyLibHelper.SetSecondDate(firstDate);
var secondDateString=secondDate.ToString();

ThirdPartyLibHelper.SetFirstDate(firstDate);
var firstDateString=firstDate.ToString();

Debug.Print("{0}", firstDateString);
Debug.Print("{0}", secondDateString); 
```

如果您的库在您调用`SetFirstDate()`or时没有将日期时间保存为格式化字符串`SetSecondDate()`，则它不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:41:51.460

试试这个（分配给具有特定格式的字符串）；

> 每次调用**ToString**方法都会使用这种格式？

```
string firstDate = new DateTime(2013, 02, 07).ToString("yyyy-MM-dd");
string secondDate  = new DateTime(2013, 02, 07).ToString("dddd, MMMM dd, yyyy"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T10:49:07.463

无法在`DateTime`您希望用于`ToString()`方法的格式中进行设置。

`System.DateTime`是一个`sealed`类，这意味着你不能扩展。
相反，您可以创建自己的 Date 类，以便您可以指定它。

```
public class DateTimeWithFormat
{

  public DateTime Date {get; set;}
  public string Format {get; set;}

  //ToString override using custom format
  public override string ToString 
   {
     return Date.ToString (Format);
     }    

 //Constructor sets date and format
  public DateTimeWithFormat( DateTime date, string format )
   {
     Date= date;
     Format = format;
    }
} 
```

这样你就可以使用这种方式

```
DateTimeWithFormat firstDate = new DateTimeWithFormat(
           new DateTime(2013, 02, 07),
           "yyyy-MM-dd");
DateTime secondDate = new DateTimeWithFormat(
           new DateTime(2013, 02, 07),
           "dddd") ; 
```

**`thirdPartyLib`必须改为使用`DateTimeWithFormat` 而不是`DateTime`**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T10:56:28.160

根据您问题中提供的信息，解决此问题的唯一方法是实现您自己的打印库。

或者如果 3rd 方库是可扩展的（我怀疑它，因为你提到你无法控制它）然后覆盖`PrintBothDate()`以满足你的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-07T10:59:26.590

不幸的是，这是不可能的。你必须解决这个问题：

```
thirdPartyLib.SetFirstDate(firstDate);
thirdPartyLib.SetSecondDate(secondDate);
thirdPartyLib.PrintString(firstData.ToString(firstDateFormatting)); //Assuming such a method exists
thirdPartyLib.PrintString(secondDate.ToString(secondDateFormatting)); 
```

# file - 使用虚拟主机模板

> ID：14748974
> 
> 赞同：1
> 
> 时间：2013-02-07T10:34:31.370
> 
> 标签：file, dynamic, nginx, debian, vhosts

我在 Debian 上使用 nginx。因此，除了主配置文件 /etc/nginx/nginx.conf 之外，还有文件夹 /etc/nginx/sites-available/ 带有 vhost 配置文件和 /etc/nginx/sites-enabled/ 带有指向活动 vhost 的链接。

所以让我先问我的问题。因为解释很长，也许你不需要阅读它......

* * *

*我希望能够像这样使用几个虚拟主机模板：*

```
server {
    listen   80;
    server_name ~^(?<project>.+)\.(?<area>.+)\.loc$;

    if ($host ~ ^(?<project>.+)\.(?<area>.+)\.loc$) {
        set $folder "$area/$project";
    }
    ...
    access_log /var/log/nginx/$area/$project.access.log;
    error_log /var/log/nginx/error.log;
    ...
    root /var/www/$folder/;
    ...
} 
```

*并定义哪个虚拟主机基于哪个模板。此外，有可能“扩展”模板会很棒，这样我就可以向我的虚拟主机添加新设置并重新定义从模板继承的设置。*

*我怎样才能实现它？*

* * *

我当前的 vhost 文件结构如下所示：

/etc/nginx/sites-available 包含以下文件：

> 默认（默认虚拟主机） ax-common-vhost （虚拟主机模板） test.sandbox.loc （基于模板 ax-common-vhost 的虚拟主机；它包括`include`规则）...还有一些其他的...

/etc/nginx/sites-available 包含以下文件：

> 默认 -> /etc/nginx/sites-available/default test.sandbox.loc -> /etc/nginx/sites-available/test.sandbox.loc ...还有一些其他的...

模板 ax-common-vhost 使用服务器名称动态定义了一些选项，例如根文件夹：

```
server {
    listen   80;
    server_name ~^(?<project>.+)\.(?<area>.+)\.loc$;

    if ($host ~ ^(?<project>.+)\.(?<area>.+)\.loc$) {
        set $folder "$area/$project";
    }
    ...
    access_log /var/log/nginx/$area/$project.access.log;
    error_log /var/log/nginx/error.log;
    ...
    root /var/www/$folder/;
    ...
} 
```

所以当我想创建一个新的虚拟主机时，我只需创建一个新的虚拟主机文件和一个指向它的链接——并且不需要复制和粘贴设置并手动设置路径。我只需要遵循约定，主机 %project%.%area%.loc 必须放在 [my webroot]/%area%/%project%

我想，它适用于包含规则：服务器获取请求 xyloc，查找名为 so 的文件，打开文件，最后处理其中的指令（因此包含指令和包含模板的全部内容） .

但事实并非如此。Nginx 似乎只是扫描整个文件夹 /etc/nginx/sites-available/ （按字母顺序？）并保留第一个文件 /`server`请求中的主机名等于/匹配的指令。

这意味着，包括

```
include /etc/nginx/sites-available/ax-common-vhost; 
```

未使用。实际上，我已经从 vhost 文件中删除了包含指令——没有任何改变！

这是一个问题。因为当我添加一个新模板时，例如我的 Zend Framework 项目（使用 [project root]/public/ 作为 root）：

文件 ax-zf-vhost

```
server {
    listen   80;
    server_name ~^(?<project>.+)\.(?<area>.+)\.loc$;

    if ($host ~ ^(?<project>.+)\.(?<area>.+)\.loc$) {
        set $folder "$area/$project";
    }
    ...
    access_log /var/log/nginx/$area/$project.access.log;
    error_log /var/log/nginx/error.log;
    ...
    root /var/www/$folder/public/;
    ...
} 
```

...，它被忽略了，因为服务器没有得到任何关于 vhost myzf.sandbox.loc 基于 ax-zf-vhost 的信息。而不是这个，它只是循环 /etc/nginx/sites-available/ 文件夹，找到 ax-common-vhost，myzf.sandbox.loc 匹配模式 ^(?.+).(?.+).loc$,并且 nginx 使用 ax-common-vhost 作为 myzf.sandbox.loc。

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T13:16:45.053

好的，现在可以使用了！

我已经更改了基本 vhost 文件的 server_name 块，因此它只处理具有指令中列出的主机名的请求：

文件 ax-common-vhost：

```
server {
    listen   80;
    server_name test.sandbox.loc foo.sandbox.loc bar.sandbox.loc;
    ...
} 
```

而不是通用的`server_name ~^(?<project>.+)\.(?<area>.+)\.loc$;`.

不需要 /etc/nginx/sites-available/ 中的 vhost 文件 test.sandbox.loc、foo.sandbox.loc、bar.sandbox.loc 等以及 /etc/nginx/sites-enabled/ 中指向它们的链接了。我已经创建了 /etc/nginx/sites-enabled/ax-common-vhost 到 /etc/nginx/sites-available/ax-common-vhost 的链接。

第二个通用 vhost 文件的方法是相同的，并且有效。

第一个问题得到解决：设置可以由多个虚拟主机/服务器块共享，我可以轻松添加新虚拟主机而无需重复设置。

但是：具有设置的 vhost 文件不能被另一个文件扩展。**是否可以这样做，以便文件 B 可以“扩展”文件 A、继承其设置并仅覆盖指令/规则？我怎么能意识到这一点？**

# iphone - 在表格视图单元格中动态更改按钮

> ID：14748982
> 
> 赞同：0
> 
> 时间：2013-02-07T10:34:59.903
> 
> 标签：iphone, ios, objective-c, macos, uitableview

我有一张桌子，里面有 5 个单元格。每个单元格中都有一个按钮。我需要在某些情况下动态更改这些按钮。如何在表格视图中动态更改按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:37:53.980

您可以做的是编写一个函数来更改按钮的值，然后您可以调用该函数。更改按钮值后，请使用以下任何一种方法：

您可以使用 :`[tableview reloadData];`重新加载所有表数据。

或者

您可以使用以下方法重新加载特定行：

`[tableview reloadRowsAtIndexPaths: indexPath withRowAnimation:anyKindOfAnimation];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T10:39:09.107

您可以通过 查询所有可见单元格的表格视图`-visibleCells`，获取按钮的引用（假设您有一个`UITableViewCell`带有按钮属性的子类）并更改它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T08:15:58.207

首先，您需要为每个按钮设置标签。这可以通过

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
//Your code
cell.Button.tag = indexPath.row;
[cell.Button addTarget:self action:@selector(buttonClick1:) forControlEvents:UIControlEventTouchUpInside]; 
```

}

然后你可以从这个方法中获取按钮

```
- (IBAction)buttonClick1:(id)sender {

int tagNo =[sender tag];
UITableViewCell *cellclicked = [self.tblProfileFollowing cellForRowAtIndexPath:[NSIndexPath indexPathForRow:tagNo inSection:0]];
//Now change the action for the cell
[cellclicked.Button addTarget:self action:@selector(buttonClick2:) forControlEvents:UIControlEventTouchUpInside];

//Your Code 
```

}

您可以按照相同的步骤 **- (IBAction)buttonClick2:(id)sender**

现在您可以跟踪单击了哪个按钮并更改该按钮的方法。

并声明你的 cell 和 button **strong**。

# map - 将 Google Map SDK 添加到 iOS6 时将错误无法识别的选择器发送到类

> ID：14748986
> 
> 赞同：13
> 
> 时间：2013-02-07T10:35:11.293
> 
> 标签：map, sdk, ios6, google-maps-sdk-ios

这是一个单视图应用程序，我按照链接 [https://developers.google.com/maps/documentation/ios/start](https://developers.google.com/maps/documentation/ios/start) 中的说明将谷歌地图 SDK 添加到 iOS6。错误是：

```
unrecognized selector sent to class 0xe2b0
2013-02-07 15:21:29.788 mapApp[2061:12e03] *** Terminating app due to uncaught exception     
'NSInvalidArgumentException', reason: '+[GMSCameraPosition    
cameraWithLatitude:longitude:zoom:]: unrecognized selector sent to class 0xe2b0' 
```

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
   // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;

   //initializing google map api key
   [GMSServices provideAPIKey:@"google's api key goes here"];

   [self.window makeKeyAndVisible];
   return YES; 
```

}

视图控制器.m

```
#import "ViewController.h"
#import <GoogleMaps/GoogleMaps.h>
@interface ViewController ()

@end

@implementation ViewController
{
    GMSMapView *mapView;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

   GMSCameraPosition *cam = [GMSCameraPosition cameraWithLatitude:13.0245231 
                                                        longitude:77.64072579999993                
                                                             zoom:6];

   mapView = [GMSMapView mapWithFrame:CGRectZero camera:cam];
   mapView.myLocationEnabled = YES;

   GMSMarkerOptions *options = [[GMSMarkerOptions alloc]init ];
   options.position = CLLocationCoordinate2DMake(13.025738,77.637809);
   options.title = @"ensign";
   options.snippet = @"kalyan nagar";

   [mapView addMarkerWithOptions:options];

} 
```

主文件

```
#import <UIKit/UIKit.h>
#import <GoogleMaps/GoogleMaps.h>
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv,nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

在跟踪错误时，它在执行第一行后来自方法的`return`语句中显示`main.m``-viewDidLoad`

```
GMSCameraPosition *cam = [GMSCameraPosition cameraWithLatitude:13.0245231 
                                                    longitude:77.64072579999993                
                                                         zoom:6]; 
```

它逃脱了其余的行。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-08T00:07:08.063

[您是否在说明](https://developers.google.com/maps/documentation/ios/start#adding_the_google_maps_sdk_for_ios_to_your_project)`-ObjC`的第 7 步中添加了其他链接器标志？

-- 额外信息编辑：注意`-ObjC`区分大小写。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T03:27:59.537

我有同样的问题。确保将 -ObjC 标志添加到“目标”而不是“项目”的“构建设置”中。

PS 在这两个地方添加它也不会破坏它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T12:05:57.530

谷歌文档说选择你的项目，而不是一个特定的目标，然后打开构建设置选项卡。在其他链接器标志部分中，添加 -ObjC。如果这些设置不可见，请将 Build Settings 栏中的过滤器从 Basic 更改为 All。有时这是错误的......我还必须将链接器标志添加到目标中，以使其正常工作。这应该可以帮助某人

# c# - MVC 4 / 实体框架中的自定义查询？

> ID：14748988
> 
> 赞同：1
> 
> 时间：2013-02-07T10:35:23.450
> 
> 标签：c#, asp.net, sql, asp.net-mvc-4

我目前有一个使用 ASP.net MVC 4 和实体框架构建的工作 CRUD 应用程序。我对表使用 EDMX 模型，这些表部署在实时服务器上的数据库中。

我想知道如何查询我的控制器中的表以返回一个视图，该视图包含每个表（连接）中的列，作为一个表，基于从查询字符串返回的列标题

这些是我的表，我在它们各自的模型中有获取器和设置器，模型是“Model1.edmx”

```
AccCompany                             AccControl
    ID                                     ID
    Code                                   ControlCode
    CompanyID                              Nominal
    AccountsCompany                        CostCentre
    Company                                Department 
```

我只是不明白如何使用自定义方法加入表格，作为 MVC 框架。EF 似乎自己做所有事情 - 就实际查询而言......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T11:40:53.337

如果我正确理解您的问题，那就是您所需要的

```
var views = from company in context.AccCompany
            join control in context.AccControl 
              on company.Code equals control.ControlCode
            where company.Code == Request.QueryString["Code"]
            select new JoinedView 
            { 
                CompanyId: company.CompanyID, 
                Code: company.Code,
                ControlId: controlId, 
                Nominal: control.Nominal
                // any other columns you need
            } 
```

其中 JoinedView 是一个包含来自两个实体的列的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T11:56:00.347

我喜欢两种方法。

第一个是直接的，使用实体框架中的导航方法：

控制器：

```
public ActionResult Details(short id = 0)
{
    AccCompany accComp = db.AccCompany.Find(id);
    if (accComp == null)
    {
        return HttpNotFound();
    }
    return View(accComp);
} 
```

看法：

```
@model Some.Entities.AccCompany

<div class="displayLabel">
     @Html.DisplayNameFor(model => model.Company)
</div>
<div class="displayField">
    @Html.DisplayFor(model => model.Company)
</div>

<div class="displayLabel">
     @Html.DisplayNameFor(model => model.AccControl.CostCentre)
</div>
<div class="displayField">
    @Html.DisplayFor(model => model.AccControl.CostCentre)
</div> 
```

第二个涉及为特定视图创建自定义“视图模型”并将其用作视图中的模型，更好地进行验证：

SomeViewModel.cs：

```
public class SomeViewModel
{
    [Required]
    public string Company { get; set; }

    [Required]
    [Display(Name = "Cost Centre")]
    public string CostCentre { get; set; }
} 
```

然后将其填充到您的控制器中：

```
public ActionResult Details(short id = 0)
{
    AccCompany accComp = db.AccCompany.Find(id);

if (accComp == null)
    {
        return HttpNotFound();
    }

SomeViewModel vm = new SomeViewModel();

vm.Company = accComp.Comany;
vm.CostCentre = accComp.AccControl.CostCentre;

    return View(vm);
} 
```

然后是视图：

```
@model Some.SomeViewModel

<div class="displayLabel">
     @Html.DisplayNameFor(model => model.Company)
</div>
<div class="displayField">
    @Html.DisplayFor(model => model.Company)
</div>

<div class="displayLabel">
     @Html.DisplayNameFor(model => model.CostCentre)
</div>
<div class="displayField">
    @Html.DisplayFor(model => model.CostCentre)
</div> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T09:02:59.967

如果您了解 Linq，则无需为自定义查询编写更多代码。

```
public ApiEntities Content = new ApiEntities();
public IQueryable<T> GetCustomQuery<T>(System.Linq.Expressions.Expression<Func<T, bool>> where) where T : EntityObject
{
   return Content.CreateObjectSet<T>().Where(where);
} 
```

使用

```
var R = new Repo();
//Single query
R.GetCustomQuery<AccCompany>(x => x.Code == Request.QueryString["Code"]).FirstOrDefault();
//list query
R.GetCustomQuery<AccCompany>(x => x.Code == Request.QueryString["Code"]).ToList(); 
```

# java - 使用 Jackson 2 将 JSON 反序列化为 Java

> ID：14748992
> 
> 赞同：1
> 
> 时间：2013-02-07T10:35:46.737
> 
> 标签：java, json, jackson

我有一个 JSON：

```
{"evaluationPart": {
    "generatedId": "48D5181DB8704F8AB5FC998964AD9075",
    "evaluationQuestionPartOption": {
        "generatedId": "48D5181DB8704F8AB5FC998964AD9075"
    }
}} 
```

我为它创建了 java 类来表示它：

根类：

```
@JsonIgnoreProperties(value = {"evaluationPart"})
public class JsonEvaluationPart {

    @JsonProperty("generatedId")
    private String generatedId;

    @JsonProperty("evaluationQuestionPartOption")
    private JsonQuestionOption questionOption;

    public String getGeneratedId() {
        return generatedId;
    }

    public void setGeneratedId(String generatedId) {
        this.generatedId = generatedId;
    }

    public JsonQuestionOption getQuestionOption() {
        return questionOption;
    }

    public void setQuestionOption(JsonQuestionOption questionOption) {
        this.questionOption = questionOption;
    }
} 
```

和`JsonQuestionOption`班级：

```
public class JsonQuestionOption {

    @JsonProperty("generatedId")
    private String generatedId;

    public String getGeneratedId() {
        return generatedId;
    }

    public void setGeneratedId(String generatedId) {
        this.generatedId = generatedId;
    }
} 
```

我写了一个小的 JUnit 测试来检查它是如何进行的：

```
public class JsonReaderTest {

    /**
     * Logger for this class.
     */
    private static final Logger LOGGER = LoggerFactory.getLogger(JsonReaderTest.class);

    private ObjectMapper objectMapper;

    private static final String JSON = "{\"evaluationPart\": {\n" +
            "    \"generatedId\": \"48D5181DB8704F8AB5FC998964AD9075\",\n" +
            "    \"evaluationQuestionPartOption\": {\n" +
            "        \"generatedId\": \"48D5181DB8704F8AB5FC998964AD9075\"\n" +
            "    }\n" +
            "}}";

    @Before
    public void setUp()
            throws Exception {
        LOGGER.debug("Creating the object mapper.");
        objectMapper = new ObjectMapper();
        LOGGER.debug("Object mapper successfully created. {}", objectMapper);
    }

    @Test
    public void testJsonReader()
            throws Exception {

        JsonEvaluationPart partType = objectMapper.readValue(JSON, JsonEvaluationPart.class);
        assertNotNull(partType);

        LOGGER.debug("Part: {}.", partType);

        assertEquals(partType.getGeneratedId(), "48D5181DB8704F8AB5FC998964AD9075");
        assertEquals(partType.getQuestionOption().getGeneratedId(), "48D5181DB8704F8AB5FC998964AD9075");
    }

} 
```

问题是当我像这样阅读我的 JSON 时：

```
JsonEvaluationPart partType = objectMapper.readValue(JSON, JsonEvaluationPart.class); 
```

中的所有属性`partType`都是`null`. 我在这里做错了什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T10:43:21.630

根据文档[JsonIgnoreProperties](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/annotate/JsonIgnoreProperties.html)意味着：

```
Annotation that can be used to either suppress serialization of properties 
(during serialization), or ignore processing of JSON properties read (during 
deserialization). 
```

只需尝试替换：

```
@JsonIgnoreProperties(value = {"evaluationPart"}) 
```

和：

```
@JsonTypeName("evaluationPart") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T10:41:46.707

您的 Json 标头错误。采用

```
@JsonTypeName("evaluationPart") 
```

代替

```
@JsonIgnoreProperties(value = {"evaluationPart"}) 
```

# android - 在单独的类中实现监听器

> ID：14748995
> 
> 赞同：2
> 
> 时间：2013-02-07T10:35:50.540
> 
> 标签：android, android-manifest, listener

我在单独的类中实现按钮侦听器时遇到问题。编码：

```
<Button 
    android:id ="@+button/bottone"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text = "Button"
    /> 
```

主要课程：

```
public class MainActivity extends Activity {

private final Context main_context = this.getApplicationContext(); 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Button b = (Button)findViewById(R.button.bottone);
    Log.i("AAAAAAAAAAAA", "1");

    OnClickListener l = new MyClickListener(this);
    b.setOnClickListener(l);
    Log.i("AAAAAAAAAAAA", "2");

    setContentView(R.layout.activity_main);
}

public Context getContext() {
    return main_context;
} 
```

和监听器的实现

```
public class MyClickListener implements OnClickListener {
private final Context cntx;

public MyClickListener(Context c) {
    cntx = c;
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    Log.i("ONCLICK", "bottone cliccato");
    Toast t = Toast.makeText(cntx, "OK", Toast.LENGTH_LONG);
    t.show();
} 
```

现在当我尝试运行它时，我的手机上的应用程序崩溃了，logcat 告诉我

> 无法在 mainactivity 上实例化活动组件信息。

怎么了？

logcat 信息的日志

> 02-07 11:43:54.887: E/AndroidRuntime(9048): 致命异常: main 02-07 11:43:54.887: E/AndroidRuntime(9048): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com. example.buttoneventlistener/com.example.buttoneventlistener.MainActivity}: java.lang.NullPointerException 02-07 11:43:54.887: E/AndroidRuntime(9048): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2106) 02 -07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app .ActivityThread.access$600(ActivityThread.java:141) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 02-07 11: 43：54.887：E/AndroidRuntime（9048）：在 android.os.Handler。dispatchMessage(Handler.java:99) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.os.Looper.loop(Looper.java:137) 02-07 11:43:54.887: E/ AndroidRuntime(9048): 在 android.app.ActivityThread.main(ActivityThread.java:5039) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 java.lang.reflect.Method.invokeNative(Native Method) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 java.lang.reflect.Method.invoke(Method.java:511) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 02-07 11:43:54.887: E/AndroidRuntime(9048): at com.android.internal.os.ZygoteInit.main(ZygoteInit .java:560) 02-07 11:43:54.887: E/AndroidRuntime(9048): at dalvik.system.NativeStart.main(Native Method) 02-07 11:43:54.887: E/AndroidRuntime(9048): Caused作者：java.lang。NullPointerException 02-07 11:43:54.887: E/AndroidRuntime(9048): at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:109) 02-07 11:43:54.887: E/AndroidRuntime(9048): at com .example.buttoneventlistener.MainActivity.(MainActivity.java:13) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 java.lang.Class.newInstanceImpl(Native Method) 02-07 11:43:54.887 : E/AndroidRuntime(9048): at java.lang.Class.newInstance(Class.java:1319) 02-07 11:43:54.887: E/AndroidRuntime(9048): at android.app.Instrumentation.newActivity(Instrumentation. java:1054) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 02-07 11:43:54.887: E/AndroidRuntime(9048) : ... 11 更多content.ContextWrapper.getApplicationContext(ContextWrapper.java:109) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 com.example.buttoneventlistener.MainActivity.(MainActivity.java:13) 02-07 11:43 :54.887: E/AndroidRuntime(9048): at java.lang.Class.newInstanceImpl(Native Method) 02-07 11:43:54.887: E/AndroidRuntime(9048): at java.lang.Class.newInstance(Class.java :1319) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1054) 02-07 11:43:54.887: E/AndroidRuntime(9048):在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 02-07 11:43:54.887: E/AndroidRuntime(9048): ... 11 更多content.ContextWrapper.getApplicationContext(ContextWrapper.java:109) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 com.example.buttoneventlistener.MainActivity.(MainActivity.java:13) 02-07 11:43 :54.887: E/AndroidRuntime(9048): at java.lang.Class.newInstanceImpl(Native Method) 02-07 11:43:54.887: E/AndroidRuntime(9048): at java.lang.Class.newInstance(Class.java :1319) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1054) 02-07 11:43:54.887: E/AndroidRuntime(9048):在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 02-07 11:43:54.887: E/AndroidRuntime(9048): ... 11 更多MainActivity.(MainActivity.java:13) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 java.lang.Class.newInstanceImpl(Native Method) 02-07 11:43:54.887: E/AndroidRuntime( 9048): 在 java.lang.Class.newInstance(Class.java:1319) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1054) 02 -07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 02-07 11:43:54.887: E/AndroidRuntime(9048): ... 11更多的MainActivity.(MainActivity.java:13) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 java.lang.Class.newInstanceImpl(Native Method) 02-07 11:43:54.887: E/AndroidRuntime( 9048): 在 java.lang.Class.newInstance(Class.java:1319) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1054) 02 -07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 02-07 11:43:54.887: E/AndroidRuntime(9048): ... 11更多的newActivity(Instrumentation.java:1054) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 02-07 11:43:54.887: E/ AndroidRuntime(9048): ... 11 更多newActivity(Instrumentation.java:1054) 02-07 11:43:54.887: E/AndroidRuntime(9048): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2097) 02-07 11:43:54.887: E/ AndroidRuntime(9048): ... 11 更多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T10:36:56.323

在从 UI 访问按钮之前移动 `setContentView(R.layout.activity_main);`行：

```
public class MainActivity extends Activity {

private  Context main_context; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.activity_main);  //<< set Activity layout here

    main_context = this.getApplicationContext(); 
    Button b = (Button)findViewById(R.id.bottone);
    Log.i("AAAAAAAAAAAA", "1");

    OnClickListener l = new MyClickListener(this);
    b.setOnClickListener(l);
    Log.i("AAAAAAAAAAAA", "2");

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T10:45:08.213

编辑：

更改`R.button.bottone`为`R.id.bottone`_ `android:id ="@+button/bottone"`_`android:id ="@+id/bottone"`

setContentView 在获取按钮对象之前，否则按钮对象返回null，访问但会导致NullPointerException。 `setContentView(R.layout.activity_main);`在创建按钮之前放置它

# java - 如何在 Spring Social 中使用 Facebook appAccessToken

> ID：14748999
> 
> 赞同：1
> 
> 时间：2013-02-07T10:36:09.040
> 
> 标签：java, facebook, spring, facebook-graph-api, spring-social

我对如何将 Facebook 的应用程序访问令牌与 Spring Social 一起使用有点困惑。

我已经通过向以下位置发出 GET 请求获得了应用访问令牌：

[http://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials](http://graph.facebook.com/oauth/access_token?client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials)

我不能使用（由于我不想在这里讨论的原因）标准的 Spring Social 连接创建流程，我想使用这个令牌（如果可能的话）。

我的问题通常是针对`GraphApi`.

所以一般来说，我可以使用通过标准 GET 获取的应用程序访问令牌通过 Spring Social 向 Graph Api 发出请求吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T00:23:17.290

应用访问令牌可用于的事情很少。Graph API 中的大多数操作都是用于获取用户数据，因此您*必须*获取用户访问令牌。您拥有的应用访问令牌将不起作用。

如果您打算使用您的应用访问令牌来获取用户的个人资料、查看他们的朋友列表或发布到他们的时间线（或与用户相关的任何内容），那么您就不走运了。想象一下，如果您代表用户阅读和发布的所有内容都是获取应用程序访问令牌，那么将会发生的混乱！您*必须*获得用户对此类事情的许可。

有 3 种获取用户访问令牌的方法：授权码授予（这是 Spring Social 的 ConnectController 所做的，最适合传统 Web 应用程序）、隐式授予（更适合客户端 Javascript）和资源所有者凭据授权（最适合进行浏览器重定向很尴尬、困难或不可能的移动或桌面应用程序）。

您拥有的应用程序访问令牌仅用于使用以应用程序为中心且不属于任何给定用户的 API 端点。Facebook 的 API 中有一些这样的操作，但唯一立即想到的就是您可以使用应用令牌来创建测试用户（请参阅[https://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/)）。

正如大部分 Facebook 的 API 都是以用户为中心的一样，Spring Social 的 Facebook API 绑定也是如此。[但是，如果您希望看到以应用程序为中心的操作添加到 Spring Social，如果您在https://jira.springsource.org/browse/SOCIALFB](https://jira.springsource.org/browse/SOCIALFB)告诉我，我将不胜感激。