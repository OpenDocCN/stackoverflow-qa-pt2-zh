# StackOverflow 问答 14572000-14572999

# snmp - Net-SNMP 返回的类型

> ID：14572006
> 
> 赞同：6
> 
> 时间：2013-01-28T21:58:01.220
> 
> 标签：snmp

Net-snmp 有少量类型：

*i: INTEGER,u: unsigned INTEGER, t: TIMETICKS, a: IPADDRESS o: OBJID, s: STRING, x: HEX STRING, d: DECIMAL STRING U: unsigned int64, I: signed int64, F: float, D: double*

有趣的是，故事并没有就此结束。例如，如果我有一个 unsigned int64，我将在发送“snmpget”后收到 Gauge32 作为类型。我正在寻找一个表格，其中列出了 Net-SNMP 将返回的所有可能的“类型字符串”（如“Gauge32”或“INTEGER”）以及与该字符串关联的实际类型。所以这个表会有明显的条目，比如：

（从 snmpget、type、snmpset 符号返回值）-> ("INTEGER", INTEGER, i)

如果有人知道在哪里可以找到完整列表，请发布。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T02:36:52.207

**这不是您问题的直接答案。**

IETF 上发布的 SNMP RFC 文档仅定义了一组有限的类型，

[http://www.logmatrix.com/blog/bid/69744/Understanding-SNMP-Data-Types](http://www.logmatrix.com/blog/bid/69744/Understanding-SNMP-Data-Types)

它们应该被视为内置类型。

![在此处输入图像描述](../Images/b7db0079f7f3a715cb4ad60422209323.png)

除了内置的 int 类型外，还有其他通过 MACRO 定义的派生类型，例如 DisplayString 等。

我创建了基于#SNMP 的 NET-SNMP 实用程序的克隆，我了解到**并非 NET-SNMP 手册页中的所有类型都是正确的**。因此，我的 snmpset 克隆仅处理这些类型的子集（不支持 U、I、F 和 D），

[https://github.com/lextm/sharpsnmplib/blob/master/Samples/CSharp/snmpset/Program.cs](https://github.com/lextm/sharpsnmplib/blob/master/Samples/CSharp/snmpset/Program.cs)

# css - Webkit 计算元素的宽度错误，导致我的布局出现空白

> ID：14572009
> 
> 赞同：3
> 
> 时间：2013-01-28T21:58:21.163
> 
> 标签：css, layout, webkit

我有一个相当复杂的布局问题，它只发生在 Webkit 浏览器上。看看这个截图：

![在此处输入图像描述](../Images/ab0215d8a18061221e8dde4307f5b0b6.png)

首先，请允许我解释一下我想在这里做什么。这种布局的目的是显示图像网格，每个网格单元都是正方形的。布局是响应式的，因此在另一个视口宽度上，每行可能有 3 个图像而不是 2 个。

从技术上讲，标记是一个图形列表，每个图形内是一个链接，链接内是实际图像。伪标记：

```
<ul>
<li><figure><a href=""><img src="" width="0" height="0" /></a></figure></li>
<li><figure><a href=""><img src="" width="0" height="0" /></a></figure></li>
</ul> 
```

如您所见，内部图像没有任何宽度。这是故意的，因为宽度是在我用作图像容器的 li 元素上设置的。在屏幕截图中的示例视口中，li 元素的宽度设置为 50%。

接下来，在运行时，我将 img 元素全部隐藏起来，并将其 src 路径设置为“a”元素上的背景图像。这样做的目的是使图像正确居中，而不管图像的尺寸或纵横比如何。

**主要说明：**我在所有元素上使用 box-sizing:border-box 。

现在，在这个运行时例程中，我还动态计算“li”元素的高度，以强制它为正方形。让我们暂时假设示例屏幕截图的视口宽度为 400 像素。由于所有“li”元素的宽度都设置为 50%，因此它们的宽度应为 200 像素。知道了这一点，我简单地将这个“li”元素的高度也设置为 200 像素，使其成为一个方形容器：

```
// applied to all "li"s in the list
$(this).height($(this).width()); 
```

除了 Webkit 浏览器（Chrome、Safari）之外，这在我测试的所有浏览器中都非常有效。当我在设置之前输出“a”（或 li）元素的宽度时，宽度和 CSS 宽度，非 webkit 浏览器将为每个“a”元素报告完全相同的宽度。当我在 webkit 浏览器中查看控制台时，它们的宽度存在差异。一个“a”元素可能是 200 像素，而另一个是 191 像素。实际值以及它是否发生取决于浏览器的视口宽度，看起来如此。

无论哪种方式，结果都是您在屏幕截图中看到的丑陋差距。发生的情况是，由于 webkit 意外地报告了这些“a”容器的不同宽度（尽管它们都设置为 50%），高度也会有变化，导致间隙。

因此，最大的问题是：为什么 webkit 报告的“a”元素的宽度不正确且宽度不同，这些元素都设置为同一父级的 50%，而其他浏览器却没有？

**到目前为止的理论**

到目前为止，特此调查了几件事：

我在 li 元素上使用 inline-block ，这会导致额外的“空间”。我已经通过从标记中删除空格来解决这个问题。无论哪种方式，inline-block 都不是问题，因为当我将“li”元素更改为浮动时，webkit 浏览器在不应该显示不同宽度时仍然显示不同的宽度。

另一个理论与加载事物的顺序有关，其中一些声称将我的图像背景运行时例程延迟到 window.load 事件可能会有所帮助。不幸的是，结果完全一样。

我也知道 jQuery 中 .width() 和 .css("width") 之间的区别（我使用的是 1.8.2）。这没有什么区别，因为我在控制台上都输出了，而 Webkit 把这两个值都弄错了。

**总结**

抱歉解释太长，特此总结一下：我在列表元素上设置了 50%（或 33.3333%，取决于视口宽度）的宽度，然后在运行时检索实际像素宽度。出于某种神秘的原因，webkit 浏览器会报告不同的宽度，尽管所有列表元素的百分比宽度都相同。

最后，这是该问题的实时链接：

[已删除，由于问题已解决并且现在更改了实时代码]

要重现此问题，您必须使用 webkit 浏览器并将窗口大小大致调整为我的示例屏幕截图。它似乎发生在任意视口宽度上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T22:23:12.180

在我看来，它与视口的像素宽度是否可被 2 或 3 整除有关。如果 width:50% 和 $(document).width()/2=0 则有没问题，但是当 $(document).width()/2=1 时，就会出现间隙。

因此，您可以计算一次并每次使用它，而不是计算每个高度，即将 imageLayout() 更改为：

```
var aHeight = $('.photos li figure > a')[0].width();
$('.photos li figure > a').each(function(index) {
    console.log('w: ' + $(this).width() + " css w: " + $(this).css("width"));
    console.log('pw: ' + $(this).parent().parent().width() + " css pw: " + $(this).parent().parent().css("width"));
    $(this).height(aHeight);

    if ($(this).attr('data-loaded') != "1") {
        var imgcaption = $(this).parent().find('figcaption a');
        imgcaption.html('<em class="icon-bolt"></em> loading...');
    }

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:23:17.777

您是否检查过 li 或 ul 元素在 webkit 浏览器中是否具有默认边距？尝试将样式表顶部的所有 ul 或 li 设置为 0px 用于边距和填充。

```
li { margin:0px; padding:0px;} ul{ margin:0px; padding:0px} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:54:21.300

我之前遇到过这个问题，浏览器计算肯定有问题。

示例：http: [//jsfiddle.net/gSWkd/2/](http://jsfiddle.net/gSWkd/2/)

（Firefox：罚款 / Chrome：前 2 条记录 112，其他记录 111）

也许从第一张图像中获取宽度/高度并应用于其他图像？

像这样的东西：http: [//jsfiddle.net/gSWkd/4/](http://jsfiddle.net/gSWkd/4/)

HTML：

```
<div class="why">
    <div class="heresWhy red"></div>
    <div class="heresWhy blue"></div>
    <div class="heresWhy red"></div>
    <div class="heresWhy blue"></div>
    <div class="heresWhy red"></div>
    <div class="heresWhy blue"></div>
    <div class="heresWhy red"></div>
    <div class="heresWhy blue"></div>
    <div class="heresWhy red"></div>
    <div class="heresWhy blue"></div>
</div> 
```

CSS

```
.why {
    width: 223px;
    height: 223px;
}
.heresWhy {
    width: 50%;
    height: 50%;
    float: left;
}
.heresWhy.red {
    background: red;
}
.heresWhy.blue {
    background: blue;
} 
```

JS

```
// Apply 50% W/H to the first image
$('.why div:first-child').width('50%');
$('.why div:first-child').height('50%');

// Get W/H from the first image
var rightSize = $('.why div:first-child').width() - 1;

// Apply W/H to other images
$('.why div').each(function(){
    $(this).width(rightSize);
    $(this).height(rightSize);
});

// Check W/H
$('.why div').each(function(){
  $(this).html($(this).width()); // Show div width
  $(this).html($(this).height()); // Show div width3
}) 
```

# sql - 在标量值函数中使用 Xquery

> ID：14572013
> 
> 赞同：2
> 
> 时间：2013-01-28T21:58:31.947
> 
> 标签：sql, sql-server, sql-server-2008, xquery

我有下面的查询，它返回我需要的信息，但我需要在标量值函数中使用这个查询来使用计算列中的返回值。

XML 列在同一个表中，我需要将 Settings 中的值插入到名为 Directions 的列中

```
;WITH XMLNAMESPACES ( 'http://www.w3.org/2001/XMLSchema' AS als )
SELECT
 a.a.value('@Settings', 'VARCHAR(50)') AS [Settings]

FROM Base AS X
    CROSS APPLY X.BaseXML.nodes('als:Name') a(a) 
```

我正在尝试但没有得到任何地方的功能是

```
CREATE FUNCTION [dbo].[ChooseRevision](@lineId int) Returns integer As
Begin
Return (WITH XMLNAMESPACES ( 'http://www.w3.org/2001/XMLSchema' AS als )
SELECT
 a.a.value('@Settings', 'VARCHAR(50)') AS [Settings]

FROM Base AS X
    CROSS APPLY X.BaseXML.nodes('als:Name') a(a)
Where LineId = @lideid
)
End

GO 
```

如何将查询包含在 Scarlar 函数中以用作计算列？

```
<als:Doc xmlns:als="http://www.w3.org/2001/XMLSchema" SchemaVersion="0.1" Settings="First Test" Title="Recovery Loop">
  <als:Base Rev="0" Id="201" />
  <als:Number TimeStamp="2013-01-21T15:08:00">
    <als:Member Name="Club Run" DirId="123" />
  </als:Number>
  </als:Doc> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:45:49.417

`als:Name`假设每个 XML 值只有一个节点，您可以这样写：

```
CREATE FUNCTION [dbo].[ChooseRevision](@lineId int) 
RETURNS VARCHAR(50) 
AS
BEGIN
  DECLARE @r VARCHAR(50);
  WITH XMLNAMESPACES('http://www.w3.org/2001/XMLSchema' AS als)
  SELECT
   @r = BaseXML.value('als:Doc[1]/@Settings', 'VARCHAR(50)') 
  FROM Base
  WHERE LineId = @lineId;
  RETURN @r;
END 
```

如果您打算在 dbo.Base 表本身中使用此函数，则应改用此版本：

```
CREATE FUNCTION [dbo].[ChooseRevision](@xml XML) 
RETURNS VARCHAR(50) 
AS
BEGIN
  DECLARE @r VARCHAR(50);
  WITH XMLNAMESPACES('http://www.w3.org/2001/XMLSchema' AS als)
  SELECT @r = @xml.value('als:Doc[1]/@Settings', 'VARCHAR(50)') 
  RETURN @r;
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:40:16.573

您尝试做的问题是，尽管您可能知道您的选择查询只会返回一个结果，但数据库不会。考虑这个示例模式

```
CREATE TABLE Base (BaseXML XML, Settings INT);
INSERT Base VALUES ('<root settings="1"><a>SomeXML</a></root>', NULL); 
```

你知道设置只在根目录中出现一次，所以这个

```
SELECT  a.a.value('@settings', 'VARCHAR(50)') AS [Settings]
FROM    Base X
        CROSS APPLY X.BaseXML.nodes('root') a(a); 
```

但是，如果您采用此模式，则只会返回一个结果（对于每一行）：

```
CREATE TABLE Base2 (BaseXML XML, Settings INT);
INSERT Base2 VALUES ('<root><a settings="1">SomeXML</a><a settings="2">Some More XML</a></root>', NULL); 
```

几乎相同的查询将返回 2 行：

```
SELECT  a.a.value('@settings', 'VARCHAR(50)') AS [Settings]
FROM    Base2 X
        CROSS APPLY X.BaseXML.nodes('root/a') a(a); 
```

因此，您的函数不能用作标量函数。您需要使用 [1] 告诉 SQL 您只期望返回一个（第一个）值：

```
SELECT  BaseXML.value('/root[1]/@settings[1]', 'INT') AS Settings
FROM    Base; 
```

**[SQL Fiddle 演示多个返回值](http://www.sqlfiddle.com/#!3/c19d1/8)**

不过，我建议最好的方法是发送 XML 本身，而不是将 LineID 作为参数发送。由于您需要一个计算列，您可以只发送 XML 数据并保存对表的不必要的第二次查询：

```
CREATE FUNCTION dbo.ParseBaseSettings (@XML XML)
RETURNS INT
AS
BEGIN
    RETURN @XML.value('/root[1]/@settings[1]', 'INT');
END; 
```

您可能需要在这里处理您的 XML 命名空间，但例如，我已经跳过了这个。

最后，您可以创建计算列：

```
CREATE TABLE Base 
(   BaseXML XML, 
    Settings AS dbo.ParseBaseSettings(BaseXML)
); 
```

**[最终解决方案的 SQL Fiddle](http://www.sqlfiddle.com/#!3/769b8/1)**

**编辑**

使用您的实际 XML 数据，我编译了此函数：

```
CREATE FUNCTION dbo.ParseBaseSettings (@XML XML)
RETURNS NVARCHAR(50)
AS
BEGIN
    DECLARE @Ret NVARCHAR(50);        
    WITH XMLNAMESPACES ('http://www.w3.org/2001/XMLSchema' AS als)
    SELECT  @Ret = @XML.value('/als:Doc[1]/@Settings', 'NVARCHAR(50)');

    RETURN @Ret;
END; 
```

# c++ - 如何打印以筛选结构及其所有内容？

> ID：14572015
> 
> 赞同：1
> 
> 时间：2013-01-28T21:58:40.870
> 
> 标签：c++, c, debugging, linux-kernel, printk

我想在`c`/中找到一个宏，`c++`它获取结构`typedef`和指向结构的指针作为输入并打印其所有内容，如下所示：

假设我有一个名为`struct account`.

```
struct account {
   int account_number;
   char *first_name;
   char *last_name;
   float balance;
}; 
```

我这样使用它：

```
struct account my_account= {    
    .account_number = 321321,
    .first_name = 0x12345678,
    .last_name = 0,
    .balance = 222 }; 
```

我想要一个看起来像这样的 linux kernel/c 语言中的宏：

```
PRINT_STRUCT_CONTENT(struct_type, pointer) 
```

并打印以下内容：

```
my_account= {
account_number = 321321,
first_name = 0x12345678,
last_name = 0,
balance = 222
} 
```

*`dir`这个想法是在内核中有一种python函数*

* * *

[编写一个宏来对结构的内容进行字符串化](https://stackoverflow.com/questions/11059881/write-a-macro-to-stringify-the-contents-of-a-struct)

[您最通用的 C 宏，用于打印不同类型的变量值](https://stackoverflow.com/questions/3572391/your-most-general-c-macro-for-printing-variable-values-in-different-types)

[是否有用于打印结构的 C 预处理器宏？](https://stackoverflow.com/questions/7560086/is-there-a-c-preprocessor-macro-to-print-out-a-struct)

[在 C 预处理器中编写一个 while 循环](https://stackoverflow.com/questions/319328/writing-a-while-loop-in-the-c-preprocessor)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:26:35.147

您可以使用[print_hex_dump](http://lxr.linux.no/linux+v3.7.5/lib/hexdump.c#L165)或[print_hex_dump_bytes](http://lxr.linux.no/linux+v3.7.5/lib/hexdump.c#L230)
示例：

```
struct mystruct *p;
print_hex_dump_bytes("mystruct: ", DUMP_PREFIX_ADDRESS, p, sizeof(*p)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:06:56.780

您可能想查看[内核跟踪事件](http://lwn.net/Articles/379903/)API。它比 simple 稍微复杂一些`printk`，但它可以动态切换并进行一些 prett(-ier) 打印。而且开销仍然很低。

# rabbitmq - 在 pika / RabbitMQ 中处理长时间运行的任务

> ID：14572020
> 
> 赞同：66
> 
> 时间：2013-01-28T21:58:56.270
> 
> 标签：rabbitmq, pika

我们正在尝试建立一个基本的定向队列系统，其中生产者将生成多个任务，而一个或多个消费者将一次获取一个任务，处理它并确认消息。

问题是，处理可能需要 10-20 分钟，而我们当时没有响应消息，导致服务器断开我们的连接。

这是我们消费者的一些伪代码：

```
#!/usr/bin/env python
import pika
import time

connection = pika.BlockingConnection(pika.ConnectionParameters(
        host='localhost'))
channel = connection.channel()

channel.queue_declare(queue='task_queue', durable=True)
print ' [*] Waiting for messages. To exit press CTRL+C'

def callback(ch, method, properties, body):
    long_running_task(connection)
    ch.basic_ack(delivery_tag = method.delivery_tag)

channel.basic_qos(prefetch_count=1)
channel.basic_consume(callback,
                      queue='task_queue')

channel.start_consuming() 
```

第一个任务完成后，在 BlockingConnection 深处的某个地方抛出异常，抱怨套接字被重置。此外，RabbitMQ 日志显示消费者因未及时响应而断开连接（为什么它重置连接而不是发送 FIN 很奇怪，但我们不会担心）。

我们搜索了很多，因为我们认为这是 RabbitMQ 的正常用例（有很多长时间运行的任务，应该在许多消费者之间分配），但似乎没有其他人真正遇到过这个问题。最后，我们偶然发现了一个线程，建议使用心跳并`long_running_task()`在单独的线程中生成心跳。

于是代码变成了：

```
#!/usr/bin/env python
import pika
import time
import threading

connection = pika.BlockingConnection(pika.ConnectionParameters(
        host='localhost',
        heartbeat_interval=20))
channel = connection.channel()

channel.queue_declare(queue='task_queue', durable=True)
print ' [*] Waiting for messages. To exit press CTRL+C'

def thread_func(ch, method, body):
    long_running_task(connection)
    ch.basic_ack(delivery_tag = method.delivery_tag)

def callback(ch, method, properties, body):
    threading.Thread(target=thread_func, args=(ch, method, body)).start()

channel.basic_qos(prefetch_count=1)
channel.basic_consume(callback,
                      queue='task_queue')

channel.start_consuming() 
```

这似乎有效，但它非常混乱。我们确定`ch`对象是线程安全的吗？此外，假设`long_running_task()`使用该连接参数将任务添加到新队列（即，这个漫长过程的第一部分已经完成，让我们将任务发送到第二部分）。因此，线程正在使用该`connection`对象。那个线程安全吗？

更重要的是，这样做的首选方式是什么？我觉得这很混乱，可能不是线程安全的，所以也许我们做得不对。谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-22T19:29:18.107

现在，你最好的办法是关闭心跳，如果你阻塞太久，这将阻止 RabbitMQ 关闭连接。我正在试验 pika 的核心连接管理和在后台线程中运行的 IO 循环，但它不够稳定，无法发布。

在[pika v1.1.0](https://pika.readthedocs.io/en/stable/modules/parameters.html)这是`ConnectionParameters(heartbeat=0)`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2018-10-23T14:46:47.363

请不要禁用心跳！

从 Pika 开始`0.12.0`，请使用[此示例代码](https://github.com/pika/pika/blob/0.12.0/examples/basic_consumer_threaded.py)中描述的技术在单独的线程上运行长时间运行的任务，然后确认来自该线程的消息。

* * *

[**注意：** RabbitMQ 团队会监控[邮件列表](https://groups.google.com/forum/#!forum/rabbitmq-users)[，`rabbitmq-users`](https://groups.google.com/forum/#!forum/rabbitmq-users)有时只会在 StackOverflow 上回答问题。]

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-29T11:17:49.970

我遇到了同样的问题。
我的解决方案是：

1.  关闭服务器端的心跳
2.  评估任务可能花费的最长时间
3.  将客户端心跳超时设置为从第 2 步获得的时间

### 为什么这个？

当我测试以下情况时：

案例一

1.  服务器心跳开启，1800s
2.  客户未设置

任务运行很长时间仍然报错 -->1800

案例二

1.  关闭服务器心跳
2.  关闭客户端心跳

客户端没有错误，除了一个问题——当客户端崩溃（我的操作系统因某些故障重新启动）时，仍然可以在 Rabbitmq 管理插件中看到 tcp 连接。这令人困惑。

案例三

1.  关闭服务器心跳
2.  打开客户端心跳，将其设置为可预见的最大运行时间

在这种情况下，我可以动态更改单个客户端上的每个热点。事实上，我在经常崩溃的机器上设置了心跳。此外，我可以通过Rabbitmq Manangement插件看到离线机器。

### 环境

操作系统：centos x86_64
pika：0.9.13
rabbitmq：3.3.1

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-05-08T08:34:19.413

1.  `connection.process_data_events()`您可以在您的中定期调用`long_running_task(connection)`，该函数在被调用时会向服务器发送心跳，并使 pika 客户端远离关闭。
2.  `connection.process_data_events()`在你的 pika 中设置大于 call period 的 heartbeat 值`BlockingConnection`。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-08-16T07:09:32.343

不要禁用心跳。
最好的解决方案是在单独的线程中运行任务，并将 设置`prefetch_count`为`1`以便消费者使用类似这样的东西只获得 1 条未确认的消息`channel.basic_qos(prefetch_count=1)`

*   [https://github.com/pika/pika/issues/753#issuecomment-318124510](https://github.com/pika/pika/issues/753#issuecomment-318124510)
*   [https://www.rabbitmq.com/consumer-prefetch.html](https://www.rabbitmq.com/consumer-prefetch.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-21T12:54:41.413

您还可以设置一个新线程，在这个新线程中处理消息，并在该线程`.sleep`处于活动状态时调用连接以防止丢失心跳。这是从 github 中的@gmr 获取的示例代码块，以及指向该问题的链接以供将来参考。

```
import re
import json
import threading

from google.cloud import bigquery
import pandas as pd
import pika
from unidecode import unidecode

def process_export(url, tablename):
    df = pd.read_csv(csvURL, encoding="utf-8")
    print("read in the csv")
    columns = list(df)
    ascii_only_name = [unidecode(name) for name in columns]
    cleaned_column_names = [re.sub("[^a-zA-Z0-9_ ]", "", name) for name in ascii_only_name]
    underscored_names = [name.replace(" ", "_") for name in cleaned_column_names]
    valid_gbq_tablename = "test." + tablename
    df.columns = underscored_names

    # try:
    df.to_gbq(valid_gbq_tablename, "some_project", if_exists="append", verbose=True, chunksize=10000)
    # print("Finished Exporting")
    # except Exception as error:
    #     print("unable to export due to: ")
    #     print(error)
    #     print()

def data_handler(channel, method, properties, body):
    body = json.loads(body)

    thread = threading.Thread(target=process_export, args=(body["csvURL"], body["tablename"]))
    thread.start()
    while thread.is_alive():  # Loop while the thread is processing
        channel._connection.sleep(1.0)
    print('Back from thread')
    channel.basic_ack(delivery_tag=method.delivery_tag)

def main():
    params = pika.ConnectionParameters(host='localhost', heartbeat=60)
    connection = pika.BlockingConnection(params)
    channel = connection.channel()
    channel.queue_declare(queue="some_queue", durable=True)
    channel.basic_qos(prefetch_count=1)
    channel.basic_consume(data_handler, queue="some_queue")
    try:
        channel.start_consuming()
    except KeyboardInterrupt:
        channel.stop_consuming()
    channel.close()

if __name__ == '__main__':
    main() 
```

链接： [https ://github.com/pika/pika/issues/930#issuecomment-360333837](https://github.com/pika/pika/issues/930#issuecomment-360333837)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-24T21:07:23.420

这是使用线程处理此问题的一种更简单的方法。如果消费者应用程序在当前作业完成之前不应使用另一个作业，则特别有用。ack 可以随时发送——在这种情况下，我选择仅在工作完成时发送它（线程不再活动）。

在自己的线程中启动长时间运行的进程，然后通过调用 channel.process_data_events() 在循环中监视该线程。在主线程中保留对连接对象的引用，因为它不是线程安全的。本质上：

```
import time
import pika
from threading import Thread
from functools import partial

rmqconn = pika.BlockingConnection( ... )
rmqchan = rmqconn.channel()
rmqchan.basic_consume(
    queue='test',
    on_message_callback=partial(launch_process,rmqconn)
)
rmqchan.start_consuming()

def launch_process(conn,ch,method,properties,body):
    runthread = Thread(target=run_process,args=body)
    runthread.start()
    while runthread.is_alive():
        time.sleep(2)
        conn.process_data_events()
    ch.basic_ack(delivery_tag=method.delivery_tag)

def run_process(body):
    #do the long-running thing
    time.sleep(10) 
```

# linux - 在没有超级用户的情况下配置 apache

> ID：14572023
> 
> 赞同：1
> 
> 时间：2013-01-28T21:58:59.400
> 
> 标签：linux, apache, port

我正在使用 Open Suse。我对它和 Web 服务器（以及 StackOverFlow 也是）很陌生。

etc 目录中有一个 apache2，xyz.xyz.xyz 返回“It works！”。xyz.xyz.xyz:5000 当前还返回一个网页。我已经修改了页面并想托管它。

问题：如何配置 apache 服务器来为我创建一个端口？我需要修改哪些文件（httpd.conf？）？我需要超级用户访问权限吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:08:32.967

OpenSUSE 的配置文件可能有不同的布局，但您正在寻找的是一个`VirtualHost`设置为读取端口 5000 的指令。（[Apache docs on `VirtualHost`s](http://httpd.apache.org/docs/2.2/mod/core.html#virtualhost)）

这可能在里面`httpd.conf`，也可能在另一个文件里面`/etc/apache2`，它也以`.conf`. 您会发现端口 5000 设置类似于：

```
<VirtualHost *:5000>
  DocumentRoot /path/to/index/dir
  ... Other stuff...
</VirtualHost> 
```

要创建一个在不同于 5000 的端口上侦听的 VirtualHost，只需复制整个`<VirtualHost>...</VirtualHost>`块并更改端口号和`DocumentRoot`指向文件系统上将保存其他 vhost 文件的位置。您还需要一个`Listen *:port_number`指令来使 Apache 接管该端口。

例如，要在 5001 上添加虚拟主机，请执行以下操作：

```
# Instructs apache to use this port
Listen *:5001

# Instructs apache to route requests on this port to a specific directory
<VirtualHost *:5001>
  DocumentRoot /path/to/index/dir
  ... Other stuff...
</VirtualHost> 
```

在此之后您将需要重新启动 Apache。

```
/etc/init.d/apache2 restart 
```

请注意，您**需要超级用户访问权限**才能修改 httpd.conf 文件并重新启动 Apache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:41:08.693

如果要在端口 1024 以下运行服务，则需要具有 root 权限。正如 MIchael 的回答一样，当您在端口 5001 上运行服务时，您不需要 root 访问权限

# java - 将对象转换为原始类型

> ID：14572030
> 
> 赞同：5
> 
> 时间：2013-01-28T21:59:49.477
> 
> 标签：java, casting

我正在尝试`Collection<myClass>`通过网络发送。我将它转换为一个对象，并以这种方式发送它。

我认为对在网络中传递的项目进行建模的最佳方法是通过一个对象，因为我事先不知道它可能是什么（在这个例子中，它是一个集合，但有时它是一个地图或任何其他你能想到的东西）。这有点像套接字在 C 中的工作方式，只有接收者和发送者知道他们正在发送/接收什么，并适当地转换对象，而连接只关心字节并正确传输它们。

但是，当接收到 Object 时，如果我尝试将其强制转换回 ，则会出现`collection<myObject>`一个警告，其中提到了不安全的类型转换。我可以添加@suppressWarnings，但是为了避免这个警告，最好的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:05:08.610

由于您（尽管主要是 Java）不知道您收到的对象的类型，因此不可能安全地转换它。

你可以做的事情：

*   您需要真正确定它是您认为的对象
*   也许添加一个`try-catch`块来捕获`ClassCastException`（要格外确定）
*   最后添加`@SuppressWarnings`注解，因为你想覆盖 Java 的安全检查（因为你想知道更好）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:06:38.460

考虑使用一些中间格式进行序列化，例如 JSON 或 XML。有很多库可以将对象编组和解组到 JSON 中或从 JSON 中解组。例如[GSON](http://code.google.com/p/google-gson/)。您免费获得的是语言互操作性，因为另一方面，可能有任何语言的程序。

# r - 访问 R 中的列表元素

> ID：14572033
> 
> 赞同：0
> 
> 时间：2013-01-28T22:00:05.893
> 
> 标签：r

我有一个名为“training_data”的列表。“training_data”列表包含使用以下函数从多个文件中读取的数据。

```
training_data <- lapply(files, read.table, header=TRUE, sep=",") 
```

我可以使用以下命令访问任何数据集的第一个字段：

```
training_data[[1]][1]           # The first field contains the class "pos OR neg" 
```

我必须使用支持向量机 (e1071) 使用这些数据集（包含在 training_data 中）进行二进制分类。但问题是某些数据集仅包含一个类的数据，即全部 pos 或全部 neg，这对于 svm 函数是不可接受的，我想排除这些数据集。我尝试了以下代码，但无法访问类列。

```
training_data<-lapply(training_data, 
                function(data)
                 {
                    if(["the class field is always positive"])
                       ### exclude this dataset from training_data

                 }) 
```

更新：我如何才能访问传递给函数的第一列数据？以及如何从 training_data 中排除那些仅在类列中包含一个类的数据集？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:28:47.993

这就是该`Filter`功能的用途。由于您没有提供复制代码，这里有一个关于如何使用`Filter`. 假设您有一个很大的向量列表，每个向量的长度为 2 个元素：

```
mylist <- lapply(1:1000, function(i) c(runif(1), runif(1))) 
```

现在，如果您只想保留列表中第一个元素大于 0.5 的那些向量，您可以执行以下操作：

```
filtered_list <- Filter(function (x) x[1] > 0.5, mylist) 
```

现在，如果 的每个元素`mylist`是 a`data.frame`并且每个元素中的第一列`data.frame`是模型的响应向量，就像您的数据一样，您可以使用`data[,1]`Justin 提到的符号过滤掉所有`data.frames`只有正数或负数的第一列中的值：

```
filtered_list <- Filter(function (x) { !(all(x[,1] < 0) || all(x[,1] > 0))}, 
                        mylist) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:21:14.677

您将像以前一样访问第一个元素。该对象`data`现在在您的函数中可供您使用，并且将与您读入列表的每个数据集具有相同的结构。因此，`data[1]`或更明确地`data[,1]`将访问它们。

我建议您查看许多优秀的 R 指南（尤其是[cran.r-project.org](http://cran.r-project.org/)上列出的指南），以更好地了解该功能的工作原理以及如何分割数据。

如果我还没有回答您的问题，请随时询问另一个问题或编辑此问题以包含一些复制您发现的问题的示例数据。就目前而言，这个问题很可能已经结束。

# c# - c# Winform 透明面板问题，带有渐变的表单

> ID：14572035
> 
> 赞同：0
> 
> 时间：2013-01-28T22:00:11.600
> 
> 标签：c#, winforms, panel, gradient, transparent

我用渐变绘制了我的winforms。我正在其中一个使用 AutoScroll = true 的面板。这样，我可以在不占用太多空间的情况下显示所有信息。

现在，我希望该面板是透明的。我使用透明作为背景颜色并且工作正常。问题是当我滚动时。透明度搞砸了。有没有办法解决这个问题？

在知道最终高度后，我还尝试使用与我的表单相同的渐变来绘制面板。但我有同样的问题。

这是一些图片：（不要看文本框或那些透明的小面板。那将是白色的）。

滚动前（右） ![在此处输入图像描述](../Images/0717623284ba1643b3104299b4719d96.png)

滚动后（背景色问题） ![在此处输入图像描述](../Images/683dcaef42dc47cb647029bbeb7d2bf3.png)

滚动后的另一个：

![在此处输入图像描述](../Images/5fcc073d646af6a7f4668befbbcdc955.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-02T08:56:43.017

我遇到过同样的问题。调用 panel.Refresh() 看起来比 Invalidate() 更好、更流畅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:56:38.703

我将引用答案：

> 为面板的 Scroll 事件添加事件处理程序并调用面板的 Invalidate() 方法。这将修复背景，但在您滚动时看起来不会很好。您会看到 pogo 效果。“拖动时显示窗口内容”Windows 选项的一个不可避免的副作用，您无法合理地关闭它。——汉斯·帕桑特

# android - 定期唤醒（警报）与保持清醒（WakeLocks）的效率

> ID：14572037
> 
> 赞同：2
> 
> 时间：2013-01-28T22:00:20.040
> 
> 标签：android, alarmmanager, alarm, android-alarms, wakelock

我想接受蓝牙连接（即使屏幕关闭）来构建移动 ad-hoc P2P 网络。由于[似乎](https://stackoverflow.com/questions/7014124/android-bluetooth-wakelock-relationship)传入的连接不会唤醒设备，我想我要么需要使用部分 WakeLock（这会相对较快地耗尽电池）来保持设备永久唤醒，要么在短时间内唤醒它以检查新的连接。

现在，我的问题是：定期唤醒设备是否更有效，还是让它保持清醒更好，因为唤醒-睡眠-转换会比简单地让设备一直保持清醒消耗更多的电量？我在这里谈论的时间间隔是 1-10 秒。

当然，如果它们不限于一小部分设备，也非常欢迎解决该问题的替代解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:16:52.593

您需要使用真实设备进行测试，使用不同的设备可能会得到不同的结果。通常，如果您要每秒醒来，只需保持唤醒状态（您可以将屏幕空白以节省一些电量）。或者您可以使用云消息 (GCM) 之类的东西来唤醒设备，但这需要单独的服务器。示例：设备 1 向服务器发送“我在这里消息”，服务器向设备 2 发送“设备 1 在那边，唤醒并检查”消息，设备 1 连接到设备 2。当然，这对你来说可能有点矫枉过正:)

# php - MySQL/PHP 删除表不起作用

> ID：14572038
> 
> 赞同：2
> 
> 时间：2013-01-28T22:00:21.620
> 
> 标签：php, mysql, sql-drop

我有一个函数可以很好地参数化 MySQL 查询，但我需要它来执行 DROP TABLE IF EXISTS 查询，但我没有任何运气。我没有收到任何错误，但表没有被删除，我不知道为什么。

```
db_query('DROP TABLE IF EXISTS temp_table', false, false); 
```

这是完整的功能，以防万一，但正如我所提到的，它非常适合插入、更新、删除和选择。

```
// $query = SQL query, $params = array of parameters (i, s, d, b), $rs = whether or not a resultset is expected, $newid = whether or not to retrieve the new ID value;
// $onedimensionkey = key required to convert array into simple one dimensional array; $admin = if true, use the admin credentials (used only for logins)
function db_query($query, $params, $rs = true, $newid = false, $onedimensionkey = false, $admin = false) {
  (!$admin) ? $link = mysqli_connect(DB_SERVER, DB_USER, DB_PASS, DB_NAME) : $link = mysqli_connect(AUTH_SERVER, AUTH_USER, AUTH_PASS, AUTH_NAME);
  if (!$link) { 
    print 'Error connecting to MySQL Server. Errorcode: ' . mysqli_connect_error(); 
    exit; 
  }

  // Prepare the query and split the parameters array into bound values
  if ($sql_stmt = mysqli_prepare($link, $query)) {
    if ($params) {
      $types = '';
      $new_params = array();
      $params_ref = array();
      // Split the params array into types string and parameters sub-array
      foreach ($params as $param) {
        $types .= $param['type'];
        $new_params[] = $param['value'];
      }
      // Cycle the new parameters array to make it an array by reference
      foreach ($new_params as $key => $parameter) {
        $params_ref[] = &$new_params[$key];
      }
      call_user_func_array('mysqli_stmt_bind_param', array_merge(array($sql_stmt, $types), $params_ref));
    }
  }
  else {
    print 'Error: ' . mysqli_error($link);
    exit();
  }

  // Execute the query
  mysqli_stmt_execute($sql_stmt);

  // Store results
  mysqli_stmt_store_result($sql_stmt);

  // If there are results to retrive, do so
  if ($rs) {
    $results = array();
    $rows = array();
    $row = array();
    stmt_bind_assoc($sql_stmt, $results);
    while (mysqli_stmt_fetch($sql_stmt)) {
      foreach ($results as $key => $value) {
        $row[$key] = $value;
      }
      $rows[] = $row;
    }
    if ($onedimensionkey) {
      $i = 0;
      foreach ($rows as $row) {
        $simplearray[$i] = $row[$onedimensionkey];
        $i++;
      }
      return $simplearray;
    }
    else {
      return $rows;
    }
  }
  // If there are no results but we need the new ID, return it
  elseif ($newid) {
    return mysqli_insert_id($link);
  }

  // Close objects
  mysqli_stmt_close($sql_stmt);
  mysqli_close($link);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:02:29.397

像这样试试

```
 db_query('DROP TABLE IF EXISTS `dbName`.`temp_table`') ; 
```

# objective-c - 无法返回自己 Objective-c Cocos2d

> ID：14572040
> 
> 赞同：0
> 
> 时间：2013-01-28T22:00:26.697
> 
> 标签：objective-c, cocos2d-iphone, return, self

我只是想警告你，我是法国人，为我未来的错误感到抱歉。我正在编写一个蛇游戏（你知道，吃一个苹果，蛇就会变长），我真的被困住了。我正在使用 cocos2d，基本上，除了一件事，游戏就完成了。我只是实现了蛇的碰撞管理，用的是自己的身体。当它发生时，我的函数 GameOver 被调用：

```
-(void)gameOver{
for (NSUInteger i=0; i < [body count]; i++)
{
    [self removeChild:((SnakePart*)body[i]) cleanup:YES];
}

[self unscheduleUpdate];
[self removeChild:apple cleanup:YES];
[self removeChild:scoreLabel cleanup:YES];

CCTransitionRotoZoom *transition = [CCTransitionSlideInB transitionWithDuration:1.0 scene:   [EndGameLayer scene]];
[[CCDirector sharedDirector]replaceScene:transition];

} 
```

我已经放置了一些断点来查看应用程序在哪里出错，但它并没有在那里出错。实际上，它似乎在 EndGameLayer 的 init 中存在错误，该方法随后立即被调用。初始化是：

```
-(id)init{

if( (self=[super initWithColor:ccc4(0, 0, 0, 255)]) ) {
    CGSize winSize = [[CCDirector sharedDirector] winSize];

    CCSprite * background = [CCSprite spriteWithFile:@"Game Over.jpg"];
    background.position = CGPointMake(winSize.width/2, winSize.height/2);

    CCMenuItemFont *boutonRecommencer = [CCMenuItemFont itemWithString:@"Restart" target:self selector:@selector(restart)];
    boutonRecommencer.fontSize = 28;
    boutonRecommencer.fontName = @"Helvetica";

    CCMenuItemFont *boutonMainMenu = [CCMenuItemFont itemWithString:@"Main Menu" target:self selector:@selector(mainMenu)];
    boutonMainMenu.fontSize = 28;
    boutonMainMenu.fontName = @"Helvetica";

    CCMenu *menuEcranFin = [CCMenu menuWithItems:boutonRecommencer, boutonMainMenu, nil];
    [menuEcranFin setPosition:ccp(winSize.width/2 ,winSize.height/2 - 65)];
    [menuEcranFin alignItemsInRows:[NSNumber numberWithInt:2], nil];
    [menuEcranFin alignItemsHorizontallyWithPadding:40];

    [self addChild:background];
    [self addChild:menuEcranFin];
}
return self;
} 
```

再说一次，我在这段代码中放置了一些断点，但是应用程序通过所有这些都没有问题，似乎问题在于它返回自我但我真的不知道。此外，此错误并非每次都出现。有时会显示我的gameOver屏幕，我可以重新启动游戏，然后尝试，错误又回来了。当gameOver出现时，它几乎总是第一次或第二次。非常感谢你的帮助。

*新* 当我与自己发生碰撞并且错误是：线程1：EXC_BAD_ACCESS（代码= 1，地址= 0x800000008）时会出现错误。当我到达一个超出范围的数组时，我已经看到过类似的事情......但在这种情况下，我真的不知道。当我启用僵尸对象时，错误是：线程 1：EXC_Breakpoint (code=EXC=l386_BPT, subcode = 0x0)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:16:38.237

好吧，即使我不明白，我也发现了问题。导致错误的行是：

```
[self removeChild:apple cleanup:YES]; 
```

似乎即使游戏通过了使用苹果的功能，即使在 GameOver 功能之后，游戏也结束了。这有点奇怪，但无论如何，现在它可以工作了！

# c# - 列出桌面文件夹中的所有内容

> ID：14572041
> 
> 赞同：5
> 
> 时间：2013-01-28T22:00:33.130
> 
> 标签：c#, windows, desktop, c#-2.0

所以事情就是这样......我正在制作一个小应用程序，它应该能够在用户桌面上列出所有内容 - 包括快捷方式。

所以我这样做了：

```
string filepath = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);
            DirectoryInfo d = new DirectoryInfo(filepath);

            foreach (var file in d.GetFiles())
            {
                Console.WriteLine(file.Name);
            } 
```

这给了我以下信息：

```
 Spotify.lnk  
 Desktop.ini 
```

但在我的桌面上，我可以看到这些：

```
Spotify.lnk
Desktop.ini
Microsoft Office 2010
VLC Media Player 
```

所以我试图从 Win32_ShortcutFile 中提取一些 WMI 信息，但没有任何运气。（它列出了我在桌面上没有的东西，比如 Windows Live。）

所以此刻我有点不知所措...

我希望这有任何意义！

任何指向正确方向的指针都会很棒！

干杯。

**编辑：**我忘了提到 - 目标节点是 Windows Server 2008 SP1 机器。

**编辑：**我也忘了提到我已经在桌面上检查文件夹。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T22:06:44.127

您需要检查公共用户的桌面。

在 .Net 4.0 及更高版本中，您可以使用`Environment.SpecialFolder.CommonDesktopDirectory`特殊文件夹进入该目录。

`C:\Users\Public\Desktop`如果您没有更改它，则可能在您的机器上。如果您在那里查看，您应该会看到文件夹中缺少的`C:\Users\YourUserName\Desktop`文件。

如果您使用的是 .net 3.5 或更低版本，则`CommonDesktopDirectory`特殊文件夹枚举中不存在 。如果是这种情况，您将需要使用 Win32 API 调用来获取文件夹路径。

```
[DllImport("shfolder.dll", CharSet = CharSet.Auto)]
private static extern int SHGetFolderPath(IntPtr hwndOwner, int nFolder, IntPtr hToken, int dwFlags, StringBuilder lpszPath);
private const int MAX_PATH = 260;
private const int CSIDL_COMMON_DESKTOPDIRECTORY = 0x0019;
public static string GetAllUsersDesktopFolderPath()
{
    StringBuilder sbPath = new StringBuilder(MAX_PATH);
    SHGetFolderPath(IntPtr.Zero, CSIDL_COMMON_DESKTOPDIRECTORY, IntPtr.Zero, 0, sbPath);
    return sbPath.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:06:44.217

您还需要扫描此目录：

```
string filepath = Environment.GetFolderPath(Environment.SpecialFolder.CommonDesktopDirectory); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:07:24.907

有些文件可能会在您查看（但不是编码）时显示，因为它们实际上位于共享桌面文件夹中。在 Windows 7 上，这是`C:\Users\Public\Public Desktop`. 在 XP 上，我*认为*它是`C:\Documents and Settings\All Users\Desktop`，但我现在无法检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T22:11:00.227

如果你想获得所有 destop 项目，你必须检查`DesktopDirectory`并`CommonDesktopDirectory`

```
 var list = new DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory)).GetFiles()
       .Concat(new DirectoryInfo(Environment.GetFolderPath(Environment.SpecialFolder.CommonDesktopDirectory)).GetFiles())
       .Distinct();

    foreach (var file in list)
    {
        Console.WriteLine(file.Name);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T22:15:27.557

虽然许多项目来自所有用户桌面，如其他答案中所述，但这绝不会完成您的搜索。

如果您想使用与 Windows 对桌面项目所做的相同列表，则需要在结果对象上调用`SHGetDesktopFolder`和调用。`EnumObjects`我不认为 .NET 基类库公开了此功能，但我确信有人已经编写了一个包装器来完成所有 p/invoke 繁重的工作。pinvoke.net 已经提供了一个瘦包装器（转换为 C# 的接口声明）

# c# - “未启用 Cookie”HttpWebResponse C#

> ID：14572042
> 
> 赞同：1
> 
> 时间：2013-01-28T22:00:51.557
> 
> 标签：c#, cookies

我正在尝试通过 Windows 应用程序发布数据，但最后我不断收到响应：“您必须启用 cookie 才能访问成员区域！”。

我不知道我的代码中缺少什么。谢谢帮助。:)

```
 public void Login()
    {
        string url = @"http://freedns.afraid.org/zc.php?step=2";
        //WebClient webclient = new WebClient();

        byte[] postValues = Encoding.ASCII.GetBytes("username=username&password=password&action=auth&remember=1&submit=Login");

        //get cookies
        CookieCollection cookies = new CookieCollection();
        HttpWebRequest askForCookies = (HttpWebRequest)WebRequest.Create("http://freedns.afraid.org/subdomain/");
        askForCookies.CookieContainer = new CookieContainer();
        askForCookies.CookieContainer.Add(cookies);
        HttpWebResponse responseCookies = (HttpWebResponse)askForCookies.GetResponse();
        cookies = responseCookies.Cookies;
        //Cookies retrived
        int howmuch = responseCookies.Cookies.Count;

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.CookieContainer = new CookieContainer();
        request.CookieContainer.Add(cookies);
        request.Credentials = CredentialCache.DefaultCredentials;
        request.UserAgent = "mateuszzaborowski.com update client";
        request.Method = WebRequestMethods.Http.Post;

        request.ContentType = "application/x-www-form-urlencoded";
        Stream postStream = request.GetRequestStream();

        postStream.Write(postValues, 0, postValues.Length);
        postStream.Close();

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Stream Anwser = response.GetResponseStream();
        StreamReader _Anwser = new StreamReader(Anwser);
        string test = _Anwser.ReadToEnd();
        _Anwser.Close();
    } 
```

# visual-studio-2010 - 如何以不同的用户身份在 VS 中运行单元测试？

> ID：14572044
> 
> 赞同：4
> 
> 时间：2013-01-28T22:01:00.943
> 
> 标签：visual-studio-2010, unit-testing, authentication

我是一名承包商，正在做一些单元测试，这些测试使用 Windows 身份验证来访问不同域中的测试服务器。我一直在我的客户 VM 上运行我的测试，自从我在他们的网络上以来，一切都运行良好，并且使用我在他们的域上的登录凭据来运行单元测试。不幸的是，VM 非常慢，（服务器重新启动需要 30 分钟，而我提出了 14 项目解决方案），我决定尝试在我的笔记本电脑上运行 VS。我能够让它构建得很好，但是当我去运行我的单元测试时，它在尝试访问测试服务器时出错，因为我在我的笔记本电脑上以自己的身份运行，而不是在他们的域中。

有没有办法以不同的用户身份运行单元测试？

我尝试使用 C:\Windows\System32\runas.exe /netonly /user:theirDomain\uid "C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe" 运行测试，但是它不起作用（我猜是因为单元测试实际上是作为 QTAgent32.exe 运行的，所以它不起作用）。我已经能够使用相同的命令让 SQL Server Manager 连接到他们的 SQL Server。

另一种选择可能是想办法在我的笔记本电脑上的域上信任我的用户凭据，但这也不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:21:29.817

您可以使用命令行应用程序 mstest.exe 直接运行单元测试。这就是 VS 在幕后所做的。结合runas.exe，我认为应该可以完全解决您的问题。

mstest.exe 参考：http: [//msdn.microsoft.com/en-us/library/ms182489 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms182489(v=vs.80).aspx)

编辑：我只想说，为了提高效率，我认为理想的解决方案是让他们的系统管理员创建一个域帐户供您使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T04:35:24.647

如果您有域帐户 - 您可以提高 VPN 连接或将您的笔记本电脑添加到他们的域。

# iphone - 如果没有 Default.png 文件，我的 iPhone 应用程序会被批准吗？

> ID：14572052
> 
> 赞同：0
> 
> 时间：2013-01-28T22:01:23.530
> 
> 标签：iphone, ios, default.png

我还需要在我的 iPhone 应用程序中包含 Default.png 还是 Default@2x.png 就足够了？

我看到我可以编译一个只有 Default@2x.png 和 Default-568h@2x.png 的应用程序，但我的应用程序是否会在没有 Default.png 的情况下被批准进入 App Store？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:33:49.683

我不知道它是否会被拒绝，但根据 Apple 的指导方针，我认为应该是。您的应用程序需要在 iPad 上运行（即使它是 iPhone 应用程序），而 iPad mini 或 iPad 2 将以非视网膜分辨率运行您的应用程序，因此它应该有一个 Default.png。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:39:54.503

唯一确定的方法是等待和观察。

即使他们在没有应用的情况下批准了其他人的应用程序，但这并不意味着他们会批准您的应用程序。

即使他们批准**了您的**应用程序，这并不意味着他们会在您提交更新时批准相同的应用程序。

话虽如此，如果您只包含@2X 版本并在非视网膜设备上运行它，它会缩小@2X 图像并显示它。它不显示黑屏。

如果我不得不**猜测**，那么我会说这很可能不会成为问题，因为：

1.  他们不需要它
2.  没有它就不会产生警告（不像@2X）
3.  如果非视网膜设备上没有@2X 图像，它会在非视网膜设备上使用缩小版本的图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:27:33.367

我们无法知道您的应用是否会因任何原因被拒绝，但我想说，只要没有自动检查发现这个丢失的图像，您就可以了。原因是，谁会说启动应用程序时出现黑屏不是故意的。不过，这一切都只是猜测。

# c++ - 使用.net 3.5在vs2010中进行混合模式调试

> ID：14572055
> 
> 赞同：-1
> 
> 时间：2013-01-28T22:01:28.243
> 
> 标签：c++, debugging, command-line-interface, mixed-mode

出于某种奇怪的原因，我无法让 VS2010 在我的解决方案中的托管代码中的断点处停止。我只在 C++ 和 C++/CLI 中工作。

两个项目：

*   一个用 /clr 编译的 DLL。
*   一个没有 /clr 编译的 .exe，因此它是本机 win32 控制台应用程序。
*   两个项目的调试器都设置为 /Mixed。

什么有效：

*   在本机项目中进行调试。
*   在 dll 内的本机代码中进行调试。
*   PDB 文件的加载显示在 dll 和 exe 的调试输出中。

注意： - 当我通过内部调试器（F5）运行应用程序时，它会显示“断点当前不会被命中”消息，用于有效跳过的所有断点。- 我已经在这里和其他地方阅读了很多帖子和讨论，并且通常切换到/混合模式调试并没有改变任何东西（它已经设置好了）。

可能的答案？- 我想知道我目前的困境是否可能是因为我只安装了 VS2008 ***express***。为了能够将 C++/CLI 与 .net 3.5 一起使用，我需要访问第三方 2008 编译程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:20:49.823

似乎安装完整版的 vs2008 就是答案。我最终在 2008 年完全重建了我的项目，以使其正常工作。

我真的不介意，因为 vs2010 失去了 C++/CLI 的智能感知，实际上感觉就像是回到 2008 年的升级。

顺便说一句，最近下载的 vs2008 不再需要购买密钥。

# c# - 如何通过自定义打印窗口打印完整的 gridview 区域？

> ID：14572059
> 
> 赞同：2
> 
> 时间：2013-01-28T22:01:47.233
> 
> 标签：c#, javascript, asp.net, css, gridview

我正在创建一个自定义 GridView 数据打印窗口，该窗口旨在仅打印出 gridview 区域。一个按钮将打印当前窗口的网格视图，另一个按钮将打印 GridView 中的所有记录。就目前的代码而言，当单击按钮时（分别打印当前页面和所有记录），预览窗口完美地显示了 GridView 中的所有记录（23 列，包括 GridView 两侧的两个命令字段）。但是，当打印出作业时，无论我调整什么打印机或 CSS/格式设置，网格视图都会被切掉（只显示大约一半的网格）。

我遇到的两个挑战是 1）我无法以纵向或横向打印完整的 gridview 和 2）我的 javascript 很弱。如何调整以下代码，以便在打印 gridview 时打印 FULL 网格？

如果需要更多信息，请随时询问。

这是我在打印按钮的 aspx 文件后面的代码。

```
protected void PrintCurrentPage_Click(object sender, EventArgs e)
{
GridView1.PagerSettings.Visible = false;
GridView1.DataBind();
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
GridView1.RenderControl(hw);
string gridHTML = sw.ToString().Replace("\"", "'")
.Replace(System.Environment.NewLine, "");
StringBuilder sb = new StringBuilder();
sb.Append("<script type = 'text/javascript'>");
sb.Append("window.onload = new function(){");
sb.Append("var printWin = window.open('', '', 'left=0");
sb.Append(",top=0,width=3000,height=600,status=0');");
sb.Append("printWin.document.write(\"");
sb.Append(gridHTML);
sb.Append("\");");
sb.Append("printWin.document.close();");
sb.Append("printWin.focus();");
sb.Append("printWin.print();");
sb.Append("printWin.close();};");
sb.Append("</script>");
ClientScript.RegisterStartupScript(this.GetType(), "GridPrint", sb.ToString());
GridView1.PagerSettings.Visible = true;
GridView1.DataBind();

} 
```

这是打印所有记录的代码。

```
protected void PrintAll_Click(object sender, EventArgs e)
{
GridView1.AllowPaging = false;
GridView1.DataBind();
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
GridView1.RenderControl(hw);
string gridHTML = sw.ToString().Replace("\"", "'")
    .Replace(System.Environment.NewLine, "");
StringBuilder sb = new StringBuilder();
sb.Append("<script type = 'text/javascript'>");
sb.Append("window.onload = new function(){");
sb.Append("var printWin = window.open('', '', 'left=0");
sb.Append(",top=0,width=3000,height=600,status=0');");
sb.Append("printWin.document.write(\"");
sb.Append(gridHTML);
sb.Append("\");");
sb.Append("printWin.document.close();");
sb.Append("printWin.focus();");
sb.Append("printWin.print();");
sb.Append("printWin.close();};");
sb.Append("</script>");
ClientScript.RegisterStartupScript(this.GetType(), "GridPrint", sb.ToString());
GridView1.AllowPaging = true;
GridView1.DataBind();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:19:02.750

如果网格的宽度那么大，则没有任何内容，默认情况下您可以将其全部打印在同一页面中...

但是，这不是坏消息，事实上，有几篇文章可以帮助您在用户打印时以不同的方式选择和显示相同的网格。

我看到的最好方法是在一列中显示更多信息，将它们分组到其他与用户相关的内容中，然后尝试一下......

这只是一个示例，我不知道您在打印什么，但是，与其将客户的所有字段放在一行中，不如将它们分组为：

```
Customer                  | Sales Responsible        | ...
------------------------------------------------------------------
Bruno Alexandre           | Techie Joe               | ...
My Street not yours, 56   | 43 sales this month      | ...
DK-1400 København         | 450.000€ per sale (avg)  | ... 
```

然后你可以用 where 来装饰那张`class`桌子`table-print`：

```
<style>
@media screen
{
  table-print {display:none;}
}
@media print
{
  table-print {display:block;}
}
@media screen,print
{
  ...
}
</style> 
```

之后，阅读如何处理分页符：

> [打印大型 HTML 表格时如何处理分页符](https://stackoverflow.com/questions/1763639/how-to-deal-with-page-breaks-when-printing-a-large-html-table)

甚至还有[Printliminator](http://css-tricks.com/print-better-with-the-printliminator/)可以帮助用户禁用他们不想打印的内容......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T15:50:28.067

要将 GridView 的方向更改为 RTL：

```
StringWriter sw = new StringWriter();
HtmlTextWriter hw = new HtmlTextWriter(sw);
hw.AddStyleAttribute(HtmlTextWriterStyle.Direction, "rtl"); 
```

# php - 更新表单中文本框的标题

> ID：14572066
> 
> 赞同：0
> 
> 时间：2013-01-28T22:02:21.443
> 
> 标签：php, javascript, jquery, html, forms

我有一个 jQuery 插件，它允许我通过使用将内联标签添加到表单的文本框，`Title="Full Name"`唯一的问题是我编写了一个 javascript 翻译器，可以将页面上的所有内容翻译成英语、法语或西班牙语。我也需要更新标题。

我试过使用`document.getElementById`，但这不起作用。我猜是因为它在表格内。这是构成我的表单的 html 的副本。

```
 <form id="signupform" method="post" action="login.php">
            <div class="field"><input type="text" class="box" id="name" name="fullname" title="Full Name"></div>
            <div class="field"><input type="email" class="box" id="email" name="useremail" title="Email Address"></div>
            <div class="field"><input type="password" class="box" id="pass" name="password" title="Password"></div>
            <div class="field"><input type="password" class="box" id="confirmpass" name="confirm" title="Confirm Password"></div>
            <div id="lowersignuparea"> 
            <table width="306" cellspacing="0" cellpadding="0" align="center">
            <tr>
            <td><span id="signuperror"><?php echo $signuperror ?></span></td>
            <td width="87"><span><input type="submit" class="signupbutton" id="signupbtn" value="Sign Up" style="cursor:pointer;"></span></td>
            </tr>
            </table>
            </div>
  </form> 
```

关于如何通过 JavaScript 更改文本框标题的任何想法？

谢谢。-瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:22:12.783

您可以像这样使用 javascript 设置标题值。

```
document.getElementById("elementid").setAttribute("title", "my new title"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T05:34:49.050

您应该将代码包装在 ready 事件中，如下所示：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('form input').each(function(){
            var translated = translateYourTitlte($(this).attr('title'));
            $(this).attr('title', translated);
        });
    });
</script> 
```

您应该提供用于显示工具提示的插件名称。

# arrays - 针对不同元素多次计算位移

> ID：14572071
> 
> 赞同：0
> 
> 时间：2013-01-28T22:02:37.777
> 
> 标签：arrays, matlab, matrix

我有以下数据（或类似数据）：

```
 154240           1           7
  154240           2           2
  154240           5           6
  154240           2           5
  154240           6           7
  154240           2           7
  154240           5           6
  154240           6           7
  154240           4           6
  154240           4           6
  154240           4           6

  641224           2           3
  641224           2           1
  641224           2           3
  641224           1           2

  641311           5           5
  641311           7           5 
```

它表示 [tag number of rat, x coord, y coord] 形式的数据（正如我正在研究的大鼠种群）。我想为标签的每个相同值计算 x 和 y 相对于第一个 x 和 y 条目的位移，即我想要一个 nx3 矩阵（其中 n 是我的数据的大小），它给了我 [标签再次编号，（0，x2-x1，x3-x1，x4-x1 等），（0，y2-y1，y3-y1，y4-y1 等）] 但我现在很困惑。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:40:58.800

假设你已经有一个矩阵

```
A = [tag,x,y]; 
```

你应该试试

```
disp(:,1) = A(:,1);    
disp(:,2) = arrayfun(@(ii) A(ii,2) - A(1,2),1:size(A,1));
disp(:,3) = arrayfun(@(ii) A(ii,3) - A(1,3),1:size(A,1)); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:33:51.950

我认为最简单的方法是首先将您的数据拆分为仅包含单个标签的数据集单元数组。然后只需从每个数据集中减去第一行。

您可以使用该`diff`函数查找第一列更改的索引。这将为您提供拆分数据的所有点。像这样的东西：

```
splits = find([1; diff(M(:,1)) ~= 0; 1]) 
```

打破这一点，我们说第一行总是一个兴趣点。然后索引更改的任何行都是兴趣点。最后，最后一行*之后*的行也是一个兴趣点。

在你的数据上运行它，我得到这个：

```
splits =

     1
    12
    16
    18 
```

和理智测试：

```
>> M(splits(1:end-1),:)

ans =

      154240           1           7
      641224           2           3
      641311           5           5 
```

现在您可以构建您感兴趣的范围：

```
>> ranges = [splits(1:end-1), splits(2:end)-1]

ranges =

     1    11
    12    15
    16    17 
```

然后，您可以将矩阵中的相关行提取到一个单元格数组中，如下所示：

```
D = arrayfun( @(x) M(ranges(x,1):ranges(x,2),:), 1:size(ranges,1), 'uniformoutput', false ) 
```

现在您有了一个由 3 列矩阵组成的元胞数组，其中每个元胞代表一个标记数据集。这是其中之一：

```
>> D{2}

ans =

      641224           2           3
      641224           2           1
      641224           2           3
      641224           1           2 
```

现在您可以浏览您的单元格并应用从其余部分中减去第一行的操作。有多种方法可以做到这一点。这对你来说是一个练习。

# function - Mathematica 中带条件的多元函数

> ID：14572075
> 
> 赞同：0
> 
> 时间：2013-01-28T22:02:56.440
> 
> 标签：function, wolfram-mathematica, conditional-statements

我正在尝试定义一个双变量函数，该函数根据是否满足条件来取值。我让它们适用于单变量案例，但我坚持使用双变量案例：

```
g[x_, y_] := 10 /; x < 10
g[x_, y_] := 20 /; (x >= 10 && y < 5)
g[x_, y_] := -5 /; (x >= 10 && y >= 5); 
```

这个函数从来没有给我-5的值。

g[12,10] = 20？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:15:18.730

这对我有用：

```
Clear[g]
g[x_, y_] /; x < 10 := 10
g[x_, y_] /; x >= 10 \[And] y < 5 := 20
g[x_, y_] /; x >= 10 \[And] y >= 5 := -5 
```

然后

```
In[73]:= g[12, 10]

Out[73]= -5 
```

为什么这个版本有效而​​你的版本不可用我不确定。也许其他人会过来告诉我们

# c# - 我无法返回 LDAP 组的成员列表和 memberOf 列表

> ID：14572079
> 
> 赞同：-1
> 
> 时间：2013-01-28T22:03:12.857
> 
> 标签：c#, .net, ldap

我正在尝试从 LDAP 获取所有组及其相关的子组和成员。

我正在使用这段代码：

```
public List<Group> GetGroups()
{
        DirectoryEntry de = new DirectoryEntry("LDAP://someLdap.com");
        DirectorySearcher searcher = new DirectorySearcher(de);
        searcher.Filter = "(&(objectClass=group))";
        searcher.PageSize = 500;

        searcher.PropertiesToLoad.Add("sAMAccountName");
        searcher.PropertiesToLoad.Add("description");
        searcher.PropertiesToLoad.Add("memeber"); 
        searcher.PropertiesToLoad.Add("memeberOf");
        searcher.SearchScope = SearchScope.Subtree;

        List<Group> groups;
        using (SearchResultCollection results = searcher.FindAll())
        {
            int count = 1;
            groups = new List<Group>();

            foreach (SearchResult result in results)
            {
                Group group = new Group();
                if (result == null) continue;
                Console.WriteLine(count++); // just to print 

                group.Name = result.Properties["sAMAccountName"][0].ToString();
                group.Description = result.Properties["description"][0].ToString();
                ResultPropertyValueCollection valueCollection =
                    result.Properties["memeber"];
                foreach (var user in valueCollection)
                {
                    group.Users.Add(user.ToString());
                }

                groups.Add(group);
            }
        }
        return groups;
    } 
```

该代码仅适用于`sAMAccountName`和`description`

但我无法获得全部`member`和`memberOf`价值

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:31:59.853

那是因为您在整个代码和帖子中都拼错了属性名称。

# php - PHPSESSID 始终在 URL 中（启用 cookie）

> ID：14572080
> 
> 赞同：2
> 
> 时间：2013-01-28T22:03:13.433
> 
> 标签：php

我有一个简单的身份验证脚本。它将从登录表单发布的数据与数据库表用户进行比较 - 如果成功，我将通过以下方式开始会话：

```
session_start();
$_SESSION['login'] = "1";
$_SESSION['user'] = $_POST["user"];
$_SESSION['admin'] = "1"; 
```

问题是我总是在 URL 中有会话 ID（启用了 cookie）。PHP.ini 是这样设置的：

```
session.use_cookie = 1
session.use_only_cookie = 0
session.use_trans_sid = 1 
```

我在本地主机上运行它。

我希望我的会话更喜欢在 cookie 中获取会话 ID - 如果启用。只有在禁用 cookie 时才应使用在 URL 中获取会话 ID。我读过它应该自动表现得像那样，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:27:32.970

你可能会错过

`use_trans_sid = 0`

如果启用“use_trans_sid”，则会话 ID 每次都附加到 URL。

# php - 在php中附加文件并插入数据库

> ID：14572082
> 
> 赞同：1
> 
> 时间：2013-01-28T22:03:15.170
> 
> 标签：php, javascript, jquery, html, mysql

这是附加文件的普通 HTML 方法。

表格编码=`<"multipart/form-data" action="savefile.php" method="POST" name="myform">`

发送此文件：

```
 input name="myfile" type="file" onchange="document.forms['myform'].submit() ;" 

</form> 
```

**保存文件.php**

```
move_uploaded_file($_FILES["myfile"]["tmp_name"],

"upload/" . $_FILES["myfile"]["name"]);

echo "Stored in: " . "upload/" . $_FILES["myfile"]["name"]; 
```

它工作得很好，我的困难是当我附加一个文件并在我刷新页面时发送时，我附加的文件仍然保留在附件中，我该如何清除它以显示“没有选择的文件”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:07:52.250

您需要使用重定向用户

```
 header("Location: yourpage.php"); 
```

此外，以这种方式提交表单可能不适用于每个浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:19:16.220

```
<input name="myfile" type="file" onchange="document.forms['myform'].submit() ;" /> 
```

和 JAVASCRIPT

```
var myInput = $("#input[name='myfile']");       

function resetInput(){       
    myInput.replaceWith( myInput.val('').clone( true ) );
}; 
```

`resetInput()`上传后调用。

翻录并改编[自此线程](https://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery)

# java - 如何有效地相交 Guava Range 和 TreeSet？

> ID：14572083
> 
> 赞同：3
> 
> 时间：2013-01-28T22:03:17.627
> 
> 标签：java, guava

我想取集合和范围的交集，以便得到一个集合，其中包含不在范围内的每个元素。例如，我想要一种从以下代码片段中获取`set`和的方法：`range`

```
import com.google.common.collect.*;

TreeSet<Integer> set = Sets.newTreeSet();
Collections.addAll(set, 1,2,3,5,11);
Range<Integer> range = Range.closed(4,10); 
```

并返回一个新的 TreeSet 只包含`5`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T22:13:47.527

在这个特定的例子中，你最好不要使用`Range`，而是`set.subSet(4, true, 10, true)`直接使用，但可能你有一个更复杂的用例，你的代码是一个简化的例子。

除了自己处理所有案件之外，真的没有太多选择。部分问题是 a`NavigableSet`可以使用任意`Comparator`，但`Range`（故意）仅适用于值类型的自然顺序，因此在 Guava 中提供一个采用任意`Range`和 a`NavigableSet`并与它们相交的方法会有些尴尬。

最通用的解决方案看起来像......

```
if (range.hasLowerBound()) {
  if (range.hasUpperBound()) {
    return set.subSet(
      range.lowerEndpoint(),
      range.lowerBoundType() == BoundType.CLOSED,
      range.upperEndpoint(),
      range.upperBoundType() == BoundType.CLOSED);
  } else {
    return set.tailSet(
      range.lowerEndpoint(),
      range.lowerBoundType() == BoundType.CLOSED);
  }
} else {
  if (range.hasUpperBound()) {
    return set.headSet(
      range.upperEndpoint(),
      range.upperBoundType() == BoundType.CLOSED);
  } else {
    return set;
  }
} 
```

也就是说，值得一提的是，如果你不关心效率，你可以做`Iterables.removeIf(set, Predicates.not(range))`or `Sets.filter(set, range)`。

# javascript - 仅在模式窗格中保留选项卡

> ID：14572084
> 
> 赞同：40
> 
> 时间：2013-01-28T22:03:24.483
> 
> 标签：javascript, jquery, html

在我当前的项目中，我们有一些模式窗格可以打开某些操作。我正在尝试获取它，以便当该模式窗格打开时，您无法使用选项卡转到它之外的元素。jQuery UI 对话框和 Malsup jQuery 块插件似乎可以做到这一点，但我试图只获得一个功能并将其应用到我的项目中，但对我来说，他们是如何做到这一点的并不是很明显。

我已经看到有些人认为不应禁用标签，我可以看到这种观点，但我得到了禁用它的指令。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-02-16T13:03:11.553

这只是通过添加其他输入类型并考虑 shift+tab 来扩展基督教答案。

```
var inputs = $element.find('select, input, textarea, button, a').filter(':visible');
var firstInput = inputs.first();
var lastInput = inputs.last();

/*set focus on first input*/
firstInput.focus();

/*redirect last tab to first input*/
lastInput.on('keydown', function (e) {
   if ((e.which === 9 && !e.shiftKey)) {
       e.preventDefault();
       firstInput.focus();
   }
});

/*redirect first shift+tab to last input*/
firstInput.on('keydown', function (e) {
    if ((e.which === 9 && e.shiftKey)) {
        e.preventDefault();
        lastInput.focus();
    }
}); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-29T22:13:04.127

我终于能够通过在模式窗格打开时将焦点放在模式窗格中的第一个表单元素上，然后如果在焦点位于模式窗格中的最后一个表单元素上时按下 Tab 键，那么我至少能够在某种程度上实现这一点焦点回到那里的第一个表单元素，而不是 DOM 中的下一个元素，否则会获得焦点。很多这样的脚本来自[jQuery：How to capture the TAB keypress within a Textbox](https://stackoverflow.com/questions/1314450/jquery-how-to-capture-the-tab-keypress-within-a-textbox)：

```
$('#confirmCopy :input:first').focus();

$('#confirmCopy :input:last').on('keydown', function (e) { 
    if ($("this:focus") && (e.which == 9)) {
        e.preventDefault();
        $('#confirmCopy :input:first').focus();
    }
}); 
```

我可能需要进一步完善它以检查是否按下了其他一些键，例如箭头键，但基本思想就在那里。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-08-10T06:30:54.150

Christian 和 jfutch 的好解决方案。

值得一提的是，劫持 Tab 键击存在一些陷阱：

*   tabindex 属性可能会在模态窗格内的某些元素上设置，以使元素的 dom 顺序不遵循 tab 顺序。（例如，在最后一个可选项卡元素上设置 tabindex="10" 可以使其在选项卡顺序中排在第一位）
*   如果用户与不触发模态关闭的模态外部元素进行交互，则可以在模态窗口外进行选项卡。（例如，单击位置栏并开始跳回页面，或在 VoiceOver 之类的屏幕阅读器中打开页面地标并导航到页面的不同部分）
*   `:visible`如果dom 脏了，检查元素是否会触发重排
*   文档可能没有 :focussed 元素。在 chrome 中，可以通过单击不可聚焦的元素然后按 Tab 来更改“插入符号”的位置。用户可以将插入符号位置设置为超过最后一个可选项卡元素。

我认为更强大的解决方案是通过将所有可选项卡内容的 tabindex 设置为 -1 来“隐藏”页面的其余部分，然后在关闭时“取消隐藏”。这将在模态窗口内保持 tab 顺序并遵守 tabindex 设置的顺序。

```
var focusable_selector = 'a[href], area[href], input:not([disabled]):not([type="hidden"]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]';

var hide_rest_of_dom = function( modal_selector ) {

    var hide = [], hide_i, tabindex,
        focusable = document.querySelectorAll( focusable_selector ),
        focusable_i = focusable.length,
        modal = document.querySelector( modal_selector ),
        modal_focusable = modal.querySelectorAll( focusable_selector );

    /*convert to array so we can use indexOf method*/
    modal_focusable = Array.prototype.slice.call( modal_focusable );
    /*push the container on to the array*/
    modal_focusable.push( modal );

    /*separate get attribute methods from set attribute methods*/
    while( focusable_i-- ) {
        /*dont hide if element is inside the modal*/
        if ( modal_focusable.indexOf(focusable[focusable_i]) !== -1 ) {
            continue;
        }
        /*add to hide array if tabindex is not negative*/
        tabindex = parseInt(focusable[focusable_i].getAttribute('tabindex'));
        if ( isNaN( tabindex ) ) {
            hide.push([focusable[focusable_i],'inline']);
        } else if ( tabindex >= 0 ) {
            hide.push([focusable[focusable_i],tabindex]);
        } 

    }

    /*hide the dom elements*/
    hide_i = hide.length;
    while( hide_i-- ) {
        hide[hide_i][0].setAttribute('data-tabindex',hide[hide_i][1]);
        hide[hide_i][0].setAttribute('tabindex',-1);
    }

}; 
```

要取消隐藏 dom，您只需使用“data-tabindex”属性查询所有元素并将 tabindex 设置为属性值。

```
var unhide_dom = function() {

    var unhide = [], unhide_i, data_tabindex,
        hidden = document.querySelectorAll('[data-tabindex]'),
        hidden_i = hidden.length;

    /*separate the get and set attribute methods*/
    while( hidden_i-- ) {
        data_tabindex = hidden[hidden_i].getAttribute('data-tabindex');
        if ( data_tabindex !== null ) {
            unhide.push([hidden[hidden_i], (data_tabindex == 'inline') ? 0 : data_tabindex]);
        }
    }

    /*unhide the dom elements*/
    unhide_i = unhide.length;
    while( unhide_i-- ) {
        unhide[unhide_i][0].removeAttribute('data-tabindex');
        unhide[unhide_i][0].setAttribute('tabindex', unhide[unhide_i][1] ); 
    }

} 
```

当模态打开时，将 dom 的其余部分从 aria 隐藏起来稍微容易一些。循环浏览模态窗口的所有亲属并将 aria-hidden 属性设置为 true。

```
var aria_hide_rest_of_dom = function( modal_selector ) {

    var aria_hide = [],
        aria_hide_i,
        modal_relatives = [],
        modal_ancestors = [],
        modal_relatives_i,
        ancestor_el,
        sibling, hidden,
        modal = document.querySelector( modal_selector );

    /*get and separate the ancestors from the relatives of the modal*/
    ancestor_el = modal;
    while ( ancestor_el.nodeType === 1 ) {
        modal_ancestors.push( ancestor_el );
        sibling = ancestor_el.parentNode.firstChild;
        for ( ; sibling ; sibling = sibling.nextSibling ) {
            if ( sibling.nodeType === 1 && sibling !== ancestor_el ) {
                modal_relatives.push( sibling );
            }
        }
        ancestor_el = ancestor_el.parentNode;
    }

    /*filter out relatives that aren't already hidden*/
    modal_relatives_i = modal_relatives.length;
    while( modal_relatives_i-- ) {

        hidden = modal_relatives[modal_relatives_i].getAttribute('aria-hidden');
        if ( hidden === null || hidden === 'false' ) {
            aria_hide.push([modal_relatives[modal_relatives_i]]);
        }

    }

    /*hide the dom elements*/
    aria_hide_i = aria_hide.length;
    while( aria_hide_i-- ) {

        aria_hide[aria_hide_i][0].setAttribute('data-ariahidden','false');
        aria_hide[aria_hide_i][0].setAttribute('aria-hidden','true');

    }       

}; 
```

当模式关闭时，使用类似的技术取消隐藏 aria dom 元素。在这里最好删除 aria-hidden 属性而不是将其设置为 false ，因为在元素上可能存在一些冲突的 css 可见性/显示规则，在这种情况下，aria-hidden 的实现在这种情况下在浏览器中是不一致的（参见[https： //www.w3.org/TR/2016/WD-wai-aria-1.1-20160721/#aria-hidden](https://www.w3.org/TR/2016/WD-wai-aria-1.1-20160721/#aria-hidden) )

```
var aria_unhide_dom = function() {

    var unhide = [], unhide_i, data_ariahidden,
        hidden = document.querySelectorAll('[data-ariahidden]'),
        hidden_i = hidden.length;

    /*separate the get and set attribute methods*/
    while( hidden_i-- ) {
        data_ariahidden = hidden[hidden_i].getAttribute('data-ariahidden');
        if ( data_ariahidden !== null ) {
            unhide.push(hidden[hidden_i]);
        }
    }

    /*unhide the dom elements*/
    unhide_i = unhide.length;
    while( unhide_i-- ) {
        unhide[unhide_i].removeAttribute('data-ariahidden');
        unhide[unhide_i].removeAttribute('aria-hidden');
    }

} 
```

最后，我建议在元素上的动画结束后调用这些函数。下面是调用transition_end 上的函数的抽象示例。

我正在使用modernizr 来检测负载的转换持续时间。transition_end 事件使 dom 冒泡，因此如果在模式窗口打开时有多个元素正在转换，它可以多次触发，因此在调用隐藏 dom 函数之前检查 event.target。

```
/* this can be run on page load, abstracted from 
 * http://dbushell.com/2012/12/22/a-responsive-off-canvas-menu-with-css-transforms-and-transitions/
 */
var transition_prop = Modernizr.prefixed('transition'),
    transition_end = (function() {
        var props = {
            'WebkitTransition' : 'webkitTransitionEnd',
            'MozTransition'    : 'transitionend',
            'OTransition'      : 'oTransitionEnd otransitionend',
            'msTransition'     : 'MSTransitionEnd',
            'transition'       : 'transitionend'
        };
        return props.hasOwnProperty(transition_prop) ? props[transition_prop] : false;
    })();

/*i use something similar to this when the modal window is opened*/
var on_open_modal_window = function( modal_selector ) {

    var modal = document.querySelector( modal_selector ),
        duration = (transition_end && transition_prop) ? parseFloat(window.getComputedStyle(modal, '')[transition_prop + 'Duration']) : 0;

    if ( duration > 0 ) {
        $( document ).on( transition_end + '.modal-window', function(event) {
            /*check if transition_end event is for the modal*/
            if ( event && event.target === modal ) {
                hide_rest_of_dom();
                aria_hide_rest_of_dom();    
                /*remove event handler by namespace*/
                $( document ).off( transition_end + '.modal-window');
            }               
        } );
    } else {
        hide_rest_of_dom();
        aria_hide_rest_of_dom();
    }
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-02T08:11:43.080

我刚刚对 Alexander Puchkov 的[解决方案](https://stackoverflow.com/a/21811463/7662085)进行了一些更改，并将其作为 JQuery 插件。它解决了容器中动态 DOM 变化的问题。如果任何控件有条件地将其添加到容器中，则此方法有效。

```
(function($) {

    $.fn.modalTabbing = function() {

        var tabbing = function(jqSelector) {
            var inputs = $(jqSelector).find('select, input, textarea, button, a[href]').filter(':visible').not(':disabled');

            //Focus to first element in the container.
            inputs.first().focus();

            $(jqSelector).on('keydown', function(e) {
                if (e.which === 9) {

                    var inputs = $(jqSelector).find('select, input, textarea, button, a[href]').filter(':visible').not(':disabled');

                    /*redirect last tab to first input*/
                    if (!e.shiftKey) {
                        if (inputs[inputs.length - 1] === e.target) {
                            e.preventDefault();
                            inputs.first().focus();
                        }
                    }
                    /*redirect first shift+tab to last input*/
                    else {
                        if (inputs[0] === e.target) {
                            e.preventDefault();
                            inputs.last().focus();
                        }
                    }
                }
            });
        };

        return this.each(function() {
            tabbing(this);
        });

    };
})(jQuery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-06T20:58:36.583

对于像我一样最近进入这个领域的任何人，我已经采用了上面概述的方法，并且我对它们进行了一些简化以使其更易于消化。感谢@niall.campbell 在这里提出建议的方法。

可以在[此 CodeSandbox](https://codesandbox.io/s/nervous-feather-num1s?file=/src/index.js)中找到以下代码以供进一步参考和工作示例

```
let tabData = [];

const modal = document.getElementById('modal');
preventTabOutside(modal);

// should be called when modal opens
function preventTabOutside(modal) {
  const tabbableElements = document.querySelectorAll(selector);
  tabData = Array.from(tabbableElements)
    // filter out any elements within the modal
    .filter((elem) => !modal.contains(elem))
    // store refs to the element and its original tabindex
    .map((elem) => {
      // capture original tab index, if it exists
      const tabIndex = elem.hasAttribute("tabindex")
        ? elem.getAttribute("tabindex")
        : null;
      // temporarily set the tabindex to -1
      elem.setAttribute("tabindex", -1);
      return { elem, tabIndex };
    });
}

// should be called when modal closes
function enableTabOutside() {
  tabData.forEach(({ elem, tabIndex }) => {
    if (tabIndex === null) {
      elem.removeAttribute("tabindex");
    } else {
      elem.setAttribute("tabindex", tabIndex);
    }
  });
  tabData = [];
} 
```

# android - 为什么logcat会排出消息

> ID：14572089
> 
> 赞同：3
> 
> 时间：2013-01-28T22:03:36.060
> 
> 标签：android, eclipse, logcat

当我测试我的 android 应用程序时，我会记录显示在 LogCat 上的消息。但是消息很快从窗口顶部排出，因此无法足够快地阅读它们。

我怎样才能阻止这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:06:38.987

logcat 窗口中有一个滚动锁，您可以使用它来暂停打印输出。

要获取完整的 logcat 消息，您可以将它们重定向到文件：

`adb logcat >& output.log`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:16:08.053

这在某种程度上取决于您所说的“排水”。如果问题只是消息滚动太快而您需要停止自动滚动到底部，您可以在 IDE（或 DDMS/Monitor）中暂停此功能。如何暂停它取决于您的 IDE，在 IntelliJ 中，您只需单击日志输出中的某处即可放置光标，而在 Eclipse 中，logcat 窗口上方有一个按钮可以暂停输出滚动（不要忘记将其转回开，否则您将看不到新消息）。

但是，如果您的问题是记录了太多数据，即使滚动暂停，您也无法向上滚动查看所需内容，那么您需要减少记录。这是因为 Android logcat 驱动程序是一个固定大小的 64KB 循环内存缓冲区。因此，如果您记录了足够多的数据，它将开始覆盖日志中较旧的条目，并且在您有机会阅读它们之前它们就会消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:00:31.327

你为什么不过滤 logcat，让它显示你最感兴趣的东西。

您可以使用以下语法仅显示您感兴趣的标签（使用命令行中的 adb 工具 - 在 Eclipse 的 logcat 视图中也可用）：

```
adb logcat TAGTOSHOW:* TAGTOSHOW2:* *:s 
```

您可以根据需要包含任意数量的 TAG 组合。不要忘记 *.s 会使所有其他内容保持沉默。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T17:54:16.957

我更喜欢打开文件：

```
adb logcat | tee foo.log | grep "YOUR_TAG_OF_INTEREST" 
```

通过这种方式，您可以在终端窗口中获​​得您认为要查找的任何内容，但是如果您需要查看完整的日志，您可以将它们保存在一个文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T22:14:41.693

有一些方法：

1.  禁用自动滚动功能。单击“滚动锁定”按钮以禁用此功能。
2.  使用命令行工具。运行“adb logcat | less”，您可以浏览结果。您还可以运行“adb logcat > logcat.txt”并在此之后检查 logcat.txt。

# php - 知道如何修改正则表达式以检查邮政编码或地址吗？

> ID：14572090
> 
> 赞同：0
> 
> 时间：2013-01-28T22:03:37.650
> 
> 标签：php, regex

下面的代码遵循正则表达式中定义的规则。

1.  如果 ID 全部为数字，则在前 2 位数字后插入一个空格。
2.  如果 ID 在前 2 位数字之后有一个字符并且没​​有其他字符，则没有变化。
3.  如果 ID 有数字和字符，并且字符在数字中的任何位置都是 GG，则在 GG 之前插入 2 个空格。

我下面的代码满足这些规则。

这些规则旨在改进生产模式下的当前搜索功能。

我们在实施这些规则后遇到的问题是双重的。

1、用户可以在当前生产应用中使用ID、邮政编码和地址进行搜索，如果搜索参数有效，则可以得到结果。

实施这些规则后，邮政编码搜索和地址搜索不再起作用。

例如，与 ID 一样，如果用户使用 Id 搜索，则输出的结果仅为用户搜索的 ID。然后用户单击该 ID。

与邮政编码相同，并且在大多数情况下，地址的工作方式取决于用户是输入完整地址还是部分地址，在这种情况下，显示与输入部分匹配的地址。

邮政编码和地址在我们的开发服务器中不适用于这个新的修改版本。

我将永远感激任何帮助弄清楚为什么代码在模式之后停止工作。

我想出了正则表达式，但其他人写了查询。

```
function format($matches)
{
    return $matches[1][0].(strlen($matches[2][0])>0?$matches[2][0]:" ").$matches[3][0].(strlen($matches[4][0])>0?"  ".$matches[4][0]:"");
}

// construct regular expression
$pattern
= '/'         // regex delimiter
. '('         // START of a capture group
. '\d{2}'     // exactly two digits
. ')'         // END of capture group
. '('         // START SECOND capture group
. '[\sND]?'     // letters "D" OR "N" in any order or number - This is optional
. ')'         // END SECOND capture group
. '('         // START THIRD capture group
. '\d*'       // any number of digits
. ')'         // END THIRD capture group
. '('         // START FOURTH capture group
. 'GG'        // the letters "GG" EXACTLY
. '[\d]*'     // any number of digits
. ')'         // END THIRD capture group
. '?'         // make the LAST capture group OPTIONAL
. '/'         // regex delimiter
;

// get current matche
preg_match_all($pattern, $_GET['id'], $matches);

// reformat the match
$str = format($matches);

// query
$tsql = "SELECT *
FROM searchtable AS ST
inner join CONTAINSTABLE(gSearch, Name, '\"$id*\"') AS GT
ON ST.GUID = GT.[KEY]
WHERE GT.RANK > 0
ORDER BY list, Name, GT.RANK DESC"; 
```

如果有帮助，这些是我在编写正则表达式后所做的更改。

我改变了当前在产品中的工作：

```
$id= $_GET["id"]; 
```

对此：

```
// get current matche
preg_match_all($pattern, $_GET['id'], $matches);

// reformat the match
$str = format($matches); 
```

我没有弄乱查询，所以我认为我的问题与正则表达式有关。

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:51:30.663

分步执行似乎更容易、更智能、更易于维护：

```
$search = $_GET['id'];

if (preg_match('/^\d+$/', $search)) { // Only digits
    $search = substr($search, 0, 2).' '.substr($search, 2);
} else if (preg_match('/^\d+?GG\d+?$/', $search)) { // 'GG' between digits
    $search = str_replace('GG', '  GG', $search);
}

// query
$tsql = "SELECT *
FROM searchtable AS ST
inner join CONTAINSTABLE(gSearch, Name, '\"$search*\"') AS GT
ON ST.GUID = GT.[KEY]
WHERE GT.RANK > 0
ORDER BY list, Name, GT.RANK DESC"; 
```

# javascript - 如何在（MVC）中将 js/jquery 保持在底部

> ID：14572091
> 
> 赞同：2
> 
> 时间：2013-01-28T22:03:50.250
> 
> 标签：javascript, html, asp.net-mvc

我知道将 javascript/jquery 放在页面底部是一种最佳做法。

但是我究竟如何才能实现这种“最佳实践”？

在我当前的 webproject (MVC4) 中，我将我的 javascript 放在了底部。但是除非我将我的 javascript 放在标题中（这被认为是不好的做法？），否则我无法进行任何工作。

```
<body>
<div id="container">
  <div id="header">
  </div>

  <div id="content">
    <!--js function that calls upon jQuery (slider) -->
  </div>
</div>

  <!--Javascript declaration-->
</body> 
```

例如：

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
 <script type="text/javascript" src="js/slider.js"></script> 
```

函数 slider.js 需要 jQuery 才能使我的滑块工作。

如果函数需要访问它，有没有办法将我的所有 javascript 文件（包括 jQuery）保留在底部并加载 jQuery（或其他函数/库）？

***更新***

问题似乎出在 MVC **bundles**上。当我将 javascript 文件以正常语法放在底部时，一切正常。

是否需要单独的捆绑包？不确定 MVC 以何种顺序加载包。

应用这种bundle时（jquery先跟js函数），执行顺序是错误的。

**因此，我无法真正看到捆绑的优势，有人愿意解释吗？**

```
 bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                        "~/Scripts/jquery-1.7.1.js",                    
                        "~/Scripts/js/slider.js")); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:05:56.297

这很好的原因是浏览器与网页同步加载脚本。因此，如果您将它们放在顶部，加载大脚本将停止内容加载。如果将它放在 body 标签关闭之前的底部，内容将首先加载，从而使页面弹出更快而不会出现脚本停顿。

要解决您的问题，请将所有执行代码包装在 document.ready 或 jquery 等效项中：

```
$(function(){
//your code here
}) 
```

如果 jQuery 尚未加载，您可以使用 console.log 检查：

```
if(!window.jQuery)
{
console.log("problem");
} 
```

您在这里没有提供太多信息，这使得调试变得困难。我所能做的就是给你做这件事的步骤。您只需要确保在页面上运行任何其他脚本之前加载 jQuery。

您的页面中有内联脚本标签吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T22:07:15.137

只要 jQuery 导入在您的脚本之前，您应该能够将它们放在底部。您的页面中是否还有其他依赖于这些脚本的 javascript？

# c++ - 内存屏障是如何工作的？

> ID：14572092
> 
> 赞同：4
> 
> 时间：2013-01-28T22:03:55.430
> 
> 标签：c++, c, assembly, execution, instructions

在 Windows 下，有 3 个编译器内在函数来实现内存屏障：

```
1\. _ReadBarrier;

2\. _WriteBarrier;

3\. _ReadWriteBarrier; 
```

但是，我发现了一个奇怪的问题：_ReadBarrier 似乎是一个什么都不做的虚拟函数！以下是我用 VC++ 2012 生成的汇编代码。

我的问题是：如何在汇编指令中实现内存屏障功能？

```
int main()
{   
013EEE10  push        ebp  
013EEE11  mov         ebp,esp  
013EEE13  sub         esp,0CCh  
013EEE19  push        ebx  
013EEE1A  push        esi  
013EEE1B  push        edi  
013EEE1C  lea         edi,[ebp-0CCh]  
013EEE22  mov         ecx,33h  
013EEE27  mov         eax,0CCCCCCCCh  
013EEE2C  rep stos    dword ptr es:[edi]  
    int n = 0;
013EEE2E  mov         dword ptr [n],0  
    n = n + 1;
013EEE35  mov         eax,dword ptr [n]  
013EEE38  add         eax,1  
013EEE3B  mov         dword ptr [n],eax  
    _ReadBarrier();
    n = n + 1;
013EEE3E  mov         eax,dword ptr [n]  
013EEE41  add         eax,1  
013EEE44  mov         dword ptr [n],eax 
}
013EEE56  xor         eax,eax  
013EEE58  pop         edi  
013EEE59  pop         esi  
013EEE5A  pop         ebx  
013EEE5B  add         esp,0CCh  
013EEE61  cmp         ebp,esp  
013EEE63  call        __RTC_CheckEsp (013EC3B0h)  
013EEE68  mov         esp,ebp  
013EEE6A  pop         ebp  
013EEE6B  ret 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T22:26:21.563

`_ReadBarrier`, `_WriteBarrier`, 和`_ReadWriteBarrier`是[影响编译器如何重新排序代码的内在函数](http://msdn.microsoft.com/en-us/library/vstudio/f20w0x5e.aspx)；它们与 CPU 内存屏障完全无关，仅对特定类型的内存有效（请参阅[此处](http://msdn.microsoft.com/en-us/library/f20w0x5e%28v=vs.100%29.aspx)的“受影响的内存” ）。

[`MemoryBarrier()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684208%28v=vs.85%29.aspx)是您用来强制 CPU 内存屏障的内在函数。但是，Microsoft 的建议是使用`std::atomic<T>`VC++。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T23:25:58.073

现代处理器能够比实际“完成”指令的位置提前很长的距离执行指令，因此当涉及某些类型的内存操作时，使用内存屏障来防止它运行到很远的位置，其中严格的顺序是必需 - 对于大多数事情，实际上是在变量 b 之前写入变量 a 还是在 a 之前写入 b 并不重要。但有时确实如此。

x86 指令集有`lfence`、`sfence`和`fence`，它们分别是“隔离”加载、存储和所有内存操作的指令。关于“栅栏”或“屏障”指令的要点是**确保**屏障指令之前的所有指令在屏障之后的下一条指令可以继续之前完成它们的加载、存储或两者。

如果您正在实现例如信号量、互斥锁或类似指令，这一点很重要，因为在继续读取其他数据之前存储“我已锁定信号量”的值很重要。否则事情可能会出错，让我们说。

请注意，除非您真的知道自己在使用内存屏障做什么，否则最好不要使用它们——并依靠解决相同问题的现有代码——`std::atomic`是为此类代码提供资金的一个地方。我写了很多“棘手”的代码，但只有一两次我需要在我的代码中设置内存屏障。

有几次，我需要让编译器不散布代码，你可以用“无操作函数”来做到这一点，显然现在甚至有特殊的内在函数可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:21:33.020

有几个要点需要考虑。第一个可能是屏障只在多线程代码中起作用，并且大多数编译器需要一个特殊的选项来生成多线程代码。类似的东西`_ReadBarrier`几乎可以肯定是编译器内置的，除非您提供了多线程代码的选项，否则*应该什么都不做。*

第二个是硬件要求，即使在多线程环境中，也是不同的。在我工作过的大多数机器上（大约四十年），机器从来不需要任何东西。只有当机器具有复杂的读写管道时，障碍才会变得相关。（大多数早期的机器甚至没有栅栏或屏障指令，所以生成的代码必须是空的。）

# javascript - Web Speech API 中的网络错误

> ID：14572094
> 
> 赞同：1
> 
> 时间：2013-01-28T22:04:13.027
> 
> 标签：javascript, google-chrome, html5-audio, speech-to-text

我正在尝试 Web Speech API 的演示： https: [//www.google.com/intl/en/chrome/demos/speech.html](https://www.google.com/intl/en/chrome/demos/speech.html)。您至少需要 Chrome 25.0 版才能运行它。

我正在尝试连续使用 Web Speech API 进行长时间转录（10-15 分钟）。但是，我注意到大约 1-2 分钟后出现“网络”错误（如 Web Speech API 规范中所述：[https ://dvcs.w3.org/hg/speech-api/raw-file/提示/speechapi.html#dfn-onerror](https://dvcs.w3.org/hg/speech-api/raw-file/tip/speechapi.html#dfn-onerror)）。

有谁知道为什么这个“网络”错误会在 1-2 分钟后持续发生，是否有任何方法可以配置 Web Speech API 以实现更长、连续的转录？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-03T12:42:20.350

Web 语音 API 通常有 60 秒的识别时间。

您需要调用 Speechrecognition.onend() 方法，然后调用 Speechrecognition.start()。所以识别在停止后继续。

# objective-c - mittedValuesForKeys 在 NSManaged 对象子类上返回一个空字典

> ID：14572096
> 
> 赞同：3
> 
> 时间：2013-01-28T22:04:26.863
> 
> 标签：objective-c, core-data, nsmanagedobject

我正在使用由 XCode 中的核心数据 GUI 工具生成的 NSManaged 对象子类。

NSLog'ing 对象显示它已正确实例化并保存值......但如果我尝试使用这样的东西：

```
[generatedSubClass committedValuesForKeys:nil] 
```

我拿回一本空字典。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:58:40.923

文档指出`committedValuesForKeys`

> 返回由给定键指定的属性的接收器最后获取或保存的值的字典。

因此，您正在发送消息的对象不是最后一次获取或保存的。

另外，请注意这`committedValuesForKeys`是一个实例方法，而不是类方法。

因此，不是 但~~`[managedObjectSubclass committedValuesForKeys:nil]`~~
`[aManagedObject committedValuesForKeys:nil]`

# php - php mysql中的许多字段与许多表

> ID：14572097
> 
> 赞同：2
> 
> 时间：2013-01-28T22:04:36.370
> 
> 标签：php, mysql

我正在建立一个有很多查询的游戏网站。对于优化什么是最好的。处理具有大量表和关系或较少表但具有许多字段的数据？

我认为，尤其是在插入和更新方面，具有许多字段的较少字段会比许多表更好。那会给出更多的查询或？？？

我试图找出什么是最好的课程，当我有很多用户时，我的服务器在晚上遇到高负载......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:16:00.847

[从规范化](http://en.wikipedia.org/wiki/Database_normalization)的数据库开始。确保您对正在执行的查询/更新/插入具有适当的索引。定期使用[优化表。](http://dev.mysql.com/doc/refman/5.0/en/optimize-table.html)

如果您仍然遇到问题，请进行一些分析以找出性能不足的地方。然后考虑非规范化或重写查询。

另外确保系统不会出现[死锁](http://en.wikipedia.org/wiki/Deadlocks)。这真的搞砸了性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:07:25.367

我不认为列的数量会影响任何东西，真的。这完全取决于您对列的索引程度。如果您进行更多更新然后在特定字段上进行选择，您可能希望删除索引（如果有的话）。

不是真正的答案，只是我注意到的东西。

# java - HttpUrlConnection 冻结了我的 AsyncTask

> ID：14572099
> 
> 赞同：2
> 
> 时间：2013-01-28T22:04:39.897
> 
> 标签：java, android, http, httpurlconnection

在 AsyncTask 的“doInBackground”函数中，我得到了以下代码：

```
try 
{ 
    URL url = new URL(myUrl);       
    HttpURLConnection conn = (HttpURLConnection) url.openConnection();
    conn.setReadTimeout(10000);
    conn.setConnectTimeout(15000);
    conn.setRequestMethod("POST");
    conn.setDoInput(true);  

    Authenticator.setDefault(new Authenticator(){
                protected PasswordAuthentication getPasswordAuthentication() {                                              

        return new PasswordAuthentication ("myUsername", "myPassword".toCharArray());
        }           
    });

    conn.connect();
    int response = conn.getResponseCode();
    inputStream = conn.getInputStream();
    String content = convertInputStreamToString(inputStream);

    return content;

catch (Exception e) {
    e.printStackTrace();
    return null;            
} 
```

当凭据正常时，一切正常并且 ResponseCode 为 200。但如果我输入了错误的凭据，getResponseCode() 会使 AsyncTask 无限期地等待答案（超时不起作用）。查看 HttpUrlConnection 对象告诉我 ResponseCode 是-1。

即使用户提供了错误的凭据，我也需要处理所有情况。我怎样才能得到一个有用的答案？我应该使用 HttpUrlConnection 以外的其他类吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:41:10.723

您是否`String`从该函数返回并处理异常？你写了`onPostExecute`吗？

这是非常适合我的代码：

```
 URL url = new URL(strUrl);  

            conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod("GET");
            conn.setRequestProperty("Host", "myhost.com");
            conn.setRequestProperty("Authorization", "Basic " + Base64.encodeToString(toencode, Base64.DEFAULT));
            conn.setRequestProperty("User-Agent", "Mozilla/5.0 (Macintosh; U; PPC; en-US; rv:1.3.1)");
            conn.setRequestProperty("Accept-Charset", "UTF-8");

            conn.setConnectTimeout (5000) ; 
            conn.setDoOutput(true); 
            conn.setDoInput(true); 

            BufferedInputStream in = new BufferedInputStream(conn.getInputStream());
            result = Utilities.readStream(in);

            status_code = conn.getResponseCode();

            return result;  
        } catch (MalformedURLException e) {
            return e.getMessage();
          } catch (ProtocolException e) {

                try {
                    status_code = conn.getResponseCode();
                } catch (IOException e1) {
                    status_code = -1;
                }

              return e.getMessage();
          } catch (IOException e) {
                try {
                    status_code = conn.getResponseCode();
                } catch (IOException e1) {
                    status_code = -1;
                }

              return e.getMessage();
          } catch ( Exception e ) {
                try {
                    status_code = conn.getResponseCode();
                } catch (IOException e1) {
                    status_code = -1;
                }
              return e.getMessage();
          } 
            finally
            {
                conn = null;
            } 
```

# html - 如何在某个 div 中设置所有锚标签的样式？

> ID：14572100
> 
> 赞同：15
> 
> 时间：2013-01-28T22:04:42.977
> 
> 标签：html, css

我不知道如何正确地做到这一点。我有以下CSS：

```
#container > #main > #content > a {
    color: #3B7315;
} 
```

我正在使用它来设置div中所有`<a>`标签的样式。`#content`然而，问题是，它似乎没有对`<a>`div 或嵌套列表等中的标签进行样式设置。它只对最顶层的标签进行样式设置，如下所示：

```
<div id="content">
     <a href="#">Lorem ipsum</a>
</div> 
```

当我将链接放在另一个元素中时，样式就消失了。

那么我如何包含整个子元素并使样式从头`#content`开始递归地应用呢？我想我正在寻找某种通配符值？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-28T22:05:25.473

你让它变得比它需要的复杂得多：

```
#content a {} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T22:24:41.757

```
#content a, #content a:link, #content a:visited {base style rules}
#content a:hover, #content a:visited:hover, #content a:active {over style rules}
#content a:focus {wai style rules} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T22:20:10.397

所需要的只是您尝试设置样式的容器及其锚点。以下应该可以正常工作，特别是如果您使用的那个 div 是一个 id，因为这样它就不会重复到其他元素上，就像您在该 div 和其他 div 上有一个类一样。

```
#content a{ style rules; } 
```

希望这有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T04:35:57.073

符号 > 仅适用于直接子级。这就是为什么如果您使用它，它将仅应用于元素 id 内容的第一个子级 a

# python - 在 Python 中使用“十进制”

> ID：14572101
> 
> 赞同：2
> 
> 时间：2013-01-28T22:04:45.550
> 
> 标签：python, python-3.x, decimal-point

有人可以解释一下下面发生了什么：（我使用 Python 3.3）

```
1\. >>> Decimal("0.1") + Decimal("0.1") + Decimal("0.1") - Decimal("0.3")
       Decimal('0.0')

2\. >>> Decimal(0.1) + Decimal(0.1) + Decimal(0.1) - Decimal(0.3)
       Decimal('2.775557561565156540423631668E-17')

3\. >>> Decimal(0.1 + 0.1 + 0.1 - 0.3)
       Decimal('5.5511151231257827021181583404541015625E-17') 
```

我知道这与浮点限制有关，如果有人能解释原因，我会很高兴

*   `" "`与上面示例 1 和示例 2 之间的差异有什么关系
*   鉴于两者都没有，为什么 2 会产生与 3 不同的答案`" "`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T22:09:24.570

简而言之，既`0.1`不能也`0.3`不能完全表示为`float`：

```
In [3]: '%.20f' % 0.1
Out[3]: '0.10000000000000000555'

In [4]: '%.20f' % 0.3
Out[4]: '0.29999999999999998890' 
```

因此，当您使用`0.1`or`0.3`来初始化`Decimal()`时，结果值*大约* `0.1`是or `0.3`。

使用字符串（`"0.1"`或`"0.3"`）没有这个问题。

最后，您的第二个示例与您的第三个示例产生不同的结果，因为即使两者都涉及隐式舍入，它们涉及舍入到不同的小数位数。

# javascript - 如何调用 flowplayer 对象方法？

> ID：14572102
> 
> 赞同：0
> 
> 时间：2013-01-28T22:04:49.227
> 
> 标签：javascript, jquery, html, flowplayer

我需要将一种方法 - play() - 应用于 flowplayer 对象，但它不起作用，我不明白为什么，我该怎么办？在*setupContemporaryEvents()*函数中有错误的代码，建议，提前谢谢。

这是html：

```
<div id="area1" class="player aree" data-engine="flash">
  <video id="vid1" preload="none">
    <source src="myvideo1.flv" type="video/flv">
  </video>
</div>
<div id="area2" class="player aree" data-engine="flash">
  <video id="vid2" preload="none">
    <source src="myvideo2.flv" type="video/flv">
  </video>
</div> 
```

这是javascript：

```
$(function() {
  var video1, video2;
  var bVideo1 = false;
  var bVideo2 = false;
  video1 = $("#area1").flowplayer({swf: "flowplayer-5.3.1/flowplayer.swf"});
  video2 = $("#area2").flowplayer({swf: "flowplayer-5.3.1/flowplayer.swf"});

  $("#area1").bind("ready", function(e, api) {
    bVideo1 = true;
    setupContemporaryEvents();
  });
  $("#area2").bind("ready", function(e, api) {
    bVideo2 = true;
    setupContemporaryEvents();
  });

  var setupContemporaryEvents = function(){
    if(bVideo1 && bVideo2){
      $("#area1").bind("resume", function(e, api) {
        // not working
        $("#vid2").play();
        // not working
        $("#area2").play();
        // not working
        video2.play();
      });
    }
  };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:13:52.227

我找到了解决方案，这是对 javascript 的更正：

```
$(function() {
  var video1, video2;
  var bVideo1 = false;
  var bVideo2 = false;
  $("#area1").flowplayer({swf: "flowplayer-5.3.1/flowplayer.swf"});
  $("#area2").flowplayer({swf: "flowplayer-5.3.1/flowplayer.swf"});

  $("#area1").bind("ready", function(e, api) {
    bVideo1 = true;
    video1 = api;
    setupContemporaryEvents();
  });
  $("#area2").bind("ready", function(e, api) {
    bVideo2 = true;
    video2 = api;
    setupContemporaryEvents();
  });

  var setupContemporaryEvents = function(){
    if(bVideo1 && bVideo2){
      $("#area1").bind("resume", function(e, api) {
        video2.play();
      });
    }
  };
}); 
```

# c# - ASP.NET C# 将项目动态添加到存储过程中的列表

> ID：14572103
> 
> 赞同：0
> 
> 时间：2013-01-28T22:04:49.287
> 
> 标签：c#, asp.net

我希望我的帐户如下所示（在列表中）

```
<div id=AccountDiv" class"account-table">

<div class="color-1">
<h3>Account Information</h3>
<ul>
    <li style="text-align: left" >Electric: Austin Energy - 10265</li>
    <li style="text-align: left">Gas: Texas Gas Service - 15754892 </li>
    <li style="text-align: left">Propane: Propane Austin - 577-12</li>
</ul>
</div>

<div> 
```

我想动态地从数据库中提取每个帐户信息。我是 asp.net 的新手，所以我写了以下内容

```
<div id=AccountDiv" class"account-table">
<asp:Panel ID="AccountDiv" runat="server" CssClass="account-table">
<div class="color-1">
<h3>Account Information</h3>
<ul>

</ul>
</div>
<asp:Panel>
<div> 
```

这是我写的后端。

```
void PopulateAccountInformation()
    {

        DataAccess da = new DataAccess();
        da.AddParameter("SiteID", SiteID, DataAccess.SQLDataType.SQLInteger, 4);
        SiteHeader = da.runSPDataSet("GetSiteAccountList");

       for (int i = 0; i < SiteHeader.Tables[0].Rows.Count; i++)
        {
            Label LabelAccount = new Label();

            LabelAccount.Text = "Account Number: " + SiteHeader.Tables[0].Rows[i]["Account Number"].ToString();
            AccountDiv.Controls.Add(LabelAccount);
            AccountDiv.Controls.Add(new LiteralControl("<br />"));

        }

    } 
```

它显示如下信息：

帐号：3 786 843-7

帐号：6 520 325-9

账号：80-000178814-0162499-3

帐号：100269408-Swr

账号：100034269

账号：100269408

哪个很好，但是如何编写它以便为每个帐户列出一个列表？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:05:59.013

这应该有效。

标记：

```
<div id=AccountDiv" class"account-table">
<div class="color-1">
<h3>Account Information</h3>
<asp:Repeater ID="rptrAccounts" runat="server">
            <HeaderTemplate>
                <ul>
            </HeaderTemplate>
            <ItemTemplate>
                <li>
                    Account Number:&nbsp;<%# Eval("Account Number") %>
                </li>
            </ItemTemplate>
            <FooterTemplate>
                </ul>
            </FooterTemplate>
</asp:Repeater>
</div>
</div> 
```

后面的代码：

```
void PopulateAccountInformation()
{

    DataAccess da = new DataAccess();
    da.AddParameter("SiteID", SiteID, DataAccess.SQLDataType.SQLInteger, 4);
    SiteHeader = da.runSPDataSet("GetSiteAccountList");

    rptrAccounts.DataSource = SiteHeader.Tables[0];
    rptrAccounts.DataBind();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:21:25.033

你想使用 asp 内置的服务器控件`ListBox`。像这样：

```
<asp:ListBox ID="lstAccounts" runat="server"></asp:ListBox> 
```

然后在您的代码隐藏中，添加如下元素：

```
void PopulateAccountInformation()
    {

        DataAccess da = new DataAccess();
        da.AddParameter("SiteID", SiteID, DataAccess.SQLDataType.SQLInteger, 4);
        SiteHeader = da.runSPDataSet("GetSiteAccountList");

        foreach(DataRow account in SiteHeader.Tables[0].Rows)
        {
            this.lstAccounts.Items.Add(new ListItem("Account Number: " + account["Account Number"].ToString()));
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:12:37.933

像这样向您的页面添加文字控件：

```
<asp:Literal ID="litContent" runat="server"></asp:Literal> 
```

然后您的功能如下（未测试）：

```
void PopulateAccountInformation()
{
    DataAccess da = new DataAccess();
    da.AddParameter("SiteID", SiteID, DataAccess.SQLDataType.SQLInteger, 4);
    SiteHeader = da.runSPDataSet("GetSiteAccountList");
    string content = "<ul>";
    for (int i = 0; i < SiteHeader.Tables[0].Rows.Count; i++)
    {
       content +="<li style=\"text-align: left\" >" + SiteHeader.Tables[0].Rows[i]["Account Number"].ToString() + "</li>";

    }
    content += "</ul>";
    this.litContent.Text = content;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T22:13:14.830

研究使用Repeater 或DataList 控件。这些是用来显示数据的，你不需要像你试图做的那样手动添加控件。

# c# - 谁取消了我的任务？

> ID：14572104
> 
> 赞同：9
> 
> 时间：2013-01-28T22:04:50.747
> 
> 标签：c#, .net, task-parallel-library

我的 C# 任务被取消了，但我没有。我没有得到堆栈跟踪，也无法弄清楚问题出在哪里。

我的任务调用如下所示：

```
var t = Task<Boolean>.Factory.StartNew(() =>
    {
        Boolean bOk = DoSomthingImportant();
        return bOk;
    }, TaskCreationOptions.AttachedToParent)
    .ContinueWith<Boolean>((theTask) =>
    {
        var reason = theTask.IsCanceled ? "it was canceled" : "it faulted";
        Debug.WriteLine("Error: Task ended because " + reason + ".");
        ... log the exception to one of my objects...
        return false;
    }, TaskContinuationOptions.NotOnRanToCompletion); 
```

如果任务出错或被取消，我希望继续任务运行，但如果运行正常则不运行。延续永远不会执行。

稍后我的程序捕获了一个包装了 TaskCanceledException 的 AggregateException。

我与我的任务的另一个主要交互是调用 WaitAny(taskArray, timeout) 直到我没有更多任务要启动，然后调用 WaitAll 直到最后一个任务完成。

超时的 WaitAny 会导致取消吗？为什么我的继续没有被调用？

这只是我第二次使用任务库，所以我一无所知。

更新：

我发现了这个 SO 问题：如何将任务的已取消状态传播到继续任务。上面代码中的一个错误（但不是取消的原因）是我假设继续任务的状态与原始任务的状态相同。实际上，正如另一篇文章所述，您必须做一些工作才能从另一个那里得到一个。

更新 2：

布赖恩：感谢您的文档参考。我已经在高处和低处搜索了任务被取消的替代原因，但错过了这些词：

> “如果您正在等待转换到已取消状态的任务，则会制造并抛出一个任务（包装在 AggregateException 中）。请注意，此异常表示成功取消而不是错误情况。因此，任务的异常属性返回 null。 "

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T22:12:12.113

您正在等待继续，并且由于原始任务运行完成，因此取消了继续任务。[文档](http://msdn.microsoft.com/en-us/library/dd997396.aspx)中介绍了此行为。

# xcode - UISegment 的 UISegmentedControl setTint 仅在单击后有效

> ID：14572105
> 
> 赞同：0
> 
> 时间：2013-01-28T22:04:53.310
> 
> 标签：xcode, ios6, uisegmentedcontrol, uicolor, tint

Xcode、Obj-c、~~iOS 5.2~~ iOS **6.0**

我有一个 UISegmentedControl 正在使用这样的东西插入底部工具栏：

```
-(void) makeSegmentedControl {
    self.SegControl = [[UISegmentedControl alloc] initWithItems:@[@"Title1",@"Title2"]];
    self.SegControl.segmentedControlStyle = UISegmentedControlStyleBar;
    [self.SegControl setTarget:self action:@selector(handleSegment) forControlEvents:UIControlEventValueChanged]
    [self.SegControl setSelectedSegmentIndex:0];
 }
 -(void) AddSegmentedControlToToolbar {
     UIBarButtonItem *tmp = [UIBarButtonItem new];
     [tmp setCustomView:self.SegControl];
     [self.navigationController.toolbar setItems@[tmp]];
 }
 -(void) tintSegmentedControl {
     for (int i = 0; i< [self.SegControl.subviews count]; i++) {
          [[self.SegControl.subviews objectAtIndex:i] setTint:[UIcolor greenColor];
      }
      NSArray * sortedViews = [self.SegControl.subviews sortArrayUsingFunction:sortFunction];
      [[sortedViews objectAtIndex:self.SegControl.selectedSegmentIndex] setTintColor:[UIColor lightGreenColor]];
      for (id view in self.SegControl.subviews) {
          [view removeFromSuperView];
      }
      for (id view in sortedViews) {
          [self.SegControl addSubview:view];
      }
 }
 -(void)viewDidLoad {
     [self makeSegmentedControl];
     [self addSegmentedControlToToobar];
     [self tintSegmentedControl];
  } 
  -(void) handleSegment {
      [self tintSegmentedControl];
  } 
```

当我在我们的应用程序中运行类似的代码时，它会显示一个非常蓝色的 UISegmentedController，它会在单击时变为绿色。我已经尝试了一些事情，似乎 UISegments 上的色调只是拒绝坚持到视图完成加载之后。知道这里发生了什么吗？

## 编辑

因此，事实证明我实际上使用的是 iOS 6.0 模拟器，并且 iOS 6 中有一个限制，即您不能在 ViewDidAppear:Animated: 运行之前为 UISegmentedController 着色。我认为这是问题所在，因为当我进行此更改时：

```
-(void)viewDidLoad {
     [self makeSegmentedControl];
     [self addSegmentedControlToToobar];
} 
-(void)viewDidAppear {
     [NSTimer timerWithTimeInterval:0 target:self selector:@selector(tintSegmentedControl) userInfo:nil repeats:NO];
} 
```

有用。不是 100% 确定发生了什么。有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:58:07.447

试试这个代码

```
-(void) tintSegmentedControl {
    [self.SegControl setTintColor:[UIColor greenColor];
      NSArray * sortedViews = [self.SegControl.subviews sortArrayUsingFunction:sortFunction];
      [[sortedViews objectAtIndex:self.SegControl.selectedSegmentIndex] setTintColor:[UIColor lightGreenColor]];
      for (id view in self.SegControl.subviews) {
          [view removeFromSuperView];
      }
      for (id view in sortedViews) {
          [self.SegControl addSubview:view];
      }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:52:21.527

因此，事实证明 iOS 6 中有一个限制，即您不能在 ViewDidAppear:Animated: 运行之前为 UISegmentedController 着色。为了规避它，我做了这个代码更改（如您在编辑中看到的那样）。

```
-(void)viewDidLoad {
     [self makeSegmentedControl];
     [self addSegmentedControlToToobar];
} 
-(void)viewDidAppear {
     [NSTimer timerWithTimeInterval:0 target:self selector:@selector(tintSegmentedControl) userInfo:nil repeats:NO];
} 
```

# python - 如何在 python 中破坏异常堆栈以删除内部调用？

> ID：14572107
> 
> 赞同：2
> 
> 时间：2013-01-28T22:04:56.230
> 
> 标签：python

假设我有以下内容：

```
def foo():
    bar()

def bar():
    baz()

def baz():
    raise ValueError("hello")

foo() 
```

不出所料，痕迹是

```
$ python x.py
Traceback (most recent call last):
  File "x.py", line 10, in <module>
    foo()
  File "x.py", line 2, in foo
    bar()
  File "x.py", line 5, in bar
    baz()
  File "x.py", line 8, in baz
    raise ValueError("hello")
ValueError: hello 
```

现在假设我希望回溯看起来像这样

```
Traceback (most recent call last):
  File "x.py", line 10, in <module>
    foo()
ValueError: hello 
```

也就是说，我希望能够删除堆栈跟踪中最顶层的两个条目，并且我想在 内执行它`baz()`，即在引发异常时，要么通过破坏堆栈，要么通过在一种特殊的方式。

可能吗？

**编辑**：一种选择是在 baz 内加注并立即接球，然后用修剪过的回溯重新加注，但我不知道该怎么做。

**编辑 2**：

我需要的是这个，用伪代码

```
def baz():
    raise ValueError, "hello", <traceback built from current frame stack, except the last two> 
```

# android - 以编程方式创建位图掩码

> ID：14572108
> 
> 赞同：4
> 
> 时间：2013-01-28T22:05:02.207
> 
> 标签：android

我在 onDraw() 中有这段代码。

```
radius = drawGmpImage(this.gmpImage, canvas);
canvas.drawCircle(kHorizontalOffset, kScreenVerticalOffset, radius , maskPaint); 
```

drawGmpImage 创建一个复杂的图形，它是一个带有许多线条的圆圈。这是我无法更改的库函数。这些线是多边形，可以延伸到圆的圆周之外。

需要将画在圆圈外的所有内容“删除”。

这是来自 iOS 的一个端口，最初的开发人员解决方案是使用一个简单的位图掩码，存储为资源，并带有一个与绘制的圆圈大小相匹配的透明圆圈。只需在绘制的圆圈上绘制位图即可获得所需的效果，但在 Android 上不是一个选项，因为我需要支持所有可能的分辨率和比率。

因此，canvas.drawCircle() 调用是我尝试掩盖圆圈外所有内容的开始。它工作得很好，因为在我绘制的圆圈上绘制了一个实心圆圈，所以唯一剩下的就是绘制的圆圈圆周之外的多边形线。半径是绘制圆的半径。

我怎样才能把它倒过来，这样我就剩下圆圈的内容了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T23:02:30.233

为什么你可以花几个小时做某事，放弃，提出问题，然后在 20 分钟后偶然发现答案？生活的乐趣。

```
Path path = new Path();
path.addCircle(kHorizontalOffset, kScreenVerticalOffset, radius, Path.Direction.CW);
canvas.clipPath(path); 
```

我错过了 clipPath 方法，该方法将采用任何路径并将其用作剪切区域。将我的遮罩圈添加到路径中正是我所需要的。

[编辑]

这很好用，但是有一个问题。如果打开硬件加速，它就不起作用。我可以关闭加速，但随后在复杂的平局的其余部分中我失去了很多性能。

这是我最终解决的方法：

在`onSizeChanged()`中，创建位图蒙版。我使用这种颜料在位图的正确位置绘制了一个透明圆圈。的关键是使用`PorterDuffXfermode`.

```
 maskPaint = new Paint();
 maskPaint.setColor(Color.TRANSPARENT);
 maskPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
 maskPaint.setStyle(Paint.Style.FILL); 
```

然后创建位图

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {

    super.onSizeChanged(w, h, oldw, oldh);

    createMask(w,h,this.radius);

}

private void createMask(int w,int h, int radius){

    if (mask!=null){mask.recycle();}

    mask = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    Canvas maskCanvas = new Canvas(mask);
    maskCanvas.drawCircle(w, h, radius, maskPaint);

} 
```

然后在 onDraw() 中，我只是在整个视图上绘制蒙版：

```
@Override
protected void onDraw(Canvas canvas){

    // draw the image();
    setRadius(drawGmpImage(this.gmpImage, canvas));
    canvas.drawCircle(kHorizontalOffset, kScreenVerticalOffset, radius , maskPaint);

    // overlay the mask bitmap
    if (mask != null) {
        canvas.drawBitmap(mask, 0f, 0f, bitmapPaint);
    } 
```

如果半径发生变化，则重新创建蒙版：

```
 private void setRadius(int radius){

     this.radius = radius;
     createMask(kHorizontalOffset, kScreenVerticalOffset, radius);

 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:21:15.033

我不知道如何使用面具来实现这一点，因此另一种方法：

你可以用特定的颜色绘制半径，比如黑色。

比来自角落之一的洪水填埋场。在它不是很困难之前，我已经创建了一个 Floodfill 算法。您从左上角开始，将该像素设置为您想要的颜色。然后你看看相邻的像素。如果它们是黑色的，你就停在那个方向，如果不是，你改变颜色并再次查看相邻的像素。

祝你好运

# web - 使用 mercurial 分支自动部署网站

> ID：14572112
> 
> 赞同：0
> 
> 时间：2013-01-28T22:05:12.843
> 
> 标签：web, mercurial, hook

我目前正在考虑一种用 mercurial 很好地构建我的 web 项目的方法。我正在考虑有两个默认分支（用于开发和测试）和发布（发布的完成代码）。我会在默认分支上开发和测试，直到我有一个稳定的应用程序运行。然后我会合并到发布分支。当我将代码推送到我的中央存储库（在我的 Web 应用程序所在的服务器上）时，我希望代码能够自动发布。

这是正确的方法吗？如果是，可以通过钩子实现发布分支的自动发布吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:16:25.627

您是否考虑过[git-flow 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)？我会推荐它以及[yujiewu 的 hgflow](https://bitbucket.org/yujiewu/hgflow/wiki/Home)。后者是 mercurial 的 git-flow 理念的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T12:59:39.890

而不是“发布”分支，您应该像几个项目一样将其命名为“稳定”。

你还在使用持续集成吗？也许，你应该。在 Jenkins 中，如果一切顺利，您可以创建一个构建后步骤来发布版本。它比更改组挂钩更好。

# c# - 在 GUI 类中打开一个新线程来完成工作

> ID：14572118
> 
> 赞同：0
> 
> 时间：2013-01-28T22:05:36.337
> 
> 标签：c#, multithreading, forms

我在如何解决以下问题时遇到问题。

我有一个类，它允许我在表单上动态更新和显示图表。为了更新图表的值，我在表单的类中有一个方法。我传入值以使用此方法更新图形。这是我正在尝试做的一个高级示例：

> 类 GUICLass : 表格 {
> 
> //绘制图表等的代码都在这里
> 
> 公共 updategraphWithNewValue（双值）{
> 
> ```
>  // Code to update the graph 
> ```
> 
> }
> 
> }

我的另一堂课如下：

> 类 ValueProviderForGraph{
> 
> GUIClass graphForm = new GUIClass();
> 
> 公共calculateValuesAndPlot(){
> 
> for(int i = 0; i < 4000; i++){
> 
> ```
>  graphForm.updategraphWithNewValue(i);
> 
>   graphForm.update(); 
> ```
> 
> }
> 
> }
> 
> }

现在我从上面得到的问题是表单在此操作发生时冻结。我该如何解决这个问题，任何帮助或建议将不胜感激。我希望这个高级示例有足够的信息，如果没有，请告诉我，我会尝试更好地解释自己。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:08:07.783

研究使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)。它的面向事件的界面应该让您快速启动并运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:09:03.900

您只能从最初创建控件的线程更新表单的控件。

如果您尝试从不同的线程更新它，则必须编组该调用。网上有很多方法。我个人最喜欢的（对于 WinForms）如下：

[https://stackoverflow.com/a/709846/141172](https://stackoverflow.com/a/709846/141172)

**更新**

在@StenPetrov 的敦促下重新阅读了您的问题后，我怀疑您毕竟没有跨线程问题，但是 UI 线程在更新图形时根本没有处理消息（这会导致在操作）。

如果 UI 线程忙于更新图表，您将获得该行为。但是，看起来您正在导致图表进行 3999 次不必要的更新。尝试移动线路

```
graphForm.update(); 
```

在你的*for*循环之外。

虽然我不确切知道您的图形控件是如何工作的，但我怀疑对 的调用会`update()`导致整个图形被重新渲染。只有在添加了所有新数据点之后，您才应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:12:49.057

您是否需要经常更新 UI？

如果你不需要经常更新 UI，比如加载一个大图来查看，那么 BackgroundWorker 就可以了。

如果您需要频繁更新 UI，您必须 (a) 使图形计算独立于 UI，(b) 在单独的线程中运行图形计算，以及 (c) 在计算更新后使用 Form.Invoke(...)更新用户界面

# css - Hotmail (live.mail) css float 不支持？

> ID：14572122
> 
> 赞同：0
> 
> 时间：2013-01-28T22:05:52.843
> 
> 标签：css, css-float, html-email, hotmail, floating

尝试了一大堆不同的方法让我的元素在 hotmail 中浮动（这些都在 gmail 等中工作）。

< div class="plzfloat" id="floats" style="float:left"> #floats{float:left;} .plzfloat { float:left;}

我什至为将添加浮动规则的类和 id 添加了 css 规则，但是当我在 hotmail 中查看它时，我的所有浮动都已从我的电子邮件中删除。

一直在搜索谷歌，但没有找到任何消息来源说 hotmail 不支持浮动 - 有人有这方面的经验吗？

干杯，伊恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:10:26.123

如果你在做电子邮件，你应该使用表格，表格，表格和表格。这尤其适用于 Microsoft 开发的客户端。

[Outlook 电子邮件的右对齐图像](https://stackoverflow.com/questions/14438148/right-aligning-image-for-outlook-email/14439353#14439353)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:23:13.550

您不能像为 Web 编写电子邮件那样编写电子邮件。

以下是从 HTML 电子邮件开始的资源：[http ://www.reachcustomersonline.com/how-to-code-html-email-newsletters-all-new-version/](http://www.reachcustomersonline.com/how-to-code-html-email-newsletters-all-new-version/)

它会让你开始走上正确的道路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T00:50:50.987

我能够通过首先定义一个 div 容器宽度来让我的 div 为“浮动”，一旦宽度被填充，容器内的任何东西都会被破坏。然后在容器中设置子 div 并将它们的样式设置为 display: inline;。

这样，它们彼此相邻对齐，然后自动以特定宽度中断。我希望这会有所帮助！

我在outlook中进行了测试，它实际上是渲染的。

~戴安娜

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T22:19:31.977

是的，因为 live 不再好并且不支持 web 的简单事实。

# php - 将电子邮件列表修剪为域列表

> ID：14572127
> 
> 赞同：0
> 
> 时间：2013-01-28T22:06:13.403
> 
> 标签：php, explode, trim

下面的函数是脚本的一部分，用于将电子邮件列表从文件修剪到域列表并删除重复项。

```
/* define a function that can accept a list of email addresses */
function getUniqueDomains($list) {
    // iterate over list, split addresses and add domain part to another array
    $domains = array();
    foreach ($list as $l) {
        $arr = explode("@", $l);
        $domains[] = trim($arr[1]);
    }

    // remove duplicates and return
    return array_unique($domains);
} 
```

是什么`$domains[] = trim($arr[1]);`意思？具体来说`$arr[1]`。`[1]`在这种情况下是什么意思？变量怎么`$arr`变成数组变量了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:29:19.850

[`explode`](http://php.net/manual/en/function.explode.php)它的作用是返回一个数组**，**在这种情况下，数组的每一部分都是由分隔符分割的文本`@`。

[`trim`](http://php.net/manual/en/function.trim.php)它的作用是从以下字符中删除一个字符串：

*   `' '`一个普通的空间。
*   `'\t'`一个选项卡。
*   `'\n'`一条新线。
*   `'\r'`一个回车。
*   `'\0'`***NUL***字节_
*   `'\x0b'`垂直选项卡。

* * *

**第1步：**你给`getUniqueDomains($list)`一个清单。

**第 2 步：**对于每封电子邮件，它会使用`@`分隔符展开电子邮件。

这意味着如果我给了 email `iteachyou@stackoverflow.phpstuff`，就会变成一个包含as和as`$arr`的数组。`iteachyou``[0]``stackoverflow.phpstuff``[1]`

在这种情况下`[0]`or`[1]`是数组中的索引。如果数组有 23 个项目，那么我可以说`$array[22]`获取最后一个项目。数组索引通常以第一项为 0，第二项为 1，以此类推。

**第 3 步：**它修剪当前位于的 URL `$arr[1]`。这是为了清理。它还将 URL 添加到`$domains`数组中。

**第 4 步：**它检查重复项。我假设存在检查重复项的实际代码，而不仅仅是评论。

**第五步：** `return`结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:24:08.757

1 是数组的索引。

假设您有一个电子邮件地址：email@gmail.com。 `explode`将使用指定字符作为分隔符将字符串拆分为数组。

在这种情况下`$arr = explode("@", $l);`，将使用“@”字符拆分电子邮件并将数组存储在 $arr 中。

`$arr = explode("@", "email@gmail.com");`将产生以下数组：

```
$arr[0] = "email"
$arr[1] = "gmail.com" 
```

`$domains[] = trim($arr[1]);`将域 ($arr[1]) 存储在域数组中

# c++ - 对列表和对的混淆

> ID：14572128
> 
> 赞同：5
> 
> 时间：2013-01-28T22:06:30.797
> 
> 标签：c++, list, iterator, size, ifstream

所以我正在尝试尝试将名字和姓氏添加到双链表中。我有各种不同长度的文本文件，格式为“字符串，字符串”，并且正在使用 list> 来存储我的数据。

我正在使用这段代码：

```
typedef std::list< std::pair<string,string> > listPair; 
```

...

```
list<pair<string, string> > mylist;
ifstream myFile; 
myFile.open("20.txt");

pair<string, string> stuff;
while (myFile >> stuff.first >> stuff.second)
{
    mylist.push_back(stuff);
}

listPair::iterator iter = mylist.begin();

for(;iter != mylist.end();iter++)
{
    string s = (*iter).first;
    cout << s << endl;
    string c = (*iter).second;
    cout << c << endl;
} 
```

现在我遇到的问题是，首先，列表中的最后一项没有被添加。就像每个文件都错过了最后一行，所以这有点令人困惑。

另外，我正在执行“mylist.size()”以确保已添加所有名称，这让我感到困惑，因为对于包含 99 个名称的文本文件，即 99 行文本，它会说（不要忘记它由于缺少最后一行，仅读取 98）列表的大小为 48。

为什么是 48？是不是因为我已经完成了对，这仍然没有意义，就好像它不是成对阅读一样，实际上会有两倍的 about，因为这些对只是将名字和姓氏作为一个值。

让我难以置信。

再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:43:45.057

我感觉您的文件实际上在您所描述的值之间没有空格，所以它看起来像这样：

```
one,two
three,four
five,six
seven,eight
nine,ten 
```

如果你要在上面运行你的程序， 的大小`list`将是 2 ( `floor(number_of_lines/2)`，你会给出 48) 并且最后一行根本不会被放入`list`。为什么？

首先，每次调用`std::ifstream::operator>>(std::string&)`都会提取，直到遇到一些空白。在这种情况下，第一行的第一个空格是`\n`它的末尾。所以在第一次迭代时，`stuff.first`将是`"one,two"`，然后下一行将被读入`stuff.second`，使其成为`"three,four"`。然后将其推入`list`. 接下来的两行以相同的方式读取，为您提供 pair `{"five,six","seven,eight"}`。在下一次迭代中，第一个`operator>>`将提取`"nine,ten"`，第二个将失败，导致`while`条件结束并丢弃最后一行。

即使你确实有空格，你也会在`first`every中以逗号结尾`pair`，这肯定不是你想要的。

解决此类问题的更好方法是使用`std::getline`提取一行，然后根据需要解析该行：

```
std::string line;
std::pair<std::string, std::string> line_pair;
while (std::getline(myFile, line)) {
  std::stringstream line_stream(line);
  std::getline(line_stream, line_pair.first, ',');
  std::getline(line_stream, line_pair.second);
  mylist.push_back(line_pair);
} 
```

我也推荐使用`std::vector`，除非你有充分的理由使用`std::list`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T22:17:03.140

ifstream 上的运算符 >> 将换行符视为另一个标记。因此，它可能会从您的第一行正常读取您的第一个和第二个单词，但读取的第三个标记是第一行的新行。

尝试使用 getline 来“吃”换行符。

# sitecore - 为 Sitecore 模板创建自定义源

> ID：14572141
> 
> 赞同：0
> 
> 时间：2013-01-28T22:07:30.097
> 
> 标签：sitecore, sitecore6

我对 Sitecore 非常陌生，并且必须根据登录管理员的角色为多行条目自定义模板以具有不同的源（项目列表）。例如，该站点可以有多个不同的管理员，每个管理员都可以添加/删除页面部分的数据，所以

Website-1（Admin-1 编辑）的MultiList 的内容与Website-2（Admin-2 编辑）的内容不同。因此 Admin-1 和 Admin-2 的数据位于以下位置：

```
Admin-1: sitecore/content/Data/Features/Admin-1
Admin-2: sitecore/content/Data/Features/Admin-2 
```

现在对于模板的源部分，我可以输入数据的路径：ex-`/sitecore/content/Data/Features/`这将包括该文件夹中的所有项目，包括“Admin-1”和“Admin-2”的两个子文件夹，但我真正想要的是当 Admin-1 日志时，我希望列表仅填充“Admin-1”内容，反之亦然。这甚至可能吗？我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:58:45.000

好的，您的问题有点模棱两可，因此我提出了这个问题。

在我看来，您的数据结构目前有点不正确。我将其设置如下：

-sitecore
--content
---common（在两个站点之间共享）
---site-1
----home
----settings
----data
---site-2
----home
--- -设置
----数据

现在在您的模板中将数据源设置为：

```
query:./ancestor-or-self::*[@@templatename='Site']/data/features/* 
```

这会将您的多列表的选项限制为仅当前站点的数据文件夹中的项目。显然将@@templatename 更改为您的。

至于权限，您应该创建 2 个角色，Admin-1 和 Admin-2。对于这两个角色，打破 /sitecore/content 节点上的继承，然后在 /sitecore/content/site-1 上授予 Admin-1 读/写/创建/删除访问权限，在 Site-2 上授予 Admin-2 相同的访问权限。确保为角色执行此操作。然后将必要的用户添加到这些角色。如果特定用户需要访问这两个站点，则将他们添加到这两个角色中。使用 /Security Tools/Security Editor。

我不会将角色称为“管理员”，因为这会导致 Sitecore 管理员设置之间的混淆。相反，我将其称为“Site1ContentEditer”和“Site2ContentEditer”。如果您引入工作流，这使您有机会遵循命名约定，例如 Site1ContentApprover、Site1ContentPublisher 等。

我现在有点着急，但如果您需要更多信息，请告诉我。

编辑：这应该为您提供有关多站点实施的更多信息：[在 Sitecore 中构建多站点解决方案](http://learnsitecore.cmsuniverse.net/en/Developers/Articles/2009/10/how-to-multisite-in-sitecore.aspx)

# wordpress - 带有偏移量的wordpress分页，最后留下一个空白页

> ID：14572142
> 
> 赞同：1
> 
> 时间：2013-01-28T22:07:41.407
> 
> 标签：wordpress, pagination

在我的管理员中，我有 12 个贴有“努力”标签的帖子，尽管还有很多其他帖子。

标记为“努力”的 3 个最新帖子显示在主页上，其余的则显示在一个页面中，标题为“努力”也就不足为奇了

在那个努力页面上，我需要每页有 5 个帖子的分页，但也有 3 个偏移量。

在似乎无法再找到的博客文章中，建议如下：

```
$temp = $wp_query;

$number_of_posts_per_page = 5;
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$number_of_posts_past = $number_of_posts_per_page * ($paged - 1);
$off = 3 + (($paged > 1) ? $number_of_posts_past : 0);

wp_reset_query();
wp_reset_postdata();

$wp_query = new WP_Query('category_name=efforts&posts_per_page='.$number_of_posts_per_page.'&offset='.$off); 
```

这很好用，只是分页页太多，最后一页是空白的。

为什么'Previous Entries'链接出现在第2页并带您进入空白页面。

这是完整的代码供参考：

```
<?php
global $options;
foreach ($options as $value) {
    if (get_settings( $value['id'] ) === FALSE) { 
        $$value['id'] = stripslashes( $value['std'] ); 
    } else { 
        $$value['id'] = stripslashes( get_settings( $value['id'] ) ); 
    } 
}
?>
<?php get_header(); ?>

<?php /* Enables two or three columns */
if ($et_threecolumn_disable == "false") { ?> <?php include(TEMPLATEPATH."/sidebar.php");?><?php } ?>

<div class="content <?php if ($et_threecolumn_disable == "false") { ?> <?php echo $et_columnorder; ?> <?php } else { ?> content-two-column<?php echo $et_columnorder; ?> <?php } ?>">
<?php
$temp = $wp_query;

$number_of_posts_per_page = 5;
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$number_of_posts_past = $number_of_posts_per_page * ($paged - 1);
$off = 3 + (($paged > 1) ? $number_of_posts_past : 0);

wp_reset_query();
wp_reset_postdata();

$wp_query = new WP_Query('category_name=efforts&posts_per_page='.$number_of_posts_per_page.'&offset='.$off);

if (have_posts()) : while (have_posts()) : the_post();
    $video = get_post_custom_values('YT_video_id');
?>

<div class="post" id="post-<?php the_ID(); ?>">
    <h1><a href="<?php the_permalink() ?>" rel="bookmark" title="Permanent Link to <?php the_title_attribute(); ?>"><?php the_title(); ?></a></h1>
    <h2><?php the_time('F jS, Y') ?> | <?php the_category(', ') ?> | <?php comments_popup_link('0 Comments', '1 Comment', '% Comments'); ?></h2>

    <div class="entry">
        <?php the_content('Read More'); ?>

        <iframe id="player" type="text/html" width="600" height="355" src="http://www.youtube.com/embed/<?php echo $video[0] ?>" frameborder="0"></iframe>

        <?php edit_post_link('Edit this entry.', '<p>', '</p>'); ?>
    </div>

    <?php if (function_exists('the_tags')) { the_tags('<p class="postmetadata">Tags: ', ', ', '</p>'); } ?>
</div>

<?php endwhile; endif; ?>

<div class="navigation">
    <div class="alignleft"><?php next_posts_link('&larr; Previous Entries') ?></div>
    <div class="alignright"><?php previous_posts_link('Next Entries &rarr;') ?></div>
</div>
<?php wp_reset_query(); $wp_query = null; $wp_query = $temp;?>

</div>

<?php include(TEMPLATEPATH."/primary-sidebar.php");?>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:48:38.983

我进行了一些测试。

```
$temp = $wp_query;

$number_of_posts_per_page = 5;
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$number_of_posts_past = $number_of_posts_per_page * ($paged - 1);
$off = 3 + (($paged > 1) ? $number_of_posts_past : 0);

wp_reset_query();
wp_reset_postdata();

$wp_query = new WP_Query('category_name=efforts&posts_per_page='.$number_of_posts_per_page.'&offset='.$off);

$wp_query->found_posts; // 12 
```

所以found_posts 似乎忽略了offset 和posts_per_page。而且由于根据法典 max_num_pages 计算为 $found_posts / $posts_per_page 它出现了 3 页。

我需要计算我自己的 max_pages 以提供给分页链接。

```
$temp = $wp_query;

$number_of_posts_per_page = 5;
$initial_offset = 3;
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$number_of_posts_past = $number_of_posts_per_page * ($paged - 1);
$off = $initial_offset + (($paged > 1) ? $number_of_posts_past : 0);

wp_reset_query();
wp_reset_postdata();

$wp_query = new WP_Query('category_name=efforts&posts_per_page='.$number_of_posts_per_page.'&offset='.$off);

$max_pages = ceil(($wp_query->found_posts - $initial_offset) / $number_of_posts_per_page);

// snipped a bunch of post related code that worked fine

<div class="navigation">
    <div class="alignleft"><?php next_posts_link('&larr; Previous Entries', $max_pages) ?></div>
    <div class="alignright"><?php previous_posts_link('Next Entries &rarr;', $max_pages) ?></div>
</div> 
```

# xml - 需要有单独的 XSD - 但希望他们引用/使用通用结构响应 XSD

> ID：14572145
> 
> 赞同：0
> 
> 时间：2013-01-28T22:07:53.183
> 
> 标签：xml, xsd

我正在使用 Spring 3.1

我有一个通用响应 XSD，我将其用作多种请求类型的响应。我现在有一个新要求，其中每个请求都需要有一个单独的响应类型。但我想要的是这些新响应具有与通用响应相同的结构。属性等是一样的，唯一的变化是名称，即`<xs:element name="itemOneResponse">`

我的通用响应 - **genericResponse.xsd**：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://me.com" attributeFormDefault="unqualified">
    <xs:element name="genericResponse">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="responseCode" type="xs:int"/>
                <xs:element name="errorCode" type="xs:int"/>
                <xs:element name="errorDescription" type="xs:string"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

我有 3 个新的个人响应，它们与通用响应相同，但名称不同。一个例子如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://me.com" attributeFormDefault="unqualified">
    <xs:element name="itemOneResponse">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="responseCode" type="xs:int"/>
                <xs:element name="errorCode" type="xs:int"/>
                <xs:element name="errorDescription" type="xs:string"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

如何获取新的自定义响应以引用 genericResponse.xsd 架构及其元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:22:23.790

定义一个`xs:complexType`带有`name`属性的单，然后`xs:complexType`使用 的`type`属性来引用它`xs:element`。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://me.com" attributeFormDefault="unqualified">
    <xs:element name="itemOneResponse" type="genericResponse"/>
    <xs:element name="itemTwoResponse" type="genericResponse"/>
    <xs:element name="itemThreeResponse" type="genericResponse"/>

    <xs:complexType name="genericResponse">
        <xs:sequence>
            <xs:element name="responseCode" type="xs:int"/>
            <xs:element name="errorCode" type="xs:int"/>
            <xs:element name="errorDescription" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:10:59.787

编写一个通用 XSD 文档，其中有一个用 abstract="true" 定义的 genericResponse 元素声明。

然后为每种消息类型编写一个 XSD 文档，其中使用 xs:include 来合并通用 XSD，并为响应定义特定元素，使用 subsitutionGroup="genericResponse" 以便可以使用特定元素代替摘要，通用的。如果您没有为此元素指定类型，那么它将继承 genericResponse 元素的类型。（或者，您可以给自定义元素一个扩展或限制泛型类型的类型。）

然后应针对特定消息类型的自定义模式验证单个消息。

# scala - sbt 如何选择使用哪个 Scala 版本？

> ID：14572148
> 
> 赞同：18
> 
> 时间：2013-01-28T22:07:59.853
> 
> 标签：scala, sbt

我的 sbt 构建中有多个项目。我正在尝试从 2.9.1 升级到 Scala 2.10，所以在我的 build.sbt 文件中我放了

```
scalaVersion := "2.10.0" 
```

这似乎可行，因为在我的 sbt 顶级项目中，我得到：

```
> scala-version
[info] 2.10.0 
```

但是，当我切换到其他项目之一时：

```
> project web-client
[info] Set current project to web-client (in build file:/C:/Users/...
[web-client] $ scala-version
[info] 2.9.1 
```

您会看到版本现在已更改回 2.9.1！如何强制在我的所有项目中使用相同的 Scala 版本？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T04:15:14.627

我发现将 scalaVersion 限定为 ThisBuild 将为所有子项目设置它。详细信息在这里：[http](http://www.scala-sbt.org/release/docs/Getting-Started/Multi-Project.html) ://www.scala-sbt.org/release/docs/Getting-Started/Multi-Project.html在底部，但它是这样说的：

只需设置一次，在主 build.sbt 文件中写入以下行就足够了：

```
scalaVersion in ThisBuild := "2.10.0" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T22:25:41.473

SBT 有一个默认的 Scala 版本。如果要更改设置，则需要将`scalaVersion`设置添加到所有子项目。最常见的方法是在根级别添加一个“通用设置”值，通过`project/Build.scala`.

# javascript - 通过 AJAX 发送 ASP.NET 模型

> ID：14572158
> 
> 赞同：3
> 
> 时间：2013-01-28T22:08:54.727
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, asp.net-mvc-3

我正在尝试通过 ajax 调用发送模型的一部分，但是就像我下面的代码一样，它不起作用。我怎么能传递这个对象呢？

```
$.ajax({
            url: "/Controller/Action",
            type: "GET",
            data: @Model.Company,
            success: function (result) {
            $('#myDiv').html(data);
        }
}); 
```

这是我的 JS 输出的内容：

```
MyProj.Domain.Entities.Company 
```

这是我的错误：

```
Uncaught ReferenceError: MyProj is not defined 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T22:23:56.073

您的语法适用于原始变量，但您应该在发送之前将对象序列化为 Json。还要确保脚本保留在 cshtml 或 aspx 页面中，否则“@Html”帮助程序将不起作用。

```
$.ajax({
            url: "/Controller/Action",
            type: "GET",
            data: @Html.Raw(Json.Encode(Model.Company)),
            success: function (result) {
            $('#myDiv').html(data);
        }
}); 
```

# java - 无法在 bashscript 中运行 java

> ID：14572169
> 
> 赞同：1
> 
> 时间：2013-01-28T22:10:17.953
> 
> 标签：java, bash, terminal

我正在尝试编写一个简单地编译 java 文件然后运行它的 bash 脚本

```
#!/bin/bash
read name
javac $name
$name | sed -r "s/.java//" | java 
```

但不是运行 java 文件，而是打开 java.util.java 文件。

```
Usage: java [-options] class [args...]
           (to execute a class)
   or  java [-options] -jar jarfile [args...]
           (to execute a jar file)

       blah blah blah 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:12:35.433

你想用 Bash 做一个简单的替换吗？只需使用内置的替换工具。

```
java ${name/.java/} 
```

不需要`sed`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:13:38.043

尝试替换这个：

```
#!/bin/bash
read name
javac $name
name=$(echo $name|sed -r "s/.java//")
java $name 
```

或者，甚至更好：只需输入不带“.java”的主类：

```
#!/bin/bash
read name
javac $name.java
java $name 
```

关键是，您需要将*参数*传递给“java”命令。您不能只使用标准输出中的管道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:17:44.780

试试这个：

```
#!/bin/bash
read name
javac $name
class=`echo $name | sed -r "s/.java//"`
`java $class` 
```

# python - 将列表中的值转换为其散列形式 (Python)

> ID：14572180
> 
> 赞同：0
> 
> 时间：2013-01-28T22:11:35.780
> 
> 标签：python, list, hashlib

我目前有以下代码：

```
from itertools import permutations
import hashlib

def hash_f(x):
    h = hashlib.md5(x)
    return int(h.hexdigest(),base=16)

value = raw_input("Enter a value: ")
possibleValues = 'a'

for p in permutations(possibleValues):
    if hash_f(value) == hash_f(possibleValues):
        print "MATCH" 
```

（permutations的导入和使用暂时是占位符，等解决了这个问题以后会用到更多）

我想知道的是是否可以遍历列表并将其值替换为该值的散列形式。使用我当前的`hash_f(x)`功能不适用于列表，这是这里的问题。

感谢您提前提供任何帮助，如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:45:11.490

我不明白你的片段应该做什么，但你的问题似乎可以用列表理解来回答。

```
from hashlib import md5

input_list = ['a','b','c','d','e']

hashed_list = [int(md5(x).hexdigest(), base=16) for x in input_list]

# Do whatever you wanted to do with the list of hashes.... 
```

# objective-c - 使用 Objective-C 和 C++ 调用函数

> ID：14572189
> 
> 赞同：0
> 
> 时间：2013-01-28T22:12:13.207
> 
> 标签：objective-c, function, methods

好吧，我正在尝试在 xcode 中调用一个函数，但显然它不起作用。我做了一个objective-c类，并在实现文件中输入以下代码：

```
#import "Person.h"

@implementation Person

void printthis()
{
    NSLog(@"Hi, I have been printed");
}

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        printthis();

    }
    return 0;
}

@end 
```

显然，它在 xcode 中返回以下错误：

```
 ld: 1 duplicate symbol for architecture x86_64
clang: error:
    linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:19:11.283

您是否已经在其他地方拥有了 main 函数（可能是 main.m ？）。如果是这样，链接器就会感到困惑——你不应该有 main 函数的重复项

# jquery - Ajax 回调笨蛋

> ID：14572193
> 
> 赞同：3
> 
> 时间：2013-01-28T22:12:36.123
> 
> 标签：jquery, ajax, callback

我很难理解如何实现回调函数。我搜索了很多，发现了很多关于这个主题的材料，但我无法在我的 jQuery 代码中实现。

有人可以在这里编辑我的代码，以便我可以将其复制回我的测试页面以查看我需要做什么吗？

**我需要的**

首先，声明一个变量并给它一个值。第二执行我的 Ajax 调用并引用该变量。听起来很容易，但我不明白。如果您愿意帮助我，这是我的代码示例。

```
var myName = 'Ann';

$.ajax(
{
    type:       "post",
    url:        "URL",
    cache:      false,
    dataType:   "json",
    data: 
    {
        xxxxxx: xxxxxxxxx
    },
    success: function(objResponse) 
    {
        //How can I do this????
        alert(myName);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:20:04.550

似乎这应该工作？每天为我工作。

```
var myName = 'lol';
$.ajax({
        type:       "post",
        url:        "URL",
        cache:      false,
        dataType:   "json",
        data: {
                xxxxxx: xxxxxxxxx
              },

        success: function(objResponse) 
        {
            //How can I do this????
            alert(myName);
        },
        error: function (xhr, err) { alert("Error: \n\nreadyState: " + xhr.readyState + "\nstatus: " + xhr.status + "\nresponseText: " + xhr.responseText, 'nosave'); }
    }); 
```

如果警报没有触发，您应该添加一个错误，就像我在上面所做的那样。

您应该考虑使用 firebug 进行开发，您将能够看到您进行的所有 ajax 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:12:34.633

You can also use the invokedata of ajax. This will let you pass variables to the success function.

Here a example in this link: [http://weboutofthebox.com/en-GB/28/Article/Ajaxinvokedataparameter](http://weboutofthebox.com/en-GB/28/Article/Ajaxinvokedataparameter)

I don't know if you are using firebug, but if not, use firefox install firebug and view what is happening.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:54:44.377

这应该可以帮助您更好地理解它；）您的**ajaxprocess.html**如下所示：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
  <meta name="author" content=""/>
  <meta name="description" content=""/>
  <meta name="keywords" content=""/>
  <title></title>
  <style type="text/css">
  *{margin:0px;padding:0px}
  .content{
  display:block;
  width:300px;
  height:300px;
  border:1px solid #000000;
  margin: 0 auto;
  margin-top:30px;
  }
  .button{
  margin:0 auto;
  width:100px;
  hight:100px;
  display:block;
  }
  .strong{
  display:none;
  }
  </style>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"   type="text/javascript"></script>
   <script type="text/javascript">
   $(document).ready(function(){
   var myName = 'John';
   var myImage = $('<img src = "path to your image"/>');
   $('.button').click(function(){
    $.ajax({
     url:'load.html',
     success:function(data){     
     $('.content').html(data);
     //$(".images").append(myImage);//Uncomment this if you want to insert Your image...
     $('.strong').fadeIn(2000,function(){
     alert(data);//We shall alert our data after the DATA
     alert(myName);//is Faded IN...
     });         

     },error:function (xhr){
     var msg ="Sorry there was an error:";
                alert(msg+" "+xhr.statusText+" "+xhr.status);

            }    
    });
});
}); 
```

您的**load.html**看起来像这样：现在您只需将这两个文件**复制到您的服务器上并仔细检查****ajaxprocess.html 的**外观......希望这会有所帮助:)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2" />
 <meta name="author" content=""/>
 <meta name="description" content=""/>
 <meta name="keywords" content=""/>
 <title></title>
 <style type="text/css">
 *{margin:0px;padding:0px}
 </style>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
  </head>
  <body>
  <strong class="strong">This was loaded OK!!!<span class="images"></span></strong>
  </body>
  </html> 
```

# asp.net - 在 asp.net aspx 页面的下拉框中填充项目

> ID：14572195
> 
> 赞同：0
> 
> 时间：2013-01-28T22:12:40.743
> 
> 标签：asp.net

我有一个php代码

-

```
---------
<div id="product1">
<select name="product" class=":required" onchange="change1(this.value)">
<option value="" selected="selected">Select Product</option>
<option value="10">
Almond </option>
<option value="18">
Capsicum </option>
<option value="3">
Cashew </option>
<option value="1">
Cocoa </option>
<option value="2">
Coffee </option>
<option value="4">
Cotton </option>
<option value="16">
Garlic </option>
<option value="13">
Grains </option>
<option value="22">
Groundnut </option>
<option value="17">
Onion </option>
<option value="19">
Parsley </option>
<option value="9">
Peanut </option>
<option value="7">
Pepper </option>
<option value="11">
Pulses </option>
<option value="5">
Rice </option>
<option value="6">
Sesame </option>
<option value="8">
Spice </option>
<option value="14">
Sugar </option>
<option value="15">
Tomato </option>
<option value="12">
Wool </option>
<option value="23">
_ Other _ </option>
</select>
</div> 
```

我想在下拉框中填充所有这些项目。怎么做。我使用 asp.net 和 vb.net 作为后面的代码。页面加载后，项目必须填充在下拉框中。

我有其他 php 代码

```
<tr>
<td align="right">Select Region:</td>
<td align="left" class="red"><select onchange="xajax_SelectCountry(this.value);" name="region" class=":required" id="region">
<option value="" selected="selected">Select Region</option>
<option value="Asia" >
Asia </option>
<option value="Australia and Oceania" >
Australia and Oceania </option>
<option value="Central Africa" >
Central Africa </option>
<option value="East Africa" >
East Africa </option>
<option value="Europe" >
Europe </option>
<option value="North Africa" >
North Africa </option>
<option value="North America" >
North America </option>
<option value="South America" >
South America </option>
<option value="Southern Africa" >
Southern Africa </option>
<option value="West Africa" >
West Africa </option>
</select></td>
</tr>
<tr> 
```

我需要它在一个下拉框中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:22:18.990

试试这个：

```
 <asp:DropDownList runat="server" ID="ddl1">
        <asp:ListItem Value="Select Product" Selected="True"></asp:ListItem>
        <asp:ListItem Value="10" Text="Almond"> </asp:ListItem>
        <asp:ListItem Value="18" Text="Capsicum"> </asp:ListItem>
        <asp:ListItem Value="3" Text="Cashew"> </asp:ListItem>
        <asp:ListItem Value="1" Text="Cocoa"> </asp:ListItem>
        <asp:ListItem Value="2" Text="Coffee"> </asp:ListItem>
        <asp:ListItem Value="4" Text="Cotton"> </asp:ListItem>
        <asp:ListItem Value="16" Text="Garlic"> </asp:ListItem>
        <asp:ListItem Value="13" Text="Grains"> </asp:ListItem>
        <asp:ListItem Value="22" Text="Groundnut"> </asp:ListItem>
        <asp:ListItem Value="17" Text="Onion"> </asp:ListItem>
        <asp:ListItem Value="19" Text="Parsley"> </asp:ListItem>
        <asp:ListItem Value="9" Text="Peanut"> </asp:ListItem>
        <asp:ListItem Value="7" Text="Pepper"> </asp:ListItem>
        <asp:ListItem Value="11" Text="Pulses"> </asp:ListItem>
        <asp:ListItem Value="5" Text="Rice"> </asp:ListItem>
        <asp:ListItem Value="6" Text="Sesame"> </asp:ListItem>
        <asp:ListItem Value="8" Text="Spice"> </asp:ListItem>
        <asp:ListItem Value="14" Text="Sugar"></asp:ListItem>
        <asp:ListItem Value="15" Text="Tomato"> </asp:ListItem>
        <asp:ListItem Value="12" Text="Wool"> </asp:ListItem>
        <asp:ListItem Value="23" Text="_ Other _"></asp:ListItem>
    </asp:DropDownList> 
```

# apache - 一个用户下的多个域的目录结构应该是什么？（阿帕奇）

> ID：14572197
> 
> 赞同：3
> 
> 时间：2013-01-28T22:12:46.950
> 
> 标签：apache, dns, structure, directory

我在一些 VPS（朋友的带有 cPanel 的 apache 服务器）上有一个帐户，并且我有一个 public_html 目录。我们在那里有大约 5-6 个网站：

```
/home/myusername/public_html/domain-1.name/index.php
/home/myusername/public_html/domain-2.name/index.php 
```

但我不喜欢这种方式，我想更好地组织它，并能够为每个网站分离和隔离一些东西。那么，如果我这样创建会怎样：

```
/home/myusername/websites/domain-1.name/public_html/index.php

/home/myusername/websites/domain-2.name/public_html/index.php and so on 
```

这会是构建 Web 目录的正确方法吗？apache会这样工作吗？也许还有其他一些约定或常见的解决方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:18:46.917

这很好。事实上，我强烈建议不要使用*域文件夹*作为文档根目录，因为典型的 Web 应用程序还将包含不可公开访问的数据（例如配置文件、管理脚本、版本控制文件等）

我个人更喜欢这个名字`htdocs`，我把我的网站放在下面`/srv/http`

例如：

```
/srv/http/user1/domain1/htdocs/
/srv/http/user1/domain2/htdocs/
/srv/http/user1/domain3/htdocs/
/srv/http/user2/domain4/htdocs/
/srv/http/user3/domain5/htdocs/ 
```

这样，您可以将 设置`DocumentRoot`为`htdocs`目录并将其他不打算由 Web 服务器交付的内容放在域目录的不同子目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:25:35.400

好的，我只想总结并概述我的方式。
感谢@bikeshedder 的想法！

因此，在 linux VPS 服务器下拥有一个单独的帐户（非 root）`/home/myusername/`，我不想完全从现有的目录结构中抽象出来，但同时我想创建适当的环境来隔离和分离客户端及其空间。

**主要目标是：**
* 新的目录结构应该有助于使所有文件和文件夹保持良好和清晰的顺序。
*易于导航和浏览。
* 每个开发人员或客户只能访问他们的空间。

**结构：**

```
/home/myusername/http/client-1/domain-1/public_html/index.php
/home/myusername/http/client-1/domain-1/resources/
/home/myusername/http/client-1/domain-1/configuration.php
/home/myusername/http/client-1/domain-2/public_html/index.php
/home/myusername/http/client-1/client's_resource_dir/  

/home/myusername/http/client-2/domain-3/public_html/index.php
/home/myusername/http/client-2/domain-3/subdomain/public_html/index.php 
```

**结果：**
* 我们隔离了客户空间和隔离域空间。这为任何类型的 Web 项目提供了足够的空间。
* 文件和目录不再与其他项目、域和客户端混在一起。
* 对于子域路径，它可以是
- 作为子目录`/domain-3.name/subdomain/public_html/`
- 或附加的子域目录`/subdomain.domain-3.name/public_html/`，具体取决于子域网站的要求或大小。
* **Public_html**将成为每个网站的**DocumentRoot**。

我没有选择目录`srv/`，`var/www`因为对我来说这听起来像是服务器中的服务器，而且我不觉得`var/`当前设置中的可变数据属于网络内容。
虽然这对我们即将推出的本地网络/文件共享服务器可能有意义

但是现在我有另一个问题：
如何将新路径指定为 cPanel 的默认路径？并且仅适用于我的用户？
因为现在一个用户空间中将有多个**DocumentRoot**目录。
Apache设计有可能吗？
我最好创建新问题:) 然后用答案编辑我的问题

欢迎任何建议！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-13T08:03:52.923

通常从 5-30++ 个站点托管一次，具体取决于内容的复杂性、流量、感知到的未来迁移策略到更专用的虚拟或裸机服务器/实例。

```
/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/index.<html|php|jsp|aspx|what-not>
/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/assets/...

/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/index.<html|php|jsp|aspx|what-not>
/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/assets/...

/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/index.<html|php|jsp|aspx|what-not>
/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/assets/...

/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/index.<html|php|jsp|aspx|what-not>
/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/assets/...

/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/index.<html|php|jsp|aspx|what-not>
/<node-serial-or-hostname-or-domain>/<@|subdomain|www|others>/assets/... 
```

# ruby - hadoop流，如何设置分区？

> ID：14572200
> 
> 赞同：4
> 
> 时间：2013-01-28T22:12:51.667
> 
> 标签：ruby, hadoop, hadoop-streaming, hadoop-partitioning

我对 hadoop 流非常陌生，并且在分区方面遇到了一些困难。

根据在一行中找到的内容，我的映射器函数要么返回

```
key1, 0, somegeneralvalues # some kind of "header" line where linetype = 0 
```

或者

```
key1, 1, value1, value2, othervalues... # "data" line, different values, linetype =1 
```

为了正确减少，我需要对具有相同*key1*的所有行进行分组，并按 value1、value2 和线型（0 或 1）对它们进行排序，例如：

```
1 0 foo bar...  # header first
1 1 888 999.... # data line, with lower value1
1 1 999 111.... # a few datalines may follow. Sort by value1,value2 should be performed
------------    #possible partition here, and only here in this example
2 0 baz foobar....   
2 1 123 888... 
2 1 123 999...
2 1 456 111... 
```

有没有办法确保这样的分区？到目前为止，我已经尝试过使用诸如

```
-partitioner,'org.apache.hadoop.mapred.lib.KeyFieldBasedPartitioner'
-D stream.num.map.output.key.fields=4 # please use 4 fields to sort data
-D mapred.text.key.partitioner.options=-k1,1 # please make partitions based on first key 
```

或者

```
-D num.key.fields.for.partition=1 # Seriously, please group by key1 ! 
```

但这只会带来愤怒和绝望。

如果值得一提，如果我使用*cat 数据，我的脚本可以正常工作 | 映射器 | 排序 | 减少* ，我正在使用亚马逊弹性地图减少红宝石客户端，所以我将选项传递给

```
--arg '-D','options' for the ruby script. 
```

任何帮助将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T10:24:09.890

感谢 ryanbwork，我已经能够解决这个问题。耶 ！

正确的想法确实是创建一个由值串联组成的键。更进一步，还可以创建一个看起来像

```
<'1.0.foo.bar', {'0','foo','bar'}>
<'1.1.888.999', {'1','888','999'}> 
```

然后可以将选项传递给hadoop，以便它可以按密钥的第一个“部分”进行分区。如果我没记错的话，它看起来像

```
-partitioner org.apache.hadoop.mapred.lib.KeyFieldBasedPartioner
-D stream.map.output.field.separator=. # I added some "." in the key
-D stream.num.map.output.key.fields=4  # 4 "sub-fields" are used to sort
-D num.key.fields.for.partition=1      # only one field is used to partition 
```

这个解决方案，基于 ryanbwork 所说的，允许创建更多的 reducer，同时确保数据被正确拆分和排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T23:38:11.370

阅读完[这篇文章后](http://riccomini.name/posts/hadoop/2009-11-13-sort-reducer-input-value-hadoop/)，我建议修改您的映射器，使其返回“键”包括您的键值、线型值和 value1/value2 值全部连接在一起的对。您将保持该对的“价值”部分相同。因此，例如，您将返回以下对来表示您的前两个示例：

```
<'10foobar',{'0','foo','bar'}>
<'11888999',{'1','888','999'}> 
```

现在，如果您要使用单个 reducer，您的所有记录都将被发送到同一个 reduce 任务，并根据它们的“键”按字母顺序排序。这将满足您的要求，即对按键排序，然后按线型排序，然后按 value1，最后按 value2，您可以在对的“值”部分单独访问这些值。我对不同的内置分区器/排序类不是很熟悉，但我假设你可以只使用默认值并让它工作。

# android - 使用 Android Camera Intent 从同一个按钮拍摄视频或静态图片

> ID：14572206
> 
> 赞同：8
> 
> 时间：2013-01-28T22:13:08.320
> 
> 标签：android, video, camera, image

我正在开发仅适用于三星 Galaxy Tab 2 的应用程序。我有一个按钮，可使用以下命令打开平板电脑上的默认相机应用程序：

```
 Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
```

默认应用程序有一个滑动按钮，通常允许您切换到视频，但它被禁用。现在，他们希望能够滑动该按钮并拍摄视频。根据[http://developer.android.com/guide/topics/media/camera.html#intents](http://developer.android.com/guide/topics/media/camera.html#intents)上的 Android，它们让我看起来实际上必须在我的布局中有两个单独的按钮，一个用于捕获视频，并且一个捕捉静止图像。有没有办法只打开相机，然后让用户决定他们想要视频还是图像？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T13:03:22.023

您需要指定是否要抓取视频或图片。这是必要的，因为在调用意图之前，您必须设置未来图像/视频的文件名。

# php - 没有as的PHP foreach循环？

> ID：14572212
> 
> 赞同：0
> 
> 时间：2013-01-28T22:13:31.477
> 
> 标签：php, arrays, json, foreach, feed

我正在从这样的 json 提要中检索数据：

```
{
  'data': {

   'stuffs': [
     {
       'cats': '12',
       'dogs': '53',
       'bananas': '8',
     },
     {
       'cats': '42',
       'dogs': '49',
       'bananas': '18',

     },
     {
       'cats': '14',
       'dogs': '900',
       'bananas': '2',
     }]

  }
} 
```

并使用如下函数获取数据：

```
function getData($url){

     $json = file_get_contents($url);                                      
     $json_output = json_decode($json, TRUE);

       foreach ($url['data']['stuffs'] as $benum){

         $cats = $benum['cats'];
         $dogs = $benum['dogs'];
         $bananas = $benum['bananas'];

       }

    $myarray = array(

    "cat" => $cats,
    "dog" => $dogs,
    "banana" => $bananas,

    );

  return $myarray;

} 
```

我想设置一个像这样的foreach循环：

```
 foreach ($myarray as $data){

   echo $data['cat'];
   echo $data['dog'];
   echo $data['banana'];

   } 
```

并让它返回如下内容：

```
 12
 53
 8

 42
 49
 18

 14
 900
 2 
```

但是 foreach($myarray as $data) 不起作用。

问题是它只从数组中的每个键返回 1 个字符，这似乎是随机的。

有没有什么我可以做的，就像在 foreach 中根本没有“as”一样？

像：

```
 foreach($myarray){

      // the goods    

  } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:17:18.067

如果你想使用 foreach 你仍然必须使用 as

```
foreach ($myarray as $val){
    echo $val;
} 
```

对于测试数组：

```
$myarray = array(
    "cat" => '12',
    "dog" => '5',
    "banana" => '7'
); 
```

这将输出

```
12
5
7 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:19:26.020

```
function getData($url){

     $myarray = array();

     $json = file_get_contents($url);                                      
     $json_output = json_decode($json, TRUE);

       foreach ($url['data']['stuffs'] as $benum){

         $cats = $benum['cats'];
         $dogs = $benum['dogs'];
         $bananas = $benum['bananas'];

         $myarray[] = array(

            "cat" => $cats,
           "dog" => $dogs,
            "banana" => $bananas,

            );

       }

}

 foreach ($myarray as $data){

   echo $data['cat'];
   echo $data['dog'];
   echo $data['banana'];

   } 
```

你应该以你想要的方式得到结果。您将始终需要 foreach 的“as”。

# netbeans - Netbeans REST 教程没有给我带来预期的结果

> ID：14572218
> 
> 赞同：0
> 
> 时间：2013-01-28T22:14:38.917
> 
> 标签：netbeans, jax-rs, java-ee-6

我已经按照[http://netbeans.org/kb/docs/websvc/rest.html](http://netbeans.org/kb/docs/websvc/rest.html)上的 REST Netbeans 教程进行操作，但是在调用客户服务时得到的结果是：

```
<customers> 
   <customer> 
       <addressline1>111 E. Las Olas Blvd</addressline1> 
       <addressline2>Suite 51</addressline2> 
       <city>Fort Lauderdale</city> 
       <creditLimit>100000</creditLimit> 
       <customerId>1</customerId> 
       <discountCode> 
           <discountCode>78</discountCode> 
           <rate>0.00</rate> 
       </discountCode> 
       <email>jumbocom@gmail.com</email> 
       <fax>305-777-4635</fax> 
       <name>JumboCom</name> 
       <phone>305-777-4632</phone> 
       <state>FL</state> 
       <zip> 
           <areaLength>955.666</areaLength> 
           <areaWidth>923.556</areaWidth> 
           <radius>1876.766</radius> 
           <zipCode>33015</zipCode> 
       </zip> 
   </customer> 
   <customer> 
   ....
   </customer>
</customers> 
```

预期结果将与教程中的相同（使用折扣码而不是数据的 uri）：

[网豆结果](http://netbeans.org/images_www/articles/70/websvc/rest/test-rest-raw.png)

我该如何做到这一点？我多次仔细检查了教程。将 Netbeans 7.2.1 与 mysql 示例数据库 Glasfish 3.1.2.2 一起使用。也尝试使用 Netbeans 7.1.2，但结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:28:53.583

Netbeans 教程中显示的输出显然与来自示例数据库的输出无关，可能与某些旧版本有关。仔细检查代码（`Customer`和`DiscountCode`类），您可以检查该类是否没有`URI`属性`Customer`。

# php - Mysqli程序插入表不起作用

> ID：14572220
> 
> 赞同：0
> 
> 时间：2013-01-28T22:14:53.490
> 
> 标签：php, insert, mysqli

我正在尝试使用 Procedural Mysqli 插入表中。它没有发布任何错误，也没有将信息发布到数据库。这是我的代码：

```
$query = "INSERT INTO Accounts (FirstName, LastName, Username, Password, Access) VALUES ({$_POST['FirstNameTbx']}, {$_POST['LastNameTbx']}, {$_POST['UsernameTbx']}, {$_POST['PasswordTbx']}, {$_POST['AccessDDL']})";
        mysqli_query($link, $query);
        mysqli_close($link);
        $Error .= "$query"; 
```

更新：我改为准备好的声明，现在我得到：

警告：mysqli_stmt::bind_param() [mysqli-stmt.bind-param]：类型定义字符串中的元素数与第 19 行 /home/bryantrx/public_html/ec/add_user.php 中的绑定变量数不匹配

需要绑定的变量只有5个，而且UserID自动递增，所以不需要在语句中绑定或引用。

```
if ($stmt = $link->prepare("INSERT INTO Accounts (FirstName, LastName, Username, Password, Access) VALUES (?, ?, ?, ?, ?)")){
            $stmt->bind_param($_POST['FirstNameTbx'], $_POST['LastNameTbx'], $_POST['UsernameTbx'], $_POST['PasswordTbx'], $_POST['AccessDDL']);
            $stmt->execute();   
            $Error .= "success";
            $stmt->close();
        } else {
            echo $link->error;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:52:19.163

要获得错误消息，您需要调用[mysqli_error](http://php.net/manual/en/mysqli.error.php)：

```
$error = mysqli_error($link); 
```

[如果您使用prepare](http://php.net/manual/en/mysqli.prepare.php)和[parameters](http://php.net/manual/en/mysqli-stmt.bind-param.php)构建查询，您还可以让自己的生活更轻松（也更安全）：

```
$query = "INSERT INTO Accounts (FirstName, LastName, Username, Password, Access) 
            VALUES ( ?, ?, ?, ?, ?)";

if ($stmt = mysqli_stmt_prepare($link, $query)) {

    mysqli_stmt_bind_param($stmt, "sssss", 
                $_POST['FirstNameTbx'], 
                $_POST['LastNameTbx'], 
                $_POST['UsernameTbx'], 
                $_POST['PasswordTbx'], 
                $_POST['AccessDDL']);

    if (!mysqli_stmt_execute($stmt)) {
        $error = mysqli_stmt_error($stmt);
    }

    mysqli_stmt_close($stmt);

} else {
    $error = mysqli_error($link);
}

mysqli_close($link); 
```

**更新**- 好的，你已经换成了 OO，这很好。使用[bind_param](http://php.net/manual/en/mysqli-stmt.bind-param.php)时，第一个参数描述您要绑定的数据。在这种情况下，如果它是五个字符串，您可以像这样放置 5 个“s”：

```
$stmt->bind_param("sssss", 
           $_POST['FirstNameTbx'], 
           $_POST['LastNameTbx'], 
           $_POST['UsernameTbx'], 
           $_POST['PasswordTbx'], 
           $_POST['AccessDDL']); 
```

# node.js - 将配置传递给控制器

> ID：14572221
> 
> 赞同：6
> 
> 时间：2013-01-28T22:15:10.007
> 
> 标签：node.js, express, knox-amazon-s3-client

我正在构建一个 node.js 应用程序，它将使用 knox 将文件上传到我的 S3 存储桶。我能够按预期与 S3 交互，但我想让我的控制器接收配置，以便我可以使用配置值动态构建我的客户端。

我的问题是如何在不粗心的情况下从调用堆栈中获取配置参数到我的控制器？

*免责声明：我对 Node.js 比较陌生，所以这可能只是我对导出之间的区别缺乏了解。*和 module.exports.*

这是交互如何与我的代码一起工作的示例：

**应用程序.js**

```
...
config = require('./config/config')['env'];
require('./config/router')(app, config);
... 
```

**路由器.js**

```
module.exports = function(app, config) {
...
  var controller = require('../app/controllers/home'); //Is there a way for me to pass config here?
  app.post('/upload', controller.upload); //Or here?
...
} 
```

**主页.js**

```
var knox = require('knox');

var client = knox.createClient({ ... }); //I want to use config.key, config.secret, etc instead of hard-coded values
...
exports.upload = function(req, res) {
  //Use client
}
... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T22:41:56.223

尝试做这样的事情......

```
var config = require('./config/config')['env'];

// The use function will be called before your 
//  action, because it is registered first.
app.use(function (req, res, next) {

  // Assign the config to the req object
  req.config = config;

  // Call the next function in the pipeline (your controller actions).
  return next();

});

// After app.use you register your controller action
app.post('/upload', controller.upload); 
```

然后在你的控制器动作中......

```
exports.upload = function(req, res) {

  //Your config should be here...
  console.log(req.config);

} 
```

附言。我现在无法尝试，但我解决了类似的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:38:11.490

您可以将配置作为参数传递给您的控制器

## 控制器

```
// controller.js file
module.exports = function(req, res, config) {
  console.log('config parameter passed to controller', config);
  res.end('config passed')
} 
```

## 应用程序

```
// index.js file with the express app
var controller = require('./controller');
var config = {
  key1: 'foo'
};
var express = require('express');
var app = express();
var port = 3000;
app.get('/', function(req, res){
  controller(req, res, config);
});
app.listen(port);

console.log('app listening on port', 3000); 
```

## 演示

您可以查看[github repo](https://github.com/nisaacson/controller-config-example)以获取完整示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-24T18:46:12.837

如果您想从一条路线调用多个函数，则可以使用另一种方法。

## 路线

```
var users = require('../controllers/users');
 app.route('/login').post(function(req, res){
   if(users.authenticate()){
     console.log('valid user');
     if(users.createUser())
     {
       console.log('user created');
     }
   }
}); 
```

## 控制器

```
exports.authenticate = function(req, res, next) {
   return true;
};
exports.createUser = function(req, res, next) {
   return true;
}; 
```

# c# - 从插件工具栏中隐藏按钮

> ID：14572226
> 
> 赞同：0
> 
> 时间：2013-01-28T22:15:34.683
> 
> 标签：c#, visual-studio, plugins, visual-studio-extensions

我正在用 C# 为 Visual Studio 开发一个插件。该插件有一个设置页面和工具栏中的几个按钮来调用命令。

问题是在某些情况下，我想隐藏一个特定的按钮。我能做的最好的事情就是禁用该按钮。

是否可以动态更改其可见性？

编辑：我用手机写了这个问题，所以可能没有足够的细节......

我在 .vsct 文件中创建工具栏（我在同一个文件中创建了菜单）

```
<Button guid="guidProductCmdSet" id="startCommand" priority="0x0100" type="Button">
    <Parent guid="guidProductCmdSet" id="ToolbarGroup1" />
        <Icon guid="Icons" id="startIcon" />
        <Strings>
          <CommandName>startCommand</CommandName>
          <ButtonText>Start</ButtonText>
        </Strings>
</Button> 
```

当扩展初始化时，我创建命令：

```
var mcs = GetService(typeof(IMenuCommandService)) as OleMenuCommandService;
if (null != mcs)
{
  _startCommandId = new CommandID(GuidList.guidProducyVSICmdSet, (int)pkgCmdIDList.startCommand);
  var startItem = new MenuCommand(StartProcess, _startCommandId);
  mcs.AddCommand(startItem);
} 
```

之后，我可以从工具栏中禁用一些按钮，如下所示：

```
var mcs = GetService(typeof(IMenuCommandService)) as OleMenuCommandService;
var mc = mcs.FindCommand(commandId);
if (mc != null)
{
    mc.Enabled = false;
} 
```

我试过 mc.Visible = false，但它什么也没做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:31:22.310

显然，这行得通...

```
var commandBars = ((CommandBars)_dte2.CommandBars);
if (commandBars == null)
{
    return;
}
var commandBar = commandBars["MyPluginProductName"];
if (commandBar == null)
{
    return;
}
var startButton = commandBar.Controls["startCommand"];
if (startButton == null)
{
    return;
}
startButton.Visible = false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-21T08:18:05.687

添加

```
<CommandFlag>AllowVisibilityChangeOnToolBar</CommandFlag> 
```

到您的按钮。

最好的祝福，

康斯坦丁·S。

# html - 在 Google Fusion Map 图层上显示空白/空白的信息窗口

> ID：14572227
> 
> 赞同：1
> 
> 时间：2013-01-28T22:15:40.323
> 
> 标签：html, google-maps, google-maps-api-3, google-fusion-tables

我正在尝试制作并排的 Google Fusion Map，虽然这似乎工作正常，但当我单击多边形时，信息窗口显示为空白。

我试图弄清楚为什么它可能没有从表格中提取和显示信息，而其余数据似乎正在显示。

地图在这里：[http ://clairemiller.net/blaenaupop.html](http://clairemiller.net/blaenaupop.html)

我用来显示的代码是：

```
<!DOCTYPE html>
<html>
<head>
<style>
 #map_canvas { width: 335px; height: 400px; float: left}
 #map_canvas2 { width: 335px; height: 400px; }
 #image {float: bottom}

body { margin: 0px}
p {color: white; font-family: arial;  font-size: 12px; margin: 0px; position: relative;         left: 4px; top: 3px  }
 #left { width: 335px; height: 20px; float: left; background-color: #007A8F}
 #right { width: 335px; height: 20px; float: left; background-color: #005F70}
</style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">    </script>

<script type="text/javascript">
var map;

var layer;
var layer2;
var secondMapMove = false;
var secondMapBounds = false;

function initialize() {

 map = new google.maps.Map(document.getElementById('map_canvas'), {
  center: new google.maps.LatLng(51.787578, -3.204393),
  zoom: 12,
  mapTypeId: 'roadmap'
});

var layer = new google.maps.FusionTablesLayer({
  center: new google.maps.LatLng(51.5021181, -3.17909),
  query: {
    select: 'geometry',
    from: '1F3SbppvMyF-3lcT5zrYS8S1X8JD1G2-0aQkWLPw',
 }
});
layer.setMap(map);

  map2 = new google.maps.Map(document.getElementById('map_canvas2'), {
   zoom: 12,
   mapTypeId: 'roadmap'
 });

var layer2 = new google.maps.FusionTablesLayer({
   center: new google.maps.LatLng(53.13359,-1.955566),
  query: {
    select: 'geometry',
    from: '1Hf9Z80JTCiq-zWwhhSPrbifO7q9dvA_DP_BN8IY',
 }
});
layer2.setMap(map2);

     google.maps.event.addListener(map,'zoom_changed',function(){
        if(secondMapBounds!=true) {
            var tmpZoom = map.getZoom();
            map2.setZoom(tmpZoom);  
        } else {
            secondMapBounds = false;
    }
 });
 google.maps.event.addListener(map2,'zoom_changed',function(){
    secondMapBounds = true;
    var tmpZoom1 = map2.getZoom();
    map.setZoom(tmpZoom1);
 });
 google.maps.event.addListener(map,'bounds_changed',function(){
    if(secondMapMove!=true) {
        var tmpBounds = map.getCenter();
        map2.setCenter(tmpBounds);
    } else {
        secondMapMove=false;
    }
 });
 google.maps.event.addListener(map2,'bounds_changed',function(){
    secondMapMove = true
    var tmpBounds2 = map2.getCenter();
    map.setCenter(tmpBounds2);
 });

}
</script>

</head>
<body onload="initialize();">

<div class="mapMap" id="map_canvas"></div>
<div class="mapMap" id="map_canvas2"></div>
</body>
</html> 
```

这两个表的 ID 在那里，信息窗口似乎在它们上显示得很好。

我想知道我错过了什么导致信息窗口显示为空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:23:16.447

它不显示空白，它显示白色。

infoWindows 的内容在 -elements 内，infoWindows`<p/>`的背景是白色的，这是你的 CSS：

```
p {color: white;/*......*/} 
```

改变颜色

```
.googft-info-window p{color:#000;} 
```

# php - Magento 中的菜单/导航栏

> ID：14572228
> 
> 赞同：2
> 
> 时间：2013-01-28T22:15:45.360
> 
> 标签：php, html, css, magento-1.7, menubar

我想编辑 Magento 上的顶部导航栏，以便它的主要类别都是不同的颜色，而不是当前栏是一种颜色。我知道如何使用 html/css 来做到这一点，但不知道如何通过 Magnento 来调整它。请问有人有什么指点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:40:12.593

1）添加一个新的类别属性。我们将使用此属性来存储您要用于每个类别的颜色代码。您可以存储一个类名以添加到元素中，或者只是一个由您决定的颜色代码:)

[http://inchoo.net/ecommerce/magento/how-to-add-new-custom-category-attribute-in-magento/](http://inchoo.net/ecommerce/magento/how-to-add-new-custom-category-attribute-in-magento/)

2) 修改导航块以在渲染时将颜色/样式注入导航。

```
Mage_Catalog_Block_Navigation::_renderCategoryMenuItemHtml() 
```

您需要在此处执行的操作取决于您使用的 Magento 版本。

# c# - 如何在 wpf 中正确拖动和移动一条线？

> ID：14572230
> 
> 赞同：1
> 
> 时间：2013-01-28T22:15:54.967
> 
> 标签：c#, wpf, xaml, drag-and-drop

我可以在 wpf 中成功地在窗口周围移动一条线，但它不能正常工作。就像光标的速度快于它拖动的线一样。您可以测试代码以查看是否可以找到问题所在。

```
public partial class MainWindow : Window
{
    Line line = new Line();
    Point p ; 
    bool isdragging = false;

    public MainWindow()
    {
        InitializeComponent();
        canvas1.Children.Add(line);
        Thickness thickness = new Thickness(101, -11, 362, 250);
        line.Margin = thickness;
        line.Visibility = System.Windows.Visibility.Visible;
        line.StrokeThickness = 4;
        line.Stroke = System.Windows.Media.Brushes.Black;
        line.X1 = 10;
        line.X2 = 200;
        line.Y1 = 0;
        line.Y2 = 70;
        line.MouseDown+=new MouseButtonEventHandler(line_MouseDown);
        line.MouseMove+=new MouseEventHandler(line_MouseMove);
        line.MouseUp+=new MouseButtonEventHandler(line_MouseUp);

    }

    public void line_MouseDown(object sender, MouseButtonEventArgs e)
    {
        isdragging = true;
        p = e.GetPosition(canvas1);
    }
    public void line_MouseMove(object sender, MouseEventArgs e)
    {
        if (isdragging == true && e.LeftButton == MouseButtonState.Pressed)
        {
            line.X1 += e.GetPosition(canvas1).X - p.X;
            line.X2 += e.GetPosition(canvas1).X - p.X;
            line.Y1 += e.GetPosition(canvas1).Y - p.Y;
            line.Y2 += e.GetPosition(canvas1).Y - p.Y;

        }
    }
    public void line_MouseUp(object sender, MouseButtonEventArgs e)
    {
        isdragging = false;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:25:51.197

如果您想要真正平滑的拖动，您可以将其包裹`Line`在 a 中`Thumb`，以便您可以使用该`DragDelta`事件来计算新位置。

例子：

xml:

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="233" Width="405" Name="UI">
    <Canvas>
        <Thumb DragDelta="onDragDelta" Canvas.Left="0" Canvas.Top="0" >
            <Thumb.Template>
                <ControlTemplate>
                    <Line X1="10" X2="200" Y1="0" Y2="70" StrokeThickness="4" Stroke="Black"/>
                </ControlTemplate>
            </Thumb.Template>
        </Thumb>
    </Canvas>
</Window> 
```

代码：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    void onDragDelta(object sender, DragDeltaEventArgs e)
    {
        var thumb = sender as Thumb;
        Canvas.SetLeft(thumb, Canvas.GetLeft(thumb) + e.HorizontalChange);
        Canvas.SetTop(thumb, Canvas.GetTop(thumb) + e.VerticalChange);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:23:42.240

您在*每次*鼠标移动事件后移动线。这将导致代码在鼠标的每一次轻微移动后尝试在新位置重新绘制线条 - 甚至是一个像素。

您可以跟踪位置并仅在鼠标移动超过一定量时才重绘线：

```
public void line_MouseMove(object sender, MouseEventArgs e)
{
    if (isdragging == true && e.LeftButton == MouseButtonState.Pressed)
    {
        Point newPos = e.GetPosition(canvas1);
        if (Size(p, newPos) > 10)
        {
            line.X1 += newPos.X - p.X;
            line.X2 += newPos.X - p.X;
            line.Y1 += newPos.Y - p.Y;
            line.Y2 += newPos.Y - p.Y;
            p = newPos;
        }
    }
} 
```

where`Size`是一种计算从`p`到的距离的方法`newPos`。

然后，您只需要在释放鼠标时添加最终更新，以便该行最终到达用户期望的位置：

```
public void line_MouseUp(object sender, MouseButtonEventArgs e)
{
    Point newPos = e.GetPosition(canvas1);
    line.X1 += newPos.X - p.X;
    line.X2 += newPos.X - p.X;
    line.Y1 += newPos.Y - p.Y;
    line.Y2 += newPos.Y - p.Y;
    isdragging = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:33:31.213

谢谢你们的帮助！！我想我解决了这个问题，当我是 m 时购买​​捕获鼠标，并在释放鼠标按钮后释放鼠标捕获。它工作得很好。再次感谢你们！

# url - 以编程方式检测丢失的 url 连接

> ID：14572237
> 
> 赞同：0
> 
> 时间：2013-01-28T22:16:19.740
> 
> 标签：url, connection, detect

我正在使用 ole 对象 Shell.Explorer.2 在我的表单中显示一个网页。我需要能够检测到服务器/url 的连接是否丢失。

我想如果服务器出现故障或互联网连接中断，与服务器的连接就会丢失。如果连接丢失，我想关闭我的表单。没有重新连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:41:30.737

InternetCheckConnection()

这就是答案。谢谢别列兹尼克先生

```
#DEFINE  FLAG_ICC_FORCE_CONNECTION 1
DECLARE LONG InternetCheckConnection IN Wininet.DLL ;
    STRING Url, ;
    LONG dwFlags, ;
    LONG Reserved

* Fast and reliable web site
lcUrl = "http://www.google.com"

IF InternetCheckConnection(lcUrl, FLAG_ICC_FORCE_CONNECTION, 0) <> 0
    ? "Connection is available"
ELSE
    ? "No Connection"
ENDIF 
```

# objective-c - 如何使用另一个按钮触发 void 功能？

> ID：14572242
> 
> 赞同：1
> 
> 时间：2013-01-28T22:16:56.087
> 
> 标签：objective-c, cocoa-touch, cocoa

我的测试项目中有一个`-(void)assignCats`方法，我需要从两个单独的按钮触发其中的代码。我知道如何使用 IBAction，但是如何让两个 IBAction 触发相同（无效）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T22:23:44.873

只需从方法中调用您的`IBAction` 方法。

```
-(IBAction)pointAtCats:(id)sender {
   [self assignCats];
}

-(IBAction)laughAtCats:(id)sender {
   [self assignCats];
} 
```

`IBAction`其实也是一种`void`回报`typedef`。Xcode 仅使用它来了解可用于接口连接的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:18:36.367

只需将它们都连接到相同的操作。 `IBAction`只是定义为`void`，因此您可以更改`assignCats`签名而不更改任何其他程序行为。`assignCats`或者，编写一个从其实现中调用的新操作。

# asp.net-mvc - ASP.NET MVC：在浏览器中显示 pdf。在 chrome 中工作，而不是 ie 或 firefox

> ID：14572253
> 
> 赞同：0
> 
> 时间：2013-01-28T22:17:45.873
> 
> 标签：asp.net-mvc, pdf, cross-browser, content-disposition

我在 Windows 8 中运行 VS 2012（在 mac os x 中托管的虚拟机上）。C# 中的 MVC 3。

当用户选择一个文档时，它应该在一个新的浏览器窗口中打开。

当前：Chrome (v24.0.1312.56 m) - 根据需要在新窗口中打开
Firefox (v18.0.1) - 提示用户打开或保存。在 TWinUI 中打开（呃）（和下载）。
IE (v10.0.9200.16466) - 提示用户打开或保存。在 TWinUI 中打开

这是代码：

```
 [HttpGet]
    public ActionResult Details(int id)
    {
        Document document = portalDB.Documents.Find(id);
        Response.Headers.Remove("Content-Disposition");
        Response.Headers.Add("Content-Disposition", "inline; filename=" + document.FileName);
        return File(System.IO.Path.Combine(Server.MapPath("~/App_Data/Documents"), document.FileName), "application/pdf");
    } 
```

这是 IE 响应标头：

```
Key                     Value
Response                HTTP/1.1 200 OK
Cache-Control           private, s-maxage=0
Content-Type            application/pdf
Server                  Microsoft-IIS/8.0
X-AspNetMvc-Version     3.0
Content-Disposition     inline; filename=DeclarationAndByLaws.pdf
X-AspNet-Version        4.0.30319
X-SourceFiles           =?UTF-8?B?YzpcdXNlcnNcbWlrb1xkb2N1bWVudHNcdmlzdWFsIHN0dWRpbyAyMDEyXFByb2plY3RzXENlZGFyQXBwbGljYXRpb25cQ2VkYXJBcHBsaWNhdGlvblxQb3J0YWxcRGV0YWlsc1wx?=
X-Powered-By            ASP.NET
Date                    Mon, 28 Jan 2013 22:01:52 GMT 
```

Firefox：无法获取标题，因为 firebug 没有通过下载提示持续存在。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T06:17:14.650

更改`return File`为`return Redirect`. `return File`表示在浏览器中刷新文件并结束响应。

# javascript - 将 JavaScript 年龄计算返回到屏幕

> ID：14572257
> 
> 赞同：2
> 
> 时间：2013-01-28T22:18:07.517
> 
> 标签：javascript, html, date-arithmetic

使用 HTML 5、CSS、JavaScript 和 JQuery 创建 Web 应用程序。

我使用了新的 Date() 函数来生成今天的日期。我还使用了 JQuery 的“datepicker”函数来允许用户选择他们的 DOB。这些都工作得很好。

我想要的是在选择 DOB 时计算年龄。我已经包含了一个计算年龄的函数，它依赖于日期和出生日期，但不能让它将数字返回到屏幕上。这可以在下面看到。

```
<tr>
    <td>Age:</td>
    <!--td><input type="text" id="age" /></td-->
    <td> 
            <script type = "text/javascript">
        var date = document.getElementById("adDate").value
        var dob = document.getElementById("datepicker").value
        var pattern = /^\d{1,2}\/\d{1,2}\/\d{4}$/
        if (pattern. test(dob)) {
            var currentYear = date.getFullYear()
            var birthYear = date.getFullYear()
            var age = currentYear - birthYear
            document.write(age)
        } 
        </script>
    <td>
</tr> 
```

我在网上搜索了解决方案，但只是得到了基本的 JavaScript 年龄计算。任何帮助将非常感激。

非常感谢。

我试图应用一些更改，但无济于事。我已经更新了如下所示的 JS。

```
var date = document.getElementById("adDate").value
var dob = document.getElementById("datepicker").value
var pattern = /^\d{1,2}\/\d{1,2}\/\d{4}$/
if (pattern. test(dob)) {
    var currentYear = new Date(date).getFullYear()
    var birthYear = new Date(dob).getFullYear()
    var age = currentYear - birthYear

    var spanAge = document.getElementById("age")
    spanAge.innerHTML = age
} 
```

还有HTML。

```
<tr>
    <td>Age:</td>
    <td><span id="age"></span></td>
</tr> 
```

它必须与使用日期选择器生成 DOB 有关。我尝试应用 onSelect 函数，但似乎没有任何效果。

还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:22:03.467

您应该确保创建了一个有效的 Date 对象，您可以将 UI 元素中的值传递给它：

```
var currentYear = new Date().getFullYear()            
var birthYear = new Date('5/6/1987').getFullYear()             
var age = currentYear - birthYear 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:22:58.007

修复您的代码：

```
var currentYear = new Date(date).getFullYear()
var birthYear = new Date(dob).getFullYear() 
```

恢复表格单元格：

```
<td><span id="age"></span></td> 
```

而且，而不是 document.write 使用这个：

```
// document.write(age) // Remove this line.
var spanAge = document.getElementById("age")
spanAge.innerHTML = age 
```

这里有一个模拟：

[http://jsfiddle.net/dEaae/1/](http://jsfiddle.net/dEaae/1/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-28T22:22:01.607

您应该选择一个 html 元素来显示结果

前任：

```
 <div id = "printHere"></div>

             <tr>
<td>Age:</td>
<!--td><input type="text" id="age" /></td-->
<td> 
        <script type = "text/javascript">
         //assuming you have "age" here

          //using jquery
          $("#printHere").html(age);
    } 
    </script>
<td> 
```

# powershell - 一个 Powershell 脚本可以并行执行多少次

> ID：14572259
> 
> 赞同：1
> 
> 时间：2013-01-28T22:18:18.227
> 
> 标签：powershell, parallel-processing, executable, remote-access

您好，我们计划使用 powershell 脚本执行一些管理任务，远程管理员可以访问这些任务。该脚本将位于中央文件共享上，所有远程管理员都可以通过一个小型 exe 访问该脚本，该 exe 简单地指向并执行共享脚本。（所有这些都是为了能够在不重新分发给所有管理员的情况下尽可能更改脚本）。

所以我的问题是有多少人可以并行访问脚本；如果用户数量多，它会崩溃吗？这种过程是否有任何基准测试技术？有没有更好的解决方案？

如果需要任何补充问题或澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:27:41.813

我相信脚本的每次调用都将在其自己的运行空间中运行，因此唯一的限制是允许共享连接。

希望这会有所帮助，克里斯

# c# - 自定义属性没有被调用

> ID：14572260
> 
> 赞同：2
> 
> 时间：2013-01-28T22:18:23.857
> 
> 标签：c#, attributes

好的，我显然遗漏了一些东西，因为这应该很简单。我创建了以下属性：

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method)]
public class EntitleAttribute : Attribute
{

    public EntitleAttribute(string permissionName)
    {
        bool hasPermission = ...
        if (!hasPermission)
        {
            throw new HttpException(403, "Forbidden");
        }
    }

} 
```

我把它放在一个方法上：

```
[Entitle("Access Application")]
public ActionResult MyMethod(...) { ... } 
```

但是，它永远不会被调用。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:45:20.197

属性本身不会做任何事情。需要一些代码来查找该属性并对其进行处理。

基于代码示例，您希望在 ASP.Net MVC 应用程序中执行一些按身份验证。[在这种情况下，您应该从 MVC 的AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.98%29.aspx)派生您的属性。如果您需要在 MVC 站点中进行更一般的处理 - 基本[FilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.filterattribute%28v=VS.98%29.aspx)甚至 IMvcFilter 提供更多选项。

# c# - 如何使用 LINQ 从两个列表中有效地选择某些项目

> ID：14572261
> 
> 赞同：3
> 
> 时间：2013-01-28T22:18:32.497
> 
> 标签：c#, linq

我有这 3 个课程：

*   员工
*   学生
*   人

代码：

```
public class Employee
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
    public string Gender { get; set; }
    public long TimeStamp { get; set; }
}

public class Student
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public int Age { get; set; }
    public long TimeStamp { get; set; }
}

public class Person<br>
{
    public string Name { get; set; }
    public int Age { get; set; }
} 
```

我创建了 4 个列表：

```
var studentList = new List<Student>();// fill the List with a lot of Stundents
var employeeList = new List<Student>(); // fill the List with a lot of employees
var personList1 = new List<Person>();
var personList2 = new List<Person>(); 
```

选择所有学生和员工

```
var allStudents = studentList.Select(a => a); // does not make a lot of sence but for testing 
var allEmployee = employeeList.Select(b => b); 
```

我想将所有学生映射到

```
personList1.AddRange(allStudents.Select(a => new Person()
            {
               Age = a.Age,
               Name = a.Name
            } )); 
```

我想获取 allStudent 列表中未提及 TimeStape 值的所有员工

```
var allEmployeesWithDifferentTimeStampThanStundent =
    allEmployee.Where(a => !allStudents.Select(b =>b.TimeStamp).Contains(a.TimeStamp)); 
```

再次映射

```
personList2.AddRange(allEmployeesWithDifferentTimeStampThanStundent.Select
(a => new Person()
    {
    Age = a.Age,
    Name = a.Name
    } )); 
```

合并两个列表

```
personList1.AddRange(personList2); 
```

有没有更好更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T03:39:58.857

该`personList2`变量似乎只是作为投影到`Person`类型的中间体 - 如果是这种情况，您可以跳过它的创建并使用如下查询语法：

```
var personsFromNonMatchingEmployees =
    from employee in allEmployee
    join student in allStudents
    on employee.TimeStamp equals student.TimeStamp into studentsWithMatchingTimeStamp
    where !studentsWithMatchingTimeStamp.Any()
    select new Person { Age = employee.Age, Name = employee.Name };

personList1.AddRange(personsFromNonMatchingEmployees); 
```

这类似于其他 GroupJoin 方法，因为编译器将上述内容转换为 GroupJoin 调用。join/group-join 的使用必然比该`Where..Contains`方法执行得更好，因为它使用了散列 - 换句话说，它是一种算法 Big-O 改进，对于几个 Student 或 Employee 实例来说应该是非常明显的。

通过`new Person`在查询中选择对象，我可以`personList2`完全绕过列表。我发现我几乎总是能够通过像这样选择项目到我真正感兴趣的类型来消除临时列表。我也省略了`()`on ，`new Person { .. }`因为编译器不需要它。

羞于改变继承并使员工：个人和学生：个人，我认为没有太多需要改进的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:26:26.527

您可以使用它来查找没有具有相同时间戳`GroupJoin`的匹配记录的所有员工：`Student`

```
var employeesDiffTS = allEmployee
    .GroupJoin(allStudents, e => e.TimeStamp, s => s.TimeStamp, (e, students) => new { Emp = e, HasMatch = students.Any() })
    .Where(em => !em.HasMatch)
    .Select(em => em.Emp)

personList2.AddRange(employeeDiffTS.Select(a => new Person { Age = a.Age, Name = a.Name }));

personList1.AddRange(personList2); 
```

# html - 引导定位问题

> ID：14572264
> 
> 赞同：1
> 
> 时间：2013-01-28T22:18:43.547
> 
> 标签：html, css, twitter-bootstrap

我使用 Dreamweaver 和表格制作了这个网站 ( [http://aghicks.co.uk/](http://aghicks.co.uk/) )，现在我正在学习 Bootstrap。我有一些事情我无法完全解决。

到目前为止我有这个

```
<!DOCTYPE html>
<html lang="en">
<head>

    <link href="css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="css/stylesheet.css" rel"stylesheet" type="text/css">
    <style type="text/css">
    body {
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
        max-width: 1000px;
        border: 1px solid black;
        background:#EAEAEA;
        margin: auto;
        padding-top: 66px;
    }

    .redtext {
        color: #b83535;
    }

    a {
        color: #333;
    }

    a:hover {
        color: #b83535;
        text-decoration: none;
    }

    .align_right {
        text-align: right;
    }

    .logo {
        min-width: 286px;
    }

    span {
        font-weight: 300;
    }

    .navbar {
        padding-top: 34px;
    }

    .centered {
        float: none !important;
        margin-left: auto !important;
        margin-right: auto !important;
        text-align: center !important;
    }

    h4 {
        font-size: 16px;
    }

    /* Homepage */

    /* Footer */

    .footer_wrapper {
        max-height: 70px;
    }

    .footer {
        background-color: #999999;
    }

    .footer_text {
        color: #FFF;
        font-size: 10px;
        padding-top: 8px;
        padding-left: 8px;
        padding-right: 8px;
    }
</style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGHicks Homepage</title>
</head>
<body>

<div class="container-fluid">

<!-- Header -->
    <div class="row-fluid">
        <div class="span5 logo">
            <img src="images/Logo.png" class="logo">
        </div>
        <div class="span4 offset3">
                    <img src="images/Phone_icon.png" class="pull-left">
                    <h4 class="pull-right align_right">Northampton <span>01604786464</span><br><br>Mobile <span>07710537685</span></h4>
        </div>
    </div>

    <!-- Navbar -->
    <div class="navbar">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li><a href="http://www.google.com">Home</a></li>
                            <li><a href="http://www.google.com">Gallery</a></li>
                            <li><a href="http://www.google.com">About Us</a></li>
                            <li><a href="http://www.google.com">Contact</a></li>
                        </ul>
                    </div>
                </div>
            </div>
    </div>

    <!-- Content -->
    <div class="row-fluid">
        <div class="span6">
            <img src="images/Homepage/Small_one_off_jobs.png" >
        </div>
        <div class="span6">
            <div class="row-fluid">
                <div class="span12">
                    <h5>Welcome to AGHicks Building Services website! We are a Northampton based, family run company with over 20 years experience. Hardwork, efficiency and reliability are instilled throughout the workforce and we have gained a strong reputation through word of mouth.</h5>
                </div>
            </div>
            <div class"row-fluid">
                <div class="span12">
                    <img src="images/Homepage/Map_pin.png" >
                    <h5 class="redtext">Northampton Based</h5>
                    <img src="images/Homepage/Quote.png" >
                    <h5 class="redtext">Free Quotes</h5>
                    <img src="images/Homepage/Tools.png" >
                    <h5 class="redtext">No Job Too Small</h5>
                    <img src="images/Homepage/Piggybank.png" >
                    <h5 class="redtext">Competitive Prices</h5>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span12">
                    <h5 class="redtext centered">OUR SERVICES INCLUDE</h5>
                </div>
            </div>
            <div class="row-fluid">
                <div class="span5">
            <ul>
                <li><strong>Conservatories</strong></li>
                <li><strong>Extensions</strong></li>
                <li><strong>Window & Door Refits</strong></li>
                <li><strong>Bricklaying</strong></li>
                <li><strong>Driveways</strong></li>
                <li><strong>Carpentry</strong></li>
                <li><strong>Patios</strong></li>
                <li><strong>Stonework</strong></li>
            </ul>
            </div>
            <div class="span6 offset1">
            <ul>
                <li><strong>Plastering</strong></li>
                <li><strong>Kitchen & Bathroom Refits</strong></li>
                <li><strong>Tiling</strong></li>
                <li><strong>Fencing</strong></li>
                <li><strong>Fascias</strong></li>
                <li><strong>Garages & Carports</strong></li>
                <li><strong>Guttering</strong></li>
            </ul>
            </div>

        </div> 
   </div>

   <!-- Footer -->
   <div class="row-fluid footer_wrapper">
        <div class="span12">
            <div class="row-fluid footer">
            <div class="span5">
                <p class="footer_text"><strong>Copyright © AGHicks Building Services 2012 - All rights reserved.<br>Registered Address - 19 Bentley Close, Rectory Farm, Northampton, NN3 5JS.</strong></p>
            </div>
            <div class="span4 offset3 align_right">
                <p class="footer_text"><strong>Web Design Services and SEO from <a href="http://www.benmil.tumblr.com/me">Ben Mildren</a></strong></p>
            </div>
            </div>
        </div>

   </div>     
</div>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="js/bootstrap.min.js"></script>
</body>
</html> 
```

在这些图片中可以看到我遇到的问题[http://imgur.com/jdSAKEk,CbbVrv7#0](http://imgur.com/jdSAKEk,CbbVrv7#0)

（body 周围的边框将被移除，navbar 的样式将被更改）

在第一张图片（桌面大小）中，您会看到电话号码图标未与实际号码对齐，并且图标和文本均未与徽标底部对齐。我可以通过使用填充来实现这一点，但是当您减小浏览器的宽度时，填充仍然存在并导致页面中出现巨大的间隙。

第一张图片中的第二个问题是，我无法让中间右侧区域的那些图标和红色文本出现在 www.aghicks.co.uk 目前的“网格”形式中。

最后，在第二张图片上，当浏览器宽度减小时，当空间明显足够时，两个向下的列表彼此对齐。

对于任何问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:40:43.473

*   你想如何对齐你巨大的电话图标和两行文字和数字？首先在台式机上，然后在平板电脑上？
*   垂直对齐是一项工作`display: table-something; vertical-align: bottom;`。
*   网格形成：我会列出 4 个项目，项目将是固定宽度（50% 或 49%），显示为`inline-block`（或浮动到`.clearfix`容器中）。
*   第二张图片和列表不是并排的：嗯，在这个宽度上应用了哪些 CSS？将规则检查到相关媒体查询中。也许它们显示为宽度为 50% 的内联块？然后仍然有大约的空白。4像素。45% 的宽度会自动解决问题（不要忘记添加 .clearfix 容器，否则内容会溢出到剩余的（10%-4px）剩余空间...）

# java - 如何完美模拟 KeyEvents？

> ID：14572270
> 
> 赞同：10
> 
> 时间：2013-01-28T22:19:10.183
> 
> 标签：java, keyevent

我如何构建自己的对象，这些对象与最终用户键入内容时`KeyEvent`收到的对象完全（或非常接近）匹配？`KeyListener`

* * *

例如，我有一个英国 ISO 键盘布局并输入`"`我按的字符`Shift+2`。如果我用 a 将其记录在 a`JFrame`上`KeyListener`，我会收到以下事件：

```
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=16,keyText=Shift,keyChar=Undefined keyChar,modifiers=Shift,extModifiers=Shift,keyLocation=KEY_LOCATION_LEFT,rawCode=16,primaryLevelUnicode=0,scancode=42,extendedKeyCode=0x10] on frame0
java.awt.event.KeyEvent[KEY_PRESSED,keyCode=50,keyText=2,keyChar='"',modifiers=Shift,extModifiers=Shift,keyLocation=KEY_LOCATION_STANDARD,rawCode=50,primaryLevelUnicode=50,scancode=3,extendedKeyCode=0x32] on frame0
java.awt.event.KeyEvent[KEY_TYPED,keyCode=0,keyText=Unknown keyCode: 0x0,keyChar='"',modifiers=Shift,extModifiers=Shift,keyLocation=KEY_LOCATION_UNKNOWN,rawCode=0,primaryLevelUnicode=0,scancode=0,extendedKeyCode=0x0] on frame0
java.awt.event.KeyEvent[KEY_RELEASED,keyCode=16,keyText=Shift,keyChar=Undefined keyChar,keyLocation=KEY_LOCATION_LEFT,rawCode=16,primaryLevelUnicode=0,scancode=42,extendedKeyCode=0x10] on frame0
java.awt.event.KeyEvent[KEY_RELEASED,keyCode=50,keyText=2,keyChar='"',keyLocation=KEY_LOCATION_STANDARD,rawCode=50,primaryLevelUnicode=50,scancode=3,extendedKeyCode=0x32] on frame0 
```

我想创建一个方法，将其`"`作为 char 参数提供，它会返回上面列出的 KeyEvents 数组。

我的问题是：

*   在`KEY_PRESSED`and`KEY_RELEASED`事件中，`keyChar='"'`表示被按下的字符 ( `"`)，但是`keyCode=50`指的是“未移位”的 ASCII 值 (aka `2`)。`"`我需要知道如何仅从角色中获取此非移位值。

*   对于不同的键盘布局，此非移位值也将有所不同。例如，美国 ANSI 布局要求`Shift+'`键入`"`密钥，这意味着`keyCode`39 而不是 50。

*   在某些键盘布局中，需要使用 shift 键来键入一个键，但在其他键盘布局中则不需要。例如，该`#`字符`Shift+3`在美国 ANSI 键盘上需要，但在英国 ISO 键盘上不需要移位键。我需要知道是否应该模拟换档按下/释放事件并提供换档修饰符。

任何有关如何解决这些问题的见解将不胜感激。我还应该注意，`Robot`在我的情况下不能使用该类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:27:35.883

没有“简单”的方法可以将虚拟键转换为实际键序列或再次返回，至少不是我能够找到的。

调度关键事件的两种主要方式是通过`java.awt.Robot`或直接通过系统事件队列。您要使用哪个取决于您要实现的目标。

组件通常无法区分从您自己生成的键盘发送的击键。

下面的示例令人费解，对不起，我没有找到更好的方法来满足我需要的要求。

```
public class TestKeyEvents {
    public static void main(String[] args) {
        new TestKeyEvents();
    }
    public TestKeyEvents() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }
                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
                new Thread(new KeyDispatcher()).start();
            }
        });
    }
    public class TestPane extends JPanel {
        public TestPane() {
            setLayout(new BorderLayout());
            JTextArea area = new JTextArea(10, 30);
            area.setWrapStyleWord(true);
            area.setLineWrap(true);
            add(area);
        }
    }
    public class KeyDispatcher implements Runnable {
        @Override
        public void run() {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
            }
            dispatchKeyEventsViaEventQueue();
            dispatchKeyEventsViaRobot();
        }

        protected void dispatchKeyEventsViaEventQueue() {
            if (EventQueue.isDispatchThread()) {
                String text = "This is a key sequence dispatched via the event queue\n";
                KeySequence keySequence = getKeySequence(text);
                List<KeyEvent> events = new ArrayList<>();
                List<Integer> modifers = new ArrayList<>();
                for (Key key : keySequence) {
                    events.clear();
                    System.out.println(key);
                    switch (key.getStrokeType()) {
                        case Press:
                            switch (key.getKeyCode()) {
                                case KeyEvent.VK_SHIFT:
                                case KeyEvent.VK_ALT:
                                case KeyEvent.VK_CONTROL:
                                case KeyEvent.VK_META:
                                    if (!modifers.contains(key.getKeyCode())) {
                                        modifers.add(key.getKeyCode());
                                    }
                                    break;
                                default:
                                    events.add(new KeyEvent(new JPanel(), KeyEvent.KEY_PRESSED, System.currentTimeMillis(), getModifiers(modifers), key.getKeyCode(), key.getKeyChar()));
                                    break;
                            }
                            break;
                        case Release:
                            switch (key.getKeyCode()) {
                                case KeyEvent.VK_SHIFT:
                                case KeyEvent.VK_ALT:
                                case KeyEvent.VK_CONTROL:
                                case KeyEvent.VK_META:
                                    if (!modifers.contains(key.getKeyCode())) {
                                        modifers.remove(key.getKeyCode());
                                    }
                                    break;
                                default:
                                    events.add(new KeyEvent(new JPanel(), KeyEvent.KEY_RELEASED, System.currentTimeMillis(), getModifiers(modifers), key.getKeyCode(), key.getKeyChar()));
                                    break;
                            }
                            break;
                        case Type:
                            events.add(new KeyEvent(new JPanel(), KeyEvent.KEY_PRESSED, System.currentTimeMillis(), getModifiers(modifers), key.getKeyCode(), key.getKeyChar()));
                            events.add(new KeyEvent(new JPanel(), KeyEvent.KEY_RELEASED, System.currentTimeMillis(), getModifiers(modifers), key.getKeyCode(), key.getKeyChar()));
                            events.add(new KeyEvent(new JPanel(), KeyEvent.KEY_TYPED, System.currentTimeMillis(), getModifiers(modifers), KeyEvent.VK_UNDEFINED, key.getKeyChar()));
                            break;
                    }

                    for (KeyEvent evt : events) {
                        Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(evt);
                    }
                }
            } else {
                try {
                    SwingUtilities.invokeAndWait(new Runnable() {
                        @Override
                        public void run() {
                            dispatchKeyEventsViaEventQueue();
                        }
                    });
                } catch (Exception exp) {
                    exp.printStackTrace();
                }
            }
        }

        protected void dispatchKeyEventsViaRobot() {
            try {
                Robot robot = new Robot();
                String text = "This is a key sequence dispatched via java.awt.Robot\n";
                KeySequence keySequence = getKeySequence(text);
                List<KeyEvent> events = new ArrayList<>();
                for (Key key : keySequence) {
                    events.clear();
                    System.out.println(key);
                    switch (key.getStrokeType()) {
                        case Press:
                            robot.keyPress(key.getKeyCode());
                            break;
                        case Release:
                            robot.keyRelease(key.getKeyCode());
                            break;
                        case Type:
                            robot.keyPress(key.getKeyCode());
                            robot.keyRelease(key.getKeyCode());
                            break;
                    }
                }
            } catch (AWTException exp) {
                exp.printStackTrace();
            }
        }
    }

    protected int getModifiers(List<Integer> mods) {
        int result = 0;
        for (int mod : mods) {
            result &= mod;
        }
        return result;
    }

    public static class Key {
        public enum StrokeType {
            Type,
            Press,
            Release
        }
        private StrokeType strokeType;
        private int keyCode;
        private char keyChar;
        public Key(StrokeType type, int keyCode, char keyChar) {
            this.strokeType = type;
            this.keyCode = keyCode;
            this.keyChar = keyChar;
        }

        public StrokeType getStrokeType() {
            return strokeType;
        }

        public int getKeyCode() {
            return keyCode;
        }

        public char getKeyChar() {
            return keyChar;
        }

        @Override
        public String toString() {
            return getStrokeType().name() + " " + getKeyChar() + " (" + getKeyCode() + ")";
        }
    }

    public static KeySequence getKeySequence(String text) {
        KeySequence ks = new KeySequence();
        for (char c : text.toCharArray()) {
            addKeySequence(ks, c);
        }
        return ks;
    }

    public static void addKeySequence(KeySequence ks, char character) {
        switch (character) {
            case 'a':
                ks.type(KeyEvent.VK_A, character);
                break;
            case 'b':
                ks.type(KeyEvent.VK_B, character);
                break;
            case 'c':
                ks.type(KeyEvent.VK_C, character);
                break;
            case 'd':
                ks.type(KeyEvent.VK_D, character);
                break;
            case 'e':
                ks.type(KeyEvent.VK_E, character);
                break;
            case 'f':
                ks.type(KeyEvent.VK_F, character);
                break;
            case 'g':
                ks.type(KeyEvent.VK_G, character);
                break;
            case 'h':
                ks.type(KeyEvent.VK_H, character);
                break;
            case 'i':
                ks.type(KeyEvent.VK_I, character);
                break;
            case 'j':
                ks.type(KeyEvent.VK_J, character);
                break;
            case 'k':
                ks.type(KeyEvent.VK_K, character);
                break;
            case 'l':
                ks.type(KeyEvent.VK_L, character);
                break;
            case 'm':
                ks.type(KeyEvent.VK_M, character);
                break;
            case 'n':
                ks.type(KeyEvent.VK_N, character);
                break;
            case 'o':
                ks.type(KeyEvent.VK_O, character);
                break;
            case 'p':
                ks.type(KeyEvent.VK_P, character);
                break;
            case 'q':
                ks.type(KeyEvent.VK_Q, character);
                break;
            case 'r':
                ks.type(KeyEvent.VK_R, character);
                break;
            case 's':
                ks.type(KeyEvent.VK_S, character);
                break;
            case 't':
                ks.type(KeyEvent.VK_T, character);
                break;
            case 'u':
                ks.type(KeyEvent.VK_U, character);
                break;
            case 'v':
                ks.type(KeyEvent.VK_V, character);
                break;
            case 'w':
                ks.type(KeyEvent.VK_W, character);
                break;
            case 'x':
                ks.type(KeyEvent.VK_X, character);
                break;
            case 'y':
                ks.type(KeyEvent.VK_Y, character);
                break;
            case 'z':
                ks.type(KeyEvent.VK_Z, character);
                break;
            case 'A':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_A, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'B':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_B, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'C':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_C, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'D':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_D, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'E':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_E, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'F':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_F, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'G':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_G, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'H':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_H, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'I':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_I, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'J':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_J, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'K':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_K, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'L':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_L, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'M':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_M, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'N':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_N, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'O':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_O, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'P':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_P, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'Q':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_Q, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'R':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_R, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'S':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_S, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'T':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_T, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'U':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_U, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'V':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_V, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'W':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_W, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'X':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_X, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'Y':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_Y, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case 'Z':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_Z, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case '`':
                ks.type(KeyEvent.VK_BACK_QUOTE, character);
                break;
            case '0':
                ks.type(KeyEvent.VK_0, character);
                break;
            case '1':
                ks.type(KeyEvent.VK_1, character);
                break;
            case '2':
                ks.type(KeyEvent.VK_2, character);
                break;
            case '3':
                ks.type(KeyEvent.VK_3, character);
                break;
            case '4':
                ks.type(KeyEvent.VK_4, character);
                break;
            case '5':
                ks.type(KeyEvent.VK_5, character);
                break;
            case '6':
                ks.type(KeyEvent.VK_6, character);
                break;
            case '7':
                ks.type(KeyEvent.VK_7, character);
                break;
            case '8':
                ks.type(KeyEvent.VK_8, character);
                break;
            case '9':
                ks.type(KeyEvent.VK_9, character);
                break;
            case '-':
                ks.type(KeyEvent.VK_MINUS, character);
                break;
            case '=':
                ks.type(KeyEvent.VK_EQUALS, character);
                break;
            case '~':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_BACK_QUOTE, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case '!':
                ks.type(KeyEvent.VK_EXCLAMATION_MARK, character);
                break;
            case '@':
                ks.type(KeyEvent.VK_AT, character);
                break;
            case '#':
                ks.type(KeyEvent.VK_NUMBER_SIGN, character);
                break;
            case '$':
                ks.type(KeyEvent.VK_DOLLAR, character);
                break;
            case '%':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_5, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case '^':
                ks.type(KeyEvent.VK_CIRCUMFLEX, character);
                break;
            case '&':
                ks.type(KeyEvent.VK_AMPERSAND, character);
                break;
            case '*':
                ks.type(KeyEvent.VK_ASTERISK, character);
                break;
            case '(':
                ks.type(KeyEvent.VK_LEFT_PARENTHESIS, character);
                break;
            case ')':
                ks.type(KeyEvent.VK_RIGHT_PARENTHESIS, character);
                break;
            case '_':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_MINUS, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case '+':
                ks.type(KeyEvent.VK_PLUS, character);
                break;
            case '\t':
                ks.type(KeyEvent.VK_TAB, character);
                break;
            case '\n':
                ks.type(KeyEvent.VK_ENTER, character);
                break;
            case '[':
                ks.type(KeyEvent.VK_OPEN_BRACKET, character);
                break;
            case ']':
                ks.type(KeyEvent.VK_CLOSE_BRACKET, character);
                break;
            case '\\':
                ks.type(KeyEvent.VK_BACK_SLASH, character);
                break;
            case '{':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_OPEN_BRACKET, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case '}':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_CLOSE_BRACKET, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case '|':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_BACK_SLASH, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case ';':
                ks.type(KeyEvent.VK_SEMICOLON, character);
                break;
            case ':':
                ks.type(KeyEvent.VK_COLON, character);
                break;
            case '\'':
                ks.type(KeyEvent.VK_QUOTE, character);
                break;
            case '"':
                ks.type(KeyEvent.VK_QUOTEDBL, character);
                break;
            case ',':
                ks.type(KeyEvent.VK_COMMA, character);
                break;
            case '<':
                ks.type(KeyEvent.VK_LESS, character);
                break;
            case '.':
                ks.type(KeyEvent.VK_PERIOD, character);
                break;
            case '>':
                ks.type(KeyEvent.VK_GREATER, character);
                break;
            case '/':
                ks.type(KeyEvent.VK_SLASH, character);
                break;
            case '?':
                ks.press(KeyEvent.VK_SHIFT, '\0');
                ks.type(KeyEvent.VK_SLASH, character);
                ks.release(KeyEvent.VK_SHIFT, '\0');
                break;
            case ' ':
                ks.type(KeyEvent.VK_SPACE, character);
                break;
            default:
                throw new IllegalArgumentException("Cannot type character " + character);
        }
    }

    public static class KeySequence implements Iterable<Key> {
        private List<Key> keys;
        public KeySequence() {
            keys = new ArrayList<>(25);
        }

        public void type(int keyCode, char keyChar) {
            keys.add(new Key(Key.StrokeType.Type, keyCode, keyChar));
        }

        public void press(int keyCode, char keyChar) {
            keys.add(new Key(Key.StrokeType.Press, keyCode, keyChar));
        }

        public void release(int keyCode, char keyChar) {
            keys.add(new Key(Key.StrokeType.Release, keyCode, keyChar));
        }

        public Iterator<Key> iterator() {
            return keys.iterator();
        }
    }
} 
```

# winapi - 如何取消创建文件

> ID：14572272
> 
> 赞同：2
> 
> 时间：2013-01-28T22:19:13.587
> 
> 标签：winapi, file-io, error-handling

假设我正在将数据写入文件句柄：

```
hFile = CreateFile(filename, GENERICREAD | GENERICWRITE, 0, null, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0);
//[snip error check]
try
{
   if (!WriteFile(hFile, buffer, count, ref bytesWritten, null))
       throw new Win32Exception(GetLastError());
}
finally
{
   CloseHandle();
} 
```

如果我的数据写入失败，我希望在关闭句柄时**删除文件。**即：我希望文件是**“un-CreatFile'd”**。

* * *

我已经尝试了明显的，如果有问题删除文件：

```
hFile = CreateFile(filename, GENERICREAD | GENERICWRITE, 0, null, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0);
//[snip error check]
try
{
   try
   {
      if (!WriteFile(hFile, buffer, count, ref bytesWritten, null))
          throw new Win32Exception(GetLastError());
   }
   finally
   {
      CloseHandle();
   }
}
catch
{
   DeleteFile(filename);
   throw;
} 
```

这种方法有两个问题：

1.  有一个竞争条件，有人可以在我关闭文件后打开我的文件，但在我删除它之前
2.  **我可能有创建**文件的权限，但没有**删除**它的权限。

我想要的是一种***追溯***指定的方法：

> `FILE_FLAG_DELETE_ON_CLOSE`：文件在其所有句柄关闭后立即删除，包括指定的句柄和任何其他打开或重复的句柄。

到我打开的文件。

我创建了文件！我当然可以取消创建它！都是因为我忘了事先指定一个标志？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:58:09.530

在 Windows Vista 和更新版本中，这可以使用[`SetFileInformationByHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365539%28v=VS.85%29.aspx)和来完成[`FILE_DISPOSITION_INFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364221%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T23:03:11.533

在所有版本的 Windows 中，您都可以

1.  `FILE_SHARE_DELETE`最初打开文件时指定。
2.  再次打开它，指定`FILE_FLAG_DELETE_ON_CLOSE`
3.  关闭第二个手柄。
4.  当所有句柄都关闭时，该文件将被删除。

这`FILE_FLAG_DELETE_ON_CLOSE`在以下文档的描述中进行了解释`CreateFile`：

> 该文件将**在其所有句柄关闭后**立即删除，其中包括指定的句柄和任何**其他打开或重复的句柄**。如果文件存在现有的打开句柄，则调用将失败，除非它们都以`FILE_SHARE_DELETE`共享模式打开。

* * *

如果自动删除不够好，您可以查看 Transactional NTFS，将文件创建和所有写入放入事务中，然后在必要时将其回滚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:58:41.983

如果您使用的是 Windows 2003 服务器或 Vista 或更高版本，[那么 ReOpenFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365497%28v=vs.85%29.aspx)就是您要找的。它允许您为重新打开的句柄指定一个新的“标志”参数。很遗憾，它显然在 XP 上不可用。

# ruby - 使用带有方括号的 Array#shift (Ruby)

> ID：14572273
> 
> 赞同：2
> 
> 时间：2013-01-28T22:19:23.773
> 
> 标签：ruby, shift

我正在阅读Why's Poignant Guide to Ruby，我遇到了这个代码示例，其中他向 String 类添加了一个类变量和一个实例方法。这个想法是，给定一串外星人的名字，比如“Paij-Ree”，我们可以运行类似

```
"Paij-ree".determine_significance # returns "Personal AM" 
```

这是代码：

```
class String

  @@syllables = [
    { 'Paij' => 'Personal',
      'Gonk' => 'Business',
      'Blon' => 'Slave',
      'Stro' => 'Master',
      'Wert' => 'Father',
      'Onnn' => 'Mother' },
    { 'ree'  => 'AM',
      'plo'  => 'PM' }
  ]

  # a method to determine what a certain
  # name of his means

  def determine_significance

    parts = self.split( '-' )

    syllables = @@syllables.dup

    signif = parts.collect do |p|
      syllables.shift[p]
    end

    signif.join( ' ' )
  end

end 
```

我的问题：在 Array#shift 方法后面有方括号的 collect 块中发生了什么？我只能找到这样使用它的示例：

```
letters = ['a','b','c']
letters.shift  # returns "a" 
```

这里发生了什么？

```
syllables.shift[p] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:32:52.403

它正是这样做的。`@@syllables`是一个散列数组，因此它将第一个值移出数组，这是一个散列。然后它使用拆分字符串作为键来访问它。

`self.split( '-' )`返回一个字符串数组，并将其映射`collect`为用散列中的值替换它。

重要的部分是复制数组以避免破坏原始数组，`@@syllables`因此您可以移动副本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T22:39:26.773

这是正在发生的事情：

```
parts = self.split('-') 
```

正在将字符串转换为：

```
['Paij', 'ree'] # an Array 
```

下一个有问题的块：

```
signif = parts.collect do |p|
  syllables.shift[p]
end 
```

将数组中的每个实例传递给块，并从变量中`['Paij', 'ree']` `(parts variable)`返回匹配的值。`@@syllables`

# ruby-on-rails - 红宝石、临时文件、CSV

> ID：14572276
> 
> 赞同：2
> 
> 时间：2013-01-28T22:19:29.250
> 
> 标签：ruby-on-rails, ruby, csv, temporary-files

我有以下 resque 作业，它生成一个 csv 文件并将其发送到邮件程序。我想验证 csv 文件是否有数据，所以我不会通过电子邮件发送空白文件。出于某种原因，当我在 perform 方法之外编写方法时，它将不起作用。例如，当我知道 csv 文件的第一行有数据时，下面的代码将打印无效。如果我取消注释下面的行，确保它正常工作，但是我想将这个文件检查提取到一个单独的方法中。这个对吗？

```
class ReportJob
  @queue = :report_job

def self.perform(application_id, current_user_id)
 user = User.find(current_user_id)
 client_application = Application.find(client_application_id)
 transactions = application.transactions
 file = Tempfile.open(["#{Rails.root}/tmp/", ".csv"]) do |csv|
   begin
     csv_file = CSV.new(csv)
     csv_file << ["Application", "Price", "Tax"]
     transactions.each do |transaction|
       csv_file << [application.name, transaction.price, transaction.tax]
     end
   ensure
    ReportJob.email_report(user.email, csv_file)
    #ReportMailer.send_report(user.email, csv_file).deliver
     csv_file.close(unlink=true)
   end
 end
end

 def self.email_report(email, csv)
   array = csv.to_a
   if array[1].blank?
     puts "invalid"
   else
     ReportMailer.send_report(email, csv).deliver
   end
 end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:44:03.420

您应该这样调用您的方法：

```
ReportJob.email_report(email, csv) 
```

否则，摆脱`self`in：

```
def self.email_report(email, csv)
   # your implementation here.
end 
```

并定义您的方法如下：

```
def email_report(email, csv)
  # your implementation.
end 
```

这就是我们所说的类方法和实例方法。

# php - 插入具有一对多关系的数据

> ID：14572279
> 
> 赞同：2
> 
> 时间：2013-01-28T22:19:37.163
> 
> 标签：php, laravel, eloquent

我有三个表：产品、公司、类型。公司和类型与产品具有一对多的关系。[型号型号]

```
class Type extends BaseModel {
    public static $table = "type";
    public static $timestamps = true;

    public function products() {
      return $this->has_many('Products');
    }
} 
```

[公司型号]

```
class Company extends BaseModel {
    public static $table = "company";
    public static $timestamps = true;

    public function products() {
        return $this->has_many('Products');
    }
} 
```

[产品型号]

```
class Products extends BaseModel {
    public static $table = 'products';
    public static $timestamps = true;

    public function company() {
        return $this->belongs_to('Company');
    }

    public function type() {
        return $this->belongs_to('Type');
    }
} 
```

在 add_product 路线我有

```
$product = new Products($new_product); 
$company_id = $all_posts['company_id'];
$company = Company::find($company_id);
$company->products()->save($product);
$type_id = $all_posts['type'];
$type = Type::find($type_id);
$type->products()->save($product); 
```

但是当我尝试将数据插入数据库时​​，我得到：

```
SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '11' for key 'PRIMARY' 
```

如何更新 Products 表中的 type_id 和 company_id？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T02:58:57.233

如果我没记错的话，你的 products 表应该有 product_id 和 type_id 列吗？只需指定这些值：

```
$new_product['company_id'] = $all_posts['company_id'];
$new_product['type_id'] = $all_posts['type'];
$product = new Products($new_product); 
$product->save(); 
```

您不需要使用 Company 和 Type 模型来建立它们与产品之间的关系。您可以简单地填写 ID。

# javascript - 更改设置在 HTML 对象背景的 SVG 文件的颜色

> ID：14572280
> 
> 赞同：2
> 
> 时间：2013-01-28T22:19:46.727
> 
> 标签：javascript, jquery, html, css, svg

各位下午好！

好的，所以我有一个 DIV 背景的 SVG 文件。到目前为止，我已经能够检索文件，调整填充颜色并将其添加到站点中，以便我可以看到调整后的内容。但是，我正在尝试使用调整后的 SVG 信息更新 DIV，但运气不佳。

```
// use gathered URL for svg, create dummy object to load SVG into ( i might not need this)
$(thing).load(bkgImg, function()
{
    var svg = thing.find('svg');//get the SVG information

    svg.find('path').attr('fill', '#FF0000'); // getting the path, change the fill HEX

    obj.css({'background':svg}); // replacing the object bkg with altered SVG 

    $('body').prepend(svg); // so I can see the new SVG
}); 
```

可能有更好的方法来获取 SVG 信息，但我不知道。任何人可能拥有的任何信息都将是最有帮助的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:25:28.127

如果我理解你的问题......这可能是你的问题：

JQuery 不能追加元素（它似乎确实将它们添加到 DOM 资源管理器中，但不是在屏幕上）。

一种解决方法是将所有需要的元素附加到页面，然后使用 .attr() 修改元素的属性。

# c# - 防止在 ASP.NET MVC 页面上重复提交

> ID：14572284
> 
> 赞同：0
> 
> 时间：2013-01-28T22:20:09.483
> 
> 标签：c#, asp.net-mvc-4

我有一个 ASP.NET MVC 4 视图。在视图中，我有

```
<form action="/myAction" method="post">
  ...
  <input type="submit" value=" Save&nbsp;" onclick="this.disabled = true; this.value = ' Please wait... '; return true;" />
</form> 
```

通过禁用按钮，表单永远不会被提交。但是，我想在用户单击它后禁用该按钮。我想禁用它的原因是防止用户多次单击“提交”按钮。我究竟做错了什么？我想如果我返回 true，表单仍然会提交。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T23:06:30.707

禁用表单提交事件中的按钮，而不是按钮的单击事件。这是因为 click 事件在表单提交之前触发 - 虽然你正在返回`true`，所以这不应该导致提交失败，我不认为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T04:42:45.273

使用动作过滤器。[这篇博文](http://rionghost.azurewebsites.net/2013/02/24/prevent-repeated-requests-using-actionfilters-in-asp-net-mvc/)有一个类，你可以直接放入你的项目中，装饰你的动作，你就完成了。

# c# - 不要在 OpenFileDialog 中显示过滤器扩展

> ID：14572285
> 
> 赞同：4
> 
> 时间：2013-01-28T22:20:09.567
> 
> 标签：c#, openfiledialog

为什么过滤器扩展不显示`OpenFileDialog`？我对此进行了测试，但对话框未显示`DAT`扩展名。如果我`DAT`在列表扩展的第一个中获得扩展，则`OpenFileDialog`在对话框中进行过滤。我`C#`在 Win XP 上使用 Application-FrameWork 3.5。

这是我的代码：

```
OpenFileDialog openFileDialog = new OpenFileDialog();

string VideoFormat = "Video files |*.wmv; *.3g2; *.3gp; *.3gp2; *.3gpp; *.amv; *.asf;  *.avi; *.bin; *.cue; *.divx; *.dv; *.flv; *.gxf; *.iso; *.m1v; *.m2v; *.m2t; *.m2ts; *.m4v; " +
                          " *.mkv; *.mov; *.mp2; *.mp2v; *.mp4; *.mp4v; *.mpa; *.mpe; *.mpeg; *.mpeg1; *.mpeg2; *.mpeg4; *.mpg; *.mpv2; *.mts; *.nsv; *.nuv; *.ogg; *.ogm; *.ogv; *.ogx; *.ps; *.rec; *.rm; *.rmvb; *.tod; *.ts; *.tts; *.vob; *.vro; *.webm; *.dat; ";

openFileDialog.Filter = VideoFormat;
openFileDialog.ShowDialog(); 
```

但是这段代码在对话框中过滤了 DAT 扩展：

```
OpenFileDialog openFileDialog = new OpenFileDialog();

            string VideoFormat = "Video files | *.dat; *.wmv; *.3g2; *.3gp; *.3gp2; *.3gpp; *.amv; *.asf;  *.avi; *.bin; *.cue; *.divx; *.dv; *.flv; *.gxf; *.iso; *.m1v; *.m2v; *.m2t; *.m2ts; *.m4v; " +
                      " *.mkv; *.mov; *.mp2; *.mp2v; *.mp4; *.mp4v; *.mpa; *.mpe; *.mpeg; *.mpeg1; *.mpeg2; *.mpeg4; *.mpg; *.mpv2; *.mts; *.nsv; *.nuv; *.ogg; *.ogm; *.ogv; *.ogx; *.ps; *.rec; *.rm; *.rmvb; *.tod; *.ts; *.tts; *.vob; *.vro; *.webm; ";

openFileDialog.Filter = VideoFormat;
openFileDialog.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T22:27:56.463

这是`OpenFileDialog`对象的 Filter 属性的正确格式：

```
(*.jpg)|*.jpg|Image Files (*.png)|*.png|Image Files (*.jpeg)|*.jpeg 
```

尝试这个：

```
 OpenFileDialog openFileDialog = new OpenFileDialog();
        string formats = "*.dat; *.wmv; *.3g2; *.3gp; *.3gp2; *.3gpp; *.amv; *.asf;  *.avi; *.bin; *.cue; *.divx; *.dv; *.flv; *.gxf; *.iso; *.m1v; *.m2v; *.m2t; *.m2ts; *.m4v; " +
                  " *.mkv; *.mov; *.mp2; *.mp2v; *.mp4; *.mp4v; *.mpa; *.mpe; *.mpeg; *.mpeg1; *.mpeg2; *.mpeg4; *.mpg; *.mpv2; *.mts; *.nsv; *.nuv; *.ogg; *.ogm; *.ogv; *.ogx; *.ps; *.rec; *.rm; *.rmvb; *.tod; *.ts; *.tts; *.vob; *.vro; *.webm";

        string[] exts = formats.Split(';');
        string filter = string.Empty;
        foreach (string ext in exts)
        {

                filter += "Video Files (" + ext.Replace("*", "").Trim() + ")|" + ext + "|";
        }

        openFileDialog.Filter = filter.Remove(filter.Length-1,1);
        openFileDialog.ShowDialog(); 
```

**更新**

此选项仅显示一个选项，但可让您选择所有视频类型：

```
 OpenFileDialog openFileDialog = new OpenFileDialog();
        string formats = "All Videos Files |*.dat; *.wmv; *.3g2; *.3gp; *.3gp2; *.3gpp; *.amv; *.asf;  *.avi; *.bin; *.cue; *.divx; *.dv; *.flv; *.gxf; *.iso; *.m1v; *.m2v; *.m2t; *.m2ts; *.m4v; " +
                  " *.mkv; *.mov; *.mp2; *.mp2v; *.mp4; *.mp4v; *.mpa; *.mpe; *.mpeg; *.mpeg1; *.mpeg2; *.mpeg4; *.mpg; *.mpv2; *.mts; *.nsv; *.nuv; *.ogg; *.ogm; *.ogv; *.ogx; *.ps; *.rec; *.rm; *.rmvb; *.tod; *.ts; *.tts; *.vob; *.vro; *.webm";

        openFileDialog.Filter = formats;
        openFileDialog.ShowDialog(); 
```

它必须是那样的。

# java - 在 Junit 中测试不同的 Java 版本

> ID：14572287
> 
> 赞同：7
> 
> 时间：2013-01-28T22:20:11.207
> 
> 标签：java, testing, junit, jvm, version

当操作系统上有多种 java 类型可用时，有没有办法在 junit 测试中指定 JVM 版本？

我想做这样的事情：

```
@JVM=1.5
public void test1(){
   run();
}

@JVM=1.7
public void test2(){
   run();
} 
```

ETC..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T23:22:44.970

不，您必须使用多个 VM 多次运行 JUnit 测试。然后，您可以使用[Assume](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/Assume.java)仅针对正确的 VM 运行测试：

```
public void test1(){
   // not compiled or tested
   Assume.assumeThat(System.getProperty("java.version"), CoreMatchers.startsWith("1.5"));
   run();
}

public void test2(){
   Assume.assumeThat(System.getProperty("java.version"), CoreMatchers.startsWith("1.7"));
   run();
} 
```

请注意，我没有编译这个，所以可能会有错误。然后，在您的构建工具中，在两个不同的 VM 中运行这些测试两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:24:00.770

JUnit 测试用例只是一堆 Java 类，而不是一个独立的程序。所以它们仍然会被限制在同一个 JVM 中。AFAIK 没有简单的方法可以做你想做的事情。您可以做的是将测试用例分成您要测试的每个 java 版本的测试套件。然后在项目设置中更改 java 版本并运行相应的测试套件。

还有一个 junit.jvm 属性，但我不确定你是否可以在执行过程中更改它。你看过了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-01T09:58:27.253

在 JUnit 5 上，您可以使用`EnabledOnJre`和`DisabledOnJre`注释。

```
 @EnabledOnJre(JRE.JAVA_8)
  void testMyMethodInJava8() {
     ...
  }

  @DisabledOnJre(JRE.JAVA_8)
  void testMyMethodInOtherVersions() {
     ...
  } 
```

您还可以将这些应用于整个测试类：

```
@EnabledOnJre(JRE.JAVA_11)
public class MyClassTest {
   ...
} 
```

您仍然需要为每个 JVM 单独运行测试套件，但这允许您跳过在其中一个或另一个中不起作用的测试。

# facebook - 未捕获的类型错误：无法调用 null 的方法“shift”

> ID：14572288
> 
> 赞同：1
> 
> 时间：2013-01-28T22:20:15.920
> 
> 标签：facebook, facebook-javascript-sdk, requirejs

我只在 Chrome 中收到此消息。Firefox 工作得很好。我一直在调试，试图找出这个错误发生在什么时候，似乎无法确定。确切的消息是 all.js:57 中的“Uncaught TypeError: Cannot call method 'shift' of null”。

另外，我会注意一些其他可能对您有所帮助的事情：

*   我将 SDK 作为 requirejs 模块加载。我也尝试过以“正常方式”加载它，但结果是一样的。
*   它不会在本地发生，仅在我们的登台服务器上发生。这让我觉得它在 SDK 加载期间有一些延迟。
*   它只发生在 Chrome 中。Firefox 和 Safari 一样好用。Safari 中的唯一区别是我看到一个类似的错误，指出这是一个类型问题。那里的消息“'null'不是对象（评估'queue.shift`）”@ debug.js:2712 但它不会破坏应用程序。

这里的任何帮助和/或见解都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T19:45:03.900

重写调用 SDK 脚本对我有帮助。需要调用它，因为它[在 facebook](https://developers.facebook.com/docs/reference/javascript/)上进行了解释。

首先，我尝试使用 id='fasebook-jssdk' 简单地将脚本附加到 head 元素，但是方法 'shift' 发生错误。然后我按照 facebook 的推荐重写了它，没有 FB.init()。但是错误一直在发生，直到我添加了 FB.init() 调用。现在它工作正常。

试图解决它，我发现了一个调试版本的 'all.js'[文件](http://connect.facebook.net/en_US/all/debug.js)，我发现错误出现在以下代码中：

```
function flush() {
  if (!queue) {
    return;
  }

  var fn;
  while (fn = queue.shift()) {
    fn();
  }
  queue = null;
} 
```

其中 queue 是一个函数数组。我不知道原因，但是现在，当脚本正常时，我真的不需要。也许比我更谨慎的人会发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T06:14:35.450

我有一个类似的问题。如果对我来说，这解决了。这些是症状：

1.  本地主机上没有问题
2.  在服务器 (Amazon S3) 上偶尔会出现“未捕获的类型错误：无法调用 null 的方法‘shift’”

解决方案：

我弄乱了 Facebook SDK 的包含顺序和 fbAsyncInit 的处理程序。在包含用于处理 SDK 加载的脚本之后，您应该包含 SDK。否则，SDK 可能会在其加载事件的处理程序注册之前加载。

```
<script src="Your script with fbAsyncInit here"> </script>
   <div id="fb-root"></div>
    <script>(function(d, s, id) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (d.getElementById(id)) return;
      js = d.createElement(s); js.id = id;
      js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=200817623450198";
      fjs.parentNode.insertBefore(js, fjs);
      }(document, 'script', 'facebook-jssdk'));
    </script>
  <div id="fb-root"></div>
  </body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:29:29.167

这些[Facebook 说明](https://developers.facebook.com/docs/reference/javascript/)解释了调用 SDK 的不同方式，这对我有用。我还没有测试过，但我觉得频道文件会让你在本地测试这个，超级甜。

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    // init the FB JS SDK
    FB.init({
      appId      : 'YOUR_APP_ID', // App ID from the App Dashboard
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File for x-domain communication
      status     : true, // check the login status upon init?
      cookie     : true, // set sessions cookies to allow your server to access the session?
      xfbml      : true  // parse XFBML tags on this page?
    });

    // Additional initialization code such as adding Event Listeners goes here

  };

  // Load the SDK's source Asynchronously
  // Note that the debug version is being actively developed and might 
  // contain some type checks that are overly strict. 
  // Please report such bugs using the bugs tool.
  (function(d, debug){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
     ref.parentNode.insertBefore(js, ref);
   }(document, /*debug*/ false));
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T03:50:18.880

抱歉，我可以提供很多帮助，但我有同样的问题，可能有助于解决问题。

像这样加载 JS：

```
<script src='//connect.facebook.net/en_US/all.js'></script> 
```

> “这不是在本地发生的，只在我们的登台服务器上发生。这让我认为它在 SDK 加载期间有一些延迟。”

我倾向于同意。该错误似乎只是偶尔发生。此外，我偶尔会收到 CURLOPT_IPRESOLVE 未定义错误。似乎都与连通性有关。

# ruby - Ruby：生成加起来为另一个数字的随机整数

> ID：14572290
> 
> 赞同：1
> 
> 时间：2013-01-28T22:20:19.560
> 
> 标签：ruby, random

我正在尝试随机生成两个整数，它们相加为先前选择的整数。

例如，如果我有一个先前选择的 值`12`，我需要一个可以生成`[6,6]`、 或`[11,1]`等的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:24:01.940

`a`获取一个介于 0 和您之前选择的值 ( ) 之间的随机数（调用它`sum`）。减去`a`得到。`sum`_ `b`返回`[a, b]`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T22:36:52.883

**编辑**：看到这个[答案](https://stackoverflow.com/a/14572356/640577)

只是为了好玩（我敢肯定它不是100％的底片等......）：

```
class Fixnum
  def rand_sum(n = 2)
    arr = (n - 1).times.reduce([]) do |a, _|
      curr_max = self - a.reduce(0, :+)
      a << rand(0..curr_max)
    end

    arr << self - arr.reduce(0, :+)
  end
end

 11.rand_sum
 => [6, 5] 
 23.rand_sum 3
 => [10, 6, 7] 
 11.rand_sum 3
 => [6, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:31:17.590

生成一个随机整数，然后从给定的数字中减去它。

```
def random_add(sum)
  num = rand(sum)

  [num, sum - num]
end

1.upto 100 do |i|
  p random_add(20)
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T22:27:21.253

尝试：

```
previously_selected = xx
a = rand(previously_selected)
[a, previously_selected-a] 
```

xx 是任意数字。

例子：

```
>> previously_selected = 213
=> 213
>> a = rand(previously_selected)
=> 122
>> [a, previously_selected-a]
=> [122, 91] 
```

谢谢！

# ios - 如何在 iOS6 中向 UITableViewCell 添加自定义图层

> ID：14572293
> 
> 赞同：0
> 
> 时间：2013-01-28T22:20:27.123
> 
> 标签：ios, uitableview, ios6

我有一个带有自定义类的原型单元格，我想在单元格第一次初始化时在单元格上绘制一些额外的层，而不是每次重用单元格时。在过去，我会通过实现 awakeFromNib 来做到这一点。我希望能够访问单元格中视图的框架，以便可以在我的新图层图中使用它们的尺寸，但是对于 iOS6，子视图在 awakeFromNib 方法中的框架宽度/高度都为 0。我怀疑这与我还不太了解的新约束布局有关。

```
- (void)awakeFromNib {
    [super awakeFromNib];
    // We only want to draw this dotted line once
    CGPoint start = CGPointZero;
    CGPoint end = CGPointMake(self.horizontalSeparator.frame.size.width, 0);
    // Category that creates a layer with a dotted line and adds it to the view.
    [self.horizontalSeparator addDottedLine:start to:end];
} 
```

在 awakeFromNib 中，horizo​​ntalSeparator.frame = (0 100; 0 0)。如何为每个单元格绘制一次此虚线图层并使用现有水平分隔符视图的宽度来确定线的长度？

**更新**

我发现我可以使用超级视图上的约束来计算子视图上的尺寸，但我仍然希望有人可以为我指出一个更好的解决方案，它不会对约束配置做出假设。

```
for (NSLayoutConstraint *constraint in self.constraints) {
    if (// Find a constraint for the horizontalSeparator
        (constraint.firstItem == self.horizontalSeparator
         || constraint.secondItem == self.horizontalSeparator)
        && // Make sure it affects the leading or trailing edge.
        (constraint.firstAttribute == NSLayoutAttributeLeading
         || constraint.firstAttribute == NSLayoutAttributeTrailing)) {
               CGFloat margin = constraint.constant;
               CGPoint start = CGPointZero;
               CGPoint end = CGPointMake(self.frame.size.width - (2 * margin), 0);
               [self.horizontalSeparator addDottedLine:start to:end];
               _isInitialized = YES;
               break;
    }
} 
```

# javascript - 如何在 IE 中选择文本？

> ID：14572298
> 
> 赞同：2
> 
> 时间：2013-01-28T22:20:46.093
> 
> 标签：javascript, internet-explorer, getselection

我正在使用以下函数来获取选定的文本，它在所有主要浏览器中运行良好，但在 IE 9 之前的版本中无法正常运行！

```
function getSelected() {
    var t = '';
 if (window.getSelection) {
     t = window.getSelection();
} else if (document.getSelection) {
    t = document.getSelection();
    t = t.toString();
} else if (document.selection) {
    t = document.selection.createRange();
    t = t.text;
}
    return t;
}

var txt = getSelected(); 
```

这里的问题是 IE 在版本 9 之前它不会在变量“txt”中存储任何文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:50:19.667

**演示：http:** [//jsfiddle.net/ytJ35/](http://jsfiddle.net/ytJ35/)

以下内容取自[如何使用 javascript 获取选定的 html 文本？](https://stackoverflow.com/questions/5643635/how-to-get-selected-html-text-with-javascript)

此 javascript 函数适用于 IE7 及更高版本：

```
function getSelected() {
    var text = "";
    if (window.getSelection
    && window.getSelection().toString()
    && $(window.getSelection()).attr('type') != "Caret") {
        text = window.getSelection();
        return text;
    }
    else if (document.getSelection
    && document.getSelection().toString()
    && $(document.getSelection()).attr('type') != "Caret") {
        text = document.getSelection();
        return text;
    }
    else {
        var selection = document.selection && document.selection.createRange();

        if (!(typeof selection === "undefined")
        && selection.text
        && selection.text.toString()) {
            text = selection.text;
            return text;
        }
    }

    return false;
} 
```

在 chrome、IE10、IE6、IE7 中测试

# jquery - 格式化为数组的文件中的文本

> ID：14572299
> 
> 赞同：1
> 
> 时间：2013-01-28T22:20:49.617
> 
> 标签：jquery, arrays

我在一个文件（.txt）中有这样的东西：

```
A[1]=[722680,1,86,121,'Sevilla','Granada CF'....]
A[2]=[807806,29,16516,2007,'Centro Sportivo Paraibano'...] 
```

（格式化为数组的字符串）

我想加载这些行（使用 jquery）并像任何其他数组一样操作它。

前任：

```
if(A[i][16]!="0") G_yellow = "<img src='images/yellow" + A[i][16] +  ".gif' alt='' />"; 
```

我需要一个脚本的想法来做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:23:28.427

使用 eval 执行文件中的 JavaScript：

```
 eval(str);//where str is the file 
```

现在您可以访问文件中定义的变量，并且可以操作数组。

如果您需要代码来检索文件，您可以查看使用 jQuery 的 get 方法[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

```
$.get('test.txt', function(data) {
  eval(data);
}); 
```

注意：在生产服务器上评估原始 JavaScript，并且无法控制文件是一个明确的安全风险

# delphi - 当 ValueColor = clNone 时，TCrossFunction 与 TLineSeries 不一致

> ID：14572300
> 
> 赞同：0
> 
> 时间：2013-01-28T22:20:50.223
> 
> 标签：delphi, delphi-xe, teechart

当绘制其中某些值的 ValueColor 设置为 clNone 的线条系列时，线条将显示为好像这些点不存在或不可见。

但是，当我对同一线系列使用 TCrossFunction 时，它的行为就好像这些点是可见的。

当它们之间的点的 ValueColor 不是 clNone 时，第一个图像显示了由橙色“X”符号指示的交叉点。

![在此处输入图像描述](../Images/24e1ef6d4eb34d6dce547b46b61025cd.png)

此图像显示交叉点仍位于同一位置，即使它们之间的点已将其 ValueColor 属性设置为 clNone。

![在此处输入图像描述](../Images/4b9c6df03dbd74386daf46b0c94eff93.png)

顺便说一句，我确实在绘图之前调用了 CheckDataSource 来刷新交叉点。

如何让交叉点函数尊重 ValueColor 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:58:49.037

就我的目的而言，看起来最简单和最快的解决方案是在将空点 (ValueColor = clNone) 应用于 CrossPoints 函数之前过滤掉它们。

像这样的东西对我有用：

```
function create_non_null_series (series: TChartSeries): TChartSeries;
var
    i: Integer;
begin
    Result := TChartSeries.Create(nil);
    for i := 0 to series.Count-1 do
    begin
        if (not series.IsNull(i)) then
            Result.AddXY(series.XValue[i], series.YValue[i]);
    end;
end; 
```

TChart 中可能有一些内置的东西可以做到这一点，但我还没有找到。

# c# - 使用快速图检测无向图中的循环

> ID：14572303
> 
> 赞同：2
> 
> 时间：2013-01-28T22:20:57.773
> 
> 标签：c#, cycle, depth-first-search, quickgraph

无论如何要检测快速图生成的无向图中的所有循环并打印循环列表。我“google”了一下，我知道可以使用“深度优先搜索算法”检测图中的循环。然后我尝试了这样的事情：

```
var g = new UndirectedGraph<int, TaggedUndirectedEdge<int, int>>();

var e1 = new TaggedUndirectedEdge<int, int>(1, 2, 57);//dem(1, 2, 57).
var e2 = new TaggedUndirectedEdge<int, int>(1, 4, 65);//dem(1, 4, 65).
var e3 = new TaggedUndirectedEdge<int, int>(2, 3, 155);//dem(2, 3, 155). 
var e4 = new TaggedUndirectedEdge<int, int>(2, 4, 129);//dem(2, 4, 129).
var e5 = new TaggedUndirectedEdge<int, int>(3, 4, 78);// dem(3, 4, 78).
var e6 = new TaggedUndirectedEdge<int, int>(3, 5, 200);// dem(3, 5, 200).

g.AddVerticesAndEdge(e1);
g.AddVerticesAndEdge(e2);
g.AddVerticesAndEdge(e3);
g.AddVerticesAndEdge(e4);
g.AddVerticesAndEdge(e5);
g.AddVerticesAndEdge(e6);

var dfs = new UndirectedDepthFirstSearchAlgorithm<int, TaggedUndirectedEdge<int, int>>(g);

dfs.Compute(); 
```

现在我正在寻找一种打印周期的方法。（我不确定我的代码是否正确，这是我第一次处理快速图，甚至是第一次处理一般的图）。

谢谢您的帮助。

# php - MySQL 查询 - 检索仅包含字母和空格的行

> ID：14572304
> 
> 赞同：0
> 
> 时间：2013-01-28T22:20:58.497
> 
> 标签：php, mysql

我想构建一个查询，该查询从 GeoCache 表中返回位置列表，这样我就可以计算出搜索最多的位置。geocache 表充满了来自用户的位置搜索。

我想打折邮政编码和长格式地址，所以我真的只想要字母和空格的搜索，即“曼彻斯特”而不是“1 This Street, Place, Manchester”

我在一个单独的表格中有一个可以匹配的城镇列表，但两者没有直接链接。

我怎样才能最好地检索`geocache_count`符合我的要求的顶级位置列表（我的表有一个列）？

我的表基本上是这样的：

```
geocache_id
geocache_place /* this is where the search ends up */
geocache_lat
geocache_lng
geocache_count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:49:01.503

您可以为此使用正则表达式，但这会慢一些。

```
WHERE `geocache_place` RLIKE '^[[:alnum:]]+$'; 
```

可以通过`ORDER BY`在表达式上添加子句来找到顶部位置，以确定顶部的方式。

# google-chrome-extension - Select2 在 chrome 扩展弹出窗口上无法正常工作

> ID：14572307
> 
> 赞同：2
> 
> 时间：2013-01-28T22:21:20.740
> 
> 标签：google-chrome-extension, angularjs, jquery-select2, angular-ui

我在使用**AngularJS**和 Angular-UI 的 chrome 扩展上遇到了 Select2 的不良行为。

## 场景

Select2 的内容通过 AngularJs $resouces 模块异步加载。

* * *

## 应该发生什么？

当我单击 Select2 时，应显示内容。

* * *

## 实际发生了什么？

当我第一次单击任何 select2 下拉菜单时，它只是眨眼然后隐藏。

* * *

**观察：**
相同的代码在 chrome 的扩展弹出窗口中工作得很好。
您可以在这里看到它的工作原理：http: [//moneynow2.apphb.com](http://moneynow2.apphb.com)。[并且可以在我的 github 存储库](https://github.com/alanrsoares/MoneyNow2/tree/master/MoneyNow2.Chrome)
中浏览代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:42:53.730

我的在 Chrome 扩展中工作正常，但我得到“*拒绝执行内联事件处理程序，因为它违反了以下内容安全策略指令：“default-src 'self' chrome-extension-resource:”。请注意，'script-src ' 没有明确设置，所以 'default-src' 用作后备。* ” 在 chrome 控制台中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:07:24.550

这真的很难测试。

看起来像在弹出窗口中，当我打开下拉菜单时，路由被重新加载（整个控制器和 ng-view 的内容重新加载）。这不会发生在网页上。我以为弹出窗口出现在右下角，伸出窗口（它发生在我穿过它时）。当这种情况发生时，我认为它可能触发了一个实际上导致 select2 消失的窗口滚动事件（这是 select2 的一个功能，可以防止下拉菜单停留在某个随机位置，因为它是 pos:fixed）。

我对 chrome 弹出窗口也不太了解，无法弄清楚哪些事件可能导致“url”更改或触发滚动事件等。

起初我会建议做 selectOptions = { data: $myResource.query() } 之类的，但我开始认为它没有帮助。

### 建议：

尝试删除路由器，看看会发生什么。我真的不知道您应该在 chrome 扩展程序中使用它。在这么小的空间里，代码越少越好。

# php - 在 PHP 中，如何将对象元素添加到数组中？

> ID：14572313
> 
> 赞同：57
> 
> 时间：2013-01-28T22:21:47.947
> 
> 标签：php, arrays, object

我正在使用 PHP。我有一个对象数组，并想在它的末尾添加一个对象。

```
$myArray[] = null; //adds an element
$myArray[count($myArray) - 1]->name = "my name"; //modifies the element I just added 
```

以上是功能性的，但是是否有一种更简洁、更易读的方式来编写它？也许是一条线？

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-28T22:34:49.473

做就是了：

```
$object = new stdClass();
$object->name = "My name";
$myArray[] = $object; 
```

您需要先创建对象（`new`线），然后将其推到数组的末端（`[]`线）。

你也可以这样做：

```
$myArray[] = (object) ['name' => 'My name']; 
```

然而，我认为这不是那么可读，即使它更简洁。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2019-02-09T06:49:08.200

这是我发现的一个干净的方法：

```
$myArray = [];

array_push($myArray, (object)[
        'key1' => 'someValue',
        'key2' => 'someValue2',
        'key3' => 'someValue3',
]);

return $myArray; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-28T22:43:15.720

你真的需要一个对象吗？关于什么：

```
$myArray[] = array("name" => "my name"); 
```

只需使用二维数组。

输出（var_dump）：

```
array(1) {
  [0]=>
  array(1) {
    ["name"]=>
    string(7) "my name"
  }
} 
```

您可以像这样访问您的最后一个条目：

```
echo $myArray[count($myArray) - 1]["name"]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-28T22:56:47.067

就像是：

```
class TestClass {
private $var1;
private $var2;

private function TestClass($var1, $var2){
    $this->var1 = $var1;
    $this->var2 = $var2;
}

public static function create($var1, $var2){
    if (is_numeric($var1)){
        return new TestClass($var1, $var2);
    }
    else return NULL;
}
}

$myArray = array();
$myArray[] = TestClass::create(15, "asdf");
$myArray[] = TestClass::create(20, "asdfa");
$myArray[] = TestClass::create("a", "abcd");

print_r($myArray);

$myArray = array_filter($myArray, function($e){ return !is_null($e);});

print_r($myArray); 
```

我认为在某些情况下，这种结构比数组更可取。您可以将所有检查逻辑移至该类。

在这里，在调用 array_filter *$myArray*之前有 3 个元素。两个正确的对象和一个 NULL。调用后，只有 2 个正确的元素仍然存在。

# java - 将 BufferedReader 放在另一个用于从输入文件中检索数据的函数中是否明智？

> ID：14572316
> 
> 赞同：2
> 
> 时间：2013-01-28T22:21:58.853
> 
> 标签：java

我正在学习如何分解我的代码，所以我认为创建一个仅用于从输入文件中检索字符的函数会很好。这就是我的想法：

```
 public char getChar( String infile )
    {
       try
       {
           BufferedReader in = new BufferedReader( new FileReader( infile ));
           int ch = in.read();
           // do some decision making
           return (char)ch;
       }
       catch( IOException e )
       {
           System.out.println( e.getMessage() );
           System.exit(1);
       } 
     } 
```

然后在构造函数或其他函数中，我可以像这样使用它：

```
 public constructor( String infile )
    {
        char newChar = getChar( infile ); 
        // some lines of codes later.. need another character
        newChar = getChar( infile );
    } 
```

PS我没有测试这些代码，所以它可能包含这样的错误，但我希望我的想法是可以理解的。

请告诉我这是一个好主意还是坏主意，或者这种分解可以以不同的方式完成。感谢您的阅读。

编辑：是的，我确实希望 BufferedReader 获得下一个字符。而不是重新开始
例如：infile 包含这样的字符串：“ABC”
thisShouldBeA = getChar(infile);
thisSoundBeB = getChar(inflie);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:34:19.830

```
class Helper {
  private BufferedReader in;

  Helper(String infile) {
    this.in = new BufferedReader(new FileReader(infile));
  }

  char getChar() {
    try {
      return in.read();
    } catch (IOException e) {
       System.out.println( e.getMessage() );
       System.exit(1);
    }
  }

  void close() {
    this.in.close();
  }
}

class Other {
  void something(String infile) {
    Helper helper = new Helper(infile);
    char newChar = helper.getChar();
    char anotherNewChar = helper.getChar();

    helper.close();
   }
} 
```

# asp.net-mvc - 使用 MVC2 对搜索结果进行分页

> ID：14572319
> 
> 赞同：1
> 
> 时间：2013-01-28T22:22:07.923
> 
> 标签：asp.net-mvc, asp.net-mvc-2, pagination

有没有简单的方法来做到这一点？我有搜索工作......我有分页工作但不在一起

所以对我来说最简单的方法似乎只是缓存搜索结果，然后将控制器中的该集合作为要分页的集合。这有意义吗？

或者我应该如何从高层次上解决这个问题？（我来自 10 年的 ASP.NET 网络表单）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:33:24.023

缓存搜索结果提高了对结果数据进行分页的性能，但会消耗内存。如果搜索由多个用户完成，您需要为每个用户缓存搜索结果。根据要保存在内存中的潜在数据量，这可能可行，也可能不可行。（这种缓存应该在滑动/绝对过期的情况下短时间完成。）

每次需要为当前结果页面提供数据时进行搜索会产生更高的 CPU 负载，但不会在请求之间消耗内存。当然，对页面数据的请求必须携带搜索参数，这样才能重做搜索。

这是在 CPU 或内存上施加更多压力之间的通常折衷方案，由您决定选择什么。我会以较短的滑动过期时间（1 分钟）缓存结果，并且如果缓存的结果不存在，仍然可以确保可以再次执行搜索。

# c# - 在运行时确定占位符的类型 c#

> ID：14572321
> 
> 赞同：0
> 
> 时间：2013-01-28T22:22:10.973
> 
> 标签：c#, .net, generics, methods

```
public void compare<T>(T someobject)
{
  .....
  .....
} 
```

现在我想`T`在运行时确定类型并根据它进行不同的操作。我试过使用`typeof`但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:27:02.810

typeof 在运行时应该可以正常工作。

```
 public void compare<T>(T someobject)
    {
        if (typeof(T) == typeof(int))
        {
            // do stuff
        }
        else if (typeof(T) == typeof(something else))
        {
            // do other stuff
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:31:58.923

`is`可用于检查参数类型

```
if (someobject is SomeType)//... 
```

或者，另一种...

```
 Type constructedType = typeof(T);
        if (constructedType == typeof(SomeType))//... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T22:30:49.153

可以尝试

```
typeof(T) == typeof(desiredType) 
```

例如：

```
typeof(T) == typeof(int) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T22:38:24.690

```
 if (someobj.GetType() == typeof(ClassA)) { /* do opertion */}, 
```

# javascript - WP8 上的剑道 UI 拖动事件

> ID：14572324
> 
> 赞同：2
> 
> 时间：2013-01-28T22:22:17.280
> 
> 标签：javascript, jquery, css, html, kendo-ui

我无法在我的 WP8 上覆盖 KendoUI dataviz 拖动事件。从图表本身拖动时，结果无法滚动页面。

到目前为止，我已经尝试使用 in，

1)

```
 $("#<%= id %>").kendoChart({ 
            dragStart: function(e) {e.preventDefault();},
            drag: function(e) {e.preventDefault();},
            dragEnd: function(e) {e.preventDefault();},
            zoomStart: function(e) {e.preventDefault();},
            zoom: function(e) {e.preventDefault();},
            zoomEnd: function(e) {e.preventDefault();},
            seriesClick: function(e) {e.preventDefault();},
            seriesHover: function(e) {e.preventDefault();}
...
}); 
```

它适用于 iphone、ipad 等其他触摸设备，但不适用于 WP8。

2）然后我尝试在父 DIV 上使用 jquery 覆盖事件。父级点击（）。parent.hover() 和 unbind() 所有事件都没有帮助。

[3) 使用如何使用 CSS 使区域不可点击](https://stackoverflow.com/questions/775215/how-do-i-make-an-area-unclickable-with-css)来覆盖 div 标签？. 似乎 z-index 在 IE10 上不起作用。

4) 尝试将 e.stopPropagation 与 e.preventDefault 一起使用，但这也无济于事。

5）还尝试了另一个答案的另一种解决方案，

```
svg {
   pointer-events: none;
} 
```

我对 WP8 上的 IE10 感到沮丧。任何人都可以针对此问题提出其他解决方法吗？我欠你一个。

# objective-c - 在 NSFetchedResultsController 上调用 dealloc 时内存未释放

> ID：14572329
> 
> 赞同：0
> 
> 时间：2013-01-28T22:22:27.133
> 
> 标签：objective-c, core-data, memory-leaks, dealloc

我正在尝试在我的代码（2.5mb）中调试内存泄漏，它似乎指向 _ `prepareResultsFromResultSet`within `NSFetchedResultsController`。我有 2 个视图控制器（A 和 B），视图控制器 B 从视图控制器 A 推送到导航控制器。

在 BI 中执行如下 `NSFetchRequest`使用： **.h**`NSFetchedResultsController`

 **```
@property (nonatomic, retain) NSFetchedResultsController *fetchedResultsController;
@property (nonatomic, retain) NSString *sMapSlug;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andMapSlug: (NSString *)slug; 
```

**.m**

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andMapSlug: (NSString *)slug
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        self.sMapSlug = [NSString stringWithString:slug];
    }
    return self;
}
- (NSFetchedResultsController *)fetchedResultsController {

    if (_fetchedResultsController != nil)
        return _fetchedResultsController;

    Singleton *singleton = [Singleton sharedSingleton];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"DescriptionEntity" inManagedObjectContext:[singleton managedObjectContext]];
    [fetchRequest setEntity:entity];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"map.sName" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];
    NSPredicate *myPredicate = [NSPredicate predicateWithFormat:@"map.sSlug LIKE %@", self.sMapSlug];
    [fetchRequest setFetchBatchSize:8];
    [fetchRequest setPredicate:myPredicate];

    // Finally check the results
    NSError *error;
    NSArray *fetchedObjects = [[singleton managedObjectContext] executeFetchRequest:fetchRequest error:&error];
    for (DescriptionEntity *desc in fetchedObjects)
    {
        NSLog(@"Maps present in database: %@", desc.map.sName);
    }        

    NSFetchedResultsController *theFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[singleton managedObjectContext] sectionNameKeyPath:nil cacheName:@"Test1"];
    self.fetchedResultsController = theFetchedResultsController;
    self.fetchedResultsController.delegate = self;
    //[self.fetchedResultsController performFetch:NULL];
    [theFetchedResultsController release];
    [fetchRequest release];
    [sort release];

    return _fetchedResultsController;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    [self.fetchedResultsController fetchRequest];
} 
```

使用 fetchRequest 可以很好地加载所有内容，如果需要，我可以访问我的数据，但是我现在已经把它拿出来了，所以我知道没有任何数据`NSFetchedRequestController`正在被使用。当我返回导航堆栈时，将调用控制器 B 的 dealloc，然后执行以下操作：

```
- (void)dealloc {
    self.fetchedResultsController.delegate = nil;
    [_fetchedResultsController release];
    [sMapSlug release];

    [super dealloc];
} 
```

当我在 Instruments 中对此进行大量拍摄时，我看到在调用 dealloc 后保留以下数据：

![在此处输入图像描述](../Images/65178992b4c5825a60cac079fee85a78.png)

如果我再次回到控制器 B，则会添加另一组此内存并且永远不会删除。但是，如果我第三次这样做，金额不会增加。我假设正在进行某种缓存，谁能告诉我如何删除这些数据或如何正确释放`NSFetchedResultsController`.

如果您需要更多信息，请随时询问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:40:00.613

通常你不应该担心 Core Data 中的内存管理。是的，在底层涉及缓存机制。

无论如何，有两种不同的方法可以“消除”内存。

首先是`refreshObject:mergeChanges:`方法。传递给它`NO`，它允许修剪对象图。换句话说，它会丢弃任何尚未保存到存储中的更改数据。

覆盖`willTurnIntoFault`并`didTurnIntoFault`查看它的实际效果。

另一种是调用`reset`托管上下文。显然，这会删除上下文包含的所有对象。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:13:46.490

你永远不应该自己调用 dealloc，即使是在你自己的对象上。这是系统自己做的事情。**

# c# - 实体框架将对象从一个上下文传递到另一个

> ID：14572331
> 
> 赞同：14
> 
> 时间：2013-01-28T22:22:47.930
> 
> 标签：c#, multithreading, entity-framework

我是实体框架的新手，所以请多多包涵。

我有一个程序，我想从表中选择多条记录并将其存储在队列中：

```
private Queue<RecordsToProcess> getRecordsToProcess()
{
    Queue<RecordsToProcess> results = new Queue<RecordsToProcess>();
    using (MyEntity context = new MyEntity())
    {
        var query = from v in context.RecordsToProcess
                            where v.Processed == false
                            select v;

        foreach (RecordsToProcess record in query)
        {
            results.Enqueue(record);
        }
    }
} 
```

然后我启动多个工作线程。每个工作线程获取队列中的一项，对其进行处理，然后将其保存到数据库中。

```
private void processWorkerThread(object stateInfo)
{
    while (workQueue.Count > 0)
    {
        RecordToProcess record = new RecordToProcess;
        lock(workQueue)
        {
            if (workQueue.Count > 0)
                RecordToProcess = workQueue.Dequeue();
            else
                break;
        }

        //Do the record processing here

        //How do I save that record here???
    }
} 
```

我的理解是，要将更改保存回数据库，您只需调用 context.SaveChanges() 但在这种情况下我不能这样做，可以吗？

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T22:47:20.663

由于您`MyEntity`在第一种方法中处理上下文（通过将其包装在`using`语句中），因此入队的实体将处于“分离”状态。这意味着，除其他外，不会跟踪对实体所做的更改，并且您将无法延迟加载导航属性。

将这些实体出列，将它们“附加”到不同的上下文，更新它们，然后调用`SaveChanges`以保持更改是非常好的。

您可以阅读有关[附加和分离对象](https://msdn.microsoft.com/en-us/library/bb896271(v=vs.110).aspx)以及[添加/附加和实体状态的信息](http://msdn.microsoft.com/en-us/data/jj592676.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:47:00.347

如果您将主键保存在队列中并再次检索实体可能会更安全。这样，您更有可能避免任何数据并发问题。

# java - 如何以编程方式在电子邮件中发送 lotusscript？

> ID：14572333
> 
> 赞同：3
> 
> 时间：2013-01-28T22:22:59.940
> 
> 标签：java, lotus-notes, lotusscript

我正在尝试从 Web 应用程序（Java EE）以编程方式生成 lotusscript（以可编写脚本按钮的形式）并将其发送给最终用户，最终用户将在他/她的 Lotus Notes 客户端中运行它。

我怎样才能做到这一点？我是否可以使用 API 将 lotusscript 嵌入到电子邮件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:48:55.677

这是一个想法。我还没有尝试过，也不确定它是否会起作用：

1.  在 Domino Designer 中使用 LotusScript 按钮创建表单并设置为存储在文档中
2.  使用该表单创建文档
3.  将文档导出为 DXL (Domino XML)
4.  在您的 Java EE 应用程序中使用**ncso.jar**导入 DXL（您可以根据需要先修改 XML 中的 LotusScript）
5.  使用电子邮件发送文档`Document.send()`。当使用 CORBA/IIOP 连接到 Domino 服务器时，我认为这应该可以工作。

**更新**

您也许可以跳过 DXL 部分，只修改文档项中的 LotusScript。我知道您必须为每个收件人修改 LotusScript。如果不是，那么一切都会容易得多（见理查兹的回答）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T00:28:39.080

我不会尝试嵌入按钮，而是考虑利用 Notes 的“在文档中存储表单”功能。

即，使用 Domino Designer 我将手动创建一个数据库（为方便起见，我将其称为“MyDb.nsf”）。在此数据库中创建一个表单（为方便起见，“MyForm”）并使用电子邮件消息的必填字段（SendTo、主题、正文等）对其进行设置。然后在表单上创建一个按钮并输入 LotusScript 代码。

提前完成此操作后，您的代码可以利用`attachForm`Document.send() 方法中的可选参数。

您要做的是以通常的方式打开 MyDb.nsf，然后使用`Database.createDocument()`在该数据库中创建您的文档，然后使用`Document.ReplaceItemValue("Form","MyForm")`将此文档绑定到您的表单。还可以根据需要设置其他项目（例如，Subject、SendTo、Body），并在完成后调用`Document.send(true)`。这会将您的表单嵌入到文档中并发送，因此 LotusScript 代码将在与消息一起发送的嵌入表单中传播。

我认为这对您来说可能是最好的方法，因为我认为这将在嵌入表单时保留表单上的签名。我不确定，但另一方面我更确定使用 CORBA/IIOP 发送的任何其他方式都会给你一个未签名的脚本（因为 CORBA/IIOP 无法访问签名所需的私钥文件）。未签名的脚本意味着您的用户在执行它时会收到 ECL 警告——这可能导致他们在 ECL 中添加一个条目以允许未签名的脚本，这是一种糟糕的安全做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T15:50:17.943

Another option is to embed a URL to open a Page design element with your code (or a call to the agent) in the QueryOpen, so it runs when the page opens.

```
Notes://myserver.mycompany.com/utilities.nsf/MyTaskLauncher?OpenPage 
```

I'm not sure if it could pass parameter values or if you have to rely on the user's credentials to determine the proper information.

Advantages:

1.  Code resides in one location, so I can update it if I find out there was a bug in the original version.
2.  Minimal manipulation of the user's mail file with stored forms.
3.  Smaller email message, since I don't have to send along form information.
4.  Easier to build a simple string in Java EE than the higher-powered solutions.
5.  The agent can either use the signing ID or run with the user's credentials.
6.  Can be sent to any email address, so long as the recipient has a Notes client.

# postgresql - 链接到 PostgreSQL 数据库之外的文件

> ID：14572339
> 
> 赞同：0
> 
> 时间：2013-01-28T22:23:19.587
> 
> 标签：postgresql

一个愚蠢的新手问题：我想制作一个 PostgreSQL（9.2.2 和 PostGIS 2.0.1；在 32 位 Windows XP 上）数据库，栅格保存在数据库外部（我需要从数据库外部访问栅格，它们不会经常上传/迁移，因此一致性不是问题）。我的问题是：我不知道如何创建到栅格的链接（来自带有元数据的数据库），而且我没有找到任何可以理解的内容。

我发现了一些关于[data wrappers](http://www.postgresql.org/docs/9.2/static/sql-createforeigndatawrapper.html)的东西，但它们似乎适用于具有表结构的数据，而不是像栅格这样的文件。DATALINK 似乎更好，但恐怕情况相同，而且我不确定我是否了解如何使用它。在一些讨论中，我发现提到了符号链接，但这些似乎是基于 Unix 的，并且可能只是模糊相关。

我确信它一定很简单，但我自己没有设法解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:18:45.153

数据库不提供链接外部对象的可能性。

我至少可以想到两种方法：

1.  将某个元数据表中文件的完整路径保存为属性或类型之一`text`。但是，不要使用它来连接查询中的表，出于性能原因，使用内部数字类型的人工键（如`integer`or `bigint`）是更好的选择；
2.  根据数据库中的数字键命名您的光栅文件。这种方法有一个缺点——没有数据库，您将无法获得有关文件的任何有用信息。

进一步的路径取决于系统的复杂性和选择的优化技术。

# vb.net - 在调试中包含项目引用

> ID：14572340
> 
> 赞同：0
> 
> 时间：2013-01-28T22:23:22.563
> 
> 标签：vb.net, visual-studio-2010, reference

我建立了一个在线登录程序，它连接到我的在线 MySQL 数据库。在我的应用程序中，我使用 MySQL.Data 文件作为参考，因为程序需要该文件来连接到在线 MySQL 服务器。现在我的问题；当我从 'C:\Users\User\Documents\Visual Studio 2010\Projects\MYPROJECT\MYPROJECT\bin\Debug' 获取我的程序并将该文件复制到另一台完全不同的计算机时，我收到一条错误消息，指出 MySQL.数据文件丢失。我想知道如何在我的项目编译中包含 MySQL.Data 文件。如果您需要更多详细信息，我很乐意提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:28:57.540

在项目的解决方案资源管理器中，您有点*References*，它`MySql.Data.dll`应该出现在哪里。右键单击它并选择*Properties*，并在 Properties 中确保*Copy Local*设置为`True`。

然后，该`MySql.Data.dll`文件将始终复制到您的`bin/Debug`文件夹中。

如果你部署你的程序，你也必须复制那个 dll。然后一切都将在另一台计算机上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:27:46.080

您可以构建一个安装项目（安装程序），或使用您的 exe 复制 mysql.data.dll 文件（基本上是 bin/{config} 目录中的所有内容）。

# java - ActiveMQ，Broker Url：如何在默认 61616 以外的端口号上运行

> ID：14572344
> 
> 赞同：1
> 
> 时间：2013-01-28T22:23:41.213
> 
> 标签：java, spring, activemq

我正在尝试在端口号 5000 上运行，tcp://localhost:5000

它显示以下错误

警告：无法刷新目标“queue://jmsExample”的 JMS 连接 - 5000 毫秒后重试。原因：无法连接到代理 URL：tcp://localhost:5000。原因：java.net.ConnectException：连接被拒绝：连接

请提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:25:36.760

端口 5000 已被另一个进程或服务使用

# select - Jeditable > 多项选择 > 无法返回多个“选定”值

> ID：14572350
> 
> 赞同：1
> 
> 时间：2013-01-28T22:23:53.877
> 
> 标签：select, multi-select, jeditable, selected

我已经成功设置了一个从我的“multiselect_json.php”文件中动态填充的多选框。（这里的多选插件：[https](https://github.com/nicholasryan/jquery_jeditable/commit/1055cf6d51100d241b1e089c8cabcbad26207320) ://github.com/nicholasryan/jquery_jeditable/commit/1055cf6d51100d241b1e089c8cabcbad26207320 ）

我的问题是我只能返回 1 个标记为“已选择”的值对

例子：

我的下拉选项如下： 1-product1 2-product2 3-product3

数组（'选择'）= 1；有效并正确突出显示此选项

但是当我指定 2 个选定选项时不起作用

数组（'选择'）= 1；

数组（'选择'）= 2；

在这种情况下，使用最后一个“选定”值 (2)，而忽略前一个“选定”值 (1)。

这意味着如果在特定的多选列表中有许多预选项目，那么用户很难记住之前选择的内容，并且必须返回并重新选择之前手动选择的内容。

有谁知道如何使用 jeditable 插件为我的多选框传递多个“选定”值对？

**jquery.jeditable.js**

（函数（$）{

```
$.fn.editable = function(target, options) {

    if ('disable' == target) {
        $(this).data('disabled.editable', true);
        return;
    }
    if ('enable' == target) {
        $(this).data('disabled.editable', false);
        return;
    }
    if ('destroy' == target) {
        $(this)
            .unbind($(this).data('event.editable'))
            .removeData('disabled.editable')
            .removeData('event.editable');
        return;
    }

    var settings = $.extend({}, $.fn.editable.defaults, {target:target}, options);

    /* setup some functions */
    var plugin   = $.editable.types[settings.type].plugin || function() { };
    var submit   = $.editable.types[settings.type].submit || function() { };
    var buttons  = $.editable.types[settings.type].buttons 
                || $.editable.types['defaults'].buttons;
    var content  = $.editable.types[settings.type].content 
                || $.editable.types['defaults'].content;
    var element  = $.editable.types[settings.type].element 
                || $.editable.types['defaults'].element;
    var reset    = $.editable.types[settings.type].reset 
                || $.editable.types['defaults'].reset;
    var callback = settings.callback || function() { };
    var onedit   = settings.onedit   || function() { }; 
    var onsubmit = settings.onsubmit || function() { };
    var onreset  = settings.onreset  || function() { };
    var onerror  = settings.onerror  || reset;

    /* Show tooltip. */
    if (settings.tooltip) {
        $(this).attr('title', settings.tooltip);
    }

    settings.autowidth  = 'auto' == settings.width;
    settings.autoheight = 'auto' == settings.height;

    return this.each(function() {

        /* Save this to self because this changes when scope changes. */
        var self = this;  

        /* Inlined block elements lose their width and height after first edit. */
        /* Save them for later use as workaround. */
        var savedwidth  = $(self).width();
        var savedheight = $(self).height();

        /* Save so it can be later used by $.editable('destroy') */
        $(this).data('event.editable', settings.event);

        /* If element is empty add something clickable (if requested) */
        if (!$.trim($(this).html())) {
            $(this).html(settings.placeholder);
        }

        $(this).bind(settings.event, function(e) {

            /* Abort if element is disabled. */
            if (true === $(this).data('disabled.editable')) {
                return;
            }

            /* Prevent throwing an exeption if edit field is clicked again. */
            if (self.editing) {
                return;
            }

            /* Abort if onedit hook returns false. */
            if (false === onedit.apply(this, [settings, self])) {
               return;
            }

            /* Prevent default action and bubbling. */
            e.preventDefault();
            e.stopPropagation();

            /* Remove tooltip. */
            if (settings.tooltip) {
                $(self).removeAttr('title');
            }

            /* Figure out how wide and tall we are, saved width and height. */
            /* Workaround for http://dev.jquery.com/ticket/2190 */
            if (0 == $(self).width()) {
                settings.width  = savedwidth;
                settings.height = savedheight;
            } else {
                if (settings.width != 'none') {
                    settings.width = 
                        settings.autowidth ? $(self).width()  : settings.width;
                }
                if (settings.height != 'none') {
                    settings.height = 
                        settings.autoheight ? $(self).height() : settings.height;
                }
            }

            /* Remove placeholder text, replace is here because of IE. */
            if ($(this).html().toLowerCase().replace(/(;|"|\/)/g, '') == 
                settings.placeholder.toLowerCase().replace(/(;|"|\/)/g, '')) {
                    $(this).html('');
            }

            self.editing    = true;
            self.revert     = $(self).html();
            $(self).html('');

            /* Create the form object. */
            var form = $('<form />');

            /* Apply css or style or both. */
            if (settings.cssclass) {
                if ('inherit' == settings.cssclass) {
                    form.attr('class', $(self).attr('class'));
                } else {
                    form.attr('class', settings.cssclass);
                }
            }

            if (settings.style) {
                if ('inherit' == settings.style) {
                    form.attr('style', $(self).attr('style'));
                    /* IE needs the second line or display wont be inherited. */
                    form.css('display', $(self).css('display'));                
                } else {
                    form.attr('style', settings.style);
                }
            }

            /* Add main input element to form and store it in input. */
            var input = element.apply(form, [settings, self]);

            /* Set input content via POST, GET, given data or existing value. */
            var input_content;

            if (settings.loadurl) {
                var t = setTimeout(function() {
                    input.disabled = true;
                    content.apply(form, [settings.loadtext, settings, self]);
                }, 100);

                var loaddata = {};
                loaddata[settings.id] = self.id;
                if ($.isFunction(settings.loaddata)) {
                    $.extend(loaddata, settings.loaddata.apply(self, [self.revert, settings]));
                } else {
                    $.extend(loaddata, settings.loaddata);
                }
                $.ajax({
                   type : settings.loadtype,
                   url  : settings.loadurl,
                   data : loaddata,
                   async : false,
                   success: function(result) {
                      window.clearTimeout(t);
                      input_content = result;
                      input.disabled = false;
                   }
                });
            } else if (settings.data) {
                input_content = settings.data;
                if ($.isFunction(settings.data)) {
                    input_content = settings.data.apply(self, [self.revert, settings]);
                }
            } else {
                input_content = self.revert; 
            }
            content.apply(form, [input_content, settings, self]);

            input.attr('name', settings.name);

            /* Add buttons to the form. */
            buttons.apply(form, [settings, self]);

            /* Add created form to self. */
            $(self).append(form);

            /* Attach 3rd party plugin if requested. */
            plugin.apply(form, [settings, self]);

            /* Focus to first visible form element. */
            $(':input:visible:enabled:first', form).focus();

            /* Highlight input contents when requested. */
            if (settings.select) {
                input.select();
            }

            /* discard changes if pressing esc */
            input.keydown(function(e) {
                if (e.keyCode == 27) {
                    e.preventDefault();
                    reset.apply(form, [settings, self]);
                }
            });

            /* Discard, submit or nothing with changes when clicking outside. */
            /* Do nothing is usable when navigating with tab. */
            var t;
            if ('cancel' == settings.onblur) {
                input.blur(function(e) {
                    /* Prevent canceling if submit was clicked. */
                    t = setTimeout(function() {
                        reset.apply(form, [settings, self]);
                    }, 500);
                });
            } else if ('submit' == settings.onblur) {
                input.blur(function(e) {
                    /* Prevent double submit if submit was clicked. */
                    t = setTimeout(function() {
                        form.submit();
                    }, 200);
                });
            } else if ($.isFunction(settings.onblur)) {
                input.blur(function(e) {
                    settings.onblur.apply(self, [input.val(), settings]);
                });
            } else {
                input.blur(function(e) {
                  /* TODO: maybe something here */
                });
            }

            form.submit(function(e) {

                if (t) { 
                    clearTimeout(t);
                }

                /* Do no submit. */
                e.preventDefault(); 

                /* Call before submit hook. */
                /* If it returns false abort submitting. */                    
                if (false !== onsubmit.apply(form, [settings, self])) { 
                    /* Custom inputs call before submit hook. */
                    /* If it returns false abort submitting. */
                    if (false !== submit.apply(form, [settings, self])) { 

                      /* Check if given target is function */
                      if ($.isFunction(settings.target)) {
                          var str = settings.target.apply(self, [input.val(), settings]);
                          $(self).html(str);
                          self.editing = false;
                          callback.apply(self, [self.innerHTML, settings]);
                          /* TODO: this is not dry */                              
                          if (!$.trim($(self).html())) {
                              $(self).html(settings.placeholder);
                          }
                      } else {
                          /* Add edited content and id of edited element to POST. */
                          var submitdata = {};
                          submitdata[settings.name] = input.val();
                          submitdata[settings.id] = self.id;
                          /* Add extra data to be POST:ed. */
                          if ($.isFunction(settings.submitdata)) {
                              $.extend(submitdata, settings.submitdata.apply(self, [self.revert, settings]));
                          } else {
                              $.extend(submitdata, settings.submitdata);
                          }

                          /* Quick and dirty PUT support. */
                          if ('PUT' == settings.method) {
                              submitdata['_method'] = 'put';
                          }

                          /* Show the saving indicator. */
                          $(self).html(settings.indicator);

                          /* Defaults for ajaxoptions. */
                          var ajaxoptions = {
                              type    : 'POST',
                              data    : submitdata,
                              dataType: 'html',
                              url     : settings.target,
                              success : function(result, status) {
                                  if (ajaxoptions.dataType == 'html') {
                                    $(self).html(result);
                                  }
                                  self.editing = false;
                                  callback.apply(self, [result, settings]);
                                  if (!$.trim($(self).html())) {
                                      $(self).html(settings.placeholder);
                                  }
                              },
                              error   : function(xhr, status, error) {
                                  onerror.apply(form, [settings, self, xhr]);
                              }
                          };

                          /* Override with what is given in settings.ajaxoptions. */
                          $.extend(ajaxoptions, settings.ajaxoptions);   
                          $.ajax(ajaxoptions);          

                        }
                    }
                }

                /* Show tooltip again. */
                $(self).attr('title', settings.tooltip);

                return false;
            });
        });

        /* Privileged methods */
        this.reset = function(form) {
            /* Prevent calling reset twice when blurring. */
            if (this.editing) {
                /* Before reset hook, if it returns false abort reseting. */
                if (false !== onreset.apply(form, [settings, self])) { 
                    $(self).html(self.revert);
                    self.editing   = false;
                    if (!$.trim($(self).html())) {
                        $(self).html(settings.placeholder);
                    }
                    /* Show tooltip again. */
                    if (settings.tooltip) {
                        $(self).attr('title', settings.tooltip);                
                    }
                }                    
            }
        };            
    });

};

$.editable = {
    types: {
        defaults: {
            element : function(settings, original) {
                var input = $('<input type="hidden"></input>');                
                $(this).append(input);
                return(input);
            },
            content : function(string, settings, original) {
                $(':input:first', this).val(string);
            },
            reset : function(settings, original) {
              original.reset(this);
            },
            buttons : function(settings, original) {
                var form = this;
                if (settings.submit) {
                    /* If given html string use that. */
                    if (settings.submit.match(/>$/)) {
                        var submit = $(settings.submit).click(function() {
                            if (submit.attr("type") != "submit") {
                                form.submit();
                            }
                        });
                    /* Otherwise use button with given string as text. */
                    } else {
                        var submit = $('<button type="submit" />');
                        submit.html(settings.submit);                            
                    }
                    $(this).append(submit);
                }
                if (settings.cancel) {
                    /* If given html string use that. */
                    if (settings.cancel.match(/>$/)) {
                        var cancel = $(settings.cancel);
                    /* otherwise use button with given string as text */
                    } else {
                        var cancel = $('<button type="cancel" />');
                        cancel.html(settings.cancel);
                    }
                    $(this).append(cancel);

                    $(cancel).click(function(event) {
                        if ($.isFunction($.editable.types[settings.type].reset)) {
                            var reset = $.editable.types[settings.type].reset;                                                                
                        } else {
                            var reset = $.editable.types['defaults'].reset;                                
                        }
                        reset.apply(form, [settings, original]);
                        return false;
                    });
                }
            }
        },
        text: {
            element : function(settings, original) {
                var input = $('<input />');
                if (settings.width  != 'none') { input.attr('width', settings.width);  }
                if (settings.height != 'none') { input.attr('height', settings.height); }
                /* https://bugzilla.mozilla.org/show_bug.cgi?id=236791 */
                //input[0].setAttribute('autocomplete','off');
                input.attr('autocomplete','off');
                $(this).append(input);
                return(input);
            }
        },
        textarea: {
            element : function(settings, original) {
                var textarea = $('<textarea />');
                if (settings.rows) {
                    textarea.attr('rows', settings.rows);
                } else if (settings.height != "none") {
                    textarea.height(settings.height);
                }
                if (settings.cols) {
                    textarea.attr('cols', settings.cols);
                } else if (settings.width != "none") {
                    textarea.width(settings.width);
                }
                $(this).append(textarea);
                return(textarea);
            }
        },
        select: {
           element : function(settings, original) {
                var select = $('<select />');
                $(this).append(select);
                return(select);
            },
            content : function(data, settings, original) {
                /* If it is string assume it is json. */
                if (String == data.constructor) {      
                    eval ('var json = ' + data);
                } else {
                /* Otherwise assume it is a hash already. */
                    var json = data;
                }
                for (var key in json) {
                    if (!json.hasOwnProperty(key)) {
                        continue;
                    }
                    if ('selected' == key) {
                        continue;
                    } 
                    var option = $('<option />').val(key).append(json[key]);
                    $('select', this).append(option);    
                }                    
                /* Loop option again to set selected. IE needed this... */ 
                $('select', this).children().each(function() {
                    if ($(this).val() == json['selected'] || 
                        $(this).text() == $.trim(original.revert)) {
                            $(this).attr('selected', 'selected');
                    }
                });
                /* Submit on change if no submit button defined. */
                if (!settings.submit) {
                    var form = this;
                    $('select', this).change(function() {
                        form.submit();
                    });
                }
            }
        },
             selectmulti: {
           element : function(settings, original) {
                var select = $('<select />');
                $(this).append(select);
                               $(this).find('select').attr('multiple','multiple');
                return(select);
            },
            content : function(data, settings, original) {
                /* If it is string assume it is json. */
                if (String == data.constructor) {      
                    eval ('var json = ' + data);
                } else {
                /* Otherwise assume it is a hash already. */
                    var json = data;
                }
                for (var key in json) {
                    if (!json.hasOwnProperty(key)) {
                        continue;
                    }
                    if ('selected' == key) {
                        continue;
                    } 
                    var option = $('<option />').val(key).append(json[key]);
                    $('select', this).append(option);    
                }

                /* Loop option again to set selected. IE needed this... */ 
                $('select', this).children().each(function() {
                    if ($(this).val() == json['selected'] || 
                        $(this).text() == $.trim(original.revert)) {
                            $(this).attr('selected', 'selected');
                    }
                });
            }
        }
    },

    /* Add new input type */
    addInputType: function(name, input) {
        $.editable.types[name] = input;
    }
};

/* Publicly accessible defaults. */
$.fn.editable.defaults = {
    name       : 'value',
    id         : 'id',
    type       : 'text',
    width      : 'auto',
    height     : 'auto',
    event      : 'click.editable',
    onblur     : 'cancel',
    loadtype   : 'GET',
    loadtext   : 'Loading...',
    placeholder: 'Click to edit',
    loaddata   : {},
    submitdata : {},
    ajaxoptions: {}
}; 
```

})(jQuery);

**multiselect_json.php**

```
<?php

$projectid = $_POST['id'];
$inputvalue = $_POST['value'];

require_once('connect.php');

        $mysqli = new mysqli(DB_HOST, DB_USER, DB_PASS, DB_NAME);
        if ($mysqli->connect_error) {
            die('Connect Error (' . $mysqli->connect_errno . ') '
                . $mysqli->connect_error);
                        }

 $array = explode ( '_' , $projectid ) ; // This will split $inputvalue by the character '_'
 $column = $array[0];
 $id = $array[1];

// get full list of products
$query = "SELECT DISTINCT * FROM products ORDER BY productname"; 
$result = mysqli_query($mysqli, $query);

// get selected productid's
$query2 = "SELECT DISTINCT productid FROM projectsproducts WHERE projectid='$id'";
$result2 = mysqli_query($mysqli, $query2);

while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) { 
    $id_1 = $row['id']; 
    $productname = $row['productname'];
    $array[$id_1] = $productname;

    };

    $array['selected'] = '2';
       $array['selected'] = '3';

print json_encode($array);  

 ?> 
```

# laravel - Laravel 4：加载旧库：如何？

> ID：14572354
> 
> 赞同：6
> 
> 时间：2013-01-28T22:24:00.430
> 
> 标签：laravel, autoload, laravel-4

我有一个旧库（[phpquery](http://code.google.com/p/phpquery/)），我想将它包含在我的项目中。我已将它放在供应商内部，但它不起作用，因为它不符合 PSR-0 标准。我不希望它为每个请求都加载，所以我没有将`require`bootstrap autoload.php 放在里面。

我什至不知道，我怎样才能获得应用程序的根目录。跑步`path()`给了我一个 URL，而不是我想要的。

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-29T02:18:50.947

您可以像在 laravel 3 中一样创建一个库目录，并将其包含在您的类加载器中。你可以通过 composer 或 laravel 来实现。

```
//composer.json
"autoload": {
    "classmap": [
        "app/commands",
        "app/libraries",
        "app/database/migrations",
        "app/tests/TestCase.php",
    ]
},

//app/starts/global.php
ClassLoader::register(new ClassLoader(array(
    app_path().'/libraries',
))); 
```

通过 Laravel 自动加载不需要您在每次创建或删除类时运行“composer dumpautoload”。

更新 - L4 Beta 4

```
ClassLoader::addDirectories(array(
    app_path().'/libraries',
)); 
```

# arrays - AS2 答案输入测验

> ID：14572357
> 
> 赞同：1
> 
> 时间：2013-01-28T22:24:06.860
> 
> 标签：arrays, syntax-error, actionscript-2

```
 answer = new Array();
answer[0] = "1997";
answer[1] = "1941";
question = new Array();
question[0] = "What ...?";
question[1] = "Why ...?";

question_txt.text = question;
enter1.onRelease = function()
{
    if (answer_input.text == answer)
    {
        answer++;
        question++;
        question_txt.text = question;
    }
    else
    {
        answer_input.text = "Incorrect";
    }
}; 
```

有 2 个文本框和一个按钮 TextBox1 = question_txt - 用于显示问题，类型为`[Dynamic]` textBox2 = answer_input - 允许用户尝试回答问题

答案和问题的价值只是虚构的，不要介意。

那么为什么它不起作用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:38:56.650

好吧，我不是 as2 专家，但它看起来像是`question`一个数组，而您正试图设置`question_txt.text`为`question`，这实际上是整个数组。稍后，您尝试将 1 添加到`answer`and`question`数组中，但这是行不通的。

您真正要做的是访问这些数组的*元素*，为此，您需要将索引传递给您的数组。(question[0] = "The first element in the question array") 所以你需要一个变量来跟踪你当前使用的这些数组的索引。像这样的东西...

```
answer = new Array();
answer[0] = "1997";
answer[1] = "1941";
question = new Array();
question[0] = "What ...?";
question[1] = "Why ...?";

qanda_number = 0;

question_txt.text = question[qanda_number];
enter1.onRelease = function()
{
    if (answer_input.text == answer[qanda_number)
    {
        qanda_number++;
        question_txt.text = question[qanda_number];
        // You probably want to empty out your answer textfield, too.
    }
    else
    {
        answer_input.text = "Incorrect";
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:54:17.580

```
answer = new Array(); //Create a list of answers.
answer[0] = "Insert Answer"; //Answer is ...
answer[1] = "Insert Answer"; //Answer1 is ...
question = new Array(); //Create a list of questions.
question[0] = "Insert Question"; //Question is ...
question[1] = "Insert Question"; //Question1 is ..
index = 0; //Create an index number to keep answers and questions in order

onEnterFrame = function () //Constantly...
{
    question_txt.text = question[index] //Make the question in tune with the index num
};

button.onRelease = function() //On the release of a button...
{
    if (answer_input.text == answer[index]) //if the User's guess is correct - proceed
    {
        index++; //Move up in the Index
        answer_input.text = ""; //Reset the User's guess
    }
    else
    {
        answer_input.text = "Incorrect"; //Display Incorrect over the User's guess
    }
}; 
```

# sql - oracle中“tab”表和all_tables的区别

> ID：14572361
> 
> 赞同：6
> 
> 时间：2013-01-28T22:24:21.237
> 
> 标签：sql, oracle, oracle10g, oracle11g

使用（在 oracle 中）返回哪些表

```
select * from tab 
```

和

```
select * from all_tables 
```

我想知道两者的区别。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T22:43:32.727

`tab`是一个永远不应该使用的**古老数据字典表。**它的存在只是为了为可能在几十年前编写的脚本提供向后兼容性。 `tab`不会随着新对象类型和新功能的添加而更新。

*   `all_tables`为您提供有关您有权访问的所有表的信息。
*   `tab`为您提供有关您拥有的表、视图和同义词的信息（使其更类似于`user_tables`、`user_synonyms`和等视图`user_views`）。但是，它不知道诸如回收站之类的东西，因此`tab`会向您显示所有具有类似名称的表`BIN$+K4PlriXSGetpagyHCvBGA==$0`都在回收站中。实际上，至少自 Oracle 7 天以来添加的任何对象类型都可能为遗留数据字典表（如`tab`.

# ios - XCode Copy Files 构建阶段有时会跳过文件

> ID：14572362
> 
> 赞同：1
> 
> 时间：2013-01-28T22:24:21.283
> 
> 标签：ios, xcode, frameworks, build-process, header-files

我按照这个优秀的教程设置了一个我正在为 iOS 应用程序构建的框架。

[http://spin.atomicobject.com/2011/12/13/building-a-universal-framework-for-ios/](http://spin.atomicobject.com/2011/12/13/building-a-universal-framework-for-ios/)

除了一个小细节，我的一切工作都很好。有时，在将所有头文件复制到最终框架之前，可能需要多次尝试构建项目。

有时我会点击“Build”，框架的 Headers 文件夹最后完全是空的。有时它会有 90% 的标题，但不是全部。偶尔我很幸运，他们似乎都在那里。

什么会导致这种情况，我该如何纠正？

更新：到目前为止，我唯一的解决方案是继续重建框架，并最终按照我期望的方式复制所有标题。不过仍在寻找更好的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T15:51:42.963

我用来解决这个问题的一种**解决方法**是脏的（即双击打开的文件，按空格键和键盘上的删除键并保存/Cmd+s）在我构建之前所有的“添加复制文件”（Cmd+B） .

**另一种解决方法**- 构建项目两次，在第二次构建时，文件被复制。

有人有这个问题的真正原因/解决方案吗？

# android - 如何使用 Eclipse Juno 设置 Android 项目

> ID：14572363
> 
> 赞同：1
> 
> 时间：2013-01-28T22:24:25.080
> 
> 标签：android, eclipse, sdk

我的教授和我显然正在使用不同版本的 Eclipse，我无法将他的项目要求与我的 Eclipse 相匹配。

他的要求是：“建议您使用 2.3 SDK 并在 4.0 模拟器上测试您的应用程序......”

我正在使用 Juno，这就是我所看到的：

![朱诺](../Images/c3aaae06447615a61306290931024078.png)

这个设置对吗？

所以人们不只是告诉我给我的教授发电子邮件作为答案，目标 SDK 和概念上的“编译”有什么区别？我不清楚为什么它们是单独的选项。

如何使用 4.0 编译但目标较低？这似乎不对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:27:12.883

如果您也将最低 reqd SDK 设置为 API:9，那么您将更接近老师所说的内容。你所拥有的看起来不错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:35:47.487

通常您的“编译方式”级别不应高于目标 SDK 级别。（它通常与所需的最低 SDK 相同，但有时有理由将其设置得更高。）“编译方式”的想法是允许您针对更高级别并将 API 调用限制在较低级别以实现兼容性。

否则，您的选择看起来与教授的建议一致。请注意，这些设置都与模拟器版本无关。您在创建 AVD 时进行了设置，并且只要模拟器版本至少是“所需的最低 sdk”，项目就应该运行（当然，排除错误）。

# sitecore - Sitecore：在中继器中获取 droplink 的值

> ID：14572364
> 
> 赞同：2
> 
> 时间：2013-01-28T22:24:28.023
> 
> 标签：sitecore

我有以下内容；

```
<asp:Repeater runat="server" ID="Repeater">
<ItemTemplate>
        <sc:image field="image from droplink" Item='<%# Container.DataItem %>' runat="server" />
</ItemTemplate> 
```

“来自 droplink 的图像”是一个 droplink 选择值（Sitecore 内容项）。在这个项目中，有一个“图像”字段，它是我想要的实际媒体项目的来源。所以上面的方法不起作用，因为这个字段只返回内容项的 GUID。

如何从上述中继器中的 droplink 选定项的 Image 字段中获取图像 src？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:21:56.223

您需要使用包含 Image 字段的实际项目填充 sc:Image 标记上的`Item`or属性。将是一个对象，而可以是一个 ID 或路径。我认为以下应该做到这一点。`Datasource``Item``Item``Datasource`

```
<sc:Image runat="server" Field="image field" Datasource="<%# ((Item)Container.DataItem)["droplink field"] %>" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T23:05:16.910

**以下答案假定上下文项上的下拉链接指向媒体项。（在提问者澄清之前）。可能对其他人有用。**

您需要在后面的代码中使用 asp:Image 和[OnItemDataBound](http://www.aspnettutorials.com/tutorials/controls/repeater-onitemdatabound-cs.aspx)处理程序，并使用`e.Item.DataItem`（其中 e 是`RepeaterItemEventArgs`）来获取被绑定的项目。确保`e.ItemType`是一个`ListItemType.Item`. 从那里它会像......

```
var item = (Item)e.Item.DataItem;
var dropLink = new InternalLinkField(item.Fields["image from droplink"]);
var mediaItem = dropLink.TargetItem;
if (mediaItem != null)
{
  var options = new MediaOptions { Height = 100, Width = 100 }; //change to your dimensions
  var imageUrl = MediaManager.GetMediaUrl(new MediaItem(mediaItem), options);
  var imageControl = e.Item.FindControl("myImageControlID"); //change to asp:Image ID
  imageControl.ImageUrl = imageUrl;
  imageControl.AlternateText = mediaItem.Alt;
} 
```

如果您支持页面编辑器（希望您支持！），在转发器中，您可以使用[编辑框架](http://briancaos.wordpress.com/2011/11/28/using-sitecore-editframe-in-pageedit/)来允许编辑每个项目上的图像。（请注意，链接的示例在整个 周围放置了一个编辑框`ListView`，而您需要将其放置在您的内部`Repeater`并将属性数据绑定`Datasource`到当前项目 ID。）

# matlab - 是否可以在 Matlab 的 evalc 期间打印到控制台？

> ID：14572365
> 
> 赞同：1
> 
> 时间：2013-01-28T22:24:32.780
> 
> 标签：matlab, console

我有一个测试框架，其中每个测试都是一个 M 文件（例如 test_featureX.m），它对特殊（自定义）AssertionCollection 类的实例进行断言。用户在开发他们的功能时将单独运行测试，并且可能希望在测试期间将有用的信息打印到控制台，以帮助他们调试问题。我还有一个例程 testAll，它运行整个存储库的所有测试并以标准化的方式打印结果。在后一种用法中，我不希望将任何无关信息打印到控制台，因此测试执行包含在 evalc (evalc('test_featureX(ac);')) 中，它隐藏了 test_featureX 所做的任何控制台写入。

现在，我希望 testAll 在每次做出断言时实时打印到屏幕上。我想通过在将 AssertionClass 实例 (ac) 传递给 test_featureX 之前向它添加一个回调函数来做到这一点，并让该回调函数在每个通过的断言上打印一个更新。问题是回调函数是从源自 evalc 命令的调用堆栈中执行的，因此它的输出被路由到 evalc 字符串而不是控制台。

有没有办法强制输出到控制台，即使是在 evalc 评估期间，以便我的回调可以将状态打印到控制台，而 testAll 拒绝大多数标准写入控制台？

我希望结果可能如下所示：

```
s = evalc('testFunction();')
function testFunction()
    disp('line 1');
    fprintf('line 2\n');
    fprintf(TO_THE_CONSOLE, 'line 3\n');
end 
```

...结果输出将是

```
line 3
  s =
    line 1
    line 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:36:49.353

我不认为这是可能的。evalc 捕获除错误之外的所有内容。您最好的选择是向 testFunction 添加一个返回参数并在需要时显示它。

# c# - 如何在 RavenDB 多地图索引中进行嵌套分组

> ID：14572369
> 
> 赞同：0
> 
> 时间：2013-01-28T22:24:52.670
> 
> 标签：c#, linq, mapreduce, ravendb

我的 RavenDB 数据库中有两个不同的文档集合 - Teams 和 Matches。文件如下所示：

```
public class Team {
    public string Id { get; set; }
    public string Name { get; set; }
    public int LeaguePosition { get; set; }
}

public class Match {
    public string Id { get; set; }
    public string HomeTeamName { get; set; }
    public string AwayTeamName { get; set; }
    public DateTime StartTime { get; set; }
} 
```

所以基本上我有球队和这些球队之间的比赛。但是，对于某些操作，我需要从数据库中获取一个类似于以下内容的实体：

```
public class MatchWithExtraData {
    public string Id { get; set; } // Id from the match document.
    public string HomeTeamId { get; set; }
    public string HomeTeamName { get; set; }
    public int HomeTeamPosition { get; set; }
    public string AwayTeamId { get; set; }
    public string AwayTeamName { get; set; }
    public int AwayTeamPosition { get; set; }
    public DateTime? StartTime { get; set; }
} 
```

我想要的是真正的比赛文件，但有主客场球队的 id 和联赛位置的额外字段。基本上用两份球队文件加入主客队名称的比赛文件，一份用于主队，一份用于客队。我认为多映射/减少索引应该可以解决问题，所以我从以下索引开始：

```
public class MatchWithExtraDataIndex: AbstractMultiMapIndexCreationTask<MatchWithExtraData> {
    public MatchWithExtraData() {
        AddMap<Team>(
            teams => from team in teams
                     select new {
                         Id = (string)null,
                         HomeTeamId = team.Id,
                         HomeTeamName = team.Name,
                         HomeTeamPosition = team.LeaguePosition,
                         AwayTeamId = team.Id,
                         AwayTeamName = team.Name,
                         AwayTeamPosition = team.LeaguePosition,
                         StartTime = (DateTime?)null
                     }
        );
        AddMap<Match>(
            matches => from match in matches
                       select new {
                           Id = match.Id,
                           HomeTeamId = (string)null,
                           HomeTeamName = match.HomeTeamName,
                           HomeTeamPosition = 0,
                           AwayTeamId = (string)null,
                           AwayTeamName = match.AwayTeamName,
                           AwayTeamPosition = 0,
                           StartTime = match.StartTime
                       }
        );
        Reduce = results => from result in results
                            // NOW WHAT?
    }
} 
```

减少部分是我无法弄清楚的部分，因为每场比赛有两支球队。我想我需要先在 HomeTeamName 上，然后在 AwayTeamName 上做一个嵌套组，但我不知道该怎么做。

也许这更像是一个 LINQ 问题而不是 RavenDB 问题。但是这样一个嵌套的 group by 语句会是什么样子呢？或者可以通过其他方式完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:57:09.597

你最好使用转换结果，或者包含。请参阅此处的文档：[http ://ravendb.net/docs/client-api/querying/handling-document-relationships](http://ravendb.net/docs/client-api/querying/handling-document-relationships)

# windows - msysGit 守护进程不能可靠地从

> ID：14572371
> 
> 赞同：1
> 
> 时间：2013-01-28T22:24:59.177
> 
> 标签：windows, git, clone, msysgit

我们在一个局域网上有 4 台计算机，我们希望直接从彼此那里提取，而不是从中央存储库中提取。

msysGit (v1.8.0.msysgit.0) 已与股票选项一起安装，我正在使用以下命令运行守护程序：

```
"C:\Program Files (x86)\Git\bin\git.exe" daemon --reuseaddr --base-path="C:\Users\SmartUserPerson\repos" --verbose 
```

即使在 Windows 防火墙中打开端口 9418 并且完全禁用它，问题仍然存在。所有机器都使用 msysGit 作为客户端。

这是我在同一台计算机上使用 msysGit 反复克隆此守护程序的日志。

```
SmartUserPerson@MY-PC-1 ~/projects/test
$ git clone git://MY-PC-1/spire-web
Cloning into 'spire-web'...
remote: Counting objects: 1294, done.
remote: Compressing objects:  64% (393/614)   Receiving objects:   0% (1/1294)
...
remote: Compressing objects:  99% (608/614)   Receiving objects:  11% (143/1294)
remote: Compressing objects: 100% (614/614), done.
remote: Total 1294 (delta 529), reused 1188 (delta 441)
Receiving objects: 100% (1294/1294), 571.75 KiB, done.
Resolving deltas: 100% (529/529), done.

SmartUserPerson@MY-PC-1 ~/projects/test
$ rm -rf spire-web/

SmartUserPerson@MY-PC-1 ~/projects/test
$ git clone git://MY-PC-1/spire-web
Cloning into 'spire-web'...
remote: Counting objects: 1294, done.
remote: Compressing objects:  43% (265/614)   Receiving objects:   0% (1/1294)
...
remote: Compressing objects:  98% (602/614)   Receiving objects:  17% (220/1294)
remote: Compressing objects: 100% (614/614), done.
remote: Total 1294 (delta 529), reused 1188 (delta 441)
Receiving objects: 100% (1294/1294), 571.75 KiB, done.
Resolving deltas: 100% (529/529), done.

SmartUserPerson@MY-PC-1 ~/projects/test
$ rm -rf spire-web/

SmartUserPerson@MY-PC-1 ~/projects/test
$ git clone git://MY-PC-1/spire-web
Cloning into 'spire-web'...
remote: Counting objects: 1294, done.
remote: Compressing objects:  73% (449/614)   Receiving objects:   0% (1/1294)
...
remote: Compressing objects: 100% (614/614), done. eceiving objects:   8% (104/1
294)
remote: Total 1294 (delta 529), reused 1188 (delta 441)
fatal: read error: Invalid argument
Receiving objects: 100% (1294/1294), 571.75 KiB, done.
fatal: early EOF
fatal: index-pack failed

SmartUserPerson@MY-PC-1 ~/projects/test
$ rm -rf spire-web/

SmartUserPerson@MY-PC-1 ~/projects/test
$ git clone git://MY-PC-1/spire-web
Cloning into 'spire-web'...
remote: Counting objects: 1294, done.
remote: Compressing objects:  70% (430/614)   eceiving objects:   0% (1/1294)
...
remote: Compressing objects:  99% (608/614)   Receiving objects:   8% (104/1294)
remote: Compressing objects: 100% (614/614), done.
fatal: read error: Invalid argument
fatal: early EOFs:  96% (1243/1294)
fatal: index-pack failed

SmartUserPerson@MY-PC-1 ~/projects/test
$ rm -rf spire-web/

SmartUserPerson@MY-PC-1 ~/projects/test
$ git clone git://MY-PC-1/spire-web
Cloning into 'spire-web'...
remote: Counting objects: 1294, done.
remote: Compressing objects:  48% (295/614)   Receiving objects:   0% (1/1294)
...
remote: Compressing objects: 100% (614/614), done.
rRemote: Total 1294 (delta 529), reused 1188 (delta 441)eceiving objects:  88% (
R
fatal: read error: Invalid argument
fatal: early EOFs:  96% (1243/1294)
fatal: index-pack failed

SmartUserPerson@MY-PC-1 ~/projects/test
$ rm -rf spire-web/

SmartUserPerson@MY-PC-1 ~/projects/test
$ git clone git://MY-PC-1/spire-web
Cloning into 'spire-web'...
remote: Counting objects: 1294, done.
remote: Compressing objects:  43% (265/614)   Receiving objects:   0% (1/1294)
...
remote: Compressing objects: 100% (614/614), done.
fatal: read error: Invalid argument
fatal: early EOFs:  96% (1243/1294)
fatal: index-pack failed

SmartUserPerson@MY-PC-1 ~/projects/test
$ rm -rf spire-web/

SmartUserPerson@MY-PC-1 ~/projects/test
$ git clone git://MY-PC-1/spire-web
Cloning into 'spire-web'...
remote: Counting objects: 1294, done.
remote: Compressing objects:  75% (461/614)   Receiving objects:   0% (1/1294)
...
remote: Compressing objects: 100% (614/614), done.
remote: Total 1294 (delta 529), reused 1188 (delta 441)
Receiving objects: 100% (1294/1294), 571.75 KiB, done.
Resolving deltas: 100% (529/529), done.

SmartUserPerson@MY-PC-1 ~/projects/test
$ rm -rf spire-web/

SmartUserPerson@MY-PC-1 ~/projects/test
$ git clone git://MY-PC-1/spire-web
Cloning into 'spire-web'...
remote: Counting objects: 1294, done.
remote: Compressing objects:  68% (418/614)    eceiving objects:   0% (1/1294)
...
remote: Compressing objects: 100% (614/614), done.R
atal: read error: Invalid argument4)
Receiving objects: 100% (1294/1294), 571.75 KiB, done.
fatal: early EOF
fatal: index-pack failed

SmartUserPerson@MY-PC-1 ~/projects/test 
```

50% 的时间从这个守护进程克隆失败！我该怎么解决这个问题？

哦，这是这些测试期间守护程序的输出

```
[4572] Connection from [aaaa::aaaa:aaaa:aaaa:aaa]:62613
[4572] Extended attributes (17 bytes) exist <host=my-pc-1>
[4572] Request upload-pack for '/spire-web'
[1996] [4572] Disconnected
[6108] Connection from [aaaa::aaaa:aaaa:aaaa:aaa]:62860
[6108] Extended attributes (17 bytes) exist <host=my-pc-1>
[6108] Request upload-pack for '/spire-web'
[1996] [6108] Disconnected
[4960] Connection from [aaaa::aaaa:aaaa:aaaa:aaa]:62870
[4960] Extended attributes (17 bytes) exist <host=my-pc-1>
[4960] Request upload-pack for '/spire-web'
[1996] [4960] Disconnected
[988] Connection from [aaaa::aaaa:aaaa:aaaa:aaa]:62871
[988] Extended attributes (17 bytes) exist <host=my-pc-1>
[988] Request upload-pack for '/spire-web'
[1996] [988] Disconnected
[6816] Connection from [aaaa::aaaa:aaaa:aaaa:aaa]:62872
[6816] Extended attributes (17 bytes) exist <host=my-pc-1>
[6816] Request upload-pack for '/spire-web'
[1996] [6816] Disconnected
[3204] Connection from [aaaa::aaaa:aaaa:aaaa:aaa]:62874
[3204] Extended attributes (17 bytes) exist <host=my-pc-1>
[3204] Request upload-pack for '/spire-web'
[1996] [3204] Disconnected
[5532] Connection from [aaaa::aaaa:aaaa:aaaa:aaa]:62875
[5532] Extended attributes (17 bytes) exist <host=my-pc-1>
[5532] Request upload-pack for '/spire-web'
[1996] [5532] Disconnected
[6536] Connection from [aaaa::aaaa:aaaa:aaaa:aaa]:62880
[6536] Extended attributes (17 bytes) exist <host=my-pc-1>
[6536] Request upload-pack for '/spire-web' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-09T12:54:02.947

这是 Windows 上 git-daemon 的一个长期存在的错误（我认为与 msysgit 问题 457 有关）。我知道有一种解决方法，这是一个相当奇怪的解决方法..

在终端上打开 git-daemon。选择一些文本，保持选中状态。

这会冻结终端输出，并允许 git 干净地运行。不知道为什么会这样，而且这不是一个实用的长期解决方案。

最终，到目前为止，我发现的唯一实用的修复方法是在 linux 服务器上运行 git-daemon，直到修复错误（它看起来永远不会修复，因为自从它首次报告以来已经过去了一段时间）。

# mysql - Mysql 使用 MATCH() AGAINST() 搜索字符串和数字

> ID：14572375
> 
> 赞同：11
> 
> 时间：2013-01-28T22:25:21.190
> 
> 标签：mysql, search, numbers, match-against

我对 MATCH AGAINST 函数有疑问。

以下查询给了我相同的结果：

```
SELECT * FROM models MATCH(name) AGAINST('Fiat 500')
SELECT * FROM models MATCH(name) AGAINST('Fiat') 
```

如何在 FULL TEXT 表的列中同时搜索字符串和数字？

谢谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-28T22:28:08.660

如果您需要`Fiat`并且`500`在任何订单无关紧要的地方，那么

```
SELECT * FROM models MATCH(name) AGAINST('+Fiat +500'); 
```

如果你需要`Fiat 500`一起，那么

```
SELECT * FROM models MATCH(name) AGAINST('+"Fiat 500"'); 
```

如果你需要`Fiat`和零个或多个`500`，那么

```
SELECT * FROM models MATCH(name) AGAINST('+Fiat 500'); 
```

如果你需要`500`和零个或多个`Fiat`，那么

```
SELECT * FROM models MATCH(name) AGAINST('Fiat +500'); 
```

试试看 ！！！

# 更新 2013-01-28 18:28 EDT

以下是全文搜索的默认设置

```
mysql> show variables like 'ft%';
+--------------------------+----------------+
| Variable_name            | Value          |
+--------------------------+----------------+
| ft_boolean_syntax        | + -><()~*:""&| |
| ft_max_word_len          | 84             |
| ft_min_word_len          | 4              |
| ft_query_expansion_limit | 20             |
| ft_stopword_file         | (built-in)     |
+--------------------------+----------------+
5 rows in set (0.00 sec)

mysql> 
```

请注意，[**ft_min_word_len**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_ft_min_word_len)默认为 4。令牌 500 的长度为 3。因此它根本不会被索引。您将不得不做三 (3) 件事：

# 步骤 01：配置较小的字符串令牌

将此添加到`/etc/my.cnf`

```
[mysqld]
ft_min_word_len = 1 
```

# 步骤 02：重启 mysql

```
service mysql restart 
```

# STEP 03 : 重新索引`models`表中的所有索引

您可以只删除并添加 FULLTEXT 索引

或者分阶段做，提前看看能有多大

```
CREATE TABLE models_new LIKE models;
ALTER TABLE models_new DROP INDEX name;
ALTER TABLE models_new ADD FULLTEXT name (name);
ALTER TABLE models_new DISABLE KEYS;
INSERT INTO models_new SELECT * FROM models;
ALTER TABLE models_new ENABLE KEYS;
ALTER TABLE models RENAME models_old;
ALTER TABLE models_new RENAME models; 
```

当您对此感到满意时，然后运行

```
DROP TABLE models_old; 
```

试试看 ！！！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-02-22T02:11:08.553

以防万一它对其他人有帮助，如果您使用的是 InnoDB，则需要使用一组不同的 mysql.cnf 属性

例如

```
show variables like 'innodb_ft%'; 
```

并在 my.cnf 中设置以下值而不是 ft_min_word_len

```
innodb_ft_min_token_size=1 
```

# javascript - 在 Meteor 项目中使用自然的 nodejs 库

> ID：14572384
> 
> 赞同：1
> 
> 时间：2013-01-28T22:25:44.850
> 
> 标签：javascript, node.js, nlp, meteor, npm

我需要使用自然（[https://github.com/NaturalNode/natural](https://github.com/NaturalNode/natural)），这是 Meteor 项目中的一个 nodejs 库。

如果我在我的 Meteor 项目中使用 npm 安装 natural ，它会抛出一堆错误，因为某些方面是不兼容的：（例如，在 html 文件头中的 Doctype HTML，流星不太喜欢。）

谁能教我如何在流星包中变得自然，或者只是告诉我如何解决这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T02:29:39.887

试试[这个项目](https://github.com/jonjamz/meteor-npm)。我自己没有尝试过，但那里可能有一些线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T01:17:57.690

在 Atmosphere 中试试这个包（Meteor 包的集合）[https://atmospherejs.com/package/natural](https://atmospherejs.com/package/natural)

要从 Atmosphere 安装软件包，您将需要陨石：

```
npm install -g meteorite 
```

安装软件包：

```
mrt add natural 
```

运行你的项目

```
mrt 
```

这次很容易；）享受吧！

# android - Logcat 在设备上使用 ACRA 为空

> ID：14572385
> 
> 赞同：7
> 
> 时间：2013-01-28T22:25:46.083
> 
> 标签：android, logcat, acra

所以我使用所有默认值的 ACRA 4.4.0，我的 logcat 字段为空。

我的应用程序有

```
<uses-permission android:name="android.permission.READ_LOGS" /> 
```

权限，这至少应该给我自[Jelly Bean以来](https://groups.google.com/forum/?fromgroups=#!searchin/android-developers/READ_LOGS/android-developers/6U4A5irWang/8xOi74KfRIYJ)[我自己的应用程序日志](https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Adding_logcat,_eventlog_or_radiolog_extracts_to_reports)。

> 最后说明：自 Android 4.1 (JellyBean) 以来，第三方应用程序不再授予 READ_LOG 权限。从这个版本开始，logcat 只提供**来自您自己的应用程序的**跟踪，而不需要许可。JellyBean logcat 日志由 ACRA 从 4.3.0b2 版本开始检索

所以我做了一个强制日志：

```
Log.i("mytag" , "message");
ACRA.getErrorReporter().handleException(null); 
```

在模拟器（v4.2）上，我得到了完整的 logcat。（顺便说一句，这与 JB 施加的 logcat 限制有些矛盾）
但是，在我的设备 v4.2.1 上，logcat 完全是空的。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-18T12:00:47.133

如果您使用电子邮件模式 acra 报告（`mailTo`内部标记`@ReportsCrashes`），则不包含 LogCat 字段以减小报告大小。要解决这个问题，您只需要使用 customReportContent 标记。

（在我找到这个之前花了一些时间搜索 - 它写在文档中，只是没有在提到 LogCat 的部分中）

```
@ReportsCrashes(formKey = "",
    mailTo = "xxxx@yyyy.com",
    customReportContent = {ReportField.APP_VERSION_CODE, ReportField.APP_VERSION_NAME, ReportField.ANDROID_VERSION, ReportField.PHONE_MODEL, ReportField.STACK_TRACE, ReportField.LOGCAT },
    mode = ReportingInteractionMode.TOAST,
    resToastText = R.string.crash_toast_text
) 
```

注意：我排除了 USER_CONTENT 和 CUSTOM_DATA 字段

笔记2：`import org.acra.ReportField;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:35:34.150

我想这是因为从 JellyBean 开始你不能再使用 READ_LOGS 了。如需进一步解释，请阅读此处：

```
http://commonsware.com/blog/2012/07/12/read-logs-regression.html 
```

# windows - SQL Server：将多行合并为一行

> ID：14572395
> 
> 赞同：0
> 
> 时间：2013-01-28T22:27:09.863
> 
> 标签：windows, tsql, null, subquery, coalesce

我看过其他一些类似的问题，但没有一个适合我发现自己所处的特殊情况。

*我是 SQL 的相对初学者。*

我正在编写查询以创建报告。**我对该数据库具有只读访问权限。**我正在尝试将三行合并为一行。任何只需要读取权限的方法都可以。

话虽如此，我拥有的三行是通过一个很长的子查询获得的。这是外壳：

```
SELECT Availability,
       Start_Date,
       End_Date
FROM (
  -- long subquery goes here (it is several UNION ALLs)
  ...
) AS dual 
```

以下是行：

```
Availability | Start_Date | End_Date
-------------------------------------
99.983       | NULL       | NULL
NULL         | 1/10/2013  | NULL
NULL         | NULL       | 1/28/2013 
```

我想要做的是将三行合并为一行，如下所示：

```
Availability | Start_Date | End_Date
-------------------------------------
99.983       | 1/10/2013  | 1/28/2013 
```

我知道我可以使用*COALESCE()*将它们放在一列中，但**我更愿意保留三个单独的列**。

**我无法创建或使用存储过程。**

是否有可能做到这一点？我可以举一个一般情况的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:29:37.677

您是否尝试过使用聚合函数：

```
SELECT max(Availability) Availability,
       max(Start_Date) Start_Date,
       max(End_Date) End_Date
FROM (
  -- long subquery goes here (it is several UNION ALLs)
  ...
) AS dual 
```

如果您有其他列，则需要添加一个`GROUP BY`子句

# android - 带有搜索选项的搜索对话框

> ID：14572399
> 
> 赞同：1
> 
> 时间：2013-01-28T22:27:24.823
> 
> 标签：android

我想在我的应用程序中添加一个搜索对话框，并提供不区分大小写的搜索等选项。所以基本上我想除了搜索编辑文本之外还有几个复选框。这是可能的，如果是的话，怎么做？

请注意，出于兼容性原因，我不想使用搜索小部件。

# emacs - 如何警告不要在组织模式下删除折叠子树？

> ID：14572402
> 
> 赞同：6
> 
> 时间：2013-01-28T22:27:43.270
> 
> 标签：emacs, org-mode

我在 emacs org-mode 中编辑内容，并在折叠和展开模式下使用标题结构。不过，在编辑时，我担心我会不小心删除包含内容的折叠子树。

有没有办法让 org-mode 在删除包含隐藏内容的折叠子树之前警告我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T09:26:24.387

在某些情况下，请参阅以下变量以保护隐藏的树：

```
org-catch-invisible-edits
org-ctrl-k-protect-subtree 
```

但是请注意，这些不会保护隐藏的树木不被例如`C-w`( `kill-region`) 杀死。

# java - 调用 Web 服务所需的所有组件是什么

> ID：14572403
> 
> 赞同：0
> 
> 时间：2013-01-28T22:27:43.403
> 
> 标签：java, web-services, apache-httpclient-4.x

我需要通过 ssl 连接到 Web 服务。我有客户证书并创建了一个 jks。我一直在阅读很多文档，它似乎是零碎的。我正在使用 Java。如果可能的话，我想避免设置 Axis2 或类似的东西。是否可以只使用 wsimport 来获取 java 类，然后用我自己的类调用它们？如果没有，我错过了什么。我是否需要使用 httpclient-4.2.3.jar 之类的东西来创建请求？任何信息都值得赞赏或链接到详细示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:39:36.307

有几个选项。对于简单的测试，您可以

1) 使用[SoapUI](http://www.soapui.org)（有免费版和付费版）

2) 在命令行上使用 curl。

```
curl -L -d @myrequest.xml http://example.com/someEndPoint 
```

否则，您可以生成 Java 客户端。SO上有很多这样的例子。

# java - 类/线程通信

> ID：14572407
> 
> 赞同：0
> 
> 时间：2013-01-28T22:27:51.873
> 
> 标签：java, multithreading, class, jetty

我需要为码头服务器创建一个新的入口点。该服务器将创建一个码头容器的实例，然后在第二个线程中创建一个数据收集器实例。

我的问题是如何设置它以便容器中运行的 servlet 可以看到 datacollector 类？

这背后的目的是让网页控制数据收集器实例的状态。数据收集器所做的只是转到数据源（数据库）并读取表中的数据并加载包含表内容的文件。我有这个设置，以便数据收集器每 5 分钟读取一次表。我希望能够从网页控制数据收集器实例的所有属性（例如：启动、停止、调试模式等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:33:43.227

在部署 webapp 时启动 DataCollector（使用[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)），在销毁 webapp 时停止它（使用相同的侦听器），并使 DataCollector 成为单例或将其存储在 servlet 上下文属性中，以便能够从任何webapp的组件。

也就是说，您确定不能在每次需要将数据发送到响应时简单地从数据库表中读取吗？数据库非常快，尤其是在小表上。

# linq - 加入 groupby 后的 linq 并选择

> ID：14572408
> 
> 赞同：0
> 
> 时间：2013-01-28T22:27:50.533
> 
> 标签：linq, join, group-by

我需要在常规 sql 查询命令中构造一个这样的 linq：

```
select t1.vendorcode, t1.location, sum(t1.sales)
from table1 t1
where t1(vendorCode, location) in
      (select t2.vendorCode, t2.location from table2 t2) 
groupby t1.vendorCode, t1.location 
```

我构造linq如下：

```
query = from t1 in table1
where ...
join t2 in table2 on new
{
  t2.vendorcode, t2.location
} equals new
{ 
  t1.vendorcode, t1.location 
} 
```

我的问题是：我应该如何构建这个 linq？我需要另一个子查询还是可以添加更多`group by`并选择语句来完成这个 linq？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:48:50.847

您不需要添加另一个`group by`子句 - 您只需要选择总和：

```
var query = from t1 in table1
            join t2 in table2 
              on new { t1.vendorcode, t1.location } equals
                 new { t2.vendorcode, t2.location }
            group t1 by new { t1.vendorcode, t1.location } into g
            select new { 
                g.Key.vendorcode,
                g.Key.location, 
                g.Sum(t1 => t1.sale)
            }; 
```

*如果*`table2`任何特定的供应商代码/位置对中只有一条记录，这将起作用。但是，如果可以有*多个*这样的记录，那么它就不起作用 - 你可能想要更多类似的东西：

```
var query = from t1 in table1
            where table2.Select(t2 => new { t2.vendorcode, t2.location })
                        .Contains(new { t1.vendorcode, t1.location })
            group t1 by new { t1.vendorcode, t1.location } into g
            select new { 
                g.Key.vendorcode,
                g.Key.location, 
                g.Sum(t1 => t1.sale)
            }; 
```

从逻辑上讲，这就是您的“存在”版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:38:58.123

这应该这样做

```
var query =
    from t1 in table1

    join t2 in table2
    on new { vc = t1.vendorcode, lc = t1.location }
    equals new { vc = t2.vendorcode, lc = t2.location }

    group t1 by new { vc = t1.vendorcode, lc = t1.location }; 
```

# firefox - 如何通过 Firefox Addon 上下文菜单打开弹出窗口？

> ID：14572412
> 
> 赞同：1
> 
> 时间：2013-01-28T22:28:37.293
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在为 Firefox 开发一个扩展，它需要打开一个可以自定义大小的标准 Javascript 弹出窗口。我环顾四周，似乎无法弄清楚该怎么做。我的上下文菜单代码运行良好，但似乎 Firefox 阻止了`window.open`完成此操作所需的代码段。

有没有办法通过 XUL 或任何其他 SDK 模块来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T22:18:15.967

我们需要更多细节，这就是我认为你想要的。

```
require("sdk/context-menu").Item({
  label: "Open Window",
  contentScript: 'self.on("click", function (node, data) {' +
                 '  window.open("http://stackoverflow.com/questions/14572412/how-to-open-a-popup-window-via-firefox-addon-contextual-menu");' +
                 '});'
}); 
```

当用户单击 Open Window 项时，此代码将打开一个新窗口（或选项卡）。该`window.open`功能在这种情况下工作，但我不确定你没有看到它在什么情况下工作。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-22T18:32:18.877

如果你想打开的不是弹出窗口而是面板，这里有一个例子：

```
var self = require("sdk/self");
var panels = require("sdk/panel");

var panel = panels.Panel({
    contentURL: self.data.url("panel.html")
    // , onHide: handleHide
});

require("sdk/context-menu").Item({
  label: "Open Window",
  contentScript: 'self.on("click", function (node, data) {' +
                 '  self.postMessage(node.innerHTML);' +
                 '});',
  onMessage: function (data) {
    console.log('posted retrieved: '+data);
    panel.show();
  }
}); 
```

和一些[参考](https://developer.mozilla.org/en-US/Add-ons/SDK/Tutorials/Display_a_Popup)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T07:31:17.300

您还可以使用：

```
`<popupset>
  <panel id="some">
  </panel>
<popupset>` 
```

在 JavaScript 中写：

`document.getElementById('some').openPopup(...)`

# javascript - 从字符串的开头和结尾删除换行符

> ID：14572413
> 
> 赞同：78
> 
> 时间：2013-01-28T22:28:45.473
> 
> 标签：javascript, regex

我注意到 trim() 不会从字符串的开头和结尾删除换行符，因此我尝试使用以下正则表达式来完成此操作：

```
return str.replace(/^\s\n+|\s\n+$/g,''); 
```

这不会删除新行，我担心我在这里超出了我的深度。

**编辑** 字符串是用 ejs 生成的，像这样

```
go = ejs.render(data, { 
    locals: { 
        format() {
            // 
        }
    } 
}); 
```

这就是 go 的样子，但之前有几行空行。当我使用 go.trim() 时，我仍然会得到新的行。

```
<?xml version="1.0"?>
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">
    <fo:layout-master-set>
        <fo:simple-page-master master-name="Out" page-width="8.5in" page-height="11in" margin-top="1in" margin-bottom="0.5in" margin-left="0.75in" margin-right="0.75in">
            <fo:region-body margin-top="1in" margin-bottom="0.25in"/>
            <fo:region-before extent="1in"/>
            <fo:region-after extent="0.25in"/>
            <fo:region-start extent="0in"/>
            <fo:region-end extent="0in"/>
        </fo:simple-page-master>
    </fo:layout-master-set>
    <fo:page-sequence master-reference="Out" initial-page-number="1" force-page-count="no-force">
        <fo:static-content flow-name="xsl-region-before">
            <fo:block font-size="14pt" text-align="center">ONLINE APPLICATION FOR SUMMARY ADVICE</fo:block>
            <fo:block font-size="13pt" font-weight="bold" text-align="center">Re:
                SDF, SDF
            </fo:block>

        </fo:static-content>

        <fo:flow flow-name="xsl-region-body" font="10pt Helvetica">

            .. removed this content

        </fo:flow>
    </fo:page-sequence>
</fo:root> 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-01-28T22:34:04.333

尝试这个：

```
str = str.replace(/^\s+|\s+$/g, ''); 
```

[jsFiddle 在这里](http://jsfiddle.net/nBk7j/)。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2018-01-03T16:02:35.377

[String.trim()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/Trim)实际上确实删除了换行符（和所有其他空格）。也许不习惯？在撰写本文时肯定会这样做。从链接的文档（强调添加）：

> trim() 方法从字符串的两端删除空格。此上下文中的空白是所有空白字符（空格、制表符、不间断空格等）*和所有行终止符（LF、CR 等）。*

* * *

如果要修剪所有换行符以及其他潜在的空白，可以使用以下命令：

```
return str.trim(); 
```

如果您只想修剪换行符，则可以*使用*专门针对换行符的解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T22:33:59.160

`/^\s+|\s+$/g`应该抓住任何东西。您当前的正则表达式可能存在这样的问题，即如果您的换行符包含`\r`字符，它们将不匹配。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2019-08-22T17:51:39.930

尝试这个：

```
str.split('\n').join(''); 
```

# search - 使用 Funnelback 查询参数在 AND 语句中嵌套 OR 语句

> ID：14572414
> 
> 赞同：2
> 
> 时间：2013-01-28T22:28:53.717
> 
> 标签：search, funnelback

我正在尝试在我的搜索中的一些 AND 语句中插入 OR 语句，并且无法确定我需要使用的运算符。

我基本上想做的是陈述以下内容（提示伪）

```
query = "nematode" && (meta_M == "North" || meta_M == "South") && (meta_N == "Category value 1" || meta_N == "Category value 2") 
```

我的尝试似乎一直在生成广泛的 OR 语句，它将我对**线虫**的初始查询（425 个结果）膨胀为 1,000 多个结果，而不是将其减少为原始结果的子集。

我已经咨询了[http://docs.funnelback.com/12.0/query_operator.html](http://docs.funnelback.com/12.0/query_operator.html)但只需要最后的推动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T04:14:46.210

Funnelback 的默认运算符是 and，指定 or（在底层查询语法中）的机制是将 or 选项包装在方括号中。我认为您最终想要的是以下查询。

```
nematode M:[North South] N:["Category value 1" "Category value 2"] 
```

看起来您正在尝试通过将查询分解为 CGI 参数来做到这一点。做...

```
query=nematode&meta_M=%5BNorth%20South%5D&meta_N=%5B%22Category%20value%201%22%20%22Category%20value%202%22%5D%20 
# Note:
#   meta_M decodes to [North South]
#   meta_N decodes to ["Category value 1" "Category value 2"] 
```

...满足您的需求，还是每个 meta_M 和 meta_N 值都必须在单独的 CGI 参数中？

# javascript - qUnit 不像浏览器那样运行设置代码？

> ID：14572415
> 
> 赞同：0
> 
> 时间：2013-01-28T22:28:55.517
> 
> 标签：javascript, qunit, chutzpah

在 stuff.js 中：

```
function init() {
    return "works";  // just here to ensure we can access this file from the test
}

window.MyNamespace = {}; 
```

在我的测试 JS 文件中：

```
/// <reference path="../../../project1/Shared/sub1/Javascript/stuff.js" />
test("foo test", function () {
    equal(init(), "works", "couldn't access source JS file");
    ok(window, "couldn't access source JS file");
    var ns = window.MyNamespace;
    ok(ns, "namespace is bad");
}); 
```

我`namespace is bad`在使用 Chutzpah 测试适配器运行上述测试时得到。我究竟做错了什么？qUnit/Chutzpah 不应该在尝试运行测试之前运行 stuff.js 中的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:55:08.147

我第一次错过了这个。将任何内容设置为空对象都有效，但该引用仍然评估为 false。这就是 ok 断言失败的原因。我需要对严格未定义进行更适当的检查：

```
ok("ns" in window, "namespace is bad"); 
```

[根据这里](https://stackoverflow.com/questions/3390396/how-to-check-for-undefined-in-javascript/13517037)的最佳答案。

# iphone - 使用 CoreGraphics 绘制内部阴影

> ID：14572417
> 
> 赞同：1
> 
> 时间：2013-01-28T22:29:08.040
> 
> 标签：iphone, ios, objective-c, cocoa-touch, core-graphics

我想在我的画中画出内部阴影。我使用核心图形绘制了一个红色徽章，并希望在徽章边界上有一个内部黑色阴影。请帮助如何实现这一点？

我附上我的代码和徽章图片：

```
- (void)drawBadgeInRect:(CGRect)iRect {
UIColor *badgeColor = [UIColor colorWithRed:202.0/255.0 green:19.0/255.0 blue:33.0/255.0 alpha:1.0];
// Drawing the badge
CGContextRef aContext = UIGraphicsGetCurrentContext();
CGContextSaveGState(aContext);

CGFloat aBadgeWidth = 16.0;
CGFloat aBadgeHeight = 16.0;
CGFloat aTextWidth = [self.badge.text sizeWithFont:[UIFont boldSystemFontOfSize:12.0]].width + 7.0f;

if (self.badge.text.length > 1) {
    aBadgeWidth = aTextWidth;
}
CGFloat aMaxX = CGRectGetMaxX(iRect) - 1.0 + 50;
CGFloat aMinY = CGRectGetMinY(iRect) + 0.5 - 50;
CGFloat aMaxY = aMinY + aBadgeHeight;
CGFloat aMinX = aMaxX - aBadgeWidth;

CGSize myShadowOffset = CGSizeMake (-50, 50);
CGFloat myColorValues[] = {1, 0, 0, 1};
CGColorRef myColor;
CGColorSpaceRef myColorSpace;
myColorSpace = CGColorSpaceCreateDeviceRGB ();
myColor = CGColorCreate (myColorSpace, myColorValues);
CGContextSetShadowWithColor (aContext, myShadowOffset, 1, badgeColor.CGColor);

CGContextBeginPath(aContext);
CGContextMoveToPoint(aContext, aMinX, aMinY);
CGContextAddArcToPoint(aContext, aMinX, aMaxY, aMaxX, aMaxY, 15.0);
CGContextAddLineToPoint(aContext, aMaxX, aMaxY);
CGContextAddLineToPoint(aContext, aMaxX, aMinY);
CGContextAddLineToPoint(aContext, aMaxX - aBadgeWidth, aMinY);
CGContextClosePath(aContext);
CGContextFillPath(aContext);

CGColorRelease (myColor);
CGColorSpaceRelease (myColorSpace);
CGContextRestoreGState(aContext); 
```

}

![在此处输入图像描述](../Images/4faefe853d0a612c500c666c4595cd2b.png)

# android - Spinner 状态在景观中不受尊重

> ID：14572420
> 
> 赞同：2
> 
> 时间：2013-01-28T22:29:08.753
> 
> 标签：android, android-spinner, android-orientation

我有一些 Spinner，我根据存储在数据库中的值填充它们。当我垂直握住手机时，它们工作得很好，但是当我开始活动时将其侧向握住（好像是横向查看），它们最终都会选择索引 0。在我的清单中，我将活动设置为始终以纵向显示，无论手机的方向如何，使用`android:screenOrientation="portrait"`.

**回复后编辑：** <snip>

我为 Spinner 使用我自己的 BaseAdapter 子类，并为它的项目使用我自己的自定义类。我尝试覆盖`.equals()`并`.hashCode()`在我的自定义项目中，但这没有帮助。我还在 Spinner 的`onRestoreInstanceState()`方法中设置了一个断点，以查看它是否以某种方式涉及，但它没有被调用。

**回答后编辑：**找到解决方案后，我认为最好删除我之前提供的所有细节。它绝不会帮助将来可能访问此页面的任何人。请参阅下面我自己的问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:28:41.010

与 anthropomo 的讨论让我想起了我在我的自定义适配器类中做一些异步工作，这似乎是罪魁祸首。这是一个比赛条件。我不知道为什么它在纵向握住手机时始终正常工作，而在横向上始终失败，但吸取了教训。永远记住你做异步事情的地方，并首先检查那里。

# c - 如何循环遍历字符串中的每个字母？

> ID：14572423
> 
> 赞同：1
> 
> 时间：2013-01-28T22:29:21.867
> 
> 标签：c, string, ascii

```
#include <stdio.h>

int main()

#include <stdio.h>

int main()

{
    char msg[31] = {'\0'};
    char encrypted[31] = {'\0'};
    int key;

    printf("Please enter a message under 30 characters: ");
    fgets(msg, 31, stdin);

    printf("Please enter an encryption key: ");
    scanf("%d", &key);

    int i = 0;

    while (msg[i] && ('a' <= msg[i] <= 'z' || 'A' < msg[i] < 'Z'))
{
    encrypted[i] = (msg[i] + key);
    i++;
}

    printf("%s\n", msg);
    printf("%d\n", key);
    printf("%s\n", encrypted);

} 
```

好的，我有我的代码来增加字符，但我不知道如何让它忽略特殊字符和空格。另外我如何使用`%`循环回`'a'`和`'A'`？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:46:01.223

从 scanf 获取字符串：

```
char msg[31];
scanf("%30s", msg); 
```

或（效率较低，因为您必须先用 0 填充数组）

```
char msg[31] = { 0 };
scanf("%30c", msg); 
```

迭代字符串与 for 循环一样简单（请务必使用 c99 或 c11）

```
int len = strlen(msg);
for(int i = 0; i < len; i++) {
    char current = msg[i];
    //do something
    msg[i] = current;
} 
```

“加密”（即加密）一个字符需要几个步骤

1.  确定我们是否有大写字符、小写字符或非字母字符
2.  确定字母表中的位置（如果是字母表）。
3.  使用模运算符 (%) 更新位置
4.  更正位置，如果是字母

我可以在这里给你代码，但是你不会从自己做的事情中学到任何东西。相反，我鼓励您根据我上面提供的步骤来实现密码。

请注意，您可以执行以下操作：

```
char c = 'C';
char e = 'E' + 2; 
char lower_c = 'C' - 'A' + 'a'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:31:51.033

`scanf`并且`fgets`在这种情况下看起来很好，就像你使用它们的方式一样。

在 C 中，字符串只是一个字符数组。因此，您可以使用`for`循环和数组索引访问每个元素：

```
for (int i = 0; i < strlen(str); i++) {
  char thisChar = str[i];
  //Do the processing for each character
} 
```

您可以根据需要执行算术运算`thisChar`，但注意不要超过 255。您可能需要检查`key`以确保它不会变得太大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:32:01.470

1.  你只需要一个简单的`for`循环：

    ```
    for (int i = 0; i < 31; i++)
    {
        // operate on msg[i]
    } 
    ```

    如果您不知道开始字符串的长度，您可能更喜欢`while`检测空终止符的循环：

    ```
    int i = 0;
    while (msg[i])
    {
        // operate on msg[i]
        i++;
    } 
    ```

2.  你的`fgets`和`scanf`可能很好，但就个人而言，我在阅读输入时会保持一致，并且`fgets`对于这一切。然后你可以稍后出去`sscanf`。`key`

# android - 调用外部 Javascript 函数

> ID：14572425
> 
> 赞同：0
> 
> 时间：2013-01-28T22:29:25.467
> 
> 标签：android, jquery, cordova, local-storage

我有一个我正在用 Javascript/JQuery 编程的应用程序。我正在使用 PhoneGap 并希望在用户第一次打开应用程序时使用 localStorage 来存储用户凭据，然后在用户下次打开应用程序时自动填充。我想在页面加载时调用 checkPreAuth() 。但它没有调用我的函数。有谁能够帮我？

从 login.html 调用函数：

```
<script>
$(document).ready(function() {
checkPreAuth();
});
</script> 
```

我的 digest_auth.js 中的函数：

```
function checkPreAuth() {
var form = $("#loginForm");
    var values = new Array();
    var username = $('#username').val();
    var password = $('#password').val();
    if(window.localStorage["username"] == undefined && window.localStorage["password"] == undefined) {
        localStorage.setItem("username", username);
        localStorage.setItem("password", password);
        alert('Saved username and password');
    } else {
        alert(username + ', ' + password);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:04:22.753

也许这就是您问题的答案。我遇到了这个问题，我没有使用 jquery 的文档就绪，而是使用了这个： [JQuery document.ready vs Phonegap deviceready](https://stackoverflow.com/questions/12576062/jquery-document-ready-vs-phonegap-deviceready)

# cocos2d-iphone - NSColorWell 和 Cocos2D 图层问题

> ID：14572426
> 
> 赞同：0
> 
> 时间：2013-01-28T22:29:27.413
> 
> 标签：cocos2d-iphone, layer, nscolor

我想使用 NSColorWell 动态更改我的背景颜色。我正在使用 cocos2d 桌面框架。

我有一个显示 cocos2d 窗口的 GLView，我在旁边有一个 NSColorwell。当我单击颜色井颜色时，我希望背景可以“即时”更改为该颜色。

我将所有变量都放在一个名为设置的类中。我的 AppDeletgate 有 NSColorWell 的 IBActions。Cocos2D GLview 位于 HelloWorldLayer 中。

每当我在 NSColorWell 中选择一种颜色时，都会抛出异常。知道为什么吗？

原谅代码转储，但我希望你们都能够确切地看到我在做什么。我尝试了许多不同的方法来实现这一点。

AppDelegate.h

```
#import "cocos2d.h"

@interface AnimatorAppDelegate : NSObject <NSApplicationDelegate>
{
    NSWindow    *window_;
    MacGLView   *glView_;

@property (assign) IBOutlet NSWindow    *window;
@property (assign) IBOutlet MacGLView   *glView;

- (IBAction)bgColorWell:(id)sender;

@end 
```

AppDelegate.m

```
#import "AppDelegate.h"
#import "HelloWorldLayer.h"
#import "Settings.h"

@implementation AnimatorAppDelegate

@synthesize window=window_, glView=glView_;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    CCDirectorMac *director = (CCDirectorMac*) [CCDirector sharedDirector];

    [director setDisplayFPS:YES];
    [director setOpenGLView:glView_];
    [director setResizeMode:kCCDirectorResize_AutoScale];
    [window_ setAcceptsMouseMovedEvents:NO];
    [director runWithScene:[HelloWorldLayer scene]];
}

#pragma mark AppDelegate - IBActions

- (IBAction)toggleFullScreen: (id)sender
{
    CCDirectorMac *director = (CCDirectorMac*) [CCDirector sharedDirector];
    [director setFullScreen: ! [director isFullScreen] ];
}

- (IBAction)bgColorWell:(id)sender {
    NSLog(@"Color Well %@", [sender color]);
    HelloWorldLayer *layer = [[HelloWorldLayer alloc] init];
    [layer setBackgroundColorForLayer:[sender color]];
}

@end 
```

设置.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface Settings : NSObject {
    NSColor *_backgroundColor;
}

+ (Settings *) sharedSettings;

- (NSColor *) returnBackgroundColor;
- (void) setBackgroundColor : (NSColor *)c;
@end 
```

设置.m

```
#import "Settings.h"

@implementation Settings

static  Settings * _sharedSettings;

- (id) init {

    if (self =  [super init]){
//_backgroundColor = [NSColor colorWithDeviceRed:102/255.0f green:205/255.0f blue:170/255.0f alpha:1.0];
        _backgroundColor = [NSColor blueColor];
    }
    return self;
}

+ (Settings *) sharedSettings {
    if (!_sharedSettings) {
        _sharedSettings = [[Settings alloc] init];
    }

    return _sharedSettings;
}

- (NSColor *) returnBackgroundColor {
    return _backgroundColor;
}
- (void) setBackgroundColor : (NSColor *)c {

    _backgroundColor = c;
}

@end 
```

HelloWorldLayer.h

```
#import "cocos2d.h"
#import "Settings.h"

// HelloWorldLayer
@interface HelloWorldLayer : CCLayer
{
}

// returns a CCScene that contains the HelloWorldLayer as the only child
+(CCScene *) scene;

- (void) setBackgroundColorForLayer : (id) sender;

@end 
```

HelloWorldLayer.m

```
// Import the interfaces
#import "AppDelegate.h"
#import "HelloWorldLayer.h"
#import  "Settings.h"

// HelloWorldLayer implementation
@implementation HelloWorldLayer

+(CCScene *) scene
{
    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layer' is an autorelease object.
    HelloWorldLayer *layer = [HelloWorldLayer node];

    // add layer as a child to scene
    [scene addChild: layer];

    // return the scene
    return scene;
}

// on "init" you need to initialize your instance
-(id) init
{
    // always call "super" init
    // Apple recommends to re-assign "self" with the "super" return value
    if( (self=[super init])) {
        CGSize winSize = [[CCDirector sharedDirector] winSize];
    }
    return self;
}

- (void) setBackgroundColorForLayer : (id) sender {

    Settings *mySettings = [Settings sharedSettings];

    float red = [mySettings returnBackgroundColor].redComponent * 255;
    float green = [mySettings returnBackgroundColor].greenComponent * 255;
    float blue = [mySettings returnBackgroundColor].blueComponent * 255;

    CCLayerColor* colorLayer = [CCLayerColor layerWithColor:ccc4(red, green, blue, 255)];
    [self addChild:colorLayer z:0];

    NSLog(@"Red color: %f", red);
    NSLog(@"Green color: %f", green);
    NSLog(@"Blue color: %f", blue);

    //[self setBackgroundColorForLayer:sender];

    NSLog(@"This Background color is %@" , [mySettings returnBackgroundColor]);

} 
```

# sql-server-2008 - 从 SQL 图像字段读取数据

> ID：14572431
> 
> 赞同：1
> 
> 时间：2013-01-28T22:29:54.327
> 
> 标签：sql-server-2008, reporting-services, dynamics-ax-2009, axapta

在 AX 2009 中，我需要从 SSRS 报告中的 SYSDATABASELOG 表的 DATA 字段（类型 IMAGE）查询和报告。但是，它似乎存储为原始数据，我需要能够读取/解释该字段。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:43:52.050

我以前也遇到过这个问题，也使用 SSRS 报告。

您应该做的是将 SSRS 图像源从 Embedded 转换为 DB。

您的初始数据应如下所示：

![在此处输入图像描述](../Images/1b40c747c4348c54447d777639d4586f.png)

打开 SSRS 并创建一个图像。在图像属性中，您需要将选定的图像源更改为`Database`： ![在此处输入图像描述](../Images/2a10e0818e1ed52016570055d42de83a.png)

在使用此字段下，从您的查询中放置相关字段。

并在 MIME 类型下选择图像格式：

![在此处输入图像描述](../Images/eb6b39db9e6a45c1d55f9c96a366a814.png)

那它！

**笔记：**

在我的小型研究中，我遇到了[**这个**](http://msdn.microsoft.com/en-us/library/ms187993.aspx)MSDN，要求避免使用 IMAGE 类型，因为它将在 Microsoft SQL Server 的未来版本中被删除。

给点建议！

![在此处输入图像描述](../Images/b3e9f24e67965b2f32c063c003548cb9.png)

# php - 将多个查询组合到一个输出数组中以进行 JSON 编码。最好的方法？

> ID：14572434
> 
> 赞同：0
> 
> 时间：2013-01-28T22:30:06.617
> 
> 标签：php, android, mysql, web-services

好的，到目前为止，我已经尝试过使用 UNION ALL 并将其压缩到一个查询中，但是我的数组键不能正常工作。

起初我试过这个：

```
 $query = "SELECT student_no AS test
            FROM student
            WHERE student_no='$studentno' AND password='$password'
            UNION ALL
            SELECT group_id AS group_id
            FROM student_group
            WHERE student_no='$studentno'
            UNION ALL
            SELECT leader AS leader
            FROM team
            WHERE leader='$studentno'"; 
```

但它返回的是 student_no:student_no、student_no:group_id 和 student_no:leader。

它将所有键填充为 student_no，即第一个查询。或者如上所述，在我尝试用 AS 强制它们时进行测试。

我通过运行查询 3 次并将结果填充到数组中 3 次来使其工作，但实际上它的大小代码明智地增长了 3 倍，现在感觉效率很低。

请记住，这是针对大学项目的，但是由于我手头已经有了解决方案并了解了正在发生的事情的基础知识，因此我认为可以提前发布。

以为我会添加它现在返回的实际 JSON：

```
[
   {
      "student_no":"testing"
   },
   {
      "group_id":"testio"
   },
   {
      "leader":"teeesstt"
   }
] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:51:57.807

`UNION`正如[MySQL doc](http://dev.mysql.com/doc/refman/5.5/en/union.html)解释的那样，这不能直接用.

> 第一个 SELECT 语句中的列名用作返回结果的列名

可能的是：

```
$query = "SELECT 'student_no' AS key, student_no AS value
        FROM student
        WHERE student_no='$studentno' AND password='$password'
        UNION ALL
        SELECT 'group_id',group_id
        FROM student_group
        WHERE student_no='$studentno'
        UNION ALL
        SELECT 'leader',leader
        FROM team
        WHERE leader='$studentno'"; 
```

您将获得第一列中的索引和第二列中的值。

我不认为这比做 3 个查询更好......

# jsp - 在不更改页面的情况下提交 Struts 2 表单？

> ID：14572436
> 
> 赞同：2
> 
> 时间：2013-01-28T22:30:19.673
> 
> 标签：jsp, struts2

我有一个 Struts2 表单，它包含在页面上的 DIV 覆盖中。当我提交此表单时，我希望它隐藏/显示表单底部的隐藏文本区域，让用户知道表单已提交。从那里，用户可以关闭覆盖并返回他们的工作。我在完成此操作时遇到问题。在我退货时，如果我没有在退货中提供另一页，则该页面将重定向到空白页`SUCCESS`。`NONE`如何提交表单并保持在同一页面内而完全不重定向？

目前我正在使用 JavaScript 提交表单

```
document.forms['formName'].submit(); 
```

我使用 JavaScript 而不是该`<s:submit/>`选项，因为在提交表单之前需要在表单本身上设置其他参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:39:07.920

你需要的是：[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

[在 Struts2 中，您可以使用Struts2-Dojo Plugin](http://mvnrepository.com/artifact/org.apache.struts/struts2-dojo-plugin)`<sx:div>`（自 Struts 2.1 起已弃用，但仍然存在并工作）开箱即用地实现它。

基本上，您使用 dojo 主题定位 div，并且您的 Action 的结果（一个包含 HTML/JSP 片段的 JSP 文件）将填充 div 而无需重新加载页面。

但是，如果您使用的是最新版本的 Struts2，您可以使用[Struts2-jQuery Plugin轻松实现这一点，并且您也可以在](http://code.google.com/p/struts2-jquery/)[其 Showcase](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)中找到所有带有代码的工作示例。

这是一个例子：

```
<s:url id="ajax" value="/ajax1.action"/>
<sj:div href="%{ajax}" indicator="indicator">
       <img id="indicator" src="images/indicator.gif" 
            alt="Loading..."    style="display:none"/>
</sj:div> 
```

相当容易 ：）

如果您需要在运行时设置参数，您显然也可以更改`href`属性`javascript`......只需通过 id 获取 id 并更改`href`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:53:59.897

您需要使用***Ajax 调用***。请看下面的例子，

***Struts.xml 配置：***

```
 <action name="**ActionName**" class="**Actionclass**"   method="**Method-calling**">
        <result type="stream">
            <param name="contentType">text/html</param>
            <param name="inputName">inputStream</param>
        </result>
        <result name="input">/Error.jsp</result>
    </action>
</package> 
```

***动作类*** public class **ActionClass**扩展 ActionSupport { private InputStream inputStream;

```
public String **Method-calling()** 
{
    //Calling Business Logic
            if(Business logic check condition)
                 {
         inputStream=new StringBufferInputStream("return x");               
                 }
    else
         {
         inputStream=new StringBufferInputStream("return y");
         }
    return SUCCESS;
}

public InputStream getInputStream() 
{
    return inputStream;
}
public String execute() 
{
    return SUCCESS;
} 
```

}

***Html 文件*** *Ajax 调用示例*

```
jQuery('***#replace-with-tag-id***').on('***blur(can  be any action)***', function() {
    var varE = jQuery('***#replace-with-tag-id***').val();
        jQuery.ajax({
            method:"GET",
            url: "***Actoin-name-struts.xml***.action", //"callAJax.action",
            data: "email="+varEmail,
            success: function(data) 
                                    {
                if(""+data == "return x") 
                                    {
                                    alert("x has been returned");
                } 
                                else 
                                    {
                                    alert("y has been returned");
                }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown){
                alert('Error=' + textStatus);
                alert("errorThrown"+errorThrown);
                alert("response text = "+XMLHttpRequest.responseText);
            }

        });
    } 
}).trigger('blur'); 
```

我希望，我已经消除了你的疑问。

# python - Python：动态生成字符串（基于一些模板）

> ID：14572439
> 
> 赞同：1
> 
> 时间：2013-01-28T22:30:22.263
> 
> 标签：python, string, python-2.7

我正在尝试根据使用我的模块的某些代码请求的字符串类型从我的模块生成特定的 xml 字符串。这些 xml 字符串中的每一个都包含一些动态生成的数据。例如，许多这些 xml 字符串都有一个使用另一个函数生成的 cookie 字段。

我从一个 python 字典开始，它使用预先填充的动态字段（即 cookie）初始化所有 xml 字符串（即，不完全是动态的）。然后我调用字典来获取相关的 xml 字符串。

这种方法的问题是 cookie 每小时过期，因此模块在一小时后返回的字符串具有这些过期值。理想情况下，我希望拥有某种形式的生成器函数（不确定在这种情况下是否可能），它在根据请求的 msg_type 请求它们时返回正确格式的字符串（如下例所示）。保存在这个字典中的每个 xml 字符串都是唯一的格式，所以我不能完全拥有某种通用的模板 xml 生成器。

例如，我定义的 dict 与此处的 get_msg 字典类似：

```
 get_msg["msg_value_1"] = """<ABC cookie=""" + getCookie() + """ > 
                                     <XYZ """ + foo_name +""">
                                     </XYZ>
                              </ABC>"""

    get_msg["msg_value_2"] = """<ABC cookie=""" + getCookie() + """ > 
                                     <some text """ + bar_name + """>
                                     </XYZ>
                              </ABC>""" 
```

对于每个新的 msg 请求都会调用 getCookie() 来动态生成这些 xml 字符串，这将是一个好方法。任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:43:27.093

在 Python 中，函数是*一等对象*。这意味着您可以将一个函数作为参数传递给另一个函数。

```
def get_msg(function_to_call_to_get_injection_bit, tag_name_function,
            cookie_function):

    tagname = tag_name_function()
    injection = function_to_call_to_get_injection_bit()
    cookie = cookie_function()

    return '<ABC cookie="%s">' % (cookie) +
               '<%s %s></%s></ABC>' % (tagname, injection, tagname)

def get_injection():
    return foo_name

def get_tag_name_1():
    return "XYZ"

def get_tag_name_2():
    return "SomeText"

get_msg(get_injection, get_tag_name_1, getCookie)
get_msg(get_injection, get_tag_name_2, getCookie) 
```

您只需在`get_msg`每次需要消息时调用，并将生成与 cookie 无关的消息部分的函数传递给它。

从您的问题来看，尚不完全清楚问题是什么。但这并不是真正的“生成器函数”：我认为您不想返回一个函数（这**是**可能的），您想返回 XML 字符串并自定义它的构建方式。

正如 BenDundee 上面评论的那样，使用 XML 库来构建 XML 可能会更好，而不是手动构建字符串。Python 内置了几个选项，并且在外部提供了更多选项（例如美妙的`lxml`库）。

# gwt - 在 GXT 文本字段中显示图像按钮

> ID：14572441
> 
> 赞同：0
> 
> 时间：2013-01-28T22:30:26.127
> 
> 标签：gwt, gxt

有没有办法用 GXT API 实现这种组件？

图像需要在文本字段内。它必须对鼠标点击做出反应，并且必须有自己的工具提示。 ![在此处输入图像描述](../Images/2cd31b44da2ebb88a1c802a93f354136.png)

# google-chrome-extension - 您如何使用 Browserify 模块化您的 Chrome 应用程序？

> ID：14572448
> 
> 赞同：7
> 
> 时间：2013-01-28T22:30:50.433
> 
> 标签：google-chrome-extension, browserify

我观看了以下[Google Apps Office 视频](https://www.youtube.com/watch?v=gkb_x9ZN0Vo)并了解了如何使用 browserify 使用 node CommonJS 打包系统将您的 JS 打包到一个文件中。我喜欢这个想法，因为它还添加了许多移植到浏览器的节点库，并且可以处理 CoffeeScript。

视频没有涵盖的一件事是如何制作一个具有多个视图的 Chrome 应用程序仍然以*DRY*方式使用 browserify。让我解释。通常，您的 browserify 命令采用一系列 JS 文件（设计为模块）并将其连接成带有一些包装糖的单个 JS 文件。很高兴您从内容页面、背景页面或弹出页面中引用该 JS 文件。但是，如果您的应用程序同时具有背景页面**和**你会在每个弹出页面中包含相同的编译 JS 文件吗？这不会导致 chrome 加载脚本两次（在两个实例中）吗？如果是这样，那么解释一切只是为了得到你想要的部分似乎是一种浪费。或者 require()/exports 模式是否可以防止对特定上下文可能不需要的模块进行不必要的解释？

如果这不是最佳实践，应该如何打包模块，使每个*页面*都以干巴巴的方式获取所需的模块，而不必重复自己或每页有单独的 browserify 包？其他人是如何处理这个话题的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-31T22:45:30.587

我发现一种行之有效的技术是为每个上下文（例如背景、内容等）创建一个单独的包。这是一个示例目录结构：

```
.
├── extension
│   ├── js
│   └── manifest.json
├── lib
│   ├── background
│   │   └── index.js
│   ├── content
│   │   └── index.js
│   └── frame
│       ├── index.js
│       ├── models
│       │   └── ...
│       └── views
│           └── ...
└── package.json 
```

在`lib`目录中，为每个上下文创建一个文件夹，并将其`index.js`作为入口点。该文件将为该特定上下文引导应用程序，`require`读取任何模块并初始化应用程序的该部分。

然后使用[browserify](http://browserify.org/)或[watchify](https://github.com/substack/watchify)在以下位置创建捆绑包`./extension/js/`：

```
$ browserify ./lib/background/index.js -o ./extension/js/background.js
$ browserify ./lib/content/index.js -o ./extension/js/content.js
$ browserify ./lib/frame/index.js -o ./extension/js/frame.js 
```

如果您打算在 和 中重用相同的模块`background.js`，则`content.js`只需`require()`在每个上下文中使用它，browserify 将相应地构建捆绑包。

这个过程可以通过使用[Gruntfile.js](https://github.com/christophercliff/chrx/blob/master/examples/basic/Gruntfile.js)或[自定义 npm 脚本](https://github.com/christophercliff/chrx/blob/master/examples/basic/package.json#L6)来简化。

[您可以在此处](https://github.com/christophercliff/chrx/tree/master/examples/basic)尝试此方法的工作示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T12:08:40.080

在多个入口页面和一个单一的 JS 脚本的情况下，想法是封装您的 JS 逻辑，使您的 background.html 或后台脚本将所需的函数/对象暴露给全局（读取窗口）上下文。然后在其他条目页面（例如选项或弹出窗口）中，您可以使用它来访问后台页面的全局上下文：

```
Application = chrome.extension.getBackgroundPage().myGlobalFunction(); 
```

[这个 SO Question](https://stackoverflow.com/questions/7971566/chrome-extension-getbackgroundpage-returns-null-why)提供了一些关于布局和相互作用的见解。

这允许您拥有一个版本的 browserify 创建的 JS，但允许它在相同扩展的其他页面上通信/执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T08:50:27.933

Browserify 之类的库通常设计为支持“单页 Web 应用程序”。也就是说，应用程序中通常只涉及一个 HTML 文件（通常是 public/index.html），它只是作为加载硬依赖项（例如 browserify 的串联输出）的入口点。其他一切都由 Javascript 以及您选择的任何前端框架（即 Backbone、SpineJS 等）管理。

虽然单页 Web 应用程序可能包含多个“屏幕”数据，但这些页面的实际 HTML 通常是 html 的片段（通常使用 javascript 模板中间件，如 Handlebars、Moustache、ECO 等），通过 AJAX 加载，然后插入到页面的运行主体中。也就是说 - 这些新的页面片段已经可以访问之前加载在此页面中的 javascript。

因此，您对 SPA 感到厌烦，因为您只有一页，因此您不会重复使用 JS 导入。

如果您以前习惯于全栈 Web 开发，其中大部分 UI 由服务器端语言呈现，那么单页 Web 应用程序的想法可能会有点令人震惊。虽然大多数 SPA 倾向于具有服务器端组件，但这通常简化为提供数据端点（AJAX 调用将命中）和持久性的 RESTful API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-04T10:02:21.947

在 windows 10 下，我曾经`MKLINK`在项目之间共享我的源脚本（js）和样式（css）文件

```
MKLINK /J "D:\Projects\Chrome Extension Projects\myproject\shared" "D:\Projects\Chrome Extension Projects\shared" 
```

# ios - MKMapView - 获取区域的角落

> ID：14572450
> 
> 赞同：1
> 
> 时间：2013-01-28T22:30:55.463
> 
> 标签：ios, objective-c, mkmapview, latitude-longitude, region

我目前正在尝试获取当前显示区域的西南角和东北角（每个角的长和纬度）。我正在使用以下委托来获取有关区域更改的通知：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated; 
```

我希望有一个人可以帮助我！

干杯，卢卡斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T22:52:22.583

该区域将为您提供中心（纬度、经度）、纬度跨度（以纬度为单位）和经度跨度。

要找到西北角的纬度，请将 1/2添加`latitudeDelta`到`latitude`的`region`。`center`根据需要对其他 3 个值重复，根据需要添加或减去。

```
CLLocationCoordinate2D northWest = CLLocationCoordinate2DMake(
    myRegion.center.latitude + myRegion.span.latitudeDelta / 2.0,
    myRegion.center.longitude - myRegion.span.longitudeDelta / 2.0) 
```

（代码未经测试，只是从我的头顶）。

# java - 使用java将mysql数据库放在服务器上

> ID：14572455
> 
> 赞同：-1
> 
> 时间：2013-01-28T22:31:17.680
> 
> 标签：java, mysql, servlets

我是在服务器上设置数据库的新手，但我有处理数据库的经验。

我想将我的 MYSQL 数据库放在服务器上并连接它，以便拥有它的人可以从任何地方访问我的 java 程序。我听到我的学校老师说我需要一个 servlet 来获得连接？我研究过servlet的。但是，我没有得到这个 servlet 应该保存在哪里。在 java 文件夹上，还是在服务器上？或者它就像在我的服务器上运行 phpmyadmin 这样简单，以便可以从中访问表并将服务器根放在 javadb 连接中而不是本地主机？

对不起，如果这听起来像一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:06:06.873

如果您想从任何地方访问/修改 MySQL 数据库中的数据，您将需要一些软件组件：

*   一个数据库服务器，它将托管您的 MySQL 数据库。
*   一个 Servlet 容器，它将承载将修改/访问数据库中数据的 Java 程序（即 Servlet）。此服务器必须具有 Internet 连接，以便您可以从任何地方访问它。
*   一个包含应用程序所需的所有 Servlet 的包（又名 WAR）。假设您需要在表中插入一行，您需要为此构建一个 Servlet。此外，如果您想运行查询并在屏幕中显示结果。

您可以在一台 PC 中拥有所有容器，或者您可以使用多个云平台，这些平台在 Web 上免费提供所有这些组件（除了 Servlet，您必须对其进行编码）。

# jquery - 带有敲除的工具提示的 Qtip 给 Object [object Object] 没有方法“qtip”错误

> ID：14572458
> 
> 赞同：0
> 
> 时间：2013-01-28T22:31:35.037
> 
> 标签：jquery, knockout.js, qtip

尝试从我的代码中调用 qtip 方法时出现错误：Object [object Object] has no method 'qtip' 错误

问题是它在没有敲除模板绑定的情况下不使用时有效。但由于我使用的是 qtip 库在实际内容之前加载，这就产生了一个问题。尝试自定义绑定，在 init 函数中调用 .qtip() 方法时，我仍然遇到相同的错误。

问题是 $(element).qtip 为空

```
ko.bindingHandlers.loadqtip = {
    init: function(element, valueAccessor) {
            alert($(element).qtip==null); //This returns true
        } 
```

尝试在这里创建一个小提琴示例：[jsfiddle.net/mBpJB](http://jsfiddle.net/mBpJB)

使用：淘汰赛 v2.1.0，qTip2 v2.0.0，jQuery v1.8.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:44:15.640

您的小提琴最大的问题是您*在*执行`ko.applyBindings`. 自定义绑定应该在绑定之前。您还有一个双引号，它弄乱了 HTML 格式。

这是一个正常工作的小提琴：http: [//jsfiddle.net/jearles/mBpJB/3/](http://jsfiddle.net/jearles/mBpJB/3/)

# mysql - Mysql检查常规选择中是否存在行？

> ID：14572466
> 
> 赞同：0
> 
> 时间：2013-01-28T22:32:00.900
> 
> 标签：mysql

我有一个关于mysql的问题。是否可以检查外部表中是否存在行？例如，我需要显示最近上传的图像，我想用它显示一些用户数据并显示用户是否在线。

我目前的查询是：

```
SELECT `users`.`username`, `users`.`location`, `users`.`age`, `users`.`dateofbirth`
FROM (`images`)
JOIN `users` 
  ON `users`.`userid` = `images`.`userid`
WHERE `images`.`active` =  1
LIMIT 12 
```

但我错过了“在线”部分。是否可以在选择中使用它？例如，如果该行存在，则在名为 online 的选择中会有一个值，它的值 = 1，如果用户不在线（表中没有行），则该值需要为 0。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:37:32.167

似乎您只需要`LEFT JOIN`在另一张桌子上使用 a ，然后使用 a`CASE`来提供值：

```
SELECT `users`.`username`, 
  `users`.`location`, 
  `users`.`age`, 
  `users`.`dateofbirth`,
  case when o.`userid` is null then 0 else 1 end UserOnline
FROM (`images`)
JOIN `users` 
  ON `users`.`userid` = `images`.`userid`
left join online_table o
  on `users`.`userid` = o.`userid`
WHERE `images`.`active` =  1
LIMIT 12 
```

# struts2 - Struts2 RequestAware接口的使用

> ID：14572467
> 
> 赞同：0
> 
> 时间：2013-01-28T22:32:06.053
> 
> 标签：struts2

如果我的动作类如下：

```
<!-- language: lang-java -->

package org.tutorial.struts2.action;
import java.util.Map;
import org.apache.struts2.interceptor.RequestAware;
import org.tutorial.struts2.service.TutorialFinder;
import com.opensymphony.xwork2.Action;

public class TutorialAction implements Action, RequestAware {
    private String language;
    private String bestTutorialSite;

    public String execute() {
        System.out.println(language);
        setBestTutorialSite(new TutorialFinder().getBestTutorialSite(language));
        System.out.println(bestTutorialSite);       
        if (getBestTutorialSite().contains("Java"))
            return SUCCESS;
        else
        return ERROR;
    }

    public String getLanguage() {
        return language;
    }

    public void setLanguage(String language) {
        this.language = language;
    }

    public String getBestTutorialSite() {
        return bestTutorialSite;
    }

    public void setBestTutorialSite(String bestTutorialSite) {
        this.bestTutorialSite = bestTutorialSite;
    }

    @Override
    public void setRequest(Map<String, Object> requestObj) {
        System.out.println(bestTutorialSite);
        requestObj.put("message", bestTutorialSite);
    }

} 
```

在执行方法之前调用此操作时，该语言已由 Struts2 框架填充。在执行方法中，`setBestTutorialSite`方法是填充私有字段`bestTutorialSite`。

现在我想到了将这个私有字段设置`bestTutorialSite`为请求属性（在`setRequest`方法中）。但是我注意到在填充任何私有字段（如语言）之前首先调用此方法。因此在该`setRequest`方法中，系统打印`bestTutorialSite`始终为空。

我以为我可以`bestTutorialSite`在调用 JSP 页面之前使用（从执行方法中捕获）设置此属性。

我不认为我完全掌握了对 Struts2 流程的理解——显然！:OP

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:14:29.447

我假设您正在使用如下所示的*defaultStack*：

```
<interceptor-stack name="defaultStack">
    <interceptor-ref name="exception"/>
    <interceptor-ref name="alias"/>
    <interceptor-ref name="servletConfig"/>
    <interceptor-ref name="prepare"/>
    <interceptor-ref name="i18n"/>
    <interceptor-ref name="chain"/>
    <interceptor-ref name="debugging"/>
    <interceptor-ref name="profiling"/>
    <interceptor-ref name="scopedModelDriven"/>
    <interceptor-ref name="modelDriven"/>
    <interceptor-ref name="fileUpload"/>
    <interceptor-ref name="checkbox"/>
    <interceptor-ref name="staticParams"/>
    <interceptor-ref name="params">
        <param name="excludeParams">dojo\..*</param>
    </interceptor-ref>
    <interceptor-ref name="conversionError"/>
    <interceptor-ref name="validation">
        <param name="excludeMethods">input,back,cancel,browse</param>
    </interceptor-ref>
    <interceptor-ref name="workflow">
        <param name="excludeMethods">input,back,cancel,browse</param>
    </interceptor-ref>
 </interceptor-stack> 
```

如您所见，*servletConfig拦截器位于**params*拦截器之前，这意味着将在您的操作上设置第一个请求（使用*servletConfig*），然后您的操作将填充请求参数（使用*params*）。

您想要实现的是更改拦截器的顺序，如果使用错误的方式可能是有害的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T02:36:07.450

我认为请求拦截器将首先执行，然后执行 execute() 方法。这可能是问题所在。

# objective-c - NSPanel 作为 HUD 面板 - 全屏显示奇怪的空白空间

> ID：14572468
> 
> 赞同：0
> 
> 时间：2013-01-28T22:32:19.583
> 
> 标签：objective-c, macos, cocoa, appkit

我有带有样式实用程序面板（灰色小标题栏）的 NSPanel 窗口。我可以使用标准 MAC OS X 全屏功能全屏显示此窗口。但是发生了一件奇怪的事情——窗口的内容视图没有使用整个屏幕，有一个很小的空白空间，就像标题栏一样高。

当我将窗口样式更改为常规面板（意味着更高的标题栏）时，这不会发生。

Interface builder中设计的NSPanel参数： ![在界面生成器中设计的 Windows](../Images/3b82569cfe70a287a0eb2314d0d80004.png)

剪辑此窗口的全屏视图。注意空白 - 红色箭头指向的地方。当我将 Style 更改为**Regular panel时****，不会发生这种**情况。

 **![全屏预览](../Images/1ae1378aa75e14f4155dee6018938a6a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:27:35.180

尝试使用 NSWindow 而不是 NSPanel

```
- (id)initWithContentRect:(NSRect)contentRect styleMask:(NSUInteger)windowStyle backing:(NSBackingStoreType)bufferingType defer:(BOOL)deferCreation {
       if (self = [super initWithContentRect:contentRect
                            styleMask:NSBorderlessWindowMask
                              backing:NSBackingStoreBuffered defer:deferCreation]) {

             [self setOpaque:NO];
             [self setExcludedFromWindowsMenu:NO];

        }
        return self;
} 
```

这是一个[与quazi相关的答案](https://stackoverflow.com/a/4447132/703161)**

# php - PHPUnit 找不到异常类

> ID：14572469
> 
> 赞同：12
> 
> 时间：2013-01-28T22:32:20.953
> 
> 标签：php, unit-testing, symfony, namespaces, phpunit

我在 5.3 中使用命名空间并尝试使用 Symfony2 框架测试 PHPUnit 中的预期异常。

我期待抛出异常，当我使用

`$this->setExpectedException('ImageResizerException');`

我收到以下错误：

> 塞巴斯蒂安伯格曼的 PHPUnit 3.7.13。
> 
> 从 /var/www/branches/3.6.0/api/app/phpunit.xml.dist 读取的配置
> 
> .E.......
> 
> 时间：1 秒，内存：18.25Mb
> 
> 有 1 个错误：
> 
> 1) AssetManagerBundle\Tests\Services\ImageResizerTest::testOriginalFile ReflectionException: 类 ImageResizerException 不存在
> 
> 失败！测试：19，断言：54，错误：1。

我有以下结构：

1.  AssetManagerBundle\Services\ImageResizer.php
2.  AssetManagerBundle\Services\Exceptions\ImageResizerException.php
3.  AssetManagerBundle\Tests\Services\ImageResizerTest.php

我的测试课：

```
<?php
    namespace AssetManagerBundle\Tests\Services;

    use AssetManagerBundle\Services\ImageResizer;
    use AssetManagerBundle\Services\Exceptions\ImageResizerException;

class ImageResizerTest extends \PHPUnit_Framework_TestCase
{

    public function testOriginalFile()
    {
        $ir = new ImageResizer();
        // test default value
        $this->assertEquals('', $ir->getOriginalFile());

        // test invalid filename
        $this->setExpectedException('ImageResizerException');
        $ir->setOriginalFile('/tmp/test.file');
        $this->assertEquals('/tmp/test.file', $ir->getOriginalFile());

        // test valid filename
        $temp_name  = tempnam(sys_get_temp_dir(), 'test_'.time());
        $handle     = fopen($temp_name, 'w+');
        fwrite($handle, ' ');
        fclose($handle);

        $ir->setOriginalFile($temp_name);
        $this->assertEquals($temp_name, $ir->getOriginalFile());
    }
    // more code....
} 
```

我是否必须为 PHPUnit 做一些特别的事情才能看到我的异常类？

PHP版本：

> 带有 Suhosin-Patch (cli) 的 PHP 5.3.10-1ubuntu3.5（构建时间：2013 年 1 月 18 日 23:45:59）版权所有 (c) 1997-2012 PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2012 Zend Technologies with Xdebug v2.1.0, 版权所有 (c) 2002-2010, Derick Rethans

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-28T22:35:30.550

您需要完全限定异常类及其名称空间。例如：

```
$this->setExpectedException('\AssetManagerBundle\Services\Exceptions\ImageResizerException'); 
```

或者

```
use AssetManagerBundle\Services\Exceptions\ImageResizerException;
$exceptionClass = get_class(new ImageResizerException(''));
$this->setExpectedException($exceptionClass); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T22:37:25.250

你需要使用异常的[FQCN](http://php.net/language.namespaces.dynamic)`ImageResizerException`：

```
AssetManagerBundle\Services\Exceptions\ImageResizerException 
```

文件顶部的`use`子句仅适用于该文件 - 不适用于在其他文件中包含代码的 PHPUnit。

*更正：*不是（仅）该`use`子句不适用于 PHPUnit，而是因为它[`ReflectionClass`](http://php.net/ReflectionClass)需要 FQCN。这与在 PHP 中使用变量（动态）类名时类似`new $var`：

```
<?php

namespace Sugar {
    class Exception extends \Exception {}
}
namespace {
    use Sugar\Exception;

    $class = 'Sugar\Exception';
    $e = new $class;
    var_dump($e);
} 
```

输出：

```
object(Sugar\Exception)#1 (7) {
  ["message":protected]=>
  string(0) ""
  ["string":"Exception":private]=>
  string(0) ""
  ["code":protected]=>
  int(0)
  ["file":protected]=>
  string(45) "/tmp/execpad-7141d0116de7/source-7141d0116de7"
  ["line":protected]=>
  int(10)
  ["trace":"Exception":private]=>
  array(0) {
  }
  ["previous":"Exception":private]=>
  NULL
} 
```

演示：[http ://eval.in/7883](http://eval.in/7883)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-24T03:00:03.593

我遇到了类似的问题，但是使用 phpunit，在声明 @expectedException 时，它还需要 FQCN。

```
 /**
 * @expectedException \PHPNS\Core\MyCustomException
 */
public function testIfListIsEmpty()
{
    $fab = new PHPList();                         
} 
```

希望对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-28T02:37:38.000

不要写类名，而是使用类的完整命名空间。然后你不会得到“类不存在”异常。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-30T09:08:46.287

```
 $this->setExpectedException(ImageResizerException::class); 
```

是使用`use`语句中导入的命名空间的方法

# node.js - 如何在应用程序路由中使用 socket.io

> ID：14572471
> 
> 赞同：1
> 
> 时间：2013-01-28T22:32:42.717
> 
> 标签：node.js, express, socket.io, emit

我用`nodejs`. 我`express 3`用作框架和`socket.io`客户端服务器通信。目前我正在尝试创建一个注册表单。它工作得很好，但我不确定如何正确使用`socket.io`和`express`一起使用。

我检查电子邮件和密码是否有效，如果不是，我想向客户端推送一个 json 对象。

我使用这个应用程序路线：

```
app.post('/user', function (req, res) {
    var user = new User(req.body.user), 
        errors;

    function userSaveFailed() {
        res.render('index');
    }

    errors = user.validation(req.body.user.confirm);
    user.save(errors, function (err) {
        if (err) {
            // Here I would like to send the Object to the client.
            io.sockets.on('connection', function (socket) {
                socket.emit('registration', {
                    errors : errors
                });
            });
            return userSaveFailed();
        }
        res.render('user/new.jade');
    });
}); 
```

好吧，客户端得到了 json 对象，但是如果另一个客户端连接到`'/'`他也得到了对象。我想我用`socket.io`错了。`.emit()`在应用程序路由中使用 a 的常用方法是什么？`socket.io`是否有必要`express`为此测试使用全局授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:14:47.923

one way to do that (if you really want to use socket.io to reply to a post, which you probably shouldn't), is to use one room per user session.

so on the `on("connection", ...)` do something like so:

`socket.join(room)` where room is something unique to the session (like the session id for example).

then to send back to only one user:

`socketio.of('/')['in'](room).emit(...);`, room being that same unique id used above.

# algorithm - 手势识别的HMM算法

> ID：14572472
> 
> 赞同：7
> 
> 时间：2013-01-28T22:32:44.077
> 
> 标签：algorithm, kinect, gesture-recognition, gestures, hidden-markov-models

我想开发一个使用 Kinect 和`hidden Markov models`. 我在这里看了一个教程：[HMM 讲座](http://www.youtube.com/watch?v=jY2E6ExLxaw)

但我不知道如何开始。什么是状态集，如何规范化数据才能实现`HMM`学习？我知道（或多或少）应该如何处理信号和简单的“从左到右”的情况，但是 3D 空间让我有点困惑。谁能描述它应该如何开始？

任何人都可以描述步骤，如何做到这一点？特别是我需要知道如何做模型以及`HMM`算法的步骤应该是什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T20:34:39.563

将 HMM 应用于手势识别的一组方法是应用与语音识别常用的类似架构。

HMM 不会超过空间而是随着时间的推移，并且每个视频帧（或从帧中提取的一组特征）将是 HMM 状态的发射。

不幸的是，基于 HMM 的语音识别是一个相当大的领域。许多书籍和论文都描述了不同的架构。我建议从 Jelinek 的“语音识别统计方法”（[http://books.google.ca/books?id=1C9dzcJTWowC&pg=PR5#v=onepage&q&f=false](http://books.google.ca/books?id=1C9dzcJTWowC&pg=PR5#v=onepage&q&f=false)）开始，然后从那里参考参考资料。另一个资源是 CMU sphinx 网页 ( [http://cmusphinx.sourceforge.net](http://cmusphinx.sourceforge.net) )。

要记住的另一件事是，基于 HMM 的系统可能不如条件随机场或最大边距识别器（例如 SVM-struct）等判别方法准确。

对于基于 HMM 的识别器，整个训练过程通常如下所示：

1）对原始数据进行某种信号处理

*   对于语音，这将涉及将原始音频转换为 mel-cepstrum 格式，而对于手势，这可能涉及提取图像特征（SIFT、GIST 等）

2）对处理后的数据应用矢量量化（VQ）（也可以使用其他降维技术）

*   每个集群质心通常与任务的一个基本单元相关联。例如，在语音识别中，每个质心都可以与一个音素相关联。对于手势识别任务，每个 VQ 质心可以与姿势或手部配置相关联。

3) 手动构建 HMM，其状态转换捕获手势中不同姿势的序列。

*   这些 HMM 状态的发射分布将以第 2 步的 VQ 向量为中心。

*   在语音识别中，这些 HMM 是由音素字典构建的，这些字典给出了每个单词的音素序列。

4) 构建单个 HMM，其中包含每个单独的手势 HMM（或在语音识别的情况下，每个音素 HMM）之间的转换。然后，用手势视频训练复合 HMM。

*   此时也可以在联合训练步骤之前单独训练每个手势 HMM。这个额外的训练步骤可能会产生更好的识别器。

对于识别过程，应用信号处理步骤，为每一帧找到最近的 VQ 条目，然后在给定量化向量。该路径给出了视频中的预测手势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:41:23.663

我为 Coursera PGM 课程实现了这个的 2d 版本，它以 kinect 手势作为最终单元。

[https://www.coursera.org/course/pgm](https://www.coursera.org/course/pgm)

基本上，这个想法是你不能使用 HMM 来很好地确定姿势。在我们的单元中，我使用了 K-means 的一些变体来将姿势分割成概率类别。HMM 用于实际决定哪些姿势序列实际上作为手势是可行的。但是任何在一组姿势上运行的聚类算法都是一个很好的候选——即使你不知道它们是什么类型的姿势或类似的东西。

从那里您可以创建一个模型，该模型对每个 kinect 数据点的每个可能姿势的聚合概率进行训练。

我知道这是一个有点稀疏的采访。该课程对现有技术进行了很好的概述，但总的来说，这个问题有点难以浓缩成一个简单的答案。（如果你对这个领域感兴趣，我建议你在四月参加）

# sql - 在 SQL 中推送每个 Pop 的 LIFO 堆栈

> ID：14572473
> 
> 赞同：1
> 
> 时间：2013-01-28T22:32:43.733
> 
> 标签：sql, stack

给定一个示例表，例如：

```
CREATE TABLE TESTING_Order(
    Order INT, 
    Name VARCHAR(5)
)

INSERT INTO TESTING_Order 
VALUES
    (0, 'Zero'),
    (1, 'One'),
    (2, 'Two'),
    (3, 'Three'),
    (4, 'Four'),
    (5, 'Five'),
    (6, 'Six'),
    (7, 'Seven') 
```

我想知道如何实现一种“堆栈”来显示，例如，在第一个玩家每回合“向左”移动的游戏中的回合顺序。我可以使用两个更新语句来完成此操作：

```
UPDATE TESTING_Order
SET Order = Order + 1

UPDATE TESTING_Order 
SET Order = (SELECT Min(Order) -1 FROM TESTING_Order)
WHERE Order = (SELECT MAX(Order) FROM TESTING_Order) 
```

我想知道是否有更清洁/更合适的方法来做到这一点，特别是如果可以使用单个 UPDATE 语句来完成其他方式。

换句话说，我认为我所追求的是一个更好的 LIFO Stack 实现，它对每个 pop 执行推送——请原谅我可能会扼杀任何术语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T21:27:17.910

只是为了在这里有一个答案：

要循环浏览我决定使用的列表：

```
UPDATE TESTING_Order
SET nOrder = 
    Case 
        WHEN (nOrder - 1) < 0 THEN (SELECT Count(*) FROM TESTING_Order) - 1
        WHEN (nOrder - 1) >= 0 THEN (nOrder - 1) % (SELECT MAX(nOrder) + 1 FROM TESTING_Order)
    END 
```

这使我能够以正确的方式移动列表（我意识到我的答案可能没有），并且有利于只在一个语句中执行我所要求的。感谢您为我指明正确的方向，[Wiseguy](https://stackoverflow.com/users/185544/wiseguy "有智慧的人")。

# java - 使用 Java 6 编译

> ID：14572477
> 
> 赞同：2
> 
> 时间：2013-01-28T22:32:55.003
> 
> 标签：java, java-7, java-6

我的 Java 小程序/应用程序的许多用户都没有安装 Java 7（令人惊讶的是大约 80%）。如果我用 Java 6 编译我的程序，

*   Java 7 用户是否会暴露于 Java 6 中的安全漏洞？
*   我的小程序/应用程序可以与 Java 6**和**7 一起使用吗？
*   有什么缺点吗？我并没有真正使用任何新的 Java 7 功能（除了很容易修复的菱形运算符）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:38:49.810

> Java 7 用户是否会暴露于 Java 6 中的安全漏洞？

AFAIK，Java 7 具有最严重的安全漏洞。你如何编译代码并不重要，重要的是代码做什么以及你使用哪个 JVM 版本。

> 我的小程序/应用程序可以与 Java 6 和 7 一起使用吗？

如果它没有错误，是的。如果它有错误，它最有可能在两者上做同样的事情，但可能不会。即，可能是一个版本中出现了一个错误，而在另一个版本中没有出现，或者在不同版本中以不同的方式出现。

> 有什么缺点吗？我并没有真正使用任何新的 Java 7 功能（除了很容易修复的菱形运算符）。

缺点是您不能使用新语法或新的 Java 7 库。

代码运行或执行的方式没有改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:58:14.477

在浏览器沙箱中运行时，Java 7 和 Java 6 都发现了安全漏洞；即在运行小程序时。最新的只是 Java 7，但之前的已经应用于 Java 6 或多个版本。

问题是运行您的小程序的人需要在他们的浏览器中启用 Java。这*使得*它们容易受到种植坏小程序的人的攻击；例如在被黑的第 3 方网站上。

我们可以给用户的最佳安全建议是禁用浏览器 Java，因为过去和未来可能存在漏洞。（在某些平台上，建议完全卸载）。这些措施将产生使您的小程序无用的副作用。

IMO，您应该完全删除您的小程序功能，而不是尝试使其与多个 Java 版本一起使用。

# input - python3 - 输入（）的数据类型

> ID：14572483
> 
> 赞同：0
> 
> 时间：2013-01-28T22:33:34.053
> 
> 标签：input, python-3.x

我需要将用户提供的整数值分配给对象。我的格式如下：

```
object = input("Please enter an integer") 
```

以下打印测试...

```
print(type(object))
print(object) 
```

...返回`<class 'str'>`和“1”。有没有办法将“对象”的数据类型设置为用户输入值的数据类型？IOW，这样如果 object=1，type(object)=int? 我知道我可以使用以下命令将输入​​的数据类型设置为 int：

```
object = int(input("Please enter an integer")) 
```

在这种情况下，如果用户不提供 int，控制台会抛出回溯错误，程序会崩溃。我更愿意测试该对象是否实际上是一个 int；如果没有，使用我的程序打印错误语句并递归抛出之前的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:40:24.620

```
while True:
 try:
  object = int(input("Please enter an integer"))
  break
 except ValueError:
  print("Invalid input.  Please try again")
print(type(object))
print(object) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:37:31.097

您始终可以捕获“回溯错误”并替换您自己的错误处理。

```
user_input = input("Please enter an integer")
try:
    user_number = int(user_input)
except ValueError:
    print("You didn't enter an integer!") 
```

# python - 使用内部类而不是全局变量

> ID：14572490
> 
> 赞同：0
> 
> 时间：2013-01-28T22:33:54.133
> 
> 标签：python, class, nested, ros

我正在尝试使用一个类来保存状态而不是全局变量。例如，对象 inner 想要引用变量 Outer.x（参见下面的示例）

我这样做是因为我有一个需要他们自己的类输入的库（[ros_smach](http://www.ros.org/wiki/smach/Tutorials/Simple%20State%20Machine)）

```
class Outer:
  def __init__(self):
    self.x = 5

  class Inner:
    def __init__(self):
      self.y = 10

    def x(self):
      return Outer.x    ### this is not proper ###

outer = Outer()
inner = outer.Inner()
print outer.x
print inner.y
print inner.x() 
```

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:38:19.270

我真的不理解（因此也不赞成）使用“外部”类来保持状态——你用一种形式的全局替换另一种形式，这很少是一个好主意。但是，要回答您的问题，您的内部类没有引用外部实例。

```
class Outer:
  def __init__(self):
    self.x = 5
    self.inner = Inner(self)

  class Inner:
    def __init__(self, outer):
      self.outer = outer
      self.y = 10

    def x(self):
      return self.outer.x

o = Outer()
print o.x()
print o.inner.y 
```

# excel - 如何使用 VBA 对 Excel 范围内的每一行求和

> ID：14572493
> 
> 赞同：1
> 
> 时间：2013-01-28T22:34:00.753
> 
> 标签：excel, vba

我有一个出勤电子表格，我需要对一行进行求和，并在最后一列中有总数。每行代表一名员工，每列代表一个月中的一天。我使用 VBA 的原因是因为某些日期列将包含文本，例如 Tardy 的 TA，如果 TA 存在于该范围内的一个或多个单元格中，则需要在总数中添加 0.5。

我只能填充第一行，但不能填充它下面的行。我猜这是因为我没有正确设置我的范围。这是我到目前为止的代码：

```
Dim wsJAN As Worksheet      'Used to reference the sheet by its TAB name in the WB
Dim LastRow As Long         'Last used row on sheet
Dim tDays As Range          'Total # of days the employee has actually worked
Dim cDays As Range          'Current # of days the employee should have worked
Dim rowEmployee As Range    'Used to define the columns to be used to when adding attendance for each employee row
Dim rCell As Range

LastRow = Cells.Find(What:="*", After:=[A3], SearchOrder:=xlByRows, SearchDirection:=xlPrevious).Row

Application.ScreenUpdating = False

Set wsJAN = ThisWorkbook.Sheets("JAN")
Set tDays = wsJAN.Range("AG3")
Set cDays = wsJAN.Range("AH3")
Set rowEmployee = wsJAN.Range("B3:AF3")

tDays = "=SUM(B3:AF3)"
cDays = "=SUM(B3:AF3)"

For Each rCell In rowEmployee
If rCell.Value = "TA" Then

    tDays = tDays + 0.5    ' Add only a half day to the # of days the employee has worked in Column AG if tardy.
    cDays = cDays + 1      ' Add a whole day to current days worked in Column AH if employee is tardy.
End If
Next

Application.ScreenUpdating = True 
```

我什至尝试在 For Each 循环周围使用 For i = 1 To LastRow Step 1 并 Do.....Loop until LastRow 没有任何成功。我的行总是从第 3 行开始，所以我需要一些类似的东西：

AG3 =SUM(B3:AF3)
AG4 =SUM(B4:AF4)

一直到最后一行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:32:55.007

> 如果 TA 存在于范围内的一个或多个单元格中，则将总数加 0.5。

我很困惑。您想为每个“TA”添加 0.5 还是仅在找到 TA 时添加一次。如果只是一次，请参阅`PART A`其他请参见`PART B`下文

**第一部分**

你需要VBA吗？如果你的列是固定的，即`B`你`AF`总是`total`在 Col 中，`AG`那么这可以通过一个简单的 Excel 公式来实现。

只需在单元格中输入此公式`AG3`并将其复制下来

```
=SUM(B3:AF3) + IF(COUNTIF(A3:AF3,"TA")>0,0.5,0) 
```

**截屏**

![在此处输入图像描述](../Images/dc9b7140e81493d01664db1e2d03e08a.png)

如果你仍然想要 VBA，那么你也可以试试这个

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim LRow As Long

    '~~> Change as applicable
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Assuming that the names are in col A
        LRow = .Range("A" & .Rows.Count).End(xlUp).Row

        .Range("AG3:AG" & LRow).Formula = "=SUM(B3:AF3) + IF(COUNTIF(A3:AF3,""TA"")>0,0.5,0)"
    End With
End Sub 
```

**B部分**

```
=SUM(B3:AF3)+COUNTIF(A3:AF3,"TA")*0.5 
```

代码

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim LRow As Long

    '~~> Change as applicable
    Set ws = ThisWorkbook.Sheets("Sheet1")

    With ws
        '~~> Assuming that the names are in col A
        LRow = .Range("A" & .Rows.Count).End(xlUp).Row

        .Range("AG3:AG" & LRow).Formula = "=SUM(B3:AF3)+COUNTIF(A3:AF3,""TA"")*0.5"
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:11:22.137

您应该使用两个循环而不是一个循环 - 在列和行中求和。对我来说，浏览这种常规工作表的最简单方法是对给定范围使用 Offset。这是解决方案：

```
Dim wsJAN As Worksheet      'Used to reference the sheet by its TAB name in the WB
Dim LastRow As Long         'Last used row on sheet
Dim tDays As Double          'Total # of days the employee has actually worked
Dim cDays As Integer          'Current # of days the employee should have worked
Dim rowEmployee As Range    'Used to define the columns to be used to when adding attendance for each employee row
Dim rCell As Range
Dim i As Integer

Application.ScreenUpdating = False

Set wsJAN = ThisWorkbook.Sheets("JAN")
Set rowEmployee = wsJAN.Range("B3:AF3")

i = 0
Do While Range("B3").Offset(i).Value <> Empty        ' for each row
    tDays = 0
    cDays = 0
    For Each rCell In rowEmployee          ' for each column
        If rCell.Offset(i).Value = "TA" Then
            tDays = tDays + 0.5    ' Add only a half day to the # of days the employee has worked in Column AG if tardy.
            cDays = cDays + 1      ' Add a whole day to current days worked in Column AH if employee is tardy.
        End If
    Next
    ' set AG as tDays && AH as cDays
    Range("AG3").Offset(i).Value = tDays
    Range("AH3").Offset(i).Value = cDays
    i = i + 1
Loop

Application.ScreenUpdating = True 
```

现在它只计算 TA-s（您的 IF 语句是这样说的），但您现在可以轻松修改它，以计算所需的任何内容。

# python - 从可迭代的元组创建可迭代的字典

> ID：14572495
> 
> 赞同：0
> 
> 时间：2013-01-28T22:34:05.027
> 
> 标签：python, dictionary, itertools

假设我们有以下数据

```
all_values = (('a', 0, 0.1), ('b', 1, 0.5), ('c', 2, 1.0)) 
```

我们想从中生成一个字典列表，如下所示：

```
[{'location': 0, 'name': 'a', 'value': 0.1},
 {'location': 1, 'name': 'b', 'value': 0.5},
 {'location': 2, 'name': 'c', 'value': 1.0}] 
```

在 Python 中最优雅的方法是什么？

我能想出的最佳解决方案是

```
>>> import itertools
>>> zipped = zip(itertools.repeat(('name', 'location', 'value')), all_values)
>>> zipped
[(('name', 'location', 'value'), ('a', 0, 0.1)),
 (('name', 'location', 'value'), ('b', 1, 0.5)),
 (('name', 'location', 'value'), ('c', 2, 1.0))]
>>> dicts = [dict(zip(*e)) for e in zipped]
>>> dicts
[{'location': 0, 'name': 'a', 'value': 0.1},
 {'location': 1, 'name': 'b', 'value': 0.5},
 {'location': 2, 'name': 'c', 'value': 1.0}] 
```

似乎存在一种更优雅的方式来做到这一点，可能会使用更多的工具[itertools](http://docs.python.org/library/itertools.html)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T22:36:30.210

怎么样：

```
In [8]: [{'location':l, 'name':n, 'value':v} for (n, l, v) in all_values]
Out[8]: 
[{'location': 0, 'name': 'a', 'value': 0.1},
 {'location': 1, 'name': 'b', 'value': 0.5},
 {'location': 2, 'name': 'c', 'value': 1.0}] 
```

或者，如果您更喜欢更通用的解决方案：

```
In [12]: keys = ('name', 'location', 'value')

In [13]: [dict(zip(keys, values)) for values in all_values]
Out[13]: 
[{'location': 0, 'name': 'a', 'value': 0.1},
 {'location': 1, 'name': 'b', 'value': 0.5},
 {'location': 2, 'name': 'c', 'value': 1.0}] 
```

# python - 确定屏幕截图中是否有较小的图像？

> ID：14572497
> 
> 赞同：3
> 
> 时间：2013-01-28T22:34:09.917
> 
> 标签：python, opencv, image-processing, bots, image-recognition

我已经开始用 Python 制作一个机器人。该机器人的目标是从屏幕上读取简单的一位数字，然后将它们加在一起。目前我知道如何获取屏幕截图。我被困在图像识别上。我研究了 OpenCV 模板匹配。

几天来，我一直试图弄清楚如何做到这一点。我能写的唯一代码在问题的底部。

例如我想做的是：（按顺序）

1.  它将抓取屏幕截图
2.  它将通过将我的数字图像与屏幕截图进行比较
3.  找到匹配的图像后，它会将值记录到变量中。
4.  然后它会移动到下一个数字。
5.  它将重复步骤 1 - 3
6.  它将把数字加在一起。

目前这是我的代码的样子：

```
import sys
import cv2
import numpy
from cv2 import cv
import PIL
from PIL import ImageGrab

print("Authentication")
print("Enter Password:")
entered = raw_input()
if entered == "hello":
    print("************Menu************")
    print("1: Quit")
    print("2: Start Bot")
    print("3: Settings")
    print("*" * 28)
    mode = input("")
    if mode == 1:
        print("Closing Answer Quick")
        import time
        time.sleep(3)
        quit
    elif mode == 2:
        import time
        print("Bot Initialize")
        time.sleep(1)
        print("Getting Screen")
        time.sleep(3)

        screenimage = ImageGrab.grab()
        x = [1, "images\1.png", "images\2.png", "images\3.png", "images\4.png", "images\5.png", "images\6.png", "images\7.png", "images\8.png", "images\9.png"]
    ##Here is where the screen recognition code goes

    elif mode == 3:
        print("Settings")
    else:

        import time
        print("Incorrect Password")
        time.sleep(3)
        quit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:08:46.073

如果您不只是将 OpenCV 用于学术目的，我建议您使用 OCR 作为解决号码识别任务的更简单的方法。这是一个基于 Tesseract 的 Python 库，由 Google 作为领先的 OCR 技术维护。它还具有仅数字检测设置。

[http://code.google.com/p/pytesser/](http://code.google.com/p/pytesser/)

# javascript - 跨设备 CSS 问题

> ID：14572499
> 
> 赞同：1
> 
> 时间：2013-01-28T22:34:31.993
> 
> 标签：javascript, jquery, css, google-chrome, cross-platform

我刚刚用谷歌 Chrome 桌面版和移动版测试了我的网站，似乎没有显示滑出菜单的标签。它确实有效，只是没有显示，我不知道为什么。改变位置在这里不起作用，因为我使用的滑出设计是依赖位置的，我需要它们是`fixed`.

相关CSS：

```
#slideout #label {
    -webkit-transform: rotate(90deg); 
    -moz-transform: rotate(90deg);
    transform: rotate(90deg);
    display:block;
    float:right;
    margin:46% 0 0 0;
    padding: 0 2px 6px 2px;
    font-size: 20px;
    position: fixed;
    left:-36px;
    -webkit-transition:left 0.5s ease-in-out,opacity 0.5s ease-in-out;
    -moz-transition:left 0.5s ease-in-out,opacity 0.5s ease-in-out;
    -o-transition:left 0.5s ease-in-out,opacity 0.5s ease-in-out;
    transition:left 0.5s ease-in-out,opacity 0.5s ease-in-out;
    background-color:#fff;
    border-bottom:0 !important;
    border-radius:8px 8px 0 0;
}

#slideout.opened #label {
    left: 86px;
} 
```

JavaScript：

```
$('#label').on('click',function(){
    $('#slideout').toggleClass('opened');
}); 
```

* * *

**编辑：**我尝试使用此代码：

```
#slideout #label {
    position: absolute;
    left: 90px;
}
#slideout {
    position: relative;
} 
```

但是发生的情况是，标签在正确的位置，但它被切断并且不可见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:47:05.970

position:fixed 在移动设备上是不可预测的，你应该可以通过切换到 position:relative 来修复它；即使这可能很困难。这里有一些不错的报道：[http ://www.quirksmode.org/blog/archives/2012/10/budding_consens.html](http://www.quirksmode.org/blog/archives/2012/10/budding_consens.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:49:31.690

查看幻灯片面板的不透明度属性。

隐藏面板时将不透明度设置为 0.3，标签在面板内，因此它也会消失。

但看起来 chrome mobile 和 opacity 属性存在一些问题。按钮完全消失。您应该尝试将其放在面板之外。当我禁用 chrome 检查器中滑动面板的 opacity : 0.3 时，会出现标签。

我认为你应该对此进行调查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T03:19:23.500

除了您拥有的之外，请尝试以下操作：

```
#slideout {
    position: relative;
}
#slideout #label {
    position: absolute;
    top: 46%;
    right: -10px; (approximate)
} 
```

显然，这些是一对夫妇的替代品，因此您可以自行决定整合它们。另外，删除浮动：对；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T15:03:28.170

这只是一个猜测，但问题可能来自 javascript 事件处理，这在移动设备上是不同的，因为事件实际上是不同的。我猜点击事件在移动设备上被触发了两次，比如“触摸”或“鼠标按下”，因此，事件发生了两次，toggleClass() 添加和删除了想要的类。因此，要么您使用 javascript 检测移动设备以添加正确的事件 [检测移动浏览器](https://stackoverflow.com/questions/11381673/javascript-solution-to-detect-mobile-browser)（检测移动设备） [jQuery 移动设备（单击事件）](https://stackoverflow.com/questions/11332533/jquery-mobile-click-event)（适当事件），要么您使用计时器更改“addClass”和“removeClass”的切换类。就像是

```
var animating = false;
var open = false;
$('#label').on('click',function(){
   if (!animating) {
       animating = true;
       if (open) {
          $('#slideout').removeClass('opened');
       } else {
          $('#slideout').addClass('opened');
       }
       setTimeout(function() { animating = false }, 500); // 500 = 0.5s of css animation
   }
}); 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T18:25:51.100

在你的 CSS 中使用**postion:fixed**以及相应的 width-height 属性。

# web-services - 我可以安全地同时使用两个不同版本的服务吗？

> ID：14572502
> 
> 赞同：0
> 
> 时间：2013-01-28T22:34:49.857
> 
> 标签：web-services, xsd, wsdl, versioning

如果我可以安全地使用两个不同版本的网络服务，我会很感兴趣。服务背后的模式在版本之间进行了更新，但我使用的部分实际上没有改变（只有我从未使用过的属性被删除，我不会使用新添加的属性）。

在构建我的应用程序并向不同版本的服务发送请求后，我的应用程序接缝工作正常，没有任何错误。

如果有什么我没有想到的陷阱，我感兴趣的是什么？这真的很好用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:45:36.077

我这样做是为了将 EJB3 暴露为 WS。基本上，如果您只向您的 ws 添加新方法并为您的对象添加属性，那么旧客户端可以继续透明地连接到新旧 Web 服务。这是相当冒险的，因为您至少必须确保您没有修改现有方法签名，或者，例如，将类型更改为对象的现有属性。查看新生成的 WSDL 并将其与旧 WS 生成的现有 WSDL 进行比较）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:28:24.033

这仅取决于 Web 服务版本控制的实现方式，如果服务的两个版本都针对相同的数据源，那么您可能没有太多问题。

通常，如果有更新版本的 WSDL，如果意味着服务提供商迟早会将所有客户端推送到更新版本的趋势，我总是更喜欢使用最新版本，以避免诸如“您使用的是旧版本服务版本，我们不会修复旧版本的任何问题”。

# ruby-on-rails-3 - 正确的 Github 应用程序 URL

> ID：14572518
> 
> 赞同：4
> 
> 时间：2013-01-28T22:35:50.793
> 
> 标签：ruby-on-rails-3, github, ruby-on-rails-4

在 Github 的应用程序中注册的正确 URL 是什么？我有一个rails 应用程序，我正试图通过omniauth/devise 连接到github。问题是每次我尝试通过设计进行身份验证时，我都会得到这个 URL

```
> http://127.0.0.1:4000/auth/github/callback?error=redirect_uri_mismatch... 
```

在我的浏览器中和来自 GitHub 的 NULL 反馈。（这意味着 env['omniauth.auth'] 为空）。

这是我的 Github 网址。这里有什么问题？

```
Application Name:
Foo

URL:
http://127.0.0.1:4000/users/auth/github

Callback URL:
http://127.0.0.1:4000/auth/github/callback 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:17:55.303

设计omniauth 需要其他回调URL。

尝试：

```
URL:
http://127.0.0.1:4000

Callback URL:
http://127.0.0.1:4000/users/auth/github/callback 
```

# sql - 使用 hive udf 函数计算运行总和

> ID：14572519
> 
> 赞同：5
> 
> 时间：2013-01-28T22:35:52.837
> 
> 标签：sql, hadoop, hive

我是 Hive 的新手，我想事先原谅我对以下任何内容的无知。我有一张如下表：

```
SELECT a.storeid, a.smonth, a.sales FROM table a;
1001    1       35000.0
1002    2       35000.0
1001    2       25000.0
1002    3       110000.0
1001    3       40000.0
1002    1       40000.0 
```

我的目标输出如下：

```
1001    1       35000.0 35000.0
1001    2       25000.0 60000.0
1001    3       40000.0 100000.0
1002    1       40000.0 40000.0
1002    2       35000.0 75000.0
1002    3       110000.0 185000.0 
```

我编写了一个简单的 hive udf sum 类来实现上述目的，并在查询中使用了 SORT BY storeid, smonth：

```
SELECT a.storeid, a.smonth, a.sales, rsum(sales)
FROM (SELECT * FROM table SORT BY storeid, smonth) a; 
```

显然，它不会产生上述输出，因为只有一个映射器并且调用了相同的 udf 实例，它会在总集上生成一个运行总和。我的目标是为每个 storeid 重置 udf 类中的 runningSum 实例变量，以便评估函数返回上述输出。我使用了以下方法： 1\. 传递 storeid 变量 rsum(sales, storeid) 然后我们可以在 udf 类中正确处理这种情况。2\. 使用 2 个映射器，如下查询：

```
set mapred.reduce.tasks=2;
SELECT a.storeid, a.smonth, a.sales, rsum(sales)
FROM (SELECT * FROM table DISTRIBUTE BY storeid SORT BY storeid, smonth) a;

1002    1       40000.0 40000.0
1002    2       35000.0 75000.0
1002    3       110000.0 185000.0
1001    1       35000.0 35000.0
1001    2       25000.0 60000.0
1001    3       40000.0 100000.0 
```

为什么 1002 总是出现在顶部？除了上述方法之外，我想就其他不同的方法（例如子查询/连接）寻求您的建议。此外，您建议的方法的时间复杂度是多少？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-19T12:54:52.800

Hive 提供了一种在单行中执行此操作的更好方法 -
请按照以下过程来实现您的目标输出

创建一个可以包含您的数据集的配置单元表 -

```
1001    1       35000.0
1002    2       35000.0
1001    2       25000.0
1002    3       110000.0
1001    3       40000.0
1002    1       40000.0 
```

现在只需在您的配置单元终端中运行以下命令 -

```
SELECT storeid, smonth, sales, SUM(sales) OVER (PARTITION BY storeid ORDER BY smonth) FROM table_name; 
```

输出将像 -

```
1001  1  35000.0  35000.0
1001  2  25000.0  60000.0
1001  3  40000.0  100000.0
1002  1  40000.0  40000.0
1002  2  35000.0  75000.0
1002  3  110000.0 185000.0 
```

我希望这可以帮助您获得目标输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T16:28:17.083

或者，您可以查看包含多个功能扩展的 Hive 票证[。](https://issues.apache.org/jira/browse/HIVE-2361)
除其他外，还有一个*累积和*实现（**GenericUDFSum**）。

这个函数（称为“rsum”）有两个参数，id 的哈希值（记录在 reducer 之间的分区）和它们对应的值相加：

```
select t.storeid, t.smonth, t.sales, rsum(hash(t.storeid),t.sales) as sales_sum 
  from (select storeid, smonth, sales from sm distribute by hash(storeid) 
    sort by storeid, smonth) t;

1001  1  35000.0  35000.0
1001  2  25000.0  60000.0
1001  3  40000.0  100000.0
1002  1  40000.0  40000.0
1002  2  35000.0  75000.0
1002  3  110000.0 185000.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-06T09:25:46.303

SELECT storeid, smonth, sales, sum(sales) over(partition by storeid order by smonth) as rsum FROM table ;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-06T16:48:51.650

这应该可以解决问题：

```
SELECT 
    a.storeid, 
    a.smonth,
    a.sales,
    SUM(a.sales) 
OVER (
    PARTITION BY a.storeid 
    ORDER BY a.smonth asc 
    ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW)
FROM 
    table a; 
```

来源：[https ://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+WindowingAndAnalytics)

# java - java套接字线程工作但没有消息

> ID：14572522
> 
> 赞同：0
> 
> 时间：2013-01-28T22:36:05.757
> 
> 标签：java, sockets

您好我正在尝试创建一个小型客户端服务器或服务器客户端聊天消息应用程序作为实验，并获得一些 Java 套接字方面的知识和经验。我在发送和接收消息时遇到问题。我确实获得了连接，并且线程看起来正在运行，但它不会相互发送或接收消息。我不确定连接是否会在连接后自动关闭，但我知道我做错了什么，但我似乎找不到它。如果你能帮助我，那就太好了。代码如下

* * *

服务器：

```
public class ServerGUI extends JFrame implements KeyListener{
/**
 * 
 */
private static final long serialVersionUID = 1L;
/*private JButton sendButton = new JButton("send");
private JButton connectButton = new JButton("Connect");
private JButton disconnectButton = new JButton("Disconnect");*/
private JTextField textMessage = new JTextField();
private JLabel connectMessageLabel = new JLabel("Waiting for Client");
private JTextArea messageTextArea = new JTextArea();
private JPanel buttonPanel = new JPanel();
private JPanel messageLabelPanel = new JPanel();
private JPanel messageTextAreaPanel = new JPanel();
private JPanel content = new JPanel();
private static String thisName= "<Me> ";
private static String friendLabel= "<My Friend> ";
private static JFrame serverFrame = new JFrame();
private int port= 0;
private String clientMessage=null;
private String myMessage=null;
private ServerSocket listenSocket;
private Socket connection;
private InputStream inStream;
private DataInputStream inDataStream;
private OutputStream outStream;
private DataOutputStream outDataStream;
private Thread runChatServer;

//----------------------------------------------------------------------------------------------
//-------------------------serverGui------------------------------------------------------------
@SuppressWarnings("deprecation")
public ServerGUI(int port){
    this.port = port;
    messageLabelPanel.setLayout(new GridLayout(1, 1, 1, 1));
    messageLabelPanel.add(connectMessageLabel);
    buttonPanel.setLayout(new GridLayout(1, 1, 1, 1));
    //buttonPanel.add(connectButton);
    //buttonPanel.add(sendButton);
    buttonPanel.add(textMessage);
    textMessage.addKeyListener(this);
    textMessage.setForeground(Color.BLACK);
    messageTextAreaPanel.setLayout(new BorderLayout(1, 1));
    messageTextAreaPanel.add(buttonPanel, BorderLayout.SOUTH);
    messageTextAreaPanel.add(messageLabelPanel,BorderLayout.NORTH);
    messageTextAreaPanel.add(new JScrollPane(messageTextArea),BorderLayout.CENTER);
    messageTextArea.setDisabledTextColor(Color.BLACK);
    messageTextArea.enable(false);
    content.setLayout(new GridLayout(1, 1, 1, 1));
    content.add(messageTextAreaPanel);
    content.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
    serverFrame.setContentPane(content);
    serverFrame.pack();
    serverFrame.setSize(450,550);
    serverFrame.setLocationRelativeTo(null);
    serverFrame.setVisible(true);
    serverFrame.setTitle("Chat Server");
    serverFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    startServer();
}

//-----------------------------------------------------------------------------------------------------
//-------------------------------keyPressed------------------------------------------------------------
public void startServer(){
    System.out.println("startServer");
    try{
        listenSocket = new ServerSocket(port);
        System.out.println("Waiting for client");
        connection = listenSocket.accept();
        System.out.println("Client Found");
        connectMessageLabel.setText("Client Found");
        runChatServer = new Thread(serverListeningAndChatting);
        runChatServer.start();
    }
    catch (Exception ex){

        System.out.println("No Connection Found");
        connectMessageLabel.setText("No Connection Found");
    }
}
//-----------------------------------------------------------------------------------------------------
//-------------------------------listening------------------------------------------------------------
public void listening(){
    System.out.println("listening");
    try{
        inStream = connection.getInputStream();
        inDataStream = new DataInputStream(inStream);
        clientMessage = inDataStream.readUTF();
        if (clientMessage!= null){
            messageTextArea.append(clientMessage + "\n");
            clientMessage = null;
        }
    }catch(Exception ex){System.out.println(ex);}
}
//-----------------------------------------------------------------------------------------------------
//-------------------------------sendMessage------------------------------------------------------------
public void sendMessage(){
    System.out.println("sendMessage");
    try{
        outStream = connection.getOutputStream();
        outDataStream = new DataOutputStream(outStream);

        if (myMessage!=null){
            outDataStream.writeUTF(myMessage);
            myMessage=null;
        }
    }catch(Exception ex){System.out.println("Message Failed");}
}
//-----------------------------------------------------------------------------------------------------
//-------------------------------keyPressed------------------------------------------------------------
public void keyPressed(KeyEvent e) {
    if(e.getKeyChar() == KeyEvent.VK_ENTER){
        myMessage = friendLabel+ textMessage.getText();
        messageTextArea.append(thisName+textMessage.getText() +"\n");
        textMessage.setText("");
    }
}
public void keyReleased(KeyEvent e) {}
public void keyTyped(KeyEvent e) {}

//-----------------------------------------------------------------------------------------------------
//-------------------------------main------------------------------------------------------------
public static void main (String args[]){
    new ServerGUI(8901);
}

//-----------------------------------------------------------------------------------------------------
//-------------------------------run------------------------------------------------------------
public Runnable serverListeningAndChatting = new Runnable(){
    public void run() {
        while (true){
            System.out.println("Running");
            listening();
            sendMessage();
        }
    }
};

} 
```

* * *

客户：

```
public class ClientGUI extends JFrame implements KeyListener{
/**
 * 
 */
private static final long serialVersionUID = 1L;
private JTextField textMessage = new JTextField();
private JLabel connectMessageLabel = new JLabel("Connection failed or no Server is available");
private JTextArea messageTextArea = new JTextArea();
private JPanel buttonPanel = new JPanel();
private JPanel messageLabelPanel = new JPanel();
private JPanel messageTextAreaPanel = new JPanel();
private JPanel content = new JPanel();
private static String thisName= "<Me> ";
private static String friendLabel= "<My Friend> ";
private static JFrame clientFrame = new JFrame();
private int port =0;
private String remoteMachine =null;
private String clientMessage=null;
private String myMessage=null;
private Socket connection;
private InputStream inStream;
private DataInputStream inDataStream;
private OutputStream outStream;
private DataOutputStream outDataStream;
private Thread runChatClient;
//-----------------------------------------------------------------------------------------------------
//-------------------------------ClientGUI------------------------------------------------------------

@SuppressWarnings("deprecation")
public ClientGUI(String remoteMachine, int port){
    this.port= port;
    this.remoteMachine = remoteMachine;
    messageLabelPanel.setLayout(new GridLayout(1, 1, 1, 1));
    messageLabelPanel.add(connectMessageLabel);
    buttonPanel.setLayout(new GridLayout(1, 1, 1, 1));
    //buttonPanel.add(connectButton);
    //buttonPanel.add(sendButton);
    buttonPanel.add(textMessage);
    textMessage.addKeyListener(this);
    textMessage.setForeground(Color.BLACK);
    messageTextAreaPanel.setLayout(new BorderLayout(1, 1));
    messageTextAreaPanel.add(buttonPanel, BorderLayout.SOUTH);
    messageTextAreaPanel.add(messageLabelPanel,BorderLayout.NORTH);
    messageTextAreaPanel.add(new JScrollPane(messageTextArea),BorderLayout.CENTER);
    messageTextArea.setDisabledTextColor(Color.BLACK);
    messageTextArea.enable(false);
    content.setLayout(new GridLayout(1, 1, 1, 1));
    content.add(messageTextAreaPanel);
    content.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
    clientFrame.setContentPane(content);
    clientFrame.pack();
    clientFrame.setSize(450,550);
    clientFrame.setLocationRelativeTo(null);
    clientFrame.setVisible(true);
    clientFrame.setTitle("Chat Client");
    clientFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    startClient();

}

//-----------------------------------------------------------------------------------------------------
//-------------------------------startClient------------------------------------------------------------
public void startClient(){
    System.out.println("startClient");
    try{
        System.out.println("Connecting to Server");
        connection = new Socket(remoteMachine, port);
        System.out.println("Server Found");
        connectMessageLabel.setText("Server Found");
        runChatClient = new Thread(clientListeningAndChatting);
        runChatClient.start();
    }
    catch (Exception ex){
        System.out.println("No Connection Found");
        connectMessageLabel.setText("No Connection Found");
    }

}
//-----------------------------------------------------------------------------------------------------
//-------------------------------keyPressed------------------------------------------------------------
public void keyPressed(KeyEvent e) {
    if(e.getKeyChar() == KeyEvent.VK_ENTER){
        myMessage = friendLabel+ textMessage.getText();
        messageTextArea.append(thisName+textMessage.getText() +"\n");
        textMessage.setText("");
    }
}

//-----------------------------------------------------------------------------------------------------
//-------------------------------listening------------------------------------------------------------
public void listening(){
    System.out.println("listening");
    try{
        inStream = connection.getInputStream();
        inDataStream = new DataInputStream(inStream);
        clientMessage = inDataStream.readUTF();
        if (clientMessage!= null){
            messageTextArea.append(clientMessage + "\n");
            clientMessage = null;
        }
    }catch(Exception ex){System.out.println("Disconnected");}
}
//-----------------------------------------------------------------------------------------------------
//-------------------------------sendMessage------------------------------------------------------------
public void sendMessage(){
    System.out.println("sendMessage");
    try{
        outStream = connection.getOutputStream();
        outDataStream = new DataOutputStream(outStream);
        if (myMessage!=null){
            outDataStream.writeUTF(myMessage);
            myMessage=null;
        }
    }catch(Exception ex){System.out.println("Message Failed");}
}
public void keyReleased(KeyEvent e) {}
public void keyTyped(KeyEvent e) {}
//-----------------------------------------------------------------------------------------------------
//-------------------------------main------------------------------------------------------------
public static void main (String args[]){
    new ClientGUI(null, 8901);
}

//-----------------------------------------------------------------------------------------------------
//-------------------------------run------------------------------------------------------------
public Runnable clientListeningAndChatting = new Runnable(){

    public void run() {
        System.out.println("Running");
        while (true){
            listening();
            sendMessage();
        }
    }
};
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:57:14.917

该声明

```
listenSocket.accept(); 
```

is a blocking call is is blocking the `EDT`. This and any other network access calls should be handled by a [SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html). As Swing is single threaded, no events can be processed so no messages can be exchanged between the client & server.

Use `SwingWorker` over `Thread`—it takes care of GUI interaction tasks.

# cakephp - 尝试在 CakePHP 2.0 中保存 HABTM 模型数据

> ID：14572523
> 
> 赞同：3
> 
> 时间：2013-01-28T22:36:07.920
> 
> 标签：cakephp, save, cakephp-2.0, add, has-and-belongs-to-many

我有一个需要使用HABTM的数据模型，如下：

```
surveys 
(
    id int(11) NOT NULL AUTO_INCREMENT,
    user_id int(11) NOT NULL,
    title varchar(50) DEFAULT NULL,
    created timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    modified timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
    PRIMARY KEY (id),
    KEY user_id (user_id)
);

questions 
(
    id int(11) NOT NULL AUTO_INCREMENT,
    user_id int(11) NOT NULL,
    title varchar(50) NOT NULL,
    body text NOT NULL,
    created timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    modified timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
    PRIMARY KEY (id),
    KEY user_id (user_id)
);

questions_surveys  
(  
    id int(11) NOT NULL AUTO_INCREMENT,  
    survey_id int(11) NOT NULL,  
    question_id int(11) NOT NULL,  
    created timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  
    modified timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',  
    PRIMARY KEY (id),  
    KEY survey_id (survey_id),  
    KEY question_id (question_id)  
); 
```

以及相关的外键：

```
ALTER TABLE questions_surveys
ADD CONSTRAINT questions_surveys_ibfk_1 FOREIGN KEY(survey_id) REFERENCES surveys(id);

ALTER TABLE questions_surveys
ADD CONSTRAINT questions_surveys_ibfk_2 FOREIGN KEY(question_id) REFERENCES questions(id); 
```

问题和调查具有 HABTM 关系，因此一项调查有许多问题，而一个问题可以在许多不同的调查中。

在 Survey.php 中：

```
public $hasAndBelongsToMany = array(
    'Question' => array(
        'className' => 'Question',
        'joinTable' => 'questions_surveys',
        'foreignKey' => 'survey_id',
        'associationForeignKey' => 'question_id'
    )
); 
```

在 Question.php 中：

```
public $hasAndBelongsToMany = array(
    'Survey' => array(
        'className' => 'Survey',
        'joinTable' => 'questions_surveys',
        'foreignKey' => 'question_id',
        'associationForeignKey' => 'survey_id'
    )
); 
```

这是我在 SurveysController.php 中添加的控制器：

```
public function add()
{
    $this->set('fields', $this->Survey->getFields());
    $this->set('users', $this->Survey->User->find('list', array('fields' => array('id', 'username'))));
    $this->set('questions', $this->Question->find('list', array('fields' => array('id', 'body'))));

    if (!empty($this->data))
    {
        $this->Survey->saveAll($this->data['Survey']);

        foreach($this->data['Question']['id'] as $question_id)
        {
            $newdata[] = array('Survey' => array('id' => $this->Survey->getInsertID()), 'Question' => array('id' => $question_id));
        }

        if ($this->Survey->saveAll($newdata))
        {
            $this->Session->setFlash('The survey was successfully added!');
            $this->redirect(array('action'=>'index'));
        }
        else
        {
            $this->Session->setFlash('Unable to add survey.');
        }
    }
} 
```

首先保存新调查，然后将每个 question_survey 添加到一个数组中，然后一次添加所有这些。数据如下所示：

```
Array
(
    [0] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 1
                )

        )

    [1] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 2
                )

        )

    [2] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 3
                )

        )

    [3] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 4
                )

        )

    [4] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 5
                )

        )

    [5] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 6
                )

        )

    [6] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 7
                )

        )

    [7] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 8
                )

        )

    [8] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 9
                )

        )

    [9] => Array
        (
            [Survey] => Array
                (
                    [id] => 17
                )

            [Question] => Array
                (
                    [id] => 10
                )

        )

) 
```

我不断收到此错误：

> 错误：SQLSTATE [42S22]：找不到列：1054 'where 子句'
> SQL 查询中的未知列'QuestionsSurvey.survey_id'：SELECT `AppModel`。`question_id`从`engage`。在`questions_surveys`哪里。= 13`AppModel``QuestionsSurvey``survey_id`

据我所知，一切都是按照 CakePHP 标准命名的，我尝试使用 'with' => 'QuestionsSurvey'，但得到这个错误：

> 缺少数据库表错误：在数据源默认值中找不到模型 QuestionsSurvey 的表 app_models。

和 'with' => 'QuestionsSurveys'，但得到同样的错误：

> 缺少数据库表错误：在数据源默认值中找不到模型 QuestionsSurveys 的表 app_models。

我已经尝试将模型三重奏转换为 hasMany through 模型（没有用，只是说回到 HABTM）。

我已经为数据使用了各种不同的格式[（CakePHP Saving Your Data）](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)，但也没有运气。

我难住了。有人知道我做错了什么吗？另外，我为非常长的条目和代码部分道歉，但我想确保是彻底的。

感谢您的时间！
马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-23T08:31:53.287

您的数据应如下所示：

```
array(
    'Survey' => array(
        'title' => 'example',
    ),
    'Question' => array(
        (int) 0 => '1',
        (int) 1 => '2',
    )
) 
```

保存数据使用： `$this->Survey->saveAll($data);`

谢谢

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T21:55:04.187

所以事实证明这本书是错误的，或者我误解了它或其他什么，这是有效的格式：

```
Array
(
    [0] => Array
    (
        [survey_id] => 33
        [question_id] => 9
    )

    [1] => Array
    (
        [survey_id] => 33
        [question_id] => 10
    )
) 
```

这就是它需要保存在控制器中的方式：

```
if ($this->Survey->QuestionsSurvey->saveAll($newdata)) 
```

# opengl-es - 透明 EAGLView 的 fps 大幅下降

> ID：14572526
> 
> 赞同：1
> 
> 时间：2013-01-28T22:36:37.587
> 
> 标签：opengl-es, cocos2d-iphone, transparency, eaglview, pixelformat

我有一个 Cocos2d 项目，我想在整个应用程序中保持不变的背景。在`applicationDidFinishLaunching`其委托的方法中，我替换了以下行：

我已将 glView 的 pixelFormat 从更改`kEAGLColorFormatRGB565`为`kEAGLColorFormatRGBA8`. 当我进行更改时，glView 变得透明并且我可以看穿它，但是 fps 急剧下降。如果我不进行更改，则视图不会变得透明，但我看不到 fps 的大幅下降。我说的是 fps 的显着下降，从 59.0-60.0 下降到大约 35.0-42.0。

我在上面的 addSubview 行下方使用此代码来使视图透明：

```
director.openGLView.opaque = NO; 
```

整个 applicationDidFinishLaunching 方法如下所示：

```
- (void) applicationDidFinishLaunching:(UIApplication*)application
{
    // Init the window
    window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Try to use CADisplayLink director
    // if it fails (SDK < 3.1) use the default director
    if( ! [CCDirector setDirectorType:kCCDirectorTypeDisplayLink] )
        [CCDirector setDirectorType:kCCDirectorTypeDefault];

    CCDirector *director = [CCDirector sharedDirector];

    // Init the View Controller
    viewController = [[RootViewController alloc] initWithNibName:nil bundle:nil];
    viewController.wantsFullScreenLayout = YES;

    //
    // Create the EAGLView manually
    //  1\. Create a RGB565 format. Alternative: RGBA8
    //  2\. depth format of 0 bit. Use 16 or 24 bit for 3d effects, like CCPageTurnTransition
    //
    //
    EAGLView *glView = [EAGLView viewWithFrame:[window bounds]
                                   pixelFormat:kEAGLColorFormatRGBA8    // kEAGLColorFormatRGBA8
                                   depthFormat:0                        // GL_DEPTH_COMPONENT16_OES
                        ];

    // attach the openglView to the director
    [director setOpenGLView:glView];
    glView.opaque = NO;
//  // Enables High Res mode (Retina Display) on iPhone 4 and maintains low res on all other devices
    if( ! [director enableRetinaDisplay:YES] )
        CCLOG(@"Retina Display Not supported");

    //
    // VERY IMPORTANT:
    // If the rotation is going to be controlled by a UIViewController
    // then the device orientation should be "Portrait".
    //
    // IMPORTANT:
    // By default, this template only supports Landscape orientations.
    // Edit the RootViewController.m file to edit the supported orientations.
    //
#if GAME_AUTOROTATION == kGameAutorotationUIViewController 
    [director setDeviceOrientation:kCCDeviceOrientationPortrait];
#else
    [director setDeviceOrientation:kCCDeviceOrientationLandscapeLeft];
#endif

    [director setAnimationInterval:1.0/60];
    [director setDisplayFPS:YES];

    // make the OpenGLView a child of the view controller
    [viewController setView:glView];

    //Required in iOS6, recommended in 4 and 5
    [window setRootViewController:viewController];

    // make the View Controller a child of the main window, needed for iOS 4 and 5
    [window addSubview: viewController.view];

    [window makeKeyAndVisible];

    // Default texture format for PNG/BMP/TIFF/JPEG/GIF images
    // It can be RGBA8888, RGBA4444, RGB5_A1, RGB565
    // You can change anytime.
    [CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];

    // Removes the startup flicker
    [self removeStartupFlicker];

    // Run the intro Scene
    [[CCDirector sharedDirector] runWithScene: [Intro scene]];
} 
```

关于为什么会发生这种情况的任何想法？如果需要，我可以提供更多代码。

我忘了提及我所做的另一项代码更改。在 CCDirector.m 中`setGLDefaultValues`，我更改了这一行：

```
glClearColor(0.0f, 0.0f, 0.0f, 1.0f); 
```

对此：

```
glClearColor(0.0f, 0.0f, 0.0f, 0.0f); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:46:39.820

每当您添加具有透明度的 Alpha 通道时，OpenGL 引擎都必须执行某种形式（尽管是默认）的 Alpha 混合。这是在非 RGBA（即 RGB 565）情况下不必执行的每个像素的数学运算。每当您添加引擎所需的数学运算时，帧速率都会下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:46:47.303

这是可以预料的。RGBA8888 帧缓冲区使用两倍的内存，GPU 需要执行更多工作才能渲染到此帧缓冲区中。这就是为什么 RGB565 是默认格式的原因。

# python - Python argparse 类型错误

> ID：14572528
> 
> 赞同：0
> 
> 时间：2013-01-28T22:36:45.387
> 
> 标签：python, typeerror, argparse

我在 python 中玩 argparse。我有如下内容：

```
group_gen.add_argument('--switch', nargs=2, metavar=('PARAM1', 'PARAM2')) 
```

然后我删除了 PARAM2 所以我有：

```
group_gen.add_argument('--switch', nargs=2, metavar=('PARAM1', 'PARAM2')) 
```

然后，每当 argparse 必须打印帮助时，我都会通过堆栈跟踪得到以下异常

```
Traceback (most recent call last):
  File "./script.py", line 20, in <module>
    args = parser.parse_args()
  File "/usr/lib/python2.7/argparse.py", line 1688, in parse_args
    args, argv = self.parse_known_args(args, namespace)
  File "/usr/lib/python2.7/argparse.py", line 1727, in parse_known_args
    self.error(str(err))
  File "/usr/lib/python2.7/argparse.py", line 2346, in error
    self.print_usage(_sys.stderr)
  File "/usr/lib/python2.7/argparse.py", line 2308, in print_usage
    self._print_message(self.format_usage(), file)
  File "/usr/lib/python2.7/argparse.py", line 2264, in format_usage
    return formatter.format_help()
  File "/usr/lib/python2.7/argparse.py", line 279, in format_help
    help = self._root_section.format_help()
  File "/usr/lib/python2.7/argparse.py", line 209, in format_help
    func(*args)
  File "/usr/lib/python2.7/argparse.py", line 317, in _format_usage
    action_usage = format(optionals + positionals, groups)
  File "/usr/lib/python2.7/argparse.py", line 449, in _format_actions_usage
    args_string = self._format_args(action, default)
  File "/usr/lib/python2.7/argparse.py", line 587, in _format_args
    result = ' '.join(formats) % get_metavar(action.nargs)
TypeError: not enough arguments for format string 
```

为什么我会收到此错误？

我无法弄清楚发生了什么，然后我突然想到，使用命令格式字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:38:20.643

我认为你的问题错字严重，但试试这个：

```
group_gen.add_argument('--switch', nargs=1, metavar=('PARAM1')) 
```

那是你想要做的吗？

# c - 如果输入换行符，如何继续 scanf？

> ID：14572534
> 
> 赞同：0
> 
> 时间：2013-01-28T22:37:12.817
> 
> 标签：c

> **可能重复：**
> [退出带有负整数的while循环](https://stackoverflow.com/questions/7761525/exiting-a-while-loop-with-a-negative-integer)

我希望用户输入几个不同的数字，然后分别测试每个数字。

**此外，我只**需要在输入数字时终止程序`0`。

这是我的代码的开头：

```
int userInput;
printf("please enter some numbers: \n");
while ((scanf("%d", &userInput)) == 1)
{
    ...
} 
```

我怎样才能不断地从用户那里得到输入，直到`0`被输入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:40:29.643

```
while ((scanf("%d", &userInput) == 1) && (userInput != 0))
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T22:39:33.750

```
while (scanf("%d", &userInput))
{
    if(userInput == 0)
        break;
    /* do sth */
} 
```

# java - 为什么我的 JDBC 调用没有返回任何内容？

> ID：14572537
> 
> 赞同：-1
> 
> 时间：2013-01-28T22:37:23.800
> 
> 标签：java, jdbc

我可以将JDBC驱动连接到数据库。断点显示它有一个连接 id 并且字段已正确填充，但是在执行 select 语句后，即使数据在数据库中并且 SQL 调用在工作台中正常工作，也不会返回任何行。它只返回没有任何数据的字段名称。

为什么没有返回任何行？

代码：

```
public class DBConnect {

    private static Connection conn;
    public static String url = "jdbc:mysql://localhost/efwalter";
    public static String user = "root";
    public static String pass = "XXXXXXXXX";
    private PreparedStatement prep;

    public void open_Con() throws ClassNotFoundException {
        try {
            Class.forName("com.mysql.jdbc.Driver");
            conn = DriverManager.getConnection(url, user, pass);
        } catch (SQLException ex) {
            infoBox(ex.toString(), "ERROR");
        }
    }

    public ResultSet get_data(String SQL) {
        try {
            prep = conn.prepareStatement("SELECT * FROM efwalter.impact_tests");
            ResultSet rs = prep.executeQuery();
            return rs;
        } catch (SQLException ex) {
            infoBox(ex.toString(), "ERROR");
            return null;
        }
    }

    public void close_Con() {
        try {
            conn.close();
        } catch (SQLException ex) {
            infoBox(ex.toString(), "ERROR");
        }
    }

    public void infoBox(String infoMessage, String location) {
        JOptionPane.showMessageDialog(null, infoMessage, "InfoBox: " + location, JOptionPane.INFORMATION_MESSAGE);
    }
} 
```

访问 ResultSet 的代码：

```
 public void searchFired(ActionEvent event) throws ClassNotFoundException {
   try{
        DBConnect db = new DBConnect();
        db.open_Con();
        ResultSet rs = db.get_data();
        db.close_Con();

        while (rs.next())
        {
           study_struct study = new study_struct();
           ObservableList<String> row = FXCollections.observableArrayList();
           study.setStudy_number(rs.getInt(1));
           row.add(rs.getString(1));
           study.setCustomer_id(rs.getInt(2));
           study.setShop_order(rs.getInt(3));
           study.setProduct(rs.getString(4));
           study.setGmax_results(rs.getString(5));
           study.setGmax_average(rs.getDouble(6));
           study.setHic_results(rs.getString(7));
           study.setHic_average(rs.getDouble(8));
           study.setSensor_data_x(rs.getString(9));
           study.setSensor_data_y(rs.getString(10));
           study.setDescription(rs.getString(11));
           study.setGauge(rs.getString(12));
           study.setAppraiser(rs.getString(13));
           study.setStudy_name(rs.getString(14));
           row.add(rs.getString(14));
           study.setTimestamp(rs.getString(15));
           row.add(rs.getString(15));
           study.setWeight(rs.getString(16));
           found_studies.add(study);
           search_table.add(row);
        }

        resultsGrid.setItems(search_table);
   }
   catch (SQLException ex)
   {

   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:10:50.657

作为 JoshDM 答案的扩展......

您需要确保在完成连接之前保持连接打开，但您还应该尽一切努力确保连接正确关闭......

```
public void searchFired(ActionEvent event) throws ClassNotFoundException {
    // This needs to be declared out side the try/catch so we can
    // reference it later...
    DBConnect db = new DBConnect();
    try {
        // Open the connection
        db.open_Con();
        // Get the data
        ResultSet rs = db.get_data();

        // Process the data
        while (rs.next()) {
            //...Trimmed for space ;)
        }

        resultsGrid.setItems(search_table);
    } catch (SQLException ex) {
        // It's never a good idea to "consume" exceptions,
        // if you're not going to re-throw it, you should it at least
        // log it
        ex.printStackTrace();
    } finally {
        // Make every attempt to close the connection now we're finished with it...
        try {
            db.close_Con();
        } catch (Exception e) {
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:38:37.397

在没有看到调用您的`get_data()`方法的代码（您应该发布该代码）的情况下，我怀疑您需要`ResultSet`在关闭`connection`.

这是一个如何正确工作的示例：

[http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Frzaha%2Fprepex.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=%2Frzaha%2Fprepex.htm)

编辑：根据您新发布的代码：

```
 DBConnect db = new DBConnect();
    db.open_Con();
    ResultSet rs = db.get_data();
    db.close_Con(); 
```

**您在获得 rows 后立即关闭连接**，这将关闭您的 ResultSet 并刷新您的数据。

遍历数据，然后调用`db.close_Con()`.

您**真正**想要的是对此的看法：

```
CustomDataContainer data = new CustomDataContainer();
Connection conn = null;
PreparedStatement prep = null;
ResultSet rs = null;

try {

    conn = getConnection(); // method returns a connection to your DB
    prep = conn.prepareStatement(STRING_REPRESENTING_YOUR_STATEMENT);
    rs = prep.executeQuery();

    while (rs.next()) {

       data.addData(rs.getString(1));
    }
} catch (Exception ex) {
    ex.printStackTrace();
    // re-throw ex
} finally {

    try { rs.close(); } catch (Exception ignore) {}
    try { prep.close(); } catch (Exception ignore) {}
    try { conn.close(); } catch (Exception ignore) {}
}

return data; 
```

# ruby-on-rails - Github 上组织的 Repos 列表（公共和私有）

> ID：14572544
> 
> 赞同：8
> 
> 时间：2013-01-28T22:37:44.443
> 
> 标签：ruby-on-rails, github, github-api

我正在尝试获取与在我的 rails 应用程序中使用 github api gem 的组织关联的所有 repos 的列表。我使用omniauth对用户进行身份验证，然后我可以访问他们的组织列表以及用户的repos列表，但我正在尝试获取用户组织的repos列表（他们具有管理权限） .

关于 stackoverflow的一个[问题](https://stackoverflow.com/questions/9755257/list-all-issues-from-an-organizations-private-repo-using-github-api-v3)似乎很有希望，它回答了我关于访问我已经拥有名称的组织回购信息的问题，但是我没有名称的回购呢？

任何想法如何使用 github api gem 列出组织的所有存储库？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T07:53:23.553

您可以使用普通 curl 获取信息吗？例如尝试：

```
curl -u "your_username" https://api.github.com/orgs/:your_organization/repos?type=private 
```

（这应该只列出私有存储库，替换`private`为`all`列出所有存储库，根据 API 文档：http: [//developer.github.com/v3/repos/#list-organization-repositories](http://developer.github.com/v3/repos/#list-organization-repositories)）。

如果这可行，那么您只是无法使用 ruby​​ 库使其正常工作？

如果您不知道用户属于哪个组织，请使用此 API 查找：http: [//developer.github.com/v3/orgs/#list-user-organizations](http://developer.github.com/v3/orgs/#list-user-organizations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-15T14:59:26.790

我能够使用 GitHub 的 GraphQL API 做到这一点：

```
{
  organization(login: "<my-org-name>") {
    repositories(first: 100) {
      totalCount
      edges {
        node {
          name
          isArchived
        }
      }
    }
  }
} 
```

我发现[GitHub 的 GraphQL Explorer](https://docs.github.com/en/free-pro-team@latest/graphql/overview/explorer)对于快速解决这个问题非常有用。

执行的一个选项是 GitHub 的`gh`CLI，它可以运行此查询，然后您可以使用`jq`或操作输出。

请注意，您需要为 100 多个存储库实现分页 :)

# jakarta-ee - 使用 Maven 阶段执行部署战争项目

> ID：14572545
> 
> 赞同：1
> 
> 时间：2013-01-28T22:37:45.647
> 
> 标签：jakarta-ee, maven, tomcat, maven-plugin, liquibase

我指定了一个插件（在 pom.xml 中），其执行应在流程资源阶段执行。因此，一旦我启动项目，它就会在编译和运行项目之前执行目标（使用 liquibase 更改数据库）。

```
<plugin>
  [...] 
  <executions>
    <execution>
      <phase>process-resources</phase>
      <goals>
        <goal>update</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

当我在生产中部署项目时，我有一个由 tomcat 部署的战争包。

但我不确定目标何时以及是否执行。我希望目标只执行一次，一旦它被部署并且在用户可以使用应用程序之前。

在这种情况下工作流程如何？目标是否只自动执行一次，或者我在这里错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:02:32.253

1\. “但我不确定目标何时以及是否执行。”

您可以检查 Maven 的输出。由于您将目标绑定到“process-resources”阶段，因此您可以检查“resources:resources”，如下所示：

```
 [INFO] [resources:resources {execution: yourExecutionId}] 
```

为每个执行添加 id 是一个好习惯：

```
 <executions>
                <execution>
                    <id>yourExecutionId</id>
                    <phase>package</phase>
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions> 
```

有关 maven 构建生命周期的更多详细信息，您可以[在此处](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)参考。

2\. “目标是自动执行一次，还是我在这里错过了什么。”

不总是。Maven 插件可以分叉生命周期，这意味着某些阶段将执行多次，例如[maven-source-plugin](http://maven.apache.org/plugins/maven-source-plugin/)。

# d3.js - 来自 Json 的 d3.js 颜色数据更改

> ID：14572553
> 
> 赞同：0
> 
> 时间：2013-01-28T22:38:40.497
> 
> 标签：d3.js

以此为例： http: [//mbostock.github.com/d3/talk/20111018/treemap.html](http://mbostock.github.com/d3/talk/20111018/treemap.html)

我正在尝试根据可视化的数据来使树图中的矩形颜色。该示例允许您按大小或按计数绘制树状图。我在每个条目 json 文件中添加了两个变量，“cola”和“colb”。每一个都只是一种颜色。

首次绘制图形时，它会根据大小进行排序，并使用可乐为矩形着色。使用计数而不是大小重绘地图我没有问题。我不知道如何让它使用 colb 而不是可乐。

这是代码的一部分。这是第一次选择颜色的地方。

```
 cell.append("svg:rect")
      .attr("width", function(d) { return d.dx - 1; })
      .attr("height", function(d) { return d.dy - 1; })
      .style("fill", function(d) { return d.cola; }); 
```

这是更改功能。

```
 d3.select("select").on("change", function() {
    treemap.value(this.value == "size" ? size : count).nodes(root);
    if (treemap.value(this.value == "size")) {
    cell.append("svg:rect").style("fill", function(d) {return d.cola; });
     }
    else {
     cell.append("svg:rect").style("fill", function(d) {return d.colb; });
    };
    zoom(node);

  });
}); 
```

仍在尝试找出d3。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T02:19:40.387

您可以在代码中使用某种变量来指定要使用的颜色（基于选择控件的状态）：

```
var cola = (d3.select("select").node().value == "size"); 
```

和

```
cell.append("svg:rect")
    .attr("width", function(d) { return d.dx - 1; })
    .attr("height", function(d) { return d.dy - 1; })
    .style("fill", function(d) { return cola ? d.cola : d.colb; }); 
```

然后，选择按钮可以切换此变量：

```
d3.select("select").on("change", function() {
  treemap.value(this.value == "size" ? size : count).nodes(root);
  cola = (this.value == "size");
  zoom(node);
}); 
```

确保更新缩放功能中的填充样式：

```
 t.select("rect")
      .attr("width", function(d) { return kx * d.dx - 1; })
      .attr("height", function(d) { return ky * d.dy - 1; })
      .style("fill", function(d) { return cola ? d.cola : d.colb; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:42:47.353

我认为问题在于：

```
 if (treemap.value(this.value == "size")) ... 
```

它应该是：

```
if (this.value == "size") ... 
```

此外，您可能是指`cell.selectAll('rect').style(...)`而不是`cell.append('rect').style(...)`在`if-then-else`体内。但是，如果没有看到其余代码，我不能肯定地说。

# selenium - Selenium RC 未填写密码字段

> ID：14572558
> 
> 赞同：2
> 
> 时间：2013-01-28T22:39:06.883
> 
> 标签：selenium, passwords, field, selenium-rc

我正在使用 TestNG 运行 selenium RC 并填写注册页面。此页面包含姓名、电子邮件、密码等内容。
所有字段都按照我的预期填写，除了密码和确认密码字段。这两个保持空白。我徒劳地搜索了几个论坛（包括这个）以寻求解决方案。

该论坛上的一篇帖子建议这样做：char[] password = {'p','a','s','s','w','o','r','d'}; for(int i = 0; i < 8; i++){ selenium.keyPress("密码", password[i]); }

问题在于它在 keyPress 上失败，因为预期的是字符串，而不是字符。我想知道这是如何工作的。

这是正在测试的源： `<input name="ctl00$ContentPlaceHolder1$EmailTextBox" type="text" maxlength="64" id="ctl00_ContentPlaceHolder1_EmailTextBox" class="tahname" /> <input name="ctl00$ContentPlaceHolder1$PasswordTextBox" type="password" maxlength="80" id="ctl00_ContentPlaceHolder1_PasswordTextBox" class="tahname" /> <input name="ctl00$ContentPlaceHolder1$ConfirmPasswordTextBox" type="password" id="ctl00_ContentPlaceHolder1_ConfirmPasswordTextBox" class="tahname" />`

这是我的硒代码

```
selenium.type(emailLocator, "me@here.com");
selenium.type(passwordLocator, "password");
selenium.type(confirmPasswordLocator, "password"); 
```

我已经仔细检查了所有三个文本框的定位器。那里没问题。电子邮件文本框填写得很好。执行后密码和确认密码文本框为空白。我确实注意到密码文本框类型=“密码”。我需要以不同的方式处理这些吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:26:29.147

警告：我没有尝试使用 Selenium，但是我在这里描述的方法在不同但相关的场景中工作。

*   将密码字段类型更改为文本；
*   填写所需的值；
*   改回密码。

# java - 用Java初始化一个对象的Vector，总是不对

> ID：14572562
> 
> 赞同：0
> 
> 时间：2013-01-28T22:39:11.143
> 
> 标签：java, vector, initialization

```
Vector<Pair> Pairs = new Vector<Pair>();
for (int i=0; i!= Size; i++){
        Pair p = new Pair();
        Pairs.add(p);
        System.out.println(i+ " "+ Pairs.get(i).Pair); // first output
    }

     for(int i=0; i!=Pairs.size();i++){
            System.out.println("p"+ i+ " "+ Pairs.get(i).Pair); // second output

    } 
```

我初始化了一个 Pair 类的向量，Pair 类将随机生成两个双精度数，然后我尝试按照上面的代码创建一个对向量，两个输出在向量初始化时产生，一个是在向量 Pairs 之后制作。为什么结果不同，输出的第二部分只是重复相同的元素，但它们应该是相同的。输出是：

```
0 [-0.9771848260519362, 0.3677255241044455]
1 [-0.453064196696608, 0.10266228385031217]
2 [0.7337531470828571, -0.9331922628126463]
3 [-0.8083142272953654, -0.8923373383889719]
4 [0.19338350002773197, 0.8060945513704245]
5 [0.01753932066182662, 0.4739045577520977]
6 [-0.10060179118660373, 0.5392480353575093]
7 [0.01970274932747107, 0.4450926528405188]
8 [-0.7520808447905654, -0.4791789391059751]
9 [0.4907563252803737, 0.7654845250011753]
p0 [0.4907563252803737, 0.7654845250011753]
p1 [0.4907563252803737, 0.7654845250011753]
p2 [0.4907563252803737, 0.7654845250011753]
p3 [0.4907563252803737, 0.7654845250011753]
p4 [0.4907563252803737, 0.7654845250011753]
p5 [0.4907563252803737, 0.7654845250011753]
p6 [0.4907563252803737, 0.7654845250011753]
p7 [0.4907563252803737, 0.7654845250011753]
p8 [0.4907563252803737, 0.7654845250011753]
p9 [0.4907563252803737, 0.7654845250011753] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:44:48.243

您的第二个循环显示了在第一个循环中最后创建的对。您可能将 Pair 字段设为静态，这意味着所有 Pair 实例共享一个唯一版本。静态字段属于定义它的类。非静态字段属于类的实例。

阅读[有关此主题的 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

# regex - 如何使用重复的正则表达式提取数据？

> ID：14572563
> 
> 赞同：2
> 
> 时间：2013-01-28T22:39:12.367
> 
> 标签：regex, mod-rewrite, pattern-matching, repeat

所以我目前正在重写规则，我基本上想做以下事情：

```
\/([\w+-]+)\/([\w+-]+)\/([\w+-]+)\/([\w+-]+)\/([\w+-]+)... 
```

正如你所看到的，我想一遍又一遍地匹配相同的模式，我可以写出来，但是很多次都适合我目前的目的，但这不是很优雅。由于每次捕获都使用相同的模式，因此如果可以以任意方式编写它会很好，如下所示：

```
(?:\/([\w+-]+))+ 
```

然后理想情况下，我可以按如下方式分配重写：

```
$1.php?one=$2&two=$3... 
```

有谁知道这是否可能？可能不是，但从来没有伤害过问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:55:11.220

这种想法称为[重复捕获组](http://www.regular-expressions.info/captureall.html)，这是不可能的。想象一下：捕获的字符`([\w+-]+)`被放入缓冲区，第二个匹配简单地覆盖第一个。

一个实用的解决方案是捕获整个内容，并在 php（或任何其他服务器端脚本）中处理它：

```
RewriteRule (.*) index.php?req=$1 
```

然后在 PHP 中：

```
list($_GET['one'], $_GET['two'], $_GET['three']) = explode('\', $_GET['req']) 
```

或者......嗯，这是非常不切实际的，但你可以通过使用递归来使用 mod_rewrite 来做到这一点：每次迭代都会识别最后一段，将其传递给 query_string 等。它在生产中不起作用（因为 Apache 有递归限制设置为低），但这是一个很好的提醒，mod_rewrite 是图灵完备的。

# perl - 是否可以使用 WWW::Mechanize::Firefox 单击 Javascript 弹出窗口？

> ID：14572565
> 
> 赞同：0
> 
> 时间：2013-01-28T22:39:14.703
> 
> 标签：perl, firefox, download, mechanize

我会尽量让自己清楚。我想自动下载一个文件。到目前为止我所做的：

```
use WWW::Mechanize::Firefox;
use Crypt::SSLeay;
$ENV{PERL_LWP_SSL_VERIFY_HOSTNAME}=0;
$url = $url.@ARGV[0]; 
my $mech = WWW::Mechanize::Firefox->new;
$mech->get( $url );
$mech->form_name('sysinfo');
$mech->click_button( name => 'download' ); 
```

**当我单击该按钮时，由于onclick()** js 事件，会弹出一个窗口。它询问我想对文件做什么，所以我需要单击“**保存**”按钮。问题是我不能让窗户去做。我不能使用**get**因为我知道的唯一 URL 是弹出新窗口的那个。我找不到类似的东西。那么有可能做我想做的事吗？还是有其他方法？我会很感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T18:04:35.450

onclick() 上的函数是什么？也许您可以尝试将其粘贴到网址栏中`javascript:function_on_onclick(param1, param2);`

如果可行，请尝试`$mech->get('javascript:function_on_onclick(param1, param2);');`

# allegro - 在 xcode 中归档 allegro 程序

> ID：14572575
> 
> 赞同：2
> 
> 时间：2013-01-28T22:39:39.057
> 
> 标签：allegro, allegro5

我一直试图让我的游戏在 xcode 中作为存档应用程序运行，但我根本无法让它运行。游戏在正常运行和配置文件模式下运行，只是在存档后才运行。我收到以下错误消息，这让我看起来好像根本没有 main 函数。

```
Dyld Error Message:
Symbol not found: __al_mangled_main
Referenced from: /usr/local/lib/liballegro_main.5.1.dylib
Expected in: flat namespace
in /usr/local/lib/liballegro_main.5.1.dylib 
```

我也尝试使用框架构建应用程序无济于事。

这是我的构建设置

*   头文件搜索路径：/usr/local/include
*   库搜索路径：/usr/local/lib
*   用户标头搜索路径：“$(PROJECT_DIR)/..”、“$(BUILT_PRODUCTS_DIR)”
*   总是搜索用户路径：是

[我在https://github.com/tmuntan1/allegro-example](https://github.com/tmuntan1/allegro-example)也有一个示例项目

谢谢您的帮助

**编辑 1**：

这是框架的错误消息

```
Dyld Error Message:
Symbol not found: __al_mangled_main
Referenced from: /Users/USER/Desktop/app.app/Contents/MacOS/../Frameworks/AllegroMain-5.1.framework/Versions/5.1.6/AllegroMain-5.1
Expected in: flat namespace
in /Users/USER/Desktop/app.app/Contents/MacOS/../Frameworks/AllegroMain-5.1.framework/Versions/5.1.6/AllegroMain-5.1 
```

**编辑 2**：

我解决了我的问题，但我对解决方案并不满意。如果我去“为存档而构建”并在派生数据中找到它可以工作的版本。仅当我构建存档并通过管理器获取应用程序时，它才不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-30T02:52:35.020

我有这个确切的问题，我终于通过替换主函数的定义来解决它：

```
 int main(void) 
```

经过：

```
 int main(int argc, char **argv) 
```

# javascript - 谷歌日历导出应用程序错误

> ID：14572577
> 
> 赞同：0
> 
> 时间：2013-01-28T22:39:52.897
> 
> 标签：javascript, jquery, web-applications, google-api, google-calendar-api

我正在编写一个用于将事件导出到 Google 日历的简短应用程序。（事件是从我网站的代码处理信息中获得的。）但是，当我单击按钮时，我编写的脚本给了我一个奇怪的错误。我第一次单击按钮时遇到的错误是：`Uncaught TypeError: Cannot call method 'setApiKey' of undefined`. 但是，第二次点击按钮没有刷新页面，错误消失，代码运行完美。

这是我的代码，你可以看到我在设置之前定义了 api 键：

```
var exportCalendarToGoogle = function() {
    var clientId = '38247913478902437.google@user...';
    var scope = 'https://www.googleapis.com/auth/calendar';
    var apiKey = 'JDKLSFDIOP109321403AJSL';

    var withGApi = function() {
        gapi.client.setApiKey(apiKey);
        gapi.auth.init(checkAuth);
      }
    var checkAuth = function() {
        gapi.auth.authorize({client_id: clientId, scope: scope, immediate: false}, handleAuthResult);
    }

    var handleAuthResult = function(authResult) {
        if(authResult) {
            gapi.client.load("calendar", "v3", exportCalendar);
        } else {
            alert("Authentication failed: please enter correct login information.");
        }
    }
 //functions to format the calendar json input to Google calendar... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:44:45.903

听起来好像`gapi`还没有完全加载

[http://code.google.com/p/google-api-javascript-client/wiki/GettingStarted](http://code.google.com/p/google-api-javascript-client/wiki/GettingStarted)

有两个回调：

1) 在 URL 中加载 gapi 代码：

```
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script> 
```

2) 您还可以提供一个回调函数，让您知道特定 API 何时加载：

`gapi.client.load('plus', 'v1', function() { console.log('loaded.'); });`

我认为你的问题是 1)

# sql - 问题比较列表

> ID：14572581
> 
> 赞同：0
> 
> 时间：2013-01-28T22:40:01.000
> 
> 标签：sql

我有一个看起来像这样的个人资料：

```
profile_id | answer_id
----------------------
1                1
1                4
1               10 
```

我有一个表格，其中包含民意调查受访者的回复列表，其结构如下：

```
user_id | answer_id
-------------------
1            1
1            9
2            1
2            4
2           10
3           14
3           29 
```

如何选择在个人资料中给出所有答案的用户列表？在这种情况下，只有用户 2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:43:48.607

您可以使用以下内容：

```
select user_id
from response r
where answer_id in (select distinct answer_id  -- get the list of distinct answer_id
                    from profile
                    where profile_id = 1)  -- add filter if needed
group by user_id  -- group by each user
having count(distinct answer_id) = (select count(distinct answer_id)  -- verify the user has the distinct count
                                    from profile
                                    where profile_id = 1)  -- add filter if needed 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/5f3d9/2)

或者另一种写法是：

```
select user_id
from response r
where answer_id in (1, 4, 10)
group by user_id
having count(distinct answer_id) = 3 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/5f3d9/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:45:06.823

这是一个带有聚合的连接查询示例：

```
select a.user_id
from profile p full outer join
     answers a
     on p.answer_id = p.answer_id and
        p.profile_id = 1
group by a.user_id
having count(p.profileid) = count(*) and
       count(a.user_id) = count(*) 
```

完全外连接将所有配置文件与所有答案匹配。如果两个集合完全匹配，则另一个集合的 id 中没有“null”。该`having`子句检查是否存在这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:46:28.687

```
SELECT user_id 
FROM user_answer 
WHERE user_id in (SELECT user_id FROM profile WHERE answer_id = 1) AND
      user_id in (SELECT user_id FROM profile WHERE answer_id = 4) AND
      user_id in (SELECT user_id FROM profile WHERE answer_id = 10) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T22:43:24.253

```
SELECT *
FROM   table1
       INNER JOIN table2
         ON table1.answer_id = table2.answer_id
WHERE  table2.user_id = 2 
```

我想这可能是你要找的。

# c# - BackgroundWorker 可以加入（链接到、访问、调用、成为）STAThread

> ID：14572587
> 
> 赞同：0
> 
> 时间：2013-01-28T22:40:40.477
> 
> 标签：c#, backgroundworker, clipboard, sta, clipboarddata

我不太熟悉 STAThread 的确切作用（是），所以我不确定我的问题是否正确陈述。

我有一个在 BackgroundWorker 线程中运行的进程，它将 Excel 范围的内容复制到剪贴板 ( `Excel.Range.Copy()`)。复制后，我需要能够访问剪贴板内容以将它们写入文本文件，但显然剪贴板无法直接从我的 BackgroundWorker 访问（当我尝试`Clipboard.GetText()`从我的 BackgroundWorker 使用并将该文本写入我的文本文件时，没有文本传递，即使我可以在单独的文本文件上手动执行 Ctrl-V 并粘贴刚刚通过 C# 进程从 Excel 范围复制的内容）。

我还应该提到，我在 BackgroundWorker 中运行此进程，以方便使用显示进程状态的 ProgressBar。所以，如果有一个解决方案让我使用我的 ProgressBar 并在不使用 BackgroundWorker 的情况下访问剪贴板内容，我绝对欢迎它！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T11:59:10.287

这是一些非常酷且简单的东西。只需调用 UI 线程，假设您的项目是基于 WinForms 的，那么您就可以与 Microsoft 产品进行交互。在我们的例子中，我们使用了 Outlook，但 Excel 也是这样工作的：

```
BackgroundWorker bgw = new BackgroundWorker();
bgw.DoWork += new DoWorkEventHandler(this.bgw_DoWork);
bgw.RunWorkerAsync();

private void bgw_DoWork(object sender, DoWorkEventArgs e)
{
    // Invoke the UI thread
    // "this" refering to the Form1, or what ever your form is
    this.Invoke((MethodInvoker)delegate
    {
        MsOutlook.ApplicationClass OutlookApplication = new MsOutlook.ApplicationClass();
        // do whatever here ... etc etc

    }
} 
```

# mysql - 在 Codeigniter 中获取多个插入的 ID

> ID：14572592
> 
> 赞同：1
> 
> 时间：2013-01-28T22:40:58.963
> 
> 标签：mysql, codeigniter

我正在为自己学习 CI 并且出现了这个问题。如果我运行多个 INSERT，无论是否作为事务，是否可以获取每个的插入 ID（以正确的顺序）而不是`$this->db->insert_id()`为每个 INSERT 一次运行一个？

例如

```
-- Get ID of each
INSERT INTO table VALUES (insert1), (insert2), (insert3)

-- What if they're called separately
INSERT INTO table VALUES (insert1)
INSERT INTO table VALUES (insert2)
INSERT INTO table VALUES (insert3) 
```

是否仍然可以从所有这些中获取 ID 作为数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:01:06.883

很简单

控制器

```
$ids    =   array();

$data[0]    =   array(blah,blah);
$data[1]    =   array(blah,blah);
$data[2]    =   array(blah,blah);

for($i=0;$i<3;$i++)
{
    $ids[]  =   $this->my_model->insert($data[$i]);
}
echo '<pre>';
print_r($ids); 
```

模型

```
public function insert($data)
{
    $this->db->insert('table_name',$data);
    return $this->db->insert_id()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:42:38.723

据我所知，我认为你真的必须在每个插入之间插入它，只需将它存储在一个数组中。

```
var $insert_id = array();

public function insert()
{
INSERT INTO table VALUES (insert1)
$this->insert_id =$this->db->insert_id();

INSERT INTO table VALUES (insert2)
$this->insert_id =$this->db->insert_id();

INSERT INTO table VALUES (insert3)
$this->insert_id =$this->db->insert_id();
} 
```

每次插入数据库记录时，您仍然可以使用 insert_id(); 在每次插入之后将其存储到一个数组中。然后你可以创建一个函数来返回它。

```
public function get_inserted_keys()
{
  return $insert_id;
} 
```

# php - 浏览器不显示或解析包含文件的内容

> ID：14572596
> 
> 赞同：0
> 
> 时间：2013-01-28T22:41:16.613
> 
> 标签：php

我有一个带有 textarea 控件的表单，主要用于输入由纯文本组成的文章...在 textarea 控件中，我有类似的文本

![在此处输入图像描述](../Images/a8bd9de31164fe06fb41b952b97bd1c4.png)

我提交表单并将 textarea 数据保存到数据库字段中。到现在为止还挺好..

![正确的数据出现在数据库中](../Images/7f0e6f3e3d97225e97e93ea326b91562.png)

在浏览器中，我试图输出数据库字段，但我没有得到 php 包含文件的内容，而是得到如下内容：

![在此处输入图像描述](../Images/72892795d9ffd5ff46cba7ff5c6f3f1c.png)

php标签被注释了！！！

为什么浏览器不显示/解析包含文件的内容？

更新：这是 test.php 的内容

```
<?php
   echo test;
?> 
```

这是article.php的代码

```
<?php
require_once('../includes/global.inc.php');
require_once('../includes/connection.inc.php');

if (isset($_GET['article']) && is_numeric($_GET['article'])) {
   $get_article = (int)$_GET['article'];

   $conn = connect('read');

   $sql = 'SELECT article.article_id, article.title, article.description, article.article, article.seo_url
        FROM article
        WHERE article.article_id = ?';

   $stmt = $conn->stmt_init();

   $stmt->prepare($sql);
   $stmt->bind_param('i', $get_article);
   $stmt->execute();
   $stmt->store_result();
   $stmt->bind_result($articleid, $title, $description, $article, $seourl);
   $stmt->fetch();
   $stmt->free_result();
   $stmt->close();
}
?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   ...
</head>
<body>
    <?php
     echo $title;
     echo $article;
     ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:08:22.540

似乎您误解了 PHP 的执行位置。PHP 在服务器上而不是在浏览器中执行。您必须确保该站点将在服务器上由 PHP 解析。您将主要通过使用启用 PHP 的网络服务器并为文件提供 .php 扩展名来完成此操作。

php代码没有被淘汰。那只是您的调试工具显示它被注释掉了，因为打开`<?php`会导致无效的 HTML。您的浏览器的 HTML 解析器也有可能添加`<!--`以避免打开 php.ini 时出现问题。我不确切知道这一点。

您可以通过查看原始 html 源代码来验证这一点，您会发现注释掉您的 php 并没有什么神奇之处：)

# javascript - 制作点击播放视频的 YouTube 视频标题卡

> ID：14572598
> 
> 赞同：0
> 
> 时间：2013-01-28T22:41:18.763
> 
> 标签：javascript, css, youtube

我目前正在构建一个顶部有一个大英雄视频的网站，我想覆盖一个自定义标题卡。该项目要求标题卡在悬停时稍微改变颜色，单击时消失并播放隐藏在其后面的 YouTube 视频。

第一部分，制作带有悬停文本的大英雄图像，很容易（[http://couchcreative.co/tcc/stories.html](http://couchcreative.co/tcc/stories.html)）。但是，现在我正在努力执行以下步骤：

1）让标题卡在点击时消失，显示下面的 YouTube 视频（我猜我会使用某种形式的 javascript 来切换不透明度或在 div 上显示更改以交换两个元素？）。

2）获得点击立即开始播放YouTube视频，因此用户无需点击两次即可观看视频。

3) 确保视频暂停或播放结束时标题卡不会返回。

我一直在使用 YT 的 javascript API，并且我已经根据我的需要定制了一个无铬播放器，但是我遇到了确保标题卡消失并且视频开始播放的 javascript 的问题。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T04:09:01.617

弄清楚了。原来 YouTube API 要求我准备好播放器，我没有意识到这是必要的。添加了一些 jQuery 淡入和淡出，我很高兴。我所要做的就是创建一个新的 JS 文件，其中包含：

```
var player;

function onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayer', {
    });
}

$('a.containerdiv').click(function() {
    $('.titlecard').fadeOut('fast', function() {

    });

    $('.youtubevideo').fadeIn('fast', function() {

    });

    player.playVideo();

}); 
```

我还确保在我的 HTML 中调用 YouTube API 文件，但我很晚才意识到我忘了这样做。最后的动画效果也很好。甜的！

# node.js - passport.js RESTful 身份验证

> ID：14572600
> 
> 赞同：157
> 
> 时间：2013-01-28T22:41:24.020
> 
> 标签：node.js, rest, authentication, restify, passport.js

如何使用 passport.js 通过 RESTful API 而不是通过 Web 界面处理身份验证（例如本地和 Facebook）？

具体问题是处理将数据从回调传递到 RESTful 响应 (JSON) 与使用典型 res.send({ data: req.data })，设置重定向到 Facebook 的初始 /login 端点（/login 不能通过 AJAX 访问，因为它不是 JSON 响应 - 它是通过回调重定向到 Facebook）。

我找到了[https://github.com/halrobertson/test-restify-passport-facebook](https://github.com/halrobertson/test-restify-passport-facebook)，但我无法理解它。

此外，passport.js 如何存储身份验证凭据？服务器（或者它是服务？）由 MongoDB 支持，我希望凭据（登录和 pw 的盐渍哈希）存储在那里，但我不知道 passport.js 是否具有这种类型的功能。

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2013-05-27T22:55:35.540

这里有很多问题，似乎即使这些问题是在 Node 和 passport.js 的上下文中提出的，但真正的问题更多的是关于工作流，而不是如何使用特定技术来做到这一点。

让我们使用@Keith 示例设置，稍作修改以增加安全性：

*   Web 服务器`https://example.com`为单页 Javascript 客户端应用程序提供服务
*   RESTful Web 服务`https://example.com/api`为富客户端应用程序提供服务器支持
*   在 Node 和 passport.js 中实现的服务器。
*   服务器有一个带有“用户”表的数据库（任何类型）。
*   提供用户名/密码和 Facebook Connect 作为身份验证选项
*   富客户端将 REST 请求放入`https://example.com/api`
*   可能有其他客户端（例如电话应用程序）使用 Web 服务，`https://example.com/api`但不了解 Web 服务器`https://example.com`。

请注意，我使用的是安全 HTTP。在我看来，这对于任何公开可用的服务都是必须的，因为密码和授权令牌等敏感信息正在客户端和服务器之间传递。

# 用户名/密码认证

让我们先看看普通的旧身份验证是如何工作的。

*   用户连接到`https://example.com`
*   服务器提供一个丰富的 Javascript 应用程序来呈现初始页面。Somehwe 在页面中有一个登录表单。
*   由于用户没有登录，这个单页应用程序的许多部分都没有填充数据。所有这些部分都有一个“登录”事件的事件侦听器。所有这些都是客户端的东西，服务器不知道这些事件。
*   用户输入他/她的登录名和密码并点击提交按钮，这会触发 Javascript 处理程序在客户端变量中记录用户名和密码。然后这个处理程序触发“登录”事件。同样，这都是客户端操作，**凭据尚未发送到服务器**。
*   调用“登录”事件的侦听器。现在，它们中的每一个都需要向 RESTful API 发送一个或多个请求，`https://example.com/api`以获取要在页面上呈现的用户特定数据。他们发送到 Web 服务的每个请求都将包含用户名和密码，可能采用 HTTP[基本](http://en.wikipedia.org/wiki/Basic_access_authentication)身份验证的形式，因为不允许使用 RESTful 的服务从一个请求到下一个请求维护客户端状态。由于 Web 服务在安全 HTTP 上，因此密码在传输过程中被安全加密。
*   Web 服务`https://example.com/api`接收到一堆单独的请求，每个请求都带有身份验证信息。根据用户数据库检查每个请求中的用户名和密码，如果发现正确，则执行请求的函数并将数据以 JSON 格式返回给客户端。如果用户名和密码不匹配，则会以 401 HTTP 错误代码的形式向客户端发送错误。
*   您可以在 RESTful 服务中使用“get_access_token”函数，而不是强制客户端在每个请求中发送用户名和密码，该函数获取用户名和密码并使用令牌进行响应，令牌是某种唯一且具有一定期限的加密哈希与之相关的日期。这些令牌与每个用户一起存储在数据库中。然后客户端在后续请求中发送访问令牌。然后将根据数据库而不是用户名和密码验证访问令牌。
*   手机应用程序等非浏览器客户端应用程序与上述相同，它们要求用户输入他/她的凭据，然后将它们（或从它们生成的访问令牌）与每个请求一起发送到 Web 服务。

此示例的重要要点是**RESTful Web 服务需要对每个请求进行身份验证**。

在这种情况下，附加的安全层将在用户身份验证之外添加客户端应用程序授权。例如，如果您的 Web 客户端、iOS 和 Android 应用程序都使用 Web 服务，您可能希望服务器知道给定请求的客户端是这三个客户端中的哪一个，而不管经过身份验证的用户是谁。这可以使您的 Web 服务将某些功能限制为特定客户端。为此，您可以使用 API 密钥和秘密，请参阅[此答案](https://stackoverflow.com/questions/2674445/how-do-api-keys-and-secret-keys-work)以获取一些想法。

# 脸书认证

上述工作流程不适用于 Facebook 连接，因为通过 Facebook 登录有第三方，即 Facebook 本身。登录过程要求用户被重定向到 Facebook 的网站，在该网站上输入的凭据不受我们的控制。

所以让我们看看事情是如何变化的：

*   用户连接到`https://example.com`
*   服务器提供一个丰富的 Javascript 应用程序来呈现初始页面。页面中有一个登录表单，其中包含“使用 Facebook 登录”按钮。
*   用户单击“使用 Facebook 登录”按钮，这只是一个重定向到 (例如) 的链接`https://example.com/auth/facebook`。
*   该`https://example.com/auth/facebook`路线由 passport.js 处理（请参阅[文档](http://passportjs.org/guide/facebook/)）
*   用户看到的只是页面发生了变化，现在他们位于 Facebook 托管页面中，他们需要登录并授权我们的 Web 应用程序。这完全不在我们的控制范围内。
*   用户登录 Facebook 并授予我们应用程序的权限，因此 Facebook 现在重定向回我们在 passport.js 设置中配置的回调 URL，按照[文档](http://passportjs.org/guide/facebook/)中的示例是`https://example.com/auth/facebook/callback`
*   路由的 passport.js 处理程序`https://example.com/auth/facebook/callback`将调用回调函数，该函数从 Facebook 接收 Facebook 访问令牌和一些用户信息，包括用户的电子邮件地址。
*   使用电子邮件，我们可以在我们的数据库中找到用户，并用它存储 Facebook 访问令牌。
*   您在 Facebook 回调中做的最后一件事是重定向回富客户端应用程序，但这次我们需要将用户名和访问令牌传递给客户端，以便客户端可以使用它们。这可以通过多种方式完成。例如，可以通过服务器端模板引擎将 Javascript 变量添加到页面中，或者可以使用此信息返回 cookie。（感谢@RyanKimber 指出在 URL 中传递此数据的安全问题，正如我最初建议的那样）。
*   所以现在我们再次启动单页应用程序，但客户端拥有用户名和访问令牌。
*   客户端应用程序可以立即触发“登录”事件，并让应用程序的不同部分从 Web 服务请求他们需要的信息。
*   发送到的所有请求都`https://example.com/api`将包括用于身份验证的 Facebook 访问令牌，或者通过 REST API 中的“get_access_token”函数从 Facebook 令牌生成的应用程序自己的访问令牌。
*   非浏览器应用程序在这里有点困难，因为 OAuth 需要 Web 浏览器才能登录。要从手机或桌面应用程序登录，您需要启动浏览器来重定向到 Facebook，更糟糕的是，您浏览器需要一种方法通过某种机制将 Facebook 访问令牌传递回应用程序。

我希望这能回答大部分问题。当然，您可以将 Facebook 替换为 Twitter、Google 或任何其他基于 OAuth 的身份验证服务。

我很想知道是否有人有更简单的方法来处理这个问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-06T09:28:54.513

我非常感谢@Miguel 对每种情况的完整流程的解释，但我想在 Facebook 身份验证部分添加一些内容。

Facebook 提供了一个[Javascript SDK](https://developers.facebook.com/docs/facebook-login/getting-started-web/)，您可以使用它直接在客户端获取访问令牌，然后将其传递到服务器并用于进一步从 Facebook 拉取所有用户信息。所以你基本上不需要任何重定向。

此外，您还可以为移动应用程序使用相同的 API 端点。只需使用 Facebook 的 Android / iOS SDK，在客户端获取 Facebook access_token 并将其传递给服务器。

关于所解释的**无状态性质**，当 get_access_token 用于生成令牌并传递给客户端时，该令牌也存储在服务器上。所以它和会话令牌一样好，我相信这使它有状态？

只是我的2美分..

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-22T07:55:55.447

这是我发现的一篇很棒的文章，可以帮助您进行身份验证：

*   Facebook
*   推特
*   谷歌
*   本地认证

[简易节点身份验证：设置和本地](https://scotch.io/tutorials/easy-node-authentication-setup-and-local)

# seo - 将通话作为转化进行跟踪

> ID：14572601
> 
> 赞同：0
> 
> 时间：2013-01-28T22:41:31.113
> 
> 标签：seo, google-analytics, google-ads-api

我有一个响应式网站，它会根据用户的屏幕分辨率进行更改。其中一项更改是在智能手机上查看网站时显示的“致电我们”按钮。当用户点击按钮（它是一个`<a href="tel:000-000-0000">`样式链接）时，我需要能够在 Adwords 和 Google Analytics 中将其作为转换进行跟踪。

在重定向回`tel:`链接之前实现重定向到包含跟踪代码的另一个页面是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:12:10.647

使用带有 javascript onclick 事件处理程序的虚拟网页浏览更容易：

```
<a onclick="_gaq.push(['_trackPageview', '/tel/0000-000-0000']);return false" href="tel:000-000-0000"> 
```

但是我不确定这些链接是否可以被视为综合浏览量（因为它们没有内容），所以最好将它们视为事件（工作原理几乎相同，但使用 _trackEvent-Call 而不是 _trackPageview）。

虚拟网页浏览文档： [https ://developers.google.com/analytics/devguides/collection/gajs/asyncMigrationExamples#VirtualPageviews](https://developers.google.com/analytics/devguides/collection/gajs/asyncMigrationExamples#VirtualPageviews)

事件跟踪文档 [https://developers.google.com/analytics/devguides/collection/gajs/asyncMigrationExamples#EventTracking](https://developers.google.com/analytics/devguides/collection/gajs/asyncMigrationExamples#EventTracking)

# php - 如何找到字符串的物理长度？

> ID：14572602
> 
> 赞同：3
> 
> 时间：2013-01-28T22:41:30.923
> 
> 标签：php, javascript, html, css

在我的网站中，用户的用户名总是显示在每个页面的顶部（连同网站标题、其他页面链接等），字体大小为“3”

我花了很长时间才弄清楚这一点，但最终引起我注意的是，用户名很长的用户最终会弄乱每页顶部的间距，并且所有文本都被推下一行，使得整个事情看起来像罪恶一样丑陋（它只对个人用户可见，因为它是他们的用户名，但我根本不希望我的任何用户看到它）。

**我不是在问如何找到他们名字中的字符数**——我想知道的是如何确定他们的名字将占用的物理空间量，如果它太长，减少字体大小为 2，必要时甚至为 1。

简单的 strlen() 不起作用的原因是潜在的空间差异（“悲剧狄俄尼索斯”占用的空间比“HERSHEYFEVER”少，不管前者有更多字符）。

广泛的谷歌搜索不断给我留下更多的字符计数方法，所以我一无所知。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:45:56.373

您不能为此使用 PHP - 因为在很大程度上取决于前端样式（字体系列、字体大小、字体样式等）。您可以使用 jQuery 来确定元素长度，并在需要时应用某些功能：

**HTML**

```
<span id="box"><?=$yourString?></span> 
```

**jQuery**

```
$(function() {
   var box = $('#box');
   if (box.width() >= 50) {
      box.addClass('massiveLength');
   }
}); 
```

或者，如果你想对所有元素应用一些东西，[这里有一个 jsFiddle](http://jsfiddle.net/8kV4p/)向你展示如何。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:44:00.813

根本不可能在服务器上做好这件事。

相反，使用 Javascript 获取元素的实际宽度，然后减小其字体大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T02:34:02.230

我只是要把它扔掉，但如果你将用户名块包装在一个元素中并给它一个最大宽度，它可能会解决你的问题。

```
<span style="max-width: 50px; overflow: hidden;">The Username Goes Here</span> 
```

# c++ - C++ 终止调用而没有活动异常 (gdb)

> ID：14572603
> 
> 赞同：1
> 
> 时间：2013-01-28T22:41:42.140
> 
> 标签：c++, xcode

使用 iOS 5.X Cpp 11 Xcode

我正在尝试确定导致此错误的原因。这可能是由于在线程完成之前调用了析构函数。

```
 // default_delete

```
template <class _Tp>
struct _LIBCPP_VISIBLE default_delete
{
    _LIBCPP_INLINE_VISIBILITY default_delete() _NOEXCEPT {}
    template <class _Up>
    _LIBCPP_INLINE_VISIBILITY default_delete(const default_delete<_Up>&,
         typename enable_if<is_convertible<_Up*, _Tp*>::value>::type* = 0) _NOEXCEPT {}
    _LIBCPP_INLINE_VISIBILITY void operator() (_Tp* __ptr) const _NOEXCEPT
    {
        static_assert(sizeof(_Tp) > 0, "default_delete can not delete incomplete type"); 
        delete __ptr;
    }
}; 
``` 堆栈跟踪如下：

```
 stack trace

```
2013-01-28 13:50:33.704 CPP11AudioRecoClient[4633:5107] A task has completed. Map now contains 0 entries.
terminate called without an active exception(gdb) bt

#0  0x316e932c in __pthread_kill
#1  0x33de620e in pthread_kill 
#2  0x33ddf29e in abort 
#3  0x36c6cf6a in abort_message 
#4  0x36c6a35a in default_terminate
#5  0x35237324 in _objc_terminate
#6  0x31997c96 in std::terminate
#7  0x319d3d18 in std::__1::thread::~thread ()
#8  0x00076cce in std::__1::default_delete<std::__1::thread>::operator() () at /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/c++/v1/memory:2512

#9  0x319d3d18 in std::__1::thread::~thread ()
#10 0x319d3d18 in std::__1::thread::~thread ()
#11 0x319c94cc in std::__1::__shared_weak_count::__release_shared ()
#12 0x00077606 in std::__1::shared_ptr<std::__1::thread>::~shared_ptr (this=0x2d64c4) at memory:4441
#13 0x0007676c in std::__1::shared_ptr<std::__1::thread>::~shared_ptr (this=0x2d64c4) at memory:4439
#14 0x00076038 in Microsoft::BingMobile::MusicReco::ClientSDK::Cpp11Thread::~Cpp11Thread (this=0x2d64c0) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/Cpp11ThreadFactory.cpp:125
#15 0x00075ffc in Microsoft::BingMobile::MusicReco::ClientSDK::Cpp11Thread::~Cpp11Thread (this=0x2d64c0) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/Cpp11ThreadFactory.cpp:123
#16 0x00075fdc in Microsoft::BingMobile::MusicReco::ClientSDK::Cpp11Thread::~Cpp11Thread (this=0x2d64c0) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/Cpp11ThreadFactory.cpp:123
#17 0x00077f68 in std::__1::default_delete<Microsoft::BingMobile::MusicReco::ClientSDK::Cpp11Thread>::operator() () at /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/c++/v1/memory:2512
#18 0x00077f68 in std::__1::__shared_ptr_pointer<Microsoft::BingMobile::MusicReco::ClientSDK::Cpp11Thread*, std::__1::default_delete<Microsoft::BingMobile::MusicReco::ClientSDK::Cpp11Thread>, std::__1::allocator<Microsoft::BingMobile::MusicReco::ClientSDK::Cpp11Thread> >::__on_zero_shared (this=0x2d5280) at memory:3668
#19 0x319c94cc in std::__1::__shared_weak_count::__release_shared ()
#20 0x0006a86e in std::__1::shared_ptr<Microsoft::BingMobile::MusicReco::ClientSDK::IThread>::~shared_ptr (this=0x2d6478) at memory:4441
#21 0x00069d94 in std::__1::shared_ptr<Microsoft::BingMobile::MusicReco::ClientSDK::IThread>::~shared_ptr (this=0x2d6478) at memory:4439
#22 0x00068d56 in Microsoft::BingMobile::MusicReco::ClientSDK::AsyncTask::~AsyncTask (this=0x2d6460) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/AsyncTask.cpp:34
#23 0x00068ce8 in Microsoft::BingMobile::MusicReco::ClientSDK::AsyncTask::~AsyncTask (this=0x2d6460) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/AsyncTask.cpp:33
#24 0x00068cc8 in Microsoft::BingMobile::MusicReco::ClientSDK::AsyncTask::~AsyncTask (this=0x2d6460) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/AsyncTask.cpp:33
#25 0x0006ad08 in std::__1::default_delete<Microsoft::BingMobile::MusicReco::ClientSDK::AsyncTask>::operator() () at /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/c++/v1/memory:2512
#26 0x0006ad08 in std::__1::__shared_ptr_pointer<Microsoft::BingMobile::MusicReco::ClientSDK::AsyncTask*, std::__1::default_delete<Microsoft::BingMobile::MusicReco::ClientSDK::AsyncTask>, std::__1::allocator<Microsoft::BingMobile::MusicReco::ClientSDK::AsyncTask> >::__on_zero_shared (this=0x2d6090) at memory:3668
#27 0x319c94cc in std::__1::__shared_weak_count::__release_shared ()
#28 0x00069fca in std::__1::shared_ptr<Microsoft::BingMobile::MusicReco::ClientSDK::ITaskObserver>::~shared_ptr (this=0x44fb4fc) at memory:4441
#29 0x00069e6c in std::__1::shared_ptr<Microsoft::BingMobile::MusicReco::ClientSDK::ITaskObserver>::~shared_ptr (this=0x44fb4fc) at memory:4439
#30 0x00099c22 in Microsoft::BingMobile::MusicReco::ClientSDK::RunnableTaskBase::notifyObserver (this=0x2d6350, observerWeak=<value temporarily unavailable, due to optimizations>, sharedReferenceToSelf=@0x44fb638) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/RunnableTaskBase.cpp:100
#31 0x00099930 in Microsoft::BingMobile::MusicReco::ClientSDK::RunnableTaskBase::notifyObservers (this=0x2d6350, sharedReferenceToSelf=<value temporarily unavailable, due to optimizations>) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/RunnableTaskBase.cpp:79
#32 0x000996e0 in Microsoft::BingMobile::MusicReco::ClientSDK::RunnableTaskBase::setStatus (this=0x2d6350, targetStatus=Microsoft::BingMobile::MusicReco::ClientSDK::Completed, sharedReferenceToSelf=@0x44fbd20) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/RunnableTaskBase.cpp:107
#33 0x00087168 in Microsoft::BingMobile::MusicReco::ClientSDK::PingWebServiceTask::runTaskChecked (this=0x2d6350, sharedReferenceToSelf=<value temporarily unavailable, due to optimizations>) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/PingWebServiceTask.cpp:120
#34 0x00099356 in Microsoft::BingMobile::MusicReco::ClientSDK::RunnableTaskBase::runTask (this=0x2d6350) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/RunnableTaskBase.cpp:60
#35 0x000991d2 in Microsoft::BingMobile::MusicReco::ClientSDK::RunnableTaskBase::run (this=0x2d6350, sharedReferenceToSelf=<value temporarily unavailable, due to optimizations>) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/RunnableTaskBase.cpp:48
#36 0x00099250 in non-virtual thunk to Microsoft::BingMobile::MusicReco::ClientSDK::RunnableTaskBase::run(std::__1::shared_ptr<Microsoft::BingMobile::MusicReco::ClientSDK::IRunnable>) () at memory:4023
#37 0x000759ca in Microsoft::BingMobile::MusicReco::ClientSDK::RunHookedRunnable::run (this=0x2d64a0, sharedReferenceToSelf=@0x44fcea8) at /Users/v-mattkn/Desktop/CPP11AudioRecoClient/Cpp11ThreadFactory.cpp:75
#38 0x0007736e in _ZNKSt3__110unique_ptrINS_5tupleIJMN9Microsoft10BingMobile9MusicReco9ClientSDK9IRunnableEFvNS_10shared_ptrIS6_EEES8_S8_EEENS_14default_deleteISB_EEEdeEv [inlined] () at /Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/c++/v1/memory:309
#39 0x0007736e in _ZNSt3__114__thread_proxyINS_5tupleIJMN9Microsoft10BingMobile9MusicReco9ClientSDK9IRunnableEFvNS_10shared_ptrIS6_EEES8_S8_EEEEEPvSC_ (__vp=0x2d6230) at __functional_base:340 
```

# 40 0x33da7734 in _pthread_start () 
            回答 #1

赞同：6

时间：2013-01-28T22:49:44.280

`thread::~thread()`回溯表明当对象被销毁时线程仍在运行。这是一个错误；在销毁它之前，您必须调用`join()`或调用`detach()`线程对象。

```

```

# sql - 在 Oracle 的 sql 中插入 select max 失败

> ID：14572607
> 
> 赞同：1
> 
> 时间：2013-01-28T22:41:58.410
> 
> 标签：sql, oracle, insert

当使用下面的一堆 INSERT 语句时，它需要永远：

```
INSERT INTO my_table ( col1, col2, id_col) VALUES ('val1', 'val1', (select max(my_table_ID) from my_table)+1); 
```

如果我一个一个运行并提交，那么它工作正常。是什么原因？我知道应该在生产中使用序列。但我写这篇文章是为了在蟾蜍中插入几行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:42:24.157

或许

```
INSERT INTO my_table ( col1, col2, id_col) 
VALUES ('val1', 'val1', (select max(my_table_ID)+1 from my_table)); 
```

或在 pl/sql 块中

```
declare
v_max number(10);
begin
select max(my_table_id) + 1 into v_max
  from my_table;
insert into my_table ( col1, col2, id_col) 
values ('val1', 'val1', v_max);
end;
/ 
```

但是，我不知道你的任务......可以在插入之前使用序列+触发器吗？

# r - 如何使用 glmnet 模型作为 mob 功能的节点模型（R 包方）？

> ID：14572609
> 
> 赞同：1
> 
> 时间：2013-01-28T22:42:04.893
> 
> 标签：r, glmnet, party

我正在使用`mob`R 包的功能`party`。我的问题是`model`关于这个函数的参数。

我如何定义一个 StatModel 对象（来自包`modeltools`） - 我们称之为*glmnetModel* - 以便`mob`估计的节点模型是`glmnet`模型（更准确地说，我想将该`cv.glmnet`函数用作*glmnetModel*`fit`插槽中的主要估计函数）？

 *一个困难是正确地扩展`reweight`函数（可能还有`estfun`and`deviance`函数？），就像[这里](http://cran.r-project.org/web/packages/party/vignettes/MOB.pdf)建议的那样（第 2.1 节）。

有人有想法吗？

注意：我已经看到了一些扩展（对于 SVM：[here](https://r-forge.r-project.org/scm/viewvc.php/%2acheckout%2a/locClass/skel/R/Model_svm.R?revision=108&root=locclass&pathrev=139)），但我无法正确使用它们。

非常感谢 ！

多米尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T11:29:56.893

我不确定 MOB 算法中参数不稳定性测试的推理框架是否适用于 glmnet 或 svm。

假设是模型的目标函数（例如，残差平方和或对数似然）在观察中是相加的，因此相应的一阶条件也是相加的。然后，在某些弱规律性条件下，中心极限定理适用于参数估计。这可以扩展到功能中心极限定理，MOB 中的参数不稳定性测试基于该定理。

如果这些假设不成立，则 p 值可能无效，因此可能导致拆分过多或过少或拆分变量选择有偏差。对于您感兴趣的模型，这是否会在实践中发生，我不知道。您必须检查这一点 - 无论是理论上（这可能很难）还是在模拟研究中。

`mob()`从技术上讲，包中的重新实现`partykit`使得插入新模型变得更加容易。现在需要更少的胶水代码（没有 S4 类）。详情请参阅`vignette("mob", package = "partykit")`。*

# javascript - 点击相关视频时为 YouTube JS Player API 添加事件回调

> ID：14572612
> 
> 赞同：3
> 
> 时间：2013-01-28T22:42:45.767
> 
> 标签：javascript, youtube, youtube-javascript-api

YouTube 的[iFrame 嵌入 JS 播放器 API](https://developers.google.com/youtube/iframe_api_reference#Adding_event_listener)允许您向某些事件添加回调。我想添加一个回调，以便选择视频末尾的相关视频。

更具体地说，当查看嵌入中的视频时，最后它会显示嵌入中的相关视频。我想在选择其中之一时运行一些代码。如何实现？我看到有一个 onStateChange 但没有一个状态与相关视频相关。我是否需要为 YT.PlayerState.PLAYING 添加 onStateChange，然后将播放视频与原始视频进行比较，看看它们是否有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T17:54:27.023

这对我来说似乎是一个合理的解决方案。

唯一值得一提（您已经注意到）的一点是，您将*无法*判断视频的变化是否是由于用户*点击了相关视频*，但如果您没有与播放器动态交互，比较以前的 VideoID 就足够了。

请注意，如果您对简化一些回调/事件处理工作的 jQuery 插件感兴趣，请查看：[https ://github.com/nirvanatikku/jQuery-TubePlayer-Plugin](https://github.com/nirvanatikku/jQuery-TubePlayer-Plugin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:44:39.783

我最终基本上按照我描述的方式进行了操作。这是我使用的代码：

```
started = false;

var onYouTubeIframeAPIReady = function(id) {
  var player = new YT.Player('player', {
    videoId: id,
    events: {
      'onStateChange': function (event) {
        if (event.data == 1) { // The video started playing
          started = true;
        }
        if (started && event.data == -1) {
          // Video had already started playing before and is now in
          // "unstarted" state so it must be a new video.
          var video_url = event.target.i.videoUrl;
          var video_id = video_url.replace('http://www.youtube.com/watch?v=', '').replace('&feature=player_embedded', '');
          window.location = '#/view/' + video_id;
        }
      }
    }
  });
} 
```

所以基本上，当视频开始播放时，您将“开始”变量设置为 true。然后，如果/当视频进入“未启动”状态时，如果“已启动”为真，那么您就知道这是一个刚刚开始播放的新视频。在这种情况下，从 event.target 对象中获取它的视频 ID，然后用它做任何你想做的事情。

如果有人想查看上下文，我的完整提交就[在这里，您可以在](https://github.com/mikecrittenden/toogles/commit/9ac2b951414b25ad96777b90d19962d45162593e)[http://toogl.es](http://toogl.es)上看到它的实际效果。

# java - 使用 Ant 编译器任务强制编译依赖

> ID：14572616
> 
> 赞同：0
> 
> 时间：2013-01-28T22:43:20.923
> 
> 标签：java, eclipse, ant

我们的 (Java) 环境中不允许存在某些编译器依赖项。我们有两台服务器，分别称为 Application 和 Process。我们有三个根 Java 包，分别称为 Application、Process 和 Shared。Application 和 Process 不允许相互引用，但可以相互引用 Shared。Shared 可以引用任何其他两个包中的任何类。如何使用 Ant 强制执行这些依赖项？正如您可能猜到的那样，问题在于，在我们基于 Eclipse 的环境中，一切都成功编译，但是我们遇到了一个类不存在的运行时错误（因为我们有多个服务器）。

我尝试了很多东西，但没有任何效果。请参阅下面我当前的尝试，为了清楚起见，我省略了不相关的代码。包括评论。

```
<!--Compile the 'shared' directories. Since shared depends on Application and Process, we compile everything then delete Application and Process later. -->
    <javac srcdir="${src.dir}" destdir="${build.dir}">
        <classpath>
            ...
        </classpath>
      </javac>

<delete dir="${build.dir}/application" />
<delete dir="${build.dir}/process" />

<!--Compile the 'application' directories -->
<javac sourcepath="" srcdir="${src.dir}/application" destdir="${build.dir}">
    <classpath>
        <pathelement location="${build.dir}/shared" /> 
        ...
    </classpath>
  </javac>

<!--Compile the 'process' directories -->
<javac sourcepath="" srcdir="${src.dir}/process" destdir="${build.dir}">
        <classpath>
            <pathelement location="${build.dir}/shared" /> 
            ...
        </classpath>
  </javac> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:53:01.540

您需要将共享拆分为三个部分，共享独立，共享应用程序和共享进程。

先编译shared-standalone，

与应用程序一起编译共享应用程序，

与进程一起编译共享进程。

# xml - getNodeSet 未返回预期输出

> ID：14572617
> 
> 赞同：0
> 
> 时间：2013-01-28T22:43:21.340
> 
> 标签：xml, r, gephi

```
> library(XML)
> tdoc <- xmlParse("http://gexf.net/data/dynamics_openintervals.gexf")
> getNodeSet(tdoc,"/gexf/graph/nodes/node")
list()
attr(,"class")
[1] "XMLNodeSet" 
```

我希望它返回一个包含两个对象的列表，但它只返回一个空列表。这是我正在使用的示例 GEXF 文件：http: [//gexf.net/data/dynamics_openintervals.gexf](http://gexf.net/data/dynamics_openintervals.gexf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:21:29.047

想出了这个。需要定义命名空间。

```
> library(XML)
> tdoc <- xmlParse("http://gexf.net/data/dynamics_openintervals.gexf")
> getNodeSet(tdoc,"//gexf:node",
    c(gexf="http://www.gexf.net/1.2draft") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T21:20:13.520

您应该尝试“rgexf”库（[http://cran.r-project.org/web/packages/rgexf/](http://cran.r-project.org/web/packages/rgexf/)）。在那里你会找到函数“read.gexf”。按照你的例子：

库（rgexf）

mygraph <- read.gexf(" [http://gexf.net/data/dynamics_openintervals.gexf](http://gexf.net/data/dynamics_openintervals.gexf) ")

这将返回一个 gexf 图形对象。试着总结一下

摘要（mygraph）

让我知道它是否有帮助

最好的祝愿

George rgexf 的作者

# java - 如何确保在多 VM 环境中不违反单例合同？

> ID：14572626
> 
> 赞同：3
> 
> 时间：2013-01-28T22:43:57.450
> 
> 标签：java, oop, singleton, classloader

根据单例设计模式，在整个“应用程序”中只能存在一个单例类的实例。但是，此定义假定 Singleton 类本身由单个类加载器加载一次。但是，在理论上的多 VM 环境中，同一个 Singleton 类有可能被多个类加载器加载。

开发人员如何确保在整个多 VM 环境中只有一个实例可用？有没有办法确保类加载仅通过单个类加载器发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:47:08.810

简短的回答？在非托管环境中，您不能。这就是单例模式的谬误，在正常环境下确实是不可能执行的。想一想：类对象存在于类加载器的上下文中，可以有多个对象存在于同一个 VM 中。并且可以有多个虚拟机存在于同一个节点内。多个节点可以是同一个应用程序的一部分。当然，如果这些类对象中的每一个被实现为单例，它们都会创建该类的单个实例，但是可以（可能）有许多类对象。

正如 Oleg Mikheev 的回答中提到的，Java EE 规范的最新版本提供了单例会话 bean 的规定；我不熟悉它们的实现细节，但我想知道它们是否真的，真的是单例：存在于集群应用程序中的单个实例——或者它们是否只是一个*逻辑*抽象，多个实例存在于不同的应用程序中节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:23:02.617

尝试摆脱单例，这是面向对象编程中的反模式。相反，使您的对象**可组合**并在构造函数中传递依赖关系。这是您解决问题根本原因的方法，并且将始终确保您只有一个类的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:55:14.233

好吧，我假设你在谈论java。Java 语言本身并没有提供定义单例模式 IMO 的好方法。这就是为什么当我想在我的代码中使用特定模式时，比如那个，我使用 AspectJ 扩展它。

使用 AspectJ，您实际上可以“捕获”对任何构造函数的每次调用，并确保您始终返回相同的对象，因此无论如何都有一个单例。

如果您需要，这里是 AspectJ 中的协议代码：

```
package singleton.aspectJ;
import java.util.Hashtable;
import java.util.Map;

import org.aspectj.lang.annotation.AdviceName;

/**
 * Defines the general behavior of the Singleton design pattern.
 *
 * Each concrete sub-aspect of SingletonProtocol defines the Singleton
 * property for one or more types.
 *
 * The sub-aspect defines two things: <ol>
 *
 *   <li> what types are <i>Singleton</i> <br>
 *
 *   <li> what classes can access the <i>Singleton</i>'s constructor (if any)
 *        despite its property
 * </ol>
 *
 * for this implementation we choose to illustrate that it is not necessary
 * to provide a factory method for accessing the <i>Singleton</i>
 * instance (like <i>getSingleton()</i>). The regular
 * constructor may be used instead.
 *
 * @author  Jan Hannemann
 * @author  Gregor Kiczales
 * @author Pedro Martins
 * @version 1.1.1, 21/11/2011
 */
public abstract aspect SingletonProtocol {

    /**
     * stores the <i>Singleton</i> instances
     */
    private Map<Class<Object>, Object> singletonsTable = 
            new Hashtable<Class<Object>, Object>();

     /**
     * Defines the <i>Singleton</i> role. 
     */
    protected interface SingletonInterface{}

     /**
     * Placeholder for exceptions to the <i>Singleton</i>'s constructor
     * protection. For example, non-singleton subclasses may need to 
     * access the protected constructor of the <i>Singleton</i> normally.
     * 
     * An alternative implementation would be to define an interface
     * for singleton exceptions similar to the one above.
     */
    protected pointcut protectionExclusions();

    private pointcut singletonInstantiator() : call ((SingletonInterface+).new(..)) && !protectionExclusions();

    /**
     * Protects the <i>Singleton</i>'s constructor. Creates the unique
     * instance on demand and returns it instead of a new object.
     * 
     * @return the singleton instance 
     */
    @SuppressWarnings("unchecked")
    @AdviceName("newCatcher")       
    Object around() : singletonInstantiator(){
        Class<Object> singleton = thisJoinPoint.getSignature().getDeclaringType();
        if(!singletonsTable.containsKey(singleton))
            singletonsTable.put(singleton, proceed());

        return singletonsTable.get(singleton);
    }
} 
```

这是一个例子：

```
package singleton.aspectJ;

public aspect SingletonInstance extends SingletonProtocol{
    declare parents: God implements SingletonInterface;

    protected pointcut protectionExclusions(): 
        call((Canaanites+).new(..));  
} 
```

在这种情况下，God 是一个单例，因为它实现了 SingletonInterface。另一个类 Cannnites 是上帝的孩子，但作为例外添加，因此它不是单例。令人惊讶的是，这是上帝的代码，它是孩子：

```
public class God {
    //Code specific to this class's objective
}

public class Caanites extends God {
    //Code specific to this class's objective
} 
```

如您所见，令人惊奇的是，God 和 Caanites 类没有任何模式代码。我希望我有帮助。

# ios - 如何在 iOS 中应用核心图像线性渐变滤镜？

> ID：14572629
> 
> 赞同：2
> 
> 时间：2013-01-28T22:44:09.140
> 
> 标签：ios, cocoa-touch, core-image

我想使用 Core Image 对照片应用线性渐变。这是我正在使用的代码（或者您可以在 Xcode 项目中查看它：http: [//cl.ly/2Z0Z2f1a3Q27](http://cl.ly/2Z0Z2f1a3Q27)）：

```
CIContext *coreImageContext = [CIContext contextWithOptions:nil];

CIFilter *gradientFilter = [CIFilter filterWithName:@"CILinearGradient"];
[gradientFilter setDefaults];
CIColor *startColor = [CIColor colorWithCGColor:[UIColor yellowColor].CGColor];
CIColor *endColor = [CIColor colorWithCGColor:[UIColor blackColor].CGColor];
CIVector *startVector = [CIVector vectorWithX:100 Y:0];
CIVector *endVector = [CIVector vectorWithX:100 Y:100];
[gradientFilter setValue:startVector forKey:@"inputPoint0"];
[gradientFilter setValue:endVector forKey:@"inputPoint1"];
[gradientFilter setValue:startColor forKey:@"inputColor0"];
[gradientFilter setValue:endColor forKey:@"inputColor1"];

UIImage *originalImage = [UIImage imageNamed:@"testImage.jpeg"];
CIImage *ciImage = [CIImage imageWithCGImage:originalImage.CGImage];
[gradientFilter setValue:ciImage forKey:kCIInputImageKey];
CIImage *resultCIImage = [gradientFilter valueForKey:kCIOutputImageKey];
CGImageRef resultCGImage = [coreImageContext createCGImage:resultCIImage fromRect:[resultCIImage extent]];
UIImage *resultUIImage = [UIImage imageWithCGImage:resultCGImage scale:[[UIScreen mainScreen] scale] orientation:UIImageOrientationUp];
CGImageRelease(resultCGImage);

UIImageView *filteredImageView = [[UIImageView alloc] initWithImage:resultUIImage]; 
```

在设备（iPhone 5、iOS 6.0.1）和模拟器（iOS 6）上运行此代码会产生异常：

`Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<CILinearGradient 0x1f857ee0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key inputImage.'`

发生异常的行是`[gradientFilter setValue:ciImage forKey:kCIInputImageKey]`。

这是一个示例 Xcode 项目，您可以构建它以查看此错误：[http ://cl.ly/2Z0Z2f1a3Q27](http://cl.ly/2Z0Z2f1a3Q27)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:59:16.147

CILinearGradient 只有四个属性——两个点和两种颜色。您必须将 CILinearGradient 与 CISourceOverCompositing 过滤器链接起来才能在图像上合成渐变。请参阅过滤器参考：

[https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CILinearGradient](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CILinearGradient)

# javascript - 单击新元素时停止淡入淡出动画

> ID：14572630
> 
> 赞同：0
> 
> 时间：2013-01-28T22:44:11.273
> 
> 标签：javascript, jquery, fade

我有一个动画，在单击链接时会导致框按顺序出现。我发现单击新链接时动画不会停止，并且通常会导致它出现乱序。在客人之间快速点击时，您可以**[在此处](http://abqcomicexpo.com/guests/)**看到这一点。我认为类似的东西`$.animation.stop()`可以解决这个问题，但它没有。任何帮助，将不胜感激。

```
 var stepFade = function() {
                if ($($this).data("known1") === undefined || null) {
                    $('.guest-data .known-for').css('display', 'none');
                } else {
                    $('.guest-data .known-for').css('display', 'block');
                    $('.guest-data .known-for li').eq(0).delay(200).fadeIn( 300);
                    $('.guest-data .known-for li').eq(1).delay(300).fadeIn( 300);
                    $('.guest-data .known-for li').eq(2).delay(400).fadeIn( 300, function() { animating = false; });
                }
            }

            //Fade guest
            if (!featured) {
                featured = true;
                getData();
                $('.featured').fadeOut( 500, function () {
                    $('.selected').animate({ opacity: 'toggle'}, 500, function() {
                        stepFade();                     
                    });
                })
            } else {
                $('.selected, .guest-data .known-for, .guest-data .known-for li').fadeOut( 500, function () {
                    getData();
                    $('.selected').fadeIn( 500, function() {
                        stepFade();
                    });
                });
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:55:42.917

您是否尝试过设置to的**`queue`**选项？ 这样，动画就不会排队并且会立即开始：`.animate()``false`

```
$('.selected')
    .animate({opacity: 'toggle'}, 
             {duration: 500, queue: false,  
                complete: function() { stepFade(); }
             }); 
```

...或者你可以在打电话**`.stop()`**之前打电话`.animate()`：

```
$('.selected')
    .stop(true, false) //clear the queue and don't jump to the end
    .animate({opacity: 'toggle'}, 500, function() {
                        stepFade();
                    }); 
```

# google-apps-script - 如何制作链接以跳转到页面的另一部分？

> ID：14572631
> 
> 赞同：0
> 
> 时间：2013-01-28T22:44:12.913
> 
> 标签：google-apps-script

我正在 Google 网站上制作应用程序脚本，并将其嵌入到小工具中。我想在小工具中创建一个链接，该链接可以跳转到页面的另一部分，但我还没有找到这样做的方法。我找到了锚命令，但默认情况下它会在新页面中打开链接。

有没有办法使用应用程序脚本跳转到页面的特定部分，而无需在新窗口中重新加载页面？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:46:15.040

您正在寻找的是一个锚标签。检查此参考： [https ://developers.google.com/apps-script/class_anchor](https://developers.google.com/apps-script/class_anchor)

# java - Maven 插件可以自动从“执行”部分查看“配置”标签吗？

> ID：14572632
> 
> 赞同：11
> 
> 时间：2013-01-28T22:44:14.363
> 
> 标签：java, maven, maven-plugin, jasmine-maven-plugin

我正在分析一个可以在以下`configuration`部分配置的 Maven 插件`plugin`：

```
<plugin>
     ...
     <executions>...</executions>
     <configuration>
         <!-- items placed here are visible to the MOJO -->
     </configuration>
</plugin> 
```

该插件完全忽略 的任何配置项`execution`，但是：

```
<plugin>
     ...
     <executions>
         <execution>
             <id>execution1</id>
             <phase>test</phase>
             <goals><goal>test</goal></goals>
             <configuration>
                <!-- items placed here are ignored -->
             </configuration>
         </execution>
     </executions>
</plugin> 
```

我用`mvn test`. 我确定执行会发生，因为 Maven`id`正确打印了它，但未配置插件 - 打印有关不正确设置的警告，当该`<configuration>`部分移出`<executions>`.

**问题：**是插件的实现方式，它只接受“顶级”配置吗？我研究了它的源代码，在我看来，它是 Maven 调用 MOJO 类上的设置器，并且它对于选项来自哪个部分的插件是透明的。

MOJO 注释为：

```
* @component
* @goal test
* @phase test
* @execute phase="jasmine-process-test-resources" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:15:09.480

有问题的插件正在分叉自定义生命周期。

分叉的自定义生命周期将`execution1`删除指定 id ( ) 的执行（因为它是一个分叉的生命周期）

因此，由分叉生命周期执行的任何插件目标都将丢失它们的配置。主要的 mojo 本身应该获取配置，但出了问题的是分叉的生命周期执行。

我猜它是哪个插件，如果我的猜测是正确的，这是[自定义生命周期](https://github.com/searls/jasmine-maven-plugin/blob/master/src/main/resources/META-INF/plexus/components.xml)，您看到的警告来自例如其他带有类似文本的[mojos](https://github.com/searls/jasmine-maven-plugin/blob/master/src/main/java/com/github/searls/jasmine/ProcessResourcesMojo.java)

```
JavaScript source folder was expected but was not found. Set configuration property
`jsSrcDir` to the directory containing your JavaScript sources. Skipping 
jasmine:resources processing. 
```

在这种情况下，您需要将该`<configuration>`部分放在外部块中或配置生命周期的执行。

为生命周期配置执行将需要使用`id`魔法格式的 s 添加执行。我不是 100% 确定，但在您的情况下，您将定义一个额外的执行，使用`id`s`default-resources`或s`jasmine-lifecycle-resources`以确保配置成功。

不太冗长的方法是将配置放在外部并完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-25T01:46:53.290

I had this issue with the base `maven-install-plugin:2.5.2` using the `maven:3.6.3-jdk-8` docker image.

Thanks to the accepted answer for putting me on the right track.

I don't fully understand [this note in the documentation](https://maven.apache.org/guides/mini/guide-configuring-plugins.html#Using_the_executions_Tag) (at the end of the section), but it seems that you can give the phase goal an execution id forcing it to use your configuration:

> Note: Configurations inside the element used to differ from those that are outside in that they could not be used from a direct command line invocation because they were only applied when the lifecycle phase they were bound to was invoked. So you had to move a configuration section outside of the executions section to apply it globally to all invocations of the plugin. Since Maven 3.3.1 this is not the case anymore as you can specify on the command line the execution id for direct plugin goal invocation. Hence if you want to run the above plugin and it's specific execution1's configuration from the command-line, you can execute:

> `mvn myqyeryplugin:queryMojo@execution1`

My final working docker command:

```
docker run -it --rm --name parser -v "$(shell pwd)":/usr/src/parser -w /usr/src/parser maven:3.6.3-jdk-8 mvn -X install:install-file@install-my-jar-file 
```

Where `install-my-jar-file` is my executions id `<execution><id>install-my-jar-file</id>...`

# php - CodeIgniter Bonfire - 访问单独的模块表

> ID：14572638
> 
> 赞同：1
> 
> 时间：2013-01-28T22:44:45.210
> 
> 标签：php, codeigniter

好的，所以我有一个 CI Bonfire 实例正在运行（喜欢它）。我遇到了一个似乎无法解决的结构问题。

我想要做的是有两个单独的表（由两个单独的模块提供支持），访问彼此的数据。我有两个名为“工具包”和“工具包项目”的表/模块。

**Toolkits** = 包含许多工具包项
**Toolkit Items** = 属于许多工具包

如何路由它以便我可以从 toolkits 模块文件夹中查询 toolkit_items 表？这甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T02:26:49.940

您可以通过简单地从模块中调用模块模型

```
$this->load->model('toolkits/toolkits_model', null, true); 
```

# vb.net - 调用结束时的“System.Collections.Generic.KeyNotFoundException”

> ID：14572639
> 
> 赞同：1
> 
> 时间：2013-01-28T22:44:45.217
> 
> 标签：vb.net, multithreading, user-interface, delegates, invoke

我刚刚学会了如何在单独的线程中设置 GUI...

```
Private myGui As SomeGui
Public Class myAsyncState
    Public a As Boolean = True
    Public b As Integer = 100
End Class

Public Sub Caller()
    '
    myGui = New SomeGui()
    ' setup
    myGui.Begin()
    Dim a as Boolean = False
    Dim b as Integer = 1
    Dim state As myAsyncState = New myAsyncState(a, b)
    Dim step1 As New xDelegate(AddressOf xMethod)
    Dim callBack As New AsyncCallback(AddressOf xMethod_Callback)            
    Dim asyncResultTest As IAsyncResult = step1.BeginInvoke(a, b, callBack, state)

End Sub

Private Delegate Sub xDelegate(Byval a as Integer, ByVal b As Boolean) 
Public Sub xMethod(Byval a as Integer, ByVal b As Boolean)     
End Sub

Private Sub xMethod_Callback(ByVal ia As IAsyncResult)
    Dim myAsyncResult As AsyncResult = CType(ia, AsyncResult)
    Dim myAsyncMethodCaller As xDelegate = CType(myAsyncResult.AsyncDelegate, xDelegate)
    Dim state As myAsyncState = CType(myAsyncResult.AsyncState, myAsyncState)
    myAsyncMethodCaller.EndInvoke(ia)
    xMethod_Finish(state.a, state.b)
End Sub

Private Sub xMethod_Finish(ByVal a As Integer, ByVal b As Boolean)
    If Me.InvokeRequired Then
      Invoke(New xDelegate(AddressOf xMethod_Finish), New Object() {a, b})   ' here

' Also tried Invoke(New xDelegate(AddressOf xMethod_Finish), a, b)   though the above is what I have seen in documentation
' also tried to make Dim state As myAsyncState = New myAsyncState(a, b) and use it as an argument
        Else
            yMethod(a, b)
            myGui.Finish()
        End If
    End Sub 
```

我正在返回和传递值，一切都很好......然后我返回它进行测试，并得到一个错误：

```
A first chance exception of type 'System.Collections.Generic.KeyNotFoundException' occurred in mscorlib.dll
A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in mscorlib.dll

An unhandled exception of type 'System.Collections.Generic.KeyNotFoundException' occurred in System.Windows.Forms.dll

Additional information: The given key was not present in the dictionary. 
```

例外是在“xMethod”完成后，在我显示“here”的那一行 - 在 xMethod_Finish 中。看起来有一些不匹配的参数 - 但我认为它们都是正确的 - 我付出了很多努力来理解如何将参数传递给委托，以便它们也可以在 EndInvoke 之后传递给后续方法第一个（仍将在 GUI 线程中）。

请帮我看看我做错了什么。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:08:44.180

您的调用看起来正确。

错误可能在`yMethod`or`myGui.Finish()`方法中。当异常发生在被调用的方法中时，它们可能会变得有点隐藏。检查异常的`InnerException`属性以获取更多信息以及导致`KeyNotFoundException`.

您可以在问题方法中设置断点来调试错误。

# php - .php 与 HTML 与 .html 与 PHP

> ID：14572647
> 
> 赞同：8
> 
> 时间：2013-01-28T22:45:14.627
> 
> 标签：php, html

当我开始构建一个需要 HTML 和 PHP 的网站时，我是否应该在其中制作一个包含 PHP 的 .html 文件（例如，文件中的 index.html 但在其中会有各种标签）？或者，我是否应该将文件制作成 .php 文件并在其中简单地包含 HTML（再次说，文件中的 index.php 会以 PHP 开头，而我只是将 HTML 交织在一起）？

TL;DR：我应该将 HTML 编入 .php 文件还是将 PHP 编入 .html 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:48:51.420

它应该是一个“编织”了 HTML 的 PHP 文件。默认情况下，如果您的服务器看到一个 HTML 文件，它认为它不需要处理页面上的脚本并将其呈现。如果它看到一个 PHP 扩展，它就知道它需要通过 PHP 处理器运行。

您可以修改您的 htaccess 以允许通过处理器呈现 HTML，但您确实不需要修改它，特别是如果您是初学者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:46:57.730

您使用带有 HTML 的 PHP 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:47:22.300

您应该将 html “编织”到 php 文件中，这样您就可以确定您的代码可以在任何服务器上运行，而不仅仅是在将 html 文件呈现为 php 的服务器上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T23:03:53.700

如果你喜欢`.html`扩展，你可以使用`.phtml`文件来模板你的系统，但只能用于包含 html 代码的文件。而且我更喜欢使用`.php`只包含 php 代码的文件，比如类等（这就是 Zend 或类似的库所做的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T22:48:10.907

您需要在 .htaccess 文件中指定才能在 .html 文件中解析 PHP。更简单的方法是将所有内容都制作为 .php。

不可避免地，当您对 PHP 更加熟悉时，您会发现文件中总会有一点 PHP（如 require 或其他东西），因此最好为此做好计划。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T22:48:14.173

如果您是 PHP 新手，我建议您创建扩展名为 .php 的文件，因为默认情况下可以执行 .php 文件。根据您的服务器配置，您可能需要添加一些 .htaccess 指令以允许 php 代码在 .html 文件中运行。

# wpf - WPF 相关性与 HTML

> ID：14572648
> 
> 赞同：3
> 
> 时间：2013-01-28T22:45:18.390
> 
> 标签：wpf, web-applications

在工作中，我们有一个需要更新的应用程序。它是一个胖客户端，主要用 Windows 窗体编写，其中较新的部分在 WPF 中。此应用程序的主要部分是一个表单设计器，它通过使用 HTML 的 Web 浏览器控件实现。

我们需要重新设计应用程序的很大一部分，并且需要普遍改善用户体验。我很有可能会成为这个项目的工作人员，我对 WPF 非常熟悉，并且觉得它是一种非常适合使用的技术。我将计划删除旧的 Windows 窗体部分并在很大程度上重写应用程序。

但是，已经有一些关于在未来版本中将此应用程序迁移为 Web 应用程序的讨论。我的同事正在考虑尝试使用 HTML 重新设计对话框和应用程序，同时仍然是一个胖客户端。

这似乎是一个合理的想法？是否有任何类似于这种方法的设计可以支持这种混合应用程序？我们是否能够使用 WPF 提供的 HTML5 / JS 实际创建相同类型的用户体验？

制作可移植代码的想法很诱人，但我非常担心这个建议的可行性。我知道 Windows 8 应用程序支持多种设计选项，但此应用程序将针对 xp/Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:54:24.633

这实际上取决于应用程序的受众，但如果它足够简单，我会说使用 Web 并且应该是因为您从头开始。

3 年前我遇到了同样的问题，但我仍然后悔坚持使用 WPF，因为如果它是一个 Web 应用程序，它本可以部署在平板电脑上。

如果您的应用程序包含丰富的业务逻辑，请确保将其拆分得很好，JS 中的业务逻辑就不能很好地工作——调试起来很糟糕，很难在应用程序的整个生命周期中进行管理。与 WPF 相比，通常预计开发会更困难，但潜在受众要大得多。

# java - RabbitMQ Java 客户端异步主题收据

> ID：14572649
> 
> 赞同：1
> 
> 时间：2013-01-28T22:45:18.340
> 
> 标签：java, rabbitmq

我有一个通过交换机发送和接收消息的程序。无论队列中是否有消息，我的程序都需要继续执行。几乎所有教程都有阻塞示例：

```
while (true) {
     QueueingConsumer.Delivery delivery = consumer.nextDelivery();
     System.out.println("Message: " + new String(delivery.getBody()));
     ch.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
} 
```

我遇到了我理解的异步版本，即当队列中有消息时调用（回调）handleDelivery 函数：

```
 boolean autoAck = false;
 channel.basicConsume(queueName, autoAck, "myConsumerTag",
 new DefaultConsumer(channel) {
     @Override
     public void handleDelivery(String consumerTag,
                                Envelope envelope,
                                AMQP.BasicProperties properties,
                                byte[] body)
         throws IOException
     {
         String routingKey = envelope.getRoutingKey();
         String contentType = properties.contentType;
         long deliveryTag = envelope.getDeliveryTag();
         // (process the message components here ...)
         channel.basicAck(deliveryTag, false);
     }
 }); 
```

在阅读完文档后，我仍然不确定上面的代码片段是否确实是异步的，我仍然无法弄清楚如何获取发送的实际消息。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:18:16.100

如果不尝试第二个代码片段，我可以说它有可能做你想要的。然而，它可能会这样做，但在内部使用一个线程（在等待新消息时将被阻塞）。我所做的是将while循环粘贴在一个新线程中，这样只有那个线程被阻塞，你的程序的其余部分继续异步

# ruby-on-rails - 没有这样的文件要加载——capistrano 部署时的捆绑器/设置

> ID：14572662
> 
> 赞同：0
> 
> 时间：2013-01-28T22:46:19.580
> 
> 标签：ruby-on-rails, rake, capistrano, bundle

问题是什么？捆绑器安装在远程机器上。这是错误：

![在此处输入图像描述](../Images/b468ba503c051a34a6eb04e9e1c09da6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:41:37.767

确保 Bundler 安装在系统级别而不是用户级别。您还可以使用 Capistrano shell 安装 Bundler，假设 Capistrano 部署为具有密码和 sudo 访问权限的用户。

例子：

```
$ cap shell         # from within your project

cap> sudo apt-get install rubygems      # or however you prefer to 
                                        # install rubygems on your box

...
...  # output
...

cap> sudo gem install bundler 
```

# asp.net-mvc - MVC 视图未显示

> ID：14572663
> 
> 赞同：1
> 
> 时间：2013-01-28T22:46:23.273
> 
> 标签：asp.net-mvc, view

我正在 MVC 4 中构建一个站点。在第一个视图（即主页）显示后，我（在其他一些事情之后）重定向到另一个视图：

```
return RedirectToAction("Index", "ClaimsSearch", new { carrier = carrier }); 
```

该视图中的断点实际上被命中，并且参数甚至具有值：

```
public class ClaimsSearchController : Controller
{
    public ActionResult Index(string carrier)
    {
        return View();
    }
} 
```

我通过右键单击索引创建了一个新视图（用于 ClaimsSearchController），然后单击“添加视图”。然而，在“return View()”执行之后，浏览器仍然只有原始视图。新视图永远不会出现。顺便说一句，我可以输入第二个控制器名称（localhost:1234/ClaimsSearch），然后这个视图就会显示出来。

为什么这个动作实际上没有显示视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-04T10:25:25.733

返回没有重载的 View 将默认它根据它所在的操作查找文件 - 对于这种情况，它将查找 Index.cshtml 如果此控制器位于这将在那里寻找 Index.cshtml 假设... View/ClaimsSearch/Index 或者它将在“View/Shared/”中寻找

我的建议：创建一个 html 视图文件，称为它正在查找的内容（索引）或重载返回函数以指定要查找的另一个文件。但无论如何，我认为您将不得不在 View/ClaimsSearch 中创建一个 cshtml 文件

# ruby-on-rails - Rails.cache.fetch 在记忆化方面表现更好吗

> ID：14572665
> 
> 赞同：5
> 
> 时间：2013-01-28T22:46:28.590
> 
> 标签：ruby-on-rails, memcached, memoization

我已经搜索过，似乎找不到一个好的来源，是否可以将以下方法组合起来被认为是一种好习惯：当将 memcached 与 dalai gem 一起使用并且有一个为请求多次调用的方法时在模型中使用第二个块优于第一个块的性能优势？将这样的“记忆化”与 Rails.cache.fetch 结合使用是否被认为是一种好习惯？

```
def total_ham
  Rails.cache.fetch("#{self.cache_key}/total_ham") do
    self.hams.sum(:metric_tons)
  end
end 
```

或者

```
def total_ham
  @total_ham ||= Rails.cache.fetch("#{self.cache_key}/total_ham") do
    self.hams.sum(:metric_tons)
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-18T21:47:14.613

如果`total_ham`每个请求多次调用该方法，那么`total_ham`即使您从缓存中获取该方法的结果，您也应该记住该方法的结果。由于您的应用服务器和 memcached 服务器之间的往返延迟，memoization 将比访问缓存更快。

我不能说这是否是最佳实践，但这是我在你的情况下会做的。

# php - $query->result_array() 擦除 list_fields() 数据

> ID：14572671
> 
> 赞同：2
> 
> 时间：2013-01-28T22:46:46.187
> 
> 标签：php, codeigniter

我遇到了一个问题，我`result_array()`从 codeigniter 中调用 n 个查询对象上的函数：

```
 $this->db->select(array('a','b','c'));

   $query = $this->db->get('basic');
   print_r($query->list_fields());
   $test = $query->result_array();
   print_r($query->list_fields()); 
```

当我运行此代码时，或者：

```
 $query = $this->db->get('basic');
   print_r($query->list_fields());
   print_r($query->list_fields()); 
```

或者：

```
 $query = $this->db->get('basic');
   $test = $query->result_array();
   print_r($query->list_fields()); 
```

第二个`list_fields()`函数总是返回一个大小为 0 的数组，第一个函数返回正确的字段名称列表。

在只有一个 list_fields() 函数的最后一个示例中，数组的大小再次为零。

任何有关此事的指导将不胜感激。我需要在`list_fields()`阅读`result_array()`.

这是第一块代码的结果：

```
 Array
    (
        [0] => site_id
        [1] => institution
        [2] => caller
        [3] => call_complete
        [4] => call_details
        [5] => id
        [6] => timestamp
    )
    Array
    (
    ) 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:14:23.427

这看起来是数据库驱动程序中的一个错误。例如，在[`CI_DB_mysqli_result`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/database/drivers/mysqli/mysqli_result.php#L74)：

```
public function list_fields()
{
    $field_names = array();
    while ($field = $this->result_id->fetch_field())
    {
        $field_names[] = $field->name;
    }

    return $field_names;
} 
```

后续调用将返回`array()`，因为 while 循环查找所有字段并将指针留在列表末尾。

但是，在结果类中，`result_id`是公共的，因此您可以使用[mysqli_result::field_seek](http://php.net/manual/en/mysqli-result.field-seek.php)：

```
$query = $this->db->get('basic');
var_dump($query->list_fields());

// this should be called before any call to list_fields()
$query->result_id->field_seek(0);
var_dump($query->list_fields()); 
```

但是，这是不好的做法，因为这只适用于 mysqli；对于 mysql，你需要这个：

```
mysql_field_seek($query->result_id, 0); 
```

对于 mssql：

```
mssql_field_seek($query->result_id, 0); 
```

正确的方法是在数据库驱动程序中修复它。请参阅[此拉取请求](https://github.com/EllisLab/CodeIgniter/pull/2204):-)

# jquery - Jquery在附加的输入字段上自动完成

> ID：14572674
> 
> 赞同：0
> 
> 时间：2013-01-28T22:46:48.123
> 
> 标签：jquery, autocomplete, append, bind

我使用 Jquery 自动完成来查询数据库。该函数绑定到具有“completeme_accounts”类的所有文本字段。这适用于页面加载时出现的默认文本字段。但是，当我通过 Jquery 添加更多文本字段时，自动完成对它们不起作用。我在这里检查了几个类似的解决方案，但我找不到适用于我的代码的解决方案。我猜我需要使用 Jquery .on （因为 live 已被弃用）但我不知道如何。我的代码：

```
$(document).ready(function(){ 

$(function() {
    function log( message ) {
        $( "<div>" ).text( message ).prependTo( "#log" );
        $( "#log" ).scrollTop( 0 );
    }

    $( ".completeme_accounts" ).autocomplete({
        mustMatch: true,
        source: "accounts_autocomplete.php",
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
        },
        change: function (event, ui) {
            if (!ui.item) {
                 $(this).val('');
             }
        }
    });
});

}); // Doc ready 
```

带有输入字段的表格：

```
<table id="addaccount">
<tr>
<td><div class="ui-widget"><input name="account[1]" type="text" class="completeme_accounts" id="account1" value=""></div></td>
<td><input type="radio" name="source" id="radio" value="radio" class="required"></td>
</tr>
<tr>
<td colspan="2"><a href="#" id="addrow" onclick="return false;">Add another account</a></td>
</tr>
</table> 
```

附加额外输入字段的脚本：

```
<script>
$rowid = 1;
$("#addrow").on("click", function(){
$rowid = $rowid + 1;
$('#addaccount tr:last').before('<tr><td><div class="ui-widget"><input name="account['+$rowid+']" type="text" class="completeme_accounts" id="account'+$rowid+'" value=""></div></td><td><input type="radio" name="payment_source" id="radio" value="radio" class="required"></td></tr>');
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:04:30.980

我不确定您到底要在该脚本中做什么，但如果您想更改自动完成的可能值，您可以执行以下操作：

`$( "#tags" ).autocomplete( "option", "source",["the", "values", "you", "want"]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-26T13:44:23.837

在您`append`进入文本框之前，**DOM**已经加载，因此`autocomplete` 不会在*附加*输入上启动。

您必须在*附加*的输入`autocomplete`上再次启动。 给 div 添加一个类 *`.append_input`*

 *```
<div class="ui-widget append_input">
  <input name="account['+$rowid+']" type="text" class="completeme_accounts" 
  id="account'+$rowid+'" value="">
</div> 
```

再次启动自动完成

```
var appendInput = $(this).closest('#addaccount').find('.append_input').children('.completeme_accounts');
appendInput.autocomplete(yourcode); 
```

[看到这个答案](https://stackoverflow.com/questions/39595212/autocomplete-not-working-on-cloned-input-element)*

# javascript - 使用 // 而不是协议

> ID：14572676
> 
> 赞同：6
> 
> 时间：2013-01-28T22:46:51.057
> 
> 标签：javascript, jquery, load, protocols, require

> **可能重复：**
> [使用前导双斜杠继承 URL 中的协议有什么缺点吗？即src="//domain.com"</a>](https://stackoverflow.com/questions/4659345/is-there-any-downside-for-using-a-leading-double-slash-to-inherit-the-protocol-i)
> 
> [](https://stackoverflow.com/questions/4659345/is-there-any-downside-for-using-a-leading-double-slash-to-inherit-the-protocol-i)

 [我在很多地方都看到了以下逻辑，f.ex 分析脚本：

```
script.src = ('https:' == document.location.protocol ? 'https' : 'http') +
    '://example.com/cdn.js'; 
```

但据我所知，您也可以这样做：

```
script.src = '//example.com/cdn.js'; 
```

它应该使用当前使用的任何协议。还是我错过了什么？什么被认为是“最佳实践”？

我不是在寻找浏览器兼容性的答案，谷歌已经推荐`//`了 CDN 脚本，所以这里不应该是这种情况。](https://stackoverflow.com/questions/4659345/is-there-any-downside-for-using-a-leading-double-slash-to-inherit-the-protocol-i) 

[这是一个小提琴，但实际上并没有比在此设置中似乎起作用的要多得多：http:](https://stackoverflow.com/questions/4659345/is-there-any-downside-for-using-a-leading-double-slash-to-inherit-the-protocol-i) [//jsfiddle.net/6ZGyb/](http://jsfiddle.net/6ZGyb/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T22:53:51.850

**一点背景：**

额外的 JavaScript`protocol`包装器通常用于确保所有浏览器都支持此类`relative path` `URL`s。**假设大多数当前浏览器无论如何都正确处理此类 URL 是正确**的，但是为了能够安心入睡，假设并非所有访问您网页的**用户代理**都一样精明，这仍然被认为是一种好习惯正如我们所期望的那样（或者，支持[RFC 1808](http://www.ietf.org/rfc/rfc1808.txt)第 4 节、[RFC 2396](http://www.ietf.org/rfc/rfc1808.txt)第 5.2 节或[RFC 3986第 5.2 节，如](http://www.ietf.org/rfc/rfc3986.txt)[**使用前导双斜杠在 URL 中继承协议有什么缺点吗？**线程](https://stackoverflow.com/q/4659345/861940)中已经提到的）正如@Bruno 在评论中指出的那样）

**兼容性问题：**

想象一个场景，其中包含此类相对路径的内容可以*“脱离上下文”*访问，例如在电子邮件客户端中。在这种情况下，这样的相对路径可能会以错误的方式解析为其完全限定的路径，并导致各种问题，从用户无法正确查看内容到访问他们确实不应该访问的内容。为避免任何此类问题，**应始终将相对路径的使用限制在父文档（打开器应用程序）的解析器可以确定相关资源的完整绝对路径的上下文中。**只有当它们将被相同或兼容的协议访问时，您才应该期望相对路径能够正常工作。

**安全问题：**

提出的另一个可能的担忧是：

> ***是否可以通过各种交换协议访问（解析的 URL）父文档内容以任何方式利用此类相对协议 URL，并且此类 JavaScript 包装器是否用于转移此类访问的目的。***

**[官方 IANA 注册 URL 方案](http://en.wikipedia.org/wiki/URI_scheme#Official_IANA-registered_schemes)**的（长）列表表明，漏洞利用者可能会使用许多令人担忧的交换协议，但是**JavaScript 不会对不支持 JavaScript（或被用户禁用）**。考虑到这一点，我的回答必须是 -**否（对于*“使用其他协议保护访问的 JavaScript”*部分）**。

**至于提出的问题的其余部分**（*“可以以任何方式利用此类相对协议 URL”*），答案取决于在设置服务于任何此类内容的 Web 服务器时考虑到这一点的程度，它甚至支持/处理此类请求（如果没有，则不是问题），以及在部署之前考虑了哪些可能的攻击/内容盗窃媒介。换句话说，**这是一个网络服务器管理问题，当然不是网页设计师/程序员可以/应该回答的问题。**每个最终用户可访问的协议都应该有自己的一套安全协议。

# javascript - jQuery Mobile 弹出小部件未隐藏在页面初始化中

> ID：14572677
> 
> 赞同：0
> 
> 时间：2013-01-28T22:46:52.157
> 
> 标签：javascript, jquery, jquery-mobile, widget, popup

我正在使用 jQuery Mobile 弹出窗口，由于某种原因，当我加载页面时，一个或多个弹出窗口没有隐藏。我曾尝试关闭页面 init 上的弹出窗口，但这似乎不起作用。任何人都可以解释是什么原因造成的。

```
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Pop Up</title>
    <link rel="stylesheet" href="http://jquerymobile.com/test/css/themes/default/jquery.mobile.css"
    />
    <link rel="stylesheet" href="http://jquerymobile.com/test/docs/_assets/css/jqm-docs.css"
    />
    <link type="text/css" href="http://dev.jtsage.com/cdn/datebox/latest/jquery.mobile.datebox.min.css"
    rel="stylesheet" />
    <link type="text/css" href="http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog.min.css"
    rel="stylesheet" />
    <script src="http://code.jquery.com/jquery-1.7.1.js"></script>
    <script src="http://jquerymobile.com/demos/1.2.0/docs/_assets/js/jqm-docs.js"></script>
    <script src="http://jquerymobile.com/demos/1.2.0/js/jquery.mobile-1.2.0.js"></script>
</head>
<script>
    $(document).bind("pageinit", function () {
        $('#popup1').popup('close');
        $('#popup2').popup('close');
    });
</script>

<body>
    <div data-role="page" class="type-interior">
        <div data-role="header" data-theme="f" data-position="fixed">
            <div class="ui-grid-a" style="margin:15px 0px">
                <div class="ui-block-a">
                    <a href="#popup1" data-role="button" data-rel="popup">Pop 1</a>
                </div>
                <div class="ui-block-b">
                    <a href="#popup2" data-role="button" data-rel="popup">Pop 2</a>
                </div>
            </div>
            <!--grid-->
        </div>
        <!-- /header -->
        <div data-role="content">
            <div data-role="popup" id="popup1" data-theme="a">
                <ul data-role="listview" id="cityList" data-inset="true" style="min-width:210px;"
                data-theme="b">
                    <li name='test value' value="us">11</li>
                    <li name='test value' value="us">12</li>
                    <li name='test value' value="us">13</li>
                    <li name='test value' value="us">14</li>
                </ul>
            </div>
            <div data-role="popup" id="popup2" data-theme="a">
                <ul data-role="listview" id="genreList" data-inset="true" style="min-width:210px;"
                data-theme="b">
                    <li>21</li>
                    <li>22</li>
                    <li>23</li>
                    <li>24</li>
                </ul>
            </div>
            <div class="content-primary"></div>
            <!--content-primary-->
        </div>
        <!--content-->
        <div data-role="footer" class="footer-docs" data-theme="c" data-position="fixed"></div>
        <!--footer-->
    </div>
    <!-- /page -->
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T23:10:50.190

我有类似的问题，并通过在文档准备好后启动弹出窗口来解决它。

```
$(document).ready(function(){ 
    $( "#popupDialog" ).popup();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:35:05.267

包含以下外部库解决了该问题：

```
 <link rel="stylesheet" href="http://jquerymobile.com/demos/1.2.0-alpha.1/css/themes/default/jquery.mobile-1.2.0-alpha.1.css" />
    <link rel="stylesheet" href="http://jquerymobile.com/demos/1.2.0-alpha.1/docs/_assets/css/jqm-docs.css"/>

<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>  
    <script src="http://jquerymobile.com/demos/1.2.0-alpha.1/docs/_assets/js/jqm-docs.js"></script>
    <script src="http://jquerymobile.com/demos/1.2.0-alpha.1/js/jquery.mobile-1.2.0-alpha.1.js"></script> 
```

# c# - Is it possible to have a "var" as a Global variable

> ID：14572690
> 
> 赞同：6
> 
> 时间：2013-01-28T22:47:40.937
> 
> 标签：c#

I have noticed there are other threads on global variables in c#. Such as integers, strings etc. e.g.

```
public static int; 
```

But I need to use a "var" which the other thread don't mention and

```
public static var; 
```

doesn't seem to work.

So what I'm asking is it possible to have a "var" as a global variable in c#?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T22:50:30.313

No, because var is not a type itself, it merely takes on the form of whatever expression is on the righthand side of the assignment:

```
var num = 1; 
```

is the same as:

```
int num = 1; 
```

when declaring variables that are scoped outside of a method, you need to use the full type designator:

```
public static int num = 1; 
```

or

```
public static int Num {get;set;} 
```

etc

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T23:00:59.400

[C# specification](http://msdn.microsoft.com/en-us/library/bb308966.aspx) (section 26.1) reads:

> [`var is] an implicitly typed local variable declaration ...

It goes further:

> A local variable declarator in an implicitly typed local variable declaration is subject to the following restrictions:
> 
> *   The declarator must include an initializer.
> *   The initializer must be an expression.
> *   The initializer expression must have a compile-time type which cannot be the null type.
> *   The local variable declaration cannot include multiple declarators.
> *   The initializer cannot refer to the declared variable itself

So no, you cannot do this. Moreover I would recommend steering away from even thinking about global variables.

Global variables are not supported by the language. You may find alternatives in `public static` fields, but this will leak object state and break encapsulation.

# javascript - Safari 开发者工具：如何在导航时保留控制台日志？

> ID：14572693
> 
> 赞同：75
> 
> 时间：2013-01-28T22:48:03.207
> 
> 标签：javascript, debugging, safari, console, developer-tools

当使用[Safari Web Inspector](https://developer.apple.com/library/safari/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/Introduction/Introduction.html)读取 JavaScript 控制台输出时，日志会在导航时重置，即从页面*index.html*到*mail.html 会*清除控制台输出。在[Chrome 开发人员工具](https://developers.google.com/chrome-developer-tools/docs/console)中，我可以通过右键单击控制台空间并选择*Preserve Log Upon Navigation*轻松保存日志。使用此选项，控制台日志输出将保持不变，直到我手动清除输出，从而简化了刷新或重定向到另一个页面的 JavaScript 调试过程。

Safari Web Inspector 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2015-10-09T00:33:20.450

我不知道这是什么时候添加的，但它存在于 El Capitan (Safari 9.0) 上的 Safari 中。它与 Chrome 中的工作方式相同（在控制台窗口中单击鼠标右键并选择“保持登录导航”）。

**更新：**根据[Daniel Compton 的回答](https://stackoverflow.com/a/46508266/792525)，在 Safari 11+ 中，它现在位于设置图标下，为“控制台：页面导航时清除”。

**更新：**该设置现在回到 Safari 14+ 开发者控制台的“网络”选项卡中的“保留日志”

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-10-01T00:43:37.037

在 Safari 11.1.2 中，他们再次将它（！）移回了“保留日志”复选框下的控制台选项卡。网络日志同样移回了网络选项卡。

[![控制台选项卡](../Images/32ca695d8f017e5db53ea4219f8ad974.png)](https://i.stack.imgur.com/pJcQO.png)

* * *

在 Safari 11 中，他们将其移至“控制台：页面导航时清除”下的“设置”面板。它还有一个姊妹设置“网络：页面导航时清除”。

[![在此处输入图像描述](../Images/7d200bd5e132ebbf9929bf0b8dbd8c79.png)](https://i.stack.imgur.com/KurP3.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-24T04:19:26.920

不，没有这样的功能（至少在 Safari 5.0 中）。查看一些谷歌结果，我认为这个功能在*任何*Safari 版本中都不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-10T13:46:21.683

对于旧的 Safari 版本，您可以右键单击控制台并选择`Keep Log on Navigation`[![在此处输入图像描述](../Images/b77d9089b6930fbff26b6f34ae717a88.png)](https://i.stack.imgur.com/YAeVw.png)

# apache - 301重定向到确切的页面

> ID：14572698
> 
> 赞同：1
> 
> 时间：2013-01-28T22:48:14.527
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我目前在 Google 爬虫上遇到 404 错误。

情况：

此域结构下有用户配置文件：

www.domain.com/user/username

但是： www.domain.com/user 不是真实页面，因此会引发 404 错误。

www.domain.com/users 存在。

那么，有没有办法将输入 www.domain.com/user 的人重定向到 www.domain.com/users 而不会影响 www.domain.com/user/username ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:52:37.137

是的，可以相应地重写`RewriteRule`将 URL 末尾锚定为 with 的表达式`user`。允许可选的`$`尾随.`/?``/`

```
RewriteEngine On
RewriteRule ^user/?$ users [L,R=301] 
```

以上将重定向浏览器，以便 URL`/users`显示在地址栏中。如果您只想进行静默内部重写，请更改`[L,R=301]`为`[L]`.

如果您不想调用 mod_rewrite，您可以使用 a`RedirectMatch`代替。

```
RedirectMatch ^/user/?$ http://example.com/users 
```

# cordova - 未找到 PhoneGap FileTransfer 上传

> ID：14572699
> 
> 赞同：1
> 
> 时间：2013-01-28T22:48:16.700
> 
> 标签：cordova

我正在尝试通过 FileTransfer.upload 方法上传使用设备相机拍摄的图像，并且我一直得到一个`FILE_NOT_FOUND_ERR`. 我正在通过 PhoneGap Build 使用 Cordova 2.2.0。

我正在拍照并将其 URI 保存到 localStorage（通过 Backbone）：

```
navigator.camera.getPicture(
    (file_uri) =>
        params.file_uri = file_uri
        params.is_image = 1
        collection.create params
    (message) ->
        U.Alert "Failed: #{message}"
    options
) 
```

然后尝试上传该图像：

```
file_uri = @get('file_uri')

transferOpts = new FileUploadOptions
transferOpts.fileKey = 'attachment'
transferOpts.fileName = file_uri.substr file_uri.lastIndexOf('/') + 1
transferOpts.chunkedMode = false

transfer = new FileTransfer
transfer.upload(file_uri, @url(), success, error, transferOpts) 
```

这样，FileTransfer 的`error`回调总是会抛出以下内容：

```
{
    code: 1,
    http_status: 411,
    source: "content://media/external/images/media/8416",
    target: "https://mywebapp.com/api/endpoint"
} 
```

代码 1 是 PhoneGap 的`FILE_NOT_FOUND_ERR`响应代码。但我已经验证该文件存在于设备上。首先，我可以`file_uri`在屏幕上显示为图像。其次，我可以通过 Weinre 调试器检索图像文件的内容，如下所示：

```
var reader = new FileReader();
reader.onloadend = function(e) {
    console.log('Read as data URL');
    console.log(e.target.result);
};
reader.readAsDataUrl(file_uri); 
```

记录的`data:image/jpeg;base64`响应是正确的图像。

现在，我什至尝试像这样手动解析 URI，正如我在一个 StackOverflow 问题中看到的那样：

```
resolveLocalFileSystemURI file_uri, (fileEntry) => fileEntry.file (fileObj) =>
    transferOpts = new FileUploadOptions
    transferOpts.fileKey = 'attachment'
    transferOpts.fileName = fileObj.name
    transferOpts.chunkedMode = false

    transfer = new FileTransfer
    transfer.upload(fileObj.fullPath, @url(), success, error, transferOpts) 
```

在这种情况下`fileObj.fullPath`，解决为：`/mnt/sdcard/Android/data/com.COMPANY.APPNAME/cache/1359412873161.jpg`

*仍然*没有运气。在这一点上，我确定我错过了一些愚蠢的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T08:30:58.457

我遇到了类似的问题，并通过使用格式为“file://”的源 uri 解决了

# c# - 用户定义的 C# 中动态创建的控件数量

> ID：14572700
> 
> 赞同：0
> 
> 时间：2013-01-28T22:48:19.710
> 
> 标签：c#, winforms, dynamically-generated

我的程序目前设置为仅在原始控件下方添加一行控件。我怎样才能做到这一点，以便用户可以添加任意多的控件行？

```
private void surfaceAddButton_Click(object sender, EventArgs e)
    {           
        //Adds new set of controls on button click
        for (int i = 1; i < 2; i++)
        {

            ComboBox surfaceCombo2 = new ComboBox();
            TextBox sideWallsText2 = new TextBox();
            TextBox backWallsText2 = new TextBox();
            TextBox floorText2 = new TextBox();
            Label newLabel = new Label();
            Label newLabel2 = new Label();
            Label newLabel3 = new Label();

            Absorption_Coefficients alpha = new Absorption_Coefficients(); //Adds surfaces to combobox
            List<string> materialslist = alpha.listLoad();
            materialslist.Sort();
            surfaceCombo2.Items.AddRange(materialslist.ToArray());
            surfaceCombo2.DropDownStyle = ComboBoxStyle.DropDownList;

            //Sets locations and sizes of new row of options, then displays them
            surfaceCombo2.Location = new Point(1, 150 * i + 30);               
            sideWallsText2.Location = new Point(393, 153 * i + 30);
            backWallsText2.Location = new Point(561, 153 * i + 30);
            floorText2.Location = new Point(711, 153 * i + 30);
            newLabel.Location = new Point(321, 158 * i + 30);
            newLabel2.Location = new Point(439, 158 * i + 30);
            newLabel3.Location = new Point(609, 158 * i + 30);
            surfaceCombo2.Width = 322;
            sideWallsText2.Width = 43;
            backWallsText2.Width = 43;
            floorText2.Width = 43;
            newLabel.Text = "Side Walls, ft²";
            newLabel2.Width = 120;
            newLabel2.Text = "Back/or Front Walls, ft²";
            newLabel3.Text = "Floor/or Ceiling, ft²";

            this.Controls.Add(surfaceCombo2);
            this.Controls.Add(sideWallsText2);
            this.Controls.Add(backWallsText2);
            this.Controls.Add(floorText2);
            this.Controls.Add(newLabel);
            this.Controls.Add(newLabel2);
            this.Controls.Add(newLabel3);

            this.Size = new Size(769, 209 * i + 30); //Increases form to accomodate new controls
        }
    } 
```

这是仅添加了一个表面的形式。我想这样做，所以每次用户单击 +Surface 时，下面都会有一个新行。

![添加了一个表面的表格](../Images/d35401379340c1b6f1f3cb04dd97acfc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:53:14.677

```
for (int i = 1; i < 2; i++) 
```

在 for 循环中使用 2，替换为 n，其中 n 将是从某个控件收集的数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:53:58.113

第一步是获取您现有的代码并创建一个创建行的方法。理想情况下，作为此步骤的一部分，您可以创建一个自定义控件来封装您现在已经拥有的大部分逻辑。

第二步是采用该新方法并需要一个参数`numberOfRows`，使用该参数并将其默认为 1。然后确保它仍然有效。

最后一步是为用户提供一种输入`numberOfRows`方法并将其发送到您的方法。

# jquery - CSS 过渡无法为类更改设置动画

> ID：14572701
> 
> 赞同：0
> 
> 时间：2013-01-28T22:48:37.747
> 
> 标签：jquery, css, gradient, css-transitions, onmouseover

我正在尝试获得渐变以动画其在 div 上的应用程序。我打算使用 JS 来做这件事，但我了解到 CSS 过渡会是一种更好的方法。

我有很多按钮，它们都继承了这个`containerButton`类。不过，他们每个人都有自己的个人 ID。这是`logout`按钮的示例。我已经将转换应用于`containerButton`and`containerButton:hover`定义，但仍然没有运气，变化只是立即发生。

这是 HTML/CSS：

```
<!-- HTML for button -->
<input id="logoutYes" class="containerButton" style="width: 125px; 
       margin-top: 10px; margin-left: 220px; color: #111100; font-weight: bold; 
       padding-top: 12.5px;" type="button" value="YES, LOGOUT" id="loginButton" 
       onclick="logout();" />

/* CSS */
.containerButton, .containerButtonSelected, .containerButtonSelectedToggle, .containerMini {
float: left;
text-align: center;
font-size: 14px;
width: 50px;
/* for IE */
filter: alpha(opacity=100);
/* CSS3 standard */
opacity: 1.0;
cursor: pointer;

-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;

transition-property: background, filter;
transition-duration: 1s;
transition-delay: 0s;
}

.containerButtonSelected, .containerButton:hover, #logoutYes:hover {
background: #f0f0ee; /* Old browsers */
background: -moz-linear-gradient(top, #f0f0ee 7%, #8c95ff 83%, #303eff 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(7%,#f0f0ee), color-stop(83%,#8c95ff), color-stop(100%,#303eff)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #f0f0ee 7%,#8c95ff 83%,#303eff 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #f0f0ee 7%,#8c95ff 83%,#303eff 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #f0f0ee 7%,#8c95ff 83%,#303eff 100%); /* IE10+ */
background: linear-gradient(to bottom, #f0f0ee 7%,#8c95ff 83%,#303eff 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f0f0ee', endColorstr='#303eff',GradientType=0 ); /* IE6-9 */

transition-property: background, filter;
transition-duration: 3s;
transition-delay: 1s;
} 
```

# php - PHP中的大数减1

> ID：14572704
> 
> 赞同：5
> 
> 时间：2013-01-28T22:48:53.003
> 
> 标签：php

我需要从`294867828828426241`PHP 中的数字中减去 1。但是，当我这样做时

```
$a = 294867828828426241 - 1; 
```

我收到浮点数`2.94867828828E+17`。其中，当解决时`number_format()`给出原始数字。

请问我怎样才能得到正确的值？

这需要能够处理不同的数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T22:57:52.373

如果你有[BCMath](http://php.net/manual/en/intro.bc.php)扩展，你可以使用这个：

```
$a = bcsub('294867828828426241', '1');

echo $a; // 294867828828426240 
```

但是，在我的 64 位服务器上测试您的代码应该可以正常工作。我不确定，但您可以检查一下增加您的[精度](http://php.net/manual/en/ini.core.php#ini.precision)指令`php.ini`是否会产生任何影响。我的设置是14。

# c++ - 类构造函数错误，类“类名”没有成员“类名”

> ID：14572709
> 
> 赞同：0
> 
> 时间：2013-01-28T22:49:24.467
> 
> 标签：c++, class, constructor, header

```
#ifndef RESERVATIONS_H_INCLUDED
#define RESERVATIONS_H_INCLUDED
#include <vector>
#include <string.c>

class Reservations
{
public:
    Reservations::Reservations { }
    Reservations(string FullName, int PhoneNum);
    string getname() { return FullName; }
    int getnumber() { return PhoneNum; }
private:
    string FullName;
    int PhoneNum;
}

#endif // RESERVATIONS_H_INCLUDED

Reservations::Reservations(string FullName, int PhoneNum) //error on this line
{
    FullName = FullName;
    PhoneNum = PhoneNum;
} 
```

我得到标题中的错误，我不知道为什么它假设我希望它拥有自己的班级成员......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:50:48.330

你包含了错误的头文件

改变

```
#include <string.c> 
```

至

```
#include <string> 
```

还使用带有完整命名空间标准的字符串。

下面的代码应该通过小修复编译：

```
class Reservations
{
public:
    Reservations() : PhoneNum(0) {}
    Reservations(std::string FullName, int PhoneNum);
    std::string getname() { return FullName; }
    int getnumber() { return PhoneNum; }
private:
    std::string FullName;
    int PhoneNum;
};

Reservations::Reservations(std::string FullName, int PhoneNum) 
{
   this->FullName = FullName;
   this->PhoneNum = PhoneNum;
}

// Better use member initializers list
Reservations::Reservations(std::string FullName, int PhoneNum) 
: FullName(FullName),
  PhoneNum(PhoneNum)
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:51:49.563

你的意思是

```
Reservations::Reservations() { } 
```

代替

```
Reservations::Reservations { } 
```

?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:51:58.603

做这个：

```
class Reservations
{
    public:
    //Reservations::Reservations { }
    Reservations() { }
    .... 
```

# ruby - Fusion Tables：为什么我在尝试通过 Ruby 的 RestClient gem 更新表格样式时总是收到“400 Bad Request”错误

> ID：14572711
> 
> 赞同：6
> 
> 时间：2013-01-28T22:49:31.620
> 
> 标签：ruby, oauth, google-fusion-tables, put, rest-client

我正在尝试使用 Ruby gem RestClient 更新我的一个 Fusion Tables 的样式。

这是我的代码：

```
require 'rest_client'

tableId = '<STRING CONTAINING TABLEID>'
styleId = '<STRING CONTAINING STYLEID>'
key = '<STRING CONTAINING MY FUSION TABLES API KEY>'

table_url = "https://www.googleapis.com/fusiontables/v1/tables/#{tableId}/styles/#{styleId}?key=#{key}"
update = '{"polygonOptions": {"strokeColor":"#ffffff"}}'

token = 'STRING CONTAINING AUTHORIZATION TOKEN'

RestClient.put table_url,update,{"Authorization" => "Bearer #{token}"} 
```

当我运行该代码时，我收到此错误：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/abstract_response.rb:48:in `return!': 400 Bad Request (RestClient::BadRequest)
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:230:in `process_result'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:178:in `block in transmit'
    from C:/Ruby193/lib/ruby/1.9.1/net/http.rb:745:in `start'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:172:in `transmit'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:64:in `execute'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient/request.rb:33:in `execute'
    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/rest-client-1.6.7/lib/restclient.rb:80:in `put' 
```

当我将`update`代码输入[Google 的官方 Style request PUT maker thingie](https://developers.google.com/fusiontables/docs/v1/reference/style/update)时，更新工作。但是当我运行我的 Ruby 代码时它不起作用。

有谁知道我做错了什么？

编辑：我从添加中获得的额外输出`RestClient.log = logger`

```
RestClient.put "https://www.googleapis.com/fusiontables/v1/tables/<MY TABLE ID HERE>/styles/4?key=<AND HERE'S WHERE MY FUSION TABLE API KEY GOES>", "{\"polygonOptions\":{\"strokeColor\":\"#ffffff\"}}", "Accept"=>"*/*; q=0.5, application/xml", "Accept-Encoding"=>"gzip, deflate", "Authorization"=>"Bearer <THIS CONTAINS THE BEARER STRING>", "Content-Length"=>"44"
# => 400 BadRequest | application/json 255 bytes 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T13:21:05.917

您确实应该使用[google-api-ruby-client](http://code.google.com/p/google-api-ruby-client/)库，而不是构建自己的 REST 调用。该库为您抽象了许多 OAuth 内容和参数格式。

话虽如此，[您能否为您的 RestClient 启用调试](https://stackoverflow.com/questions/10068496/logging-restclient-in-a-rails-app)并发布 RestClient 调用的输出以及 Google 官方 PUT 制造商的输出（我喜欢您那里的技术术语）？比较两者应该可以显示它们的不同之处以及谷歌不喜欢你的地方。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T00:58:23.113

在回答您关于在没有 Rails 的情况下设置记录器的问题时，请在@Jay Lee 回答的评论中......</p>

这是一个设置为输出到标准输出的记录器：

```
logger = Logger.new STDOUT
logger.level = Logger::WARN # INFO/DEBUG… whatever level you find is needed
logger.datetime_format = '%a %d-%m-%Y %H%M ' 
```

然后将其余代码放入控制台（例如 IRB）并在最后一行之前添加：

```
RestClient.log = logger 
```

你应该得到一些有用的信息输出到终端。有关可用级别的更多信息，请参阅[Logger 类的文档。](http://www.ruby-doc.org/stdlib-1.9.3//libdoc/logger/rdoc/Logger.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-07T17:17:29.983

我认为问题在于您没有将内容类型设置为 application/json。尝试做这样的事情：

```
RestClient.put(table_url, update, {"Authorization" => "Bearer #{token}", "Content-type" => "application/json"}) 
```

在这种情况下，有效负载需要是 json，因此您可以使用示例中的 json-string 或在数据结构上运行 to_json。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-06T01:23:08.540

可能是因为你的哈希在这里

```
update = '{"polygonOptions": {"strokeColor":"#ffffff"}}' 
```

应该是

```
update = {"polygonOptions" => {"strokeColor" => "#ffffff"}} 
```

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-07T12:57:21.337

供参考，

**尝试的替代方案：**

1）在项目设置和令牌再生中删除HTTPS请求。

2) 在这种情况下尝试使用 SSL。

3) 有时当值超过 255 个字符时会发生此错误，这可能与您有关。同样的问题在某个时候发生在某人身上，并在调试后得到解决。检查[链接](https://github.com/nsanta/fbgraph/issues/55)以获取更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-30T00:22:42.917

我遇到了同样的 400 Bad Request 问题，特别是在发布样式时。我能够通过确保样式中“种类”的任何值都被命名空间来解决这个问题，文档中的示例并不总是正确的——例如：

```
{
     ...
     "kind": "fusiontables#buckets"
     ...
} 
```

而不仅仅是“桶”。

# database-design - 存储负数 - 数据库设计

> ID：14572712
> 
> 赞同：3
> 
> 时间：2013-01-28T22:49:32.890
> 
> 标签：database-design

我正在开发一个会计应用程序。我有一个交易表，其中一个字段是交易金额（双 10/2 类型）。

对于减少账户余额的交易，最好将交易金额存储为负数，还是将它们全部存储为正数，然后根据交易类型（存款、取款、信用、费用等）将它们转换为负数以进行计算?

谢谢

布雷特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:13:31.217

I would concur with Catcall and HLGEM. Much better to store them as signed numbers, especially if you're going to do reports that will calculate summaries (aggregates). Having to infer the sign based on another field would make your reports a lot more complex than they should be. Also, many financial functions will require signed numbers (for calculating interest rates for example), and having to derive them from another field would again add some unnecessary complexity.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T23:09:56.040

最好将正数存储为正数，将负数存储为负数。如果您*不预先*这样做，您最终将创建一堆修复数字的视图，并重写应用程序代码以使用这些视图。

使用“十进制”或“数字”类型比使用“双精度”要好得多*。*

# actionscript-3 - AIR Window Scale和Stage Scale

> ID：14572714
> 
> 赞同：1
> 
> 时间：2013-01-28T22:49:49.410
> 
> 标签：actionscript-3, apache-flex, air

我有一个 AIR 应用程序，我想让用户从 60% 扩展到 200%。我在控制应用程序缩放的选项菜单中添加了一个滑块。我对如何正确扩展整个应用程序感到困惑，需要一点帮助，我已经做了很长一段时间了。

这个简单测试的代码如下。在到处添加跟踪并在调整大小事件上放置侦听器时，我基本上发现设置窗口的 scaleX 和 scaleY 值不会改变舞台的 scaleX 和 scaleY。但是，这些阶段值无法编辑，如果您尝试，则会引发错误。

所以，然后我尝试调整 stage.stageWidth 和 stage.stageHeight 以匹配 stage.width 和 stage.height。但是，在这样做时，窗口的内容会再次缩放。

基本上最终发生的情况是窗口内的任何超过 100% 或 minWidth 和 minHeight 的组件最终会被剪裁，因为 stage.stageWidth 没有 stage.width 宽，而 stage.stageHeight 没有和stage.height一样高。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Window xmlns:fx="http://ns.adobe.com/mxml/2009" 
          xmlns:s="library://ns.adobe.com/flex/spark" 
          xmlns:mx="library://ns.adobe.com/flex/mx" width="250" height="300"
          minWidth="260" minHeight="280"
          showStatusBar="false"
          systemChrome="none" transparent="true"
          initialize="_init()" creationComplete="_initPostCreation()"
          maximizable="false" minimizable="false" xmlns:Components="assets.skins.CompOverlay.Components.*">

    <fx:Declarations>
    </fx:Declarations>

    <s:VGroup left="2" top="2" right="2" bottom="2" gap="0">        
        <s:Label width="100%" textAlign="center" text="Window Scale" fontSize="14" />
        <s:HGroup width="100%">
            <s:HSlider id="winScale" minimum="0.6" maximum="2" width="80%" snapInterval="0.01" showDataTip="false" change="_winScale(event)" />
            <s:Label width="20%" fontSize="14" textAlign="center" text="{Math.round(winScale.value*100) + '%'}"/>
        </s:HGroup>     
    </s:VGroup>

    <fx:Script>
        <![CDATA[
            import mx.events.ResizeEvent;

            private function _init():void
            {

            }

            private function _initPostCreation():void
            {
                this.addEventListener(Event.CLOSING, this._destructor);

                this.stage.scaleMode = StageScaleMode.NO_SCALE;
                this.stage.addEventListener(Event.RESIZE, _onResize);
                this.addEventListener(ResizeEvent.RESIZE, _onWinResize);
                this.stage.align = StageAlign.TOP_LEFT;
            }

            private function _destructor(event:Event):void
            {               
                this.removeEventListener(Event.CLOSING, this._destructor);
                this.stage.removeEventListener(Event.RESIZE, _onResize);
                this.removeEventListener(ResizeEvent.RESIZE, _onWinResize);
            }

            private function _winScale(event:Event):void
            {
                this.scaleX = event.target.value;
                this.scaleY = this.scaleX;
                this.width = (260*this.scaleX);
                this.height = (300*this.scaleY);
                trace(this.width, this.height);
                trace(this.scaleX, this.scaleY);
            }

            private function _onResize(event:Event):void
            {
                trace('start resize----');
                trace('stage.width = '+this.stage.width, 'stage.height = '+this.stage.height);
                trace('stage.stageWidth = '+this.stage.stageWidth, 'stage.stageHeight = '+this.stage.stageHeight);
                if (this.initialized) {
                    if (this.stage.width != this.stage.stageWidth) {
                        this.stage.removeEventListener(Event.RESIZE, _onResize);

                        this.stage.stageWidth = this.stage.width;
                        this.stage.stageHeight = this.stage.height;

                        this.stage.addEventListener(Event.RESIZE, _onResize);
                    }
                    trace('stage.width = '+this.stage.width, 'stage.height = '+this.stage.height);
                    trace('stage.stageWidth = '+this.stage.stageWidth, 'stage.stageHeight = '+this.stage.stageHeight);
                    trace('stage.scaleX = '+this.stage.scaleX, 'stage.scaleY = '+this.stage.scaleY);
                }
                trace('end resize----');
            }

            private function _onWinResize(event:ResizeEvent):void
            {
                trace ('window resize event');
                if (this.stage.width != this.stage.stageWidth) {
                    event.stopPropagation();
                    trace('prop stopped');
                }
            }

        ]]>
    </fx:Script>
</s:Window> 
```

多次调整窗口大小会产生以下跟踪输出：

```
start resize----
stage.width = 291.5 stage.height = 316.9
stage.stageWidth = 275 stage.stageHeight = 297
window resize event
prop stopped
window resize event
prop stopped
stage.width = 308.45 stage.height = 337.05
stage.stageWidth = 291 stage.stageHeight = 316
stage.scaleX = 1 stage.scaleY = 1 stage.scaleMode = noScale
end resize----
window resize event
prop stopped
start resize----
stage.width = 308.45 stage.height = 339.2
stage.stageWidth = 291 stage.stageHeight = 318
window resize event
prop stopped
window resize event
prop stopped
stage.width = 326.5 stage.height = 361.45
stage.stageWidth = 308 stage.stageHeight = 339
stage.scaleX = 1 stage.scaleY = 1 stage.scaleMode = noScale
end resize---- 
```

我很感激任何帮助，谢谢！

# html - 多个超链接样式

> ID：14572717
> 
> 赞同：0
> 
> 时间：2013-01-28T22:50:12.980
> 
> 标签：html, css

这些天，多重超链接样式仍然有效吗？

我以前这样做的方式就像

```
.linkStyle2 a {
    color: #999;
    text-decoration: none;
}
.linkStyle2 a:link {
    color: #999;
    text-decoration: none;
}
.linkStyle2 a:visited {
    color: #666;
    text-decoration: none;
}
.linkStyle2 a:hover {
    color: #CCC;
    text-decoration: none;
}
.linkStyle2 a:active {
    color: #999;
    text-decoration: none;
}
</style>

<span class="linkStyle2">

<a href="test.html">test link one</a>

</span> 
```

它似乎不再起作用了..即使将它们作为类插入超链接中..这真的很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:14:38.110

Corrupt ANSI characters was reverting the style tag into:

```
<style type=â€text/cssâ€&gt; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:56:30.377

阅读：[http ://www.w3schools.com/css/css_pseudo_classes.asp](http://www.w3schools.com/css/css_pseudo_classes.asp)

在您的情况下：

.linkStyle2 a {
   color: #999;
   文字装饰：无；
}
.linkStyle2 a:visited{
   颜色：#666;
}
.linkStyle2 a:hover{
   颜色：#CCC;
}

# c# - 使用 Linq，如何对目标对象内的列表中的对象进行 GroupBy

> ID：14572718
> 
> 赞同：6
> 
> 时间：2013-01-28T22:50:15.523
> 
> 标签：c#, linq, grouping

可能措辞不太正确，但这就是我所拥有的，这是我想要达到的结果：

```
class Cake
{
public List<string> Ingrediants {get;set;}
public DateTime Baked {get;set;}
public string CakeName {get;set;}
}

List<Cake> cakes= new List<Cake>();
cakes.Add(new Cake() {CakeName = "Cake1", Ingrediants = new List<string>() {"Sugar", "Chocolate"}});
cakes.Add(new Cake() {CakeName = "Cake2", Ingrediants = new List<string>() {"Sugar", "Butter"}});
cakes.Add(new Cake() {CakeName = "Cake3", Ingrediants = new List<string>() {"Stevia", "Butter"}}); 
```

我想按成分对蛋糕进行分组。所以我想结束这个：

```
 - Sugar
        Cake1
        Cake2
 - Stevia
        Cake3 
 - Chocolate
        Cake1
 - Butter
        Cake2
        Cake3 
```

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T04:27:06.563

如果您不介意查询理解，这里有一个替代方案（注意更正的拼写）：

```
IEnumerable<IGrouping<string,Cake>> query =
    from cake in cakes
    from ingredient in cake.Ingredients
    group cake by ingredient; 
```

惊喜！这是一个有效的查询！语言规范允许理解以 group-by 结尾。从`IGrouping<string,Cake>`技术上讲，`IEnumerable<Cake>`它具有`Key`类型属性`string`- 在这种情况下是成分。编译器致力于将其转换为与其他答案几乎相同的代码。

`into`我们可以通过引入一个和一个`select`对查询继续起作用的子句来更改查询以生成与其他答案相似的相同泛型类型：

```
var query =
    from cake in cakes
    from ingredient in cake.Ingredients
    group cake by ingredient into cakesGrouped
    select new { Ingredient = cakesGrouped.Key, 
        Cakes = cakesGrouped.ToList() }; 
```

恕我直言，流利的语法和查询语法都值得了解。干杯!

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T22:57:25.930

```
var ingrediants = cakes.SelectMany(c => c.Ingrediants.Select(i => new { Cake = c, Ingrediant = i }))
    .GroupBy(ci => ci.Ingrediant) 
```

然后组键是成分名称，组集合是匹配的蛋糕。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T22:56:04.563

这是一种方法：

```
var result = cakes
    .SelectMany(c => c.Ingrediants.Select(i => new
        {
            c.CakeName,
            Ingredient = i
        }))
    .GroupBy(x => x.Ingredient)
    .Select(g => new
        {
            Ingredient = g.Key,
            Cakes = g.Select(x=>x.CakeName).ToArray()
        }); 
```

`result`将是`IEnumerable`匿名类型；一个元素代表一种成分和所有包含它的蛋糕。

# java - 如何向自定义 Magnolia CMS 模板添加导航？

> ID：14572720
> 
> 赞同：3
> 
> 时间：2013-01-28T22:50:26.883
> 
> 标签：java, content-management-system, magnolia

按照本教程，我已经很容易地为 Magnolia CMS 创建了一个自定义页面模板：

[http://documentation.magnolia-cms.com/templates/introduction.html](http://documentation.magnolia-cms.com/templates/introduction.html)

但是，我想将导航插入到我的模板中，但我找不到一个简单的方法来做到这一点。看起来其他人遇到了这个问题，没有明确的方法来解决它。有谁知道如何轻松包含导航？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T10:07:14.177

如果您使用 Magnolia CE（社区版）4.5.x，您需要知道基本上每个页面模板都扩展了`/modules/standard-templating-kit/config/site/templates/prototype`. 那里有一个节点，`/navigation`. 您可以将该节点复制到新的自定义模板中，然后您可以开始使用它的属性。

但在此之前，不要忘记在主模板`.ftl`文件`info.magnolia.module.templatingkit.templates.pages.STKPageModel`（ ，这是一个很好的起点）

水平导航：

```
[#if def.navigation.top]
    [#include def.navigation.horizontal.template]
[/#if] 
```

垂直导航：

```
[#if def.navigation.top]
    [#include def.navigation.vertical.template]
[/#if] 
```

如果您想将您的菜单包含在`[@cms.area ...]`标签中包含的另一个模板中，您可以使用以下代码：

```
[#if model.root.def.navigation.top]
    [#include model.root.def.navigation.vertical.template]
[/#if] 
```

# javascript - 注入脚本的评估顺序

> ID：14572721
> 
> 赞同：1
> 
> 时间：2013-01-28T22:50:28.837
> 
> 标签：javascript, google-chrome

我正在编写一个 Chrome 扩展程序，它将一些 JS 注入页面。我的 JS 存储在`script.js`. 我使用 a`contentscript.js`来实际进行注入（如[this SO answer](https://stackoverflow.com/a/9517879/1226028)中所建议的那样）。这一切都很好。

我`script.js`使用 jQuery，因此也需要`jquery.js`注入一堆插件。所以我的`contentscript.js`样子是这样的：

```
var a = document.createElement('script');
a.src = chrome.extension.getURL("jquery.min.js");
a.onload = function() {
    this.parentNode.removeChild(this);
};
(document.head||document.documentElement).appendChild(a);

...4 more similiar plugin script injections...

var s = document.createElement('script');
s.src = chrome.extension.getURL("script.js");
s.onload = function() {
    this.parentNode.removeChild(this);
};
(document.head||document.documentElement).appendChild(s); 
```

顺序`script.js`是它们必须被评估的顺序。

我的问题是，根据加载的方式，我似乎无法保证`jquery.min.js`在 my 之前得到评估`script.js`，从而导致诸如“$ undefined”和“Object does not have ... method”（对于插件）之类的错误。

仅供参考，我知道这不是一个巨大的阻塞问题，因为当它们都被缓存并以正确的顺序加载时，我的扩展程序可以完美运行。这就是让我相信问题在于负载的原因。

如何执行我需要的关于如何评估我的脚本的顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T04:03:51.380

我希望您不会通过实际编写五次相同的代码、嵌套五层深来将负载链接在一起*。*这可以通过队列和单个函数以非常直接的方式解决：

```
function loadNextPlugin(plugins) {
  // "pop" the next script off the front of the queue
  var nextPlugin = plugins.shift();

  // load it, and recursively invoke loadNextPlugin on the remaining queue
  var tag = document.createElement('script');
  tag.src = chrome.extension.getURL(nextPlugin);
  tag.onload = function() {
    if (plugins.length)
      loadNextPlugin(plugins);
  }
  (document.head||document.documentElement).appendChild(a);
}

loadNextPlugin(["jquery.min.js", "script2.js", "script3.js", "script.js"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T22:54:26.680

`onload`通过在前一个插件的处理程序中加载下一个插件，链接每个插件的加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-21T22:08:00.447

在您注入的脚本上设置`async=false`。

这是以任何顺序加载脚本但按添加顺序执行的符合规范的方式。

从[深潜到脚本加载的浑水](https://www.html5rocks.com/en/tutorials/speed/script-loading/)：

> ```
> [
>   '1.js',
>   '2.js'
> ].forEach(function(src) {
>   var script = document.createElement('script');
>   script.src = src;
>   script.async = false;
>   document.head.appendChild(script);
> }); 
> ```
> 
> **规范说**：一起下载，全部下载后按顺序执行。
> 
> **Firefox < 3.6，Opera 说**：我不知道这个“异步”的东西是什么，但碰巧我按照添加的顺序执行通过 JS 添加的脚本。
> 
> **Safari 5.0 说**：我理解“异步”，但不理解用 JS 将其设置为“false”。我会在你的脚本落地后立即执行，无论顺序如何。
> 
> **IE < 10 说**：不知道“异步”，但是[有一个](https://www.html5rocks.com/en/tutorials/speed/script-loading/#interesting-ie) 使用“onreadystatechange”的解决方法。
> 
> **其他[红色的浏览器](http://caniuse.com/#search=async)说**：我不明白这个“异步”的东西，我会在你的脚本落地后立即执行，无论顺序如何。
> 
> **其他一切都在说**：我是你的朋友，我们将照本宣科。

# resharper - Resharper - 不要将私有方法显式标记为私有

> ID：14572723
> 
> 赞同：1
> 
> 时间：2013-01-28T22:50:35.293
> 
> 标签：resharper

我希望 resharper 默认情况下不要将私有访问修饰符放在字段上 - 它们已经是私有的，我不需要额外的修饰符。

我如何告诉 resharper 把它剪掉？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T23:39:12.937

在Resharper的*选项中*

在*代码编辑*> *C#* >*其他*

在*修饰符部分*取消选中*使用显式私有修饰符*

 ***更新（*Resharper 8.1*）**

在*Resharper 8.1*中，您可以在以下位置找到此选项：*代码编辑*> *C#* >*格式化样式*>*其他*。然后在*修饰符部分取消选中**使用显式私有修饰符*。

 ***ReSharper 9.1**

ReSharper -> 选项 -> 代码编辑 -> C# -> 代码样式 -> 修饰符 -> 使用显式私有修饰符（取消选中）

[![在此处输入图像描述](../Images/b3a1913107f7e1ab17a4181456b9f421.png)](https://i.stack.imgur.com/FsDcp.png)**

# php - Wordpress - 密码保护页面

> ID：14572726
> 
> 赞同：-3
> 
> 时间：2013-01-28T22:50:47.427
> 
> 标签：php, wordpress

我想对页面进行密码保护，以便只有有权访问的用户才能下载该页面的内容。最好，我想通过让用户使用所需密码填写表格来做到这一点，一旦通过电子邮件收到表格，我将使用他们在表格中提供的详细信息通过 Wordpress 创建一个新用户。

然后我想使用 Wordpress 内置的密码保护功能或类似功能；只允许密码与我刚刚在 Wordpress 后端创建的新用户相匹配的用户访问。

我知道这是可能的，我只是不知道如何去做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:21:30.057

有关 WP 密码页面保护的所有信息都可以在这里找到：[http](http://codex.wordpress.org/Using_Password_Protection) ://codex.wordpress.org/Using_Password_Protection或者您可以在 Google 上搜索插件 :)

# c# - 可扩展的业务逻辑规则

> ID：14572730
> 
> 赞同：2
> 
> 时间：2013-01-28T22:51:10.573
> 
> 标签：c#, rules, business-objects

我正在寻找一种方法来创建一个可扩展的销售订单项目，以便轻松附加新的业务规则。

```
public class OrderLine
{
    public int OrderId { get; set; }
    public int Line { get; set; }
    public string Product { get; set; }
    public string Description { get; set; }
    public decimal Quantity { get; set; }
    public int LeadTimeDays { get; set; }        
    public DateTime ShipDate { get; set; }
} 
```

创建业务规则以检查订单行是否有效的最佳实践是什么？而且，有没有一种简单的方法来应用多个规则而不为每个规则添加检查方法？

```
public static class OrderLineChecks
{
    public static void CheckLeadTime(this OrderLine orderLine)
    {
        if( (orderLine.ShipDate - DateTime.Today).TotalDays < orderLine.LeadTimeDays )
            throw new Exception("Order is within lead time.");
    }

    public static void CheckShipDateError(this OrderLine orderLine)
    {
        if(orderLine.ShipDate < DateTime.Today)
            throw new Exception("Ship date cannot be before today.");
    }
    public static void ShouldBeOrderedInPairs(this OrderLine orderLine)
    {
        if(orderLine.Description.Contains("pair") && (orderLine.Quantity % 2 !=0))
            throw new Exception("Quantities must be even numbers.");
    }
    public static NextFutureRuleHere(...)
    {
    }
} 
```

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:55:44.947

查看 Fluent 验证： http: [//fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

遵循这个框架如何实现规则应该可以帮助你找出我认为你正在寻找的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:51:08.560

根据您的要求，这可能有点矫枉过正，但您是否考虑过使用[Rhino DSL & Boo](https://github.com/ayende/rhino-dsl)编写 DSL 。如果您编码正确，即使非程序员也很容易[扩展/维护](http://ayende.com/blog/3764/should-you-be-able-to-define-new-abstractions-in-a-domain-specific-language)一[组业务规则。](http://ayende.com/blog/3740/the-shopping-cart-rule-engine-dsl)

# angularjs - bootstrap-wysihtml5 Angular 指令在更改时未正确更新

> ID：14572733
> 
> 赞同：3
> 
> 时间：2013-01-28T22:51:35.917
> 
> 标签：angularjs, wysihtml5

我目前正在尝试将 wysihtml5 与 Angular 指令一起使用，但我似乎无法正确触发更改事件。

以下是我设置的指令：

```
app.directive('wysiwyg', ['$parse', function() {
 return {
    restrict: "A",
    require: "?ngModel",
    link: function(scope, element, attrs, ctrl) {

        var change = function() {
            scope.$apply(function(){
                ctrl.$setViewValue($(element).val());
            });
        };

        $(element).wysihtml5({
            "font-styles": true, //Font styling, e.g. h1, h2, etc. Default true
            "emphasis": true, //Italics, bold, etc. Default true
            "lists": true, //(Un)ordered lists, e.g. Bullets, Numbers. Default true
            "html": false, //Button which allows you to edit the generated HTML. Default false
            "link": true, //Button to insert a link. Default true
            "image": true, //Button to insert an image. Default true,
            "color": false, //Button to change color of font
            "events": {
                "change": function() {
                    window.console.log("changed");
                    change();
                },
                "newword:composer": function() {
                    change();
                },
                "paste": function() {
                    change();
                }
            }
        });
    }
 };
}]); 
```

根据 wysihtml5 的文档，这是您聆听 change 元素的方式。但是，它目前仅在模糊时触发，而不是在对编辑器进行更改时触发。是否存在我应该寻找的不同事件，或者我应该使用 Angular 指令以不同的方式进行处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T10:20:42.160

你试过这个指令吗？ [https://gist.github.com/joshkurz/3300629](https://gist.github.com/joshkurz/3300629)

# iphone - 旋转视图时更改 UIImageView 位置

> ID：14572734
> 
> 赞同：0
> 
> 时间：2013-01-28T22:51:42.503
> 
> 标签：iphone, ios6, uiimageview, uiinterfaceorientation

当我旋转设备时，我正在尝试更改 iPad 中 UIImageView 的位置，但我不明白为什么有时会改变而有时不会改变，我还想检测视图何时开始方向是什么所以我可以设置正确的位置，但不起作用，这是代码：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    NSLog(@"%d",toInterfaceOrientation);
    [self performSelectorOnMainThread:@selector(changeShelfPosition:) withObject:[NSNumber numberWithInt:toInterfaceOrientation] waitUntilDone:YES];
}

-(void)changeShelfPosition:(NSNumber *)orientation
{
    if (orientation.integerValue == 1 ) {

        self.shelfImage3.frame = CGRectMake(self.shelfImage3.frame.origin.x, 544, self.shelfImage3.frame.size.width, self.shelfImage3.frame.size.height);

    } else if (orientation.integerValue == 2) {
        self.shelfImage3.frame = CGRectMake(self.shelfImage3.frame.origin.x, 544, self.shelfImage3.frame.size.width, self.shelfImage3.frame.size.height);
    } else if (orientation.integerValue == 3) {
        self.shelfImage3.frame = CGRectMake(self.shelfImage3.frame.origin.x, 594, self.shelfImage3.frame.size.width, self.shelfImage3.frame.size.height);
    } else if (orientation.integerValue == 4) {
        self.shelfImage3.frame = CGRectMake(self.shelfImage3.frame.origin.x, 594, self.shelfImage3.frame.size.width, self.shelfImage3.frame.size.height);
    }
}

- (void)viewDidLoad
{
...
UIInterfaceOrientation orientation = [UIApplication sharedApplication].statusBarOrientation;
    if(orientation == 0) {

    }//Default orientation
        //UI is in Default (Portrait) -- this is really a just a failsafe.
    else if(orientation == UIInterfaceOrientationPortrait) {
        self.shelfImage3.frame = CGRectMake(self.shelfImage3.frame.origin.x, self.shelfImage3.frame.origin.y, self.shelfImage3.frame.size.width, self.shelfImage3.frame.size.height);
    }
            //Do something if the orientation is in Portrait
    else if(orientation == UIInterfaceOrientationLandscapeLeft) {
        self.shelfImage3.frame = CGRectMake(self.shelfImage3.frame.origin.x, self.shelfImage3.frame.origin.y+50, self.shelfImage3.frame.size.width, self.shelfImage3.frame.size.height);
    }
                // Do something if Left
    else if(orientation == UIInterfaceOrientationLandscapeRight) {
        self.shelfImage3.frame = CGRectMake(self.shelfImage3.frame.origin.x, self.shelfImage3.frame.origin.y+50, self.shelfImage3.frame.size.width, self.shelfImage3.frame.size.height);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:02:14.537

您无法访问框架或其他几何属性`viewDidLoad`并期望获得一致的结果，因为尚未设置视图几何。

试试`viewWillAppear`吧。

# c++ - fstream 对象可以在类中使用吗？

> ID：14572735
> 
> 赞同：0
> 
> 时间：2013-01-28T22:51:47.303
> 
> 标签：c++, class, fstream

我有以下类定义......我想知道 fstream 对象。

```
#ifndef CLIENTLIST_H
#define CLIENTLIST_H
#include <string>
#include <vector>
#include <fstream>
using namespace std;

class ClientList
{
private:
// A structure for the list
struct ListNode
    {
        char gender;
        string name;
        string phone;
        int numInterests; // The number of interests for the client
        vector<string> interests; // list of interests
        string match;
        struct ListNode *next;  // To point to the next node
    }; 

    ListNode *head;            // List head pointer
    string name;

    void detach(string); // to unmatch the corresponding client

public:
    // Constructor
    ClientList();

    // Destructor
    ~ClientList();

    // Linked list operations
    void appendNode(char, string, string, int, vector<string>, string, fstream &);
    string interestCompare(vector<string>, string, fstream &);
    void unmatch(string, ClientList, fstream &);
    void printMatch(fstream &);
    void printFree(fstream &);

};
#endif 
```

这是我尝试在类中使用 fstream 对象的第五种不同方式，但它们都不起作用，出现各种不同类型的错误。

这是我最近如何实现的功能示例

```
//**************************************************
// appendNode appends a node containing the        *
// value pased into num, to the end of the list.   *
//**************************************************
void ClientList::appendNode(char gen, string nm, string ph, int numIntr, 
                            vector<string> intr, string mch, fstream &dates)
{
    dates.open("dates.txt", ios::out | ios::out);
    ListNode *newNode;  // To point to a new node
    ListNode *nodePtr;  // To move through the list

    // Allocate a new node and store data in it.
    newNode = new ListNode;
    newNode->gender = gen;
    newNode->name = nm;
    newNode->phone = ph;
    newNode->numInterests = numIntr;
    newNode->interests = intr;
    newNode->match = mch;
    newNode->next = NULL;

    // If there are no nodes in the list
    // make newNode the first node.
    if (!head)
        head = newNode;
    // Otherwise, insert newNode at end.
    else  
    {
        // Initialize nodePtr to head of list.
        nodePtr = head;

        // Find the last node in the list.
        while (nodePtr->next)
            nodePtr = nodePtr->next;

        // Insert newNode as the last node.
        nodePtr->next = newNode;
    }

    dates << "\nClient: " << newNode->gender << ", " << newNode->name << ", "
          << newNode->phone << ", " << newNode->numInterests << ", ";
    for (int index = 0; index < newNode->numInterests; index++)
        dates << newNode->interests[index] << ", ";
    dates << newNode->match << ".\n";

    cout << "\n\nAPPENDED\n\n";
    dates.close();
} 
```

这是我如何从 main() 调用它的示例

```
//append to file
    if (gender == tolower('m'))
    {       

        match = Female.interestCompare(interests, name, dates); // compare the vector of interests to the client interests
        // in the female list

        Male.appendNode(gender, name, phone, numInterests, interests, match, dates);        
    } 
```

但就像我说的，这只是我的尝试之一，似乎无论我如何尝试让类打开文件并写入文件，程序都会崩溃或执行一些不是后置条件的事情。

所以，我想知道是否甚至可以在类中使用文件流。如果是这样，我需要保留什么才能做到这一点。

注意：我不一定要寻找特定的实现，我对实现背后的“为什么”更好奇。我想知道我需要记住什么，以便将来能够知道我在做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:42:05.013

这应该是可能的。

您传入的 fstream 可能有问题。仔细检查“日期”。

fstream 从 ios 继承 fail()。可以用来检查你的fstream是否正常。您可以使用 is_open() 检查文件是否正确打开。

```
#include <assert.h>

// stuff...
fstream dates("dates.txt", fstream::in | fstream::out);
if (dates.is_open())
{
    cout << "dates.txt opened ok" << endl;
}
dates.close();

if (gender == tolower('m))
{
    assert(dates.fail() == false);

    match = Female.interestCompare(interests, name, dates);

    assert(dates.fail() == false);

    Male.appendNode(gender, name, phone, numInterests, interests, match, dates);        
} 
```

至少当它失败时，你会得到一个行号并可以从那里调试。

另外，我猜你打算改变第二个 ios::out

```
ClientList::appendNode(...)
{
    //dates.open("dates.txt", ios::out | ios::out);
    dates.open("dates.txt", ios::in | ios::out | ios::app);
    ...
} 
```

# visual-studio-2010 - SQL Server 数据库连接

> ID：14572737
> 
> 赞同：1
> 
> 时间：2013-01-28T22:51:49.917
> 
> 标签：visual-studio-2010, sql-server-2005, database-connection, connection-string

我有一个 ASP.net Web 应用程序和一个在另一台计算机上创建的数据库。现在我想在我的电脑上运行它。

我已经在我的计算机上安装了 SQL Server Express 版本和 SQL Server Management Studio，并将数据库文件复制到我的 SQL 目录并通过 SQL Server Management Studio 成功附加它。应用程序当前连接字符串如下所示。

```
<add name="ASPNETDB" 
     connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.MDF;Integrated Security=True;User Instance=True" 
     providerName="System.Data.SqlClient" /> 
```

我必须对此进行哪些更改才能使其正常工作？仅供参考，我已经将数据库复制到 SQL Server Management Studio 默认安装目录并通过 SQL Server Management Studio express 附加它。我还使用此服务器名称连接到 SQL Server Management Studio。

```
localhost\SQLExpress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T06:06:21.753

如果您已将数据库附加到 SQL Server Express 实例，那么您应该可以从现在开始使用此连接字符串：

```
<add name="ASPNETDB" 
     connectionString="Server=.\SQLEXPRESS;Database=ASPNETDB;Integrated Security=True" 
     providerName="System.Data.SqlClient" /> 
```

有了这个，你基本上告诉你的应用程序

*   连接到什么**服务器**`.\SQLEXPRESS`（实例）（ ）
*   在服务器上使用什么**数据库**（`ASPNETDB`- 或者你给它的任何名字）
*   使用集成安全性（例如使用您的 Windows 凭据）登录 SQL Server

这就是您所需要的——SQL Server 将为您处理处理数据和事务日志文件的所有细节以及所有这些细节工作。

# php - 使用 php 将 Mssql 表数据导出到 csv 文件

> ID：14572740
> 
> 赞同：1
> 
> 时间：2013-01-28T22:51:59.803
> 
> 标签：php, sql-server, csv, export

当我运行 php 脚本导出 MSSQL 服务器表数据时，我收到以下错误消息：

> 警告：mssql_query() [function.mssql-query]：消息：无法使用 DB-Library（如 ISQL）或 ODBC 版本 3.7 或更早版本将仅 Unicode 排序规则中的 Unicode 数据或 ntext 数据发送到客户端。（严重性 16）在 C:\Program Files\Apache Software Foundation\Apache2.2\htdocs\Newitemtest\csv3.php 第 22 行

谁能以正确的方式指出我？非常感谢你。

下面是我的php脚本

```
<?php
    $myServer = "****";
    $myUser = "**";
    $myPass = "****";
    $myDB = "***";

    $dbhandle = mssql_connect($myServer, $myUser, $myPass)
            or die("Couldn't connect to SQL Server on $myServer"); 

        $selected = mssql_select_db($myDB, $dbhandle)
            or die("Couldn't open database $myDB"); 

        $query = "SELECT * ";
        $query .= "FROM Item ";
        $result = mssql_query($query, $dbhandle);

    while ($l = mssql_fetch_array($result, MSSQL_ASSOC)) {
    foreach($l AS $key => $value){
        $pos = strpos($value, '"');
            if ($pos !== false) {
                $value = str_replace('"', '\"', $value);
            }
            $out .= '"'.$value.'",';
    }
    $out .= "\n";
    }
    mssql_free_result($result);
    mssql_close($dbhandle);

    header("Content-type: text/x-csv");
    header("Content-Disposition: attachment; filename=export.csv");
    echo $out;
?> 
```

# opengl - 使用片段着色器交换调色板

> ID：14572745
> 
> 赞同：2
> 
> 时间：2013-01-28T22:52:18.977
> 
> 标签：opengl

我正在尝试弄清楚如何使用片段着色器实现调色板交换（查看这篇文章[https://gamedev.stackexchange.com/questions/43294/creating-a-retro-style-palette-swapping-effect-in -opengl](https://gamedev.stackexchange.com/questions/43294/creating-a-retro-style-palette-swapping-effect-in-opengl) ) 我是 open gl 的新手，所以如果有人能解释我的问题，我会很高兴。

这是我试图重现的代码片段：

[http://www.opengl.org/wiki/Common_Mistakes#Paletted_textures](http://www.opengl.org/wiki/Common_Mistakes#Paletted_textures)

我设置了 Open GL 环境，以便我可以创建窗口、加载纹理、着色器并渲染映射到窗口角落的单个正方形（当我调整窗口图像大小时也会拉伸）。

我正在使用顶点着色器将坐标从屏幕空间转换为纹理空间，所以我的纹理也被拉伸了

```
attribute vec2 position;

varying vec2 texcoord;

void main()
{
        gl_Position = vec4(position, 0.0, 1.0);
        texcoord = position * vec2(0.5) + vec2(0.5);
} 
```

片段着色器是

```
uniform float fade_factor;
uniform sampler2D textures[2];

varying vec2 texcoord;

void main()
{
    vec4 index = texture2D(textures[0], texcoord);
    vec4 texel = texture2D(textures[1], index.xy);
    gl_FragColor = texel;
} 
```

`textures[0]`是索引纹理（我要着色的那个）

![索引纹理](../Images/28f65476c910eac7c807c8b2ef32b687.png)

每个像素的颜色值为 (0, 0, 0, 255), (1, 0, 0, 255), (2, 0, 0, 255) ... (8, 0, 0, 255) - 8 种颜色总而言之，这就是为什么它看起来几乎是黑色的。我想使用存储在“红色通道”中的值对我的颜色进行编码。

`textures[1]`是颜色表（9x1 像素，每个像素都有唯一的颜色，放大到 90x10 用于发布）

![在此处输入图像描述](../Images/14649b27e425c60868ade402161dfc86.png)

因此，正如您从片段着色器摘录中看到的那样，我想从第一个纹理中读取索引值，例如 (5, 0, 0, 255)，然后从存储在点 (x=5, y=) 的像素中查找实际颜色值0) 在第二个纹理中。和wiki里写的一样。

但我得到的不是画图：

![结果](../Images/7eee2f114ea0754a1a239cdafca938a4.png)

实际上，如果我明确设置 X 点（如 vec2(1, 0)、vec2(2, 0)、vec2(4, 0) 或 vec2(8, 0)），我发现我无法从第二个纹理访问像素。但是当我使用 vec2(0.1, 0) 或 vec2(0.7, 0) 时，我可以获得颜色。猜猜这是因为纹理空间从我的 9x1 像素归一化为 (0,0)->(1,1)。但是我怎样才能“禁用”该功能并简单地加载我的调色板纹理，这样我就可以问“请给我存储在 (x,y) 处的像素的颜色值”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:25:27.770

> 每个像素的颜色值为 (0, 0, 0, 255), (1, 0, 0, 255), (2, 0, 0, 255) ... (8, 0, 0, 255)

错误的。每个像素都有颜色值：(0, 0, 0, 1), (0.00392, 0, 0, 1), (0.00784, 0, 0, 1) ... (0.0313, 0, 0, 1)。

除非您使用整数或浮点纹理（而您没有使用），否则您的颜色将存储为标准化浮点值。因此，当您从着色器中获取“255”时，您认为它实际上只是“1.0”。

处理这个问题的正确方法是首先将标准化值转换回它们的非标准化形式。这是通过将该值乘以 255 来完成的。然后通过除以调色板纹理的宽度 (- 1) 将它们转换为纹理坐标。此外，您的调色板纹理不应是 2D 的：

```
#version 330 //Always include a version.

uniform float fade_factor;
uniform sampler2D palattedTexture;
uniform sampler1D palette;

in vec2 texcoord;

layout(location = 0) out vec4 outColor;

void main()
{
    float paletteIndex = texture(palattedTexture, texcoord).r * 255.0;
    outColor = texture(palette, paletteIndex / (textureSize(palette).x - 1));
    gl_FragColor = texel;
} 
```

上面的代码是为 GLSL 3.30 编写的。如果您使用的是早期版本，请相应地进行翻译。

此外，您不应该为调色板纹理使用 RGBA 纹理。它只是一个频道，因此请使用`GL_LUMINANCE`或`GL_R8`。

# android - Android webview图像全屏点击

> ID：14572749
> 
> 赞同：2
> 
> 时间：2013-01-28T22:52:33.910
> 
> 标签：android, image, webview

我正在开发一个 Android 应用程序，该应用程序通过 JSON 显示来自数据库的新闻文章。该文章采用 HTML 格式，因为该数据库同时用于 Web 和应用程序。我拥有的代码（如下）效果很好。在网络视图中显示时，网络和手机上的格式相同，但我希望图像是可点击的，因此它们可以在单独的活动中加载，并且用户可以缩放等。

我想我只是在寻找答案时没有使用正确的措辞，因为我找不到与此相关的任何内容。我假设我必须在点击时找到标签并以某种方式捕获 url，然后将其传递给另一个活动。我不确定这是否是最好的方法。对此的任何见解将不胜感激。

```
web = (WebView) findViewById(R.id.WebView01);
final String mimeType = "text/html";
final String encoding = "UTF-8";
web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
web.setScrollbarFadingEnabled(false);
web.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);

web.loadDataWithBaseURL("", product.getString(TAG_CONTENT), mimeType, encoding, ""); 
```

此代码在查询数据库信息的异步​​任务中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:06:01.953

既然是HTML，就可以使用标签的`onclick`属性`img`

```
<img src="myimage.png" onclick="javascript:window.location=this.src;" /> 
```

这将打开图像作为当前窗口。

或者您可以执行与[此答案](https://stackoverflow.com/a/6947952/714151)类似的操作并将 URL 发送到另一个活动。

# jquery - 使用 jQuery [Rails3] 从下拉列表中获取选定的文本

> ID：14572752
> 
> 赞同：0
> 
> 时间：2013-01-28T22:52:38.473
> 
> 标签：jquery, ruby-on-rails-3

**如何正确地使用 jQuery 从下拉列表中获取选定的文本**

这不起作用，可能是因为在 Rails(RoR) 上

```
$("#select_tag_id option:selected").text(); 
```

**jQuery 1.8**

提前致谢

# c# - 我不断收到错误消息，“非静态字段、方法或属性需要对象引用”

> ID：14572756
> 
> 赞同：0
> 
> 时间：2013-01-28T22:53:00.177
> 
> 标签：c#, visual-studio-2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:55:40.973

您需要将函数声明为静态：

```
static string function1(string x)
{
    ...
} 
```

当您像示例中那样创建类`Program`时，如果您首先声明该类的实例，则只能调用非静态方法。静态方法不需要`Program`类的实例。在您的示例中，您无需担心任何属性或类变量，因此将函数声明为静态是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:55:44.843

您必须将 static 关键字放在 function1 前面，例如

```
static string function1(string x) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T22:56:24.140

您的 Main() 函数是静态的（每个类一个），而您的 function1() 函数不是（每个实例一个）。在“string function1(string x)”之前添加“static”应该可以为您解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T22:57:10.303

完整代码

```
namespace FirstConsoleApplication
{
class Program
    {   
        static void Main(string[] args)
        {

            Console.WriteLine("Type in an integer vale");
            string num;
            num = Console.ReadLine();
            string result1 = function1(num);
            Console.WriteLine(result1);
            Console.ReadLine();
        }

        static string function1(string x)
        {
            Int32 isnumber = 0;
            bool canConvert = Int32.TryParse(x, out isnumber);
            string returnValue;
            if (canConvert == true)
            {
                int val3 = Int32.Parse(x);

                switch (val3)
                {
                    case 50:
                        returnValue = "yep its 50";
                        break;
                    case 51:
                        returnValue = "hmmm.... its 51... what are you gonna do about that??";
                        break;
                    case 52:
                        returnValue = "lets not get sloppy now...";
                        break;
                    default:
                        returnValue = "nope, its definately something else";
                        break;
                };

            }
            else
            {
                returnValue = "Thats not a number";
            };
            return returnValue;
        }
    }
} 
```

# shell - 如何设置 vimrc 标签以使用 shell 环境变量

> ID：14572764
> 
> 赞同：8
> 
> 时间：2013-01-28T22:53:32.463
> 
> 标签：shell, vim, vi

我试过但失败了，需要专家的帮助。在 .vimrc 我有以下内容：

`set tags=/sandbox/myNameIsSam/tags`

这工作得很好。在 gvim 中，我可以加载标签文件，一切都很棒。但是，我希望每个用户都有自己的项目标签文件。如何和为什么在这里并不重要。下面的设置似乎没有做我需要的。有人可以帮忙吗？

```
let projectTagFile='/sandbox/'.$USERNAME.'/tags'
set tags=projectTagFile 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T23:27:45.133

你应该得到用户名`$USER`不是`$USERNAME`

重要的是，在这种特殊情况下，您不能使用`set`设置此选项，因为它只允许您将其设置为单个文字值。但是，通过，您可以使用 Vimscript 使用函数来获取值，例如，或者在您的情况下，通过连接（[在此处](http://learnvimscriptthehardway.stevelosh.com/chapters/19.html)`let`阅读有关选项的更多信息）。试试这个：

```
let &tags='/sandbox/'.$USER.'/tags' 
```

要检查是否`tags`设置正确，您可以执行：

```
:set tags? 
```

或者，对于完全限定的路径：

```
:echo &tags 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T03:22:58.087

我一直在做类似的事情

```
let tagfile = '/sandbox/' . $USERNAME . '/tags'
execute 'set tags=' . tagfile 
```

但我现在更喜欢@Kent 的解决方案。我从来没有想过那样做。

# zend-framework - 我应该阅读什么来熟悉使用 SocialEngine 进行开发？

> ID：14572771
> 
> 赞同：2
> 
> 时间：2013-01-28T22:54:04.983
> 
> 标签：zend-framework, web, socialengine

我能够使用 PHP、HTML、CSS、JavaScript 和 SQL，而且使用 Drupal 也不错。最近，我获得了一位客户，希望我进行一些 SocialEngine 4.xxx 定制。我的客户知道我没有使用 SocialEngine 的经验，但有能力使用底层技术（因此我也给了他较低的小时费率。）

我没有在网上看到很多面向像我这样的人的东西。我在哪里可以阅读有关修改 SocialEngine 的内容，它假设对 SocialEngine 的了解很少，但具备编程能力？

例如，我今天花了几个小时试图弄清楚如何根据会员级别有条件地显示一个块。使用 GUI 似乎无法做到这一点。没问题，我[发现了一些](https://stackoverflow.com/questions/11520448/understanding-user-permissions-and-how-to-apply-it)看起来我可以让它工作的代码，它可以获取用户的会员级别。但是，我把这个放在哪里？老实说，我想在块级别上拥有它。SocialEngine 似乎不允许我将任意 PHP 代码放入一个块中，即使它这样做了，那会是“SocialEngine”的方式吗？像这样的所有自定义逻辑都应该是 SocialEngine 中的一个模块，使用钩子附加到事件吗？

非常感谢你看我的问题，

-Brian J. Stinar-

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-10T22:56:37.533

我写了一篇关于通过模型访问数据、创建小部件和模块的博客。[您可以在http://garbtech.co.uk](http://garbtech.co.uk) / [http://socialenginetutorials.co.uk](http://socialenginetutorials.co.uk)找到关于社交引擎的一般结构（都是同一个博客）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T10:58:43.340

不幸的是，没有关于 SocialEngine PHP API 的书籍或官方文档。您唯一的选择是在 Internet 上查看各种（不完整的）指南，或者研究它们的源代码并自己解决问题。

# shell - pip 没有卸载软件包

> ID：14572773
> 
> 赞同：35
> 
> 时间：2013-01-28T22:54:10.680
> 
> 标签：shell, python-2.7, pip

**背景**

我正在做一个学术项目（基本上）分析一些“谁跟随谁”图表，并希望使用 Python Twitter API 包之一从 Twitter 获取一些真实数据（通过构建一些小数据集）以测试一些想法我有。

我有点粗心，安装了两个包：

a) `python-twitter0.8.2`( [http://pypi.python.org/pypi/python-twitter/0.8.2](http://pypi.python.org/pypi/python-twitter/0.8.2) )

b）`twitter1.9.1`（[http://pypi.python.org/pypi/twitter/1.9.1](http://pypi.python.org/pypi/twitter/1.9.1)）

(a)`python-twitter`在 pypi 中被调用， (b) 被调用`twitter`，所以我将这样称呼它们。

这两个都`import twitter`在 Python 解释器中被调用，但是当我写那一行时，我总是得到`twitter`一个（如果我能弄清楚如何使用这个`python-twitter`，我将能够继续，但仍然有相同的底层问题）。

* * *

**问题**

因为我不需要这个`twitter`包，所以我决定用 pip 卸载它：

`$ sudo pip uninstall twitter`

这给出了输出：

```
Uninstalling twitter:
Proceed (y/n)? y
  Successfully uninstalled twitter 
```

（实际上，我尝试了同样的事情`python-twitter`并得到了类似的回应）。

但是，在运行时`pip freeze`，这两个包都会显示在已安装列表中！事实上，我仍然可以`import twitter`在解释器中成功使用该命令。显然这些软件包尚未卸载。我很想知道如何卸载它们！

* * *

**其他信息**

我正在使用 Python 2.7 和 Ubuntu 12.04

当运行 IDLE 而不是 shell 解释器时，我键入`help('modules')`，既不`twitter`也不`python-twitter`显示在列表中。输入`help('modules')`shell 解释器时，我得到一个分段错误错误，解释器崩溃。这是错误：

```
>>> help('modules')

Please wait a moment while I gather a list of all available modules...

/usr/lib/python2.7/dist-packages/gobject/constants.py:24: Warning:
  g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  import gobject._gobject
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning:
  g_boxed_type_register_static: assertion `g_type_from_name (name) == 0' failed
  from gtk import _gtk

** (python:2484): CRITICAL **: pyg_register_boxed: assertion `boxed_type != 0' failed
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: cannot register
existing type `GdkDevice'
  from gtk import _gtk
/usr/lib/python2.7/dist-packages/gtk-2.0/gtk/__init__.py:40: Warning: g_type_get_qdata: 
assertion `node != NULL' failed
  from gtk import _gtk
Segmentation fault (core dumped) 
```

* * *

**为什么其他问题没有为我解决这个问题：**

我查看了[pip freeze lists uninstalled packages](https://stackoverflow.com/questions/11640530/pip-freeze-lists-uninstalled-packages)上的类似帖子，但没有遇到同样的问题。

```
$ sudo which pip
/usr/bin/pip
$ which pip
/usr/bin/pip 
```

这是相同的输出。此外，`$ sudo pip freeze`给出与 相同的输出`$ pip freeze`。

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-01-28T23:04:56.160

您可以随时手动删除包；你可以运行：

```
sudo rm -rf /usr/local/lib/python2.7/dist-packages/twitter 
```

从您的`dist-packages`目录中删除该软件包。您可能必须编辑`easy-install.pth`同一目录中的文件并`twitter`从中删除条目。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-11-17T09:20:16.457

虽然 Martin 的解决方案有效，但作为一种变通方法，它并没有提供直接的答案。Ubuntu 的 Ubuntu 版本 (12.04) 的 pip 版本是：

```
 python-pip (1.0-1build1) 
```

这也是 Debian Wheezy 的相同版本。这个版本有一个奇怪的错误，导致包不能被删除。
如果您使用脚本从上游获取 pip，`get-pip.py`您将拥有一个可以删除 pacakges 的固定版本的 pip（截至现在 v. 1.5.6）。

# 更新

Python 的 pip 确实是一个快速移动的目标。所以使用 Debian 或 Ubuntu 的 pip 肯定会有 bug。 *请*不要使用那些发行版的`pip`. 而是从上游安装 pip。

如果您想将 pip 安装的包注册为系统包，我真的建议您也使用[stdeb](https://pypi.python.org/pypi/stdeb)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-01-17T18:20:52.657

我在升级软件包时遇到了困难，因为 pip 无法成功卸载它。我不得不删除 .egg-info 和 /usr/lib/python2.7/dist-packages 中的文件夹，然后我尝试使用 --upgrade 进行安装，它成功了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-10-09T10:19:18.543

对我来说，这是因为我正在跑步`pip freeze`，这给了我与`sudo pip freeze`.

由于我是使用卸载的`sudo`，它没有在“非`sudo`”会话中卸载它。卸载没有`sudo`修复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-07T17:06:14.230

在我的情况下（将 pyusb 0.4x 移动到 1.0x），使用 apt-get remove python-usb 删除旧包并通过 python setup.py 手动安装手动下载的包。不漂亮，但工作。

# c# - 静态方法可以在.NET中实现接口吗

> ID：14572778
> 
> 赞同：1
> 
> 时间：2013-01-28T22:54:37.233
> 
> 标签：c#, .net, inheritance

> **可能重复：**
> [为什么 C# 不允许静态方法实现接口？](https://stackoverflow.com/questions/259026/why-doesnt-c-sharp-allow-static-methods-to-implement-an-interface)

我有这样的代码说我无法实现静态方法：

```
public static class AuxiliaryHelper : IAuxiliaryHelper
{
    /// <summary>
    /// Writes the response.
    /// </summary>
    /// <param name="jsonObj">The json object that gets turned in JSON and written out.</param>
    public static void WriteResponse(this object jsonObj)
    { .... 
```

我可以得到一个接口吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:00:14.313

**简短的回答：**没有。

**更长的答案：**

这个概念真的没有任何意义。接口的重点是定义一个基本类型，该类型描述了各种实现的契约。我可以使用静态类型声明一个变量`IFoo`，它告诉编译器*我不知道它在运行时会是什么类型，但我向你保证它会有一组特定的方法。*- 因此，编译器将允许您调用这些方法，这些方法将在运行时解析。

静态*方法*总是绑定到一个且只有一个类，因此没有可引用的*实例*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T22:58:16.830

不，接口不能有静态方法。实现接口的类需要将它们全部实现为实例方法。静态类不能有实例方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:15:49.213

我注意到，您使用了*扩展*方法。也许这种变化可以帮助你。

元代码

```
public static class HelperExtensions
{
    //Note the interface goes here 
    public static void WriteResponse(this IAuxiliaryHelper helper, 
                                     object jsonObj)
    { 
        //omn nom nom
    }
}

//somewhere else - usage
IAuxiliaryHelper h = new Foo();
h.WriteResponse(new JsonObject()); 
```

# java - Java中的未知编译器错误，我认为这是范围问题

> ID：14572780
> 
> 赞同：2
> 
> 时间：2013-01-28T22:54:45.387
> 
> 标签：java, compiler-errors, scope

我正在实现类的广度优先和深度优先搜索，编译时出现我无法理解的错误。错误是：

> 符号：变量aList
> 位置：类java.lang.Object for（graphNode节点：map.get（i）.aList）{

aList 变量是一个 TreeSet，它存储在每个节点中，其中包含该节点在相应图中附加到的任何节点。我在上面的 main 方法中使用了完全相同的语法，它没有给出任何错误。此外，当我在 traverse 方法中打印出地图中的所有节点时，它打印的是整数键，而不是它应该具有的 graphNode 值。我现在很困惑。谢谢你的帮助。

```
import java.util.*;
import java.io.*;

public class HW1 {

public static void main (String[] args) throws Exception {
    Scanner sc = new Scanner(new File(args[0]));
    sc.useDelimiter("(\\s)"); // divide up by whitespcae

    TreeMap<Integer, graphNode> map = new TreeMap<Integer, graphNode>();
    int totalNodes = Integer.parseInt(sc.next());
    int totalEdges = Integer.parseInt(sc.next());

    // Fill up the map with nodes
    for(int i = 1; i <= totalNodes ; i++) {
        map.put(i, new graphNode(i, null, 10000));

    }

   // Add all the edges to the adjacency list
    while(sc.hasNext()){
        int start = Integer.parseInt(sc.next());
        int end = Integer.parseInt(sc.next());
         graphNode startNode = map.get(start);
         graphNode endNode = map.get(end);

         if(!startNode.aList.contains(endNode)){
            startNode.aList.add(endNode);
         }
         if(!endNode.aList.contains(startNode)){
            endNode.aList.add(startNode); 
        }
    }

    for(int i = 1; i <= map.size(); i++){
        for(graphNode node: map.get(i).aList){
            System.out.print(node.value+" ");
        }
        System.out.println("");
    } 

    traverse(map);

}

public static void traverse(TreeMap map){

        for(int i = 1; i <= map.size(); i++){
            for(graphNode node: map.get(i).aList){
                System.out.print(node.value+" ");
            }
            System.out.println("");
        } 

}

}
import java.util.*;
import java.io.*;

public class graphNode implements Comparable<graphNode> {
int value;
int distance;
graphNode prev;
TreeSet<graphNode> aList;
String color;

public graphNode(int value, graphNode prev, int distance) {
    this.value = value;
    this.prev = prev;
    this.distance = distance;
    aList = new TreeSet<graphNode>();
    String color = "white";
}

public String toString() {
    return value + "";
}

public int compareTo(graphNode other) {
    if (this.value < other.value){
        return -1;
    }else if (this.value == other.value){
        return 0;
    }else{
        return 1;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T22:59:46.640

中`main`，`map`是一个

```
TreeMap<Integer, graphNode> map = new TreeMap<Integer, graphNode>(); 
```

但在`traverse`，它只是一个`TreeMap`。所以`get(i)`返回一个`Object`，而不是一个`graphNode`。

An`Object`没有`aList`字段。

宣布

```
public static void traverse(TreeMap<Integer, graphNode> map){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T23:01:29.817

在您的`traverse()`方法中，地图被声明为`TreeMap map`. 因此，您使用的是原始（非通用）TreeMap 类型，编译器不知道存储在映射中的键和值的类型。它只知道它们是对象实例。

将地图声明为`TreeMap<Integer, graphNode>`or even `Map<Integer, graphNode>`，一切都会好起来的。

当您使用它时，将其重命名`graphNode`为`GraphNode`. Java 中的类以大写字母开头。

# ios - 等待 10 秒后无法返回 - UIWebView loadHTMLString

> ID：14572788
> 
> 赞同：5
> 
> 时间：2013-01-28T22:55:22.873
> 
> 标签：ios, uiwebview

`UIWebView`当我使用以下代码加载 a时：

```
NSString *helpText = [NSString stringWithFormat:@"Lorem Ipsum"];

[self.helpWebView loadHTMLString:[NSString stringWithFormat:@"<html><head></head><body stlye=\"background-color: transparent;\"><div align='justify' style=\"color: #000000; font-family: Helvetica; font-size: %fem;\">%@</div></body></html>", fontSize, helpText] baseURL:[NSURL URLWithString:@""]]; 
```

我收到此错误，但仅在我的应用程序中第一次`WebView`加载 a 时：

```
void SendDelegateMessage(NSInvocation *): delegate (webView:decidePolicyForNavigationAction:request:frame:decisionListener:) failed to return after waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode 
```

文本将加载，但仅在 10 秒后。但是 UI 被阻止了 10 秒。当我浏览应用程序时，其他（“稍后”）`UIWebViews`将立即加载，并且与此特定无关`UIWebView`，即如果我先到`UIWebView`A，然后再到`UIWebView`B，A 将在 UI 阻塞 10 秒后加载，B 将立即加载. 如果它从 B 开始然后转到 A，B 将在 10 秒后加载，A 将立即加载。因此，只有第一个`UIWebView`加载的会产生问题。

而且我真的只加载上面的html。几十个字符，没有 JScript，没有大表格，没有有趣的 html 内容。如果我加载一个空白的 HTML 字符串，它甚至会阻止 UI 并报告错误消息。

我没有设置任何委托的东西或类似的东西。我`UIWebView`在 Interface Builder 中创建了，通过属性将它连接到标题，我正在使用它`loadHTMLString`来获取内容。

重要提示：我目前只能使用模拟器，所以我无法预测这是否只是模拟器问题。如果你知道，请告诉我。目前，我无法在真实设备上进行测试。然而，模拟器不应该因为资源而出现此错误。我有一台当前的 MacBook Air，几乎没有安装任何额外的程序（Mac OS X Lion 的“全新安装”）。

另一点：我使用的唯一原因`UIWebView`是我需要为文本提供充分的理由。如果这能以任何其他方式工作，也会对我有所帮助。至少从 Android 开发中，我知道除了`WebView`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T22:38:09.567

我认为今天的更新（iOS 6.1 SDK）解决了这个问题，我也认为它与模拟器有关。我认为这是关于干扰来自 skpaymenttransaction 和其他 UIWebView 的传出请求......我不确定任何事情，但是......

# java - 尝试编写 java 代码来验证 Graph API

> ID：14572793
> 
> 赞同：1
> 
> 时间：2013-01-28T22:55:57.817
> 
> 标签：java, authentication, azure

我正在尝试编写一个 java 代码来通过 Azure 访问控制服务 (ACS) 使用 OAuth 2.0 对图形 API 进行身份验证。

根据我所读到的内容，它们有四个步骤

1.  生成包含服务主体的 X.509 证书的断言（或者，也可以使用对称密钥）。
2.  将断言呈现给 Azure ACS 安全令牌服务 (STS)。
3.  ACS 接受断言并对服务主体进行身份验证，返回一个铸造的 OAuth 访问令牌（即 JWT 令牌）。
4.  随后的 API 调用提交包括访问令牌。

谁能告诉我，我从哪里开始？例如，我在哪里可以找到 java api，如何使用 X.509 证书生成对称密钥或断言。我想创建一个 java 应用程序，它将在 office 365 中创建用户，并且身份验证是第一步。谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:09:08.540

我认为您需要从这里开始：

[如何使用 Eclipse 通过 Windows Azure 访问控制服务对 Web 用户进行身份验证](http://www.windowsazure.com/en-us/develop/java/how-to-guides/access-control/)- 此示例使用 Windows Live ID 作为身份提供者，类似的技术可用于其他身份提供者（如果适用）。

一旦您的基于 Java 的代码成功验证了用户身份，您就可以继续并进一步实施以与其他提供商建立联系。

# django - 没有 NOT NULL 的 Django NOT IN

> ID：14572794
> 
> 赞同：0
> 
> 时间：2013-01-28T22:56:01.763
> 
> 标签：django, django-orm

我正在为我的开发板软件实现“忽略的用户”功能。该功能必须隐藏由用户忽略的成员启动的线程。我决定将被忽略用户的 ID 获取到 python 列表，如果该列表不为空，则将排除添加到查询集。

```
if ignored_users:
    queryset_threads = queryset_threads.exclude(start_poster_id__in=ignored_users) 
```

但是，exclude 的工作方式存在问题，即“调用 filter() 并在开头添加 NOT”。在这里，过滤器产生以下 SQL：

```
`threads_thread` . `start_poster_id` IN (2, 3, 4, 5) AND `threads_thread` . `start_poster_id` NOT NULL 
```

我如何摆脱那个 NOT NULL ？已删除帐户的成员发布的主题在“start_poster_id”列中为 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:07:47.850

您发布的原始 SQL 似乎不正确。它实际上是无效的。什么是价值`NOT NULL`？

无论如何，`NULL`不是从添加的`.exclude()`。它必须从代码中的其他位置添加。

`.exclude()`只需添加`WHERE NOT`到您指定的参数 - 它不会添加它自己的。

[请参阅此处的 .exclude() 文档。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#exclude)

例如：

```
>>> query = Threads.objects.exclude(id__in=[1,2,3,4]).query.__str__()
>>> query
'SELECT `test_threads`.`id`, `test_threads`.`threads_name` 
FROM `test_threads` 
WHERE NOT (`test_threads`.`id` IN (1, 2, 3, 4))' 
```

您最初的`queryset_threads`过滤任务是针对`NOT NULL`? 与此类似：

```
>>> query = Threads.objects.filter(id__isnull=False)
>>> query = query.exclude(id__in=[1,2,3,4]).query.__str__()
>>> query
'SELECT `test_threads`.`id`, `test_threads`.`threads_name` 
FROM `test_threads` 
WHERE (`test_threads`.`id` IS NOT NULL 
AND NOT (`test_threads`.`id` IN (1, 2, 3, 4)))' 
```

# sql - 更新 SSRS 报表服务器表的数据源登录凭据

> ID：14572796
> 
> 赞同：1
> 
> 时间：2013-01-28T22:56:05.640
> 
> 标签：sql, sql-server-2008, tsql, reporting-services, ssrs-2008

我已经向 SSRS 报告服务器添加了许多数据源登录无效的报告，我想使用脚本更新用户名和密码来更新它，这样我就不必单独更新每个报告。

但是，据我所知，这些字段存储为图像并已加密。我找不到有关它们如何加密或如何更新它们的任何信息。用户名和密码似乎存储在 dbo.DataSource 表中。有任何想法吗？我希望脚本在 SQL 中运行。

登录信息示例：

![报表管理器示例](../Images/f4426eb9f150791dbf7c3a553a1229c0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:35:48.963

我对破解 Reporting Services 表非常、非常、非常谨慎。可能有人可以提供一种可靠的方法来执行您的建议，但我觉得这是破坏整个安装的好方法。

我的建议是您使用 Reporting Services API 并编写一个小型应用程序来为您执行此操作。API 的功能非常全面——几乎可以从 Report Manager 网站做任何事情，您可以使用 API 进行操作——而且使用起来相当简单。

以下代码并不完全符合您的要求——它将报告指向一个共享数据源——但它应该向您展示您需要做什么的基础知识。

```
 public void ReassignDataSources()
    {
        using (ReportingService2005 client = new ReportingService2005)
        {
            var reports = client.ListChildren(FolderName, true).Where(ci => ci.Type == ItemTypeEnum.Report);

            foreach (var report in reports)
            {
                SetServerDataSource(client, report.Path);
            }
        }
    }

    private void SetServerDataSource(ReportingService2005 client, string reportPath)
    {
        var itemSources = client.GetItemDataSources(reportPath);
        if (itemSources.Any())
            client.SetItemDataSources(
                reportPath,
                new DataSource[] { 
                        new DataSource() { 
                            Item = CreateServerDataSourceReference(), 
                            Name = itemSources.First().Name 
                        } 
                    });
    }

    private DataSourceDefinitionOrReference CreateServerDataSourceReference()
    {
        return new DataSourceReference() { Reference = _DataSourcePath };
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:15:45.503

我怀疑这是否直接回答了您的问题，但我希望它可以提供一些帮助。 [MSDN 指定凭据](http://msdn.microsoft.com/en-us/library/ms160330.aspx)

出于这个原因，MSDN 还建议使用共享数据源：请参阅[MSDN on shared data sources](http://msdn.microsoft.com/en-us/library/ms156450.aspx#Credentials)

# mysql - MySQL - 带有 LEFT JOIN 优化的 SELECT

> ID：14572798
> 
> 赞同：0
> 
> 时间：2013-01-28T22:56:24.667
> 
> 标签：mysql, left-join

我有 3 张桌子可供选择。其中 2 个始终是必需的（`tbl_notes`, `tbl_clients`），而第 3 个是可选的（`tbl_notes_categories`）。

我一直`LEFT JOIN`在我的查询中使用与主表相关的可疑记录。

但是我没有通过下面的查询得到任何结果。

有人会指出我如何错误地使用 LEFT JOIN 吗？

```
SELECT n.*, c.clientname, nc.notecategoryname 
FROM tbl_notes n, tbl_clients c 
LEFT JOIN tbl_notes_categories nc ON n.categoryid = nc.categoryid 
WHERE n.clientid = c.clientid 
AND c.clientid = 12345 
ORDER BY n.dateinserted DESC 
```

事实上，我得到了一个 sql 错误。 **#1054 - 'on 子句'中的未知列 'n.categoryid'**

`categoryid`确实存在于`tbl_notes`

我可能需要重新了解 JOINS 是如何工作的。我猜我之前不能有 2 个数据库表的 LEFT JOIN 吗？

附带说明一下，我可以预见会有多个必需表和几个可选表的时候。（在这种情况下`tbl_notes_categories`是可选的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:12:24.567

假设该列`categoryid`存在于`tbl_notes`表中......

尝试重写查询以使用`JOIN`语法，而不是使用老式逗号作为连接运算符。（如果问题不是错误命名的列，我怀疑问题在于混合了两种类型的语法......但这只是一个怀疑，我没有理由测试将旧式逗号连接与`JOIN`关键字混合。）

我会这样写声明：

```
SELECT n.*, c.clientname, nc.notecategoryname 
  FROM tbl_notes n
  JOIN tbl_clients c 
    ON n.clientid = c.clientid 
  LEFT
  JOIN tbl_notes_categories nc 
    ON nc.categoryid = n.categoryid
 WHERE c.clientid = 12345
 ORDER BY n.dateinserted DESC 
```

（实际上，我会指定要从中返回的各个列`n`，而不是使用`n.*`，但这只是样式偏好，而不是 SQL 语法要求。）

# mips - 从 .asm 转换为 .s 文件 (Windows/Intel)

> ID：14572801
> 
> 赞同：-3
> 
> 时间：2013-01-28T22:56:31.840
> 
> 标签：mips

对于我的家庭作业，我必须编写一个 MIPS 程序。我在 windows/intel 机器上并使用 notepad++ 编写它，它没有使用 .s 扩展名保存文件的功能。有没有办法使用windows将文件保存为.s？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:00:21.180

在“另存为”对话框中，将“另存为类型：”下拉菜单从“文本文档 (*.txt)”切换到“所有文档 (*.*)”，然后键入文件的全名（例如“myfile.txt”）。 s”）。

# ruby-on-rails - 如何授予用户在 Rails 中显示他们自己的内容或公共内容的权限？

> ID：14572802
> 
> 赞同：1
> 
> 时间：2013-01-28T22:56:32.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这是我当前的控制器：

```
def show

    @lesson = @current_user.lessons.find(params[:id])

    respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @lesson }
    end
end 
```

目前用户只能访问他们自己的课程。如果他们访问 example.com/lessons/[其他人的公共课程 ID]，则不会显示。

`lesson`如果表格的列`public`在其他人的课程中为真，我想允许用户显示他们自己的课程或其他人的课程。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:43:13.453

这似乎有效：

```
def show

    begin
        @lesson = @current_user.lessons.find(params[:id])
    rescue ActiveRecord::RecordNotFound
        @lesson = Lesson.where("public = ? AND id = ?", true, (params[:id]))[0]
    end

    respond_to do |format|
        format.html # show.html.erb
        format.json { render json: @lesson }
    end
end 
```

这有什么不安全或不可持续的吗？

# ruby - 带有 rbenv 的 Ruby 版本一直回落到 1.8.7

> ID：14572805
> 
> 赞同：2
> 
> 时间：2013-01-28T22:56:52.530
> 
> 标签：ruby, rbenv

我按照安装中的所有警告安装了 rbenv 和 Ruby 1.9.3-p362，然后设置`rbenv global 1.9.3-p362`并在运行时可以看到 1.9.3 `ruby -v`。但是，每次我退出终端并重新打开会话时，`ruby -v`都会回到 1.8.7。

rbenv 仍在我的路上，所以我不知道可能出了什么问题。

有什么想法吗？

* * *

更新：

按要求提供的信息：

```
which ruby: /usr/bin/ruby
echo $PATH: /Users/<username>/.rbenv/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:10:38.870

仅供参考，Ruby 1.9.3-p362 由于错误而被 p374 取代，因此您应该升级到 p374 或降级到 p327。

如果你安装了“ruby-build”插件，你可以告诉 rbenv 如何找到 p374 版本：

```
cd ~/.rbenv
git pull
cd plugins/ruby-build/
git pull
rbenv install 1.9.3-p374 
```

这会将 p362 的所有 gem 重新加载到您的 p374 中：

```
rbenv global 1.9.3-p362
gem list | awk '{print $1}' > ~/.rbenv/gem_list
rbenv global 1.9.3-p374
xargs gem install < ~/.rbenv/gem_list 
```

它会搅动并吐出大量的 gem 安装空话，然后您应该准备好使用以下命令删除 p362：

```
rbenv uninstall 1.9.3-p362 
```

# javascript - 加载 Mustache.js/Handlebars.js 模板跨域或 CDN 的最佳实践

> ID：14572811
> 
> 赞同：2
> 
> 时间：2013-01-28T22:57:25.493
> 
> 标签：javascript, ajax, cross-browser, cross-domain, mustache

这实际上不是 Mustache.js 或 Handlebars.js 特定的问题，但如果您尝试优化 Web 应用程序的性能加载模板，这两个框架都会遇到这个问题。

现在我正在从与应用程序的其余部分相同的域加载模板，但如果可能的话，我想从 CDN 加载我的模板。最大的问题是我无法跨浏览器无法通过 AJAX 加载文本文件。

我可以尝试哪些其他方法来优化单个模板跨域的加载时间？

我一直致力于优化加载顺序**（工作）**

将模板作为 xdomain 脚本文件加载到头部**（失败）**

```
<script type='text/html' src="http://domain.cdn.com"></script> 
```

我认为对 COR 的支持将仅限于浏览器的数量。

使用 YQL 会很慢。

我可以以某种方式做 JSONP 所做的事情，但是使用*XML*、*XHTML*或*HTML*，显然没有 javascript 回调？也许模板的末尾可能有一个小的回调函数，但我不想包装整个东西，需要将它作为 json 转义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:08:27.760

一个想法从我的脑海中浮现。

使用 RequireJS[将模板构建到单个文件](http://requirejs.org/docs/optimization.html)中。每个模板都将被包装为一个定义模块，并且该模板将被正确地转义为一个字符串。

因为该文件可以`.js`正常从另一个域加载

> 因此，如果文本插件确定对资源的请求在另一个域上，它将尝试使用脚本标记访问资源的“.js”版本。跨域允许脚本标记 GET 请求。资源的 .js 版本应该只是一个带有 define() 调用的脚本，它返回模块值的字符串。
> 
> 示例：如果资源是 'text!example.html' 并且解析为另一个 Web 域上的路径，则文本插件将为 'example.html.js' 执行脚本标记加载。

[https://github.com/requirejs/text#xhr-restrictions](https://github.com/requirejs/text#xhr-restrictions)

如果您还[编译了您的 Mustache/Handlebars 模板](http://handlebarsjs.com/precompilation.html)，它的性能会更高。这是[一个包含在定义调用中的已编译 Handlebars 模板的示例](http://pastebin.com/S86zZKNC)。Handlebars 编译器负责输出，然后 RequireJS 构建器将为您将所有输出包含在一个文件中。

同样，没有尝试过这个解决方案，但可能会让你走上正轨。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T18:04:39.863

我知道我正在尝试回答一个老问题。通过将模板字符串嵌入到静态 HTML 文档中，这是非常可行的，该文档包含在属性 type="text/x-handlebars-template" 的元素中。这被称为微模板。由于 type 属性，浏览器不会尝试执行脚本。例如 -

```
<script id="list-template" type="text/x-handlebars-template">
    <p>YUI is brought to you by:</p>

    <ul>
        {{#items}}
            <li><a href="{{url}}">{{name}}</a></li>
        {{/items}}
    </ul>
</script> 
```

完成后，我们必须编译然后通过数据对象渲染它。

```
<script>
YUI().use('handlebars', 'node-base', function (Y) {
// Extract the template string and compile it into a reusable function.
var source   = Y.one('#list-template').getHTML(),
    template = Y.Handlebars.compile(source),
    html;

// Render the template to HTML using the specified data.
html = template({
    items: [
        {name: 'pie', url: 'http://pieisgood.org/'},
        {name: 'mountain dew', url: 'http://www.mountaindew.com/'},
        {name: 'kittens', url: 'http://www.flickr.com/search/?q=kittens'},
        {name: 'rainbows', url: 'http://www.youtube.com/watch?v=OQSNhk5ICTI'}
    ]
});

// Append the rendered template to the page.
Y.one('body').append(html); 
```

});

有关详细信息，请参阅此处 - [http://yuilibrary.com/yui/docs/handlebars/](http://yuilibrary.com/yui/docs/handlebars/)

# java - 在 Spring 中优先考虑通配符映射

> ID：14572813
> 
> 赞同：2
> 
> 时间：2013-01-28T22:57:35.123
> 
> 标签：java, spring, model-view-controller, controller

我想知道是否可以为通配符映射的控制器设置优先级。例如，我希望能够映射以下内容：

```
/**
/static/**
/resources/** 
```

并让静态和资源优先于包罗万象。我已经尝试让我的全局控制器实现 Ordered 并`ResourceHandlerRegistry.setOrder()`用于后两者（并且还将 viewResolver 上的顺序设置为较低的优先级），但这似乎不起作用。我还没有找到任何真正好的资源来详细说明如何做到这一点。任何人都知道如何，或者甚至可能吗？

感谢您提供的任何帮助。

编辑：配置如下：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "com.mysite" )
public class BaseConfig extends WebMvcConfigurerAdapter {

    /**
     * Allow us to map a custom directory for resources.
     */
    @Override
    public void addResourceHandlers(final ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/static/**").addResourceLocations("/");
        registry.addResourceHandler("/inc/**").addResourceLocations("/WEB-INF/views/ajaxincludes/");
        registry.setOrder(1);
    }

    /**
     * view resolver
     * 
     * @return
     */
    @Bean
    public InternalResourceViewResolver configureInternalResourceViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        resolver.setOrder(2);
        return resolver;
    }

} 
```

# javascript - 更改 div 的颜色和数字 onclick

> ID：14572815
> 
> 赞同：7
> 
> 时间：2013-01-28T22:57:51.937
> 
> 标签：javascript, jquery, html, css

我想在单击 div 时更改 html 元素的颜色和数量。例如，当您单击时`up-arrow`，数字会从 4 变为 5，并且颜色也会发生变化。

```
initial state 
```

# ↑ 4 ↓

```
upvoted 
```

## ↑ *5* ↓

```
down voted 
```

## ↑ *3* ↓

这是我到目前为止所拥有的。
我知道如何在单击时更改 div 的颜色，但是我不知道如何通过单击不同 div 来更改 div 的颜色。然后在此之上添加 +1 或 -1。

[http://jsfiddle.net/64QpR/23/](http://jsfiddle.net/64QpR/23/)

注意-用户：[未受过教育](https://stackoverflow.com/users/1402910/uneducatedguy)的家伙刚刚问了同样的问题，但是他删除了它，因为人们在取笑他，因为他将其称为小提琴而不是jsfiddle。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T23:02:51.633

使用[Knockout](http://knockoutjs.com/)非常简单：

HTML：

```
<div class="arrow-up" data-bind="click: num.upvote.bind(num)"></div>
<h5 data-bind="text: num.value, css: { pink: num.changed }">3</h5>
<div class="arrow-down" data-bind="click: num.downvote.bind(num)"></div> 
```

脚本：

```
function Num(value) {
    this.value = ko.observable(value);
    this.changed = ko.observable(false);
}

Num.prototype.upvote = function() {
    this.value(this.value()+1);
    this.changed(true);
}

Num.prototype.downvote = function() {
    this.value(this.value()-1);
    this.changed(true);
}

var model = {
        num: new Num(1),
}

ko.applyBindings(model); 
```

看看它的实际效果：

[http://jsfiddle.net/bikeshedder/UvKsz/](http://jsfiddle.net/bikeshedder/UvKsz/)

防止多票：

[http://jsfiddle.net/bikeshedder/UvKsz/1/](http://jsfiddle.net/bikeshedder/UvKsz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:02:06.440

你的意思是这样的吗？

```
$('#clickDIV').click(function() {
  var x = $('#zielDIV').text() +1;
  $('#zielDIV').html(x);
}); 
```

# jquery - 专注于 jQuery 自动完成结果（不一定是第一个）

> ID：14572817
> 
> 赞同：4
> 
> 时间：2013-01-28T22:57:56.107
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

我正在努力扩展 jQuery 自动完成功能，以便默认情况下特定项目具有焦点。开箱即用的功能运行良好，但并不完美。使用该`autoFocus`选项，我可以自动关注第一项。

```
$( "#input" ).autocomplete({
    source: "autocomplete.php",
    minLength: 1,
    autoFocus: true
}); 
```

但是，我想更好地控制关注哪个项目。如果用户输入“eng”并且我的来源返回的相关项目是：

*   美式英语
*   英式英语
*   **英语**
*   苏格兰英语

我希望第三个项目**English**默认成为焦点（即，实际上以用户输入开头的项目，即使我想显示其他结果）。理想情况下，我的来源 - autocomplete.php - 将能够指示哪个项目将成为默认焦点。

有任何想法吗？我什至不知道如何开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T02:52:00.023

有一种简单的方法可以实现这一点，即利用[`open`](http://api.jqueryui.com/autocomplete/#event-open)事件。您可以让客户端代码处理选择默认项目，或发送带有您想要选择的项目的额外属性。我将讨论这两个选项：

### 从术语开始的建议重点，根据客户选择：

```
$("input").autocomplete({
    source: /* ... */,
    open: function (event, ui) {
        var menu = $(this).data("uiAutocomplete").menu
            , i = 0
            , $items = $('li', menu.element)
            , item
            , text
            , startsWith = new RegExp("^" + this.value, "i");

        for (; i < $items.length && !item; i++) {
            text = $items.eq(i).text();
            if (startsWith.test(text)) {
                item = $items.eq(i);
            }
        }

        if (item) {
            menu.focus(null, item);
        }
    }
}); 
```

基本上，这个想法是在自动完成的菜单打开时执行以下操作：

*   构建一个正则表达式来查找以搜索词开头的词。
*   遍历每个菜单项并根据正则表达式测试其文本。如果我们找到匹配项，则停止迭代并存储该值。
*   如果我们检索到一个值，请使用[`focus`](http://api.jqueryui.com/menu/#method-focus)菜单上的方法突出显示该项目。

**示例： http:** [//jsfiddle.net/J5rVP/40/](http://jsfiddle.net/J5rVP/40/)（尝试搜索**E** nglish 或**S** cots English）

该代码使用本地数据源，但它应该与远程源一样工作。

* * *

### 以术语开头的建议焦点，在服务器上选择

扩展上面的示例，您可以调整向下发送数据的方式，以便在每次搜索时您的服务器端代码决定选择哪个项目。您可以通过简单地在您希望选择的项目上指定一个附加属性来做到这一点。例如，您的 JSON 响应可能如下所示：

```
[{"label":"American English","select":true},{"label":"British English"},{"label":"English"},{"label":"Scots English"}] 
```

注意`select`“美式英语”的属性。这表示自动完成我们希望默认选择该项目。

然后您将更新您的小部件初始化代码以利用上述`open`事件。虽然这一次我们只是在搜索具有以下`select`属性的项目：

```
$("input").autocomplete({
    source: "autocomplete.php",
    open: function (event, ui) {
        var menu = $(this).data("uiAutocomplete").menu,
            i = 0,
            $items = $('li', menu.element),
            item,
            data;

        for (; i < $items.length && !item; i++) {
            data = $items.eq(i).data("ui-autocomplete-item");
            if (data.select) {
                item = $items.eq(i);
            }
        }

        if (item) {
            menu.focus(null, item);
        }
    }
}); 
```

**示例：http:** [//jsfiddle.net/J5rVP/42/](http://jsfiddle.net/J5rVP/42/)

请注意，在上面的示例中，始终选择*美式英语。*由于每次用户键入时自动完成都会发出一个新请求，因此您的服务器将响应不同的建议数据，因此选择不同的项目。

另外我不了解 PHP，所以我无法谈论如何实现将`select`属性添加到 JSON。看起来它会很简单，甚至可能看起来像第一个示例中使用正则表达式的 JavaScript 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T02:41:12.793

我建议您应该以不同的方式查看映射数据，以便首先显示优先级较高的项目，例如以搜索词开头的单词。

然后，您可以按照 AutoComplete/categories 演示来分离您的结果。这将比尝试创建代码来更改要容易得多`autoFocus`，您的更高级别将位于顶部，重点将从那里开始

[http://jqueryui.com/autocomplete/#categories](http://jqueryui.com/autocomplete/#categories)

您可以使用以下概念对结果进行排名：

```
function rankResult($str, $term){
     /* 0 is first letters, 1 is in first word, 2 is starts another word, 3 is in word not first word*/
     $words=explode(' ', $str); 
     if(stripos($words[0],$term) !==false){
        return stripos($words[0],$term)==0 ? 0 : 1;
     }else{
        $rank=3;
        for( $i=1; $i< count( $words); $i++){
            if(stripos($words[$i],$term)===0){
                $rank=2;
            }
        }
        return $rank;
     }      
}

 $rank = rankResult('English', 'eng'); /*=> 0 */ 
```

循环：

```
 array('American English','British English','English','Scots English','HasEngInIt'); 
```

回来：

```
Array
(
    [0] => Array
        (
            [label] => American English
            [rank] => 2
        )

    [1] => Array
        (
            [label] => British English
            [rank] => 2
        )

    [2] => Array
        (
            [label] => English
            [rank] => 0
        )

    [3] => Array
        (
            [label] => Scots English
            [rank] => 2
        )

    [4] => Array
        (
            [label] => HasEngInIt
            [rank] => 1
        )

) 
```

您必须进行一些排序，以便数据在发送到自动完成之前按等级分组

# ios - iOS 网络活动指示器在添加到主屏幕的 Web 应用程序中持续旋转

> ID：14572825
> 
> 赞同：9
> 
> 时间：2013-01-28T22:58:34.003
> 
> 标签：ios, web-applications, iphone-web-app, iphone-standalone-web-app

* * *

**第二次更新，2014 年 3 月：** Apple 关闭了错误，称他们没有足够的信息，但我的项目是一个大型 PHP 应用程序，我不能（也不会）完全发送给 Apple 让他们重现这个问题。如果有人有一个可共享的、简单的、纯 HTML 应用程序也出现此问题，请告诉我，我将提交它以重新打开错误，希望他们会调查它。

* * *

**第一次更新：**随着越来越多的用户报告这个问题而没有人知道，我已经向 Apple 提交了错误报告。如果不属于 NDA 的内容有任何有用的内容，我将在此处发布。

* * *

安装（jQuery Mobile）网络应用程序后，我正在开发 iOS 6 设备（iPhone 5）的主屏幕，即使页面完全加载，屏幕顶部状态栏中的网络活动指示器也会继续旋转。该行为仅在通过 Web 应用程序打开页面时显示；在同一设备上的 Safari 浏览器中的同一页面不会显示无限旋转的活动指示器。

删除所有 AJAX 调用和页面内容并没有什么不同；即使 Web 应用程序仅包含这样的空页面，问题仍然存在：

```
<html>
    <head></head>
    <body><br/></body>
</html> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T22:58:34.003

通过从主屏幕删除 Web 应用程序，在 Safari 中浏览页面并将其作为新的 Web 应用程序重新添加到主屏幕，解决了该问题。

我的猜测是问题出在 iOS 在将 Web 应用程序添加到主屏幕时存储的元数据（例如`apple-mobile-web-app-capable`和`apple-touch-startup-image`元标记中的值）。

当作为 Web 应用程序访问页面时，至少其中一些信息似乎没有被刷新，即使它开始提供完全不同的内容（例如问题中显示的空白页面）。我知道这对于`apple-mobile-web-app-capable`元标记是正确的；将该标签添加到已安装到主屏幕的站点不会突然使其成为具有原生外观的 Web 应用程序；在将 Web 应用程序添加到主屏幕时，该标签必须存在。

我想我一定是在开发阶段安装了初始 Web 应用程序，其中页面引用了不存在的资源（例如图像、CSS 或 JS 文件），导致 Web 应用程序一直在寻找不存在的内容即使当前网页不再引用它，也可能解释了无限活动指示器的行为。

我不确定这是否是原因，但这似乎是这个问题最有可能的解释。

如果遇到这种情况；检查您的页面引用的所有资源是否存在，然后删除该 Web 应用程序并将其重新添加到屏幕以查看它是否解决了问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T13:10:53.140

我有完全相同的问题，当我从主屏幕上删除书签时它就消失了。但是在 webapp 使用一段时间后，活动指示器再次开始旋转。

在初始加载期间，我在 Apache 的访问日志中没有看到任何失败的请求，并且当活动指示器开始旋转时也没有出现任何请求，因此我认为问题不在于资源不存在。

但是，我在访问日志中看到，iOS Safari 在全屏模式下坚持请求一整批 Apple 特定文件，例如 apple-startup-image 和 apple-startup-icon。这就像谷歌浏览器坚持请求 favicon.ico 一样（叹气！）。可悲的是，当我满足 Safaris 对苹果文件的渴望时，它并没有停止旋转光盘:-(

我已经为我的 web 应用启用了 Mac OSX 网络检查器，它没有记录任何网络活动或其他问题。

在 iPad 的 Apple 手册 ( [http://support.apple.com/manuals/](http://support.apple.com/manuals/) ) 第 12 页中，它指出活动指示器用于“网络和其他活动”。它并没有说 Safari 将指示器用于除网络活动之外的任何其他内容，但也许它是一个提示。

目前，我得出了一个暂时且不令人满意的结论，即这是一个超出 Web 开发人员控制范围的 iOS 问题。我将继续研究它并在此处发布任何新发现。也许我们可以一起揭开谜团:-)

# javascript - 粗文本轮廓

> ID：14572828
> 
> 赞同：1
> 
> 时间：2013-01-28T22:58:37.203
> 
> 标签：javascript, jquery, html, css

我需要为文本添加粗轮廓。我发现了这个技巧

```
text-shadow:
    -1px -1px 0 #00f,
    1px -1px 0 #00f,
    -1px 1px 0 #00f,
    1px 1px 0 #00f; 
```

但它仅适用于 1px 轮廓。轮廓也不是很流畅，大字体上就显得断了。有没有办法制作 2 或 3px 的更厚的平滑轮廓？CSS 或 JS 或 jQuery 插件，任何东西都会有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:29:03.967

**编辑：**您必须使用所有排列，包括像`-1px 3px 0px #00f`or之类的排列`3px -2px 0px #00f`。

```
text-shadow:
  -1px -1px 0 #00f,
  1px -1px 0 #00f,
  -1px 1px 0 #00f,
  1px 1px 0 #00f,

  -2px -2px 0 #00f,
  2px -2px 0 #00f,
  -2px 2px 0 #00f,
  2px 2px 0 #00f,

  -3px -3px 0 #00f,
  3px -3px 0 #00f,
  -3px 3px 0 #00f,
  3px 3px 0 #00f; 
```

# jsf - 命令按钮在对话框中不起作用

> ID：14572831
> 
> 赞同：0
> 
> 时间：2013-01-28T22:58:39.503
> 
> 标签：jsf, primefaces

我的 jsf 页面中有一个带有标记的地图布局。当我点击一个标记时，我可以通过我的数据库检索有关该点的所有信息。当我单击标记时，会显示一个对话框。这是我的布局单元：

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
            <p:growl id="growl" showDetail="true"/>
            <p:gmap center="41.067445,29.047749" zoom="11" type="HYBRID"  model="#{mapTrial.simpleModel}" style="width:100%;height:100%" streetView="true"> 
                <p:ajax event="overlaySelect" listener="#{mapTrial.onMarkerSelect}" update="growl" partialSubmit="true" immediate="true"/>
                <p:gmapInfoWindow rendered="true">  

                    <h:form id="form">  

                        <p:tabView id="tabView" dynamic="false" cache="true" orientation="top" effect="blind" style="font-size: 10px;font-weight: bold;"> 

                            <p:tab id="tab1" title="Proje Bilgileri">

                                <h:panelGrid columns="2" cellpadding="3">  
                                    <h:outputText value="Proje Adı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.projectName}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="Proje Detayı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.projectExp}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="Proje Koordinatları: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.projectCoordLat}, #{mapTrial.projectCoordLong}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="İlçe: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.district}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="Sektör: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.sector}" style="font-weight: bold; font-size: 13px;"/>       

                                    <h:outputText value="İş Durumu: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.workStatus}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Sorumlu Müd. Yard.: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.assistant}" style="font-weight: bold; font-size: 13px;"/>      

                                    <h:outputText value="İhale Adı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.bidName}" style="font-weight: bold; font-size: 13px;"/>      

                                    <h:outputText value="Firma: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.company}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="İhale Bedeli: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.bidCost}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="Ödenen Hak Ediş Tutarı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.costPaid}" style="font-weight: bold; font-size: 13px;"/>   

                                    <h:outputText value="SÜRE BİLGİSİ" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                                    <h:outputText value="Başlangıç Tarihi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.startDate}" style="font-weight: bold; font-size: 13px;"/>  

                                    <h:outputText value="İşin Süresi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.processTime}" style="font-weight: bold; font-size: 13px;"/>     

                                    <h:outputText value="Bitiş Tarihi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.endDate}" style="font-weight: bold; font-size: 13px;"/> 
                                </h:panelGrid>
                            </p:tab>  

                            <p:tab id="tab2" title="Teknik Bilgiler">  
                                <h:panelGrid columns="2" cellpadding="3">  
                                    <h:outputText value="Ada/Parsel: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.parcel}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Plan Durumu: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.planStatus}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Yolun Genişliği: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.roadWidth}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Yolun Uzunluğu: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.roadLength}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Toplam Alan: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.totalArea}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="İlave Bilgi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.extraInfo}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Teklif Birim Fiyat: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.unitOffer}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Yapım Yaklaşık Maliyeti: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.approxCost}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Proje Maliyeti: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.projectCost}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Dosya Kodu: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.fileNu}" style="font-weight: bold; font-size: 13px;"/> 

                                </h:panelGrid>  
                            </p:tab>  

                            <p:tab id="tab3" title="Proje Teşkilatı">  
                                <h:panelGrid columns="2" cellpadding="3">  

                                    <h:outputText value="Şef: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.chef}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Mimar: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.arch}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="İnşaat Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.strEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Peyzaj Mimarı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.landArch}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Elektrik Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.elecEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Jeoloji Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.geoEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Makine Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.machEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Harita Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.mapEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Şehir Plancısı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.planEng}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="İHALE ÖNCESİ TAKİP" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                                    <h:outputText value="Sorumlu Müd. Yard.: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.assistantBefore}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Sorumlu Müh./Mimar: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.engArch}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="UYGULAMACI KONTROL TEŞKİLATI" style="font-weight: bold; font-size: 13px; float: right; font-style: italic"/><p:separator />

                                    <h:outputText value="Müdür Yard.: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.mudYard}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Mimar: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.mim}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="İnşaat Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.ins}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Peyzaj Mimarı: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.peyz}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Elektrik Mühendisi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.elek}" style="font-weight: bold; font-size: 13px;"/> 

                                </h:panelGrid>
                            </p:tab>  

                            <p:tab id="tab4" title="Firma Bilgisi">  
                                <h:panelGrid columns="2" cellpadding="3">  

                                    <h:outputText value="Yetkili Kişi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.compResp}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Görevi: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.compResJob}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Telefon: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.compTel}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="Adres: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.compAddress}" style="font-weight: bold; font-size: 13px;"/> 

                                    <h:outputText value="E-Posta: " style="font-size: 13px;"/>  
                                    <h:outputText value="#{mapTrial.compMail}" style="font-weight: bold; font-size: 13px;"/>     

                                </h:panelGrid>  
                            </p:tab>  

                            <p:tab title="Yorumlar">  
                                <p:commandButton value="Yorum Ekle" id="addCom" onclick="comDialog.show();" style="font-size: 11px;font-weight: bold;">
                                    <p:dialog header="Yorum Ekle" widgetVar="comDialog" resizable="true" showEffect="explode" hideEffect="explode" appendToBody="true" modal="true" closable="true">
                                        <p:inputTextarea rows="6" cols="33" />
                                        <br />
                                        <p:commandButton value="Ekle" action="#{mapTrial.saveComm}" immediate="true" style="font-size: 12px;font-weight: bold;"/>
                                        <p:commandButton value="Vazgeç" async="true" onclick="comDialog.hide();" style="font-size: 12px;font-weight: bold;"/>
                                    </p:dialog>
                                </p:commandButton>  
                            </p:tab> 

                            <p:tab title="Dosyalar">  
                                <h:panelGrid columns="2" cellpadding="10">  
                                    <p:graphicImage value="/images/pdf.png" />  
                                    <h:outputText value=""/>
                                </h:panelGrid>  
                            </p:tab> 

                            <p:tab title="Resimler">  
                                <h:panelGrid columns="2" cellpadding="10">  
                                    <p:graphicImage value="/images/pdf.png" />  
                                    <h:outputText value=""/>
                                </h:panelGrid>  
                            </p:tab> 

                        </p:tabView>
                        <br />
                        <center>
                            <h:outputText value="Toplam Proje Sayısı: #{mapTrial.total}" style="font-size: 13px; color: red"/>  
                        </center>
                    </h:form>

                </p:gmapInfoWindow>
            </p:gmap>

        </p:layoutUnit> 
```

我的问题在于那部分：

```
<p:tab title="Yorumlar">  
                                <p:commandButton value="Add Comment" id="addCom" onclick="comDialog.show();" style="font-size: 11px;font-weight: bold;">
                                    <p:dialog header="Add Comment" widgetVar="comDialog" resizable="true" showEffect="explode" hideEffect="explode" appendToBody="true" modal="true" closable="true">
                                        <p:inputTextarea rows="6" cols="33" />
                                        <br />
                                        <p:commandButton value="Add" action="#{mapTrial.saveComm}" immediate="true" style="font-size: 12px;font-weight: bold;"/>
                                        <p:commandButton value="Cancel" async="true" onclick="comDialog.hide();" style="font-size: 12px;font-weight: bold;"/>
                                    </p:dialog>
                                </p:commandButton>  
                            </p:tab> 
```

当我打开选项卡并单击按钮时，它会显示添加评论对话框。但是当显示对话框并单击添加按钮时，什么也没有发生。我尝试删除 appendToBody 和模型属性，但那时它甚至没有显示评论对话框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:24:05.320

移动`<p:dialog>`外部`<h:form>`并在内部添加一个`<h:form>`。

```
<h:form>
    <!-- JSF code... -->
    <p:tab>
        <!-- more JSF code... -->
        <!-- the button that gives you problems -->
        <!-- the p:dialog doesn't go inside the button =\ -->
        <p:commandButton value="Add Comment" id="addCom" onclick="comDialog.show();"
            style="font-size: 11px;font-weight: bold;">
        </p:commandButton>
    </p:tab>
    <!-- more and more JSF code... -->
<h:form>
<!-- the dialog goes here -->
<p:dialog header="Add Comment" widgetVar="comDialog" resizable="true"
    showEffect="explode" hideEffect="explode" appendToBody="true" modal="true"
    closable="true">
    <!--the p:dialog must have its own h:form -->
    <h:form>
        <p:inputTextarea rows="6" cols="33" />
        <br />
        <p:commandButton value="Add" action="#{mapTrial.saveComm}" immediate="true"
            style="font-size: 12px;font-weight: bold;"/>
        <p:commandButton value="Cancel" async="true" onclick="comDialog.hide();"
            style="font-size: 12px;font-weight: bold;"/>
    </h:form>
</p:dialog> 
```

* * *

下次请不要贴代码墙，而是提供[SSCCE](http://sscce.org)来分析您的问题。我们不需要阅读所有代码就能找到问题所在。

# android - Android 应用加载屏幕背景图片加载时间过长

> ID：14572833
> 
> 赞同：7
> 
> 时间：2013-01-28T22:58:42.840
> 
> 标签：android

我正在开发一个安卓应用程序。就我而言，当应用程序启动时，它会显示一个临时屏幕，而 AsyncTask 在后台获取数据。此临时屏幕仅包含背景图像 (20 KB)。但是在这种背景下需要一段时间才能加载。因此，当我启动我的应用程序时，我只看到一个白屏，过了一会儿它显示了背景图像。关于如何摆脱这个问题并从头开始显示背景图像的任何想法这是开始屏幕的 xml 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/start"
    android:orientation="vertical" >

</LinearLayout> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-22T16:15:23.087

我有同样的问题。这个了不起的人有[解释](http://cyrilmottier.com/2013/01/23/android-app-launching-made-gorgeous/)。

TL;DR（只有在链接出错的情况下，我才会去阅读它）：“预览窗口的目的是为用户提供应用程序启动的即时反馈，但它也让您的应用程序有时间进行自我初始化。当您的应用程序已准备好运行，系统会移除该窗口并显示您的应用程序的窗口和视图。” 您可以在主题中进行设置。至少，我的设置：

/res/values/styles.xml 中的主题：

```
<resources>

    <!-- Base application theme. -->
    <style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
        <item name="android:windowBackground">@drawable/app_bg</item>
    </style>
    <!-- Base theme for any other activity other than your starting one. -->
    <!-- If only one activity, just set the splash bg as its bg -->
    <style name="MyTheme.MainActivity" parent="@style/AppTheme">
        <item name="android:windowBackground">@drawable/app_splash_bg</item>
    </style>

</resources> 
```

AndroidManifest.xml：

```
...
<activity
    android:name=".MainActivity"
    android:theme="@style/MyTheme.MainActivity"
    ...
    <!-- Set the MainActivity theme, can be skipped if you only have -->
    <!-- one activity and did not setup anything other than your base theme --> 
```

MainActivity.java：

```
@Override
protected void onResume() {
    super.onResume();
    MainActivity.this.getWindow().setBackgroundDrawableResource(R.drawable.app_bg);
} 
```

基本上，你为你的开始活动设置了一个带有启动背景的主题。然后，您在`onResume`所述启动活动期间将背景设置为正常背景。

此外，您可以在启动活动主题中注释掉`windowBackground`声明以在启动时查看原始（我假设）“丑陋的白色”屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:06:58.047

在您的临时屏幕中，首先您应该执行 setContentView()，然后调用 AsyncTask（带有进度条，在 onPostExecute() 上被关闭）。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // Now start the AsyncTask.

} 
```

另外，请注意，当您从一项活动过渡到另一项活动时，会有一些延迟；这是你无法消除的。我会建议你只进行一次活动。

# java - 在 Java 中解密 Blowfish/CBC

> ID：14572834
> 
> 赞同：1
> 
> 时间：2013-01-28T22:58:41.997
> 
> 标签：java, perl, encryption, blowfish

我有解密字符串的 Perl 代码，我想在 Java 中做同样的事情。这是 Perl 代码：

```
my $c = Crypt::CBC->new( -key => $keyString, -cipher => 'Blowfish', -header => 'randomiv');
return $c->decrypt_hex($config->{encrypted_password}) 
```

这是我对 Java 代码的尝试：

```
Cipher cipher = Cipher.getInstance("Blowfish/CBC/PKCS5Padding");

// setup an IV (initialization vector) that should be
// randomly generated for each input that's encrypted
byte[] iv = new byte[cipher.getBlockSize()];
new SecureRandom().nextBytes(iv);
IvParameterSpec ivSpec = new IvParameterSpec(iv);

// decrypt
SecretKey secretKey = new SecretKeySpec(Base64.decodeBase64(keyString), "Blowfish");
cipher.init(Cipher.DECRYPT_MODE, secretKey, ivSpec);
byte[] decrypted = cipher.doFinal(Base64.decodeBase64(input));
return Hex.encodeHexString(decrypted); 
```

我得到：`javax.crypto.BadPaddingException: Given final block not properly padded`。但据此[，](http://search.cpan.org/~lds/Crypt-CBC-2.24/CBC.pm)库`Crypt CBC`用作`PKCS5`默认填充。

另外，我最后是在做十六进制编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:07:14.330

您遇到的问题之一是您生成了一个随机 IV，而不是导入用于加密的 IV。您是否有权访问加密时使用的 IV？会不会是在密文的开头？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:12:26.737

I don't do Perl, so I'm not quite sure if my response is valid. Base64 is probably not the right decoding you're looking for.

For creating your SecretKeySpec, try doing something like:

```
SecretKey secretKey = new SecretKeySpec(keyString.getBytes("ASCII"), "Blowfish"); 
```

For decoding the text, check out Hex.decodeHex(char[]) which can be found at [http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Hex.html](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Hex.html) ... so your code might look something like this:

```
byte[] decrypted = cipher.doFinal(Hex.decodeHex(input.toCharArray()));

String unencryptedStuff = new String(decrypted); 
```

# android - Roboguice Fragment 传球数据

> ID：14572841
> 
> 赞同：0
> 
> 时间：2013-01-28T22:59:42.590
> 
> 标签：android, android-fragments, fragment, roboguice

我在我的 Android 应用程序中使用 RoboGuice，我不确定如何在 Activity 和 Fragment 之间传递对象？

我知道一种方法，您可以在其中序列化并传入捆绑包。在这篇文章 中提到的评论之一中[如何在片段之间传递数据](https://stackoverflow.com/questions/5194548/how-to-pass-data-between-fragments/14572708#14572708)

> *如果您使用 Roboguice，您可以使用 Roboguice 中的 EventManager 来传递数据，而无需使用 Activity 作为接口。这是相当干净的IMO。*

我不知道该怎么做，谁能举个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:21:19.930

由于 Fragment 包含在 Activity 中，并且您通常会引用它，因此 Fragment 公开 Activity 可以调用的特定构造函数或 setter 方法是很常见的。不需要序列化。换一种方式（Fragment -> Activity），Fragment 应该公开一个 Activity 可以监听事件的接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:34:46.577

我不认为这种方法是*roboguice*独有的。

我更喜欢事件传播，而不是 dmon 概述的（完全可以接受的）回调方法。[我在这里](https://stackoverflow.com/posts/comments/19988354)提供了一个迷你指南……我怀疑 roboguice 的版本非常相似。2个组件（活动+片段），片段广播“我做了这个”消息，而活动声明“我正在听那个”......

# mysql - 选择性地使用外部文件加载数据

> ID：14572843
> 
> 赞同：0
> 
> 时间：2013-01-28T23:00:06.973
> 
> 标签：mysql, linux, unix, find

我有一个名为`/tmp/files.txt`以下结构的文件：

```
652083        8 -rw-r--r--    1 david            staff                1055 Mar 15  2012 ./Highstock-1.1.5/examples/scrollbar-disabled/index.htm
652088        0 drwxr-xr-x    3 david            staff                 102 May 31  2012 ./Highstock-1.1.5/examples/spline
652089        8 -rw-r--r--    1 david            staff                1087 Mar 15  2012 ./Highstock-1.1.5/examples/spline/index.htm
652074        0 drwxr-xr-x    3 david            staff                 102 May 31  2012 ./Highstock-1.1.5/examples/step-line
652075        8 -rw-r--r--    1 david            staff                1103 Mar 15  2012 ./Highstock-1.1.5/examples/step-line/index.htm 
```

我想将文件名（第 9 列）、文件大小（第 7 列）和 last_modified（第 8 列）插入到 mysql 表中，`paths`.

要插入整行，我可以执行以下操作：

```
LOAD DATA INFILE '/tmp/files.txt' INTO TABLE path 
```

我如何有选择地将所需信息插入到此处的必要列中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:08:03.280

指定虚拟 MySQL 用户变量（例如 @dummy1）作为不需要的值的目标。

```
LOAD DATA INFILE '/tmp/files.txt'
INTO TABLE path 
(@d1, @d2, @d3, @d4, @d5, @d6, filesize, @mon, @day, @ccyy_or_hhmi, filename)
SET last_modified = CONCAT(@mon,' ',@day,' ',@ccyy_or_hhmi) 
```

这样，输入行中的前六个值将被忽略（这些值被分配给指定的用户变量，我们忽略。）第七个值被分配给`filesize`列，第八个到第十个值（月日和年/将时间分配给用户变量，然后将第十一个值分配给`filename`列。

最后，我们使用表达式将月、日和年/时间值连接在一起，并将其分配给`last_modified`列。（注意：不保证生成的字符串适合分配给 DATE 或 DATETIME 列，因为最后一个值可以是一年，也可以是时间。）

（我假设表`path`有名为 filesize、last_modified 和 filename 的列，并且表中没有其他需要设置的列。）

* * *

## 跟进

如果要加载的数据是 find 命令的输出，我会很想使用`-printf`find 的动作，而不是`-ls`，所以我可以控制产生的输出。例如：

```
find . -type f -printf "%b\t%TY-%Tm-%Td %TH:%TM\t%p\n" >/tmp/myfiles.txt 
```

这将为您提供三个字段，由选项卡分隔：

```
size_in_blocks   modified_yyyy_mm_dd_hh_mi  filename 
```

这将很容易加载到 MySQL 表中：

```
LOAD DATA INFILE '/tmp/myfiles.txt'
INTO TABLE path
(filesize, last_modified, filename) 
```

# php - 变量未在 PHP 循环中传递/更新

> ID：14572844
> 
> 赞同：3
> 
> 时间：2013-01-28T23:00:06.673
> 
> 标签：php

所以基本上我正在做的是创建 php 脚本，它打印一个表格并根据输入到表单中的内容更新和计算值。

所以我有一个单独的 HTML 文件，其中包含表单，它传递 3 个变量：

```
$tempStart
$tempEnd
$windSpeed 
```

然后我创建了一个在表的每个字段中使用的函数，如下所示：

```
 function windChillCalc(&$Twc, $Temp, $Wind)
        {
    $Twc = 13.12 + 0.6215*$Temp - (11.37*(pow($Wind, 0.16))) + (0.3965*$Temp*(pow($Wind, 0.16)));

        } 
```

完整的脚本如下：

```
<?php

function windChillCalc(&$Twc, $Temp, $Wind)
{
    $Twc = 13.12 + 0.6215*$Temp - (11.37*(pow($Wind, 0.16))) + (0.3965*$Temp*(pow($Wind, 0.16)));

}

?>

<html>
<head>
<title>Wind Chill Temperature Table</title>
</head>
<?php

extract($_REQUEST);

print "<h1>Wind Chill Temperature Table</h1>";

if(!empty($tempStart)   &&  !empty($tempEnd)  &&  !empty($windSpeed))
    {
        print "<h3>Air Temperature from: ".$tempStart."&degC to ".$tempEnd."&degC</h3>";
        print "<h3>For Wind Speed from 7 km/h to ".$windSpeed." km/h</h3>";
        }
        else
            print "<h2>Air Temperature START is not numeric</h2><br />";

$tablecolor="white";
$headercolor="#00ffff";
$windcolor="red";
$tempcolor="yellow";
$cTemp=$tempStart;
$cWindSpeed="7";
windChillCalc($Twc,$cTemp,$cWindSpeed);

print "<table border=1><tr>";
print "<th width=275 bgcolor=$headercolor>Wind Speed (km/h)/Air Temp.</th>";

    for ($cTemp = $tempStart; $cTemp < $tempEnd; $cTemp+=5){
        print "<th width=100 bgcolor=$headercolor>$cTemp</th>";
    }
    if ($cTemp != $tempEnd){
        print "<th width=100 bgcolor=$headercolor>$tempEnd</th></tr>";

        $cTemp = $tempStart;
    }   

for ($cWindSpeed = 7; $cWindSpeed < $windSpeed; $cWindSpeed+=0.5){

    print  "<tr>";

print  "<td align=center bgcolor=$windcolor>$cWindSpeed</td>";

    for ($cTemp = $tempStart; $cTemp < $tempEnd; $cTemp+=5)   {
        print  "<td align=center bgcolor=$tempcolor>$Twc</td>";
    }
    if ($cTemp != $tempEnd){
        print "$<td align=center bgcolor=$tempcolor>$Twc</tb></tr>";
        $cTemp = $tempStart;
    }   
}
    if ($cWindSpeed != $windSpeed){
        print "<td align=center bgcolor=$windcolor>$windSpeed</td>";
        for ($cTemp = $tempStart; $cTemp < $tempEnd; $cTemp+=5)   {
        print  "<td align=center bgcolor=$tempcolor>$Twc</td>";
    }
    if ($cTemp != $tempEnd){
        print "$<td align=center bgcolor=$tempcolor>$Twc</tb></tr>";
        $cTemp = $tempStart;
    }   

    }   

print "</tr>";
print "</table>";

?>
</body>
</html> 
```

最终发生的是它创建了一个如下所示的表：

[http://i.stack.imgur.com/Iv00i.png](http://i.stack.imgur.com/Iv00i.png)

标题和最左边的列是正确的，但它似乎只计算具有相同变量集的黄色单元格。它不会根据标题中的内容更新变量，并将大多数列留给公式。

所以基本上，每个黄色单元格都是使用以下公式计算的：

```
$Wind = 7
$Temp = -5 
```

请帮帮我！我需要在接下来的几个小时内解决这个问题，这是我最后的希望。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:22:37.593

你的函数并没有真正做任何事情。变量 $Twc 仅存在于您的函数内部，并且仅存在一次。您需要使用不同的数据多次运行该函数以获得不同的结果，并且每次都需要获取函数的变量 OUT（通过返回）。

```
function windChillCalc($Twc, $Temp, $Wind){
         $Twc = 13.12 + 0.6215*$Temp - (11.37*(pow($Wind, 0.16))) + (0.3965*$Temp*(pow($Wind,0.16)));
return $Twc
} 
```

做

```
$Twc = windChillCalc($Twc,$cTemp,$cWindSpeed); 
```

当您需要获得结果时，在您的 for 循环中。

[推荐阅读。](http://devzone.zend.com/9/php-101-part-6-functionally-yours/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:05:10.110

好吧，您只在循环之前调用您的函数一次，并在每个表格单元格中打印相同的结果。

您应该在要打印的任何地方使用实际变量调用您的函数。

我还将从函数返回计算值，而不是通过引用传递它，这使得它更清晰、更合乎逻辑（至少对我来说......）。

# php - 使用正则表达式拆分字符串

> ID：14572848
> 
> 赞同：0
> 
> 时间：2013-01-28T23:00:27.190
> 
> 标签：php, regex

我想拆分一个字符串，其中任何字符都是空格或标点符号（不包括撇号）。以下正则表达式按预期工作。

```
/[^a-z']/i 
```

像我会和没有这样的词被接受了，这很棒。

问题在于像“ere”和“im”这样的词。我想删除开头的撇号并使用 im 和 ere 这两个词。

如果可能的话，我理想地希望在正则表达式模式中停止/删除它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:27:48.840

试试这个

```
$str = "Words like I'll and Didn't are accepted, which is great. 
        The problem is with words like 'ere and 'im";
print_r(preg_split("/'?[^a-z']+'?/i", $str));
//Array ( [0] => Words [1] => like [2] => I'll [3] => and [4] => Didn't ... 
//        [16] => ere [17] => and [18] => im ) 
```

# asp.net - 对 gridview 行使用带有查询字符串的超链接

> ID：14572851
> 
> 赞同：1
> 
> 时间：2013-01-28T23:00:33.933
> 
> 标签：asp.net, gridview, query-string

有没有办法将gridview的行变成一个超链接，这样当用户在一个新的选项卡中打开它时，它会转到那个链接？现在我正在使用 LinkBut​​ton，当用户在新选项卡中打开它时，它不知道去哪里。

我认为 .aspx 代码看起来像：

```
 <asp:TemplateField>
                <ItemTemplate>              
                    <Hyperlink ID="hyperlink" runat="server" ForeColor="red" HtmlEncode="false" navigationURL="testUrl.aspx"                             
                </ItemTemplate>
  </asp:TemplateField> 
```

唯一的问题是，我们的 URL 在后面的 C# 代码中设置为查询字符串，所以我不确定如何将其传递到 navigationURL 部分。

我猜我可以在 page_load 上使用查询字符串做一些事情来重定向到我需要的页面，但这是我第一次使用查询字符串，所以我有点困惑。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T23:12:21.780

```
<asp:TemplateField>
                <ItemTemplate> 
<asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='<%#String.Format("~/controller.aspx?routeID1={0}&routeID2={1}", Eval("routeid1"), Eval("routeid2"))%>'></asp:HyperLink>
             </ItemTemplate>
  </asp:TemplateField> 
```

**routeid1 and routeid2 are passed as query strings to the controller of that page.**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:05:50.763

我最近所做的是将我的类修改为具有为我构造 A 标记的只读属性。这样我就可以控制显示的内容；只是文字或链接。

```
<ItemTemplate>
      <asp:Label ID="ColumnItem_Title" runat="server" Text='<%# Bind("DownloadATag") %>'>  </asp:Label>
</ItemTemplate> 
```

后面的代码只是将类的一个实例绑定到gridview。您可以在任何时候绑定gridview，在回发事件加载时等等。

```
 Dim docs As DocViewList = GetViewList()

 GridViewDocuments.DataSource = docs
 GridViewDocuments.DataBind() 
```

在上面的代码中，实例化为 docs 的 DocViewList 是一个类的列表，该类具有填充我的 GridView 所需的所有属性，此处命名为 GridViewDocuments。设置 GridView 的 DataSource 后，您可以将任何源的属性绑定到项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:32:47.850

就像是：

`<asp:LinkButton ID="LinkButton_Title" runat="server" target="_blank" PostBackUrl='<%# Eval(Request.QueryString["title"]) %>'`

或从 RowCreated 事件绑定它们：

```
protected void GridView_OnRowCreated(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
      (e.Row.FindControl("LinkButton_Title") as LinkButton).PostBackUrl = Request.QueryString["title"]))
    }
} 
```

# javascript - 在鼠标单击时使用 JQuery 交换图像

> ID：14572853
> 
> 赞同：-1
> 
> 时间：2013-01-28T23:00:46.193
> 
> 标签：javascript, jquery

我想在 JavaScript 中使用 jQuery 将图像替换为另一个图像。它是一个在线巴士预订网站。因此，当单击可用图像时，它应该变为不可用图像。有谁知道这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:22:33.593

有很多方法，这里有一些。

```
<img id="bannerLogo" src="/path/to/image/logoup.png" />
<script type="text/javascript">
var imageCounter = 0;
$('#bannerLogo').click(function(){
    if(imageCounter%2==0){
        $('#bannerLogo').attr('src', '/path/to/image/logodown.png');
    }
    else {
        $('#bannerLogo').attr('src', '/path/to/image/logoup.png');
    }
    imageCounter++;
});
</script> 
```

或者

（注意 - 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。）

```
<img class="swapper" src="imagename_off.jpg"  />
<script type="text/javascript">
$(function(){
  $(".swapper").live('click', function() {
    if ($(this).attr("class") == "swapper") {
      this.src = this.src.replace("_off","_on");
    } else {
      this.src = this.src.replace("_on","_off");
    }
    $(this).toggleClass("on");
  });
});
</script> 
```

我希望这有帮助。

我还会添加我的悬停脚本，以防万一您在某些时候需要它：

```
$('#bannerLogo').hover(
      function() { $('#bannerLogo').attr('src', '/path/logodown.png');}, 
      function() { $('#bannerLogo').attr('src', '/path/logoup.png'); 
}); 
```

不要忘记包含 JQuery 库

[http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js)

谢谢，菲利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:03:15.367

你可以这样做：

```
$('#myImage').on('click', function(e) {
    var image = this;
    img.src = '/path/to/another/image.png';
}); 
```

此外，如果您有一堆需要交换的图像，最好使用事件委托。让我们假设这些可交换的图像可以在页面上的任何位置，并且您`swappable`为它们分配一个类。然后，您可以只设置一个事件处理程序来处理交换，即使您使用 AJAX 动态添加新图像：

```
$(document).on('click', 'img.swappable', function(e) {
    var image = this;
    image.src = getAvailableImageUrl();
}); 
```

# python - 如何在 OS X 上设置编码以反映默认的 GAE 编码？

> ID：14572854
> 
> 赞同：0
> 
> 时间：2013-01-28T23:00:48.097
> 
> 标签：python, google-app-engine

我在 OS X 机器上本地运行我的 Python 2.7 GAE 应用程序，它运行良好。但是，在 GAE 上进行测试时，由于编码问题，它会中断。有一个`code.google.com`描述该问题的未解决问题：[GAE 使用 ASCII 作为其默认编码](http://code.google.com/p/googleappengine/issues/detail?id=2219)，但 MacOS X 使用 UTF-8。有没有办法修改 OS X 环境以默认使用 ASCII 编码？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T10:11:39.463

除非您想将某些内容打印到终端/标准输出，否则系统编码没有影响。在默认安装中，Python 的编码设置为 ASCII。你到底得到了什么错误？

# c# - 在 WCF 服务中使用 Office 互操作

> ID：14572855
> 
> 赞同：2
> 
> 时间：2013-01-28T23:00:54.490
> 
> 标签：c#, wcf, com, office-interop

我目前对事情感到困惑，因为我对 WCF 没有足够的了解。我有一个服务，它有一个调用 Excel 应用程序（COM 对象）的方法。我正在使用该服务创建一个 Excel 电子表格并对其进行格式化。要格式化文件，我从代码中打开文件并在其上执行宏。它在我的个人笔记本电脑上运行良好，但在服务器上却给了我错误。然后我在服务器上安装了excel，一切似乎都很好。但是在做这一切的时候，我偶然发现了 asp.net 论坛上的这个页面。它指出 Microsoft 不建议在 Web 服务中使用 COM 对象。

这是链接：“ [Office 服务器端自动化的注意事项](http://support.microsoft.com/kb/257757/en-us)”

我想从做过类似事情或对同样事情有一些理论知识的人那里得到一些见解。

# python - 将浮点数转换为 int：为什么 64.0 截断为 63、125.0 截断为 124 等？

> ID：14572857
> 
> 赞同：0
> 
> 时间：2013-01-28T23:01:16.717
> 
> 标签：python, casting, floating-point, int

> **可能重复：**
> [Python float 到 int 的转换问题](https://stackoverflow.com/questions/6569528/python-float-to-int-conversion-problem)

```
def isPerfectCube(x):
   temp = x ** (float(1) / 3) 
   temp = temp ** 3
   temp = int(temp)
   print (temp == x)  
   return (temp == x) 
```

我正在尝试编写一个程序来确定数字 x 是否是完美的立方体。出于某种原因，一些数字一直在舍入一个整数，而不仅仅是截断。我从来没有完全理解花车是如何工作的。我知道他们不准确，所以我假设问题来自那里。

例如：

*   125.0 在转换为 int 时截断为 124。
*   当转换为 int 时，64.0 截断为 63。

任何帮助或解释将不胜感激。

# python - Python读写文件错误

> ID：14572865
> 
> 赞同：1
> 
> 时间：2013-01-28T23:01:50.213
> 
> 标签：python, django

我正在尝试编写一个 python 函数，它将接受不同的字符串并将它们放入一个文件中，这样它将成为一个 python 文件。然后它将使用另一个 python 实例运行这个 python 文件。我希望这个过程在指定的时间后超时 - 例如在无限循环的情况下。这是代码：

```
# runTimeout.py
input_value = "x = addTwo(1,2)\n"
expected_output = "x == 3"
solution = "def addTwo(a, b):\n\treturn a+b"
timeout = 0.1
# Create the test file by adding (1)submission.solution (2)input_value (3)if (4)expected_output (5): (6) return True (6) return False 
inputFile = solution + "\n" + input_value + "\n" + "if " + expected_output + ":" + "\n" + "\t" + "print True" + "\n" + "print False"
fin = open('inputfile', 'w')
fin.write(inputFile)
fin.close()

command = "python ~/Dropbox/django/inputFile > ~/Dropbox/django/outputFile"

def runTimeout(command, timeout):
    import os, signal, time, commands
    cpid = os.fork()
    if cpid == 0:
        while True:
            commands.getstatusoutput(command)#[1].split('\n')
    else:
        time.sleep(timeout)
        os.kill(cpid, signal.SIGKILL)
    return

runTimeout(command, timeout)
fout = open('outputFile', 'r')
for line in fout:
    print line
fout.close() 
```

它正确地生成了这个 inputFile：

```
def addTwo(a, b):
    return a+b
x = addTwo(1,2)

if x == 3:
    print True
print False 
```

和这个输出文件

```
True
False 
```

但是当我使用 python runTimeout.py 执行代码时，控制台上没有任何内容。但是，当我使用解释器读出带有最后四行 runTimeout.py 的文件时，我得到了 outputFile 的内容。这是怎么回事？我不明白为什么相同的代码可以同时工作，但不能在另一个地方工作。

在我让它独立工作后，我打算把它放到一个 django 函数中。

**- 更新 -**

Brandon 的解决方案有所帮助，但由于某种原因，它似乎无法在终端上始终如一地工作 - 有时它会打印 True，有时它什么也不打印。

我写了这个新代码，当它是一个单独的 python 文件时它可以工作。*在 Django 函数*中它在 signal.signal(signal.SIGALRM, signal_handler) 上失败（500 内部服务器错误）

```
command = "python ~/Dropbox/django/testcode/inputFile > ~/Dropbox/django/testcode/outputFile"

import signal, subprocess

def signal_handler(signum, frame):
    raise Exception("Timed out!")

signal.signal(signal.SIGALRM, signal_handler) #fails here
signal.alarm(timeout) 
results = ""
try:
    subprocess.call(command, shell=True)
    fout = open('outputFile', 'r')
    for line in fout:
        print line
        results += line
    fout.close()
except Exception:
    print "Failure."

signal.alarm(0)

print "results = " + str(results) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:57:47.257

我认为您应该等到您的子进程退出，这使您的代码看起来像这样

```
def runTimeout(command, timeout):
    import os, signal, time, subprocess
    cpid = os.fork()
    if cpid == 0:
        while True:
            subprocess.call(command, shell=True)
        os._exit(0)
    else:
        time.sleep(timeout)
        os.kill(cpid, signal.SIGKILL)
    os.waitpid(cpid, 0)
    return 
```

# php - SimplePie 解析以查找 Youtube 视频链接

> ID：14572876
> 
> 赞同：1
> 
> 时间：2013-01-28T23:02:47.583
> 
> 标签：php, xml, parsing, simplepie

我正在使用 SimplePie 解析我们的教堂 RSS 提要，其中包含每周的布道，包括音频和视频。我能够获得标题和 mp3 链接，但很难获得 youtube 链接。以下是包含 youtube 视频的 XML 提要中的示例。

它正在使用`[CDATA]`

我正在使用`$item->get_content()`，但它似乎不包含下面的任何标签数据。提要的网址是[http://lakeforest.org/feed](http://lakeforest.org/feed)。当我在浏览器中打开这个 url 时，我可以看到嵌入的 youtube 视频。

任何帮助将不胜感激。

注意：-我评论了下面的 html 仅用于显示

```
<!--
<description><![CDATA[Huntersville Campus Mike Moses, Lead Pastor Series Discussion Questions: SHAPE, Part 2 Spiritual Gifts Inventory VIDEO AUDIO]]></description>
                <content:encoded><![CDATA[<h3>Huntersville Campus</h3>
<p>Mike Moses, Lead Pastor<br />
<a href="http://lakeforest.org/wp-content/uploads/2013/01/SDQ_SHAPEPt2.pdf">Series Discussion Questions: SHAPE, Part 2</a><br />
<a href="http://www.churchgrowth.org/cgi-cg/gifts.cgi?intro=1 <http://www.churchgrowth.org/cgi-cg/gifts.cgi?intro=1" target="_blank">Spiritual Gifts Inventory</a></p>
<h4>VIDEO</h4>
<p><iframe width="420" height="315" src="http://www.youtube.com/embed/4Uv8U8c6isg" frameborder="0" allowfullscreen></iframe></p>
<h4>AUDIO</h4>
<img src="http://feeds.feedburner.com/~r/LakeForest/~4/qMoLVpI1tGI" height="1" width="1"/>]]>  --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T09:28:28.210

SimplePie默认会去除`embed`,`object`等`iframe`标签，因为它们可能很危险。

如果您想要恢复视频，您应该忽略它们，但要小心源 URL，因为它可能是一个安全问题。

```
$feed = new SimplePie();
$feed->set_feed_url('http://simplepie.org/blog/feed/');

// Remove these tags from the list
$strip_htmltags = $feed->strip_htmltags;
array_splice($strip_htmltags, array_search('object', $strip_htmltags), 1);
array_splice($strip_htmltags, array_search('param', $strip_htmltags), 1);
array_splice($strip_htmltags, array_search('embed', $strip_htmltags), 1);
array_splice($strip_htmltags, array_search('iframe', $strip_htmltags), 1);

$feed->strip_htmltags($strip_htmltags); 
```

[资源](http://simplepie.org/wiki/reference/simplepie/strip_htmltags#remove_object_param_and_embed_from_the_default_list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:19:18.560

我刚刚注意到您的提要 URL，这不是我所期待的，我期待的是这样的：

> [http://gdata.youtube.com/feeds/base/videos?q=painting+miniatures+tutorial&orderby=published&client=ytapi-youtube-search&v=2](http://gdata.youtube.com/feeds/base/videos?q=painting+miniatures+tutorial&orderby=published&client=ytapi-youtube-search&v=2)

这是来自 YouTube 的搜索结果提要，我[在此处](http://news.muschamp.ca)将其传递给 SimplePie 。此外，您声明 $item 的其余 PHP 代码也会很有用。今晚我回答了一个类似的问题，基本上这些年来 YouTube 已经改变了他们的 API 和提要，即使你能找到它工作的旧示例，你也可能必须更新到他们的 API/提要的更新版本。

SimplePie 可以处理一些（如果不是全部）YouTube 提要，但不能保证 Google (YouTube) 会为您提供缩略图以及他们在 YouTube.com 上拥有的所有元数据。API 通常通过 API 提供其数据库中包含的数据子集，他们希望人们访问他们的网站，以便向他们展示广告并更好地跟踪它们。

也许不是您想要的答案，但没有更多信息，这是我能做的最好的。

如果您想深入研究提要并获取视频 URL，然后为它创建一个播放器，这是非常重要的。您必须使用 simple_html_dom 之类的东西，然后您需要创建格式正确的 iframe 或 javascript 调用来创建浏览器内播放器。SimplePie 没有 get_contents()->video

# google-app-engine - 如何在 Google App Engine 中使用 ipdb？

> ID：14572884
> 
> 赞同：9
> 
> 时间：2013-01-28T23:03:19.920
> 
> 标签：google-app-engine, ipython

GAE 使用服务器上不支持的本地库阻止。一般来说，这是一件好事。不幸的是，这意味着 ipdb 也被阻止了。将 ipdb 的必要目录添加到 sys.path 不起作用。它继续给出导入错误。

我尝试将 ipdb+IPython 文件夹复制到我的 gae 文件夹中，但是在导入资源 (/usr/lib/python2.7/lib-dynload/resource.so) 上出现此错误

另一种选择可能是尝试编辑 GAE，以便它允许临时访问本地库？

我想要 ipdb 的原因主要是因为它的历史记录和制表符补全功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:46:32.740

似乎有一种方法可以在 Linux 系统上使用 pdb 获得**一些**readline 支持，可在此处找到 [https://groups.google.com/forum/?fromgroups=#!topic/django-non-relational/C0g3ZYuhoMw](https://groups.google.com/forum/?fromgroups=#!topic/django-non-relational/C0g3ZYuhoMw)

基本上安装包`rlwrap`，然后运行类似于这样的本地服务器：

```
rlwrap python manage.py runserver 
```

# jquery - 如何使用此 JQuery 代码验证密码？

> ID：14572885
> 
> 赞同：0
> 
> 时间：2013-01-28T23:03:31.513
> 
> 标签：jquery, passwords

我找到[了这个密码验证代码，](https://www.okpay.com/en/account/signup.html)并试图弄清楚前几行的含义。即：

*   “.opts”是变量还是 Javascript 的一部分？
*   如何将此代码“连接”到给定的 HTML 密码/文本框

代码

```
$.fn.passwordStrength = function (options) {

    return this.each(function () {
// BEGIN - Don't understand
        var that = this; that.opts = {};
        that.opts = $.extend({}, $.fn.passwordStrength.defaults, options);
        that.div = $(that.opts.targetDiv);
        that.defaultClass = that.div.attr('class');
        that.percents = (that.opts.classes.length) ? 100 / that.opts.classes.length : 100;
// END - Don't understand

        this.div.append("<div class='pswstr smsgns passive'></div>");
        this.div.append("<div class='pswstr lgsgns passive'></div>");
        this.div.append("<div class='pswstr numb passive'></div>");
        this.div.append("<div class='pswstr char passive'></div>");
        this.div.append("<div class='pswstr symb passive'></div>");

        var specialsymbolPassed = false;
        var smallsymbolPassed = false;
        var largesymbolPassed = false;
        var lengthPassed = false;

        var numberRegex = new RegExp("([0-9]+)");
        var smallsymbolRegex = new RegExp("([a-z]+)");
        var largesymbolRegex = new RegExp("([A-Z]+)");
        var specialsymbolRegex = new RegExp("([^A-Za-z0-9]+)");

        v = $(this).keyup(function () {
            if (typeof el == "undefined")
            { this.el = $(this); }

            var dv = $(that.opts.targetDiv);

            if (smallsymbolRegex.test(this.value)) { toogleDv($(dv).find("div.smsgns"), true); smallsymbolPassed = true; }
            else { toogleDv($(dv).find("div.smsgns"), false); smallsymbolPassed = false ; }

            if (largesymbolRegex.test(this.value)) { toogleDv($(dv).find("div.lgsgns"), true); largesymbolPassed = true; }
            else { toogleDv($(dv).find("div.lgsgns"), false); largesymbolPassed = false; }

            if (this.value.length >= 8) { toogleDv($(dv).find("div.symb"), true); lengthPassed = true; }
            else { toogleDv($(dv).find("div.symb"), false); lengthPassed = false; }

            if (specialsymbolRegex.test(this.value) || numberRegex.test(this.value)) {
                specialSymbPassed = true;
                toogleDv($(dv).find("div.char"), true);
                toogleDv($(dv).find("div.numb"), true);
                }
            else {
                toogleDv($(dv).find("div.char"), false);
                toogleDv($(dv).find("div.numb"), false); 
                specialSymbPassed = false; 
             }

//            if (numberRegex.test(this.value)) { toogleDv($(dv).find("div.numb"), true); numberPassed = true; }
//            else { toogleDv($(dv).find("div.numb"), false); numberPassed = false; }

            if (smallsymbolPassed && largesymbolPassed && lengthPassed && specialSymbPassed) {
                $(dv).parent().addClass("pass");
                $(dv).addClass("pass");
            }
            else {
                $(dv).parent().removeClass("pass");
                $(dv).removeClass("pass");
            }

            //            var s = getPasswordStrength2(this.value);
            //            var p = this.percents;
            //            var t = Math.floor(s / p);
            //            if (t > 10) { t = 10; }
            //            //if (s >= 110)
            //            //t = this.opts.classes.length - 1;
            //            this.div.removeAttr('class').addClass(this.defaultClass);
            //            if (s > 0) { this.div.addClass(this.opts.classes[t - 1]); }
        })
    });

    function toogleDv($dv, Enable) {
        if (Enable) { $dv.removeClass("passive").addClass("active"); } else { $dv.removeClass("active").addClass("passive"); }
    }

    function getPasswordStrength2(H) {
        var numberRegex = new RegExp("([0-9]+)");
        var smallsymbolRegex = new RegExp("([a-z]+)");
        var largesymbolRegex = new RegExp("([A-Z]+)");
        var specialsymbolRegex = new RegExp("([^A-Za-z0-9]+)");
        var power = 0;
        if (numberRegex.test(H)) { power += 20; }
        if (smallsymbolRegex.test(H)) { power += 20; }
        if (largesymbolRegex.test(H)) { power += 20; }
        if (specialsymbolRegex.test(H)) { power += 20; }
        var l = Math.floor(H.length / 2);
        if (l > 6) { l = 6; }
        power += l * 5;
        if (H.length < 8) { if (power > 85) { power = 85; } }
        return power;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:16:40.447

1.  `that.opts`是一个变量。它是 passwordStrength 插件保存您在调用它时指定的选项的地方。`$.extend()`用于将作为参数提供的选项与默认值合并。

2.  您可以像使用其他 jQuery 插件一样使用它：

`$(selector).passwordStrength({ options });`

在您链接到的站点的[signup.js](https://www.okpay.com/js/signup.js)开头查看它是如何使用的。

如果你谷歌“jquery 密码强度插件”，你会发现一些其他类似的插件，它们实际上可能有文档。

# wordpress - 使用 wordpress 菜单在同一页面上导航

> ID：14572888
> 
> 赞同：0
> 
> 时间：2013-01-28T23:03:41.757
> 
> 标签：wordpress, wordpress-theming

是否可以使用 wordpress 菜单在同一页面上导航？

假设我只有一篇很长的 wordpress 帖子，并且想通过单击 wordpress 菜单在同一页面上导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:38:48.983

您需要为要导航到的元素使用“id”属性并在菜单中为链接添加书签。请参阅此处[HTML 链接](http://www.w3schools.com/html/html_links.asp)

# java - 为生成的代码组织导入

> ID：14572889
> 
> 赞同：2
> 
> 时间：2013-01-28T23:03:45.927
> 
> 标签：java, import, eclipse-plugin

我编写了一个 Eclipse 插件来使用 xpand2 生成 Java 代码。它提供的美化器支持不组织导入。

因此，我打算使用 Eclipse 中可用的组织导入选项。有人可以帮助我了解如何将该选项插入到我的 Eclipse 插件中吗？

# android - 运行时错误“找不到类 com.google.ads.adView”

> ID：14572901
> 
> 赞同：0
> 
> 时间：2013-01-28T23:04:57.740
> 
> 标签：android, admob, adview

我正在尝试在我的活动中加入 ad mob 广告。我确实在这个网站上搜索过这个，所以我做了：

*   [从https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals?hl=uk#android](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals?hl=uk#android)输入代码

*   将最新的 .jar 导入 /lib

*   在 Java 构建路径中包含与外部 Jar 相同的 .jar

我清理了项目，我按Ctrl+Shift+O'ed它。

编译没问题，但运行时我得到这个错误，“找不到类......adView”。

抱歉，如果我没有看到明显的答案。请帮忙！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:23:27.993

您是否在清单中创建了 Activity Admob 要求？也许您可以尝试仅将 jar 复制到项目的 lib 存储库中，而不将其添加到外部 JAR。因此，我在使用外部 JAR 时遇到了很多问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:08:19.967

您是否确定将其导入构建路径？右键单击您的项目，选择属性，然后设置构建路径。然后选择库选项卡。（这是从内存中提取的，因此可能会有所不同）如果您最近更新了 admob SDK，则需要更新它以指向正确的 jar 文件。

如果这不起作用，项目清理（项目/清理）永远不会受到伤害。

# ruby - Date.yesterday 没有找到任何结果

> ID：14572903
> 
> 赞同：0
> 
> 时间：2013-01-28T23:05:10.347
> 
> 标签：ruby, ruby-on-rails-3

我环顾四周，看不出我的 Date.yesterday 查询不起作用的任何原因。

我的模型中有这个：

```
 scope :yesterday, lambda {
    where('acctstarttime = ?', Time.now - 1.day)
  } 
```

我试过了

```
 scope :yesterday, lambda {
   where('acctstarttime = ?', (Time.now - 1.day).strftime('%Y-%m-%d'))
 } 
```

和...

```
scope :yesterday, lambda {
   where('acctstarttime = ?', Date.yesterday)
 } 
```

我得到这样的结果：

```
 Radacct.yesterday.count
 (440.1ms)  SELECT COUNT(*) FROM `radacct` WHERE (acctstarttime like '2013-01-27 22:55:31') 
```

（我也试过 Date.yesterday）

在哪里使用今天产生：

```
 Radacct.today.count
 SELECT COUNT(*) FROM `radacct` WHERE (acctstarttime >= '2013-01-28')
 => 16,456 
```

如果我按如下方式修改查找，它将起作用：

```
 Radacct.find(:all, :conditions => ["acctstarttime like ?", (Date.today-1).strftime('%Y-%m-%d')+ "%"]).count 
```

我只是累了还是这太复杂了？Rails 3 中实现这一目标的最佳和最短方法是什么？它似乎被时间方面卡住了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T23:10:53.680

注意 '>=' 上的`today`。问题是您正在测试与昨天的相等性，而您真正想要测试的是一个范围。试试这个：

```
scope :yesterday, lambda {
  where(:acctstarttime => Date.yesterday.beginning_of_day..Date.yesterday.end_of_day)
} 
```

或者

```
scope :yesterday, lambda {
  where('acctstarttime >= ? && acctstarttime <= ?', Date.yesterday, Date.today)
} 
```

# c# - .Net WinForms 3.5 BindingList 性能

> ID：14572904
> 
> 赞同：0
> 
> 时间：2013-01-28T23:05:10.090
> 
> 标签：c#, winforms, datagridview, bindinglist

我是葡萄牙人，我的英语不是很好，对不起！

我在 .Net Windows Form Framework 3.5 中开发了一个项目。

我需要填充和刷新 DataGridView，有 350 条记录，每秒 5 次。

数据从 WebService 提供，我使用两个 Windows.Forms.Timer 调用异步方法，定时器间隔为 200 ms。

我创建了一个 BindingList：

```
public class Data : INotifyPropertyChanged
{
   private colunaA;
   private colunaB;
   private colunaC;
   public event PropertyChangedEventHandler PropertyChanged;

   public Data() { }

   public ColunaA { get { return this.colunaA; } set { if (this.colunaA != value) { this.colunaA = value; onpropertychanged("ColunaA"); } }
   ...

   private void onpropertychanged(string propertyName)
                {
                        if (PropertyChanged != null)
                        {
                                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
                        }
                }
} 
```

并且计时器的 Tick 函数会更改 BindingList 数据。

我在 Windows 窗体方面的经验非常丰富，我需要听取您的意见。

实现每秒多次刷新350条数据记录的最佳方法是什么？和性能？

这种方法效果很好，但有时 DataGridView 不会按预期刷新！我现在不知道为什么，但我认为 BindingList 不能很好地处理许多信息并每秒刷新！

非常感谢，里卡多

# zend-framework2 - Zend Framework 2、Module.php 和获取参数的值

> ID：14572912
> 
> 赞同：0
> 
> 时间：2013-01-28T23:05:45.663
> 
> 标签：zend-framework2

在 Module.php 我有一些代码（简化版）：

```
namespace Application;

use Zend\Mvc\ModuleRouteListener;
use Zend\Mvc\MvcEvent;

class Module{
    public $somevariable = 'test';
    public function onBootstrap( MvcEvent $e ) {
        $this->somevariable = 'test2';
    }
    public function getValue(){
        return $this->somevariable;
    }
} 
```

接下来，我想从模板 layout.phtml 中的变量“somevariable”中获取值。我这样做如下：

```
echo Application\Module::getValue(); 
```

但这不起作用。那有什么问题？

PS 我从来没有在 PHP 中进行过太多编程，所以也许我错过了一些东西 :-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:06:35.880

您可以使用

```
$e->getViewModel()->setVariable('somevariable', 'somethingvalue'); 
```

在视图中：

```
echo $this->layout()->somevariable; 
```

有关详细信息，请参阅这篇文章：[http ://samsonasik.wordpress.com/2012/07/27/zend-framework-2-mvcevent-layout-view-get-namespace/](http://samsonasik.wordpress.com/2012/07/27/zend-framework-2-mvcevent-layout-view-get-namespace/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:35:00.727

如果变量只是一个字符串，那么采用这种方法没有多大意义。请不要冒犯，但如果你没有太多的 PHP 经验（你试图调用一个非静态的静态函数），那么我想知道你为什么要开始使用如此高级的框架来学习 PHP。

如果您仍然坚持这样做，请按照[官方文档](http://framework.zend.com/manual/2.0/en/index.html)并一遍又一遍地阅读整个快速入门。看看那里的一些[模块](http://modules.zendframework.com)，看看它们是如何做的。

尝试先做简单的事情，直到你**真正**需要这样的功能。

# jquery - 如何在onclick函数内找到表头和行中的第一个元素？

> ID：14572916
> 
> 赞同：-1
> 
> 时间：2013-01-28T23:05:55.647
> 
> 标签：jquery, html

我需要使用 jquery 在 onclick 函数内的行中找到表头和第一个元素，

```
$(document).ready(function(){
$(".items").delegate("tr", "dblclick", function(data){
    alert(data.target.innerHTML);
    alert($(this).find('td:eq(0)').html());

});
}); 
```

下面的代码给了我选定行中的内部 html 和第一个元素。我需要获取与我单击的单元格相对应的表头。

我试过将下面的代码放在 dblclick 函数中，但我认为传递的索引是错误的，我怎样才能得到正确的索引？

```
var headerValue= $(this).closest("table").find('th').eq($(this).index());
    alert(headerValue.text()); 
```

html表：

```
<table class="items">
<thead>
<tr>
<th id="sku-grid_c1">Name</th><th id="sku-grid_c2">Active</th><th id="sku-grid_c3">Date Created</th><th id="sku-grid_c4">Date Updated</th><th id="sku-grid_c5">Code</th><th id="sku-grid_c6">Price</th><th id="sku-grid_c7">Shipping</th><th id="sku-grid_c8">Max Qty</th><th class="button-column" id="sku-grid_c9">&nbsp;</th></tr>
</thead>
<tbody>
<tr class="odd">
<td>fbdh</td><td>yes</td><td>&nbsp;</td><td>&nbsp;</td><td>t67r6r7t6t</td><td>23</td><td>12</td><td>12</td></tr>
<tr class="even">
<td>bfhewfbuh</td><td>yes</td><td>&nbsp;</td><td>&nbsp;</td><td>678ty78tg</td><td>56</td><td>7</td><td>6</td></tr>
<tr class="odd">
<td>cdbj</td><td>no</td><td>&nbsp;</td><td>&nbsp;</td><td> hudhqu</td><td>12</td><td>12</td><td>1</td></tr>
<tr class="even">
<td>guyguyf</td><td>yes</td><td>&nbsp;</td><td>&nbsp;</td><td>678gy8t</td><td>56</td><td>56</td><td>6</td></tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:35:34.710

所以你想看到表格标题和第一个单元格。

也许这对你有用：

[http://jsfiddle.net/MM5un/](http://jsfiddle.net/MM5un/)

HTML

```
<table class="display">
    <thead>
        <tr>
            <th>Hello 1</th>
            <th>Hello2</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Row 1 - Cell 1</td>
            <td>Row 1 - Cell 2</td>
        </tr>
        <tr>
            <td>Row 2 - Cell 1</td>
            <td>Row 2 - Cell 2</td>
        </tr>
    </tbody>
</table>

<div class="showFirstTD"></div>
<div class="tableHeader"></div> 
```

JS

```
var tableHeader = $('.display thead').html();

$('.display tbody tr').on('click',function(){
    $('.showFirstTD').html($(':first-child', this).text());
    $('.tableHeader').html(tableHeader);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T23:56:09.830

这是你要求的吗？ [http://jsfiddle.net/sXFRu/](http://jsfiddle.net/sXFRu/)

**HTML：**

```
<table class="items" id="mytable">
  <thead>
    <tr>
      <th>Name</th>
      <th>Last Name</th>
      <th>City</th>
      <th>State</th>
    </tr>
  </thead>
  <tbody>
    <tr class="odd">
      <td>Joe</td>
      <td>Doe</td>
      <td>Boston</td>
      <td>MA</td>
    </tr>

    <tr class="even">
      <td>John</td>
      <td>Smith</td>
      <td>New York</td>
      <td>NY</td>
    </tr>    
  </tbody>
</table> 
```

**jQuery：**

```
var tds = $('#mytable').find('td');
var ths = $('#mytable').find('th');
var td;

$('#mytable').on('dblclick', 'td', function() {
   td = $(this);

   tds.removeClass('highlight');
   ths.removeClass('highlight');

   td.addClass('highlight');
   ths.eq(td.index()).addClass('highlight');
}); 
```

# javascript - QUnit 没有像我期望的那样运行手动命名空间设置代码？

> ID：14572919
> 
> 赞同：0
> 
> 时间：2013-01-28T23:06:27.017
> 
> 标签：javascript, qunit, chutzpah

在 stuff.js 中：

```
function init() {
    return "works";
}

(function(ParentNamespace) {
    ParentNamespace.MySubNamespace = {};
})(window.MyNamespace || (window.MyNamespace = {})); 
```

在我的测试 JS 文件中：

```
/// <reference path="../../../project1/Shared/sub1/Javascript/stuff.js" />
test("foo test", function () {
    deepEqual(init(), "works", "couldn't access source JS file");
    ok(window, "no window context");
    var ns = window.MyNamespace;
    ok(ns in window, "namespace is bad");
    var ns2 = window.MyNamespace.MySubNamespace;
    ok(ns2 in window, "subnamespace is bad");
}); 
```

我`'undefined' is not an object (evaluating 'window.MyNamespace.MySubNamespace')`在使用 Chutzpah 测试适配器运行上述测试时得到。也就是上`var ns2`线抛出异常，一直到最后一个`ok()`断言都没有。我究竟做错了什么？qUnit/Chutzpah 不应该在尝试运行测试之前运行 stuff.js 中的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:44:05.880

我已经改变了测试。以下测试工作...

```
/// <reference path="../../../project1/Shared/sub1/Javascript/stuff.js" />
test("foo test", function () {
deepEqual(init(), "works", "couldn't access source JS file");
ok(window, "no window context");    
ok('MyNamespace' in window, "namespace is bad");    
ok('MySubNamespace' in window.MyNamespace, "subnamespace is bad");
}); 
```

# php - mysqli_stmt_num_rows、mysqli_stmt_execute 和 mysqli_store_result

> ID：14572920
> 
> 赞同：1
> 
> 时间：2013-01-28T23:06:27.550
> 
> 标签：php

我有以下功能，它应该检查要添加到数据库中的新电子邮件地址是否已经存在。

```
function duplicate_email($email_y){
    $dbCon = db_connect();
    $sql = "SELECT email FROM users WHERE email = ?";
    if ($stmt = mysqli_prepare($dbCon, $sql)) {

        mysqli_stmt_bind_param($stmt, "s", $email_y);
        mysqli_stmt_execute($stmt);
        //mysqli_store_result($dbCon);
        $rows = mysqli_stmt_num_rows($stmt);

        if($rows == 1){
            mysqli_stmt_close($stmt);
            mysqli_close($dbCon);
            return true;
            }
        else{
            mysqli_stmt_close($stmt);
            mysqli_close($dbCon);
            return false;
        }     
    }
} 
```

这是我使用它的地方：

```
if(duplicate_email($email) == true){
    echo 'Email [ '.$email.' ] seems to be already used';
} 
```

问题是没有检测到，我已经在数据库中的一个电子邮件地址上进行了测试，但它失败了，它就像它不存在一样通过了。有什么想法失败了吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:17:02.287

这可能无法回答您的问题，但防御性编程风格会建议您将语句更改为`if ($rows >= 1)`以防您的测试电子邮件地址多次包含在您的数据库中。

此外，您应该处理您`if ($stmt = mysqli_prepare...)`不返回 true 的情况。它只会落入您的代码的其余部分并且不返回任何内容，我认为这可能被解释为错误。如果失败，至少打印出一些调试代码（或引发异常）。

# ruby-on-rails - 如何在控制器动作中强制完成响应？

> ID：14572923
> 
> 赞同：0
> 
> 时间：2013-01-28T23:06:45.807
> 
> 标签：ruby-on-rails, ruby, actioncontroller

我需要对控制器动作进行一些缓慢的操作。但不必等待此操作进行响应呈现。

```
class ProductController < ActionController
  def update
    slow_operations()
    render json: {status: 'ok'}
  end
end 
```

即使我`render`在 Product#update 操作之后移动我的代码，它也不会减少响应时间。

```
class ProductController < ActionController
  def update
    render json: {status: 'ok'}
    slow_operations()
  end
end 
```

如何在执行慢速操作之前强制返回完整响应？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:15:02.883

由于 Rails 的工作方式，它仍然会在动作完成后进行实际的“渲染” - 所以，正如您发现的那样，在您的动作中将“渲染”移动得更高并没有帮助。您需要做的是将长时间运行的操作改组到后台进程中。有很多 gems 可以做到这一点，包括[BackgroundRb](http://backgroundrb.rubyforge.org)、[Delayed Job](https://github.com/collectiveidea/delayed_job)和[Sidekiq](http://mperham.github.com/sidekiq/)（我个人最喜欢的，主要是因为它是多线程的，减少了您需要启动的进程数量，并且因为它的基于 Web 的管理/监控界面）。

甚至还有一个 Railscast 可以让你开始学习其中的大部分内容，比如这个：[http ://railscasts.com/episodes/366-sidekiq](http://railscasts.com/episodes/366-sidekiq)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:11:06.127

您需要集成[Resque](https://github.com/defunkt/resque)或[Girl Friday](http://mperham.github.com/girl_friday/)之类的东西，以将缓慢的进程卸载到后台任务。

# linux - 学习如何在 linux 中编程

> ID：14572925
> 
> 赞同：2
> 
> 时间：2013-01-28T23:06:57.040
> 
> 标签：linux, unix

我熟悉多种语言，并且有使用 Visual Studio、Eclipse 和 xcode 的经验。我真的只是从开发环境中学习编程和调试。每当我看到有关 Windows 与 Linux 进行开发或 Emacs 与 Visual Studio 的讨论时，总会有人说“在 Linux 中，我的整个操作系统都是一个开发环境”。事实上，我经常听到各种关于 Linux 是理想开发环境的说法。但是通过祈祷告诉我在哪里可以学习在 Linux 上开发的魔力？我看到的每个教程都涉及一个 IDE，比如 code::blocks 或其他东西。

我不是在要求最好的操作系统进行开发。我只是问，作为一个只知道如何在 Windows 上开发的人，我如何学习在 Linux 上开发？我听到一些随机的东西，如 grep、valgrind、objdump 等，但我不知道如何在我的开发过程中使用这些工具。

有人知道好的资源吗？我用 Google 和 Google 搜索过，但我找不到任何类型的 Windows 到 Linux 开发人员指南。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:14:50.057

Heart of Gnu/Linux is shell. There are lot of IDE tools and similar like there are on Win, however if you don't know to use shell, you will miss a lot of possibility and real power behind Gnu/Linux OS.

As a starting point look at this link

[http://devmanual.gentoo.org/tools-reference/index.html](http://devmanual.gentoo.org/tools-reference/index.html)

However again where you should go from there depends a lot of what you actually want to do and program. My suggestion is learn to use Emacs. In my opinion it is the best "editor/tool" there is, what ever cross your mind you can do it with Emacs.

Also read if you can some book which will explain Gnu/Linux system to you, organization, what is what etc..... Advanced programing in Unix is good book, and is same for Gnu/Linux, but I am not sure if you can get hold of it. Also if you are not good with C lot of will not be helpful to you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:17:46.950

Linux 主要是用 C 语言编写的，带有一点汇编。您可以仅使用 C 编程语言编写应用程序。

您可以使用大多数 Linux 发行版中提供的命令行工具（例如 getopt、grep 等）编写 Bash 脚本。

你可以用 Python 编写一个在命令行上运行的应用程序。Yum 包管理器是用 Python 编写的。

一切都取决于你想做什么。

# python - Get the time a file was last editted in python

> ID：14572927
> 
> 赞同：1
> 
> 时间：2013-01-28T23:07:05.043
> 
> 标签：python, time

I've looked around on SO and various other websites and thought I figured this out, but apparently I didn't or I'm doing something wrong. Here is what I have tried:

```
pre = datetime.fromtimestamp(f)
pre = os.path.getmtime(f)
pre = fromtimestamp(f) 
```

All three return the error:

```
TypeError: an integer is required 
```

I did some digging and found this for what a lot of people have suggested:

```
os.path.getmtime(path)¶ 
Return the time of last modification of path. The return value is a number giving the number of seconds since the epoch (see the time module). Raise os.error if the file does not exist or is inaccessible.

New in version 1.5.2.

Changed in version 2.3: If os.stat_float_times() returns True, the result is a floating point number. 
```

So now I am faced with the problem, how do I get it to be an integer value so I can compare this time with another after reading a file to determine if the file changed while parsing.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:12:19.603

`os.path.getmtime` takes a file path, not a file object:

```
>>> os.path.getmtime('/')
1359405072.0 
```

If `f` is an open file, try passing in `f.name`.

# javascript - jQuery css 回调函数

> ID：14572928
> 
> 赞同：7
> 
> 时间：2013-01-28T23:07:06.987
> 
> 标签：javascript, jquery, css, css-animations

我正在尝试使用 jQuery 扩展我的搜索栏。我也想隐藏导航链接。

我有一些这样的 jQuery 代码。此代码在焦点时工作正常。

```
$(".searchBox input").focus(function(){
    $("#navlinks").css('display','none');
   $(this).css({'width':'200px','-moz-transition':'width 0.5s ease-out','-webkit-transition':'width 0.5s ease-out','transition':'width 0.5s ease-out'});
});

 $(".searchBox input").focus(function(){
       $(this).css({'width':'100px','-moz-transition':'width 0.5s ease-out','-webkit-transition':'width 0.5s ease-out','transition':'width 0.5s ease-out'});
$("#navlinks").css('display','block');
    }); 
```

第二个功能也很好用`except it display the content before animation complete.`

所以我只想`$("#navlinks").css('display','block');`在动画完成时被执行。

谁能告诉我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T23:09:40.770

.css() 没有回调函数，但 .animate() 有。只需将时间设置为 0 并使用动画。

```
$(".searchBox input").on('focus',function(){
   $(this).animate({width:100,mozTransition:'width 500ms ease-out',webkitTransition:'width 500ms ease-out',transition:'width 500ms ease-out'},0,function(){
       $("#navlinks")
            .delay(500)
            .css({display:'block'});
   });
}); 
```

编辑：包括延迟，这是必需的。（感谢 eicto）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T23:14:53.003

既然您知道动画需要多长时间，为什么不在 CSS 更改后使用 setTimeout() 呢？据我所知，您的动画大约需要 0.5 秒。您可以在动画结束时轻松地无缝执行“回调”，指定相同的时间量（以毫秒为单位）。

```
 $(".searchBox input").focus(function(){
       $(this).css({'width':'100px','-moz-transition':'width 0.5s ease-out','-webkit-transition':'width 0.5s ease-out','transition':'width 0.5s ease-out'});
       setTimeout( function() {
            $("#navlinks").css('display','block');
       }, 500);
  }); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T23:17:28.077

我建议使用`.animate()`like

```
$(".searchBox input").focus(function(){
    $(this).animate({
        'width': '100px'       
    }, 500, function() {
        $("#navlinks").css('display', 'block');
    });
}); 
```

这将适用于所有浏览器，并且 navlinks 命令将确保在动画完成后开始。注意：`500`是动画完成所需的毫秒数，因此您可以进行相应调整。

这是`.animate()`文档： [http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-09T10:32:32.043

我来到这里，但我使用了另一种解决方案：

```
$('.something').one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",
    function(event) {
        // Do something when the transition ends

 }); 
```

如您所见，当过渡结束时，这正在做某事。

此处对此进行了描述：http: [//blog.teamtreehouse.com/using-jquery-to-detect-when-css3-animations-and-transitions-end](http://blog.teamtreehouse.com/using-jquery-to-detect-when-css3-animations-and-transitions-end)

问候，
拉斯

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-28T23:21:34.950

[这](https://developer.mozilla.org/en-US/docs/CSS/Tutorials/Using_CSS_transitions#Detecting_the_completion_of_a_transition)是描述 `transitionend`的事件，让我们尝试一下：

CSS：

```
#test {
    width: 100px;
    border: 1px solid black;
    -webkit-transition: all 1s;
    -moz-transition all 1s;
    transition all 1s;
}
#test.wide {
    width: 200px;

} 
```

JS：

```
var test = $('#test');
 test.bind('transitionend webkitTransitionEnd oTransitionEnd', function () {
        $('body').append('<div>END!</div>');
    })
$('button').click(function () {
    test.toggleClass('wide');
}); 
```

[演示](http://jsfiddle.net/oceog/nUVU8/)

# numpy - 2D 网格中 scipy 标记区域周围的轮廓

> ID：14572933
> 
> 赞同：3
> 
> 时间：2013-01-28T23:07:26.310
> 
> 标签：numpy, scipy, gis

我正在尝试在具有较大无数据值 (1e6) 的 2D 网格中找到所有整体的边界多边形。我已经列出了使用 scipy 的标签工作的孔。在不深入 gdal 的多边形化的情况下，是否有一种简单的方法可以生成边界多边形？我看到有 matplotlib.pylab.contour，但这试图绘制一个我真的不想要的图。关于如何为每个标签获取边界多边形的任何建议（如果可能的话，最好用一种简化多边形的方法）？我敢肯定我可以写一些东西来跨越每个标记的洞的边界，但是有什么东西已经存在了吗？

```
from osgeo import gdal
from scipy import ndimage

dem_file = gdal.Open('dem.tif')
dem = dem.file.GetRasterBand(1).ReadAsArray()

# Get a binary image of the no-data regions.  The no-data value is large
bin = dem > 9e5

# Find all the wholes.  Anything with a label > 0.
labels, num_labels = ndimage.measurements.label(bin)
num_labels
1063

# The hole's label and size. Skip 0 as that label has all the valid data.
holes = [(label, sum(labels==label)) for label in range(1, num_labels)]
holes[:3]
[(1, 7520492),
 (2, 1),
 (3, 1),] 
```

例如，而不是计数，我正在寻找在 qgis 中查看的所有这些白色区域的边界，这是使用 gdal_polygonalize.py 完成的。

![qgis中的gdal_polygonalize.py等高线图](../Images/0335618aea2f259c893d0cbcd1cd1b36.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T19:29:34.050

感谢 Joe Kington 将我指向 Scikit Image。

```
from skimage import measure
contours = measure.find_contours(labels, 1)

contours[-1]
array([[ 2686.99905927,  1054\.        ],
       [ 2686\.        ,  1053.00094073],
       [ 2685.00094073,  1054\.        ],
       [ 2686\.        ,  1054.99905927],
       [ 2686.99905927,  1054\.        ]])

imshow(labels)
for n, contour in enumerate(contours):
    plt.plot(contour[:,1], contour[:, 0], linewidth=2) 
```

放大左下角后：

![在此处输入图像描述](../Images/fd132bb67c50398fc53e9179188d8597.png)

# accurev - AccuRev：支持流中的某些文件不在我的工作区中，也没有丢失

> ID：14572934
> 
> 赞同：1
> 
> 时间：2013-01-28T23:07:27.537
> 
> 标签：accurev

更新后，AccuRev 支持流中的 3 个文件不在我的工作区中。

我尝试过的一些事情：

*   检查失踪搜索。无论有无时间戳优化，它们都不会显示。

*   递归填充丢失文件所在目录的父级（不）。一无所获。

*   手动从同一流下的另一个工作区复制它们，它们确实显示在那里。这些副本在我的工作区中显示为外部，所以我删除了它们。

*   按照[这个问题](https://stackoverflow.com/questions/7046595/accurev-treats-most-of-the-source-tree-in-workspace-as-external)，做到了`accurev show -fx wspaces`。该工作空间的 Target_trans 与 Trans 相同。

*   `accurev update -9`反正跑了。AccuRev 说一切都是最新的，无事可做。

其他可能相关的信息：

*   两个工作区位于同一支持流之外的同事拥有我丢失的文件。

*   所有 3 个“丢失”文件都位于最近重命名的 2 个目录之一中。

*   流层次结构很浅，后备流和根之间只有一个父级。但是，该父流并不总是存在。它是最近插入的，我们先前版本的所有更改都已调色板，因此支持流的问题列表将仅反映自先前版本以来的更改，而不是自一开始以来的更改。它产生了这种效果，没有其他我知道的异常情况。

我可以放弃这个工作区并创建一个新工作区，但如果我不必这样做，我宁愿不这样做。任何进一步的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T21:32:06.013

他们可以被排除在外吗？

检查您的包含/排除规则。

如果不是，请创建一个新工作区。如果它们出现在新工作区中，只需删除旧工作区即可。我以前见过这个问题。

# perl - HTML 实体编码实体编号

> ID：14572936
> 
> 赞同：0
> 
> 时间：2013-01-28T23:08:03.207
> 
> 标签：perl, html-entities

我有一个测试字符串，如：

```
my $input = "testing &test &#8360;";
my $output = HTML::Entities::encode_entities($str,"<>&\"'"); 
```

所需的输出是

```
testing &amp;test &#8360; 
```

但是 HTML::Entities::encode_entities 将其编码为

```
testing &amp;test &amp;#8360; 
```

总而言之，我希望 HTML::Entities 仅在它不代表 HTML 实体编号时才对“&”字符进行编码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T23:47:14.677

您需要先*解码*字符串，然后对其*进行编码*：

```
#!/usr/bin/env perl
use strict; use warnings; use v5.10;
use HTML::Entities ();
my $input = "testing &test &#8360;";
$input = HTML::Entities::encode( HTML::Entities::decode( $input ) );
say $input; 
```

结果是

```
testing &amp;test &#x20A8; 
```

`20A8`是 的十六进制版本`8360`。

# active-directory - ActiveDirectory 用户未在 WC 门户应用程序中访问 UCM 内容

> ID：14572938
> 
> 赞同：0
> 
> 时间：2013-01-28T23:08:19.907
> 
> 标签：active-directory, portal, webcenter, oracle-ucm

解决方案：**我将安全组添加到 UCM 中并且可以正常工作！**

我有一个 Webcenter 工具（UCM、Portal）版本 11.1.6

当我将 ActiveDirectory(AD) 与 UCM 和 Portal 一起使用时，该组的角色不会转换为 UCM 角色。

我使用此参考在此处配置 Weblogic+AD+Uenter 代码：http://poornimabalagopal.blogspot.com.br/2012/04/integrating-microsofts-active-directory.html[没有](http://poornimabalagopal.blogspot.com.br/2012/04/integrating-microsofts-active-directory.html) 配置凭据映射，因为在 11g 版本中没有必要根据文件。我的服务器 weblogic 是一个集群。

如果我登录 weblogic，我可以看到 AD 用户的 AD 组。

如果我用这个 AD 用户登录 UCM 控制台，我可以正常看到内容。

如果我使用此用户登录 webcenter 门户应用程序，则不会显示内容。我为此使用了内容演示器。

生成的 UCM 服务器日志如下所示：

```
An error has occurred. The stack trace below shows more information.
!csUserEventMessage,mg96030,CIS!$!csUnableToGetRevInfo2,DEV006815!csUserInsufficientAccess3,mg96030
intradoc.common.ServiceException: !csUnableToGetRevInfo2,DEV006815!csUserInsufficientAccess3,mg96030
*ScriptStack DOC_INFO_BY_NAME
3:vcrGetDocInfoByName,dDocName=DEV0068153:checkSecurity,dID=12442,dDocName=DEV006815
at intradoc.server.ServiceRequestImplementor.buildServiceException(ServiceRequestImplementor.java:2115)
at intradoc.server.Service.buildServiceException(Service.java:2326)
at intradoc.server.Service.createServiceExceptionEx(Service.java:2320)
at intradoc.server.ServiceSecurityImplementor.validateSecurityPrivilegeLevel(ServiceSecurityImplementor.java:819)
at intradoc.server.DocumentAccessSecurity.checkSecurity(DocumentAccessSecurity.java:192)
at intradoc.server.DocumentAccessSecurity.checkSecurity(DocumentAccessSecurity.java:138)
at intradoc.server.ServiceSecurityImplementor.checkSecurity(ServiceSecurityImplementor.java:373)
at intradoc.server.Service.checkSecurity(Service.java:2904)
at intradoc.server.Service.checkSecurity(Service.java:2882)
at sun.reflect.GeneratedMethodAccessor345.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at intradoc.common.IdcMethodHolder.invokeMethod(IdcMethodHolder.java:86)
at intradoc.common.ClassHelperUtils.executeMethodEx(ClassHelperUtils.java:310)
at intradoc.common.ClassHelperUtils.executeMethod(ClassHelperUtils.java:295)
at intradoc.server.Service.doCodeEx(Service.java:620)
at webdavcomponent.WebdavHandler.checkSecurity(WebdavHandler.java:686)
at sun.reflect.GeneratedMethodAccessor344.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at intradoc.common.IdcMethodHolder.invokeMethod(IdcMethodHolder.java:86)
at intradoc.common.ClassHelperUtils.executeMethodReportStatus(ClassHelperUtils.java:324)
at intradoc.server.ServiceHandler.executeAction(ServiceHandler.java:79)
at intradoc.server.Service.doCodeEx(Service.java:603)
at collections.CollectionUserHandler.checkSecurity(CollectionUserHandler.java:1429)
at sun.reflect.GeneratedMethodAccessor343.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at intradoc.common.IdcMethodHolder.invokeMethod(IdcMethodHolder.java:86)
at intradoc.common.ClassHelperUtils.executeMethodReportStatus(ClassHelperUtils.java:324)
at intradoc.server.ServiceHandler.executeAction(ServiceHandler.java:79)
at intradoc.server.Service.doCodeEx(Service.java:603)
at intradoc.server.Service.doCode(Service.java:575)
at intradoc.server.ServiceRequestImplementor.doAction(ServiceRequestImplementor.java:1643)
at intradoc.server.Service.doAction(Service.java:547)
at intradoc.server.ServiceRequestImplementor.doActions(ServiceRequestImplementor.java:1458)
at intradoc.server.Service.doActions(Service.java:542)
at intradoc.server.ServiceRequestImplementor.executeActions(ServiceRequestImplementor.java:1391)
at intradoc.server.Service.executeActions(Service.java:528)
at intradoc.server.ServiceRequestImplementor.executeServiceDirect(ServiceRequestImplementor.java:1136)
at intradoc.server.ServiceRequestImplementor.executeServiceSimple(ServiceRequestImplementor.java:1076)
at intradoc.server.Service.executeServiceSimple(Service.java:4007)
at intradoc.server.vcr.VcrServiceHandler.vcrGetDocInfoByName(VcrServiceHandler.java:592)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at intradoc.common.IdcMethodHolder.invokeMethod(IdcMethodHolder.java:86)
at intradoc.common.ClassHelperUtils.executeMethodReportStatus(ClassHelperUtils.java:324)
at intradoc.server.ServiceHandler.executeAction(ServiceHandler.java:79)
at intradoc.server.Service.doCodeEx(Service.java:603)
at intradoc.server.Service.doCode(Service.java:575)
at intradoc.server.ServiceRequestImplementor.doAction(ServiceRequestImplementor.java:1643)
at intradoc.server.Service.doAction(Service.java:547)
at intradoc.server.ServiceRequestImplementor.doActions(ServiceRequestImplementor.java:1458)
at intradoc.server.Service.doActions(Service.java:542)
at intradoc.server.ServiceRequestImplementor.executeActions(ServiceRequestImplementor.java:1391)
at intradoc.server.Service.executeActions(Service.java:528)
at intradoc.server.ServiceRequestImplementor.doRequest(ServiceRequestImplementor.java:737)
at intradoc.server.Service.doRequest(Service.java:1956)
at intradoc.server.ServiceManager.processCommand(ServiceManager.java:437)
at intradoc.server.IdcServerThread.processRequest(IdcServerThread.java:265)
at intradoc.server.IdcServerThread.run(IdcServerThread.java:160)
at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:545)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:256)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:221) 
```

我找不到任何配置错误。我迷路了！

# iphone - iOS NSDictionary 错误

> ID：14572941
> 
> 赞同：-1
> 
> 时间：2013-01-28T23:08:24.633
> 
> 标签：iphone, ios, json, cocoa-touch, nsdictionary

我在这里解析 JSON 并正确获取数据。但是，当我尝试将信息放入 NSDictionary 并阅读时，我收到此错误

```
'NSInvalidArgumentException', reason: '-[__NSCFArray objectForKey:]: unrecognized selector sent to instance 0x1cda3d50' 
```

这是代码

```
 if (data != nil) {

    NSDictionary *res = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableLeaves error:&error];

    NSDictionary *dic = [[res objectForKey:@"data"] objectForKey:@"current_condition"];
    self.location = [[dic objectForKey:@"request"]objectForKey:@"query"];
} 
```

关于这里出了什么问题的任何想法？谢谢。

编辑

这是我登录 NSDictionary *res 时得到的

```
 data =     {
    "current_condition" =         (
                    {
            cloudcover = 100;
            humidity = 86;
            "observation_time" = "11:11 PM";
            precipMM = "2.2";
            pressure = 1019;
            "temp_C" = 1;
            "temp_F" = 34;
            visibility = 8;
            weatherCode = 296;
            weatherDesc =                 (
                                    {
                    value = "Light rain";
                }
            );
            weatherIconUrl =                 (
                                    {
                    value = "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0033_cloudy_with_light_rain_night.png";
                }
            );
            winddir16Point = SSW;
            winddirDegree = 210;
            windspeedKmph = 15;
            windspeedMiles = 9;
        }
    );
    request =         (
                    {
            query = "North Massapequa, United States Of America";
            type = City;
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:10:20.420

您的 JSON 对象可能在您期望字典的某个位置包含一个数组（您发送`objectForKey:`到一个数组对象）。

尝试将 JSON 转储到某个地方，并确保它采用您期望的格式。

编辑：正如您从转储中看到的，`res[@"request"]`是一个数组（它有`()`）。`objectForKey:@"query"`因此，您正在调用`request`数组并崩溃。

试试`self.location = [[[res objectForKey:@"request"] objectAtIndex:0] objectForKey:@"query"];`吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T23:43:57.453

您误解了`NSDictionary`日志的输出，我认为这是一个长期存在的错误。

输出如下所示：

```
data =     {
    "current_condition" =         (
                    {
            cloudcover = 100; 
```

这隐藏了数据的实际形状。看到数据、current_condition、weatherDesc 等行 = 之后的长时间中断了吗？那里应该有一个换行符，所以输出如下所示：

```
data =
{
    "current_condition" = 
    (
        {
            cloudcover = 100; 
```

() 表示一个数组。（是的，即使 [] 在其他地方使用。这个输出是旧的和硬壳的，我怀疑 Apple 可以在不破坏代码的情况下修复它，即使他们突然认为它很重要。）

这显示了数据的真实形状：`current_condition`是一个数组。字典是数组中的第一个（索引 0）对象，而不是数组本身。

在整个数据中，这看起来像这样：

```
data =
{
    "current_condition" = 
    (
        {
            cloudcover = 100;
            humidity = 86;
            "observation_time" = "11:11 PM";
            precipMM = "2.2";
            pressure = 1019;
            "temp_C" = 1;
            "temp_F" = 34;
            visibility = 8;
            weatherCode = 296;
            weatherDesc =
            (
                {
                    value = "Light rain";
                }
            );
            weatherIconUrl =
            (
                {
                    value = "http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0033_cloudy_with_light_rain_night.png";
                }
            );
            winddir16Point = SSW;
            winddirDegree = 210;
            windspeedKmph = 15;
            windspeedMiles = 9;
        }
    );
} 
```

适当地调整你的代码以获得额外的间接级别，你应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T23:19:45.780

`-[__NSCFArray objectForKey:]: unrecognized selector`- 你可以在这里看到，很明显，你正在尝试调用`objectForKey:`数组。

这里：

```
self.location = [[dic objectForKey:@"request"]objectForKey:@"query"]; 
```

`dic`是一个数组：

```
data =     {
    "current_condition" =         ( // <--- array 
```

可能你想做：

```
self.location = [[res objectForKey:@"request"]objectForKey:@"query"]; // res, not dic 
```

但`request`也是一个数组，你仍然会得到完全相同的错误......

# android - 使用 PhoneGap 在所有设备上保持恒定的视口大小

> ID：14572943
> 
> 赞同：2
> 
> 时间：2013-01-28T23:08:53.390
> 
> 标签：android, cordova, viewport

我有恰好 480 像素宽度的 PhoneGap Android 应用程序，我想在每个可能的 Android 设备上将视口大小设置为这个大小

我试过这个标签：

```
<meta name="viewport" content="width=480, user-scalable=no" /> 
```

但是我测试过的所有设备和模拟器都忽略了它。然后我尝试了：

```
<meta name="viewport" content="width=device-width, initial-scale=0.67, minimum-scale=0.67, maximum-scale=0.67, user-scalable=no, target-densityDpi=device-dpi" /> 
```

这有效，但仅在某些（较小的）设备上有效。在 mu Samsung GT 上，它提供正确的 480 像素宽视口，但在平板电脑上启动时，它提供 800 像素宽视口。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T00:52:27.013

经过几个小时的调试，我终于找到了解决方案：

WebView*将*忽略视口的宽度，除非明确告知要在 OverviewMode 中加载。因此，如果有人从 Google 来到这里，解决方案如下：

添加到您的 Java 源代码：

```
public class YourGame extends DroidGap
{       
    super.onCreate(savedInstanceState);
    super.init(); // Don't forget this, you'll get runtime error otherwise!

    // The following does the trick:
    super.appView.getSettings().setUseWideViewPort(true);
    super.appView.getSettings().setLoadWithOverviewMode(true);

    super.loadUrl("file:///android_asset/www/index.htm");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-08T13:52:42.550

不知道为什么，但我必须`, target-densityDpi=device-dpi`从视口标签中删除才能让它工作——接受的答案对我没有帮助。

*使用三星 Galaxy Nexus*

# macros - SAS：将格式放入宏中

> ID：14572950
> 
> 赞同：0
> 
> 时间：2013-01-28T23:09:25.217
> 
> 标签：macros, sas

我正在尝试通过为现有变量分配格式来创建新变量。我正在从宏中执行此操作。我收到以下错误：“：需要格式名称。” 关于如何解决的任何想法？谢谢！

```
/* macro to loop thru a list of vars and execute a code block on each. This is working     fine. */ 
%macro iterlist  
( 
  code =  
 ,list = 
) 
;  
  %*** ASSIGN EACH ITEM IN THE LIST TO AN INDEXED MACRO VARIABLE &&ITEM&I ; 
  %let i = 1; 
  %do %while (%cmpres(%scan(&list., &i.)) ne ); 
    %let item&i. = %cmpres(%scan(&list., &i.));  
    %let i = %eval((&i. + 1);  
  %end; 
  %*** STORE THE COUNT OF THE NUMBER OF ITEMS IN A MACRO VARIABLE: &CNTITEM; 
  %let cntitem = %eval((&i. - 1); 

  %*** EXPRESS CODE, REPLACING TOKENS WITH ELEMENTS OF THE LIST, IN SEQUENCE; 
  %do i = 1 %to &cntitem.;                                        
    %let codeprp = %qsysfunc(tranwrd(&code.,?,%nrstr(&&item&i..))); 
    %unquote(&codeprp.) 
  %end;  
%mend  iterlist; 

/* set the list of variables to iterate thru  */ 
%let mylist = v1 v2 v3 v4; 

 /* create a contents table to look up format info to assign in macro below*/ 
proc contents data=a.recode1 noprint out=contents; 
run; 

/* macro to create freq and chisq tables for each var */ 

%macro runfreqs (variabl = );
proc freq data=a.recode1 noprint ; 
    tables &variabl.*improved /out=&variabl._1 chisq; 
    output out=&variabl.chisq n pchi  ;
run;  

    /* do some more stuff with the freq tables, then grab format for variable from contents */ 
data _null_; 
    set contents; 
    if name="&variabl." then CALL SYMPUT("classformat", format); 

run; 

data &variabl._3; 
length classvalue $ 30 ; 
    set &variabl._2; ; 

            /* output a new var using the macro variable for format that we pulled from contents above. Here's where the error occurs.  */ 
    classvalue=put(class, %quote(&classformat.));  

run; 

%mend  runfreqs; 

* run the macro, iterating thru var list and creating freq tables; 
%ITERLIST(list = &mylist., code = %nrstr(%runfreqs(variabl = ?);)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T09:56:04.803

只是猜测，线

```
classvalue=put(class, %quote(&classformat.)); 
```

应该

```
classvalue=put(class, &classformat..); 
```

两点，因为一是被宏处理器“吃掉”以标记宏变量名称的结尾，二是需要完成格式名称。我相信你不需要`%quote()`在你的情况下 - 格式名称不能包含由`%quote()`.

编辑：再次没有尝试，只是基于我看到的代码你还需要更改`CALL SYMPUT("classformat", format);` 为`CALL SYMPUTX("classformat", format);`

CALL SYMPUTX() 是 CALL SYMPUT() 的高级版本，它删除宏变量值中的尾随空格，而原始版本保留空格。实际上，这将与您的解决方案相同，只是更简单。所以问题确实是格式名称和句点之间有多余的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:56:18.957

不知道为什么这行得通，而 vasja 的想法却行不通，但问题显然在于格式名称末尾的句点（或者可能是一些额外的空白？）。我更改了数据步骤以在 SYMPUT 调用之前添加句点：

```
data _null_; 
set contents; 
myformat=catt(format,'.'); 
if name="&variabl." then CALL SYMPUT("classformat", myformat); 
run; 
```

# php - 分享按钮不会显示

> ID：14572951
> 
> 赞同：0
> 
> 时间：2013-01-28T23:09:29.663
> 
> 标签：php, html, wordpress, share, share-button

我创建了一个自定义博客页面来配合我的 WordPress 网站。此页面仅显示博客提要的 1 个类别。我添加了“AddThis”插件共享按钮并在主题中手动编码。

问题是按钮不会显示。我已经尝试在页面中添加其他共享插件，但它们也不会显示。现在，这些按钮确实可以在其他博客页面和文章本身上显示。

这是页面的网站和代码，是我遗漏了什么还是需要更改一行代码？

[带有非工作共享按钮的页面](http://www.easycarebaths.com/online-reviews/)

[带有工作共享按钮的页面](http://www.easycarebaths.com/mr-mrs-langton-newport-mi/)

```
<?php /* Template Name: Page - Online Reviews */ ?> 
```

```
 <div class="main_container">
        <div class="page_container">

    <h2 style="border-bottom: solid thin #000; line-height: 50px; margin-bottom: 50px;"><?php the_title(); ?></h2>
    <?php
    $temp = $wp_query;
    $wp_query = NULL;
    $wp_query = new WP_Query();
    $wp_query->query('cat=4&paged='.$paged); $tb_counter = 1;
    while ($wp_query->have_posts()) : $wp_query->the_post(); ?>
    <div <?php if(function_exists('post_class')) : ?><?php post_class(); ?><?php else : ?>class="post post-<?php the_ID(); ?>"<?php endif; ?>>
        <h3><a href="<?php the_permalink(); ?>" rel="bookmark" title="<?php printf(__('Permanent Link to %s','easycarebath'),the_title_attribute('echo=0')); ?>"><?php the_title(); ?></a></h3>
            <a href="<?php the_permalink(); ?>" title="<?php echo esc_attr( sprintf( __( '%s', 'easycarebath' ), the_title_attribute( 'echo=0' ) ) ); ?>" rel="bookmark"><?php the_post_thumbnail(); ?></a>
            <?php the_content(); ?>
            <!-- AddThis Button BEGIN -->
            <div class="addthis_toolbox addthis_default_style ">
                <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
                <a class="addthis_button_tweet"></a>
                <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
                <a class="addthis_button_linkedin_counter"></a>
                <a class="addthis_counter addthis_pill_style"></a>
            </div>
            <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
            <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4dd51ec729a7fec7"></script>
            <!-- AddThis Button END -->
    <footer class="entry-meta">
    <?php the_time(__('M d, Y', 'easycarebath')); ?> | <?php _e('Categories:','easycarebath'); if (the_category(', '))  the_category(); ?> <?php if (get_the_tags()) the_tags(__('| Tags: ','easycarebath')); ?> | <?php comments_popup_link(__('Leave A Comment »', 'easycarebath'), __('1 Comment »', 'easycarebath'),__ngettext('% Comment »', '% Comments »',get_comments_number (),'easycarebath')); ?> <?php edit_post_link(__('Edit','easycarebath'), '| ', ''); ?>
    </footer>
    <?php $tb_counter++; endwhile; ?>
    <nav id="nav-below" class="navigation" role="navigation">
        <div class="nav-previous alignright"><?php next_posts_link(__('&laquo; Older Entries','easycarebath')); ?></div>
        <div class="nav-next alignleft"><?php previous_posts_link(__('Newer Entries &raquo;','easycarebath')); ?></div>
    </nav>
    <?php $wp_query = NULL; $wp_query = $temp;?>

        </div>
        <?php get_sidebar(); ?>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:13:27.787

我发现了问题。问题不是代码，而是传输没有正确保存代码。重新启动程序后，我能够保存代码并且能够显示共享按钮。

感谢大家的尝试，这是一个软件问题。:)

# php - codeigniter 上传目录，取消链接照片

> ID：14572953
> 
> 赞同：1
> 
> 时间：2013-01-28T23:09:39.637
> 
> 标签：php, codeigniter

我正在使用 codeigniter 创建我网站的管理面板。我没有将它用于前端，因为我在前端有很多静态页面，只有少数东西需要是动态的，所以我将使用核心 PHP 查询来做。

我取消链接照片的链接是，images 是控制器，unlinkPhoto 是函数，32 是图像 ID。

```
localhost/admin/index.php/images/unlinkPhoto/32 
```

## 编辑

但是我的图像位于 `localhost/uploads/testimage.jpg.` 如何指向该文件夹以取消链接 codeigniter 中的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T23:16:11.200

您确实需要确保执行了体面的安全协议，否则任何人都可以伪造 GET 请求并删除您上传的整个文件。这是一个基本的解决方案：

```
public function unlinkPhoto($photoId)
{
   // Have they specified a valid integer?
   if ((int) $photoId > 0) {
      foreach (glob("uploads/*") as $file) {
         // Make sure the filename corresponds to the ID
         // Caters for all file types (not just JPGs)
         $info = pathinfo($file);
         if ($info['filename'] == $photoId) {
            unlink($file);
         }
      }
   }
} 
```

如果您使用的是 PHP 5.4，则可以进一步减少此代码：

```
if (pathinfo($file)['filename'] == $photoId) {
   unlink($file);
} 
```

因为他们已经[实现了数组取消引用](http://php.net/manual/en/migration54.new-features.php)（最终）。虽然我还没有测试过这段特定的代码。这只是一个令人讨厌的附录。

# jquery - JQuery通过表单拖放项保存

> ID：14572958
> 
> 赞同：0
> 
> 时间：2013-01-28T23:09:56.887
> 
> 标签：jquery, forms, cart

我已经使用了一些代码来拖放项目，这一切都有效。我需要创建一个表单，以便我可以保存已添加的选定项目，在 PHP mySQL 站点中执行此操作的最佳方法是什么

（我正在构建一个 Joomla 组件顺便说一句）

```
 // jQuery Ui Droppable
    $(".basket").droppable({

        // The class that will be appended to the to-be-dropped-element (basket)
        activeClass:"active",

        // The class that will be appended once we are hovering the to-be-dropped-element (basket)
        hoverClass:"hover",

        // The acceptance of the item once it touches the to-be-dropped-element basket
        // For different values http://api.jqueryui.com/droppable/#option-tolerance
        tolerance:"touch",
        drop:function (event, ui) {

            var basket = $(this),
                    move = ui.draggable,
                    itemId = basket.find("ul li[data-id='" + move.attr("data-id") + "']");

            // To increase the value by +1 if the same item is already in the basket
            if (itemId.html() != null) {
                itemId.find("input").val(parseInt(itemId.find("input").val()) + 1);
            }
            else {
                // Add the dragged item to the basket
                addBasket(basket, move);

                // Updating the quantity by +1" rather than adding it to the basket
                move.find("input").val(parseInt(move.find("input").val()) + 1);
            }
        }
    });

    // This function runs onc ean item is added to the basket
    function addBasket(basket, move) {
        basket.find("ul").append('<li data-id="' + move.attr("data-id") + '">'
                + '<span class="name">' + move.find("h3").html() + '</span>'
                + '<input class="count" value="1" type="text">'
                + '<button class="delete">&#10005;</button>');
    }

    // The function that is triggered once delete button is pressed
    $(".basket ul li button.delete").live("click", function () {
        $(this).closest("li").remove();
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:40:52.823

您的问题有点不清楚，但假设您只想根据会话保存移动的 ID，您可以创建一个服务器端脚本，您可以将 ID 发布到：

```
function addBasket(basket, move) {
   //existing code snipped
   $.post('/addbasket/', {id: move.data('id')}).done(function () {
      console.log('Basket item saved');
   });
} 
```

# php - 可以将表单输入直接加载到 DOMDocument 类中吗？

> ID：14572960
> 
> 赞同：0
> 
> 时间：2013-01-28T23:10:03.643
> 
> 标签：php, domdocument, input-sanitization

我构建了一个接受任意 HTML 的工具，收集所有类和 id 并将它们输出回页面。我担心安全问题。我一直在使用 HTML Purifier 过滤输入，但我需要支持 HTML5，而 HTML Purifier 不支持。

这是该工具的要点：

```
$html=$_POST['html'];
$doc = new DOMDocument();
$doc->loadHTML($html);
$xpath = new DOMXpath($doc);
$elements = $xpath->query("//body");

foreach ($elements as $element) { 
    $nodes = $element->childNodes;     
    $output=write_selectors($nodes);
}

function write_selectors($nodes){
    foreach($nodes as $node){
        $node->getAttribute('id');
        .
        .
        .
        $node->getAttribute('class');
        .
        .
        .
    }
    .
    .
    .   
    return 'string containing all classes and ids in the document' 
}
.
.
.
echo htmlentities($output, ENT_QUOTES); 
```

我的问题是：

似乎有人可以将这样的字符串放入工具中：`'<div '); do_bad_stuff( 'ha_ha_ha'`最终`$doc->loadHTML($html);`会说`$doc->loadHTML('<div '); do_bad_stuff( 'ha_ha_ha');`

当我尝试输入这样有趣的业务时，似乎 DOMDocument 只是错误，但**我应该做些什么来防止恶意输入吗？如果不是，为什么不呢？**

其次，htmlentities 是否足以清理输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:42:40.643

1.  不，它永远不会那样做。您在变量中有 $html 并将该变量直接发送到函数中。

2.  是的，我个人会使用 htmlspecialchars，但是 htmlentities 可以很好地保护您免受 XSS 攻击。

# azure - 在 Azure 网站预览中删除服务器和 X-Powered-By HTTP 标头

> ID：14572961
> 
> 赞同：4
> 
> 时间：2013-01-28T23:10:20.240
> 
> 标签：azure

为了安全起见，我想删除任何显示有关我的应用程序正在运行的操作系统、Web 服务器或框架的详细信息的 HTTP 标头。我能够使用在 SO 和其他地方找到的文章从 IIS Express 本地显示中删除所有内容。不幸的是，当我发布到我的 Azure 网站预览版时，仍然保留了三个标题：

1.  服务器：Microsoft-IIS/7.5
2.  X-Powered-By: ARR/2.5
3.  X-Powered-By: ASP.NET

我找到的文章是针对 Azure Web 角色而不是网站预览的，例如[这篇](http://blog.paulbouwer.com/2013/01/09/asafaweb-excessive-headers-and-windows-azure/).

有谁知道如何从网站预览中删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T23:31:53.527

Windows Azure 网站是共享基础架构，您无法像在 Web 角色中那样配置 IIS。正如您正确指出的那样，您可以删除这些标题：

*   **X-AspNet-版本**
*   **X-AspNetMvc-版本**

但剩下以下内容：

*   **服务器：Microsoft-IIS/7.5**
*   **X-Powered-By: ARR/2.5**
*   **X-Powered-By: ASP.NET**

即使您实施了所有必要的步骤来抑制这些标头，您也会从我的博客[文章](http://blog.paulbouwer.com/2013/01/09/asafaweb-excessive-headers-and-windows-azure/)中看到非法请求将由**HTTP.SYS**在内核级别处理，这将返回**Microsoft-HTTPAPI/2.0**标头。您需要编辑注册表以删除此标头。

结论是，如果您想要最终控制 IIS 和 HTTP.SYS，您将需要在非共享基础架构中托管您的网站。因此，您的选择是 Windows Azure 云服务中的 Web 角色。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-20T17:37:11.517

现在这是[可能的](https://feedback.azure.com/forums/169385-web-apps/suggestions/4152396-support-disabling-headers-in-azure-web-sites)。另请参阅[删除服务器响应标头 IIS7](https://stackoverflow.com/questions/1178831/remove-server-response-header-iis7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T04:22:34.040

检查此线程[如何删除 ASP.Net MVC 默认 HTTP 标头？](https://stackoverflow.com/questions/3418557/how-to-remove-asp-net-mvc-default-http-headers)不仅是主要回应，还有以下回应。

# php - 表单在输入时添加新行，为 sql 设置

> ID：14572963
> 
> 赞同：0
> 
> 时间：2013-01-28T23:10:24.427
> 
> 标签：php, javascript, sql, forms, newline

关于这个主题有很多小信息，也许我只是没有找对地方。但我想把它们放在一个地方。从头到尾。

我正在尝试制作一个非常类似于我现在在堆栈溢出时使用的表单。有一个`textarea`，当有人点击回车时，它不会提交表单，而是添加一个新行。但它不显示`\n`或`<br \>`在实际的文本框中。

然后需要将具有所有结构完整性的文本输入数据库并检索到 xhtml 页面。

我听说过使用 javascript。我听说过这个`nl2br`功能。它们似乎都是拼图的一部分，但我找不到大局。

有没有人有一个从头到尾的示例脚本，他们将如何完成这个？

非常感谢您的帮助！我希望其他有困难的人也可以使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:14:50.993

You need to create a regular `<textarea>`, and save its raw text to the database. (making sure to use parameters to prevent SQL injection)

Then, when you want to display the text, use `<pre>` or `nl2br()` to ensure that the newlines are displayed by the browser.

# wordpress - Wordpress 嵌套短代码不起作用

> ID：14572964
> 
> 赞同：1
> 
> 时间：2013-01-28T23:10:26.190
> 
> 标签：wordpress, nested, shortcode

您好，我正在尝试将我的 grid.css 文件转换为 wordpress 短代码，但是我遇到了问题。

我想看到的：

```
<div class="row>
    <div class="columns one">Content</div>
    <div class="columns three">Content</div>
</div> 
```

我得到什么：

```
[column_one]Awesome[/column_one] [column_three]Stuff[/column_three] 
```

我的代码：

```
<?php while ( have_posts() ) : the_post();
$content = get_the_content();
echo do_shortcode($content);
endwhile; // end of the loop. ?> 
```

我正在一个简单的页面模板上尝试这个。

我怎样才能让它正常工作？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:03:47.333

您不需要在循环中添加 do_shortcode 。最好将它添加到 functions.php 文件中，如下所示：

```
function column_one( $atts, $content = null ) {
    return '<div class="columns one">'.do_shortcode($content).'</div>';
}

add_shortcode('column_one', 'column_one'); 
```

# fortran - 使用 fortran 生成可能组合的矩阵

> ID：14572966
> 
> 赞同：1
> 
> 时间：2013-01-28T23:10:38.930
> 
> 标签：fortran

我有一个数组 X(9,2)，我想用所有可能的组合生成另一个数组 B(512,9)。

我想过做 9 个循环，但我希望有一种更有效的方法。

这就是我所拥有的

```
 do i1=1, 2
    do i2=1, 2
        do i3=1,2
            do i4=1,2
                do i5=1,2
                    do i6=1,2
                        do i7=1,2
                            do i8=i,2
                                do i9=1,2
                                    B(row, col) = X(1,i1)
                                    col = col + 1
                                    B(row, col) = X(2,i2)
                                    col = col + 1
                                    B(row, col) = X(3,i3)
                                    col = col + 1
                                    B(row, col) = X(4,i4)
                                    col = col + 1
                                    B(row, col) = X(5,i5)
                                    col = col + 1
                                    B(row, col) = X(6,i6)
                                    col = col + 1
                                    B(row, col) = X(7,i7)
                                    col = col + 1
                                    B(row, col) = X(8,i8)
                                    col = col + 1
                                    B(row, col) = X(9,i9)
                                    col = 1
                                    row = row + 1
                                end do
                            end do
                        end do
                    end do
                end do
            end do
        end do
    end do
end do 
```

这种方式有问题吗？有没有更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:44:02.827

您应该通过循环 B 的元素来使循环反过来（我有一个 print 语句而不是赋值...）：

```
 program test
  implicit none

  integer, parameter :: nn = 9, imax = 2
  integer :: row, col, ii
  integer :: indices(nn)

  indices(:) = 1
  do row = 1, imax**nn
    do col = 1, nn
      print "(A,I0,A,I0,A,I0,A,I0,A)", "B(", row, ",", col, ") = X(",&
          & col, ",", indices(col), ")"
      !B(row, col) = X(col, indices(col))
    end do
    indices(nn) = indices(nn) + 1
    ii = nn
    do while (ii > 1 .and. indices(ii) > imax)
      indices(ii) = 1
      indices(ii-1) = indices(ii-1) + 1
      ii = ii - 1
    end do
  end do

end program test 
```

据我所知，这给出了与原始代码相同的结果，但更紧凑，适用于任何元组大小和索引范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T12:35:28.093

我认为这也可以解决问题

```
ncol = 9
B = 0
tot = 2**ncol
do n = 1, ncol
   div = 2**n
   step = tot/div
   do m = 0, div-1
      fr = 1 + m*step
      to = fr + step
      B(fr:to,n) = X(n, 1+mod(m,2))
   end do
end do

do n = 1, tot
     write(*,*) (B(n,i), i=1,ncol)
end do 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T00:08:45.443

确实有更好的方法。例如，参见[Martin Broadhurst 的组合算法](http://www.martinbroadhurst.com/combinatorial-algorithms.html)——特别是笛卡尔积示例和文件`n-tuple.c`。尽管在 C 中，代码始终使用数组和引用参数，因此除了将索引更改为从 1 开始而不是 0 之外，可以毫无困难地将其转换为 Fortran。他使用的方法是使用索引数组向上计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-29T07:55:18.423

```
 character *70 ofil
  ofil='allcomb.txt'
  write(*,*)'feed n and m (Note: n or m larger than 20 takes time)'
  read(*,*) n,m
  write(*,*)'feed file name to store results'
  read(*,*) ofil
  call combin(n,m,ofil)
  write(*,*)'Over'
  end
  !---------------------------------------------------------------
  subroutine combin(n,m,ofil)
  ! Generates all ncm combinatins
  parameter (mx=20)! mx is maximum dimension
  Integer a(mx),b(mx),c
  double precision ncm,ic
  character *70 ofil
  open(15,file=ofil)
  ncm=1
    do i=1,m
    a(i)=i ! a is least indexed combination
    b(i)=n-m+i ! b is maximum indexed combination
    ncm=ncm*b(i)/i ! total possible combinations
    enddo
  write (15,*) (a(i),i=1,m)! Initial (least indexed) combination
  incmpl=1
  ic=1
  ! --------------------------------------------------------------
  do while (incmpl.ne.0 .and.int(ic).lt.ncm)
  incm=0
    do i=1,m
    incm=incm+(b(i)-a(i))
    enddo
  incmpl=incm
  a(m)=a(m)+1
    do i=1,m
    ii=m-i+1
      if(a(ii).gt.b(ii)) then
      a(ii-1)=a(ii-1)+1
         do j=ii,m
         a(j)=a(j-1)+1
         enddo
      endif
    enddo
  ic=ic+1
  write(15,*)(a(k),k=1,m)
  enddo ! end do while loop
  ! --------------------------------------------------------------
  close(15)
  return
  end 
```

# iphone - 保存使用 UIDocumentInteractionController 打开的文件

> ID：14572971
> 
> 赞同：0
> 
> 时间：2013-01-28T23:11:04.587
> 
> 标签：iphone, objective-c

我有我的应用程序打开 XML 文件，它可以完美地读取它们。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    [launchOptions valueForKey:UIApplicationLaunchOptionsURLKey];
} 
```

但是，我想在文档打开后保存它，访问保存的版本，然后可以稍后将其删除。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:20:29.360

当您的应用程序被要求处理文件时，您应该在`UIApplicationDelegate application:openURL:sourceApplication:annotation:`方法中处理它。该 URL 将指向您被要求处理的文件。

要保存此文件，请将给定 URL 中的文件复制到应用的 Documents 目录（或其他所需的应用沙箱目录）。使用`NSFileManager moveItemAtURL:toURL:error:`方法将文件移动到 Documents 目录。

# matlab - 获取BW或RGB图片中不规则物体的长度并将其绘制到图片中进行控制

> ID：14572973
> 
> 赞同：3
> 
> 时间：2013-01-28T23:11:07.683
> 
> 标签：matlab, object, image-processing, properties, analytics

我面临一个我无法解决的众所周知的问题。我有根的图片（[http://cl.ly/image/2W3C0a3X0a3Y](http://cl.ly/image/2W3C0a3X0a3Y)）。从这张照片中，我想知道最长根的长度（第一个问题），大根和小根的百分比（例如作为第二个问题的方向的直径）。重要的是我可以区分细根和大根，因为这或多或少是研究的目的（其中一部分在不同物种之间进行比较）。最后一件事，我想沿着测量的最长根画一条线，以检查一切是否正确测量。

对于最长根的长度，我尝试使用 regionprops()，这不是最优的，因为如果我做对了，它假定椭圆作为基本形状。然而，我真正需要支持的事情实际上是：

如何获得最长根的长度（起点应该是最长根离开直径最大的主根的地方）？是否可以区分细根和大根，我可以得到它们的一部分吗？（硬币，图片中的圆形物体是参考）我可以在图片中绘制长度和直径等属性吗？

我发现了如何绘制椭圆和东西的质心，但我只是不明白如何使用建议的值来做到这一点。

我希望这不是双重帖子，并且这个问题在其他地方不存在这样的问题，如果是，我很抱歉。

我要感谢这个论坛上的人们，你们做得很好，每个有问题的人都可以很幸运有你们在这里。

谢谢你的帮助，菲利普

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ％％％％ 编辑

我遵循了建议的解决方案，到目前为止的代码如下：

```
clc
clear all
close all

img=imread('root_test.jpg');

labTransformation = makecform('srgb2lab');
labI = applycform(img,labTransformation);

%seperate l,a,b
l = labI(:,:,1);
a = labI(:,:,2);
b = labI(:,:,3);

level = graythresh(l);
bw = im2bw(l);
bw = ~bw;
bw = bwareaopen(bw, 200);
se = strel('disk', 5);
bw2=imdilate(bw, se);
bw2 = imfill(bw2, 'holes');
bw3 =bwmorph(bw2, 'thin', 5);
bw3=double(bw3);
I4 = bwmorph(bw3, 'skel', 200);
%se = strel('disk', 10);%this step is for better visibility of the line
%bw4=imdilate(I4, se);
D = bwdist(I4); 
```

这导致我的骨架图片 - 这是一个很大的进步，谢谢你！在我必须计算距离的地方，我有点过分了。我如何解释 MatLab 它必须计算从所有小根到主根的距离（如何定义？）？为此，我必须先处理直径，对吗？

您能否给出一个或另一个提示更多如何完成距离/长度问题？

感谢您提供的大力帮助！

菲利普

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% EDIT2

好的，我设法分离了单个根部分。这不是您的编辑建议的内容，但至少是一些内容。我也有所有根的总长度 - 还不错。但即使有（我假设）超级简单的逐步解释，我也从未见过这样的树。我停在我必须选择一个不可见点的地方——其余的对我来说太先进了。我不想浪费更多的时间，我非常感谢你已经给我的帮助。但我想我太愚蠢了，无法做到这一点:) 谢谢！继续这样下去，真的很有帮助。

菲利普

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T05:15:03.380

对于一个预先开始的点，我认为该图像不需要 3439x2439 的分辨率，它似乎没有为问题添加任何重要的东西，所以我只是使用了调整大小的 800x567 版本（尽管应该（几乎）将此答案应用于较大版本没有问题）。另外，您提到`regionprops`但我没有看到有关您如何获得二进制图像的任何描述，所以让我们从头开始。

我在 LAB 颜色空间中考虑了您的图像，然后通过 Otsu 对 L 通道进行了二值化，考虑到前景为黑色，对此结果应用了膨胀（同样可以通过应用侵蚀来完成），最后删除了小组件。与更直接的亮度公式相比，L 通道可以更好地表示图像，从而更容易分割。膨胀（或腐蚀）是为了加入次要特征，因为有相当多的分支似乎无关紧要。这产生了以下图像：

![在此处输入图像描述](../Images/27e25ccff7c2c62f0f17c4571d3b6b3a.png)

在这一点上，我们可以尝试将距离变换与灰色调锚定骨架结合使用（参见 Soille 关于形态学的书，和/或 Ranwez 和 Soille 的“Order Independent Homotopic Thinning for Binary and Gray Tone Anchored Skeletons”）。但是，由于后者不容易获得，我会在这里考虑一些更简单的东西。如果我们在上图中执行孔填充，然后进行细化和修剪，我们会得到许多根之间连接的粗略草图。下图显示了由原始图像组成的这一步的结果（为了更好的可视化而放大）：

![在此处输入图像描述](../Images/a735899ddfedd2d2a86e8d4d96f99236.png)

正如预期的那样，由于孔填充，变薄的图像采用“捷径”。但是，如果不执行这样的步骤，那么我们最终会在这个图像中出现循环——这是我想在这里避免的。尽管如此，它似乎为实际根的大小提供了一个不错的近似值。

现在我们需要计算分支（或根）的大小。首先要确定主根在哪里。这可以通过在膨胀之前使用上面的二进制图像并考虑距离变换来完成，但这不会在这里完成——我的兴趣只是展示了计算这些长度的可行性。假设你知道你的主根在哪里，我们需要找到从给定根到它的路径，然后这条路径的大小就是这个根的大小。观察到，如果我们从细化图像中消除分支点，我们会得到一组很好的连接组件：

![在此处输入图像描述](../Images/5ecae8f381a78a671fa38b47499517c6.png)

假设每个端点是一个根的末端，那么一个根的大小就是到主根的最短路径，并且该路径由刚刚显示的图像中的一组连通分量组成。现在您可以找到最大的、第二大的以及所有其他可以通过此过程计算的。

编辑：

为了使最后一步清楚，首先让我们标记所有找到的分支（在新选项卡中打开图像以获得更好的可视化）：

![在此处输入图像描述](../Images/09e560ac121ecef90223a9e89a767f7e.png)

现在，每个分支的“数字”长度只是组件中的像素数量。您可以稍后通过考虑添加到图像中的对象将此值转换为“真实世界”长度。请注意，此时根本不需要依赖图像处理算法，我们可以从这个表示构造一棵树并在那里工作。树的构建方式如下： 1) 在骨架中找到属于主根的分支点（这是上图中标签 15、16 和 17 之间的“不可见点”）；2）创建从该点到连接到它的每个分支的边；3）根据直到另一个分支开始所需的像素数量为边缘分配权重；4）重复新的起始分支。例如，在初始点，到达分支 15、16 和 17 的开头需要 0 个像素。然后，要从分支 15 的开头到达其结尾，它需要分支 15 的大小（像素数）。此时我们在这条路径上没有其他东西可以访问，所以我们创建了一个叶子节点。对所有其他分支重复相同的过程。例如，这是该标记的完整树（以下树的双重表示更节省空间）：

![在此处输入图像描述](../Images/f6c2faaee9516b57d642f801251bc479.png)

现在你找到了最大的加权路径——它对应于最大根的大小——等等。

# ios - oAuth 样式 NSURLRequst 与图像

> ID：14572978
> 
> 赞同：0
> 
> 时间：2013-01-28T23:11:25.573
> 
> 标签：ios, objective-c, api, file-upload, oauth

我有一个在我们的 PHP 服务器上使用 2 腿 oAuth 的应用程序。我们当前解析 php://input 流以获取签名参数和原始帖子数据。但是，根据 php.net，您不能将输入流与多部分表单数据一起使用，因此当我尝试将图像从 iPhone 发送到服务器时，php://input 流是空的。

这是我对誓言规则的新问题，什么不是。

是否需要使用输入流与从 $POST 超级全局读取？我可以在同一个电话中发送签名和图像吗？

```
 NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];

[postData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", @"signature"] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[postVars dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]];

[postData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"uploadedfile\"; filename=\"tester.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[NSData dataWithData:imageData]];
[postData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

我已经看到了一些使用签名参数设置授权标头的建议。在帖子正文中发送签名或设置授权标头是否正确？另外，我在如何使用 oAuth 上传和图像方面还有路要走吗？是否需要 2 次通话，或者我可以在同一次通话中进行签名和图像处理？

谢谢您的帮助。我们使用它来将数据从 iPhone 发送到我们的服务器，因此我们编写了双方，但希望遵循 oAuth 最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:26:57.267

Oauth 更喜欢在授权标头中设置的 oauth 参数（[请参见此处](http://oauth.net/core/1.0a/#consumer_req_param)）。提供者期望的所有内容都应该在该标头中，包括通过对动词、url、post 参数、各种 oauth 参数等进行签名而形成的签名，按词法排序。

请求的其余部分可以是您想要的任何内容，例如图片帖子，是否是多部分的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T00:35:49.650

@danh 给了我我需要的答案，但我只是想扩展它。

在 iOS 中，我设置了 Authorization 标头 `[request setValue:authorizationHeader forHTTPHeaderField:@"Authorization"];`

此标头包含我的签名、appid、时间戳等的 JSON 字符串。

我从除图像文件之外的所有参数生成签名。OAuth 说您从 URLEncode 内容类型生成签名库，因此由于图像不是 URLEncode 类型，您不必在签名库中使用它们的任何部分。这意味着您可以将您的图像和您在签名中使用的任何参数作为 POST 正文的一部分发送。

我的看起来像这样

```
NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];[postData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", @"data"] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[jsonData dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]];
[postData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"uploadedfile\"; filename=\"%@\"\r\n", imagename] dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[postData appendData:[NSData dataWithData:imageData]];
[postData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request addValue:contentType forHTTPHeaderField: @"Content-Type"];
[request setURL:[NSURL URLWithString:url]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData]; 
```

在我的服务器上，我可以解析 HTTP_AUTHORIZATION 标头来获取我的 oAuth 值，使用 $_POST 来获取我的参数和 $_FILES 来获取我的图像。所有这些仍然遵循 oAuth 准则。谢谢您的帮助。

# spring - 在 Spring Jpa Data 中加入 3 个表

> ID：14572981
> 
> 赞同：7
> 
> 时间：2013-01-28T23:11:33.603
> 
> 标签：spring, jpa, join

我最近一直在努力用 spring data jpa 加入 3 个表。我有 3 个实体`Series`，`Dossier`和`Item`。`Series`有很多`Dossiers`，并且`Dossier`有很多`Items`（关系）。我做了类似的事情`Series.join(Dossier_.series).join(Dossier_.items)`，我最终得到了一个加入集。我想进行以下查询：

```
Select Items from Series,Dossier,Item 
Where Series.Id=Dossier.seriesId 
and Dossier.id=Item.dossierId 
and series.projectId = :param 
```

我不能用 Spring Specifications and criteria api 来表达这个声明....请解释一下

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T00:50:25.357

这更像是一个JPA问题。

首先，我一直强调，您无法访问“表格”。您应该将它们视为域实体。许多对 JPA/Hibernate/其他 ORM 的滥用实际上来自对 SQL 或数据库概念的直接“翻译”。

回到你的问题，答案很简单。首先确保您在域实体中确实具有“关系”。存储 ID 无助于构建具体的域模型。例如，你有类似的东西：

```
@Entity
class Series {
  @Id
  Long id;

  @OneToMany(mappedBy="series")
  List<Dossier> dossiers;
}
@Entity
class Dossier{
  @Id
  Long id;

  @ManyToOne
  Series series;

  @OneToMany(mappedBy="dossier"
  List<Item> items;
}

@Entity
class Item{
  @Id
  Long id;

  @ManyToOne
  Dossier dossier;
} 
```

查询很简单：

```
select s.dossiers.items from Series s where s.projectId = :param 
```

或者，如果只包含`@ManyToOne`s 而省略`@OneToMany`s 更合理，那么查询仍然是直截了当的：

```
from Item where i.dossier.series.projectId = :param 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:24:58.160

[在这里仍然很困难] 也许我没有说清楚。我知道如何用 HQL 表达查询。问题是使用 Spring Data 的规范，在标准 api 的帮助下构建该查询。

```
//Let's exampine the following piece of code

        public class CustomItemSpecs {

        public static Specification<Item> createSpecificationFromSearchForm(final SearchForm searchForm) {  
            return new Specification<Item>() {
                @Override  
                public Predicate toPredicate(Root<Item> root, CriteriaQuery<?> query, CriteriaBuilder cb) {             
        CriteriaQuery<Item> cq = cb.createQuery(Item.class);

                    CriteriaQuery<Series> sb = cb.createQuery(Series.class);
                    Root<Series> series = sb.from(Series.class);

                    Join<Series,Dossier> join1 = series.join(Series_.dossiers);

                    Join<Dossier, Item> join2 = join1.join(Dossier_.items);
        }
}

    } 
```

如您所见，我设法进行了两个单独的联接。问题是当我想加入 Series、Dossier 和 Items 以执行上述查询时。注意 join2 是一个 Dossier-Item 集。我无法制定像 cb 这样的标准。等于（join2.get（Series_.projectId），）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-20T08:36:20.297

我使用弹簧数据接口投影。像这样的例子

**注意**项必须是接口类

存储库类

```
@Repository
public interface ItemRepository extends JpaRepository<Items,Long> {

    @Query(nativeQuery = true,value = "Select Items from Series,Dossier,Item Where Series.Id=Dossier.seriesId and Dossier.id=Item.dossierId and series.projectId = :param")
    public Items findTransaksisByAccountIdOrderById(@Param("param") Long projectId);

} 
```

# c# - 序列化时避免扩展链接对象

> ID：14572982
> 
> 赞同：0
> 
> 时间：2013-01-28T23:11:40.483
> 
> 标签：c#, .net, json, json.net

我正在使用 JSON.NET 将一些 c# 对象序列化为 JSON（然后写入文件）。

我的两个主要课程是：

```
public class Reservoir {
    private Well[] mWells;

    public Well[] wells {
        get { return mWells; }
        set { mWells = value; }
    }
} 
```

和

```
public Well() {
    private string mWellName;
    private double mY;
    private double mX;

    public string wellName {
        get { return mWellName; }
        set { mWellName = value; }
    }

    public double y {
        get { return mY; }
        set { mY = value; }
    }

    public double x {
        get { return mX; }
        set { mX = value; }
    }

    private Well[] mWellCorrelations;
} 
```

问题是输出看起来像：

```
'{"wells":[{"wellName":"B-B10","y":217.04646503367468,"x":469.5776343820333,"wellCorrelations":[{"wellName":"B-B12","y":152.71005958395972,"x":459.02158140110026,"wellCorrelations":[{"wellName":"B-B13","y":475.0,"x":495.14804408905263,"wellCorrelations":[{"wellName":"B-B11","y":25.0,"x":50.0,"wellCorrelations":[]} 
```

即每个井对象的关联井都被扩展为对象本身，当关联对象很多时，这将成为一个严重的空间和时间问题。

我想我会更喜欢这样的东西：

```
'{"wells":[{"wellName":"B-B10","y":217.04646503367468,"x":469.5776343820333,"wellCorrelations":[{"wellName":"B-B12"}], {"wellName":"B-B11","y":217.04646503367468,"x":469.5776343820333,"wellCorrelations":[{"wellName":"B-B13"} 
```

即只维护井名作为链接（假设它是唯一的）。

有没有办法用 JSON.NET 做到这一点？

你已经设置

```
serializer.ReferenceLoopHandling = ReferenceLoopHandling.Ignore; 
```

但这没有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:30:31.793

您可以添加一个名为 WellCorrelations 的新只读属性，该属性仅获取井相关性的名称，并`JsonIngore`在您的 mWellCorrelations 上添加一个属性，如下所示：

```
[JsonIgnore]
private Well[] mWellCorrelations;

public string[] WellCorrelations 
{ 
    get { return mWellCorrelations.Select(w => w.wellName).ToArray(); }
} 
```

[http://james.newtonking.com/projects/json/help/html/ReducingSerializedJSONSize.htm](http://james.newtonking.com/projects/json/help/html/ReducingSerializedJSONSize.htm)

这样，序列化程序将只序列化相关井的名称。

# ruby-on-rails - 不推荐使用 arity 为 1 的 Rails 3 重定向块

> ID：14572983
> 
> 赞同：5
> 
> 时间：2013-01-28T23:12:08.733
> 
> 标签：ruby-on-rails

在 Rails 3.2.11 应用程序中，我有以下路线可以将 www 重定向到非 www：

```
constraints(:host => /www.foo.com/) do
    root :to => redirect("http://foo.com")
    match '/*path', :to => redirect {|params| "http://foo.com/#{params[:path]}"}
end 
```

无论如何 rspec 会引发以下警告：

```
DEPRECATION WARNING: redirect blocks with arity of 1 are deprecated. Your block must take 2 parameters: the environment, and a request object. (called from block (2 levels) in <top (required)> at /foo/config/routes.rb:6) 
```

我无法在谷歌上找到一些东西，所以我想问问是否有人知道我如何摆脱这个警告。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T23:22:50.163

只需在重定向块上使用第二个参数，因此：

```
constraints(:host => /www.foo.com/) do
  root :to => redirect("http://foo.com")
  match '/*path', :to => redirect {|params,request| "http://foo.com/#{params[:path]}"}
end 
```

[您可以在此处](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Redirection.html)查看此方法的一些文档

# vba - VBA have a sub run another sub

> ID：14572989
> 
> 赞同：7
> 
> 时间：2013-01-28T23:12:25.637
> 
> 标签：vba, excel, excel-2003

how to run a `sub` stored in another worksheet's module?

**worksheet1**

```
sub endDay()
    'something here
end sub 
```

**worksheet2**

```
sub reCalc()
    'something here
end sub 
```

I want `recalc` to be able to run on its own but I want to be able to press the button for "endDay", have it do its thing, and then preform "recalc" at the end instead of pressing one and then go to sheet2 to press the other.

Can someone give me a sample so I can have an idea where to begin?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T06:53:32.970

查看工作表的代码名称 - 您可以在 Visual Basic 编辑器的树视图中看到它们。通常它们被命名为`Sheet1`,`Sheet2`等（独立于实际工作表名称，显示在括号中）。在您的代码中使用此名称）而不是，`Worksheets("Sheet1")`您还将获得一个自动完成列表 - 使用您的子！

因此，这将完成这项工作：

```
Sheet1.reCalc

```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T23:21:04.773

```
sheets("worksheet2").reCalc 
```

可能是你所追求的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-09T15:43:56.027

我知道是 2 年后，但今天我正在寻找同样的东西。至于工作表中的 subs 可能是私有的，这是一个很好的解决方案：

```
Sub Maina()
    Run "tbl_Input.btn_main_Click"
End Sub 
```

`tbl_Input`是工作表的 VBA 名称，而不是标题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-17T21:26:36.703

`Call Module1.reCalc`如果 Sub 在 Module1 中，也应该可以正常工作。可能不需要“Module1”。尽管如此。

# javascript - 如何使用两个不同的可观察数组淘汰赛

> ID：14572992
> 
> 赞同：0
> 
> 时间：2013-01-28T23:12:30.263
> 
> 标签：javascript, knockout.js

我想做的是，从我的 ajax 调用中获取第一个结果并将其放入`.portfolio--active`div 中，然后从 ajax 结果中删除第一项，然后循环遍历`.portfolio--active`.

循环工作完美。我遇到的问题是`.portfolio--active`. 我只是不明白在没有循环或以某种方式引用函数名称的情况下我是如何输出数据的。例如：`<ul data-bind="foreach: items">`冷藏箱到这个：`hutber.portfolio.ko.self.items = ko.observableArray([]);`没有它在 al

**标记**

```
 <section>
    <h2>portfolio</h2>
    <div class="portfolio--active">
        <!--<img alt="" src="/img/clients/vw.jpg">-->
        <img alt="" data-bind="attr: {src: '/img/clients/' + headline.id+'.jpg'}">
        <h3><a href="#">Volkswagen.co.uk</a></h3>
        <date>Febuary, 2012 - <a href="#">Zone Ltd.</a></date>
        <p>Lorem text</p>
        <tags><i title="jQuery" class="icon-rss upsideLeft"></i><i title="jQuery" class="icon-html5 upsideLeft"></i></tags>
    </div>
    <div class="portfolio--options">
        <ul data-bind="foreach: items">
            <li data-bind="attr: {'data-id': $data.id}">
                <img alt="" data-bind="attr: {src: '/img/clients/' + $data.id+'.jpg'}">
                <h4 data-bind="text: title"></h4>
            </li>
        </ul>
    </div>
</section> 
```

**JS**

```
hutber.portfolio.ko = {
    init: function(){
        ko.applyBindings(new hutber.portfolio.ko.portfolioViewModel());
    },
    portfolioViewModel: function(){
        hutber.portfolio.ko.self = this;

        hutber.portfolio.ko.self.items = ko.observableArray([]);
        hutber.portfolio.ko.self.headline = ko.observableArray([]);

        $.getJSON('/portfolio/json').done(function(info){

            //build headline item
            hutber.portfolio.ko.self.headline(info.slice(0,1));

            //remove first item in array only leave none headline items
            info = info.slice(1,info.length);

            //update items with updated info
            hutber.portfolio.ko.self.items(info)
        });
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:06:35.260

您可以`[0]`在绑定中引用数组的索引，但在您的情况下，您似乎应该`headline`只创建一个 observable 并执行`info.shift()`删除并返回数组中的第一项以设置`headline`. 然后，您可以将项目设置为`info`不进行任何切片。

```
 $.getJSON('/portfolio/json').done(function(info){

        //build headline item
        hutber.portfolio.ko.self.headline(info.shift());

        //update items with updated info
        hutber.portfolio.ko.self.items(info)
    }); 
```

# javascript - Google Docs：格式化标题和副标题

> ID：14572997
> 
> 赞同：0
> 
> 时间：2013-01-28T23:13:03.527
> 
> 标签：javascript, google-apps-script, google-docs

**我的问题：**如何使用 Google Apps 脚本将文本设置为 Google Doc 中的标题或副标题？（请参见下面的视觉示例）

在有关格式化段落的 Google Apps 脚本文档中，它们在[ParagraphHeading 类](https://developers.google.com/apps-script/class_documentapp_paragraphheading)中显示了不同类型的 ParagraphHeadings ，然后是[Attribute 类](https://developers.google.com/apps-script/class_documentapp_attribute)，它可以分配给具有一些样式属性的段落。但是，它们都无法将任何文本设置为文档中的标题或副标题。这是如何实现的？

我正在寻找这样的东西：

```
var doc = DocumentApp.getActiveDocument();

// Append a paragraph, with title.
var par1 = doc.appendParagraph("Title");
par1.setHeading(DocumentApp.ParagraphHeading.TITLE);

// Append a paragraph, with subtitle.
var par2 = doc.appendParagraph("SubTitle");
par2.setHeading(DocumentApp.ParagraphHeading.SUBTITLE);

// Append a paragraph, with heading 1.
var par3 = doc.appendParagraph("Heading 1");
par3.setHeading(DocumentApp.ParagraphHeading.HEADING1); 
```

这就是我的意思：

![标题](../Images/fe60ac5b648038e6573f1c775d72f6ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T00:59:59.870

我明白你的意思......我认为这是 appscript 中没有任何解释的功能之一......听起来你可能只需要使用普通的旧字体样式、字体大小、字体颜色等来尝试模仿它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T12:07:16.840

如果您选择“为...创建脚本”，您获得的示例脚本根本不使用`setHeading()`，而是显式地操作所见即所得的属性。（我讨厌人们在文档中这样做，而且我对脚本中的它只是稍微不那么恼火，但这是另一天的话题！）

示例，直接从该示例脚本中提取，包括错误的语法：

```
function createDocument() {
  var title = 'Script Center Report';
  var summaryContents = 'This reports addresses...';
  var overviewContents = 'We undertook this project because...';
  var dataContents = 'We collected three samples of data...';

  var doc = DocumentApp.create(title);
  var footer = doc.getFooter();

  var reportTitle = doc.appendParagraph(title);
  reportTitle.setFontFamily(DocumentApp.FontFamily.ARIAL);
  reportTitle.setFontSize(24);
  reportTitle.setForegroundColor('#4A86E8');
  reportTitle.setAlignment(DocumentApp.HorizontalAlignment.CENTER);
  ... 
```

这只是一种解决方法 - 如果您还没有这样做，您应该针对应用程序脚本创建一个问题报告，以确保所有“段落类型”都可用于脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T14:26:00.627

不幸的是 DocumentApp 目前不提供对这些段落样式的访问。请在问题跟踪器上提交功能请求以添加它们。

# python - Python 线程不想关闭

> ID：14572999
> 
> 赞同：1
> 
> 时间：2013-01-28T23:13:09.620
> 
> 标签：python, multithreading

我的程序有问题。

我设法找到了问题的根源。问题出在“checkPort”方法中。没有它，用于关闭/终止线程的标准教科书方法效果很好。

我错过了什么吗？checkPort 方法中是否有阻止成功加入线程的东西？它总是卡在`thread.join()`。

部分**主程序**：

```
try:
    queue = Queue.Queue()

    for i in range(MAX_THREAD_COUNT):
        t = checkPort_IPv6_thread(queue)
        t.daemon = True
        threads.append(t)
        t.start()

    cur.execute("SELECT * FROM ipv6")
    results = cur.fetchall()
    for row in results:
        queue.put((row[0], row[2]))

    queue.join()

    for thread in threads:
        thread.stop()
        thread.join()

except Exception as e:
    sys.stderr.write("Error: " + str(e))
    print

print "\nChecking ports for IPv6 - DONE" 
```

这是我调用 checkPort 方法的**线程类：**

```
class checkPort_IPv6_thread(threading.Thread):
    def __init__(self,queue):
        threading.Thread.__init__(self)
        self.queue = queue
        self.keepRunning = True

    def run(self):
        while self.keepRunning:
            args = self.queue.get()
            id = args[0]
            address = args[1]
            port443 = 0
            port21 = 0 
            port80 = 0 

            #---------------- Check ports for IPv6 ----------------
            if str(address) != "N/A":
                port443 = checkPort("TCP",str(address), 443)
                port21 = checkPort("TCP",str(address), 21)
                port80 = checkPort("TCP",str(address), 80)

            lock.acquire()
            try:
                cur.execute("UPDATE ipv6 SET port_443=" + str(port443) + " WHERE id_ipv6 =" + str(id))
                cur.execute("UPDATE ipv6 SET port_21=" + str(port21) + " WHERE id_ipv6 =" + str(id))
                cur.execute("UPDATE ipv6 SET port_80=" + str(port80) + " WHERE id_ipv6 =" + str(id))
                db.commit()

            except Exception as e:
                sys.stderr.write("Error: " + str(e))
            except:
                db.rollback()
            lock.release()

            self.queue.task_done()

    def stop(self):
        self.keepRunning = False 
```

和**checkPort 方法**：

```
def checkPort(typ, address, port):
    if typ == "TCP":
        s = socket.socket(socket.AF_INET6, socket.SOCK_STREAM)
    else:
        s = socket.socket(socket.AF_INET6, socket.SOCK_DGRAM)
    pom = 0 # 0/1 = True/False
    try:
        s.settimeout(2) # timeout 1.5 sekundy
        s.connect((str(address), port))
        s.settimeout(None)
        #time.sleep(0.5)
        pom = 1
        print str(address) + " >> on port: " + str(port) + " >> Connection was successfull"

    except socket.timeout:
        print str(address) + " >> on port: " + str(port) + " >> * Error: Timed out *"
    except socket.error as e:
        if e.errno == 10061:
            print str(address) + " >> on port: " + str(port) + " >> * No connection could be made - target machine refused it *"
    except Exception as ex:
        sys.stderr.write("Error: " + str(ex))

    return pom 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:22:58.680

以下内容可能会对您的程序有所帮​​助。它是为 Python 3.x 编写的。我相信主要问题在于`args = self.queue.get()`您的程序。它应该固定在下面。

```
import multiprocessing
import queue
import threading
import sys
import socket

MAX_THREAD_COUNT = multiprocessing.cpu_count()

def main(cur):
    cur.execute("""UPDATE ipv6
                      SET port_21 = 0,
                          port_80 = 0,
                          port_443 = 0
                    WHERE address = 'N/A'""")
    q = queue.Queue()
    for _ in range(MAX_THREAD_COUNT):
        CheckPort(q).start()
    cur.execute("""SELECT id_ipv6,
                          address
                     FROM ipv6
                    WHERE address != 'N/A'""")
    for row in cur.fetchall():
        q.put(row)
    q.join()
    for thread in threading.enumerate():
        if isinstance(thread, CheckPort):
            thread.stop()
            thread.join()

class CheckPort(threading.Thread):

    def __init__(self, q):
        super().__init__()
        self.__q = q
        self.__run = True

    def stop(self):
        self.__run = False

    def run(self):
        while self.__run:
            try:
                id, address = self.__q.get(True, 1)
            except queue.Empty:
                continue
            with lock:
                try:
                    cur.execute('''UPDATE ipv6
                                      SET port_21 = ?,
                                          port_80 = ?,
                                          port_443 = ?
                                    WHERE id_ipv6 = ?''',
                                self.check_port(address, 21),
                                self.check_port(address, 80),
                                self.check_port(address, 443),
                                id)
                    db.commit()
                except Exception as error:
                    print('Error:', error, file=sys.stdout)
                self.__q.task_done()

    @staticmethod
    def check_port(address, port):
        sock = socket.socket(socket.AF_INET6, socket.SOCK_STREAM)
        sock.settimeout(2)
        try:
            sock.connect((address, port))
        except socket.timeout:
            return 0
        else:
            sock.shutdown(socket.SHUT_RDWR)
            sock.close()
            return 1

if __name__ == '__main__':
    try:
        main(cur)
    except Exception as error:
        print('Error:', error, file=sys.stdout) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:50:50.607

从 OP 的编辑到他的问题：

* * *

**解决方案：**

感谢 Noctis Skytower，解决方案是`catch queue.empty exception`：

```
try:
    id, address = self.queue.get(True, 1)
except Queue.Empty:
    continue 
```