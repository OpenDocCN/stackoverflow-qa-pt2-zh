# StackOverflow 问答 12962000-12962999

# mysql - 连接表并转置列和行

> ID：12962000
> 
> 赞同：2
> 
> 时间：2012-10-18T19:11:28.653
> 
> 标签：mysql, transpose

我有一个看起来像这样的表，称为survey_1：

```
================================================
|id  | token  |     1X2X1     |    1X2X2       |
=====+========+===============+================|
| 1  |   1    |    YES        | Justin Beiber  |
|----+--------+---------------+----------------|
| 2  |   1    |    YES        | Britney Spears |
|----+--------+---------------+----------------| 
```

**注意**：1X2X1 代表-survey-id X group-id X question-id

我有另一个表叫survey_questions：

```
===============================================================
|sid |   gid  |   qid  |             question                 |
=====+========+===============+===============================|
| 1  |  2     |    1   |  Do you listen to music?             |
|----+--------+-----------------------------------------------|
| 1  |  2     |    2   |  Who is your favorite music artists? |
|----+--------+-----------------------------------------------| 
```

sid (survey-id)、gid (group-id) 和 qid(question-id) 定义此表中的特定问题

我需要一个查询，它会给我这样的结果：

```
======================================================
|           Question                  |   Answer     |
=========+===========+===============================|
| Do you listen to music?             |    YES       |            
|----------------------------------------------------|
| Who is your favorite music artists? | Justin Beiber| 
|----------------------------------------------------| 
```

**注意**：我的数据库包含数千个这样的列，因此编辑每个调查以完全匹配这种格式会非常耗时。

有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:26:35.383

Can you change the table schema? Cause that first table, survey_1 is better written with one row per answer and with the entire key of the other table per row. Like this (add your own indexes)

```
create table survey_1 (
  id int,
  token int,
  sid int,
  gid int,
  qid int,
  answer varchar(255)
) 
```

Than the data would be

```
------------------------------------------
| 1 | 1 | 1 | 2 | 1 | "YES"              |
| 1 | 1 | 1 | 2 | 2 | "Justin Beiber"    |
| 2 | 1 | 1 | 2 | 1 | "YES"              |
| 2 | 1 | 1 | 2 | 2 | "Britney Spears"   |
------------------------------------------ 
```

It's going to be much easier to work with and generally a better design.

Here is how it would look [http://sqlfiddle.com/#!2/4f1ca/2](http://sqlfiddle.com/#!2/4f1ca/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:23:50.837

Create a view for each survey. For the old surveys a simple script should be able to do it, for new surveys make it a part of the process when creating new surveys. This is how the view could look for survey_1

```
create or replace view v_survey_1 as
select id, question, 1X2X1 as answer 
  from question
  join survey_1 s
 where sid = 1
   and gid = 2
   and qid = 1
union
select id, question, 1X2X2 
  from question
  join survey_1 s
 where sid = 1
   and gid = 2
   and qid = 2
; 
```

[http://sqlfiddle.com/#!2/63aee/1](http://sqlfiddle.com/#!2/63aee/1)

To build the views a script would roughly do like this.

Find all tables to build views on by running

```
select table_name 
 from information_schema.tables 
where table_schema = 'test' 
  and table_name like 'survey\_%'; 
```

For each view find the union parts by running this for its table

```
select column_name
  from information_schema.columns 
 where table_name = 'survey_1' 
   and column_name regexp '^[0-9]+X[0-9]+X[0-9]+$'; 
```

Extract the number parts and use them when comparing with sid, gid and qid.

This script could also be used to populate new proper tables.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:23:47.930

您需要使用 MySQL 不支持的“UNPIVOT”。您可以通过硬编码列名（但您需要提前知道所有列）来做类似的事情，如下所示：

```
SELECT survey_questions.Question,
       CASE survey_questions.qid 
         WHEN 1 THEN survey_1.`1X2X1`
         WHEN 2 THEN survey_1.`1X2X2`
         WHEN 3 THEN survey_1.`1X2X3`
         WHEN 4 THEN survey_1.`1X2X4`
       // ...
       END as Answer
FROM survey_questions
JOIN survey_1 
  ON survey_questions.qid = survey_1.id
  AND survey_questions.gid = survey_1.token_id
WHERE survey_questions.sid = 1 
```

Of course, you can always use some scripting language to generate the column names for you... For example, here is a stored procedure you can make:

```
CREATE PROCEDURE 'get_qa_for_survey'
(
  IN surveyId INT
)
BEGIN
  DECLARE query1 TEXT; 
  SET @tableName = 'survey_' + surveyId;
  SET query1 = 'SELECT survey_questions.Question,
       CASE survey_questions.qid ';

  DECLARE col_names CURSOR FOR
    SELECT column_name
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE table_name = @tableName
    AND (column_name LIKE surveyId +'X%');
    ORDER BY ordinal_position;

  select FOUND_ROWS() into num_rows;

  SET i = 1;
  the_loop: LOOP    
     IF i > num_rows THEN
        CLOSE col_names;
        LEAVE the_loop;
     END IF;

     FETCH col_names 
     INTO col_name;     
     SET query1 = query1 + ' WHEN ' + i + ' THEN ' + @tableName + '.' + col_name
     SET i = i + 1;  
  END LOOP the_loop;

  SET query1 = query1 + ' END as Answer
    FROM survey_questions
    JOIN ' + @tableName + '
      ON survey_questions.qid = ' + @tableName + '.id
      AND survey_questions.gid = ' + @tableName + '.token_id
    WHERE survey_questions.sid = ' + surveyId; 

  SET @Sql = query1;        
  PREPARE STMT FROM @Sql; 
  EXECUTE STMT; 
  DEALLOCATE PREPARE STMT;
END 
```

# spring - 如何使用 Spring Webflow 和 Dojo(dijit) 创建 Textarea 字段

> ID：12962010
> 
> 赞同：1
> 
> 时间：2012-10-18T19:12:06.077
> 
> 标签：spring, spring-mvc, dojo, spring-webflow

我一直试图找出如何在我的 Spring Webflow 项目中创建一个 textarea 字段，我们正在使用 Dojo (dijit) 作为表单。有人可以帮忙吗？下面是我的代码！

```
<td valign="top"><form:input path="bio" class="value" /> <script

                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "name",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Please enter your name from 2 to 10 characters",
                                invalidMessage : "A 2 to 10 characters value is required.",
                                required : true,
                                regExp : "^[a-zA-Z]{2,10}$"
                            }
                        }));
                    </script> <br />
                        <p></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:21:01.033

这应该工作：

```
<form:textarea id="bio" path="bio" />
    <script type="text/javascript">
    Spring.addDecoration(new Spring.ElementDecoration({
        elementId : "bio",
        widgetType : "dijit.form.SimpleTextarea",
    </script> 
```

[编辑] 我刚刚检查了一下，textArea 似乎没有任何类型的验证，所以我根据 ValidationTextBox 为你创建了一个。

只需将其放在您的 javascript 文件中的某个位置：

```
dojo.provide("dijit.form.ValidationTextArea");

dojo.require("dojo.i18n");

dojo.require("dijit.form.TextBox");
dojo.require("dijit.Tooltip");

dojo.requireLocalization("dijit.form", "validate");

/*=====
    dijit.form.ValidationTextBox.__Constraints = function(){
        // locale: String
        //        locale used for validation, picks up value from this widget's lang attribute
        // _flags_: anything
        //        various flags passed to regExpGen function
        this.locale = "";
        this._flags_ = "";
    }
=====*/

dojo.declare(
    "dijit.form.ValidationTextArea",
    dijit.form.TextBox,
    {
        // summary:
        //        Base class for textbox widgets with the ability to validate content of various types and provide user feedback.
        // tags:
        //        protected

        templateString: "<textarea name=${name} ${nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea>",
        baseClass: "dijitTextArea",

        attributeMap: dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap, {
            rows:"textbox", cols: "textbox"
        }),

        // rows: Number
        //        The number of rows of text.
        rows: "3",

        // rows: Number
        //        The number of characters per line.
        cols: "20",

        // required: Boolean
        //        User is required to enter data into this field.
        required: false,

        // promptMessage: String
        //        If defined, display this hint string immediately on focus to the textbox, if empty.
        //        Think of this like a tooltip that tells the user what to do, not an error message
        //        that tells the user what they've done wrong.
        //
        //        Message disappears when user starts typing.
        promptMessage: "",

        // invalidMessage: String
        //         The message to display if value is invalid.
        invalidMessage: "$_unset_$", // read from the message file if not overridden

        // constraints: dijit.form.ValidationTextBox.__Constraints
        //        user-defined object needed to pass parameters to the validator functions
        constraints: {},

        // regExp: [extension protected] String
        //        regular expression string used to validate the input
        //        Do not specify both regExp and regExpGen
        regExp: "(.|[\r\n])*",

        regExpGen: function(/*dijit.form.ValidationTextBox.__Constraints*/constraints){
            // summary:
            //        Overridable function used to generate regExp when dependent on constraints.
            //        Do not specify both regExp and regExpGen.
            // tags:
            //        extension protected
            return this.regExp; // String
        },

        // state: [readonly] String
        //        Shows current state (ie, validation result) of input (Normal, Warning, or Error)
        state: "",

        // tooltipPosition: String[]
        //        See description of `dijit.Tooltip.defaultPosition` for details on this parameter.
        tooltipPosition: [],

        _setValueAttr: function(){
            // summary:
            //        Hook so attr('value', ...) works.
            this.inherited(arguments);
            this.validate(this._focused);
        },

        validator: function(/*anything*/value, /*dijit.form.ValidationTextBox.__Constraints*/constraints){
            // summary:
            //        Overridable function used to validate the text input against the regular expression.
            // tags:
            //        protected
            return (new RegExp("^(?:" + this.regExpGen(constraints) + ")"+(this.required?"":"?")+"$")).test(value) &&
                (!this.required || !this._isEmpty(value)) &&
                (this._isEmpty(value) || this.parse(value, constraints) !== undefined); // Boolean
        },

        _isValidSubset: function(){
            // summary:
            //        Returns true if the value is either already valid or could be made valid by appending characters.
            //        This is used for validation while the user [may be] still typing.
            return this.textbox.value.search(this._partialre) == 0;
        },

        isValid: function(/*Boolean*/ isFocused){
            // summary:
            //        Tests if value is valid.
            //        Can override with your own routine in a subclass.
            // tags:
            //        protected
            return this.validator(this.textbox.value, this.constraints);
        },

        _isEmpty: function(value){
            // summary:
            //        Checks for whitespace
            return /^\s*$/.test(value); // Boolean
        },

        getErrorMessage: function(/*Boolean*/ isFocused){
            // summary:
            //        Return an error message to show if appropriate
            // tags:
            //        protected
            return this.invalidMessage; // String
        },

        getPromptMessage: function(/*Boolean*/ isFocused){
            // summary:
            //        Return a hint message to show when widget is first focused
            // tags:
            //        protected
            return this.promptMessage; // String
        },

        _maskValidSubsetError: true,
        validate: function(/*Boolean*/ isFocused){
            // summary:
            //        Called by oninit, onblur, and onkeypress.
            // description:
            //        Show missing or invalid messages if appropriate, and highlight textbox field.
            // tags:
            //        protected
            var message = "";
            var isValid = this.disabled || this.isValid(isFocused);
            if(isValid){ this._maskValidSubsetError = true; }
            var isValidSubset = !isValid && isFocused && this._isValidSubset();
            var isEmpty = this._isEmpty(this.textbox.value);
            if(isEmpty){ this._maskValidSubsetError = true; }
            this.state = (isValid || (!this._hasBeenBlurred && isEmpty) || isValidSubset) ? "" : "Error";
            if(this.state == "Error"){ this._maskValidSubsetError = false; }
            this._setStateClass();
            dijit.setWaiState(this.focusNode, "invalid", isValid ? "false" : "true");
            if(isFocused){
                if(isEmpty){
                    message = this.getPromptMessage(true);
                }
                if(!message && (this.state == "Error" || (isValidSubset && !this._maskValidSubsetError))){
                    message = this.getErrorMessage(true);
                }
            }
            this.displayMessage(message);
            return isValid;
        },

        // _message: String
        //        Currently displayed message
        _message: "",

        displayMessage: function(/*String*/ message){
            // summary:
            //        Overridable method to display validation errors/hints.
            //        By default uses a tooltip.
            // tags:
            //        extension
            if(this._message == message){ return; }
            this._message = message;
            dijit.hideTooltip(this.domNode);
            if(message){
                dijit.showTooltip(message, this.domNode, this.tooltipPosition);
            }
        },

        _refreshState: function(){
            // Overrides TextBox._refreshState()
            this.validate(this._focused);
            this.inherited(arguments);
        },

        //////////// INITIALIZATION METHODS ///////////////////////////////////////

        constructor: function(){
            this.constraints = {};
        },

        postMixInProperties: function(){
            // Copy value from srcNodeRef, unless user specified a value explicitly (or there is no srcNodeRef)
            if(!this.value && this.srcNodeRef){
                this.value = this.srcNodeRef.value;
            }
            this.inherited(arguments);
            this.constraints.locale = this.lang;
            this.messages = dojo.i18n.getLocalization("dijit.form", "validate", this.lang);
            if(this.invalidMessage == "$_unset_$"){ this.invalidMessage = this.messages.invalidMessage; }
            var p = this.regExpGen(this.constraints);
            this.regExp = p;
            var partialre = "";
            // parse the regexp and produce a new regexp that matches valid subsets
            // if the regexp is .* then there's no use in matching subsets since everything is valid
            if(p != ".*"){ this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,
                function (re){
                    switch(re.charAt(0)){
                        case '{':
                        case '+':
                        case '?':
                        case '*':
                        case '^':
                        case '$':
                        case '|':
                        case '(':
                            partialre += re;
                            break;
                        case ")":
                            partialre += "|$)";
                            break;
                         default:
                            partialre += "(?:"+re+"|$)";
                            break;
                    }
                }
            );}
            try{ // this is needed for now since the above regexp parsing needs more test verification
                "".search(partialre);
            }catch(e){ // should never be here unless the original RE is bad or the parsing is bad
                partialre = this.regExp;
                console.warn('RegExp error in ' + this.declaredClass + ': ' + this.regExp);
            } // should never be here unless the original RE is bad or the parsing is bad
            this._partialre = "^(?:" + partialre + ")$";
        },

        filter: function(/*String*/ value){
            // Override TextBox.filter to deal with newlines... specifically (IIRC) this is for IE which writes newlines
            // as \r\n instead of just \n
            if(value){
                value = value.replace(/\r/g,"");
            }
            return this.inherited(arguments);
        },

        _setDisabledAttr: function(/*Boolean*/ value){
            this.inherited(arguments);    // call FormValueWidget._setDisabledAttr()
            this._refreshState();
        },

        _setRequiredAttr: function(/*Boolean*/ value){
            this.required = value;
            dijit.setWaiState(this.focusNode,"required", value);
            this._refreshState();
        },

        postCreate: function(){
            if(dojo.isIE){ // IE INPUT tag fontFamily has to be set directly using STYLE
                var s = dojo.getComputedStyle(this.focusNode);
                if(s){
                    var ff = s.fontFamily;
                    if(ff){
                        this.focusNode.style.fontFamily = ff;
                    }
                }
            }
            this.inherited(arguments);
            if(dojo.isIE && this.cols){ // attribute selectors is not supported in IE6
                dojo.addClass(this.textbox, "dijitTextAreaCols");
            }
        },

        reset:function(){
            // Overrides dijit.form.TextBox.reset() by also
            // hiding errors about partial matches
            this._maskValidSubsetError = true;
            this.inherited(arguments);
        },

        _onBlur: function(){
            this.displayMessage('');
            this.inherited(arguments);
        },

        _previousValue: "",
        _onInput: function(/*Event?*/ e){
            // Override TextBox._onInput() to enforce maxLength restriction
            if(this.maxLength){
                var maxLength = parseInt(this.maxLength);
                var value = this.textbox.value.replace(/\r/g,'');
                var overflow = value.length - maxLength;
                if(overflow > 0){
                    if(e){ dojo.stopEvent(e); }
                    var textarea = this.textbox;
                    if(textarea.selectionStart){
                        var pos = textarea.selectionStart;
                        var cr = 0;
                        if(dojo.isOpera){
                            cr = (this.textbox.value.substring(0,pos).match(/\r/g) || []).length;
                        }
                        this.textbox.value = value.substring(0,pos-overflow-cr)+value.substring(pos-cr);
                        textarea.setSelectionRange(pos-overflow, pos-overflow);
                    }else if(dojo.doc.selection){ //IE
                        textarea.focus();
                        var range = dojo.doc.selection.createRange();
                        // delete overflow characters
                        range.moveStart("character", -overflow);
                        range.text = '';
                        // show cursor
                        range.select();
                    }
                }
                this._previousValue = this.textbox.value;
            }
            this.inherited(arguments);
        }
    }
); 
```

您可以像使用 ValidationTextBox 一样使用它，只需使用 ValidationTextArea 即可。

# stdout - ipython重定向标准输出显示损坏

> ID：12962013
> 
> 赞同：0
> 
> 时间：2012-10-18T19:12:15.240
> 
> 标签：stdout, ipython

我正在用 python 开发一个系统，我需要的一个功能是能够让控制台输出同时发送到控制台和用户指定的文件。这是在 MATLAB 中复制 Diary 函数。我的以下内容在 Windows 上的 IDLE 和 ubuntu 中的 python cmdline 上都运行良好（这都存在于一个被加载的模块中）：

```
class diaryout(object):
    def __init__(self):
        self.terminal = sys.stdout
        self.save = None

    def __del__(self):
        try:
            self.save.flush()       
            self.save.close()
        except:
            # do nothing, just catch the error; maybe it self was instantiated, but never opened
            1/1
        self.save = None

    def dclose(self):
        self.__del__()

    def write(self, message):
        self.terminal.write(message)
        self.save.write(message)

    def dopen(self,outfile):
        self.outfile = outfile
        try:
            self.save = open(self.outfile, "a")
        except Exception, e:
            # just pass out the error here so the Diary function can handle it
            raise e

def Diary(outfile = None):# NEW TO TEST
    global this_diary

    if outfile == None:
        # None passed, so close the diary file if one is open
        if isinstance(this_diary, diaryout):
            sys.stdout = this_diary.terminal    # set the stdout back to stdout
            this_diary.dclose()                 # flush and close the file
            this_diary = None                   # "delete" it
    else:
        # file passed, so let's open it and set it for the output           
        this_diary = diaryout()                 # instantiate
        try:
            this_diary.dopen(outfile)           # open & test that it opened
        except IOError:
            raise IOError("Can't open %s for append!"%outfile)
            this_dairy=none                     # must uninstantiate it, since already did that
        except TypeError:
            raise TypeError("Invalid input detected - must be string filename or None: %s"%Diary.__doc__)   
            this_dairy=none                     # must uninbstantiate it, since already did that
        sys.stdout = this_diary                 # set stdout to it 
```

远远优于 IDLE 和普通的 python cmline，我使用的是 ipython；这就是我的问题所在。我可以完美无误地打开“日记”，*但*控制台上的显示会混乱。随附的屏幕截图显示了这一点![截屏](../Images/f2668e5bc4f9780d9adb4f09de619c92.png)。输出文件也变得类似乱码。当我使用 撤消重定向时，一切都恢复正常`Diary(None)`。我已经尝试编辑代码，使其甚至永远不会写入文件，没有任何效果。似乎有些东西正在强制使用不受支持的字符集或我不理解的东西。

有人对此有任何想法吗？

# xcode - 如何将图像拖入 Mac 应用程序？

> ID：12962015
> 
> 赞同：0
> 
> 时间：2012-10-18T19:12:19.707
> 
> 标签：xcode, macos, cocoa

我正在构建一个 Mac 应用程序。我希望能够将图像拖到我的应用程序中，然后按一个按钮将图像调整为更小的尺寸。然后，我会将图像导出回它来自的原始文件夹。（类似于应用程序 Prepo）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:24:23.043

看看[拖放编程主题](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/DragandDrop.html)。

> Cocoa 使您能够在应用程序内和应用程序之间实现复杂的拖放功能。本编程主题描述了如何通过几种方法实现拖放。

# xml - 如何使用 LibXML2 实现 XMLDSIG 的 XPath 转换？

> ID：12962017
> 
> 赞同：0
> 
> 时间：2012-10-18T19:12:22.487
> 
> 标签：xml, xpath, libxml2, xml-dsig

我正在尝试从[XMLDSIG 规范实现](http://www.w3.org/TR/xmldsig-core)[XPath 转换](http://www.w3.org/TR/xmldsig-core/#sec-XPath)，由于一些我不会讨论的问题，我不能使用任何其他库（例如[xmlsec](http://www.aleksey.com/xmlsec/)）。

该规范声明给定一个 XPath 表达式：

> XPath 表达式...为输入节点集中的每个节点计算一次。结果被转换为布尔值。如果布尔值为真，则该节点包含在输出节点集中。如果布尔值为假，则从输出节点集中省略该节点。

我知道如何解析文档、创建 XPath 上下文对象、根据文档根的上下文评估表达式以及取消链接未由表达式选择的所有元素，但这并不是标准所要求的。**如何使用 XPath 上下文对象“遍历”xmlDoc，评估每个节点的 XPath 表达式并有选择地删除节点？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:29:48.367

我最终找到了解决方案。需要手动调整上下文以使其工作。这是一些骨架代码，减去错误检查：

```
result = xmlXPathEvalExpression(BAD_CAST "(//. | //@* | //namespace::*)", context);
...
compiled = xmlXPathCompile(BAD_CAST expression);
...
for (i = result->nodesetval->nodeNr - 1; i >= 0; i--)
{
  ...
  result->node = result->nodesetval->nodeTab[i];
  rc = xmlXPathCompiledEvalToBoolean(compiled, context);
  ...
} 
```

# java - 佐治亚州亚特兰大的 Java 时区名称是什么？或任何位置？

> ID：12962019
> 
> 赞同：2
> 
> 时间：2012-10-18T19:12:26.503
> 
> 标签：java, timezone, jodatime

我们的数据库记录了许多“生产设施”。每个设施都有地址、名称和最重要的时区。如何找出时区的名称？

我们最初的设施很明显，因为代码是以我们的城市（美国/埃德蒙顿）命名的。如何通过调用*DateTimeZone.forID("timeZone") ex DateTimeZone.forID("America/Edmonton") 更一般地确定要在 Java 中使用的正确时区代码？*

具体来说，我们正在佐治亚州亚特兰大开设一家工厂，但我不确定要使用哪个代码？是其中之一吗？

1.  “大西洋/South_Georgia”
2.  美国/东部”
3.  “EST5EDT”
4.  “美东时间”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:27:59.350

你可以得到一个列表：

```
for (String string : TimeZone.getAvailableIDs(TimeZone.getTimeZone(
    "GMT-05:00").getRawOffset())) {
System.out.println(string);
} 
```

它将包括（除其他外）“美国/东部”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:21:14.280

这种信息可能真的很棘手（更不用说很难保持最新状态）。它实际上可以因县而异（有一个很棒的[西翼场景](http://www.youtube.com/watch?v=-J1NHzQ1sgc)：）。Google Maps API 最近支持从[lat+lon 到 TimeZone](https://developers.google.com/maps/documentation/timezone/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T19:15:24.860

东部时间的[IANA 标准时区标识符](https://en.wikipedia.org/wiki/IANA_time_zone_database)是[`America/New_York`](https://en.wikipedia.org/wiki/America/New_York). 大概这是 Joda 使用的标准时间，因为（1）每个人都使用它，并且（2）城市名称作为标识符会泄露它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T19:16:31.100

您可以使用此方法列出可用的时区 ID：http: [//docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getAvailableIDs](http://docs.oracle.com/javase/7/docs/api/java/util/TimeZone.html#getAvailableIDs) ()

时区数据似乎来自这个数据库： [http ://en.wikipedia.org/wiki/Tz_database](http://en.wikipedia.org/wiki/Tz_database)

您可以在这里进行查找：http: [//twiki.org/cgi-bin/xtra/tzdatepick.html](http://twiki.org/cgi-bin/xtra/tzdatepick.html)

# nhibernate - NHibernate 和自动递增 ID 死锁

> ID：12962023
> 
> 赞同：2
> 
> 时间：2012-10-18T19:12:48.807
> 
> 标签：nhibernate

我一直在使用 SharpArchitecture 和 NHibernate 来构建我的网站，它可以有很多用户。我的表在数据库设置中使用主键设置为 IDENTITY(1,1)。最近几天，我注意到基于日志文件发生的一堆死锁问题，如下所示：

```
System.Data.SqlClient.SqlException: Transaction (Process ID 55) was deadlocked on lock resources with another process and has been chosen as the deadlock victim. Rerun the transaction. 
```

我有时会收到此错误，这可能与此有关：

```
System.Data.SqlClient.SqlException: Timeout expired.  The timeout period elapsed prior to completion of the operation or the server is not responding. 
```

在我的 web.config 中，我包含了这一行来设置 db 隔离属性：

```
<property name="connection.isolation">ReadUncommitted</property> 
```

根据我通过搜索发现的内容，自动递增的 ID 正在锁定表，即使我已经 ReadUncommitted。话虽如此：

*   我对这个结论正确吗？
*   如果是这样，我假设如果我使用 HiLo 或 GuidComb 之类的东西生成 ID，它会解决问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:44:27.067

*   可能是
*   是的

与许多用户相比，HiLo 还可以减少数据库的流量和负载，因此无论如何切换到它都会很好。

# sql-server - 查询获取外键索引

> ID：12962027
> 
> 赞同：-1
> 
> 时间：2012-10-18T19:12:55.400
> 
> 标签：sql-server, foreign-keys, indexing

我正在 sql server 中寻找一个查询，它将显示我的数据库中所有外键索引的列表。我的数据库中有一堆索引，其中一些在表的外键上，我希望删除所有索引，除了那些针对外键和主键的索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:38:30.423

这是一个可以满足您需要的查询。

```
SELECT 
sc.name + '.' + t.name as tableName,
i.name as indexName,
c.name as columnName
FROM sys.foreign_key_columns fkc
JOIN sys.index_columns ic ON ic.object_id = fkc.parent_object_id
    AND ic.column_id = fkc.parent_column_id
JOIN sys.indexes i ON i.index_id = ic.index_id
    AND i.object_id = ic.object_id
JOIN sys.columns c ON c.object_id = ic.object_id
    AND c.column_id = ic.column_id  
JOIN sys.tables t ON t.object_id = c.object_id
JOIN sys.schemas sc ON sc.schema_id = t.schema_id
where t.is_ms_shipped = 0
ORDER BY tableName, indexName, columnName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T21:00:00.650

也许第一个答案的转折可以为你做吗？：

```
SELECT 
    sc.name + '.' + t.name as tableName,
    OBJECT_NAME(fkc.constraint_object_id) AS [FKey-Name],
    OBJECT_NAME(fkc.referenced_object_id) ReferencedTable, 
c.name as ColumnName
, i.name AS ReferencedKeyName
FROM    sys.foreign_key_columns fkc
JOIN    sys.index_columns ic ON ic.object_id = fkc.parent_object_id
    AND ic.column_id = fkc.parent_column_id
JOIN    sys.indexes i ON i.index_id = ic.index_id
    AND i.object_id = ic.object_id
JOIN sys.columns c ON c.object_id = ic.object_id
    AND c.column_id = ic.column_id  
JOIN    sys.tables t ON t.object_id = c.object_id
JOIN    sys.schemas sc ON sc.schema_id = t.schema_id
WHERE   t.is_ms_shipped = 0
ORDER BY tableName, OBJECT_NAME(fkc.constraint_object_id), columnName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:22:40.177

```
SELECT fk.name, 
       OBJECT_NAME(fk.parent_object_id) AS parent_table,
       c1.name AS parent_column, 
       OBJECT_NAME(fk.referenced_object_id) AS referenced_table, 
       c2.name AS referenced_column
    FROM sys.foreign_keys fk
        INNER JOIN sys.foreign_key_columns fkc
            ON fk.object_id = fkc.constraint_object_id
        INNER JOIN sys.columns c1
            ON fkc.parent_object_id = c1.object_id
                AND fkc.parent_column_id = c1.column_id
        INNER JOIN sys.columns c2
            ON fkc.referenced_object_id = c2.object_id
                AND fkc.referenced_column_id = c2.column_id 
```

# python - 如何反转整个列表的特定范围的列表？

> ID：12962029
> 
> 赞同：-1
> 
> 时间：2012-10-18T19:12:58.557
> 
> 标签：python, list, list-comprehension

考虑以下列表

```
 [[4,4,4],[5,5,5],[6,6,6],[7,7,7]......] 
```

我想每隔 N 行替换一次订单：

```
 5 5 5 
    4 4 4 
    7 7 7 
    6 6 6 
```

一般的想法是从 200 行的列表中取 20 行并反转顺序列表 [0:20:-1] 并继续此操作直到列表完成，因此只能执行 10 次：

```
for i in range(length-1):
    tobeflipped=num[:20:-1]
    num=num[20:]
for i in tobeflipped:
    f.write(''.join(str([d for d in i]).strip('[]').replace (',','')+'\n')) 
```

输出是正确的，但是它重复输出超过 200 行（几乎是 800 行）。我看不到如何纠正它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:44:13.003

我的版本就地更改了您的列表：

```
def block_reverse(lst, blocksize):
    for i in range(blocksize-1, len(lst), blocksize):
        if i<blocksize:
            lst[:blocksize]=lst[blocksize-1::-1]
        else:
            lst[i-blocksize+1:i+1] = lst[i:i-blocksize:-1]

m=[[4,4,4],[5,5,5],[6,6,6],[7,7,7]]
block_reverse(m, 2)
print m 
```

找出它是如何实现倒车的对你来说是一个练习:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:27:35.600

我会使用发电机：

```
def revsec(blocksize,lst):
    block = []
    for i,elem in enumerate(lst):
        if i % blocksize:
            block.append(elem)
        else:
            #python 3.3 note -- use `yield from block[::-1]` instead.
            for item in block[::-1]:  #reversed(block) might be better here
                yield item

            block = [elem]

    #yield any stragglers.        
    for item in block[::-1]:        #reversed(block) might be better here too
        yield item

a = range(200)
print list(revsec(20,a)) 
```

这有几个优点。首先，输入“列表”不必是列表。它可以是任何迭代器。这也返回一个迭代器，因此它实际上只需要`blocksize`在任何给定时间缓存元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:22:12.797

```
num = [[4,4,4],[5,5,5],[6,6,6],[7,7,7]]

for e, u in zip(num[::2], num[1::2]):
   print ' '.join(["%s" %i for i in u])
   print ' '.join(["%s" %i for i in e]) 
```

# vb.net - da.update 命令 vb.net 复制数据

> ID：12962041
> 
> 赞同：1
> 
> 时间：2012-10-18T19:13:41.753
> 
> 标签：vb.net, ms-access, duplicate-data

我有两段代码。第一个更新名为 tbl_Customers 的 access 数据库表中的数据。它工作正常：

```
Private Sub UpdateRecord()

    Dim imgLocation As String
    imgLocation = idPictureBox.ImageLocation

    Dim cb As New OleDb.OleDbCommandBuilder(da)

    ds.Tables("tbl_Customers").Rows(inc).Item(1) = txtFirstName.Text
    ds.Tables("tbl_Customers").Rows(inc).Item(2) = txtSurname.Text
    ds.Tables("tbl_Customers").Rows(inc).Item(3) = imgLocation
    ds.Tables("tbl_Customers").Rows(inc).Item(4) = mtxtPhoneNumber.Text
    ds.Tables("tbl_Customers").Rows(inc).Item(5) = cbReferred.Text
    ds.Tables("tbl_Customers").Rows(inc).Item(6) = custType

    da.Update(ds, "tbl_Customers")

    MessageBox.Show("Data updated", "Update")

    btnCommit.Enabled = False
    btnClear.Enabled = False
    btnAddNew.Enabled = True
    btnupdate.Enabled = True
    btnDelete.Enabled = True
    btnFirst.Enabled = True
    btnLast.Enabled = True
    btnNext.Enabled = True
    btnPrevious.Enabled = True
    btnFind.Enabled = True

End Sub 
```

第二段代码更新名为 tbl_SalesInventory 的访问数据库表。这段代码复制了表中的每条记录！

```
Private Sub UpdateItemRecord()

    Dim cb As New OleDb.OleDbCommandBuilder(da10)

    ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(1) = txtItemDescription.Text
    ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(2) = txtItemMin.Text
    ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(3) = txtItemAsk.Text

    Dim SelectedType As Integer = cbSellItemType.SelectedIndex
    Dim Type As Integer = SelectedType + 1
    ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(4) = Type.ToString("D2")

    ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(5) = txtItemCost.Text
    ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(6) = dtpItemPDate.Value

    If lblItemStatusDisplay.Text = "For Sale" Then
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(7) = "F"
    ElseIf lblItemStatus.Text = "On Layaway" Then
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(7) = "L"
    ElseIf lblItemStatus.Text = "Sold" Then
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(7) = "S"
    ElseIf lblItemStatus.Text = "Displayed" Then
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(7) = "D"
    ElseIf lblItemStatus.Text = "Scrapped" Then
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(7) = "X"
    End If

    Try
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(8) = txtDiaMin.Text
    Catch ex As Exception
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(8) = ""
    End Try

    Try
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(9) = txtDiaValue.Text
    Catch ex As Exception
        ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(9) = ""
    End Try

    ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(10) = txtItemWeight.Text
    ds10.Tables("tbl_SalesInventory").Rows(incInv).Item(11) = lblItemMeasure.Text

    da10.Update(ds10, "tbl_SalesInventory")

    MessageBox.Show("Data updated", "Update")

    RefreshDataset()
    SortDS10()

    btnCommitItem.Enabled = False
    btnClearItem.Enabled = False
    btnAddItem.Enabled = True
    btnUpdateItem.Enabled = True
    btnDeleteItem.Enabled = True
    btnFirstItem.Enabled = True
    btnLastItem.Enabled = True
    btnNextItem.Enabled = True
    btnPreviousItem.Enabled = True
    btnSearchItem.Enabled = True

End Sub 
```

任何人都可以解释为什么会这样吗？感谢您对这个问题的及时回复。

# sql-server - Microsoft SQL 代理作业中的 sp_send_dbmail 错误

> ID：12962044
> 
> 赞同：5
> 
> 时间：2012-10-18T19:13:57.290
> 
> 标签：sql-server, sql-server-2008

我正在尝试使用 sp_send_dbmail 从计划的 SQL 代理作业发送电子邮件并收到以下错误：

消息 22050，级别 16，状态 1，行 0 格式查询错误，可能参数无效 消息 14661，级别 16，状态 1，过程 sp_send_dbmail，行 504 查询执行失败：消息 15404，级别 16，状态 19，服务器 MyServer，行 1无法获取有关 Windows NT 组/用户“MyDomain\sqlagent”的信息，错误代码 0x5。

这是作业步骤中的代码：

```
DECLARE @SQL NVARCHAR(400)
SELECT @SQL = 'SELECT COUNT(staff_id) FROM Staff'

EXEC msdb.dbo.sp_send_dbmail
@recipients = 'me@myemail.com',
@subject = 'Email Alert',
@body = 'Test',
@query = @SQL,
@execute_query_database = 'MyDB' 
```

SQL 代理正在域帐户 [MyDomain\sqlagent] 下运行。除了将其添加为 msdb 中 DatabaseMailUserRole 的成员之外，我还在 MyDB 数据库中授予了此用户 db_owner 权限。仍然没有运气。如果我删除 @query 和 @execute_query_database 参数，它将发送一封“测试”电子邮件。但是，我需要附加查询的结果。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:22:52.013

我过去在 AD 中遇到过一些奇怪的错误。我建议检查您在其下运行此帐户的帐户是否具有在 AD 中可读的属性。最快的方法是运行

```
exec xp_logininfo 'MyDomain\sqlagent' 
```

看看你是否得到同样的错误。如果这样做，请检查域帐户的安全属性 [右键单击 Active Directory > 属性 > 安全选项卡中的用户] 并设置已验证用户的读取权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-04T15:58:27.527

这对我有用。

'从 YourDatabase.SchemaName.tablename 中选择列名'

我在这里找到了这个答案。

[https://social.msdn.microsoft.com/Forums/sqlserver/en-US/7869b033-80f1-4594-a77e-fb6dce582fb4/error-msg-when-sending-email-using-spsenddbmail?forum=transactsql](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/7869b033-80f1-4594-a77e-fb6dce582fb4/error-msg-when-sending-email-using-spsenddbmail?forum=transactsql)

# apache - Apache event mpm 配置和 apache worker mpm 配置

> ID：12962048
> 
> 赞同：3
> 
> 时间：2012-10-18T19:14:03.357
> 
> 标签：apache

**Apache 事件 mpm 配置** 嗨，任何人都可以建议我什么应该是事件 mpm 和工作者 mpm 的正确配置？

```
Presently i am using in both this below configuration.Please suggest me any change so that i can compare their performance.using this configuration the cpu usage of event mpm is very high and also performance is lower as compare to worker mpm?

    Startserver=16
    serverlimit=24
    maxclient=1536
    maxsparethreads=64 
    minsparethreads=64
    threadperchild=64
    threadlimit=64 
```

# android - 删除最后一项时 ListView 不刷新

> ID：12962049
> 
> 赞同：2
> 
> 时间：2012-10-18T19:14:09.257
> 
> 标签：android, android-listview, android-cursoradapter, android-listfragment

我的应用程序有问题。我将 CursorLoader 与 CursorAdapter 结合使用。一切都按预期工作，除了一个条件：当我在 ListView 上有一些项目并且我将适配器中的光标交换为空的光标时，不会删除可见项目（只有行之间的分隔符消失）。当我触摸 ListView 时，它会立即消失。

这是情况。我有一些非空光标： ![在此处输入图像描述](../Images/2f7296236e7287e1dbf0341dc6c26ad6.png)

然后我换成没有结果的游标： ![在此处输入图像描述](../Images/ca1621b2f3a8e888c9ab5b538a1daff2.png)

如您所见，只有分隔线消失了。触摸屏幕后，两个项目都消失了。

这是我交换光标的函数：

```
public void onLoadFinished(Loader<Cursor> loader, Cursor cursor)
{
    ratesAdapter.swapCursor(cursor);
} 
```

片段来源： http: [//pastebin.com/N2YGzgRj](http://pastebin.com/N2YGzgRj)

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T10:35:39.147

好的，所以在进一步调查问题后，我发现这个问题只适用于Android 4.0.x。在 2.2、2.3 或 4.1 中不存在此错误，仅在 4.0 中存在。我解决此错误的唯一方法是添加到 onLoadFinished()

```
getListView().setVisibility(View.GONE);
getListView().setVisibility(View.VISIBLE); 
```

我不觉得它优雅的方式，但也许你会有一些想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:14:10.463

不包括`notifyDataSetChanged();`通常是导致这些 listView 不刷新问题的原因。在您的加载代码之后尝试包含它是我可以推荐的所有内容，直到我获得更多信息。

# iphone - UITableView 动态与静态单元格分配性能/内存使用情况

> ID：12962051
> 
> 赞同：1
> 
> 时间：2012-10-18T19:14:24.450
> 
> 标签：iphone, ios, performance, uitableview, memory

谁能告诉我在 a 中使用静态和动态单元格在性能/内存使用方面的权衡`UITableView`？

这是我的情况：我有`TableView`6 个不同的部分。第一部分是我的 tableView 中唯一在每次加载视图时包含不同数量的单元格的部分，具体取决于应用程序的当前状态。即我已经`static cells`在界面生成器中为该部分声明了 12 个，但是我只显示了一定数量的那些，`cells`具体取决于到目前为止用户与应用程序的交互。其他 5 个`tableView`部分都包含`UISwitches`并且`textFields`永远不会改变。

所以说我为第一部分静态分配了 50 个`cells`，但根据应用程序的状态，仍然只显示了其中的一半。我希望能够显示多达 50 个`cells`。这将如何影响我的应用程序的速度或性能？每次都动态地完成整个过程并为其他部分`tableView`重新绘制`switches`and会导致更好的应用程序性能吗？`textFields`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:26:32.967

在这种情况下，UITableView 本身只与性能相关。真正的问题是如何以及何时分配新单元。

如果您有内容永远不会更改的静态单元格，并且您使用界面构建器（née Interface Builder）创建它们，您将看到分配只发生一次，通常在`-viewDidLoad`该表的生命周期内（或至少直到`-viewDidUnload`）这些单元将存在并且不需要重新分配。

但这是一个权衡。现在您的单元格将加载得更快，但您的应用程序将拥有更多内存。您只需要根据具体情况决定这是否会显着降低您的应用程序的速度，在这种情况下，您可能希望在数据源单元格获取方法中以典型的“动态”样式延迟加载静态单元格.

# jquery-selectors - 将存储的选择器传递给函数 - 效率

> ID：12962052
> 
> 赞同：3
> 
> 时间：2012-10-18T19:14:34.097
> 
> 标签：jquery-selectors

我将选择器存储在两个变量中。如果我全局创建它们并在函数中使用，则操作持续时间约为 0.2s

```
window.$my = {
    nameEdit : $('#nameEdit'),
    nameError : $('#nameError')
};

function Validation() {
    console.profile();
    var result = true;
    if ($my.nameEdit.val() == '') {
        $my.nameEdit.addClass('error');
        $my.nameError.css({ 'display': 'block' });      
    }
    else {
        $my.nameEdit.removeClass('error');
        $my.nameError.css({'display':'none'});
    }
    console.profileEnd();
} 
```

如果我在 Validaton() 中绑定另一个函数并尝试在此函数中使用它们，则需要的时间太长（大约 0.6 秒）：

```
window.$my = {
    nameEdit : $('#nameEdit'),
    nameError : $('#nameError')
};

function Validation() {
    $my.nameEdit.blur(function (evt) { ValidateName(evt); });
}

function ValidateName(evt) {
    console.profile();
    if ($my.nameEdit.val() == '') {
        $my.nameEdit.addClass('error');
        $my.nameError.css({ 'display': 'block' });      
    }
    else {
        $my.nameEdit.removeClass('error');
        $my.nameError.css({'display':'none'});
    }
    console.profileEnd();
} 
```

# sql - SQL Query 关系编码

> ID：12962057
> 
> 赞同：0
> 
> 时间：2012-10-18T19:15:07.450
> 
> 标签：sql, sql-server, tsql

需要一些帮助来完成这项工作。**请提供一些帮助，以确保每个ProductID**始终只返回一行。我的产品表包含有关产品的基本信息，在这种情况下可以是属性。它通过 ProductCode 链接到 Properties 表。

我想要的是让查询只返回它真正应该返回的一行。本质上，该行应显示 PropertyLabel，无论 PropertyProductValues 表中是否存在该特定 propertyLabel 的值。下面的代码返回一堆实际上不应该的行，或者我不希望它。我会很感激帮助微调这个请。提前致谢。

```
Create Table Product 
{
    ProductID uniqueidentifier, 
    ProductName Varchar(50),
    ProductCode Varchar(50)

}

Create Table Properties
{
     PropertyID uniqueidentifier, 
     PropertyProductcode Varchar(50)

}

Create Table PropertyProductValues
{
    ID uniqueidentifier,
    PropertyID  uniqueidentifier,
    ProductID    uniqueidentifier,
    PropertyLabel Varchar(50),
    UnitID uniqueidentifier

}

Create Table unit
{
    UnitID uniqueidentifier,
    Unit Varchar(50)
}

   Select productid , PropertyLabel
PropertyValue
PropertyUnit 
from Product 
inner join Properties on ProductCode =  PropertyProductCode
left join PropertyProductValues on Properties.PropertyID = ProductProductValues.PropertyID 
left join Unit on PropertyValues.UnitID = Unit.UnitID
    Where ltrim(rtrim(lower(PropertyLabel))) = lower('Special') 
```

## 样本数据

```
Product Table 
b0359c76-8622-4006-82f2-1b4c91a8f6b3   Brown Building   YSHJT
aba475c4-5a5c-483a-9faa-67f67ff9672d   Sket Building       GTJHD54
8f645348-8871-4fad-8c85-9fc6a1169b33    HOUSE 9           DGFS345

Properties Table

27c6485b-f7a5-4243-9304-71939230964d     DGFS345
88e911e5-bf40-4f14-89cc-4ed2984c342e     GTJHD54
d217cc14-6fcb-4251-a6d7-8fd1b3398a32      YSHJT
689cfd9d-bc87-4e23-afb3-d6cbf1e961f6       FFFSRW
bf7ae151-2e3f-4e0a-bf8b-d44ef30cf276        WYSJD

PropertyProductValues Table

6cf47434-c834-455d-a606-3d10cb9f7ab3       b0359c76-8622-4006-82f2-1b4c91a8f6b3    b0359c76-8622-4006-82f2-1b4c91a8f6b3       Storey           
82ee0f80-afe4-45c2-877c-e79ce286170f         27c6485b-f7a5-4243-9304-71939230964d   b0359c76-8622-4006-82f2-1b4c91a8f6b3       Bedrooms     
5ff7f809-6b1f-4d6c-a125-29ce67f097d7         27c6485b-f7a5-4243-9304-71939230964d    8f645348-8871-4fad-8c85-9fc6a1169b33        Bathrooms
7f634b81-1212-4223-af42-29b4dc2bafcc         27c6485b-f7a5-4243-9304-71939230964d     aba475c4-5a5c-483a-9faa-67f67ff9672d        Material
cae10884-edf0-4340-bde6-5207e28a07cc         689cfd9d-bc87-4e23-afb3-d6cbf1e961f6         b0359c76-8622-4006-82f2-1b4c91a8f6b3      Basement
83943759-39d7-406e-92ea-4202a9b1d716        bf7ae151-2e3f-4e0a-bf8b-d44ef30cf276         b0359c76-8622-4006-82f2-1b4c91a8f6b3      Storey
c045d0ff-34db-4427-9fb7-fd41fc92f310          bf7ae151-2e3f-4e0a-bf8b-d44ef30cf276         aba475c4-5a5c-483a-9faa-67f67ff9672d         balcony

Unit Table 

UNITID                                       UNIT
3a4a5216-0704-495e-b0a7-560787e0847a         kg
6b4493f6-c2e4-4682-b71d-93cb1893eb73          m
2f2b4fee-9e69-4a71-a098-36e2da71471e          l
55c8e5bf-edde-4977-ab7b-8827e337a31e          oz
19528647-bd9f-48e0-ba86-b722d5b8ab0e          cm
cee5cd46-1ae4-4b49-8b1c-9b3e0bd5270f          mm 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:18:25.427

如果您提供 3 个表的表结构，这将有所帮助，但原则上，要为每个 PropertyId 获取 1 行，您将执行`GROUP BY PropertyId`.

# android - Android 上的 Chrome 不会在方向更改时扩展标题元素

> ID：12962060
> 
> 赞同：3
> 
> 时间：2012-10-18T19:15:11.477
> 
> 标签：android, google-chrome, mobile, orientation

我只在 Chrome 和 Android 4.0.4 上的股票浏览器中针对 Droid Razr 进行了测试。当我使用以下标记时，`<hx>`从纵向视图旋转到横向视图时，任何元素都不会扩展屏幕的整个宽度。在横向刷新浏览器确实会导致这些元素扩展整个宽度。身体宽度正在扩大，但 hx 元素保持其纵向宽度。

这在股票浏览器中应该可以正常工作，并且对于其他块元素（例如 p 或 div）来说不是问题。我是不是忘记了什么？

```
<!doctype html>  
 <meta name=viewport content='width=device-width, initial-scale=1'>
 <h1>Around the rugged rock the ragged rascal ran. Around the rugged rock the ragged</h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T16:56:57.080

由 chrome 中的错误引起。我发现的最好的工作来自[https://code.google.com/u/114845687405761252904/](https://code.google.com/u/114845687405761252904/)并且是强制重绘方向更改

```

if (/\bAndroid\b.*\bChrome\b/.test(navigator.userAgent)) {

    window.addEventListener("orientationchange", function() {

        document.querySelector("body").style.display = "none";

        设置超时（函数（）{
            document.querySelector("body").style.display = "block";
        }, 1);

    }， 错误的）;

}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T20:01:31.163

我今天刚遇到这个问题。除非我们都忘记了什么，否则这绝对只是 Chrome 中的一个错误。我在运行 4.1.2 的 Nexus 7 上注意到了这个问题。

# c# - CheckBoxList 子 CSS

> ID：12962061
> 
> 赞同：0
> 
> 时间：2012-10-18T19:15:22.237
> 
> 标签：c#, asp.net, css

目前，我有这个：

```
<asp:CheckBoxList ID="chkSections" runat="server" onselectedindexchanged="chkSections_SelectedIndexChanged"></asp:CheckBoxList> 
```

...这会产生：

```
<table border="0" id="ctl00_cpBody_chkSections">
    <tbody><tr>
        <td><input type="checkbox" name="ctl00$cpBody$chkSections$0" id="ctl00_cpBody_chkSections_0"><label for="ctl00_cpBody_chkSections_0">All Sections</label></td>
    </tr><tr>
        <td><input type="checkbox" name="ctl00$cpBody$chkSections$1" id="ctl00_cpBody_chkSections_1"><label for="ctl00_cpBody_chkSections_1">Personal Health Status and Health History</label></td>
    </tr><tr>
        <td><input type="checkbox" name="ctl00$cpBody$chkSections$2" id="ctl00_cpBody_chkSections_2"><label for="ctl00_cpBody_chkSections_2">Physical Activity and Fitness</label></td>
    </tr>
</tbody></table> 
```

**问题：**我希望`input`生成的所有字段都有一个特定的类。不想用jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:30:46.757

您还可以使用 ListItem 的属性在服务器端设置类名：

```
protected void Page_Load(object sender, EventArgs e)
{
    foreach (ListItem item in chkSections.Items)
        item.Attributes["class"] = "class_item";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:22:39.460

为什么不在`<asp:CheckList>`CSS 中使用元素选择器设置 CssClass？

```
<asp:CheckList CssClass="ChLst"> 
```

```
.ChLst INPUT
{
    background-color: red;
}

<!-- OR: -->

.ChLst TD
{
    background-color: red;
} 
```

**编辑：**
啊，我现在明白了。请参阅此问题：[将样式应用于 CheckBoxList 中的 ListItems](https://stackoverflow.com/questions/104458/applying-styles-to-listitems-in-checkboxlist)

您可以添加类属性，而不是添加 Style 属性。

```
li.Attributes.Add("class", "chListItem"); 
```

**编辑 2：再想一想，使用**[中继器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)控件并构建自己的自定义解决方案
可能会更好。依赖 CheckBoxList 然后尝试在 jQuery 中使用它显然不适合你。

# sql - Magento 表中的产品 magento 折扣 - sales_flat_order_item

> ID：12962066
> 
> 赞同：0
> 
> 时间：2012-10-18T19:15:48.707
> 
> 标签：sql, magento, discount

如果我在 Magento 中对产品应用折扣并下订单...

```
 example: SKU 9999999 Regular $100, Special this week: $95 
```

如果我对文件 sales_flat_order_item 和 sales_flat_order 进行查询，我在哪里可以找到正常价格？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T20:24:14.617

我不明白您为什么需要在 SQL 中执行此操作，但您可以在平面产品表中查找产品 id/sku（我忘记了它的名字），然后找到正常价格在那里。

# twitter-bootstrap - 如何修复 IE7 中的 twitter 引导按钮布局？

> ID：12962068
> 
> 赞同：2
> 
> 时间：2012-10-18T19:16:07.757
> 
> 标签：twitter-bootstrap, internet-explorer-7

我的表单中有 3 个按钮：

```
<form id="myform" class="form-horizontal" class="collapse in">
  <fieldset>
    <div>
      <div class="control-group">
        <label class="control-label" for="place-of-birth">Место рождения</label>
        <div class="controls">
          <input type="text" class="input-xlarge" id="place-of-birth" name="place-of-birth" minlength="2" maxlength="80" autocomplete="off">
        </div>
      </div>
   </div>    
    <div class="form-actions">
      <button type="button" class="btn" data-toggle="modal" data-target="#modal-demo-search">Демо поиска</button>
      <button type="button" class="btn" id="clear">Очистить форму</button>
      <button type="button" class="btn btn-inverse" id="search" name="search" data-loading-text="Поиск...">Поиск</button>
    </div>
  </fieldset>
</form> 
```

[演示](http://jsbin.com/olilek/1)

在相同的屏幕尺寸上，它在 IE7 中看起来很糟糕（2 行，没有边距）： ![IE7](../Images/32a67e8d2c8b8691af3c7ba2b3ceb040.png)

在 Firefox 中正常时： ![火狐](../Images/f76a8ad071260b4cfc301718384e94dc.png)

我应该如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T14:11:45.653

这有点帮助：http: [//www.claystreet.com/sites/claystreet/dev/bootstrap/iebutton-fix/](http://www.claystreet.com/sites/claystreet/dev/bootstrap/iebutton-fix/)

但不修复方角。

高温高压

# javascript - 我将如何看待 Exc 中的内容。增值税框并添加 20% 并将所得金额放入 Inc. 增值税框？

> ID：12962069
> 
> 赞同：0
> 
> 时间：2012-10-18T19:16:11.310
> 
> 标签：javascript, calculator

我有三个盒子，其中两个是输入框，一个是选择器，这是一张图片......

![在此处输入图像描述](../Images/8935af238949c7df80699d588d16d77b.png)

为了争论，假设我们选择 20%

我将如何看待 Exc 中的内容。增值税框并添加 20% 并将所得金额放入 Inc. 增值税框中，因此如果您更改 Exc 中的内容。增值税然后公司增值税重新计算。

示例：Exc Rate Inc. 2.00 + 20% = 2.40

如果它也可以采用另一种方式，那就太好了，因此您将一个金额计入 Inc. VAT，然后将其除以 1.20 (20%) 到 Exc。增值税

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:35:20.067

```
<form name="calculator">
    <input name="exc_vat" type="text" onkeyup="calc_inc()" />
    <select name="vat" onchange="calc_two()">
        <option value="1.2">20%</option>
        <option value="1.05">5%</option>
        <option value="1">0%</option>
    </select>
    <input name="inc_vat" type="text" onkeyup="calc_exc()" />
</form>

<script type="text/javascript">
function calc_inc(){
    var frm = document.forms.calculator;
    frm.inc_vat.value = (frm.vat.value * frm.exc_vat.value).toFixed(2);
}
function calc_exc(){
    var frm = document.forms.calculator;
    frm.exc_vat.value = (frm.inc_vat.value / frm.vat.value).toFixed(2);
}
function calc_two(){
    var frm = document.forms.calculator;
    if (frm.exc_vat.value != '') calc_inc(); else if (frm.inc_vat.value != '') calc_exc();
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:22:13.423

```
var exc = document.getElementById(...)
var inc = document.getElementById(...)

inc.onKeyup = function() {
     exc.value = inc.value / 1.2;
}
exc.onKeyup = function() {
     inc.value = exc.value * 1.2;
} 
```

根据您希望它的行为方式，您可能需要`onInput`或`onChanged`代替。

# javascript - 为什么这个简单的一行 javascript 代码不起作用？

> ID：12962070
> 
> 赞同：1
> 
> 时间：2012-10-18T19:16:12.830
> 
> 标签：javascript

使用谷歌浏览器，我不知道为什么这不起作用:(

```
// ==UserScript==
// @name       My Fancy New Userscript
// @namespace  http://use.i.E.your.homepage/
// @version    0.1
// @description  enter something useful
// @match      http://*/*
// @copyright  2012+, You
// ==/UserScript==

document.getElementsByTagName('a').style.color='Red'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:16:58.303

因为它返回一个*“类似数组”*的元素集合，您需要单独操作这些元素。

```
document.getElementsByTagName('a')[0].style.color='red'; 
```

* * *

如果您预期有多个匹配项，您将在循环中操作。

```
var aList = document.getElementsByTagName('a');

for (var i = 0, len = aList.length; i < len; i++) {
    aList[i].style.color='red';
} 
```

* * *

当然，对于这个简单的操作，您可能会使用 CSS 而不是 JS。

如果您只想要链接，您可以使用`document.links`而不是`getElementsByTagName`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:18:14.390

`document.getElementsByTagName`返回一个[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)。您必须执行以下操作：

```
var anchors = document.getElementsByTagName('a'), i, j;
for (i=0, j=anchors.length; i<j; i++) {
    anchors[i].style.color = 'red';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:17:20.193

[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)返回一个[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，而不仅仅是一个元素。您需要遍历并编辑每个`style.color`.

# wpf - 将 DataGrid 绑定到 DataTable 的 DataView 不会更新新列

> ID：12962073
> 
> 赞同：0
> 
> 时间：2012-10-18T19:16:28.290
> 
> 标签：wpf, datagrid, datatable, dataview

我有一个 DataTable，我从程序的另一部分创建行和列。我将此 DataTable 的默认 DataView 绑定到 DataGrid。我以以下格式更新我的 DataTable：

1：向DataTable添加三列

2：在之前创建的列中的DataTable中，一次添加20行数据。

3：继续添加1000行数据。

这可以正常工作。所以接下来我用新数据调用我的 UpdateTable 方法，这会导致创建三个额外的列，然后从第一行到 1000 为这些列填充数据。 DataTable 已正确更新，但 DataGrid 不显示新添加的列.

更新行时绑定工作正常的原因可能是什么，但是当我添加其他列时绑定失败？

为简洁起见，我省略了 DataTable 更新代码。我确信这可以按设计工作。

仅供参考：同样的代码可以完美地与第三方 DataGrid 配合使用，但我更愿意使用 Microsoft DataGrid。

XAML：

```
<DataGrid AutoGenerateColumns="True" Grid.Row="2" ItemsSource="{Binding View}"/> 
```

虚拟机：

```
public class ViewModel : INotifyPropertyChanged
    {
        private DataTable table = new DataTable();

         public DataTable Table
        {
            get
            {
                return table;
            }

            set
            {
                table = value;
                onPropertyChanged("Table");
            }
        }

        public DataView View
        {
            get
            {
                return table.DefaultView;
            }            
        }

        public UpdateTable(UpdateData x)
        {
          //Algorithm to update the DataTable based on received data
          //Rows are dynamically being added and columns are dynamically being added
          onPropertyChanged("Table");
          onPropertyChanged("View");
        }

... 
```

# plsql - PLSQL 授予用户权限，但仍无法修改数据

> ID：12962079
> 
> 赞同：0
> 
> 时间：2012-10-18T19:16:57.400
> 
> 标签：plsql, sqlplus

我有两个架构，一个架构需要修改另一个架构中的数据。为了方便这一点，我以 SYSDBA 的身份授予了该表的权限：

```
GRANT INSERT, UPDATE, DELETE, SELECT ON schema1.mytable TO schema2;
EXIT; 
```

这将返回消息`Grant succeeded.`

但是，当 schema2 尝试对 schema1 进行更新时，我收到一个权限错误，告诉我我没有进行更新的权限。我查看了 SQLPLUS 中的**授权**选项卡`mytable`，它显然表明我没有权限：

```
PRIVILEGE   GRANTEE  GRANTABLE    GRANTOR    OBJECT_NAME
INSERT       schema2    No         schema1     mytable
UPDATE       schema2    No         schema1     mytable
SELECT       schema2    No         schema1     mytable
DELETE       schema2    No         schema1     mytable 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:43:03.637

一定有其他错误。Schema2 确实对 schema1.mytable 具有权限——只是没有将这些权限“重新授予”给其他人的权限。

# android - 无法将 Uri 的 ArrayList 保存在文件中：NotSerializableException

> ID：12962081
> 
> 赞同：4
> 
> 时间：2012-10-18T19:16:59.427
> 
> 标签：android, parcelable

我必须保存 Ury 的 ArrayList，所以我使用代码

```
public static void saveUriList(ArrayList<Uri> myUriList) {
        if (storageAvailable()) {
            try {
                FileOutputStream uriListSaved = new FileOutputStream(
                        baseDir + File.separator + filename);
                ObjectOutputStream uriList = new ObjectOutputStream(
                        uriListSaved);
                uriList.writeObject(myUriList);
                uriList.close();
            } catch (Exception exc) {
                exc.printStackTrace(); 
            }
        }

    } 
```

此代码结构适用于实现可序列化但使用 Uri 对象返回此异常的自定义对象

```
10-18 21:06:40.169: W/System.err(11957): java.io.WriteAbortedException: Read an exception; java.io.NotSerializableException: android.net.Uri$StringUri
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:933)
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
10-18 21:06:40.169: W/System.err(11957):    at java.util.ArrayList.readObject(ArrayList.java:665)
10-18 21:06:40.169: W/System.err(11957):    at java.lang.reflect.Method.invokeNative(Native Method)
10-18 21:06:40.169: W/System.err(11957):    at java.lang.reflect.Method.invoke(Method.java:507)
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readObjectForClass(ObjectInputStream.java:1520)
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readHierarchy(ObjectInputStream.java:1443)
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readNewObject(ObjectInputStream.java:2112)
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:916)
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
10-18 21:06:40.169: W/System.err(11957):    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
10-18 21:06:40.169: W/System.err(11957):    at it.myApp.testApp.utility.FileArchiveManager.loadUriList(FileArchiveManager.java:158)
10-18 21:06:40.169: W/System.err(11957):    at it.myApp.testApp.MyClass.onCreate(MyClass.java:107)
10-18 21:06:40.169: W/System.err(11957):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-18 21:06:40.169: W/System.err(11957):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-18 21:06:40.169: W/System.err(11957):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-18 21:06:40.169: W/System.err(11957):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-18 21:06:40.169: W/System.err(11957):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
10-18 21:06:40.169: W/System.err(11957):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 21:06:40.169: W/System.err(11957):    at android.os.Looper.loop(Looper.java:130)
10-18 21:06:40.169: W/System.err(11957):    at android.app.ActivityThread.main(ActivityThread.java:3687)
10-18 21:06:40.179: W/System.err(11957):    at java.lang.reflect.Method.invokeNative(Native Method)
10-18 21:06:40.179: W/System.err(11957):    at java.lang.reflect.Method.invoke(Method.java:507)
10-18 21:06:40.179: W/System.err(11957):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-18 21:06:40.179: W/System.err(11957):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-18 21:06:40.179: W/System.err(11957):    at dalvik.system.NativeStart.main(Native Method)
10-18 21:06:40.179: W/System.err(11957): Caused by: java.io.NotSerializableException: android.net.Uri$StringUri
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1535)
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
10-18 21:06:40.179: W/System.err(11957):    at java.util.ArrayList.writeObject(ArrayList.java:651)
10-18 21:06:40.179: W/System.err(11957):    at java.lang.reflect.Method.invokeNative(Native Method)
10-18 21:06:40.179: W/System.err(11957):    at java.lang.reflect.Method.invoke(Method.java:507)
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeHierarchy(ObjectOutputStream.java:1219)
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeNewObject(ObjectOutputStream.java:1575)
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeObjectInternal(ObjectOutputStream.java:1847)
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1689)
10-18 21:06:40.179: W/System.err(11957):    at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:1653)
10-18 21:06:40.179: W/System.err(11957):    at it.myApp.testApp.utility.FileArchiveManager.salvaListaPathImmagini(FileArchiveManager.java:127)
10-18 21:06:40.179: W/System.err(11957):    at it.myApp.testApp.LoadImage.onActivityResult(LoadImage.java:120)
10-18 21:06:40.179: W/System.err(11957):    at android.app.Activity.dispatchActivityResult(Activity.java:3908)
10-18 21:06:40.179: W/System.err(11957):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2532)
10-18 21:06:40.179: W/System.err(11957):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2578)
10-18 21:06:40.179: W/System.err(11957):    at android.app.ActivityThread.access$2000(ActivityThread.java:117)
10-18 21:06:40.179: W/System.err(11957):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:965)
10-18 21:06:40.189: W/System.err(11957):    ... 8 more 
```

我想这是因为 Uri 没有实现 Serializable....

我该如何解决这个问题？我必须创建自定义 Uri 对象吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T19:26:12.547

正如您已经注意到的，Uri 没有实现 Serializable，请参阅参考[android.net.Uri](http://developer.android.com/reference/android/net/Uri.html)。`Uri.parse()`如何在写入文件时将 uris 存储为字符串，并在读取文件时使用将它们转换回 uris ？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-08T15:34:13.360

保存时

```
String str = myUri.toString(); 
```

和加载时

```
Uri myUri = Uri.parse(str); 
```

# java - 替换类型数据结构的arraylist中的值

> ID：12962082
> 
> 赞同：1
> 
> 时间：2012-10-18T19:17:01.987
> 
> 标签：java, arraylist

这可能是一个非常简单的问题，但我仍然会问它。

我的数组列表：

```
ArrayList<FileNameData> fileData; 
```

文件名数据类：

```
public FileNameData(TCComponentItemRevision rev, TCComponentDataset selectedDataset, String markUp, String fileName) 
```

设置方法

```
public void setFileName(String fName) {
   fileName = fName;
} 
```

我正在尝试获取用户输入的文件名并替换数组中已有的文件名。

我创建了以下方法。

```
public void setFileName(int index, String fName) {
    fileData.set(index, setFileName(fName));
} 
```

我知道获取文件名非常简单

```
String fName = fileData.get(index).getFileName(); 
```

我知道 set 方法需要索引和新值，但我不确定如何访问 set 中的 setFileName 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:29:10.203

如果我猜对了，那么您想修改存储在位置的对象`index`：

```
public void setFileName(int index, String fName) {
    fileData.get(index).setFileName(fName);
} 
```

或者，还有更多的行：

```
public void setFileName(int index, String fName) {
    // get the fileNameData stored at position index
    FileNameData fileNameData = fileData.get(index);

    // set the new filename
    fileNameData.setFileName(fName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:36:58.977

如果我理解正确，你有两个类看起来像这样：

```
class SomeClass {
    ArrayList<FileNameData> fileData;

    public SomeClass(){
        fileData = new ArrayList<FileNameData>();   
    }
} 
```

和

```
class FileNameData {

    String fileName;

    public FileNameData(TCComponentItemRevision rev, TCComponentDataset selectedDataset, String markUp, String fileName){ ... }

    public void setFileName(String fName) { 
        fileName = fName; 
    }

    public String getFileName() { 
        return fileName;
    }
} 
```

因此，您需要找到一种方法来获取存储当前文件名的索引。

获得索引后，您只需执行以下操作（应该在 中完成`SomeClass`，因此该类将如下所示：

```
class SomeClass {
    ArrayList<FileNameData> fileData;

    public SomeClass(){
        fileData = new ArrayList<FileNameData>();   
    }

    public void replaceFileNameAtIndex(int index, String fileName){
           fileData.get(index).setFileName(fileName);
    }
} 
```

查找索引的一种方法可能是：

```
public int findIndexOfFilleName(String fileName){
     for (FileNameData file : fileData)
        if (file.getFileName().equals(fileName))
            return fileData.indexOf(file);
    return -1; //or some other value indicating not found
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:35:28.210

如果您尝试从 ArrayList 中获取特定文件并更改文件名，则需要从列表中获取正确的元素。

如果您知道旧文件的索引，则相当简单：

```
file = list.get(index);
file.setName(newName); 
```

可以使用的[`indexOf`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#indexOf%28java.lang.Object%29)方法[`ArrayList`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)。为此，对象的and[`equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)必须正确实现。假设文件名唯一标识一个文件：[`hashcode`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)`FileData`

在 FileData 类中

```
public boolean equals(Object other)
{
    return other instanceof FileData 
           && this.getFileName().equals(((FileData)other)getName());
}

public int hashCode()
{
    return this.getFileName().hashCode();
} 
```

然后您可以找到具有给定名称的文件的索引并更新它：

```
FileData file = new FileData();
file.setName(oldName);
int index = list.indexOf(file);
file = list.get(index);
file.setName(newName); 
```

# java - Java泛型中的Void和无界通配符有什么区别？

> ID：12962088
> 
> 赞同：9
> 
> 时间：2012-10-18T19:17:12.190
> 
> 标签：java, generics

在 Java 泛型中，Void 类型的对象和无界通配符类型的对象有什么区别？我的意思是我了解<?>的使用，也了解Void在反射方面的使用，但是当我看到Java源代码时我有点好奇

```
java.util.concurrent.AbstractExecutorService 
```

及其方法

```
public Future<?> submit(Runnable task) {
    ...
    RunnableFuture<Void> ftask = new TaskFor(task, null);
    ...
    return ftask; 
```

在方法内部它使用 RunnableFuture<Void> 而不是 RunnableFuture<?>

有人可以帮我理解这背后的原因吗？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T19:26:17.383

[void](http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html)是一个特殊的类，用来表示**没有**返回值。`Void` *虽然本身*没有什么特别之处，但它不能（也永远不会）被实例化，所以它唯一可能的值是 always `null`。它用于两件事：

1.  说泛型方法或类没有返回值。
2.  使用 .来表示`void`Java 反射中的返回类型`Void.TYPE`。例如，请参阅[如何通过反射确定方法是否返回“void”](https://stackoverflow.com/q/1924253/1374678)。

所以它与通配符非常不同，通配符不是实际的类，而是在编译时代表一种特定的、*未知的类型。*在运行时，它像所有其他泛型类型一样被[擦除。](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)

* * *

关于`submit`方法。以下是 JDK 6 的两个实现：

```
public Future<?> submit(Runnable task) {
    if (task == null) throw new NullPointerException();
    RunnableFuture<Object> ftask = newTaskFor(task, null);
    execute(ftask);
    return ftask;
} 
```

和 JDK 7：

```
public Future<?> submit(Runnable task) {
    if (task == null) throw new NullPointerException();
    RunnableFuture<Void> ftask = newTaskFor(task, null);
    execute(ftask);
    return ftask;
} 
```

如您所见，该类型`Void`仅在 JDK 7 中更改为，可能是因为它在概念上更有意义。但是由于方法的接口不能改变（出于兼容性原因，并且因为方法实现`Future<?> submit(Runnable task)`了[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)接口），所以返回类型`Future<?>`保持不变。这就是我的解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T19:22:41.237

void 不是通配符，它​​表示根本没有要返回的值。

无效的[javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Void.html) ...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T19:48:37.693

[void](http://docs.oracle.com/javase/6/docs/api/java/lang/Void.html)是 void 的对象表示。void 从方法中不返回任何内容，而 Void 总是返回 null。这是因为 void 不是对象，因此不能与泛型一起使用。当您不需要任何返回值时，最好将 Void 与 Futures 一起使用。

# php - 如何使用 PHP 将表的一部分拆分为超过特定数量的 td 的 2 列？

> ID：12962089
> 
> 赞同：1
> 
> 时间：2012-10-18T19:17:12.127
> 
> 标签：php, html-table

我正在处理的网站希望以特定方式组织数据。如果它的长度超过 8 td，我需要将它分成两列。这是我现在的代码。我已经将它放入一个数组中，因为我有一个关于这样做并使用计数来显示数据的想法，但我还没有弄清楚如何让它工作。

```
 $resultFound = false;
        $prevWeek = -1;
        $count = 0;

        while($row = mysqli_fetch_array($result)) {
            $adjustedWeek = dateToWeek($row['date']) - 35;
            if($_GET['keywords'] != "") {
                $id = search($row, $_GET['keywords']);
                if($row['id'] == $id) {
                    if($validWeek) {
                        if($week == $adjustedWeek) {
                            include('test2.php');
                        }
                    }
                    else {
                        include('test2.php');
                    }
                }
            }
          foreach($tableArray as $table) {
               echo $table;
          } 
```

这是我的 test2.php 代码

```
$table = "";
if($prevWeek != $adjustedWeek) {
    $table .= ('<th colspan=2>Week' . $adjustedWeek . '</th>');
    $prevWeek = $adjustedWeek;
}
$table .= '<tr>';
$table .= ('<td colspan=12><a href="details.php?id=' . $row['id'] . '">'
    . getGameTitleText($row) . '</a></td>');
$table .= '</tr>';
$resultFound = true;
$tableArray[] = $table;
$count++; 
```

我需要代码来做这样的事情：

```
If (all items of any week > 8)
        write out 8 items to column one
        then write the rest to column two 
```

我已经计算了它正在搜索的条目总数，但不是特定于一周，我不想为此做很多变量来跟踪。

我怎样才能得到我想要的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:05:40.773

警告！！下面的代码只是为了说明这个想法。未在机器上测试，但我认为您可以消除可能的错误。

伪代码示例：

```
$arr=array();
while($row = mysqli_fetch_array($result)) {
    $arr[]['data']=$row['data'];
    $arr[]['whatever']=$row['whatever'];
}
$columns=floor(count($arr)/8);
$output="<table>";
foreach ($arr as $i=>$a){
    $output.="<tr>";
    $output.="<td>{$arr[$i]['data']}</td>";
    if ($columes>0){
        for($j=0;$j<$columes;$j++){
            $row_number=$i+($j+1)*8;
            $output.="<td>{$arr[$row_number]['data']}</td>";
        }
    }
    $output.="</tr>";
}
$output.="</table>"; 
```

如果 2 不够，此代码将继续添加第三列。

您可能仍想对数组的末尾进行测试，因此当 $row_number 大于 count($arr) 时，您不会收到一堆警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:10:18.600

这就是我最终做到的方式。这有点“脏”，因为它在开头回显了一个额外的 /table 和 /tr ，但它适用于我的目的并且比已经发布的代码更简单。这对我来说太复杂了

```
$table = "";
if($prevWeek != $adjustedWeek) {
    $table .= '</tr></table><table class="vault_table">';
    $table .= ('<tr><th>Week ' . $adjustedWeek . '</th></tr>');
    $table .= '<table class="vault_table">';
    $prevWeek = $adjustedWeek;
}
if($count % 2 == 0) {
    $table .= '<tr>';
}
$table .= ('<td><a href="details.php?id=' . $row['id'] . '">'
. getGameTitleText($row) . '</a></td>');

$resultFound = true;
$tableArray[] = $table;
$count++; 
```

该类仅用于样式表。与它的布局方式没有任何关系。除了桌子的每一边是容器的 50% 宽度

# java - 使用 Pattern.CASE_INSENSITIVE 的 Java RegEx 性能

> ID：12962091
> 
> 赞同：1
> 
> 时间：2012-10-18T19:17:20.553
> 
> 标签：java, regex, performance

我正在使用一个非常简单的正则表达式

```
%%(products?)%% 
```

现在我希望它能够匹配两种产品？和产品？显而易见的答案是在编译模式时使用 CASE_INSENSITIVE 标记：

```
Pattern.compile("%%(products?)%%", Pattern.CASE_INSENSITIVE) 
```

但是在[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html#CASE_INSENSITIVE)中它说“指定这个标志可能会造成轻微的性能损失。” 因此，我想到了一个没有标志的替代方案：

```
Pattern.compile("%%([Pp]roducts?)%%") 
```

我的问题是：哪个性能更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:21:41.360

由于不区分大小写的版本相当于

```
Pattern.compile("%%([Pp][Rr][Oo][Dd][Uu][Cc][Tt][Ss]?)%%") 
```

很明显，您会受到某种性能损失。

所以在你的情况下，最后一个版本会更有效（也更有限）。
*但是*，在这种情况下（可能是大多数情况下），我会说惩罚小到可以忽略。如果您的应用程序确实是性能密集型的，您可以随时进行基准测试以查看加速是否明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:36:06.397

实际上，这些方法之间存在显着差异。

虽然`Pattern.compile("%%(products?)%%", Pattern.CASE_INSENSITIVE)`看起来效率不如`Pattern.compile("%%([Pp]roducts?)%%")`乍一看，但它的内部功能并不完全是将每个字符与它们的小写和大写对应物进行比较。实际发生的是，第一种方法对 Unicode 的小写和大写块进行范围检查，而第二种方法进行文字比较。

我没有比这更深入的知识，但重要的部分是这个简单但非常有趣的测试（最后包括我机器上的结果）：

```
String base = "I have a product that is the product of my hard work." 
  + "Products are always nice, because I can win cash if I sell my products.\n" 
  + "The product of me making my product is cash, because cash is the product of selling my product.\n" 
  + "With the cash I win with my product, I can buy other people's products.";

int processRepeats = 1000000; //One million runs, enough to take time for each clocking.
int averageRepeats = 10;

long averager = 0;
int count = 0;

//Switch the commenting to test the opposing method.
Pattern p = Pattern.compile("products?", Pattern.CASE_INSENSITIVE);
//Pattern p = Pattern.compile("[Pp]roducts?");
Matcher m;
long clocking;
for (int i = 0; i < averageRepeats; i++) {
  clocking = System.nanoTime();
  for (int ii = 0; ii < processRepeats; ii++) {
    m = p.matcher(base); //Here because the "base" would change in a real environment.
    while (m.find()) {
      count++;
    }
  }
  clocking = System.nanoTime() - clocking;
  averager += clocking;
  //System.out.printf("This method found %9d matches in %15d nanos [%9.3f ms]\n", count, clocking, clocking / 1000000f);
}
System.out.printf("This method averages %15d nanos [%16.3f ms] for %d times executing %d runs.\n",
averager / averageRepeats, (averager / (float) averageRepeats) / 1000000f, averageRepeats, processRepeats);

//RESULTS ON MY MACHINE:

//FIRST METHOD: [3 runs to demonstrate/guarantee consistency]
//This method averages      5024404693 nanos [        5024,404 ms] for 10 times executing 1000000 runs.
//This method averages      5021385539 nanos [        5021,386 ms] for 10 times executing 1000000 runs.
//This method averages      5017170143 nanos [        5017,170 ms] for 10 times executing 1000000 runs.

//SECOND METHOD: [same deal]
//This method averages      5806310774 nanos [        5806,311 ms] for 10 times executing 1000000 runs.
//This method averages      5809879747 nanos [        5809,880 ms] for 10 times executing 1000000 runs.
//This method averages      5804277386 nanos [        5804,277 ms] for 10 times executing 1000000 runs. 
```

* * *

如您所见，不仅第一种方法更快（最终取决于它正在运行的机器），而且考虑到大量运行，几乎 800 毫秒（8/10 秒）的性能差异可能不如正如人们想象的那样，影响可以忽略不计！

# javascript - 使用 Express JS .all() 方法：检测实际使用了哪个 VERB

> ID：12962097
> 
> 赞同：16
> 
> 时间：2012-10-18T19:17:52.597
> 
> 标签：javascript, node.js, rest, request, express

我将创建一个`/api`端点，盲目地代理请求和响应到遗留的 RESTful API 系统（用 Ruby 编写并托管在不同的域上）。

这是一个中间过渡步骤，因此应该可以正常工作。

所以，我看到了如何使用`app.all()`. 但由于 API 是 RESTful，我还必须维护用于请求的 HTTP 动词 - 那么，我可以从`req`对象中检测到它吗？如果没有，我当然可以为 GET、PUT、POST、DELETE、OPTIONS 订阅 5 个处理程序，但最好避免这种情况。

另外，我应该如何处理请求正文（查询字符串和有效负载）？我假设我需要手动重新创建解析后的查询字符串`req.query`并按原样传递`req.body`给`request` [https://github.com/mikeal/request](https://github.com/mikeal/request) - 对吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-18T20:17:17.297

我想你们都需要的是`req.method`. 并处理body，添加`express.bodyParser()`中间件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T20:09:28.720

如果您只想传递请求并返回响应，那么您正在寻找**代理**。

我建议查看[node-http-proxy](https://github.com/nodejitsu/node-http-proxy)。只需加载代理库，初始化代理，代理所有请求。

# c# - 为什么它得到旧数据集

> ID：12962099
> 
> 赞同：0
> 
> 时间：2012-10-18T19:17:55.733
> 
> 标签：c#

当我选择一个列表框项目时，我的程序正常工作。它获取正确的数据集和正确的数据。当我写入文本框时，我的源方法工作并找到正确的结果。但是当我选择列表框项目后，它会将旧的数据集数据带到屏幕上。我可以用这种方法做什么？

```
public void ara(string str, int neyegore)
{
      sqlcon.Open();
      if (neyegore == 0)
          komut = new SqlCommand("select * from FilmTablo WHERE ad LIKE '%" + str + "%'", sqlcon);
      else if (neyegore == 1)
          komut = new SqlCommand("select * from FilmTablo WHERE tur LIKE '%" + str + "%'", sqlcon);
      else if (neyegore == 2)
          komut = new SqlCommand("select * from FilmTablo WHERE yonetmen LIKE '%" + str + "%'", sqlcon);
      else if (neyegore == 3)
          komut = new SqlCommand("select * from FilmTablo WHERE oyuncular LIKE '%" + str + "%'", sqlcon);

      sdr = null;
      sdr = komut.ExecuteReader();
      dt2 = new DataTable();
      dt2.Load(sdr);
      ds2 = new DataSet();
      ds2.Tables.Add(dt2);
      listBox1.Items.Clear();
      // sayac2 = 1;
      int i = 0;

      while (i < ds2.Tables[0].Rows.Count)
      {
         listBox1.Items.Add(ds2.Tables[0].Rows[i].ItemArray[0]);
         i++;
      }
      sqlcon.Close();
     }

private void listBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
{                  
                txtad.Text = ds.Tables[1].Rows[listBox1.SelectedIndex].ItemArray[0].ToString().Trim();
                txttur.Text = ds.Tables[1].Rows[listBox1.SelectedIndex].ItemArray[1].ToString().Trim();
                txtsure.Text = ds.Tables[1].Rows[listBox1.SelectedIndex].ItemArray[2].ToString().Trim();
                txtyonetmen.Text = ds.Tables[1].Rows[listBox1.SelectedIndex].ItemArray[3].ToString().Trim();
                txtoyuncular.Text = ds.Tables[1].Rows[listBox1.SelectedIndex].ItemArray[4].ToString().Trim();
                txtsenaryo.Text = ds.Tables[1].Rows[listBox1.SelectedIndex].ItemArray[5].ToString().Trim();
                byte[] resim = (byte[])ds.Tables[1].Rows[listBox1.SelectedIndex].ItemArray[7];
                image1.Source = GetBitmapImage(resim);
 }

public void listeyiguncelle()
{
            sqlcon.Open();
            komut = new SqlCommand("select * from FilmTablo", sqlcon);
            sdr = null;
            sdr = komut.ExecuteReader();
            dt = new DataTable();
            dt.Load(sdr);
            ds = new FilmDataDataSet();
            ds.Tables.Add(dt);
            listBox1.Items.Clear();
            int i = 0;
            //MessageBox.Show(ds.Tables[1].Rows.Count.ToString());
            while (i < ds.Tables[1].Rows.Count)
            {
                listBox1.Items.Add(ds.Tables[1].Rows[i].ItemArray[0]);
                i++;
            }
            sqlcon.Close();

            lblfilmsayisi.Content = ds.Tables[1].Rows.Count;

} 
```

![在此处输入图像描述](../Images/ac8950849e8563c10e9c71b4150a7384.png) ![在此处输入图像描述](../Images/5137c90ad074d668d1df4db7c93ef2a2.png)

# parameters - 将结构传递给 _beginThreadEx() 函数会产生意外输出

> ID：12962107
> 
> 赞同：0
> 
> 时间：2012-10-18T19:18:35.347
> 
> 标签：parameters, struct, beginthreadex

我正在尝试学习将多个参数传递给 _beginThreadEx 函数的“正确”方式。可以使用一些帮助。

在函数 myThread.

我不断将 1、3 或 5 附加到 *x->value 的输出中

另外...如果我放置

```
cout << "die: " << random_num << endl; 
```

前

```
hThread[0] = (HANDLE)_beginthreadex(NULL, 0, myThread, &myThreadData, 0, NULL); 
```

有时没有输出 Hello World，所以我把它放在上面的行之后。

```
#include <iostream>
#include <process.h>
#include <stdint.h>
#include <time.h>
#include <string>
#include <windows.h>

#define PHI 0x9e3779b9

static uint32_t Q[4096], c = 362436;

using namespace std;

class cmwc
{
    public:

    void init_rand(uint32_t x)
    {
            int i;

            Q[0] = x;
            Q[1] = x + PHI;
            Q[2] = x + PHI + PHI;

            for (i = 3; i < 4096; i++)
                    Q[i] = Q[i - 3] ^ Q[i - 2] ^ PHI ^ i;
    }

    uint32_t rand_cmwc(void)
    {
            uint64_t t, a = 18782LL;
            static uint32_t i = 4095;
            uint32_t x, r = 0xfffffffe;
            i = (i + 1) & 4095;
            t = a * Q[i] + c;
            c = (t >> 32);
            x = t + c;
            if (x < c) {
                    x++;
                    c++;
            }
            return (Q[i] = r - x);
    }

};

struct myThreadStructure
{
    int *value;
    //~myThreadStructure() {delete[] string;}
};

unsigned __stdcall myThread(void *data)
{
    //C:\dev\default threads\_threads.cpp|6|error: invalid conversion from 'int*' to 'int' [-fpermissive]|

    //works?
    //int *x = static_cast<int*>(data);

    myThreadStructure *x = static_cast<myThreadStructure*>(data);

    //int *x = (int*)data;

    std::cout << "Hello World! " << *x->value << endl;
    _endthreadex(0);
}

int main()
{
    cmwc rng1;

    myThreadStructure myThreadData;

    rng1.init_rand(time(NULL));

    uint32_t random_num = 1 + rng1.rand_cmwc()%6;

    //int r = rng1.rand_cmwc();

    HANDLE hThread[4];

    int x = 10;

    myThreadData.value = &x;

    //works
    //hThread[1] = (HANDLE)_beginthreadex(NULL, 0, myThread, &x, 0, NULL);

    hThread[0] = (HANDLE)_beginthreadex(NULL, 0, myThread, &myThreadData, 0, NULL);

    WaitForMultipleObjects(0, hThread, TRUE, INFINITE);

    //delete [] myThreadData;

    cout << "die: " << random_num << endl;

    //while(true);
    return 0;
} 
```

# python - 我不断收到 ValueError：在带有 Winsound 的 Python 上，频率必须在 37 到 32767 之间

> ID：12962110
> 
> 赞同：0
> 
> 时间：2012-10-18T19:18:55.920
> 
> 标签：python, python-2.4, traceback, myro

这是我的代码：

从 myro 导入 winsound *

```
def main():

    HftM1 = makeSong("REST 1; REST 1; REST 1; REST 1; REST 1; REST 1; REST 1; REST 1; D4 1/6; F4 1/6; D5 2/3; D4 1/6; F4 1/6; D5 2/3; E5 1/2; F5 1/6; E5 1/6; F5 1/6; E5 1/6; C5 1/6; A4 2/3; A4 1/3; D4 1/3; F4 1/6; G4 1/6; A4 1; A4 1/3; D4 1/3; F4 1/6; G4 1/6; E4 1; D4 1/6; F4 1/6; D5 2/3; E5 1/2; F5 1/6; E5 1/6; F5 1/6; E5 1/6; C5 1/6; A4 2/3; A4 1/3; D4 1/3; F4 1/6; G4 1/6; A4 2/3; A4 1/3; D4 1; REST 1; REST 1; REST 1")
    saveSong(HftM1, "WindmillHut.txt", append=1)
    song = readSong("WindmillHut.txt")

    play = []

    for n in range(len(song)):
        play = song[n]
        note = play[0]
        duration = play[1]
        winsound.Beep(int(note), int(duration*2000))
main() 
```

当我尝试运行它时，我不断收到错误消息：

```
Traceback (most recent call last):
  File "C:/Users/Gerren.Kids-PC/Desktop/Gerren's Files/School/Programming 1/Mod 5/Code/WindmillHut.py", line 23, in -toplevel-
    main()
  File "C:/Users/Gerren.Kids-PC/Desktop/Gerren's Files/School/Programming 1/Mod 5/Code/WindmillHut.py", line 22, in main
    winsound.Beep(int(note), int(duration*2000))
ValueError: frequency must be in 37 thru 32767 
```

我做错了什么，我需要将其更改为什么？请具体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:30:48.287

winsound.beep 函数只是windows api beep 函数的包装。windows 函数需要第一个参数（频率），介于 37 和 32767 之间。我怀疑超出范围的任何频率都超出了人类的听力范围。也可能是这种方式，因为此功能用于的旧声卡仅支持该范围。

您正在调用 winsound.beep() 并且 int(note) 返回的任何内容都超出了该范围。您可能应该在调用哔声之前检查注释是否有效。

```
note = int(play[0])
if note > 37 and note < 32767:
    winsound.Beep(note, int(duration*2000))
else:
    print("error in input") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:36:27.040

从[winsound 文档](http://docs.python.org/library/winsound.html)：

> 频率参数指定声音的频率，以赫兹为单位，并且必须在 37 到 32,767 的范围内。

myro.makeSong 的输出不是频率列表，而是音符列表。您需要进行查找。[http://wiki.roboteducation.org/Song_File_Format](http://wiki.roboteducation.org/Song_File_Format)

# video - 使用图形编码实时视频源

> ID：12962112
> 
> 赞同：1
> 
> 时间：2012-10-18T19:19:02.923
> 
> 标签：video, image-processing, computer-vision

我尝试在此处查找此内容，并且仅使用谷歌但无法找到大量信息。我是一名大四学生，对 Java 以外的事物没有丰富的经验（尽管我显然对学习新事物没有任何问题）。我最终希望从安全摄像头之类的东西中获取实时视频，并开发软件来处理它。无论是在地面上绘制线条和形状、显示徽标还是面部识别，我都不知道会考虑什么类型的软件开发。因此，我不知道我可以查找什么来了解更多信息。

我注意到下面的链接有一些有用的信息，但我希望了解更多关于我可以做些什么来实现类似目标的事情。[在实时视频源上显示数字“向下标记”](https://stackoverflow.com/questions/2381733/displaying-a-digital-down-marker-on-a-live-video-feed)

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:35:31.273

我有一个项目，我使用 Osprey 卡（或类似的 Windows 兼容卡）捕获视频，使用 DirectShow.NET 捕获它并取出帧，使用 GDI+ 在图像上绘制，然后显示/编码结果供以后使用。

这里也提到了一些事情：[将水印添加到捕获流](https://stackoverflow.com/questions/4902697/add-watermark-to-capture-stream/4944560#4944560)

它只说明了在帧上绘制的内容，而不是关于检测其上的某些内容 - 但由于您将拥有以 RGB 编码的完整帧，您将能够随意进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:24:06.743

在实时视频源上叠加人工形式或模型的领域称为[增强现实](http://en.wikipedia.org/wiki/Augmented_reality)。目前广泛用于许多计算机视觉相关任务的一个开源库是[OpenCV](http://opencv.willowgarage.com/wiki/)，因此您可以将其视为起点。

# html - HTML 电子邮件签名仅显示回复消息中的文件名 (Outlook)

> ID：12962113
> 
> 赞同：0
> 
> 时间：2012-10-18T19:19:04.403
> 
> 标签：html, image, email, outlook, signature

我创建了要在 Outlook 中使用的 HTML 电子邮件签名。它们在第一封电子邮件中看起来不错，但在回复链中，签名中的图像显示为`<image005.png>`此外，链接偶尔会带有蓝色下划线。任何想法为什么会这样？（如果重要，电子邮件设置设置为 HTML 而不是纯文本。）

```
<br />
<meta name="format-detection" content="telephone=no">
<table width='320' id="sig" cellspacing='0' cellpadding='0' border-spacing='0' style="margin:0;padding:0;">
<tr>
<td width="86" style="width:86px;margin:0;padding:0;">
<a href='http://urbanpalate.com' style="border:none;text-decoration:none;"><img src="http://urbanpalate.com/wp-content/uploads/2012/10/email_logo.jpg" alt="UrbanPalate" style="border:none;width:86px;"></a>
</td>

<td width="10" style="width:10px;">&nbsp;</td>  

<td valign='top' style="margin:0;padding:0;">
<table id="sig2" cellspacing='0' cellpadding='0' border-spacing='0' style="padding:0;margin:0;font-family:'Lucida Grande',sans-serif;font-size:12px;color:#333333;border-collapse:collapse;-webkit-text-size-adjust:none;">
<tr style="margin:0;padding:0;">
<td style="margin:0;padding-bottom:5px;padding-left:2px;font-family:'Lucida Grande',sans-serif;font-size:14px;white-space:nowrap;">
<strong><a href="mailto:geoff@urbanpalate.com" style="border:none;text-decoration:none;color:#333333"><span style="color:#ff893b">Geoffrey Bernstein </span></a></strong><span style="color:#505050;"></span>
<span style="color:#333333;"></span>
</td>
</tr>
<tr style="margin:0;padding:0;color:#333333;">
<td style="margin:0;padding-bottom:5px;padding-left:2px;font-family:'Lucida Grande',sans-serif;font-size:14px;white-space:nowrap;">
<a href="http://urbanpalate.com" style="border:none;text-decoration:none;color:#333333;"><span style="color:#333333">Urban Palate<span style="color:#333333"></span></a><span style="color:#505050"> | </span>
<a href="http://goo.gl/maps/uH28q" style="border:none;text-decoration:none;color:#333333;"><span style="color:#333333">Los Angeles, CA</span></a>
</td>
</tr>

<tr style="margin:0;padding:0;color:#333333">
<td style="margin:0;padding-bottom:5px;padding-left:2px;font-family:'Lucida Grande',sans-serif;font-size:14px;white-space:nowrap;">
<a href="tel:877-402-2002" style="text-decoration:none;color:#333333;"><span style="color:#333333">p 877</span><span style="color:#505050">.</span><span style="color:#333333">402</span><span style="color:#505050">.</span><span style="color:#333333">2002</span></a>
<span style="color:#505050;">|</span>
<a href="tel:213-236-0951" style="text-decoration:none;color:#333333;"><span style="color:#333333">f 213</span><span style="color:#333333">.</span><span style="color:#333333">236</span><span style="color:#505050">.</span><span style="color:#333333">0951</span></a>
</td>
</tr>

<tr style="margin:0;padding:0;color:#333333;">
<td style="margin:0;padding:0;padding-left:2px;font-family:'Lucida Grande',sans-serif;font-size:14px;white-space:nowrap;">
<a href='http://www.facebook.com/pages/Urban-Palate/221795937949264?ref=ts&fref=ts' style="border:none;text-decoration:none;"><img src="http://urbanpalate.com/wp-content/uploads/2012/10/facebook.png" alt="UrbanPalate" style="border:none;width:22px;padding-right:4px;"></a>
<a href='https://twitter.com/urbanpalatela' style="border:none;text-decoration:none;"><img src="http://urbanpalate.com/wp-content/uploads/2012/10/twitter.png" alt="UrbanPalate" style="border:none;width:22px;padding-right:4px;"></a>
<a href='http://pinterest.com/UrbanPalateLA/' style="border:none;text-decoration:none;"><img src="http://urbanpalate.com/wp-content/uploads/2012/10/pinterest.png" alt="UrbanPalate" style="border:none;width:22px;padding-right:4px;"></a>
<a href='http://instagrid.me/urbanpalatela/' style="border:none;text-decoration:none;"><img src="http://urbanpalate.com/wp-content/uploads/2012/10/instagram.png" alt="UrbanPalate" style="border:none;width:22px;"></a>
</td>
</tr>   
</table>
</td>
<tr>
</table>
<br />
&nbsp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:45:06.287

我发现[这](http://social.technet.microsoft.com/Forums/en-US/officesetupdeploy/thread/7a14c86d-a2ee-444a-8020-1693d4dea1e4)很有帮助。基本上，在 Outlook 中，转到选项 > 邮件 > 签名。在右侧，新消息默认为您的签名。回复/转发设置默认为无 - 确保将该设置选择为适当的签名。

# c# - 执行 Regex.Replace() 时如何使用命名组

> ID：12962114
> 
> 赞同：55
> 
> 时间：2012-10-18T19:19:04.813
> 
> 标签：c#, regex, replace

执行 Regex.Replace 时如何使用命名捕获？我已经走到了这一步，它做了我想要的，但不是我想要的：

```
[TestCase("First Second", "Second First")]
public void NumberedReplaceTest(string input, string expected)
{
    Regex regex = new Regex("(?<firstMatch>First) (?<secondMatch>Second)");
    Assert.IsTrue(regex.IsMatch(input));
    string replace = regex.Replace(input, "$2 $1");
    Assert.AreEqual(expected, replace);
} 
```

我想将这两个单词与命名捕获匹配，然后在执行替换时使用（命名）捕获。

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-10-18T19:21:33.670

而不是`"$2 $1"`，您可以使用`"${secondMatch} ${firstMatch}"`.

[此处](http://msdn.microsoft.com/en-us/library/ewy2t5e0.aspx)列出了您可以进行的所有替换。

这是一个简短的列表：

**$number** - 按编号捕获的组。

**${name}** - 按名称捕获的组。

**$$** - $ 字面量。

**$&** - 整个匹配。

**$`** - 匹配前的输入字符串。

**$'** - 匹配后的输入字符串。

**$+** - 捕获的最后一组。

**$_** - 整个输入字符串。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-18T19:24:34.233

只需替换为`${groupName}`

```
[TestCase("First Second", "Second First")]
public void NumberedReplaceTest(string input, string expected)
{
    Regex regex = new Regex("(?<firstMatch>First) (?<secondMatch>Second)");
    Assert.IsTrue(regex.IsMatch(input));
    string replace = regex.Replace(input, "${secondMatch} ${firstMatch}");
    Assert.AreEqual(expected, replace);
} 
```

# drupal - 重置 Drupal CDN 模块

> ID：12962116
> 
> 赞同：0
> 
> 时间：2012-10-18T19:19:09.997
> 
> 标签：drupal, cdn

是否可以重置 Drupal 的 CDN 模块的设置？

我们已将我们的网站从机架空间云服务器迁移到云站点。我们不打算在短期内再使用 CDN 功能。所以我们卸载了CDN模块。

现在的问题是，即使我们卸载了 CDN 模块，一些图片的 url 仍然链接到 cdn1.myhost.com/path_img 或 cdn4.myhost.com/path_img。

我们如何解决这个问题？我们如何确保所有图像 url 指向 myhost.com/path_img 而不是指向 CDN-url 的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:59:37.417

希望链接只是被缓存，它们实际上并没有存储在任何地方的内容中。转到管理 » 配置 » 开发 » 性能（D7 中的 /admin/config/development/performance）并单击“清除所有缓存”。

# jquery - Jquery 无法在 IE9 中运行

> ID：12962118
> 
> 赞同：0
> 
> 时间：2012-10-18T19:19:12.047
> 
> 标签：jquery

以下代码在我所有的 CSS3 浏览器中都可以正常工作，除了 IE9。有谁知道为什么？我在 ID 为 fpdiv 的大 div 中设置了几个类 dismdiv 的 div。我应该在进入和退出每个 dimsdiv 区域时收到警报框。但由于某种原因不在 IE9 中。

提前致谢！

```
this.setDimsRoll = function() {
    $("#fpdiv").on({
        mouseenter : function() {
            alert("on")
        },
        mouseleave : function() {
            alert("off");
        }
    }, ".dimsdiv");
} 
```

一些澄清。这是javascript“类”中的一种方法，因此是“this”。你可以忽略那部分。这会在动态创建 dimsdiv 后调用。这就是为什么我选择这种方法作为我另一篇文章的结果：

[Jquery - 如何在动态创建后添加事件](https://stackoverflow.com/questions/12648195/jquery-how-to-i-add-an-event-after-dynamic-create)

通常，我只会使用悬停或其他方式，但这是处理动态对象所必需的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:15:45.947

我怀疑您应该绑定到文档对象的事件，因为元素是动态创建的。类似于以下内容：

```
this.setDimsRoll = function() {
    $(document).on({ 
        mouseenter: function () { 
            alert("on")
        }, 

        mouseleave: function () { 
            alert("off")
        } 
    }, '.dimsdiv');
} 
```

另外请注意，您的上下文似乎有些混乱。您实际上试图将鼠标事件绑定到哪个`.dimsdiv`元素`#fpdiv`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:34:52.753

解决方案是用清晰的像素填充 div。事实证明，在 IE 上没有检测到空 div。感谢微软！

# jquery-ui - jquery-ui传输效果未命中目标

> ID：12962120
> 
> 赞同：0
> 
> 时间：2012-10-18T19:19:25.917
> 
> 标签：jquery-ui

我有一个 jsfiddle 来展示我正在尝试做的事情：http: [//jsfiddle.net/n9bSC/3/](http://jsfiddle.net/n9bSC/3/)

jsfiddle 运行良好，并没有演示该错误。

在我的实际代码中，传输直接在目标*下方*完成（而不是直接*在*目标处）。

我试过删除浮动，添加各种“位置”样式等。

关于可能导致我所描述的行为的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T23:23:07.077

我不完全理解这一点，但我认为问题已解决。

我们的 CSS 有：

```
body{
  position: relative;
} 
```

所以我现在在我正在做 jquery-ui 传输效果的页面上将其更改为“继承”。

然后，我只对 IE7 使用条件 CSS 来执行此操作：

```
.joyride-tip-guide {    
  margin-top: -10px;
} 
```

（我正在使用[Joyride](http://www.zurb.com/playground/jquery-joyride-feature-tour-plugin)并注意到更改身体位置会扰乱 Internet Explorer 7 的 Joyride 巡演步骤定位。）

# php - 如何为自定义异常和标准异常运行相同的代码？

> ID：12962123
> 
> 赞同：0
> 
> 时间：2012-10-18T19:19:42.890
> 
> 标签：php, exception-handling, try-catch

我有一个自定义异常类，它扩展了 Exception 并增加了传回更多关于引发异常的数据的能力。现在的问题是，如果我想捕获自定义异常和标准异常，但使用相同的代码块处理它们，除了创建一个新函数（我不想为我想使用它的每个地方做）。

```
try {

} catch(QM\DebugInfoException $e) {
    // I don't want to duplicate the Exception handling code up here
}catch(Exception $e){
    $db->rollBack();

    $return['error'] = 1;
    $return['errInfo'] = array(
        'code' => $e->getCode(),
        'message' => $e->getMessage(),
        'trace' => $e->getTraceAsString()
    );

    // I'd rather handle both here, and just add data on to $return['errInfo']
    switch ($ExceptionType) {
        case 'QM\DebugInfoException':
            $return['errInfo']['extraInfo'] = $e->getExtraInfo();
            break;
    }
} 
```

有人对此有什么好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:23:03.853

您可以执行 get_class($e) ，它将返回表示异常对象的类名的字符串，然后使用它在您的开关中进行比较。

另一种选择是放置一个封装通用功能的函数，并从每个异常块中调用它。这样，您的交换机中没有的新的、意外的异常仍然可以渗透。我非常喜欢明确地捕获特定的异常。

# php - 使用会话使用 php 从 sql 表中提取数据

> ID：12962125
> 
> 赞同：9
> 
> 时间：2012-10-18T19:20:02.813
> 
> 标签：php, sql, database, session

我正在尝试使用会话 ID 唯一的 php 从我的 sql 表中提取数据，但是当我回显任何内容时，我只会得到用户所在的位置！

```
<?php
include 'core/init.php';
$user_info = $_SESSION['user_id'];
?>
<html>....
<h1><?php echo $user_info['firstname'];?>&nbsp<?php echo $user_info['firstname'];?> </h1> 
```

显示为：

# 5 5

如果我以数据库中的第五个位置登录！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:05:39.773

你得到 5 的原因是因为这段代码：

```
<?php echo $user_info['firstname'];?> 
```

是 $_SESSION['user_id'] 的值是 5。所以在分配后 $user_info 的值是 5。现在因为 $_SESSION['user_id'] 没有像您的意图那样设置为数组。结果是 $user_info 被视为一个字符串并且 ['firstname'] 的计算结果为 [0]。如果您愿意，可以将 ID 5 更新为 54 等。您将始终获得 ID 的第一个字符。

要更正此问题，请尝试将 user_data 函数中返回之前的最后两行更改为：

```
$data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `users` WHERE `user_id` = $user_id"));
$data = array_merge(array($user_id), $data);
return $data;

if (logged_in() === true) { 
    $user_data = user_data($_SESSION['user_id'], 'username', 'first_name', 'last_name',     'email');
    $user_data = user_data($session_user_id, 'user_id', 'username', 'first_name', 'last_name', 'email');
} 
```

到：

```
if (logged_in() === true) { 
    $user_data = user_data($_SESSION['user_id'], 'username', 'first_name', 'last_name', 'email');
    $_SESSION['user_id'] = $user_data;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:23:56.197

```
if (logged_in === true) { 
```

应该

```
if (logged_in()) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T06:01:35.057

对我来说，您似乎忘记在会话中更新数据。让我们在这里说：

```
if (logged_in() === true) { 
    $user_data = user_data($_SESSION['user_id'], 'username', 'first_name', 'last_name', 'email');
    $user_data = user_data($session_user_id, 'user_id', 'username', 'first_name', 'last_name', 'email');

    $_SESSION = array_merge($_SESSION, $user_data);
} 
```

希望它可以帮助您解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T06:48:12.747

我看到你在这一行

```
<h1><?php echo $user_info['firstname'];?>&nbsp<?php echo $user_info['firstname'];?> </h1> 
```

您正在使用“名字”，而在数据库中它被命名为“名字”，请参见下划线

```
<h1><?php echo $user_info['first_name'];?>&nbsp<?php echo $user_info['first_name'];?> </h1> 
```

让我知道这是否解决了，因为我也想知道它的答案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T08:28:38.863

可以帮助您对代码进行一些更改

```
function user_data($user_id) {
    $data = array ();
    $user_id = (int)$user_id;

    $func_num_args = func_num_args();
    $func_get_args = func_get_args();

    if ($func_num_args > 1) {
        unset($func_get_args[0]);

        $fields = '`'. implode('`, `', $func_get_args). '`';
        echo '<br>'.
        $que =  "SELECT $fields FROM `users` WHERE `id` = $user_id";
        $data = mysql_fetch_assoc(mysql_query($que));
        print_r ($data);
        return $data;
        }
}

function logged_in() {
    return (isset($_SESSION['id'])) ? true : false;
}

if (logged_in() === true) { 
    $user_data = user_data($_SESSION['user_id'], 'username', 'firstname', 'email');
    //$user_data = user_data($session_user_id, 'user_id', 'username', 'firstname', 'email');
    print_r($user_data);
}
echo 
$user_info = $user_data;//$_SESSION['user_id'];
?>
<h1><?php echo $user_info['firstname'];?>&nbsp<?php echo $user_info['firstname'];?> </h1> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T09:09:27.423

```
function user_data($data=array(),$whereData=array()) {
  $str='';
  if(isset($whereData) && is_array($whereData))
   {
         foreach($whereData as $key=>$val)
    {
        if($val!='')
        if($str=='')
            $str     =  $key." = '".$val."'";
        else
            $str    .=  " AND ".$key." = '".$val."'";
    }
   }
      $condition =
       $fields = implode(',' , $data);
       if($str!=''){
        $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `users` WHERE  $str"));
        }
         else
          {
                $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `users` ));
          }
        return $data;
        print_r ($data);
        }
} 
```

和

```
 if (logged_in() === true) {
  $data = array('username', 'first_name', 'last_name', 'email');
  $where=array('user_id'=>$_SESSION['user_id']) 
  $_SESSION['data'] = user_data($data, $where);

} 
```

和

```
<?php
include 'core/init.php';
$user_info = $_SESSION['data'];
?>
<html>....
<h1><?php echo $user_info['firstname'];?>&nbsp<?php echo $user_info['firstname'];?> </h1> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-25T21:07:14.257

根据在 PHP 中创建大型代码库的经验，当您扩展应用程序时，您会发现您正在使用越来越多的用户表中的数据。此外，该表应该只真正包含最常用的最重要的数据，并且您不希望每个页面命中向用户表发送超过 1 或 2 个查询，因为它很快就会成为瓶颈。出于这个原因，您最好存储所有数据数据（将大字段移动到另一个表或很少使用的字段）。然后将整个用户记录存储在一个会话中，这意味着任何函数、类等都可以使用它，因为它变成了一个超全局的，并且你可以足够信任它以在整个应用程序中使用它，而无需一次又一次地重新查询用户表。

我已经编写了一个工作示例（使用您的数据库表结构）并在整个过程中对其进行了评论，解释了为什么我以我的方式完成它以及您可能想要考虑的一些要点。

```
//change from user_data() to get_user_data() so we know we are "getting" it, makes it a little clearer
function get_user_data($user_id) {

    //protect agains sql injections
    $user_id = mysql_real_escape_string($user_id);

    //you should also be using mysqli or PDO, not the outdated mysql library - just check the php documentation if you don't believe me ;)
    $result = mysql_query("SELECT * FROM `users` WHERE `id` = '{$user_id}' LIMIT 1");

    //only if the previous query returned a result do we want to fetch an array from it
    if ($result) {
        return mysql_fetch_assoc($result);
    }

    //query didn't work (syntax error for example) so return blank array
    return array();

}

//start and restore the session
session_start();

//if first page hit, set the user details element
if (isset($_SESSION['user_details']) == false) {
    $_SESSION['user_details'] = array();
}

//if already logged in, refresh their user details incase there were any changes
if (isset($_SESSION['user_details']->user_id)) {
    //refresh the user data
    $_SESSION['user_details'] = get_user_data($_SESSION['user_details']->user_id);
}

//login
if (empty($_POST['id']) == false) {
    $_POST['id'] = trim($_POST['id']);
    if (is_numeric($_POST['id'])) {
        $_SESSION['user_details'] = get_user_data($_POST['id']);
    }
}

//logout
if (isset($_GET['logout'])) {
    if ($_GET['logout'] == session_id()) {
        $_SESSION['user_details'] = array();
    }
}

//see if logged in so we know what to display
if (empty($_SESSION['user_details'])) {
    //not logged in
    print "<form method='post' action=''><label>User ID</label><input type='text' name='id' value='5' /><input type='submit' value='Login' /></form>";
    } else {
    //is logged in
    print "<a href='?logout=" . rawurlencode(session_id()) . "'>logout</a>";
}

//proof that it works
print '<pre>';
print_r($_SESSION['user_details']);
print '</pre>'; 
```

PS 此外，您可能希望在 SQL 查询中开始使用 LIMIT，因为上面查询中的 LIMIT 1 告诉 mysql 在找到 1 个结果后它可以停止搜索 - 并且您应该在该列上有一个索引（最好是主索引或唯一索引) 以使其快速变亮（或者至少在开始时 >< ）。

# c++ - QT4 qlistview保存图标位置手动移动下次

> ID：12962126
> 
> 赞同：0
> 
> 时间：2012-10-18T19:20:11.220
> 
> 标签：c++, qt4, qlistview

我正在使用 qt4.3 开发一个应用程序，它会打开一个窗口，其中包含从 .desktop 文件加载的一堆图标。它试图模拟文件浏览器，但没有文件浏览......我的意思是，您可以双击并打开应用程序或将图标拖动到不需要附加到网格的其他位置。

我在“图标模式”下使用 qdirmodel 和 qlistview。

我的问题是，一旦我移动了图标，我就无法保存它们的位置。每次我重新启动应用程序时，我都会在默认位置加载图标。我找不到任何方法来了解项目的位置或将项目移动到某个位置。

我该做什么？我有机会吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:50:26.883

我敢肯定，你可以保存项目的位置。你应该阅读关于`save session qt`. `Session Management` [这是关于会话管理](http://doc.qt.digia.com/4.7-snapshot/session.html)的官方 qt 文档
而且我建议阅读 qt 的可能性保存设置[QSettings](http://doc.qt.digia.com/stable/qsettings.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T17:11:32.143

查看 qlistview 代码后，我发现我还可以继承 qlistview 类并将几个受保护的函数转换为公共函数，这些函数返回项目位置并将项目移动到某个位置。不管怎么说，还是要谢谢你！！

# entity-framework - 使用 Entity Framework 的 ChangeTracker 处理复杂的属性

> ID：12962127
> 
> 赞同：1
> 
> 时间：2012-10-18T19:20:33.347
> 
> 标签：entity-framework, asp.net-web-api, audit-logging, objectstatemanager

我会尽量在这篇文章中尽可能地描述。我已经阅读了十几个与我的问题外围相关的 SO 问题，但到目前为止，没有一个与正在发生的事情相匹配。

因此，为了对我们的数据库事务（创建、更新、删除）执行审计日志记录，我们的设计使用了 IAuditable 接口，如下所示：

```
public interface IAuditable
{
    Guid AuditTargetId { get; set; }

    int? ContextId1 { get; }
    int? ContextId2 { get; }
    int? ContextId3 { get; }
} 
```

这三个上下文 ID 与域模型的布局方式有关，如前所述，它们中的一些或全部可能为空，具体取决于被审计的实体（它们用于过滤目的，以便管理员只想查看应用程序特定范围的审核日志）。任何需要对 CUD 操作进行审计的模型只需要实现这个接口。

审计表本身的填充方式是通过位于基本 DbContext 和我们域的上下文之间的 AuditableContext。它包含审计表 DbSets，并使用 EF ChangeTracker 覆盖 SaveChanges 方法，如下所示：

```
foreach (var entry in ChangeTracker.Entries<IAuditable>())
{
    if (entry.State != EntityState.Modified && 
        entry.State != EntityState.Added && 
        entry.State != EntityState.Deleted)
    {
        continue;
    }

    // Otherwise, make audit records!
}

base.SaveChanges(); 
```

“制作审计记录”过程是一段稍微复杂的代码，它使用反射和其他有趣的东西来提取需要审计的字段（可审计模型有一些方法可以让它们的一些字段“退出”审计）以及所有这些。

所以这个逻辑很好。当我有这样的可审计模型时，问题就来了：

```
public class Foo: Model, IAuditable
{
    public int FooId { get; set; }

    // other fields, blah blah blah...

    public virtual Bar Bar { get; set; }

    #region IAuditable members

    // most of the auditable members are just pulling from the right fields

    public int? ContextId3
    {
        get { return Bar.BarId; }
    }

    #endregion
} 
```

正如所指出的，在大多数情况下，这些上下文审计字段只是模型的标准属性。但是在某些情况下，例如这里，需要从虚拟复杂属性中提取上下文 id。

这最终导致`NullReferenceException`尝试从 SaveChanges() 方法中获取该属性时 - 它表示虚拟 Bar 属性不存在。我已经阅读了一些有关如何构建 ChangeTracker 以允许延迟加载复杂属性的信息，但我找不到正确的语法。“原始值”列表中不存在这些字段，并且对象状态管理器没有这些字段，我猜是因为它们来自接口而不是直接被审计的实体。

那么有谁知道如何解决这个奇怪的问题？我可以强制急切加载整个对象，包括虚拟属性，而不是显然很顽固的延迟加载吗？

很抱歉这篇冗长的帖子，我觉得这是一个非常具体的问题，可能需要详细信息。

蒂亚！:)

# popup - 如果弹出窗口被阻止，fb.login 弹出窗口不会显示额外请求的权限

> ID：12962135
> 
> 赞同：3
> 
> 时间：2012-10-18T19:20:53.520
> 
> 标签：popup, facebook-javascript-sdk, facebook-login, facebook-authorization

我试图在使用 Facebook 建议的 Javascript SDK 登录 Facebook 时请求额外的权限。我正在使用范围参数将附加请求作为 FB.login() 的一部分。我的 chrome 浏览器阻止了弹出窗口。当我将包含 FB.login 和范围参数的页面加载到浏览器中时，Chrome 会阻止自动弹出窗口。然后，当我单击 html 按钮执行 facebook 登录和授权请求时，fb 弹出窗口显示的唯一权限是基本信息的权限。但是，如果我允许弹出窗口，那么当我加载页面时，会自动显示一个 facebook 授权弹出窗口，而无需单击按钮来启动 fb 登录。当此自动弹出窗口显示时，它现在显示我在范围参数中包含的其他权限。

下面是我的代码：

```
<!DOCTYPE html>
<html>
<head>

<div id="fb-root"></div>
<script>
  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'MY_APP_ID', // App ID
      channelUrl : 'channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional init code here
    FB.getLoginStatus(function(response) {
                if (response.status === 'connected') {
                        // connected
                } else if (response.status === 'not_authorized') {
                        // not_authorized
                                login();
                } else {
                        // not_logged_in
                                login();
                }
        });

  };
function login() {
        FB.login(
                function(response) {
                                if (response.authResponse) {
                                // connected
                                } else {
                                // cancelled
                                }
                },
                {scope: 'email, user_birthday'}
        );
}

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
</head>

<body>
<button type="button" onclick="FB.login()">login</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:39:11.790

`FB.login`不能在事件处理程序（用户启动）之外使用，因为它在 Canvas 之外使用时会创建一个弹出窗口。相反，显示一个用户可以单击以执行的按钮`FB.login`。

您的按钮不请求权限的原因仅仅是因为您没有在函数调用中添加任何内容-您使用`FB.login()`-那里没有权限。

# google-chrome - Amazon S3 限制引用者对文件的访问 - Chrome 存在问题

> ID：12962138
> 
> 赞同：3
> 
> 时间：2012-10-18T19:21:05.713
> 
> 标签：google-chrome, amazon-s3, amazon-web-services, chromium

这是我的 Amazon S3 存储桶策略的样子（部分使用[AWS Policy Generator 生成](http://awspolicygen.s3.amazonaws.com/policygen.html)）：

```
{
  "Id": "Policy1350503700228",
  "Statement": [
    {
      "Sid": "Stmt1350503699292",
      "Action": [
        "s3:GetObject"
      ],
      "Effect": "Allow",
      "Resource": "arn:aws:s3:::files.example.com/*",
      "Condition": {
        "StringLike": {
          "aws:Referer": [
            "http://example.com/*",
            "http://www.example.com/*"
          ]
        }
      },
      "Principal": {
        "AWS": [
          "*"
        ]
      }
    }
  ]
} 
```

存储桶策略应该做的是 - 如果直接访问存储桶中的任何文件或从`(www.)example.com`.

它似乎有效，除了 Chrome 似乎对以这种方式提供的 PDF 文件存在问题（例如，图像加载得很好）。因此，来自（具有基于引用的限制）的任何 PDF`files.example.com`似乎都在 Chrome 中永久加载（最新版本，在 Ubuntu 12.04 上）。另一方面，Firefox 可以快速加载小于 100KB 的 PDF。

关于我/可能做错了什么的任何想法？

**PS：**如果我右键单击并选择“另存为..”，Chrome 就可以下载该文件。我不明白为什么它不显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T18:22:11.937

我检查了 Chrome 上的开发工具，发现 Chrome pdf 插件以多个块请求 pdf。第一个块将具有正确的引用，但所有后续块将具有`https://s3.amazonaws.com/....`而不是`http://mywebsite.com`. 添加`https://s3.amazonaws.com/*`到存储桶策略列表中解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T05:25:39.757

进入您的存储桶并仔细检查文件（元数据选项卡）上指定的 MIME 类型。它应该是`Content-Type: application/pdf`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:14:02.007

您可以将 response-content-disposition 设置为“附件”，如本文所述：[https ://stackoverflow.com/a/9099933/568383](https://stackoverflow.com/a/9099933/568383)

# xml - 如何使用 xsl 从 xml 文件生成特定的 xml 结果？

> ID：12962139
> 
> 赞同：-1
> 
> 时间：2012-10-18T19:21:07.557
> 
> 标签：xml, xslt

使用下面的 xml，您能否帮助我完成以下操作所需的 xsl 转换代码：

当前的 XML：

```
<ROOTNODE>
  <SUBNODE1>
<DETAILS>
  <SOMETHING>Here</SOMETHING>
  <UNIMPORTANT1>Thing</UNIMPORTANT1>
</DETAILS>
<SOMEWHATIMPORTANT>This</SOMEWHATIMPORTANT>
<ALSOUNIMPORTANT>Very</ALSOUNIMPORTANT>
  </SUBNODE1>
</ROOTNODE> 
```

输出 XML：

```
<DETAILS>
  <SOMETHING>Here</SOMETHING>
</DETAILS>
<SOMEWHATIMPORTANT>This</SOMEWHATIMPORTANT> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:07:35.397

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="/*|/*/*"><xsl:apply-templates/></xsl:template>
 <xsl:template match="*[contains(name(), 'UNIMPORTANT')]"/>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<ROOTNODE>
    <SUBNODE1>
        <DETAILS>
            <SOMETHING>Here</SOMETHING>
            <UNIMPORTANT1>Thing</UNIMPORTANT1>
        </DETAILS>
        <SOMEWHATIMPORTANT>This</SOMEWHATIMPORTANT>
        <ALSOUNIMPORTANT>Very</ALSOUNIMPORTANT>
    </SUBNODE1>
</ROOTNODE> 
```

**产生想要的正确结果**：

```
<DETAILS>
   <SOMETHING>Here</SOMETHING>
</DETAILS>
<SOMEWHATIMPORTANT>This</SOMEWHATIMPORTANT> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:42:16.773

你可以试试：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
        <newroot>
            <DETAILS>
                <xsl:copy-of select="//DETAILS/SOMETHING"/>
            </DETAILS>
            <xsl:copy-of select="//SOMEWHATIMPORTANT"/>
        </newroot>
    </xsl:template>

</xsl:stylesheet> 
```

# 更新

我使用以下 ANT 项目来运行这个名为**transform.xml的样式表**

```
.
├── build.xml
├── data.xml
└── transform.xsl 
```

运行该项目会产生以下输出：

```
$ ant && cat build/data.xml
Buildfile: /home/mark/tmp/build.xml

transform:
     [xslt] Processing /home/mark/tmp/data.xml to /home/mark/tmp/build/data.xml
     [xslt] Loading stylesheet /home/mark/tmp/transform.xsl

BUILD SUCCESSFUL
Total time: 0 seconds
<?xml version="1.0" encoding="UTF-8"?>
<newroot>
<DETAILS>
<SOMETHING>Here</SOMETHING>
</DETAILS>
<SOMEWHATIMPORTANT>This</SOMEWHATIMPORTANT>
</newroot> 
```

## 构建.xml

```
<project name="xslt-demo" default="transform">

    <target name="transform">
        <xslt style="transform.xsl" in="data.xml" out="build/data.xml"/>
    </target>

    <target name="clean">
        <delete dir="build"/>
    </target>

</project> 
```

## 数据.xml

```
<ROOTNODE>
  <SUBNODE1>
<DETAILS>
  <SOMETHING>Here</SOMETHING>
  <UNIMPORTANT1>Thing</UNIMPORTANT1>
</DETAILS>
<SOMEWHATIMPORTANT>This</SOMEWHATIMPORTANT>
<ALSOUNIMPORTANT>Very</ALSOUNIMPORTANT>
  </SUBNODE1>
</ROOTNODE> 
```

# php - 在 PHP MySQL 平台上记录用户活动

> ID：12962141
> 
> 赞同：-2
> 
> 时间：2012-10-18T19:21:18.460
> 
> 标签：php, mysql, logging, client

我基于以下想法开发了一个服务器客户端应用程序：

**客户端**（Windows 应用程序）与**服务器**（PHP 网页）一起工作，主要类似于基于套接字的客户端-服务器应用程序。客户端将原始数据发送到 PHP 网页，PHP 脚本将检查/处理接收到的数据，最后脚本向客户端返回答案（数据接受/拒绝/等）。

基本思想是**客户端**每隔 X 秒“ping”一次**服务器**，即使**客户端**是否处于活动状态。**记录客户**活动的最佳解决方案是什么？例如：

```
Client1 started application at Time1       and it "ping" Server for lets say 30 minutes, after that interval the Server stop receiving "pings" from the client;
Client2 started application at Time1+10min and it "ping" Server for lets say 40 minutes, after that interval the Server stop receiving "pings" from the client;
Client1 started application at Time1+35    and it "ping" Server for lets say 60 minutes, after that interval the Server stop receiving "pings" from the client;

** Server stop receiving "pings" from client means there is no activity for at least 1 minute 
```

我需要一份最终报告，谁能给我以下数据：

```
Client   |  Start at   |    End at   | Active
=========+=============+=============+========
Client1  | Time1       | Time1+30min | 30min 
Client2  | Time1+10min | Time1+50min | 40min 
Client1  | Time1+35min | Time1+95min | 60min 
```

我不知道如何制作我的 MySQL 日志表以及通过 PHP 在其中存储哪些信息以供将来报告。

*欢迎任何问题/意见。*

**编辑：我不需要任何 PHP 代码来记录我的条目，我不需要你的 MySQL CREATE TABLE 或 SELECT 命令。我只是要求一种存储所有记录的好方法，以及一种从中检索一些信息的好方法。感谢您对帖子投反对票，直到最后才阅读。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:28:22.177

@MoeTsao 的建议不错，考虑到您没有在“X 秒”中定义“X”。如果“X”在3600左右或更多，那也不算太糟糕。也许您因为对他生气而不是接受他的想法并根据您（现在已详细说明的）“X”值进行修改而被否决？如...

像这样创建一个日志表：

```
 client_id
 start_time
 end_time 
```

然后，在每个请求上，执行更新：

```
 update log_table
 set end_time = NOW()
 where client_id = $client_id
 and start_time >= date_sub(now(), interval 1 minute) 
```

检查更新了多少行（请参阅您的编码手册）。

如果更新了一行，那么您就完成了。如果没有更新，则要么是新客户端，要么是空闲客户端，然后您必须执行插入：

```
 insert into log_table (client_id, start_time, end_time)
 values ($client_id, now(), now()) 
```

（与我的伪代码相反，请在查询中使用位置参数）。

创建报告很简单（所有必要的列都在您存储的行中），并留作原始海报的练习。:)

# .net - 'NotificationsExtensions.*' 类型存在于 '...\NotificationsExtensions.winmd' 和 '...\NotificationsExtensions.winmd'

> ID：12962148
> 
> 赞同：0
> 
> 时间：2012-10-18T19:21:50.177
> 
> 标签：.net, windows-runtime, visual-studio-2012

我刚刚开始了解 Windows RT 编程。我想尝试通知，所以我下载了[App 磁贴和徽章示例](http://msdn.microsoft.com/en-us/library/windows/apps/hh969156.aspx)，将 NotificationExtensions 项目提取到我的解决方案并尝试编译，但由于以下编译错误，它不会这样做：

```
The type 'NotificationsExtensions.*' exists in both
'...\NotificationsExtensions.winmd' and '...\NotificationsExtensions.winmd' 
```

这两个 .winmd 文件路径完全相同，这让我感到困惑！

我什至尝试按原样编译示例解决方案，但是对于 NotificationExtensions 库中类型的每个引用，我都遇到了相同的错误。

我正在使用 Visual Studio 2012 Ultimate RTM（仅限评估）在 VirtualBox 中运行 Windows 8 Release Preview。这个问题是否与预览版包含的 .NET 4.5 版本与 VS 2012 RTM 所需的版本不同这一事实有关？（我必须在注册表中更改 .NET 安装的版本号才能安装 VS。）因此我是否必须升级到 Windows 8 RTM？

提前致谢！

gLes

# php - 在 Doctrine2 上使用 manyToOne 和 oneToMany 关系时出现“非空违规：7”

> ID：12962155
> 
> 赞同：3
> 
> 时间：2012-10-18T19:22:20.113
> 
> 标签：php, doctrine-orm

我有一个非常基本的架构，如下所示：

**评论.yml：**

```
manyToOne:
  pages:
    targetEntity: Pages
    inversedBy: comments
    joinColumn:
      name: page_id
      referencedColumnName: idx

... other things ... 
```

**Pages.yml：**

```
oneToMany:
  comments:
    targetEntity: Comments
    mappedBy: pages
    cascade: ["persist"] // i added this later but has no effect for both persist and merge.
    orderBy:
      idx: desc

... other things ... 
```

现在，一切正常。我可以`Pages`从`Comments`和**反转**。问题是，当我尝试向数据库插入**新**行时，它说`page_id`是`null`.

**例子：**

```
$comment = new Comments();
$comment->setPageId(2); // it is "2"
$comment->setText($textData);

$this->_em->persist($comment);
$this->_em->flush($comment); 
```

现在结果是假的。它抛出一个异常并说`SQLSTATE[23502]: Not null violation: 7 ERROR: null value in column "page_id" violates not-null constraint`。

好吧，**如果我删除 oneToMany 和 ManyToOne 关系，它就可以了！**如果我使用它们，即使我给它它也会说它是空的......

我的错误在哪里？任何帮助或想法表示赞赏！

**编辑**：

我找到了这个方法：`getReference()`

```
$item = $em->getReference('MyProject\Model\Item', $itemId);
$cart->setPage($item); 
```

现在它正在**工作**，但我不知道这是否是正确的方法。请启发我。

基本上，我想在**不**修改（不删除也不更新）页表的情况下**添加**评论。但是，我想将它们作为 ManyToOne 和 OneToMany 一起获取。

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:27:25.780

当您想将页面添加到评论实体时您应该调用一个方法，`$comment->setPage($page)`如果您使用`php app/console doctrine:generate:entities`命令行，则会自动生成此方法。$page 对象应该是从数据库加载的 $page 对象。例如

```
$page = $this->getDoctrine()->getRepository('Pages')->findOneBy(array('id' => $pageId));

$comment = new Comments();
$comment->setPage($page);
$comment->setText($textData);

$this->_em->persist($comment);
$this->_em->flush(); 
```

如果这对您没有帮助，请从您的控制器以及页面和评论实体发布您的代码。**

# sql - 如果列值等于用户输入，则插入数据

> ID：12962157
> 
> 赞同：0
> 
> 时间：2012-10-18T19:22:25.527
> 
> 标签：sql

如何执行 if 语句来检查列值是否等于用户输入的输入值

我有一个名为 Tasks 的表和一个名为 TaskID 的主键。如果我试图将用户输入的 id 与 TaskID 列进行比较，“if”条件会是什么样子

基本上我正在尝试执行 if(TaskID = 599) 插入值

到目前为止，我已经尝试过：

```
if ((select TaskID from MyDB.dbo.Tasks where TaskID=599) = 599)
begin
insert into MyDB.dbo.Tasks (Concluded)
Values (1)
end 
```

但是我认为它没有我想要的结果。相反，它会不断创建新任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:29:43.803

如果您尝试仅检查 taskID 是否已[存在](http://msdn.microsoft.com/en-us/library/ms188336.aspx)，请使用 -

```
IF EXISTS (SELECT 'x' FROM task WHERE taskid=599)
    UPDATE Table1 SET (...) WHERE Column1='SomeValue'
ELSE
    INSERT INTO Table1 VALUES (...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:31:43.997

试试这个

```
IF EXISTS (SELECT 1 FROM task WHERE taskid=599)
    UPDATE MyDB.dbo.Tasks SET concluded = 1 WHERE taskid=599
ELSE
    INSERT INTO MyDB.dbo.Tasks (concluded) VALUES (1) 
```

# html - 包装动态高度

> ID：12962159
> 
> 赞同：0
> 
> 时间：2012-10-18T19:22:34.313
> 
> 标签：html, css

我有一个包含 html 页面的所有元素的包装器。

```
#wrapper {
     width: 1000px;
     height: auto;
     min-height: 100%;
     margin: auto;
     background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#4488ff), to(#4422ff));
[...]
     background-attachment: fixed;
     -moz-border-radius:20px;
     -webkit-border-radius:20px;
     border-radius:20px;
} 
```

这是 HTML 代码示例

```
 <div id="wrapper">
        <div id="uppermenu">
             <div id="container">
                  <div id="logo"> <img src="images/logo.png" height="100%"> </div>
                  <div id="banner"> <br></div>
             </div>
        </div>
        <div class="sidemenu"> [...] </div>
        <div id="guide"> [...] </div>
 </div> 
```

我希望这个包装器根据它必须包含的内容来改变它的高度，但是当我这样做时，这并没有发生。如果我尝试使用

```
overflow: hidden; 
```

包装器由上层菜单 div （它应该包含）向下移动并使用

```
clear: both; 
```

在内容的末尾不会改变任何东西。我在这里尝试了至少 5 个正确回答的不同问题，但没有一个对我有用。最后一件事：我写的包装器集（最小高度为 100%）非常适合我的浏览器屏幕，但这显然不是我想要的样子！有什么帮助？？？

编辑：这是 sidemenu 类的 CSS

```
.sidemenu {
      float: left;
      margin-left: 20px;
      margin-top: 20px;
      height: 200px;
      width: 150px;
      background-color: #4488ff;
      -moz-border-radius:10px;
      -webkit-border-radius:10px;
      border-radius:10px;
      z-index: 3;
} 
```

和指南ID

```
#guide {
   float: left;
   margin-top: 20px;
   margin-left: 50px;
   height: 100%;
   width: 760px;
   background-color: #4488ff;
   -moz-border-radius:10px;
   -webkit-border-radius:10px;
   border-radius:10px;
   z-index: 3;
} 
```

上层菜单和容器

```
#uppermenu {
       position: fixed;
       top: 0px;
       width: 1000px;
       height: 100px;
       margin: auto;
       background: #004465;
       z-index: 5;
}
#container {
     width: 1000px;
     min-height: 100%;
     margin: auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:56:09.160

## 解决方案一：*明确：两者*

添加样式为 clear:both 的块元素；到它上面会清除经过该点的浮动并阻止该元素的父元素折叠。[http://jsfiddle.net/TVD2X/1/](http://jsfiddle.net/TVD2X/1/)

优点：允许您清除一个元素，并且您在下面添加的元素不会受到上面的浮动元素和有效 css 的影响。

缺点：需要另一个标签来清除浮动、膨胀标记。

注意：要回退到 IE6 并让它在禁欲的父母（即输入元素）上工作，您不能使用 :after。

## 解决方案二：*显示：表格*

添加显示：表格；给父母以使其摆脱浮动并以正确的高度显示。[http://jsfiddle.net/h9GAZ/1/](http://jsfiddle.net/h9GAZ/1/)

优点：没有额外的标记，而且更整洁。适用于 IE6+

缺点：需要无效的 css 以确保在 IE6 和 7 中一切正常。

注意：IE6 和 7 的宽度自动用于防止宽度为 100%+padding，在较新的浏览器中并非如此。

## 关于其他“解决方案”的说明

这些修复可以回溯到支持最低的浏览器，全球使用率超过 1% (IE6)，这意味着使用 :after 不会削减它。

隐藏溢出确实会显示内容，但不会阻止元素折叠，因此不会回答问题。使用内联块可能会产生错误的结果，孩子有奇怪的边距等等，表格要好得多。

设置高度确实“防止”了崩溃，但这不是一个正确的解决方法。

## 无效的 CSS

无效的 css 永远不会伤害任何人，事实上，它现在已成为常态。使用浏览器前缀与使用特定于浏览器的 hack 一样无效，并且不会影响最终用户。

## 综上所述

我使用上述两种解决方案来使元素正确反应并相互配合，我恳请您也这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:41:31.627

摆脱最小高度：100％。这意味着 div 的最小高度是浏览器高度的 100%。消除这个应该使它适合内容

# java - 使用 RMI 和 springs 从服务器汇集数据

> ID：12962164
> 
> 赞同：0
> 
> 时间：2012-10-18T19:22:40.567
> 
> 标签：java, spring, callback, rmi

我是 RMI 和弹簧的新手，需要一些关于我们正在实施的功能的帮助。

我们正在使用 java 创建聊天软件，并希望将 RMI 与 springs 一起使用。我可以使用 RMIServerExporter、接口等相当轻松地设置客户端服务器交互。

我能想到的问题是客户端需要从服务器汇集数据。我们需要不断检查新消息。由于其他原因，我们无法从服务器推送数据。

如何使用弹簧设置 RMI，以便客户端从服务器汇集数据。我查找了回调，但这涉及从服务器推送！？

有没有办法做到这一点。如果您需要我进一步解释，请告诉我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:30:26.063

RMI 只是用于客户端-服务器通信的传输协议。在客户端，一旦您的[RmiProxyFactoryBean](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/remoting/rmi/RmiProxyFactoryBean.html)在 Spring 容器中正确定义和初始化，在何处、何时以及如何使用此服务 bean 完全取决于开发人员。对于服务器池实现，我们通常使用[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)在给定的时间间隔内调度 RMI 调用，例如：

```
public class ChatClient {
  // Defined and wired as RmiProxyFactoryBean in applicationContext.xml
  private ChatService chatService;

  private ScheduledExecutorService scheduleTaskService;

  ... ...

  // At some point during chat application running life cyle:
  scheduleTaskService = Executors.newScheduledThreadPool(5);

  // This schedule pooling task to run every 2 minutes:
  scheduleTaskService.scheduleAtFixedRate(new Runnable() {
    public void run() {
      // Pooling server using RMI call:
      chatService.poolingData();
    }
  }, 0, 2, TimeUnit.MINUTES);

  ... ...

} 
```

对于更企业级的解决方案，我们通常使用[Quartz](http://quartz-scheduler.org/api/1.8.5/)，查看[这篇博客文章](http://www.mkyong.com/spring/spring-quartz-scheduler-example/)作为一个实例。

# javascript - 将内容 MathML 转换为 javascript 中的中缀/数学符号字符串

> ID：12962170
> 
> 赞同：3
> 
> 时间：2012-10-18T19:23:06.370
> 
> 标签：javascript, math, mathjax, mathml, infix-notation

如何将 Content MathML（以下示例）转换为中缀或数学符号字符串。例如转换这个：

```
 <math xmlns="http://www.w3.org/1998/Math/MathML">
        <apply>
          <times/>
          <ci> compartment </ci>
          <ci> k1 </ci>
          <ci> S1 </ci>
          <ci> S2 </ci>
        </apply>
      </math> 
```

进入：`compartment*k1*S1*S2`

我看过 MathJax，但它们似乎不支持 Content MathML 也不支持转换为中缀字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:57:33.247

网络上有几个 XSLT 文件，它们将内容 MathML 转换为表示 MathML。一个“官方”示例是David Carlisle 编写的[这个文件。](http://www.w3.org/Math/XSL/ctop.xsl)也许您可以以此为基础，对其进行调整以生成纯文本而不是 cMathML。您需要[从 JavaScript 调用 XSLT](https://stackoverflow.com/q/7677145/1468366)。

# android - 显示 ProgressDialog 之前的 setRequestedOrientation 导致崩溃

> ID：12962172
> 
> 赞同：8
> 
> 时间：2012-10-18T19:23:12.900
> 
> 标签：android

我正在开发一个只能在纵向模式下运行的 android 应用程序，因为布局不适合手机的横向屏幕。但是，在平板电脑和上网本上，我希望该应用程序仅在横向模式下运行。

我现在尝试检查应用程序是否在平板设备上运行，并通过 setRequestedOrientation 设置相应的请求方向。

问题是当设备尚未保持在我请求的方向时，应用程序现在崩溃，因为我在调用 setRequestedOrientation 后不久显示了一个progressDialog，这似乎泄漏了一个窗口。

Logcat 说：

```
10-18 21:15:30.698: E/WindowManager(653): Activity has leaked window  com.android.internal.policy.impl.PhoneWindow$DecorView@41991418 that was originally added here
10-18 21:15:30.698: E/WindowManager(653): android.view.WindowLeaked: Activity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41991418 that was originally added here
10-18 21:15:30.698: E/WindowManager(653):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:279)
10-18 21:15:30.698: E/WindowManager(653):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
10-18 21:15:30.698: E/WindowManager(653):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
10-18 21:15:30.698: E/WindowManager(653):   at android.view.Window$LocalWindowManager.addView(Window.java:537)
10-18 21:15:31.888: E/WindowManager(653): Activity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41588040 that was originally added here
10-18 21:15:31.888: E/WindowManager(653): android.view.WindowLeaked: Activity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41588040 that was originally added here
10-18 21:15:31.888: E/WindowManager(653):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:279)
10-18 21:15:31.888: E/WindowManager(653):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
10-18 21:15:31.888: E/WindowManager(653):   at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
10-18 21:15:31.888: E/WindowManager(653):   at android.view.Window$LocalWindowManager.addView(Window.java:537)
10-18 21:15:34.168: E/AndroidRuntime(653):  at android.view.WindowManagerImpl.findViewLocked(WindowManagerImpl.java:599)
10-18 21:15:34.168: E/AndroidRuntime(653):  at android.view.WindowManagerImpl.removeView(WindowManagerImpl.java:336)
10-18 21:15:34.168: E/AndroidRuntime(653):  at android.view.WindowManagerImpl$CompatModeWrapper.removeView(WindowManagerImpl.java:151) 
```

我能做些什么来防止这种崩溃？任何帮助将不胜感激。

编辑：由于我无法解决这个问题，我终于设法编辑我的布局，以便它现在允许在纵向和横向模式下使用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T20:33:10.403

你有任何可以显示的源代码吗？这可以帮助确定问题。

我实际上有完全相同的问题。但这只发生在我的一些活动中。

当屏幕方向改变时，Android 实际上会销毁并重新创建活动。

所以，我的代码看起来像这样。

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        setContentView(R.layout.displayscreen);

        bottomButton = (Button) findViewById(R.id.bottomButton);
        bottomButton.setOnClickListener(bottomButtonClick);
        bottomButton.setTypeface(font);
        bottomButton.setTextSize(16);
} 
```

看看发生了什么是视图没有正确附加到窗口管理器。所以我认为 oncreate 可能不是这样做的最佳地点。

相反，我将它添加到我的简历中并且它有效。像这样：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.displayscreen);

        bottomButton = (Button) findViewById(R.id.bottomButton);
        bottomButton.setOnClickListener(bottomButtonClick);
        bottomButton.setTypeface(font);
        bottomButton.setTextSize(16);
}

@Override
protected void onResume() {
    super.onResume();
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

不幸的是，这也导致活动仍然被破坏和重新创建。调用 onCreate 和 onResume 两次...不好对吧？

所以要解决这个问题。您必须将此添加到您的 android 清单中以进行活动。

```
android:configChanges="keyboardHidden|orientation" 
```

一个例子：

```
<activity 
    android:name="com.Test.Info.DisplayInfo"
    android:configChanges="keyboardHidden|orientation"
    android:label="@string/info">
</activity> 
```

此代码可防止销毁/重新创建循环。

希望这会有所帮助！

干杯

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-18T20:48:02.943

如果你使用

```
setRequestedOrientation(SCREEN_ORIENTATION_NOSENSOR); 
```

暂时锁定，并且

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); 
```

解锁屏幕旋转，可能你遇到了以下[问题](https://stackoverflow.com/questions/3611457/android-temporarily-disable-orientation-changes-in-an-activity/3611554#3611554)。

如果您使用此方法锁定屏幕方向并且设备未处于其默认方向，它将切换到默认方向，破坏并创建您的活动。您的应用程序将崩溃，因为您尝试更新一些破坏的进度对话框。

# wordpress - Wordpress wp_editor jquery拖放偏移问题

> ID：12962173
> 
> 赞同：1
> 
> 时间：2012-10-18T19:23:23.213
> 
> 标签：wordpress, jquery-ui, draggable, droppable

我对以下代码有疑问：

我在 Wordpress 中初始化一个 tinyMCE 编辑器：

```
 wp_editor("<div>HTML content</div>", "id-of-editor", $settings); 
```

这会在 iframe 中生成 tinyMCE 编辑器。在那个 iframe 里面我有一个 dropppable jquery ui div。

我想将内容从 iframe 外部拖放到 iframe 中。

到目前为止，我已经做到了：

```
$( "#drag" ).draggable({ 
            helper: "clone",
            revert:"valid",iframeFix:true 
         });

$("#editor-iframe").contents().find(".droppable-div").droppable({                     

         accept: "#drag",

    }); 
```

一切正常，除了一件事。光标位置和实际拖动位置之间有 150px 的偏移。

因此，只有当我将可拖动项目远离可放置区域时，才会检测到拖动事件。

有什么帮助吗？

提前致谢。对不起，我的英语不好！这不是我的母语。

图片问题描述：http: [//i.stack.imgur.com/4hGfW.jpg](http://i.stack.imgur.com/4hGfW.jpg)

# javascript - Windows 8 项目类型性能差异

> ID：12962177
> 
> 赞同：0
> 
> 时间：2012-10-18T19:23:34.513
> 
> 标签：javascript, c++, performance, windows-8

> **可能重复：**
> [WinRT 上的 C++、C# 和 JavaScript](https://stackoverflow.com/questions/7466303/c-c-sharp-and-javascript-on-winrt)

我想为 Windows 8 创建一个应用程序，并且同样精通 C++ 和 JavaScript。我想知道 JavaScript/HTML 或 C++/XAML 之间会有什么（如果有的话）性能差异。它们是否都被编译到相同的源或被解释的 JavaScript 版本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:36:11.223

JS 在 Chakra javascript 引擎中运行，就像 JS 在浏览器应用程序中一样。一般来说，对于很多场景来说，两种环境之间的性能差异。当您深入了解细节时，是的，您会看到性能差异，但大多数应用程序不需要担心它们。如果您正在做硬核第一人称游戏、激烈/大量数字早午餐等，那么您可能需要查看 C++ 或 .NET。

# wolfram-mathematica - 使用 GNU gsl 编写的 ODE 是否优于 Mathematica 的 NDSolve？

> ID：12962178
> 
> 赞同：3
> 
> 时间：2012-10-18T19:23:34.870
> 
> 标签：wolfram-mathematica, gnu, gsl, ode, compiled

与 Mathematica 8.0 NDSolve 相比，用 C 语言编写的 ODE 求解器是否可能使用 GSL 库具有显着的速度优势？在准确性方面如何公平？

我的理解是编译代码原则上可以更快，但是这些天 NDSolve 本身已经以某种方式使用了很多编译代码？

还有任何选项可以使用 MathLink 或 Mathematica 的 compile 函数来加快求解 ODE 的速度吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T23:43:09.013

Mathematica 中的 NDSolve 和其他数值函数会自动将您的操作数（例如 ODE 的 RHS）编译为中间“字节码”语言（与 Compile 函数使用的语言相同）。如果您愿意，您可以指定[CompilationTarget](http://reference.wolfram.com/mathematica/ref/CompilationTarget.html) -> "C"，并且该函数将一直编译为 C 代码并链接回 Mathematica ... 您可以在 Mathematica Stack Exchange 上的上一个问题中自己查看生成的 C 代码：

[https://mathematica.stackexchange.com/questions/821/how-well-does-mathematica-code-exported-to-c-compare-to-code-directly-written-fo/830#830](https://mathematica.stackexchange.com/questions/821/how-well-does-mathematica-code-exported-to-c-compare-to-code-directly-written-fo/830#830)

当然，原则上总是可以手写一个更快的算法……但是有很多事情需要优化，Mathematica 会自动完成。例如，您可能不想负责手动优化优化问题中偏导数的稀疏矩阵的计算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T19:31:48.880

Mathematica 的重点是可用性。他们确实使用数字库。所以速度将与最好的可用库相同或更糟（几乎在所有情况下）。例如，我听说他们使用 eigen 作为矩阵的东西。

您应该考虑的另一件事是，尽管它们优化了它们提供的功能，但您自己的功能并未优化。因此，您在每一步计算的导数在 c 中会更快。

对于在mathematica 和c++ 之间做出选择的朋友，我告诉他们选择mathematica，因为他们应该专注于快速获得结果，而不是构建最快的代码。

# java - java中为什么HashTable会存储表中key的hash值

> ID：12962179
> 
> 赞同：6
> 
> 时间：2012-10-18T19:23:40.937
> 
> 标签：java, hashtable, hash-collision

我正在通过 Java 对哈希表的 put 方法的实现，并遇到了这个：

```
// Makes sure the key is not already in the hashtable.
    Entry tab[] = table;
    int hash = key.hashCode();
    int index = (hash & 0x7FFFFFFF) % tab.length;
    for (Entry<K,V> e = tab[index] ; e != null ; e = e.next) {
        if ((e.hash == hash) && e.key.equals(key)) {
            V old = e.value;
            e.value = value;
            return old;
        }
    } 
```

虽然我知道检查冲突需要一个键，但为什么 Java 会存储键的哈希值并检查它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T19:26:04.717

因为同一个桶（`tab`）可以存放因`% tab.length`操作而具有不同哈希值的项目。首先检查哈希可能是一些性能优化，以避免`equals()`在哈希不同时调用。

举个例子：假设你有两个复杂的对象，`equals()`方法很昂贵。一个对象的哈希值等于 1，而另一个对象的哈希值是 32。如果将两个对象都放在一个有 31 个桶的哈希表中，它们最终会在同一个桶中 ( `tab`)。添加第二个（不同的对象）时，您必须确保它尚未在表中。您可以`equals()`立即使用，但这可能会更慢。取而代之的是，您首先比较哈希，避免`equals()`不必要的开销。在这个例子中，哈希是不同的（尽管在同一个桶中），所以`equals()`没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:34:21.580

它使访问更快，因为不需要为每次访问重新计算哈希值。这不仅对于显式搜索（在执行之前检查哈希）很重要，而且对于重新哈希也很重要`equals`。

# matlab - 如何设置 BottonDownFcn 以返回排序中的项目，如 gname

> ID：12962183
> 
> 赞同：0
> 
> 时间：2012-10-18T19:23:46.083
> 
> 标签：matlab

我正在寻找一个函数，比如`gname`将它分配给一个点的回调，当有人点击那个点时，我可以检索它在数据排序中的位置。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:10:24.430

我度过了一段艰难的时光，但使用 UserData 字段在 for 循环中发送信息并将值作为属性分配给每个点，然后通过动态回调简单地获取它。

# jquery - 使用 Actionscript 外部接口调用在 HTML 页面上启动 jQuery 函数

> ID：12962184
> 
> 赞同：4
> 
> 时间：2012-10-18T19:23:50.487
> 
> 标签：jquery, actionscript, externalinterface

我有一个项目正在构建一个可扩展的 Web 横幅，但在使用 Flash 的外部接口调用时遇到了问题。

我想要做的是通过单击我的 .swf 横幅内的按钮在我的 HTML 页面上启动一个 jQuery 函数。

jQuery 函数只是扩展 a 以显示另一个 .swf 文件。

---这是我的 HTML 页面头部的 jQuery 代码---

```
<script type="text/javascript">

$(document).ready
(function()
    {
    $(".contentBox").hide();

        $(".bannerBox").click
        (function expand()
            {
            $(".contentBox").slideToggle();
            }
        );
    }
);

</script> 
```

---这是我的动作脚本代码---

```
clickMe.addEventListener(MouseEvent.CLICK,fnMouseOn);
function fnMouseOn(e:MouseEvent):void 
{
   ExternalInterface.call('expand()')
} 
```

抱歉，如果这个问题已经在其他地方得到了回答并且我不明白，我已经寻找了几个小时的解决方案，但我无法弄清楚。

任何帮助表示赞赏:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:17:29.253

Sunil D. 说得对。expand 函数只存在于点击分配的上下文中，否则不能被调用，但是通过一些重构你应该很高兴：

```
<script type="text/javascript">

$(document).ready
(function()
    {
    $(".contentBox").hide();

        $(".bannerBox").click
        (function(){expand();}
        );
    }
);

function expand(){
  $(".contentBox").slideToggle();
}
</script> 
```

# jquery - jQuery 滚动条在 Chrome 浏览器中不起作用

> ID：12962190
> 
> 赞同：0
> 
> 时间：2012-10-18T19:24:03.047
> 
> 标签：jquery, google-chrome, scrollbar

我使用 jquery 创建了一个动态 div，并希望 div 的滚动条在页面加载时从屏幕底部开始，然后每当有新信息出现时，它就会自动下降。我的代码似乎在 Firefox 和 Internet Explorer 上运行良好，但不是 chrome，我不太确定为什么。

```
$(function(){
    $("#divID").scrollTop($("#divID")[0].scrollHeight);

    $("#divID").scroll(function(){
        if($(this)[0].scrollHeight - $(this).scrollTop() === $(this).outerHeight())
        {
            //added alert here because i know the scrolling down code works...
            alert(1);
        }
    });​
} 
```

我到处寻找并尝试了许多不同的方法来向下滚动条但无济于事，chrome似乎不希望它起作用。

我将不胜感激有关如何解决此问题的任何建议。

编辑：这是一个演示 [Demo](http://jsfiddle.net/DgYcY/50/)

再次编辑：对不起，我不擅长解释自己，尽我所能，屏幕加载时必须出现消息框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:47:58.180

您的事件没有触发，因为您在最初滚动*之后才设置事件侦听器，请尝试以下代码：*

演示：http: [//jsfiddle.net/SO_AMK/watWg/](http://jsfiddle.net/SO_AMK/watWg/)

jQuery：

```
$("#divID").scroll(function(){
    if($(this)[0].scrollHeight - $(this).scrollTop() == $(this).outerHeight())
    {
        alert(1);
    }
}).scrollTop($("#divID")[0].scrollHeight);​ 
```

或者，如果您愿意，您可以使用纯 JavaScript：http: [//jsfiddle.net/SO_AMK/eJCnU/](http://jsfiddle.net/SO_AMK/eJCnU/)

# java - 在 Java 中创建 Set 的子集

> ID：12962193
> 
> 赞同：35
> 
> 时间：2012-10-18T19:24:04.980
> 
> 标签：java, set, subset, linkedhashset

我有一个 `LinkedHashSet`，即一个有序集。我试图找到一个函数来返回集合的一个子集，即集合的前 20 个元素。我知道我可以通过创建一个新集合然后使用第一个集合的迭代进行填充来做到这一点，但我希望有更简洁的东西。

还看了谷歌的番石榴库，但看不到我想要的。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-18T19:36:22.253

在番石榴中：

```
Set<Integer> subset = ImmutableSet.copyOf(Iterables.limit(set, 20)); 
```

请注意，这`Iterables.limit()`是延迟评估的，因此只创建了一个额外的集合。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-11-16T14:41:52.853

使用流和收集器的解决方案：

```
Set<Integer> subSet = set.stream()
    // .skip(10) // Use this to get elements later in the stream
    .limit(20)
    .collect(toCollection(LinkedHashSet::new));
    // You could also collect to something else 
    // with another collector like this: 
    // .collect(toList()); 
```

这假设以下导入：

```
import static java.util.stream.Collectors.toCollection; 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-06-02T19:12:41.003

在 Java 8 中你可以做

```
mySet.stream()
   .skip(start) // the offset
   .limit(count) // how many items you want
   .collect(Collectors.toSet()); 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2012-10-18T19:30:55.527

你可以这样做：

```
Set<Integer> set = new LinkedHashSet<>();
for (int i = 0; i < 50; i++) {
   set.add(i);
}

List<Integer> list = new ArrayList<>(set);
Set<Integer> subSet = new LinkedHashSet<>(list.subList(0, 20)); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-10-18T19:30:49.017

您可以先使用 a `SortedSet`，因为该[`subSet`](http://docs.oracle.com/javase/7/docs/api/java/util/SortedSet.html#subSet%28E,%20E%29)方法存在于其上。

您还可以将集合的内容添加到 a`List`并在其上使用`subList`方法。但这取决于您存储的数据量，`Set`因为您不想复制大量数据。

否则，您应该继续对 Set 进行迭代，因为它会更有效。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-26T05:21:33.653

简单的辅助方法（您可以将它用于 Set 或任何其他集合）：

```
public static <T> List<T> listOf(final Collection<T> set, final int limit) {
    final List<T> list = new ArrayList<>(limit);

    final Iterator<T> i = set.iterator();
    for (int j = 0; j < limit && i.hasNext(); j++) {
        list.add(i.next());
    }

    return list;
} 
```

# ios - 尝试使用 AlertView 推送到另一个视图控制器

> ID：12962196
> 
> 赞同：0
> 
> 时间：2012-10-18T19:24:10.190
> 
> 标签：ios, alertview

我在编写 AlertView 以推送到新的 ViewController 时遇到问题。我已经遵循了几个教程，但仍然无法使其正常运行。任何帮助，将不胜感激。

```
- (IBAction)web:(id)sender {
    UIAlertView *testAlert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"You are now entering a website outside of the Company App: Any links or references to other Internet sites (hyperlinks) are provided by Company merely as a convenience to users of this App." delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Proceed", nil];

        [testAlert show];
        [testAlert release];

}

-(void)web:(UIAlertView *)web clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 0) {
    }
    else if (buttonIndex == 1) {

    JBWebViewController *jbweb = [[JBWebViewController alloc] initWithNibName:@"JBWebViewController" bundle:nil];
        [self.navigationController pushViewController:jbweb animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T02:20:53.380

你应该使用`UIAlertView`委托

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex 
```

不是

```
-(void)web:(UIAlertView *)web clickedButtonAtIndex:(NSInteger)buttonIndex 
```

并检查 self.navigationController 不是`nil`。

# ruby-on-rails - 验证嵌套模型的存在

> ID：12962198
> 
> 赞同：1
> 
> 时间：2012-10-18T19:24:24.437
> 
> 标签：ruby-on-rails

我有很多属于一个赞的`Movie`照片`Movie.photos`

知道如何验证电影应该至少有一张照片吗？

`validates_presence_of :photos`不起作用或至少被认为`nil`是有效的。

我有兴趣针对真正的嵌套对象进行验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:32:44.203

我不认为有一个内置的验证器，比如presence_of，所以你可以自己写。以下内容位于您的 movie.rb 文件中。

```
validate :at_least_one_photo

private

def at_least_one_photo
  if photos.size < 1
    errors.add :base, "The movie must have at least one photo attached before saving"
  end
end 
```

# php - 强制字符格式为 UTF-16

> ID：12962201
> 
> 赞同：3
> 
> 时间：2012-10-18T19:24:44.480
> 
> 标签：php, unicode, utf-16

所以，如果我有一个 quasi-unicode UTF-16 字符代码

```
0x14e
0xf6 
```

我如何确保它是严格的并符合标准？

```
0x014E
0x00F6 
```

我意识到我可以做一些字符串操作，但我似乎找不到 PHP 的内置方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:59:44.147

您可以使用 mb_detect_encoding() 进行验证。 [http://php.net/manual/en/function.mb-detect-encoding.php](http://php.net/manual/en/function.mb-detect-encoding.php)

# mysql - mysql插入唯一行，除了键

> ID：12962208
> 
> 赞同：1
> 
> 时间：2012-10-18T19:25:11.223
> 
> 标签：mysql, sql

```
| id |  -> primary key, auto_increment
| v1 |
| v2 | 
```

我想确保插入时没有重复的 (v1, v2) 对。是否可以通过**SQL**语句实现？目前我先做一个选择，如果没有结果我继续插入。

我想知道是否有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:27:30.820

如果您不介意请求返回的错误（您可以在代码中处理它，或者如其他地方所述进行插入`INSERT IGNORE`以完全抑制错误。），您可以在 v1、v2 上放置一个 UNIQUE 复合索引。

```
ALTER TABLE tablename
      ADD UNIQUE INDEX unique_pair(v1,v2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:28:25.930

我相信你这样做的方式实际上是首选方法。但是，如果您对列有适当的约束，您可以尝试使用[INSERT IGNORE 。](https://dev.mysql.com/doc/refman/5.5/en/insert.html)

# ruby-on-rails - Vim 中 ERB 标签的缩进

> ID：12962211
> 
> 赞同：4
> 
> 时间：2012-10-18T19:25:50.817
> 
> 标签：ruby-on-rails, ruby, vim, erb, macvim

我最近切换到 Vim 并且在最初的障碍之后我真的很喜欢它。对我来说，唯一可能成为交易杀手的是 erb 标签的自动缩进都搞砸了。我正在使用包含 ruby​​.vim 和 rails.vim 的 Janus 插件包。我还添加了 html5.vim，因为有人告诉我它可以帮助解决这个问题。

这是它所做的混乱缩进的示例：

```
 <% unless @zipcode.latitude.blank? %>
    <p>
  <b>Latitude:</b>
  <%= @zipcode.latitude %>
  </p>
<% end %>

  <p>
  <b>Longitude:</b>
  <%= @zipcode.longitude %>
  </p> 
```

任何建议都将不胜感激。似乎必须有一种方法可以使 vim 之类的强大编辑器正确缩进。我不想回到 sublime 或 aptana 但这是我真的不想没有的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T08:53:27.803

我相信有两种可能的方法可以解决您的问题。

首先，暂时删除 Janus 发行版并用[最小的 .vimrc](http://www.derekwyatt.org/vim/the-vimrc-file/the-absolute-bare-minimum/)替换它。然后安装[ERuby 插件](https://github.com/vim-ruby)，看看它是否有效。如果它现在可以工作，那么问题必须是与其他插件之一发生冲突，您应该尝试一个一个重新启用不同的 Janus 插件，以查看故障所在。但是，如果它仍然不起作用，那么您知道该插件本身在您的系统上不起作用，您可以向作者发送详细的错误报告（包括您正在使用的操作系统和您的 vim 版本）。

或者，很容易重新配置 Vim 以使用不同的缩进方法。您可以使用不同的内置缩进 ( `:h indentexpr`)，例如 XML：

```
autocmd FileType eruby setl indentexpr=XmlIndentGet(v:lnum,1) 
```

或者你可以配置 Vim 使用外部缩进程序 ( `:h equalprg`)。

# c# - 从 Entity.DynamicProxies.MyEntityClass 到 Entity.DbSet`1[MyEntityClass] 的 InvalidCastException

> ID：12962212
> 
> 赞同：1
> 
> 时间：2012-10-18T19:25:53.733
> 
> 标签：c#, entity-framework

我很难理解为什么会收到 InvalidCastException 这是我收到的错误消息：

> 无法将类型为“System.Data.Entity.DynamicProxies.Man_58184D79075BC811252680D7866D3D69D0C46FD038D3B123A5E3B102E1FC77A2”的对象转换为类型“System.Data.Entity.DbSet`1[ConsoleApplication1.Man]”。

*   **Man**是传递给 TEntity 的实体类的名称
*   我已经用代码中的注释标记了错误的位置。

此存储库类的目的是保存给定的 DbContext 和 DbSet，并调用其方法来删除记录和/或显示给定 DbSet 的所有记录。

```
public class Repository<TEntity> where TEntity : class
{
    private DbContext dbContext;
    private DbSet<TEntity> dbSet { get; set; }
    public Repository(DbContext dbContext)
    {
       this.dbContext = dbContext;
       this.dbSet = this.dbContext.Set<TEntity>();
    }

    public void Delete(int id)
    {
         TEntity entity = dbSet.Find(id);
         dbSet.Remove(entity);
         dbContext.SaveChanges();
    }

    public void DisplayAll()
    {
        IQueryable Query = from item in dbContext.Set<TEntity>()  
                           where true
                           select item;

        foreach (DbSet<TEntity> x in Query) //InvalidCastException
        {
            // print entity fields to console here.
        }

    }
} 
```

这些是我用于创建存储库对象的主程序中的行：

**TestDataBaseEntities**是我用来引用我的实体模型的 DbContext 对象的类型。

```
class Program
{
    static void Main(string[] args)
    {
        int myID;
        var dbEntities = new TestDatabaseEntities();
        Repository<Man> ManTracker = new Repository<Man>(dbEntities);

        ManTracker.Display();  // exception thown in this method.
        Console.WriteLine("Choose ID to delete from Men list");
        myID = int.Parse(Console.ReadLine());
        ManTracker.Delete(myID);
        ManTracker.Display();

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:12:56.960

我想我找到了答案。我在 for each 语句中使用了错误的类型。

我应该使用 TEntity 而不是做 DbSet。

但这具有误导性，因为即使我能够对 TEntity 进行类型转换，我也需要打印 TEntity 对象的字段的代码，而 TEntity 无权访问我需要打印的字段。我认为我应该使用一个接口来定义一个名为 display 的函数，并以某种方式由每个实体类实现，而不是使用单独的存储库类，而不是通过从数据库创建模型来修改自动生成的代码。也许通过创建从实体类继承的类，然后实现接口。我有这样的想法，因为为了保持面向对象的东西，一个对象不应该依赖另一个对象向用户显示其内容，它应该自己显示它们，这对我来说似乎是有意义的。

# .net - 从 Excel 文件创建 Sharepoint Online 项目列表

> ID：12962213
> 
> 赞同：0
> 
> 时间：2012-10-18T19:25:55.277
> 
> 标签：.net, sharepoint

我想在每次签入 Excel 文件时以编程方式创建/更新 Sharepoint Online 项目列表。

有什么方法可以做到这一点，最好的方法是什么，甚至开始研究它。

这方面的任何信息都会有帮助。

是否还有一种方法可以基于通过外部 API 检索的 JSON 数据以编程方式创建/更新 Excel 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:59:48.520

您可以在该文档库上设置事件处理程序。使用 epplus 之类的文件打开文件，解析 excel 文件并使用 Sharepoint Server 对象模型更新，插入列表项。

事件处理程序：[http ://www.c-sharpcorner.com/uploadfile/Roji.Joy/event-handler-in-sharepoint-2010/](http://www.c-sharpcorner.com/uploadfile/Roji.Joy/event-handler-in-sharepoint-2010/)

您可以在事件处理程序中获取对文件的引用，如下所示：

```
public override void ItemUpdated(SPItemEventProperties properties)
{
       SPFile file = properties.ListItem.File;
       byte[] fileBin = file.OpenBinary();
       //use epp to open the binary array and perform some ListItem manipulation
} 
```

# mysql - ASP.NET MVC 4 成员资格配置文件 agasint mysql

> ID：12962214
> 
> 赞同：0
> 
> 时间：2012-10-18T19:26:00.270
> 
> 标签：mysql, asp.net-mvc-4, asp.net-membership, asp.net-profiles

我想做的就是为用户添加个人资料，以便在他们的帐户中时，他们可以更新他们的个人资料。

我需要对mysql执行此操作。

在这一点上，我什至会举一个使用 MSSQLServer 的工作示例作为初学者。

我寻求一个关于如何做到这一点的教程，因为两天的尝试拼凑起来终于打破了我的意愿。任何人...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:49:21.597

在 web.config 中注册一个配置文件提供程序

```
<profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider"
             type="System.Web.Profile.SqlProfileProvider"
             connectionStringName="ApplicationServices" 
             <!--same connection string as the membership provider-->
             applicationName="/"/>
      </providers>
      <properties>
        <add name="FirstName" type="string"/>
        <add name="LastName" type="string"/>
        <!--...or whatever profile properties you want/need-->
      </properties>
    </profile> 
```

设置配置文件属性

```
ProfileBase profile = ProfileBase.Create(userName);
profile["FirstName"] = "John";
profile["LastName"] = "Smith"; 
```

阅读它们

```
string firstName;
string lastName;
ProfileBase profile = ProfileBase.Create(userName);
firstName = profile["FirstName"] as string,
lastName = profile["LastName"] as string, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T15:17:13.360

请检查 web.config 中的所有内容是否拼写正确，我遇到了同样的错误，并且是“connectionStringName”属性中的问题。

我刚刚发现它下载了 MySQL.Web 源代码并替换了我的项目中的 dll，而我可以看到真正的错误，而不仅仅是一般的异常。

# loops - Lisp，CLISP的函数未定义错误？

> ID：12962216
> 
> 赞同：2
> 
> 时间：2012-10-18T19:26:09.443
> 
> 标签：loops, while-loop, lisp, common-lisp, clisp

我正在使用 LISP 开发一个程序，使用 CLISP 运行该程序。

我的函数中有一个 while 语句，但 CLISP 正在返回

```
*** - EVAL: undefined function WHILE 
```

功能没什么花哨的，

```
(defun heap-insert (heap item key)
  "Put an item into a heap. [Page 150 CL&R]."
  ;; Note that ITEM is the value to be inserted, and KEY is a function
  ;; that extracts the numeric value from the item.
  (vector-push-extend nil heap)
  (let ((i (- (length heap) 1))
    (val (funcall key item)))
    (while (and (> i 0) (>= (heap-val heap (heap-parent i) key) val))
      do (setf (aref heap i) (aref heap (heap-parent i))
               i (heap-parent i)))
        (setf (aref heap i) item))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T19:34:41.497

Common Lisp 中没有同名的函数或宏（或“语句”）`while`，因此 CLISP 向您提供该错误消息是正确的。

也许您打算使用`loop`宏，它接受`while`作为其语法的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T19:34:56.737

你错过了`loop`之前`while`

尝试：

```
(defun heap-insert (heap item key)
  "Put an item into a heap. [Page 150 CL&R]."
  ;; Note that ITEM is the value to be inserted, and KEY is a function
  ;; that extracts the numeric value from the item.
  (vector-push-extend nil heap)
  (let ((i (- (length heap) 1))
    (val (funcall key item)))
    (loop while (and (> i 0) (>= (heap-val heap (heap-parent i) key) val))
      do (setf (aref heap i) (aref heap (heap-parent i))
               i (heap-parent i)))
        (setf (aref heap i) item))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-19T10:17:25.320

Common Lisp中没有标准`while`的循环结构，Emacs Lisp 中有一个。但是，如果你想要一个，实现它相对简单。

```
(defmacro while (condition &body body)
  `(loop while ,condition
      do (progn ,@body))) 
```

# php - str_replace 删除一个段落 PHP

> ID：12962224
> 
> 赞同：0
> 
> 时间：2012-10-18T19:26:33.647
> 
> 标签：php, str-replace, paragraph

我有一个 php 文件：

```
$content = str_replace('search old string','by new string',$content);
$content = str_replace('search old string','by new string',$content); 
```

它适用于搜索和替换或删除字符串。但是如果旧字符串是一个段落，例如：

```
<table class="adverting_I_want_to_remove">
  <tr>
    <td>Dynamic Advertise content 1</td>
    <td>Dynamic Advertise content 2</td>
  </tr>
</table> 
```

如何在内容中删除该表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:33:10.467

```
$content = str_replace('<table>
  <tr>
    <td>TD 1</td>
    <td>TD 2</td>
  </tr>
</table>','by new string',$content); 
```

请注意，如果您想替换这样一段 HTML，您必须确保不要在字符串中包含额外的空格。str_replace 进行完全匹配，否则将失败。

替代方案是

*   使用正则表达式，据说[不是](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)修改HTML的最佳方式
*   使用[DOM 解析器](http://simplehtmldom.sourceforge.net/)。（或[这个](http://php.net/manual/en/book.dom.php)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:39:03.037

First off, [don't use regular expressions.](https://stackoverflow.com/a/1732454/1216976) Your best bet to edit HTML would be to use the [DOMDocument](http://php.net/manual/en/class.domdocument.php) class to parse through it.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-18T19:35:24.667

您可以使用`preg_replace()`. 如果/当您输错某些内容时，失败的可能性很高，`str_replace()`这就是我不使用它的原因，但是如果您确切知道要匹配的内容并且可以精确输入，那么它是更好的选择。

```
preg_replace('/<table>.*<\/table>/s', '', $content); 
```

If you don't know how to use regular expressions, look them up and learn 'em. You can be more or less specific about what you want to replace by adjusting the regex.

# c - N个线程写入以不同优先级运行的M个文件，并跟踪线程请求和当前分配给线程的所有文件

> ID：12962226
> 
> 赞同：-1
> 
> 时间：2012-10-18T19:26:40.690
> 
> 标签：c, linux

我想创建一个程序，使用 POSIX 线程，让`n`线程以不同的优先级运行。

`m`这些`n`线程之间共享一些文件（例如文件）。如果一个线程正在使用该文件（假设它正在写入该文件），则不允许其他线程使用它。代码应该维护一个表，该表告诉：它已获取哪个文件以及它的请求正在等待哪个文件。

此外，我们需要一个监视器线程来检查死锁；任何实现提示/想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:37:46.930

您不需要检查死锁。您必须编写一个很好的代码，使其不可能陷入死锁场景。出于这个原因，我建议您使用 try-lock 方法来锁定文件链并在任何锁定获取失败时将它们解锁。

[`ftrylockfile`此外，如果您使用 C 缓冲 I/O ，`funlockfile`](http://www.kernel.org/doc/man-pages/online/pages/man3/flockfile.3.html)我建议您坚持使用API。否则，请使用最适合您的情况的同步机制，即 futex API 或使用原子指令实现的锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T22:29:45.027

完成此操作的标准 unix 方法是：spooldirectories。

*   文件操作，例如重命名/链接/取消链接是**原子的**
*   有一个中央输入 spool-dir，可以放置输入文件
*   想要处理文件的进程/线程，首先将其移动到另一个名称，或者更好：移动到另一个（工作）目录（使用 thread_id 或进程号作为目录名称是显而易见的。）
*   （因为这个动作是原子的，所以不可能有竞争条件！）
*   处理后，完成的文件可以移动到输出目录
*   *scoreboard*函数只是工作目录上的readdir(+stat)，甚至可能是 inotify
*   进程饥饿将永远是一个问题。未完全处理的文件将永远存在于 de workdirs 中。在工作目录中有一个 stamp/pid 文件可以帮助清理/重新启动。
*   如果设计得好，即使机器发生故障，这种结构也能正常工作。工作人员必须维护自己的备份/日志/stamp-file 机制。
*   如果您还没有注意到：不需要锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:37:52.487

I hate C. I have to try and think of a way to do this without classes:(

OK, a 'Sfile' struct to represent each file. Has name, path, file fd/handle, everything to do with one file, plus an 'inUse' boolean.

A 'waitingThreads' array for those threads waiting for a set of files.

A 'Sfiles' struct with an array of *Sfile to hold all the files, a waitingThreads array and a lock, (mutex/futex/criticalSection).

Each thread should have an event/semaphore/something that it can wait on until its files all become available and some way to access to the set of files that it needs and somewhere to store the fds/handles/whatever for the files.

OK, off we go:

Any thread that wants files locks up the Sfiles and iterates the *Sfile array, checking if every file it needs is free to use. If they all are, it sets the 'inUse' boolean, loads itself up with the fd/handles, unlocks and runs on - it has all its files. If any file it needs is in use, it pushes itself onto the waitingThreads array and waits on its event/sema.

Whne a thread is done with its files, it locks the Sfiles and clears the 'inUse' boolean for the files it was using. It then iterates the waitingThreads array - if the array is empty, it just unlocks and exits. If the array is not empty, it tries to find threads that can now run with the files that are now free. If it finds none, it just unlocks and returns. If it does find one, it loads that thread up with the fd/handles, sets the inUse boolean and signals its event/sema - that thread will then run with its desired set of files. The thread continues to iterate the waitingThreads array to the end, looking for mre threads that it can load up and signal with the remaining free files. When it reaches the end of the array, it returns.

That, or something like it, will ensure that the threads always run with their complete set of files, prevent any deadlocks due to threads locking partial sets of files and does not require any polling.

If you really, really need that table thingy, you can build it inside the lock every time a thread enters or leaves the lock. I would suggest mallocing a suitable struct, loading it up with all the details of the free files and waiting threads, and queueing it off to another thread. You could just have some 'monitoring' thread that periodically locks up the Sfiles, dumps all the info and unlocks, but that keeps the Sfiles locked for the entire 'dump' time - you may not want that overhead - it's up to you.

Edit:

OH - forgot the priority thingy. The OS thread priority is probably useless for your purpose. Have each thread expose a priority enum/int and keep the 'waitingThreads' array sorted by that priority, so giving the higher priority threads the first bite at whatever files are returned.

Is that good enough for your homework assignment?

# php - prolog 与 php 和 mysql 的接口

> ID：12962228
> 
> 赞同：2
> 
> 时间：2012-10-18T19:26:42.327
> 
> 标签：php, mysql, prolog, swi-prolog

我正在寻找这是否是一种可能的情况-

我的php页面调用prolog（并发送带有数据的查询），然后prolog代码运行并绑定某些（输出）变量，然后我将这些变量加载到mysql db中。

IE，

> PHP -> 调用和发送数据 -> Prolog -> 执行目标并绑定输出变量 -> 将输出变量发送到 mysql db

我已经看过很多关于如何使用 sicstus 和 swi 等“生成”html页面的文档。但这与我想要实现的目标相反。任何指针？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T08:43:51.080

根据我以前必须将 PHP 与 Prolog 连接的项目的经验，我使用 php [exec 函数](http://php.net/manual/en/function.exec.php)从 PHP 调用 Prolog ：

```
exec("\"c:/program files/swipl/bin/swipl.exe\"" -f prolog_filename.pl -g your_query) 
```

exec 函数返回 Prolog 的输出，您可以根据需要（例如将其发送到您的 mysql 数据库）。

您可能需要相应地编辑序言路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:49:45.600

绝对有可能做你想做的事。例如

[http://www.swi-prolog.org/pldoc/package/odbc.html](http://www.swi-prolog.org/pldoc/package/odbc.html)

将允许您使用 Prolog 中的 MySQL 数据库。但是，我相当肯定将 Prolog 程序的输出发送回 php，然后从 php 方面将其插入 mysql 将使您的生活变得更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:52:37.070

从 Web 服务器调用 SWI-Prolog 可以按照 J.Paine [here](http://www.j-paine.org/dobbs/prolog_from_php.html)的说明完成，但在服务器端运行 SWI-Prolog 的首选方式是……作为 Web 服务器。

这是因为使用 SWI-Prolog 提供的扩展库更容易调试逻辑和获取格式化输出。

总有可能写一个[PHP 扩展](http://docstore.mik.ua/orelly/webprog/php/ch14_01.htm)模块，底层语言是相同的 C，但这显然是一条艰难的道路。

# html - 链接中的中心文本作为块

> ID：12962229
> 
> 赞同：0
> 
> 时间：2012-10-18T19:26:43.950
> 
> 标签：html, css

我首先在图像中向您展示我的问题： ![在此处输入图像描述](../Images/d0301389b28e07373b2576a80b9b735e.png)

所以我想为滑块做一个设计，现在我想为下一个和上一个做按钮。图像中的黄色东西是带有 display: block 的链接。我需要做什么才能使文本（那些箭头是 unicode 字符）垂直和水平定位？考虑到我仍然希望整个黄色的东西可以作为链接点击。这是黄色的东西在 CSS 中的样子

```
 a.prev {
width: 40px;
height: 270px;
display:block;
float:left;
background: yellow;
-webkit-border-top-left-radius: 5px;
-webkit-border-bottom-left-radius: 55px;
-moz-border-radius-topleft: 5px;
-moz-border-radius-bottomleft: 55px;
border-top-left-radius: 5px;
border-bottom-left-radius: 45px; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:30:03.983

~~由于您有固定的高度，您可以使用上边距将箭头向下推到垂直中心~~。

`text-align:center`应该水平居中你的箭头。

设置`line-height`等于`height`元素的垂直居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:02:47.260

我知道已经接受了一个答案，但我只是提供了一种替代方法和一种适用于动态高度的方法。

我不确定箭头只是在 a`<a href=#">&larr;</a>`内还是在 span 内`<a href=#"><span>&larr;</span></a>`。当它们不在跨度内时，应使用 jQuery 添加。

静态宽度和高度：[FIDDLE](http://jsfiddle.net/N75qy/1)。

```
// Add span-wrappers around controls
$("a.controls").each(function() {
    $(this.firstChild).wrap("<span></span>");
});

// Position arrows vertically
$("a.controls > span").css("top", function() {
    var thisH = $(this).height(),
        parentH = $(this).parent().height(),
        thisTop = (parentH/2) - (thisH/2);
    return thisTop;
}); 
```

现在，当您使用动态/流体布局时，这将无法正常工作，因为顶部值只计算一次。每次调整窗口大小时，我们都需要重新计算该值。看看[这里](http://jsfiddle.net/N75qy/2/)。

```
// Keep aspect ratio of div
function slideHeight() {
    $("#slide-container").height(function() {
        var $this = $(this),
            w = $this.width() / 2.133;
        return w;
    });
}
slideHeight();

// Add span-wrappers around controls
$("a.controls").each(function() {
    $(this.firstChild).wrap("<span></span>");
});

// Position arrows vertically
function arrowPos() {
    $("a.controls > span").css("top", function() {
        var thisH = $(this).height(),
            parentH = $(this).parent().height(),
            thisTop = (parentH / 2) - (thisH / 2);
        return thisTop;
    });
}
arrowPos();

//Execute functions on resize
$(window).resize(function() {
    slideHeight();
    arrowPos();
});​ 
```

给你。:)

# asp.net - 使用内联标记初始化用户控件属性值

> ID：12962230
> 
> 赞同：3
> 
> 时间：2012-10-18T19:26:47.070
> 
> 标签：asp.net

我刚刚为作为用户控件的 jQuery UI 控件编写了一个 ASP .NET 包装器。它可以这样使用：

```
<ui:DatePicker ID="startDate" runat="server" LabelText="Start Date:" /> 
```

目前我在 Page_Load 处理程序中设置了这个控件的初始值，就像这样：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            startDate.Value = DateTime.Now.AddMonths(-2);
        }
    } 
```

但我认为将初始化代码移动到标记会很好。但是我不知道如何使用内联标记设置此控件的初始值，例如：

```
<ui:DatePicker ID="startDate" Value='<%= DateTime.Now.AddMonths(-2) %>' runat="server" LabelText="Start Date:" /> 
```

我有一个财产：

```
 public DateTime? Value 
    {
        get
        {
            DateTime result;
            if (DateTime.TryParse(dateBox.Text, out result))
            {
                return result;
            }
            return null;
        }
        set
        {
            dateBox.Text = value != null ? value.Value.ToShortDateString() : "";
        }
    } 
```

我尝试了不同的内联标签组合，但总是出现编译错误。有没有办法用内联标签来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:21:59.323

您需要将实际的日期表示形式放入属性中。原因是 Asp.Net 控件的某些属性也具有类似的行为，例如 TextBox 的可见属性不能设置为`<asp:TextBox runat="server" Visible='<%= true %>'></asp:TextBox>`

```
 <ui:DatePicker ID="startDate" Value='20/10/2012' runat="server" LabelText="Start Date:" /> 
```

或从您的 Page_Load 设置值

```
 protected void Page_Load(object sender, EventArgs e)
  {
     if(!Page.IsPostBack)
     {
      startDate.Value = DateTime.Now; //initialize DatePicker
     }
  } 
```

我找到了这些链接：

*   [为什么将 <%= %> 表达式作为服务器控件上的属性值会导致编译错误？](https://stackoverflow.com/questions/370201/why-will-expressions-as-property-values-on-a-server-controls-lead-to-a-co)
*   [在 Framework 3.5 中使用服务器标记 <%= %> 设置 Visible 属性](https://stackoverflow.com/questions/9595851/set-visible-property-with-server-tag-in-framework-3-5)

# c# - 转换 XPS 文档

> ID：12962232
> 
> 赞同：2
> 
> 时间：2012-10-18T19:26:53.693
> 
> 标签：c#, png, converter, xps

长期潜伏者第一次在这里海报，

我正在尝试在 C# 中设置一个位于服务器上的 XPS 文件处理程序，每次添加或更新文件时，处理程序都会获取文件，将其转换为图像格式（很可能是 png），并且将图像存储在要由整个项目显示的文件中。我正在考虑使用[这个](http://sourceforge.net/projects/xps2img/)，我只需要弄清楚如何将它合并到程序中。我完全愿意接受其他建议，所以如果有人有更好的想法，请随时提供帮助，或者提出更多问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:47:41.353

这是一篇关于这样做的博客文章，[http://craigwatson1962.com/2010/11/26/convert-an-xps-to-jpeg-png-tiff-or-bmp-in-a4-pages/](http://craigwatson1962.com/2010/11/26/convert-an-xps-to-jpeg-png-tiff-or-bmp-in-a4-pages/)和这里在msdn [http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3ad78d46-7fa6-4697-82f9-c81d152b9a53/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/3ad78d46-7fa6-4697-82f9-c81d152b9a53/)上讨论了几种方法具体问题，我会尽力提供帮助。

# vim - Ubuntu 12.10 上的 Vim 7.3 在任何地方都没有“ftplugin”目录

> ID：12962233
> 
> 赞同：0
> 
> 时间：2012-10-18T19:26:55.717
> 
> 标签：vim, ubuntu-12.04, ftplugin

Ubuntu 12.10 上的 Vim 7.3

我最近从 Ubuntu 软件中心安装了 vim。到目前为止，我已经安装了以下 vim 插件：NERDTree、rails 和 ack。

我正在学习关于 python 的课程和关于 Ruby on Rails 的另一门课程。我很惊讶 vim 不能识别缩进的语言。检查这个论坛上的各种问题和答案，以及检查 vim 帮助，我看到 $VIMRUNTIME 目录中应该有一个名为 'ftplugin' 的目录。我的 $VIMRUNTIME 与 $HOME 相同，即 ~/，但我的主目录中没有 'ftplugin'。~/.vim 中也没有类似的东西。这是否意味着我没有任何文件类型插件？

如果我不这样做，我在哪里可以得到通常的设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:13:44.540

***编辑***

明确一点：安装后，Vim 不会对你的主目录做任何事情。该`~/.vim`目录**和任何子目录**将由用户创建：它是*您*放置配置的地方，因此*您**负责*。

 ****结束编辑***

无论您使用什么操作系统，您都必须自己创建这些目录。在类 UNIX 系统（Linux、Mac OS X ……）上，你所有的东西都应该进入`~/.vim`：

```
$ cd
$ mkdir .vim
$ cd .vim 
```

一些插件可能需要放在特定的子目录中：

```
~/.vim/autoload
~/.vim/plugin
etc. 
```

你可以：

*   就像您创建的那样创建这些目录`~/.vim`并手动放置所有文件
*   `$ unzip`插件就在那里`~/.vim`，为您创建了必要的目录
*   使用一些插件管理器，例如 Pathogen 或 VAM 或 Vundle 和/或 VCS……</li>

我建议你慢慢开始。只需手动安装所有内容：它将帮助您对整个事情感到更加舒适。

无论如何，既然你已经安装了一堆（无用的 IMO，除了 rails）插件，你可能已经知道所有这些了。

Vim 已经有必要的 ftplugins，你只需要告诉 Vim 默认“激活”它们。将这两行添加到您的`~/.vimrc`（如果您还没有创建该文件）：

```
filetype plugin indent on
syntax on 
```*

# zooming - 如何自动缩放/平移矢量图层中的所有要素？

> ID：12962236
> 
> 赞同：2
> 
> 时间：2012-10-18T19:27:19.833
> 
> 标签：zooming, openlayers, pan

使用 Openlayers，我想在显示矢量图层中所有特征的位置初始化地图。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T19:27:19.833

这有点尖锐/粗糙

```
map.zoomToExtent(yourVectorLayer.getDataExtent()); 
```

这可能更顺畅

```
map.panTo(yourVectorLayer.getDataExtent().getCenterLonLat());
map.zoomTo(yourVectorLayer.getDataExtent().getZoomExtent()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-30T15:56:05.867

对于 OpenLayers `5.3.3`，我使用以下代码片段：

```
const extent = vectorLayer.getSource().getExtent();
map.getView().fit(extent, map.getSize()); 
```

# c# - 使用 C# 编辑二进制文件中的文本

> ID：12962239
> 
> 赞同：3
> 
> 时间：2012-10-18T19:27:26.430
> 
> 标签：c#

我有一个二进制文件（即，它包含值在 0x00 和 0xFF 之间的字节）。我想使用 Regex 查找和编辑文件中的 ASCII 字符串（例如，“Hello World”）。然后我需要写出编辑后的文件，使其与旧文件完全相同，但已执行了我的 ASCII 编辑。如何？

```
 byte[] inbytes = File.ReadAllBytes(wfile);
        string instring = utf8.GetString(inbytes);
        // use Regex to find/replace some text within instring
        byte[] outbytes = utf8.GetBytes(instring);
        File.WriteAllBytes(outfile, outbytes); 
```

即使我不做任何编辑，输出文件也不同于输入文件。发生了什么事，我该怎么做？

* * *

编辑：好的，我正在尝试使用提供的建议，但无法理解如何实际实施它。这是我的示例代码：

```
 string infile = @"C:\temp\in.dat";
        string outfile = @"C:\temp\out.dat";
        Regex re = new Regex(@"H[a-z]+ W[a-z]+");  // looking for "Hello World"
        byte[] inbytes = File.ReadAllBytes(infile);
        string instring = new SoapHexBinary(inbytes).ToString();
        Match match = re.Match(instring);
        if (match.Success)
        {
            // do work on 'instring'
        }
        File.WriteAllBytes(outfile, SoapHexBinary.Parse(instring).Value); 
```

显然，我知道我不会那样做匹配，但如果我将我的正则表达式转换为字符串（或其他），那么我不能使用匹配等。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:04:34.213

并非所有二进制字符串都是有效的 UTF-8 字符串。当您尝试将二进制文件解释为 UTF-8 字符串时，无法如此解释的字节可能会被破坏。基本上，如果整个文件不是编码文本，那么将其解释为编码文本将不会产生合理的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:12:27.427

玩二进制文件的另一种方法是：将其转换为十六进制字符串，对其进行处理（可以在此处使用正则表达式），然后将其保存回来

```
byte[] buf = File.ReadAllBytes(file);
var str = new SoapHexBinary(buf).ToString();

//str=89504E470D0A1A0A0000000D49484452000000C8000000C808030000009A865EAC00000300504C544......
//Do your work

File.WriteAllBytes(file,SoapHexBinary.Parse(str).Value); 
```

PS：命名空间：`System.Runtime.Remoting.Metadata.W3cXsd2001.SoapHexBinary`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T16:52:41.873

我知道了！查看代码：

```
 string infile = @"C:\temp\in.dat";
        string outfile = @"C:\temp\out.dat";
        Regex re = new Regex(@"H[a-z]+ W[a-z]+");   // looking for "Hello World"
        string repl =  @"Hi there";

        Encoding ascii = Encoding.ASCII;
        byte[] inbytes = File.ReadAllBytes(infile);
        string instr = ascii.GetString(inbytes);
        Match match = re.Match(instr);
        int beg = 0;
        bool replaced = false;
        List<byte> newbytes = new List<byte>();
        while (match.Success)
        {
            replaced = true;
            for (int i = beg; i < match.Index; i++)
                newbytes.Add(inbytes[i]);
            foreach (char c in repl)
                newbytes.Add(Convert.ToByte(c));
            Match nmatch = match.NextMatch();
            int end = (nmatch.Success) ? nmatch.Index : inbytes.Length;
            for (int i = match.Index + match.Length; i < end; i++)
                newbytes.Add(inbytes[i]);
            beg = end;
            match = nmatch;
        }
        if (replaced)
        {
            var newarr = newbytes.ToArray();
            File.WriteAllBytes(outfile, newarr);
        }
        else
        {
            File.WriteAllBytes(outfile, inbytes);
        } 
```

# excel - 修复 MS Excel 日期时间格式

> ID：12962240
> 
> 赞同：1
> 
> 时间：2012-10-18T19:27:29.287
> 
> 标签：excel, csv

报告服务生成一个 csv 文件，并且某些列（奇怪的是）具有混合的日期/时间格式，一些行包含表示为 m/d/y 的日期时间，另一些则为 dmy

应用 =TYPE() 时，它将返回 1 或 2（Excel 将识别文本或数字（Excel 时间戳））

如何将任何类型的错误日期时间格式转换为可以使用的“正常”格式并确保数据的一致性？

我现在正在考虑两种解决方案：

*   我应该以某种方式使用现有的 excel 函数处理奇数数据
*   我应该要求从一开始就正确生成报告，并首先避免这种麻烦

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:54:42.183

当然，您的第二个选择是中长期的方式。但是如果您现在需要一个解决方案，并且如果您可以访问支持 Perl 兼容正则表达式的文本编辑器（如 Notepad++、UltraEdit、EditPad Pro 等），则可以使用以下正则表达式：

```
(^|,)([0-9]+)/([0-9]+)/([0-9]+)(?=,|$) 
```

搜索格式中的所有日期`m/d/y`，用逗号括起来（或在行的开头/结尾）。

将其替换为

```
\1\3.\2.\4 
```

你会得到格式的日期`d.m.y`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:10:31.610

如果您无法更改数据，那么您可能不得不求助于翻译日期的另一列：（假设您要更改的日期在 A1 中）

```
=IF(ISERR(DATEVALUE(A1)),DATE(VALUE(RIGHT(A1,LEN(A1)-FIND(".",A1,4))),VALUE(MID(A1,FIND(".",A1)+1,2)),VALUE(LEFT(A1,FIND(".",A1)-1))),DATEVALUE(A1)) 
```

它测试是否可以将文本读取为日期，如果失败，则将字符串切分，并将其转换为日期，否则将尝试直接读取日期。无论哪种方式，它都应该将其转换为您可以使用的日期

# facebook - 黑莓的 Facebook oAuth 实现

> ID：12962248
> 
> 赞同：0
> 
> 时间：2012-10-18T19:27:48.823
> 
> 标签：facebook, blackberry, oauth-2.0, facebook-oauth

我正在开发一个黑莓本机应用程序，它使用 Facebook 和 twitter 消息共享等功能。经过仔细研究，我发现我可以使用 Facebook SDK 来与 Facebook 服务集成。

我已经从这个链接下载了 SDK [https://sourceforge.net/projects/facebook-bb-sdk/](https://sourceforge.net/projects/facebook-bb-sdk/)

我已按照与 SDK 捆绑在一起的 README pdf 文件中说明的步骤进行操作。我已按照以下步骤

**Step1：**获取 Facebook 门面实例

```
String NEXT_URL = "http://www.facebook.com/connect/login_success.html"; 
String APPLICATION_ID = "15355516805e272"; // my app id
String APPLICATION_SECRET = "354f91a79c8fe5a8de9d65b55ef9aada"; // my app secret key 
String[] PERMISSIONS = Facebook.Permissions.USER_DATA_PERMISSIONS; 

ApplicationSettings as = new ApplicationSettings(NEXT_URL, APPLICATION_ID, 
APPLICATION_SECRET, PERMISSIONS); 
Facebook fb = Facebook.getInstance(as); 
```

**Step2：**检索当前用户

```
fb.getCurrentUser(new BasicAsyncCallback() { 

        public void onComplete(com.blackberry.facebook.inf.Object[] 
objects, final java.lang.Object state) { 
          user = (User) objects[0]; 
          // do whatever you want 
        } 

        public void onException(final Exception e, final 
java.lang.Object state) { 
          e.printStackTrace(); 
          // do whatever you want 
        } 

}); 
```

**Step3：**发布用户状态。

```
user.publishStatus("Hello world!"); 
```

但是，它给出了 IOException 并且没有任何反应。我相信很多人之前都做过类似的事情。我正在寻找一个解释与 Facebook 服务集成的逐步过程的来源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:50:29.137

我最近在我的基于 Blackberry 7 的应用程序中实现了**Facebook 和 Twitter**集成。我发现了什么，Facebook API 有错误，甚至是 Beta 版。请尝试以下 API：[FacebookAPIMe](http://j2megroup.blogspot.in/2011/06/facebook-api-me-10-tutorial.html)和[TwitterAPIMe](http://kenai.com/projects/twitterapime/pages/Home#Functionalities)。如果您在实现此 API 时遇到任何问题，我会为您提供帮助。两者都易于使用且易于与您的应用程序集成。两者都包含示例应用程序，因此您还可以查看该 API 的演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:44:11.937

这段代码对我有用。它显示了如何获取当前用户和发布状态

```
public class FacebookHelper {

private final String NEXT_URL = "http://www.facebook.com/connect/login_success.html";
private final String APPLICATION_ID = "123456789";
private final String APPLICATION_SECRET = "123456789123456789123456789123456789";
String[] PERMISSIONS = Facebook.Permissions.PUBLISHING_PERMISSIONS;
User user;
Facebook fb;
ApplicationSettings as = new ApplicationSettings(NEXT_URL, APPLICATION_ID,
        APPLICATION_SECRET, PERMISSIONS);

public  FacebookHelper() {
    fb = Facebook.getInstance(as);
}

public void publishContent(final String content) {
    try {
        fb.getCurrentUser(new BasicAsyncCallback() {
            public void onComplete(
                    com.blackberry.facebook.inf.Object[] objects,
                    final java.lang.Object state) {
                user = (User) objects[0];
                user.publishStatus(content);  
            }

            public void onException(final Exception e,
                    final java.lang.Object state) { 
                System.out.println("Exception inside BasicAsyncCallback " + e.toString()
                        + " , " + e.getMessage());
            }
        });
    } catch (Exception e) {
        System.out.println("Exception in publishContent " + e.toString() + " , "
                + e.getMessage());
    }
}
} 
```

# php - Fancybox 图像在新窗口/标签中打开

> ID：12962249
> 
> 赞同：1
> 
> 时间：2012-10-18T19:27:49.223
> 
> 标签：php, javascript, fancybox

我一直在尝试使用 Fancybox 作为灯箱替代品。但是，我似乎无法让它工作。我的图像总是在新选项卡/窗口而不是灯箱中打开。我已经用我自己的代码和原始代码的实现对其进行了测试。

自己的代码： http: [//www.demoeial.be/devversion/artikels/10369/Studentenraad-van-Louvain-la-Neuve-sluit-zich-weer-aan-bij-de-FEF.dhtml](http://www.demoeial.be/devversion/artikels/10369/Studentenraad-van-Louvain-la-Neuve-sluit-zich-weer-aan-bij-de-FEF.dhtml)

原代码： http: [//www.demoeial.be/devversion/fancybox/test.php](http://www.demoeial.be/devversion/fancybox/test.php)

有任何想法吗？我尝试添加/删除可能会干扰的代码，但我无法让它工作。

代码

**头**：

```
<script type="text/javascript" src="http://www.demoeial.be/devversion/js/jquery.min.js"></script>
<script type="text/javascript" src="http://www.demoeial.be/devversion/js/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="http://www.demoeial.be/devversion/js/fancybox/jquery.fancybox.js?v=2.1.1"></script>
<link rel="stylesheet" type="text/css" href="http://www.demoeial.be/devversion/css/fancybox/jquery.fancybox.css?v=2.1.1" media="screen" />

<script type="text/javascript">
    $(document).ready(function() {
        /*

        /*
         *  Different effects
         */

        // Change title type, overlay closing speed
        $(".fancybox").fancybox();
       }
</script> 
```

**身体**：

```
<div id='article'><div id='articletitle'>Studentenraad van Louvain-la-Neuve sluit zich weer aan bij de FEF</div>
                  <div class='publication_date'>Artikel gepubliceerd op 18 Oktober 2012 om 12:57</div><div id='sidebarpics'><a class='fancybox' href='http://media.demoeial.be/photos/2012/10/10369_509_xl.jpg' title='' rel='fancybox' ><img src='http://media.demoeial.be/photos/2012/10/10369_509_side.jpg' width='280' alt='' /></a><div class='imagedescription_side'></div></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:34:51.927

在您的 HTML 页面的第 19 行，您打开一个

```
$(document).ready(function() { 
```

但你不关闭它

你应该有这样的代码：

```
$(document).ready(function() {
     // Change title type, overlay closing speed
     $(".fancybox").fancybox();
}); 
```

You would have seen the error in the firebug console for example.

# android - 将Android项目导入Eclipse时如何解决问题我得到包名而不是项目名？

> ID：12962253
> 
> 赞同：0
> 
> 时间：2012-10-18T19:28:09.970
> 
> 标签：android, eclipse

有时，当我尝试在 Eclipse (JUNO) 中从现有源导入 Android 项目时，我会进入列表而不是项目名称 - 包名称。例如，改为名为`MyProg`i get的项目`com.demo.agent.datasrc.MyMainClass`。我该如何解决？

我试图重命名文件夹名称并`.project`归档它的作品，但它的解决方法很混乱。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:13:18.430

据文辉说：“作为现有项目导入到工作区而不是android项目。之后你可能需要设置android构建目标”

# iphone - 接口方向问题

> ID：12962260
> 
> 赞同：0
> 
> 时间：2012-10-18T19:28:31.363
> 
> 标签：iphone, ios, xcode, webview, orientation

我有一个小问题。我的应用程序中有一个 TabBarController，然后标签栏中的元素之一是导航控制器。好吧，在我的导航控制器中，我想使用网络视图播放视频。我的问题是：有必要更改我的 web 视图的界面方向。当我放一点代码，在方法 shouldAutorotateToInterfaceOrientation 上返回 YES （仅适用于我的 web 视图的类）时，视频仍然没有改变界面。我使用模态视图控制器来运行我的视频，但我们可以看到同样的问题。我不知道如何修复它，因为我使用了我所有的 ios 知识。有什么东西可以放在我的模态视图控制器中来改变我的界面方向吗？我的应用程序具有这种结构：

```
TabBarController->NavigationController ->VIew A->View B(Inside the View B, a ModalViewController) 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:34:53.650

如果我正确理解你的问题，你想强制设备的方向。这可以通过修改状态栏的方向来完成：

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:NO]; 
```

为此，您的应用程序应设置为支持自动旋转（从`shouldAutorotateToInterfaceOrientation`所有方向返回 YES）；由于您使用的是导航控制器，因此它的根控制器也应该从`shouldAutorotateToInterfaceOrientation`.

您可以在需要切换方向时调用上述方法，即在您要播放视频的那一刻（可能是在您加载网络视图时）。

# javascript - 为什么 i+=4？使用 HTML5 画布以黑白方式显示图像

> ID：12962267
> 
> 赞同：0
> 
> 时间：2012-10-18T19:29:10.660
> 
> 标签：javascript

在[这篇文章](http://www.htmlgoodies.com/html5/javascript/display-images-in-black-and-white-using-the-html5-canvas.html#fbid=UmLFhmgP6e9)中，为什么在循环中`i`增加了 4 而不是 1？。我试过changong `i+=4`to，`i++`但它不能正常工作。你能告诉我背后的原因是什么吗？

```
function grayScale(context, canvas) {
    var imgData = context.getImageData(0, 0, canvas.width, canvas.height);
        var pixels  = imgData.data;
        for (var i = 0, n = pixels.length; i < n; i += 4) {
        var grayscale = pixels[i] * .3 + pixels[i+1] * .59 + pixels[i+2] * .11;
        pixels[i  ] = grayscale;        // red
        pixels[i+1] = grayscale;        // green
        pixels[i+2] = grayscale;        // blue
        //pixels[i+3]              is alpha
    }
    //redraw the image in black & white
    context.putImageData(imgData, 0, 0);
  }
  //add the function call in the imageObj.onload
  imageObj.onload = function(){
      context.drawImage(imageObj, destX, destY);
      grayScale(context, canvas);
  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:32:25.880

在我看来，i=red、i+1=green、i+2=blue、i+3=alpha。所以 i+4 会再次变红。因此 for 循环在数组中迭代四次而不是一次以区分单独的像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:34:39.830

因为在 for 循环中发生的事情是修改数组中的四个点，它们代表组成单个像素的红色、绿色、蓝色和 alpha 通道。for 循环递增 4 以跳转到下一个像素的下一组红色、绿色、蓝色和 alpha 通道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T19:35:13.590

看看实际的代码，他们正在使用`pixels[i]`but `pixels[i+1]`，`pixels[i+2]`并且注释掉了`pixels[i+3]`。一次是四个值，而不仅仅是一个。

在图像像素的这种情况下，实际上非常常见的是增加四（如果数据中完全不存在 alpha，则增加三），因为顺序以 RGBA 形式出现。

如果您查看评论，他们甚至会指出这个事实（去掉了不必要的部分）：

```
pixels[i  ]                     // red
pixels[i+1]                     // green
pixels[i+2]                     // blue
pixels[i+3]                     // alpha 
```

如果您考虑数组中的布局，这很有意义：

```
Array:       [r0,g0,b0,a0,r1,g1,b1,a1,r2,...etc]
Positions:     0, 1, 2, 3, 4, 5, 6, 7, 8 
```

如果我们要始终首先获得红色，我们需要从`0`到`4`到。`8`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T19:33:23.293

循环的每次迭代都对集合中的四个项目的序列进行操作，从 的当前值开始`i`。

因此下一个序列的开始是`i + 4`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T19:38:43.117

ImageData 对象基本上是一个像素数组。

在 CSS 中，当您设置时，`color : rgba( 255, 40, 30, 1 );`您将设置红色、绿色、蓝色和 alpha（透明度）。这就是每个像素的顺序。

但是所有像素都存储为四种颜色，在一条直线上背靠背。

所以一个 2x2 的黑白图像看起来像这样：

```
var checkerboard = [ 0, 0, 0, 1, 255, 255, 255, 1, 255, 255, 255, 1, 0, 0, 0, 1 ]; 
```

这是使左上角像素变为黑色的 3 个 rgb（1 个表示 100% 可见），然后是右上角的白色，然后是左下角的白色，然后是右下角的黑色。

因此，当您处理修改单个像素的代码时，您将包括构成 1 个像素的所有颜色/alpha 通道。

# android - 从 SQLite 动态创建微调器并设置其值

> ID：12962268
> 
> 赞同：2
> 
> 时间：2012-10-18T19:29:27.207
> 
> 标签：android, sqlite, dynamic, spinner

**在代码的“更新”下找到我的问题检查**

好的，我在将 Sqlite 中的正确值加载到我的 Spinner 时遇到问题。这是我的应用程序的构建方式

我的 onCreate() 通过以下方式设置了一个名为 spinTypes 的微调器：

```
public class MyClass extends Activity{
 // local members . . . 
     .
     .
     .
 //spinner 
 private Spinner spinTypes, spinNames = null;

 // string array decl.
 private String [] types, names1, names2, names3 = null;

 // array adapters for string arrays
 private ArrayAdapter<String> typesAdapter, names1Adapter,
                             names2Adapter, names3Adapter;

 // create a Dbhelper object to access the db
 private DbHelper mdbHelper = null;

// on create
 @Override
 public void onCreate(Bundle savedIstanceState){
  // call to super class
  // set my content view
  // instantiate all members 

  // Dbhelper object to access the db
  mdbHelper = new DbHelper(getBaseContext());

  // spinners
  spinTypes = (Spinner) findViewById(R.id.spin_types);
  spinNames = (Spinner) findViewById(R.id.spin_names);

 // get string arrays from resources and create a ArrayAdapter<string>
 types = getResources().getStringArray(R.array.types);

 typesAdapter = new ArrayAdapter<String>(getBaseContext(),
                                        android.R.layout.simple_spinner_item, types);
 typesAdapter. setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

 // want to create a dynamic spinner based on these arrays
 names1 = getResources().getStringArray(R.array.names_1); 
 names2 = getResources().getStringArray(R.array.names_2);
 names3 = getResources().getStringArray(R.array.names_3);

 // do this for all names++ arrays
 names1Adapter = new ArrayAdapter<String>(getBaseContext(),
                                        android.R.layout.simple_spinner_item, names1);
 names1Adapter. setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

 // etc . . . for the other two

 // set the adapter for the types spinner
 spinTypes.setAdapter(typesAdapter);

} 
```

我有一个创建方法可以将我的所有数据插入到工作正常的数据库中，我的问题是当我想尝试填充微调器以编辑条目时。

该应用程序是这样工作的：您按下添加按钮以弹出一个对话框，该对话框在调用视图中创建一个列表项。我使用两个微调器来创建它，一个用于根据类型动态填充第二个名称微调器的类型。

当我访问数据库对象时，我从微调器返回字符串，但由于某种原因，当我创建 if 语句检查字符串在数组中的位置时，第二个微调器每次都将位置设置为 0。

包括我上面提到的if语句的方法是这样的：

```
public void populate(){
  mdbHelper.open();
  // if there is an item create a cursor rowId != null
  Cursor mTypes = mdbHelper.fetchItem(rowId);
   if(mTypes.moveToFirst()){
   String tType = mTypes.getString(mTypes.getColumnIndexOrThrow(DbAdapter.KEY_TYPE));
   String tName = mTypes.getString(mTypes.getColumnIndexOrThrow(DbAdapter.KEY_NAME));

  int t = spinTypes.getPosition(tType);
  spinTypes.setSelection(t);

  // ** this does not seem to do the job i want it to**
  if(t == 0){
    spinNames.setAdapter(names1Adapter); // set the adapter based on t value
    int n1 = names1Adapter.getPosition(tName); // use name return from db to get pos
    spinNames.setSelection(n1);            // set the position
  }else if(t ==1){
    spinNames.setAdapter(names2Adapter);
    int n2 = names1Adapter.getPosition(tName);
    spinNames.setSelection(n2);
  }else{
    spinNames.setAdapter(names3Adapter);
    int n3 = names3Adapter.getPosition(tName);
    spinNames.setSelection(n3);
  }

}// end populate

} // end class 
```

微调器都可以工作，但它们并没有以我返回的 tName 值结束。

有人能帮忙吗？

** 我正在记录从数据库返回的名称并使用它在我的错误中查找项目的索引并返回正确的值，但微调器仍默认为 0**

任何人都知道我的错误可能是什么？请

**更新（下面发布的最终代码）** 我做了很多更改以使其正常工作，为了了解我做了什么，您应该阅读整篇文章，这样您就不会错过任何内容！

之前添加了一个变量`onCreate()` `private int spinNamePos;`

在我的最后一行之后添加了这一行`onCreate()`

```
// add a listener to the spinner
spinTypes.setOnItemSelectedListener(TypesListener); 
```

并创建了这个监听器

```
OnItemSelectedListener TypesListener = new OnItemSelectedListener(){
  public void onItemSelected(AdapterView<?> parent, View view, int pos, long id){
    // use the position of this spinner to set the second spinner
     switch(pos){
     case 0 :
        spinNames.setAdapter(names1Adapter);
        break;
      //etc. .  for the other two
     case 1:
        // etc
       break;
     }
     case 2:
        // etc
       break;
     }
     // created an int for the position of the second spinner before calling onCreate()
     // and use it to set this spinners position
     spinNames.setSelection(spinNamePos); 
 // this value is grabbed in onSavedInstanceState() and used to set the pos when onRestoreInstanceState() is called to handle orientation changes and activity paused
  }
 }; 
```

然后我改变了我`onPopulate()`的工作，所以调用一个新方法来设置第二个微调器的位置

```
 public void populate(){
  mdbHelper.open();
  // if there is an item create a cursor rowId != null
  Cursor mTypes = mdbHelper.fetchItem(rowId);
   if(mTypes.moveToFirst()){
   String tType = mTypes.getString(mTypes.getColumnIndexOrThrow(DbAdapter.KEY_TYPE));
   String tName = mTypes.getString(mTypes.getColumnIndexOrThrow(DbAdapter.KEY_NAME));

  int t = spinTypes.getPosition(tType);
  spinTypes.setSelection(t);

  // call to the new method
  spinNamePos = setSpinNamesPos( t, tName);
  // set the position
  spinNames.setSelection(spinNamePos)

}// end populate

// new method to set the position when i want to update/change the list item

private int setSpinNamesPos(int m, String name){
 int pos = 0;
 switch(m){
  case 0:
    pos = names1Adapter.getPosition(name);
    break;
  case 1:
    pos = names2Adapter.getPosition(name);
    break;
   case 2:
    pos = names3Adapter.getPosition(name);
    break;
  }
 return pos;
} 
```

**很高兴看到这个工作鼓励任何问题或评论**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:30:51.963

好的，几周后我似乎找到了自己的答案！我遇到的问题是，我不知道`OnItemSelectedListener()`每次 my`adapter`设置为我的第一个时都会调用 my `spinner`。

所以现在意识到这一点，我设置了第一个然后用它`spinner`来设置我的第二个。（即基于我将我的第二个设置为 3 个选项中的 1 个。）`OnItemSelectedListener()``spinner id``spinner` `adapter``id``adapter``spinner`

设置好之后`adapter`，我使用`value`从 my 返回的`cursor`来查找 this 中的字符串，`adapter`并将 the 设置`spinner`为my`position`中的 the 。`string``array`

现在一切都很好，我将把上面的最终代码放在**更新**标题下。感谢所有帮助。

# vb.net - 将组合框绑定到对象数据源

> ID：12962271
> 
> 赞同：0
> 
> 时间：2012-10-18T19:29:45.963
> 
> 标签：vb.net, data-binding

我有一个绑定到对象数据源的表单。它有一个文本框和一个组合框。我为主对象设置了一个绑定源，为组合框设置了一个绑定源。当我运行表单时，文本框已正确绑定，组合框中的值列表已正确绑定，但组合框的 ValueMember 无法正常工作。

组合框显示正确的列表，但它选择的索引是 0 而不是它应该是 2。当我更改文本框中的值时，它的绑定对象的 Property.Set 方法被正确调用，但相同的 Property.Set 方法不要求组合框。

我知道我可以破解表单中的 OnSelectedIndex 更改方法，但我想知道我在使用 Bindings 时做错了什么。

这是表格上的代码：

```
Public Class Form1
Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim NameValueBindingSource1 As New BindingSource()
    Dim WorkOrderBindingSource1 As New BindingSource

    'Create main object to bind to
    Dim wo As New WorkOrder
    wo.WOIndex = "2012-0111"
    wo.WorkOrderType = 3

    'Create list object for combo box
    Dim NameValues As BindingList(Of NameValue)
    NameValues = FillNameValueList()

    'Bind Text Box to Binding Source
    WorkOrderBindingSource1.DataSource = wo
    WOIndexTextBox1.DataBindings.Add("Text", WorkOrderBindingSource1, "WOIndex")

    'Bind Combo Box to Binding Source
    NameValueBindingSource1.DataSource = NameValues
    WorkOrderTypeCombo.DataSource = NameValueBindingSource1
    WorkOrderTypeCombo.DisplayMember = "Value"
    WorkOrderTypeCombo.ValueMember = "Code"

End Sub

Function FillNameValueList() As BindingList(Of NameValue)
    Dim bl As New BindingList(Of NameValue)
    Dim nv As NameValue

    nv = New NameValue
    bl.Add(New NameValue("Short", 0))
    bl.Add(New NameValue("Middle", 1))
    bl.Add(New NameValue("Long", 2))
    bl.Add(New NameValue("Very Long", 3))

    Return bl
End Function
End Class 
```

这是主要对象的代码 - “WorkOrder”

```
Imports System.ComponentModel
Public Class WorkOrder
    Implements IEditableObject
    Implements INotifyPropertyChanged

    Private mWOIndex As String
    Private mWorkOrderType As Integer

    Public Event PropertyChanged(sender As Object, e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

    Public Property WOIndex As String
        Get
            Return mWOIndex
        End Get
        Set(value As String)
            mWOIndex = value
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("WOIndex"))
        End Set
    End Property
    Public Property WorkOrderType As Integer
        Get
            Return mWorkOrderType
        End Get
        Set(value As Integer)
            mWorkOrderType = value
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("WorkOrderType"))
        End Set
    End Property
    Public Sub BeginEdit() Implements System.ComponentModel.IEditableObject.BeginEdit
    End Sub
    Public Sub CancelEdit() Implements System.ComponentModel.IEditableObject.CancelEdit
    End Sub
    Public Sub EndEdit() Implements System.ComponentModel.IEditableObject.EndEdit
    End Sub
End Class 
```

这是组合框中使用的对象的代码

```
Imports System.ComponentModel

Public Class NameValue
    Implements IEditableObject
    Implements INotifyPropertyChanged

    Private mValue As String
    Private mCode As Integer

    Public Event PropertyChanged(sender As Object, e As System.ComponentModel.PropertyChangedEventArgs) Implements System.ComponentModel.INotifyPropertyChanged.PropertyChanged

    Public Property Code As Integer
        Get
            Return mCode
        End Get
        Set(value As Integer)
            mCode = value
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("Code"))
        End Set
    End Property
    Public Property Value As String
        Get
            Return mValue
        End Get
        Set(value As String)
            mValue = value
            RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs("Value"))
        End Set
    End Property

    Public Sub BeginEdit() Implements System.ComponentModel.IEditableObject.BeginEdit
    End Sub
    Public Sub CancelEdit() Implements System.ComponentModel.IEditableObject.CancelEdit
    End Sub
    Public Sub EndEdit() Implements System.ComponentModel.IEditableObject.EndEdit
    End Sub
    Public Sub New(InitValue As String, InitCode As Integer)
        Value = InitValue
        Code = InitCode
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:48:17.927

在您的代码中，您只是将 DataSource 分配给 ComboBox，但没有为它建立任何 DataBinding。

你需要这样的一行（在这里使用 C#）：

```
WorkOrderTypeCombo.DataBindings.Add(new System.Windows.Forms.Binding("SelectedValue", WorkOrderBindingSource1, "WorkOrderType", true)); 
```

希望这可以帮助

# php - 在PHP中将PDF转换为不同大小的JPG

> ID：12962275
> 
> 赞同：1
> 
> 时间：2012-10-18T19:30:13.377
> 
> 标签：php, pdf, jpeg, imagick

我想将 PDF 页面转换为 JPEG，但我希望将每页转换为 3 张图像。

1.  第一个是高质量

2.  其次是中等质量

3.  第三是拇指图像

我使用此代码，但我不知道如何制作 3 张图片：

```
$im = new Imagick();
$im->setResolution(100,100);
$im->readImage("files/xx.pdf");
$im->setImageFormat('jpeg');
$im->writeImages("files/oman/oman.jpg",false); 
```

此代码只会将每个 PDF 页面转换为一个图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:37:59.333

将页面的第一个高分辨率版本创建为 jpg 后，只需使用 php gd 通过读取生成的 jpg 并将其缩小并导出另一个 jpg 来调整其大小。 [这](http://php.net/manual/en/function.imagecopyresampled.php)是您想要的功能，该页面显示了如何调整图像大小的简单示例。

~~更新：[这](http://www.sitepoint.com/image-resizing-php/)显示了一个关于如何使用 php 调整大小的非常简单的教程~~

更新：对不起，看上面的 php.net 链接，有很多如何调整图像大小的例子，[这里是一个简单](http://www.php.net/manual/en/function.imagecopyresampled.php#98560)的例子。您需要做的就是获取返回的内容并使用[imagepng()](http://us1.php.net/manual/en/function.imagepng.php)将文件保存在本地。（保存gif/jpg也有类似的功能）

# selenium - Ivy 使用 HttpClient 3.1 和 4.x 解析

> ID：12962277
> 
> 赞同：1
> 
> 时间：2012-10-18T19:30:29.453
> 
> 标签：selenium, dependencies, httpclient, ivy

我有一些对 commons-httpclient 3.1 具有传递依赖的遗留项目。现在我正在尝试对其进行 Selenium 2 WebDrive 测试。据我了解，Selenium 2 需要 Httpclient 4.+。尽管两者都将被解析并放入类路径中，但 IDE 会抱怨

```
java.lang.NoSuchMethodError: org.apache.http.params.HttpConnectionParams.setSoReuseaddr(Lorg/apache/http/params/HttpParams;Z)V 
```

因为 Httpclient 3.1 中的 HttpConnectionParams 没有该方法。

我搜索了互联网，发现了这个[http://blog.teamextension.com/migrating-from-httpclient-3-1-to-4-0-34](http://blog.teamextension.com/migrating-from-httpclient-3-1-to-4-0-34)和许多其他帖子。大多数人手动替换jar并修改源代码中的导入路径。

由于我不允许编辑现有的源代码。我想知道是否有配置 Ivy.xml 以强制退出旧依赖项，或者使新添加的 Selenium 问题使用新的 Httpclient/core/mime 等。我试图排除 commons-httpclient 模块范围，但不知何故它仍然在类路径中。

希望我清楚地解释这个问题。我将不胜感激任何帮助。

# java - 我可以安全地将完全随机的字符串（任何 16 位值）存储到 SQLiteDB 中吗？

> ID：12962278
> 
> 赞同：5
> 
> 时间：2012-10-18T19:30:30.433
> 
> 标签：java, android, sqlite, android-sqlite

我有一个使用自定义密码创建的字符串，它可以具有任何`char`值（0 到 0xFFFF）。该字符串是通过获取输入明文并将每个字符旋转一个伪随机值来创建的，因此我无法控制输出字符可能是什么。

我可以安全地将其存储和检索到 SQLiteDatabase`TEXT`字段中而没有任何问题吗？

我认为 Java 使用 UTF-16，所以我有点害怕像`NULL`, `END OF TEXT`, `ESCAPE`, `'`,`"`等这样的字符`0xfeff / 0xfffe (BOM)`会随机出现在我的字符串中，而且我不确定 SQLite 将如何在内部存储它。如果它使用任何基于文本的标记来确定字段的开始和结束，恐怕这会失败。

理想情况下，我想取回我输入的完全相同的字符序列，这样我就可以通过反向密码来输入它。

我将使用 的托管`insert(ContentValues)`方法`SqLiteDatabase`，所以我认为这将解决有关转义输入字符串的任何问题，但我仍然不太相信这可以工作。

这是一个安全的操作吗？如果不是，我还应该做些什么来存储我的加密字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:37:47.053

避免使用同样会导致问题的加密弱自定义密码，而是使用 Java 的内置功能，它可以为您提供加密强字符串。

[http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html#CipherClass](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jce/JCERefGuide.html#CipherClass)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:35:55.243

将其存储为“blob”是最安全的——与字符串几乎相同，只是具有单独指定的长度。

通常假定 C 字符串以空值结尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T19:45:09.317

在 SQLite 中，字符串不能包含字符串结束标记，即值为零的字符。

但是，您可以将二进制数据存储为 blob。这看起来像这样：

```
SQLiteDatabase db = ...;
byte[] binaryData = ...;
ContentValues values = new ContentValues();
values.put("mycolumn", binaryData);
db.insert("mytable", null, values);

Cursor cursor = db.query("mytable", new String[]{"mycolumn"}, ...);
byte[] data = cursor.getBlob(0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T19:33:27.897

将 String 放入数据库的一种简单而安全的方法是获取字节数组，您不确定它是否总是有效，我可以想到的是：

## 无效放（字符串键，字节[]值）

## byte[] getAsByteArray(字符串键)

如果您确实需要将其存储为字符串（但为什么？）并将其重新解码，则可以将其转换为 base64 字符串。

话虽如此，您不需要执行任何这些操作，因为对于插入功能，如果您使用 ContentValues，它应该为您进行转义。

ContentValue 使用[Parcel](http://developer.android.com/reference/android/os/Parcel.html)进行类型更改

# networking - 以编程方式检索 IPV6 路由标志？

> ID：12962280
> 
> 赞同：2
> 
> 时间：2012-10-18T19:30:40.707
> 
> 标签：networking, routing, network-programming, linux-kernel, ipv6

有没有办法通过任何 API 获取 IPV6 路由表的标志`Linux`？

1.  `Netlink socket`没有显示标志的任何位置。
2.  在检查`route`命令的源代码后，`net-tools`它似乎从`proc`文件系统读取路由，我对此持谨慎态度，因为它似乎依赖于操作系统风格。

# iphone - 取消电子邮件后关闭视图

> ID：12962283
> 
> 赞同：0
> 
> 时间：2012-10-18T19:30:45.967
> 
> 标签：iphone, email, ios6

我希望能够从我的应用程序发送一封电子邮件，其中我已经让那部分工作。问题是当我取消发送电子邮件（这是我现在正在测试的）时，电子邮件部分被关闭，但我留下了一个我似乎无法关闭的黑屏。

所以这就是我所拥有的。我创建了一个类来处理电子邮件部分：

MailViewController.h

```
#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h>

@interface MailViewController : UIViewController <MFMailComposeViewControllerDelegate>

@end 
```

实现如下：

```
#import "MailViewController.h"

@interface MailViewController ()

@end

@implementation MailViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    if([MFMailComposeViewController canSendMail]){
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
        [mailer setMailComposeDelegate:self];

        [mailer setSubject:@"Subject"];
        NSMutableArray *toArray = [[NSMutableArray alloc] initWithObjects:@"email@gmail.com", nil];
        [mailer setToRecipients:toArray];

        [self presentViewController:mailer animated:YES completion:nil];

    }
    else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failuer" message:@"This device is unable to send emails" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{

    switch (result){
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email was sent");
            break;

        case MFMailComposeResultFailed:
            NSLog(@"Mail failed");
            break;

        case MFMailComposeResultSaved:
            NSLog(@"Mail saved");
            break;

        case MFMailComposeResultSent:
            NSLog(@"Mail sent");
            break;

        default:
            NSLog(@"Mail not sent");
            break;
    }

    [controller dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

所有这些都是从另一个视图显示的，如下所示：

```
-(IBAction)sendMessage:(id)sender{
    NSLog(@"Going to send an email....");

    MailViewController *mail = [[MailViewController alloc] init];

    [self.navigationController pushViewController:mail animated:YES];

} 
```

所以当我运行所有这些时，电子邮件程序会打开，我可以处理电子邮件。我可以选择取消，然后选择删除草稿，然后删除电子邮件程序。但是，我留下了一个黑屏，然后我可以从顶部导航栏中选择返回以返回到上一个视图。

我只是希望应用程序在发送或取消电子邮件（或其他）时返回显示电子邮件程序的视图。我敢肯定这是我想念的简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:41:30.797

问题在于您是`pushing`MailViewController，然后`dimissing`，如果`push`您应该`pop`使用视图控制器。

`MFMailComposeViewController`s 应该以模态方式呈现，而不是推送到导航堆栈上。您也不需要子类，您可以`MFMailComposeViewController`直接创建一个实例：

```
-(IBAction)sendMessage:(id)sender{
    NSLog(@"Going to send an email....");

    MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];
    mail.mailComposeDelegate = self;
    [self presentViewController:mail animated:YES completion:nil];
}

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{

    switch (result){
        case MFMailComposeResultCancelled:
            NSLog(@"Mail cancelled: you cancelled the operation and no email was sent");
            break;

        case MFMailComposeResultFailed:
            NSLog(@"Mail failed");
            break;

        case MFMailComposeResultSaved:
            NSLog(@"Mail saved");
            break;

        case MFMailComposeResultSent:
            NSLog(@"Mail sent");
            break;

        default:
            NSLog(@"Mail not sent");
            break;
    }

    [controller dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:39:03.070

我有几个架构问题，但首先 - TL;DR 版本：

```
[self.navigationController popViewControllerAnimated:NO]; 
```

您也可以为布尔值选择 YES，但根据您的实现来判断，这不会产生好的结果。把它放在委托调用中以完成。

然而，为什么不让任何将 MailViewController 推入堆栈的东西来处理成为 MFMailComposeViewControllerDelegate 的工作呢？您在这里没有做任何需要将一个全新的视图控制器推入堆栈的操作。

# php - 在 MySQL 中有没有办法或命令说指向存储图像的文件？

> ID：12962285
> 
> 赞同：0
> 
> 时间：2012-10-18T19:30:46.227
> 
> 标签：php, mysql

我正在为一家公司建立一个数据库。他们想要一个 MySQL 数据库，并且他们想要存储超过 11,000 种产品的图像。我只是想知道是否有办法或命令说指向存储图像的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:33:35.667

只需另存为`VARCHAR`，该值表示该文件的路径。然后做：

```
$q=mysql_query("select path from images where id=123");
if($r=mysql_fetch_array($q)){
    echo '<img src="'.$r['path'].'">';
} 
```

关于另一个选项，您*可以*将图像作为 BLOB 存储在 mysql 中，但是您必须通过 mysql 来获取它。您将编写一个将图像发送到浏览器的脚本。我认为将它们保存在文件系统上会更好，只需使用 mysql 指向它们即可。然后，当标签发送到浏览器时，您的网络服务器将为您正确处理该图像的服务。此外，如果您拥有对服务器的 shell/ftp 访问权限，它将使管理/查看图像变得更加容易和简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:33:28.590

您可以将文件存储在具有数据类型的表列中`blob`。要么，要么将服务器文件路径存储在 string( `varchar`) 字段中，并在从数据库读取后使用服务器代码检索文件。

# android - 为什么我在 TLS 调试日志中看到“TLS_EMPTY_RENEGOTIATION_INFO_SCSV”

> ID：12962286
> 
> 赞同：2
> 
> 时间：2012-10-18T19:30:46.487
> 
> 标签：android, ssl, encryption

[*我在这里*](https://www.rfc-editor.org/rfc/rfc5746#section-3.3)读到了它，但我在这里看到它对我来说毫无意义。

在 Android 客户端我设置：

```
sSLSocket.setEnabledCipherSuites(new String[] { "SSL_RSA_WITH_RC4_128_SHA"}); 
```

java 服务器调试显示`*** ClientHello, TLSv1`和

```
Cipher Suites: [SSL_RSA_WITH_RC4_128_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV] 
```

我的设置是一个专用的 Java 服务器/Android 客户端，它将“仅”始终通信。任何一方都不会与其他任何事物建立联系。

这就是我`setEnabledCipherSuites`这样做的原因。

服务器/客户端自签名证书仅用于测试。

另一件事是这条线：

```
%% Initialized:  [Session-1, SSL_NULL_WITH_NULL_NULL] 
```

为什么我看到那个？

调试日志：（
删除了很​​多二进制文本以适应此正文）

```
adding as trusted cert:
  Subject: CN=smith.dyndns-ip.com, O=smith, C=SE
  Issuer:  CN=smith.dyndns-ip.com, O=smith, C=SE
  Algorithm: RSA; Serial number: 0xb4ba1f6a7902bb97
  Valid from Thu Oct 11 18:37:21 CEST 2012 until Fri Oct 11 18:37:21 CEST 2013

***
found key for : 1
chain [0] = [
[
  Version: V3
  Subject: CN=smith.dyndns-ip.com, O=smith, C=SE
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits
  modulus: 19828292987711460063479095233990735206267474911720200680398978846239921718204800830196446367271259853243857782157464503041073715350900882399263842246256739265150626309452599118681530826485263986656970230214504531123471356734892063098742596709600403594811097754985241159919624822696690646908289328404173233975755485099400316319894619262629800753116491177190800509689339918111133269528385927418662146594964797904375015607937667194705579205469111691215024194198408322269068550434706560902100199589198763096214957779831336905118521574867338194318861017871505432271905525399396261074008234892595483193798680621671023145911
  public exponent: 65537
  Validity: [From: Thu Oct 11 18:38:14 CEST 2012,
               To: Fri Oct 11 18:38:14 CEST 2013]
  Issuer: CN=smith.dyndns-ip.com, O=smith, C=SE
  SerialNumber: [    ef1a4465 3fb9d4ed]

Certificate Extensions: 3
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: F5 6E DA 1E DD 85 08 31   D9 16 AC 37 23 DB 52 6A  .n.....1...7#.Rj
0010: FF B3 D4 E3                                        ....
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: F5 6E DA 1E DD 85 08 31   D9 16 AC 37 23 DB 52 6A  .n.....1...7#.Rj
0010: FF B3 D4 E3                                        ....
]
]

[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: 7C EA BF 17 BB 9C 6E E6   DC 6E D3 5D 7E B5 48 0F  ......n..n.]..H.
0010: 5A A1 98 5F 15 A8 46 49   36 D2 1B F9 05 60 87 ED  Z.._..FI6....`..
0020: F8 59 E5 08 9F 06 22 0F   18 4A F6 E6 6C 23 39 E8  .Y...."..J..l#9.
0030: 4D 7E 37 BC 03 BE 76 75   12 D8 A2 88 94 82 D7 15  M.7...vu........
0040: 71 3C 8D 0D 69 A1 FA 88   E7 8F 3F F4 90 03 39 B4  q<..i.....?...9.
0050: 6B 8D 9F CE 2C B7 C1 D7   FC 36 BC 27 BA A2 55 5E  k...,....6.'..U^
0060: 55 8F 34 12 1C FF DA B9   70 C9 82 5D 18 58 CF AE  U.4.....p..].X..
0070: E9 F6 A0 31 DE 78 50 6A   57 BB 85 B0 E4 F0 2A 94  ...1.xPjW.....*.
0080: 93 17 60 DF ED 99 AB AB   B0 8C 8E 4E B8 D6 8F AE  ..`........N....
0090: EC 98 71 FE 82 98 2C 0A   E7 50 FF C6 78 6A 59 38  ..q...,..P..xjY8
00A0: 4B 25 B3 C6 1B 1A 61 32   1F 47 1B 98 96 15 C8 E5  K%....a2.G......
00B0: 12 3A C9 7A 38 81 3F 5C   DC FC DF 43 33 11 D1 42  .:.z8.?\...C3..B
00C0: 35 46 8C 35 C4 10 28 95   43 2B EC EC 65 7E 93 23  5F.5..(.C+..e..#
00D0: 5A F8 94 F4 5F C2 01 BE   EE E0 4E 8B BD CA 14 3C  Z..._.....N....<
00E0: 61 9B 78 96 F7 54 D3 68   F2 91 9F 43 57 AB C5 0E  a.x..T.h...CW...
00F0: D8 9E 51 85 08 62 F6 B4   BB A4 70 04 0F BA D2 C6  ..Q..b....p.....

]
***
SSL Key 1
SSL Trust 1
trigger seeding of SecureRandom
done seeding SecureRandom
List all ******************
TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
TLS_DHE_RSA_WITH_AES_128_CBC_SHA
TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA
TLS_DHE_RSA_WITH_AES_256_CBC_SHA
SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA
TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
SSL_RSA_WITH_RC4_128_SHA
TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA
TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
TLS_DHE_RSA_WITH_AES_128_CBC_SHA256
TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256
TLS_ECDHE_RSA_WITH_RC4_128_SHA
TLS_ECDH_ECDSA_WITH_RC4_128_SHA
TLS_DHE_RSA_WITH_AES_256_CBC_SHA256
TLS_ECDHE_ECDSA_WITH_RC4_128_SHA
TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA
TLS_ECDH_RSA_WITH_RC4_128_SHA
TLS_EMPTY_RENEGOTIATION_INFO_SCSV
TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384
TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA
TLS_ECDH_RSA_WITH_AES_128_CBC_SHA
TLS_RSA_WITH_AES_256_CBC_SHA256
TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
TLS_DHE_DSS_WITH_AES_256_CBC_SHA
TLS_RSA_WITH_AES_128_CBC_SHA
TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384
TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256
TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
TLS_RSA_WITH_AES_256_CBC_SHA
TLS_RSA_WITH_AES_128_CBC_SHA256
TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
SSL_RSA_WITH_RC4_128_MD5
TLS_DHE_DSS_WITH_AES_128_CBC_SHA
SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA
SSL_RSA_WITH_3DES_EDE_CBC_SHA
END List all ******************
Server started
  Waiting for connection from client...
Allow unsafe renegotiation: false
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
  Accepted connection from 192.168.1.1, port 48544
[Raw read]: length = 5
0000: 16 03 01 00 2F                                     ..../
[Raw read]: length = 47
0000: 01 00 00 2B 03 01 50 80   4D 92 48 AF 0B D8 61 93  ...+..P.M.H...a.
0010: 3A 5B 82 59 32 7B 49 10   8E D7 4D 8A 54 79 13 F9  :[.Y2.I...M.Ty..
0020: FF F7 CB 50 C3 CE 00 00   04 00 05 00 FF 01 00     ...P...........
main, READ: TLSv1 Handshake, length = 47
*** ClientHello, TLSv1
RandomCookie:  GMT: 1333808274 bytes = { 72, 175, 11, 216, 97, 147, 58, 91, 130, 89, 50, 123, 73, 16, 142, 215, 77, 138, 84, 121, 19, 249, 255, 247, 203, 80, 195, 206 }
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_RC4_128_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
***
[read] MD5 and SHA1 hashes:  len = 47
0000: 01 00 00 2B 03 01 50 80   4D 92 48 AF 0B D8 61 93  ...+..P.M.H...a.
0010: 3A 5B 82 59 32 7B 49 10   8E D7 4D 8A 54 79 13 F9  :[.Y2.I...M.Ty..
0020: FF F7 CB 50 C3 CE 00 00   04 00 05 00 FF 01 00     ...P...........
%% Initialized:  [Session-1, SSL_NULL_WITH_NULL_NULL]
matching alias: 1
%% Negotiating:  [Session-1, SSL_RSA_WITH_RC4_128_SHA]
*** ServerHello, TLSv1
RandomCookie:  GMT: 1333808261 bytes = { 70, 169, 125, 236, 121, 171, 92, 56, 45, 96, 98, 136, 44, 58, 34, 56, 104, 191, 215, 52, 174, 203, 70, 122, 8, 220, 79, 60 }
Session ID:  {80, 128, 77, 133, 70, 61, 202, 31, 62, 82, 4, 101, 72, 14, 10, 28, 91, 177, 233, 22, 222, 62, 115, 104, 78, 27, 93, 230, 21, 159, 152, 169}
Cipher Suite: SSL_RSA_WITH_RC4_128_SHA
Compression Method: 0
Extension renegotiation_info, renegotiated_connection: <empty>
***
Cipher suite:  SSL_RSA_WITH_RC4_128_SHA
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=smith.dyndns-ip.com, O=smith, C=SE
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits
  modulus: 19828292987711460063479095233990735206267474911720200680398978846239921718204800830196446367271259853243857782157464503041073715350900882399263842246256739265150626309452599118681530826485263986656970230214504531123471356734892063098742596709600403594811097754985241159919624822696690646908289328404173233975755485099400316319894619262629800753116491177190800509689339918111133269528385927418662146594964797904375015607937667194705579205469111691215024194198408322269068550434706560902100199589198763096214957779831336905118521574867338194318861017871505432271905525399396261074008234892595483193798680621671023145911
  public exponent: 65537
  Validity: [From: Thu Oct 11 18:38:14 CEST 2012,
               To: Fri Oct 11 18:38:14 CEST 2013]
  Issuer: CN=smith.dyndns-ip.com, O=smith, C=SE
  SerialNumber: [    ef1a4465 3fb9d4ed]

Certificate Extensions: 3
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: F5 6E DA 1E DD 85 08 31   D9 16 AC 37 23 DB 52 6A  .n.....1...7#.Rj
0010: FF B3 D4 E3                                        ....
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: F5 6E DA 1E DD 85 08 31   D9 16 AC 37 23 DB 52 6A  .n.....1...7#.Rj
0010: FF B3 D4 E3                                        ....
]
]

[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: 7C EA BF 17 BB 9C 6E E6   DC 6E D3 5D 7E B5 48 0F  ......n..n.]..H.
0010: 5A A1 98 5F 15 A8 46 49   36 D2 1B F9 05 60 87 ED  Z.._..FI6....`..
0020: F8 59 E5 08 9F 06 22 0F   18 4A F6 E6 6C 23 39 E8  .Y...."..J..l#9.
00E0: 61 9B 78 96 F7 54 D3 68   F2 91 9F 43 57 AB C5 0E  a.x..T.h...CW...
00F0: D8 9E 51 85 08 62 F6 B4   BB A4 70 04 0F BA D2 C6  ..Q..b....p.....

]
***
*** CertificateRequest
Cert Types: RSA, DSS, ECDSA
Cert Authorities:
<CN=smith.dyndns-ip.com, O=smith, C=SE>
*** ServerHelloDone
[write] MD5 and SHA1 hashes:  len = 1022
0000: 02 00 00 4D 03 01 50 80   4D 85 46 A9 7D EC 79 AB  ...M..P.M.F...y.
0010: 5C 38 2D 60 62 88 2C 3A   22 38 68 BF D7 34 AE CB  \8-`b.,:"8h..4..
0020: 46 7A 08 DC 4F 3C 20 50   80 4D 85 46 3D CA 1F 3E  Fz..O< P.M.F=..>
0030: 52 04 65 48 0E 0A 1C 5B   B1 E9 16 DE 3E 73 68 4E  R.eH...[....>shN
0040: 1B 5D E6 15 9F 98 A9 00   05 00 00 05 FF 01 00 01  .]..............
0050: 00 0B 00 03 59 00 03 56   00 03 53 30 82 03 4F 30  ....Y..V..S0..O0
03B0: 00 48 03 01 02 40 00 42   00 40 30 3E 31 0B 30 09  .H...@.B.@0>1.0.
03C0: 06 03 55 04 06 13 02 53   45 31 0F 30 0D 06 03 55  ..U....SE1.0...U
03D0: 04 0A 0C 06 53 50 52 49   49 44 31 1E 30 1C 06 03  ....smith1.0...
03E0: 55 04 03 0C 15 64 72 75   74 74 65 6E 2E 64 79 6E  U....smith.dyn
03F0: 64 6E 73 2D 69 70 2E 63   6F 6D 0E 00 00 00        dns-ip.com....
main, WRITE: TLSv1 Handshake, length = 1022
[Raw write]: length = 1027
0000: 16 03 01 03 FE 02 00 00   4D 03 01 50 80 4D 85 46  ........M..P.M.F
0010: A9 7D EC 79 AB 5C 38 2D   60 62 88 2C 3A 22 38 68  ...y.\8-`b.,:"8h
0020: BF D7 34 AE CB 46 7A 08   DC 4F 3C 20 50 80 4D 85  ..4..Fz..O< P.M.
0030: 46 3D CA 1F 3E 52 04 65   48 0E 0A 1C 5B B1 E9 16  F=..>R.eH...[...
0040: DE 3E 73 68 4E 1B 5D E6   15 9F 98 A9 00 05 00 00  .>shN.].........
0050: 05 FF 01 00 01 00 0B 00   03 59 00 03 56 00 03 53  .........Y..V..S
03D0: 30 0D 06 03 55 04 0A 0C   06 53 50 52 49 49 44 31  0...U....smith1
03E0: 1E 30 1C 06 03 55 04 03   0C 15 64 72 75 74 74 65  .0...U....drutte
03F0: 6E 2E 64 79 6E 64 6E 73   2D 69 70 2E 63 6F 6D 0E  n.dyndns-ip.com.
0400: 00 00 00                                           ...
[Raw read]: length = 5
0000: 16 03 01 03 5D                                     ....]
[Raw read]: length = 861
0000: 0B 00 03 59 00 03 56 00   03 53 30 82 03 4F 30 82  ...Y..V..S0..O0.
0010: 02 37 A0 03 02 01 02 02   09 00 B4 BA 1F 6A 79 02  .7...........jy.
0020: BB 97 30 0D 06 09 2A 86   48 86 F7 0D 01 01 05 05  ..0...*.H.......
0030: 00 30 3E 31 0B 30 09 06   03 55 04 06 13 02 53 45  .0>1.0...U....SE
0040: 31 0F 30 0D 06 03 55 04   0A 0C 06 53 50 52 49 49  1.0...U....SPRII
0050: 44 31 1E 30 1C 06 03 55   04 03 0C 15 64 72 75 74  D1.0...U....drut
0060: 74 65 6E 2E 64 79 6E 64   6E 73 2D 69 70 2E 63 6F  ten.dyndns-ip.co
0330: AD 48 3B FE 4B F9 1A 82   C9 CB 24 88 89 C3 78 8E  .H;.K.....$...x.
0340: A6 D4 FE CE 39 66 F4 48   39 16 7D 8E 08 DB 3E 24  ....9f.H9.....>$
0350: F7 FD 34 76 94 6D 37 BE   EF 53 BA 89 4D           ..4v.m7..S..M
main, READ: TLSv1 Handshake, length = 861
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=smith.dyndns-ip.com, O=smith, C=SE
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits
  modulus: 23496237719502336160731187123882087516857248303136016525007515477411820324389309412497616204841416737428369029539727911829957261900246123671755448783374076371585220700946079814339410006875366590448744547904237125909752424872462374722025882552253361075854663377968593894406520520763276619797341648312830067202444308703480740570155669989956271141234461583351370436392165219066579182803469381254927947452741733530570034447674553013199697877719076300791503351733152444962714618216706903270272228589537934701160017250218124068090224176369183083907456616852817429610227318879195807569316432328134191548839310114727528540673
  public exponent: 65537
  Validity: [From: Thu Oct 11 18:37:21 CEST 2012,
               To: Fri Oct 11 18:37:21 CEST 2013]
  Issuer: CN=smith.dyndns-ip.com, O=smith, C=SE
  SerialNumber: [    b4ba1f6a 7902bb97]

Certificate Extensions: 3
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 28 E3 D4 F1 6B 59 12 54   26 6B 9B 09 6A 94 77 79  (...kY.T&k..j.wy
0010: AE BC 3D 2B                                        ..=+
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 28 E3 D4 F1 6B 59 12 54   26 6B 9B 09 6A 94 77 79  (...kY.T&k..j.wy
0010: AE BC 3D 2B                                        ..=+
]
]

[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: B0 22 82 D5 1B AF 4C A7   7E D9 B4 27 F7 48 C4 D7  ."....L....'.H..
0010: DE A5 45 E6 72 D1 85 DE   CF F7 AF A4 97 7B 68 6A  ..E.r.........hj
00E0: C3 78 8E A6 D4 FE CE 39   66 F4 48 39 16 7D 8E 08  .x.....9f.H9....
00F0: DB 3E 24 F7 FD 34 76 94   6D 37 BE EF 53 BA 89 4D  .>$..4v.m7..S..M

]
***
Found trusted certificate:
[
[
  Version: V3
  Subject: CN=smith.dyndns-ip.com, O=smith, C=SE
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 2048 bits
  modulus: 23496237719502336160731187123882087516857248303136016525007515477411820324389309412497616204841416737428369029539727911829957261900246123671755448783374076371585220700946079814339410006875366590448744547904237125909752424872462374722025882552253361075854663377968593894406520520763276619797341648312830067202444308703480740570155669989956271141234461583351370436392165219066579182803469381254927947452741733530570034447674553013199697877719076300791503351733152444962714618216706903270272228589537934701160017250218124068090224176369183083907456616852817429610227318879195807569316432328134191548839310114727528540673
  public exponent: 65537
  Validity: [From: Thu Oct 11 18:37:21 CEST 2012,
               To: Fri Oct 11 18:37:21 CEST 2013]
  Issuer: CN=smith.dyndns-ip.com, O=smith, C=SE
  SerialNumber: [    b4ba1f6a 7902bb97]

Certificate Extensions: 3
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: 28 E3 D4 F1 6B 59 12 54   26 6B 9B 09 6A 94 77 79  (...kY.T&k..j.wy
0010: AE BC 3D 2B                                        ..=+
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 28 E3 D4 F1 6B 59 12 54   26 6B 9B 09 6A 94 77 79  (...kY.T&k..j.wy
0010: AE BC 3D 2B                                        ..=+
]
]

[3]: ObjectId: 2.5.29.19 Criticality=false
BasicConstraints:[
  CA:true
  PathLen:2147483647
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: B0 22 82 D5 1B AF 4C A7   7E D9 B4 27 F7 48 C4 D7  ."....L....'.H..
0010: DE A5 45 E6 72 D1 85 DE   CF F7 AF A4 97 7B 68 6A  ..E.r.........hj
00E0: C3 78 8E A6 D4 FE CE 39   66 F4 48 39 16 7D 8E 08  .x.....9f.H9....
00F0: DB 3E 24 F7 FD 34 76 94   6D 37 BE EF 53 BA 89 4D  .>$..4v.m7..S..M

]
[read] MD5 and SHA1 hashes:  len = 861
0000: 0B 00 03 59 00 03 56 00   03 53 30 82 03 4F 30 82  ...Y..V..S0..O0.
0010: 02 37 A0 03 02 01 02 02   09 00 B4 BA 1F 6A 79 02  .7...........jy.
0020: BB 97 30 0D 06 09 2A 86   48 86 F7 0D 01 01 05 05  ..0...*.H.......
0320: 81 6C 98 BD C1 80 21 DE   02 B9 9F 0D 0B CF 07 1B  .l....!.........
0330: AD 48 3B FE 4B F9 1A 82   C9 CB 24 88 89 C3 78 8E  .H;.K.....$...x.
0340: A6 D4 FE CE 39 66 F4 48   39 16 7D 8E 08 DB 3E 24  ....9f.H9.....>$
0350: F7 FD 34 76 94 6D 37 BE   EF 53 BA 89 4D           ..4v.m7..S..M
[Raw read]: length = 5
0000: 16 03 01 01 06                                     .....
[Raw read]: length = 262
0000: 10 00 01 02 01 00 54 FD   A1 78 09 68 CF 55 61 0B  ......T..x.h.Ua.
0010: BD 1E 9A 31 1D D2 83 31   31 4D 6B 6C 30 8C E3 27  ...1...11Mkl0..'
0020: 0B ED 6E C8 CC AE 15 85   C5 71 62 54 92 51 C0 C3  ..n......qbT.Q..
00E0: 6E 5B E9 90 C7 32 A2 88   15 4E 6D 60 7D 18 4B D2  n[...2...Nm`..K.
00F0: 15 70 95 3C 96 77 1D D7   A7 02 1C 6F 28 86 3C BC  .p.<.w.....o(.<.
0100: 5A C6 25 CD 94 67                                  Z.%..g
main, READ: TLSv1 Handshake, length = 262
*** ClientKeyExchange, RSA PreMasterSecret, TLSv1
SESSION KEYGEN:
PreMaster Secret:
0000: 03 01 EC 03 E0 A7 DE E8   07 A4 B9 FB 07 3A AA 92  .............:..
0010: 1F 30 BA 4F 52 4E 6F 71   BA F6 8D C4 89 0E 88 66  .0.ORNoq.......f
0020: 23 B8 76 31 F3 76 E4 CE   CC F8 3F 92 0C 9D 93 86  #.v1.v....?.....
CONNECTION KEYGEN:
Client Nonce:
0000: 50 80 4D 92 48 AF 0B D8   61 93 3A 5B 82 59 32 7B  P.M.H...a.:[.Y2.
0010: 49 10 8E D7 4D 8A 54 79   13 F9 FF F7 CB 50 C3 CE  I...M.Ty.....P..
Server Nonce:
0000: 50 80 4D 85 46 A9 7D EC   79 AB 5C 38 2D 60 62 88  P.M.F...y.\8-`b.
0010: 2C 3A 22 38 68 BF D7 34   AE CB 46 7A 08 DC 4F 3C  ,:"8h..4..Fz..O<
Master Secret:
0000: 37 0F F2 9F 68 14 37 8F   E1 23 BA 31 F7 50 61 59  7...h.7..#.1.PaY
0010: 21 EE 59 E2 E9 2E 59 09   5F 68 A8 ED 11 30 1B 02  !.Y...Y._h...0..
0020: 04 22 9A C3 D2 FF 21 9F   14 95 9B 0E 45 2D 8D EE  ."....!.....E-..
Client MAC write Secret:
0000: 09 B0 B0 9D 38 E6 9C 03   2A 0B C4 3F 5D 49 7C 27  ....8...*..?]I.'
0010: 0B 41 54 3A                                        .AT:
Server MAC write Secret:
0000: 5B 74 7A DA 47 AE 16 A2   AA 63 EC 0A 2F AA A1 89  [tz.G....c../...
0010: 47 D9 00 46                                        G..F
Client write key:
0000: 09 B0 BD DC E3 B6 11 1A   C9 87 3F 36 08 42 78 98  ..........?6.Bx.
Server write key:
0000: C2 E0 03 E3 38 B8 0E CC   35 85 08 3C 80 9C 23 ED  ....8...5..<..#.
... no IV used for this cipher
[read] MD5 and SHA1 hashes:  len = 262
0000: 10 00 01 02 01 00 54 FD   A1 78 09 68 CF 55 61 0B  ......T..x.h.Ua.
0010: BD 1E 9A 31 1D D2 83 31   31 4D 6B 6C 30 8C E3 27  ...1...11Mkl0..'
0020: 0B ED 6E C8 CC AE 15 85   C5 71 62 54 92 51 C0 C3  ..n......qbT.Q..
00E0: 6E 5B E9 90 C7 32 A2 88   15 4E 6D 60 7D 18 4B D2  n[...2...Nm`..K.
00F0: 15 70 95 3C 96 77 1D D7   A7 02 1C 6F 28 86 3C BC  .p.<.w.....o(.<.
0100: 5A C6 25 CD 94 67                                  Z.%..g
[Raw read]: length = 5
0000: 16 03 01 01 06                                     .....
[Raw read]: length = 262
0000: 0F 00 01 02 01 00 7F 1C   EA AC 1A C3 B6 5A 3C ED  .............Z<.
0010: 52 8F 52 05 A7 74 C0 34   05 FB AA C0 E6 ED 54 57  R.R..t.4......TW
0020: 91 80 DE CF 57 6F 34 AC   84 AA 44 99 5F DF ED DE  ....Wo4...D._...
00F0: EC 1F AE 64 34 8D 39 A8   B7 38 87 50 69 89 71 C5  ...d4.9..8.Pi.q.
0100: 4A A4 D4 58 EC 0D                                  J..X..
main, READ: TLSv1 Handshake, length = 262
*** CertificateVerify
[read] MD5 and SHA1 hashes:  len = 262
0000: 0F 00 01 02 01 00 7F 1C   EA AC 1A C3 B6 5A 3C ED  .............Z<.
0010: 52 8F 52 05 A7 74 C0 34   05 FB AA C0 E6 ED 54 57  R.R..t.4......TW
00F0: EC 1F AE 64 34 8D 39 A8   B7 38 87 50 69 89 71 C5  ...d4.9..8.Pi.q.
0100: 4A A4 D4 58 EC 0D                                  J..X..
[Raw read]: length = 5
0000: 14 03 01 00 01                                     .....
[Raw read]: length = 1
0000: 01                                                 .
main, READ: TLSv1 Change Cipher Spec, length = 1
[Raw read]: length = 5
0000: 16 03 01 00 24                                     ....$
[Raw read]: length = 36
0000: BF FD 57 2E 70 6E 60 FD   26 51 02 29 85 F4 96 B4  ..W.pn`.&Q.)....
0010: DE B9 58 96 98 18 A3 C9   6F E3 BD E5 E3 FA 90 7D  ..X.....o.......
0020: D7 ED 3D 7D                                        ..=.
main, READ: TLSv1 Handshake, length = 36
Padded plaintext after DECRYPTION:  len = 36
0000: 14 00 00 0C 99 C4 41 DC   E8 86 EE 10 C5 C0 72 42  ......A.......rB
0010: 71 60 19 8C 05 25 5B 9A   53 42 48 51 61 BB 56 D2  q`...%[.SBHQa.V.
0020: 41 04 4C 91                                        A.L.
*** Finished
verify_data:  { 153, 196, 65, 220, 232, 134, 238, 16, 197, 192, 114, 66 }
***
[read] MD5 and SHA1 hashes:  len = 16
0000: 14 00 00 0C 99 C4 41 DC   E8 86 EE 10 C5 C0 72 42  ......A.......rB
main, WRITE: TLSv1 Change Cipher Spec, length = 1
[Raw write]: length = 6
0000: 14 03 01 00 01 01                                  ......
*** Finished
verify_data:  { 84, 147, 38, 36, 240, 107, 166, 214, 226, 13, 147, 79 }
***
[write] MD5 and SHA1 hashes:  len = 16
0000: 14 00 00 0C 54 93 26 24   F0 6B A6 D6 E2 0D 93 4F  ....T.&$.k.....O
Padded plaintext before ENCRYPTION:  len = 36
0000: 14 00 00 0C 54 93 26 24   F0 6B A6 D6 E2 0D 93 4F  ....T.&$.k.....O
0010: 29 31 2D E0 1D 46 87 F7   2F FA D8 F8 B2 3E 9E 7A  )1-..F../....>.z
0020: A7 B7 1B F2                                        ....
main, WRITE: TLSv1 Handshake, length = 36
[Raw write]: length = 41
0000: 16 03 01 00 24 D7 C2 B4   2C 64 20 F8 97 C2 44 FE  ....$...,d ...D.
0010: 94 B9 55 15 DB FF 17 59   EB 71 2B 2B E6 85 7B A8  ..U....Y.q++....
0020: BB A0 48 DE F4 35 05 4C   B2                       ..H..5.L.
%% Cached server session: [Session-1, SSL_RSA_WITH_RC4_128_SHA]
printSocketInfo......
Server socket class: class sun.security.ssl.SSLServerSocketImpl
   Socker address = 0.0.0.0/0.0.0.0
   Socker port = 24586
   Need client authentication = true
   Want client authentication = false
   Use client mode = false
END printSocketInfo......
  Cipher suite used for this session: SSL_RSA_WITH_RC4_128_SHA
  Server -> receiving...
[Raw read]: length = 5
0000: 17 03 01 00 66                                     ....f
[Raw read]: length = 102
0000: 85 DD 45 9C 0C 19 1A 73   26 74 DF 3A 4A 4F 9B 53  ..E....s&t.:JO.S
0010: 97 B2 D3 AB 33 92 3F 7A   12 7B 2D 1E 95 F2 6D CE  ....3.?z..-...m.
0020: D4 54 78 A3 4F 71 A0 A5   31 24 29 90 F2 57 B1 11  .Tx.Oq..1$)..W..
0030: BA 91 64 73 8F 41 65 2A   1A 2B 6A 07 0D E8 3A CC  ..ds.Ae*.+j...:.
0040: 64 36 0D 1B 36 31 3A 1C   B2 99 77 7C C5 5A 9C 7E  d6..61:...w..Z..
0050: 3D C3 D8 44 BF E2 A3 57   E0 F3 12 47 77 2A 3E D4  =..D...W...Gw*>.
0060: 15 E1 65 4C 97 B4                                  ..eL..
main, READ: TLSv1 Application Data, length = 102
Padded plaintext after DECRYPTION:  len = 102
0000: 00 50 2A 2A 2A 2A 2A 2A   2A 2A 2A 20 54 68 69 73  .P********* This
0010: 20 6C 69 6E 65 20 69 73   20 73 65 6E 74 20 66 72   line is sent fr
0020: 6F 6D 20 41 6E 64 72 6F   69 64 20 63 6C 69 65 6E  om Android clien
0030: 74 2E 20 48 65 6C 6C 6F   20 73 73 6C 53 65 72 76  t. Hello sslServ
0040: 65 72 53 6F 63 6B 65 74   2A 2A 2A 2A 2A 2A 2A 2A  erSocket********
0050: 2A 2A F9 D1 6F B0 48 6B   53 45 E5 44 D4 39 E5 6C  **..o.HkSE.D.9.l
0060: 85 17 34 5C 29 BC                                  ..4\).
Padded plaintext before ENCRYPTION:  len = 92
0000: 00 46 2A 2A 2A 2A 2A 2A   2A 2A 2A 20 54 68 69 73  .F********* This
0010: 20 6C 69 6E 65 20 69 73   20 73 65 6E 74 20 66 72   line is sent fr
0020: 6F 6D 20 50 43 20 63 6C   69 65 6E 74 2E 20 48 65  om PC client. He
0030: 6C 6C 6F 20 53 53 4C 53   6F 63 6B 65 74 20 2A 2A  llo SSLSocket **
0040: 2A 2A 2A 2A 2A 2A 2A 2A   DD 06 45 CE 81 4F FF C4  ********..E..O..
0050: 09 46 8A 29 B4 01 A5 3D   73 C1 AE E7              .F.)...=s...
main, WRITE: TLSv1 Application Data, length = 92
[Raw write]: length = 97
0000: 17 03 01 00 5C 00 34 29   BF 8B EB 91 EC F1 44 F0  ....\.4)......D.
0010: 9A 41 C9 19 29 40 61 48   CC D3 D7 1B 95 03 2A 61  .A..)@aH......*a
0050: CD B6 31 B5 83 FB 93 EE   97 67 70 48 20 DA CB 38  ..1......gpH ..8
0060: E2                                                 .
********* This line is sent from Android client. Hello sslServerSocket**********
main, called close()
main, called closeInternal(true)
main, SEND TLSv1 ALERT:  warning, description = close_notify
Padded plaintext before ENCRYPTION:  len = 22
0000: 01 00 0E A1 90 92 0B E8   92 1E 0B 44 4E 4D EC 84  ...........DNM..
0010: 35 DC 18 A1 DB CF                                  5.....
main, WRITE: TLSv1 Alert, length = 22
[Raw write]: length = 27
0000: 15 03 01 00 16 B4 7D D9   7E 7C DA 44 D8 D7 2C 1D  ...........D..,.
0010: AF 21 95 B7 1D A4 54 E5   11 74 1B                 .!....T..t.
main, called closeSocket(selfInitiated)
main, called close()
main, called closeInternal(true)
main, called close()
main, called closeInternal(true)
Server ended 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:18:25.270

对于损坏的实现，这是一个兼容性问题。您的会话是使用 建立的`SSL_RSA_WITH_RC4_128_SHA`，因此确实没有问题。我不认为你可以通过 控制它`setEnabledCipherSuites()`，它很可能是 TLS 实现的一个组成部分。

# python - 如果子进程发生系统时间更改，则预期超时错误

> ID：12962291
> 
> 赞同：1
> 
> 时间：2012-10-18T19:30:54.723
> 
> 标签：python, timeout, spawn, pexpect

红帽Linux

我正在生成一个子进程，它是一个更新系统时间的 shell 脚本。我的超时时间为 30 分钟，如下所示。我的子进程与其他命令一起将系统时间提前 4 小时更新。当我执行以下这些行时，我得到的结果为 1。

```
child = pexpect.spawn('/bin/bash',['-c',options.cmd])

result = child.expect([pexpect.EOF,pexpect.TIMEOUT],timeout=cmd_timeout) 
```

如何让 pexpect 使用真正的计时器超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:11:53.040

pexpect 使用受系统时钟更改影响的 time.time()。更好的选择可能是 Python 3.3 中的 time.monotonic() （参见[旧版本的类似物](https://stackoverflow.com/a/1205762/4279)）。如果可用，它由子流程模块使用。

您可以[使用带有 time() 函数的 while 循环、使用 signal.alarm() 等来实现超时](https://stackoverflow.com/a/4418891/4279)。

# facebook - 使用 Parse.com 登录 Facebook 失败

> ID：12962293
> 
> 赞同：1
> 
> 时间：2012-10-18T19:31:03.750
> 
> 标签：facebook, facebook-login, parse-platform

我收到`POST https://api.parse.com/1/users 400 (Bad Request)`以下 Parse.Facebook.Utils.logIn 请求的返回：

```
FB.login(function(response) {
    if(response.status == "connected") {
        // build authData object for Parse
        var id = response.authResponse.userID;
        var access_token = response.authResponse.accessToken;
        var expiration_date = new Date();
        expiration_date.setSeconds(expiration_date.getSeconds() + response.authResponse.expiresIn);
        expiration_date = expiration_date.toISOString();
        var authData = {
            "facebook" : {
                "id" : id,
                "access_token" : access_token,
                "expiration_date" : expiration_date
            }
        };

        // log in with Parse
        Parse.FacebookUtils.logIn(authData, {
            success: this._fbLoginSuccess,
            error: this._fbLoginError
        });
    }
}, this.FB_PERMISSIONS); 
```

我创建的`authData`对象是基于[这种格式](https://parse.com/docs/rest#users-login)和[这个 API](https://parse.com/docs/js/symbols/Parse.FacebookUtils.html#.logIn)的。

我怎样才能解决这个问题？我在使用 Parse.FacebookUtils.logIn 和标准权限参数（在移动 Web 和 PhoneGap 上）时没有运气，这就是为什么我在没有它的情况下使用该`authData`参数进行身份验证的原因。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:27:10.000

`authData`对象应该从键中开始`facebook`，如下所示：

```
var authData = {
        "id" : id,
        "access_token" : access_token,
        "expiration_date" : expiration_date
}; 
```

# jquery - 为什么我的 jQueryUI 对话框不会关闭？

> ID：12962298
> 
> 赞同：1
> 
> 时间：2012-10-18T19:31:29.207
> 
> 标签：jquery, jquery-ui

为什么我的按钮不会关闭对话框？

这是代码和小提琴[http://jsfiddle.net/ThxjS/](http://jsfiddle.net/ThxjS/)

```
$(function() {
    $( "<div id='dialogMy'><button>close</button>test</div>" ).dialog({

        resizable: false,
        height:140,
        modal: true

    });

          $("button").click(function(){

                 //why wont it close? 
                  //$('#dialogMy').close();
                  $('#dialogMy').destroy();

          });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T19:34:48.687

您错误地调用了destroy，您需要在对话框中调用它，例如：

```
 $('#dialogMy').dialog('destroy'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T19:33:14.090

你想要`.dialog('close')`。`.destroy()`不是有效的方法。

正如其他人所提到的，您可以通过调用来处理它，`.dialog('dispose')`但请记住，对话框将消失并且以后无法再次重新引用。如果这是一个警告弹出窗口或这样的可能需要，但如果您打算重新使用模态，我建议只是`dialog('close')`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T19:40:14.590

`.destroy`并且`.close`不是 jQuery Object 的方法。

有 jQuery UI Dialog 的方法。

因此，如果您尝试将其传递给 jQuery 对象，它将无法识别它们。

您需要将这些属性传递给 .dialog() 小部件..

```
$('#dialogMy').dialog('destroy');
$('#dialogMy').dialog('close'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T19:34:42.107

您使用了错误的功能。你需要说：

```
jQuery('#dialogMy').dialog('close'); 
```

* * *

根据[jQuery UI 对话框文档](http://api.jqueryui.com/dialog/#method-destroy)：

> **关闭（）**
> 
> 关闭对话框。
> 
> **破坏（）**
> 
> 完全删除对话框功能。这将使元素返回到它的预初始化状态。

# php - 编写具有多个值的 if 语句的更简单方法

> ID：12962302
> 
> 赞同：1
> 
> 时间：2012-10-18T19:31:55.433
> 
> 标签：php, if-statement

```
if(($x == "m") || ($x == "k") || ($x == "y") || ($x == "p") || ($x == "z")) 
```

我确信有更好的方法来解决这个问题。`$x`重复多次并不理想。有没有更好更简单的方法来写上面的语句？

编辑：

```
if($x == ('m' || 'k' || 'y' || 'p') 
```

也许像上面的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:35:50.067

你可以[`in_array`](http://php.net/in-array)这样使用：

```
if( in_array($x, Array("m","k","y","p","z"))) 
```

或者您可以构建一个字符串并对其进行测试：

```
if( strpos("mkypz",$x) !== false) 
```

或使用正则表达式：

```
if( preg_match("/[mkypz]/",$x)) 
```

或使用`switch`：

```
switch($x) {
    case "m":
    case "k":
    case "y":
    case "p":
    case "z":
        // do something
        break;
} 
```

最后两个可能不是一个好主意，但这取决于你在做什么，`$x`来自哪里等等。我只是想说明有很多方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:33:03.967

您可以构建一个值数组并使用 in_array()。

```
$check = array('11','23','44')
if(!in_array($x, $check)){
     .... do stuff 
 } 
```

或做一个开关

```
switch($x){
   case "11":
   case "23":
   case "44":
       echo "match:" break;
   default: 
       echo "no match"; break;  
   } 
```

可能性是无穷无尽的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:33:23.577

使用 in_array() , bool in_array (混合 $needle , array $haystack [, bool $strict = FALSE ] )

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T19:34:07.850

您可以使用 in_array() 函数。

来自 php 文档站点。

```
<?php
$os = array("Mac", "NT", "Irix", "Linux");
if (in_array("Irix", $os)) {
    echo "Got Irix";
}
if (in_array("mac", $os)) {
    echo "Got mac";
}
?> 
```

[PHP 文档](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T19:35:50.130

您可以使用 strpos：

`if ( strpos( "mkyxpz" , $x) !== false )`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T19:37:19.160

也许，而不是`if`，考虑`switch`：

```
switch($x) {
    case 'm':
    case 'k':
    case 'y':
    case 'p':
    case 'z':
        [statements];
        break;
    default:
        [more statements];
        break;
} 
```

请注意， 的值`$x`将“通过”每个`case`条件，直到它到达一个`break`语句。

# javascript - Google Map API V3 - 添加 KML 图层时地图“变白”

> ID：12962304
> 
> 赞同：2
> 
> 时间：2012-10-18T19:32:06.307
> 
> 标签：javascript, google-maps, google-maps-api-3, kml

我目前正在我们的开发服务器上通过 V3 API 测试谷歌地图，而我正在尝试做的是从 maps.google.com 的常用“我的地图”之一导入 KML 图层。重点是我想要 API 中的一些功能，但希望人们能够在需要时轻松地从地图中添加或删除点。

无论如何，只需通过 API 显示地图就可以了。获得 KML 效果很好 - 我看不出它有什么问题。但是，当我在 API 中将 KML 添加到地图时，会显示 KML 中的点，但整个地图会变白，因此唯一显示的是标记。

我尝试更改地图类型（例如路线图与地形）无济于事。同样，我看不出 KML 有什么问题，而且我已经验证它似乎可以在其他地方工作。这发生在我尝试的每个浏览器中，这表明我在编码中搞砸了一些东西，但我不知道是什么。

由于我们的 CMS 弄乱了地图代码，我只是将其作为外部 .js 文件导入。这是它的样子：

```
function initialize() {
  var mapOptions = {
    zoom: 7,
    center: new google.maps.LatLng(37.668046, -79.749756),
    mapTypeId: google.maps.MapTypeId.TERRAIN
  }
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  var participantsLayer = new google.maps.KmlLayer('https://maps.google.com/maps/ms?msa=0&msid=204048902337864904598.0004cc332e8034251c1db&ie=UTF8&ll=37.668046,-80.289717&spn=1.959603,5.642338&output=kml');

  participantsLayer.setMap(map);
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "https://maps.googleapis.com/maps/api/js?key=abc.def&sensor=false&callback=initialize";
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:41:08.310

[在它自己的页面](http://www.geocodezip.com/v3_SO_kml_dynamicLoad.html)中对我来说很好。我怀疑您的 css 中有某些东西（可能是您的 CMS 弄乱了地图代码），怀疑它与您在问题上放置的任何标签有关。

# sql-server-2008-r2 - SSAS 查询在 0 毫秒内运行。通过 SSRS 他们需要 1.3 秒

> ID：12962305
> 
> 赞同：1
> 
> 时间：2012-10-18T19:32:07.880
> 
> 标签：sql-server-2008-r2, ssas, mdx, olap

这些查询显示为使用 SSMS/SSAS 在 0 毫秒内运行。

但是当我通过 Reporting Services 发送它们时，它们显示为 1.3 秒。这比 0ms 慢约 1300 倍。

我知道我对 MDX 有点生疏，但如果有人能看看这个，我会很高兴的。

我正在使用 SQL Enterprise，SSAS 服务器是带有 SSD 的 I7 桌面。

```
 ="SELECT NON EMPTY {[Measures].[Cost Amt] } ON COLUMNS, 
NON EMPTY { 
([Vendor].[Vendor].ALLMEMBERS * [Cost Code].[Cost Code].ALLMEMBERS ) 
} ON ROWS 
FROM [DspAlloc] 
WHERE [InvoiceNumber].[All InvoiceNumber].[" + Parameters!InvoiceNumber.Value + 
"] CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, FORMAT_STRING,
FONT_NAME, FONT_SIZE, FONT_FLAGS"

="SELECT NON EMPTY { 
[Measures].[Total Freight], [Measures].[Incl Frt], [Measures].[Total Qty],
[Measures].[Total Ship Wt] } ON COLUMNS, 
NON EMPTY { ([Item_No].[Item_No].ALLMEMBERS ) } ON ROWS 
FROM [InvoiceDetail] 
WHERE [InvoiceNumber].[All InvoiceNumber].[" + Parameters!InvoiceNumber.Value + 
"] CELL PROPERTIES VALUE, BACK_COLOR, FORE_COLOR, FORMATTED_VALUE, FORMAT_STRING,
FONT_NAME, FONT_SIZE, FONT_FLAGS" 
```

# php - Facebook 风格 - 为照片添加标题

> ID：12962308
> 
> 赞同：0
> 
> 时间：2012-10-18T19:32:18.950
> 
> 标签：php, arrays, upload, photo

我试图找出为一组照片添加标题的最佳方法。这是过程：

1.  用户上传照片（例如：10）
2.  上传成功后（保存在由他们的用户名标记的文件夹中），页面刷新并且照片出现在列表中，旁边有一个“标题”输入。
3.  用户输入他们的标题并点击“提交”
4.  照片说明已保存

我很难弄清楚如何将照片名称和标题放入数组中？图片名称已经设置好了，我已经从照片上传中获得了一个数组。如何为数组中的每张照片添加标题？

谢谢您的帮助！任何关于做不同的建议都是受欢迎的！

布兰登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:34:44.893

这就是我所做的：

1.  有 index.html 与文件上传
2.  转到upload.php：上传文件并将它们保存到用户的文件夹中（例如：brandon/photos/）
3.  上传完成后，使用带有输入“文本”框的“foreach”“回显”照片。每个文本框都有“标题[]”的“名称”，它构建了一个标题数组
4.  提交时，转到“addcaptions.php”：组合文件数组和字幕数组
5.  addcaptions.php 然后使用“foreach”将照片文件名、相应的标题和与照片对应的用户名添加到使用“mysqli”的 MySql 数据库中

而且效果很好！所有照片和标题都已组合在一起，可以使用了！

感谢大家关注这个问题！

# xml - SSIS：将架构添加到 xml 文件

> ID：12962315
> 
> 赞同：0
> 
> 时间：2012-10-18T19:32:42.463
> 
> 标签：xml, ssis, xmltextwriter

我需要从数据库中提取数据并通过 ssis 创建一个 xml 文件。到目前为止，我已经创建了一个脚本，可以成功创建一个 xml 文件（使用 XmlTextWriter），列出所有必要的数据，但是，他们也希望在文件中列出架构，我不知道该怎么做。

这是我当前创建 xml 文件的代码（在我的数据流中使用脚本组件）：

> ```
> StreamWriter sw;
> XmlTextWriter xWriter;
> String rowName;
> String collectionName;
> private int[] columnNames; 
> ```

```
public override void PreExecute()
{

    rowName = "Responses";
    collectionName = "NewDataSet";
    String fileName = Variables.FullFileName;        
    xWriter = new XmlTextWriter(fileName, null);
    xWriter.WriteStartDocument();
    xWriter.WriteStartElement(collectionName);
}

public override void PostExecute()
{        

    xWriter.WriteEndElement();
    xWriter.WriteEndDocument();
    xWriter.Close();
}

public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    Type rowType = Row.GetType();
    PropertyInfo columnValue;

    xWriter.WriteStartElement(rowName);
    foreach (IDTSInputColumn100 column in this.ComponentMetaData.InputCollection[0].InputColumnCollection)
    {
        columnValue = rowType.GetProperty(column.Name);
        xWriter.WriteStartElement(column.Name);

        Object value = columnValue.GetValue(Row, null);
        if(value != null)
        {
            xWriter.WriteValue(value.ToString());

        }

        xWriter.WriteEndElement();
    }      
} 
```

如何向其中添加架构信息？我看过“WriteXmlSchema”的教程，但这似乎只适用于数据集（我没有使用）。

我非常感谢您能提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:46:01.400

如果您只需要引用 xml 文档中的现有模式，它只是根元素中的一个属性。请参阅[本教程关于 XML 模式](http://www.w3schools.com/schema/schema_howto.asp)。`xWriter.WriteStartElement(collectionName);` 在该页面上的示例中，在添加后写入对架构的引用

```
xWriter.WriteAttributeString("xsi:schemalocation", "http://www.w3schools.com note.xsd") 
```

如果您需要创建 xsd 模式文档，有多种方法可以做到这一点。我建议谷歌搜索“从...创建 xsd”。

# mongodb - 为什么mongo不在数组中返回对象？

> ID：12962316
> 
> 赞同：1
> 
> 时间：2012-10-18T19:32:43.173
> 
> 标签：mongodb, mongodb-query

我正在搜索在文档的联系人数组中包含特定 _id 的文档。所以这是结构：

```
{
"_id": ObjectId("505c2daea9d397f2260001cd"),
 "contacts": [
     {
       "userGroupId": ObjectId("50422b53743d6c7c0e000000"),
       "userId": ObjectId("5061f8c66096eee07d000008") 
    },
     {
       "userGroupId": ObjectId("505bf9476096ee990200000e"),
       "userId": ObjectId("505c2daea9d397f2260001ce") 
    },
      {
       "userGroupId": ObjectId("50422b75743d6c700e000004"),
       "userId": ObjectId("506cff736096ee1e26000384") 
    },
     {
       "userGroupId": ObjectId("50422b66743d6c6b0e000000"),
       "userId": ObjectId("505c2daea9d397f2260001cf") 
    },
     {
       "userGroupId": ObjectId("5050e86aa9d3977b67000000"),
       "userId": ObjectId("506494ef6096ee021f000064") 
    },
     {
       "userGroupId": ObjectId("50422b53743d6c7c0e000000"),
       "userId": ObjectId("504d72246096ee2348000008") 
    },
     {
       "userId": ObjectId("50735e8e6096ee7c510002b9"),
       "userGroupId": ObjectId("5046c73e6096ee1b77000001") 
    } 
  ]
} 
```

这是第二个文件：

```
{
 "_id": ObjectId("505c2da0a9d397f2260000b7"),
"contacts": [
      {
       "userGroupId": ObjectId("50422b66743d6c6b0e000000"),
       "userId": ObjectId("505c2da0a9d397f2260000b8") 
    },
     {
       "userId": ObjectId("5061f8c66096eee07d000008"),
       "userGroupId": ObjectId("50422b53743d6c7c0e000000") 
    },
     {
       "userId": ObjectId("50735e8e6096ee7c510002b9"),
       "userGroupId": ObjectId("5046c73e6096ee1b77000001") 
    } 
  ]
} 
```

您会注意到这两个文档中都有一个 ObjectId("50735e8e6096ee7c510002b9") 的 userId。我运行这个命令：

```
db.collection.find({ 'contacts': 
    {$elemMatch: { userId: ObjectId("50735e8e6096ee7c510002b9") } }
}); 
```

哪个应该（我认为）返回两个文件。但它只返回第二个文档。不是第一个。我也试过：

```
db.collection.find({'contacts.userId': ObjectId("50735e8e6096ee7c510002b9") }); 
```

它与 $elemMatch 查询做同样的事情。

我可能遗漏了一些非常基本的东西，但如果你们能提供一些建议，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:53:41.993

事实证明，这是应用程序层的问题，而不是 Mongo。其中一条记录是数字键控的，另一条则不是，我刚刚一直在使用 Rock Mongo，它似乎键控了所有数组。

感谢您的帮助

# javascript - infowindow '不能调用未定义的方法“打开”'

> ID：12962324
> 
> 赞同：0
> 
> 时间：2012-10-18T19:33:11.580
> 
> 标签：javascript, google-maps

我通过 for 循环从 xml 向 Google Map 添加了许多标记。当我单击要弹出的信息窗口的标记时，我收到一条错误消息，指出“无法调用未定义的“打开”方法”。我在这里做错了什么？

jQuery

```
var markers = xml.documentElement.getElementsByTagName('marker');
//function to create unique id
var getMarkerUniqueId = function(lat, lng) {
   return lat + '_' + lng;
}
//function to get lat/lng
var getLatLng = function(lat,lng) {
    return new google.maps.LatLng(lat, lng);
}
//cycle through and create map markers for each xml marker
for (var i = 0; i < markers.length; i++) {
    //create vars to hold lat/lng from database
    var lat = parseFloat(markers[i].getAttribute('lat'));
    var lng = parseFloat(markers[i].getAttribute('lng'));
    //create a unique id for the marker
    var markerId = getMarkerUniqueId(lat, lng);
    var name = markers[i].getAttribute('Type');
    var html = '<b>' + name + '</b>';
    //create the marker on the map
    var marker = new google.maps.Marker({
        map: the_Map,
        position: getLatLng(lat, lng),
        id: 'marker_' + markerId
    });
    //put the markerId into the cache
    markers_arr[markerId] = marker;
    infoWindow[i] = new google.maps.InfoWindow({
        content: html,
        position: getLatLng(lat, lng),
    });
    infobox[i] = google.maps.event.addListener(marker,'click',function() {
        infoWindow[i].open(the_Map,marker);
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:36:14.200

你需要一个闭包：

```
infobox[i] = google.maps.event.addListener(marker,'click',function() {
    return function (windowToOpen) {
        windowToOpen.open(the_Map,marker);
    }(infoWindow[i]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:45:17.023

在您执行 infoWindow[i].open 时 i 的值等于 marker.length。您应该为每个信息窗口创建一个上下文

修改代码：

```
function createContext (marker, iw){

    google.maps.event.addListener(marker,'click',function() {
      iw.open(the_Map,marker);
 /  });
}
for (var i = 0; i < markers.length; i++) {
   ....
 infobox[i] = createContext(marker, infoWindow[i]); 

} 
```

# javascript - 传递给函数的对象的内存使用/垃圾收集

> ID：12962328
> 
> 赞同：1
> 
> 时间：2012-10-18T19:33:27.007
> 
> 标签：javascript, v8

当一个对象被传递给一个函数时，该对象是按值传递的（尽管对象的值是一个引用）。我将非常大的对象传递到我的函数中，但只能从函数内部访问少数属性（6-12）。内存方面，只传递属性而不是整个对象会更好吗？或者如果我的属性是字符串，这实际上会产生更多的内存问题吗？

给定下面的两个函数，内存会发生什么？在 f1 中，javascript/v8 是在内存中创建一个新对象 foo 还是真的只是一个指针？如果我访问字符串属性，它是否仍然只是一个指针，或者 V8 然后制作该字符串的副本以在函数中使用。在 f2 中，我假设为函数制作了字符串 foo 的全新副本。这是一个正确的假设吗？

```
function f1(x) {
  var y = x.foo;
}

function f2(foo) {
  var y = foo;
}

var obj = {foo: "test"};
f1(obj);
f2(obj.foo); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:36:38.100

> *“在内存方面，只传递属性而不是整个对象会更好吗？或者如果我的属性是字符串，这实际上会产生更多的内存问题吗？”*

那将需要更多的内存。它们是否是字符串并不重要，因为字符串通常也是作为引用类型实现的，但是对于每个参数，都会有一个值的副本，而不仅仅是 Object 引用的一个副本。

对象引用的重量非常轻，因此您只需复制它而不是对象的所有单个成员。

此外，如果您依赖函数内对象的突变，这将是必需的。

* * *

在您的示例中，只有一个属性被传递*(a string)*。如果您的代码不依赖于对象本身的突变，那么两者之间将没有显着差异。

在传递对象的示例中，唯一的副本是对象引用。它不是指针，但重量很轻，没有什么可担心的。

在传递字符串的示例中，它似乎复制了整个字符串，但由于字符串在 JavaScript 中是不可变的，因此实现通常也将它们实现为引用类型。

因此，传递单个字符串与传递 10,000 个字符串一样有效。

# jquery - JQuery AJAX 函数在 Chrome 和 IE 中有效，但在 Firefox 中无效

> ID：12962334
> 
> 赞同：0
> 
> 时间：2012-10-18T19:33:47.213
> 
> 标签：jquery

我有以下 JQuery AJAX 函数，它在 Chrome 和 IE 中完美运行，但在 Firefox 中却不行。事实上，在这个浏览器中，我在执行函数时收到“未定义 ProcessData”错误消息。Firefox 不应该在调用 ProcessData 函数之前等待结果，就像在其他两个浏览器中所做的那样吗？为了让这个函数在 Firefox 中工作，我需要添加什么？

```
 $(function() {
     $.ajax({
       url: "https://...&callback=?",
       dataType: 'json',
       success: ProcessData
     });
  });

  function ProcessData(result) {

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T13:21:33.810

感谢您的建议和评论。我能够通过在 $.ajax() 范围本身内添加 ProcessData 函数本身的逻辑来解决该问题，如下文所述：

```
 success: function ProcessData(result) {
    //logic
  } 
```

# libgdx - 使用 libGDX 创建 2D 安卓游戏

> ID：12962337
> 
> 赞同：2
> 
> 时间：2012-10-18T19:33:52.113
> 
> 标签：libgdx

我是 libGDX 游戏开发框架的新手。

任何人都可以解释“桌面”应用程序的目的吗？是否有必要为我的 android 应用程序创建一个“桌面”应用程序？是因为启动我的主应用程序的类在我的桌面应用程序中吗？

很抱歉问了这么蹩脚的问题。请帮助我并清除我对此类事情的基本理解。

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T20:08:44.570

该库的设计目的是允许您以不依赖于平台的方式创建所有游戏逻辑。这样您的游戏就可以在 Windows/Linux/MacOS/Android 上运行。

因此，您可以在桌面上直接进行测试时运行游戏，而不必打包 APK 并将其部署到 Android 模拟器或设备。这样你的开发速度会更快（而且你可以获得对 Android 以外的平台的免费支持）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-23T20:54:28.050

使用 LibGdx 进行开发时，您有一个主项目，其中包含所有与平台无关的代码（如 99% 的代码），并且您有其他平台的项目，通常只有一个类。因此，除了那个主要项目之外，您必须至少还有一个依赖于平台的项目。如果您使用资产，则必须拥有 android，因为资产（图形、声音、字体）必须放置在那里。正如 Odat 所说，拥有桌面项目是很好的测试 - 您可以更快地运行桌面应用程序，即制作屏幕截图，也许将其录制为视频......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T10:18:30.690

对于 android 或 iOS 开发，使用您的桌面项目来快速开发您的游戏机制。加载时间只是 Android 构建和启动的一小部分，并且比模拟器快得多。在桌面项目中设置和运行调试要快得多。

您可以快速为您的游戏添加内容，并立即获得有关其工作原理的反馈。

当然，许多人发布的功能齐全的游戏只有桌面版。甚至存在将[它们与安装程序打包的](https://github.com/libgdx/packr)工具！

# mysql - MySQL从3个不同行数的表中选择所有

> ID：12962339
> 
> 赞同：1
> 
> 时间：2012-10-18T19:33:58.917
> 
> 标签：mysql, left-join, inner-join

我想检索所有成员和所有成员船的列表。我这样做的方式是获取会员拥有的每艘船的会员信息。因此，如果成员 John Smith 有 3 艘船，则显示 John Smith 3 次。我希望名称和信息显示一次，并且空列而不是与船一起重复。

```
SELECT m.memberId, m.fName, m.lName, m.ssn, b.boatId, b.length, bt.type
FROM member AS m
RIGHT JOIN boat AS b
ON m.memberId = b.memberId
INNER JOIN boatType AS bt
ON b.boatTypeId = bt.boatTypeId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:38:46.627

如果我了解您的要求，则 Mysql 无法生成此类查询：

```
 Owner 1 details, boat 1 details
                  boat 2 details
                  boat 3 details
 Owner 2 details, boat 4 details
                  boat 5 details 
```

正如评论中的注释，在您取回数据后，这种类型的分组是在显示端完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:05:07.000

正如 Joe 建议的那样，您可以像这样在 MySQL 中使用 GROUP_CONCAT 和 CONCAT 函数。

```
 SELECT m.memberId, m.fName, m.lName, m.ssn, 
          GROUP_CONCAT(CONCAT(b.boatId, '(', bt.type, ':',b.length,' ft.)')
                       ORDER BY bt.boatId SEPARATOR '; ')
     FROM member AS m
LEFT JOIN boat AS b ON m.memberId = b.memberId
     JOIN boatType AS bt ON b.boatTypeId = bt.boatTypeId
 GROUP BY m.memberId, m.fName, m.lName, m.ssn 
```

这会给你这样的行。

```
1 Larry Ellison 123-45-6789 USA 17(Americas Cup:113 ft.); Rising Sun(Diesel:453 ft.)
2 Ollie Jones 987-65-4321 Scruffy Guppy(Sunfish:12 ft.) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:38:32.187

添加 group by 子句。

`GROUP BY m.member id, m.fName, m.lName, m.ssn`

至于boatId、length 和 type 字段，您必须决定应该显示 3 艘船的 ID 长度和类型中的哪一个（使用您的示例）。

# xslt - 使用 ant 的单个管道中的多个 XSLT 文件

> ID：12962341
> 
> 赞同：1
> 
> 时间：2012-10-18T19:34:05.327
> 
> 标签：xslt, ant

我有多个 XSLT 文件，用于在管道中处理我的源 XML。我知道其中的技巧，`exsl:node-set`但在遇到此工作流程的一些问题后，我决定将各种通道拆分为单独的 XSL 文件。我现在对文件的结构感到非常满意，并且工作流在 Eclipse 中运行良好。我们的发布系统适用于 ant。我可以像这样处理文件：

```
<xslt basedir="src-xml" style="src-xml/preprocess_1.xsl" in="src-xml/original.xml" out="src-xml/temp_1.xml" />
<xslt basedir="src-xml" style="src-xml/preprocess_2.xsl" in="src-xml/temp_1.xml" out="src-xml/temp_2.xml" />
<xslt basedir="src-xml" style="src-xml/preprocess_3.xsl" in="src-xml/temp_2.xml" out="src-xml/temp_3.xml" />
<xslt basedir="src-xml" style="src-xml/finaloutput.xsl" in="src-xml/temp_3.xml" out="${finaloutput}" /> 
```

但是这种方法，通过磁盘上的多个文件，似乎效率低下。有没有更好的方法来用蚂蚁做这件事？

**按照 Dimitre 的建议进行更新**

我为自己创建了一个围绕其他各种 XSL 的包装器，如下所示：

```
<xsl:stylesheet version='1.0' xmlns:xsl='http://www.w3.org/1999/XSL/Transform' xmlns:fn='http://www.w3.org/2005/xpath-functions' xmlns:exslt="http://exslt.org/common">

<xsl:import href="preprocess_1.xsl"/>
<xsl:import href="preprocess_2.xsl"/>
<xsl:import href="preprocess_3.xsl"/>
<xsl:import href="finaloutput.xsl"/>

<xsl:output method="text" />

<xsl:template match="/">
    <xsl:apply-imports />
</xsl:template>

</xsl:stylesheet> 
```

这……效果不好。看起来文档在最终输出 XSL 运行之前没有经过预处理。在这里我可能应该更清楚：`preprocess`XSL 文件正在修改文档、添加属性等。 `preprocess_3`是基于 的输出`..._2`是基于`..._1`。这种导入解决方案仍然合适吗？如果是这样，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:20:56.407

**更有效的方法是执行单次多通道变换**。

文件可以保持原样——它们将使用 xsl:import 指令导入。

**节省是显而易见的**：

1.  只需一次启动（加载 XSLT 处理器）。

2.  只有一个终止。

3.  消除两个中间文件及其创建、写入、关闭和删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:54:09.117

嗯，您说*我知道 exsl:node-set 的技巧*，但您没有在尝试中使用它（“按照 Dimitre 的建议进行更新”）。如果您不知道，或者对于不知道如何执行多通道转换的其他人（例如我），这里有**一篇不错的文章：[多通道处理](http://www.xml.com/pub/a/2003/07/16/nodeset.html#d0e198)**。

这种方法的缺点是它需要引擎特定的 xsl 代码。所以如果你知道引擎，你可以试试这个。如果您不了解引擎，可以尝试使用从[结果树片段到节点集的解决方案：所有 xsl 引擎的通用方法](https://stackoverflow.com/q/9837589/772981)。

查看这些来源可以肯定得出一个结论：您当前的解决方案更具可读性。但是您正在寻求效率，因此可能会牺牲一些可读性。

# iphone - 在所有 iphone ios 上进行后台工作

> ID：12962342
> 
> 赞同：0
> 
> 时间：2012-10-18T19:34:06.433
> 
> 标签：iphone, ios, xcode

我刚刚开始玩 XCode，目前正在阅读 Objective-C！

我在它上面做了一个黑暗的背景和一个书本式的“背景”。[这里](http://i.stack.imgur.com/swrlZ.png)的例子。

但是如何在每个 iOS 设备和每个 iPhone 屏幕尺寸上将其设置为恒定位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:01:30.613

从您的图像的外观来看，我假设您希望将其固定在底部。

为此，请将您的图像视图放在其超级视图的底部，并将自动调整大小更改为固定到底部，如下图所示。

视图中标记为“示例”的小红框显示了在调整超级视图大小时图像视图的行为方式。

![在此处输入图像描述](../Images/55627df8ab2813da2241bccd942ad656.png)

如果您希望您的图像视图在其他任何地方具有恒定的位置，只需将其放置在您想要的位置并为其设置适当的自动调整大小（再一次，查看红色框以查看调整大小时它的行为）。

* * *

如果右窗格不可见，请按工具栏中的右窗格按钮（下图）或使用键盘快捷键`⌘</kbd>+`⎇</kbd>+`0` to display the right pane or `⌘</kbd>+`⎇</kbd>+`5` to go directly to the size inspector.````

![在此处输入图像描述](../Images/ad03a767a46e56ee24fbc1428955674e.png)

# ffmpeg - 使用 ffserver 通过 RTSP 从 MP4 文件流式传输

> ID：12962358
> 
> 赞同：5
> 
> 时间：2012-10-18T19:34:53.437
> 
> 标签：ffmpeg, video-streaming, mp4, rtsp, ffserver

我正在尝试使用 ffserver 通过 RTSP 流式传输 mp4 文件，但到目前为止没有运气。我只想直接从文件流式传输，而不从 ffmpeg 馈送（不涉及转码）。但我已经使它适用于 mpg 视频。

这是我的 ffserver 配置文件：

```
Port 8090
BindAddress 0.0.0.0
MaxHTTPConnections 2000
MaxClients 1000
MaxBandwidth 500000
CustomLog -
NoDaemon

RTSPPort 7654
RTSPBindAddress 0.0.0.0

<Stream test1-rtsp>
    Format rtp
    File "/home/g/video_streaming/sample3-mpeg2.mpg"
</Stream>
<Stream test2-rtsp>
    Format rtp
    File "/home/g/video.mp4"
</Stream> 
```

当我启动 ffserver 时，根据日志输出，一切似乎都很好：

```
$ ./dev/ffmpeg/ffserver -f ffserver-sample.conf
ffserver version N-45673-gd0c27e8 Copyright (c) 2000-2012 the FFmpeg developers
  built on Oct 18 2012 10:36:52 with gcc 4.6 (Ubuntu/Linaro 4.6.3-1ubuntu5)
  configuration:
  libavutil      51\. 76.100 / 51\. 76.100
  libavcodec     54\. 66.100 / 54\. 66.100
  libavformat    54\. 33.100 / 54\. 33.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 19.103 /  3\. 19.103
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 16.100 /  0\. 16.100
Thu Oct 18 11:54:22 2012 Opening file '/home/g/video.mp4'
Thu Oct 18 11:54:22 2012 Opening file '/home/g/video.mp4'
Thu Oct 18 11:54:23 2012 Opening file '/home/g/video_streaming/sample3-mpeg2.mpg'
Thu Oct 18 11:54:23 2012 [mpeg @ 0x1dae3c0]max_analyze_duration 5000000 reached at 5005000
Thu Oct 18 11:54:23 2012 Opening file '/home/g/video_streaming/sample3-mpeg2.mpg'
Thu Oct 18 11:54:23 2012 [mpeg @ 0x1dae3c0]max_analyze_duration 5000000 reached at 5005000
Thu Oct 18 11:54:23 2012 FFserver started. 
```

最后，如果我运行 ffplay 来测试服务器，对于 mpg 文件一切正常，但对于 mp4 则不行：

```
$ ffplay rtsp://192.168.1.99:7654/test2-rtsp
ffplay version N-45656-g916352f Copyright (c) 2003-2012 the FFmpeg developers
  built on Oct 17 2012 16:14:14 with gcc 4.4.5 (Ubuntu/Linaro 4.4.4-14ubuntu5.1)
  configuration:
  libavutil      51\. 76.100 / 51\. 76.100
  libavcodec     54\. 66.100 / 54\. 66.100
  libavformat    54\. 33.100 / 54\. 33.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 19.103 /  3\. 19.103
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 16.100 /  0\. 16.100
rtsp://192.168.1.99:7654/test2-rtsp: Invalid data found when processing input

Server's output:

Thu Oct 18 11:57:51 2012 FFserver started.
Thu Oct 18 11:58:01 2012 192.168.1.101 - - [DESCRIBE] "rtsp://192.168.1.99:7654/test2-rtsp RTSP/1.0" 200 167
Segmentation fault (core dumped) 
```

我真的不知道我会错过什么。我刚刚[在官方文档](http://ffmpeg.org/ffserver.html#What-can-this-do_003f)中读到，从文件流式传输有点损坏。因为我真的不知道这是否是最新的，所以我决定在这里尝试一下。

有什么帮助或建议吗？备择方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:20:12.407

如果您正在寻找替代方案 live555 (http://www.live555.com/ ) 和 darwin 服务器是不错的选择。我已经使用了它们，并且在从文件流式传输时表现良好。

在上述情况下，您甚至可以通过分析核心转储来尝试调试。通过查看日志，我认为服务器甚至在收到播放命令之前就崩溃了。所以这可能是某个地方的小插曲

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-18T14:09:41.177

**仅仅4年后...**

> *您不能使用 FFserver 流式传输 mp4 视频，因为它在文件头中包含全局元数据 - 使得随机流访问变得不可能。[[资源]](https://stackoverflow.com/a/28497319/3451822)*

可能的替代方案：

```
// convert awesome.mp4 to awesome.flv

$ ffmpeg -i awesome.mp4 -c:v libx264 -ar 22050 -crf 28 awesome.flv 
```

有关 FFmpeg 的更多信息……请访问[博客](http://blog.superuser.com/2012/02/24/ffmpeg-the-ultimate-video-and-audio-manipulation-tool/)。

# ruby-on-rails - favicon.ico 被呈现为查询参数的一部分；可能的路线问题

> ID：12962360
> 
> 赞同：2
> 
> 时间：2012-10-18T19:34:58.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, routes

在 localhost / WEBrick 配置中（Rails 3.1，ruby 1.9.2，我的一条路线将 favicon.ico 文件作为请求参数。它似乎只在这一条路线上，不确定为什么这样做：

在我的路线中：routes.rb

```
scope '/arc' do 
  match '/item/:id' => 'items#show', :as => :item_show  # id can be either integer or text 
end 
```

在 html 中：

```
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /> 

Started GET "/arc/item/test-306-some-item" for 127.0.0.1 at 2012-10-18 12:18:18 -0700 
```

……为什么要这样做？？？仅在上述路线上？

```
Started GET "/arc/item/favicon.ico" for 127.0.0.1 at 2012-10-18 12:18:22 -0700
Creating scope :page. Overwriting existing method Item.page.
  Processing by ItemsController#show as 
  Parameters: {"id"=>"favicon"} 
```

关于为什么会这样做的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:41:59.503

使用绝对 URI `/favicon.ico`，然后它将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:46:56.210

您需要提供 favicon 的完整路径

像

```
<link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" /> 
```

为了在开发和生产等所有环境中工作，您可以为此使用 Rails 标签

```
<%= favicon_link_tag "favicon.ico" %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:29:14.433

尝试：

```
<link rel="icon" type="image/png" href="<%= image_path("favicon.png") %>" /> 
```

# java - 使用 Java RMI 建立连接

> ID：12962361
> 
> 赞同：0
> 
> 时间：2012-10-18T19:35:06.587
> 
> 标签：java, rmi

我正在编写一个使用 RMI 将客户端机器连接到服务器的程序，到目前为止我一直在获取`java.net.ConnectException: Connection refused`.

这是我的代码；

界面

```
public interface ServerInterface extends Remote
{
public String getMessage() throws RemoteException;

} 
```

服务器

```
public class Server extends UnicastRemoteObject implements ServerInterface 
{
int portNumber = 7776;
String ipAddress;
Registry registry;

public Server() throws RemoteException
{
    try
    {
        ipAddress = "192.168.0.104";
        System.out.println("IP Address: " + ipAddress + " Port Number: " + portNumber);
        registry = LocateRegistry.getRegistry();
        registry.rebind("ServerFour", this);
    }
    catch (RemoteException e)
    {
        System.out.println("Remote Exception Error");
    }
}

public String getMessage() throws RemoteException
{
    String output = "Connected to Server";

    return output;
}

public static void main(String args[])
{
    try
    {
        Server server = new Server();

    }
    catch (RemoteException ex)
    {
        System.out.println("Remote Exception in Main");
    }

}

} 
```

客户

```
public class Client 
{
public static void main(String[] args) throws NumberFormatException, RemoteException, NotBoundException 
{
    try
    {
        ServerInterface server;
        Registry registry;

        String serverAddress = "192.168.0.104";
        String serverPort = "7776";

        registry = LocateRegistry.getRegistry(serverAddress, Integer.valueOf(serverPort));

        server = (ServerInterface)(registry.lookup("ServerFour"));

        String serverMessage = server.getMessage();

    System.out.println("Servers Message: " + serverMessage);
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

}

} 
```

现在我只想让客户端调用 ServerInterface 中的方法并打印出它的消息，但我似乎无法让它工作。当我启动客户端时，我收到上面显示的异常消息。

当我启动服务器时，它返回：

IP地址：client4/127.0.1.1 端口号：1234

**更新：**

我已将端口号更改为 7776 Ran rmiregistry 7776 &

这是我启动服务器并运行 netstat -anpt [http://i.imgur.com/GXnnG.png时得到的](http://i.imgur.com/GXnnG.png)

现在在客户端我得到这个：http: [//i.imgur.com/aBvW3.png](http://i.imgur.com/aBvW3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:08:46.070

似乎 RMI`Registry`绑定到`localhost`（参见 127.0.0.1 - 我认为 127.0.1.1 是错字？），但尝试从客户端联系它`192.168.0.104`- 这不起作用，因为可能没有任何东西在该接口上监听！尝试将客户端更改`serverAddress`为`127.0.0.1`。

当您想查看哪些进程绑定在哪些接口上时，该命令`netstat -anpt`（或在 Windows 上：）是您的朋友（顺便说一下，这是用于 TCP 的）。`netstat -anbt``t`

这是将注册表绑定到特定 IP（例如`localhost`）的方式，

```
registry = 
    LocateRegistry.
        createRegistry( portNumber , 
                        new RMIClientSocketFactory() 
                        {
                            @Override
                            public Socket createSocket( String host, int port ) throws IOException
                            {
                                return new Socket( "127.0.0.1" , port );
                            }
                        } , 
                        new RMIServerSocketFactory() 
                        {
                            @Override
                            public ServerSocket createServerSocket( int port ) throws IOException
                            {
                                return new ServerSocket( port , 0 , InetAddress.getByName( "localhost") );
                            }
                        } ); 
```

干杯，

# javascript - 试验 JavaScript Properties 属性默认值

> ID：12962362
> 
> 赞同：1
> 
> 时间：2012-10-18T19:35:11.220
> 
> 标签：javascript

在阅读一本 JavaScript 的书时，我读到了

> **当“直接在对象上定义”**时，Data Properties 的所有属性默认为 true 。

然后经过一些描述，它再次说

> **"当您使用 Object.defineProperty()"**时，除非另有说明，否则可配置、可枚举和可写的值默认为 false。

我想，在第一条语句中“直接在对象上定义”意味着使用点运算符或对象文字符号，如下所示：

```
var obj = new Object();
obj.name = "Mahesh"; 
```

但是，在通过任一方法将属性添加到对象之后，是否有任何方法可以试验检查这些属性已设置为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:08:44.870

您可以使用[`getOwnPropertyDescriptor`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor)：

```
> var desc = Object.getOwnPropertyDescriptor(obj, 'name');
{"value":"Mahesh","writable":true,"enumerable":true,"configurable":true} 
```

`desc`将包含标志`configurable`和`enumerable`. 如果属性是数据描述符（否`get`或`set`），`desc`还将包含`value`和标志`writable`。如果属性是访问器描述符，`desc`也将包含`get`和`set`方法。

# facebook - Facebook Canvas setAutoGrow 在 IE 中永远增长

> ID：12962374
> 
> 赞同：2
> 
> 时间：2012-10-18T19:35:57.407
> 
> 标签：facebook, css, canvas, facebook-javascript-sdk

当我将 setAutoGrow 设置为 true 时，我在 Facebook 页面选项卡上的 Internet Explorer 9 中看到了一个奇怪的问题。高度不断增长，永无止境。对我来说，这只发生在 Internet Explorer 中。也使用 Chrome 和 Firefox 进行了测试。

可以在[https://www.facebook.com/GunSweeps/app_480125662005248找到一个示例](https://www.facebook.com/GunSweeps/app_480125662005248)

关于可能是什么原因的任何想法？我在这里阅读了另一个线程，表明它是 html，body 设置为 100%，另一个线程说顶部边距是原因。我尝试了这两种补救措施都没有效果。

编辑：在更多搜索中，我发现一个全局变量可能是问题所在，但通过了，这似乎也不是原因。

提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T11:13:36.083

也许你可以试试

```
FB.Canvas.setSize(); 
```

加载所有内容后

或使用简单的计时器

```
 var resizetimer= window.setTimeout(function() {
           FB.Canvas.setSize();
       }, 4000); 
```

# c++ - 如何在数组中输入 10 个数字？

> ID：12962375
> 
> 赞同：-7
> 
> 时间：2012-10-18T19:36:03.430
> 
> 标签：c++, arrays

我是 C++ 新手。必须在主函数中实现输入源数据和输出结果（使用操作符开关）。在案例 1 中我需要在数组中输入 10 个数字。在案例 1 中如何在数组中输入 10 个数字？

```
#include <iostream>
#include <iomanip>
#include <conio.h>

using namespace std;

class Array {
  int SIZE; //array size
  int *mass; //array name
  public: 

  Array(int = 0); 

  Array(const Array &ob); 

  void set_mass(int ,int ); 

  int get_mass(int)const; 

  void show_mass(void) const; 
  ~Array(); 
};

Array :: ~Array(){ 
  delete [] mass; 
}

Array::Array(const Array &ob):SIZE(ob.SIZE)
{
  mass = new int [SIZE];
  if(!mass) exit(1);

  for(int i=0;i<SIZE;i++) 
    mass[i]=ob.mass[i];
}

Array::Array(int N){
  if(N < 0) {cout<<"Size error!!!!\n"; return;}

  N=10;
  SIZE = N;
  mass = new int[SIZE];
  if(!mass) exit(1);

  for(int i = 0;i < SIZE; i++) {
    mass[i] = i+1;
  }
}

void Array::set_mass(int i,int x)
{ 
  mass[i] = (i >= 0 && i <SIZE) ? x :0; 
}

int Array::get_mass(int i) const
{ 
  return (i >= 0 && i < SIZE) ? mass[i] : 0; 
}

void Array::show_mass( void ) const{ 
  for(int i = 0; i < SIZE; i++)
    cout<<"["<<i<<"]="<<mass[i]<<endl;

}

int menu()   //menu
{
  cout<<"Enter: "<<endl;
  cout<<"1 - Array"<<endl;
  cout<<"2 - Show"<<endl;
  cout<<"0 - Quit"<<endl;
  int z;
  cin»z;
  return z;
}

void main()
{
  int SIZE;
  Array *mass[10];
  while (int z=menu())
  {

    switch(z)
    {

      case 1:
        {

          cout<<"Enter 10 numbers: ";

          break;
        }

      case 2:
        {
          for(int i=0;i<SIZE;i++){
            Array A1;
            A1.show_mass();
          }
          break;
        }

      default:
        {
          cout<<"Error"<<endl;
          break;
        }
    }
  }

  getch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:45:03.847

您想要做的事情有几个部分，并且根据您的代码，您似乎是一个完整的初学者。

你最好的选择是研究字符串流。您也可以签出scanf。至于将数据放入数组类，为什么不直接使用 std::array 或 std::deque？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:45:11.023

我相信这是一个家庭作业问题！无论如何写一个单独的方法

```
void GetTenNumbers(int arr[]){  
    for(int counter =0; counter <10; counter ++){  
        cout<<"Enter number ";  
        cin>> arr[counter];  
    }  
} 
```

做这样的事情

```
case 1: 
{
  cout<<"Enter 10 numbers: ";
  GetTenNumbers(arr);
  break;
} 
```

# c# - 分配 IEnumerable（协方差）

> ID：12962388
> 
> 赞同：7
> 
> 时间：2012-10-18T19:37:06.207
> 
> 标签：c#, c#-4.0, ienumerable, covariance

由于`IEnumerable`在 C# 4.0 中有一个协变参数，我对它在以下代码中的行为感到困惑。

```
public class Test
{
    IEnumerable<IFoo> foos;

    public void DoTestOne<H>(IEnumerable<H> bars) where H : IFoo
    {
        foos = bars;
    }

    public void DoTestTwo(IEnumerable<IBar> bars)
    {
        foos = bars;
    }
}
public interface IFoo
{
}
public interface IBar : IFoo
{
} 
```

所以基本上该`DoTestOne`方法在编译时不会编译`DoTestTwo`。除了为什么它不起作用之外，如果有人知道我如何实现`DoTestOne`（将 an 分配`IEnumberable<H> where H : IFoo`给 an `IEnumberable<IFoo>`）的效果，我将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T19:42:56.227

如果你知道 H 将是一个类，这确实有效：

```
 public void DoTestOne<H>(IEnumerable<H> bars) where H : class, IFoo
    {
        foos = bars;
    } 
```

这里的问题是，如果 H 是值类型，则协方差并不完全符合您的期望，因为`IEnumerable<MyStruct>`实际上返回值类型而`IEnumerable<IFoo>`必须返回装箱实例。如有必要，您可以使用显式`Cast<IFoo>`来解决此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T19:41:06.573

你只需要一个演员就可以`IEnumerable<IFoo>`了：

```
public void DoTestOne<H>(IEnumerable<H> bars) where H : IFoo
{
    foos = (IEnumerable<IFoo>)bars;
} 
```

**编辑**礼貌 Dan Bryant：使用`foos = bars.Cast<IFoo>()`而不是上面规避 InvalidCastException when `H`is a `struct`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:22:43.047

在 .net 运行时中，每个值类型都有一个关联的同名堆对象类型。在某些情况下，将使用值类型；在其他情况下，堆类型。当声明值类型的存储位置（变量、参数、返回值、字段或数组槽）时，该存储位置将保存该类型的实际内容。当声明类类型的存储位置时，它将保存`null`或引用存储在别处的堆对象。接口类型的存储位置被视为引用类型的位置，并且即使接口的某些（或全部）实现实际上是值类型，也会保存堆引用。

尝试将值类型存储到引用类型存储位置将导致系统创建与值类型关联的堆类型的新实例，将所有字段从原始存储位置复制到新实例中的相应字段，并存储对该实例的引用，该过程称为“装箱”。尝试将堆引用转换为值类型存储位置将检查它是否引用与值类型关联的堆类型的实例；如果是这样，堆对象的字段将被复制（“取消装箱”）到值类型存储位置中的相应字段中。

尽管看起来像`System.Int32`派生自的类型`System.Object`，但这只是对了一半。有一个堆对象类型`System.Int32`，它确实派生自`System.Object`，但类型的变量`System.Int32`不包含对此类对象的引用。相反，这样的变量保存与该整数相关的实际数据；*数据本身只是位的集合，并不来自任何东西*。

如果将接口类型的存储位置视为持有“从 System.Object 派生的实现接口*_*的东西”，那么实现该接口的任何类类型的实例都是该类型的实例，但值类型的实例 - 甚至如果它们可以转换为其他类型 - 不是任何其他类型的实例。使用 an 的代码`IEnumerator<IFoo>`不仅希望它的`Current`方法返回可以转换为 an`IFoo`或 implements的东西`IFoo`；它希望它返回的东西*是*`Object`that implements的衍生物`IFoo`。因此，`IEnumerable<T>`要替换 a `IEnumerable<IFoo>`，有必要`T`同时约束两者来实现`IFoo`并且是 的适当导数`System.Object`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T19:44:50.877

您忘记了退货中的演员表或通用约束中的“类”标识符。你所做的当然是可能的，参考下面。

来自：http: [//msdn.microsoft.com/en-us/library/d5x73970.aspx](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

```
where T : <interface name>

The type argument must be or implement the specified interface.
Multiple interface constraints can be specified. The constraining interface can also be generic. 
```

# objective-c - 在 UIBarButtonItem 按下后，在 segue 导航期间显示 UIActivityIndi cator

> ID：12962392
> 
> 赞同：1
> 
> 时间：2012-10-18T19:37:22.633
> 
> 标签：objective-c, spinner, uibarbuttonitem, uiactivityindicatorview, uistoryboardsegue

我在导航栏中有一个 UIBarButtonItem ，它使用 segue 切换到另一个屏幕。这个其他屏幕需要一些时间来初始化，我想在 UIBarButtonItem 上放置一个 UIActivityIndi​​cator 以显示点击已注册，并且 iPad 正忙于执行操作。

我的做法是在UIBarButtonItem被按下后添加一个UIActivityIndi​​cator，然后调用`performSegueWithIdentifier:`，在`viewDidLoad`第二个视图的方法中，将初始化放入`dispatch_sync()`调用中。你可以猜到它不起作用......为什么？

第一个屏幕上的 IBAction：

```
- (void)tappedEdit: (UIBarButtonItem *)editButton {
    // put activity indicator somewhere
    UIActivityIndicatorView *indicator;
    indicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    indicator.frame = CGRectMake (200, 5, 50, 50);
    [self addSubview: indicator];
    [indicator startAnimating];
    // follow segue
    [self performSegueWithIdentifier: SegueShowDesignMode sender: editButton];
    } 
```

第二个屏幕上的初始化：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // put costly operations into another queue to free main queue for activity indicator
    dispatch_sync (dispatch_get_global_queue (0, 0), 
                   ^{ // do initialization here
                   });
} 
```

这样做的效果是 UIBarButtonItem 在执行初始化时保持点击状态，然后 UIActivityIndi​​cator 很快可见，最后显示 segue 动画，显示第二个屏幕。

任何想法？非常感谢！

编辑：问题的一个补充可能是初始化做了一些 UIKit 的东西：当我尝试使用信号量时，初始化转储在一些 UITextView 方法中带有 BAD ACCESS。我猜这是因为它在一些“get_global_queue”上运行，而不是在“get_main_queue”上运行。

再次编辑：嗯，不。正如 Apple 文档中所宣布的，使用 'get_main_queue' 会导致死锁。所以问题归结为

“如何在运行微调器的同时创建后台 UIView（很多！）？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T05:09:07.650

我认为一个问题是您在第二个屏幕中使用`dispatch_sync`了您的`viewDidLoad`方法。`dispatch_sync`将阻塞你的线程，直到阻塞`// do initialization here`完成。尝试将其更改为`dispatch_async`。

如果我是您，我会考虑做的另一件事是让`UIActivityIndicator`显示为第二个屏幕的一部分，而不是第一个屏幕。这样，第二个屏幕也可以在您的视图完成昂贵的操作后将其关闭。当然，这假设视图可以在这些操作完成之前实际显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T12:26:35.357

如果您使用的是故事板

按钮栏项.h

```
 #import "CheckWifi.h"

    interface LoadingViewController : UIViewController 

    -(IBAction)BarItemPressed:(id)sender; 
```

按钮栏项.m：

```
-(IBAction)BarItemPressed:(id)sender {LoadingViewController *DIS = [self.storyboard instantiateViewControllerWithIdentifier:@"CheckWifi"];
DIS.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
[self presentModalViewController:DIS animated:YES];} 
```

加载视图控制器.h：

```
 @interface LoadingViewController : UIViewController {

    IBOutlet UIActivityIndicatorView *spinner

    }

-(IBAction)StopAnimating;

@end 
```

加载视图控制器.m：

```
-(void)ViewDidLoad {

spinner.hidden = NO;

}

-(IBAction)StopAnimating {

    spinner.hidden = YES;

    } 
```

如果您使用的是 XIB 文件，那么我真的无法帮助您，抱歉。

# c# - 使用 NHibernate 插入失败后 SQL 不可用

> ID：12962400
> 
> 赞同：2
> 
> 时间：2012-10-18T19:37:53.007
> 
> 标签：c#, sql-server, nhibernate

我有一个集成测试，它试图插入一行，其中的一列是另一行所具有的唯一列的副本。为了插入行，我调用了在我的实体存储库中找到的代码：

```
using (var transaction = rb.unitOfWork.Session.BeginTransaction())
        {
            try
            {
                ret = (Key)rb.unitOfWork.Session.Save(entity);
                transaction.Commit();
                rb.unitOfWork.Session.Clear();
            }
            catch
            {
                transaction.Rollback();
                rb.unitOfWork.Session.Clear();
                throw;
            }
        } 
```

当这段代码与重复的实体一起运行时，我可以看到插入来自 NHibernate Profiler。在该声明之后，我看到了以下警告和错误：

> -- 语句#1 WARN: System.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ_ *Contract*_C51D43DA5070F446'。无法在对象“dbo.Contracts”中插入重复键。重复键值为 (1005171)。该语句已终止。在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() 在 System.Data System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) 在 System.Data.SqlClient.SqlCommand.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) 在 System.Data.SqlClient.SqlCommand .RunExecuteReaderTds(CommandBehavior cmdBehavior,
> 
> -- 语句 #2 错误：违反 UNIQUE KEY 约束“UQ_ *Contract* _C51D43DA5070F446”。无法在对象“dbo.Contracts”中插入重复键。重复键值为 (1005171)。该语句已终止。
> 
> -- statement #3 ERROR: could not execute batch command.[SQL: SQL not available]Could not synchronize database state with session
> 
> -- 语句#4 回滚事务

在这个测试之后，我做了很多查询测试，一切似乎都运行良好，直到我为同一个存储库点击更新语句。这是被调用的代码：

```
using (var transaction = rb.unitOfWork.Session.BeginTransaction())
        {
            rb.unitOfWork.Session.SaveOrUpdate(entity);
            transaction.Commit();
            rb.unitOfWork.Session.Clear();
        }
        rb.unitOfWork.Session.Evict(entity); 
```

检查分析器显示更新被调用，紧接着，我得到这些语句：

> -- 语句#1 WARN: System.Data.SqlClient.SqlException (0x80131904): Violation of UNIQUE KEY constraint 'UQ_ *Contract*_C51D43DA5070F446'。无法在对象“dbo.Contracts”中插入重复键。重复键值为 (1005171)。该语句已终止。在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.SqlInternalConnection.OnError（SqlException 异常，布尔 breakConnection） 在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() 在 System.Data System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) 在 System.Data.SqlClient.SqlCommand.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) 在 System.Data.SqlClient.SqlCommand .RunExecuteReaderTds(CommandBehavior cmdBehavior,
> 
> -- 语句 #2 错误：违反 UNIQUE KEY 约束“UQ_ *Contract* _C51D43DA5070F446”。无法在对象“dbo.Contracts”中插入重复键。重复键值为 (1005171)。该语句已终止。
> 
> -- statement #3 ERROR: could not execute batch command.[SQL: SQL not available]Could not synchronize database state with session

据我所见，插入语句似乎将 NHibernate 置于失败状态。上面的更新代码会引发一个 GenericADOException，它显示 SQL Not Available。我一定在这里做错了什么。我应该以不同的方式处理异常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:40:16.803

假设您使用 Identity 或任何其他 PostInsert Id 生成器，如果插入错误它仍然没有设置 id，并且下一个 SaveOrUpdate 将尝试再次插入它，因为它认为它是一个未保存的实例，从而再次导致错误。

```
try {
    session.Save(entity);  // has duplicate key
} catch {}

Assert(entity.Id, Key.Unsaved);

session.SaveOrUpdate(entity2); // will issue INSERT and throws again 
```

# python - python：将文本文件作为列表打开，并用它们检索数据

> ID：12962421
> 
> 赞同：0
> 
> 时间：2012-10-18T19:39:00.863
> 
> 标签：python, list, random, python-3.x

我在 python 中打开和使用文本文件作为列表时遇到问题...我需要使用文本文件中的字符串值（每个 50 个单词）、三个文本文件...而且我需要使用来自每个文本文件都是为了每次都制造侮辱......（莎士比亚对那些知道的人的侮辱）

```
 import random #Import my random

Column_picker = random.randint(0, 45) #Define my random between 0-50

with open("Column1.txt") as d:
    insults1 = list(d)

with open("Column2.txt") as f:
    insults2 = list(f)

with open("Column3.txt") as e:
    insults3 = list(e)

print("Thou", insults1[], insults2[], insults3[]) 
```

这就是我到目前为止所拥有的，我感觉非常接近我只是无法从列表中获取正确的字符串..它要么获取整个列表，要么只是其中的一个字母....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:50:32.047

使用[random.choice](http://docs.python.org/library/random.html#random.choice)：

```
import random

def random_word(filename):
    with open(filename) as file:
         return random.choice(file.readlines())

filenames = ["file.txt", "another.txt"]
print("Thou " + ' '.join(map(random_word, filenames))) 
```

[`linecache.getline(filename, line_number)`](http://docs.python.org/library/linecache.html)如果您需要多次获取线路，您也可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:47:51.810

绝对更好的功能：

```
def random_word(fname):
    line_num = random.randint(0, 45)
    with open(fname) as f:
        lines = f.readlines()
    return lines[line_num]

print("Thou",
     random_word("Column1.txt"),
     random_word("Column2.txt"),
     random_word("Column3.txt")) 
```

最后一行甚至可以更干净一点：

```
files = ['Column1.txt','Column2.txt','Column3.txt']
insults = [random_word(f) for f in files]
print ( "Thou "+' '.join(insults) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:44:28.323

我假设每个侮辱都是文件中的一行，但是如果它们在第一行以空格分隔，我们可以替换为，我们可以添加一些忽略`readlines`等。但想法仍然相同。`readlines[0].split()``\n`

```
import random #Import my random

Column_picker = random.randint(0, 45) #Define my random between 0-50
with open("Column1.txt") as d:
    insults1 = d.readlines()

with open("Column2.txt") as f:
    insults2 = f.readlines()

with open("Column3.txt") as e:
    insults3 = e.readlines()

print("Thou", insults1[Column_picker], insults2[Column_picker], insults3[Column_picker]) 
```

# algorithm - 如何在 PI 的小数内找到一个特定的序列？

> ID：12962429
> 
> 赞同：3
> 
> 时间：2012-10-18T19:39:21.330
> 
> 标签：algorithm, math, pi

我想在 PI 的小数中找到一个特定的数字序列，这涉及到首先将 PI 计算为（很可能）无穷大。问题是我不知道如何使变量存储那么多数字或如何仅使用新计算的数字，以便将其与我的序列进行比较。

那么如何计算 PI 并只保留最后一个小数作为整数呢？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:54:09.533

使用惰性求值可以非常优雅地解决这类问题，就像在 Haskell 中发现的那样。或者在 Python 中使用生成器，一次最多生成一个 Pi，并检查正在搜索的目标值中的相应位置。

这两种方法的优点是您不必生成（可能）无限的数字序列，只需生成所需的数量，直到找到所需的内容。当然，如果特定序列*确实*没有出现在数字 Pi 中，算法将永远迭代，但至少执行程序的计算机不会耗尽内存。

或者：您可以使用[BBP 公式](http://mathworld.wolfram.com/BBPFormula.html)或类似的算法，该算法允许提取 Pi 中的特定数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:51:17.660

您可以使用迭代算法来计算 Pi，例如[Gauss–Legendre 算法](http://en.wikipedia.org/wiki/Gauss%E2%80%93Legendre_algorithm)。

要实现它，您将需要一个执行任意精度算术的库；一个这样的库是[GMP](http://gmplib.org)。

显然，有人为您完成了大部分工作：http: [//gmplib.org/pi-with-gmp.html](http://gmplib.org/pi-with-gmp.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-09T21:14:57.187

# dependency-injection - 使用依赖注入进行单元测试的下一步是什么？

> ID：12962430
> 
> 赞同：0
> 
> 时间：2012-10-18T19:39:22.327
> 
> 标签：dependency-injection, asp.net-web-api

我首先要说我是单元测试的忠实拥护者。我已经用了几年了。不过，到目前为止，我的用途仅限于确保正确执行工程计算、正确格式化字符串等。基本上，测试我在类库上的工作以在其他项目中使用。

现在，我想扩展并将单元测试应用到我在 ASP.NET Web API 上的工作。在这一点上，我已经编写了我的控制器并使用了 Ninject。虽然我正在使用 Ninject，但我仍然不能 100% 确定我为什么要这样做，并且还没有看到好处。

关于我的问题，对我的 Web API 控制器进行单元测试的下一步是什么？下一步我应该做什么，我什么时候能从使用 Ninject 中获益？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:30:58.397

接下来，您可以创建控制器可以返回到您的视图的假数据（或模拟）。这将使您无需完成后端实现即可进行前端开发。

使用 Ninject 的好处是您可以创建模拟对象用于测试目的。通过注入接口而不是具体实现，您可以轻松地在真实对象和模拟对象之间切换。为此，您只需更改应该在 Ninject 绑定中注入的那个。将 Rhino Mock 之类的东西与 Ninject 结合使用，您可以编写和测试您的代码（控制器、视图等），而无需完全实现所有功能。当您准备好实现一个模拟的功能时，您不必重写代码以适应更改，只需更新您的绑定。现在，真实数据将显示在您的页面上，而不是您之前创建的模拟数据。

# r - 使用 R 中的 genoset 包构造对象

> ID：12962431
> 
> 赞同：1
> 
> 时间：2012-10-18T19:39:24.357
> 
> 标签：r

genoset R 包具有通过将几个矩阵和一个指定坐标的 RangedData 对象放在一起来构建 GenoSet 的功能。

我有以下对象 - 三个矩阵，都具有相同的名称，以及以下格式的 RangedData 对象（称为 locData）。

```
 space                 ranges |
            <factor>              <IRanges> |
 cg00000957        1 [  5937253,   5937253] |
 cg00001349        1 [166958439, 166958439] |
 cg00001583        1 [200011786, 200011786] |
 cg00002028        1 [ 20960010,  20960010] |
 cg00002719        1 [169396706, 169396706] |
 cg00002837        1 [ 44513358,  44513358] | 
```

但是，当我尝试创建 GenoSet 时，出现以下错误。

```
 DMRSet=GenoSet(locData,Exprs,meth,unmeth,universe=NULL) 
```

.Call2("IRanges_from_integer", from, PACKAGE = "IRanges") 中的错误：无法从具有缺失值的整数向量创建 IRanges 对象。

我究竟做错了什么？我放在一起的所有对象都具有相同的行名，除了 IRanges 对象本身，我认为它没有行名，因为它不是矩阵。此外，locData 的“列”具有非整数字符。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:14:48.253

听起来你`"locData"`可能不是`RangedData`. 它也可以是一个`GRanges`. 无论哪种方式，您都需要命名所有参数。

一旦你克服了麻烦，底层的`eSet`班级就会对此感到不安。`locData`

```
DMRSet=GenoSet(locData=locData,exprs=Exprs,meth=meth,unmeth=unmeth,universe=NULL) 
```

皮特

# javascript - Chrome 表单提交请求有时会以 html 或 javascript 的形式处理

> ID：12962435
> 
> 赞同：0
> 
> 时间：2012-10-18T19:39:42.763
> 
> 标签：javascript, jquery, ruby-on-rails-3, google-chrome

我有一个表单，旁边有几个按钮，通过 Javascript 进行“控制”。

例如，我关心的是这样做的：

```
 $('.edit_document').submit(); 
```

到目前为止，一切都很好。我收到了一些错误报告，来自使用 Chrome 和 Windows 的人，他们在使用此表单时遇到了问题。事实证明，Rails 将其作为 JS 而非 HTML 接收。

```
Started PUT "/documents/1236" for xxxxxxxxxx at 2012-10-18 08:45:41 +0000
Processing by DocumentsController#update as HTML

Started PUT "/documents/1229" for yyyyyyyyyy at 2012-10-18 08:46:08 +0000
Processing by DocumentsController#update as JS

Started PUT "/documents/1229" for yyyyyyyyyy at 2012-10-18 09:06:25 +0000
Processing by DocumentsController#update as JS

Started PUT "/documents/18" for xxxxxxxxx at 2012-10-18 09:27:15 +0000
Processing by DocumentsController#update as HTML 
```

现在，我想添加一个 .js 处理程序很容易，但我想更好地理解为什么它似乎在两者之间来回随机切换！

在 Ubuntu（作为 HTML 工作）和 Windows（作为 JS 工作）上使用：jquery 1.8.2、Rails 3.2.8、Chrome 版本 22.0.1229.94。

# php - 动态表格 raws，取决于内容的数量

> ID：12962436
> 
> 赞同：0
> 
> 时间：2012-10-18T19:39:43.340
> 
> 标签：php, ftp

这是我的 php 代码，它将我与另一个 ftp 服务器连接起来并显示它的内容。然后它将结果放在一个表中。但是，我希望表在每第三个条目后创建一个新标签。我确实尝试了以下方法：

```
<html>
<head><title>some crap</title>
<style type="text/css">
<!--
@import url("style.css");
-->
</style>
</head>
<body>
<table id="gradient-style">
    <thead>
        <tr>
            <th colspan='99'>folders</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan='99'>End</td>
        </tr>
    </tfoot>
    <tbody>
    <tr>
<td>
<?php
$ftpHost = 'xxx';
$ftpUser = 'xxx';
$ftpPass = 'xxx';
$startDir = 'logs';
$n = 0;

if (isset($_GET['file'])) {
    // Get file contents (can also be fetched with cURL)
    $contents = file_get_contents("ftp://$ftpUser:$ftpPass@$ftpHost/$startDir/" . urldecode($_GET['file']));

    // Get mime type (requires PHP 5.3+)
    $finfo = new finfo(FILEINFO_MIME);
    $mimeType = $finfo->buffer($contents);

    // Set content type header and output file
    header("Content-type: $mimeType");
    echo $contents;
}
else {
    $dir = (isset($_GET['dir'])) ? $_GET['dir'] : '';

    $conn = ftp_connect($ftpHost) or die("Could not connect, please refresh in 2 seconds");
    ftp_login($conn, $ftpUser, $ftpPass);

    // change dir to avoid ftp_rawlist bug for directory names with spaces in them
    ftp_chdir($conn, "$startDir/$dir");

    // fetch the raw list
    $list = ftp_rawlist($conn, '');
    reset($list);

    while (list(, $item) = each($list)) {
        if(!empty($item)) {
            // Split raw result into pieces
            $pieces = preg_split("/[\s]+/", $item, 9);

            // Get item name
            $name = $pieces[8];

            // Skip parent and current dots
            if ($name == '.' || $name == '..' || $name == 'index.html')
                continue;
            if($n%3 == 0){echo "<tr>";}
            // Is directory
            if ($pieces[0]{0} == 'd') {
                echo "<a href='?dir={$dir}/{$name}'><strong>{$name}</strong></a><td>";
            }
            // Is file
            else {
                echo "<a href='displayer.php?file={$dir}/{$name}'>{$name}</a><td>";
            }
            $n++;
            }
        }
    }
    ftp_close($conn);
?>
    </tr>
    </tbody>
</table>
</body>
</html> 
```

但我得到一个奇怪的结果[点击这里查看我的页面](http://ahstpc.6te.net/site/1.php)
我的代码似乎有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:43:59.583

据我所知，您刚刚得到了一些不正确的标记，请确保您回显的每个结果都有一个开头和结尾：

```
// Is directory
            if ($pieces[0]{0} == 'd') {
                echo "<td><a href='?dir={$dir}/{$name}'><strong>{$name}</strong></a></td>";
            }
            // Is file
            else {
                echo "<td><a href='displayer.php?file={$dir}/{$name}'>{$name}</a></td>";
            } 
```

# jquery - 页面加载后的jQuery缩放

> ID：12962437
> 
> 赞同：0
> 
> 时间：2012-10-18T19:39:44.613
> 
> 标签：jquery, scale

我正在尝试`div`在页面加载后对 2 进行动画处理（一个接一个）。

我的目标是在延迟后`div 1`（从 的中心`div`）按比例缩小，然后在稍长的延迟后**`div 2`**按*比例缩小。*

另外，我还尝试让每个 div 在悬停时略微缩放，并在鼠标移出后恢复正常。

* * *

**编辑：**我在这里有一些东西[http://jsfiddle.net/uwybR/7/](http://jsfiddle.net/uwybR/7/)但悬停效果不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:46:38.760

像这样的事情可能是你想要做的：

```
$(document).ready(function() {
    $('#div1').animate({
        width:'new width',
        height:'new height'
    },500, function(){
        $('#div2').animate({
            width:'new width',
            height:'new height'
        }, 500)
    })
}) 
```

第二个 div 将在第一个 div 完成后进行动画处理。如果您希望它们几乎同时运行，您将不得不使用`setTimeout()`.

对于您的悬停检查[悬停功能](http://api.jquery.com/hover/)。

看看这个。悬停给我带来了一些麻烦，在它扩展之前似乎还有一点延迟，但这是我能得到的最接近的：[JSFiddle](http://jsfiddle.net/uwybR/16/)

# c++ - Cpp 自我复制访问被拒绝

> ID：12962438
> 
> 赞同：1
> 
> 时间：2012-10-18T19:39:45.040
> 
> 标签：c++, copy, replication

所以我试图在 C++ 中使用 .exe 创建一个自我复制的 .exe `code::blocks`。我已经编写了代码，并且在我的本地机器上它可以完美运行。在 Windows 7 虚拟机和其他 2 台 PC 上加载它后，我意识到它不起作用。它出现了错误

“无法复制文件，访问被拒绝”

我假设我的电脑可能设置了不同的权限，这就是为什么它适用于我的电脑而不适用于其他电脑的原因。这是代码部分：

```
ifstream check( "C:\\newfile.exe" );

if( !check.is_open() )
{
    char bufferf[MAX_PATH];
    GetModuleFileName( NULL, bufferf, MAX_PATH );
    std::stringstream str;

    str << "copy " << bufferf << " C:\\newfile.exe";
    system( str.str().c_str() );
    system( "start c:\\newfile.exe" );
    cout << __argv[0] << endl;
    return 1;
}
else
{
    return 0;

} 
```

请记住，我对 c++ 非常陌生，长期从事 java、php 和 c# 开发人员，但我认为是时候学习一门低级语言了。如果您对使它成为更有效的功能有任何建议，请告诉我。显示任何代码，因为我还不是 100% 熟悉所有库。长话短说，我想将当前的 exe 复制到 cdrive，运行复制的文件并关闭原始文件。这是我尝试的另一种方式

```
ifstream check( "C:\\newFile.exe" );

if( !check.is_open() )
{
    char bufferf[MAX_PATH];
    GetModuleFileName( NULL, bufferf, MAX_PATH );

    char * original_file = bufferf;
    char * new_file = ( char * )"c:\\newFile.exe";
    ( void ) CopyFile( ( LPCTSTR )original_file, ( LPCTSTR )new_file, FALSE );
    system( "start c:\\newFile.exe" );
    cout << __argv[0];
    return 1;
}
else
{
    return 0;
} 
```

仍然没有成功。但两者都在我的开发机器上完美运行（据我所知）我听说人们说你不能在 Windows 中复制正在运行的 exe 文件，但这不是真的，我觉得这是一个权限问题，但我可能错了。

欢迎任何关于自我复制的提示，我对新方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:44:18.637

请注意，Windows Vista 和 Windows 7 启用了 UAC，它不允许您“写入”某些文件夹。您可能必须在管理员模式下运行程序或完全禁用 UAC，您的程序才能将文件从一个位置复制/创建到受保护的特殊文件夹。

要请求用户允许程序在管理模式下运行，您必须定义清单文件并将其链接到您的应用程序：这会告诉您如何操作。

# version-control - 如何在 github 上维护不同的代码

> ID：12962439
> 
> 赞同：1
> 
> 时间：2012-10-18T19:39:46.480
> 
> 标签：version-control, github

我必须维护代码的基本版本和该代码的不同“变体”，并针对不同的客户站点进行客户特定的修改。

强制所有客户使用相同的变体会容易得多，或者拥有一个包含所有客户需求的超级变体。然而，这不是我世界的本质，我无法改变它。

鉴于这种环境，使用 github 的最佳方式是什么？

我可以为每个版本创建一个单独的存储库。我可以创建一个具有单独分支的存储库。在这两种情况下，我都知道如何使用 github 作为存储介质和每个变体的版本控制，但我不知道如何使用 github 来帮助管理代码分歧。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:49:34.920

根据您的问题，我会推荐一个带有 master 分支的 repo。您可以将其他分支用于“变体”。

棘手的部分是当提交到 master 时，它不会干净地合并到另一个分支中。您可以使用 进行合并提交`git merge`，但我更喜欢对`git rebase`新`HEAD`的 master 进行合并提交。这样，使用 master 的人可以轻松地从该分支中​​提取更改。

[**有关的**](http://github.com/dchelimsky/rspec/wiki/Topic-Branches)

# php - Subtracting path from document root in PHP

> ID：12962446
> 
> 赞同：4
> 
> 时间：2012-10-18T19:40:29.863
> 
> 标签：php

My current document root is this (via $_SERVER['DOCUMENT_ROOT']):

```
/var/www/html/clients/app/folder 
```

I need to generate one folder up:

```
/var/www/html/clients/app 
```

How would I go about doing this?

I had asked this in the past: [Dynamically finding paths, is there a better way?](https://stackoverflow.com/questions/4225254/dynamically-finding-paths-is-there-a-better-way)

However, I have this scenario which doesn't work:

*   Executed script is located here: root/f1/f2/f3/f4/f5/file.php.
*   This script includes another script located here: root/f6/file2.php

In file2.php, I needed the following code for this to work:

```
$base_path = dirname(realpath("../../../../do_not_remove.txt")); 
```

When in theory, based on its location, it should have been this:

```
$base_path = dirname(realpath("../do_not_remove.txt")); 
```

In practice, there would be a global available where this data could be passed. However, in this inherited project, there isn't thus I'm reusing this where I need it.

**Update #1**

Based on the answers, this seems to work great: `realpath($_SERVER['DOCUMENT_ROOT']."/../../");`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T19:46:43.747

well you could have - `$_SERVER['DOCUMENT_ROOT'] ."/../"` - even though it doesn't look too pretty

OR a slightly more propper way might be - `dirname( $_SERVER['DOCUMENT_ROOT'] )` - think this should work

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T19:46:52.623

```
$path = $_SERVER['DOCUMENT_ROOT']."/../"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T19:52:13.240

Using explode(), array_pop() and implode() :

```
<?php

//$path = $_SERVER['DOCUMENT_ROOT'];
$path = "/var/www/html/clients/app/folder";
$tmp = explode("/", $path);
array_pop($tmp);
$path_up = implode('/', $tmp);
echo $path_up; //output: /var/www/html/clients/app

?> 
```

# c# - 执行 LINQ to Entities 查询时填充实体中的属性

> ID：12962448
> 
> 赞同：0
> 
> 时间：2012-10-18T19:40:34.200
> 
> 标签：c#, entity-framework

我有一个实体类型，我们称之为事务，由实体框架版本 1 创建。我添加了以下属性：

```
public partial class Transaction
{
    public int CurrentMaxRevisionNumber { get; set; }
} 
```

我有以下查询：

```
public List<Transaction> GetTransactions(DateTime startDate, DateTime endDate)
{
   var query = from t in Repository.Transaction  
       let currentMaxRevisionNumber = 
        Repository.Transaction.Where(t1 => t1.TransactionId == t.TransactionId)
                               .Max(t1 => t.RevisionNumber)
       where t.StartDate >= startDate
             && t.EndDate < endDate)
    select t;

    return query.ToList();
} 
```

我们试图完成的业务规则如下：
- 应为原始日期的交易创建新记录，并使用代码表明它已被软删除并增加了修订号。
- 将在新日期创建交易的新记录，并增加修订号。

问题在于，确定何时处理交易的过程是一天一次地按顺序完成的，并且交易正在从一个日期移动到另一个日期，有时会不断地回到原来的状态。这可能导致给定事务的最大修订号将是特定日期的修订号，而不是事务的最大值。这就是我试图在查询中执行“让”的原因。

现在的问题是：
- 如何使用查询填充在部分类中创建的 CurrentMaxRevisionNumber 属性？
- 由于在任何给定日期可能有数百笔交易，我是否可以通过另一种方式来完成此操作而无需对每笔交易进行查询？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T16:20:20.237

所以我尝试的第一件事是使用反模式 SELECT n + 1，这是一个可怕的解决方案，但至少这向我们表明，通过获取正确的数据，问题将得到解决。它是这样的：

```
public List<Transaction> GetTransactions(DateTime startDate, DateTime endDate)
{
   var list = (from t in Repository.Transaction  
       where t.StartDate >= startDate
             && t.EndDate < endDate)
    select t).ToList();

    foreach(var item in list)
    {
        item.CurrentMaxRevisionNumber = Repository.Transaction.
                                        Where(t => t.TransactionId == item.TransactionId).
                                        Max(t => t.RevisionNumber);
    }

    return list;
} 
```

由于显而易见的原因，该解决方案是不可接受的，因此我们提出了以下建议：

```
public List<Transaction> GetTransactions(DateTime startDate, DateTime endDate)
{
   var query = (from t in Repository.Transaction       
       where t.StartDate >= startDate
             && t.EndDate < endDate)
    select new
    {
       OriginalTransaction = t,
       CurrentMaxRevisionNumber = Repository.Transaction.
                                        Where(t1 => t1.TransactionId == t.TransactionId).
                                        Max(t1 => t1.RevisionNumber);
    }).ToList();

    foreach(var item in list)
    {
       item.OriginalTransaction.CurrentMaxRevisionNumber = item.CurrentMaxRevisionNumber;
    }

    return list.Select(items => items.OriginalTransaction).ToList();
} 
```

通过使用匿名对象，我们可以在单个数据库访问中获取我们需要的所有数据，并使用循环来填充缺失的属性。

由于我们必须修改数据库和应用程序的自由度受到一定限制，因此该解决方案被证明是侵入性最小且性能更高的解决方案。

# wcf - WCF 和二进制数据

> ID：12962454
> 
> 赞同：1
> 
> 时间：2012-10-18T19:41:02.610
> 
> 标签：wcf

作为 WCF 调用的一部分，我需要传输一些二进制数据，特别是图像文件。我应该为 WCF 合同使用什么数据类型？

```
[DataContract]
public class ZombieTypeSUmmary
{
    [DataMember]
    public string ZombieTypeName { get; set; }

    [DataMember]
    public int ZombieTypeKey { get; set; }

    [DataMember]
    public string BriefDescription { get; set; }

    [DataMember]
    public ??? ThumbnailImage { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:55:36.837

`byte[]`在大多数情况下是最佳选择。除非您有非常大的二进制数据（这似乎不是您的情况，因为您正在谈论*缩略图*），否则您应该使用它，因为所有序列化程序都支持它。

如果您正在谈论非常大的二进制数据（您希望将对象流式传输，而不是将其序列化到缓冲区然后传输它），那么它就没有那么简单了。[没有直接支持数据合约内部的流式传输，但您可以使用一些东西，我在http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/25/wcf](http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/25/wcf-streaming-inside-data-contracts.aspx)的帖子中指出[-streaming-inside-data-contracts.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/03/25/wcf-streaming-inside-data-contracts.aspx)。

# c# - 未处理独立存储异常：未对独立存储文件流进行操作

> ID：12962457
> 
> 赞同：0
> 
> 时间：2012-10-18T19:41:14.793
> 
> 标签：c#, silverlight, windows-phone-7, xaml

![在此处输入图像描述](../Images/5017f41d04bbfc51394506b1713d23d5.png)

我正在使用 SDK 7.1 为 Windows Phone 开发一个简单的应用程序，但出现错误

> 未处理独立存储异常：未对独立存储文件流进行操作

内`MainPage.xaml.cs`

*代码片段：*

> 私人无效btnRd_file_Click（对象发送者，RoutedEventArgs e）
> 
> ```
>  {
> 
>        IsolatedStorageFile ISF = IsolatedStorageFile.GetUserStoreForApplication();
> 
>        IsolatedStorageFileStream FS = ISF.OpenFile("pwd1.txt", FileMode.Open, FileAccess.Read);
> 
>       using (StreamReader SR = new StreamReader(FS)) 
> ```

尝试在 Windows Phone 模拟器上运行应用程序时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T14:38:31.363

只需将给出异常的代码放在 try catch 块中

例如。

```
try {
  ..your code..
}
catch { ... code to handle exception ... } 
```

以上更改将处理所有可能的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:11:10.697

发生此类错误的原因可能不止一个。在您的情况下，您正在以读取模式打开文件，这意味着文件在执行之前必须存在于给定路径中

> 隔离存储文件流 FS = ISF.OpenFile("pwd1.txt", FileMode.Open, FileAccess.Read);

行代码。

如果文件存在于给定的路径，你仍然面临这个错误。比看看你是否在代码中的某个地方打开过这个文件，然后忘记使用 dispose 或 using 语句关闭流。

当您已经打开文件并忘记关闭/处置它时，也会发生此类问题。

**注意：** IsolatedStorageFileStream 不提供有关原始错误核心的准确/有用信息，因此开发人员必须调试并查看变量和对象的值才能获得问题核心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:55:35.950

如果文件不存在，您将收到此错误。您应该先检查它是否存在。

# arrays - 排序但旋转的数组

> ID：12962458
> 
> 赞同：7
> 
> 时间：2012-10-18T19:41:15.870
> 
> 标签：arrays, algorithm

给定一个排序但旋转的数组，你如何找到枢轴？我在一次采访中被问到这个问题。什么是旋转数组？

我在互联网上得到了这个，但根本不清楚。

> 在一个旋转排序的数组中，只能保证 A 和 B 中的一个被排序。
> 
> 枢轴是比左元素和右元素更小的元素。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T19:47:08.537

我认为一个排序的、旋转的数组是这样的：

排序：

```
2, 7, 32, 48, 55 
```

旋转：

```
 32, 48, 55, 2, 7 
```

`2`是支点。您需要找到枢轴的位置。

解决方案应该很简单：枢轴是排序结束和重新开始的点。这也是你“在网上找到的”：

（假设数组按升序排序。如果是降序，`<`则改为`>`）

```
for (i = 0; i<array.length; i++)
{
    if array[i+1] < array[i]
        return i + 1;
        break;
} 
```

**补充**：我能很快想到的分而治之的逻辑。只要第一个元素大于最后一个元素，就继续拆分数组。如果拆分（子）数组的第一个元素不大于最后一个元素，则第一个元素是原始数组的枢轴。

```
int left = 0;
int right = array.length - 1;
while (array[left] > array[right])
{
    int mid = left + (left + right) / 2;
    if(array[mid] > array[right])
    {
        left = mid + 1;
    }
    else
    {
        right = mid;
    }
}
return left; 
```

顺便说一句，如果你在面试中被问到这个问题，并且你不知道什么是排序旋转数组，你可以问。如果面试官向你解释，然后你给他们一个解决方案，你应该很好。就我个人而言，我不在乎有人不知道术语。只要他们能思考，能找到逻辑和代码，应该没问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-23T10:16:22.953

我用 Java 实现了 @Nivas 描述的 D&D 算法，并处理了边缘情况。请参阅下面的代码和测试。

# 代码：

```
import org.apache.log4j.Logger;

import java.util.Collections;
import java.util.List;
import java.util.Random;

public class RotatedListFindPivot {
    private static final Logger logger = Logger.getLogger(RotatedListFindPivot.class);

    /**
     * With a sorted then rotated list, return the pivot (i.e. smallest or largest),
     * depending on if it was ASCENDING or DESCENDING
     * <p>
     * Multiple appearance of the same value is allowed. It will work as defined:
     * return the smallest/largest, or one of the smallest/largest elements
     * <p>
     * In the extreme case where all elements in the list are equal, it returns any element
     *
     * @param list
     * @param sortingOrder
     * @param <E>
     * @return the pivot
     */

    public static <E extends Comparable> E rotatedListFindPivot(List<E> list, Util.SortingOrder sortingOrder) {
        if (list == null || list.size() == 0) {
            return null;
        }
        if (list.size() == 1) {
            return list.get(0);
        }
        /*
        Divide and Conquer. Given a rotated list, pick any element to be mid (the first of right half),
        It holds that only either one half is sorted. If both halves sorted, then left most element is pivot
        */
        int left = 0, right = list.size() - 1;
        /*
        First need to deal with special case: 3,3,3,1,2,3,3,3,3,3,3
        This will seem as if both halves sorted.
        */

        E removedFlatEdge = null;
        if (list.get(left).equals(list.get(right))) {
            removedFlatEdge = list.get(0);
        }
        while (right > left
                && list.get(left).equals(list.get(right))
                && list.get(left).equals(removedFlatEdge)) {
            right--;
            left++;
        }
        if (right < left) {
            return removedFlatEdge;
        }
        E result = rotatedListFindPivotRecur(list, left, right, sortingOrder);
        return removedFlatEdge == null ? result : (removedFlatEdge.compareTo(result) < 0 ? removedFlatEdge : result);
    }

    private static <E extends Comparable> E rotatedListFindPivotRecur(List<E> list, int left, int right, Util.SortingOrder sortingOrder) {
        if (left == right) {
            return list.get(left);
        }

        int mid = left + (int) Math.ceil(((double) right - left) / 2);

        /*
        Both sorted. Is there a rotation (gap)?
         */
        if (list.get(left).compareTo(list.get(mid - 1)) <= 0 && list.get(mid).compareTo(list.get(right)) <= 0) {
            if (list.get(mid - 1).compareTo(list.get(mid)) <= 0) {
                /*
                No gap
                 */
                return list.get(left);
            } else {
                /*
                There is a gap. Mid is pivot
                 */
                return list.get(mid);
            }

        }

        /*
        Left half sorted
         */
        if (list.get(left).compareTo(list.get(mid)) <= 0) {
            return rotatedListFindPivotRecur(list, mid + 1, right, sortingOrder);
        }

        /*
        Right half sorted
         */
        if (list.get(mid).compareTo(list.get(right)) <= 0) {
            return rotatedListFindPivotRecur(list, left, mid - 1, sortingOrder);
        }

        logger.warn("Should never reach here");
        return null;
    }

    public static <E extends Comparable> E rotatedListFindPivotNaive(List<E> list, Util.SortingOrder sortingOrder) {
        if (list == null || list.size() == 0) {
            return null;
        }

        boolean isAscending = sortingOrder == Util.SortingOrder.ASCENDING ? true : false;
        E pivot = list.get(0);
        for (E e : list) {
            if ((e.compareTo(pivot) < 0) == isAscending) {
                pivot = e;
            }
        }

        return pivot;
    }

    public static <E> List<E> rotate(List<E> input) {
        Random random = new Random();
        int rotateBy = random.nextInt(input.size());
        Collections.rotate(input, rotateBy);
        return input;
    }
} 
```

# 测试：

```
import org.junit.Test;

import java.util.*;

import static org.junit.Assert.assertEquals;

public class RotatedListFindPivotTest {

    private static final int RANDOM_LIST_LOW = 1;
    private static final int RANDOM_LIST_SIZE = 12;
    private static final int RANDOM_LIST_HIGH = 6;
    private static final int NUM_RANDOM_TESTS = 12000000;

    @Test
    public void testTwoLevelsOfPlateaus() throws Exception {

        Integer result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3)),
                Util.SortingOrder.ASCENDING);
        assertEquals("TwoLevelsOfPlateaus: [3, 3, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3]", new Integer(1), result);
    }

    @Test
    public void testRotatedListFindPivotRemovedEdgeIsPivot() throws Exception {
        Integer result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(0, 0, 2, 3, 3, 3, 4, 4, 5, 5, 0, 0)),
                Util.SortingOrder.ASCENDING);
        assertEquals("RemovedEdgeIsPivot: [0, 0, 2, 3, 3, 3, 4, 4, 5, 5, 0, 0]", new Integer(0), result);
    }

    @Test
    public void testRotatedListFindPivotRandomized() throws Exception {

        for (int i=0; i<NUM_RANDOM_TESTS; i++) {
            List<Integer> input = Util.getRandomIntegerList(RANDOM_LIST_SIZE, RANDOM_LIST_LOW, RANDOM_LIST_HIGH);
            Collections.sort(input);
            input = RotatedListFindPivot.rotate(input);
            Integer naiveResult = RotatedListFindPivot.rotatedListFindPivotNaive(input, Util.SortingOrder.ASCENDING);
            Integer result = RotatedListFindPivot.rotatedListFindPivot(input, Util.SortingOrder.ASCENDING);
            assertEquals("Results must hold for inputs: " + input, naiveResult, result);
        }

    }

    @Test
    public void testRotatedListFindPivotTwoSegmentFlatList() throws Exception {
        Integer result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(3, 3, 1, 1)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Two Segment flat list should return any from right half, {3,3,1,1}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(3, 3, 3, 1, 1)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Two Segment flat list should return any from right half, {3,3,3,1,1}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(3, 3, 1, 1, 1)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Two Segment flat list should return any from right half, {3,3,1,1,1}", new Integer(1), result);
    }

    @Test
    public void testRotatedListFindPivotSingletonList() throws Exception {
        Integer result = RotatedListFindPivot.rotatedListFindPivot(
                Collections.singletonList(1),
                Util.SortingOrder.ASCENDING);
        assertEquals("Singleton list should return the elem, {1}", new Integer(1), result);
    }

    @Test
    public void testRotatedListFindPivotSimpleFlatList() throws Exception {
        Integer result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(1, 1)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Total flat list should return any elem, {1,1,1}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(1, 1, 1)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Total flat list should return any elem, {1,1,1}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(1, 1, 1, 1)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Total flat list should return any elem, {1,1,1,1}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(2, 1, 2, 2)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Simple flat list should work, {2,1,2,2}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(2, 2, 1, 2)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Simple flat list should work, {2,2,1,2}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(2, 1, 2)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Simple flat list should work, {2,1,2}", new Integer(1), result);
    }

    @Test
    public void testRotatedListFindPivotEmptyList() throws Exception {
        Integer result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(),
                Util.SortingOrder.ASCENDING);
        assertEquals("Empty list should return null", null, result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                null,
                Util.SortingOrder.ASCENDING);
        assertEquals("Null list should return null", null, result);
    }

    @Test
    public void testRotatedListFindPivotSimpleCase() throws Exception {
        Integer result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(1, 2, 3)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Not rotated should return pivot, {1,2,3,4}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(4,1,2,3)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Simple case should hold, {4,1,2,3}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(4,1,2,3)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Simple case should hold, {3,4,1,2}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(4,1,2,3)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Simple case should hold, {3,4,1,2}", new Integer(1), result);

        result = RotatedListFindPivot.rotatedListFindPivot(
                new ArrayList<Integer>(Arrays.asList(4,1,2,3)),
                Util.SortingOrder.ASCENDING);
        assertEquals("Simple case should hold, {2,3,4,1}", new Integer(1), result);
    }
} 
```

# jquery - jQuery如何选择元素的父级

> ID：12962459
> 
> 赞同：1
> 
> 时间：2012-10-18T19:41:15.367
> 
> 标签：jquery

我有这个元素：

```
<div class="ELEMENT_LISTY" style="">

<div class="TITLE" id="174">string</div>
<div class="BUTTONY">
  <div class="POGLAD"></div>
  <div class="ZMIEN_NAZWE"></div>
  <div class="USUN"></div>
</div>

</div> 
```

`.ELEMENT_LISTY`仅当我有 id 时如何选择带有类的元素`#174`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:42:26.510

```
$('#174').parent() 
```

会做的。

应该注意的是，数字 ID 在浏览器中可能很棘手。您应该考虑使用以字母开头的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:42:38.067

这应该有效。

```
$('#174').parents('.ELEMENT_LISTY').... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:43:18.740

你可以做：

```
if ( $('div#174').length ) { //if element #174 exists
   $('div.ELEMENT_LISTY').whatever..
} 
```

# perl - Perl 中的命名参数

> ID：12962461
> 
> 赞同：3
> 
> 时间：2012-10-18T19:41:23.373
> 
> 标签：perl, parameter-passing

我试图在 Perl 中使用命名参数。我一直在使用[http://perldesignpatterns.com/?NamedArguments](http://web.archive.org/web/20160920193219/http://perldesignpatterns.com/?NamedArguments)作为参考。

这似乎是有道理的。但是，我似乎无法真正获得发送的值。

我也尝试过更改为`$args{'name'}`，`$args{"name"}`但没有运气。我似乎无法获得传入的值。我需要查看哪个方向来弄清楚到底发生了什么？

### 文件 .pm

```
package doh;
sub new ()
{
   my %args = @_;
   $name = $args{name};
   print $name;
}
1;
__END__ 
```

### 文件 test.pl

```
use warnings;
use doh;
$trial = doh::;
$trial->new(name => "Tyson"); 
```

运行 test.pl 时不打印输出。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T19:57:08.350

我不确定你要做什么`$trial = doh::;`，但你的主要问题是你试图在处理你的方法调用者之前处理参数。

首先，启动每个 Perl 文件

```
use strict;
use warnings; 
```

是的，你需要两者。

`->`在 Perl 中调用方法时（与普通子例程相反），运算符左侧的东西（调用*者*）被推到参数列表的开头。因此，您需要先将其从列表中删除。对于您的构造方法，调用者通常是类名。对于实例方法，它将是对象本身。所以

```
sub new {
    my $class = shift;
    my %args = @_;

    print "name is: $args{name}\n";
} 
```

（不想用`shift`也可以直接写`my ( $class, %args ) = @_;`）

对于实例方法，约定是命名变量`$self`。

另请注意，我已经删除了子例程名称后面的括号；这些对 OO 方法没有任何功能，而且它们可能不会按照您的想法去做。

# c# - 在 ASP.Net HttpModule 中使用静态变量

> ID：12962462
> 
> 赞同：2
> 
> 时间：2012-10-18T19:41:23.797
> 
> 标签：c#, asp.net, iis, httpmodule

我正在使用 HttpModule 拦截对我的网站的每个请求，以便为它们分配身份验证 cookie，这只是一个初步版本，但我的 HttpModule 中有一个静态列表，并且对于每个新请求，我都在其中添加一个元素名单。出于测试目的，我将它们全部写入响应以查看我的方法是否有效，但无论列表中有多少用户，它都只会给我两个值。

这是我的代码示例，我通过用字符串列表替换用户列表来保持简单。

```
public class SCCModule : IHttpModule
{
    private static List<string> _users = new List<string>();

    public void Init(HttpApplication context)
    {
        context.PreRequestHandlerExecute += OnPreRequestHandlerExecute;
    }
    public void Dispose()
    {

    }
    public void OnPreRequestHandlerExecute(Object source, EventArgs e)
    {
        HttpApplication app = (HttpApplication)source;
        HttpResponse response = app.Context.Response;
        HttpRequest request = app.Context.Request;

        _users.Add("A user from " + DateTime.Now + "</br>");

        foreach(var u in _users)
        {
            response.Write(u);
        }
    }
} 
```

从网站加载示例 index.html 时，它给了我：

2012 年 10 月 18 日下午 3:37:33 的用户

2012 年 10 月 18 日下午 3:37:35 的用户

关于我的设置的信息：我正在运行 IIS7.5，我已经添加了一个模块，它是执行优先级的第一个。我在 web.config 中启用了调试。我的 VisualStudio 设置为构建调试配置，并且有一个构建后事件可以直接将我的 DLL 复制到我网站的 bin 文件夹中。我将自己附加到 w3wp.exe 进程以对其进行调试。

一个有趣的事实：调试时。我在 index.html 页面上点击刷新的前两次将触发我的断点，之后它不会。我输入的任何新 URI 只会命中断点两次。

那么为什么即使我可以刷新十次，似乎也只有两个结果呢？

提琴手结果： ![在此处输入图像描述](../Images/6bb3eed50a64c36efcdc5aaa62c98ce7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:17:57.700

您的浏览器已经缓存了 html、图片和 css 等资源。

浏览器缓存它们后，除非您在 IE 中单击 Ctrl+F5，否则不会再次询问它们。

您可以使用 Request.Path 查看请求。

```
HttpRequest request = app.Context.Request;
_users.Add("A user from " + DateTime.Now + " - " + 
    app.Context.Request.Path + "</br>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:33:57.830

问题出在 IIS 本身。启用了输出缓存，因此即使客户端请求新页面，服务器也不会发送任何新页面。

为了解决这个问题，我去了输出缓存-> 编辑功能设置...-> 我取消选中了启用缓存和启用内核缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T00:29:19.053

试试这个。

```
<location path="data">
  <system.webServer>
    <staticContent>
        <clientCache cacheControlMode="NoControl" />
    </staticContent>
    <caching enabled="false" enableKernelCache="false" />
  </system.webServer>
</location> 
```

# ajax - Window.Location.reload() 与 AJAX

> ID：12962463
> 
> 赞同：1
> 
> 时间：2012-10-18T19:41:27.430
> 
> 标签：ajax, gwt

在我的 GWT 应用程序（正在维护中）上，我想刷新一个人的列表，一旦其中一个人被删除。

我正在研究如何发送正确的 AJAX 请求以刷新关注者列表，但我很好奇调用是否可以接受`Window.Location.reload()`？

调用重新加载似乎很懒惰而且过大，因为只有页面的一部分应该更新 - AJAX。

请告诉我是否`Window.Location.reload()`可以，为什么/为什么不可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:43:55.593

`window.location.reload()`导致整个页面重新加载。AJAX 旨在允许更新页面上的内容而无需离开它（通过重新加载或其他方式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:55:43.560

如果您只需要删除单行文本，切勿重新加载页面。根据在您的案例中使用哪个小部件来显示名称列表，很可能只需要 GWT 中的一行代码即可将其删除。这是重新加载页面所需的尽可能多的代码，但它提供了更好的用户体验并消耗更少的资源。

# c - 未定义的 _red 引用

> ID：12962464
> 
> 赞同：0
> 
> 时间：2012-10-18T19:41:29.830
> 
> 标签：c, sockets, cygwin

我正在编写一个简单的客户端程序“套接字编程”，在使用cygwin编译代码时出现此错误“未定义对'_red'的引用代码如下。我一直在用这个语句编译gcc client.c我真的不明白为什么我收到此错误。我真的可以使用一些帮助。代码如下。

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <stdlib.h>
#include <strings.h>
#include <netinet/in.h>

#define SERVER_TCP_PORT 2000
#define BUFLEN 256

int main(int argc,char **argv)
{
    int n,bytes_to_read;
    int sd,port;
    struct hostent *hp;
    struct sockaddr_in server;
    char *host,*bp,rbuf[BUFLEN],sbuf[BUFLEN];
    switch(argc) {
        case 2:
            host = argv[1];
            port = atoi(argv[2]);
            break;
        default:
            fprintf(stderr,"Usage: %s host[port] \n",argv[0]);
            exit(1);
    }
    /*Create a streamm socket*/
    if ((sd=socket(AF_INET,SOCK_STREAM,0))==-1){
        fprintf(stderr,"Can't create a socket\n");
        exit(1);
    }
    bzero ((char *)&server,sizeof(struct sockaddr_in));
    server.sin_family = AF_INET;
    server.sin_port = htons(port);
    if((hp = gethostbyname(host))==NULL){
        fprintf (stderr,"Can't get server's address\n");
        exit(1);
    }
    //bcopy(hp->h_addr,(char *)&server.sin_addr,hp->h_length);
    /*connecting to the server*/
    if (connect (sd,(struct sockaddr *)&server,sizeof(server))==-1){
        fprintf(stderr,"Can't connect \n");
        exit(1);
    }
    printf("Connected:server's address is %s\n",hp->h_name);
    printf("Transmit: \n");
    gets(sbuf);                  /*get user's text*/
    write (sd,sbuf,BUFLEN);      /*send it out*/
    printf("Receive: \n");
    bp = rbuf;
    bytes_to_read = BUFLEN;
    while ((n=red(sd,bp,bytes_to_read))>0){
        bp+=n;
        bytes_to_read -=n;
    }
    printf("%s\n",rbuf);
    close(sd);
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:44:20.113

在线上

```
while ((n=red(sd,bp,bytes_to_read))>0){ 
```

它有红色，你可能的意思是阅读

# c# - 如何正确获取 Visual Studio 2008 的 GetTypeFromProgID

> ID：12962467
> 
> 赞同：0
> 
> 时间：2012-10-18T19:41:37.560
> 
> 标签：c#, .net, visual-studio-2008, interop, envdte

我正在按照此处的说明进行操作：

[http://msdn.microsoft.com/en-us/library/ms228772(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms228772(v=vs.80).aspx)

对于 .net 3.5 Visual Studio 2008 来解决这个问题：

[呼叫被被呼叫者拒绝](https://stackoverflow.com/questions/12358944/call-was-rejected-by-callee)

对于这行代码：

```
t = System.Type.GetTypeFromProgID("VisualStudio.DTE.8.0",
              true); 
```

我收到此错误：

> COMException 未处理：无效的类字符串（来自 HRESULT 的异常：0x800401F3 (CO_E_CLASSSTRING)）

有谁知道这意味着什么，我做错了什么？

非常感谢您的指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:52:42.267

您的代码与您使用的标签不匹配。VS2008 是 Visual Studio 9.0 版。所以正确的 progid 是`VisualStudio.DTE.9.0`. 版本号的完整列表：

*   VS2002：7.0
*   VS2003：7.1
*   VS2005：8.0
*   VS2008：9.0
*   VS2010：10.0
*   VS2012：11.0
*   VS2013：12.0

您也可以使用`VisualStudio.DTE`progid。您将获得最后安装的任何版本的 VS。有点随意。

# tsql - 如何在使用 SELECT DISTINCT & MAX(ID) 删除重复项时显示表中的所有列？

> ID：12962473
> 
> 赞同：2
> 
> 时间：2012-10-18T19:42:00.790
> 
> 标签：tsql, sql-server-2005, distinct, max

我有一张表，在某些情况下，同一员工有多个条目。

我只想要 ID 最高的员工记录。

表结构和数据示例

```
ID  FirstName   LastName    Initials    AreaID  SupervisorID    Forms   JobClass    JobTitle
----------------------------------------------------------------------------------------    
805/    Trey/   W/  TW/ 93/ 404/    99/NA/  Temporary/ R1_Temp
752/    Trey/   W/  TW/ 93/ 404/    99/NA/  Temporary/ R1_Temp 
399/    Ron/    V/  RV/ 144/    NULL/   99/NULL/    NULL/   NULL
374/    Ron/    V/  RV/ 94/ NULL/   99/NULL/    NULL/   NULL
379/    Ron/    V/  NULL/   0/  NULL/   99/NULL/    NULL/   NULL
378/    Dax/    T/  NULL/   0/  NULL/   40/NULL/    NULL/   NULL
373/    Dax/    T/  DT/ 94/ NULL/   40/NULL/    NULL/   NULL
398/    Dax/    T/  DT/ 94/ 276/    99/NULL/    NULL/   NULL 
```

如您所见，Ron V 有三个条目。

目前有约 1000 个条目（包括重复项）。下面的查询返回 ~700（不包括重复项），这是正确的。

```
SELECT DISTINCT LastName, MAX(ID) as ID
FROM Employees GROUP BY LastName 
order by LastName DESC 
```

这仅返回 ID 和 LastName。我们需要返回上表中的所有值。如何在单个查询中执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:55:57.010

您可以使用[公用表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.90%29.aspx)和[row_number()](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.90%29.aspx)函数为每个不同`FirstName`/`LastName`对选择具有最大 ID 的行。

这是`SELECT`声明：

```
;with DistinctByName as (
  select 
    *,
    row_number() 
      over (
        partition by FirstName, LastName
        order by ID desc
      ) as RowNumber
  from Employees
)
select 
  [ID], 
  [FirstName], [LastName], [Initials], 
  [AreaID], [SupervisorID], [Forms], 
  [JobClass], [JobTitle]
from DistinctByName
where RowNumber = 1 
```

您可以在线尝试此代码：[http ://www.sqlfiddle.com/#!3/a791e/2](http://www.sqlfiddle.com/#!3/a791e/2)

关于其工作原理的简要说明：`row_number()`上面的函数返回当前行在所有具有相同`FirstName`和`LastName`（`partition by`子句）的行中的索引，按 . 的降序排列`ID`。

该`row_number()`函数不能出现在`WHERE`子句中，因此我们必须将 select 包装在 CTE 中，以便能够按此值进行过滤。

外部`SELECT`语句有条件`where RowNumber = 1`，这意味着对于任何不同的 FirstName/LastName 对，我们只取最高的记录`ID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:53:44.760

你可以重新加入餐桌。像下面这样的东西应该可以工作。

```
SELECT * FROM (
    SELECT DISTINCT LastName, MAX(ID) as ID FROM Employees
) distinctRows
inner join Employees e on e.ID = distinctRows.ID 
```

# mysql - SQL 语句优化：为什么命令运行缓慢？

> ID：12962474
> 
> 赞同：1
> 
> 时间：2012-10-18T19:42:03.693
> 
> 标签：mysql, sql, query-optimization, indexing, sql-like

我有三个应该连接的表，查询如下所示：

```
select distinct a.job 
from a
join  b on  a.job=b.id 
join  c on  c.id =a.path  
where c.path like '//depot/a/b/c/d/MARSR_CL286896_297899/%'; 
```

此查询将始终超时。但是，如果我将路径比较更改为其他条件，则查询将完美运行，例如：

```
 select distinct a.job 
 from a
 join  b on  a.job=b.id 
 join  c on  c.id =a.path  
 where c.path like '//depot/a/b/c/d/%'; 
```

考虑到路径参数的不同，数字和下划线会不会是减慢语句的罪魁祸首？我为“路径”字段创建了索引

## “解释”命令的结果

```
1   SIMPLE  b   index   PRIMARY       job      62           73580   Using index; Using temporary
1   SIMPLE  a   ref     path,job      job       8   b.id    153 
1   SIMPLE  c   eq_ref  PRIMARY,path  PRIMARY   8   a.path  1   Using where 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:44:21.490

是的。下划线也是通配符，它​​匹配任何（单个）字符，因此这使得查询变得相当复杂，因为它只能使用第一部分的索引，直到第一个下划线，并且需要扫描所有匹配项在那部分用一个相对复杂的正则表达式来匹配其余部分，否则它可以做一个简单的“开始于”。

您应该将其转义以将其视为正常的下划线。`\`您可以通过在下划线前添加 a 来转义它。如果需要，您也可以像这样转义百分号`\%`。

```
select distinct a.job 
from a
join  b on  a.job=b.id 
join  c on  c.id =a.path  
where c.path like '//depot/a/b/c/d/MARSR\_CL286896\_297899/%'; 
```

# gcc - GCC 语法检查确保 NULL 作为具有可变参数的函数调用中的最后一个参数传递

> ID：12962477
> 
> 赞同：1
> 
> 时间：2012-10-18T19:42:27.997
> 
> 标签：gcc, pragma, syntax-checking

我想做一些类似于在 GCC 中如何对 printf 样式调用进行语法检查的事情（以确保参数列表实际上对于调用是正确的）。

我有一些函数采用可变数量的参数。无论传入多少参数，我都需要确保传递的最后一个参数是 a `NULL`，而不是强制发送哪些参数。

有没有办法让 GCC 在*编译时*进行这种类型的语法检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:48:33.170

你可能需要[哨兵函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)，所以声明你的函数

```
void foo(int,double,...) __attribute__((sentinel)); 
```

您可以考虑使用插件或[MELT](http://gcc-melt.org/)扩展自定义 GCC，以更精确地检查您的可变参数函数。也就是说，您可以使用自己的属性扩展 GCC，这些属性可以进行更精确的检查（或者只是根据您的函数名称进行额外的检查）。

^([melt-examples 的例子](https://github.com/bstarynk/melt-examples)是`ex06/`对[jansson](http://www.digip.org/jansson)库做类似的检查；不幸的是，该示例在 2012 年 10 月 18 日今天不完整，我仍在努力。)

此外，您可以定义一个可变参数宏来调用这样的函数，方法是始终添加`NULL`例如：

```
#define FOO(N,D,...) foo((N),(D),##__V_ARGS__,NULL) 
```

然后通过编码`FOO(i+3,3.14,"a")`你会得到`foo((i+3),(3.14),"a",NULL)`，所以你确定`NULL`附加了 a 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:48:59.837

Basile Starynkevitch 是对的，使用函数属性。还有很多其他有用的函数属性，比如能够告诉编译器“如果调用者没有检查这个函数的返回值，那就是一个错误。”

您可能还想看看[夹板](http://www.splint.org)是否可以为您检查，但我不这么认为。我想它会留在我的记忆中。

如果你还没有读过这个 GCC 编译器标志页面，也可以这样做。里面有很多方便的支票。 [http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)

# php - 从 PHP 列表中输入 .val()

> ID：12962484
> 
> 赞同：2
> 
> 时间：2012-10-18T19:42:43.143
> 
> 标签：php, jquery, ajax, json, forms

我正在尝试从列表（listDIV）中获取信息以显示在我的表单（formDIV）中，我正在使用 JSON 从数据库中获取信息。我只收到错误“数据库错误，请选择其他内容。” 在我的 textarea 字段中，这让我相信我的 PHP 有问题。

HTML & JS：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function() {
$("#productList").change(function() {

    var action = $("#productForm").attr('action');
    var form_data = {
        id: $('#productList').val(),
        name: $("#name").val(),
        price: $("#price").val(),
        img: $("#img").val(),
        description: $("#description").val()
    };

var id="something";
    $.getJSON("getProduct.php",form_data,function(data){
        switch(data.retval){
            case 0: $("#name").value(data.data.prodName);
            break;
            default: $("#description").html("Database error, please select something else.");
            break;
        }
        });
    });
});
</script>  
</head><body>

<div id="listDIV">
<select id="productList" name="productList" size="8">
    <option value="123" class="prodID">Terminator Series</option>
    <option value="124" class="prodID">2001 A Space Odyssey</option>
    <option value="125" class="prodID">Serenity</option>
    <option value="126" class="prodID">Alien Quadrilogy</option>
    <option value="127" class="prodID">12 Monkeys</option>
    <option value="128" class="prodID">Final Fantasy</option>
</select>
</div><div id="formDIV">
<form id="productForm" action="getProduct.php" method="post">
    <input type="text" id="name" placeholder="Name" /><br />
    <input type="text" id="price" placeholder="Price" /><br />
    <input type="text" id="img" placeholder="Image" /><br />
    <textarea id="description" placeholder="Description"></textarea><br />
<input type="submit" id="save" value="Save" />
</form>
</div>
</body></html> 
```

PHP (getProduct.php):

```
<?php
ob_start();
session_start();
mysql_connect('localhost', 'root', 'root') or 
    die('Could not connect: ' . mysql_error());
mysql_select_db('productDB') or
    die ('Can\'t use database: ' . mysql_error());

// retval: 0 - login ok, 1 - login failed, 2 - internal error
$json = array("retval" => 2, "data" => NULL, "debug" => "");

 $id=json_decode($_REQUEST['id']);
 $prodID=$id->id;

$sql="SELECT * FROM productTB WHERE prodID=" . $prodID;

$json['debug'] .= "SQL query was: ".$sql."\n";
$result=mysql_query($sql);
if (!$result) {
    $json['debug'] .= "SQL query failed\n";
    $json['debug'] .= "Other output: ". ob_get_contents();
    ob_end_clean();
die(json_encode($json));
}
$count=mysql_num_rows($result);

if($count==1){
    $json['retval'] = 0;
    $json['data'] = mysql_fetch_assoc($result);
} else {
    $json['retval'] = 1;
}
$json['debug'] .= "Other output: ". ob_get_contents();
ob_end_clean();
echo json_encode($json); 
```

我的数据库的表结构：

```
--
-- Table structure for table `productTB`
--

CREATE TABLE `productTB` (
`prodID` int(11) NOT NULL,
`prodName` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
`prodPrice` decimal(10,2) NOT NULL,
`prodDesc` longtext COLLATE utf8_unicode_ci NOT NULL,
`prodImg` varchar(30) COLLATE utf8_unicode_ci NOT NULL,
PRIMARY KEY (`prodID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:54:05.547

您需要传入变量..而不是字符串

```
$sql="SELECT * FROM productTB WHERE prodID=" . $prodID; 
```

虽然我建议使用preparedstatements

**编辑：**

您没有传递`ID`到您的 php 页面。这是您可以访问的内容 - 这些是您传递给 PHP 的内容 -

改变

```
var form_data = {
    name: $("#name").val(),
    price: $("#price").val(),
    img: $("#img").val(),
    description: $("#description").val()
}; 
```

至

```
var form_data = {
    id: $('#productList').val(), // <-- pass the id
    name: $("#name").val(),
    price: $("#price").val(),
    img: $("#img").val(),
    description: $("#description").val()
}; 
```

您需要传递`ID`到页面或查询以`ID`从数据库中获取第一个。然后您可以使用查询中的 ID 来获取结果

# html - 为什么最大高度不在桌子上工作？

> ID：12962487
> 
> 赞同：5
> 
> 时间：2012-10-18T19:42:57.803
> 
> 标签：html, css, css-tables

有人可以向我解释为什么**最大高度**不适用于表格元素吗？

这是[代码](http://jsfiddle.net/PYDf2/)

 `* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T19:44:50.533

> 在 CSS 2.1 中，'min-height' 和 'max-height' 对表格、内联表格、表格单元格、表格行和行组的影响是未定义的。

阅读[规范](http://www.w3.org/TR/CSS21/visudet.html#min-max-heights)。

`display: block`如果要强制，请将表设置为`max-height`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:46:37.473

您必须将表格包装在 DIV 中以使最大高度起作用。正如 bookcasey 提到的，表格的最大高度在规范中是未定义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:47:06.153

您需要指定显示。尝试显示：阻止；`

# java - 一个 netty 缓冲区问题中包含多条消息

> ID：12962490
> 
> 赞同：4
> 
> 时间：2012-10-18T19:43:16.090
> 
> 标签：java, netty, decode, channel

我使用 netty 网络库为游戏客户端构建了一个登录服务器。
该游戏客户端喜欢在单个缓冲区中发送多个数据包，这会带来问题；这个问题是在 netty 解码类中，它只能返回一条消息。

那么我不可能将多个数据包读入多个消息并在一个解码方法调用中返回它们。

我的问题是：我应该如何最好地在一个 DecoderClass.decode() 方法调用中接收多个数据包？由于我只能返回一个对象，我很困惑。

我的初步解码课程如下：

```
protected Object decode(ChannelHandlerContext ctx, Channel c, ChannelBuffer buf,           
    VoidEnum state) throws Exception {
    short length = -1;
    short opcode = -1;
    short security = -1;

    while(buf.readableBytes() != 0 ){
        length = buf.readShort();
        opcode = buf.readShort();
        security = buf.readShort();
    }

    System.out.println("---------------------------------------");
    System.out.println("receivedLength: " + length);
    System.out.println("receivedOPCode: " + opcode);
    System.out.println("receivedSecurity: " + security);
    System.out.println("---------------------------------------");

    MessageCodec<?> codec = CodecLookupService.find(opcode);
    if (codec == null) {
        throw new IOException("Unknown op code: " + opcode + " (previous opcode: " + previousOpcode + ").");
    }

    previousOpcode = opcode;

    return codec.decode(buf); 
```

我的完整 github 存储库在这里：[https ://github.com/desmin88/LoginServer](https://github.com/desmin88/LoginServer)

我希望我提供了足够的信息，以便有人能够充分理解我的问题

谢谢，

比利

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:07:15.743

您需要使用 a`FrameDecoder`将接收到的数据拆分为多个“帧”以传递给您的解码器。的 API 参考中有一些[示例代码](http://static.netty.io/3.5/api/org/jboss/netty/handler/codec/frame/FrameDecoder.html)`FrameDecoder`。

而不是更多的评论，你会做这样的事情：

1.  实现您自己的`FrameDecoder`或使用现有的之一。假设您实现了自己的`MyGameFrameDecoder`. 如果您自己编写，我建议您查看[`ReplayingDecoder`](http://static.netty.io/3.5/api/org/jboss/netty/handler/codec/replay/ReplayingDecoder.html)（这很糟糕）。
2.  与现有的解码器 ( ) 一起添加`MyGameFrameDecoder`到`ChannelPipeline`服务器端`DecoderClass`。

看起来像这样：

```
/* ... stuff ... */
pipeline.addLast("framer", new MyGameFrameDecoder());
pipeline.addLast("decoder", new DecoderClass());
/* ... more stuff ... */ 
```

然后传入的数据将通过`FrameDecoder`并将流分解为“帧”，然后将其发送到您的解码器，该解码器可以处理将数据转换为您可以操作的对象。

# sql - 具有许多值的 sql like 子句

> ID：12962492
> 
> 赞同：4
> 
> 时间：2012-10-18T19:43:23.360
> 
> 标签：sql, oracle, sql-like

我的表中有 4 列。现在，由于这更像是一项数据清理任务，所以我对性能并不是那么特别。但我仍然想知道可能的选择。

看下面的查询：

```
SELECT * FROM dsopi_person_addr_rule ADDR WHERE 
addr.src_address_line1 LIKE '%DEP%' 
OR addr.src_address_line2 LIKE '%DEP%'
OR addr.src_address_line3 LIKE '%DEP%'
OR addr.src_address_line4 LIKE '%DEP%'; 
```

与 DEP 类似，我还有 10 场比赛。我需要为所有 4 个地址行重复每个匹配项。有更好的方法吗？我个人讨厌一次又一次地写作。

**更新：以下是答案

```
SELECT *
FROM dsopi_person_addr_rule ADDR
WHERE regexp_like (UPPER(addr.src_address_line1),      'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:54:32.843

你可以试试[regexp_like](http://docs.oracle.com/cd/B14117_01/server.101/b10759/conditions018.htm)函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:47:19.947

您可以尝试编写一个存储过程，将“DEP”部分作为参数输入。然后只需连接所有存储过程调用的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:55:34.063

```
CREATE VIEW VW_dsopi_person_addr_rule
AS
  SELECT Primary_key
       , src_address_line1 AS src_address_line
    FROM dsopi_person_addr_rule
   UNION
  SELECT Primary_key
       , src_address_line2
    FROM dsopi_person_addr_rule
   UNION
  SELECT Primary_key
       , src_address_line3
    FROM dsopi_person_addr_rule
  SELECT Primary_key
       , src_address_line4
    FROM dsopi_person_addr_rule

DELETE FROM VW_dsopi_person_addr_rule
  WHERE Primary_key in (SELECT Primary_key
                          FROM VW_dsopi_person_addr_rule
                         WHERE src_address_line like '%DEP%)

DELETE D1 FROM VW_dsopi_person_addr_rule D1
  WHERE EXISTS (SELECT 1
                  FROM VW_dsopi_person_addr_rule V1
                 WHERE V1.Primary_key_value1 = D1.Primary_key_value1
                   AND V1.Primary_key_value2 = D1.Primary_key_value2
                   AND V1.src_address_line like '%DEP%') 
```

# scala - 什么机制使用 Akka Actor 来持久化其消息？

> ID：12962497
> 
> 赞同：2
> 
> 时间：2012-10-18T19:43:50.737
> 
> 标签：scala, akka, actor

Tha Akka 文档表明：

> *持久邮箱是持久的标准参与者邮箱的替代品。*

作为标准邮箱，Actor 可以在重启后读取其消息的机制是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T23:18:44.693

我已经实施了一个小项目来亲自检查一下。

Actor 邮箱的配置是通过调度程序实现的。以下是邮箱的可能性：

```
UnboundedMailbox
BoundedMailbox
UnboundedPriorityMailbox
BoundedPriorityMailbox 
```

最后：

```
Durable mailboxes 
```

我必须使用指示邮箱是基于文件的调度程序来配置我的演员系统。在 Actor System 的配置中，以下几行是必需的：

```
my-dispatcher {
  mailbox-type = akka.actor.mailbox.FileBasedMailboxType
} 
```

此外，我为基于文件的持久邮箱配置了属性，其中提供了以下指示：

[http://doc.akka.io/docs/akka/2.0.3/modules/durable-mailbox.html](http://doc.akka.io/docs/akka/2.0.3/modules/durable-mailbox.html)

最后，我想保存在文件中的特定 Actor 的创建者使用以下内容创建 Actor：

```
context.actorOf(Props[MyActor].withDispatcher("my-dispatcher"), "myactor1" 
```

我仍然需要更多的练习来重新创建一个 Actor 并阅读邮箱中剩余的消息，但现在主要问题已经得到解答。

一切都在文档中找到，这只是完成工作的问题。

# c# - 如何使用单例进行继承

> ID：12962499
> 
> 赞同：2
> 
> 时间：2012-10-18T19:43:57.093
> 
> 标签：c#, inheritance, singleton

我想知道如何从具有单例的类“BaseClient”继承，并能够在继承的类中使用来自基类单例的基本成员的相同实例。

```
public class BaseClient
{
    protected string _url;
    protected string _username;
    protected string _password;

    private static BaseClient _instance;
    private static readonly object padlock = new object();

    public static BaseClient Instance
    {
        get
        {
            lock (padlock)
            {
                if (_instance == null)
                {
                    _instance = new BaseClient(true);
                }
                return _instance;
            }
        }
    }

    public void SetInfo(string url, string username, string password)
    {
        _url = url;
        _username = username;
        _password = password;
    }

    public string GetVersion()
    {
        //MyService is a simple static service provider
        return MyService.GetVersion(_url, _username, _password);
    }
}

public class Advanced : BaseClient
{
    private static AdvancedClient _instance;
    private static readonly object padlock = new object();

    public static AdvancedClient Instance
    {
        get
        {
            lock (padlock)
            {
                if (_instance == null)
                {
                    _instance = new AdvancedClient(true);
                }
                return _instance;
            }
        }
    }

    public void DoAdvancedMethod()
    {
        MyService.DoSomething(_url, _username, _password);
    }
} 
```

因此，如果我使用 BaseClient.Instance.SetInfo("http://myUrl", "myUser", "myPassword"); 然后 AdvancedClient.Instance.DoAdvancedMethod()，AdvancedClient 单例将使用与 BaseClient 单例相同的基本成员实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:54:54.557

我一直发现使用泛型实现这种类型的解决方案要容易得多：

```
public class Singleton<T> where T : class
{

    protected Singleton()
    {
    }

    public static T Instance
    {
        get { return SingletonFactory.instance; }
    }

    public void SetInfo(string url, string username, string password)
    {
        ...
    }

    public string GetVersion()
    {
        ...
    }

    class SingletonFactory
    {

        internal static readonly T instance;

        static SingletonFactory()
        {
            ConstructorInfo constructor = typeof(T).GetConstructor(
                       BindingFlags.Instance | BindingFlags.NonPublic,
                       null, new System.Type[0],
                       new ParameterModifier[0]);

            if (constructor == null)
                throw new Exception(
                    "Target type is missing private or protected no-args constructor: type=" + 
                    typeof(T).FullName);
            try
            {
                instance = constructor.Invoke(new object[0]) as T;
            }
            catch (Exception e)
            {
                throw new Exception(
                    "Failed to create target: type=" + typeof(T).FullName, e);
            }
        }

    }

}

public class Advanced : Singleton<Advanced>
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T13:45:44.847

开个玩笑:)这是我的解决方案：

我只是使用一个独立的类来存储共享成员，并在创建 AdvancedClient 单例时检索 BaseClient 。

```
public class ClientInfo
{
    public string Url { get; set; }
    public string Username { get; set; }
    public string Password { get; set; }
}

public class BaseClient
{
    protected ClientInfo _info;

    private static BaseClient _instance;
    private static readonly object padlock = new object();

    public static BaseClient Instance
    {
        get
        {
            lock (padlock)
            {
                if (_instance == null)
                {
                    _instance = new BaseClient(true);
                }
                return _instance;
            }
        }
    }

    public ClientInfo Info
    {
        get
        {
            if(_info == null)
            {
                _info = new ClientInfo();
            }

            return _info;
        }
    }

    public void SetInfo(string url, string username, string password)
    {
        Info.Url = url;
        Info.Username = username;
        Info.Password = password;
    }

    public string GetVersion()
    {
        //MyService is a simple static service provider
        return MyService.GetVersion(Info.Url, Info.Username, Info.Password);
    }
}

public class Advanced : BaseClient
{
    private static AdvancedClient _instance;
    private static readonly object padlock = new object();

    public static AdvancedClient Instance
    {
        get
        {
            lock (padlock)
            {
                if (_instance == null)
                {
                    _instance = new AdvancedClient(true);
                    _instance._info = BaseClient.Instance.Info;
                }
                return _instance;
            }
        }
    }

    public void DoAdvancedMethod()
    {
        MyService.DoSomething(Info.Url, Info.Username, Info.Password);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:56:24.733

您可以将基类中单例的含义更改为如下所示：

```
public static BaseClient Instance
{
    get
    {
        lock (padlock)
        {
            if (_instance == null)
            {
                _instance = (BaseClient)(new AdvancedClient(true));
            }
            return _instance;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:06:59.857

由于`_instance`在两个类中都是私有的，因此这是两个不同的变量。`_instance`必须受到保护才能共享。派生类不能访问基类的私有成员！

# hadoop - 在hadoop减速器中加载本机库？

> ID：12962508
> 
> 赞同：1
> 
> 时间：2012-10-18T19:44:33.957
> 
> 标签：hadoop, mapreduce, native

我有一个本地库，我需要为我的 reduce 方法加载，并将它添加到分布式缓存中，但是当我在 map 方法中调用 System.loadLibrary(mylib.so) 时，我得到一个错误并且 map 任务失败：

```
Error: no mylib.so in java.library.path 
```

即使我将它添加到分布式缓存中。我错过了一步吗？在我的工作配置中，我调用：

```
DistributedCache.addCacheFile(uri, job.getConfiguration()); 
```

其中 uri 是 hadoop 文件系统上 mylib.so 的路径。

这个本机库依赖于许多其他库，它们都存在于我的 hadoop fs 上的 /hadoop/fs/mystuff/libs 中。我将它们全部添加到分布式缓存中，甚至尝试使用 System.loadLibrary() 调用将它们全部加载到我的 reduce 任务中。但我不断收到同样的 java.library.path 错误。我还尝试将库作为命令行参数添加到 -files 标志，但我仍然收到上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-13T18:10:30.260

您是否单独尝试我们的代码，而不是在 map-reduce 中？据我所知，System.loadLibrary 期望库名称不带“.so”或“.dll”后缀...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:08:49.147

虽然不确定为什么会发生这种情况，但请查看 Cloudera 的[How to Include Third-Party Libraries in Your Map-Reduce Job](http://www.cloudera.com/blog/2011/01/how-to-include-third-party-libraries-in-your-map-reduce-job/)博客条目。

# css - 一列固定宽度布局中的css定位

> ID：12962509
> 
> 赞同：0
> 
> 时间：2012-10-18T19:44:36.653
> 
> 标签：css

我有 css 布局：一列固定宽度布局，来自[maxdesign.com](http://www.maxdesign.com.au/articles/css-layouts/)

以下是导航 div：

```
<div id="navigation">
        <ul>
            <li><asp:LinkButton ID="lkbDataEntry" runat="server">Data Entry</asp:LinkButton></li>
            <li><asp:LinkButton ID="lkbReports" runat="server">Reports</asp:LinkButton></li>                
        </ul>           
    </div> 
```

现在，我想通过执行以下操作在同一个导航 div 中放置一个当前用户登录的 asp:label：

```
 <div id="navigation">
        <ul>
            <li><asp:LinkButton ID="lkbDataEntry" runat="server">Data Entry</asp:LinkButton></li>
            <li><asp:LinkButton ID="lkbReports" runat="server">Reports</asp:LinkButton></li>                
        </ul>  
        <div id="username">
            <asp:Label ID="lblUsername" runat="server" Text="User name"></asp:Label>
        </div>         
    </div> 
```

使用CSS代码：

```
 #navigation
{
    float: left;
    width: 960px;
    background: #1f2d3a;    
}

#navigation ul
{
    margin: 0;
    padding: 0;
}

#navigation ul li
{
    list-style-type: none;
    display: inline;
}

#navigation li a
{
    display: block;
    float: left;
    padding: 1px 5px;
    color:#fff; 
    font-size: 14px;
    /*font-weight: bold;*/  
    border-right: 1px solid#fff;
}

#navigation li a:hover { background:#0c749b; }

    #username
{
    float: right;
    padding-right: 5px;
    color:#fff;
} 
```

但是标签总是显示在菜单项的下方，在它们的右边但在它们的下方。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:47:33.753

为什么不把标签放在右边浮动的`li`、里面`#navigation`呢？你的 CSS 可以保持不变，因为`#username`它已经浮动了。

```
<div id="navigation">
        <ul>
            <li><asp:LinkButton ID="lkbDataEntry" runat="server">Data Entry</asp:LinkButton></li>
            <li><asp:LinkButton ID="lkbReports" runat="server">Reports</asp:LinkButton></li>                
            <li id="username"><asp:Label ID="lblUsername" runat="server" Text="User name"></asp:Label></li>
        </ul>  
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:49:35.450

你需要浮动 ul。现在 ul 是一个块元素，意味着它之后的任何内容都会显示在下一行，因此用户名在它的下方。如果您分配一个 float:left，它应该允许元素出现在列表右侧的空白区域。

# javascript - onmouseover 适用于 Firefox，但不适用于 chrome 或 safari

> ID：12962512
> 
> 赞同：2
> 
> 时间：2012-10-18T19:44:49.707
> 
> 标签：javascript, jquery, google-chrome, safari, onmouseover

好吧，这个问题很简单

由于某种原因，onmouseover 事件不能在 chrome 中工作（或 safari 尚未检查 IE）。我以前用过onmouseover，效果很好，但这次不行。

你可以在这里看到我正在尝试建立的网站：

[http://www.uvm.edu/~areid/test/demo.html](http://www.uvm.edu/~areid/test/demo.html)

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:47:03.390

您想要的事件是鼠标移动而不是鼠标悬停。

```
onmousemove 
```

[http://www.w3schools.com/jsref/event_onmousemove.asp](http://www.w3schools.com/jsref/event_onmousemove.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:50:56.433

将`#screen`z-index 设置为 0。然后调整`#top`和`#left`div上的 z-index

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:22:13.707

在 Chrome 和 Safari 中对我来说工作得很好，但是在任何低于 9 的 IE 中格式都非常糟糕。

# java - 在Java中用零填充

> ID：12962515
> 
> 赞同：29
> 
> 时间：2012-10-18T19:44:53.183
> 
> 标签：java, string-formatting, padding

抱歉，如果这个问题已经提出，我已经进行了深入搜索，但什么也没有。

现在，我知道了：

```
String.format("%05d", price); 
```

将在左边用零填充我的价格，所以 25 的价格将导致**00025**

如果我想将它们填充到右侧，结果是**25000**怎么办？如何**仅使用** *String.format*模式来做到这一点？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-18T19:50:49.480

你可以使用：

```
String.format("%-5s", price ).replace(' ', '0') 
```

我可以只使用格式模式吗？

`String.format``Formatter.justify`就像方法一样使用`String.printf`。从这篇[文章](https://stackoverflow.com/questions/9997767/change-the-default-padding-character-in-java-printf)中，您将看到输出空间是硬编码的，因此使用`String.replace`是必要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-20T05:44:50.073

试试这个 ：

```
String RightPaddedString = org.apache.commons.lang.StringUtils.rightPad(InputString,NewStringlength,'paddingChar'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-15T19:59:22.680

请尝试阅读此文档，看看 apache commons 库是否[`StringUtils`](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html)可以帮助您

我做了这样的代码：

```
import org.apache.commons.lang3.StringUtils;

public static void main(String[] args)  {   
  String str = "123";
  str = StringUtils.leftPad(str,10,"0"); //you can also look the rightPad function.
  System.out.println(str);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-26T10:38:07.460

归功于[beginnersbook.com](http://beginnersbook.com/2014/07/java-right-padding-a-string-with-spaces-and-zeros/)，这是该问题的有效解决方案：

```
public class PadRightTest {
  public static void main(String[] argv) {
    System.out.println("#" + rightPadZeros("mystring", 10) + "@");
    System.out.println("#" + rightPadZeros("mystring", 15) + "@");
    System.out.println("#" + rightPadZeros("mystring", 20) + "@");
  }

  public static String rightPadZeros(String str, int num) {
    return String.format("%1$-" + num + "s", str).replace(' ', '0');
  }
} 
```

输出是：

```
#mystring00@
#mystring0000000@
#mystring000000000000@ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-02T10:00:29.523

使用此函数进行右填充。

```
private String rightPadding(String word, int length, char ch) {
   return (length > word.length()) ? rightPadding(word + ch, length, ch) : word;
} 
```

如何使用？

```
rightPadding("25", 5, '0'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-08T13:07:27.590

就我而言，我仅使用本机 Java 解决了这个问题。

```
StringBuilder sb = new StringBuilder("1234");
sb.setLength(9);
String test = sb.toString().replaceAll("[^0-9]", "0");
System.out.println(test); 
```

所以它打印出来：123400000

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-25T16:05:01.373

如果您想不使用格式或任何功能，请使用这个简单的技巧 `System.out.println(price+"000");`

# java - 添加几个不同配置的appWidgets？

> ID：12962524
> 
> 赞同：3
> 
> 时间：2012-10-18T19:45:12.410
> 
> 标签：java, android, sharedpreferences, android-appwidget

我创建了一个小部件，它显示一个简单的文本视图，可以在配置活动中作为 Edittext 进行编辑。我使用共享首选项保存输入的文本，因此用户可以点击小部件来编辑文本，并且已经输入的文本出现在编辑文本字段中。我的问题是这个。我希望用户能够添加多个小部件，但是当添加第二个小部件时，会从共享首选项中加载与另一个小部件中相同的文本。而且，当小部件被编辑时，另一个也是如此。希望我很清楚。我有点想它与 appWidgetIds 有关，但我无法弄清楚。

这是我的代码，有点简化。

```
public class WidgetConfig extends Activity implements OnClickListener, OnItemSelectedListener {

    AppWidgetManager awm;
    int awID;
    Context c;
    EditText info;
    Button b;
    String note;
    int styleStart = -1, cursorLoc = 0;
    SharedPreferences sp;
    Spinner spinner;
    String[] paths = { "10", "20", "30" };
    File path = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.widgetconfig);

        c = WidgetConfig.this;
        info = (EditText)findViewById(R.id.etwidgetconfig);

        ...

        b = (Button)findViewById(R.id.bwidgetconfig);
        loadPrefs();
        b.setOnClickListener(this);

        //Getting Info about the widget that launched this activity
        Intent i = getIntent();
        Bundle extras = i.getExtras();
        if (extras != null){
            awID = extras.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID,
            AppWidgetManager.INVALID_APPWIDGET_ID );
        }

        awm = AppWidgetManager.getInstance(c);

    }

        ...

    private void loadPrefs(){
        sp = PreferenceManager.getDefaultSharedPreferences(this);
        note = sp.getString("NOTE", "DEFAULT");

        info.setText(note);

    }

    private void savePrefs(String key, String value){
        sp = PreferenceManager.getDefaultSharedPreferences(this);
        SharedPreferences.Editor editor = sp.edit();        
        editor.putString(key, value); // value to store
        editor.commit();   

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        savePrefs("NOTE", info.getText().toString());

        RemoteViews views = new RemoteViews(c.getPackageName(), R.layout.widget);
        views.setTextViewText(R.id.tvConfigInput, info.getText());

        ComponentName thisWidget = new ComponentName(this, Widget.class);
        AppWidgetManager manager = AppWidgetManager.getInstance(this);
        manager.updateAppWidget(thisWidget, views);

        Intent in = new Intent(c, WidgetConfig.class);
        PendingIntent pi = PendingIntent.getActivity(c, 0, in, PendingIntent.FLAG_UPDATE_CURRENT);

        views.setOnClickPendingIntent(R.id.B_EditAgain, pi);

        awm.updateAppWidget(awID, views);

        Intent result = new Intent();
        result.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, awID);
        setResult(RESULT_OK, result);
        finish();

    }

} 
```

更新：

所以我尝试了这个，但没有什么不同，仍然不起作用。

```
 private void loadPrefs(){
        sp = context.getSharedPreferences("widget" + String.valueOf(appWidgetId)
          , Context.MODE_PRIVATE);
        note = sp.getString("Note", "");

        info.setText(note);

    }

private void savePrefs(String key, String value){
    sp = context.getSharedPreferences("widget" + String.valueOf(appWidgetId)
              , Context.MODE_PRIVATE);
    Editor editor = sp.edit();
    editor.clear();
    editor.putString("Note", info.getText().toString());
    editor.putString(key, value); // value to store
    editor.commit();   

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T19:52:34.917

你可能不想在`getDefaultSharedPreferences`这里使用。所有小部件共享相同的默认共享首选项，因此它们将不断地相互覆盖。

我在自己的应用程序中遇到了同样的情况，所以我为每个小部件使用了一个自定义首选项文件。您可以使用 widgetID 命名首选项文件，然后每个小部件将始终获得它自己独特的首选项集。

在配置 PreferenceActivity 中：

```
this.getPreferenceManager().setSharedPreferencesName(
           "widget" + String.valueOf(mAppWidgetId)
); 
```

这会将所有 PreferenceActivity 设置存储到以小部件 ID 命名的首选项文件中。

然后在小部件本身中，只需检索与其 id 对应的文件：

```
preferences = context.getSharedPreferences(
      "widget" + String.valueOf(appWidgetId)
      , Context.MODE_PRIVATE); 
```

并像平常一样检索首选项。

# r - 如何在 R 中从 Windows 将 linux 计算集群注册为并行后端

> ID：12962530
> 
> 赞同：1
> 
> 时间：2012-10-18T19:45:30.110
> 
> 标签：r, parallel-processing

首先，虽然我非常精通 R 编程，但我对 *nix 环境 + 并行计算还是很陌生，所以我很感激你对我的态度。我熟悉 R 中的 'parallel'、'foreach' 和不同的 'do_' 包，但仅用于在本地计算机上使用多个内核。

我有一个本地 Linux 计算机集群（在 OpenSUSE 上运行）可供我使用，其中包含多个节点。这些节点都安装了 R。通常，如果我尝试仅在其中一个节点上工作，我将首先使用 PuTTY 连接到头节点（使用用户名 + pwd），然后连接到其中一个（内部？）节点。但是，我希望能够在本地 Windows 工作站上运行 R，并将作业发送到计算机集群。

是否可以将此节点集群设置为我的 Windows 机器的并行后端？如果是这样，最方便的方法是什么？

编辑：

也许我可以缩小问题的范围。在头节点上打开一个 R 进程并运行类似的东西很容易，

```
library( parallel )
nodes <- c("n01", "n02", "n03") ## the nodes
cl <- makePSOCKcluster( nodes )
setDefaultCluster( cl ) 
```

现在，我是否可以通过简单的方式将本地 R 会话与在头节点上运行的 R 会话连接起来？例如，理想情况下，我想在我的计算机上编写以下形式的代码（伪代码）：

```
clusterConnection <- connect("<cluster>")
f <- function() { clusterApply( cl, 1:10, sum( rnorm(1E7) ) ) }
results <- evaluate( f, clusterConnection ) 
```

其中“评估”执行一些魔术，将函数“f”发送到头节点，然后对其进行评估，并将结果返回本地计算机并将其存储在“结果”中。

是否有处理这种接口的 R 函数、包或其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:34:53.097

我找到了一个非常合适的解决方案。使用 Rserve 在头节点上设置 R 服务器，然后通过套接字连接连接到该节点。CRAN 上的 Rserve 库还提供了一系列实用函数，用于评估服务器上的某些函数并将结果接收回本地计算机。

# objective-c - 如何在应用程序的每个位置设置导航栏的图像

> ID：12962531
> 
> 赞同：2
> 
> 时间：2012-10-18T19:45:30.550
> 
> 标签：objective-c, ios, navigation, storyboard

我正在用故事板构建一个应用程序。现在我希望在我的应用程序的每个屏幕上都有相同的 topBar/navigationbar。我想在这个导航栏上设置一个图像。经过一番搜索，我找到了这段代码。

```
@implementation UINavigationBar (CustomImage)
- (void)drawRect:(CGRect)rect
{
    UIImage *image = [UIImage imageNamed: @"topbar.jpg"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
}
@end 
```

我把它放在我的 appdelagate.M 文件中的实施之上。但它不起作用。还有人知道这是否也适用于 IOS 5.1 吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:47:31.597

看`UIAppearance`。它允许您更改整个 UI 类的属性。例如，我在一个应用程序中有这个：

```
UIImage *img = [UIImage imageNamed: @"NavBarBackground.png"];
[[UINavigationBar appearance] setBackgroundImage:img forBarMetrics:UIBarMetricsDefault]; 
```

`UIAppearance`是在 iOS 5 中引入的。执行此操作的“旧”方法是`-drawRect:`使用相关类的类别（例如`UINavigationBar`）覆盖，就像您所做的那样。（顺便说一下，“Swizzling”——将你的方法换成 SDK 提供的方法——不是必需的。）

我发现，当 iOS5 出现时，这个`drawRect`技巧不起作用，所以我不得不`UIAppearance`通过将上面的代码包含在如下`if`语句中来有条件地使用：

```
if ([[UINavigationBar class] respondsToSelector:@selector(appearance)]) {
    ...
} 
```

为什么是有条件的？我们继续支持 iOS4，所以如果我们不对这些`UIAppearance`东西进行条件化，iOS4 用户会遇到崩溃。因此，我们`drawRect`在应用程序中同时拥有了这个和解决方案！

如果您不必支持 iOS4，那么您绝对应该考虑在`UIAppearance`这里实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:05:27.317

我曾经为此调整drawRect，您可以`+initialize`使用`method_exchangeImplementations`（runtime.h）执行调整。现在棘手的部分是调用原始的drawRect，因为方法是混合的，您需要使用自定义绘图方法`name`来调用原始的方法。就像你画图一样，`[super customDrawRect:rect];`最后你会得到

```
- (void)customDrawRect:(CGRect)rect { 

   ... 
   [super customDrawRect:rect];
} 
```

* * *

```
#import <objc/runtime.h> 

@implementation UINavigationBar (CustomImage)

+ (void)initialize {

    Method originalDrawRectMethod = class_getInstanceMethod([self class], @selector(drawRect:));
    Method customDrawRectMethod = class_getInstanceMethod([self class], @selector(customDrawRect:));
    method_exchangeImplementations(originalDrawRectMethod, customDrawRectMethod);
}

- (void)customDrawRect:(CGRect)rect {

    UIImage *image = [UIImage imageNamed: @"topbar.jpg"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];

    // original drawRect call
    [self customDrawRect:rect];
}

@end 
```

# c# - httpwebrequest 错误地发布 json

> ID：12962533
> 
> 赞同：1
> 
> 时间：2012-10-18T19:45:34.697
> 
> 标签：c#, asp.net, json, http

编辑：好的，所以看起来发布为 application/json 需要在服务器端单独处理而不是表单。有没有更好的方法将 C# 中的表单作为复杂对象发布？字符串：字符串只是没有削减它。例如，我希望能够使用 Dictionary 来生成：

```
{
 "data_map":{"some_value":1,"somevalue":"2"},
 "also_array_stuffs":["oh look","people might", "want to", "use arrays"],
 "integers_too":4
} 
```

---OP---

我看过SO和其他地方。我只是想将 JSON 字符串发布到 URL，但服务器端一直将内容解释为字符串而不是查询字典。我们有其他不在 C# 中的客户端可以很好地访问服务器端（在 HTML、JS、Objective-C、Java 中），但由于某种原因，POST 数据从 C# 客户端返回时很不稳定。

C#源代码：

```
private static Dictionary<string,object> PostRequest(string url, Dictionary<string, object> vals)
{           
    var httpWebRequest = (HttpWebRequest)WebRequest.Create(BaseURL+url);
    httpWebRequest.ContentType = "application/json; charset=utf-8";
    httpWebRequest.Method = "POST";

    using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
    {
        string json = JsonFx.Json.JsonWriter.Serialize(vals);
        //json = json.Substring(1,json.Length-1);

        streamWriter.Write(json);
        streamWriter.Close();
    }

    try
    {
        var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
        using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
        {
            string response = streamReader.ReadToEnd();
            Dictionary<string,object>  retval = JsonFx.Json.JsonReader.Deserialize<Dictionary<string,object>>(response);

            return retval;
        }
    }
    catch(WebException e)
    {
    }

    return null;
} 
```

这被称为：

```
public static void Main (string[] args)
{   
    Dictionary<string,object> test = new Dictionary<string, object>();
    test.Add("testing",3);
    test.Add("testing2","4");

    Dictionary<string,object> test2 =  PostRequest("unitytest/",test);          
    Console.WriteLine (test2["testing"]);
} 
```

无论出于何种原因，这是通过的请求对象：

```
<WSGIRequest
GET:<QueryDict: {}>,
POST:<QueryDict: {u'{"testing":3,"testing2":"4"}': [u'']}>,
COOKIES:{},
META:{'CELERY_LOADER': 'djcelery.loaders.DjangoLoader',
 'CONTENT_LENGTH': '28',
 'CONTENT_TYPE': 'application/json; charset=utf-8',
 'DJANGO_SETTINGS_MODULE': 'settings.local',
 'GATEWAY_INTERFACE': 'CGI/1.1',
 'HISTTIMEFORMAT': '%F %T  ',
 'HTTP_CONNECTION': 'close',
 'LANG': 'en_US.UTF-8',
 'QUERY_STRING': '',
 'REMOTE_ADDR': '127.0.0.1',
 'REMOTE_HOST': '',
 'REQUEST_METHOD': 'POST',
 'RUN_MAIN': 'true',
 'SCRIPT_NAME': u'',
 'SERVER_PORT': '9090',
 'SERVER_PROTOCOL': 'HTTP/1.0',
 'SERVER_SOFTWARE': 'WSGIServer/0.1 Python/2.7.2+',
 'SHELL': '/bin/sh',
 'SHLVL': '1',
 'SSH_TTY': '/dev/pts/0',
 'TERM': 'xterm',
 'TZ': 'UTC',
 'wsgi.errors': <open file '<stderr>', mode 'w' at 0x7f3c30158270>,
 'wsgi.file_wrapper': <class 'django.core.servers.basehttp.FileWrapper'>,
 'wsgi.input': <socket._fileobject object at 0x405b4d0>,
 'wsgi.multiprocess': False,
 'wsgi.multithread': True,
 'wsgi.run_once': False,
 'wsgi.url_scheme': 'http',
 'wsgi.version': (1, 0)}>
[18/Oct/2012 19:30:07] "POST /api/1.0/unitytest/ HTTP/1.0" 200 31 
```

请求中的一些更敏感的数据已被删除，但无关紧要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T02:34:32.763

呃，我希望我不要养成回答自己问题的习惯。

因此，以这种方式发布 Json 与普通的表单提交不同。这意味着如果您的服务器端只期望正常的表单提交，它将无法正常工作。C# 代码按预期执行，但仅提交 JSON 字符串作为 POST 正文。虽然这对于验证、清理和处理原始输入的人来说可能很方便，但请记住，如果您使用的是普通的 Web 框架，则必须编写一个替代条件来接受原始字符串。

如果有人知道如何在 C# 中提交包含比字符串哈希图/字典更复杂的对象的表单提交，那么我会支持你的答案并给你很多拥抱。现在，这个老生常谈的废话将不得不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T03:54:27.833

好吧，很久以前，我实现了一个银行应用程序前端，它大量使用 JSON 进行客户端和服务器之间的通信。

这是一种从服务器中查找复杂对象的干净方法，无需进行复杂的清理或原始字符串处理。

关键是在服务器端使用为 ajax 设计的 WebServices，您的 Web 服务器类应如下所示：

```
[WebService(Namespace = "http://something.cool.com/")]
[ScriptService] // This is part of the magic
public class UserManagerService : WebService
{
    [WebMethod]
    [ScriptMethod] // This is too a part of the magic
    public MyComplexObject MyMethod(MyComplexInput myParameter)
    {
        // Here you make your process, read, write, update the database, sms your boss, send a nuke, or whatever...

        // Return something to your awaiting client
        return new MyComplexObject();
    }

} 
```

现在，在您的客户端，进行设置以使 ASP.NET 以 JSON 格式与您对话，我使用 JQuery 来发出 ajax 请求。

```
$.ajax({ 
    type: 'POST', 
    url: "UserManagerService.asmx/MyMethod", 
    data: { 
        myParameter:{
            prop1: 90,
            prop2: "Hallo",
            prop3: [1,2,3,4,5],
            prop4: {
                // Use the complexity you need.
            }
        }
    }, 
    contentType: 'application/json; charset=utf-8', 
    dataType: 'json', 
    success: function(response) {
        alert(response.d);
    }
}); 
```

ASP 想要作为 ScriptMethod 的结果返回的任何内容都将包含在 response.d 变量中。因此，假设您从服务器返回一个复杂对象，“response.d”是对您的对象的引用，您照常使用点符号访问所有对象成员。

# .net - Directshow：DES 渲染到文件停止渲染

> ID：12962537
> 
> 赞同：1
> 
> 时间：2012-10-18T19:46:01.053
> 
> 标签：.net, wpf, visual-studio-2010, directshow, directshow.net

使用的技术：

*   .NET 3.5
*   C#/WPF
*   视觉工作室 2010 SP1
*   直显网
*   DES（DirectShow 编辑服务）
*   P/调用

=======

申请总结：

我在 C#/WPF 中开发了一个简单的视频编辑器，它带有一个自定义 WPF 时间线控件，该控件通过 DirectShow.NET 连接到 DES，并且很大程度上基于 DirectShow.NET 中包含的 DESCombine.cs 示例。该应用程序的用户可以将视频和图像添加到时间线，并选择一首歌曲在后台播放。

最终目标是将时间线内容（ds 图形内容）呈现为基于 wmv 的文件。这基本上是通过选择一个 prx 配置文件并启动正确构建的图表来完成的。

所有输入视频在添加到时间线/directshow 图表之前都转换为 wmv8，因此不需要特殊的第三方 directshow 过滤器来连接引脚。

=======

问题和疑问：

有时但并非总是，Directshow 在最终视频文件的渲染过程中会卡住。也不例外，cpu 使用率只是下降到 0 并且没有任何反应。由于我通过 DirectShow.NET 访问 DirectShow 并且我不知道幕后发生了什么，因此很难调试。虽然我确实启用了非托管调试，但没有抛出异常，我不知道出了什么问题。

我可以说随着图表越来越多，这个问题会更频繁地发生。例如，渲染包含 50 个视频和图像的时间线比仅渲染几个图像和视频更有可能导致此问题。

我该怎么做才能准确找出问题所在，以及为什么在没有抛出异常或错误指示时会发生这种情况？

=======

我试过的：

为图形设置一个日志文件（使用 IGraphBuilder::SetLogFile）。

此日志确实表明某些引脚无法连接，但在渲染完成和失败时，日志看起来完全相同。

```
IntPtr hfile = CreateFile("c:\\dslog2.txt", GENERIC_WRITE, 0, IntPtr.Zero,     OPEN_EXISTING, 0, IntPtr.Zero);
m_pGraph.SetLogFile(hfile); 
```

当我检测到它已被占用时，使用 IMediaControl 暂停并运行图表。这没有任何作用。

```
m_pControl.Pause();
Thread.Sleep(2000);
m_pControl.Run(); 
```

=======

在此先感谢您，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:59:18.060

如果您有一个包含许多来源的时间线，则很有可能会从 DES 中收到“Out-Of-Memory”错误。或者 DES 只是破坏，因为 DES 是 DirectShow 的一个非常有问题的部分。听起来您没有使用动态模式？[动态模式](http://msdn.microsoft.com/en-us/library/windows/desktop/dd376956%28v=vs.85%29.aspx)会自动重新连接 DES-Filter 并移除未使用的源，因此内存消耗不会那么大。

# java - 使用 java 在 n 秒内检查和处理一次

> ID：12962538
> 
> 赞同：1
> 
> 时间：2012-10-18T19:46:02.187
> 
> 标签：java, multithreading

我有一个要求，我必须检查文件夹中是否存在任何文件。如果是，那我需要一一处理。凭借我的基本知识，我已经得出了我在下面发布的代码结构。

我正在创建一个无限循环并检查该文件是否存在于该文件夹中。如果是，那么我正在创建一个线程并对其进行处理，否则它会等待一分钟并再次检查。

```
class sample {    
    synchronized int getNoOfFiles() {
        // get number of files in the folder
    }    
    synchronized void openFile() {
        // open one file
    }
    synchronized void getFileContents() {
        // get the file content
    }
    synchronized void processFileContent() {
        //performing some operation on file contents
    }    
    synchronized void closeFile() {
        //closing the file
    }    
    synchronized void deleteFile() {
        //delete the file
    }

}    
class Test {    
    public static void main(String args[]) {
        int flag=0;
        Sample obj = new Sample();
        while(1) {
            flag = obj.getNoOfFiles();    
            if(flag) {
                for(i=0;i<flag;i++) {
                    MyThread1 t1 = new MyThread1() {
                        public void run() {
                            obj.openFile();
                            obj.getFileContents();
                            obj.processFileContent();
                            obj.closeFile();
                            obj.deleteFile();
                        }
                    };    
                    t1.start();
                }
            }
            else {
                try {
                    Thread.sleep(60000);
                }
            }    
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:07:55.507

我建议您不要自己做这种事情，而是看一下[Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)类，它可以用来执行重复性任务。因为手动搞乱线程通常会导致奇怪的错误。

更好的是[ScheduledThreadPoolExecutor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)，~~但如果您以前从未使用过执行器，它可能会有点复杂。~~请参阅 Keppil 的答案以了解如何执行此操作。

两者之间的差异在这里得到了很好的总结：[Java Timer vs ExecutorService？](https://stackoverflow.com/q/409932/1374678).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:08:25.633

我建议使用[`ScheduledExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html)：

```
ScheduledExecutorService executor = new ScheduledThreadPoolExecutor(1);
executor.scheduleAtFixedRate(new Runnable() {
        public void run()
        {
            obj.openFile();
            obj.getFileContents();
            obj.processFileContent();
            obj.closeFile();
            obj.deleteFile();
         }
    }, 0, 1, TimeUnit.MINUTES); 
```

# coldfusion - 如何循环遍历数组并在多列中输出？

> ID：12962539
> 
> 赞同：0
> 
> 时间：2012-10-18T19:46:17.567
> 
> 标签：coldfusion

我需要帮助遍历我的数据并将其输出到多个列中。目前，它垂直显示在数组中下一组数据的正下方。请帮忙。

```
 <cfloop array="#UserAddresses#" index="UA">

                <tr>
                    <td>City: </td>
                    <td><cfif NOT Len(#UA.city.xmlText#)>N/A<cfelse><cfoutput>#UA.city.xmlText#</cfoutput></cfif></td>
                </tr>
                <tr>
                    <td>State: </td>
                    <td><cfif NOT Len(#UA.state.xmlText#)>N/A<cfelse><cfoutput>#UA.state.xmlText#</cfoutput></cfif></td>
                </tr>   
                <tr>
                    <td>Zip Code: </td>
                    <td><cfif NOT Len(#UA.zipcode.xmlText#)>N/A<cfelse><cfoutput>#UA.zipcode.xmlText#</cfoutput></cfif></td>
                </tr>                               
            </cfloop>
    </cfif> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:00:35.303

您希望城市、州和邮政编码作为标题吗？那么这将工作

```
<cfoutput>
    <tr>
        <td>City: </td>
        <td>State: </td>
        <td>Zip Code: </td>
    </tr>
    <cfloop array="#UserAddresses#" index="UA">
        <tr>
            <td><cfif NOT Len(UA.city.xmlText)>N/A<cfelse>#UA.city.xmlText#</cfif></td>
            <td><cfif NOT Len(UA.state.xmlText)>N/A<cfelse>#UA.state.xmlText#<</cfif></td>
            <td><cfif NOT Len(UA.zipcode.xmlText)>N/A<cfelse>#UA.zipcode.xmlText#</cfif></td>
        </tr>                               
    </cfloop>
</cfoutput> 
```

它之所以有效，是因为`<tr></tr>`定义了一个表格行并`<td></td>`在该行中定义了一个单元格。在您的情况下，您在没有单元格的情况下执行多行，因此您将内容放在一列而不是一行中。附带说明的是，`<cfoutput></cfoutput>`每页只能使用一次，而不是围绕每个变量。

# c - C：用整数和字符创建现有的字符串

> ID：12962540
> 
> 赞同：0
> 
> 时间：2012-10-18T19:46:18.183
> 
> 标签：c, string, char, int

由于我对 C 编程非常陌生，因此我可能遇到了一个非常简单的问题。

我有一个看起来像这样的结构

```
typedef struct Vector{
    int a;
    int b;
    int c;
}Vector; 
```

现在我想在一个文件中写入一个向量数组。为此，我想创建以下方法方案

```
String createVectorString(Vector vec){
    // (1)
}

String createVectorArrayString(Vector arr[]){
    int i;
    String arrayString;
    for(i=0; i<sizeof(arr); i++){
        //append createVectorString(arr[i]) to arrayString  (2)
    }
}

void writeInFile(Vector arr[]){
    FILE *file;
    file = fopen("sorted_vectors.txt", "a+");
    fprintf(file, "%s", createVectorArrayString(arr);
    fclose(file);
}

int main(void){

    // create here my array of Vectors (this has already been made and is not part of the question)
    // then call writeInFile

    return 0;
} 
```

我的主要问题在于 (1)，其中还涉及 (2)（因为我不知道如何在 C 中使用字符串，所以 eclipse 说“类型“字符串”未知”，尽管我包括在内`<string.h>`）

所以我在某些时候读到，使用 itoa() 方法可以将 int 转换为 String。据我了解，我可以简单地执行以下操作

```
char buf[33];
int a = 5;
itoa(a, buf, 10) 
```

但是，我无法将其用于工作，更不用说我无法弄清楚如何将`char`s 或`int`s “粘贴”到字符串中。

在我的观点**(1)**中，我想创建一个 String 的 Form `(a,b,c)`，其中 a、b 和 c 是我的 struct Vector 的“字段”。

在第**(2)**点，我想创建一个 String 的 Form `(a1,b1,c1)\n(a2,b2,c2)\n...(an,bn,cn)`，其中 n 是数组中向量的数量。

有没有快速的解决方案？我是否将 Java 中的字符串概念与 C 中的字符串概念混淆了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:02:26.740

是的，您确实混淆了 Java 和 C 中字符串的概念。

C 字符串使用起来相当不方便。它们需要动态内存分配，更糟糕的是，需要相应的释放（这是可能的，但很乏味）。在您的情况下，最好完全删除字符串，并在没有字符串的情况下实现您需要的任何内容。

要将向量直接写入文件：

```
Vector vec;
FILE* file = ...;
fprintf(file, "%d %d %\n", vec.a, vec.b, vec.c); 
```

要编写向量数组，只需在循环中执行上述操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:14:47.757

在 C 中，字符串只是一个以空字符结尾的字符数组。它通常被声明为`char *`，但如果你有一个固定的最大长度，并且可以将它分配到堆栈上或在结构中内联，它可能被声明为`char str[LENGTH]`。

使用混合字符和数字构建字符串的最简单方法之一是使用`snprintf()`. 这就像`printf()`，但不是打印到标准输出，而是打印到一个字符串（一个数组`char`）。注意需要自己分配和传入缓冲区；所以你要么需要事先知道最大长度，要么通过尝试调用来`snprintf()`找出它，找出它将打印多少个字符，分配一个该大小的数组，然后`snprintf()`再次调用以实际打印结果。

因此，如果您有一个由三个整数组成的向量，并且想从中构建一个字符串，您可以编写：

```
char *createVectorString(Vector vec){
    int count = snprintf(NULL, 0, "(%d,%d,%d)", vec.a, vec.b, vec.c);
    if (count < 0)
        return NULL;
    char *result = malloc(count * sizeof(char));
    if (result == NULL)
        return NULL;
    count = snprintf(result, count, "(%d,%d,%d)", vec.a, vec.b, vec.c);
    if (count < 0)
        return NULL;
    return result;
} 
```

请注意，由于您调用`malloc()`来分配此缓冲区，因此您需要在`free()`完成后调用它，以避免内存泄漏。

请注意，`snprintf()`仅返回 C99 起您需要的长度。一些编译器（如 MSVC）还不支持 C99，因此它们返回 -1 而不是字符串的长度。在这些情况下，您可以调用另一个函数来确定所需缓冲区的大小（在 MSVC 中，它是`_vscprintf`），或者您可能只需要猜测一个大小，如果这不起作用，请分配一个缓冲区两倍大小，然后再试一次，直到成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:06:16.640

是的，您*将*Java 字符串与 C 混淆了。

1.  您不能在 C 中传递数组，只能传递指向第一个元素的指针。
2.  `sizeof (arr)`其中 arr 是函数参数是指针的大小。
3.  您不能返回块范围字符串，只能返回指向字符串的指针。但是当函数返回时，指向本地自动变量的指针超出范围。

我会写一个循环更多

```
#define N 42

/* Typedef for Vector assumed somewhere.*/
Vector arr[N];
/* Fill arr[]. */

for (i = 0; i < N; ++i) {
    fprintf (file, "arr[%d] =  { a=%d, b=%d, c=%d }\n", i, arr[i].a, arr[i].b, arr[i].c);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T20:04:26.770

简而言之：是的，您将 Java 字符串与 C 混淆了，因为您没有标准的字符串类型。什么是字符串实际上是一系列以值为 0 的 char 结尾的字符（或 '\0'，如果你想成为纯粹主义者）。

最快的解决方案是不生成字符串（并手动分配所有内存），而是使用`fprintf`with `FILE*`. 代替创建字符串的函数，编写将各种内容写入提供的函数`FILE*`，例如`int writeVector(FILE* output, Vector v)`. 开始会更容易。我不认为构建此类字符串所需的手动内存管理的所有血腥细节都是好的开始。

（注意建议原型中 int 的返回类型；这是用于错误代码的。）

此外，正如其中一位评论者指出的那样，您误解了 sizeof。`sizeof(arr)`将返回数组中所有元素组合的大小，以字节为单位（嗯，从技术上讲，以字符为单位，但这是你现在不需要担心的区别）。要获取数组中的元素数量，您需要使用`sizeof(arr)/sizeof(arr[0])`. 但是我不确定它是否可以与您的函数参数一起使用，尽管语法很花哨，但从技术上讲，它是一个指针。将 sizeof 应用于指针将返回指针本身的大小，而不是它指向的数据。

这就是为什么在 C 语言中，您通常会在额外的函数参数中提供数组的大小，例如：

`String createVectorArrayString(Vector arr[], size_t n)`

或者更符合我上面写的：

```
int writeVectorArray(FILE *output, Vector arr[], size_t n)
{
  int retcode = 0;
  size_t i;
  for (i = 0; i < n; ++i) {
    if ( (retcode = writeVector(output, arr[i])) != 0)
      return retcode;
  }
} 
```

# html - 在 CSS/HTML（无 javascript）中设置选择菜单的样式时，我有哪些选项？

> ID：12962549
> 
> 赞同：-4
> 
> 时间：2012-10-18T19:46:44.577
> 
> 标签：html, css, select

我想`<select>`只使用 HTML 和 CSS 设置菜单样式 - 我可以设置哪些部分以及如何设置？

我只是想上传一张图片......不能因为我的声誉低于 10。ANYWHO -

```
<div class="menu-style">
    <select class="dropdown" style="position: absolute; display:block; width:100%; padding: 10px 10px 10px 20px; opacity: 0;color: #fff;border: none; background: #9f4504;">
        <option>Project 2</option>
        <option>Project 3</option>
        <option>Project 4</option>
    </select>
    <div class="selected-item" style="display:block; font-weight: bold;color: #fff;padding: 10px 10px 10px 20px; width:100%;">Selected Project</div>
</div>
<ul class="nav-list" style="width: 100%; display: block; ">
    <li style="display: block;padding: 10px 10px 10px 20px;cursor: pointer;color: #fff;">Overview</li>
    <li style="display: block;padding: 10px 10px 10px 20px;cursor: pointer;color: #fff;">Reports</li>
    <li style="display: block;padding: 10px 10px 10px 20px;cursor: pointer;color: #fff;">Schedule</li>
    <li style="display: block;padding: 10px 10px 10px 20px;cursor: pointer;color: #fff;">Forms</li>
</ul> 
```

我也有一些悬停元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:52:39.113

你有没有尝试过或做过任何搜索？

说真的......快速搜索：[http ://bavotasan.com/2011/style-select-box-using-only-css/](http://bavotasan.com/2011/style-select-box-using-only-css/)

这是一个示例，但您在 Web 上还有许多其他示例。开始玩这个：

```
<select>
    <option>Here is the first option</option>
    <option>The second option</option>
</select> 
```

```
select {
    background: transparent;
    width: 268px;
    padding: 5px;
    font-size: 16px;
    border: 1px solid #ccc;
    height: 34px;
} 
```

# php - sql & php 关联数组

> ID：12962551
> 
> 赞同：-2
> 
> 时间：2012-10-18T19:46:55.093
> 
> 标签：php, sql, arrays

我正在建立一个网站，我需要一组“相关帖子”，即数组 $previews。这个数组需要包含三个数组，每个数组都包含来自相关帖子的数据。我尝试使用此代码获取数据，但失败了：

```
$previews = array();

$query = mysql_query("SELECT TOP 3 title, url, category, date_published FROM post WHERE NOT(id = '$my_id') AND category = '$my_category' ORDER BY NEWID()");
while($row = mysql_fetch_assoc($query)) $previews[] = $row; 
```

我不断收到“警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值”。

有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:34:04.393

试试这个，它可能会奏效。

```
$query = mysql_query("SELECT TOP 3 title, url, category, date_published FROM post WHERE NOT(id = '".$my_id."') AND category = '".$my_category."' ORDER BY NEWID()");
while($row = mysql_fetch_assoc($query)) $previews[] = $row; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:48:44.243

如果您的查询由于错误或权限访问问题而无法返回任何值，则 $query 将是布尔值 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:50:12.887

您收到此错误是因为您的查询出现问题。试着打电话`die(var_dump(mysql_error($query)));`看看出了什么问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T19:53:59.173

你的 SQL 是错误的。它看起来像 MsSQL 而不是 MySQL。我不确定整个事情，但是应该删除 TOP 3 并且您应该在查询结束时使用 limit 。

**曾是：**

```
 SELECT TOP 3 title, url, category, date_published FROM post WHERE NOT(id = '$my_id') AND category = '$my_category' ORDER BY NEWID() 
```

**应该：**

```
 SELECT title, url, category, date_published FROM post WHERE id != '$my_id' AND category = '$my_category' ORDER BY NEWID limit 3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T20:19:39.797

它适用于：

```
$query = mysql_query("SELECT title, url, category, date_published FROM post WHERE NOT(id = '$my_id') AND category = '$my_category' limit 3"); 
```

所以问题一定是 ORDER BY NEWID()。

谢谢大家的意见。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T20:23:02.137

通常，您会在对结果对象进行操作之前检查查询是否成功：

```
<?php

$query = "SELECT fields FROM table";
$result = mysql_query($query);

if ($result)
{
    // operate on results i.e. fetching assoc etc.
}
else
{
    // handle error accordingly
    // use mysql_error() for debugging or maybe logging
}

?> 
```

`mysql_query()``false`如果查询不成功则返回。

此外，正如其他一些人所提到的，您的 SQL 语法不正确，看起来像 TSQL/MSSQL。

# html - HTML accessible tables - does th have to be the first column in a row?

> ID：12962554
> 
> 赞同：3
> 
> 时间：2012-10-18T19:46:59.553
> 
> 标签：html, html-table, accessibility

This is a government financial table so I can't reorder the columns. The first column is an account code, the second column is the name of the account. If I do:

```
<thead><tr><th scope="col">Account Code</th><th scope="col">Account Name</th></tr></thead>
<tbody><tr><td>12345</td><th scope="row">Fish and Wildlife</th></tr>
...
</tbody> 
```

Will validation barf on that and will screen readers parse it correctly?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:57:00.830

In the specifications they do not specify a need for the th to appear as the first column in a table row, and so you should be able to put the th wherever you want.

```
Table cells may either contain "header" information (see the TH element) or "data" (see the TD element). 
```

[HTML w3 specs](http://www.w3.org/TR/1999/REC-html401-19991224/struct/tables.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:56:11.627

`<th>` just denotes a "header cell", they can exist in `<thead>`, `<tbody>` and `<tfoot>` as appropriate for the content.

You've got your column headers in `<thead>` and within `<th>` cells, so the markup you've provided is both schema-correct and in-line with accessibility guidelines. There is nothing wrong with your code.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T20:07:12.807

It's fine. The [example in the HTML5 spec](http://dev.w3.org/html5/spec/the-th-element.html#dom-th-scope) is just like that.

Note however, that the `<th scope="row">` cell is only a header for those `td` cells to the right of it, and not for the `td` cell to the left of it (i.e. the account code).

You could add a `headers` attribute to each account code `td` to point to the account name `th` on the same row, but you'll need to assign a unique id for the account name `th` on each row.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T19:53:44.447

Ran this document through the [w3 validator](http://validator.w3.org/check) and it came up clean:

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>I AM YOUR DOCUMENT TITLE REPLACE ME</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
</head>
<body>
<div>
<table>
<thead><tr><th scope="col">Account Code</th><th scope="col">Account Name</th></tr></thead>
<tbody><tr><td>12345</td><th scope="row">Fish and Wildlife</th></tr>
</tbody>
</table>
</div>
</body>
</html> 
```

other than char encoding, which can't be checked because I'm pasting into their document.

# java - 数字字符的Java数组到整数

> ID：12962557
> 
> 赞同：0
> 
> 时间：2012-10-18T19:47:07.527
> 
> 标签：java, arrays, casting, integer

我需要使用 BufferedReader 读取文件，在第二行我知道总会有 2 个整数：例如 456 666；但我不知道他们会有多少位数，所以在使用 BufferedReader 提取行（字符串类型）后，我逐个字符地读取该字符串的字符以获取数字并将它们添加到 char 数组中。当我拥有所有数字时，我用 '\0' 填充数组示例：

```
array[0] = '4'
array[1] = '5'
array[2] = '6'
array[3] = '\0'
array[4] = '\0'
and so on 
```

现在我想把这个数组变成一个整数。我尝试首先将此数组转换为字符串，然后应用 Integer.parseInt 但我不起作用。我不知道如何解决这个问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:50:24.810

如果您只阅读该行并尝试将其解析为 int 会怎样。由于您不知道它是否是整数，因此请使用异常来处理它：

```
String[] nextLine = reader.nextLine().split("\\s+") ;
Integer[] integer = new Integer[nextLine.length()] ;
try
{
  for(int i=0; i < nextLine.length();i++)  
   integer[i] = Integer.parseInt(nextLine[i]) ;
}
catch(NumberFormatException exception)
{
  exception.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:51:41.110

我强烈建议[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)改用。从文档中：

> 一个简单的文本扫描器，可以使用正则表达式解析原始类型和字符串。Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。然后可以使用各种 next 方法将生成的标记转换为不同类型的值。

A`Scanner`将使用空格作为其默认分隔符，因此您应该能够简单地调用`sc.nextInt()`每个预期的整数标记。有关使用示例，请参见链接页面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T19:54:16.150

您不能将数组强制转换为字符串...但是~~如果您使用空格而不是`\0`, 那么~~您可以这样做：

```
int i = Integer.parseInt(String.valueOf(array).trim()); 
```

关于评论 - 很酷，也`trim()`消除了尾随`0x0`：

```
public static void main(final String[] args) {
    char[] chars = new char[5];
    chars[2] = '9';
    System.out.printf("Original length: %d%n",String.valueOf(chars).length());
    System.out.printf("Trimmed length:  %d%n",String.valueOf(chars).trim().length());
    System.out.printf("Parsed:          %d%n",Integer.parseInt(String.valueOf(chars).trim()));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T19:52:28.677

假设`array`是您的 char 数组，这应该可以完成您的工作：

```
String str = "";
for (char c : array)
    str += c;

int result = Integer.parseInt(str); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T19:53:21.487

你最好使用`Scanner`.

```
Scanner input = new Scanner(new File("myfile.txt"));
int first  = input.nextInt();
int second = input.nextInt(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T20:03:30.250

```
 // Assume an initial size of the array
    char array[] = new char[5];
    array[0] = '4';
    array[1] = '5';
    array[2] = '6';
    array[3] = '\0';
    array[4] = '\0';

    StringBuffer buffer = new StringBuffer();

    for (int i = 0; i < array.length && array[i] != '\0'; i++){
        buffer.append(array[i]);
    }

    int myInteger = Integer.parseInt(buffer.toString()); 
```

如果你想先创建一个字符串，然后将其解析为一个整数，我建议你使用 StringBuffer 主要是因为 Java 中的字符串是不可变的（你不能更改其中的特定字符）。如果您使用 StringBuffer，您可以通过将 toString 方法应用于新创建的对象然后使用 Integer.parseInt 来解决此问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T20:12:04.430

好的，如果您只是想将该数组转换为字符为整数，那么您可以这样做。

字符数组[] = 新字符[5]；

```
 array[0] = '4';
    array[1] = '5';
    array[2] = '6';
    array[3] = '\0';
    array[4] = '\0';

    String newString = String.copyValueOf(array);
    newString = newString.replace("\0", "");

    int newInt = Integer.parseInt(newString);

    System.out.println(array);
    System.out.println(newInt); 
```

上面的代码已经过测试和验证。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-19T06:09:13.490

`public String(char[] letters)`然后使用 String 构造函数`Integer.parseInt(...)`。

# .net - 异步 HTTP 请求导致跨线程异常

> ID：12962559
> 
> 赞同：2
> 
> 时间：2012-10-18T19:47:09.790
> 
> 标签：.net, multithreading

> **可能重复：**
> [修复跨线程异常](https://stackoverflow.com/questions/7919725/fixing-a-cross-thread-exception)

我正在使用异步 HTTP 请求来发送 Web 请求并在不阻塞 UI 的情况下获取响应。这工作正常，直到我尝试将响应放入表单上的标签中，此时我得到“跨线程操作无效：从创建它的线程以外的线程访问的控件”。我知道从不同线程访问控件的问题，以及使用委托来解决它的问题。

我怀疑正在发生的事情是 web 回调代码在不同的线程上执行，因此它无法访问在原始线程上创建的控件，但我想我不完全理解回调如何在第一名。

我想要的是能够发出网络请求，继续其他业务，然后在响应到达时获取响应，并能够将响应放置在控件上

```
Public Sub Test()
    SendAsynchRequest("http://google.com")
End Sub

Public Sub SendAsynchRequest(ByVal MyURL As String, Optional ByVal Timeout As Integer = 30)
    'send an asynch web request

    Dim request As HttpWebRequest
    Dim result As IAsyncResult
    Dim state As WebRequestState
    Dim reqtimeout As Integer

    Try
        request = CType(WebRequest.Create(MyURL), HttpWebRequest)   ' Create the request
        request.Proxy = Nothing

        state = New WebRequestState(request)        ' Create the state object used to access the web request
        result = request.BeginGetResponse(New AsyncCallback(AddressOf RequestComplete), state)
        reqtimeout = 1000 * Timeout
        ThreadPool.RegisterWaitForSingleObject(result.AsyncWaitHandle, New WaitOrTimerCallback(AddressOf TimeoutCallback), state, reqtimeout, True)

    Catch ex As Exception
        log.Error("Error sending web request: " & ex.Message)

    End Try

End Sub

Private Sub TimeoutCallback(ByVal state As Object, ByVal timeOut As Boolean)
    'request times out    
    If (timeOut) Then
        ' Abort the request
        CType(state, WebRequestState).Request.Abort()
        Dim orig_url = CType(state, WebRequestState).Request
        log.Error("Web request to: " & orig_url.RequestUri.ToString & " timed out")
    End If
End Sub

Private Sub RequestComplete(ByVal result As IAsyncResult)
    'called when the request completes

    Dim request As WebRequest
    Dim response As System.IO.Stream
    Dim sr As StreamReader

    Try
        request = DirectCast(result.AsyncState, WebRequestState).Request
        response = request.EndGetResponse(result).GetResponseStream
        sr = New StreamReader(response)
        log.Info("Received Web response: " & sr.ReadToEnd)

        '*********************************************************
        ' THIS LINE CAUSES A CROSS-THREAD ERROR
        '*********************************************************
        TextBox1.Text = sr.ReadToEnd

    Catch ex As Exception
        log.Error("Received error code: " & ex.Message)

    End Try

End Sub

Private Class WebRequestState
    'Stores web request for access during async processing
    Public Request As WebRequest

    Public Sub New(ByVal newRequest As WebRequest)
        Request = newRequest
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:58:31.767

在错误行中，替换为以下内容：

```
TextBox1.Invoke(Sub()
                   TextBox1.Text = sr.ReadToEnd
                End Sub) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:49:15.073

我敢肯定，这个问题之前已经回答过很多次了。您需要使用 Control.Invoke 函数在 UI 线程上运行更新。

# email - trac 中的 sendmail 无效

> ID：12962561
> 
> 赞同：1
> 
> 时间：2012-10-18T19:47:20.423
> 
> 标签：email, notifications, sendmail, trac

`Trac`提交对带有抄送电子邮件地址的工单的更改时，似乎不会触发电子邮件事件。我目前启用了日志记录，但在 trac.log 文件中没有找到任何与电子邮件有关的内容。我也在监视 /var/log/maillog - 那里也没有出现任何内容。

我没有使用 SMTP。我正在尝试配置`Trac`为使用`sendmail`.

我当前的 [通知] 部分：

```
admit_domains = 
always_notify_owner = false
always_notify_reporter = false
always_notify_updater = true
email_sender = SmtpEmailSender
ignore_domains = 
mime_encoding = none
sendmail_path = /usr/sbin/sendmail
smtp_always_bcc = known_good_address@domain.tld
smtp_always_cc = 
smtp_default_domain = 
smtp_enabled = false
smtp_from = trac@localhost
smtp_from_name = 
smtp_password = 
smtp_port = 25
smtp_replyto = trac@localhost
smtp_server = localhost
smtp_subject_prefix = __default__
smtp_user = 
ticket_subject_template = $prefix #$ticket.id: $summary
use_public_cc = false
use_short_addr = false
use_tls = false 
```

sendmail 的路径正确：

```
[box]# which sendmail
/usr/sbin/sendmail 
```

是否应该从 trac.ini [通知] 部分中删除所有 smtp 引用以使 Trac 的 sendmail 挂钩工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:59:25.720

它应该像改变一样容易

```
smtp_enabled = false 
```

到

```
smtp_enabled = true 
```

# c# - BHO 访问托管 dll 中的资源

> ID：12962563
> 
> 赞同：2
> 
> 时间：2012-10-18T19:47:33.410
> 
> 标签：c#, visual-studio-2012, bho

我创建了我的第一个 BHO，一个 IE 插件。我想向头部注入一个javascript文件。

```
IHTMLElement head = (IHTMLElement)((IHTMLElementCollection)document.all.tags("head")).item(null, 0);
IHTMLScriptElement scriptObject = (IHTMLScriptElement)document.createElement("script");
scriptObject.type = @"text/javascript";
scriptObject.text = "\nwindow.onload = function(){alert('loaded..');}\n\n";
((HTMLHeadElement)head).appendChild((IHTMLDOMNode)scriptObject); 
```

这工作得很好，但我想使用：`scriptObject.src`并链接到我添加到项目中的资源文件。我尝试使用 RES: 协议，但 IE 找不到它。我这样做正确吗？谢谢你。

`scriptObject.src = "res://C:/git/addon/ie/bin/addon.dll/script.js";`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:58:16.150

你有没有尝试过

```
scriptObject.src = "res://C:\\git\\addon\\ie\\bin\\addon.dll/script.js"; 
```

# elasticsearch - 弹性搜索 - 查询值

> ID：12962566
> 
> 赞同：1
> 
> 时间：2012-10-18T19:47:46.623
> 
> 标签：elasticsearch

我有一个具有以下值的弹性搜索索引

```
{
    "_index": "article",
    "_type": "articleId",
    "_id": "10970",
    "_score": 1,
    "_source": {
        "url": "http%3A%2F%2Fwww.tomshardware.com%2Fnews%2FAir-Traffic-Software-DoS-Attacks%2C16471.html%23xtor%3DRSS-181",
        "title": "Air%20Traffic%20Software%20Vulnerable%20to%20DoS%20Attacks",
        "publicationId": "888",
        "text": "%20%3Cp%3E%3Cstrong%3EA%20security%20researcher%20revealed%20a%20flaw%20in%20commonly%20used%20air%20traffic%20control%20software%20that%20would%20allow%20an%20attacker%20to%20create%20an%20unlimited%20number%20of%20phantom%20flights.%3C%2Fstrong%3E%3C%2Fp%3E%20%3Cp%3E%3Ca%20target%3D%22_blank%22%3E%3C%2Fa%3E%3C%2Fp%3E%20%3Cp%3EAccording%20to%20Andrei%20Costin%2C%20%242%2C000%20in%20equipment%20and%20%22modest%20tech%20skills%22%20are%20enough%20to%20throw%20an%20air%20traffic%20control%20system%20of%20virtually%20any%20airport%20into%20complete%20disarray.%20The%20ADS-B%20system%20that%20is%20used%20across%20the%20world%20is%20vulnerable%20as%20it%20does%20not%20verify%20that%20incoming%20traffic%20signals%20as%20genuine.%20%3C%2Fp%3E%20%3Cp%3ECostin%20says%20that%20a%20hacker%20could%20inject%20flights%20that%20do%20not%20exist%20and%20could%20confuse%20an%20air%20controller%20station.%20Air%20controllers%20could%20cross-check%20flights%20with%20flight%20schedules%2C%20but%20if%20the%20number%20of%20phantom%20flights%20is%20high%20enough%2C%20there%20is%20no%20way%20that%20cross-checks%20would%20work.%20Consider%20it%20like%20an%20DoS%20attack%20on%20an%20air%20traffic%20control%20system.%3C%2Fp%3E%20%3Cp%3ECostin%20noted%20that%20rogue%20signals%20from%20the%20ground%20can%20be%20generally%20identified%20and%20ruled%20out%20as%20malicious%20signals%2C%20but%20there%20is%20no%20way%20to%20do%20the%20same%20for%20robotic%20aircraft%2C%20for%20example.%20He%20also%20noted%20that%20data%20sent%20from%20airplanes%20to%20air%20traffic%20controllers%20is%20unencrypted%20and%20can%20be%20captured%20by%20unidentified%20sources.%20Since%20this%20applies%20to%20any%20aircraft%2C%20it%20is%20in%20theory%20possible%20to%20deploy%20airplane%20tracking%20devices%20to%20track%20specific%20aircraft.%3C%2Fp%3E%20%3C%2Fp%3E%3Cp%3E%20%3Cp%3E%3Ca%20target%3D%22_blank%22%20href%3D%22mailto%3Anews-us%40bestofmedia.com%3Fsubject%3DNews%2520Article%2520Feedback%22%3E%3Cem%3E%3Csub%3EContact%20Us%20for%20News%20Tips%2C%20Corrections%20and%20Feedback%3C%2Fsub%3E%3C%2Fem%3E%3C%2Fa%3E%3C%2Fp%3E",
        "keywords": {
            "air": "3.4965034965034962",
            "traffic": "3.4965034965034962",
            "flights": "2.797202797202797",
            "": "2.797202797202797",
            "Costin": "2.097902097902098",
            "aircraft": "2.097902097902098",
            "signals": "2.097902097902098",
            "control": "2.097902097902098",
            "system": "2.097902097902098",
            "there": "1.3986013986013985"
        }
    }
} 
```

我正在尝试编写一个查询来搜索此索引是否具有关键字航班（确实如此）但我遇到了困难它直接在文本等其他字段之一上运行匹配查询但在尝试执行相同操作时遇到问题或关键字相似

有没有办法使用当前设置执行此搜索，或者我应该以不同的方式添加关键字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:43:39.943

如果我理解正确，您想查找所有具有该字段的记录，并且该字段`keyword.flights`的值并不重要。您可以使用字符串查询来做到这一点：

```
curl "http://localhost:9200/_search?q=keywords.flights:*" 
```

或使用[存在过滤器](https://www.elastic.co/guide/en/elasticsearch/reference/2.3/query-dsl-exists-query.html)：

```
curl "http://localhost:9200/_search" -d '{
    "query": {
        "constant_score" : {
            "filter" : {
                "exists" : { "field" : "keywords.flights" }
            }
        }
    }
}' 
```

# android - 如何防止活动在android应用程序中被破坏？

> ID：12962567
> 
> 赞同：1
> 
> 时间：2012-10-18T19:47:46.397
> 
> 标签：android, android-activity

我使用下一个代码使用可用客户端共享一些文本：

```
 Intent share = new Intent(Intent.ACTION_SEND);
    share.putExtra(Intent.EXTRA_TEXT, "Here's some text for Twitter.");
    share.setType("text/plain");
    startActivity(Intent.createChooser(share, "Share this via")); 
```

它可以工作（打开 twitter 客户端，作为示例），但是当我关闭该应用程序时，我发现我的应用程序也关闭了。但我需要我的应用程序仍然处于活动状态。我需要为此做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T19:49:42.623

[您的应用程序将在后台运行，onResume 和 onPause 都将被调用](http://developer.android.com/reference/android/app/Activity.html#ProcessLifecycle)，前提是操作系统有足够的内存来保存新应用程序和所有旧应用程序。

*   如果您需要一个长时间运行的进程，而用户没有查看它，请使用服务。

*   如果您需要用户以相同的状态返回应用程序，[您需要在 onResume 和 onPause 中进行工作以保存状态信息并](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)在用户返回时再次初始化您的 UI。如果您真的担心它会被杀死（好吧，我认为它不应该丢失捆绑包），您可以将它们存储在您的应用程序的 SharePreferences 中。

*   如果您想知道应用程序何时从该特定共享意图返回，请使用 startActivityForResult

# ios - 我可以在没有移动设备之间的 Web 服务层的情况下使用 mongoDB 吗？

> ID：12962577
> 
> 赞同：0
> 
> 时间：2012-10-18T19:48:32.450
> 
> 标签：ios, mongodb

目前我正在使用 MySQL + RoR 组合来存储我的 iOS 应用程序的数据。我使用 Core Data 进行离线存储。

所以我做了很多 API 或者各种类似 CRUD 的操作。

鉴于 Mongo 将实体存储为 JSON，并且它还具有 REST 接口，是否可以在没有 Web 服务的情况下使用 Mongo 来使用其自己的 REST API 存储数据？

如果否，那有什么问题？是出于安全考虑还是根本不可能。

如果是，可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:31:21.910

您提出的两个问题都是有效的：

*   MongoDB`--rest`特性是一个[简单的只读接口](http://www.mongodb.org/display/DOCS/Http+Interface#HttpInterface-SimpleRESTInterface)（不支持插入/更新/删除操作）。

*   从安全的角度来看，直接在 Internet 上公开您的数据库服务器也是一种不好的做法。

建议的方法是：

1)为您的应用程序使用（或构建）安全的[REST API](http://www.mongodb.org/display/DOCS/Http+Interface#HttpInterface-RESTInterfaces)

2) 使用提供安全 REST API 的[托管 MongoDB 服务](http://www.10gen.com/partners/cloudhosting)。

# android - Android 碰撞检测精度

> ID：12962584
> 
> 赞同：3
> 
> 时间：2012-10-18T19:48:58.720
> 
> 标签：android, collision-detection

我有一个 Sprite 和多个用作项目符号的位图。现在的问题是我希望子弹飞得非常快，但这又给我的碰撞检测功能带来了问题，它的工作方式是每一帧我都在敌人和子弹处创建一个矩形并检查重叠。

现在，如果一颗子弹飞得非常快，它就像从一个点“跳”到另一个点，这意味着如果一个敌人很小并且子弹“跳”在敌人身上，它就不会被注意到。

我想知道的是，是否有一种方法可以检测两个移动物体之间是否会发生碰撞，或者只是看看敌人是否在子弹的轨迹中。

我通过循环遍历一系列敌人来进行碰撞检测，在 for 循环中我循环所有子弹，然后为两者创建一个矩形，并检查每个敌人和子弹与 Rect.intersects 的碰撞。

子弹航向由一个固定点和触摸输入测量，然后通过此函数计算：

```
public void calcPoint(float x, float y) {
    double alfa = Math.atan(x / y);//x and y are inputs
    bulletPointX = (float) Math.sin(alfa) * speed;
    bulletPointY = (float) Math.cos(alfa) * speed;
} 
```

我不知道如何解决它，我想要一些建议如何做到这一点，并可能有一个例子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:35:17.447

有几种方法可以做到这一点，但最简单的可能是[预测性碰撞检测。](http://seb.ly/2010/01/predictive-collision-detection-techniques/)基本上，您将运动分成时间段并检查每个段。如果你有几千个物体在移动，它可能不是很有效，但在大多数情况下它会工作得很好。

它也有几个名字。我提供的链接可以帮助您了解基础知识，但要了解更多信息，请搜索：

*   帧独立碰撞检测
*   连续碰撞检测
*   扫描测试

# android - android FS 中是否有任何应用程序可以访问/读取的目录？

> ID：12962586
> 
> 赞同：0
> 
> 时间：2012-10-18T19:49:02.707
> 
> 标签：android, permissions, filesystems

我正在制作一个插入到 android 设备上的 ttyUSB 设备的小型数据库。在那个程度上，我让android*`ueventd`*写入一个文件来保存一些信息，比如：vid、pid、串行和设备路径（例如`/dev/ttyUSB0`）。我希望任何 android 应用程序都可以访问此文件。

1.  android FS 中是否有任何应用程序可以访问/读取的目录？最好是不需要特殊权限的。我可以把我的文件放在哪里？

2.  以这种方式让安卓应用程序访问 USB 设备的序列号是否存在安全风险？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:33:18.267

> 我希望任何 android 应用程序都可以访问此文件。

为什么？你认为用户希望这些数据“可以被任何安卓应用程序访问”吗？您披露这些数据对用户有什么好处？

> android FS 中是否有任何应用程序可以访问/读取的目录？最好是不需要特殊权限的。我可以把我的文件放在哪里？

所有应用程序都可以访问外部存储，但在未来的 Android 版本中需要读取权限。所有应用程序都无法访问其他位置。

> 以这种方式让安卓应用程序访问 USB 设备的序列号是否存在安全风险？

可能。可能存在隐私风险。

请保护文件，并创建一个`ContentProvider`您通过权限保护的文件。这样，当用户安装希望访问您的数据的应用程序时，*用户*可以决定是否会发生这种情况。

另外，请记住，您所做的*ueventd*超出了 Android SDK 的范围。如果您在您正在创建的某个 ROM 模块中执行此操作，那很好。如果您尝试在任意硬件上使用*ueventd*玩游戏，请记住*ueventd*的行为可能因设备而异。

# jquery-ui - jQuery UI - 取消从可拖动添加到可排序

> ID：12962588
> 
> 赞同：0
> 
> 时间：2012-10-18T19:49:09.790
> 
> 标签：jquery-ui, jquery-ui-sortable

我有两个 div，一个 Draggable 和一个 Sortable。

我想保持可排序中的值是唯一的：我不希望任何已经在可拖动对象中的项目能够再次放入可排序对象中。

我尝试使用 cancel() 但它似乎不起作用。

[http://jsfiddle.net/6DSaV/2/](http://jsfiddle.net/6DSaV/2/)表明我什至无法取消做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:59:59.193

如果您将可排序 div 中的标签更改为 DIV 而不是 P。事件 cancel() 有效。

```
<div id='sortable'>
    <div>Drag stuff here.</div>
</div>

<div id='draggable'>
    <div data-id='1'>One</div>
    <div data-id='2'>Two</div>
</div> 
```

# python - 如何在python的配置文件中保存密码

> ID：12962594
> 
> 赞同：3
> 
> 时间：2012-10-18T19:49:23.233
> 
> 标签：python, encoding, passwords, app-config, pygtk

我正在用 python 为 gnome2 编写一个小程序，用于检查 gmail 中的新电子邮件。

实际上，我使用编码 base-64 将 gmail 的传递保存在文件 .config 中。然后每次我需要它时解码通行证。

这安全吗？这是存储密码的更好方法？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T19:52:06.477

不，它不安全。相反，您应该使用 Gnome 密钥环服务或当前系统提供的任何服务来存储密码。

有关此类服务的 Python 接口，请参见[keyring](http://pypi.python.org/pypi/keyring)包：

```
import keyring

keyring.set_password('your_application_name', username, password) 
```

`keyring`将您的密码存储在可用的最安全的密钥环中，用于`get_password('your_application_name', username)`再次检索它。

# c - C中灵活长度数组的分配空间在哪里？

> ID：12962596
> 
> 赞同：3
> 
> 时间：2012-10-18T19:49:32.797
> 
> 标签：c, arrays

假设我的结构如下：

```
struct line {
       int length;
       char contents[];
};

struct line *thisline = (struct line *) malloc (sizeof (struct line) + this_length);
thisline->length = this_length; 
```

分配的空间在哪里`contents`？在堆中还是在后面的地址中`length`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T19:51:27.317

根据定义，灵活数组`contents[]`位于可变大小结构内部，在`length`字段之后，因此您就在它的`malloc`-ing 空间中，所以当然`p->contents`位于您`malloc`-ed 的区域内（所以在堆内）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T19:52:37.397

两个都。它在堆中，因为`thisline`指向堆中分配的缓冲区。您在`malloc()`调用中请求的额外大小用作`thisline->contents`. 因此，`thisline->contents`在 之后开始`thisline->length`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:51:20.390

没有为**内容**隐式分配的空间。

```
struct line foo;
// the size of foo.contents in this case is zero. 
```

始终通过使用指针来引用它。例如，

```
struct line * foo = malloc( sizeof(foo) + 100 * sizeof(char) );
// now foo.contents has space for 100 char's. 
```

# php - 使用在选择中发布的 Id 创建一个不同 Id 的数组

> ID：12962601
> 
> 赞同：1
> 
> 时间：2012-10-18T19:50:06.137
> 
> 标签：php

我有`SELECT name="idproduct"`一个表格，它的选项值是我选择的产品的 ID。我想用我一个接一个选择的产品的 ID 在 PHP 中创建一个数组。
例子：

```
$idproducts=(1, 2, 14, 24, 8) 
```

在表的顶部，我有 SELECT，首先我选择一种产品。然后我选择另一个等等......我需要在该选择中选择产品的 ID，因为在页面下方我有一个表格，我想在顶部显示我选择的产品。

```
$sql='SELECT    id_product,
        nameproduct,
        situation,
        quantity            
        FROM product
        WHERE id_product = "'.$idproducts.'"'; 
```

有人会解释我如何使用发布的 ID 制作数组`SELECT`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:00:25.867

$sql='SELECT id_product、nameproduct、情况、数量 FROM product WHERE id_product IN (.$idproducts.)';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:55:56.493

假设您`<select>`是多选，您可以像这样循环遍历数组来构建查询字符串：

```
$sql='SELECT id_product,
        nameproduct,
        situation,
        quantity            
        FROM product
        WHERE 1';

foreach( $_POST['idproducts'] as $k=>$v ){
    $sql .= ' OR id_product = ' . $v;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:14:19.530

这是我喜欢用来将数据数组转换为或基于 where 查询的函数。

```
 $sql_stub = "SELECT id_product, nameproduct, situation, quantity FROM product";
    $sql = orQuery($sql_stub, array("id1", "id2"), "id_product");

    function orQuery($sql_stub, $array, $field){

        //START WHERE CLAUSE
        $where = "WHERE ";

        //ADD DATA TO THE WHERE CLAUSE
        foreach($array as $data){
                    $where = $where." ".$field." = '".$data."' OR ";
        }

        //CHECK THAT THE WHERE CLAUSE IS MORE THAN JUST WHERE
        if($where!="WHERE "){
            //REMOVE THE TRAILING OR
            $where = substring($where, strlen($where)-4);

            //APPEND TO SQL_STUB
            $sql_stub = $sql_stub.$where;
        }
        return $sql_stub;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:05:56.757

如果 $idproducts 是一个数组：

```
$sql='SELECT id_product, nameproduct, situation, quantity FROM product 
      WHERE id_product IN ('.implode(',',$idproducts).')'; 
```

# sql-server - TSQL 中的时间范围和日期范围

> ID：12962604
> 
> 赞同：1
> 
> 时间：2012-10-18T19:50:10.710
> 
> 标签：sql-server, sql-server-2008, tsql, date-range

我想在 TSQL 中编写一个程序，计算给定日期范围之间的峰值时间，这些日期范围分为给定时间。

```
Start time: 10-02-2012 10:00
End time  : 10-02 2012 11:00
time range: every 5 minutes 
```

所以它将是：

```
10:00 range 1  -> 5 peak times
10:05 range 2  -> 11 peak times
.
.
.
11:00 range 11 -> 7 peak times 
```

当给定时间范围 30 分钟时，代码将计算 2 个范围

我应该使用间隔吗？我怎么解决这个问题？有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:21:15.380

您可以这样确定时间范围：

```
declare @StartTime as DateTime = '10-02-2012 10:00'
declare @EndTime as DateTime ='10-02-2012 11:00'
declare @TimeRange as Time = '00:05:00.000'

; with TimeRanges as (
  select @StartTime as StartTime, @StartTime + @TimeRange as EndTime
  union all
  select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where EndTime < @EndTime ) -- Corrected.
  select StartTime, EndTime
    from TimeRanges 
```

将范围与您的样本数据连接起来以获得摘要：

```
declare @StartTime as DateTime = '10-02-2012 10:00'
declare @EndTime as DateTime ='10-02-2012 11:00'
declare @TimeRange as Time = '00:05:00.000'

declare @Samples as Table ( SampleId Int Identity, SampleTime DateTime )
insert into @Samples ( SampleTime ) values
  ( '10-02-2012 9:00' ), ( '10-02-2012 10:00' ), ( '10-02-2012 10:02' ), ( '10-02-2012 10:02' ),
  ( '10-02-2012 10:05' ), ( '10-02-2012 10:20' ), ( '10-02-2012 10:34' ), ( '10-02-2012 11:30' )

; with TimeRanges as (
  select @StartTime as StartTime, @StartTime + @TimeRange as EndTime
  union all
  select StartTime + @TimeRange, EndTime + @TimeRange
    from TimeRanges
    where EndTime < @EndTime ) -- Corrected.
  select StartTime, EndTime, Count( S.SampleId ) as Samples
    from TimeRanges as TR left outer join
      @Samples as S on TR.StartTime <= S.SampleTime and S.SampleTime < TR.EndTime
    group by TR.StartTime, TR.EndTime 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:01:09.287

使用带有 DATEADD 函数的循环。

[http://msdn.microsoft.com/en-us/library/ms186819.aspx](http://msdn.microsoft.com/en-us/library/ms186819.aspx)

继续添加您的“分钟”间隔，直到结果日期大于结束日期。

**编辑**

```
BEGIN
-- setup
DECLARE @start DATETIME
DECLARE @end DATETIME
DECLARE @interval INT
DECLARE @samples TABLE (
    [time] DATETIME
)
SET @start = CAST('10-02-2012 10:00' as DATETIME)
SET @end = CAST('10-02-2012 11:00' as DATETIME)
SET @interval = 5
INSERT INTO @samples VALUES 
    ( '10-02-2012 9:00' ), ( '10-02-2012 10:00' ), ( '10-02-2012 10:02' )
    , ( '10-02-2012 10:02' ), ( '10-02-2012 10:05' ), ( '10-02-2012 10:20' )
    , ( '10-02-2012 10:34' ), ( '10-02-2012 11:30' )
-- make the ranges
DECLARE @ranges TABLE (
    [start] datetime
    ,[end] datetime
)
DECLARE @tmp DATETIME
SET @tmp = DATEADD(minute, @interval, @start)
IF @tmp > @end BEGIN SET @tmp = @end END
WHILE @start < @end
    BEGIN
    INSERT INTO @ranges VALUES (@start, @tmp)
    SET @start = @tmp
    SET @tmp = DATEADD(minute, @interval, @start)
    IF @tmp > @end BEGIN SET @tmp = @end END
    END
-- execute the query
SELECT r.[start], r.[end], count(s.[time]) [count]
FROM @ranges r
    LEFT JOIN @samples s 
        ON r.[start] <= s.[time] AND r.[end] > s.[time]
GROUP BY r.[start], r.[end]
END 
```

我建议使用一个简单的 while 循环来生成你想要的范围。对我来说，它比 CTE 递归查询解决方案更直接/易于理解，尽管公认的不那么优雅。

# java - OnClickListener 超级

> ID：12962612
> 
> 赞同：2
> 
> 时间：2012-10-18T19:50:39.003
> 
> 标签：java, android

为什么我不能`this`在以下代码中作为上下文传递？我收到错误

`The constructor DataManager(new View.OnClickListener(){}) is undefined`

我是android编程的新手，如果问题很奇怪，很抱歉！

任何帮助都会很棒。

```
 btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

            Log.d("vkx", "clk insert");
String qq="insert into users(id,name,password) values ('6','usrs','passs')";
            DataManager dm=new DataManager(this);
            dm.SqliteExecutenonquery(qq);

            Log.d("vkx", "clk insert done");
        }
    }); 
```

我有我的`DataManger`课

```
 public DataManager(Context cont) {
    super(cont, DBname, null, DBver);
}
    .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:51:34.667

你写了匿名类`new OnClickListener() {`

没有作为类型参数的`DataManager`类的构造函数。`OnClickListener`

我认为`this`你需要使用而不是`getApplicationContext();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:58:21.030

“this”是对包含类的当前实例的引用。

在您使用“this”的地方，它指的是 onClickListener 类型的匿名内部类的实例。

我相信您可能想要传递定义 onClickListener 的 Activity 的上下文？如果是这样，请使用`MyActivity.this`，其中 MyActivity 是 Activity 类的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:59:54.907

只需编写`MyClassName.this`，假设“MyClassName”是您的活动名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:00:50.407

在`setOnClickListener`添加此行之前：

```
final Context ThisContext = this; 
```

在你的听众中使用这个

```
DataManager dm=new DataManager(ThisContext); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T20:03:13.030

因此，您正在做的是在实例化 DataManager 时，您不是将上下文作为参数传递，而是实际上是 OnClickListener 的实例。

```
DataManager dm=new DataManager(YOUR_CLASS_NAME.this); 
```

YOUR_CLASS_NAME 应该是 Activity 类名。IE

```
class MyClass extends Activity{

  public onCreate(Bundle savedInstanceState){
    Button btn = new Button();
    btn.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
           DataManager dm=new DataManager(MyClass.this);

        }
    });

  }
} 
```

试试这个，让我知道它是怎么回事

# ruby-on-rails - Rails 自定义表单生成器 - 单选按钮不在响应参数中，除非它有值

> ID：12962613
> 
> 赞同：0
> 
> 时间：2012-10-18T19:50:38.473
> 
> 标签：ruby-on-rails, ruby, forms

好的，我一直在挖掘并没有找到答案。我有一个非常复杂的自定义 Rails 表单生成器应用程序，它从数据库中呈现页面、部分和调查（表单）。

它在服务器端进行验证（还没有完成 javascript 并且想要两种类型），并且我让它适用于所有类型的表单输入对象，除了单选按钮。因为我无法让它提交单选按钮以在未选中时显示在参数中。与仅在参数之外寻找单选按钮相反，我想找到一种方法在我的响应循环中检查它们（如果可能的话）。

我已经看到了将其绑定到模型以确保其验证的[建议](https://stackoverflow.com/questions/9420374/radio-button-value-in-rails-form-for-not-being-part-of-paramsmodel)，但我的问题是独一无二的，因此我没有将其绑定到的模型对象。

我的表格是在一个部分声明的：

```
<%= form_tag take_surveys_path, :id => "take_surveys_new", :method => :post do %> 
```

以及我用于生成单选按钮的代码（查看问题类型字段的部分部分）：

```
<% when 'Radio Button' %>
 <% question.answers.each do |answer| %>
        <%= radio_button "response[#{question.id}]content", question.question_text, answer.value %>
        <%=answer.value%>
        <br />
        <% end %>
<% end %> 
```

我遍历“take_survey_controller”中的参数，然后检查每个问题是否有效，其中包括基于问题对象中设置的一些属性的正则表达式和所需验证：

```
 params[:response].each do |question_id, answer|
        #find my questions and answers, call 
        if item.valid?          
            #do a bunch of saving and stuff...
        end
  end 
```

但这永远不会被单选按钮调用，因为空单选按钮不会发布到参数。

有什么建议或帮助吗？如果需要，很高兴分享更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:07:05.337

听起来您的验证的一部分应该包括检查输入参数。如果未选择单选按钮，它将不会提交值，因此您需要有一个问题 ID 列表并确保在进入参数响应循环之前提交每个问题。

```
array_of_question_ids.each do |id|
  handle_missing_question(id) unless params[:response][id]
end

params[:response].each ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:26:27.097

您正在寻找的是一种为单选按钮设置默认值的方法。默认情况下，复选框会执行此操作，但在这种情况下，您的单选按钮似乎不会发生这种情况。

尝试这个：

```
<%= hidden_field "response[#{question.id}]content", question.question_text %>
<%= radio_button "response[#{question.id}]content", question.question_text, answer.value %> 
```

# android - Android - 允许用户使用应用程序打开文本文件

> ID：12962620
> 
> 赞同：1
> 
> 时间：2012-10-18T19:51:10.000
> 
> 标签：android, android-intent, android-manifest

我借助[http://www.vogella.com](http://www.vogella.com)的链接和进一步搜索解决了我的问题。

• Android 清单：  

```
<uses-sdk android:minSdkVersion="8" />
<supports-screens android:resizeable="true" android:smallScreens="true" android:normalScreens="true" android:largeScreens="true" android:anyDensity="true" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission>
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" android:process="IPP.EZPadd">
    <activity
        android:label="@string/app_name"
        android:name=".EZPaddActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter >
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:scheme="file" />
            <data android:mimeType="text/plain" />
        </intent-filter>
    </activity>
</application> 
```

• Java 活动：  

```
public void open_on_start()
    {
        Intent i = getIntent();
        Uri data = i.getData();
        if (data == null)
        {
            return;
        }
        URL url;
        String startFile = "";
        try
        {
            url = new URL(data.getScheme(), data.getHost(), data.getPath());
            startFile = url.toString().replace("file:", "");
        }
        catch (Exception ex)
        {
            Toast.makeText(this, "Error:\n" + ex.getMessage().toString(), Toast.LENGTH_LONG).show();
            return;
        }
        if (startFile == null)
        {
            return;
        }
        StringBuilder text = new StringBuilder();  
        can = false;
        sel = false;
        try
        {
            file = new File(CurDir, startFile);
            reader = new BufferedReader(new FileReader(file));  
            String line;
            while ((line = reader.readLine()) != null)
            {
                text.append(line);  
                text.append('\n');  
            }
        }
        catch (Exception e)
        {
            Toast.makeText(this, "Error:\n" + e.getMessage().toString(), Toast.LENGTH_LONG).show();
        }
        TextEditor.setText(text);
        FileName.setText(startFile);
    } 
```

谢谢西蒙的链接，这很有帮助。起初我只是略过它，这就是为什么我遇到了它没有加载文件的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:00:14.230

您需要将意图过滤器添加到将处理文本文件的任何活动。当您安装应用程序时，过滤器会在操作系统中注册。当用户尝试启动文件时，Android 会询问您要处理请求的注册应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:52:46.680

您不能“默认”执行此操作。只有用户可以选择（并删除或更改）操作的默认意图。不然就乱了！

[编辑]

Lars Vogel 总是一本好书。试试这个教程。它就像它得到的一样简单（几乎;）

[http://www.vogella.com/articles/AndroidIntent/article.html](http://www.vogella.com/articles/AndroidIntent/article.html)

# jquery - 禁用后取消选中 check_box_tag 以启用文本区域

> ID：12962622
> 
> 赞同：0
> 
> 时间：2012-10-18T19:51:15.010
> 
> 标签：jquery

我正在使用 Jquery 根据是否选中复选框来禁用和重新启用文本区域。

选中复选框时，我可以禁用文本区域框，但未选中复选框时无法启用它。这是我当前的 Jquery 脚本：

```
$('#business_closed').change(function(){
  value = $(this).val();
  console.log(value);

  if(value){
    $('#open_hours').attr("disabled", "disabled");
  }
  else{
    $('#open_hours').removeAttr("disabled");
  }
  return false;
}); 
```

基于`console.log(value);`，即使我取消选中该复选框，我的值也始终为 1。如何获取复选框的值（无论是否选中）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:07:57.037

使用`.attr()`jQuery 版本 < 1.6 存在一些问题。

因为它在页面呈现时给出了 defaultCheck 属性。所以它是一个很好的做法，`.prop()`而不是使用

```
if(value){
    $('#open_hours').prop("disabled", true);
  }
  else{
    $('#open_hours').prop("disabled", false);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:52:45.783

修改后的代码：您应该使用选中的属性

```
$('#business_closed').change(function(){

  console.log(value);

  if(this.checked){
    $('#open_hours').attr("disabled", true);
  }
  else{
    $('#open_hours').attr("disabled", false);
  }
  return false;
}); 
```

# logging - 蒙德里安配置日志

> ID：12962625
> 
> 赞同：2
> 
> 时间：2012-10-18T19:51:25.813
> 
> 标签：logging, log4j, mondrian

我正在开发一个 Web 应用程序，它显示一些仪表板面板，其中包含 OLAP 多维数据集提供的数据。我使用蒙德里安作为分析平台。目前，我一切正常。仪表板可以很好地与蒙德里安提供的数据配合使用。

现在，我想从 Mondrian 访问查询日志，检查它们的执行时间等。我检查了[文档](http://mondrian.pentaho.com/documentation/configuration.php)，但我无法让它工作：我不明白它的含义。

然后我搜索了教程，但他们都在谈论`log4j.xml`文件夹中的一个文件`tomcat/webapps/mondrian/WEB-INF/classes`。问题是我在那个文件夹中只有一个`log4j.properties`文件。

你能帮我登录工作吗？
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T02:32:17.947

你可以看看[Pentaho Business Analytics Server 是如何做到的](http://source.pentaho.org/svnroot/bi-platform-v2/tags/4.5.0-stable/bi-platform-plugin-actions/res/log4j/log4j.xml)。

将`log4j.xml`文件放在您的`WEB-INF/classes`文件夹中。

祝你好运！

将要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-26T09:22:47.853

当您的 log4j.properties 不在类路径中时，您可能会收到此错误。对于 maven 项目，您应该将 log4j.properties 或 log4j.xml 放在 src/main/resources 文件夹中。资源中的文件将包含在类路径中，因此 log4j 可以读取它

# c# - 运行 Coded UI 时如何解析当前目录

> ID：12962629
> 
> 赞同：5
> 
> 时间：2012-10-18T19:51:48.707
> 
> 标签：c#, dll, automation, coded-ui-tests

我正在运行一个引用 DLL 的 CodedUI 测试，并且该 DLL 引用了一种“配置”文件。运行测试时，当前目录返回 CodedUI 放置我使用过的测试结果文件的目录

```
AppDomain.CurrentDomain.BaseDirectory 
```

和

```
System.Reflection.Assembly.GetExecutingAssembly().CodeBase 
```

和

```
System.Reflection.Assembly.GetExecutingAssembly().Location 
```

这些都给了我相同的道路

我需要的是获取 DLL 所在的路径，因为那是构建配置文件的位置。

如果我正在调试或者我只是在运行测试（显然），这将改变的位置，所以我不能使用它并向后导航或类似的东西。

还有其他方法可以获取您引用的 DLL 的位置吗？

**编辑：**

我从我引用的 DLL 中引用这个配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T18:40:40.157

到目前为止，我找到测试 dll 的原始路径的唯一地方是测试上下文中的私有变量。我最终使用反射来获取价值并使其可用。

```
 using System.Reflection;
    using Microsoft.VisualStudio.TestTools.UnitTesting;
    public static string CodeBase(
        TestContext testContext)
    {
        System.Type t = testContext.GetType();
        FieldInfo field = t.GetField("m_test", BindingFlags.NonPublic | BindingFlags.Instance);
        object fieldValue = field.GetValue(testContext);
        t = fieldValue.GetType();
        PropertyInfo property = fieldValue.GetType().GetProperty("CodeBase");
        return (string)property.GetValue(fieldValue, null);
    } 
```

我使用它来获取正在运行的 DLL 的路径，然后使用它来运行我知道已编译到与测试所在位置相同的应用程序。

如果有人找到更好的方法来获得这个，也请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:54:57.580

获取加载给定 DLL 的目录的最佳方法是对该程序集中定义的类型使用以下内容。

```
var type = typeof(TypeInThatAssembly);
var path = Path.GetDirectory(type.Location); 
```

`CodeBase`and属性通常返回相同的`Location`信息，但非常不同

*   CodeBase：这包含在加载期间引用的程序集的位置
*   位置：这是从磁盘上实际加载程序集的位置

这些在使用影子复制程序集（Asp.Net、xUnit 等）的应用程序中可能有所不同

# webgl - 你如何在 WebGL 中使用索引缓冲区？

> ID：12962630
> 
> 赞同：0
> 
> 时间：2012-10-18T19:51:56.213
> 
> 标签：webgl

> **可能重复：**
> [渲染具有多个索引的网格](https://stackoverflow.com/questions/11148567/rendering-meshes-with-multiple-indices)

这是关于使用索引缓冲区来呈现自定义几何图形，例如来自 OBJ 文件。我对 3d 图形约定略知一二，但我对 WebGL 没有做太多的事情。我的问题的简短形式是“您如何在 WebGL 中使用索引缓冲区？”

我想做的是，对于一个自定义几何体，构建一个正在运行的位置向量列表和一个正在运行的 UV 向量列表（让我们跳过法线）。然后，当我去绘制三角形时，我只想用指向三个现有位置向量的指针和指向三个现有 UV 向量的指针来定义每个三角形。（仅仅是因为这就是 OBJ 的设置方式）

从我读过的内容来看（我发誓我用谷歌搜索了一百种不同的方法，但无法得到结论性的答案），你必须将 UV 和位置集中在一起作为一个顶点，然后将三角形定义为指向三个的指针这些顶点。但是当 UV 列表的长度与位置列表的长度不同时会发生什么？

可以说我有一个立方体。那是八个位置向量。但是考虑到每个面都具有相同的方形 UV 布局（渲染时每一面应该看起来相同）。那是四个（唯一的）UV。怎么办？

就像我必须放弃这种方法，咬紧牙关，为所有 12 个三角形定义每个位置和 UV——以沿立方体边缘重复位置向量和沿面对角线重复 uv 为“代价”。如果这是公认的做法，那很好，我只是想确保我以正确的方式进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:55:00.073

包含顶点位置、纹理坐标、法线等的数组的长度必须相同。这在许多情况下意味着冗余数据。多维数据集是冗余特别糟糕的一个示例。实际上，您必须传入 24 个顶点和 24 个 texcoords。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:56:29.067

您已经听说过不能重复使用立方体顶点，但是对于一些额外的上下文，请注意现代 3D 内容有很多光滑的非平面；因此三角形之间的大多数连接*可以*共享顶点，因为它们具有相同的法线和其他属性。属性不连续的锐边是不太常见的情况，因此不应对其进行优化。

# go - 类型断言嵌套接口

> ID：12962634
> 
> 赞同：1
> 
> 时间：2012-10-18T19:52:00.830
> 
> 标签：go, type-assertion

我`json.Unmarshal` 将 JSON 转换为`interface{}`. 我无法键入断言它。[http://play.golang.org/p/NAe8voYnb8](http://play.golang.org/p/NAe8voYnb8)。

```
package main

import (
    "encoding/json"
    "log"
)

func main() {
    b := []byte(`{"key1":[
                          {"apple":"A", "banana":"B", "id": "C"},
                          {"cupcake": "C", "pinto":"D"}
                         ]
                  }`)

    var data interface{}
    _ = json.Unmarshal(b, &data)

    log.Println(data)
    // map[key1:[map[apple:A id:C banana:B] map[cupcake:C pinto:D]]]

    ndata, ok := data.(map[string][]map[string]string)
    log.Println(ok, ndata)
    // false map[]

    key_data, ok := ndata["key1"].([]map[string]string)
    log.Println(ok, key_data)
    // false []
} 
```

有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T22:09:00.590

例如，

```
package main

import (
    "encoding/json"
    "log"
)

func somefunc(data interface{}) {
    log.Printf("%T\n", data)
    // Prints: map[string]interface {}
    log.Println(data)
    // Correctly prints: map[key1:[map[apple:A id:C banana:B] map[cupcake:C pinto:D]]]

    ndata, _ := data.(map[string]interface{})
    log.Println(ndata)
    // Should print: map[key1:[map[apple:A banana:B id:C] map[cupcake:C pinto:D]]]

    key_data, _ := ndata["key1"]
    log.Println(key_data)
    // Should print: [map[apple:A banana:B id:C] map[cupcake:C pinto:D]]]
}

func main() {
    b := []byte(`{"key1":[{"apple":"A", "banana":"B", "id": "C"},{"cupcake": "C", "pinto":"D"}]}`)
    var m interface{}
    _ = json.Unmarshal(b, &m)
    somefunc(m)
} 
```

输出：

```
2012/10/18 18:21:43 map[string]interface {}
2012/10/18 18:21:43 map[key1:[map[apple:A id:C banana:B] map[cupcake:C pinto:D]]]
2012/10/18 18:21:43 map[key1:[map[banana:B apple:A id:C] map[pinto:D cupcake:C]]]
2012/10/18 18:21:43 [map[banana:B apple:A id:C] map[pinto:D cupcake:C]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:11:54.370

如果您需要一种简单的方法来处理嵌套的 JSON 数据，我已经编写了一个包来做到这一点： [https ://github.com/opesun/jsonp](https://github.com/opesun/jsonp)

这减轻了必须在每个级别都键入 assert 的痛苦。有关说明，请参阅文档。

# android - HTC Sense 上的 NoClassDefFoundError

> ID：12962645
> 
> 赞同：0
> 
> 时间：2012-10-18T19:52:40.300
> 
> 标签：android, noclassdeffounderror

在 HTC Sense 上调试我的应用程序时，我（我相信它是）在 android.os.NetworkOnMainThreadException 上出现以下 NoClassDefFoundError 异常

这段代码似乎中断的地方是在调用这行代码时

```
@SuppressWarnings("unchecked")
ArrayResponse<Grid> response = (ArrayResponse<Grid>) HttpHandler.getHttpHandler().processGet(url, ArrayResponse.class, listType); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:12:50.677

如果您的 HTC sense 正在运行 android API 版本 < 11 (HONEYCOMB)，则[android.os.NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)尚不可用。

# java - 表单认证成功后的403

> ID：12962653
> 
> 赞同：1
> 
> 时间：2012-10-18T19:52:49.183
> 
> 标签：java, security, authentication, web-applications, jboss7.x

我在 JBoss 7 上的 webapp 中使用基于表单的身份验证，由 LdapLoginModule 支持。

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Protected Resources</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
    <user-data-constraint>
        <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>ldap</realm-name>
    <form-login-config>
        <form-login-page>login.html</form-login-page>
        <form-error-page>login.html</form-error-page>
    </form-login-config>
</login-config> 
```

在访问/时，我被发送到 login.html，如果我输入了无效密码，则到 /j_security_check。如果我输入了正确的密码，虽然我被发送到 / 但在浏览器中出现以下错误：

```
HTTP Status 403 - Access to the requested resource has been denied 
```

为什么在成功协商登录表单后我会被拒绝访问 index.html？没有任何日志输出的迹象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T18:52:26.887

这似乎归结为基于角色的身份验证。它现在正在使用以下 web.xml（现在作为 2.5 而不是 2.3 网络应用程序）：

```
<security-role>
    <role-name>*</role-name>
</security-role>
<security-constraint>
    <web-resource-collection>
        <web-resource-name>Protected Resources</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
    <user-data-constraint>
        <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>ldap</realm-name>
    <form-login-config>
        <form-login-page>/login.html</form-login-page>
        <form-error-page>/login.html</form-error-page>
    </form-login-config>
</login-config> 
```

以及以下 JBoss 登录模块：

```
<login-module code="org.jboss.security.auth.spi.LdapExtLoginModule" flag="required">
    <module-option name="java.naming.provider.url" value="ldap://localhost:389"/>
    <module-option name="java.naming.security.authentication" value="simple"/>
    <module-option name="bindDN" value="cn=Manager,dc=domain,dc=com"/>
    <module-option name="baseCtxDN" value="ou=people,dc=domain,dc=com"/>
    <module-option name="baseFilter" value="(cn={0})"/>
    <module-option name="bindCredential" value="password"/>
    <module-option name="principalDNPrefix" value="cn="/>
    <module-option name="principalDNSuffix" value=",ou=people,dc=domain,dc=com"/>
    <module-option name="rolesCtxDN" value="ou=groups,dc=domain,dc=com"/>
    <module-option name="uidAttributeID" value="uid"/>
    <module-option name="matchOnUserDN" value="true"/>
    <module-option name="roleAttributeID" value="cn"/>
    <module-option name="roleAttributeIsDN" value="false"/>
    <module-option name="roleRecursion" value="-1"/>
    <module-option name="roleFilter" value="(member={1})"/>
    <module-option name="allowEmptyPasswords" value="false"/>
    <module-option name="Context.REFERRAL" value="follow"/>
    <module-option name="throwValidateError" value="true"/>
</login-module> 
```

# excel - 使用宏将excel中的单元格格式化为小数位

> ID：12962656
> 
> 赞同：3
> 
> 时间：2012-10-18T19:53:03.177
> 
> 标签：excel, vba

如何使用宏在 Excel 中格式化单元格 (D:) 2 位小数位单元格 (E:) 1 位小数位和单元格 (H:) 3 位小数位？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T19:57:51.127

范围的 numberformat 属性会将其格式化为任何自定义格式

```
 sheets("sheet1").range("D:D").numberformat = "0.00"
  sheets("sheet1").range("E:E").numberformat = "0.0"
  sheets("sheet1").range("H:H").numberformat = "0.000" 
```

对于显示逗号或货币的数字，这将起作用：

```
 sheets("sheet1").range("D:D").numberformat = "&#,##0" 
```

# http - 如何构建 HTTPBuilder 中使用的委托/响应处理程序模式？

> ID：12962657
> 
> 赞同：1
> 
> 时间：2012-10-18T19:53:11.753
> 
> 标签：http, groovy

我想编写一个异步函数，它接受像 HTTPBuilder.request 这样的处理程序的闭包。函数是怎么写的？

当我调用该函数时，它将如下所示：

```
// calling my function now - we'll process the results when status is available...
myFunction(arg1, arg2) {
  status.success = { result ->
    println 'cool'
  }
  status.failure = { result ->
    println 'not cool'
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:19:32.843

的“body”`myFunction`实际上是 type 的第三个参数`Closure`。当您声明它时，它实际上将具有三个参数：`arg1`、`arg2`和另外一个包含主体的参数。

在`myFunction`使用委托调用主体闭包时。委托持有`status.success`和`status.failure`事件处理程序闭包。然后进行异步操作并捕获结果。最后，调用适当的结果处理程序闭包。像这样的函数的骨架看起来像这样：

```
def myFunction(arg1, arg2, Closure body) {
    def delegateMap = [status:[:]]
    body.delegate = delegateMap
    body.call()

    // start async process
    Thread.start {
         def result = doAsyncStuff()
         if (isSuccess(result) && delegateMap.status.success) {
             delegateMap.status.success.call(result)
         }
         else if (isFailure(result) && delegateMap.status.failure) {
             delegateMap.status.failure.call(result)
         }
    }
} 
```

# c# - 将动态创建的 TreeViewItem 拖到画布上

> ID：12962662
> 
> 赞同：0
> 
> 时间：2012-10-18T19:53:29.877
> 
> 标签：c#, .net, wpf, drag-and-drop, treeview

我的 WPF 应用程序中有一个 TreeView，旁边有一个画布。

我想实现用户能够拖动 TreeViewItem 并将其放在画布中的功能（将调用方法并在画布中执行某些操作）。

WinForms 似乎有这样做的事件，但我在 WPF 中找不到类似的功能。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:04:44.057

msdn 上有很多关于[实现 WPF 拖放](http://msdn.microsoft.com/en-us/library/ms742859.aspx)的内容，我建议您查看那里的教程。您需要首先将画布上的 AllowDrop 属性设置为 true。希望遵循本教程将为您清除它，或者至少产生一些更具体的问题。

# c - 未检测到多线程库

> ID：12962666
> 
> 赞同：1
> 
> 时间：2012-10-18T19:53:54.077
> 
> 标签：c, windows, multithreading, mingw, posix

这是我编写的一个简单代码，用于在 Eclipse 中学习 Windows 7 操作系统上的多线程编程。

```
pthread_mutex_t double_release_001_glb_mutex_;
pthread_mutex_t * double_release_001_glb_mutex = & double_release_001_glb_mutex_;

void double_release_001_glb_mutex_lock () {}
void double_release_001_glb_mutex_unlock () {}

int double_release_001_glb_data = 0;

void * double_release_001_tsk_001 (void * pram)
{

    pthread_mutex_lock (double_release_001_glb_mutex);
    double_release_001_glb_data = (double_release_001_glb_data% 100) + 1;

    pthread_mutex_unlock (double_release_001_glb_mutex);
    return NULL;
}

void double_release_001 ()
{
    pthread_t tid1;
    pthread_mutex_init (double_release_001_glb_mutex, NULL);
    pthread_create (& tid1, NULL, double_release_001_tsk_001, NULL);
    pthread_join (tid1, NULL);
    pthread_mutex_destroy (double_release_001_glb_mutex);
}

void double_release_001_tskentry_001 ()
{
    while (1)
    {
        if (rand ())
        {
            double_release_001_tsk_001 (NULL);
        }
    }
} 
```

但是当我构建它时，我收到一条错误消息

```
Description Resource    Path    Location    Type
undefined reference to `_imp__pthread_create'   
undefined reference to `_imp__pthread_create'       
undefined reference to `_imp__pthread_create'   
undefined reference to `_imp__pthread_create' 
```

我已经包括`pthread.h`. 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:02:20.560

将此选项添加到链接器：-lpthread

# objective-c - Objective-c 中是否有任何自定义 Date 类，如 C# 或任何其他语言中的 DateTime

> ID：12962667
> 
> 赞同：-3
> 
> 时间：2012-10-18T19:53:53.370
> 
> 标签：objective-c, ios, date

现在我正在使用`NSDate`, `NSCalendar`, `NSDateComponents`and`NSDateFormatter`来完成非常简单的任务，但这是非常非常复杂和不灵活的东西..

因此，我正在寻找一些实现 Date 的自定义类，例如 C#、Ruby、Python、PHP、Boost 或任何其他语言或框架。谢谢！

UPD：谢谢，我知道如何使用`NSDate`和相关的类，问题是是否有一个针对 Objective-C 的自定义类以更清晰的方式实现相同的功能。例如，可能像 C# 中的 DateTime 或 Ruby 中的 Date 是非常有用的类。我希望通过正确修改它们来查看对日期、月份、天数和其他组件的访问，因为我现在可以`NSDateComponents`像这样设置任何一天：`2012-10-119`而不是`2013-01-26`这样它就不会重新计算日期。当然可以转换`NSDateComponents`为`NSDate`然后再将其转换回以`NSDateComponents`重新计算日期，但我认为在这些课程中这种态度没有任何优势。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:01:00.763

您必须将 NSDate 与 NSDateFormatter 结合使用。stackoverflow 上有很多例子。

# python - 计算字典中字符串的平均分数

> ID：12962672
> 
> 赞同：-2
> 
> 时间：2012-10-18T19:54:06.180
> 
> 标签：python, string, dictionary, average

如何编写一个 python 程序来获取字典中字符串的值，并输入以下形式的任何字符串和字典：

```
score("a b" , {"a":(1.2) , "b":(3.4)}) 
```

并将值的平均值作为浮点数返回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:08:35.257

它看起来像你想要的：

```
def score(key_str,dct):
    keys = key_str.split()
    v = sum(dct[key] for key in keys)
    return float(v)/len(keys) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:16:04.493

这是一个不太抽象的答案。

```
def score(hairypeople, hair_length):
    """ Calculates the average nosehair length given a string of people's names 
    and a dictionary of the length of their nose hairs.  """ 
    list_of_hairy_people = hairypeople.split()
    number_of_hairy_people = len(list_of_hairy_people)
    sum_length_of_hairs = sum([hair_length[ew] for ew in list_of_hairy_people])
    return float(sum_length_of_hairs) / number_of_hairy_people 
```

# scala - 如何使用通用 AnyVal 编写函数

> ID：12962674
> 
> 赞同：0
> 
> 时间：2012-10-18T19:54:07.077
> 
> 标签：scala

我正在尝试编译以下 Scala 代码：

```
// Something that Scala is very bad at: don't try and figure out if every type I *could* possibly use supports it,
// just let me use it until I try a type that doesn't.  Or at least have AnyValue provide an abstraction for all
// Numeric Types (Interface)
trait NumericValue[T] {
  def +(rhs : T, lhs : T) : T
}
implicit object ByteNumericValue extends NumericValue[Byte] {
  def +(rhs : Byte, lhs : Byte) : Byte = (rhs + lhs).toByte
}
implicit object ShortNumericValue extends NumericValue[Short] {
  def +(rhs : Short, lhs : Short) : Short = (rhs + lhs).toShort
}
implicit object IntNumericValue extends NumericValue[Int] {
  def +(rhs : Int, lhs : Int) : Int = rhs + lhs
}
implicit object LongNumericValue extends NumericValue[Long] {
  def +(rhs : Long, lhs : Long) : Long = rhs + lhs
}
implicit object BigIntNumericValue extends NumericValue[BigInt] {
  def +(rhs : BigInt, lhs : BigInt) : BigInt = rhs + lhs
}

def doMath[T <: AnyVal](initializer : Long)(implicit Num : NumericValue[T]) : T = {
  Num.+(initializer.asInstanceOf[T], initializer.asInstanceOf[T])
}

lazy val math = doMath[Short](0) 
```

这里的想法是我需要一种方法来使 doMath 对任何 Integer 进行操作，从而对具有加法运算符的类型进行操作。我希望它与 BigInt 之类的大数字或 Byte 之类的非常小的数字无关。

当我尝试编译它时，我得到一个错误：

```
error: could not find implicit value for parameter Num: NumericValue[Short]
lazy val math = doMath[Short](0) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:02:12.533

隐式对象不好。

尝试使用案例类

例如：

```
case class LongNumericValue(l: Long) extends NumericValue[Long] {
  def +(l2 : Long) : Long = l + l2
}

def doMath[T <: AnyVal](implicit Num : NumericValue[T]) : T = {
  Num + Num
} 
```

我将解释：在上面的示例中，doMath 采用 NumericValue[T] 类型的单个值（即 NumericValue[Long]），但如果接收到的值是 Long 类型，编译器将为其查找隐含值，即 case 类。

注意我没有我的电脑，所以我无法测试这个，但过去当我尝试以这种方式初始化变量时它确实如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:12:57.437

雷克斯是对的。由于 x : Long 意味着 x.asInstanceOf[Short] 无效，因此当 T 很短时尝试将初始化程序强制转换为 T 时，例程会失败。是的，这似乎是合法的。谢谢雷克斯！希望您回答而不是发表评论，以便我可以给您 +1。

我确实对初始化程序的类型有一些控制，并且所有 Byte 都是它的逻辑类型，但我需要考虑一下以确保这是唯一的问题，因为 doMath 的实际实现使用参数来获取惰性值类型有一堆控制输出的选项。但以上是最简单的形式，我认为你一针见血。谢谢雷克斯科尔！

# mysql - MySQL UTF-8 Collat ion 无法正常工作

> ID：12962676
> 
> 赞同：1
> 
> 时间：2012-10-18T19:54:08.667
> 
> 标签：mysql, utf-8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:58:31.330

使用`utf8_bin`而不是`utf8_general_ci`.

使用`utf8_general_ci`，相似字符（like`i`和`ï`）在比较和排序中被视为相同字符。比较也是不区分大小写的（因此是`_ci`），这意味着`i`和`I`也被视为相同。

其他排序规则，比如`utf8_unicode_ci`做更好的排序，但在比较时仍然“失败”。

# php - 我怎样才能模块化这个应用程序？你能给我一个代码级别的简单例子吗？

> ID：12962677
> 
> 赞同：0
> 
> 时间：2012-10-18T19:54:13.967
> 
> 标签：php, facebook

我的应用程序有一个 index.php

它做的主要事情是

1.使用facebook登录让用户登录到我的应用程序。（将来我将使用其他网站，如 google 等登录等）
2\. “主要工作”是否
3\. 显示结果。

主要工作：
1\. 从fb获取访问令牌。- 花费 <10 毫秒
2\. 获取数据集 1 - 使用 accesstoken 并获取有关用户的数据。- 大约需要一秒钟。
3\. 获取数据集 2 - 蜘蛛列表中的每个朋友以获取特定信息 - 每个朋友大约需要一秒钟。因此，平均需要大约 300 秒。
4\. 做一些处理 - 几秒钟

问题区域 1\. 第 3 步总是超过 Max_Execution_Time。

解决方案限制 1\. 希望只坚持使用 php。没有 Python/红宝石。

我的代码骨架是：

```
<?php

//  Login
$facebook->getloginurl ......

//Main work
$access_token = $facebook-> ...... 
$user_id = $facebok->get ......

// Following is the time consuming step
foreach $friend_of_that_user .... get information required for this app.

//Displays result
echo ""
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:26:52.493

您正在为每个朋友提出一个请求！这可以通过以下方法之一来增强：

1.  [领域扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)：
    获取前 100 位好友的姓名和 5 部电影：

    ```
    me?fields=friends.limit(100).fields(name,movies.limit(5).fields(name)) 
    ```

2.  [Batch API](https://developers.facebook.com/docs/reference/api/batch/)：
    例如，要获取 5 个朋友的详细信息，您可以发出以下 Batch 请求：

    ```
    curl \
       -F 'access_token=...' \
       -F 'batch=[{ "method":"GET","name":"get-friends","relative_url":"me/friends?limit=5",},{"method":"GET","relative_url":"?ids={result=get-friends:$.data.*.id}"}]' \
       https://graph.facebook.com/ 
    ```

现在我真的建议考虑分页而不是`limit`一起删除该字段。如果分页与您的应用程序相关，它可以大大增强体验！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:15:20.123

`foreach`循环是问题所在。您正在为每个朋友进行单独的 API 调用。这需要永远并且不需要。如此多的 API 调用也会很快让您的应用程序被阻止。

对用户进行身份验证后，您可以调用 以`$facebook->api('/me/friends?fields=id,name,picture,...', 'GET');`在一次调用中获取所需的所有数据。在糟糕的一天，这应该需要 <5 秒。只要您拥有正确的权限，您就可以通过[字段扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)深入了解您朋友的数据。

如果您有一个拥有大量朋友的用户，Facebook 可能会对结果进行分页。即使这样，您也应该在不超过 10 个 API 调用中获得所需的一切。

# php - ZF2 中的动态视图

> ID：12962679
> 
> 赞同：0
> 
> 时间：2012-10-18T19:54:16.090
> 
> 标签：php, zend-framework2

我正在开发我的 SaaS 应用程序，该应用程序需要构建自定义 ViewModel 来填充小部件（左、中、右、页脚等）

我开始使用 BaseController

```
`class BaseController extends AbstractActionController {` 
```

但是由于我将尝试使用 ZfcUser 等模块，所以我想知道我是否可以创建一个构建 ViewModel 的模块，如果可以，我应该在哪里/如何连接到事件以不中断转发/重定向？

我的想法是在不干扰正常控制器行为的情况下构建更大的视图模型。控制器只会将它们的普通数组（）传回给视图模型，然后将其放置

```
 `<?php echo $this->content; ?>` 
```

好的澄清一个网站你通常有页眉，页脚，内容，说左导航。所以页脚有 3 列登录框、最新消息和 twitter 提要，左侧导航有导航和一些广告

所有这些实际上与调用的 Controller 和 Action 无关，所以我试图找到获取 ViewModel 的最佳位置，以及如何构建和填充所有这些外部实体（登录模板、推特、Nivo Slider）并替换。

然后当控制器返回它的 array() 时，让它替换`$this->content`布局中的

将所有这些放在每个 Action 中将是巨大的，并且会破坏外部模块的使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T13:59:46.003

我建议使用[zf2plugin](https://github.com/mbrostami/zf2Plugin)，但它可以与 zend forward helper 一起使用，也许你不想要这个。但是有一个闭包结果模式，你可以生成一些动态内容..
试试看，希望有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:00:37.937

您可能想要创建位于模块中的视图助手，例如 TwitterFeed-Module。视图助手将从同一个模块访问服务。

TwitterFeed 服务将简单地从 twitter 请求提要（最​​好将其缓存一个小时左右）。viewhelper 只会根据需要渲染数据或使用视图脚本进行渲染或返回要在布局本身中处理的原始数据。

# tfs - 设置 TFS/测试管理器以在测试失败时发送电子邮件

> ID：12962683
> 
> 赞同：0
> 
> 时间：2012-10-18T19:54:37.380
> 
> 标签：tfs, tfsbuild, tfs-sdk

是否可以设置 TFS/Test Manager 以便在测试失败后发送电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:54:10.610

Yes, it is possible but it requires quite a lot of changes/additions to the process template and possibly a custom-made activity.

1.  After tests have run, we check if `BuildDetail.BuildPhaseStatus` has status `failed`
2.  We send mail to everyone who has changesets committed to this build, so the build goes through `BuildDetail.AssociatedChangesets` (you need to have `AssociateChangesetsAndWorkItems` on) and get the committer username.
3.  Unfortunately for us, there's no good correlation between TFS username and email address at our place, so we had to create a custom activity that looks that up in the AD.
4.  The actual email is sent with the `BuildReport` action from Community TFS Build Extensions. We modified the xslt, but that's not really necessary. We also wanted to include a listing of the failed tests, and that required modification of the action itself (test data isn't included by default).

Looking at this description and all the work made to get this working, I'm beginning to wonder if it was worth it ;).

# reverse-geocoding - 使用反向地理编码的附近区域位置提供不同的结果

> ID：12962690
> 
> 赞同：3
> 
> 时间：2012-10-18T19:55:24.137
> 
> 标签：reverse-geocoding

我正在使用谷歌反向地理编码来查找子地区和社区。

下面的两个坐标都非常接近，并且都在尼日利亚的维多利亚岛内，但是只有第一个参考显示了该社区。

在社区的响应中显示维多利亚岛

[http://maps.googleapis.com/maps/api/geocode/json?latlng=6.428291386098148,3.4191928832085523&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=6.428291386098148,3.4191928832085523&sensor=false)

在来自第一个地址组件的社区下的响应中不显示维多利亚岛

[http://maps.googleapis.com/maps/api/geocode/json?latlng=6.427779639540112,3.420051190093318&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=6.427779639540112,3.420051190093318&sensor=false)

任何人都可以对此有所了解吗？有没有办法获得更好的结果？我已经尝试过 yahoo place finder 但也没有运气。

# shell - 检查 Unix 参数是否为非空

> ID：12962693
> 
> 赞同：1
> 
> 时间：2012-10-18T19:55:40.217
> 
> 标签：shell, unix, parameters

> **可能重复：**
> [如何判断字符串是否未在 bash shell 脚本中定义？](https://stackoverflow.com/questions/228544/how-to-tell-if-a-string-is-not-defined-in-a-bash-shell-script)
> [检查环境变量是否在 Unix shellscript 中设置的最佳方法是什么](https://stackoverflow.com/questions/307503/whats-the-best-way-to-check-that-environment-variables-are-set-in-unix-shellscr)

我第一次尝试编写 Unix shell 脚本，在我现在正在编写的脚本中，我希望我的脚本的 3 个参数中的 2 个是可选的。但是，如果用户不输入参数，我需要使用默认值。我怎样才能正确地说出基本上意味着：

```
$argument = $2
if($argument  == "")
    $argument = "defaultVal" 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:59:10.970

尝试：

```
argument=${2:-default value} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:58:00.133

试试这个：

```
if [ "x$2" == "x" ]; then
    $argument="default";
else
    $argument=$2;
fi 
```

# python - Python Ft.Xml.cDomlette.Element toxml/tostring？

> ID：12962694
> 
> 赞同：1
> 
> 时间：2012-10-18T19:55:41.010
> 
> 标签：python, xml

在一个大型 Python 应用程序中，我有一个实例`Ft.Xml.cDomlette.Element`，我需要将其转回 XML 字符串（尽可能接近原始字符串）。

在现有代码中，我们正在执行以下操作：

```
PrettyPrint(element, stream=buff, encoding="utf8") 
```

但是，根据当前元素，这可能会生成与原始元素相去甚远的 XML。

例子：

原始 XML：

```
<use id="Geneve" x="499500" y="181000" xlink:href="#symbolRect"/> 
```

`PrettyPrint`的`Element`：

```
<use xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns="http://www.w3.org/2000/svg"
    xlink:actuate="onLoad" xlink:show="embed" 
    xlink:href="#symbolRect" y="181000"
    xlink:type="simple" x="499500" id="Geneve"/> 
```

命名空间的东西不会打扰我，它很容易删除。令人担忧的是其他属性的奇怪添加。关于如何更接近原始 XML 的任何想法？

# jquery - asp.net mvc 3：如何在浏览器后退按钮上的表中获取数据

> ID：12962696
> 
> 赞同：2
> 
> 时间：2012-10-18T19:55:51.783
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, back-button

我的问题是：在我的布局页面上，我有指向不同仪表板的链接。当我单击一个链接时，它会在表格中显示数据：每个链接都会调用一个操作方法并获得一个在 html 表格中显示数据的视图。在每个表中，都有一个超链接字段（列）显示有关该特定记录的详细信息。此超链接调用控制器中的另一个操作方法。因此，当我单击 Layout 上的链接时，它会显示表格，并且表格中的超链接会显示有关该特定记录的详细信息。在此详细信息页面中，当我单击浏览器后退按钮时，我需要当前打开的表中的数据。但我没有得到这张表，它再次进入索引操作方法。如何得到这个？

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:55:50.100

好吧，它缺少关于您的陈述的一些重要信息，所以我必须做出一些假设！

1° - 如果您使用 AJAX 请求，后退按钮将不会返回到您之前的操作，因为请求都由您的 Javascript 代码处理。

2° - 如果在您的帖子中您的 url 没有改变并且您在服务器端处理值，将其存储在会话和其他东西中，您的后退按钮也将不起作用

所以基本上应该发生的是这些事情之一。如果您不使用服务器端会话并且不使用 ajax 处理请求和响应，则后退按钮应该可以工作，除了缓存问题： http: [//gregorybeamer.wordpress.com/2009/12/10/asp-用后退按钮处理网络技巧/](http://gregorybeamer.wordpress.com/2009/12/10/asp-net-tricks-dealing-with-the-back-button/)

否则，如果您使用 ajax，您应该创建一个按钮来手动复制“返回”行为以使其工作，但浏览器操作将无法按预期工作。

此致！

# python - python pandas连续删除重复项

> ID：12962705
> 
> 赞同：7
> 
> 时间：2012-10-18T19:56:34.060
> 
> 标签：python, pandas

是否有一个函数来强制索引是唯一的，或者它是否只能通过转换为 dict 并返回或类似的东西在 python '本身' 中处理这个？

如以下评论中所述：python pandas 是一个基于 numpy/scipy 构建的项目。

to_dict 和 back 有效，但我敢打赌，当你变大时，这会变慢。

```
In [24]: a = pandas.Series([1,2,3], index=[1,1,2])

In [25]: a
Out[25]: 
1    1
1    2
2    3

In [26]: a = a.to_dict()

In [27]: a
Out[27]: {1: 2, 2: 3}

In [28]: a = pandas.Series(a)

In [29]: a
Out[29]: 
1    2
2    3 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T15:20:44.670

顺便说一句，我们计划在不久的将来`drop_duplicates`向 Series 添加一个方法。`DataFrame.drop_duplicates`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T20:07:06.083

使用`groupby`和`last()`

```
In [279]: s
Out[279]: 
a    1
b    2
b    3
b    4
e    5

In [280]: grouped = s.groupby(level=0)

In [281]: grouped.first()
Out[281]: 
a    1
b    2
e    5

In [282]: grouped.last()
Out[282]: 
a    1
b    4
e    5 
```

# jira - JIRA/Greenhopper 处理补丁版本？

> ID：12962708
> 
> 赞同：0
> 
> 时间：2012-10-18T19:56:49.287
> 
> 标签：jira, jira-plugin, jira-agile

我们有以下要解决的方案。

1.  我们创建了一个新的 sprint，将其称为 sprint “A”，其中包含一堆问题。
2.  然后，我们接到客户的电话，导致需要发布紧急补丁。

在这里，我们想为补丁创建一个新的 sprint，并将其移动到计划板的顶部。我们无法做到这一点。

我试图创建第二个计划板来解决这个问题，但似乎我们不能同时进行两个冲刺。

我们应该如何处理这种想要创建“补丁”发布周期的场景？

编辑 - 我可以做的另一件事是同时运行冲刺，但我不知道该怎么做，而且我发现的帖子根本没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:24:15.037

为什么不将紧急补丁的新问题添加到现有的 sprint 中并将其排在最前面以便首先完成呢？您甚至可以将“紧急”泳道配置为显示在板的顶部，以保证紧急问题将以最高优先级显示。

[如果你真的想为紧急修复创建一个单独的 sprint，你应该启用 Parallel Sprints（在发行说明](https://confluence.atlassian.com/display/GH/GreenHopper+6.0.3+Release+Notes#GreenHopper6.0.3ReleaseNotes-Parallelsprints)中有一些关于这方面的信息，请确保你运行的是 GreenHopper 6.0.3 或更高版本）。完成此操作后，您将能够在与现有正在运行的 sprint 相同的板上开始另一个 sprint。

谢谢，肖恩

# jquery - jQuery'滚动（）；' 动画不恢复

> ID：12962711
> 
> 赞同：0
> 
> 时间：2012-10-18T19:57:02.053
> 
> 标签：jquery, jquery-animate

我正在尝试为在滚动时出现和消失的类设置动画。

然而，不透明度仅在第一次向上滚动和向下滚动时有效，它不会将不透明度恢复为 0... 任何人都可以帮助我吗？

```
$(window).scroll(function () {
    if ($(this).scrollTop() > 70) {
        $('header').addClass('shortResize');
        $('.shortResize').animate({ 'opacity': '1' });
        $('section#contentWrap').addClass('contentWrap-margin');
    } else {
        $('header').removeClass('shortResize');
        $('.shortResize').css('opacity', '0');
        $('section#contentWrap').removeClass('contentWrap-margin');
    }
}); 
```

编辑（html片）：

```
<header>
    <a id="logo" href="index.php"></a>
</header> 
```

编辑（css片）：

```
 header {
    background: -webkit-linear-gradient(bottom, rgba(61, 61, 61, .9) 50%, rgba(76, 76, 76, .9) 50%);
    position: relative;
    margin-top: 70px;
    width: 100%;
    height: auto;
    padding: 10px 0px;

    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    border: 1px solid rgba(0, 0, 0, .5);
}

a#logo {
    background: url(../img/logo.png);
    width: 629px;
    height: 70px;
    margin: auto;
    display: block;
}

.shortResize {
    position: fixed !important;
    opacity: 0;
    width: 100% !important;
    height: auto;
    padding: 10px 0px;
    top: 0;
    left: 0;
    margin: 0 !important;
    border-radius: 0px !important;
    z-index: 33;
}

.contentWrap-margin {
    margin-top: 160px;
    border-radius: 5px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:00:02.623

您正在消除`shortResize`类，然后在下一条语句中尝试选择它，请参阅固定版本：

```
$(window).scroll(function () {
    if ($(this).scrollTop() > 70) {
        $('header').addClass('shortResize');
        $('.shortResize').animate({ 'opacity': '1' });
        $('section#contentWrap').addClass('contentWrap-margin');
    } else {
        $('.shortResize').css('opacity', '0'); //THIS NEEDS BE DONE FIRST
        $('header').removeClass('shortResize'); 
        $('section#contentWrap').removeClass('contentWrap-margin');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:34:24.467

你能试试这个吗？

**更新**

```
$(window).scroll(function () {
        if ($(this).scrollTop() > 70) {
            $('header').addClass('shortResize');
            $('.shortResize').stop().animate({ 'opacity': '1' });
            $('section#contentWrap').addClass('contentWrap-margin');
        } else {
            console.log($(this).scrollTop());
            $('header').removeAttributes();
            $('section#contentWrap').removeClass('contentWrap-margin');
        }
    });

    jQuery.fn.removeAttributes = function () {
        return this.each(function () {
            var attributes = $.map(this.attributes, function (item) {
                return item.name;
            });
            var img = $(this);
            $.each(attributes, function (i, item) {
                img.removeAttr(item);
            });
        });
    } 
```

# java - JSF 桌面应用程序

> ID：12962717
> 
> 赞同：-1
> 
> 时间：2012-10-18T19:57:48.583
> 
> 标签：java, jsf, jsf-2

我很感兴趣将 JSF Web 应用程序用作桌面应用程序的可能选项。就我而言，我有一个 JSF wb 应用程序，我也想将它用作桌面应用程序（如果可能的话）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:32:12.083

JSF 是一个 Web UI 框架。再次阅读您的问题。如果您想将桌面应用程序连接到您的 Web 应用程序，您可以创建一些 Web 服务 + 新的桌面 UI（Swing、SWT 等）

# javascript - 2012 年 10 月 4 日至 10 月 5 日有 1 小时的 JavaScript 学习时间

> ID：12962723
> 
> 赞同：2
> 
> 时间：2012-10-18T19:58:13.760
> 
> 标签：javascript, date

这是我发现的。2012 年 10 月 4 日午夜至 10 月 5 日午夜有 25 个小时。也许在世界的某个地方有一个我不知道的dst？

当您调用 javascripts innate getTime: -in IE 和 Mozilla 时。- 这仍然在客户端。一天通常有 86400 秒，10 月 5 日和 4 日之间的差异甚至是 90000 （额外一小时）-仅 2012 失败。-> 2011 年 7 月 5 日 – 2011 年 5 月 10 日有效……2012 年无效。-07/04/2012 – 10/04/2012 作品。

这是代码的摘录。元素是格式为“mm/dd/yyyy”的字符串

```
 var fromDateElement = document.getElementById("filterFromDate");
    var toDateElement = document.getElementById("filterToDate");

    if (fromDateElement == null || fromDateElement.value == ""
         || toDateElement == null || toDateElement.value == "") {
        alert(dojoCallGetLocalizedMessage("please.enter.filter.dates"));
        return false;
    }
    var fromArr = fromDateElement.value.split("/");
    var toArr = toDateElement.value.split("/");
    var timeSpread = (new Date(toArr[2],toArr[0],toArr[1]).getTime()) - 
            (new Date(fromArr[2],fromArr[0],fromArr[1]).getTime());
    if (timeSpread >  <%= ONE_DAY_IN_MILLIS %>) {
alert(dojoCallGetLocalizedMessage("not.a.day"));
        return false;
    }
    return true; 
```

（以毫秒为单位的一天设置为 864000000）此外，还有逻辑可以接受 dst 但不是在 10 月

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:02:21.140

在 JavaScript 中，月份的编号是从`0`（一月）到`11`（十二月）——参见[MDN 页面`Date`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)——所以月份 #`10`是 11 月，而不是 10 月。您需要`1`从您的月份数中减去：

```
 var timeSpread = (new Date(toArr[2],toArr[0]-1,toArr[1]).getTime()) - 
            (new Date(fromArr[2],fromArr[0]-1,fromArr[1]).getTime()); 
```

**为所有非美国读者的利益编辑添加**：2012 年 11 月 4 日，美国大部分地区将“退回”夏令时：在其他情况下是凌晨 2:00，时钟被设置回凌晨1:00。所以那一天实际上是25个小时。

# jquery - 在 MVC3 Webgird 中展开和折叠

> ID：12962724
> 
> 赞同：1
> 
> 时间：2012-10-18T19:58:17.507
> 
> 标签：jquery, asp.net-mvc-3, jquery-selectors, asp.net-mvc-4

有人可以帮我实现展开/折叠功能吗？

单击*展开*按钮时，我需要获取相应记录的相关数据并将其显示为子行。

```
grid.Column(header: "Expand", 
    format: @<text>
        <a href='#' class="expandable-open-button" rel="1" >&gt;</a> 
        <div class="expandable-child-row"></div> 
     </text>) 
```

我正在考虑使用 jQuery。单击“扩展”链接，我们可以从数据库中获取数据并将 webgrid html 设置为元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:04:08.740

使用 JQuery[`next`](http://api.jquery.com/next/)选择“子”元素（实际上是兄弟）；并[`slideToggle`](http://api.jquery.com/slideToggle/)扩展元素：

```
// add the click handler
$(".expandable-open-button").on("click", function(e) {

    // prevent the default action on the link
    e.preventDefault();

    // select the details row and toggle its visibility
    $(this).next(".expandable-child-row").slideToggle();
}); 
```

**编辑**您可以通过将项目 ID 作为数据属性添加到标记来传递它。

```
format: (item) => @<text><a data-id='@item.ID'> 
```

然后使用`attr`JQuery 检索它：

```
.on("click", function(e) {

    var id = $(this).attr("data-id");   
    alert(id);
... } 
```

# xml - XS-Schema 独特元素

> ID：12962735
> 
> 赞同：1
> 
> 时间：2012-10-18T19:59:16.897
> 
> 标签：xml, xsd

我正在尝试创建一个独特的元素。这是我的代码的一部分。

```
<complexType name="DeliveryOrder">
    <sequence>
        <element name="Depot" type="tns:County" minOccurs="1" maxOccurs="1"></element>
        <element name="CustomerDetails" type="tns:CustomerDetails" minOccurs="1" maxOccurs="1"></element>
        <element name="ItemsToBeDelivered"
            type="tns:ItemsToBeDelivered" maxOccurs="unbounded" minOccurs="1">
        </element>
    </sequence>
</complexType>

<complexType name="CustomerDetails">
    <sequence>
        <element name="FirstName">
            <simpleType>
                <restriction base="string">
                    <pattern value="[a-zA-Z][a-z][a-z]*"></pattern>
                </restriction>
            </simpleType>
        </element>
        <element name="Surname">
            <simpleType>
                <restriction base="string">
                    <pattern value="[a-z{^}A-Z][a-z][a-z]*"></pattern>
                </restriction>
            </simpleType>
        </element>
        <element name="AddressLine1">
            <simpleType>
                <restriction base="string">
                    <minLength value="4"></minLength>
                    <whiteSpace value="collapse"></whiteSpace>
                </restriction>
            </simpleType>
        </element>
        <element name="AddressLine2">
            <simpleType>
                <restriction base="string">
                    <minLength value="4"></minLength>
                    <whiteSpace value="collapse"></whiteSpace>
                </restriction>
            </simpleType>
        </element>
        <element name="AddressLine3" type="string">
        </element>
        <element name="County" type="tns:County" maxOccurs="1" minOccurs="1"></element>
    </sequence>
</complexType>

<complexType name="County">
    <choice>
        <element name="CountyName">
            <simpleType>
                <restriction base="string">
                    <enumeration value="Dublin"></enumeration>
                    <enumeration value="Cork"></enumeration>
                    <enumeration value="Kildare"></enumeration>
                    <enumeration value="Waterford"></enumeration>
                    <enumeration value="Wicklow"></enumeration>
                </restriction>
            </simpleType>
        </element>
    </choice>
</complexType>

<complexType name="DaysForDelivery">
    <sequence>
        <element name="Day">
            <simpleType>
                <restriction base="string">
                    <enumeration value="Monday"></enumeration>
                    <enumeration value="Tuesday"></enumeration>
                    <enumeration value="Wednesday"></enumeration>
                    <enumeration value="Thursday"></enumeration>
                    <enumeration value="Friday"></enumeration>
                </restriction>
            </simpleType>
        </element>
    </sequence>
</complexType>

<element name="DeliveryOrder" type="tns:DeliveryOrder"></element>

<complexType name="ItemsToBeDelivered">
    <sequence>
        <element name="DaysForDelivery" type="tns:DaysForDelivery"
            maxOccurs="unbounded" minOccurs="1">
        </element>
        <element name="Item" type="tns:Item" maxOccurs="unbounded" minOccurs="1"></element>
    </sequence>
</complexType>

<complexType name="Item">
    <sequence>
        <element name="Description">
            <simpleType>
                <restriction base="string">
                    <enumeration
                        value="Regular Milk - 1 litre carton.">
                    </enumeration>
                    <enumeration
                        value="Low Fat Milk - 1 litre carton.">
                    </enumeration>
                    <enumeration
                        value="Strawberry Yoghurt - 100ml pot">
                    </enumeration>
                    <enumeration
                        value="Raspberry Yoghurt - 100ml pot">
                    </enumeration>
                    <enumeration value="Cream - 125ml carton"></enumeration>
                    <enumeration value="Cream - 250ml carton"></enumeration>
                </restriction>
            </simpleType>
        </element>
        <element name="Quantity">
            <simpleType>
                <restriction base="int">
                    <minInclusive value="1"></minInclusive>
                </restriction>
            </simpleType>
        </element>
    </sequence>
</complexType> 
```

所以，我希望“DaysForDelivery”中的“Day”元素是唯一的。例如：我可以在星期一拥有一个 X 项目，然后就不能再使用星期一了。我知道我必须使用独特的标签，我看了很多例子，但我把它弄乱了 xpaths。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:11:21.743

更新：这是修改后的 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:tns="http://tempuri.org/XMLSchema.xsd" xmlns="http://www.w3.org/2001/XMLSchema">
    <complexType name="DeliveryOrder">
        <sequence>
            <element name="Depot" type="tns:County" minOccurs="1" maxOccurs="1"></element>
            <element name="CustomerDetails" type="tns:CustomerDetails" minOccurs="1" maxOccurs="1"></element>
            <element name="ItemsToBeDelivered" type="tns:ItemsToBeDelivered" maxOccurs="unbounded" minOccurs="1">
                <unique name="UQ">
                    <selector xpath="tns:DaysForDelivery/tns:Day"/>
                    <field xpath="."/>
                </unique>
            </element>
        </sequence>
    </complexType>
    <complexType name="CustomerDetails">
        <sequence>
            <element name="FirstName">
                <simpleType>
                    <restriction base="string">
                        <pattern value="[a-zA-Z][a-z][a-z]*"></pattern>
                    </restriction>
                </simpleType>
            </element>
            <element name="Surname">
                <simpleType>
                    <restriction base="string">
                        <pattern value="[a-z{^}A-Z][a-z][a-z]*"></pattern>
                    </restriction>
                </simpleType>
            </element>
            <element name="AddressLine1">
                <simpleType>
                    <restriction base="string">
                        <minLength value="4"></minLength>
                        <whiteSpace value="collapse"></whiteSpace>
                    </restriction>
                </simpleType>
            </element>
            <element name="AddressLine2">
                <simpleType>
                    <restriction base="string">
                        <minLength value="4"></minLength>
                        <whiteSpace value="collapse"></whiteSpace>
                    </restriction>
                </simpleType>
            </element>
            <element name="AddressLine3" type="string">
            </element>
            <element name="County" type="tns:County" maxOccurs="1" minOccurs="1"></element>
        </sequence>
    </complexType>

    <complexType name="County">
        <choice>
            <element name="CountyName">
                <simpleType>
                    <restriction base="string">
                        <enumeration value="Dublin"></enumeration>
                        <enumeration value="Cork"></enumeration>
                        <enumeration value="Kildare"></enumeration>
                        <enumeration value="Waterford"></enumeration>
                        <enumeration value="Wicklow"></enumeration>
                    </restriction>
                </simpleType>
            </element>
        </choice>
    </complexType>

    <complexType name="DaysForDelivery">
        <sequence>
            <element name="Day">
                <simpleType>
                    <restriction base="string">
                        <enumeration value="Monday"></enumeration>
                        <enumeration value="Tuesday"></enumeration>
                        <enumeration value="Wednesday"></enumeration>
                        <enumeration value="Thursday"></enumeration>
                        <enumeration value="Friday"></enumeration>
                    </restriction>
                </simpleType>
            </element>
        </sequence>
    </complexType>

    <element name="DeliveryOrder" type="tns:DeliveryOrder"></element>

    <complexType name="ItemsToBeDelivered">
        <sequence>
            <element name="DaysForDelivery" type="tns:DaysForDelivery" maxOccurs="unbounded" minOccurs="1">
            </element>
            <element name="Item" type="tns:Item" maxOccurs="unbounded" minOccurs="1"></element>
        </sequence>
    </complexType>

    <complexType name="Item">
        <sequence>
            <element name="Description">
                <simpleType>
                    <restriction base="string">
                        <enumeration value="Regular Milk - 1 litre carton.">
                        </enumeration>
                        <enumeration value="Low Fat Milk - 1 litre carton.">
                        </enumeration>
                        <enumeration value="Strawberry Yoghurt - 100ml pot">
                        </enumeration>
                        <enumeration value="Raspberry Yoghurt - 100ml pot">
                        </enumeration>
                        <enumeration value="Cream - 125ml carton"></enumeration>
                        <enumeration value="Cream - 250ml carton"></enumeration>
                    </restriction>
                </simpleType>
            </element>
            <element name="Quantity">
                <simpleType>
                    <restriction base="int">
                        <minInclusive value="1"></minInclusive>
                    </restriction>
                </simpleType>
            </element>
        </sequence>
    </complexType>
</schema> 
```

![在此处输入图像描述](../Images/67a5ec86d513ee350b3cdb12829cd9f6.png)

示例**有效**XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<DeliveryOrder xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">
    <Depot>
        <CountyName>Dublin</CountyName>
    </Depot>
    <CustomerDetails>
        <FirstName>Firstname</FirstName>
        <Surname>Surname</Surname>
        <AddressLine1>AddressLine11</AddressLine1>
        <AddressLine2>AddressLine21</AddressLine2>
        <AddressLine3>AddressLine31</AddressLine3>
        <County>
            <CountyName>Dublin</CountyName>
        </County>
    </CustomerDetails>
    <ItemsToBeDelivered>
        <DaysForDelivery>
            <Day>Monday</Day>
        </DaysForDelivery>
        <DaysForDelivery>
            <Day>Tuesday</Day>
        </DaysForDelivery>
        <Item>
            <Description>Regular Milk - 1 litre carton.</Description>
            <Quantity>1</Quantity>
        </Item>
        <Item>
            <Description>Regular Milk - 1 litre carton.</Description>
            <Quantity>1</Quantity>
        </Item>
    </ItemsToBeDelivered>
</DeliveryOrder> 
```

如果你改变`Tuesday`你`Monday`得到：

```
Error occurred while loading [], line 22 position 17
There is a duplicate key sequence 'Monday' for the 'http://tempuri.org/XMLSchema.xsd:UQ' key or  unique identity constraint.
Document1.xml is invalid. 
```

# entity-framework - MVC4 和 Visual Studio 2012 中的编辑方法

> ID：12962737
> 
> 赞同：0
> 
> 时间：2012-10-18T19:59:18.007
> 
> 标签：entity-framework, ef-code-first, asp.net-mvc-4, visual-studio-2012

有人可以帮我解决我昨晚深夜发布的问题。我仍然坚持使用编辑方法。下方链接：

[昨晚的问题](https://stackoverflow.com/questions/12949409/how-to-write-an-edit-action/12949879#comment17556226_12949879)

除了发布的内容外，我还尝试过：

HttpPost 编辑：

```
[HttpPost]
    public ActionResult Edit(MensPlayer mensPlayer)
    {
        if (ModelState.IsValid)
        {
            //Save Player
            _dataSource.Entry(mensPlayer).State = EntityState.Modified;
           _dataSource.Save();

           TempData["message"] = string.Format("{0} has been saved", mensPlayer.Name);
            return RedirectToAction("Detail", "MensPlayer", new {id = mensPlayer.Id});
        }
        return View(mensPlayer);
    } 
```

上述方法的问题是`Entry(mensPlayer).State`，代码不会在 .Entry() 处构建，我似乎不知道该方法在哪里被继承。请注意，这是 MVC-Music-Store 示例中使用的技术。

我还尝试过 Pro ASP.NET MVC3 Framework 书中的这种技术。

```
[HttpPost]
    public ActionResult Edit(MensPlayer mensPlayer)
    {
        if (ModelState.IsValid)
        {
            //Save Player
           _dataSource.Save();

           TempData["message"] = string.Format("{0} has been saved", mensPlayer.Name);
            return RedirectToAction("Detail", "MensPlayer", new {id = mensPlayer.Id});
        }
        return View(mensPlayer);
    } 
```

这种技术可以构建，但似乎不会将更改保存到数据库。

我怎样才能让它工作？我错过了什么？

**如果有人需要查看整个解决方案，整个源代码都在 GitHub 上。**

[GitHub](https://github.com/komengem/GlobalUnitedSC)

在下面 Slauma 的帮助下，我现在进行了如下修改：

添加`void Update();`到 IDataSource 并将以下内容添加到 Db 类

```
 void IDataSource.Update()
    {
        Entry(MensPlayers).State = EntityState.Modified;
    } 
```

HttpPost 编辑：

```
[HttpPost]
    public ActionResult Edit(MensPlayer mensPlayer)
    {
        if (ModelState.IsValid)
        {
            //Save Player
            _dataSource.Update();
           _dataSource.Save();

           TempData["message"] = string.Format("{0} has been saved", mensPlayer.Name);
            return RedirectToAction("Detail", "MensPlayer", new {id = mensPlayer.Id});
        }
        return View(mensPlayer);
    } 
```

所有构建，但随后我收到此错误 **实体类型 DbSet`1 不是当前上下文模型的一部分。**

据信起源于：

```
void IDataSource.Update()
    {
        Entry(MensPlayers).State = EntityState.Modified;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:03:53.280

在上面评论中的 Slauma 的帮助下，这就是他建议我做的事情，并且它有效。

添加到 IDataSource 接口：

```
 void Update(MensPlayer mensPlayer); 
```

更新在 Db 类中实现：

```
void IDataSource.Update(MensPlayer mensPlayer)
    {
        Entry(mensPlayer).State = EntityState.Modified;
    } 
```

编辑动作：

```
[HttpPost]
    public ActionResult Edit(MensPlayer mensPlayer)
    {
        if (ModelState.IsValid)
        {
            //Save Player
            _dataSource.Update(mensPlayer);
           _dataSource.Save();

           TempData["message"] = string.Format("{0} has been saved", mensPlayer.Name);
            return RedirectToAction("Detail", "MensPlayer", new {id = mensPlayer.Id});
        }
        return View(mensPlayer);
    } 
```

就像这样，一切都很好，尽管我假设我可以像使用 Save 一样对整个 DbSet 实施更新。

# ruby-on-rails - 在rails中保存来自jquery的哈希数组

> ID：12962741
> 
> 赞同：3
> 
> 时间：2012-10-18T19:59:39.550
> 
> 标签：ruby-on-rails, jquery

我是 RoR 的新手。我要解决的问题是如何将哈希数组从 JQuery 传递到 Rails 以保存在数据库中。

**语境**

在我的应用程序中，用户可以将任意数量的项目拖放到画布上。这是使用 JQuery 完成的。

然后用户可以保存这些项目，包括它们的 XY 坐标。

从概念上讲，我相信这是在保存一个哈希数组，其中每个哈希对应一个项目，由 ItemCode、X 坐标、Y 坐标组成。

我试图弄清楚每一步应该使用什么方法/技术。

**到目前为止，这是我发现的：**

1.  ? 在 JQuery 中保存一组对象？
2.  使用 jquery.param 序列化这个数组
3.  使用 jquery.ajax 将结果字符串作为参数传递给 Rails
4.  ?? Rails 控制器以某种方式解析此字符串并将其保存在数据库中？

**关键问题**

A. 这个序列化的字符串应该采用什么格式才能被 Rails 轻松解析？

我相信 Jquery.param 会生成这样的东西（以参数形式）： 1[item_code]=432&1[x]=250&1[y]=200&2[item_code]=348... 我找不到任何东西告诉我 Rails 是否可以弄清楚前 3 个术语描述 1 个项目，接下来的 3 个描述下一个项目，等等。

B. Rails 的处理方式是什么？换句话说，我应该查看哪些特定方法作为将这个参数字符串作为数据库中的几个新条目放入数据库的工具？

当然，如果有一些完全不同的方法可以做到这一点，我很想听听。谢谢。

**编辑**

澄清一下，ItemCode 与数据库中项目条目的 id 不同。ItemCode 用于在其他表中查找有关该项目的特征。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:57:53.553

单程：

```
decodeURIComponent(jQuery.param({ items: { item1: { x: 1, y: 2 }, item2: { x: 3, y: 4 } } } ))  #  => items[item][x]=1&items[item][y]=2&items[item2][x]=3&items[item2][y]=4 
```

产生一个看起来像的 params 哈希

```
{"items"=>{"item"=>{"x"=>"1", "y"=>"2"}, "item2"=>{"x"=>"3", "y"=>"4"}}} 
```

然后在控制器中：

```
params[:items].each do |k,v|
  begin
    item = Item.new( id: k, x: v.x, y: v.y )  # or better, Item.new( x: v.x, y: v.y ) 
    item.save
  rescue ActiveRecord::RecordInvalid # deal with problems saving
    ...
    # retry?
  end
end 
```

在您的问题中，您正在客户端中生成项目 ID。当您实际创建对象以消除跟踪唯一 ID 的需要时，让数据库处理它是一个更好的主意。在这种情况下，传递给控制器​​的 ID 只是任意占位符，但它们在每次`.param()`调用中必须是唯一的，以区分一个对象和另一个对象。

# ruby-on-rails - 如何在 Rails 中集成已有的 .rb 文件？

> ID：12962745
> 
> 赞同：0
> 
> 时间：2012-10-18T19:59:58.910
> 
> 标签：ruby-on-rails

我仍在学习 Ruby on Rails，但有一个关于使用 Rails 视图上的链接触发 ruby​​ 程序运行的一般性问题。换句话说，我不想在命令提示符下键入“ruby filename.rb”，而是希望我的 Rails 视图中有一个链接，以便在单击它时执行 filename.rb 中的代码。

我知道这有点小技巧，但我正在尝试一步一步地学习......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:03:56.770

将该文件复制到 lib 目录并`require "already-existing.rb"`在您的 rails 视图助手中使用，并在您的视图中调用该文件中的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:40:09.477

如果您使用的是 Ruby 1.9.x，您可以使用 Process.spawn；

```
Process.spawn("ruby #{Rails.root}/my_ruby_file.rb") 
```

# php - 我应该在客户端代码中使用多个 SQL 查询还是多个循环？

> ID：12962746
> 
> 赞同：1
> 
> 时间：2012-10-18T20:00:01.267
> 
> 标签：php, mysql, sql, loops

我正在建立一个小型内部电话号码分机列表。

在数据库中我有两个表，一个`people`表，一个`numbers`表。关系是`one-to-many`分别的。

我想在单个 HTML 表格中显示结果，每行一个人，但如果他们有多个数字，它会在单个列中显示这些数字，并在个人行上显示行跨度以进行补偿。

现在，要从数据库中获取要使用的结果，我可以这样做：

```
(pseudocode)

SELECT id, name
FROM people

foreach result as row {
  SELECT number
  FROM numbers
  WHERE numbers.person_id = row['id']
} 
```

这意味着我正在执行一个查询来获取所有用户，但是如果我有 100 个用户，我将执行 100 个额外的查询来获取每个用户的数字。

相反，我可以这样做：

```
(pseudocode)

SELECT number, person_id
FROM numbers

SELECT id, name
FROM people

foreach people as person {
  echo name
  foreach numbers as number {
    if (number.id = person.id) {
      echo number
    }
  }
} 
```

因此，基本上它在做完全相同的事情，只是我做了两个查询以将所有结果放入数组中，然后循环遍历数组以格式化我的表。

**我应该使用哪种方法或者有更好的方法来做到这一点？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:04:53.463

常见的方法是做一个常规的 JOIN：

```
SELECT id, name, number
FROM people, numbers
WHERE people.id = numbers.person_id; 
```

您可以添加一个`ORDER BY`以按顺序获取数字，或者您可以创建一个数组，对结果集进行一次遍历，然后循环遍历该数组。

您还可以考虑使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)来连接同一个人的所有数字：

```
SELECT id, name, GROUP_CONCAT(number SEPARATOR ', ')
FROM people, numbers
WHERE people.id = numbers.person_id
GROUP BY people.id; 
```

* * *

既然您甚至在问这个问题：我不能强调您*应该*拿起一本关于数据库设计的介绍性书籍。它帮助我了解了关系数据库背后的理论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T20:05:51.590

您*可能*只想执行*一个*查询。就像是

```
select people.id, people.name, group_concat(numbers.number)
from people 
inner join numbers on numbers.id = people.id
group by people.id, people.name
order by people.name 
```

然后，您可以使用简单的 php 代码遍历结果集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:10:05.900

这取决于，您可能需要花时间才能找到答案。如果您的数据库与您的 Web 服务器位于不同的计算机上，那么执行多个查询会导致很多网络转弯，因此这通常需要更长的时间。但是，如果您的数据库服务器与 Web 服务器位于同一台计算机上，则这可能不是问题。

还要考虑在数组中查找数字所需的时间。作为一个数组，您正在执行线性顺序 O(N) 搜索。如果你可以把它放在一个散列中，查找会快得多，并且两次查询的方法可能会更快，但如果你花很多时间在你的数组中查找答案，那就不行了。

使用连接将其放入一个查询中可能是最快的，因为数字将与人员相关联，具体取决于您将数据存储到其中以在 foreach 循环中访问的容器结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:05:20.463

使用存储过程或函数来检索数据，不要在程序中使用 sql

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T20:06:25.710

你都不应该这样做。您可以对表执行*一个*查询（连接）：

```
select name, number
from people p, numbers n
where p.id = n.person_id
order by name, number; 
```

然后只有*一个*循环：

```
$link = mysqli_connect(...);
$query = 'select name, number from people p, numbers n where p.id = n.person_id order by name, number';

if ($result = mysqli_query($link, $query)) {
    $person = '';
    while ($row = mysqli_fetch_array($result, MYSQLI_ASSOC)) {
        if ($row['name'] !== $person) {
            $person = $row['name'];
            echo $person;
        }

        echo $row['number'];
    }
} 
```

# git - 如何设置 git 分支以推送到具有不同分支名称的远程并从完全不同的 url 中提取

> ID：12962752
> 
> 赞同：7
> 
> 时间：2012-10-18T20:00:29.363
> 
> 标签：git, git-branch, git-remote

我的本地 git repo 需要从一台服务器中提取。然后，它需要将特定分支推送到不同服务器上具有不同分支名称的审查存储库。

类似于：从 Server1 上的 PullOnlyRepo 中提取所有内容（我们可能会称其为起源？）将分支修补程序推送到 ReivewRepo，分支名称为 Server2 上的 JistChanges。

现在 git config -l 显示：

```
remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
remote.origin.url=<URL for Server1>
remote.origin.pushurl=no_push (this shouldn't matter since it is a pull only repo)
branch.production.remote=origin
branch.production.merge=refs/heads/production
remote.review.url=<URL for Server2>
remote.review.fetch=+refs/heads/*:refs/remotes/review/* 
```

git pull 做我想做的事（从 Server1 上的正确位置获取更改并将它们合并到我的工作树中）。

但是 git push 没有。为了实现我想要的，我必须做

```
git push review hotfix:JistChanges 
```

有没有办法让 git pull 做到这一点而不必放入额外的东西？

已经设置了一些问题，以便您的本地分支推送到具有不同分支名称的远程。然而，它们也改变了上游和拉力的来源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:04:34.543

您可以将[上游](https://stackoverflow.com/questions/2739376/definition-of-downstream-and-upstream/2749166#2749166)分支设置为`hotfix`：

```
git config push.default upstream
git config push.default review 
git branch --set-upstream hotfix review/JistChanges 
```

请参阅“[如何使现有的 git 分支跟踪远程分支？](https://stackoverflow.com/questions/520650/how-do-you-make-an-existing-git-branch-track-a-remote-branch) ”请参阅默认策略上的“[结果是`git push origin`什么？](https://stackoverflow.com/questions/4586687/what-is-the-result-of-git-push-origin/9749477#9749477)`push` ” （即将成为“ `simple`”）

启动 git1.8.0：

```
git branch -u review/JistChanges hotfix 
```

* * *

[OP jstanidiot](https://stackoverflow.com/users/1426193/jistanidiot) [报告](https://stackoverflow.com/a/12975402/6309)已取得相同的结果：

```
git remote set-url --push origin
git config remote.origin.push refs/heads/hotfix:JistChanges 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T13:33:08.933

好的 VonC 的回答让我走上了正轨。这是我所做的：

```
git remote set-url --push origin <review repo URL>
git config remote.origin.push refs/heads/hotfix:JistChanges 
```

唯一的问题是现在所有的东西都推送到了review repo。现在没关系，因为 90% 的工作都在这个分支中。剩下的 10% 我可以用正确的推送配置做一个 git push 其他相同来源的仓库。

# c# - 使用正则表达式进行部分搜索？

> ID：12962755
> 
> 赞同：2
> 
> 时间：2012-10-18T20:00:41.297
> 
> 标签：c#, regex, .net-4.0

如果我使用 a`RegEx`作为 a 的掩码，`TextBox`并且掩码应该允许 的格式`000-XXXXXX`，例如，它允许 3 个字母、一个破折号，然后是 6 个数字，我怎么能让用户只需要输入前 3 个在搜索中使用的掩码字符并且没​​有他们输入的内容是无效的，因为它不满足完整的`RegEx`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:02:25.027

您可以使正则表达式的某些部分成为可选的：

```
^\d{3}(?:-\d{0,6})?$ 
```

**解释：**

```
^        # Start of string
\d{3}    # Match 3 digits
(?:      # Try to match... 
 -       #  a dash
 \d{0,6} #  followed by up to 6 digits
)?       # but make that part of the match optional
$        # End of string 
```

# javascript - CSS 类未应用于所有类似元素

> ID：12962763
> 
> 赞同：-1
> 
> 时间：2012-10-18T20:01:09.723
> 
> 标签：javascript, html, css

我有一个在三个容器中有三个按钮的页面。每个容器中的第一个按钮相同`id`，每个容器中的第二个按钮相同，每个容器中`id`的第三个按钮相同`id`。我有一个`Javascript`脚本，它接受传入的信息并相应地更改按钮中文本的颜色。不幸的是，当脚本检测到需要进行更改并尝试应用相应的 CSS 时，只有第一个容器中的按钮会应用 CSS。我真的不明白为什么每个具有相同元素的元素`id`都没有应用 CSS。

`Javascript`动作：

```
document.getElementById('button_1').className = "buttonActive"; 
```

按钮元素：

```
<button id="button_1" class="button"><span id="button_text_1">Button 1</span></button>
<button id="button_2" class="button"><span id="button_text_2">Button 2</span></button>
<button id="button_3" class="button"><span id="button_text_3">Button 3</span></button>

<button id="button_1" class="button"><span id="button_text_1">Button 1</span></button>
<button id="button_2" class="button"><span id="button_text_2">Button 2</span></button>
<button id="button_3" class="button"><span id="button_text_3">Button 3</span></button>

<button id="button_1" class="button"><span id="button_text_1">Button 1</span></button>
<button id="button_2" class="button"><span id="button_text_2">Button 2</span></button>
<button id="button_3" class="button"><span id="button_text_3">Button 3</span></button> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:03:02.670

发生这种情况是因为`document.getElementById`它返回了它找到的**第一个**指定的元素`id`。

这是因为假定 ID 是唯一的。

考虑改用类名并以这种方式选择它们：

```
document.getElementsByClassName( 'text' ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:02:38.047

您只能使用 选择一个 dom 元素`getElementById`。如果你想选择多个元素，你应该使用 class 而不是 id。

您不应该对同一文档中的两个以上元素使用相同的 id。

注意：我将所有按钮的 id 替换为 class 你也应该申请 span。

修改后的代码：

JS：

```
document.getElementsByClassName('button_1').className = "buttonActive"; 
```

HTML：

```
<button class="button_1" class="button"><span id="button_text_1">Button 1</span></button>
<button class="button_2" class="button"><span id="button_text_2">Button 2</span></button>
<button class="button_3" class="button"><span id="button_text_3">Button 3</span></button>

<button class="button_1" class="button"><span id="button_text_1">Button 1</span></button>
<button class="button_2" class="button"><span id="button_text_2">Button 2</span></button>
<button class="button_3" class="button"><span id="button_text_3">Button 3</span></button>

<button class="button_1" class="button"><span id="button_text_1">Button 1</span></button>
<button class="button_2" class="button"><span id="button_text_2">Button 2</span></button>
<button class="button_3" class="button"><span id="button_text_3">Button 3</span></button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:03:33.047

在 DOM 中，每个元素都必须有一个唯一的 id。当您对具有相同 id 的多个元素执行“document.getElementById()”时，仅返回第一个对象。

而是将“名称”属性与`document.getElementsByName`方法一起使用。

示例代码：

```
var nameArray = document.getElementsByName("elementName");

for(var i=0; i<nameArray.length; i++){
nameArray[i].className = "myClass";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:03:49.830

ID 在整个页面中应该是唯一的。

如果您希望跨页面元素使用相同的名称，请改用类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T20:09:28.373

```
document.getElementById() 
```

仅用于选择一个 DOM 元素。id 应该是唯一的。如果要对元素进行分组，则应指定类名。

```
<button class="button_1"> ...
<button class="button_2"> ...
<button class="button_3"> ...

<button class="button_1"> ...
<button class="button_2"> ...
... 
```

您选择所有第一个按钮：

```
document.getElementByClassName('button_1') 
```

您可以选择所有按钮：

```
document.getElementsByTagName('button') 
```

在 CSS 中：

```
/* first buttons */
.button_1 { }

/* all buttons */
button {} 
```

你的代码：

```
var btns = document.getElementsByClassName("button_1");
for(var i = 0; i < btns.length(); i++){
    var prev_name = btns[i].className;
    btns[i].className = prev_name + " buttonActive";
} 
```

# python - Pandas DataFrame 重新索引列问题

> ID：12962765
> 
> 赞同：3
> 
> 时间：2012-10-18T20:01:18.883
> 
> 标签：python, pandas

在过去的几个小时里，我一直在试图解决这个问题......

我有一个列表，我想用作 DataFrame 的列：

```
totalColumns = [a, b, c, d, e, f.....z] 
```

我有几个看起来像这样的数据框：

数据框一：

```
 b   f   j
1   12  5   6
2   4   99  2
3   10  77  16 
```

数据框二：

```
 a   k   y
1   2   25  46
2   7   54  76
3   34  67  101
4   45  24  54 
```

还有很多...

我想根据 totalColumns 重新索引所有数据框。例如，重新索引后，DataFrameOne 将如下所示：

数据框一：

```
 a    b   c......f.....j......z
1   NaN  5   NaN....5.....6......NaN
2   NaN  99  NaN....99....2......NaN
3   NaN  77  NaN....77....16.....NaN 
```

所以我使用了reindex方法：

```
DataFrameOne.reindex(columns=totalColumns) 
```

它适用于某些数据帧，但对于某些数据帧，我会遇到此异常：

```
raise Exception('Reindexing only valid with uniquely valued Index '
Exception: Reindexing only valid with uniquely valued Index objects 
```

任何人都可以帮助我通过某些数据帧上发生的这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:13:50.093

你在两个 DataFrame 中有重复的列吗？如果是，请尝试解决该问题以在两个框架中具有唯一的列名，然后再次执行重新索引。

# nhibernate - NHibernate（流利）延迟加载不起作用

> ID：12962766
> 
> 赞同：3
> 
> 时间：2012-10-18T20:01:20.750
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在尝试使用 NHibernate 为一个非常奇怪的数据库生成模型。表本身具有仅用于显示的主键，所有实际关系都在唯一列上。例如，具有产品 ID 主键和唯一产品名称列的产品表。另一个表，需求，有一个产品名称列并定义了关系。我知道这种情况并不理想，但我无法控制。

无论如何，我能够使用 Fluent NHibrenate 将产品映射到需求，但我似乎无法让实体延迟加载。

```
public class Demand
{
  public virtual DemandId { get; set; }
  public virtual Product { get; set; }
}

public class DemandMap : ClassMap<Demand>
{
  public DemandMap()
  {
    this.Table("Demand");
    this.LazyLoad();
    this.Id(x => x.DemandId);
    this.References(x => x.Product).PropertyRef(x => x.ProductName).LazyLoad();
  }
} 
```

有没有人知道为什么延迟加载不起作用？我知道这不是因为我可以在 SQL 分析器中看到产品与需求一起被获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:37:56.277

My idea (Maybe you can try use "HasMany" there is example but you can read something about this):

First class

```
public class Demand
{
  public virtual int DemandId { get; set; }
  public virtual int Product { get; set; }
  public virtual IEnumerable<NewClass> Name {get; set;} 
}

  this.HasMany(x=> x.Product).Column("Product_id").not.nullable; 
```

Second class

```
public class NewClass
{
  public virtual Demand Product_id {get; set;}
}

this.References(x => x.Product).Column("product_id).not.nullable 
```

# php - 我的 php 脚本将结果显示为已删除，但 phpmyadmin 仍显示结果

> ID：12962768
> 
> 赞同：5
> 
> 时间：2012-10-18T20:01:21.403
> 
> 标签：php, mysql, wordpress

我为某人编写了一个脚本，他们可以轻松地从数据库中删除测验结果。该脚本的一般要点是用户输入用户名，php 脚本查询数据库以获取与用户名相关的测验结果。然后显示结果

用户可以点击删除链接。单击此链接后，将删除结果并重新查询数据库以显示更新的结果。

在这方面一切似乎都正常，直到我登录 phpMyadmin 看到没有任何结果被删除。

问题是这可能是数据库本身有问题吗？还是 PHPmyAdmin？

我做脚本的方式有问题吗？

这是我在这个文本文件中的代码：http: [//andreawin.ladev.co/code-example.txt](http://andreawine.ladev.co/code-example.txt)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:08:34.363

```
$query1 = "DELETE FROM aw_wpsqt_user_data WHERE quizID='".$_GET['quizID']." AND username='".$_GET['username']."'"; 
```

此行似乎缺少 quizID 周围的右引号。尝试将其更正为：

```
$query1 = "DELETE FROM aw_wpsqt_user_data WHERE quizID='".$_GET['quizID']."' AND username='".$_GET['username']."'"; 
```

我还应该提到，这并不是删除信息最安全的方法，因为我似乎可以对大多数这些字段使用 SQL 注入（特别是考虑到这些 $_GET 变量出现在 URI 上！看看[http:// /codex.wordpress.org/WordPress_Coding_Standards#Formatting_SQL_statements](http://codex.wordpress.org/WordPress_Coding_Standards#Formatting_SQL_statements)用于 WordPress 的 SQL 语句标准。

# c# - CLR 为我导入的 C++ 代码创建一个具有不同参数的新函数

> ID：12962770
> 
> 赞同：0
> 
> 时间：2012-10-18T20:01:29.080
> 
> 标签：c#, c++, clr, pinvoke

```
using namespace ParasolidAssembly;

AssemblyClass::AssemblyClass() {
    bool startParasolid();
    bool stopParasolid();
};
void AssemblyClass::Perform(string FileName) {
    bool bScale = true;

    // Var
    PK_ERROR_t error;
    int nParts, nGeoms; 
```

这是在 C++ 代码中定义并使用命名空间 Parasolidassembly 导入 C# 应用程序的原始函数。但无法使用仅带有字符串参数的 Perform 函数，因为创建了该函数的不同定义，例如...

```
amespace ParasolidAssembly
{
public class AssemblyClass : IDisposable
{
public AssemblyClass();

public override sealed void Dispose();
protected virtual void Dispose(bool A_0);
public void Perform(std.basic_string_char,std::char_traits_char_,std::allocator_char_ _* FileName);
public bool startParasolid();
public bool stopParasolid();
}
} 
```

这是在名为 Assemblyclass(from metadata) 的文件中，导致错误 错误 144 'ParasolidAssembly.AssemblyClass.Perform(std.basic_string,std::allocator >*)' 的最佳重载方法匹配有一些无效参数 C :\Users\ranjith\Desktop\ifab_assembly\GraphSynthConsole\AssemblySearch1.cs 34

# python - 如何阻止 Python unittest 打印测试文档字符串？

> ID：12962772
> 
> 赞同：17
> 
> 时间：2012-10-18T20:01:33.330
> 
> 标签：python, unit-testing

我注意到，当我的 Python 单元测试在函数顶部包含文档时，有时框架会在测试输出中打印它们。通常，测试输出每行包含一个测试：

```
<test name> ... ok 
```

如果测试有一个形式的文档字符串

```
"""
test that so and so happens
""" 
```

比一切都好。但是如果测试在一行上有一个文档字符串：

```
"""test that so and so happens""" 
```

那么测试输出需要多于一行，并包括这样的文档：

```
<test name>
test that so and so happens ... ok 
```

我找不到记录的行为在哪里。有没有办法关闭它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-18T20:06:23.353

使用文档字符串的*第一*行；负责的方法是[`TestCase.shortDescription()`](http://docs.python.org/library/unittest.html#unittest.TestCase.shortDescription)，您可以在测试用例中覆盖它：

```
class MyTests(unittest.TestCase):
    #  ....
    def shortDescription(self):
        return None 
```

通过始终返回`None`，您可以完全关闭该功能。如果你想以不同的方式格式化文档字符串，它可以作为`self._testMethodDoc`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-09-30T15:41:28.013

这是 MartijnPieters 优秀答案的改进版本。

* * *

与其为每个测试重写该方法，不如将以下文件添加到您的测试列表中（至少对我而言）更方便。命名文件`test_[whatever you want].py`。

**test_config.py**

```
import unittest
# Hides Docstring from Verbosis mode
unittest.TestCase.shortDescription = lambda x: None 
```

此代码段也可以放在`__init__.py`文件`test`夹的文件中。

在我的例子中，我只是添加到我的项目的根文件夹中`scripts`，因为我使用 find as in `python -m unittest`from`scripts`来运行我的项目的所有单元测试。由于这是该`test*.py`目录级别上的唯一文件，因此它将在任何其他测试之前加载。

（我尝试了根文件夹的片段`__init__.py`，它似乎不起作用，所以我坚持使用文件方法）

顺便说一句：我实际上更喜欢`lambda x: "\t"`而不是`lambda x: None`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T19:33:20.327

读完这篇文章后，我为鼻子测试做了一个插件以避免样板。

[https://github.com/MarechJ/nosenodocstrings](https://github.com/MarechJ/nosenodocstrings)

# testing - Rails 3.2 selenium web 驱动测试

> ID：12962773
> 
> 赞同：0
> 
> 时间：2012-10-18T20:01:36.647
> 
> 标签：testing, rspec, ruby-on-rails-3.2, selenium-webdriver

我正在使用 rspec + spork + selenium webdriver 来测试我的应用程序。我不知道如何从 selenium 访问我的应用程序（在运行 rspec 时），例如我应该在 driver.navigate.to 中输入什么 url 才能访问我的网站？最好的问候阿图尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:53:16.890

您可以通过以下方式启动 spork 来查看发生了什么：

```
SELENIUM='true' spork 
```

当您通过以下方式开始测试时：

```
rspec spec --drb 
```

然后浏览器将打开，您可以看到您的测试。

# objective-c - stringByReplacingOccurrencesOfString：正在产生奇怪的结果

> ID：12962777
> 
> 赞同：0
> 
> 时间：2012-10-18T20:01:58.397
> 
> 标签：objective-c, nsstring

所以我有两个数组：

一种是持有 HTML 保留字符。另一个是持有实体以替换它们。我将两个数组都放在字典中

然后我遍历字典并尝试用适当的实体替换所有出现的 HTML 保留字符。

```
NSArray * chars = [[NSArray alloc] initWithObjects: @"&", @"\"", nil];
NSArray * entities = [[NSArray alloc] initWithObjects: @"&amp;", @"&quot;", nil];
NSDictionary * dict = [[NSDictionary alloc] initWithObjects:entities forKeys: chars];  

NSArray * keys;
NSUInteger i, count;
id key, value;

keys = [dict allKeys];
count = [keys count];

for (i = 0; i < count; i++) {
    key = [keys objectAtIndex:i];
    value = [dict objectForKey: key];

    _inputTextView.string = [_inputTextView.string stringByReplacingOccurrencesOfString:key withString:value];
} 
```

**我遇到的问题**

当字符串是 " 双引号时，它会打印出 " 而不是 "

为什么会发生这种情况？

非常感谢任何和所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:04:28.380

这正是预期会发生的事情。它似乎也是你想要的。该方法只是将`"`字符替换为其对应的 HTML 实体`&quot;`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T20:11:10.960

好吧，你告诉你的应用要替换

> \"

表示没有反斜杠的单双引号

> "

和一个分号。您的应用程序会执行您告诉它执行的所有操作。你想做什么？也许我们可以帮助你。

# c++ - 在图算法中，确定节点是否被访问的最佳方法是什么？

> ID：12962778
> 
> 赞同：3
> 
> 时间：2012-10-18T20:02:00.843
> 
> 标签：c++, algorithm, graph-algorithm

我最初是通过两种方式来做的。一种方法是将访问过的节点存储在列表中并遍历该列表以确定之前是否已访问过节点。另一个是使用一个布尔数组来跟踪访问过和未访问过的节点。我真的很感兴趣，最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:12:29.237

一种可用于微优化（更好的缓存行为，避免查找）的方法是在每个节点对象上存储一个标志。明显的缺点是图算法不可重入。想要在遍历过程中做*不同*的图遍历来做决定吗？好吧，你不能。您还必须记住之后清除所有这些标志。

另一类是在每次遍历的基础上维护一个单独的数据结构。您提供的两种方法都属于此范围，尽管列表方法效率非常低 - 每次查找的 O(n) 时间。布尔数组（可能压缩为位集；此选项*非常*节省空间）在时间和空间上都简单高效，但要求节点具有连续的索引/ID。这并不总是给出，并且会对图形处理的其他部分产生影响。

如果你没有那个，而是用指针引用图形对象，你可以使用基于它的映射。在 Python 等高级语言中，这非常简单（并且由于高度调整的哈希表/集合数据结构，效率也很高）。

明显的优势是图遍历是可重入的。虽然这听起来可能不多，但我可以证明有时确实会出现这种有用的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:11:08.147

取决于您的使用情况，为了获得更好的时间性能，您可以使用哈希映射您也可以使用 b-tree 来存储节点 O(logn) 插入和查找

就个人而言，我会使用哈希映射，基于每个节点的唯一值。您可以控制哈希图的大小以反映您的需求，并且使用良好的哈希函数可以控制冲突。查看此代码以获取示例[https://github.com/himanshujindal/Reconstructing-Books-from-Google-Ngrams](https://github.com/himanshujindal/Reconstructing-Books-from-Google-Ngrams)

# android - listview viewpager nullpointerexception

> ID：12962785
> 
> 赞同：0
> 
> 时间：2012-10-18T20:02:20.390
> 
> 标签：android, listview, nullpointerexception, viewpagerindicator

请如果有人可以帮我解决这个问题。我找了几天这个解决方案，找不到任何东西。感谢各位开发者！

问题是行中的 NullPointerException`listView.setAdapter(adapter);`避免此问题的唯一方法是添加行`setContentView(R.layaut.pestana0);`，但这会使他们不再看到带有 viewpager 的页面。这是我的应用程序的代码：

主要活动

```
public class AwesomePagerActivity extends Activity {

String[] countries = new String[] { "India", "Pakistan", "Sri Lanka",
        "China", "Bangladesh", "Nepal", "Afghanistan", "North Korea",
        "South Korea", "Japan" };

// Array of integers points to images stored in /res/drawable-ldpi/
int[] flags = new int[] { R.drawable.ic_launcher, R.drawable.ic_launcher,
        R.drawable.ic_launcher, R.drawable.ic_launcher,
        R.drawable.ic_launcher, R.drawable.ic_launcher,
        R.drawable.ic_launcher, R.drawable.ic_launcher,
        R.drawable.ic_launcher, R.drawable.ic_launcher };

// Array of strings to store currencies
String[] currency = new String[] { "Indian Rupee", "Pakistani Rupee",
        "Sri Lankan Rupee", "Renminbi", "Bangladeshi Taka",
        "Nepalese Rupee", "Afghani", "North Korean Won",
        "South Korean Won", "Japanese Yen" };

private ViewPager columnas;
private static int NUM_COLUMNAS = 3;
private ColumnasAdapter miAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    miAdapter = new ColumnasAdapter();
    columnas = (ViewPager) findViewById(R.id.columnas);
    columnas.setAdapter(miAdapter);

    // Parte nueva: AÃ±adimos el Adapter al indicador
    TitlePageIndicator titleIndicator = (TitlePageIndicator) findViewById(R.id.titulos);
    titleIndicator.setViewPager(columnas);

}

private class ColumnasAdapter extends PagerAdapter {

    @Override
    public int getCount() {
        return NUM_COLUMNAS;
    }

    @Override
    public Object instantiateItem(View collection, int position) {
        final LayoutInflater inflater = (LayoutInflater) AwesomePagerActivity.this
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v;
        switch (position) {
        case 0: {
            // setContentView(R.layout.pestana0);
            v = inflater.inflate(R.layout.pestana0, null, false);

            /*
             * Codigo De Cada Pestaña
             */

            // Each row in the list stores country name, currency and flag
            List<HashMap<String, String>> aList = new ArrayList<HashMap<String, String>>();

            for (int i = 0; i < 10; i++) {
                HashMap<String, String> hm = new HashMap<String, String>();
                hm.put("txt", "Country : " + countries[i]);
                hm.put("cur", "Currency : " + currency[i]);
                hm.put("flag", Integer.toString(flags[i]));
                aList.add(hm);
            }

            // Keys used in Hashmap
            String[] from = { "flag", "txt", "cur" };

            // Ids of views in listview_layout
            int[] to = { R.id.flag, R.id.txt, R.id.cur };

            // Instantiating an adapter to store each items
            // R.layout.listview_layout defines the layout of each item
            SimpleAdapter adapter = new SimpleAdapter(getBaseContext(),
                    aList, R.layout.listview_layout, from, to);

            // Getting a reference to listview of main.xml layout file
            ListView listView = (ListView) findViewById(R.id.listview);

            // Setting the adapter to the listView
            listView.setAdapter(adapter);

        }
        case 1: // Full ExpandableList code here
        {
            v = inflater.inflate(R.layout.pestana1, null, false);

            /*
             * Codigo De Cada Pestaña
             */

            ((ViewPager) collection).addView(v, 0);
            return v;
        }
        case 2: // Full ExpandableList code here
        {
            v = inflater.inflate(R.layout.pestana2, null, false);

            /*
             * Codigo De Cada Pestaña
             */

            ((ViewPager) collection).addView(v, 0);
            return v;
        }
        default:
            v = inflater.inflate(R.layout.pestana0, null, false);

            /*
             * Codigo De Cada Pestaña
             */

            ((ViewPager) collection).addView(v, 0);
            return v;

        }
    }

    @Override
    public void destroyItem(View collection, int position, Object view) {
        ((ViewPager) collection).removeView((LinearLayout) view);
    }

    @Override
    public CharSequence getPageTitle(int position) {
        if (position == 0)
            return "Autos";

        else {
            if (position == 1) {
                return "Planes";
            } else {

                if (position == 2) {
                    return "Contactenos";
                }
            }
        }
        return "Autos";

    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((LinearLayout) object);
    }

    @Override
    public void finishUpdate(View arg0) {
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {
    }
} 
```

}

xml 佩斯塔纳0

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView 
        android:id="@+id/textview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
</LinearLayout> 
```

listview_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <ImageView  android:id="@+id/flag"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/app_name"
            android:paddingTop="10dp"
            android:paddingRight="10dp"
            android:paddingBottom="10dp"/>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="vertical">    

            <TextView 
                android:id="@+id/txt"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="15dp"/>           

            <TextView 
                android:id="@+id/cur"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="10dp"/>
        </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:10:32.267

您只需要调用：

```
ListView listView = (ListView) v.findViewById(R.id.listview);
//                     add this ^ 
```

您要查找的 ListView 位于您刚刚膨胀的布局中，而不是当前显示的布局中。所以你需要直接`findViewById()`进去看看`v`。

# javascript - 服务器端 HTML 渲染和客户端绑定策略，以避免重复

> ID：12962787
> 
> 赞同：0
> 
> 时间：2012-10-18T20:02:22.823
> 
> 标签：javascript, html, asp.net-mvc, knockout.js

例如我有这个剃刀视图

```
@foreach (var item in Model)
{               

    <a href="@Item.Id">Hello world</a>
} 
```

在客户端，我有这个用于绑定数据的小模板。

```
 var target = target.find("tbody");
    var markup = "<a href='${Id}'>Hello world<a>";

    $.template("tmpl", markup);
    var elm = $.tmpl("data", data); 
```

此视图包含 ASP.NET Razor 语法。但我经常遇到这样的情况，即相同的视图模型可以通过 AJAX 请求实现，并通过一些基于 Javascript 的模板绑定到 DOM，例如 Knockout 或 jQuert 模板、CanJS 或其他。

我不太愿意重复自己，因为我必须这样做。那么你的策略是什么？我不认为它是仅使用客户端的选项，因为它会影响我的 SEO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:00:55.027

好吧，您可以将整个可重复 ( `@foreach`) 部分设置为部分视图，这样当通过 ajax 调用控制器时，它只会获取呈现的部分视图并推送到页面中。

您可以告诉您的 ajax 调用，返回的预期内容类型将是 html。

因此，在您的控制器操作或 ajax 的不同操作中，您希望如何将其分开：

```
if(Request.IsAjaxRequest()) return Partial('myForeach',model); 
```

该解决方案实现了零重复。ajax 调用正在获取完全呈现的 html，这将是它所在的`@foreach`位置。

这将是确保机器人只能看到正确呈现的页面的最直接方法。（这假设您关心的机器人不会试图找出页面在 javascript 调整后的样子）。

# c++ - c++11异步段错误

> ID：12962791
> 
> 赞同：13
> 
> 时间：2012-10-18T20:02:27.897
> 
> 标签：c++, multithreading, asynchronous, c++11

我只是在 GCC 4.7.2 中尝试一些新的 C++11 功能，尽管当我去运行时会发生 seg 错误。

```
$ ./a.out
Message from main.
terminate called after throwing an instance of 'std::system_error'
  what():  Unknown error -1
Aborted (core dumped) 
```

关于 c++0x，我使用 GCC 的“测试版”功能进行了编译：

```
g++ -std=c++11 c11.cpp 
```

编码：

```
#include <future>
#include <iostream>

void called_from_async() {
  std::cout << "Async call" << std::endl;
}

int main() {
  //called_from_async launched in a separate thread if possible
  std::future<void> result( std::async(called_from_async));

  std::cout << "Message from main." << std::endl;

  //ensure that called_from_async is launched synchronously 
  //if it wasn't already launched
  result.get();

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T20:09:37.503

我相信发生这种情况是因为您忘记了与 POSIX 线程库链接。只需将`-pthread`或添加`-lpthread`到`g++`标志中，问题就会消失。

如果您对细节感兴趣，会发生这种情况，因为 `pthread`只有在您碰巧使用这些功能时，C++11 运行时才会从运行时解析符号。因此，如果您忘记链接，运行时将无法解析这些符号，将您的环境视为不支持线程，并抛出异常（您没有捕获它并中止您的应用程序）。

# stringwriter - stringWrite - 长度不能小于零

> ID：12962792
> 
> 赞同：1
> 
> 时间：2012-10-18T20:02:27.707
> 
> 标签：stringwriter

我正在将 datagrid 数据导出到 excel 并且导出函数工作正常，直到我修复了标题行，现在在这一行的导出函数中出现错误：

```
sAux = stringWrite.ToString().Substring(0, stringWrite.ToString().IndexOf("<tr")); 
```

似乎 stringWrite 为空，因此出现警告消息：

> System.ArgumentOutOfRangeException：长度不能小于零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:40:24.583

这意味着`IndexOf()`返回-1。IOW，它没有找到`<tr`. 你不能拿一个`SubString(0, -1)`。

声明一个变量，并将结果分配`IndexOf()`给该变量，并确保找到您想要的子字符串：

```
Idx = stringWrite.ToString().IndexOf("<tr");
if Idx > -1 
{
   sAux = ...
} 
```

# ruby-on-rails-3 - Rails 3 HABTM 连接表重用与额外字段

> ID：12962797
> 
> 赞同：0
> 
> 时间：2012-10-18T20:03:00.373
> 
> 标签：ruby-on-rails-3, has-and-belongs-to-many

所以我的学生和教室之间有一个 HABTM 关系，使用一个名为 ClassroomStudents 的连接表来处理属于许多教室的许多学生。

最近出现了一个业务需求，即学生应该能够请求教室的成员资格，所以我想我会创建另一个包含教室 ID 和学生 ID 的邀请表，但很快意识到我的教室学生表已经处理了这个，所以我想简单地重新使用这张桌子。我在课堂学生表中添加了一个布尔接受字段，true 表示已确认的成员资格，而 false 是默认值。

可以通过多种方式将学生添加到课堂，其中一种我希望在建立关系时自动接受他们。因此，使用以下代码：

```
@classroom << @students 
```

我怎样才能为这个布尔接受字段指定一个真值而不是默认的假？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:10:23.307

您可以将数据库中的默认值设为`true`. 例如，编写一个如下所示的迁移

```
class MakeAcceptedDefaultToTrue < ActiveRecord::Migration
  def change
    change_column :classroom_students, :accepted, :boolean, :default => true, :null => false
  end
end 
```

# perl - 如何在bash中替换包含字符`的字符串？

> ID：12962799
> 
> 赞同：1
> 
> 时间：2012-10-18T20:03:07.103
> 
> 标签：perl, replace

我有一个这样的字符串

```
export KEY_CONFIG=`$EASY_RSA/whichopensslcnf $EASY_RSA` 
```

我想用这个替换

```
export KEY_CONFIG=/etc/openvpn/easy-rsa/2.0/openssl-1.0.0.cnf 
```

我正在尝试像这样使用 perl，但它不起作用

```
sudo perl -pi -e 's#\`$EASY_RSA/whichopensslcnf $EASY_RSA\`"#export KEY_CONFIG=/etc/openvpn/easy-rsa/2.0/openssl-1.0.0.cnf#g' fileDirectory 
```

有什么提示吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:11:05.050

```
s#\`$EASY_RSA/whichopensslcnf $EASY_RSA\`"#...#g
    ^                         ^          ^
    |                         |          |
    +------------+------------+       Not in 
                 |                    input
            Not escaped.              string
     Perl interpolates $EASY_RSA 
```

使固定：

```
sudo perl -i -pe's#`\$EASY_RSA/whichopensslcnf \$EASY_RSA`#export KEY_CONFIG=/etc/openvpn/easy-rsa/2.0/openssl-1.0.0.cnf#g' file 
```

# linux-kernel - linux可加载内核在控制台上打印消息

> ID：12962800
> 
> 赞同：0
> 
> 时间：2012-10-18T20:03:09.610
> 
> 标签：linux-kernel

如果我有这个，那么它将留下一条系统日志消息。我想在控制台上打印消息。我该怎么做呢？我正在使用 3.2.x 内核的 Ubuntu 上运行该程序。在此先感谢。

```
 printk(KERN_INFO "[%s] : [%d]\n", string, count); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:30:14.967

使用`KERN_ALERT`而不是`KERN_INFO`. KERN_ALERT 的优先级高于 KERN_INFO。

```
printk(KERN_ALERT "[%s] : [%d]\n", string, count); 
```

有关更多信息，请参阅[http://www.makelinux.net/ldd3/chp-4-sect-2](http://www.makelinux.net/ldd3/chp-4-sect-2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:47:20.557

KERN_INFO 可能会进入控制台，这取决于系统的配置方式。将其放入日志的操作由守护程序处理。例如，在使用 rsyslog 的系统上，您可以将

紧缩。* /dev/console

在 /etc/rsyslog.conf 中，重新启动守护程序，然后所有内核消息都会转到控制台。

# java - 当您不知道它的类型时，如何将输入流保存到变量中？

> ID：12962802
> 
> 赞同：0
> 
> 时间：2012-10-18T20:03:16.757
> 
> 标签：java, tcpsocket

我正在使用 TCP 套接字，我也是 Java 和套接字的初学者。场景是客户端，根据服务器的回答，可能会发送 int 或 string。我需要将客户端的输出流保存在服务器端的一个变量中，这样我就可以在 if 语句等中使用它。但是当我不知道发送的流是整数还是字符串时，我怎么能这样做呢？

我做了一个非常简单的例子，因为我的代码又大又乱，我不想让它变得更复杂

客户端：

```
serverSentence=inFromServer.readLine();   
if (serverSentence.equals("Hello"))
     {
     anInt=readUserInput.nextInt(); 
     outToServer.write(anInt);
     }
else 
     {
     outToServer.writeBytes("Hello word!"+'\n');
     } 
```

那么我该如何做到这一点，我的意思是将 Client 的输出流保存在 Server 端（或对方）的变量中，这样我就可以在循环和 ifs 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:05:19.580

使用`Object`. 类型为 an 的引用`Object`可以引用`Integer`或`String`。另一个故事当然是将传入的数据反序列化。如果问题与不知道**如何**解释序列化数据有关，请包含某种标志来指示数据是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:09:32.213

您应该设计服务器和客户端之间的通信协议，使服务器能够读取一些信息（您可以将其称为标准标头），并基于此知道如何解释客户端发送的剩余字节。

然后你就会知道如何从客户端读取数据，以及存储在哪里。

# php - php if 函数错误

> ID：12962804
> 
> 赞同：-1
> 
> 时间：2012-10-18T20:03:23.497
> 
> 标签：php, html, mysql

在下面的代码中...标签是“$mname1”，现在只取三个值 APRIL、MAY、JUNE。

```
if ( $profile_stats['month'] < $old_month && $profile_stats['year'] == $old_year
                    || $profile_stats['month'] == date('m') && $profile_stats['year'] == date('Y') ) {
                    ?>

<?php
                    }
                    else {

                        if ( $profile_stats['month'] == 1      ) {
                        $mname1 = 'January';
                        }
                        elseif ( $profile_stats['month'] == 2 ) {
                        $mname1 = 'Feburary';
                        }
                        elseif ( $profile_stats['month'] == 3 ) {
                        $mname1 = 'March';
                        }
                        elseif ( $profile_stats['month'] == 4 ) {
                        $mname1 = 'April';
                        }
                        elseif ( $profile_stats['month'] == 5 ) {
                        $mname1 = 'May';
                        }
                        elseif ( $profile_stats['month'] == 6 ) {
                        $mname1 = 'June';
                        }
                        elseif ( $profile_stats['month'] == 7 ) {
                        $mname1 = 'July';
                        }
                        elseif ( $profile_stats['month'] == 8 ) {
                        $mname1 = 'August';
                        }
                        elseif ( $profile_stats['month'] == 9 ) {
                        $mname1 = 'September';
                        }
                        elseif ( $profile_stats['month'] == 10 ) {
                        $mname1 = 'October';
                        }
                        elseif ( $profile_stats['month'] == 11 ) {
                        $mname1 = 'November';
                        }
                        elseif ( $profile_stats['month'] == 12 ) {
                        $mname1 = 'December';
                        }

                        if ( $profile_stats['month'] == date('m') && $profile_stats['year'] == date('Y') ) {
                        $mname1 = "<i>Current Month</i> - $mname1";
                        }

                        if ( $profile_stats['month'] == 04 && $profile_stats['year'] == 2012 ) {
                        $newstats_alert = "<p><b style='color: red;'><i>April 2012 stats are only partial due to implementation of this feature mid month.</i></b></p>";    

                        }
                        else {
                        $newstats_alert = NULL;
                        }

                    ?> 
```

这里，

```
 date("m") shows value 10 10 10
  date("Y") shows 12 12 12
  $profile_stats['month'] shows 05 04 03
  $profile_stats['year'] shows 2012 2012 2012
  $old_month shows 10 10 10
  $old_year shows 2011 2011 2011 
```

我正在使用所有这些打印一张表格。下面是代码：

```
<tr>
        <td colspan='4' style='border: 2px solid black;'><div align="center"><b><u><?=$mname1?> <?=$profile_stats['year']?></u></b><?=$newstats_alert?></div></td>
 </tr>
 <tr>
<td>Profile Views</td>
<td>Course Views</td>
<td>General Enquiries</td>
<td>Course Enquiries</td>
 </tr>
 <tr>
<td><?=($profile_stats['profile_views'] + 0)?></td>
<td><?=($course_views[$profile_stats['year']."-".$profile_stats['month']] + 0)?></td>
<td><?=($profile_stats['general_enquiries'] + 0)?></td>
<td><?=($course_enquiries[$profile_stats['year']."-".$profile_stats['month']] + 0)?></td>
</tr>

<tr>
<td colspan='2'>Total Views: <?=($profile_stats['profile_views'] + $course_views[$profile_stats['year']."-".$profile_stats['month']] + 0)?></td>
<td colspan='2'>Total Enquiries: <?=($profile_stats['general_enquiries'] + $course_enquiries[$profile_stats['year']."-".$profile_stats['month']] + 0)?></td>
 </tr> 
```

这段代码只为 4 月、5 月和 6 月生成表格……我想问你，有什么方法可以编辑这段代码以将表格打印到`date("m")-1`一个月，即到 9 月。

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:16:27.923

首先，您可以通过执行以下操作摆脱所有 if-elseif：

```
$months = array("January","February", "March",... );
$mname1 = $months[$profile_stats['month']-1]; 
```

其次，关于您的问题 - 现在很容易`$months`在 for 循环中进行检查 - 直到“上个月”：

```
for($i=0; $i<$profile_stats['month']-1; $i++){
   echo $mname1[$i];
} 
```

# webkit - 在 WebKit Inspector js 中，控制权在哪里返回到被检查的页面？

> ID：12962806
> 
> 赞同：1
> 
> 时间：2012-10-18T20:03:29.987
> 
> 标签：webkit, chromium, web-inspector

我一直在查看可从 Chromium 项目中获得的 WebKit Inspector js：[https ://developers.google.com/chrome-developer-tools/docs/contributing](https://developers.google.com/chrome-developer-tools/docs/contributing)

可以使用状态栏中的放大镜按钮将开发人员工具置于“检查”模式。该模式持续在被检查的页面上单击一次。单击后，页面不再处于“检查”模式。

我想将被检查的页面保持在“检查”模式。

在js中，我已经弄清楚了检查员在哪里

单击状态栏中的放大镜按钮后进入“检查模式”）

*   突出显示正在检查的页面中的元素
*   在 DOM 中找到关联的节点
*   在元素面板中显示节点和树的其余部分
*   将焦点放在元素面板中显示的 DOM 树中的选定节点上

我无法弄清楚被检查的页面在“检查”模式后如何返回“正常”模式。

我尝试了以下方法：

*   启用 toggleSearchingForNode 后，防止它被禁用。
*   在revealAndSelectNode中，防止选中的节点获得焦点

都没有帮助。在检查的页面中单击后，页面恢复正常行为。

任何帮助表示赞赏。

# c - 大约从标准输入块读取。60 KB

> ID：12962807
> 
> 赞同：0
> 
> 时间：2012-10-18T20:03:31.560
> 
> 标签：c, stdin

当使用自我实现的 burrows-wheeler 算法转换文件时，我的程序在读取文件大小超过 59 kB 的文件时卡住了。基本上我在终端启动我的程序：

```
./BW encode 4 < test 
```

其中 4 代表 4*1024 字节。如前所述，在处理文件大小低于 59 kB 的文件（原始数据、文本文件等）时，不会出现任何问题。

处理数据并发送到标准输出的代码：

```
void encodeBlock(unsigned char* str,long length){
    unsigned int i, out_rownum;
    unsigned char **str_matr, *out_str, *prnt_rt_str2, *prnt_rt_str1;
    str_matr = (unsigned char**) calloc(length,sizeof(unsigned char*));
    out_str = (unsigned char*) calloc(length+1,sizeof(unsigned char));
    // make matrix with rotationstrings of str (by saving pointer to first character)
    for(i=0;i<(unsigned int) length;i++){
        str_matr[i] = &str[i];
    }
    // sorting matrix
    glob_strt = &str[0];
    glob_length = length;
    qsort(str_matr,length,sizeof(unsigned char*),strCmpEnc);
    out_str[length] = '\0';
    for(i=0;i<(unsigned int) length;i++){
        prnt_rt_str1 = printRotStr(length,&str[0],str_matr[i]);
        prnt_rt_str2 = printRotStr(length,&prnt_rt_str1[0],&prnt_rt_str1[length-1]);
        if(memcmp(str,prnt_rt_str2,length) == 0){
            out_rownum = i;
        }
        out_str[i] = prnt_rt_str1[length-1];
    }    
    printf("(%d ",out_rownum);
    fwrite((unsigned char*) out_str, 1, length, stdout);
    printf(")\n");
    free(prnt_rt_str1);
    free(prnt_rt_str2);
    free(str_matr);
    free(out_str);
} 
```

和从标准输入接收数据的代码

```
void encode(unsigned short int num, unsigned int block_size){
    long b_length,length;
    unsigned char* buffer;  
    freopen(NULL, "rb", stdin);
    buffer = (unsigned char*) calloc(block_size+1,sizeof(unsigned char));
    length = fread((unsigned char*) buffer, 1, block_size, stdin);
    if(length == 0){
        // file empty
    }else{
        b_length = length;
        printf("##B-W:%ld##\n",length);
        while(length == b_length){
            buffer[block_size] = '\0';
            encodeBlock(buffer,length);
            length = fread((unsigned char*) buffer, 1, block_size, stdin);      
        }
        if(length != 0){
            printf("##B-W:%ld##\n",length); 
            buffer[length] = '\0';
            encodeBlock(buffer,length);
        }
    }
    free(buffer);
} 
```

当它被卡住时，它通常会终止并且屏幕上会出现“Killed”。我正在研究Linux操作系统。

使用 valgrind 的结果：程序卡住，我的整个系统挂起。我无法看到任何调试结果，因为我必须手动关闭系统。

更新：阻塞读取（59kB 之后）背后的原因是由于许多内存泄漏，堆上没有剩余空间。我解决了这个问题，最后阅读工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:33:06.533

> 当它被卡住时，它通常会终止并且屏幕上会出现“Killed”。

这意味着，它很可能会超出内存限制并被内核杀死。

老实说，请务必使用 valgrind。你的代码太痛苦了，人类无法指出致命的错误（非致命的，但仍然令人讨厌的错误比比皆是）。

# joomla - Joomla 2.5+ 语言文件编辑器

> ID：12962809
> 
> 赞同：1
> 
> 时间：2012-10-18T20:03:33.183
> 
> 标签：joomla, joomla2.5, joomla-extensions

我正在寻找一个 Joomla 2.5+ 组件来编辑语言文件（例如：languages/en_GB/en_GB.ini）。

必须由*管理员*进行更改。我们知道我们可以编辑底层文件，但这需要在我们的生产环境中进行变更管理，以及所有相关的繁文缛节。

我曾尝试在 Google 上搜索解决方案，但没有找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:52:50.867

你不需要 Joomla！2.5 功能已经存在。

在 Joomla！2.5+ 你可以使用内置的语言覆盖编辑器。只需选择`Extensions->Language Manager->Overrides`并单击“**新建**”按钮。

这样做的好处是您可以安全地应用 Joomla！核心更新而不会丢失您添加的覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:04:53.353

没有一个。您需要直接通过 FTP 编辑语言文件。

幸运的是，我发现[Notepad++](http://notepad-plus-plus.org/download/v6.2.html)非常擅长这一点。您可以在文档中找到有关语言文件语法的详细信息[。](http://docs.joomla.org/Specification_of_language_files)

# c++ - C++ 指向类的指针

> ID：12962810
> 
> 赞同：-1
> 
> 时间：2012-10-18T20:03:36.360
> 
> 标签：c++, class, pointers

我有一个关于指向类的指针的问题。我的意思是在提供类中我想创建一个`Course * sample`指针，顺便说一下 course 也是另一个接受一个 int 参数的类，然后试图通过`sample=new Course;`但我得到一个错误其中说：

```
Offering.cpp:12:19: error: no matching function for call to ‘Course::Course()’
Offering.cpp:12:19: note: candidates are:
lib.h:63:5: note: Course::Course(int)
lib.h:63:5: note:   candidate expects 1 argument, 0 provided 
```

有谁知道我错在哪里？不管怎么说，还是要谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:07:26.677

你需要做：

```
Course *sample = new Course(10); 
```

这是因为您显然为 Course 定义了一个构造函数，其定义为：

```
Course(int); 
```

定义自定义构造函数时，不会自动添加默认构造函数（ Course() ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:04:39.187

写`Course *sample = new Course(11);`

如果当然需要一个`int`as 构造函数参数，则即使在堆上分配时也必须传递它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:05:28.053

为`Course`. 如果你不能或不应该，你将不得不使用现有的。

```
Course * sample = new Course(1337); 
```

# timezone - 在不同时区设置和显示事件时间给客户端

> ID：12962811
> 
> 赞同：0
> 
> 时间：2012-10-18T20:03:45.413
> 
> 标签：timezone, utc

我想知道处理时区的最佳方法是什么。

假设`user1`写了一条消息`user2`

现在`user1`在`UTC + 2`并且`user2`在`UTC -2`并且假设服务器设置时间`UTC +1`

那么我将如何处理时区的所有这些差异？

我正在编写 jquery 插件，它将更新时间多久前发生的事情，我最好的猜测是将服务器设置为`UTC 0`然后根据客户端时区计算时差，但是有没有办法获取客户端时区，或者也许我做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:06:16.710

从上到下使用纪元时间（UTC+00）并忽略时区。假设浏览器/操作系统时区是正确的。这意味着发送和接收的每条消息都有一个时间戳，形式为自纪元以来的毫秒数，使用`new Date().getTime()`.

我现在的时间是：

```
Thu Oct 18 2012 22:07:11 GMT+0200 (CEST) 
```

或者：

```
1350590831507 
```

CEST 是 UTC+02。在目标计算机上解释的后一种形式（`new Date(1350590831507)`使用 UTC-0200）将是：

```
Thu Oct 18 2012 18:07:11 GMT-0200 
```

但它仍然是同一个日期（时间点）！如果十秒后您将此时间戳与 比较`new Date().getTime()`，您将*始终*得到 10000 毫秒，与时区无关。

# mongodb - 用于测量采集系统的 MongoDB 模式设计

> ID：12962814
> 
> 赞同：2
> 
> 时间：2012-10-18T20:03:56.007
> 
> 标签：mongodb, database-design, schema

## 介绍：

*   系统目前由 2 个设备组成。
*   每个设备有 10 个测量数据的节点。该数据每 5 秒写入一次 DB。
*   我目前估计该设置的最大 50:1（读：写）比率。当引入新设备/节点时，这很可能会改变。
*   我目前正在将所有内容嵌入到一个文档中（例如：http: [//pastebin.com/4dATY5NF](http://pastebin.com/4dATY5NF)）
*   我的 3 个主要用例是：
    *   向数据库添加测量
    *   从所有节点获取最后一次测量（对于 5 个节点，这将返回 5 个测量网络）
    *   获取给定日期的测量列表（与输入日期/时间标准匹配的长测量列表）。

## 问题：

我主要关心的是随着时间的推移会大量增长的文档（插入到嵌入式测量数组）以及使测量难以查询给定日期/时间范围的一般文档结构。

例如，即使每 5 秒只有一个节点上报数据，那么嵌入式阵列中的测量总数（仅 1 天）为：24*60*60/5=17280。一个月报告 5 个节点给出： 5 个具有 518400 个元素的嵌入式数组（在一个文档中！）。设备工作的时间越长，它在每个附加节点的嵌入式测量数组中的条目就越多。

## 问题：

*   估计的读/写比率如何影响嵌入与链接的决策？
*   在这种情况下，牺牲嵌入并将数据拆分为 2 个集合的所有好处是否合理？

    我一直在考虑的是，例如一个用于设备/节点配置的集合（在此处嵌入信息，因为它并不多），而第二个仅用于测量（参考它来自的设备和节点）。我认为这将花费更多对数据库的调用，但在性能和内存使用方面会更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:45:09.607

为了 ：

*   它没有。在单个文档中嵌入无限增长的结构不会扩展，应该避免。到目前为止，最好将每个测量值存储为单个文档。尽管写入性能会更稳定（MongoDB 必须定期移动不断增长的文档，这可能会导致写入延迟峰值），但读/写比率并不是很相关。
*   实际上，关于嵌入的“好东西”并不多。它使查询复杂化，没有办法获得嵌入结构的一小部分等等。因此，转移到两个单独的系列不仅是合理的，而且强烈鼓励。在未来证明模式中，当且仅当当您查询顶级文档并且无论您的系统必须处理多少用户或数据时该嵌入式结构受大小限制时，您总是需要整个嵌入式结构。

# javascript - 如何使用 jquery 或 PHP 更改 img src 目录或图像文件名

> ID：12962818
> 
> 赞同：1
> 
> 时间：2012-10-18T20:04:08.643
> 
> 标签：javascript, jquery, html, css

我想通过向父容器添加一个类来更改图像路径目录或附加图像文件。

示例：如果我向父容器添加一个“大”类`img`，我希望它附加`img`文件名或更改`img`路径。

```
 src="/images/services/image.jpg" changed to src="/images/services/image-large.jpg"

   or

   src="/images/services/image.jpg" changed to src="/images/services/large/image.jpg"

   ...............................................................................

     default, no class:

        <div>
            <img src="/images/services/image.jpg" alt="" />
        </div>

     Option 1, with class:

        <div class="large-image">
            <img src="/images/services/image-large.jpg" alt="" />
        </div>

     Option 2, with class:

        <div class="large-image">
            <img src="/images/services/large/image.jpg" alt="" />
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:09:54.887

例如像这样，使用[lastIndexOf](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/lastIndexOf)

```
$function() {
  var img = $(".large-image > img").each(function() { // for each img found
    var src = $(this).attr("src"); // get the src
    var path = src.substring(0,src.lastIndexOf('/')); // get the path from the src 
    var fileName = src.substring(src.lastIndexOf('/')); // and filename
    var newSrc = path+"/large"+fileName; // re-assemble   
    // or change filename:
    // var newSrc = path+"/"+fileName.replace(".jpg","-large.jpg"); // re-assemble   

    $(this).attr("src",newSrc);
  });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:11:36.367

您可以使用 jquery 更改 src、拆分它并添加您的新文件夹

```
<div class="large-image">
     <img src="/images/services/image.jpg" alt="" />
</div>

$('.large-image > img').each(function(){
     var msrc=$(this).attr('src');
     msrc=msrc.split('/');     //images, services, image.jpg
     var lastelem = msrc.pop();  //images, services     // lastelem: image.jpg
     msrc.push('large');     //images, services, large   // lastelem: image.jpg 
     msrc.push(lastelem);    //images, services, large, image.jpg
     msrc=msrc.join('/');  //"images/services/large/image.jpg"
     $(this).attr('src', msrc);
}) 
```

# delphi - Firebird 错误消息“由于系统错误导致无法成功执行后续语句”

> ID：12962819
> 
> 赞同：6
> 
> 时间：2012-10-18T20:04:19.937
> 
> 标签：delphi, firebird, uib

我的应用程序在访问 Firebird 数据库时有时会产生这种错误：

> 由于系统错误导致无法成功执行后续语句 GDS 代码：335544726 - SQL 代码：-902 - 错误代码：406'

可能是什么问题呢？有没有办法调试这个？

我在 Windows 7 上运行 Firebird 2.5.1。至少有带有 Python 的 kinterbasdb 和使用 Delphi 的 UIB 组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:16:17.160

看起来原因是使用来自多个线程的相同连接/事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-19T18:33:48.667

在我们切换到 UIB（从 IBX）之后，我们也遇到了很多这样的错误。
它是由 TUIBTransaction 的事务类型（Option）引起的。两者：
“Read Commited”：`[tpNowait,tpReadCommitted,tpRecVersion]`和
“Snapshot”：`[tpConcurrency,tpNowait]`
由于“tpNowait”而导致相同。尤其是在从普通 HDD 切换到 SSD 之后。`sleep(2);`（在每行之间插入，行`TR.Start; sleep(2); ... TR.Commit;`有点帮助，但没有完全解决。）

我们不想简单地使用“tpWait”，因为这太冒险了，APP可能永远挂起。

所以**解决方案**是：
1.）将事务选项更改为“默认”。`[tpConcurrency,tpWait,tpWrite]`
2.）我们在**每次开始**事务之前**在运行时设置。** *（如果由于超时而失败，您可以以更高的值重复执行，但明智的做法是通知用户有关冻结的 UI。）*`TR.LockTimeOut := 5; //seconds`

 *****重要提示：**
当前 (2016) UIB 代码根本无法处理`LockTimeOut`。首先它必须被修复。在此处查看代码[...](https://stackoverflow.com/a/57877399/2110862)***

# c++ - Visual C++ 中的去虚拟化

> ID：12962820
> 
> 赞同：4
> 
> 时间：2012-10-18T20:04:21.703
> 
> 标签：c++, visual-studio-2010, visual-c++

Visual c++ 是否为只有一个实现的纯类去虚拟化函数？例如：

```
class ICar
{
public:
virtual void Break() = 0;
};

class CarImpl : public ICar
{
public:
virtual void Break(){ .... }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T23:07:09.413

OP 问题自然分为 3 个问题：

1.  VC++ 2010 是否进行了所描述的去虚拟化 - 答案是： **否**
2.  它可以做到吗？答案是：**是**的，理论上它可以在某些情况下做到。
3.  为什么 VC++ 不这样做。- 我们只能推测...

以下是详细信息：

## 1.这样的优化是VC++做的吗

为了证明这种优化没有完成，我们需要在 Project Properties/Configuration Properties/C/C++/Output Files 中启用汇编语言列表：将 Assembler Output 设置为“Assembly With Source Code”（/FAs）”。

这是来自 OP 的稍微修改过的 C++ 代码（我将 ICar 从抽象类更改为普通类，它不会改变问题的要点）：

```
#include "stdafx.h"

class ICar
{
public:
    virtual void Accelerate(){printf("%s", "a\n");};
    virtual void Break(){printf("%s", "b\n");};
};

class CarImpl : public ICar
{
public:
    virtual void Accelerate(){ printf("%s", "accelerate\n"); }
    virtual void Break(){ printf("%s", "break\n"); }
    void Fly() { printf("%s", "fly\n"); }
};

int _tmain(int argc, _TCHAR* argv[])
{
    ICar *pCar = new CarImpl();
    pCar->Break();

    CarImpl *pCarImpl = new CarImpl();
    pCarImpl->Fly();

    CarImpl carImpl;
    carImpl.Break();
    carImpl.Fly();

    return 0;
} 
```

首先，（**注 1**）让我们注意`carImpl.Break();`不使用虚函数。这不是优化的结果——它是 C++ 的一个特性：如果在编译期间知道对象的类型，则不使用虚函数机制。虚函数机制仅在涉及指针或引用时使用。

其次，让我们启用优化 /O2 并查看为`pCar->Break();`（虚拟方法）和`pCarImpl->Fly();`（非虚拟方法）生成的汇编程序。

对于 Break() 的调用，我们将看到：

```
; 24   :     pCar->Break();

    mov edx, DWORD PTR [eax]
    mov ecx, eax
    mov eax, DWORD PTR [edx+4]
    call    eax 
```

EAX 包含一个指向 CarImpl 对象的指针（从前面未显示的汇编程序行可以清楚地看出）。在第一条 mov 指令中，CarImpl 对象的第一个 dword 被加载到 EDX 中（对象的第一个 dword 通常是 vtbl 的地址），然后`this`CarImpl 的第一个 dword 被加载到 ECX 中（这对我们来说并不重要），然后 dword 与将 EDX 指向的点（虚函数表中的第二个函数）的偏移量 4 加载到 EAX 中，然后调用完成。

在 Fly() 的情况下，我们将看到：

```
; 27   :     pCarImpl->Fly();

    push    OFFSET ??_C@_04PPJAHJOB@fly?6?$AA@
    push    OFFSET ??_C@_02DKCKIIND@?$CFs?$AA@
    call    _printf 
```

这只是 printf 的内联，其中传递了两个参数。

因此，很明显，在 Break() 的情况下，vtable 的使用并未优化。

## 2.能不能做这样的优化

原则上它可以被优化。我在 M.Ellis, B. Stroustrup, Addison-Wesley 1990 的“The Annotated C++ Reference Manual”中找到了以下语句：第 10.2 章（我有这本书的翻译，我正在翻译回英文 :-) 所以它可能不是 Stroustroup 的确切措辞。）

*当在编译时知道对象的确切类型时，就不需要虚函数机制。相反，实现可以生成类成员函数的普通调用。（DK：我们代码中 carImpl.Break() 的情况，请参阅我的 NOTE 1） ... 当通过指针或引用调用虚函数时，对象的实际类型可能不是静态已知的，因此 virtual 的机制应该使用函数。对控制流有足够了解的编译器可以放弃对虚函数的调用，即使在某些情况下，例如通过以下代码中的 bp 调用：*

```
struct base {
    virtual void vf1();
}
class derived : public base{
public:
    void vf1();
}

void g()
{
    derived d;
    base* bp = &d;
    bp->vf1();
} 
```

*...内联虚函数完全有意义并且经常使用。自然，内联仅用于将内联函数应用于已知类型的对象的地方。（DK：我认为这里 B. Stroustrup 也参考了我们的 carImpl.Break() 案例；即 NOTE1 中描述的案例）。*

## 3\. 为什么没有完成

虽然这在 OP 中并没有字面上问过，但也许这是一个隐藏的问题。我同意 Alex Cohn 的评论之一（说得好）：

*它可以，但它没有。可能这种情况不会经常发生，不足以证明可靠地优化此类调用所需的资源是合理的。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T20:09:15.130

编辑：这个答案被我的第二个答案 2012-10-20 淘汰了。我没有删除它以保留评论。

VC++ 不可能，因为其他派生类可以链接到已经编译的 dll 或 exe 模块。

# android - 为什么许可文档与我的 Eclipse 开发环境不对应？

> ID：12962821
> 
> 赞同：1
> 
> 时间：2012-10-18T20:04:23.510
> 
> 标签：android

我正在尝试将 Google Play 许可服务整合到我的项目中。我正在使用 Windows 7 和 Eclipse Indigo 3.7.2。我的 SDK 安装在 c:\android-sdk-windows 下，我有一个 extras 目录、一个 google-market_licensing 目录和一个 market_licensing 目录。

在 extras 目录下，我有一个 google 目录，但它不包含 market_licensing 目录 - 正如文档所预期的那样。

我是在正确的长椅附近还是在完全错误的教堂里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T09:13:03.947

发挥您的想象力：文档已过时。在 Android SDK 管理器中，用鼠标指向“Google Market Licensing”，您将获得带有当前安装位置的工具提示（提示：它是`$SDK_HOME/google_market_licensing`）。

# excel - Excel 根据另一列中的值将一些行转换为列

> ID：12962828
> 
> 赞同：0
> 
> 时间：2012-10-18T20:04:48.063
> 
> 标签：excel

我有一个看起来像这样的 Excel 文件：

```
Time  012345  2345678   5647890 7891234
6:00    1        0         0       1
6:30    1        1         0       1
7:00    1        1         0       0
7:30    0        0         0       0
8:00    0        0         1       0
8:30    0        0         1       0
9:00    0        0         1       0
9:30    0        0         1       0
10:00   0        0         0       0
10:30   1        0         0       1
11:00   1        0         0       1
11:30   1        0         0       1
12:00   1        0         0       1
12:30   0        0         0       0
13:00   0        0         0       0
13:30   0        0         1       0
14:00   0        0         1       0
14:30   0        0         1       0
15:00   0        0         1       0
15:30   1        1         0       0 
```

等等

目标是使这些转置，但采用时间值而不是列中的实际 1 和 0。理想的输出如下所示：

```
userID    startTime1   stopTime1   startTime2   stopTime2   startTime3  stopTime3
012345      6:00         7:30         10:00       12:30        15:00
2345678     6:00         7:30         15:00
5647890     7:30         10:00        13:00       15:30        
7891234     6:00         7:00         10:00       12:30 
```

我已经尝试设置数据透视表和过滤，但这并没有让我到任何地方。而且我不确定还有什么可以尝试的。V 和 HLOOKUPS 也没有帮到我。

部分问题是开始时间需要是时间戳在 1 之上的一行，而停止时间需要是时间戳在一组中最后一个 1 之下的 1 行。做 if 语句之类的简单事情对我没有帮助，因为我需要列中每个组的第一次和最后一次。所以我很困惑。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T22:44:42.247

根据您的理想格式，我有公式可以为您提供正确的结果。假设您的数据在 A1:E21 范围内，并且您已在 G2:G5 范围内复制/转置您的用户 ID。

首次开始时间公式为： `=IF(HLOOKUP($G2,$B$1:$E$2,2,1)=1,$A$2,INDEX($A$1:$A$21,MATCH(1,OFFSET($A$1:$A$21,0,MATCH($G2,$1:$1,0)-1,,),0)-1))`

第一个停止时间公式（这可以复制到所有停止时间列）是： `=IFERROR(INDEX(OFFSET($A$1:$A$21,MATCH(H2,$A$1:$A$21,0),,,),1+MATCH(0,OFFSET($A$1:$A$21,MATCH(H2,$A$1:$A$21,0),MATCH($G2,$1:$1,0)-1,,),0)-1),"")`

第二个开始时间公式（可以复制到所有后续开始时间列： `=IFERROR(INDEX(OFFSET($A$1:$A$21,MATCH(I2,$A$1:$A$21,0),,,),MATCH(1,OFFSET($A$1:$A$21,MATCH(I2,$A$1:$A$21,0),MATCH($G2,$1:$1,0)-1,,),0)-1),"")`

如需工作文件示例，请查看[此处](https://docs.google.com/open?id=0B04VM-tmdCnINlQ4MExQMXFFQmc)。

# android - 我可以使用两个微调器从我命名为 dist.js 的 javascript 文件中检索数据吗

> ID：12962831
> 
> 赞同：0
> 
> 时间：2012-10-18T20:05:09.597
> 
> 标签：android, android-layout, android-intent, android-widget, android-ndk

我想要实现的是使用微调器从城镇中选择，然后到城镇，然后检索我在 dist.js 文件中定义的旅行距离和时间。当我在 webview 中使用 html 时效果很好。但我不想使用 webview。因此，我怎样才能让两个微调器来计算呢？

* * *

好的，已经尝试过，但仍然没有任何效果。到目前为止，这是我的代码。你能告诉我我做错了什么吗？

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.Reader;
import java.io.StringWriter;
import java.io.Writer;

import org.json.JSONArray;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class MainActivity  extends Activity{ 

Spinner s1; 
Spinner s2; 

@Override 
public void onCreate(Bundle savedInstanceState) { 
super.onCreate(savedInstanceState); 
setContentView(R.layout.activity_main); 

s1  = (Spinner) findViewById(R.id.spinner1);
s2  = (Spinner) findViewById(R.id.spinner2);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
R.array.camp_sites, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
s1.setAdapter(adapter);
InputStream is = context.getResources().openRawResource(R.raw.dist); 
Writer writer = new StringWriter(is.available()); 
char[] buffer = new char[1024]; 
Reader reader = new BufferedReader(new InputStreamReader(is, "UTF-8")); {
try { 
    int n; 
    while ((n = reader.read(buffer)) != -1) { 
        writer.write(buffer, 0, n); 
    } 
} finally { 
    reader.close(); 
} 
String jsonString = writer.toString(); 

JSONArray json = new JSONArray(jsonString);}
}

public void onNothingSelected(AdapterView<?> parent) {

   }
} 
```

谢谢你帮我解决这个问题！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:23:31.263

加载 js 文件，获取城镇名称数组，并将它们放入[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)中。然后将适配器传递给您的微调器：

```
spinner.setAdapter(adapter); 
```

对两个旋转器中的每一个执行一次。

有关微调器的更多信息：http: [//developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

**更新**

要加载 js 文件（我假设它包含一个 JSON 数组），您可以将其放入`resources/raw`并执行以下操作：

```
// open the input stream
InputStream is = context.getResources().openRawResource(R.raw.dist);

// read into a buffer
// NOTE: This is ugly, and there may be a better way, but it works.
Writer writer = new StringWriter(is.available());
char[] buffer = new char[1024];
Reader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
try {
    int n;
    while ((n = reader.read(buffer)) != -1) {
        writer.write(buffer, 0, n);
    }
} finally {
    reader.close();
}
String jsonString = writer.toString();

// load into a JSONArray
// if your file contains a single object, use JSONObject instead
JSONArray json = new JSONArray(jsonString); 
```

如果您的 json 文件真的很大，有一种方法可以将流解析为 JSON，而无需先读取整个内容，但它更复杂。为此，我推荐[Jackson](http://jackson.codehaus.org/)，并且真正满足您的所有 JSON 需求。[Gson](http://code.google.com/p/google-gson/)是另一种选择。

# javascript - AJAX请求后函数语句被调用1次以上？

> ID：12962841
> 
> 赞同：1
> 
> 时间：2012-10-18T20:05:43.410
> 
> 标签：javascript, jquery

这是一个奇怪的标题，但我不确定如何描述正在发生的事情。

基本上，我有以下代码在发出 AJAX 请求后运行：

```
if (doAjax) {
    $("#loading").removeClass("visible");
    $("#loading").addClass("hidden");
    setTimeout(function () {
        $("#loading").css({
            "display": "none",
            "opacity": "0",
        });
    }, 300);
    if (number.length === 0) {
        $("#nothing").css("display", "inline-table");
        setTimeout(function () {
            $("#nothing").addClass("visible");
        }, 1);
    } else {
        setFavorite();
        checkFavorite();
    }
} 
```

如果 AJAX 请求返回结果，那么它将在完成后运行`setFavorite();`and`checkFavorite();`函数。我还可以在单​​击按钮时重新加载 AJAX 请求，然后在请求结束时也会运行这些功能。

问题是，如果用户加载页面，它将运行 AJAX，并且会很好。但是，如果用户再次**调用**AJAX 请求，该函数将运行两次。如果再次调用它，它会运行 3 次。

**因此**，每次发出 AJAX 请求时，被调用的次数`setFavorite();`和`checkFavorite();`被调用的次数都会增加一。

我通过放置一个 inside 来确认`alert`它`setFavorite()`为什么如此随机地调用，并且它总是被调用 x 次，其中 x 是用户重新加载 AJAX 请求的次数。

如果需要，我会发布`setFavorite();`and`checkFavorite();`函数，但我觉得错误在于`doAjax`函数内。

**编辑 1**

重载功能：

```
function reload(){
    doAjax("http://www.codekraken.com/testing/snowday/wgrz.html");
};

$("#reload").click(reload); 
```

**编辑二人组**

`doAjax();`

```
function doAjax(url) {
    $.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22" + encodeURIComponent(url) + "%22&format=xml'&callback=?",
    function (data) {
        if (data.results[0]) {
            $("#content").html("");
            var number = $(filterData(data.results[0])).find("#gtv_leftcolumn table:gt(1)");
            for (var i = 0; i < number.length; i++) {
                var school = $(filterData(data.results[0])).find("#gtv_leftcolumn table:gt(1) .maintext p:eq(" + i + ")").text();
                var type = $(filterData(data.results[0])).find("#gtv_leftcolumn table:gt(1) .trafficbriefs:nth-child(even) p:eq(" + i + ")").text();
                $("#content").append("<div class='row'><div class='row-inside'><div class='row-l'>" + school + "</div><div class='row-r'>" + type + "</div></div><div class='star'><div class='star-inside'></div></div></div>");
            };
            if (doAjax) {
                $("#loading").removeClass("visible");
                $("#loading").addClass("hidden");
                setTimeout(function () {
                    $("#loading").css({
                        "display": "none",
                        "opacity": "0",
                    });
                }, 300);
                if (number.length === 0) {
                    $("#nothing").css("display", "inline-table");
                    setTimeout(function () {
                        $("#nothing").addClass("visible");
                    }, 1);
                } else {
                    setFavorite();
                    checkFavorite();
                }
            }
        } else {
            console.log("error");
        }
    })
}

function filterData(data) {
    data = data.replace(/<?\/body[^>]*>/g, '');
    data = data.replace(/[\r|\n]+/g, '');
    data = data.replace(/<--[\S\s]*?-->/g, '');
    data = data.replace(/<noscript[^>]*>[\S\s]*?<\/noscript>/g, '');
    data = data.replace(/<script[^>]*>[\S\s]*?<\/script>/g, '');
    data = data.replace(/<script.*\/>/, '');
    data = data.replace(/<img[^>]*>/g, '');
    return data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:08:29.283

这听起来就像每次运行函数时都在绑定重新加载按钮。这将多次运行该功能。

你能显示 setFavorite(); 和 checkFavorite(); 功能？

如果每次重新加载都必须重新绑定按钮，您可以在重新绑定之前取消绑定按钮。

# connect - jconsole 在尝试连接到本地进程时抛出异常

> ID：12962853
> 
> 赞同：4
> 
> 时间：2012-10-18T20:06:21.333
> 
> 标签：connect, jconsole

我正在尝试在我的 Mac OSX 机器上运行 jconsole，以便尝试分析应用程序中的一些内存泄漏问题。

jconsole 确实出现了，它确实列出了本地进程，但是当我尝试连接到本地进程时，连接就会超时。

我在这里找到了一些很好的故障排除建议： [https ://blogs.oracle.com/jmxetc/entry/troubleshooting_connection_problems_in_jconsole](https://blogs.oracle.com/jmxetc/entry/troubleshooting_connection_problems_in_jconsole)

尽管此页面上的大多数链接现在不再有效。阅读这篇文章后，我使用这个命令运行了 jconsole，发现 jconsole 在尝试连接到我的本地进程时实际上会引发异常。

jconsole -J-Djava.security.debug=所有 2>&1 | 三通 /temp/log.txt

我可以看到这个异常跟踪，我将把它附加到这个问题的末尾，但我的问题是“我能做些什么来解决这个问题”？这台 Mac 是从另一个现已离开的开发人员那里继承来的，我真的很想尝试避免重新安装操作系统。这是一个例外，我希望对这个问题的任何回答都会对其他人有所帮助：

```
jar:   computed ad8b34ed75936e2e0fb96b807980b012f0d56dc1
jar:
jar: beginEntry sun/security/pkcs11/wrapper/Functions$Flags.class
jar: Manifest Entry: sun/security/pkcs11/wrapper/Functions$Flags.class digest=SHA1
jar:   manifest 752aaf83f970a47664b3722060cf048742854b68
jar:   computed 752aaf83f970a47664b3722060cf048742854b68
jar:
  cryptokiVersion: 2.20
  manufacturerID: Apple
  flags: 0
  libraryDescription: Apple PKCS #11 module
  libraryVersion: 0.01
All slots: 0, 1, 2, 3
Slots with tokens: (none)
ProviderConfig: Error loading provider sun.security.jca.ProviderConfig$4@31be0369

java.lang.UnsupportedOperationException: Initialization failed
        at sun.security.pkcs11.SunPKCS11.<init>(SunPKCS11.java:337)
        at sun.security.pkcs11.SunPKCS11.<init>(SunPKCS11.java:86)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
        at sun.security.jca.ProviderConfig$4.run(ProviderConfig.java:262)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.security.jca.ProviderConfig.doLoadProvider(ProviderConfig.java:244)
        at sun.security.jca.ProviderConfig.getProvider(ProviderConfig.java:224)
        at sun.security.jca.ProviderList.getProvider(ProviderList.java:215) 
        at sun.security.jca.ProviderList$3.get(ProviderList.java:130)
        at sun.security.jca.ProviderList$3.get(ProviderList.java:125)
        at java.util.AbstractList$Itr.next(AbstractList.java:345)
        at java.security.SecureRandom.getPrngAlgorithm(SecureRandom.java:522)
        at java.security.SecureRandom.getDefaultPRNG(SecureRandom.java:165)
        at java.security.SecureRandom.<init>(SecureRandom.java:133)
        at java.rmi.server.UID.<init>(UID.java:92)
        at java.rmi.server.ObjID.<clinit>(ObjID.java:71)
        at sun.rmi.transport.LiveRef.<init>(LiveRef.java:67)
        at sun.rmi.server.UnicastServerRef2.<init>(UnicastServerRef2.java:51)
        at sun.management.jmxremote.ConnectorBootstrap$PermanentExporter.exportObject(ConnectorBootstrap.java:171)
        at javax.management.remote.rmi.RMIJRMPServerImpl.export(RMIJRMPServerImpl.java:84)
        at javax.management.remote.rmi.RMIJRMPServerImpl.export(RMIJRMPServerImpl.java:75)
        at javax.management.remote.rmi.RMIConnectorServer.start(RMIConnectorServer.java:388)
        at sun.management.jmxremote.ConnectorBootstrap.startLocalConnectorServer(ConnectorBootstrap.java:475)
        at sun.management.Agent.startAgent(Agent.java:135)
        at sun.management.Agent.agentmain(Agent.java:95)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:325)
        at sun.instrument.InstrumentationImpl.loadClassAndCallAgentmain(InstrumentationImpl.java:348)
Caused by: java.security.ProviderException: slotListIndex is 0 but token only has 0 slots
        at sun.security.pkcs11.SunPKCS11.<init>(SunPKCS11.java:322)
        ... 33 more 
```

# lisp - 在迭代中设置条件格式

> ID：12962861
> 
> 赞同：1
> 
> 时间：2012-10-18T20:07:00.720
> 
> 标签：lisp, format, common-lisp

我不小心想出了下面的代码：

```
(format t "~{~[~:R~;~S~:;none~] chance~^, ~}" '(0 1 0 2 0 3)) 
```

但我无法解释为什么它会以这种方式工作。我看到的行为是这样的：

列表的奇数元素似乎定义了提供给条件的 conses 的数量。因此，以上面的形式，它将打印：

```
;; first chance, second chance, third chance 
```

如果用 1 替换 0，则输出为：

```
(format t "~{~[~:R~;~S~:;none~] chance~^, ~}" '(1 1 1 2 1 3))
;; 1 chance, 2 chance, 3 chance 
```

但是，如果您随后喂它，您会期望：

```
(format t "~{~[~:R~;~S~:;none~] chance~^, ~}" '(2 1 2 2 2 3)) 
```

然后你会得到 3 次“没有机会”，但实际结果是：

```
;; none chance, 2 chance, none chance, none chance, none chance 
```

老实说，我写错了，我打算完全做其他事情。只是对这种行为感到困惑。

现在，如果我理解正确，`~[~]`指令取决于传递的参数数量，另一方面`~{~}`可能会消耗可变数量的参数。那么，我看到的行为是有意的，还是只是当您随机和/或故意将不兼容的指令放在一起时发生的某种“未定义”行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:17:36.420

据我了解，这是正确的。

`~{~}`消耗列表直到它用完。

`~[~]`使用一个参数作为索引选择替代。对于 0 和 1，您会得到另一个格式指令 ~:R 或 ~S，它们会消耗列表中的额外项目。因此，结果是成对使用参数列表。

但是，对于大于 1 的任何内容（因为这里有冒号：），`~:;`您会得到不消耗额外参数的字面“无”。所以在最后一种情况下，列表被解析如下：

2 -> 没有机会
1 2 -> 2 机会
2 -> 没有机会
2 -> 没有机会
3 -> 没有机会

# c# - 如何防止控件与表单一起调整大小

> ID：12962862
> 
> 赞同：0
> 
> 时间：2012-10-18T20:07:00.030
> 
> 标签：c#, windows-forms-designer

当我尝试调整表单大小时，我发现控件正在调整大小

[问题] 如何防止控件随表单调整大小？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:12:21.820

控件在两种情况下调整大小

1.  当控件停靠时

2.  当 Anchor 属性包含左侧和右侧或上边框和下边框的锚点时。

释放左/右和上/下锚点之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:11:08.173

更改[`Control.Anchor`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor%28v=vs.100%29.aspx)属性，使控件不会调整大小。

# foreach - Foreach 类型不匹配 MVC 4

> ID：12962865
> 
> 赞同：1
> 
> 时间：2012-10-18T20:07:06.050
> 
> 标签：foreach, asp.net-mvc-4, type-mismatch

我的问题与初学者的主题有关（对不起......）。我刚开始使用 MVC，此刻我正在尝试理解这些概念和结构

我来自 webform 的做事方式，现在我需要将旧的 webform 转发器模拟到 MVC 中。在网上寻找替代方案时，我发现 foreach 循环是 MVC 实现这一目标的方式之一，对吗？

然后我有点上下文（如果我说的话表明对某些概念有错误的理解，请纠正我）......

这是我通过 edmx 文件创建的模型类

```
 public partial class qryMonitor
{
    public int Nsu { get; set; }
    public string NomeDaSolicitacao { get; set; }
    public string Grupo { get; set; }
    public string Prioridade { get; set; }
    public string Transito { get; set; }
    public Nullable<int> IdDestinatario { get; set; }
    public string NomeAutor { get; set; }
    public string DepartamentoAutor { get; set; }
    public int IdAutor { get; set; }
    public Nullable<int> IdAnalistaDesignado { get; set; }
    public string NomeAnalistaDesignado { get; set; }
    public Nullable<int> IdSuperiorAnalistaDesignado { get; set; }
    public string NomeSuperiorAnalistaDesignado { get; set; }
    public string Atividade { get; set; }
    public string CodigoRgb1 { get; set; }
    public string DataSolicitacao { get; set; }
    public int MarcarSolicitacao { get; set; }
} 
```

然后我创建了另一个具有单个属性的类...

```
public class ChamadosViewModel
{
    public IEnumerable<qryMonitor> Chamados { get; set; }
} 
```

现在我的控制器的代码

```
public ActionResult Index()
{   
    EntidadesHelpDesk _dbHelpDesk = new EntidadesHelpDesk();
    ChamadosViewModel viewModel = new ChamadosViewModel()
    {
        Chamados = _dbHelpDesk.qryMonitor
            .ToList()
            .Where(x => x.Transito == "Respondida")
            .Select(x => new qryMonitor
            {
                Nsu = x.Nsu,
                Transito = x.Transito,
                NomeDaSolicitacao = x.NomeDaSolicitacao,
                NomeAutor = x.NomeAutor,
                Prioridade = x.Prioridade,
                DataSolicitacao = x.DataSolicitacao
            })
    };
        return View(viewModel);
} 
```

最后是通过向导创建的视图

```
@model IEnumerable<ServiceDesk.ViewModel.ChamadosViewModel>
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
@using (Html.BeginForm())
{
    <p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <table>
        <tr>
            <th></th>
        </tr>

        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { /* id=item.PrimaryKey */ })     |
                    @Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey     */ }) |
                    @Html.ActionLink("Delete", "Delete", new { /* id=item.PrimaryKey     */ })
                </td>
            </tr>
        }
    </table>
} 
```

当我运行这些时，我得到一个类型不匹配（我能够理解，但不能解决）。完整的按摩是

```
"The model item passed into the dictionary is of type'ServiceDesk.ViewModel.ChamadosViewModel', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[ServiceDesk.ViewModel.ChamadosViewModel]'." 
```

我在网上找了一些类似的主题......我发现很少，但我无法通过比较示例和上述情况来解决问题。

我注意到的一件事是，通常在示例中，我看到了像“Model.ForeachData”这样的代码

在我的情况下，智能感知除了模型本身之外什么都没有（看起来像一组事物，而不仅仅是一个简单的组）。

在此先感谢并为我的英语（不是我的主要语言）感到抱歉。再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:10:26.147

您传递给视图的模型包含一个集合，但您正试图直接迭代模型。

更改您的视图代码以使用该`Chamados`属性。

```
@foreach (var item in Model.Chamados) 
```

然后，在视图中更改模型类型：

```
@model ServiceDesk.ViewModel.ChamadosViewModel 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:10:34.573

您将视图模型定义为`IEnumerable<ServiceDesk.ViewModel.ChamadosViewModel>`但在控制器中您没有提供集合，而是提供了单个视图模型。

```
ChamadosViewModel viewModel = new ChamadosViewModel()
{
    Chamados = _dbHelpDesk.qryMonitor
        .ToList()
        .Where(x => x.Transito == "Respondida")
        .Select(x => new qryMonitor
        {
            Nsu = x.Nsu,
            Transito = x.Transito,
            NomeDaSolicitacao = x.NomeDaSolicitacao,
            NomeAutor = x.NomeAutor,
            Prioridade = x.Prioridade,
            DataSolicitacao = x.DataSolicitacao
        })
};
return View(viewModel); 
```

因此，您要么需要更改控制器为您的视图提供的内容，要么更改您的视图期望接收的内容。

# ios - performSegueWithIdentifier:sender: 找不到我的转场

> ID：12962869
> 
> 赞同：0
> 
> 时间：2012-10-18T20:07:17.953
> 
> 标签：ios, xcode, uinavigationcontroller, segue

我有`UINavigationController`一个`UITableViewController`as `rootViewController`。我从表格视图的原型单元格创建了一个 segue，并将其与另一个`UIViewController`. 我的 segue 的标识符是“详细信息”。在我`tableView:didSelectRowAtIndexPath:`的表视图委托（正在调用）的方法中，我有以下行：

```
[self.navigationController performSegueWithIdentifier:@"Details" sender:nil]; 
```

运行我的应用程序并点击我的一个单元格时，会引发异常，因为`'Receiver (<UINavigationController: 0x71c65b0>) has no segue with identifier 'Details''`

这里可能出了什么问题？

**编辑**

当我改变

```
[self.navigationController performSegueWithIdentifier:@"Details" sender:nil]; 
```

进入

```
[self performSegueWithIdentifier:@"Details" sender:nil]; 
```

下一个视图被推送，但我收到以下错误：

```
2012-10-19 12:32:05.128 Numbers[44850:c07] nested push animation can result in corrupted navigation bar
2012-10-19 12:32:17.234 Numbers[44850:c07] Finishing up a navigation transition in an unexpected state. Navigation Bar subview tree might get corrupted.
2012-10-19 12:32:17.236 Numbers[44850:c07] Unbalanced calls to begin/end appearance transitions for <DetailViewController: 0x74a1fb0>. 
```

显然，我不应该让我当前的视图控制器完成工作，而是让我的导航视图控制器（这就是它的用途）。使用后退按钮返回会导致奇怪的动画，就像警告警告我一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:46:00.710

只是一个猜测，但您是否有可能连接 segue**并**通过代码触发它？如果没有“特殊”原因，您通常不需要调用`performSegueWithIdentifier:sender`. 相反，只需将您的 tableviewcells 与所需的 segue 连接起来。

但是，**如果**您打电话`performSegueWithIdentifier`，**请不要**接线！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T17:29:41.707

在`Interface Builder`选择`UITableViewCell`. 将其触发的选择连接`segue`到`destinationViewController`. 在您的源代码中`UIViewController`实现`prepareForSegue:`功能并传递`destinationViewController`所有相关信息。无需致电`performSegueWithIdentifier:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T07:23:02.217

只需在您的 didselect 方法中执行此操作

[self performSegueWithIdentifier:@"Details" sender:nil];

我认为您正在其他功能中进行推送，这也是嵌套推送错误或检查情节提要中的推送序列是否正确链接到下一个视图

# php - 如何从 CakePHP 2.2 控制器返回 JSON？

> ID：12962870
> 
> 赞同：8
> 
> 时间：2012-10-18T20:07:17.537
> 
> 标签：php, json, cakephp, controller, cakephp-2.2

我正在调用控制器功能：

```
$.get("http://localhost/universityapp/courses/listnames", function(data){
    alert("Data Loaded: " + data);
}); 
```

在我的控制器中：

```
public function listnames() {
    $data = Array(
        "name" => "Sergio",
        "age" => 23
    );
    $this->set('test', $data);
    $this->render('/Elements/ajaxreturn'); // This View is declared at /Elements/ajaxreturn.ctp
} 
```

在那个视图中：

```
<?php echo json_encode($asdf); ?> 
```

但是，Action 会返回整个页面，包括布局内容（页眉、页脚、导航）。

我在这里想念什么？如何只返回没有布局内容的 JSON 数据？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-07-10T20:43:24.960

设置`autoRender=false`并返回`json_encode($code)`：-

```
public function returningJsonData($estado_id){
    $this->autoRender = false;

    return json_encode($this->ModelBla->find('first',array(
        'conditions'=>array('Bla.bla_child_id'=>$estado_id)
    )));
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T20:15:40.027

您需要像这样禁用布局

```
$this->layout = null ; 
```

现在你的动作会变成

```
public function listnames() {
    $this->layout = null ;
    $data = Array(
        "name" => "Sergio",
        "age" => 23
    );
    $this->set('test', $data);
    $this->render('/Elements/ajaxreturn'); // This View is declared at /Elements/ajaxreturn.ctp
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-19T06:05:06.940

在手册中阅读有关[JsonView](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-24T11:50:55.670

您可以尝试以下任何一种方法来返回 json 响应（我在这里采用了失败案例来返回 json 响应）：

```
public function action() {
    $this->response->body(json_encode(array(
        'success' => 0,
        'message' => 'Invalid request.'
    )));

    $this->response->send();
    $this->_stop();
} 
```

**或者**

```
public function action() {
    $this->layout = false;
    $this->autoRender = false;
    return json_encode(array(
        'success' => 0,
        'message' => 'Invalid request.'
    ));
} 
```

# php - 在同一查询中从表中获取总行数和前 10 行

> ID：12962871
> 
> 赞同：1
> 
> 时间：2012-10-18T20:07:18.477
> 
> 标签：php, mysql

我正在尝试编写一个 mysql 查询，以便我可以检索表的前 10 行并获取同一查询中的总行数。

即结合

```
SELECT * FROM myTable LIMIT 10; // Get First 10 Rows 
```

和

```
SELECT COUNT(*) as cnt FROM myTable // Total Row Count 
```

在同一个查询中。

由于我使用的是 PHP，技术上我可以执行：

```
SELECT * FROM myTable 
```

然后使用 count() 获取总行数，使用 array_slice 获取前 10 个数组元素。

但这听起来效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:10:41.447

```
SELECT SQL_CALC_FOUND_ROWS * FROM myTable LIMIT 10;

SELECT FOUND_ROWS(); 
```

它不完全在一个查询中，但第二个查询总是相同的，它不必再次执行完整的前一个查询，如果它是一个复杂的查询，这很好。

正是`SQL_CALC_FOUND_ROWS`第一个查询中的子句导致计算总记录数，就好像没有添加限制一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:14:20.500

这应该这样做：

```
SELECT (SELECT count(*) FROM TheTable) as ct, TheTable.* FROM TheTable limit 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:09:33.917

```
SELECT COUNT(*),* as cnt FROM myTable group by (anyROW) limit 10 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T20:09:50.277

`SELECT myTable.*, count(*) as count from myTable LIMIT 10;`

# silverlight-4.0 - 如何使 RichTextEditor 不在标记中包含排版内容？

> ID：12962872
> 
> 赞同：0
> 
> 时间：2012-10-18T20:07:19.410
> 
> 标签：silverlight-4.0, silverlight-5.0, rich-text-editor

当我想将文本保存到数据库时，它会将所有这些排版内容添加到其中。有没有办法从我的标记中删除这些排版内容？

这是一个例子

```
<Section xml:space="preserve" HasTrailingParagraphBreakOnPaste="False" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"><Paragraph FontSize="11" FontFamily="Portable User Interface" Foreground="#FF000000" FontWeight="Normal" FontStyle="Normal" FontStretch="Normal" CharacterSpacing="0" Typography.AnnotationAlternates="0" Typography.EastAsianExpertForms="False" Typography.EastAsianLanguage="Normal" Typography.EastAsianWidths="Normal" Typography.StandardLigatures="True" Typography.ContextualLigatures="True" Typography.DiscretionaryLigatures="False" Typography.HistoricalLigatures="False" Typography.StandardSwashes="0" Typography.ContextualSwashes="0" Typography.ContextualAlternates="True" Typography.StylisticAlternates="0" Typography.StylisticSet1="False" Typography.StylisticSet2="False" Typography.StylisticSet3="False" Typography.StylisticSet4="False" Typography.StylisticSet5="False" Typography.StylisticSet6="False" Typography.StylisticSet7="False" Typography.StylisticSet8="False" Typography.StylisticSet9="False" Typography.StylisticSet10="False" Typography.StylisticSet11="False" Typography.StylisticSet12="False" Typography.StylisticSet13="False" Typography.StylisticSet14="False" Typography.StylisticSet15="False" Typography.StylisticSet16="False" Typography.StylisticSet17="False" Typography.StylisticSet18="False" Typography.StylisticSet19="False" Typography.StylisticSet20="False" Typography.Capitals="Normal" Typography.CapitalSpacing="False" Typography.Kerning="True" Typography.CaseSensitiveForms="False" Typography.HistoricalForms="False" Typography.Fraction="Normal" Typography.NumeralStyle="Normal" Typography.NumeralAlignment="Normal" Typography.SlashedZero="False" Typography.MathematicalGreek="False" Typography.Variants="Normal" TextOptions.TextHintingMode="Fixed" TextOptions.TextFormattingMode="Ideal" TextOptions.TextRenderingMode="Auto" TextAlignment="Left" LineHeight="0" LineStackingStrategy="MaxHeight"><Run>Blah text here</Run></Paragraph></Section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:48:10.117

获取你想要摆脱的 xml 并执行

```
 //Match [Prefix][any number of Not =][=]["][any number of Not "]["][ ] <-must have space!!!
            string replace = "Typography[^\\=]*=\"[^\"]*\" ";
            XMLString = Regex.Replace(XMLString, replace, string.Empty); 
```

# regex - 如何使用bash脚本在一行中删除两个HTML标签之间的字符串

> ID：12962875
> 
> 赞同：3
> 
> 时间：2012-10-18T20:07:33.607
> 
> 标签：regex, bash

我最近一直在研究一些简单的`bash`脚本，它解析网页中的特定数据。我曾经`tr '\r\n' ' ' <file1.txt >file2.txt`确保从页面中提取的所有数据都存储在`file1.txt`一行中。那么我需要匹配`<th>...</th>`这一行中标签之间的所有字符串并将它们删除或替换为`' '`符号。所以这里有一些示例代码：

```
 <td>Abaktal hm</td> </tr> <tr> <th>Package</th> <td>flm 10x400 mg</td> <th>Indesit</th> 
```

我已经使用`sed`并尝试过类似的东西

```
 sed -i 's/\<th\>.*?\<\/th\>/ /g' output.txt 
```

但它没有用。我认为问题出在`?`标志上。它适用于`?`登录正则表达式，但可能不适用于`bash`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:51:51.067

虽然我同意 sputnick 和其他人的观点，但您的直接问题的答案是：

```
sed -ir 's/<th>[^<]+<\/th>//g' 
```

这适用于您的示例数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:11:10.877

您的尝试似乎绝对是错误的。

您无法实际解析基于标记的标记语言，例如`HTML`和`XML`使用`Bash`或实用程序，例如`grep`,`sed`或`cut`. 如果您只想转储/渲染`HTML`，请参阅`(links|links2|lynx|w3m) -dump`, `html2text`, `vilistextum`。要解析数据片段，请参阅`tidy+(xmlstarlet|xmllint|xmlgawk|xpath|xml2)`或学习`xslt`。

看

*   [https://blog.codinghorror.com/parsing-html-the-cthulhu-way/](https://blog.codinghorror.com/parsing-html-the-cthulhu-way/)
*   [RegEx 匹配打开的标签，XHTML 自包含标签除外](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-20T10:31:55.403

```
 <td>
     Abaktal hm
 </td>
 <th>
     Package
 </th> 
 <td>
     flm 10x400 mg</td>
 <th> 
     Indesit
 </th> 
```

如果您有这种类型的输入，则以下命令将起作用

sed -n '//{p; ：一个; N; /</th>/!ba; s/.*\n//}; p'输出.txt

它将删除之间的内容

```
 <th>...</th> tags 
```

[有关使用 sed 删除两个模式（不包括在内）之间的线](https://stackoverflow.com/questions/5071901/removing-lines-between-two-patterns-not-inclusive-with-sed)的更多信息

# php - PHP 使用命名空间进行扩展

> ID：12962876
> 
> 赞同：0
> 
> 时间：2012-10-18T20:07:35.490
> 
> 标签：php, namespaces

我是使用命名空间的新手，我正在尝试重写一些旧代码来使用命名空间。

我当前的文件夹结构如下所示：

```
library
| - App
| - - Service
| - - - IService.php
| - MyApp
| - - Service
| - - - Test.php 
```

Test.php 的类过去看起来像这样：

```
class MyApp_Service_Test extends App_Service_IService 
```

但我正在尝试实现命名空间并将其调整为：

```
namespace library\MyApp\Service

class Test extends library\App\Service\IService 
```

但是，这样做我的错误日志显示以下内容：

```
Fatal: Class 'library\MyApp\Service\library\Api\Service\IService' not found 
```

也就是说，我也曾尝试在 IService 中执行以下操作：

```
 namespace library\App\Service

 class IService 
```

并将 Test.php 更改为

```
 class Test extends IService 
```

我知道我做的完全错了，但一些方向将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:11:45.813

您假设文件夹结构和命名空间之间存在关系。那不是真的。命名空间是一种组织类的方法，并且可以在不同的命名空间中定义相同的类名。

也就是说，您可以在类和命名空间之间建立关系。因此，您需要实现一个自动加载器，将命名空间映射到文件夹中。

# android - 如何以编程方式在一行中对齐 Android imageView 和 textView

> ID：12962881
> 
> 赞同：0
> 
> 时间：2012-10-18T20:08:09.250
> 
> 标签：android, alignment

我正在从数据库中提取一些数据，并且需要以项目符号列表的形式显示它。

使用代码：

```
for (int i=0; i<ingredcount; i++){
            String ingredient = recipe.Ingredients.get(i);
            View linearlayout = findViewById(R.id.llIngredients);
            ImageView img = new ImageView(RecipeIngredientsDisplay.this);
            TextView txt1 = new TextView(RecipeIngredientsDisplay.this);
            LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            llp.setMargins(30, 2, 15, 2);
            LinearLayout.LayoutParams llp2 = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
            llp2.setMargins(10, 2, 15, 2);

            img.setLayoutParams(llp2);
            img.setImageResource(R.drawable.dot_purple);
            txt1.setLayoutParams(llp);

            txt1.setText(ingredient);
            ((LinearLayout)linearlayout).addView(img);
            ((LinearLayout) linearlayout).addView(txt1);

        } 
```

我正确显示了所有数据，只是我的图像在新行中，文本在它下面。

所以我想以编程方式为我的图像和文本设置权重，以便它们都在一行中。

通常我使用适配器和膨胀 listView 来执行此操作，但是 ScrollView 中的 scrollView 和 ListView 的组合表现不佳，并且当我有很多成分时会失去焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:24:58.213

您可以将 ImageView 和 TextView 包含在另一个设置为水平的 LinearLayout 中。

```
LinearLayout l = new LinearLayout( this );
l.setLayoutParams( new LinearLayout.LayoutParams( LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT );
l.addView( img );
l.addView( txt1 );
((LinearLayout)linearlayout).addView( l ); 
```

我可能对那个代码有点搞砸了，但你明白了吗？默认情况下，LinearLayout 是水平的，因此您不需要在您创建的新布局中更改它。

# php - 为什么我不能存储来自这个 php 对象的信息？

> ID：12962883
> 
> 赞同：0
> 
> 时间：2012-10-18T20:08:13.307
> 
> 标签：php

我试图从一个名为 的 php 对象中存储一个特定的字符串`$json`，它是来自我调用的 Web 服务的 json_decoded 响应。在调试我的问题的过程中，我回显出我要存储的字符串的序列化版本。这显示`s:12:"392-445-9987";`，这正是我想要的。它是一个长度为 12 的字符串，并且是正确的值。但是，当我尝试将其分配给`$number`代码时，它会死掉并且永远不会到达下一行。

```
if(isset($json->AddressService->response->phones)) {
   echo "<textarea rows=50 cols=100>" . serialize($json->AddressService->response->phones[0]->phone_number) . "</textarea>";
   $number = $json->AddressService->response->phones[0]->phone_number;
   echo "I never reach this line!";
} 
```

我错过了什么？如何将字符串保存到变量中？

非常感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:33:05.317

将其放在它上面，以查看浏览器中回显的 php 错误：

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

# python - 如何在 Python 中替换字符串中的字符，但不使用字符串方法？

> ID：12962896
> 
> 赞同：0
> 
> 时间：2012-10-18T20:08:49.940
> 
> 标签：python, string, replace, character

我刚开始学习 Python，我陷入了这个问题：我有一个 DNA 序列，我需要返回它的互补序列。例如，如果我有`ATTGCA`，它应该返回`TAACGT`。也就是说，替换`A`为`T`、`T`、和。`A`_ 这是一个练习，我不应该使用字符串方法。到目前为止我尝试过的所有事情，都给我“T”作为答案。似乎它只识别第一个字母，然后停止。我该怎么做？`C``G``G``C`

我试过了：

```
>>> def get_complementary_sequence(dna):
    for char in dna:
        if char == 'A':
            return 'T'
        elif char == 'T':
            return 'A'
        elif char == 'C':
            return 'G'
        elif char == 'G':
            return 'C'

>>> get_complementary_sequence('ATTGCA')
'T' 
```

并且还尝试过：

```
def get_complementary_sequence(dna):
    sequence = ""
    for nucleotide in dna:
        if nucleotide == 'A':
            return sequence + 'T'
        elif nucleotide == 'T':
            return sequence + 'A'
        elif nucleotide == 'C':
            return sequence + 'G'
        elif nucleotide == 'G':
            return sequence + 'C'
        return sequence

>>> get_complementary_sequence('ATTGCA')
'T' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:13:57.867

试试字典，这样你也不需要`if`'s和`elif`'s：

```
In [45]: dic={'A':'T','T':'A','C':'G','G':'C'}

In [46]: strs="ATTGCA"

In [47]: ''.join(dic[x] for x in strs)
Out[47]: 'TAACGT' 
```

或使用`map()`：

```
In [52]: ''.join(map(dic.get,strs))
Out[52]: 'TAACGT' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T20:10:34.933

字符串也是一个字符序列，因此您可以遍历它：

```
for char in sequence: 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T20:38:18.180

使用字典的另一种方式，完全没有字符串方法:)

```
trans = {'A':'T','T':'A','C':'G','G':'C'}
with open("temp.txt", "w") as outfile:
    for character in mystring:
        outfile.write(trans[character])
with open("temp.txt") as infile:
    result = infile.read() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T20:21:19.517

这是 Ashwini Chaudhary 的优雅解决方案的等价物，对于初学者来说可能更容易理解：

```
complements = {'A': 'T',
               'T': 'A',
               'C': 'G',
               'G': 'C'}
dna_sequence = 'ATTGCA'
new_sequence = []
for char in dna_sequence:
    new_sequence.append(complements[char])
# new_sequence is now ['T', 'A', 'A', 'C', 'G', 'T']
result = ''.join(new_sequence) # result in 'TAACGT' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-12T05:52:11.050

这个解决方案很容易理解。希望能帮助到你。

```
def get_complement(nucleotide):
    """ (str) ->str
    """

    sequence = ""
    for char in nucleotide:
        if char == "A":
            sequence = sequence + "T"
        if char == "T":
            sequence = sequence + "A"
        if char == "G":
            sequence = sequence + "C"
        if char == "C":
            sequence = sequence + "G"

    return sequence 
```

# python - Python itertools lambda / python 中最好的类似 LINQ 的方法

> ID：12962898
> 
> 赞同：1
> 
> 时间：2012-10-18T20:09:02.050
> 
> 标签：python, itertools

我对python很陌生，但我在C#方面有相当多的经验。我喜欢的一件事是你通过 Linq-Framework 获得的一组工具。因此，我在 Python 中寻找一些等价物，并且似乎有一些尝试。除了我刚刚没有开始工作而且似乎已经死去的 pynq 之外，我发现 itertools 有一些选择可以进入这个方向。但我仍然有问题让它工作。我想要的是目录中不是目录的条目列表。是的，我相信还有很多其他可能更好的方法可以做到这一点，但我想用 itertools 解决这个问题，因为类似的问题也可能出现在其他地方。

```
import os, itertools

listing = os.listdir(".")
filteredfiles = itertools.ifilterfalse(lambda dirContent: os.path.isdir(dirContent), listing)
for f in filteredfiles:
    print "found file: " + f 
```

这给了我目录完整内容的输出。如果我用 ifilter 替换 ifilterfalse，我会得到一个空列表。

我只能猜测它只是不适用于对 os.path.isdir(...) 的复杂调用，但我不确定。

谁能给我一个答案？基本上，正如我上面所说，我只想要一些类似 Linq 的可能性来过滤 Iterables。我不喜欢循环。他们让我头晕目眩。;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:19:37.893

您需要在检查之前创建完整的路径名：

```
os.path.isdir(os.path.join(path, dirContent)) 
```

# javascript - jQuery slideDown 什么时候不起作用，而 slideUp 什么时候起作用？

> ID：12962899
> 
> 赞同：2
> 
> 时间：2012-10-18T20:09:11.260
> 
> 标签：javascript, jquery, animation, dhtml, slidedown

我在使用 slideDown 时遇到问题。元素开始“摇晃”而不是整齐地向下滑动，而不是立即出现而没有动画。另一方面，SlideUp 可以完美运行。

我做了一个jsFiddle：http: [//jsfiddle.net/4x4PK/1/](http://jsfiddle.net/4x4PK/1/)

`+`单击按钮时会出现问题。`×`按钮工作得很好。

有一些JS插件，有`on.('click' ...)`问题的代码一直在底部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:21:49.040

好的，好像我找到了解决方案。问题是我认为 slideDown 函数需要在动画开始之前知道元素的高度（知道动画的端点）。

当我用 after() 添加元素时，现在判断它的高度还为时过早。

*   该元素必须已经插入，否则它的高度为零。
*   该元素必须不可见

最后我找到了这个可行的解决方案：

```
$(this).closest('.smoking-rate').after( $el );
$el.hide().slideDown() 
```

有人可以确认，高度是它不起作用的原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:15:05.113

您应该在 slideUp 动画完成后调用 slideDown：

```
$el.slideUp(1).slideDown('slow') 
```

应该

```
$el.slideUp(1, function(){
  $el.slideDown('slow');
}); 
```

# django - 如何在 Django 中使用会话的中间件中检查 cookie 支持？

> ID：12962906
> 
> 赞同：0
> 
> 时间：2012-10-18T20:09:34.693
> 
> 标签：django, cookies, middleware

我有一个中间件，可以为每个新用户自动创建一个用户帐户并重定向：

```
class LogNewUser(object):

    def process_request(self, request):

        user_id = request.session.get('uid', None)

        if not user_id:
            user = User.objects.create(username=generate_name())
            request.session['uid'] = user.pk
            return redirect(request.path)

        else:
            request.user = User.objects.get(pk=user_id) 
```

当然，如果浏览器禁用了 cookie，这会创建一个无限重定向循环。

我想测试用户是否启用了 cookie，如果是，做我的事情，如果没有，创建一个特定的用户对象，该对象对于所有非 cookie 用户都是相同的。

我尝试了不同的组合，`request.session.set_test_cookie()`但`request.session.test_cookie_worked()`我找不到我想要的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:15:06.567

我意识到挑战在于找到一种方法来表明您已经尝试设置测试 cookie。由于 HTTP 是无状态的，唯一的方法是将信息封装到我们重定向到的 URL 中，然后在中间件中再次捕获它：

```
class LogNewUser(object):

    def process_request(self, request):

        if 'testcookie' in request.path:

            next = request.GET.get('next', '/')

            if not request.session.test_cookie_worked():
                return render(request, 'cookie_error.html')

            request.session.delete_test_cookie()

            user = User.objects.create(username=generate_name())
            request.session['uid'] = user.pk
            return redirect(request.GET.get('next', '/'))

        if not request.user.is_authenticated():

            user_id = request.session.get('uid', None)

            if not user_id:

                request.session.set_test_cookie()
                return redirect('/testcookie/?next=%s' % request.path)

            request.user = User.objects.get(pk=uid) 
```

在此代码中，我们无法为所有非 cookie 用户创建用户对象。这是因为如果不对每个请求进行重定向，这种技术是不可能的，这会杀死 POST 请求。但：

*   我在这里通过将非 cookie 用户重定向到解释问题的模板以及为他们的浏览器打开 cookie 的方法来处理这种情况。
*   如果确实需要，您可以通过[在 URL 查询字符串中使用会话 ID来绕过此问题。](http://www.stereoplex.com/blog/cookieless-django-sessions-and-authentication-with)

# c# - 方法依赖——最佳实践？

> ID：12962910
> 
> 赞同：4
> 
> 时间：2012-10-18T20:09:46.223
> 
> 标签：c#, .net, oop, dependencies

处理方法依赖于执行的属性的最佳方法是什么？

假设您有一个具有 2 个属性的类和一个对这 2 个属性执行某些操作的方法。实例化类，设置属性，然后执行方法会更好（不带参数）；还是实例化类，然后执行方法，传入将设置属性的参数？

例如：

```
class Person ...
    string Name ...
    string Address ...
    void Save() {
        Database.SavePerson(this.Name, this.Address);
    } 
```

- - 或者 - -

```
class Person ...
        string Name ...
        string Address ...
        void Save(string name, string address) {
            this.Name = name;
            this.Address = address;
            Database.SavePerson(this.Name, this.Address);
        } 
```

在第一个示例中，如果在调用 Save 方法之前尚未设置 Name 和 Address，则会出现错误。因此，您似乎必须验证这些属性是否已在方法中设置。

第二个示例强制用户提供执行该方法所需的数据。但是，这似乎有点多余，因为传入的参数已经是对象的属性。

有没有“最好”的方法来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:15:53.557

那么首先我会考虑让实体对其自身的持久性负责是否是您想要的设计。

如果不是，那么一个`Person`实体将公开属性，而另一种类型将负责保存该`Person`实体（例如，如果使用类似 Repository 模式的东西，就会出现这种情况）。

如果实体负责持久化自身（如果您使用丰富的域模型，例如与 CSLA 等框架一起使用的模型），那么您将只有一个无参数`Save`方法，并且如果需要属性，那么某种形式的验证框架会捕捉到任何缺失的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:19:06.630

就个人而言，我两者都不会。您拥有的第一个示例类似于 Active Record，而第二个示例对我来说根本没有意义，如果函数接受参数，那么拥有字段/属性有什么意义？

您的两种方法的问题是`Person`该类公开了您可能不想要的数据库逻辑。

我要做的是使用存储库模式：

```
public class Person
{
    public string Name { get; set; }
    public string Address { get; set; }
}

public class PersonRepository()
{
    public void Add(Person person)
    {
        // do some database stuff
    }
}

// ...

Person person = new Person() { Name = "Jim", Address = "123 Fake Street" };

PersonRepository personRepository = new PersonRepository();
personRepository.Add(person); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:28:19.607

我想到了什么——你用这种方法打破了[单一责任原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。因为您做**了三**件事 - 持久化实体、重命名人员和更改其地址。这从方法的名称中不清楚。这是副作用。

因此，为了告知开发人员您的方法的真正作用，您应该将其重命名为`SaveAndRenameAndRelocate`. 名字不是很好？同意。

因此，我创建了无参数方法来将实体保存在当前状态。

```
public void Save()
{
   // code, which should be somewhere in repository
} 
```

如果您需要重命名人员 - 通过 Name 属性进行。如果您需要更改地址 - 通过地址属性进行。如果不允许保存没有姓名和/或地址的人 - 通过构造函数初始化这些属性：

```
public Person(string name, string address)
{
   // null-check goes here
   Name = name;
   Address = address;
} 
```

顺便说一句，让实体保持自身并不是一个好主意:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:13:31.857

如果参数可以以某种方式推断/解析，或者如果它们永远不会改变，则只让方法无参数。

否则，它会变成一个可怕的[泄漏抽象](http://en.wikipedia.org/wiki/Leaky_abstraction)，您需要了解该方法的工作原理才能使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T20:21:27.120

要么你有一个实例方法，它会自动使用它自己的不带参数的属性，要么你有一个静态方法，它接受传递给它的任何参数

```
public class Person
{
    public string Name { get; set; }
    public string Address { get; set; }

    public void Save()
    {
        Database.SavePerson(Name, Address);
    }

    public static void Save(string name, string address)
    {
        Database.SavePerson(name, address);
    }
} 
```

对象的一般概念是每个对象都对自己的数据负责。但是，一个类可以有一个可以全局使用的静态方法，并且不绑定到任何对象实例。静态方法不能访问实例成员。

* * *

但基本问题是是否应该在`Person`类中包含保存方法。相反，我会将`Database.SavePerson`方法的参数列表更改为

```
public static void SavePerson(Person person) { ... } 
```

并像这样使用它

```
var p = new Person { Name = "John", Address = "Wall Street, NY" };
Database.SavePerson(p); 
```

# c# - 解析浮点数时的 C# Null 引用

> ID：12962915
> 
> 赞同：1
> 
> 时间：2012-10-18T20:10:06.567
> 
> 标签：c#, asp.net

我在下面有以下代码。效果很好，希望我想让 MaxDemand 为空值。但是由于我正在解析一个字符串，如果我不输入一些值，它似乎会出错。

异常详细信息：System.NullReferenceException：对象引用未设置为对象的实例。

实施错误处理解决方案的最佳解决方案是什么？我试过 float.TryParse 但不能让它工作。

感谢您查看我的问题。

```
 protected void GridView3_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
    float Cost = 0.0F; 
    float Consumption = 0.0F;
    int InvoiceID = 0;
    float MaxDemand = 0.0F;
    DateTime ServiceFrom = new DateTime();
    DateTime ServiceTo = new DateTime();

    foreach (string key in e.NewValues.Keys)
        switch (key)
        {
            case "TotalInvoice": Cost = float.Parse(e.NewValues[key].ToString()); 
                                break;
            case "EnergyInvoiceID": InvoiceID = int.Parse(e.NewValues[key].ToString()); 
                                break;
            case "Consumption": Consumption = float.Parse(e.NewValues[key].ToString()); 
                                break;
            case "ServiceFrom": ServiceFrom = DateTime.Parse(e.NewValues[key].ToString());
                                break;
            case "ServiceTo":   ServiceTo = DateTime.Parse(e.NewValues[key].ToString());
                                break;
            case "MaxDemand": MaxDemand = float.Parse(e.NewValues[key].ToString());
                                break;
        }

    UpdateInvoice(InvoiceID, Cost, Consumption, ServiceFrom, ServiceTo, MaxDemand);
    GridView3.EditIndex = -1;
    PopulateAccountHistory();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:13:06.990

如何使用可空类型并检查 e.NewValues[Key] 不为空

```
float? MaxDemand; 
```

进而

```
case "MaxDemand": 
{
   if(e.NewValues[key] != null)
   {
     MaxDemand = float.Parse(e.NewValues[key].ToString());
   }
   break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:13:40.427

这里的问题不在于`float`or`double`值的实际解析。如果失败，它将返回更具体的异常。看来问题是正在返回的返回之一，`e.NewValues[key]`而`null`您正在调用`ToString`

最好`null`在循环开始时集中检查。它还允许您删除对 的重复调用`e.NewValues[key]`。

```
 foreach (string key in e.NewValues.Keys) {
   var value = e.NewValues[key];
   if (value == null) { 
       continue;
   }

   var str = value.ToString();
   switch (key) {
     case "TotalInvoice": 
       Cost = float.Parse(str);
       break;

     ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:18:18.433

从我的`NullableExtensions`：

```
public static T? Parse<T>(object obj)
    where T : struct
{
    if (obj == null) return null;
    try
    {
        return (T)System.Convert.ChangeType(obj, typeof(T));
    }
    catch (FormatException) { return null; }
    catch (InvalidCastException) { return null; }
}

case "TotalInvoice": Cost = NullableExtensions.Parse<float>(e.NewValues[key]); break; 
```

# datagrid - silverlight 4 数据网格中心列标题

> ID：12962916
> 
> 赞同：1
> 
> 时间：2012-10-18T20:10:10.330
> 
> 标签：datagrid, silverlight-4.0

我无法在 silverlight 4 中将列标题居中。

这是我的静态资源：

```
<my:CAddTransaction.Resources>
        <Style x:Name="CenterHeaderText" TargetType="sdk:DataGridColumnHeader">
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
        </Style>
 </my:CAddTransaction.Resources> 
```

这是专栏：

```
 <sdk:DataGridTemplateColumn Header="Include?" HeaderStyle="{StaticResource CenterHeaderText}" >
        <sdk:DataGridTemplateColumn.CellTemplate>
             <DataTemplate>
                   <CheckBox Name="bInclude" IsChecked="{Binding bInclude, Mode=TwoWay}" HorizontalAlignment="Center" VerticalAlignment="Center" />
             </DataTemplate>
        </sdk:DataGridTemplateColumn.CellTemplate>
 </sdk:DataGridTemplateColumn> 
```

结果是列标题左对齐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:57:41.643

这对我有用：

```
<controls:DataGridTextColumn Binding="{Binding Path=Login}" Header="My Column Title" Width="100">
    <controls:DataGridTextColumn.HeaderStyle>
         <Style TargetType="dataprimitives:DataGridColumnHeader">
             <Setter Property="HorizontalAlignment" Value="Center"/>
         </Style>
    </controls:DataGridTextColumn.HeaderStyle>
</controls:DataGridTextColumn> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:32:28.537

如果您仍然需要帮助，这对我来说很好。同样当用户更改列宽时。

```
<DataGridCheckBoxColumn> 
    <DataGridCheckBoxColumn.HeaderStyle> 
        <Style TargetType="DataGridColumnHeader"> 
            <Setter Property="HorizontalContentAlignment" Value="Center"/> 
        </Style> 
    </DataGridCheckBoxColumn.HeaderStyle> 
</DataGridCheckBoxColumn> 
```

# mustache - 文件中的 jQuery mustache.js 模板

> ID：12962921
> 
> 赞同：1
> 
> 时间：2012-10-18T20:10:31.577
> 
> 标签：mustache

是否可以在同一个模板文件中执行此操作：

```
 <script id="events_calendar_template" type="text/html">
    {{#events}}
        <h1>{{EventTitle}}</h1>
        <h2>{{EventDate}}{{#ShowTimes}} - {{EventStartTime}} - {{EventEndTime}}{{/ShowTimes}}</h2>
        <h3>{{CategoryName}}</h3>
        <p>{{EventLongDescription}}</p>
    {{/events}}
    </script>

    <div id="events_calendar_holder"></div> 
```

渲染html：

```
var view = {events:events};

$("#events_calendar_holder").html($.mustache($("#events_calendar_template").html(), view)).hide().fadeIn('slow'); 
```

# javascript - 主干过滤收集和显示

> ID：12962927
> 
> 赞同：1
> 
> 时间：2012-10-18T20:10:38.397
> 
> 标签：javascript, backbone.js

我有一个集合，比如说 20 个项目......我想过滤我的结果并显示其中的 5 个。比方说，索引在 5 到 9 之间。

我的 html

```
{{#each myCol}} <br>
   <div id="{{this.controlName}}"></div>
{{/each}} 
```

到目前为止我的 js

```
var myData = {
    myCol: this.collection.models
};

for ( var i = 5; i < 10; i++) {
    var newCol = this.collection.at(i);
} 
```

很明显，它仍然在绘制所有集合项，而不是我想要发生的索引 5 到 9...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:23:16.147

集合内部`models`只是一个数组，因此您可以使用[`slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：

```
var five_to_nine = this.collection.models.slice(5, 10); 
```

[`toArray`](http://backbonejs.org/#Collection-Underscore-Methods)或者，如果您不想直接访问该集合，您可以将 a加入其中`models`：

```
var five_to_nine = this.collection.toArray().slice(5, 10); 
```

`slice`如果您经常这样做，您还可以将方法添加到您的集合中：

```
var C = Backbone.Collection.extend({
    //...
    slice: function(begin, end) {
        return this.models.slice(begin, end);
    }
}); 
```

然后你可以简单地：

```
var five_to_nine = this.collection.slice(5, 10); 
```

不过，您`five_to_nine`将是一系列模型，因此`toJSON`如果您的模板需要，您必须手动设置它们：

```
var json = _(five_to_nine).map(function(m) { return m.toJSON() }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:18:15.220

也许这样？

```
var newCol = []
for ( var i = 5; i < 10; i++) {
    newCol.push(this.collection.at(i));
}
var myData = {
    myCol: newCol
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T14:22:11.913

对于使用主干过滤集合，最好的方法是获取集合并返回一个子集过滤集合，这也将使您的代码更具可重用性

要制作过滤器，您的集合中应该有一个过滤功能

```
var MyCollection = Backbone.Collection.extend ({
  filtered : function ( min , max) { 
```

我建议使用 UnderScore 过滤器，它将为有效返回 true，为无效返回 false，其中 true 是您要查找的内容。使用 this.models 获取当前集合模型 使用 model.get( '' ) 获取要检查的元素

```
 var results = _.filter( this.models, function ( model ) {           
        if ( model.get('index') >= min && model.get('index') <= max ) 
        return true ; 
        return false ;
    }); 
```

然后使用下划线映射您的结果并将其转换为 JSON

```
 results = _.map( results, function( model ) { return model.toJSON()  } ); 
```

最后返回一个只有结果的新主干集合

```
 return new Backbone.Collection( results ) ; 
```

或者，如果您不想保留集合中的所有数据，而只想保留已过滤的数据，则应重置集合并跳过上面的返回，例如

```
 this.reset( results ) ; 
```

**查看**：调用过滤后的方法并在每个项目上使用 render()

# android - 自定义光标适配器、自定义视图和光标加载器

> ID：12962928
> 
> 赞同：1
> 
> 时间：2012-10-18T20:10:40.517
> 
> 标签：android, android-cursoradapter, android-loader

是否可以将光标加载器与自定义视图（不是列表视图）一起使用？

下面是一个带有列表视图的自定义光标适配器的示例：

```
mMyCursorAdapter = new MyAdapterCursor(getActivity(), null, 0);
setListAdapter(mMyCursorAdapter);
getLoaderManager().initLoader(0, null, this); 
```

我想填充自定义视图而不是列表视图。光标将带回一条记录，该记录将填充视图。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:14:36.760

您不需要适配器来执行此操作，只需直接从光标中获取数据并用它填充视图。

例如：

```
TextView tv = (TextView)findViewById( R.id.my_text_view );
tv.setText( myCursor.getString( myCursor.getColumnIndex( "string_column" ) ) ); 
```

理想情况下，您应该在 onLoadFinished 中执行此操作，一旦您的 CursorLoader 完成加载数据，它就会发生。

# jquery - 如何在jquery中更改选择中的选项文本

> ID：12962931
> 
> 赞同：1
> 
> 时间：2012-10-18T20:10:57.283
> 
> 标签：jquery

我有一个页面包含选择代码如下：

```
<select id="select-choice">
    <option value="0">Please Select</option> 
    <option value="1">red</option> 
    <option value="2">white</option> 
</select> 
```

页面加载完成后，如何将选项 1 的文本从红色更改为绿色？到目前为止，我有以下内容：

```
//following is the code
$('#newoutagePage').live('pageshow', function(event) {
    $('#select-choice[value="1"]').text("green");
} 
```

但它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:12:27.113

您应该选择选项而不是选择框。见[演示](http://jsbin.com/epibab/15/edit)

[jQuery 选择器](http://api.jquery.com/category/selectors/?rdfrom=http://docs.jquery.com/mw/index.php?title=Selectors&redirect=no)

```
 $('#select-choice option[value="1"]').text('green'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:14:51.793

尝试这个

```
$('#newoutagePage').live('pageshow', function(event) {
    $('#select-choice option[value="1"]').text("green");
}
                     ^
                     |
                 Space Here 
```

文本是选项的一部分，而不是整个选择。您需要根据 select.. 中的选项获取文本。

# java - 集合中的老化对象

> ID：12962932
> 
> 赞同：2
> 
> 时间：2012-10-18T20:10:58.007
> 
> 标签：java, collections, queue, priority-queue, cache-expiration

我希望能够对集合中的对象进行老化。

例如，我可以将字符串放入 HashSet。

1.  我想要将字符串放入 HashSet 时关联的时间戳。
2.  我希望从 HashSet 中删除比时间 X 更早的字符串。
3.  我希望能够说“触摸”一个字符串并将时间更新到它被插入到集合中的时间。

因此，我可以通过跟踪每个字符串来完成此操作，然后运行清理线程并从集合中清除字符串（如果它超过某个时间段）。

但是我正在寻找：

1.  要么是一种聪明的方式来做到这一点。
2.  一个现有的开源 Java 组件可以完成此任务。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:13:18.083

听起来你需要一个缓存。从 Guava 或[EhCache](http://ehcache.org/)尝试[`CacheBuilder`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/cache/CacheBuilder.html)（参见[*Caches Explained*](http://code.google.com/p/guava-libraries/wiki/CachesExplained) ） 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T20:12:41.577

[Google Guava](http://code.google.com/p/guava-libraries/)缓存可以满足您的所有要求以及更多！请参阅[缓存解释](http://code.google.com/p/guava-libraries/wiki/CachesExplained)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:13:55.133

我会使用[JCS](http://commons.apache.org/jcs/)，虽然@sjr 真的很喜欢 Guava 的想法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T20:22:09.580

为什么不创建由 a 支持的您自己的 Collection 类（用于房屋清洁任务）`HashMap<String, Date>`？

# jquery - -webkit-transform 旋转和绝对左侧位置

> ID：12962934
> 
> 赞同：1
> 
> 时间：2012-10-18T20:11:05.727
> 
> 标签：jquery, html, css

我有一个通过 jquery 设置旋转 css 样式的函数。我还有另一个函数，它使用相同的 t.css({left:pos}) 设置来设置 div 的左侧位置。这一切都可以在除 Safari 之外的任何浏览器中完美运行。有没有人对此有任何问题。如果我删除旋转样式，则左侧定位有效。当我在 safari 开发人员工具中查看动画时，我可以看到 div 标签上的旋转和左属性都在动态更新，但它不会只渲染位置属性。

```
function rotate(rotation){
t.css({'-webkit-transform': 'rotate('+rotation+'deg)','-moz-transform': 'rotate('+rotation+'deg)','-ms-transform': 'rotate('+rotation+'deg)','-o-transform': 'rotate('+rotation+'deg)','transform': 'rotate('+rotation+'deg)'
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T01:04:09.033

对我来说很好。

```
var rotation = 45;
var t = $('div');

t.css({
    '-webkit-transform': 'rotate('+rotation+'deg)',
    '-moz-transform': 'rotate('+rotation+'deg)',
    '-ms-transform': 'rotate('+rotation+'deg)',
    '-o-transform': 'rotate('+rotation+'deg)',
    'transform': 'rotate('+rotation+'deg)'
}); 
```

​</p>

这是一个小提琴：http: [//jsfiddle.net/YQxBg/1/](http://jsfiddle.net/YQxBg/1/)

请您上传完整的演示，说明它无法正常工作以供我们调查？

# php - 多次显示一个字符串

> ID：12962937
> 
> 赞同：2
> 
> 时间：2012-10-18T20:11:08.927
> 
> 标签：php

我有一个用数字填充的选择框，当我选择一个数字（例如 5）时，我想打印一个字符串 5 次。

这是我到目前为止尝试的代码：

```
<!DOCTYPE HTML>
<html>
<head>
    <style type="text/css">
    .centrer
    {
        position: absolute;
        left: 50%;
        top: 50%;
        font-size:24px;
    }
    </style>

</head>
<body>
    <select name="nombres">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>

   <div class="centrer">
    <?php
        $s = "Hello World! <br/>";
        for($i=0; $i<3; $i++)
            echo $s;
    ?>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:28:26.503

请试试这个：

我们可以使用 javascript 轻松做到这一点。但是你需要在 php.ini 中打印你的字符串。

在使用 javascript 时，我们不需要加载页面。但是在 PHP 中，我们每次选择选择框时都需要加载一个页面。因为 PHP 是服务器端。Javascript是客户端。

干杯...

```
<!DOCTYPE HTML>
<html>
<head>
<script>
function checkIt()
{
    var getNum = document.getElementById("numb").value;

    //this_file.php ... im specifying for just. you specify this full code in any of file and specify the whole url path
    location.href="this_file.php?countIt="+getNum;
}
</script>
    <style type="text/css">
    .centrer
    {
        position: absolute;
        left: 50%;
        top: 50%;
        font-size:24px;
    }
    </style>

</head>
<body>
    <select name="nombres" id="numb" onchange="checkIt();">
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>

<?php
if($_REQUEST["countIt"])
{
    $displayTimes = $_REQUEST["countIt"]; 
}
?>
   <div class="centrer">
    <?php
        $s = "Hello World! <br/>";
        for($i=0; $i<$displayTimes; $i++)
            echo $s;
    ?>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:13:12.707

您必须将表单中的值发回服务器。从那里，您可以按照您认为合适的方式呈现页面。

# php - 将 Twitter 的日期格式转换为日期时间

> ID：12962942
> 
> 赞同：2
> 
> 时间：2012-10-18T20:11:23.183
> 
> 标签：php, date, datetime, twitter, utc

Twitter 的 API 以这种格式踢出日期：

```
Thu, 18 Oct 2012 09:37:01 +0000 
```

对于我的数据库，是否可以使用 PHP 将其转换为日期时间格式？例如

```
2012-10-18 09:37:01 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:14:38.200

```
date( 'Y-m-d H:i:s', strtotime("Thu, 18 Oct 2012 09:37:01 +0000") ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:17:48.003

使用格式中的日期时间对象

```
$date = DateTime::createFromFormat('D, j M Y H:i:s +0000', 'Thu, 18 Oct 2012 09:37:01 +0000');
echo $date->format('Y-m-d H:i:s'); 
```

# php - 梨 / Services_W3C_HTMLValidator 错误？

> ID：12962944
> 
> 赞同：1
> 
> 时间：2012-10-18T20:11:29.640
> 
> 标签：php, pear, w3c-validation

我已经在许多服务器上安装了这个包，但我们现在有一个内部 ubuntu 服务器，我们正在尝试安装这个包。我们已经安装并安装了这个包，因为它确实显示了位于 usr/share/php/Services/W3C/ 中的所有文件但是当我们运行以下代码时。

```
require_once ('Services/W3C/HTMLValidator.php'); 
```

我们收到以下错误。

```
Warning: require_once(Services/W3C/HTMLValidator.php): failed to open stream: No such 
file or directory in /var/www/test.php on line 4 Fatal error: require_once(): Failed
opening required 'Services/W3C/HTMLValidator.php'
(include_path='.:/usr/share/php:/usr/share/php/pear') 
in /var/www/test.php on line 4 
```

有谁知道可能导致此错误的原因。

编辑：经过仔细测试后，我发现我无法从包含路径中包含任何内容，例如 HTTP/Request2.php 也不可用。

我目前正在寻找是否可能有 php 设置或限制阻止这种情况，但我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:41:18.303

您需要正确设置您的[include_path](http://php.net/include_path)。查看PEAR 安装手册中的[这一部分](http://pear.php.net/manual/en/installation.checking.php)。

# c++ - 在网格中设置新值

> ID：12962947
> 
> 赞同：0
> 
> 时间：2012-10-18T20:11:54.070
> 
> 标签：c++

我正在做的运动（生活游戏）有一个奇怪的问题。在代码的中间部分，行 nextgeneration.set(livex, livey, live); 导致程序停止运行。有任何想法吗？

```
int lifeGenerator(Grid<int>& nextgeneration, Grid<int>& birthsanddeaths) {
    for (int deadx = 0; deadx < nrows; deadx++) {
        for (int deady = 0; deady < ncols; deady++) {
            int dead = birthsanddeaths.get(deadx, deady);
            if (dead == -3) {
                nextgeneration.set(deadx, deady, 0);
                }
            }
        }
    for (int livex = 0; livex < nrows; livex++) {
        for (int livey = 0; livey < ncols; livey++) {
            int live = nextgeneration.get(livex, livey);
                if (live > 0 && live < kMaxAge) {
                live++;
                nextgeneration.set(livex, livey, live);// this doesnt work....
                }
            }
        }
    for (int newx = 0; newx < nrows; newx++) {
        for (int  newy = 0; newy < ncols; newy++) {
            int born = birthsanddeaths.get(newx, newy);
            if (born == 3) {
                    nextgeneration.set(newx, newy, 1);
            }
        }
    }
    return 0;
} 
```

# c# - 如何在 Orchard CMS V1.5 中安装 NGM.Forum 模块？

> ID：12962950
> 
> 赞同：0
> 
> 时间：2012-10-18T20:12:25.040
> 
> 标签：c#, asp.net, orchardcms

我们如何在1.5 版中安装`NGM.Forum`模块？`Orchard CMS`问题是`NGM.Forum`已经使用了`RoutePart`，但正如您所知，自 Orchard 1.4 版以来， t 已过时，现在我们在 1.5 版中`RoutePar`没有定义。`RoutePart`

你知道有什么方法可以解决和使用它吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:15:23.520

I am currently in the process of rewriting it to work on the newer version of Orchard.

There were alot of hacks in the early version where it was a proof of concept.

Please go to [http://orchardforums.codeplex.com/SourceControl/list/changesets](http://orchardforums.codeplex.com/SourceControl/list/changesets) Clone the Repo and update to the tip of Default

Nick

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:32:59.027

该模块正在根据[http://orchardforums.codeplex.com/workitem/14](http://orchardforums.codeplex.com/workitem/14)重写。

从[Codeplex 页面](http://orchardforums.codeplex.com)下载最新的源代码并尝试一下，它不再依赖于可路由。

# workflow-foundation-4 - 触发pickbranch或并行序列时延迟不触发

> ID：12962954
> 
> 赞同：1
> 
> 时间：2012-10-18T20:12:31.340
> 
> 标签：workflow-foundation-4

我有一个工作流，托管在工作流服务主机中，它可以具有通过其特定部分的三个路径之一。我使用包含三个 PickBranch 活动的 Pick 活动创建了它。这三个中的两个有一个 ReceiveSendReply 作为触发器，而一个有一个延迟。

此时，我可以通过调用任一接收来使工作流继续，但如果我试图让延迟超时，它永远不会。我还在一个普通的并行活动中尝试过它——同样，任何一个接收都会向前推进工作流程，但延迟永远不会超时/触发。

我读过的所有内容都表明它应该有效，但事实并非如此。我查看了工作流跟踪日志，我可以看到延迟正在执行，但它永远不会回来。

```
146: Activity [160] "Delay Sequence" scheduled child activity [201] "Delay"
147: Activity [201] "Delay" is Executing
{
    Arguments
        Duration: 00:10:00
} 
```

有没有其他方法可以对此进行建模。似乎 Pick 应该做我需要的，但我不能让它工作。为了完整起见，我创建了一个非常简单的应用程序，在其中我用两个接收作为选择分支的触发器和一个延迟作为另一个的触发器来建模它，它在那里工作......

任何帮助/想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:19:45.957

我发现我将 CorrelationInitializer 放置在错误的位置，并且它似乎干扰了延迟的回调机制。一旦我将初始化程序移动到我正在做的正确位置，延迟就开始起作用了。感谢您的意见和帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:46:07.533

工作流程是否持续存在并已卸载？延迟活动会触发这种情况，但如果您没有在服务中运行，您可能必须自己处理工作流的加载，因为它已被卸载。

# groovy - 在 GroovyFX 中查看导航

> ID：12962956
> 
> 赞同：1
> 
> 时间：2012-10-18T20:12:42.683
> 
> 标签：groovy, javafx, groovyfx

我想将 MVVM WPF 应用程序改编为 GroovyFX。我对 Groovy 和 GroovyFX 本身没有太多经验，也没有太多可用的信息。

该设计包括一个主窗口，里面有一个面板。比方说，当用户按下按钮时，应用程序会删除中央面板子项并插入符合目标视图的新“节点树”。

让我们看一些代码

```
import groovyx.javafx.GroovyFX
import groovyx.javafx.SceneGraphBuilder
import static groovyx.javafx.GroovyFX.start
import javafx.fxml.FXMLLoader
import javafx.scene.layout.StackPane;

def controller = new MainWindowController()
def loader = new FXMLLoader(getClass().getResource("gui.fxml"));
def myPane = loader.load();

start
{
    stage(title: "Tasks!", x: 100, y: 100, width: 400, height: 400, visible: true,
        style: "decorated", onHidden: { println "Close"})
    {
        scene(fill: GROOVYBLUE)
        {
            vbox(spacing: 10, padding: 10)
            {
                button(text:"Show!",onAction:{ controller.activityPanel.getChildren().clear() controller.activityPanel.getChildren().add(myPane)})
                controller.activityPanel=stackPane()
            }
        }
     }
} 
```

当用户按下按钮时，位于主窗口内的 stackPane 将接收 myPane 的内容并显示此“视图”。问题是

1.  如何通过代码定义此视图“myPane”？我只找到了 fxml 解决方案。
2.  如果 fxml 是唯一的方法，您是否知道任何有关如何使用 GroovyFX 实例化控制器类并绑定其成员的示例代码？

这个想法类似于 jfx-flow 项目，但在 GroovyFX 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:07:31.410

对于＃2你可以做......

```
fxml resource("/FXMLDemoInline.fxml"), {
    buttonCSSID.onAction {
        labelCSSID.text = "Clicked - CSS";
    }
    buttonFXID.onAction {
        labelFXID.text = "Clicked - FXML";
    }
} 
```

这是[来自演示](https://github.com/groovyfx-project/groovyfx/blob/master/src/demo/groovy/FXMLDemo.groovy)

对于#1，您可以使用`build(Script)`GroovyFX 构建器中的实例方法。就像在 GroovyFX 的 start 方法中一样编写脚本并引用脚本类。

# stored-procedures - 实体框架：从存储过程映射输出参数？

> ID：12962964
> 
> 赞同：3
> 
> 时间：2012-10-18T20:13:13.830
> 
> 标签：stored-procedures, entity-framework-4

我想将存储过程输出参数映射到实体。

例如，

`PROCEDURE ForExample
@ID int,
@LastUpdate datetime OUTPUT
AS
Update EntityTable Set LastUpdate = GETDATE() Where ID = @ID
Select @LastUpdate = LastUpdate From EntityTable Where ID = @ID`

我想将 @LastUpdate 输出参数映射到实体属性。

在“存储过程映射”对话框中，@LastUpdate 参数显示为 InOut 参数（绿色箭头双向）。无论我是否将参数映射到属性，我都会收到相同的错误：

> 映射函数绑定指定具有不受支持参数的函数 Model.Store.ForExample：LastUpdate。输出参数只能通过 RowsAffectedParameter 属性进行映射。使用结果绑定从函数调用返回值。

我尝试在“结果列绑定”中为 LastUpdate 添加手动绑定，但这不起作用。

EF 4 是否支持我正在尝试做的事情，如果支持，它是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T10:48:22.810

As it's said in the error text, "Output parameters may only be mapped through the RowsAffectedParameter property. Use result bindings to return values from a function invocation"

If you want your procedure to return some value, e.g. last update, it should return it via a result set. That means, your stored procedure should look like this:

```
PROCEDURE ForExample
@ID int,
AS
Update EntityTable Set LastUpdate = GETDATE() Where ID = @ID
/*return lastupdate in resultset*/
Select LastUpdate as LastUpdate From EntityTable Where ID = @ID 
```

And than you should map your result set column to lastupdate property like this: ![enter image description here](../Images/77b286dda32b3870afaaa3333d58e617.png)

And stored procedure's output parameters can only be used for optimistic concurrency.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-26T11:08:54.193

这是另一种使用代码而不是设计器的方法：http: [//blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext -api.aspx](http://blogs.msdn.com/b/diego/archive/2012/01/10/how-to-execute-stored-procedures-sqlquery-in-the-dbcontext-api.aspx)

# asp.net - 用于从数据库返回图像的 ASP.NET HTTP 处理程序

> ID：12962968
> 
> 赞同：0
> 
> 时间：2012-10-18T20:13:24.433
> 
> 标签：asp.net

假设我已经从数据库中获取了一个字节数组，我该如何创建一个返回图像的 ASP.NET HTTP 处理程序？

[http://zombies.test/GetImage?id=10](http://zombies.test/GetImage?id=10)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:15:54.533

我在这里问了一个类似的问题：

[使用 HttpHandler 流式传输数据库图像](https://stackoverflow.com/questions/1507572/streaming-databased-images-using-httphandler)

**重要提示：**我最终改用了 DataReader。

# c# - 动态复选框创建-需要限制可以选中的复选框数量

> ID：12962969
> 
> 赞同：0
> 
> 时间：2012-10-18T20:13:26.257
> 
> 标签：c#, .net, checkbox

> **可能重复：**
> [如何让用户在复选框列表中只选择一个复选框](https://stackoverflow.com/questions/1818102/how-to-make-user-select-only-one-check-box-in-a-checkboxlist)

我创建了动态复选框列表，从 XML 读取值并将其填充到复选框列表中，

复选框已正确创建，但我无法选择多个复选框，我希望只能选择一个值，如果我选择 1 然后选择 2，则应该取消选择 1。到目前为止，所有的复选框都可以被选中。

另外，我如何捕获复选框的文本值，因为我需要将它传递给字典项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:57:15.363

如果要使用复选框，请编写一个事件处理程序，以便 oncheckboxselect 取消选择所有其他复选框。

# excel - 如何：在 sheet2 上创建一个 1 列表单，该表单将从 sheet1 中提取数据

> ID：12962970
> 
> 赞同：-1
> 
> 时间：2012-10-18T20:13:25.450
> 
> 标签：excel, excel-formula, vba

我尝试了许多不同的值、排序和过滤器，但我的数据很难重新对齐，所以我认为最好使用我的 Sheet_raw 作为分贝信息，然后从中提取信息为特定格式。这是我的目标，提取的数据将上传到 dB，因此我需要特定格式的数据。

我有两张表（Sheet Raw 和 Sheet Upload）

Sheet Raw 是具有 5 列（标题、类型、标题 2、SN、ID）的原始数据

我想在“工作表上传”上仅在 A 列中输入来自工作表 Raw 的 ID#，它会提取与该特定 ID# 相关的信息并将其放在“工作表上传”的 C、D、E、F 列中...

所以我的练习是，从 Sheet Raw 复制 ID，将 ID# 放在 Sheet Upload 的 A 列中，使用适当的公式，它将从 Sheet Raw 中提取相关数据并将其放在 Sheet Upload 列 C 中， D,E,F...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:59:16.837

1.  去工作表上传
2.  在与 ID# 相同的行中，键入 =vlookup([column where ID],
3.  点击表格
4.  突出显示整个数据集
5.  继续在另一张工作表中键入该公式 =vlookup([column where ID],[you will have a range here you select], FALSE, [type a number to the column number AFTER ID on the sheet RAW that you want to返回]）
6.  按回车
7.  对其余列重复步骤

更多信息在这里：

[查找](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)

# ios - Core Plot Header Search Paths，递归是什么意思？

> ID：12962972
> 
> 赞同：0
> 
> 时间：2012-10-18T20:13:31.653
> 
> 标签：ios, graph, header, core-plot, search-path

尝试`CorePlot`在 iOS 中添加到我的应用程序。使用 Xcode 4.3.3。

我想我成功地完成了除了添加标题搜索路径之外的所有步骤。

大多数教程似乎都是针对旧版本的 xcode。

我把`${PROJECT_DIR}/CorePlot_1.0/Source/framework`我的搜索路径。这就是递归路径的含义吗？

在设置中，它显示 Ad Hoc、Debug 和 Release 框。你需要把同样的东西加三遍吗？

我意识到这个问题是在堆栈溢出时出现的，但是我阅读了其他问题，但我仍然无法弄清楚

现在我收到这个错误“ `CPTAnnotation.h`”文件未找到。在我将搜索路径更改为上面写的内容之前，我收到了一条关于没有找到 CorePlot 本身的消息，所以至少这是一个进步。我在路径“**”之后尝试了两个星号，但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:17:43.353

好的，所以我想通了。您应该在两个星号之前添加一个斜杠。

即 ${PROJECT_DIR}/CorePlot_1.0/Source/framework/**

那很有趣...

我将 CorePlot 文件夹放在与我的项目相同的文件夹中。如果你不把它放在那里，你必须修改路径。

此外，如果您在项目设置中看不到如何添加标题搜索路径，请确保单击顶部栏中的“全部”，而不是“基本”。

# php - ID 数组作为 GET 请求 RESTful API 中的查询参数

> ID：12962977
> 
> 赞同：3
> 
> 时间：2012-10-18T20:13:40.490
> 
> 标签：php, rest, parameters

在过去的几周里，我一直在用 PHP（Laravel 框架）构建一个 RESTful API。我也在构建一个使用这个 API 的 JavaScript 前端（jQuery / Backbone）。

在这个 API 中，有一些 GET 请求需要相当多的查询参数，其中大部分是 ID 数组。我的结构是这样的：

```
/api/cars?colors[]=1&colors[]=3&makes[]=6&makes[]=2&sold=false 
```

（例如 ID=1 的颜色是红色，ID=6 的品牌是奥迪等）

在 PHP 中，从 $_GET['colors'] 解析数组是开箱即用的。另外，当我使用

```
$.ajax({
  url: "someurl",
  method: "GET",
  data: {
    cars: theCarsArray,
    makes: theMakesArray,
    sold: false
  }
}); 
```

似乎也可以正常工作（如上所述，数组是在 URL 中发送的）。我想知道：这是在 REST 接口中发送 ID 数组的公认方法吗？这种方法有什么缺点吗？有哪些替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:04:08.950

以我的经验，这是将数组值传递给 PHP 脚本的公认方式。而且由于您使用的是 PHP，因此您应该利用已有的内容。也就是说，当网页以其他编程语言/框架实现时，通常不会以这种方式传递数组值。在某些情况下，您会看到：

```
/api/cars?colors=1&colors=3&makes=6&makes=2&sold=false 
```

在这些语言/框架中，它们通常提供将请求参数作为标量或数组访问的方法。所以你暴露了你的实现。如果您想隐藏您正在使用 PHP 的事实，您可以将其更改为上述内容，但是您必须添加额外的功能来解析您的请求参数。就像我说的那样，由于您是在 PHP 中实现它，所以我认为利用它提供的开箱即用功能没有任何问题。

我唯一的建议是将您的 url 端点更改为，`/api/cars/`因为您要返回一组汽车（大概），这似乎是更 RESTful 的方法。

不管怎样，只要我的两分钱。希望它有帮助。

# r - R 在使用 paste() 向量时防止重复项目

> ID：12962984
> 
> 赞同：9
> 
> 时间：2012-10-18T20:14:11.420
> 
> 标签：r, paste

考虑以下：

```
a = 1:10
paste("The list is:", a) 
```

结果将是：

```
 [1] "The list is: 1"  "The list is: 2"  "The list is: 3"  "The list is: 4" 
 [5] "The list is: 5"  "The list is: 6"  "The list is: 7"  "The list is: 8" 
 [9] "The list is: 9"  "The list is: 10" 
```

我已经通过以下方式解决了它：

```
paste("The list is:", paste(a, collapse=", "))
# "The list is: 1, 2, 3, 4, 5, 6, 7, 8, 9, 10" 
```

有没有更好的主意？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T21:17:07.167

我想这取决于你想要它的目的。如果您将其粘贴在一起以显示在 R 控制台中，例如作为注释或信息，则`cat()`可以更直观地工作：

```
R> cat("The list is:", a, "\n")
The list is: 1 2 3 4 5 6 7 8 9 10 
```

或者

```
R> cat("The list is:", a, fill = TRUE)
The list is: 1 2 3 4 5 6 7 8 9 10 
```

如果您希望将实际字符串作为 R 对象，我认为您不会比`paste()`您展示的成语简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-25T09:53:16.233

您可以使用：

```
paste(c("The list is:", a), collapse= " ") 
```

# php - 数组映射函数错误

> ID：12962988
> 
> 赞同：1
> 
> 时间：2012-10-18T20:14:27.243
> 
> 标签：php, mysql, arrays, error-handling

我收到一条错误消息，说此代码需要括号，但到目前为止，每次都没有出现问题，这是完整的错误消息：

```
Parse error: syntax error, unexpected T_FUNCTION, expecting ')' 
```

这是我的代码：第一行是错误所在：

```
$escaped_values = join(',', array_map(function($v) {
return "'" . mysql_real_escape_string($v) . "'";
}, array(
$_POST['account_status'],
$activation_key,
$_POST['first_name'],
$_POST['last_name'],
$_POST['email'],
$_POST['username'],
$password,
$_POST['phone_number']
))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:19:52.473

听起来您正在使用不支持闭包的旧版本的 PHP。它们从 PHP 5.3 开始可用

使用老式命名函数的示例：

```
function escape($v)
{
    return "'" . mysql_real_escape_string($v) . "'"; 
}

$escaped_values = join(',', array_map('escape', array(
    $_POST['account_status'],
    $activation_key,
    $_POST['first_name'],
    $_POST['last_name'],
    $_POST['email'],
    $_POST['username'],
    $password,
    $_POST['phone_number']
))); 
```

但是，您最好按照 NullUserException 的建议使用 PDO ...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:31:11.747

[匿名函数](http://php.net/manual/en/functions.anonymous.php)是在 5.3.0 中引入的，所以如果你有旧版本的 PHP，你会遇到这个错误。做你正在做的事情的另一种方法是使用[`create_function()`](http://php.net/manual/en/function.create-function.php)：

```
array_map(create_function('$v', 'return "\'" . mysql_real_escape_string($v) . "\'";')
           , $yourArray) 
```

但更好的选择是使用 PDO 和[参数化查询](http://www.php.net/manual/en/pdo.prepare.php)：

```
// example:
$sth = $dbh->prepare('INSERT INTO your_table
                          (activation_status, first_name, last_name)
                             VALUES (?, ?, ?)');

$params = array($activation_status, $_POST['first_name'], $_POST['last_name']);
$sth->execute($params); 
```

更容易，更清洁和普遍理解。您的参数将自动转义。

# sql - 通过 .net 访问 UniData

> ID：12962989
> 
> 赞同：5
> 
> 时间：2012-10-18T20:14:35.820
> 
> 标签：sql, .net, u2, unidata, u2netdk

我无法从 u2.net 工具包访问 UniData 数据。我可以正常连接 - 已经使用“测试连接工具”测试了连接，并且在代码中，两个连接都可以正常工作。我的问题是当我尝试填充数据集时 - 使用示例代码：我收到此错误：

```
[U2][UCINET][UNIDATA]:You have no privilege on file THENAME 
```

这是代码：

```
 U2Connection con = new U2Connection();
        try
        {
            U2ConnectionStringBuilder conn_str = new U2ConnectionStringBuilder();
            conn_str.UserID = "id";
            conn_str.Password = "pwd";
            conn_str.Server = "srv2";
            conn_str.Database = "DB.XXX";
            conn_str.ServerType = "UNIDATA";
            conn_str.RpcServiceType = "udserver";

            con.ConnectionString = conn_str.ToString();
            con.Open();
            DataTable schema = con.GetSchema();
            U2DataAdapter da = new U2DataAdapter("SELECT * FROM THENAME ", con);
            DataSet ds = new DataSet();
            da.Fill(ds);
        }
        catch (Exception ex)
        {
            string lStr = ex.Message;
        }
        finally
        {
            con.Close(); 
```

还有 1 个注意事项，我有一个 ODBC 连接设置。通过 ODBC，我可以在 SQL Server 链接服务器中使用相同的凭据来成功访问相同的查询。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:40:08.793

默认情况下，UniData***不***授予通过 SQL 访问文件的权限。

您将需要`CONVERT.SQL`从数据库运行以授予文件权限。

`HELP CONVERT.SQL`您可以通过在命令行上运行或[阅读手册](http://www.rocketsoftware.com/u2/products/unidata/resources/manuals/unidata-7.3-documentation)来了解有关该命令的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T03:57:52.583

你能运行 TCL 命令吗？

# 从特权中选择 *；

你在那儿看到 THENAME 吗？例如，请参阅随附的 VOC 文件屏幕截图。

![在此处输入图像描述](../Images/0ba6230b81afa2acc17b29191f0dae7e.png)

![在此处输入图像描述](../Images/8037e16adc842b19df46a14c5cb21f97.png)

# c# - Base-64 字符数组异常的长度无效

> ID：12962992
> 
> 赞同：0
> 
> 时间：2012-10-18T20:14:43.040
> 
> 标签：c#, exception, decode, encode

运行此代码时出现异常，有什么问题

```
 var encoder = new System.Text.UTF8Encoding();
   System.Text.Decoder utf8Decode = encoder.GetDecoder();
   byte[] todecodeByte = Convert.FromBase64String(encodedMsg);
   int charCount = utf8Decode.GetCharCount(todecodeByte, 0, todecodeByte.Length);
   var decodedChar = new char[charCount];
   utf8Decode.GetChars(todecodeByte, 0, todecodeByte.Length, decodedChar, 0);
   var message = new String(decodedChar); 
```

此行出现异常

```
byte[] todecodeByte = Convert.FromBase64String(encodedMsg); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:56:06.293

Base64 编码每个字符编码 6 位。所以字符串的长度乘以 6，必须能被 8 整除。如果不是，那么它没有足够的位来填充每个字节，你会得到这个异常。

很有可能*encodedMsg*不是正确编码的base64 字符串。您可以附加一些 = 字符以绕过异常并查看是否弹出任何可识别的内容。= 字符是 base64 的填充字符：

```
while ((encodedMsg.Length * 6) % 8 != 0) encodedMsg += "=";
// etc... 
```

# hadoop - Hadoop Streaming 虽然一个 Runnable Jar 不产生输出

> ID：12962993
> 
> 赞同：2
> 
> 时间：2012-10-18T20:14:45.497
> 
> 标签：hadoop, hadoop-streaming

我正在尝试通过现有的 java 应用程序流式传输数据，并且作为测试刚刚创建了一个可运行的 jar 以打印到标准输出：

```
public class Myapp {
    public static void main(String[] args) {

        for (int i=0;i<100;i++){
            System.out.println(i);
        }
    }
} 
```

创建罐子后，我可以这样做：

```
> java -jar  myapp.jar a b < input.txt > myout1.txt 
```

并且 myout1.txt 充满了数据。当我在 hadoop 中使用

> hadoop jar /usr/lib/hadoop-0.20-mapreduce/contrib/streaming/hadoop-streaming-2.0.0-mr1-cdh4.0.1.jar -file 'myapp.jar' -numReduceTasks 0 -input "input.txt" -输出“myout.txt”-mapper“java -jar myapp.jar”

作业成功，但 myout.txt/part-* 文件全部为空。从标准输入读取数据没有帮助，这适用于 Python 和 Perl，或者使用带有 map 函数的 java API。通过 jar 流式传输或使用 打印有什么特别之处`System.out.println`吗？

# jquery - 如何设置 Ajax 调用的最短持续时间？

> ID：12962996
> 
> 赞同：2
> 
> 时间：2012-10-18T20:15:00.793
> 
> 标签：jquery, ajax, timeout

我有一个网站，可以进行 ajax 调用，然后加载 gif 以在电视上显示静态。但是现在，ajax 调用并没有花费足够的时间来真正弹出效果。所以我想知道是否有办法设置ajax调用的最短时间？

您可以查看我正在尝试制作[的网站](http://www.uvm.edu/~areid/test/demo.html)，以便更好地了解我在做什么。尝试单击右侧的相框或桌子上的留声机。

```
 <script type="text/javascript">
    var minDelay = 1000;
    var start = new Date();
    $.get("form.html", function(result) {
        callback($(result).find("#contact"));
        var end = new Date();
        var timeInMilliseconds = end - start;
        if (timeInMilliseconds  < minDelay) {
            setTimeout(function() { callback(result); }, minDelay - timeInMilliseconds );
        }
        else callback(result);
    });
    $.get("music.html", function(result) {
        callback($(result).find("#music"));
        var end = new Date();
        var timeInMilliseconds = end - start;
        if (timeInMilliseconds  < minDelay) {
            setTimeout(function() { callback(result); }, minDelay - timeInMilliseconds );
        }
        else callback(result);
    });

    function callback(result) {
        $("#screen").html(result);
    }
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:20:25.227

您可以为起点和终点计时，然后在低于某个阈值时添加另一个延迟（使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)）。像这样的东西：

```
var minDelay = 1000;
var start = new Date();
$.get(url, function(result) {
    var end = new Date();
    var timeInMilliseconds = end - start;
    if (timeInMilliseconds  < minDelay) {
        setTimeout(function() { callback(result); }, minDelay - timeInMilliseconds });
    }
    else callback(result);
});

function callback(result) {
    // Ajax response handling here ...
} 
```

* * *

**编辑**我不确定您是否可以使用 JQuery 来实现这一点`load`（根据[文档](http://api.jquery.com/load/)，目标会在从服务器收到响应后立即更新）。我建议将`load`调用转换为`gets`. 即，这个：

```
$("#screen").load("form.html #contact"); 
```

应该变成这样：

```
$.get("form.html", function(result) {
    callback($(result).find("#contact"));
}); 
```

然后我上面编写的`callback`函数应该填充`load`.

```
 function callback(html) {
     $("#screen").html(html);
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:19:23.213

您可以使用`setTimeout()`ajax回调方法中的方法来模拟延迟吗？很酷的网站顺便说一句！

示例代码：

```
var minDelay = 500;//half a second
setTimeout(DelayTimePassed, minDelay);
//make Ajax Call

function DelayTimePassed()
{
if(dataAvailable)
//show Data
else
//show data as soon as available
}

function AjaxCallback()
{
if(showDataAsSoonAsAvailable)
//Show Data Now
else
dataAvailable=true;//show data after time delay passes
} 
```

希望这对您有意义 - 两种方法检查几个全局 bool 变量来决定何时显示数据。

# collision-detection - 与复杂几何体碰撞和滑动球体

> ID：12962999
> 
> 赞同：2
> 
> 时间：2012-10-18T20:15:11.327
> 
> 标签：collision-detection, game-physics, typescript

我可以使用一些帮助来确定碰撞响应。我正在尝试在幻灯片 4 到 10 上实现[本文中介绍的](http://cs.brown.edu/courses/cs195u/lectures/lecture6.pdf)内容。碰撞检测有效，碰撞实体**确实**沿着碰撞平面滑动，但速度严重降低。我不确定我是否正确地将剩余速度投影在碰撞平面上。

```
class CollisionPacket {
    // INPUT:
    colliderRadius: vec3;
    colliderPosition: vec3;
    colliderVelocity: vec3;

    // OUTPUT:    
    collisionFound: bool;
    collisionTime: number;  // how far can we travel before we collide?
    collisionPoint: vec3;   // point on triangle where collision ocurred
    collisionNormal: vec3;  // normal of nearest collided triangle
}

collideAndSlide(position: vec3, velocity: vec3, radius: number): vec3 {
    var packet = new CollisionPacket();

    packet.colliderRadius = radius;
    packet.colliderPosition = position;
    packet.colliderVelocity = velocity;

    packet.collisionTime = 0.0;
    packet.collisionFound = false;

    var maxIterations = 5;

    do {
        // check nearby triangles for collisions
        this.collideWorld(packet);

        var newPosition = packet.colliderPosition.copy();
        var newVelocity = packet.colliderVelocity.copy();

        if (packet.collisionFound) {
            // scale velocity vector to collide with nearest triangle
            var scaledVelocity = packet.colliderVelocity.copy().scale(packet.collisionTime);

            // move a tiny bit away from collision along collision normal
            scaledVelocity.add(packet.collisionNormal.copy().scale(0.001));

            // add scaled velocity to position
            newPosition.add(scaledVelocity);

            // and remove it from leftover velocity
            newVelocity.subtract(scaledVelocity);

            // extract part of velocity vector which is perpendicular to collision plane (CORRECT?)
            var v = packet.collisionNormal.copy().scale(vec3.dot(newVelocity, packet.collisionNormal));

            // remove that part from velocity vector
            newVelocity = vec3.difference(newVelocity, v);

            // update values for next iteration
            packet.colliderPosition = newPosition;
            packet.colliderVelocity = newVelocity;
        }
        else {
            // no collision, move as requested
            newPosition.add(packet.colliderVelocity);
        }
    } while (--maxIterations > 0 && packet.collisionFound)

    return newPosition;
} 
```

*在从v*中减去 v之后，我将*v*和*newVelocity*都可视化了，它们看起来应该是这样的：*v*垂直于碰撞平面，*newVelocity*在我们移动的方向上平行于它。

 ***如果我将*newVelocity*直接添加到*newPosition*而不是进行递归，如下所示：

```
 ...

                // remove that part from velocity vector
                newVelocity = vec3.difference(newVelocity, v);

                newPosition.add(newVelocity);
        }
        else {
                // no collision, move as requested
                newPosition.add(packet.colliderVelocity);
        }
    } while (false) 
```

实体正在滑动，没有减速，所以我很确定向量是好的。

然而，*maxIterations*总是跑到零，所以总是有冲突。也许这会减慢速度？

对基础数学有更好理解的人会看看吗？

谢谢！

**编辑：**

第一次迭代后的向量说明：

![在此处输入图像描述](../Images/887ed17aa328bc5a31f8d61595c1eaee.png)

盒子与墙壁发生碰撞（由于背面剔除，此屏幕截图中不可见）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:15:25.450

发现问题：我忘记在每次迭代开始时重置 packet.collisionTime，这让一切都变慢了。它现在按预期工作。也许代码对其他人有帮助。***