# StackOverflow 问答 14101000-14101999

# java - 在java中的浏览器中打开超链接？

> ID：14101000
> 
> 赞同：1
> 
> 时间：2012-12-31T11:30:51.790
> 
> 标签：java, swing, hyperlink, awt, jbutton

有没有办法设置`ac.getPage()`为点击时在浏览器中打开的超链接？`ac.getPage()`返回 a`string`这是一个人博客的 url 的实际事实。我尝试附加以下内容`java.awt.Desktop.getDesktop().browse(java.net.URI.create(ac.getPage())`并且错误说`void`是不允许的？我该如何纠正这个？

```
pageLabel.setText("Page:    " + ac.getPage()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:28:11.097

您可以使用 JTextPane 而不是 JLabel，

```
JTextPane pageLabel = new JTextPane();
pageLabel.setEditable(false);
pageLabel.setText("<html>Page: <a href='http://eo.wikipedia.org/'>vikipedio</a>"):
pageLabel.addHyperLinkListener(new HyperLinkListener() {
    @Override
    public hyperlinkUpdate(HyperlinkEvent event) {
        if (event.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
            String url = event.getURL().toString();
            Desktop.getDesktop().browse(URI.create(url));
        }
    }
}); 
```

# iphone - 使用点击手势识别器传递参数

> ID：14101004
> 
> 赞同：1
> 
> 时间：2012-12-31T11:30:59.313
> 
> 标签：iphone, ios, argument-passing, uitapgesturerecognizer

以前曾以某种形式提出过这个问题，但我找不到适用于我情况的答案。

简而言之：我正在为我的应用程序构建一个画廊模块。它由几个部分组成，每个部分中有许多缩略图。基本原则是图像查看器模块根据用户所在的部分以及他或她点击的缩略图以模态方式启动和呈现。看起来很简单；我所需要的只是在图像查看器初始化时传递两个 int 变量（一个用于部分，一个用于图像），一切都是 hunky-dory。

问题是 UITapGestureRecognizer 不能直接调用方法。它使用选择器，我无法通过它传递参数，更不用说两个了。我正在寻找的是这样的：

```
[thumbnail004 setUserInteractionEnabled:YES];
UITapGestureRecognizer *tap004 = [[UITapGestureRecognizer alloc] 
                       initWithTarget:self
                       action:@selector(imageTappedWithSectionNumber:6
                                                      andImageNumber:4)];
[thumbnail004 addGestureRecognizer:tap004]; 
```

使用 UITapGestureRecognizer 时，有没有办法直接使用参数调用方法？

如果没有，解决此问题的一种明显方法是为每个图像点击创建单独的方法，例如：

```
- (void) image1_1Tapped { 
  // View initialization by passing 1 and 1
  }
- (void) image1_2Tapped { 
  // View initialization by passing 1 and 2
  }
And so on... 
```

这是可能的，因为图像库不是动态的，但是，它将是世界上最丑陋的代码，我想不惜一切代价避免它。

必须有一种方法可以使用干净优雅的代码来做到这一点......！

供进一步参考： 1.我不使用IB；我以编程方式做所有事情。2.传递一个参数是不够的；我真的需要通过两个。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T11:45:21.937

`associated object`一起使用`pass argument`_`tap gesture instance.`

请参阅[objective-c-associated-objects](http://labs.vectorform.com/2011/07/objective-c-associated-objects/)链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T11:44:04.693

手势识别器只会将一个参数传递给动作选择器：它自己。我假设您正在尝试区分对主视图的各种图像子视图的点击？在这种情况下，最好的办法是调用 -locationInView:，传递超级视图，然后在该视图上调用 -hitTest:withEvent: 并生成 CGPoint。

# android - 帧动画失败，超过 5 帧 - 240dpi

> ID：14101005
> 
> 赞同：1
> 
> 时间：2012-12-31T11:31:00.250
> 
> 标签：android, animation, frame

我有一个 135 帧的帧动画，每秒应该交换 25 次。帧为 700X1000 像素，240 dpi。我遇到的问题是，每当我在 XML 动画文件中定义超过 5 帧时，应用程序就会崩溃。框架位于可绘制文件夹中。我尝试将它们复制到 drawable-xhdpi 但这并没有解决问题。

谢谢，西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:02:42.310

该错误清楚地表明您正在尝试使用更多内存。这直接指向图像大小。因此，您需要调整图像大小以使用更少的内存。出于这个原因可以使用的一个是[BitmapFactory.Option](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)。或者手动调整图像大小，注意它是否适合您的所有需求。

> 堆大小是分配给应用程序执行的内存量。android 应用程序的堆大小由设备 RAM 决定。例如，如果设备的 RAM 为 179 MB，则 android 应用程序只会获得 18MB 的堆大小。

[在这里](http://www.mindfiresolutions.com/Memory-Optimization-2040.php)找到更多。有关如何有效加载大型位图的更多信息，请参见[此处](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:03:05.520

加载图像会消耗 32MB 或 64MB 的所有堆内存（应用程序可用的内存）的问题。图像作为 ARGB 中的位图加载到堆中 - 每个像素 4 个字节。尝试对动画图像进行二次采样。您的动画有 135*700*1000*4 字节 = 360.5 MB。

您可以将方法*decodeResource*与 BitmapFactory.Options opts 一起使用，该方法具有参数[inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)，您可以在其中设置图像的子采样。也可以使用参数[inPreferredConfig](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inPreferredConfig)来设置 RGB_565 而不是 ARGB_8888，以防您不需要图像的透明度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:58:27.400

正如堆栈跟踪所说，它导致 OutOfMemory 错误。由于帧具有更高的分辨率并且帧数也更多，所以它给出了这个例外。

# android - 自动显示 EditText 的自定义键盘。安卓

> ID：14101008
> 
> 赞同：6
> 
> 时间：2012-12-31T11:31:05.773
> 
> 标签：android, keyboard

我想在我的 android 应用程序中制作自定义键盘并为特定的 EditText 显示它。
我已阅读文档并发现，我需要扩展 InputMethodService 类。但是我没有找到如何为某些 EditText 自动显示这个键盘。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T11:38:58.117

有一个例子`Android SDK`

加载那个 Android 项目

> 新建 --> Android 示例项目 --> 软键盘

要为特定的编辑文本框显示键盘，您需要覆盖`OnTouchlistener`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T13:12:27.903

我在这里找到了我想要的解决方案：http: [//www.infiniterecursion.us/2011/02/android-activity-custom-keyboard.html](http://www.infiniterecursion.us/2011/02/android-activity-custom-keyboard.html)

# java - Maven 依赖引用旧的 Poi 版本

> ID：14101015
> 
> 赞同：3
> 
> 时间：2012-12-31T11:31:51.293
> 
> 标签：java, jakarta-ee, maven, classpath, apache-poi

我在我的 POM 中使用 Apache Poi 3.8 版。但由于某些内部依赖性，它仍在下载 poi-3.2 和 poi-3.8（可能是）。对我来说奇怪的行为是我的项目使用 poi-3.2，即使我在 POM 中提到了 3.8 版本。我用谷歌搜索了很多相同的东西，但发现自己很不走运。这是我的 POM 条目：

```
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>poi</artifactId>
    <version>3.8</version>
    <type>jar</type>
</dependency> 
```

我已经通过代码检查了我的项目在类路径中使用的 poi jar：

```
 ClassLoader classloader =
               org.apache.poi.poifs.filesystem.POIFSFileSystem.class.getClassLoader();
            URL res = classloader.getResource(
                         "org/apache/poi/poifs/filesystem/POIFSFileSystem.class");
            String path = res.getPath();
            System.out.println("Core POI came from " + path); 
```

这打印：

```
Core POI came from file:/D:/Software/Softwares/apache-tomcat-6.0.33/webapps/scd-web/WEB-INF/lib/poi-3.2.jar!/org/apache/poi/poifs/filesystem/POIFSFileSystem.class 
```

同一文件夹中有一个 poi-3.8.jar，但类路径选择 3.2。

**我的问题是：** 我应该怎么做才能让我的项目使用 poi-3.8.jar 而不是 poi-3.2.jar。

非常感谢 ！！

**编辑：** 输出`mvn dependency:tree`

```
 [INFO] Building SCD-common [INFO]    task-segment: [dependency:tree]
 [INFO]
 ------------------------------------------------------------------------ 
 [WARNING] While downloading xmlbeans:xmlbeans:2.3.0   This artifact has been relocated to org.apache.xmlbeans:xmlbeans:2.3.0.
 [INFO] [dependency:tree] [INFO] com.idc:scd-common:jar:4.2.0.5 
 [INFO]  +- org.springframework:spring-webmvc:jar:2.5.6:compile 
 [INFO]  |  +- commons-logging:commons-logging:jar:1.1.1:compile 
 [INFO]  |  +- org.springframework:spring-beans:jar:2.5.6:compile 
 [INFO]  |  +- org.springframework:spring-context-support:jar:2.5.6:compile 
 [INFO]  |     \- org.springframework:spring-web:jar:2.5.6:compile 
 [INFO]  +- com.idc.worldwide.keystones:service-single-signon-dynamo-api:jar:1.0:compile 
 [INFO]  +- com.idc.worldwide.keystones:service-single-signon-dynamo-database-impl:jar:1.0.3:compile 
 [INFO]  |  +- org.apache:commons-dbcp:jar:1.2.2:compile 
 [INFO]  |  +- org.apache:commons-pool:jar:1.4:compile 
 [INFO]  |  \- com.idc.worldwide.webchannel:sage-core:jar:3.2.0.001:compile 
 [INFO]  |     +- com.idc.webchannel.legacy.sage-dependencies:aspose-slides:jar:1\. 0:compile 
 [INFO]  |     +- com.servlets:cos:jar:09May2002:compile
 [INFO]  |     +- com.sun:jai_codec:jar:1.1.3:compile 
 [INFO]  |     +- com.sun:jai_core:jar:1.1.3:compile 
 [INFO]  |     +- com.verity:k2:jar:5.00.3177.0:compile 
 [INFO]  |     +- org.apache:poi:jar:3.2:compile 
 [INFO]  |     +- org.apache:poi_contrib:jar:3.2:compile 
 [INFO]  |     +- org.apache:poi_scratchpad:jar:3.2:compile 
 [INFO]  |     \- org.springframework:spring:jar:2.5.6:compile 
 [INFO]  +- org.springframework:spring-core:jar:3.0.5.RELEASE:compile 
 [INFO]  |  \- org.springframework:spring-asm:jar:3.0.5.RELEASE:compile 
 [INFO]  +- org.springframework:spring-aop:jar:3.0.5.RELEASE:compile 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:46:18.477

有[各种 mvn 命令](http://maven.apache.org/plugins/maven-dependency-plugin/usage.html)可以帮助解决这个问题：

`mvn dependency:analyze-dep-mgt`

将打印有关依赖关系解析的详细信息。

`mvn dependency:tree`

将打印依赖关系树（非常有助于查看依赖项的依赖关系）

[`mvn help:effective-pom`](http://maven.apache.org/plugins/maven-help-plugin/effective-pom-mojo.html)

将打印由您的 pom 层次结构合并产生的 pom。

如果您在 maven 中没有找到任何对 poi-3.2 的引用，您可以在 IDE 中查看您的类路径。你添加任何 jar 绕过 maven 吗？

使用这些命令的结果编辑您的问题可能有助于我们为您提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:44:39.793

跑

```
mvn dependency:tree 
```

检查哪个库对 poi 3.2 具有传递依赖。然后你可以在你的 pom.xml 中排除它。

```
<dependency>
  <groupId>sample.group</groupId>
  <artifactId>sample-artifactB</artifactId>
  <version>1</version>
  <exclusions>
    <groupId>org.apache.poi</groupId>
<artifactId>poi</artifactId>
   </exclusion>
  </exclusions>
</dependency> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T12:36:20.280

好像

```
org.apache:poi:jar:3.2 
```

是一个编译依赖

```
com.idc.worldwide.keystones:service-single-signon-dynamo-database-impl 
```

（虽然我认为你可能剪掉了一些东西）

和

```
org.apache.poi:poi:jar:3.8 
```

不是依赖项（它不在依赖项树中）。

确保您的`<dependency>`条目在`<dependencies>`标签内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T11:40:32.133

也许您将正常依赖与插件依赖混合在一起，请参见[此处](https://stackoverflow.com/questions/11254356/maven-dependency-management-for-plugin-dependencies)（不太合适的答案）。

如果您有子项目，请在根 POM 中使用依赖管理。

# asp.net - radlistview 中的链接按钮问题

> ID：14101016
> 
> 赞同：0
> 
> 时间：2012-12-31T11:31:58.393
> 
> 标签：asp.net

我创建了一个 radlistview 并将其与 objectdatasource 绑定，并在 radlistview 中定义了一个链接按钮，并将链接按钮文本绑定到 radlistview 中的多列以在我的 radlisview 中显示多行。

现在我希望当用户单击链接按钮时，将用户单击的**一行**radlistview 设置为会话，以便我可以在其他页面中使用它。

我在 radlistview itemdatabound 事件或 radlistview itemcommand 事件中定义了选定的项目，但这些事件不会触发。请帮助我。我的代码是：

```
<asp:LinkButton ID="lbl1" runat="server" 
  OnClick="linqbutton1_Click"
  CommandName="Select" CommandArgument='<%# Container.DataItemIndex %>' 
     Text='<%#"&nbsp;&raquo;"+"buy"+" "+Eval("MelkType")+" "+Eval("MelkSize")+" meter"+" "+Eval("Melkregion") %>'
    style="margin-right:0px;direction:rtl;margin-top:20px; ">
  </asp:LinkButton>

<br />
<br />
</ItemTemplate>
</telerik:RadListView>
    <asp:ObjectDataSource ID="ObjectDataSource2" runat="server" 
        SelectMethod="RentalApartmentGet" TypeName="mymelkclass">
    </asp:ObjectDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:32:42.100

您应该在选择后提取值服务器端，我认为这是演示接近您需要的： http: [//demos.telerik.com/aspnet-ajax/listview/examples/selecting/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/listview/examples/selecting/defaultcs.aspx)

# c# - C#'未分配的局部变量'？

> ID：14101017
> 
> 赞同：2
> 
> 时间：2012-12-31T11:32:06.767
> 
> 标签：c#, visual-studio, variables, console

我试图制作一段代码，它最终会掷骰子来决定哪个角色获胜，并且一直说有错误（使用未分配的局部变量' **skillmodifier** '）&（使用未分配的局部变量' **strengthmodifier** ' ）。我真的很感激任何帮助。PS我只在Visual Studio 2010上做了很短的时间编程。请帮我找到解决这个问题的方法，出现问题是因为我**使用**了**变量**' **strengthmodifier** '和' **skillmodifier** '**两次**。谢谢你，你忠实的，维卡什。我将粘贴下面的任务 breif 和之后的代码：

**任务 3 确定遭遇的结果** 当两个角色之间发生遭遇时，结果由以下过程确定：

• 计算两个角色的强度属性之间的差异

• 这个差值除以 5，然后向下取整以创建“强度修正”</p>

• 对技能属性重复该过程以创建“技能修饰符”</p>

• 每个玩家投掷一个 6 面骰子。

• 如果两个骰子的分数相同，则不做任何更改

• 如果分数不同，则得分最高的玩家将“力量修正”添加到其角色的力量值和“技能修正”到其角色的技能值

• 骰子得分较低的玩家从其角色的力量和技能值中减去这些修正值

• 如果技能值变为负数，则将其存储为零

• 如果力量值变为零或负数，则角色死亡。

**该计划应：**

* *• 允许用户输入两个角色的力量和技能。*

*• 使用上述过程显示遭遇的结果。设计一个算法来描述这个过程。编写、测试和评估代码。**

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

        namespace Task3
       {
         class Program
          {

            static void loopfsto()
             {

            Console.WriteLine("Please enter a value of strength, and then press enter");
            string csto = Console.ReadLine(); // Read string from console
            int csto1;
            if (int.TryParse(csto, out csto1)) // Try to parse the string as an integer
            {
                Console.WriteLine("Your chosen number is " + csto1 + ".");
                Console.ReadKey();
            }
            else
            {
                Console.Clear();
                Console.WriteLine("Not an integer!");
                Console.ReadKey();
                Console.Clear();
                loopfsto();
            }
        }

        static void loopfsko()
        {
            Console.WriteLine("Please enter a value of skill, and then press enter");
            string csko = Console.ReadLine(); // Read string from console
            int csko1;
            if (int.TryParse(csko, out csko1)) // Try to parse the string as an integer
            {
                Console.WriteLine("Your chosen number is " + csko1 + ".");
                Console.ReadKey();
            }
            else
            {
                Console.Clear();
                Console.WriteLine("Not an integer!");
                Console.ReadKey();
                Console.Clear();
                loopfsko();
            }
            Console.Clear();
        }

        static void loopfstt()
        {
            Console.WriteLine("Please enter a value of strength for, and then press enter");
            string cstt = Console.ReadLine(); // Read string from console
            int cstt1;
            if (int.TryParse(cstt, out cstt1)) // Try to parse the string as an integer
            {
                Console.WriteLine("Your chosen number is " + cstt1 + ".");
                Console.ReadKey();
            }
            else
            {
                Console.Clear();
                Console.WriteLine("Not an integer!");
                Console.ReadKey();
                Console.Clear();
                loopfstt();
            }
            Console.Clear();
        }

        static void loopfskt()
        {
            Console.WriteLine("Please enter a value of skill for, and then press enter");
            string cskt = Console.ReadLine(); // Read string from console
            int cskt1;
            if (int.TryParse(cskt, out cskt1)) // Try to parse the string as an integer
            {
                Console.WriteLine("Your chosen number is " + cskt1 + ".");
                Console.ReadKey();
            }
            else
            {
                Console.Clear();
                Console.WriteLine("Not an integer!");
                Console.ReadKey();
                Console.Clear();
                loopfskt();
            }

        }

        static void Main(string[] args)
        {

            string Character1;
            string Character2;
            int strengthmodifiertoround;
            int skillmodifiertoround;
            int strengthmodifier;
            int skillmodifier;
            Console.Title = "Strength and Skill";

            Console.WriteLine("Welcome to Strength and Skill, please press enter to continue.");
            Console.ReadKey();
            Console.Clear();

            Console.WriteLine("Please enter a name for character 1, then press enter.");
            Character1 = Console.ReadLine();
            Console.Clear();

            Console.WriteLine("Please enter a name for character 2, then press enter.");
            Character2 = Console.ReadLine();
            Console.Clear();

            Console.WriteLine("Please enter a value of strength for " + Character1 + ", and then press enter");
            string csto = Console.ReadLine(); // Read string from console
            int csto1;
            if (int.TryParse(csto, out csto1)) // Try to parse the string as an integer
            {
                Console.WriteLine("Your chosen number is " + csto1 + ".");
                Console.ReadKey();
            }
            else
            {
                Console.Clear();
                Console.WriteLine("Not an integer!");
                Console.ReadKey();
                Console.Clear();
                loopfsto();
            }

            Console.Clear();

            Console.WriteLine("Please enter a value of skill for " + Character1 + ", and then press enter");
            string csko = Console.ReadLine(); // Read string from console
            int csko1;
            if (int.TryParse(csko, out csko1)) // Try to parse the string as an integer
            {
                Console.WriteLine("Your chosen number is " + csko1 + ".");
                Console.ReadKey();
            }
            else
            {
                Console.Clear();
                Console.WriteLine("Not an integer!");
                Console.ReadKey();
                Console.Clear();
                loopfsko();
            }
            Console.Clear();

            Console.WriteLine(Character1 + " has a strength of " + csto1 + " and a skill of " + csko1 + ".");
            Console.ReadKey();
            Console.Clear();

            Console.WriteLine("Please enter a value of strength for " + Character2 + ", and then press enter");
            string cstt = Console.ReadLine(); // Read string from console
            int cstt1;
            if (int.TryParse(cstt, out cstt1)) // Try to parse the string as an integer
            {
                Console.WriteLine("Your chosen number is " + cstt1 + ".");
                Console.ReadKey();
            }
            else
            {
                Console.Clear();
                Console.WriteLine("Not an integer!");
                Console.ReadKey();
                Console.Clear();
                loopfstt();
            }
            Console.Clear();

            Console.WriteLine("Please enter a value of skill for " + Character2 + ", and then press enter");
            string cskt = Console.ReadLine(); // Read string from console
            int cskt1;
            if (int.TryParse(cskt, out cskt1)) // Try to parse the string as an integer
            {
                Console.WriteLine("Your chosen number is " + cskt1 + ".");
                Console.ReadKey();
            }
            else
            {
                Console.Clear();
                Console.WriteLine("Not an integer!");
                Console.ReadKey();
                Console.Clear();
                loopfskt();
            }
            Console.Clear();

            Console.WriteLine(Character2 + " has a strength of " + cstt1 + " and a skill of " + cskt1 + ".");
            Console.ReadKey();
            Console.Clear();
//--- Finds out if strength for character 1 is higher than 2 or vice versa. Then finds difference between two and makes a variable called strengthmodifier ---//

            {
                if (csto1 < cstt1)
                {
                    strengthmodifiertoround = cstt1 - csto1;
                    strengthmodifier = strengthmodifiertoround / 5;   
                }
                if (cstt1 < csto1)
                {
                    strengthmodifiertoround = csto1 - cstt1;
                    strengthmodifier = strengthmodifiertoround / 5;
                }
            }
//--- Finds out if skill for character 1 is higher than 2 or vice versa. Then finds difference between two and makes a variable called skillmodifier ---//

            {
                if (csko1 < cskt1)
                {
                    skillmodifiertoround = cskt1 - csko1;
                    skillmodifier = skillmodifiertoround / 5; 
                }
                if (cskt1 < csko1)
                {
                    skillmodifiertoround = csko1 - cskt1;
                    skillmodifier = skillmodifiertoround / 5;
                }
            }
//--- Tells user to put input and roll a virtual dice (which is actually creating a number between 1 and 6) ---//
            Console.WriteLine(Character1 + ", please press enter to roll dice");
            Console.ReadKey();
            Random rand = new Random();
            int character1RandomNumber = rand.Next(1, 6);

            Console.WriteLine(Character2 + ", please press enter to roll dice");
            Console.ReadKey();
            Random rand1 = new Random();
            int character2RandomNumber = rand1.Next(1, 6);
            Console.WriteLine(Character1 + " rolled a " + character1RandomNumber + " and " + Character2 + " rolled a " + character2RandomNumber + ".");
            Console.ReadKey();
            if (character1RandomNumber < character2RandomNumber)
            {
                int char2st = cstt1 + strengthmodifier;
                int char2sk = cskt1 + skillmodifier;
                int char1st = csto1 - strengthmodifier;
                int char1sk = csko1 - skillmodifier;
            }
            if (character2RandomNumber < character1RandomNumber)
            {

            }

                int ch2st = cstt1 - strengthmodifier;
                int ch2sk = cskt1 - skillmodifier;
                int ch1st = csto1 + strengthmodifier;
                int ch1sk = csko1 + skillmodifier;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T11:37:21.500

实际上，我认为您的问题是因为技能修饰符和强度修饰符没有在所有代码路径上获得分配值。IE。它们仅从 if 子句中分配值，并且 Visual Studio 无法确定它们是否分配给所有可能的结果。此警告不应停止您的代码编译，但如果您希望它消失，您可以执行类似的操作

```
int skillmodifiertoround = 0; 
```

而不仅仅是

```
int skillmodifiertoround; 
```

现在 Skillmodifiertoround 在声明中被赋予了一个值。

编辑：“此警告不应停止您的代码编译” - 显然它会阻止程序在 c# 中正确编译，但 vb 中的相同错误仅给出警告但仍可编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:35:17.367

它真的很简单

```
int skillmodifier; 
```

您需要先分配它 - 即给它一个值，甚至是默认值 - 然后才能使用它。否则程序不知道它有什么价值。

所以像

```
int skillmodifier = -1; 
```

会为你解决的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:35:48.773

当您`int skillmodifier`将其声明为默认值时，例如`int skillmodifier = 0;`

做同样的事情`strengthmodifier`，你应该很高兴！

问题是编译器可以在不设置这些参数的情况下检测到执行代码的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T11:38:57.880

> C# 中的局部变量必须在使用前进行初始化。

来自[MSDN](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)

另请参阅相关问题[为什么未分配的局部变量不会自动初始化？](https://stackoverflow.com/questions/7797424/why-arent-unassigned-local-variables-automatically-initialized)

对于类型未知的泛型，使用[默认](http://msdn.microsoft.com/en-us/library/xwth0h0d(v=vs.80).aspx)关键字

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T12:57:04.927

我想其他人已经给了你答案，但我发现了别的东西。

而不是 //method if(tryparse) { //done } else //loop

您应该将方法转换为返回整数的方法，然后...

int csko = loopCsko()

# ruby - 在MongoDB中按字符串搜索

> ID：14101022
> 
> 赞同：0
> 
> 时间：2012-12-31T11:32:44.337
> 
> 标签：ruby, mongodb, mongoid, rack

我需要在机架应用程序中使用 Mongoid gem 从 MongoDb db 中查找项目。这是我所拥有的：

```
items = items.any_of(
                            {item_id: q},   #ok
                            {title: /q/},
                            {title2: /q/},
                            {code: q},      #ok
                            {seller: q}     #ok
                          ) 
```

我需要通过`title`and改进搜索`title2`。

首先，如何使它**不**区分大小写？其次，如果`q`包含很多单词，我希望它通过它包含的任何单词进行搜索。

我怎样才能做到这一点？

# mysql - 处理程序是否可以在过程（MySql）之外声明？

> ID：14101024
> 
> 赞同：3
> 
> 时间：2012-12-31T11:32:48.873
> 
> 标签：mysql, handlers

错误处理程序可以在程序之外声明吗？

```
DECLARE EXIT HANDLER FOR NOT FOUND ROLLBACK;
DECLARE EXIT HANDLER FOR SQLEXCEPTION ROLLBACK;
DECLARE EXIT HANDLER FOR SQLWARNING ROLLBACK;

START TRANSACTION;

INSERT INTO ad_type VALUES (3, 'test');

INSERT INTO ad_type_languages VALUES (3, 'TEST', 'en' , 'yes');

COMMIT; 
```

当我尝试执行此代码时，出现错误：

第 1 行的 ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“DECLARE EXIT HANDLER FOR NOT FOUND ROLLBACK”附近使用正确的语法

当我在程序中执行它时它运行正常，但我需要在没有存储过程的脚本中使用它。

提前致谢。

ps

这三个句柄会捕获所有错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:39:26.913

如果我没记错的话，只能在存储过程、函数或触发器中声明退出处理程序。没有可能在此之外声明它。

# java - 如何在 java wrapper 中获取 ItkImage 数据

> ID：14101026
> 
> 赞同：1
> 
> 时间：2012-12-31T11:32:57.627
> 
> 标签：java, word-wrap, itk

我使用 Java 包装器加载 Dicom 图像，但我不知道如何获取图像中的字节数组我使用了这段代码

```
String _FileName="D:\\Patient.dcm";
org.itk.simple.ImageFileReader reader = new org.itk.simple.ImageFileReader() ;
reader.setFileName(_FileName) ;
Image img = reader.execute ( ) ;
SWIGTYPE_p_signed_char _p1 = img.getBufferAsInt8(); 
```

这是我第一次使用 java，所以我不知道如何将 _p1 转换为数组，是否应该使用任何 swig 接口类将 _p1 转换为 java 数组？或者我应该使用一种 itk 数组吗？

**编辑：**

在旧版本中，他们使用 Pixelcontainer 获取数组，但在最新版本中将其删除

# objective-c - NSwindow 消失

> ID：14101028
> 
> 赞同：5
> 
> 时间：2012-12-31T11:33:21.060
> 
> 标签：objective-c, cocoa, nswindow

我想添加一个 NSWindow 简单的代码是：

```
NSWindow* myWindow;
myWindow = [[NSWindow alloc] initWithContentRect:NSMakeRect(100,100,300,300)
                                       styleMask:NSTitledWindowMask
                                         backing:NSBackingStoreBuffered
                                           defer:NO];
[myWindow makeKeyAndOrderFront:nil]; 
```

窗口出现一秒钟然后消失。怎么了？

*   Xcode 4.5.2
*   MacBookPro i5 10.8.2

感谢您的回答。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T11:55:49.493

您没有保留窗口。

`NSWindow* myWindow;`在 .h 中定义为属性。

* * *

在.h

```
@property (strong)NSWindow* myWindow; 
```

在.m

```
- (IBAction)button:(id)sender {

   if (self.myWindow==nil){
      self.myWindow= [[NSWindow alloc] initWithContentRect:NSMakeRect(100,100,300,300)
                                               styleMask:NSTitledWindowMask
                                                 backing:NSBackingStoreBuffered
                                                   defer:NO];
   }

   [self.myWindow makeKeyAndOrderFront:NSApp];

} 
```

编辑：

如果您希望从同一个按钮打开多个窗口。创建一个数组

在.h

```
@property(strong) NSMutableArray *myWindowArray; 
```

在.m

```
- (IBAction)button:(id)sender {
    self.myWindow= [[NSWindow alloc] initWithContentRect:NSMakeRect(100,100,300,300)
                                                   styleMask:NSTitledWindowMask
                                                     backing:NSBackingStoreBuffered
                                                       defer:NO];

    [self.myWindowArray addObject:self.myWindow];

    for (NSWindow *win in self.myWindowArray) {
        [win makeKeyAndOrderFront:NSApp];

    }
} 
```

编辑2：

在这里找到[应用程序](http://www.keepandshare.com/doc/view.php?id=5380700&da=y)。

# iphone - 如何在 iPhone 中暂停异步任务？

> ID：14101029
> 
> 赞同：0
> 
> 时间：2012-12-31T11:33:20.657
> 
> 标签：iphone, ios, multithreading, asynchronous, dispatch

我正在使用异步任务从我的主视图控制器上的 Web 获取图像。当用户单击我的表格视图上的任何单元格时，我想暂停异步任务并转到另一个视图。我该怎么做？当用户返回主视图时，我还需要继续执行任务。我的代码

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
            UIImage *imagefromWeb = [UIImage imageWithData:[NSData dataWithContentsOfURL:[IconArray objectAtIndex:indexPath.row]]];
            CGSize newSize= CGSizeMake(45.0,45.0);
            UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
            [imagefromWeb drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
            UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
            UIGraphicsEndImageContext();

            dispatch_async(dispatch_get_main_queue(), ^{
                cell.imageView.image=newImage;
                [cell setNeedsLayout];
                MAKE_IMAGE_CURVED(cell.imageView)
            });

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:58:28.867

对此有两种合理的方法。一种是在您希望暂停时设置一个标志。后台队列上的块在执行前应该检查这个标志，如果设置了，等待它被取消设置。最好将标志构造为信号量。

但是，GCD 确实支持队列挂起。如果您将后台请求放在自定义队列上（用于`dispatch_queue_create`制作一个），则可以`dispatch_suspend`在队列上使用以防止执行进一步的块。`dispatch_resume`一旦你准备好再去打电话。这*不会*阻止当前执行的块完成 - 只是未来的块。我想不出任何明智的方法来停止执行已经在流程中的块。

有关涵盖信号量和队列管理的 GCD 文档，[请参见此处](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)。

# java - 本机持久性和休眠

> ID：14101030
> 
> 赞同：-2
> 
> 时间：2012-12-31T11:33:23.820
> 
> 标签：java, hibernate, jpa

如果我们可以使用 javax.persistence.* 完成本机 Java 支持的 ORM，那么使用诸如 hibernate 之类的提供程序的真正优势是什么？

java持久化与hibernate这本书说，

```
Hibernate EntityManager is a wrapper around Hibernate Core that provides the
JPA programming interfaces, supports the JPA entity instance lifecycle, and allows
you to write queries with the standardized Java Persistence query language. 
```

这里的 Hibernate EntityManager 这个名字让我很困惑。EntityManager 是否属于休眠？

以下是如何通过 java 持久化来持久化域对象，

```
EntityManagerFactory emf =
Persistence.createEntityManagerFactory("helloworld");
// First unit of work
EntityManager em = emf.createEntityManager();
EntityTransaction tx = em.getTransaction();
tx.begin(); 
```

下面是使用的persistence.xml文件，

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
version="1.0">
<persistence-unit name="helloworld">
<properties>
<property name="hibernate.ejb.cfgfile"
value="/hibernate.cfg.xml"/>
</properties>
</persistence-unit>
</persistence> 
```

所以这里再次持久化单元声明休眠配置文件。那么对象 Persistence.createEntityManagerFactory("helloworld"); 居然是在这里重播？

EntityManager em = emf.createEntityManager();

createEntityManager() 方法持有哪个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:39:49.083

JPA（Java Persistence Api）是一种*规范*（我认为JRE只有接口），可以由许多提供者实现。

因此，Hibernate（例如）使用 hibernate 核心使实现 JPA 规范的类可用。

使用 JPA 而不是 Hibernate 的原因是 Hibernate 是完全专有的；他们可以随意更改他们的 API，如果您使用 Hibernate API，您将被迫使用 Hibernate 作为您的 ORM。JPA 是标准的，任何 ORM 提供者都可以选择满足 JPA 规范并通过它提供服务（fe EclipseLink）。

通过使用 JPA，您可以轻松地切换您的 ORM，以防您找到比您当前使用的更适合您的（性能、已修复的错误等）。如果你直接使用 Hibernate，你就不能那么容易地做到这一点。

# c# - 2C# 加载表单

> ID：14101031
> 
> 赞同：0
> 
> 时间：2012-12-31T11:33:40.860
> 
> 标签：c#, winforms

我有一个主表单，其中包含一个打开另一个表单的事件。

在第一个表单中，我这样定义事件：

```
private void softToolStripMenuItem_Click(object sender, EventArgs e)
    {
        _frmSetting = new frmSetting();
        _frmSetting.ShowDialog();
    } 
```

该事件在对话框中打开一个窗体。一切都好。

*在InitializeComponent()*之前的 Form2 内部；，我想更改 Form 2 上 TextBox 的内容。

所以我这样做`this.textBox1.Text = "New text";`但它没有工作然后我输出到控制台：

```
this.textBox1.Text = "New text";
System.Console.WriteLine(this.textBox1.Text); 
```

但这在 Form1 启动时立即生效..我可以看到控制台输出。通常，只有在我调用 Form2 时才应该查看控制台输出。

有人了解我的需求吗？

编辑

```
public form2()
        {
            InitializeComponent();
            try
            {
            this.txtServer = new TextBox();
            //this._parameter = new Parameter();

            //this._get_parameter = new Dictionary<string, string>();

            String _server_name;
            //this._parameter.get_db_connection_parameters().TryGetValue("server", out _server_name);
            this.txtServer.Text = _server_name.ToString();

            System.Console.WriteLine(txtServer.Text + "---");
        }
        catch (Exception er) { System.Console.WriteLine("An error occurs :" + er.Message + " - " + er.StackTrace); }
    } 
```

请不要理会注释行，它可以工作 _server_name 变量正在从文本文件中获取其值，并且在此阶段可以工作。问题出在这条线上：

```
this.txtServer.Text = _server_name.ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:14:02.387

你把这件事复杂化了。首先，正如其他人所说，您不能在调用`InitializeComponent`. 此外，您无需在调用`InitializeComponent`. 调用该方法后，`txtServer`文本框将已创建并正确初始化。然后，您需要做的就是设置其`Text`属性的值：

```
public form2()
{
    InitializeComponent();
    try
    {
        String _server_name;
        // set value of _server_name
        txtServer.Text = _server_name;
    }
    catch (Exception er) { System.Console.WriteLine("An error occurs :" + er.Message + " - " + er.StackTrace); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:57:35.353

之前不能为文本框设置任何值`initializeComponent();`。如果您查看 initializeComponent 函数，您会看到，它确实初始化了设计器中添加的所有控件以及您的文本框。

你**不能**在初始化之前设置 TextBox.Text 属性，它会失败，就是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:33:04.707

非常感谢所有人，现在一切正常。事实上，我在 Form1() 构造函数中初始化 Form2 并且得到这个错误对象引用到非对象初始化（类似的东西）。我把它移到这里：

```
private void softToolStripMenuItem_Click(object sender, EventArgs e)
{
    _frmSetting = new frmSetting();
    _frmSetting.ShowDialog();
} 
```

现在在`initializeComponent()` 我这样做之后的 Form2() 里面

```
this.txtServer = _server_name; 
```

它有效

# batch-file - 批处理文件 - 语法不正确（进入目录）

> ID：14101037
> 
> 赞同：1
> 
> 时间：2012-12-31T11:34:19.950
> 
> 标签：batch-file, batch-processing, cmd

我正在编写一个批处理脚本来进入一个文件夹，如果它存在的话，如果它不做其他事情，就做某件事

我的层次结构如下： -

```
 C:\Validation\docs\chm\help.chw 
```

我想转到这个“help.chw”文件，这就是我正在做的事情并得到错误

```
IF EXIST docs (
CD docs echo curr dir = %CD% goto imagefolder 
) 

IF EXIST docs (
CD docs echo curr dir = %CD% goto imagefolder 
) 

ECHO Please include 'docs' folder in the current working directory
ECHO.
ECHO The program would close now , restart the batch file after making the changes cited above
ECHO.
goto exit 
```

这是我写的

```
 IF EXIST docs (
 CD "docs"
 echo curr dir = %CD%
 goto imagefolder 
```

)

它给

```
 C:\Validation MSI 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:42:13.093

你正在尝试这显然`cd`是`docs echo curr dir = %CD% goto imagefolder`行不通的。

`cd`在和 其他命令之间放置一条线。

```
IF EXIST docs (
CD docs
echo curr dir = %CD%
goto imagefolder 
) else (
echo Folder not found
)

IF EXIST docs (
CD docs
echo curr dir = %CD%
goto imagefolder 
) else (
echo Folder not found
) 
```

我也将您的`goto`行放在单独的行上，因为我假设它们不是发送给`echo`.

***更新***

您的代码没有回显实际当前目录的原因是因为`cd`变量在`if`括号内，这意味着里面的任何变量都是在运行时评估的，所以如果它们在括号结束之前发生变化，则值将与以前相同在括号之前，在这种情况下 - 父目录。

修复是启用延迟扩展，这将在到达它们时评估它们，而不是立即评估 while 块。

```
setlocal enabledelayedexpansion
IF EXIST docs (
cd docs
echo curr dir = !CD!
goto imagefolder
) 
```

# javascript - 如何使 json 的变量像 javascript 中的链接一样工作

> ID：14101041
> 
> 赞同：0
> 
> 时间：2012-12-31T11:34:56.483
> 
> 标签：javascript, jquery, html

我想在 .json 链接中创建一个变量

例如

```
http://api.wunderground.com/api/102376e7c0e1c995/geolookup/conditions/q/IA/Cedar_Rapids.json 
```

这是一个`JSON`给出天气数据的例子，例如我想给我的网站访问者他的天气状况我想`JSON`在国家和城市的这个链接上做变量

例如

```
http://api.wunderground.com/api/102376e7c0e1c995/geolookup/conditions/q/"country variable here "/"city variable here".json 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:29:54.230

试试这个：

```
var state = 'CA';
var city = 'San_Francisco';
var URL = 'http://api.wunderground.com/api/102376e7c0e1c995/geolookup/conditions/q/' + state + '/' + city + '.json';

$.ajax({
    url: URL,
    dataType: "jsonp",
    success: function(parsed_json) {
        var location = parsed_json['location']['city'];
        var temp_f = parsed_json['current_observation']['temp_f'];
        alert("Current temperature in " + location + " is: " + temp_f);
    }
});​ 
```

[**在这里演示**](http://jsfiddle.net/jMY3Z/)

# python - ImportError：无法在 Python 中打开共享对象文件

> ID：14101044
> 
> 赞同：6
> 
> 时间：2012-12-31T11:35:11.310
> 
> 标签：python, linux

我正在尝试运行一个依赖于其他模块的 python 脚本，但是我遇到了这个：

```
bash-3.2$ PYTHONPATH=/my/path/tables-2.3.1/build/lib.linux-x86_64-2.7/ ./fastcluster.py
Traceback (most recent call last):
  File "./fastcluster.py", line 5, in <module>
    import tables
  File "/my/path/tables-2.3.1/build/lib.linux-x86_64-2.7/tables/__init__.py", line 59, in <module>
    from tables.utilsExtension import getPyTablesVersion, getHDF5Version
ImportError: libhdf5.so.7: cannot open shared object file: No such file or directory
bash-3.2$ ls libhdf5.so.7
libhdf5.so.7
bash-3.2$ 
```

没有这样的文件或目录 libhdf5.so.7 吗？但是当我'ls'它时，它就在那里，就在我的目录中。那么这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T11:38:56.343

装载机不在那儿。将其放在库的标准位置之一，将目录添加到加载程序配置，或`$LD_LIBRARY_PATH`在运行 Python 之前设置。

# python - 使用 Mako 模板格式化日期

> ID：14101045
> 
> 赞同：8
> 
> 时间：2012-12-31T11:35:16.303
> 
> 标签：python, pyramid, mako

在我的 mako 模板中，我有：

```
<p>${item.addDate}</p> 
```

它返回：

> 2012-12-27 19:50:00

但我想得到：

> 27/12/2012 19:50

mako 有任何漂亮的过滤器、格式功能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T11:38:57.787

根据[谷歌](https://github.com/ralsina/nikola/issues/101)，`strftime`应该做的工作：

```
${post.date.strftime('%Y/%m/%d %H:%M') 
```

另外，根据谷歌：

```
<%! from time import strftime as time %>
It is the ${"%d of %B" | time} 
```

# sql-server - 选择内的 TSQL 内联案例

> ID：14101052
> 
> 赞同：0
> 
> 时间：2012-12-31T11:35:57.883
> 
> 标签：sql-server, tsql

我有这个查询

```
select item_name from some_table 
```

有时 item_name 是我想用 item_id 列替换的“sometext”值。我想要一个类似于 isnull 的功能，但它应该是一个'sometext'，而不是 null。

像这样：

```
 select ISTEXT(item_name,'sometext',item_id) from some_table 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T11:41:17.620

这是你想要的？

```
SELECT item_name = CASE WHEN item_name = 'sometext' THEN item_id ELSE item_name END 
```

# c# - 强制 webbrowser 控件不加载图像

> ID：14101054
> 
> 赞同：0
> 
> 时间：2012-12-31T11:36:05.810
> 
> 标签：c#, vb.net, browser, c#-to-vb.net

提前为我糟糕的英语道歉。

我想强制 webbrowser 控件不加载图像以减少流量并更快地加载文档。

不幸的是，使用 csWeb、gecko、webkit 和……对我来说是不可能的。

我已经在我的项目中使用了 httpwebrequest 和 httpwebresponse 来设置资源管理器 cookie，但在某些情况下，我需要浏览器来发送渲染的数据。不知何故，目标站点使用 java 做了一些技巧，因此数据需要通过浏览器导航。

我不擅长 c 或 c#，我找到了一些解决方案，但我无法理解

[Webbrowser 组件的隐藏图像以减少内存使用](http://www.codeproject.com/Questions/65772/Hidden-Images-of-Webbrowser-component-to-reduce-me)

和

[网络浏览器定制](http://msdn.microsoft.com/en-us/library/aa770041%28VS.85%29.aspx)

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-23T18:54:21.743

我的方法是

```
RegistryKey RegKey = Registry.CurrentUser.OpenSubKey(@"Software\Microsoft\Internet Explorer\Main", true);
RegKey.SetValue("Display Inline Images", "no"); 
```

对于壁虎（baceuse gecko 适用于大多数用途）：

```
Gecko.Xpcom.Initialize("xulrunner");
        GeckoPreferences.User["security.warn_viewing_mixed"] = false;
        GeckoPreferences.User["plugin.state.flash"] = 0;
        GeckoPreferences.User["browser.cache.disk.enable"] = false;
        GeckoPreferences.User["browser.cache.memory.enable"] = false;
        GeckoPreferences.User["permissions.default.image"] = 2; 
```

# c++ - android 本机应用程序 opengl es 白色纹理

> ID：14101056
> 
> 赞同：2
> 
> 时间：2012-12-31T11:36:32.517
> 
> 标签：c++, opengl-es, android-ndk

我正在编写一个本机应用程序，它应该只显示一个带有纹理的小三角形。
但不幸的是，它每次都只显示一个白色三角形。
我的代码非常简单。

**首先加载一个 tga Image**：

```
static const GLenum gl_format[4] = { GL_LUMINANCE, GL_LUMINANCE_ALPHA, GL_RGB, GL_RGBA };

unsigned int LoadTGATextureFromFile(const char* filename)
{
    unsigned int handle;
    unsigned char hdr[18];
    unsigned char file_id[256 + 1];
    int file;

    file = open(filename, O_RDONLY);
    if(file < 0)
    {
        Log(LOGLEVEL_ERROR, APPNAME, "Error: Failed to open tga file '%s' for read ing\n", filename);
        return 0;
    }

    if(read(file, hdr, 18) != 18 || read(file, file_id, hdr[0]) != hdr[0])
    {
        Log(LOGLEVEL_ERROR, APPNAME, "Error: Unexpected EOF while reading header of '%s'\n", filename);
        close(file);
        return 0;
    }
    file_id[hdr[0]] = 0;
    if(hdr[1] != 0 || (hdr[2] != 2 && hdr[2] != 3) || (hdr[16] != 8 && hdr[16] != 16 && hdr[16] != 24 && hdr[16] != 32))
    {
        Log(LOGLEVEL_ERROR, APPNAME, "Error: File '%s' has invalid format\n", filename);
        close(file);
        return 0;
    }
    int width = *(short*)(hdr + 12);
    int height = *(short*)(hdr + 14);
    if((width & (width - 1)) != 0 || (height & (height - 1)) != 0)
    {
        Log(LOGLEVEL_ERROR, APPNAME, "Error: File '%s' has invalid resolution %dx%d\n", filename, width, height);
        close(file);
        return 0;
    }
    int components = hdr[16] / 8;

    unsigned char* data = new unsigned char [width * height * components];
    if (read(file, data, width * height * components) != width * height * components)
    {
        Log(LOGLEVEL_ERROR, APPNAME, "Error: Unexpected EOF while reading image data of '%s'\n", filename);
    close(file);
        return 0;
    }
    close(file);

    char dummy;
    if(read(file, &dummy, 1) == 1)
        Log(LOGLEVEL_ERROR, APPNAME, "Warning: TGA file '%s' has overlength\n", filename);

    switch (components - 1)
    {
        char tmp;
        case 2:
            for (int i = 0; i < width * height; i += 3)
            {
                tmp = data[i];
                data[i] = data[i + 2];
                data[i + 2] = tmp;
            }
            break;

        case 3:
            for (int i = 0; i < width * height; i += 4)
            {
                tmp = data[i];
                data[i] = data[i + 2];
                data[i + 2] = tmp;
            }
            break;

        default:
            break;
    }

    glGenTextures(1, &handle);
    glBindTexture(GL_TEXTURE_2D, handle);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, data);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glBindTexture(GL_TEXTURE_2D, 0);

    delete [] data;
    Log(LOGLEVEL_ERROR, APPNAME, "'%s' successfully loaded [handle = %d, FILE_ID = \"%s\", width = %d, height = %d, depth = %d] :)\n", filename, handle, file_id, width, height, components * 8);

    return handle;
} 
```

**加载纹理**：

```
int texture = LoadTextureFormFile("/sdcard/test.tga"); 
```

**然后绘制**：

```
 float tricoords[6] = { 0.0, 0.0, 1.0, 1.0, 0.0, 1.0 };
    float texcoords[6] = { 0.0, 0.0, 1.0, 1.0, 0.0, 1.0 };

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, texture);
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);

    glVertexPointer(2, GL_FLOAT, 0, tricoords);
    glTexCoordPointer(2, GL_FLOAT, 0, texcoords);

    glDrawArrays(GL_TRIANGLES, 0, 3);

    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
    glDisableClientState(GL_VERTEX_ARRAY); 
```

我知道，这段代码没有优化，但它只用于调试。

我的应用程序的 logcat 打印：
成功加载 tga [handle = 1, FILE_ID = "", width = 64, height = 128, depth = 32] :)

但质地保持白色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:36:32.517

刚刚发现错误，已为加载的纹理启用了纹理 mipmapping，但从未创建过 mipmap。

更改此行：

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR); 
```

这将禁用纹理的 mipmap。

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
```

# assembly - 装配比较标志理解

> ID：14101058
> 
> 赞同：1
> 
> 时间：2012-12-31T11:36:34.387
> 
> 标签：assembly, x86, eflags

我正在努力理解汇编程序中的以下代码片段：

```
if ( EAX >= 5 )
  EBX = 1;
else
  EBX = 2;" 
```

在汇编程序中，这可以写成如下（根据我的书），模拟您通常在“更简单”的分支中使用的[`jge`指令，这些分支一次只查看一个标志：](https://www.felixcloutier.com/x86/jcc)

```
1     cmp eax, 5       ;(assuming eax is signed)
2     js signon        ;goto signon if SF = 1
3     jo elseblock     ;goto elseblock if OF = 1 and SF = 0
4     jmp thenblock    ;goto thenblock if SF = 0 and OF = 0
5 signon:
6     jo thenblock     ;goto thenblock if SF = 1 and OF = 1
7 elseblock:
8     mov ebx, 2
9     jmp next
10 thenblock:
11    mov ebx, 1
12    next: 
```

我可以理解生成的标志可以是：（如果（ EAX >= 5 ））：

SF = 0 & OF = 0 但我不明白标志是怎么回事：SF = 1 & OF = 1？什么计算给出了这个？

为了澄清我的意思：

如果 eax 在负下限，它可能会通过减去 5 溢出到正数。如果它在正数上限，它不能通过减去 5 溢出到负数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:00:18.713

用 3 位数字来考虑这些要容易得多，它都是可伸缩的。嗯，如果这是签名的（您没有在高级代码中指定/发布），那么四位更好，因为您使用了 5。遍历 5 附近的数字（这显示了 alu 的输出）

```
cmp reg,5
0111 - 0101 = 0111 + 1010 + 1 = 10010
0110 - 0101 = 0110 + 1010 + 1 = 10001
0101 - 0101 = 0101 + 1010 + 1 = 10000
0100 - 0101 = 0100 + 1010 + 1 = 01111
0011 - 0101 = 0011 + 1010 + 1 = 01110 
```

现在您必须了解硬件的工作原理。某些处理器系列在执行减法运算时会反转来自 alu 的进位标志，而其他处理器系列则不会。无论哪种方式，您都可以在 5 - 5 点看到状态变化。而且你在这里也不需要进位标志，代码不使用它。

如果您正在做有符号数学，那么也可以尝试一些负数。

```
0000 - 0101 = 0000 + 1010 + 1 = 01011  
1111 - 0101 = 1111 + 1010 + 1 = 11010
1110 = 0101 = 1110 + 1010 + 1 = 11001 
```

这为问题提供了一些线索。

有符号溢出定义为进位不等于加法器的 msbit 上的进位。这可能会变得混乱，所以我们只需要知道边界在哪里。

```
0111 - 0101 = 7 - 5 = 2
0110 - 0101 = 6 - 5 = 1
0101 - 0101 = 5 - 5 = 0
0100 - 0101 = 4 - 5 = -1
0011 - 0101 = 3 - 5 = -2 
```

等等。使用这个 4 位模型，在有符号解释中，我们被限制为 +7 (0b0111) 到 -8 (0b1000)。所以在 -3 - 5 之后我们会遇到麻烦：

```
1110 - 0101 = 1110 + 1010 + 1 = 11001 , -2 - 5 = -7
1101 - 0101 = 1101 + 1010 + 1 = 11000 , -3 - 5 = -8
1100 - 0101 = 1100 + 1010 + 1 = 10111 , -4 - 5 = 7 (-9 if we had more bits)
1011 - 0101 = 1011 + 1010 + 1 = 10110 , -5 - 5 = 6 (-10 if we had more bits)
1010 - 0101 = 1010 + 1010 + 1 = 10101 , -6 - 5 = 5 (-11 if we had more bits)
1001 - 0101 = 1001 + 1010 + 1 = 10100 , -7 - 5 = 4 (-12 if we had more bits)
1000 - 0101 = 1000 + 1010 + 1 = 10011 , -8 - 5 = 3 (-13 if we had more bits) 
```

后五个是有符号溢出，有符号结果不能用可用位数表示。（请记住，我们现在正在使用四位系统，最高位是进位位，当您查看结果时可以将其移除）。

带符号的标志只是结果的 msbit，这也改变了有趣的边界。设置有符号标志（结果的毫秒位）的情况是低于 5 的正 (eax) 值和不导致有符号溢出的负数（+4 到 -3）。所有这些都在 <5 类别中，因此他们希望得到 2 的结果。第一个测试查找设置了符号的情况，为什么还要麻烦然后测试有符号溢出？这是没有意义的，我们已经知道所有签名的结果都在小于 5 的类别中。如果签名溢出不会伤害额外的跳跃。

因此，如果您通过 js 登录失败，则符号位关闭，即大于或等于 5 的数字（希望结果为 1）或结果为负数足以导致有符号溢出（希望结果为 2）。所以 jo elseblock 通过提取 2 个案例的结果（有符号溢出，非常否定）来对这两个案例进行排序。jmp thenblock 取大于 5 的正数。

在我看来，你在这里做有符号数学（使用有符号溢出标志有点明显）。由于您使用 5 来比较和签名数学，因此您的系统中需要 4 位或更多位来实现此代码，因此 8、32、64、123456 位，它与 4 位系统的工作方式相同并不重要（对于这个比较）。我发现最小化位数来进行分析更容易。像这样的硬编码比较使它变得容易得多，就像上面、at和下面的手工计算结果一样。然后遍历有符号数的全零（零）到全一（减一），并且非常负数进入有符号溢出范围。对于无符号数字，它更容易一些，但过程相同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-24T13:02:09.627

如果 (EAX >= 5) EBX = 1; 否则 EBX = 2;"

```
cmp eax,5
jae biggerthan
mov ebx,2
jmp out
.biggerthan
mov ebx,1
.out 
```

# ruby - 每个 Rack::Flash::FlashHash 的未定义方法

> ID：14101059
> 
> 赞同：1
> 
> 时间：2012-12-31T11:36:40.720
> 
> 标签：ruby, sinatra, rack

我 `rack-flash3`在我的 Sinatra 应用程序中使用 gem。我有一个名为 _flash 的部分。我尝试在那里做以下事情

```
.row-fluid
  .flash-notice
     - flash.each do |type, message|
      .alert{class: ".alert-#{type}"}
        %button.close{type: "button", "data-dismiss" => "alert"}x
        = message 
```

它给了我“ `undefined method each for Rack::Flash::FlashHash`”的错误

那么我如何迭代`flash`以实现我想要的呢？

# json - three.js OrbitControls 和关键帧

> ID：14101060
> 
> 赞同：0
> 
> 时间：2012-12-31T11:36:41.063
> 
> 标签：json, animation, three.js, blender

对于我的第二个测试，我使用带有纹理的搅拌机导出动画：它是带有抽屉和门的家具：当鼠标悬停在 facedrawer 上时，执行抽屉的动画，如果鼠标悬停在门上，则执行 chardoorsup 动画。

01：我总是遇到同样的问题，js中的材料不适用于html......我不知道如何调用由blender中的export three.js制作的js中的材料......

02：OrbitControls 无法激活关键帧：错误代码或错误？

03：动画通常通过鼠标悬停激活（在blender中使用逻辑编辑器实现）但是threejs使用blender逻辑编辑器？导出了多少动画？

[你在这里](http://www.macabann.com/THREEJS04/modiflapin06.html)看到代码

我在threefab上测试了我的js，动画是一起播放的。材料不读。

感谢答案

# javascript - 如何将 jQuery 中的事件处理程序添加到在 jQuery 本身之后呈现的代码中

> ID：14101062
> 
> 赞同：2
> 
> 时间：2012-12-31T11:36:52.503
> 
> 标签：javascript, jquery, jquery-select2

编辑：问题已经解决，事实证明，Select2 库有一个用于此类型的自定义命令：

```
$("#element").on("change", function (e) { ... }
// Defined as "change" 
```

我正在使用一个名为 Select2 3.2 的下拉菜单库。简而言之，代码采用一堆选择和选项标签，并生成一个很酷的下拉搜索列表。

但是，在网站渲染之后；当我单击“查看源代码”时，我所有的选择和选项标签仍然存在，但是当我右键单击新生成的精美菜单本身并选择“检查元素”（使用谷歌浏览器）时，html 完全不同。

我认为这是导致问题的原因，所有这些新代码都是从自定义库的 JS 中呈现的，并且在我的 jQuery 事件命令之后。

具体来说，这是我的命令：

```
$(document.body).on('click', '.select2-result-label', function() {
        var name = $(this).text();
        var post_to = '/myurl/';
        $.post(post_to, { dat: dat},
            function(response) {
                ...
            }, 'json'
        ) 
```

我相信 on() 方法会处理这种事情，但显然不是，任何帮助将不胜感激！

相关编辑：这是另一个 Stack Overflow 帖子的简介：

```
The view page source page shows you the exact text that 
was returned by the server.     

Inspect element actually shows you the fully rendered DOM tree. 
```

知道了这一点，也许解决这个问题会更容易。

这是一个 JS Fiddle 相关的：

[http://jsfiddle.net/JpvDt/47/](http://jsfiddle.net/JpvDt/47/)

当您单击多栏中的“x”时，尝试使警报“工作”出现。现在我的代码可以注册包含 x 的类。

```
$(document.body).on("click", ".select2-search-choice-close", alert("worked")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:55:19.940

**场景一：**

你的问题可能是你绑定了**整个 DOM****的方法**，这**真的很糟糕**。因此，请始终尝试将其绑定到您的控件所在的**最近的 div**（最近的父元素）。

 ********关于Jquery API**的事件性能如下所示。

> 在文档树顶部附近附加许多委托事件处理程序会降低性能。每次事件发生时，jQuery 必须将该类型的所有附加事件的所有选择器与从事件目标到文档顶部的路径中的每个元素进行比较。为了获得最佳性能，请将委托事件附加到尽可能靠近目标元素的文档位置。避免过度使用 document 或 document.body 来处理大型文档的委托事件。

**场景二：**

像下面这样调用你的 on 事件（带 off 事件）。

```
$(#yourElement).off('click').on('click', '.select2-result-label', function() {
        var name = $(this).text();
        var post_to = '/myurl/';
        $.post(post_to, { dat: dat},
            function(response) {
                ...
            }, 'json'
        ) 
```

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T21:30:03.787

事实证明，Select2 库有一个自定义命令，用于将来更改工具栏。在这里阅读更多：http: [//ivaynberg.github.com/select2/#programmatic](http://ivaynberg.github.com/select2/#programmatic)

请务必注意，许多标准化的 jQuery 调用不适用于 Select2，您必须使用它们的自定义设置。

```
$("#element").on("change", function (e) { ... }
// Defined as "change" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:55:18.157

只需将 $(document.body) 替换为 $(document)******

# c# - 使用 PyWinAuto 的 C# GUI 自动化

> ID：14101063
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:36:58.317
> 
> 标签：c#, python, ui-automation, pywinauto

我正在为 Visual Studio C# 桌面应用程序使用 GUI 自动化。那里有 DataGridView，在网格内有组合框和复选框。我尝试使用 pywinauto 将这些自动化，我只能获得网格布局控件，而内部的东西我无法获得控件

（我也尝试使用 print _control_identifiers()、Swapy、AutoIT Window Info 和 winspy ..）

任何人请告诉我如何使用 pywinauto 为桌面应用程序自动化 Visual Studio C# DataGridView 及其子控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T17:53:25.023

简短的回答是，没有使用 PyWinAuto 自动化 DataGridView 子控件的好方法。

如果您想从 DataGridView 中读取数据（例如读取单元格的文本内容，或者确定是否选中了复选框），那么您完全不走运。如果要控制 DataGridView，可以尝试两种方法：

*   单击各种坐标偏移。

*   向它发送按键以模仿键盘导航。

如果您的 DataGridView 中包含少量数据，这些可能会起作用，但是一旦 DataGridView 开始需要滚动条，您就不走运了。此外，单击偏移量对行和列的大小很敏感，如果可以调整列的大小，那么这种方法永远不会可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-20T15:45:42.313

试试 0.6.6 版本的 pywinauto，它现在对 datagridview 有更好的支持。[https://github.com/pywinauto/pywinauto/releases](https://github.com/pywinauto/pywinauto/releases)。不要忘记使用 uia 后端。下面的例子

```
Application(backend="uia") 
```

# asp.net-mvc - 将我的项目命名空间添加到 MVC web.config

> ID：14101065
> 
> 赞同：19
> 
> 时间：2012-12-31T11:37:05.873
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我可以不将我的项目命名空间添加到 web.config，以便 Razor 视图引擎包含我项目中所有页面的项目命名空间吗？像这样：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />

        <add namespace = "MyProjectNamespace.NestedNamespace"/>
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

它不工作。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-09-29T14:50:52.057

这是一个老问题，但显然 Visual Studio 仍然存在一些问题（截至目前为~~2015~~ 2017）。将命名空间添加到 Views 文件夹中的 web.config 文件后，关闭并重新打开所有视图。名称空间无法识别，并且视图会不断抛出运行时错误，直到我将它们全部关闭。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-31T13:55:48.010

命名空间需要添加到 Views 文件夹中的 web.config 文件，而不是根项目的 web.config。这将仅导入该视图文件夹中所有 cshtml 文件的命名空间。如果您的项目有 MVC 区域，则每个区域都有自己的 Views 文件夹和单独的视图 web.config 文件。要将命名空间导入到这些视图中，您还需要将命名空间添加到每个区域的视图文件夹的 web.config 中。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-01T19:57:37.770

您还可以`@using`向文件中添加一条语句，该语句`_ViewStart.cshtml`将涵盖同一文件夹或任何子文件夹中的所有视图。

```
@using MyProjectNamespace.NestedNamespace 
```

# android - 使用 GCMBaseIntentService 的 Android 推送通知

> ID：14101067
> 
> 赞同：-3
> 
> 时间：2012-12-31T11:37:12.330
> 
> 标签：android, user-interface, notifications, push, google-cloud-messaging

我想从 onMessage 中更新 UI。

例如使用更新进度条，怎么做？

弥敦道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T15:30:45.600

看一下[GCM 示例](http://code.google.com/p/gcm/)的工作方式。它使用以下方法与主要活动通信并更新 GUI：

```
static void displayMessage(Context context, String message) {
    Intent intent = new Intent(DISPLAY_MESSAGE_ACTION);
    intent.putExtra(EXTRA_MESSAGE, message);
    context.sendBroadcast(intent);
} 
```

然后使用 BroadcastReceiver 在主 Activity 中捕获意图：

```
private final BroadcastReceiver mHandleMessageReceiver =
        new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String newMessage = intent.getExtras().getString(EXTRA_MESSAGE);
        mDisplay.append(newMessage + "\n");
    }
}; 
```

因此，您可以使用类似的方法与您的主要活动进行通信以更新 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-12T14:11:46.713

有一个很好的答案可以弄清楚，我也希望你使用这些代码。您可以通过在您的活动中将其放在 onResume 上来获得意图。

将这些代码放在 GCMBaseIntentService 的 onMessage 中

```
if(isRunningActivity()){
        Intent pushReceivedIntent = new Intent(ACTION_PUSH);
        pushReceivedIntent.putExtras(intent.getExtras());
        context.sendBroadcast(pushReceivedIntent);
        return;
} 
```

然后您可以使用接收器接收该意图

```
 //register as BroadcastReceiver for Push Action
    IntentFilter filter = new IntentFilter();
    filter.addAction(NotificationProcessor.ACTION_PUSH);
    mReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            // put here codes what you want
        }
    };
    registerReceiver(mReceiver, filter); 
```

如果您有任何问题，请发表任何评论。希望对你有帮助

# xcode - 在 Xcode 4.5 中没有安装到 iOS 5.1 模拟器

> ID：14101068
> 
> 赞同：0
> 
> 时间：2012-12-31T11:37:20.240
> 
> 标签：xcode

我将 Xcode 从 4.4.1 升级到 4.5，但是当我安装 iOS 5.1 模拟器时，出现错误：“无法访问 iOS 5.1 模拟器”。这里有一个解决方案但是，我不知道如何接受新的开发者协议？

任何机构可以帮助我？谢谢。提前，![在此处输入图像描述](../Images/77432c1e3d2f937bfb1a2c2f08fc20ec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:19:38.220

要接受新的开发者协议，请访问[http://developer.apple.com/ios](http://developer.apple.com/ios)并使用您的帐户登录。

**如果**（且仅当）您是团队代理（即帐户的所有者），您应该会看到一个黄色框，上面写着“为了继续访问等等等等，您需要同意这个新的冗长不可读的内容合同”，其中包含链接）。

如果您不是团队代理（或所有者），那么您需要让那个人为您做这件事。

完成后，您应该能够通过 Xcode 的“下载”首选项窗格下载其他资源。

# android - 如何使用 IP 地址在 Android 中确定设备的位置

> ID：14101070
> 
> 赞同：16
> 
> 时间：2012-12-31T11:37:21.827
> 
> 标签：android, geolocation

我正在开发一个 Android 应用程序。我想使用设备的 IP 地址确定设备的位置。我从哪说起呢？Google API 上的链接不够明确。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-08-14T16:57:23.023

我们可以通过简单的 API 调用来获取位置，但是准确率会很低。

```
LocationApiService apiService = getGeoApiService();
    apiService.getLocation().enqueue(new Callback<GeoResponse>() {
        @Override
        public void onResponse(Call<GeoResponse> call, Response<GeoResponse> response) {
            response.body().getLatitude();
            response.body().getLongitude();
        }

        @Override
        public void onFailure(Call<GeoResponse> call, Throwable t) {
            t.getMessage();
        }
    }); 
```

**LocationApiService**

```
public interface LocationApiService {
    @GET("json")
    Call<GeoResponse> getLocation();
} 
```

**getGeoApiService()**

```
public static final String BASE_URL = "http://ip-api.com/";

public static LocationApiService getGeoApiService() {
        return new Retrofit.Builder()
                .baseUrl(BASE_URL)
                .addConverterFactory(GsonConverterFactory.create())
                .build()
                .create(LocationApiService.class);
    } 
```

**地理响应**

```
public class GeoResponse {

    private String as;
    private String city;
    private String country;
    private String countryCode;
    private String isp;
    @SerializedName("lat")
    private double latitude;
    @SerializedName("lon")
    private double longitude;
    private String org;
    private String query;
    private String region;
    private String regionName;
    private String timezone;

    @Override
    public String toString() {
        return "countryCode: " + countryCode + ", isp: " + isp + ", city: " + city;
    }

    public String getAs() {
        return as;
    }

    public void setAs(String as) {
        this.as = as;
    }

    public String getCity() {
        return city;
    }

    public void setCity(String city) {
        this.city = city;
    }

    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

    public String getCountryCode() {
        return countryCode;
    }

    public void setCountryCode(String countryCode) {
        this.countryCode = countryCode;
    }

    public String getIsp() {
        return isp;
    }

    public void setIsp(String isp) {
        this.isp = isp;
    }

    public double getLatitude() {
        return latitude;
    }

    public void setLatitude(double latitude) {
        this.latitude = latitude;
    }

    public double getLongitude() {
        return longitude;
    }

    public void setLongitude(double longitude) {
        this.longitude = longitude;
    }

    public String getOrg() {
        return org;
    }

    public void setOrg(String org) {
        this.org = org;
    }

    public String getQuery() {
        return query;
    }

    public void setQuery(String query) {
        this.query = query;
    }

    public String getRegion() {
        return region;
    }

    public void setRegion(String region) {
        this.region = region;
    }

    public String getRegionName() {
        return regionName;
    }

    public void setRegionName(String regionName) {
        this.regionName = regionName;
    }

    public String getTimezone() {
        return timezone;
    }

    public void setTimezone(String timezone) {
        this.timezone = timezone;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-03T20:08:32.027

结帐[谷歌地图地理定位 API](https://developers.google.com/maps/documentation/geolocation/intro)

**示例帖子：**

```
https://www.googleapis.com/geolocation/v1/geolocate?key=YOUR_API_KEY 
```

**示例响应：**

```
{
  "location": {
    "lat": 51.0,
    "lng": -0.1
  },
  "accuracy": 1200.4
} 
```

**限制：**

标准 API 的用户：

每天 2,500 次免费查询 每个用户每秒 10 次查询 启用按需付费以解锁更高的配额：

0.50 美元/1000 次额外查询，每天最多 100,000 次。

[更多的](https://developers.google.com/maps/documentation/geolocation/usage-limits)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T11:51:22.157

有几个网络服务，它为您提供来自 IP 地址的纬度和经度值。

其中之一是**api.ipinfodb.com**

例如，您可以通过发送请求来获取纬度和经度，例如

```
 http://api.ipinfodb.com/v3/ip-city/?key=<your_api_key>
               &ip=74.125.45.100&format=json 
```

这将返回 json 格式的数据，您可以通过设置 format=xml 获得 XML 响应。（您需要注册才能获取您的 API 密钥）。

[或者您可以从此](http://dev.maxmind.com/geoip/geolite)链接和[此](http://dev.maxmind.com/geoip/downloadable)链接下载数据库。

您可以下载数据集，但您必须不断更新它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T14:29:17.543

我用[它](http://api.hostip.info/get_json.php)来获取设备的 ip、国家和城市

要测试您可以使用[RESTCLIENT](https://addons.mozilla.org/en-us/firefox/addon/restclient/)，这是用于发出 HTTP 请求的 firefox 插件。

只需复制[https://addons.mozilla.org/en-us/firefox/addon/restclient/](https://addons.mozilla.org/en-us/firefox/addon/restclient/)这个 URL 并在 RESTCLIENT 中测试或只是过去在浏览器地址栏中

希望这可以帮助！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-18T22:59:12.603

您可以使用[freegeoip.net](https://freegeoip.net/)。

这是一项免费的开源服务。您可以直接使用该服务或在您的个人服务器上运行它。它也可以很容易地部署到 Heroku。

要获取 IP 位置，只需使用 OkHttp 发送 http/https 请求：

```
String url = "https://freegeoip.net/json/"
Request mRequest = new Request.Builder()
        .url(url)
        .build();
Context mContext // A UI context
new OkHttpClient().newCall(mRequest).enqueue(new Callback() {
    Handler mainHandler = new Handler(mContext.getApplicationContext().getMainLooper());

    @Override
    public void onResponse(Call call, Response response) {
        String responseBody = null;
        try {
            responseBody = response.body().string();
        } catch (final IOException e) {
            mainHandler.post(new Runnable() {
                @Override
                public void run() {
                    // handle error
                }
            });
        }

        final String finalResponseBody = responseBody;
        mainHandler.post(new Runnable() {
            @Override
            public void run() {
                // handle response body
                try {
                    JSONObject locationObject = new JSONObject(finalResponseBody);
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });
    }

    @Override
    public void onFailure(Call call, final IOException e) {
        mainHandler.post(new Runnable() {
            @Override
            public void run() {
                mNetworkListener.onNetworkError(e.getMessage());
            }
        });
    }
}); 
```

响应将如下所示：

```
{
    "ip": "192.30.253.113",
    "country_code": "US",
    "country_name": "United States",
    "region_code": "CA",
    "region_name": "California",
    "city": "San Francisco",
    "zip_code": "94107",
    "time_zone": "America/Los_Angeles",
    "latitude": 37.7697,
    "longitude": -122.3933,
    "metro_code": 807
} 
```

# ajax - CakePHP - JsHelper - AJAX - 在独立函数中解析响应数据

> ID：14101073
> 
> 赞同：1
> 
> 时间：2012-12-31T11:37:54.877
> 
> 标签：ajax, cakephp

我认为 CakePHPs JsHelper 非常适合用于 AJAX 表单提交。通常，您只需将 DOM 元素设置为使用新内容进行更新，其余的由 JsHelper 处理。一个普通的提交按钮可能如下所示：

```
echo $this->Js->submit('Submit', array(
    'update' => '#a-div',
    'url' => 'some-url'
); 
```

现在，我想更新 2 或 3 个不同的 DOM 元素，我的 AJAX 响应类型将是带有 2 或 3 个密钥对的 JSON。所以我的问题。

如何捕获 JSON 响应数据并将 THAT DATA 传递给我自己编写的独立回调函数，在那里我可以解析响应并使用值对更新相关的 DOM 元素？正确的语法是什么？我意识到我可能会跳过使用 JsHelper 并创建自己的提交，但在这种情况下我不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T20:49:40.013

我找到了正确的答案：

```
echo $this->Js->submit(
  'Lägg en i varukorgen',
  array(
    'url' => array('controller' => 'products', 'action' => 'ajax_basket'),
    'id' => 'basket-add-submit',
    'success' => 'myFunction(data);',
  )
); 
```

在成功回调中，***数据***保存了返回的 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:16:17.093

忘记 JsHelper 并自己编写 jquery 代码。

# ruby - 使用默认值获得最小值

> ID：14101081
> 
> 赞同：-2
> 
> 时间：2012-12-31T11:38:20.197
> 
> 标签：ruby

在我的`params`哈希中，我收到一个`:limit`. 我需要将此值分配给一个变量`limit`，但不能超过`50`，如果`:limit`未给出值，则默认为`50`。

首先，我这样做了：

```
limit = [params[:limit], 50].min 
```

这将使它最大`50`，但不会起作用：如果没有给出任何东西`:limit`，那么这将使`limit` `0`.

接下来，我这样做了：

```
limit = [params[:limit] || 50, 50].min 
```

这行得通，但我想知道这是否有效，或者是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:57:45.783

尝试

```
limit = (params[:limit] && params[:limit] < 50) ? params[:limit] : 50 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:11:02.117

您的解决方案很容易阅读，但效率很低，因为您正在创建一个数组并`min`每次都调用该方法，这太过分了。

一种可能不太可读、更冗长但在机器上更容易的方法可能是：

```
if params[:limit] && params[:limit] < 50
  params[:limit] 
else
  50
end 
```

# java - 在 Java 中使用日历获取不正确的日期

> ID：14101084
> 
> 赞同：-2
> 
> 时间：2012-12-31T11:38:26.480
> 
> 标签：java, date, time, calendar

> **可能重复：**
> [日历返回错误的月份](https://stackoverflow.com/questions/1755199/calendar-returns-wrong-month)

我想检索我的应用程序的日期和时间，为此我编写了以下代码

```
Calendar c = Calendar.getInstance();
System.err.println("Date is: " + c.get(Calendar.DATE));
System.err.println("Month is: " + c.get(Calendar.MONTH));
System.err.println("Year is: " + c.get(Calendar.YEAR));
System.err.println("Hour is: " + c.get(Calendar.HOUR_OF_DAY)); 
```

但是，前面的代码片段提供了不正确的结果。

```
SEVERE: Date is: 31
SEVERE: Month is: 11
SEVERE: Year is: 2012
SEVERE: Hour is: 17 
```

**注意：我机器上的时间是完美的，没有问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:41:09.313

`Month`是零索引的。所以，`11`意味着它的十二月。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:41:13.687

***您得到的输出是正确的。***

我想你很困惑为什么你的月份是 11 而不是 12。对吧？如果那是问题，那就不要打扰。月份是基于 0 的，因此`0`is `January`, `1`is`Feb`等等...

所以输出作为`11`手段是`December`。

[`Read Docs`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#MONTH)

如果您想要正确的月份，措辞为月份，请使用以下内容。

```
Calendar rightNow = Calendar.getInstance();
java.text.SimpleDateFormat df1 = new java.text.SimpleDateFormat("MM");
java.text.SimpleDateFormat df2 = new java.text.SimpleDateFormat("MMM");
java.text.SimpleDateFormat df3 = new java.text.SimpleDateFormat("MMMM");
System.out.println(df1.format(rightNow.getTime()));
System.out.println(df2.format(rightNow.getTime()));
System.out.println(df3.format(rightNow.getTime())); 
```

它会给

```
12
Dec
December 
```

## [演示](http://ideone.com/uob5UO)

**注意：**在演示中，您将看到 2013 年 1 月，因为该站点的服务器位于 2013 年已经开始的地方。[`World Time`](http://www.timeanddate.com/worldclock/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:44:02.183

您期望该月有 12 个而不是 11 个。

`c.get(Calendar.MONTH)`返回基于 0 的索引。

来自[`javadoc`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#MONTH)：

***public static final int MONTH***

***get 和 set 的字段编号，指示月份。这是特定于日历的值。公历和儒略历中的第一个月是 JANUARY，即 0；最后一个取决于一年中的月数。***

# ios - 如何使用故事板启动应用程序

> ID：14101088
> 
> 赞同：0
> 
> 时间：2012-12-31T11:38:43.100
> 
> 标签：ios, xcode, uiviewcontroller, tabs, storyboard

我正在尝试为 iOS 制作一个应用程序，但我是 Xcode 的新手，我遇到了一些问题。在我的项目文件中，我有一个“ViewController.xib”，但我需要一个选项卡式应用程序，所以我创建了一个情节提要，并将 ViewController 从“.xib”移动到情节提要。在情节提要中，我有一个带有两个项目的选项卡控制器，其中一个是从“.xib”移动的 ViewController（一个相册）。我改变了课程，我在项目信息中用“主故事板”改变了“主界面”，但是当我运行我的应用程序时，我看不到故事板，只能看到单个视图控制器。就像故事板不存在一样。原谅我的无知，希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:51:42.380

在创建应用程序时勾选情节提要

![在此处输入图像描述](../Images/05c0f0a576f39866d0f0bfbbabf60660.png)

# angularjs - ng-include 导致控制器块重新渲染

> ID：14101099
> 
> 赞同：6
> 
> 时间：2012-12-31T11:39:27.360
> 
> 标签：angularjs

我正在尝试将 ng-switch 与下面的 ng-include 一起使用。问题在于 ng-init 和整个控制器块在任何 ng-includes 更改时重新渲染。

在 login_form.html 中，当用户登录时，我在 LoginCtrl 中设置了 isLoggedIn = true。但是，这会导致重新渲染下面的完整 html，从而再次导致 ng-init。

如何避免这个循环？

```
 <div ng-controller="LoginCtrl" ng-init="isLoggedIn = false" class="span4 pull-right">
        <div ng-switch on="isLoggedIn"> 
          <div ng-switch-when="false" ng-include src="'login_form.html'"></div>
          <div ng-switch-when="true" ng-include src="'profile_links.html'"></div>
        </div>
      </div> 
```

以下是登录表单的 HTML -

```
<form class="form-inline">
  <input type="text" placeholder="Email" ng-model="userEmail" class="input-small"/>
  <input type="password" placeholder="Password" ng-model="userPassword" class="input-small"/>
  <button type="submit" ng-click="login(userEmail, userPassword)" class="btn">Sign In</button>
</form> 
```

下面是控制器 -

```
angularApp.controller('LoginCtrl', function($scope, currentUser){

  $scope.loginStatus = function(){
    return currentUser.isLoggedIn();
  };

/*  $scope.$on('login', function(event, args) {
    $scope.userName = args.name;
  }); 

  $scope.$on('logout', function(event, args) {
    $scope.isLoggedIn = false;
  });*/

  $scope.login = function(email, password){
    currentUser.login(email, password);
  };

  $scope.logout = function(){
    currentUser.logout();
  };

}); 
```

打击是服务 -

```
angularApp.factory('currentUser', function($rootScope) {
  // Service logic
  // ...
  // 
    var allUsers = {"rob@gmail.com": {name: "Robert Patterson", role: "Admin", email: "rob@gmail.com", password: "rob"},
            "steve@gmail.com":{name: "Steve Sheldon", role: "User", email: "steve@gmail.com", password: "steve"}}

  var isUserLoggedIn = false;

  // Public API here
  return {
    login: function(email, password){
      var user = allUsers[email];
      var storedPass = user.password;

      if(storedPass === password){
        isUserLoggedIn = true;
        return true;
      }
      else
      {
        return false;
      }
    },
    logout: function(){
      $rootScope.$broadcast('logout');
      isUserLoggedIn = false;
    },

    isLoggedIn: function(){
      return isUserLoggedIn;
    }
 };
}); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-31T17:20:32.797

我相信您的问题是原型继承工作方式的结果。ng-include 创建自己的子范围。在子作用域中分配原始值会在该作用域上创建一个新属性，该属性会隐藏/隐藏父属性。

我猜在 login_form.html 中，当用户登录时，您会执行以下操作：

```
<a ng-click="isLoggedIn=true">login</a> 
```

在 isLoggedIn 设置为 true 之前，您的作用域如下所示：

![分配前](../Images/bcc839aca81a01671f03a107923b7d73.png)

isLoggedIn 设置为 true 后，您的作用域如下所示：

![分配后](../Images/0d36e7333f2626549fd9d83c3a47e70e.png)

希望这些图片清楚地说明了为什么这会导致您出现问题。

有关为什么原型继承以这种方式与原语一起工作的更多信息，请参阅[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)

正如上面的链接所解释的，您有三个解决方案：

1.  在模型的父对象中定义一个对象，然后在子对象中引用该对象的属性：parentObj.isLoggedIn
2.  在 login_form.html 中使用 $parent.isLoggedIn - 然后这将引用 $parent 范围内的原语，而不是创建一个新的原语。例如，
    `<a ng-click="$parent.isLoggedIn=true">login</a>`
3.  在父作用域上定义一个函数，并从子作用域调用它——例如，setIsLoggedIn()。这将确保正在设置父范围属性，而不是子范围属性。

**更新**：在审查您的 HTML 时，您实际上可能有两个级别的子范围，因为 ng-switch 和 ng-include 各自创建自己的范围。所以，图片需要一个孙范围，但三个解决方案是相同的......除了＃2，你需要使用 $parent.$parent.isLoggedIn - 丑陋。所以我建议选项1或3。

**Update2**：@murtaza52 为问题添加了一些代码...`ng-init="isLoggedIn = false"`从您的控制器中删除（您的服务正在通过其`isUserLoggedIn`变量管理登录状态）并在您的控制器中打开 loginStatus() `<div ng-switch on="loginStatus()">`：。

这是一个[工作小提琴](http://jsfiddle.net/mrajcok/PCNaQ/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T11:44:38.557

我有一个[工作示例](http://jsfiddle.net/asgoth/WjBNq/)。诀窍是要评估的范围变量必须是对象，而不是原始类型。看起来`$scope.$watch()`没有正确观看原始类型（这是一个错误）。jsFiddle 有一个带有两个子控制器的父控制器，但它也只能与一个（父）控制器一起使用。

**HTML：**

```
<div ng-controller="LoginCheckCtrl">
        <div ng-switch on="user.login"> 
          <div ng-switch-when="false" ng-include="'login'"></div>
          <div ng-switch-when="true" ng-include="'logout'"></div>
        </div>
</div> 
```

**控制器：**

```
function LoginCheckCtrl($scope) {
    $scope.user = {
        login: false
    };
} 
```

**注意：**这也仅适用于一个控制器：

```
function LoginCheckCtrl($scope) {
    $scope.user = {
        login: false
    };
    $scope.login = function() {
        console.log($scope.user.login ? 'logged in' : 'not logged in');
        $scope.user.login = true;
    };
    $scope.logout = function() {
        console.log($scope.user.login ? 'logged in' : 'not logged in');
        $scope.user.login = false;
    };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:17:30.640

您可以将需要在控制器重新初始化后继续存在的状态存储在父作用域中。我认为将 isLoggedIn 放在 $rootScope 上并不奇怪。

此外，您可以在控制器内部进行初始化，在这种情况下会更干净（但它不能解决您的问题）。

# iphone - 如果我无法在 180 天内将我的二进制文件上传到应用商店会怎样..？

> ID：14101100
> 
> 赞同：2
> 
> 时间：2012-12-31T11:39:27.990
> 
> 标签：iphone, ios, app-store, app-store-connect

我收到一封来自 Apple 的邮件，说我只剩下 7 天的时间来上传二进制文件，否则应用程序名称将被没收。如果有人不使用它，我可以在没收后延长它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:30:05.100

实际上，如果您在 180 天内不上传应用程序，那么苹果将从帐户中删除您的应用程序数据。其他公司/个人可以使用您的应用名称。

如果您不想这样，只需通过“删除应用程序”按钮删除该应用程序，然后通过输入所有数据重新提交该应用程序。

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T11:42:37.520

一种解决方案是让您从 itunesconnect 中删除该应用程序，然后使用“添加新应用程序”添加另一个具有相同名称的应用程序。

# each - 如果重复的单词删除父 div

> ID：14101101
> 
> 赞同：0
> 
> 时间：2012-12-31T11:39:34.613
> 
> 标签：each, jquery

我正在使用一项名为[Embedly](http://embed.ly/)的服务来设置来自 Google Feedburner 的 RSS 提要的样式。我有一个关于她的示例代码：[JsFiddle](http://jsfiddle.net/2VBSX/25/)

如果您仔细观察，您会在每个标题的末尾看到来源（CNN）。这被称为`.provider`我想摆脱整个 div (.embed) 如果单词 CNN 位于 div 中的 elsewere （意思是重复），`.description`或者`a`

我尝试了很多东西，这是其中非常直接的代码之一：

```
 $('.embed').each(function() {
    if($('.embed a:first **could also be .description**', this).text() == $('.provider', this).text())
        $(this).remove();
}); 
```

我无法弄清楚为什么它不起作用。我也使用它`on`并`live`单击没有运气。

我刚刚意识到文档中没有“嵌入”。我添加了一个带有单击事件的按钮，您可以在嵌入加载后单击该按钮：http: [//jsfiddle.net/2VBSX/37/](http://jsfiddle.net/2VBSX/37/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:50:04.783

您可以使用成功事件从数据中过滤提供者类，如下所示：

**已编辑**

```
 $('div.newscontainer').embedly({
    key: ':3eccf441bf0f43acbb076da9817af27d',
    success: function(oembed, dict) {

        output = $(oembed['code']);
        description = $(oembed['code']).find(".description").text();           
        var regex =new RegExp(output.find('.provider').text(),"i");
        if(regex.exec(description) == null ) {              
            $(dict["node"]).parent().html(output);
        }

        output.find("a:eq(0)").text(); // First
        output.find("a:eq(1)").text(); // Provider

    }
}); 
```

签出这个 [jsfiddle 演示](http://jsfiddle.net/gurkavcu/YrnyP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:56:10.937

这[就是](http://jsfiddle.net/muffls/h4Wkq/)你想要的吗？

```
var regex = /CNN/;
$('.embed').each(function(index, element) {

    if (regex.exec($('.embed a:first').text()) != null 
       && regex.exec($('.provider').text()) != null) {
        element.remove();
    }
}); 
```

# iphone - NSUserDefaults + NSMutableArray -> 存储 2 个数组并在 tableview 中显示

> ID：14101102
> 
> 赞同：2
> 
> 时间：2012-12-31T11:39:34.357
> 
> 标签：iphone, ios, uitableview

我刚刚在我的应用程序中实现了一个书签/收藏夹功能，来自 a 的收藏夹`tableview`，使用以下代码，使用`NSUserDefaults`. 该单元格有 2 个标签，项目名称和价格 - 存储在数组中 -`theArray`和`thePriceArray`-> 如下所示：

![在此处输入图像描述](../Images/2b1b86bba8e1154dc0037a5f111fd204.png)

```
 NSIndexPath *indexPath = [_ListTableView indexPathForCell:(UITableViewCell *)     [[sender superview] superview]];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults]; 
    NSMutableArray *OrderList = [[defaults objectForKey:ORDER_KEY] mutableCopy];
    if (!OrderList) OrderList = [NSMutableArray array];
    [OrderList addObject:[theArray objectAtIndex:indexPath.row]];
    [OrderList addObject:[thePriceArray objectAtIndex:indexPath.row]];
    [defaults setObject:OrderList forKey:ORDER_KEY];
    [defaults synchronize]; 
```

我现在将两个数组 `theArray`&添加`thePriceArray`到`NSMutableArray`. 我现在想在另一个中显示这些信息（来自数组的信息）`tableview`。我这样做是这样的：

在我的`viewDidAppear`：

```
 NSUserDefaults *defaults = kSettings;

    NSMutableArray *theOrderList = [NSMutableArray arrayWithArray:[defaults objectForKey:ORDER_KEY]]; 
```

并显示以下内容`tableview`：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [theOrderList count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"TheTableCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [theOrderList objectAtIndex:indexPath.row];

    return cell;
} 
```

这几乎可以按我的意愿工作，显示 和 的内容`theArray`，`thePriceArray`但是在一个长长的列表中，如下所示：

![在此处输入图像描述](../Images/cec855a391a979bbbbd4e6d73cd7f5d6.png)

我希望“键和值”在一个单元格中，所以价格和项目名称在一个单元格中（Hat - 30）而不是单独的，我该怎么做？我曾尝试使用 a `NSDictionary`，但没有运气，我可以使用`NSDictionary`它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:50:40.533

您可以为 favItem 和 favPrize 创建两个新数组。只需将您最喜欢的项目添加到 favItem 数组，并将最喜欢的奖品添加到 favPrize 数组。现在使用这些数组来设置 Tableview 的标签和 detailLabels，例如：

```
cell.textLabel.text = [favItems objectAtIndex:indexPath.row];
cell.detailTextLabel.text = [favPrize objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:55:54.833

保留数组`theArray`并`thePriceArray` `seperate`使用一个作为 tableView 数据源的主数组。

**注意**：将数据从 NSUserDefault 添加到相应的数组。

现在方法是：

```
 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [theArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"TheTableCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubTile reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [theArray objectAtIndex:indexPath.row];
    cell.detailTextLabel.text = [thePriceArray objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:56:52.037

您可以使用以下代码简单地做到这一点：

```
NSString *label = [NSString stringWithFormat:@"%@    %@",[theOrderList objectAtIndex:(indexPath.row * 2)],[theOrderList objectAtIndex:(indexPath.row * 2)+1]
cell.textLabel.text = label; 
```

并改变你的`numberOfRowsInSection`喜欢：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [theOrderList count]/2;
} 
```

# mysql - 优化覆盖索引的使用

> ID：14101104
> 
> 赞同：2
> 
> 时间：2012-12-31T11:39:39.630
> 
> 标签：mysql, sql, indexing, covering-index

我以前从未听说过覆盖索引，只是偶然发现了它们。我正在阅读他们的[这一页](http://en.wikipedia.org/wiki/Index_%28database%29#Covering_index)，上面写着..

“覆盖索引可以显着加快数据检索速度，但由于额外的键，它本身可能很大，这会减慢数据插入和更新速度。**为了减少这种索引大小，一些系统允许将非键字段包含在索引中。**非-key 字段本身不是索引排序的一部分，而仅包含在叶级别，从而允许覆盖索引具有较小的整体索引大小。”

所以我的问题是你怎么知道你的系统是否允许非关键字段包含在索引中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:08:41.420

MySQL 不（当前）支持非键列。对于其他 DMBS，您需要查看参考手册。

此处已提出并回答了[类似的问题。](https://stackoverflow.com/questions/13387870/create-index-in-mysql-not-working)但是，由于使用覆盖索引获得的性能改进对于返回大量行的非选择性查询通常更大，因此我无法设想仅在索引本身中包含额外列的解决方案能够提供性能改进。但是，可能有一些我没有想到的场景，而您的可能就是其中之一，因此在寻找性能改进时，测试、执行计划和 IO 统计信息会告诉您远远超过我的猜想！

# php - 如果选择下拉菜单

> ID：14101106
> 
> 赞同：1
> 
> 时间：2012-12-31T11:40:15.923
> 
> 标签：php, html, drop-down-menu

我正在从单选按钮切换`<input type="radio" />` 到下拉菜单`<select><option value="">~`。

使用收音机，我执行以下操作：

```
<input type="radio" name="datumaflevering" value="1 week" <?php if ($row['datumaflevering'] == '1 week') { echo 'checked="checked"';}?> onDblClick="this.checked=false;"/> &nbsp;1 
```

注意 PHP 语句。如果日期已经在数据库中，则将其设置为`checked`. 我也可以使用下拉菜单执行此操作吗？

```
<select size="1" name="datumaflevering" id="t3">
        <option value="1 week" name="datumaflevering">1 week</option>
        <option value="2 weken" name="datumaflevering">2 weken</option>
        <option value="3 weken" name="datumaflevering">3 weken</option>
        <option value="4 weken" name="datumaflevering">4 weken</option>
        <option value="5 weken" name="datumaflevering">5 weken</option>
        <option value="6 weken" name="datumaflevering">6 weken</option>
        <option value="7 weken" name="datumaflevering">7 weken</option>
        <option value="8 weken" name="datumaflevering">8 weken</option>
        <option value="9 weken" name="datumaflevering">9 weken</option>
        <option value="10 weken" name="datumaflevering">10 weken</option>
        <option value="11 weken" name="datumaflevering">11 weken</option>
        <option value="12 weken" name="datumaflevering">12 weken</option>
        <option value="13 weken" name="datumaflevering">13 weken</option>
        <option value="14 weken" name="datumaflevering">14 weken</option>
    </select> 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:48:26.057

将您的选项放在一个数组中，在循环时您可以将每个选项的值与您的 $row 进行比较以添加所需的 html：

```
<?php
    // your value array...
    $selectOptions = array('1 week','2 weken','...');
?>
<select size="1" name="datumaflevering" id="t3">
    <?php foreach($selectOptions as $opt): 
        $selected = ($opt === $row['datumaflevering']) ? ' selected="selected"' : '';
    ?>
    <option value="<?php echo $opt;?>" name="datumaflevering"<?php echo $selected?>><?php echo $opt;?></option>
    <?php endforeach; ?>
</select>
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:42:29.490

是的..

```
<select size="1" name="datumaflevering" id="t3">
        <option value="1 week" name="datumaflevering" <?php if ($row['datumaflevering'] == '1 week') { ?> selected = "selected" <?php } ?>>1 week</option>
        <option value="2 weken" name="datumaflevering">2 weken</option>
        <option value="3 weken" name="datumaflevering">3 weken</option>
        <option value="4 weken" name="datumaflevering">4 weken</option>
        <option value="5 weken" name="datumaflevering">5 weken</option>
        <option value="6 weken" name="datumaflevering">6 weken</option>
        <option value="7 weken" name="datumaflevering">7 weken</option>
        <option value="8 weken" name="datumaflevering">8 weken</option>
        <option value="9 weken" name="datumaflevering">9 weken</option>
        <option value="10 weken" name="datumaflevering">10 weken</option>
        <option value="11 weken" name="datumaflevering">11 weken</option>
        <option value="12 weken" name="datumaflevering">12 weken</option>
        <option value="13 weken" name="datumaflevering">13 weken</option>
        <option value="14 weken" name="datumaflevering">14 weken</option>
    </select> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:44:09.443

就像是：

```
<select size="1" name="datumaflevering" id="t3" onchange="this.selected=true;">
<option value="1 week" name="datumaflevering" <?php if ($row['datumaflevering'] == '1 week') { ?> selected = "selected" <?php } ?>>1 week</option>
...
</select> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T11:44:22.403

你可以这样做：

```
<option<?php echo ($row['datumaflevering'] == '1 week')? ' selected="selected" : '' ?>>
   Option
</option> 
```

对于每个选项...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T11:44:57.317

你确实可以。您所要做的就是更改`echo 'checked="checked"'`（`echo 'selected'`或者`echo 'selected="selected"'`如果使用 XHTML）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-31T11:46:06.280

最好在 PHP 中编写一个循环

```
<select size="1" name="datumaflevering" id="t3">

<?php
           for($i =1 ;$i < 15;$i++) {
                 $selected = ($row['datumaflevering'] == '$i weekn') ? 'selected':'';
                 echo "<option value='$i weken' $selected name='datumaflevering'>$i weken";
           }
?>

</select> 
```

# c# - 如何将我的方法移出我的主代码文件

> ID：14101109
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:40:22.843
> 
> 标签：c#, class, methods

我有一个程序可以从网络生成一些统计信息，但现在我的主文件中有 30 多个方法，我想将我的方法拆分到其他文件，以便更好地维护它们，并且主程序将更具可读性. （我是 C# 新手，我不知道我该怎么做，我需要一些参考）

我的方法是这样的。

1）字符串方法

```
cut_string(string text)

find_string(string text) 
```

2)网络方法

```
get_url_source(string url) 
```

3)特定的Web方法1

...

4)特定的Web方法2

...

现在我的主程序正在搜索一系列页面并生成一些数据。例子`myweb.com/1-100/`

```
using imports...

namespace PirateBot
{
    public partial class MyProgram : Form
    {
        private void My_Button(object sender, EventArgs e)
        {
            start_program();
        }

        private void start_program()
        {
            for (int i = 1 ; i =<100 ; i++)
            {
                //use web methods
                //use string methods
                //etc
            }
        }
        //my methods...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:45:58.123

您需要[提取类](http://sourcemaking.com/refactoring/extract-class)重构。

将相似/相关的方法组合在一起并移至不同的类。

示例（以下可以是您的新课程）

```
class StringHelper
{
  // String specific methods
}  

class WebHelper
{
  // String specific methods
}  

... 
```

# java - 使用 jsvc 守护 Java 程序

> ID：14101115
> 
> 赞同：1
> 
> 时间：2012-12-31T11:40:41.800
> 
> 标签：java, unix, daemon, jsvc

我正在尝试使用 JSVC 将 java 程序作为守护进程运行。这是我使用的简单代码：

```
package daemonexample;
public class DaemonExample implements Daemon {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    // TODO code application logic here
}

@Override
public void init(DaemonContext dc) throws DaemonInitException, Exception {
    System.out.println("initializing ...");
}

@Override
public void start() throws Exception {
    System.out.println("starting ...");
}

@Override
public void stop() throws Exception {
    System.out.println("stopping ...");
}

@Override
public void destroy() {
    System.out.println("done.");
} 
```

}

和命令：jsvc -debug -home $JAVA_HOME -cp /path/to/commons-daemon.jar:/path/to/DaemonExample.jar -user coder -outfile /tmp/example.out -errfile /tmp/example。错误 -pidfile /tmp/example.pid daemonexample.DaemonExample

当我运行它时，我得到：“将标准输出重定向到 /tmp/example.out 并将标准错误重定向到 /tmp/example.err”。但是目标文件是空的。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:54:11.677

检查您的 /tmp/example.err。它应该包含错误详细信息。

以下可能是问题：

```
1: you forgot import org.apache.commons.daemon.*; ?
2: if yes, then DaemonExample.class is not getting created.
3: make sure DaemonExample.class exists in DaemonExample.jar
4: jsvc, usually must be called using full path. i.e. /usr/bin/jsvc .... check your debug info 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T16:51:55.290

转储已解析的命令行参数 | 分离：真 | 显示版本：否 | 显示帮助：否 | 仅检查：已禁用 | 停止：假 | 等待：0 | 作为服务运行：否 | 安装服务：否 | 删除服务：否 | JVM 名称：“空”| Java 主页：“/库/Java/主页”| PID 文件：“/tmp/example.pid”| 用户名：“根”| 额外选项：1 | "-Djava.class.path=/Users/username/NetBeansProjects/DaemonExample/dist/DaemonExample.jar" | 调用的类：“daemonexample.DaemonExample”| 类参数：0

无需将用户更改为“root”！用户 'root' 验证 Home 未在命令行上指定，使用环境 Home 不在命令行或环境中，正在搜索 试图在 /System/Library/Frameworks/JavaVM.framework/Home 中找到 Java Home 试图找到 VM 配置文件 /System /Library/Frameworks/JavaVM.framework/Home/jre/lib/jvm.cfg 试图定位 VM 配置文件 /System/Library/Frameworks/JavaVM.framework/Home/lib/jvm.cfg 在 /System/ 找到 VM 配置文件Library/Frameworks/JavaVM.framework/Home/lib/jvm.cfg 在配置中找到VM客户端定义 检查库/System/Library/Frameworks/JavaVM.framework/Home/../Libraries/libclient.dylib 在配置中找到VM jvm定义检查库/System/Library/Frameworks/JavaVM.framework/Home/../Libraries/libjvm。dylib 在配置中找到VM热点定义 检查库/System/Library/Frameworks/JavaVM.framework/Home/../Libraries/libhotspot.dylib 在配置中找到VM服务器定义 检查库/System/Library/Frameworks/JavaVM.framework/Home /../Libraries/libserver.dylib 在配置中找到 VM 经典定义 检查库 /System/Library/Frameworks/JavaVM.framework/Home/../Libraries/libclassic.dylib 找不到 VM 经典的库（跳过）Java 主页位于在/System/Library/Frameworks/JavaVM.framework/Home DUMPING JAVA HOME STRUCTURE | Java 主页：“/System/Library/Frameworks/JavaVM.framework/Home” | Java VM 配置：“/System/Library/Frameworks/JavaVM.framework/Home/lib/jvm.cfg”| 找到的 JVM：4 | JVM 名称：“客户端”| "

将 stdout 重定向到 /tmp/example.out 并将 stderr 重定向到 /tmp/example.err

# java - 创建泛型类的实例

> ID：14101116
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:40:46.470
> 
> 标签：java, generics

> **可能重复：**
> [在 Java 中创建泛型类型的实例？](https://stackoverflow.com/questions/75175/create-instance-of-generic-type-in-java)

我上了这些课

```
public abstract class Base {
    public String Id = "originalId";
}

public class InstanceOfBase extends Base {
    public void setString(String test) {
        this.Id = test;
    }
}

public class UseIt {
    public Test<InstanceOfBase> test = new Test<InstanceOfBase>();

    public void run() {
        InstanceOfBase instanceOfBase = test.createMe();
        System.out.println(instanceOfBase.Id);
    }
}

public abstract class Test<E extends Base> {
    public E createMe() {
        // How do I do this?
        return new E();
    }
} 
```

上面的代码无法编译，因为它不知道如何创建 E。我该如何实现呢？

当我调用 run 方法时，我希望它应该打印“originalId”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:44:16.177

不幸的是，您不能在 java 中从泛型类型创建类。但是您可以按照 Justin Rudd 在[此线程](https://stackoverflow.com/questions/75175/create-instance-of-generic-type-in-java)中的建议进行操作并编写：

```
public E createMe(Class<E> clazz)
{
    return clazz.newInstance();
} 
```

所以你使用`class`原型来创建一个新实例。调用它可能是：

```
InstanceOfBase instanceOfBase = test.createMe(test.getClass) 
```

# java - 在运行时查找用户定义类的访问器

> ID：14101122
> 
> 赞同：0
> 
> 时间：2012-12-31T11:41:16.937
> 
> 标签：java

```
public class Emp {

    private String employeeId;
    private String employeeName;
    private double employeeSalary;

    public String getEmployeeId() {
        return employeeId;
    }
    public String getEmployeeName() {
        return employeeName;
    }
    public double getEmployeeSalary() {
        return employeeSalary;
    }

    public void setEmployeeId(String employeeId) {
        this.employeeId = employeeId;
    }
    public void setEmployeeName(String employeeName) {
        this.employeeName = employeeName;
    }
    public void setEmployeeSalary(double employeeSalary) {
        this.employeeSalary = employeeSalary;
    }
    @Override
    public String toString() {
        return "Emp [employeeId=" + employeeId + ", employeeName="
                + employeeName + ", employeeSalary=" + employeeSalary + "]";
    }

} 
```

这是一个示例类。用户将输入班级的名称。根据用户输入，我想找到 getter 和 setter 方法及其类的详细信息。为此，我使用下面的代码。但它没有显示employeeId、employeeName、employeeSalary 的gettes 和setter。

```
BeanInfo info; 
info = Introspector.getBeanInfo(c.getClass()); 
MethodDescriptor[] md = info.getMethodDescriptors();            
for (MethodDescriptor methodDescriptor : md) {
    LOGGER.info("Method-"+methodDescriptor.getMethod().getName());          
} 
```

我正在尝试使用上面的代码读取类的方法，但它没有显示声明字段的 getter 和 setter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:04:07.180

我觉得你可能需要 Field 类。Field 类提供有关类或接口的单个​​字段的信息和对它们的动态访问。反射字段可以是类（静态）字段或实例字段。使用`Field[]`. 下面是它的包装

```
import java.lang.reflect.Field; 
```

# java - 签署 JAR WebStart

> ID：14101126
> 
> 赞同：0
> 
> 时间：2012-12-31T11:41:45.930
> 
> 标签：java, jnlp, java-web-start, jide, spring-rcp

我使用 Java 版本 1.6.0_19 并创建了 spring-richclient-jideoss-1.1.1_XXXX 版本。

然后生成一个 JNLP，但是当我下载 JNLP 并收到错误消息时，spring-richclient-jideoss-1.1.1_XXXX 不是签名者

此错误取决于客户端的 Java 版本，当 JNLP 下载时，并非所有 Java 版本都会发生此错误。

该错误可能是Java的问题吗？

有什么建议？？？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:49:39.050

我记得JDK中有一个错误，在更新26中已解决。请更新，看看问题是否消失了。

[http://java.dzone.com/articles/webstart-changes-6u17-until](http://java.dzone.com/articles/webstart-changes-6u17-until)

# ruby-on-rails - 如何更改 Active::Record 包含选项的表别名（默认别名：table_name）

> ID：14101129
> 
> 赞同：2
> 
> 时间：2012-12-31T11:41:51.713
> 
> 标签：ruby-on-rails, searchlogic

我面临一个类似的问题：[https](https://github.com/binarylogic/searchlogic/issues/30) ://github.com/binarylogic/searchlogic/issues/30当我在搜索逻辑返回的查询中使用包含时。这个问题从 3 年就存在了。我希望有人可能知道解决方法。而且我也没有找到包含（来源）的实现。有关该问题的任何指南都会有所帮助。有什么方法可以更改不同连接的表别名？？？

谢谢你。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-31T12:01:44.400

在这里您可以找到包含方法的描述 [http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)

# php - 我们可以在 php 中将数组传递给 htmlentities()

> ID：14101130
> 
> 赞同：1
> 
> 时间：2012-12-31T11:41:56.580
> 
> 标签：php, html, ckeditor

实际上，我正在从数据库中获取记录。很少有记录包含由ckeditor的WIRIS插件创建的一些特殊数学字符。我有一个记录数组，很少有记录包含这样的特殊数学字符，如�。我想用实际使用的字符替换这些字符。我在这里放一段输出供参考：

```
 Array ( [answer_id] => 574146 [answer_question_id] => 74881 [answer_text] => 54��C [answer_file] => [answer_description] => [answer_is_right] => 0 ) 
```

这里的特殊字符应该是 µ。我应该如何在 HTML 中显示 µ？请帮我解决这个问题。我尝试了 htmlentities() 和 htmlspecialchars() 但两者都给出了空白屏幕输出。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:55:03.693

```
$arr = array("micro" => "µ");

$value = array_map(function ($e) {
    return htmlentities($e, ENT_NOQUOTES, 'UTF-8');
}, $arr);

print_r($value); 
```

按预期工作吗？

**编辑**：如果它们实际上显示为 �，那么我会检查您的数据库是否为表正确设置了 UTF8 字符编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:57:15.717

您必须应用于数组`htmlentities`的所有*元素*：

```
array_map("htmlentities", $you_array); 
```

# symfony - 访问网站时检测浏览器

> ID：14101136
> 
> 赞同：0
> 
> 时间：2012-12-31T11:42:31.917
> 
> 标签：symfony

无论如何在加载任何页面之前检测 symfony 中的浏览器版本然后运行相应的操作？我正在考虑使用modernizr，但我希望不必重写我所有的观点。

基本上我希望我能完成的是，在框架尝试将 url 与路由匹配之前，它会首先检查用户是否具有特定的浏览器版本，如果没有运行另一个控制器而不是路由中定义的控制器.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:34:24.390

我认为您的建议不是“最佳实践”。我假设您想将移动请求路由到 Controller 中的唯一 Action 方法。你真的不应该有一个单独的基于控制器的客户端设备。这是 MVC 中 (V) 视图的工作。

Modernizr 是一个带有 css、js 的客户端解决方案，但如果你使用的是 symfony，我更喜欢服务器端，这需要这个问题的标题..“Detecting browser on request”。

虽然您可以自定义配置您的应用程序以检测设备（并且不难），但还有一个更简单的选择。试试这个捆绑包。[https://github.com/suncat2000/MobileDetectBundle](https://github.com/suncat2000/MobileDetectBundle)。它可以做所有事情，并允许您对控制器进行修改或让 twig 了解浏览器，以便您可以进行较小的更改。

# python - 读取 .dat 文件日期字符串

> ID：14101141
> 
> 赞同：1
> 
> 时间：2012-12-31T11:42:57.930
> 
> 标签：python, string, date

在 Python 中：

得到一个 .dat 文件，其中一列是 datestr 'yyyy-mm-dd'。列年份范围从 2000 年到 2010 年，我只想使用 2005 年。

如何使用 np.loadtxt 成功阅读，并保持相同的格式。

然后我将使用：

```
time_string = yyyy-mm-dd
doy = int (time.strftime ("%j", time.strptime ( time_string, "%Y, %m, %d"))) 
```

将 yyyy-mm-dd 转换为一年中的某一天 (1-365)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:26:19.463

该问题没有指出使用`loadtxt`from的任何理由`numpy`，因此您实际上并不关心数据的加载方式。也就是说，在这种情况下，您只需使用`dtype=object`它来加载它。

假设这是您的 .dat 文件，我们称之为 d1.dat：

```
1 2000-01-01 blah
2 2005-01-01 bleh
3 2006-02-03 blih
4 2008-03-04 bloh
5 2010-04-05 bluh
6 2005-03-12 blahr 
```

然后（例如）使用加载它`numpy`：

```
import numpy
data = numpy.loadtxt('d1.dat', usecols=[1,2], dtype=object) 
```

现在您可以应用您的函数从数据的第一列中提取一年中的日期：

```
for date, _ in data:
    print time.strftime("%j", time.strptime(date, "%Y-%m-%d")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:27:39.657

```
from datetime import datetime
time_string = '2012-12-31'
dt = datetime.strptime(time_string, '%Y-%m-%d')
print dt.timetuple().tm_yday

366 
```

# c# - iTextSharp - 非常大的表内存泄漏

> ID：14101142
> 
> 赞同：2
> 
> 时间：2012-12-31T11:43:26.290
> 
> 标签：c#, pdf-generation, itextsharp

我有`SqlDataReader`一个大型记录集（大约 1M 记录），我正在尝试使用 iTextSharp 将其导出到 PDF 文档。这是我的代码：

```
 if (reader.HasRows)
 {
    int rowNum = 0;
    while (reader.Read())
    {
       if (rowNum % 2 == 1)
          datatable.DefaultCell.GrayFill = 0.8f;
       else
          datatable.DefaultCell.GrayFill = 0.95f;
       if (meRes.Trans(Lang, "Dir", CompanyID).ToUpper() == "RTL")
          for (int i = reader.FieldCount - 1; i >= 0; i--)
          {
             object o = reader[i];
             datatable.AddCell(new Phrase(o.ToString(), fntList));
          }
       else
          for (int i = 0; i < reader.FieldCount; i++)
             {
                object o = reader[i];
                datatable.AddCell(new Phrase(o.ToString(), fntList));
             }
       rowNum++;
   }
    myDocument.Add(datatable);
 } 
```

当我运行它时，它会导致可怕的内存泄漏。我可以做些什么来改善这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:43:51.143

可以设置每页的行数来减少内存压力

```
if (rowNum>0 && table1.Rows.Count % 7 == 0) // 7 = number of rows per page
{
   pdfDoc.Add(table1);
   table1.DeleteBodyRows(); // free resources
   pdfDoc.NewPage();
} 
```

# javascript - 是否可以在 1 个数据属性中存储多个键/值？

> ID：14101144
> 
> 赞同：2
> 
> 时间：2012-12-31T11:43:57.137
> 
> 标签：javascript, jquery

我想知道是否可以在`data-attr`类似的内部存储多个键/值：

```
​&lt;a href="#" data-social="network:facebook; socialId:123456789" id="facebook">Facebook</a> 
```

然后在我的脚本中使用它们时，只需选择它们`$('#facebook').data('social.socialId');`或类似的东西，而不必将它们中的每一个分解成自己的属性？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T11:47:49.607

您也不需要将其限制为仅一个`data-*`属性。您可以随时根据需要使用任意数量。

```
​&lt;a href="#" data-social-network="facebook" data-social-id="123456789" id="facebook">Facebook</a> 
```

```
var socialId = $('#facebook').data('social-id'); 
```

* * *

但是，如果你仍然坚持。可以存储 JSON 字符串并对其进行解析。

```
​&lt;a href='#' data-social='{ "network": "facebook", "socialId": 123456789 }' id='facebook'>Facebook</a> 
```

```
var socialId = $('#facebook').data('social').socialId; 
```

JSON 对象由 jQuery 自动解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:48:23.410

您可以在属性中以 JSON 格式存储数据，例如

```
<div id="myElement" data-json='["value1", "value2", "value3"]'></div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

然后像这样检索它

```
var data = JSON.parse($('#myElement').attr('data-json')​); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:48:42.363

将它们存储为对象。

```
$('#facebook').data('social', { network: 'facebook', socialId: 12345679 }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-31T11:49:25.293

我相信你可以使用 JSON 并且它会自动解析

```
​&lt;a href="#" data-social="{network:facebook; socialId:123456789}" id="facebook">Facebook</a> 
```

会为

```
$('#facebook').data('social').socialId; 
```

# android - 用于在 android 中获取 RSS 提要的 HTML 解析

> ID：14101151
> 
> 赞同：0
> 
> 时间：2012-12-31T11:44:31.757
> 
> 标签：android, rss, html-parsing

我正在尝试开发一个应用程序来从[http://xxx.xxx.com/xxxxxblog](http://xxx.xxx.com/xxxxxblog)获取 RSS 提要。有人可以帮助我进行 HTML 解析以获取提要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:45:35.987

请试试

使用此示例代码创建实际上可以处理命名空间扩展的 RSS 阅读器

[https://github.com/dodyg/AndroidRivers/blob/master/src/com/silverkeytech/android_rivers/xml/RssParser.kt](https://github.com/dodyg/AndroidRivers/blob/master/src/com/silverkeytech/android_rivers/xml/RssParser.kt)

此代码基础的库是[https://github.com/thebuzzmedia/simple-java-xml-parser](https://github.com/thebuzzmedia/simple-java-xml-parser)。

它在 Android 中也能很好地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:45:18.207

此网页上的提要似乎由`<dc:subject>`标记清楚地分隔。由于您只需要获取提要，因此最短的方法可能会更好地使用正则表达式获取提要边界，该正则表达式也将捕获标题（类似于`<dc:subject>(.*?)</dc:subject>`）。逐行阅读，一旦您检测到表达式 - 这是提要的开始。也许这在哲学上不是最正确的方法，我们应该解析所有 HTML，但为什么要运行不必要的代码......

也不乏 Java 内置解析器，从 Java 的内置 HTML 解析器开始，一直到各种替代库，在某些情况下可能更适合，有些人还建议使用 XML 解析器 (XPath)。[这里](https://stackoverflow.com/questions/7049515/how-to-work-with-html-code-readed-on-java/7049831#7049831)讨论了各种解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T11:50:08.957

您可以尝试 JSoup 来解析 HTML。

它使用起来非常简单，并且有据可查，解析页面应该不会有太多麻烦。

你可以从这个页面找到如何做到这一点

[http://jsoup.org/cookbook/extracting-data/selector-syntax](http://jsoup.org/cookbook/extracting-data/selector-syntax)

它使用不同的 html 标签来解析该标签之间的数据。

# clojure - 更新列表中包含的地图的某些值

> ID：14101156
> 
> 赞同：2
> 
> 时间：2012-12-31T11:44:45.453
> 
> 标签：clojure

我有一个看起来像这样的地图列表：

```
(def balances ({:name "Steve" :money 1000} {:name "Bill" :money 1000} ...)) 
```

我正在尝试编写一个函数，将给定数量（比如说 100）的史蒂夫钱转移给比尔并更新数据结构：

```
({:name "Steve" :money 900} {:name "Bill" :money 1100}) 
```

我认为该函数每次都应该期望余额作为参数，并且看起来像这样：

```
(defn transfer [current-balances amount sender receiver] ... ) 
```

像这样的函数看起来如何？这是一种管理和更新账户余额的聪明方法吗？一般来说，我的程序将采用相当长的**转移**列表并将它们迭代地应用于**余额**结构。*由于Clojure*中的持久数据结构，我是否总是必须将**平衡**结构传递给**传递**函数？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:48:25.833

事实上，您的余额都包含在一个单一的伞形数据结构下，并且该结构是一个适当的值，您的转移函数可以简单地接受描述帐户当前状态的结构，另一个描述变化的结构，并产生新的状态的帐户。这使您也可以将转移操作视为适当的值，这应该有助于处理非常长的转移列表:) 我唯一的改变是使用**余额映射而不是列表**。

```
bar> (def balances {"Steve" {:money 1000} "Bill" {:money 1000}})
#'bar/balances

bar> (def transfers [["Steve" "Bill" 100] ["Bill" "Steve" 100] 
                     ["Steve" "Bill" 10 ] ["Bill" "Steve" 10 ] 
                     ["Bill" "Steve" 10 ]])
#'bar/transfers 
```

然后定义一个简单的转移函数，它采用其中一个并将其应用于帐户

```
(defn transfer [balances [from to ammount]] 
  (-> balances 
      (update-in [from :money] - ammount) 
      (update-in [to   :money] + ammount))) 
```

该函数可用于直接将任意转账序列缩减为所有账户的状态：

```
bar> (reduce transfer balances transfers)
{"Bill" {:money 990}, "Steve" {:money 1010}} 
```

接受来自客户的新转账的函数然后可以使用此函数来更改您选择将银行存储在其中的任何内容（数据库、原子、代理等）的状态

```
bar> (def bank (agent {:current balances :ledger []}))
#'bar/bank

bar> (defn accept-transfers [transfers] 
       (send bank assoc :current (reduce transfer (:current @bank) transfers) 
                        :ledger (concat transfers (:ledger @bank))))
#'bar/accept-transfers

bar> (accept-transfers transfers)
#<Agent@2eb9bc1: {:current {"Bill" {:money 1000}, "Steve" {:money 1000}}, :ledger []}> 
```

这将转账放在银行队列中（并返回 REPL 在转账可能正在运行时快速打印的代理*）*，当我们查看银行时，我们看到所有这些转账都已应用。

```
bar> bank
#<Agent@2eb9bc1: {:current {"Bill" {:money 990}, "Steve" {:money 1010}}, 
                  :ledger (["Steve" "Bill" 100] ["Bill" "Steve" 100] 
                           ["Steve" "Bill" 10] ["Bill" "Steve" 10] 
                           ["Bill" "Steve" 10])}> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T13:46:54.980

Clojure 数据是不可变的，您无法修改它。您需要使用 STM。

这是示例代码（简化为问题点）。

```
(def account1 {:name "Foo" :money (ref 1000)})
(def account2 {:name "Bar" :money (ref 1000)})

(defn transfer
  [from to amount]
  (dosync
     (alter (:money from) - amount)
     (alter (:money to) + amount)))

(transfer account1 account2 100)

(println @(:money account1))
(println @(:money account2)) 
```

更多信息请访问[http://clojure.org/refs](http://clojure.org/refs)、[http://clojure.org/atoms](http://clojure.org/atoms)，也许还有[http://clojure.org/agents](http://clojure.org/agents)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T21:24:46.520

这是我的两分钱。我希望它也会有所帮助。

```
(def balances {1 (ref {:name "Steve"
                       :money 1000})
               2 (ref {:name "Bill"
                       :money 1000})
               3 (ref {:name "John"
                       :money 1000})})

(defn balance [person-id]
  ((deref (balances person-id)) :money))

(defn credit [balance amount]
  (- balance amount))

(defn debet [balance amount]
  (+ balance amount))

(defn update-account [person-id operation-fn amount]
  (alter (get balances person-id)
         #(assoc % :money
                 (operation-fn (:money %) amount))))

(defn credit-account [person-id amount]
  (update-account person-id credit amount))

(defn debet-account [person-id amount]
  (update-account person-id debet amount))

(defn transfer [sender-id receiver-id amount]
  (if (< (credit (balance sender-id) amount) 0)
    {:result :insufficient-fund}
    (do (credit-account sender-id amount)
        (debet-account receiver-id amount)
        {:result :ok}))) 
```

测试

```
(defn transaction []
  (dosync (transfer 1 2 100)
          (transfer 2 3 200)
          (transfer 3 1 200)))

(transaction)
-> {:result :ok}

balances
-> {1 #<Ref@b54dba: {:money 1100, :name "Steve"}>,
    2 #<Ref@1020230: {:money 900, :name "Bill"}>,
    3 #<Ref@1803641: {:money 1000, :name "John"}>} 
```*

# html - 如何将drupal站点转换为html文件

> ID：14101157
> 
> 赞同：0
> 
> 时间：2012-12-31T11:44:46.383
> 
> 标签：html, drupal-7

我在 drupal7 中有一个站点，我想创建离线包。所以 - 有人知道如何将我网站中的页面转换为 html 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T14:48:25.173

似乎您想要网站的本地静态副本？您可以使用[http://www.httrack.com/](http://www.httrack.com/)等工具进行复制。请注意，任何动态内容都将变为静态，因此许多功能可能无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:48:38.553

如果你想创建站点的备份，我建议你应该使用[备份和迁移](http://drupal.org/project/backup_migrate)模块来备份数据库和[备份迁移文件](http://drupal.org/project/backup_migrate_files)模块来备份文件。
最好也将您的远程站点备份到本地系统。

但是，如果您需要将内容导出为 HTML 页面，您应该尝试使用[HTML 导出](http://drupal.org/project/html_export)模块，它正是这样做的。

# css - 在容器中浮动多个元素

> ID：14101160
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:45:19.603
> 
> 标签：css, css-float

**我懂了：**

[演示](http://jsbin.com/urodit/1/edit)。

**我想要这个结果：**

![在此处输入图像描述](../Images/78fa819cef3291fb563cc7b366d186d4.png)

**我做到了这一点：**

[演示](http://jsbin.com/urodit/2/edit)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:42:59.880

有两种方法可以灵活地做到这一点。两者都消除了对浮点数（和清除浮点数）的需求，并且都不需要 JavaScript 来实现。

首先是使用flexbox。这里的好处是，如果没有足够的空间让元素舒适地放在一排，它们会适应。缺点是 IE10 是第一个支持它的 IE 版本。作为后备，您需要`display: inline-block`在每个元素上`flex`使用它们。

[http://jsfiddle.net/n4Yzc/7/](http://jsfiddle.net/n4Yzc/7/)

```
.always-visible {
    display: flex; /* prefixed attribute: -moz-flex, -webkit-flex */
    align-items: stretch; /* prefixed property: -moz-align-items, -webkit-align-items */
    flex-flow: row wrap; /* prefixed property */
}

.toggle-me {
    background-color: green;
    flex: 1 1 5em; /* prefixed property */
} 

.name-mail {
    background-color: red;
    flex: 1 1 8em; /* prefixed property */
}

.description {
    background-color: yellow;
    flex: 2 1 50%; /* prefixed property */
}

.favourite-food {
    background-color: orange;
} 
```

二是使用`display: table`属性。这个解决方案得到了很好的支持（IE8+），但它最终在更窄的设备上看起来被压扁了。

[http://jsfiddle.net/n4Yzc/5/](http://jsfiddle.net/n4Yzc/5/)

```
.always-visible {
    display: table;
}

.toggle-me {
    background-color: green;
    display: table-cell;
} 

.name-mail {
    background-color: red;
    display: table-cell;
}

.description {
    background-color: yellow;
    display: table-cell;
}

.favourite-food {
    background-color: orange;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:56:44.027

请参阅小提琴以获得所需的输出：http: [//jsfiddle.net/n4Yzc/2/](http://jsfiddle.net/n4Yzc/2/)

```
.toggle-me {
background-color: green;
  float:left;
    height:100px;
}

.name-mail {
background-color: red;
    float:left;
    height:100px;
}

.description {
background-color: yellow;
    float:left;
    width:67%;
}

.favourite-food {
background-color: orange;
} 
```

**更新小提琴：http:** [//jsfiddle.net/n4Yzc/6/](http://jsfiddle.net/n4Yzc/6/)

基于**toggle-me和name-mail div的****描述div**的宽度可变宽度。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:29:04.737

调整高度 `toggle-me, name-mail`和`description`类，如下所示

```
 .toggle-me {
    background-color: green;
    float:left;
      height:150px;
    }

    .name-mail {
    background-colo

        r: red;
        float:left;
          height:150px;
        }

        .description {
        background-color: yellow;
          height:150px;
        }

        .favourite-food {
        background-color: orange;
        } 
```**

# linux - perl 中的 awk gsub

> ID：14101172
> 
> 赞同：-2
> 
> 时间：2012-12-31T11:46:14.690
> 
> 标签：linux, perl, unix

我有一个名为 test.txt 的文件名，内容如下。

```
cat test.txt
MOD_12345_67890 
```

我需要摆脱文件中的“MOD_”

我用了

```
my $file = `awk '{gsub("MOD_", "");print}' test.txt`; 
```

在 perl 中。它删除 MOD_ 并按预期打印 12345_67890 但输出后有更多空格。

我的输出语句是

```
my $new_file = $file . ".dat";
print "$new_file"; 
```

我的输出应该如下。

```
12345_67890.dat 
```

但我得到的输出为

```
12345_67890
.dat 
```

.dat 将出现在下一行

谁能帮我删除数字后的空格或垃圾值，输出应该是 12345_67890.dat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:48:14.293

Perl 默认不处理它的输入。这意味着每个输入行上的尾随换行符仍然存在，这与 Awk 不同。您需要`chomp`将换行符从输入行中删除，或者执行类似`s/$/.dat/`. 或者使用选项运行 Perl `-l`，这将从输入中删除换行符并将它们重新添加到输出中。

你的问题`gsub`不是很清楚。要删除前导“MOD_” `s/^MOD_//`，. 要在一个表达式中进行两种替换，`perl -pe 's/^MOD_(.*)$/$1.dat/' test.txt`. 括号将他们的匹配捕获到`$1`; 额外的括号创建额外的反向引用`$2`,`$3`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:00:24.527

做就是了：

```
$file =~ s/^MOD_//; 
```

这将从字符串的开头删除“MOD_”。要模拟`awk`您编写的 gsub 函数，请执行以下操作：

```
$file =~ s/MOD_//g; 
```

这将从字符串中的任何位置删除所有出现的“MOD_”。在这种情况下，没有理由使用反引号（从来没有理由使用反引号代替`qx`！）。

# java - 自动执行自定义 Maven 插件

> ID：14101176
> 
> 赞同：3
> 
> 时间：2012-12-31T11:46:37.960
> 
> 标签：java, maven-2, maven-plugin

我已经实现了一个 Maven 2 插件。

我对我的 Mojo 有这样的定义：

```
/**
 * Goal which combines files.
 *
 * @goal combine
 * @phase compile
 */
public class CombineMojo extends AbstractMojo { 
```

我必须将它添加到我的项目（使用插件）pom中：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>base-project</groupId>
    <artifactId>base-project</artifactId>
    <version>1.0-SNAPSHOT</version>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>combine-maven-plugin</artifactId>
                <version>1.0-SNAPSHOT</version>
                <configuration>
                    <input>src/input.html</input>
                    <output>html/output.html</output>
                </configuration>
                <executions>
                    <execution>
                        <id>combine-maven-plugin</id>
                        <goals>
                            <goal>combine</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

但是我应该怎么做才能自动执行它而不是在 pom.xml 中定义。我尝试添加

```
@execute ... 
```

进入我的 Mojo 定义，但它没有用。顺便说一句，我应该定义一个 id，它需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T16:02:17.033

[只有在 Maven 中绑定了生命周期阶段](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)，才能执行 Maven 插件。

# c# - 在 C# 中动态创建表

> ID：14101177
> 
> 赞同：0
> 
> 时间：2012-12-31T11:46:48.863
> 
> 标签：c#, c#-4.0, tabular

我在文件后面的代码中动态创建了一个表：

![这是我现在得到的输出的屏幕截图](../Images/46225c5ff72dbd271c693b6b9e3af0af.png)

创建这个表的代码是这样的：

```
protected void BindGridviewNew(Guid SubscriptionID)
    {
        pnlreapeter.Visible = true;
        gridviewnew.Visible = true;
        List<string> plannig = new List<string>();
        var s = m.bussinesCollection.BussinesPlanning.GetSingleSubVersionTrueFalse(SubscriptionID);
        if (s != null)
        {
            if (s.T1.Value)
            {
                plannig.Add("T1");
            }
            if (s.T2.Value)
            {
                plannig.Add("T2");
            }
            if (s.T3.Value)
            {
                plannig.Add("T3");
            }
            if (s.T4.Value)
            {
                plannig.Add("T4");
            }
            if (s.T5.Value)
            {
                plannig.Add("T5");
            }
            if (s.T6.Value)
            {
                plannig.Add("T6");
            }
            if (s.T7.Value)
            {
                plannig.Add("T7");
            }
            if (s.T8.Value)
            {
                plannig.Add("T8");
            }
            if (s.T9.Value)
            {
                plannig.Add("T9");
            }
            if (s.T10.Value)
            {
                plannig.Add("T10");
            }
        }
        DataTable PlanningDate = m.bussinesCollection.BussinesPlanning.GetRowOfPlanningDate(SubscriptionID);
        DataTable Percentage = m.bussinesCollection.BussinesPlanning.GetAllStudentsForProgressForDocentNew(SubscriptionID);
        DataTable dt = new DataTable();
        DataRow newrow;
        newrow = dt.NewRow();
        DataRow Hiddenfield;
        Hiddenfield = dt.NewRow();
        DataRow percentage;
        percentage = dt.NewRow();
        int count = plannig.Count;
        for (int j = 0; j < count; j++)
        {
            dt.Columns.Add(plannig[j], typeof(string));
            string pl = plannig[j];
            string c = pl.Substring(pl.Length - 1, 1);
            int x = Convert.ToInt32(c);           
            DataRow dr = PlanningDate.Rows[0];
            DateTime date = DateTime.Parse(dr[x-1].ToString());
            newrow[plannig[j]] = date.ToShortDateString();
            HiddenField hf = new HiddenField();
            Hiddenfield[plannig[j]] = x;
            DataRow dr1 = Percentage.Rows[0];
            LinkButton link = new LinkButton();
            link.Text = dr1[x].ToString();
            percentage[plannig[j]] = (System.Web.UI.WebControls.LinkButton) link;

        }
        dt.Rows.Add(newrow);
        dt.Rows.Add(percentage);
       // dt.Rows.Add(Hiddenfield);
        gridviewnew.DataSource = dt;
        gridviewnew.DataBind();
    } 
```

这里的问题是，在屏幕截图中，我试图获取链接按钮，但列类型是字符串，因此它显示“System.Web.UI.WebControls.LinkBut​​ton”

我想要的表是这样的：

```
 T1    |    T2    |    T3
  3/01/2012| 3/03/2012| 3/05/2012
    100    |    50    |   - 
```

单击 100 或 50 时应显示一个新的弹出窗口。

谁能帮我创建这一行..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:29:53.297

您不能将 a 添加`LinkButton`到`DataTable`. 您应该做的是将 绑定`DataTable`到`GridView`，然后使用链接按钮手动将新行添加到网格视图中，我猜在`RowDataBound`事件中，或者如果只有一行带有链接按钮，您可以添加网格视图的页脚。

检查此链接[如何以编程方式在 GridView 中插入一行？](https://stackoverflow.com/questions/181158/how-to-programmatically-insert-a-row-in-a-gridview)

# java - Android 应用程序类 - 字段成员的生命周期

> ID：14101188
> 
> 赞同：0
> 
> 时间：2012-12-31T11:47:56.383
> 
> 标签：java, android, eclipse, android-activity

我有 Android 应用程序和自己的应用程序派生类，其中包含一些内部数据。除其他外，还有一些字符串字段。问题是，如果我将应用程序置于前台，在其他应用程序上工作，再次切换回我的应用程序，该应用程序可能会重新启动，因为它被系统杀死了。不幸的是，应用程序对象似乎没有被再次创建，因为应用程序对象的 onCreate 方法没有被调用并且所有字段都设置为空。我的活动被重新创建，但所有应用程序的对象字段都是空的。什么时候调用 Application.onCreate 方法？如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:53:49.003

没有可以注册的 onCreate。
在后来的 API 中，有一种方法可以注册到 Activity 生命周期函数。然后你可以做任何你想做的事。

基本上，您应该做的是`SharedPrefrences`用于存储信息。

我要做的是：

```
class MyApp extends Application {
    private static String someResource = null;
    public static String getSomeResource(Context context) {
       if(someResource == null) {
           SharedPrefrences prefs = (SharedPrefrences)
                  context.getSystemService(Context.SHARED_PREFRENCES);
           someResource = prefs.getString(SOME_RESOURCE, null);
       }
    return someResource;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:19:27.347

应用程序 onCreate() 在其生命周期内只会调用一次，即。仅在应用程序启动时。

正如thepoosh 所建议的，[下面的答案](https://stackoverflow.com/a/14101249/1140321)是有效的，如果您的应用程序被杀死，数据仍然保存在共享首选项中。

# c# - 收到的短信不显示在 C# 应用程序中

> ID：14101189
> 
> 赞同：0
> 
> 时间：2012-12-31T11:48:13.840
> 
> 标签：c#, sms, gsm

我有一个接收短信并显示它们的 C# 应用程序。

当我在没有此程序并使用 GSM 调制解调器的情况下发送 SMS 时，SMS 会保存在 GSM 调制解调器中。当我启动应用程序并单击“阅读短信”时，它只显示以前收到的短信，并且我已经在 GSM 调制解调器中看到过这些短信。我最近发送的一条新短信不可见。

该程序仅显示从调制解调器读取的 SMS。我应该怎么做才能在程序中立即显示收到的短信？

代码：

```
public Receive()
{
    //
    // Required for Windows Form Designer support
    //
    InitializeComponent();

    //
    // TODO: Add any constructor code after InitializeComponent call
    //
}

/// <summary>
/// Clean up any resources being used.
/// </summary>
protected override void Dispose( bool disposing )
{
    if( disposing )
    {
        if(components != null)
        {
            components.Dispose();
        }
    }
    base.Dispose( disposing );
}

#region Windows Form Designer generated code
/// <summary>
/// Required method for Designer support - do not modify
/// the contents of this method with the code editor.
/// </summary>
private void InitializeComponent()
{
    this.btnReadMessage = new System.Windows.Forms.Button();
    this.rbMessagePhone = new System.Windows.Forms.RadioButton();
    this.rbMessageSIM = new System.Windows.Forms.RadioButton();
    this.txtOutput = new System.Windows.Forms.TextBox();
    this.groupBox1 = new System.Windows.Forms.GroupBox();
    this.dataGrid1 = new System.Windows.Forms.DataGrid();
    this.groupBox1.SuspendLayout();
    ((System.ComponentModel.ISupportInitialize)(this.dataGrid1)).BeginInit();
    this.SuspendLayout();
    //
    // btnReadMessage
    //
    this.btnReadMessage.FlatStyle = System.Windows.Forms.FlatStyle.System;
    this.btnReadMessage.Location = new System.Drawing.Point(192, 80);
    this.btnReadMessage.Name = "btnReadMessage";
    this.btnReadMessage.Size = new System.Drawing.Size(112, 24);
    this.btnReadMessage.TabIndex = 17;
    this.btnReadMessage.Text = "Read All Messages";
    this.btnReadMessage.Click += new System.EventHandler(this.btnReadMessage_Click);
    //
    // rbMessagePhone
    //
    this.rbMessagePhone.FlatStyle = System.Windows.Forms.FlatStyle.System;
    this.rbMessagePhone.Location = new System.Drawing.Point(16, 56);
    this.rbMessagePhone.Name = "rbMessagePhone";
    this.rbMessagePhone.Size = new System.Drawing.Size(64, 24);
    this.rbMessagePhone.TabIndex = 25;
    this.rbMessagePhone.Text = "Phone";
    //
    // rbMessageSIM
    //
    this.rbMessageSIM.Checked = true;
    this.rbMessageSIM.FlatStyle = System.Windows.Forms.FlatStyle.System;
    this.rbMessageSIM.Location = new System.Drawing.Point(16, 24);
    this.rbMessageSIM.Name = "rbMessageSIM";
    this.rbMessageSIM.Size = new System.Drawing.Size(64, 24);
    this.rbMessageSIM.TabIndex = 24;
    this.rbMessageSIM.TabStop = true;
    this.rbMessageSIM.Text = "SIM";
    //
    // txtOutput
    //
    this.txtOutput.Location = new System.Drawing.Point(8, 304);
    this.txtOutput.Multiline = true;
    this.txtOutput.Name = "txtOutput";
    this.txtOutput.ScrollBars = System.Windows.Forms.ScrollBars.Vertical;
    this.txtOutput.Size = new System.Drawing.Size(448, 144);
    this.txtOutput.TabIndex = 57;
    this.txtOutput.Text = "";
    //
    // groupBox1
    //
    this.groupBox1.Controls.Add(this.rbMessageSIM);
    this.groupBox1.Controls.Add(this.rbMessagePhone);
    this.groupBox1.Location = new System.Drawing.Point(8, 8);
    this.groupBox1.Name = "groupBox1";
    this.groupBox1.Size = new System.Drawing.Size(176, 96);
    this.groupBox1.TabIndex = 58;
    this.groupBox1.TabStop = false;
    this.groupBox1.Text = "Message Storage";
    //
    // dataGrid1
    //
    this.dataGrid1.DataMember = "";
    this.dataGrid1.HeaderForeColor = System.Drawing.SystemColors.ControlText;
    this.dataGrid1.Location = new System.Drawing.Point(8, 120);
    this.dataGrid1.Name = "dataGrid1";
    this.dataGrid1.Size = new System.Drawing.Size(448, 176);
    this.dataGrid1.TabIndex = 59;
    //
    // Receive
    //
    this.AutoScaleBaseSize = new System.Drawing.Size(5, 13);
    this.ClientSize = new System.Drawing.Size(464, 454);
    this.Controls.Add(this.dataGrid1);
    this.Controls.Add(this.groupBox1);
    this.Controls.Add(this.txtOutput);
    this.Controls.Add(this.btnReadMessage);
    this.Name = "Receive";
    this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen;
    this.Text = "Read Messages";
    this.Load += new System.EventHandler(this.Receive_Load);
    this.groupBox1.ResumeLayout(false);
    ((System.ComponentModel.ISupportInitialize)(this.dataGrid1)).EndInit();
    this.ResumeLayout(false);

}
#endregion

private void btnReadMessage_Click(object sender, System.EventArgs e)
{
    Cursor.Current = Cursors.WaitCursor;
    string storage = GetMessageStorage();

    try
    {
        // Read all SMS messages from the storage

        DecodedShortMessage[] messages = CommSetting.comm.ReadMessages(PhoneMessageStatus.All,storage );
        foreach(DecodedShortMessage message in messages)
        {
            Output(string.Format("Message status = {0}, Location = {1}/{2}",
                StatusToString(message.Status),    message.Storage, message.Index));
            ShowMessage(message.Data);
            Output("");
        }
        Output(string.Format("{0,9} messages read.", messages.Length.ToString()));
        Output("");
    }
    catch(Exception ex)
    {
        MessageBox.Show(ex.Message);
    }

    Cursor.Current = Cursors.Default;
}

private void BindGrid(SmsPdu pdu)
{

    DataRow dr=dt.NewRow();
    SmsDeliverPdu data = (SmsDeliverPdu)pdu;

    dr[0]=data.OriginatingAddress.ToString();
    dr[1]=data.SCTimestamp.ToString();
    dr[2]=data.UserDataText;
    dt.Rows.Add(dr);

    dataGrid1.DataSource=dt;
}

private void ShowMessage(SmsPdu pdu)
{
    if (pdu is SmsSubmitPdu)
    {
        // Stored (sent/unsent) message
        SmsSubmitPdu data = (SmsSubmitPdu)pdu;
        Output("SENT/UNSENT MESSAGE");
        Output("Recipient: " + data.DestinationAddress);
        Output("Message text: " + data.UserDataText);
        Output("-------------------------------------------------------------------");
        return;
    }
    if (pdu is SmsDeliverPdu)
    {
        // Received message
        SmsDeliverPdu data = (SmsDeliverPdu)pdu;
        Output("RECEIVED MESSAGE");
        Output("Sender: " + data.OriginatingAddress);
        Output("Sent: " + data.SCTimestamp.ToString());
        Output("Message text: " + data.UserDataText);
        Output("-------------------------------------------------------------------");

        BindGrid(pdu);

        return;
    }
    if (pdu is SmsStatusReportPdu)
    {
        // Status report
        SmsStatusReportPdu data = (SmsStatusReportPdu)pdu;
        Output("STATUS REPORT");
        Output("Recipient: " + data.RecipientAddress);
        Output("Status: " + data.Status.ToString());
        Output("Timestamp: " + data.DischargeTime.ToString());
        Output("Message ref: " + data.MessageReference.ToString());
        Output("-------------------------------------------------------------------");
        return;
    }
    Output("Unknown message type: " + pdu.GetType().ToString());
}

private string StatusToString(PhoneMessageStatus status)
{
    // Map a message status to a string
    string ret;
    switch(status)
    {
        case PhoneMessageStatus.All:
            ret = "All";
            break;
        case PhoneMessageStatus.ReceivedRead:
            ret = "Read";
            break;
        case PhoneMessageStatus.ReceivedUnread:
            ret = "Unread";
            break;
        case PhoneMessageStatus.StoredSent:
            ret = "Sent";
            break;
        case PhoneMessageStatus.StoredUnsent:
            ret = "Unsent";
            break;
        default:
            ret = "Unknown (" + status.ToString() + ")";
            break;
    }
    return ret;
}

private string GetMessageStorage()
{
    string storage = string.Empty;
    if (rbMessageSIM.Checked)
        storage = PhoneStorageType.Sim;
    if (rbMessagePhone.Checked)
        storage = PhoneStorageType.Phone;
    if (storage.Length == 0)
        throw new ApplicationException("Unknown message storage.");
    else
        return storage;
}

private void Output(string text)
{
    if (this.txtOutput.InvokeRequired)
    {
        SetTextCallback stc = new SetTextCallback(Output);
        this.Invoke(stc, new object[] { text });
    }
    else
    {
        txtOutput.AppendText(text);
        txtOutput.AppendText("\r\n");
    }
}

private void Receive_Load(object sender, System.EventArgs e)
{
    dt.Columns.Add("Sender",typeof(string));
    dt.Columns.Add("Time",typeof(string));
    dt.Columns.Add("Message",typeof(string));
}

private void Output(string text, params object[] args)
{
    string msg = string.Format(text, args);
    Output(msg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:09:43.307

如果您使用的是 GSMCOMM 课程，我认为您错过了

```
comm.MessageReceived += new MessageReceivedEventHandler(comm_MessageReceived); 
```

尽管您必须将调制解调器设置为通知您收到的消息。查看 GSMComm 演示中包含的示例。

# php - 是否有任何 php 函数返回图像句柄，以便我可以在 img src html 标记中使用它？

> ID：14101197
> 
> 赞同：0
> 
> 时间：2012-12-31T11:48:54.807
> 
> 标签：php, image, php-gd

我尝试了这个[imagejpeg()](http://php.net/manual/en/function.imagejpeg.php) php 方法，但它在运行代码时将图像返回给浏览器。

但是我需要一个返回图像 URL 的方法，以便我可以在我的 img 标签中使用它。

目前我必须使用 -

```
<img src="siteurl/myphpfile.php" /> 
```

但我认为如果该方法返回一个图像处理程序会更好，这样我就可以在我的 img 标签中使用它，比如 -

```
<img src="image.jpg" /> 
```

我的 myphpfile.php 是包含代码的文件。

在 php 手册中搜索了许多功能，但没有运气，我也在使用这种方法`imagettftext()`在图像上添加文本。

文件中的总代码——

```
<?php
    function myimagecreate( $myname ) {
    $headurl = 'template_header01.jpg';
    header('Content-type: image/jpeg');
    $text = "My Full Text";
    $name = $text.".jpg";
    $jpg_image = imagecreatefromjpeg($headurl);
    $black = imagecolorallocate($jpg_image, 1, 1, 1);
    $font_path = 'myfont/arial.ttf';
    imagettftext($jpg_image, 24, 0, 175, 85, $black, $font_path, $text);
    imagejpeg($jpg_image,'mynameimg.jpg');
    imagedestroy($jpg_image);
    return 'mynameimg.jpg';
    }

    $to = 'swapnesh20032003@gmail.com';
    $subject = $myname; 
    $message = '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Kings</title>
</head>

<body>
<table width="100%"><tr><td valign="bottom" align="center" height="282"><img src="'.myimagecreate( $myname ).'" /></td></tr></table></table></body></html>';

mail($to,$subject,$message);    
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:52:52.043

有两种更明显的方法可以解决这个问题。

1.  **将渲染图像写入文件**

    这可以`imagejpeg`通过传入文件名的第二个参数来使用，例如：

    ```
     $im = imagecreatetruecolor(..);
     // ..
     imagejpeg($im, 'image.jpg'); 
    ```

2.  **使用 URL 重写**

    您始终可以通过`.jpgs`一个特殊文件夹中的所有内容（例如`/dynamic/image.jpg`通过您的脚本来渲染它）。如果您愿意，您甚至可以将文件名 ( `image.jpg`) 作为脚本的参数，告诉它在图像是动态的情况下要渲染什么。

显然，如果您的图像需要在每个请求中有所不同，那么 #2 是更好的选择。但是，如果您的图像是静态的（即您`imagettftext`总是在同一图像上写相同的文本），则建议使用 #1 更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:57:38.210

您的 PHP 页面可以返回图像：

```
<?php
$filename = "my_image.png";
$image = fopen($filename, 'rb');

header("Content-Type: image/png");
header("Content-Length: " . filesize($filename));
fpassthru($image); 
```

然后，您可以让它读取 GET 参数并返回适当的图像。然后您可以在其他页面中使用它，如下所示：

```
<img src="my_image_return_page.php?image=<?=$image_id?>"> 
```

这当然适用于 PNG 图像类型，对于其他类型，您必须将 Content-Type 标头更改为适当的格式。[您可以在此处](http://en.wikipedia.org/wiki/Internet_media_type#Type_image)找到可用的格式。

# 扩展答案：

假设您想要一个脚本，该脚本需要根据传递的图像 ID 从数据库中读取图像。

```
<?php
//Get image id
$imageId = $_GET['id'];

//You search for your image in database here, and return the location
//Additionally if image with that id wasn't found, you can return location of some image that says "Ooops, we couldn't find image you were looking for".
//Say you save image's location in $imageLocation variable.

//Get pathinfo of your image file
$pathInfo = pathinfo($imageLocation);

$extension = $pathInfo['extension'];
if ($extension == "jpg") {
    $contentType = "jpeg";
} elseif ($extension == "png") {
    $contentType = "png";
} elseif ($extension == "gif") {
    $contentType = "gif";
} else {
    //Handle error here if format isn't recognized
}

//Set content type
header("Content-Type: image/".$contentType);
//Set content length
header("Content-Length: ". filesize($imageLocation));

//This is shorter way then using fopen, but has the same result
echo file_get_contents($imageLocation); 
```

# architecture - Spring Integration - 需要建议

> ID：14101199
> 
> 赞同：0
> 
> 时间：2012-12-31T11:49:10.863
> 
> 标签：architecture, spring-integration

我对 Spring Integration 很陌生，需要在我的工作中找出解决方案。

我需要做的是：
- 从 db 提供轮询机制。
- 应该能够在某些情况发生时启用/禁用轮询
- 轮询需要超时（例如，如果状态在 5 分钟内没有改变，则需要做一些事情）
- 需要将数据传递给轮询机制

基本上它都是我需要的。我正在考虑使用 Spring 的**任务：计划任务**，但我看不到手动启用/禁用任务和设置超时的选项。需要传递给轮询机制的数据可以存储在 Spring bean 中。你们能否建议我是朝着正确的方向前进还是应该尝试其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T02:14:02.877

这是一个简单的示例，说明如何使用 spring 集成来轮询数据库

```
 <int-jdbc:inbound-channel-adapter 
            id="jdbcPoller" channel="jdbc.poll.channel"
            data-source="dataSource" query="select count(*) from test_table">
        <int:poller fixed-rate="500" task-executor="pollTaskExecutor"/>
    </int-jdbc:inbound-channel-adapter>

    <int:channel id="jdbc.poll.channel"/> 
```

如果你想有条件地停止它，你可以做这样的事情

```
 //stop the polling
    AbstractEndpoint poller = context.getBean("jdbcPoller",AbstractEndpoint.class);
    poller.stop(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:54:18.547

您可以使用`task:scheduled-tasks`，并且您需要实现所需的位，因为 spring 并没有提供您想要的 OOTB 的所有功能。

*   禁用位可以通过任务检查它是否被禁用来完成，因此不做任何事情。

*   关于超时，您的代码需要弄清楚“状态不变”和“做某事”是什么。

*   需要向轮询机制传递数据：轮询机制可以加载它需要的数据，或者从源（队列、共享对象等）读取数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T15:21:02.973

使用 Spring Integration，您可以使用`<int-jdbc:inbound-channel-adapter/>`. `Lifecycle methods` `isRunning()`您可以使用, `start()`,来启动/停止它`stop()`。

或者，您可以向 a 发送消息以`<control-bus/>`启动/停止。

有多种方法可以检测到无活动（例如，使用 JMX 查看通道的消息计数等）。

# php - 更改mysql表字符集

> ID：14101204
> 
> 赞同：0
> 
> 时间：2012-12-31T11:49:33.103
> 
> 标签：php, mysql

我有一张表，前段时间在其中插入了数据。php 包含的数据和其中的字符集是 utf-8 。

```
mysql_query("set names utf8"); 
```

现在，我在另一个项目中需要这个表，所有数据都将显示在 php mysql 默认字符集上。

问题：我的数据是波斯语，当我设置字符集 utf-8 时，一切正常，但没有字符集数据转换为“？？？？？？” 我该怎么办？！

我想将旧表中的所有数据导入到新字符集的新表中！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:54:47.563

试试这个可能对你有帮助

```
<?php

   header('Content-Type: text/html; charset=utf-8');
?>
and then in the connection

<?php
 $dbLink = mysql_connect($argHost, $argUsername, $argPassword);
    mysql_query("SET character_set_results=utf8", $dbLink);
    mb_language('uni'); 
    mb_internal_encoding('UTF-8');
    mysql_select_db($argDB, $dbLink);
    mysql_query("set names 'utf8'",$dbLink);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:23:20.027

```
///
$SERVER = "http://localhost:8084";
$db = mysql_connect('localhost','root') or die("Not Connected");
$sldb = mysql_select_db('vifarbydata',$db);

mysql_query("set names utf8");
$sql = "SELECT * FROM `region`  ";
$res = mysql_query($sql);
while($h=(mysql_fetch_array($res)))
{
    $row[] = $h;
}
mysql_close($db);
/// set another character set
$SERVER = "http://localhost:8084";
$db = mysql_connect('localhost','root') or die("Not Connected");
$sldb = mysql_select_db('vifarbydata',$db);
foreach ($row as $item)
{
    echo $sql = "insert into  `region2` (id,name,myId) values (".$item['id'].",'".$item['name']."','".$item['myId']."')  ";
    mysql_query($sql);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T13:55:42.763

@afsane，使用 mysqldump，您可以从 old_table 转储数据，然后将其导入具有新字符编码的 new_table。

```
mysqldump -u user -p --no-create-info schema old_table > old_table.dump
mysql -u user -p schema new_table < old_table.dump 
```

这将比通过 PHP 进行转换快得多。

# architecture - “dapper-dot-net”中的交易

> ID：14101213
> 
> 赞同：5
> 
> 时间：2012-12-31T11:50:39.550
> 
> 标签：architecture, data-access-layer, dapper

如果我的 DAL 使用 dapper-dot-net，我如何创建交易？

我的 c# winform 应用程序将在网络中使用，数据将保存到中央 sql 服务器。

我的用例需要使用事务。我可以使用 dapper 来做到这一点，还是需要使用 NHibernate 之类的东西？

另外，如果我使用存储过程，这个框架是否有任何风险或限制？由于任何可能的限制，我是否需要改变我的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T14:13:46.630

我在使用 sprocs 时没有遇到任何限制，而且使用 dapper 的风险与使用 sprocs 的风险相同

这是一个关于如何使用 dapper 交易的简单示例

```
using (var connection = Db.GetConnection())
{
     connection.Open();
     IDbTransaction transaction = connection.BeginTransaction();
     try
     {
         var newId= connection.Query<int>(@"Select id from table1 where id=@id", new{id}, transaction).Single();
         connection.Execute(@"INSERT into table1 ...",new {p1, p2}, transaction);
         connection.Execute(@"INSERT into table2 ...",new {p1, p2}, transaction);
         transaction.Commit();
     }
     catch (Exception ex)
     {
         transaction.Rollback();
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T23:40:03.100

dapper 可以使用 ado.net 事务和隐式事务。对于 ado.net 事务，只需正常创建事务并通过`transaction`主要方法上可用的参数提供它。对于隐式事务，`TransactionScope`正常使用即可。

# php - 如果其他字段存在验证错误消息，则输入值将转换为垃圾值

> ID：14101215
> 
> 赞同：1
> 
> 时间：2012-12-31T11:50:46.863
> 
> 标签：php, javascript, jquery, codeigniter

我正在使用以下表单，但是当我在未输入任何必填字段的情况下提交表单时，其他输入字段中的值将转换为垃圾值。

```
<?php echo form_open_multipart($formAction); ?> 
```

// 表单动作来自控制器

```
<div id="content">
    <table  border="0" cellpadding="0" cellspacing="5" width="100%" >
        <tr>         
            <td>First Name<em>*</em></td>
            <td>
                <?php
                $data = array('name' => 'firstName');
                echo form_input($data, $firstName);
                ?>
            </td>
        </tr>
        <tr>
            <td>Middle Name<em>*</em></td>
            <td>
                <?php
                $data = array('name' => 'middleName');
                echo form_input($data, $middleName);
                ?>
            </td>
        </tr>
        <tr>
            <td>Last Name<em>*</em></td>
            <td>
                <?php
                $data = array('name' => 'lastName');
                echo form_input($data, $lastName);
                ?>
            </td>
        </tr>  
        <tr>
            <td colspan="2">
                <div class="formbuttons">
                    <?php echo form_submit('submit', "Save", "class='button'"); ?>
                </div>
            </td>
        </tr>
    </table>
    <?php echo form_close(); ?> 
```

如果我在名字字段中输入“测试”并提交表单而不输入其他必填字段，则在名字文本框中显示`test&#39;s`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:57:28.007

试试这个..

echo form_input($data, html_entity_decode($firstName,ENT_QUOTES));

这应该有效。

# jquery - 如何抑制 JsHelper 为 Ajax 请求创建的链接的默认事件？（蛋糕PHP）

> ID：14101220
> 
> 赞同：0
> 
> 时间：2012-12-31T11:51:03.527
> 
> 标签：jquery, ajax, hyperlink, cakephp-2.0

**目标：**我想单击一个链接并将生成的 ajax 调用返回的 html 加载到一个 div 中。

我已经使用 JsHelper 建立了一个链接，如下所示：

```
<?php echo $this->Js->link('Do some ajax!', array( 
            'controller' => 'items',
            'action' => 'view',
            1
        ), array('update' => '#item'));?> 
```

但不是遵循ajax请求，而是遵循链接。

在 jQuery 中，可以使用来抑制链接的默认事件，`event.preventDefault()`但我找不到明显的方法来告诉 JsHelper 这样做。

**问题：**如何防止链接的默认事件？*或者*；我真的不应该使用链接吗？如果是这样，我应该使用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:14:01.387

查看[JsHelper 文档](http://book.cakephp.org/2.0/en/core-libraries/helpers/js.html#JsHelper%3a%3aevent)，您似乎会将它们并排放置：

```
echo $this->Js->link(
    'Do some ajax!', 
     array('controller' => 'items','action' => 'view', 1), 
     array('update' => '#item')
);
this->Js->event('click', $this->Js->alert('hey you!')); 
```

我怀疑你想要`alert()`在那里，但那是来自文档，我没有其他任何东西。它似乎默认为`return false;`，您应该使用它来取消点击。这是它在标记中实际输出的内容：

```
$('#some-link').bind('click', function (event) {
    alert('hey you!');
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:27:50.743

所以链接被关注的原因真的很愚蠢。我没有正确包含 jQuery……这里没有办法挽回面子。:/ 非常感谢 Jared 试图帮助我！

# android - mapView 显示白屏

> ID：14101224
> 
> 赞同：0
> 
> 时间：2012-12-31T11:51:24.760
> 
> 标签：android, google-maps, android-mapview, driving-directions

我想在我的地图视图中显示 2 个地理点之间的路线，但是当我运行时，它总是在我的地图视图上显示一个白屏。我使用此[链接](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo)中的示例作为参考

这是我的 MapActivity 类：

```
public class M_hospital_map extends MapActivity {

 // Map view
 MapView mapView = null;

 GeoPoint geoPoint;
 GeoPoint dest_geoPoint;

 // Progress dialog
 ProgressDialog pDialog;

 // Map controllers
 MapController mapController;

 GeoPoint start, dest;

 double latitude;
 double longitude;
 double dest_latitude;
 double dest_longitude;

 OverlayItem overlayitem;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.m_hospital_map);

    // Getting intent data
    Intent i = getIntent();

    Bundle bundle = i.getExtras();

    // get all data from bundle
    double user_latitude = bundle.getDouble("user_latitude");
    double user_longitude = bundle.getDouble("user_longitude");
    double dest_latitude = bundle.getDouble("dest_latitude");
    double dest_longitude = bundle.getDouble("dest_longitude");

    mapView = (MapView) findViewById(R.id.mapView); 
    mapView.setBuiltInZoomControls(true);

    DirectionsTask getDirectionsTask = new DirectionsTask();
    getDirectionsTask.execute(new GeoPoint((int)(user_latitude * 1E6),(int)(user_longitude * 1E6)),
                  new GeoPoint((int)(dest_latitude * 1E6),(int)(dest_longitude * 1E6)));

 }

 private class DirectionsTask extends AsyncTask<GeoPoint, Void, Route> {

    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(M_hospital_map.this);
        pDialog.setMessage(Html.fromHtml("<b>Google Map</b><br/>Loading Route..."));
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

        protected Route doInBackground(GeoPoint...geoPoints) {
            start = geoPoints[0];
            dest =  geoPoints[1];

                Parser parser;
                String jsonURL = "http://maps.google.com/maps/api/directions/json?";
                final StringBuffer sBuf = new StringBuffer(jsonURL);
                sBuf.append("origin=");
                sBuf.append(start.getLatitudeE6()/1E6);
                sBuf.append(',');
                sBuf.append(start.getLongitudeE6()/1E6);
                sBuf.append("&destination=");
                sBuf.append(dest.getLatitudeE6()/1E6);
                sBuf.append(',');
                sBuf.append(dest.getLongitudeE6()/1E6);
                sBuf.append("&sensor=true&mode=driving");
                Log.v("URL", sBuf.toString());

                parser = new GoogleParser(sBuf.toString());
                Route r =  parser.parse();
                return r;
        }

    protected void onPostExecute(Route route) {
        pDialog.dismiss();
        RouteOverlay routeOverlay = new RouteOverlay(route, Color.BLUE);
        mapView.getOverlays().add(routeOverlay);
        mapView.invalidate();
        mapController = mapView.getController();
        mapController.setZoom(16);
        mapView.getMapCenter();
    }
 }

 @Override
 protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
 }
} 
```

我的 m_hospital_map.xml 是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:apiKey="0WM32EymVRmIVGz-fKJhPs2BT_sH1CZtV3QG54w"
/> 
```

而且我已经使用了 INTERNET、ACCESS_FINE_LOCATION、ACCESS_COARSE_LOCATION 权限。你们能帮我吗，告诉我上面的这些代码有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:31:22.150

确保您拥有 MD5 指纹的密钥，因为现在 Google 会为 SHA1 指纹创建密钥，如果您将使用 SHA1 指纹创建的密钥与 MapView 一起使用，它将无法正常工作。

# sql-server - 如何在递归存储过程中使用数据透视

> ID：14101227
> 
> 赞同：0
> 
> 时间：2012-12-31T11:51:51.933
> 
> 标签：sql-server, stored-procedures, pivot

我`varchar`根据`spaces`（我知道空格数）来分隔

我正在使用 a`stored procedure (Recursive)`这样做

```
Alter procedure [dbo].[1234]
   @name varchar(100),
   @count int 
AS 
BEGIN 

    if @count=1
    begin
        set @name=SUBSTRING(@name,CHARINDEX(' ',@name,1)+1,LEN(@name))
        select @name
    end
    if @count>1
    begin
        select SUBSTRING(@name,1,CHARINDEX(' ',@name,1)-1)
        set @count=@count-1
        set @name=SUBSTRING(@name,CHARINDEX(' ',@name,1)+1,LEN(@name))
        exec [dbo].[1234] @name,@count
    end
END 
```

我执行以下SP

```
exec [dbo].[1234] 'a b c d e f g h',8 
```

我的结果是 ![在此处输入图像描述](../Images/40e39dcbce40e90cd36871142b1df50e.png)

但我希望我的结果为

[![图片](../Images/60c4f7dbea0f69ae1163c722ec4de532.png)](https://i.stack.imgur.com/Zo7bV.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:46:11.860

```
Alter procedure [dbo].[1234]
   @name varchar(100)
as   
Select @name='Select' + ''''+Replace(@name,' ',''',''')+''''
EXEC( @name)

GO

[1234] 'A b c d e f' 
```

这是一个[SQL Fiddle 演示](http://sqlfiddle.com/#!3/9a920/1)。

# database - 使用 mvsp java api 的 D3 连接问题

> ID：14101229
> 
> 赞同：1
> 
> 时间：2012-12-31T11:52:05.557
> 
> 标签：database, connection, pick, multivalue-database

我正在尝试**使用 MVSP java api 连接到 D3 数据库**。至今：

1.  我已经下载了`mvapi.jar`
2.  将其添加到项目`lib`文件夹中
3.  编写了connection inside`main`方法的示例代码

    ```
    String url = "jdbc:mv:d3:hostname:portNo";
    Properties props = new Properties();
    props.setProperty("username", "");
    props.setProperty("password", "");

    String account = "AGCO";        
    String password = "";

    MVConnection connection = null;

    try {

       // Getting error at this point           
       connection = new MVConnection(url,props);

       MVStatement mvStatement = connection.createStatement();
       connection.logTo(account,password);
       MVResultSet results = mvStatement.executeQuery(query);
    } 
    ```

`com.tigr.mvapi.exceptions.MVException: server error with errorCode 1023.`

我检查了控制台，但无法找出实际原因，或者我是否输入了错误的用户名、密码。

请提出我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T02:27:42.240

首先，您必须设置断点或跟踪哪个函数抛出错误。然后检查路线，（文件名）可能你会比我有更多的经验，但请记住，提供完整的路线（“帐户，文件名”，最后一个逗号很重要）绝不是一个坏主意，同时让你如果文件名位于您登录的不同帐户中，则更安全且是强制性的。

和往常一样，请验证这些事情：

*   您有足够的许可证。尝试关闭您为测试查询而打开的任何终端。是的，你知道这是真的。一个连接一个许可证。有时 MVSP 让你们两个在同一个 IP 下，但检查一下。
*   MVSP 服务正在运行。请参阅 Pick D3 文档。
*   您的 USER 和 ACCOUNT 都可以在 MVSP 服务器中访问，否则您将无法访问这些文件或通过 API 以用户身份登录。请参阅文档以在 MVSP.Menu 帐户中启用。

我希望这有帮助。

# jquery - 无法将 id 传递给点击功能

> ID：14101230
> 
> 赞同：1
> 
> 时间：2012-12-31T11:52:07.777
> 
> 标签：jquery, function

我真的很难在函数中传递参数以在我的 ajax 帖子页面中使用。

这是我的fancybox 脚本，eventid 显示良好。

```
var fancyContent = ('<div class="header">approve booking for event id'  + eventid + '<a href="#" class="approve" id="' + eventid + '">yes</a><a href="#" class="approve">no</a></div>');
$.fancybox({
    content: fancyContent
        }); 
```

从点击的链接获取事件ID

```
var getid = $('.approve').attr('id'); 
```

我的警报在这里显示 id 很好

```
alert(getid); 
```

然后我开始我的 click 函数，将 getid 作为参数传递

```
$('.approve').click(function(calEvent, jsEvent, view, getid){ 
```

我的警报总是未定义，有什么想法吗？

```
alert(getid); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T11:54:38.010

要获取单击项目的 ID，您可以尝试这样做：

```
$('.approve').click(function() {
    var id = $(this).attr('id');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T11:59:29.943

如果要将数据传递给事件处理程序，可以使用`trigger`方法：

来自 jQuery[文档](http://api.jquery.com/trigger/#example-3)：

```
$("p").click( function (event, a, b) {
    // when a normal click fires, a and b are undefined
    // for a trigger like below a refers to "foo" and b refers to "bar"
}).trigger("click", ["foo", "bar"]); 
```

```
$('.approve').trigger('click', [jsEvent, view, 'id']) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:57:49.050

用你的线

```
$('.approve').click(function(calEvent, jsEvent, view, getid){ 
```

您正在**创建**一个新功能。您*定义*此函数的参数，并且在任何函数声明中，变量的名称（如`calEvent`或`view`）`getid`都是本地的。因此，您在这里使用相同的名称，并不意味着 jQuery 会将相同的变量传递给函数。换句话说：当你在这个新函数`getid` **内部**`getid`使用时，它与函数外部的完全不同。

因此，要获取您的 ID，您需要重新分配它并再次执行与函数外部相同的技巧。

# dependency-injection - 为什么在 Play 中使用控制器方法！框架是静态的

> ID：14101234
> 
> 赞同：2
> 
> 时间：2012-12-31T11:52:26.427
> 
> 标签：dependency-injection, playframework, guice, playframework-1.x

我正在使用播放！我的一个应用程序的框架 1.2.5。最初，我通过创建类的新实例或使用工厂来解决依赖关系。但是我的应用程序在增长，并且以这种方式管理依赖项变得更加困难。我将转向使用 Google Guice 进行依赖注入

看起来，对于每个控制器，我必须写

```
requestStaticInjection(MyController.class); 
```

在控制器中注入服务

```
@Inject
static MyService mySerivce; 
```

这令人沮丧，我不喜欢控制器具有静态方法并且只能访问静态变量。我想将依赖项传递给控制器​​的构造函数，我不想声明静态字段。

为什么播放控制器的方法是静态的？这是某种限制吗？还有其他将类注入 Play 的好方法！控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T04:42:25.887

老问题，但我遇到了同样的问题，我在这里找到了答案[http://typesafe.com/blog/announcing-play-framework-21-the-high-velocit](http://typesafe.com/blog/announcing-play-framework-21-the-high-velocit)虽然，它与你的 Play 版本不同使用...

> Play 2.1 现在支持一种新的路由语法，可以调用注入的控制器而不是静态方法。只需在路由文件中为控制器方法添加前缀“@”符号

```
GET     /                  @controllers.Application.index() 
```

在你的 conf/routes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:50:37.037

> 还有其他将类注入 Play 的好方法！控制器

不，您不应该在控制器中创建服务 - 使其成为不扩展控制器的常规类。然后从您的控制器调用服务类。保持你的控制器代码最少——那里有很多字节码魔法，所以保持控制器代码简单（查找对象、渲染结果等）

# mongodb - MongoDB 按列分组

> ID：14101236
> 
> 赞同：0
> 
> 时间：2012-12-31T11:52:28.877
> 
> 标签：mongodb

我正在尝试做类似的事情

```
select column, count(*) 
  from table
 group by column 
```

在 MongoDB 中。

我试过了

```
db.table.group( {
    key: 'column',
    initial: {sum:0},
    reduce: function(doc, prev) { prev.sum += 1; } }
}) 
```

我想使用 $sum 之类的东西，但它不起作用。

为了

```
db.table.group( {
    key: 'column'
} ) 
```

我越来越

```
uncaught exception: group command failed: { "errmsg" : "$reduce has to be set", "ok" : 0 } 
```

我的 mongoDB 版本是 2.0.8（所以我不能使用聚合框架）。

根据结果​​，我没有得到分组列值的结果，而是得到

```
select count(*) from table 
```

我究竟做错了什么？

编辑：（添加数据）

```
> db.table.find()
{ "_id" : ObjectId("50e180ce9449299428db83e8"), "column" : "a", "cnt" : 1 }
{ "_id" : ObjectId("50e180d09449299428db83e9"), "column" : "b", "cnt" : 2 }
{ "_id" : ObjectId("50e180d19449299428db83ea"), "column" : "c", "cnt" : 3 }
> db.table.group( { key: 'column', initial: { sum: 0}, reduce: function(doc, prev) { prev.sum += 1; } } )
[ { "sum" : 3 } ] 
```

也许我以错误的方式使用它，但我希望

```
[ { "a": 1, "b": 1, "c": 1 } ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:14:17.087

应该是一个对象，而`key`不仅仅是一个字段名称，并且您`}`在该`reduce`行上有一个额外的尾随。

试试这个：

```
db.table.group({
    key: {column: 1},
    initial: {sum:0},
    reduce: function(doc, prev) { prev.sum += 1; }
}) 
```

# wpf - .net 4.0 中的 WPF 字体 Ms Gothic 在 .net 3.0 中看起来不一样

> ID：14101243
> 
> 赞同：1
> 
> 时间：2012-12-31T11:53:16.770
> 
> 标签：wpf, fonts

我从 .Net Framework 3.0 迁移到 4.0，日文（以及英文）文本变得清晰，而且重量减轻
了已经关注[这个博客](http://blogs.msdn.com/b/text/archive/2009/08/24/wpf-4-0-text-stack-improvements.aspx)试图修复它但没有成功还 尝试了以下不同的组合：

![图片](../Images/d0337a98184634cef6148c2424db3c08.png)

```
 <TextBlock Text="{Binding Text}" FontSize="16" Foreground="White" FontFamily="MS Gothic" RenderOptions.ClearTypeHint="Enabled" />
    <TextBlock Text="{Binding Text}" FontSize="16" Foreground="White" FontFamily="MS Gothic" TextOptions.TextFormattingMode="Ideal"/>
    <TextBlock Text="{Binding Text}" FontSize="16" Foreground="White" FontFamily="MS Gothic" TextOptions.TextRenderingMode="ClearType"/> 
```

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:14:54.227

这不是一个解决方案，但是在微软的论坛上，对于MS UI Gothic和Bold MS UI Gothic这两种字体，有一个答案是，较粗的字体显示是“[由WPF渲染系统内部字体优化引起的”。](http://social.msdn.microsoft.com/Forums/en/wpf/thread/9d86e948-f47f-421d-ac38-fea1972ca614)

由于那里没有建议的解决方案，我认为您无法避免这种优化。如果 MS UI Gothic 不是您制作的必需品，您可以使用 Meiryo 或其他日文字体来解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:44:49.033

这也不是解决方案，但我遇到了类似的问题，因为我想使用 Windows XP 上不可用但在 Vista 和 Win 7 中可用的特定字体。我找到了一种开源兼容字体并将其作为资源包含在内在我的应用程序中。通过这种方式，我确保应用程序字体在所有版本的 Windows 中看起来都相同。

您可能能够找到可以包含在您的应用程序中的字体。

# php - xampp php 发送邮件

> ID：14101244
> 
> 赞同：1
> 
> 时间：2012-12-31T11:53:16.900
> 
> 标签：php, xampp, sendmail.exe

我在 stackoverflow 和 google 上搜索了如何设置`xampp`，`mercury`以及`php`使用 window server 2008 r2 发送邮件的代码。

并且通过教程发现我可以使用`Mail::factory`with发送邮件`smtp.gmail.com`，也可以使用**Mercury** ( `File`-> `Send mail message`)发送邮件并`my_email_address@my_domain_name.com`在 Mercury 中注册。所以我尝试使用`php`代码发送邮件。但在我的情况下它仍然不起作用。

这是我的配置：

**C:/xampp/apache/php.ini**

```
sendmail_path = "\xampp\sendmail\sendmail.exe -t -i" 
```

**发送邮件.ini**

```
smtp_server=my_domain_name.com
smtp_port=25
error_logfile=error.log
debug_logfile=debug.log
auth_username=my_email_address@my_domain_name.com
auth_password=my_password
force_sender=my_email_address@my_domain_name.com
hostname=my_domain_name.com 
```

**代码 php**

```
$to = $email;
$subject = "Hello";
$message = "How are you ?";
$from = "my_email_address@my_domain_name.com";
$headers = "From:" . $from;
$result = mail($to,$subject,$message,$headers);

if($result){
    echo "Mail Sent." . $result;
}
else{
    echo "Failure." . $result;
} 
```

我签入`C:\xampp\sendmail\debug.log`并收到错误

```
--- MESSAGE END ---
12/12/31 06:46:04 ** Connecting to my_domain_name.com:25
12/12/31 06:46:06 ** Disconnected.
12/12/31 06:46:06 ** Disconnected.
12/12/31 06:46:06 ** Disconnected.
12/12/31 06:46:06 ** Socket Error # 10061<EOL>Connection refused. 
```

我哪里错了？你能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:57:40.737

大多数时候是服务器的ip问题。因为大多数提供商不允许来自动态 ips 的流量，来自没有上帝 spf 记录的服务器......

一个解决方案是，创建一个 gmail 帐户，并通过 gmail 或内部交换服务器转发所有流量。 [使用 Gmail 帐户的 XAMPP Sendmail](https://stackoverflow.com/questions/4948687/xampp-sendmail-using-gmail-account)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:18:02.350

请按照以下链接中的说明进行操作：-

[http://system66.blogspot.com/2010/01/how-to-send-mail-from-localhost-with.html](http://system66.blogspot.com/2010/01/how-to-send-mail-from-localhost-with.html)

# arrays - 使用 svcutil.exe 生成的 WCF 服务代理中的数组而不是列表

> ID：14101245
> 
> 赞同：2
> 
> 时间：2012-12-31T11:53:27.370
> 
> 标签：arrays, wcf, generic-list, proxy-classes

我有一个`ServiceContract`，

```
using System.Collections.Generic;
using System.ServiceModel;
namespace MainModule.Sub.Communication
{
    [ServiceContract]
    public interface IWebMethod
    {
        [OperationContract(IsOneWay = false)]
        bool InvokeAlert(List<int> userIds);

        [OperationContract(IsOneWay = false, Name = "InvokeAlertByMainID")]
        bool InvokeAlert(List<int> userIds, int mainId);

        [OperationContract(IsOneWay = true)]
        void DeletePopupNotifications(System.Data.DataSet deletedNotifications);
    }
} 
```

我使用以下命令生成代理（我必须使用`command-line`not via来执行此操作`Add Service Reference`。

```
SvcUtil.exe http://localhost/MainCommunicationServer/wm  /ct:System.Collections.Generic.List`1 /out:HTTPRouterServerProxy.cs 
```

即使我添加了`ct`开关（collectionType），代理也将其生成为数组（`int[]`）。`Add Service Reference`在 VS中不使用窗口的情况下如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:47:45.270

如果我没记错的话，/ct 开关可能对 OperationContract 级别的集合没有任何影响（在某些情况下？）。尝试使用包装器 DataContract 类型，例如`bool InvokeAlert(InvokeAlertRequest r);`where`InvokeAlertRequest`将`[DataContract]`包含一个类型`[DataMember] List<int> userIds;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:46:04.310

如果 SvcUtil 无法创建使用 DataContractSerializer 并改用 XmlSerializer 的代理，则 /ct 开关将停止工作。

这只是一个猜测，但我怀疑这`System.Data.DataSet`可能是造成这种情况的原因。

# java - 找到铸造的流程/选项

> ID：14101246
> 
> 赞同：0
> 
> 时间：2012-12-31T11:53:30.567
> 
> 标签：java, casting

我使用了使用 CTRL+SHIFT+G 找到的以下代码 这是我最后需要编写的正确代码。

```
String Name =   ((Entitys) (typeAnno.getTel())).getName(); 
```

假设我没有找到这段代码，我的出发点是 typeAnno.getTel() 并且我需要编写上面的代码，eclipse 有什么方法可以帮助解决这个问题吗？

需要一些关于如何处理它的最佳实践（不是这个代码，我需要一般的解决方案），并找到更多的转换选项来进行复杂的转换。

```
namespace = ((Sch) ((Entitys) typeAnno.getTel()).eCont()).getName(); 
```

问题是，如果我没有在其他类中找到代码，我不知道如何开始？如果铸造选项是可能的与否和选项。

**这里的代码是特定的代码，但我的问题一般来说，假设你必须找到铸造选项你会怎么做？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:05:53.477

我认为，如果您必须在代码中编写如此多的铸件，那么您的设计就会出现问题。

让我们回顾一下你的情况。返回什么`typeAnno.getTel()`？假设它返回名为 的类的实例`Phone`。似乎这个类扩展`Entities`了声明方法`getName()`。在这种情况下，您根本不需要铸造。说啊：

`String name = typeAnno.getTel().getName();`

在 Java 1.5 之前，我们有时需要在从集合中提取对象时进行强制转换。但是 java 1.5 中引入的泛型几乎可以完全避免编写强制转换。

所以，一般问题的一般答案是。如果您必须投射一些东西，请检查您的设计。在大多数情况下，您完全可以避免它。

# c - 文件数组和赋值

> ID：14101259
> 
> 赞同：2
> 
> 时间：2012-12-31T11:54:47.407
> 
> 标签：c, arrays, file

我有 2 个问题。

我想在 C 中创建一个文件数组。但我不确定我是否必须先 malloc 大小。我可以只使用 FILE** 文件作为数组还是必须先 malloc 它们。如果我必须腾出空间，是否需要保留 4 个字节（x86）？

我有变量“char extra[8] = { 0xAE00AF00B000B100 };” 我想将它分配给另一个 char 数组 [24] 的末尾。有没有一种更快的方法来做到这一点，而不必手动输入每个值或使用 for 循环。

```
char extra[8] = { 0xAE00AF00B000B100 };
// index is a random place in the string
name[index] = '\0';
i = 0;
if (index > 16) {
    for (i = 24-index; i < 8; i++) {
        index++;
        name[index] = extra[i];
        }
    }
else {
    name[17] = 0xAE;
    name[18] = 0x00;
    name[19] = 0xAF;
    name[20] = 0x00;
    name[21] = 0xB0;
    name[22] = 0x00;
    name[23] = 0xB1;
    name[24] = 0x00;
} 
```

顺便说一句，我需要添加那些额外的字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:00:59.527

> 我想在 C 中创建一个文件数组。但我不确定我是否必须先 malloc 大小。我可以只使用 FILE** 文件作为数组还是必须先 malloc 它们。如果我必须腾出空间，是否需要保留 4 个字节（x86）？

如果您需要一个文件数组，可以使用指针数组，如下所示：

```
#include <stdio.h>

FILE *array[NB_FILES]; 
```

`NB_FILES`或者，如果仅在运行时知道，您可以动态执行此操作。

```
#include <stdio.h>
#include <stdlib.h>

FILE **array = malloc(nb_files * sizeof *array); 
```

> 我有变量“char extra[8] = { 0xAE00AF00B000B100 };” 我想将它分配给另一个 char 数组 [24] 的末尾。有没有一种更快的方法来做到这一点，而不必手动输入每个值或使用 for 循环。

标准 C 库提供了函数`memcpy`，它是许多编译器的内置函数（因此它比`for`循环更快）。

```
#include <string.h>

char array[24];
char extra[8];

memcpy(array + sizeof array - sizeof extra - 1, extra, sizeof extra); 
```

# css - Twitter Bootstrap：语言 div 破坏了菜单

> ID：14101264
> 
> 赞同：0
> 
> 时间：2012-12-31T11:55:10.150
> 
> 标签：css, drop-down-menu, twitter-bootstrap, menu, alignment

我在使用 Twitter Bootstrap 菜单 + 添加语言下拉菜单时遇到了一些困难。

我希望它显示在一行中。不幸的是，添加下拉菜单会将菜单分成两行。

如何解决？问题的例子在这里： [jsFiddle](http://jsfiddle.net/GGMWX/50/)

添加`display:inline;`并不能帮助将所有内容显示在一行中。正确的顺序将是标准：项目名称_*主页*_关于_*联系方式****_* __ *_* __ *_* __ *_* ___***语言*_以用户名登录

任何想法如何正确修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:59:57.517

首先，不要在可以使用列表 ( `<li>`) 的导航中使用 div。

如果要在导航栏中显示文本，请使用：

```
 <span class="navbar-text">some text</span> 
```

`<li>`-tags内部以正确对齐和设置样式。

这是您导航的正确标记： [JSFiddle](http://jsfiddle.net/GGMWX/57/)

# java - java - 如何将包含从左到右和从右到左语言的字符串添加到Java中的StringBuilder

> ID：14101265
> 
> 赞同：1
> 
> 时间：2012-12-31T11:55:16.253
> 
> 标签：java, stringbuilder

我对 java 中的 StringBuilder 感到困惑。我的代码在这里：

```
StringBuilder cmdB = new StringBuilder(
            "INSERT IGNORE INTO Query ( context, category, generality, freshness, TokenCount, type) VALUES ");
    for (int i = 0; i < querydata.size(); i++) {

        if (i == 0)
            cmdB.append("('");
        else
            cmdB.append(",('");
        cmdB.append(querydata.get(i).getContext() + "',"
                + querydata.get(i).getCategory() + ","
                + querydata.get(i).getGenerality() + ","
                + querydata.get(i).getFreshness() + ","
                + querydata.get(i).getTokenCount() + ","
                + querydata.get(i).getType());
        cmdB.append(")");
    }
    cmdB.append(";"); 
```

我有 Mysql 作为数据库，想创建插入 1000 行的字符串。querydata.get(i).getContext() 返回 String 并包含英语（left ro right）和波斯语（从右到左的语言）。

当我的 querydata.get(i).getContext() 返回“دانلود کرک بازی ghost recon”时，我的 Stringbuilder 将其合并。我的结果如下所示。

INSERT IGNORE INTO Query ( context, category, generality, freshness, TokenCount, type) VALUES ('پخش زنده فوتبال',2,1.0,0.0,2,1),('عکسهای جشنواره فیلم فجر',2,1.0,0.0, 2,1),('نتایج لیگ برتر',2,1.0,0.0,2,1),('دانلود کرک بازی ghost recon',2,1.0,0.0,2,1)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:32:00.130

*就逻辑*顺序而言，字符串的内容实际上没有任何问题，据我所知，可能会让您感到困惑的是打印双向文本时的呈现方式。如果您将鼠标拖动到字符串上，您可以通过选择跳跃的方式看到正在以哪个主要方向呈现的文本运行。

如果我用换行符分隔值集，我会得到

INSERT IGNORE INTO Query ( context, category, generality, freshness, TokenCount, type) VALUES
('پخش زنده فوتبال',2,1.0,0.0,2,1),
('عکسهای جشنواره فیلم فجر',2,1.0,0.0, 2,1),
('نتایج لیگ برتر',2,1.0,0.0,2,1),
('دانلود کرک بازی ghost recon',2,1.0,0.0,2,1)。

我不确定您在浏览器中看到什么，但在我的浏览器中，它将该`INSERT INTO ... VALUES`行视为 LTR，然后是后续行，但不包括`ghost recon`主要包含 RTL 的行。这是在波斯语脚本部分周围插入了 Unicode 从左到右标记 ( `U+200E`) 的相同字符串，以强制将周围的引号和括号视为 LTR：

INSERT IGNORE INTO Query ( context, category, generality, freshness, TokenCount, type) VALUES
('‎پخش زنده فوتبال‎',2,1.0,0.0,2,1),
('‎عکسهای جشنواره فیلم فجر‎',2, 1.0,0.0,2,1),
('‎نتایج لیگ برتر‎',2,1.0,0.0,2,1),
('‎دانلود کرک بازی‎ ghost recon',2,1.0,0.0,2,1) .

换句话说——别担心，数据库会包含正确的东西。

但我也同意[这个答案](https://stackoverflow.com/a/14101369/592139)，你应该考虑使用`PreparedStatement`而不是用 , 构建 SQL`StringBuilder`来防止 SQL 注入攻击（或模糊错误），以防你的任何上下文字符串包含撇号（这种情况比**你想象**的更常见） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:03:59.967

我不确定您在问题中到底要问什么，但您真的应该考虑使用批量插入工具来进行如此大的插入。它在内存、速度和安全性方面会更好。查看 SpringSource 的[JdbcTemplate](http://static.springsource.org/spring/docs/3.0.2.RELEASE/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)和它的[batchUpdate](http://static.springsource.org/spring/docs/3.0.2.RELEASE/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#batchUpdate%28java.lang.String,%20org.springframework.jdbc.core.BatchPreparedStatementSetter%29)方法。以下是从谷歌搜索中获取的简单示例...

```
public void insertBatch(final List<Customer> customers){

  String sql = "INSERT INTO CUSTOMER " +
    "(CUST_ID, NAME, AGE) VALUES (?, ?, ?)";

  getJdbcTemplate().batchUpdate(sql, new BatchPreparedStatementSetter() {

    @Override
    public void setValues(PreparedStatement ps, int i) throws SQLException {
        Customer customer = customers.get(i);
        ps.setLong(1, customer.getCustId());
        ps.setString(2, customer.getName());
        ps.setInt(3, customer.getAge() );
    }

    @Override
    public int getBatchSize() {
        return customers.size();
    }
  });
} 
```

# c# - 选择 div 标签内的链接

> ID：14101268
> 
> 赞同：-1
> 
> 时间：2012-12-31T11:55:48.410
> 
> 标签：c#, html-agility-pack

我想在 div 类中获取一个链接（具体的 URL）。这是我拥有的代码，可以让我获得 div 类中的文本（**Some text...**）。

```
foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//div[@class='content']"))
{
    //saves text (node.InnerText) in array          
} 
```

这是来自该站点的 HTML。我想获得**www.google.com**

```
<div class="content">
    <p>Some text... 
    <a href="www.google.com">LINK</a> 
    </p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:58:08.387

```
foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//div[@class='novica']/p/a[@href='www.google.com']"))
{
    //saves text (node.InnerText) in array          
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:00:08.537

根据您的写作，该代码无效，但是您有 2 个选项：

1.  一旦你有了`div`, use`.GetElementsByTagName("a")`或 children 的节点来拉出链接，然后得到它的 href 属性。

2.  修改您的`SelectNodes()`XPath 以获取`a`标签：`//div[@class='novica']/p/a`.

*如果您确实*需要该`.InnerText`元素来获取，第一个显然更好`Some text...`，但是第二个会更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:00:15.123

```
foreach (var node in doc.DocumentNode.SelectNodes("//div[@class='novica']"))
{
    var links = node.Descendants("a").Select(n => n.InnerText).ToList();
} 
```

# windows-phone-7 - 从 xml 文档中跳过元素

> ID：14101275
> 
> 赞同：0
> 
> 时间：2012-12-31T11:56:23.703
> 
> 标签：windows-phone-7, linq-to-xml

我有一个 xml 文档，我想在其中提取每 10 个元素。我使用此代码提取最后 10 个元素，然后跳过 10 个元素并获取较旧的元素，我使用了此代码，但它通过跳过最后 10 个元素，将较旧的第一个列表替换为包含最旧 10 个的另一个列表，我想要什么是获取最后 10 个元素，当用户按下按钮时，他将获得较旧的列表和另外 10 个较旧的元素：

```
slideView.ItemsSource = 
    (from channel in xmlItems.Descendants("album")     
     orderby (int)channel.Element("catid") descending 
     select new onair
     {
         title = (string)channel.Element("name"),
         photo = (string)channel.Element("picture")
     }).Skip(10).Take(10); 
```

请问有什么想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:02:50.003

到目前为止，您只需要在 Linq 中创建一些分页（根据您的情况调整此代码）

```
 public IEnumerable<onair> GetItems(int pageIndex = 0, int pageSize = 10)
    {
        return (from channel in xmlItems.Descendants("album")
                orderby (int)channel.Element("catid") descending
                select new onair
                {
                    title = (string)channel.Element("name"),
                    photo = (string)channel.Element("picture")
                }).Skip(pageIndex * pageSize).Take(pageSize);
    }
...

slideView.ItemsSource = GetItems(2,10): 
```

# javascript - 查询。如果没有找到替换链接

> ID：14101284
> 
> 赞同：1
> 
> 时间：2012-12-31T11:57:05.280
> 
> 标签：javascript

我是一个新手，我继承了一些讨厌的 jquery 代码。我正在尝试找到一种方法，以便在发现错误时将字符串替换为另一个字符串。这是原始代码..

```
 W.load = function (b) {
    var c, d, g = W.prep; S = ! 0, Q = ! 1, O = x[P], b || _(a.extend(J, a.data(O, e))), ba(l), ba(h, J.onLoad), J.h = J.height? Z(J.height, "y") - M - K: J.innerHeight && Z(J.innerHeight, "y"), J.w = J.width? Z(J.width, "x") - N - L: J.innerWidth && Z(J.innerWidth, "x"), J.mw = J.w, J.mh = J.h, J.maxWidth &&(J.mw = Z(J.maxWidth, "x") - N - L, J.mw = J.w && J.w < J.mw? J.w: J.mw), J.maxHeight &&(J.mh = Z(J.maxHeight, "y") - M - K, J.mh = J.h && J.h < J.mh? J.h: J.mh), c = J.href, V = setTimeout(function () {
        B.show()
    },
    100), J.inline?(Y().hide().insertBefore(a(c)[0]).one(l, function () {
        a(this).replaceWith(z.children())
    }), g(a(c))): J.iframe? g(" "): J.html? g(J.html): $(c)?(a(Q = new Image).addClass(f + "Photo").error(function () {
        //J.title = ! 1, g(Y("Error").text("This image could not be loaded"))
        J.title = ! 1, a(this).href.replace('http://www.old.com','http://www.new.com');
    }).load(function () {
        var a; Q.onload = null, J.scalePhotos &&(d = function () {
            Q.height -= Q.height * a, Q.width -= Q.width * a
        },
        J.mw && Q.width > J.mw &&(a =(Q.width - J.mw) / Q.width, d()), J.mh && Q.height > J.mh &&(a =(Q.height - J.mh) / Q.height, d())), J.h &&(Q.style.marginTop = Math.max(J.h - Q.height, 0) / 2 + "px"), x[1] &&(P < x.length - 1 || J.loop) &&(Q.style.cursor = "pointer", Q.onclick = function () {
            W.next()
        }), m &&(Q.style.msInterpolationMode = "bicubic"), setTimeout(function () {
            g(Q)
        }, 
```

我已将代码更改为此..

```
J.title = ! 1, a(this).href.replace('http://www.old.com','http://www.new.com'); 
```

但它不起作用。呸！任何帮助将不胜感激。:)

**更新***

上面的代码是我正在工作的部分的完整代码..

更新#2

这个答案有效，但我需要做......

```
a(this).attr('src', function(i, current){ 
 if ( i === 'http://www.old.com'){
 return current.replace('http://www.old.com','http://www.new.com');
 }
 else if ( i === 'http://www.older.com'){
 return current.replace('http://www.older.com','http://www.new.com');
}
 else ();
 }) 
```

这不工作！帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:09:31.927

尝试

```
this.href.replace('http://old.com/' , 'http://new.com/'); 
```

如果要将实际属性更改为当前元素上的新属性，则

```
this.href = this.href.replace('http://old.com/' , 'http://new.com/'); 
```

*如果您在一个引用`<a>`元素的处理程序中，则`this`引用该对象，并且您不需要从中创建一个 jquery 对象来访问其属性。所以`this.href`将直接引用`href`链接的属性。*

* * *

***免责声明**：那是混淆/编码的脚本，您最好找到生成它的原件。这段代码没有意义，我们的建议真的是盲目的。*

乍一看，它似乎`this`是图像而不是链接，因此如果要显示新图像，则需要更改`src`属性，而不是`href`图像上不存在的属性。

```
a(this).attr('src', function(i, current){ return current.replace('http://www.old.com','http://www.new.com');}) 
```

但你也应该`console.log(a.fn.jquery)`在那里做一个以确保这`a`是对`jQuery`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:05:17.143

您需要更换吗？如果您只想更改网址，那么您可以这样做。

```
J.title = ! 1, $(this).attr('href', 'http://new.com/*'); 
```

它将当前 url 替换为给定的新 url。

# android - 在android中附加音频文件为mms

> ID：14101286
> 
> 赞同：3
> 
> 时间：2012-12-31T11:57:17.497
> 
> 标签：android, android-intent, android-widget, sms, mms

我正在开发一款需要录制语音的应用程序。该语音可以自动附加到彩信。

我正在使用此代码

```
Intent sendIntent = new Intent(Intent.ACTION_SEND);  
                sendIntent.setClassName("com.android.mms", "com.android.mms.ui.ComposeMessageActivity");
                sendIntent.putExtra("address", "9999999999");
                sendIntent.putExtra("sms_body", "if you are sending text");   
                final File file1 = new File(Environment.getExternalStorageDirectory().getAbsolutePath(),"connection.amr");
                Uri uri = Uri.fromFile(file1);
                Log.e("Path", "" + uri);
                sendIntent.putExtra(Intent.EXTRA_STREAM, uri);
                sendIntent.setType("*/*");
                startActivity(sendIntent); 
```

一切正常，但文件无法自动附加。对此有任何想法吗？

当用户单击发送按钮时，该时间会自动将该文件附加到特定编号的主题和 sms_body 部分。

我的文件扩展名是**.3gp**

**此代码在三星 ace 5830i 和三星 Galaxy nexus 中完美运行，但不适用于 Htc 渴望 c，Htc one。**

我测试了这个 setType.but 没有积极的回应。

```
 sendIntent.setType("video/3gp");
  sendIntent.setType("audio/*");
  sendIntent.setType("*/*");
  sendIntent.setType("audio/mp3"); 
```

**是否可以自动附加？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:00:19.537

尝试这个：

```
Intent sendIntent = new Intent(Intent.ACTION_SEND); 
sendIntent.putExtra("text-body", "if you are sending text");    
sendIntent.putExtra("num", "number");

sendIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("ur file path"));
sendIntent.setType("audio/3gp"); 
```

# visual-studio-2010 - 如何在 Visual Studio 2010 中配置 NTL 库

> ID：14101290
> 
> 赞同：0
> 
> 时间：2012-12-31T11:57:34.517
> 
> 标签：visual-studio-2010, ntl

我正在尝试在我的第一个 Visual Studio 2010 项目中配置 NTL 库。我按照以下说明操作：[http ://www.shoup.net/ntl/doc/tour-win.html](http://www.shoup.net/ntl/doc/tour-win.html)

我创建了一个新的 Win32 项目，名为`ntl`.

然后，从`Project`->`Add Existing Items`并选择`src`文件 NTL 库文件夹中的所有文件。

然后，我单击`Project`-> `Properties`-> `Configuration Properties`-> `C/C++`->`Additional Include Directories`并选择`include`了`NTL`库文件夹中的目录。

最后，我尝试`Build`->`Build ntl`但我收到错误消息（对于 src 中的每个文件）：

```
c:\program files\winntl-5_5_2\src\ctools.cpp(2): fatal error C1083: Cannot open include file: 'NTL/ctools.h': No such file or directory
1>  Generating Code... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T18:41:16.973

Simple, follow this help step by step [Compiling NTL.](http://shoup.net/ntl/doc/tour-win.html)

You must be doing something wrong, follow the instructions step by step it will work.
Save NTL in a path like it : C:\Library\WinNTL-5_5_2, and follow instructions of site.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-02T18:36:38.090

您可能不需要这个问题的答案，但也许对于其他想要这样做的人来说。

在 Visual Studio (2010) 中：

1.  “文件”->“新建”->“项目...”（或 Ctrl + Shift + N）
2.  选择“Win32 Project”（位于“Installed Templates”->“Visual C++”下），我将其命名为 NTLlib，单击“Ok”
3.  单击“下一步>”，应用程序类型：“静态库”，在附加选项中：取消选中“预编译头”，单击“完成”
4.  在解决方案资源管理器“添加”->“新建项目...”中右键单击创建的项目，（或 Ctrl + Shift + A）选择 C++ 文件 (.cpp) 命名并单击“添加”（需要设置C/C++ 设置）
5.  下载最新的[NTL 库](http://www.shoup.net/ntl/download.html)，解压到你的项目中
6.  右键单击您的项目，转到“配置属性”->“C/C++”中的“属性”（或 Alt + Enter），从下拉菜单中单击“其他包含目录”，选择编辑->“新行”（黄色文件夹） -> 设置下载的 NTL 库**包含**文件夹的路径（包含文件夹中没有文件夹），单击“确定”
7.  在解决方案资源管理器“添加”->“现有项目...”（或 Shift + Alt + a）中右键单击您的项目，然后从**src 目录**中下载的 NTL 库中选择所有文件单击“添加”
8.  加载左下角的所有文件后打印 VS 就绪，现在单击“构建”->“构建 NTLlib”并等待“构建：1 成功”。静态库在 Debug/Release 文件夹中创建。

要在另一个项目中使用创建的库，只需按照步骤 6.，并设置创建的库文件夹的路径：右键单击项目 -> 'Properties' -> 'Configuration Properties' -> 'VC++ Directories' -> 'Library Directories '/

# qt - Qt 初学者 QPainter 和 QRect

> ID：14101297
> 
> 赞同：9
> 
> 时间：2012-12-31T11:58:14.267
> 
> 标签：qt, qpainter, qrect

我将如何绘制一个矩形？

我尝试了两种不同的方法；

```
void MyWidget::paintEvent(QPaintEvent *)
{
    QPainter painter(this);
    painter.setRenderHint(QPainter::Antialiasing);
    painter.setPen(Qt::black);
    QRect rect = QRect(290, 20, 70, 40);
    painter.drawText(rect, Qt::AlignCenter,
                      "Data");
    painter.drawRect(rect);
} 
```

哪个工作正常（即使参数没有命名也没有使用），但我不想使用 QPaintEvent * 我没有用它。

所以我试着重命名我的函数；

```
void MyWidget::draw()
{
    QPainter painter(this);
    painter.setRenderHint(QPainter::Antialiasing);
    painter.setPen(Qt::black);
    QRect rect = QRect(290, 20, 70, 40);
    painter.drawText(rect, Qt::AlignCenter,
                      "Data");
    painter.drawRect(rect);
} 
```

这不显示任何内容（但没有错误）。

如果我不使用 QPaintEvent * 为什么它不起作用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T20:00:32.237

绘制事件是绘制系统在需要重绘小部件时调用的方法。这就是为什么简单地命名自己的方法是行不通的。油漆系统永远不会调用它。

你真的应该使用`QPaintEvent`. 它为您提供了需要绘制的矩形。此矩形将基于小部件的大小，因此不要在您的绘制事件中使用显式矩形，而是将您的小部件设置为正确的大小。如果您的小部件移动、调整大小等，将生成一个绘制事件。

```
void MyWidget::paintEvent(QPaintEvent *event)
{
    QRect rect = event->rect();
    QPainter painter(this);
    painter.setRenderHint(QPainter::Antialiasing);
    painter.setPen(Qt::black);
    painter.drawText(rect, Qt::AlignCenter,
                      "Data");
    painter.drawRect(rect);
} 
```

现在，如果您想将绘制逻辑分离到另一种方法中，那很好。但是您需要从绘画事件中调用它：

```
void MyWidget::paintEvent(QPaintEvent *event)
{
    QRect rect = event->rect();
    draw(rect);
}

void MyWidget::draw(QRect &rect)
{
    QPainter painter(this);
    painter.setRenderHint(QPainter::Antialiasing);
    painter.setPen(Qt::black);
    painter.drawText(rect, Qt::AlignCenter,
                      "Data");
    painter.drawRect(rect);
} 
```

如果您想完全绕过您所说的绘制事件，并且只想创建一个静态矩形来显示，一种方法是将其绘制一次到像素图并将其显示在 QLabel 中：

```
QPixMap pix(200,100);
QPainter painter(&pix);
// do paint operations
painter.end()
someLabel.setPixmap(pix) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T19:49:59.157

您需要的任何数据`paintEvent()`都应该可以作为包含类的字段进行访问，在您的情况下，是`MyWidget`. 这些私有字段可以`MyWidget`通过“setter”暴露给客户端，这将在调用之前设置数据值`update()`，`MyWidget`这将触发对`paintEvent()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-01T03:47:22.490

@Mat 也告诉过你：*“事件”*是启动画家的正确方法。
QPainter 只能在 QPaintEvent 事件之后调用，**该事件带有可以绘制对象的安全区域**。

所以你必须找到另一种策略来传输你的数据，帮助我提出一个简单的方法，可以适应很多情况。

***小部件.cpp***

```
#include <QtGui>
#include "widget.h"

#define MIN_DCX    (0.1)
#define MAX_DCX    (5.0)

Widget::Widget(QWidget *parent)
    : QWidget(parent)
{    
    dcx=MIN_DCX;
    setFixedSize(170, 100);
}

void Widget::paintEvent(QPaintEvent *event)
{
    Q_UNUSED(event); 
    QPainter painter;
    painter.begin(this);
    painter.setRenderHint(QPainter::Antialiasing);
    painter.setPen(Qt::black);
    pcx=dcx*2;
    QRect rect = QRect(50-dcx,25-dcx,60+pcx,40+pcx);
    painter.drawText(rect, Qt::AlignCenter,printData);
    painter.drawRect(rect);
    painter.end();

}

void Widget::setPrintData(QString value){
   printData = value;
   dcx=(dcx>MAX_DCX)?MIN_DCX:dcx+MIN_DCX;
} 
```

***小部件.h***

```
#ifndef WIDGET_H
#define WIDGET_H

#include <QWidget>

class Widget : public QWidget
{
    Q_OBJECT

public:
    Widget(QWidget *parent);
    void setPrintData(QString value);

protected:
    void paintEvent(QPaintEvent *event);

private:
    QString printData;
    float dcx;
    float pcx;
};

#endif 
```

***窗口.cpp***

```
#include <QtGui>
#include "widget.h"
#include "window.h"

#define MAX_SDCX  20

Window::Window()
    : QWidget()
{
    gobject = new Widget(this);

    textMode=1;
    rectMode=1;
    gobject->setPrintData(msgs[textMode]);

    QGridLayout *layout = new QGridLayout;
    layout->addWidget(gobject, 0, 0);
    setLayout(layout);

    QTimer *timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, SLOT(dataOnAir()));
    timer->start(10);

    setWindowTitle(tr("Rect Shaking"));
}

void Window::dataOnAir(){
    if((++rectMode)>MAX_SDCX){
        rectMode=0;
        textMode^=1;
    }
    gobject->setPrintData(msgs[textMode]);
    gobject->repaint();
} 
```

***窗口.h***

```
#ifndef WINDOW_H
#define WINDOW_H

#include <QWidget>
#include "widget.h"

class Window : public QWidget
{
    Q_OBJECT

public:
    Window();

private slots:
    void dataOnAir();

private:
    Widget *gobject;
    const QString msgs[2] = {"Hello","World"};
    int textMode;
    int rectMode;
};

#endif 
```

***主文件***

```
#include <QApplication>
#include "window.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    Window window;
    window.show();
    return app.exec();
} 
```

正如您在代码中看到的那样，在对象“小部件”之外执行了一个计时器

每 10 毫秒发送一次重绘小部件以重绘具有不同大小的“矩形”，并且每 20 个周期（200 毫秒）将文本“hello”更改为“world”

在此示例中，您可以看到以任何方式都需要覆盖 QPainterDevice 架构。

您可能还注意到“paintEvent”中的*“事件”被静音并且不直接使用，***但是执行一个序列 QPainter 是必不可少的。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T13:44:29.290

[这个播放列表](http://www.youtube.com/playlist?list=PL2D1942A4688E9D63)包含最好的 Qt 教程，从教程 74 开始对你有用（Qpainter 和 QPen），教程 75 是如何使用 QRect 绘制矩形。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T20:44:33.790

覆盖小部件的paintEvent() 函数使您可以自定义小部件，并且该函数会定期调用以重绘小部件。因此，任何绘图都应在此函数中进行。然而，覆盖 paintEvent() 可能会导致一些性能问题。我更喜欢使用 QGraphicsScene 和 QGraphicsView 然后我会在场景中添加一个矩形，这是做这种绘图的常用方法。请检查 GraphicsView 框架

[http://qt-project.org/doc/qt-4.8/graphicsview.html](http://qt-project.org/doc/qt-4.8/graphicsview.html)

# asp.net - 时事通讯上的打印按钮

> ID：14101298
> 
> 赞同：0
> 
> 时间：2012-12-31T11:58:16.993
> 
> 标签：asp.net, html, printing, campaign-monitor

我需要为我通过campaigmonitor 发送的新闻信实现打印选项。如果可能的话，有人可以提出这背后的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:01:54.370

您可以在文档中粘贴 html 代码，这将提供打印选项

```
<input type="button"  onClick="window.print()" value="Print This Page"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:01:30.270

如果您可以添加任意 HTML/JavaScript，则表明您正在寻找`<a href="javascript:window.print()">print this</a>`或类似的东西。否则，您可以建议用户按 CTRL+P，这应该适用于大多数系统。

# php - CKEDITOR - PHP 无法在我的 MYSQL 数据库中发布 HTML Brut 代码 - 如何做到这一点

> ID：14101300
> 
> 赞同：0
> 
> 时间：2012-12-31T11:58:26.667
> 
> 标签：php, html, post, mysqli, ckeditor

我有一个**永远不会在线**的个人网站。

我正在使用带有 CKEDITOR Textarea 的表单。

我希望 PHP 在我的 MYSQL 数据库的 Textarea 中发布由 CKEDITOR 生成的 HTML 源代码。

如何强制 PHP 代码在我的数据库中发布 HTML 语言？

我的代码： [http ://alex69.dyndns.info/meridien/MyCode.doc](http://alex69.dyndns.info/meridien/MyCode.doc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:16:55.040

`updateElement()`如果那是您想要做的，请使用该方法更新文本区域。但我认为这是由 ckeditor 实例在 php 提交表单时自动处理的。您的 ckeditor 内容将位于您在发布表单时绑定 ckeditor 的 textarea 本身的 id 中。

```
CKEDITOR.instances.editor1.updateElement();
alert( document.getElementById( 'editor1' ).value );  // The current editor data. 
```

[CKEditor 文档](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#updateElement)

# objective-c - 全屏（10.8）时不调用Window：willPositionSheet？

> ID：14101305
> 
> 赞同：4
> 
> 时间：2012-12-31T11:58:43.187
> 
> 标签：objective-c, macos, cocoa

我正在构建一个应该从 10.6 运行到 10.8 的 Mac 应用程序（不是基于文档的）。`beginSheet:modalForWindow...`为了简化特殊字段的编辑，我使用窗口委托方法使用位于字段下方的工作表（带有） `window:willPositionSheet:usingRect`。当主窗口是标准窗口时一切正常，但当窗口全屏时（10.7-10.8 中的新全屏），工作表始终位于工具栏下方。我发现`willPositionSheet`从未调用过！有趣的是，其他委托方法继续工作......（这只发生在 10.7-10.8 中，因为在 10.6 中不存在全屏）。也许我可以通过在全屏时将工作表显示为模式窗口来解决这个问题，但是......有避免这种情况的技巧吗？谢谢

# c# - 限制通用集合的大小？

> ID：14101310
> 
> 赞同：10
> 
> 时间：2012-12-31T11:59:09.333
> 
> 标签：c#, generic-collections

有没有办法限制通用集合的大小？

我有一个 WriteableBitmap 堆栈，用于在每次更改时存储一个 WriteableBitmap 的克隆，这意味着我可以通过简单地将最新的 WriteableBitmap 从堆栈中弹出来轻松撤消。

问题是内存使用情况，我想限制这个堆栈容纳 10 个对象，但我看不到允许我轻松执行此操作的属性。有没有办法，或者我是否必须在每次更改时检查堆栈大小，并在我达到 10 时将最后 10 个对象复制到一个新堆栈中，以及每次后续更改时？我知道该怎么做，但希望有更简单的方法，是吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-12-10T09:23:46.600

为了详细说明 Tilak 的答案，这里有一些示例代码：

```
 public class LimitedSizeStack<T> : LinkedList<T>
  {
    private readonly int _maxSize;
    public LimitedSizeStack(int maxSize)
    {
      _maxSize = maxSize;
    }

    public void Push(T item)
    {
      this.AddFirst(item);

      if(this.Count > _maxSize)
        this.RemoveLast();
    }

    public T Pop()
    {
      var item = this.First.Value;
      this.RemoveFirst();
      return item;
    }
  } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-31T12:01:25.010

您必须实现自己的包装器才能实现这一目标。没有可用的直接选项。

```
class FixedSizeStack : Stack
{
    private int MaxNumber;
    public FixedSizeStack(int Limit)
        : base()
    {
        MaxNumber = Limit;
    }

    public override void Push(object obj)
    {
        if (this.Count < MaxNumber)
            base.Push(obj);
    }

} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T12:02:36.703

您可以使用表示双链表的[LinkedList](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)来模拟[Circular Stack](http://en.wikipedia.org/wiki/Circular_buffer)。

你可以[`AddFirst()`](http://msdn.microsoft.com/en-us/library/ms132172.aspx)对应`Push()`。如果[Count](http://msdn.microsoft.com/en-us/library/t56y0h99.aspx)为 10，则可以使用[`RemoveLast()`](http://msdn.microsoft.com/en-us/library/ms132182.aspx).

因为`Pop()`你可以使用[`RemoveFirst()`](http://msdn.microsoft.com/en-us/library/ms132181.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T12:02:08.010

您将不得不检查大小（如果您设置了限制，我相信您会得到一个例外，并且不要检查它是否已满）。

编辑

如果已设置大小，则不会出现异常，但大小只会增加，因此您必须检查大小（通过[http://msdn.microsoft.com/en-us/library/6335ax0f.aspx](http://msdn.microsoft.com/en-us/library/6335ax0f.aspx)）： -

> 如果 Count 已经等于容量，则通过自动重新分配内部数组来增加 Stack 的容量，并且在添加新元素之前将现有元素复制到新数组中。

# python - python中的特殊字符问题

> ID：14101311
> 
> 赞同：0
> 
> 时间：2012-12-31T11:59:11.613
> 
> 标签：python

为了支持乳胶中的特殊字符，我们应该在特殊字符之前放置单斜杠（例如：\&），但是如果我用单斜杠（\&）替换，python 会插入 2 个斜杠。

```
input1 = "managing & director #"
changed_val = input1.replace("&","\&").replace("#","\#")

print changed_val
output:-managing \& director \# 
```

如果我打印变量，它会显示单个斜杠，但变量内的值包括 2 个斜杠（最后）。

请告知如何在 python 中添加一个斜杠，以便我可以在乳胶中使用这个带有特殊字符的字符串

或任何代替 latix 的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:05:38.170

它显示为 2 个斜线，因为 Python 也使用斜线来表示特殊字符，因此要在变量中显示斜线，需要在其前面显示一个斜线。

下面以一个交互式会话为例：

```
>>> s = "a string"
>>> s
'a string'
>>> print s
a string
>>> s = "a \\string"
>>> s
'a \\string'
>>> print s
a \string
>>> len(s)
9 
```

底线：你没有问题。要确认，请检查字符串的长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:54:55.010

运行这个看看发生了什么：

```
>>> print changed_val
managing \& director \#
>>> assert changed_val == r'managing \& director \#'
>>> changed_val
"managing \\& director \\#"
>>> print repr(changed_val)
"managing \\& director \\#" 
```

当您`changed_val`在控制台中键入时，它相当于键入`print repr(changed_val)`. `repr`也是出现引号的原因。

# java - Maven中央存储库中是否可能缺少jar？

> ID：14101312
> 
> 赞同：4
> 
> 时间：2012-12-31T11:59:13.777
> 
> 标签：java, maven, maven-2

参考这篇[文章](https://stackoverflow.com/questions/14099838/maven-dependency-missing-artifact)，

> Maven中央存储库中是否可能缺少jar文件本身？

检查[这个链接](http://mvnrepository.com/artifact/com.bea.xml/jsr173-ri/1.0)

你会发现这个 ![在此处输入图像描述](../Images/7689718d6f5b2c887146987edd2a5144.png)

下载（）（0字节）？

这是什么？

这可能吗？

为什么？

构建该 jar/依赖项时会出现任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:55:46.160

是的，会有一个问题：构建将失败，因为缺少依赖项。

正如[Chandana](https://stackoverflow.com/a/14099952/679982)从您引用的帖子中回答的那样：

> 您需要下载 JAR 文件并将其手动安装到本地存储库中。

例如，我想[这](http://svn.apache.org/repos/asf/servicemix/m2-repo/com/bea/xml/jsr173-ri/1.0/)是有问题的 jar，将其下载到某个目录，在同一目录中创建一个文件 jsr173.pom：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <groupId>com.bea.xml</groupId>
    <artifactId>jsr173-ri</artifactId>
    <version>1.0</version>
</project> 
```

并将其安装到您的本地仓库，如下所示：

```
mvn install:install-file -Dfile=jsr173-ri-1.0.jar -DpomFile=jsr173.pom 
```

并且构建将通过。maven会根据jsr173.pom文件中的数据重新生成文件名和pomFile名。

> 这可能吗？

是的，存储库中可能缺少 JAR 文件。可能是因为它是父 pom，但如果它是 pom 引用 JAR 文件，则该依赖关系实际上变得不可用，这意味着您必须通过上述过程解决它才能使用它。

> 为什么？

许可问题，它是一个版权参考实现，见[这里](http://svn.apache.org/repos/asf/beehive/trunk/LICENSE.jsr173-api)。看起来这是一个相对常见的情况，请参阅[此答案](https://stackoverflow.com/questions/1074869/find-oracle-jdbc-driver-in-maven-repository)。

# git - 无法卷曲 git 标签

> ID：14101317
> 
> 赞同：4
> 
> 时间：2012-12-31T11:59:36.133
> 
> 标签：git, curl, git-tag

我想通过命令行 curl 一个 git 标签：

`curl -O http://someurl`

但是当我尝试解压文件时它坏了？有谁知道是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:48:20.053

您可以`curl`从 GitHub 等 git repos 托管服务中获取 git 标签，因为它有一个提供 tar（或 zip）的[专用 tarball 服务](https://github.com/blog/12-tarball-downloads)（如[Nodeload](https://github.com/blog/678-meet-nodeload-the-new-download-server)）。但没有任何其他 git repo 有相同的服务。

[有关 GitHub（或此GitHub 教程](https://gist.github.com/2288960)）的具体示例，请参阅“[从 Private Repo 下载 Git 存档 tarball 时遇到问题](https://stackoverflow.com/a/10053425/6309)” ：[`curl`](https://gist.github.com/2288960)

```
curl -sL --user "${username}:${password}" https://github.com/$account/$repo/tarball/$tag_name > tarball.tar 
```

在[公共回购](https://stackoverflow.com/a/5746376/6309)中：

```
curl -L https://github.com/pinard/Pymacs/tarball/v0.24-beta2 | tar zx 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T13:08:03.973

`git`本身不提供http接口。一个解决方案是`git archive`改用

```
git clone http://example.com/myrepo.git
git archive mytag > myrepo-mytag.tar.gz 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T18:11:13.363

如果您只需要获取必要的最小值，

```
git init temp
cd temp
git remote add x http://example.com/repo.git
git fetch x sometag --depth=1
git archive FETCH_HEAD > ../repo.sometag.tgz
cd ..
rm -rf temp 
```

会的

# iphone - 修改文件IOS的UTF时间

> ID：14101318
> 
> 赞同：3
> 
> 时间：2012-12-31T12:00:03.467
> 
> 标签：iphone, ios, file-manager

需要在UTF时间格式的文件夹内获取IOS应用程序的最后修改时间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:02:33.777

尝试以下代码，这将有所帮助

```
+ (NSString*) fnGetModifiedTime: (NSString*)inFolderPath {

    NSFileManager* fm = [NSFileManager defaultManager];
    NSDictionary* attrs = [fm attributesOfItemAtPath:inFolderPath error:nil];
    int theDirModified = 0;

    if (attrs != nil) {
        NSDate *date = (NSDate*)[attrs objectForKey: NSFileModificationDate];
        NSDate* theGlobalDate = [self toGlobalTime:date];
        theDirModified = [theGlobalDate timeIntervalSince1970];
    } 

    return [NSString stringWithFormat:@"%i",theDirModified];

}

+(NSDate *) toGlobalTime:(NSDate*) inDate
{
    NSTimeZone *tz = [NSTimeZone defaultTimeZone];
    NSInteger seconds = -[tz secondsFromGMTForDate: inDate];
    return [NSDate dateWithTimeInterval: seconds sinceDate: inDate];
} 
```

# php - 如何使用正则表达式去除多余的空格？

> ID：14101320
> 
> 赞同：0
> 
> 时间：2012-12-31T12:00:08.290
> 
> 标签：php, regex

如果可以的话，我需要你的一点帮助。如果出现超过 1 个，我需要 php 中的正则表达式来删除多个新行和多余的空格。

```
for example

Hi    this  is
    a

test      code 
```

------------------> 上面转换成

```
Hi this is
a
test code 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:01:21.187

利用 ：

```
echo preg_replace("/(^\s+|\s+$)/m","\r\n",$text); 
```

参考：链接：

[如何使用 PHP 或正则表达式在每一行的开头和结尾修剪空白](https://stackoverflow.com/questions/7335060/how-do-you-trim-white-space-on-beginning-and-the-end-of-each-new-line-with-php-o)

# jquery - 带有 Web 服务的 HTTP 500 错误 jQuery Ajax

> ID：14101321
> 
> 赞同：4
> 
> 时间：2012-12-31T12:00:11.517
> 
> 标签：jquery, asp.net, ajax, web-services

我在单个 Visual Studio 解决方案中有两个简单的项目，以了解 jQuery ajax 请求的工作原理。一个是 Web 服务，第二个是使用 Web 服务的项目。

你可以从这里下载这个非常小的项目。**[下载项目文件](https://www.dropbox.com/s/i4g7u891lyc0ayx/ExampleJsonApp.zip)**

正如您在项目中看到的，每当我尝试调用 Web 服务时，都会发生内部服务器错误 500。

在 chrome 中，我可以看到以下警报（由 Ajax 调用的“错误”函数执行）

![在此处输入图像描述](../Images/39ad983f78979b583a5f7c24f82bc668.png)

请帮助我找到问题..

编辑：

```
function btnClick() {
        debugger;
        var txtValue = $('#txtValue');
        var text = txtValue.val();
        //
        //
        $.ajax({
            url: "http://localhost:12000/ExampleJsonWS.asmx/getValue",
            type: "POST",
            dataType: "json",
            data: "{" + txtValue.val() + "}",
            timeout: 30000,
            async: false,
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                debugger;
                alert(data);
                return data;
            },
            error: function (result) {
                debugger;
                //alert(e);
                alert(result.status + ' ' + result.statusText);
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:25:12.997

问题是它不可能通过将 Web 服务保存在不同的项目中来发布，而 GET 可以做到这一点。（由[菲利普海顿](http://www.philliphaydon.com/)解释）。如果我理解错了或者有人想分享更多关于它的信息，那么欢迎他们:)

有关更多信息，您可以查看此**[链接](https://stackoverflow.com/a/14054046/1577396)**

**更好的选择是在项目中保留一个 Web 服务，并将另一个 Web 服务（需要）调用到项目的 Web 服务中。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T02:21:49.493

我认为问题可能出在您从 Example.aspx 对 Web 服务的调用中：

```
url: "http://localhost:12000/ExampleJsonWS.asmx/getValue", 
```

尝试这样的事情：

```
url: "/ExampleJsonWS.asmx/getValue", 
```

另外，请查看这篇文章：[NETWORK_ERROR: XMLHttpRequest Exception 101](https://stackoverflow.com/questions/2235929/network-error-xmlhttprequest-exception-101)。

# python - 非常简单的 python 客户端/服务器工作，但奇怪的延迟

> ID：14101322
> 
> 赞同：2
> 
> 时间：2012-12-31T12:00:13.560
> 
> 标签：python, sockets, asynchronous

我正在尝试学习如何使用套接字和有用的异步后端。我已经开始使用 asyncore 在 python 中。在阅读了各种在线帖子后，我编写了一个非常简单的聊天服务器和连接客户端，转载如下。

它似乎工作。我打开一个 python 交互式会话并输入

```
> import chatserver
> server = chatserver.EchoServer('localhost', 7667)
> server.serve() 
```

然后我打开另一个 IPython 交互式会话并输入

```
> import chatserver
> cxn = chatserver.Connection()
> cxn._connect('localhost', 7667) 
```

当我这样做时，我在服务器窗口中得到一个日志输出，表明已经建立了连接。好的。然后我输入

```
> cxn.say('hi') 
```

有一段时间什么都没有发生，然后按预期显示服务器和客户端的日志消息。

1.  为什么会出现这种延迟？
2.  我是否正确使用了日志功能？
3.  我使用线程来实现它，以便我可以使用交互式会话，而 asyncore 循环则用于连接。我这样做是否合理？
4.  （可选）如果我没有`self.out_buffer=""`在 Connection._connect 函数中包含该行，我会收到一条错误消息，指出 .out_buffer 不存在。这是怎么回事？

```
import asyncore
import socket
import logging
import threading
logging.basicConfig(level=logging.DEBUG, format="%(created)-15s %(msecs)d %(levelname)8s %(thread)d %(name)s %(message)s")
log = logging.getLogger(__name__)

class Connection(asyncore.dispatcher_with_send):
    def __init__(self):
        asyncore.dispatcher.__init__(self)

    def _connect(self, host, port, timeout=5, password=None):
        self.host = host
        self.port = port
        self.out_buffer=""
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.connect((host, port))
        #Run the asyncore loop in its own thread so that we can use the interactive session
        self.loop = threading.Thread(target=asyncore.loop)
        self.loop.daemon = True
        self.loop.start()

    def say(self, msg):
        self.out_buffer = msg

    def handle_read(self):
        data = self.recv(4096)
        log.debug('Received %s'%data)

class EchoHandler(asyncore.dispatcher_with_send):

    def handle_read(self):
        log.debug("handle_read")
        data = self.recv(1024)
        log.debug("after recv")
        if data:
            log.debug("got data: %s"%data)
            self.out_buffer = data
        else:
            log.debug("got null data")

class EchoServer(asyncore.dispatcher):
    SOCKET_TYPE = socket.SOCK_STREAM
    ADDRESS_FAMILY = socket.AF_INET
    def __init__(self, host, port):
        self.address = (host,port)
        asyncore.dispatcher.__init__(self)
        self.create_socket(self.ADDRESS_FAMILY, self.SOCKET_TYPE)
        log.debug("bind address=%s %s"%(host,port))
        self.bind(self.address)
        self.listen(1)

    def fileno(self):
        return self.socket.fileno()

    def serve(self):
        asyncore.loop()
        #Start asyncore loop in new thread
#        self.loop = threading.Thread(target=asyncore.loop)
#        self.loop.daemon = True
#        self.loop.start()

    def handle_accept(self):
        """Deal with a newly accepted client"""
        (connSock, clientAddress) = self.accept()
        log.info("conn made: clientAddress=%s %s"%(clientAddress[0], clientAddress[1]))
        #Make a handler for this connection
        EchoHandler(connSock)

    def handle_close(self):
        self.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:23:00.420

查看您依赖`asyncore.dispatcher_with_send`调用的 asyncore 文档`send()`，默认超时为`asyncore.loop()`30 秒。这可以解释延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T23:05:32.553

事实证明，问题正如 Eero 所建议的那样。

我做了两个改变：

在 EchoServer 中

`asyncore.loop()`至`asyncore.loop(timeout=0.1)`

在连接

`self.loop = threading.Thread(target=asyncore.loop)`至`self.loop = threading.Thread(target=asyncore.loop, kwargs={'timeout':0.1})`

现在响应速度要快得多。不过，这似乎是一种技巧，因此如果有人可以解释一种以适当方式获得相同效果的方法，请做出贡献。

# ember.js - 何时使用 Ember.computed

> ID：14101324
> 
> 赞同：0
> 
> 时间：2012-12-31T12:00:13.870
> 
> 标签：ember.js

我注意到在许多定义计算属性的示例中，`Ember.computed`但我并不完全理解它的作用。这两个代码示例之间有区别吗？

```
fullname: Ember.computed ->
  @get('firstName') + @get('lastName')
.property('firstName', 'lastName')

fullname: ( ->
  @get('firstName') + @get('lastName')
).property('firstName', 'lastName') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-06T04:53:27.027

我相信您的最佳示例应为：

```
fullname: Ember.computed 'firstName','lastName', ->
  "#{@get('firstName')} #{@get('lastName')}"
```

使用我们更正的语法，两个示例最终都将返回 Ember`Ember.ComputedProperty`类的实例，或多或少是一个变异的 Function 对象。在行为方面，它们是相同的。

# php - 在禁用 javascript 时在 codeigniter 中使用 datepicker

> ID：14101330
> 
> 赞同：0
> 
> 时间：2012-12-31T12:00:26.777
> 
> 标签：php, javascript, codeigniter, datepicker

禁用javascript时如何在Codeigniter视图中获取DatePicker？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:41:21.337

你不能。日期选择器使用 Javascript。您可以做的最好的事情是通过 datepicker div 留下一条消息，告诉用户启用 Javascript 以使用 Datepicker。

# android - 如何通过扩展 View 创建自己的“EditText”？如何处理/连接软键盘？

> ID：14101332
> 
> 赞同：0
> 
> 时间：2012-12-31T12:00:31.873
> 
> 标签：android, android-custom-view

我想通过扩展 View 创建自己的 EditText。（扩展 TextView 或 EditText 将被视为作弊 ;-)

它将具有简单的功能：

*   专注于触摸并显示软输入键盘
*   将键盘上的触摸字符附加到文本
*   如果触摸键盘上的“删除”按钮，则删除文本的最后一个字符

现在，我想知道如何将软键盘事件连接到我的自定义视图？你有什么想法？样品？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T11:20:38.093

对于那些对可能的解决方案感兴趣的人：

我在我的视图中覆盖了 onCreateInputConnection() 方法，并通过子类化抽象输入连接类创建了一个 MyInputConnection。从那时起，我能够处理我认为的任何软输入事件。

# java - JFrame 没有出现在其他窗口之上

> ID：14101335
> 
> 赞同：-1
> 
> 时间：2012-12-31T12:00:49.527
> 
> 标签：java, multithreading, swing

> **可能重复：**
> [JDialog 停止父 JFrame 的执行](https://stackoverflow.com/questions/14064088/jdialog-stops-execution-of-parent-jframe)

我必须 JFrame 并且它没有装饰并且只有一个进度条的图像......但是当我想向服务器发送请求时我希望它显示进度条并且它没有显示它但是我的窗口已加载....我已经尝试过 jDialog 但它正在停止执行我的代码..

这是我的代码

```
private void LoginBtnActionPerformed(java.awt.event.ActionEvent evt) {
    ProgressBar pb = new ProgressBar();
    pb.setVisible(true);
    List<BasicNameValuePair> postPairs = new ArrayList<BasicNameValuePair>();
    AsyncService asyncService = new AsyncService();

    postPairs.add(new BasicNameValuePair("PATH","authenticateUser.idoc"));
        postPairs.add(new BasicNameValuePair("user_email",email));
        postPairs.add(new BasicNameValuePair("user_password",password));

        JSONArray jArray = asyncService.sendRequest(postPairs);
        pb.setVisible(true);
} 
```

除了 gif 动画图像和标签之外，我的进度条框架中没有任何内容... **EDIT 1** */

```
 class WorkerProgressBar extends SwingWorker<Integer, Integer>
  {
    private JFrame pb = new JFrame();
    JDialog dialog = new JDialog();
     JPanel panel = new JPanel();
     JLabel label = new JLabel();
     public WorkerProgressBar(){
             panel = new JPanel();
                panel.setBackground(new Color(114,114,114));
                JLabel imageLabel = new JLabel(new ImageIcon(getClass().getResource("/icons/progress_bar.gif")));
                imageLabel.setBorder(BorderFactory.createLineBorder(Color.black));
                panel.add(imageLabel);
                dialog.getContentPane().add(panel,BorderLayout.CENTER);

                dialog.pack();
                dialog.setLocationRelativeTo(null);
     }
     protected Integer doInBackground() throws Exception
 {
        dialog.setVisible(true);
        return 0;
     }
     protected void done()
{
    try
    {
        dialog.setVisible(false);
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:07:59.097

如果窗口要位于另一个 Swing 顶级窗口之上，则应该使用 JDialog，但必须确保在将模态对话框设置为可见之前调用所有要运行的代码。但关键是您应该在后台线程（例如 SwingWorker 提供的线程）上运行长时间运行的任务。这个网站上有***很多这样的例子，因为你的问题在这里已经被问过很多次了。***

# c - C中奇怪的变量赋值

> ID：14101350
> 
> 赞同：1
> 
> 时间：2012-12-31T12:01:47.997
> 
> 标签：c, variable-assignment

> **可能重复：**
> [C 逗号运算符](https://stackoverflow.com/questions/1737634/c-comma-operator)

我遇到了一行我无法理解的代码。我记得在某处看到过类似的东西。

```
int x,y,z;
x=(y=2,z=2*y,z+4); 
```

我知道分配给 x 的值为 8。有人能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:03:08.387

这相当于：

```
 y = 2;      // y == 2
 z = 2 * y;  // z == 4
 x = z + 4;  // x == 8 
```

逗号运算符的操作数从左到右求值，结果是右操作数的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:05:24.553

逗号运算符分隔前面的值，逗号中的最后一项作为结果返回，例如

```
a = b,c 
```

将 c 的值赋给 a。这里的括号基本上什么都不做，顺便说一句

所以你有两个赋值，然后是一个语句，它的结果被返回并赋值给 x

# mysql - 如何从 phpMyAdmin 数据库中查找连接字符串？

> ID：14101352
> 
> 赞同：9
> 
> 时间：2012-12-31T12:02:01.210
> 
> 标签：mysql, database, phpmyadmin, connection-string

我想从 java 连接到我目前从 phpMyAdmin 管理的数据库。我不拥有数据库运行的服务器。

但是，我想找到该数据库的连接字符串，以便能够使用 java 与我的数据库进行通信。

有谁知道如何找到该连接字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:08:46.087

如果您有权访问 phpMyAdmin PHP 文件，那么您可以查看该`config.inc.php`文件，其中有数据库连接的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-28T16:37:14.853

这是 phpMyAdmin 的后端 MySQL 的字符串语法。

```
"server = localhost; port = 3306; user = <phpMyAdminUsername>; password = <phpMyAdminPassword>; database = <database>" 
```

如果使用远程数据库，请将 localhost 替换为 IP 地址。

# asp.net - 如何验证字符串是否为 dd-My 格式的日期，而不是过去的日期？

> ID：14101359
> 
> 赞同：1
> 
> 时间：2012-12-31T12:02:45.160
> 
> 标签：asp.net, regex

我有一个日期字段，格式为“dd-My”，例如 01-Jan-2013。首先，我想检查必须是“dd-My”的格式，其次日期不应该是过去，但可以是今天及以后。

我该怎么做？我想使用正则表达式，但我不知道什么是合适的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:12:33.230

您应该使用`DateTime.TryParseExact`而不是使用正则表达式来验证您的 DateTime

```
string testDate = "01-Jan-2013";
DateTime temp;
if (DateTime.TryParseExact(testDate, 
                           "dd-MMM-yyyy", 
                           CultureInfo.InvariantCulture, 
                           DateTimeStyles.None, 
                           out temp) &&
    (temp > DateTime.Today))
{
    //Valid date and greater than today
}
else
{
    //Invalid date or less than today
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:58:42.050

我认为您应该绑定用户以正确格式填写日期，而不是检查它...

在这种情况下，最好的解决方案是[MaskEditExtender](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/MaskedEdit/MaskedEdit.aspx)

# artificial-intelligence - 为聊天机器人创建 AIML 以提问

> ID：14101360
> 
> 赞同：3
> 
> 时间：2012-12-31T12:02:49.580
> 
> 标签：artificial-intelligence, chatbot, aiml

我正在为 Program-O 聊天机器人创建 AIML 文件并遇到问题。

我想做的是按顺序提出一个又一个问题。此外，问题的顺序应该是随机的。这是对学生的满意度评估测试，我正在尝试使用聊天机器人而不是传统方法进行开发。

这是我想到的 AIML 格式。

**样本.aiml**

```
<category>
    <pattern>HELLO<bot/></pattern>
    <template>
        <random>
            <li><warm/>Hello there. Do you want to talk about your campus life?</li>
            <li><happy/>Hi. Do you want to talk about your campus life?</li>
            <li><happy/>Goodday. Do you want to talk about your campus life?</li>
        </random>
    </template>
</category>
<category>
    <pattern>*</pattern>
    <that>HELLO THERE. DO YOU WANT TO TALK ABOUT CAMPUS LIFE</that>
    <template>
        <random>
            <li>How were the classes?</li>
            <li>Does the teacher give a clear answer?</li>
            <li>Was the teacher come on time?</li>
        </random>
    </template>
</category>
<category>
    <pattern>*</pattern>
    <that>HOW WERE THE CLASSES</that>
    <template>
        <random>
            <li>Does the teacher give the full and clear explanation?</li>
            <li>What about the material used in the classes?</li>
            <li>What do you think about the courses content?</li>
        </random>
    </template>
</category> 
```

**问题**是 *(asterisk) 通配符不适用于该谓词。有没有其他方法可以构建满足我要求的 AIML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T21:02:08.280

使用下划线通配符。在 AIML 中，有两个通配符 - * 和 _。下划线通配符的优先级高于星号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-09T18:31:32.460

```
string text = System.IO.File.ReadAllText(txt_filename.Text.ToString()).ToString();

        int length = (Int32)text.Length;
        txt_gbox.Text = length.ToString();

        LexicalAnalysis analyzer = new LexicalAnalysis();

        while (text !=)
        {
            text = text.Trim(' ', '\t');
            string token = analyzer.GetNextLexicalAtom(ref text);
            txt_gbox.Text = token;
        } 
```

我想在 txt_gbox 的 Richtextbox 中显示这些令牌，但在 while loop programe stop....

# objective-c - how to use nsdate string objec for later use?

> ID：14101362
> 
> 赞同：-3
> 
> 时间：2012-12-31T12:03:04.813
> 
> 标签：objective-c, nsdate, nsdateformatter

I'm so fedup with `NSDate` string object. currently I am generating an unique id on the bases of `NSDate` as follows:

```
NSDate *current_date = [[NSDate date]retain];
NSDateFormatter *df = [[NSDateFormatter alloc]init];
[df setDateFormat:@"HHmmssddMMYY"];
NSString *unique_id=[df stringFromDate:current_date];
NSString  *   current_Test_id=[NSString stringWithString:unique_id];
NSLog(@"current_test_idString %@",current_Test_id); 
```

The code above is generating unique id and prints successfully but if I am printing or accessing `currtent_Test_id` in another `IBAction` method then app crashes.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:13:20.670

Use this Method

```
 - (NSString *)stringDateFromDate: (NSDate *) date{

    NSDateFormatter *df = [[NSDateFormatter alloc]init];
    [df setDateFormat:@"HHmmssddMMYY"]; 
    NSString *current_Test_id=[NSString stringWithString:[df stringFromDate:date]];
    [df release];
    NSLog(@"current_tst_id %@",current_Test_id);

    return current_Test_id;

} 
```

Call Method Like that

```
NSString  *current_tst_id = [self stringDateFromDate:[NSDate date]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:14:51.403

stringWithString will create an autorelease string, modify your code as

```
NSString  *   current_Test_id = [[NSString stringWithString:unique_id]retain]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:12:26.117

an NSString (or any object, for that matter) created with a class method, and not an init method, will be autoreleased. This means on the next iteration of the event loop, `current_Test_id` is released, and now you have a pointer to a dead object.

See [this similar question](https://stackoverflow.com/questions/6578/understanding-reference-counting-with-cocoa-and-objective-c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T12:14:53.620

As `current_Test_id` is instance method.

in the init (in case of mac os) or viewDidLoad (for ios) alloc+init it.

and then assign :

```
current_Test_id=[NSString stringWithString:unique_id]; //it will be in autorelease mode. 
```

or

```
current_Test_id=[[NSString stringWithString:unique_id]retain]; 
```

# jsp - 在 Facelets 页面中包含 JSP 页面

> ID：14101364
> 
> 赞同：1
> 
> 时间：2012-12-31T12:03:21.047
> 
> 标签：jsp, jsf, include, facelets

如何在 Facelets 页面中包含 JSP 页面？

`mypage.xhtml`

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <meta charset="utf-8"></meta>
        <link href="css/bootstrap.css" rel="stylesheet"></link>
    </h:head>

    <h:body>

    </h:body>
</html> 
```

`header.jsp`

```
<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
            <div class="container">
                <div class="nav-collapse collapse">
                    <ul class="nav">
                        <li><a href="index.xhtml">Home</a></li>
                        <li><a href="login.xhtml">Login</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:10:42.587

Facelets 没有对包含 JSP 文件的内置支持。JSP 是一种已弃用的视图技术，而 Facelets 基本上是它的继承者。由于 JSP 已被弃用，您不应期望有任何支持它的计划。

只需重命名`header.jsp`并`header.xhtml`消除任何 JSP 特定的工件。对于 JSF/Facelets，JSP 中没有什么是“不可能的”。

作为一种临时手段，您可以使用[OmniFaces](http://omnifaces.org) [`<o:resourceInclude>`](http://showcase.omnifaces.org/components/resourceInclude)标记将 JSP/Servlet 页面的输出嵌入到 Facelets 中。请注意，它因此就像`<c:import>`工作方式一样，并且仅适用于静态内容。

### 也可以看看：

*   [如何使用 JSF 2.0 Facelets 在 XHTML 中包含另一个 XHTML？](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets/4793959#4793959)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:09:32.623

使用 OmniFaces [http://omnifaces.org](http://omnifaces.org)

你可以这样使用

```
<o:resourceInclude path="/someJSPpage.jsp" /> 
```

参考：

[http://showcase.omnifaces.org/components/resourceInclude](http://showcase.omnifaces.org/components/resourceInclude)

# c# - 将 facebook 评论框集成到 xaml（Windows 8 商店应用程序）C#

> ID：14101371
> 
> 赞同：0
> 
> 时间：2012-12-31T12:04:31.370
> 
> 标签：c#, facebook, xaml, comments, windows-store-apps

我正在尝试在 Windows 8 商店应用程序中嵌入 Facebook 评论框。是否可以直接集成评论框或是否有其他替代解决方案？

我现在正在尝试的 >>>> 创建一个网页并将 Facebook 评论框添加到网页。然后访问我通过 Webview 控件创建的网页。但是，当我尝试使用评论框的链接登录 Facebook 时，它不会在 webview 中打开登录对话框，但会打开我的 windows 8 Store 应用程序拉到后台的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T01:47:03.010

我建议您使用 Facebook API，正如[另一位 SO 用户回答类似问题所推荐的那样](https://stackoverflow.com/questions/13932330/windows-store-application-facebook-sdk-integration)

[有一个适用于 Windows 8 的 Facebook API](http://csharpsdk.org/docs/windows/)

[你可以在这里找到 Github 上的示例](https://github.com/facebook-csharp-sdk/facebook-windows8-sample)

我没有尝试过这个 API，但是使用类似的 API 做了一个 WPF 应用程序，它通常很简单。

如果您愿意，而且我知道您没有问过这个问题 - 这只是一个提示，WinRT API 中有一个 Web 身份验证代理，可以启用与 Facebook 等 OAuth 提供商的单点登录 (SSO) 连接。

[你可以在这里找到一个样本](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)

希望这会有所帮助，祝你好运。

# android - /dev/log/main 和 /dev/log/system 在 android logcat 中的意义是什么？

> ID：14101376
> 
> 赞同：6
> 
> 时间：2012-12-31T12:05:05.867
> 
> 标签：android, android-logcat

`adb lolcat`当我输入命令行时，我通常会得到这两行

```
--------- beginning of /dev/log/main
D/dalvikvm( 2586): GC_CONCURRENT freed 651K, 7% free 12236K/13063K, paused 7ms+4ms
D/dalvikvm( 2586): GREF has increased to 201
W/AudioHardwareALSA( 2071): badstate and do recovery.....
--------- beginning of /dev/log/system
I/ActivityManager( 2159): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.android.mms/.ui.ConversationList bnds=[909,207][1011,300]} from pid 2586 
```

这两个东西在 logcat 输出中有什么意义，它意味着什么？谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T12:08:49.020

[http://elinux.org/Android_Logging_System](http://elinux.org/Android_Logging_System)说：

> 创建系统日志是为了将系统消息保存在单独的缓冲区中（在“/dev/log/main”之外），这样单个详细的应用程序就不会溢出系统消息并导致它们丢失。

# jsf - 当通过链接或后退按钮打开时，强制 JSF 刷新页面/视图/表单

> ID：14101380
> 
> 赞同：5
> 
> 时间：2012-12-31T12:05:22.383
> 
> 标签：jsf, back-button, browser-refresh, html-post

我有一个将数据发布到外部页面的 JSF 页面。数据是从一个 JSF 托管 bean 加载的，该 bean 在发布数据中生成一个唯一 ID。

我有一个问题，用户单击结帐按钮然后导航回同一页面并再次按下结帐按钮。帖子数据没有更新。此外，根本不调用 bean。无论如何强制JSF重新加载页面和表单数据？

```
<form action="#{checkoutBean.externalUrl}" method="post"
    id="payForm" name="payForm">
       <input type="hidden" value="#{checkoutBean.uniqueID}" />
       <input type="submit" value="Proceed to Checkout" />
</form> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T14:26:33.980

该页面可能是从浏览器缓存中加载的。这本质上是无害的，但确实让最终用户感到困惑，因为他/她错误地认为它确实来自服务器。您可以通过查看浏览器的 Web 开发人员工具集中的 HTTP 流量监视器轻松确认这一点（在 Chrome/FireFox23+/IE9+ 中按 F12 并检查“网络”部分）。

您基本上需要告诉浏览器不要缓存（动态）JSF 页面。这样，浏览器将实际向服务器请求页面（并由此触发托管 bean 的正确创建/初始化等），而不是从其缓存中显示先前请求的页面。

通常，这是通过一个简单的[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)来完成的，如下所示：

```
@WebFilter("/app/*")
public class NoCacheFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpServletResponse response = (HttpServletResponse) res;

        if (!request.getRequestURI().startsWith(request.getContextPath() + ResourceHandler.RESOURCE_IDENTIFIER)) { // Skip JSF resources (CSS/JS/Images/etc)
            response.setHeader("Cache-Control", "no-cache, no-store, must-revalidate"); // HTTP 1.1.
            response.setHeader("Pragma", "no-cache"); // HTTP 1.0.
            response.setDateHeader("Expires", 0); // Proxies.
        }

        chain.doFilter(req, res);
    }

    // ...
} 
```

`/app/*`您要关闭浏览器缓存的示例 URL 模式在哪里。如有必要，您可以将其映射到`/*`，`*.xhtml`甚至映射到`servletNames={"Faces Servlet"}`.

如果您碰巧使用 JSF 实用程序库[OmniFaces](http://omnifaces.org)，那么您可以[`CacheControlFilter`](http://showcase.omnifaces.org/filters/CacheControlFilter)通过添加以下条目来使用它的内置`web.xml`（它演示了对 的直接映射`FacesServlet`，这意味着每个动态 JSF 页面都不会被缓存）：

```
<filter>
    <filter-name>noCache</filter-name>
    <filter-class>org.omnifaces.filter.CacheControlFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>noCache</filter-name>
    <servlet-name>facesServlet</servlet-name>
</filter-mapping> 
```

另请参阅[陈列柜](http://showcase.omnifaces.org/filters/CacheControlFilter)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-07T11:45:40.307

我找到了一个适用于 JSF 的解决方案，而无需创建 servlet-filter。只需将下面的行放到您的 .xhtml 页面中。

```
<f:event type="preRenderView" listener="#{facesContext.externalContext.response.setHeader('Cache-Control', 'no-cache, no-store')}" /> 
```

# c++ - `ios_base` 的标志都是静态 const 整数变量。为什么可以用 `ios_base::setf()` 改变它们？

> ID：14101391
> 
> 赞同：0
> 
> 时间：2012-12-31T12:06:52.117
> 
> 标签：c++, constants, iostream

从头文件中可以看出`<xiosbase>`，类`ios_base`派生自`template <class Dummy> class _Iosb`，其中`static const variables`定义了以下内容：

```
 static const _Fmtflags skipws = (_Fmtflags)_IOSskipws;
 static const _Fmtflags unitbuf = (_Fmtflags)_IOSunitbuf;
 static const _Fmtflags uppercase = (_Fmtflags)_IOSuppercase;
 static const _Fmtflags showbase = (_Fmtflags)_IOSshowbase;
 static const _Fmtflags showpoint = (_Fmtflags)_IOSshowpoint;
 static const _Fmtflags showpos = (_Fmtflags)_IOSshowpos;
 static const _Fmtflags left = (_Fmtflags)_IOSleft;
 static const _Fmtflags right = (_Fmtflags)_IOSright;
 static const _Fmtflags internal = (_Fmtflags)_IOSinternal;
 static const _Fmtflags dec = (_Fmtflags)_IOSdec;
 static const _Fmtflags oct = (_Fmtflags)_IOSoct;
 static const _Fmtflags hex = (_Fmtflags)_IOShex;
 static const _Fmtflags scientific = (_Fmtflags)_IOSscientific;
 static const _Fmtflags fixed = (_Fmtflags)_IOSfixed; 
```

为什么可以使用成员函数 ios_base::setf() 更改这些标志？他们不是恒定的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:15:46.503

如果您查看 GCC 的实现，`ios_base:setf`看起来像这样

仅添加版本

```
 inline fmtflags              
    setf(fmtflags __fmtfl)       
    {                            
      fmtflags __old = _M_flags; 
      _M_flags |= __fmtfl;       
      return __old;              
    } 
```

添加/删除版本

```
inline fmtflags                           
setf(fmtflags __fmtfl, fmtflags __mask)   
{                                         
  fmtflags __old = _M_flags;              
  _M_flags &= ~__mask;                    
  _M_flags |= (__fmtfl & __mask);         
  return __old;                           
} 
```

即它改变了成员变量`_M_flags`

您正在查看的静态 const 变量只是该变量的方便预定义值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:10:26.877

答案是这些成员**没有**改变；`setf`设置一些非常量成员（可能是私有的/受保护的）。您可能可以检查相关的标头以准确了解您的实现是做什么的。

# php - 从 php 网站执行 bash 脚本，脚本未运行

> ID：14101394
> 
> 赞同：0
> 
> 时间：2012-12-31T12:07:33.527
> 
> 标签：php, linux, bash

有一个带有按钮的网站，单击该按钮应该会启动一个假设卸载目录的 bash 脚本。该按钮`functions.inc`使用此功能调用 php 脚本：

```
function sftmz_release_s3test_connections($bucket_name){
    if($bucket_name == 's3test'){
        drupal_set_message('Check mount status ! - released?');
        $cmd = '/var/www/html/company/sites/default/modules/rp_minisite/admin/script.sh';
        exec($cmd);
    }
} 
```

我的问题是：当我在 shell 中运行命令时：

```
/var/www/html/company/sites/default/modules/rp_minisite/admin/script.sh 
```

它工作正常。

当我单击按钮时，会出现测试，但它不会运行脚本。如何查看日志？我可以将日志打印到 shell 吗？我不能因为它是使用 html 上的按钮激活的...
我认为这是权限问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:14:15.880

尝试获取有关调用时实际发生的情况的更多信息`exec`：

```
exec($cmd, $return, $status);
echo '<pre>';
var_dump($return);//is an array, containing the commands output
echo '</pre>';
if ($status === 0)
{//normally, if a cmd exits with 0, all is well
    echo 'Command executed';
} 
```

如果发生了一些有趣的事情，您可能需要检查您的脚本是否依赖于环境变量/别名等设置。也许您必须加载一个`.profile`文件才能使脚本工作。
[在这里你可以看到如何做到这一点](https://stackoverflow.com/questions/9843550/load-profile-with-proc-open)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:09:28.127

你检查过`exec()`函数的返回值吗？有关更多信息，请参阅[文档](http://php.net/manual/en/function.exec.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:09:35.930

尝试使用[exec](http://www.php.net/manual/en/function.exec.php)命令的其他参数..

# php - 如何在 Symfony2 中编写多个共享函数的实体类

> ID：14101396
> 
> 赞同：1
> 
> 时间：2012-12-31T12:07:48.707
> 
> 标签：php, symfony, dry

我有多个实体附有某种文件。我遵循了关于如何使用学说（[此处](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)）处理文件上传的食谱条目，但我的问题是：

如何在不复制大量代码的情况下为多个实体执行此操作？现在我的所有实体都共享与获取路径相关的功能，尽管在这里和那里进行了一些修改，所以它们并不相同，但大部分代码都是。这样做最干净的方法是什么？

这是两个实体的示例，请注意重叠功能：

图片：

```
public function preUpload()
{
    if (null === $this->file) {
        return;
    }

    $dir = $this->getUploadRootDir().'/'.$this->getParentDir();

    if (!is_dir($dir)) {
        mkdir($dir);
    }

    $slugger = new \Sam\TourBundle\Service\SlugService();

    $pathinfo = pathinfo($this->file->getClientOriginalName());
    $path = $slugger->slugize($pathinfo['filename']).'.'.$pathinfo['extension'];
    $this->path = $path;

    // If file already exists rename it
    if (file_exists($this->getAbsolutePath())) {
        $i = 1;
        while (file_exists($this->getAbsolutePath())) {
            $this->path = $i.'-'.$this->path;
            $i++;
        }
    }

}

/**
* @ORM\PostPersist()
* @ORM\PostUpdate()
*/
public function upload()
{
    // the file property can be empty if the field is not required
    if (null === $this->file) {
        return;
    }

    $dir = $this->getUploadRootDir().'/'.$this->getParentDir();
    $this->file->move($dir, $this->path);

    $thumb = new \Sam\TourBundle\Service\ThumbnailService();
    $thumb->makeThumbnail($this->getAbsolutePath());

    unset($this->file);
}

/**
* @ORM\PostRemove()
*/
public function removeUpload()
{
    $file = $this->getAbsolutePath();
    $thumb_file = $this->getThumbnailAbsolutePath();

    if (file_exists($file)) {
        unlink($file);
    }

    if (file_exists($thumb_file)) {
        unlink($thumb_file);
    }
}

public function getParentDir()
{
    return $galerija = $this->getGalerija()->getSlug().'/';
    //return null === $galerija ? null : $this->getUploadRootDir().'/'.$galerija.$this->path;
}

public function getAbsolutePath()
{
    return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->getParentDir().$this->path;
}

public function getThumbnailAbsolutePath()
{
    $pathinfo = pathinfo($this->getAbsolutePath());
    $thumbpath = $pathinfo['dirname'].'/'.$pathinfo['filename'].'_thumb.'.$pathinfo['extension'];
    return null === $this->path ? null : $thumbpath;
}

public function getRootDir()
{
    return __DIR__;
}

public function getWebPath()
{
    return null === $this->path ? null : $this->getUploadDir().'/'.$this->getParentDir().$this->path;
}

public function getThumbnailWebPath()
{
    $pathinfo = pathinfo($this->getAbsolutePath());
    $thumbpath = $pathinfo['filename'].'_thumb.'.$pathinfo['extension'];
    return null === $this->path ? null : $this->getUploadDir().'/'.$this->getParentDir().$thumbpath;
}

protected function getUploadRootDir()
{
    // the absolute directory path where uploaded documents should be saved
    return realpath(__DIR__.'/../../../../web/'.$this->getUploadDir());
}

protected function getUploadDir()
{
    // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view
    return 'images';
} 
```

文档：

```
public function preUpload()
{
    if (null === $this->file) {
        return;
    }

    $dir = $this->getUploadRootDir().'/'.$this->getParentDir();

    if (!is_dir($dir)) {
        mkdir($dir);
    }

    $slugger = new \Sam\TourBundle\Service\SlugService();

    $pathinfo = pathinfo($this->file->getClientOriginalName());
    $path = $slugger->slugize($pathinfo['filename']).'.'.$pathinfo['extension'];
    $this->path = $path;

    // If file already exists rename it
    if (file_exists($this->getAbsolutePath())) {
        $i = 1;
        while (file_exists($this->getAbsolutePath())) {
            $this->path = $i.'-'.$this->path;
            $i++;
        }
    }

}

/**
* @ORM\PostPersist()
* @ORM\PostUpdate()
*/
public function upload()
{
    // the file property can be empty if the field is not required
    if (null === $this->file) {
        return;
    }

    $dir = $this->getUploadRootDir().'/'.$this->getParentDir();
    $this->file->move($dir, $this->path);

    unset($this->file);
}

/**
* @ORM\PostRemove()
*/
public function removeUpload()
{
    $file = $this->getAbsolutePath();

    if (file_exists($file)) {
        unlink($file);
    }
}

public function getParentDir()
{
    return $ponuda = $this->getPonuda()->getSlug().'/';
}

public function getAbsolutePath()
{
    return null === $this->path ? null : $this->getUploadRootDir().'/'.$this->getParentDir().$this->path;
}

public function getRootDir()
{
    return __DIR__;
}

public function getWebPath()
{
    return null === $this->path ? null : $this->getUploadDir().'/'.$this->getParentDir().$this->path;
}

protected function getUploadRootDir()
{
    // the absolute directory path where uploaded documents should be saved
    return realpath(__DIR__.'/../../../../web/'.$this->getUploadDir());
}

protected function getUploadDir()
{
    // get rid of the __DIR__ so it doesn't screw when displaying uploaded doc/image in the view
    return 'documents';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:09:06.737

我会亲自创建一个上传服务类，其中包含一个可以传递实体的方法，您可以在需要的任何地方注入此服务，并且只将它写在一个地方。我相信，在您的实体中拥有这种逻辑通常不是一个好主意。

从我的角度来看，这种情况下的继承看起来完全不正确，因为它是一种添加行为而不是泛化的方式，你可以这样做，但我建议不要这样做。继承本身被过度使用，而不是最干净的工作方式，而且 Doctrine 的实现也很烦人。Traits 可以做到这一点，尽管在这种环境下我还没有太多使用它们的经验。我强烈建议按照 Symfony 的使用方式使用服务。

# css - 将三个 div 定位在一个 div 内，但它重叠

> ID：14101407
> 
> 赞同：1
> 
> 时间：2012-12-31T12:08:58.033
> 
> 标签：css, position, css-float

对不起，我没有其他方式来描述这一点，我让自己沮丧到流泪，试图弄清楚如何让它停止。

我正在尝试使我的图像[http://i.imgur.com/nyLeL.png](http://i.imgur.com/nyLeL.png)中的黑色 div增加其宽度，灰色 div 而不是灰色重叠。红色只是图像的占位符，忽略它。

黑色和灰色 div 没有高度属性，因为我不想让它们变成滚动框，我希望它们的高度随着文本量的增加而增加。白色和红色的有，我发誓我已经检查了 50 次，以确保黑色或灰色 div 中都没有高度属性。当我增加红色/白色 div 的高度时，黑色的也会变大。

好的，我想我已经提供了足够的细节，有没有办法解决这个问题？我已经用谷歌搜索了几个小时，但我无法弄清楚这一点，我从不在地方发布问题，因为我总是在得到答案之前就弄清楚了，但我很绝望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:35:15.943

您的代码需要为您提供确切的解决方案，但我希望[`this jsfiddle`](http://jsfiddle.net/VbSgk/)能给您提供一种方法来了解如何实现这种效果以及您可能缺少什么。

如果您可以提供您的代码，那么也许可以提供一个确切的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:41:50.020

确保您在灰色 div 之后清除了浮动。您可以执行以下操作：

```
<div style="clear:both"></div> 
```

# ajax - CORS POST 无法在 FF 上与 Apache 一起使用

> ID：14101408
> 
> 赞同：1
> 
> 时间：2012-12-31T12:09:01.280
> 
> 标签：ajax, tomcat, cors

我正在尝试从 Firefox 到我的 Tomcat 服务器进行 CORS POST 调用。Tomcat 提供 RESTful 服务。这是我的服务器端返回码：

```
 ResponseBuilder rb = Response.ok( JSON.serialize(result));

        rb.header("Content-Type", "text/javascript;charset=utf8");
        rb.header("Access-Control-Allow-Origin", "*");
        rb.header("Access-Control-Max-Age", "3628800");
        rb.header("Access-Control-Allow-Methods", "GET,POST");

        return rb.build(); 
```

这是我的 AJAX 调用：

```
var feedQueryPOST = {"param" : someListOfParams, "timeWindow": 36000};

     $.ajax({
        type: 'POST',
        url:"http://xxx.xxx.xxx.xxx:8080/MyWebService/getwebfeed",
        contentType: "text/plain",
        data: feedQueryPOST,
        async: true,
        success:function(json){
            alert("success!");
        },
        error:function(e){
            alert(JSON.stringify(e));
        },
     }); 
```

当我进行测试查询时，我使用 RESTClient 来检查标题，它返回为：

```
Status Code: 200 OK
Access-Control-Allow-Methods: GET,POST
Access-Control-Allow-Origin: *
Access-Control-Max-Age: 3628800
Content-Length: 318
Content-Type: text/javascript;charset=utf8
Date: Mon, 31 Dec 2012 12:02:11 GMT
Server: Apache-Coyote/1.1 
```

但是在我的 javascript 端，回调仍然会出现 readystate = 0 和 status = 0 的错误。我一直在寻找答案很长时间都无济于事。我知道我可能在这里遗漏了一些简单的东西。任何帮助表示赞赏，提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T16:20:21.323

而不是`contentType: "text/plain",`，使用`dataType: 'json'`，你应该没问题

# jquery - 使用 jQuery 从表中删除一列

> ID：14101411
> 
> 赞同：1
> 
> 时间：2012-12-31T12:09:17.913
> 
> 标签：jquery

在我的表格中，第一行的 td 包含一个图像。当我单击图像时，我想使用 jQuery 删除图像下方的整个列（td）。

我怎样才能做到这一点？

```
<table  border="1" >  
        <tr>
        <td >
        <img  src="addButton.jpg" id='addButton' />
        </td> 
        <td >
        <img  src="addButton.jpg" id='addButton' /></td>
        </tr>
        <tr>
        <td >Result1
        </td> 
        <td >Result2</td>
        </tr>
        <tr>
        <td >Result1
        </td> 
        <td >Result2>/td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:22:38.580

我能想到的一种通用方法。

```
$("td img").click(function() {
    var $td = $(this).closest("td");
    var index = $td.index() + 1;
    $td.closest("table").find("td:nth-child(" + index + ")").remove();
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:19:50.547

为您的 td 赋予其他任何地方未应用的相同类名。然后

```
$(image).Click(function(){
     $('.classname').remove();
}); 
```

# c - 无法获取宏和运算符优先级背后的逻辑

> ID：14101412
> 
> 赞同：0
> 
> 时间：2012-12-31T12:09:22.777
> 
> 标签：c, c-preprocessor

以下代码的输出是 8 24 32。我理解 8 和 24 背后的逻辑，但 32 对我来说似乎很奇怪。有人可以解释为什么它打印 32 吗？

```
#define cube(x) x*x*x
void main()
{
    printf("%d ",cube(2));
    printf("%d ",16+cube(2));
    printf("%d ",16/cube(2));
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:11:03.100

最后一个`printf`被翻译成：

```
printf("%d ",16/2 * 2 * 2); 
```

这就是为什么所有的宏都应该有括号：

```
#define cube(x) ((x)*(x)*(x)) 
```

或者只是使用函数并相信编译器会内联它们。功能几乎总是更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T12:11:01.667

宏只是文本¹的编译时替换。所以 C 预处理器会改变这一行：

```
 printf("%d ",16/cube(2)); 
```

到这一行：

```
printf("%d ", 16/2*2*2); 
```

**完成**此文本替换后，编译器将检查表达式。这导致以下评估：

```
// 16/2 is evaluated first because '/' has the same precedence as '*',
// so the tie is broken by left-to-ride order:
printf("%d ", 8*2*2);

// Then each of the '*' operators is evaluated in turn:
printf("%d ", 16*2);
printf("%d ", 32); 
```

通常建议通过在每次使用宏参数和整个宏定义周围使用括号来防止运算符优先级改变宏中表达式的解释方式：

```
#define cube(x) ((x)*(x)*(x)) 
```

请注意，如果 cube 不是宏而是函数，则结果会有所不同，因为函数在参数传递给它**之前已完全编译：**

```
int cube (int x)
{
   return x*x*x;
}
…
printf("%d ",16/cube(2)); // Prints 2. 
```

## 脚注

¹实际上，文本被解析为预处理器标记，并且可能会出现其他一些语法问题。在很大程度上，宏替换是文本替换，但可能会有一些复杂性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T12:14:03.963

如果您在 gcc 下使用 -E 编译以查看预处理器输出

```
gcc -E demo.c > out.c 
```

下次可以帮到你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T12:11:06.550

因为立方体是一个宏，

```
16/cube(2) 
```

通过预处理器评估为

```
16/2*2*2 
```

达到32。

如果您需要宏（而不是函数），请将输入和输出括在括号中。例如

```
#define cube(x) ((x)*(x)*(x)) 
```

但我真的会在这里使用一个函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T15:22:06.620

在使用宏的情况下，我们应该非常小心。它只是看起来像一个函数，但实际上它不是一个函数。在编译时预处理器只是在它找到的任何地方扩展宏，因此在第一次使用宏时

```
printf("%d ",cube(2)); expands into printf("%d",x*x*x); then it prints 8
printf("%d ",16+cube(2)); expands into  printf("%d",16+x*x*x); then it prints 24
printf("%d ",16/cube(2)); expands into printf("%d",16/x*x*x); but prints 32 
```

# android - 在sqlite中查询android

> ID：14101413
> 
> 赞同：0
> 
> 时间：2012-12-31T12:09:24.433
> 
> 标签：android, android-sqlite

我在 android 应用程序中的 Sqlite 中定义了一个表，但我似乎不能定义超过一行.. package my.first.pro;

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DBAdapter {

public static final String KEY_NAME = "name";
public static final String KEY_EIGHTU = "8u";
public static final String KEY_NINEU = "9u";
public static final String KEY_TENU = "10u";
public static final String KEY_ELEVENU = "11u";

private static final String DB_NAME = "db_example";
private static final String DB_TABLE = "al amal";
private static final int    DB_VER = 1;

// a SQL statement to create a new table
private static final String DB_CREATE = 
    "CREATE TABLE al amal (name TEXT NOT NULL, 8u TEXT NOT NULL, 9u TEXT NOT NULL, 10u    TEXT NOT NULL, 11u TEXT NOT NULL);";

private static class DatabaseHelper extends SQLiteOpenHelper {

    // Class constructor
    DatabaseHelper(Context c) {
        super(c, DB_NAME, null, DB_VER);
    }

    // called by the parent class when a DB doesn't exist
    public void onCreate(SQLiteDatabase db) {
        // Execute our DB_CREATE statement
        db.execSQL(DB_CREATE);
    }

}

private final Context context;  
private DatabaseHelper helper;
private SQLiteDatabase db;

// DBAdapter class constructor
public DBAdapter(Context c) {
    this.context = c;
}

public DBAdapter open() throws SQLException {
    // instantiate a DatabaseHelper class (see above)
    helper = new DatabaseHelper(context);

            db = helper.getWritableDatabase();

    return this;
}

public void close() {
    helper.close();
}

//String name, String eu, String nu, String tu, String elu
public long insertUser( ) {
    ContentValues vals = new ContentValues();

    //the following is filling the first row.. but i don't know how to fill out more than one row
    vals.put(KEY_NAME, "John Smith");
    vals.put(KEY_EIGHTU, "F");
    vals.put(KEY_NINEU, "F");
    vals.put(KEY_TENU, "NF");
    vals.put(KEY_ELEVENU, "NF");
    return db.insert(DB_TABLE, null, vals);
}

public void findavailabe (String name) {
// Perform a database query
Cursor cursor = db.query(
        DB_TABLE, // table to perform the query
        new String[] { KEY_NAME,KEY_EIGHTU,KEY_NINEU,KEY_TENU,KEY_ELEVENU }, //resultset columns/fields
        KEY_NAME+"=? AND "+KEY_EIGHTU+"=? AND"+KEY_NINEU+"=? AND "+KEY_TENU+"=? AND "+KEY_ELEVENU, //condition or selection
        new String[] { user, pass },  //selection arguments (fills in '?' above)
        null,  //groupBy
        null,  //having
        null   //orderBy
    );

/** Authenticate a user by querying the table to see
  * if that user and password exist. We expect only one row
  * to be returned if that combination exists, and if so, we
  * have successfully authenticated.
  * 
  * @param user username (string)
  * @param pass user's password (string)
  * @return true if authenticated, false otherwise
 */
/**public boolean authenticateUser(String user, String pass) {
    // Perform a database query
    Cursor cursor = db.query(
            DB_TABLE, // table to perform the query
            new String[] { KEY_USER }, //resultset columns/fields
            KEY_USER+"=? AND "+KEY_PASS+"=?", //condition or selection
            new String[] { user, pass },  //selection arguments (fills in '?' above)
            null,  //groupBy
            null,  //having
            null   //orderBy
        );

    // if a Cursor object was returned by the query and
    // that query returns exactly 1 row, then we've authenticated
    if(cursor != null && cursor.getCount() == 1) {
        return true;
    }

    // The query returned no results or the incorrect
    // number of rows
    return false;
}

}} 
```

第二个问题：我在sqlite中进行查询时遇到问题我的表由五列组成..第一个是名称，另外四个是约会时间..我想搜索一个特定的名字免费作为“F”..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:26:17.267

`i can't seem to define more than one row`

`insertUser( )`可以修改您的函数以传入定义行的 5 个值。然后，多次调用该函数将导致多行，例如：

```
public long insertUser(String name, String eightU, String nineU, String tenU, String elevanU) {
   ContentValues vals = new ContentValues();

   vals.put(KEY_NAME, name);
   vals.put(KEY_EIGHTU, eightU);
   vals.put(KEY_NINEU, nineU);
   vals.put(KEY_TENU, tenU);
   vals.put(KEY_ELEVENU, elevanU);
   return db.insert(DB_TABLE, null, vals);
} 
```

# c# - 使用 HiddenFor 的模型属性中的空值

> ID：14101414
> 
> 赞同：0
> 
> 时间：2012-12-31T12:09:25.973
> 
> 标签：c#, javascript, asp.net-mvc-3, model

我正在编写一些 javascript，其中下拉菜单中的选定选项被分配给 hiddenfor 值。此 hiddenfor 正在使用模型属性 (SelectedModule)。

当我单击提交按钮时，model.SelectedModule 具有 null 值，即使我使用我的 javascript 为其分配了一个值。

**看法**

```
@model UserManager.Models.vw_UserManager_Model
@{
    ViewBag.Title = "EditUser";
}
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <div id="edit-user">
        <fieldset>
            <legend>Edit user details</legend>
            <div class="editor-field">
                @Html.DropDownListFor(Model => Model.salutation, new List<SelectListItem>
                     {
                        new SelectListItem{ Text="Mr", Value = "Mr" }, 
                        new SelectListItem{ Text="Mrs", Value = "Mrs" },
                        new SelectListItem{ Text="Miss", Value = "Miss" },
                        new SelectListItem{ Text="Ms", Value = "Ms" },
                        new SelectListItem{ Text="Dr", Value = "Dr" }
                     })
                @Html.ValidationMessageFor(model => Model.salutation)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.firstname)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.firstname)
                @Html.ValidationMessageFor(model => model.firstname)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.lastname)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.lastname)
                @Html.ValidationMessageFor(model => model.lastname)
            </div>
            @{Html.Partial("~/Views/Partial/_AutocompleteGroupName.cshtml", this.ViewData);}
            <div class="editor-label">
                @Html.LabelFor(model => model.isactive)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => Model.isactive)
                @Html.ValidationMessageFor(model => Model.isactive)
            </div>
            <div class="editor-label">
                @Html.Label("Is approved")
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => Model.IsApproved)
                @Html.ValidationMessageFor(model => Model.IsApproved)
            </div>
            <div class="editor-label">
                @Html.Label("Maximum concurrent users")
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => Model.MaxConcurrentUsers)
                @Html.ValidationMessageFor(model => Model.MaxConcurrentUsers)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.email)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.email)
                @Html.ValidationMessageFor(model => model.email)
            </div>
            <div class="editor-label">
                @Html.LabelFor(model => model.rowtype)
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.rowtype, new { @readonly = "readonly", @id = "txtNonEditableRowType" })
                - Non editable
            </div>
            <div class="editor-label">
                @Html.Label("Current Module")
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.module_name, new { @readonly = "readonly", @id = "txtNonEditableModule" })
                - Non editable
                @Html.ValidationMessageFor(model => model.module_name)
            </div>
            <br />
            @if (Model.rowtype == "ALF")
            {
                <div id="alfModules">
                    @Html.Label("New module")
                    <br />
                    @{Html.RenderAction("_CreateUserModulesAlf", "UserManager");}
                </div>
            }
            @if (Model.rowtype == "BRAD")
            {
                <div id="bradModules">
                    @Html.Label("New module")
                    <br />
                    @{Html.RenderAction("_CreateUserModulesBrad", "UserManager");}
                </div>
            }
            <div class="editor-label">
                @Html.LabelFor(model => model.group_name)
            </div>
            @* <div class="editor-field">
                @Html.EditorFor(model => model.group_name)
                @Html.ValidationMessageFor(model => model.group_name)
            </div>*@
            <div class="editor-label">
                @Html.Label("Current Group")
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.group_name, new { @readonly = "readonly", @id = "txtNonEditableGroup" })
                - Non editable
                @Html.ValidationMessageFor(model => model.group_name)
            </div>
            @Html.HiddenFor(model => Model.selected_module, new { id = "hdnSelectedModule" })
@*            @Html.HiddenFor(model => Model.selected_moduleAlf, new { id = "hdnSelectedModuleAlf" })
            @Html.HiddenFor(model => Model.selected_moduleBrad, new { id = "hdnSelectedModuleBrad" })*@
            <br />
            <fieldset style="width: 400px; padding-left: 15px;">
                <legend>Group Checker</legend>
                <div id="createuser-groupnamesearch">
                    @{Html.RenderAction("_txtGroupSearchForm", "UserManager");}
                </div>
            </fieldset>
            <p>
                <input type="submit" value="Edit" onclick="newModule()" />
            </p>
            <br />
            @Html.ActionLink("Back to User Manager Dashboard", "Index")
        </fieldset>
    </div>

}
<script type="text/javascript">

    $("#group_name").autocomplete({
        source: function (request, response) {
            $.ajax({
                url: '@Url.Action("LookUpGroupName", "UserManager")',
                dataType: "json",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    value: request.term
                },
                success: function (data) {
                    response($.map(data, function (item) {
                        //                            alert(item.group);
                        return {
                            label: item.group,
                            value: item.group
                        } // end of return

                    })); // end of response

                }, // end of success
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(textStatus);
                } // end of error
            }); // end of ajax
        },
        minLength: 2,
        select: function (event, ui) { // Assign to hidden values to trigger onchange ajax call.

            $.ajax({
                url: '@Url.Action("GroupnameCheck", "UserManager")',
                dataType: "json",
                data: {
                    featureClass: "P",
                    style: "full",
                    maxRows: 12,
                    value: ui.item.label
                },
                success: function (data) {
                    $.each(data, function (index, value) {
                        if (index == "AlfGroup") {
                            $("#txtGroupnameExistsAlf").val(value);
                            if ($("#txtGroupnameExistsAlf").val() == "Alf Group doesn't exist.") {
                                $("#txtGroupnameExistsAlf").css("background-color", "red");
                            }
                            else {
                                $('#txtGroupnameExistsAlf').css("background-color", "#33ff00");
                            }
                        }

                        if (index == "BradGroup") {
                            $("#txtGroupnameExistsBrad").val(value);
                            if ($("#txtGroupnameExistsBrad").val() == "Brad Group doesn't exist.") {
                                $("#txtGroupnameExistsBrad").css("background-color", "red");
                            }
                            else {
                                $('#txtGroupnameExistsBrad').css("background-color", "#33ff00");
                            }
                        }
                    });
                }, // end of success
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(textStatus);
                } // end of error
            }); // end of ajax

            $('#hdnGroupAlf').val(ui.item.label);
            $('#hdnGroupBrad').val(ui.item.label);
        },
        open: function () {
            $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
        },
        close: function () {
            $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
        }
    });

    function chkSelection() {
        var rowType = $("#txtNonEditableRowType").val();
        if (rowType == "ALF") {

            var selectedVal = $("#ddlSelectedAlf option:selected").val();
            $('#hdnSelectedModule').val(selectedVal);
        }
        else {

            var selectedVal = $("#ddlSelectedBrad option:selected").val();
            $('#hdnSelectedModule').text(selectedVal);
            alert(selectedVal);
        }
    }

    $(document).ready(function () {
        // Non editable fields grey
        $("#txtNonEditableGroup").css("background-color", "gray");
        $("#txtNonEditableModule").css("background-color", "gray");
        $("#txtNonEditableRowType").css("background-color", "gray");

        // Show/Hide group check part based on IF ALF or BRAD
        var rowType = $("#txtNonEditableRowType").val();

        if (rowType == "ALF") {
            $("#groupname-checker-alf").show();
            $("#groupname-checker-brad").hide();

            var selectedVal = $("txtNonEditableRowType").val();
            $('#hdnModuleAlf').val(selectedVal);

        }
        else {
            $("#groupname-checker-alf").hide();
            $("#groupname-checker-brad").show();

            var selectedVal = $("txtNonEditableRowType").val();
            $('#hdnModuleBrad').val(selectedVal);
        }

    });

    function newModule() { // Assign new selected module from dropdown to hidden form
        // so it can be used in model as selected_module
        if ($("#txtNonEditableRowType").val() == "ALF") {
            var val = $("#module_name :selected").val();
            $("#hdnSelectedModule").val(val);
        }
        else {
            var val = $("#module_name :selected").val();
            $("#hdnSelectedModule").val(val);
        }
    }  
</script> 
```

**控制器**

```
[HttpPost]
public ActionResult EditUser(vw_UserManager_Model model)
{
    List<UserManager.Models.vw_UserManager_Model> modellist = new List<vw_UserManager_Model>();
    int outcome = 0;
    if (ModelState.IsValid)
    {
        outcome = UserManager.DAL.EditUser(model);
        modellist.Add(model);
    }

    if (outcome == 1)
    {

        if (modellist.FirstOrDefault().rowtype == "Alf")
        {

        }
        else
        {

        }

        return RedirectToAction("showSuccessUser", new
        {
            CrudType = "Edit",
            UserName = modellist.FirstOrDefault().UserName,
            Password = modellist.FirstOrDefault().password,
            FirstName = modellist.FirstOrDefault().firstname,
            LastName = modellist.FirstOrDefault().lastname,
            Email = modellist.FirstOrDefault().email,
            GroupName = modellist.FirstOrDefault().group_name,
            IsActive = modellist.FirstOrDefault().isactive,
            selected_module = modellist.FirstOrDefault().module_name
        });
    }

    else
    {
        ViewBag.Message = "Failure";
        return RedirectToAction("showError", model);
    }
} 
```

**概括**

在下拉菜单中选择项目时，该值将分配给 HiddenFor 字段。这可以通过使用 firebug 我可以看到值。

问题是当我提交表单时，我的 C# 代码中的 model.SelectedModule 属性有一个空值。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:42:18.440

我不知道这是否是问题，但在您的一种情况下，您正在做：

```
$('#hdnSelectedModule').text(selectedVal); 
```

应该是：

```
$('#hdnSelectedModule').val(selectedVal); 
```

此外，由于您已经在使用 FireBug，请检查`Net`选项卡中的 AJAX 请求。您将看到发送到服务器的所有键/值对，并且能够更轻松地识别问题。例如`SelectedModule=some_value`请求中有一个？如果是这样，假设您的模型有一个名为的属性`SelectedModule`并且是简单类型（例如字符串），您将能够获得它的值。

# php - 如何仅重新加载验证码图像而不是整个页面

> ID：14101420
> 
> 赞同：1
> 
> 时间：2012-12-31T12:09:36.747
> 
> 标签：php, javascript

我需要一些帮助，因为我无法在我的表单中重新加载验证码图像，如果图像上的书写不是很清晰或易于阅读，有时会发生这种情况。

我在互联网上和周围阅读了很多关于此的内容，但我的问题与大多数人似乎必须面对的问题不同。事实上，我在一个名为 - captcha.php - 的页面中创建验证码图像，然后在另一个名为 -contacts.php 的页面中 - 我为图像创建文字和一个随意的唯一字符串，我将其传递给 captcha.php 文件，如我不想使用会话或 cookie，而是使用带有名为 - 验证的表的数据库。用 PHP 翻译所有这些，captcha.php 有这个代码来检索字符串：

```
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

try
    {
        $stmt = $pdo->prepare("SELECT * FROM validation WHERE url_key = ? AND expire_date > NOW()");

        $stmt->execute(array($_GET['token']));

        $row = $stmt->fetch(PDO::FETCH_ASSOC);          
    }
catch(PDOException $e)
    {
        echo "Error!: " . $e->getMessage() . "<br />";
        die(); 
    }       
etc..... 
```

然后我的contacts.php有这个：

```
 $url_key = sha1(uniqid(rand(), true)); 

    $captcha = random_string(4);

    try
        {
            $stmt = $pdo->prepare("INSERT INTO validation (id_validation, url_key, captcha, expire_date) VALUES ('', ?, ?, DATE_ADD(NOW(), INTERVAL 5 MINUTE))");

            $stmt->execute(array($url_key, $captcha));
        }
    catch(PDOException $e)
        {
            echo "Error!: " . $e->getMessage() . "<br />";
            die(); 
        } 
```

当然，现在我只需要刷新我的图像，而不是整个contacts.php 页面。我知道你可以用 Ajax 做到这一点，但我对此一无所知。

我的 contacts.php 有标签 img 向读者展示验证码：

```
 <img src="captcha.php?token=<?php echo $url_key; ?>" alt="" /> 
```

我试图以这种方式改变它：

```
 <img src="captcha.php?token=<?php echo $url_key; ?>" id="captcha" />
  <a href="#" onClick="return changeCaptcha('captcha')">Reload the image</a> 
```

然后在我的 head 部分，我放了这个 Javascript 代码：

```
 function changeCaptcha()
{
    document.getElementById('captcha').src = 'captcha.php' +
     Math.floor(Math.random()*100);
} 
```

但它根本不起作用。如果我点击链接，验证码会完全消失。

然后我试图改变这个：

```
 <img src="captcha.php?token=<?php echo $url_key; ?>" id="captcha" />
   <a href="#" onClick="return reloadImg('captcha');">Reload the image</a> 
```

然后使用一个新的 Javascript 文件，即：

```
 function reloadImg(id) {
   var obj = document.getElementById(id);
   var src = obj.src;
   var pos = src.indexOf('?');
   if (pos >= 0) {
   src = src.substr(0, pos);
  }  
  var date = new Date();
  obj.src = src + '?v=' + date.getTime();
  return false;
} 
```

但即使这样也行不通。问题出在 - php echo $url_key; - 因为我不知道如何对待这个。例如，我不能这样做：

```
 function changeCaptcha()
   {
    document.getElementById('captcha').src = 'captcha.php?token=<?php echo $url_key; ?>' +
    Math.floor(Math.random()*100);
} 
```

因为它又错了。

你有什么想法吗？先感谢您。再见。

# android - ViewPager 和 Fragment Activity 中的 FragmentList

> ID：14101421
> 
> 赞同：0
> 
> 时间：2012-12-31T12:09:47.880
> 
> 标签：android

这是我的第一个问题，所以我会尽量精确。我正在尝试使用 Fragment Activity、Fragment List 和 View Pager 创建一个应用程序。当活动默认加载时，片段列表应显示在左侧，视图分页器显示在右侧（详细视图）。当我单击片段列表按钮之一时，我想在详细视图（右侧）中加载 web 视图。

我已经使用片段列表实现了片段活动。现在如何将 View Pager 添加到此，以便在应用程序加载时显示..

```
 public class MainActivity extends FragmentActivity implements McDonaldsListener {

  @Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

McDonaldsFragment countries
  =(McDonaldsFragment)getSupportFragmentManager()
                        .findFragmentById(R.id.countries);

countries.setCountryListener(this);

Fragment f=getSupportFragmentManager().findFragmentById(R.id.details);

  countries.enablePersistentSelection();

  }

 @Override
  public void onCountrySelected(McDonalds c) {
String url=getString(c.url);

  ((DetailsFragment)getSupportFragmentManager()
                        .findFragmentById(R.id.details))
                        .loadUrl(url);                            

  }
 } 
```

还有其他支持课程，如果需要我会发布。

希望有人可以建议我一些解决方案。

编辑：这是我试图实现的，但没有工作....给出实例化异常:(

```
public class ViewPagerExample extends android.support.v4.app.FragmentActivity        implements McDonaldsListener {
private MyAdapter mAdapter;
private ViewPager mPager;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mAdapter = new MyAdapter(getSupportFragmentManager());

    mPager = (ViewPager) findViewById(R.id.pager);
    mPager.setAdapter(mAdapter);

    McDonaldsFragment mc
    =(McDonaldsFragment)getSupportFragmentManager()
                          .findFragmentById(R.id.countries);

  mc.setCountryListener(this);

  Fragment f=getSupportFragmentManager().findFragmentById(R.id.details);

    mc.enablePersistentSelection();
}

public void onCountrySelected(McDonalds c) {
  String url=getString(c.url);

    ((DetailsFragment)getSupportFragmentManager()
                          .findFragmentById(R.id.details))
                          .loadUrl(url);                            

}

public static class MyAdapter extends FragmentPagerAdapter {
    public MyAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public int getCount() {
        return 3;
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return new DetailFragment();
        case 1:
            return new ImageFragment(R.drawable.ic_launcher);
        case 2:
            return new ImageFragment(R.drawable.ic_launcher);

        default:
            return null;
        }
    }
  }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:20:28.370

让我们试试这个彼得库特纳视图寻呼机 [http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html](http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html)

# sql - 使用 Access 2007 中的条件从查询中删除重复项

> ID：14101422
> 
> 赞同：2
> 
> 时间：2012-12-31T12:10:01.703
> 
> 标签：sql, ms-access, duplicates, ms-access-2007

我有一个交易表，其中包含我正在查询的 880,095 条记录。

查询表时我希望隐藏/删除表中有重复的事务 ID。

例如 1。

*   事务 ID 001 有两条记录
*   除利率外，两行中的数据相同。
*   第 1 行的利率为 5%
*   第 2 行有利率，没有利率，单元格中的值为 0

我希望删除所有没有利率的重复交易 ID。这很简单，复杂之处如下。

例如 2。

*   事务 ID 002 有 4 条记录
*   所有 4 行中的数据都是相同的
*   所有行的利率都是0，即没有利率。
*   我希望查询返回这些行中的任何 1 行，并删除其他 3 行。

总之，我需要帮助设计一个 MS Access 查询，其中重复的事务 ID 被删除，其中：

*   交易 ID 有多行，删除利率值为 0 的行
*   交易 ID 有多行，所有利率值都为 0。删除所有重复项，只留下一行。

如果需要更多解释，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:12:27.407

怎么样：

```
SELECT TransactionID, Field1, Fieldn, Max(InterestRate)
FROM TableName
GROUP BY TransactionID, Field1, Fieldn 
```

# url - 如何将没有任何 slug 的旧 URL 重定向到有 slug 的新 URL

> ID：14101423
> 
> 赞同：1
> 
> 时间：2012-12-31T12:10:10.190
> 
> 标签：url, mod-rewrite, redirect, rewrite

朋友们，这对我来说是一个复杂的问题。我对此进行了多次研究，最后找到了您（希望我能得到解决方案）。我们的产品 URL 如下：

```
/product_info.php/products_id/75

```

根据 SEO，我想要关键字丰富的 URL，所以我们在 products.php 文件中添加了一个 slug 并将 URL 修改为：

```
/product_info.php/products_id/75/product-title

```

但它也不是一个理想的 URL。我想要这个：

```
domainname.com/products/product-title/75

```

我在 .htaccess 文件中所做的更改如下 -

```
RewriteRule ^products/([A-Za-z0-9-]+)/([0-9]{2})/?$ product_info.php?products_id=$2=$1 [L]
RedirectMatch 301 ^/product_info.php/products_id/([0-9]{2})/([A-Za-z0-9-]+)$ http://www.livevaastu.com/products/$2/$1 
```

现在的问题是——我们的旧 URL（没有 slug）被 Google 索引了。而且我不知道如何将那些旧的重定向到新的。还有很多产品页面，所以我无法一一重定向。你们真是天才。你能帮我怎么做。（没有嘲笑我）。M 不是开发人员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:23:24.083

您无法从 /product_info.php/products_id/75 的旧 URL 生成 product_info.php?products_id=$2=$1，因为它们没有产品标题（“slug”）。

一方面 product_info.php?products_id=$2=$1 没有任何意义。那是错字吗？该查询字符串中的键/值对是什么？这应该看起来像 products_id=$1&product_title=$2 其中从 mod_rewrite 匹配中派生的每个“值”都被分配给一个已知的“键”，您可以在 $_GET 或 $_REQUEST 中使用它来查找值。

**根据讨论，编辑以帮助您解决我认为您在此处尝试实现的目标：**

如果您希望旧 URL 指向新的“漂亮” URL，则需要使用 PHP 来执行此操作。如前所述，URL 中根本没有足够的信息来发明产品名称。但是您可以很容易地在每个页面的顶部（即在头文件中）放置一些东西来查看“标题” $_GET 参数是否存在（一旦您清理了双等号并将其替换为正确的键/值对）。这可能看起来像：

```
<?php
if( !isset( $_GET['product_title'] ) ) {

   // Code here to look up $product_title from the $product_id, presumably in a DB

   header("HTTP/1.1 301 Moved Permanently");
   header("Location: /products/$product_title/$product_id");
   exit();
} 
```

# html - 再次html表格布局

> ID：14101427
> 
> 赞同：1
> 
> 时间：2012-12-31T12:10:34.353
> 
> 标签：html, html-table

这次我尝试画一个这样的表格：

```
+-----+-----+-----+-----+
|     |           |     |
|     |           |     |
+-----+           +-----+
|     |           |     |
|     |           |     |
+-----+-----+-----+-----+
|           |     |     |
|           |     |     |
+           +-----+-----+
|           |     |     |
|           |     |     |
+-----+-----+-----+-----+ 
```

我这样写了我的html代码来实现我的目标：

```
<table id="table">
    <tbody>
        <tr>
            <td>&nbsp;</td>
            <td colspan="2" rowspan="2">&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td colspan="2" rowspan="2">&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table> 
```

[样式表的上一个问题](https://stackoverflow.com/questions/14099223/html-table-display)如下：

```
td {
width: 20px;
height: 20px;
border: solid 1px #000;
}
tr {
height: 1.3em;
} 
```

但这一次，却是这样显示的：</p>

```
+-----+-----+-----+
|     |     |     |
|     |     |     |
+-----+     +-----+
|     |     |     |
|     |     |     |
+-----+-----+-----+
|     |     |     |
|     |     |     |
+     +-----+-----+
|     |     |     |
|     |     |     |
+-----+-----+-----+ 
```

我现在能做什么？任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:23:27.707

您将需要使用[`colgroup`](http://www.w3.org/wiki/HTML/Elements/colgroup)and[`col`](http://www.w3.org/wiki/HTML/Elements/col)标记来定义列的宽度，而不是`td`直接定义 s ..

```
td {
    height: 20px;
    border: solid 1px #000;
}
tr {
    height: 1.3em;
} 
```

和

```
<table id="table">
    <colgroup>
        <col style="width: 22px;"/>
        <col style="width: 22px;"/>
        <col style="width: 22px;"/>
        <col style="width: 22px;"/>
    </colgroup>
    <tbody>
        <tr>
            <td>&nbsp;</td>
            <td colspan="2" rowspan="2">&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td colspan="2" rowspan="2">&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
    </tbody>
</table> 
```

**演示在** [http://jsfiddle.net/gaby/wvGNn/1/](http://jsfiddle.net/gaby/wvGNn/1/)

# php - 用于 excel 值导入并显示逐行更新的 PHP 导入脚本

> ID：14101429
> 
> 赞同：-2
> 
> 时间：2012-12-31T12:10:42.213
> 
> 标签：php, import

我只想导入一个 excel 文件来填充我网站中的产品部分（就像在 magento 中通过 excel 导入产品一样）。我能够上传 excel 文件并逐行读取数据并将验证值插入到我的数据库中。但问题是我只想逐行显示验证错误或成功消息（插入时）。如何实现这一点。（当我们导入数据时，您可能已经在 magento 中看到，它会逐行显示更新，即浏览器上的错误和成功消息）。但是我的代码不在magento中。我正在 Codeigniter 中开发它。它只是一个定制的网站。

所以请告诉我如何在读取和更新/插入数据库中的值期间在浏览器上显示每一行更新（错误/成功消息）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:14:16.583

只需[`flush()`](http://php.net/flush)在向客户端发送数据后调用。这会导致 PHP 清除其输出缓冲区并将其发送到 web 服务器，然后将其发送到客户端。

# php - 在php中转换时间戳

> ID：14101431
> 
> 赞同：0
> 
> 时间：2012-12-31T12:10:51.170
> 
> 标签：php

我从 twitter api 获得了这种格式的时间戳。

```
Fri Dec 28 20:06:38 +0000 2012 
```

我想将其转换为像这样的标准时间戳格式。

```
2012-12-10 16:20:18 
```

我对 php 中的日期很陌生。我该怎么做？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T12:16:14.890

您可以使用[`DateTime`](http://php.net/manual/en/book.datetime.php)：

```
$date = new DateTime('Fri Dec 28 20:06:38 +0000 2012');
echo $date->format('Y-m-d H:i:s'); 
```

我更喜欢它的原因`DateTime`是它提供了出色的 oop 实现，并且可以更轻松地处理让程序员非常头疼的日期。有关此类的更多信息，请阅读我已经参考过的手册。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:15:55.010

您可以使用[`strtotime`](http://php.net/strtotime)将初始字符串转换为 UNIX 时间戳，然后[`strftime`](http://php.net/strftime)将其转换回字符串：

```
strftime('%Y-%m-%d %H:%M:%S', strtotime('Fri Dec 28 20:06:38 +0000 2012')); 
```

该调用返回字符串*2012-12-28 21:06:38* - 即正是您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:16:08.253

如果使用**php < 5.2.0**（某些共享主机），请结合使用[strtotime](http://php.net/manual/en/function.strtotime.php)和[date](http://php.net/manual/en/function.date.php)

```
date('Y-m-d H:i:s', strtotime('Fri Dec 28 20:06:38 +0000 2012')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T12:16:39.627

用这个

```
 $originalDate = "Fri Dec 28 20:06:38 +0000 2012";
 echo $newDate = date("Y-m-d h:i:s", strtotime($originalDate)); 
```

工作示例[http://codepad.viper-7.com/AhLcEU](http://codepad.viper-7.com/AhLcEU)

# c++ - 如何将程序设为默认程序以在 Visual Studio C++ 中打开特定文件

> ID：14101438
> 
> 赞同：1
> 
> 时间：2012-12-31T12:11:11.543
> 
> 标签：c++, c, visual-studio-2010, visual-studio, visual-c++

实际上，我不知道我的问题的标题是什么，所以我无法在谷歌上搜索，首先我需要知道对这个问题说什么。

好吧，我在 Visual Studio C++ 2010 中开发了一个应用程序，其中可以处理 3D 对象，所以有一个名为 Import Model 的函数可以帮助导入模型。

我想要的是，用户只需右键单击对象并使用 [应用程序名称] 按打开或双击它，应用程序应该获取该文件的路径并调用导入函数。就像我们对任何 MS word *.doc 文件所做的一样，我们双击它并打开它。

我希望同样的事情使我的软件作为默认程序来打开某些特定的文件扩展名。当用户双击模型时，它应该在我的应用程序中打开。

实际上，我读过一些关于参数解析器的东西，我对此知之甚少。这是我需要寻找的吗？

谢谢。

**更新1：**

它正在工作 Benjamin Lindley 和其他人，但在启动应用程序之前我收到以下错误。该参数仅通过 FLTK 窗口。我不知道这个窗口是从哪里来的？甚至没有关于这些图像选项.. 请看下面的图片......

![在此处输入图像描述](../Images/dbab2f330e6c326ad0a781b213543d91.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:21:03.340

您需要文件关联，例如在`.bat`文件中：

```
@ASSOC .3D=3DObject.File
@FTYPE 3DObject.File="C:\MyProjects\Release\myprog.exe" "%%1" %%* 
```

这使用注册表配置单元`HKEY_CLASSES_ROOT`，您可能需要对其进行写访问，因此“以管理员身份运行”。

编辑：作为程序员，您可以使用注册表 API（`RegCreateKeyEx`、 `RegSetValueEx`等）将关联添加到`HKEY_CLASSES_ROOT`自己，但可能不值得付出努力，因为它可能只需要一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T12:25:59.227

正如评论和答案中提到的，“文件关联”是题外话（在我看来），并且可能属于[Super User](https://superuser.com/)。但是作为程序员，你需要做什么？好吧，当有人双击与您的程序关联的文件时，文件名作为您的 main 函数的参数出现，您可以随意处理它：

```
int main(int argc, char** argv)
{
    // the name file that was used to open your program is stored in argv[1]
    if (argc == 2)
        DoSomethingWithFile(argv[1])
} 
```

# java - 隐藏信息窗口 android map api v2

> ID：14101439
> 
> 赞同：12
> 
> 时间：2012-12-31T12:11:23.260
> 
> 标签：java, android, google-maps-api-2

我试图关闭 android 地图中的默认信息窗口。我用过`.hideInfoWindow()`，但没有任何附加内容。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2016-03-16T08:58:07.340

更改退货声明

```
 @Override
public boolean onMarkerClick(Marker marker) {
return false;
}

      (to)

 @Override
public boolean onMarkerClick(Marker marker) {
return true;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-06-24T15:53:47.463

利用

```
 mapa.setOnInfoWindowClickListener(new GoogleMap.OnInfoWindowClickListener() {

            @Override
            public void onInfoWindowClick(Marker marker) {

                marker.hideInfoWindow();
            }
        }); 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-20T11:01:05.743

我假设您想在第二次单击标记时关闭信息窗口。看来您需要跟踪最后点击的标记。我无法通过简单地检查当前是否显示单击的标记然后关闭它来使其工作，但这很好用。

```
private Marker lastClicked;

private class MyMarkerClickListener implements OnMarkerClickListener {

    @Override
    public boolean onMarkerClick(Marker marker) {
        if (lastClicked != null && lastClicked.equals(marker)) {
            lastClicked = null;
            marker.hideInfoWindow();
            return true;
        } else {
            lastClicked = marker;
            return false;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-30T10:12:37.903

将 pin 标题和片段设置为 null，将导致不显示任何信息窗口。这将涵盖选择和单击引脚时的两种情况。

# mysql - 在 MYSQL 中使用自定义值修改日期

> ID：14101443
> 
> 赞同：1
> 
> 时间：2012-12-31T12:11:36.113
> 
> 标签：mysql, datetime, select, timestamp

我在 MYSQL 表中有 2 个日期时间。我需要使用部分日期来获取新的日期时间。

示例：日期 1 `2012-10-23 10:44:21`：，日期 2：`2011-06-02 05:40:10`

我需要日期 3：`2012-10-02 05:40:10`像这样。

从日期 1 开始的年和月，从日期 2 开始。如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:18:10.157

试试这个：

```
SELECT CONCAT(DATE_FORMAT('2012-10-23 10:44:21', '%Y-%m-'), DATE_FORMAT('2011-06-02 05:40:10', '%d %H:%i:%s')) test; 
```

输出是：

```
test
------------------
2012-10-02 05:40:10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:17:10.807

使用您需要的值构建一个字符串：

```
Select concat(Year(date 1),
Month(date 1),
+ right(date 2, 11) ) as stringDate
; 
```

然后使用`makedate`, `str_to_date`,`date_format`函数。

```
Select str_to_date(stringDate, '%Y-%m-%d %h:%i:%s'); 
```

PS：在手机上无法输入完整的工作代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:17:21.917

让一年做到这一点

```
 YEAR(date1) 
```

和月份

```
 MONTH(date1) 
```

从 date2 得到其余的

```
 SUBSTRING('date2', 8 , 11) 
```

# zend-framework2 - Zend Framework 2 - 最快的缓存适配器？

> ID：14101447
> 
> 赞同：0
> 
> 时间：2012-12-31T12:11:51.977
> 
> 标签：zend-framework2, zend-cache

我的网站将严重依赖缓存，所以我应该使用哪个 Chache 适配器？文件系统肯定是最慢的，但哪些是最快的？我可以控制我的 php 扩展，所以除了 Zend Server 之外，我可能可以让它们全部工作。所有这些适配器是否有任何基准？

```
Apc Adapter,
Dba Adapter,
Memcached Adapter,
Memory Adapter,
WinCache Adapter 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T13:12:30.303

建议您阅读这些缓存的实际作用。

*   [Apc](http://php.net/manual/de/book.apc.php)、[Memcached](http://php.net/manual/de/book.memcached.php)和 Memory 几乎都是基于内存的缓存系统。
*   据我了解，[DBA就像文件系统上的数据库](http://php.net/manual/en/book.dba.php)
*   [WinCache](http://php.net/manual/en/book.wincache.php)是一个全面优化的解决方案，你猜对了，Windows。

缓存都有其优点和缺点。根据我的个人经验，APC 可能总是超过 memcached。所以我的投票将投向 APC

虽然这是一篇旧文章，但我仍然觉得它读起来很不错：[PHP 性能系列：Cachin 技术](http://blog.digitalstruct.com/2008/02/27/php-performance-series-caching-techniques/)

就您的基准测试问题而言：自己做！虽然全球意见可能会帮助您选择最终产品，但实际上并不需要太多时间来查看哪个最快。它们被称为适配器是有原因的，对于 ZF2，您通常需要做的就是更改适配器，一切仍然有效；）

# android - ListView 奇怪的行为

> ID：14101456
> 
> 赞同：0
> 
> 时间：2012-12-31T12:12:26.770
> 
> 标签：android, listview

我面临一个问题，即使第一次在 listview 中设置适配器，我的**getView()**也会开始回收，我第一次看到 5 个项目，并且由于要求我必须将 listview 高度设置为常数值（即使我尝试更改为**fill_parent**但没有效果）我已经搜索并发现这与我的问题[链接](https://stackoverflow.com/q/2618272/1381622)相同！我已经仔细阅读并知道这种问题是因为列表视图高度不应该设置为 wrap_content 我什至尝试过但仍然没有效果我的**日志猫**说

```
I/System.out(17411): getview 0 null
I/System.out(17411): getview 1 android.widget.RelativeLayout@40574ce0
I/System.out(17411): getview 2 android.widget.RelativeLayout@40574ce0
I/System.out(17411): getview 3 android.widget.RelativeLayout@40574ce0
I/System.out(17411): getview 4 android.widget.RelativeLayout@40574ce0
I/System.out(17411): getview 5 android.widget.RelativeLayout@40574ce0
I/System.out(17411): getview 0 android.widget.RelativeLayout@40574ce0
I/System.out(17411): getview 1 null
I/System.out(17411): getview 2 null
I/System.out(17411): getview 3 null
I/System.out(17411): getview 4 null 
```

第一次设置适配器时，（我什至没有滚动它，但它仍然回收不知道为什么）这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/newDramaLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/background" >

 <RelativeLayout
    android:id="@+id/header" 
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:visibility="gone"
    android:background="@drawable/header">

    <Button 
        android:id="@+id/refreshBt"
        android:layout_width="55dp"
        android:layout_height="50dp"
        android:onClick="refresh"
        android:layout_alignParentRight="true"
        android:background="@drawable/refresh"/>
    </RelativeLayout>

   <LinearLayout
       android:id="@+id/info"
       android:layout_width="match_parent"
       android:layout_height="30dp"
       android:visibility="gone"
       android:gravity="center_horizontal"
       android:layout_below="@+id/header"
       android:background="@drawable/information"
       android:paddingLeft="10dp" >

       <TextView
           android:id="@+id/label"
           android:layout_width="wrap_content"
           android:layout_marginBottom="5dp"
           android:layout_height="wrap_content"
           android:text="@string/label"
           android:textColor="@android:color/secondary_text_dark" />
   </LinearLayout>

<ListView 
    android:id="@+id/newDramasList"
    android:layout_below="@+id/info"
    android:cacheColorHint="#00000000"
    android:layout_width="match_parent"
    android:layout_centerInParent="true"
    android:dividerHeight="5dp"
    android:divider="@android:color/transparent"
    android:layout_height="320dp"
    android:visibility="gone">

</ListView>

<ProgressBar
    android:id="@+id/progressBar1"
    style="?android:attr/progressBarStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="gone"
    android:layout_centerInParent="true" />

    <LinearLayout
    android:id="@+id/footer" 
    android:layout_below="@+id/newDramasList"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:visibility="gone"
    android:background="@drawable/footer"/>

   </RelativeLayout> 
```

listview 我尝试将其高度设为 fill_parent 但问题仍未解决。这是我的代码

```
 $@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    System.out.println("getview "+position+" "+convertView);
    View row=convertView;

    if(row==null)
    {
        LayoutInflater inflater=((Activity)context).getLayoutInflater();
        row=inflater.inflate(layoutResourceId, parent,false);

        holder=new NewDramas();
        holder.ivIcon=(ImageView)row.findViewById(R.id.dramaIcon);
        holder.tvDramaName=(TextView)row.findViewById(R.id.dramaTitle);
        holder.tvDate=(TextView)row.findViewById(R.id.date);

        row.setTag(holder);
    }
    else
    {
        holder=(NewDramas)row.getTag();
    }

    holder.ivIcon.setImageResource(R.drawable.new_drama_icon);
    holder.tvDramaName.setText(dramaList.get(position).getDramaName());
    holder.tvDate.setText(dramaList.get(position).getDate());

    return row;
} 
```

这是膨胀的布局

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="280dp"
    android:layout_height="70dp"
    android:orientation="vertical"
    android:background="@drawable/new_dramas_list_back" >

    <ImageView 
        android:id="@+id/dramaIcon"
        android:layout_width="50dp"
        android:layout_height="45dp"
        android:src="@drawable/favorite_icon"/>
      <Button 
        android:id="@+id/fav"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/dramaIcon"
        android:visibility="gone"
        android:focusable="false"
        android:layout_alignRight="@+id/dramaIcon"
        android:background="@drawable/heart"
        /> 

    <TextView
        android:id="@+id/dramaTitle"
        android:layout_toRightOf="@+id/dramaIcon"
        android:layout_alignTop="@+id/dramaIcon"
        android:layout_width="wrap_content"
        android:width="150dp"
        android:paddingTop="5dp"
        android:textColor="@android:color/white"
        android:ellipsize="end"
        android:layout_marginLeft="32dp"
        android:layout_height="wrap_content"
        android:text="title"
        android:textStyle="bold" />
  <LinearLayout
        android:id="@+id/updateDate" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_below="@+id/dramaIcon"
        android:layout_alignParentRight="true"
        android:layout_marginTop="2dp" >  
    <TextView 
        android:id="@+id/updated"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="updated:"
        android:textColor="#ffff00"
        android:layout_alignBottom="@+id/dramaIcon"/>

    <TextView
        android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#ffff00"
        android:layout_marginLeft="1dp"
        android:text="12/08/2102" />
</LinearLayout>    

</RelativeLayout> 
```

**我还在我的列表视图中添加了一个按钮作为页脚视图？我希望这不是这种奇怪行为的原因和一些奇怪的事情我注意到在 logcat 中 getview 1 的相对 id 重复了 5 次，这意味着我的列表视图中的位置 1 有问题**

任何人都可以帮助我理解这种奇怪的行为，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:16:18.813

android:layout_weight="1" 尝试将其设置为 ListView 以及您希望它显示的内容。（对不起英语：P）

# asp.net-mvc-3 - 在 .csv 文件 + mvc3 中导出中文、日文字符

> ID：14101464
> 
> 赞同：1
> 
> 时间：2012-12-31T12:13:25.037
> 
> 标签：asp.net-mvc-3, export-to-csv, chinese-locale

我正在使用以下代码将内容导出到也支持中文和日文字符的 .cvs 文件。

```
public ActionResult Download(strng accnumber)
{
     string csvContent = "东西，东西，东西, hi";
     var data = Encoding.UTF32.GetBytes(csvContent );
     string filename = "CSV_" + accnumber + ".csv";
     return File(data, "text/csv", filename);
} 
```

当我导出我的文件时，我没有得到正确的中文或日文字符。缺什么？

我已经使用 UTF32 编码来支持它。

**编辑**：

我注意到在记事本中打开我的 .csv 文件会显示完美的字符，但 ms-excel 不会。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-28T13:03:22.363

我也遇到了同样的问题，用 UTF-8-BOM 解决。

`Encoding.UTF8.GetPreamble().Concat(Encoding.UTF8.GetBytes(stringData)).ToArray()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T10:35:11.553

当您在 asp.net 上提供该文件时，您还必须处理 http 管道的编码。之前没发现，抱歉。

你应该使用派生的 ActionResult 之一，而不是使用普通的 ActionResult，而是使用[FileContentResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.filecontentresult%28v=vs.108%29.aspx)。请注意我正在构建的特殊 ContentType 以告诉浏览器一个 UTF-32 文件即将到来......

```
public ActionResult Download(string accnumber)
{
        string csvContent = "东西，东西，东西, hi";
        var data = Encoding.UTF8.GetBytes(csvContent);
        // add byte order mark
        var bom = new byte[] { 0xEF, 0xBB, 0xBF };
        // hold it all
        var all = new byte[bom.Length + data.Length];
        // copy over BOM
        Array.Copy(bom, all, bom.Length);
        // copy over data
        Array.Copy(data, 0, all, bom.Length, data.Length);

        string filename = "CSV_" + accnumber + ".csv";
        var file = new FileContentResult( all, "text/csv" )
        {
            FileDownloadName = filename
        };

        return file;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T13:03:04.557

我也遇到了这个问题。我通过在“返回文件;”之前添加以下行来修复它 它对我有用。

```
Response.Write("<meta http-equiv=Content-Type content=text/html;charset=utf-8>");
return file; 
```

# singleton - 如何在取消部署时从 EJB 容器中删除 Singleton bean 的计时器？

> ID：14101465
> 
> 赞同：0
> 
> 时间：2012-12-31T12:13:30.187
> 
> 标签：singleton, ejb, glassfish-3, timertask

我有以下@Singleton bean，用于执行一些计划任务：

```
@Singleton
@Startup
public class SqsScheduler {

    // Logger-------------------------------------------------------------------
    private static final Logger LOG = Logger.getLogger(SqsScheduler.class.getName());

    // Variables----------------------------------------------------------------
    Timer timer;
    StoredDynamoQueries storedDynamoQueries = new StoredDynamoQueries();

    // Constructors-------------------------------------------------------------
    public SqsScheduler() {
        timer = new Timer();
        timer.scheduleAtFixedRate(new ScheduledTask(), 0, 180 * 1000);
    }

    // Methods------------------------------------------------------------------
    class ScheduledTask extends TimerTask {

        @Override
        public void run() {

           // The scheduled tasks to perform

        }
    }
} 
```

一切正常，除了当我取消部署/重新部署应用程序时，TimerTasks 没有被删除，然后重新部署的应用程序开始产生错误。如果我取消部署应用程序，请重新启动服务器（Glassfish 3.1.2.2），然后从头开始部署应用程序，它可以完美运行。

重新部署应用程序时，我将如何删除计时器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T07:43:57.773

根据*perissf*评论：

> 对于 EJB，建议使用 Java EE [Timer Service](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

# jquery - 如何避免 JQueryUI 中的按钮单击和悬停突出显示

> ID：14101466
> 
> 赞同：0
> 
> 时间：2012-12-31T12:13:46.087
> 
> 标签：jquery, jquery-ui, click, jquery-ui-dialog, highlight

我遇到了以下问题：我为每一行创建了一个选项对话框，其中包含一些文本和一个按钮，该按钮通过对服务器的 get 请求在 ON 和 OFF 之间更改状态。

每当我将鼠标悬停在按钮上时，它会以其“悬停”状态突出显示，当我单击它时，它会变为“单击”状态，然后我松开鼠标，它又恢复正常。这正是我所期望的，因为这是正常行为。

但是我想要做的，这让我发疯，因为我在任何地方都找不到它，按钮不会响应我的鼠标悬停和点击，我可以激活或停用“点击”状态与服务器响应。我将如何做到这一点？

我有以下代码来初始化对话框和按钮：

```
<script>
    $(document).ready(function() {
        $("#dlg1").dialog();
        $(".settings_buttons").button();
    });
</script> 
```

以及对话框和按钮的 HTML 设置：

```
 <div id="dlg1" title="Global device settings" class="dialog_window">

        <table>
            <form>
                <tr>
                    <td><h2>Setting</h2></td>
                    <td><button id="btn2" class="settings_buttons">OFF</button></td>
                </tr>
            </form>
        </table>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:44:38.443

您是否尝试禁用按钮？这是最快的，但也许不是最好的解决方案：

```
<td><button id="btn2" class="settings_buttons" disabled="disabled">OFF</button></td> 
```

您应该对跨浏览器结果使用*disabled="disabled"*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:36:43.280

您可以为所有按钮定义样式，如下所示：

```
.dupe{
-webkit-border-radius: 2px;
-moz-border-radius: 2px;
border-radius: 2px;
background-image: -webkit-gradient(
    linear,
    left bottom,
    left top,
    color-stop(0.16, rgb(207,207,207)),
    color-stop(0.79, rgb(252,252,252))
);
     background-image: -moz-linear-gradient(
    center bottom,
    rgb(207,207,207) 16%,
    rgb(252,252,252) 79%
);
padding:0px;
border:1px solid #6e6b6b;} 
```

​查看[演示](http://jsfiddle.net/Mg2zb/1/)

# objective-c - 归一化顶点和法线坐标 Open GL ES 2.0

> ID：14101480
> 
> 赞同：0
> 
> 时间：2012-12-31T12:15:16.583
> 
> 标签：objective-c, ios, opengl-es

我在搅拌机中创建了一个模型并导出到 .obj 文件。我编写了一个解析器，它读取顶点纹理和法线的坐标。我一直将所有坐标除以适用于程序的常数，以减小模式的大小，使其适合屏幕（这是一个临时措施）。这工作正常，除了照明不起作用，当它应该着色时，我留下了一个黑色的 3D 对象。在网上研究之后，我认为这可能是因为法线不是长度为 1？如果这是真的，我如何缩放我的坐标以使其适合屏幕并让照明正常工作？

顶点着色器

```
//
//  Created by Jake Cunningham on 13/10/2012.
//  Copyright (c) 2012 Jake Cunningham. All rights reserved.
//

attribute vec4 position;
attribute vec3 normal;

varying lowp vec4 colorVarying;

uniform mat4 modelViewProjectionMatrix;
uniform mat3 normalMatrix;

attribute vec2 TextCo;
varying vec2 textCoOut;

void main()
{
vec3 eyeNormal = normalize(normalMatrix * normal);
vec3 lightPosition = vec3(0.0, 0.0, 1.0);
vec4 diffuseColor = vec4(0.4, 0.4, 1.0, 1.0);

float nDotVP = max(0.0, dot(eyeNormal, normalize(lightPosition)));

colorVarying = diffuseColor * nDotVP;

gl_Position = modelViewProjectionMatrix * position;
textCoOut = TextCo;
} 
```

片段着色器：

```
//  Created by Jake Cunningham on 13/10/2012.
//  Copyright (c) 2012 Jake Cunningham. All rights reserved.
//

varying lowp vec4 colorVarying;

varying lowp vec2 textCoOut;
uniform sampler2D texture;

void main()
{
gl_FragColor = colorVarying * texture2D(texture, textCoOut);

} 
```

来自视图控制器的代码。

```
glEnable(GL_DEPTH_TEST);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);

glGenVertexArraysOES(1, &_vertexArray);
glBindVertexArrayOES(_vertexArray);

glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, loader.currentCountOfVerticies * sizeof(GLfloat) * 3, arrayOfVerticies, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribPosition);
glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, 12, BUFFER_OFFSET(0));

glGenVertexArraysOES(1, &_normalArray);
glBindVertexArrayOES(_normalArray);

glGenBuffers(1, &_normalBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _normalBuffer);
glBufferData(GLKVertexAttribNormal, loader.currentCountOfNormals  * sizeof(GLfloat) * 3,loader.arrayOfNormals , GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribNormal);
glVertexAttribPointer(GLKVertexAttribNormal, 3, GL_FLOAT, GL_FALSE, 12, BUFFER_OFFSET(0));

glGenVertexArraysOES(1, &_textureArray);
glBindVertexArrayOES(_textureArray);

glGenBuffers(1, &_textureBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _textureBuffer);
glBufferData(GL_ARRAY_BUFFER, loader.currentCountOfTextureCoordinates * sizeof(GLfloat) * 2, loader.arrayOftextureCoOrdinates, GL_STATIC_DRAW);

glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, 8, BUFFER_OFFSET(0));

glBindVertexArrayOES(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:28:35.620

如果您使用着色器，您可以`normalize()`在 GLSL 代码中对顶点和法线使用该操作。

您还可以查看[obj2opengl 脚本](http://heikobehrens.net/2009/08/27/obj2opengl/)，它可以对模型进行缩放、居中和规范化，将 OBJ 文件转换为头文件，以便为 iOS 实现做好准备。我还将该脚本扩展为[mtl2opengl](http://www.rendoncepeda.com/home/projects/mtl2opengl/)以包括对 MTL 文件的支持并使其更轻量级（也带有 Xcode 示例）。

# asp.net - 如何验证gridview的每一列中的控件

> ID：14101481
> 
> 赞同：2
> 
> 时间：2012-12-31T12:15:19.563
> 
> 标签：asp.net, visual-studio-2010, validation

我想验证 asp:Gridview 中的列，但不确定如何操作，因为我发现的所有教程都显示了 Microsoft Visual Studio 上的先前版本（我使用的是 2010）。

如何验证 Gridview 的每一列？

谢谢

这是 Visual Studio 生成的我的 Gridview 的代码。

```
<asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="registrationNo" DataSourceID="SqlDataSource3" 
    onselectedindexchanged="GridView2_SelectedIndexChanged">
    <Columns>
        <asp:BoundField DataField="fullName" HeaderText="fullName" 
            SortExpression="fullName" />
        <asp:BoundField DataField="address" HeaderText="address" 
            SortExpression="address" />
        <asp:BoundField DataField="work" HeaderText="work" 
            SortExpression="work" />
        <asp:BoundField DataField="home" HeaderText="home" SortExpression="home" />
        <asp:BoundField DataField="mobile" HeaderText="mobile" 
            SortExpression="mobile" />
        <asp:BoundField DataField="registrationNo" HeaderText="registrationNo" 
            InsertVisible="False" ReadOnly="True" SortExpression="registrationNo" />
        <asp:ButtonField ButtonType="Button" CommandName="Edit" HeaderText="Edit" 
            ShowHeader="True" Text="Edit" />
        <asp:ButtonField ButtonType="Button" CommandName="Update" HeaderText="Update" 
            ShowHeader="True" Text="Update" />
        <asp:ButtonField ButtonType="Button" CommandName="Delete" HeaderText="Delete" 
            ShowHeader="True" Text="Delete" />
    </Columns>
    <HeaderStyle BorderColor="#33CC33" />
    <RowStyle BorderStyle="Double" Font-Names="Monotype Corsiva" />
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:41:13.683

//本机 asp.net 客户端验证（ATLAS Ajax）

您应该使用 TemplateField，而不是使用 BoundFields。这将允许您在字段中添加验证控件，即

[2007年的教程仍然与这个问题有关](http://msdn.microsoft.com/en-us/library/bb426882.aspx)

//服务器端验证

为了验证服务器端的值，您有几个选项：

a) 在 gridviews RowUpdating 方法上添加一个指向代码隐藏服务器验证方法的 CustomValidator，即[msdn doc](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.servervalidate.aspx) b) 您可以手动验证（这也适用于批量更新）

# asp.net-mvc - 如何将复杂对象传递给 Web API 方法？

> ID：14101482
> 
> 赞同：1
> 
> 时间：2012-12-31T12:15:19.830
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, c#-5.0

我有两个模型：-

```
public class Builder    
{  
    [Key]  
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]  
    public int BuilderId { get; set; }  
    public string BuilderName { get; set; }  
}
public class Project
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ProjectId { get; set; }

    [Required]
    public string ProjectName { get; set; }

    [Required]
    public string Location { get; set; }

    [Required]
    public int BuilderId { get; set; }

    public Builder builder { get; set; }
} 
```

当我尝试将构建器类对象从客户端发布到 web api 方法时，它正在从正文中读取对象。没有问题。但是当我尝试使用一些 Builder 添加任何项目时，它不会调用所需的方法。和我的网络方法：-

```
public HttpResponseMessage PostProject([FromUri] Project project)
       {
        if (ModelState.IsValid)
        {
            db.Projects.Add(project);
            db.SaveChanges();
            HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, project);
            response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = project.ProjectId }));
            return response;
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    } 
```

我调用 web api 方法的方法：-

```
public async Task<ActionResult> Create(Project projects)
    {

        try
        {
            HttpClient client = new HttpClient();
            JavaScriptSerializer serializer = new JavaScriptSerializer();
            String contentStr = serializer.Serialize(projects);

            ObjectContent content = new ObjectContent(typeof(Project), projects, new JsonMediaTypeFormatter());

            HttpResponseMessage putResponse = await client.PostAsync(serviceprovider + "project/postproject", content);

            putResponse.EnsureSuccessStatusCode();

            return RedirectToAction("Index");

        }
        catch (HttpRequestException e)
        {
            return View();
        }
    } 
```

据我所知，我认为这会造成问题，因为我的对象很复杂。我是 Web API 的新手，欢迎您提出任何建议。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T20:34:05.257

您的模型有一个嵌套的类类型对象属性，并且您尝试在 URI 中传递它。我遇到了类似的问题，我的一个工作模型与你的结构完全相同。除非在请求正文中使用序列化的 JSON 或 XML 传递它，否则没有可用的解决方案。因此，我创建了一个自定义模型绑定器，即 FieldValueModelBinder 类。它在您提供的模型（即没有任何集合的对象层次结构）中运行良好且简单。由于数据量不大，用 URI 传递数据还是不错的。

请阅读我的文章并下载我刚刚使用此链接发布的源代码：http: [//www.codeproject.com/Articles/701182/A-Custom-Model-Binder-for-Passing-Complex-Objects](http://www.codeproject.com/Articles/701182/A-Custom-Model-Binder-for-Passing-Complex-Objects)。我希望这是您需要的理想解决方案。

# mysql - executeUpdate() 后表为空

> ID：14101485
> 
> 赞同：1
> 
> 时间：2012-12-31T12:15:51.317
> 
> 标签：mysql, jdbc

您好，祝大家新年快乐。

我正在开发一个 JDBC 程序，它获取服务器中的每个数据库，访问每个表并收集有关列的信息。最后，我想将表格中的每一行信息添加为行。我的程序编译并正确运行，但表总是返回空集。我试图打印出每次构造什么样的查询。然后，只需将其复制粘贴到终端并添加行！无法理解我错过了什么。

```
private Connection connection = DriverManager.getConnection(DB_URL, USERNAME, PASSWORD);
connection.setAutoCommit(false);
private Statement statement = connection.createStatement();
String sql = "INSERT INTO collection VALUES ('"+dbName+"', '"+tName+"', '"+fName+"')";
System.out.println(sql);
statement.executeUpdate(sql); 
```

在输出控制台上：

```
 INSERT INTO collection VALUES ('information_schema', 'INNODB_BUFFER_POOL_STATS', 'PAGES_CREATE_RATE')
    INSERT INTO collection VALUES ('information_schema', 'INNODB_BUFFER_POOL_STATS', 'PAGES_WRITTEN_RATE')
    INSERT INTO collection VALUES ('information_schema', 'INNODB_BUFFER_POOL_STATS', 'NUMBER_PAGES_GET')
    INSERT INTO collection VALUES ('information_schema', 'INNODB_BUFFER_POOL_STATS', 'HIT_RATE')
.
.
. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:19:19.047

看看使用事务。由于您关闭了自动提交，因此您需要先开始事务（只需将自动提交设置为 false 可能会开始事务，请查看 JDBC 文档），完成后您需要提交事务。当您关闭自动提交时，不会保存任何内容，而无需您明确提交事务。

# c# - 非托管类型结构指针转换为托管类型结构指针

> ID：14101488
> 
> 赞同：0
> 
> 时间：2012-12-31T12:15:57.690
> 
> 标签：c#, c++, .net, c++-cli

考虑 c++ 中的以下结构，我需要使用 CLI 包装它以使其可用于 C#

```
typedef struct A
{
    int b[5];
    A* next;
}; 
```

我该怎么做？请帮忙。

*非操作编辑：*

我尝试过的是以下内容：

```
 public ref struct ANET 
    {
        array<int>^ b;
        ANET^ next;         
        ANET()
        { b = gcnew array<int>(5) } 
    }; 
```

现在假设我们有一个 A 对象的指针是 a，ANET 对象的指针是 aNET

```
nSize = sizeof(a->b)/sizeof(a->b[0]);
Marshal::Copy( IntPtr( ( void * ) a->b ), aNET->b, 0, nSize); 
```

到目前为止，我能够在 aNET->b 中获得 a->b 的值，但我坚持将 a->next 的指针编组到 aNET->next。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:20:07.787

那是一个链表。因此，一种选择是编写 C++/CLI 代码以使本机链表适应 .net [`LinkedList<T>`](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)。沿着这条路线走意味着您需要在本机代码中修改列表并需要返回到托管代码时制作列表的副本。反之亦然。

如果制作副本不是一种选择，那么您应该将本机链表包装在托管类中。因此，您根本不会尝试转换结构定义。相反，您编写一个 C++/CLI 托管类来封装您需要公开的功能。我不能说更多，因为您没有提供有关您需要在此列表中执行的操作的任何信息。现在您已经解释了数据流是什么。

# dojo - 小部件事件行为中的dojo templatedmixin

> ID：14101495
> 
> 赞同：1
> 
> 时间：2012-12-31T12:16:21.123
> 
> 标签：dojo

观察：

在我正在制作的自定义小部件的模板中，有一行：

```
<input type="text"  data-dojo-props="placeHolder:'Search...'" data-dojo-attach-event="onchange: search"/> 
```

这工作正常，因为在更改时，我的小部件的搜索功能被调用。但是显示的是普通的输入框，不是dijit的花哨的显示。所以我这样做：

```
<input type="text" data-dojo-type="dijit.form.TextBox" data-dojo-props="placeHolder:'Search...'" data-dojo-attach-event="onchange: search"/> 
```

现在，显示很好，但更改时不调用搜索。现在我这样做了：

```
<input type="text" data-dojo-type="dijit.form.TextBox" data-dojo-props="placeHolder:'Search...'" data-dojo-attach-event="onchange: random_name"/> 
```

整个页面崩溃，调试器告诉我 dojo`random_name`在`"scope"`.

为了给出整个代码，[它们](https://gist.github.com/4419357)是：

***编辑***：代替 onchange，我尝试过`onChange`，`ondijitchange`或任何其他事件，如“onclick”、“onClick”、“ondijitclick”等，但无论我在浏览器中做什么，搜索都不会被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:54:14.493

在 dijit 中，事件名称是 onChange。

API： [http ://dojotoolkit.org/api/1.8/dijit/form/TextBox#onChange](http://dojotoolkit.org/api/1.8/dijit/form/TextBox#onChange)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T01:39:30.393

仔细查看您的代码和[dojo 1.8 输入示例](http://dojotoolkit.org/reference-guide/1.8/dijit/form/TextBox.html#getting-and-manipulating-the-value)，我可能会从模板中删除附加事件，并使用[dojo/on](http://dojotoolkit.org/reference-guide/1.8/dojo/Evented.html)将其添加到小部件 js 文件中的“启动”函数中。

因此，使用您的“MainViewWidget.js”代码和模板标记，我将尝试以下修改：

首先模板更改...

```
<input type="text" data-dojo-type="dijit.form.TextBox" data-dojo-props="placeHolder:'Search...'" data-dojo-attach-point="inputNode"/> 
```

和小部件改变......

```
define(["dojo/_base/declare","dojo/dom",
        "dijit/_Widget", "dijit/_TemplatedMixin",
        "dojo/text!./templates/MainViewWidget.html",
        "dojo/on",
        "dijit/layout/TabContainer", "dijit/layout/ContentPane","dijit/layout/BorderContainer","dijit/form/TextBox", "dijit/layout/AccordionContainer"],

function(declare, dom, _Widget, _TemplatedMixin, template, on){
    return declare("package.MainViewWidget", [_Widget, _TemplatedMixin], {

    // widgetsInTemplate: true, /*keep this false, otherwise data-dojo-attach-event attribute is a pain in the ass!*/

    templateString: template,

    constructor: function(){
    },

    startup: function(){
        on(this.inputNode, "change", function(){//or just have your search function here instead
             alert('hi');
        });
    }
  });
}); 
```

如果您想在“on”处理程序中使用“this”引用小部件，则可能需要使用 dojo 的[lang.hitch作为事件处理程序。](http://dojotoolkit.org/reference-guide/1.8/dojo/_base/lang.html#hitch)

希望有帮助，我没有任何错别字。

# c# - 如何使用带有 Asp.Net 的实体框架为 CRUD 操作编写 Linq 查询？

> ID：14101499
> 
> 赞同：1
> 
> 时间：2012-12-31T12:16:30.093
> 
> 标签：c#, asp.net, linq, entity-framework

我正在使用 EntityFramework(EF) 和 Asp.Net 来创建一个网站，因为我已经创建了 .edmx 和 .tt 以及 DBContext。

此外，我已经通过在我的 repo 类中使用此方法完成了获取所有记录，

```
 StudentManagementEntities _db;
    public Repo()
    {
        _db = new StudentManagementEntities();
    }

    public object GetAllStudents()
    {
        return _db.People.Select(s => s).ToList();
    } 
```

我不知道如何进行其他操作，如插入、更新、删除等，

有人会告诉我 linq 还是给我任何示例链接...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:19:00.623

[在 Entity Framework 4.0 中添加、更新和删除对象](http://www.dotnetcurry.com/ShowArticle.aspx?ID=619)

// 插入

```
public void AddStudent(People s)
{
    _db.People.Add(s);
    _db.SaveChanges();
} 
```

// 删除

```
public void DeleteStudent(People s)
{
    _db.People.Remove(s);
    _db.SaveChanges();
} 
```

//编辑

```
public void EditStudent(People s)
{
    var people = _db.People.First( p=> p.ID == s.ID); // Replace ID with primary key

  // Copy all properties from s to people

    _db.SaveChanges();
} 
```

# python - 连续的python正则表达式数字

> ID：14101506
> 
> 赞同：-3
> 
> 时间：2012-12-31T12:17:11.463
> 
> 标签：python, regex

我正在尝试在一个字符串中检查我使用的最多 3 个数字：

```
regex = re.compile("\d{0,3}") 
```

但这不起作用，例如，`1234`即使数字字符串长度超过 3，该正则表达式也会接受该字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:25:39.123

如果要检查字符串中最多 3 位的字符串，则需要使用`'\d{4,}'`，因为您只对长度为 3 的数字字符串感兴趣。

```
import re

str='123abc1234def12'
print re.findall('\d{4,}',str)

>>> '[1234]' 
```

如果您使用`{0,3}`：

```
str='123456'
print re.findall('\d{0,3}',str)

>>> ['123', '456', ''] 
```

匹配最大长度为 3的`regex`数字字符串和空字符串，但这不能用于测试正确性。在这里，您无法检查所有数字字符串是否都是长度，但您可以轻松检查长度范围内的数字字符串。

所以要测试做这样的事情：

```
str='1234'

if re.match('\d{4,}',str):
    print 'Max digit string too long!'

>>> Max digit string too long! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:25:39.500

`\d{0}`匹配所有可能的字符串。不清楚您所说的“不起作用”是什么意思，但是如果您希望将字符串与数字匹配，请将重复运算符增加到`{1,3}`.

如果您希望排除 4 次或更多的运行，请尝试类似`(?:^|\D)\d{1,3}(?:\D|$)`的方法，当然，如果您想捕获匹配，请使用捕获括号`\d{1,3}`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:28:01.710

可能有几个原因：

*   由于您想`\d`搜索数字或数字，您可能应该将其拼写为`"\\d"`or `r"\d"`。`"\d"`可能碰巧起作用，但这只是因为`d`在字符串中（还）不是特别的。`"\n"`or `"\f"`or`"\r"`会做一些完全不同的事情。查看[re 模块文档](http://docs.python.org/2/library/re.html)并搜索“原始字符串”。

*   `"\\d{0,3}"`几乎可以匹配任何东西，因为 {0,3} 表示“零或最多三个”。因此，它将匹配任何字符串的开头，因为任何字符串都以空字符串开头。

*   或者，也许您想搜索只有零到三个数字的字符串，没有别的。在这种情况下，您想使用类似`r"^\d{0,3}$"`. 原因是正则表达式匹配字符串中的任何位置（或者，如果您使用`re.match`而不是，则仅在开头`re.search`）。`^`匹配字符串的开头，并`$`匹配结尾，因此通过将它们放在每一端，您不匹配任何具有 before 或 after 的内容`\d{0,3}`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T12:34:49.093

您使用的方法是查找具有 0-3 个数字的子字符串，它无法达到您的预期。我的解决方法：

```
>>> import re
>>> re.findall('\d','ds1hg2jh4jh5')
['1', '2', '4', '5']
>>> res = re.findall('\d','ds1hg2jh4jh5')
>>> len(res)
4
>>> res = re.findall('\d','23425')
>>> len(res)
5 
```

所以，接下来你只需要使用'if'来判断数字的数量。

# visual-studio-2010 - Visual Studio 调试器“快照”？

> ID：14101518
> 
> 赞同：1
> 
> 时间：2012-12-31T12:18:24.400
> 
> 标签：visual-studio-2010

我经常使用调试器进入未知领域并发现 3rdparty 对象。VS 调试器在显示任何东西的内部方面做得很好。这里的问题是，当我遇到断点时，我想“快照”一个变量，所有这些成员调试器都显示为树，停止调试并继续编写查看快照的代码。那可能吗？

# objective-c - 关闭 UITableView 静态单元格中的复选标记

> ID：14101522
> 
> 赞同：2
> 
> 时间：2012-12-31T12:18:53.230
> 
> 标签：objective-c, xcode, uitableview

我有一个带有 5 个单个分组单元格的 UITableView，允许用户从每个选项访问特定的其他屏幕。然后用户将返回此屏幕，我希望能够在最后一个选定的单元格上放置一个复选标记并关闭任何以前的复选标记。

我正在努力实现这一目标，`didSelectRowAtIndexPath:`但似乎无法做到这一点。

动态单元格有一些可用的答案，但静态单元格没有可用的答案，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T15:02:37.980

有多种方法可以管理此问题，但其中一种更简单的方法是将对单元格的引用存储在集合中，以便您可以轻松地将消息发送到所有单元格。例如，您可以添加如下属性：

~~@property（强，非原子） IBOutletCollection(NSArray) *cells;~~

```
@property (strong, nonatomic) IBOutletCollection(UITableViewCell) NSArray *cells; 
```

并将其连接到 nib 文件或情节提要中的每个单元格。（如果您不使用 Interface Builder，请删除`IBOutletCollection`，并在您创建单元格的任何位置自行填充数组。）

然后您可以按如下方式管理选择：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    for (UITableViewCell *currCell in self.cells)
    {
        currCell.accessoryType = UITableViewCellAccessoryNone;
    }

    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    selectedCell.accessoryType = UITableViewCellAccessoryCheckmark;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-31T09:46:39.137

IBOutletCollection 的正确语法是：

```
@property (strong, nonatomic) IBOutletCollection(UITableview) NSArray *cells; 
```

# facebook - FQL 在应用程序上返回 400 错误，但在浏览器和 API Explorer 上运行良好

> ID：14101525
> 
> 赞同：2
> 
> 时间：2012-12-31T12:19:11.620
> 
> 标签：facebook, facebook-graph-api, facebook-fql

以下 FQL 查询在我将其粘贴到浏览器时有效，并且在 API 资源管理器中也有效（xxxx 替换为数字和访问令牌）

```
https://graph.facebook.com/fql?q=SELECT page_id from place WHERE (distance(latitude, longitude,"xxxxx","xxxxx") < xxxx)&access_token=<MY ACCESS TOKEN> 
```

当我从我的 java 应用程序运行相同的代码时，我得到一个 HTTP 400 错误。知道是什么原因造成的吗？

以下代码实现了连接。getInputStream() 抛出异常（错误 400）

```
connection = (URLConnection) new URL(url).openConnection();
input = connection.getInputStream(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:14:23.487

您是否尝试对“q”参数值进行 URLEncode？就像是 ：

```
String query = SELECT page_id from place WHERE (distance(latitude, longitude,"xxxxx","xxxxx") < xxxx)&access_token=<MY ACCESS TOKEN>;
String urlString = "https://graph.facebook.com/fql?q=" + URLEncoder.encode(query, "UTF-8"));
connection = (URLConnection) new URL(urlString ).openConnection();
input = connection.getInputStream(); 
```

# c# - 裁剪后的输出图像大于原始尺寸

> ID：14101526
> 
> 赞同：0
> 
> 时间：2012-12-31T12:19:15.890
> 
> 标签：c#, image-processing

当我使用 Bitmap.Clone() 裁剪图像时，它会创建大于原始图像大小
的输出原始大小为：5 M
，输出裁剪图像为：28 M

如何在不损失质量且尺寸不大的情况下进行裁剪？我的代码是：

```
private static Image cropImage(Image img, Rectangle cropArea)
{
  var bmpImage = new Bitmap(img);
  Bitmap bmpCrop = bmpImage.Clone(cropArea, bmpImage.PixelFormat);
  img.Dispose();
  bmpCrop.Save(@"D:\Work\CropImage\CropImage\crop.jpg",bmpImage.RawFormat );
  return (Image)(bmpCrop);
}

 static void Main(string[] args)
        {
            string sourceimg = @"D:\Work\Crop Image\CropImage\4032x5808.jpg";
            Image imageoriginal = Image.FromFile(sourceimg);
            int HorX,HorY,VerX,VerY;
            Console.WriteLine("Enter X 1 Cor. ");
            HorX=int.Parse(Console.ReadLine());
            Console.WriteLine("Enter Y 1 Cor. ");
            HorY=int.Parse(Console.ReadLine());
            Console.WriteLine("Enter X 2 Cor. ");
            VerX=int.Parse(Console.ReadLine());
            Console.WriteLine("Enter Y 1 Cor. ");
            VerY= int.Parse(Console.ReadLine());
            Rectangle rect = new Rectangle(HorX,HorY,VerX,VerY);
            cropImage(imageoriginal, rect);
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T12:25:32.987

您将图像保存为位图，而不是 jpg 或 png，这可能是您的输入格式。更改格式类型，您将看到文件大小直线下降！

此代码示例应该可以帮助您设置质量：-

```
var qualityEncoder = Encoder.Quality;
var quality = (long)<desired quality>;
var ratio = new EncoderParameter(qualityEncoder, quality );
var codecParams = new EncoderParameters(1);
codecParams.Param[0] = ratio;
var jpegCodecInfo = <one of the codec infos from ImageCodecInfo.GetImageEncoders() with mime type = "image/jpeg">;
bmp.Save(fileName, jpegCodecInfo, codecParams); // Save to JPG 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:04:59.763

通常，您无需担心裁剪时会降低质量，因为您只需以 1:1 的比例保存原始图像的一部分。

您的示例工作正常 - 问题必须在`Rectangle`输入部分。由于您的变量名称令人困惑，我建议您在[MSDN](http://msdn.microsoft.com/en-us/library/9wcdy991.aspx)上阅读它。

可以肯定的是，只需初始化您的矩形（假设您的图像大于 1000x900 ），这将从左侧第 th 个像素和顶部第 th 个像素`new Rectangle(200,100,800,800);`开始裁剪区域，宽度和高度等于像素。`200``100``800`

最终质量将保持不变，图像尺寸会更小。

# opengl - 阴影映射 opengl glsl 着色器 图形 数学

> ID：14101528
> 
> 赞同：0
> 
> 时间：2012-12-31T12:19:25.913
> 
> 标签：opengl, glsl, graphics3d, shadow-mapping

我很难理解不同着色器阶段之间的数学。

在从灯光的角度来看的片段着色器中，我基本上将 fragDepth 写成 rgb 颜色

```
#version 330

out vec4 shader_fragmentColor;

void main()
{
    shader_fragmentColor = vec4(gl_FragCoord.z, gl_FragCoord.z, gl_FragCoord.z, 1);
    //shader_fragmentColor = vec4(1, 0.5, 0.5, 1);
} 
```

使用上述着色器渲染场景时，它会以全白色显示场景。我想那是因为 gl_FragCoord.z 大于 1。希望它不会在 1 时达到最大值。但我们现在可以不理会这个问题。

在从相机角度看的几何着色器中，我基本上将所有点变成四边形并写出可能“不正确”的纹理位置以在 lightTexture 中查找。这里的数学就是问题。我也有点不确定插值在下一个着色器阶段是否正确。

```
#version 330
#extension GL_EXT_geometry_shader4 : enable

uniform mat4 p1_modelM;
uniform mat4 p1_cameraPV;
uniform mat4 p1_lightPV;

out vec4 shader_lightTexturePosition;

void main()
{
    float s = 10.00;

    vec4 llCorner = vec4(-s, -s, 0.0, 0.0);
    vec4 llWorldPosition = ((p1_modelM * llCorner) + gl_in[0].gl_Position);
    gl_Position = p1_cameraPV * llWorldPosition;
    shader_lightTexturePosition = p1_lightPV * llWorldPosition;
    EmitVertex();

    vec4 rlCorner = vec4(+s, -s, 0.0, 0.0);
    vec4 rlWorldPosition = ((p1_modelM * rlCorner) + gl_in[0].gl_Position);
    gl_Position = p1_cameraPV * rlWorldPosition;
    shader_lightTexturePosition = p1_lightPV * rlWorldPosition;
    EmitVertex();

    vec4 luCorner = vec4(-s, +s, 0.0, 0.0);
    vec4 luWorldPosition = ((p1_modelM * luCorner) + gl_in[0].gl_Position);
    gl_Position = p1_cameraPV * luWorldPosition;
    shader_lightTexturePosition = p1_lightPV * luWorldPosition;
    EmitVertex();

    vec4 ruCorner = vec4(+s, +s, 0.0, 0.0);
    vec4 ruWorldPosition = ((p1_modelM * ruCorner) + gl_in[0].gl_Position);
    gl_Position = p1_cameraPV * ruWorldPosition;
    shader_lightTexturePosition = p1_lightPV * ruWorldPosition;
    EmitVertex();

    EndPrimitive();
} 
```

在从相机角度来看的片段着色器中，我基本上在 lightTexture 中查找从灯光角度显示的颜色并写出相同的颜色。

```
#version 330

uniform sampler2D p1_lightTexture;

in vec4 shader_lightTexturePosition;

out vec4 shader_fragmentColor;

void main()
{
    vec4 lightTexel = texture2D(p1_lightTexture, shader_lightTexturePosition.xy);
    shader_fragmentColor = lightTexel;
    /*
    if(lightTexel.x < shader_lightTexturePosition.z)
        shader_fragmentColor = vec4(1, 0, 0, 1);
    else
        shader_fragmentColor = vec4(0, 1, 0, 1);
    */
    //shader_fragmentColor = vec4(1, 1, 1, 1);
} 
```

当从相机的角度进行渲染时，我看到场景是按原样绘制的，但在它们上应用了不正确的纹理坐标并重复出现。重复纹理可能是由纹理坐标超出 0 到 1 的范围引起的。

我已经尝试了几件事，但仍然无法理解数学应该是什么。一些注释掉的代码和一个我不确定的例子是：

```
shader_lightTexturePosition = normalize(p1_lightPV * llWorldPosition) / 2 + vec4(0.5, 0.5, 0.5, 0.5); 
```

为左下角。其他角落的类似代码

从解决方案中，我希望从摄像机的角度渲染场景，其颜色与从灯光的角度完全相同。可能有一些精度误差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:05:49.463

我自己弄清楚了纹理映射位。深度值位还是有点奇怪。将 screenProjectedCoords 转换为 normalizedDeviceCoords 然后加 1 除以 2。

```
vec4 textureNormalizedCoords(vec4 screenProjected)
{
    vec3 normalizedDeviceCoords = (screenProjected.xyz / screenProjected.w);
    return vec4( (normalizedDeviceCoords.xy + 1.0) / 2.0, screenProjected.z * 0.005, 1/screenProjected.w);
}

void main()
{
    float s = 10.00;

    vec4 llCorner = vec4(-s, -s, 0.0, 0.0);
    vec4 llWorldPosition = ((p1_modelM * llCorner) + gl_in[0].gl_Position);
    gl_Position = p1_cameraPV * llWorldPosition;
    shader_lightTextureCoords = textureNormalizedCoords(p1_lightPV * llWorldPosition);
    EmitVertex();a 
```

# php - 将 PHP 匿名函数转换为 create_function

> ID：14101530
> 
> 赞同：1
> 
> 时间：2012-12-31T12:19:30.903
> 
> 标签：php

我必须使用以下 PDO 连接查询：

```
$fields = array(
        'titulo',
        'tipo_produto',
        'quantidade_peso',
        'unidade_de_venda',
        'unidades_por_caixa',
        'caixas_piso',
        'pisos_palete',
        'tipo_de_palete',
        'unidades_palete',
        'caixas_palete',
        'uni_diametro',
        'uni_largura',
        'uni_profundidade',
        'uni_altura',
        'uni_peso_bruto_unidade',
        'caixa_largura',
        'caixa_profundidade',
        'caixa_altura',
        'altura_palete',
        'volume_unidade',
        'volume_caixa',
        'volume_palete',
        'peso_caixa',
        'peso_palete'
    );
    $sql = 'INSERT INTO ficha_item ( %s ) VALUES ( %s )';
    $fieldsClause = implode(', ', $fields);

    $valuesClause = implode(', ', array_map(function($value) {
                        return ':' . $value;
                    }, $fields));

    $sql = sprintf($sql, $fieldsClause, $valuesClause);

    $stmt = $db->prepare($sql);

    $stmt->execute(array_intersect_key($_POST, array_flip($fields))); 
```

这向我返回了以下错误：

```
Parse error: syntax error, unexpected T_FUNCTION, expecting ')' 
```

经过一番挖掘，似乎匿名函数只在 PHP 5.3 中实现，为了让我在 5.2 上运行，我应该使用**create_function**，我对 PHP 还是很陌生，所以我在找出正确的方法时遇到了问题这里的语法，我也不太了解 $value 变量以及如何在 create_function 上正确实现它。

在这里寻找一些帮助，甚至是 create_function 的替代品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:24:48.610

```
$valuesClause = implode(', ', array_map(function($value) {
                    return ':' . $value;
                }, $fields)); 
```

改成：

```
$func = create_function('$value', 'return ":" . $value;');
$valuesClause = implode(', ', array_map($func, $fields)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T12:25:45.217

更好地创建正常功能

```
function prefixWithColon($value) {
    return ':' . $value;
} 
```

并使用它的名字作为回调

```
$valuesClause = implode(', ', array_map('prefixWithColon', $fields)); 
```

# android - 如何获取使用命令行运行的测试用例的报告

> ID：14101532
> 
> 赞同：0
> 
> 时间：2012-12-31T12:19:41.513
> 
> 标签：android, command-line, report, junit4

我已经编写了**Junit 测试用例**来测试我的应用程序。

我在命令行中运行我的测试用例。

如果我通过 Eclipse 运行它，我将在 juint UI 中获得报告。

但是`I am running test cases in command line`。我试图捕获 logcat 详细信息，它会在运行许多测试用例时溢出。

请建议我如何获得此测试用例运行的详细报告？

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T10:52:44.733

[链接在这里，](http://zutubi.com/source/projects/android-junit-report/)我按照本教程进行操作并插入以获取报告。

# wordpress - Wordpress：只为新帖子做一些事情，而不是为更新的帖子做一些事情

> ID：14101533
> 
> 赞同：-2
> 
> 时间：2012-12-31T12:19:49.500
> 
> 标签：wordpress, posts

早上好，我需要一个钩子或其他东西来区分新帖子和更新帖子。

我只想为新帖子执行一些代码......类似的东西：

```
add_action('publish_post', myfunction);

function myfunction( $post_id ){
    if <new post> {
        /* do something */
    }
    else {
        /* do nothing */
    }
} 
```

我正在使用 WP v3.5

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:38:22.757

首先，您要使用 draft_to_publish 钩子：

```
add_action('draft_to_published', 'my_function'); 
```

但是，如果帖子已发布、未发布然后再次发布，这可能会触发多次。为确保您的操作仅触发一次，请在函数末尾为帖子设置自定义元元素。在您的函数开始时，检查您的元元素是否已设置，如果是则跳过该操作。

- - 添加 - -

这是一个关于重复动作保护如何工作的示例（未经测试的代码 - 所以可能需要一些工作）：

```
function my_function() {
    $already_done = get_post_meta($post_id, 'do_once', true);
    if(!$already_done) {
        // Do what you need to do here
        add_post_meta($post_id, 'do_once', 1, true);
    }
} 
```

# java - webservices - 验证输入

> ID：14101537
> 
> 赞同：1
> 
> 时间：2012-12-31T12:19:51.123
> 
> 标签：java, web-services, jax-ws

我正在玩一个简单的 web 服务 JAX-WS 而不使用任何花哨的工具（不使用 CXF 或 Metro 等）

我正在使用 JDK 1.6.x 提供的内置支持来创建此 Web 服务（JDK 6 中的 JAX-WS RI 2.1.6）

我的问题 - 我想在我的网络服务中引入验证，所以我想我会使用“@SchemaValidation”

也尝试导入它 - 但代码无法编译

我的代码快照：

```
package com.mkyong.ws;
import javax.jws.WebService;
**import com.sun.xml.ws.developer.SchemaValidation;**

@WebService(endpointInterface = "com.mkyong.ws.HelloWorld")
**@SchemaValidation()**  
public class HelloWorldImpl implements HelloWorld{ 
```

编译时出现异常：

```
javac com\mkyong\ws\HelloWorldImpl.java
com\mkyong\ws\HelloWorldImpl.java:3: package com.sun.xml.ws.developer does not exist
import com.sun.xml.ws.developer.SchemaValidation;
                           ^
com\mkyong\ws\HelloWorldImpl.java:8: cannot find symbol
symbol: class SchemaValidation
@SchemaValidation()
^
2 errors 
```

所以我的问题是：我们不能在 RI 的 JDK1.6 实现中使用这个注释吗？我需要在我的类路径中导入任何特殊的 jar 吗？谢谢，萨蒂什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:09:52.547

根据JarFinder：

[http://www.jarfinder.com/index.php/java/info/com.sun.xml.ws.developer.SchemaValidation](http://www.jarfinder.com/index.php/java/info/com.sun.xml.ws.developer.SchemaValidation)

*   jaxws-rt-2.1.4.jar
*   jaxws-rt-2.1.3.jar

*编辑*-我不知道该注释的确切用途，但是：

1.  可以使用 JAXB（因此仅使用 JDK 1.6）使用`Unmarshaller`该类来验证 XML 有效负载。看看`Unmarshaller.setSchema()`，我也有一些例子，如果你需要的话，让我知道。
2.  从注解的命名空间来看，它看起来更像是一些内部的东西（`com.sun.xml...`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:26:29.333

尝试考虑使用 wsdl。在 wsdl 中，您可以添加所有类型的验证。wsdl 中的验证规则与您用于实现 Web 服务的语言无关

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T17:44:49.280

如果您希望使用JDK 附带的注解，请`@SchemaValidation`从服务实现 bean 的包中使用。`com.sun.xml.internal.ws.developer.SchemaValidation`不过我必须注意，我至少看到过两个例子，人们在使用这个包中的注释时遇到了问题。

您尝试使用的注释在`com.sun.xml.ws.developer.SchemaValidation`包中与 glassfish 的 JAX-WS RI 捆绑在一起，因此如果您想使用它，则需要将其包含在项目的类路径中

# java - Viewscoped Managed beans and Portlets

> ID：14101547
> 
> 赞同：0
> 
> 时间：2012-12-31T12:20:21.870
> 
> 标签：java, jsf-2, portlet, liferay-6

I am creating a portlet where in the view and edit modes apply. I want a situation whereby and update switches the portlet from the edit mode to the view mode. Below is my code snippet

```
@ManagedBean(name = "portletBackingBean")
@ViewScoped
public class FirstPortlet extends GenericFacesPortlet implements Serializable {

private transient Logger logger = LoggerFactory.getLogger(getClass());

private void doActionResponse(PortletMode mode){
    FacesContext facesContext = FacesContext.getCurrentInstance();
    ExternalContext externalContext =
    facesContext.getExternalContext();
    ActionResponse actionresponce = (ActionResponse) externalContext.getResponse();
    try {
        actionresponce.setPortletMode(mode);
    } catch (PortletModeException e) {
        // TODO Auto-generated catch block
        LiferayFacesContext.getCurrentInstance().addMessage(null, new FacesMessage("Error setting property"));
    }
}

private String userName;

/**
 * @return the userName
 */
public String getUserName() {
    return userName;
}

/**
 * @param userName the userName to set
 */
public void setUserName(String userName) {
    this.userName = userName;
}

//submitting the values
public void doSubmit(){
    if(this.userName != null) {
        logger.debug("value of property in backing bean set to " + getUserName());
        doActionResponse(PortletMode.VIEW);
    }

} 
```

So far all is well, but then the portlet renders in view mode, the value of `#{portletBackingBean.userName}` is null.

Please is there a more elegant way of doing this

Thanks in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T16:22:37.093

There are some serious defects in this code.

```
@ManagedBean(name = "portletBackingBean")
@ViewScoped
public class FirstPortlet extends GenericFacesPortlet implements Serializable {
//...
  private String userName; 
```

The portlet...

*   Is always application scoped
*   Must be thread-safe
*   Cannot be a managed bean
*   Cannot have per-user state (e.g. `userName`)

Whenever the `portletBackingBean` is resolved it will cause the JSF framework to create a new instance of the `FirstPortlet` class. It will not return a reference to the portlet instance that contains it.

In addition, if you use different views for the edit and view portlet modes `@ViewScoped` is not an appropriate scope for this state.

In short, I think you need to look again at your model design and figure out how you're going to separate state from portlet functionality.

# javascript - knockoutjs 通过点击事件获取（真正绑定的）元素

> ID：14101548
> 
> 赞同：5
> 
> 时间：2012-12-31T12:20:25.867
> 
> 标签：javascript, knockout.js

看到这个[问题](https://stackoverflow.com/questions/11158045/knockoutjs-get-element-id-through-click-event/14096449)。除了当单击子元素时答案返回子元素，即在您绑定 div 的情况下。

```
<div id="parent" data-bind="click: log">Parent Div<div id="child">Child</div></div>

<script>
    var ViewModel = function() {
        this.log = function(data, event) {
            console.log("you clicked " + event.target.id);
        }
    };
    ko.applyBindings(new ViewModel());
</script> 
```

看到这个[小提琴](http://jsfiddle.net/e8JPT/36/)

我想获取单击事件绑定到的原始元素。有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T12:42:25.527

`event.currentTarget`将为您提供事件绑定的元素。更改您的 Console.log 如下：

```
console.log("you clicked " + event.currentTarget.id); 
```

# javascript - 加载 iframe 视频 javascript 时避免页面刷新

> ID：14101556
> 
> 赞同：1
> 
> 时间：2012-12-31T12:21:26.007
> 
> 标签：javascript, html

我的网页中有一个滚动的 iframe 视频部分。问题是页面在滚动中的每个 iframe 加载时都会刷新。我已经使用了这个网站的滚动条`http://www.smoothdivscroll.com/index.html#toc`。加载 iframe 时如何避免页面刷新？

html:

```
<div id="logoParade">
  <div class="scrollWrapper">
    <div class="scrollableArea">
      <div class="product-box" id="test">
        <iframe width="700" height="500" src="http://www.youtube.com/embed/QTKM-54zWm4" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="product-box" id="test">
        <iframe width="700" height="500" src="http://www.youtube.com/embed/QTKM-54zWm4" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="product-box" id="test">
        <iframe width="700" height="500" src="http://www.youtube.com/embed/QTKM-54zWm4" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="product-box" id="test">
        <iframe width="700" height="500" src="http://www.youtube.com/embed/QTKM-54zWm4" frameborder="0" allowfullscreen></iframe>
      </div>
      <div class="product-box" id="test">
        <iframe width="700" height="500" src="http://www.youtube.com/embed/QTKM-54zWm4" frameborder="0" allowfullscreen></iframe>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T14:02:23.133

每次 iframe 加载都没有刷新，至少我不知道。我在您的 HTML 中看到的唯一问题是与刷新无关的类似 ID 属性（“测试”），只是您应该修复的问题。

我已经用插件测试了你的代码，它工作正常。

# php - 比较php中的两个数组

> ID：14101557
> 
> 赞同：2
> 
> 时间：2012-12-31T12:21:34.257
> 
> 标签：php, arrays

我使用这段代码：

```
 $new = array(
     "123" => "a",
     "456" => "b"
 );

 $old = array(
     "123" => "a",
     "456" => "b"
 ); 
```

然后`$new`数组变成这样：

```
 $new = array(
     "456" => "b",
     "123" => "c",
     "789" => "e"
 ); 
```

如您所见，`$new`数组的数量增加了，元素的顺序发生了变化，键的值`123`也发生了变化。我需要将`$new`数组与`$old`数组进行比较，并且只捕获对键值所做的更改，`123`而不关心元素的顺序和数量。我试过：

```
 $result = array_diff( $new, $old );
 print_r( $result ); 
```

输出 ：

```
 Array ( [123] => c [789] => e ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T12:41:19.407

更新。相当混乱。现在我想我们明白了

```
$old = array(
    "123"    => "a",
    "456"    => "b"
);
$new = array(
    "456"    => "b",
    "123"    => "c", // catch this (element in old array that is changed)
    "789"    => "e"
);

$new2 = array();
foreach ($new as $key => $new_val)
{
    if (isset($old[$key])) // belongs to old array?
    {
        if ($old[$key] != $new_val) // has changed?
            $new2[$key] = $new[$key]; // catch it
    }
}

// output $new2:
array (
  123 => 'c',
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T15:14:39.953

您首先希望将这些元素与（参见 参考资料）`$new`进行更改：`$old`[`array_diff_assoc`](http://php.net/array_diff_assoc)

```
$changed = array_diff_assoc($new, $old); 
```

在该结果中，您只想拥有那些具有其键的元素`$old`（请参阅 参考资料[`array_intersect_key`](http://php.net/array_intersect_key)）：

```
$result  = array_intersect_key($changed, $old); 
```

就是这样。如果有帮助，您可以将它们相互包装：

```
array_intersect_key(array_diff_assoc($new, $old), $old); 
```

结果是：

```
array(1) {
  [123] =>
  string(1) "c"
} 
```

完整示例（[演示](http://eval.in/5681)）：

```
$old = array(
    "123" => "a",
    "456" => "b"
);

$new = array(
    "456" => "b",
    "123" => "c", // catch only the change made on the value at key 123 
    "789" => "e"
);

$changed = array_diff_assoc($new, $old);
$result  = array_intersect_key($changed, $old);

var_dump($result); 
```

最后一点：PHP 中有许多数组函数。值得仔细阅读列表并查看合适的内容，因为大多数情况下您只需要其中一两个即可完成此类工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:39:36.403

您将此代码用于您的要求

```
 <?php
    function key_compare_func($key1, $key2)
    {
        if ($key1 == $key2)
            return 0;
        else if ($key1 > $key2)
            return 1;
        else
            return -1;
    }

    $array1 = array('blue'  => 1, 'red'  => 2, 'green'  => 3, 'purple' => 4);
    $array2 = array('green' => 5, 'blue' => 6, 'yellow' => 7, 'cyan'   => 8);

    var_dump(array_intersect_ukey($array1, $array2, 'key_compare_func'));
    ?> 
```

# java - 使用 Spring MVC 将文件上传到服务器目录

> ID：14101558
> 
> 赞同：4
> 
> 时间：2012-12-31T12:21:45.930
> 
> 标签：java, spring, spring-mvc

我正在尝试将文件从客户端机器上传到服务器目录。我使用了以下代码：

文件上传.jsp

```
<form:form commandName="fileUpload" action="upload.action" method="post"  enctype="multipart/form-data">
<form:label path="fileData">Upload a File</form:label> <br />
<form:input type="file"  path="fileData" />
<input type="submit" value="upload" >
</form:form> 
```

在我的控制器中：

```
@RequestMapping("/upload.action")
public String upload(@ModelAttribute("fileUpload") FileUpload fileUpload,HttpServletResponse response,Model model)
{
    CommonsMultipartFile multipartFile = fileUpload.getFileData();
    String orginalName = multipartFile.getOriginalFilename();
    String filePath = "/my_uploads/"+orginalName;
    File destination = new File(filePath);
    String status ="success";
    try {
        multipartFile.transferTo(destination);
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        status="failure";
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        status="iofailure";
    }
    model.addAttribute("status", status);
    return "home";
} 
```

文件上传.java：

```
{
   private CommonsMultipartFile fileData;
   ....
} 
```

`NullPointerException`被扔在线上`String orginalName = multipartFile.getOriginalFilename();`..我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T12:27:29.963

尝试`MultipartFile`在您的请求处理程序中添加作为参数。

```
@RequestMapping("/upload.action")
public String upload(@RequestParam(value = "file") MultipartFile file,
        HttpServletResponse response,Model model)
{
    //Controller logic...
} 
```

这将要求您在调度程序的配置中注册一个新 bean。

```
<bean id="multipartResolver"
   class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <property name="maxUploadSize" value="5000000"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T12:44:35.847

```
@RequestMapping("/upload.action")
public String upload(@RequestParam("fileData") MultipartFile file,
        HttpServletResponse response,Model model)
{
    //Controller logic...
} 
```

您的请求处理程序方法的参数中应该有相同的名称，无论您在 FileUpload Pojo for multipartFile ("fileData") 中给出什么，它都应该在参数中

谢谢，

# php - set_include_path 致命错误：在文件中找不到类“MyClass”

> ID：14101560
> 
> 赞同：2
> 
> 时间：2012-12-31T12:21:54.837
> 
> 标签：php, set-include-path

我正在尝试使用 php 包含指向某个文件的自定义路径`set_include_path`。这是代码：

文件.php

```
<?php
    $path = 'classes/';
    set_include_path(get_include_path() . PATH_SEPARATOR . $path);
    $obj = new MyClass();
    $obj->methodCall();
?> 
```

这是我的根目录结构

```
www
|_webapp
       |_classes
               |_MyClass.php
       |_nbproject
       |_file.php 
```

当我执行脚本时，我得到的只是这个错误消息：`Fatal error: Class 'MyClass' not found in C:\wamp\www\webapp\file.php`. 我尝试使用包含文件`require`并且它可以工作，但我遇到了`set_include_path`. 有人知道我能做些什么吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:37:50.933

1.  您正在向全局包含路径添加相对路径。那是你的意图吗？
2.  您可能不包括`MyClass`定义类的文件。`set_include_path()`允许省略`require_once`语句中的路径，而不是省略语句本身。

我的印象是您想到的工具是[类 autoloader](http://php.net/manual/en/function.spl-autoload-register.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:27:07.293

您选择包含这种格式的方法 include 'path/filename.php'

# android - 在 Titanium for Android 中拉动刷新

> ID：14101561
> 
> 赞同：0
> 
> 时间：2012-12-31T12:21:58.960
> 
> 标签：android, titanium, appcelerator

怎么拉刷新？

在 Titanium appcelerator 中，我需要在 tableview 中显示内容列表。如果我拉视图，它需要更新。在 iPhone 中我完成了，但在 Android 中它不起作用。请任何人帮助解决Android中的这个问题。

我的安卓代码：-

```
tableView.addEventListener('scroll',function(e)
{
   var offset = e.contentOffset.y;
   if (offset < -65.0 && !pulling && !reloading)
   {
       var t = Ti.UI.create2DMatrix();
       t = t.rotate(-180);
       pulling = true;
       arrow.animate({transform:t,duration:180});
       statusLabel.text = "Release to refresh...";
   }
   else if((offset > -65.0 && offset < 0 ) && pulling && !reloading)
   {
       pulling = false;
       var t = Ti.UI.create2DMatrix();
       arrow.animate({transform:t,duration:180});
       statusLabel.text = "Pull down to refresh...";
   }    
});

tableView.addEventListener('dragEnd', function(e)
{

   if(pulling && !reloading)
   {
       reloading = true;
       pulling = false;
       arrow.hide();
       actInd.show();
       statusLabel.text = "Reloading...";
       tableView.setContentInsets({top:60},{animated:true});
       tableView.scrollToTop(-60,true);
       arrow.transform=Ti.UI.create2DMatrix();
       beginReloading();
   }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-27T01:48:57.597

Titanium 现在支持使用 Titanium.UI.TableView、Titanium.UI.ListView 或 Titanium.UI.ScrollView 对象为 Android (> v6.2.0) 和 iOS (>3.2.0) 拉动刷新。

请参阅文档：

*   [https://docs.appcelerator.com/platform/latest/#!/api/Titanium.UI.ListView](https://docs.appcelerator.com/platform/latest/#!/api/Titanium.UI.ListView)
*   [https://docs.appcelerator.com/platform/latest/#!/api/Titanium.UI.RefreshControl](https://docs.appcelerator.com/platform/latest/#!/api/Titanium.UI.RefreshControl)

从文档中获取的示例代码：

```
var win = Ti.UI.createWindow({
    fullscreen:true
});
var counter = 0;

function genData() {
    var data = [];
    for (var i=1; i<=3; i++) {
        data.push({properties:{title:'ROW '+(counter+i)}})
    }
    counter += 3;
    return data;
}

var section = Ti.UI.createListSection();
section.setItems(genData());

var control = Ti.UI.createRefreshControl({
    tintColor:'red'
})

var listView = Ti.UI.createListView({
    sections:[section],
    refreshControl:control
});

control.addEventListener('refreshstart',function(e){
    Ti.API.info('refreshstart');
    setTimeout(function(){
        Ti.API.debug('Timeout');
        section.appendItems(genData());
        control.endRefreshing();
    }, 2000);
})

win.add(listView);
win.open(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T17:22:50.013

这只是 Kitchen Sink 示例中的 IOS 代码吗？

有几次尝试让它在 Android 上运行，但我还没有确认它们中的任何一个都能按预期工作。据我了解，问题在于您无法在 Android 中以与在 IOS 中相同的方式获得偏移量。

一个快速的谷歌搜索出现了这个链接，这个链接是从官方 Appcelerator 论坛引用的。 [https://gist.github.com/903895](https://gist.github.com/903895)

# objective-c - 在 Twitter for iOS 中缓存数据的方式。NSUserDefaults？还是 SQLite？

> ID：14101568
> 
> 赞同：3
> 
> 时间：2012-12-31T12:23:01.467
> 
> 标签：objective-c, caching

我可以在没有互联网连接的情况下看到 Twitter 时间线，当然，不能重新加载最新数据。

我猜这是因为缓存数据。

但是，采取了什么方法？NSUserDefaults？SQLite？

请让我知道好的解决方案或更有效的方法。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T12:43:16.423

我不知道 Twitter 应用程序是如何做到的，但对于 RESTful Web 服务，我推荐[RestKit](https://github.com/RestKit/RestKit)。它可以使用 Core Data 为您缓存请求以实现持久性。

# javascript - 超时后重新打开 Chrome 时，Chrome 扩展警报会响起吗？

> ID：14101569
> 
> 赞同：5
> 
> 时间：2012-12-31T12:23:04.557
> 
> 标签：javascript, google-chrome, google-chrome-extension, dom-events, alarm

使用 Google Chrome 扩展程序警报时，如果设置了警报并且 Chrome 关闭并在警报时间到期后重新打开，则警报将响起。

我怎样才能阻止这个？

这是一个小代码示例来解释我的意思。

```
/* 
If we perform Browser Action to create alarm, then 
close the browser, wait about 2 minutes for the alarm to expire
and then reopen the browser, the alarm will go off and the DoSomething 
function will get called twice, once by the onStartup event and once
by the onAlarm event.
*/
chrome.browserAction.onClicked.addListener(function (tab) {
    chrome.alarms.create('myAlarm', {
        delayInMinutes : 2.0
    });
});

chrome.alarms.onAlarm.addListener(function (alarm) {
    console.log('Fired alarm!');
    if (alarm.name == 'myAlarm') {
        createListener();
    }
});

chrome.runtime.onStartup.addListener(function () {
    console.log('Extension started up...');
    DoSomething();
});

function DoSomething() {
    alert('Function executed!');
} 
```

因此，如果您阅读我的代码示例顶部的注释，您将看到会发生什么。

不过，我想要的是，如果浏览器关闭，警报会被清除，因为我希望`DoSomething`函数仅在浏览器刚刚启动时由`onStartup`事件执行，并让警报`DoSomething`仅在浏览器启动后执行功能，并且我的代码创建了一个新警报。

我从不希望在浏览器关闭后留下警报，然后`onAlarm`在重新打开浏览器时执行。

怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T13:48:20.020

Chrome 扩展程序无法在浏览器关闭时可靠地运行某些代码。

与其在关机时清理，不如确保在启动时不运行旧警报。这可以通过生成唯一的（会话）标识符来实现。

如果您使用的是事件页面，请将标识符存储在[`chrome.storage.local`](http://developer.chrome.com/extensions/storage.html)（不要忘记`storage`在清单文件中设置权限）。否则，将其存储在全局范围内。

```
// ID generation:
chrome.runtime.onStartup.addListener(function () {
    console.log('Extension started up...');
    chrome.storage.local.set({
        alarm_suffix: Date.now()
    }, function() {
        // Initialize your extension, e.g. create browser action handler
        // and bind alarm listener
        doSomething();
    });
});

// Alarm setter:
chrome.storage.local.get('alarm_suffix', function(items) {
    chrome.alarms.create('myAlarm' + items.alarm_suffix, {
        delayInMinutes : 2.0
    });
});

// Bind alarm listener. Note: this must happen *after* the unique ID has been set
chrome.alarms.onAlarm.addListener(function(alarm) {
    var parsedName = alarm.name.match(/^([\S\s]*?)(\d+)$/);
    if (parsedName) {
        alarm.name = parsedName[0];
        alarm.suffix = +parsedName[1];
    }
    if (alarm.name == 'myAlarm') {
        chrome.storage.local.get('alarm_suffix', function(data) {
            if (data.alarm_suffix === alarm.suffix) {
                doSomething();
            }
        });
    }
}); 
```

如果你使用的**不是**事件页面，而是普通的后台页面，只需全局存储变量即可（优点：id读/写变为同步，需要的代码更少）：

```
chrome.runtime.onStartup.addListener(function () {
    window.alarm_suffix = Date.now();
});
chrome.alarms.create('myAlarm' + window.alarm_suffix, {
    delayInMinutes : 2.0
});
chrome.alarms.onAlarm.addListener(function(alarm) {
    var parsedName = alarm.name.match(/^([\S\s]*?)(\d+)$/);
    if (parsedName) {
        alarm.name = parsedName[0];
        alarm.suffix = +parsedName[1];
    }
    if (alarm.name == 'myAlarm') {
        if (alarm.suffix === window.alarm_suffix) {
            doSomething();
        }
    }
}); 
```

或者只是使用好的旧`setTimeout`的来实现相同的目标而没有副作用。

```
setTimeout(function() {
    doSomething();
}, 2*60*1000); // 2 minutes 
```

# php - 具有多个变量的表单重定向

> ID：14101570
> 
> 赞同：0
> 
> 时间：2012-12-31T12:23:22.390
> 
> 标签：php

当表单元素出现错误时，我发现了一个关于表单重定向的[精彩示例。](http://phptutorial.codepoint.net/php_redirection)在validation.php 中，系统检查是否有错误，如果是真的，它会将用户重定向到表单页面。我的问题是如果我有多个表单元素怎么办？

如您所见，我将 user_name 重命名为 app_name 并添加了一个新变量（adtext），所以现在当两个表单元素都有错误（现在它们不等于某个单词）时，我会收到两条错误消息，但我不知道是什么与 $query_string 变量有关，因此 url 将包含第二个变量及其值。

这是当我单击提交按钮并且 $appname 出现错误时表单页面 (adparameters.php) 的 url 的样子：

/adparameters.php?appname=aa&error=App%20name%20is%20requiredAd%20text%20is%20required

```
<?php
# validate.php

$appname = trim($_POST['appname']);
$adtext = trim($_POST['adtext']);
$error = '';

if ($appname != 'myapp') $error = 'App name is required<br />';
if ($adtext != 'mytext') $error = $error . 'Ad text is required<br />';

$query_string = '?appname=' . $appname;

$server_dir = $_SERVER['HTTP_HOST'] . rtrim(dirname($_SERVER['PHP_SELF']), '/\\') . '/';

header('HTTP/1.1 303 See Other');

if ($error != '') {

   // Back to register page
   $next_page = 'adparameters.php';

   // Add error message to the query string
   $query_string .= '&error=' . $error;

   // This message asks the server to redirect to another page
   header('Location: http://' . $server_dir . $next_page . $query_string);
}
// If Ok then go to confirmation
else $next_page = 'confirmation.php';

/*
Here is where the PHP sql data insertion code will be
*/
// Redirect to confirmation page
header('Location: http://' . $server_dir . $next_page . $query_string);
?> 
```

这段代码的伟大之处在于，如果我在第一个输入类型对象中键入了一些内容并且它不等于“myapp”，那么重定向后它仍然会填充文本。这也是我想要的第二个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:32:56.730

最佳做法是在 $_SESSION 中发送它们。

```
session_start();
$_SESSION['form'] = array();
$_SESSION['form']['myapp'] = 'App Error Code';
$_SESSION['form']['adtext'] = 'AdText Error Code'; 
```

然后在新页面上你会得到一个数组的值；

```
session_start();
$form_error =  $_SESSION['form']['myapp'];
$form_error =  $_SESSION['attext']['myapp']; 
```

如果您坚持使用 GET 参数，为什么不将它们附加到`&`字符上。

```
?field1=one&field2=two 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-31T12:40:42.817

我不会像你那样做，但如果你想要那样做，只需改变一些事情

```
 if ($appname != 'myapp') $error = 'App name is required<br />';
  if ($adtext != 'mytext') $error .= 'Ad text is required<br />';//note contatenation

   $query_string = '?appname=' . $appname .'&addtext='.$adtext; 
```

# android - 从 url 下载图像并将其保存在 arraylist 中

> ID：14101571
> 
> 赞同：0
> 
> 时间：2012-12-31T12:23:22.577
> 
> 标签：android, image, bitmap, httpconnection

在我的应用程序中，我有一个图像 url 的 Arraylist，必须将其下载为位图并保存在另一个 Arraylist 中，以便我可以将它们设置为 mapview 中的地图标记。我的代码是

```
for( int i=0 ; i < Get_Feed_image.size() ; i++)
{
    Get_Feed_image_bitmap.add(DownloadImage(Get_Feed_image.get(i)));
} 
```

还有我的 DownloadImage 方法：

```
private Bitmap DownloadImage(String URL) 
    {
        Bitmap bitmap = null;
        InputStream in = null;
        try 
        {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        }
        catch (IOException e1) 
        {
            e1.printStackTrace();
        }
        return bitmap;
    }

    private InputStream OpenHttpConnection(String urlString) throws IOException 
    {
        InputStream in = null;
        int response = -1;

        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();

        if (!(conn instanceof HttpURLConnection))
            throw new IOException("Not an HTTP connection");

        try 
        {
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();

            response = httpConn.getResponseCode();
            if (response == HttpURLConnection.HTTP_OK) 
            {
                in = httpConn.getInputStream();
            }
        }
        catch (Exception ex) 
        {
            throw new IOException("Error connecting");
        }
        return in;
    } 
```

我得到 Logcat 作为，

```
12-31 17:29:43.269: E/AndroidRuntime(14572): FATAL EXCEPTION: AsyncTask #5
12-31 17:29:43.269: E/AndroidRuntime(14572): java.lang.RuntimeException: An error occured while executing doInBackground()
12-31 17:29:43.269: E/AndroidRuntime(14572):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at java.lang.Thread.run(Thread.java:1019)
12-31 17:29:43.269: E/AndroidRuntime(14572): Caused by: java.lang.NullPointerException
12-31 17:29:43.269: E/AndroidRuntime(14572):    at com.live.Feed.DownloadImage(Feed.java:279)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at com.live.Feed.access$1(Feed.java:271)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at com.live.Feed$Startsyntask.doInBackground(Feed.java:383)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at com.live.Feed$Startsyntask.doInBackground(Feed.java:1)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
12-31 17:29:43.269: E/AndroidRuntime(14572):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
12-31 17:29:43.269: E/AndroidRuntime(14572):    ... 4 more 
```

我得到我的力量关闭`in.close();`

如果有最少的图像，我的意思是数组中的 url 最少，它工作正常。或者，如果我的网络非常快，它可以正常工作。否则我会强制关闭。

建议我解决这个问题，在此先感谢。. . .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:43:10.870

您在执行 Asynctask 时遇到错误，您的代码没有做正确的工作。

尝试使用库，尝试[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。

或者这个[http://android-developers.blogspot.com.br/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.com.br/2010/07/multithreading-for-performance.html)，它有一个教程和一个演示代码，我已经测试并在所有 API 中完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:43:30.610

您应该在一个 finnaly 块中关闭您的 Inputstream，以确保它会关闭。

您还应该在 ifclause 中返回 OpenHTTPConnection 的 InputStream，否则抛出异常，这样您可以确定连接已打开并且正常，因为您这样做也可能返回 null，这可能会导致您的问题。

尝试一下并提供一些反馈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:31:47.960

而不是准备`ArrayList<Bitmap>`，你应该只管理`ArrayList<String>`ie Urls

**为什么要管理 ArrayList？如何？**

您应该使用图像缓存算法，以便一旦下载图像，它将被缓存并在需要时从缓存中加载。实际上很容易管理。

# java - 如何从字符串中获取日期对象

> ID：14101576
> 
> 赞同：5
> 
> 时间：2012-12-31T12:23:49.677
> 
> 标签：java, date, datetime, simpledateformat

```
DateFormat formatter = new SimpleDateFormat("MM/dd/yyyy' 'HH:mm:ss");
Date d = (Date)formatter.parse(dateTime);
System.out.println("date in controller "+d); 
```

我得到的输出为

> 控制器中的日期 Mon Dec 31 16:04:57 IST 2012

请建议一种以`MM/dd/yyyy HH:mm:ss`格式输出日期的方法。需要日期格式的输出而不是字符串，以便将输出存储`datetime`在 mysql db 的字段中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:54:41.460

```
Need the output in date format and not as string so as to store the output in datetime field in mysql db 
```

声明后

```
Date d = (Date)formatter.parse(dateTime);
java.sql.Date sqldate = new java.sql.Date(d.getTime()) 
```

你有一个`java.util.Date`对象，**你可以将它存储在 mysql DB 中**（列类型：日期时间）。

但是，当您打印时`d`，它默认为`.toString()`实现。我认为您期望像 Date@ 这样的输出，但 toString 以用户可读格式打印，这就是混淆的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:27:09.490

您正在使用类`d`的对象`Date`，因此`toString`调用它的方法，输出为`Mon Dec 31 16:04:57 IST 2012`.

如果您想以您指定的格式显示它，请`SimpleDateFormat`尝试使用：

```
DateFormat formatter = new SimpleDateFormat("MM/dd/yyyy' 'HH:mm:ss");
Date d = (Date)formatter.parse(dateTime);
System.out.println("date in controller "+ formatter.format(d)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T12:34:48.720

不明白为什么在格式字符串中使用单引号（'），您还需要 catch `ParseException`：

```
DateFormat formatter = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
Date d = new Date();
try {
    d = (Date)formatter.parse("12/31/2012 12:13:14");
} catch(ParseException pex) { System.out.println(pex.getMessage()); }
// convert the date into java.sql.Date
java.sql.Date sqldate = new java.sql.Date(d.getTime());
// then put it in the database, something like this:
//resultSet.updateDate("myDateTimeField", sqldate); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T12:29:30.810

```
SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy' 'HH:mm:ss");
System.out.println("date in controller"+ df.format(d)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T12:34:12.747

尝试使用格式而不是解析。

```
Date date = new Date();
String DATE_FORMAT = "MM/dd/yyyy";      
SimpleDateFormat sdf = new SimpleDateFormat(DATE_FORMAT);        
System.out.println("Today is " + sdf.format(date) ); 
```

# android - 发送短信时出现空指针异常、Parcel.ReadException？

> ID：14101577
> 
> 赞同：4
> 
> 时间：2012-12-31T12:23:54.200
> 
> 标签：android, sms

我正在开发一个我必须使用 SMS 服务的应用程序。当我尝试发送短信时，出现以下奇怪的异常。有时 SMS 发送得非常好，但有时我会收到此异常。我不知道问题出在哪里。以下是我的代码：

```
 String messageText = Util.getSMSText(myActivity.this, Util.CurrentLocation);
 messageText += "http://maps.google.com/maps?q=" + locationInfo.getLat() + "," + locationInfo.getLng();
 String number = guardian.getGuardianNumber();
 SmsManager smsManager = SmsManager.getDefault();
 smsManager.sendTextMessage(number, null, text, null, null); 
```

以下是跟踪：

```
12-22 21:03:59.325: W/System.err(8140):     java.lang.NullPointerException
12-22 21:03:59.325: W/System.err(8140):     at android.os.Parcel.readException(Parcel.java:1328)
12-22 21:03:59.325: W/System.err(8140):     at android.os.Parcel.readException(Parcel.java:1276)
12-22 21:03:59.325: W/System.err(8140):     at com.android.internal.telephony.ISms$Stub$Proxy.sendTextOnSubscription(ISms.java:1096)
12-22 21:03:59.325: W/System.err(8140):     at android.telephony.SmsManager.sendTextMessage(SmsManager.java:149)
12-22 21:03:59.325: W/System.err(8140):     at android.telephony.SmsManager.sendTextMessage(SmsManager.java:89)
12-22 21:03:59.335: W/System.err(8140):     at com.invocode.sms.SMSManager.sendSMS(SMSManager.java:12)
12-22 21:03:59.335: W/System.err(8140):     at com.invocode.ui.iamhere.myActivity$2$2.onClick(myActivity.java:205) 
```

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:25:35.883

当我尝试使用测试产品进行应用内计费时，我遇到了类似的错误，但我的草稿版本尚未上市。

我在想的是操作系统无法绑定您的服务。碰巧您正在使用的服务是基于操作系统的联系信息服务，但您尝试使用的服务无法有效访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:55:40.113

我认为问题在于您的字符串的编码......这里有同样的问题。我正在测试，当我发送一个简单的字符串作为“asadsdasd”时我没有收到错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T22:11:24.777

我找到了另一个收到此消息的原因。如果您在消息中使用非 ascii 字符（例如 U+02BC），也会抛出此 NPE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T16:05:56.063

如果短信发送号码为空，它可以来。

# ruby-on-rails - 设计和如何避免发送确认信

> ID：14101579
> 
> 赞同：1
> 
> 时间：2012-12-31T12:23:55.303
> 
> 标签：ruby-on-rails, devise

我想跳过自动发送确认信。我想手动做吗？用户注册自己，如果他填写注册表单，姓名，姓氏，电子邮件，密码。验证用户后的站点管理员，手动将电子邮件发送到他的电子邮件。除非您确认电子邮件，否则他无法使用“请确认电子邮件”消息登录。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:32:17.733

从用户模型中删除设计：confirmable，激活用户帐户的确认过程将被删除。但这将允许用户在注册后登录。因此，您必须进行自己的验证。

您可以编写自己的方法来发送邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:39:29.063

致电**skip_confirmation！**在保存记录之前。

```
@user.skip_confirmation!
@user.save 
```

跳过自动发送确认电子邮件

并调用**send_confirmation_instructions**

```
@user.send_confirmation_instructions 
```

手动发送确认

# jquery - 从数组中读取 x 和 y 值后，需要使用 JQuery 绘制折线图。

> ID：14101581
> 
> 赞同：0
> 
> 时间：2012-12-31T12:24:21.857
> 
> 标签：jquery

我的价值观是以下形式：

```
arr = [{10:20:00, 75.35}, {10:21:00,80.30}, {10:22:00, 78.54},...} 
```

想要用这些值绘制折线图。我是 JQuery 的新手。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:46:22.480

jquery 图表示例[http://codeblitz.wordpress.com/2009/06/22/jquery-charts/](http://codeblitz.wordpress.com/2009/06/22/jquery-charts/)

您还可以使用 jqplot 绘制图形 [http://www.jqplot.com/](http://www.jqplot.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:35:16.413

我过去曾使用[http://www.highcharts.com](http://www.highcharts.com)绘制不同类型的图表。[在http://www.highcharts.com/demo/](http://www.highcharts.com/demo/)上查看他们的演示页面和“在 jfiddle 中编辑”，以了解如何使用您的数据绘制图表。

# bitmap - 在android中显示图像拇指的最佳方式是什么？

> ID：14101582
> 
> 赞同：1
> 
> 时间：2012-12-31T12:24:29.047
> 
> 标签：bitmap, imageview

我创建了一个应用程序，我在其中从 Internet 下载图像并在活动中逐页显示它。

用户要求是在活动底部显示每个图像拇指。

**所以我使用这段代码创建了拇指。**

```
/**
     * Method for decode Sampled Bitmap From Resource for thumb image.
     * 
     * @param fileName
     * @param reqWidth
     * @param reqHeight
     * @return Bitmap
     */
    public Bitmap decodeSampledBitmapFromResource(String fileName,int reqWidth, int reqHeight) 
    {

        String imagePath = fileName;        

        @SuppressWarnings("unused")
        File imgFile = new File(imagePath);

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(imagePath,options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        generalHelperbitmap = BitmapFactory.decodeFile(imagePath,options);

        return generalHelperbitmap;
    } 
```

**但我的问题是；这是显示拇指的最佳方式吗？**

是否有另一种方法可以下载主图像并以新的**smallwidth**和新的**smallheight**显示这些页面？

在这个问题中，我从 Internet 下载图像并解码为位图并逐页显示此图像。

有人可以告诉我哪个是显示**图像和拇指**的最佳方式吗？

当我下载大于 50 的图像列表时，应用程序的性能很慢，当我更改设备方向时，应用程序的性能更慢。

任何帮助表示赞赏！

# objective-c - UIBarButtonItem 图像（或 UIToolbar 自定义背景图像？..）比原始图像更暗（或更亮？..）

> ID：14101583
> 
> 赞同：4
> 
> 时间：2012-12-31T12:24:34.603
> 
> 标签：objective-c, ios, xcode, cocoa-touch, uibarbuttonitem

我想在 XCode 中为 UIToolbar（和 UIToolbar 的自定义背景颜色）创建自定义按钮。

到目前为止，我是这样完成的：创建 UIButton，然后为其设置图像，然后将其拖到 UIToolbar。在此之后它变成了 UIBarButtonItem，但它仍然有一个图像，所以对我来说没问题。

问题是，由于某种原因，按钮的图像变得比原始图像更暗（我可以看到它，因为我的工具栏背景与按钮的背景完全相同），但是当我按下按钮时，我看到它的图像变成了原始图像 -喜欢，然后在一秒钟后转回更暗的那个。

我已经尝试按照这个问题中所说的那样做：[UIButton 中的图像比原始图像更暗](https://stackoverflow.com/questions/10474536/image-in-uibutton-is-darker-tharn-original)，在 XCode 中设置突出显示的图像，但在此之后它完全停止了“更改为原始图像”。

那么，我该如何解决呢？如果 XCode 有办法做到这一点，我真的不想在代码中引入一些这样的 GUI 东西......任何帮助将不胜感激。

**编辑：**

这是正在发生的事情的屏幕截图：

![工具栏和栏项的截图](../Images/af86f77bfaf05c83108b3d5340e1d49f.png)

这就是工具栏背景+按钮图像组合的样子：

![在此处输入图像描述](../Images/b96e00f01e7926dab8b4c80ff31eaa87.png)

现在我用这样的代码做到了：

```
@implementation UIBarButtonItem (CustomView)
+ (UIBarButtonItem*) barItemWithImage:(UIImage *)image target:(id)target action:(SEL)action
{    
    UIButton* button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.bounds = CGRectMake(0, 0, image.size.width, image.size.height);
    [button setImage:image forState:UIControlStateNormal];
    [button addTarget:target action:action forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem* item = [[self alloc] initWithCustomView:button];
    return item;
}
@end 
```

和调用代码：

```
UIBarButtonItem *item =[UIBarButtonItem barItemWithImage:[UIImage imageNamed:@"settings"] target:nil action:nil];
[self.bottomBar setItems:@[item]]; 
```

对于工具栏背景，我使用以下代码：

```
[[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"toolbar_background"]
                        forToolbarPosition:UIToolbarPositionAny
                                barMetrics:UIBarMetricsDefault]; 
```

问题还是一样...

**编辑2：**

哇，看起来实际上 UIToolbar 比原来的要轻...

**编辑 3：**

好。创建了新项目并测试了 XCode 故事板方式（使用 UIButton），工作正常……这对我来说是个谜，完全迷失在这里。这里需要对可能的原因进行一些认真的澄清：我当前的项目很大，我无法在这里发布所有代码......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:38:41.987

好吧，既然没有人回答，我只会说我创建了一个新项目并且问题消失了。

但它再次发生，我完全不知道为什么。我做了一件非常懒惰和糟糕的事情，并在某些图像编辑器中为那个不幸的按钮更改了图像亮度 =D

# android - Opentok api在android中的使用

> ID：14101590
> 
> 赞同：0
> 
> 时间：2012-12-31T12:25:29.953
> 
> 标签：android

我想为安卓使用 OpenTok API。我在 github 上找到了示例。并导致一些异常，例如。1.我的视频没有发布。2.我收到流但无法观看。3.pulisher.create(); 导致异常。

这仅适用于果冻豆操作系统吗？如何为较低版本实现它。我在我的nexus s jellybean 上使用它更新。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:30:20.093

这是 OpenTok 的 Android 存储库。根据他们的自述文件，支持的设备是：

连结 4 连结 7 连结 10 银河 S3

操作系统的要求是 Jelly Bean 及更高版本。

实时视频流是 CPU 密集型的，低端设备没有 CPU 能力来处理会话中的流的多个视频处理，并且无法运行 OpenTok 的 SDK。

# vb.net - 将枚举作为参数传递 - 作为字典（字符串，枚举）（VB 2012）

> ID：14101600
> 
> 赞同：0
> 
> 时间：2012-12-31T12:26:37.160
> 
> 标签：vb.net, types, dictionary, parameters, enums

这可能是不可能的或有点错误，但是在 WinForms 中，我有需要填充特定选项的组合框。该项目使用了大约 10 种不同的表单，所有表单都具有相似但略有不同的功能：因此我不只使用一种表单并根据需要隐藏/显示控件。

现在，我制作了一个简单的选项字典，并使用 Enum 输入值。现在我意识到我有重复的代码并想合并它。选项集是日期顺序和名称顺序，但我还有一两个要列出。

这是我尝试过但无法将字典传递到：

```
 Public Sub BuildOrderOptions(nameorder As ComboBox, Options As Dictionary(Of String, [Enum]))

    nameorder.Items.Clear()

    For Each item In Options
        nameorder.Items.Add(item)
    Next
    nameorder.DisplayMember = "Key"
    nameorder.ValueMember = "Value"
End Sub

Property NameOrderOptions As New Dictionary(Of String, PersonList.orderOption) From {{"First Name", PersonList.orderOption.FirstName},
                                                                                   {"Last Name", PersonList.orderOption.LastName},
                                                                                   {"Room Number", PersonList.orderOption.RoomNumber}}

Property DateOrderOptions As New Dictionary(Of String, OrderDate) From {{"Newest First", OrderDate.NewestFirst}, {"Oldest First", OrderDate.OldestFirst}} 
```

我已经尝试了 Type 和 [enum].getnames 等的一些变体，但我根本无法传递不同的字典类型 - 我认为我现在已经使整个业务过于复杂，但我觉得我错过了一个优雅的解决方案. 很快，我要么单独转换回字符串匹配，要么只为每个盒子类型提供函数——邪恶的重复，但我可以继续。

我是否认为有更好的方法可以做到这一点？除非我只是为选项定义某种全局资源，否则全局资源很糟糕，对吧？

编辑：感谢史蒂文修复。如果有人发现它有用或更好，任何人都可以批评并做得更好，这是所有表单都可以用来生成选项的模块代码。

```
Public Sub BuildOrderOptions(nameorder As ComboBox, Options As IDictionary)
    nameorder.Items.Clear()
    For Each item In Options
        nameorder.Items.Add(item)
    Next
    nameorder.DisplayMember = "Key"
    nameorder.ValueMember = "Value"
End Sub

Property NameOrderOptions As New Dictionary(Of String, orderOption) From {{"First Name", orderOption.FirstName},
                                                                                   {"Last Name", orderOption.LastName},
                                                                                   {"Room Number", orderOption.RoomNumber}}

Property DateOrderOptions As New Dictionary(Of String, OrderDate) From {{"Newest First", OrderDate.NewestFirst}, {"Oldest First", OrderDate.OldestFirst}}

Property personStatusOptions As New Dictionary(Of String, personStatus) From {{"Active", personStatus.Active},
                                                                                  {"InActive", personStatus.InActive},
                                                                                  {"All", personStatus.All}}

Public Sub BuildComboBoxes(ListBoxes As Dictionary(Of ComboBox, IDictionary))
    For Each pair In ListBoxes
        BuildOrderOptions(pair.Key, pair.Value)
    Next
End Sub

Public Enum OrderDate
    OldestFirst
    NewestFirst
End Enum

Public Enum personStatus
    Active
    InActive
    All
End Enum

Public Enum orderOption
    None
    FirstName
    LastName
    RoomNumber
End Enum 
```

这就是我使用一个表单的方式——是的，我可以有一堆参数或多个函数调用：我只是喜欢有一个对象给我一个参数来传递。

```
 BuildComboBoxes( New Dictionary ( Of ComboBox , IDictionary ) From {{NameOrder, NameOrderOptions},
                                                                   {DateOrder, DateOrderOptions},
                                                                   {personStatus, PersonStatusOptions}}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:34:58.097

您只需要更改您的方法以接受任何`IDictionary`对象而不是特定类型的字典：

```
Public Sub BuildOrderOptions(nameorder As ComboBox, Options As IDictionary) 
```

当您使用泛型时，例如`Dictionary(Of TKey, TValue)`，泛型类型根本不是真正的类型。您可以将其视为任意数量特定类型的模板。因此，每次使用不同类型参数的泛型类型时，它们都是完全不同且不兼容的类型。例如：

```
' This works fine because both d1 and d2 are exactly the same type
Dim d1 As New Dictionary(Of String, String)()
Dim d2 As Dictionary(Of String, String) = d1

' This will not compile because d1 and d2 are completely different types
Dim d1 As New Dictionary(Of String, Integer)()
Dim d2 As Dictionary(Of String, Boolean) = d1 
```

正如您所发现的，即使您尝试使用基类作为泛型类型参数，两者仍然不兼容。所以，即使`Stream`是 的基类`MemoryStream`，你仍然不能这样做：

```
' This will not compile because d1 and d2 are completely different types
Dim d1 As New Dictionary(Of String, MemoryStream)()
Dim d2 As Dictionary(Of String, Stream) = d1 
```

# vb.net - 如何使用 Linq 从数据集中的一列创建两列？

> ID：14101604
> 
> 赞同：1
> 
> 时间：2012-12-31T12:27:16.037
> 
> 标签：vb.net, linq, dataset

我有一个 DataSet，它在 VB.NET 中有一个 Balance 列。我想根据它们是正值还是负值将其分解为借方和贷方列。我正在从不支持 CASE、IF 和 UNION 的专用 ODBC 连接构建数据集。因此，我将不得不一次将所有数据检索到 DataSet 中，然后操作 DataSet

我是 Linq 的新手，所以任何提示都将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:18:42.953

您正在谈论 LINQ 术语中的投影。LINQ 语句的 Select 部分用于指定查询返回的内容。我从来没有以这种方式使用它来返回数据集，而是返回 POCO。

# iphone - 在 iOS 5 和 iPhone 3gs 中，glDrawElements 成功。但是在带有 iPhone 5 的 iOS 6 中，它会引发崩溃

> ID：14101607
> 
> 赞同：1
> 
> 时间：2012-12-31T12:27:40.737
> 
> 标签：iphone, opengl-es, ios6, crash, exc-bad-access

我在 iOS 5.1 的 iPhone 3GS 中开发了一个 OpenGL ES 2.0 程序。它使用`glDrawElements`OpenGL函数。

在 iPhone 3GS 中，此代码成功返回。但是在带有 iOS 6.0.2 的 iPhone 5 中，抛出`EXEC_BAD_ACCESS`.

我不知道为什么。我用索引调用 glDrawElements。小规模网格数据在 iPhone 3gs 和 iPhone 5 中都得到了很好的处理。但大规模网格数据在 iPhone 5 中是失败的。

`EXEC_BAD_ACCESS`被扔进“ `gleRunVertexSubmitARM`”

给我看看提示。

下面是代码。帮我。

```
glEnable(GL_DEPTH_TEST);
glEnableVertexAttribArray(_positionSlot);
glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE ,0, (void*)&mesh2->vertices[0][0]); // ES 2.0

glEnableVertexAttribArray(_normalSlot);
glVertexAttribPointer(_normalSlot, 3, GL_FLOAT, GL_FALSE ,0, (void*)&mesh->normals[0][0]); // ES 2.0

glDrawElements(GL_TRIANGLES, mesh2->faces.size()*3,GL_UNSIGNED_SHORT, &mesh2->faces[0].indices[0]); // <= Crash in iPhone5. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T15:37:38.087

我已经解决了这个问题。有问题的代码是完美的。我发现 glDisableVertexAttribArray 在其他源代码中的 glEnableVertexAttribArray 之后没有成对调用。我修好了，运行良好。谢谢你。

# mysql - MySql 多表查询

> ID：14101609
> 
> 赞同：1
> 
> 时间：2012-12-31T12:28:00.483
> 
> 标签：mysql

我想知道是否有任何人可以帮助我理解我要解决的问题。

我正在开发一个 wordpress 网站，但这更像是一个 sql 问题，因为我只是在查询以在模板文件中获取一些结果。

我有一个图片库，它们是广告框，我需要根据提供的电影名称提取这些图片，为此我在广告图片上使用了一些名为“adlink”（链接关闭广告）和广告的自定义字段

我正在使用 nextgen 库插件并查询这些表，我总共有三个表，其中包含我需要查询的数据。

ngg_pictures、nggcf_field_values 和 nggcf_fields。

nggcf 表是自定义字段表，

到目前为止，我可以在两个单独的查询中得到我需要的东西，但是我不能将它们组合成一个查询，因为这意味着查询 nggcf_field_values 表两次，我似乎无法对其进行排序。

我已经硬编码了 mo 中的搜索条件，但是“close-encounters”位将是一个传递的 var，而“156”将是第一个查询的 pid。

```
SELECT `eg_ngg_pictures`.`filename`, `eg_nggcf_field_values`.`fid`, `eg_nggcf_field_values`.`pid`
FROM eg_ngg_pictures, eg_nggcf_field_values
WHERE ((`eg_nggcf_field_values`.`field_value` LIKE 'close-encounters') AND (`eg_nggcf_field_values`.`pid` = eg_ngg_pictures.pid))

SELECT `eg_nggcf_field_values`.`field_value`
FROM eg_nggcf_field_values, eg_nggcf_fields
WHERE ((`eg_nggcf_fields`.`field_name` = 'adlink') AND (`eg_nggcf_fields`.`id` = eg_nggcf_field_values.fid) AND (`eg_nggcf_field_values`.`pid`  = '156')) 
```

任何帮助将不胜感激，我可以得到我所拥有的结果，但我想了解如何将这两者结合起来并编写更好的 SQl。谢谢 MRO

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:56:16.640

查看[Wordpress 扩展](http://plugins.svn.wordpress.org/nextgen-gallery-custom-fields/tags/0.1/ngg-custom-fields.php)后，我认为这`eg_nggcf_fields`是包含自定义字段名称的表。该`eg_nggcf_field_values`表包含每张图片的自定义字段的值。

因此，如果您要查找名为`moviename`and的两个字段`adlink`，则必须在表中查找两行`field_values`。如果你给它一个不同的别名，你可以加入一个表两次：

```
select  pic.filename
,       pic.pid
,       fv1.field_value as MovieName
,       fv2.field_value as Adlink
from    eg_ngg_pictures pic
inner join -- Find ID for the field called 'moviename'
        eg_nggcf_fields f1
on      f1.field_name = 'moviename'
inner join -- Find value for field moviename for this picture
        eg_nggcf_field_values as fv1
on      fv1.pid = pic.pid
        and fv1.fid = f1.fid
inner join -- Find ID for the field called 'adlink'
        eg_nggcf_fields f2
on      f2.field_name = 'adlink'
inner join -- Find value for field adlink for this picture
        eg_nggcf_field_values as fv2
on      fv2.pid = pic.pid
        and fv2.fid = f2.fid
where   fv1.field_value like 'close-encounters' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:56:15.450

首先，我建议对 JOINing 表坚持现代 ANSI 语法，这意味着使用 JOIN 子句。

而不是使用：

```
FROM table1, table2 WHERE table1.id = table2.pid 
```

采用：

```
FROM Table 1 JOIN table2 ON table1.id = table2.id 
```

为简单起见，我还建议您使用别名表，因为这会使代码更具可读性。不必`egg_ngg_pictures`每次都写出来，您可以简单地引用您为其分配的别名。

最后，当您使用`LIKE`运算符时，通常会添加一个通配符（通常是`%`.ie`LIKE '%123'`或`LIKE '123%'`）。您似乎只寻找完整的匹配项，这意味着您可以坚持使用`=`，因为这应该会给您带来更好的性能。

现在要重写您的查询，我将使用以下内容：

```
SELECT 
    pic.filename
    , fieldval.fid
    , fieldval.pid
    , fieldval.field_value
FROM 
    eg_ngg_pictures pic
        JOIN eg_nggcf_field_values fieldval ON fieldval.pid = pic.pid
        JOIN eg_nggcf_fields fields ON fields.id = fieldval.fid
WHERE 
    ((fieldval.field_value = 'close-encounters') 
    AND fields.field_name = 'ad_link' 
```

请注意，我无法测试查询，因为我没有您的架构。但是通过将两个查询合并到一个查询中，使用“close_encounters”值检索到的 field_Values.PID 上的连接应该已经存在。

如果查询不起作用，请随意创建一个包含相关表和一些数据的 SQL fiddle，我会尝试让它与它一起工作。

# objective-c - segue后tableview上方的黑条

> ID：14101611
> 
> 赞同：2
> 
> 时间：2012-12-31T12:28:02.047
> 
> 标签：objective-c, ios, uitableview, uitabbarcontroller, storyboard

我有一个具有登录流程的应用程序。在此登录流程中，您可以在 iPhone 上记住您的登录名和密码。当我这样做并重新启动应用程序时，我的表格视图和导航栏之间出现了一个黑条。为了澄清你在这里看到我的故事板的截图。

![在此处输入图像描述](../Images/e369d2bd1db60315ad46f9b447a61df3.png) 你可以在这里看到问题的截图。

![在此处输入图像描述](../Images/fc6536a755d7e20811776e24f3269720.png) 那么这种情况什么时候发生。当我第一次启动应用程序并输入我的登录名和密码时。一切都好。但是当我将登录凭据保存在手机上时。并重新启动应用程序。它跳过登录屏幕并立即转到标签栏。就在那一刻，黑条出现了。

有谁知道问题可能是什么？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:47:14.990

不要跳过登录屏幕，只需检查登录是否已保存，然后显示添加视图（`Loading View`with `UIActivity indicator`），但在该视图的背景上使用用户保存凭据以再次登录。当您成功登录时，隐藏添加的`View`. 这肯定对你有帮助

# c# - 将数据直接上传/下载到 Sql Server

> ID：14101613
> 
> 赞同：1
> 
> 时间：2012-12-31T12:28:16.803
> 
> 标签：c#, asp.net, entity-framework, sql-server-2012

我正在开发一个服务器/客户端应用程序，其中客户端能够上传/下载文件，该文件将作为 varbinay(max) 存储在 SQL Server (2012) 中。问题是我希望将文件直接上传到数据库而不将文件保存在服务器的硬盘上，使用 ReadAllBytes 方法，它只接受一个路径参数。

这是服务器端使用的代码片段：

```
HttpPostedFile file1 = context.Request.Files[0];
            byte[] buffer = new byte[file1.ContentLength];
            file1.InputStream.Read(buffer, 0, file1.ContentLength); 
```

这是用户代码，以便从数据库中的数据写入文件：

```
foreach (var file in list)
{
    System.IO.File.WriteAllBytes(path + file.FileName, file.FileContents);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:29:58.410

它`HttpPostedFile`带有一个可以读取的输入流。将其读入字节数组，然后将其存储在数据库中。或者，如果您的数据库接口（在 EF 的情况下这不太可能）直接接受流，只需按原样放入，

请注意，如果文件很大，ASP.NET（或者是 IIS？）可能会将文件上传临时存储在磁盘上。

# c# - 仅显示 datagridview 中的过滤列

> ID：14101614
> 
> 赞同：0
> 
> 时间：2012-12-31T12:28:34.697
> 
> 标签：c#

我是新手和学生，我有一个 Windows 窗体，其中有一个 datadrid 视图。我在 sql server 中有表，我已经与数据网格绑定，在表中有一个 3 列，其中一列名为小日期时间数据类型的日期，我只是将数据网格视图绑定到表，它正在显示我要过滤的三列的所有行。我有三列，第一列是“姓名”，第二列是“姓氏”，第三列是“日期”日期包含 smalldatetime 数据类型，我想显示所有三列，但如果列的“日期”列为 30/12/12日期是 2012 年 12 月 31 日表示上一个日期的记录抱歉解释不好我英语很弱我不知道在这里使用什么我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:46:49.833

您可以使用以下选择语句：

```
SELECT name, surname, dateColumn FROM TBLNAME WHERE where
  CONVERT(DATE,dateColumn) =DATEADD(DAY,DATEDIFF(DAY,1,GETDATE()),0) 
```

请相应地替换您的列和表名

# java - 如何将远程节点添加到网格增益？

> ID：14101618
> 
> 赞同：0
> 
> 时间：2012-12-31T12:28:49.173
> 
> 标签：java, mapreduce, gridgain

我是 Gridgain 的新手，我想知道如何将远程节点添加到程序中。是否有一些配置文件。我在指南中的任何地方都没有看到明确的示例。（我见过的最糟糕的指南）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:03:42.703

默认情况下，GridGain 使用多播发现，因此，如果多播在您的网络中工作，节点应该自动找到彼此。

如果默认设置不起作用，您可以配置备用多播组地址。

您还可以使用 IP 地址和端口列表配置 TCP 发现，节点可以在其中启动。这使您可以更好地控制发现过程，如果多播发现不起作用，这也是一个不错的选择。

还有其他发现方式（包括共享 FS 和 Amazon S3）。检查`GRIDGAIN_HOME/config/default-spring.xml`示例（搜索“发现”）。另外，看看[GRIDGAIN_HOME/examples/config/spring-cache.xml](https://github.com/gridgain/gridgain/blob/master/examples/config/spring-cache.xml#L197-L223)。

请确保以相同的配置启动所有节点（“localHost”属性可能不同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T20:26:14.927

网上有正在进行的书：http: [//www.gridgain.com/book/book.html#_taste_of_gridgain](http://www.gridgain.com/book/book.html#_taste_of_gridgain)

那应该回答这些基本问题。

# android - Listview 的 setOnItemLongClickListener 在 Android 中不显示 AlertDialog

> ID：14101620
> 
> 赞同：0
> 
> 时间：2012-12-31T12:28:53.790
> 
> 标签：android, listview, android-alertdialog

开发应用程序时存在混淆，我在列表中列出了 SQLite 数据。我想让它像用户长按它一样工作，它应该显示一个包含 4-5 个项目的警报对话框。但它失败了。如果有人知道吗？所以请指导我。

我已经使用了此代码，但不起作用....

```
lv.setOnItemClickListener ( new OnItemClickListener() {

    public void onItemClick ( AdapterView<?> parent, View view,int position, long id) {
        final CharSequence[] items = {"India", "US", "UK","Australia"};
        AlertDialog.Builder builder = new    AlertDialog.Builder(CustomerConView.this);

        builder.setTitle("Alert Dialog with ListView");

        builder.setItems(items, new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int item) {                                 
                Toast.makeText(getApplicationContext(), "hi", Toast.LENGTH_SHORT).show();
            }
        });

        AlertDialog alert = builder.create();
        alert.show();
    }

}); 
```

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:08:45.023

```
public void onItemClick(AdapterView<?> adapter, View view, int position, long arg3) {
        // TODO Auto-generated method stub
        Log.d("postiton", String.valueOf(position));
        //switch(position)
        //{
        //case 0:
        if(position==0)
        {
            if(Session.getActiveSession()==null)
            {
                Toast.makeText(MainActivity.this, "You must login first", Toast.LENGTH_LONG).show();
            }
            else
            {
                dialog=new AlertDialog.Builder(MainActivity.this);
                dialog.setTitle("Update Status");

                LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                dialogView = inflater.inflate(R.layout.update_status, null);
                //dialog.
                dialog.setView(dialogView);
                dialog.setPositiveButton("Update Status", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int ButtonId) {
                        // TODO Auto-generated method stub
                        UpdateStatus();
                    }
                });
                dialog.show();
            }
        }

        //case 1:
        if(position==1) 
        {

            if(Session.getActiveSession()==null)
            {
                Toast.makeText(MainActivity.this, "You must login first", Toast.LENGTH_LONG).show();
            }
            else
            {
                dialog = new AlertDialog.Builder(MainActivity.this);
                dialog.setTitle("Upload Photo");

                LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                dialogView = inflater.inflate(R.layout.post_photo, null);

                Button browse = (Button)dialogView.findViewById(R.id.browsePhotoButton);
                browse.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        Intent i = new Intent(
                                Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
                                startActivityForResult(i, RESULT_LOAD_IMAGE);
                    }
                });

                dialog.setView(dialogView);
                dialog.setPositiveButton("Upload Photo", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int ButtonId) {
                        // TODO Auto-generated method stub
                        publishStory(image);
                    }
                });

                dialog.show();
            }
        }

        if(position==2)
        {
            if(Session.getActiveSession()==null)
            {
                Toast.makeText(MainActivity.this, "You must login first", Toast.LENGTH_LONG).show();
            }
            else
            {
                Intent friendsActivity = new Intent(MainActivity.this,Friends.class);
                startActivity(friendsActivity);
            }
        }

    } 
```

看到这个我也在列表视图项目点击上显示对话框。

您没有设置警报对话框视图以显示某些内容的问题，您应该为其分配一些布局以在警报对话框中显示。试试看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:45:09.890

使用方法：[registerForContextMenu()](http://developer.android.com/reference/android/app/Activity.html#registerForContextMenu%28android.view.View%29)

您必须在活动的 onCreate 上调用它，并且必须实现方法“ [onCreateContextMenu()](http://developer.android.com/reference/android/app/Activity.html#onCreateContextMenu%28android.view.ContextMenu,%20android.view.View,%20android.view.ContextMenu.ContextMenuInfo%29) ”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:34:17.260

使用这个，这可能对你有帮助。. . . .

```
public boolean onContextItemSelected(MenuItem aItem) 
    {
        AdapterContextMenuInfo menuInfo = (AdapterContextMenuInfo) aItem.getMenuInfo();
        switch (aItem.getItemId()) 
        {
            case 0:
                try 
                {
                    // your code 
                }
                catch (Exception ewe) 
                {
                    Log.e("Exception",""+ewe)
                }       
                break;

            case 1:
                           ................ for all your cases

            break;  
        }
        return false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T08:19:35.807

获取应用程序上下文在其他类中不起作用

所以写classname.this

> 例如 myservice.this

其中 myservice 是我的班级名称

# javascript - XPCOM 存根文件

> ID：14101626
> 
> 赞同：2
> 
> 时间：2012-12-31T12:29:50.363
> 
> 标签：javascript, firefox, firefox-addon, xul, xpcom

1- PHPStorm 是否可以使用任何[XPCOM存根文件 (javascript) 来完成代码？](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference)

2-有什么方法可以促进 PHPStorm 中的 FireFox 插件开发？

3- 如何将 FireFox 设置为语法检查的唯一浏览器目标？当前`for each()`构造显示为语法错误，但在 Firefox 中是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T14:01:45.277

您应该将您的 JavaScript 版本设置`preferences\JavaScript`为 1.7 或更高版本以使用`let`和`for each`.

# java - 如果本地发生更改，想要在服务器上自动上传战争

> ID：14101630
> 
> 赞同：0
> 
> 时间：2012-12-31T12:30:31.547
> 
> 标签：java, war

我一次从事 3 个 Java Spring 和 Hibernate 项目。每次如果我对这三个项目中的任何一个进行任何更改，我都必须再次创建构建并手动将三个构建上传到三个不同的服务器。

有没有什么机制可以避免这个手动过程？是否有工具或脚本可以检查我是否在 Eclipse 中更改我的代码并保存文件，然后提交代码并自动构建并上传 war 文件到适当的服务器？

这会节省我很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:36:02.163

您需要持续集成。Maven 是一个构建工具，不会在更改时部署。

而诸如[jenkins 之](http://jenkins-ci.org/)类的 CI 工具将监听您的代码存储库，并且每次提交文件时，它都会调用然后调用您希望的任何 maven 命令。

但是重新阅读您的问题，您似乎真正需要的是一个热部署开发环境。这[很容易](https://stackoverflow.com/a/6189031/106261)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:33:30.893

如果项目在 Maven 上，则所有主要应用程序服务器都有插件。

# vsto - 企业查找表

> ID：14101632
> 
> 赞同：0
> 
> 时间：2012-12-31T12:30:50.833
> 
> 标签：vsto, ms-project

我有 Microsoft Project 2010 服务器。

如何从 Microsoft Project 2010 内部读取为企业查找表定义的所有值？我使用 VSTO。

已经尝试过 Application.GlobalOutlineCodes、Application.ActiveProject.OutlineCodes 没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T06:50:32.290

最简单的方法是通过 PSI 读取数据 - 您只需从 VSTO 附加组件中调用 PSI。当然，您可以从 MS Project 中读取 LookupTable，但 COM 比通过 WCF 或 .asmx 调用 PSI 慢得多。

我在我的附加组件中保留对所有企业自定义字段的引用，并缓存它们的查找。[这是一个示例](http://msdn.microsoft.com/en-us/library/office/gg224108%28v=office.14%29.aspx)，如何使用 PSI 读取自定义字段和查找它们

# python - 如何在 Python 中将列表转换为树？

> ID：14101633
> 
> 赞同：0
> 
> 时间：2012-12-31T12:30:53.873
> 
> 标签：python, list, tree, nested

我如何从嵌套列表中表示一棵树？

```
L = [['bike', '2 * wheel+1* frame'], ['wheel', '1*rim+1*spoke+1*hub'], ['rim', 60],['spoke', 120]

Tree = ['bike', 2, ['wheel', 1, ['rim', 60], 1, ['spoke', 120], 1, ['hub', 2]] 
```

解释 ：

在此示例中，自行车由 2 个轮子和 1 个框架制成，轮子由 1 个轮辋、1 个辐条和 1 个轮毂制成 ['rim', 60] 表示轮辋的价格是 60。

我不明白如何将列表转换为树。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:39:33.553

这是我要采取的步骤：

1.  编写一个函数，使得`f('2 * wheel+1* frame') == {'wheel': 2, 'frame': 1}`
2.  在整个列表上运行该函数以生成

    ```
    [
        ('bike', {'wheel': 2, 'frame': 1}),
        ('wheel', {'rim': 1, 'spoke': 1, 'hub': 1}),
        ('rim', 60)
    ] 
    ```

3.  遍历此列表，并将其更改为：

    ```
    [
        ('bike', {
            ('wheel', {
                ('rim', 60): 1,
                ('spoke', ...): 1,
                ('hub', ...): 1
            }): 2,
            ('frame', ...): 1
        })            
    ] 
    ```

    通过用 etc 替换`'wheel'`，`('wheel', {'rim': 1, 'spoke': 1, 'hub': 1})`递归

4.  将此树格式转换为所需的输出

# android - CheckBoxPreference 和依赖项

> ID：14101634
> 
> 赞同：7
> 
> 时间：2012-12-31T12:30:58.977
> 
> 标签：android

我有一个复选框和一个 ListPreference，我想通过复选框禁用/启用 ListPreference。我读了很多书，发现只能使用 java（而不是 xml）。这是正确的吗？现在，在读取“checkboxPref”（布尔值真/假）的值后，我不知道该怎么做。

```
SharedPreferences prefs3 = PreferenceManager.getDefaultSharedPreferences(this);
      listener = new SharedPreferences.OnSharedPreferenceChangeListener() {
          public void onSharedPreferenceChanged(SharedPreferences prefs, String listpref) {       

              CheckboxPreference = prefs.getBoolean("checkboxPref", true);
              }   };

      prefs3.registerOnSharedPreferenceChangeListener(listener); 
```

首选项.xml：

```
<CheckBoxPreference
                        android:title="Notifify"
                        android:defaultValue="true"
                        android:key="checkboxPref" />
            <ListPreference
         android:entries="@array/numberOptions"
         android:entryValues="@array/numberValues"
         android:key="number"
         android:title="Number" /> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-31T12:33:28.940

添加

```
android:dependency="checkboxPref" 
```

到 ListPreference XML

结果：

```
<ListPreference
         android:entries="@array/numberOptions"
         android:entryValues="@array/numberValues"
         android:key="number"
         android:title="Number"
         android:dependency="checkboxPref"
 /> 
```

# javascript - Why do we need apply method inside the constructor to invoke any method defined on the prototype object?

> ID：14101638
> 
> 赞同：1
> 
> 时间：2012-12-31T12:31:22.687
> 
> 标签：javascript

Why do we need apply method inside the constructor to invoke any method defined on the prototype object?

Code working:

```
 function Test(){
    this.x = [];
    this.add.apply(this,arguments);
    }

    Test.prototype.add = function(){
    for(var i=0; i < arguments.length; i++){
    this.x.push(arguments[i]);
    }
    }

    var t = new Test(11,12)

    t.x          //[11,12]  this is fine
    t.x.length   //2 this is also fine 
```

But when i directly call add inside constructor

Code not working:

```
 function Test(){
    this.x = [];
    this.add(arguments);
    }

    Test.prototype.add = function(){
    for(var i=0; i < arguments.length; i++){
    this.x.push(arguments[i]);
    }
    }

    var t = new Test(11,12);
    t.x.length; //1 Not added all elements why? 
```

![enter image description here](../Images/e9cb9a602dcf0f370edcfb0a091ddd7d.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T12:34:45.780

This hasn't got anything to do with prototypes, it's got to do with how `apply` takes an array and then uses the values as arguments to the function to call. In this case, if you do

```
this.add(arguments); 
```

It's doing exactly that. Calling add with the first argument being an array-like object, and you end up with x being an array where the first element is an array. `new Test(1, 2, 3)` will result in `x = [ [1, 2, 3] ]` (the inner array is actually an Arguments object, but it resembles an array). However if you do

```
this.add.apply(this, arguments); 
```

It's essentially doing

```
this.add(arguments[0], arguments[1], arguments[2], ...); 
```

And this way x ends up being an array of those elements, instead of an array within an array. I.e., with `new Test(1, 2, 3)` you'll get `x = [1, 2, 3]`, without the extra array inbetween.

# magento - Magento 中的 Germansetup 协议为空

> ID：14101653
> 
> 赞同：1
> 
> 时间：2012-12-31T12:32:49.067
> 
> 标签：magento, magento-1.7

从我`/checkout/onepage/`那里有一个 AGB 的弹出窗口： `/germansetup/frontend/agreements/id/1/`

问题是这个页面没有显示任何文本。只是模板中的背景图像。

弹出窗口定义在`germansetup.xml`：

```
<germansetup_frontend_agreements>
    <reference name="root">
        <action method="setTemplate"><template>page/popup.phtml</template></action>
    </reference>
    <reference name="content">
        <block type="core/text" name="agreement" />
    </reference>
</germansetup_frontend_agreements> 
```

我不知道他想在这里加载什么块，但我希望他展示我的静态块`mrg_business_terms`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-05-09T14:05:11.650

这似乎在某些时候发生了变化。对我来说（使用 Magento 1.9.2.4），有效的是将“cms/block”添加到白名单块列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:57:27.847

查看销售 > 条款和条件（德语：Verkäufe > Bestellbedingungen）。

在这里您可以看到结帐协议列表。就我而言，我需要更改内容块 ID：

```
{{block type="cms/block" block_id="mrg_business_terms"}} 
```

# android - 在android中根据周围的光线改变亮度

> ID：14101669
> 
> 赞同：2
> 
> 时间：2012-12-31T12:34:33.580
> 
> 标签：android, screen-brightness

我想根据光线改变屏幕的亮度..

我找到了获取亮度级别和设置亮度的链接..

[在暂停时更改屏幕亮度（Android 应用）](https://stackoverflow.com/questions/13212835/change-screen-brightness-onpause-android-app)

[如何打开和关闭自动亮度？（不重复）](https://stackoverflow.com/questions/9339430/how-to-toggle-auto-brightness-on-and-off-not-a-repeat)

[在android中以编程方式更改屏幕亮度](https://stackoverflow.com/questions/3737579/changing-screen-brightness-programmatically-in-android)

[以编程方式更改屏幕亮度（与电源小部件一样）](https://stackoverflow.com/questions/7646865/changing-screen-brightness-programmatically-as-with-the-power-widget)

但我想**根据周围的光线**改变亮度..简而言之，我想做和自动亮度一样的工作..

如何检测周围的光线？或者我可以触发自动亮度功能吗？

亮度的值范围在 0 到 255 之间。我想根据周围的光线水平设置亮度级别，不能是 0 到 255。我怎样才能得到这两者之间的比率。

需要帮助。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-01T14:11:56.667

我自己的解决方案：

[我从这里](http://www.palmmedia.de/Blog/2010/10/28/android-yahtzee-application-with-shake-detection)实现了摇动监听器。我也使用了 aboce 链接来完成它。

我创建了**ShakeBrightService.java**

```
public class ShakeBrightService extends Service {

private ShakeDetector shakeBrightDetector = new ShakeDetector();

@Override
public void onCreate() {
    super.onCreate();

}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

    shakeBrightDetector.stop();
    shakeBrightDetector.start(this, shakeBrightEventListener);

    return super.onStartCommand(intent, flags, startId);
}

private ShakeEventListener shakeBrightEventListener = new ShakeEventListener() {

    @Override
    public void onShake() {
        setAutoBrightness(true);
    }
};

@Override
public IBinder onBind(Intent intent) {
    return null;
}

private void setAutoBrightness(boolean value) {

    Toast.makeText(getApplicationContext(), "AutoBrightness : " + value,
            Toast.LENGTH_SHORT).show();

    if (value) {

        Settings.System.putInt(getContentResolver(),
                Settings.System.SCREEN_BRIGHTNESS_MODE,
                Settings.System.SCREEN_BRIGHTNESS_MODE_AUTOMATIC);
    } else {

        Settings.System.putInt(getContentResolver(),
                Settings.System.SCREEN_BRIGHTNESS_MODE,
                Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL);
    }

    Intent i = new Intent(getApplicationContext(), MainActivity1.class);
    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(i);   
}

} 
```

**用于刷新视图**
MainActivity1.java的假

```
public class MainActivity1 extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_main1);

    refreshBrightness(getBrightnessLevel());

    Thread t = new Thread() {
        public void run() {
            try {
                sleep(10);
            } catch (InterruptedException e) {
            }
            finish();
        }
    };
    t.start();
}

private void refreshBrightness(float brightness) {

    WindowManager.LayoutParams lp = getWindow().getAttributes();
    if (brightness < 0) {
        lp.screenBrightness = WindowManager.LayoutParams.BRIGHTNESS_OVERRIDE_NONE;
    } else {
        lp.screenBrightness = brightness;
    }
    getWindow().setAttributes(lp);
}

int getBrightnessLevel() {
    try {
        int value = Settings.System.getInt(getContentResolver(),
                Settings.System.SCREEN_BRIGHTNESS);
        // convert brightness level to range 0..1
        value = value / 255;
        return value;
    } catch (SettingNotFoundException e) {
        return 0;
    }
} 
```

FakeActivity 有主题`android:theme="@android:style/Theme.Translucent.NoTitleBar"`，所以默默地改变了亮度。

# visual-studio-2010 - 包含 gmock.LIB 后，Visual Studio 2010 不执行代码

> ID：14101679
> 
> 赞同：0
> 
> 时间：2012-12-31T12:35:14.540
> 
> 标签：visual-studio-2010, visual-c++, googletest, googlemock

早些时候我`gtest`用于我的项目。目前我正在使用，并且`gmock`当我为`gmock.lib`,提供了路径时。然后控件根本不会进入.`gmock_mock.lib``..\..\include``code`

假设以前它就像例如

```
main()
{
printf("Hello world"); //Kept the breakpoint here, control comes here
} 
```

现在，在添加`.lib`和`include`路径之后，它根本不执行只是 Strats 调试并结束而不去任何地方......

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T03:21:25.450

Google test 允许您使用`TEST`宏编写单元测试。它不适用于已经具有`main()`. 如果你想使用谷歌测试，你应该创建另一个项目。

# maven - Maven 原型所需的属性编号

> ID：14101681
> 
> 赞同：2
> 
> 时间：2012-12-31T12:35:21.107
> 
> 标签：maven, velocity, maven-archetype

`requiredProperty`我有一个使用包含数字的 Maven 架构类型，但速度变量是字符串。因此，在我的模板中，我无法测试此属性是否大于数字：

```
#if( $myVar gt 5 ) 
```

我已经测试了以下[解决方案](https://stackoverflow.com/questions/2156502/how-to-convert-string-into-integer-in-velocity-template)但没有成功。

我也试过这个：

```
#set( $intVar = Integer.parseInt($myVar) ) 
```

这在原型生成中也是失败的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:50:25.580

您无法从 Velociy 引用类，因此`Integer.parseInt`无法使用。但是，由于在 Java 中任何静态方法都可以作为实例方法调用，而 Velocity 只是 Java 的伪装，因此您可以调用`parseInt`任何整数。所以你可以试试这个技巧：

```
#if ($myVar.length().parseInt($myVar) gt 5) 
```

你从你假设你拥有的一个变量开始获取一个整数，`$myVar`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-04T12:26:01.027

我已经基于原型描述符中提供的正则表达式实现了用户输入验证：

[https://issues.apache.org/jira/browse/ARCHETYPE-487](https://issues.apache.org/jira/browse/ARCHETYPE-487)

希望它将为未来版本的 Maven 原型插件解决这个问题。

# php - 如何在下面引入空白？

> ID：14101684
> 
> 赞同：0
> 
> 时间：2012-12-31T12:35:35.497
> 
> 标签：php

下面的 PHP 代码片段创建得`$desc`很好，但我喜欢它在每个找到的内容之间引入两 (2) 个空格，`dpItemFeatureList`因为它经历了它的迭代。

我似乎无法确切地获得什么或在哪里添加一个片段来做到这一点？

```
function get_description($asin){
$url = 'http://www.amazon.com/gp/aw/d/' . $asin . '?d=f&pd=1';
$data = request_data($url);
$desc = '';

if ($data) {
    $dom = new DOMDocument();
    @$dom->loadHTML($data);
    $xpath = new DOMXPath($dom);
    if (preg_match('#dpItemFeaturesList#',$data)){
        $k = $xpath->query('//ul[@class="dpItemFeaturesList"]');
        foreach ($k as $c => $tot) {
            $desc .= $tot->nodeValue;
        }
    }
}
return $desc; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:39:53.650

由于您将所有内容都附加到 desc，请尝试类似

```
$desc .= $tot->nodeValue;
$desc .= "<br />" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:40:39.040

试试看：

```
$desc .= $tot->nodeValue.'  '; 
```

并`trim($desc)`在循环之后避免最后有两个空格。

或者，或者创建一个数组：

```
$desc = array();
//....
$desc[] = $tot->nodeValue; 
```

并返回`implode(' ', $desc)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:41:36.740

[查看您在此处](http://pastie.org/private/gabwg2bbg8qw1xewui7vw)共享的代码，然后查看您正在处理的数据（我在[此处](http://sebsauvage.net/paste/?69f46e9fece76c54#XR%20/jSwAV6lxtNjySyQO8V7%20Pn45EA7dY%20EJGSjAXj0=)粘贴的示例），您实际上想要在节点的`<li>`子元素中收集文本。`<ul class="dpItemFeaturesList">`

在您的原始代码片段中，您的 XPath 如下所示：

```
'//ul[@class="dpItemFeaturesList"]' 
```

这只会选择`<ul>`元素而*不是*子元素。因此，当您尝试执行 a`$tot->nodeValue`时，它将连接所有子节点中的所有文本*而没有*空格（啊哈，您首先需要空格的真正原因）。

为了解决这个问题，我们应该做两件事：

1.  选择`<li>`适当节点内的节点。将 XPath 更改为`//ul[@class="dpItemFeaturesList"]/li`.
2.  在`foreach`循环中，将 2 个不可破坏的空格`&nbsp;&nbsp;`（因为这是 HTML）连接到`$desc`变量。

这`$c`是数组索引。

```
function get_description($asin){
    $url = 'http://www.amazon.com/gp/aw/d/' . $asin . '?d=f&pd=1';
    $data = request_data($url);
    $desc = '';

    if ($data) {
        $dom = new DOMDocument();
        @$dom->loadHTML($data);
        $xpath = new DOMXPath($dom);
        if (preg_match('#dpItemFeaturesList#',$data)){
            $k = $xpath->query('//ul[@class="dpItemFeaturesList"]/li');
            foreach ($k as $c => $tot) {
                if ($c > 0) {
                    $desc .= "&nbsp;&nbsp;";
                }
                $desc .= $tot->nodeValue;
            }
        }
    }
    return $desc;
} 
```

我们进行检查，`$c > 0`以便您*不会*在循环中的最后一个节点之后获得*额外的空格。*

PS：与您的原始问题无关。您共享链接的代码`$timestamp`在`$date = date("format", $timestamp);`on中有一个未定义的变量`line 116`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T12:42:35.567

如果您需要在每个迭代之间添加，则需要在每次迭代的前面添加，*但*第一个：

```
 $k = $xpath->query('//ul[@class="dpItemFeaturesList"]');
        foreach ($k as $c => $tot) {
            $c && $desc .= '  '; # all but first
            $desc .= $tot->nodeValue;
        } 
```

这是一个可以节省您的表达式，`if`但它的工作原理相似。也许有点味道，那么肯定，`if`也可以做到：

```
 $k = $xpath->query('//ul[@class="dpItemFeaturesList"]');
        foreach ($k as $c => $tot) {
            if($c) $desc .= '  '; # all but first
            $desc .= $tot->nodeValue;
        } 
```

这是有效的，因为除了零之外的每个整数都`true`在 PHP 中。

[请参阅演示](http://eval.in/5732)。

# google-app-engine - GWT 部署到 google App Engine 得到 404 错误

> ID：14101692
> 
> 赞同：2
> 
> 时间：2012-12-31T12:36:07.723
> 
> 标签：google-app-engine, gwt, deployment

我正在尝试学习如何将 GWT 应用程序部署到 Google App Engine。我在 Java 7 中使用 GWT 2.4 + eclipse。

我基本上有一个带有不做任何事情的按钮的静态页面。

```
public class Test1 implements EntryPoint {

  public void onModuleLoad() {
        final Button sendButton = new Button("Send");
        RootPanel.get().add(sendButton);
  }
} 
```

我已经创建了我的应用程序`istoeumtestedenome`，并且在 localhost 中它可以工作。我已将其部署到 App Engine，没有任何错误。但是当我尝试访问该页面`http://istoeumtestedenome.appspot.com/`时，会显示 404 错误。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:53:02.340

有很多事情可能会出错。首先想到的事情：

1.  您的静态 HTML 文件（主机页面）位于错误的位置（文件夹）。
2.  您没有在 web.xml 文件中指定欢迎页面 - 或者还有其他一些问题。

转到 App Engine 的管理控制台，然后单击日志以查看问题所在。

# r - 使用保存日期的参数在 xts 中进行子集化

> ID：14101694
> 
> 赞同：7
> 
> 时间：2012-12-31T12:36:34.470
> 
> 标签：r, subset, xts

我熟悉 xts 子集化功能。但是，我找不到一种优雅的方法来对**参数**化的日期范围进行子集化。像这样的东西：

```
times = c(as.POSIXct("2012-11-03 09:45:00 IST"),
          as.POSIXct("2012-11-05 09:45:00 IST"))

#create an xts object:
xts.obj = xts(c(1,2),order.by = times)

#filter with these dates:
start.date = as.POSIXct("2012-11-03")
end.date = as.POSIXct("2012-11-04")

#instead of xts["2012-11-03"/"2012-11-04"], do something like this:
xts[start.date:end.date] 
```

有人知道吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T13:25:15.220

`start.date`您可以将and对象粘贴在一起，用or`end.date`分隔，然后将其用于子集。`"::"``"/"`

```
R> xts.obj[paste(start.date,end.date,sep="::")]
                    [,1]
2012-11-03 09:45:00    1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T13:18:49.983

的帮助下`[.xts {xts}`

> 由于 xts 在内部使用所有用户级索引类的 POSIXct 时间表示，因此最快的 timeBased 子集将始终来自 POSIXct 对象，而与原始对象的 indexClass 无关。

所以你可以像这样子集 timeBased ：

```
xts.obj[seq(start.date,end.date,by=60)]
                    [,1]
2012-11-03 09:45:00    1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-15T04:31:24.260

对于那些绞尽脑汁为非 Posix 做这件事的人。特别是对于基于季度的数据，即 2001 年第二季度至 2006 年第三季度。

我使用了一个简单而优雅的解决方案：

```
library(xts)

starting.quarter<-"200101"
ending.quarter<-"201702"

oil_price_by_qtr<-oil_price_by_qtr[paste(starting.quarter,ending.quarter,sep="/")] 
```

这将从 2001 年第一季度到 2017 年第二季度对 XTS 对象进行子集化。

愿这能帮助其他一些可怜的灵魂避免失去 2 个小时的生命。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-14T11:38:29.380

我只需要做同样的事情。这是我的解决方案，基于原始示例。

```
library(xts)

times = c(as.POSIXct("2012-11-03 09:45:00 IST"),
          as.POSIXct("2012-11-05 09:45:00 IST"))

#create an xts object:
xts.obj = xts(c(1,2),order.by = times)

#filter with these dates:
start.date = as.POSIXct("2012-11-03")
end.date = as.POSIXct("2012-11-04")

# By using an index that is the logical AND of two vectors
xts.obj[start.date <= index(xts.obj) & index(xts.obj) <= end.date] 
```

# c - 初始化一个 C 结构数组，其大小在编译时未知

> ID：14101695
> 
> 赞同：7
> 
> 时间：2012-12-31T12:36:34.973
> 
> 标签：c, pointers, struct, initialization, memset

我没有找到这个问题的确切答案，所以要么这是一个愚蠢的问题，要么是显而易见的。我想知道它是否会产生未定义的行为。

我定义了一些结构类型：

```
typedef struct {
    char string1[17];
    char string2[33];
    int   someInt;
    float someFloat;
} my_struct_t; 
```

我需要该结构的多个实例（就像你在结构数组中一样），但对象的数量在编译时是未知的。

像这样初始化它是否正确？

```
my_struct_t *myStruct;
size_t noOfElements;
size_t completeSize;
int index;    

/* ...code which sets the number of elements at runtime... */

completeSize = sizeof(my_struct_t) * noOfElements;

myStruct = malloc(completeSize);
memset(myStruct, 0, completeSize);

/* ...and then access it as if it were an array...*/

myStruct[index].someInt = 10; // index < noOfElements 
```

这样做安全吗？这`memset()`部分是我担心的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-31T12:43:38.407

就目前而言，使用`malloc`后跟`memset`是可以的，但您可能希望考虑使用 (under-used) `calloc`。例如：

```
pMyStruct = calloc(noOfElements, sizeof(my_struct_t)); 
```

这将为所需数量的元素分配内存，*并将*它们初始化为二进制零。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-31T12:38:39.930

> 这样做安全吗？memset() 部分是我担心的。

是的，这是安全的，因为这不会导致任何未定义的行为（缓冲区溢出、未初始化的值等）。

但是，它不一定会将您的值设置为零。 `memset`将**位**设置为 0，但这不一定与将 a 设置`float`为值相同`0`（尽管在实践中，在大多数普通平台上都可以）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-31T12:38:52.057

> 这样做安全吗？memset() 部分是我担心的。

你担心是对的 - 你`memset`只是将所有位设置为零，这并不一定将成员设置为 0。

例如，没有任何东西可以保证 all-bits-0 实际上对于浮点数表示 0。指针也是如此：**使其全位为 0 并不意味着它一定是`NULL`**.

* * *

### 编辑

`NULL`可能会也可能不会被表示为 all-bits-0。引用 C 常见问题解答：

> 空指针的内部（或运行时）表示，它可能是也可能不是全位 0，并且对于不同的指针类型可能不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T12:53:41.147

您的`memset`代码中的 会将所有位设置为 0，这可能是您想要做的，也可能不是。特别是，不能保证全为零的指针是空指针。全零位的浮点值也不是零。

如果您希望您的代码完全可移植，那么您应该初始化每个元素。

```
my_struct_t *arr = malloc(N * sizeof arr[0]);
const my_struct_t default_my_struct = { 0 };
for (int i=0; i<N; i++)
    arr[i] = default_my_struct; 
```

或者您可以使用 C99 复合文字进行初始化：

```
my_struct_t *arr = malloc(N * sizeof arr[0]);
for (int i=0; i<N; i++)
    arr[i] = (my_struct_t) { 0 }; 
```

在实践中，您必须努力找到一个 C 实现，上面的代码将与使用`memset`.

# c# - 有没有办法实现特定铸造的方法？

> ID：14101698
> 
> 赞同：4
> 
> 时间：2012-12-31T12:37:08.250
> 
> 标签：c#, oop, casting

我有几个不同的类代表消息数据（实现`ToString()`方法）

*   `DatabaseMessage`
*   `Method1Message`
*   `Method2Message`
*   ETC...

然后我有一个`Message`类，它有一个代表发送者的字符串和一个代表关于消息数据类之一的字符串（来自`ToString()`消息）。我创建了这个类来通过我的通信管道发送消息。

在另一端，我`Message`从字符串创建一个类并将其发送到一个特定的方法，该方法确切地知道它是哪种消息数据类型。然后我想将整个消息对象转换为能够访问特定消息数据（例如`DatabaseMessage`类）的东西。

```
class DatabaseMessage
{
    public string ToString()
    {
        // ...
    }
}

class Message
{
    public string sender;
    public string data;

    public static Message FromString(string message)
    {
        // ...
    }
}

//...

public void Send()
{
    DatabaseMessage db_mess = new DatabaseMessage();

    Message m = new Message();
    m.sender = "me";
    m.data = db_mess.ToString();
}

public void Recieve(string message)
{
    Message m = Message.FromString(message);

    DatabaseMethod(m);
}

public void DatabaseMethod(Message m)
{
    // I want to be able to do this:
    DatabaseMessage db_mess = (DatabaseMessage)m;

    //...
} 
```

一个人将如何实现这一点？

希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:59:10.980

我不会进入你的设计，你为什么需要这样做。

为了隐式或显式转换类型，您需要做一些称为[转换运算符重载](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)的事情。

通过覆盖这些运算符，您可以分配不同类型的变量，并调用适当的方法进行转换。（当然，当您将实现的重载方法支持转换类型时）。

```
 public static explicit operator DatabaseMessage (Message m)  
    {
        DatabaseMessage dm = new ...
        // conversion stuff

        return dm; // return the new DatabaseMessage after conversion
    } 
```

希望这可以帮助。奥菲尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:27:41.057

好吧，看看你怎么看这个。

如上所述，您的问题是您不能这样做：

```
DatabaseMessage db_mess = (DatabaseMessage)m; 
```

...因为`m`不是 a `DatabaseMessage`，而是 a `Message`。但是，据我了解，`m.data`是一个代表 'serialized' 的字符串`DatabaseMessage`，那么您可以`MessageType.FromString()`在其他`Message`类型中继续您的模式并执行此操作吗？

```
DatabaseMessage db_mess = DatabaseMessage.FromString(m.data); 
```

如果问题更多是如何判断`Message`其中包含哪种类型，请`m.data`告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:44:42.730

据我了解，您需要的是接口或扩展特定类。

如果将 Message 创建为接口，则可以定义实现它的任何东西都必须具有特定的方法。

然后要获得你想要的类型，你可以使用这样的东西：

```
if (myMessage.GetType() == typeof(DatabaseMessage))
{
DatabaseMessage myDatabaseMessage = (DatabaseMessage)myMessage;

//etc...

} 
```

但是，如果您使用过接口，您甚至不需要关心类型，因为只要它们使用相同的接口，无论对象类型如何，这些方法都可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T13:03:52.840

检查 typeof 类实例将要求您在每次引入新消息类型时更改方法代码 - 违反了[打开/关闭原则](http://en.wikipedia.org/wiki/Open/closed_principle)。

我提出了另一种方法，使用对象实例的序列化（XmlSerializer 或 DatacontractSerializer）作为传输机制，然后使用多态性对消息执行操作。这样，当包含一个新的消息类型时，就会引入一个新类并重写虚拟方法，因此不会违反打开关闭原则。

![在此处输入图像描述](../Images/4adb9e0a903b983d925ba7bd9be7f03e.png)

因此，将序列化发送到 Xml、传输和反序列化，然后在反序列化对象上调用 peformWorkOnMessage() 方法。

那行得通吗？

# google-apps-script - 以编程方式将表单放置在谷歌电子表格上

> ID：14101699
> 
> 赞同：1
> 
> 时间：2012-12-31T12:37:13.647
> 
> 标签：google-apps-script, google-sheets

我有一个谷歌电子表格，其中有一个弹出来接收数据的表格，它工作正常。我的问题是它在电子表格的中心弹出，我希望它在电子表格的右侧弹出。是否有代码可以实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:27:28.517

没有办法控制表单的位置。

# java - zk框架：如何从zul目录下的WEB-INF加载zul页面

> ID：14101700
> 
> 赞同：3
> 
> 时间：2012-12-31T12:37:24.397
> 
> 标签：java, zk, zul

我正在使用 zk 框架 6。我试图将我的 zul 页面放在 /WEB-INF/zul 目录中。我的 index.zul 文件将请求转发到 /WEB-INF/zul/login.zul，它有一个 composer LoginComposer。但是当我在登录页面时，我想将用户重定向到另一个页面，例如 home.zul。但我收到 404 错误。

login.zul 和 home.zul 都与它们各自的作曲家一起在 zul 目录中。

在 loginComposer.java 中，我有以下代码重定向到单击按钮时调用的主页。

```
 Execution exec = Executions.getCurrent();
                HttpServletResponse response = (HttpServletResponse)exec.getNativeResponse();
                response.sendRedirect(response.encodeRedirectURL("/WEB-INF/zul/home.zul")); //assume there is /login
                exec.setVoided(true); 
```

我从 Eclipse 将项目创建为 zk 项目，并且我没有对 web.xml 进行任何更改。

请指导我如何从这里出发。

预先感谢。

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>abc</display-name>
  <listener>
    <description>
    Used to cleanup when a session is destroyed</description>
    <display-name>ZK Session cleaner</display-name>
    <listener-class>org.zkoss.zk.ui.http.HttpSessionListener</listener-class>
  </listener>
  <servlet>
    <description>
    The ZK loader for ZUML pages</description>
    <servlet-name>zkLoader</servlet-name>
    <servlet-class>org.zkoss.zk.ui.http.DHtmlLayoutServlet</servlet-class>
    <init-param>
        <param-name>update-uri</param-name>
        <param-value>/zkau</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet>
    <description>
    The asynchronous update engine for ZK</description>
    <servlet-name>auEngine</servlet-name>
    <servlet-class>org.zkoss.zk.au.http.DHtmlUpdateServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>zkLoader</servlet-name>
    <url-pattern>*.zul</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>zkLoader</servlet-name>
    <url-pattern>*.zhtml</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
    <servlet-name>auEngine</servlet-name>
    <url-pattern>/zkau/*</url-pattern>
  </servlet-mapping>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
    <welcome-file>index.zul</welcome-file>
  </welcome-file-list>
</web-app> 
```

zk.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<!--
    Created by ZK Studio
-->

<zk>

        <device-config>
            <device-type>ajax</device-type>
            <timeout-uri>/timeout.zul</timeout-uri><!-- An empty URL can cause the browser to reload the same URL -->
        </device-config>

    </zk> 
```

登录作曲家.java

```
public class LoginComposer extends SelectorComposer<Component>{

    private static final long serialVersionUID = -1657004425904043268L;

    @Wire
    private Button buttontestButton;

    @Listen("onClick = #testButton")
    public void cancelButton(){

             Executions.sendRedirect("/WEB-INF/zul/home.zul");

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T12:51:14.177

## 这不可能

我环顾四周，发现一个德国网站解释说，
java-servlet 的规范将 WEB-INF 文件夹定义为客户端不可访问，
因为它包含数据作为永远不应该从服务器外部访问的类。

### 如果您在不是 WEB-INF 的文件夹中遇到问题：

您应该更好地 通过单击按钮来重定向，并需要服务器端操作。 如果您只想重定向，请设置按钮[href](http://www.zkoss.org/javadoc/6.5.1/zk/org/zkoss/zul/Button.html#setHref%28java.lang.String%29)。 它应该看起来像[`Executions.sendRedirect(java.lang.String uri)`](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zk/ui/Executions.html#sendRedirect%28java.lang.String%29)

```
Executions.sendRedirect("/zul/home.zul"); 
```

或在java中：

```
myButton.setHref("/zul/home.zul"); 
```

在祖尔：

```
<button ... href="/zul/home.zul" ...> 
```

## 编辑

我可以写很多，但最好是说，如果你

1.  不要使用 Spring 遵循[这个](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Patterns/Forward_and_Redirect)，如果你得到 404
    检查你的部署选项/部署的东西。
2.  使用 Spring，因为简单的ajax 登录站点、java 方法的安全注释
    和简单的 zk 集成，我更喜欢它，请遵循[spring 的 zk 指南](http://books.zkoss.org/wiki/ZK%20Spring%20Essentials/Working%20with%20ZK%20Spring)。

如果您仍然有 404 并且无法弄清楚，请发布您的
配置文件或类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T03:03:50.460

正如其他人指出的那样，servlet 规范不允许直接/重定向访问 WEB-INF 下的页面，最佳做法是将 login.zul 保存在 WEB-INF 文件夹之外，以便应用程序的用户可以直接访问它。现在对于其余文件，您可以将它们保存在 WEB-INF 文件夹下，并使用包含组件或`Executions.createComponents()`.

通常，我将部分 zul 页面保存在 WEB-INF 文件夹中，因此它们不能直接访问，但我保留了我的布局页面，例如。WEB-INF 文件夹外的 home.zul 或 main.zul（如果用户未登录，它们也应被限制访问）参考[此处](http://books.zkoss.org/wiki/ZK_Spring_Essentials/Working_with_ZK_Spring/Working_with_ZK_Spring_Security/Add_Page_Based_Security_Using_Authorized_Roles)了解如何使用 Spring Security 限制页面访问

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-05T09:13:01.097

我希望这对某人有所帮助：

将 zul 文件转发到另一个 zul 文件，您可以使用此代码

```
<?forward uri="/directory_name/zul_fileName.zul"?> 
```

对于在同一 zul 页面上包含 zul 页面，您可以使用此代码

```
<include src="/directory_name/zul_fileName.zul" > </include> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-01T14:06:11.187

**你不能。**

/WEB-INF 文件夹中的文件不可直接访问。如果你想拥有这样的文件系统，那么你应该更好地集成spring框架。

# javascript - 如何通过 Java 脚本分配验证组

> ID：14101703
> 
> 赞同：0
> 
> 时间：2012-12-31T12:37:54.050
> 
> 标签：javascript, asp.net

单击按钮时无法分配验证组。

```
<asp:TabPanel ID="tabpnlTwo" runat="server" Visible="false" Width="100%" OnClientClick="radiobuttonvalidationForTabOne">
       <ContentTemplate>
  </ContentTemplate>

<asp:TabPanel ID="tabpnlTwo" runat="server" Visible="false" Width="100%" OnClientClick="radiobuttonvalidationForTabTwo">
       <ContentTemplate>
  </ContentTemplate> 
```

在 tabpnanel 调用脚本函数 onClientClick 此处将验证组分配给按钮

```
 <script>
    function radiobuttonvalidationForTabOne() {
        var btnAddOrderId = document.getElementById("btnAddToOrder");
        btnAddOrderId.ValidationGroup = "tabpnlOneGroup";

        alert(btnAddOrderId.ValidationGroup);
    }
    </script>

    <script>
function radiobuttonvalidationForTabTwo() {
    var btnAddOrderId = document.getElementById("btnAddToOrder");
    btnAddOrderId.ValidationGroup = "tabpnlTwoGroup";
    alert(btnAddOrderId.ValidationGroup);
}
</script>

 <asp:Button ID="btnAddToOrder" CssClass="customButton" runat="server" Text="Add To Order" ValidationGroup="tabpnlOneGroup"
           onclick="btnAddToOrder_Click" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:02:49.837

利用

```
<anycontrol runat="server" id="anyone" ClientIDMode="Static"/> 
```

将 ClientIDMode Static 与控件的属性一起使用将解决您的问题。

否 使用 Jquery 或 javascript：

```
$('#anyone').anyfunctioncallback()
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:47:58.757

这是因为你按钮的 id 在运行时会发生变化。你需要使用

```
 var btnAddOrderId = document.getElementById('<%=btnAddToOrder.ClientID%>'); 
```

代替

```
 var btnAddOrderId = document.getElementById("btnAddToOrder"); 
```

# javascript - 动态调用extjs类中的函数

> ID：14101704
> 
> 赞同：0
> 
> 时间：2012-12-31T12:38:00.527
> 
> 标签：javascript, function, extjs, dynamic-dispatch

我有一个看起来像这样的 ExtJs 类：

```
Ext.define("RuleExecutor", {
    singleton: true,
    displayMessage: function(msg) {
        Ext.Msg.alert('Popup Message', msg[0]);
    },
    disableById: function(field) {
        Ext.getCmp(field).setDisabled(true);
    },
    //more functions are here...
}); 
```

现在我得到一个字符串 => `str`，其中包含我需要运行的方法名称。我需要调用**str 中的字符串指定的RuleExecutor 中的方法**

**该方法被正确调用**，但参数未传递。

像这样：

```
//arguments is an array
function RunRule(str, arguments) {
  //I tried this....
  var fn = RuleExecutor[str];
  fn(arguments)

  //This doesn't work either..
  RuleExecutor[str].apply(this, arguments);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:59:11.007

不要使用“参数”作为变量名。JavaScript中已经有一个内置的类数组对象，称为“ [arguments](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments) ”。您的方法可能如下所示：

```
function RunRule(str) {
    var slice = Array.prototype.slice,
        args = slice.call(arguments, 1);
    RuleExecutor[str].apply(RuleExecutor, args);
} 
```

我使用了`slice`“真实”数组原型中的方法。该行：

```
args = slice.call(arguments, 1) 
```

将除第一个参数之外的所有参数复制到`args`变量中。你`RunRule`这样打电话：

```
RunRule("displayMessage", "Hello"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T16:22:28.657

这是你要找的吗？

```
Ext.onReady(function () {
    Ext.define("RuleExecutor", {
        singleton: true,
        displayMessage: function (msg) {
            Ext.Msg.alert('Popup Message', msg[0]);
        },
        disableById: function (field) {
            Ext.getCmp(field).setDisabled(true);
        }
    });

    var str = 'displayMessage';
    RuleExecutor[str](['bar']);
}); 
```

# android - 拦截/获取发送到 Android 上的 Spotify 小部件的数据

> ID：14101713
> 
> 赞同：3
> 
> 时间：2012-12-31T12:38:46.713
> 
> 标签：android, widget, broadcastreceiver, spotify

我有 Spotify，想在我的应用程序中使用标题和歌曲名称。（最终目标是将它导出到我的 Liveview 手表，这样我就可以用它来控制 Spotify）

由于有一个 Spotify 小部件，我只想添加一个广播接收器来获取发送到小部件的数据。

所以我添加了一个广播接收器，据我了解这个概念，这应该足够了，然后我应该能够获取 Spotify 发送到小部件的数据。

根据文档，您可以使用广播接收器完成所有可以使用小部件管理器执行的操作，所以我认为广播接收器很好。

一旦调用 on_receive，我就创建了一个调试日志条目和一个 Toast，所以至少*应该有**一些东西*。

从错误消息中我知道，如果您没有小部件，Spotify 总是会尝试将数据发送给它，所以我很确定，错误在我这边。

我的代码如下：

（为简洁起见，稍后将作为服务或其他东西缩短）文本视图稍后将显示标题

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // für den Song

    IntentFilter iF = new IntentFilter();

    iF.addCategory("ComponentInfo");
    iF.addCategory("com.spotify.mobile.android.service.SpotifyIntentService");
    iF.addCategory("com.spotify.mobile.android.service.SpotifyService");

    iF.addAction("com.spotify.mobile.android.ui.widget.SpotifyWidget");
    iF.addAction("ComponentInfo");
    iF.addAction("com.spotify");
    iF.addAction("com.spotify.mobile.android.service.SpotifyIntentService");
    iF.addAction("com.spotify.mobile.android.service.SpotifyService");

    iF.addAction("com.android.music.metachanged");
    iF.addAction("com.android.music.playstatechanged");
    iF.addAction("com.android.music.playbackcomplete");
    iF.addAction("com.android.music.queuechanged");
    iF.addAction("com.spotify.mobile.android.ui");

    registerReceiver(mReceiver, iF);

    // albumtext = (TextView) findViewById(R.id.albumText);

}

    private BroadcastReceiver mReceiver = new BroadcastReceiver() {

                @Override
                public void onReceive(Context context, Intent intent)
                {

                    Log.d("onReceive launched", "kekse");

                            String action = intent.getAction();
                            String cmd = intent.getStringExtra("command");

                            String com = intent.getStringExtra("ComponentInfo");

                            Log.d("mIntentReceiver.onReceive ", action + " / " + cmd+ " / "+ com);

                            String artist = intent.getStringExtra("artist");
                            String album = intent.getStringExtra("album");
                            String track = intent.getStringExtra("track");
                            Log.d("Music",artist+":"+album+":"+track);

                            Toast.makeText(context, "Command : "+cmd+"\n Artist : "+artist+" Album :"+album+"Track : "+track+" " , Toast.LENGTH_SHORT).show();

                }
    }; 
```

为了完整起见，这是我的清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="de.KarlheinzMeier.SpotifyController"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name="de.KarlheinzMeier.SpotifyControllerActivity"
        android:label="@string/app_name" >

    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
        <category android:name="android.intent.category.ComponentInfo" />
    </intent-filter>

    <receiver android:name="com.spotify.mobile.android.ui.widget.SpotifyWidget" android:label="Kekse">
    <intent-filter>
        <action android:name="com.spotify.mobile.android.service.SpotifyService" />
         <action android:name="com.spotify.mobile.android.service.SpotifyIntentService" />
    </intent-filter>

</receiver>

    </activity>

</application>

</manifest> 
```

PS：我知道一旦内部数据格式发生变化，我的App就会崩溃，因为它仅供私人使用，我不介意，所以请不要*讨论*。如果有*API*，我会接受它，因为没有...

# spring - @Autowired 使用 JUnit 和 Spring 失败

> ID：14101715
> 
> 赞同：2
> 
> 时间：2012-12-31T12:38:51.477
> 
> 标签：spring, unit-testing, junit, autowired

真的需要帮助。我使用 JUnit(4.6) 和 Spring(3.0.5) 进行单元测试。当我尝试在我的测试类中自动装配服务对象时，我得到了 NoSuchBeanDefinitionException。

JUnit 代码：

```
package com.aaa.service.impl;

@ContextConfiguration(locations = { "classpath:/spring/applicationContext.xml",
    "classpath:/spring/applicationContext-aop.xml",
    "classpath:/spring/applicationContext-dao.xml",
    "classpath:/spring/applicationContext-service.xml" })
@RunWith(SpringJUnit4ClassRunner.class)
public class TestManageTargetServiceImpl {

    @Autowired
    ManageTargetServiceImpl manageTargetServiceImpl;

    @Test
    public void testQueryFinancialMonthList() {
        List<Map<String, Object>> value = new ArrayList<Map<String, Object>>();
        ManageTargetDao manageTargetDao = mock(ManageTargetDao.class);
        when(manageTargetDao.queryFinancialMonthList()).thenReturn(value);
        manageTargetServiceImpl.setManageTargetDao(manageTargetDao);
        // I hope it return null
        assertNull(manageTargetServiceImpl.queryFinancialMonthList());
    }
} 
```

applicationContext-service.xml 代码：

```
<context:annotation-config />

<bean id="manageTargetService" class="com.aaa.service.impl.ManageTargetServiceImpl">
    <property name="manageTargetDao" ref="manageTargetDao"></property>
</bean> 
```

错误轨迹：

```
00:51:28,625 ERROR main context.TestContextManager:324 - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@882dfc] to prepare test instance [com.aaa.service.impl.TestManageTargetServiceImpl@ce2db0]
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.aaa.service.impl.TestManageTargetServiceImpl': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.aaa.service.impl.ManageTargetServiceImpl com.aaa.service.impl.TestManageTargetServiceImpl.manageTargetServiceImpl; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.aaa.service.impl.ManageTargetServiceImpl] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

一些日志：

```
00:51:26,828 DEBUG main context.TestContextManager:282 - beforeTestClass(): class [class com.aaa.service.impl.TestManageTargetServiceImpl]
00:51:26,828 DEBUG main annotation.ProfileValueUtils:68 - Retrieved @ProfileValueSourceConfiguration [null] for test class [com.aaa.service.impl.TestManageTargetServiceImpl]
00:51:26,828 DEBUG main annotation.ProfileValueUtils:80 - Retrieved ProfileValueSource type [class org.springframework.test.annotation.SystemProfileValueSource] for class [com.aaa.service.impl.TestManageTargetServiceImpl]
00:51:26,828 DEBUG main context.TestContextManager:315 - prepareTestInstance(): instance [com.aaa.service.impl.TestManageTargetServiceImpl@ce2db0]
00:51:26,843 DEBUG main support.DependencyInjectionTestExecutionListener:73 - Performing dependency injection for test context [[TestContext@e0eb3f testClass = TestManageTargetServiceImpl, locations = array<String>['classpath:/spring/applicationContext.xml', 'classpath:/spring/applicationContext-aop.xml', 'classpath:/spring/applicationContext-dao.xml', 'classpath:/spring/applicationContext-service.xml'], testInstance = com.aaa.service.impl.TestManageTargetServiceImpl@ce2db0, testMethod = [null], testException = [null]]].
00:51:26,843 DEBUG main support.AbstractGenericContextLoader:75 - Loading ApplicationContext for locations [classpath:/spring/applicationContext.xml,classpath:/spring/applicationContext-aop.xml,classpath:/spring/applicationContext-dao.xml,classpath:/spring/applicationContext-service.xml].
00:51:26,968  INFO main xml.XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [spring/applicationContext.xml]
00:51:27,187  INFO main xml.XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [spring/applicationContext-aop.xml]
00:51:27,312  INFO main xml.XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [spring/applicationContext-dao.xml]
00:51:27,421  INFO main xml.XmlBeanDefinitionReader:315 - Loading XML bean definitions from class path resource [spring/applicationContext-service.xml]
00:51:27,453  INFO main support.GenericApplicationContext:456 - Refreshing org.springframework.context.support.GenericApplicationContext@16c14e7: startup date [Tue Jan 01 00:51:27 NZDT 2013]; root of context hierarchy
00:51:27,718  INFO main config.PropertyPlaceholderConfigurer:177 - Loading properties file from class path resource [jdbc.properties]
00:51:27,796  INFO main support.DefaultListableBeanFactory:555 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2938d8: defining beans [loggingAop,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.aop.aspectj.AspectJPointcutAdvisor#0,service,loginDao,manageTargetDao,org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,dataSource,txManager,txAdvice,txDAO,org.springframework.aop.support.DefaultBeanFactoryPointcutAdvisor#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,loginService,manageTargetService]; root of factory hierarchy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:42:38.467

看看你的`property id`. 它应该`manageTargetServiceImpl`在你的`applicationContext-service.xml`

将其更改为：

```
<bean id="manageTargetServiceImpl" class="com.aaa.service.impl.ManageTargetServiceImpl">
    <property name="manageTargetDao" ref="manageTargetDao"></property>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T23:30:47.270

在这里猜测 - 但鉴于类类型 ManageTargetServiceImpl 的注入失败，我认为原因是正在为 ManageTargetServiceImpl 创建代理，因此 bean 的类型将不再是 ManageTargetServiceImpl 而是该类的接口。

从`Biju Kunjummen`

# c# - PictureBoxSizeMode 是错误的？

> ID：14101718
> 
> 赞同：-2
> 
> 时间：2012-12-31T12:39:26.783
> 
> 标签：c#, winforms

在 Listview 中投射时出错：

```
 private void listView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        int a = 1;
        string theimage = textBox1.Text + @"\allimages\";
        foreach (ListViewItem item in listView1.SelectedItems)
        {   
            // 39 zero's + "1"
            string initValue = new String('0', 3) + "0";
            // convert to int and add 1
            int newValue = Int32.Parse(initValue) + a;
            // convert back to string with leading zero's
            string newValueString = newValue.ToString().PadLeft(4, '0');

            string imageslist =  "product" + newValueString + "img";
            string[] images = Directory.GetFiles(theimage, imageslist + "*.jpg");

            // Cast the Picturebox
            PictureBox myPicBox = new PictureBox();
            myPicBox.Location = new Point(7, 240);
            myPicBox.Size = new System.Drawing.Size(140, 140);
            myPicBox.SizeMode = PictureBoxSizeMode.AutoSize;
            myPicBox.Margin = new Padding(3,3,3,3);
            myPicBox.Visible = true;
            myPicBox.Image = new Bitmap(images[1]);
            Controls.Add(myPicBox);
            System.Diagnostics.Debugger.Break();
            //List<PictureBox> pictureBoxList = new List<PictureBox>();
        }

    } 
```

这是我的错误：

> 错误 1 ​​'test.Form1.PictureBoxSizeMode()' 是一个'方法'，在给定的上下文 C:\Users\radiaku\Documents\Visual Studio 2008\Projects\test\test\Form1.cs 428 37 测试中无效

当我使用 button_click 处理程序时，上面的代码工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:42:38.830

听起来您的表单有一个*名为*`PictureBoxSizeMode`. 您可以更改方法名称，或将属性设置器更改为：

```
myPicBox.SizeMode = System.Windows.Forms.PictureBoxSizeMode.AutoSize; 
```

不过，更改方法名称会更简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:41:55.030

`PictureBoxSizeMode`仅当您在代码中命名了一个方法时，才会发生该错误。您应该将该方法重命名为其他名称。像这样的场景：

```
private void UserInput_KeyPress(object sender, KeyPressEventArgs e)
{
    PictureBox myPicBox = new PictureBox();
    myPicBox.Location = new Point(7, 240);
    myPicBox.Size = new System.Drawing.Size(140, 140);
    myPicBox.SizeMode = PictureBoxSizeMode.AutoSize;
    myPicBox.Margin = new Padding(3, 3, 3, 3);
    myPicBox.Visible = true;
}
private void PictureBoxSizeMode()
{
} 
```

或者用命名空间来限定它。

```
myPicBox.SizeMode = myPicBox.SizeMode = System.Windows.Forms.PictureBoxSizeMode.AutoSize; 
```

# c# - 带有非可选参数的路由（不是 MVC）

> ID：14101724
> 
> 赞同：1
> 
> 时间：2012-12-31T12:39:37.280
> 
> 标签：c#, asp.net, routing

我正在构建的网站需要有一个用户用户名作为 url 的一部分，例如：

> 我的域/用户 1

我已在 global.asa 中将其设置为：

```
routes.MapPageRoute("SubscriptionList","{Username}/","~/subscriptionlist.aspx"); 
```

但是，如果站点上有指向未路由页面的链接，例如 mydomain/login.aspx，这些链接将被路由到“订阅列表”页面。我认为这是因为所需的 URL`'{Username}/'`实际上可能什么都不是。如何设置路由，以便仅在用户名实际存在时触发上述内容？

另一种方法，我确信这不是最佳实践，是为网站上的每个页面设置一个路由。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T22:31:02.783

我认为这与路由表中路由的顺序有关。

据我了解，您应该确保此路由低于其他具有显式路由集的路由。

例如，这应该在路由下方，而不是处理到 Login.aspx 的路由，因为我认为规则是从上到下评估的。

还是我不明白这个问题=

# asp.net - ASP.net 在电子邮件地址上发送密码

> ID：14101725
> 
> 赞同：0
> 
> 时间：2012-12-31T12:39:40.247
> 
> 标签：asp.net, passwords

我已经搜索了如何在用户忘记密码的情况下进行密码恢复，但是我看到人们只为 g mail 编码，我需要一个示例，其中所有邮件都已完成或编写某种类型的通用代码来做到这一点。我想将用户电子邮件作为输入并将他的密码发送到他的邮件收件箱。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:41:03.867

独立于用户的电子邮件提供商，发送电子邮件的工作方式完全相同。这是一个标准协议。您是如何得出您在网上看到的代码仅适用于 GMail 的结论的？

# java - 如何发现网络上 Tomcat 服务器的 IP 地址？

> ID：14101727
> 
> 赞同：2
> 
> 时间：2012-12-31T12:39:55.580
> 
> 标签：java, tomcat, networking

我有一个使用本地网络上的 web 服务的 Android 应用程序。有一个配置屏幕，用户在其中通知正在运行 Apache Tomcat 的服务器 IP 地址。

我正在寻找一种基于当前连接的 wi-fi 网络自动检测服务器的方法。即：智能手机IP为10.1.1.90，服务器IP为10.1.1.254。

有没有办法做到这一点？我正在考虑使用 ping，但我不知道是否是一个好主意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:22:21.970

The way I understand it, you need to discover IP of your tomcat server and connect it using your client.

I am assuming , both the server and client is in your control. One simple way can be to use [jGroups](http://www.jgroups.org/) Cluster.

*   You can make your tomcat discoverable
*   Client can discover it using the name of the cluster you have provided .Refer the [JChannel](http://www.jgroups.org/javadoc/org/jgroups/JChannel.html) API that Jgroups uses

I simulated it making following server class

```
public class TomcatServer {

    JChannel channel;

    private void start() throws Exception {
        channel = new JChannel(); // use the default config, udp.xml
        channel.connect("TomcatCluster");
    }

    public static void main(String[] args) throws Exception {
        new TomcatServer().start();
    }
} 
```

The simulated client class

```
public class MobileApp extends ReceiverAdapter {

    JChannel channel;

    private void start() throws Exception {
       channel = new JChannel(); // use the default config, udp.xml
        channel.setReceiver(this);
        channel.connect("TomcatCluster");
        channel.close();
    }

    public static void main(String args[]) throws Exception {
        new MobileApp().start();
    } 
```

The client will provide you following information

GMS: address=MACHINENAME-47879, cluster=TomcatCluster, physical address=xxxxx:0:xxx:xxxx:xxxx:xxxx:xxx:xxxx:xxxx

** view: [MACHINENAME-31239|1] [MACHINENAME-31239, MACHINENAME-47879]

Where MACHINENAME-47879 is the client machine and port & MACHINENAME-31239 is the tomcat server name and port

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T12:49:32.440

你想检测“一个 tomcat 服务器”还是“你的 tomcat 服务器”？

我的意思是，你有什么方法来定制你的服务器吗？如果是这种情况，那么您可以在您的服务器上创建一个非常简单的测试页面（比如“Hello”JSP 页面），您的 Android 应用程序可以查找该页面。

如果您的 Android 收到带有 GET 请求的“Hello”结果`http://<tomcat_ip>/hello.jsp`，那么您可能会假设该 tomcat 在线。

如果您无法添加此测试页面，那么您可以测试服务器应该提供的任何页面。（即使是有时配置不正确的404页面，并显示tomcat版本......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T12:54:54.620

Tomcat 响应标头可以包含[xpoweredBy](http://tomcat.apache.org/tomcat-5.5-doc/config/http.html)字段，该字段将在启用时宣传 Tomcat。然而，出于安全考虑，它通常被禁用，甚至默认禁用。但是，如果您需要准确地自动检测 Tomcat 服务器，您可以重新启用它。另一方面，确实，如果您可以在您的服务器上放置一个网页，您可以简单地放置一个带有商定签名的标记页面。

如果服务器IP未知，我会提出以下方法来检测网络上的服务器：

*   最直接的方法是进行广播 ping（例如`ping -b broadcast_address`，可以在[此处](http://tomcat.apache.org/tomcat-5.5-doc/config/http.html)计算广播地址）。如此配置的所有网络设备都会回复，然后如上所述验证哪一个是服务器。但是，ping 广播地址需要有根电话。另外路由器可能不支持。
*   您的 DHCP 服务（很可能是您的路由器）通常可以配置为始终为服务器网卡的相同 MAC 地址发出相同的 IP 地址。
*   If the server is a desktop computer or laptop, it could show its address as QR code on display. It is possible for a smartphone to scan the code from the screen, and this is way easier than to enter IP address through the touchscreen. QR code can also include auto-generated password for extra security.
*   If there is wireless router with the possible login where both server and client are connected, the internal pages of that router often contain the relevant IP addresses. You would need to implement logging into the router and doing some screen scrapping.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T13:42:08.643

I made an Android app which used a local server in the WLAN. I made the terminal (the phone) broadcast it's own IP address, which the server then picked up.

I used MultiCast class on the phone, which added the ip-address of itself to the payload. The server always has a thread in multicast read class that obains the payload of the packet (which is the terminals ip-address). Set the terminal in datagram read state and send the servers ip-address to terminal.

Maybe are better ways, but a great way to get the ip-addresses of unknown terminals in the network.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T06:39:15.787

The way i had resolved this problem is with the use of enumerations.

```
public String getLocalIpAddress()
{

    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) {
                    return inetAddress.getHostAddress().toString();
                }
            }
        }
    } catch (Exception ex) {
    }
    return null;
}
} 
```

# xml - 隐式和显式 bean 声明可以一起工作吗

> ID：14101728
> 
> 赞同：0
> 
> 时间：2012-12-31T12:39:57.090
> 
> 标签：xml, jsf-2, managed-bean

是否有可能在同一个应用程序中同时使用隐式和显式 bean 声明，我的意思是 @ManageBean 和 faces-config.xml 中的显式托管 bean，我知道它很少使用，但我觉得尝试一下，好奇心让我丧命，结束了获得空值，对此非常赞赏。

更新：很抱歉没有用代码片段备份我的问题。

从 managedbean 开始：

```
package pck;
import javax.faces.bean.*;
import java.io.*;
@ManagedBean   
public class SimpleController implements Serializable{
private String message="";

public String getMessage() {
return(message);
}

public void setMessage(String message) {
this.message = message;
}

public String doNavigation() {
 if (message.trim().length() < 2) {
  return("too-short");
 } else {
  String[] results =  { "page1", "page2", "page3" };
  return(RandomUtils.randomElement(results));
 }
 }
 } 
```

faces-config.xml 的东西：

```
<?xml version="1.0"?>
<faces-config xmlns="http://java.sun.com/xml/ns/javaee" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
  http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
 version="2.0">

 <managed-bean>
<managed-bean-name>messageHandler</managed-bean-name>
<managed-bean-class>
  pck.SimpleController
</managed-bean-class>
<managed-bean-scope>session</managed-bean-scope>
</managed-bean>

<navigation-rule>
<from-view-id>*</from-view-id>
<!--     <navigation-case>
  <from-outcome>too-short</from-outcome>
  <to-view-id>/error-message.xhtml</to-view-id>
 </navigation-case> -->
<navigation-case>
  <from-outcome>page1</from-outcome>
  <to-view-id>/result-page-1.xhtml</to-view-id>
</navigation-case>
<navigation-case>
  <from-outcome>page2</from-outcome>
  <to-view-id>/result-page-2.xhtml</to-view-id>
</navigation-case>
<navigation-case>
  <from-outcome>page3</from-outcome>
  <to-view-id>/result-page-3.xhtml</to-view-id>
</navigation-case>
</navigation-rule>
 <navigation-rule>
<from-view-id>*</from-view-id>
  <navigation-case>
 <from-outcome>too-short</from-outcome>    
  <to-view-id>/error-message.xhtml</to-view-id>
</navigation-case>
</faces-config> 
```

欢迎小脸：

```
<h:form>
 <!-- If I used implicit bean declaration, It heads to error-page.xhtml, however I insert 
  more-than-letter word -->       
 <h:inputText value="#{messageHandler.message}"/> 
<br/>
<!-- If I used implicit bean declaration along with condition above, It heads successfully to
     a random result page, But with a null expression value -->
 <h:commandButton value="Show Results" action="#{messageHandler.doNavigation}"/>
</h:form> 
```

结果小面：

只有一个表达式值的页面，但这次使用显式 bean 声明

```
 <h2>Your message: "#{messageHandler.message}"</h2> 
```

如果使用隐式或显式 bean 声明，它可以完美运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:51:39.230

您忘记将托管 bean 范围与`@ManagedBean`. 然后，它将默认为`@NoneScoped`有效地意味着在`#{messageHandler}`. 输入字段将获得自己的实例。命令按钮将获得自己的实例。结果页面中的“您的消息”行将获得自己的实例。您实际上最终得到了三个完全不同的实例，而不是只有一个。

鉴于您通过 XML 将 bean 放置在会话范围内，您应该使用`@SessionScoped`注释执行相同的操作。这样，将在整个 HTTP 会话中使用同一个 bean 实例。

```
@ManagedBean(name="messageHandler")
@SessionScoped 
```

*（请注意，我指定了托管 bean 名称以及类名不是`MessageHandler`，但是`SimpleController`；您在问题中忘记了这一点，这可能只是粗心）*

请注意，XML 声明始终优先于注释声明。因此，如果两者都存在，则 XML 声明将始终覆盖注释声明。

# gwt - GWT 图表库 - 能够放大图表内的组件

> ID：14101732
> 
> 赞同：0
> 
> 时间：2012-12-31T12:40:33.877
> 
> 标签：gwt, charts

我对我的 GWT 图表库有特定要求。我需要一个支持各种图表（条形图、折线图、饼图）的库，并且应该能够处理图表内部的事件（例如单击条形图中的条形图 - 这将允许我将额外信息显示为单击时弹出）。

我知道传统观点认为不使用 Flash/Flex 或第三方嵌入式组件是不可能的，但我假设会有一个 HTML5 图表库允许我这样做。我曾尝试搜索但未成功。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:23:49.723

我不是 FusionCharts 的粉丝。他们有精美的图表，但错过了 HTML5 的市场趋势，并允许 Highchart 抢占图表市场。

一个很好的分析方法是选择 Fusion Charts 比赛作为起点，然后列出你的参数。下面的链接是重型营销。仅使用它来了解 Fusion Chart 的竞争对手是什么。 [http://www.fusioncharts.com/success-stories/competition-and-us/](http://www.fusioncharts.com/success-stories/competition-and-us/)

上面链接上的其余内容更多的是营销bs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T13:19:46.793

[Google Charts](http://code.google.com/p/gwt-google-apis/wiki/VisualizationGettingStarted)支持所有这些，AFAIK。

还是这个答案太明显了？

并且有一个可用的 GWT 包装器。

# ios - 在 CoreData 中传递对象

> ID：14101733
> 
> 赞同：1
> 
> 时间：2012-12-31T12:40:34.413
> 
> 标签：ios, ios5, core-data, nsmanagedobject, nsmanagedobjectcontext

我在我的应用程序中使用 CoreData，它是一对多的关系，我有两个名为`folders`and的实体`files`。所以一个文件夹可以有很多文件。所以我的第一个视图控制器显示所有文件夹，当单击每个文件夹时，我显示其中存在的文件。

现在，其中存在的所有文件夹和文件都是由用户动态创建的，而不是来自任何数据库或 Web 服务器。

现在我又多了一个视图控制器，我从应用程序委托中打开它，在这里我想显示一些文件。

我知道首先我们应该通过`managedObjectContext`，它将在应用程序委托中声明

```
ViewController *View = [[ViewController alloc]initWithNibName: @"ViewController" bundle:nil]
View.managedObjectContext = self.managedObjectContext; 
```

所以如果我们只是通过`managedObjectContext`，我们可以访问文件实体对象，或者我们也必须传递文件实体对象。

现在如您所知，我有两个实体，称为`Folder`和`File`，现在要访问存储在任何文件夹中的文件，我就是这样做的。

```
NSMutableArray *filesArray = [self.folder.file mutableCopy]; 
```

但是现在，我想在anyView中显示我想要的文件，可以二三导航后打开，也可以直接从appDelegate.m打开。

非常清楚，我的问题是如何做到这一点？即我怎样才能从`AppDelegate`.

基于以下答案编辑。我以这种方式创建了一个 fetchResultsController

```
- (NSFetchedResultsController *)fetchedResultsController {

    if (m_fetchResultsController != nil) {
        return m_fetchResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"File" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"alarm" ascending:YES];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];
    [fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"alarm!= nil"]];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
    aFetchedResultsController.delegate = self;
    self.fetchResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    
    return  m_fetchResultsController;   
} 
```

在 ViewDidLoad 中，我是这样写的

```
- (void)viewDidLoad
{
    [super viewDidLoad];
   NSError *error;
    if (![[self fetchedResultsController] performFetch:&error]) {
        // Update to handle the error appropriately.
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        exit(-1);  // Fail
    }

     NSMutableArray *alarms = [[self.fetchResultsController fetchedObjects]mutableCopy];

    NSLog(@"alarmsCount:%d",[alarms count]);
} 
```

问候兰吉特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:50:18.267

如果您分享更多详细信息，我们可以为您提供帮助，但与此同时...

如果主控制器显示文件夹而细节控制器显示文件，只需将所选文件夹的引用注入细节控制器即可。

比如像这样在detail控制器中创建一个属性（需要合成）

```
@property (nonatomic,strong) Folders* currentFolder; 
```

创建细节控制器时，请执行以下操作

```
DetailController* detCtr = // alloc-init here
detCtr.currentFolder = // the folder you want to pass in 
```

*一些笔记*

使用骆驼案例表示法。用于`NSFetchedResultsController`延迟加载与表等相关的数据。重命名实体`Files`并`Folders`以其单数形式。

**编辑**

好的，所以如果你想从应用程序中的任何地方访问你的应用程序委托，你可以调用

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
[appDelegate someMethod]; 
```

在这里，您可以使用在 .h 中声明并在 .m 中合成的公共属性检索您感兴趣的文件夹。

现在，这不是一个很好的方法。AppDelegate 类将保持原样。

另一种更优雅的方法是创建一个名为`SharedManager`（或其他）的单例来存储`currentFolder`需要可视化的内容。

共享管理器看起来像

```
//.h
@property (nonatomic,strong) Folder* currentFolder;

+ (SharedManager*)sharedInstance;

//.m
@synthesize currentFolder;

+ (SharedManager*)sharedInstance
{
    static dispatch_once_t once;
    static id sharedInstance;
    dispatch_once(&once, ^{
        sharedInstance = [[SharedManager alloc] init];
    });
    return sharedInstance;
} 
```

也就是说，导入后，它将用于将文件夹设置为当前文件夹

```
[[SharedManager sharedInstance] setCurrentFolder:theFolderYouWantToShare]; 
```

或检索当前文件夹

```
Folder* theSharedFolder = [[SharedManager sharedInstance] currentFolder]; 
```

PS 不要滥用单身人士。我使用的单例模式需要 iOS 4 或更高版本。

**编辑 2**

是我的错。我不明白这个问题。

如果您需要检索所有文件，您可以创建一个`NSFetchRequest`如下所示的：

```
NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"File" inManagedObjectContext:context]; 

NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];

NSError *error = nil; 
NSArray *results = [context executeFetchRequest:request error:&error]; 
```

where`results`将包含来自任何文件夹的商店**中的所有文件。**您可以使用此数组在表中显示文件。

如果你有很多文件，我真的建议你看看`NSFetchedResultsController`class。它允许与`UITableView`.

你可以在这里找到一个很好的教程：[如何使用 NSFetchedResultsController](http://www.raywenderlich.com/999/core-data-tutorial-how-to-use-nsfetchedresultscontroller)

**编辑 3**

> 如何进行提醒？

您应该向您的请求（与您一起使用的请求`NSFetchedResultsController`）提供如下谓词

```
[request setPredicate:[NSPredicate predicateWithFormat:@"reminder != nil"]]; 
```

通过这种方式，您可以检索没有提醒的文件`nil`。`reminder`是您在模型中使用的属性。

PS 检查代码，因为我在没有 Xcode 支持的情况下编写。

# django - django 如何编写匹配 NESTED SELECT 的查询集

> ID：14101736
> 
> 赞同：1
> 
> 时间：2012-12-31T12:40:41.130
> 
> 标签：django, orm, django-models

我需要获取查询集，这与 SQL 中的类似：

```
select * from kraj
where kraj_id in (select kraj_id from klient_kraj where klient_id = 1) 
```

如您所见，我使用`klient_kraj`模型，它被过滤并返回 1 列`kraj_id`，然后用于另一个过滤。

我无法找到方法，如何使用 ORM 获取此查询集。

谢谢

# java - Spring 3 的 Quartz 2 实现不再支持 requestsRecovery

> ID：14101741
> 
> 赞同：2
> 
> 时间：2012-12-31T12:41:14.017
> 
> 标签：java, quartz-scheduler, spring-3

根据 Quartz 2 的[文档](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-03)

> **RequestsRecovery** - 如果一个作业“请求恢复”，并且它在调度程序的“硬关闭”期间执行（即它在崩溃中运行的进程，或者机器被关闭），那么它会被重新执行当调度程序再次启动时。在这种情况下，JobExecutionContext.isRecovering() 方法将返回 true。

Spring3 支持 Quartz 1.x 和 Quartz 2.x。如果我们使用 Quartz 1.x 那么我们需要使用以下配置来创建`JobDetail`bean：

```
<bean id="ldapSynch" class="org.springframework.scheduling.quartz.JobDetailBean">
    <property name="jobClass" value="com.edfx.adb.scheduling.job.LDAPSynchronizer" />
    <property name="requestsRecovery" value="true" />       
</bean> 
```

内部`org.springframework.scheduling.quartz.JobDetailBean`扩展`org.quartz.JobDetail`，并且在 Quartz 1.x`org.quartz.JobDetail`中有一个 setter `public void setRequestsRecovery(boolean shouldRecover)`。

但是如果我们使用 Spring3 的 Quartz 2.x 实现，则上述配置更改为：

```
<bean id="ldapSynch" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
    <property name="jobClass" value="com.edfx.adb.scheduling.job.LDAPSynchronizer" />
    <property name="requestsRecovery" value="true" />       
</bean> 
```

而且在 Quartz 2.x 中也没有这样`org.quartz.JobDetail`的类，而是一个`interface`并且最终`org.springframework.scheduling.quartz.JobDetailFactoryBean`不再接受参数`<property name="requestsRecovery" value="true" />`。

我们怎么能把这个重要的东西传递`parameter`给 Quartz 的调度器呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T12:41:14.017

在查看了类的`org.springframework.scheduling.quartz.JobDetailFactoryBean`源代码和 Quartz 2.0 的源代码后，我发现其中有一种`init method`是; 在此方法中，正在创建的实例。幸运的是，这个实例可以通过类的方法访问。`org.springframework.scheduling.quartz.JobDetailFactoryBean``public void afterPropertiesSet()``org.quartz.JobDetail``org.quartz.JobDetail``public JobDetail getObject()``org.springframework.scheduling.quartz.JobDetailFactoryBean`

在 Quartz 2.0 中，类`org.quartz.impl.JobDeialImpl`实现了接口`org.quartz.JobDetail`；所以`org.quartz.JobDetail`in`org.springframework.scheduling.quartz.JobDetailFactoryBean`的实例实际上是 的实例`org.quartz.impl.JobDeialImpl`。

所以我创建了一个类`com.edfx.adb.scheduling.ADBJobDetailFactoryBean`，它扩展`org.springframework.scheduling.quartz.JobDetailFactoryBean`并覆盖了该`afterPropertiesSet()`方法：

```
package com.edfx.adb.scheduling;

import org.quartz.impl.JobDetailImpl;
import org.springframework.scheduling.quartz.JobDetailFactoryBean;

public class ADBJobDetailFactoryBean extends JobDetailFactoryBean {

    private boolean requestsRecovery;

    public ADBJobDetailFactoryBean() {
        super();
    }

    @Override
    public void afterPropertiesSet() {
        super.afterPropertiesSet();
        JobDetailImpl jobDetail = (JobDetailImpl) getObject();
        jobDetail.setRequestsRecovery(isRequestsRecovery());
    }

    public boolean isRequestsRecovery() {
        return requestsRecovery;
    }

    public void setRequestsRecovery(boolean requestsRecovery) {
        this.requestsRecovery = requestsRecovery;
    }
} 
```

并将spring bean配置更改为：

```
<bean id="ldapSynch" class="com.edfx.adb.scheduling.ADBJobDetailFactoryBean">
    <property name="jobClass" value="com.edfx.adb.scheduling.job.LDAPSynchronizer" />
    <property name="requestsRecovery" value="true" />       
</bean> 
```

瞧。我已经通过在调度程序执行任务时停止运行服务器来测试这一点，当我重新启动服务器时，调度程序开始执行未完成的作业。

希望它会帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T17:35:50.547

@tapas-bose 在搜索一些石英信息时遇到了你的帖子。看起来 Spring 3.2 支持设置属性*requestsRecovery*。我不知道哪个版本的Spring 3。？您在回答中提到了您遇到的问题。

我直接通过 setter 注入设置 requestsRecovery 属性，它对我有用。

```
 <bean name="continousMonitoringProfileNotificationPushProcessing"     class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
  <property name="jobClass" value="com.mycompany.projectApp.jobs.ContinousMonitoringNotificationPushJobBean" />
    <property name="jobDataAsMap">
        <map>
            <entry key="executionSuccessful" value="true"/>
        </map>
    </property>
    <property name="durability" value="true" /> 
    <property name="requestsRecovery" value="true"/>
 </bean> 
```

当我为 JobDetailFactoryBean 反编译代码时，它会覆盖 afterPropertiesSet 方法，该方法创建 JObDetailImpl 实例并设置 requestsRecovery，（反编译代码如下）

```
 public class JobDetailFactoryBean implements FactoryBean<JobDetail>, BeanNameAware, ApplicationContextAware, InitializingBean
 {
 private String name;
 private String group;
 private Class jobClass;
 private JobDataMap jobDataMap = new JobDataMap();
 private boolean durability = false;
 private boolean requestsRecovery = false;

...

.. 

..

 public void afterPropertiesSet()
{
  if (this.name == null) {
  this.name = this.beanName;
 }
  if (this.group == null) {
  this.group = "DEFAULT";
 }
if (this.applicationContextJobDataKey != null) {
 if (this.applicationContext == null) {
        throw new IllegalStateException("JobDetailBean needs to be set up in ApplicationContext to be able to handle an 'applicationContextJobDataKey'");
    }
 getJobDataMap().put(this.applicationContextJobDataKey, this.applicationContext);
 }
 Class<?> jobDetailClass;
 try
 {
      jobDetailClass = getClass().getClassLoader().loadClass("org.quartz.impl.JobDetailImpl");
  }
  catch (ClassNotFoundException ex) {
      jobDetailClass = JobDetail.class;
  }
  BeanWrapper bw = new BeanWrapperImpl(jobDetailClass);
  MutablePropertyValues pvs = new MutablePropertyValues();
  pvs.add("name", this.name);
  pvs.add("group", this.group);
  pvs.add("jobClass", this.jobClass);
  pvs.add("jobDataMap", this.jobDataMap);
  pvs.add("durability", Boolean.valueOf(this.durability));
  pvs.add("requestsRecovery", Boolean.valueOf(this.requestsRecovery)); 
```

所以我们不需要手动扩展 JobFactoryBean 类并设置 requestsRecovery 属性。

# android - Android TCP/IP MTU 的构建时配置

> ID：14101746
> 
> 赞同：2
> 
> 时间：2012-12-31T12:41:30.180
> 
> 标签：android, tcp, ip, mtu

我知道可以在运行时读取和设置 MTU，例如：

```
adb shell ip -d -s l l dev rmnet0
adb shell ifconfig rmnet0 mtu <MTU> 
```

存在这样设置的MTU在重启手机后不成立的问题。

那么，在使用 Android 开源项目源构建自己的构建时，如何为接口配置默认 MTU？

似乎在任何地方都没有提到这一点，并且 grepping 代码似乎没有帮助。此外，在 Android 中似乎不存在执行此操作的默认 Linux 内核配置文件。

肯定有办法做到这一点，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:47:55.787

显然 PMTUD 是一个更好的解决方案（RFC 4821）。通过在“on boot”部分的末尾添加以下行，可以在 init.rc（例如 system/core/rootdir/init.rc）中的 AOSP 构建中启用它：

```
on boot
# Other configurations here...

# Set TCP MTU Probing to automatic:
    write /proc/sys/net/ipv4/tcp_mtu_probing 1 
```

# mysql - AUTO_INCREMENT 在事务中的可靠性如何？

> ID：14101751
> 
> 赞同：2
> 
> 时间：2012-12-31T12:42:19.807
> 
> 标签：mysql, transactions, auto-increment

我计划在我的网站上使用自动递增的用户 ID。由于用户数据将被拆分到多个表中，我想知道事务中自动递增值的可靠性如何，即在注册时将一些初始值插入事务中的表时，让自动递增器设置是否安全所有表中的 ID 还是应该只插入到一个表中，在单独的查询中获取插入的 ID 并在后续插入中使用它，从而导致更高的数据库负载仅用于用户创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:36:04.137

每次您尝试插入某些内容时，都会保留自动增量字段。插入或多或少分两步进行：

1：保留下一个可用的自增键
2：用这个保留的键执行插入

现在，如果事务回滚，唯一永远无法回滚的就是自增预留，导致自增列出现间隙。正因为如此，如果您试图 100% 预测自动增量将是多少，则不可能这样做。据我所知，auto_increment 没有其他问题，而且在几乎所有情况下，依赖 mysql 的功能比尝试手动执行某些操作更可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:57:31.480

如果您的插入发生在非常受控的条件下，例如没有并发事务，并且没有任何内容回滚，那么您可能是安全的。否则，答案可能取决于您使用的存储引擎。[至少如果您使用 InnoDB](http://dev.mysql.com/doc/refman/5.1/en/innodb-auto-increment-handling.html) ，您应该期望`auto_increment`在编号中产生空白。

更一般地说，我知道的每个数据库都有可能在`auto_increment`（或等效的）值中存在差距。原因是如果不是这样，任何插入新行的事务都必须阻止对该表的所有其他插入。这是因为如果第一个事务尚未提交或回滚，则无法知道下一个值将是什么时，无法插入第二行。如果您允许间隙，那么您只是假设第一个事务将提交，如果它碰巧回滚，您就有间隙，但这不是问题。

如果您担心用户创建操作的高负载，您可以通过将函数实现为存储过程来使事情变得更快捷；通过这种方式，您可以避免每次查询都返回到应用程序。

# iphone - 寻找 Xcode 设置文件夹

> ID：14101763
> 
> 赞同：3
> 
> 时间：2012-12-31T12:43:15.243
> 
> 标签：iphone, objective-c, xcode

所以在这个问题之后：[xcode中的文本光标没有输入。没有回答闪烁的矩形而不是闪烁的线](https://stackoverflow.com/questions/14090883/text-cursor-in-xcode-isnt-typing-blinking-rectangle-instead-of-a-blinking-line/14090952#comment19489136_14090952)我已经在系统上创建了一个新用户并且 xcode 在那里工作正常，所以我回到旧用户名并开始在系统周围搜索可疑文件。我正在寻找任何与 Xcode 用户相关的文件夹，它可以包含任何类型的设置供我删除。我无法从终端重置 xcode（这就像使用我创建的新用户一样），因为我不想丢失 xcode 中有很多配置密钥和很多最近的数据。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:56:12.280

您可以尝试杀死所有首选项文件：任何与 Xcode 相关的项目`~/Library/Preferences`

然后你可以删除共享数据：

`~/Library/Application Support/Shared/`

和

`~/Library/Developer/`

# php - Preg_match 与不同的单词组合

> ID：14101766
> 
> 赞同：0
> 
> 时间：2012-12-31T12:43:18.500
> 
> 标签：php, preg-match, substr

我有一个关于 preg_matches 的小问题，这些正则表达式的东西真的很难理解，我希望有人能给出正确的 awnser！

我有以下文字：

```
0A-24-423 
```

但这也可以是：

```
0A-242-2 
```

或者

```
0A-2-423 
```

如何使用 preg_matches 过滤这些？我正在使用

```
substr($something, 0,2) 
```

以便它捕获 0A 和

```
substr($seat, 4,5) 
```

这将捕获 24，但是当您获得 242 时，它不会捕获最后的 2....

希望有人可以帮助在 preg_match 中创建它！

为了更清楚我现在拥有的东西：

```
 foreach($_POST['seats'] AS $seat) {
        if ($count > 0) {
            $selectQuery .= " || ";
        }
        $selectQuery .= " ( rowId = '" . substr($seat, 0,2) . "'";
        $selectQuery .= " and `order` = " . substr($seat, 3,5) . "  ";
        $selectQuery .= " and columnId = " . substr($seat, 6) . " ) ";
        $count++; 
```

并且 $seat 具有以下格式 XXXXXX 并且使用 substr 我可以获得正确的东西（例如：0J3017）

像这样的事情应该这样做：

```
 $selectQuery = "SELECT * from seats where ";
    $count = 0;
$pattern = "I DON'T KNOW :( ";
    foreach($_POST['seats'] AS $seat) {
        if ($count > 0) {
            $selectQuery .= " || ";
        }
        preg_match($pattern, $seats, $matches);
        $selectQuery .= " ( rowId = '" . $matches[0] . "'";
        $selectQuery .= " and `order` = " . $matches[1] . "  ";
        $selectQuery .= " and columnId = " . $matches[2] . " ) ";
        $count++; 
```

并且 $seats 在帖子的开头进行了解释（它的格式为`XX-XXX-XXX`

```
where the first 2 XX  are 0[A-Z] (yes the 0 is correct)
where the 3 first XXX are [0-9]
Where the last 3  XXX are [0-9] 
```

编辑：有两种方法可以解决这个问题。

选项1：

```
$pattern = "/(.*)-(.*)-(.*)/"; 
```

或使用explode() 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T14:10:36.733

看起来您不需要使用正则表达式。这是一个使用[`explode()`](http://php.net/explode)and的示例[`list()`](http://php.net/list)：

```
list($row_id, $order, $column_id) = explode('-', $seat, 3); 
```

然后，您可以在`$selectQuery`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:50:15.843

**编辑：**由于 OP 已将他的要求作为对我的答案的评论，因此我已相应地更新了我的答案。

你可以试试这个：

```
$pattern = "/[A-Z\d]{1,2}-[A-Z\d]{1,3}-[A-Z\d]{1,3}/";
$matched = preg_match($pattern, $something);
if ($matched === 0) {
  die('regex did not match');
} 
```

`$matched`会给你`1`一个匹配的字符串，`0`如果*不*匹配。

# hibernate - 从休眠中的命名查询返回字符串结果

> ID：14101773
> 
> 赞同：1
> 
> 时间：2012-12-31T12:43:40.113
> 
> 标签：hibernate, named-query

如何在 Query 类型的命名查询中返回 String 类型的结果......我试过的代码

```
public String getTargetEmail(){
    Query query= em.createNamedQuery("BC_READ_SYSTEM_PROPERTIES_BY_NAME");
    return (String)query.toString();
} 
```

但这会返回其他类似的东西`org.hibernate.ejb.QueryImpl@3e4d072b`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T13:03:20.107

在 Query 对象上调用**toString**，您只会得到它的字符串表示形式。您实际上需要像这样执行查询

```
return (String) query.getSingleResult(); 
```

确保查询始终只返回一个结果，否则调用**getSingleResult**将抛出**NonUniqueResultException**异常以防返回多个结果，或**NoResultException**以防不返回任何结果（请查看[此处](http://docs.oracle.com/javaee/5/api/javax/persistence/Query.html#getSingleResult%28%29)的文档）

# tomcat - 如何在openshift tomcat应用程序上上传geoserver

> ID：14101774
> 
> 赞同：4
> 
> 时间：2012-12-31T12:43:59.030
> 
> 标签：tomcat, geoserver, openshift

我在 Tomcat 类型（jbossews-1.0）中制作了一个 openshift 应用程序，并希望在其上上传 Geoserver。我更改了我的 geoserver.war，如下所述：http://dubrovsky.posterous.com/geoserver-on-openshift 并将其添加到我的应用程序名称/webapps 中。但它不起作用，而我在 webapps 中添加了简单的“Hello World”并且它起作用了。如何运行我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T20:36:00.277

博客文章在这里 [https://www.openshift.com/blogs/build-your-own-google-maps-and-more-with-geoserver-on-openshift](https://www.openshift.com/blogs/build-your-own-google-maps-and-more-with-geoserver-on-openshift)

它有一个开箱即用的 github 存储库

# asp.net - 正则表达式检查字符串是否包含至少一个字母或数字

> ID：14101775
> 
> 赞同：3
> 
> 时间：2012-12-31T12:44:02.663
> 
> 标签：asp.net, regex

我想要一张`regular expression`支票`string`必须至少包含一个字母`[a-zA-Z]`或一个`digit`. 所有其他`special characters`的都是允许的，但现在只`special characters`或仅`spaces`或`only spaces with special characters`将被接受。

我已经尝试过等等`/\b(?=[A-Z]*[0-9])(?=[0-9]*[A-Z])[\s\S]\b/i`。但它不起作用。等待您的宝贵回复。`^(a-zA-Z0-9).*[\s\S]*$``^(a-zA-Z0-9).*[\s].*[\S]*$`

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T14:55:08.643

```
^(?=.*[\w\d]).+ 
```

如果没有**至少** *一个字符*或*一个数字包含**特殊字符和空格*的任意组合，则此模式将失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T13:39:43.670

我不确定我是否正确理解了您，但从我收集到的信息中，您希望字符串中至少包含一个字母（az，0-9）。这个正则表达式将做到这一点：`/^(?=.*[a-z\d]).+/igm`

（设置标志，但是它们需要在 asp.net 中设置。`m`-flag 对您来说可能是多余的，我只将它用于演示。`g`-flag 可能不存在。如果存在，只需将其删除。）

演示+说明：[http ://regex101.com/r/jY9fJ5](http://regex101.com/r/jY9fJ5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T13:05:47.157

如果您需要至少一个字母或数字，后跟空格和符号：

```
/^.*[a-zA-Z0-9][^a-zA-Z0-9]*$/ 
```

如果您*只*想要一个字母或数字，则后跟相同：

```
/^[^a-zA-Z0-9]*[a-zA-Z0-9][^a-zA-Z0-9]*$/ 
```

我无法想象你还在寻找什么。例子会有很大帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-17T16:28:57.520

```
(?=.*?[0-9])(?=.*?[A-Za-z]).+
Allows special characters and makes sure at least one number and one letter.

(?=.*?[0-9])(?=.*?[A-Za-z])(?=.*[^0-9A-Za-z]).+
Demands at least one letter, one digit and one special-character. 
```

第一个不需要特殊字符，只允许它们。

# grails - 升级到 2.1.2 后 dbm-update 不起作用

> ID：14101778
> 
> 赞同：1
> 
> 时间：2012-12-31T12:44:39.190
> 
> 标签：grails, grails-plugin, grails-2.0

grails dbm-update 假设执行 changelog.goovy 中提供的所有数据库更改。它曾经在 2.1.1 中运行良好，但在将应用程序升级到 2.1.2 后停止运行。它没有给出任何错误，但它根本不执行更改日志。任何意见。

# java - Java中的Json数组

> ID：14101782
> 
> 赞同：0
> 
> 时间：2012-12-31T12:45:27.943
> 
> 标签：java, json

我有一个 JSON 数组：

```
**
**
 {
      "Required" : true,
      "Validation" : {
        "MaxChars" : "40"
        "MinChars" : "10"
      }
  }
**
** 
```

现在的代码：

```
 JSONObject formField = formListAdapter.formArray.getJSONObject(i);

 if(formField.has("Required") && formField.getBoolean("Required") == true){

 } 
```

使用上述代码，我可以检查 JSON 中是否有一个名为“Required”的字段，以及是否属实。但是如何检查 Validation 里面是否有属性呢？以及如何检查它的名称和价值？即如何检查 MaxChars 或 MinChars 的数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:02:53.277

您可以使用[JSONObject#getJSONObject](http://www.json.org/javadoc/org/json/JSONObject.html#getJSONObject%28java.lang.String%29)来获取与键对应的 JSONObject，然后您可以执行相同的操作来从键中获取值。

```
JSONObject validationObject = formField.getJSONObject("Validation"); 
```

或者你可以使用更好的方法，使用[杰克逊](http://jackson.codehaus.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T21:13:04.590

```
JSONObject validationObject = jsonObject.getJSONObject("Validation");
if (validationObject.has("MaxChars")) {
   int maxChars = validationObject.getInt("MaxChars");
   ...
}

// same for MinChars 
```

要获取 的属性名称`validationObject`，您可以使用：

```
String[] names = JSONObject.getNames(validationObject); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:51:20.323

您必须检查“验证”对象的值。我从未使用过 json.org，但我相信您可以从中创建一个新的 JSONObject 并读取值，就像您使用数组中的对象一样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T12:53:15.797

您希望[JSONObject.getJSONObject(String field)](http://www.json.org/javadoc/org/json/JSONObject.html#getJSONObject%28java.lang.String%29)获取包含的 JSON 对象。

# java - JSONException : java.lang.string 类型的值无法转换为 JSONObject

> ID：14101783
> 
> 赞同：3
> 
> 时间：2012-12-31T12:45:28.733
> 
> 标签：java, php, android, json

我正在尝试在 android 中创建一个登录界面，我想连接到一个连接到数据库的 php 文件。数据库名为“daymanager”，表为“login”

这是名为 login.php 的 php 文件：

```
<?php

$host="localhost";
$user="root";
$pass="";
$dbname="daymanager";

$con= mysql_connect($host,$user,$pass);
$BD= mysql_select_db($dbname, $con);
//$username=$_POST['username'];
//$password=$_POST['password'];

$query=mysql_query("select username,password from login");
$num=mysql_num_rows($query);

if($num==1)
{
while($list=mysql_fetch_array($query))
{
$output=$row[username];
echo json_encode($output);

}
mysql_close();
}
?> 
```

这是eclipse中的java代码：

```
package com.mounzer.test;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.lang.reflect.Constructor;
import java.lang.reflect.Method;
import java.util.ArrayList;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.conn.scheme.HostNameResolver;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.SharedPreferences;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Activating extends Activity implements OnClickListener {
    Button login;
    EditText user,pass;
    String username,password;

    HttpClient httpclient;
    HttpPost httppost;
    ArrayList<NameValuePair> namevaluepairs;
    HttpResponse response;
    HttpEntity entity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activ);

        initialise();
    }

    private void initialise() {
        // TODO Auto-generated method stub
        login =(Button) findViewById(R.id.login);
        user=(EditText) findViewById(R.id.user);
        pass=(EditText) findViewById(R.id.pass);
        login.setOnClickListener(this);
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        httpclient = new DefaultHttpClient();

        httppost =new HttpPost("http://192.168.48.1:6789/aglprojet/Login.php");

        username=user.getText().toString();
        password=pass.getText().toString();

        try

        {
            namevaluepairs = new ArrayList<NameValuePair>();
            namevaluepairs.add(new BasicNameValuePair("username", username));
            namevaluepairs.add(new BasicNameValuePair("password", password));
            httppost.setEntity(new UrlEncodedFormEntity(namevaluepairs));
            response=httpclient.execute(httppost);

            if(response.getStatusLine().getStatusCode()==200)
            {
                entity=response.getEntity();

                if(entity !=null)
                {
                    InputStream instream=entity.getContent();
                    JSONObject jsonResponse=new JSONObject(convertStreamToString(instream));

                    String retUser = jsonResponse.getString("username");
                    String retPass = jsonResponse.getString("password");

                    if(username.equals(retUser) && password.equals(retPass))
                    {
                    SharedPreferences sp=getSharedPreferences("logindetails", 0);
                    SharedPreferences.Editor spedit=sp.edit();
                    spedit.putString("user",username);
                    spedit.putString("pass",password);
                        spedit.commit();

                        Toast.makeText(getBaseContext(),"Succesfully connected", Toast.LENGTH_SHORT).show();

                    }else {Toast.makeText(getBaseContext(),"Invalid username or password", Toast.LENGTH_SHORT).show(); }
                }

            }

        }catch(Exception e)

        {
            e.printStackTrace();
            Toast.makeText(getBaseContext(),e.toString(), Toast.LENGTH_LONG).show();
        }

    }
     private void Log(String string, String retUser) {
        // TODO Auto-generated method stub

    }

    private static String convertStreamToString(InputStream is) {
            /*
             * To convert the InputStream to String we use the BufferedReader.readLine()
             * method. We iterate until the BufferedReader return null which means
             * there's no more data to read. Each line will appended to a StringBuilder
             * and returned as String.
             */
          BufferedReader reader = new BufferedReader(new InputStreamReader(is));
            StringBuilder sb = new StringBuilder();

            String line = null;
            try {
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
            } catch (IOException e) {
                e.printStackTrace();
                Toast.makeText(null, e.toString(), Toast.LENGTH_SHORT).show();
            } finally {
                try {
                    is.close();
                } catch (IOException e) {
                    e.printStackTrace();
                    Toast.makeText(null, e.toString(), Toast.LENGTH_SHORT).show();
                }
            }
            return sb.toString();
        }

} 
```

当我从我的手机尝试应用程序时，它给了我这个例外：

**org.json.JSONException** : java.lang.string`<html>`类型的值**无法转换为 JSONObject**

谁能告诉我该怎么办谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T12:52:29.233

我的猜测是某些东西遇到错误并返回包含在 HTML 中的错误消息。尝试通过浏览器或任何可以让您查看它实际返回的内容来调用您的身份验证脚本。

此外，您似乎没有在输出中返回任何字段，因此`getString("username")`etc 永远不会起作用。如果您想从身份验证脚本中返回多个内容，请将它们放入数组或其他`json_encode`内容中。

最后，您确定将密码发送给您的客户是个好主意吗...？（从您尝试从响应中读取它们的事实来看，我猜您正在尝试这样做）

# jsp - 为什么 JSF 中没有页面范围

> ID：14101785
> 
> 赞同：1
> 
> 时间：2012-12-31T12:45:41.827
> 
> 标签：jsp, jsf, jakarta-ee

我的问题说明了一切。我们在 JSF 中有不同类型的范围，但为什么没有页面范围？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:25:29.463

[JavaServer Pages 2.2](http://jcp.org/en/jsr/detail?id=245)中定义的页面范围：

> 具有`page`范围的对象只能在创建它们的页面内访问。在从 JSP 页面将响应发送回客户端或将请求转发到其他地方后，应释放对此类对象的所有引用。对具有页面范围的对象的引用存储在`pageContext`对象中。

JSP 定义的页面范围不是在 JSF 中使用的合适范围。视图没有理由直接创建对象。[如果在页面范围内定义了托管 bean，则任何页面操作都无法解析它，因为在JSF 请求生命周期](https://www.ibm.com/developerworks/library/j-jsf2/)的呈现响应阶段之前不会调用 JSP 。

在 JSF 中，JSP 仅充当视图定义语言；它不执行任何业务逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:52:26.047

页面页面范围是什么意思？在 JSF 2.0 中，当您在同一页面上触发某些操作并希望在此过程中保存数据时，您会使用[ViewScope 。](https://stackoverflow.com/questions/8367147/use-of-viewscoped-in-jsf-2-0)如果这对您来说还不够，IceFaces 为您提供了一个自定义[WindowScope](http://www.icesoft.org/wiki/display/ice/window+scope)，它扩展了 ViewScope，它可以在页面刷新后继续存在。

# c# - 使用存储在变量中的名称读取/写入实体字段

> ID：14101793
> 
> 赞同：0
> 
> 时间：2012-12-31T12:46:35.260
> 
> 标签：c#, winforms, linq-to-sql, linq-to-entities

我有一个使用 Linq to SQL 的 winforms 应用程序。我的一个数据库表有许多这样的字段......

```
Area_1
Area_2
Area_3... 
```

我需要能够在运行时动态访问这些字段。我的表单上有许多与不同区域相对应的连接按钮，所以我创建了一个这样的字符串......

```
String sField = String.Format("Area_{0}", myAreaNumber); 
```

并且需要能够使用此变量读取/写入特定字段。在这个阶段，我已经抓住了我需要使用的实体对象。如何使用“sField”变量读取/写入字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:04:44.660

`SqlQuery`您可以使用on 方法直接在数据库上运行原始 SQL `DbSet`：

```
context.YourDbSet.SqlQuery("query string") 
```

# asp.net-mvc-4 - 有没有办法可以选择 ASP.MVC 放置表单验证错误的位置？

> ID：14101808
> 
> 赞同：0
> 
> 时间：2012-12-31T12:48:29.007
> 
> 标签：asp.net-mvc-4

我正在使用 ASP.NET MVC 4 `HTML.BeginForm`，它创建了一个`validation-summary-errors`如下所示的类。这不符合我的布局。有没有办法让它把验证 div 类放在不同的地方？

```
<form action="/User/Account/Login" method="post" novalidate="novalidate">
   <div class="validation-summary-errors">
   <ul>
      <li>The user name or password provided is incorrect.</li>
   </ul>
   </div>
   <fieldset>
       <legend>Local Login</legend>
          <ol>
             <li>ation-summary-errors in a different position? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:50:23.303

好吧，当然，您可以将`@Html.ValidationSummary()`生成此标记的辅助调用放在您想要的任何位置。至于控制此助手吐出的确切标记，这将更加困难，因为此助手几乎无法控制生成的标记。

如果您需要更多控制，您可以编写自定义帮助程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T12:56:27.227

您可以使用`@Html.ValidationMessage("validation-errors")`它并将其放入任何 HTML 标记中，然后可以使用 CSS 为其赋予样式。

# php - if...else 发出：删除匹配的变量

> ID：14101809
> 
> 赞同：4
> 
> 时间：2012-12-31T12:48:31.923
> 
> 标签：php, function, if-statement, logic

我是编码新手，无法为简单的逻辑建立想法。
好吧，我已经写了一个代码，首先看看：

```
<?php
    function month_ana($mna){
        $c_mna = strlen($mna);
        echo "Let's Analysis <b>$mna</b> <br> Total Charectars: $c_mna <br>";
    }
    $go[0] = "January";
    $go[1] = "February";
    $go[2] = "March";
    $go[3] = "April";
    $go[4] = "May";
    $go[5] = "June";
    $go[6] = "July";
    $go[7] = "August";
    $go[8] = "September";
    $go[9] = "October";
    $go[10] = "November";
    $go[11] = "December";
    $fo = "October";
    $i = 0;
    for($i=0;$i<=11;$i++){
        if ($go[$i]==$fo){
            break;
        } else { 
            month_ana($go[$i]);
        }
    }
?> 
```

我想做的是删除匹配的变量，所以函数会跳过它。
让我们看看它的输出：

```
Let's Analysis January 
Total Charectars: 7 
Let's Analysis February 
Total Charectars: 8 
Let's Analysis March 
Total Charectars: 5 
Let's Analysis April 
Total Charectars: 5 
Let's Analysis May 
Total Charectars: 3 
Let's Analysis June 
Total Charectars: 4 
Let's Analysis July 
Total Charectars: 4 
Let's Analysis August 
Total Charectars: 6 
Let's Analysis September 
Total Charectars: 9 
```

但问题是我使用`break();`了语句，所以当变量匹配时它停止工作`October`，但我希望这样，这将跳过匹配的变量而不是在这里停止，所以在这种情况下它应该跳过`October`然后重新开始计算`November`并继续。我希望你明白这个问题。有任何想法吗？

如果您认为应该向我推荐一些文章，那么请这样做，因为我非常热衷于学习 PHP 编程。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T12:51:50.230

尝试`continue;`

```
var $go = array('January', 'February', 'March', ...);

foreach ($go as $month) {
   if ($month == $fo){
      continue;
   } 
   echo $month . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:50:54.403

使用关键字`continue`而不是`break`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T12:59:03.803

```
for($i=0;$i<=11;$i++)
{
  if ($go[$i] != $fo)
  {
    month_ana($go[$i]);
  }
} 
```

我放了'！='而不是'=='。

如果你使用`continue`它会再次开始循环，但你说你想在分析完 10 月后继续 11 月。

# activerecord - Yii - 如何使用 where 和 limit 等条件

> ID：14101811
> 
> 赞同：7
> 
> 时间：2012-12-31T12:48:49.850
> 
> 标签：activerecord, yii

我像这样使用 findAll() ：

```
$l = SiteContentRelated::model()->findAll('content_1=:c', array(':c' => $id)); 
```

我怎样才能为此添加条件？

像 as`LIMIT 5`还是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-31T12:59:29.857

用于`CDbCriteria`指定更详细的标准：

```
$criteria = new CDbCriteria;
$criteria->condition = 'content_1=:c';
$criteria->limit = 5;
$criteria->params = array(':c' => $id);

$l = SiteContentRelated::model()->findAll($criteria); 
```

或传递一个数组，[`findAll`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAll-detail)该数组将被转换为`CDbCriteria`：

```
$l = SiteContentRelated::model()->findAll(array(
  'condition' => 'content_1=:c',
  'limit' => 5,
  'params' => array(':c' => $id),
)); 
```

* * *

当您指定 a`LIMIT`时，最好同时指定`ORDER BY`。

* * *

对于基于模型属性的过滤，您还可以使用[`findAllByAttributes`](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#findAllByAttributes-detail)：

```
$l = SiteContentRelated::model()->findAllByAttributes(array(
  'content_1' => $id,
), array(
  'limit' => 5,
)); 
```

# jsf-2 - JSF 或 Primefaces 的 GUI 构建器

> ID：14101813
> 
> 赞同：1
> 
> 时间：2012-12-31T12:49:08.373
> 
> 标签：jsf-2

是否有任何 UI 设计器辅助工具（例如 Scene Builder 是 JavaFX 应用程序的有用屏幕设计辅助工具/eclipse 的 Flash Builder 插件是 Flex 应用程序的有用屏幕设计辅助工具）来使 JSF / Primefaces 中的屏幕设计变得容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:58:11.890

据我所知，您几乎没有选择来执行此操作（主要取决于您喜欢哪个 IDE）。首先是[Oracle JDeveloper](http://www.oracle.com/technetwork/developer-tools/jdev/downloads/index.html)，它是唯一一个内置支持的，其次是[NetBeans Visual Web 插件](http://netbeans.org/community/magazine/html/03/visualwebdev/)，最后还有用于 Eclipse IDE 的[网页编辑器。](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jst.jsf.doc.user/html/gettingstarted/wpe/wpe_getting_started.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-10T03:45:36.217

```
For using **ADF** - JDeveloper covers almost everything
For using **woodstocks,ICEFaces** - Netbeans have the plugins for visual page design
For using **PrimeFaces**, Netbeans is having CRUD code generators, but not the drag and drop UI component plugins. 
```

理想情况下，由于 UI 代码大部分是 XML 格式，因此设计拖放插件应该不是什么大问题。我仍然不知道为什么我们没有强大的 primefaces 插件。

# sql - 在 SQL 中删除百分比中的额外零

> ID：14101816
> 
> 赞同：1
> 
> 时间：2012-12-31T12:49:38.977
> 
> 标签：sql

我有一个查询要从两个求和列中获取 %。它给了我正确的百分比，但即使我使用圆形函数，零也不会消失。这样的结果 95.40000 我如何删除多余的零。

```
Select (Round((COUNT(Id * 100) / Total,1)) AS Percentage 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:03:39.037

使用 CAST()

示例：

```
Select ( (CAST(NUMBER/100 AS DECIMAL(10,2)))) AS Percentage 
from MyTable 
```

在你的情况下：

```
Select CAST((Round((COUNT(Id * 100) / Total,1)) as AS DECIMAL(10,2)) AS Percentage
from YourTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:05:07.163

作为 bAN，使用 cast()，但转换为 float ：

```
Select cast((Round((COUNT(Id * 100) / Total,1)) as float) AS Percentage 
```

# javascript - 连接 CSS/JS 资产背后的逻辑

> ID：14101819
> 
> 赞同：2
> 
> 时间：2012-12-31T12:49:49.747
> 
> 标签：javascript, css, concatenation, asset-pipeline

来自 Ruby on Rails 文档：

> 管道的第一个功能是连接资产。这在生产环境中很重要，因为它可以减少浏览器为呈现网页而必须发出的请求数量。Web 浏览器可以并行发出的请求数量是有限的，因此更少的请求可能意味着更快地加载您的应用程序。

这被广泛认为是网络上的最佳实践。但是传统逻辑不是告诉我们并行加载三个文件比串行加载串联版本更快吗？所以即使并行连接数有上限，也应该比在单个连接上等待一个巨大的文件要快。还是与每个请求的开销有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:56:59.437

HTTP 规范建议同时进行 4 个并发连接。因此，默认情况下，每个浏览器都会围绕这个数字设置。因此，当您的页面有超过 4 个文件（包括图像）时，连接是有意义的。

对于大多数浏览器，可以更改并行连接的数量，但这不仅适用于您的机器，而且不适用于用户。

# php - 使用 php 将用户代理存储在 mysql 数据库中

> ID：14101829
> 
> 赞同：2
> 
> 时间：2012-12-31T12:50:48.063
> 
> 标签：php, mysql, database, structure

我正在成功尝试将统计信息存储在 mysql 数据库中。我创建了一个跟踪器类，它检查 URL 并更新 mysql 行“命中”中的命中。但是我想用浏览器/操作系统之类的更多信息来扩展我的统计数据。现在，每当我向我的跟踪器发出请求时，我都会在我的 user_agents 数据库中创建一个新条目，我想知道这是否明智，以及应该如何构建我的数据库结构。

我需要提到的是统计数据是针对不同用户的，所以 user-x 有它自己的点击和浏览器信息，user-y 也有。

Mysql数据库结构

```
 == lumbr_stats

    |//**id**//|bigint(20)|Nee|
    |active|int(11)|Nee|
    |account|varchar(255)|Nee|
    |date|datetime|Nee|
    |ip|varchar(255)|Nee|
    |hits|bigint(20)|Nee|
    |theme|bigint(20)|Nee|

    == lumbr_themes
    |//**id**//|bigint(20)|Nee|
    |active|int(11)|Nee|
    |slug|varchar(255)|Ja|NULL
    |name|varchar(255)|Nee|
    |description|text|Ja|NULL

    == lumbr_user_agents
    |//**id**//|bigint(20)|Nee|
    |name|varchar(255)|Nee|
    |version|int(11)|Nee|
    |stat_user|bigint(20)|Nee| 
```

跟踪器类 .php

```
 <?php 
    require_once(__DIR__ . '/inc/database.php');
    require_once(__DIR__ . '/lib/KLogger.php');

    Class ThemeStatsTracker
    {
        public $log;

        private $theme_name;
        private $theme_user;
        private $theme_name_db_id;
        private $theme_user_db_id;

        public function __construct()
        {
            // Setup Log 
            $this->log = KLogger::instance(dirname(__FILE__).'/log/', KLogger::DEBUG);

            // Process URI variables
            $uri = explode('/',$_SERVER['REQUEST_URI']);    
            $this->theme_name = (!empty($uri[1])) ? $uri[1] : NULL;
            $this->theme_user = (!empty($uri[2])) ? $uri[2] : NULL;

            // Handle the Request
            $this->database_connect();
            if($this->validate_theme()){
                if($this->user_entry_exists()){
                    $this->user_entry_update(); 
                }else{
                    $this->user_entry_create();
                }   
            }

            // Always serve an image as response
            $this->serve_image();
        }

        private function validate_theme()
        {
            $query  = sprintf("SELECT id FROM ".DB_PREFIX."themes WHERE slug='%s' LIMIT 1", mysql_real_escape_string($this->theme_name));
            $result = mysql_query($query);
            if (!$result){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
            if(mysql_num_rows($result)==0){
                $this->log->logError(__FUNCTION__ . ' Theme name ' . $this->theme_name . ' NOT found');
                return FALSE;
            }else{
                $this->log->logInfo(__FUNCTION__ . ' Theme name ' . $this->theme_name . ' found');
                $this->theme_name_db_id = mysql_result($result,0);
                return TRUE;
            }
        }

        private function user_entry_exists()
        {
            $query  = sprintf("SELECT id FROM ".DB_PREFIX."stats WHERE account='%s' LIMIT 1", mysql_real_escape_string($this->theme_user));
            $result = mysql_query($query);
            if (!$result){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
            if(mysql_num_rows($result)==0){
                $this->log->logInfo(__FUNCTION__ . ' New user ' . $this->theme_user);
                return FALSE;
            }else{
                $this->log->logInfo(__FUNCTION__ . ' Existing user ' . $this->theme_user);
                $this->theme_user_db_id = mysql_result($result,0);
                return TRUE;
            }   
        }

        private function user_entry_create()
        {
            $query  = sprintf("INSERT INTO ".DB_PREFIX."stats (id,active,account,date,ip,hits,theme) VALUES ('','1','%s',NOW(),'".$_SERVER['REMOTE_ADDR']."','1','".$this->theme_name_db_id."')", mysql_real_escape_string($this->theme_user));
            $result = mysql_query($query);
            $insertid = mysql_insert_id();

            if (!$result){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }

            $browser = $this->detect_browser();
            $query2 = "INSERT INTO ".DB_PREFIX."user_agents (id,name,version,stat_user) VALUES ('','".$browser['name']."','".$browser['version']."','".$insertid."')";

            $result2 = mysql_query($query2);
            if (!$result2){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query2 . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }

            $this->log->logNotice(__FUNCTION__ . ' New user created with id  ' . mysql_insert_id());
            return TRUE;
        }

        private function user_entry_update()
        {
            $query  = sprintf("UPDATE ".DB_PREFIX."stats SET date=NOW(),ip='".$_SERVER['REMOTE_ADDR']."',hits=hits+1 WHERE id='".$this->theme_user_db_id."' LIMIT 1");
            $result = mysql_query($query);
            if (!$result){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }

            $browser = $this->detect_browser();
            $query2 = "INSERT INTO ".DB_PREFIX."user_agents (id,name,version,stat_user) VALUES ('','".$browser['name']."','".$browser['version']."','".$this->theme_user_db_id."')";

            $result2 = mysql_query($query2);
            if (!$result2){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query2 . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }

            $this->log->logNotice(__FUNCTION__ . ' User with id ' . $this->theme_user_db_id . 'updated');
            return TRUE;
        }

        private function serve_image()
        {
            header("Content-type: image/gif");
            header("Content-length: 43");
            $fp = fopen("php://output","wb");
            fwrite($fp,"GIF89a\x01\x00\x01\x00\x80\x00\x00\xFF\xFF",15);
            fwrite($fp,"\xFF\x00\x00\x00\x21\xF9\x04\x01\x00\x00\x00\x00",12);
            fwrite($fp,"\x2C\x00\x00\x00\x00\x01\x00\x01\x00\x00\x02\x02",12);
            fwrite($fp,"\x44\x01\x00\x3B",4);
            fclose($fp);
        }

        private function detect_browser() 
        {
            $ua = strtolower($_SERVER['HTTP_USER_AGENT']);

            if(preg_match('/(chromium)[ \/]([\w.]+)/', $ua))
                $browser = 'chromium';
            elseif(preg_match('/(chrome)[ \/]([\w.]+)/', $ua))
                $browser = 'chrome';
            elseif(preg_match('/(safari)[ \/]([\w.]+)/', $ua))
                $browser = 'safari';
            elseif(preg_match('/(opera)[ \/]([\w.]+)/', $ua))
                $browser = 'opera';
            elseif(preg_match('/(msie)[ \/]([\w.]+)/', $ua))
                $browser = 'msie';
            elseif(preg_match('/(mozilla)[ \/]([\w.]+)/', $ua))
                $browser = 'mozilla';

            preg_match('/('.$browser.')[ \/]([\w]+)/', $ua, $version);

            return array('name'=>$browser,'version'=>$version[2]);
        }

        private function database_connect()
        {
            $con = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
            if(!$con){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
            $select = mysql_select_db(DB_NAME, $con);
            if (!$select){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
        }       
    }

    $stats = new ThemeStatsTracker(); 
```

# php - 会话中数组中的 PHP 数组

> ID：14101832
> 
> 赞同：0
> 
> 时间：2012-12-31T12:51:14.530
> 
> 标签：php, arrays

我一直在使用 PHP，但只做基本任务，在尝试构建知识库的一部分时遇到了困难。

创建文章时，您可以上传屏幕截图 - 这些屏幕截图需要存储在暂存区域中，直到文章被保存，并且我已将他们的信息保存到用户会话中。

在 POST 上传中：

```
...
$new_ss = array();
$new_ss['display_name'] = $ss_name;
$new_ss['server_path'] = "../uploads/";    /* outside of doc root */
$new_ss['server_path'] .= hash_file('md5', $ss_tmp_name) . "_" . $ss_name;

if ( @move_uploaded_file($ss_tmp_name, $new_ss['server_path']) )
{
    $_SESSION['article']['screenshots'] .= $new_ss;
    ... 
```

然后尝试在编辑页面中向用户显示上传：

```
if ( is_array($_SESSION['article']['screenshots']) && count($_SESSION['article']['screenshots']) > 0 )
{
    echo "<table border=\"1\">\n";
    foreach ( $_SESSION['article']['screenshots'] as $ss )
    {
        ... display table of uploaded images ... 
```

问题是，PHP 没有将 $_SESSION['article']['screenshots'] 视为一个数组——我不明白为什么。

在此处遵循答案后： [PHP foreach() with arrays within arrays?](https://stackoverflow.com/questions/5524227/php-foreach-with-arrays-within-arrays) 我尝试快速执行以下操作：

```
function print_array($key, $item) {
    echo "$key -> $item\n";
}

...
{
    $_SESSION['article']['screenshots'] .= $new_ss;
    array_walk_recurisve($_SESSION['article']['screenshots'], 'print_array');
    ... 
```

但是我收到错误“期望参数 1 是数组，给定字符串”。

如果我执行 'error_log($_SESSION['article']['screenshots']);' 无论上传多少图像，它都会打印“Array”，而 print_r 只是自己打印“1”。

有人可以阐明一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:54:07.407

好吧，我不确定你的哪个键应该是一个数组，在这一行：

```
$_SESSION['article']['screenshots'] .= $new_ss; 
```

您通过连接它使其成为一个字符串。如果你想追加为一个数组，你可能应该这样做：

```
 $_SESSION['article']['screenshots'][] = $new_ss; 
```

# django - django-nonrel 中带有 ForeignField 的 ListField

> ID：14101834
> 
> 赞同：1
> 
> 时间：2012-12-31T12:51:29.180
> 
> 标签：django, mongodb, django-nonrel, listfield, django-mongodb-engine

似乎很难找到在 django-mongo-engine 中使用 ListField 和 ForeignField 的完整示例。我的逻辑如下所示，

```
class GameSession(models.Model):
    # id => token, is global unique random code
    id = models.CharField(max_length=45, primary_key=True)
    def save(self, *args, **kwargs):     
        if not self.pk:
            self.pk = util.get_random_string(32)  
        super(GameSession, self).save(*args, **kwargs)

class GameUser(models.Model):
    ...
    game_session = fields.ListField(models.ForeignKey(GameSession)) 
```

在其他地方我喜欢这样，

```
game_session = GameSession()
game_session.save()
self.game_session.append(game_session)
self.save() 
```

所以在数据库内部，字段 self.game_session 类似于

```
(Pdb) self.game_session
[u'GameSession object'] 
```

它不能存储game_session 元素的PK。如何正确使用 ListField（插入、检索为外部模型、删除）？或者它仍然不支持带有 ForeignField 的 ListField？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:41:36.493

采用：

```
self.game_session.append(game_session.id) 
```

在将条目保存到 ListField 时，使用 ForeignKey 并不是“自动”的，但是当您需要引用这些对象时，ForeignKey 将为您获取对象。

# android - 如何为屏幕分辨率=720x1280、密度=xhdpi、大小=正常的设备创建布局？

> ID：14101837
> 
> 赞同：0
> 
> 时间：2012-12-31T12:51:39.820
> 
> 标签：android, galaxy

我正在开发一款适用于高端手机设备（如 Galaxy S3、Galaxy Nexus、Xperia V 等）的 Android 应用程序。现在我想知道哪种布局适合分辨率为 720x1280、密度为 xhdpi 且尺寸正常的设备。

我已经尝试过 layout-xhdpi-1280x720 并且 Galaxy S3 设备正在从这里加载屏幕，但不是 Galaxy Nexus。

我试过 layout-sw260dp 但 Galaxy Nexus 模拟器不加载屏幕。Nexus7 也是从这里加载的模拟器。我不希望任何平板电脑运行我的应用程序。

可能是什么问题？Galaxy Nexus 的设备定义是否会导致问题？我正在使用 Android SDK 4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:37:42.470

> 现在我想知道哪种布局适合分辨率为 720x1280、密度为 xhdpi 且尺寸正常的设备。

`res/layout/`效果很好。如果您还支持`-small`屏幕设备，请为这些设备提供额外`res/layout-small/`的支持。如果您想要针对不同屏幕方向的不同布局，您可能希望也可能不希望`-land`变体（例如， ）。`res/layout-land/`

> 我已经尝试过 layout-xhdpi-1280x720 并且 Galaxy S3 设备正在从这里加载屏幕，但不是 Galaxy Nexus。

这种方法已被弃用多年。

> 我不希望任何平板电脑运行我的应用程序。

然后在您的清单中指定适当的`<compatible-screens>`元素，以声明您只支持`small`和`normal`屏幕，而不是`large`和`xlarge`。这与您选择的布局资源目录无关。

# android - 启动 Android 活动时出错

> ID：14101841
> 
> 赞同：0
> 
> 时间：2012-12-31T12:52:06.870
> 
> 标签：android, android-activity, runtime-error, android-logcat

在 switch 语句中的 MainActivity 类中，我声明并初始化了一个 Intent 以开始另一个活动。这是片段：

```
case MESSAGE_DEVICE_NAME:
                //save connected device name
                mConnectedDeviceName = msg.getData().getString(DEVICE_NAME);
                Toast.makeText(getApplicationContext(), "Connected to "+mConnectedDeviceName, Toast.LENGTH_SHORT).show();
                Intent medPlay = new Intent(MainActivity.this, MediaPlayer.class);
                startActivity(medPlay);
                break; 
```

这是 MediaPlayer 类：

```
public class MediaPlayer extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.media_player);
    }
} 
```

这是 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.bt"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-sdk
    android:minSdkVersion="6"
    android:targetSdkVersion="10" />
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.bt.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DeviceListActivity"
        android:configChanges="orientation|keyboardHidden"
        android:label="@string/select_device"
        android:theme="@android:style/Theme.Light" />
    <activity
        android:name=".MediaPlayer"
        android:configChanges="orientation|keyboardHidden"
        android:label="@string/media_player"
        android:theme="@android:style/Theme.Light" />
</application>
</manifest> 
```

但是我在 LogCat 控制台上不断收到此错误：

> 12-31 12:39:52.475: E/AndroidRuntime(25978): 致命异常: main 12-31 12:39:52.475: E/AndroidRuntime(25978): android.content.ActivityNotFoundException: 找不到明确的活动类 {com .example.bt/android.media.MediaPlayer}; 您是否在 AndroidManifest.xml 中声明了此活动？12-31 12:39:52.475: E/AndroidRuntime(25978): 在 android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405) 12-31 12:39:52.475: E/AndroidRuntime(25978): 在 android. app.Instrumentation.execStartActivity(Instrumentation.java:1379) 12-31 12:39:52.475: E/AndroidRuntime(25978): 在 android.app.Activity.startActivityForResult(Activity.java:2893) 12-31 12:39: 52.475: E/AndroidRuntime(25978): at android.app.Activity.startActivity(Activity.java:3003) 12-31 12:39:52.475: E/AndroidRuntime(25978): at com.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:56:11.207

将您的开始活动代码更改为：

```
Intent medPlay = new Intent(MainActivity.this,
                               com.example.bt.MediaPlayer.class);
startActivity(medPlay); 
```

并在 AndroidManifest 中将 MediaPlayer 声明为：

```
<activity
    android:name="com.example.bt.MediaPlayer"
    android:configChanges="orientation|keyboardHidden"
    android:label="@string/media_player"
    android:theme="@android:style/Theme.Light" /> 
```

因为在日志消息中：

> android.content.ActivityNotFoundException：找不到明确的活动类 {com.example.bt/android.media.MediaPlayer}；您是否在 AndroidManifest.xml 中声明了此活动？

系统正在尝试启动默认`MediaPlayer`活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T12:57:19.403

找不到显式活动类 {com.example.bt/android.media.MediaPlayer **}**；

您导入/指定了错误的 MediaPlayer！

# sql-server - 如何查询具有最近列值的行？

> ID：14101845
> 
> 赞同：0
> 
> 时间：2012-12-31T12:52:32.370
> 
> 标签：sql-server, sql-server-2008, tsql

我应该如何构造 T-SQL 语句以实现以下目标：从此

表格1：

```
display_term|occurence

A|1

A|4

B|3

B|9 
```

检索这个

表2：

```
display_term|occurence

A|4

B|3 
```

A 和 B 之间的“最近距离”为 1，可以在结果表中看到。即我想查询最近的（列“发生”）不同（列“display_term”）记录。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:58:28.010

如果单行结果对您有用，则可以这样做：

```
SELECT a.display_term AS adt,
       a.occurence As aoc,
       b.display_term AS bdt, 
       b.occurence AS boc,
       ABS(a.occurence - b.occurence) AS distance
FROM my_table a, my_table b
WHERE a.display_term = 'A'
  AND b.display_term = 'B'
  AND ABS(a.occurence - b.occurence) = (
    SELECT MIN(ABS(a.occurence - b.occurence))
    FROM my_table a, my_table b
    WHERE a.display_term = 'A'
      AND b.display_term = 'B'
  ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T12:55:29.537

你说你想要最近的。目前尚不清楚这到底意味着什么。您上面的示例显示了每个显示项的最大值。如果您想要每个显示项的最大值，您需要使用聚合。这是通过使用 Group By 和 Max 方法来实现的。

```
SELECT display_term, Max(occurence) as MaxOccurrence
FROM TABLE_NAME
GROUP BY display_term 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T14:19:40.967

只需两个术语，您就可以执行以下操作：

```
declare @T table (display_term char(1) not null,occurence int not null)
insert into @T (display_term,occurence) values
('A',1),
('A',4),
('B',3),
('B',9)

select top 1
    *
from
    @T t1
        cross join
    @T t2
where
    t1.display_term = 'A' and
    t2.display_term = 'B'
order by ABS(t1.occurence - t2.occurence) 
```

产生：

```
display_term occurence   display_term occurence
------------ ----------- ------------ -----------
A            4           B            3 
```

`UNPIVOT`（如果您确切需要您要求的结果集，您可以搜索基于解决方案）

* * *

从您的问题中不清楚这是否需要扩展到更多条款 - 没有明显的方法来重新解释对更多条款的要求，所以我暂时搁置了。

* * *

`UNPIVOT`如果需要确切的结果集，则基于解决方案。设置`@T`如上：

```
select display_term,occurence from (
select top 1
    t1.occurence as A,
    t2.occurence as B
from
    @T t1
        cross join
    @T t2
where
    t1.display_term = 'A' and
    t2.display_term = 'B'
order by ABS(t1.occurence - t2.occurence)
) t unpivot (occurence for display_term in (A,B)) as u 
```

结果：

```
display_term                         occurence
------------------------------------ -----------
A                                    4
B                                    3 
```

# php - 无法正确读取 csv（制表符分隔）

> ID：14101846
> 
> 赞同：4
> 
> 时间：2012-12-31T12:52:33.930
> 
> 标签：php

我有一个简单的 csv 文件，它是制表符分隔的，我必须按原样使用它，因为它来自某个地方，我可以读取它并将其插入到我的数据库中，我使用了一个简单的 php 代码来读取它

```
if(($handle = fopen("var/import/MMT29DEC.csv","r"))!==FALSE){
            /*Skip the first row*/
            fgetcsv($handle, 1000,chr(9));
            while(($data = fgetcsv($handle,1000,chr(9)))!==FALSE){
                    print_r($data[0]);
                        }
} 
```

当 print_r 显示的数据像

```
Array ( [0] => 01SATAPC [1] => 40ATAPC [2] => [3] => 21P [4] => SERIAL ATA POWER CABLE [5] => 0.00 [6] => 2.00 [7] => 0 [8] => Power Supplies [9] => SERIAL ATA POWER CABLE [10] =>
4 TO 15 PIN 160MM
[11] => [12] => [13] => [14] => MELBHO [15] => 0.000 [16] => [17] => Order to Order [18] => 4 [19] => 2013-01-18 ) 
```

这是期望的结果，但是当我使用 $data['index'] 例如 $data[8] 或 $data[1] 访问特定列值时，它奇怪地给我垃圾值说对于某些迭代它给了我权利值，但在 10-15 行之后它开始给我一些数字和其他列值.....据我所知，我不知道这是怎么回事它应该是格式问题我试过打开文件在 excel 中，它的未来很好....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T13:47:54.140

@ravisoni 您确定 fgetcsv 的第二个参数 1000 比文件中最长的行长吗？尝试将其设置为 0，就像文档中所说的 [php.net/fgetcsv] 一样，看看是否会有所不同。

```
if(($handle = fopen("var/import/MMT29DEC.csv","r"))!==FALSE){
            /*Skip the first row*/
            fgetcsv($handle, 0,chr(9));
            while(($data = fgetcsv($handle,0,chr(9)))!==FALSE){
                    print_r($data[0]);
                        }
} 
```

# javascript - 如何从子窗口打开一个新窗口

> ID：14101849
> 
> 赞同：1
> 
> 时间：2012-12-31T12:52:47.440
> 
> 标签：javascript

从主页我想打开一个子窗口，从子窗口我想打开另一个窗口。这怎么可能？我已经尝试了下面的代码，但它不起作用。

```
<script type='text/javascript">
function click1(){
var win1=window.open();
win1.document.write("first window");
var windowHTML ='<input type="button" value="click"   onclick="click2()" />';
win1.document.write(windowHTML); 
}    

function click2(){
 var win2=window.open();
 win2.document.write("seccond window");
} 
```

​​​

```
 <input type="button" value="click1" onclick="click1()" />​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:53:53.553

两种选择：

### 1.`opener`在儿童中使用

改变

```
var windowHTML ='<input type="button" value="click"   onclick="click2()" />'; 
```

至

```
var windowHTML ='<input type="button" value="click"   onclick="opener.click2()" />';
// Change is here ---------------------------------------------^ 
```

`opener`在子窗口中将是对您的主窗口的引用，并且由于您使用的是全局函数，因此可以通过该引用调用它们（假设没有[SOP](http://en.wikipedia.org/wiki/Same_origin_policy)问题）。

### 2\. 将代码放入child

或者，您可以通过向子窗口写入标签来将要触发的代码放入子窗口`script`中（包含内联 JavaScript 的代码，有点狡猾，或者引用外部文件的代码，这会更好）。

* * *

FWIW，我建议您退后一步，询问您是否*真的*需要使用多个窗口，而不是坚持一个窗口并通过`div`s 等执行“虚拟”窗口。

# c# - 处理两个用户控件之间的 ProcessCmdKey

> ID：14101850
> 
> 赞同：1
> 
> 时间：2012-12-31T12:52:52.523
> 
> 标签：c#, winforms, visual-studio

我有两个用户控件，如下所示：

1.  现金存款
2.  一般账户

GeneralAccount UserControl 添加到 cashdeposit UserControl 并在**表单加载时设置为不可见。**GeneralAccount 将通过在 Datagridview texbox 列 KeyUp 事件中 按**Ctrl + C可见。**

我对这两个控件之间的句柄**ProcessCmdKey EventHandller感到困惑。**我的任务是按下 Escape 键，可见控件应该是不可见的。如果 Generalaccount 在 CashDeposit 上可见，Generalaccount 应该只在按下 Escape 键而不是 CashDeposit 时不可见。如果 GeneralAccount 不可见并且用户按下 Escape 键，则 CashDeposit Usercontrols 应该是不可见的。我正在尝试如下但失败了。

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
    {
        if (keyData == Keys.Escape) 
        {
            if (genac.Visible==true )// Checking GeneralAccount Visible or Not
            {
                genac.Visible = false;
                dgv.Focus();
            }
            else 
            {
                //Referenced Delegate to the Event for Closing or set visible true or  false 
                //for CashDeposit UserControls From WinForm Application.
                cashdepositkeydownevent cdkd = CashDepositKeyDownEvent;
                if (cdkd != null)
                    cdkd(ref msg, keyData);

            }

        }

        return base.ProcessCmdKey(ref msg, keyData);

    } 
```

如果 GeneralControls Visible 可见并按 Escape 键，上述方法效果很好。如果它在 formLoad Eventhandller 上设置为可见 = false 并且如果我按 Escape 而不是它则抛出错误之类的设置它不可见

> “未处理空引用异常。，未设置对象引用”</p>

. 在

```
if (genac.Visible==true )// Checking GeneralAccount Visible or Not 
```

如何解决？

# python - 使用 np.loadtxt Python 从 .dat 中提取列

> ID：14101852
> 
> 赞同：-1
> 
> 时间：2012-12-31T12:53:01.480
> 
> 标签：python, text-files

我有这个文本文件：www2.geog.ucl.ac.uk/~plewis/geogg122/python/delnorte.dat

我想提取第 3 列和第 4 列。

我正在使用 np.loadtxt - 收到错误：

```
ValueError: invalid literal for float(): 2000-01-01 
```

我只对 2005 年感兴趣。如何提取这两列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T15:28:22.787

您可以为特定列提供自定义转换函数到`loadtxt`.
由于您只对年份感兴趣，因此我使用`lambda`-function 来拆分日期`-`并将第一部分转换为`int`：

```
data = np.loadtxt('delnorte.dat',
         usecols=(2,3),
         converters={2: lambda s: int(s.split('-')[0])},
         skiprows=27)

array([[ 2000.,   190.],
       [ 2000.,   170.],
       [ 2000.,   160.],
       ..., 
       [ 2010.,   185.],
       [ 2010.,   175.],
       [ 2010.,   165.]]) 
```

要过滤当年的年份，您可以在 numpy`2005`中使用[逻辑索引：](http://docs.scipy.org/doc/numpy/user/basics.indexing.html#boolean-or-mask-index-arrays)

```
data_2005 = data[data[:,0] == 2005]

array([[ 2005.,   210.],
       [ 2005.,   190.],
       [ 2005.,   190.],
       [ 2005.,   200.],
        ....]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:54:35.207

我同意使用 csv 模块。我改编了这个答案：[在 Python 中读取 scipy/numpy 中的 csv 文件](https://stackoverflow.com/questions/2859404/reading-csv-files-in-scipy-numpy-in-python) 以适用于您的问题。不确定您是否需要 numpy 数组中的数据或列表是否足够。

```
import numpy as np
import urllib2
import csv

txtFile = csv.reader(open("delnorte.dat.txt", "r"), delimiter='\t')

fields = 5                   
records = [] 
for row, record in enumerate(txtFile):
    if (len(record) != fields or record[0]=='#'):
        pass
        # print "Skipping malformed record or comment: {}, contains {} fields ({} expected)".format(record,len(record),fields)
    else:
        if record[2][0:4] == '2005': 
            # assuming you want columns 3 & 4 with the first column indexed as 0
            records.append([int(record[:][3]), record[:][4]] ) 

# if desired slice the list of lists to put a single column into a numpy array
npData = np.asarray([ npD[0] for npD in records] ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T13:02:51.613

您不应该使用 NumPy.loadtxt 来读取这些值，而应该使用[`csv`模块](http://pastebin.com/JyVC4XfF)来加载文件并读取其数据。

# php - 多个 order by with join

> ID：14101853
> 
> 赞同：4
> 
> 时间：2012-12-31T12:53:03.580
> 
> 标签：php, orm, fuelphp

我是fuelphp的新手。`order_by`需要为父表添加：`order by username asc, parent_table_field asc`。我尝试了以下代码：

```
Model_Definition::find('all',
Array
(
[related] => Array
    (
        [users] => Array
            (
                [order_by] => Array
                    (
                        [username] => asc
                    )

            )

    )
 [order_by] => Array
 (
     [parent_table_field] => asc
 )
[rows_limit] => 50
[rows_offset] => 0
)
) 
```

但它首先对父表的字段应用 order by，然后对用户名应用 order by。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:46:51.820

您无法控制使用数组表示法生成查询的方式。

您将对方法链接拥有更多控制权，这将按照定义顺序应用 order_by 子句。

# php - 如何在 Aptana IDE 中显示未定义的 php 变量通知？

> ID：14101857
> 
> 赞同：2
> 
> 时间：2012-12-31T12:53:22.693
> 
> 标签：php, debugging, error-handling, aptana

如何在 Aptana 的问题窗口中看到有关*未定义变量的通知？*

我想编写干净的源代码，PHP 注意的提示对我来说很重要，首先是在 IDE 中，而不是在正在运行的应用程序中，因为它已经“为时已晚”。

也许 Aptana 可以选择激活它来查看 PHP 通知，而不仅仅是错误和警告？

看我的截图，也许更容易理解我的问题。在这个屏幕上，我将看到 PHP 通知、警告和错误。 [![在此处输入图像描述](../Images/f3e428d5b86bd25c48b5e0d1c6d3dcec.png)](https://i.stack.imgur.com/66E55.png)

在浏览器中的 webapp 中创建 PHP 通知的代码示例：

```
<?php

echo $undefined_var; 
```

var 未定义并导致此通知消息：

`Notice: Undefined variable: undefined_var in /var/www/wp-plugins/my-test.php on line 3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:44:29.817

AFAIK Aptana（以及其他 Eclipse PHP 编辑器插件，如 PDT）不会报告问题视图的*未定义变量*警告/通知。

PHP 本身仅在执行代码时才给出此通知。因此，IDE 还必须在一定程度上“执行”代码或进行更高级的静态代码分析以报告此类问题。

我知道的一个 IDE 是 Phpstorm，它非常适合静态代码分析部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T14:35:39.823

我认为不可能在问题视图中报告未定义的变量，但在最新的 Aptana 版本中，您可以配置调试器（我尝试过 XDebug）然后运行它。

![在此处输入图像描述](../Images/90aacf743f9d0e7ea6b2777da5c5b5e0.png)

# javascript - 如何对通过模板生成的按钮使用 onclick 事件？

> ID：14101858
> 
> 赞同：0
> 
> 时间：2012-12-31T12:53:25.537
> 
> 标签：javascript, jquery, underscore.js

测试`underscore.js`。使用它的模板引擎。问题是，我无法使用`jquery.AJAX`从模板中绘制按钮时编写的点击监听器。这里的代码：

```
<script type="text/javascript" src="js/jquery-1.8.1.js"></script>
<script type="text/javascript" src="js/underscore.js"></script>

<div id="HelloWorld">
    <h1>Hi There</h1>
    <a href="" id="helloThere">Say Hello</a>
    <div id="helloDiv"></div>
</div>

<script>
    $('a#helloThere').click(function(event){
        event.preventDefault();
        var name='rickesh';
        var templateData=$('#sayHello').text();
        var compiled=_.template(templateData,{'data':name});
        $('#helloDiv').html(compiled);
    });

    $('button#helloAgain').click(function(event){
        event.preventDefault();
        alert('hello again bro!!!');
    });
</script>

<script type="text/html" id="sayHello">
    Hello <%= data%> <br />
    <button id="helloAgain">Say Hello Again</button>
</script> 
```

现在，在上面的代码中，当我单击 **SAY HELLO**链接`<a href="" id="helloThere">Say Hello</a>`时，模板已成功绘制并显示`Hello rickesh`一个按钮。**但是当我点击按钮时，什么也没有发生**。我是否错误地使用了监听器？我希望在按钮单击时执行一个操作。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:56:27.907

使用委托`.on()`：

```
$(function(){
    $(document).on('click','#helloAgain',function(event){
        event.preventDefault();
        alert('hello again bro!!!');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T13:02:14.413

我认为您应该在创建 html 元素后创建事件侦听器，可能是这样的：

```
$('a#helloThere').click(function(event){
    event.preventDefault();
    var name='rickesh';
    var templateData=$('#sayHello').text();
    var compiled=_.template(templateData,{'data':name});
    $('#helloDiv').html(compiled);

    $('button#helloAgain').click(function(event){
        event.preventDefault();
        alert('hello again bro!!!');
    });

}); 
```

# jquery - 使用jquery检查哪个表单完成，然后使用一键提交

> ID：14101859
> 
> 赞同：0
> 
> 时间：2012-12-31T12:53:32.860
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, validation, client-side

我有两种形式分别向不同的 api 发出请求。我想要实现的是让 jquery 检查哪个表单已完成，然后提交相关表单。每个请求都通过其特定的控制器。表格是这样的

```
<div class="container margin50">
<div class="row">
<div class="span6 offset3 cf formBackground">
<h1>CoverArt Finder</h1>

<h3>Search Movies</h3>
<%= form_tag main_results_path, :method => "get" %>
<%= text_field_tag 'search', nil, :placeholder => 'Enter Film Name Here.....' %>

<h1>OR<h1>

<h3>Search Albums</h3>
<%= form_tag album_album_results_path, :method => "get" %>
<%= text_field_tag 'search', nil, :placeholder => 'Enter Artist Name here.....' %>
<%= submit_tag "search" %> 
```

我对 Jquery 比较陌生，但已将此作为一种可能的解决方案

```
on submitButton click:

if formA.someValue != null
post / submit formA
else if formB.someValue != null
post / submit formB 
```

唯一的问题是我不确定如何将其转换为 Jquery 以及如何使其与 Rails 表单一起使用..

谁能提供一些建议或解决方案

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:08:24.980

您可以使用 jquery 验证[插件](https://github.com/jzaefferer/jquery-validation)

```
$(document).ready(function(){  
    $("form").validate();

    $("form").submit(function(e){
    e.preventDefault();
        if($(this).valid()){
            alert("form is valid");
        }        
        else{
                    alert("form is invalid");
        }
    });
}); 
```

这是演示[http://jsfiddle.net/BcRfj/](http://jsfiddle.net/BcRfj/)

# javascript - 在 javascript 代码中访问外部 css 属性

> ID：14101863
> 
> 赞同：3
> 
> 时间：2012-12-31T12:54:03.413
> 
> 标签：javascript, css

在我的 javascript 代码中，我试图访问外部样式表中存在的子类。使用

```
window.getComputedStyle("className", null).getPropertyValue("color") 
```

引发未处理的错误：`WRONG_ARGUMENTS_ERR`。有人看到这有什么问题吗？我想访问外部样式表中存在的类属性。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:04:06.390

我认为你需要提供`getComputedStyle()`一个 DOM 元素，而不仅仅是 ClassName

也许尝试：

```
var el = document.getElementsByClassName("className")[0];

window.getComputedStyle(el, null).getPropertyValue("color"); 
```

# google-chrome-extension - Chrome 扩展：当用户点击图标时导航到一个 url

> ID：14101865
> 
> 赞同：18
> 
> 时间：2012-12-31T12:54:08.163
> 
> 标签：google-chrome-extension

当用户点击扩展图标时，有什么方法可以执行 javascript，将浏览器导航到某个 url？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-05-04T17:00:36.090

您可以使用以下代码：

```
chrome.tabs.update({
     url: "http://www.example.com/"
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-31T13:50:28.363

在浏览器操作的侦听器中使用。当您省略参数时，更新将应用于当前选定的选项卡。[`chrome.tabs.update`](https://developer.chrome.com/docs/extensions/reference/tabs/#method-update)`({ url: "http://www.example.com/" })``onClicked``tabId`

尽管是`chrome.tabs`API 的一部分，但这不需要`tabs`许可。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-04T18:32:34.833

您还可以将活动标签导航到所需的网址（无需打开新标签）

```
chrome.tabs.query( { active: true, currentWindow: true }, function( tabs ) {
  chrome.tabs.update( tabs[0].id, { url: "http://stackoverflow.com//" } ); 
}); 
```

# javascript - 嵌入对象 HTML 的高度

> ID：14101869
> 
> 赞同：1
> 
> 时间：2012-12-31T12:54:30.400
> 
> 标签：javascript, html, height, flash

我在 html 中遇到了嵌入对象高度的小问题。我想根据浏览器的高度和宽度设置对象的高度和宽度。我正在正确使用以下代码宽度设置，但是当我尝试将高度设置为 100% 时，它不会。

```
<object type="application/x-shockwave-flash" data="book.swf" width=100% height=100%> 
```

它适用于宽度但不适用于高度。有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:00:28.903

你需要设置例如

```
 html, body { height: 100%; } 
```

否则，实际上与设置对象高度的百分比无关。您可能还希望设置

```
 html, body { margin: 0; padding: 0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:02:51.760

尝试写宽度和高度的实际值而不是 procents，例如：

```
<object type="application/x-shockwave-flash" data="../Desktop/final.swf" width="349" height="171"> 
```

**由于评论而更新**

如果您想要完整的浏览器大小，请尝试以下链接：

[http://www.kirupa.com/developer/mx2004/fullscreen.htm](http://www.kirupa.com/developer/mx2004/fullscreen.htm)

[http://www.webdesign.org/flash-swish/flash-tutorials/making-flash-taking-the-size-of-browser.15847.html](http://www.webdesign.org/flash-swish/flash-tutorials/making-flash-taking-the-size-of-browser.15847.html)

# html - 如何禁用全屏 HTML5 视频的默认控件？

> ID：14101874
> 
> 赞同：9
> 
> 时间：2012-12-31T12:54:49.627
> 
> 标签：html, google-chrome, html5-video

我有一个指定宽度和高度的视频，双击它可以使用`videoElement.webkitRequestFullScreen()`. 默认情况下，视频没有任何控件。但是由于某种原因，在全屏时，会弹出默认控件。这是我正在做的事情：

```
<video id="videoId" width="320" height="240" autoplay="autoplay" ondblclick="enterFullScreen('videoId')" src="Blah.mp4"></video> 
```

`enterFullScreen(...)`函数定义为：

```
function enterFullScreen(elementId) {
    var element = document.getElementById(elementId);
    element.webkitRequestFullScreen();
    element.removeAttribute("controls");
} 
```

如您所见，我已经尝试删除函数中的控件。但无济于事。

有人可以告诉我如何防止这种自动插入默认控件的情况发生吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-08T22:09:04.143

这可以通过 CSS 解决，如下所述：[HTML5 video does not hide controls in fullscreen mode in Chrome](https://stackoverflow.com/questions/18270894/html5-video-does-not-hide-controls-in-fullscreen-mode-in-chrome#)

```
video::-webkit-media-controls {
  display:none !important;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T05:53:55.090

最后，我找到了解决这个问题的方法。正如 Alexander Farkas 建议的那样，我将视频包装在另一个 div 中，并将这个父 div 设置为全屏，然后将视频的高度和宽度分别设置为`screen.height`和`screen.width`。我在退出全屏时恢复了两个 div 的原始属性。

伪代码：

**HTML：**

```
<div id="videoContainer" style="position:absolute;background-color:black;">
     <video id="videoId" style="height:240;width:320;" ondblclick="enterFullScreen('videoId')" src="movie.mp4"></video>
</div> 
```

**JavaScript：**

```
function enterFullScreen(id) {
    var element = document.getElementById(id);
    element.parentNode.webkitRequestFullScreen();           
    element.style.height = screen.height;
    element.style.width = screen.width;
}
document.addEventListener("webkitfullscreenchange", function () {
    if(!document.webkitIsFullScreen) {
        // Restore CSS properties here which in this case is as follows :
        var element = document.getElementById('videoId');
        element.style.height=240;
        element.style.width=320;
    }
    }, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T20:48:14.547

如果视频全屏显示，用户代理应该显示控件，即使控件属性不存在。

较新的用户代理还支持任何元素上的全屏 API。因此，您可以尝试以下方法：

```
element.parentNode.webkitRequestFullScreen(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T13:11:34.417

您可以找到包含控件的 div 的 id 并使用 javascript 禁用它。例如，如果包含控件的 div 的 id 是“controldiv”，那么您可以在函数中编写

```
var ctrls = document.getElementById("controldiv");
ctrls.disabled="true"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T16:48:56.507

通常以下应该工作：

```
var videoPlayer = document.getElementById('videoId');
videoPlayer.controls = false; 
```

但我不确定进入全屏模式是否会覆盖它。

# c# - HTTP 基本身份验证不适用于 WebBrowser.Navigate

> ID：14101875
> 
> 赞同：2
> 
> 时间：2012-12-31T12:54:52.603
> 
> 标签：c#, .net, http-headers, webbrowser-control

我正在使用 WebBrowser 控件发布到受密码保护的 URL。我提供了授权标头，但 Internet Explorer 在打开时仍会显示用户密码弹出窗口。

`webBrowser.Navigate(url, "_blank", Encoding.ASCII.GetBytes(postData), "Content-Type: application/x-www-form-urlencoded" + Environment.NewLine + "Authorization: Basic " + Convert.ToBase64String(Encoding.ASCII.GetBytes(userpassword)) + Environment.NewLine);`

这里更特别的是，即使您在打开浏览器窗口时提供正确的凭据，它也不起作用。弹窗不断出现。

如果我从上面的调用中删除标题并在 Internet Explorer 弹出窗口中提供正确的凭据，它就会起作用。

# iphone - NSTimer 暂停不起作用

> ID：14101880
> 
> 赞同：2
> 
> 时间：2012-12-31T12:55:14.800
> 
> 标签：iphone, ios, nsdate, nstimer

我用`start`, `stop`,设置了三个按钮`pause`。并给 NSTimer 控制以计算。开始停止按钮工作正常给我开始和停止时间，但`pause`按钮没有给我准确的时间。它实际上暂停时间..但重新开始它添加暂停的定时和显示 [ay. 假设我在开始的 5 秒处暂停并等待 5 秒然后按开始...它应该显示 5 ...但显示 10 ..

```
-(void)start:(NSTimer *)timer
{
  if(_timer==nil)
  {
    startDate =[NSDate date];

    _timer=[NSTimer scheduledTimerWithTimeInterval:0.25 target:self selector:@selector(timer:) userInfo:nil repeats:YES];
  }

  if(_timer!=nil)
  { 
    float pauseTime = -1*[pauseStart timeIntervalSinceNow];

    [_timer setFireDate:[previousFireDate initWithTimeInterval:pauseTime sinceDate:previousFireDate]];
  }

}

-(void)timer:(NSTimer *)timer
{
  NSInteger secondsSinceStart = (NSInteger)[[NSDate date] timeIntervalSinceDate:startDate];

  NSInteger seconds = secondsSinceStart % 60;
  NSInteger minutes = (secondsSinceStart / 60) % 60;
  NSInteger hours = secondsSinceStart / (60 * 60);
  NSString *result = nil;
  if (hours > 0) 
  {
    result = [NSString stringWithFormat:@"%02d:%02d:%02d", hours, minutes, seconds];
  }
  else 
  {
    result = [NSString stringWithFormat:@"%02d:%02d", minutes, seconds];        
  }

  label.text=result;

  NSLog(@"time interval -> %@",result);
}

-(void)stop
{
  if(_timer!=nil)
  {
    endDate = [NSDate date];
 NSLog(@"endate%@",endDate);

     NSTimeInterval interval = [endDate timeIntervalSinceDate:startDate];
NSLog(@"total time %f",interval);
    [_timer invalidate];
    _timer = nil; 
  startDate=nil;
  }
}

-(void)pause:(NSTimer *)timer
{
  pauseStart = [NSDate dateWithTimeIntervalSinceNow:0];

  previousFireDate = [_timer fireDate];

  [_timer setFireDate:[NSDate distantFuture]];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:04:21.430

它永远不会对你有用，因为 NSTimer 不能暂停，它会启动，并且只有在你将其无效时才会停止。当它处于有效状态时表示它正在运行，当状态无效时表示定时器已停止。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T14:40:32.737

我在 mac os 上创建了这个[应用程序。](http://www.keepandshare.com/doc/5387039/timerstopwatch-3-zip-43k?da=y)我认为您可以理解逻辑，甚至可以通过细微的更改来复制它……至于 UILabel。

在.h

```
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;

- (IBAction)start:(id)sender;
- (IBAction)pause:(id)sender;
- (IBAction)stop:(id)sender;
@property (strong) IBOutlet NSTextField *label;

@property (strong)NSDate *startDate;
@property (strong)NSTimer *timer;

@property (assign)BOOL isRunning;
@property (assign)BOOL isPaused;

@property(assign)NSInteger secondsSinceStart;

@property(assign)NSInteger secondsPaused;
@end 
```

在.m

```
#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    self.label.stringValue=@"00:00:00";
    self.isRunning=NO;
    self.isPaused=NO;
    self.secondsPaused=0;
}

-(void)timerDisplay{

    if (self.isPaused) {
        self.secondsPaused++;
        return;
    }

    self.secondsSinceStart+=1;

    NSInteger seconds = self.secondsSinceStart % 60;
    NSInteger minutes = (self.secondsSinceStart / 60) % 60;
    NSInteger hours = self.secondsSinceStart / (60 * 60);
    NSString *result = nil;

    if (self.isRunning && !self.isPaused) {
        result = [NSString stringWithFormat:@"%02ld:%02ld:%02ld", hours, minutes, seconds];
        self.label.stringValue=result;
    }
}

- (IBAction)start:(id)sender {
    self.isRunning=!self.isRunning;
    self.isPaused=NO;
    self.secondsSinceStart=0;
    self.label.stringValue=@"00:00:00";

    self.startDate =[NSDate date];
    if (!self.timer) {
        self.timer=[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(timerDisplay) userInfo:nil repeats:YES];
    }
}

- (IBAction)pause:(id)sender {
    self.isPaused=!self.isPaused;
    NSLog(@"pause : %d",self.isPaused);
}

- (IBAction)stop:(id)sender {
    self.isRunning=NO;
    NSLog(@"start : %@",self.startDate);
    NSLog(@"end : %@",[NSDate date]);
    NSLog(@"paused : %ld",self.secondsPaused);

    NSInteger totalTime=self.secondsSinceStart+self.secondsPaused;

    NSInteger seconds = totalTime % 60;
    NSInteger minutes = (totalTime / 60) % 60;
    NSInteger hours = totalTime / (60 * 60);
    NSString *result = result = [NSString stringWithFormat:@"%02ld:%02ld:%02ld", hours, minutes, seconds];
    NSLog(@"Total : %@",result);

}
@end 
```

# matlab - MATLAB中的轴刻度标记

> ID：14101886
> 
> 赞同：2
> 
> 时间：2012-12-31T12:55:50.493
> 
> 标签：matlab, plot

我有以下数据图：

![阴谋](../Images/cdc5490dff4a73a2fc649004ca44d466.png)

我想在 x 轴上有月份标签，即 Jan、Feb、...、Dec 等间距。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:58:27.157

`XtickLabel`您可以为此修改属性：

```
set(gca, 'XTickLabel', {'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', ...
   'Aug', 'Sep', 'Oct', 'Nov', 'Dec'}) 
```

如果没有显示所有刻度，您也可以修改该`XTick`属性：

```
set(gca, 'XTick', linspace(1, N, 12)) 
```

其中`N`是绘制的样本总数。

阅读[此](http://www.mathworks.com/help/matlab/creating_plots/setting-axis-parameters.html#f6-29060)内容以获取更多信息。

# wpf - 在文本框中用双精度值替换指数值

> ID：14101889
> 
> 赞同：4
> 
> 时间：2012-12-31T12:55:58.810
> 
> 标签：wpf, c#-4.0, mvvm, telerik

我有一个文本框，并且我已将文本属性绑定到我的视图模型类中的双倍值。我还为文本框创建了正则表达式，以便只输入数值。

我正在计算我的视图模型类中的值。如果值小于或等于 0.00001，则在文本框中显示指数格式，如 (1.E-5)。

我想在文本框中显示像 0.00001 这样的双精度值，而不是指数格式。我也不想使用字符串格式，即 D、F2、F5。因为它限制了浮点数。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T22:17:59.343

您应该使用`StringFormat`a 的属性`Binding`。如果您希望它在点后显示 2 个数字，您的`TextBox`XAML 应该如下所示：

```
<TextBox Text="{Binding YourText, StringFormat=N2}" /> 
```

如果您需要有关 的更多信息`StringFormat`，我鼓励您阅读有关[标准数字格式字符串的 MSDN 文章](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:22:35.173

我知道这不是解决方案，但它可能会有所帮助。您可以使用获取这样的字符串并更改其格式的方法

```
string expon2notexpon(string num)
{
    num=num.ToLower();
    int index=num.IndexOf('e');
    if (index == -1)
        return num;

    string firstNum=num.Substring(0, index-1);
    int count=int32.Parse(num.Substring(index+1));
    res="0.";
    for (int i=1;i<count;i++)
    {
        res += '0'
    }
    res += firstNum.ToString();
} 
```

我只是输入了这个想法，可能会有一些错误。

# php - 在移动数据连接上获取 Youtube 数据很慢，要代理吗？

> ID：14101890
> 
> 赞同：0
> 
> 时间：2012-12-31T12:56:00.297
> 
> 标签：php, android, xml, proxy

我刚刚制作了一个简单的应用程序，可以下拉用户视频，例如

```
https://gdata.youtube.com/feeds/api/users/daxx2k/uploads 
```

它在快速 wifi 连接时工作正常，但在移动设备上非常慢，我知道这在很大程度上取决于接收等，但它通常很慢。

我正在尝试想出加快访问速度的方法，并且我已经意识到没有办法减少返回的 XML 数量，所以我认为通过我自己的服务器代理数据可能是有效的。

我可以编写一个从 Android 调用的简单 PHP 脚本，并且只输出它需要的字段，video { name, url, date, duration, thumbnail }。

我想速度会更高，我也会有一个抽象层。如果 Youtube 改变了一些东西（不太可能），我可以修复我的一面，但输出的字段将保持不变。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:29:07.830

如果您只有一台服务器，则它是单点故障。您还需要处理流量，带宽和住房将花费您的钱。

我宁愿玩[Youtube API Demo](http://gdata.youtube.com/demo/index.html)，看看什么是最好的。例如使用 json 而不是 xml。或 jsonc 但为此您需要手动更改查询，并且它不适用于所有查询。

* * *

[http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?format=1,6&v=2](http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?format=1,6&v=2) [9.3KB] [http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads ?alt=json&format=1,6&v=2](http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?alt=json&format=1,6&v=2) [9.2KB] [http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?alt=jsonc&format=1,6&v=2](http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?alt=jsonc&format=1,6&v=2) [5KB]

[http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?format=1,6](http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?format=1,6) [7.5KB] [http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?alt =json&格式=1,6](http://gdata.youtube.com/feeds/mobile/users/daxx2k/uploads?alt=json&format=1,6) [7.5KB]

# linux - 是否可以创建一个将 ssh 连接到远程机器并继续在那里做事的 BASH 脚本？

> ID：14101898
> 
> 赞同：3
> 
> 时间：2012-12-31T12:56:25.927
> 
> 标签：linux, bash

我自己尝试过，但是在脚本登录到远程机器后，脚本停止了，这是可以理解的，因为远程机器不知道脚本，但是可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T15:20:03.090

试试here-doc

```
ssh user@remote << 'END_OF_COMMANDS'
echo all this will be executed remotely
user=$(whoami)
echo I am $user
pwd
END_OF_COMMANDS 
```

当您说“继续在那里做事”时，您可能意味着与远程会话进行简单交互，然后：

```
expect -c 'spawn ssh user@host; interact' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T13:43:35.983

有多种方式：

1.  ssh user@remote < script.txt
2.  scp 脚本 user@remote:/tmp/somescript.sh ; ssh user@remote /tmp/somescript.sh
3.  编写一个[期望](http://linux.die.net/man/1/expect) [脚本](https://stackoverflow.com/search?q=%5Bbash%5D%20expect)。

对于前两个选项，为了自动化，我建议使用公钥/私钥对登录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T12:59:03.040

您需要在 ssh 调用结束时提供远程命令：

```
$ ssh user@remote somecommand 
```

如果你需要实现一系列命令，那么编写一个脚本，将它复制到远程机器（使用，例如`scp`）并调用它，如上所示，会更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T13:39:28.243

在这种情况下，我更喜欢 perl：

```
use Net::SSH::Perl;
my $ssh = Net::SSH::Perl->new($host);
$ssh->login($user, $pass);
my($stdout, $stderr, $exit) = $ssh->cmd($cmd); 
```

它不易出错，并且在捕获命令的标准输出、标准错误和退出状态时给了我更好的控制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T13:05:28.940

您`~/.profile`（或`~/.bash_profile`例如）中的类似内容应该可以解决问题：

```
function remote {
    ssh -t -t -t user@remote_server "$*'"
} 
```

然后打电话

```
remote somecommandofyours 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T16:32:40.173

*我通过使用declare -f*将整个函数通过 ssh 传递到远程服务器然后在那里执行它来解决了这个问题。这实际上可以很简单地完成。唯一需要注意的是，您必须确保函数使用的任何变量要么在其内部定义，要么作为参数传入。如果您的函数使用任何类型的环境变量、别名、其他函数或在其外部定义的任何其他变量，它将无法在远程计算机上运行，​​因为这些定义将不存在。

所以，我是这样做的：

```
somefunction() {
    host=$1
    user=$2
    echo "I'm running a function remotely on $(hostname) that was sent from $host by $user"
}

ssh $someserver "$(declare -f somefunction);somefunction $(hostname) $(whoami)" 
```

请注意，如果您的函数*确实*使用了任何类型的“全局”变量，则可以通过使用 sed 或我更喜欢的 perl 进行模式替换，在声明函数之后替换这些变量。

```
declare -f somefunction | perl -pe "s/(\\$)global_var/$global_var/g" 
```

This will replace any reference to the global_var in the function with the value of the variable.

Cheers!

# cakephp-2.1 - 更改用户密码功能 -> 密码已保存，但我不会登录

> ID：14101902
> 
> 赞同：1
> 
> 时间：2012-12-31T12:56:45.917
> 
> 标签：cakephp-2.1

我正在编写一个函数来使用户能够更改他们的密码。

```
 public function change_password() {
        if ($this->request->is('post')) {
            debug($this->request->data);
            $tmpUsr = $this->User->find('first', array('conditions'=>array('user_id'=>$this->Auth->user('user_id'))));
            debug($tmpUsr);
            $tmpUsr['User']['password'] = AuthComponent::password($this->request->data['Change']['Confirmation']);
            if ($this->User->save($tmpUsr)) {
                debug("saved new password: " . $tmpUsr['User']['password']); // * after this debug is fired, the hash looks ok *
            } 
            else {
                debug("password was not saved");
            }
        }
    } 
```

**问题：**

保存的密码看起来是散列的，但我试过了，看起来保存的值不是正确的散列。

在数据库中，保存的散列字符串在调试后仍然不正确，我评论它看起来不错..

任何想法可能是一个问题？

我正在使用蛋糕教程（2.0）中的登录功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:09:16.097

尝试 ：

```
$this->Auth->password($this->request->data['Change']['Confirmation']); 
```

反而。

来自[API](http://api.cakephp.org/class/auth-component#method-AuthComponentpassword)文档“此方法旨在作为方便的包装器`Security::hash()`”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:30:19.890

我找到了答案，这很愚蠢：

1.  在模型中有一个函数 beforeSave() 发生散列。
2.  所以散列发生了两次（第一次在函数 change_password() 中），然后在 beforeSave..

我的错误，抱歉耽误您的时间。。

# breadcrumbs - 谷歌 RDFa 面包屑

> ID：14101903
> 
> 赞同：0
> 
> 时间：2012-12-31T12:56:47.317
> 
> 标签：breadcrumbs, rdfa

我目前正在尝试在我的网页中实现 RDFa 面包屑。我认为我在一个页面上正确地遵循了多个面包屑的示例，但是在测试工具和搜索结果中，面包屑没有按预期处理（被提取，但没有显示面包屑）。

你能不能给我一个提示我做错了什么。

谢谢。

[带有面包屑的页面](http://en.algoritmy.net/article/47455/Rabin-Miller-test)

```
<div class="breadCrumb">
    <span typeof="v:Breadcrumb">
        <a href="/" ref="v:url" property="v:title">Algoritmy.net</a> &gt; 
        <span rel="v:child">
             <span typeof="v:Breadcrumb">
                 <a ref="v:url" property="v:title" href="/category/39974/Mathematics">Mathematics</a> &gt; 
                 <span rel="v:child">
                     <span typeof="v:Breadcrumb">
                         <a ref="v:url" property="v:title" href="/category/48669/Primality">Primality</a> &gt; 
                         <span rel="v:child">
                              <span typeof="v:Breadcrumb">
                                  <a href="/article/47455/Rabin-Miller-test" ref="v:url" property="v:title">Rabin-Miller test</a>
                              </span>
                         </span>
                     </span>
                 </span>
            </span>
        </span>
    </span>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T15:26:09.790

“ref”不是有效的 RDFa 或 HTML 属性，请确保拼写正确：rel。ref="v:url" 应该是 rel="v:url"

# c++ - 可以将 istream 与 memcpy 一起使用

> ID：14101904
> 
> 赞同：1
> 
> 时间：2012-12-31T12:56:51.710
> 
> 标签：c++, boost, stream, buffer

我正在开发一个使用 C (StormLib) 编写的库的 C++ 应用程序。该库具有将文件读取到 a 的功能`void* buffer`（我猜是 a `char[]`）。我想发送到另一个库进行处理。希望它可以用类似的东西来完成，`boost::iostreams::stream_buffer`或者`boost::asio::streambuf`将文件存储为通过任何需要的方法读取。

我试过简单地将一个 istream（有一个`boost::asio::streambuf`打开的）传递给函数，它在它试图执行时给了我一个 BADACCESS

`memcpy((theFile),(myiStream),(full size of the file))`

我基本上想要一种“比特袋”对象，可以轻松地移动到不同的方法以结构化方式转换数据，但我不知道应该如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:00:21.840

在 C++ 中恢复数据后，您想如何处理这些数据？如果您只想要原始数据，那么您可以（例如）只创建 a `std::vector<char>`，`resize`因此它足以容纳所有数据^*，然后将指针传递给它的第一个元素。

* * *

[*你如何确定“足够大”是一个不同的问题......]

# java - Android：如何初始化 View 和 Canvas？

> ID：14101908
> 
> 赞同：5
> 
> 时间：2012-12-31T12:57:04.350
> 
> 标签：java, android

我需要为我正在处理的项目初始化 View 和 Canvas，但是在一个小时左右或搜索之后，我无法弄清楚使它们等于什么。

这是我到目前为止的代码：

```
 public class DisplayMap extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {
            displayMap();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (SlickException e) {
            e.printStackTrace();
        }

    }

    public void displayMap() throws IOException, SlickException {
        loadWorld("assets/World.tmx");
    }

    public void loadWorld(String path) throws IOException {
        View view = ?????;
        Canvas canvas = ?????;

        //World loading goes here
    }
    } 
```

那么，有人可以建议我如何初始化 View 和 Canvas 吗？还是我以完全错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T23:51:04.320

您需要编写一个加载地图的自定义视图，然后在您的活动中使用自定义视图。

在`TMXView.java`：

```
public class TMXView extends View {
  public TMXView(Context context) {
    super(context);
    // Load map
  }

  public void onDraw(Canvas canvas) {
     // Draw the map on the canvas
  }
} 
```

在`onCreate`您的活动中：

```
 View view = new TMXView(this);
 setContentView(view); 
```

有关更多信息，请参阅我关于自定义组件的演讲：[http ://www.sqisland.com/talks/android-custom-components/](http://www.sqisland.com/talks/android-custom-components/)

# javascript - Ember：防止参数更改时完全重新路由

> ID：14101913
> 
> 赞同：1
> 
> 时间：2012-12-31T12:57:27.073
> 
> 标签：javascript, ember.js, ember-old-router

我目前正在构建我的第一个 Ember 应用程序，我正在使用 Ember.Router 从 URL 获取参数，设置正确的状态并连接几 (5) 个插座。

让我烦恼的是，当 URL 中的单个参数发生更改时，路由器日志显示应用程序完全重新路由并重新实例化所有视图（弄乱了转换等）..

**例子：**

`GET /#/myapp/from/2012-01-01/to/2012-12-31`

日志输出：

```
STATEMANAGER: Entering root ember.js:18 
STATEMANAGER: Sending event 'navigateAway' to state root. ember.js:18 
STATEMANAGER: Sending event 'unroutePath' to state root. ember.js:18 
STATEMANAGER: Sending event 'routePath' to state root. ember.js:18 
STATEMANAGER: Entering root.main ember.js:18 
STATEMANAGER: Entering root.main.range ember.js:18
STATEMANAGER: Entering root.main.range.index ember.js:18 
```

然后我更改哈希（所以没有新请求）

`/#/myapp/from/2012-06-01/to/2012-12-31`

日志输出：

```
STATEMANAGER: Sending event 'navigateAway' to state root.main.range.index. ember.js:18
STATEMANAGER: Sending event 'unroutePath' to state root.main.range.index. ember.js:18
STATEMANAGER: Sending event 'unroutePath' to state root.main.range. ember.js:18
STATEMANAGER: Sending event 'unroutePath' to state root.main. ember.js:18
STATEMANAGER: Sending event 'unroutePath' to state root. ember.js:18
STATEMANAGER: Sending event 'routePath' to state root. ember.js:18
STATEMANAGER: Entering root.main ember.js:18
STATEMANAGER: Entering root.main.range ember.js:18
STATEMANAGER: Entering root.main.range.index ember.js:18 
```

我在这里遗漏了什么吗，因为这看起来有点多余。不仅如此，我的应用程序中有一个精美的过渡图表，现在每次用户按下`back`或`forward`在他们的浏览器中都会完全重新加载..

# mfc - 带有 MFC DLL 的 VB6 主机错误地显示模式对话框

> ID：14101916
> 
> 赞同：1
> 
> 时间：2012-12-31T12:57:33.040
> 
> 标签：mfc, vb6, modal-dialog, cdialog

我们有一个 VB6 应用程序，我们通过 MFC DLL 提供了扩展功能。但是，DLL 中基于 CDialog 的类存在一个特定问题。我们`Me.hWnd`从 VB6 应用程序的主窗体传递给 CDialog 构造函数，以便`DoModal()`知道它的父级是什么。尽管基于 CDialog 的类位于 VB6 应用程序的顶部`DoModal()`，但它们不会像模式对话框所期望的那样**阻止VB6 应用程序。**也就是说，当 DLL 对话框仍然在 EXE 的窗口前面时，我仍然可以单击调用 DLL 的按钮，再次（一次又一次）显示该对话框。

VB6 代码没有什么可显示的。正如我提到的，它只是传入`Me.hWnd`。MFC 代码很简单：

```
HWND exeHwnd = pSessionContext->GetHWnd(); // our state container for the DLL
CWnd* exeWnd = CWnd::FromHandle(exeHwnd);
MyCDialog dlg(exeWnd);
INT_PTR result = dlg.DoModal();
// waits, stays in front, but does not "block" the window
switch (result) // ... 
```

我一路跟踪这些值并使用 Spy++ 确认窗口句柄。一切似乎都很好。任何想法我错过了什么或做错了什么？

附加信息

该 hwnd 值在其他地方用于 MessageBox 并按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:52:31.153

一个简单的解决方案可能是在调用 DLL 之前在 VB6 代码中禁用父 VB6 应用程序，并在 DLL 代码返回时重新启用 VB6 应用程序。像这样的东西（空气代码）

```
Me.Enabled = False 
MagicDLL.ShowTheDialog(Me.hWnd)
Me.Enabled = True 
```

# php - 我认为我的 Http 类可能正在做它不应该做的工作

> ID：14101939
> 
> 赞同：4
> 
> 时间：2012-12-31T13:00:16.730
> 
> 标签：php, oop, http, model-view-controller

在我的 MVC 应用程序中有 5 种类型的用户：

`guest, customer, deliver person, staff and admin`

如果某个用户尝试查看他们无权访问的页面，他们会被重定向到某个页面，并且脚本的其余部分将被终止。

例如，如果客户或送货员尝试查看他们无权访问的页面，他们会被重定向回，`http://www.mysite.com/members/`或者例如，如果客人尝试访问会员区域，他们会被重定向到登录页面。

我的`Auth`班级会进行检查，并且还负责登录过程。

一旦`$auth->login($username, $password)`验证了它调用的登录详细信息

`$this->http->redirect()`在`login()`方法的底部。

```
public function redirect() {

    if($this->auth->isLoggedIn()) {

        switch($_SESSION['accountType']) {

            case 1:
            $url = $this->config->setting('url.members');
            break;

            case 2:
            $url = $this->config->setting('url.members');
            break;

            case 3:
            $url = $this->config->setting('url.staff');
            break;

            case 4:
            $url = $this->config->setting('url.admin');
            break;

        }

    }
    else {
        $url = $this->config->setting('url.base') . 'login';
    }

    $this->setHeader('Location', $url);

} 
```

该`$http->respond()`方法稍后会被调用，它会发送任何添加的标题（如上面添加的“位置”）。

我认为该`redirect()`方法正在做它不应该做的工作，但我不确定。对我来说，我的班级似乎`Http`不应该检查人们是否登录以及人们拥有什么类型的帐户，它应该只做诸如添加标题并将响应发送回客户端之类的事情，但这样做似乎是错误的类中的一个`redirect()`方法，`Auth`因为那应该只处理授权。

任何想法都会非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:27:26.803

Auth 类不应确定您将被重定向到的链接，但它应提供 Http 类进行正确重定向所需的指示。这是您的方法的问题：您的 Http 类知道的太多了。现在，如果 url 本身是在 Auth 类中计算的，那么现在 Auth 类知道的太多了。主要想法是使用带参数的重定向方法，参数应该在调用者类中决定（无论是Auth还是另一个）。

# c# - 如何从框架内的子页面调用父页面中的函数？

> ID：14101942
> 
> 赞同：1
> 
> 时间：2012-12-31T13:00:37.003
> 
> 标签：c#, wpf

我有一个页面（称为`MainPage`），其中有一个框架，其中包含一个子页面（称为`EditorPage`）的实例。子页面实例如何调用`public`父页面中的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T15:56:45.730

不漂亮，但您可以在 ctor 中传递参考

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Page1 page1 = new Page1(this);
        Frame1.Navigate(page1);
    }
    public void MainMethod() {}
}

public partial class Page1 : Page
{
    public Page1()
    {
        InitializeComponent();
    }
    public Page1(MainWindow mw)
    {
        mw.MainMethod();
        InitializeComponent();
    }
} 
```

考虑将 Class 添加到项目中以保存共享方法

# java - JSP 不检测控制器变量

> ID：14101946
> 
> 赞同：4
> 
> 时间：2012-12-31T13:01:04.597
> 
> 标签：java, jsp, spring-mvc

我正在尝试使用 XML 配置清理 Spring MVC 应用程序并将其迁移到 Java 代码配置。除了从控制器发送的变量外，一切都很顺利。当我尝试从 JSP 视图中的模型映射访问变量时，将打印带有美元符号和花括号的变量名而不是变量值。即一个模型映射变量称为**错误**，在页面中显示为**${error}**。

请问有人可以遮光吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T13:05:20.203

这与 Spring 无关，但`Expression Language`( `EL`) 已为您禁用。这可能有几个原因，具体取决于您使用的 Servlet 容器。一个原因可能是您在 web.xml 文件中使用了旧的 XML 命名空间声明。

您始终可以通过在`<%@ page isELIgnored="false" %>`jsp 页面顶部添加来强制在 JSP 中评估 EL。

# java - 为简单查询获取空结果集

> ID：14101952
> 
> 赞同：2
> 
> 时间：2012-12-31T13:02:33.033
> 
> 标签：java, sql, resultset

大师们，我是 Java SQL 的新手，需要一些帮助。我正在尝试从 MS SQL Server 2008 获取参数。数据肯定存在 - 它是当前有效的数据库，我正在尝试使用用户记录来获取另一个应用程序的凭据。

我断言了以下查询：

```
 String query = "SELECT [USER].qc_number FROM [USER] WHERE "[USER].login_name = '"
 + userNameInput + "' AND [USER].password = '" + passWordInput + "';"; 
```

从用户那里收到的信息`userNameInput`。`passWordInput`URL、查询和驱动程序类绝对正确：我从应用程序和服务器视图检查了 DB 模式。此外，我通过一一更改参数来验证所有异常系统，从而生成正确的异常消息。但是，我得到一个包含 1 列和 0 行的结果集。

代码如下：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class trOdbc 
{// database URL                              
    final String DB_URL = "***";
    final String Class_URL = "com.microsoft.sqlserver.jdbc.SQLServerDriver";

    private Connection connection = null; // manages connection
    private Statement statement = null; // query statement
    private ResultSet resultSet = null; // manages results
    private Boolean connectedToDatabase = false;

// ----------------------------------------------------------

        public void createJdbcConnection() 
    { // connect to database books and query database
        if (connectedToDatabase)
        {   return; }
        try 
                { // connectedToDatabase is false - establish the connection
            Class.forName(Class_URL); 
            connection = DriverManager.getConnection
                (DB_URL, "***", "***" );
            statement = connection.createStatement
                (ResultSet.TYPE_SCROLL_INSENSITIVE, 
                 ResultSet.CONCUR_READ_ONLY); 
            connectedToDatabase = true;
        } 
        catch (SQLException ex) 
            { System.out.println ("SQL Exception in connection establishment: " + ex); }
        catch (ClassNotFoundException ex) 
            { System.out.println ("Class not found exception in query process: " + ex); }
    }

// ----------------------------------------------------------

    public String [][] processJdbcQuery (String query)
    {                
        createJdbcConnection ();
        if (!connectedToDatabase)
                {   return null; }// the connection wasn't established 

        try 
        {// query database
            resultSet = statement.executeQuery(query);
            int columns = resultSet.getMetaData().getColumnCount();
                        int rows = 0;
            if (resultSet != null)
            {
                resultSet.beforeFirst();
                resultSet.last();
                rows = resultSet.getRow();
            }
            String [][] tempData = new String[rows][columns];
            resultSet.beforeFirst();
                        rows = 0;
                        while (resultSet.next())
            {
                for (int x = 1; x <= columns; x++) 
                {
                    tempData [rows][x - 1] = resultSet.getString (x);
                }
                                rows++;
            } 
            CloseJdbcConnection ();
            return tempData;
        }
        catch (SQLException ex) 
                {   
            System.out.println ("SQL Exception in query process: " + ex);
            CloseJdbcConnection ();
            return null; 
                }
    } // end processJdbcQuery

// ----------------------------------------------------------

        public void CloseJdbcConnection()
    {              
        if ( connectedToDatabase )                  
        {// close Statement and Connection. resultSet is closed automatically.
            try 
            {
                statement.close();                        
                connection.close();                            
                connectedToDatabase = false;
            } 
            catch (SQLException ex) 
                { System.out.println ("SQL Exception in connection closure: " + ex); }
        } // end if
    } // end method CloseJdbcConnection          
} // end class trOdbc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:12:06.760

你为什么不使用[准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)呢？

这是[在java中使用准备好的语句的一个很好的教程](http://www.roseindia.net/jdbc/jdbc-mysql/TwicePreparedStatement.shtml)

在您的情况下，它将是：

```
String query = "SELECT [USER].qc_number FROM [USER] " +
        "WHERE [USER].login_name = ? AND [USER].password = ?;"; 
```

然后在每次执行时将其设置为不同的值：

```
PreparedStatement ps = connection.prepareStatement(query);

ps.setString(1, userNameInput);
ps.setString(2, passWordInput);

resultSet = ps.executeQuery(); 
```

# db2 - DB2 在“LIST TABLES”之后发现了一个意外的标记“END-OF-STATEMENT”

> ID：14101953
> 
> 赞同：0
> 
> 时间：2012-12-31T13:02:40.547
> 
> 标签：db2

我是第一次使用 DB2 用户，在执行“列表表”时遇到了麻烦；在 IBM Data Studio 中。

我可以运行“选择”命令（以分号结尾）和“更新命令”，但可以运行“列表；” （有和没有分号）给出以下错误：

```
An unexpected token "END-OF-STATEMENT" was found following "LIST TABLES". 
Expected tokens may include:  "JOIN <joined_table>".. SQLCODE=-104, SQLSTATE=42601, DRIVER=4.14.113 
```

更新：或者，以下命令有效：

```
select tabname from syscat.tables where tabschema = 'whatever-schema-name'; 
```

顺便说一句，是否可以将默认查询结果窗口从“状态”更改为“结果 1”。默认情况下它在“状态”窗口中，每次我必须单击“结果1”选项卡才能查看查询结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T06:35:57.717

使用列出数据库中的所有表，如下所示

```
 db2 list tables for all 
```

使用列出 Schema 中的所有表，如下所示

```
 db2 list tables for schema scheme_Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:58:33.157

我不确定我要说什么，但 Data Studio 仅适用于 SQL 命令。列表表命令不是 DDL、DML 或 DCL，因此，您无法从 Data Studio 中的 SQL 编辑器执行该命令。这些命令适用于 CLP。

# nservicebus - NServiceBus 不显眼模式按类型或接口定义消息

> ID：14101973
> 
> 赞同：0
> 
> 时间：2012-12-31T13:04:21.227
> 
> 标签：nservicebus

在[不显眼的 NServiceBus 示例中](http://support.nservicebus.com/customer/portal/articles/894010-unobtrusive-sample)，它解释了如何将入站消息映射到端点配置中的 ICommand / IEvent / IMessage ，如下所示：

```
.DefiningCommandsAs(t => t.Namespace != null && t.Namespace.EndsWith("Commands"))
.DefiningEventsAs(t => t.Namespace != null && t.Namespace.EndsWith("Events"))
.DefiningMessagesAs(t => t.Namespace == "Messages") 
```

但是下面的例子呢，我想创建一个*标记接口*并让我的所有事件都实现它：

```
public interface IAmSomeEvent
{
}

public class SomethingImportantHappenned : IAmSomeEvent
{
    public string blah { get; set; }
} 
```

然后做这样的事情：

```
.DefiningEventsAs(t => t.GetInterfaces().Contains(typeof(IAmSomeEvent))) 
```

但问题是它不起作用（NSB 不会将它映射到 IEvent）。

我可以理解为什么这不起作用，因为 NSB 只是接收 json（或 XML）流，因此它并不真正关心原始类型碰巧实现了某个接口或其他接口。但这将是一个非常好的功能。

有人对如何实现这一目标有任何建议吗？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T14:18:53.057

您不需要将接口映射到 NServiceBus 的接口，问题也与它如何进行反序列化无关。

我认为你的事件继承自其他东西，它本身继承自你的标记接口，这就是你的代码不起作用的原因。你看，GetInterfaces 只返回你的类*直接*实现的接口，而不是完整的继承层次结构。

相反，检查是否 t.IsAssignableFrom(typeof(IAmSomeEvent))。

All that being said, I'm not sure I see the point of this - after all, the conventions were introduced to provide decoupling from infrastructure so that you could have publishers and subscribers depend on different versions of NServiceBus. By introducing your own interface, you seem to be reintroducing that kind of dependency - in short, why not just use the NServiceBus IEvent interface?

# jquery - 删除后无法将 div 添加到另一个 div

> ID：14101975
> 
> 赞同：0
> 
> 时间：2012-12-31T13:04:38.457
> 
> 标签：jquery, html, dynamic

我是 jquery 和 web 编程和制作动态 html 控件的新手。

如果用户从组合框中选择一个值，我会创建一个用户选择的 html 控件。后

我删除了以前的 html 控件。

这是我想复制到另一个 div 的主要 div

```
<div id="MainContents" style="display: none" >
        <form action="../../newCV/AsyncUpload" id="photoform" enctype="multipart/form-data" method="post">
              <p> <input type="file" id="photo" name="photo" /></p>

            <p><input type="submit" value="Save my profile" /></p>
        </form>
    </div> 
```

这是我的 jqeurty 功能的一部分

```
case "Date":
                $('#c3').remove();
                $("<input name=\"c3\" id=\"c3\" type=\"date\"/>").appendTo("#changeablecontrol");

                break;

            case "Picture":

                $('#c3').remove();

                var html = "<div id=\"c3\" name=\"c3\"></div>";
                $(html).appendTo("#changeablecontrol");

                $('#MainContents').css('display', "inline").appendTo('#c3'); 
```

第一次，如果我选择图片，maintcontents div 追加到 div c3。没关系。但是如果我选择日期（删除 c3）并再次选择图片，那么它不会附加。因为当我选择日期时，它也会删除我表单中的 MainContents div。我不知道为什么它会删除 MainContents div。因为它在不同的部分。然后当我第二次在组合框中选择图片时，它不在我的表单中。

我尝试在 jquery 中使用 html 代码创建 maincontents，但那时，某些功能不起作用。

这是我的可变控件 div

```
 <div class="creatediv2" id="changeablecontrol">
    @Html.TextBox("c3","" ,new { onkeydown = "if (event.keyCode == 13) document.getElementById('create').click()" })
</div > 
```

我用 append 而不是 appendTo

```
html += "<div id=\"MainContents\">"
                html += "<form id=\"photoform\"  action=\"../../NewCV/AsyncUpload\"   enctype=\"multipart/form-data\" method=\"post\">"; //method=\"post\"
                html += "<input type=\"file\" id=\"photo\" name=\"photo\" />";
                html += "<input type=\"submit\" id=\"uploadbtn\" value=\"Upload Photo\" /></form>";
                html += "</div>"
                $('#c3').append(html); 
```

但是这个jquery函数不起作用

```
 $(function() {

            $("#photo").makeAsyncUploader({
                upload_url: "../newCV/AsyncUpload",
                flash_url: '../Scripts/swfupload.swf',
                button_image_url: '../../Content/blankButton.png',
                disableDuringUpload: 'INPUT[type="submit"]'
            });

        }); 
```

我希望我解释了我的问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:13:34.407

> 我不知道为什么它会删除 MainContents div。因为它在不同的部分。

不，这不对。您已将其附加到#c3，因此当您删除（删除）#c3 时，您也会删除他的所有子项。也许你应该使用 append()，而不是 appendTo() 函数？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:16:25.660

正如 [bumerang](https://stackoverflow.com/users/1939671/bumerang)所说，我为每个控件创建了 div，并将它们的显示值从隐藏更改为继承。

```
 <div class="creatediv2" id="changeablecontrol">

      <div id="filecontent" style="display: none" >
        <form action="/NewCV/AsyncUpload" id="photoform" enctype="multipart/form-data" method="post">
              <p> <input type="file" id="photo" name="photo" /></p>

            <p><input type="submit" value="Save my profile" /></p>
        </form>

  </div>     

<div id="textcontent" style="display: inherit">
    <input id="c3-1" name="c3" onkeydown="if (event.keyCode == 13) document.getElementById('create').click()" type="text" value="" />

</div>

<div id="longtextcontent" style="display: none">
      <textarea name="c3" id="c3-2" rows="5" cols="20"></textarea>
</div>

<div id="datecontent" style="display: none">
       <input name="c3" id="c3-3" type="date"/>
</div>

    </div > 
```

我的 jsquery 函数

```
 <script type="text/javascript">
        $(function() {

            $("#photo").makeAsyncUploader({
                upload_url: "/newCV/AsyncUpload",
                flash_url: '/Scripts/swfupload.swf',
                button_image_url: '/Content/blankButton.png',
                disableDuringUpload: 'INPUT[type="submit"]'
            });

        });
    </script> 
```

而这个正在改变显示器的价值

```
 var val = cmb.options[cmb.selectedIndex].text;

        switch (val) {
            case "Text":
                $('#textcontent').css('display', 'inherit');
                $('#longtextcontent').css('display', 'none');
                $('#datecontent').css('display', 'none');
                $('#filecontent').css('display', 'none');

                break;
               case "Long Text":

                $('#textcontent').css('display', 'none');
                $('#longtextcontent').css('display', 'inherit');
                $('#datecontent').css('display', 'none');
                $('#filecontent').css('display', 'none');

                break;

            case "Date":

                $('#textcontent').css('display', 'none');
                $('#longtextcontent').css('display', 'none');
                $('#datecontent').css('display', 'inherit');
                $('#filecontent').css('display', 'none');

                break;

            case "Picture":

                $('#textcontent').css('display', 'none');
                $('#longtextcontent').css('display', 'none');
                $('#datecontent').css('display', 'none');
                $('#filecontent').css('display', 'inherit');
                break;

        default:

            break;
        } 
```

谢谢你 ：）

# c++ - 一个指针可以从它的起点指向多远？

> ID：14101978
> 
> 赞同：-3
> 
> 时间：2012-12-31T13:04:47.500
> 
> 标签：c++

我正在将字符串（字符序列）发送到 C++ 中的函数，然后该函数将以 char 类型的指针接收它。但是当我增加指针以到达每个字符时，它会在第 19 个字符之后从字符串中消失，并且只是指向我程序中的其他位置。这是我要发送的字符串：

```
\xe1\x0c\x01\x00\x00\x01\x00\x00\x00\x00\x00\x00\x06google\x03com\x00\x00\x01\x00\x01 
```

这是我的代码：

```
char* request_process(char *request)
{
     for (int j = 0; j< 27; j++)
     {
        cout << (request[j] << 0) << "\n";
     }
 .
 .
 .    
 } 
```

在“谷歌”之后它出错了。那么我应该怎么做才能将它作为（二进制）“00000011”然后是“c”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:43:43.417

指针几乎肯定不是问题。另一方面，`cout`在文本模式下打开，并且向以文本模式打开的文件输出一些特别保留（如）以外的非打印字符`'\n'`是未定义的行为。在实践中，实现可能会让字符通过，但谁知道它们会对输出设备产生什么影响。

# actionscript-3 - 在 Adob e Flash CS3 中导入包 - 从“未定义属性的访问”到没有任何意义的消息

> ID：14101979
> 
> 赞同：1
> 
> 时间：2012-12-31T13:04:47.657
> 
> 标签：actionscript-3, flash, adobe, linker-errors

我继承了一个 Flash CS3 旧版应用程序，我正在尝试对其进行一些重构。最终一切都应该转移到 JS，但现在我想开始使用我所拥有的，而不是尝试完全重写。首先，我想安装一个小回归测试。

我正在尝试在它自己的包中设置测试，以减少它与原始应用程序的接缝。该应用程序使用了很多全局变量，我不希望干扰这些。

**我无法进行回归测试，因为我不知道如何正确导入包。**我很确定我正在监督一些明显的事情。

我的文件夹结构如下所示：

```
+- ascripts
|     +-- dependencies.as
|
+- root.fla
+- initialize.as
+- regressiontest.as 
```

**root.fla**是我唯一的 fla 文件。它只包含：

```
stop();
include "initialize.as" // Let's go outside! 
```

**initialize.as**包含所有的魔法。我正在使用这个外部文件，所以我不必使用 Flash IDE（因为它是最糟糕的编码 IDE）。在那里我有这个：

```
// ... 
import fl.controls.ComboBox;
include "ascripts/dependencies.as"

var t = new regressiontest.TestRunner(); // 1.

// ... 
```

在**1.**我正在尝试实例化我的回归测试类。它可以在文件**regressiontest.as**中找到，如下所示：

```
package regressiontest {
    public class TestRunner {
        public function TestRunner() {
            trace('Hello');
            // Actual Test Code Here ...
        }
    }
} 
```

因此，现在当我使用 Strg+Shift+Enter 进行 Flash 和调试电影时，我收到以下错误消息。我尝试了所有我能想到的方法，所以这里是我到目前为止所取得的成就的概述：

```
var t = new TestRunner(); 
```

**消息**：1180：调用可能未定义的方法 TestRunner。

```
var t = new regressiontest.TestRunner(); 
```

**留言**：

root.as: 1120: 未定义属性回归测试的访问。

regressiontest.as: 5001: 包'regressiontest'的名称不反映这个文件的位置。请更改此文件中的包定义名称，或移动该文件。文件夹\regressiontest.as

regressiontest.as: 5008: 定义“TestRunner”的名称不反映该文件的位置。请更改此文件中的定义名称，或重命名文件。文件夹\regressiontest.as

```
import regressiontest.TestRunner;
var t = new TestRunner(); 
```

root.as，第 19 行：1172：定义回归测试：找不到 TestRunner。

root.as，第 20 行：1180：调用可能未定义的方法 TestRunner。

最让我困惑的是，Flash 似乎以某种方式在 regressiontest.as 中获取了类定义。当我提出一个明显的错误时，例如

```
public function TestRunner() {
    shoelace('Hello');
} 
```

并使用它来实例化类的对象：

```
var t:TestRunner = new regressiontest.TestRunner(); 
```

然后我收到**消息**：

regressiontest.as: 1180: 调用可能未定义的方法 shoelace。

现在人们可能会认为实例化会导致问题。但是，当我将代码从鞋带设置为跟踪并离开实例化时，我收到以下消息：

**消息** 场景 1，层“AS”，第 1 帧：1046：找不到类型或不是编译时常量：TestRunner。

root.as: 1120: 未定义属性回归测试的访问。

regressiontest.as: 5001: 包'regressiontest'的名称不反映这个文件的位置。请更改此文件中的包定义名称，或移动该文件。文件夹\regressiontest.as

regressiontest.as: 5008: 定义“TestRunner”的名称不反映该文件的位置。请更改此文件中的定义名称，或重命名文件。文件夹\regressiontest.as

我尝试重命名包中的文件，尝试重命名包，尝试使用 import regressiontest.* 导入；等等。我错过了什么？

*   我需要将文件名设置为什么？是否需要匹配 PACKAGE NAME 或 CLASS NAME？
*   我错过了一些疯狂的骆驼案规则吗？
*   包装名称或类似的东西是否有最大长度？
*   我是否忘记正确配置闪存或 FLA 文件？
*   我错过了一些神奇的关键字吗？
*   我的脚本开头的包含或导入可能会产生副作用吗？

我可以重现这些步骤，并且可以通过 github 提供包。

提前谢谢你，来自德国海德堡的无知问候

约翰内斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:37:17.797

在我看来，`TestRunner`是类和`regressiontest`包，所以你需要导入类。

```
import regressiontest.TestRunner;
var t:TestRunner = TestRunner(); 
```

此外，您必须进行此更改。

1.  文件名必须与类完全相同，替换`regressiontest.as`为`TestRunner.as`
2.  为包创建一个文件夹并调用它`regressiontest`，放在里面`TestRunner.as`。

# python - 函数参数中的列表理解

> ID：14101980
> 
> 赞同：6
> 
> 时间：2012-12-31T13:04:48.970
> 
> 标签：python, list, list-comprehension, keyword-argument

在 Python 2.7.1 中，我试图提供一个消息列表作为第一个参数，并提供一个颜色列表作为第二个参数。如果没有提供，我希望第二个参数默认为白人列表。这是我尝试这样做的方式：

```
def multicolor_message(msgs, colors=[libtcod.white for x in len(msgs)]):
#function body 
```

libtcod.white 是我正在使用的库的一部分，绝不会导致任何问题。编译器说该变量`msgs`未定义。显然`msgs`该范围内不存在该变量，但我需要创建一个适当长度的列表并将其分配给`colors`. 最干净的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T13:06:57.423

我会这样做：

```
def multicolor_message(msgs, colors=None):
  if colors is None:
    colors=[libtcod.white for x in len(msgs)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T13:07:42.787

这在 python 中是不可能的，因为函数的默认参数是在函数定义时执行的，并且在调用函数之前，您的`msgs`变量将不可用。

从[文档](http://docs.python.org/2/reference/compound_stmts.html#function)：

> 执行函数定义时评估默认参数值。这意味着在定义函数时对表达式求值一次，并且每次调用都使用相同的“预计算”值。当默认参数是可变对象（例如列表或字典）时，这一点尤其重要：如果函数修改了对象（例如，通过将项目附加到列表中），则默认值实际上已被修改。这通常不是预期的。解决此问题的一种方法是使用 None 作为默认值，并在函数体中显式测试它，例如：

```
def whats_on_the_telly(penguin=None):
    if penguin is None:
        penguin = []
    penguin.append("property of the zoo")
    return penguin 
```

# ruby - 从链接文本中提取与 Nokogiri 的链接？

> ID：14101985
> 
> 赞同：3
> 
> 时间：2012-12-31T13:05:08.427
> 
> 标签：ruby, nokogiri

我想从网页中提取特定链接，使用 Nokogiri 通过其文本搜索它：

```
<div class="links">
   <a href='http://example.org/site/1/'>site 1</a>
   <a href='http://example.org/site/2/'>site 2</a>
   <a href='http://example.org/site/3/'>site 3</a>
</div> 
```

我想要“站点 3”的 href 并返回：

```
http://example.org/site/3/ 
```

或者我想要“站点 1”的 href 并返回：

```
http://example.org/site/1/ 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T13:14:02.537

**原来的：**

```
text = <<TEXT
<div class="links">
  <a href='http://example.org/site/1/'>site 1</a>
  <a href='http://example.org/site/2/'>site 2</a>
  <a href='http://example.org/site/3/'>site 3</a>
</div>
TEXT

link_text = "site 1"

doc = Nokogiri::HTML(text)
p doc.xpath("//a[text()='#{link_text}']/@href").to_s 
```

**更新：**

据我所知，Nokogiri 的 XPath 实现不支持正则表达式，对于基本`starts with`匹配，有一个函数调用`starts-with`，您可以像这样使用（链接以“s”开头）：

```
doc = Nokogiri::HTML(text)
array_of_hrefs = doc.xpath("//a[starts-with(text(), 's')]/@href").map(&:to_s) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-01T01:09:10.210

也许你会更喜欢 css 样式选择：

```
doc.at('a[text()="site 1"]')[:href] # exact match
doc.at('a[text()^="site 1"]')[:href] # starts with
doc.at('a[text()*="site 1"]')[:href] # match anywhere 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T13:15:10.090

```
require 'nokogiri'

text = "site 1"

doc = Nokogiri::HTML(DATA)
p doc.xpath("//div[@class='links']//a[contains(text(), '#{text}')]/@href").to_s 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-01T06:44:33.140

只是为了记录另一种方式，我们可以在 Ruby 中使用 URI 模块执行此操作：

```
require 'uri'

html = %q[
<div class="links">
    <a href='http://example.org/site/1/'>site 1</a>
    <a href='http://example.org/site/2/'>site 2</a>
    <a href='http://example.org/site/3/'>site 3</a>
</div>
]

uris = Hash[URI.extract(html).map.with_index{ |u, i| [1 + i, u] }]

=> {
    1 => "http://example.org/site/1/'",
    2 => "http://example.org/site/2/'",
    3 => "http://example.org/site/3/'"
}

uris[1]
=> "http://example.org/site/1/'"

uris[3]
=> "http://example.org/site/3/'" 
```

在[幕后 URI.extract](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html#method-c-extract)使用正则表达式，这不是在页面中查找链接的最可靠的方法，但它非常好，因为 URI 通常是一个没有空格的字符串，如果它有用的话。

# python - 使用来自 argparse 的位置参数作为函数名

> ID：14101989
> 
> 赞同：1
> 
> 时间：2012-12-31T13:05:36.737
> 
> 标签：python, argparse

我已经使用 argparse 设置了一个脚本，它为我提供了以下命名空间：

```
Namespace(action='list', input='all', target='domain') 
```

我已经制作了一些根据位置调用的函数，目前我有一个工作情况，方法是用这样的代码简介来调用它们：

```
if args.action == 'list':
    if len(sys.argv) == 2:
        parser.print_help()
        sys.exit(0)
elif args.target == 'domain':
    domain_list()
elif args.target == 'forwarding':
    forwarding_list()
elif args.target == 'transport':
    transport_list()
elif args.target == 'user':
    user_list()
else:
    all_list() 
```

我知道这可以做到，比这更好；但由于我对 Python 的了解有限，我似乎无法弄清楚这一点。

回顾：如果可能的话，我想要类似的东西（伪代码）

```
if args.action == 'add':
    target = args.target
    target_add() 
```

`target_add()`类似的东西在哪里`domain_add()`。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:28:46.623

听起来 action 可能是`list`or `add`，而`target`可能是`domain`, `forwarding`, `transport`, or `user`。`if..then..else`是的，如果您必须手动列出每个选项组合的作用，您最终会得到很多代码。

这是一种简化的方法：

*   使用 itertools.product 生成所有可能的选项组合。
*   使用白名单调度字典将选项映射到函数。键是 2 元组，例如`('domain','list')`、 或`('transport','add')`。这些值是关联的函数对象。

* * *

```
import itertools as IT

targets = 'domain forwarding transport user'.split()
actions = 'list add'.split()

dispatch = {key:globals()['%s_%s' % key] for key in IT.product(targets, actions)}

# This calls the function specified by (target, action).
# The `dict.get` method is used so that if the key is not in `dispatch`, the `all_list` function is called.
dispatch.get((args.target, args.action), all_list)() 
```

# c# - 如何验证一个字符串出现在 C# 文件中的另一个字符串之前？

> ID：14101994
> 
> 赞同：-3
> 
> 时间：2012-12-31T13:05:57.520
> 
> 标签：c#, string, file

这是我想检查的文件，我想知道这个 txt 文件中“str2”之前的湿听“str1”appaers：

***文件.txt***

```
aaa
aa
aa
aaa
a
a
aa
str1
aa
aa
a
aaa
aa
a
aaa
aaa
aa
str2
aa
a
a
aa
aaa
... 
```

我正在寻找一种可以在包含数百行的文件上使用的好的算法！ps 我还没有源代码，我还在规划阶段。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:09:31.347

查看

```
 if(str.indexOf("str1") != -1 && str.indexOf("str2") != -1 && str.indexOf("str1") < str.indexOf("str2"))
    return true; 
```

# c# - 在有多个订阅者的情况下，委托如何知道调用哪个函数

> ID：14101995
> 
> 赞同：2
> 
> 时间：2012-12-31T13:05:57.817
> 
> 标签：c#, .net, delegates

说我有一个代表

```
public delegate void StringLogging(string msg); 
```

现在类 A 使用这个委托来提供自己的实现，也`Class B`提供自己的实现。委托的调用列表`StringLogging`包含两个相同的方法`Class A`，一个用于 B 类，一个用于 B 类。委托如何知道哪个函数属于 A 类，哪个函数属于 B 类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T13:16:14.100

内部[委托](http://msdn.microsoft.com/en-us/library/ms173172%28v=vs.100%29.aspx)被实现为[`MultiCastDelegate`](http://msdn.microsoft.com/en-us/library/system.multicastdelegate.aspx).

[`Delegate.GetInvocationList()`](http://msdn.microsoft.com/en-us/library/system.multicastdelegate.getinvocationlist.aspx)返回`Delegate[]`与 main 关联的每个方法对应的返回值`Delegate`。

[`Delegate.Method`](http://msdn.microsoft.com/en-us/library/system.delegate.method.aspx)是[`MethodInfo`](http://msdn.microsoft.com/en-us/library/system.reflection.methodinfo.aspx)有[`DeclaringType`](http://msdn.microsoft.com/en-us/library/system.reflection.memberinfo.declaringtype.aspx)。这`DeclaringType`具有类是`Class A`或`Class B`其他类型的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T13:50:32.723

这在 C# 中被小心地隐藏了。但是委托构造函数有**两个**参数，一个对象和一个方法组引用。在 C++/CLI 语言中更容易看到，它没有相同的语法糖。例如，为按钮订阅 Click 事件如下所示：

```
 this->button1->Click += gcnew System::EventHandler(this, &Form1::button1_Click); 
```

请注意第一个参数，即实现 button1_Click 方法的对象的对象引用。委托类型对该对象引用没有做任何特殊的事情，它只是存储它。基础字段是 Delegate.Target。稍后，当调用委托时，它会用于生成实例方法所需的同样隐藏的*this引用。*

C# 语言不允许相同的语法，编译器从您在构造函数中传递的方法组引用*推断*对象引用。这可以防止事故。请注意这种语法糖的价格，C# 程序员通常没有意识到订阅事件会保留对目标对象的引用。导致难以诊断的泄漏是一种常见的事故。

C++/CLI 中的显式语法允许 C# 中完全缺少的功能，它支持[*未绑定的委托*](http://msdn.microsoft.com/en-us/library/ms177195%28v=vs.100%29.aspx)。它不是特别有用，但它确实模拟了 C++ 中方法指针的工作方式。C++/CLI 没有采用 C# 糖的可能原因。

# java - 输入输出 API

> ID：14101999
> 
> 赞同：0
> 
> 时间：2012-12-31T13:06:17.127
> 
> 标签：java

我需要一个程序的帮助，我必须不断地从用户那里获取字符串输入，直到用户输入字符串“end”。然后我必须打印用户输入的所有输入，直到“结束”。我尝试使用 for 循环，但我无法得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:08:51.860

使用[java.util.Scanner](http://www.java-tips.org/java-se-tips/java.util/scanning-text-with-java.util.scanner-3.html)读取并在 while 循环的条件下不断检查用户输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T13:37:32.450

这是一个使用 I/O API 的示例：

```
try{
    BufferedReader br = 
                  new BufferedReader(new InputStreamReader(System.in));

    ArrayList<String> inputs = new ArrayList<String>();
    String input;

    while((input=br.readLine())!=null){
        if(input.equalsIgnoreCase("end")) {
            break;
        }
        inputs.add(input);
    }
    for(String str: inputs) {
        System.out.println(str);
    }

}catch(IOException io){
    io.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T13:14:12.457

尝试

```
List<String> list = new ArrayList<>();
    Scanner sc = new Scanner(System.in);
    while(sc.hasNext()) {
        String s = sc.nextLine();
        if (s.equals("end")) {
            break;
        }
        list.add(s);
    }
    for(String s : list) {
        System.out.println(s);
    } 
```

或者

```
StringBuilder sb = new StringBuilder();
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
for(;;) {
    String s = br.readLine();
    if (s.equals("end")) {
        break;
    }
    sb.append(s).append("\n");
}
System.out.println(sb); 
```