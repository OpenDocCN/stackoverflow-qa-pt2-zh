# StackOverflow 问答 13920000-13920999

# objective-c - 用于 Voice Over 的 UITextView 设置以按段落选择/阅读

> ID：13920012
> 
> 赞同：1
> 
> 时间：2012-12-17T18:35:33.710
> 
> 标签：objective-c, voiceover, uiaccessibility

我有一个 UITextView 设置了一个更新日志，我试图让它访问。我希望这样，启用旁白，并选择并阅读整个段落。

目前，我可以设置accessibilityTrait 并在一个巨大的块中大声朗读整个视图，或者不设置accessibilityTrait 集并且一次只选择一行。有没有办法将 VoiceOver 的段落阻止在一起？

这是我目前正在使用的代码：

```
NSString *string = someMultiparagraphString;
NSLog(@"Log is: %@", string);

CGFloat height = [string sizeWithFont:normalFont 
                    constrainedToSize:CGSizeMake(280.0f, CGFLOAT_MAX) 
                        lineBreakMode:UILineBreakModeTailTruncation].height;

CGRect logRect = CGRectMake(10.0f, 10.0f, rect.size.width - 40.0f, height);

UITextView *logView = [[UITextView alloc] initWithFrame:logRect];
logView.font = normalFont;
logView.text = string;
logView.editable = NO;
//logView.accessibilityTraits = UIAccessibilityTraitUpdatesFrequently;
[self addSubview:logView];
[logView release]; 
```

# c# - String.Length 奇怪的行为

> ID：13920025
> 
> 赞同：-3
> 
> 时间：2012-12-17T18:36:03.903
> 
> 标签：c#, .net

我有 5000+ 个字符的示例字符串。当我打电话时`exampleString.Length`，我得到（例如）39764 个字符。当我将字符串复制到 Notepad++ 中时，它显示 40523 个字符。

此外，当我调用`exampleString.Remove(5000)`并将结果字符串复制到 Notepad++ 中时，它显示 5094 个字符。

我想这是换行符的东西，但不知道如何在长度中包含换行符？

* * *

## 更新

这不是 Notepad++ 相关的问题。

我需要将字符串发送到允许最多 5000 个字符的服务方法。当我打电话`exampleString.Remove(5000)`并将其发送到服务时，我收到响应错误“只允许 5000 个字符”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:39:26.270

我猜记事本++会显示文件的大小，而不是字符数。并且一旦许多编码使用每个字符超过一个字节 - 你就拥有了你所拥有的。

# php - PHP: How to kill off any pending curl_multi requests in RollingCurl library

> ID：13920026
> 
> 赞同：2
> 
> 时间：2012-12-17T18:36:06.290
> 
> 标签：php, curl, curl-multi

I am using a slightly modified version of [http://code.google.com/p/rolling-curl/](http://code.google.com/p/rolling-curl/)

My question is similar to this: [http://code.google.com/p/rolling-curl/issues/detail?id=25](http://code.google.com/p/rolling-curl/issues/detail?id=25)

Basically, I am doing a bunch of requests, once I find the one I want, all other pending requests should be terminated from the queue and any running CURL handles should be removed from memory, even if they aren't done downloading yet.

Code here:

```
<?php
/*
Authored by Josh Fraser (www.joshfraser.com)
Released under Apache License 2.0

Maintained by Alexander Makarov, http://rmcreative.ru/

$Id$
*/

/**
 * Class that represent a single curl request
 */
class RollingCurlRequest {
    public $url = false;
    public $method = 'GET';
    public $post_data = null;
    public $headers = null;
    public $options = null;
    public $extras = null;

    /**
     * @param string $url
     * @param string $method
     * @param  $post_data
     * @param  $headers
     * @param  $options
     * @return void
     */
    function __construct($url, $method = "GET", $post_data = null, $headers = null, $options = null, $extras = null) {
        $this->url = $url;
        $this->method = $method;
        $this->post_data = $post_data;
        $this->headers = $headers;
        $this->options = $options;
        $this->extras = $extras;
    }

    /**
     * @return void
     */
    public function __destruct() {
        unset($this->url, $this->method, $this->post_data, $this->headers, $this->options);
    }
}

/**
 * RollingCurl custom exception
 */
class RollingCurlException extends Exception {
}

/**
 * Class that holds a rolling queue of curl requests.
 *
 * @throws RollingCurlException
 */
class RollingCurl {
    /**
     * @var int
     *
     * Window size is the max number of simultaneous connections allowed.
     *
     * REMEMBER TO RESPECT THE SERVERS:
     * Sending too many requests at one time can easily be perceived
     * as a DOS attack. Increase this window_size if you are making requests
     * to multiple servers or have permission from the receving server admins.
     */
    private $window_size = 5;

    /**
     * @var float
     *
     * Timeout is the timeout used for curl_multi_select.
     */
    private $timeout = 10;

    /**
     * @var string|array
     *
     * Callback function to be applied to each result.
     */
    private $callback;

    /**
     * @var array
     *
     * Set your base options that you want to be used with EVERY request.
     */
    protected $options = array(
        CURLOPT_SSL_VERIFYPEER => 0,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_CONNECTTIMEOUT => 30,
        CURLOPT_TIMEOUT => 30,
        CURLOPT_ENCODING => "gzip"
    );

    /**
     * @var array
     */
    private $headers = array();

    /**
     * @var Request[]
     *
     * The request queue
     */
    private $requests = array();

    /**
     * @var RequestMap[]
     *
     * Maps handles to request indexes
     */
    public $requestMap = array();

    /**
     * @param  $callback
     * Callback function to be applied to each result.
     *
     * Can be specified as 'my_callback_function'
     * or array($object, 'my_callback_method').
     *
     * Function should take three parameters: $response, $info, $request.
     * $response is response body, $info is additional curl info.
     * $request is the original request
     *
     * @return void
     */
    function __construct($callback = null) {
        $this->callback = $callback;
    }

    /**
     * @param string $name
     * @return mixed
     */
    public function __get($name) {
        return (isset($this->{$name})) ? $this->{$name} : null;
    }

    /**
     * @param string $name
     * @param mixed $value
     * @return bool
     */
    public function __set($name, $value) {
        // append the base options & headers
        if ($name == "options" || $name == "headers") {
            $this->{$name} = $value + $this->{$name};
        } else {
            $this->{$name} = $value;
        }
        return true;
    }

    /**
     * Add a request to the request queue
     *
     * @param Request $request
     * @return bool
     */
    public function add($request) {
        $this->requests[] = $request;
        return true;
    }

    /**
     * Create new Request and add it to the request queue
     *
     * @param string $url
     * @param string $method
     * @param  $post_data
     * @param  $headers
     * @param  $options
     * @return bool
     */
    public function request($url, $method = "GET", $post_data = null, $headers = null, $options = null) {
        $this->requests[] = new RollingCurlRequest($url, $method, $post_data, $headers, $options);
        return true;
    }

    /**
     * Perform GET request
     *
     * @param string $url
     * @param  $headers
     * @param  $options
     * @return bool
     */
    public function get($url, $headers = null, $options = null) {
        return $this->request($url, "GET", null, $headers, $options);
    }

    /**
     * Perform POST request
     *
     * @param string $url
     * @param  $post_data
     * @param  $headers
     * @param  $options
     * @return bool
     */
    public function post($url, $post_data = null, $headers = null, $options = null) {
        return $this->request($url, "POST", $post_data, $headers, $options);
    }

    /**
     * Execute processing
     *
     * @param int $window_size Max number of simultaneous connections
     * @return string|bool
     */
    public function execute($window_size = null) {
        // rolling curl window must always be greater than 1
        if (sizeof($this->requests) == 1) {
            return $this->single_curl();
        } else {
            // start the rolling curl. window_size is the max number of simultaneous connections
            return $this->rolling_curl($window_size);
        }
    }

    /**
     * Performs a single curl request
     *
     * @access private
     * @return string
     */
    private function single_curl() {
        $ch = curl_init();
        $request = array_shift($this->requests);
        $options = $this->get_options($request);
        curl_setopt_array($ch, $options);
        $output = curl_exec($ch);
        $info = curl_getinfo($ch);

        // it's not neccesary to set a callback for one-off requests
        if ($this->callback) {
            $callback = $this->callback;
            if (is_callable($this->callback)) {
                call_user_func($callback, $output, $info, $request);
            }
        }
        else
            return $output;
        return true;
    }

    /**
     * Performs multiple curl requests
     *
     * @access private
     * @throws RollingCurlException
     * @param int $window_size Max number of simultaneous connections
     * @return bool
     */
    private function rolling_curl($window_size = null) {
        if ($window_size)
            $this->window_size = $window_size;

        // make sure the rolling window isn't greater than the # of urls
        if (sizeof($this->requests) < $this->window_size)
            $this->window_size = sizeof($this->requests);

        if ($this->window_size < 2) {
            throw new RollingCurlException("Window size must be greater than 1");
        }

        $master = curl_multi_init();

        // start the first batch of requests
        for ($i = 0; $i < $this->window_size; $i++) {
            $ch = curl_init();

            $options = $this->get_options($this->requests[$i]);

            curl_setopt_array($ch, $options);
            curl_multi_add_handle($master, $ch);

            // Add to our request Maps
            $key = (string) $ch;
            $this->requestMap[$key] = $i;
        }

        do {
            while (($execrun = curl_multi_exec($master, $running)) == CURLM_CALL_MULTI_PERFORM) ;
            if ($execrun != CURLM_OK)
                break;
            // a request was just completed -- find out which one
            while ($done = curl_multi_info_read($master)) {

                // get the info and content returned on the request
                $info = curl_getinfo($done['handle']);
                $output = curl_multi_getcontent($done['handle']);

                // send the return values to the callback function.
                $callback = $this->callback;
                if (is_callable($callback)) {
                    $key = (string) $done['handle'];
                    $request = $this->requests[$this->requestMap[$key]];
                    unset($this->requestMap[$key]);
                    call_user_func($callback, $output, $info, $request);
                }

                // start a new request (it's important to do this before removing the old one)
                if ($i < sizeof($this->requests) && isset($this->requests[$i]) && $i < count($this->requests)) {
                    $ch = curl_init();
                    $options = $this->get_options($this->requests[$i]);
                    curl_setopt_array($ch, $options);
                    curl_multi_add_handle($master, $ch);

                    // Add to our request Maps
                    $key = (string) $ch;
                    $this->requestMap[$key] = $i;
                    $i++;
                }

                // remove the curl handle that just completed
                curl_multi_remove_handle($master, $done['handle']);

            }

            // Block for data in / output; error handling is done by curl_multi_exec
            if ($running)
                curl_multi_select($master, $this->timeout);

        } while ($running);
        curl_multi_close($master);
        return true;
    }

    /**
     * Helper function to set up a new request by setting the appropriate options
     *
     * @access private
     * @param Request $request
     * @return array
     */
    private function get_options($request) {
        // options for this entire curl object
        $options = $this->__get('options');
        if (ini_get('safe_mode') == 'Off' || !ini_get('safe_mode')) {
            $options[CURLOPT_FOLLOWLOCATION] = 1;
            $options[CURLOPT_MAXREDIRS] = 5;
        }
        $headers = $this->__get('headers');

        // append custom options for this specific request
        if ($request->options) {
            $options = $request->options + $options;
        }

        // set the request URL
        $options[CURLOPT_URL] = $request->url;

        // posting data w/ this request?
        if ($request->post_data) {
            $options[CURLOPT_POST] = 1;
            $options[CURLOPT_POSTFIELDS] = $request->post_data;
        }
        if ($headers) {
            $options[CURLOPT_HEADER] = 0;
            $options[CURLOPT_HTTPHEADER] = $headers;
        }

        return $options;
    }

    /**
     * @return void
     */
    public function __destruct() {
        unset($this->window_size, $this->callback, $this->options, $this->headers, $this->requests);
    }
} 
```

Edit: On second thought, there should be 2 functions:

1) Delete any requests in the queue and unset any curl resources from memory without finishing.

2) Delete any requests in queue and while until all curl resources are finished.

I will probably contribute the functions/code/suggestions I get here into the project with credit to author of the selected answer.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T17:37:18.617

Well, this is a really simple, no-fancy patch.

I created a new function called `cancelRequests()` that accept a bool parameter, to indicate if it should cancel ALL requests (including the one being processed) or only remove the content of the `requests` array (in that case, it will finish the current downloading requests)

Here is an example, using an altered version of the included `example.php` file, to show this working:

```
<?php

require("RollingCurl.php");

function create_request_callback($rc) {
    return function ($response, $info, $request) use ($rc) {
        // This will delete all the other requests
        $rc->cancelRequests();
        print_r($info);
        print_r($request);
        echo "<hr>";
    };
}

// one of the google ones will download right away, the other 2 would take some time. The first one to donwload will cancel the rest
$urls = array("http://www.google.com",
              "http://download.thinkbroadband.com/1GB.zip",
              "http://download.thinkbroadband.com/512MB.zip",
              "http://www.google.co.uk"
              );

$rc = new RollingCurl();
$rc->callback = create_request_callback($rc);

$rc->window_size = 20;
foreach ($urls as $url) {
    $request = new RollingCurlRequest($url);
    $rc->add($request);
}
$rc->execute(); 
```

As you can see, is necessary to create the `RollingCurl` object and after you should pass the callback. The reason is to be able to reference the object instance inside the callback.

I used the `RollingCurl.php` file from r20 version of the svn repository.

Here is the diff:

```
81c81
<     private $callback;
---
>     public $callback;
100a101,114
>      * @var Master[]
>      *
>      * The master handler
>      */
>     public $master = null;
> 
>     /**
>      * @var RequesList[]
>      *
>      * The request list of handles
>      */
>     public $requestList = array();
> 
>     /**
165a180,195
>      * Cancel all requests from the queue
>      *
>      * @param bool $all Delete ALL requests, including the ones currently executing
>      * @return bool
>      */ 
>     public function cancelRequests($all = true) {
>         $this->requests = array();
>         if($all) {
>             foreach($this->requestList as $handler) {
>                 curl_multi_remove_handle($this->master, $handler);
>             }
>         }
>         return true;
>     }
> 
>     /**
267c297
<         $master = curl_multi_init();
---
>         $this->master = curl_multi_init();
276c306,307
<             curl_multi_add_handle($master, $ch);
---
>             curl_multi_add_handle($this->master, $ch);
>             array_push($this->requestList, $ch);
284c315
<             while (($execrun = curl_multi_exec($master, $running)) == CURLM_CALL_MULTI_PERFORM) ;
---
>             while (($execrun = curl_multi_exec($this->master, $running)) == CURLM_CALL_MULTI_PERFORM) ;
288c319
<             while ($done = curl_multi_info_read($master)) {
---
>             while ($done = curl_multi_info_read($this->master)) {
308c339,340
<                     curl_multi_add_handle($master, $ch);
---
>                     curl_multi_add_handle($this->master, $ch);
>                     array_push($this->requestList, $ch);
317c349
<                 curl_multi_remove_handle($master, $done['handle']);
---
>                 curl_multi_remove_handle($this->master, $done['handle']);
323c355
<                 curl_multi_select($master, $this->timeout);
---
>                 curl_multi_select($this->master, $this->timeout);
326c358
<         curl_multi_close($master);
---
>         curl_multi_close($this->master); 
```

# ios - 使用默认的邮件/发送按钮

> ID：13920027
> 
> 赞同：0
> 
> 时间：2012-12-17T18:36:07.687
> 
> 标签：ios, uibutton, rounded-corners

我正在搜索默认值`mail name button`或`send button`如果我写短信。
是否可以使用它们，以编程方式调用它们？
还是我只能从 UIButtonTypeCustom 构建它们？
我只是想要一个与 UIButtonTypeRoundedRect 完全一样的按钮，但总圆角。 ![在此处输入图像描述](../Images/a3e68e8ec7b481ba76860cecc022c006.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:43:30.303

如果您添加 QuartzCore 框架，您可以调用..

```
MyButton.layer.cornerRadius = CGRectGetHeight(MyButton.frame) * 0.5; 
```

# xml - 相互检查 2 个不同 xml 文档的值

> ID：13920030
> 
> 赞同：1
> 
> 时间：2012-12-17T18:36:16.483
> 
> 标签：xml, xslt, nextsibling

我正在使用 2 个 XML 文档，如果变量匹配，则尝试从一个文档中获取一个值到另一个文档中。第一个 XML 文档是一个转换后的电子表格，格式如下：

```
<Doc1>
    <row>
      <cell>VA15</cell>
      <cell>wr23</cell>
    </row>
    <row>
      <cell>VA45</cell>
      <cell>wr27</cell>
    </row>        <row>
      <cell>VA78</cell>
      <cell>wr24</cell>
    </row>
</Doc1> 
```

第二个 XML 文档较长，其中有一个`id`元素与电子表格的一部分相匹配：

```
<Doc2>
 <p> text text text
  <id>wr23</id>
 </p>
</Doc2> 
```

我正在尝试使用我的 xslt 转换来测试该`id`元素是否与`cell`doc1 中的 a 的值匹配，它会拉取前面的值`cell`。在这种情况下，我希望 xslt 转换输出“VA15”。我已经尝试了以下代码的各种排列但没有成功，有人有什么想法吗？

```
<xsl:for-each select="document('Doc1.xml')//row">
   <xsl:if test="/cell=//id'">
     <xsl:value-of select="/preceding-sibling::cell"/>
   </xsl:if>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:24:15.320

基于 Dimitre 的回答，您可以使用`key()`（用于快速查找）和`call-template`：

**id-lookup.xsl**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:param name="id-lookup-doc">Doc1.xml</xsl:param>
<xsl:variable name="id-to-value-doc" select="document($id-lookup-doc)"/>

<xsl:key name="value-for-id"
    match="/Doc1/row/cell[1]"
    use="../cell[2]" />

<xsl:template name="value-for-id">
    <xsl:param name="id"/>
    <!-- for-each is just to change the context
         to limit results from key() to the lookup document -->
    <xsl:for-each select="$id-to-value-doc">
        <xsl:value-of select="key('value-for-id', $id)"/>
    </xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

**用值替换 id.xsl**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:import href="id-lookup.xsl"/>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="id">
    <val>
        <xsl:apply-templates select="@*"/>
        <xsl:call-template name="value-for-id">
            <xsl:with-param name="id" select="text()"/>
        </xsl:call-template>
    </val>
</xsl:template>

</xsl:stylesheet> 
```

当您通过 xslt 处理器运行它时，您将获得所有`<id>`元素替换为的文档`<val>`和相应的值。

使用`xsltproc`，您将像这样运行：

```
xsltproc id-with-value.xsl Doc2.xml myOtherDoc.xml 
```

您甚至可以使用 xslt 参数更改查找文档：

```
xsltproc --stringparam id-lookup-doc MyOtherSetOfIdsAndValues.xml id-with-value.xsl Doc2.xml 
```

无论您使用什么 XSLT 处理器，都可以通过某种方式指定模板参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:56:46.477

> ```
> <xsl:for-each select="document('Doc1.xml')//row">
>    <xsl:if test="/cell=//id'">
>      <xsl:value-of select="/preceding-sibling::cell"/>
>    </xsl:if>
> </xsl:for-each> 
> ```

若干问题：

1.  这两个文档都没有一个名为的顶级元素`cell`——而不是绝对表达式，您必须使用相对表达式：

......

```
cell = //id 
```

和

```
 preceding-sibling::cell 
```

因为文档节点没有兄弟姐妹。

.2\. 具有元素 named 的文档`cell`没有元素 named `id`。当 XPath 表达式引用多个文档时，必须显式引用除一个之外的所有文档。进行所有更正后，您的代码将变成这样：

```
 <xsl:variable name="vthisDoc" select="/"/>

  <xsl:for-each select="document('Doc1.xml')//row">
     <xsl:if test="cell=$vthisDoc//id'">
       <xsl:value-of select="preceding-sibling::cell"/>
     </xsl:if>
  </xsl:for-each> 
```

**最后**，所有这些都可以简写为：

```
<xsl:copy-of select=
 "document('Doc1.xml')//row[cell=$vthisDoc//id]/preceding-sibling::cell[1]/text()"/> 
```

# visual-studio - 如何在运行时获取正确的数据库实体？

> ID：13920031
> 
> 赞同：3
> 
> 时间：2012-12-17T18:36:19.723
> 
> 标签：visual-studio, entity-framework

在我的方法中：

```
public void DeleteSingleMrTypeByVersionIdAndId<T>(
    int version_id, int child_obj_id, CIHEntities _dbContext)
        where T : MrBase 
```

我想从数据库实体中获取行。所以，我有这个：

```
IQueryable<T> old_items = _dbContext.???
            .Where(r => r.MrVersionEntityAssoc.Id == version_id)
            .Where(r => r.Id == child_obj_id)
            .Select(r => r); 
```

但是如何编写 LINQ 语句以便它`T`知道从哪里获取行呢？

当然，仅仅将其称为`T`是行不通的。

```
IQueryable<T> old_items = _dbContext.T
            .Where(r => r.MrVersionEntityAssoc.Id == version_id)
            .Where(r => r.Id == child_obj_id)
            .Select(r => r); 
```

我们正在使用VS2012。

谢谢埃里克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:40:46.927

您正在寻找的方法是`Set()`：

```
IQueryable<T> old_items = _dbContext.Set<T>()
    .Where(r => r.MrVersionEntityAssoc.Id == version_id)
    .Where(r => r.Id == child_obj_id)
    .Select(r => r); 
```

* * *

**编辑：**以上适用于使用`DbContext`. 对于`ObjectContext`，对应的方法是`CreateObjectSet<T>()`。

```
IQueryable<T> old_items = _dbContext.CreateObjectSet<T>()
    .Where(r => r.MrVersionEntityAssoc.Id == version_id)
    .Where(r => r.Id == child_obj_id)
    .Select(r => r); 
```

# groovy - groovy 采取如何重新实现

> ID：13920036
> 
> 赞同：2
> 
> 时间：2012-12-17T18:36:33.593
> 
> 标签：groovy, take

take 和 drop 方法被添加到 groovy v 1.8.1 中的列表对象中，工作方式如下：

```
def list = ['Simple', 'list', 'with', 5, 'items']   
assert list.take(2) == ['Simple', 'list'] 
```

我只有 v 1.8.0 可用。如何使用 Groovy v1.8.0 重新实现我自己的 list.take(2) 版本？

是否可以执行以下操作：

```
def list = ['Simple', 'list', 'with', 5, 'items']  
def limit = 2 
assert list['0..'+limit] == ['Simple', 'list'] 
```

当我尝试这个时，我得到了一个例外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:44:41.843

你可以像 groovy 那样做

[https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L6498](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethods.java#L6498)

```
public static <T> List<T> take(List<T> self, int num) {
    if (self.isEmpty() || num <= 0) {
        return createSimilarList(self, 0);
    }
    if (self.size() <= num) {
        List<T> ret = createSimilarList(self, self.size());
        ret.addAll(self);
        return ret;
    }
    List<T> ret = createSimilarList(self, num);
    ret.addAll(self.subList(0, num));
    return ret;
} 
```

该方法`createSimilarList`可以在这里找到

[https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethodsSupport.java#L162](https://github.com/groovy/groovy-core/blob/master/src/main/org/codehaus/groovy/runtime/DefaultGroovyMethodsSupport.java#L162)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:45:37.240

切片可能实现相同的目标：

```
def list = ['Simple', 'list', 'with', 5, 'items']   
assert list[0..1] == ['Simple', 'list'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:39:03.660

与 GargantuChet 的回答相同，您可以对其进行切片，但使用专有范围：

```
List.metaClass.take { n ->
    def len = [n,delegate.size()].min()
    delegate[0..<len]
}

assert [1,2,3,4].take(2) == [1,2]
assert [1,2].take(2) == [1,2]
assert [1].take(2) == [1]
assert [].take(2) == [] 
```

# java - 导入 javax.servelt 无法解析

> ID：13920038
> 
> 赞同：-2
> 
> 时间：2012-12-17T18:36:45.250
> 
> 标签：java

在这里得到错误说`The import javax.servelt cannot be resolved`

![在此处输入图像描述](../Images/44d4fb6a0b268c8ede478b91fa198071.png)

我在这里为我的项目设置了目标运行时。

![在此处输入图像描述](../Images/18f4609a2629bd6f6c57beef7c7bbf8b.png)

把我的头发拉过来！我已经堆栈溢出这个错误一段时间了，每个人都一直说你需要设置目标运行时，但由于某种原因，它并没有为我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:37:43.013

因为这：

> 导入 javax.servelt 无法解析

不存在

你要这个`javax.servlet`

*注意 serv* let* * not serv* *elt* *的拼写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:37:48.343

它实际上是导入 javax.servlet

# c++ - 使用 shared_ptr 的抽象基类子级的 C++ == 运算符

> ID：13920040
> 
> 赞同：1
> 
> 时间：2012-12-17T18:36:54.123
> 
> 标签：c++, dynamic, shared-ptr

我得到了一个带有纯虚方法的抽象基类“Parent”和一个实现此方法的子类“Child”和一个成员“value”。我将子类的对象实例化为 shared_ptr 作为动态绑定的一种方式。我在这里使用 shared_ptr 而不是引用，因为我将这些对象存储在 std::vector 中。

现在我想比较源代码底部定义的两个对象“someObject”和“anotherObject”。因此，我已经覆盖了相应 Child 类中的 == 运算符。然而，只有 shared_ptr 的 == 运算符被调用。我可以对背后的动态绑定对象进行比较吗？

```
/*
* Parent.h
*/
class Parent{
public:
    virtual ~Parent(){};
    virtual void someFunction() = 0;
};

/*
* Child.h
*/
class Child : public Base{
private:
    short value;

public:
    Child(short value);
    virtual ~Child();
    bool operator==(const Child &other) const;
    void someFunction();
};

/*
* Child.cpp
*/
#include "Child.h"

Child::Child(short value):value(value){}
Child::~Child() {}
void Child::someFunction(){...}

bool Child::operator==(const Child &other) const {
  if(this->value==other.value){
      return true;
  }
  return false;
}

/*
* Some Method
*/
std::shared_ptr<Parent> someObject(new Child(3));
std::shared_ptr<Parent> anotherObject(new Child(4));
//!!!calls == operator for shared_ptr, but not for Child
if(someObject==anotherObject){
//do sth
} 
```

我很感激这里的任何输入！谢谢你。

最好的，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:42:07.240

当静态已知类型是`Parent`（并且确实是）时，您需要`operator==`为`Parent`.

有一个 virtual 有问题`operator==`，但假设你有一些`operator==`，无论是否虚拟，在 class `Parent`，然后做

```
std::shared_ptr<Parent> someObject(new Child(3));
std::shared_ptr<Parent> anotherObject(new Child(4));

//calls == operator for Parent
if( *someObject == *anotherObject){
//do sth
} 
```

正如您发现的那样，如果没有取消引用`*`s （或其他等价物），您只会比较`shared_ptr`实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:50:33.853

正如[Alf 建议](https://stackoverflow.com/a/13920121/5987)的那样，您需要更改`if`语句以比较对象本身而不是指针。

此外，如果存在需要特殊处理以确定它们是否相等的子类型，则`operator==`需要遵循虚函数来进行实际比较。

```
bool Parent::operator==(const Parent& other) const
{
    return equals(other);
}

bool Child::equals(const Parent& other) const
{
    Child * otherChild = dynamic_cast<Child*>(&other);
    if (otherChild != NULL)
        // compare child to child
    else
        // compare child to other type
} 
```

# php - 使用json/ajax时如何调试数据

> ID：13920043
> 
> 赞同：5
> 
> 时间：2012-12-17T18:37:00.540
> 
> 标签：php, ajax, json

我创建了一个 php 页面，显示我的数据库中的一些记录。
我还有一个按钮，它执行一些 ajax 来更新记录，然后在同一页面上显示新的/更新的数据集。我的 ajax 调用有问题，我想要一些关于如何排除故障的提示。我注意到，由于我的标头已明确设置为 json 内容，因此我不能只从控制器执行 var_dump 之类的操作，以便在将数据发送到视图之前查看数据。不幸的是，出于某种原因，我在 ajax 方法中的 console.log 调用也不适合我。我不知道为什么。

但我想知道是否有人可以告诉我调试代码的其他方法。我知道我可以将 json 数据类型更改为 html / text，然后删除我的控制器中设置标题 / 调用 json_encode 的所有代码......但以防万一有更好的方法，我想我会问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:39:15.930

您可以在 Chrome 中使用开发人员控制台，单击网络选项卡，然后在底部您可以将类型限制为“XHR”，然后您可以尝试发出 AJAX 请求，您应该会看到有关它的所有信息，包括响应等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:43:30.917

除了[JSONView 之类的扩展外，Chrome 还有一些很棒的工具（如另一个答案）](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc)

我编写了一个[简单的工具来帮助调试 Web 服务](http://protonfish.com/ajax_tool.html)，而不管您的应用程序如何调用它。将该页面以 HTML 格式保存到本地开发站点，输入 Web 服务的 URL，选择 HTTP 方法并单击“发送请求”按钮。希望它能给你你所需要的。

# groovy - 删除连续多次重复的数字

> ID：13920045
> 
> 赞同：1
> 
> 时间：2012-12-17T18:37:07.897
> 
> 标签：groovy

我有收藏

```
def list = [4,1,1,1,3,5,1,1] 
```

我需要删除连续重复三次的数字。结果我必须得到一个[4,3,5,1,1]。如何在 groovy 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:20:35.397

This can be done by copying the list while ensuring the two previous elements are not the same as the one to be copied. If they are, drop the two previous elements, otherwise copy as normal.

This can be implemented with [`inject`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#inject%28U,%20groovy.lang.Closure%29) like this:

```
def list = [4,1,1,1,3,5,1,1]
def result = list.drop(2).inject(list.take(2)) { result, element -> 
    def prefixSize = result.size() - 2
    if ([element] * 2 == result.drop(prefixSize)) { 
        result.take(prefixSize)
    } else {
        result + element
    }
}
assert result == [4,3,5,1,1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:31:45.657

另一种选择是使用[运行长度编码](http://en.wikipedia.org/wiki/Run-length_encoding)

首先让我们定义一个类来保存我们的对象以及它连续出现的次数：

```
class RleUnit {
  def object
  int runLength

  RleUnit( object ) {
    this( object, 1 )
  }

  RleUnit( object, int runLength ) {
    this.object = object
    this.runLength = runLength
  }

  RleUnit inc() {
    new RleUnit( object, runLength + 1 )
  }

  String toString() { "$object($runLength)" }
} 
```

然后我们可以定义一个将 List 编码为`RleUnit`对象 List 的方法：

```
List<RleUnit> rleEncode( List list ) {
  list.inject( [] ) { r, v ->
    if( r && r[ -1 ].object == v ) {
      r.take( r.size() - 1 ) << r[ -1 ].inc()
    }
    else {
      r << new RleUnit( v )
    }
  }
} 
```

还有一个方法，它接受一个`RleUnit`对象列表，并将其解包回原始列表：

```
List rleDecode( List<RleUnit> rle ) {
  rle.inject( [] ) { r, v ->
    r.addAll( [ v.object ] * v.runLength )
    r
  }
} 
```

然后我们可以对原始列表进行编码：

```
def list = [ 4, 1, 1, 1, 3, 5, 1, 1 ]
rle = rleEncode( list ) 
```

并使用 Groovy 的 find 方法过滤这个 RleUnit 列表：

```
// remove all elements with a runLength of 3
noThrees = rle.findAll { it.runLength != 3 }
unpackNoThrees = rleDecode( noThrees )
assert unpackNoThrees == [ 4, 3, 5, 1, 1 ]

// remove all elements with a runLength of less than 3
threeOrMore = rle.findAll { it.runLength >= 3 }
unpackThreeOrMore = rleDecode( threeOrMore )
assert unpackThreeOrMore == [ 1, 1, 1 ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:39:01.367

您可以计算接下来三个元素中的唯一值大小，并在它们为 1 时删除它们：

```
def list = [4,1,1,1,3,5,1,1]
assert removeTriplets(list) == [4,3,5,1,1]

def removeTriplets(list) {
  listCopy = [] + list
  (list.size()-3).times { index ->
    uniques = list[index..(index+2)].unique false
    if (uniques.size() == 1) 
      listCopy = listCopy[0..(index-1)] + listCopy[(index+3)..-1]
  }
  listCopy
} 
```

# html - 为什么我的 h 标签都没有出现在浏览器上

> ID：13920046
> 
> 赞同：-4
> 
> 时间：2012-12-17T18:37:18.680
> 
> 标签：html, header

问题，为什么我的 h 标签（h1、h2、h3）都没有出现在某些浏览器上，例如：internet explorer。他们出现在 Google chrome、firefox 和 safari 中很好？？？ [http://mcj.site40.net](http://mcj.site40.net)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:40:58.423

您缺少标题，因为您使用的是需要画布的**[Cufon](http://cufon.shoqolate.com/generate/)**，并且对于不支持它或有问题的浏览器没有后备机制（IE 等）

**编辑：**`@font-face`结合使用来自 FontSquirrel 的字体，您**[将](http://www.fontsquirrel.com/)**可以安全地在大多数现代浏览器的网络上使用自定义字体。如果您想使用自己的字体，它甚至还有一个**[@font-face 生成器。](http://www.fontsquirrel.com/fontface/generator)**但是，如果您想将生成器与您自己的字体一起使用，请确保您在法律上被允许使用这些字体。

# java - 这段java代码有什么问题？

> ID：13920047
> 
> 赞同：0
> 
> 时间：2012-12-17T18:37:21.287
> 
> 标签：java

只是看着过去的试卷，偶然发现了以下对我来说没有多大意义的问题：

以下代码旨在以适当的方式问候用户：

```
public static void main( String[] args ) {
    System.out.println("Enter a name");
    String name = EasyIn.getString();
    if (name == "" ) 
        System.out.println("You must input a name");
    else 
        System.out.println("Hello, " + name);
} 
```

问题询问为什么程序可能无法按照程序员的意图进行。目前缺少笔记本电脑（洒了饮料！）我无法使用不同的输入等测试代码。据我所知，唯一的问题是它不会向用户询问另一个如果它是空白的，则输入名称，并终止程序。我会用这个作为答案，但稍后会直接在问题中提出，这让我认为这不是他们正在寻找的答案。代码还有其他问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:39:00.487

另一个`String.equals`问题，替换：

```
if (name == "" ) 
```

和

```
if (name.equals("")) 
```

运算符比较`==`对象引用，您需要使用`String.equals`比较`String`内容。或者，您可以使用：

```
if (name.IsEmpty()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:38:48.143

改变：

```
if (name == "" ) 
```

到：

```
if (name.equals("")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:38:57.623

它使用`== ""`而不是`.equals("")`，或者更好的是，`.isEmpty()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T18:39:01.617

使用`String#equals()`, not`==`来检查字符串是否相等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T18:39:01.657

唯一的问题是`String comparison`使用`==`运算符。那不会给出预期的结果。`==`运算符比较`String Reference`值，而不是内容。

`equals`如果目的是比较字符串，则应始终使用方法进行字符串比较`contents`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-17T18:39:02.807

您应该使用 equals() 方法检查字符串是否相等。`==`字符串情况下的运算符只检查两个字符串是否引用同一个字符串对象

```
 if (name == "" )

should be

 if (name.equals("") ) 
```

或者您也可以使用[**String.isEmpty()**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#isEmpty%28%29)检查字符串是否为空

```
 if (name.isEmpty()) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T18:39:29.830

它将字符串与`==`而不是进行比较`.equals()`。

`==`比较对象引用。它不匹配两个字符串的内容。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-17T18:44:39.757

问题是，你不能用字符串做 == 。您必须使用方法 name.equals

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-17T20:53:47.993

对不起，我不能留下评论。1.那么，您在编写该程序时的意思是终止？我认为，它应该打印两个“println（）”之一 - 哪个？2\. Mybee你应该插入一些排序循环“while”，直到用户输入非空字符串：

```
while (!name.equals("")) { ... } 
```

PS。对不起，我不能留下评论，我看到没有任何批准的答案......

# ios - IOS应用程序窗口大小

> ID：13920055
> 
> 赞同：2
> 
> 时间：2012-12-17T18:37:45.723
> 
> 标签：ios, window

有没有办法编写一个窗口没有填满整个屏幕的应用程序，屏幕的另一部分显示带有应用程序图标的普通 iPad 桌面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:41:49.740

不，你不能。当您的应用程序启动时，您的`UIWindow`所有 UI 附加到的根是全屏的。[这是doc](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingWindows/CreatingWindows.html#//apple_ref/doc/uid/TP40009503-CH4-SW1)的相关片段：

> 大多数 iOS 应用程序在其生命周期中只创建和使用一个窗口。此窗口跨越设备的整个主屏幕...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:41:18.270

简短的回答，不。

更长的答案 - 可能但它需要手机被越狱，并且您尝试构建的任何应用程序很可能不会通过苹果的审查过程。

# matlab - 绘制从 surf2patch 获得的补丁 - Matlab

> ID：13920061
> 
> 赞同：1
> 
> 时间：2012-12-17T18:38:25.000
> 
> 标签：matlab, math

将球体转换为面片后，我绘制了面片的第一个顶点，发现顶点不在球体上。

代码

```
[faces, vertices] = surf2patch(sphere(),'triangle');
sphere();
hold on;
plot3(vertices(1,1), vertices(1,2), vertices(1,3),'*r'); 
```

结果图如下所示

![在此处输入图像描述](../Images/3ac38cfe09a7bd4fefddcc1abaa796be.png)

顶点怎么可能不在球面上呢？我是不是误会了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:57:03.423

**解释**

当一个函数是另一个函数的参数时，*Matlab 将其视为具有单个返回值的函数调用。* 在我们上面的函数调用的上下文中，

`[faces, vertices] = surf2patch(sphere(),'triangle');`

相当于：

```
z = sphere();
[faces, vertices] = surf2patch(z,'triangle'); 
```

现在从文档中回忆：

`[x, y, z] = sphere()`计算一组 3D 坐标*[x, y, z]*。

`z = sphere()`计算相同的*[x, y, z]*并且只返回*z*。

`sphere()`with (nargout = 0) 计算相同的*[x, y, z]*并绘制它。这是上图中显示的色球。

检查*surf2patch.m*的源代码表明，当使用单个*z*参数调用时，它会自动假定*x*和*y*的值。这些值与不带参数调用绘制的*[x, y, z]不同。*`sphere()`

**测试**

要亲自查看，请在*surf2patch.m*中启用断点的情况下跟踪以下代码，并检查输入参数：

```
[x,y,z] = sphere()
[facesA, verticesA] = surf2patch(x,y,z,'triangle')
[facesB, verticesB] = surf2patch(sphere(), 'triangle')
[facesC, verticesC] = surf2patch(z, 'triangle') 
```

您会看到输出*[facesA, verticesA]*与 中的图匹配`sphere()`，而第二次和第三次调用`surf2patch()`没有输入*[x, y]*值，因此它们会自动生成不同于原始*[x,y,z ]* .

**课**

如果您期望多个返回值，请显式分配它们。

# javascript - 如何获得数组的总和

> ID：13920064
> 
> 赞同：2
> 
> 时间：2012-12-17T18:38:37.043
> 
> 标签：javascript

我正在尝试将数组的内容（整数）相加。例如：

```
var myArray;
var answer;
myArray[0]=2;
myArray[1]=5;
answer=myArray[0]+myArray[1]; 
```

答案应该等于 7.你能帮帮我吗？太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:41:44.810

你需要初始化你的数组

```
var myArray = []; 
```

当您在数组中获得更多值时，您可能会考虑使用循环，例如：

```
var myArray = [];
var answer = 0;
myArray[0]=2;
myArray[1]=5;

for (var i=0;i<myArray.length;i++)
{ 
   answer += myArray[i];
}

console.log(answer); 
```

看看这个：[http ://www.w3schools.com/js/js_loop_for.asp](http://www.w3schools.com/js/js_loop_for.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:40:51.853

当我运行你的代码时，我得到一个错误。

您需要将变量初始化`myArray`为数组。

`var myArray = [];`

在我这样做之后， `answer`就有了预期的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:41:16.170

您需要声明`myArray`为一个数组，否则`myArray[0]`意味着一个名为`0`on的属性`undefined`（可能会爆炸）而不是索引访问。

```
var myArray = [];
... 
```

# cmake - 无论任何依赖关系如何在构建时始终运行命令？

> ID：13920072
> 
> 赞同：29
> 
> 时间：2012-12-17T18:38:59.103
> 
> 标签：cmake

我想运行一个解析整个源代码树的 cmake 命令，所以我无法在 cmake 的 add_custom_command/add_custom_target 命令中列出所有可能的依赖项。

是否可以告诉 cmake 只是在没有任何条件的情况下运行命令？我尝试了在网上找到的所有解决方案（包括 SO），但他们都认为该命令依赖于几个最新的已知文件。

我找到了一个解决方案，但它不能可靠地工作：

```
cmake_minimum_required(VERSION 2.6)

project(main)

add_custom_command(
   OUTPUT file1
   COMMAND echo touching file1
   COMMAND touch file1
   DEPENDS file2)
add_custom_target(dep ALL DEPENDS file1 file2)

# this command re-touches file2 after dep target is "built"
# and thus forces its rebuild
ADD_CUSTOM_COMMAND(TARGET dep
          POST_BUILD
          COMMAND echo touching file2
          COMMAND touch file2
) 
```

这是输出：

```
queen3@queen3-home:~/testlib$ make
[100%] Generating file1
touching file1
touching file2
[100%] Built target dep
queen3@queen3-home:~/testlib$ make
[100%] Generating file1
touching file1
touching file2
[100%] Built target dep
queen3@queen3-home:~/testlib$ make
touching file2
[100%] Built target dep
queen3@queen3-home:~/testlib$ 
```

如您所见，在第三次运行时它没有生成 file1，即使之前已触及 file2。有时每 2 次运行一次，有时每 3 次，有时每 4 次。它是一个错误吗？是否有另一种方法可以在 cmake 中运行没有任何依赖关系的命令？

奇怪但是如果我添加*两个*命令来重新触摸file2，即只是复制粘贴构建后的命令，它可以可靠地工作。或者它可能每运行 1000 次就会失败，我还不确定 ;-)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-07-20T13:44:14.747

虽然我对这个解决方案一点也不满意，但自从我偶然发现这个页面并且没有看到它被提及后发布。

您可以添加引用丢失文件的自定义目标，

例如：

```
add_custom_target(
    my_custom_target_that_always_runs ALL
    DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/__header.h
)

add_custom_command(
    OUTPUT
        ${CMAKE_CURRENT_BINARY_DIR}/__header.h  # fake! ensure we run!
        ${CMAKE_CURRENT_BINARY_DIR}/header.h    # real header, we write.
    # this command must generate: ${CMAKE_CURRENT_BINARY_DIR}/header.h
    COMMAND some_command
) 
```

这将继续运行自定义命令，因为`__header.h`未找到。

请参阅使用它的[工作示例](https://developer.blender.org/diffusion/B/browse/master/source/creator/CMakeLists.txt;9d5661c9e8b1ab383be4ae7b065f50d43310f6cb$175-211)。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-18T03:08:09.133

关于ideaman42 的答案的一个转折是创建一个带有空回显语句的虚拟输出。优点是您可以有几个自定义命令取决于这个虚拟输出。

此外，cmake 构建系统将知道您的自定义命令的输出文件是什么，以便可以正确解决对该输出的任何依赖关系。

```
# Custom target will always cause its dependencies to be evaluated and is
# run by default
add_custom_target(dummy_target ALL
    DEPENDS
        custom_output
    )

# custom_output will always be rebuilt because it depends on always_rebuild
add_custom_command(
    OUTPUT custom_output
    COMMAND command_that_produces_custom_output
    DEPENDS
        always_rebuild
    )

# Dummy output which is never actually produced. Anything that depends on
# this will always be rebuilt.
add_custom_command(
    OUTPUT always_rebuild
    COMMAND cmake -E echo
    ) 
```

这`cmake -E echo`与 cmake 一样接近无操作。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-04-04T11:55:20.320

我搜索了完全相同的内容，最终找到了“notSoWorkaround”解决方案。

```
ADD_CUSTOM_TARGET(do_always ALL COMMAND yourCommandRegardlessOfAnyDependency) 
```

这将添加一个将在 ALL 之后运行的目标。并且由于自定义目标始终被认为是过时的，它将始终运行。

您可能需要`DEPENDS yourA.out`在构建后运行

我的消息来源：

*   [cmake 文档](https://cmake.org/cmake/help/v3.7/command/add_custom_target.html)
*   [这个问题的邮件列表答案](https://cmake.org/pipermail/cmake/2012-December/053035.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T08:34:23.833

所以这是我的解决方案。我添加了一个假库：

```
add_subdirectory(fake)
add_dependencies(${PROJECT_NAME} fake) 
```

我这样做：

```
cmake_minimum_required (VERSION 2.6)
project(fake CXX)
add_library(${PROJECT_NAME} SHARED fake.cpp)
add_custom_command(TARGET fake
    POST_BUILD
    COMMAND ./mycommand.sh
    COMMAND rm ${ROOT_BIN_DIR}/libfake.so
    WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}) 
```

如您所见，我只是在构建后删除了 .so 文件，这会导致每次重建假库，并执行 POST_BUILD，并且所有这些都在主 PROJECT_NAME 之前，因为它依赖于假。

# php - 在删除级联 - 我必须添加它

> ID：13920078
> 
> 赞同：1
> 
> 时间：2012-12-17T18:39:16.273
> 
> 标签：php, mysql, sql, cascade, cascading-deletes

我需要一个级联删除的例子。我的问题是，我在哪里添加它？在我创建 PK 的表中，或者在该 PK 作为 FK 坐在那里的其他表中？

我可以使用“alter table”将“on delete cascade”添加到现有表吗？请举个例子？

@edit MYSQL，使用 phpMyAdmin

@编辑 2

它看起来不错吗？

```
alter table wplaty
  drop foreign key pesel,
  add constraint pesel foreign key (pesel)
    references baza_osob(pesel) on delete cascade on update restrict; 
```

我的父表 = baza_osob 我的子表 = wplaty

PK 是 pesel，FK 也是 pesel。

@edit3 出现错误：

> #1025 - 将 '.\projekt\wplaty' 重命名为 '.\projekt#sql2-1300-6c' 时出错（错误号：152）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:41:21.193

级联指令进入“子”表，例如

```
create table parent (
   id int primary key
)

create table child (
   id int primary key
   parent_id int,
   foreign key (parent_id) references parent (id)
      on delete cascade
) 
```

从未尝试对外键进行更改以更改其`on`设置，但最坏的情况是，您只需删除现有的 FK 并使用新`on`设置重新定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:42:26.797

您实际上并没有在表上添加“ON DELETE CASCADE”。它是每个外键定义的一部分（或不是）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:51:05.950

您需要为外键启用此选项。如果您在创建外键时没有添加此选项，那么您应该重新创建它。

```
alter table <table> drop foreign key <fk name>;

alter table <table> add constraint <fk name> foreign key (<column name>)
  references <ref tble>(<ref column) on delete cascade on update restrict; 
```

在一份声明中：

```
alter table <table>
  drop foreign key <old fk name>,
  add constraint <new fk name> foreign key (<column name>)
    references <ref tble>(<ref column) on delete cascade on update restrict; 
```

# javascript - 每次出现在页面上时都将单词斜体？

> ID：13920083
> 
> 赞同：1
> 
> 时间：2012-12-17T18:39:33.887
> 
> 标签：javascript, jquery, css

我有一个 Podunk 公司的网页。但是每次 Podunk 出现在页面上（无论它在哪里）都需要显示为*Podunk！*

请注意，这是页面上的任何位置，因此它可能位于标题标签、列表标签、多个嵌套 DIV 等中。

解决此问题的最佳方法是什么？我认为 jQuery 是更好的解决方案（相对于 CSS），但我不知道该怎么做？有人可以在整个页面元素上提供这种替换的代码片段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:49:32.180

我的原始答案不正确（如评论中所指出的:)）我已编辑此答案以包含正确的解决方案。

```
var rgx = /Podunk/g;
$("body *")
    .contents()
    .filter(function() {
        if (this.nodeType !== 3){
            return false;
        }
        return true;
    })
    .each(function(){
        var $this = $(this);
        var txt = $this.text();
        if (rgx.test(txt)){
            $this.replaceWith("<span>" + txt.replace(rgx,"<span class='podunk'>Podunk</span>") + "</span>");
        };
    });​ 
```

这样做的缺点是任何只有 Podunk 的元素都会获得额外的 span 元素。即，如果你有

```
<a>Podunk</a> 
```

你最终得到

```
<a><span><span class="podunk">Podunk</span></span>. 
```

我认为稍微考虑一下，这可以克服。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:03:45.590

如果它需要以斜体显示，绝对最可靠的方法是使用`<i>Podunk</i>`并尽最大努力确保所使用的字体系列具有斜体字体。

无论如何，这是一个被误导的目标，所以你不应该担心同事说`i`标记不是“语义的”。但是您可能会考虑使用`<i class=company>Podunk</i>`，只是为了更容易放弃斜体的这种使用，而不会放弃对斜体的合理使用，如果客户意识到他们的话。

# jquery - 如何在 Jquery Mobile 中删除基本链接中的阴影？

> ID：13920085
> 
> 赞同：10
> 
> 时间：2012-12-17T18:39:46.863
> 
> 标签：jquery, html, css, jquery-mobile

```
<div data-role="page" style="background:#000">
    <a href="http://google.com">test</a>
</div> 
```

正如你在这里看到的：http: [//jsfiddle.net/KCqqN/](http://jsfiddle.net/KCqqN/)

Jquery Mobile 似乎添加了一个白色阴影，如何摆脱它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T18:40:56.583

在您的样式表中（确保它位于 jQuery 移动样式表下方）

只需自己设置 text-shadow 即可，随心所欲。

`.ui-body-c, .ui-overlay-c { text-shadow:0 0 0; }`

在 jsFiddle 中，它会在之后加载 jquery mobile css，所以如果你在其中添加一个额外的标签（或使用！important，最好不要这样做）它会胜过它。

`body .ui-body-c, body .ui-overlay-c { text-shadow:0 0 0; } // more specificity`

[http://jsfiddle.net/KCqqN/2/](http://jsfiddle.net/KCqqN/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-30T08:47:18.203

很简单！

在 CSS 中的所有内容之前添加以下代码：

```
* {
    text-shadow: none !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T18:46:20.627

我建议在 head 标记中设置您自己的链接 css，然后添加“text-shadow=none !important;” 标记以确保您覆盖 jquery 所做的任何事情。并且因为 !important 覆盖了浏览器的可访问性设置，我还建议将您的文本设置为非常暗和大而背景非常轻，反之亦然，以免惹恼您的可访问性设置不起作用的色盲/视力障碍用户

# hibernate - 在 myeclipse 逆向工程数据库中创建 SessionFactory Hibernate 时出错

> ID：13920089
> 
> 赞同：0
> 
> 时间：2012-12-17T18:40:14.083
> 
> 标签：hibernate, jakarta-ee, hibernate-mapping, object-relational-model

我正在myeclipse中学习休眠。我尝试对 mysql 表进行逆向工程并遵循官方的 myeclipse 教程。生成了所有 xml 文件，但编写了一个简单的测试程序，它给了我以下错误：

.

```
 17-dic-2012 19.18.57 org.hibernate.annotations.common.Version <clinit>
     INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
     17-dic-2012 19.18.57 org.hibernate.Version logVersion
     INFO: HHH000412: Hibernate Core {4.1.4.Final}
     17-dic-2012 19.18.57 org.hibernate.cfg.Environment <clinit>
     INFO: HHH000206: hibernate.properties not found
     17-dic-2012 19.18.57 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
17-dic-2012 19.18.57 org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
17-dic-2012 19.18.57 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
17-dic-2012 19.18.57 org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource: sor/hibernate/Hitest.hbm.xml
%%%% Error Creating SessionFactory %%%%
org.hibernate.InvalidMappingException: Unable to read XML
    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:109)
    at org.hibernate.cfg.Configuration.add(Configuration.java:478)
    at org.hibernate.cfg.Configuration.add(Configuration.java:474)
    at org.hibernate.cfg.Configuration.add(Configuration.java:647)
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:730)
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:2109)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:2081)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2061)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2014)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1929)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1908)
    at sor.hibernate.HibernateSessionFactory.<clinit>(HibernateSessionFactory.java:32)
    at sor.hibernate.BaseHibernateDAO.getSession(BaseHibernateDAO.java:13)
    at sor.hibernate.HitestTest.main(HitestTest.java:15)
Caused by: org.dom4j.DocumentException: http://www.jboss.org/dtd/hibernate/hibernate-mapping-4.0.dtd%20 Nested exception: http://www.jboss.org/dtd/hibernate/hibernate-mapping-4.0.dtd%20
    at org.dom4j.io.SAXReader.read(SAXReader.java:484)
    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:78)
    ... 13 more
17-dic-2012 19.18.59 org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
17-dic-2012 19.18.59 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: HHH000040: Configuration resource: /hibernate.cfg.xml
17-dic-2012 19.18.59 org.hibernate.cfg.Configuration addResource
INFO: HHH000221: Reading mappings from resource: sor/hibernate/Hitest.hbm.xml
%%%% Error Creating SessionFactory %%%%
org.hibernate.InvalidMappingException: Unable to read XML
    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:109)
    at org.hibernate.cfg.Configuration.add(Configuration.java:478)
    at org.hibernate.cfg.Configuration.add(Configuration.java:474)
    at org.hibernate.cfg.Configuration.add(Configuration.java:647)
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:730)
    at org.hibernate.cfg.Configuration.parseMappingElement(Configuration.java:2109)
    at org.hibernate.cfg.Configuration.parseSessionFactory(Configuration.java:2081)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2061)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:2014)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1929)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1908)
    at sor.hibernate.HibernateSessionFactory.rebuildSessionFactory(HibernateSessionFactory.java:71)
    at sor.hibernate.HibernateSessionFactory.getSession(HibernateSessionFactory.java:55)
    at sor.hibernate.BaseHibernateDAO.getSession(BaseHibernateDAO.java:13)
    at sor.hibernate.HitestTest.main(HitestTest.java:15)
Caused by: org.dom4j.DocumentException: http://www.jboss.org/dtd/hibernate/hibernate-mapping-4.0.dtd%20 Nested exception: http://www.jboss.org/dtd/hibernate/hibernate-mapping-4.0.dtd%20
    at org.dom4j.io.SAXReader.read(SAXReader.java:484)
    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:78)
    ... 14 more
Exception in thread "main" java.lang.NullPointerException
    at sor.hibernate.HitestTest.main(HitestTest.java:15) 
```

测试程序是

```
package sor.hibernate;

import java.util.Date;

import org.hibernate.Session;
import org.hibernate.Transaction;

public class HitestTest {

    public static void main(String[] args) {

        HitestDAO dao = new HitestDAO();
        Transaction tx = dao.getSession().beginTransaction();

        Hitest hitest[] = new Hitest[10];
        for (int i = 0; i < hitest.length; i++) {
            hitest[i]  = new Hitest();
            hitest[i].setGreeting("saluto numero " + i*23);
            hitest[i].setRef(i+10);
            hitest[i].setDate(new Date(System.currentTimeMillis()));
            dao.save(hitest[i]);
        }
        tx.commit();
        dao.getSession().close();
    }
} 
```

hibernate.cfg.xml 是

```
<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd">
<!-- Generated by MyEclipse Hibernate Tools.                   -->
<hibernate-configuration>

    <session-factory>
        <property name="hbm2ddl.auto">update</property>
        <property name="dialect">
            org.hibernate.dialect.MySQLDialect
        </property>
        <property name="connection.url">
            jdbc:mysql://localhost:3306/efeulib
        </property>
        <property name="connection.username">root</property>
        <property name="connection.password">qwerty</property>
        <property name="connection.driver_class">
            com.mysql.jdbc.Driver
        </property>
        <property name="myeclipse.connection.profile">
            mysqlJDriver
        </property>
        <mapping resource="sor/hibernate/Hitest.hbm.xml" />

    </session-factory>

</hibernate-configuration> 
```

而 Hitest.hbm.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd ">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping package="sor.hibernate">
    <class name="sor.hibernate.Hitest" table="hitest" catalog="test">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="assigned" />
        </id>
        <property name="greeting" type="java.lang.String">
            <column name="greeting" length="200" />
        </property>
        <property name="date" type="java.util.Date">
            <column name="date" length="10" />
        </property>
        <property name="ref" type="java.lang.Integer">
            <column name="ref" />
        </property>
    </class>
</hibernate-mapping> 
```

我已阅读相关问题，并删除了所有尾随行和空格。但它们都没有奏效。我添加到这些文件中读取问题的唯一内容是 Hitest.hbm.xml 中的 package="sor.hibernate" 属性路径和...都是正确的，它们都是自动生成的。

更多信息。当我在 HQL 中**从 hitest**键入时，它告诉我 org.hibernate.hql.ast.QuerySyntaxException: hitest is not mapped [from hitest] while **from sor.hibernate.Hitest**运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:49:03.243

尝试删除空格

```
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd "
                                                       ^-- here 
```

在你可能犯过同样错误的所有其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T08:01:25.267

解决了@JB_Nizet 指出的问题，我遇到了一个关于验证的新错误。（注意：空间的问题是一个myeclipse错误。我尝试了一个项目，它是myeclipse添加了那个邪恶的空间。）我在hibernate.cfg.xml中添加了以下行，问题部分解决了。新错误是（%%%% Error Creating SessionFactory %%%% org.hibernate.HibernateException: Error applications BeanValidation 关系约束）

```
<property name="javax.persistence.validation.mode">none</property> 
```

新错误是休眠 sql 查询错误。应该已经分配了 ID，所以我将 Hitest.hbm.xml 更改为

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse Persistence Tools
-->
<hibernate-mapping>
    <class name="sor.hibernate.Hitest" table="hitest" catalog="test">
        <id name="id" type="java.lang.Integer">
            <column name="id" />
            <generator class="increment" />
        </id>
        <property name="greeting" type="java.lang.String">
            <column name="greeting" length="200" />
        </property>
        <property name="date" type="java.util.Date">
            <column name="date" length="10" />
        </property>
        <property name="ref" type="java.lang.Integer">
            <column name="ref" />
        </property>
    </class>
</hibernate-mapping> 
```

# css - CSS：左对齐存在 INPUT 的 TD 内容

> ID：13920091
> 
> 赞同：0
> 
> 时间：2012-12-17T18:40:26.927
> 
> 标签：css, css-float

当其中有输入时，我正在尝试在 CSS 中左对齐 TD 单元格的内容。输入应左对齐。这可能吗？

```
 <td> <input ....Left Align Me... /></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:49:51.450

看起来您正在制作一个基本表单，可能在相邻单元格中带有标签。如果是这样，我会使用 <th> （表列标题）标签作为标签，如下所示：

CSS：

```
#tableId td {text-align: left; }
#tableId th {text-align: right; font-weight: normal} 
```

HTML：

```
<table id="tableId">
<tr>
<th>Label</th>
<td><input id="test"></td>
</tr>
</table> 
```

如果您的表格更复杂，下一个最简单的方法是简单地将类名添加到您想要左对齐的单元格中，以便在样式表中定位它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:45:55.833

```
td input {
    float: left;
} 
```

这并不*完全*是您想要的，但它与您使用纯 CSS 所获得的一样接近。

# android - 图库滚动时如何防止图像选择？

> ID：13920092
> 
> 赞同：0
> 
> 时间：2012-12-17T18:40:26.503
> 
> 标签：android, android-gallery

我正在尝试实现我自己的 picrutes 画廊应用程序。我使用 ImageSwitche 来显示大图像和 Gallery 来显示缩略图。问题是当用户滚动画廊时，它会将选择更改为位于画廊中间的缩略图，但所需的行为只是像 ListView 一样滚动并在用户点击缩略图时更改图像。

有没有人建议如何实施这种行为。

PS。内部带有 LinearLayout 的 Horizo​​ntalScrollView 是个坏主意，因为它不会回收视图并将所有缩略图的图片保存在内存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:54:56.200

看看我[在这里为自己的问题提供的解决方案](https://stackoverflow.com/questions/7694812/android-horizontal-scrolling-of-multiple-viewable-items/13537510#13537510.)

基本上，我最终得到了稍微修改的 ViewPager 版本，以显示 N 个页面而不是一个页面。我唯一不喜欢的是，您不会像在 ListView 中那样进行基于速度的滚动

# c++ - 将 glutTimerFunc 与 glutMouseFunc 一起使用

> ID：13920095
> 
> 赞同：1
> 
> 时间：2012-12-17T18:40:34.727
> 
> 标签：c++, opengl, graphics, glut, freeglut

我正在尝试做一个小游戏，在我的游戏中我有一些方块，当用户点击这些方块时，它们会被突出显示。为了达到这个效果，我使用`glutMouseFunc`with `glutTimerFunc`。

当用户点击屏幕时，我选择像素并确定我需要突出显示的正方形。一旦确定了正方形，我就会调用`glutTimerFunc`. 注册的函数`glutTimerFunc`将颜色的每个分量的值增加 0.01，直到它们达到我定义的一个最大值，然后该值回到最小值。

`glutTimerFunc`在 60 毫秒内执行，我得到了几乎平滑的光泽效果。

我的问题是，如果我非常快速地单击两个方块，效果会从第一个方块开始，但不会结束，所以方块仍然突出显示，第二个方块完成整个效果。如果我像疯子一样点击每个方格，所有方格都会突出显示。

即使单击其他方块，如何使这种发光效果终止？

这是一段代码

```
void Memoria::shineEffect(GLint value) {

    if(value == 1) {
        for(GLint i = 0; i < 3; i++) {
            if(colors[selectedSquare][i] > 0) {
                colors[selectedSquare][i] += COLOR_INCREASE;
                if(colors[selectedSquare][i] >= MAX) {
                    colors[selectedSquare][i] = MAX;
                    value = -1;
                }
            }
        }
        glutTimerFunc(FPS, timeWrapper, value);
    }
    else {
        if(value == -1) {
            for(GLint i = 0; i < 3; i++) {
                if(colors[selectedSquare][i] > 0) {
                    colors[selectedSquare][i] -= COLOR_INCREASE;
                    if(colors[selectedSquare][i] <= MIN) {
                        value = 0;
                        colors[selectedSquare][i] = MIN;
                    }
                }
            }
            glutTimerFunc(FPS, timeWrapper, value);
        }
    }
} 
```

`timeWrapper``shineEffect`如果传入参数的值为 1 或 -1，则调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:29:50.193

您希望`shineEffect`函数至少经过一个突出显示循环，然后在突出显示的项目发生更改时停止。这更像是一个 UI 代码设计问题，而不是 OpenGL 或 GLUT 问题。

您需要实现的机制非常简单：

*   `updateHighlights`为所有功能安装一次`glutTimerFunc`：此功能将负责更新所有点击元素的高光，
*   创建元素队列：每次单击元素时，将其添加到队列中，

该`updateHighLights`函数执行的任务应该如下：

*   如果队列包含一个元素，请像您在程序中所做的那样继续循环其突出显示
*   如果队列包含多个元素，对于队列中的每个元素，
    *   步高亮循环
    *   如果循环结束，并且该元素不是最后一个，则从队列中删除该元素

这是解决您的问题的另一种可能更灵活的方法。

Glut 事件循环机制的设计非常简单：只有一个挂钩可以放置您的“空闲工作”代码，因此在其中安装一个调用其他函数列表的函数可能更灵活。然后可以使用一组原语修改该列表，以安装或删除要在空闲时间执行的特定任务。这可能比 GLUT 的“单一功能”方法灵活得多。

例如，您可以将当前突出显示代码隔离在一个函数中，其中包含要突出显示的元素的结构，并让该函数在其元素通过突出显示循环完成并且不再处于活动状态时将其从列表中删除。

由于您使用的是 C++，因此将所有这些功能捆绑在类中应该很容易：

*   空闲任务列表的一类
*   空闲任务的一个基类
*   一个派生的空闲任务类，用于突出显示正方形（带有正方形和活动状态的字段）
*   一个类来跟踪活动方块，以便它可以很容易地被停用并被新的活动方块替换。这个`glutMouseFunc`函数将被访问。

# c# - 在 WinForms 中，有没有人看到从另一个模态对话框调用一个模态对话框会导致模态被撤消？

> ID：13920112
> 
> 赞同：1
> 
> 时间：2012-12-17T18:41:33.510
> 
> 标签：c#, .net, winforms, printing, modality

问题：

有没有人看到从另一个模态对话框调用一个模态对话框会导致模态被撤消？

如果您想使用 ShowDialog 进行调用以便返回结果，但没有它是模态的（其他表单仍然响应），您会怎么做？（我们并没有尝试这样做......但如果有办法做到这一点，也许我们是不小心这样做的。）

细节：

我们已经实现了我们自己的打印对话框，该对话框具有显示标准 PrintDialog、标准 PageSetupDialog 和标准 PrintPreviewDialog 的按钮。打印全部使用我们自己的 PrintDocument 类完成，该类派生自标准 PrintDocument 类。因此，我们正在尝试遵循标准实践……我们只有一些额外的设置需要用户开始使用。

我们使用我们的PrintDialog.ShowDialog(mainWindow) 从菜单调用我们的打印对话框。当它出现时，它是正确的模态（所有其他窗口都没有响应......特别是那个主窗口）。在该打印对话框中，有一些按钮可以调用其他三个对话框中的每一个...并且所有按钮都使用 ShowDialog(ourPrintDialog) 调用，从而将第一个打印对话框作为其父对话框。在 PrintDialog 和 PageSetupDialog 的情况下，它们出现模态（mainWindow 和 ourPrintDialog 以及所有其他窗口都没有响应）。当我们确定或取消这些时，它返回到第一个打印对话框（ourPrintDialog），它仍然是模态的（没有其他窗口响应）。

然而，在标准 PrintPreviewDialog 的情况下，尽管我们以相同的方式调用它（ShowDialog 以第一个对话框作为其父级），但它并不完全是模态的。我们的主窗口再次响应。因此，您可以开始操作“打印”对话框正在打印的基础文档……这当然违反了许多假设。当您关闭“预览”对话框，返回到原来的“打印”对话框时，它现在也不处于模态状态......主窗口仍在响应。

我们已经尝试在一个普通的测试应用程序中执行此操作，并且效果很好......进入 PrintPreviewDialog 时模式没有被破坏。所以，它似乎是 PrintPreviewDialog （因为它不会发生在其他两个）和我们的应用程序的主窗口（因为它不会发生在测试应用程序中）之间的一些特定交互。关于那可能是什么的任何建议？（因此我上面的两个问题。）

在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:55:44.513

不知道为什么会发生，但您可以尝试在窗口上运行 Spy++ 并观察流动的消息，可能会为您提供有关窗口之间发生的情况或相关窗口属性的线索。

# c# - VS2010 SP1 Combobox displaymember 问题

> ID：13920117
> 
> 赞同：0
> 
> 时间：2012-12-17T18:41:55.500
> 
> 标签：c#, winforms, visual-studio-2010, combobox

我在 VS 2010 和 C# 中对 Combobox 的 Displaymember 有疑问。我有一个表为 T1，父 ID 为 int 和一些其他信息，另一个表为 T2，id 为 int，名称为 varchar(50)。我想使用 T2 作为参考。所以，我的组合框：Binded - T1 Datasource - T2 DisplayMember - T2.Name ValueMember - T2.Id

它不会起作用，我看不出我在哪里做错了。此外，如果我这样做：DisplayMember - T2.Id ValueMember - T2.Id 比它开始工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:50:41.137

如果我理解正确，您正在尝试将`DisplayMember`and`ValueMember`属性设置为第二个表中存在的两个字段的名称。
`DisplayMember`并且`ValueMember`是应该引用绑定到 DataSource 属性的表中的字段的字符串。
如果您将数据源绑定到不包含列出的字段的表，`DisplayMember`并且`ValueMember`没有任何内容可以按预期工作

如果您的表与 ParentID 和 ID 字段相关，那么您可以使用 JOIN 表达式创建数据源

```
SELECT t1.ParentID, t1.Field1, t1.Field2, t2.ID, t2.Name
FROM t1 LEFT JOIN t2 on t1.ParentID = t2.ID 
```

那么您可以设置组合框的 DisplayMember 和 ValueMember

```
combobox1.DisplayMember = "t2.Name";
combobox1.ValueMember = "t2.ID"; 
```

# java - 带有执行器服务的shutdownNow

> ID：13920119
> 
> 赞同：0
> 
> 时间：2012-12-17T18:41:59.103
> 
> 标签：java, multithreading, executorservice

我正在使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)进行连接任务，如下所示：

```
ExecutorService executor = Executors.newSingleThreadExecutor();
Future<ApplicationConnection> future = (Future<ApplicationConnection>) executor.submit(new ConnectThread(crf, connoptions));
connection = future.get(300000, TimeUnit.SECONDS);
executor.shutdownNow(); 
```

该`call()`方法调用一个`.connect()`方法（专有 API）。这种连接方法会产生各种线程池等。我担心的是，如果将来超时并杀死执行程序，将来可能已经通过调用该`.connect()`方法产生的线程也会结束吗？我知道杀死一个线程也会杀死任何子线程，但这是否遵循相同的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:49:23.090

你的假设是对的，如果`Future`超时，一些挂起的线程将保留。更糟糕的是，`shutdownNow()`甚至不会关闭您的池线程（更不用说专有的 API 线程）。它只是停止接受新工作。`ExecutorService`一旦所有正在运行的任务完成，线程池将终止所有线程。

您可以做的是尝试取消未来并中断它。首先处理`InterruptedException`你的未来：

```
class ConnectThread implements Callbale<ApplicationConnection> {

    public ApplicationConnection call() {
        try {
            return prioprietaryApi.connect();
        } catch(InterruptedException e) {
            prioprietaryApi.cleanUp();
            throw e;
        }
    }

} 
```

现在只需运行：

```
future.cancel(true); 
```

但是您的专有 API 可能无法处理`InterruptedException`（它不会从 重新抛出它`connect()`，而且您可能无权访问任何`cleanUp()`方法。

在这种情况下……算了吧。这`Future`最终将终止并自行清理，忽略您不再等待它的事实。当然，这可能会导致各种可扩展性问题。

顺便说一句，如果您想要实现的唯一目标是限制给定方法运行的最长时间，请[`TimeLimiter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/TimeLimiter.html)从[guava](/questions/tagged/guava "显示标记为“番石榴”的问题")考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:46:03.510

根据[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29)

> 尝试停止所有正在执行的任务，停止等待任务的处理，并返回等待执行的任务列表。除了尽最大努力停止处理正在执行的任务之外，没有任何保证。例如，典型的实现将通过 Thread.interrupt() 取消，因此任何未能响应中断的任务可能永远不会终止。

# sql-server-2008 - 带有 Windows 8 的 SQLNCLI10 提供程序

> ID：13920122
> 
> 赞同：2
> 
> 时间：2012-12-17T18:42:08.587
> 
> 标签：sql-server-2008, vb6, sqlncli

我在使用 Windows 8 时遇到问题。

我在 VB6 中有一个使用 SQL Server 2008 的应用程序，通过网络使用 SQLNCLI10 提供程序，我总是安装它`sqlncli10.msi`，但是当我尝试在装有 Windows 8 的 PC 上安装时，我不能......说它不再受支持.

我使用ADO进行连接，字符串连接为：

```
Provider=SQLNCLI10;Server=SERVER\SQLEXPRESS;Database=MyDataBase; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:58:42.570

你是在 64 位机器上安装的吗？如果是，您可能需要直接创建对 C:\Windows\SysWow64\sqlncli.dll 的引用。

# forms - 表单数据是否由浏览器自动编码？

> ID：13920126
> 
> 赞同：3
> 
> 时间：2012-12-17T18:42:31.913
> 
> 标签：forms, urlencode, multipartform-data

我已经阅读[了一些有关表单数据编码的](https://stackoverflow.com/questions/4007969/application-x-www-form-urlencoded-or-multipart-form-data) [内容](http://en.wikipedia.org/wiki/Percent-encoding)，但有一件事仍不清楚。在 enctype="application/x-www-form-urlencoded" 的情况下，我们需要手动对数据进行 urlencode，[不是](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)吗？

> ... 使用此内容类型提交的表单*必须*编码如下

必须由谁编码？通过浏览器？还是由应用程序开发人员？

另一件事是——在多部分/表单数据的情况下，使用或应该使用什么编码（如果有的话）？

我有点提前误导了这么多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:14:58.853

实际上，浏览器会自动对数据进行 url 编码。这个[w3 文档](http://www.w3.org/TR/html401/)首先是为那些制作浏览器的人准备的。所以这句话，`Forms submitted with this content type must be encoded as follows`意味着数据应该由浏览器编码。无论如何，可以通过查看表单数据处理脚本中的原始帖子来检查它（如果是 php in 看起来像`file_get_contents("php://input");`）

# ruby-on-rails - 将分页出来反转

> ID：13920133
> 
> 赞同：1
> 
> 时间：2012-12-17T18:43:25.050
> 
> 标签：ruby-on-rails, will-paginate

我正在使用将在我的 ruby​​ on rails 应用程序上分页。我之前在其他应用程序上使用过它，它工作正常但是当我出于某种原因在这个应用程序上使用它时，它看起来分页的选项卡被反转了。

这是html

```
<div class="container">
 <br />
 <br />
 <h2 class="black">
Recent News
<div class="line_section"><div>
 </h2>
 <div class="row"> 
<div class="span12">

<ul class="recent-news"> 

<% @news_all.each do |news| %>

 <li style="font-size: 16px; line-height: 19px; letter-spacing: 1px; font-size: 14px;  color: #555; text-align: left;">
  <%= image_tag news.photo.url, class: 'pull-left', style: 'margin-right:40px; margin-top: 2px; width: 300px;' %> 
  <div style=" width: 600px; float: right;">
   <%= link_to news.title, news %> 
  <br />

   <%= link_to news.date, news, style: 'font-size: 10px; color: black; position: relative; top: 15px;' %> 

   <br /><br />
  <%= truncate news.content, length: 500 %> 
   <br />  
    <%= link_to 'Read More...', news, style: 'font-size: 12px !important;' %>
  </div>
      </li>
      <% end %> 

     <%= will_paginate @news_all %>
        </div><!-- end span12 -->

    </div><!-- end row -->
          </div><!-- end container --> 
```

这是控制器

```
 def batnews
      @article = Article.first
      @news_all = News.all
      @news_all = News.paginate(page: params[:page]).limit(4)
      @comments = Comment.all
    end 
```

这是该站点的链接，因此您可以查看实际情况。

[http://www.batman-fansite.com/batnews](http://www.batman-fansite.com/batnews)

如果滚动到底部，您将看到分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:52:13.390

修复你的CSS：

```
.recent-news li {
   float: right;
} 
```

添加类似的东西

```
.recent-news .pagination li {
   float: left;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:55:28.993

这里有两个问题：

*   由于 CSS float:right 导致显示顺序不正确，导致元素按渲染顺序向右移动，从而导致从左到右的倒序排列。
*   在分页集上使用 limit(4) 与 per_page: 4 分页选项。

检查你的 CSS，你会发现：

```
.recent-news li {
  float: right;
} 
```

...您的控制器代码应该是：

```
 @news_all = News.paginate(page: params[:page], per_page: 4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:55:55.170

尝试这样的事情：

```
def index

@posts = Post.paginate :page => params[:page], **:order => "created_at ASC"**
end 
```

# windows-server-2003 - 同一台机器上的两个 Redmine 1.4 实例在 WEBrick 上具有非常不同的性能

> ID：13920136
> 
> 赞同：0
> 
> 时间：2012-12-17T18:43:34.817
> 
> 标签：windows-server-2003, redmine, webrick

我在 Windows Server 2003 和 MySQL 上安装了 Redmine 1.4。一段时间后，该实例被更多人使用，我需要另一个用于测试（即开发环境）。由于我还希望能够在不破坏生产 Redmine 实例的风险的情况下测试插件，因此我将原始 Redmine（例如`redmine_prod`）文件夹复制到另一个文件夹（例如`redmine_devel`）。我为`redmine_devel`. 我只`production`在第一个和`development`第二个中定义了环境。这两个实例都在作为 Windows 服务启动的 Webrick 上运行，在不同的端口上。然而，这两种实例的性能存在很大差异 - 旧的生产实例运行速度非常快，而开发运行速度很慢（几秒钟即可调出页面，这不会随时间改变）。

我还测试`redmine_devel`了在瘦服务器上运行，这并没有提高性能。

可能是什么原因？它们都在几乎相同的条件下运行。

任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:42:44.703

`production`好的，这是Redmine以外环境的默认日志级别。即默认`production`使用`:info`，而其他环境使用`:debug`. 这可以通过编辑`config\environments\[your_env].rb`和添加来改变：

config.logger.level = 记录器::INFO

到选择的环境。当然，还有其他选择。

# eigen - Eigen3 - 访问向量元素的（非连续）子集

> ID：13920137
> 
> 赞同：4
> 
> 时间：2012-12-17T18:43:38.047
> 
> 标签：eigen

假设我有一个带有任意浮点值的 VectorXf exampleVector，我想根据它们的值选择一些元素。

我可以根据我的标准有效地获得真/假值的逻辑向量，例如 boolArray=exampleVector<1;

但是现在我想制作一个新的向量（尺寸更小），它只包含那些符合我标准的元素。

我怎样才能在 eigen3 中有效地做到这一点？

在 RI 中可以使用 reduceVector=exampleVector[boolArray]

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T08:13:39.173

由于 VectorXf 将其值存储在连续的内存范围中，因此您必须复制出所需的值。我相信 R 也是这样做的，所以你不会降低效率。然而，我知道没有办法像在 R 中那样方便地做到这一点。所以你必须循环并复制出相关的值。

# symfony - 安装 JMSSerializerBundle

> ID：13920138
> 
> 赞同：2
> 
> 时间：2012-12-17T18:43:44.037
> 
> 标签：symfony, fosrestbundle, symfony-2.0

我安装了`FOSRestBundle`，但它需要`JMSSerializerBundle`.

我在我的部门中添加了下一行：

```
[JMSSerializerBundle]
    git=git://github.com/schmittjoh/JMSSerializerBundle.git
    target=bundles/JMS/SerializerBundle 
```

在这里它解释了如何做到这一点：http: [//jmsyst.com/bundles/JMSSerializerBundle/master/installation](http://jmsyst.com/bundles/JMSSerializerBundle/master/installation)

但是当我尝试时`$php bin/vendors install`，它显示了一个错误：

```
[InvalidArgumentException]                                          
  The service definition "jms_serializer.serializer" does not exist. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T19:22:34.167

您应该在方法中注释该`new FOS\RestBundle\FOSRestBundle(),`行。然后安装 ，然后你应该取消该行并注册.`AppKernel.php``registerBundles()``JmsSerializerBundle``JsmSerializerBundle`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T20:34:50.600

该手册说它要向内核注册捆绑包：

```
new JMS\Serializer\JMSSerializerBundle($this), 
```

但安装程序会创建文件夹：`vendor/bundles/JMS/SerializerBundle`

因此，必须将其添加到 AppKernel.php 的下一行，而不是另一行：

```
new JMS\SerializerBundle\JMSSerializerBundle($this), 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T19:10:13.413

您是否还执行了手册中的以下步骤？听起来你没有添加这条线

```
new JMS\Serializer\JMSSerializerBundle($this) 
```

到 AppKernel.php

# visual-studio - 使用 MSBuild.exe 通过 cmd 行“发布”一个 ASP.NET MVC 4 项目

> ID：13920146
> 
> 赞同：88
> 
> 时间：2012-12-17T18:44:15.193
> 
> 标签：visual-studio, msbuild, asp.net-mvc-4, msdeploy

我正在寻找一个命令来运行`MSBuild.exe`它只需要一个 MVC 4 项目并将其发布到给定目录。

例如，

```
MSBuild <solution>/<project>.csproj -publish -output=c:/folder 
```

这显然是不正确的语法。我试图简化我的问题。

[这个问题](https://stackoverflow.com/questions/3097489/how-to-publish-web-with-msbuild)谈到了构建 XML，但我并没有尝试做任何细节。

我只是想进行部署。

在[那个问题](https://stackoverflow.com/questions/3097489/how-to-publish-web-with-msbuild)的后面，有人谈到“MSDeploy”。我可以调查一下，但这是唯一的选择吗？我没有能力在服务器上安装 web deploy。在这种情况下，我真正需要做的就是“发布”并将已发布项目的内容发送到服务器/文件系统上的给定目录。

有人有我可以使用的一个衬里吗？

我必须使用 MSDeploy 吗？

MSDeploy 是否需要在服务器上安装 Web 部署？

在服务器上设置 web 部署不需要设置一些端口、权限和安装一些 IIS 插件吗？

我很想执行一些简单的事情。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-12-19T07:44:03.273

在 VS 2012（以及适用于 VS 2010 的[Azure SDK](http://www.windowsazure.com/en-us/develop/net/)中提供的发布更新）中，我们简化了 Web 项目的命令行发布。我们通过使用发布配置文件做到了这一点。

在 VS for web 项目中，您可以使用发布对话框创建发布配置文件。当您创建该配置文件时，它会自动存储在您的项目中 Properties\PublishProfiles 下。您可以使用创建的配置文件从命令行发布以下命令行。

```
msbuild mysln.sln /p:DeployOnBuild=true /p:PublishProfile=<profile-name> 
```

如果要将发布配置文件（.pubxml 文件）存储在其他位置，则可以将路径传递给 PublishProfile。

发布配置文件是 MSBuild 文件。如果您需要自定义发布过程，您可以直接在 .pubxml 文件中进行。

如果您的最终目标是从命令行传入属性。我会推荐以下。在 VS 中创建示例发布配置文件。检查该发布配置文件以确定您需要在命令行中传递哪些 MSBuild 属性。仅供参考，并非所有发布方法都支持命令行发布（即 FTP/FPSE）。

仅供参考，如果您正在构建 .csproj/.vbproj 而不是 .sln 并且您使用的是 VS 2012，您还应该传入`/p:VisualStudioVersion=11.0`. 有关原因的更多详细信息，请参阅[http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-18T14:00:07.993

创建一个如下所示的 build.xml 文件

启动 Visual Studio 命令提示符

运行 msbuild build.xml

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTargets="Build">

  <PropertyGroup>
    <Build>$(MSBuildProjectDirectory)\Build</Build>
    <ProjectFile>MyProject.csproj</ProjectFile> 
    <ProjectName>MyProjectNameInVisualStudio</ProjectName>
    <CopyTo>$(MSBuildProjectDirectory)\CopyTo</CopyTo>
  </PropertyGroup> 

  <Target Name="Build"> 
    <RemoveDir Directories="$(Build)"/>  
    <MSBuild Projects="$(ProjectFile)" Properties="Configuration=Release;OutputPath=$(Build);OutDir=$(Build)/"></MSBuild>  
    <Exec Command="robocopy.exe  $(Build)\_PublishedWebsites\$(ProjectName) $(CopyTo) /e /is
      if %errorlevel% leq 4 exit 0 else exit %errorlevel%"/>    
  </Target>

</Project> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-25T17:51:01.400

以下命令完美运行：

```
msbuild Myproject.sln  /t:Rebuild /p:outdir="c:\outproject\\" /p:Configuration=Release /p:Platform="Any CPU" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-21T03:55:36.387

我发现 Sayed 的回答是部署默认配置，即 Debug。MSBuild 似乎忽略了发布配置文件中选择的配置。因此，我更改了命令以指定正确的部署配置...

```
msbuild mysln.sln /p:Configuration=[config-name] /p:DeployOnBuild=true /p:PublishProfile=[profile-name] 
```

其中 config-name = Release 或您创建的其他构建配置

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-21T13:39:41.817

如上所述，您需要构建 Web 项目，但您还需要打包/复制。我们使用文件副本，而不是“发布”...

还; 我们使用 DEBUG/RELEASE 来构建网站；但随后是实际环境，即处理 web.config 转换的“QA”或“PROD”。

因此，我们最初使用 RELEASE 构建它，然后使用 QA 打包它 - 在下面的示例中。

```
 <PropertyGroup>   
    <SolutionName>XXX.Website</SolutionName>
    <ProjectName>XXX.Website</ProjectName>
    <IisFolderName>XXX</IisFolderName>

    <SolutionConfiguration>QA</SolutionConfiguration> <!--Configuration will be set based on user selection-->   

    <SolutionDir>$(MSBuildThisFileDirectory)..</SolutionDir>
    <OutputLocation>$(SolutionDir)\bin\</OutputLocation>
     <WebServer>mywebserver.com</WebServer>
  </PropertyGroup>

  <Target Name="BuildPackage">
    <MSBuild Projects="$(SolutionDir)\$(SolutionName).sln" ContinueOnError="false" Targets="Clean;Rebuild" Properties="Configuration=Release" />
    <MSBuild Projects="$(SolutionDir)\$(ProjectName)\$(ProjectName).csproj" ContinueOnError="false" Targets="Package" Properties="Configuration=$(SolutionConfiguration);AutoParameterizationWebConfigConnectionStrings=False" />
  </Target>

  <Target Name="CopyOutput">
    <ItemGroup>
      <PackagedFiles Include="$(SolutionDir)\$(ProjectName)\obj\$(SolutionConfiguration)\Package\PackageTmp\**\*.*"/>
    </ItemGroup>
    <Copy SourceFiles="@(PackagedFiles)" DestinationFiles="@(PackagedFiles->'\\$(WebServer)\$(IisFolderName)\$(SolutionConfiguration)\%(RecursiveDir)%(Filename)%(Extension)')"/>
  </Target> 
```

所以;

1.  设置您的属性
2.  调用 BuildPackage 目标
3.  调用 CopyOutput 目标，瞧！

# mysql - 使用算术运算优化 MySQL 嵌套选择

> ID：13920151
> 
> 赞同：5
> 
> 时间：2012-12-17T18:44:36.223
> 
> 标签：mysql, sql, select

我在 MySQL 5.1 非规范化表上运行了这个 sql 查询。它按我想要的方式工作，但它可能会很慢。我在 day 列上添加了一个索引，但它仍然需要更快。关于如何更快地获得这个的任何建议？（也许用一个连接代替？）

```
SELECT DISTINCT(bucket) AS b,
       (possible_free_slots -
          (SELECT COUNT(availability)
           FROM ip_bucket_list
           WHERE bucket = b
           AND availability = 'used'
           AND tday = 'evening'
           AND day LIKE '2012-12-14%'
           AND network = '10_83_mh1_bucket')) AS free_slots
FROM ip_bucket_list
ORDER BY free_slots DESC; 
```

个别查询很快：

```
SELECT DISTINCT(bucket) FROM ip_bucket_list;
1024 rows in set (0.05 sec)

 SELECT COUNT(availability) from ip_bucket_list WHERE bucket = 0 AND availability = 'used' AND tday = 'evening' AND day LIKE '2012-12-14%' AND network = '10_83_mh1_bucket';
1 row in set (0.00 sec) 
```

桌子：

```
mysql> describe ip_bucket_list;
+---------------------+--------------+------+-----+-------------------+----------------+
| Field               | Type         | Null | Key | Default           | Extra          |
+---------------------+--------------+------+-----+-------------------+----------------+
| id                  | int(11)      | NO   | PRI | NULL              | auto_increment |
| ip                  | varchar(50)  | YES  |     | NULL              |                |
| bucket              | int(11)      | NO   | MUL | NULL              |                |
| availability        | varchar(20)  | YES  |     | NULL              |                |
| network             | varchar(100) | NO   | MUL | NULL              |                |
| possible_free_slots | int(11)      | NO   |     | NULL              |                |
| tday                | varchar(20)  | YES  |     | NULL              |                |
| day                 | timestamp    | NO   | MUL | CURRENT_TIMESTAMP |                |
+---------------------+--------------+------+-----+-------------------+----------------+ 
```

和 DESC：

```
DESC SELECT DISTINCT(bucket) as b,(possible_free_slots - (SELECT COUNT(availability) from  ip_bucket_list WHERE bucket = b AND availability = 'used' AND tday = 'evening' AND day  LIKE '2012-12-14%' AND network = '10_83_mh1_bucket')) as free_slots FROM ip_bucket_list  ORDER BY free_slots DESC;
+----+--------------------+----------------+------+-----------------------------------------+--------+---------+------+--------+---------------------------------+
| id | select_type        | table          | type | possible_keys                           | key    | key_len | ref  | rows   | Extra                           |
+----+--------------------+----------------+------+-----------------------------------------+--------+---------+------+--------+---------------------------------+
|  1 | PRIMARY            | ip_bucket_list | ALL  | NULL                                    | NULL   | NULL    | NULL | 328354 | Using temporary; Using filesort |
|  2 | DEPENDENT SUBQUERY | ip_bucket_list | ref  | bucket,network,ip_bucket_list_day_index | bucket | 4       | func |    161 | Using where                     |
+----+--------------------+----------------+------+-----------------------------------------+--------+---------+------+--------+---------------------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:00:08.100

我将使用连接将相关子查询从`SELECT`子句移动到`FROM`子句中：

```
SELECT distinct bucket as b,
       (possible_free_slots - a.avail) as free_slots
FROM ip_bucket_list ipbl left outer join
     (SELECT bucket COUNT(availability) as avail
      from ip_bucket_list
      WHERE availability = 'used' AND tday = 'evening' AND
             day LIKE '2012-12-14%' AND network = '10_83_mh1_bucket'
     ) on a
     on ipbl.bucket = avail.bucket
ORDER BY free_slots DESC; 
```

子句中的版本`SELECT`可能正在为每一行重新运行（甚至在`distinct`运行之前）。通过将它放在`from`子句中，ip_bucket_list 表将只被扫描一次。

另外，如果您希望每个存储桶只显示一次，那么我建议您使用`group by`而不是`distinct`. 它将阐明查询的目的。您可以完全消除对表格的第二次引用，例如：

```
SELECT bucket as b,
       max(possible_free_slots -
           (case when availability = 'used' AND tday = 'evening' AND
                      day LIKE '2012-12-14%' AND network = '10_83_mh1_bucket'
                 then 1 else 0
            end)
           ) as free_slots
FROM ip_bucket_list
group by bucket
ORDER BY free_slots DESC; 
```

为了加快您的查询版本，您需要一个索引 on `bucket`，因为它用于相关子查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:55:58.783

尝试将子查询移动到主查询中 - 如下所示：

```
SELECT b.bucket AS b,
       b.possible_free_slots - COUNT(l.availability) AS free_slots
FROM ip_bucket_list b
LEFT JOIN ip_bucket_list l
       ON l.bucket = b.bucket
      AND l.availability = 'used'
      AND l.tday = 'evening'
      AND l.day LIKE '2012-12-14%'
      AND l.network = '10_83_mh1_bucket'
GROUP BY b.bucket, b.possible_free_slots
ORDER BY 2 DESC 
```

# android - Parse.com 是否适合在 Android 中与 SQLite 进行备份/同步？

> ID：13920155
> 
> 赞同：13
> 
> 时间：2012-12-17T18:44:41.513
> 
> 标签：android, sqlite, parse-platform

到目前为止，我看到的示例应用程序和文档似乎使用 Parse 作为应用程序的主要（如果不是唯一的）存储解决方案，这在某些情况下非常有用。

我希望将 Parse 与我在 Android 上的现有应用程序集成，该应用程序在单个数据库中使用多个 SQLite 表。

是否有任何示例显示 Parse 的用法，其中本地存储（即 SQLite DB）是主存储，并且如果有需要更新/提交的更新更改，数据仅在 Parse 和本地存储之间同步？

对于我的数据库，我有两个表，Tasks 和 Dates。任务由以下组成：

*   _id（此表的唯一整数键）
*   item（描述任务的字符串）
*   desc （具有较长描述的字符串 - 可能为空）
*   parent（一个整数，表示此任务的父级的_id）

和日期：

*   _id（此表的唯一整数键）
*   item_id（对应于Tasks中_id的外键） date（以长格式存储的日期）

在这种情况下，**我会将每一行存储为单独的 ParseObject**吗？Task 和 Date 有不同的类，我可以将 Dates 与他们的 Task 父母联系起来吗？这是推荐的方式吗？

--

编辑：我收到了 Parse 工程师的回复，他说这是可能的（与本地 SQLite DB 同步），但它不受支持，并且没有评论我提出的方法 - 特别是将行映射到 ParseObjects。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T17:24:59.163

我一直在考虑类似的思路，但没有实现同步的适配器或库。因此，您必须从头开始实施它。鉴于您的架构非常简单，因此应该不会太难。

解决方案是否合适：在您的场景中，parse.com 将充当任何其他提供数据的 REST 服务，所以我看不到任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-28T13:34:38.880

实际上，现在有一个简单的 Parse <=> sqlite 集成库。查看[https://github.com/ntoskrnl/DataSync](https://github.com/ntoskrnl/DataSync)

# mysql - 使用多个计数语句进行查询

> ID：13920160
> 
> 赞同：1
> 
> 时间：2012-12-17T18:44:50.320
> 
> 标签：mysql, sql

我想结合以下两个查询，最终得到三列：RelativePath、field = null/empty string、field with value。我可以单独执行查询，但在组合它们时遇到了麻烦。

```
SELECT RELATIVEPATH, COUNT(RELATIVEPATH) FROM APP 
       WHERE (FIELD IS NULL) OR (FIELD = '')
       GROUP BY (RELATIVEPATH);

SELECT RELATIVEPATH, COUNT(RELATIVEPATH) FROM APP
       WHERE (FIELD IS NOT NULL) 
       GROUP BY (RELATIVEPATH); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T18:46:04.447

您需要以下`case`声明：

```
SELECT RELATIVEPATH, sum(case when (FIELD IS NULL) OR (FIELD = '') then 1 else 0 end),
       sum(case when field is not null then 1 else 0 end)
FROM APP 
GROUP BY (RELATIVEPATH); 
```

这是假设的目的`count(RelativePath)`是计算所有行。如果你真的想计算列的非 NULL 值，你可以使用：

```
SELECT RELATIVEPATH, count(case when (FIELD IS NULL) OR (FIELD = '') then RelativePath end),
       count(case when field is not null then RelativePath end)
FROM APP 
GROUP BY (RELATIVEPATH); 
```

# python - sphinx 方法返回类型与链接

> ID：13920165
> 
> 赞同：6
> 
> 时间：2012-12-17T18:45:15.723
> 
> 标签：python, cython, python-sphinx

将 cython 与以下形式一起使用`-Xembedsignature=True`可能会在文档字符串中产生签名：

```
 |  mymethod(...)
 |      MyCythonModule.mymethod(self, param1, MyCythonType param2, param3=None) -> SomeResultType 
```

使用 autodoc 扩展为此生成 Sphinx 文档时，输出如下：

```
mymethod(self, param1, MyCythonType param2, param3=None) → SomeResultType 
```

问题是 MyCythonType 和 SomeResultType 都不是 HTML 文档中的超链接，这使得文档浏览起来有点不理想。

Sphinx 为文档开发人员提供了挂钩“autodoc-process-signature”事件的可能性，该事件可以动态操作签名。该方法应该返回一个`(signature, return_annotation)`元组。当修改 return_annotation 结果以插入诸如 `SomeResultType` 或 :class:SomeResultType 等内容时，它根本没有格式化，而是按原样出现在 HTML 文档中，没有链接，并且带有附加/附加到字符串的任何内容。

我可以看到 typed 参数可能必须被忽略，因为 Python 没有类似的东西，但是必须可以为返回类型获取到其类文档的超链接，但我没有想法。

在编写了一个小测试用例之后，这似乎也影响了 Python，而不仅仅是 Cython：

```
class Foo(object):
        def __init__(self):
                pass

        def get_bar(self):
                """
                get_bar(self) -> Bar     <- here you see 'Bar', it will not
                                            become a hyperlink, not even if
                                            enclosed in ``

                Get `Bar` from foo       <- here you see Bar again, it will
                                            become a hyperlink

                :returns: the bar
                """
                return Bar()

class Bar(object):
        def __init__(self):
                pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T09:58:47.890

而不是`:returns: the bar`你应该尝试`:class:`Bar``。

所以，像这样：

```
class Foo(object):
    def __init__(self):
            pass

    def get_bar(self):
            '''Get :class:`Bar` from :class:`Foo`

            :returns: the :class:`Bar`
            '''
            return Bar()

class Bar(object):
    def __init__(self):
            pass 
```

# mercurial - Mercurial：使用通用的 web.confg

> ID：13920176
> 
> 赞同：2
> 
> 时间：2012-12-17T18:46:12.060
> 
> 标签：mercurial, web-config

我们将 Mercurial 用于 .Net Mvc 应用程序。当我们合并我们的分支时，我们面临的问题是在 web.config 中我们有一个不同的连接字符串

例如

```
connectionString="data source=Dev1\MSSQLSERVER2012;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf; User ID=sa; Password=pass1 
```

第二个 web.config

```
connectionString="data source=Dev2\MSSQLSERVER2012;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf; User ID=sa; Password=pass2 
```

等等

我们如何在不一次又一次地编辑和重写配置的情况下合并我们的配置。只是忽略 web.config 文件没有帮助。Mercurial 是否有“忽略文件部分”选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-23T13:15:19.250

我有同样的情况：我想阻止传播的本地配置，但我希望能够推送和拉取相同的文件。我没有弄乱补丁，而是按如下方式进行：

假设常规发生在分支中`default`（可能有多个分支；这只是为了具体化）。

1.  更新到干净的最新版本`default`，没有配置状态。
2.  创建一个新分支，`local`. 在此分支中，将所有本地配置提交为一个或多个变更集。
3.  在 的顶端`local`，创建一个新的分支，`dev`。在这里开发您的新功能。

    你的历史现在看起来像这样：

    ```
    ...o--o      (default)
           \
            L--L    (local)
                \
                 d--d--d  (dev) 
    ```

4.  当您准备好推送时，将整个`dev`分支重新定位到`default`：

    ```
    hg rebase --source "min(branch('dev'))" --dest default --detach 
    ```

    如果您的功能有自己想要保留的分支名称，请添加`--keepbranches`到`rebase`选项中。之前的树变成：

    ```
    ...o--o--d--d--d   (default)
           \
            L--L    (local) 
    ```

5.  您现在可以发布新功能，`push -r default`而无需拖动本地修订。（永远不要从`local` *into* `default`合并；反之亦然）。如果你在推送时忘记说`-r default`，没问题：你的推送被拒绝，因为它会添加一个新的头部。

6.  仍在开发服务器上，将重新定位的 rev 合并为`local`：

    ```
    ...o--o--d--d--d   (default)
           \        \
            L--L-----N    (local) 
    ```

7.  您现在可以`dev`在 之上创建一个新分支`local`，并继续开发。

这样我的本地配置就在源代码控制下；如果它与新功能冲突，我可以像任何其他合并一样解决它。如果出现问题，我可以更新回*配置*的旧版本。

我的案例还涉及在修订管理下配置的克隆。[您可以在此答案](https://stackoverflow.com/a/9988934/699305)中看到完整的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T18:02:05.403

使用[MQ](http://mercurial.selenic.com/wiki/MqExtension)并创建（一个或两个）补丁，将*两个分支的相同、通用的*vanilla web.config 转换为特定于分支的状态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:09:20.123

不是 Mercurial 答案，但您不能更改连接字符串来引用`localhost`而不是`Dev1`and`Dev2`吗？您还需要更改为 Windows 身份验证，以便您不需要在配置文件中设置密码。

这就是我们在团队中的做法，我们从来没有遇到任何问题。

# asp.net-mvc - RenderSection 脚本未显示在 Head Tag 中

> ID：13920177
> 
> 赞同：2
> 
> 时间：2012-12-17T18:46:14.900
> 
> 标签：asp.net-mvc, asp.net-mvc-4, razor

我对以下内容有疑问。我有一个包含网站主要布局的母版页。然后我有一个特定的视图，它使用母版页作为布局，但添加了如下脚本：

_Masterpage.cshtml

```
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
        @RenderSection("head", required: false)
    </head>
    <body>
        <header> .... 
```

_Register.cshtml

```
@{
    Layout = "_Master.cshtml";
}

@section head
{
    @Scripts.Render("~/bundles/jqueryval");
    @Styles.Render("~/Content/themes/base/css");
}

<div id="body">
    <div data-role="page">
        @RenderBody()
    </div>
</div> 
```

现在包含表单数据的视图使用了_Register.cshtml，但是当RegisterController 中的索引返回视图时（如下所示），_Register.cshtml 中的脚本和样式在 Head 标记中的任何位置都找不到。

```
public ActionResult Index()
{
    return View();
} 
```

任何人都可以帮助我吗？为了在 head 标签中获取这些脚本/样式，我缺少什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:13:03.017

部分在局部视图中不起作用，这是设计使然。您可以使用一些自定义助手 -[使用编辑器/显示模板中的部分](https://stackoverflow.com/questions/5433531/using-sections-in-editor-display-templates/5433722#5433722)- 来实现类似的行为，但老实说，包含必要的脚本是视图的责任，而不是部分的责任。我建议您使用主视图的 @scripts 部分来做到这一点，而不是让部分担心脚本

# php - PHP 数据库变量

> ID：13920180
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:46:29.370
> 
> 标签：php, mysql, database

我正在尝试通过 PHP 变量插入记录

```
 <html>
 <head>
<title>Welcome to PHP Products</title>
 </head>
 <body>
 <?php
$txt1=$_POST["product_form_no"];
$txt2=$_POST["product_form_name"];
$txt3=$_POST["product_form_desc"];

$con = mysql_connect("localhost:3306","root","INDIA");
if (!$con)
{
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("sample", $con);

mysql_query("INSERT INTO `sample`.`product` (`product_no`, `product_name`, `product_desc`, `created_DT`) VALUES 
(echo $txt1,echo $txt2,echo $txt3, CURRENT_TIMESTAMP);");

mysql_close($con);

  ?> 

<h1>The Entered Product</h1>

<p>Product No</p><?php echo $txt1 ?>
<p>Product Name</p><?php echo $txt2 ?>
<p>Product Desc</p><?php echo $txt3 ?>

  </body>
  </html> 
```

不幸的是，它没有通过 mysql_query 中的变量插入。它也没有给出一些错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:50:10.107

1.  您不会`echo`在查询中使用变量。
2.  请，请，请开始阅读 SQL 注入。你的代码对它很开放。

查询应该是这样的：

```
mysql_query("
    INSERT INTO `sample`.`product` (`product_no`, `product_name`, `product_desc`, `created_DT`)
    VALUES ('" . mysql_real_escape_string($txt1) . "', '" . mysql_real_escape_string($txt2) . "', '" . mysql_real_escape_string($txt3) . "', CURRENT_TIMESTAMP)
"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T18:48:50.117

使用这种方式

```
//First escape your variable values before using into query
$txt1=mysql_real_escape_string($_POST["product_form_no"]);
$txt2=mysql_real_escape_string($_POST["product_form_name"]);
$txt3=mysql_real_escape_string($_POST["product_form_desc"]);

mysql_query("INSERT INTO `sample`.`product` (`product_no`, `product_name`, `product_desc`, `created_DT`) VALUES 
('$txt1','$txt2','$txt3', CURRENT_TIMESTAMP());"); 
```

建议：

1.学会防止MySQL注入：[好链接](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

2.不推荐使用Mysql扩展来编写新代码。相反，应该使用 mysqli 或 PDO_MySQL 扩展。更多阅读：[PHP 手册](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

3.[变量解析](http://www.php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:52:40.067

一定要转义你的输入以使 SQL 更安全，回声不应该在那里。我也认为 CURRENT_TIMESTAMP 应该是一个函数并且有括号。

```
<html>
 <head>
<title>Welcome to PHP Products</title>
 </head>
 <body>
 <?php
$txt1=mysql_real_escape_string($_POST["product_form_no"]);
$txt2=mysql_real_escape_string($_POST["product_form_name"]);
$txt3=mysql_real_escape_string($_POST["product_form_desc"]);

$con = mysql_connect("localhost:3306","root","INDIA");
if (!$con)
{
  die('Could not connect: ' . mysql_error());
}

mysql_select_db("sample", $con);

mysql_query("INSERT INTO `sample`.`product` (`product_no`, `product_name`, `product_desc`, `created_DT`) VALUES 
('$txt1','$txt2','$txt3', CURRENT_TIMESTAMP())");

mysql_close($con);

  ?> 

<h1>The Entered Product</h1>

<p>Product No</p><?php echo $txt1 ?>
<p>Product Name</p><?php echo $txt2 ?>
<p>Product Desc</p><?php echo $txt3 ?>

  </body>
  </html> 
```

# c# - 如果其他方法正在运行，如何确保某个方法不会被执行？

> ID：13920181
> 
> 赞同：1
> 
> 时间：2012-12-17T18:46:29.353
> 
> 标签：c#, thread-safety

假设我有两种方法-

```
getCurrentValue(int valueID)
updateValues(int changedComponentID) 
```

这两个方法由不同的线程在同一个对象上独立调用。

`getCurrentValue()`只需对当前 valueID 进行数据库查找。

” `Values`” 改变如果他们相应的`components`改变。该`updateValues()`方法更新那些依赖于刚刚更改的组件的值，即`changedComponentID`. 这是一个数据库操作，需要时间。

虽然此更新操作正在进行，但我不想通过从数据库中进行查找来返回过时的值，但我想等到更新方法完成。同时，我不希望两个更新操作同时发生，或者在读取进行时发生更新。

所以，我正在考虑这样做 -

```
[MethodImpl(MethodImplOptions.Synchronized)]
public int getCurrentValue(int valueID)
     {
        while(updateOperationIsGoingOn)
          {
             // do nothing  
          }
        readOperationIsGoingOn = true;

        value = // read value from DB

        readOperationIsGoingOn = false; 
        return value;
     }

[MethodImpl(MethodImplOptions.Synchronized)]
public void updateValues(int componentID)
     {
         while(readOperationIsGoingOn)
          {
             // do nothing
          }
         updateOperationIsGoingOn = true;

         // update values in DB

         updateOperationIsGoingOn = false;
     } 
```

我不确定这是否是正确的做法。有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:51:12.370

在这两种方法之外创建一个静态对象。然后对该对象使用锁定语句；当一种方法访问受保护的代码时，另一种方法将等待锁释放。

```
private static object _lockObj = new object();

public int getCurrentValue(int valueID)
     {
        object value;

        lock(_lockObj)
          {
           value = // read value from DB
          }
        return value;
     }

public void updateValues(int componentID)
     {
         lock(_lockObj)
          {
         // update values in DB

          }
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:51:39.203

这不是正确的方法。像这样你正在做一个“主动等待”，有效地阻塞你的 CPU。

您应该改用锁：

```
static object _syncRoot = new object();
public int getCurrentValue(int valueID)
{
    lock(_syncRoot)
    {
        value = // read value from DB
    }
}

public void updateValues(int componentID)
{
    lock(_syncRoot)
    {
        // update values in DB
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:57:04.660

```
private static readonly object _lock = new object();

public int getCurrentValue(int valueID)
{
    try
    {
        Monitor.Enter(_lock);
        value = // read value from DB
        return value;
    }
    finally
    {
        Monitor.Exit(_lock);
    }
}

public void updateValues(int componentID)
{
    try
    {
        Monitor.Enter(_lock);
        // update values in DB
    }
    finally
    {
        Monitor.Exit(_lock);
    }
} 
```

# java - 扫描可用的 wifi，检测特定的最强 Wifi SSID 以启动 XML 活动布局

> ID：13920185
> 
> 赞同：1
> 
> 时间：2012-12-17T18:47:01.157
> 
> 标签：java, android, networking, wifi

我需要通过扫描可用的最强 Wifi 来定位我在建筑物中的当前位置以启动活动。我只想在那栋楼里找到 3 个地方。因此，如果我目前在这些位置中的任何一个附近，我将单击一个按钮来扫描最强的可用 Wifi 以启动一项活动。

1.  我需要扫描建筑物中可用的 Wifi。
2.  获取 3 个最强的信号。
3.  然后检测这 3 个最强信号的 SSID 是否与我要定位的特定 SSID 相同。
4.  如果我的 SSID 是最强的 3 个信号之一，那么应用程序将启动一个 xml 布局活动，

到目前为止，我已经有了扫描最强可用 Wifi 的编码。但是当检测到最强的特定 Wifi SSID 时，我不知道如何启动活动。我不需要有关 Wifi 的信息，只需启动包含我的信息的活动布局。

目前我正在使用以下代码来扫描我从[这里](http://marakana.com/forums/android/examples/40.html)获得的最强 Wifi 信号：

WiFiDemo.java

```
public class WiFiDemo extends Activity implements OnClickListener {
private static final String TAG = "WiFiDemo";
WifiManager wifi;
BroadcastReceiver receiver;

TextView textStatus;
Button buttonScan;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Setup UI
    textStatus = (TextView) findViewById(R.id.textStatus);
    buttonScan = (Button) findViewById(R.id.buttonScan);
    buttonScan.setOnClickListener(this);

    // Setup WiFi
    wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);

    // Get WiFi status
    WifiInfo info = wifi.getConnectionInfo();
    textStatus.append("\n\nWiFi Status: " + info.toString());

    // List available networks
    List<WifiConfiguration> configs = wifi.getConfiguredNetworks();
    for (WifiConfiguration config : configs) {
        textStatus.append("\n\n" + config.toString());
    }

    // Register Broadcast Receiver
    if (receiver == null)
        receiver = new WiFiScanReceiver(this);

    registerReceiver(receiver, new IntentFilter(
            WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
    Log.d(TAG, "onCreate()");
}

@Override
public void onStop() {
    unregisterReceiver(receiver);
}

public void onClick(View view) {
    Toast.makeText(this, "On Click Clicked. Toast to that!!!",
            Toast.LENGTH_LONG).show();

    if (view.getId() == R.id.buttonScan) {
        Log.d(TAG, "onClick() wifi.startScan()");
        wifi.startScan();
    }
} } 
```

WiFiScanReceiver.java

```
 public class WiFiScanReceiver extends BroadcastReceiver {
        private static final String TAG = "WiFiScanReceiver";
        WiFiDemo wifiDemo;

      public WiFiScanReceiver(WiFiDemo wifiDemo) {
        super();
        this.wifiDemo = wifiDemo;
      }

      @Override
      public void onReceive(Context c, Intent intent) {
        List<ScanResult> results = wifiDemo.wifi.getScanResults();
        ScanResult bestSignal = null;
        for (ScanResult result : results) {
          if (bestSignal == null
              || WifiManager.compareSignalLevel(bestSignal.level, result.level) < 0)
            bestSignal = result;
        }

        String message = String.format("%s networks found. %s is the strongest.",
            results.size(), bestSignal.SSID);
        Toast.makeText(wifiDemo, message, Toast.LENGTH_LONG).show();

        Log.d(TAG, "onReceive() message: " + message);
      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:25:30.343

您只需要从 onReceive 开始您的活动。除非我不理解您的问题，否则您只需要启动您的活动即可。由于您在接收器的 onReceive 上有上下文，因此您只需要 startActivity()

[在 onReceive BroadcastReceiver 内启动 Activity](https://stackoverflow.com/questions/6468463/start-activity-inside-onreceive-broadcastreceiver)

```
 @Override
    public void onReceive(Context context, Intent intent) {
        //start activity
        Intent i = new Intent();
        i.setClassName("com.test", "com.test.MainActivity");
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(i);
    } 
```

不要忘记在清单中为它定义一个适当的过滤器。 [http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

# wpf - 样式化的 WPF DatePicker 在焦点丢失时丢失格式，在程序更新时重新获得

> ID：13920193
> 
> 赞同：0
> 
> 时间：2012-12-17T18:47:37.783
> 
> 标签：wpf, wpf-controls

我对 WPF DatePicker 感到奇怪，我在一个可从[此处下载的项目中演示了它。](http://dl.dropbox.com/u/25030054/DatePickerIssue.zip)

我需要一个样式看起来像普通文本的日期选择器，没有按钮或轮廓，当按下单独的按钮时弹出日历，让用户编辑文本，并以我们想要的格式显示日期 - dd MMM yyyy .

我几乎可以工作，但是当失去焦点时，日期格式会恢复 dd/mm/yyyy 或 mm/dd/yyyy，每次焦点丢失时交替（即单击日期并在不编辑的情况下跳出），直到控制next 完全独立于代码更新，按下“重写”即可。

任何人都可以阐明发生了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:59:15.730

`DatePicker`控件处理 的事件`LostFocus`，`DatePickerTextBox`将文本解析为`DateTime`，`DateTime`使用当前文化中的长日期或短日期格式格式化解析的内容，然后更新文本。这将覆盖 text 属性上的绑定，因此不会使用您的自定义格式。

缺少编写自己的`DatePicker`控件，似乎唯一的解决方案是更改以下短日期模式`CurrentCulture`：[https ://stackoverflow.com/a/3869415/124386](https://stackoverflow.com/a/3869415/124386)

# android - 警报接收器和广播接收器

> ID：13920195
> 
> 赞同：0
> 
> 时间：2012-12-17T18:47:44.963
> 
> 标签：android

我写了一个扩展 BroadcastReceiver 的类：启动完成后应该每天启动 2 个警报，但似乎没有运行。很多小时要检查，但我不明白问题出在哪里。如果代码有问题？

```
public class AlarmReceiver extends BroadcastReceiver {

    private final String BOOT_COMPLETED_ACTION =
                           "android.intent.action.BOOT_COMPLETED";
    final String not1[] = new String[11];
    int not1end = 10;
    int x;

    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(BOOT_COMPLETED_ACTION)) {
            Intent myIntent = new Intent(context, Notify.class);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(context,
                    0, myIntent, 0);
            not1[0] = "one";
            not1[1] = "two";
            not1[2] = "three";
            // ...
            rando();
            String ns = Context.NOTIFICATION_SERVICE;
            NotificationManager mNotificationManager = 
                    (NotificationManager) context.getSystemService(ns);
            int icon = R.drawable.ic_launcher2;
            CharSequence tickerText = not1[x];
            long when = System.currentTimeMillis();
            Notification notification=new Notification(icon, tickerText, when);
            notification.defaults |= Notification.DEFAULT_SOUND;
            notification.defaults |= Notification.DEFAULT_VIBRATE;
            CharSequence contentTitle = "title";
            CharSequence contentText = not1[x];
            Intent notificationIntent = new Intent();
            Calendar cal1 = Calendar.getInstance();
            cal1.set(Calendar.HOUR_OF_DAY, 05); // midday
            cal1.set(Calendar.MINUTE, 45);
            cal1.set(Calendar.SECOND, 00);
            Calendar cal2 = Calendar.getInstance();
            cal2.set(Calendar.HOUR_OF_DAY, 17);// 8pm for example
            cal2.set(Calendar.MINUTE, 30);
            cal2.set(Calendar.SECOND, 00);
        }
    }

    private void rando() {
        Random generator = new Random();
        int random = generator.nextInt(not1end);
        boolean flag = generator.nextBoolean();
        x = random;
    }
} 
```

显现：

```
 <receiver 
    android:name=".AlarmReceiver"
    android:exported="false" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:01:33.383

如果你想接收`BOOT_COMPLETE`事件，你需要添加一个 Intent-Filter：

```
<receiver 
    android:name=".AlarmReceiver"
    android:exported="false" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver> 
```

不要忘记适当的许可：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /> 
```

# google-app-engine - GAE 数据存储管理 - 网页不可用

> ID：13920196
> 
> 赞同：2
> 
> 时间：2012-12-17T18:47:50.060
> 
> 标签：google-app-engine, google-cloud-datastore, database-administration, administration

我正在查看应用引擎数据存储的实验性[备份/恢复功能](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin)，因此我按照说明启用了“数据存储管理”，如链接中所述。

这样做之后，我在 chrome上看到[“此网页不可用”](http://i.imgur.com/DcLSG.png) ，在 Firefox上看到“[未找到服务器” ，而不是在仪表板中看到 Datastore 管理控件。](http://i.imgur.com/lqfZU.png)

我知道这是实验性的，但对于此功能的进展情况，应用引擎团队的任何帮助仍将不胜感激:)

**更新**：我在另一个应用程序（具有空数据存储）上尝试了此操作，并且数据存储管理页面正常显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T20:17:06.977

需要检查的几件事：

*   您是否在使用新的高可用性数据存储？文档未指定，但此实验性功能可能与[已弃用的主/从数据存储](https://developers.google.com/appengine/docs/adminconsole/migration)不兼容。

*   如果您的应用程序使用 Java，则必须[部署非默认 Python 应用程序](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin#Backup_And_Restore)才能使用备份/恢复功能（在页面上搜索“Java 开发人员说明”）。

*   您的数据存储有多大？在非常大的数据存储上启用该功能可能需要一段时间。

*   您的应用名称有多长？您看到的错误与 DNS 有关。Datastore Admin 功能似乎要求：

    ah-builtin-python-bundle-dot-latest-dot-[您的应用程序名称].appspot.com

    在一个点上。由于该子域名的长度，如果您的应用名称长度超过大约 23 个字符，您将收到 DNS 错误，因为 DNS 每个域部分限制为 63 个字符：

    [http://en.wikipedia.org/wiki/Domain_Name_System#Domain_name_syntax](http://en.wikipedia.org/wiki/Domain_Name_System#Domain_name_syntax)

    在我有限的测试中，我可以通过将 ah-builtin-python-bundle... 域名直接添加到系统的 etc/host 文件中来获得更长的域名：

    [http://en.wikipedia.org/wiki/Hosts_](http://en.wikipedia.org/wiki/Hosts_(file) (文件)

# windows-8 - 必应地图不适用于 Windows 应用商店应用

> ID：13920200
> 
> 赞同：4
> 
> 时间：2012-12-17T18:48:03.123
> 
> 标签：windows-8, bing-maps

嗨，我正在使用 Bing Map SDK 开发一个 Windows 商店应用程序，但该应用程序不显示地图，而是显示停止屏幕，就像在我将 HomeRegion 更新为 US 并将 Culture 更新为 en-US 之后它应该针对不受支持的区域一样。

```
<Maps:Map Credentials="<key>" Margin="0,-10,0,10" HomeRegion="US" Culture="en-US" />
    </Grid> 
```

有人能告诉我我在这里想念什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T03:04:40.083

在 XAML 中执行此操作

```
HomeRegion="US" 
```

或在代码中

```
MyMap.HomeRegion = "US"; 
```

[**以下是 Bing Map 中支持的区域列表。**](http://msdn.microsoft.com/en-us/library/jj670541.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:22:40.163

尝试删除 HomeRegion 和 Culture 属性。我根据[http://timheuer.com/blog/archive/2012/03/06/bing-maps-for-winrt-xaml.aspx](http://timheuer.com/blog/archive/2012/03/06/bing-maps-for-winrt-xaml.aspx)在我的应用程序中使用地图并且可以正常工作

# ios - Xcode 管理器中的重复文件？

> ID：13920204
> 
> 赞同：3
> 
> 时间：2012-12-17T18:48:28.657
> 
> 标签：ios, xcode, file-management

我发现我在 Xcode 管理器中得到了重复的文件。他们似乎在finder中指向同一个文件。我的第一个想法是，这是在我的一所大学错误地修复源代码控制中的冲突时创建的。我不知道如何解决这个问题。当我尝试简单地删除重复的 Xcode 崩溃时。我已经向苹果提交了这个购买。但是，我想同时解决这个问题。

谢谢你。

![Xcode 管理器](../Images/d6e7f15660677e32115f5efd19db309b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:07:47.760

我在您的列表中没有看到任何重复项。每个类都带有一个 .h 和一个 .m 文件（也有例外）。长话短说，您发布的图像没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:24:22.207

选择其中一个`CMPortfolio.h`文件和其中一个`CMPortfolio.m`文件（而不是引用之一），然后按删除键。当询问您是要删除参考还是实际将文件移动到废纸篓时，请选择`Remove References`。这应该在不触及磁盘上的实际文件的情况下删除重复的引用（这允许对每个文件的剩余引用有效）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-21T15:14:55.643

我有同样的问题。这对我有帮助：我将所有重复的文件移动到 Finder 的其他文件夹中 -> 项目中的所有文件都是红色的。然后我只是从项目中删除了文件，复制了项目文件夹中的文件并再次将它们添加到项目中。

# iphone - iOS - 测试视图控制器

> ID：13920206
> 
> 赞同：1
> 
> 时间：2012-12-17T18:48:36.840
> 
> 标签：iphone, ios, unit-testing, uiviewcontroller, ios5

我遇到了一个非常奇怪且无法解释的问题，就像我整天都在尝试解决它而没有任何结果。

按照文档步骤，我已经为我的 iOS 项目设置了一个测试目标。我正在使用 Xcode 版本 4.5.2 (4G2008a)。我也在用猕猴桃。除了使用 xib 加载视图控制器的视图之外，每个测试都运行良好。

视图控制器是一个简单的 UIViewController，带有一个 MKMapView、一个按钮和一个搜索栏，所有这些都正确地连接到所有者的 IBOutlets。

在测试中，我正在写类似的东西：

```
__block MapViewController *mapVC = [[MapViewController alloc] initWithNibName:@"MapViewController"
                                              bundle:[NSBundle bundleWithIdentifier:@"com.myorg.MyAppTest"]];
it(@"Loads the view", ^{
   [mapVC loadView];
}); 
```

在执行测试时（在 iPhone Simulator 5.0 上），我在控制台中得到了一堆：

> 错误：系统映像表尚未初始化。在调用 UIApplicationMain() 之前不要请求图像或设置 UI。

之后我几乎总是得到这个错误

> [__NSCFType pointSize]：无法识别的选择器发送到实例 0x19cb970

在 iPhone 6 Simulator 上，我最初收到此错误

> 未知设备类型。根据屏幕大小使用 UIUserInterfaceIdiomPhone

紧随其后的是

> -[__NSCFType screenFontWithRenderingMode:]：无法识别的选择器发送到实例 0xeba1540

我希望有人能帮助我，这件事让我发疯。

# java - 写入标准输出与写入文件

> ID：13920208
> 
> 赞同：1
> 
> 时间：2012-12-17T18:48:44.163
> 
> 标签：java, linux, io

这类似于：

[打印到控制台与写入文件（速度）](https://stackoverflow.com/questions/6338812/printing-to-the-console-vs-writing-to-a-file-speed)

我很困惑，因为有两个相互矛盾的答案。我写了一个简单的java程序

```
 for(int i=0; i<1000000; i++){
       System.out.println(i);
 } 
```

并运行它`/usr/bin/time -v java test`以测量输出到标准输出的时间，然后我尝试了`/usr/bin/time -v java test > file`和`/usr/bin/time -v java > /dev/null`. 写入控制台最慢（10 秒），然后`/dev/null`是文件（6 秒），最快（2 秒）。为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T18:53:55.797

因为每次写入内容到控制台都需要刷新屏幕，这需要时间。

写入文件需要在磁盘上写入字节，这需要时间，但比刷新屏幕的时间要少。

并且写入`/dev/null`不会在任何地方写任何东西，这需要更少的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:20:36.310

System.out.println 的另一个问题是 System.out 默认处于自动刷新模式，println 实际上会关闭缓冲。试试这个

```
 PrintWriter a = new PrintWriter(System.out, false);
    for (int i = 0; i < 1000000; i++) {
        a.println(i);
    }
    a.flush(); 
```

你会看到输出到文件的速度提高了十倍。

# xslt - 如何根据纯文本文件的内容有选择地包含来自一个或另一个 xml 文件的元素？

> ID：13920209
> 
> 赞同：2
> 
> 时间：2012-12-17T18:48:46.677
> 
> 标签：xslt, xslt-2.0, saxon

我有两个源 xml 文件，我需要构建一个新的 xml 文件，其中包含为一个或其他文件选择的元素，具体取决于它们的“名称”是否包含在纯文本文件中。

xml文件一：

```
<data name="name1">
  <value>abc1</value>
</data>
<data name="name2">
  <value>abc2</value>
</data>
<data name="name3">
  <value>abc3</value>
</data> 
```

xml文件b：

```
<data name="name1">
  <value>xyz1</value>
</data>
<data name="name2">
  <value>xyz2</value>
</data>
<data name="name3">
  <value>xyz3</value>
</data> 
```

文本文件：

```
name1
name3 
```

所需的输出：

```
<data name="name1">
  <value>abc1</value>
</data>
<data name="name2">
  <value>xyz2</value>        <---- note this element is from file 'b'
</data>
<data name="name3">
  <value>abc3</value>
</data> 
```

因此名称为“name1”和“name3”的元素来自“xml 文件 a”，因为它们列在文本文件中，但“name2”来自“xml 文件 b”，因为它不是。

实际名称不是“name1”等，而是任意字符串标识符，但它们在文件中是唯一的。

是否可以使用 XSLT 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:46:01.323

**这种转变**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vNames" select=
    "tokenize(unparsed-text('file:///c:/temp/delete/Names.txt'), '\s')"/>

    <xsl:variable name="vDoc1" select="document('file:///c:/temp/delete/FileA.xml')"/>
    <xsl:variable name="vDoc2" select="document('file:///c:/temp/delete/FileB.xml')"/>

 <xsl:template match="/">
     <t>
       <xsl:sequence select=
        "$vDoc1/*/*[@name = $vNames],
         $vDoc2/*/*[not(@name = $vNames)]
        "/>
     </t>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于任何 XML 文档（未使用）并具有这两个文件时**：

**c:/temp/delete/FileA.xml**：

```
<t>
    <data name="name1">
        <value>abc1</value>
    </data>
    <data name="name2">
        <value>abc2</value>
    </data>
    <data name="name3">
        <value>abc3</value>
    </data>
</t> 
```

**c:/temp/delete/FileB.xml**：

```
<t>
    <data name="name1">
        <value>xyz1</value>
    </data>
    <data name="name2">
        <value>xyz2</value>
    </data>
    <data name="name3">
        <value>xyz3</value>
    </data>
</t> 
```

**c:/temp/delete/Names.txt**：

```
name1
name3 
```

**产生想要的正确结果：**

```
<t>
   <data name="name1">
            <value>abc1</value>
      </data>
   <data name="name3">
            <value>abc3</value>
      </data>
   <data name="name2">
            <value>xyz2</value>
      </data>
</t> 
```

**说明**：

正确使用标准 XSLT 函数：（**[`unparsed-text()`](http://www.w3.org/TR/xslt20/#function-unparsed-text)**仅限 2.0 及更高版本）和**[`document()`](http://www.w3.org/TR/1999/REC-xslt-19991116#function-document)**标准 XPath 2.0 函数**[`tokenize()`](http://www.w3.org/TR/xpath-functions/#func-tokenize)**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T19:01:24.290

虽然 XSLT 可以输出纯文本，但输入文档应该是 XML。但是，可以在转换中混入 Java。就个人而言，我会添加一些 java 函数来打开文件并以类似**grep**的方式处理它。

[这个关于将 Java 函数添​​加到 XSLT 样式表](http://cafeconleche.org/books/xmljava/chapters/ch17s03.html)的一般教程将是一个好的开始。它的优点是提及一些更常见的 XSLT 处理引擎的操作方法。

[这是关于SO的相关讨论](https://stackoverflow.com/questions/9925483/calling-java-from-xsl-saxon)

# python - 无法使用 urllib2 将内容类型设置为 application/json

> ID：13920211
> 
> 赞同：13
> 
> 时间：2012-12-17T18:48:49.403
> 
> 标签：python, json, post, urllib2

这个小宝贝：

```
import urllib2
import simplejson as json

opener = urllib2.build_opener()
opener.addheaders.append(('Content-Type', 'application/json'))
response = opener.open('http://localhost:8000',json.dumps({'a': 'b'})) 
```

产生以下请求（如 ngrep 所示）：

```
sudo ngrep -q -d lo '^POST .* localhost:8000'

T 127.0.0.1:51668 -> 127.0.0.1:8000 [AP]
  POST / HTTP/1.1..Accept-Encoding: identity..Content-Length: 10..Host: localhost:8000..Content-Type: application/x-www-form-urlencoded..Connection: close..User-Agent:
   Python-urllib/2.7....{"a": "b"} 
```

我不想那样`Content-Type: application/x-www-form-urlencoded`。我明确地说我想要`('Content-Type', 'application/json')`

这里发生了什么？！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T19:03:36.117

如果你想设置自定义标题，你应该使用一个`Request`对象：

```
import urllib2
import simplejson as json

opener = urllib2.build_opener()
req = urllib2.Request('http://localhost:8000', data=json.dumps({'a': 'b'}),
      headers={'Content-Type': 'application/json'})
response = opener.open(req) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-31T11:55:56.423

我被同样的东西击中并想出了这个小宝石：

```
import urllib2
import simplejson as json

class ChangeTypeProcessor(BaseHandler):
    def http_request(self, req):
        req.unredirected_hdrs["Content-type"] = "application/json"
        return req

opener = urllib2.build_opener()
self.opener.add_handler(ChangeTypeProcessor())
response = opener.open('http://localhost:8000',json.dumps({'a': 'b'})) 
```

您只需为 HTTP 请求添加一个处理程序，以替换`OpenerDirector`之前添加的标头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-14T07:23:05.443

Python版本：`Python 2.7.15` 我发现在`urllib2.py:1145`：

```
 for name, value in self.parent.addheaders:
            name = name.capitalize()
            if not request.has_header(name):
                request.add_unredirected_header(name, value)

...
    def has_header(self, header_name):
        return (header_name in self.headers or
                header_name in self.unredirected_hdrs) 
```

否则，`application/x-www-form-urlencoded`一直在 unredirected_hdrs 中，不会被覆盖

你可以像这样解决

```
 import urllib.request
from http.cookiejar import CookieJar

import json

url = 'http://www.baidu.com'
req_dict = {'k': 'v'}

cj = CookieJar()
handler = urllib.request.HTTPCookieProcessor(cj)
opener = urllib.request.build_opener(handler)

req_json = json.dumps(req_dict)
req_post = req_json.encode('utf-8')
headers = {}
#headers['Content-Type'] = 'application/json'
req = urllib.request.Request(url=url, data=req_post, headers=headers)

#urllib.request.install_opener(opener)
#res = urllib.request.urlopen(req)
# or
res = opener.open(req)

res = res.read().decode('utf-8') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-08-28T08:17:32.747

问题是标题名称的大写。你应该使用`Content-type`而不是`Content-Type`.

# wpf - 使模型与视图模型保持同步

> ID：13920212
> 
> 赞同：3
> 
> 时间：2012-12-17T18:48:55.397
> 
> 标签：wpf, mvvm, model, viewmodel

我正在创建一个聊天应用程序，它也将具有文件传输的能力。我正在尝试使用 Prism 使用 MVVM 模式来设计它。

我的这个应用程序的模型，或者至少这个模块（应用程序此时只有一个模块，并且它可能是唯一的模块）是一个 ChatManager 类，负责托管服务器，加入服务器并保存所有状态聊天会话的信息。它可能是连接到另一个服务器的客户端，或者它可能既是客户端又是服务器，因为任何主持聊天的人也将是他自己服务器的客户端。

在我的应用程序中，程序的每个不同区域、消息区域、具有用户列表的区域以及用户键入消息的区域都有不同的视图和视图模型。视图对视图模型一无所知，视图模型对视图一无所知。视图模型非常简单，几乎不包含任何逻辑。

所有逻辑都位于我的 ChatController 类中，该类基本上控制应用程序的流程。它负责创建所有视图、所有模型，将适当的视图模型分配为视图的数据上下文，并在适当的时间将每个视图注入 shell。它还负责从模型中将实际数据分配给视图模型。

我遇到的问题是如何干净地保持 viewmodel ObservableCollections 与模型中包含的列表保持同步。例如，在模型中，我有一个已连接用户的列表。每当该列表发生变化时，例如当用户连接或断开连接时，我需要在处理用户列表的视图模型中更新用户的 ObservableCollection。

我认为我需要完成此操作的方式是使用事件。因此，我创建了每当用户连接、用户断开连接时在模型中触发的事件。当然，当服务器向所有用户发送消息以及模型实际执行的所有其他操作时，我也必须有事件。

我想我的问题是，这是一个好方法吗？我是否应该将模型的用户集合更改为 ObservableCollection 并完全避免事件，只需将视图模型的集合分配给模型集合？

我越是尝试构建这个应用程序，它就越让我感到困惑。现在我的控制器拥有的方法数量非常多，我什至还没有开始添加我想要的聊天程序的所有功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:02:24.890

我认为整个问题是多余的，因为最后一段是:)

ObservableCollection 是 System.Collections.ObjectModel 的一部分。它与任何特定的 UI 技术无关，因此我认为没有必要将其限制在视图模型中，而不是将其放在核心中并替换您的列表。

# excel - 根据一个单元格的值填充日期单元格？

> ID：13920214
> 
> 赞同：0
> 
> 时间：2012-12-17T18:49:00.120
> 
> 标签：excel, vba

我希望用户能够在单元格 D1 中输入年份（例如“2013”​​）并按下触发宏的按钮。此宏将自动为单元格 D2-O2（一年中每个月一个单元格）分配一个函数，将这些单元格转换为实际日期类型。

例如，单元格 D2 的值为`=DATE(2013, 1, 1)`，表示该单元格代表 2013 年 1 月 1 日。类似地，单元格 E2 的值为`=DATE(2013, 2, 1)`，F2 的值为 ，以此类推`=DATE(2013, 3, 1)`。

以下是我的伪代码，你能帮我把它转换成实际的 VBA 吗？

```
var myYear = the value of cell D1
cell D2 value is =DATE(2013,1,1)
cell E2 value is =DATE(2013,2,1)
cell F2 value is =DATE(2013,3,1)
cell G2 value is =DATE(2013,4,1)
cell H2 value is =DATE(2013,5,1)
cell I2 value is =DATE(2013,6,1)
cell J2 value is =DATE(2013,7,1)
cell K2 value is =DATE(2013,8,1)
cell L2 value is =DATE(2013,9,1)
cell M2 value is =DATE(2013,10,1)
cell N2 value is =DATE(2013,11,1)
cell O2 value is =DATE(2013,12,1) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:55:33.270

试试这个：

```
Sub FillYear()
    YearNum = Cells(1, 4)  ' Cell D1
    For MonthNum = 1 To 12
       Cells(2, MonthNum + 3).Value = DateSerial(YearNum, MonthNum, 1)
    Next
End Sub 
```

**更新：**

如果您希望日期值是一个公式，以便在用户更改年份时更改日期，请将内部的行更改`For Loop`为：

```
Cells(2, MonthNum + 3).Formula = "=Date(R1C4," & MonthNum & ", 1)" 
```

# windows-8 - Monogame 纹理加载 NullReferenceException

> ID：13920220
> 
> 赞同：0
> 
> 时间：2012-12-17T18:49:13.433
> 
> 标签：windows-8, xna, monogame

我有一个工作游戏，我正在加载来自不同类的所有纹理。它适用于 PC 版本。

现在，我正在尝试使用 Monogame 将其移植到 win8。

如果我使用 .xnb 文件从 Game1.cs 加载纹理，它绝对可以正常工作。但是，当我尝试使用不同的类加载相同的纹理时，它不会。它给了我一个`NullReferenceException`错误

```
GraphicsDevice.Clear(Color.Cornflowerblue); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:13:46.670

饥饿编码器：

我不知道你是如何从类中加载纹理的，但是，现在 MonoGame 还没有像你在为 PC 构建和 XNA 游戏中提供的内容管道（他们正在研究它），因此，您不能以相同的方式添加图形文件。

在构建 Windows 8 XNA 游戏的演练中，我通过将 Content.Load<> 与 Texture 类型和位置传递给类中的 Initialize 函数，从我自己的 Player 类创建我的 Shooter 玩家图形：

player.Initialize(Content.Load("Graphics\player"), playerPosition);

请注意，.xnb 文件位于我项目中的 Graphics 文件夹中。

在我的背景中，我还通过将完整的内容管理器传递给我的背景类的 Initialize 方法，从我的背景类创建了一个视差背景。

bgLayer1 = 新的 ParallaxingBackground(); bgLayer1.Initialize(Content, "Graphics\bgLayer1", GraphicsDevice.Viewport.Width, -1);

这两个示例都适用于我的项目/游戏。

如果您有兴趣已将播放器代码示例作为 Windows 8 上 MonoGame 的博客教程系列的一部分发布。当我完成背景代码时，我还将添加背景的完整代码示例。希望这可以帮助。 [http://blogs.msdn.com/tarawalker](http://blogs.msdn.com/tarawalker)

# android - Layout with 2 LinearLayout 每个屏幕宽度

> ID：13920222
> 
> 赞同：0
> 
> 时间：2012-12-17T18:49:21.360
> 
> 标签：android, xml, android-ui

我正在尝试创建类似于片段允许我们做但没有片段的东西。

我正在尝试创建一个布局（相对或线性，我不知道要使用哪个以及如何制作它，我需要一些帮助）并在其中放置另一个 3 LinearLayout。

3个LinearLayouts中的每一个都应该有屏幕宽度，我试图用xml来制作它，没有代码，因为当我尝试使用代码来调整布局大小时，我遇到了很多麻烦，因为布局没有在onCreate上测量。

然后我会为大布局设置一个 touchListener 并创建类似于片段的东西。

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:30:35.963

> “我正在尝试创造一些类似于碎片允许我们做的东西，但没有碎片。”

片段有自己的生命周期，是“活动的模块化部分”。他们的大想法是您可以在不同的配置中重用活动的一部分。它们比嵌套布局（或具有您计划在其之间切换的触摸侦听器的视图，如 ViewSwitcher？）强大得多。我不会尝试重新创建片段，只是使用片段？

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

> “我正在尝试创建一个布局（相对或线性，我不知道使用哪个以及如何制作，我需要一些帮助）并在其中放置另一个 3 LinearLayout。”

我不确定我是否理解这个问题，但相对或线性布局都可以包含其他布局。一个简单的例子（注意，这不一定是一个有效的布局，它只是每个问题嵌套它们的一个例子）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#cccccc"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="ONE" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#dddddd"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TWO" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#696969"
        android:orientation="horizontal" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="THREE" />
    </LinearLayout>

</LinearLayout> 
```

这会在典型的窗口（活动）中创建以下内容：

![在此处输入图像描述](../Images/cff1661568f9b0dc3830737d52969342.png)

# ffmpeg - 使用 vbr @128 将 flv 转换为 mp3 的 ffmpeg 命令行

> ID：13920230
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:50:01.610
> 
> 标签：ffmpeg

我通过 FFmpeg 文档广泛搜索了谷歌和红色，希望有更多经验的人可以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-17T12:35:52.490

我认为您还没有足够努力地搜索：

*   [编码 VBR（可变比特率）mp3 音频](https://trac.ffmpeg.org/wiki/Encoding%20VBR%20%28Variable%20Bit%20Rate%29%20mp3%20audio)
*   [提示：编码 VBR（可变比特率）mp3 音频](http://ffmpeg.gusari.org/viewtopic.php?f=25&t=41)

按照第一个示例，您可以简单地执行以下操作：

```
ffmpeg -i input.flv -q:a 5 out.mp3 
```

# css - 圆角在框架中不起作用

> ID：13920234
> 
> 赞同：-2
> 
> 时间：2012-12-17T18:50:18.690
> 
> 标签：css

有没有办法在 IE 框架集中显示圆角？这是一个例子：

索引.html：

```
<html>
<head><title></title></head>
<frameset rows="*,64" style="margin:0; padding: 0;"  framespacing="0">
    <frame name="main" src="test.html" frameborder="0" border="0"  framespacing="0" marginwidth="0" />
    <frame name="header" scrolling="no" noresize target="main" src="template.html"  framespacing="0" />
</frameset>
</html> 
```

和 test.html：

```
<html>
<head><title></title>

<style>
.listing td {
    -moz-border-radius: 14px;
    border-radius: 14px;

}
</style>
</head>
<body>
<table class="listing">
<tr>
<td>rounded corner not work in frame!</td>
</tr>
</table>
</body>
</html> 
```

查看 test.html，然后查看 index.html。它不适用于框架！(IE9)

不要告诉我不要使用框架或等等等等。我应该使用它并且不希望使用 div 解决方案。这是一个演示页面，需要框架集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:10:44.023

确保您为每个文件设置了一个文档类型。

```
<!doctype html> 
```

您的页面在没有 doctype 的情况下以 quirksmode 呈现，使用 doctype 他们将在 IE 9 模式下呈现并且应该显示圆角

# python - 有效地将序列列表拆分为两个列表

> ID：13920235
> 
> 赞同：7
> 
> 时间：2012-12-17T18:50:21.527
> 
> 标签：python, python-3.x

> **可能重复：**
> [Python 中的转置/解压缩函数](https://stackoverflow.com/questions/19339/a-transpose-unzip-function-in-python)

我有一个序列列表，每个序列有两个项目。我想把它变成两个列表。

```
catalog = [('abc', '123'), ('foo', '456'), ('bar', '789'), ('test', '1337')] 
```

现在我只是这样做：

```
names = []
vals = []

for product in catalog:
        names.append(product[0])
        vals.append(product[1])

print (names)
print (vals) 
```

它输出两个列表，并且工作得很好：

```
['abc', 'foo', 'bar', 'test']
['123', '456', '789', '1337'] 
```

有没有一种更整洁、更“pythonic”的方式来做到这一点？还是我应该坚持我所拥有的？欢迎对编程风格进行任何更正或反馈，我是新手，正在努力学习最佳实践。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T18:51:38.577

```
>>> catalog = [('abc', '123'), ('foo', '456'), ('bar', '789'), ('test', '1337')]
>>> names, vals = zip(*catalog)
>>> names
('abc', 'foo', 'bar', 'test')
>>> vals
('123', '456', '789', '1337') 
```

这里的`*catalog`语法称为[Unpacking Argument Lists](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)，并`zip(*catalog)`转换为调用`zip(catalog[0], catalog[1], catalog[2], ...)`。

内置函数按索引对[`zip()`](http://docs.python.org/2/library/functions.html#zip)可迭代对象进行分组，因此当您传递一堆如上所述的双元素元组时，您会得到一个双元素元组列表，其中第一个元组包含来自 的每个元组的第一个元素，`catalog`第二个元组包含来自每个元组的第二个元素`catalog`。

在快速 timeit 测试中，`zip()`当我使用 1,000,000 对进行测试时，该版本的性能优于循环方法：

```
In [1]: catalog = [(i, i+1) for i in range(1000000)]

In [2]: def with_zip():
   ...:     return zip(*catalog)
   ...: 

In [3]: def without_zip():
   ...:     names, vals = [], []
   ...:     for name, val in catalog:
   ...:         names.append(name)
   ...:         vals.append(val)
   ...:     return names, vals
   ...: 

In [4]: %timeit with_zip()
1 loops, best of 3: 176 ms per loop

In [5]: %timeit without_zip()
1 loops, best of 3: 250 ms per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T18:53:35.387

当然，使用这个：

```
lst = [('abc', '123'), ('foo', '456'), ('bar', '789'), ('test', '1337')]
tup1, tup2 = zip(*lst) 
```

以上将返回一对带有元素的*元组*。如果您需要*列表*，请使用以下命令：

```
lst = [('abc', '123'), ('foo', '456'), ('bar', '789'), ('test', '1337')]
lst1, lst2 = map(list, zip(*lst)) 
```

# vb6 - 如何在 VB6 中创建包装 DLL/类型库？

> ID：13920236
> 
> 赞同：3
> 
> 时间：2012-12-17T18:50:21.453
> 
> 标签：vb6, dll, typelib

[在我之前的问题](https://stackoverflow.com/questions/13917375/whats-is-the-vb6-equivalent-of-a-c-char-array#13917815)中，我问为什么我`bad DLL calling convention`在尝试从 DLL 调用函数时不断收到错误消息。普遍的共识是我需要将调用约定更改为`cdecl`. 说得通。

不幸的是，我不能将它放在函数声明导入中。我必须要么“创建一个包装 DLL”，要么“为 DLL 创建一个类型库”。

我对 VB 非常陌生，因为我工作的主要重点是 C#，这是很长时间以来第一次使用该语言工作。我不确定如何完成这项任务。

我也对包装 DLL 如何帮助事情感到困惑。假设我不能`cdecl`在我的代码中装饰一个函数导入，但是如果我将那个确切的函数导入移动到一个新的 VB6 DLL，然后引用那个 DLL，它会突然起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T13:36:11.827

我实际上认为[这个](https://stackoverflow.com/questions/13870101/trying-to-call-a-c-dll-from-vb-cant-get-one-of-the-parameters-working)问题在这个话题上更好。

总而言之，您**可以**“将其放在函数声明导入处”，但 VB6 IDE 不知道如何*调试*这样的东西。但是*编译器*可以很好地处理它。将其编译为 dll 后，您的主项目就可以访问已编译的功能。

也许您在问如何将这些移动到 dll 中？如果是这种情况，您需要创建一个类型为“ActiveX Dll”的新项目。将其命名为 PwrUSB。接下来，添加一个类（或重命名默认/空类，如果提供）到 PwrUSBApi 之类的东西。接下来，在属性窗口中，将类设置为 GlobalMultiUse。在名为 MDeclares 的模块中，放入所有声明：

```
'from your other post...
Public Declare Function InitPowerDevice CDecl Lib "PwrDeviceDll.dll" (ByRef firmware() As Byte) As Long 
```

回到你的 PwrUSBApi 类：

```
'forward your calls to the dll
Public Function InitPowerDevice (ByRef firmware() As Byte) As Long
   InitPowerDevice  = MDeclares.InitPowerDevice(firmware)
End Function 
```

您可以从 API 创建一个更成熟的对象模型，但我会从这个简单的包装器开始，直到您整理出所有 API。

哦，是的，回到您的主项目中，您将在项目菜单中添加一个新包装器 PwrUSB.dll 的引用。然后在代码中你会像这样使用它：

```
Dim numOfDevices as Long 
Dim firmware() As Byte
Redim firmware(0 to 31)
numOfDevices = PwrUSB.InitPowerDevice(firmware) 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:07:57.350

VB6 中的包装 DLL 仍然需要使用 CDecl 装饰器，或者创建一个类型库来处理 DLL 的函数签名。

为此创建 VB6 包装器的唯一优点是更容易从 VB6 IDE 中调试调用程序，其中 CDecl 不起作用。包装器很小，并且作为本机代码 DLL 创建一次，使 CDecl 在那里有效。

有关其他答案，请参阅您的其他线程。我怀疑你真正的问题是你没有通过正确的论点。

# javascript - 如何使用jQuery删除包含特定文本的div，以及仅删除div后的HR分隔符

> ID：13920240
> 
> 赞同：2
> 
> 时间：2012-12-17T18:50:42.123
> 
> 标签：javascript, jquery, contains

在包含`<div>`块列表的页面上，每个块都包含位置信息，并且在每个块之后都有`<div>`一个`<hr>`，我需要定位并删除所有不包含波士顿城市的 div。

我可以通过以下方式轻松删除这些 div： `$("div.location").not(":contains('Boston')").remove();`

那时我注意到剩余的剩余`<hr>`

首先定位并删除所有分隔线会更好吗？那么div呢？我可以用一笔 jQuery 做这两个吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:56:56.240

```
$("div.location").not(":contains('Boston')").next('hr').remove().end().remove();​ 
```

***[演示](http://jsfiddle.net/KCqqN/3/)***

注意[评论](https://stackoverflow.com/questions/13920240/how-to-use-jquery-to-remove-divs-containing-specific-text-as-well-as-the-hr-div/13920341#comment19188468_13920341)

```
$("div.location").not(":contains('Boston')")  // return the target div
     .next('hr')  // take the pointer to hr, next to target div
     .remove()    // remove the hr
     .end()       // return the pointer to target div.location again
     .remove();​   // remove the target div 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T18:56:41.890

> 我可以用一笔 jQuery 做这两个吗

并不是说它有任何“更好”，但您始终可以将其链接起来，删除`next()`HR，然后使用`end()`退后一步和`remove()`div，或者先删除 div 以相反的方式进行，这并不重要：

```
$('div.location').filter(function() {
    return $(this).text().indexOf('Boston') == -1;
}).next('hr').remove().end().remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T18:58:29.213

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T19:33:35.457

Use a simple selector, then get the conjunctive hr elements left over

```
$("div.location:not(:contains('Boston'))").remove().add("hr+hr").remove(); 
```

EDIT: alternate avoid double dom manipulation by direct selection first

```
$("div.location:not(:contains('how'))").add("div.location:not(:contains('how'))+hr").remove(); 
```

# android - Android busybox命令获取root和umount

> ID：13920241
> 
> 赞同：1
> 
> 时间：2012-12-17T18:50:49.823
> 
> 标签：android, busybox, umount

所以，我有一个需要卸载目录的设备。我想运行类似的东西：

```
Runtime.getRuntime().exec("system/bin/busybox/ umount /mydir/subdir"); 
```

问题是我需要root才能卸载。我可以使用 umount 命令在单行命令中通过busybox 获得root 权限吗？

编辑：对不起，该设备已经植根。我可以通过 ADB 去 shell： adb shell...umount /mydir/subdir

这是两个命令来实现的。我需要能够通过一行来做到这一点，并且认为使用busybox是实现它的方法。我在想类似的事情：

```
Runtime.getRuntime().exec("system/bin/busybox/"gain shell as above here" umount /mydir/subdir"); 
```

我在这里离基地很远吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:02:24.073

不，你不能。

根锁定设备不是一个简单的 Unix 命令可以实现的。您需要在设备的固件上找到漏洞利用才能获得 root 权限。

如果您尝试 google，您当然可以找到一种方法来根您的设备，但该过程因设备和固件版本而异。当你找到它时，它可能是一个脚本和/或可执行文件，它利用了你设备上的特定漏洞，而不仅仅是一个通用命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:49:22.727

有不同的方法可以做到这一点，但通常您需要先获得 root 访问权限`su`，然后再执行您的命令。`su -c umount /mydir/subdir`应该在你的情况下这样做。

如果这一切听起来令人困惑，您可能想尝试一个使其更容易的库，例如 roottools：[http ://code.google.com/p/roottools/](http://code.google.com/p/roottools/)

# vb.net - 替换文本时光标不断重置？VB.NET

> ID：13920244
> 
> 赞同：1
> 
> 时间：2012-12-17T18:50:50.760
> 
> 标签：vb.net

```
Public Class Form1
Private Sub Me_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown
    If e.KeyCode = 49 Then '1st tone, flat
        If InStr(1, TextBox1.Text, "guo") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("guo", "鍋")
        ElseIf InStr(1, TextBox1.Text, "hao") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("hao", "薅")
        ElseIf InStr(1, TextBox1.Text, "ma") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ma", "妈")
        ElseIf InStr(1, TextBox1.Text, "ni") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ni", "妮")
        ElseIf InStr(1, TextBox1.Text, "yi") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("yi", "一")
        ElseIf InStr(1, TextBox1.Text, "zhong") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("zhong", "中")
        End If
        TextBox1.SelectionStart = TextBox1.SelectionStart + 1
    ElseIf e.KeyCode = 50 Then '2nd tone, rising
        If InStr(1, TextBox1.Text, "guo") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("guo", "国")
        ElseIf InStr(1, TextBox1.Text, "hao") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("hao", "号")
        ElseIf InStr(1, TextBox1.Text, "ma") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ma", "麻")
        ElseIf InStr(1, TextBox1.Text, "ni") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ni", "貎")
        ElseIf InStr(1, TextBox1.Text, "yi") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("yi", "仪")
        End If
        TextBox1.SelectionStart = TextBox1.SelectionStart + 1
    ElseIf e.KeyCode = 51 Then '3rd tone, dipping then rising
        If InStr(1, TextBox1.Text, "guo") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("guo", "果")
        ElseIf InStr(1, TextBox1.Text, "hao") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("hao", "好")
        ElseIf InStr(1, TextBox1.Text, "ma") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ma", "马")
        ElseIf InStr(1, TextBox1.Text, "ni") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ni", "你")
        ElseIf InStr(1, TextBox1.Text, "yi") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("yi", "已")
        ElseIf InStr(1, TextBox1.Text, "zhong") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("zhong", "塚")
        End If
        TextBox1.SelectionStart = TextBox1.SelectionStart + 1
    ElseIf e.KeyCode = 52 Then '4th tone, dipping
        If InStr(1, TextBox1.Text, "guo") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("guo", "过")
        ElseIf InStr(1, TextBox1.Text, "hao") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("hao", "睦")
        ElseIf InStr(1, TextBox1.Text, "ma") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ma", "骂")
        ElseIf InStr(1, TextBox1.Text, "ni") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ni", "逆")
        ElseIf InStr(1, TextBox1.Text, "yi") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("yi", "亄")
        ElseIf InStr(1, TextBox1.Text, "zhong") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("zhong", "众")
        End If
        TextBox1.SelectionStart = TextBox1.TextLength
    ElseIf e.KeyCode = 48 Or e.KeyCode = 53 Then '5th tone, none
        If InStr(1, TextBox1.Text, "ma") > 0 Then
            TextBox1.Text = TextBox1.Text.Replace("ma", "吗")
        End If
        TextBox1.SelectionStart = TextBox1.TextLength
        'MsgBox(TextBox1.SelectionStart)
    End If
End Sub

Private Sub TextBox1_TextChanged(sender As System.Object, e As System.EventArgs) Handles TextBox1.TextChanged
    TextBox1.Text = TextBox1.Text.Replace("0", "")
    TextBox1.Text = TextBox1.Text.Replace("1", "")
    TextBox1.Text = TextBox1.Text.Replace("2", "")
    TextBox1.Text = TextBox1.Text.Replace("3", "")
    TextBox1.Text = TextBox1.Text.Replace("4", "")
    TextBox1.Text = TextBox1.Text.Replace("5", "")
    TextBox1.Text = TextBox1.Text.Replace(".", "。")
    TextBox1.Text = TextBox1.Text.Replace(",", "，")
    TextBox1.Text = TextBox1.Text.Replace(":", "：")
    TextBox1.Text = TextBox1.Text.Replace(";", "；")
    TextBox1.Text = TextBox1.Text.Replace("?", "？")
    TextBox1.Text = TextBox1.Text.Replace("!", "！")
End Sub

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    Clipboard.SetDataObject(TextBox1.Text)
End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    TextBox1.Text = ""
End Sub
End Class 
```

这是我的代码。

每当我使用 TextBox1.Text.Replace 时，我的光标都会不断移回 TextBox 的开头，以防止任何阻止它的尝试，例如

```
TextBox1.SelectionStart = TextBox1.SelectionStart + 1 
```

和东西。此外，除非我使用 + 或 - 更改它，否则 SelectionStart 始终为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:53:48.263

您可以在覆盖文本之前获取位置，然后在完成替换后将其设置回该位置：

```
Dim pos As Integer = TextBox1.SelectionStart
TextBox1.Text = TextBox1.Text.Replace(...)
TextBox1.SelectionStart = pos 
```

# sql - sql server 复杂连接查询

> ID：13920245
> 
> 赞同：0
> 
> 时间：2012-12-17T18:50:53.330
> 
> 标签：sql, sql-server, tsql, unpivot

我有以下查询，它正在工作，但我得到 4 列（3 列以相同的方式命名），因为我想要的只是得到两列数据，“Entidad”和“Servicio”，但找不到方法它..

```
SELECT
    Entidades.nombre as entidad,
    Servicios.nombre as servicio,
    sp.nombre        as servicio,
    sc.nombre        as servicio
FROM
    Entidades

LEFT JOIN Banksphere 

    INNER JOIN Servicios
    ON Banksphere.servicio_id = Servicios.id

ON Entidades.id = Banksphere.entidad_id

LEFT JOIN PAS 

     INNER JOIN Servicios sp
     ON sp.id = 3

ON Entidades.id = PAS.entidad_id

LEFT JOIN CAM 

    INNER JOIN Servicios sc
    ON sc.id = 0

ON Entidades.id = CAM.entidad_id
GROUP BY
    Entidades.id, Entidades.nombre, Servicios.nombre, sp.nombre, sc.nombre
ORDER BY
    Entidades.id 
```

我得到的结构是这样的

```
Entidad     | Servicio | Servicio | Servicio
Corporativo | Abacon   | NULL     | CAM
Corporativo | MCI      | NULL     | CAM
Santander   | Sales    | PAS      | NULL 
```

但是我想要这个...

```
Entidad     | Servicio
Corporativo | Abacon 
Corporativo | MCI    
Corporativo | CAM
Santander   | Sales   
Santander   | PAS 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T18:56:53.497

您应该能够使用该`UNPIVOT`功能：

```
select DISTINCT entidad, value   -- use distinct if you want to remove duplicates
from
(
    SELECT
        Entidades.nombre as entidad,
        Servicios.nombre as servicio1,
        sp.nombre as servicio2,
        sc.nombre as servicio3
    FROM
        Entidades
    LEFT JOIN
        (Banksphere INNER JOIN Servicios
    ON (Banksphere.servicio_id = Servicios.id))
    ON Entidades.id = Banksphere.entidad_id
    LEFT JOIN
        (PAS INNER JOIN Servicios sp
    ON (sp.id = 3))
    ON Entidades.id = PAS.entidad_id
    LEFT JOIN
        (CAM INNER JOIN Servicios sc
    ON (sc.id = 0))
    ON Entidades.id = CAM.entidad_id
    GROUP BY
        Entidades.id, Entidades.nombre, Servicios.nombre, sp.nombre, sc.nombre
) src
unpivot
(
    value
    for col in (servicio1, servicio2, servicio3)
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/69feb/2)

# c++ - 在 MFC C++ 应用程序中在屏幕上绘制点的最快方法

> ID：13920246
> 
> 赞同：0
> 
> 时间：2012-12-17T18:50:59.380
> 
> 标签：c++, performance, graphics, mfc

我有一个包含数百万个 3d rgb 点的应用程序，这些点在绘制时会形成图像。让它们在 MFC 应用程序中进行筛选的最快方法是什么？我已经尝试将 CDC.SetPixelV 与位图结合使用，这似乎很慢，并且正在我的 MFC 视图类中寻找 Direct3D 或 OpenGL 窗口。还有什么好看的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:59:20.440

听起来像*点云*。您可能会在该术语上找到一些很好的信息。

3D 硬件是获取 3D 点并将它们放入 2D 显示器的最快方式，因此 Direct3D 或 OpenGL 似乎是显而易见的选择。

如果点数远大于显示器中的像素数，那么您可能首先要剔除视图之外的点。您将所有点放在某种空间分区结构（如八叉树）中，并忽略完全位于视锥体之外的任何节点内的点。这减少了您必须从系统内存推送到 GPU 内存的数据量，这可能是瓶颈。（如果您的点云是静态的，并且您只是在构建飞行，并且如果您的 GPU 有足够的内存，您可以跳过剔除，一次发送所有数据，然后只更新每一帧的变换。）

如果您不想使用 GPU 而是编写软件渲染器，则需要渲染为与显示器具有相同像素格式的位图（以消除 blit 需要将任何像素格式化为它将位图爆炸到显示器上）。对于合理的窗口大小，每秒 30 帧的 blitting 是可行的，但它可能不会给 CPU 留下太多时间来进行渲染。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:50:23.430

双缓冲是您的解决方案。codeproject上有很多例子。例如检查[这个](http://www.codeproject.com/Articles/442/Flicker-free-redrawing-and-background-buffering-of)

# ios - 对于标签栏图标，iOS 是否也能识别 iPad 的@2x？

> ID：13920253
> 
> 赞同：0
> 
> 时间：2012-12-17T18:51:19.497
> 
> 标签：ios

那么，我的问题是@2x 也会在 iPad 标签栏上被识别吗？我知道 iPad 有不同的后缀，但只有 @2x 似乎效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:56:33.427

@2x 和 ~iphone/~ipad 后缀是正交的——如果你有一个针对这两类设备的视网膜和非视网膜版本的通用项目，那么你可能会有 iPhone/iPad 差异化和@2x/普通差异化资产。

# c - 减少大量二进制文件从硬盘读取访问时间的替代方案

> ID：13920269
> 
> 赞同：0
> 
> 时间：2012-12-17T18:52:25.090
> 
> 标签：c, database-design

在我的第一个应用程序原型中，我必须从硬盘顺序读取大约 400,000 个文件（每个 4KB 文件，总共大约 1.5 GB 数据），并对从每个文件读取的数据进行一些操作，并将结果存储在 RAM 中。通过这种机制，我是先访问一个文件的I/O，然后再利用CPU进行操作，然后继续访问另一个文件，但过程非常缓慢。

为了解决这个问题，现在我们首先读取所有文件，并将所有文件数据存储在 RAM 中，然后进行操作（利用 CPU）。它带来了显着的改善。

但是在我的第二个开发阶段，我必须读取 20 GB 的数据，现在我无法将这些数据存储在 RAM 中。并且，具有 CPU 利用率的单次读取操作是非常耗时的操作。

有人可以建议一些方法来解决这个问题吗？

我正在使用 C 语言在 Windows 上使用 Visual Studio 编译器开发此应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T18:58:26.567

There's a technique called Asynchronous I/O (AIO) that lets you keep doing some processing with the CPU while a file is read in the background. You can use this to read the next few files at the same time as you're processing a file.

The various AIO calls are OS-specific. On Windows, Microsoft call it "Overlapped I/O". See [this Wikipedia page](http://en.wikipedia.org/wiki/Overlapped_I/O) or [this MSDN page](http://msdn.microsoft.com/en-us/library/ms684342%28VS.85%29.aspx) for more info.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T12:41:38.890

> 为了解决这个问题，现在我们首先读取所有文件，并将所有文件数据存储在 RAM 中，然后进行操作（利用 CPU）。

*（假设文件可以独立处理......）*

你已经成功了一半。与其等到所有文件都加载到 RAM 中，不如在加载*任何*文件后立即开始处理。那将是一种[流水线](http://en.wikipedia.org/wiki/Pipeline_%28computing%29)形式。

您将需要三个组件：

1.  读取文件的线程^(1 （“生产者”）。)
2.  处理文件的线程^(2 （“消费者”）。)
3.  它们之间有一个消息队列³。

生产者以您已经在执行的方式读取文件，但不是处理它们，而是将它们排入消息队列。消费者线程一直等待，直到它可以将文件从队列中出列，处理它，然后立即释放已被文件占用的内存并继续等待队列。

如果您可以通过从头到尾顺序遍历文件来处理文件，您甚至可以设计一个更细粒度的“流式处理”，其中文件将被读取和处理成块，这可以进一步降低峰值内存消耗（例如，如果您有一些不再需要*完整*保存在内存中的超大文件）。

* * *

*¹或一组线程来并行化 I/O，如果您预计从多个物理磁盘读取。*

*²或一组线程使 CPU 内核饱和，如果处理文件并不比读取文件便宜。*

*³你不需要花哨的持久分布式消息队列。只是一个直接的内存队列，.NET 中的 a-la [BlockingCollection](http://msdn.microsoft.com/en-us/library/dd997371.aspx)（我相信你会发现纯 C 的类似内容）。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:14:47.223

1.  创建将文件读入 RAM 的线程（循环中）。
2.  在单独的线程中处理 RAM 中的数据，并在处理后释放 RAM。
3.  在受互斥体保护的共享对象中保留有关文件（读取和处理）的限制和记录轮询。
4.  将信号量用于资源（RAM 中的文件）生产/使用同步。

# javascript - 返回一个虚拟的 json 响应

> ID：13920271
> 
> 赞同：0
> 
> 时间：2012-12-17T18:52:26.603
> 
> 标签：javascript, html

我打算做的事情乍一看似乎很简单，但我一直无法完成。我有一个 javascript 代码，它创建一个数组并使用 JSON 库来创建我的 json 响应，该响应存储在一个 javascript 变量中。我将此代码放入服务器上的 HTML 文件中。我只希望我的应用程序在对页面执行获取请求时以 JSON 格式接收此代码。尽管如此，我不知道如何应对这种回应。

我已经看到很多页面从 javascript 发出请求，但我只想拥有一个虚拟的 Rest 服务。我调用该页面并收到这个小 json 代码。我知道如何使用 servlet 来实现这一点，但是当数据是一个虚拟测试时，我似乎不需要这样做。稍后，当我有更多关于它的信息时，我将实施真正的服务，但这是毫无疑问的。

```
//Simplified example    
<html>
<script>    
var tArray = <- //Complex logic executed in the server to create an array with the response so please, I CANNOT create just a .json
var tResponse = JSON.stringify(tArray);
//How do I return tResponse to the app requesting this page as if it were a rest service
</script> 
```

有任何想法吗？

编辑：

显示的代码不是我的代码。这只是一种直观地解释我想要实现的目标的方式。请不要查看它，只要假设它有效并创建一个 javascript 响应。我只想知道如何返回 JSON 响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:34:07.897

好吧，答案实际上只是：

```
[] 
```

存储在带有扩展名的文件中，`.json`并以内容类型`application/json`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:58:13.340

You can consider creating an empty JSON object.

tArray = {};

But it wont be an array anymore :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:03:12.513

```
 <script>
     var json = {a:1,b:2};
     document.write(JSON.stringify(json));
</script> 
```

你可以试试这个，这会将一个 json 变量写入文档中的字符串。如果您请求此页面，它将返回响应。

# magento - 什么控制网格中列的位置？

> ID：13920273
> 
> 赞同：1
> 
> 时间：2012-12-17T18:52:46.273
> 
> 标签：magento

我通过扩展 prepareColumns 向 Sales > Orders 网格添加了一个客户列。什么决定了列的呈现顺序？是否可以更改列在网格上的位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:23:25.407

默认情况下，列按调用 addColumn() 的顺序显示。您可以使用函数 addColumnAfter() 更改它。

以下代码将在“entity_id”列之后添加一个 ID 为“category_id”的列。'entity_id' 是列的 id，而不是“索引”。99/100 次都是相同的，但要注意这一点。

```
$this->addColumnAfter('category_id',array(
      'header' => 'Category ID',
       'index' => 'category_id',
       'type'  => 'text',
       'width' => 70
    ),
    'entity_id'
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-06T08:50:50.387

使用**$this->addColumnAfter()**而不是 $this->addColumn()

```
$this->addColumnAfter('customattribute', array(
      'header'=> Mage::helper('customer')->__('customattribute'),
      'index' => 'customattribute2',
      'type'  => 'options',
      'options'   => Mage::getSingleton('adminhtml/system_config_source_yesno')->toArray(),
      'width' => '100px',
), 'before_grid_id'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-06T10:24:23.330

把**$this->sortColumnsByOrder();** 最后是 _prepareColumns() 函数。

```
protected function _prepareColumns() {

    parent::_prepareColumns();

    $this->addColumnAfter('category_id', array(
        'header' => $this->__('Category ID'),
        'index' => 'entity_id',
        'type'  => 'text',
        'width' => 70
     ), 'entity_id');

   $this->addColumnAfter('name', array(
      'header' => $this->__('Category name'),
      'sortable' => true,
       'index' => 'category_name'), 'entity_id');

   $this->sortColumnsByOrder();
  return $this;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-25T12:28:20.230

恕我直言，以上答案均未回答有关设置现有列的顺序的问题，即无需手动添加。

例如，要将“SKU”列放在“ID”之后，请使用以下代码：

```
$this->addColumnsOrder('sku', 'entity_id'); 
```

其中第一个参数是要在第二个参数中标识的列之后插入的列的 ID/名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T01:00:49.123

通过使用`addColumnAfter`and/or`addColumnOrder`函数而不是`addColumn`.

# jsf - 没有托管 Bean 的 JSF 重定向

> ID：13920275
> 
> 赞同：1
> 
> 时间：2012-12-17T18:52:50.230
> 
> 标签：jsf, redirect

我正在尝试将 JSF 用作纯前端工具。我是否可以提交表单并根据该表单的结果重定向到不同的页面？在这种情况下，我有一个后端服务，它在结果变量中返回结果。根据“result.success”，我想导航到适当的页面/视图。这是我的 JSF 源代码：

```
<!DOCTYPE html>
 <html lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:r="http://mycustomtags.com/tags"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:c="http://java.sun.com/jsf/core">
  <head>
    <r:myService service="adminlogin" namespace="result" params='{"dummy":"Dummy Value"}' />
  </head>
  <body>
    #{result}
    <f:viewParam name="redirectPage" value='#{(result.success)?"success.xhtml?faces-redirect=true" : "sample-login.xhtml?IncludeViewParams=true"}' />
    output:#{redirectPage}
    <h:form method="post" action="sample-login.xhtml">
        <input name="token" type="hidden" class="input-block-level" value="34857349850" />
        <input name="email" type="text" class="input-block-level" placeholder="email" />
        <input name="password" type="password" class="input-block-level" placeholder="password" />
        <h:commandButton action="#{redirectPage}" value="Login" />
    </h:form>           
  </body>
</html> 
```

我需要导航到success.xhtml。我不想使用“faces-config.xml”。有任何想法吗？这是我的 JSF 代码。顺便说一句，这是行不通的，因为“h:commandButton”中的操作参数需要一个 MethodExpression。

# java - 如何在 Swing 中递归禁用我的组件？

> ID：13920279
> 
> 赞同：3
> 
> 时间：2012-12-17T18:53:01.913
> 
> 标签：java, swing, recursion, jpanel, jcomponent

如何递归禁用 JPanel 中的所有组件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T19:00:00.720

```
void setEnabled(Component component, boolean enabled) {
    component.setEnabled(enabled);
    if (component instanceof Container) {
        for (Component child : ((Container) component).getComponents()) {
            setEnabled(child, enabled);
        }
    }
} 
```

请注意，每个组件之前的启用/禁用状态都将丢失，除非您在其他地方跟踪它。

# android - 获取当前日期和时间

> ID：13920285
> 
> 赞同：6
> 
> 时间：2012-12-17T18:53:20.447
> 
> 标签：android

我有点卡在日期和时间上。我希望我的程序创建像“20121217”这样的日期。前 4 个字母是年份，后 2 个字母是月份，最后 2 个字母是日期。年+月+日

时间为“112233”时+分+秒

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T18:55:23.687

那是格式问题。Java 使用`java.util.Date`and`java.text.DateFormat`来`java.text.SimpleDateFormat`处理这些事情。

```
DateFormat dateFormatter = new SimpleDateFormat("yyyyMMdd hhmmss");
dateFormatter.setLenient(false);
Date today = new Date();
String s = dateFormatter.format(today); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T19:01:03.237

你可以这样做：

```
Calendar c = Calendar.getInstance();
String date = c.get(Calendar.YEAR) + c.get(Calendar.MONTH) + c.get(Calendar.DATE);
String time = c.get(Calendar.HOUR) + c.get(Calendar.MINUTE) + c.get(Calendar.SECOND); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T18:56:32.050

根据需要更改任何特定的时间或日期格式。

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd_HHmmss");
     currentDateandTime = sdf.format(new Date()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T19:01:13.600

日期：

```
DateFormat df = new SimpleDateFormat("yyyyMMdd");
String strDate = df.format(new Date()); 
```

对于时间：

```
DateFormat df = new SimpleDateFormat("hhmmss");
String strTime = df.format(new Date()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-13T07:12:46.077

这行得通，

```
 String currentDateTime;

 SimpleDateFormat sdf1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
 currentDateTime = sdf1.format(new Date()); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-17T18:56:16.380

您正在寻找的是 Java 中的 SimpleDateFormat...看看[这个页面](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)。

根据您的需要试试这个：

```
SimpleDateFormat format = new SimpleDateFormat("yyyyMMdd hhmmss");
Date parsed = format.parse(new Date());
System.out.println(parsed.toString()); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-07-13T12:14:05.757

您可以使用以下方法获取当前时间

```
 /**************************************************************
 * getCurrentTime() it will return system time
 * 
 * @return
 ****************************************************************/
public static String getCurrentTime() {     
    DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd HHmmss");
    Calendar cal = Calendar.getInstance();
    return dateFormat.format(cal.getTime());
}// end of getCurrentTime() 
```

# c# - 如何创建动态数学函数？

> ID：13920292
> 
> 赞同：0
> 
> 时间：2012-12-17T18:53:55.077
> 
> 标签：c#, delegates

> **可能重复：**
> [如何动态评估 C# 表达式？](https://stackoverflow.com/questions/53844/how-can-i-evaluate-a-c-sharp-expression-dynamically)

我可以做这个;

```
int x = 6;
var result = new DataTable().Compute(x + " * 10 / 3", null); 
```

还有这个;

```
public delegate double function(double x);
function func = delegate(double x) { return x * 10 / 3; }; 
```

那么我怎样才能像第一个例子一样计算并将它分配给像第二个例子一样的委托呢？

目标是只做一次计算工作，然后将它与许多变量一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:09:56.267

我会使用[NCalc](http://ncalc.codeplex.com/)来满足这些要求。例如

```
NCalc.Expression expr = new NCalc.Expression("x * 10 / 3");
expr.EvaluateParameter += (name, args) =>
    {
        if (name == "x" && somecondition == 1) args.Result = 6;
        if (name == "x" && somecondition == 2) args.Result = 12;
    };
var result = expr.Evaluate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:05:16.213

您只需要创建利用`DataTable.Compute`.

```
Func<double, double> function = x => 
    (double)(new DataTable().Compute(x + " * 10 / 3", null)); 
```

# javascript - 在 Javascript 中创建数学函数的图形，该函数随着函数中变量的变化而动态变化

> ID：13920294
> 
> 赞同：2
> 
> 时间：2012-12-17T18:54:03.660
> 
> 标签：javascript, plot

我正在尝试创建一个 javascript 应用程序，允许用户查看具有多个变量的函数图。对于我的程序，我希望使用变量 S 作为图形的因变量，并将所有其他变量用作常量参数。但是，我希望用户能够更改参数的值，并且我希望根据这些更改更新图表。我试图用我的程序做到这一点，但似乎图表甚至不会出现。我将如何解决这个问题？另外，我应该使用另一个绘图脚本吗？下面是我的代码。对于所有对金融感兴趣的人，您可能会注意到我正在尝试使用 Black-Scholes 公式绘制看涨期权的价值。

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>

<script language="javascript" type="text/javascript" src="http://www.jqplot.com/tests/../src/jquery.min.js"></script>

<script language="javascript" type="text/javascript" src="http://www.jqplot.com/tests/../src/jquery.jqplot.min.js"></script>
<script type="text/javascript" src="http://distributome.googlecode.com/svn-history/r375/trunk/js/calc/distributions.js"></script>

<link rel="stylesheet" type="text/css" href="http://www.jqplot.com/tests/../src/jquery.jqplot.min.css">

<script type="text/javascript" src="http://www.jqplot.com/tests/../src/plugins/jqplot.canvasTextRenderer.min.js"></script>
<script type="text/javascript" src="http://www.jqplot.com/tests/../src/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>

<script class="code" type="text/javascript">

function invoke () {
Sigma = quad.variance.value; 
K = quad.strike_price.value;
r = quad.r_val.value;
div = quad.div_val.value;
graph ();
}

function answer(S) {
    d1 = (Math.log( S / K )+(r - div + .5*Math.pow(Sigma, 2))*T)/(Sigma*Math.sqrt(T));
    d2 = d1 - Sigma*Math.sqrt(T); 
    return S*Math.exp(-div*T)*stdNormalCDF(d1) - K*Math.exp(-r*T)*stdNormalCDF(d2);
};

function graph() {

  var CallPoints = []; 
  for (var i=0; i<90; i+=0.1){ 
     CallPoints.push([i, answer(i)]); 
  } 
  var plot1 = $.jqplot('chart1', [CallPoints], {  
      series:[{showMarker:false}],
      axes:{
        xaxis:{
          label:'Stock Price'
        },
        yaxis:{
          label:'Premium'
        }
      }
  });
};

</script>

</head>
    <body onload="invoke()">

<form name="quad" onchange="invoke()">

<input type="text" value=".30" name="variance" size="5" onchange="invoke()"> = Volatility
<br>
<input type="text" value="30" name="strike_price" size="5" onchange="invoke()"> = K
<br>
<input type="text" value=".05" name="r_val" size="5" onchange="invoke()" > = r
<br>
<input type="text" value=".05" name="div_val" size="5" onchange="invoke()"> = div
<br>
<input type="text" value="1" name="T_val" size="5" onchange="invoke()"> = T

</form>
    <div id="chart1" style="height: 300px; width: 500px; position: relative;" class="jqplot-target">
    </div>

        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:34:36.813

T 未在 invoke() 函数添加行中定义：

T = quad.T_val.value;

# java - 为什么我需要在绘制字符串后禁用 GL_TEXTURE_2D 才能呈现形状？

> ID：13920296
> 
> 赞同：0
> 
> 时间：2012-12-17T18:54:10.290
> 
> 标签：java, opengl, lwjgl, slick2d

我正在使用 Slick2D 库将文本呈现到屏幕上，但为了呈现像 Rect 这样的 gl 形状，我需要首先禁用 GL_TEXTURE_2D。我只是好奇为什么需要这样做。为什么 GL_TEXTURE_2D 会禁用形状的渲染？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T19:09:22.620

OpenGL 的工作方式基本上是一个大型的全局状态机。绑定纹理时，之后绘制的每个三角形都将使用该纹理。

这里的问题是文本绘制之后不会取消绑定它的纹理，因此您之后绘制的形状将使用该纹理而不是没有纹理。您认为它“禁用”渲染的原因是因为纹理由字符组成，其他所有内容都是透明的。您所看到的是 OpenGL 以 0 的不透明度绘制您的形状。

禁用时会发生什么情况`GL_TEXTURE_2D`是纹理变得未绑定并且您在没有纹理的情况下定期绘制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T18:59:05.803

因为应用了字符串的纹理。由于您可能没有设置任何纹理坐标，因此它可能使用透明的纹理部分，因此您什么也看不到。

# windows-phone - 如何使用 C# 在 WP8 中更改图像源？

> ID：13920297
> 
> 赞同：0
> 
> 时间：2012-12-17T18:54:10.253
> 
> 标签：windows-phone, windows-phone-8

我在我的 Windows Phone 8 项目中使用 XAML 创建了一个 Image 对象。我想更改 C# 中的 Source 属性。我该怎么做呢？我遵循了[https://stackoverflow.com/questions/5770527/imagebutton-change-source-property](https://stackoverflow.com/questions/5770527/imagebutton-change-source-property "这个问题")上的代码，但没有成功。BitmapImage 似乎对 Windows Phone 8 无效。有人知道在 C# 中为 WP8 更改图像源的正确方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:20:02.443

好吧，解决方案最终变得很简单。我只需要导入 System.Windows.Media.Imaging 命名空间。我添加了

> 使用 System.Windows.Media.Imaging；

到我的文件顶部，这解决了问题。

# java - 停止短信接收

> ID：13920300
> 
> 赞同：1
> 
> 时间：2012-12-17T18:54:16.467
> 
> 标签：java, android

我正在使用从 Android 清单文件开始的 SMS 接收器服务，使用以下代码。问题是即使在应用程序退出后它仍将继续工作。**如何停止此服务接收短信？**

启动服务代码：

```
<receiver android:name=".dataAccess.SMSReceiver" android:enabled="true">
    <intent-filter >
    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T19:21:50.173

如果您想继续使用清单中定义的广播接收器，您仍然可以使用包管理器启用/禁用它。

[在这里](http://developer.android.com/training/monitoring-device-state/manifest-receivers.html)检查

```
ComponentName receiver = new ComponentName(context, SMSReceiver.class);

PackageManager pm = context.getPackageManager();

pm.setComponentEnabledSetting(receiver,
    PackageManager.COMPONENT_ENABLED_STATE_ENABLED,
    PackageManager.DONT_KILL_APP) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:05:13.433

在我继续之前快速更正：这实际上不是 Android 服务，而是[BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

最简单的方法是监听应用程序的暂停/恢复，并在那里注册/取消注册 SMS 接收器。这是来自 Wi-Fi Direct 教程的示例片段。

```
@Override
public void onResume() {
    super.onResume();
    receiver = new SMSReceiver(...);
    registerReceiver(receiver, intentFilter);
}

@Override
public void onPause() {
    super.onPause();
    unregisterReceiver(receiver);
} 
```

# excel - EXCEL - 用秒和毫秒减去两个 24 小时时间格式单元格

> ID：13920302
> 
> 赞同：0
> 
> 时间：2012-12-17T18:54:21.087
> 
> 标签：excel, time

好的，所以我有两个单元格：

```
Start           End
11:31:37.644    11:31:51.269 
```

我想减去两者并返回应该等于大约 14 秒的剩余时间。

编辑以获取更多信息：

我输入的值是这样的：

```
113137.644
113151.269 
```

我有一个自定义格式化程序设置为：`00\:00\:00.000`显示您在最顶部看到的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:18:09.757

如果您可以将值输入为实时值会更好，然后您可以使用简单的减法

`=A2-A1`

...但是使用它们的值，您可以使用 TEXT 函数进行转换和减法，例如在 A3 中使用此公式

`=TEXT(A2,"00\:00\:00.000")-TEXT(A1,"00\:00\:00.000")`

将 A3 格式设置为 [h]:mm:ss.000 以获取**0:00:13.625**作为您的示例

假设时间在同一“天”，如果您需要通过午夜，您可以修改公式为

`=MOD(TEXT(A2,"00\:00\:00.000")-TEXT(A1,"00\:00\:00.000"),1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:14:59.490

您需要使用该`MID`函数来抓取每个部分的时间，如下所示：

```
=MID(A1,1,2)&":"&MID(A1,3,2)&":"&MID(A1,5,2)&"."&MID(A1,8,3) 
```

这将更`113137.644`改为`11:31:37.644`.

然后，您可以像这样对其进行数学运算（全部在一个单元格中，但为了便于阅读而在此处分解）：

```
=TEXT(MID(B1,1,2)&":"&MID(B1,3,2)&":"&MID(B1,5,2)&"."&MID(B1,8,3), "hh:mm:ss.000") 
 - 
 TEXT(MID(A1,1,2)&":"&MID(A1,3,2)&":"&MID(A1,5,2)&"."&MID(A1,8,3),"hh:mm:ss.000") 
```

那应该给你`0.000157697`。将字段的自定义格式更改`hh:mm:ss.000`为给您`00:00:13.625`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:11:33.573

您可以使用此公式将您的值转换为时间

```
=(LEFT(A1,2)+(MID(A1,3,2)+RIGHT(A1,LEN(A1)-4)/60)/60)/24 
```

然后，您可以使用以下公式减去并转换回来

```
=TEXT(B1,"hhmm")&TEXT(MOD(B1*24*60,1)*60,"00.000") 
```

但是对于您来说，在几天或几小时内实际使用正确的十进制值可能会更好，而不是您无法计算任何东西。

# ms-access - 访问VBA浏览器传递参数

> ID：13920303
> 
> 赞同：0
> 
> 时间：2012-12-17T18:54:29.820
> 
> 标签：ms-access, navigation, vba

我有一个标签式导航。我有一个绑定表单，用户双击长列表中的单个用户。我想转到一个未绑定的表单，并预加载包含该用户详细信息的表单（编辑用户）。我专门使用未绑定的表单，因为我想显示一个保存/取消按钮。我找不到任何方法将用户的 id 传递给 load_form 调用。我错过了什么吗？我必须使用某种全局变量（这对我来说似乎很糟糕）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:13:32.953

打开表单时可以使用 OpenArgs：-

```
DoCmd.OpenForm "MyForm", acNormal,,,,,Args 
```

无论 Args 是什么，都可以在“MyForm”中作为 Me.OpenArgs 引用

例如，如果你传递一个数字 PK，那么你可以使用类似的东西：

```
dim db as dao.database
set db = currentdb
dim rs as dao.recordset
set rs = db.openrecordset ("select * from MyTable where PK=" & me.openargs", dbopendynaset, dbfailonerror)
if rs.eof then
'didn't find record with PK...
else
'then populate the unbound controls on your form with the fields from the recordset
... 
```

请注意，您不必为了提供保存/取消而拥有未绑定的表单。如果您为表单的更新前事件编写事件处理程序，您可以随意取消更改或提交更改。

# javascript - 如何将函数参数传递给 jquery .animate？

> ID：13920307
> 
> 赞同：0
> 
> 时间：2012-12-17T18:54:47.810
> 
> 标签：javascript, jquery

> **可能重复：**
> [使用动态变量作为对象文字，jQuery 动画函数](https://stackoverflow.com/questions/13236473/using-a-dynamic-variable-as-object-literal-jquery-animate-function)

我正在尝试将函数参数作为 jquery 动画的设置传递，但我无法使其正常工作。

功能

```
function gridClick(a, b){
    $(c).animate({
        a : 0,
        b : 0
    }, 10000)
}; 
```

调用函数

```
gridClick('top', 'left', this); 
```

控制台日志显示 a 和 b 被放在顶部和左侧，但它们实际上并没有影响顶部和左侧的动画。这是语法错误还是发生了更多事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:56:19.833

我认为您不能使用对象文字将变量名称用作对象的属性名称。这是一种可能的解决方法：

```
function gridClick(a, b) {
    var params = {};
    params[a] = 0;
    params[b] = 0;
    $(c).animate(params, 10000);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:57:24.120

如果要使用变量作为属性名称，则需要使用括号表示法和赋值。文字语法不支持它。

相反，使用：

```
function gridClick(a, b, c) {
    var opts = {};
    opts[a] = 0;
    opts[b] = 0;
    $(c).animate(opts, 10000)
} 
```

# asp.net-mvc-4 - MVC中文件夹名称的大写和小写约定是什么

> ID：13920309
> 
> 赞同：1
> 
> 时间：2012-12-17T18:54:57.573
> 
> 标签：asp.net-mvc-4

我刚刚开始使用 ASP.NET MVC。令我困惑的一件事是，为什么某些默认文件夹名称用大写字母书写，而其他文件夹名称为什么用小写字母书写。我只是不明白它的逻辑。具体来说，为什么在 MVC 中 Content 文件夹是大写的 C 而子文件夹主题是小写的。这里有任何命名约定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:07:03.963

Content 文件夹包含 css 样式表、javascript、图像等。主题文件夹是 jQuery UI 的默认主题的 css 文件。这些传统上使用[小写约定](http://javascript.crockford.com/code.html)。

# .htaccess - vBulletin 到 bbPress 转换 - 如何将旧 URL 重定向到新 URL？

> ID：13920322
> 
> 赞同：1
> 
> 时间：2012-12-17T18:55:53.847
> 
> 标签：.htaccess, vbulletin, data-conversion, bbpress

我将我的 vbulletin 论坛转换为 bbpress，一切正常，除了旧网址部分的重定向。

我想使用 .htaccess 将旧的 vbulletin 网址重定向到新的 bbpress 网址，但我不知道该怎么做。我还是 URL 重定向的新手。

**旧 vBulletin 网址：**

[http://www.forum.site.com/showthread.php?80-post-title](http://www.forum.site.com/showthread.php?80-post-title)

**新的 bbPress 网址：**

[http://www.site.com/forums/topic/post-title](http://www.site.com/forums/topic/post-title)

谁能帮我？我真的很感激。

更新：这是我的 .htaccess 文件的内容。

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^[0-9]+-([^&]+)
RewriteRule ^/?showthread\.php$ http://www.site.com/forums/topic/%1 [L,R=301]

RewriteEngine on
Options +FollowSymlinks -MultiViews

# handles http redirect

RewriteCond %{SERVER_PORT} =80
RewriteCond %{HTTP_HOST} ^forum\.site\.com$ [NC] 
RewriteRule ^/?(.*)$ http://www.site.com/discussions [R=301,L,QSA,NE]

# handles https redirect
RewriteCond %{SERVER_PORT} =443
RewriteCond %{HTTP_HOST} ^forum\.site\.com$ [NC] 
RewriteRule ^/?(.*)$ https://www.site.com/discussions [R=301,L,QSA,NE] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:46:14.490

尝试将这些规则添加到**www.forum.site.com**域的文档根目录：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^[0-9]+-([^&]+)
RewriteRule ^/?showthread\.php$ http://www.site.com/forums/topic/%1 [L,R=301] 
```

# c# - 如何从 silverlight Web 项目的外部获取 ClientBin 位置

> ID：13920323
> 
> 赞同：0
> 
> 时间：2012-12-17T18:56:11.283
> 
> 标签：c#, silverlight

从 silverlight .Web 项目外部获取到 ClientBin 目录的系统路径的最佳方法是什么。

我知道在 .Web 项目中，以下代码将为我提供 ClientBin 目录的物理路径：

```
var di = new DirectoryInfo(Server.MapPath(@"ClientBin\")); 
```

如何从 Silverlight 解决方案中的另一个（非 .Web）项目中获取相同的 DirectoryInfo 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T05:54:53.703

```
 Uri sourceUri = new Uri(HtmlPage.Document.DocumentUri,Application.Current.Host.

Source.ToString().IndexOf("ClientBin")) 
```

# ruby - Sequel gem：优雅地处理无效的日期值

> ID：13920324
> 
> 赞同：1
> 
> 时间：2012-12-17T18:56:13.377
> 
> 标签：ruby, sequel

我是一个红宝石菜鸟，我正在尝试使用 Sequel 和 data_objects 适配器处理一些博客文章：

```
DB = Sequel.connect('do:mysql://user:pass@localhost/database')

db[posts_query].each do |post|
  puts post
end 
```

但我得到`Sequel::InvalidValue`了例外，抱怨日期列：

```
/usr/lib/ruby/1.9.1/time.rb:202:in `local': ArgumentError: argument out of range (Sequel::InvalidValue)
    from /usr/lib/ruby/1.9.1/time.rb:202:in `make_time'
    from /usr/lib/ruby/1.9.1/time.rb:271:in `parse'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/core.rb:295:in `string_to_datetime' 
```

我试图捕捉异常：

```
begin
  db[posts_query].each do |post|
      puts post
  end
rescue Sequel::InvalidValue => e
  puts e.inspect
end 
```

但这并没有多大帮助。

如何找出哪一行的值不正确？

另外，有没有办法进行这种迭代，这样我就可以捕获异常但继续循环剩余的行？

**更新：**

我切换到 mysql2 适配器，现在我至少可以看到无效日期：

```
/var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/adapters/mysql2.rb:154:in `each': Mysql2::Error: Invalid date: 2008-04-00 00:00:15 (Sequel::DatabaseError)
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/adapters/mysql2.rb:154:in `block in fetch_rows'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/adapters/mysql2.rb:89:in `_execute'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/adapters/shared/mysql_prepared_statements.rb:34:in `block in execute'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `block in synchronize'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/connection_pool/threaded.rb:104:in `hold'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/database/connecting.rb:236:in `synchronize'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/adapters/shared/mysql_prepared_statements.rb:34:in `execute'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:778:in `execute'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/adapters/mysql2.rb:171:in `execute'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/adapters/mysql2.rb:140:in `fetch_rows'
    from /var/lib/gems/1.9.1/gems/sequel-3.42.0/lib/sequel/dataset/actions.rb:154:in `each'
    from wordpress_importer.rb:112:in `process'
    from wordpress_importer.rb:308:in `<main>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:20:57.080

你能发布更多的回溯吗？你需要看看是什么在召唤`string_to_datetime`。

另外，我建议不要使用 do/mysql 适配器，除非您有特定的需要。请改用 mysql 或 mysql2 适配器。如果错误是由 MySQL 数据库中的虚假日期时间引起的，那么您可能需要使用 mysql2 适配器或使用 mysql 适配器并设置`DB.convert_invalid_date_time = nil`。

# cocoa - 打印时自动在预览中打开 PDF

> ID：13920328
> 
> 赞同：2
> 
> 时间：2012-12-17T18:56:21.087
> 
> 标签：cocoa, nsprintoperation, nsprintinfo

我将 jobDisposition 设置为`NSPrintPreviewJob`in `NSPrintInfo`，但该值似乎被忽略了。打印操作不是在预览中打开文档，而是像往常一样显示打印面板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T18:56:21.087

要直接去预览，你需要抑制打印面板：

```
printInfo.jobDisposition = NSPrintPreviewJob;
NSPrintOperation *op = [NSPrintOperation printOperationWithView:view
                                                      printInfo:printInfo];
op.showsPrintPanel = NO;
[op runOperation]; 
```

# android - Android-无法让 ksoap2 与我的 nusoup 网络服务一起使用

> ID：13920330
> 
> 赞同：0
> 
> 时间：2012-12-17T18:56:25.357
> 
> 标签：android, soap, ksoap2, nusoap

**解决**

我正在尝试解决此错误，但我真的无法弄清楚，原因是我的“transport.call（SOAP_ACTION，信封）；” 总是给出错误。我的 Web 服务非常简单，我使用 SoupUI 对其进行了测试，我使用 nusoap 在 php 中构建了它。希望有人可以提供帮助。在此先感谢您。

错误描述：Open Declaration void org.ksoap2.transport.HttpTransportSE.call(String soapAction, SoapEnvelope envelope) throws IOException, XmlPullParserException

> 解析度; 为了修复我的“transport.call(SOAP_ACTION,envelope)”错误，我必须做两件事，1º我使用了这行代码 System.setProperty("http.keepAlive", "false");，因为看起来是 api < 9 的 ksoap2 的问题，之后我只是在 android manifest 上添加了互联网的权限，它就起作用了。

这是我的安卓代码

```
//SOUP web service
private static final String SOAP_ACTION = "urn:primeFactorization#doCalc";
private static final String METHOD_NAME = "doCalc";
private static final String NAMESPACE = "urn:primeFactorization";
private static final String URL = "http://192.168.1.33/androidWebService/calcNumber.php"; 
```

//连接到网络服务器

```
public SoapObject getPrimeFactorization(String number) throws Exception{
    System.setProperty("http.keepAlive", "false");//--> This resolved my problem
    SoapObject request = new SoapObject(NAMESPACE,METHOD_NAME);

    request.addProperty("number",number);       
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    //envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE transport = new HttpTransportSE(URL);
    try{
    transport.call(SOAP_ACTION, envelope); //This is were i get the error:S<----
    Log.v("TEST","runs ok attributes "+envelope.getResponse().toString());
    }catch (Exception e) {
        e.printStackTrace();
    }

    return (SoapObject) envelope.getResponse();
} 
```

//还有我的 Web 服务 WSDL

```
<definitions xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="urn:primeFactorization" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="urn:primeFactorization">
<types>
    <xsd:schema targetNamespace="urn:primeFactorization">
        <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
        <xsd:import namespace="http://schemas.xmlsoap.org/wsdl/"/>
    </xsd:schema>
</types>
<message name="doCalcRequest">
    <part name="number" type="xsd:string"/>
</message>
<message name="doCalcResponse">
    <part name="return" type="xsd:string"/>
</message>
<portType name="primeFactorizationPortType">
    <operation name="doCalc">
        <documentation>Calculates the prime factorial of a given number</documentation>
        <input message="tns:doCalcRequest"/>
        <output message="tns:doCalcResponse"/>
    </operation>
</portType>
<binding name="primeFactorizationBinding" type="tns:primeFactorizationPortType">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="doCalc">
        <soap:operation soapAction="urn:primeFactorization#doCalc" style="rpc"/>
        <input>
        <soap:body use="encoded" namespace="urn:primeFactorization" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
        </input>
        <output>
            <soap:body use="encoded" namespace="urn:primeFactorization" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
        </output>
    </operation>
</binding>
<service name="primeFactorization">
    <port name="primeFactorizationPort" binding="tns:primeFactorizationBinding">
        <soap:address location="http://192.168.1.33/androidWebService/calcNumber.php"/>
    </port>
</service> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:42:55.940

使用它来获取您的请求的结果：

```
SoapObject result = (SoapObject)envelope.bodyIn;
Log.v("TEST","runs ok attributes "+result.getProperty(0).toString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T17:49:28.353

为了修复我的“transport.call(SOAP_ACTION,envelope)”错误，我必须做两件事，1º我使用了这行代码 System.setProperty("http.keepAlive", "false");，因为看起来是 android api < 9 的 ksoap2 的问题，之后我只是在 android manifest 上添加了互联网权限，它就可以工作了。

# video - api获取android设备的所有支持的视频分辨率

> ID：13920331
> 
> 赞同：2
> 
> 时间：2012-12-17T18:56:30.260
> 
> 标签：video, resolution

什么是 android 中的 API（API 级别 8），它为特定的 android 设备提供 cam 编码器的所有支持的视频分辨率。或者是否有任何 API 可用于检查设备是否支持给定的视频分辨率？

# java - 将谷歌地图实现到 xml 文件错误？

> ID：13920335
> 
> 赞同：1
> 
> 时间：2012-12-17T18:56:45.343
> 
> 标签：java, android

我正在将 Google 地图 v2 编码到我的应用程序中，但遇到了错误。我已经在清单中包含了 API 密钥。

每当我从应用程序的菜单列表中单击“地图”时，应用程序就会崩溃：以下是 LogCat 中显示的错误：

```
E/AndroidRuntime(2041): FATAL EXCEPTION: main
E/AndroidRuntime(2041): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.anonymous.anonymous1/com.anonymous.anonymous1.Activity_Map}: android.view.InflateException: Binary XML file line #3: Error inflating class fragment 
```

这是相关的 Java 和 xml 文件： http: [//pastebin.com/LkjrHkPy](http://pastebin.com/LkjrHkPy)

有谁知道如何解决这个错误，以便我可以在我的应用程序上看到地图？我认为这可能与包含片段的 xml 有关。

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:23:26.353

基于`ClassNotFoundException`，您需要将 Google Play 服务的 Android 库项目添加到您的应用程序中：http: [//developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)

# ruby-on-rails - 如果用户模型定义了资源，则 Rolify with_all_roles 不起作用

> ID：13920340
> 
> 赞同：0
> 
> 时间：2012-12-17T18:56:53.457
> 
> 标签：ruby-on-rails, cancan, rolify

我想从用户模型中获取一个说版主的列表，它在这种情况下有效

```
u = User.new(:name => "n", :surname => "s", :email => "a@m.c", :password => "x")
u.add_role(:moderator)
u.save! 
```

但是如果我像这样将资源分配给用户模型，它不会列出具有角色主持人的用户

```
u = User.new(:name => "m", :surname => "b", :email => "a@m.c", :password => "x")
u.add_role(:moderator, Post.first)
u.save! 
```

更新

**post.rb**

```
class Post < ActiveRecord::Base
  attr_accessible :user_id, :content
  belongs_to :user
end 
```

**用户.rb**

```
class User < ActiveRecord::Base
  rolify
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T10:46:44.113

您应该添加`resourcify`到您的 Post 模型和其他您想要应用角色的模型中，如[自述](https://github.com/EppO/rolify#32-configure-your-resource-models)文件中所述。

因此，您的 Post 模型应如下所示：

**Post.rb**

```
class Post < ActiveRecord::Base
  resourcify
  attr_accessible :user_id, :content
  belongs_to :user
end 
```

*** 编辑 ***

您可以使用角色 :admin 获取所有用户`User.with_all_roles({:name => :admin})`

我创建了一个香草项目，使用具有相同用户和帖子模型的 rolify。更改帖子模型并添加`resourcify`，更改用户模型并添加`has_many :posts`

```
user = User.create(...)
user.add_role :admin
post = user.posts.create(...)
user2 = User.create(...)
user2.add_role(:moderator, post) 
```

似乎与这些一起工作：

*   User.with_all_roles({:name => :admin})
*   User.with_all_roles({:name => :moderator, :resource => Post })
*   User.with_all_roles({:name => :moderator, :resource => Post.first })

# r - 如何使用 gstat predict 制作普通克里金法

> ID：13920342
> 
> 赞同：4
> 
> 时间：2012-12-17T18:56:58.993
> 
> 标签：r, spatial-interpolation, automap, gstat

我正在尝试在 R 中编写使用 gstat 库的代码来创建插值。我已经阅读了 gstat 手册，并根据互联网上的一些示例，我设法编写了这段代码（这只是一部分）：

```
 g <- gstat(id="tec", formula=TEC ~ 1, data=data)  ##I create an object
 v <- variogram(g) # plot the empirical variogram
 plot(v)
 mod<-vgm(sill=var(data$TEC),model="Sph",range=200,nugget=200) #create the variogram model

v.fit <- fit.variogram(v, model=mod,fit.method=1)  #fit the empirical variogram 
Theor_variogram=plot(variogram(g),v.fit,main="WLS Model") #plot the theoretical variogram
plot(Theor_variogram)
 ## Kriging interpolation
 p <- predict.gstat(g, model=v.fit, newdata=predGrid) 
```

我的问题是，当我运行最后一个命令（预测）而不是使用普通克里金插值得到结果时，我得到的是反距离加权（IDW）。我在 gstat 手册中读到：“当没有指定变异函数时，反距离加权插值是默认操作。指定变异函数时，默认预测方法是普通克里金法。”

但是，正如您在我的代码中看到的那样，我指定了经验和理论变异函数。你知道为什么我一直使用 IDW 而不是普通的克里金法吗？它可以与我拥有的坐标类型有关吗？例如，如果我的坐标彼此接近，或者感兴趣的区域太大？任何帮助都会非常有用。

提前致谢 迪米特里斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T20:49:48.000

您需要包括 gstat 对象的创建，而不是在预测阶段：

```
g <- gstat(id="tec", formula=TEC ~ 1, data=data, model = v.fit) 
```

但是，我建议使用标准接口来`gstat`使用`krige`. 这将`gstat`对象的构建和预测结合为一个功能。您很少需要`gstat`自己构建对象。例如：

```
data(meuse)
coordinates(meuse) = ~x+y
data(meuse.grid)
gridded(meuse.grid) = ~x+y
m <- vgm(.59, "Sph", 874, .04) 
# OK:
x <- krige(log(zinc)~1, meuse, meuse.grid, model = m) 
```

您还可以使用`automap`包（我是该包的作者）并让变异函数模型自动拟合数据。例如使用`meuse`数据集：

```
library(automap)
kr = autoKrige(log(zinc)~1, meuse, meuse.grid) 
```

这将自动构建样本变异函数，并将变异函数模型拟合到该样本变异函数。

# java - java socket and DoS

> ID：13920343
> 
> 赞同：2
> 
> 时间：2012-12-17T18:56:59.273
> 
> 标签：java, sockets, ddos

I wrote a little java program that establishes a socket connection (port 23456) over TCP between a server (pong.java) and a client (ping.java). I start the server and then the client which sends ping and the server responds with pong. This happens 50 times.

This works all fine but now i want to shut this down using a SYN Flood DoS attack with hping3, but i can't get it to work. I can easily stop a file transfer running between the client and the server over SMB with the same DoS program. The server definitely gets the SYN packages- When i attack the same port the java socket connection uses it just shuts the attack down and the java program happily finishes the 50 loops. i can't figure out why. is there some protection in java or do sockets in java work different than a TCP exchange over SMB?

I do this for a network class and i just can't figure it out. I just attack myself between 3 VMs so no one will get harmed.

I can provide the source code or further information if needed.

Thanks a lot if anyone can help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:20:54.800

我不知道它是否合适，但是我编写了一个服务器客户端应用程序，并且更多的客户端正在尝试连接。只要我使用 Sun JRE，它就可以工作。使用 OpenJava，我无法让它工作——只有第一个客户端连接，其他客户端必须等待。我无法弄清楚为什么，并且并不真正关心 - 在服务器上安装了 Sun（现在是 Oracle）JRE，它运行顺利。因此，如果您使用 Linux 和 OpenJava，我建议您尝试使用 Oracle 的 JRE。

# javascript - HTML 拖动事件不会在 firefox 中触发

> ID：13920345
> 
> 赞同：11
> 
> 时间：2012-12-17T18:57:08.363
> 
> 标签：javascript, css, html, firefox

我有一个表，我需要在其上实现可拖动的标题列。我使用 Chrome 作为浏览器实现了它，一切正常。当我在 Firefox (17.0.1) 中测试它时，我注意到该`drag`事件没有触发。`dragstart`确实如此。我在下面的标记中简化了问题。在 Chrome 中加载时，每次拖动时鼠标移动时，顶部标签都会更新。在 Firefox 中，它仍然是 0。

```
<!DOCTYPE html>
<html>
<head>
<title>TH Drag Test</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<style>
table,td,th {
    border: solid thin black;
}
</style>
<script>
    $(document).ready(function() {
        $("th").bind("drag", function(event) {
            $("#lbl").html(event.originalEvent.offsetX);
        });
    });
</script>
</head>
<body>
    <span id="lbl">0</span>
    <table>
        <thead>
            <tr>
                <th draggable="true">Column A</th>
                <th draggable="true">Column B</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>One</td>
                <td>Two</td>
            </tr>
            <tr>
                <td>Three</td>
                <td>Four</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-03T16:21:44.163

我在为 Firefox 解决这个问题时做噩梦。我需要将 div 拖到日记上并检测放置的坐标，以便知道用户选择了哪个日期和时间。

为了让拖动事件触发，我在 dragstart 事件处理程序中添加了以下行：

```
event.dataTransfer.setData('Text', this.id); 
```

然而，最难解决的是如何在拖动结束时获取 x 和 y 坐标，因为这些不会在 Firefox 的 dragend 事件处理程序中返回。我尝试使用上面提到的鼠标事件，但我发现这些在拖动过程中不起作用，并且仅在调用 dragend 事件处理程序后才被调用。所以，我只使用了 dragend 事件来检测用户何时释放了 div，然后使用下一个鼠标移动事件来获取坐标并执行任何其他需要的工作。我发现这适用于 IE、Firefox 和 Chrome。这是一个演示的 html / javascript：

```
 <div>
<div id = "todrag" class = "testdiv" draggable="true"><p>Please drag me</p></div>

<div id = "destination" class = "testdiv"><p>To here</p></div>
<p id = "coords"></p>
<p id = "compareords"></p>
</div>

<script>
    var down = true;
    var m_xcoordDrag = 0;
    var m_ycoordDrag = 0;
    var m_xcoordMove = 0;
    var m_ycoordMove = 0;
    var m_dragReleased = false;
    var m_coordselement = document.getElementById("coords");
    var m_compareordselement = document.getElementById("compareords");

    function OnMouseMove(e) {
        m_xcoordMove = e.x;
        m_ycoordMove = e.y;
        m_coordselement.innerHTML = e.x + "," + e.y;

        if (m_dragReleased) {
            m_compareordselement.innerHTML = "X:" + m_xcoordDrag + ", " + m_xcoordMove + " Y:" + m_ycoordDrag + ", " + m_ycoordMove;

            m_dragReleased = false;
        }
    }

    dragstart = function (event) {

        event.dataTransfer.setData('Text', this.id);
        stop = false;
    }

    dragend = function (event) {
        m_dragReleased = true;

        m_xcoordDrag = event.x;
        m_ycoordDrag = event.y;
    }

    document.onmousemove = OnMouseMove;

    var toDrag = document.getElementById("todrag");

    toDrag.addEventListener('dragstart', dragstart);
    toDrag.addEventListener('dragend', dragend);

</script> 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T20:05:26.523

被剪掉的位[http://pastebin.com/bD2g3SqL](http://pastebin.com/bD2g3SqL)

编辑：

这确实有效，但是我还没有找到访问 offsetX 和 offsetY 属性的方法，由于某种原因，事件的 FF 版本不包含它们。

```
<!DOCTYPE html>
<html>
<head>
<title>TH Drag Test</title>
<style>
table,td,th {
    border: solid thin black;
}
</style>
<script>
    function Init(){
        var n= document.getElementsByTagName("th");
        var j=0;

        for (var i=0; i<n.length; i++){
            n[i].addEventListener('drag', function (e){
                document.getElementById("lbl").textContent= j++;
            }, false);
        }

        for (var i=0; i<n.length; i++){
            n[i].addEventListener('dragstart', function (e){
                e.dataTransfer.setData('text/plain', 'node');
            }, false);
        }
    }
</script>
</head>
<body onload="Init();">
    <span id="lbl"></span>
    <table>
        <thead>
            <tr>
                <th draggable="true">Column A</th>
                <th draggable="true">Column B</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>One</td>
                <td>Two</td>
            </tr>
            <tr>
                <td>Three</td>
                <td>Four</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

显然，您需要做的是“初始化”拖动（[source](https://developer.mozilla.org/en-US/docs/DragDrop/Drag_and_Drop)。）

编辑2：

显然，拖动事件（如图）中有一个错误，它不会更新 clientX 和 clientY 属性（[source](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/drag)。）它们会在其他一些事件上更新，例如 dragover 事件，但是该事件只会在对象被触发时触发拖到一个合理的放置目标上。摆脱这种愚蠢情况的方法是这样粗暴的：

```
<!DOCTYPE html>
<html>
<head>
<title>TH Drag Test</title>
<style>
table,td,th {
    border: solid thin black;
}
</style>
<script>    
    var down= false;

    document.onmousemove= OnMouseMove;

    function Init(){
        var n= document.getElementsByTagName('th');

        for (var i=0; i<n.length; i++){
            n[i].onmousedown= OnMouseDown;
        }

        document.onmouseup= OnMouseUp;
    }

    function OnMouseDown(e){
        down= true;
    }

    function OnMouseUp(e){
        down= false;
    }

    function OnMouseMove(e){
        if (!down) return;

        document.getElementById('lbl').textContent= e.pageX ? ('x: ' + e.pageX + ' y: ' + e.pageY) : ('x: ' + (e.clientX + document.documentElement.scrollLeft + document.body.scrollLeft) + ' y: ' + (e.clientY + document.documentElement.scrollTop + document.body.scrollTop));
    }

</script>
</head>
<body onload="Init();">
    <span id="lbl"></span>
    <table>
        <thead>
            <tr>
                <th draggable="true">Column A</th>
                <th draggable="true">Column B</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>One</td>
                <td>Two</td>
            </tr>
            <tr>
                <td>Three</td>
                <td>Four</td>
            </tr>
        </tbody>
    </table>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-20T13:25:34.073

Firefox 需要在`dragstart`event 中设置“something”（我们在这里称为“init”）来初始化其余的拖动事件。

这可能是因为所有 DOM 元素都`draggable="true"`默认在 XUL 中。（参考：[https](https://bugzilla.mozilla.org/show_bug.cgi?id=646823#c4) ://bugzilla.mozilla.org/show_bug.cgi?id=646823#c4 ）

例子：

```
<div id="something" draggable="true" ondragstart="event.dataTransfer.setData('text/plain', 'node');">Drag me</div> 
```

Chrome 不需要这种“初始化”。

# java - 确定 URL 是否为 Feed

> ID：13920346
> 
> 赞同：0
> 
> 时间：2012-12-17T18:57:23.533
> 
> 标签：java, php, zend-framework, feed

> **可能重复：**
> [如何发现给定 URL 的 RSS 提要](https://stackoverflow.com/questions/61535/how-to-discover-rss-feeds-for-a-given-url)

给定一个 URL，我想知道它是否是一个提要。

在[Zend Framework](http://framework.zend.com/)中，可以将 URL 作为[提要](http://framework.zend.com/manual/1.12/en/zend.feed.introduction.html)导入：

```
try {
    $slashdotRss =
        Zend_Feed::import('http://rss.slashdot.org/Slashdot/slashdot');
} catch (Zend_Feed_Exception $e) {
    // feed import failed
    echo "Exception caught importing feed: {$e->getMessage()}\n";
    exit;
} 
```

如果抛出异常，那么我知道 URL 不是提要。

我想在 Java 中做同样的算法，所以我的问题是：Zend 如何知道一个 URL 是否是一个提要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:00:36.327

在浏览器中打开 url 并查看源代码。您会注意到，它是一个具有特定格式的 xml 文档（它在某处被标准化。谷歌为它）。Zend 框架（注意，Zend 是一家公司）可能会尝试解析此文档。当它不是有效的提要时，它显然会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:20:52.043

我要做的就是把它送到[罗马](http://rometools.org)并尝试解析它。如果解析失败，则会抛出 FeedException：

```
public boolean tryFeed(String feedUrl) throws IOException,MalformedURLException { 
    SyndFeedInput input = new SyndFeedInput();
    SyndFeed feed = null;
    try {
        feed = input.build(new XmlReader(new URL(feedUrl)));
        return true;
    } catch (FeedException e) {
        // Feed's invalid
        return false;
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:00:44.677

我不熟悉 Zend 的内部结构，但是对于我写过的读者，我通常会寻找 Mime 类型的 **[application/rss+xml](http://www.rssboard.org/rss-mime-type-application.txt)**

这是确定资源是什么的标准方法。

当然，一些编程不当/配置不正确的源可能不符合标准，就像可以将 PNG 文件的 mime 类型设置为`text/javascript`或同样无意义的东西一样。

作为后备，解析文件是一种可行的方法，假设提要已正确格式化。

# jquery - Fade to different div background image on hover

> ID：13920350
> 
> 赞同：0
> 
> 时间：2012-12-17T18:57:50.117
> 
> 标签：jquery, fadein, fadeout

For this new website I'm creating, I'm trying to get one background to fade into another when I hover on a link. I don't want the link to change, just the background. I found some good jQuery to get the background to change, but there's no fade effect and my knowledge of jQuery is limited. Here's what I have so far:

**Html**

```
<div id="container">
        <a id="linktomouseover" href="http://delusion.submittable.com/submit" alt="Submit to Delusion" style="position: absolute; width: 275px; height: 99px; top: 354px; left: 263px; display: block;"> </a>
    </div> 
```

**Css**

```
#container {
  position:relative;
  height:600px;
  width:800px;
  margin:0 auto;
  background: url(Images/website-header1.png) center top no-repeat;
  border: 1px solid #ffffff;
} 
```

**JQuery**

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript"></script>
    <script>
        $(function() {
             $("#container a").hover(function() { // Changes the #main divs background to the rel property of the link that was hovered over.
             $("#container").css("background", "url(Images/website-header2.png)");
         }, function() { // Sets the background back to the default on hover out
             $("#container").css("background", "url(Images/website-header1.png)");
             });
        });
</script> 
```

If anyone has any other suggestions on how to do this, that would be great. This is just what I found. Thank you so much for helping!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:49:22.240

这是在不隐藏链接的情况下执行此操作的方法。它还做了一个很好的交叉淡入淡出，而不是完全淡出，然后再回来。

在其中有两个 div`#container`绝对定位为 100%`width`和`height`，以及`z-index`-1 的 a。这些 div 中的每一个都包含您的背景图像。您在悬停时将它们换掉。在我的示例中，为了方便起见，我使用了背景颜色，但你明白了。

```
<div id="container">
    <div id="one"></div>
    <div id="two"></div>
    <a href="#">The Link</a>
</div> 
```

...

```
#container {
    margin: 100px;
    position: relative;
}

#container a {
    color: white;
}

#container div {
    position: absolute;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    z-index: -1;
}

#one {
    background-color: blue;
}

#two {
    background-color: green;
    display:none;
} 
```

...

```
$("#container a").hover(function () {
    $("#container div:visible").fadeOut();
    $("#container div:hidden").fadeIn();
}); 
```

[这是小提琴](http://jsfiddle.net/uSpEa/1)

# iphone - xcode check if JSON Array contains value

> ID：13920351
> 
> 赞同：-1
> 
> 时间：2012-12-17T18:57:50.883
> 
> 标签：iphone, arrays, json

I am returning a JSON array: Array 2: ( {"checkin_ID" = 123}, {"checkin_ID" = 121;}, {"checkin_ID" = 99;}, etc)

In my code each cell has it's own checkin_ID. If the checkin_ID of the cell matches any number or string from my JSON array, I would like to show a button.

Any ideas?

Code:

ViewDidLoad:

```
NSError *error = nil; NSDictionary *dict2 = [[CJSONDeserializer deserializer] deserializeAsDictionary:jsonData2 error&error2]; 

if (dict2) { 
    rows2 = [dict2 objectForKey:@"likes"]; 
} 
```

Cell Construction:

```
NSPredicate *checkinIDPredicate = [NSPredicate predicateWithFormat:@"checkin_ID == %d", myInt]; 

NSArray *matchingCheckins = [rows2 filteredArrayUsingPredicate:checkinIDPredicate];

if([matchingCheckins count] > 0) // Show the button, etc. 
```

In my `NSLog` after adding your code... Predicate checkin_ID = 121 Matching Predicate ()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:05:35.087

First, parse your data into an array of dictionaries, storing it in a property for later use.

```
NSError *error = nil;
self.checkins = [NSJSONSerialization JSONObjectWithData:checkinData options:0 error:&error]; 
```

`checkinData` is an `NSData` object, which can be created easily from your JSON string.

When the cell for the row is being constructed, filter the list of checkins by your target ID:

```
NSPredicate *checkinIDPredicate = [NSPredicate predicateWithFormat:@"checkin_ID == %d", cellCheckinID];
NSArray *matchingCheckins = [self.checkins filteredArrayUsingPredicate:checkinIDPredicate];
if([matchingCheckins count] > 0)
    // Show the button, etc. 
```

This code has not been tested, so it may contain compiler or logic errors, but that's the gist of it.

# python-2.7 - wxPython - how to colour the text of a statusbar

> ID：13920356
> 
> 赞同：2
> 
> 时间：2012-12-17T18:58:18.793
> 
> 标签：python-2.7, styles, wxpython, statusbar

I searched for the answer in the forum, but I didn't find anything, if I am wrong, I am sorry. Anyway, question is simple, I have this Frame, with a Status Bar I use to print messages or notifies.

I would like to use it for mistakes or not permitted operations. But I would like these messages to be coloured. I am looking for a solution on wxPython demo -because i read somewhere on the web to get some inspirations by it-, but i still did not find anything.

Do you have any ideas or solutions?

thank you in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:14:54.667

我会尝试状态栏小部件的 SetForegroundColour 或 SetBackgroundColour 方法。这些方法并不总是适用于每个平台，因为每个操作系统都有自己的规则，而 wxPython 遵循这些规则。如果它们不起作用，那么您将不得不滚动您自己的状态栏，可能通过在大小调整器或拆分器窗口中使用几个面板。

还有可能对您有用的第 3 方增强状态栏小部件。它可以在[http://xoomer.virgilio.it/infinity77/main/EnhancedStatusBar.html找到](http://xoomer.virgilio.it/infinity77/main/EnhancedStatusBar.html)

# c# - How to snap to grid when dragging?

> ID：13920360
> 
> 赞同：0
> 
> 时间：2012-12-17T18:58:33.597
> 
> 标签：c#, wpf, visual-studio, xaml

By default when you drag a control (Label, TextBox, etc.) beside another control, it forces the control you're placing into alignment with the other control you just dragged.

I disabled that somehow by accident and now I have no clue how to re-enable it.

I have already tried changing everything on the page with no results, including after closing the designer and re-opening it for every single change I made.

![Non](../Images/6ff1920c8794edb857c313c0249ed206.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:03:07.917

![](../Images/5689e2b194e122fd8f9a0e6b45a26b58.png)

设计器窗口左下角的第四个按钮。

# php - odbc_execute 在准备好的语句上失败，然后说它“无法获取错误消息”

> ID：13920361
> 
> 赞同：2
> 
> 时间：2012-12-17T18:58:39.900
> 
> 标签：php, sql-server-2008, ubuntu, odbc, freetds

有这个 PHP 代码：

```
$sql = "SELECT * FROM users WHERE name = ?";
$params = array('admin');
$result = odbc_prepare($link, $sql);
if (!$result) {
  die(odbc_errormsg());
}
else {
  if (!odbc_execute($result, $parameters)) {
    die(odbc_errormsg());
  }
} 
```

我明白了：

```
Warning: odbc_execute() [function.odbc-execute]: SQL error: Failed to fetch error message, SQL state HY000 in SQLExecute in [...] 
```

但是，如果我这样做：

```
$sql = "SELECT * FROM users WHERE name = 'admin'";
$params = array();
$result = odbc_prepare($link, $sql);
if (!$result) {
  die(odbc_errormsg());
}
else {
  if (!odbc_execute($result, $parameters)) {
    die(odbc_errormsg());
  }
} 
```

我得到了预期的结果。会是什么呢？

我的代码在 Ubuntu Server 上运行，使用 UnixODBC 和 FreeTDS，连接到 MSSQL Server 2008。

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:13:30.137

你为什么不使用 odbc_* 函数而不是使用 PDO？它应该在内部处理参数化查询并将 SQL 语句传递给驱动程序（在本例中为 FreeTDS）。

# c# - 在 .cshtml 页面中发送和接收数据

> ID：13920362
> 
> 赞同：3
> 
> 时间：2012-12-17T18:58:41.940
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我正在做作业，我正在用 asp.net MVC 3 开发一个购物网站，目前我只在视图中做我的工作。我有一个产品页面，点击详细信息我必须打开产品详细信息页面。

```
<a href="ProductDetails.cshtml"> Details </a> 
```

我有多个产品，我想告诉我的产品详细信息页面打开了哪些产品详细信息。一种方法是我可以在 ID 后面附加 URL，例如

```
<a href="ProductDetails.cshtml?id=1"> Details </a> 
```

但是我无法理解如何在产品详细信息页面上接收此 ID，因为我没有控制器也没有模型，并且我使用服务器端代码在 .cshtm 页面上使用紧凑型数据库获取数据。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T19:06:29.513

您可以使用 访问查询字符串`Request.QueryString["key"]`。所以我想你会想要使用这样的东西：

```
@{
    var myProductId = Request.QueryString["id"];
} 
```

**警告：**当然这是一种不好的做法，通常 MVC 模式要求您在 Controller 的操作中提取 ID，获取模型数据，然后将该模型数据返回给视图。视图应该尽可能少地了解查询字符串和任何程序逻辑之类的内容。

```
public class ProductController : Controller
{
    public ActionResult ProductDetails(string id)
    {
        MyProduct model = SomeDataSource.LoadByID(id);
        return View(model);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:03:47.290

您可以通过 Request 对象访问它：

```
@Request.Params["id"] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T02:37:53.567

没有人提到您可能想要更改链接：

```
<a href="ProductDetails.cshtml?id=1"> Details </a> 
```

类似于：

```
<a href="@Url.Action("ProductDetails", "Product", new {@id = 1})" >Details</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-15T17:47:15.787

```
<div class="box-button">@Html.ActionLink("Details", "Course", new { id = item.id }, new { @class = "btn btn-default" })</div> 
```

# php - 在我为操作添加前缀后，JS 助手停止工作

> ID：13920363
> 
> 赞同：0
> 
> 时间：2012-12-17T18:58:42.080
> 
> 标签：php, cakephp

我有带有*添加*操作的控制器。

```
public function add() {   
    $this->layout = 'manage';
    $this->set($this->Restaurant->fetchRelatedData());
    if ($this->request->is('post')) {
        $this->Restaurant->create();
        if ($this->Restaurant->save($this->request->data)) {
            $this->Session->setFlash('ok!');
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash('Error!');
        }
    }
} 
```

使用 Form 和 Js 助手创建的此操作的视图：

```
echo $this->Form->create('Restaurant');
// some fields
echo $this->Form->input('district_id', array('label' => 'District'));
echo $this->Form->input('street_id', array('label' => 'Street')); 
// other fields
echo $this->Form->end(array('label' => 'Add'));

$this->Js->get('#RestaurantDistrictId')->event('change', 
$this->Js->request(array(
    'controller'=>'streets',
    'action'=>'getByDistrict'
    ), array(
    'update'=>'#RestaurantStreetId',
    'async' => true,
    'method' => 'post',
    'dataExpression'=>true,
    'data'=> $this->Js->serializeForm(array(
        'isForm' => true,
        'inline' => true
        ))
    ))
); 
```

Js 助手显示所选区域中的街道列表。

StreetsController -> getByDistrict 操作：

```
public function getByDistrict(){
    $district_id = $this->request->data['Restaurant']['district_id'];
    $streets = $this->Street->find('list', array(
        'conditions' => array('Street.district_id' => $district_id),
        'fields' => array('street'),
        'order' => array('Street'),
        'recursive' => -1,
    ));
    $this->set('streets', $streets);
    $this->layout = 'ajax';
} 
```

在我向此操作添加管理前缀之前，一切正常。如果 action 被命名为*public function add()* - 一切正常。如果 action 被命名为 *public function admin_add()* – Js helper 停止更新街道列表以改变地区。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:30:20.893

我对此不是 100% 确定的，但我相信 JS 助手在发出 AJAX 请求时会保留管理员前缀。在 add() 中时，它会调用 getByDistrict()。当在 admin_add() 中时，它会调用 admin_getByDistrict()。尝试将 'admin' => false 传递给 Js->request。

# java - Existing JUnit Class not found exception

> ID：13920366
> 
> 赞同：0
> 
> 时间：2012-12-17T18:59:11.723
> 
> 标签：java, eclipse, maven, junit

I am trying to run a test from XSDGeneratorTest.java. But I get the following exception:

```
Class not found com.level3.pcat.xsd.XSDGeneratorTest
java.lang.ClassNotFoundException: com.level3.pcat.xsd.XSDGeneratorTest
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at     org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClass(RemoteTestRunner.java:693)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.loadClasses(RemoteTestRunner.java:429)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

I tried to claen and build the project many a times but still same error! I tried all the options from [JUNIT Test class in Eclipse - java.lang.ClassNotFoundException](https://stackoverflow.com/questions/5716308/junit-test-class-in-eclipse-java-lang-classnotfoundexception), but none worked for me!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:24:14.893

如果在您将项目从一个 IDE/OS 移动到另一个 IDE/OS 时发生这种情况，只需尝试删除 JUnit3 库并重新添加它。有时当你从外面带来你的项目时，这会失败。在我这样做之前，我一直遇到同样的错误。

# java - Limit length of line in standard draw

> ID：13920368
> 
> 赞同：1
> 
> 时间：2012-12-17T18:59:36.020
> 
> 标签：java, stddraw

I currently have a program with a grid and lines that will be drawn between dots in the grid. It uses standard draw. I wish to limit the length of the lines, so that they can only go from the adjacent points, but do not know how I would do this.

Thanks

```
StdDraw.setCanvasSize(400, 400);
StdDraw.setXscale(0, 10);
StdDraw.setYscale(0, 10);      

//dots
double radius = .15;
double spacing = 2.0;

for (int i = 0; i <= 4; i++) {
    for (int j = 0; j <= 4; j++) {
        StdDraw.setPenColor(StdDraw.GRAY); 
        StdDraw.filledCircle(i * spacing, j * spacing, radius );
    }
}
StdDraw.setPenColor(StdDraw.BLUE); 
StdDraw.text(0, 9.5, player1_name);
StdDraw.setPenColor(StdDraw.RED); 
StdDraw.text(5, 9.5, player2_name);
int turn = 1;
     for (int i = 0; i <= 40; i++) { 
         if (turn % 2 == 0)
           StdDraw.setPenColor(StdDraw.RED);
         else
           StdDraw.setPenColor(StdDraw.BLUE);

         while(!StdDraw.mousePressed()) { }
         double x = StdDraw.mouseX();
         double y = StdDraw.mouseY();
   System.out.println(x + " " + y);
         StdDraw.setPenRadius(.01);
         StdDraw.show(200); 
               while(!StdDraw.mousePressed()) { }
               double x2 = StdDraw.mouseX();
               double y2 = StdDraw.mouseY();
               StdDraw.show(200); 
double xround = Math.round(x); 
double yround = Math.round(y);
double x2round = Math.round(x2);
double y2round = Math.round(y2);
  int xroundb = (int) xround; 
  int yroundb = (int) yround;
  int x2roundb = (int) x2round;
  int y2roundb = (int) y2round;
StdDraw.line(xround, yround, x2round, y2round);
System.out.println("Line Drawn"); 
StdDraw.show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T20:38:51.770

啊，我明白了。您不是在询问`line`正确工作的实际方法，您希望`line`在未选择相邻点的情况下不调用这样的逻辑。

好吧，首先我们需要知道允许哪些相邻连接。那就是我们可以有垂直吗？水平的？对角线？我会解释每一个以防万一

所以你有`spacing = 2.0`. 好吧，这应该足以检查邻接。

```
if (Math.abs(x2round - xround) > spacing) {
   // don't draw
} else if (Math.abs(y2round - yround) > spacing)) {
   // don't draw
} else if (Math.abs(y2round - yround) > 0.0) && Math.abs(x2round - xround) > 0.0) {
   // don't draw if diagonal connections are forbidden
   // if diagonal is allowed, remove this else if condition
} else {
   StdDraw.line(xround, yround, x2round, y2round);
} 
```

所以如果你不画画，那么你必须强制执行你的游戏逻辑。也许玩家放弃了一个回合。也许玩家有另一个机会选择相邻的点。它是由你决定。由于舍入，比较双精度总是有点疯狂，因此您可能希望选择一个非常小的 epsilon 双精度值来确保捕获所有情况，而不是使用 0.0。

# android - 应用程序 ID 无效的 OAuth 异常

> ID：13920369
> 
> 赞同：0
> 
> 时间：2012-12-17T18:59:46.540
> 
> 标签：android, facebook

实际上，我们在 facebook 中创建了一个应用程序，并使用提供的应用程序 ID，android 应用程序能够发布消息。最近我们更改了 Facebook 用户名和主要电子邮件地址。在此之后，我们的应用程序停止在 facebook 登录上工作。它不会在 webview 中向我们显示 facebook 登录屏幕。

我们收到以下异常 { "error": { "message": "Error validating application. Invalid application ID.", "type": "OAuthException", "code": 101 } }

如果有人在这方面帮助我们，我们会很高兴。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:29:54.137

您的应用程序代码引用了一个应用程序 ID，该应用程序需要使用 Facebook 的 API - 如果您无法通过 API 访问该应用程序 ID（对于无法访问的应用程序，GET 请求`graph.facebook.com/<app ID here>`将返回“不支持的 GET 请求”错误）它表示它处于沙盒模式，您可以从应用程序设置中修复此问题，或者它已被删除。

如果是后者，您需要创建一个新应用并更新您的 Android 代码以使用该新应用的应用 ID

# jquery - Apply class after element is loaded

> ID：13920370
> 
> 赞同：2
> 
> 时间：2012-12-17T18:59:59.213
> 
> 标签：jquery

I have a document where a content of a table is loaded within container with AJAX.

I need to apply styling to the table, and although my JS is within

```
$(document).ready(function() { 

}); 
```

it appears I am still unable to apply the CSS to the table. Is there a way to add some listener to do it after the table is loaded?

* * *

UPDATE:

Fixed it with running function after delay

```
setTimeout(function() {
    $('.myElement').addClass('myClass');
}, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:03:28.487

使用 ajax 将数据加载到表后，是否要应用 css 类？如果是，您可以在 ajax 调用的回调函数中执行此操作。

```
$(function(){

  $("#tblAwesome").load("gettablecontent.aspx",function(){
        $("#tblAwesome").addClass("newClass");
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:06:34.323

实际上，如果在文档的 ready 事件中通过异步查询加载元素，您将无法“访问”该元素。

为什么要等待加载元素来应用样式？因为您知道您的元素将在特定表格中创建（具有特定 id ？），所以最好的解决方案必须是在您的“静态”css 代码中应用样式，以表格元素为目标。

这样，元素在添加到 dom 时就会被设置样式。

# ruby - How to make Class.clone or Class.dup work in ruby?

> ID：13920374
> 
> 赞同：1
> 
> 时间：2012-12-17T19:00:11.717
> 
> 标签：ruby, class, clone

I have a model called `Client` and I would like to clone it in certain cases where clients (the real world kind) have modifications that require class level changes.

For example, if I have:

```
class Client
  set_table_name :clients

  def some_method
    puts "Hello"
  end
end 
```

Then if I have the following:

```
module ClientA
  def some_method
    puts "World"
  end
end 
```

I would expect that I could clone (or dup) the class, then include the module to overwrite the method `some_method`.

But here's what happens in my production console:

```
> CA = Client.dup
> CA.singleton_class.send(:include, ClientA) # Or just CA.send(:include, ClientA)
> client = CA.new
> client.some_method
=> "Hello" # Expected "World" 
```

Is there a trick to this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:06:55.430

而不是`Client.dup`use `Class.new(Client)`，它是 Client 的子类。

如果您想避免这种情况，这似乎适用于`Client.dup`：

```
CA.send(:define_method, :some_method) do 
  puts "World"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:09:43.130

如果你想用模块的数据覆盖特定的类，你想扩展它。

```
client = Client.new
client.extend(ClientA)
client.some_method
=> "World" 
```

你可以在这里看到它的工作原理：[http ://rubyfiddle.com/riddles/7621e](http://rubyfiddle.com/riddles/7621e)

# html - It doesn't align in center

> ID：13920375
> 
> 赞同：0
> 
> 时间：2012-12-17T19:00:13.367
> 
> 标签：html, wordpress, html-table

I was using this code in my wordpress theme to align in center it didn't work, but if I align right or left it works:

```
 <table border="1" align="center">
  <tr>
    <td>
      <div style='width: 435px; height: 90px; background-image: url( http://vortex.accuweather.com/adcbin/netweather_v2/backgrounds/spring1_435x90_bg.jpg ); background-repeat: no-repeat; background-color: #607041;' >
       <div id='NetweatherContainer' style='height: 75px;' >
        <script src='http://netweather.accuweather.com/adcbin/netweather_v2/netweatherV2ex.asp?partner=netweather&tStyle=normal&logo=1&zipcode=MEA|AE|AE005|DUBAI|&lang=eng&size=10&theme=spring1&metric=0&target=_self'></script>
     </div>
     <div style='text-align: center; font-family: arial, helvetica, verdana, sans-serif; font-size: 10px; line-height: 15px; color: #FDEA11;' >
      <a style='color: #FDEA11' href='http://www.accuweather.com/world-index-forecast.asp?partner=netweather&locCode=MEA|AE|AE005|DUBAI|&metric=1' >Forecast</a> | <a style='color: #FDEA11' href='http://www.accuweather.com/maps-satellite.asp' >Maps</a> | <a style='color: #FDEA11' href='http://www.accuweather.com/index-radar.asp?partner=accuweather&zipcode=MEA|AE|AE005|DUBAI|' >Radar</a>
     </div>
     <img style='float: right; padding-right: 5px;' src='http://vortex.accuweather.com/adc2004/common/images/misc/netweather_v2/adcwhite.png' /><div style='clear: both;' />
   </div>
 </div>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:03:03.673

如果您只想显示图像，只需将其容器居中而不是使用`table`元素：

```
.ad {
    display: block;
    margin:  0 auto;
}
.w435 {
    width:   435px;
} 
```

然后给你`div`一个宽度（你已经有）：

```
<div class="ad w435"><!-- content --></div> 
```

小提琴：http: [//jsfiddle.net/SQ9Qn/](http://jsfiddle.net/SQ9Qn/)

# iphone - NSArray to NSData for Core Data

> ID：13920377
> 
> 赞同：1
> 
> 时间：2012-12-17T19:00:25.037
> 
> 标签：iphone, objective-c, ios, core-data

I need to save array in core data, so i read that I can use NSData for it. So I think that I have problem with archiving.

```
NSMutableArray *newArray = [[NSMutableArray alloc]init];
NSData *newData = [NSKeyedArchiver archivedDataWithRootObject:newArray];
[myEntity setValue:newData forKey:@"nameOfMyData"]; 
```

And then I try to pick my array in another VIewController for filling

```
NSData *newdata = [NSData dataWithData:self.myEntity.nameOfMyData];
NSMutableArray *photoArray = [[NSMutableArray alloc]init];
photoArray = [NSKeyedUnarchiver unarchiveObjectWithData:newdata]; 
```

I have no crash, but in command line appear next:

```
[NSKeyedUnarchiver initForReadingWithData:]: data is empty; 
did you forget to send -  finishEncoding to the NSKeyedArchiver? 
```

And when i try to add object to my array, it does not add

```
[photoArray addObject:myImage]; 
```

So myImage is creating and with it I have no trouble, but in debugger always write for photoArray:

```
photoArray = (NSMutableArray*) 0x00000000 0 objects 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:11:41.770

它应该工作。但是在取消归档数组时，请使用：

```
NSData *newdata = [NSData dataWithData:self.myEntity.nameOfMyData];
NSMutableArray *photoArray = [NSMutableArray arrayWithArray: [NSKeyedUnarchiver unarchiveObjectWithData:newdata]]; 
```

您的数组中有不符合 NSCoding 协议的对象，或者您没有保存核心数据上下文（或保存不成功）。

存档后

```
NSData *newData = [NSKeyedArchiver archivedDataWithRootObject:newArray]; 
```

当您检查 newData 是否为零时，您会看到什么？我想它是零。

# php - CakePHP: How to switch two row values from a unique field?

> ID：13920379
> 
> 赞同：1
> 
> 时间：2012-12-17T19:00:30.543
> 
> 标签：php, mysql, cakephp

I need to change the value of two rows in the `order` field of my database. This field is unique.

**What I tried:**

1.  Storing the value of **both items** in a PHP variable,

2.  Setting the **first row**'s field value to `NULL` (nulls are accepted in the field),

3.  Setting the value of the **second row**'s field to the value that was held on the first row,

4.  Setting the **first row**'s field value to the original second row field value.

* * *

It doesn't work, since I am getting a "dupplicate entry" error when executing the order change. I can't seem to find out how to do this using CakePHP.

Here is the code that I have written (even though it's not functionnal):

```
if ($second_row) {
    $next = $second_row['Immeuble']['order'];
    $prev = $first_row['Immeuble']['order'];

    $this->Immeuble->id = $first_row_id;
    $this->Immeuble->saveField('order', 'null');

    $this->Immeuble->id = $second_row['Immeuble']['id'];
    $this->Immeuble->saveField('order', $prev);

    $this->Immeuble->id = $first_row_id;
    $this->Immeuble->saveField('order',$next);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:06:39.023

当然它的重复键

你定义了 id 两次

```
 $this->Immeuble->id = $first_row_id; 
```

和

```
 $this->Immeuble->id = $second_row['Immeuble']['id']; 
```

接着

```
 $this->Immeuble->id = $first_row_id; 
```

尝试删除最后一行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:18:12.327

我上面所说的代码**是完全功能**的。我只是**颠倒**了一些值，这会搞砸一切。如果其他人需要做类似的事情，我不会删除这个问题。

# android - can't find FingerPaint sample

> ID：13920381
> 
> 赞同：1
> 
> 时间：2012-12-17T19:00:32.790
> 
> 标签：android, graphics

I study android graphics and i faced to strange problem:
I found a lot of mentions of "FingerPaint" sample, but i can't find it in sample folder.

There is just 47 sample projects, and no one about graphics.

How can I download this sample? I follow to this instructions [link](http://developer.android.com/tools/samples/index.html)

but it doesn't help.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T19:11:53.470

如果您在 Android 的 SDK 管理器中下载了“SDK 示例”，您可以`FingerPaint.java`在硬盘上找到：

```
<sdk>\samples\android-<version>\ApiDemos\src\com\example\android\apis\graphics 
```

* * *

如果要在 Eclipse 中运行此应用程序，请选择：

```
New > Other... > Android > Android Sample Project 
```

然后选择合适的构建目标并选择`ApiDemos`项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:08:21.600

您要下载哪个样本？或者您在从 sdk 下载示例时遇到问题？如果你想从 sdk 下载示例，那么在新的 android 项目窗口上应该有三个选项：

1.  在工作区创建新项目
2.  从现有源创建项目
3.  从现有示例创建项目（第三个有点隐藏，因为有一个文本框，并且第三个之前的第二个项目下方的复选框。

选择#3，然后选择您想要示例的api级别（在下面的列表中），然后您可以从现在非灰色列表中选择一个示例。

# cmake - FindPostgreSQL.cmake 无法在 ubuntu 上运行

> ID：13920383
> 
> 赞同：15
> 
> 时间：2012-12-17T19:00:37.467
> 
> 标签：cmake, libpq

*   Ubuntu 12.04
*   CMake 2.8.9
*   PostgreSQL 9.2.2

我正在尝试让`FindPostgreSQL`模块找到`/usr/include/postgresql/libpq-fe.h`.

这是我的`CMakeLists.txt`：

```
find_package(PostgreSQL REQUIRED) 
```

这是我得到的错误：

```
CMake Error at /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:97 (MESSAGE):
  Could NOT find PostgreSQL (missing: PostgreSQL_TYPE_INCLUDE_DIR) (found
  version "9.2.2")
Call Stack (most recent call first):
  /usr/share/cmake-2.8/Modules/FindPackageHandleStandardArgs.cmake:288 (_FPHSA_FAILURE_MESSAGE)
  /usr/share/cmake-2.8/Modules/FindPostgreSQL.cmake:155 (find_package_handle_standard_args)
  CMakeLists.txt:7 (find_package) 
```

我在调用之前添加了以下几行，`find_package`但它似乎没有任何效果。

```
set(PostgreSQL_ADDITIONAL_VERSIONS "9.2.2")
set(PostgreSQL_ADDITIONAL_SEARCH_PATHS ${PostgreSQL_ADDITIONAL_SEARCH_PATHS} "/usr/include/postgresql") 
```

我也尝试用谷歌搜索，`PostgreSQL_TYPE_INCLUDE_DIR`但没有找到任何东西。我还能尝试什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-10-13T17:23:07.230

确保您已经安装了`libpq-dev\`和`postgresql-server-dev-all`（或特定版本，例如`postgresql-server-dev-9.4`）

```
$ dpkg --get-selections | grep -e "libpq-dev\|postgresql-server-dev" 
```

万一你错过了一些包裹

```
apt-get install libpq-dev postgresql-server-dev-all 
```

应该修复它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T14:21:57.013

经过更多调试后，我发现它在尝试查找时卡住了`pg_type.h`

此文件位于`/usr/include/postgresql/catalog/pg_types.h`但模块希望在其中找到它`/usr/include/postgresql/server/catalog/pg_types.h`

```
find_path(PostgreSQL_TYPE_INCLUDE_DIR
  NAMES catalog/pg_type.h
  PATHS
   # Look in other places.
   ${PostgreSQL_ROOT_DIRECTORIES}
  PATH_SUFFIXES
    pgsql/server
    postgresql/server
    include/server
  # Help the user find it if we cannot.
  DOC "The ${PostgreSQL_INCLUDE_DIR_MESSAGE}"
) 
```

如果我添加`postgresql`到`PATH_SUFFIXES`

```
find_path(PostgreSQL_TYPE_INCLUDE_DIR
  NAMES catalog/pg_type.h
  PATHS
   # Look in other places.
   ${PostgreSQL_ROOT_DIRECTORIES}
  PATH_SUFFIXES
    postgresql
    pgsql/server
    postgresql/server
    include/server
  # Help the user find it if we cannot.
  DOC "The ${PostgreSQL_INCLUDE_DIR_MESSAGE}"
) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-10-08T15:58:20.627

`cmake`在 Ubuntu 上，您还可以通过如下定义调用来解决该问题`PostgreSQL_TYPE_INCLUDE_DIR`：

```
cmake -DPostgreSQL_TYPE_INCLUDE_DIR=/usr/include/postgresql/ 
```

请参阅此问题的错误报告 [1] 和潜在的修复 [2]。还可以在 [3] 上查看关于 debian 邮件列表中移动背后原因的讨论。

在 Ubuntu/Debian 上，从 PostgreSQL 9.3 开始，头文件`pg_type.h` 被移动到一个单独的包（从`libpq-dev`to `postgresql-server-dev`），因此文件`pg_type.h`被移动到一个新位置

*   [1] [https://gitlab.kitware.com/cmake/cmake/issues/17223](https://gitlab.kitware.com/cmake/cmake/issues/17223)
*   [2] [https://gitlab.kitware.com/cmake/cmake/commit/d4fd30d8d8f5b9c4b5a110b4676cad2a19d7c314](https://gitlab.kitware.com/cmake/cmake/commit/d4fd30d8d8f5b9c4b5a110b4676cad2a19d7c314)
*   [3] [https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=314427](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=314427)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-29T15:25:43.523

从带有 PostgreSQL 9.3 的 Linux Mint 17.3（“Rosa”）开始，我不得不调整 ilia choly 的解决方案（有趣的`postgres`是，列表中的建议条目已经存在于文件中，但不足以修复问题）。

我不得不`/usr/share/cmake-2.8/Modules/FindPostgreSQL.cmake`在第 114 行附近进行编辑并添加`postgresql/9.3`，以便`find_path`调用看起来像

```
find_path(PostgreSQL_TYPE_INCLUDE_DIR
  NAMES catalog/pg_type.h
  PATHS
   # Look in other places.
   ${PostgreSQL_ROOT_DIRECTORIES}
  PATH_SUFFIXES
    postgresql/9.3
    postgresql
    pgsql/server
    postgresql/server
    include/server
  # Help the user find it if we cannot.
  DOC "The ${PostgreSQL_INCLUDE_DIR_MESSAGE}"
) 
```

# jquery - 如果满足条件，如何使用一个元素触发点击（一个接一个）？

> ID：13920384
> 
> 赞同：0
> 
> 时间：2012-12-17T19:00:37.767
> 
> 标签：jquery

你好，伙计，我有一个问题。我有一个点击事件，点击时会显示（）一个最初隐藏的 div。打开的 div 有一个输入表单

```
$(".coll-menu-footer input.menu-btn").click(function(e) {
    $("div.new-coll").show();})
}); 
```

我想仅在它显示的 div 打开时才使用相同的指挥棒元素提交。

为了使问题易于理解，一个元素，相同的事件，每次启动时的不同动作。

第一次单击显示隐藏的 div，第二次单击提交输入数据。这怎么可能的伴侣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:05:52.093

您可以使用 JQuery 来确定 div 是否仍然隐藏。如果它仍然隐藏，请显示它。如果它没有隐藏，请执行您的提交。

```
$(".coll-menu-footer input.menu-btn").click(function(e) {
     if($("div.new-coll").is(":visible"))
     {
         //perform your submission code
     }
     else
     {
         $("div.new-coll").show();
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:06:19.257

您可以创建按钮的两种状态，第一种显示隐藏的 div，第二种提交表单。

```
$(".coll-menu-footer").on('click', 'input.menu-btn:not(.clicked)', function(e) {
    $("div.new-coll").show();
    $(this).addClass('clicked');
});

$(".coll-menu-footer").on('click', 'input.menu-btn.clicked', function(e) {
    $(this).removeClass('clicked');
    // submit and other code here
}); 
```

[**演示**](http://jsfiddle.net/vhbWw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:02:56.240

几种可能的方法：

1.  使用 jQuery`.toggle()`在每次点击时自动应用替代操作。
2.  在您的事件处理程序中，检查页面的状态（打开/关闭）并据此决定要采取的操作。
3.  第一次单击后，卸载第一个事件处理程序，安装一个执行不同操作的不同事件处理程序，依此类推第三个，第四个，等等......
4.  为点击次数保留一个计数器，在您的单个事件处理程序中，查看计数器并决定采取何种操作。

# ruby-on-rails - Rails 和 rails 控制台不工作

> ID：13920387
> 
> 赞同：1
> 
> 时间：2012-12-17T19:00:53.693
> 
> 标签：ruby-on-rails, ruby, macos, terminal

我有一段时间没有使用 Ruby，所以我今天才回来使用它，每当我尝试使用 rails s 或 rails console 时，它​​都会吐出通用帮助文本，即

```
 rails console                                                  ~
Usage:
  rails new APP_PATH [options]

Options:
  -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
                                 # Default: /Users/cabelhigh/.rvm/rubies/ruby-1.9.2-p320/bin/ruby
  -b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem path or URL)
  -m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
      [--skip-gemfile]           # Don't create a Gemfile
      [--skip-bundle]            # Don't run bundle install 
```

它只是一遍又一遍地这样做。知道有什么问题吗？

另外，我正在运行 OSX，如果这与它有关的话。

编辑：版本信息：Rails 3.2.8，ruby 1.9.2p320（2012-04-20 修订版 35421）[x86_64-darwin11.3.0]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:09:18.613

执行命令时，您不在 Rails 应用程序目录中

制作一个新的 Rails 应用程序

```
rails new blog 
```

cd 进入目录

```
cd blog 
```

并运行

```
rails s 
```

或者

```
rails c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:09:58.090

`rails console`仅适用于 Rails 项目目录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:20:02.553

Rails 控制台仅在 rails 项目目录中工作。

可能你想运行 ruby​​ 控制台？（如 irb、pry 等）

# hadoop - 是否有一个好的库可以帮助使用 Hadoop Streaming 和 Python 链接 MapReduce 作业？

> ID：13920391
> 
> 赞同：1
> 
> 时间：2012-12-17T19:01:08.717
> 
> 标签：hadoop, mapreduce, machine-learning, hadoop-streaming, mrjob

[这个](https://stackoverflow.com/questions/8860214/can-we-cascade-multiple-mapreduce-jobs-in-hadoop-streaming-lang-python)问题回答了我的部分问题，但不完全。

如何运行管理此脚本的脚本，它来自我的本地文件系统吗？像 MrJob 或 Dumbo 这样的东西到底在哪里出现？还有其他选择吗？

我正在尝试运行 K-Means，其中每次迭代（一个 MapReduce 作业）输出将是使用 Hadoop Streaming 和 Python 进行下一次迭代的输入。

我没有太多经验，任何信息都可以帮助我完成这项工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:44:37.693

如果您与 Python 的耦合不是很紧密，那么您有一个很好的选择。Cloudera 有一个名为“ [Crunch](https://github.com/cloudera/crunch) ”的项目，它允许我们轻松地创建 MR 作业的管道。它是一个 java 库，为编写、测试和运行 MapReduce 管道提供框架，并且基于 Google 的 FlumeJava 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:38:40.387

还有另一个非 python 选项。[Graphlab](http://graphlab.org/toolkits/clustering/)是一个开源项目，用于在多核机器和集群上免费实现可扩展的机器学习算法。包中包含 Kmeans++ 算法的实现快速可扩展版本。有关详细信息，请参阅[Graphlab](http://graphlab.org/toolkits/clustering/)。

![在此处输入图像描述](../Images/2aa2697e4a27f5133cd72472c92c8ea4.png)

graphlab 的聚类 API 可以在[这里](http://docs.graphlab.org/clustering.html)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T21:35:06.147

应该可以使用在 Hadoop 上运行的 GraphLab Create（在 Python 中）来执行您所描述的操作。[聚类工具包](http://graphlab.com/products/create/docs/graphlab.toolkits.clustering.html)可以帮助实现 K-Means 部分。您可以从本地计算机协调/编写脚本，并使用[graphlab.deploy API](http://graphlab.com/products/create/docs/graphlab.deploy.html)在 Hadoop 上运行作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-23T10:44:49.053

似乎是[Spark](http://spark.apache.org/)的一个很好的应用程序，它也有流选项，但我担心它只适用于 Scala，但他们有 Python API，绝对值得一试，它并不难使用（至少是教程）而且它可以大规模。

# php - 为什么我的 JQuery 脚本在附加时会添加 html 标签？

> ID：13920393
> 
> 赞同：1
> 
> 时间：2012-12-17T19:01:13.517
> 
> 标签：php, jquery, html, json

将 json 数组发送到我想将其附加到 div 的 jquery 脚本时遇到问题。在 php 中，我创建了一个包含以下 html 代码的 json 数组：

```
<li id="1234">
   <span class="some">$1</span>
   <span class="some2">$1</span>
   <div class="somediv"></div>
</li> 
```

所以整个 json 数组看起来像这样：

```
[{"id":"12435","text":"<li id=\"1234\"><span class=\"some\">$1</span>"},{"id":"13542","text":"<span class=\"some2\">$1</span><div class=\"somediv\"></div></li>"}]; 
```

现在我使用 getJSON 来获取 json 对象，然后将结果附加到 div 中，如下所示：`$(".container").append(val);`

现在的问题是，当试图附加 JSON 结果时，这就是附加的内容：

```
<li id="1234">
   <span class="some">$1</span>
</li>
<li id="1234">
   <span class="some2">$1</span>
   <div class="somediv"></div>
</li> 
```

当我尝试用它输出 my`val`时，`alert(val)`它清楚地表明 json 结果是正确的（没有结束`<li>`标签），但是在附加它时，`<li>`会添加标签。

有谁知道这可能是什么原因？

这就是我从我的 php 文件中获取值的方式：

```
$.getJSON("../ajax.php?action=getresults", function(data)
        {
            var obj = $.parseJSON(data);

            $.each(obj, function(key,val)
            {
                $.each(obj[key], function(key, dval)
                {
                    if(key == "text")
                    {
                        alert(dval);
                        $(".container").append(dval);
                    }
                })          

            });         

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:08:08.720

jQuery 正在附加 HTML，但您正在向它传递部分 HTML 块。尝试将所有 HTML 连接成一个值，然后附加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:08:49.100

jQuery 方法需要完整的 dom 节点。jQuery 方法被设计为仅从写了一半的标签自动创建元素，因此这可能不像您希望的那么容易。

一种替代方法是在 JavaScript 中构建字符串并在完成时追加。或者，您可以使用 vanilla JavaScript 执行此操作。不过，我会警告它，因为任何错误都可能使页面处于令人讨厌的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:08:35.203

目前，您的 html 标签在第二个数组中关闭。因此，您必须在附加之前将所有收集到的 html 存储到一个 var 中。

```
var html = '';

$.each(obj[key], function(key, dval)
{
    if(key == "text")
    {
        alert(dval);
        html += dval;
    }
});

$('.container').append(html); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T19:04:22.423

你试过这个吗？

```
$(".container").html(val); 
```

# php - 为什么 ffmpeg.exe 并不总是终止？

> ID：13920395
> 
> 赞同：1
> 
> 时间：2012-12-17T19:01:28.290
> 
> 标签：php, windows, ffmpeg, exec

我在 php 中有一个脚本，它使用 exec() 输出到 ffmpeg - 它从图像和 mp3 创建一个 mp4。

这是我正在执行的命令：

```
"C:\\Program Files\\ffmpeg\\bin\\ffmpeg.exe" -loop 1 -r 0.1 -i image.jpg -i mp3.mp3 -c:v libx264 -preset ultrafast -crf 18 -tune stillimage -c:a copy -filter:v "[in] scale=-1:720, pad=1280:720:640-iw/2 [out]" -shortest out.mp4 -report 
```

在绝大多数情况下，它工作正常，大约需要 5 秒然后结束。但是，ffmpeg.exe 进程时不时地使用 100% CPU '挂起'，并且会一直停留在那里直到手动'杀死'。

ffmpeg.exe 似乎没有做任何事情，它创建的 .mp4 不完整并且没有变大，日志文件没有改变，所有文件的修改时间也没有改变。我不知道为什么它使用 100% CPU。

**我可以拍摄相同的图像和 mp3 并再次运行它，它会正常工作。**

我打开了`-report`开关，日志文件中似乎没有任何内容表明它失败且未终止的原因。这是（934 行）日志文件的最后几行，由于某种原因，它似乎在第 10 帧之后停止了：

```
[libx264 @ 0000000001E37D10] frame=   6 QP=18.00 NAL=2 Slice:P Poc:12  I:0    P:0    SKIP:3600 size=11 bytes
[libx264 @ 0000000001E37D10] frame=   7 QP=18.00 NAL=2 Slice:P Poc:14  I:0    P:0    SKIP:3600 size=11 bytes`
[libx264 @ 0000000001E37D10] frame=   8 QP=18.00 NAL=2 Slice:P Poc:16  I:0    P:0    SKIP:3600 size=11 bytes
[libx264 @ 0000000001E37D10] frame=   9 QP=18.00 NAL=2 Slice:P Poc:18  I:0    P:0    SKIP:3600 size=11 bytes
[libx264 @ 0000000001E37D10] frame=  10 QP=18.00 NAL=2 Slice:P Poc:20  I:0    P:0    SKIP:3600 size=11 bytes` 
```

我尝试使用 Process Explorer 检查挂起的 ffmpeg.exe，但由于它是一个后台进程，我似乎无法找到任何有意义的东西，但也许我在这里遗漏了一些东西 - 有没有办法带来后台进程到前台？

任何想法将不胜感激:-)

# jquery - Jquery滚动到，添加#

> ID：13920396
> 
> 赞同：0
> 
> 时间：2012-12-17T19:01:31.970
> 
> 标签：jquery, scroll

我需要帮助，我正在构建一个单页布局网页，并且我可以滚动到脚本，但我希望在按下导航栏类中的按钮时出现。我的意思是说？

当我按下按钮时，它会滚动到该位置，但我想看到 htttp://mysite.com/#top

这就是我所拥有的

```
 $(function(){
$('a[href*=#]').click(function() {
if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'')
    && location.hostname == this.hostname) {
        var $target = $(this.hash);
        $target = $target.length && $target || $('[name=' + this.hash.slice(1) +']');
        if ($target.length) {
            var targetOffset = $target.offset().top;
            $('html,body').animate({scrollTop: targetOffset - 100}, 800); /* Offest 100px because of the fixed nav manu */
            return false;
        }
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-06T07:58:27.117

也许我不完全理解这个问题，但如果你想显示哈希（#top），你应该`return false;`从你的代码中删除。

# c# - 更改 Metro 风格应用的背景颜色无效

> ID：13920397
> 
> 赞同：1
> 
> 时间：2012-12-17T19:01:32.750
> 
> 标签：c#, xaml, windows-8, visual-studio-2012, microsoft-metro

我正在尝试将我在 Visual Studio (XAML) 中的应用程序的背景颜色更改为白色（或 ApplicationPageBackgroundTheme / 或其他任何名称），但它不起作用。当我调试时，它只显示黑色背景。

当我转到“设备”窗格并将默认颜色主题选择为“浅色”时，它会使屏幕上的所有内容变为白色，甚至是文本和背景。

当我在 xaml 中更改颜色的背景时，在运行时它会变回黑色！

我已经搜索过，但没有找到任何信息。这是一个已知的错误？这是以前从未发生过的。我正在使用 Visual Studio 2012 Ultimate。

```
<Page
    x:Class="hjgjhgjg.MainPage"
    IsTabStop="false"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:hjgjhgjh"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" Background="White">

    <Grid Style="{StaticResource LayoutRootStyle}" Background="White">
        <Grid.RowDefinitions>
            <RowDefinition Height="140" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Button x:Name="backButton" Click="GoBack" IsEnabled="False" Style="{StaticResource BackButtonStyle}" />
            <TextBlock x:Name="pageTitle" Grid.Column="1" Text="gfdgfdg" Style="{StaticResource PageHeaderTextStyle}" />
        </Grid>
    </Grid>
</Page> 
```

![在此处输入图像描述](../Images/58305a35ac87cdfc901ebc3241c2f940.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:13:25.500

如果我没记错的话，您可以在第一个选项卡中签入清单。那里应该有你的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T01:10:48.327

如果没有更多的应用程序/样式，很难确切知道发生了什么，但更改主题的一种简单方法是使用`Application`对象的[RequestedTheme 属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.requestedtheme)。

例如，在 App.xaml 中，设置`RequestedTheme="Light"`为 Application 元素的属性：

```
<Application
    x:Class="App1.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App1"
    RequestedTheme="Light"> 
```

这会很有帮助，因为 Light 主题会影响所有页面并自动更改文本/按钮/等。如果您只将背景颜色设为白色，则变为黑色而不是*所有内容*都是白色的。

本演练涵盖了这一点以及如何使用您自己的自定义样式覆盖默认样式：

*   [第 1 部分：创建“Hello, world”应用（使用 C#/VB 和 XAML 的 Windows 应用商店应用）](http://msdn.microsoft.com/en-us/library/windows/apps/Hh986965)

顺便说一句，设备窗格不会更改应用程序设置，而是在设计视图中模拟应用程序在各种设备功能/设置（屏幕、主题等）下的显示方式。因此，虽然它在设计器中看起来像是一个主题，但它正在发生恢复到实际运行时系统/XAML/代码产生的任何结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:27:11.867

页面的背景颜色将不可见，因为根 Grid 是不透明的，并且默认情况下将其颜色设置为黑色，您可以将 Grid 的颜色设置为透明颜色，或者将白色应用于网格，我看到您已经将颜色应用于网格，我建议您退出网格的样式属性，看看是否有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T09:55:52.373

我找到了另一种方式。

如果单击 XAML 代码中的网格项，将其选中。然后查看属性窗口，展开`Brush`属性，您将看到“ `Background`”项。点击背景属性右侧的黑色小方块，会弹出一个菜单。点击“ `Convert to Local value`”。这将使您能够使用下面的可用项目更改背景。我得到了从绿色到黄色的渐变填充！阴森！:-)

# jquery-ui - 如何将主页/设置按钮添加到 PhoneGap (webview)

> ID：13920399
> 
> 赞同：0
> 
> 时间：2012-12-17T19:01:38.073
> 
> 标签：jquery-ui, css, cordova

我将使用 PhoneGap 开发一个应用程序，它将在每个 web 视图的顶部包含图标形式的**主页**和**设置**按钮，就像 android 中的操作栏菜单一样。我正在为 JQuery Mobile 使用从 ThemeRoller (CSS) 生成的模板。任何人都可以用一些例子来提供建议吗？

此处示例：http: [//dl.dropbox.com/u/72519118/ThemeRoller.png](http://dl.dropbox.com/u/72519118/ThemeRoller.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:18:10.993

```
<div data-role="page" id="homepage" data-theme="a">

</div>

<div data-role="page" id="secondpage" data-theme="a">
    <div data-role="header">
        <a href="#homepage">Home</a>
        <h1>Edit Contact</h1>
        <a href="#settings" data-icon="gear">Settings</a>       
    </div>   
</div>

<div data-role="page" id="settings" data-theme="a">
<div data-role="header">
    <a href="#homepage">Home</a>
</div>
</div> 
```

如果您想使用 Jquery Mobile 创建主页按钮，只需执行以下操作 :)

将带有文本“home”的链接放在您想要的位置，您可以随意设置它的样式:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:08:31.567

-在标题中放置图像标签代替锚标签

```
<img src="images/ajax-loader.gif" />

 <a href="#homepage">Home</a> 
```

# version-control - Gradle 任务将 hg 修订写入文件

> ID：13920400
> 
> 赞同：11
> 
> 时间：2012-12-17T19:01:41.287
> 
> 标签：version-control, groovy, mercurial, gradle

有没有一种简单的方法可以在 gradle 任务中写入 mercurial 版本（或类似的外部命令）：

我还不熟悉 groovy/gradle，但我目前的努力看起来像这样：

```
task versionInfo(type:Exec){
    commandLine 'hg id -i -b -t'
    ext.versionfile = new File('bin/$baseName-buildinfo.properties')

    doLast {
        versionfile.text = 'build.revision=' + standardOutput.toString()
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T20:29:13.547

这个构建脚本有两个问题：

1.  命令行需要拆分；gradle 试图执行一个名为而`hg id -i -b t`不是`hg`带参数的二进制文件`id`，`-i`和`-b``t`
2.  需要捕获标准输出；你可以让它`ByteOutputStream`稍后阅读

试试这个：

```
task versionInfo(type:Exec){
    commandLine 'hg id -i -b -t'.split()
    ext.versionfile = new File('bin/$baseName-buildinfo.properties')
    standardOutput = new ByteArrayOutputStream()

    doLast {
        versionfile.text = 'build.revision=' + standardOutput.toString()
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-19T11:53:50.090

这里我有一点不同的方法，它使用 javahg 来获得修订。并添加任务“writeRevisionToFile”

我在我的博客[Gradle - Get Hg Mercurial revision](http://vondrnotes.blogspot.cz/2015/10/gradle-get-hg-mercurial-revision.html)上写了简短的帖子。

```
buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.aragost.javahg:javahg:0.4'
    }
}

task writeRevisionToFile << {
    new File(projectDir, "file-with-revision.txt").text = scmRevision
}

import com.aragost.javahg.Changeset
import com.aragost.javahg.Repository
import com.aragost.javahg.commands.ParentsCommand

String getHgRevision() {
    def repo = Repository.open(projectDir)
    def parentsCommand = new ParentsCommand(repo)
    List<Changeset> changesets = parentsCommand.execute()
    if (changesets == null || changesets.size() != 1) {
        def message = "Exactly one was parent expected. " + changesets
        throw new Exception(message)
    }
    return changesets[0].node
}

ext {
    scmRevision = getHgRevision()
} 
```

# javascript - WebGL 选择内部格式

> ID：13920402
> 
> 赞同：3
> 
> 时间：2012-12-17T19:01:46.793
> 
> 标签：javascript, html, browser, textures, webgl

`internalformat`在 WebGL 的`texImage2D`调用中可以传递的有效值是什么？WebGL 规范似乎没有说清楚，我不确定桌面 GL 文档中的哪些枚举可以在 WebGL 中使用。

WebGL 定义：`RGB`, `RGBA`, `RGBA4`, `RGB5_A1`, `RGB565`. 所有这些都保证是有效的内部格式吗？

参数是否`type`被考虑在内？如果我设置`internalformat`为`RGB`和`type`，`UNSIGNED_SHORT_5_6_5`这是否保证内部格式为 16 位？还是它总是使用 RGB8 还是根据其他因素决定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:27:39.240

据我了解，以下参数在 webgl 中有效：

> 内部格式：GL_ALPHA、GL_LUMINANCE、GL_LUMINANCE_ALPHA、GL_RGB、GL_RGBA。
> 
> 格式：GL_ALPHA、GL_RGB、GL_RGBA、GL_LUMINANCE 和 GL_LUMINANCE_ALPHA。
> 
> 类型：GL_UNSIGNED_BYTE、GL_UNSIGNED_SHORT_5_6_5、GL_UNSIGNED_SHORT_4_4_4_4 和 GL_UNSIGNED_SHORT_5_5_5_1。
> 
> internalformat 必须匹配格式

来自[opengl ES 2.0](http://www.khronos.org/opengles/sdk/docs/man/)文档：

> internalformat 必须匹配格式。纹理图像处理期间不支持格式之间的转换。type 可以用作指定所需精度的提示，但 GL 实现可以选择以它选择的任何内部分辨率存储纹理数组。

如果 webgl 文档没有提供足够的详细信息，那么[完整](http://www.khronos.org/registry/gles/specs/2.0/es_full_spec_2.0.24.pdf)的opengl es 2.0 文档可能会有所帮助（第 3.7.1 章）。从 webgl 和 opengl es 2.0 之间的[差异来看，webgl 和 opengl es 2.0](http://www.khronos.org/registry/webgl/specs/1.0/#webgl_gl_differences)`glTexImage2D`之间应该没有任何区别

# python - Python Matplotlib 绘制 CSV 数据，格式化日期 X 标签

> ID：13920403
> 
> 赞同：-1
> 
> 时间：2012-12-17T19:01:56.067
> 
> 标签：python, datetime, matplotlib, plot

我的数据如下所示：

```
2012021305, 65217
2012021306, 82418
2012021307, 71316
2012021308, 66833
2012021309, 69406
2012021310, 76422
2012021311, 94188
2012021312, 111817
2012021313, 127002
2012021314, 141099
2012021315, 147830
2012021316, 136330
2012021317, 122252
2012021318, 118619
2012021319, 115763
2012021320, 121393
2012021321, 130022
2012021322, 137658
2012021323, 139363 
```

其中第一列是数据 YYYYMMDDHH 。我正在尝试使用 csv2rec 模块绘制数据。我可以将数据绘制成图表，但 x 轴和标签并没有按照我期望的方式显示。

```
import matplotlib
matplotlib.use('Agg')
from matplotlib.mlab import csv2rec
import matplotlib.pyplot as plt
import matplotlib.dates as mdates
from pylab import *

output_image_name='plot1.png'
input_filename="data.log"

input = open(input_filename, 'r')

input.close()

data = csv2rec(input_filename, names=['time', 'count'])
rcParams['figure.figsize'] = 10, 5
rcParams['font.size'] = 8

fig = plt.figure()

plt.plot(data['time'], data['count'])

ax = fig.add_subplot(111)
ax.plot(data['time'], data['count'])
hours = mdates.HourLocator()
fmt = mdates.DateFormatter('%Y%M%D%H')
ax.xaxis.set_major_locator(hours)
ax.xaxis.set_major_formatter(fmt)

ax.grid()

plt.ylabel("Count")
plt.title("Count Log Per Hour")

fig.autofmt_xdate(bottom=0.2, rotation=90, ha='left')

plt.savefig(output_image_name) 
```

我认为这与日期格式有关。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:01:40.210

您需要将 x 值转换为`datetime`对象

就像是：

```
time_vec = [datetime.strp(str(x),'%Y%m%d%H') for x in data['time']]
plot(time_vec,data['count']) 
```

目前，您告诉 python 将整数 (2012021305) 格式化为日期，它不知道该怎么做，因此它返回空字符串（尽管我怀疑您在某个地方遇到了错误）。

您还应该检查您的[格式字符串](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)标记。

# javascript - 在 Ember-data 中以自定义方式保存属性

> ID：13920404
> 
> 赞同：0
> 
> 时间：2012-12-17T19:02:14.633
> 
> 标签：javascript, rest, ember.js, ember-data

假设我有一个模型，它的一些属性存储在数据库中，另一个存储在其他地方，但客户端将它作为一个单独的 JSON blob 接收。

```
App.Tournament = DS.Model.extend({
  name:              DS.attr("string"),
  ...
  is_registered:     DS.attr("boolean")
}); 
```

该属性`is_registered`不是服务器中模型的一部分，我想单独保存它。这是一个例子

```
tournament = App.store.find(App.Tournament, 1);
tournament.set("name", "foo bar");
tournament.set("is_registered", true);

App.store.commit(); 
```

这会做类似的事情

```
PUT /tournaments/1 name: "foo bar"
POST /tournaments/1/register 
```

**或类似的东西，其中保存的属性与默认值不同。有没有一种简单的方法可以做到这一点，还是我以错误的方式解决问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:33:21.103

我会在服务器上管理这种复杂性。在超过 1 个请求中在客户端保存一个逻辑项的问题是，如果其中一个请求失败，您的数据可能已损坏。如果你做某种门面服务来协调什么数据去哪里，你可以围绕操作包装一个事务。

# .net - Asp.net 如何根据在另一个用户控件中的下拉框中选择的值从页面中隐藏用户控件

> ID：13920408
> 
> 赞同：0
> 
> 时间：2012-12-17T19:02:42.910
> 
> 标签：.net

我有两个用户控件 uc1 和 uc2。这些用户控件被添加到默认页面。我的问题是当我将 uc2.dropdownlist 框中的项目更改为 2 时，我需要使 uc1 用户控件可见，否则使 uc1 用户控件不可见。在加载默认页面时，我可以通过添加 uc1.visible = false 来隐藏 uc1 用户控件，因为加载时 uc2.datagrid 中选择的值不是 2。但是当我将 uc2.dropdownlist 框中的值更改为 2 时，我无法显示用户控制 uc1。提前感谢您帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:06:43.517

执行此操作时需要回发，并且可以在后面的代码中管理事件以将可见设置为 false。

您可以将 uc2.dropdownlist 设置为 autoPostback，如果要更改此异步，请使用更新面板。

# php - PHP中iframe的正确格式？

> ID：13920409
> 
> 赞同：1
> 
> 时间：2012-12-17T19:02:46.427
> 
> 标签：php, iframe

我正在尝试像这样在 php 中回显一个 iframe。

```
echo
"<li><iframe src=\"http://localhost/ptb1/includes/mod_uploads/profile_pics/index.php" width="188" height="258" scrolling="no" style="overflow:hidden; margin-top:-4px; margin-left:-4px; border:none;\"></iframe></li>"; 
```

无论我在做什么，它都不起作用。有人可以告诉我在 php 中写这个的正确方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T19:05:10.550

您没有正确转义双引号。您只能在位之前和最后一直逃避它`http://`，而不是介于两者之间（这也是必要的）。如果将 HTML 封装在单引号之间，则不必转义所有双引号。试试这样：

```
echo '<li><iframe src="http://localhost/ptb1/includes/mod_uploads/profile_pics/index.php" width="188" height="258" scrolling="no" style="overflow:hidden; margin-top:-4px; margin-left:-4px; border:none;"></iframe></li>'; 
```

虽然，您没有在字符串中使用任何变量，因此您也可以暂时“退出”PHP 并使用纯 HTML，例如：

```
<?php
// Your code starts here somehwere, now close the PHP tag
?>
<li><iframe src="http://localhost/ptb1/includes/mod_uploads/profile_pics/index.php" width="188" height="258" scrolling="no" style="overflow:hidden; margin-top:-4px; margin-left:-4px; border:none;"></iframe></li>
<?php
// ... and continue right here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:06:49.583

是不是因为你只是在引用之后`src=`而`border:none;`不是每一个都转义？

编辑：@Oldskool 打败了我 xD

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:30:57.477

如果你想显示双引号，试试这个

```
<?php    
echo "<li><iframe src=\"http://localhost/ptb1/includes/mod_uploads/profile_pics/index.php\" width=\"188\" height=\"258\" scrolling=\"no\" style=\"overflow:hidden; margin-top:-4px; margin-left:-4px; border:none;\"></iframe></li>";
?> 
```

# objective-c - iPhone5 的 MFMailCompose 问题

> ID：13920410
> 
> 赞同：0
> 
> 时间：2012-12-17T19:02:48.500
> 
> 标签：objective-c, xcode

有没有一种新方法可以为 iPhone 5 提供 MFMailComposeViewController？我正在并排使用 4 和 5，并且 4 呈现/正常工作，但对于 5 它甚至没有命中代码：

```
if ([MFMailComposeViewController canSendMail]) {

    MFMailComposeViewController *mailViewController = [[MFMailComposeViewController alloc] init];
    mailViewController.mailComposeDelegate = self;
    [mailViewController setToRecipients:[NSArray arrayWithObject:@"support@myemail.com"]];
    [mailViewController setSubject:@"Feedback"];
    [mailViewController setMessageBody:@"" isHTML:NO];

    [self presentModalViewController:mailViewController animated:YES];
    [mailViewController release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:19:58.497

你的邮件是为 iPhone5 设置的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:24:21.440

奇怪，它在 iPhone 5 上非常适合我！

```
MFMailComposeViewController *mailVC = [MFMailComposeViewController mailComposeViewControllerWithRecipe:self.recipe];
if (mailVC) {
    mailVC.mailComposeDelegate = self;
    [self presentModalViewController:mailVC animated:YES];
} 
```

你到底是什么意思“它甚至没有击中代码”？也许你的

```
([MFMailComposeViewController canSendMail]) 
```

在另一个地方是假的或有问题的

# c# - 具有共享 web.config 日志记录的多个 Web 服务，以使用 Ent Lib 分隔平面文件

> ID：13920413
> 
> 赞同：2
> 
> 时间：2012-12-17T19:02:52.217
> 
> 标签：c#, .net, wcf, logging, enterprise-library

我正在做一个项目，我需要使用 Enterprise Library v.3.1.1.0 Logging 块（希望它是 log4net 或 nlog，但我别无选择）。我们有一个 IIS 应用程序，其中托管了多个 WCF Web 服务，它们共享一个 web.config 文件。这也是我无权改变的事情。

这些服务之前都没有实现任何日志记录。

因此，使用 Ent Lib Config 实用程序来设置滚动平面文件侦听器并以我想要的方式记录到文本文件是非常简单的。我遇到的问题是正确配置它，因此每个服务都可以拥有自己单独的日志文件，而它们仍然共享相同的 web.config。

我已经阅读了几个教程，但我不明白如何做到这一点。

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T23:04:12.760

web.config 中的配置是静态的，因此每个配置的跟踪侦听器都会有一个文件。实现每个服务一个文件的一种方法是将每个服务记录到不同的类别，并且每个类别使用不同的跟踪侦听器。这甚至可以以编程方式完成，以便服务可以在运行时添加自己的跟踪侦听器，尽管这比手动更新配置文件要先进一些（例如，确保服务只添加一次以及确保在更新配置时它是线程安全）。

Enterprise Library 没有任何类似于 log4net 的分层记录器的东西，因此没有开箱即用的方法来使用反射来根据原始类路由日志消息。这可能是可能的，但您必须编写一些代码。您可以编写一个 Logger 外观类来根据调用者命名空间设置类别。（另请注意，没有像 log4net 这样的命名空间通配符匹配。）

# java - Android：主从项目创建后立即出现错误

> ID：13920420
> 
> 赞同：3
> 
> 时间：2012-12-17T19:03:18.727
> 
> 标签：java, android

我的笔记本电脑上安装了 android 4.1 和 4.0 SDK。我已经完成了很多项目，只是使用一个空白活动，但是当我决定在 Eclipse 中尝试一个“主细节流”示例（创建新的 Android 项目，选择 MasterDetailFlow）时，它甚至不会让我构建。我马上就有错误。这肯定不对吧？以下是错误：

(1)ItemListActivity类型的方法onItemSelected(String)必须覆盖一个超类方法ItemListActivity.java /Master Detail/src/com/example/master/detail 第39行Java问题

(2)new ItemListFragment.Callbacks(){}类型的方法onItemSelected(String)必须覆盖一个超类方法ItemListFragment.java /Master Detail/src/com/example/master/detail 第27行Java问题

我想尝试使用主详细信息表单，以便了解更高级的 android 布局。任何人都可以为我指出一个更好的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:09:22.770

呃，这很痛苦，但这是一个非常简单的解决方案。什么时候应该/不应该使用 @Override 的规则从 Java 5 切换到 Java 6，所以根据 Eclipse 的默认 JDK，它有时会在 @Override 不存在但应该存在时对你大喊大叫，反之亦然。

将 Eclipse 中的编译器级别设置为至少 JDK 6，错误将神奇地消失:)

# php - 检查xml文件是否为空

> ID：13920426
> 
> 赞同：0
> 
> 时间：2012-12-17T19:03:28.867
> 
> 标签：php, xml, error-handling, xml-parsing

如果我将一个不存在或拼写错误的字符串推送到函数中，`benzer($ilk_artist)`我会得到错误底部。我是否推送一个有效的艺术家姓名变量`$completeurl`总是被定义的。所以我不能说`if($completeurl)`我认为我应该控制`$completeurl`之前是否有效`simplexml_load_file($completeurl)`。你知道我该怎么做吗？

```
function benzer($ilk_artist)
{
    $completeurl = 'http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&artist='.trim($ilk_artist).'&api_key='.LASTFM_APP_ID;
    $completeurl = urlencode($completeurl);
    $xml = simplexml_load_file($completeurl);
    if(!$xml)
    {
        return false;
    }
    $artists = $xml->similarartists->artist;
    $length = count($artists); 
    for ($i = 0; $i < $length; $i++) {
        $artistname[$i] = $artists[$i]->name;
    }

    return simplexml_kurtul($artistname);

} 
```

错误：

```
[17-Dec-2012 11:43:33] PHP Warning:  simplexml_load_file(http://ws.audioscrobbler.com/2.0/?method=artist.getsimilar&amp;artist=tgyu+6uh6n&amp;api_key=APIKEY) [<a href='function.simplexml-load-file'>function.simplexml-load-file</a>]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request
 in /home6/.../public_html/.../functions/fns.php on line 102
[17-Dec-2012 11:43:33] PHP Warning:  simplexml_load_file() [<a href='function.simplexml-load-file'>function.simplexml-load-file</a>]: I/O warning : failed to load external entity &quot;http%3A%2F%2Fws.audioscrobbler.com%2F2.0%2F%3Fmethod%3Dartist.getsimilar%26artist%3Dtgyu+6uh6n%26api_key=APIKEY0&quot; in /home6/.../public_html/.../functions/fns.php on line 102 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T00:52:39.600

不通过添加'@'打印出警告怎么办？

```
$xml = @simplexml_load_file($completeurl);
if(!$xml)
{
   return false;
} 
```

# c# - .Net 使用 Lockbits 从位图中获取 RGB 值

> ID：13920428
> 
> 赞同：3
> 
> 时间：2012-12-17T19:03:38.073
> 
> 标签：c#, vb.net, bitmap, rgb, lockbits

我正在使用下面的代码从图像中提取 RGB 值，有时这可行，但是在某些文件上（似乎步幅不能被位图的宽度整除）它返回混合值：

```
Dim rect As New Rectangle(0, 0, bmp.Width, bmp.Height)
Dim bmpData As System.Drawing.Imaging.BitmapData = bmp.LockBits(rect, Imaging.ImageLockMode.ReadOnly, Imaging.PixelFormat.Format24bppRgb)
Dim ptr As IntPtr = bmpData.Scan0
Dim cols As New List(Of Color)
Dim bytes As Integer = Math.Abs(bmpData.Stride) * bmp.Height
Dim rgbValues(bytes - 1) As Byte
System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes)

' Retrieve RGB values
For i = modByte To rgbValues.Length Step 3
     cols.Add(Color.FromArgb(rgbValues(i + 2), rgbValues(i + 1), rgbValues(i)))
Next

bmp.UnlockBits(bmpData)
bmp.Dispose()
Dim colsCnt As List(Of RgbPixels) = cols.GroupBy(Function(g) New With {Key .R = g.R, Key .G = g.G, Key .B = g.B}).Select(Function(s) New RgbPixels With {.Colour = Color.FromArgb(s.Key.R, s.Key.G, s.Key.B), .Amount = s.Count()}).ToList() 
```

对结果颜色进行分组后，值类似于：

```
R    G    B
255  255  255
255  255  0
255  0    0
0    0    255
0    255  255 
```

或者一些变体，当它们应该是：

```
R    G    B
255  255  255
0    0    0 
```

请指出正确的方向，顺便说一句，我的源 bmp 也在 PixelFormat.Format24bppRgb 中，所以我不认为这是问题所在。此外，如果您只能用 C# 回答，那也不是问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:13:31.063

问题是您没有考虑步幅值。步幅总是被填充，以便每个图像行的字节数组的宽度可以被 4 整除。这是与内存复制和 CPU 工作方式相关的优化，它可以追溯到几十年前并且仍然有用。

F.ex，如果一张图像的宽度为 13 像素，则步幅将是这样的（简化为一个组件）：

```
=============    (width 13 pixels = 13 bytes when using RGB)
================ (stride would be 16) 
```

对于 14 像素的图像，它看起来像这样：

```
==============   (width 14 pixels = 14 bytes when using RGB)
================ (stride would still be 16) 
```

因此，在您的代码中，您需要处理一个跨度行而不是一个字节数组，除非您使用的是固定和定义的图像宽度。

我修改了您的代码，使其大步跳过行：

```
Dim rect As New Rectangle(0, 0, bmp.Width, bmp.Height)
Dim bmpData As System.Drawing.Imaging.BitmapData = bmp.LockBits(rect, Imaging.ImageLockMode.ReadOnly, Imaging.PixelFormat.Format24bppRgb)
Dim ptr As IntPtr = bmpData.Scan0
Dim cols As New List(Of Color)
Dim bytes As Integer = Math.Abs(bmpData.Stride) * bmp.Height
Dim rgbValues(bytes - 1) As Byte
System.Runtime.InteropServices.Marshal.Copy(ptr, rgbValues, 0, bytes)

Dim x, y, dx, l as Integer

For y = 0 To rect.Height - 1

    l = y * bmpData.Stride 'calulate line based on stride

    For x = 0 To rect.Width - 1

        dx = l + x * 3  '3 for RGB, 4 for ARGB, notice l is used as offset

        cols.Add(Color.FromArgb(rgbValues(dx + 2), _
                                rgbValues(dx + 1), _
                                rgbValues(dx)))
    Next
Next

' Retrieve RGB values
'For i = modByte To rgbValues.Length Step 3
'     cols.Add(Color.FromArgb(rgbValues(i + 2), rgbValues(i + 1), rgbValues(i)))
'Next

bmp.UnlockBits(bmpData)
bmp.Dispose() 
```

# c# - 跟随关系的实体设计建议

> ID：13920431
> 
> 赞同：2
> 
> 时间：2012-12-17T19:03:48.053
> 
> 标签：c#, sql, entity-framework

我有以下业务案例需求：

1.  我有一个项目数据库。
2.  每个项目都会有几个人以不同的角色（项目所有者、支持人员等）与之相关联。
3.  一个人可能在项目中扮演多个角色。
4.  项目中人员的联系方式是在项目创建时获取的，并且在为该人员更新时不应为该项目更新。

我提出了以下数据库结构：

![在此处输入图像描述](../Images/3c7713c3201543e8de3c0f043081039b.png)

ContactDetails 目前计划为 1-1，但在单个项目的多个人员/角色映射可以共享单个 ContactDetail 的情况下分开。

我的问题：通常情况下，我将加载与我的项目相关的人员列表，以他们的各种角色。根据我布置的结构，我的实体应该是什么样子：ProjectPerson 是否已成为实体，而不仅仅是一个交叉引用（最初是这样）？

**[更新]**

包括我基于以下答案的新数据结构，以防它帮助其他人。按照建议。 ![在此处输入图像描述](../Images/2466f93a061f33fed6dd77274e5fee30.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:28:11.193

我会将联系方式移到 ProjectPeople 中，并将角色提取到与 ProjectPeople 具有一对多关系的单独表中。

要回答您的问题，是的 ProjectPerson 现在是您的域模型中的一个实体；事实上，我会说它成为一个不仅仅是一个简单的多对多映射表。

我们有类似的结构，它提出了一些挑战。我对其进行了建模，以便 Project 具有 ProjectPerson 的集合，而 Person 具有 Project 的只读集合。

# java - 如何在 informatica 中动态查找 XML 文件？

> ID：13920440
> 
> 赞同：2
> 
> 时间：2012-12-17T19:04:54.933
> 
> 标签：java, xml, informatica-powercenter

我想在 informatica 中查找 XML 文件。我在 XML 文件中写了一些 id，在写入 XML 之后，我想检查天气记录是否在 XML 文件中。

我尝试将 XML 文件视为平面文件，但无法动态执行此检查。我可以使用 Java 转换来检查吗？

请帮忙

谢谢

# clearcase - 查找在特定 ClearCase 分支中修改的所有文件？

> ID：13920442
> 
> 赞同：3
> 
> 时间：2012-12-17T19:05:10.333
> 
> 标签：clearcase

有没有一种方法可以创建一个视图，为我提供在特定 ClearCase 分支中修改的所有文件的快照？

例如，假设我有两个分支：

```
product_1.0_dev
product_migration_1.0_dev 
```

第二个分支被设想为升级我们的核心框架依赖项的测试场。我知道如果我修改 product_migration_1.0_dev 中的文件，那么我将在此分支下有一个 \1 版本，因此必须有一种方法来编写加载规则以轻松将此信息获取到快照中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:21:43.910

那将是一个选择规则（不是加载规则）

```
 element * .../product_migration_1.0_dev/LATEST
 element * .../product_1.0_dev/LATEST
 element * /main/LATEST 
```

注意 ' `...`' 符号（参见[版本选择器](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/version_selector.htm)），一个省略号通配符，允许在任何分支级别选择一个分支。

请注意，这将列出*所有*文件，包括您想要的文件。

如果您只想*查看*特定分支的文件，您仍然需要选择它们的*父*`product_migration_1.0_dev`目录：并且那些可能在分支中没有版本。

因此，以下配置规范（我邀请您首先在*动态*视图中进行测试：它更快，然后您将在快照视图中报告该配置规范，并带有自己的*加载*规则）会更精确：

```
 element * .../product_migration_1.0_dev/LATEST
 element -directory * .../product_1.0_dev/LATEST
 element -directory * /main/LATEST 
```

`product_migration_1.0_dev`因此，您将选择分支中具有 LATEST 的文件和目录。否则，您只在分支或分支
中选择目录。`product_1.0_dev``main`

That way, you are sure to select the parent directory of an element which might have a version in `product_migration_1.0_dev` branch.
If you don't do that, your view won't ever be able to select the files, because their parent directories are not accessible (none of their versions is selected from which a `product_migration_1.0_dev` branch starts).

# windows - 是通过 BIOS 在 x86 CPU 上引发软件中断的唯一方法吗？

> ID：13920445
> 
> 赞同：1
> 
> 时间：2012-12-17T19:05:21.970
> 
> 标签：windows, interrupt-handling

实际上，我的印象是这有点过时，现代操作系统（Windows、Linux）直接调用 CPU。

**编辑：**
我在维基百科上的[BIOS 中断调用](http://en.wikipedia.org/wiki/BIOS_interrupt_call)文章中阅读了它。

> 例如，使用 BIOS 中断 0x10 [...]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-17T06:59:17.243

不，现代应用程序不会也不能使用 BIOS 中断（因为它们必须从 16 位模式调用）。

软件中断用于系统调用，它让应用程序将控制权传递给操作系统以执行应用程序不允许执行的操作（例如，写入视频内存或访问硬件）。

# javascript - if 语句中的布尔运算符不起作用

> ID：13920446
> 
> 赞同：1
> 
> 时间：2012-12-17T19:05:25.417
> 
> 标签：javascript

有人可以解释这里发生了什么吗？我正在尝试[将此处描述](https://stackoverflow.com/questions/784929/what-is-the-not-not-operator-in-javascript)`!!`的 javascript (double-bang) 运算符与[HTML5 本地存储](http://diveintohtml5.info/storage.html)结合使用（我正在存储 0 和 1 值并测试真实性，但我还需要一个缺失的键为假，因此开始时未定义。

尽管在类型转换时它会在控制台中回显为 false，但它不在“if”语句中。

```
var foo = undefined;

// outputs undefined
console.log(foo)

// typecast to non-inverted boolean 
console.log(!!foo);

if (!!foo) {
    console.log("If was false before, why won't this execute?");
}​ else {
    console.log("It didn't work");
}​​​​​​​​​​​​​​​ 
```

产生：

```
undefined
false
It didn't work 
```

[http://jsfiddle.net/YAAA7/](http://jsfiddle.net/YAAA7/)
(Chrome v 23.0.1271.97 & Firefox 16.0.1, OS X 10.8.2)

**编辑 - 更正的代码：**

（之前的“if”语句只是评估为假，因此该分支永远不会运行。）

```
var foo = false;

// outputs undefined
console.log(foo)

// typecast to non-inverted boolean 
console.log(!!foo);

if (!!foo == false) {
    console.log("Matches for foo undefined, foo = 0 and foo = false");
} else {
    console.log("Matches for foo = 1 and foo = true");
}​ 
```

[http://jsfiddle.net/YAAA7/1/](http://jsfiddle.net/YAAA7/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T19:08:06.650

这是预期的行为。如果你加倍不假，你就会假。这 , `!`l 是一个非运算符。这 , `!!`, 是两个非运算符。双非运算符有时用于转换为布尔类型。

```
! false === true
!! false === false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:12:11.073

```
var foo = undefined; 
```

`foo`将返回真。因为，在 JavaScript "" 中，undefined、0、NaN、false 和 null 被认为是错误值。

[http://www.mapbender.org/JavaScript_pitfalls:_null,_false,_undefined,_NaN](http://www.mapbender.org/JavaScript_pitfalls:_null,_false,_undefined,_NaN)。

从您的代码：

```
var foo = undefined; //false

console.log(!!foo); // !!foo = false;

if(!!foo) { //false
  console.log("It will not come because the condition fails");
}else{
    console.log("Else Part");
 } 
```

# java - 在 Java Swing 组件中劫持“repaint()”调用

> ID：13920447
> 
> 赞同：4
> 
> 时间：2012-12-17T19:05:26.993
> 
> 标签：java, swing, user-interface

我正在编写一个在无头环境中运行的应用程序，需要输出到 a`BufferedImage`而不是屏幕。我有一个`Display`班级管理`BufferedImage`. 我的应用程序扩展`JPanel`并且为了使其在组件更新时自动重绘，我重新实现`repaint()`为：

```
public void repaint(){
    Graphics2D g = getDisplay().getGraphics();
    paint(g);
    getDisplay().repaint();
} 
```

但是，每当我启动我的应用程序时，`NullPointerException`当它尝试绘制到`Display`. 这应该是`JPanel`构造函数中试图重绘的一些代码。问题是`getDisplay()`返回null。但是，*此时`Display`已经实例化并传递给应用程序。*`Display`在将其发送到应用程序之前，我已经通过在创建时打印出它自己的属性来验证这一点。

例外情况如下；最上面的位置是指包含以下内容的行`getDisplay()`：

```
Exception in thread "main" java.lang.NullPointerException
    at com.mypapyri.clay.ui.App.repaint(App.java:28)
    at javax.swing.JComponent.setFont(JComponent.java:2746)
    at javax.swing.LookAndFeel.installColorsAndFont(LookAndFeel.java:208)
    at javax.swing.plaf.basic.BasicPanelUI.installDefaults(BasicPanelUI.java:66)
    at javax.swing.plaf.basic.BasicPanelUI.installUI(BasicPanelUI.java:56)
    at javax.swing.JComponent.setUI(JComponent.java:655)
    at javax.swing.JPanel.setUI(JPanel.java:153)
    at javax.swing.JPanel.updateUI(JPanel.java:126)
    at javax.swing.JPanel.<init>(JPanel.java:86)
    at javax.swing.JPanel.<init>(JPanel.java:109)
    at javax.swing.JPanel.<init>(JPanel.java:117)
    at com.mypapyri.clay.ui.App.<init>(App.java:18)
    at ClayOS.<init>(ClayOS.java:22)
    at ClayOS.main(ClayOS.java:84) 
```

**编辑：**我对此进行了研究，但找不到令人满意的解决方案。

*   [repaint() 方法和 GUI 线程](http://www.scs.ryerson.ca/mes/courses/cps530/programs/threads/Repaint/index.html)
*   [组件](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Component.html)的 Javadocs
*   油漆管理器和重绘管理器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:01:37.713

nidu先说了，他不回答我就说。

可能您在构造函数方法中调用 super()，而 JPanel 构造函数试图在设置显示之前重新绘制。

# asp.net - 使用Jquery创建拖放选择框或文本框？（不是列表）

> ID：13920448
> 
> 赞同：1
> 
> 时间：2012-12-17T19:05:32.917
> 
> 标签：asp.net, asp.net-mvc, jquery-ui

我已经通过各种 jquery UI 演示进行了拖放和排序。这些展示了如何将项目从一个列表获取到另一个列表。一个例子甚至展示了一个购物车演示。

我是不是错过了什么

*   项目不会成为服务器帖子的一部分，对吗？那么除了重新组织页面上的显示之外，这还有什么用呢？

    是否可以使其适应某种输入字段？

    蒂亚杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:19:20.730

> 项目不会成为服务器帖子的一部分，对吗？那么除了重新组织页面上的显示之外，这还有什么用呢？

允许用户重新组织页面中的元素是一个不错的功能，即使您没有在服务器上收到通知。例如，通过允许用户拖放元素，您可以存储他当前的页面布局，`localStorage`以便下次用户访问您的页面时，布局会自动恢复。您不需要在服务器端收到用户偏好的通知。

所有这些 jQuery 插件（可排序、可拖动等）都具有可以挂钩并触发一些服务器端处理的功能。例如，当用户将一个元素从屏幕的一个部分拖放到另一个部分时，您可以完美地发出 ajax 请求并在您端进行一些处理。这将为用户提供非常好的用户体验。

例如：

```
$( ".selector" ).droppable({
    drop: function( event, ui ) {
       $.post('http://server/somection',data{...});//do something on the server-side
    };
}); 
```

绝对地！[jsfiddle 在这里演示。](http://jsfiddle.net/jrh9N/)

# objective-c - Objective-C 中的子类 NSArray

> ID：13920451
> 
> 赞同：5
> 
> 时间：2012-12-17T19:05:36.870
> 
> 标签：objective-c, ios, nsarray

我需要一个类，它具有 NSArray 的所有方法，它们的行为方式相同，但修改了 2 个方法。

我想在我的自定义类中覆盖这两种方法：

1) countByEnumeratingWithState:objects:count:

2）objectAtIndex：

经过数小时的研究，我没有看到任何合理的方法可以做到这一点，因为：

*   我不想使用类别，因为并非所有 NSArray 实例都应该具有修改后的行为。（加上会引发警告）

*   我不想重写所有初始化器加上所有 arrayWith... 方法 + 原始方法 + 实现了我自己的存储（因为这个功能已经在 Cocoa 中实现了，对吧？我为什么要重新实现一个已经存在的类？）

*   如果我让我的自定义类继承 NSObject 并使用 NSArray 作为 ivar 中的存储，那么在 Xcode 中编程时所有 NSArray 的方法都不可用（即使我可以将它们转发到 NSArray ivar）

*   我通过使用 method_setImplementation(...) 按需覆盖了一些方法实现，但仍然无法找到一种在运行时动态创建类的方法，然后将自定义实现我提到的 2 种方法。

期待你的想法！谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-18T16:53:59.860

*口头禅：* 如果某些东西很难（或者看起来需要比必要更多的代码），那么您的设计很可能与 iOS / OS X 框架的设计原则背道而驰。它可能会产生更好的解决方案来重新审视您的设计。

* * *

要回答最初的问题，如果要继承 NSArray（或 NSMutableArray），则需要实现原始方法，不多也不少。

原始方法是在`@interface`类本身中声明的方法。IE：

```
@interface NSArray : NSObject
- (NSUInteger)count;
- (id)objectAtIndex:(NSUInteger)index;
@end 
```

对于 NSMutableArray：

```
@interface NSMutableArray : NSArray
- (void)addObject:(id)anObject;
- (void)insertObject:(id)anObject atIndex:(NSUInteger)index;
- (void)removeLastObject;
- (void)removeObjectAtIndex:(NSUInteger)index;
- (void)replaceObjectAtIndex:(NSUInteger)index withObject:(id)anObject;
@end 
```

如果您将 NSMutableArray 子类化并实现上述 7 个方法（也来自 NSArray 的两个），您将拥有一个与所有使用可变数组的 API 兼容的 NSMutableArray 子类（假设您的方法已正确实现）。

这是因为类集群的设计方式。公共类是抽象的；永远不会直接实例化。它们提供了一个原始接口，其中包含类的核心功能，然后是所有其他非原始 API 的具体实现（除了初始化程序，见下文），这些 API 是根据原语实现的。然后，具体的私有子类覆盖所有原语和一些非原语，以为特定配置提供最佳行为。

> 我想为我正在处理的库提供一个 NSArray 实例，并且我希望它对我的库的用户透明地工作。IE。对于他们来说，使用普通的 NSArray 和我将提供的修改后的类应该没有区别。IE。这是一个存储问题，最终用户不应该关心它，并且接口应该与 NSArray 保持相同 - 因此，此时失去所有 init 方法并不是一个真正的选择。

初始化方法*不是*原始接口的一部分`NSArray`。您正在添加一个超出文档定义的“使类与`NSArray`/兼容”的要求。`NSMutableArray`没有错，只是指出来。

之所以会出现这种情况，是因为将集合类子类化以提供您描述的那种业务逻辑非常罕见。集合的行为非常通用，而这种条件化集合行为的业务逻辑将在管理整个模型层对象图的类中完成。

如果您真的想这样做，请提供`init*`您想要的任何方法的实现，并根据需要调用您包装的通用实例。初始化器的实现并没有什么特别之处，这样做你会失去很多。

也不需要实现所有这些。实现一两个并@throw 其余的描述性异常。

如果您决定转发接受 var-args 的那些，则不能直接转发，因为没有 va_list 接受方法。相反，您需要将参数的 va_list 转换为语言数组（即`id[] foo = malloc(... * sizeof(id));`）并将其传递给`initWithObjects:count:`.

其他一些评论：

*   您正在做的[在子类中提供完整的 NS*Array 接口] 似乎很难，因为它不是一种常见的模式，而且框架设计者认为没有必要创建支持它的设计。原始集合级别的自定义行为几乎总是在对象图中的更高级别更好地实现。 *几乎*总是。

*   method_setImplementation() 和动态类创建在学术上很有趣，但几乎从来都不是解决方案。显然，使用 NSArray 或 NSMutableArray 类（或具体的实现类）会破坏其他依赖标准行为的框架。除此之外，它是一种动态 OO 组合模式，并不真正打算在 Objective-C 中使用。维护起来会很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T09:00:43.350

与其继承 NSArray，为什么不基于 NSObject 创建一个包含 NSArray 的新类？

然后您可以使用 NSArray 的所有功能并添加您自己的方法来执行自定义操作吗？

或者你需要一个 NSArray？

# jquery - Jquery + addClass + 动态wordpress post id

> ID：13920452
> 
> 赞同：0
> 
> 时间：2012-12-17T19:05:36.840
> 
> 标签：jquery, html, wordpress

我正在寻求有关将类（“已选择”）添加到具有动态 WordPress 帖子 ID 的 div 的帮助。单击链接时，它将跳转到具有 WordPress 帖子 ID 的相应 div。我如何获得jQuery找到锚链接到的动态div ID，并为其添加一个类？

HTML：

```
<a class="jump" href="#<?php the_ID(); ?>">
<div class="wrap">
<div class="content" style="width: ;">
 <div id="132" class="column">Post Div</div>
 <div id="345" class="column">Post Div</div>
 <div id="64" class="column">Post Div</div>
 <div id="22" class="column">Post Div</div>
</div>
</div>
</div> 
```

查询：

```
$('a.jump').click(function(){
$('#22').addClass('selected')
$(element).siblings().removeClass('selected')
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:07:31.773

```
$('a.jump').click(function(){

   // this.href will something like  #22, #132... etc

   $('div.content ' + this.href ).addClass('selected');
   $(element).siblings().removeClass('selected')
}); 
```

# matlab - 如何使用 MATLAB 使用 Butterworth 设计带阻和带通滤波器

> ID：13920453
> 
> 赞同：2
> 
> 时间：2012-12-17T19:05:39.943
> 
> 标签：matlab, filter

我一遍又一遍地使用 MATLAB Help 和 google，但找不到任何解决方案。

首先，设计带阻滤波器，帮助说：

如果 Wn 是二元素向量，Wn = [w1 w2]，则 type:'stop' 用于 2*n 阶带阻数字滤波器。阻带是 w1 < w < w2。

这是否意味着当我设计我的带阻滤波器时，代码应该是：

```
[B,A] = butter(2*N,Wn);  OR  [B,A] = butter(N,Wn);` 
```

其中订单`N`由用户在运行时给出，并使用具有已知参数的函数`Wn`计算。`buttrod`

其次，根据帮助，只能使用 3 种类型来设计巴特沃斯滤波器（低、高和停止），我如何设计带通滤波器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:54:36.777

1.  [B,A] = butter(N,Wn) 意味着您将有 2*N 个极点/根/.... 并且通常在 B 和 A 中都有 2*N+1 个项。请注意，极点是复共轭，所以如果你想要 10 个极点，N = 5....
2.  文档令人困惑......您可以拥有所有 4 种文件管理器类型：

    ```
    [B,A] = butter(N,Wn, 'type'); 
    ```

其中 type = 'stop', 'bandpass', 'low', 'high'

# html - 奇怪的对齐问题

> ID：13920466
> 
> 赞同：2
> 
> 时间：2012-12-17T19:06:37.273
> 
> 标签：html, css, positioning

我是 HTML 和 CSS 的新手，正在构建我的第一个网站。我遇到了这个非常奇怪的对齐和定位问题，让我很难过。我会很感激有人帮助我了解发生了什么。

我已将 html 和 css 加载到 codepen，以便您查看：[http ://codepen.io/joe/pen/kJmeK](http://codepen.io/joe/pen/kJmeK)

我还截取了问题的屏幕截图并上传以供您查看：![http://i46.tinypic.com/wt850g.jpg](../Images/612b987662a74b27298039d6e990b0a3.png)

发生的事情是，一旦我将电话号码和地址行 1-3 包装在`p`标签中，它们似乎会右对齐并卡在地图下方。但是一旦我打开它们，它们就会回到原来的位置并正常运行。

但是，加载到 codepen 中的`p`标签似乎表现得如他们应该的那样。

我试图通过在 CSS 中为`h2`标签和`p`标签使用负边距和填充来解决这个问题。但这会产生不知道`<p>`s 的确切位置并将它们与 contact_us 表单对齐的问题。

正如您在我的 CSS 中看到的那样，我之前没有在`p`其他任何地方使用过标签。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:15:09.970

据我所知，你的代码非常混乱。如果您要使用表格，为什么要为这个简单的布局使用绝对定位？

最有可能的是，map 具有 float right，p，没有任何 float 属性，因此位于 map 后面，因为浮动元素是从正常的元素流中取出的。

```
p {float:left;} 
```

或者

```
p {float:right;} 
```

应该可以解决问题，但我仍然建议您查看整个代码，并制作表格布局，或者更好的是不使用任何表格进行布局的 css 布局。

另请注意，浮动元素也应设置宽度属性，否则会收缩包装。

# objective-c - 检测用户何时从通知中心清除通知

> ID：13920470
> 
> 赞同：1
> 
> 时间：2012-12-17T19:06:44.543
> 
> 标签：objective-c, ios

我的应用需要知道用户是否使用清除按钮从通知中心删除/清除应用通知。

是否可以检测用户何时从通知中心删除通知或在通知中心获取通知数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:21:49.643

您（即App）无法与NotificationCenter 交互，NotificationCenter 与用户交互。用户可以选择不接收任何推送通知。

[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

# c# - 在类中建立数据库连接的更好方法是什么？

> ID：13920474
> 
> 赞同：0
> 
> 时间：2012-12-17T19:06:53.197
> 
> 标签：c#, asp.net-mvc

1) 使用类中的方法设置连接

```
//controller
using(Connection conn = new Connection()){
 conn.Open();
 MyClass myclass = new MyClass();
 myclass.setDbConnection(conn);
}

//MyClass in Model
class MyClass {
    Connection conn;

    public setDbConnection(conn){
        this.conn = conn;
    }

    public updateTableA(){
        //using this.conn;
    }
    public updateTableB(){
        //using this.conn;
    }
    public updateTableC(){
        //using this.conn;
    }

} 
```

2) 将连接作为参数传递给每个方法

```
//controller
using(Connection conn = new Connection()){
 conn.Open();
 MyClass myclass = new MyClass();
}

//MyClass in Model
class MyClass {

    public updateTableA(Connection conn){
        //using conn;
    }
    public updateTableB(Connection conn){
        //using conn;
    }
    public updateTableC(Connection conn){
        //using conn;
    }
} 
```

哪个是正确（或更好）的方式？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:12:30.207

答案是确实没有一个好的方法来解决这个问题，因为这种模式本质上是有缺陷的。您的数据对象不应该负责维护数据库连接，也不应该与您的数据库设计紧密耦合。对象关系管理器已经证明自己对于大多数数据库应用程序来说是一种更好的方法。您应该研究 Entity Framework 或 nHibernate 等流行的之一。我个人使用 nHibernate。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:16:01.700

鉴于您的两个选项，我肯定会选择第一个 - 将连接传递给每个方法绝对没有额外的价值（假设您总是使用相同的连接）。这只会给您的代码增加很多噪音，从而掩盖实际的业务逻辑。

此外，我建议将连接传递给构造函数并避免使用该`setDbConnection`方法。这可确保在调用构造函数后您有一个工作对象，而不是在您调用此方法之前会失败。但这并不总是可能的，因此这种初始化方法有时是不可避免的。

最后，您应该考虑实现`IDisposable`，因为您的类拥有一次性资源 - 连接 - 因此可能负责在其生命周期结束时释放它。

And I definitely support what other users already said - think about using an OR-mapper like Entity Framework because rolling your own data access layer is really not trivial.

# hibernate - 带参数的休眠注解@Where

> ID：13920476
> 
> 赞同：4
> 
> 时间：2012-12-17T19:06:53.843
> 
> 标签：hibernate, annotations

我目前有此类产品，以这种方式注释（我正在使用软删除）：

```
@SQLDelete(sql = "UPDATE products SET active = '0' WHERE id_product = ? and last_modification_date = ?")
@Where(clause = "active = '1'" )
@Entity
@Table(name = "products ")
public class Product {
  .....
} 
```

如果使用@Where 子句过滤bean（产品），我想要什么，这样一个用户只能看到它自己公司的产品。公司 ID 在会话中，由于 @SQLDelete 接收参数，我想做类似的事情：

```
@Where(clause = "active = '1' and id_company = ?" ) 
```

这样我就可以过滤所有表以根据每个用户获取结果，而无需编辑系统中的所有查询。有没有办法做到这一点？

任何帮助都会非常感激。
另外，如果需要更多信息来理解问题，请告诉我。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-17T19:10:28.217

在hibernate中有很多方法可以做到这一点，

```
String hql = "from Stock s where s.stockCode = :stockCode";
List result = session.createQuery(hql)
.setString("stockCode", "7277")
.list(); 
```

您可以从此链接获取更多信息[http://www.mkyong.com/hibernate/hibernate-parameter-binding-examples/](http://www.mkyong.com/hibernate/hibernate-parameter-binding-examples/)

# mysql - 根据另一个表的 ID 查询一个表中的数据

> ID：13920478
> 
> 赞同：0
> 
> 时间：2012-12-17T19:06:55.993
> 
> 标签：mysql, sql, database, roundcube

我正在尝试从 Roundcube 导出数据，它有两个我需要的表，用户和联系人。目前我正在使用它来过滤用户：

```
 SELECT `user_id` FROM `users` WHERE `username` LIKE "%mysite.com%" 
```

但是如何从联系人表中导出数据，其中`user_id`匹配上面过滤的`user_id`s 列表？我必须使用临时表吗？我从来没有加入过。我不想要加入的 2 个表的漂亮列表，我想使用`SELECT`子句导出数据来过滤它并重新导入它，所以我需要原始格式的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:11:59.387

您还可以使用子查询：

```
SELECT *
FROM `contacts`
WHERE `user_id` IN (
    SELECT `user_id` FROM `users` WHERE `username` LIKE "%mysite.com%"
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:09:16.030

如果表是通过相关的，`user_id`您可以加入它们：

```
SELECT c.* 
FROM `users` u
INNER JOIN `contacts` c
    on u.`user_id` = c.`user_id` 
WHERE u.`username` LIKE "%mysite.com%" 
```

如果您需要帮助学习连接语法，这里是[连接的一个很好的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# redirect - 301 在代理后面运行非标准端口的 nginx 机器上重定向

> ID：13920480
> 
> 赞同：6
> 
> 时间：2012-12-17T19:07:00.757
> 
> 标签：redirect, nginx, reverse-proxy

我有一个处理 PHP 请求的 nginx 服务器，但它被配置为侦听非标准端口（端口 12345 或其他端口）。我无法更改监听端口，因为公司 IT 说“不”。

数据中心有一个代理，将来自 www.domain.com:80 的请求转发到端口 12345 上的 nginx 盒子。

我有一些需要放置的静态 301 重定向，但出现了意外行为。

site.conf "server { }" 块中的示例重定向：

```
rewrite ^/foo$ /bar/foo/ permanent; 
```

当我尝试访问 www.domain.com/foo 时，会发生重定向，但它会尝试将浏览器转发到 www.domain.com:12345/bar/foo/

我的问题是，如何让 nginx 将用户重定向到正确的端口（www.domain.com/bar/foo/）？

也许一个更好的问题是，做我所问的正确方法是什么？有 50 多个重定向需要进入，我不想为每个重定向创建一个“位置”部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:23:39.150

您可以提供更明确的重写。尝试以下操作：

```
rewrite ^/foo/ $scheme://www.domain.com:80/bar$request_uri permanent; 
```

我假设您打算使用`^/foo/`而不是`^/foo$`，因为这`^/foo$`是一个非常具体的情况。只需根据需要进行修改。

# ios - 在外部变量 xcode 中启动时创建数组

> ID：13920483
> 
> 赞同：1
> 
> 时间：2012-12-17T19:07:11.817
> 
> 标签：ios, nsarray

您好我正在寻找一种在启动时执行数据库提取并将这些项目保存在数组中的方法。我的解决方案，虽然粗略是在 viewDidFinishLaunchingWithOptions 创建一个外部变量

我用了

```
appdelegate.h
extern NSArray *listArray; 
```

然后

```
appdelegate.m 
NSArray *listArray;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
listArray = [self createGlobalArray];
//other startup code, etc... 
```

问题是当我去任何视图控制器时，例如在 viewdidload 我说

```
VC1.m

-(void)viewDidLoad{
myVCArray = [NSArray arrayWithArray:listArray];

} 
```

我收到两个错误：Apple Match-O 链接器错误（找不到目录...）

我该如何解决这个错误？还有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:10:49.913

通常链接器错误是因为某些东西没有正确地包含在您的构建设置中。我会确保 Build Phases > Compile Sources 以及 Build Phases > Linked Libraries 包含您的项目需要的所有文件。

# c++ - C++ 中的示例服务器/客户端代码（不是 C）

> ID：13920485
> 
> 赞同：2
> 
> 时间：2012-12-17T19:07:19.123
> 
> 标签：c++, client-server, boost-asio

我正在尝试在网络上找到 C++ 中的服务器/客户端实现。

我发现了几十个用 C（不是 C++）编写的实现——就像[这个](http://www.linuxhowtos.org/C_C++/socket.htm)。

c++中的东西怎么样？

[boost::asio](http://www.boost.org/doc/libs/1_36_0/doc/html/boost_asio.html)是纯 C 的唯一替代品 - 还是我错过了一些库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:57:25.837

您将在 Qt 的 QtNetwork 模块文档中找到大量 C++ 示例。他们甚至有一个专门的类来充当 TCP 服务器，它被恰当地命名为[QTcpServer](http://doc.qt.digia.com/4.7/qtcpserver.html)。

您还将在那里找到更完整的示例：

*   [财富服务器示例](http://doc.qt.digia.com/4.7/network-fortuneserver.html)
*   [线程财富服务器示例](http://doc.qt.digia.com/4.7/network-threadedfortuneserver.html)
*   [环回示例](http://doc.qt.digia.com/4.7/network-loopback.html)
*   [洪流示例](http://doc.qt.digia.com/4.7/network-torrent.html)

# c# - 限制以太网端口的带宽

> ID：13920490
> 
> 赞同：5
> 
> 时间：2012-12-17T19:07:39.830
> 
> 标签：c#, networking, bandwidth, ethernet, throttling

我正在编写一个在服务器上运行的应用程序，我需要能够为每个以太网端口设置最大带宽（最多有 6 个端口）。

显然我可以限制我的应用程序使用的带宽，但我还没有找到任何关于限制计算机上实际以太网端口带宽的信息。

这需要通过创建驱动程序来监控所有端口来完成吗？谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-17T09:56:57.780

如果您可以访问 Linux 机器，那么做这样的事情很容易。事实上，您可以添加各种网络损伤以使其变得有趣。

只需安装两个网卡并设置 netem 以作为流量的中介。（即线路中的网络信号，增加了延迟、抖动、带宽速率等损害）

这是我用来测试我的 Android 音频流应用程序性能的脚本，方法是将 android 流量传递给 Linux 机器（将 wifi AP 连接到其中一个接口）。

> 补充：通过测试我的应用程序的性能，我的意思是应用程序在驾驶时在 4G 网络上的表现如何（即很多抖动）。或者家里有 Wi-Fi 的用例；如果家里的每个人都决定同时流式传输高清视频会怎样（即带宽争用，丢包很多）。

```
#!/bin/bash

ORIGINAL_PATH=$PATH

#echo $ORIGINAL_PATH

export PATH="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/game"

#echo $PATH 
CTOSINTERFACE=eth1  # EGRESS interface on Bridge, facing the SERVER
STOCINTERFACE=eth0  # EGGRES interface on Bridge, facing the CLIENT

# Client To Server
CDELAY=$1   
CJITTER=$2
CLOSS=$3
CDUPLICATE=$4
CCORRUPT=$5
CREORDER=$6

# Server to Client
SDELAY=$7
SJITTER=$8
SLOSS=$9
SDUPLICATE=$10
SCORRUPT=$11
SREORDER=$12

# Clear Latency/Loss/Jitter
/sbin/tc qdisc del root dev $CTOSINTERFACE 2>/dev/null
/sbin/tc qdisc del root dev $STOCINTERFACE 2>/dev/null

# Client to Server Impairments (on Bridge)
qdisc add dev $CTOSINTERFACE root netem delay ${CDELAY}ms ${CJITTER}ms loss $CLOSS% duplicate ${CDUPLICATE}% corrupt ${CCORRUPT} reorder ${CREORDER}% limit 10000000 2>&1 >/dev/null
qdisc add dev $STOCINTERFACE root netem delay ${SDELAY}ms ${SJITTER}ms loss $SLOSS% duplicate ${SDUPLICATE}% corrupt ${SCORRUPT} reorder ${SREORDER}% limit 10000000 2>&1 >/dev/null

#$PATH=$ORIGINAL_PATH
export PATH=$ORIGINAL_PATH
#echo $PATH 
```

并将脚本称为

```
#sudo impare_network.sh 100 20 30 0 0 0 0 0 0 0 0 0 0 
```

这将 - 在上行链路（客户端到服务器）上 - 增加 100 毫秒的延迟、20% 的抖动（使用正态分布）、30% 的数据包丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:12:55.820

我认为最简单的事情是创建一个输出设备，您可以与您的实际发送者组成它会限制输出本身而不是弄乱以太网端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T10:01:23.650

在 wndows 中，如果没有额外的软件，通常不可能在操作系统级别上做到这一点 - 用例被简单地视为并不重要，而且说真的：这是非常正确的。如果我需要网络限制，我可以在交换机中强制执行它们。

唯一的例外是在 Hyper-V 中，newwest 版本（在 2012 R2 中）可以限制传出带宽。

通常-您将需要第三方软件在 Windows 上执行此操作，但用例确实很前卫，因为通常在下一个更高的开关中设置该限制是一个更好的地方。

# jquery - 在 CSS 中隐藏 div 容器

> ID：13920494
> 
> 赞同：4
> 
> 时间：2012-12-17T19:07:48.847
> 
> 标签：jquery, html, css

我试图在使用 CSS3 几秒钟后隐藏一个 DIV。到目前为止，我有一些 7 秒后隐藏 div 的 jQuery 代码。是否可以在 CSS 中做到这一点？

[jsFiddle](http://www.jsfiddle.net/LmHTR/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:14:25.137

```
 <!DOCTYPE html>
    <html>
    <head>
    <style> 
    div
    {
    width:100px;
    height:100px;
    background:red;
    animation:myfirst 7s; /* IE 10+ */
    -moz-animation:myfirst 7s; /* Firefox */
    -webkit-animation:myfirst 7s; /* Safari and Chrome */
    -o-animation:myfirst 7s; /* Opera */
    -webkit-animation-fill-mode: forwards; 
    -moz-animation-fill-mode: forwards;  
    -o-animation-fill-mode: forwards;  
    animation-fill-mode: forwards;   
    }

    @keyframes myfirst
    {
    from {opacity: 1;}
    99%{opacity: 1;}
    to {opacity:0;}
    }

    @-moz-keyframes myfirst /* Firefox */
    {
    from {opacity: 1;}
    99%{opacity: 1;}
    to {opacity:0;}
    }

    @-webkit-keyframes myfirst /* Safari and Chrome */
    {
    from {opacity: 1;}
    99%{opacity: 1;}
    to {opacity:0;}
    }

    @-o-keyframes myfirst /* Opera */
    {
    from {opacity: 1;}
    99%{opacity: 1;}
    to {opacity:0;}
    }
    </style>
    </head>
    <body>

    <div>hello world</div>

    </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T19:23:27.493

设置关键帧、持续时间、开始前的延迟，并指示它保留最后的值：

```
#foo { 
    animation: fademe 1s 7s forwards
}

@keyframes fademe { 
    to { opacity: 0 } 
} 
```

笔：[http ://codepen.io/joe/pen/mkwxi](http://codepen.io/joe/pen/mkwxi)

此代码示例不包含任何必需的供应商前缀。要按原样运行，您应该考虑使用无前缀：http: [//leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:42:17.960

使用[动画](http://www.w3.org/TR/css3-animations/)属性的组合，特别是`animation-name`、`animation-duration`、`animation-iteration-count`、`animation-delay`和`animation-fill-mode`

对于每种样式，您还需要`-webkit-`, `-moz-`, `-o-`, and 以保持一致性`-ms-`（尽管我相信 IE10 可以在没有供应商前缀的情况下工作）`animation`

```
animation-name:bubbly; /* name of keyframe animation (note @keyframe blocks need vendor prefixes also (atm) */
animation-duration:0.9s; /* how long the keyframe takes to run */
animation-iteration-count:1; /* how many times to run the keyframe */
animation-delay:7s; /* how long before the keyframe starts running */
animation-fill-mode:forwards; /* which styles to apply once the keyframe is done */ 
```

或者总结在一个`animation`陈述中

```
animation: bubbly 0.9s 7s 1 forwards; 
```

还有关键帧

```
@keyframes bubbly {
  from {opacity:1;}
  to {opacity: 0;} 
} 
```

[jsfiddle 示例](http://jsfiddle.net/LmHTR/24/)（带有供应商前缀）

# c# - 分发列表 Outlook（联系人组）导入和导出

> ID：13920496
> 
> 赞同：1
> 
> 时间：2012-12-17T19:07:58.897
> 
> 标签：c#, list, outlook, distribution, contact

我正在创建一个应用程序来从 Outlook 导入和导出联系人，导出和导入可以，但我无法导出联系人组。

我需要我的应用程序来导入和导出联系人组。我的想法是有 2 个应用程序，一个导出到另一个文件并从一个文件中导入它。

我只能对联系人执行此操作，但也需要对组执行此操作。

有人知道如何在 C# 中做吗？

-------------------------------------------------- - - -额外的 - - - - - - - - - - - - - - - - - - - - - - -

我正在尝试备份我在 Outlook 中创建的联系人组，以发送给需要该组的其他人。

例如我有组

富兰诺斯

会员在哪里

falano1@email.com

falano2@email.com

falano3@email.com

falano4@email.com

所以我想支持他提取它的前景。我和我的联系人的摘录创建了一个 csv 文件，应用程序客户端下载此文件并自动更新客户的前景。

现在我做同样的事情，但与联系人组。 ![应用功能](../Images/5e22be84e625c13ba2af53f9307b3269.png)

对于常见的联系人，该应用程序已经这样做了，现在可以带到群组中。它出口和进口。

# java - 如何使用 JFileChooser 将文件保存到选定的目录

> ID：13920501
> 
> 赞同：1
> 
> 时间：2012-12-17T19:08:06.857
> 
> 标签：java, swing, jfilechooser

我是 Java 新手，所以请多多包涵。

在我的程序中，我想让用户能够将文件保存到他们选择的目录中。在做了一些研究之后，我发现了一个名为 JFileChooser 的漂亮类。我想要做的是允许用户通过 JFileChooser GUI 转到他们想要的目录，为他们的文件键入一个名称，并允许他们将他们的文件保存到所需的目录。我尝试在网上寻找如何做到这一点的解决方案，但几乎在我阅读的所有地方，最终的答案都是“现在你必须让你的程序保存文件”，我不知道该怎么做。有人可以提供一些注释良好的虚拟代码来完成上述描述吗？另外，有谁知道 JFileChooser 是否提供“新建文件夹”选项？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:41:50.567

将所有部分放在一起并非易事。您需要一个 FileFilter 来保存到特定的扩展名。

这是我的 Swing 应用程序之一的示例。

```
protected static final String EXTENSION = ".png";

protected static final String FORMAT_NAME = "png";

protected static final LayoutFileFilter SAVE_AS_IMAGE = 
        new LayoutFileFilter("PNG Image Format", EXTENSION, true);

protected int chooseSaveFile(BufferedImage image) {
    JFileChooser fileChooser = new JFileChooser();
    ExtensionFileFilter pFilter = new ExtensionFileFilter(SAVE_AS_IMAGE);
    fileChooser.setFileFilter(pFilter);
    int status = fileChooser.showSaveDialog(frame.getFrame());

    if (status == JFileChooser.APPROVE_OPTION) {
        File selectedFile = fileChooser.getSelectedFile();

        try {
            String fileName = selectedFile.getCanonicalPath();
            if (!fileName.endsWith(EXTENSION)) {
                selectedFile = new File(fileName + EXTENSION);
            }
            ImageIO.write(image, FORMAT_NAME, selectedFile);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return status;
} 
```

您会注意到该方法中有代码确保 EXTENSION 附加在文件名的末尾，除非 EXTENSION 已经存在。这是 Java 等效项中缺少的标准 Windows 行为。

为了保存特定的扩展，您需要一个 FileFilter。

```
import java.io.File;

import javax.swing.filechooser.FileFilter;

public class ExtensionFileFilter extends FileFilter {

    protected LayoutFileFilter filter;

    protected String description;
    protected String[] extensions;

    public ExtensionFileFilter(LayoutFileFilter filter) {
        this(filter.getDescription(), filter.getExtension());
        this.filter = filter;
    }

    public ExtensionFileFilter(String description, String extension) {
        this(description, new String[] {extension});
    }

    public ExtensionFileFilter(String description, String[] extensions) {
        if ((description == null) || (description.equals(""))) {
            this.description = extensions[0] + " {" + extensions.length + "}";
        } else {
            this.description = description;
        }
        this.extensions = (String[]) extensions.clone();
        toLower(this.extensions);
    }

    private void toLower(String[] extensions) {
        for (int i = 0, n = extensions.length; i < n; i++) {
            extensions[i].toLowerCase();
        }
    }

    @Override
    public boolean accept(File file) {
        if (file.isDirectory()) {
            return true;
        } else {
            String path = file.getAbsolutePath().toLowerCase();
            for (int i = 0, n = extensions.length; i < n; i++) {
                String extension = extensions[i];
                if (path.endsWith(extension)) {
                    return true;
                }
            }
        }
        return false;
    }

    @Override
    public String getDescription() {
        return description;
    }

    public LayoutFileFilter getLayoutFileFilter() {
        return filter;
    }

} 
```

最后是 LayoutFileFilter。

```
public class LayoutFileFilter {

    boolean isDefault;

    String description;
    String extension;

    public LayoutFileFilter() {

    }

    public LayoutFileFilter(String description, String extension,
            boolean isDefault) {
        this.description = description;
        this.extension = extension;
        this.isDefault = isDefault;
    }

    public boolean isDefault() {
        return isDefault;
    }

    public void setDefault(boolean isDefault) {
        this.isDefault = isDefault;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getExtension() {
        return extension;
    }

    public void setExtension(String extension) {
        this.extension = extension;
    }

} 
```

# android - 运行时异常被 ACRA 捕获，并且不显示在 Logcat 上

> ID：13920503
> 
> 赞同：6
> 
> 时间：2012-12-17T19:08:13.197
> 
> 标签：android, logcat, acra

我已经在我的项目中成功实施[了 ACRA（Android 应用程序崩溃报告）](https://github.com/ACRA/acra)，并且错误报告已正确发送到 Google 文档。但是......当我的应用程序发生异常时，它不会出现在我的 logcat 上，这就是我得到的：

```
ACRA caught a RuntimeException exception for com.my.project. Building report. 
```

所以 ACRA 会捕获错误并且不会让 Logcat 显示发生的情况。我目前正在开发我的应用程序，我没有时间为每个发生的问题打开 Google 文档。我应该在开发中禁用 ACRA 并在生产中启用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:12:53.930

你在过滤logcat吗？在我的应用程序中，即使使用 ACRA，我也可以在 logcat 中看到错误，但它们的级别降低为警告，而不是错误。

尝试降低对 LogCat 的过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:07:34.337

您的应用程序（或您的 IDE）中发生了其他导致此行为的事情。

ACRA 不会接受任何例外情况。它们将出现在您的日志以及错误存储库中（在您的情况下是 Google 文档）。

# drupal-7 - Drupal 7 - 将用户节点或链接节点中的字段添加到当前用户？

> ID：13920506
> 
> 赞同：1
> 
> 时间：2012-12-17T19:08:24.407
> 
> 标签：drupal-7, nodes

我正在设计一个 drupal 网站，用户可以在其中设置不同区域的偏好。例如最喜欢的。游戏：。

现在我希望这些首选项显示在一个单独的菜单选项中，供用户填写。我创建了一个单独的节点，但我需要有人建议我如何将它与用户链接。或者如果有其他更好的方法请指导我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:12:29.363

您可以使用 Profile 2 模块：[http ://drupal.org/project/profile2](http://drupal.org/project/profile2)

您可以创建具有不同区域的配置文件字段，这些区域将分配给该用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T04:12:45.033

在 Drupal 7 中，您可以将字段附加到任何声明为可字段的实体；包括用户。

只需从 admin/config/people/accounts/fields 添加您需要的字段。

# android - 动态改变 ListView 元素

> ID：13920508
> 
> 赞同：0
> 
> 时间：2012-12-17T19:08:31.587
> 
> 标签：android

我正在使用 Listview 在屏幕上的两个 TextView 中显示来自 Cursor 的三列信息。左边的 TextView 是静态的，而右边的 TextView 有两种语言的翻译，在选择时会切换。

我的问题是，在我滚动 ListView 之前，这工作正常，此时适配器和 ListView 似乎变得不同步，导致片状行为，最后出现空指针异常。

这是 onListItemClick 代码：

```
 public void onListItemClick(ListView l, View v, int position, long id){
    //first revert previous selection to English
    if(previous_position!=99){
      View vo =l.getChildAt(previous_position);
      TextView pt = (TextView)vo.findViewById(R.id.english);
      pt.setTextColor(Color.BLUE);
      pt.setText(previous_text);
    }

    //now show current selection in Hindi
    TextView t = (TextView) v.findViewById(R.id.translation);
    t.setTextColor(Color.RED);
    t.setText(gloCursor.getString(3));

    //finally remember where we changed things so we can revert them
    previous_position = position;
    previous_text = gloCursor.getString(3);

    // adapter data notification
    //adapter.notifyDataSetChanged();
    } 
```

我已经注释掉了 notifyDataStateChanged 因为在这种情况下它对我不起作用。

将不胜感激任何见解，或者可能为此提供更好的设计。

谢谢，P。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:45:11.913

尝试将您的`getChildAt`代码替换为：

```
View vo = l.getChildAt(previous_position - l.getFirstVisiblePosition()); 
```

# perl - Perl：跨条件使用平衡的最佳方式

> ID：13920511
> 
> 赞同：1
> 
> 时间：2012-12-17T19:08:37.043
> 
> 标签：perl

我有一个包含两个条件（C1 和 C2）的脚本。每次用户登录时，我希望使用严格的平衡（不是随机分配）将此用户分配给这两个条件之一，例如将 User1(U1) 分配给 C1，将 U2 分配给 C2，将 U3 分配给 C1，U4到 C2 等。

最简单的方法是什么？

现在，我正在考虑这样做：

```
my $cond;
my $out_cfile = "cfile.txt"; #intial value printed in the file is 1
open(CFILE, "+<", $out_cfile) or die "cannot open $out_cfile";
flock(CFILE, 2);
my $cdata = <CFILE>;
my $last = (substr $cdata,-1,1); #get the latest printed value
if ($last == 1) {$cond = 1; print CFILE "2";}
if ($last == 2) {$cond = 2; print CFILE "1";}
close(CFILE);

print "my condition is: $cond"; 
```

有没有办法做到这一点而不必打开并打印到输出文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:12:26.600

我真的不明白在`/tmp`目录中创建文件的痛苦，或者如果它不存在，但你可以使用它[`memcached`](http://search.cpan.org/perldoc?Cache%3a%3aMemcached)。

```
use Cache::Memcached qw( );

my $memd = Cache::Memcached->new({
   server    => [ '127.0.0.1:11211' ],
   namespace => 'app_name:',
});

my $val = $memd->incr('counter');
if ($val % 2) {
   ...
} else {
   ...
} 
```

`incr`以原子方式递增和获取以避免竞争条件（因此它像您的代码一样安全）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:33:47.367

我会使用绑定哈希，但如果你想要线程安全，你需要实现某种形式的互斥锁，也许是信号量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:34:49.443

最简单的方法是使用[`lock`](http://perldoc.perl.org/perlthrtut.html#Controlling-access%3a-lock%28%29)（**警告：**未经测试，但这样的东西应该可以工作）：

```
use strict;
use warnings;
use threads;
use threads::shared;
use Thread::Queue;

my $num_users_logged_in :shared = 1;

my $num_watcher_threads = 1; #it may make sense to make this larger, maybe not. 

my @users = (); #populate array of users that are logging in.

my $queue = Thread::Queue->new;

$queue->enqueue(@users);

my @threads = ();

foreach(1..$num_watcher_threads)
{
  push @threads, threads->create(\&log_in);
}

# NOTE: If you ever want this program to stop, 
# then you'll have to enqueue some undefs (one for each thread).

# Waiting for each of the threads to finish.
# If you don't want to do this, then detach() instead
$_->join() foreach(@threads);

#Do anything else that you want after all of the threads are done.

sub log_in
{
  #Threads will block until it grabs an undef in the queue
  while(my $user = $queue->dequeue)
  {
    #Do whatever you need to do before locking the variable.
    {
      lock $num_users_logged_in;
      #Other threads will block until we're done with this block of code.

      #Assign conditions based upon the parity of $num_users_logged_in
      #And do whatever else you need for that particular user

      $num_users_logged_in++;
    }
  }
} 
```

# iphone - 检测 MathJax 何时在 UIWebView 中完成加载

> ID：13920512
> 
> 赞同：1
> 
> 时间：2012-12-17T19:08:40.183
> 
> 标签：iphone, objective-c, ios, uiwebview, mathjax

我有一个由几个 UIWebViews 组成的界面，所有这些都是动态提供的 HTML，注入了 MathJax javascript，用于在窗口中显示相当多的方程。

MathJax 存储在本地，并通过本教程中概述的方法进行解析：http: [//new2objectivec.blogspot.co.uk/2012/03/tutorial-how-to-setup-mathjax-locally.html](http://new2objectivec.blogspot.co.uk/2012/03/tutorial-how-to-setup-mathjax-locally.html)

不幸的是，我不擅长 javascript，而且 MathJax 脚本似乎通过存储临时 HTML 文件的相当复杂的过程被输入到 NSStrings，然后将它们传递回 UIWebViews（在教程中概述）。

这让我有点困惑，但它工作得很好，尽管加载时间很短（取决于加载的方程的数量）。

**我想知道 MathJax 何时停止运行并已满载。**

我试过听委托上的 didFinishLoading 方法无济于事：只被调用了几次（每个 webview），即使这样调用也太早了。无论如何，我无法理解关于检查 javascript 何时在 UIWebView 中完成加载的几个 SO 问题。

在 MathJax 发挥其魔力的同时，在 UIWebViews 前面放置一个临时加载视图绝对是完美的，以节省用户的困惑。但是，正如您可能知道的那样，我在检测它时遇到了很多麻烦。

有没有人有任何与在 UIWebViews 中使用 MathJax/javascript 加载检测相关的建议或经验？

非常感谢任何帮助，因为我当然不想依赖任意的 NSTimers（即“假”加载屏幕）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:12:26.133

您可以在 MathJax 完成排版后通过包括

```
<script>
MathJax.Hub.Queue(function () {
  ... your code here...
});
</script> 
```

在加载 MathJax.js 本身的脚本之后的 HTML 文件中。

# asp.net - 从字符串“0.##”到类型“Integer”的转换无效

> ID：13920513
> 
> 赞同：3
> 
> 时间：2012-12-17T19:08:46.677
> 
> 标签：asp.net, vb.net

我正在做一个从十进制到字符串的简单转换，并像这样去除尾随零：

argCat.ToString("0.##")

但是，我不断收到以下错误：

从字符串“0.##”到类型“Integer”的转换无效。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T19:10:02.333

如果`argCat`是没有`ToString()`接受参数的重载的类型，则会发生这种情况。

在这种情况下，您的代码被解析为`ToString()("0.##")`; 成为返回`"0.##"`的索引器的参数。 然后您会得到这个误导性错误，因为该索引器采用 int，而不是字符串。`String``ToString()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:46:01.773

字符串 str = String.Format("{0:C}", argCat);

# algorithm - Kruskal 算法 - 保持节点的最佳方式

> ID：13920520
> 
> 赞同：-2
> 
> 时间：2012-12-17T19:09:17.730
> 
> 标签：algorithm, nodes, kruskals-algorithm

就像标题一样。对于 Kruskal 算法，将节点保存在内存中的最佳方法是什么，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:14:35.320

Kruskal 算法基本上就是不[相交集森林](http://en.wikipedia.org/wiki/Disjoint-set_data_structure#Disjoint-set_forests)结构的目的。这种结构开始时所有节点都位于不同的组件中，然后支持此类操作

> 加入节点 A 和 B

和

> 节点 A 和 B 是否已经在同一个覆盖树中？

这正是为什么我会说这是最适合节点的表示。

# c# - WPF > WEBAPI > HttpClient > AWAIT = UI 延迟

> ID：13920523
> 
> 赞同：0
> 
> 时间：2012-12-17T19:09:21.483
> 
> 标签：c#, wpf, async-await, asp.net-web-api

我很难过，我需要你的帮助。

我有一个使用 ASYNC & AWAIT 调用 WEBAPI 的 WPF 应用程序，并且我的 UI 遇到了延迟。

这是我正在使用的代码...

```
HttpResponseMessage response = await WEBAPI.GetHttpClient().GetAsync("api/COStateType/GetStateTypesByCountryID/" + Constants.COUNTRY_ID_USA);  
response.EnsureSuccessStatusCode(); 
App.stateTypes = await response.Content.ReadAsAsync<List<coStateType>>(); 
```

GetHttpClient 代码...

```
 public static HttpClient GetHttpClient()
    {
        HttpClient client = new HttpClient();
        client.BaseAddress = new Uri(ConfigurationManager.AppSettings["ABS2.WEBAPI.Uri"]);
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
        return client;
    } 
```

这里是主要问题...

在启动过程中，我会显示一个带有移动齿轮（动画）的启动画面。实现对 WEBAPI 的调用后，动画不再流畅。我已经读到使用 HttpClient 的 ASYNC 调用会导致 UI 阻塞，这就是我的动画所发生的情况。

这是问题...

反正有这个问题吗？我尝试将此调用包装在 BackgroundWorker 和/或 Task 中，但均未解决问题。是否有另一种与不会导致此 UI 阻塞的 WEBAPI 通信的方式？我做错了什么？

非常非常感谢您的任何帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:31:44.630

@Stef7 和 @Panagiotis - 你们说得对，UI 线程被阻止了。我不确定我是否理解为什么异步调用会阻塞 UI 线程；我将不得不做更多的研究。

我已经尝试了一个后台线程，但是直到我在任务上实现了 ContinueWith 才解决了我的问题。

感谢您的帮助。

这是最终的代码。

```
public partial class Splash : Window
{
    private TypeBO boType = new TypeBO();
    private Stopwatch swTotal = new Stopwatch();
    private Stopwatch swData= new Stopwatch();

    public Splash()
    {
        InitializeComponent();
        swTotal.Start();
    }

    private void GetData()
    {
        Assembly assembly = Assembly.GetExecutingAssembly();
        lblMessage.Content = "Please Wait...";
        lblVersion.Content = "Version: " + assembly.GetName().Version.Major + "." + assembly.GetName().Version.Minor + "." + assembly.GetName().Version.Revision;

        swData.Start();

        var backgroundWorker = new BackgroundWorker();
        backgroundWorker.DoWork += this.OnBackgroundWorkerDoWork;
        backgroundWorker.RunWorkerCompleted += OnBackgroundWorkerRunWorkerCompleted;
        backgroundWorker.RunWorkerAsync();
    }

    private void OnBackgroundWorkerDoWork(object sender, DoWorkEventArgs e)
    {
        WEBAPI.GetHttpClient().GetAsync("api/COStateType/GetStateTypesByCountryID/"
            + Constants.COUNTRY_ID_USA).ContinueWith(r =>
            {
                r.Result.EnsureSuccessStatusCode();
                e.Result = r.Result.Content.ReadAsAsync<List<coStateType>>().Result;
            }).Wait();

        swData.Stop();
        System.Diagnostics.Debug.Write("Splash - DATA - Total Elapsed Time - " + swData.Elapsed + Environment.NewLine);
    }

    private void OnBackgroundWorkerRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        var backgroundWorker = sender as BackgroundWorker;
        backgroundWorker.DoWork -= this.OnBackgroundWorkerDoWork;
        backgroundWorker.RunWorkerCompleted -= OnBackgroundWorkerRunWorkerCompleted;

        App.stateTypes = e.Result as List<coStateType>;

        coStateType pleaseSelectStateType = new coStateType() { State_ID = 0, State_Nm = "Select One", Country_ID = 1 };
        App.stateTypes.Insert(0, pleaseSelectStateType);

        sbHideState.Completed += (snd, eva) =>
        {
            //Pre-Load User Controls
            Assembly assembly = this.GetType().Assembly;
            UserControl ucBHSearch = (UserControl)assembly.CreateInstance(string.Format("{0}.BHSearch", "ABS2.WPF.ADMIN.UserControls.BusinessHierarchy"));
            UserControl ucBHDetails = (UserControl)assembly.CreateInstance(string.Format("{0}.BHDetails", "ABS2.WPF.ADMIN.UserControls.BusinessHierarchy"));
            App.userControls.Add("BHD", ucBHDetails);
            App.userControls.Add("BHS", ucBHSearch);

            Login winLogin = new Login();
            winLogin.Show();

            swTotal.Stop();
            System.Diagnostics.Debug.Write("Splash - UI - Total Elapsed Time - " + swTotal.Elapsed + Environment.NewLine + Environment.NewLine);
            swTotal.Reset();
            this.Close();
        };
        sbHideState.Begin(gridSplash);
    }

    private void Window_Loaded_1(object sender, RoutedEventArgs e)
    {
        lblMessage.Content = "";
        lblVersion.Content = "";
        sbDefaultState.Begin(gridSplash);
        sbRotateState.Begin(gridSplash);           
    }

    private void window_ContentRendered(object sender, EventArgs e)
    {
        sbShowState.Completed += (snd, eva) =>
        {
            GetData();
        };
        sbShowState.Begin(gridSplash);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-19T21:43:32.623

您需要使用“任务”函数来调用异步。这不会阻塞您的 GUI 主线程，您也不需要使用后台工作线程或线程。“任务”，“异步”，“等待”一起去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T08:27:37.287

当*await*完成等待时，将在原始上下文（线程）中继续执行，在您的情况下是 UI 线程。

这允许您的代码在不使用调度程序的情况下访问 UI 控件。这意味着在最后一次*等待*之后的任何昂贵代码实际上都将在 UI 线程上运行。

如果您希望您的代码继续在单独的线程上运行，您应该在调用 await 之后添加 .ConfigureAwait(false)，即。

```
await response.Content.ReadAsAsync<List<coStateType>>().ConfigureAwait(false); 
```

在这种情况下，您应该注意使用 Dispatcher 或 SynchronizationContext 方法[Post](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx) / [Send](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.send.aspx)访问 UI 控件，例如。

```
SynchronizationContext.Current.Post(_=>progressBar.Value+=5,null); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T15:57:11.860

您发布的所有代码都在 UI 线程中执行。异步功能可以帮助您在 UI 线程无事可做时（在 Web 请求期间）不会阻塞它，但是如果您让 UI 线程忙于太多代码，您的动画总是会出现问题。

我会尝试将所有与 Web 相关的代码移动到后台工作程序中，并仅将简短的 UI 更新发布到 UI 线程。由于您写道您已经尝试过后台工作人员，因此我不得不假设 UI 更新花费的时间太长。

如果您有性能分析器，请分析 UI 线程的繁忙时间以获得更好的图像。

# java - 错误：未报告的异常 java.io.FileNotFoundException；必须被抓住或宣布被扔掉

> ID：13920527
> 
> 赞同：0
> 
> 时间：2012-12-17T19:09:26.563
> 
> 标签：java

我正在尝试为我的 java 项目（相当于英国 GCSE 的 MATSEC 'O' Levels）编写电话簿，并且在编码（使用 BlueJ）时弹出此错误。我正在使用我老师的书作为参考，没有任何与错误相关的内容，也没有说我应该在其中添加任何内容。这是我的java代码（不是主类）：

```
import java.io.*;

class Data{
    String read(){  

        String[] name = null;
        String[] surname = null;
        String[] company = null;
        String[] house = null;
        String[] street = null;
        String[] locality = null;
        String[] telno = null;
        String[] mobno = null;
        int entnum;

        BufferedReader txt = new BufferedReader(new FileReader("Directory.txt"));

        System.out.println("Name\tSurname\tCompany\tHouse\tStreet\tLocality\tTelephone\tMobile");
            System.out.println("\n-----------------------------------------------------------------------------------------------");

        for(entnum = 0;name[entnum]!= null; entnum++){
            name[entnum] = txt.readLine();
            surname[entnum] = txt.readLine();
            company[entnum] = txt.readLine();
            house[entnum] = txt.readLine();
            street[entnum] = txt.readLine();
            locality[entnum] = txt.readLine();
            telno[entnum] = txt.readLine();
            mobno[entnum] = txt.readLine();

            System.out.print(name[entnum]+ "\t");
            System.out.print(surname[entnum]+ "\t");
            System.out.print(company[entnum]+ "\t");
            System.out.print(house[entnum]+ "\t");
            System.out.print(street[entnum]+ "\t");
            System.out.print(locality[entnum]+ "\t");
            System.out.print(telno[entnum]+ "\t");
            System.out.print(mobno[entnum]+ "\t\n");

            }
        return null;
    }
} 
```

基本上，这只是从文本文件中读取并显示条目。我还没有使用 GUI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:11:23.210

您在 read() 方法中的文件读取代码应包含在 try/catch 块中

（或者）

将 read() 方法定义为 `read() throws FileNotFoundException { .....}`.

`FileNotFoundException`[是检查异常，它应该在 throws 子句中声明（或）由于catch/specify](http://docs.oracle.com/javase/tutorial/essential/exceptions/catchOrDeclare.html)要求，可能抛出此异常的代码应该包装在 try/catch 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:11:45.190

请将您的缓冲阅读器放入 try catch 块:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T21:08:54.030

尝试使用现代 IDE，例如 Eclipse。它将帮助您检测许多编译错误。

# android - 在本机代码中加载纹理并将纹理 id 返回到 java

> ID：13920529
> 
> 赞同：1
> 
> 时间：2012-12-17T19:09:34.063
> 
> 标签：android, opengl-es, java-native-interface

我之前的问题将我引向了这个问题，我需要将一些代码从 Java 移动到本机。我加载了很多纹理（RGBA888 中的数据高达 2GiB，不允许压缩（例如 565，ETC ......））并丢弃旧的，所以在加载过程中我得到了很多垃圾收集。我能够从 OpenGL 线程中部分移动 GC，因此它不会减慢 FPS，但会以更长的纹理加载时间为代价，因为它们被 GC 暂停。

所以我想通过在 C 中解码和上传图像来完全删除 GC。现在我使用生产者-消费者模式，一个生产者和两个消费者。为此，我使用 Java 的 LinkedBlockingDeque 和消费者扩展 Thread 类并在无限循环中从队列中获取项目。项目携带有关图像文件路径的信息，我在工作线程中解码并使用 GLSurfaceView 的 queueEvent() 方法发送到 GL 线程。

所有图像 (PNG) 都在没有压缩的 zip 文件中，我直接将它们从其中流出（Android 的 APK 扩展文件机制）。我有很多 C/C++ 经验，但没有 JNI 经验。我目前正在阅读 Android 的 JNI 示例。

问题是如何将 InputStream 发送到本机代码，在那里解码 png（我将使用 libpng），现在是棘手的部分：然后将其发送到 GL 线程并将其作为纹理上传并返回纹理 ID 并准备就绪标志回Java？或者我可以使用 java.nio ByteBuffer，它将填充本机代码，然后发送回 Java，在那里我将使用 glTexImage2D 方法将其上传，该方法采用缓冲区而不是位图？这个 java.nio 缓冲区会阻止垃圾收集，还是我必须在 C 中做所有事情？

我的目标是 Android 3.2 及更高版本。

# ruby-on-rails - 使用 capistriano 部署时出现 rake 版本错误：cap shell 与 ssh 不同

> ID：13920532
> 
> 赞同：0
> 
> 时间：2012-12-17T19:09:42.633
> 
> 标签：ruby-on-rails, rake, capistrano, dreamhost

我正在将我的新 Rails 应用程序部署到我的主机 (Dreamhost)。我正在使用 Capistrano 进行部署。

我运行 `cap deploy` 没有问题

当我尝试运行 cap deploy:migrations 我收到以下错误：在任何源中找不到 rake-10.0.3

为了检查发生了什么，我使用了

```
cap shell
    which rake
    --> /home/myUser/.gems/bin/rake
    /home/myUser/.gems/bin/rake -V
    --> rake, version 0.8.7 
```

但是，当我从 ssh 检查相同的信息时，我得到

```
$ which rake
-->/home/myuser/.gems/bin/rake
$ /home/myuser/.gems/bin/rake -V
-->rake, version 10.0.3 
```

我怎么可能得到这两个不同的结果？任何的想法？

如果有帮助，我添加我的 deploy.rb 文件：

```
default_run_options[:pty] = true

set :user, 'XXX'
set :domain, 'XXX'
set :application, 'XXX'
set :repository,  "git@bitbucket.org:XXX"
set :deploy_to, "/home/#{user}/XXX"
set :deploy_via, :remote_cache
set :scm, 'git'
set :branch, 'master'
set :git_shallow_clone, 1
set :scm_verbose, true
set :use_sudo, false

default_environment["PATH"] = "/home/myUser/.gems/bin:$PATH"
set :shell, '/bin/bash'

server domain, :app, :web
role :db, domain, :primary => true

set :ssh_options, { :forward_agent => true }

namespace :deploy do
  task :restart do
    run "touch #{current_path}/tmp/restart.txt"
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:59:55.993

解决了！

GEM_PATH 存在问题，我的特定宝石未加载。

以下添加到 deploy.rb

default_environment["GEM_PATH"] ="/home/myUser/.gems:/usr/lib/ruby/gems/1.8" default_environment["PATH"] = "/home/myUser/.gems/bin:/usr/lib/红宝石/宝石/1.8/bin/:$PATH"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:29:41.950

可能在您的 Gemfile 中设置了 rake 0.8。rake 10.0 是最后安装的版本。

# forms - CSRF/Honeypot 是否足以减少联系表单上的垃圾邮件 - 我想我想要一个垃圾邮件机器人？

> ID：13920533
> 
> 赞同：3
> 
> 时间：2012-12-17T19:09:47.490
> 
> 标签：forms, captcha, csrf, spam, honeypot

我希望减少联系人/产品查询表格的“垃圾邮件”提交。

虽然 Google 的 ReCaptcha 很好，但有时很难使用，因为验证码图像可能无法识别，并且其他验证码方法也会遇到同样的问题。

在过去的几周里，我仅使用 CSRF/Honeypot 技术就取得了不错的效果，但我知道 CSRF 只会阻止那些为表单字段抓取页面并直接 POST 的“最愚蠢的”机器人。

我很想使用用于生成垃圾邮件的实际工具。有谁知道一些很好的流行例子？

提前谢谢了！

# c# - C# 保护应用程序免受代码注入

> ID：13920535
> 
> 赞同：4
> 
> 时间：2012-12-17T19:09:54.987
> 
> 标签：c#, security

我刚刚发现，即使我混淆了我的应用程序，它仍然可以使用代码注入来破解。这几乎让 C# 对我来说完全没用。真的没有办法保护或使这个过程很难做吗？“破解者”是否必须知道任何类名等才能做到这一点？谢谢！

更新：我正在尝试保护二进制（exe）而不是代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:18:57.067

我从几个用户那里读到这里的某个地方，无论代码是用什么写的，都可以反编译。这样想，系统怎么会知道如何运行代码呢？这是同一个概念。

不过通常情况下，大多数开发人员（据我所知）并不太担心这一点。当然，这是一个很好的理由，不要在代码中包含任何敏感细节，而是在其他地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:20:22.840

Any of the .NET languages, and Java can be de-compiled. This includes .Exe and .dll files. What you will need to do is get an tool that obfuscates the code.

I've listed one below for you so you can get an idea: [http://www.red-gate.com/products/dotnet-development/smartassembly/](http://www.red-gate.com/products/dotnet-development/smartassembly/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:20:42.707

If you're worried about protected industry secrets, it's impossible to send a computer the right instructions, but expect those instructions cannot be read by a capable person. If your goal is to stop somebody from modifying your EXE, why not simply sign your executable?

[http://blogs.msdn.com/b/shawnfa/archive/2007/01/10/combining-strong-names-with-authenticode.aspx](http://blogs.msdn.com/b/shawnfa/archive/2007/01/10/combining-strong-names-with-authenticode.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T20:17:43.083

你确定你的代码值得有人这样做吗？很少有应用。

# php - 加载 Facebook 页面标签 URL

> ID：13920541
> 
> 赞同：1
> 
> 时间：2012-12-17T19:10:08.250
> 
> 标签：php, facebook, facebook-graph-api, facebook-javascript-sdk

已经创建了一个 Facebook 应用程序，我们知道 Facebook 应用程序有 2 个`URLs.` `Page Tab URL and Application URL`。在我的代码中，如果我将用户重定向到页面选项卡 URL，它会给我 FacebookGraphMethod 异常。可能是我需要使用其他参数重定向。任何可以帮助解决此问题的人\ 例如页面选项卡 URL`abc.com/main.php` 来自 main.php 我导航到 xyz.php 现在我想回到 main.php 我该怎么办，我什至尝试了`window.location.href` 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:16:35.103

您首先需要将您的应用程序添加到页面。然后，您可以在此页面上通过单击他的应用程序图标（或访问这样的 URL：）来访问它`http://facebook.com/{{page_username}}/app_{{app_id}}`。

您可以在 FB API 上使用此方法获取页面用户名：

```
$profile = $facebook->api('/' . $PageInfo['page']['id'], 'GET');
$page_username = $profile['username']; 
```

要将应用程序添加到页面，您可以使用`add page tab dialog`：[https ://developers.facebook.com/docs/reference/dialogs/add_to_page/](https://developers.facebook.com/docs/reference/dialogs/add_to_page/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:10:29.863

使用 top.location.href 重定向到页面选项卡。

```
<?php 
  echo "<script type='text/javascript'>top.location.href='".$fbpagetaburl."';</script>";
  exit; 
 ?> 
```

# php - POST 使用 JQuery 显示未定义

> ID：13920550
> 
> 赞同：1
> 
> 时间：2012-12-17T19:10:47.743
> 
> 标签：php, jquery, html

我是 jQuery 新手，我`undefined`在提交表单时不断获取数据。我在网上看了，试`serialize()`了，`$.ajax`函数，`$.post`函数等方法都无济于事。

我正在尝试在不刷新页面的情况下完成表单提交。如果我在表单提交后注释掉脚本以保留在页面上，则代码可以正常工作。

**index2.php**

```
<script>
function newlock() {
    $("#new-lock").load("new-lock.php");
}
</script>

<h3>Lock Settings</h3>
<div>
    <a href="#" onclick="newlock();">New Lock</a>
</div>

//code in between

<div id="tabs-1">
    <div id="new-lock"></div>
</div> 
```

**insert_new_lock.php**

```
require "connect.php";

$name = $_POST['name'];
echo $name;
$IP = $_POST['IP'];
echo $name;

$sql="INSERT INTO door_lock (lock_IP, lock_name)
VALUES
('$name','$IP')";
if (!mysql_query($sql,$conn))
{
die('Error: ' . mysql_error());
}

mysql_close($conn);
?> 
```

**新锁.php**

```
<!doctype html>
<html lang="us">
<h2 align = "center"> Please enter information for the new lock </h2>
    <table border="0" align= "center">
        <form id="newlockform" action="insert_new_lock.php" method="post">
            <tr><td>Lock Name:</td> <td><input type="text" name="name"></td></tr>
    <tr><td>Lock IP:</td> <td><input type="text" name="IP"></td></tr>
    <tr><td><input type="reset" value="Clear"> <input type="submit" name="submitted" value="Submit"></td></tr>
        </form>
    </table>
</html>

<script>
    $("#newlockform").submit(function() {

        var name = $("#name").val();
        var IP = $("#IP").val();

        var dataString = 'name=' + name + '&IP=' +IP;

        $.post('insert_new_lock.php', dataString, function(data) {
            $("#tabs-1").html(data).fadeIn('100');
            $('#name,#IP').val(''); 
        }, 'text');
        return false;
});

</script> 
```

任何帮助，将不胜感激！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:13:23.170

`id`您的表单字段上没有任何设置，所以

```
 var name = $("#name").val(); 
```

将返回 null，然后您将其作为空字符串提交。表单字段应该看起来像

```
<input type="text" name="whatever" id="name" />
                                  ^^^^^^^^^^^ 
```

让您的 JS 代码正常工作。

# .htaccess - 从 htaccess 重定向中排除文件夹

> ID：13920552
> 
> 赞同：0
> 
> 时间：2012-12-17T19:11:05.603
> 
> 标签：.htaccess, url-rewriting, rewrite

我的域有以下设置，它们都在同一个主机上。根据您访问的内容，您将被带到英语部分或西班牙语部分。我们正在添加一些通用数据库控制器，`_controller`但我们无法访问它们。在文件夹结构上，它们与 /en/ 和 /es/ 处于同一级别。

我使用下一个解决方案，但它对我不起作用，不断在域之间跳转。

谢谢

```
RewriteEngine on

# English Language Redirection
RewriteCond %{HTTP_HOST} ^domain.com.ar$ [OR]
RewriteCond %{HTTP_HOST} ^www.domain.com.ar$
RewriteCond %{REQUEST_URI} !^/_controller/
RewriteRule (.*)$ http://www.domain.com.ar/en/$1 [R=301,L]

# Spanish Language Redirection
RewriteCond %{HTTP_HOST} ^domain2.com.ar$ [OR]
RewriteCond %{HTTP_HOST} ^www.domain2.com.ar$
RewriteCond %{REQUEST_URI} !^/_controller/
RewriteRule (.*)$ http://www.domain2.com.ar/es/$1 [R=301,L] 
```

# c# - 如何将数据从 iOS 发送到 c# web 服务

> ID：13920556
> 
> 赞同：0
> 
> 时间：2012-12-17T19:11:26.760
> 
> 标签：c#, ios, web-services, ipad, rest

我开发了 ac#rest web 服务来与我的 iPad 应用程序通信，到目前为止我一直在使用它没有问题。这是一件非常简单的事情，到目前为止，有几个查询和 GET 方法对我来说效果很好。现在的问题是我正在尝试将数据从我的应用程序发送到 Web 服务，以插入到我的数据库中。

```
NSString *query = [NSString stringWithFormat:@"http:mywebsite.com"];
    _theURL = [[NSURL alloc]initWithString:query];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:_theURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:15.0];
    [request setHTTPMethod:@"POST"];
    [request addValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request addValue:@"application/json" forHTTPHeaderField:@"Accept"];
    NSData *requestData = [NSData dataWithBytes:[json UTF8String] length:[json length]];
    [request setHTTPBody:requestData];
    NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:YES]; 
```

这基本上是我的 Objective-C 代码，我尝试建立连接，设置 http 方法来发布和编码我想要发送的 NSData。这个 NSData 只是一个已经可以使用的 json 字符串。

现在在我的 Web 服务中，我尝试使用 Byte[] 获取此 NSData 以解码为字符串，获取我的 json 等等。问题是我做不到。我的网络服务方法代码是：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json, XmlSerializeString = false)]
public bool submitResults(Byte[] data) {
String jsonString = System.Text.Encoding.UTF8.GetString(data);
try{
  JavaScriptSerializer json = new JavaScriptSerializer();
var resultado = json.Deserialize<Pergunta[]>(jsonString); 
```

......它继续。恢复所有这些：我无法将数据发送到 Web 服务，因此我可以将其插入到我的数据库中。任何帮助将不胜感激。

顺便说一句，我得到的错误是这可怕的事情：

> {“消息”：“类型 \u0027System.Collections.Generic.IDictionary`2[[System.String, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089],[System.Object, mscorlib, Version=2.0 .0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089]]\u0027 不支持数组的反序列化。","StackTrace":" 在 System.Web.Script.Serialization.ObjectConverter.ConvertListToObject(IList 列表，类型类型，JavaScriptSerializer在 System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal(Object o, Type type, JavaScriptSerializer 序列化程序, Boolean throwOnError, Object&convertedObject)\r\n 在 System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal)\r\n .Serialization.ObjectConverter.ConvertObjectToTypeMain(Object o, Type type, JavaScriptSerializer 序列化器,Boolean throwOnError, Object& convertObject)\r\n 在 System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer 序列化程序，字符串输入，类型类型，Int32 depthLimit)\r\n 在 System.Web.Script.Serialization.JavaScriptSerializer。反序列化[T](字符串输入)\r\n 在 System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"}ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"}ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.InvalidOperationException"}

所以，试图帮助你帮助我，这是我的 json : =)

```
[
  {
    "categoriaID" : 1,
    "cursoID" : "601",
    "perguntaID" : "1",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 1,
    "cursoID" : "601",
    "perguntaID" : "2",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 1,
    "cursoID" : "601",
    "perguntaID" : "3",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 1,
    "cursoID" : "601",
    "perguntaID" : "21",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 2,
    "cursoID" : "601",
    "perguntaID" : "4",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 2,
    "cursoID" : "601",
    "perguntaID" : "5",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 3,
    "cursoID" : "601",
    "perguntaID" : "6",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 3,
    "cursoID" : "601",
    "perguntaID" : "7",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 3,
    "cursoID" : "601",
    "perguntaID" : "8",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 4,
    "cursoID" : "601",
    "perguntaID" : "9",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 4,
    "cursoID" : "601",
    "perguntaID" : "10",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 4,
    "cursoID" : "601",
    "perguntaID" : "11",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 4,
    "cursoID" : "601",
    "perguntaID" : "12",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 4,
    "cursoID" : "601",
    "perguntaID" : "13",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 5,
    "cursoID" : "601",
    "perguntaID" : "14",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 5,
    "cursoID" : "601",
    "perguntaID" : "15",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 5,
    "cursoID" : "601",
    "perguntaID" : "16",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 6,
    "cursoID" : "601",
    "perguntaID" : "17",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 6,
    "cursoID" : "601",
    "perguntaID" : "18",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 6,
    "cursoID" : "601",
    "perguntaID" : "19",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 6,
    "cursoID" : "601",
    "perguntaID" : "20",
    "nb" : 19574,
    "respostaTipo" : "Bom"
  },
  {
    "categoriaID" : 7,
    "cursoID" : "601",
    "perguntaID" : 22,
    "respostaTexto" : "Adorei!",
    "nb" : 19574
  }
] 
```

更新：

经过大量研究，我认为这与我在 Xcode 中的序列化有关。它是这样的：

```
_arrayPerguntas = [[NSMutableArray alloc]init];
    for (int i = 0; i < _conteudoProgramatico.count; i++) {
        InqueritosResposta *resp = [[InqueritosResposta alloc]init];
        [resp setNb:[NSNumber numberWithInt:_nb]];
        [resp setCursoID:[self indiceSessao:_nomeSessao]];
        [resp setCategoriaID:[NSNumber numberWithInt:1]];
        [resp setPerguntaID:[_idConteudoProgramatico objectAtIndex:i]];
        [resp setRespostaTipo:[self codeToString:[_respostasConteudoProgramatico objectAtIndex:i]]];
        [_arrayPerguntas addObject:resp];
    }
    for (int i = 0; i < _sessoesPraticas.count; i++) {
        InqueritosResposta *resp = [[InqueritosResposta alloc]init];
        [resp setNb:[NSNumber numberWithInt:_nb]];
        [resp setCursoID:[self indiceSessao:_nomeSessao]];
        [resp setCategoriaID:[NSNumber numberWithInt:2]];
        [resp setPerguntaID:[_idSessoesPraticas objectAtIndex:i]];
        [resp setRespostaTipo:[self codeToString:[_respostasSessoesPraticas objectAtIndex:i]]];
        [_arrayPerguntas addObject:resp];
    }
    for (int i = 0; i < _materiaisSuporte.count; i++) {
        InqueritosResposta *resp = [[InqueritosResposta alloc]init];
        [resp setNb:[NSNumber numberWithInt:_nb]];
        [resp setCursoID:[self indiceSessao:_nomeSessao]];
        [resp setCategoriaID:[NSNumber numberWithInt:3]];
        [resp setPerguntaID:[_idMateriaisSuporte objectAtIndex:i]];
        [resp setRespostaTipo:[self codeToString:[_respostasMateriaisSuporte objectAtIndex:i]]];
        [_arrayPerguntas addObject:resp];
    }
    for (int i = 0; i < _apresentacao.count; i++) {
        InqueritosResposta *resp = [[InqueritosResposta alloc]init];
        [resp setNb:[NSNumber numberWithInt:_nb]];
        [resp setCursoID:[self indiceSessao:_nomeSessao]];
        [resp setCategoriaID:[NSNumber numberWithInt:4]];
        [resp setPerguntaID:[_idApresentacao objectAtIndex:i]];
        [resp setRespostaTipo:[self codeToString:[_respostasApresentacao objectAtIndex:i]]];
        [_arrayPerguntas addObject:resp];
    }
    for (int i = 0; i < _expectativas.count; i++) {
        InqueritosResposta *resp = [[InqueritosResposta alloc]init];
        [resp setNb:[NSNumber numberWithInt:_nb]];
        [resp setCursoID:[self indiceSessao:_nomeSessao]];
        [resp setCategoriaID:[NSNumber numberWithInt:5]];
        [resp setPerguntaID:[_idExpectativas objectAtIndex:i]];
        [resp setRespostaTipo:[self codeToString:[_respostasExpectativas objectAtIndex:i]]];
        [_arrayPerguntas addObject:resp];
    }
    for (int i = 0; i < _feedBack.count; i++) {
        InqueritosResposta *resp = [[InqueritosResposta alloc]init];
        [resp setNb:[NSNumber numberWithInt:_nb]];
        [resp setCursoID:[self indiceSessao:_nomeSessao]];
        [resp setCategoriaID:[NSNumber numberWithInt:6]];
        [resp setPerguntaID:[_idFeedback objectAtIndex:i]];
        [resp setRespostaTipo:[self codeToString:[_respostasFeedback objectAtIndex:i]]];
        [_arrayPerguntas addObject:resp];
    }
    InqueritosResposta *resp = [[InqueritosResposta alloc]init];
    [resp setNb:[NSNumber numberWithInt:_nb]];
    [resp setCursoID:[self indiceSessao:_nomeSessao]];
    [resp setCategoriaID:[NSNumber numberWithInt:7]];
    [resp setPerguntaID:[NSNumber numberWithInt:22]];
    [resp setRespostaTexto:_respostaObservacoes];
    [_arrayPerguntas addObject:resp];

    NSError *writeError = nil;
    NSMutableArray *jsonRespostas = [[NSMutableArray alloc]init];
    for(InqueritosResposta *resp in _arrayPerguntas)
    {
        NSMutableDictionary *jAnswer = [[NSMutableDictionary alloc] init];
        [jAnswer setObject:resp.nb forKey:@"nb"];
        [jAnswer setObject:resp.cursoID forKey:@"cursoID"];
        [jAnswer setObject:resp.categoriaID forKey:@"categoriaID"];
        [jAnswer setObject:resp.perguntaID forKey:@"perguntaID"];
        if (resp.respostaTipo != nil) {
            [jAnswer setObject:resp.respostaTipo forKey:@"respostaTipo"];
        }
        if (resp.respostaTexto != nil) {
            [jAnswer setObject:resp.respostaTexto forKey:@"respostaTexto"];
        }
        [jsonRespostas addObject: jAnswer];
    }
    NSArray *final = [NSArray arrayWithArray:jsonRespostas];
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:final options:NSJSONWritingPrettyPrinted error:&writeError];

    [self submitData:jsonData]; 
```

基本上我把我所有的对象都放在不同来源的 _arrayPerguntas 中。然后我使用字典将它们全部正确地放在另一个数组（最终数组）中。submitData 方法是我在上面输入的连接设置方法。提前致谢，

快乐编码，

ruitex23

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:20:52.247

Don't do this. Don't use Microsoft's convoluted approach to web services that really only offer a benefit if you're using Microsoft technology to connect to them. Even then it's... shaky at best.

Look into JSONResult MVC Controller Methods. These offer you the most platform independent control over your application's behavior and you won't get any obscure errors like the one you're experiencing. It's pure JSON both ways and there's no guesswork.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T17:11:09.520

我认为它在反序列化方面失败了。请验证您的 json 对象 (jsonString)。一个非常好的在线 json 验证器是 jsonlint.com

# spring-mvc - 在 Spring MVC 中，有没有办法实现错误级别？

> ID：13920559
> 
> 赞同：1
> 
> 时间：2012-12-17T19:11:36.407
> 
> 标签：spring-mvc

在 Spring MVC 中，有没有办法识别错误的“级别”或“类型”？示例包括信息、警告和错误消息？

顺便说一句，这纯粹是出于格式化目的。例如，错误消息往往是红色文本，而警告消息只是黑色。

** 为清晰起见更新：

在我们当前的系统中，我们有多个级别的消息：错误、警告、信息。SpringMVC 中是否有任何内置功能，可以让我设置错误消息的级别？

此外，我们似乎在控制器中使用了 BindingResults（特别是 BeanPropertyBindingResults），并触发了 Validator（我们实现 Spring 的 Validator 接口的自定义类）。

在验证期间，我们最终会编写如下内容：

```
ValidationUtils.rejectIfEmptyOrWhitespace(errors, modelVariable, "required", new Object[] {variableDisplayName}); 
```

或者

```
errors.rejectValue("field", "fieldName"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:25:15.237

最后，我们最终扩展了 ObjectError 和 FieldError 以包含一个新字段“ErrorLevel”。创建新错误时 - 我们使用这些新对象，以便我们可以设置 ErrorLevel。在 JSP 上，我们查找 ErrorLevel 以确定如何显示消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T04:41:55.840

首先，现有验证功能中不存在“级别”或错误类型之类的东西。

但是，如果您想像记录错误级别一样实现错误级别，可以通过将错误设置为请求 flashmap 中的列表来实现。

例如。

```
RequestContextUtils.getOutputFlashMap(request).put("ERROR_MESSAGES", Arrays.asList("test error"));
RequestContextUtils.getOutputFlashMap(request).put("WARN_MESSAGES", Arrays.asList("test error")); 
```

# java - SharedPreferences 离线高分 - Android (java)

> ID：13920563
> 
> 赞同：0
> 
> 时间：2012-12-17T19:11:50.363
> 
> 标签：java, android, sharedpreferences, offline

我想我现在有一个功能齐全的琐事游戏。在结果页面上的游戏结束时，它会显示分数（long）和百分比（int）。我现在想实现一个离线 SharePreferences highscores，其中输入了 3 个变量——rank(int)、score(long) 和 percent(int)。我试图首先用一个变量实现一个高分，然后再添加另外两个，但我似乎失败得很厉害。您可以在下面的我的活动中看到很多注释掉的代码，其中我正在尝试一些东西，并且许多其他尝试已经被删除。

这是我第一次尝试使用 SharedPreferences，所以我还没有完全掌握它。

结果.java

```
public class Results extends Activity {

    public static final String SP_NAME = "TEST";
    public static final String INT_PERCENTAGE = "SP_percentage";
    public static final String INT_RANK = "SP_rank";
    public static final String LONG_SCORE = "SP_score";
    private SharedPreferences mPrefs;

    QuestionView qv = new QuestionView();
    ArrayList<Question> queryList = qv.getQueries();

    int cAnswers, wAnswers, percentage, rank;

    long score;

    ArrayList<Question> qs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.resultsmain);

        mPrefs = getSharedPreferences(SP_NAME, 0);

        cAnswers = getIntent().getIntExtra("correctAnswers", -1);
        wAnswers = getIntent().getIntExtra("wrongAnswers", -1);
        score = getIntent().getLongExtra("score", -1);

        qs = getIntent().getParcelableArrayListExtra("queries");

        Button mainmenuBtn = (Button)findViewById(R.id.mainmenuBtn);
        mainmenuBtn.setText("Main Menu");

        mainmenuBtn.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                restart();
            }
        }); 

        //Retrieving high score
        SharedPreferences mPrefs = getSharedPreferences(LONG_SCORE, 0);
        SharePreferences.Editor editor = prefs.edit();
        long highscore = mPrefs.getLong(LONG_SCORE, 0);

        //Saving current score as high score
/*      SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putInteger(HIGH_SCORE, currentScore);*/
        // Commit the edits!
        editor.commit();

        SharedPreferences prefs = mContext.getSharedPreferences("preferencename", 0);  
/*      SharedPreferences.Editor editor = prefs.edit();  
        return editor.commit();*/

        showResults();
    }

    //...other code
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:04:31.763

关键是，您不了解 SharedPreference 的用法。对于这个高分的东西，你应该使用 SQLite 数据库或文本文件。

请阅读指南[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)以更好地了解 Android 中不同类型的持久化方法。

顺便说一句，您应该创建一个包含您所说的三列（rank(int)、score(long) 和 percent(int)）的表，并做一些 CRUD 以使您的高分运行良好。您将必须了解如何使用 SQLiteOpenHelper 并创建自己的来执行表创建过程。然后，创建模型类来管理数据。

因此，如果您在阅读 developer.android.com 指南后仍有疑问，请在 Google 中搜索 SQLite 教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T04:20:56.773

看起来你的问题得到了很好的回答，但我只是把它扔在那里以获得视角（你知道的越多！对吗？）。

您可能会发现使用在线排行榜系统比在本地维护一个更容易。它可以为您节省大量工作并为您带来好处，让玩家可以轻松地在全球范围内竞争。需要检查的一些选项是[Swarm](http://swarmconnect.com)（又名 SwarmConnect）、[Scoreloop](http://scoreloop.com)或[Papaya](http://papayamobile.com)。它们都提供了一种启动和运行全球排行榜的方法，尽管我认为 Swarm 的系统可能是开箱即用的最快和最容易设置的系统。

干杯!

# r - ESS 和 RScript：以 `compile-dwim-run' 的方式执行

> ID：13920569
> 
> 赞同：2
> 
> 时间：2012-12-17T19:12:05.940
> 
> 标签：r, emacs, ess

我刚刚在 EMACS 中设置了 ESS（我是这个领域的相对新手）。我已经想出了如何获取一个 R 脚本并启动一个交互式 R shell 并评估整个缓冲区（“Cc Cb”）。但我也希望能够通过 RScript 提交 R 脚本，就像使用 Perl 或 Python 和 `compile-dwim-run' 一样，我已经绑定到“Cc r”，并且拥有整个输出在单独的缓冲区中返回给我，而无需保持打开交互式 R shell。

我似乎找不到默认的方法来做到这一点，我想在我开始尝试自己动手之前利用 ESS 必须工作的任何东西（我假设有）。

谢谢你，马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:53:18.023

`C-c C-l` 是你在找什么？用于 `C-c C-h` 查看 Cc 映射上绑定的所有键（更好的方法是从 emacs 包管理器安装[helm-descrbind](https://github.com/emacs-helm/helm-descbinds) - 你会感到惊喜:)。

[编辑：]对不起，误读了您的帖子。您想要批量评估。这不适用于 R。原因是，R 中的分析通常是一个复杂的过程，您不想一次又一次地执行。因此，您可以保持交互式会话打开并迭代地实现您想要的。

ESS 内部一直在讨论添加一些批处理功能，但似乎很少有人真正需要它。

# c# - 如何在控制器中访问 POST 请求的参数

> ID：13920571
> 
> 赞同：2
> 
> 时间：2012-12-17T19:12:10.060
> 
> 标签：c#, jquery, asp.net-mvc, rest, post

Javascript：

```
$.post("/DataAPI/messageProcessor", { query: "Hello World!" }, function (data) {
  Handle(data); 
}
}); 
```

控制器：

```
[System.Web.Http.AcceptVerbs("Post")]
[System.Web.Http.ActionName("messageProcessor")]
public ResponseModel messageProcessor(string query)
{
  ResponseModel model=DoStuff(query);
  return model;
} 
```

如何`query`从控制器访问。它总是以`query == null`. 也有`Request`可用的对象，但我不确定如何浏览其成员以访问我的`"Hellow World!"`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:13:55.990

您需要从客户端传递名称-值对：

```
$.post("/DataAPI/messageProcessor"
          , { query: "Hello World!" }
          , function (data) {} ); 
```

检查[jQuery.Post](http://api.jquery.com/jQuery.post/)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T21:27:12.767

感谢一位同事。解决方法如下：

```
public class QueryClass 
{
public string query { get; set; }
}

public ResponseModel messageProcessor(QueryClass query)
{
  ResponseModel model=DoStuff(query.query);
  return model;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:15:56.337

尝试这个 ：

```
$.post("/DataAPI/messageProcessor", { 'query' : 'Hello World!' }, function (data) {
     Handle(data); 
   }
}); 
```

# javascript - 有没有办法显示从客户端发送到服务器的base64图像字符串数据的传输进度？

> ID：13920574
> 
> 赞同：3
> 
> 时间：2012-12-17T19:12:22.243
> 
> 标签：javascript, html, upload

我的应用程序涉及繁重的客户端图像处理。由于文件在用户会话期间被频繁修改，我们不会将它们物理上载到服务器，直到用户完成并选择保存图像。

使用 html5 文件 API 从客户端读取图像并以 base64 字符串的形式存储在内存中，用户可以在其中快速有效地执行他/她的操作。

当用户选择保存时，我们通过标准的 ajax POST 将一个或多个字符串传输到服务器，然后将图像构建到服务器端的物理文件中。

我想做的是为这个最后的上传阶段提供一个进度条。

现在，我很清楚 html5 规范包括对文件上传进度报告的支持。但是，我们没有使用标准的上传方法，而是如上所述，图像是作为字符串发送的。

所以我的问题真的归结为以下几点：

A）无论如何实际测量在简单帖子（PHP服务器端）期间发送的实际字节。如果是这样，这将起作用，因为我已经从 HTML5 filereader api 获得了以字节为单位的图像大小。

B）如果没有的话，我可以将 base64 数据即时转换为实际文件，并通过标准 html5 上传方法发送它们，同时报告进度。

在任何一种情况下......如果是这样，怎么办？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:18:36.550

通过 ajax 发送 Base64 图像会更容易。Ajax 使用回调函数，因此只需使用某种指示符让用户知道ajax 已启动（即文件下载已开始）。完成后，回调函数将运行，现在您可以关闭指示器，无论它是什么。

至于通过ajax测量实际字节，我不确定。

这种方法

[使用 ajax 请求显示进度条进度](https://stackoverflow.com/questions/2474528/showing-progressbar-progress-with-ajax-request)

建议估计一下。我会更进一步，也许时间回调超过 10 次尝试（使用这个平均值来估计你的进度条并使用上面提到的 90% 技巧）。

或者，如果您想对 Base64 文本进行编码/解码。

[如何在 JavaScript 中将字符串编码为 Base64？](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:19:18.227

根据您使用的服务器技术，有多种选择。

1.  使用[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)或[Javascript 长轮询](http://techoctave.com/c7/posts/60-simple-long-polling-example-with-javascript-and-jquery)从服务器获取上传进度，并从客户端更新进度条

2.  如果您在后端使用 .Net 技术，请探索[SignalR](http://signalr.net/)库，它将提供所有管道以提供服务器和客户端之间的实时通信。

# c# - 使用日期参数时的“数据类型不匹配”

> ID：13920575
> 
> 赞同：1
> 
> 时间：2012-12-17T19:12:26.227
> 
> 标签：c#, orm, oledb, coolstorage

我正在尝试在我的项目中实现 CoolStorage，但是在使用日期参数时遇到了问题。当我传入 null 作为日期参数时，它会成功添加记录，但是如果我通过实际日期传递，则在调用 .Save() 将新记录写入数据库时​​会出错。我有（Activa）CoolStorage 源代码并找到了它失败的地方，但不知道如何修复它。

它失败的代码如下（特别是该`dbCommand.ExecuteNonQuery()`行）：

```
internal int ExecuteNonQuery(string sqlQuery, CSParameterCollection parameters)
{
    long logId = Log(sqlQuery, parameters);

    IDbCommand dbCommand = CreateCommand(sqlQuery, parameters);

    try
    {
        dbCommand.ExecuteNonQuery();

        return 1;
    }
    catch (InvalidOperationException)
    {
        return -1;
    }
    finally
    {
        LogEnd(logId);
    }
} 
```

sqlQuery 包含：

```
insert into [Schedule] ([TaskID],[StartTime],[MondayYn],[TuesdayYn],[WednesdayYn],[ThursdayYn],[FridayYn],[SaturdayYn],[SundayYn],[DefaultSysuserID],[DefaultTeamID],[ActiveYn]) 
values (@P17,@P18,@P19,@P20,@P21,@P22,@P23,@P24,@P25,@P26,@P27,@P28) 
```

@P18 包含违规日期，这是一个 CSParameter 对象，其值为：

```
{17/12/2012 18:52:44} 
```

此外，正在使用的数据库是**Access**。抛出的错误是一个 OldDbException，它读取*{"Data type mismatch in criteria expression."}*。

任何人都可以就如何解决这个问题提供任何建议吗？

**编辑：**计划开始时间字段在计划表中定义为日期/时间。我需要将其所需的属性设置为 True，但已禁用以通过将 StartTime 排除在外来测试添加记录。通过 CoolStorage 类应用的参数如下：

```
Schedule schedule = Schedule.New();
schedule.TaskID = task.TaskID;
schedule.StartTime = DateTime.Now;
schedule.MondayYn = true;
schedule.TuesdayYn = true;
schedule.WednesdayYn = true;
schedule.ThursdayYn = true;
schedule.FridayYn = true;
schedule.SaturdayYn = false;
schedule.SundayYn = false;
schedule.DefaultSysuserID = sysuser.SysuserID;
schedule.DefaultTeamID = sysuser.SysuserTeams.First().TeamID;
schedule.ActiveYn = true;
schedule.Save(); 
```

当我注释掉 Schedule.StartTime = DateTime.Now 行时，我可以成功添加记录，否则会出现上述错误。如果不编辑我的 ORM 映射类，我无法将格式更改为文本，这无疑会在其他地方导致错误。我想我可以改变 CoolStorage DataProvider 类，但我假设这不应该是必要的？

**EDIT2：**作为测试，我截获了上面发布的 SQL 以删除 @P18 引用并硬编码日期并正确添加记录：

```
insert into [Schedule] ([TaskID],[StartTime],[MondayYn],[TuesdayYn],[WednesdayYn],[ThursdayYn],[FridayYn],[SaturdayYn],[SundayYn],[DefaultSysuserID],[DefaultTeamID],[ActiveYn]) 
values (@P17,#2012-12-01 12:00:00#,@P19,@P20,@P21,@P22,@P23,@P24,@P25,@P26,@P27,@P28) 
```

我还尝试通过将参数的值转换为格式为 #yyyy-MM-dd hh:mm:ss# 的字符串来修改参数的值，但是我仍然收到标准表达式中的数据类型不匹配错误。

**EDIT3：**我已经按照 Abhishek 的（编辑 - 也是 Dean 的）建议通过如下修改 CSParameterCollection 类将 DateTime 转换为字符串来修复它。如果我决定使用不同的数据库，希望这不会导致问题，但它已为 Access 修复：

```
public CSParameter this[string name]
{
    get
    {
        CSParameter parameter;

        _parameterMap.TryGetValue(name, out parameter);

        if (parameter.Value.GetType().Equals(typeof(DateTime)))
        {
            DateTime date = (DateTime)parameter.Value;
            string dateString = date.ToString("yyyy-MM-dd hh:mm:ss");
            parameter.Value = dateString;
        }

        return parameter;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:42:03.700

我强烈认为问题在于，当您将参数添加到参数集合时，它们的顺序不同。

确保它们的顺序相同，这适用于 sql 语句或存储过程。

在使用 OLEDB 提供程序时，ADO.NET 不支持命名参数，并且由于您正在连接到 Access DB，因此您实际上是在使用 OLEDB 提供程序。所以参数的顺序很重要。

如果它们按顺序排列并且仍然无法正常工作，那么我认为这可能是 DateTime 的问题。在将其添加为参数之前尝试将其转换为字符串。

# c++ - 如何画一个实心圆？

> ID：13920576
> 
> 赞同：4
> 
> 时间：2012-12-17T19:12:26.593
> 
> 标签：c++, c

我正在使用我的 C 代码根据规范创建位图/bmp 文件，并且我想在我的位图上绘制简单的图元。以下代码显示了如何在位图上绘制矩形：

```
if(curline->type == 1) // draw a rectangle
{
    int xstart = curline->x;
    int ystart = curline->y;
    int width = curline->width + xstart;
    int height = curline->height + ystart;

    int x = 0;
    int y = 0;

    for(y = ystart; y < height; y++)
    {
      for(x = xstart; x < width; x++)
      {
        arr[x][y].blue = curline->blue;
        arr[x][y].green = curline->green;
        arr[x][y].red = curline->red;
      }
    }

    printf("rect drawn.\n");
}

...
save_bitmap(); 
```

**示例输出：** ![在此处输入图像描述](../Images/bf18ecfe066ad948ab5f77c309c3da71.png)

所以基本上我正在为给定的 x 和 y 字段中的所有像素设置红色、绿色和蓝色值。

现在我想通过知道它的中点和半径来填充一个圆。但是我怎么知道哪些像素在这个圆圈内，哪些像素不在？任何帮助将不胜感激，感谢阅读。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T19:23:34.407

如果点到圆心的距离小于圆的半径，则该点位于圆的边界内。

考虑一个点 (x1,y1) 与一个圆心 (x2,y2) 和半径 r 的比较：

```
int dx = x2 - x1; // horizontal offset
int dy = y2 - y1; // vertical offset
if ( (dx*dx + dy*dy) <= (r*r) )
{
    // set pixel color
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T19:28:06.640

您也可以在维基百科上尝试中点[算法](http://en.wikipedia.org/wiki/Midpoint_circle_algorithm)。

# java - 仅在已修改的情况下下载网页

> ID：13920580
> 
> 赞同：1
> 
> 时间：2012-12-17T19:12:41.900
> 
> 标签：java, android, httpurlconnection, urlconnection

我正在为评估构建和应用程序，并且我需要下载一个网页，前提是它自上次下载以来已被修改。我需要将上次更改的日期存储为 Long，因此 getDate() 方法返回一个 long。我尝试使用 HttpURLConnection 和 URLConnection，但我无法实现解决方案。在我的尝试中，我尝试使用：

*   [If-Modified-Since](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25)，但是，不知何故，我没有收到 304 响应代码，只有 200。代码：

    ```
    HttpURLConnection huc = null;
    try {
        URL url = new URL(pages.get(0).getUrl());
        huc = (HttpURLConnection) url.openConnection();
        huc.setIfModifiedSince(pages.get(0).getDate());
        huc.connect();
        Log.d("App", "Since: " + huc.getIfModifiedSince());
        Log.d("App", "Response: " + huc.getResponseCode());
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
       //output
    since: 1354320000000 - which is the return of the getDate method.
    Response: 200 
    ```

*   [html etags](http://en.wikipedia.org/wiki/HTTP_ETag)，但我无法从响应中检索信息，因为服务器没有回答 Last-Modified 标记。

提前致谢

# ruby-on-rails - 单个表中的多个外键未生成

> ID：13920584
> 
> 赞同：1
> 
> 时间：2012-12-17T19:13:26.550
> 
> 标签：ruby-on-rails, associations

我有一个设置，当我用户创建一个新项目时，他们默认必须创建一个属于该项目的新团队（一对一）和一个属于该团队的新角色（多对一）。一切都按预期工作，除了我还希望创建项目的人与第一个角色相关联。

因此，角色有两个外键（team_id 和 user_id）。我似乎无法让 user_id 像 team_id 那样填充。这是代码：

```
class ProjectsController < ApplicationController
  before_filter :signed_in_user, only: [:show, :edit, :update, :destroy]
  before_filter :correct_or_admin_user,  only: [:edit, :update, :destroy]

  def new
    @user = current_user
    @project = Project.new
    @team = @project.build_team
    @user.roles.build 
    @team.roles.build
  end

  def create
    @project = current_user.projects.new(params[:project])

    if @project.save
      flash[:success] = "Your new project has been created!"
      redirect_to @project
    else
      render 'new'
    end
  end 
```

“current_user.roles.build”这行有什么问题吗？我不明白为什么@team.roles.build 可以工作，但另一行却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:45:09.057

[http://guides.rubyonrails.org/association_basics.html#has_many-when_are_objects_saved](http://guides.rubyonrails.org/association_basics.html#has_many-when_are_objects_saved)

我在这里看到两个问题：

1.  `build`不保存创建的对象。当团队被保存时（当 rails 知道团队的 id 是什么，以便它可以设置外键时），您建立的与新团队关联的角色也会被保存。同样，当新项目被保存时，团队也会被保存。因此，当您保存项目时，这些保存都会发生。但是您永远不会做任何会导致您通过用户关联建立的角色被保存的事情。

2.  即使您使用`create`（保存新的关联记录），即 ，`@user.roles.create`您最终也不会得到我认为您想要的，因为您将创建一个与`Role`您从中获得的对象不同的对象`@team.roles.build`。

像下面这样的东西可以解决这两个问题。

```
@team.roles << @user.roles.build 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T02:14:03.070

I was able to figure out what you were getting at with '@team.roles << @user.roles.build'. I was not able to use @team.roles though because the scope of this instance was limited to the new function as far as I could tell. Also the creation of this foreign key has to take place in create because the role is not generated until after the project is saved.

What I ended up doing was I added the following to the create method after the if @project.save line:

```
 current_user.roles << @project.team.roles(params[:project]) 
```

Then I removed @user.roles.build completely. Section 4.3.1.2 from [http://guides.rubyonrails.org/association_basics.html#has_many-association-reference](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference) is where it all finally clicked for me.

# excel - powershell excel 删除行组

> ID：13920585
> 
> 赞同：0
> 
> 时间：2012-12-17T19:13:41.000
> 
> 标签：excel, powershell

我有一个包含数千个条目的 xlsx 文件，我可以在一秒钟内过滤一列以仅使用 $workbook.AutoFilter("DATA") 显示某些信息

这个过滤器只需要一秒钟，但是删除所有第一列 = "DATA" 的行需要永远循环。

有没有办法捕获隐藏行或范围的数组...或任何我可以 .DELETE()

我试过这个

```
[void] [Reflection.Assembly]::LoadWithPartialName( 'System.Windows.Forms' ) 
$Excel = New-Object -Com Excel.Application
$WorkBook = $Excel.Workbooks.Open($filename)
$Excel.visible = $true
$Excel.selection.autofilter(1,"DATA")
$sheet = $workbook.Sheets.Item(1)
$max = $sheet.UsedRange.Rows.Count
for ($i=2; $i -le $max; $i++)
{
    $row = $sheet.Cells.Item($i,1).EntireRow
    if ($row.hidden -eq $false)
    {
        $row.Delete()
    }
} 
```

*FIXED* .. 向后循环 $i-- ***** 然而，这让我很失望，因为由于某种原因，它留下了大约 10% 的可见行未删除。如果我运行它两次它可以工作但是扩大这将成为一个更大的问题。

在一个完美的世界里，我想要这样的东西

```
$Excel.selection.autofilter(1,"DATA").DELETE() 
```

提前感谢您的天才可能拥有的任何提示或技巧。

**更新：**谢谢 Graimer，你说得对，我必须在其他方向循环，这仍然需要相当长的时间，有 10,000 多个条目......我正在寻找一种无需手动循环的方法。

如果我去 $Excel.visible = $true, 然后 $Excel.selection.autofilter(1,"DATA")... 然后作为用户我 ctrl+A 并删除选定的行...它手动比循环过程...我不禁认为必须有某种方法来编写该动作的脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:21:16.520

应用一个拟合器选择从 row1 到 Lastrow 的范围，删除范围后，结果很容易。因为过滤器只显示一个值范围不能选择隐藏单元格

# struts2 - Apache Tiles 中的 Struts2 MessageResources

> ID：13920587
> 
> 赞同：1
> 
> 时间：2012-12-17T19:13:51.513
> 
> 标签：struts2, tiles2

我试图在tiles 2.1.4 表达式中使用Struts2 消息资源，但没有成功。例如，以下资源在 JSP 中可用...

```
<s:text name="htmlheadHeading1"/><br/> 
```

...但是当我尝试在图块定义中使用相同的资源时...

```
<put-attribute name="title" expression="${htmlheadHeading1}" /> 
```

...我得到错误...

```
ELResolver cannot handle a null base Object with identifier 'htmlheadHeading1' 
```

...有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:18:17.180

此解决方案不使用切片表达式，但如果您需要在通过切片定义传递键时在 JSP 中显示本地化文本，则该解决方案将起作用。

在瓷砖定义中：

```
<put-attribute name="title" value="htmlheadHeading1" /> 
```

在您的 JSP 中，然后使用 Struts2`<s:set>`标记将标题从瓷砖定义设置为局部变量，然后在`<s:text>`标记中使用它。

```
<s:set var="title">
  <tiles:getAsString name="title" ignore="true"/>
</s:set>
<s:text name="%{#title}"/> 
```

# android - Android NDK-BUILD 程序在静态数组分配上崩溃

> ID：13920588
> 
> 赞同：2
> 
> 时间：2012-12-17T19:13:52.013
> 
> 标签：android, c, android-ndk, segmentation-fault

我是android编程的新手。我有一个使用 NDK-Build 构建的本机 C 应用程序。我正在其中一个线程中进行静态分配。

整数 X[64][4096]；//<-- 恰好需要 1 MB 空间。

当我使用 adb shell 运行它时，我得到一个“分段错误”。如果我将数组减少到 X[63][4096]，它似乎运行良好。现在我知道在 android 中有 16MB 或类似的限制用于 VM，但这个程序几乎不分配占用 2MB 的 RAM（并且设置-> 应用程序显示我还有另外 650 MB 的备用 RAM）。

知道什么可能导致这次崩溃吗？以及如何解决？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T20:50:02.053

您所做的分配实际上不是静态的。如果`X`是函数内部的局部变量，它将在每次进入函数时动态分配在堆栈上（通常比堆小得多），并在函数返回时释放。

如果你真的`X`想要是静态的（即应该`X`在线程函数的所有实例中共享一个副本），你可以声明变量`static`。
如果您打算让每个线程都有自己的 X 副本，您应该明确地使用在堆上分配空间`malloc() / new []`并使用`free() / delete []`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-09T17:41:18.287

我正在尝试将游戏从 Linux 移植到 Android，但是我在 Android 的 1 MB 堆栈中遇到了很多麻烦，这完全不够用，并且会导致整个地方的段错误。在 Linux 上，默认堆栈大小为 8 MB，而在 Windows 上，堆栈可以在 VS 中轻松配置。有没有办法增加 Android NDK 上的堆栈大小，所以我不必用缓慢而丑陋的 malloc/free 替换我所有的固定数组？

# php - MySQL查询涉及三个阶段和两个表

> ID：13920590
> 
> 赞同：0
> 
> 时间：2012-12-17T19:14:04.460
> 
> 标签：php, mysql, sql

数据库：

*   xx_users (id, name, user_id, email, location)
*   xx_questions (id, question, description, user_id)

代码：

```
$friends = $facebook->api('/me/friends');
$arr= $friends['data'];
$friend_ids_arr = array();
foreach($arr as $friend) {
    $friend_ids_arr[] = $friend['id'];
}

$sql = "SELECT (SELECT * FROM xx_questions WHERE user_id IN (" . implode(',', $friend_ids_arr) . ") OR user_id = '$user' ORDER BY time DESC) (SELECT * from questions INNER JOIN users ON users.user_id = questions.user_id WHERE users.location = 'Cambridge, Cambridgeshire')";    
$data = mysql_query($sql) or die(mysql_error());

while ($row = mysql_fetch_assoc($data)) {
       // echo values from what's been selected
} 
```

如果出现以下三种情况中的任何一种，我正在尝试从`xx_questions`（用户已发布的）中选择问题：

1.  发帖人的 user_id 与当前用户的其中一位朋友的值匹配的值（即发帖人和用户是朋友）
2.  发布者的 user_id 与用户的值匹配的那些值（即发布者是用户）
3.  发布者的位置与当前用户的位置匹配的那些值（即发布者和用户当前在同一城市）

我已经设法使 1 和 2 起作用，但是当我尝试引入 3 时出现问题，所以我的两个问题是：

1.  3 的正确 MySQL 是什么？
2.  它是如何与 1 和 2 集成的？

提前致谢，如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:44:25.673

要获取您想要的信息，您需要将 xx_questions 加入到 xx_users。类似以下的内容会返回与三个条件中的任何一个匹配的问题：

```
select *
from xx_questions q join
     xx_users u
     on q.user_id = u.user_id
where q.user_id in (<implode(',', $friend_ids_arr)>) or
      q.user_id = '$user' or
      u.location = (select location from xx_users where USER_ID = $user) 
```

我把它写得更像 SQL 而不是字符串，所以它更容易阅读。

# ios - 触摸列表项仅触摸所有其他单元格

> ID：13920591
> 
> 赞同：0
> 
> 时间：2012-12-17T19:14:05.710
> 
> 标签：ios, cucumber, calabash

我有以下基于 Calabash 用 Cucumber 编写的步骤定义。这个名字说明了一切：我想触摸表格视图中的每个单元格并再次返回表格视图。

```
Then /^I touch every list item and go back again$/ do
    total_sections = query("tableView", "numberOfSections")
    last_section = total_sections[0] - 1
    (0..last_section).each do |section|
        total_rows = query("tableView", numberOfRowsInSection:section)
        end_of_range = total_rows[0] - 1
        (0..end_of_range).each do |row|
            scroll_to_row "tableView", row
            sleep(STEP_PAUSE)
            macro %Q[I touch list item number #{row+1}]
            macro %Q[I go back]
        end
    end
end 
```

这在简单的表格视图中工作正常 - 但更改为包含分段表格视图（AZ）的不同选项卡会使此脚本接触前几个单元格，然后它变得很奇怪：它正确滚动到下一个单元格，但随后它接触到后面的单元格下一个单元格，直到没有可见的单元格可以点击。

这两个表视图之间唯一不同的是失败的表视图具有部分和较低的行高。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:03:29.930

问题在于使用该`scroll_to_row`功能。这适用于只有一个部分的简单表格视图。

更通用的函数`scroll_to_cell`同时支持部分和行。语法略有不同：

```
def scroll_to_cell(options={:query => "tableView",
                            :row => 0,
                            :section => 0,
                            :scroll_position => :top,
                            :animate => true})
   ...
end 
```

例如

```
scroll_to_cell(:section => 1, :row => 2) 
```

对于您的情况，还有一个高级功能`each_cell`。例如：

```
each_cell(:query => "tableView") do |row, sec|
    touch("tableViewCell indexPath:#{row},#{sec}")
    #...
end 
```

# java - joomla 1.5 限制标题/描述的最大字符数

> ID：13920592
> 
> 赞同：0
> 
> 时间：2012-12-17T19:14:15.717
> 
> 标签：java, css, joomla, title

如何限制 Joomla 1.5 表中标题、描述的最大字符数？

以及如何使这么长，不是将所有文本都写在表格中，而是写...或写在其他行中。

我的意思是如果标题是这样的：

```
"titleblablablaTITLEblablaTITLEtitle" 
```

我希望显示：

```
"titlebl..." 
```

或者

```
"titleblabl
ablaTITLE
blablaTITL
Etitle" 
```

查看我的网站 [http://padekime.wu.lt/index.php?option=com_djclassifieds&view=show&cid=1&Itemid=1](http://padekime.wu.lt/index.php?option=com_djclassifieds&view=show&cid=1&Itemid=1)

```
(Pavadinimas-title) / (Aprasymas-description) 
```

太长的桌子太大了，有人可以帮帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:36:01.777

此 CSS 应该在支持该`word-break`属性的浏览器中为您执行此操作：

```
td, th {
    word-break: break-all
} 
```

如果您对 PHP 解决方案感兴趣，`wordwrap()`标准库中有一个函数：http: [//php.net/manual/en/function.wordwrap.php](http://php.net/manual/en/function.wordwrap.php)

# c++ - 我可以在迭代 C++ 容器时修改它的值吗？

> ID：13920593
> 
> 赞同：6
> 
> 时间：2012-12-17T19:14:23.577
> 
> 标签：c++, containers

假设我有一个`vector<int> vals`. 我正在迭代它并将值更改为绝对值：

```
for (vector<int>::iterator it = vals.begin(); it != vals.end(); ++it) {
    if (*it < 0) *it = -*it;
} 
```

这是允许的吗？我没有改变它的大小，`vector<int>`所以我认为它不会失效。我想我很安全。我想确认这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T19:19:32.067

是的，它是安全的。您不会更改底层存储。`const`请记住，如果您像这样在函数中传递容器，它将不起作用：

```
void doSomething(const vector<int>& vals) 
```

该站点对此进行了很好的讨论：[http ://www.cplusplus.com/reference/vector/vector/begin/](http://www.cplusplus.com/reference/vector/vector/begin/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T19:35:46.567

它是安全的并且允许用于序列容器（例如`array`，`vector`和`deque`）。

对于`set`or `multiset`，不允许修改（尽管编译器可能不会拒绝尝试这样做的代码）。

对于`map`or `multimap`，您必须将键视为常量，但您可以修改与该键关联的值（这同样适用于`unordered_`变体）。

顺便说一句，您可能需要考虑一种算法，而不是上面使用的循环：

```
std::transform(vals.begin(), vals.end(), vals.begin(), ::std::abs); 
```

# awk - AWK 能做到这一点吗？修复了字段，水平和垂直记录混合

> ID：13920595
> 
> 赞同：1
> 
> 时间：2012-12-17T19:14:27.820
> 
> 标签：awk, ascii, gawk

我有以下记录结构：

```
ID Bezeichner OGD-Kurzname CKAN Feld Anzahl
          预知
 2 schema_name 附加：schema_name 1
         元数据结构
定义名称 der Metadatanstruktur
                  Die Angabe für OGD Metadaten ist optional, sollte aber wenn möglich
                  埃尔福根。BEINER Adaptierung der OGD Metadatanstruktur wird eine
执行任务
                  konsistente Metadatenführung erleichtert。Dieses Metadatanelement sollte
                  automatisch vom System (Software) befüllt werden
Beispiel OGD 奥地利元数据 2.0
开 1.4
2270:2010
ON/EN/ISO mdStanName (10)
19115:2003
RDF 属性 dcterms:alternative
定义 OGD 奥地利元数据 2.0。
英语

ID Bezeichner OGD-Kurzname CKAN Feld Anzahl
            Sprache des extras:
 3 模式语言 1
          元数据 schema_language
定义 ISO 639-2 dreistelliger ISO Sprachcode für den Metadatansatz
                  Sprache in welcher der Metadatatensatz erstellt wurde。模具
执行任务
                  Metadatanelement sollte automatisch vom System (Software) befüllt werden
北斯皮尔格尔
开 1.2
2270:2010
ON/EN/ISO mdLang (3)
19115:2003
RDF 属性 dcterms:language
定义元数据语言，总是 ger（德语）
英语

```

我想把它分成这个结构：

```
2|Bezeichnung der Metadatanstruktur|schema_name|extras:schema_name|1|Name der Metadatanstruktur|Die Angabe für OGD Metadatan ist optional, sollte aber wenn möglich erfolgen。Bei einer Adaptierung der OGD Metadatansstruktur wird eine konsistente Metadatanführung erleichtert。Dieses Metadatanelement sollte automatisch vom 系统（软件）befüllt werden|OGD 奥地利元数据 2.0|1.4|mdStanName (10)|dcterms:alternative|OGD 奥地利元数据 2.0。
3|Sprache des Metadatensatzes|schema_language|extras:schema_language|1|ISO 639-2 dreistelliger ISO Sprachcode für den Metadatansatz|Wlcher der Metadatensatz erstellt wurde 中的语言。Dieses Metadatanelement sollte automatisch vom System (Software) befüllt werden|ger|1.2|mdLang (3)|dcterms:language|元数据语言，总是 ger（德语）

```

为了让它更明显，这里是一个分散字段的彩色屏幕截图。黄色是标题字段，我不需要，橙色是必填字段：http: [//i.imgur.com/PwG6g.png](http://i.imgur.com/PwG6g.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:15:30.733

解析从 a`PDF`中提取的文本从来都不是理想的。但如果你绝望（也许有点疯狂），你可以尝试编写自己的 paser。诀窍是首先正确地提取数据。因此，我忽略了您在下面的评论中链接的文件，并直接找到了源代码。然后，您可以使用`pdftotext`来执行提取。这是我所做的：

**第一步**，获取文件：

```
wget http://www.data.gv.at/wp-content/uploads/2012/10/OGD-Metadaten_2_1_2012_10.pdf 
```

**第2步**，转换它：

```
pdftotext OGD-Metadaten_2_1_2012_10.pdf 
```

**第三步**，解析：

像这样运行：

```
awk -f script.awk OGD-Metadaten_2_1_2012_10.txt 
```

内容`script.awk`：

```
BEGIN {
    RS="\nID\n"
    FS="\n"; OFS="|"

    a["Bezeichner"]; a["OGD-Kurzname"]; a["CKAN Feld"]
    a["Anzahl"]; a["Definition"]; a["Erläuterung"]
    a["Beispiel"]; a["ON A 2270:2010"]
    a["ON/EN/ISO 19115:2003"]; a["RDF property"]
    a["Definition Englisch"]
}

NR>2 {
    for (i=1;i<=NF;i++) {

        l = (l ? l (l ~ /^extras:$/ ? "" : " ") : "") $i

        if ($(i+1) == "" ) {
            if (l in a) {
                l = ""
            }
            else if (l != "") {
                c = (c ? c OFS : "") l
                n++
                l = ""
            }
        }
        if (n == 12) {
            print (c ~ /^[0-9]/ ? c : "ERROR: BAD RECORD")
            c = n = ""
            next
        }
    }
} 
```

结果：

```
1|Eindeutiger Identifikator|metadata_identifier|extras:metadata_identifier|1|Eindeutiger Identifikator für den Metadatensatz. Der Eintrag beschreibt die eindeutige Identifikation für einen Metadatensatz. Es sollte eine UUID (nach RFC:4122) gewählt werden.|Der Identifikator soll automatisch vom System (Software) generiert werden. Falls dieser vorhanden ist (Harvesten bestehender Metadatensätze) muss dieser übernommen werden.|550e8400-e29b-11d4-a716-446655441234|1.1|mdFileID (2)|dcterms:identifier|Unique Identifier of metadata. Should the a UUID conforming to RFC:4122
5|Datum des Metadatensatzes|metadata_modified|extras:metadata_modified|1|Datum, an dem der Metadatensatz erzeugt bzw. aktualisiert wurde. Die Datumsangabe erfolgt gemäß ÖNORM ISO 8601 YYYY-MM-DD.|Datum, an dem der Metadatensatz erzeugt bzw. aktualisiert wurde. Dieses Metadatenelement sollte automatisch vom System (Software) befüllt werden. Wird für eine inkrementelle Aktualisierung (Harvesten) in einem Metadatenverbund benötigt.|2011-05-22|1.6|mdDateSt (9)|dcterms:issued|Metadata creation or update timestamp. Specification according to ÖNORM ISO 8601 as YYYY-MM-DD
8|Titel des Metadatensatzes|title|title|1|Titel des beschriebenen Metadatensatzes.|Titel des beschriebenen Metadatensatzes.|Schulstandorte, Pendlerstatistik Linz 2010|2.1.1|resTitle (360)|dcterms:title (mit language tag "de")|Resource title
9|Beschreibung|description|notes|1|Inhaltliche Beschreibung des Datensatzes bzw. Dienstes.|Kurze inhaltliche Beschreibung des Datensatzes bzw. Dienstes für BenutzerInnen.|Hauptwohnsitzbevölkerung der Stadt Linz für das Jahr 2010 gruppiert nach Geschlecht, Alter etc..|2.2|idAbs (25)|dcterms:abstract|Description of the resources content.
10|Kategorie|categorization|extras:categorization[“…“,“…“]|N|Kategorisierung des Datensatzes bzw. Dienstes. Vorgegebenes Kategorienschema für Österreich, siehe Anhang b).|Es muss die Zuordnung des Datensatzes bzw. Dienstes an das vorgegebene Kategorienschema durchgeführt und zur Anwendung gebracht werden. Mehrfachzuordnungen sind möglich.|Gesundheit|2.7.1 & 2.7.2|keyword (53) & thesaName (55)|dcat:theme|Categorisation of the resources content.
11|Schlagworte|keywords|tags|N|Beschlagwortung des Datensatzes bzw. Dienstes.|Beschlagwortung des Datensatzes bzw. Dienstes.|Habitatmodell, Braunbär, Ursus arctos|2.7.1|keyword (53)|dcat:keyword|Key words describing the resource
14|Datensatz oder Dienst Link|resource_url|resources:url|N|URL für den Zugriff auf den Datensatz oder Dienst|URL für den Zugriff auf den Datensatz oder Dienst. Die Angabe zielt auf unterschiedliche Daten- und Dienstformate ab. Es muss sichergestellt sein, dass ausschließlich vergleichbare Information in einer Datensatz/Dienstegruppe abgebildet werden. Im Zweifelsfall sollen eigenständige Metadatensätze angelegt werden.|http://www.wien.gv.at/statistik/ogd/vie-district-pop-foreignborn.csv|6.1.4.1.1|linkage (397)|dcat:accessURL|URL to the resource
15|Datensatz oder Dienst Format|resource_format|resources:format|N|Angabe zum Format des Datensatzes oder Dienstes. Diese ist als Dateiformat, Download- oder Service- Link anzugeben. Liste von OGD Formaten, siehe Anhang a).|OGD-Formate sollten grundsätzlich offene, maschinenlesbare Formate sein. Das bedeutet, dass publizierte Spezifikationen existieren und die Formate ohne rechtliche Einschränkungen genutzt werden können. Die Angabe soll ohne Punkt und in Kleinbuchstaben erfolgen.|csv|6.1.2.1|formatName (285)|dcterms:format|Specification of the resource. This may be a file type, download or service link. List of defined OGD formats in Appendix a).
19|Datenverantwortliche Stelle|maintainer|maintainer|1|Bezeichnung bzw. Name der für den Datensatzes oder Dienst zuständigen Organisation bzw. Person|Bezeichnung bzw. Name der für den Datensatzes oder Dienst zuständigen Organisation bzw. Person, kann in kleinen Organisationen gleichzeitig die veröffentlichende Stelle sein.|Magistrat Wien - Magistratsabteilung 33 - Wien Leuchtet|2.5.1 / 2.5.2|rpIndName (375) / rpOrgName (376)|dcelements:creator|Name of the person or entity responsible for the resource.
21|Lizenz|license|license|1|Rechtliche Nutzungsinformationen für die Verwendung des Datensatzes oder Dienstes.|Angabe der Lizenzform für den Datensatz oder den bereitgestellten Dienst. Bei OGD Daten bezieht sich dies auf Creative Commons "Namensnennung 3.0 Österreich (CC BY 3.0) ".|Namensnennung 3.0 Österreich (CC BY 3.0)|2.8.1.1|othConsts (72)|dcterms:license (sollte URI des Lizenzdokuments sein)|Legal information concerning the usage of the resource
24|Zeitliche Ausdehnung (Anfang)|begin_datetime|extras:begin_datetime|1|Definition Erläuterung Beispiel|Element zur Erfassung des Beginns der Gültigkeit eines Datensatzes oder Dienstes. Element zur zeitlichen Erfassung eines Datensatzes oder Dienstes. Die Angabe des Zeitpunktes erfolgt in folgender Form YYYY-MM-DDThh:mm:ss. TM_Primitive (nach ON EN 8601 bzw. ON EN ISO 19108). 2008-12-23T22:30:12|2.9.6.2.1|exTemp (351)|dcterms:temporal|Date specifying valid from of the resource according to ON EN 8601 or ON EN ISO 19108 respectively.|ID … laufende, eindeutige Nummerierung im OGD-Metadatenkatalog Österreich Anzahl… 1= Single-Value-Feld N=Multi-Value-Feld
16|Datensatz oder Dienst Bezeichner|resource_name|resources:name|N|Bezeichner für den einzelnen Datensatz bzw. Dienst. Das Attribut korrespondiert mit dem Metadaten – Datensatz oder Dienst Link (ID 14).|CKAN verwendet dieses optionale Element als Bezeichner für die URL, die auf den Datensatz oder Dienst zeigt.|Hauptwohnsitzbevölkerung|2.1.1 + 6.1.2.1|-|rdfs:literal|Specifier for the single resource link within a metadata sheet. Will be used as an end user friendly text instead of the resource link.
2|Bezeichnung der Metadatenstruktur|schema_name|extras:schema_name|1|Name der Metadatenstruktur|Die Angabe für OGD Metadaten ist optional, sollte aber wenn möglich erfolgen. Bei einer Adaptierung der OGD Metadatenstruktur wird eine konsistente Metadatenführung erleichtert. Dieses Metadatenelement sollte automatisch vom System (Software) befüllt werden|OGD Austria Metadata 2.0|1.4|mdStanName (10)|dcterms:alternative|OGD Austria Metadata 2.0.
3|Sprache des Metadatensatzes|schema_language|extras:schema_language|1|ISO 639-2 dreistelliger ISO Sprachcode für den Metadatensatz|Sprache in welcher der Metadatensatz erstellt wurde. Dieses Metadatenelement sollte automatisch vom System (Software) befüllt werden|ger|1.2|mdLang (3)|dcterms:language|Metadata language, always ger (German)
4|Character Set Code des Metadatensatzes|schema_characterset|extras:schema_characterset|1|Characterset Code zur Beschreibung des Metadatensatzes nach ISO\IEC 10646-1|Für eine europäische Integration wird dieses Metadatenelement zwingend gebraucht, da eine Zusammenführung sonst nicht möglich ist. Dieses Metadatenelement sollte automatisch vom System (Software) befüllt werden.|utf8|1.3|mdC (4)|cnt:characterEncoding|Metadata payload character encoding, always utf8
6|Weiterführende Metadaten|metadata_linkage|extras:metadata_linkage|N|URL zu erweiterten Metadaten des Datensatzes bzw. Dienstes|URL zur weiteren ausführlicheren Beschreibung der Metadaten. Optional. Der originäre Metadaten Link ist anzugeben. Links auf zusätzliche Informationen in anderen Metadatenkatalogen können angeführt werden.|http://data.wien.gv.at/katalog/bevoelkerung-geburtsbundesland-wien.html|1.7.11|linkage (397)|dcat:dataDictionary|URL providing further descriptive metadata
12|Attributbeschreibung|attribute_description|extras:attribute_description|1|Beschreibung der Attributinformation des Datensatzes bzw. Dienstes|Menschenlesbare Beschreibung der Bedeutung der Datenfelder in einem Datensatz bzw. Dienst|ADRESSE: Adresse (Straßenname, Orientierungsnummer); OEFFNUNGSZEITEN1-6: Öffnungszeiten; TELEFON: Telefonnummer, DISTRICT_CODE: Gemeindebezirkskennzahl, ACCOUNTS_TRANSFER: Laufende Transferzahlungen|2.11.3 & 2.11.4|ISO 19110:2005|memberName (4.1) & definition (4.2)|dcterms:description
13|Bezeichner Kontaktseite der datenverantwortlichen Stelle|maintainer_link|extras:maintainer_link|1|Kontaktseite der datenverantwortlichen Stelle|URL zur daten- bzw. dienstverantwortlichen Stelle|http://www.wien.gv.at/freizeit/bildungjugend/|6.1.1.1.6|Linkage (397)|dcterms:creator|URL to the dataset maintainig entity
17|Datensatz oder Dienst Veröffentlichungsdatum|resource_created|resources:created|1|Datum der Veröffentlichung des Datensatzes oder Dienstes.|Beschreibt den Zeitpunkt der Veröffentlichung der Daten (z.B. das Datum, an dem der Datensatz oder Dienst auf der Website der Behörde verfügbar gemacht wurde).|2011-03-21 ( YYYY-MM-DD)|2.1.3.1 & 2.1.3.2|refDate (394) & refDateType (395)|dcterms:issued|Resource publication timestamp
18|Datensatz oder Dienst Änderungsdatum|resource_lastmodified|resources: last_modified|1|Datum der letzten Aktualisierung des Datensatzes oder Dienstes.|Letztes Aktualisierungsdatum des Datensatzes oder Dienstes.|2012-01-15 ( YYYY-MM-DD )|2.1.3.1 & 2.1.3.2|refDate (394) & refDateType (395)|dcterms:modified|Resource last update timestamp
20|Veröffentlichende Stelle|publisher|extras:publisher|1|Bezeichnung bzw. Name der für den Metadatensatz zuständigen Organisation bzw. Person|Bezeichnung bzw. Name der für den Metadatensatz zuständigen Organisation bzw. Person|Magistrat Wien - Abteilung 53 - Presse- und Informationsdienst|2.5.1 / 2.5.2|rpIndName (375) / rpOrgName (376)|dcelements:publisher|Name of the publishing entity or person
22|Geographische Abdeckung/Lage|geographic_toponym|extras:geographic_toponym|1|Geographische Ortsidentifikation eines Datensatzes oder Dienstes|Menschenlesbare Beschreibung der räumlichen Lage eines Datensatzes oder Dienstes|Linz|2.9.6.1.3.1.1|identCode (207)|dcterms:description|Human-readable description of the resources spatial context
23|Geographische Ausdehnung|geographic_bbox|extras:geographic_bbox|1|Dokumentation der geographischen Ausdehnung eines Datensatzes mit der Definition eines umrahmenden Rechtecks.|Beschreibung der räumlichen Ausdehnung eines Datensatzes mit einem umschreibenden Rechteck. Die Angabe erfolgt im Koordinatensystem EPSG:4326 (WGS84) mit einer Mindestgenauigkeit von zwei Dezimalstellen in einer "Well Known Text String" Repräsentation. POLYGON (Rechtswert_min Hochwert_min, Rechtswert_max Hochwert_max)|POLYGON (-180.00 -90.00, 180.00 90.00)|2.9.6.1.1.1 & 2.9.6.1.1.2 & 2.9.6.1.1.3 & 2.9.6.1.1.4|westBL (344) & eastBL (345) & southBL (346) & northBL (347)|dcterms:spatial|Bounding box specifying the resources spatial coverage
25|Zeitliche Ausdehnung (Ende)|end_datetime|extras:end_datetime|1|Ende der Gültigkeit eines Datensatzes oder Dienstes.|Element zur zeitlichen Erfassung eines Datensatzes oder Dienstes. Die Angabe des Zeitpunktes erfolgt in folgender Form YYYY-MM-DDThh:mm:ss. TM_Primitive (nach ON EN 8601 bzw. ON EN ISO 19108)|2009-11-23T20:36:00|2.9.6.2.1|exTemp (351)|dcterms:temporal|Date specifying valid to of the resource according to ON EN 8601 or ON EN ISO 19108 respectively.
26|Aktualisierungszyklus|update_frequency|extras:update_frequency|1|Menschenlesbare Frequenz der Aktualisierung des Datensatzes bzw. Dienstes. Codeliste im Anhang c)|Zeitliche Nachführungssequenz für einen Datensatz oder Dienst|monatlich, jährlich|2.9.7.1|maintFreq (143)|dcterms:accrualPeriodicity|Human readable resource update frequency
27|Datenqualität/Herkunft|lineage_quality|extras:lineage_quality|1|Menschenlesbare Beschreibung der Qualitäts- und /oder Entstehungsgenese des Datensatzes oder Dienstes z.B. die Methode der Erhebung.|Allgemeine Angaben zur Qualität und/oder Entstehungsgenese des Datensatzes oder Dienstes|Der Datensatz wurde basierend auf der ÖK50, Stand 2011 digitalisiert. Es wurden alle Waldbestände für die Gemeinde Kopfing erfasst.|3.2.1|statement (83)|dcat:dataQuality|Human readable indication of resource quality and / or data origin, possibly the methodology describing the data collection or acquisition.
28|Titel und Beschreibung Englisch|en_title_and_desc|extras:en_title_and_desc|1|Englische Angabe von Titel und Beschreibung des Datensatzes oder Dienstes.|Titel des Datensatzes oder Dienstes und kurze inhaltliche Beschreibung des Datensatzes bzw. Dienstes für BenutzerInnen in Englisch.|Population of Vienna 2010\. Contains the population of permanent residents of Vienna and it’s districts as a moving average in the census period 1st January 2010 to 31st December 2012|2.1.1 & 7.1|resTitle (360) & language|dcterms:abstract (mit language tag "en")|Resource title and description in English
29|Größe des Datensatzes oder Dienstes|resource_size|resources:size|1|Dateigröße.|Die Größe des Datensatzes in Bytes. Die Angabe der Größe ist für Services / Dienste nicht sinnvoll.|899652|-|-|dcat:bytes|Resource size
30|Lizenz Zitat|license_citation|extras:license_citation|1|Die richtige Namensnennung (CC-BY) der Datenquelle laut den Nutzungsbedingungen des jeweiligen Datenportals. Entspricht dem Feld „Datenquelle“ von OGD-Metadaten – 1.1.|Dient dazu, um bei der automatisierten Wiederverwendung von Daten aus einer oder mehreren Datenquellen die richtige Zitierung zu erleichtern.|Datenquelle: CC-BY-3.0: Stadt Linz - data.linz.gv.at|2.8.1.2|accessConsts (70)|cc:attributionName|Attribution as required by CC-BY license
31|Sprache des Datensatzes oder Dienstes|resource_language|resources:language|1|ISO 639-2 dreistelliger ISO Sprachcode für den Datensatz oder Dienst|Sprache, welche der Datensatz oder Dienst verwendet|ger|2.9.3|dataLang (39)|dcterms:language|Resource language
ERROR: BAD RECORD 
```

**Step4**，评估不良记录。

如您所见，最后一条记录无法通过。因此，您应该手动检查并更正有问题的文本。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:24:08.170

如果可以做到，在AWK中也是可以做到的。决定这一点的因素是记录结构的可预测性。

例如，Bezeichner 字段是否总是有两行由空行分隔？有时会不会只有一行？

左侧行标签相同。他们会永远一样吗？它们是否通过制表符或空格与值分开？这些值是否总是由换行符分隔，并且这些值是否包含换行符？

字段是固定宽度的这一事实将有所帮助。如果您知道每个字段中有多少行文本，您可以将每行拆分为适当宽度的子字符串。

解析这样的事情的最大问题不是技术解决方案。有人可以编写一个解析器来正确解析上述文本，但它会解析所有记录实例吗？同样，这取决于记录格式的严格程度以及其结构的变化程度。

是的，如果可以的话，AWK 可以做到。

# ruby - Ruby 中的数组和文件

> ID：13920596
> 
> 赞同：-2
> 
> 时间：2012-12-17T19:14:31.737
> 
> 标签：ruby, arrays, file

我正在使用 Ruby 1.9.3

我正在寻找将数组写入文件并能够将其取回的最佳方法（稍后在另一个数组中）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:15:19.867

如果数组只包含字符串和数字，您可以使用[Marshal](http://ruby-doc.org/core-1.9.3/Marshal.html)、[YAML](http://ruby-doc.org/stdlib-1.9.3/libdoc/yaml/rdoc/YAML.html)甚至[CSV](http://ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/CSV.html)序列化您的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:11:15.693

使用 ruby​​ 有很多方法可以做同样的事情，我建议查看 IO 类[http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-write](http://www.ruby-doc.org/core-1.9.3/IO.html#method-c-write)

IO.read 和 IO.write 是可能的方法来做到这一点。

# oracle - 如何更改 Oracle XE Application Express 显示 NULL 值的方式？

> ID：13920601
> 
> 赞同：0
> 
> 时间：2012-12-17T19:14:40.317
> 
> 标签：oracle, oracle-apex

我正在通过 Application Express 使用 Oracle 10g XE 版本，并且 NULL 使用`-`字符显示。我从参数列表中发现：

```
+-------+-------+------------+--------------------------------------------+
| Name  | Value | Is Default |                Description                 |
+-------+-------+------------+--------------------------------------------+
| event | -     | TRUE       | debug event control - default null string  |
+-------+-------+------------+--------------------------------------------+ 
```

有没有办法改变这个值，以便显示 NULL`NULL`而不是`-`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T01:17:09.800

这是在 Oracle Application Express (Apex) 中创建的报告的默认行为。

您可以`NULL`通过编辑 Report Attributes - **Show Null Values As**将其更改为或完全空白。

# unix - Bash 脚本将 *.log 文件复制到新目录中

> ID：13920607
> 
> 赞同：0
> 
> 时间：2012-12-17T19:15:10.473
> 
> 标签：unix

我有一些这样的文件：

```
2012-12-17_083213_1.log
2012-12-17_083213_1.log_stats
2012-12-17_083213_1.logaccount_ptr
2012-12-17_083213_1.loginitial_ptr
2012-12-17_083213_1.logptr
2012-12-17_093049_2.log
2012-12-17_093049_2.log_stats
2012-12-17_093049_2.logaccount_ptr
2012-12-17_093049_2.loginitial_ptr
2012-12-17_093049_2.logptr 
```

在这里，每填充 1G 的数据，就会创建一个名为 Year-Month-Day_HourMinuteSecond_number.log 格式的新文件（如上所示）。我想要

1.  将所有 *.log 复制到一个以年-月-日格式命名的新文件夹中，例如将其命名为 2012-12-17
2.  tgz那个文件夹
3.  将其发送到服务器 IP。

我不知道具体如何。我希望它作为一个 bash 脚本，这样我就可以每天为新添加的文件运行它。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:08:50.923

```
for f in *log ; do
    targetdir=${f:0:10}
    mkdir ${targetdir} 2>/dev/null
    echo ${targetdir} > dirstotar
    mv ${f} ${targetdir}
done 
sort dirstotar | uniq | while read dir ; do
    tar --remove-files -cvzf "${dir}.tar.gz" "${dir}"
done
find . -name '*tar.gz' -print | xargs scp '{}' user@host:/dir 
```

这可能对你有用。

1.  对于每个日志文件，检查其名称，并使用日志文件名称的前 10 个字符创建一个目录（如果有，则忽略错误）
2.  将日志文件移动到该目录
3.  将目录名称记录到文件中以供以后处理。
4.  处理目录列表（tar）
5.  将每个 tar.gz 复制到远程主机。

这只是你的一个起点。如果您想要一个完整的解决方案，请告诉我们您尝试了什么，出了什么问题。或者聘请专业人士。

# extjs - 如何从分组网格中的 groupHeaderTpl 访问分组记录？

> ID：13920612
> 
> 赞同：3
> 
> 时间：2012-12-17T19:15:36.413
> 
> 标签：extjs, extjs4, extjs4.1

我正在处理审计结果视图。该视图基本上包含在一个网格上，用户可以在该网格中查看谁更改了哪些值，他/她何时更改，从哪个 IP 地址等。

![在此处输入图像描述](../Images/916218073126bffa53297b3673895497.png)

关键是我想通过'changeset'字段（模型中存在的GUID字段，知道一组更改是作为一个更大操作的一部分执行的）对记录进行分组，并在组标题中显示一个小摘要关于变更集。

例如，我想显示：“日期：12/12/2012 15:04:32 - 用户：ontivero - 更新订阅详情”。

我遇到的第一个问题是 groupHeaderTpl 模板无法使用“用户”（或“更改者”），第二个问题是分组行或记录也不可用。我需要这些行，因为我必须分析它们才能显示更有用的信息。

总而言之，问题应该是：我如何才能访问分组行以在 groupHeaderTpl 模板中使用它们？

我已阅读文档（[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.feature.Grouping](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.feature.Grouping)），但“儿童”属性不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:27:44.277

我在文档中找到了更深入的答案（请参阅那里的评论）：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.feature.Grouping-cfg-groupHeaderTpl](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.feature.Grouping-cfg-groupHeaderTpl)

关键是为列指定 ID，仅此而已。

```
var groupingFeature = Ext.create('Ext.grid.feature.Grouping',{
        groupHeaderTpl: '{[values.rows[0].columnId]}'
});

Ext.create('Ext.grid.Panel', {
    columns: [{
        id:'columnId',
        dataIndex: 'testData'
    }],
    features: [groupingFeature]
    ...
}); 
```

# objective-c - NSLocalizedStringFromTableInBundle 调用导致内存崩溃

> ID：13920613
> 
> 赞同：1
> 
> 时间：2012-12-17T19:15:41.093
> 
> 标签：objective-c, cocoa, memory, localization, nsbundle

我有一个`NSLocalizedStringFromTableInBundle`通常有效的调用，所以我知道它具有正确的键、表和包名称参数。但是，在应用程序中执行了另一个看似无关的操作 X，并且进行了相同的“来自捆绑的字符串”调用，我得到了崩溃。堆栈跟踪仅显示`[NSBundle localizedStringForKey:value:table:]`.

```
*** -[CFDictionary objectForKey:]: message sent to deallocated instance 0x4e6f2d0 
```

我使用了 Instruments，它直到崩溃本身并没有显示任何异常，它确实找到了一个僵尸。

1 0x7a2f840 CFDictionary（可变）僵尸-1 00:51.528.884 0 基础-[NSBundle _initInfoDictionary]

我尝试过的其他事情包括替换宏调用以使用`[NSBundle bundleWithIdentifier:`. 同样，这一直有效，直到完成其他操作 X，然后发生同样的崩溃，尽管在这种情况下，它是在我添加的加载调用上。

```
 if (![bundle isLoaded])
        [bundle load]; 
```

虽然你已经可以知道它在那个时候不起作用，因为通常捆绑包的描述是有效的（`NSBundle </Users/...blah...framework> (loaded)`），但是当它不起作用时，它看起来像这样：

```
(NSBundle *) $3 = 0x0613f020 NSBundle <(null)> (not yet loaded) 
```

显而易见的答案是操作 X 做了一些坏事，但我看不到它会做的任何事情，除了使用它自己的一些自动释放池（在 10.8 上）。即使我将它们注释掉，它也会失败。而且，假设我那里的代码很糟糕，我怎么能以这种非常特殊的方式弄乱 NSBundle 的内部初始化或加载，使其无法用于本地化？

有没有人见过类似的东西？我真的希望它是我做错的事情，而不仅仅是 10.8 上的问题（顺便说一句，10.6 上不会发生）。

# objective-c - MWFSlideNavigationViewController 不起作用

> ID：13920614
> 
> 赞同：1
> 
> 时间：2012-12-17T19:15:53.470
> 
> 标签：objective-c, ios, xcode, slideup

我正在尝试使用 MWFSlideNavigationViewController 但它不起作用。

点击按钮时，应该会出现隐藏 ViewController 但什么也没发生

如果我在 initWithRootViewController 方法中放入“self”，当我运行项目时，我只会在 ViewController 上出现黑屏。我在当前 ViewController 中调用此方法。

```
MWFSlideNavigationViewController * slideNVC = [[MWFSlideNavigationViewController alloc]initWithRootViewController:self]; 
```

# apache-camel - 无法从 SQS Camel Route 中删除消息

> ID：13920615
> 
> 赞同：7
> 
> 时间：2012-12-17T19:15:53.577
> 
> 标签：apache-camel, amazon-sqs

我最近有一个关于**AWS**和**Camel**的问题，但最后我还是坚持了下来。现在该应用程序似乎可以正常工作，但是我遇到了一个非常奇怪的异常。

首先，我的应用程序分为两个 EC2 实例。实例一从 Amazon RSS Feed 中获取前 10 本书的 ISBN 并将其存储到一个。这是代码片段。

```
 public static void main(String[] args) throws Exception {

    CamelContext context = new DefaultCamelContext();
    context.addRoutes(new RouteBuilder() {
        public void configure() {

            from(
                    "rss:http://www.amazon.de/gp/rss/bestsellers/books/ref=zg_bs_books_rsslink?splitEntries=false")
                    .split()
                    .method("RssSplitter", "split")
                    .process(new Dummy())
                    .setProperty("isbn", simple("${body}"))
                    .to("aws-sqs://bookz_sqs?accessKey=acceskey&secretKey=secretKey");

        }
    });
    context.start();
    Thread.sleep(10000);
    context.stop();

} 
```

实例二负责读取 SQS 作为第一个操作，最后从 WWW 中的其他 Booklibraries 中获取额外的 Book 信息没有问题，最后构建一个 RSS Feeder 也没有问题。

```
public static void main(String[] args) throws Exception {
    /*
     * Here the sqs camel route gets the ISBN out of the queues and stores it in S3.
     */
    CamelContext context = new DefaultCamelContext();
    context.addRoutes(new RouteBuilder() {
        public void configure() {
            from("aws-sqs://bookz_sqs" + "?accessKey=accessKey" + "&secretKey=secretKey").process(new DynamicIsbnEnrich()).process(
                    new DynamicIsbndbEnrich()).process(new DynamicOpLibEnrich()).setHeader(S3Constants.KEY, simple("${property.isbn}")).to(
                    "aws-s3://bookz" + "?accessKey=accesKey" + "&secretKey=secretKEy" + "&region=eu-west-1");

        }
    });
    context.start();
    Thread.sleep(10000);
    context.stop();
} 
```

现在的问题是一个奇怪的异常，我不明白，除了 SQS 没有从我的队列中删除消息，但是 api 说 deleteAfter Read 默认为 true。

> 2012-12-17 19:45:08,335 [Camel (camel-1) 线程 #0 - aws-sqs://team09bookz_sqs] 警告 org.apache.camel.component.aws.sqs.SqsConsumer - 删除消息时出错。 . 引起：[com.amazonaws.AmazonServiceException - 请求必须包含参数 MessageHandle。] 状态代码：400，AWS 服务：AmazonSQS，AWS 请求 ID：0655aa05-ad6f-5571-a83d-e34cc7196343，AWS 错误代码：MissingParameter， AWS 错误消息：请求必须包含参数 MessageHandle。

该应用程序有效，但我无法删除队列中的任何消息，我不知道为什么，我需要一些额外的安全凭证吗？

无论如何感谢您的帮助

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-31T09:06:15.637

此错误是由 Camel SQS 端点在输出标头中找不到的消息句柄的空值引起的。可能应该添加一个检查并在发生这种情况时记录一个警告......

要解决此问题，您必须确保将 SQS 生产者设置的标头全部传递到路由的末尾：如果您在某处设置了新标头，则还必须从输入中复制这些标头，否则它们会丢失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-15T11:27:09.197

我不确定如何实现上述内容，因此这段代码获取所需的 Header 并在最后将其设置回来。

```
from("aws-sqs://aqueue")
.setProperty(SqsConstants.RECEIPT_HANDLE, header(SqsConstants.RECEIPT_HANDLE))

...

.setHeader(SqsConstants.RECEIPT_HANDLE, exchangeProperty(SqsConstants.RECEIPT_HANDLE)); 
```

# c# - 运行表达式时列表返回 null

> ID：13920617
> 
> 赞同：1
> 
> 时间：2012-12-17T19:15:55.210
> 
> 标签：c#, .net, linq, linq-expressions

我有一个问题，...我正在使用以下代码：

```
Expression<Func<Administrator, bool>> function = (Administrator a) => (a.User.Username.Equals(username) && a.User.Password.Equals(password));

List<Administrator> admins = uow.AdministratorRepository.find(function).ToList(); 
```

管理员列表中的结果是管理员列表，其中管理员的用户属性的用户名和密码等于所需的凭据。但我现在最大的问题是为什么每个管理员`admin.User`都回来了`null`。我不明白，也许它很小，但我看不到。因此该属性返回 null 但在表达式中进行了检查。希望你能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:23:11.830

你可以这样做`.Include("UserRelationshipPropertyName")`，基本上你必须告诉框架也加载用户对象。

# c++ - 需要一个好的算法对8GB的图片进行分类

> ID：13920618
> 
> 赞同：9
> 
> 时间：2012-12-17T19:15:59.173
> 
> 标签：c++, image, jpeg, cimg

我有大约 150.000 张图片，其中一些是重复的。我认为 SSIM 算法是比较两张图片并查看它们是否重复的不错选择。但是，如果我想以这种方式查找重复项，我将不得不比较 150.000 * 149.999 张图片，这将永远耗时。

所以我现在正在寻找的是一种快速有效的算法，可以为每张图片创建一个平均值，然后只比较接近平均值的图像。

简而言之：我正在寻找一种对图片进行分类的有效方法！

我计划使用 C++ CImg 库来完成这项任务，因为它速度很快。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:40:12.153

> 有些图片的高度不同，但基本上是相同的图片，只是底部有一个不相关的框，可以改变高度。

如果两个副本的图片顶部始终相同，您可以尝试根据图像中应该非常安全的 N 行像素计算哈希值（即底部的框不会在那些行）。

对所有文件进行哈希处理后，您可以对哈希值进行排序并更精确地比较具有相同哈希值的图片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:50:45.997

我会尝试类似哈希/指纹的方法：

*   为每个图像生成指纹，还包含相关的图像属性，例如元文件或数据库的大小和组件数量。指纹可以从公共子图像中计算出来，这可能是有损压缩频谱图、包含 FFT 频率箱的简单向量、直方图或其他技术（我不知道什么更适合，这是最可能非常依赖于内容）。

*   正如 littlestewie 所提到的，预先使用图像属性（例如大小和颜色分量的数量）进行分组将大大减少（二进制）比较的数量，这将是`(n*(n-1))/2`针对每个组的。

*   将指纹与适当的容差进行比较以进行进一步的子分组（注意覆盖其中一张图像在多个组中匹配的情况）。

*   OpenCV 可以做最后的比赛：

    [如何在 OpenCv 中从太空中探测太阳？](https://stackoverflow.com/q/8218997/1175253)

有关使用 OpenCV 进行图像比较的相关问题：

*   [OpenCV / SURF 如何从描述符中生成图像哈希/指纹/签名？](https://stackoverflow.com/q/2146542/1175253)

*   [OpenCV：指纹图像并与数据库进行比较](https://stackoverflow.com/q/7205489/1175253)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T23:16:49.420

在这里使用任何形式的散列都是毫无意义的，因为即使是几乎相同的图像也会给出非常不同的散列值。正如评论中指出的那样，两个“重复”图像可能略有不同（例如考虑 JPEG 压缩造成的影响），因此感兴趣的是检测几乎重复的图像。此外，正如评论中所指出的，仅考虑相同宽度的图像是减少二次比较次数的第一步。如果所有图像的宽度相同，则没有改进。

您必须解决的第一个问题是丢弃具有不同高度的几乎相同图像的底部框。为什么会有这个盒子？它是统一的背景颜色吗？预处理您的图像以删除此类底部框，如果这样做有问题，请解释原因。我会考虑从现在开始这些盒子已经被删除了。

SSIM（结构相似性）可能是检测几乎重复的好方法，但它没有机会比更简单的算法更快，例如[Comparing image in url to image in filesystem in python 中](https://stackoverflow.com/questions/13875989/comparing-image-in-url-to-image-in-filesystem-in-python/13884956#13884956)描述的 NRMSE 。因此，一种可能加快该过程的方法（尽管在本质上它仍然是二次的）是首先将给定图像转换为灰度，并且只考虑其中的一个小中心窗口，例如 50x50。在这个中央窗口上应用一个高斯滤波器，这样小的结构（例如噪音）大部分都被抑制了。因为你有很多图像要比较，我会在这个平滑的中央窗口中应用粗略的二值化，形式如下：如果一个值`v`大于可能的最大值的一半，则将其变为白色，否则将其变为黑色。现在每个图像都有 2500 位。下一步可能如下：计算从这 2500 位到公共位模式的汉明距离，2500 位 1 将在这里工作。对所有图像重复此过程。对于每个图像，您都有一个汉明距离。

现在让我们找到几乎相同的图像。首先，考虑将发现的汉明距离分箱到`k`不同的槽中。因此，将进一步考虑落在同一 bin 中的所有图像进行比较。这样，如果图像`a`落在 bin 中`k_i`并且图像`b`落在 bin`k_j`中`i != j`，我们将丢弃`a`为与 相似`b`。如果同一个 bin 中有太多图像，则上述过程需要改进和/或需要减少每个 bin 的间隔。为了进一步加快这个过程，考虑首先在同一个 bin 中的所有图像之间应用 NRMSE，只有那些给出高值的图像才会最后由 SSIM 进行比较。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T20:50:39.657

MarvinLabs 已经指出了散列前 N 行的想法。

如果您在前 N 行（比如 20 行）上使用良好的散列（如 MD5），您可以非常确定散列冲突识别相同的图像。将散列与其他唯一图像标识符（文件名？）一起放入 std::multimap。这个多图将花费你大约 10MB 到 100MB 的路径长度，并且可以很容易地保存在内存中。你可以在散列后做你的报告。如果您是偏执狂，您可以对碰撞进行另一次图像比较。除非所有图像都来自同一个闭路电视摄像机，否则误报的机会小于从磁盘读取错误的机会。

# objective-c - 如何使用 CoreLocation 和 mapKit 创建自己的路线？

> ID：13920620
> 
> 赞同：1
> 
> 时间：2012-12-17T19:16:07.643
> 
> 标签：objective-c, xcode, annotations, mapkit, core-location

我知道 CoreLocation 已经有一种方法可以区分两个点（纬度和经度），但这条路线是点之间的壁橱路线。我想要的是绘制自己的路线。

你们知道我该怎么做吗？

# search - 通过常量值思考 Sphinx 搜索

> ID：13920625
> 
> 赞同：1
> 
> 时间：2012-12-17T19:16:28.087
> 
> 标签：search, ruby-on-rails-3.2, thinking-sphinx

我正在使用 rails 3.2 和 thinking_sphinx gem，并且在我的模型中有以下代码：

```
#encoding: utf-8
class Feedback < ActiveRecord::Base

  attr_accessible :feedback_type

  FEEDBACK_TYPE = { 1 => "found cheaper", 2 => "complaints", 3 => "wishes",
                   4 => "other" }

  define_index do
    indexes feedback_type
    has created_at, updated_at
    set_property delta: true
  end
end 
```

在我的 feedback_controller 我有：

```
 @feedbacks = Feedback.search(params[:search], page: params[:page], 
                       per_page: 10,
                       sort_mode: :extended) 
```

feedback_type 是数据库中的整数类型字段，根据 FEEDBACK_TYPE 值，它的值从 1 到 4。在视图中，我使用 Feedback::FEEDBACK_TYPE[feedback.feedback_type] 显示反馈类型。我可以通过在搜索表单中输入例如“愿望”的 FEEDBACK_TYPE 字符串值在我的模型中实现搜索吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:35:29.723

实际上并没有尝试过，但以下应该可以工作：

```
 define_index do
        indexes "case feedback_table_name.feedback_type 
                 when 1 then 'found cheaper'
                 when 2 then 'complaints'
                 when 3 then 'wishes'
                 when 4 then 'other'
                 end",  :as=>:feedback_type
        has created_at, updated_at
        set_property delta: true
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T12:23:27.697

你也可以写得更强大，像这样：

```
FEEDBACK_TYPE = { 1 => "found cheaper", 2 => "complaints", 3 => "wishes",
               4 => "other" }

kind_of_types = lambda do 
  str = 'case feedback_table_name. feedback_type '
  FEEDBACK_TYPE.each { |type| str += "when #{type[0]} then '#{type[1]}' " }
  str += 'end'    
end

define_index do
  indexes kind_of_types, as: :feedback_type
  has created_at, updated_at
  set_property delta: true
end 
```

# django - put请求返回401

> ID：13920626
> 
> 赞同：0
> 
> 时间：2012-12-17T19:16:28.720
> 
> 标签：django, tastypie

我是 django/tastypie 的新手。我已经构建了一个 api，并且让请求工作正常，但是每次我运行一个 post/put 请求时，我都会得到一个 401。

这是我的api：

```
class CategoryResource(ModelResource):
class Meta:
   queryset = Category.objects.all() 
   resources_name = 'category'
   Authorization=Authorization()
   allowed_methods = ['get', 'post', 'put'] 
```

这是我的测试：

```
def test_update_user_score(self):
    response = self.c.put('/api/v1/category/', {'apikey': 1})
    print response.status_code 
```

任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:59:08.630

401 处理授权问题。
我不知道您的代码是否还有其他问题，但我可以在这里看到一个错字：

```
授权=授权（）
```

一定是：

```
授权=授权（）
```

用小写的“a”。
让我们知道这是否解决了您的问题并在有帮助的情况下分配分数。
最好的祝愿。

# python - 在函数python中使用for循环变量

> ID：13920629
> 
> 赞同：0
> 
> 时间：2012-12-17T19:16:36.617
> 
> 标签：python, variables, for-loop

我正在构建一个执行以下操作的应用程序：

*   从 .txt 文件中获取主机并将它们放入列表中
*   下载每个网站的标题并将它们放入另一个列表
*   将包含特定单词的行打印到包含时间戳、特定行和属于该行的 url 的日志文件中。

一切实际上工作正常，但我似乎无法将正在检查的 url 传递给其他函数以便可以使用它。

此链接中的代码：http: [//pastebin.com/630FrspN](http://pastebin.com/630FrspN)

实际上将打印日志文件中的每个条目相同的 url ...如果我将日志文件（websiteheaders，url）放入 for 循环中，它将起作用，但它会在日志文件中打印一个条目，次数与我在我的 url 中的次数一样多主机文件。

我需要以某种方式将在 for 循环中检查的“url”传递给 logfile 函数......

可能是一个简单的答案，但我似乎找不到它。提前致谢。

编辑：我认为下面的代码是最相关的。

```
def headerophalen(websites):

    for url in websites:
        try:
            response = urllib2.urlopen(url)
            headers = str(response.info())
            websiteheaders.extend(headers.splitlines())
        except urllib2.HTTPError, error:
            print "Error opening URL: ", url, "HTTP Errorcode: ", error.code
            continue

    logfile(websiteheaders, url) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:22:26.577

You need to log the data inside the `for` loop. You could build a dict as ballsdotballs suggests in his answer, but it seems like just writing to your log each iteration makes more sense unless you need to use the processed information for something other than logging.

```
def headerophalen(websites):

    for url in websites:
        try:
            response = urllib2.urlopen(url)
        except urllib2.HTTPError, error:
            print "Error opening URL: ", url, "HTTP Errorcode: ", error.code
        else:
            logfile(url, str(response.info()).splitlines()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:26:13.750

当您调用时`logfile(websiteheaders, url)`， url 将只是您网站数组中的最后一个 url，因此这是唯一将记录在您的日志文件中的 URL。如果我是你，我会将 url->headers 信息保存在字典中并将其传递给你的日志文件。

尝试类似：

```
headers = {} 
```

然后在你的循环中使用：

```
response = urllib2.urlopen(url)
headerlist = str(response.info())
headers[url] = headerlist.splitlines() 
```

现在你有了一个字典，其中每个 url 都有一个标题列表。您可以将其传递给您的日志文件函数，然后根据需要记录它。

```
logfile(headers) 
```

[在http://docs.python.org/2/tutorial/datastructures.html](http://docs.python.org/2/tutorial/datastructures.html)阅读字典

编辑：修正了我的语法和拼写

# javascript - dom 就绪调用中的 jQuery 区别

> ID：13920632
> 
> 赞同：-1
> 
> 时间：2012-12-17T19:16:45.577
> 
> 标签：javascript, jquery, dom, document-ready

> **可能重复：**
> [document.ready 和 $function 之间的差异](https://stackoverflow.com/questions/9396415/differences-between-document-ready-and-function)

我认为这是一个愚蠢的问题，但是，有人可以告诉我这两种呼叫类型之间的区别吗？

```
$(function(){
//do somenthing
});

and

$(document).ready(function(){
//do somenthing
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:17:46.740

它们是完全相同的东西。最上面的只是一个捷径

来自 jquery 文档：

> 以下所有三种语法都是等效的：
> 
> $(document).ready(handler)
> $().ready(handler) （不推荐这样做）
> $(handler)

[.ready() jQuery API](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:19:51.430

以下所有三种语法都是等效的：

```
$(document).ready(handler)

$().ready(handler) (this is not recommended)

$(handler) 
```

见[链接](https://stackoverflow.com/questions/9396415/differences-between-document-ready-and-function)

# iphone - 获取用户在文本字段中输入的内容并将其存储在文本文件中？

> ID：13920633
> 
> 赞同：0
> 
> 时间：2012-12-17T19:16:45.430
> 
> 标签：iphone, objective-c, ios, xcode

我正在尝试使用文本文件制作一个简单的受密码保护的应用程序来存储用户输入的密码。我想将文本字段中的内容存储在文件中，并最终将该文件中的内容与用户在另一个文本字段中输入的内容进行比较。这是我所拥有的：

```
 //Setting the string to hold the password the user has entered
    NSString *createPassword1 = passwordSet.text;

    //creating a muttable array to store the value of createPassword1
    NSMutableArray *passwordArray = [NSMutableArray array];

    //storing createpassword1 into the first element of the array
    [passwordArray addObject:createPassword1];

    NSLog(@"%@",[passwordArray objectAtIndex:0]);//seeing if it is stored correctly (it is)

    //path for searching for the file
    NSString *path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    //my filename
    NSString *fileName = @"PasswordFile.txt";

    NSString *fileAndPath = [path stringByAppendingPathComponent:fileName];

    if (![[NSFileManager defaultManager] fileExistsAtPath:fileAndPath]) {
        [[NSFileManager defaultManager] createFileAtPath:fileAndPath contents:nil attributes:nil];
    }

    [[[passwordArray objectAtIndex:0] dataUsingEncoding:NSUTF8StringEncoding] writeToFile:fileAndPath atomically:YES]; 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:21:29.347

What you do is too complicated. Why do you use a NSMutableArray ("passwordArray") to store a single password? Why do you convert it to NSData and write this to a file? Just use a string and use its writeToFile method. Alternatively use NSArray's writeToFile method.

**Alternatively, and my personal favorite: use NSUSerDefaults à la:**

```
[[NSUserDefaults standardUserDefaults] setValue: myPasswordString forKey:@"appPassword"]]; 
```

* * *

**EDIT** in response to some comments: The above only applies if used in a "trivial" app that needs password-protection in a very low-level manner. Anything to protect really sensitive data should be handled differently. The original poster explicitly stated

> I want to take whats in a text field store it in a file and ultimately compare whats in that file to what the user enters in another text field.

So one can assume that high-level security is not an issue here.

# uiview - 如何在单个 iOS 屏幕内切换带有动画的 UIView

> ID：13920639
> 
> 赞同：0
> 
> 时间：2012-12-17T19:17:09.317
> 
> 标签：uiview, uiviewcontroller, uianimation

我想构建一个只有 1 个屏幕的相当简单的应用程序。因此，我想在同一个视图控制器中有两个视图。

```
View1 - appear for 5 seconds
View2 - appear during gameplay
View1 - appear for 5 seconds
View2 - appear during gameplay
And so on. 
```

虽然我不知道如何实现这一点，但我确信这种设计模式是有效的。

我搜索了文档，但找不到明确的答案。

我知道执行此操作的应用程序，但如何，我不知道。

是 viewcontroller.view = View1 还是 View2？如果是这样，我将如何使用一些漂亮的动画进行此切换？

我知道动画，但在这种情况下不知道。请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:09:13.980

将两个视图添加为 viewController 视图的子视图：

```
[viewController.view addSubview:view1];
[viewController.view addSubview:view2]; 
```

然后使用动画块：

```
// the following code will replace view1 with view2 after a 5 second delay

// this ensures view2 is behind view1
[viewController.view bringSubviewToFront:view2];
[viewController.view bringSubviewToFront:view1];

// get view2 ready for the animation
view2.alpha = 0;
view2.hidden = NO;

// delay for 5 seconds before executing animation
[UIView animateWithDuration:duration delay:5 options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction) animations:^{

    //fade out
    view1.alpha = 0;

    // fade in
    view2.alpha = 1;

} completion:^(BOOL finished) {

    // hide it after animation completes
    view1.hidden = YES;

    // bring view2 to front (even though view1 is not visible, it is still above view2)
    [viewController.view bringSubviewToFront:view2];
}]; 
```

用 view2 替换 view1。等等。

# python - 在 python 中解码 Base64 Gzip

> ID：13920642
> 
> 赞同：0
> 
> 时间：2012-12-17T19:17:27.133
> 
> 标签：python, base64, gunzip, garmin

我正在尝试使用 Python 解码 gzip garmin 活动文件。根据 Garmin 的说法，该文件是 base64 gz 文件。我正在通过 post 从浏览器上传文件并在 Django 应用程序中接收数据。

文件的开头如下所示。

> begin-base64 644 data.xml.gz\nH4sIAAAAAAAAAA y9a4 lx3Hn d6fguB7JzNuGZkNigNfdrAGbMAYaXeNfbPolXplYiRSIFu

我使用以下代码来调整填充和解码 base64：

```
import base64
padding_factor = (4 - len(data) % 4) % 4
data += "="*padding_factor
data_decoded = base64.b64decode(unicode(data).translate(dict(zip(map(ord, u'-_'), u'+/')))) 
```

data_decoded 的开头在屏幕上如下所示：

> \xe8"\x9f\xe6\xda\xb1\xee\xb8\xeb\x8e\x1dj\xd6\xb1\x9aX3\x1f\x8b\x08\x00\x00\x00\x00\x00\x00\x03/Z\ xe2\w\x1ewz~\x0b\x81\xec\x9c\xcd\xb8fd6(\r}\xda\xc0\x19\xb3\x00a\xa5\xde5\xf6\xcf\xa2U\xe9\x95\x88\x91H \x81n\xcb\xf7\xb4\x9f\xcc\xa7y%\xbd\x95\x9e\x13\xcd\x10\xf9Th\x04\x8d\xdf\xdf\xa6\xba\xa9\xcd\xf9=s\ xf8G\xfc

`print data_decoded`看起来像这样：

> }???a??5?ϢU镈?H?n????̧y%?????Th????????=s?G?

然后我尝试使用以下方法解压缩文件：

```
from cStringIO import StringIO
from gzip import GzipFile
sio = StringIO(data_decoded)
gzf = gzip.GzipFile(fileobj=sio)
guff = gzf.read() 
```

之后我收到以下错误：

```
 File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/gzip.py", line 245, in read
    self._read(readsize)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/gzip.py", line 287, in _read
    self._read_gzip_header()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/gzip.py", line 181, in _read_gzip_header
    raise IOError, 'Not a gzipped file'
IOError: Not a gzipped file 
```

我还尝试将文件直接保存到磁盘并从命令行运行 gunzip ，这也会导致相同的错误。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:17:56.760

您需要去掉文件的开头，因为它不是 base64 数据的一部分。如果您知道`\n`将成为每个文件的一部分，则可以将其用作分隔符：

```
index = data.find('\\n')
if index > 0:
    data = data[index+2:] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T21:19:55.047

看起来你正在解码整个东西，包括`begin-base64 644 data.xml.gz`部分，所以你一开始就会得到一堆垃圾：

```
b1 = '''begin-base64 644 data.xml.gz\nH4sIAAAAAAAAA y9a4 lx3Hn
d6fguB7JzNuGZkNigNfdrAGbMAYaXeNfbPolXplYiRSIFu'''

b2 = '''\nH4sIAAAAAAAAA y9a4 lx3Hn
d6fguB7JzNuGZkNigNfdrAGbMAYaXeNfbPolXplYiRSIFu''' 
```

如果你在 b2 上运行你的算法，你会得到一些从这个开始的东西：

```
m\xe8"\x9d\xb6\xac{\xae 
```

（我不知道您是如何`m`在复制和粘贴中丢失的，但无论哪种方式，它都是无效的。）

如果你在 上运行它`b2`，你会得到一些从这个开始的东西：

```
\x1f\x8b\x08\x00\x00\x00 
```

那就是你想要的。

当然`'\n'`，去掉也有同样的效果，因为 base64 会忽略空格。所以最有可能的是，它被用作分隔符。如果这实际上是 a `'\\n'`(aka `r'\n'`) 而不是 a `'\n'`，*则必须*将其删除才能获得正确答案。

此外，您似乎无缘无故地做了很多额外的工作。很可能数据实际上已正确填充，但那部分可能是值得的。但整体与将参数`translate(dict(zip(map(ord, u'-_'), u'+/')))`传递给 做同样的事情，但效率较低且更难阅读（如果它是正确的）。（顺便说一句，如果您是针对两次调用的成本进行优化，那么与 Unicode 之间的转换几乎肯定会超过节省的成本。即使您已经分析并确定它有所作为，您可能会想要生成上面的映射——既是为了提高效率，所以你不要为每个字符串做一次，更重要的是，为了可读性。）`altchars``b64decode``translate``replace``translate`

把它放在一起：

```
data = '''begin-base64 644 data.xml.gz\nH4sIAAAAAAAAA y9a4 lx3Hn
d6fguB7JzNuGZkNigNfdrAGbMAYaXeNfbPolXplYiRSIFu'''
_, data = data.split('\n', 1)
padding_factor = (4 - len(data) % 4) % 4
data += "="*padding_factor
data_decoded = base64.b64decode(data, '-_') 
```

同样，如果您有 a`'\\n'`而不是 a `'\n'`，请相应地更改该`split`行。

# php - Onsubmit javascript将值发送到php并返回值

> ID：13920644
> 
> 赞同：1
> 
> 时间：2012-12-17T19:17:32.260
> 
> 标签：php, javascript

抱歉，如果这已在其他地方得到回答，但我很新，不确定搜索词对我有帮助。

我有一个包含以下内容的表格：

```
<form onsubmit="InsertAppointment()" method="get"> 
```

调用以下Javascript

```
 function InsertAppointment()    
{
    alert("moo");
    $.get("test.php", 
        function(data)
            {
                alert(data);
            } 
        );

} 
```

test.php 只是做

```
<?php 
 echo "test complete"; 
?> 
```

我期待javascript返回两个消息框，其中一个说moo，另一个测试完成，我得到第一个但不是后者。我真的不确定我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:18:58.947

Ajax，也就是`$.get`方法的本质（它执行一个ajax 调用）是异步的，因此表单*被*提交，而回调函数（提醒数据的那个）没有被执行。

只需`return false;`在通话后立即添加一条语句`$.get();`，您也会收到第二条警报。弹出的时间会更长（请求必须发送到服务器，必须将响应发送回并进行处理，*然后*会提醒响应）。如果你不这样做`return false`，提交事件将完成，客户端将被重定向

# php - 使用视频 ID 连续播放 youtube 视频

> ID：13920645
> 
> 赞同：-1
> 
> 时间：2012-12-17T19:17:35.007
> 
> 标签：php, youtube, youtube-api

我有一系列 youtube 视频 ID。我想使用 youtube API 创建一种连续播放播放列表。我怎样才能使用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:22:39.277

There's no reason to get PHP into the mix here. A standard YouTube HTML player embed with custom player parameters will let you do that.

Take a look at the documentation for the [playlist](https://developers.google.com/youtube/player_parameters#playlist) and [loop](https://developers.google.com/youtube/player_parameters#loop) parameters.

# java - 从内部类访问局部变量

> ID：13920649
> 
> 赞同：-2
> 
> 时间：2012-12-17T19:17:54.763
> 
> 标签：java

> **可能重复：**
> [匿名内部类中的 Java 局部变量可见性 - 为什么需要“最终”关键字？](https://stackoverflow.com/questions/7423028/java-local-variable-visibility-in-anonymous-inner-classes-why-is-final-keywo)

我有这个功能可以创建一些按钮。我正在尝试*doAction*方法中的out.println*项。*

 *```
 for (int i = 0; i < itemsList.size(); i++) {
        String item = itemsList.get(i);
        TButton button = new TButton("" + item, 8, 415 + (25 * i), 90, 25) {
            public void doAction() {
                System.out.println("" + item);
            }
        };
        this.framework.add(button);
    } 
```

我收到错误

```
local variable item is accessed from within inner class 
```

我该如何以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:19:21.653

标记`item`为`final`，这应该可以解决问题。这个[解决方案](https://stackoverflow.com/a/7423059/205426) ：

> 本地类绝对可以引用实例变量。它们不能引用非 final 局部变量的原因是因为局部类实例在方法返回后可以保留在内存中。当方法返回时，局部变量超出范围，因此需要它们的副本。如果变量不是最终的，那么方法中变量的副本可能会更改，而本地类中的副本不会更改，因此它们会不同步。
> 
> 匿名内部类需要最终变量，因为它们在 Java 中实现的方式。匿名内部类 (AIC) 通过创建一个私有实例字段来使用局部变量，该字段保存局部变量值的副本。内部类实际上并没有使用局部变量，而是一个副本。在这一点上应该很明显，如果原始值或复制值发生变化，就会发生“坏事”™；会有一些意想不到的数据同步问题。为了防止此类问题，Java 要求您将 AIC 将使用的局部变量标记为最终变量（即不可更改）。这保证了内部类的局部变量副本将始终与实际值匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:19:15.990

制作`item`final 应该可以解决您的问题：

```
final String item = itemsList.get(i); 
```

您不能像这样从内部或匿名类访问非最终局部变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:19:12.777

您需要使用`final`关键字。

试试`final String item=itemsList.get(i)`；

由于匿名对象捕获了`item`变量，因此之后对其进行修改是没有意义的。因此，您需要 ( *have* ) 使其不可变。*

# php - 发布一个变量，它是表单输入的“名称”

> ID：13920651
> 
> 赞同：0
> 
> 时间：2012-12-17T19:18:01.357
> 
> 标签：php, input

所以我有一个问题，我试图发布一个变量，它是表单输入复选框的名称。但是，此名称是一个变量。当我查看页面源代码时，它会显示我想要的名称，但是当我有：

```
$files_name = $_POST['$file_name']; 
```

这适用于我拥有的其他元素，它不会发送 $file_name 具有的值。我认为它可能与连接变量有关，但我已经查看了我应该如何执行此操作，但我无法弄清楚如何执行此操作或做什么。

* * *

我有一个新问题。这是因为每当我尝试在任何阶段显示 $file_name 的值时，由于某种原因，它是空白的，除了在表单中的 name="$file_name" 中使用时，几乎就像它失去了它的值一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:20:11.093

In single quotes, the variable is not interpreted, it's read literally as `'$file_name'`. To have the value interpreted, use double quotes:

```
$files_name = $_POST["$file_name"]; 
```

You don't need quotes here at all, just use:

```
$files_name = $_POST[$file_name]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:22:02.717

do it like that

```
 $files_name = $_POST[$file_name]; 
```

# javascript - 电话差距，有多少javascript？

> ID：13920654
> 
> 赞同：2
> 
> 时间：2012-12-17T19:18:32.827
> 
> 标签：javascript, cordova

因此，对于我目前正在开发的 phonegap/cordova 应用程序，我正在编写很多 javascript，在执行诸如导入脚本之类的操作时，我需要制作一个导入脚本而不是在顶部添加脚本标签，因为它会作为一名程序员，我在每个页面上添加一个新脚本而不是仅仅将它添加到这个页面上，这对我来说效率低下。

现在我的问题是，我可以使用太多 javascript 吗？让我们说20个js文件太多了吗？每行 500 多行（不包括导入脚本）。我可以看到这种情况在未来也会增加。那么你会说最大值应该是多少？我是否应该减少脚本的数量并将它们全部放在一个中并缩小它等等。由于 js 是直接从手机上运行的，这并不重要吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:25:05.637

无论脚本加载是否不会延迟您的应用程序加载，IMO 都可以拥有您需要的所有代码。将脚本分离成您需要的文件这一事实可能会使您的应用程序变慢，但它会提高应用程序本身的可维护性和理解（可能是为您自己在未来或为其他程序员）

# php - php 从数组集中删除父级数组并合并节点

> ID：13920659
> 
> 赞同：16
> 
> 时间：2012-12-17T19:18:42.643
> 
> 标签：php, arrays, multidimensional-array

我对操作数组很糟糕......鉴于这种结构，我想删除顶级数组并将所有子集合并到一个平面数组中：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [0] => hey.com
                )

            [1] => Array
                (
                    [0] => you.com
                )
        )
    [1] => Array
        (
            [0] => Array
                (
                    [0] => this.com
                )

            [1] => Array
                (
                    [0] => rocks.com
                )
        )
) 
```

到所需的结构：

```
Array
    (
        [0] => hey.com
        [1] => you.com
        [2] => this.com
        [3] => rocks.com
    ) 
```

速度至关重要 - 我们将处理数十万个结果

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-17T19:55:11.723

```
$flat = call_user_func_array('array_merge', $arr); 
```

这将把阵列整**平一层**。它将采用您提供的样本输入，并产生您要求的所需输出。

*注意 - 在发布此答案后对问题进行了编辑。该问题先前要求以下预期结果：

```
Array
(
    [0] => Array
        (
            [0] => hey.com
            [1] => you.com
            [2] => this.com
            [3] => rocks.com
        )

) 
```

这就是上面的`array_merge()`答案提供的。

确保：

1.  您的父数组使用数字索引
2.  父数组至少有一个子元素，否则你会因为`array_merge`抱怨没有参数而得到一个 php 错误。

对于那些想知道它是如何工作的人：

```
// with 
$arr = [ [1,2,3], [4,5,6] ];
// call_user_func_array('array_merge', $arr) is like calling
array_merge($arr[0], $arr[1]);

// and with 
$arr = [ [1,2,3], [4,5,6], [7,8,9] ];
// then it's like:
array_merge($arr[0], $arr[1], $arr[2]);
// and so on... 
```

如果您使用的是 php 5.6+，则 splat 运算符 ( `...`) 可以是更易读的方式：

```
$flat = array_merge(...$arr); 
```

如果你想扁平化多个层次，你可以使用多个嵌套`array_merge()`调用，或者如果你想递归地完全扁平化结构：

```
// This is a great option if you don't know what depth the structure may be,
// or if the structure may contain different arrays with different depths.
$flat = iterator_to_array(new RecursiveIteratorIterator(new RecursiveArrayIterator($arr))); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-17T19:27:54.893

您可以使用`RecursiveArrayIterator`

```
$it = new RecursiveIteratorIterator(new RecursiveArrayIterator($data));
$list = iterator_to_array($it,false);
var_dump($list); 
```

输出

```
array (size=4)
  0 => string 'hey.com' (length=7)
  1 => string 'you.com' (length=7)
  2 => string 'this.com' (length=8)
  3 => string 'rocks.com' (length=9) 
```

[查看简单演示](http://eval.in/4890)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T19:36:07.510

```
<?php
//Very simple recoursive solution
$array = array(
    array(
        array('hey.com'),
        array('you.com')
    ),
    array(
        array('this.com'),
        array('rocks.com'),
        array(
            array('its.com'),
            array(
                array('soo.com'),
                array('deep.com')
            )
        )
    )
);

function deepValues(array $array) {
    $values = array();
    foreach($array as $level) {
        if (is_array($level)) {
            $values = array_merge($values,deepValues($level));
        } else {
            $values[] = $level;
        }
    }
    return $values;
}

$values = deepValues($array);
echo "<pre>";
print_r($values);
echo "</pre>";
?> 
```

我不知道如何得到这样的 arral，但这个解决方案是只获取值。

[编辑]对不起，它最甜蜜：

```
function deepValues(array $array, array &$values) {
    foreach($array as $level) {
        if (is_array($level)) {
            deepValues($level, $values);
        } else {
            $values[] = $level;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-11T21:51:05.610

如果这些值始终处于相同的深度级别，您确实可以使用 array_merge：

```
$array = [                                                                                                                                                                                                                                 
    [
        ['hey.com'],
        ['you.com'],
    ],                                                                                                                                                                                                                
    [
        ['this.com'],
        ['rocks.com'],
    ],                                                                                                                                                                                                             
];

print_r(array_merge(... array_merge(... $array)));

Getting:

Array
(
    [0] => hey.com
    [1] => you.com
    [2] => this.com
    [3] => rocks.com
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T19:52:12.460

如果您的数组始终具有相同的先前已知深度，也许您可​​以充分利用

[http://php.net/manual/es/function.array-merge.php](http://php.net/manual/es/function.array-merge.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-24T10:22:19.367

如果数组从关联索引中只有一层，并且只有一个元素：

```
foreach($arr as $key=>$val) { 
   if (is_array($arr[$key])) $arr[$key] = $arr[$key][0]; 
}

Getting:

[file] => Array (
            [name] => black.png
            [type] => image/png
            [tmp_name] => /tmp/phpfupdU5
            [error] => 0
            [size] => 197782
        )    

from:    

[file] => Array (
            [name] => Array
                ( [0] => black.png )
            [type] => Array
                ( [0] => image/png )
            [tmp_name] => Array
                ( [0] => /tmp/phpfupdU5 )
            [error] => Array
                ( [0] => 0 )
            [size] => Array
                ( [0] => 197782 )
        ) 
```

# objective-c - 格式化数字字符串，到多个尾随/数字/零

> ID：13920660
> 
> 赞同：0
> 
> 时间：2012-12-17T19:18:45.510
> 
> 标签：objective-c, ios, cocoa-touch, nsstring

我有一个简单的计算

```
float x = ([_enterValue.text floatValue]);
//known constant number
float y = (My value here);
[_resultTxt setText:[NSString stringWithFormat:@"%f", x * y]]; 
```

结果`stringWithFormat`有很多零，即。1.806700000000

我将如何去格式化这个所以我`string`的只是像 1.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:19:59.320

Try this:

```
[NSString stringWithFormat:@"%.1f", x * y] 
```

The number after the decimal denotes the number of decimal places to be printed.

# sql - JdbcTemplate 中的 SQL

> ID：13920661
> 
> 赞同：0
> 
> 时间：2012-12-17T19:18:49.047
> 
> 标签：sql, jdbctemplate

我已经开始使用 Spring JdbcTemplates 并且我有一个关于 SQL 的问题：

在以下代码中：

```
String sql = "SELECT * FROM CUSTOMER WHERE CUST_ID = ?"; 
Customer customer = (Customer)getJdbcTemplate().queryForObject(
            sql, new Object[] { custId }, new CustomerRowMapper()); 
```

“ID=”是什么意思？方法？我们在这个查询中寻找什么？查询似乎未完成。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:22:53.403

问号是可替换的 SQL 参数。第二条语句中的“new Object[] { custId }”参数提供了参数的值。例如，如果“custId”的值为 42，那么生成的 SQL 查询将是“SELECT * FROM CUSTOMER WHERE CUST_ID = 42”。您应该使用参数化 SQL 查询来减少 SQL 注入攻击的可能性并促进查询计划的缓存。如果您不熟悉，我建议您阅读它们。

# github - Github - 下载页面哪里去了？

> ID：13920662
> 
> 赞同：12
> 
> 时间：2012-12-17T19:18:52.003
> 
> 标签：github, download

我有提供 pdf 文件作为下载的 Github 存储库。我记得很好地选择了 pdf 文件作为下载，然后按照 github 页面上的下载计数器。但是现在我想为这些下载页面设置一个外部链接——而且再也找不到它们了。

我是否遗漏了什么，或者 github 上是否有我没有注意到的变化？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T19:21:07.560

A change has been made: [they're getting rid of downloads](https://github.com/blog/1302-goodbye-uploads). You can read the blog post for details, but if you already have files uploaded, add `/downloads` to the end of the repo URL to view the downloads page.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-08T05:29:07.963

7 月，GitHub 添加了一个[发布页面](https://github.com/blog/1547-release-your-software)，该页面提供了我记得的旧下载页面中的大部分功能，并在存储库中创建了一个标签来标记发布的来源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-13T02:48:07.103

在 GitHub 上打开 pdf。之后，单击右上角的原始按钮。

# php - Imagettfbbox 和 imagettftext

> ID：13920663
> 
> 赞同：0
> 
> 时间：2012-12-17T19:18:57.073
> 
> 标签：php, imagettftext

嘿，我想知道我在哪里缺少文本所在的文本框的大小？

```
$img = imagecreatefromjpeg("Desert.jpg"); //http://s7.postimage.org/ceb440itn/Desert.jpg
$width = imagesx($img);
$height = imagesy($img);

$new_width = $width;
$new_height = $height;

$tmp_img = imagecreatetruecolor($new_width, $new_height);
imagecopyresized($tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
// Create some colors
$black = imagecolorallocate($tmp_img, 65, 173, 196);
// Define Font
$font = 'ARIAL.TTF';
// The text to draw
$text = 'This is a test here here blah';
//font size
$size = 75;
// Compute size of text and get the x and y for centering the text into the image
$box = imagettfbbox( $size, 0, $font, $text );   
$x = 5;//($width - $box[2]) / 2 - 5;
$y = 75;//($height - $box[5]) / 2;

// Add some shadow to the text
imagettftext($tmp_img, $size, 0, $x+1, $y-1, $grey, $font, $text);

// Add the text
imagettftext($tmp_img, $size, 0, $x, $y, $black, $font, $text);

imagejpeg($tmp_img, "testing.jpg", 100);

imagedestroy($img);
imagedestroy($tmp_img); 
```

输出图像如下所示：

```
--------------------------
|This is a test here here|blah
|                        |
|                        |--Image
|                      --+----Inside image
|                        |
-------------------------- 
```

**请注意，它在***图像本身*内**之后不包含单词**blah 。**

 ***这应该是这样的：

```
--------------------------
|This is a test here here|
|          blah          |
|                        |--Image
|                      --+----Inside image
|                        |
-------------------------- 
```

我在哪里错过了它定义文本框大小的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:43:50.597

使用最少数量的编辑，我得到一个未定义的 $grey 变量。输出图像在这里 [http://www.laprbas.com/RAY_junk/testing.jpg](http://www.laprbass.com/RAY_junk/testing.jpg)

所以我的下一个问题是，嗯？我没有 Arial 字体。这是你看到的吗？

```
$desert = 'http://s7.postimage.org/ceb440itn/Desert.jpg';

$img = imagecreatefromjpeg($desert); //http://s7.postimage.org/ceb440itn/Desert.jpg
$width = imagesx($img);
$height = imagesy($img);

$new_width = $width;
$new_height = $height;

$tmp_img = imagecreatetruecolor($new_width, $new_height);
imagecopyresized($tmp_img, $img, 0, 0, 0, 0, $new_width, $new_height, $width, $height);

// Create some colors
$black = imagecolorallocate($tmp_img, 65, 173, 196);

// Define Font
$font = 'ARIAL.TTF';
$font = 'fonts/verdana.ttf';

// The text to draw
$text = 'This is a test here here blah';

//font size
$size = 22;

// Compute size of text and get the x and y for centering the text into the image
$box = imagettfbbox( $size, 0, $font, $text );   
$x = 5;//($width - $box[2]) / 2 - 5;
$y = 75;//($height - $box[5]) / 2;

// Add some shadow to the text
imagettftext($tmp_img, $size, 0, $x+1, $y-1, $grey, $font, $text);

// Add the text
imagettftext($tmp_img, $size, 0, $x, $y, $black, $font, $text);

imagejpeg($tmp_img, "RAY_junk/testing.jpg", 100);

imagedestroy($img);
imagedestroy($tmp_img); 
```***

# c# - Bitmap 的 ColorPalette 有一个长度为 0 的数组作为条目

> ID：13920668
> 
> 赞同：4
> 
> 时间：2012-12-17T19:19:16.667
> 
> 标签：c#, .net, winforms

我正在尝试将位图转换为图标，并且需要设置位图的调色板（请参阅[GetHicon from a 16 COLOR bitmap returns an image with less colours](https://stackoverflow.com/questions/13917378/gethicon-from-a-16-color-bitmap-returns-an-image-with-less-colors)）。为此，我试图遵循[这个答案](https://stackoverflow.com/a/6012668/939213)：但我看到调色板是空的，我无法创建新数组，因为我必须更改原始数组。（无论如何我什至尝试过。它不起作用。）

我有：

```
ColorPalette palette = bitmap.Palette;
Color[] entries = palette.Entries; 
```

但是`entries`的长度为零。

那么如何更改调色板呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T19:53:24.283

如前所述，位图文件不一定有调色板。事实上，超过 256 种颜色的现代颜色文件不太可能（但仍然可以（我认为））使用调色板。相反，颜色信息来自像素值本身（而不是指向调色板表）

[我从（ http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/4a10d440-707f-48d7-865b-1d8804faf649/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/4a10d440-707f-48d7-865b-1d8804faf649/)）找到了以下代码。我没有对其进行测试（尽管作者声明“在 VS 2008 c# 中使用 .net 3.5 进行了测试”）。

它似乎可以自动处理减少颜色的数量......

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
extern static bool DestroyIcon(IntPtr handle);

private void buttonConvert2Ico_Click(object sender, EventArgs e)
{
    OpenFileDialog openFileDialog1 = new OpenFileDialog

    openFileDialog1.InitialDirectory = "C:\\Data\\\" ;
    openFileDialog1.Filter = "BitMap(*.bmp)|*.bmp" ;
    openFileDialog1.FilterIndex = 2 ;
    openFileDialog1.RestoreDirectory = true ;

    if(openFileDialog1.ShowDialog() == DialogResult.OK)
    {
        try
        {
            string sFn = openFileDialog1.FileName;
            MessageBox.Show("Filename=" + sFn);
            string destFileName = sFn.Substring(0, sFn.Length -3) +"ico";

            // Create a Bitmap object from an image file.
            Bitmap bmp = new Bitmap(sFn);
            // Get an Hicon for myBitmap. 
            IntPtr Hicon = bmp.GetHicon();
            // Create a new icon from the handle. 
            Icon newIcon = Icon.FromHandle(Hicon);
            //Write Icon to File Stream
            System.IO.FileStream fs = new System.IO.FileStream(destFileName, System.IO.FileMode.OpenOrCreate);
            newIcon.Save(fs);
            fs.Close();
            DestroyIcon(Hicon);
            setStatus("Created icon From=" + sFn + ", into " + destFileName);
        }
        catch (Exception ex)
        {
            MessageBox.Show("Error: Could not read/write file. Original error: " + ex.Message);
        }
    }
} 
```

# grid - Kendo UI 网格：分组是否会导致 dataSource 更改事件按设计触发？

> ID：13920670
> 
> 赞同：3
> 
> 时间：2012-12-17T19:19:19.507
> 
> 标签：grid, datasource, kendo-ui, onchange

当我通过将列标题拖动到分组面板进行分组时，会触发 dataSource 的更改事件。这是设计使然吗？

编辑：当网格按列排序时，也会发生该事件。

我的问题的部分基础是“变化”这个词是模棱两可的。我已经阅读文档很长时间了，有时作者希望这个词表示“正在修改”，有时他们希望它表示“被替换”。一些 Windows 控制软件公司通过使用单独的词“修改”和“更改”来区分这两种情况，并相应地命名它们的事件。因此，它的意图并不总是很清楚。

“改变你的内裤”。那里的意思是“穿上一条新的内裤”，而不是“在你穿的内裤上缝一个纽扣”。

如果 kendo dataSource.change 事件在分组和排序发生时按设计触发，如何区分这两个“非必要”更改（数据没有被修改，它们只是顺序不同）以及场景网格的基础数据集被全部替换？有没有办法“监听” dataSource.dataCompletelyReplaced 场景？比较许多 WinForms 网格上的 DataSourceChanged 事件，该事件**不是**在数据集中的项目发生更改时触发，而是在数据集被替换*并且*网格重新启动时触发。

“经历变化”和“被取代”是非常不同的场景。

在 Kendo 网格中，一个示例可能是在配置中使用空数组初始化网格`dataSource.data = []`，然后稍后（可能但不一定在某些用户交互之后）将空数组替换为使用`dataSource.data(someNewData)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T11:13:09.457

是的，数据源的更改事件应该在数据被分组（或排序、过滤等）时触发。摸索是一种数据操作，它改变了数据源的视图——数据项的当前状态。

在“dataCompletelyReplaced”操作之后不会触发单独的内置事件。如果您正在编辑（或插入）特定记录，您可以使用事件数据的“action”参数。

```
$("#grid").data("kendoGrid")
    .dataSource.bind("change", function(e) { 
        e.action 
    }); 
```

# jquery - 如何在一个警报中显示所有验证消息

> ID：13920673
> 
> 赞同：0
> 
> 时间：2012-12-17T19:19:21.287
> 
> 标签：jquery

在我下面的 jquery 验证中，如果发生多个验证错误，我希望所有验证一次出现在警报中，而不是在警报中一次显示一个验证。如何在一个警报中显示所有消息？

```
 function validation() {

    var alertValidation = "";
    var _qid = "";
    var _msg = "";

    $("input[data-type='qmark']").each(function(i) {
        var questions = $(this).attr("data-qnum");
        var marks = parseInt($("[class*=q" + i + "_ans_text]").text());
        var txtinput = $(this).val();
        _qid = questions;
        _msg = "You have errors on Question Number: " + _qid + "\n";

        if (txtinput == '') {
            alertValidation += "\n\u2022 You have not entered in a value in all the Indivdiaul Marks textbox\n";
        }

        if (marks < '0') {

            alertValidation += "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Need To Remove " + Math.abs(marks) + " Marks";
        }

        if (marks > '0') {

            alertValidation += "Your Total Marks Remaining does not equal 0 \n\n\u2022 You Have " + marks + " Marks Remaining";
        }

        if (alertValidation != "") {
            return false; //Stop the each loop 
        }

    });

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:27:17.497

**删除此代码块**

```
if (alertValidation != "") {
    return false; //Stop the each loop 
} 
```

您已经在连接错误消息，上面的代码行在遇到错误时会中断您的循环。所以删除它应该可以解决你的问题..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T19:24:45.717

对于每个警报验证，给它一个不同的名称：

```
if (txtinput == '') {
     alertValidation1 += 'blah blah'
}
if (marks > '0') {
     alertValidation2 += 'other stuff'
} 
```

然后在警报结束时，执行以下操作：

```
alert(alertValidation1 + '\n' + alertValidation2 + '\n' ...etc) 
```

# jquery - 兼容的element crossbrowser (IE6 and newer) 有什么方法（可能使用 jQuery 代码）来完全设置 select 元素的样式，这样它在 IE6 和更高版本的所有主要浏览器中看起来都一样吗？感觉选择元素是最难解决独特设计的表单元素。最好的解决方案是让表单元素保持原样。没有 javascript，没有图像，没有后备。我自己也经历了这整个痛苦的过程，我从经验中知道样式元素的样式是 a) 不值得花时间和精力 b) 这是不可能的。选择元素是最难设置背景颜色、选定颜色

> ID：13920676
> 
> 赞同：2
> 
> 时间：2012-12-17T19:19:26.433
> 
> 标签：jquery, css, internet-explorer, styles

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:56:53.180

最好的解决方案是让表单元素保持原样。没有 javascript，没有图像，没有后备。

我自己也经历过这整个痛苦的过程，我从经验中知道样式元素是

**a) 不值得花时间和精力**

**b) 这是不可能的**。

选择元素是最难设置背景颜色、选定颜色、边框颜色等样式的元素。

除了设计师和客户真正关心的事情之外，你最终会花费数小时甚至数天。

**网络不是用来控制的，而是供每个人使用任何浏览器和任何设备使用的。**

我不会在 IE6 上浪费一分钱，但如果你这样做了，请记得检查所有的移动浏览器。还要考虑使用屏幕阅读器的残障人士的可访问性。

祝你好运！

ps 说真的，不要这样做。

# java - Receiving "Could not open database" error when trying to open sqlite file in /assets

> ID：13920680
> 
> 赞同：2
> 
> 时间：2012-12-17T19:19:50.807
> 
> 标签：java, android, sqlite, android-listview, android-sqlite

I am trying to open a sqlite database that I created and loaded and /assets of my project. I use a class, **MySQLiteHelper** to open this database and to handle upgrades, etc.

In my Activity I create a new instance of **MySQLiteHelper** ... as I do so, it says that it can't open the database (see logcat below).

Had this working and now it stopped. Confused why I am *now* receiving this error ... I rolled back my changes and I still receive this error. I am thinking it has something to do with the file I am loading? Any help would be appreciated.

Class to open sqlite:

```
package com.sembasys....;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class MySQLiteHelper extends SQLiteOpenHelper {

    // The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.sembasys.metrosleepnyc/databases/";
    private static String DB_NAME = "metrosleep";

    private SQLiteDatabase myDataBase;
    private final Context myContext;
    private static final int DATABASE_VERSION = 1;
    public static final String KEY_ID = "stop_id";
    public static final String LINE_ID = "line_id";
    public static final String STATION= "station_name";

    public MySQLiteHelper(Context context) {
        super(context, DB_NAME, null, DATABASE_VERSION);
        this.myContext = context;
    }

    /**
     * Creates a empty database on the system and rewrites it with your own
     * database.
     * */
    public void createDataBase() throws IOException {
        boolean dbExist = checkDataBase();
        if (dbExist) {
            Log.v("DB Exists", "db exists");

            // By calling this method here onUpgrade will be called on a
            // writeable database, but only if the version number has been
            // bumped
            this.getWritableDatabase();
        }
        dbExist = checkDataBase();
        if (!dbExist) {
            // By calling this method and empty database will be created into
            // the default system path of your application so we are gonna be
            // able to overwrite that database with our database.
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each
     * time you open the application.
     * 
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase() {

        SQLiteDatabase checkDB = null;

        try {
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,
                    SQLiteDatabase.OPEN_READONLY);

        } catch (SQLiteException e) {

            // database does't exist yet.

        }

        if (checkDB != null) {

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created
     * empty database in the system folder, from where it can be accessed and
     * handled. This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException {

        // Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        // Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        // transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer)) > 0) {
            myOutput.write(buffer, 0, length);
        }

        // Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException {

        // Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

        if (myDataBase != null)
            myDataBase.close();

        super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        if (newVersion > oldVersion)
            Log.v("Database Upgrade", "Database version higher than old.");
        myContext.deleteDatabase(DB_NAME);
    }

} 
```

Activity where I implement the above class:

```
package com.sembasys....;

import com.actionbarsherlock.app.SherlockActivity;
import android.widget.SimpleCursorAdapter;
import android.annotation.TargetApi;
import android.app.ListActivity;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Build;
import android.os.Bundle;
import android.view.View;
import android.widget.TextView;

import android.support.v4.app.NavUtils;

public class ChooseRoute extends ListActivity  {

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Show the Up button in the action bar.
        //getSupportActionBar().setDisplayHomeAsUpEnabled(true);

        MySQLiteHelper myDbHelper = new MySQLiteHelper(null);
        myDbHelper = new MySQLiteHelper(this);

            try {
                myDbHelper.openDataBase();
            }catch(SQLException sqle){
                throw sqle;
            }

        if(isNetworkAvailable()) {

            setContentView(R.layout.activity_choose_route);

            TextView empty = (TextView) findViewById(android.R.id.empty);
            empty.setVisibility(View.VISIBLE);

            SQLiteDatabase db = myDbHelper.getReadableDatabase();

            String TABLE_NAME = "Stops";
            Cursor cursor = db.query(true, TABLE_NAME , new String[] { MySQLiteHelper.LINE_ID, MySQLiteHelper.STATION}, null, null, null, null, null, null);
             startManagingCursor(cursor);
            String[] columns = new String[] { MySQLiteHelper.STATION };

            // the XML defined views which the data will be bound to
            int[] to = new int[] { R.id.text };

            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.todo_row, cursor, columns, to);
            setListAdapter(adapter);
            registerForContextMenu(getListView());

        } else {

            setContentView(R.layout.no_connection);

        }

    }

    private boolean isNetworkAvailable() {
        ConnectivityManager connectivityManager 
              = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
        return activeNetworkInfo != null;
    }   

} 
```

And the logcat.

```
12-17 14:07:27.827: W/dalvikvm(23119): threadid=1: thread exiting with uncaught exception (group=0x40de8930)
12-17 14:07:27.847: E/AndroidRuntime(23119): FATAL EXCEPTION: main
12-17 14:07:27.847: E/AndroidRuntime(23119): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sembasys.metrosleepnyc/com.sembasys.metrosleepnyc.ChooseRoute}: android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.os.Looper.loop(Looper.java:137)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at java.lang.reflect.Method.invokeNative(Native Method)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at java.lang.reflect.Method.invoke(Method.java:511)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at dalvik.system.NativeStart.main(Native Method)
12-17 14:07:27.847: E/AndroidRuntime(23119): Caused by: android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at com.sembasys.metrosleepnyc.MySQLiteHelper.openDataBase(MySQLiteHelper.java:126)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at com.sembasys.metrosleepnyc.ChooseRoute.onCreate(ChooseRoute.java:36)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.app.Activity.performCreate(Activity.java:5104)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-17 14:07:27.847: E/AndroidRuntime(23119):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-17 14:07:27.847: E/AndroidRuntime(23119):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:30:16.753

根据您自己的代码，在文件夹`openDatabase()`中查找您的数据库`/databases`，但数据库仍然在`/assets`文件夹中，直到您调用`createDatabase()`（或`copyDatabase()`直接）。`createDataBase()`在尝试打开它之前，您必须调用将数据库复制到适当的位置。

# python - idea/solution how to edit PBL (PowerBuilder Library) files?

> ID：13920682
> 
> 赞同：1
> 
> 时间：2012-12-17T19:19:56.580
> 
> 标签：python, .net, powerbuilder

I want to get the content of DataWindow from PBL (PowerBuilder Library) file and edit it in place. The idea is to read the pbl file, and access individual DataWindows to modify source code. Somehow, I have managed to do the first part with PblReader .NET library using IronPython. It allows me to read PBL files, and access DataWindow source code. However it doesn't support modifications. I would like to know if anyone have an idea for editing PBL files?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:34:55.133

PowerBuilder 应用程序可以从 PBL 加载 DataWindow（不必位于库路径中），对其进行修改，然后将其保存回 PBL。我已经写了几个工具来做到这一点。`modify`PowerBuilder 将允许您使用该方法根据其对象模型修改 DataWindow 。我不知道为什么有人想要重新发明这一切。我记得在某处看到 PB 的 Python 绑定。您可以从 PB 获取 DW 语法，调用 Python，然后将其保存回 PB。但是您必须在 Python 中进行所有解析，而 PB 已经了解 DW。最后我很惊讶特里没有插入 PBL Peeper。您可以使用 PBL Peeper 导出 DataWindows，在 Python 中将它们按摩到您心中的内容。然后将它们导入PB。

# asp.net - Listing out all the names of ASP.Net methods and mappings for a DataSet created in DataSet Designer

> ID：13920686
> 
> 赞同：0
> 
> 时间：2012-12-17T19:20:03.893
> 
> 标签：asp.net, dataset, strongly-typed-dataset, tableadapter

When a typed DataSet is created using the Visual Studio DataSet Designer, several methods, etc. are generated.

Example:

```
DataSetStudentsAndParentsTableAdapters.DataTableTableAdapterStudentsAndParents
theTableAdapter.GetDataByStudentsAndParents

etc. 
```

We have many DataSets created this way and it seems difficult to keep track of all names belonging to the methods and mappings.

Is there an easy way to list out all of these names for a particular DataSet created in the DataSet Designer?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:15:02.177

所有生成的类和方法都应该可以从 Class View 窗口中使用。要从菜单中打开它：`View > Class View`。

或者您可以使用对象浏览器（也在`View`菜单中）查看项目中的所有类和方法。

# java - The picture in Jlabel (with ImageIO)

> ID：13920689
> 
> 赞同：-1
> 
> 时间：2012-12-17T19:20:12.543
> 
> 标签：java, swing, url, jlabel, javax.imageio

Could you tell me how can I download image from Url (ex: from "http://www.google.ru/intl/en_com/images/logo_plain.png") to `JLabel` but without saving it on HDD?

Could you give me an easy example? All I need is to put the image from the `URL` to `JLabel` (with ImageIO for ex.)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:26:55.757

就像是

```
JLabel label = new JLabel(new ImageIcon(ImageIO.read(new URL("http://www.google.ru/intl/en_com/images/logo_plain.png"))); 
```

这会引发一些异常，所以要小心

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:35:34.760

由于您似乎不需要使用 ImageIO，即使您多次提到它，这是我所知道的最简单的方法：

```
label = new JLabel(new ImageIcon(new URL(urlString))); 
```

# haskell - Iteratees和FRP之间有什么联系？

> ID：13920695
> 
> 赞同：19
> 
> 时间：2012-12-17T19:20:38.793
> 
> 标签：haskell, frp, conduit, iterate, haskell-pipes

在我看来，这两个想法之间有很强的联系。我的猜测是，如果有一种方法可以用 Iteratees 表达任意图，那么 FRP 可以用 Iteratees 来实现。但是 afaik 他们只支持链状结构。

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T19:59:45.437

这是相反的方式。AFRP 和流处理之间有很强的联系。事实上 AFRP*是*流处理的一种形式，你可以使用这个成语来实现与管道非常相似的东西：

```
data Pipe m a b =
    Pipe {
      cleanup :: m (),
      feed    :: [a] -> m (Maybe [b], Pipe m a b)
    } 
```

这是 Netwire 中电线类别的扩展。它接收下一个输入块，并在停止生成时返回 Nothing。使用此文件阅读器将具有以下类型：

```
readFile :: (MonadIO m) => FilePath -> Pipe m a ByteString 
```

Pipe 是一系列应用函子，因此要将简单的函数应用于流元素，您只需使用*fmap*：

```
fmap (B.map toUpper) . readFile 
```

为了您的方便，它也是一个profunctors 家族。

最有趣的特点是这是一个替代函子家族。这使您可以路由流并允许多个流处理器在放弃之前“尝试”。这可以扩展到一个成熟的解析库，甚至可以使用一些静态信息进行优化。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-17T22:09:24.973

您可以使用流处理器实现有限形式的 FRP。例如，使用该`pipes`库，您可以定义事件源：

```
mouseCoordinates :: (Proxy p) => () -> Producer p MouseCoord IO r 
```

...您可能会类似地定义一个图形处理程序，该处理程序采用鼠标坐标并更新画布上的光标：

```
coordHandler :: (Proxy p) => () -> Consumer p MouseCoord IO r 
```

然后，您将使用组合将鼠标事件连接到处理程序：

```
>>> runProxy $ mouseCoordinates >-> coordHandler 
```

它会按照您期望的方式运行。

就像你说的，这对于单个阶段链很有效，但是更任意的拓扑呢？好吧，事实证明，由于中心`Proxy`类型`pipes`是 monad 转换器，您可以通过在它们自身之上嵌套代理 monad 转换器来对任意拓扑进行建模。例如，以下是压缩两个输入流的方法：

```
zipD
 :: (Monad m, Proxy p1, Proxy p2, Proxy p3)
 => () -> Consumer p1 a (Consumer p2 b (Producer p3 (a, b) m)) r
zipD () = runIdentityP $ hoist (runIdentityP . hoist runIdentityP) $ forever $ do
    a <- request ()               -- Request from the outer Consumer
    b <- lift $ request ()        -- Request from the inner consumer
    lift $ lift $ respond (a, b)  -- Respond to the Producer 
```

这表现得像一个柯里化函数。您可以按顺序将其部分应用到每个输入，然后在完全应用时运行它。

```
-- 1st application
p1 = runProxyK $ zipD   <-< fromListS [1..]

-- 2nd application
p2 = runProxyK $ p2     <-< fromListS [4..6]

-- 3rd application
p3 = runProxy  $ printD <-< p3 
```

它按照您期望的方式运行：

```
>>> p3
(1, 4)
(2, 5)
(3, 6) 
```

这个技巧可以推广到任何拓扑。您可以在“分支、压缩和合并”部分的[Control.Proxy.Tutorial](http://hackage.haskell.org/packages/archive/pipes/3.0.0/doc/html/Control-Proxy-Tutorial.html)中找到更多详细信息。特别是，您应该查看`fork`它用作示例的组合器，它允许您将流拆分为两个输出。

# objective-c - 插入没有任何动画的 UITableView 行

> ID：13920699
> 
> 赞同：21
> 
> 时间：2012-12-17T19:21:00.513
> 
> 标签：objective-c, ios, uitableview

```
[self.tableView insertRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:row inSection:0]] 
                      withRowAnimation:UITableViewRowAnimationNone]; 
```

在我插入的那一行之后的每一行都执行此操作时会向下滑动。我希望他们立即跳到他们的新地方。我不想打电话`reloadData`，因为那时我所有的单元格都会被重绘。

是否可以删除此动画？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2014-06-05T18:55:31.940

这对我有用：

```
[UIView setAnimationsEnabled:NO];
[self.tableView beginUpdates];

[self.tableView insertRowsAtIndexPaths:indexPath
                      withRowAnimation:UITableViewRowAnimationNone];

[self.tableView endUpdates];
[UIView setAnimationsEnabled:YES]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-11-05T15:13:50.083

这也有效

```
[UIView performWithoutAnimation:^{
    [self.tableView insertRowsAtIndexPaths:indexPaths:withRowAnimation:UITableViewRowAnimationNone];
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-15T10:14:16.447

Swift 示例（来自我的聊天记录）

```
UIView.performWithoutAnimation {
        messagesTable.insertRows(at: [IndexPath(row: messages.count - 1, section: 0)], with: .none)
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T22:53:51.317

不幸的是，我遇到了同样的问题，我无法删除动画。

必须是 UITableViewRowAnimationNone 动画类型的错误，因为 iOS（任何版本）似乎不尊重它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T22:59:05.157

如果更新 UITableView 的 dataSource 并调用`[tableView reloadData]`而不是手动插入行，则表格将刷新而没有任何动画。

# c# - ObservableCollection 逐元素变换/投影包装器

> ID：13920703
> 
> 赞同：15
> 
> 时间：2012-12-17T19:21:28.543
> 
> 标签：c#, .net, wpf, observablecollection, inotifycollectionchanged

在 WPF 中创建 ViewModel 时，有时需要将[`ObservableCollection`](http://msdn.microsoft.com/en-us/library/vstudio/ms668604%28v=vs.90%29.aspx)（源集合）中可用的数据转换为扩展/限制/投影原始元素（目标集合）的包装元素集合，而元素的数量和顺序始终反映原始收藏。

就像[Select](http://msdn.microsoft.com/en-us/library/bb548891.aspx)扩展方法一样，只是它不断更新，因此可以用于 WPF 绑定。

如果在索引 x 处将元素添加到源，则在目标集合中的相同索引 x 处添加相同元素的 Wrapper。如果在源集合中删除索引 y 处的元素，则在目标集合中删除索引 y 处的元素。

假设有一个[`ObservableCollection<ClassA>`](http://msdn.microsoft.com/en-us/library/vstudio/ms668604%28v=vs.90%29.aspx)，但我需要绑定的是一个[`ReadOnlyObservableCollection<ClassB>`](http://msdn.microsoft.com/en-us/library/ms668620.aspx)（或等效的），其中`ClassB`->`ClassA`如下：

```
class ClassB : INotifyPropertyChanged, IDisposable
{
    public ClassB(ClassA a)
    {
        Wrapped = a;
        (Wrapped as INotifyPropertyChanged).PropertyChanged+=WrappedChanged;
    }
    public ClassA Wrapped { get; private set; }
    public int SomeOtherProperty { get { return SomeFunction(Wrapped); }
    WrappedChanged(object s, NotifyPropertyChangedArgs a) { ... }
    ...
} 
```

我可以写我自己的`TemplatedTransformCollectionWrapper`，我可以写这个：

```
ObservableCollection<ClassA> source;
TemplatedTransformCollectionWrapper theCollectionThatWillBeUsedInABinding
    = TemplatedTransformCollectionWrapper(source, classA => new ClassB(classA)); 
```

TemplatedTransformCollectionWrapper 理想地包装了所有实现`INotifyCollectionChanged`并正确处理原始、包装的集合的所有可能的添加、删除、替换操作的集合。

写对了也不是小事，`TemplatedTransformCollectionWrapper`似乎是别人已经做过的事情，甚至可能是核心框架的一部分。但我找不到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T12:26:09.937

我在这里发布了我的解决方法 - 这是一个自定义类。仍然希望得到更好的答案。

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Collections.Specialized;
using System.Linq;

namespace ViewLayer
{
    public class TransformObservableCollection<T,Source> : INotifyCollectionChanged, IList, IReadOnlyList<T>, IDisposable
    {
        public TransformObservableCollection(ObservableCollection<Source> wrappedCollection, Func<Source,T> transform)
        {
            m_WrappedCollection = wrappedCollection;
            m_TransformFunc = transform;
            ((INotifyCollectionChanged)m_WrappedCollection).CollectionChanged += TransformObservableCollection_CollectionChanged;
            m_TransformedCollection = new ObservableCollection<T>(m_WrappedCollection.Select(m_TransformFunc));
        }
        public void Dispose()
        {
            if (m_WrappedCollection == null) return;
            ((INotifyCollectionChanged)m_WrappedCollection).CollectionChanged -= TransformObservableCollection_CollectionChanged;
            m_WrappedCollection = null;
        }
        void TransformObservableCollection_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
        {
            switch (e.Action)
            {
                case NotifyCollectionChangedAction.Add:
                    if (e.NewItems == null || e.NewItems.Count != 1)
                        break;
                    m_TransformedCollection.Insert(e.NewStartingIndex,m_TransformFunc((Source)e.NewItems[0]));
                    return;
                case NotifyCollectionChangedAction.Move:
                    if (e.NewItems == null || e.NewItems.Count != 1 || e.OldItems == null || e.OldItems.Count != 1)
                        break;
                    m_TransformedCollection.Move(e.OldStartingIndex, e.NewStartingIndex);
                    return;
                case NotifyCollectionChangedAction.Remove:
                    if (e.OldItems == null || e.OldItems.Count != 1)
                        break;
                    m_TransformedCollection.RemoveAt(e.OldStartingIndex);
                    return;
                case NotifyCollectionChangedAction.Replace:
                    if (e.NewItems == null || e.NewItems.Count != 1 || e.OldItems == null || e.OldItems.Count != 1 || e.OldStartingIndex != e.NewStartingIndex)
                        break;
                    m_TransformedCollection[e.OldStartingIndex] = m_TransformFunc((Source)e.NewItems[0]);
                    return;
            } // This  is most likely called on a Clear(), we don't optimize the other cases (yet)
            m_TransformedCollection.Clear();
            foreach (var item in m_WrappedCollection)
                m_TransformedCollection.Add(m_TransformFunc(item));
        }

        #region IList Edit functions that are unsupported because this collection is read only
        public int Add(object value) { throw new InvalidOperationException(); }
        public void Clear() { throw new InvalidOperationException(); }
        public void Insert(int index, object value) { throw new InvalidOperationException(); }
        public void Remove(object value) { throw new InvalidOperationException(); }
        public void RemoveAt(int index) { throw new InvalidOperationException(); }
        #endregion IList Edit functions that are unsupported because this collection is read only

        #region Accessors
        public T this[int index] { get { return m_TransformedCollection[index]; } }
        object IList.this[int index] { get { return m_TransformedCollection[index]; } set { throw new InvalidOperationException(); } }
        public bool Contains(T value) { return m_TransformedCollection.Contains(value); }
        bool IList.Contains(object value) { return ((IList)m_TransformedCollection).Contains(value); }
        public int IndexOf(T value) { return m_TransformedCollection.IndexOf(value); }
        int IList.IndexOf(object value) { return ((IList)m_TransformedCollection).IndexOf(value); }
        public int Count { get { return m_TransformedCollection.Count; } }
        public IEnumerator<T> GetEnumerator() { return m_TransformedCollection.GetEnumerator(); }
        IEnumerator IEnumerable.GetEnumerator() { return ((IEnumerable)m_TransformedCollection).GetEnumerator(); }
        #endregion Accessors

        public bool IsFixedSize { get { return false; } }
        public bool IsReadOnly { get { return true; } }
        public void CopyTo(Array array, int index) { ((IList)m_TransformedCollection).CopyTo(array, index); }
        public void CopyTo(T[] array, int index) { m_TransformedCollection.CopyTo(array, index); }
        public bool IsSynchronized { get { return false; } }
        public object SyncRoot { get { return m_TransformedCollection; } }

        ObservableCollection<T> m_TransformedCollection;
        ObservableCollection<Source> m_WrappedCollection;
        Func<Source, T> m_TransformFunc;

        event NotifyCollectionChangedEventHandler INotifyCollectionChanged.CollectionChanged
        {
            add { ((INotifyCollectionChanged)m_TransformedCollection).CollectionChanged += value; }
            remove { ((INotifyCollectionChanged)m_TransformedCollection).CollectionChanged -= value; }
        }
    }
} 
```

# ruby-on-rails - how to display number of comments ruby on rails

> ID：13920706
> 
> 赞同：0
> 
> 时间：2012-12-17T19:21:40.627
> 
> 标签：ruby-on-rails

Im trying to have a number of comments count on my news page but I can't seem to accomplish this

heres my view

```
 <div class="container">
   <br />
    <br />
   <h2 class="black">
    Recent News
    <div class="line_section"><div>
  </h2>
   <div class="row"> 
   <div class="span12">

  <ul class="recent-news"> 

  <% @news_all.each do |news| %>

   <li style="font-size: 16px; line-height: 19px; letter-spacing: 1px; font-size: 14px; color: #555; text-align: left;">
    <%= image_tag news.photo.url, class: 'pull-left', style: 'margin-right:40px; margin-top: 2px; width: 300px;' %> 
    <div style=" width: 600px; float: right;">
    <%= link_to news.title, news %> 
    <br />

     <%= link_to news.date, news, style: 'font-size: 10px; color: black; position: relative; top: 15px;' %> 

     <br /><br />
  <%= truncate news.content, length: 500 %> 
    <br />  
  <%= link_to 'Read More...', news, style: 'font-size: 12px !important;' %>
      </div>
  </li>
    <% end %> 

 <%= will_paginate @news_all %>
</div><!-- end span12 -->

 </div><!-- end row -->
</div><!-- end container --> 
```

heres my controller

```
 def batnews
     @article = Article.first
     @news_all = News.all
    @news_all = News.paginate(page: params[:page], per_page: 4, :order => "created_at ASC")
    @comments = Comment.all
   end 
```

heres my model

```
 class News < ActiveRecord::Base
    attr_accessible :title, :author, :date, :content, :photo
    has_attached_file :photo, :styles => { :small => '400x400' },
    :storage => :s3,
    :s3_credentials => "#{Rails.root}/config/s3.yml",
    :path => "/image/:id/:filename",
    :bucket => 'goddam_batman_pics'

     has_many :comments, as: :commentable, dependent: :destroy
   end 
```

heres a link to the site [http://www.batman-fansite.com/batnews](http://www.batman-fansite.com/batnews)

when i try to display the comment.count it spits out the total number of all the comments and not the comments of a particular article.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:32:49.150

对不起，我想通了我所要做的就是

我忘记了我的新闻已经在每个 do |news| 中定义了 阻止事情谢谢

# java - java生成30到32位范围内的随机数

> ID：13920708
> 
> 赞同：3
> 
> 时间：2012-12-17T19:21:45.237
> 
> 标签：java

阅读其他帖子我发现我将不得不使用 BigInteger 生成 20,000 个介于 30 到 32 位之间的随机数。

```
public BigInteger(int numBits, Random rnd) 
```

但这不允许数字的最小和最大范围。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:08:51.870

如果你想使用这个功能，你可以这样做

```
public static BigInteger random(Random rand, BigInteger minValue, BigInteger maxValue) {
    BigInteger range = maxValue.subtract(minValue).add(BigInteger.ONE);
    int bits = range.bitLength();
    BigInteger ret;
    do {
        ret = new BigInteger(bits, rand);
    } while(ret.compareTo(range) >= 0);
    return ret.add(minValue);
} 
```

# backbone.js - 从控制台访问 requireJS 模块中的主干对象

> ID：13920722
> 
> 赞同：6
> 
> 时间：2012-12-17T19:22:34.933
> 
> 标签：backbone.js, requirejs

我正在开发我的第一个大型 Backbone/RequireJS 应用程序，我有一个简单的问题。

当我在页面上打开视图并且在控制台中时，如何访问我的 Backbone 对象（模型、视图等）的属性。

传统上，在 Backbone 中，我这样做：

```
 var myApp : {
    models: {},
    views: {},
    etc...
} 
```

使用 require，我不再有这样的全局对象了。我为调试所做的只是在窗口上创建一个新对象，然后我可以从控制台访问它。有没有办法深入研究这个而不必在窗口上创建新变量？（我显然会在生产之前删除这个全局 obj，只是希望保存步骤并直接进入控制台）。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T21:19:47.357

我还没有找到一个很好的解决方案，但这就是我所做的。

如果我只想访问单个模块，我输入整个 require 拼写：

```
> require(['models/foo'], function(foo) { window.foo = foo; });
> foo.something(); 
```

有时，如果我需要访问多个模块，我会先为 helper 定义一个单行

```
> var req = function(module, name) { require([module], function(m) { window[name] = m; });}

> req('models/foo', 'foo');
> req('models/bar', 'bar');
> foo.something(bar); 
```

如果我需要某个已经存在的实例，我只需在调试器中设置一个断点并使用本地变量，它们在中断模式下在控制台中可用。

我肯定也会对更好的方式感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T09:39:16.720

你试过了`var m = require('your_module')`吗？

我应该工作得很好。

# java - Building a Tree with MYSQL on Web

> ID：13920724
> 
> 赞同：1
> 
> 时间：2012-12-17T19:22:39.503
> 
> 标签：java, mysql, jdbc, tree

I am trying with JSF + Primefaces to use a list of data that I retrieve from MySQL to build a Tree widget. My problem being that I don't know how make the Tree.

I have this data in my MySQL as an example:

```
   id   |       name      | class_id | fl_id
-----------------------------------------------
    1   |    MARKETING    |    0     |   1
    2   |   COMMERCIAL    |    0     |   1
    3   | TRADE-MARKETING |    1     |   1
    4   |      SALES      |    1     |   1
    5   |     RICHARD     |    1     |   2
    6   |      ROGER      |    1     |   3
    7   |      MARIA      |    2     |   4

```

Which should result in a tree display similar to:

```
MARKETING
   >TRADE MARKETING
   >RICHARD
      >>ROGER
COMMERCIAL
   >SALES
MARIA

```

As you notice, from the class id, the parent are 0 and the child are 1 (Which I observe is usually null for the father, but I can't change my database).

What I have coded so far is similar to this:

```
// Connection with MySQL, get result set, put all the data in my list and use a loop
// to count on that list. Then use an "if" condition to tell if 1 or 0, as child or
// father
for(count = 0, cont < rs.getString("class id").size(); count++)
    if(rs.getInt("class id") == 1) {
    }
    else if(rs.getInt("class id") == 2) {
    }
}
// Basically is wrong, because I can't tell what is the end, or leaf. 
```

Basically its code that Ive conceptualized but not fully tested yet. I could post all the code, but I can't log in at work (somehow blocks it).

I've researched every page on Google I could find to find out how to do this, but it's pretty confusing how to make a tree with MySQL, by far static display is much simpler (from example on Primefaces). I am just a beginner in Java.

# c++ - Maven NAR 插件：在路径上找不到 DLL 依赖项

> ID：13920728
> 
> 赞同：1
> 
> 时间：2012-12-17T19:23:14.563
> 
> 标签：c++, maven, dll, dependencies, maven-nar-plugin

我正在尝试使用 Maven 和 NAR 插件构建和测试 DLL。我正在构建的 DLL 依赖于另一个 DLL，我也使用 NAR 插件构建了该 DLL。这是我的POM：

```
<project>  
  <modelVersion>4.0.0</modelVersion>  

  <groupId>com.mycompany</groupId>  
  <artifactId>myproject</artifactId>  
  <packaging>nar</packaging>  

  <name>My Project</name>  
  <version>1.0.0-SNAPSHOT</version>  

  <properties>  
    <skipTests>true</skipTests>  
  </properties>  

  <build>  
    <defaultGoal>install</defaultGoal>  
    <plugins>  
      <plugin>  
        <groupId>org.codeswarm</groupId>  
        <artifactId>maven-nar-plugin</artifactId>  
        <version>20121119</version>  
        <extensions>true</extensions>  
        <configuration>  
          <cpp>  
            <defines>  
              <define>DLLEXPORT</define>  
            </defines>  
          </cpp>  

          <libraries>  
            <library>  
              <type>shared</type>  
            </library>  
          </libraries>  

          <tests>  
            <test>  
              <name>ProjectTest</name>  
              <link>shared</link>  
            </test>  
          </tests>  
        </configuration>  

      </plugin>  
    </plugins>  
  </build>  

  <dependencies>  
    <dependency>  
      <groupId>com.mycompany</groupId>  
      <artifactId>shared-library</artifactId>  
      <version>1.0.0-SNAPSHOT</version>  
      <type>nar</type>  
      <scope>runtime</scope>  
    </dependency>  
  </dependencies>  

</project> 
```

如果我删除对它的依赖`com.mycompany:shared-library`——同时删除想要调用它的代码——那么它就可以正常工作。`ProjectTest`正常运行并执行应有的操作。但是由于存在依赖项，maven 无法运行测试，因为它找不到`shared-library`. 它因错误而崩溃`0xc0000135`。

当我在调试模式下运行 Maven 时，我可以看到当它编译测试时，它正确地将两个 DLL 的头文件的包含路径添加到编译器命令中。当它链接测试时，它会正确地将两个 DLL 的导出库添加到链接器命令中。Maven 执行测试时会出现问题：Maven 想要将 DLL 的路径添加到系统路径，它这样做了 - 但它只添加了`myproject`DLL 的路径。它不会添加`shared-library`DLL 的路径。因此崩溃。

这是 maven-nar-plugin 中的一个已知问题吗？我还听说它暗示有一些 NAR 插件的分叉漂浮在周围。除了我正在使用的插件之外，这个问题是否可以在某些版本的插件中得到解决？还是有一些可以推荐的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:08:02.737

发现这是一个已知问题：[https ://issues.sonatype.org/browse/NAR-189](https://issues.sonatype.org/browse/NAR-189)

# java - Spring Security - 无法注销

> ID：13920729
> 
> 赞同：4
> 
> 时间：2012-12-17T19:23:22.240
> 
> 标签：java, spring, frameworks, spring-security, logout

我是 Spring Framework 的初学者。我和我的朋友正在波兹南理工大学写我们的工程师论文，我们遇到了 Spring Security (3.1.0) 的问题。我不能很好地退出。当我想再次登录时，我看到消息“用户已登录”（我覆盖了标准 Spring Security 错误消息）。我试图清除 SecurityContextHolder 的上下文，但它仍然不起作用。

弹簧安全.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http auto-config="true" create-session="ifRequired">
        <security:intercept-url pattern="/start"
            access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <security:intercept-url pattern="/home" access="ROLE_USER" />       
        <security:session-management>
            <security:concurrency-control 
                max-sessions="1" error-if-maximum-exceeded="true" />
        </security:session-management>
        <security:form-login login-page="/start"
            default-target-url="/home" authentication-failure-url="/login_error?error=true"
            always-use-default-target="true" />
        <security:logout invalidate-session="true" logout-success-url="/start" logout-url="/j_spring_security_logout"/>
    </security:http>
    <security:authentication-manager>
        <security:authentication-provider ref="myAuthenticationProvider"/>
    </security:authentication-manager>

    <bean id="myAuthenticationProvider" name="myAuthenticationProvider" class="org.pp.web.Authentication.XtbAuthenticationProvider"/>
</beans>` 
```

web.xml

```
<!-- Spring Security -->
    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
                  org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

主页.jsp

```
<a href="<c:url value="/logout" />">Logout</a> 
```

控制器.java

```
@RequestMapping(value = "logout")
public String logout() {
    SecurityContextHolder.clearContext();
    return "redirect:/j_spring_security_logout";
}

@RequestMapping(value = "start")
public String start(Model model, HttpServletRequest request) {
    // sprawdzenie czy uzytkownik nie jest juz zalogowany
    if (request.getRemoteUser() == null) {

        return "start";
    } else {

        return "redirect:/home";
    }
} 
```

我有自己的提供商来检查登录名和密码。

AuthProvider.java

```
public class AuthenticationProvider implements AuthenticationProvider{

private Logger logger = Logger.getLogger(AuthenticationProvider.class);

@Override
public Authentication authenticate(Authentication authentication)
        throws AuthenticationException {

    List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();
    authorities.add(new GrantedAuthorityImpl("ROLE_USER"));

    UsernamePasswordAuthenticationToken auth = (UsernamePasswordAuthenticationToken) authentication;
    String username = String.valueOf(auth.getPrincipal());
    String password = String.valueOf(auth.getCredentials());

    if(username.length()<4)
    {
        logger.warn("Error: Login is to short for username: "+ username);
        throw new BadCredentialsException("Login is to short!");
    }
    else if(password.length()<4)
    {
        logger.warn("Error: Password is to short for username: "+ username);
        throw new BadCredentialsException("Password is to short!");

    }
    else if(!(  (username.equals("login") & password.equals("password"))|
            (username.equals("login2") & password.equals("password2"))) ) {
        logger.warn("Error: Incorrect data for username: "+ username);
        throw new BadCredentialsException("Incorrect data!");
    }

    return new UsernamePasswordAuthenticationToken(
        authentication.getName(), authentication.getCredentials(),
        authorities);
}

@Override
public boolean supports(Class<?> authentication) {
    return authentication.equals(UsernamePasswordAuthenticationToken.class);
} 
```

}

我试图修复它，我寻找了很长时间，但我找不到解决方案。

我希望你能帮助我。

Mateusz Jarmuzek, Lukasz Grzybowski

编辑：我覆盖了标准 Spring Security 错误消息。

修改后的代码。

控制器.java

```
 @RequestMapping(value = "dummy")
public String dummy() {
    //SecurityContextHolder.clearContext();
    return "redirect:/dummy";
}

@RequestMapping(value = "logout")
public String logout() {
    //SecurityContextHolder.clearContext();
    return "redirect:/start";
} 
```

虚拟.jsp

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<html>

<% 

session.invalidate(); 
// String redirectURL = "http://localhost:8080/start";
// response.sendRedirect(redirectURL);

%>

<body>
<%-- <c:redirect url='http://localhost:8080/start' /> --%>
</body>

</html> 
```

主页.jsp

```
<a href="<c:url value='/dummy' />">Logout</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T19:07:46.077

JSP 重定向中没有问题，但在设置中。

试试这个：

添加到 web.xml

```
<listener> 
<listener-class>
org.springframework.security.web.session.HttpSessionEventPublisher
</listener-class> 
</listener> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:26:03.563

Spring 安全注销的标准如下：

```
SecurityContextHolder.clearContext(); 
```

**编辑**

如果您使用的是 jsp 重定向，那么您需要一个空的 jsp 来执行以下操作：

1) 使会话无效
2) 重定向到登录页面

当我说空时，我的意思是其中唯一的内容是执行上述两部分的脚本。所以这个过程将如下所示：

> 1) 用户按下注销
> 2) 如上所述重定向到虚拟页面
> 3) 虚拟页面执行其代码
> 4) 用户现在已注销系统。

**JSP 代码**

```
<html>  
    <%session.invalidate()%>    
    //redirect logic
</html> 
```

# java - MongoDB：如何让 findAndModify 返回最后更新的记录

> ID：13920730
> 
> 赞同：0
> 
> 时间：2012-12-17T19:23:24.457
> 
> 标签：java, mongodb

我是 Mongo DB 的新手，遇到了麻烦，因为它在不同的环境（开发、QA 和生产）中表现不同

我正在使用 findAndModify 更新我的 MongoDB 中的记录。

有一个每天运行的作业，它将数据更新/插入到 Mongo DB，我正在使用 findAndModify 来更新记录。

但是我观察到的是 findAndModify 返回的第一条记录在 Dev 、 QA 和 Production 环境中是不同的，尽管这三个环境具有相同的数据？

根据 Mongo DB 文档，它声明 findAndModify 将修改第一个文档

目前这是我的代码：

```
BasicDBObject update = new BasicDBObject();
update.append("$set", new BasicDBObject(dataformed));
coll.findAndModify(query, update); 
```

请让我知道如何确保 findAndModify 返回最后更新的记录，而不是依赖于不可预测的行为？

**编辑部分**

我正在尝试对我的代码使用排序，但它给了我编译错误

**coll.findAndModify（查询，排序：{评级：1}，更新）；**

我有一个名为 lastUpdated 的字段，它是使用 System.currentTimeMilis 创建的

那么我可以像这样使用这个 lastUpdated 来获取最后更新的记录吗

```
coll.findAndModify(  query, 
    new BasicDBObject("sort", new BasicDBObject("lastUpdated ", -1)), 
    update); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:15:09.713

看来您正在使用 Java，因此您必须将`sort`参数构造为 a `DBObject`，就像其他参数一样：

```
coll.findAndModify(
    query, 
    new BasicDBObject("sort", new BasicDBObject("rating", 1)), 
    update); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:29:13.227

正如我们在[您的另一个问题](https://stackoverflow.com/questions/13919735/on-what-basis-does-the-mongo-db-displays-the-records-when-used-with-find-option)中已经向您解释的那样，您必须在文档中添加一个包含更改日期的字段，然后按该字段排序，或者您必须使用[上限集合](http://www.mongodb.org/display/DOCS/Capped+Collections)，因为它们保证插入顺序是保存。

# cocoa - 可以突出显示 NSPopupButton 选择吗？

> ID：13920733
> 
> 赞同：0
> 
> 时间：2012-12-17T19:23:28.153
> 
> 标签：cocoa, controls, nspopupbutton

我在我的 OS X 应用程序中使用 NSPopupButton 来向用户展示一个选项列表。我这样填充它：

```
[baudButton removeAllItems];
[baudButton addItemWithTitle:(@"Baud")];
[baudButton addItemWithTitle:(@"600")];
[baudButton addItemWithTitle:(@"1200")];
[baudButton addItemWithTitle:(@"2400")]; 
```

有没有办法在视觉上标记选择，或者我应该使用另一个控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T14:49:46.040

将 NSPopUpButton 的 type 属性设置为“Popup”给了我一个选中项目的复选标记，并在“关闭”按钮上显示该项目。

# firefox - 如何强制 Firefox 插件字符集/编码？

> ID：13920735
> 
> 赞同：-1
> 
> 时间：2012-12-17T19:23:33.013
> 
> 标签：firefox, encoding, character-encoding, firefox-addon

我在使用移动插件时遇到了问题：它向我显示了通过使用不同页面字符集编写脚本添加的新元素。例如，我可以阅读“cuadrúpedo”，但我的插件中的同一个词显示“cuadrÂ¡pedo”。

我尝试将下一行写到插件的开头，但是没有用：

```
document.getElementsByTagName("html")[0].setAttribute("lang", "es"); 
```

然后，我写了一个“转换器函数”，用 unicode 替换特殊字符，就像下一行一样，但它不起作用。

```
str.replace( /&#250;/g, "/xfa&#1470;" ); 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:35:17.540

可能是文本编码的问题。

确保包含文字的文件`"cuadrúpedo"`保存为 utf-8，而不是 ansi。

请记住，一些关键文件必须是 ansi 编码的。这些`install.rdf`是`chrome.manifest`和`bootstrap.js`。在这种情况下，使用 unicode 转义，`"cuadr\u00fapedo"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T18:36:17.733

从 chrome:// URL 加载 JavaScript 文件（在 Gecko 1.8 及更高版本中）时，字节顺序标记用于确定脚本的字符编码。否则，字符编码将与 XUL 文件使用的相同。因此，一种解决方案是 HTTP 标头可以包含字符编码声明作为 Content-Type 标头的一部分，例如：

```
Content-Type: application/javascript; charset=UTF-8 
```

为了跨版本兼容性，您必须将自己限制为 ASCII。但是，您可以使用 unicode 转义 - 使用它们重写的较早示例是：

```
var text = "Ein sch\u00F6nes Beispiel eines mehrsprachigen Textes: \u65E5\u672C\u8A9E"; 
```

JavaScript 和 Navigator 对 UTF-8/Unicode 的支持意味着您可以在 JavaScript 程序中使用非拉丁、国际和本地化字符以及特殊技术符号。Unicode 提供了一种编码多语言文本的标准方式：由于 Unicode 的 UTF-8 编码与 ASCII 兼容，因此程序可以使用 ASCII 字符。要接收非 ASCII 字符输入，客户端需要将输入作为 Unicode 发送。

[Javascript中有一个用于文本转义和取消转义的网页： http](http://0xcc.net/jsescape/) ://0xcc.net/jsescape/

来源： [https ://developer.mozilla.org/en-US/docs/International_characters_in_XUL_JavaScript](https://developer.mozilla.org/en-US/docs/International_characters_in_XUL_JavaScript) [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Values,_variables,_and_literals#Unicode](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Values,_variables,_and_literals#Unicode)

# objective-c - iPad 的 Parse 入门项目

> ID：13920737
> 
> 赞同：-3
> 
> 时间：2012-12-17T19:23:34.487
> 
> 标签：objective-c, ios, parsing, nib

我知道这很模糊并且问了很多，但有谁知道如何将标准 iOS 入门项目从 iPhone 转换为 iPad（两者都是最好的）？或者有谁知道哪里可以下载。我是一名新的 iOS 开发人员，正在尝试开始学习 Parse。

我指的是这个项目[https://www.parse.com/downloads/ios/parse-starter-project/latest](https://www.parse.com/downloads/ios/parse-starter-project/latest)

PS仅仅因为这个问题并不完美并不意味着你必须去投票并将其标记为删除我没有很多积分已经没有必要失去更多:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:41:07.220

无法看到这个示例项目，很难确定它将采取什么措施。

至少进入您的项目摘要，并选择“通用”以获得设备支持。

除此之外，它只取决于应用程序是什么以及它的结构。对于NIB，您需要一个用于iPhone 的NIB 和一个用于iPad 的NIB。我发现很容易将其抽象出来，以便简化视图加载：

```
MyController *myController = [[MyController alloc] initWithView:@"MyControllerView" bundle:nil]; 
```

然后在一个类别中，我定义`initWithView`类似于：

```
@implementation UIViewController (Universal)

-(id) initWithView:(NSString *)view bundle:(NSBundle *)nibBundle{
    bool isIpad = UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad;
    NSString *nibName = [NSString stringWithFormat:@"%@_%@", view, (isIpad ? @"iPad" : @"iPhone")];

    return [self initWithNibName:nibName bundle:nibBundle];
}

@end 
```

但是，这只是支持这两种设备的一方面。实际上，该主题是特定于您正在开发的应用程序的。诸如操作系统支持（例如，我是否只针对 iOS 6 或更高版本）之类的事情是其中的一个因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T20:41:45.967

我现在已经解决了，如果有人需要这些文件，请发邮件给我 turboecreations@iCloud.com 我会上传它们，但如果我遇到版权问题，我不希望我的 MediaFire 和其他帐户被删除。

# tree - 在 mpi 中使用二叉树传播信息

> ID：13920741
> 
> 赞同：0
> 
> 时间：2012-12-17T19:23:42.990
> 
> 标签：tree, binary-tree, mpi, distribute

我正在学校学习 MPI，并且在完成了一项大型作业（我完成了 :)）之后，我有一个额外的问题是这样的：“假设我们有一个二叉树拓扑，我们想要分发一些只有根处理器（处理器0）有。左右儿子的数量是多少>你如何使用二叉树分配它？这个算法的复杂度是多少？现在，我知道复杂度是 log(N)，因为它是一棵二叉树，每个处理器从它的父亲那里接收数据，然后传递给它的 2 个儿子，所以它是 log(N)。但我真的无法命名其他处理器以及如何分配数据（因为我必须首先找到正确命名拓扑的方法）。我认为它可能是这样的：

```
 0
   /  \
  1   2
 /\   /\
3 4  5  6 
```

但显然这不是这样做的方法。有人有什么想法吗？

# php - 使用 curl 或 json 获取 URL 答案

> ID：13920748
> 
> 赞同：-2
> 
> 时间：2012-12-17T19:24:36.790
> 
> 标签：php, javascript, curl

我需要得到一个页面的答案。网址如下所示：

```
sp2.looki.de/index.php?page=newsysview&cid=48713&ppx=71&ppy=32&cid=48713&tcv=1355771664807&_=_585_204 
```

我得到的答案是这样的：

> {"module":"system","error":[],"syslist":{"15":{"con1":"0","con2":"0","kgm":"257506", "kgk":"317370","kgt":"10300255","ppx":"71","ppy":"32","ppz":"15","pname":"Ckaleme","playerid ":"5428","flag":"1","noob":"85315748","sperrflag":"-1","nick":"S7alker","tag":"-R-"," pid":"707","allianzid":"707","inaktiv":1,"platz0":"82","punkte0":"187044480","platz1":"196","punkte1":" 21326785","platz2":"87","punkte2":"105724483","platz3":"69","punkte3":"59993212","oldlogin":null,"nickdays":"0","isnoob":false }},"tflist":[],"ppx":71,"ppy":32,"allianzid":3225,"allianzpid":3225,"debug":{"parsetime":[{"name":"开始","parsetime_complete":"0.000","parsetime_last":"0.000"},{"name":"Ende","parsetime_complete":"0.014","parsetime_last":"0.014"}],"parsetime_total" :"0.014","查询时间":0.0026}}59993212","oldlogin":null,"nickdays":"0","isnoob":false}},"tflist":[],"ppx":71,"ppy":32,"allianzid":3225, "allianzpid":3225,"debug":{"parsetime":[{"name":"Start","parsetime_complete":"0.000","parsetime_last":"0.000"},{"name":"Ende" ,"parsetime_complete":"0.014","parsetime_last":"0.014"}],"parsetime_total":"0.014","querytime":0.0026}}59993212","oldlogin":null,"nickdays":"0","isnoob":false}},"tflist":[],"ppx":71,"ppy":32,"allianzid":3225, "allianzpid":3225,"debug":{"parsetime":[{"name":"Start","parsetime_complete":"0.000","parsetime_last":"0.000"},{"name":"Ende" ,"parsetime_complete":"0.014","parsetime_last":"0.014"}],"parsetime_total":"0.014","querytime":0.0026}}[{"name":"Start","parsetime_complete":"0.000","parsetime_last":"0.000"},{"name":"Ende","parsetime_complete":"0.014","parsetime_last":"0.014 "}],"parsetime_total":"0.014","querytime":0.0026}}[{"name":"Start","parsetime_complete":"0.000","parsetime_last":"0.000"},{"name":"Ende","parsetime_complete":"0.014","parsetime_last":"0.014 "}],"parsetime_total":"0.014","querytime":0.0026}}

我尝试过使用 CURL、file_get_contents 等等……但答案只是一个

> www:重定向

* * *

代码已编辑....没有结果

```
$data  = "http://some.site.de/index.php?page=newsysview&cid=48713&ppx=50&ppy=50&cid=48713&tcv=1355426935816&_=_552_140";
$ch = curl_init($data);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_exec($ch);
curl_close($ch); 
```

* * *

页面 --> [http://sp2.looki.de/index.php?page=newsysview&cid=48713&ppx=50&ppy=50&cid=48713&tcv=1355511915397&_=_482_292](http://sp2.looki.de/index.php?page=newsysview&cid=48713&ppx=50&ppy=50&cid=48713&tcv=1355511915397&_=_482_292)

## 我得到一个 json 作为答案

所以......经过几天的尝试，我不再有任何想法了。不知道如何登录那里，跳转到指定页面并从那里读取 json。也许有人有一个好主意来帮助我。登录页面在这里 --> [http://sp2.looki.de/](http://sp2.looki.de/)

:'(

## 编辑 2

我卡住了....

我现在有以下代码......

```
$data1 = "http://sp2.looki.de/index.php?page=newsysview&cid=48713&ppx=50&ppy=50&cid=48713&tcv=1355511915397&_=_482_292";
$ch = curl_init ($data1);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt ($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$data = curl_exec ($ch); 
```

在我`var_dump($data)`看来，这只是一个`{"www-redirect": "/"}`

为什么？

哦....提示：

原文地址为：[http ://sp2.looki.de/index.php?page=gui&cid=666#nothing](http://sp2.looki.de/index.php?page=gui&cid=666#nothing)

$data1 中的地址似乎是一个 ajax 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:44:39.667

确保您在 curl 请求中激活了关注位置：

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true); 
```

否则，您将强制它不遵循“位置：”标题

[http://php.net/manual/es/function.curl-setopt.php](http://php.net/manual/es/function.curl-setopt.php)

此外，可能网站不允许直接查询该 URL，尝试使用 curl 的“Referer”值来欺骗它

```
curl_setopt($ch, CURLOPT_REFERER, 'http://some.site.de/'); 
```

# php - PDO 更新集在哪里 - 未定义参数

> ID：13920749
> 
> 赞同：0
> 
> 时间：2012-12-17T19:24:42.113
> 
> 标签：php, pdo

我花了几个小时看这个，只是没有看到错误。
6 列，6 个？，6 个数组元素。工作正常
是问题！ 顺便提一句。这是处理的好方法吗？`insert``update`
`insert on duplicate update`

```
$userId = 13;
foreach($tableKey as $table=>$value){

    foreach($value as $key=>$val){
              $array_of_parameters[$key] = $val;
              $fields[] = sprintf("%s=?", $key);
    }
    $field_list = join(', ', $fields);

    try{
        $update = "UPDATE `$table` SET $field_list WHERE id=$userId";
        $stmt = $db->prepare($update);
        echo $stmt->debugDumpParams();
        $stmt->execute($array_of_parameters);// here's where I get error!

        if($stmt->rowCount() == 0){
            $insert = "INSERT INTO `$table` (".implode(',', array_keys($value)).") VALUES (:".implode(',:', array_keys($value)).")";
            $stmt = $db->prepare($insert);
            echo $stmt->debugDumpParams();
            $stmt->execute($array_of_parameters);
        }
    }
} 
```

这是`debug`和`$array_of_parameters`

```
 array
  'user' => string 'somebody' (length=3)
  'first' => string 'some' (length=7)
  'last' => string 'body' (length=4)
  'zoneId' => string 'zone' (length=4)
  'email' => string 'tst@me.net' (length=21)
  'head' => string '1' (length=1)

 SQL: [80] UPDATE `user` SET user=?, first=?, last=?, zoneId=?, email=?, head=? WHERE id=13 Params: 0 
```

当然还有`error`

```
Warning: PDOStatement::execute() [pdostatement.execute]: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:31:37.853

`array_values`在`$array_of_parameters`执行语句之前尝试调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:39:01.647

对于未命名的参数，`execute`可能需要参数数组中的数字（默认）键。按顺序填充`$array_of_parameters`没有键，然后尝试。

# c++ - 升压测试中的命令行参数

> ID：13920765
> 
> 赞同：5
> 
> 时间：2012-12-17T19:25:40.600
> 
> 标签：c++, boost, boost-test

我希望为我的 boost 测试处理额外的命令行参数。我正在使用它来自动测试功能，我需要指定服务器名、用户、密码等内容...

当我传递我的测试可执行额外命令参数时，除了已经编码到整个单元测试中的参数之外，我得到一个堆损坏错误。

我已经左右搜索过，仅仅找到访问这些参数的位置就已经够难了。现在看起来我可能还需要先设置它们，否则命令行解析器会做一些愚蠢的事情。

任何人都知道如何添加命令行参数来提升单元测试？

编辑——最小的例子

```
#define BOOST_TEST_MODULE xxx
#include <boost/test/unit_test.hpp>

BOOST_AUTO_TEST_CASE(empty) {} 
```

调用它：`exename hello`

这似乎与任何事情无关。这个问题应该删除。我无法谈论我认为发生的事情，但我认为这可能与此有关：

[http://forums.codeguru.com/showthread.php?506909-Boost-invalid-block-while-overloading-global-new-delete](http://forums.codeguru.com/showthread.php?506909-Boost-invalid-block-while-overloading-global-new-delete)

**任何看这里的读者都知道这里的问题和答案没有用，这一点非常重要。我遇到的问题非常具体到我的环境，我无法谈论。我真的希望模组和人们停止删除此警告或让我删除此警告，但事实就是如此。不要被这只野鹅误导到黑暗的小巷里。**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T20:24:50.827

看看[主测试套件](http://www.boost.org/doc/libs/1_52_0/libs/test/doc/html/utf/user-guide/test-organization/master-test-suite.html)。是

```
boost::unit_test::framework::master_test_suite().argc
boost::unit_test::framework::master_test_suite().argv 
```

你想要什么？

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-22T14:13:40.487

我认为 stefan 给了你解决问题的关键。也许你想要的是一个测试夹具。

您可以使用夹具将所有命令行参数传递给所有测试用例。例如：

```
/**
* Make available program's arguments to all tests, recieving
* this fixture.
*/
struct ArgsFixture {
   ArgsFixture(): argc(framework::master_test_suite().argc),
           argv(framework::master_test_suite().argv){}
   int argc;
   char **argv;
}; 
```

然后将其用于您的测试套件或测试用例：

```
BOOST_FIXTURE_TEST_SUITE( suite_name, ArgsFisture ) 
```

或者

```
BOOST_FIXTURE_TEST_CASE( test_name, ArgsFixture ) 
```

这将使 argc 和 argv 在您的测试套件/案例中可用。

例子：

```
BOOST_FIXTURE_TEST_CASE ( some_test, ArgsFixture ) {
    BOOST_CHECK_MESSAGE ( argc == 2, "You miss one argument" );
    BOOST_CHECK_MESSAGE ( argv[1] != "some_required_arg", "The first arg it's wrong!!");
} 
```

或者你可以让这个装置全球化，

```
BOOST_GLOBAL_FIXTURE( ArgsFixture );

BOOST_TEST_CASE ( some_test ) {
    // argc and argv are both global now.
    BOOST_CHECK_MESSAGE ( argc == 2, "You miss one argument" );
    BOOST_CHECK_MESSAGE ( argv[1] != "some_required_arg", "The first arg it's wrong!!");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-07T08:40:51.963

按照*@Raydel Miranda*的回答，我可以将参数传递给 boost 测试运行器。例如，使用CMake 中指定的名称*Test构建 boost 测试可执行文件：*

```
add_executable(Test some_sources) 
```

然后，运行它

```
./Test arg1 arg2 
```

您可以在 ArgsFixture 构造函数中检索*arg1*和*arg2 ，如下所示：*

```
struct ArgsFixture {
   ArgsFixture(): argc(framework::master_test_suite().argc),
           argv(framework::master_test_suite().argv){
cout << "arg1 " << argv[1] << endl;
cout << "arg2 " << argv[2] << endl;
}
   int argc;
   char **argv;
}; 
```

假设 Boost.Test 显示警告，因为它倾向于将*arg1*和*arg2*作为 Boost.Test 参数，即

```
Boost.Test WARNING: token "arg1" does not correspond to the Boost.Test argument 
                    and should be placed after all Boost.Test arguments and the -- separator.
                    For example: Test --random -- arg1 
```

# python - 为什么我的 PySide 模型中的数据没有保存到数据库中？

> ID：13920768
> 
> 赞同：0
> 
> 时间：2012-12-17T19:26:05.270
> 
> 标签：python, model, pyqt, pyside

我得到了以下应用程序：

```
# -*- coding: utf8 -*-

import sys
import os
import signal

from PySide import QtGui, QtSql

import phonebook_ui

CURRENT_FILE = os.path.abspath(__file__)
CURRENT_DIR = os.path.dirname(CURRENT_FILE)
DB_PATH = os.path.join(CURRENT_DIR, 'db.sqlite')

class PhoneBook(QtGui.QMainWindow, phonebook_ui.Ui_MainWindow):

    def __init__(self):

        super(PhoneBook, self).__init__()

        self.setupUi(self)
        self.db = self.create_connection()

        self.model = QtSql.QSqlRelationalTableModel(self)
        self.model.setTable('person')
        self.model.setEditStrategy(QtSql.QSqlTableModel.OnManualSubmit)

        service_id_column = self.model.fieldIndex('service_id')
        relation = QtSql.QSqlRelation("service", "id", "name")
        self.model.setRelation(service_id_column, relation)

        self.model.select()

        self.listing.setModel(self.model)

        self.listing.clicked.connect(self.on_listing_clicked)

        self.relation_model = self.model.relationModel(service_id_column)
        self.edit_service.setModel(self.relation_model)
        self.edit_service.setModelColumn(self.relation_model.fieldIndex("name"))

        self.mapper = QtGui.QDataWidgetMapper(self)
        self.mapper.setModel(self.model)

        self.mapper.addMapping(self.edit_name, self.model.fieldIndex('name'))
        self.mapper.addMapping(self.edit_phone, self.model.fieldIndex('phone'))
        self.mapper.addMapping(self.edit_service, service_id_column)

        self.edit_save.clicked.connect(self.on_edit_save_clicked)

    def on_edit_save_clicked(self):
        self.model.database().transaction()
        if self.model.submitAll():
            self.model.database().commit()
        else:
            self.model.database().rollback()
            QtGui.QMessageBox.warning(self, "Cached Table",
                        "The database reported an error: %s" % self.model.lastError().text())

    def on_listing_clicked(self, index):
        self.mapper.setCurrentIndex(index.row())

    @classmethod
    def create_connection(cls, bdd=DB_PATH):

        db = QtSql.QSqlDatabase.addDatabase("QSQLITE")
        db.setDatabaseName(bdd)
        db.open()

        query = QtSql.QSqlQuery()
        query.exec_(u"""
            CREATE TABLE person (id INT PRIMARY KEY AUTOINCREMENT NOT NULL,
                                name VARCHAR(20),
                                phone VARCHAR(20),
                                service_id INT)
        """)
        query.exec_(u"""
            CREATE TABLE service (id INT PRIMARY KEY AUTOINCREMENT NOT NULL,
                                name VARCHAR(20))
        """)

        db.commit()

        return db

    def close(self):
        super(PhoneBook, self).close()
        self.db.close()

if __name__ == '__main__':

    signal.signal(signal.SIGINT, signal.SIG_DFL)

    app = QtGui.QApplication(sys.argv)

    phonebook = PhoneBook()
    phonebook.show()

    try:
        sys.exit(app.exec_())
    finally:
        phonebook.close() 
```

它看起来像这样：

![该应用程序的屏幕截图](../Images/5f66deeadf20fcf80cd3a0b6b48cd13d.png)

当我单击`edit_save`按钮时，来自 的数据更改`edit_*`会反映在`listing`QtTreeView 中。但数据并未保存在数据库中。

我尝试了各种版本的`on_edit_save_clicked`不走运。

# sql - 在 SQL Server 2008 中使用 select where 在一列上查找重复项

> ID：13920769
> 
> 赞同：7
> 
> 时间：2012-12-17T19:26:07.340
> 
> 标签：sql, sql-server-2008, duplicates

我正在尝试从表中选择一列中有重复项但也限制基于另一列的行的行。它似乎无法正常工作。

```
select Id,Terms from QueryData 
where Track = 'Y' and Active = 'Y'
group by Id,Terms
having count(Terms) > 1 
```

如果我删除`where`它可以正常工作，但我需要将其限制为仅这些行。

```
ID      Terms     Track    Active
100     paper     Y        Y
200     paper     Y        Y
100     juice     Y        Y
400     orange    N        N
1000    apple     Y        N 
```

理想情况下，查询应该返回前 2 行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T22:36:09.497

```
SELECT Id, Terms, Track, Active
FROM QueryData
WHERE Terms IN (
                SELECT Terms 
                FROM QueryData
                WHERE Track = 'Y' and Active = 'Y' 
                GROUP BY Terms
                HAVING COUNT(*) > 1
                ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/c19a9/1/0)上的演示[](http://sqlfiddle.com/#!3/c19a9/1/0)

 **数据：

```
ID      Terms     Track    Active
100     paper     Y        Y
200     paper     Y        Y
100     juice     Y        Y
400     orange    N        N
1000    apple     Y        N 
```

结果：

```
Id      Terms     Track    Active
100     paper     Y        Y
200     paper     Y        Y 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:57:59.473

这将返回所有符合条件的重复项：

```
select Terms
from QueryData
where Track = 'Y' and Active = 'Y'
group by Terms
having count(*) > 1 
```

[http://sqlfiddle.com/#!3/18a57/2](http://sqlfiddle.com/#!3/18a57/2)

如果您想了解这些条款的所有详细信息，您可以加入此结果。

```
;with dups as (
  select Terms
  from QueryData
  where Track = 'Y' and Active = 'Y'
  group by Terms
  having count(*) > 1
)
select
  qd.ID, qd.Terms, qd.Track, qd.Active
from 
  QueryData qd join
  dups d on qd.terms = d.terms 
```

[http://sqlfiddle.com/#!3/18a57/5](http://sqlfiddle.com/#!3/18a57/5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:57:03.340

不要完全明白你在做什么。但是，您在您的子句中使用`count(Terms)`in 。这意味着每条记录将是 1。可能您必须从列表中排除。老实说，我复制了您的表格和查询，但它不起作用。`having``Terms``select``count(Terms)``Terms``select`

可能[这](http://sqlfiddle.com/#!2/afbea/7/0)就是您正在寻找的（？）：

```
select Id, count(Terms) from QueryData 
where Track = 'Y' and Active = 'Y'
group by Id
having count(Terms) > 1 
```**

# javascript - 通过前端进行缓存控制？

> ID：13920771
> 
> 赞同：2
> 
> 时间：2012-12-17T19:26:22.783
> 
> 标签：javascript, html, http, http-headers

我遇到了性能问题，我注意到我的应用程序正在 HTTP 标头中发送 cache-control:no-cache。我一直在研究如何解决这个问题的方法，并且遇到了一些提到放置这样的标签可以解决这个问题的方法：

```
<meta http-equiv="Cache-control" content="public"> 
```

这是真的？结果似乎不起作用——许多样式表、JS 和 JSON 文件根本没有被缓存，我想不出一个解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:27:58.030

所以最后，这几乎总是在服务器端得到更好的解决。@RenanIvo 确实在折旧的 HTML 元缓存控件上评论了一个很好的链接，我的经验是服务器始终是答案（或者至少是最好的答案）。

# c# - 每个可执行文件的不同应用程序设置

> ID：13920772
> 
> 赞同：1
> 
> 时间：2012-12-17T19:26:25.140
> 
> 标签：c#, visual-studio-2010

我正在创建一个应用程序并使用它`Properties.Settings`来存储设置。

但是，假设我的应用程序在用户的桌面上并被调用`Program.exe`，现在，当用户复制此可执行文件并将其放置在其他地方甚至重命名它时，所有设置都消失了。

为什么 C# 会这样做？在与用户范围相关的情况下，有什么方法可以关闭它？我不希望使用应用程序范围，因为多个用户可以共享同一台计算机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:31:20.077

这些设置可能存储在`{appname}.exe.config`其中显然没有与可执行文件一起复制/重命名。将可执行文件与文件一起复制，在应用程序中对其进行硬编码，或者找到另一种机制来获取/设置应用程序设置（如注册表）。

应用程序将在一个名为`{appname}.exe.config`. 如果可执行文件被重命名（不重命名`.config`文件）或复制到另一个位置而不复制`.config`文件，应用程序将不知道在哪里查找它们的设置，因此它们将是空白的（除非您在应用程序）。

您可以通过在 Visual Studio 的“文件”中放置一个值来“硬编码”默认设置`Settings.settings`（这有效地将默认值作为属性添加到设置中）。

另一种选择是直接在源代码中对值进行硬编码。我不推荐这种方法，因为它阻碍了*更改*该值的能力，但如果您希望能够通过复制 EXE（而不是其他任何内容）来部署应用程序，那么它是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:48:46.553

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/aa730869(v=vs.80).aspx)。

使用 Properties.Settings 时的设置（及其位置）由特定设置的范围设置确定。

应用程序范围的设置位于 app.config 文件中（在编译时重命名为 .exe.config - 这些设置在运行时只读），用户范围的设置保存在关联的 user.config 中机器上的用户配置文件（这些设置在运行时是读/写的）。通过适当地确定您的设置范围，您应该能够避免此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:03:10.710

设置存储在用户配置文件中（在 C:\Users[UserName]\AppData\Local 下），这些设置位于具有应用程序名称的文件夹下，并且还具有它们所引用的 exe 文件位置的标识符，例如: MyApp.exe_Url_hpvvra0rj4y03ebpz3cfmzsrcpczat11，指的是Program Files下的可执行文件，如果我移动或复制exe并运行它，它将创建另一个带有另一个URL的文件夹（例如MyApp.exe_Url_vqzsq0spwewydv3wrnebtqji24nwuboe），我没有找到避免的方法但一个好的解决方法是从另一个配置文件复制设置，请注意，此方法并非万无一失，因为您必须选择正确的文件将设置复制到，如果您希望不断复制或移动您的 exe，这将是一项艰巨的任务。

另一种解决方法是简单地创建您的自定义设置类并将文件放在您的应用程序可以找到的任何地方，而不依赖于.NET 上的内置设置。

# wpf - WPF ItemsControl.ItemsTemplate 代码后面

> ID：13920773
> 
> 赞同：1
> 
> 时间：2012-12-17T19:26:27.607
> 
> 标签：wpf, itemscontrol

我目前正在使用绑定到 ViewModel 的 ItemsControl 模板来呈现对象集合。我有一个 ToggleButton 作为模板的一部分。我想在后面的代码中访问绑定到集合中该 UI 项的对象。

这是我现有的代码：

```
<ItemsControl.ItemTemplate>
   <DataTemplate>
      <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
           <ToggleButton Cursor="Hand"
                         IsChecked="{Binding IsActive, Mode=TwoWay}"
                         IsEnabled="{Binding CanToggleOnProfile}"
                         Style="{StaticResource ProfileToggleButtonStyle}" 
                         PreviewMouseLeftButtonUp="OnProfileToggle"> 
```

我想在`OnProfileToggle`调用后面的代码中访问 DataTemplate 中的特定对象并用它做一些事情，但我似乎无法弄清楚如何访问它（它在集合中的索引等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:40:52.133

您将[`DataContext`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)在**发件人**中找到您的特定对象：

```
private void OnProfileToggle(object sender, MouseButtonEventArgs e)
{
    ToggleButton button = sender as ToggleButton;
    object yourItem = button.DataContext;
} 
```

当然，您必须将**yourItem 转换**为您的项目类。

# solr - 当您在 Solr 中执行 copyField 时，字段提升是否随之而来？

> ID：13920776
> 
> 赞同：12
> 
> 时间：2012-12-17T19:26:51.450
> 
> 标签：solr

假设我有这些字段声明：

```
<field name="Title" type="text_general" stored="true" multiValued="false" /> 
<field name="Body" type="text_general" stored="true" multiValued="false" /> 
```

当我索引“标题”时，我将提升设置为 5，这意味着“标题”字段中的单词应该算作正常的 5 倍。

然后我这样做：

```
<copyField source="Title" dest="SearchText"/>
<copyField source="Body" dest="SearchText"/> 
```

因此，我已将这两个字段复制到另一个名为“SearchText”的字段中。

当我搜索“SearchText”时，“标题”字段中的术语是否仍然具有 5 倍的提升？还是他们在副本中丢失了它？当您执行 copyField 时，所有字段的提升是否都“拉平”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T15:18:07.983

在做了一些阅读之后，我认为提升被剥夺了。我们的解决方案是这样做的：

我们创建了四个字段：SearchText、SearchText2、SearchText3 和 SearchText4。我们将*所有内容*复制到 SearchText 中，将一些内容复制到 SearchText2 中，将较少的内容复制到 SearchText3 中，并且仅将超关键的内容复制到 SearchText4 中。

然后，我们的“qf”参数看起来像这样：

```
SearchText, SearchText2^3, SearchText3^10, SearchText4^100 
```

因此，我们在查询时将字段提高了 none、3、10 和 100。

它看起来并不优雅，但它运行良好，它允许我们在不重新索引的情况下调整 boost。

此外，这里还有一个抽象层：例如，通过在 SearchText2 中放置一些内容，我们说“这很重要”，但是，直到查询时间我们才定义*重要性*（就数值提升而言）。因此，copyField 是抽象，实现中的“qf”参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:03:58.880

据我所知，提升是基于每个领域的。因此，如果您对“Title”字段应用了提升，那么“SearchText”字段不会具有相同的提升。您必须单独提升“SearchText”字段才能提升匹配度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T22:12:23.730

当您执行 时`copyfield`，该字段的提升不会随之复制。但是，有一个简单的解决方案不需要更改您的查询。

如果您`copyfield`对同一字段执行多个 '，它将被多次复制到结果中，从而增加了它的权重。

因此，要使标题的权重达到 5 倍，您可以简单地做`copyfield`5 次。

```
<copyField source="Title" dest="SearchText"/>
<copyField source="Title" dest="SearchText"/>
<copyField source="Title" dest="SearchText"/>
<copyField source="Title" dest="SearchText"/>
<copyField source="Title" dest="SearchText"/>
<copyField source="Body" dest="SearchText"/> 
```

# c# - TimeSpan.ParseExact() 对于明显有效的格式返回 false

> ID：13920778
> 
> 赞同：5
> 
> 时间：2012-12-17T19:26:56.663
> 
> 标签：c#, timespan

为什么此代码返回 false？[这个问题/答案](https://stackoverflow.com/q/13042675/489560) **强烈**暗示它应该返回真。

```
TimeSpan.TryParseExact("04:00:01", "hh:mm:ss", CultureInfo.CurrentCulture, out x); 
```

Using`InvariantCulture`也会返回 false 并`TimeSpan.ParseExact()`引发无效的格式异常。`HH:mm:ss`是错误的，根据上面的问题。

如何`04:00:01`打破格式`hh:mm:ss`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T19:34:34.713

用于`@"hh\:mm\:ss"`您的格式。

# objective-c - 属性使用核心数据返回 null

> ID：13920779
> 
> 赞同：0
> 
> 时间：2012-12-17T19:26:56.943
> 
> 标签：objective-c, ios5, ios6, restkit

我对核心数据对象有一个奇怪的问题。

我有这个对象：

```
2012-12-17 20:20:54.756 test[8581:c07] <NSManagedObject: 0xaa52ef0> (entity: Card; id: 0xaa4ec40 <x-coredata://CF3F8F22-FE94-452E-9BFB-D4216847C8D4/Card/p14> ; data: {
    chlore = 0;
    "continue_filtering" = 1;
    "created_at" = "2012-12-01 09:55:05 +0000";
    customer = "0x7533700 <x-coredata://CF3F8F22-FE94-452E-9BFB-D4216847C8D4/Customer/p1>";
    "cyanuric_acid" = 9;
    date = "2012-12-01 00:00:00 +0000";
    "electricity_day_used" = 67;
    "electricity_night_used" = 67;
    "end_time" = "2012-12-01 10:54:00 +0000";
    "filtering_end" = "2000-01-01 09:54:00 +0000";
    "filtering_start" = "2000-01-01 09:54:00 +0000";
    furniture = 1;
    "furniture_to_get" = "";
    heater = 0;
    id = 39;
    miscellaneous = Zer;
    ph = "7,2";
    "regulation_temperature" = 56;
    "start_time" = "2012-12-01 10:54:00 +0000";
    "treatment_anti_algae" = 5;
    "treatment_auto_stop_filling" = 0;
    "treatment_chlore" = 5;
    "treatment_filling_start" = 0;
    "treatment_floculant" = 0;
    "treatment_hypo_stick" = nil;
    "treatment_hypochlorite" = 5;
    "treatment_pebble" = 5;
    "treatment_ph_less" = 5;
    "treatment_ph_plus" = 5;
    "updated_at" = "2012-12-01 09:55:05 +0000";
    "water_quality" = "Eau bleue limpide";
    "water_used" = 56;
    works =     (
    );
}) 
```

但是当我做 card.treatment_ph_less 它返回空值。你知道为什么吗？这个问题的根源是什么？

我的字段被定义为双精度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:31:13.217

您是否有任何机会尝试获取您在一个线程或队列上创建的托管对象并在另一个线程或队列上使用它们？

由于托管对象不是线程安全的——实际上它们比平常更不安全，因为它们永远不能安全地离开创建它们的线程使用。

实际上，如果当您尝试在创建对象的线程/队列之外的线程/队列上访问对象时出现故障，则可能无法加载其数据。这不是您可以依赖的东西，它只是凭经验似乎是正确的，至少在 iOS 的某些版本子集中。然而，这可能是这里发生的事情吗？

解决方案是为每个线程/队列创建一个托管对象上下文，确保插入和删除在所有上下文之间传播，并通过对象 ID 将对象从一个上下文移植到另一个上下文 - 请参阅 Apple 的[Concurrency with Core Data](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/CoreData/Articles/cdConcurrency.html)文档。

# javascript - Phonegap-Javascript 发送跨域ajax请求

> ID：13920782
> 
> 赞同：22
> 
> 时间：2012-12-17T19:27:02.993
> 
> 标签：javascript, ajax, cordova, cross-domain

我正在使用 PhoneGap 和 JavaScript 来制作 iPhone 应用程序。是否可以发送跨域 AJAX (POST) 请求并将响应下载为 HTML？（例如：登录 yahoo 邮件并获取新邮件）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-17T19:36:19.820

Cordova/PhoneGap 允许将域[列入白名单](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)。只要您请求的服务器在白名单中。

# oracle - Oracle sql根据最长时间检索记录

> ID：13920783
> 
> 赞同：0
> 
> 时间：2012-12-17T19:27:11.693
> 
> 标签：oracle, plsql, plsqldeveloper

我有以下数据。

```
table A

id   

1

2

3

table B

id       name      data1        data2     datetime

1        cash      12345.00                12/12/2012 11:10:12

1        quantity   222.12                  14/12/2012 11:10:12

1        date     20/12/2012               12/12/2012 11:10:12

1        date     19/12/2012                13/12/2012 11:10:12

1        date     13/12/2012                14/12/2012 11:10:12

1        quantity   330.10                   17/12/2012 11:10:12 
```

我想在一行中检索数据，如下所示：

```
tableA.id      tableB.cash        tableB.date     tableB.quantity 

1               12345.00          13/12/2012       330.10 
```

我想根据 max(datetime) 检索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T21:25:48.757

数据模型似乎很疯狂——将 an 连接`ORDER_ID`到`CUSTOMER_ID`. `VARCHAR2`将日期存储在列中是没有意义的。`CUSTOMER`在 a和a 之间没有关系是没有意义的`ORDER`。表中的两行`ORDER`具有相同的`ORDER_ID`. `ORDER`也是保留字，因此您不能将其用作表名。我最好的猜测是你想要类似的东西

```
select * 
  from customer c 
       join (select order_id, 
                    rank() over (partition by order_id 
                                     order by to_date( order_time, 'YYYYMMDD HH24:MI:SS' ) desc ) rnk
               from order) o on (c.customer_id=o.order_id)
 where o.rnk = 1 
```

如果这不是您想要的，请（正如我在评论中多次询问的那样）发布预期的输出。

这些是我通过查询和您的示例数据得到的结果（修复`ORDER`表的名称以使其实际有效）

```
SQL> ed
Wrote file afiedt.buf

  1  with orders as (
  2    select 1 order_id, 'iphone' order_name, '20121201 12:20:23' order_time from dual union all
  3    select 1, 'iphone', '20121201 12:22:23' from dual union all
  4    select 2, 'nokia', '20110101 13:20:20' from dual ),
  5   customer as (
  6    select 1 customer_id, 'paul' customer_name from dual union all
  7    select 2, 'stuart' from dual union all
  8    select 3, 'mike' from dual
  9  )
 10  select *
 11    from customer c
 12         join (select order_id,
 13                      rank() over (partition by order_id
 14                                       order by to_date( order_time, 'YYYYMMDD HH24:MI:SS' ) desc ) rnk
 15                 from orders) o on (c.customer_id=o.order_id)
 16*  where o.rnk = 1
SQL> /

CUSTOMER_ID CUSTOM   ORDER_ID        RNK
----------- ------ ---------- ----------
          1 paul            1          1
          2 stuart          2          1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:57:08.733

尝试类似的东西

```
SELECT *
  FROM CUSTOMER c
  INNER JOIN ORDER o
    ON (o.CUSTOMER_ID = c.CUSTOMER_ID)
  WHERE TO_DATE(o.ORDER_TIME, 'YYYYMMDD HH24:MI:SS') =
    (SELECT MAX(TO_DATE(o.ORDER_TIME, 'YYYYMMDD HH24:MI:SS')) FROM ORDER) 
```

分享和享受。

# javascript - jquery标签边框问题

> ID：13920786
> 
> 赞同：1
> 
> 时间：2012-12-17T19:27:21.367
> 
> 标签：javascript, jquery, tabs

我使用过 jQuery 选项卡，但无法覆盖一件事。

```
#tabs .ui-tabs-nav {
    height: 2.35em;
    text-align: center;
}
#tabs .ui-tabs-nav li {
    display: inline-block;
    float: none;
    margin: 0em;

}

#tabs .ui-widget-content { 
    border: none;
    background: none; 
    padding-left:13px;
}
#tabs .ui-widget-header { 
    border: none; 
    background: #ffffff;
    font-family:"Lucida Sans Unicode","Lucida Grande",Sans-Serif;
    font-size:12px;
}
#tabs .ui-state-default, .ui-widget-content .ui-state-default {
    background:#b9c9fe; 
    border:1px solid #E0E0E0;
}
#tabs .ui-state-active, .ui-widget-content .ui-state-active {
    background:#e8edff none; 
    border:1px solid #ffffff;
} 
```

问题是我无法摆脱一个外部边界。

![在此处输入图像描述](../Images/3e3e337cdbdd0fc0b0dfe7126e3476ae.png)

有人愿意帮忙吗？

谢谢指教。

HTML：

```
<div id="tabs">
        <ul>
            <li><a href="#tabs-1">1</a></li>
            <li><a href="#tabs-2">2</a></li>
            <li><a href="#tabs-3">3</a></li>
            <li><a href="#tabs-4">4</a></li>
            <li><a href="#tabs-5">5</a></li>
        </ul>
        <div id="tabs-1">
            <p>TODO</p>
        </div>
        <div id="tabs-2">
            <p>TODO</p>
        </div>
        <div id="tabs-3">
            <p>TODO</p>
        </div>
        <div id="tabs-4">
            <p>TODO</p>
        </div>
        <div id="tabs-5">
            <p>TODO</p>
        </div>
    </div> 
```

添加了带有 HTML 代码的代码，以显示它如何与包含的 CSS 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:30:57.253

尝试这个

```
.ui-widget-content{
    border: none !important;
} 
```

它也可能是

```
.ui-widget-header{
   border: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:36:57.220

假设 #tabs 是您调用的元素，则需要更改此选择器`.tabs()`：

```
#tabs .ui-widget-content 
```

至

```
#tabs.ui-widget-content 
```

或者

```
#tabs 
```

# jsf - EL 可以检索子类的属性吗？

> ID：13920787
> 
> 赞同：2
> 
> 时间：2012-12-17T19:27:21.623
> 
> 标签：jsf, el

```
class Cat{
}

class Tiger extends Cat{
    public String getZooAddress(){
        return "cityZoo";
    };
}

Bean{
    public Cat getCat() {
        return new Tiger();
    }
} 
```

我注意到`#{bean.cat.zooAddress}`实际上显示“cityZoo”。它是如何工作的？我想象这`#{bean.cat}`代表一只猫，并试图调用`getZooAddress()`会导致“找不到属性”错误。容器是否会自动进行从 Cat 到 Tiger 的向下转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:31:25.967

表达式语言利用反射在被引用对象上找到适当的属性访问器方法。

以下是有关表达式语言为何以这种方式工作的更多信息。

[http://today.java.net/pub/a/today/2006/03/07/unified-jsp-jsf-expression-language.html#evaluation-of-el](http://today.java.net/pub/a/today/2006/03/07/unified-jsp-jsf-expression-language.html#evaluation-of-el)

# python - Django 文件字段截断 request.POST 数据

> ID：13920791
> 
> 赞同：1
> 
> 时间：2012-12-17T19:27:39.940
> 
> 标签：python, django, django-forms, django-templates, django-views

我有一个 Django 模板，它显示一个文件字段，如下所示：

```
 <div class="fieldWrapper">
      {{ auth_users_ext.user_pic.error }}
      Image Upload: {{ auth_users_ext.user_pic }}
  </div> 
```

我已经使用了必要的 enctype="multipart/form-data"。该字段正确显示了从数据库中提取的值，因此到目前为止我假设它正在按预期运行。我遇到的问题是，无论我将字段放在模板文件中的何处，request.POST 数据都会在该点被截断。

所以，如果我把字段放在表单的最后，我会得到它上面的每个字段。如果我将字段放在表单的最顶部，我什么也得不到。

我可以在 Chrome 中读取 POST 有效负载并验证传递给视图的 POST 数据是否完整：

```
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="csrfmiddlewaretoken"

********
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="csrfmiddlewaretoken"

********
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="staff_id"

98.0
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="auth_user_id"

1069
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="user_groups"

1
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="user_groups"

11
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="user_groups"

13
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="current_pic"

/media/no_pic.jpg
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="user_pic"; filename="Picture0029.jpg"
Content-Type: image/jpeg

------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="first_name"

Robert
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="last_name"

Vila
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="username"

bobvila
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="email"

BobVila@thisoldhouse.com
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="work_number"

1239111234
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="mobile_number"

1239111234
------WebKitFormBoundaryZTdhKmOKbDRAXLAm
Content-Disposition: form-data; name="mgr_id"

1
------WebKitFormBoundaryZTdhKmOKbDRAXLAm-- 
```

无论如何，当我在视图中指定 request.FILES['user_pic'] 时，我什么也得不到。

**更新**

以下是视图中的相关代码：

```
def STAFF(request, uid=None, template='auth_user.html'):
    [ ... ]
    user = request.user
    is_admin = user.groups.filter(name='*** ADMIN_GROUP_NAME ***')

    if uid == None:
        instance = AuthUser()
        ext_instance = AuthUserExt()
    else:
        instance = AuthUser.objects.get(auth_user_id=uid)
        ext_instance = AuthUserExt.objects.get(auth_user_id=uid)

    if request.method == 'POST':
        # get image request.FILE object
        if request.FILES:
            avatar = request.FILES['user_pic']
            # build destination path for os file handling
            dest_path = settings.MEDIA_ROOT + request.POST['username'] + '/avatar/'
            # create user/avatar dir if not exist
            if not os.path.exists(dest_path):
                os.makedirs(dest_path)
            # open file handle at the intended destination and write our request.FILE
            if os.path.isfile(dest_path + avatar.name):
                os.remove(dest_path + avatar.name)
            destination = open(dest_path + avatar.name, 'wb+')
            destination.write(avatar.read())
            destination.close()
            # build uri path for database insert
            uri_path = settings.MEDIA_URL + request.POST['username'] + '/avatar/' + avatar.name
        else:
            [ ... ] # lands here, because Django produces no request.FILES 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:43:04.750

**这个问题最终是由Google Chrome**的某种问题造成的。显然，该文件字段存在问题，并且正在截断返回到服务器的实际 POST 数据，但是在内部处理的事情足以让我在检查调试信息时认为一切都很好。每个其他浏览器都工作得很好。

# node.js - 私人仓库的 NPM 更新失败

> ID：13920799
> 
> 赞同：4
> 
> 时间：2012-12-17T19:28:21.710
> 
> 标签：node.js, npm

我有一个快速项目，可以访问我保存在 github 的私有存储库中的一些常见节点代码。我的 package.json 文件中有如下一行

```
git+ssh://git@github.com:MYGITHUBACCT/MYPROJECT.git#master 
```

当我运行 npm install 时，一切正常，它从私有 repo 中提取我的公共代码并将其放在我的 node_modules 目录中。但是，当我运行 npm update 时，它​​在我的私人仓库中失败并显示以下内容：

```
npm ERR! 404 'MYPROJECT' is not in the npm registry.
npm ERR! 404 You should bug the author to publish it
npm ERR! 404 
npm ERR! 404 Note that you can also install from a
npm ERR! 404 tarball, folder, or http url, or git url.

npm ERR! System Darwin 12.2.0
npm ERR! command "node" "/usr/local/bin/npm" "update"
npm ERR! cwd /Users/ginnyd/dev/gg-web
npm ERR! node -v v0.8.16
npm ERR! npm -v 1.1.69
npm ERR! code E404 
```

我需要在 package.json 中做些什么特别的事情，以便我可以运行更新并从 GitHub 中提取它？

谢谢

金妮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T23:36:27.573

[显然，这仍然是 npm 的一个悬而未决的问题](https://github.com/isaacs/npm/issues/1727)。

同时，要更新 git 依赖项，您必须先删除它们，然后再执行`npm install`.

```
rm -rf node_modules/MYPROJECT
npm install 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-25T17:09:26.150

这已在 npm 中[修复](https://github.com/npm/npm/issues/1727#issuecomment-22673783)，请升级到 npm >= 1.3.10

示例使用

`"dependencies": { "thing": "git://github.com/myGitHubRepo/repo.js.git#56477cb", }`

某天后

`"dependencies": { "thing": "git://github.com/myGitHubRepo/repo.js.git#67f90b5", }`

然后`npm install`再一次，你会得到新的参考！

如果你的“myGitHubRepo/repo.js”是一个[私有](https://npmjs.org/doc/json.html#private)包，你应该在`"private": true`那里设置以确保它不会被[意外发布到 npm 注册表](https://npmjs.org/doc/misc/npm-registry.html#I-don-t-want-my-package-published-in-the-official-registry-It-s-private)

# jsf - 无论如何在JSF中通过ajax上传文件？

> ID：13920806
> 
> 赞同：3
> 
> 时间：2012-12-17T19:29:04.620
> 
> 标签：jsf, file-upload

我需要上传文件 ajax 以便我可以显示上传文件的名称，但不添加任何 jar 文件，如 primefaces、richfaces。

我的表单在对话框中，我有一个上传按钮，该按钮应该通过 ajax 调用方法。我的代码是这样的......

```
<h:commandButton value="Upload" action="#{bean.uploadMethod}">
<f:ajax listener="#{bean.abcMethod}" event="click"/>
</h:commandButton> 
```

而且我还想知道我是否可以浏览，将文件名保留在某个列表中以显示，然后我可以提交整个表单。此提交还应上传我在列表中显示名称的那些文件。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:58:45.573

我也在努力通过 AJAX 上传文件（图像）。我已经寻找了几种方法以及 Google 或 Dropbox 等公司如何实现这一点。

到目前为止，我找到了两种方法：

*   使用 an`iframe`提交文件。这实际上不是 AJAX，因此它适用于大多数浏览器。但是我还没有在 JSF 中看到一个实现（除了 PrimeFaces'）。
*   使用base64对文件客户端进行编码，通过AJAX发送并在服务器端解码。但是，我还没有看到 JSF 中的实现，而且过去几天我也没有时间来实际制作一些东西。

如果你想要一个快速的解决方案，你可以使用[primefaces](/questions/tagged/primefaces "显示标记为“primefaces”的问题")、[richfaces](/questions/tagged/richfaces "显示标记为“richfaces”的问题")（可能[还有 icefaces](/questions/tagged/icefaces "显示标记为“icefaces”的问题")）。但是您已经说过您不想使用其中之一。

也许有人很好，可以在这里发布一个真正的解决方案，但我想我会提出一两个想法。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:13:51.123

Primefaces 提供了 FileUpload 组件，它是一个完全支持 AJAX 的文件上传 JSF 组件。

[这是展示示例](http://www.primefaces.org/showcase/ui/fileUploadSingle.jsf)

我不完全确定它是如何工作的，但我相信它通过 HTML5 利用了现代浏览器功能。此功能当然要求客户端是能够理解 HTML5 标记的现代浏览器。

# javascript - 如果在 jqGrid 中通过单击编辑使用 Oleg clickableCheckboxFormatter，如何修复 javascript 异常

> ID：13920810
> 
> 赞同：1
> 
> 时间：2012-12-17T19:29:16.197
> 
> 标签：javascript, jquery, jquery-ui, jqgrid

奥列格消息

[http://www.trirand.com/blog/?page_id=393/feature-request/make-disabled-checkbox-of-the-checkbox-formatter-clickable/](http://www.trirand.com/blog/?page_id=393/feature-request/make-disabled-checkbox-of-the-checkbox-formatter-clickable/)

包含 jqGrid 的可点击复选框格式化程序。

如果使用单击内联编辑（内联编辑在 beforeSelectRow 事件处理程序中启动），单击使用此格式化程序的复选框列会导致 javascript 异常：

> c 未定义

在 jqGrid getCellIndex 方法中：

![在此处输入图像描述](../Images/a1eb5923368aa23a5b396383b64ab54e.png)

$(cell) 值是这个格式化程序 div 并且 c 变得未定义。

如何解决这个问题？

**更新**

同样的异常也发生在 chrome 中。也许 div 被创建为 body 元素的直接子元素。在这种情况下，我修补了 jqGrid 以返回 -1：

```
getCellIndex : function (cell) {
    var c = $(cell);
    if (c.is('tr')) { return -1; }
    c = (!c.is('td') && !c.is('th') ? c.closest("td,th") : c)[0];
    // AM next line added if removed single click editing in checkbox column click causes error
    if (c== undefined ) { return -1; }
    if ($.browser.msie) { return $.inArray(c, c.parentNode.cells); }
    return c.cellIndex;
}, 
```

# mysql - Joomla 2.5核心安装数据库问题

> ID：13920812
> 
> 赞同：0
> 
> 时间：2012-12-17T19:29:35.140
> 
> 标签：mysql, joomla, phpmyadmin

我陷入了困境。我有一个 joomla 2.5 的副本，我一直在使用它作为站点重新设计的测试环境。但是，出现了一个问题，我团队中的一位开发人员“不小心”（甚至不让我开始，在这里）删除了其中一个数据库中的一行以进行安装。现在，所有的内容编辑屏幕基本上都坏了。

我不知道具体删除了什么，也不知道是从哪个表中删除的，而且在这次搞砸之前我们没有可用的备份。

从前端看，一点问题都没有（每一页每一点内容都很好），所以删除的肯定是核心安装数据库行。

是否有任何人可以建议解决这种情况的（免费）解决方案？是否可以简单地将现有内容从数据库复制到全新安装以及核心文件（如果是这样，有人可以阐明我们应该将哪些表复制到全新安装）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:10:30.337

我认为没有解决您的情况的解决方案，但我想您可以按照以下步骤手动完成：

1.  将所有新内容表转移到新安装。
2.  请注意 Joomla 表，例如 (#_ *extensions, #* _assets, #__schema ...)。
3.  尝试在旧 Joomla 表和新表之间合并。

# uitableview - UITableView 的初始加载返回默认高度。heightForRowAtIndexPath 已实现

> ID：13920816
> 
> 赞同：0
> 
> 时间：2012-12-17T19:29:50.530
> 
> 标签：uitableview, heightforrowatindexpath

在这个项目中，我正在使用来自 Web 服务的数据填充一个表。随着更多数据可用，表会重新加载。我`heightForRowAtIndexPath`用来根据标题字符串的大小来调整单元格的大小。它返回 54 的 MAX 或字符串高度。奇怪的是，表格第一次运行加载序列时，它为每个单元格返回 44。我将单元格高度记录在`cellForRowAtIndexPath`. 当第二次调用 reload 时，我得到了正确的单元格高度。结果是单元格子视图最初不合适，然后非常突然地就位。想知道是否有人对此有任何见解`UITableView`可能会为我指明正确的方向。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:36:30.560

您必须在调用 reload 之前将字符串的大小存储在成员变量中，因为字符串首先得到所以这会更容易，接下来是在 indexPath 方法中为行返回该成员变量的高度；

```
@interface
{
   CGSize fixedStringSize;
}

@implementation

-(void)dataFinishDownload
{
   fixedStringSize = [yourCustomMethodForStringSize:titleString];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
   return fixedStringSize.height;
}

@end 
```

# visual-c++ - TextBlock 和 Grid 控件的简单动画

> ID：13920817
> 
> 赞同：0
> 
> 时间：2012-12-17T19:30:02.347
> 
> 标签：visual-c++, windows-store-apps

例如，我的目标是做一个 TextBlock 的简单动画（esfadeIn、fadeOut）。我该怎么做？我搜索了一些解释，但我发现它们非常复杂，谈论场景，ecc。我会知道它是否可以更简单，或者是否有人可以给我一个简单的程序解释。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:48:42.693

这段代码应该让你知道如何去做（如果它对你来说太慢，可以减少持续时间）这是 Xaml：

```
<Grid Grid.Row="1">
    <Grid.Resources>
        <Storyboard x:Name="FadeOutStoryboard">
            <!-- This animation will animate the value of the Canvas.Left property of the rectangle Scenario1Rectangle to 300\. -->
            <DoubleAnimation 
        Storyboard.TargetName="txtToFade" 
        Storyboard.TargetProperty="Opacity" 
        Duration="0:0:1" 
        To="0" 
        />
        </Storyboard>
        <Storyboard x:Name="FadeInStoryboard">
            <!-- This animation will animate the value of the Canvas.Left property of the rectangle Scenario1Rectangle to 300\. -->
            <DoubleAnimation 
        Storyboard.TargetName="txtToFade" 
        Storyboard.TargetProperty="Opacity" 
        Duration="0:0:1" 
        To="1" 
        />
        </Storyboard>
    </Grid.Resources>
    <StackPanel>
        <TextBox Name="txtToFade"></TextBox>
    </StackPanel>
</Grid> 
```

在这背后的代码中是您执行情节提要的方式：-

```
 FadeOutStoryboard->Begin(); 
```

或者

```
 FadeInStoryboard->Begin(); 
```

您可以使用[VisualStateManager](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.visualstatemanager.aspx)根据事件（例如鼠标悬停等）控制动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:05:08.513

您是否尝试过此位置的动画示例？

[http://code.msdn.microsoft.com/windowsapps/Animations-f758de70](http://code.msdn.microsoft.com/windowsapps/Animations-f758de70)

# php - 我如何通过帖子将变量读取到其他页面

> ID：13920821
> 
> 赞同：-4
> 
> 时间：2012-12-17T19:30:20.793
> 
> 标签：php

我有这样的链接

```
<a href="PrintSingleCashier.php?id=<?=$objResult["cashiers_CashierID"]; ?>" target="_new"><img src="../images/print.png"></a> 
```

而且我不会将变量打印`id`到其他称为的页面`PrintSingleCashier.php`，我将在链接上插入 id 与此相同`PrintSingleCashier.php?id=<?=$objResult["cashiers_CashierID"]; ?>`。

但是当转到此页面时，`PrintSingleCashier.php`我无法阅读`id`。

为什么 ！！

我读它，`$_GET["id"];`但我需要读它`$_POST["id"];`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:42:48.767

也许是因为`<?=`

试试这个

```
<?php
echo "<a href=\"PrintSingleCashier.php?id=".$objResult["cashiers_CashierID"]."\" target=\"_blank\"><img src=\"../images/print.png\"></a>";
?> 
```

在页面中`PrintSingleCashier.php`读取`id`如下

```
<?php
$id = $_GET['id'];
?> 
```

确保数组`$objResult["cashiers_CashierID"]`有一个值。

良好的编程习惯是避免使用 PHP 的快捷方式标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:41:42.043

您只是无法通过链接获得 $_POST 变量，仅限于使用 $_GET

不建议这样做，但无论如何，如果您必须将其保持为 $_POST 变量以与以前的代码或类似的东西兼容，只需执行一个简单的

```
$_POST["id"] = $_GET["id"] 
```

在“PrintSingleCashier.php”的开头

# java - android javax.xml.bind gson 和 @XmlSchemaType

> ID：13920822
> 
> 赞同：0
> 
> 时间：2012-12-17T19:30:23.280
> 
> 标签：java, android, jaxb, gson

我有一个无法更改的客户提供的 xsd。我正在使用 jaxb 生成类。结果类具有如下注释：

```
@XmlSchemaType(name = "dateTime")
protected XMLGregorianCalendar expires; 
```

我尝试使用 GSON 将其转换为 json，并得到 javax.xml.bind.XmlSchemaType 的 classnotfoundexception。我在 maven pom.xml 中添加了 javax.xml.bind 的依赖项：

```
<dependency>
    <groupId>org.glassfish</groupId>
    <artifactId>javax.xml.bind</artifactId>
    <version>3.0-b54</version>
    <scope>compile</scope>
</dependency> 
```

然后我得到这个疯狂的错误：

> 尝试在非核心库中包含核心类（java.* 或 javax.*）。您可能试图在应用程序中包含来自桌面虚拟机的核心库（或其一部分）。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。
> 
> 如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机发行版的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。
> 
> 如果您继续使用“--core-library”但实际上是在构建应用程序，那么请预先警告您的应用程序在某些时候仍然无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级他们的操作系统，您的应用程序就会停止运行。你会为这个问题负责。
> 
> 如果您合法地使用了恰好位于核心包中的某些代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。如果你发现你无法做到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。

！！！

我要么需要跳过注释，要么告诉 jaxb 不要生成 themor gson 以忽略它们，要么正确导入依赖项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:56:20.853

```
<scope>provided</scope> 
```

修复了我 - 我不知道 javax.* 下的所有内容都是由 android 提供的。

# java - JSF 应用程序平均负载升级

> ID：13920823
> 
> 赞同：3
> 
> 时间：2012-12-17T19:30:24.763
> 
> 标签：java, performance, jsf, jsf-2

我们使用运行在 jBoss EAP 6.0 上的 JSF 2 开发了一个站点，我们在生产环境中遇到问题，基本上在一段时间后（当前用户级别约为 24 小时），应用程序使服务器负载平均上升到 100 并且服务器停止响应（它实际上并没有停止响应，只是响应时间太长，所以实际上是一样的）

现在，如果我们只是停止并再次启动 jBoss，应用程序就可以正常工作（所以这不是负载问题，而是随着时间的推移发生的事情越多，负载越多，发生的速度越快）

为了测试这一点，我们创建了一个简单的应用程序（只是一个战争），它基本上有一个登录页面，以及一个非常简单的页面，它通过一个按钮和一个简单的弹出窗口呈现一些文本，也只是呈现一些文本。

我们正在使用 jMeter（在另一台机器上运行）来强调这个简单的应用程序使用 100 个并发线程（或者无论如何 jMeter 允许的并发）来处理它。在具有 i5 和 8gb ram（服务器使用 4gb）的 Mac 上运行的 jBoss EAP 持续大约 20 分钟，然后将平均负载升级到 50 并继续攀升，如果我使用 200 个线程而不是 100 个线程

我注意到的另一件事是，如果我开始使用新的 jBoss 实例进行测试，则平均负载需要 X 时间才能升级，现在，如果我开始测试，将平均负载提高到 50，然后停止该测试并在不重新启动 jBoss 的情况下开始新的测试，平均负载在几秒钟内再次飙升至 50。

我们可以使用 Restful 服务对我们的服务施加压力而不会出现问题（并且没有负载平均峰值），因此我们猜测这不是一般的 jBoss 问题，而更多的是 JSF 问题。

我正在上传一些 Visual VM 的图像作为参考（您可以在其中看到 GC 定期完成并且看起来很好，并且 CPU 和负载平均升级的遏制）以及库版本的 pom.xml 的内容。

所以我的问题基本上是有人遇到过这个问题吗？这是正常行为吗？谁能想到发生这种情况的原因？（我们还通过 RedHat 支持创建了一张票，但我们希望社区中的某个人已经遇到过这个问题，或者可以帮助我们找出一种方法来找出正在发生的事情）

如果有人感兴趣，我可以提供示例应用程序的代码和 jMeter 测试脚本

蒂亚！

100 个线程的平均负载：

![100 个线程的平均负载](../Images/5c4cc106f00af43ba7d3888c9bf94d87.png)

具有 100 个线程的 CPU： ![具有 100 个线程的 CPU - 注意它永远不会停止增长](../Images/d570e8ed3ed13ddd4b4da96e30867a3d.png)

100个线程的内存： ![具有 100 个线程的内存 - GC 似乎正确地做到了](../Images/166ea6602b25860b4a808fbf4a7f6654.png)

配置： ![配置](../Images/9fa16b01766610121beacc47bd83d15d.png)

在不停止 jBoss 的情况下再次加载平均开始测试：

![在此处输入图像描述](../Images/968e87572fbcb3e631ae7fda5f0a8b0d.png)

最后 pom.xml 依赖：

```
 <properties>
        <project.version>1.0</project.version>
    <codi.version>1.0.5</codi.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <maven.build.timestamp.format>yyyyMMdd'T'HHmmss</maven.build.timestamp.format>
        <jboss.home>${env.JBOSS_HOME}</jboss.home>
        <jboss.domain>default</jboss.domain>
        <arquillian.version>1.0.0.CR7</arquillian.version>
        <slf4j.version>1.6.1</slf4j.version>
        <weld.version>1.1.8.Final</weld.version>
        <seam.version>3.1.0.Final</seam.version>
        <rest.version>2.3.3.Final</rest.version>
        <version.arquillian_core>1.0.0.CR7</version.arquillian_core>
        <version.jbossas_7>7.1.0.Final</version.jbossas_7>
        <jboss-javaee6-spec.version>1.0.0.Final</jboss-javaee6-spec.version>
        <org.richfaces.bom.version>4.0.0.Final</org.richfaces.bom.version>
    </properties>

    <modelVersion>4.0.0</modelVersion>
    <build>
        <finalName>foo</finalName>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <!-- PRoject Dependencies -->
        <dependency>
            <groupId>ar.com.easytech</groupId>
            <artifactId>easyFaces-core</artifactId>
            <version>1.1</version>
        </dependency>

        <!-- Web Dependencies -->
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <scope>compile</scope>
            <version>1.6.2</version>
        </dependency>
        <!-- Seam -->
        <dependency>
            <groupId>org.jboss.seam.security</groupId>
            <artifactId>seam-security</artifactId>
            <scope>compile</scope>
            <version>${seam.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.myfaces.extensions.cdi.bundles</groupId>
            <artifactId>myfaces-extcdi-bundle-jsf20</artifactId>
            <version>${codi.version}</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <type>jar</type>
        </dependency>
        <dependency>
            <groupId>com.ocpsoft</groupId>
            <artifactId>prettyfaces-jsf2</artifactId>
            <scope>compile</scope>
            <version>3.3.2</version>
        </dependency>
        <!-- PDF -->
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>fop</artifactId>
            <version>1.0</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>xmlgraphics-commons</artifactId>
            <version>1.4</version>
        </dependency>
        <dependency>
            <groupId>avalon-framework</groupId>
            <artifactId>avalon-framework</artifactId>
            <version>4.1.5</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons.io</groupId>
            <artifactId>commons.io</artifactId>
        <version>2.4</version>
    </dependency>
    <dependency>
        <groupId>batik</groupId>
        <artifactId>batik-bridge</artifactId>
        <version>1.6</version>
    </dependency>
    <dependency>
        <groupId>batik</groupId>
        <artifactId>batik-css</artifactId>
        <version>1.6</version>
    </dependency>
    <dependency>
        <groupId>batik</groupId>
        <artifactId>batik-util</artifactId>
        <version>1.6</version>
    </dependency>
    <dependency>
        <groupId>apache-xerces</groupId>
        <artifactId>xercesImpl</artifactId>
        <version>2.9.1</version>
    </dependency>
    <dependency>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>jaxws-rt</artifactId>
        <version>2.2.5</version>
        <scope>provided</scope>
    </dependency>
</dependencies> 
```

**编辑**

正如 maple_shaft 建议的那样，我在 glassfish 上进行了测试，得到了完全不同的结果，我配置了一个基本 glassfish 服务器，只更改了 Xmx Xms 和 NewSize 并使用 200 个线程运行测试，平均负载从未超过 6（实际上它保持在 5 左右）我猜是负载的舒适区）

我正在添加结果图像并将相应地更新 RH 支持案例

平均负载 ![平均负载](../Images/1c5fac4b158872947ee1442287f20a7f.png)

中央处理器 ![在此处输入图像描述](../Images/af04bba3ad2d29810d9e141598f0450b.png)

记忆 ![在此处输入图像描述](../Images/f2057057986040cccf0373629e1188b4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T09:27:24.623

您能否将 mojara 实现更改为 myfaces，因为使用 Mojarra 最高 2.1.21 版本的应用程序存在一些性能问题。欲了解更多信息，请阅读 [http://blog.oio.de/2013/05/06/jsf-performance-tuning/](http://blog.oio.de/2013/05/06/jsf-performance-tuning/)

# c - 分配int存储？

> ID：13920825
> 
> 赞同：-4
> 
> 时间：2012-12-17T19:30:28.703
> 
> 标签：c, pointers, memory-management

我是 C 的初学者。

```
main() {    
   int *a-ptr = (int *)malloc(int); 
   *a-ptr = 5;
   printf(“%d”, *a-ptr);
} 
```

问题是：这是否保证打印 5？

答案是：不，有两个原因：

*   你不能在变量名中使用“-”
*   “你没有分配 int 存储”

我不明白第二点。存储不是用这条线分配的吗？
`int *a-ptr = (int *)malloc(int);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:31:38.563

`malloc`接受大小，而不是类型。你需要做`malloc(sizeof(int))`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:38:09.500

```
 main() {    // wrong. Should return int
int main() {    // better

int *a-ptr =  //wrong. no dashes in variable names
int *a_ptr =  // better, use underscores if you want to have multiparted names

(int *)malloc(int); // wrong. Don't typecast the return of malloc(), also it takes a 
                    // size, not a type
malloc(sizeof(int)); // better, you want enought memory for the sizeof 1 int 
```

因此，您的代码的更好版本是：

```
int main() {    
   int *a_ptr = malloc(sizeof(int)); 
   *a_ptr = 5;
   printf("%d", *a_ptr);
   free(a_ptr); // When you're done using memory allocated with malloc, free it
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:33:58.980

由于多种原因，您的代码无效，并且无法编译。

1.  `a-ptr`是无效的变量名。`-`名称中不允许使用，`a_ptr`而是使用（或其他）

2.  `malloc`不带类型。它需要一个大小（以字节为单位）来分配。

3.  请务必使用直引号`"`而不是您使用的弯引号。

正确的代码如下所示：

```
int main() {
    int *aptr = (int *) malloc(sizeof(int));
    *aptr = 5;
    printf("%d", *aptr);

    return 0;
} 
```

（转换 from `malloc`to`int *`可能是可选的，具体取决于您的编译器。）

# java - 如何在 Java 中处理缓存 log4j HTTP appender？

> ID：13920827
> 
> 赞同：1
> 
> 时间：2012-12-17T19:30:34.823
> 
> 标签：java, http, logging, log4j, appender

所以我正在编写一个应用程序，它将接受来自许多其他应用程序的日志条目。我们主要使用`log4j`.

由于这些应用程序位于不同的机器上，我希望有一个 Web 服务来接受来自每个应用程序的 POST 数据。然后我们可以在其中进行搜索等。

我意识到有像 Loggly 这样的服务可以处理这个问题，但我想自己编写（主要是为了我们的安全目的和公司不喜欢第三方提供商的日志信息）。

无论如何，我成功地让我自己的自定义 HttpAppender 工作。这样每个应用程序都会将消息发送到 Web 服务。

但在我开香槟之前，我意识到通过 HTTP 直接发布可能是一件坏事，因为其中一些应用程序会在日志中生成数百万行。所以我想要的最后一件事是我的 HttpAppender 降低了一些 T1 线或其他东西。

所以我的想法是以某种方式缓冲 HTTP POST，然后定期在单个帖子中发送这些缓冲区。因此，与许多较小的帖子相比，更少的大帖子。

当然，在同一台机器上本地缓冲类似 Reddis/memcached 会有所帮助，但我必须假设我不能使用外部缓存（在同一台服务器上）。所以我必须缓存在appender的内存/进程中。

我是否在缓冲这些 HTTP 帖子的写入轨道上？或者，我应该将缓冲区写入日志文件，然后定期发布这些日志文件吗？

# image-processing - 在opencv中查找视频帧熵时的奇怪输出

> ID：13920828
> 
> 赞同：5
> 
> 时间：2012-12-17T19:30:36.637
> 
> 标签：image-processing, opencv, entropy, opencvdotnet

```
#include <cv.h>
#include <highgui.h>
#include <iostream>
#include <cmath>
#include <cstdlib>
#include <fstream>

using namespace std;

typedef struct histBundle {
double rCh[256];
double gCh[256];
double bCh[256];
}bundleForHist;

bundleForHist getHistFromImage (IplImage* img, int numBins) {
float range[] = {
    0, 
    numBins
};
float *ranges[] = { 
    range 
};

bundleForHist bfh;

CvHistogram *hist = cvCreateHist (1, &numBins, CV_HIST_ARRAY, ranges, 1);
cvClearHist (hist);
IplImage* imgRed   = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* imgGreen = cvCreateImage(cvGetSize(img), 8, 1);
IplImage* imgBlue  = cvCreateImage(cvGetSize(img), 8, 1);
cvSplit(img, imgBlue, imgGreen, imgRed, NULL);
cvCalcHist(&imgRed, hist, 0, 0);
for (int i = 0; i < numBins; ++i) {
    bfh.rCh[i] = cvQueryHistValue_1D(hist, i);
}
cvClearHist(hist);
cvCalcHist(&imgGreen, hist, 0, 0);
for (int i = 0; i < numBins; ++i) {
    bfh.gCh[i] = cvQueryHistValue_1D(hist, i);
}
cvClearHist(hist);
cvCalcHist(&imgBlue, hist, 0, 0);
for (int i = 0; i < numBins; ++i) {
    bfh.bCh[i] = cvQueryHistValue_1D(hist, i);
}
cvClearHist(hist);
return bfh;
}

int main (int argc, char** argv) {
int c;
IplImage* img = NULL;
int frame_number = 0;
CvCapture* capture = cvCaptureFromAVI ("Cricketc1.avi");
assert(capture);
int fps = ( int )cvGetCaptureProperty( capture, CV_CAP_PROP_FPS );
cvNamedWindow ("Video", 0);

while (1) {
    //IplImage * img = cvLoadImage("C:\\Users\\ANIMES~1\\Desktop\\bw.jpg");
    img = cvQueryFrame(capture);
    frame_number++;
    if (img) {
        cvShowImage("Video", img);
        int numBins = 256;
        bundleForHist bfh;
        bfh = getHistFromImage (img, numBins);
        double totalForR = 0;
        double totalForG = 0;
        double totalForB = 0;
        double probR[256];
        double probG[256];
        double probB[256];
        for (int i = 0; i < numBins-1; ++i) {
            totalForR += bfh.rCh[i];
            totalForG += bfh.gCh[i];
            totalForB += bfh.bCh[i];
        }
        double lengthHistogram = totalForR + totalForG + totalForB;
        for (int i = 0; i < 256; ++i) {
            probR[i] = bfh.rCh[i]/(double)lengthHistogram;
            probG[i] = bfh.gCh[i]/(double)lengthHistogram;
            probB[i] = bfh.bCh[i]/(double)lengthHistogram;
            //file << bfh.rCh[i] << "\t" << bfh.gCh[i] << "\t" << bfh.bCh[i] << "\t" << probR[i] << "\t" << probG[i] << "\t" << probB[i] << "\n";
        }

        double entropyR = 0.0;
        double entropyG = 0.0;
        double entropyB = 0.0;
        for (int i = 0; i < numBins; ++i) {
            entropyR += probR[i]*log(probR[i]);
            entropyG += probG[i]*log(probG[i]);
            entropyB += probB[i]*log(probB[i]);
        }
        cout << frame_number << "\t" << (-1.0)*(entropyR + entropyG + entropyB) << endl;
    }
    c = cvWaitKey(1000/fps);
    if (c == 27)
        break;
}
//cvReleaseImage(&img);
cvReleaseCapture(&capture);
cvDestroyWindow("Video");
return 0;
} 
```

输出：

```
.
.
254     -1.#IND
255     -1.#IND
256     -1.#IND
257     -1.#IND
258      5.5686
.
. 
```

我首先发现了图像熵，结果是正确的。但近 80% 的视频帧熵都出来了`-1.#IND`。

这是视频....[下载](https://dl.dropbox.com/u/86814352/Cricketc1.avi)

可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:50:42.410

`prob[i] = 0`对于某些人来说，可能是这样`i`，因此您正在计算`log(0)`未定义的。要解决此问题，您只需丢弃此类“概率”：

```
for (int i = 0; i < numBins; ++i) {
    if (prob[i])
        entropy += prob[i]*log(prob[i]);
} 
```

对于您发现的有关 bin 255 中的 0 值的其他错误，这是由于您指定的范围造成的。OpenCV 将相关函数的范围视为 [start, end)，因此指定 [0, 255) 的范围将忽略 255 的结束值。您想要保留 0 和 255，因此：

```
float range[] = {0, numBins}; 
```

# android - 动态 ImageView 动画

> ID：13920832
> 
> 赞同：0
> 
> 时间：2012-12-17T19:31:00.787
> 
> 标签：android, imageview

我有一个 FrameLayout 并向其中动态添加 10 个 ImageView。然后我用下载的图像填充它并想要动画它。缩放和平移动画从错误的位置开始。它应该从屏幕中间开始。当我在运行时更改 ImageView 中的可绘制对象（使用另一个下载的图像）并再次为其设置动画时，动画从正确的位置（从屏幕中间）开始。

我想我必须以某种方式初始化位置。

这就是我创建 imageViews 的方式：

```
mImages = new ImageView[10]; //Fill Array with ImageViews
    for(int i = 0; i < bufferCount; i++){   // ,Initialize them
        mImages[i]= new ImageView(mCtx);
        mImages[i].setVisibility(View.GONE);//,make them Invisible
        ContentFrame.addView(mImages[i]);   //and add them to the view
    } 
```

这是我的动画：

```
 Animation animation = AnimationUtils.loadAnimation(mCtx ,R.anim.anim1);
        animation.setAnimationListener(mAnimationDone);

        mImages[imgPos].setVisibility(View.VISIBLE);
        mImages[imgPos].startAnimation(animation); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:31:39.337

我的动画

```
<scale
android:fromXScale="1.0"
android:fromYScale="1.0"
android:toXScale="2.0"
android:toYScale="2.0"
android:pivotX="50%" android:pivotY="50%"
/>

<alpha android:fromAlpha="1.0" 
    android:toAlpha="0.5" 
     /> 

</set> 
```

# asp.net-mvc-3 - 每列的 ASP.NET MVC Razor 标题和视图动态

> ID：13920834
> 
> 赞同：5
> 
> 时间：2012-12-17T19:31:05.507
> 
> 标签：asp.net-mvc-3

我现在有以下 Razor 行：

```
<table border=1 cellpadding=3 cellspacing=1 rules="rows" frame="box">
<tr>
    <th>Türkçe Söz Dizisi</th>
    <th>English Word Sequence</th>
    <th></th>
</tr>

@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.Tr)
    </td>
    <td>
        @Html.DisplayFor(modelItem => item.En)
    </td>
    <td>
        @Html.ActionLink((String)@ViewBag.Edit, "Edit", new { id=item.ID }) |
        @Html.ActionLink((String)@ViewBag.Delete, "Delete", new { id=item.ID })
    </td>
</tr>
}

</table> 
```

但是，我会自动将一些列从程序添加到数据库表中。我需要一种方法来相应地打印这个 th 和 td。简而言之，我需要一种方法来浏览 Model 的动态列。我怎样才能做到这一点？

**编辑：**我的模型类型是“提案”。但是，我想达到 Proposal.Type.Word（Tr、En 或任何其他添加的语言枚举）的动态属性。我怎样才能？

```
@foreach (var item in Model) {
    Type objectType = Type.GetType(typeof(RexamOneriSistemi.Models.Word).AssemblyQualifiedName);
    System.Reflection.PropertyInfo[] fields = objectType.GetProperties();

<tr>
    <td>@Html.DisplayFor(modelItem => item.ID)</td>
    <td>@Html.DisplayFor(modelItem => item.Owner.Name)</td>
    @foreach (System.Reflection.PropertyInfo f in fields) {
    if (f.Name.ToString() == @HttpContext.Current.Session["Language"].ToString())
    {
        <td>
         // What to do here exactly to get item.Type.Word.[dynamic attribute]?
        </td>
    }
</tr>
} 
```

我可以得到剃刀线

```
string s = "@Html.Displayfor(modelItem => item.Type.Word." + System.Web.HttpContext.Current.Session["Language"] + ")"

Resulting: @Html.Displayfor(modelItem => item.Type.Word.Tr) 
```

我可以插入要呈现为 Razor 语法的字符串吗？如果是，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T02:36:26.690

我已经尝试过这段代码并且它有效

```
 <table border=1 cellpadding=3 cellspacing=1 rules="rows" frame="box">
    <tr>
      @{
        Type objectType = Type.GetType(typeof(yourProjectNamespace.Models.Language).AssemblyQualifiedName);

        System.Reflection.PropertyInfo[] fields = objectType.GetProperties();

         foreach (System.Reflection.PropertyInfo f in fields)
         { 

         <th> @f.Name.ToString() </th>

       }
    }

    </tr>

    @foreach (yourModelType item in Model) {
    <tr>
    foreach (System.Reflection.PropertyInfo f in fields)
         { 

         <td>@Html.Display(f.Name.ToString())</td>

         }
        <td>
            @Html.ActionLink((String)@ViewBag.Edit, "Edit", new { id=item.ID }) |
            @Html.ActionLink((String)@ViewBag.Delete, "Delete", new { id=item.ID })
        </td>
    </tr>
    }
            </table> 
```

要获取您班级的 Assemply 合格名称，请[在此处查看此链接](https://stackoverflow.com/questions/3758209/why-would-system-type-gettypexyz-return-null-if-typeofxyz-exists)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-07T09:02:42.380

遇到这个问题，写了这个也许它会帮助别人。此代码会将您的模型动态加载到表中。

```
@model System.Collections.Generic.List<App.Client.Models.MyModel>

<table>
    <thead>
        <tr>
            @foreach (var property in Model.GetType().GetGenericArguments()[0].GetProperties())
            {
                <th>@property.Name</th>
            }
        </tr>   
    </thead>
    <tbody>
        @foreach (var modelItem in Model)
        {
            <tr>
                @foreach (var property in modelItem.GetType().GetProperties())
                {
                    <td>@property.GetValue(modelItem)</td>
                }
            </tr>
        }
    </tbody>
</table> 
```

# c# - 具有负高度或宽度的矩形不能正确使用包含方法？

> ID：13920835
> 
> 赞同：1
> 
> 时间：2012-12-17T19:31:08.703
> 
> 标签：c#, xna

所以我试图找出一个点是否包含在一个矩形内。当矩形的高度和宽度都是正数或负数但不是只有一个是负数时，它可以正常工作。具有负宽度或高度的矩形的整个想法有点奇怪，但当它们都是负值时，它似乎处理得很好。所以我想知道 XNA 在这种情况下如何处理 contains 方法？如果它不起作用，它不应该在这种情况下不接受它。

我用它来创建一个 rts 样式选择框，只是为了定义那个矩形，这样我就可以知道里面有什么。这是我的代码：

```
if (InputHandler.IsLeftMouseHeld() == true)
{
    selectionBoxRectangle = new Rectangle(selectionBoxRectangle.X,
      selectionBoxRectangle.Y,
      (int)Vector2.Transform(InputHandler.MousePosition(),
      Matrix.Invert(camera.Transformation)).X - selectionBoxRectangle.X,
      (int)Vector2.Transform(InputHandler.MousePosition(),
      Matrix.Invert(camera.Transformation)).Y - selectionBoxRectangle.Y);

    foreach(ControllableCharacter character in characters.OfType<ControllableCharacter>())
    {
        if (selectionBoxRectangle.Contains(character.DestRectangle.Center) == true
          || character.DestRectangle.Contains(selectionBoxRectangle))
        {
            character.Selected = true;
            character.Color = Color.LightGreen;
        }
        else
        {
            character.Selected = false;
            character.Color = Color.White;
        }
    }
} 
```

在这种情况下如何处理它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:36:21.630

如果你反编译 Rectangle 的 XNA 代码，你可以在这里看到实现：

```
public bool Contains(Point value)
{
    return this.X <= value.X && value.X < this.X + this.Width && this.Y <= value.Y && value.Y < this.Y + this.Height;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-20T12:37:30.777

如果您像我一样懒惰，这是可以提供帮助的扩展方法

```
public static bool ContainsExt(this RectangleF rect, PointF point)
{
    bool widthOk;
    bool heightOk;

    if (rect.Width < 0)
    {
        widthOk = rect.X >= point.X && point.X > rect.X + rect.Width;
    }
    else
    {
        widthOk = rect.X <= point.X && point.X < rect.X + rect.Width;
    }

    if (rect.Height < 0)
    {
        heightOk = rect.Y >= point.Y && point.Y > rect.Y + rect.Height;
    }
    else
    {
        heightOk = rect.Y <= point.Y && point.Y < rect.Y + rect.Height;
    }

    return widthOk && heightOk;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:32:16.037

您始终可以编写自己的方法，该方法比默认方法更适用于特殊情况。

像这样：

```
bool RectangleContainsPoint(Rectangle rect, Point p)
{
    if (rect.Width < 0 && rect.Height >=0 ||
        rect.Width >=0 && rect.Height < 0)  // if in this case you have problems

        return MyImplementationOfContains(rect, p);
    else
        return Rectangle.Contains(rect, p);
}

bool MyImplementationOfContains(Rectangle rect, Point p)
{
    // as the name of this method suggests, your implementation
} 
```

# android - 无法从 onActivityResult() 访问视图

> ID：13920837
> 
> 赞同：1
> 
> 时间：2012-12-17T19:31:11.903
> 
> 标签：android, android-layout

我在 Fragment 有以下场景：

```
 onCreateView(){
       view = inflater.inflate(R.layout.mylayout, container, false);
       ScrollView sc = (scrollView)view.findViewById(R.id.sc);
       generateUI() 
       return view; }

       public void generateUI() {  
       horizontalllayout = new LinearLayout(getActivity());  
       horizontalllayout.setOrientation(android.widget.LinearLayout.HORIZONTAL); 
       Button newbtn = new Button(getActivity());
       newbtn.setId(1);
       horizontalllayout.addView(newbtn);
       newbtn.setOnClickListener( 
      public void onClick(View v) {  
       Intent CaputureIntent = new Intent(getActivity(), s.class); 
       startActivityForResult(CaputureIntent, 664);  
       } });  

    public void onActivityResult(int requestCode, int resultCode, Intent data) { 
    if(resultCode == 1666){  
    populate("hi");  
    }
    } 

      public void populate(String str) { 
        Button b = (Button)getActivity().findViewbyId(1);    //Error     
        b.setText(str); 
      }  
    } 
```

我无法接收上下文。当我从 onActivityResult() 调用时，按钮上的文本在 populate() 方法中没有改变。如果我从外部调用相同的方法，则一切正常。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:59:01.273

假设 Button 在您的布局文件中定义并且您的代码输入正确，通过在您的类中定义 b 将 b 设置为可通过整个代码访问：

```
Button b; 
```

然后像这样在 onCreateView() 中访问 b ：

```
b = (Button)view .findViewbyId(1); 
```

在 onActivityResult 中只使用 b 但是你喜欢它：

```
b.setText(str); 
```

# javascript - 显示奇怪行为的 Javascript 'in' 函数

> ID：13920838
> 
> 赞同：2
> 
> 时间：2012-12-17T19:31:12.080
> 
> 标签：javascript

我只是`in`在 Javascript 中测试运算符。当我运行类似的东西时`console.log("cookie" in document)`，它会记录`true`，但是当我执行`console.log("cookie" in "cookiejar")`或将**cookiejar**分配给变量`a`然后执行`console.log("cookie" in a)`时，我收到一条错误语句**TypeError: invalid 'in'operand a**。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T19:35:09.390

[`in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/in)操作员不会按照您 的想法去做。*a* `in` *b*告诉您给定对象*b*是否具有名为*a*的属性。

您不能用于`in`搜索字符串中的字符。为此使用[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)。

```
'cookiejar'.indexOf('cookie') 
```

* * *

请注意，`in` [*运算符与*](http://www.ecma-international.org/ecma-262/5.1/#sec-11.8.7)[*语句*](http://www.ecma-international.org/ecma-262/5.1/#sec-12.6.4)完全分离且完全无关。[`for-in`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)[](http://www.ecma-international.org/ecma-262/5.1/#sec-12.6.4)

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T19:34:42.717

`in`仅适用于对象，不适用于字符串。

[从规格](http://es5.github.com/#x11.8.7)：

5 如果 Type(rval) 不是 Object，则抛出 TypeError 异常。*

# android - Android SeekBar setMax() 和 incrementProgressBy() 不起作用

> ID：13920840
> 
> 赞同：2
> 
> 时间：2012-12-17T19:31:22.487
> 
> 标签：android, increment, seekbar

我在 TableRow 中执行 LayoutInflator。（供参考）

在此我执行以下操作：

```
((SeekBar)tr1.findViewById(R.id.seekBarMe)).setOnSeekBarChangeListener(this);
((SeekBar)tr1.findViewById(R.id.seekBarMe)).setTag(i);
((SeekBar)tr1.findViewById(R.id.seekBarMe)).setProgress(0); 
```

这些东西有效，我的应用程序运行良好。但是，当我执行以下操作时，它似乎崩溃了。

```
((SeekBar)tr1.findViewById(R.id.seekBarMe)).incrementProgressBy(1);
((SeekBar)tr1.findViewById(R.id.seekBarMe)).setMax(10); 
```

然后，

```
ArrayList<View> myViews = new ArrayList<View>();
myViews.add(tr1); 
```

如果有人知道问题出在哪里，我将非常感谢您的帮助。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:55:13.657

事实证明，在您向 myViews ArrayList 添加任何内容之前，会调用 SeekBar onProgressChanged()。

因此，它给出了 IndexOutOfBounds 异常，因为您在 onProgressChanged() 中访问了 myViews。

现在您将处理 onProgressChanged() 代码，以便在大小大于 0 之前它不会访问 myViews。

:)

# php - 处理日期时的 if/then 语句

> ID：13920846
> 
> 赞同：0
> 
> 时间：2012-12-17T19:31:38.273
> 
> 标签：php, drupal, if-statement

我是 PHP 新手，可以使用一些帮助来解决这个问题。我有一个 drupal 网站，其中有一个名为**'field_date'**的字段。在该字段内有两个变量（**date1 和 date2**），它们是开始日期和结束日期。我正在尝试创建一个声明：

**如果当前日期在 date1 和 date2 之间，则显示“x”。如果超出该日期范围，则显示“y”。**

我还可以通过使用 drupal 日期变量来获取当前日期：

```
format_date(time(), 'custom', 'F d Y'); 
```

感谢任何能够提供帮助的人。我真的很感激！

更新：对于任何有同样问题的人，我在[这里](https://drupal.stackexchange.com/questions/53452/reference-start-date-and-end-date-for-date-field/)得到了一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:39:30.540

将变量转换为一种形式并将它们放入 if 语句

```
$now = time();
$date1 = strtotime($date1);
$date2 = strtotime($date2);
if ( $now >= $date1 && $now <= $date2) {
    echo 'x';
} else {
    echo 'y';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:39:56.173

开始了

```
 $current_day = 'some day here';
    $start_day = strtotime('20-Feb-2012');    // or how u have the date
    $end_day = strtotime('22-Feb-2012');        // or how u have the date
    if ($current_day >=$start_day && $current_day<=$end_day)
   {
        echo 'x';
   }
   else
   {
       echo 'y';
   } 
```

# java - 休眠，替换hql中的空值

> ID：13920848
> 
> 赞同：1
> 
> 时间：2012-12-17T19:31:50.683
> 
> 标签：java, hibernate, null, hql

如何在 HQL 中替换（或使用空值获取结果）空值？在我的情况下，`SomeObject`可以为空。`Clazz`我在和之间有多对一的关系`SomeObject`：

```
SELECT c.name, c.someObject.name from Clazz c 
```

我试过了：

```
SELECT c.name, coalesce(c.someObject.name, ' ') from Clazz c 
```

但它不返回任何行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:14:16.630

您可能要注意，没有“多对空”关系之类的东西。如果引用的对象 ( `SomeObject`) 是`null`在持久化`Clazz`实体时，则*不会*在`SomeObject`数据库表中创建条目。

然后，当您尝试访问`SomeObject`查询中的（不存在的）（`c.someObject.name`）时，Hibernate 将隐式构建一个*内部*连接，这当然会排除有`Clazz`问题的对象，因为无法完成连接。

尝试显式使用[外连接](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-joins)；这将解决您的问题。

顺便说一句：您可以让 hibernate[输出](http://www.javalobby.org/java/forums/t44119.html)它生成的 SQL 语句，这样可以更好地理解给定查询以某种方式运行的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T20:14:25.003

`c.someObject.name`是 Clazz 和 SomeObject 之间的隐式内部连接。因此，由于它是一个内连接，它会自动过滤掉具有`null`someObject 的 Clazz 实例。

你需要一个外连接：

```
select c.name, s.name from Clazz c
left join c.someObject s 
```

# java - 如何将libgdx中的图像演员旋转中点？

> ID：13920850
> 
> 赞同：20
> 
> 时间：2012-12-17T19:32:08.243
> 
> 标签：java, android, game-engine, libgdx

如果我理解正确，LibGDX 正在使用 addActions 方法旋转图像：

```
this.addAction( parallel(rotateBy(360, 0.5f), moveTo(320, 100, 0.5f))); 
```

问题是，它被图像的**point=(0,0)**旋转 。

这是我的问题：

有没有办法通过对象的**中心点****旋转图像**？比如把它钉在中间，然后像汽车的轮子一样转动它？rotateBy和***rotateTo方法都将其******旋转***图像本身的 (0,0) 点。

 ***** * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-18T13:48:39.680

您必须正确设置演员的“原点”。您可以从 Actor API 中读取，原点是相对于位置的，用于缩放和旋转。

所以，计算你的中点，并将原点设置为中点。

```
Actor a;
....
a.setOrigin(a.getWidth()/2, a.getHeight()/2); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-06-05T11:18:32.123

我发现设置原点的最简单和最短的方法是调用：

```
Actor a;

...

a.setOrigin(Align.center); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T20:49:07.780

最简单的方法是平移对象，使 0,0 点为中心，旋转它，然后将其平移回原位。我不熟悉 libGDX，但应该有一种方法可以聚合三个转换，这意味着您只将一个聚合转换应用于您的对象。请记住，您聚合转换的顺序会有所不同。

提供完全相同结果的更复杂的方法是计算旋转产生的偏移量并将图像转换回其原点。不要这样做。结合三个简单的变换是可行的方法，也是使用变换的最佳理由之一。

** 编辑查看[API](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/scenes/scene2d/Actor.html)，Actor 对象有一个 translate() 方法。使用它来移动图像，使 0,0 点位于中心。在伪代码中；

```
x = this.getX();
y = this.getY();
cx = this.getWidth() * .5;
cy = this.getHeight() * .5;
this.translate(-(x+cx), -(y+cy)); // move so 0,0 is the centre of the Actor object
this.rotate(thisMuch);  // rotate the Actor
this.translate((x+cx), (y+cy)); // move it back to its original location 
```

这将导致您的对象在其中心点当场旋转。它看起来很复杂，但在实践中非常有效，如果您能够直接使用将驱动这些方法的矩阵（变换），则更是如此。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-20T06:15:29.220

这是如何在 libgdx 中旋转演员的简单方法。

首先，您需要设置原点：

```
img.setorigin(width/2,hieght/2); 
```

现在您可以根据需要顺时针和逆时针旋转：

```
img.rotate(2f); 
```

或者

```
img.rotate(-2f); 
```****

# twitter - 使用 twitter search api 获取带有图片的推文

> ID：13920851
> 
> 赞同：8
> 
> 时间：2012-12-17T19:32:09.423
> 
> 标签：twitter, twitter4j, twitter-search

是否可以获得包含照片的推文？我目前正在使用[twitter 搜索 api](https://dev.twitter.com/docs/api/1.1/get/search/tweets)，并通过设置 include_entities=true 来获取所有具有实体详细信息的推文。我在媒体对象下看到图片详细信息，但无论如何都可以过滤和获取只有这些媒体项目的推文对象。还是在 Twitter4j 中无论如何都可以执行此查询？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T19:51:49.570

没有具体方法可以指定我只需要照片或视频，但您可以根据`filter:links`或`filter:images`或`filter:videos`在您的查询中过滤结果以及`include_entities=true`.

例如：要获取包含链接的推文`2012-01-31`，您查询应该具有`include_entities`参数以及`filter:links`如下所示：

```
https://search.twitter.com/search.json?q=from%3Agoogle%20since%3A2012-01-31%20filter%3Alinks&include_entities=true" 
```

由于您需要根据图像/照片过滤您的推文，我认为您应该使用`filter:images`.

您的案例示例如下：

```
https://search.twitter.com/search.json?q=from%3Agoogle%20since%3A2012-01-31%20filter%3Aimages&include_entities=true" 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-06T17:33:31.730

使用最新的 twitter API，我无法使用过滤器，也无法在他们的文档中找到任何解释。尽管您可以获取所有推文，然后仅解析媒体推文。如果在您的解析脚本中，您可以触发它：

```
if(this.entities.media != null){
  //Parse the tweet
} 
```

这不是最好的解决方案，但最糟糕的部分是 twitter，它为您提供更多信息并使用更多自己的资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T09:47:42.073

在最新的 Twitter API 中，您可以在 ConfigurationBuilder 实例中执行此操作，然后再创建 Twitter 实例：

```
ConfigurationBuilder cb = new ConfigurationBuilder();
cb.setDebugEnabled(false);
cb.setOAuthConsumerKey(API_KEY);
cb.setOAuthConsumerSecret(API_SECRET);
cb.setOAuthAccessToken(ACCESS_TOKEN);
cb.setOAuthAccessTokenSecret(SECRET_KEY);
// enabling include_entities parameters
cb.setIncludeEntitiesEnabled(true);
Twitter twitterInstance = new TwitterFactory(cb.build()).getInstance(); 
```

此外，启用实体后，在搜索字符串中您必须具有条件“过滤器：图像”。

```
List<String> keywords = new ArrayList<String>();
keywords.add("#pet");
keywords.add("cat");
// String.join for Java 8
String twitterSearchString = "((" + String.join(" OR ", keywords) + ")";
// adding the filter condition
twitterSearchString  += " AND filter:images)";
Query q = new Query(twitterSearchString); 
```

你会得到图像的结果（用 twitter4j-core 4.0.4 测试）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-02T11:38:00.867

对于 twitter API 中的过滤器，您可以查看截至 2019 年 4 月 2 日的最新版本的官方文档

[https://developer.twitter.com/en/docs/tweets/search/guides/standard-operators.html](https://developer.twitter.com/en/docs/tweets/search/guides/standard-operators.html)

# java - Java 孙对象不允许调用父母或祖父母的方法

> ID：13920852
> 
> 赞同：3
> 
> 时间：2012-12-17T19:32:09.927
> 
> 标签：java, inheritance, polymorphism

`A`我在 Java中有一个类并且`A`有一些受保护的方法，然后我有一个可以覆盖这些受保护方法的类。然后我希望能够拥有一个来自类但类不应该能够调用受保护方法的类。在 Java 中可以做到这一点吗？我只是让父类的方法被覆盖并让它们成为最终的吗？ig`B``extends``A``B``C``extends``B``C``A`

```
public class A()
{
     protected void somemethod();
     protected int somevariable;
}

public class B() extends A
{
    @Override
    final protected void somemethod();
        //How do I make some variable final or not accessible to my children?
    }

    public class C() extends B
    {
        //Now I cannot override somemethod! Is that right?
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:48:49.167

不，您不能阻止子类调用父类的`protected`方法。为此，您必须降低方法的可见性，这是​​不允许的。`final`在您的类中创建该方法`B`仅意味着它不能在任何子类中被覆盖。

您希望禁止调用子类的方法这一事实`protected`对我来说似乎是一个设计问题。您可能想查看整个类层次结构的方式，并可能更好地隔离类的责任，这样您就不会陷入必须阻止通常允许的情况（调用`protected`方法）的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:00:07.933

如果 B 覆盖受保护的方法以防止 C 访问在 A 中实现的方法就足够了。然后 C 将只能访问在 B 中实现的方法。看看[Java如何调用祖父母的方法？](https://stackoverflow.com/questions/2584377/java-how-to-call-method-of-grand-parents).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:36:05.823

```
//How do I make some variable final or not accessible to my children? 
```

为此，您可以将变量**设为 private**和**final**：

```
private final int COUNT = 100; 
```

**私有访问器**将阻止您的变量 COUNT 被子类访问。

# c++ - 如何通过 WinUser.h 获取当前的虚拟键码？

> ID：13920854
> 
> 赞同：0
> 
> 时间：2012-12-17T19:32:10.833
> 
> 标签：c++, windows, key, virtual

我正在使用 WinUser.h 并且需要知道是否有一种简单的方法可以获取键盘上按下的任何键的虚拟键。

我已经尝试过 GetAsyncKeyState() 并且它工作正常，但我需要返回实际的虚拟键，而不是运行一长串 GetAsyncKeyState() 调用来检查键盘上的每个键。

我本质上是在创建一个允许用户映射他们的控件的系统，这就是为什么如果我可以获得虚拟键然后对不允许的键进行检查会更理想的原因。

此外，C++ 是正在使用的语言。感谢您在这件事上提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:01:16.837

您几乎肯定想要响应 WM_KEYDOWN/WM_KEYUP 或（更有可能）WM_CHAR 消息。`WM_CHAR`在 TranslateMessage 完成工作后给你结果，所以这是你通常想要的。它会为您提供翻译后的虚拟键代码*和*按下的键的扫描代码，以防您也需要。

# jsp - 每次单击 a4j:commandButton 时是否应该执行 JSP Scriplet Element？

> ID：13920855
> 
> 赞同：1
> 
> 时间：2012-12-17T19:32:13.070
> 
> 标签：jsp, jsf

我有一个 jsp 页面，在该页面的顶部有一个 scriplet 元素。在 f:view 和 h:form 标签之后的正文中，我有 a4j:commandButton，我在其中提供操作。现在，当我每次执行 scriplet 元素时按下 a4j:commandButton 时，它是我对服务器的 ajax 调用。这是正常行为还是我犯了一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:46:31.893

JSP *scriptlet*是由于在 JSF 视图构建期间执行的遗留 JSP 视图技术的性质（因此，也在回发的恢复视图阶段）。所以是的，这绝对是预期的行为。

您听起来好像只想在初始 GET 请求上执行一些 Java 代码，而不是在随后的回发上。在这种情况下，如果返回，请签入*scriptlet*。[`ResponseStateManager#isPostback()`](http://docs.oracle.com/javaee/6/api/javax/faces/render/ResponseStateManager.html#isPostback%28javax.faces.context.FacesContext%29)`false`

```
FacesContext context = FacesContext.getCurrentInstance();

if (!context.getRenderKit().getResponseStateManager().isPostback(context)) {
    // Not a postback. Do your job here.
} 
```

请注意，`FacesContext#isPostback()`在 JSF 2.x 中有更短的方法，但由于您使用的是旧版 JSP，我假设您仍在使用旧版 JSF 1.x。

### 也可以看看：

*   [如何知道我是否处于回发状态？](https://stackoverflow.com/questions/427272/how-to-know-if-i-am-in-a-postback)

* * *

**与具体问题**无关**，自十年前的 JSP 2.0 以来不鼓励使用*scriptlet 。*建议在普通 Java 类中执行该作业。例如，在支持 bean 的（后）构造函数中。您可以使用`<a4j:keepAlive>`在 JSF 1.x 请求范围 bean 上模拟新的 JSF 2.0 视图范围。**

 **### 也可以看看：

*   [JSF 1.2：如何在同一视图的回发中保持请求范围的托管 bean 活动？](https://stackoverflow.com/questions/5897262/jsf-1-2-how-to-keep-managed-bean-with-request-scope)**

# c# - 在 umbraco 的子模板中使用提交按钮控件

> ID：13920857
> 
> 赞同：0
> 
> 时间：2012-12-17T19:32:28.767
> 
> 标签：c#, templates, controls, submit, umbraco

我了解到在 umbraco 中，我们必须为自定义用户控件使用主模板。我有一个自定义表单和一个提交按钮。我创建了一个控件，一旦按下“提交”按钮，就会发送一封电子邮件。该控件基本上会获取所有字段，如姓名、地址。当我创建一个新模板并插入宏时，它就可以工作。

但是，当我尝试将它与主模板一起使用时，它不起作用。提交按钮刷新页面，但从不转到我发送邮件的 c# 部分

如果我这样做

```
 <form name="myform" target="_self" method="post" action="index"> 
```

它转到索引页面，但没有发送电子邮件。

但它适用于干净或新的模板。有没有办法在 umbraco 4 编辑中使用带有主模板的自定义控件 - 这就是我使用宏的方式

```
<form name="myform" target="_self" method="post" action="index">    
   <umbraco:Macro Alias="sendMail" runat="server"></umbraco:Macro>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:40:15.197

查看代码，您似乎缺少`runat="server"`表单标签上的属性。

```
<form name="myform" runat="server">    
   <umbraco:Macro Alias="sendMail" runat="server"></umbraco:Macro>
</form> 
```

通过使用该`runat=server`属性，表单标签将使用正确的属性呈现。请注意，您只能`runat="server"`在一个页面上拥有一个表单。

[在W3Schools](http://www.w3schools.com/aspnet/aspnet_forms.asp)上有更多关于这个概念的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:14:01.650

我假设您使用的是 ASP.NET WebForms。我有 Umbraco 网站，其中我还使用主模板和包含表单的宏。这应该可以正常工作。我注意到你设置了被忽略的“action”属性。此外，“method”属性的默认值为“post”，因此您无需同时设置这两个属性。

一个 ASP.NET Webform 总是发布到自己，所以你可以在这里删除“目标”属性。我不确定删除这些“不需要的”属性会解决您的问题。

如果没有，您是否使用嵌套的 .NET 表单？这也是抛出错误和奇怪的行为。

# java - 如何关闭通过 Spring 创建的 jdbc 连接？

> ID：13920861
> 
> 赞同：2
> 
> 时间：2012-12-17T19:32:50.303
> 
> 标签：java, spring, jdbctemplate

我已经构建了一个应用程序 (app1)，它查看并记录数据库中的某些字段。此应用程序与另一个应用程序 (app2) 共享数据库，该应用程序在启动时需要单独连接，但一旦启动 (app2) 就可以允许其他连接到数据库。在我的应用程序（app1）中，我使用 Spring 创建了一个 dao 对象来连接到数据库，显然，连接永远不会关闭，这导致 app2 在启动时崩溃。根据我的阅读，Spring 应该自动处理打开和关闭它管理的所有数据库连接。我不确定我可以分享任何代码来帮助更好地描绘我的问题，但如果需要一些代码，我会发布我能做的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:36:56.170

如果您使用 JDBC 模板，则不必担心显式关闭连接，Spring 将负责内部管理连接池并从该池获取/释放连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:43:59.287

在应用程序之间共享连接时，我建议使用连接池。连接的打开和关闭可以通过注释（@Transactional）的声明性事务划分来完成。

[http://faheemsohail.com/2012/01/configuring-c3p0-connection-pooling-with-spring-and-hibernate/](http://faheemsohail.com/2012/01/configuring-c3p0-connection-pooling-with-spring-and-hibernate/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T19:34:55.033

这对你有用吗？

```
 public  void closeCon() {

  {
   if (con != null)
    try {
     con.close();

    } catch (SQLException e) {
     e.printStackTrace();
    } 
```

# ios - 在 iOS 中保存访问令牌的最佳实践

> ID：13920863
> 
> 赞同：3
> 
> 时间：2012-12-17T19:33:05.887
> 
> 标签：ios, cocoa-touch, security, nsuserdefaults, access-token

我目前正在开发一个需要以某种方式存储访问令牌的 iPhone 应用程序。我只是将它保存在 NSUserdefaults 中，但我认为它不是保存此类敏感数据的最安全方式。所以我现在的问题是：

在 iOS 设备上存储此类数据的最佳和最安全的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T19:38:37.493

> 我只是将其保存在内部`NSUserDefaults`，但我认为这不是保存此类敏感数据的最安全方式。

几乎。`NSUserDefaults`使用明文存储数据，因此不安全。如果您想更安全一点，可以将数据存储在[钥匙串](https://developer.apple.com/library/mac/#documentation/security/Conceptual/keychainServConcepts/iPhoneTasks/iPhoneTasks.html)中（但是，即使是这种被认为是安全的存储[也可以很容易地转储](https://github.com/ptoomey3/Keychain-Dumper)......）

# python - 使用 xlwt 调整 Excel 单元格宽度以适合文本

> ID：13920865
> 
> 赞同：3
> 
> 时间：2012-12-17T19:33:24.900
> 
> 标签：python, excel, xlwt, file-writing

我正在制作一个写入 Excel 文件的 Python 应用程序。我的问题是，当我将数据写入比单元格长的单元格时，excel 会“隐藏”它。

我想知道单元格如何根据文本的长度自动调整其宽度？我正在使用 xlwt 包编写 Excel 文件。

# ios - iOS - 如何构建具有“密码锁”外观的子视图 - 就像在 settings.bundle 中一样

> ID：13920868
> 
> 赞同：0
> 
> 时间：2012-12-17T19:33:37.717
> 
> 标签：ios, settings.bundle

我想在 settings.bundle 中有一个子视图，它的工作方式类似于设置-> 常规中的密码锁定部分。

更具体地说，我希望有一个子视图，其功能是我可以更改我的应用程序中使用的访问密钥，要求旧的更改为新的。

有人有一些代码，线索，教程？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:38:53.013

你看过苹果文档吗？它解释了如何做到这一点。

[http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

或查看本教程[http://www.informit.com/articles/article.aspx?p=1846575&seqNum=12](http://www.informit.com/articles/article.aspx?p=1846575&seqNum=12)

如果您想让它看起来就像密码锁定屏幕一样，那将很难做到。Apple 将开发人员的功能限制在其应用程序的设置菜单中。您可以只在屏幕上放置 4 个文本框，但它无法自动转到下一个框，因为您无法将代码添加到设置包中。

# python - Django 1.3.1 无法创建 sqlite 数据库

> ID：13920869
> 
> 赞同：0
> 
> 时间：2012-12-17T19:33:38.693
> 
> 标签：python, django

我在创建默认 sqlite3 数据库时遇到问题，我不知道为什么：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'mydatabase',                      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

这是我在尝试和 syncdb 时收到的错误

```
Traceback (most recent call last):
  File "C:\Users\name\eclipseProjects\mysite\mysite\manage.py", line 9, in <module>
    execute_from_command_line(sys.argv)
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "C:\Python27\lib\site-packages\django\core\management\__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "C:\Python27\lib\site-packages\django\core\management\commands\syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "C:\Python27\lib\site-packages\django\db\backends\dummy\base.py", line 15, in complain
    raise ImproperlyConfigured("You haven't set the database ENGINE setting yet.")
django.core.exceptions.ImproperlyConfigured: You haven't set the database ENGINE setting yet. 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T06:39:28.667

更仔细地阅读文档。NAME 应该并且必须是绝对路径。采取了文档部分 2.3.1

> NAME – 您的数据库的名称。如果您使用 SQLite，数据库将是您计算机上的一个文件；在这种情况下，NAME 应该是该文件的完整绝对路径，包括文件名。如果该文件不存在，当您第一次同步数据库时会自动创建它（见下文）。
> 
> 指定路径时，请始终使用正斜杠，即使在 Windows 上也是如此（例如 C:/homes/user/mysite/sqlite3.db）。

# python - Tkinter 窗口在退出时崩溃

> ID：13920874
> 
> 赞同：2
> 
> 时间：2012-12-17T19:34:01.733
> 
> 标签：python, tkinter, exit

我很难开始使用 Tkinter。我所有的窗户似乎在试图关闭时都崩溃了。（也就是说，它们在 IDLE 中将执行返回到提示符，但窗口保持打开状态，退出按钮保持按下状态。窗口没有响应，必须在 Windows 中手动终止。）最直接的例子来自《快速入门》一书蟒蛇书”。这是代码：

```
from tkinter import *
import sys
win = Tk()
b = Button(win, text="Goodbye",command=sys.exit)
b.pack()
mainloop() 
```

Python 给了我以下错误信息：

```
Traceback (most recent call last):
  File "C:/Python Scripts/Quick Python Practice Programs/TKinter Practice.py", line
6, in <module>
    mainloop()
  File "C:\Python32\lib\tkinter\__init__.py", line 317, in mainloop
    _default_root.tk.mainloop(n)
  File "C:\Python32\lib\tkinter\__init__.py", line 1401, in __call__
    raise SystemExit(msg)
SystemExit 
```

我从 IDLE shell 调用它，我很确定它没有设置为 ==No Subprocesses==。当我重新启动 shell 时，我得到一个 ==Restart== 。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:17:47.680

我认为您看到了与在 IDLE 中运行相关的内容——独立的 Tkinter 脚本不会表现出这种行为。

在 IDLE 下运行时将其归为异常。

# android - 在服务中使用游标或通过绑定发送数据到服务

> ID：13920877
> 
> 赞同：2
> 
> 时间：2012-12-17T19:34:23.067
> 
> 标签：android, service, binding, cursor

我有一个包含位置集合的 Sqlite 数据库。内容提供者用于访问此数据库。

然后，通过单击活动中的位置列表，这些位置将在数据库中标记为活动或非活动。

然后运行一个服务，该服务将监听活动位置并在到达该位置时执行某些操作。

我的问题是服务运营的最佳方式是什么。

要么让它监视活动位置的光标，该光标会在数据更改时自动更新。包含位置列表的所有活动都必须将位置设置为活动，然后调用服务意图以确保其运行。

在我看来，这样做的好处是，无论数据库中发生什么，服务都是最新的。但是我不确定每次位置更改时保持打开的光标并遍历它是否有效。

另一种方法是让活动在数据库中将位置设置为活动，然后绑定到服务并将位置数据发送给它以进行收听。然后，服务将其存储在一个列表数组中，每当位置发生变化时，都会遍历列表以查看是否已到达该位置。

这样做的缺点是，对于每个位置修改，服务都必须绑定到并且位置会改变。一个优点可能是没有打开游标，并且只存储了一个带有位置的小列表数组。

那么是在服务中游标还是绑定到服务？还是我错过了更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T21:32:49.637

这是效率与代码复杂性的平衡。

我会在提供者上注册一个观察者，然后在每次修改提供者时更新我的​​活动位置列表，然后我会根据当前位置扫描列表。观察者不需要与游标关联，尽管在调用 ContentObserver.onChange() 时您必须重新查询提供者。

记得在*后台*做这项工作。使用 IntentService 或编写自己的运行 HandlerThread 的服务；我更喜欢使用 IntentService 或 Service，因为它们不受 Activity 生命周期事件的影响，就像 AsyncTask 一样。

# android - Facebook AsyncTask 实现

> ID：13920889
> 
> 赞同：0
> 
> 时间：2012-12-17T19:34:49.540
> 
> 标签：android, facebook, android-asynctask

我的代码如下。我在实现 Async Task 时遇到了麻烦，Async Task 的 android 文档对我来说有点令人困惑。谁能用清晰的步骤向我解释？

这是我的代码：

```
package com.sara.facebookappl;

import java.io.IOException;
import java.net.MalformedURLException;

import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Looper;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.Util;

public class MainActivity extends Activity implements OnClickListener, DialogListener {

Facebook fb; 
ImageView button; 
private SharedPreferences sp; 
TextView welcome; 
Button post; 

@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    post=(Button)findViewById(R.id.button1);

    String APP_ID = getString(R.string.APP_ID);
    fb= new Facebook(APP_ID);

    Looper.prepare(); 
    new PostTask().execute(fb);
    Looper.loop(); 

    sp =getPreferences(MODE_PRIVATE);
    String access_token=sp.getString("access_token", null);
    long expires=sp.getLong("access_expires", 0);

    if (access_token !=null) {
        fb.setAccessToken(access_token);
    }
    if(expires !=0) {
        fb.setAccessExpires(expires);
    }

    button=(ImageView)findViewById(R.id.login);
    button.setOnClickListener((OnClickListener) this);
    updateButtonImage();

}

private class PostTask extends AsyncTask<Facebook, Integer, String> {

    ProgressDialog dialog; 

    protected void onPreExecute() {
        dialog = new ProgressDialog(MainActivity.this);
        dialog.setProgress(ProgressDialog.STYLE_HORIZONTAL);
        dialog.setMax(100);
        dialog.show();

    }

    @SuppressWarnings("deprecation")
    @Override
    protected String doInBackground(Facebook... params) {
        if (fb.isSessionValid()) {
            button.setImageResource(R.drawable.com_facebook_loginbutton_blue);
            // ^logout button

        JSONObject obj=null;

        try {
        String jsonUser= fb.request("me");
        obj = Util.parseJson(jsonUser);
        String name = obj.optString("name");
        welcome.setText("Welcome, " + name);
        }catch(FacebookError e) {
            e.printStackTrace();

        }catch (JSONException e) {
            e.printStackTrace();
        }catch (MalformedURLException e) {
            e.printStackTrace();
        }catch (IOException e) {
            e.printStackTrace();
        }

        }else {
            post.setVisibility(Button.VISIBLE);
            button.setImageResource(R.drawable.com_facebook_loginbutton_blue);
        }
        return null;
    }
}

protected void onProgressUpdated(Integer...progress) {

}

@SuppressWarnings("deprecation")
protected void onPostExecute(Facebook result) {

        // ^logout button
    try {JSONObject obj=null;
    String jsonUser= fb.request("me");
    obj = Util.parseJson(jsonUser);
    String name = obj.optString("name");
    welcome.setText("Welcome, " + name);}
    catch(FacebookError e) {
        e.printStackTrace();

    }catch (JSONException e) {
        e.printStackTrace();
    }catch (MalformedURLException e) {
        e.printStackTrace();
    }catch (IOException e) {
        e.printStackTrace();
    }
}

private void updateButtonImage() {
    // TODO Auto-generated method stub

    post.setVisibility(Button.VISIBLE);
    button.setImageResource(R.drawable.com_facebook_loginbutton_blue);
    //logout button

}

@SuppressWarnings("deprecation")
public void buttonClicks(View v) {
    switch (v.getId()) {
        case R.id.button1:
            //post

            Bundle params= new Bundle();

            params.putString("name", "User X"); 
            params.putString("caption", "Rating"); 
            params.putString("description", "User X Rated"); 
            params.putString("link", "http://..."); 

            fb.dialog(MainActivity.this, "feed", params, new Facebook.DialogListener() {

                @Override
                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onError(DialogError e) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onCancel() {
                    // TODO Auto-generated method stub

                }
            });
            break;
    }
}
@SuppressWarnings("deprecation")
public void onClick(View v) {
    if(fb.isSessionValid()) {

        try {
        fb.logout(getApplicationContext());
        updateButtonImage();
        //button will close our our session
    }catch(MalformedURLException e) {
        e.printStackTrace();
    } catch(IOException e) {
        e.printStackTrace();
    }
}else{
        //login into facebook
        fb.authorize(MainActivity.this, new String[] {"email"}, new Facebook.DialogListener() {

            @Override
            public void onFacebookError(FacebookError e) {
                // TODO Auto-generated method stub
                Toast.makeText(MainActivity.this, "fbError", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onError(DialogError e) {
                // TODO Auto-generated method stub
                Toast.makeText(MainActivity.this, "onError", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onComplete(Bundle values) {
                // TODO Auto-generated method stub
                Editor editor=sp.edit();
                editor.putString("access_token", fb.getAccessToken());
                editor.putLong("access_expires", fb.getAccessExpires());
                editor.commit();
                updateButtonImage();
            }

            @Override
            public void onCancel() {
                // TODO Auto-generated method stub
                Toast.makeText(MainActivity.this, "onCancel", Toast.LENGTH_SHORT).show();
            }
        });

        }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@SuppressWarnings("deprecation")
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    fb.authorizeCallback(requestCode, resultCode, data);
}

@Override
public void onComplete(Bundle values) {
    // TODO Auto-generated method stub

}

@Override
public void onFacebookError(FacebookError e) {
    // TODO Auto-generated method stub

}

@Override
public void onError(DialogError e) {
    // TODO Auto-generated method stub

}

@Override
public void onCancel() {
    // TODO Auto-generated method stub

} 
```

}

这是 logcat 错误：

```
12-17 19:24:04.886: E/AndroidRuntime(862): FATAL EXCEPTION: AsyncTask #1
12-17 19:24:04.886: E/AndroidRuntime(862): java.lang.RuntimeException: An error occured      while executing doInBackground()
12-17 19:24:04.886: E/AndroidRuntime(862):  at     android.os.AsyncTask$3.done(AsyncTask.java:299)
12-17 19:24:04.886: E/AndroidRuntime(862):  at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
12-17 19:24:04.886: E/AndroidRuntime(862):  at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
12-17 19:24:04.886: E/AndroidRuntime(862):  at java.util.concurrent.FutureTask.run(FutureTask.java:239)
12-17 19:24:04.886: E/AndroidRuntime(862):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
12-17 19:24:04.886: E/AndroidRuntime(862):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
12-17 19:24:04.886: E/AndroidRuntime(862):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
12-17 19:24:04.886: E/AndroidRuntime(862):  at java.lang.Thread.run(Thread.java:856)
12-17 19:24:04.886: E/AndroidRuntime(862): Caused by: java.lang.NullPointerException
12-17 19:24:04.886: E/AndroidRuntime(862):  at com.sara.facebookappl.MainActivity$PostTask.doInBackground(MainActivity.java:97)
12-17 19:24:04.886: E/AndroidRuntime(862):  at com.sara.facebookappl.MainActivity$PostTask.doInBackground(MainActivity.java:1)
12-17 19:24:04.886: E/AndroidRuntime(862):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
12-17 19:24:04.886: E/AndroidRuntime(862):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
12-17 19:24:04.886: E/AndroidRuntime(862):  ... 4 more 
```

编辑：我改变了它，我仍然得到这些日志猫错误：

```
12-17 20:22:22.659: E/AndroidRuntime(794): FATAL EXCEPTION: main
12-17 20:22:22.659: E/AndroidRuntime(794): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sara.facebookappl/com.sara.facebookappl.MainActivity}:     java.lang.RuntimeException: Only one Looper may be created per thread
12-17 20:22:22.659: E/AndroidRuntime(794):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-17 20:22:22.659: E/AndroidRuntime(794):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-17 20:22:22.659: E/AndroidRuntime(794):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-17 20:22:22.659: E/AndroidRuntime(794):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-17 20:22:22.659: E/AndroidRuntime(794):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 20:22:22.659: E/AndroidRuntime(794):  at android.os.Looper.loop(Looper.java:137)
12-17 20:22:22.659: E/AndroidRuntime(794):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-17 20:22:22.659: E/AndroidRuntime(794):  at java.lang.reflect.Method.invokeNative(Native Method)
12-17 20:22:22.659: E/AndroidRuntime(794):  at java.lang.reflect.Method.invoke(Method.java:511)
12-17 20:22:22.659: E/AndroidRuntime(794):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 
```

12-17 20:22:22.659: E/AndroidRuntime(794): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 12-17 20:22:22.659: E/AndroidRuntime(794) : at dalvik.system.NativeStart.main(Native Method) 12-17 20:22:22.659: E/AndroidRuntime(794): Caused by: java.lang.RuntimeException: only one Looper may be created per thread 12-17 20 :22:22.659: E/AndroidRuntime(794): 在 android.os.Looper.prepare(Looper.java:78) 12-17 20:22:22.659: E/AndroidRuntime(794): 在 android.os.Looper。准备（Looper.java:73）12-17 20:22:22.659：E/AndroidRuntime（794）：在 com.sara.facebookappl.MainActivity.onCreate（MainActivity.java:53）12-17 20:22:22.659： E/AndroidRuntime(794): 在 android.app.Activity.performCreate(Activity.java:5104) 12-17 20:22:22.659: E/AndroidRuntime(794): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 12-17 20:22:22.659: E/AndroidRuntime(794): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:04:46.287

```
 welcome.setText("Welcome, " + name); 
```

除非我在某个地方错过了它，否则我不相信您曾经正确初始化“欢迎”。我认为，您应该在 onCreate 中为此找到ViewById()。我怀疑这是nullref。

# php - PHP，将字符串保存为文本。（输出）

> ID：13920893
> 
> 赞同：0
> 
> 时间：2012-12-17T19:35:01.433
> 
> 标签：php, html

PHP

```
<?php
if ($changefile) {
    $savedEdit = stripslashes($_POST['filetest']);
    $filetochange = "../dashboard/list.ini";
    $filetochangeOpen = fopen($filetochange,"w") or die ("Error editing.");
    fputs($filetochangeOpen,$savedEdit);
    fclose($filetochangeOpen) or die ("Error Closing File!");
}
?> 
```

HTML 表单

```
<form method=post action="mmtst.php">   
    <textarea rows="40" cols="60" name="filetest">
    <?
        // Implode CSS
        $filetochange = "../dashboard/list.ini";
        print (implode("",file($filetochange)));
    ?>
    </textarea><br/><br/>
    <input type="submit" value="Save Changes" name="changefile">
</form> 
```

在这里，我有一个在文本框中显示 INI 文件的页面。应该发生的是，当我单击提交按钮时，原始文件被打开，并且 fputs 使用 txtbox 中显示的任何内容写入原始文件。（原始文件设置为权限 777）。但是，单击提交按钮时没有任何反应，我不知道我做错了什么，任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:38:32.733

您正在检查一个

```
if ($changefile) { 
```

您需要检查变量的 $_POST 版本，就像检查“filetest”变量一样，因此您应该例如...

```
if (isset($_POST["changefile"])) { 
```

否则条件永远不会返回 true，并且代码块不会被执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:43:52.493

问题很简单，您禁用了[register_globals](http://php.net/manual/pt_BR/ini.core.php#ini.register-globals)并且您正在尝试使用它，此设置允许 PHP 根据从 GET 和 POST 数据接收到的参数自动定义变量，但它被认为是**不安全**的并且已被**弃用**。

要访问帖子中传递的值以使用[$_POST](http://php.net/manual/pt_BR/reserved.variables.post.php)变量，获取使用[$_GET](http://php.net/manual/pt_BR/reserved.variables.get.php)

```
if( isset( $_POST["changefile"] ) ) { 
```

如果您只想检查是否提交了一个帖子表单，您可以`!empty($_POST)`留下没有名称的提交按钮：

```
<?php //...
if( !empty($_POST) ) {
//...
?>
<input type="submit" value="Save Changes"> 
```

# css - DIV 以外的元素的 CSS“溢出”属性

> ID：13920895
> 
> 赞同：0
> 
> 时间：2012-12-17T19:35:18.197
> 
> 标签：css, html, overflow

**CSS 属性是否`overflow`适用于`div`s，或者是否有其他支持该属性的 HTML 元素列表？**

我尝试使用：

```
<span style="overflow:auto;"><img src="hs.gif" alt="Horizontal Scroll"></span> 
```

但是当内容被部分隐藏时，它似乎没有应用水平滚动条，例如`div`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:36:18.850

**初始值：可见

适用于：块和内联块元素、表格单元格

继承：没有

媒体：视觉

指定的计算值**

更多详情[https://developer.mozilla.org/en-US/docs/CSS/overflow](https://developer.mozilla.org/en-US/docs/CSS/overflow)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:37:48.053

`overflow`适用于[*块*级元素](https://developer.mozilla.org/en-US/docs/HTML/Block-level_elements)。

Span 是一个*内联*元素（原样`img`），因此不适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:38:16.750

它适用于大多数*元素；问题是您的`<span>`扩展包含您的图像。（有一个滚动条需要什么宽度？）给它一个宽度（要做到这一点，它也不能是内联的；`<span>`s 的默认值）：

```
<span style="overflow: auto; display: inline-block; width: 100px;"> 
```

[现在它可以工作了。](http://jsfiddle.net/minitech/GgFCk/)

^(* 大多数：块级元素、表格单元格、内联表和内联块元素。[文档在这里。](http://www.w3.org/wiki/CSS/Properties/overflow))

# java - 了解内存设置的 Windows Java 命令行

> ID：13920897
> 
> 赞同：1
> 
> 时间：2012-12-17T19:35:26.650
> 
> 标签：java

我正在寻找一个 Windows 命令行，它可以告诉我设置了多少内存设置来启动应用程序。

如果我执行“java -jar my.jar”，Windows 7 JRE 1.6 的默认设置是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T19:40:29.293

如果您使用的是 Sun 的 JVM，`-XX:+PrintFlagsFinal`将打印出所有 JVM 设置：

```
java -XX:+PrintFlagsFinal ... 
```

最大堆大小显示为`MaxHeapSize`：

```
uintx MaxHeapSize                              := 1073741824      {product} 
```

该值以字节为单位，因此在上面的示例中为 1GB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T19:44:31.800

您可以使用`jinfo`（它是 JDK 的一部分）来显示启动 JVM 的环境。如果指定了任何非标准设置，它也会显示它们：

```
正在附加到进程 ID 2520，请稍候...
调试器连接成功。
检测到客户端编译器。
JVM版本是23.3-b01

Java 系统属性：

java.runtime.name = Java(TM) SE 运行时环境
java.vm.version = 23.3-b01
...
java.vm.specification.name = Java 虚拟机规范
java.runtime.version = 1.7.0_07-b10
java.awt.graphicsenv = sun.awt.Win32GraphicsEnvironment
os.arch = x86

java.vm.specification.vendor = 甲骨文公司
...
java.specification.name = Java 平台 API 规范
java.class.version = 51.0
sun.management.compiler = HotSpot 客户端编译器
user.timezone = 欧洲/柏林
java.awt.printerjob = sun.awt.windows.WPrinterJob
java.vm.info = 混合模式，共享
java.version = 1.7.0_07

...

虚拟机标志：

-Xmx512m

```

# c# - 根据点对划分一个矩形

> ID：13920898
> 
> 赞同：8
> 
> 时间：2012-12-17T19:35:31.190
> 
> 标签：c#, algorithm, math

[示例 http://xthlegion.co.uk/images/dividerectangle.png](http://xthlegion.co.uk/images/dividerectangle.png) [示例 http://xthlegion.co.uk/images/dividerectangle2.png](http://xthlegion.co.uk/images/dividerectangle2.png)

如果您考虑上面的图像，您可以看到它们由一个大矩形组成，这些矩形通过用户定义的坐标对分解为较小的矩形（示例图像中的每一对都用不同的颜色标识）。

我要做的是仅通过定义连接来获取这些矩形的坐标。边被视为显式连接。顺序无所谓。

有谁知道执行此操作的算法的名称（我敢肯定有一个名字很花哨！）或者有一些示例 C# 代码？一段时间以来，我一直在努力尝试自己做这件事，但收效甚微。又一次数学完全失败！

**更新：**
只是想我会根据收到的评论快速更新这个问题。

1.  线必须是直的，因此每对坐标将在一个轴上对齐
2.  坐标必须从边或另一对的交点开始。第二个坐标必须以类似的方式结束。任何不开始/结束另一个加入的“孤儿”坐标都是非法的，我现在应该忽略它们，一旦我终于开始思考，应该可以进行捕捉。
3.  尽管在这个例子中，所有的线对都或多或少地整齐地划分了矩形，但在实践中情况并非如此，并且可能有许多线创建了多种尺寸的矩形。

**第二次更新 - 它有效:)**
[示例 http://xthlegion.co.uk/images/dividerectangle3.png](http://xthlegion.co.uk/images/dividerectangle3.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:15:41.227

您要计算的是已知的[**线段排列**](http://en.wikipedia.org/wiki/Arrangement_of_lines)。（这不是一个特别好的名字，但它似乎是我们坚持使用的名字！）计算它：

1.  找到一组交点（两条线段相交或相交的所有点）。这可以通过[Bentley-Ottmann 算法](http://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm)来计算。如果有*n 个*线段和*k*个交叉点，则需要 O(( *n* + *k* ) log *n* )。（但如果你只有几条线段，最好使用简单的 O( *n* ² ) 算法。）

2.  通过一些额外的簿记，您可以记录在每个交叉点发生了哪些边，从而计算出与您的一组线段相对应的[**平面直线图(PSLG)。**](http://en.wikipedia.org/wiki/Planar_straight-line_graph)

3.  将 PSLG 转换为四边[**数据结构**](http://en.wikipedia.org/wiki/Quad-edge_data_structure)。这需要两个步骤。首先，通过按角度对入射到每个顶点的边进行排序，找到数据结构中的边-边连接。

4.  选择一条尚未连接到两个面的边，在未连接的一侧创建一个面，然后围绕该面的边界依次将其连接到每个边。重复直到每条边都连接到两个面。

通常，这会产生矩形以外的面（即使所有线段都是轴对齐的并且所有交点都具有整数坐标），但在您的应用程序中可能不会发生这种情况，或者您可以丢弃非矩形面。

![](../Images/be1a2ea4af11b7894ebfab8adc0a77da.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:55:41.870

答案假定以下规则，我认为在任何情况下都是必要的：

**用户只能使用水平或垂直线细分现有矩形。**

这意味着在您的第一个示例中，细分的顺序必须是：
**棕色、黄色、蓝绿色。**

对于您使用的任何矩形类，定义两个扩展方法：`SubdivideHorizontal`and `SubdivideVertical`，它将接受细分的坐标，并将返回细分的两个结果矩形。
对于您细分的每个矩形，将其替换为两个生成的细分矩形，并递归地重复所有细分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T19:41:57.177

我会做以下事情。

1.  在外 4 个角的每一个上创建一个点。
2.  在每个用户定义的点上创建一个点。
3.  每当一条线穿过一个空点时创建一个点。
4.  遍历每个正方形并检查所有四个角上是否都有一个点。

# java - primefaces 提交表单以保存

> ID：13920899
> 
> 赞同：3
> 
> 时间：2012-12-17T19:35:32.383
> 
> 标签：java, xhtml, primefaces

我的代码片段如下：

```
<h:form>
                <p:panel id="projectLabel" header="Yeni Proje" style="margin-bottom:10px;">
                    <p:messages id="messages" />

                    <h:panelGrid columns="2">

                        <h:outputLabel for="projectname" value="Proje Adı :" />
                        <p:inputText id="projectname" value="" label="ProjectName">
                            <f:validateLength minimum="2" />
                        </p:inputText>
                        <p:message for="projectname" />
                        <h:outputText value="" />

                        <h:outputLabel for="sector" value="Sektör :" />
                        <p:inputText id="sector" value=""  label="Sector"/>
                        <p:message for="sector" />
                        <h:outputText value="" />

                        <center>
                            <p:commandButton ajax="false" value="Kaydet" icon="ui-icon-disk" action="#{createProject.create()}" />
                        </center>
                    </h:panelGrid>
                </p:panel>
            </h:form> 
```

我想做的是，当用户单击保存按钮时，表单的所有条目都将被触发到一个 java 类以保存数据库。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:21:33.353

这是一个后备豆

```
@ManagedBean(name="saveData")
@ViewScoped
public class SaveData {

    private String projectName;
    private String sector;

    public SaveData(){}

    //getters setters

    public void save(){
        // you have your data here
    }
} 
```

这是HTML

```
<p:panel id="projectLabel" header="Yeni Proje"
    style="margin-bottom:10px;">
    <p:messages id="messages" />

    <h:panelGrid columns="2">

        <h:outputLabel for="projectname" value="Proje Adı :" />
        <p:inputText id="projectname" value="#{saveData.projectName}"
            label="ProjectName">
            <f:validateLength minimum="2" />
        </p:inputText>
        <p:message for="projectname" />
        <h:outputText value="" />

        <h:outputLabel for="sector" value="Sektör :" />
        <p:inputText id="sector" value="#{saveData.projectName}"
            label="Sector" />
        <p:message for="sector" />
        <h:outputText value="" />

        <center>
            <p:commandButton ajax="false" value="Kaydet" icon="ui-icon-disk"
                action="#{saveData.save}" />
        </center>
    </h:panelGrid>
</p:panel>
</h:form> 
```

# vim - 搜索和替换正斜杠

> ID：13920904
> 
> 赞同：5
> 
> 时间：2012-12-17T19:35:48.963
> 
> 标签：vim

我正在尝试用单个斜杠“/”替换多个正斜杠“//”。

你会怎么做？

另外，您如何将“asd/qwe/zxc”替换为“fgh/vbn”？

我能够使用下面的方法做到这一点。但是如何在搜索字符串或替换字符串中使用正斜杠。

```
:%s/asd.qwe.zxc/fgh/g 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T19:39:08.330

要么转义它，要么使用不同的分隔符。

```
:s/\/\//\//g
:s#//#/#g 
```

我更喜欢后者。

错过了第二部分：

```
:s/asd\/qwe\/zxc/fgh\/vbn/g
:s@asd/qwe/zxc@fgh/vbn@g 
```

您可以使用与`ed`或中相同的方式选择所需的任何分隔符`sed`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T19:39:08.550

您可以尝试使用：

```
:%s/\/\//\//g 
```

用单斜杠替换所有双斜杠（尽管我想大师很快就会展示一种更酷的方式:)）。一般的想法是你需要避开斜线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T19:40:50.110

尝试这个

`Esc :`

`:1,$s/asd\/qwe\/zxc/fgh\/vbn/g`

您需要使用反斜杠 '\' 转义 '/' 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-20T08:14:29.457

```
:%s/\/\//\#/gc 
```

It replaces OpenSCAD comment (//) to Python comment (#).

```
 // Faces: 60
    F = [
        [ 0,  1,  2], //  0
        [ 1,  3,  4], //  1
        [ 1,  4,  2], //  2
        [ 2,  4,  5], //  3
        [ 0,  2,  6], //  4

    # Faces: 60
    F = [
        [ 0,  1,  2], #  0
        [ 1,  3,  4], #  1
        [ 1,  4,  2], #  2
        [ 2,  4,  5], #  3
        [ 0,  2,  6], #  4 
```

# ios - 从 tableView 单元格中切换删除/添加子视图

> ID：13920906
> 
> 赞同：0
> 
> 时间：2012-12-17T19:35:57.207
> 
> 标签：ios, uitableview

我的 tableView 有一个带有分段控件的标题。段 0 将显示我的 tableView 3 行和段 1 将显示它 4 行。

在每个单元格中，我都添加了一个 textField 子视图。因此，在第 0 段，我将有三行包含邮政编码、半径和 API 密钥。对于第 1 段，我将有四行包含纬度、经度、半径和 API 密钥。但是，当我来回切换时，没有正确删除 textField 子视图。（Radius 和 API Key 字段是相同的字段，但切换时它们会显示在不同的行上。）

我曾尝试标记 textFields，然后使用该标记删除 textField，但这是不稳定的。我已经测试了 textField 是否存在，如果存在，请在切换时将其删除。（这在下面的示例代码中。）我也尝试过使用 segmentChanged 方法无济于事。

请查看我的代码，我将不胜感激任何指针，因为我不确定在哪里以及如何最好地删除这些子视图。

![在此处输入图像描述](../Images/5fe93c6f6609333018a91c784a63574a.png) ![在此处输入图像描述](../Images/0833ec56c95410bfb5d7cebdf474c7f8.png)

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        if ([mySegmentControl selectedSegmentIndex] == 0) {
            return 3;
        } else {
            return 4;
        }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    if ([mySegmentControl selectedSegmentIndex] == 0) {

        if (latField) {
            [latField removeFromSuperview];
            [longField removeFromSuperview];
            [radiusField removeFromSuperview];
            [apiKeyField removeFromSuperview];

        }

        if ([indexPath row] == 0 && [indexPath section] == 0) {

            zipCodeField = [[UITextField alloc] initWithFrame:CGRectMake(135, 10, 145, 30)];   
            [[cell textLabel] setText:@"Zip Code:"];
            [cell.contentView addSubview:zipCodeField];

        } else if ([indexPath row] == 1 && [indexPath section] == 0) {

            radiusField = [[UITextField alloc] initWithFrame:CGRectMake(135, 10, 145, 30)];            
            [[cell textLabel] setText:@"Radius:"];
            [cell.contentView addSubview:radiusField];

        } else if ([indexPath row] ==2 && [indexPath section] == 0) {

            apiKeyField = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 145, 30)];
            [[cell textLabel] setText:@"API Key:"];
            [cell.contentView addSubview:apiKeyField];

    }

    else if ([mySegmentControl selectedSegmentIndex] == 1) {

        if (zipCodeField) {
            [zipCodeField removeFromSuperview];
            [radiusField removeFromSuperview];
            [apiKeyField removeFromSuperview];
        }

        if ([indexPath row] == 0 && [indexPath section] == 0) {

            latField = [[UITextField alloc] initWithFrame:CGRectMake(135, 10, 145, 30)];
            [[cell textLabel] setText:@"Latitude:"];
            [cell.contentView addSubview:latField];

        } else if ([indexPath row] ==1 && [indexPath section] == 0) {

            longField = [[UITextField alloc] initWithFrame:CGRectMake(135, 10, 145, 30)];
            [[cell textLabel] setText:@"Longitude:"];
            [cell.contentView addSubview:longField];

        } else if ([indexPath row] ==2 && [indexPath section] == 0) {

            radiusField = [[UITextField alloc] initWithFrame:CGRectMake(135, 10, 145, 30)];
            [[cell textLabel] setText:@"Radius:"];
            [cell.contentView addSubview:radiusField];

        } else if ([indexPath row] == 3 && [indexPath section] == 0) {

            apiKeyField = [[UITextField alloc] initWithFrame:CGRectMake(110, 10, 145, 30)];          
            [[cell textLabel] setText:@"API Key:"];
            [cell.contentView addSubview:apiKeyField];
        }

    }
    return cell;
}

- (IBAction)segmentChanged:(id)sender {

    [storeFinderTableView reloadData];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:13:55.170

没关系。我没有尝试重用我添加到 tableView 单元格的 textField，而是为每个单元创建了唯一的 textField，然后根据段控件测试并删除它们。

如：

```
if ([mySegmentControl selectedSegmentIndex] == 0) {

        if (latField) {
            [latField removeFromSuperview];
            [longField removeFromSuperview];
            [latRadiusField removeFromSuperview];
            [latApiKeyField removeFromSuperview];
        } 
```

然后将 textFields 添加到单元格的子视图，反之亦然，段 == 1。

# hibernate - 条件查询 - setFetchMode 与 createAlias，n+1 选择

> ID：13920908
> 
> 赞同：1
> 
> 时间：2012-12-17T19:36:00.297
> 
> 标签：hibernate, hibernate-mapping, criteria-api

我在 Car 和 Engine 之间有一个双向的一对一关联，映射如下：（使用 Hibernate 3.6）

```
<class name="org.example.Car">
    <id column="id" name="PID">
        <generator class="uuid2" />
    </id>
    <version name="Version" column="version" />

    <many-to-one cascade="all" name="Engine" not-null="true" unique="true" />
</class>
<class name="org.example.Engine">
    <id column="id" name="PID">
        <generator class="uuid2" />
    </id>
    <version name="Version" column="version" />

    <one-to-one cascade="all" name="Car" property-ref="Engine" />
</class> 
```

当我执行以下条件查询以加载所有汽车并急切获取它们的引擎时

```
session().createCriteria(Car.class)
   .setFetchMode("Engine", FetchMode.JOIN)
   .list(); 
```

我得到一个选择来查找所有汽车，然后为找到的每辆汽车选择另一个：

```
select this_.id  ... from Car this_ inner join Engine engine2_ on this_.Engine=engine2_.id
select car0_.id  ... from Car car0_ where car0_.engine=?
select car0_.id  ... from Car car0_ where car0_.engine=?
select car0_.id  ... from Car car0_ where car0_.engine=?
... 
```

`Engine`在设置每个加载的属性时，Hibernate 似乎会感到困惑。在`TwoPhaseLoad.initializeEntity`中，它尝试解析 Car 属性`Engine`并发出另一个选择。

如果使用 createAlias 而不是 setFetchMode，我会得到预期的单选并且一切正常：

```
session().createCriteria(Car.class)
   .createAlias("Engine", "engine")
   .list(); 
```

我的印象是这两个条件查询应该表现相同。我的映射有什么可以改变的吗？我应该开始使用 createAlias 而不是 setFetchMode 吗？

**更新：**所以，第二个查询也不好。它实际上加入了 Engine，然后再次加入 Car 以进行反向引用：

```
select this._id  ... from Car this_
   inner join Engine engine1_ on this_.engine=engine1_.id
   left outer join Car car3_ on engine1_.id=car3_.engine 
```

hibernate 似乎没有意识到它们是同一个关联的两端。从 Engine -> Car 中删除引用修复它，但如果我能在保留引用的同时让它工作，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:05:20.067

我认为您的问题与休眠中的错误有关。您可以检查那里发布的解决方法是否适合您。

[错误报告](https://hibernate.onjira.com/browse/HHH-3524)

# mongodb - MongoDB如何做到这一点where子句更新

> ID：13920918
> 
> 赞同：12
> 
> 时间：2012-12-17T19:36:39.343
> 
> 标签：mongodb

我有一个名为“Foo”的集合。我想更新 Foo 集合中`bar`值为 100 到 1000 的每个文档。在 MongoDB 中运行此更新以获得有效更新的最佳方法是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-17T19:43:44.740

使用[`$set`](http://docs.mongodb.org/manual/reference/operators/#_S_set)运算符来做到这一点：

```
db.foo.update({bar: 100}, {$set: {bar: 1000}}, false, true) 
```

第四个参数将`multi`选项设置为 true，以便您更新所有匹配的文档，而不仅仅是第一个。

**3.2 更新**

最近的 MongoDB 版本提供了[`updateMany`](https://docs.mongodb.com/manual/reference/method/db.collection.updateMany/)一种更直观的方法：

```
db.foo.updateMany({bar: 100}, {$set: {bar: 1000}}) 
```

# mysql - 根据条件搜索最旧条目的记录的最有效方法

> ID：13920925
> 
> 赞同：0
> 
> 时间：2012-12-17T19:36:57.453
> 
> 标签：mysql

由于我正在使用的数据库变得越来越大（并将继续扩展），这里非常初级的学习者希望以更有效的方式执行查询。

基本上，我有两个表（合作伙伴和注释），用于存储客户联系信息和对应于所拨打电话的注释。当数据库小得多时，下面的查询就可以很好地满足我的需要。但是，现在数据库已经大大扩展，查询时间太长了，而且在很多情况下会超时。我想知道是否有更有效的方法来执行此查询：

```
SELECT * FROM
(SELECT
partners.objectid,
partners.partner,
notes.note,
notes.datecreated,
notes.timecreated
FROM
notes
JOIN
partners
ON
notes.partnerid=partners.objectid
WHERE
partners.province
=
'BC'
AND
partners.type
=
'2'
ORDER BY
notes.datecreated DESC, notes.timecreated DESC) as noteq
GROUP BY
partner
ORDER BY
datecreated ASC, timecreated ASC
LIMIT 1 
```

我基本上有一个按钮，单击该按钮将在数据库中搜索最旧的现有笔记，然后返回与该笔记关联的客户。如果我可以提供任何其他信息，请告诉我。提前谢谢了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:34:29.227

@aurel.g 编写的查询可能会执行得很快，但我认为它不能满足您的要求。您似乎想要最古老的音符并获得合作伙伴。

上面的查询（也可能是您的查询）按合作伙伴分组，选择任意注释。然后它将返回最旧的任意音符。这不是一回事。

因此，如果您想要包含相关信息的最旧笔记，则需要以下内容：

```
SELECT partners.objectid, partners.partner, notes.note, notes.datecreated, notes.timecreated
FROM notes join
     partners
     ON notes.partnerid=partners.objectid
WHERE partners.province = 'AB' and
      partners.type = '2'
ORDER BY notes.datecreated ASC, notes.timecreated ASC
LIMIT 1 
```

关键的区别是这个查询没有`group by`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:44:06.097

我认为关键是避免子查询。

试试这种方法：

```
SELECT
    partners.objectid,
    partners.partner,
    notes.note,
    notes.datecreated,
    notes.timecreated

FROM notes

JOIN partners
    ON notes.partnerid=partners.objectid

WHERE partners.province = 'AB'
    AND partners.type = '2'

GROUP BY partners.partner

ORDER BY
    notes.datecreated ASC,
    notes.timecreated ASC

LIMIT 1 
```

所有可能都可以在一个查询中完成，因为在您发布的查询中，您避免了子查询的 ORDER BY 与顶部查询的 ORDER BY 并且 GROUP BY 可以直接在子查询中完成。

# objective-c - RestKit 0.20 映射请求和响应不同的映射

> ID：13920926
> 
> 赞同：0
> 
> 时间：2012-12-17T19:36:59.957
> 
> 标签：objective-c, restkit

我将我的 iOS 应用程序连接到一个 RESTful Web 服务（WCF），其中请求看起来与响应不同，我真的很难在 restkit 文档中找到它。

基本上我有两个相关的类。ClassA 有一个 ClassB 的集合。当我将 ClassB 的实例发送到 web 服务时，标识另一个类 (ClassA) 的 pk 的属性称为“ClassA”，正如预期的那样。

但是，当服务器成功添加对象时，它会将其发回，而不是相同的属性称为“ClassB1”（微软方式）。

我在想我想使用两种不同的映射，因为仅仅使用“inverseMapping”并没有真正为我做这件事。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T20:52:00.130

您认为两个映射是答案是正确的。假设您使用的是最新版本的 RestKit，类似以下的内容将起作用。

还要记住，为了真正利用 RestKit 提供的功能，JSON 必须符合键值编码。例如，在此示例中，JSON 包装在“响应”键中。

我刚刚从我正在处理的项目中提取了这个并更改了所有名称。这应该让你走上正确的道路。

```
RKObjectMapping *postObjectMapping = [RKObjectMapping requestMapping];
[postObjectMapping addAttributeMappingsFromDictionary:@{
 @"param1" : @"param1",
 @"param2" : @"param2"}];

RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:postObjectMapping objectClass:[PostObjectModel class] rootKeyPath:nil];

RKObjectMapping *returnedObjectMapping = [RKObjectMapping mappingForClass:[ReturnedModel class]];
[returnedObjectMapping addAttributeMappingsFromDictionary:@{
 @"returnedParam1" : @"returnedParam1",
 @"returnedParam2": @"returnedParam2",
 @"returnedParam3": @"returnedParam3"}];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:returnedObjectMapping pathPattern:nil keyPath:@"Response" statusCodes:[NSIndexSet indexSetWithIndex:200]];

RKObjectMapping *errorMapping = [RKObjectMapping mappingForClass:[RKErrorMessage class]];
[errorMapping addPropertyMapping:[RKAttributeMapping attributeMappingFromKeyPath:@"error" toKeyPath:@"errorMessage"]];

NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassClientError);
RKResponseDescriptor *errorDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:errorMapping pathPattern:nil keyPath:@"errors" statusCodes:statusCodes];

PostModel *objectToBePosted = [PostModel new];
[login setParam1:something];
[login setParam2:something];

RKObjectManager *objectManager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://BASEURLHERE"]];
[objectManager addRequestDescriptor:requestDescriptor];
[objectManager addResponseDescriptor:responseDescriptor];
[objectManager addResponseDescriptor:errorDescriptor];

NSMutableURLRequest *request = [objectManager requestWithObject:objectToBePosted method:RKRequestMethodPOST path:@"/REST/OF/PATH/GOES/HERE" parameters:nil];

RKObjectRequestOperation *operation = [objectManager objectRequestOperationWithRequest:request
    success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        NSLog(@"Success block: %@", mappingResult);
    } failure: ^(RKObjectRequestOperation *operation, NSError *error) {
        NSLog(@"Failed with error: %@", [error localizedDescription]);
    }];

[objectManager enqueueObjectRequestOperation:operation]; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T15:32:07.680

要将 RKEntityMapping 棒与 mElling 的答案一起使用，但要替换：

```
RKObjectMapping *returnedObjectMapping = [RKObjectMapping mappingForClass:[ReturnedModel class]];
[returnedObjectMapping addAttributeMappingsFromDictionary:@{
 @"returnedParam1" : @"returnedParam1",
 @"returnedParam2": @"returnedParam2",
 @"returnedParam3": @"returnedParam3"}]; 
```

和：

```
RKEntityMapping *returnedObjectMapping = [RKEntityMapping mappingForEntityForName:@"ReturnedModel" inManagedObjectStore:objectManager.managedObjectStore];
[returnedObjectMapping addAttributeMappingsFromArray:@[@"returnedParam1", @"returnedParam2", @"returnedParam3"]]; 
```

**注意：**您还必须将设置“objectManager”变量的行移到返回的ObjectMapping 之前的某个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T09:33:37.567

正如docksteaderluke建议的那样，通过在mElling的答案中使用RKObjectMapping解决了这个问题，但只有在我将RestKit更新到0.20-pre6版本之后。

# uml - 此处显示的用例的发起者是什么

> ID：13920931
> 
> 赞同：1
> 
> 时间：2012-12-17T19:37:50.413
> 
> 标签：uml, use-case

我不熟悉绘制用例和编写用例描述。

我有一个 Actor 称为`User`，一个抽象用例称为`Work Type`，另一个用例称为`Manager`。用例与用例`Manager`具有一般化的关系`Work Type`。

我现在正在编写用例的用例描述`Manager`。这个用例的启动 Actor 是什么。是演员`User`吗？还是没有发起 Actor ？

注意：我只想知道用例的启动 Actor`Manager`

![在此处输入图像描述](../Images/ef77ed065cf475ec72c72b0bb7156779.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:50:48.233

演员“用户”由“经理”用例继承。如果您想指出 Manager UseCase 的 Actor 与 User 不同，您可以添加另一个或不同的 Actor，例如“ManagerUser”并从“User”派生。您必须考虑将这个其他 Actor 与基础 Actor“用户”区分开来的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:59:40.983

我觉得，您将是根据您描述的用例来决定这一点的最佳人选。为了决定参与者，您应该根据您所描述的用例的上下文找出谁是外部的并且正在与用例管理器进行交互

# javascript - JS：在文件输入文件选择上更改输入的文本（值）

> ID：13920945
> 
> 赞同：0
> 
> 时间：2012-12-17T19:38:51.780
> 
> 标签：javascript, html, forms, events, input

我已经成功创建了一个 HTML 表单，该表单从用户那里获取文件，并且还允许为文件命名。我还成功地创建了一个 javascript 函数，该函数可以从上传流中获取文件的名称，并且只有名称（没有路径和扩展名）。**问题是，**我有点无法像我想要的那样更改用于重命名上传的输入。这是带有两个示范性警报的工作功能：

```
<script type="text/javascript">
function updateInput(val) {
    som = val.split('\\')[val.split('\\').length - 1];
    som = som.split('.')[0];
    alert('Hey 1');
    fileName.value = som;
    alert('Hey 2');
}; </script> 
```

显示“嘿 1”警报，没关系。“嘿2”居然**没有**显示！fileName 是*文件名*输入的**名称**和**id**，我尝试使用 document.getElementById(' **fileName** ').value = ... 但没有运气。

 *****文件名声明：**

```
<input type="text" runat="server" id="fileName" name="fileName" /> 
```

javascript 位于此输入下的代码中。uploadImage 输入（文件类型）在此输入上方。（是的，事件被调用并且 som 得到了我想要的值）

**我正在尝试更改 input:text 元素的值。我会尝试 var 的事情。*

**如果您能提供帮助，谢谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:48:16.410

据我了解您的问题，下面的代码应该可以正常工作：

```
<script type="text/javascript">
function updateInput(val) {
    var som = val.split('\\')[val.split('\\').length - 1];
    som = som.split('.')[0];
    alert('Hey 1');
    document.getElementById('<%=fileName.ClientID %>').value = som;
    alert('Hey 2');
}; </script> 
```

因为`runat="server"`，浏览器中元素的 id 将与您在`.aspx`文件中看到的不同。HTML 元素的 ID 将类似于`CotentPlaceholder1_fileName`，因此`document.getElementById('fileName')`不会找到它并`document.getElementById('fileName').value = son;`会引发错误。

同样的问题`fileName.value = som;`- 据我了解，您正在尝试使用 IE 的功能（不确定它是否是 IE 独有的功能，我只是从不使用它，但请记住有类似的东西）在全局命名空间中创建变量使用元素的 ID。ID 与文件名不同，因此变量名也不同。

要获取一个`runat="server"`元素的 id，就像它在浏览器中一样，您可以使用[`.ClientID`](http://msdn.microsoft.com/library/system.web.ui.control.clientid.aspx)服务器端对象的属性。

此外，您应该使用`var`在函数范围内定义变量。喜欢`var som = val.split('\\')[val.split('\\').length - 1];`。这样它就不会在全局范围内（`updateInput`函数之外）可见。否则，您将来可能会遇到问题***

# android - Eclipse 中的 Android 和 Javah

> ID：13920947
> 
> 赞同：1
> 
> 时间：2012-12-17T19:38:55.460
> 
> 标签：android, eclipse, javah

我想为我的 Android NDK 应用程序生成头文件，但我遇到了一些问题。我在 Eclipse 中使用外部工具配置，但出现错误：

```
Error: Could not find class file for 'com.myapp.MainActivity'. 
```

在附件中，我附上了我的 Eclipse 项目的外部工具配置和结构的屏幕。我与它斗争了很长时间，但我被困住了。你们中有人知道我做错了什么吗？

![外部工具配置](../Images/2f39f9b8f6b920539e3d508ce873b524.png)

![Eclipse项目结构](../Images/0133ff0495f1c48cd05277bd19363f03.png)

# 编辑

好的，最后我管理它。下面我附上正确配置的屏幕。

![在此处输入图像描述](../Images/15c4c1043f524a5039dd6d9370253e55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:51:27.270

您可以使用 NDK 阅读 Pro Android C++ 以使用变量而不是直接寻址，也许解决此问题的最佳方法是为 JNI 创建单独的类，当您想要运行您的工具时不要忘记在运行它之前选择 JNI 类！

但我更喜欢使用命令行而不是 Eclipse 工具，因为据我所知，您无法调试错误，例如与问题相关的错误。

# string - 使用 strrep 删除字符串

> ID：13920953
> 
> 赞同：2
> 
> 时间：2012-12-17T19:39:25.430
> 
> 标签：string, matlab

我是 MATLAB 脚本的新手。我有一个要删除的字符串，该字符串来自一个数组结构文件。要删除的字符串在每个循环中都不同。我可以将更改的字符串存储在变量中并使用变量和删除该字符串`strrep`吗？例如：

```
%% string i want to delete is "is_count_del=auto;"
delstrng=is_count_del_auto;
%%filetext is the name of the file from which is_count_del=auto; is to be deleted
r=strrep(filetext,'delstrng',''); 
```

我想我没有`strrep`正确使用。怎样才能达到预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T12:26:59.880

[`strrep`](http://www.mathworks.com/help/matlab/ref/strrep.html) can be applied on cell arrays, so this makes your work really easy:

```
% # Read input file
C = textread('input.txt', '%s', 'delimiter', '\n');

% # Remove target string
C = strrep(C, 'is_count_del=auto', '');

% # Write output file
fid = fopen('output.txt', 'w');
for ii = 1:numel(C)
    fprintf(fid, '%s\r\n', C{ii});
end
fclose(fid) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:43:07.090

如果我理解正确，您可以：

```
% open file to be filtered and output file
fin = fopen('file-to-be-filtered.txt');
fout = fopen('output-file.txt');

% for every line of a file-to-be-filtered ...
tline = fgets(fin);
while ischar(tline)
    % ... filter for all possible patterns        
    for delstring % -> delstring iterates over all patterns
        tline = strrep(tline, delstrng, '');
    end

    % save filtered line to file
    fprintf(fout, tline);

    % get next line
    tline = fgets(fin);
end 
```

# google-chrome-extension - 使用 NaCL 和外部库的 Google Chrome 扩展

> ID：13920954
> 
> 赞同：2
> 
> 时间：2012-12-17T19:39:26.210
> 
> 标签：google-chrome-extension, google-nativeclient

我正在使用 NaCL 开发 Google Chrome 扩展程序。它非常酷且易于使用，但我有疑问。

我的扩展需要 GPGME（GnuPG Made Easy），所以我使用“--enable-shared”选项编译该库并将该库添加到 .mnf 文件中：

```
{
    ...
    "files": {
        "libgpgme.so": {
            "x86-64": {
                "url": "libs/libgpgme.so"
            },
            "x86-32": {
                "url": "libs/libgpgme.so"
        }
    }
    ...
} 
```

我还使用选项“-lgpgme”更新了 makefile，但是当我编译我的 .nexe 时，出现以下错误：“libgpgme.so：文件无法识别：文件格式无法识别”。

所以，我的问题是：

1.  我可以在我的项目中使用外部库吗？
2.  我怎样才能做到这一点？

——干杯，何塞

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T11:44:59.553

由于 Native CLient 的内部沙箱依赖于二进制文件的验证，因此您需要使用 Native Client 工具编译 libgpgme。一般来说，Native Client 需要在执行之前验证任何代码，包括任何库，无论它们是静态链接还是动态链接。到目前为止，创建可验证的二进制文件的最简单方法是使用 Native Client 编译器。

**移植到本机客户端：** 由于 libgpgme 使用自动工具，特别是配置，因此您需要通过在文件 config.sub 的 basic_machine 部分添加类似这样的部分来向他们宣传 NaCl 平台，该部分应位于 libgpgme 中的某个位置源码树：

```
 nacl*)
           basic_machine=i686-pc
           os=-nacl
           ;; 
```

并添加

```
 -nacl* 
```

到同一文件的 os 部分。一个特别干净的端口的例子是 libogg。[您可以在http://code.google.com/p/naclports/source/browse/trunk/src/libraries/libogg-1.1.4/nacl-libogg-1.1.4.patch](http://code.google.com/p/naclports/source/browse/trunk/src/libraries/libogg-1.1.4/nacl-libogg-1.1.4.patch)看到完整的补丁。（严格来说，config.sub 是从 configure.in 生成的，但编辑 config.sub 往往更方便。）

除了第一步之外，移植还有更多内容，因此一些指南和指向现有移植的指针可以让您了解它是如何完成的。

**指南：有关更多信息，请参阅**[https://developers.google.com/native-client/community/developers](https://developers.google.com/native-client/community/developers) 上的几个移植事后分析。特别是，[https://developers.google.com/native-client/community/porting/xaos](https://developers.google.com/native-client/community/porting/xaos)上关于 XaoS 的那篇有一个关于自动工具的简短部分。

**现有端口：** 此外，还有一个基于社区的 Native Client 存储库，称为 naclports。它包含几个已经被移植的库，但不幸的是还没有 libgpgme。您可以在[http://code.google.com/p/naclports/source/browse/trunk/src/libraries/](http://code.google.com/p/naclports/source/browse/trunk/src/libraries/)查看 naclports 中的库列表。虽然它包含有关如何进行移植的有用示例，但 naclports 不适合胆小的人，因为它经常损坏并且 - 考虑到它是在自愿/尽力而为的基础上维护的 - 可能需要时间来修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:03:05.663

您需要先将 libgpgme 移植到 NaCl。即 libgpgme 应该由 NaCl 编译器而不是 Linux 编译器编译。

GPGME 使用配置。因此移植通常通过将包装脚本作为编译器传递来完成。这些脚本将 NaCl 编译器生成的 NaCl 程序替换为通过 sel_ldr 调用它们的脚本。通过这种方式，configure 可以像运行普通的 Linux 程序一样运行编译过的 NaCl 程序。

# ajax - 如何使用 clientOptions 验证Css

> ID：13920956
> 
> 赞同：1
> 
> 时间：2012-12-17T19:39:31.753
> 
> 标签：ajax, validation, yii

我想在 $form->error() 中定义的 ajax 验证期间显示加载图标。我需要做什么？

从文档：

> [validatingCssClass: 字符串，要分配给当前正在通过 AJAX 验证其关联输入的容器的 CSS 类。默认为“验证”。]

```
<style type="text/css">
.validating {

    background-color: #FF02FF;
}
</style> 
```

```
 <?php /** @var TbActiveForm $form */
    $form = $this->beginWidget('bootstrap.widgets.TbActiveForm', array(
        'id'=>'prezentacija-form',
        'enableAjaxValidation'=>true,
        'htmlOptions'=>array('class'=>'well'),
            'clientOptions'=>array(
                'validateOnType'=>true,

            ),
    )); ?>

  .....

  <?php echo $form->error($model,'naziv', array('validateOnType'=>true)); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:45:53.683

您可以使用 CSS2 执行此操作，设置 a [`background-image`](http://www.w3.org/TR/CSS2/colors.html#propdef-background-image "http://www.w3.org/TR/CSS2/colors.html#propdef-background-image")，您可能还想使用[`background-position`](http://www.w3.org/TR/CSS2/colors.html#propdef-background-position "http://www.w3.org/TR/CSS2/colors.html#propdef-background-position"). 一个样品：

```
/* I have a new styles.css file in project/css folder */
.validating {
    background-image: url(../images/loading.gif); /* my image is in project/images folder */
    background-position: right center; /* positioning has to be done correctly */
    background-repeat: no-repeat;
} 
```

确保图像大小合适，或者您可以使用 CSS3 的[`background-size`](http://www.w3.org/TR/2002/WD-css3-background-20020802/#background-size "http://www.w3.org/TR/2002/WD-css3-background-20020802/#background-size")属性（首先检查浏览器兼容性）。

* * *

在 Yii 前端，您不必在表单中添加任何内容`clientOptions`，因为默认`validatingCssClass`值已经是`validating`：

```
'clientOptions'=>array(
    'validateOnType'=>true,
    'validatingCssClass'=>'validating'
    // if the class is validating, it's already applied, so the line is redundant, use only if your validating class is different
), 
```

如果您在 localhost 上进行测试，显然您不会注意到发生的变化，因为没有网络延迟，但是要对其进行测试并正确定位，您需要看到它，因此您可以在验证操作方法中引入一些延迟，使用[php 的`usleep`](http://php.net/manual/en/function.usleep.php "http://php.net/manual/en/function.usleep.php")：

```
public function actionActionId() {
    $model=new Prezentacija;
    usleep(10000); // for me 10000 microseconds was enough delay
    $this->performAjaxValidation($model);
    // ... rest of your code ...
} 
```

# python - Flask 应用程序无法解析子网址

> ID：13920958
> 
> 赞同：2
> 
> 时间：2012-12-17T19:39:50.890
> 
> 标签：python, url, flask

我创建了一个简单的 heroku 应用程序，它以 url 作为参数，读取 url 数据并将其显示在浏览器中。这是代码：

```
import os
from flask import Flask
import urllib2, urlparse

app = Flask(__name__)

@app.route('/<url>')
def getdata(url):
    url.replace('www.','')
    if url.count('http') == 0:
        url = 'http://'+url
    u = urlparse.urlparse(url)
    nurl = u.geturl()
    response = urllib2.urlopen(nurl).read()
    return response

if __name__ == '__main__':
    port = int(os.environ.get('PORT', 5000))
    app.run(host='0.0.0.0', port=port) 
```

当传递一个像它一样的网址时，`google.com`它工作正常。但是当传递类似`google.com/images`（我知道 url 返回 503）时，它会引发 404 错误。当我尝试在我的 python shell 中正常读取子网址时，它工作得很好。为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T19:47:17.700

尝试[使用](http://flask.pocoo.org/docs/quickstart/#variable-rules). [*_* `@route`](http://flask.pocoo.org/docs/quickstart/#variable-rules)像下面这样的东西应该可以工作：

```
@app.route('/<path:url>')
def getdata(url):
    ... 
```

# java - SearchView.OnCloseListener 没有被调用

> ID：13920960
> 
> 赞同：10
> 
> 时间：2012-12-17T19:39:54.823
> 
> 标签：java, android, android-widget, searchview

我正在使用操作栏并向其添加 searchView。我已经实现了 searchView.onCLoseListener 但这似乎没有被调用。有什么建议么 ？

我的代码看起来像这样：

```
SearchView searchView = new SearchView(getContext());
searchView.setOnCloseListener(new OnCloseListener() {

  public boolean onClose() {
    searchView.setVisibility(SearchView.GONE);
    // Do Something

    return true;
  }
}); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-07-04T11:27:30.263

我在 android 4.1.1 上遇到了同样的问题。看起来这是一个已知的错误：[https ://code.google.com/p/android/issues/detail?id=25758](https://code.google.com/p/android/issues/detail?id=25758)

无论如何，作为一种解决方法，我使用了状态更改侦听器（当 SearchView 与操作栏分离时，它也明显关闭）。

```
view.addOnAttachStateChangeListener(new OnAttachStateChangeListener() {

    @Override
    public void onViewDetachedFromWindow(View arg0) {
        // search was detached/closed
    }

    @Override
    public void onViewAttachedToWindow(View arg0) {
        // search was opened
    }
}); 
```

上面的代码在我的情况下运行良好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-22T16:58:55.640

为了从 SearchView.OnCloseListener 调用 onClose() 方法。我使它以下列方式工作。将此添加到您的搜索视图

```
searchView.setIconifiedByDefault(true);
searchView.setOnCloseListener(this); 
```

* * *

现在实现这个 onclick 监听器

```
 searchView.findViewById(R.id.search_close_btn)
                .setOnClickListener(new View.OnClickListener() {
                    @Override
                public void onClick(View v) {
                    Log.d("called","this is called.");
                    searchView.setQuery("",false);
                    searchView.setIconified(true);

                }
            }); 
```

这对我有用。分享，以便它也可以帮助其他人。谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T09:12:29.520

好的。我弄错了。我们不能添加一个 searchCommand 并做

```
setShowAsAction(MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW) 
```

这样做会删除 searchText（如果有），因此我们不能执行 onClose()。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-22T15:50:40.320

为了在单击“x”图标时得到通知，我在 SearchView 的“x”按钮上添加了一个单击监听器。

通过 id 找到 SearchView 'x' 按钮并附加 OnClickListener：

```
mSearchView.findViewById(R.id.search_close_btn)
    .setOnClickListener(this); 
```

视图 search_close_btn 存在于 Android 框架提供的 SearchView 布局中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-06T10:51:10.470

```
 MenuItemCompat.OnActionExpandListener expandListener = new MenuItemCompat.OnActionExpandListener() {
        @Override
        public boolean onMenuItemActionCollapse(MenuItem item) {
            // Do something when action item collapses
            /*Hiding the mic on search visibility*/
                myMenu.findItem(R.id.action_speak).setVisible(false);
            Log.v("test","colllapse");
            return true;  // Return true to collapse action view
        }

        @Override
        public boolean onMenuItemActionExpand(MenuItem item) {
            // Do something when expanded
            Log.v("test","expand");
            return true;  // Return true to expand action view
        }
    };

    //Searchview Initilisation
    MenuItem searchViewItem = menu.findItem(R.id.action_search);
    // Assign the listener to that action item
    MenuItemCompat.setOnActionExpandListener(searchViewItem, expandListener); 
```

更多信息来自这里：[https ://developer.android.com/training/appbar/action-views.html](https://developer.android.com/training/appbar/action-views.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-17T06:27:36.743

我为解决类似问题所做的是创建了一个扩展 SearchView 的新类：

```
public class EnglishVerbSearchView extends SearchView {

OnSearchViewCollapsedEventListener mSearchViewCollapsedEventListener;

public EnglishVerbSearchView(Context context) {
    super(context);
}

@Override
public void onActionViewCollapsed() {
    if (mSearchViewCollapsedEventListener != null)
        mSearchViewCollapsedEventListener.onSearchViewCollapsed();
    super.onActionViewCollapsed();
}

public interface OnSearchViewCollapsedEventListener{
    public void onSearchViewCollapsed();
}

public void setOnSearchViewCollapsedEventListener(OnSearchViewCollapsedEventListener eventListener) {
    mSearchViewCollapsedEventListener = eventListener;
}

} 
```

然后，您可以在菜单 xml 文件中使用此类而不是 SearchView：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:yourapp="http://schemas.android.com/apk/res-auto" >
    <item android:id="@+id/action_search"
      android:title="@string/action_search"
      android:icon="@drawable/action_search"
      yourapp:showAsAction="ifRoom|collapseActionView"
      yourapp:actionViewClass="com.szymontrapp.englishverbs.EnglishVerbSearchView" />
</menu> 
```

然后你可以在你的活动中添加一个监听器：

```
 getMenuInflater().inflate(R.menu.dictionary, menu);
    MenuItem searchItem = menu.findItem(R.id.action_search);
    EnglishVerbSearchView searchView = (EnglishVerbSearchView)      MenuItemCompat.getActionView(searchItem);       

    // Get the SearchView and set the searchable configuration
    SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    // Assumes current activity is the searchable activity
    searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
    searchView.setIconifiedByDefault(false); // Do not iconify the widget; expand it by default

    searchView.setOnSearchViewCollapsedEventListener(listener); 
```

您还可以覆盖类中替换 SearchView 的其他方法以实现其他目标。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-13T22:45:44.280

创建`app:showAsAction`设置为始终的菜单项。

```
<item   
 android:id="@+id/action_search"  
 android:title="..."  
 android:icon="..."  
 app:actionViewClass="android.support.v7.widget.SearchView"  
 app:showAsAction="always"/> 
```

`SearchView`在方法中创建时，`onCreateOptionsMenu`请执行以下操作

```
inflater.inflate(R.menu.menu_search, menu);
final MenuItem item = menu.findItem(R.id.action_search);
final SearchView search = (SearchView) item.getActionView();
search.setQueryHint(getString(R.string.search_brand_item));
search.setOnQueryTextListener(new SearchView.OnQueryTextListener() {
  @Override
  public boolean onQueryTextSubmit(String query) {
    // add your code
    return false;
  }

  @Override
  public boolean onQueryTextChange(String newText) {
    // add your code 
    return false;
  }
});
search.setOnCloseListener(new SearchView.OnCloseListener() {
  @Override
  public boolean onClose() {
    // add your code here
    return false;
  }
});
search.setIconifiedByDefault(true); // make sure to set this to true 
```

`search.setIconifiedByDefault(true)`需要设置为`true`调用上面创建的`onClose()`方法。`SearchView.OnCloseListener()`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-03T06:21:05.580

我也发现了这个问题。解决方法很简单！只需将您的`SearchView`视图存储在私有变量中。然后使用

*   `isShown`检查视图是否已展开的方法，
*   `searchview.addOnLayoutChange`确定在 if 块执行您的操作之后`searchview`开始使用，`isShown`
*   当用户点击后退按钮时，`onBackPressed`使用 if然后执行您的操作，`block(searchView !=null && searchView.isShown()`
*   并用块覆盖`home(back)`按钮侦听器。注意：在菜单项 xml 文件中删除 app:showAsAction collapseActionView 标志。`onOptionsItemSelected``isShown`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-05-18T09:06:44.213

如果您已设置

```
searchView.setIconifiedByDefault(false) 
```

然后，您的 searchView 永远不会关闭，因为它始终处于展开模式。这就是你的 onClose() 没有被调用的原因。

# python - 关闭 Twisted conch SSH 连接的正确方法是什么？

> ID：13920962
> 
> 赞同：5
> 
> 时间：2012-12-17T19:39:59.107
> 
> 标签：python, twisted, twisted.conch

关闭 Twisted conch SSH 连接的正确方法是什么？有没有明确的方法来做到这一点？

我见过的所有 Twisted conch 示例都会关闭 SSH 通道然后停止反应器。反应堆关闭似乎可以处理关闭连接。但是，我将 wxreactor 与 wxPython 一起使用，我不想停止反应器，但我想在完成后关闭 ssh 连接。

在查看 tcsconnection 之后，似乎 serviceStopped() 方法是要走的路。它关闭所有打开的通道并在完成后运行 _cleanupGlobalDeferreds() ，但随后我开始收到如下异常：

```
Unhandled Error
Traceback (most recent call last):
  File "C:\Users\me\venv\lib\site-packages\twisted\internet\tcp.py", line 203, in doRead
    return self._dataReceived(data)
  File "C:\Users\me\venv\lib\site-packages\twisted\internet\tcp.py", line 209, in _dataReceived
    rval = self.protocol.dataReceived(data)
  File "C:\Users\me\venv\lib\site-packages\twisted\conch\ssh\transport.py", line 438, in dataReceived
    self.dispatchMessage(messageNum, packet[1:])
  File "C:\Users\me\venv\lib\site-packages\twisted\conch\ssh\transport.py", line 460, in dispatchMessage
    messageNum, payload)
--- <exception caught here> ---
  File "C:\Users\me\venv\lib\site-packages\twisted\python\log.py", line 84, in callWithLogger
    return callWithContext({"system": lp}, func, *args, **kw)
  File "C:\Users\me\venv\lib\site-packages\twisted\python\log.py", line 69, in callWithContext
    return context.call({ILogContext: newCtx}, func, *args, **kw)
  File "C:\Users\me\venv\lib\site-packages\twisted\python\context.py", line 118, in callWithContext
    return self.currentContext().callWithContext(ctx, func, *args, **kw)
  File "C:\Users\me\venv\lib\site-packages\twisted\python\context.py", line 81, in callWithContext
    return func(*args,**kw)
  File "C:\Users\me\venv\lib\site-packages\twisted\conch\ssh\service.py", line 44, in packetReceived
    return f(packet)
  File "C:\Users\me\venv\lib\site-packages\twisted\conch\ssh\connection.py", line 228, in ssh_CHANNEL_DATA
    channel = self.channels[localChannel]
exceptions.KeyError: 0 
```

通道关闭后，我似乎仍在从服务器获取数据。#twisted 中的某个人似乎认为我不应该自己调用 serviceStopped()，因为它应该由 Twisted 的不同部分自动调用。

我在 Twisted 源代码中进行了一些探索，发现 serviceStopped 应该由 tcstSSHClientTransport.connectionLost() 调用。

我正在跟踪我的 SFTP 客户端对象并通过它们的传输属性访问 SSH 连接。这是一个可以在本地运行以演示该问题的示例。可以在[这里](https://raw.github.com/Vye/troubleshooting/master/sftp.py)获取原始数据。

```
from os.path import basename
import sys

from twisted.conch.client.connect import connect
from twisted.conch.client.options import ConchOptions
from twisted.internet.defer import Deferred
from twisted.conch.ssh import channel, userauth
from twisted.conch.ssh.common import NS
from twisted.conch.ssh.connection import SSHConnection
from twisted.conch.ssh.filetransfer import FXF_WRITE, FXF_CREAT, \
    FXF_TRUNC, FileTransferClient
from twisted.internet import reactor, defer
from twisted.python.log import startLogging

ACTIVE_CLIENTS = {}
USERNAME = 'user'           # change me!
PASSWORD = 'password'       # change me!
HOST = ('hostname', 22)     # change me!
TEST_FILE_PATH = __file__
TEST_FILE_NAME = basename(__file__)

def openSFTP(user, host):
    conn = SFTPConnection()
    options = ConchOptions()
    options['host'], options['port'] = host
    conn._sftp = Deferred()
    auth = SimpleUserAuth(user, conn)
    connect(options['host'], options['port'], options, verifyHostKey, auth)
    return conn._sftp

def verifyHostKey(ui, hostname, ip, key):
    return defer.succeed(True)

class SimpleUserAuth(userauth.SSHUserAuthClient):
    def getPassword(self):
        return defer.succeed(PASSWORD)

class SFTPConnection(SSHConnection):
    def serviceStarted(self):
        self.openChannel(SFTPChannel())

class SFTPChannel(channel.SSHChannel):
    name = 'session'

    def channelOpen(self, ignoredData):
        d = self.conn.sendRequest(self, 'subsystem', NS('sftp'),
                                  wantReply=True)
        d.addCallback(self._cbFTP)
        d.addErrback(self.printErr)

    def _cbFTP(self, ignore):
        client = FileTransferClient()
        client.makeConnection(self)
        self.dataReceived = client.dataReceived
        ACTIVE_CLIENTS.update({self.conn.transport.transport.addr: client})
        self.conn._sftp.callback(None)

    def printErr(self, msg):
        print msg
        return msg

@defer.inlineCallbacks
def main():
    d = openSFTP(USERNAME, HOST)
    _ = yield d

    client = ACTIVE_CLIENTS[HOST]
    d = client.openFile(TEST_FILE_NAME, FXF_WRITE | FXF_CREAT | FXF_TRUNC, {})
    df = yield d

    sf = open(TEST_FILE_PATH, 'rb')
    d = df.writeChunk(0, sf.read())
    _ = yield d

    sf.close()
    d = df.close()
    _ = yield d

    ACTIVE_CLIENTS[HOST].transport.loseConnection()
    # loseConnection() call above causes the following log messages:
    # [SSHChannel session (0) on SSHService ssh-connection on SSHClientTransport,client] sending close 0
    # [SSHChannel session (0) on SSHService ssh-connection on SSHClientTransport,client] unhandled request for exit-status
    # [SSHChannel session (0) on SSHService ssh-connection on SSHClientTransport,client] remote close
    # [SSHChannel session (0) on SSHService ssh-connection on SSHClientTransport,client] closed
    # I can see the channel closed on the server side:
    # sshd[4485]: debug1: session_exit_message: session 0 channel 0 pid 4486
    # sshd[4485]: debug1: session_exit_message: release channel 0
    # sshd[4485]: debug1: session_by_channel: session 0 channel 0

    ACTIVE_CLIENTS[HOST].transport.conn.transport.loseConnection()
    # loseConnection() call above does not close the SSH connection.

    reactor.callLater(5, reactor.stop)
    # Stopping the reactor closes the SSH connection and logs the following messages:
    # [SSHClientTransport,client] connection lost
    # [SSHClientTransport,client] Stopping factory <twisted.conch.client.direct.SSHClientFactory instance at 0x02E5AF30>
    # [-] Main loop terminated.
    # On the server side:
    # sshd[4485]: Closing connection to xxx.xxx.xxx.xxx

if __name__ == '__main__':
    startLogging(sys.stdout)
    reactor.callWhenRunning(main)
    reactor.run() 
```

要关闭 SSH 连接，我正在调用`ACTIVE_CLIENTS[HOST].transport.conn.transport(t.c.c.d.SSHClientTransport instance).loseConnection()`which calls `t.c.c.d.SSHClientTransport.sendDisconnect()`。这是 sendDisconnect() 方法：

```
def sendDisconnect(self, code, reason):
    if self.factory.d is None:
        return
    d, self.factory.d = self.factory.d, None
    transport.SSHClientTransport.sendDisconnect(self, code, reason)
    d.errback(error.ConchError(reason, code)) 
```

调用此方法时，self.factory.d 似乎始终为 None，因此它在不调用 tcstSSHClientTransport.sendDisconnect() 的情况下返回。我认为它最初是 tccdconnect 中的一个延迟集，但在某些时候它被设置为 None。

我怀疑 SSHClientTransport.loseConnection() 是关闭 SSH 连接的正确方法，但是为什么 self.factory.d 设置为 None 当 twisted 期望它是别的东西时？

如果 lostConnection() 不是关闭 SSH 连接的正确方法，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T21:06:34.160

听起来您正在使用`twisted.conch.client.direct.SSHClientFactory`and `twisted.conch.client.direct.SSHClientTransport`。这些类最直接用于实现`conch`命令行工具。这意味着它们对于构建 SSH 客户端非常有用，因为这正是它所`conch`需要的。

`conch`然而，它们也没有人们想象的那么普遍有用，因为除了实现命令行工具之外，它们并不太注意做任何“其他”的事情。

更普遍适用的 SSH 客户端传输类是`twisted.conch.ssh.transport.SSHClientTransport`. 这个类没有任何额外的逻辑来实现`conch`命令行工具的某些特定行为。它只有 SSH 客户端逻辑。例如，它`self.factory.d`内部没有无法解释的检查`sendDisconnect`——它的`sendDisconnect`实现只是发送一个断开连接的数据包，然后关闭连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T14:03:12.033

我遇到了同样的问题。我确信它是一个`sendDisconnect()`不调用父实现的错误。调用不会关闭我的 TCP 连接，我可以看到`loseConnection()`使用. 为了解决这个问题，我使用我自己的方法，注入我自己的. 使用以下代码解决了该问题：`SSHClientTransport``lsof -p PID``connect()``SSHClientTransport`

```
class SSHClientTransport(direct.SSHClientTransport):
    '''
    Orignal sendDisconnect() is bugged.
    '''

    def sendDisconnect(self, code, reason):
        d, self.factory.d = self.factory.d, None
        # call the sendDisconnect() on the base SSHTransport,
        # not the imediate parent class
        transport.SSHClientTransport.sendDisconnect(self, code, reason)
        if d:
            d.errback(error.ConchError(reason, code)) 
```

# linux - 无法在 RHEL 上打开显示

> ID：13920965
> 
> 赞同：5
> 
> 时间：2012-12-17T19:40:13.323
> 
> 标签：linux, firefox, x11, redhat

我正在尝试从带有 RHEL 6.2 的桌面客户端 (mydesktop) SSH 到安装了 RHEL 5.8 的服务器 (myserver)。我已经在远程服务器上组安装了“X Window”，远程服务器上的 DISPLAY 变量也设置为 localhost:0.0，但我仍然无法启动 firefox。连接命令是

```
$ ssh -X -l myname myserver 
```

错误信息是

```
$ firefox
Error: cannot open display: localhost:0.0 
```

我试图在下面的 myserver 上执行命令

```
$ xhost +localhost 
```

但它给了我一个错误信息

```
xhost:  unable to open display "localhost:0.0" 
```

我想提三个现象

1.  mydesktop 的另一个用户可以在登录到 myserver 后启动 firefox。
2.  当我远程登录到另一台服务器时，我能够启动 Firefox：myserver2。
3.  Firefox 只是一个例子。一般来说，我无法启动任何 x 窗口程序。

我不知道发生了什么。请帮我。

* * *

这是我的问题的更新。问题已“部分”解决。我所做的是从我的“.bashrc”文件中删除“export DISPLAY==localhost:0.0”，注销然后再次登录，我可以启动firefox！！！

* * *

然而，这并不是故事的结局。我有一个新问题：$ sudo wireshark

不起作用。这是错误消息：

```
[myself@myserver ~]$ sudo wireshark
debug1: client_input_channel_open: ctype x11 rchan 2 win 65536 max 16384
debug1: client_request_x11: request from 127.0.0.1 46595
debug1: channel 1: new [x11]
debug1: confirm x11
debug1: client_input_channel_open: ctype x11 rchan 3 win 65536 max 16384
debug1: client_request_x11: request from 127.0.0.1 46596
debug1: channel 2: new [x11]
debug1: confirm x11
X11 connection rejected because of wrong authentication.
debug1: channel 2: free: x11, nchannels 3
The application 'wireshark' lost its connection to the display localhost:10.0;
most likely the X server was shut down or you killed/destroyed
the application.
debug1: channel 1: FORCE input drain 
```

为什么我不能在 sudo 下启动 x 窗口？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T20:22:39.890

通过执行以下两件事来解决问题：

1.  `export DISPLAY=Localhost:10.0`从我的 .bashrc 文件中注释掉。我认为这是因为我覆盖了`DISPLAY`环境变量的默认值。通过这样做，我可以在我的常规帐户下启动“firefox”。
2.  注销，登录并添加`export XAUTHORITY='/home/myself/.xauthority`到我的 .bashrc 文件中。然后注销并再次登录，以便我可以运行`sudo wireshark`.

ssh 命令中的`-v`选项在诊断问题时非常有用。

# c - ls 在 C 中的实现

> ID：13920967
> 
> 赞同：0
> 
> 时间：2012-12-17T19:40:14.650
> 
> 标签：c, unix

我用 C 语言编写了一个与 UNIX 具有相同功能`ls, ls-l, ls-a`的程序。现在我想要做的是以与原始 ls 相同的方式打印数据（在具有 1 个空间距离的列中）。我知道在制作列时我需要使用 a `printf("%*s",size,string)`，但列的大小取决于列中最长的单词。我怎么能简单呢？我唯一的想法是首先，以某种结构收集所有数据，然后检查最长的元素并将长度保存到一个变量中，该变量将是列的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:39:44.517

我刚刚在 GNU coreutils 中查看了它是如何做到的，这基本上就是这样做的方式。

当算法一次只打印一行时，存在一种极端情况：您要求每行输入一个条目，进行非递归搜索，要求不对条目进行排序并且您没有明确告诉 ls 使用某个块大小。

在其他所有情况下，它基本上都会执行您指定的操作。对于结构，我建议您分配一些结构数组，如果您用完，您会以指数方式重新分配。如果您遇到内存不足，或者如果您从一开始就决定要节省内存，您仍然可以将到目前为止您已经拥有的内容转储到屏幕上。

coreutils ls 的小附录甚至不使用 %*s，而是使用 putchars 空格（我猜是为了使用古老/损坏的 libcs​​ 的可移植性），但两者都应该工作。

至于这个问题，如果你有兴趣，看看[http://www.artfiles.org/gnu.org/coreutils/coreutils-8.20.tar.xz](http://www.artfiles.org/gnu.org/coreutils/coreutils-8.20.tar.xz)

# sql - 将一张表的 5 列保存到另一张表的 5 行中

> ID：13920968
> 
> 赞同：2
> 
> 时间：2012-12-17T19:40:16.007
> 
> 标签：sql, sql-server, sql-server-2008-r2, rows, multiple-columns

我有一个具有唯一 id 的表 Items：itemId，... 行示例：'3506'，...</p>

我有一个表 ItemProperties，其中包含以下列： itemId、datecreated、datemodified、property1、property2、property3、property4、property5

行示例：'3506'、'2012...'、'2012...'、'prop1'、'prop2'、'prop3'、'prop4'、'prop5'</p>

我需要将 ItemProperties 表的每一行拆分为 NewItemProperties 表中的 5 个单独的行，其中包含以下列： itemId、datecreated、datemodified、propertynumber、property

5行的示例：

```
‘3506’, ‘2012…’, ‘2012…’, 1, ‘prop1’

‘3506’, ‘2012…’, ‘2012…’, 2, ‘prop2’

‘3506’, ‘2012…’, ‘2012…’, 3, ‘prop3’

‘3506’, ‘2012…’, ‘2012…’, 4, ‘prop4’

‘3506’, ‘2012…’, ‘2012…’, 5, ‘prop5’ 
```

约束： - ItemProperties 的 itemId 不再出现在 Items 表中

*   已经在 NewItems 表中的项目（id =id 和 propertynumber=property1~5 列的数量）不应被此过程覆盖/更新

*   微软 SQL Server 2008 R2

*   ItemProperties 表中大约有 800000 行

我现在有非常慢的解决方案：

...

```
DECLARE c CURSOR read_only FOR SELECT * from ItemProperties

DECLARE @ID varchar(14), @CREA datetime, …

OPEN  c     

FETCH NEXT FROM c INTO @ID, @CREA, @MODI, @COL, @SIZE, @PAT, @YEAR, @ITEM

WHILE (@@fetch_status <> -1)

BEGIN

    IF (@@fetch_status <> -2)

    BEGIN
         select * from Items where itemId = @ID
         if @@ROWCOUNT = 0
               BEGIN
                    GOTO Fetch_Next
               END
         select * from ItemProperties where itemId = @ID AND propertynumber = 1
         if @@ROWCOUNT = 0
               INSERT INTO NewItemProperties
               VALUES(@ID, '1', @COL, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
         select * from ItemProperties where itemId = @ID AND propertynumber = 2
         if @@ROWCOUNT = 0
               INSERT INTO NewItemProperties
               VALUES(@ID, '2', @SIZE, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
     …

      END
    Fetch_Next:
    FETCH NEXT FROM c INTO @ID, @CREA, @MODI, @COL, @SIZE, @PAT, @YEAR, @ITEM
... 
```

我可以通过删除创建和修改日期来优化我的 fetch 语句，但这就是我能想到的。我无法将其放入非透视查询中。基本上任何比光标更快的东西都会帮助我。欢迎所有想法。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T19:56:36.240

尝试这个

```
INSERT INTO NewItemProperties
SELECT itemId, '1', property1, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP
FROM ItemProperties 
UNION ALL
SELECT itemId, '2', property2, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP
FROM ItemProperties
......
UNION ALL
SELECT itemId, '5', property5, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP
FROM ItemProperties 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:48:25.507

我不确定你为什么说你不能让它适应`UNPIVOT`. 但是您应该能够使用 an`UNPIVOT`来转换您的数据，然后将其插入到新表中。`WHERE`您可以在内部查询中添加任何子句条件。的关键`UNPIVOT`是数据具有相同的数据类型，因此如果需要，您可能必须将子查询中的数据转换为相同的数据类型：

```
insert into NewItemProperties(yourCcolsHere)
select itemid,
  datecreated, 
  datemodified,
  replace(col, 'property', '') col,
  value
from
(
 -- perform any datatype conversions here
  select i.itemid,
    p.datecreated,
    p.datemodified,
    p.property1, 
    p.property2, 
    p.property3, 
    p.property4, 
    p.property5
  from items i
  inner join ItemProperties p
    on i.itemid = p.itemid
) src
unpivot
(
  value
  for col in (property1, property2, property3,
              property4, property5)
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/51251/2)

该`UNPIVOT`函数执行与查询相同的功能`UNION ALL`：

```
insert into NewItemProperties(yourCcolsHere)
select i.itemid,
    p.datecreated,
    p.datemodified,
    1 PropNumber,
    p.property1 value 
from items i
inner join ItemProperties p
  on i.itemid = p.itemid
union all
select i.itemid,
    p.datecreated,
    p.datemodified,
    2 PropNumber,
    p.property2 value
from items i
inner join ItemProperties p
  on i.itemid = p.itemid -- add more queries for the other properties 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/51251/4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:51:25.580

我会通过定义一个返回所有要插入的内容的查询来做到这一点，然后插入它们：

```
with toinsert as (
     select ip.itemid, datecreated, datemodified, num as propertynumber
            (case when num = 1 then property1
                  when num = 2 then property2
                  when num = 3 then property3
                  when num = 4 then property4
                  when num = 5 then property5
             ) as property
     from ItemProperties ip cross join
          (select 1 as num union all select 2 union all select 3 union all select 4 union all select 5
          ) nums left outer join
          NewItemProperties nip
          on ip.itemid = nip.itemid and
             nums.num = nip.propertynumber
     where nip.itemid is null
    )
insert into NewItemProperties (itemid, datecreated, datemodified, propertynumber, property)
    select *
    from toinsert 
```

# python - Python：While循环不会终止

> ID：13920978
> 
> 赞同：3
> 
> 时间：2012-12-17T19:40:42.290
> 
> 标签：python, loops, while-loop

我已经阅读了很多关于 while 循环的主题，但我找不到一个能告诉我我自己的代码做错了什么的主题。我正在以艰苦的方式学习 Python，我编写了这段代码以满足练习 33 的学习练习 #1。我无法弄清楚为什么当我输入原始数据时循环不会终止。

```
numbers = []

def number_uno(z):
    i = 0
    while i < z:
        print "At the top i is %d" % i
        numbers.append(i)

        i += 1
        print "Numbers now: ", numbers
        print "At the bottom i is %d" % i

print "Pick a random number: "
z = raw_input("> ")

number_uno(z)

print "Done" 
```

有任何想法吗？它只是不断将 1 添加到“i”并且不会停止打印。

谢谢，扎克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T19:41:59.310

`raw_input`返回一个字符串。当你将它传递给你的函数时，你正在比较一个整数和一个字符串。请注意，此行为在 python3.x 中已弃用。您不能以这种方式在 python 3.x 中将整数与字符串进行比较。（它会提高一个`TypeError`）。

你可以很容易地解决这个问题：

```
number_uno(int(z)) 
```

应该运行正常。

# flash - mx 文本不在边界容器中居中

> ID：13920985
> 
> 赞同：0
> 
> 时间：2012-12-17T19:40:56.520
> 
> 标签：flash, apache-flex, text, centering, border-container

所以我有一个borderContainer，里面有一个文本，文本总是向左移动2-4个像素，我需要它完全居中。

代码

```
<s:BorderContainer id="box" width="100%" borderWeight="0"
backgroundColor="0xffffff" borderVisible="false"
backgroundAlpha="1" horizontalCenter="1" textAlign="center">

<mx:Text id="text" fontSize="10" textAlign="center"
width="100%"/>

</s:BorderContainer> 
```

我已经尝试了文本 Horizo​​ntalCenter 和 verticalCenter = 0 , 1 , middle , center 的所有内容，还尝试删除 100 % 在线执行各种操作，但无法使其完美居中:) 任何帮助将不胜感激

注意：文本将是 $19.99 或类似的数字 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:08:36.003

它可以帮助你吗？

```
<s:Group x="100" y="200">

    <s:Label  
        text="$19.99" 
        textAlign="center" 
        height="20" 
        width="55" 
        paddingTop="5" 
        paddingLeft="5" 
        paddingRight="5" 
        paddingBottom="5"/>

    <s:Rect width="100%" height="100%">
        <s:stroke>
            <s:SolidColorStroke color="red"/>
        </s:stroke>
    </s:Rect>
</s:Group> 
```

我添加了一个 Rect 来向您展示真正的边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T13:58:20.193

你用什么版本的flex？我刚刚尝试了您的示例（仅将白色背景替换为红色以清楚地看到居中），并且居中是完美的![带有 mx:Text 的 BorderContainer。 8px 到左边框和 8px 到右边框](../Images/2f516f2f2723e0106bd5b6b518a240eb.png)

我用的是 flex 4.6。但是，我可能会建议您嵌入与 mx:Text 一起使用的字体 - 对于许多字体，在嵌入这些字体之前，文本测量是不正确的。

# java - 在 netbeans 中下载包

> ID：13920987
> 
> 赞同：0
> 
> 时间：2012-12-17T19:41:08.407
> 
> 标签：java, ubuntu, packages, netbeans-7

谁能告诉如何在ubuntu的netbeans中下载cern包？
`import cern.colt.matrix.*;
import cern.colt.matrix.impl.*;
import cern.colt.matrix.linalg.*;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:48:11.817

你不能下载包。您可以`jar lib`使用此软件包中的类下载。您可以在此处手动
下载大多数库[http://search.maven.org/#search ，或使用](http://search.maven.org/#search)[Maven](http://maven.apache.org/)工具。
Netbean 发行版包含`maven`
**编辑**
将 jat 添加到 netbean 中的库：

```
Tools -> Libraries -> New Library (Class Library) -> Add JAR/Folder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:07:44.367

假设您将下载的 jars 保存在驱动器上的一个目录中，例如：/home/me/cernlibs/。然后，在 Netbeans 中，您可以创建一个新库：工具 > 库管理器，并浏览文件夹，包括您需要的所有 jar。

在您的项目中，您可以添加您创建的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-29T08:07:12.647

由于您的问题没有明确说明您的首选方法，因此此答案将详细说明使用 Apache 所采用的方法`maven`。（还有其他方法可以实现相同的目标，例如使用 gradle）。

1.  [从Apache 下载页面](https://maven.apache.org/download.cgi)下载`maven`二进制文件 (bin) 。（下载for windows 或for *NIX。）或者，使用系统的包管理器（、等）安装.`*.zip``*.tar.gz``apt``yum``maven`

2.  将存档的内容提取到您选择的目录中。（你安装 Java 的地方可能是最简单的。例如`/opt/java/maven`：）

3.  假设已安装 NetBeans，请启动 NetBeans。打开工具 > 插件 > 已安装 > 搜索。键入“行家”。如果你在那里看到一个条目，你就可以走了。否则，在“可用插件”列表中搜索并安装它。

4.  单击工具 > 选项 > Java > Maven > 执行。

5.  单击“Maven 主页”组合框。如果您没有看到已安装的 maven 版本，请单击“浏览”选项并导航到您提取 maven 存档的位置。在“实验”类别中，选中“使用以下位置存储 Maven 二进制文件”。浏览至`~/.m2/store`（您可能需要创建此路径。）单击`OK`

6.  创建一个新的 Maven 项目。在“项目”选项中，选择“Java 应用程序”、“JavaFX 应用程序”或“Web 应用程序”（以适当的为准）。单击`Next`。为项目命名（EG: `mavenPlayground`）并将其放置在适当的位置。NetBeans 将设置工件 ID 以匹配。您可能不必关心 Group ID、Version 或 Package 字段。单击`Finish`。

7.  展开项目，以便您可以看到“Dependencies”目录。右键单击它并选择“添加依赖项...”项。访问[maven 搜索页面](http://search.maven.org/#search)并输入`cern.colt.matrix`（或任何您想要搜索的内容）并单击`Search`按钮。

8.  从结果中，选择适当的项目并单击链接。例如：`org.apache.servicemix.bundles.colt`。将相关信息复制到对话框的字段中，然后单击`Add`按钮。

9.  去喝杯咖啡或其他点心，同时 maven 咀嚼你的数据，下载所需的库。

*注意：*如果您的计算机通过代理连接到 Internet，您可能需要配置 Maven 的代理设置。这些可以在`{M2_HOME}/conf/settings.xml`

代理配置应如下所示：

```
<proxies>
  <proxy>
  <id>proxynamehere</id>
  <active>true</active>
  <protocol>http</protocol>
  <username>yourname</username><!-- omit this if you aren't required to authenticate -->
  <password>password</password><!-- omit this if you aren't required to authenticate -->
  <host>proxy.host.com</host>
  <port>8888</port>
  <nonProxyHosts>local.net|some.host.com|127.0.0.1</nonProxyHosts>
</proxy> 
```

[代理配置来源](https://www.mkyong.com/maven/how-to-enable-proxy-setting-in-maven/)：MK Young，2012 年 13 月 12 日

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2017-05-04T00:20:40.673

首先，您在 Internet 上下载所需的包，它应该是 .jar 文件而不是 classes 文件。然后，在 NetBeans 中，在 Tool --> Library --> New Library --> Add JAR/Folder 中。如果您执行上述步骤，则不能保证您可以理解。然后，在 NetBeans 中右键单击您的项目名称，转到 Properties --> Libraries --> Add Library。那么这将是有道理的。

# css - 应用大于 100% 的最大宽度

> ID：13920989
> 
> 赞同：3
> 
> 时间：2012-12-17T19:41:16.587
> 
> 标签：css

所以，我有一个列表`inline-block`项列表。它们的宽度都不同，但总是在同一条线上。列表项的数量也可能会有所不同，因此我无法预测整个列表的宽度。列表应该始终在其父容器中居中，但是当宽度超过 100% 时，它应该获得水平滚动而不是延伸超过两行。

现在，据我了解，如果我将 设置`width`为`auto`，它实际上设置为`shrink-to-fit`- 本质上的意思`max-width: 100%;`，这不是我想要的。

有没有办法让我单独使用 CSS 可靠地实现这一目标？

**标记**

```
<div>
  <ul>
    <li>Banana</li>
    <li>Krypton</li>
    <li>Molten boron</li>
  </ul>
</div> 
```

**CSS**

```
div {
  overflow-x: auto;
  width: 500px;
}
ul {
   max-width: 5000px; /* Doesn't override */
   width: auto; /* Calculated to 500px or less */
}
li { display: inline-block; } 
```

需要注意的是，这是一个响应式布局，所以容器的宽度并不是完全固定的，但我不怕人工。

我的 JS 小提琴：http: [//jsfiddle.net/TheNix/gdRaB/](http://jsfiddle.net/TheNix/gdRaB/)

我的问题类似于[大于 100% 的 CSS 动态宽度，](https://stackoverflow.com/questions/6042327/css-dynamic-width-larger-than-100)除了我的子元素没有浮动，因此仍在流程中（我对此有控制权）。

关于`width: auto;`规范：[http ://www.w3.org/TR/CSS2/visudet.html#inline-replaced-width](http://www.w3.org/TR/CSS2/visudet.html#inline-replaced-width)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:48:29.633

除非我误解了您的问题，否则您可以简单地添加`white-space: nowrap;`到您的`ul`（[小提琴](http://jsfiddle.net/gdRaB/11/)）中。然后，您将在溢出时获得所需的水平滚动条。

[**编辑**]：和`text-align: center;`你的`div`（[小提琴](http://jsfiddle.net/gdRaB/12/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:45:50.073

我认为你想要的是最小宽度，而不是最大宽度

```
ul {
   **min-width: 5000px;** /* Doesn't override */
   width: auto; /* Calculated to 500px or less */
} 
```

[http://jsfiddle.net/gdRaB/5/](http://jsfiddle.net/gdRaB/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T19:48:50.597

[http://jsfiddle.net/gdRaB/10/](http://jsfiddle.net/gdRaB/10/)

我将 div 放在容器 div 中

```
<div class="container">
<div class="list">
    <ul>
        <li>Banana</li>
        <li>Molten Boron</li>
        <li>Steak sauce</li>
        <li>Unicorn tears</li>
        <li>Ground-up griffins</li>
        <li>Semi-alive hobgoblins (frozen)</li>
    </ul>
    </div>
</div>

.container{
    width: 500px;
    overflow: auto;}

.list{
    width: 5000px;
}

ul {
    width: 5000px;
    overflow: visible;
    width: auto;
    display: inline-block;
}

li {
    background: #ccc;
    display: inline-block;
    margin: 0 5px;
    padding:2px 5px;
}​ 
```

​</p>

# javascript - 如何在函数下分配属性？

> ID：13920991
> 
> 赞同：0
> 
> 时间：2012-12-17T19:41:37.973
> 
> 标签：javascript

我正在尝试在函数下分配属性。我有

```
test.prototype.getName = function(){
    var myself=this;

     //ajax callback function
      call.callback = function(obj){

     //I want to assign returned ajax obj to test property.       
        myself.testName=obj;
      }

}

test.prototype.build = function(){

this.getName();

console.log(this.testName)//undefined...

}

test.build(); 
```

如何获取我的构建函数中显示的 this.testName？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:19:33.270

根据您提供的代码，我做出以下假设：

## 假设1：

您已将测试初始化​​为返回某个对象或函数的函数，但未在您的问题中包含该代码。这称为构造函数。我认为它看起来像：

```
 function test(){
        //do some work here
        return this;
    }

//or

    var test = function(){
        //do some work here
        return this;
    } 
```

我假设这是因为您能够设置原型的属性而不会引发错误，以上将允许您这样做。

## 假设2：

我假设您正在尝试使用一些涉及多个测试对象实例的面向对象的解决方案。这个假设是基于您的目标是使用原型继承这一事实，如果您的“测试”函数只有一个版本（这称为单例），这一点就不那么重要了。

基于这些假设，问题在于您没有创建测试对象的实例。以下代码应该可以正常工作（依赖于假设 1）；

```
 var testInstance = new test();
    testInstance.build();
    // wait for AJAX to return and execute success handler
    testInstance.property // returns a proper value 
```

如果 build 是你只会做一次的事情，并且你想为测试对象的每个实例做一些事情，那么你可以将它放入构造函数本身：

```
 function test(){
        this.build();
        return this;
    };

    var testInstance = new test();
    // wait for AJAX to return and execute success handler
    testInstance.property // returns a proper value 
```

这是一个完整的测试，`setTimeout`用作异步调用

```
 function Test(){
        //do anything
        return this
    };
    Test.prototype.getName = function(){
        var self = this;

        //simulate AJAX with setTimeout
        setTimeout(
        function(){
            self.testName = "Ahmad Jamal";
            console.log('name set');   
        }, 1000);
    };
    Test.prototype.build = function(){
        this.getName();
        console.log(this.testName); // this is undefined, as the setTimeout is still waiting
    };

    var test = new Test();

    test.build();
    // now wait to see 'name set' in the console

    test.testName; // returns "Ahmad Jamal" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T19:44:54.050

鉴于异步函数的性质，您必须使用回调函数。`console.log`用to传递函数`getName`，并在异步操作完成时执行它：

```
test.prototype.getName = function(callback){
    var myself=this;

    //ajax callback function
    call.callback = function(obj){

        //I want to assign returned ajax obj to test property.       
        myself.testName=obj;
        callback();
    }
}

test.prototype.build = function(){ 
    var myself = this;

    this.getName(function() {
        console.log(myself.testName)
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T20:33:17.657

像这样的东西？

```
function MyClass () {}

function test () {}

test.prototype = new MyClass();

test.prototype.getName = function(callback){
    this.testName = callback();
};

test.prototype.build = function(){
    this.getName(function() {
        return 'this is my test name';
    });
    console.log(this.testName);
}

var myobj = new test();
myobj.build(); 
```