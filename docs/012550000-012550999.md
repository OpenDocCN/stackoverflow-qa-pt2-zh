# StackOverflow 问答 12550000-12550999

# android - 片段在分离/销毁/方向更改时保持视图状态

> ID：12550001
> 
> 赞同：1
> 
> 时间：2012-09-23T05:34:55.317
> 
> 标签：android, android-fragments, android-actionbar, android-view

我有一个应用程序，它有两个片段作为操作栏选项卡。在选项卡之间切换时，片段被附加/分离。每当我切换选项卡、更改方向或按返回退出应用程序时，视图都会被破坏。我需要它在重新打开时恢复到以前的状态。我知道，至少在方向更改时，要使用 onSaveInstanceState 并将数据保存在那里，以便在重新创建视图时恢复它。但是，由于某种原因，即使数据正确保存到 outState 包并从 savedInstanceState 包中正确读取，视图也不会更新到它应该更新的内容。例如，我启动了一项服务，当该服务运行时，我需要隐藏两个按钮并在其位置显示另外两个按钮。我使用布尔值来检查服务是否正在运行，然后把它放在 outState 中，这样我就可以看到要显示或隐藏哪些按钮。我的代码是：

```
@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putBoolean("isRunning", isRunning);
} 
```

在 onCreateView 中：

```
if (savedInstanceState != null) {
        isRunning = savedInstanceState.getBoolean("isRunning", false);
        if (isRunning) {
            showStopButton();
        }
} 
```

showStopButton 代码是：

```
private void showStopButton() {
    btnStart.setVisibility(View.GONE);
    btnReset.setVisibility(View.GONE);
    btnStop.setVisibility(View.VISIBLE);
    btnLoop.setVisibility(View.VISIBLE);
} 
```

所以这一切都奏效了，在服务运行时布尔值被认定为真，并调用了 showStopButton()。然而，它似乎并没有真正做任何事情。视图状态只是将自身重置为好像显示前两个按钮（我想隐藏）而不是我实际想要显示的按钮。知道为什么会发生这种情况/如何解决吗？

我还有一个列表视图，我需要保持与以前相同的值填充，我也无法开始工作。

此外，切换选项卡时不会调用 onSaveInstanceState （我认为按下后退按钮时也不会调用？）。在这些情况下，我应该如何保留视图状态？

# jquery - ajax调用结果出来后如何返回函数的值？

> ID：12550002
> 
> 赞同：4
> 
> 时间：2012-09-23T05:35:31.513
> 
> 标签：jquery, html, ajax

有点像这样：

```
function getfoo() {
  var foo = "";
  $.get("foofile.html", function (data) {
    foo = data;
  });
  return foo;
} 
```

但是由于脚本是异步的，它会返回“”。这显然不是我想要的。

所以我尝试了这个：

```
function getfoo() {
  var foo = "";
  $.get("foofile.html", function (data) {
    foo = data;
  });
  for (;;) {
    if (foo != "") {
      return foo;
      break;
    }
  }
} 
```

我预计这会奏效，但事实并非如此。为什么不？有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:38:50.780

您应该使用回调传递给函数并让它处理您的数据。

```
function getfoo(callback) {
  var foo = "";
  $.get("foofile.html", function (data) {
    callback(data);
    // do some other things
    // ...
  });
}

getfoo(function(data) {
   console.log(data);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:44:29.373

ajax 的第一个“a”代表异步，所以你试图做的有点违背 ajax 的哲学。但是，可以使用阻塞请求，但`.get`简化接口不支持此功能，您必须使用以下`.ajax`功能：

```
var foo = "hmmm";
$.ajax("jquery.js", {async:false, success:function(x){foo=x}});
alert(foo); 
```

javascript的基本执行模型是基于事件和单线程的（有提供多线程能力的web worker，但是每个worker都生活在自己的地址空间中，不能与其他worker或与主线程共享任何内存......所以在感觉它们更类似于进程而不是线程）。

在 Javascript 中，您不能在循环中“等待”其他事情发生，您的函数必须始终快速终止，可能会附加回调以在发生某些事情时再次调用。如果您创建一个循环，则 javascript 引擎将卡在该循环中，并且不允许进行其他处理（如果可以从 javascript 中看到）。例如：

```
// Warning: WRONG example... this won't work!
var foo = 0;
setTimeout(function(){foo = 1}, 100); // Set foo=1 after 100ms
while (foo == 0) ; // Wait for that to happen
alert(foo); 
```

不会工作，因为在主代码路径结束之前，不允许浏览器引擎执行其他 javascript 代码（超时回调）。

这种基于事件的方法大大简化了编程（因为不需要锁定......总是只有一个线程在操作状态），但强制使用不同的流程设计来进行长时间操作。

有一个执行线程这一事实也意味着，当您的 javascript 代码执行任何长时间的计算时，其他所有内容都会被阻止，并且浏览器看起来对用户没有响应。

这种无响应性就是为什么使用同步调用来检索资源被认为是一种不好的做法......从多个流中并发获取不同资源的艰巨工作已经由浏览器实现，但是您的 javascript 代码需要使用回调模型来能够利用此功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T05:47:41.707

使用 ajax 时，您应该以稍微不同的方式编写代码。您应该将调用者和被调用者逻辑分开。

假设您现有的代码就像

```
function getfoo() {
  var foo = "";
  $.get("foofile.html", function (data) {
    foo = data;
  });
  return foo;
}

function usefoo(){
  var data = getfoo();
  // do something with data
} 
```

它真的应该写成

```
function getfoo() {
  var foo = "";
  $.get("foofile.html", function (data) {
    usefoo(data);
  });
}

function usefoo(data){
  // do something with data
} 
```

# ruby - 如何使用两个或多个分隔符拆分字符串

> ID：12550008
> 
> 赞同：3
> 
> 时间：2012-09-23T05:37:05.237
> 
> 标签：ruby

我有一个字符串，`'30.04/2012'`我想拆分它，所以输出是`['30', '04', '2012']`. 本质上就是这样`x.split('.') and x.split('/')`。我怎样才能有效地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T05:39:38.520

使用带有替代品的正则表达式。

```
x.split(/[.\/]/) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T07:29:54.467

```
x = "30.04/2012"
x.scan /\d+/ # => ["30", "04", "2012"] 
```

# php - DESCRIBE 命令产生不连贯的显示

> ID：12550010
> 
> 赞同：-3
> 
> 时间：2012-09-23T05:37:58.313
> 
> 标签：php, mysql

大家早上好。谁能解释这种不一致？

1）我通过My​​SQL文本客户端得到的（首先检查命令）：

![外壳截图](../Images/17544a5dfec28f9ee52a8dae27306c59.png)

2) 我通过我的 WWW 应用程序获得的信息：

![www/php 截图](../Images/edee1b18ac7932e15274ad661ab47c4a.png)

php代码是：

![php代码](../Images/cdbde51b11333222c8beaefdc3329b01.png)

换言之，NULL 属性将不会显示。

根据 Dai 的建议，php 可能会“吃掉”一个 echo 命令，我将第 21 行更改为：

```
echo "<td width='80'>" . is_null( $row[4] ) ? "NULL" : $row[4] . "</td>"; 
```

结果令人费解（注意第 4 列之后的混乱偏移和表格上方的 5 个“NULL”）：

![杂乱无章的行](../Images/b3b76e809d2304d181252657bd9871a6.png)

问题是：有没有人听说过 PHP 的任何此类错误，如果有，他们能告诉我如何规避它吗？（欢迎任何其他线索，包括我的一个严重错误。）谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:41:09.390

我怀疑`echo`调用失败了，但是 PHP 默默地吃掉了错误，而不是让你知道。

使用该`is_null`函数来解决此问题，如下所示：

```
echo "<td width='80'>" . is_null( $row[3] ) ? "NULL" : $row[3] . "</td>"; 
```

根据需要重复和修改。

# javascript - jQuery：追加不适用于前导空格

> ID：12550011
> 
> 赞同：0
> 
> 时间：2012-09-23T05:38:03.420
> 
> 标签：javascript, jquery, whitespace

如果我将 jQuery 的 .append() 与具有前导空格的字符串一起使用，它会跳过空格。

示例：`$("#div").append(" test");`附加`test`前面没有四个空格。

我将如何允许附加前导空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T05:41:14.320

您是否希望看到页面上的空白？如果是这样，您需要使用`&nbsp;`s 或不间断空格。

演示：http: [//jsfiddle.net/W6RMA/](http://jsfiddle.net/W6RMA/)

# php - 如何检查值是否为 URL？

> ID：12550014
> 
> 赞同：3
> 
> 时间：2012-09-23T05:38:38.040
> 
> 标签：php, forms, url

这个脚本应该检查提交的值是否是一个 Url，但它不这样做。我对正则表达式不太熟悉，我为我做这个的朋友出去旅行了。

```
 <script type="text/javascript">// <![CDATA[
       window.onload=init;

        function init(){
        document.forms[0].onsubmit= function (){
        var url= document.getElementById("url").value;
        var desc= document.getElementById("description").value;
        var regex=new RegExp("^(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$");
        var match=regex.test(url);
        if(!match)
        {
            alert("The URL you entered is not valid");
            return false;
        }
        if(desc.length<10)
        {
            alert("There must be at least 10 characters in the description");
            return false;
        }
    };
}
  // ]]></script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T05:51:48.590

PHP 5 有一个内置函数。你可以用`filter_var()`它来做。

```
function is_url($url)
{
    return filter_var($url, FILTER_VALIDATE_URL) !== false;
} 
```

编辑：客户端验证只是为用户提供便利。它实际上并没有验证数据，我可以使用 Firefox TamperData 向您提交我想要的任何内容。您应该如上所示进行服务器验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:46:11.257

```
if(/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?\/$/i.test(url)) {
    alert("URL is valid");
}
else {
    alert("URL is not valid");
} 
```

来源：[这里](https://stackoverflow.com/questions/6122372/validate-a-url-with-jquery-and-add-http-and-final-if-needed)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T05:51:35.200

我建议你开始学习正则表达式。他们学起来很有趣。我目前也在学习它们。*Jeffrey EF Friedl 的 O'reilly 的 Mastering Regular Expressions*是一本非常好的书，您可以从一些网站免费下载。一探究竟。

# weka - 如何在将其作为 Weka GUI 中功能集的一部分包含时忽略功能

> ID：12550032
> 
> 赞同：5
> 
> 时间：2012-09-23T05:41:26.317
> 
> 标签：weka

我正在使用 Weka GUI 在在线帖子上运行 NaiveBayes 分类器。我正在尝试跟踪错误预测的实例（在线帖子），以便我可以进一步了解如何改进这些功能。

目前，我有一个解决方法：我生成包含唯一 ID 的数据，当我导入到 Weka 时，我删除了唯一 ID。然后我附加了预测附加程序，它将预测结果保存到 .arff 文件中。我通读了文件以查找性能不佳的实例。对于错误分类的实例，我使用某些特征值，为每个实例提供足够唯一的值，并从包含唯一 ID 的原始数据中找到具有相同值的实例。如您所见，这是一个真正耗时的过程。

我很想知道是否有办法忽略一个特征，在我的例子中是一个实例的唯一 ID，同时在运行分类器时将其作为数据的一部分。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T09:00:35.503

我不确定 weka GUI 是否有直接的选择。但是，您可以通过命令行实现相同的目的

```
java weka.classifiers.meta.FilteredClassifier -F weka.filters.unsupervised.attribute.RemoveType -W weka.classifiers.trees.RandomForest -t G:\pub-resampled-0.5.arff -T G:\test.csv.arff -p 1 -distribution > G:\out.txt 
```

在上面的例子中，第一个属性是一个标识符（字符串）。RemoveType 过滤器将在构建模型时删除所有字符串字段。**但是，您仍然可以通过将其作为参数传递给-p**来要求 weka 将该标识符作为输出（预测）的一部分。在我的例子中，第一个属性 (partner_id) 是标识符，因此它与预测一起列在输出中。（-distribution 选项是输出所有类标签的预测分数）。您可以从[http://weka.wikispaces.com/Instance+ID获取更多详细信息](http://weka.wikispaces.com/Instance+ID)

```
=== Predictions on test data ===

 inst#     actual  predicted error distribution (partner_id)
     1        1:?        2:0       0,*1 (8i7t3)
     2        1:?        2:0       0,*1 (8i7u1)
     3        1:?        2:0       0,*1 (8i7um)
     4        1:?        2:0       0.1,*0.9 (8i7ux)
     5        1:?        2:0       0,*1 (8i7va)
     6        1:?        2:0       0,*1 (8i7vb)
     7        1:?        2:0       0,*1 (8i7vf) 
```

希望你觉得这很有帮助..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-14T12:06:31.013

对于迟到这个问题的任何人，**都**可以在 GUI 中进行。这是我从 Mark Hall（来自 Weka 项目）那里得到的答案：

> FilteredClassifier 在 GUI 或命令行中可用，就像任何其他分类器一样。只需使用您的基本分类器和删除过滤器对其进行配置（在将训练/测试数据传递给基本分类器之前删除 ID 等）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-15T12:03:15.770

详细说明 Nicholas 的回答：如果您想从 GUI 执行此操作，除了选择 FilteredClassifier 之外，您还应该在“测试选项”框中打开“更多选项...”并将标识符属性的索引输入到“输出附加属性”字段。要启用此字段，您必须先勾选“输出预测”框。

在 Weka 3.7 中，必须通过左键单击字段（例如 PlainText）将附加属性指定为“输出预测”所选方法的参数。

# c# - 在 Windows 7 上启动 C# exe 而不提示 UAC

> ID：12550033
> 
> 赞同：1
> 
> 时间：2012-09-23T05:41:36.117
> 
> 标签：c#, windows-7, uac

我有 C# 可执行文件，我想在 Windows 7 上启动而没有对话框要求以管理员身份运行。所以这是我在启动名为 testApp.exe 的 C# 可执行文件的程序中的代码。

```
Process testApp = new Process();
testApp.StartInfo.FileName = "C:\\Program Files\\Common Files\\testApp.exe";
testApp.Start(); 
```

我还为这两个程序创建了 minfest。testApp.exe 的 app.manifest 和启动 testApp.exe 的程序的 app.manifest，然后我将两个清单中的以下行更改为：

requestedExecutionLevel 级别="requireAdministrator" uiAccess="false"

当我双击 testApp.exe 运行它时，testApp.exe 程序崩溃了，但是当我以管理员身份运行它时，它运行良好，没有崩溃。因此，当我运行启动 testApp.exe 的程序时，这种行为也会发生相同的情况，testApp.exe 崩溃。

我必须在这里做错事。我是否需要更改清单的名称，因为我使用的是由 Visual Studio 2010 生成的默认名称。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:12:57.027

实际上你应该只使用

> requestedExecutionLevel 级别="requireAdministrator" uiAccess="false"

仅当您想以管理员身份运行时。

将其更改为：

> requestedExecutionLevel 级别="asInvoker" uiAccess="false"

你会很高兴去的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T12:22:29.313

使用 info.Verb = "runas"; // 提供以管理员身份运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T18:29:54.230

我的 50 美分，

而不是添加 `requestedExecutionLevel level="asInvoker" uiAccess="false"`清单，您可以使用任务调度程序以最高级别运行几乎任何东西（管理员模式）

来源：[http ://www.liberalcode.com/2014/01/automating-run-as-administrator-from-c.html](http://www.liberalcode.com/2014/01/automating-run-as-administrator-from-c.html)

虽然上面的帖子谈到了远程运行它，但是您可以轻松地将其更改为在本地运行。

# python - 为什么我在简单邮件客户端程序上不断收到 SSL 错误？

> ID：12550034
> 
> 赞同：1
> 
> 时间：2012-09-23T05:41:39.367
> 
> 标签：python, sockets, ssl, smtp, certificate

> **可能重复：**
> [在 Python 中实现传输层安全性 - 简单邮件客户端](https://stackoverflow.com/questions/12549593/implementing-transport-layer-security-in-python-simple-mail-client)

我不断收到这个错误...

```
ssl.SSLError: [Errno 185090050] _ssl.c:340: error:0B084002:x509 certificate routines:X509_load_cert_crl_file:system lib 
```

...在一个简单的邮件客户端分配中，即打开与谷歌 smtp 服务器的连接。几乎可以肯定，问题似乎在于我在这里形成 ssl.wrap_socket() 方法的方式......

```
 clientSocket = socket(AF_INET, SOCK_STREAM)
  ssl_clientSocket = ssl.wrap_socket(clientSocket,
          ca_certs = '/etc/ssl/certs/ca.pm',
          cert_reqs = ssl.CERT_REQUIRED)
  ssl_clientSocket.connect((mailserver, port)) 
```

..但我无法真正弄清楚问题出在哪里，而且我真的不确定在 /etc/ssl/certs 中使用哪个 .pm 文件。我正在使用 ca.pm，因为我已经在一些教程中看到它是这样做的。这是代码的其余部分，可以很好地衡量......

```
from socket import *
import certifi
import ssl

msg = "\r\n I love computer networks!"
endmsg = "\r\n.\r\n"

# Choose a mail server (e.g. Google mail server) and call it mailserver
mailserver = "smtp.gmail.com"
port = 587

# Create socket called clientSocket and establish a TCP connection with mailserver
clientSocket = socket(AF_INET, SOCK_STREAM)
ssl_clientSocket = ssl.wrap_socket(clientSocket, 
        ca_certs = '/etc/ssl/certs/ca.pm',
        cert_reqs = ssl.CERT_REQUIRED) 
ssl_clientSocket.connect((mailserver, port))

###################################################################
print "got to here 1"
###############################################################

recv = ssl_clientSocket.recv(1024)
print
print recv

# If the first three numbers of what we receive from the SMTP server are not
# '220', we have a problem
if recv[:3] != '220':
    print '220 reply not received from server.'

# Send HELO command and print server response.
heloCommand = 'HELO Alice\r\n'
ssl_clientSocket.send(heloCommand)
recv1 = ssl_clientSocket.recv(1024)
print recv1

######################################################################
print "Got to here 2"
#####################################################################

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv1[:3] != '250':
    print '250 reply not received from server.'

# Send MAIL FROM command and print server response.
mailFromCommand = 'MAIL From: wgimson@gmail.com\r\n'
ssl_clientSocket.send(mailFromCommand)
recv2 = ssl_clientSocket.recv(1024)
print recv2

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv2[:3] != '250':
    print '250 reply not received from server.'

# Send RCPT TO command and print server response.
rcptToCommand = 'RCPT To: macyali@gmail.com\r\n'
ssl_clientSocket.send(rcptToCommand)
recv3 = ssl_clientSocket.recv(1024)
print recv3

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv3[:3] != '250':
    print '250 reply not received from server.'

# Send DATA command and print server response.
dataCommand = 'DATA\r\n'
ssl_clientSocket.send(dataCommand)
recv4 = ssl_clientSocket.recv(1024)
print recv4

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv4[:3] != '250':
    print '250 reply not received from server.'

# Send message data.
ssl_clientSocket.send(msg)

# Message ends with a single period.
ssl_clientSocket.send(endmsg)

# Send QUIT command and get server response.
quitCommand = 'QUIT\r\n'
ssl_clientSocket.send(quitCommand)
recv5 = ssl_clientSocket.recv(I1024)
print recv5

# If the first three numbers of the response from the server are not
# '250', we have a problem
if recv5[:3] != '221':
    print '221 reply not received from server.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:19:08.990

*   该错误可能是由拼写错误引起的：`'/etc/ssl/certs/ca.pm'`->`'/etc/ssl/certs/ca.pem'` 即系统找不到`ca.pm`文件
*   `'/etc/ssl/certs/ca.pem'`不包含必要的 CA 证书。

您可以`cacert.pem`从[http://curl.haxx.se/ca/cacert.pem](http://curl.haxx.se/ca/cacert.pem)下载（它是最新的）或使用`ca_certs = certifi.where()`（我`import certifi`在您的代码中看到），例如：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import smtplib
import socket
import ssl
import sys
from email.header    import Header
from email.mime.text import MIMEText
from getpass         import getpass

import certifi # $ pip install certifi

login, password = 'user@gmail.com', getpass('Gmail password:')
ca_certs = certifi.where()
##ca_certs = 'cacert.pem' # $ wget http://curl.haxx.se/ca/cacert.pem

class SMTP_SSL(smtplib.SMTP_SSL):
    """Add support for additional ssl options."""
    def __init__(self, host, port=0, **kwargs):
        self.ssl_kwargs = kwargs.pop('ssl_kwargs', {})
        self.ssl_kwargs['keyfile'] = kwargs.pop('keyfile', None)
        self.ssl_kwargs['certfile'] = kwargs.pop('certfile', None)
        smtplib.SMTP_SSL.__init__(self, host, port, **kwargs)

    def _get_socket(self, host, port, timeout):
        if self.debuglevel > 0:
            print>>sys.stderr, 'connect:', (host, port)
        new_socket = socket.create_connection((host, port), timeout)
        new_socket = ssl.wrap_socket(new_socket, **self.ssl_kwargs)
        self.file = smtplib.SSLFakeFile(new_socket)
        return new_socket

# create message
msg = MIMEText('message body…', _charset='utf-8')
msg['Subject'] = Header('subject…', 'utf-8')
msg['From'] = login
msg['To'] = login

# send it via gmail
s = SMTP_SSL('smtp.gmail.com', timeout=10,
             ssl_kwargs=dict(cert_reqs=ssl.CERT_REQUIRED,
                             ssl_version=ssl.PROTOCOL_SSLv3,
                             ca_certs=ca_certs))
s.set_debuglevel(1) # enable debug output
try:
    s.login(login, password)
    s.sendmail(msg['From'], msg['To'], msg.as_string())
finally:
    s.quit() 
```

# c - C 中的 scanf 和 char 指针——意外输出

> ID：12550036
> 
> 赞同：-1
> 
> 时间：2012-09-23T05:42:04.780
> 
> 标签：c, pointers, scanf, cstring

```
void main(int argc, char * argv[])
{ 
  FILE* inFile = NULL;
  char * bufferFromStdin;
  char buf[100];
  printf("Enter something:\n");
  scanf("%s", buf);
  printf("First scan from stdin is: %s\n", buf);

  if(buf == "THIS" || buf[0]=='T')
   {
    printf("THIS found first\n");
   }
   else {printf("Not Found first\n");}

   printf("Enter something again:\n");
   scanf("%s", bufferFromStdin);
   printf("Second scan from stdin is: %s\n", bufferFromStdin);
   if(bufferFromStdin == "THIS")
   {
    printf("THIS found second\n");
   }
   else {printf("Not Found second\n");}
}//main 
```

给我输出：
./test < testinput.txt
输入一些东西：
第一次从标准输入扫描是： 第一次
找到
这个 再次输入：
第二次从标准输入扫描是：（null）
第二个没有找到

testinput.txt 有一行文本“THIS”

这 就是我在 运行 程序 时 得到 的
结果

使用任何一种输入法时，为什么输入无法保存到 char* 中，我将如何解决这个问题？我需要通过键盘从标准输入获取输入并重定向 I/O。我认为这与 malloc();

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:33:19.303

您的代码中有两个严重错误。首先，`bufferFromStdin`不指向分配的内存。`scanf`需要一个指向先前分配的内存的指针（例如`buf`在您的示例中），它将存储结果。当您传递未初始化的变量时，例如`bufferFromStdin`结果未定义。

其次，`==`C 中的运算符比较两个指针，而不是它们指向的内容。因此，`buf == "THIS"`永远不会是真的，因为`buf`它没有指向一个常量数组。为了比较两个字符串，使用`strcmp`. 当然，这两个指针都需要指向某个东西才能工作。

另外，作为旁注，`main`应始终返回`int`not `void`。

纠正这两个问题后，您的代码应该可以工作：

```
int main(int argc, char * argv[])
{ 
  char buf[100];
  printf("Enter something:\n");
  scanf("%s", buf);
  printf("First scan from stdin is: %s\n", buf);

  if(strcmp(buf, "THIS") == 0) {
    printf("THIS found first\n");
  } else {printf("Not Found first\n");}

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T06:38:16.950

您的代码中有几个编程错误。

```
void main(int argc, char * argv[])
{ 
  FILE* inFile = NULL;
  char * bufferFromStdin;
  char buf[100]; 
```

您正在使用三种不同的样式分配三个指针变量：

*   `inFile`已正确初始化（NULL 指针）。
*   `bufferFromStdin`未初始化。
*   `buf`被初始化并指向一个静态分配的区域。

您可能想检查在 C 中如何分配内存。

```
 printf("Enter something:\n");
  scanf("%s", buf); 
```

这个`scanf`电话有点危险。如果用户插入的字符串长度超过 99 个字符（记住 \0 终止符），它将溢出缓冲区。你可能想检查[这个问题](https://stackoverflow.com/questions/1621394/how-to-prevent-scanf-causing-a-buffer-overflow-in-c)。

```
 printf("First scan from stdin is: %s\n", buf);

  if(buf == "THIS" || buf[0]=='T') 
```

我很抱歉地说，但我觉得这很有趣！您想测试字符串相等性（内容，而不是指针）并且您看到第一个测试不起作用（您正在比较指针），因此您添加了第二个测试。检查[手册页](http://www.manpagez.com/man/3/strcmp/)。

```
 {
    printf("THIS found first\n");
   }
   else {printf("Not Found first\n");} 
```

我也觉得这有点难看。您可能想坚持一种[缩进样式](http://en.wikipedia.org/wiki/Indent_style)。

```
 printf("Enter something again:\n");
   scanf("%s", bufferFromStdin); 
```

您正在使用未初始化的指针。这里发生的情况取决于您的编程环境、操作系统、编译器。一个强大的操作系统可能会终止你的程序。或者你正在破坏一些内存区域。

```
 printf("Second scan from stdin is: %s\n", bufferFromStdin);
   if(bufferFromStdin == "THIS") 
```

与上述相同的问题，但您忘记实施解决方法。

```
 {
    printf("THIS found second\n");
   }
   else {printf("Not Found second\n");}
}//main 
```

# android - R.java 没有在 Eclipse 中生成（与 XML 无关！）

> ID：12550037
> 
> 赞同：1
> 
> 时间：2012-09-23T05:42:08.653
> 
> 标签：android, eclipse

所以我最近不得不重新安装 Ubuntu 12.04，在将我的 Android 项目导入回我的 Eclipse 工作区后，没有生成任何 R.java 文件。

除了 src 目录之外，没有任何错误被报告，当然我对资源的所有引用都被标记为错误。

起初我以为是因为我安装了 OpenJDK，所以我将其删除并安装了 Java 7，但它仍然没有修复它。

然后，作为测试，我在我的工作空间中创建了一个全新的应用程序，却发现无法生成 R.java...

有谁知道为什么会发生这种情况，或者更重要的是，如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:48:28.030

你的 sdk 和 adt 插件的版本号是多少？

尝试这个 ：

如果它不起作用并且您认为您尝试了所有方法，请先关闭您的 Eclipse 安装（卸载并重新安装）。如果删除并重新安装插件不起作用，请重命名您的 ~/.eclipse 文件夹并重新开始。如果这不起作用，请删除工作区中的 .metadata 文件夹......然后重新开始。（您将不得不重新导入所有项目）

从存储库安装 Eclipse（我正在使用来自软件中心和 openJDK 的 eclipse）。如果您运行的是 x64：sudo apt-get install ia32-libs-multiarch

作为 root 启动 eclipse 以获取最新的平台/PDT 更新（它们在 /usr 的某个地方，所以你需要是 root）。关闭 eclipse（可选择删除 /root/.eclipse 文件夹）。

以非 root 身份启动 eclipse。安装插件。它们将在您的 ~/.eclipse 目录中。

如果已经安装 移除 Window->Android Manager 中的所有组件 更新插件通过：Help->Install Software->Already installed -> Show updates -> Install 重新安装所有组件。

如果尚未安装通过帮助安装软件菜单安装 ADT 插件。选择在 ADT 安装期间安装 SDK。如果安装的任何部分出现错误，请卸载并安装该部分。

安装所有更新。如果更新的任何部分给您带来错误，请卸载并安装该部分。

# android - Android 登录页面，HTTPPOST（可能的 AsyncTask 帮助）

> ID：12550039
> 
> 赞同：1
> 
> 时间：2012-09-23T05:42:22.087
> 
> 标签：android, login, android-asynctask, http-post

我正在尝试创建一个登录页面以从我学校的网站上提取一些信息（日程安排信息...等）。该代码完美地作为一个java驱动程序工作，但我试图让它在android上工作。朋友告诉我应该使用`AsyncTask`模式。有人可以告诉我如何使用`AsyncTask`下面的代码吗？

```
public class MainActivity extends Activity implements OnClickListener {
    EditText un,pw;
    TextView error;
    Button ok;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        un=(EditText)findViewById(R.id.et_un);
        pw=(EditText)findViewById(R.id.et_pw);

        ok=(Button)findViewById(R.id.btn_login);
        ok.setOnClickListener(this); 
    }

    public void postLoginData() {
        //Create a new HttpClient and Post Header
        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost=new HttpPost("url");

        try {
            EditText un=(EditText)findViewById(R.id.et_un);
            String username=un.getText().toString();

            EditText pw=(EditText)findViewById(R.id.et_pw);
            String password=un.getText().toString();

            MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

            entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
            entity.addPart("userName", new StringBody("username"));
            entity.addPart("password", new StringBody("password"));
            entity.addPart("btnLogin", new StringBody("Login"));
            entity.addPart("__EVENTTARGET", new StringBody(""));

            //Post to login site
            httppost = new HttpPost("https://my.jcsu.edu/ICS");
            httppost.setEntity(entity);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity response_entity = response.getEntity();
            if (response_entity != null) {
                Jsoup.parse(EntityUtils.toString(response_entity));
            }

            HttpGet httpget = new HttpGet("url");
            response = httpclient.execute(httpget);
            response_entity = response.getEntity();

            if (response_entity != null) {
                Document doc = Jsoup.parse(EntityUtils.toString(response_entity));

                // Get the user's name
                Element userWelcome = doc.getElementById("userWelcome");
                System.out.println("Welcome " + userWelcome.getElementsByTag("strong").get(0).html());

                // Get the user's schedule
                System.out.println("\nCourse Schedule:");
                Elements gbody = doc.getElementsByClass("gbody");
                Element tr = gbody.get(4);
                Elements td = tr.getElementsByTag("td");
                for (Element e : td) {
                    if (e.html().contains("<ul>") || e.html().contains("<a"))
                        continue;
                    else

                        System.out.println(e.html());
                }

                // Get user's information
                System.out.println("\nAcademic Information:");
                System.out.println(doc.getElementById("pg7_V_rptPackage_ctl00_lblDivision").html()
                                   .replace("&nbsp;", ""));
                System.out.println("Faculty Advisors: "
                                   + doc.getElementById("pg7_V_rptPackage_ctl00_rptAdvisor_ctl00_lblAdvisorInfo").html() + ", "
                                   + doc.getElementById("pg7_V_rptPackage_ctl00_rptAdvisor_ctl02_lblAdvisorInfo").html());
                System.out.println("Intended Majors: "
                                   + doc.getElementById("pg7_V_rptPackage_ctl00_rptMajor_ctl00_lblMajorInfo").html());

            }
        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    public void onClick(View view) {
        if(view == ok){
            postLoginData();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T22:25:28.280

该方法`OnClickListener.onClick`将从 UI 线程调用，因此您不应从该方法执行任何长时间运行的操作。从内部`onClick`，您调用`postLoginData`它发出网络请求。您不应该从 UI 线程中执行此操作。

除非我遗漏了一些东西，否则我实际上没有任何理由使用`AsyncTask`上面的，你可以简单地使用 new`Thread`来做后台工作。这是因为您的方法`postLoginData`只是发出请求并将一些内容打印到`System.out`.

```
public void postLoginData() {
    new Thread() {
        // ... body of postLoginData()
    }.start();
} 
```

但是，我假设您实际上还有一些不属于您的代码段的代码，或者稍后会添加一些代码。如果该代码将在网络操作完成后更新 UI，您应该考虑使用`AsyncTask`. 我将尝试使用它来勾勒出一个示例。

您需要从 UI 线程对 UI 进行任何更新，但您不能在 UI 线程上执行长时间运行的操作，例如网络请求。Android 背后的基本思想`AsyncTask`是在 UI 线程和后台线程上安排工作。这允许您开始下载数据，在下载发生时更新进度条，并在完成时更新 UI。这是如何`postLoginData`使用实现的基本草图`AsyncTask`：

```
PostLoginDataTask extends AsyncTask {
    String username, password;

    onPreExecute() { // runs on the UI thread
        EditText un=(EditText)findViewById(R.id.et_un);
        username=un.getText().toString();

        EditText pw=(EditText)findViewById(R.id.et_pw);
        password=un.getText().toString();
    }

    doInBackground() { // runs on a background thread
        //Create a new HttpClient and Post Header
        DefaultHttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost=new HttpPost("url");

        MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        entity.addPart("userName", new StringBody("username"));
        entity.addPart("password", new StringBody("password"));
        entity.addPart("btnLogin", new StringBody("Login"));
        entity.addPart("__EVENTTARGET", new StringBody(""));

        //Post to login site
        httppost = new HttpPost("https://my.jcsu.edu/ICS");
        httppost.setEntity(entity);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity response_entity = response.getEntity();
        if (response_entity != null) {
            Jsoup.parse(EntityUtils.toString(response_entity));
        }

        HttpGet httpget = new HttpGet("url");
        response = httpclient.execute(httpget);
        response_entity = response.getEntity();

        return response_entity;
    }

    onPostExecute() { // runs on the UI thread
        if (response_entity != null) {
            Document doc = Jsoup.parse(EntityUtils.toString(response_entity));

            // Get the user's name
            Element userWelcome = doc.getElementById("userWelcome");
            System.out.println("Welcome " + userWelcome.getElementsByTag("strong").get(0).html());

            // Get the user's schedule
            System.out.println("\nCourse Schedule:");
            Elements gbody = doc.getElementsByClass("gbody");
            Element tr = gbody.get(4);
            Elements td = tr.getElementsByTag("td");
            for (Element e : td) {
                if (e.html().contains("<ul>") || e.html().contains("<a"))
                    continue;
                else

                    System.out.println(e.html());
            }

            // Get user's information
            System.out.println("\nAcademic Information:");
            System.out.println(doc.getElementById("pg7_V_rptPackage_ctl00_lblDivision").html()
                               .replace("&nbsp;", ""));
            System.out.println("Faculty Advisors: "
                               + doc.getElementById("pg7_V_rptPackage_ctl00_rptAdvisor_ctl00_lblAdvisorInfo").html() + ", "
                               + doc.getElementById("pg7_V_rptPackage_ctl00_rptAdvisor_ctl02_lblAdvisorInfo").html());
            System.out.println("Intended Majors: "
                               + doc.getElementById("pg7_V_rptPackage_ctl00_rptMajor_ctl00_lblMajorInfo").html());

            // Any updates to the UI should go in this method
        }
    }
} 
```

请注意，这并不完全正确并且不会编译。您需要[阅读泛型类型参数 Params、Progress 和 Result，](http://developer.android.com/reference/android/os/AsyncTask.html)并弄清楚如何将其融入您的代码。我把它作为练习留给读者：P 这不是太难，但如果你感到困惑，请随时在评论中提问......

希望有帮助！

# ios - 轴位置和绘图颜色

> ID：12550040
> 
> 赞同：1
> 
> 时间：2012-09-23T05:42:30.983
> 
> 标签：ios, colors, position, core-plot

我有两个问题。

1.  我的轴没有在正确的点上相遇，即我希望 y 轴的 0 与 x 轴的第一个值相交。我尝试了很多通过`orthogonalCoordinateDecimal`财产的方法，但我无法管理它。

2.  其次，我右手边的第二个图没有像我编码的那样绘制红色。你能告诉我我可能会错过什么吗？

数字：

![在此处输入图像描述](../Images/72f0d1751f49c5d81b5b0cb958c6911a.png)

我写的代码片段：

```
NSTimeInterval oneDay = 24 * 60 * 60;

// Setup plot spaces

//1- calorie
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
plotSpace.allowsUserInteraction = YES;
NSTimeInterval xLow       = 0.0f;
plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(xLow) length:CPTDecimalFromFloat(oneDay * 7.0f)];
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(0) length:CPTDecimalFromInt(600)];

//2- exercise
plotSpace2 = [[[CPTXYPlotSpace alloc] init] autorelease];
plotSpace2.allowsUserInteraction = YES;
plotSpace2.xRange = plotSpace.xRange;
plotSpace2.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0)
                                                 length:CPTDecimalFromFloat(60.0)];
[graph addPlotSpace:plotSpace2];

CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.graphHost.hostedGraph.axisSet;

// Axes
CPTXYAxis *x = axisSet.xAxis;
NSTimeInterval oneDay = 24 * 60 * 60;    
x.majorIntervalLength         = CPTDecimalFromFloat(oneDay);
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
x.minorTicksPerInterval       = 0;

 CPTXYAxis *y = axisSet.yAxis;
y.majorIntervalLength   = CPTDecimalFromInt(200);
y.minorTicksPerInterval = 9;
y.orthogonalCoordinateDecimal = CPTDecimalFromFloat(0);
y.title = @"Calories Burned";

CPTXYAxis *y2 = [[[CPTXYAxis alloc] init]retain];
y2.coordinate = CPTCoordinateY;
y2.majorIntervalLength  = CPTDecimalFromString(@"5.0");
y2.minorTicksPerInterval = 3;
y2.orthogonalCoordinateDecimal = CPTDecimalFromString(@"-20.0");
y2.title = @"Exercise Time (min)";

//I added these lines too
//adding 2nd axis
NSMutableArray *newAxes = [graph.axisSet.axes mutableCopy];
[newAxes addObject:y2];
graph.axisSet.axes = newAxes;
[newAxes release];

 CPTScatterPlot *caloriePlot = [[CPTScatterPlot alloc] init];
caloriePlot.dataSource = self;
caloriePlot.identifier = @"Calorie";

//create styles and symbols
CPTMutableLineStyle *calorieLineStyle = [caloriePlot.dataLineStyle mutableCopy];
calorieLineStyle.lineWidth = 2.5;
calorieLineStyle.lineColor = [CPTColor greenColor];
caloriePlot.dataLineStyle  = calorieLineStyle;

[graph addPlot:caloriePlot toPlotSpace:plotSpace];

CPTScatterPlot *exercisePlot = [[CPTScatterPlot alloc] init];
exercisePlot.dataSource = self;
exercisePlot.identifier = @"Exercise";

CPTMutableLineStyle *exerciseLineStyle = [exercisePlot.dataLineStyle mutableCopy];
exerciseLineStyle.lineWidth = 2.5;
exerciseLineStyle.lineColor = [CPTColor redColor];
exerciseLineStyle.dashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:5.0f], [NSNumber numberWithFloat:5.0f], nil];   
exercisePlot.dataLineStyle  =calorieLineStyle;
[graph addPlot:exercisePlot toPlotSpace:plotSpace2]; 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:26:18.020

1.  如果没有看到更多代码，很难说。你有多少地块空间？每个轴分配给哪个绘图空间？每个地块空间的地块范围是多少？

2.  更改此行：

    ```
    exercisePlot.dataLineStyle = calorieLineStyle; 
    ```

    到

    ```
    exercisePlot.dataLineStyle = exerciseLineStyle; 
    ```

# c# - 如何在 C# 中设置 PropertyGrid 项目的长度？

> ID：12550041
> 
> 赞同：4
> 
> 时间：2012-09-23T05:42:44.380
> 
> 标签：c#, propertygrid

例如，我有 2 个项目： Item1 是`string`， Item2 是`int`。如何为 Item1 8 个字符和 Item2 5 个数字（在 c# 中）设置最大长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:10:40.777

为此，只需使用[StringLengthAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.stringlengthattribute.aspx)和[IntegerValidatorAttribute](http://msdn.microsoft.com/en-us/library/system.configuration.integervalidatorattribute.aspx)。

```
class TestCase
{
  [StringLength(8, ErrorMessage = "The TestString value cannot exceed 8 characters.")]
  [Required(ErrorMessage="Value Required")]
  property string TestString;

  [IntegerValidator(MaxValue = 99999)]
  property int TestInt;
} 
```

# c# - 委托字符串中的替换方法

> ID：12550042
> 
> 赞同：0
> 
> 时间：2012-09-23T05:43:36.840
> 
> 标签：c#, delegates, replace

我有一个小问题我收到了一些数据并在文本框中显示它以调用它我使用

```
if (textBox1.InvokeRequired)
{
    // this is worker thread
    updatetextBoxDelegate del = new updatetextBoxDelegate(updatetextBox);
    textBox1.Invoke(del, new object[] { data });
} 
```

我的数据就像名字：sam 年龄：10

现在我想拆分它并将这些值保存在数组中或显示在单独的文本框中，我使用了替换方法，例如

```
string str = textBox1.text;
str.Replace("name",""); 
```

依此类推，但问题是替换方法不起作用它不能替换任何东西告诉我我做错了什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:46:01.317

如果你看这里： http: [//msdn.microsoft.com/en-us/library/fk49wtc1.aspx](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)，你会看到该`Replace`方法返回一个字符串，你必须“捕捉”它，所以替换：

```
str.replace("name",""); 
```

和

```
str = str.Replace("name", ""); 
```

# java - 从java读取文件系统结构

> ID：12550043
> 
> 赞同：1
> 
> 时间：2012-09-23T05:43:45.427
> 
> 标签：java, shell, unix, filesystems

是否可以读取目录中的所有文件夹名称（不是子文件夹）并将列表保存在`ArrayList`等中？

例如-如果一个目录里面有以下文件夹-CLIENT1、CLIENT2、CLIENT3等。我希望`ArrayList`是这样的-[CLIENT1、CLIENT2、CLIENT3等]。

这些文件夹位于 unix 服务器中，因此可以使用 java 代码或 shell 脚本（bash/tcsh/etc）或它们的组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:06:40.303

下面的 Java 代码片段应该对您有所帮助。它将返回目录中所有文件夹的列表。它可能会根据您处理任何可能的 IO 异常的方式返回一个空列表。

```
public List<String> getDirectoriesInFolder(String folderPath)
{
     List<String> folderNames = new ArrayList<String>();
     try
     {
         File directory = new File (folderPath);
         String[] allFilesInFolder = directory.list();
         for(String fileName : allFilesInFolder)
         {
            File f = new File(fileName);
            if(f.isDirectory)
            {
               folderNames.add(fileName);
            } 

         }

     }
     catch(IOException iex)
     {
          //Do any exception handling here...
     }
     return folderNames; 
} 
```

如果您想使用 Shell 脚本来执行此操作，那么以下链接中提供的指导应该可以帮助您找到解决方案：

[帮助脚本列出目录](http://www.unix.com/shell-programming-scripting/31068-help-script-list-directories.html)

[bash：将输出`ls`放入数组中](http://www.linuxquestions.org/questions/programming-9/bash-put-output-from-%60ls%60-into-an-array-346719/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T02:10:50.723

对我来说，这比`new File()`每次构建的钝迭代都要干净一些。

```
public class DirFilter implements FileFilter {
    public static FileFilter INSTANCE = new DirFilter();
    @Override
    public boolean accept(File file) {
        return file.isDirectory();
    }
}

File startDir = .....;
List<File> children = Arrays.asList(startDir.listFiles(DirFilter.INSTANCE)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T05:45:59.227

尝试这个：

```
File dir = new File("directoryName");
File temp;
String[] children = dir.list();
if (children !=null) {
    for (int i=0; i<children.length; i++) {
        temp = new File(children[i]);
        if(temp.isDirectory()) //add children[i] to arrayList
    }
} 
```

# c++ - 在结构/C++ 中引用变量

> ID：12550049
> 
> 赞同：1
> 
> 时间：2012-09-23T05:45:15.907
> 
> 标签：c++, return, structure, pass-by-reference

下面，我提供了一个我创建的代码的最小示例。我设法让这段代码正常工作，但我不确定所采用的做法是否合理。本质上，我想做的是让“参数”类引用选择“状态”类中的元素，因此可以通过“参数”更改状态中的变量。

我有问题：这种方法是否可行？如果没有，有没有更好的方法来实现我的目标？

示例代码：

```
struct VAR_TYPE{
public:
    bool is_fixed;     // If is_fixed = true, then variable is a parameter
    double value;      // Numerical value
    std::string name;  // Description of variable (to identify it by name)
};

struct NODE{
public: 
    VAR_TYPE X, Y, Z;  
    /* VAR_TYPE is a structure of primitive types */
};

class States{
private:
    std::vector <NODE_ptr> node;                  // shared ptr to struct NODE
    std::vector <PROP_DICTIONARY_ptr> property;   // CAN NOT be part of Parameter
    std::vector <ELEMENT_ptr> element;            // CAN NOT be part of Parameter

public:
    /* ect */
    void set_X_reference ( Parameter &T , int i ) { T.push_var( &node[i]->X ); }
    void set_Y_reference ( Parameter &T , int i ) { T.push_var( &node[i]->Y ); }    
    void set_Z_reference ( Parameter &T , int i ) { T.push_var( &node[i]->Z ); }

    bool get_node_bool_X( int i ) { return node[i]->X.is_fixed; }
    // repeat for Y and Z
};

class Parameter{
private:
    std::vector <VAR_TYPE*> var;
public:
    /* ect */
};

int main(){
    States S;
    Parameter P;

    /* Here I initialize and set S, and do other stuff */

    // Now I assign components in States to Parameters
    for(int n=0 ; n<S.size_of_nodes() ; n++ ){
        if ( S.get_node_bool_X(n)==true ){
            S.set_X_reference ( P , n );
        };
        // repeat if statement for Y and Z
    };

    /* Now P points selected to data in S, and I can
     * modify the contents of S through P
     */

    return 0;
}; 
```

## 更新

出现此问题的原因是我正在使用 Fortran 遗留代码。总结一下这个 Fotran 代码——它是飞行器的数值模拟。这段代码有一个必须在其中工作的相当严格的程序框架，它带有一个允许的 Fortran 类型的预定义列表。Fortran 胶水代码可以创建 C++ 对象的实例（实际上，从 Fortran 的角度来看是一个引用），但不知道其中包含什么（使用其他方法将 C++ 数据提取到 Fortran）。

我遇到的问题是，当 C++ 模块动态链接到 Fortran 胶水代码时，必须在调用 C++ 代码的每个实例中初始化 C++ 对象。这取决于 Fortran 模板的定义方式。

为了避免这种重新初始化对象的循环，我计划使用“状态”作为容器类。Fortran 代码允许使用任意定义的“状态”对象；但我计划用它来利用有关模型的所有相关信息。这个想法是使用参数类（由 Fortran 代码公开和更新）来更新状态中的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:04:12.757

你正在做的是合法的 C++（虽然代码的某些部分丢失了，所以我不得不猜测它们做了什么）——你*可以*像这样获取成员变量的指针和引用。但是这是否道德（或“合理”）的问题在很大程度上取决于情况。

在我看来，您试图隐藏`x`特定对象属于您的`Parameter`类型的数据成员（等）的语义。因此，当实际访问您`VAR_TYPE*`收藏的内容时，您不会拥有该信息。

这可能是需要的，也可能是代码异味。我倾向于后者。如果`x`,`y`和`z`可以充当类似的角色，最好将它们替换为*一个* [`std::array<VAR_TYPE,3>`](http://en.cppreference.com/w/cpp/container/array)并通过索引访问它们，而不是费力地创建这种包装器类型，该包装器类型的唯一目的是准确地添加这种间接访问功能。

# android - MyLocatoinOverlay disableMyLocation 或使用 OverlayItem

> ID：12550064
> 
> 赞同：0
> 
> 时间：2012-09-23T05:48:29.353
> 
> 标签：android, android-mapview, mylocationoverlay

我的应用程序中有以下功能。

1.  我使用 MyLocationOverlay 来获取我当前的位置。
2.  我扩展了 MyLocationOverlay 以便能够放置自定义标记而不是闪烁的蓝色标记。

我需要关于最后一个要求的帮助。我只是想让一个标记保持固定在 MyLocationOverlay 说它最初找到的位置上，而不是在它从一个卫星跳到另一个卫星时四处移动。

我有哪些选择来创建这种类型的用户体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:55:52.207

我建议保存在 CustomLocationOverlay 内馈入 drawMyLocation 函数的第一个地理点，并使用它而不是馈入函数的 myLocation。

```
 int intFirstGeoPoint = 0;
 GeoPoint FirstGeoPoint;

protected void drawMyLocation(Canvas canvas, MapView mapView, Location lastFix, GeoPoint myLocation, long when) {

        if(intFirstGeoPoint == 0){
             FirstGeoPoint=myLocation;
             intFirstGeoPoint=1;
        }else{
             myLocation=FirstGeoPoint;
        }

        // translate the GeoPoint to screen pixels
        Point screenPts = mapView.getProjection().toPixels(myLocation, null);
        ...
        ... 
```

您还可以捕获此位置并创建一个仅绘制此点而不是劫持 LocationOverlay 的新 DrawableMapOverlay

# node.js - ExpressJS 3.0 如何将 res.locals 传递给玉视图？

> ID：12550067
> 
> 赞同：20
> 
> 时间：2012-09-23T05:48:44.873
> 
> 标签：node.js, session, express, response, pug

我想在用户登录失败后显示一条消息，但我无法让变量显示在我的 Jade 视图中。

我有一些片段，我知道我必须在我的 app.configure() 中使用它：

```
 app.use (req, res, next) ->
      res.locals.session = req.session 
```

我将设置用户 POSTS 错误密码后的 flash 消息：

```
 exports.postSession = (req, res) ->
       users = require '../DB/users'
       users.authenticate(req.body.login, req.body.password, (user) ->
       if(user)
         req.session.user = user
         res.redirect(req.body.redirect || '/')
       else
         req.session.flash = 'Authentication Failure!'
         res.render('sessions/new', {title:'New', redirect: req.body.redirect })
      ) 
```

我不知道如何访问`res.locals.session`我的 Jade 文件。我怀疑我是否设置正确。这个问题很像这个问题：[Migrating Express.js 2 to 3, 特别是 app.dynamicHelpers() to app.locals.use?](https://stackoverflow.com/questions/11580796/migrating-express-js-2-to-3-specifically-app-dynamichelpers-to-app-locals-use) 但我仍然无法让它工作。如果有人可以向我展示一个在 res.local 中设置值并在视图中访问它们的简单示例，将不胜感激。

ps我确实知道connect-flash，但我需要了解如何使视图中的东西可用。

这是我的应用程序：

```
app.configure(() -> 
  app.set('views', __dirname + '/views')
  app.set('view engine', 'jade')
  app.use(express.bodyParser())
  app.engine('.jade', require('jade').__express)
  app.use(express.methodOverride())
  app.use(express.cookieParser())
  app.use(express.session({ store: new express.session.MemoryStore({reapInterval: 50000 * 10}), secret: 'chubby bunny' }))
  app.use(express.static(__dirname + '/public'))
  app.use((req, res, next) ->
    res.locals.session = req.session
    next()
  )
  app.use(app.router)
) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-26T08:37:48.300

只是为了给每个有同样问题的人做一个简短的总结，并得到改变的印象`res.redirect`。

`app.use`把你的中间件放在**前面** 很重要`app.router`。见 express 的作者 TJ Holowaychuck 的评论

*   [https://groups.google.com/d/msg/express-js/72WPl2UKA2Q/dEndrRj6uhgJ](https://groups.google.com/d/msg/express-js/72WPl2UKA2Q/dEndrRj6uhgJ)

这是一个使用全新安装 express v3.0.0rc4 的示例

应用程序.js：

```
app.use(function(req, res, next){
  res.locals.variable = "some content";
  next();
})

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
}); 
```

index.jade:

```
extends layout

block content
  h1= title
  p Welcome to #{title}
  p= variable 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T18:44:51.780

如果您使用的是 express.session()，则必须在*express.session()*之后但**在****app.router** *之前*，在 app.configure() 内部调用您的函数。

 ****应用程序.js

```
app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.session());

  // Give Views/Layouts direct access to session data.
  app.use(function(req, res, next){
    res.locals.session = req.session;
    next();
  });

  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
}); 
```

索引.jade

```
extends layout

block content   
  h1= title   
  p My req.session.var_name is set to #{session.var_name} 
```****

# java - 输入编译错误Java

> ID：12550068
> 
> 赞同：1
> 
> 时间：2012-09-23T05:48:55.097
> 
> 标签：java, java.util.scanner

我`int num`只需要接受数字。如果我输入字母，我会收到错误消息。有没有办法立即标记字母，还是我必须将`num`其作为*字符串*并运行循环？

```
import java.util.Scanner;

public class Test 
{        
    public static void main(String[] args) 
    {
        Scanner input = new Scanner(System.in);
        System.out.println("Input a number.");
        int num = input.nextInt();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:59:57.947

您必须使用[Scanner.hasNextInt()：](http://java.sun.com/javase/6/docs/api/java/util/Scanner.html#hasNextInt%28%29)

如果此扫描仪输入中的下一个标记可以使用该`nextInt()`方法解释为默认基数中的 int 值，则返回 true。扫描仪不会超过任何输入。

```
public static void main(String[] args) 
 {
 System.out.println("Input a number.");
 Scanner sc = new Scanner(System.in);
 System.out.print("Enter number 1: ");
 while (!sc.hasNextInt()) sc.next();
 int num = sc.nextInt();

 System.out.println(num);

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T05:53:32.413

你可能想做这样的事情：

```
import java.util.InputMismatchException
import java.util.Scanner;

public class Test {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        System.out.println("Input an integer.");
        int num = 0;  // or any other default value
        try {
            num = input.nextInt();
        } catch (InputMismatchException e) {
            System.out.println("You should've entered an integer like I told you. Fool.");
        } finally {
            input.close();
        }
    }
} 
```

如果用户输入的不是整数，`catch`块内的代码将被执行。

# java - 异常处理给我带来麻烦

> ID：12550069
> 
> 赞同：1
> 
> 时间：2012-09-23T05:48:57.293
> 
> 标签：java, exception, exception-handling

我有一个正在开发的小程序。我只是在我的代码中放了一个 try catch，除了一件事之外，一切似乎都在工作。我将在下面发布我的代码...正如您在我的代码中看到的 try catch 语句，它告诉程序继续使用 checkNumber 方法进行异常处理。我一直在这部分收到错误...

```
if (input == 5){
} 
```

输入一直在红色下划线并说“不兼容的操作数类型扫描仪和 int。

不知道问题是什么......或者如何解决它......这是我的代码

```
import java.util.ArrayList;
import java.util.Scanner;

    public class BankMain
    {
    private double availableBal =80;
    private double totalBal =100;
    private double availableBal2 =480;
    private double totalBal2 =500;
    private double availableBal3 =80;
    private double totalBal3 =100;
    ArrayList<Integer> cardNum = new ArrayList<Integer>();
    static Scanner input = new Scanner(System.in);

    private String error;           //String the error from the exception
    {
        error = "error";
    }

    public void cardNumbers(){

            Scanner cards = new Scanner(System.in);
            Scanner input = new Scanner(System.in);
            Scanner keyboard = new Scanner(System.in);

            try{

            System.out.println("Please select a 5 digit card number");

            cardNum.add(input.nextInt());
            checkNumber();

            }

            catch(invalidNumber err){

                System.out.println("Caught Error: " + err.getError());
            }

            System.out.println("Thank you! You're card number is " +cardNum);

            System.out.println("Type 'c' to go back to main menu.");
            String value = keyboard.next();

            if(value.equalsIgnoreCase("c")){
                menu();

    }

    else if (!keyboard.equals('c')){

        System.out.println("Invalid Entry!");

    }

}

    public void menu(){

    System.out.println("ATM Menu:");
    System.out.println();
    System.out.println("1 = Create Account");
    System.out.println("2 = Account Login");
    System.out.println("3 = Exit ATM");
    query();
                }

        public void startAtm()
        {
            menu();

        }

        public void drawMainMenu()
        {

            AccountMain main3 = new AccountMain();
            int selection;

            System.out.println("\nATM main menu:");
            System.out.println("1 - View account balance");
            System.out.println("2 - Withdraw funds");
            System.out.println("3 - Add funds");
            System.out.println("4 - Back to Account Menu");
            System.out.println("5 - Terminate transaction");
            System.out.print("Choice: ");
            selection =input.nextInt();

            switch(selection)
            {
            case 1:
                viewAccountInfo();
                break;
            case 2:
                withdraw();
                break;
            case 3:
                addFunds();
                break;
            case 4:
                AccountMain.selectAccount();
                break;
            case 5:
                System.out.println("Thank you for using this ATM!!! goodbye");
            }
        }

        public void viewAccountInfo()
        {
            System.out.println("Account Information:");
            System.out.println("\t--Total balance: $"+totalBal);
            System.out.println("\t--Available balance: $"+availableBal);
            drawMainMenu();
        }

        public void viewAccountInfo2()
        {
            System.out.println("Account Information:");
            System.out.println("\t--Total balance: $"+totalBal2);
            System.out.println("\t--Available balance: $"+availableBal2);
            drawMainMenu();
        }

        public void deposit(int depAmount)
        {
            System.out.println("\n***Please insert your money now...***");
            totalBal =totalBal +depAmount;
            availableBal =availableBal +depAmount;
        }

        public void checkNsf(int withdrawAmount)
        {
            if(totalBal -withdrawAmount < 0)
                System.out.println("\n***ERROR!!! Insufficient funds in you accout***");
            else
            {
                totalBal =totalBal -withdrawAmount;
                availableBal =availableBal -withdrawAmount;
                System.out.println("\n***Please take your money now...***");
                }
        }

        public void addFunds()
        {
            int addSelection;

            System.out.println("Deposit funds:");
            System.out.println("1 - $20");
            System.out.println("2 - $40");
            System.out.println("3 - $60");
            System.out.println("4 - $100");
            System.out.println("5 - Back to main menu");
            System.out.print("Choice: ");
            addSelection =input.nextInt();

            switch(addSelection)
            {
            case 1:
                deposit(20);
                drawMainMenu();
                break;
            case 2:
                deposit(40);
                drawMainMenu();
                break;
            case 3:
                deposit(60);
                drawMainMenu();
                break;
            case 4:
                deposit(100);
                drawMainMenu();
                break;
            case 5:
                drawMainMenu();
                break;
            }
        }

        public void withdraw()
        {
            int withdrawSelection;

            System.out.println("Withdraw money:");
            System.out.println("1 - $20");
            System.out.println("2 - $40");
            System.out.println("3 - $60");
            System.out.println("4 - $100");
            System.out.println("5 - Back to main menu");
            System.out.print("Choice: ");
            withdrawSelection =input.nextInt();

            switch(withdrawSelection)
            {
            case 1:
                checkNsf(20);
                drawMainMenu();
                break;
            case 2:
                checkNsf(40);
                drawMainMenu();
                break;
            case 3:
                checkNsf(60);
                drawMainMenu();
                break;
            case 4:
                checkNsf(100);
                drawMainMenu();
                break;
            case 5:
                drawMainMenu();
                break;
            }
        }

public void query(){

    Scanner keyboard = new Scanner(System.in);
    double input = keyboard.nextInt();  

    if (input == 2){

        BankMainPart2 main2 = new BankMainPart2();

        System.out.println("Please enter your 5 digit card number.");
         BankMainPart2.loginCard(cardNum);

    }
    else if (input == 1){

        cardNumbers();

    }

    else if (input == 3){
        System.out.println("Thank you, have a nice day!");
        System.exit(0);

    }

}

public void checkingMenu()
{

    AccountMain main3 = new AccountMain();
    int selection;

    System.out.println("\nATM main menu:");
    System.out.println("1 - View account balance");
    System.out.println("2 - Withdraw funds");
    System.out.println("3 - Add funds");
    System.out.println("4 - Back to Account Menu");
    System.out.println("5 - Terminate transaction");
    System.out.print("Choice: ");
    selection =input.nextInt();

    switch(selection)
    {
    case 1:
        viewAccountInfo2();
        break;
    case 2:
        withdraw();
        break;
    case 3:
        addFunds();
        break;
    case 4:
        AccountMain.selectAccount();
        break;
    case 5:
        System.out.println("Thank you for using this ATM!!! goodbye");
    }
}

private static void checkNumber() throws invalidNumber              //run the check activation exception
{
  if (input == 5)
  {
      System.out.println("");
  }
  else
     throw new invalidNumber("invalid number");
 }  

    public static void main(String args[])
    {
        BankMain myAtm = new BankMain();
        myAtm.startAtm();
    }
} 
```

类银行主要 2

```
import java.util.ArrayList;
import java.util.Scanner;

public class BankMainPart2 {

    public static void loginCard(ArrayList<Integer> cardNum){

        BankMain main = new BankMain();
        AccountMain main3 = new AccountMain();

        Scanner logNum = new Scanner(System.in);    

        int loginInput = logNum.nextInt();

        if (cardNum.contains(loginInput)) {

            main3.selectAccount();

        }

        else {

            System.out.println("Sorry, that pin number is incorrect!");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T05:53:51.133

您的变量`input`是一个`Scanner`全局声明的对象，将用于该方法`checknumber()`，并且`5`是一个`int`. 因此它们是不兼容的类型。

相同的语句适用于方法`query()`，因为对于查询，您已经在本地定义了一个`input`类型为的变量`double`。

你实际上应该写的是

```
if(input.nextInt() == 5){} 
```

# java - 获取异常：java.lang.IllegalArgumentException：无法添加到布局：约束必须是字符串（或 null）

> ID：12550073
> 
> 赞同：2
> 
> 时间：2012-09-23T05:50:12.727
> 
> 标签：java, swing, awt, gridbaglayout, illegalargumentexception

我正在实施浏览器类型的项目，但遇到了异常。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.Insets;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import chrriis.dj.nativeswing.swtimpl.NativeInterface;
import chrriis.dj.nativeswing.swtimpl.components.JWebBrowser;

public class WebPageDisplay extends JPanel{

    public WebPageDisplay() {  

         super(new BorderLayout());  
         try{
       JPanel webBrowserPanel = new JPanel(new BorderLayout());   
       // webBrowserPanel.setBorder(BorderFactory.createTitledBorder("Native Web Browser component"));   
        final JWebBrowser webBrowser = new JWebBrowser();   
        webBrowser.setBarsVisible(false);   
        webBrowser.setStatusBarVisible(true);   
        webBrowserPanel.add(webBrowser, BorderLayout.CENTER);   
        add(webBrowserPanel, BorderLayout.CENTER);
                    webBrowser.navigate("www.google.com");
        JScrollPane scrollPane = new JScrollPane();   
        Dimension preferredSize = scrollPane.getPreferredSize();   
        preferredSize.height += 20;   
        scrollPane.setPreferredSize(preferredSize);   
//      add(scrollPane, BorderLayout.NORTH);   
        add(scrollPane,new GridBagConstraints(0, 2, 2, 1, 1.0, 1.0, GridBagConstraints.CENTER, 
            GridBagConstraints.BOTH, new Insets(0, 0, 0, 0), 0, 0));   

         }catch(Exception e){
             e.printStackTrace();

        }
      }

    public static void main(String[] args){
        NativeInterface.open();

         SwingUtilities.invokeLater(new Runnable() {

              public void run() {

                 WebPageDisplay webDisplay = new WebPageDisplay();

              }

            });

    }
} 
```

这是例外。

```
java.lang.IllegalArgumentException: cannot add to layout: constraint must be a string (or null)
    at java.awt.BorderLayout.addLayoutComponent(BorderLayout.java:409)
    at java.awt.Container.addImpl(Container.java:1074)
    at java.awt.Container.add(Container.java:927)
    at WebPageDisplay.<init>(PBXPageDisplay.java:35)
    at WebPageDisplay$1.run(PBXPageDisplay.java:51)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:677)
    at java.awt.EventQueue.access$000(EventQueue.java:85)
    at java.awt.EventQueue$1.run(EventQueue.java:638)
    at java.awt.EventQueue$1.run(EventQueue.java:636)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:647)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T05:53:21.063

如果不使用 GridBagLayout，则不能使用 GridBagConstraints。编译器告诉你这是没有意义的，我非常同意。

# php - 如何在另一个服务器和客户端之间建立一个 PHP 中间服务器？

> ID：12550075
> 
> 赞同：0
> 
> 时间：2012-09-23T05:50:33.953
> 
> 标签：php, http, caching, browser-cache

我正在尝试构建一个 PHP 服务器（我在这里称之为 server1），它作为另一个 Web 服务器（server2）和客户端之间的中间服务器。

我这样做的原因是，我想隐藏我用来从 server1 访问 server2 的 API 密钥。另外，我想减少对 server2 的调用次数。

我的问题是，我该如何做一些事情来缓存从 server1 到 server2 的调用？PHP中是否有模块或其他东西可以使用？我不希望来自客户端的每个调用都产生对 server2 的调用。

另一个要求是将来自 server2 的提要仅缓存 5 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:35:08.770

Varnish 可以替代吗？ [https://www.varnish-cache.org/](https://www.varnish-cache.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T18:26:40.910

这个解决方案更简单： [http ://www.theukwebdesigncompany.com/articles/php-caching.php](http://www.theukwebdesigncompany.com/articles/php-caching.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T06:22:53.363

你想要一个 PHP 代理，例如：

[http://sourceforge.net/projects/php-proxy/](http://sourceforge.net/projects/php-proxy/)

# iphone - 在石英 2d 中删除上下文中的剪辑

> ID：12550078
> 
> 赞同：2
> 
> 时间：2012-09-23T05:51:20.103
> 
> 标签：iphone, objective-c, ios, quartz-2d

我用弧线绘制了一条到我的上下文的路径，将其设置为剪辑，并将图像绘制到该剪辑中。

```
CGContextBeginPath(context);
CGContextMoveToPoint(context, lineStartPoint.x, lineStartPoint.y);
CGContextAddArc(context, lineStartPoint.x, lineStartPoint.y, 105, toAngle*M_PI,fromAngle*M_PI , 1);
CGContextMoveToPoint(context, toLinePoint.x, toLinePoint.y);
CGContextClip(context);
[[UIImage imageNamed:@"gradientfill.png"] drawInRect:[self bounds]]; 
```

如此完美，如图所示

![上下文剪辑](../Images/3bd50989cfc9a45694453f6a60e2bd99.png)

我的问题是，在那个渐变的底部，我画了一个我想存在于剪辑之外的圆圈，它应该看起来像这样

![在此处输入图像描述](../Images/ffca28883a8743dfc3352165bf606de6.png)

如何让我的上下文停止剪辑，以便我可以在剪辑之外拥有那个圆圈？

我画圆的代码是

```
CGMutablePathRef path = CGPathCreateMutable();
CGRect toHandleRect = CGRectMake(toLinePoint.x-5, toLinePoint.y-5, 10, 10);    
CGPathAddEllipseInRect(path, NULL, toHandleRect);
CGContextAddPath(context, path);
CGPathRelease(path); 
```

我希望用户能够将小圆圈拖到该视图中的任何位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T06:47:01.487

您可以发出 CGContextSaveGState + CGContextRestoreGState 对，如下例所示：

```
// Saves the context including the current clipping region.
CGContextSaveGState(context);

// Build you clip region and do some drawing
CGContextBeginPath(context);
CGContextMoveToPoint(context, lineStartPoint.x, lineStartPoint.y);
CGContextAddArc(context, lineStartPoint.x, lineStartPoint.y, 105, toAngle*M_PI,fromAngle*M_PI , 1);
CGContextMoveToPoint(context, toLinePoint.x, toLinePoint.y);
CGContextClip(context);

[[UIImage imageNamed:@"gradientfill.png"] drawInRect:[self bounds]];

CGMutablePathRef path = CGPathCreateMutable();
CGRect toHandleRect = CGRectMake(toLinePoint.x-5, toLinePoint.y-5, 10, 10);    
CGPathAddEllipseInRect(path, NULL, toHandleRect);
CGContextAddPath(context, path);
CGPathRelease(path);

// Restore the original state
CGContextRestoreGState(context); 
```

# javascript - 如何匹配一个贪婪量化的非'['字符字符串，其中不包含字符串'->'？

> ID：12550079
> 
> 赞同：1
> 
> 时间：2012-09-23T05:51:32.677
> 
> 标签：javascript, regex, greedy, negative-lookahead

[这](https://stackoverflow.com/questions/12437757/is-there-a-such-thing-as-negated-alternation-or-negated-string-classes-a-l/12437857)是一个起点，虽然我不认为它实际上涵盖了这个场景，或者如果它确实涵盖了这个场景，我会感到非常困惑，以至于我无法思考如何将它应用到我需要的东西上。我不知道是否使用`.`or`.....`然后我不确定如何实现贪婪、不精确的量化。

正则表达式让我头晕目眩……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:00:28.903

尝试这个：

```
((?!-&gt;)[^\]])+ 
```

该模式首先检查是否没有`"-&gt;"`（`(?!-&gt;)`部分），然后匹配除 a 以外的任何字符`"]"`。然后重复一次或多次。

您可能希望“锚定”您的模式以验证整个输入字符串：

```
^((?!-&gt;)[^\]])+$ 
```

# mongodb - 如何在 mongoose 中执行搜索，其中字段（这是一个数组）包含某些内容？

> ID：12550084
> 
> 赞同：1
> 
> 时间：2012-09-23T05:52:45.377
> 
> 标签：mongodb, find, mongoose

假设我`things`在具有此架构的数据库中：

```
{
    tags: [String]
} 
```

我有这样的`tags`数组：`["tag1", "tag2"]`
现在我需要搜索`things`并只获取那些包含我的标签的数组。

我在[这里](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-JavascriptExpressionsand%7B%7B%24where%7D%7D)`$where`搜索并找到了操作员，但这不是我需要的。 我想知道在 mongo中应该有类似的东西，或者在 mongoose 中应该有类似的东西。有任何想法吗？
`db.things.find( { $where: "this.tags.contains(<my tags somehow>)" } );`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T05:59:41.700

你想要`$all`。

[http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24all)

以下是来自 mongoose 的几个示例： [https ://github.com/LearnBoost/mongoose/blob/master/test/query.test.js#L396](https://github.com/LearnBoost/mongoose/blob/master/test/query.test.js#L396)

附带说明，`$where`通常不可扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-27T17:06:08.537

MongoDB 查询语法允许您匹配这样的元素数组：

```
.find( { tags: 'tag1' } ) 
```

而且，当然，它正在与 Mongoose 合作 :)

来源：[http ://docs.mongodb.org/manual/tutorial/query-documents/#match-an-array-element](http://docs.mongodb.org/manual/tutorial/query-documents/#match-an-array-element)

# jquery - jQuery for 循环不起作用

> ID：12550085
> 
> 赞同：0
> 
> 时间：2012-09-23T05:52:49.337
> 
> 标签：jquery, for-loop

我有一个不循环的 for 循环语句，这是我的代码：

```
$(document).ready(function(){
    for(var i=1;i<=30;i++){
        $('img[alt="sample'+i+'"]').click(function(){
            var changeImage = $('img[alt="sample'+i+'"]').attr('src');
            var changeText = $('img[alt="sample'+i+'"]').attr('alt');
            $('img[alt="main image"]').attr('src', changeImage);
            $('h4#imageTitleHead').text(changeText);
        });
    }
}); 
```

`i`不会循环，当我检查源代码时，代码仍然是一样的..像这样它`$('img[alt="sample'+i+'"]')`没有变成数字，根本没有循环..请帮助..提前谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:09:33.067

如果可以这样做，为什么要循环：

首先将任何类添加到图像中`alt`（`sample[NUMBER]`例如`loopImages`）：

```
<img src="image.png" alt="sample1" class="loopImages"> 
```

现在，代码：

```
$(document).ready(function(){
    $('img.loopImages').click(function(){
        var current = $(this);
        var changeImage = current.attr('src');
        var changeText = current.attr('alt');

        $('img[alt="main image"]').attr('src', changeImage);
        $('h4#imageTitleHead').text(changeText);
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:09:38.113

`i`在from 循环和回调函数之间是一个麻烦。只`i`提供了一个变量，在循环的最后一次迭代之后将是 31。但是 jQuery 提供了一种方便的方式来访问被点击的对象作为上下文对象（aka `this`）。

```
$(document).ready(function() {
  for (var i = 1; i <= 30; i++){
    $('img[alt="sample'+i+'"]').click(function() {
      var clickedObject = $(this); // wrap it in a jquery
      var changeImage = clickedObject.attr('src');
      var changeText = clickedObject.attr('alt');
      $('img[alt="main image"]').attr('src', changeImage);
      $('h4#imageTitleHead').text(changeText);
    });
  }
}); 
```

这应该够了吧 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T08:18:22.640

这可能可以通过一个相当简单的选择器来解决。

这是它的样子：

```
$('img[alt*="sample"]')... 
```

您也可以在 for 循环之外编写一次函数，而不是在每次循环运行时重新声明它。前任。：

```
function bindAllImages(image){
    // same code in here
}

$('img[alt*="sample"]').bind('click', bindAllImages(image); 
```

这里还有一个说明效果的 JSFiddle：http: [//jsfiddle.net/JYCLA/1/](http://jsfiddle.net/JYCLA/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T05:54:35.300

循环本身很好...... [http://jsfiddle.net/](http://jsfiddle.net/)

让我们看看还有什么问题...

等等，没关系，编辑

# c - 迭代插入二叉树

> ID：12550086
> 
> 赞同：2
> 
> 时间：2012-09-23T05:53:00.040
> 
> 标签：c, binary-tree

我在 StackOverflow 上遇到了一些线程，但没有一个能完全消除我的疑虑。

所以问题很简单。我需要迭代地将元素插入二叉树。这是我的代码。

```
BST newNode(int x)
{
    BSTNodePtr node = (BSTNodePtr) malloc(sizeof(struct TreeNode));
    node->Element = x;
    node->Left = NULL;
    node->Right = NULL;

    return node;

}

BST Insert(int x, BST T)
{
    BST temp_node = T;
    while( T != NULL)   {
        if (x < T->Element)
            T = T->Left;
        else if (x >= T->Element)
            T = T->Right;
    }

    T = newNode(x);

    return temp_node;

} 
```

但是，当我找到这棵树的高度时，我总是得到 0。高度代码是

```
int Height(BST T)
{
    if (T == NULL)
        return 0;

    return 1+(max(Height(T->Left), Height(T->Right)));
} 
```

当我递归地插入时，这工作得很好（使用具有完全相同签名的函数）

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:03:15.153

这里：

```
BST Insert(int x, BST T)
{
    BST temp_node = T;
    while( T != NULL)   {
        if (x < T->Element)
            T = T->Left;
        else if (x >= T->Element)
            T = T->Right;
    }

    T = newNode(x);

    return temp_node;

} 
```

您导航树，直到您点击`T == NULL`。然后创建一个节点并将指向它的指针分配给`T`. 然后返回原始值`T`。你根本不修改你的树。其中没有节点指向新创建的节点。`T`只是一个局部变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:12:11.050

不能这样解决问题。但是，此代码似乎有效。

```
BST Insert(int x, BST T)
    {
       BST temp=T;
       BST node=(BST)malloc(sizeof(struct TreeNode));
       node->Element=x;
       node->Left=NULL;
       node->Right=NULL;
       if (T==NULL)
       {
           T=node;
           return(T);
           //printf("%d\n",T->Element);
       }
       else
       {
           while(1)
           {
               if (temp->Element>=node->Element && temp->Left==NULL)
               {
                   temp->Left=node;
                   break;
               }
               else if (temp->Element>=node->Element && temp->Left!=NULL)
               {

                   temp=temp->Left;
               }
               else if (temp->Element<node->Element && temp->Right==NULL)
               {
                   temp->Right=node;
                   break;
               }
               else
               {
                   temp=temp->Right;
               }
           }   
                 return(T);
       }            
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-12T11:52:18.580

这是我对上述问题的实现：

```
bst* newNode(int x)
{
    bst* T = new bst;
    T->value = x;
    T->left_child = T->right_child = NULL;
    return T;
}

bst* bst_insert_iter(bst* T,int val)
{
    if (T == NULL)
        T = newNode(val);

    else
    {

    bst *temp_node = T;

    bool flag = true;

    while(flag)   
    {
        if (val <= temp_node->value)
        {
            if (temp_node->left_child == NULL)
            {
                temp_node->left_child=newNode(val);
                flag = false;
            }
            else
                temp_node = temp_node->left_child;
        }

        else
        {
            if (temp_node->right_child == NULL)
            {
                temp_node->right_child=newNode(val);
                flag = false;
            }
            else
                temp_node = temp_node->right_child;
        }
    }

    }
    return T;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T06:00:33.693

您的插入功能中有错误。我可以假设，最初你的树是空的。所以第一次插入节点时，第二个参数是NULL，对吧？然后这个函数总是返回 NULL 给你，因为你总是传递一个 NULL 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-17T08:18:12.207

```
template <class T>
class TreeNode{
private:
    T data;
    TreeNode<T>* right,*left;
public:
void setData(T d){
    this->data =d;
}
T getData(){
    return this->data;
}
void setRight(TreeNode<T>* r){
    this->right =r;
}
TreeNode<T>* getRight(){
    return this->right;
}
void setLeft(TreeNode<T>* r){
    this->left =r;
}
TreeNode<T>* getLeft(){
    return this->left;
}
static TreeNode<T>* newNode(T data){
    TreeNode<T>* n = new TreeNode<T>();
    n->setData(data);
    n->setRight(NULL);
    n->setLeft(NULL);
    return n;
}
};

template <class T>
class BinaryTree{
private:
        TreeNode<T>* root;
public:
    void insert(T data){
        TreeNode<T>* n = TreeNode<T>::newNode(data);

        if(root==NULL)
            root = n;
        else{
        TreeNode<T>* t = root;
        while(t!=NULL){

            if(n->getData() >= t->getData()){
                if(t->getRight()==NULL){
                    t->setRight(n); //newnode attached as right child in tree
                    t = NULL;
                }
                else
                    t = t->getRight();
            }
            else{
                if(t->getLeft()==NULL){
                    t->setLeft(n); //newnode attached as left child in tree
                    t=NULL;
                }
                else
                    t = t->getLeft();
            }
        }

        }

    }

    void preorder(){
        TreeNode<T>* t = root;
        preorderUtil(t);
    }

    void preorderUtil(TreeNode<T>* node){
        if(node==NULL)
            return;
        preorderUtil(node->getLeft());
        cout<<node->getData()<<" ";
        preorderUtil(node->getRight());
    }
}; 
```

**您的更改不会反映在树中**。我按照这种方式迭代插入数据，效果很好。关键是在二叉树中创建一个节点来指向新创建的节点，以便它附加到树上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-11T19:49:25.747

这是我的版本，它似乎正在工作。

```
struct tree{
tree *left;
tree *right;
int key;
};
void insertBst(int k,tree *t)
{
    tree *newK = new tree[sizeof(tree)];
    newK->key = k;
    newK->left = NULL;
    newK->right = NULL;
    if((t)->key == NULL)
    {
        t=newK;
        return;
    }
    else{
        bool found = false;
        tree *root = t;
        tree *parent = NULL;
        while(root != NULL)
        {
        parent = root;
            if(root->key < newK->key)
            {
                root=root->right;
            }
            else if(root->key > newK->key)
            {
                root=root->left;
            }
            else{
            //Here we have duplicates!! so do nothing
            root = root;
            }
        }
        if(parent->key > newK->key) parent->left = newK;
        else parent->right = newK;  
    }   

} 
```

# java - Eclipse自定义程序搭建链——添加源文件

> ID：12550092
> 
> 赞同：1
> 
> 时间：2012-09-23T05:54:20.337
> 
> 标签：java, android, eclipse, build-process

![来自 Eclipse 的屏幕截图](../Images/626efb8ecec8502d8cc989c3065f41b7.png)

我正在用 Java 开发一个相当大的 Android 软件（使用 Eclipse 和 ADT）。

为了支持我的开发，我制作了一个自己的命令行工具，它执行以下操作：

1.  加载和处理某些 Java 文件（来自我开发的软件的项目）
2.  **将新**的 Java 文件输出到某个文件夹（因此也保留输入文件）到我的项目中

命令行工具的作用无关紧要，它的输出仅仅是标准的Java 代码（即它是一个代码生成器）。

我希望在构建过程中自动调用这个命令行工具。换句话说，我希望当我完成手动编码并开始构建过程（例如通过单击“运行...”）时，会发生以下情况：

1.  命令行工具运行
2.  由命令行工具生成的文件**也包含在构建中**（即，它们的编译与在 Eclipse 项目中手动添加和编码时*完全*一样）。

我很确定我必须将此程序作为“程序”添加到项目的 Builder 列表中（参见随附的屏幕截图）。我的问题：

1.  放在什么位置？应该是第一个吗？
2.  为了满足上述要求，我还需要做什么？**恐怕**如果命令行工具只是将 .java 文件写入文件夹，Eclipse**将看不到**新生成的文件（因为它们没有添加到其项目文件中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:21:35.197

您走在正确的轨道上，并且在以下条件下可以正常工作：

*   您的构建器必须位于顶部，因此它可以在 Java 构建器运行之前修改源文件。
*   Your Java files must be generated into one of the existing "src" pathes of the project. Java files are not registered in the project, so if you put someting into a source folder of the project, it will be compiled. Eclipse tools like xtext and xtend work the same way.
*   The refresh option of your builder must be activated. Otherwise the workspace would not know that you created files (as your program works with java.io.File operations, thereby bypassing the workspace API for resources).

# javascript - 为 jQuery UI 拆分按钮制作下拉菜单

> ID：12550096
> 
> 赞同：1
> 
> 时间：2012-09-23T05:54:35.927
> 
> 标签：javascript, jquery, jquery-ui, drop-down-menu, split-button

我的项目 99% 的 UI 都适用于 jQuery UI。我需要，[SplitButton](http://javascript-array.com/scripts/jquery_simple_drop_down_menu)功能，但它没有下拉菜单。该演示似乎表明 Button 小部件可用于在此处创建下拉菜单。

我想知道，有没有办法用这个 Button 小部件创建简单的下拉菜单？我的意思类似于此处为自动完成提供的演示：http: [//jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)无法弄清楚如何完成这项工作。

请不要回答我使用 Twitter Bootstrap。因为它的按钮功能与jq-ui的按钮功能冲突，我无法解决这个冲突。

# java - 无法在 jTextField 中显示数据

> ID：12550098
> 
> 赞同：4
> 
> 时间：2012-09-23T05:54:40.880
> 
> 标签：java, swing, sockets, jtextfield, event-dispatch-thread

我正在编写套接字编程。它具有用于服务器和客户端的 GUI。在服务器 GUI 中有一个文本字段，显示用户请求的单词。但是我在显示这个词时遇到了问题。

我努力了

```
txtWord.setText(sentword); 
```

它没有在文本字段中显示单词。但是当我写这个

```
txtWord.setText(sentword);
JOptionPane.showMessageDialog(null, "the requesed word is: "+sentword); 
```

然后它在文本字段中显示该单词，并在消息框中显示它。

我试过 repaint() 但它不起作用。请尽快给我一些解决方案

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-23T06:23:30.840

正如`@Binyamin`Sharet 正确评论的那样，您[在 Swing 问题中遇到了并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)问题。

*   你`Swing GUI`不关心你在后台运行的漫长而艰巨的任务

*   甚至`JTextField#setText()`被声明为线程安全的，`Socket`默认情况下（ie）的输出从不通知[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

*   正确的方法可能是使用专门创建的[SwingWorker以在 Swing GUI 的背景下运行长而艰巨的任务，并在事件线程或 EDT 上输出到 GUI](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

*   甚至更简单的是`Runnable`在 a 中使用 a`Thread`但`Swing GUI`通过将其放置在 Runnable 中并使用`invokeLater()`

*   一个肮脏的技巧是像这样包装代码行：

```
txtWord.setText(sentword);
JOptionPane.showMessageDialog(null, "the requesed word is: "+sentword); 
```

into `invokeLater()`，但在这种情况下，您的 GUI 将无响应`Mouse`或`Keyboard`事件，直到`Socket`（在您的情况下）结束

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T06:34:18.617

**txtWord.requestFocus();** textField 直到窗口在 textField 上方并返回或获得焦点时才会显示，直到单击它。所以...只是请求焦点。

此外，如果您在创建时设置，请检查文本大小。如果大小不匹配，有时不会显示文本，例如：txtWord.setSize(200, 24);

# php - 试图将 MySQL 查询转换为 PHP 查询

> ID：12550100
> 
> 赞同：0
> 
> 时间：2012-09-23T05:54:50.903
> 
> 标签：php, mysql, syntax

我对 PHP 和 MySQL 还是有点陌生​​，我已经尝试了很多次，但我就是不知道怎么做。

我有一个查询，它在 PHPMyAdmin 中将我想要的结果作为一个直接的 MySQL 查询返回，但我试图让它在使用 PHP 的网页上生成，但我`$query`无法获得正确的语法。

这是有效的 MySQL 查询：

```
SELECT fk_toon_no, fk_actor_no, actor_no, actor FROM cartoon_characters, 
characters WHERE fk_toon_no=50 HAVING fk_actor_no=actor_no; 
```

更重要的是，我还希望有一个变量`$new_toon_id`作为`=`for`WHERE`语句，因此，类似于：（但只显示行，因为我最终会将其插入表格并知道如何做到这一点）

```
 WHERE fk_toon_no=$new_toon_id 
```

`fk_actor_no`是表的外键到字符表`cartoon_characters`中的主键`actor_no`。

我正在尝试获取它，以便我可以打印出与特定卡通相关的每个角色，使其看起来像

```
 (toon id)      (character id #)     (character name)
    ($fk_toon_no)  (actor_no)           (actor)   
    3               5                    Eisenhower
    3               9                    Nixon
    3               12                   Uncle Sam 
```

任何帮助将不胜感激。我想我已经包含了所有相关信息，但如果我忘记了什么，请询问。

我迫切需要帮助。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:33:38.940

```
$query=<<<HERE
SELECT fk_toon_no, fk_actor_no, actor_no, actor FROM cartoon_characters, 
characters WHERE fk_toon_no='50' HAVING fk_actor_no=actor_no;
HERE;
$send=mysql_qyery($query);
while($row = mysql_fetch_assoc($send))
{
echo $row["fk_toon_no"];
echo "<br />"
echo $row[fk_actor_no];

} 
```

这应该可以解决问题。

# java - 如何使用maven自动安装sigar二进制文件java路径

> ID：12550103
> 
> 赞同：1
> 
> 时间：2012-09-23T05:56:02.040
> 
> 标签：java, maven, sigar

我想知道是否有办法获得 sigar 编译的二进制文件，即。`libsigar-universal-macosx.dylib`等..使用Maven。我知道我可以手动添加它，但我希望自动部署

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:13:21.203

在 Maven 中有很多方法来安排你的构建

考虑以下选项：

*   快速而肮脏：使范围“系统”的依赖项将库放在预定义的位置并构建。[在此处](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)阅读有关系统范围的信息

*   更好的方法虽然需要更多的工作：使用您在 repo 1 中没有的第三方 jar 创建一个 maven 存储库。虽然您可以使用像 apache 这样的 http 服务器并提供对此类存储库的基于 http 的访问，但我建议您使用专门为此目的构建的代理。考虑为此使用[Nexus](http://www.sonatype.org/nexus/)或[Artifactory](http://www.jfrog.com/home)。然后在 maven 安装中配置这些存储库（所有 sigar jar 将由该存储库管理）并构建您的项目。

希望这可以帮助

# javascript - $(this) 在 ajax 的成功函数中不起作用

> ID：12550106
> 
> 赞同：3
> 
> 时间：2012-09-23T05:56:18.680
> 
> 标签：javascript, asp.net-mvc-3, jquery

我正在使用带有 Jquery 的 ASP.NET MVC，这似乎是一个 jquery 错误。

我正在对我的方法进行 ajax 调用，我的代码是

```
$('.reopenBtn').live('click', function () {
    var taskId = $(this).attr("data-taskid");

    $.ajax({
        url: '/Task/ReopenTask/?strTaskId=' + taskId,
        type: "POST",
        success: function (data) {
            // this does not work !!
            $(this).parent().parent().closest("div").remove();              
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert('Error');
        }
    });
}); 
```

[但是，在这里](http://jsfiddle.net/H5sDC/39/)为这个问题创建一个 jsfiddle 时，这`remove`不起作用。

那么，`$(this)`ajax 调用的成功函数内部有什么不同吗？

我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T05:59:49.513

`context`属性将在 ajax 的成功函数中工作`context: this,`

```
$('.reopenBtn').live('click', function () {
    var taskId = $(this).attr("data-taskid");
    var self = this;
    $.ajax({
        url: '/Task/ReopenTask/?strTaskId=' + taskId,
        type: "POST",
        success: function (data) {
            $(self).parent().parent().closest("div").remove();              
        },
        error: function (xhr, ajaxOptions, thrownError) {
            alert('Error');
        }
    });
}); 
```

或者您可以设置`context`ajax 选项的属性。

```
$('.reopenBtn').live('click', function () {
        var taskId = $(this).attr("data-taskid");
        $.ajax({
            url: '/Task/ReopenTask/?strTaskId=' + taskId,
            type: "POST",
            context: this,
            success: function (data) {
                $(this).parent().parent().closest("div").remove();              
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert('Error');
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:25:50.787

我更喜欢这种方法，用 $.proxy 包装，两个参数是回调函数和`this`第二个参数。

```
$.post('/foo', data, $.proxy(function(d){
  // do stuff with data
}, this)); 
```

我认为它是最短和最干净的。

您也可以执行其他人在上面所说的操作，复制`this`到`that`(`self`是保留字) 然后在回调中使用，或者使用带有`context: this`参数的 $.ajax。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T06:15:41.793

该方法的上下文与该`click`方法的上下文完全不同`success`。`this`因此，您在内部功能中没有相同的功能。您可以通过使用类似`$this`or的局部变量来避免这种情况，`clickedButton`并在您的`success`方法中使用它：

```
$('.reopenBtn').live('click', function () {
  var $this = $(this)
  var taskId = $this.attr("data-taskid");

  $.ajax({
    url: '/Task/ReopenTask/?strTaskId=' + taskId,
    type: "POST",
    success: function (data) {
        // $this is taken from the outer function context
        $this.parent().parent().closest("div").remove();              
    },
    error: function (xhr, ajaxOptions, thrownError) {
        alert('Error');
    }
  });
}); 
```

有关详细说明，您可能需要查看[JavaScript 中的闭包](http://jibbering.com/faq/notes/closures/)

# winforms - 无法在 form2 的按钮单击时访问 Form1

> ID：12550107
> 
> 赞同：1
> 
> 时间：2012-09-23T05:56:20.120
> 
> 标签：winforms, visual-c++

我的应用程序在 Windows 窗体应用程序 (vc++) 中有 2 个窗体。我的第一个表单是 Form1.h，第二个是 form2.h。我想要做的是点击 button1（在 Form1.h 上）调用 form2。为了从 Form1 调用 form2，我使用了这段代码

```
#include “Form1.h”
......
private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) {
                 form2^ fm=gcnew form2;
                 fm->Visible=true;
                 this->Visible=false;
             } 
```

这工作正常。但我无法通过单击按钮（在 form2 上）调用 Form1。一旦我在 form2.h 文件中包含 Form1.h，它就会给出以下错误：-

```
>d:\vs\testformapp\testformapp\Form1.h(81): error C2065: 'form2' : undeclared identifier
1>d:\vs\testformapp\testformapp\Form1.h(81): error C2065: 'fm' : undeclared identifier
1>d:\vs\testformapp\testformapp\Form1.h(81): error C2061: syntax error : identifier 'form2'
1>d:\vs\testformapp\testformapp\Form1.h(82): error C2065: 'fm' : undeclared identifier
1>d:\vs\testformapp\testformapp\Form1.h(82): error C2227: left of '->Visible' must point to class/struct/union/generic type 
```

我只想要 Form1->Visible=true; 在form2的按钮上单击。我不想在 form2 的按钮单击时初始化 Form1，因为它会初始化 form1 的所有参数，而我的应用程序要求不是这样。

谁能告诉我这个问题的任何解决方案。任何帮助将不胜感激。

# r - 在 R 中格式化数据

> ID：12550110
> 
> 赞同：1
> 
> 时间：2012-09-23T05:57:03.703
> 
> 标签：r, csv, import, file-io

假设我在 R 中导入一个 csv 文件来创建 R 数据集。现在这个文件有数字、字符、数据和百分比值。如何确保我导入的数据与原始文件中的数据格式相同。

在 SAS 中，我们通常有这种在导入时格式化数据的选项。这是示例

```
data test ;  
           infile "c:\mydocument\raw.csv" 
           delimiter = ',' MISSOVER DSD lrecl=32767
           firstobs=2 ;

           input 
              varA         
              varB         : $50.
              varC        : date9.
              varD      : Percent5.2
              varE      : $20.
;
run; 
```

R中是否有任何选项可以执行相同的操作？如果有人可以给我一些参考，那就太好了！

基于以下答案的示例：

```
Local<-read.csv("C:\\Users\\Raw.csv",colClasses = c("character","character","Date","character","character","character","character","character","character","character","numeric","numeric", "numeric","numeric"),row.names=1) 
```

我根据**Dason 的**示例使用了以下代码。但我收到以下错误。你能告诉我为什么会出现这个错误吗？你一直很有帮助。

```
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
  scan() expected 'a real', got '.' 
```

谢谢你。Rgds。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T06:03:36.437

read.csv 的 colClasses 参数是您想要的。来自`?read.csv`：

```
colClasses: character.  A vector of classes to be assumed for the
          columns.  Recycled as necessary, or if the character vector
          is named, unspecified values are taken to be ‘NA’.

          Possible values are ‘NA’ (the default, when ‘type.convert’ is
          used), ‘"NULL"’ (when the column is skipped), one of the
          atomic vector classes (logical, integer, numeric, complex,
          character, raw), or ‘"factor"’, ‘"Date"’ or ‘"POSIXct"’.
          Otherwise there needs to be an ‘as’ method (from package
          ‘methods’) for conversion from ‘"character"’ to the specified
          formal class.

          Note that ‘colClasses’ is specified per column (not per
          variable) and so includes the column of row names (if any). 
```

一些示例使用

```
dat <- data.frame(num = 1:4, ch = letters[1:4])
write.csv(dat, file = "test.csv")
read.csv("test.csv", 
          colClasses = c(NA, "numeric", "character"),
          row.names = 1)
#  num ch
#1   1  a
#2   2  b
#3   3  c
#4   4  d
out <- read.csv("test.csv", 
                 colClasses = c(NA, "numeric", "character"),
                 row.names = 1)
str(out)
#'data.frame':  4 obs. of  2 variables:
# $ num: num  1 2 3 4
# $ ch : chr  "a" "b" "c" "d" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T11:04:00.227

In regard to your second error message, what is probably happening is that `.` is used as a special character, probably meant to show where there where NA's in the dataset. You can use the `na.strings` argument to tell `read.csv` which strings are considered NA.

# c - 结果不一致（C）？

> ID：12550115
> 
> 赞同：3
> 
> 时间：2012-09-23T05:58:42.693
> 
> 标签：c, math, formula

在这个程序中，我编写了几个公式，但对于一个公式，我得到的结果不一致，尽管每次运行的代码和输入都相同。有问题的函数是“WqFormula”。在某些运行中，我得到正确的结果，即 0.041667，而在其他运行中，我得到 0.000000。我正在使用 GCC 4.6.3 在 Ubuntu（64 位）上编译。另一件事是我尝试使用 GCC 4.4.6 在 PC 上编译和运行它，它为每个公式提供了完全不同的结果。继承人的代码：

```
float PoFormula(float, float, int);
float LFormula(float, float, int);
float WFormula(float, float, int);
float LqFormula(float, float, int);
float WqFormula(float, float, int);

int main() 
{
    int n, m; //# of arrivals, # of service channels
    float mu, lambda; //avg serviced, arrivals in time period
    printf("lambda (l) = ");
    scanf ("%f", &lambda);
    printf("mu (m) = ");
    scanf ("%f", &mu);
    printf("m (M) = ");
    scanf("%i", &m);
    float test, test2, test3, test4, test5;
    test = PoFormula(lambda, mu, m);
    printf("PoFormula is %f\n", test);
    test2 = LFormula(lambda, mu, m);
    printf("LFormula is %f\n", test2);
    test3 = WFormula(lambda, mu, m);
    printf("WFormula is %f\n", test3);
    test4 = LqFormula(lambda, mu, m);
    printf("LqFormula is %f\n", test4);
    test5 = WqFormula(lambda, mu, m);
    printf("WqFormula is %f\n", test5);
    return;
}

float PoFormula(float lambda, float mu, int m)
{
    float summation, factorial = 1;
    int i, j;
    for (i=0; i < (m); i++)
    {
        for (j=1; j < (i+1); j++) factorial *= j;
        factorial = 1 / factorial;
        factorial = factorial * pow ((lambda/mu), i);
        summation += factorial;
    }
    factorial = 1;
    for (j=1; j < (m+1); j++) factorial *= j;
    factorial = 1 / factorial;
    factorial = factorial * pow ((lambda/mu), m);
    factorial = factorial * ((m*mu)/((m*mu) - lambda));
    factorial += summation;
    factorial = 1 / factorial;
    return factorial;
}

float LFormula(float lambda, float mu, int m)
{
    float factorial = 1, po;
    int j;
    po = PoFormula(lambda, mu, m);
    for (j=1; j < (m); j++) factorial *= j;
    factorial *= pow(((m*mu) - lambda), 2);
    factorial = (((lambda*mu)*(pow((lambda/mu),m)))/factorial) * po;
    factorial += (lambda/mu);
    return factorial;
}

float WFormula(float lambda, float mu, int m)
{
    float factorial = LFormula(lambda, mu, m);
    factorial /= lambda;
    return factorial;
}

float LqFormula(float lambda, float mu, int m)
{
    float factorial = LFormula(lambda, mu, m);
    factorial -= (lambda/mu);
    return factorial;
}

float WqFormula(float lambda, float mu, int m)
{
    float factorial = LqFormula(lambda, mu, m);
    factorial /= lambda;
    return factorial;
} 
```

每次应该打印的是这样的：

PoFormula 是 0.500000

L公式为 0.750000

W公式为 0.375000

Lq公式为 0.083333

WqFormula 是 0.041667

如果需要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T08:06:27.427

以下函数`summation`在未初始化的情况下使用：

```
float PoFormula(float lambda, float mu, int m)
{
  float summation, factorial = 1;
  for (i=0; i < (m); i++)
  {
    // ....
    summation += factorial;
  } 
```

所以你不能指望这个函数的任何结果都是有意义的。

你的编译器可以警告你这样的问题，如果你要求它（你真的应该！）：

对于 GCC，使用[`-Wall -Wextra`](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)（我个人也使用`-pedantic`, YMMV）编译以获得尽可能多的警告。但是，在这种特殊情况下，GCC 似乎对问题视而不见，直到您[使用](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)`-O`.

您现在可以停止阅读，只需`-Wall -Wextra -O`在编译时使用即可捕获此问题。

* * *

GCC 的未初始化变量分析有两种不同的检查——“*肯定*使用未初始化”和“*可能*使用未初始化”。根据是否启用优化，分析的工作方式会有所不同：

*   如果优化关闭（`-O0`默认），编译器会在一个分析过程中执行两个检查。
*   如果优化是开启的，编译器会执行两遍——第一遍只执行“绝对未初始化”检查，第二遍在优化之后发生（因为优化可能会改变控制流）并执行两个检查。

我对 GCC 内部结构不够熟悉，无法了解在您的代码中隐藏这个问题会发生什么，但如果有人想更深入地挖掘，我将其简化为[这个测试用例。](https://gist.github.com/3769253)如果展开循环，即使没有`-O`，也会收到警告，因此循环展开优化可能与它有关。

* * *

如果您使用 MSVC，请编译[`/W4`](http://msdn.microsoft.com/en-us/library/thxezb7y.aspx)以获取最多的警告。MSVC 将此未初始化的变量报告为默认警告级别的问题，无论是否进行优化。

# flash - swf 文件在发布后无法播放

> ID：12550118
> 
> 赞同：1
> 
> 时间：2012-09-23T05:59:54.453
> 
> 标签：flash, smartfoxserver

我正在尝试运行与 smartfoxserver2x 下载捆绑在一起的“连接器”示例。它连接到服务器并加载正确的配置文件。当我在 adobe flash 专业版 5 中运行它时，它运行正确并连接到服务器，但在作为 SWF 电影发布后，它不起作用。它加载配置文件但无法连接并给出错误连接失败..错误 2048

这是我正在谈论的例子。 [http://docs2x.smartfoxserver.com/ExamplesFlash/connector](http://docs2x.smartfoxserver.com/ExamplesFlash/connector)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T14:06:47.970

2048 is a Security error. You probably just need to place your SWF in a trusted location. You can do that through the Flash Global Settings in the right-click menu, or via this web form: [http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)

It's usually best to create a folder containing all of your Flash projects and just give that directory permission, so you don't have to think about it again.

# c++ - stringstream 不将整数转换为字符串

> ID：12550121
> 
> 赞同：0
> 
> 时间：2012-09-23T06:00:32.813
> 
> 标签：c++, ios, macos, casting, stringstream

我刚刚搬到一个新的开发环境，并注意到我的 Mac 版本不能再`std::stringstream`像以前那样将整数转换为字符串。我的 iOS 版本很好，但我的 Mac 版本不行，我不知道为什么。

我有这个代码：

```
int test_value = 4;
std::stringstream val;
val << "foo" << test_value << "bar";
std::cout << "test: " << val.str() << std::endl; 
```

在 iOS 上，我得到正确的输出：

> foo4bar

但在 Mac 上，一旦达到整数，它就会失败：

> 富

如果我先将整数转换为字符串，那么它可以正常工作：

```
int test_value = 4;
std::stringstream val;
val << "foo" << intToStr(test_value) << "bar";
std::cout << "test: " << val.str() << std::endl; 
```

有人有什么想法吗？

谢谢

# c - 缓冲区溢出示例不适用于 Debian 2.6

> ID：12550123
> 
> 赞同：1
> 
> 时间：2012-09-23T06:00:37.433
> 
> 标签：c, security, buffer-overflow, stack-smash

我正在尝试制作缓冲区利用示例（来自[http://insecure.org/stf/smashstack.html的 example3.c](http://insecure.org/stf/smashstack.html)) 在 Debian Lenny 2.6 版本上工作。我知道 gcc 版本和操作系统版本与 Aleph One 使用的版本不同。我使用 -fno-stack-protector 和 sysctl -w kernel.randomize_va_space=0 参数禁用了任何堆栈保护机制。为了解释我的设置和 Aleph One 的差异，我引入了两个参数：offset1 -> 从 buffer1 变量到返回地址的偏移量和 offset2 -> 要跳转多少字节以跳过语句。我试图通过分析汇编代码找出这些参数，但没有成功。因此，我编写了一个 shell 脚本，它基本上运行缓冲区溢出程序，同时具有来自 (1-60) 的 offset1 和 offset2 值。但令我惊讶的是，我仍然无法打破这个程序。如果有人可以指导我，那就太好了。我附上了代码和汇编输出以供考虑。对不起，很长的帖子：）

谢谢。

* * *

```
// Modified example3.c from Aleph One paper - Smashing the stack
void function(int a, int b, int c, int offset1, int offset2) {
   char buffer1[5];
   char buffer2[10];
   int *ret;

   ret = (int *)buffer1 + offset1;// how far is return address from buffer ?
   (*ret) += offset2; // modify the value of return address
}

int main(int argc, char* argv[]) {
  int x;
  x = 0;
  int offset1 = atoi(argv[1]);
  int offset2 = atoi(argv[2]);
  function(1,2,3, offset1, offset2);
  x = 1; // Goal is to skip this statement using buffer overflow
  printf("X : %d\n",x);
  return 0;
}

-----------------
// Execute the buffer overflow program with varying offsets
#!/bin/bash
for ((i=1; i<=60; i++))
do
   for ((j=1; j<=60; j++))
   do
    echo "`./test $i $j`"
   done
done

-- Assembler output
(gdb) disassemble main
Dump of assembler code for function main:
0x080483c2 <main+0>:    lea    0x4(%esp),%ecx
0x080483c6 <main+4>:    and    $0xfffffff0,%esp
0x080483c9 <main+7>:    pushl  -0x4(%ecx)
0x080483cc <main+10>:   push   %ebp
0x080483cd <main+11>:   mov    %esp,%ebp
0x080483cf <main+13>:   push   %ecx
0x080483d0 <main+14>:   sub    $0x24,%esp
0x080483d3 <main+17>:   movl   $0x0,-0x8(%ebp)
0x080483da <main+24>:   movl   $0x3,0x8(%esp)
0x080483e2 <main+32>:   movl   $0x2,0x4(%esp)
0x080483ea <main+40>:   movl   $0x1,(%esp)
0x080483f1 <main+47>:   call   0x80483a4 <function>
0x080483f6 <main+52>:   movl   $0x1,-0x8(%ebp)
0x080483fd <main+59>:   mov    -0x8(%ebp),%eax
0x08048400 <main+62>:   mov    %eax,0x4(%esp)
0x08048404 <main+66>:   movl   $0x80484e0,(%esp)
0x0804840b <main+73>:   call   0x80482d8 <printf@plt>
0x08048410 <main+78>:   mov    $0x0,%eax
0x08048415 <main+83>:   add    $0x24,%esp
0x08048418 <main+86>:   pop    %ecx
0x08048419 <main+87>:   pop    %ebp
0x0804841a <main+88>:   lea    -0x4(%ecx),%esp
0x0804841d <main+91>:   ret    
End of assembler dump.

(gdb) disassemble function
Dump of assembler code for function function:
0x080483a4 <function+0>:    push   %ebp
0x080483a5 <function+1>:    mov    %esp,%ebp
0x080483a7 <function+3>:    sub    $0x20,%esp
0x080483aa <function+6>:    lea    -0x9(%ebp),%eax
0x080483ad <function+9>:    add    $0x30,%eax
0x080483b0 <function+12>:   mov    %eax,-0x4(%ebp)
0x080483b3 <function+15>:   mov    -0x4(%ebp),%eax
0x080483b6 <function+18>:   mov    (%eax),%eax
0x080483b8 <function+20>:   lea    0x7(%eax),%edx
0x080483bb <function+23>:   mov    -0x4(%ebp),%eax
0x080483be <function+26>:   mov    %edx,(%eax)
0x080483c0 <function+28>:   leave  
0x080483c1 <function+29>:   ret    
End of assembler dump. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:11:49.520

与您的 C 代码相反，您提供的反汇编`function`似乎使用了`offset1`and的硬编码值。`offset2`

的地址`ret`应该使用 byte/char offsets: 来计算`ret = (int *)(buffer1 + offset1)`，否则你会受到[指针数学](https://stackoverflow.com/a/5605772/1233508)的影响（特别是在这种情况下，当你`buffer1`与返回地址的偏移量不是很好的对齐时）。

`offset1`应该等于`0x9 + 0x4`（在`lea`+ 4 字节中使用的偏移量`push %ebp`）。但是，每次编译时这可能会发生不可预测的变化 - 堆栈布局可能不同，编译器可能会创建一些额外的堆栈对齐等。

`offset2`应该等于`7`（您要跳过的指令的长度）。

* * *

请注意，您在这里有点幸运 -`function`使用`cdecl`调用约定，这意味着调用者负责在从函数返回后从堆栈中删除参数，通常如下所示：

```
push arg3
push arg2
push arg1
call func
add esp, 0Ch ; remove as many bytes as were used by the pushed arguments 
```

您的编译器选择将此更正与 after 组合`printf`，但它也可能决定在您的函数调用之后执行此操作。在这种情况下，`add esp, <number>`指令将出现在您的返回地址和您要跳过的指令之间——您可能会想象这不会很好地结束。

# c - 我的单链表代码有什么问题？

> ID：12550125
> 
> 赞同：0
> 
> 时间：2012-09-23T06:01:07.137
> 
> 标签：c, pointers, linked-list

我正在用 C 编写一个单链表。这是我到目前为止所写的。

```
C program
#include<stdio.h>
#include<stdlib.h>

struct Node{
    int value;
    struct Node *next; 
};

struct Node* init()
{
   struct Node* head=NULL;
   head=malloc(sizeof(struct Node));
    head->value=-1;
    return head;

}

int length(struct Node* head)
{
    struct Node* current=head;
    int length=0;
    while(current!=NULL)
    {
        length++;
        current=current->next;

    }
    return length;

}

void print(struct Node* head)
{
   int i=0;
   int len=length(head);
   for(i=0;i<len;i++)
   {
    printf("%d%d",i,head[i].value);
    printf("\n");

   }

}

 struct Node* insert(int data,struct Node* head)
 {
    struct Node* current=NULL;
    if(length(head) > 0)
    {
        int val=head->value;        
        if (val==-1)
        {
            head->value=data;
            head->next=NULL;

        }
        else
        {
           current=malloc(sizeof(struct Node));
           current->value=data;
           current->next=head;
           head=current;

      }

  }
   else
  {
    printf("List is empty");

  }

  return head;

}

int main() 
{

/* printf("Hello"); */
struct Node *head=init();

head=insert(20,head);
head=insert(30,head);
head=insert(40,head);

print(head);
printf("%d",length(head)); 

return 0; 
```

}

我得到的输出值为： Index Value 0 40 1 0 2 0

长度为 3。我无法理解我在指针操作中做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T06:07:09.907

一个明显的问题是在初始化时没有在 NULL 旁边设置 - 在检查空列表的长度时会失败

但你真正的问题是打印功能

你不能使用：

```
head[i].value 
```

该符号仅对数组有效，您需要使用 next 来查找每个成员

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:13:00.210

Init 函数应将 Next 设置为 NULL

```
struct Node* init()
{
   struct Node* head=NULL;
   head=malloc(sizeof(struct Node));
    head->value=-1;
    head->next=NULL;
    return head;

} 
```

否则第一次调用 length 返回一个未定义的结果（或 GPF ）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T06:21:28.560

这里：

```
 for (i = 0; i < len; i++)
    {
        printf("%d%d", i, head[i].value);
        printf("\n");
    } 
```

您需要从一个节点前进到另一个节点，`head = head->next`方式与在`length()`. `head[i]`不会的。

目前还不清楚为什么你的`init()`和`insert()`如此不必要的复杂，我什至不想猜测为什么。我想提出一个更好的`insert()`建议`init()`：

```
struct Node* insert(int data, struct Node* head)
{
    struct Node* current;

    current = malloc(sizeof(struct Node));
    current->value = data;
    current->next = head;

    return current;
} 
```

然后你这样做：

```
int main(void)
{
    struct Node *head = NULL;

    head = insert(20, head);
    head = insert(30, head);
    head = insert(40, head);

    print(head);
    printf("%d", length(head));

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T07:45:36.267

该表示法`head[i].value`仅对数组有效，对链表无效。数组和链表完全不同，向数组分配内存是有预谋的，而链表是动态的。这就是为什么我们对链表使用指针的原因。

在`init()`您第一次调用时，您没有分配 null ，这会导致循环无限次运行`length()`。

我发布了打印功能的修改代码：

```
void print(struct Node* head)
{
    int i=0;
    int len=0;
    struct Node* current=head;
    for(i=0;i<len;i++)
    {
        printf("%d %d",i,current->value);
        print("\n");
        current=current->next;
    }
} 
```

# wordpress - api 密钥未显示在我的帐户 wordpress 中

> ID：12550126
> 
> 赞同：0
> 
> 时间：2012-09-23T06:01:13.687
> 
> 标签：wordpress, api, api-key

我正在建立一个新的自托管 wordpress 网站，并想安装统计插件。我需要获取 API 密钥，但是当我去编辑我的个人资料时，API 密钥不在这里。然后我尝试从仪表板 > 用户 > 所有用户 > 管理员 .. 仍然没有 API 密钥。

*   我只有
*   个人选项
*   姓名
*   联系方式
*   关于你自己
*   然后是“更新个人资料”按钮

我的自托管网站在这里：http: [//kimchistory.co.cc/](http://kimchistory.co.cc/)

截图在这里：http: [//i45.tinypic.com/e1alw9.png](http://i45.tinypic.com/e1alw9.png)

![在此处输入图像描述](../Images/773027ad270da3ce1e90ae7169ec6bf2.png)

如果有人知道如何获取 API 密钥，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:36:17.450

自托管 WordPress 网站没有 API 密钥。该插件要求您提供 WordPress.com API 密钥。

更多信息在这里：[http ://en.wordpress.com/api-keys/](http://en.wordpress.com/api-keys/)

> ### 我如何得到一个？
> 
> 对于 Akismet 用户：您可以[在此处获取 API 密钥](http://akismet.com/get/)。
> 
> 对于所有其他服务：当您[注册 WordPress.com 帐户时](http://wordpress.com/signup/)，我们将通过电子邮件向您发送 API 密钥。如果您已经拥有 WordPress.com 帐户，您的 API 密钥会列在您的个人资料页面上，您可以在登录后单击左上角的“我的帐户”链接访问该页面。
> 
> ### 我的 API 密钥在哪里？
> 
> 它将在您的欢迎电子邮件中。为确保您收到电子邮件，请避免使用 Hotmail 和 MSN 等免费服务，并检查您的垃圾邮件过滤器（如果它在几分钟内未显示）。（另外，考虑将 *@wordpress.com 列入白名单。）

# vb.net - VB.net txt 转 csv

> ID：12550128
> 
> 赞同：-3
> 
> 时间：2012-09-23T06:01:53.083
> 
> 标签：vb.net

我是 vb.net 的新手，我想将 txt 文件转换为 csv。我有这样的txt文件：

> ```
> Name
> A
> Class
> 10
> Roll No
> 123
> Name
> B
> Class
> 9
> Roll No
> 23
> Name
> C
> Class
> 7
> Roll No
> 3 
> ```

如何像这样在csv文件中导出

```
A,10,123
B,9,23
c,7,3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:08:05.337

尝试这个

```
SearchString = Replace(SearchString, Chr(13), ",") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:28:45.483

您的数据结构不完善。如果是 XML 就好了。试试这个代码

```
static void Main(string[] args)
{
  StreamReader reader = new StreamReader(filename);
  StringBuilder csv = new StringBuilder();
  using (reader)
  {
    string line = "";
    while (!reader.EndOfStream)
    {
        reader.ReadLine();  //Skip the name line
        string name = reader.ReadLine();
        reader.ReadLine();  //Skip the class line
        string cls = reader.ReadLine();
        reader.ReadLine();  //skip the rollup line
        string rollno = reader.ReadLine();

        csv.AppendLine(String.Join(",", new string[] { name, cls, rollno }));
    }
  }
  Console.WriteLine(csv.ToString());

  Console.ReadLine();
} 
```

输出

```
A,10,123
B,9,23
C,7,3 
```

# ios - 我应该为我的应用程序的每种本地化语言添加一个新的应用程序内购买产品吗？

> ID：12550130
> 
> 赞同：0
> 
> 时间：2012-09-23T06:02:30.603
> 
> 标签：ios, localization, product, in-app-purchase

我选择英语作为我的 IAP 应用程序的默认语言，并为其添加了一些应用内购买产品。

然后我为我的这个 IAP 应用程序添加了一个新的本地化（中文）。

我应该为我的每个英语 IAP 产品单独添加一个新的应用内购买产品吗？即我需要再次添加我已经存在的英文应用内购买产品的中文版本吗？

或者我可以只使用现有的英文 In-App-Purchase 产品（用于我的中文版 IAP 产品）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:25:21.760

对于 iOS 应用，您应该只为应用内购买输入不同的本地化（易于在 iTunes 上输入），而不是创建不同的应用内购买。

我有使用应用内购买的应用，有超过 5 种语言版本。

# javascript - 如何使用 HTML5 和 Javascript 流式传输视频

> ID：12550131
> 
> 赞同：2
> 
> 时间：2012-09-23T06:02:39.373
> 
> 标签：javascript, html5-video

我想创建一个网站，通过网络流式传输实时媒体，并包含一个内置于 HMTL5 的网络播放器。我已经阅读了有关 Microsoft 的媒体流媒体平台和 Microsoft 的流媒体 SWf 的信息，但所有这些都过头了。有没有一种真正的流媒体视频方式，而不使用像 Flash 这样的任何插件，而是使用简单的 HTML5 和 JS。我以前在这里问过这个问题很多次，但每次都没有回答。请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:07:33.933

你可以试试[http://www.videojs.com/](http://www.videojs.com/)很容易实现。

# java - Java中的静态块与初始化块？

> ID：12550135
> 
> 赞同：86
> 
> 时间：2012-09-23T06:04:32.770
> 
> 标签：java, static-block, initialization-block

> **可能重复：**
> [静态初始化块](https://stackoverflow.com/questions/2420389/static-initialization-blocks)

考虑以下*代码*：

```
public class Test {
    {
        System.out.println("Empty block");
    }
    static {
        System.out.println("Static block");
    }
    public static void main(String[] args) {
        Test t = new Test();
    }
} 
```

我们知道首先会执行*静态块，然后是**空*块。但问题是我一直无法理解*空*块的真正用途。任何人都可以举一个真实的例子，其中 -

*   *静态*块和*空*块都在使用
*   *静态*块和*空*块都有不同的实用程序

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-09-23T06:08:27.667

它们有两个非常不同的目的：

*   静态初始化块将在加载类时调用，并且无法访问实例变量或方法。根据@Prahalad Deshpande 的评论，它通常用于创建静态变量。
*   另一方面，非静态初始化块仅在对象构造时创建，可以访问实例变量和方法，并且（根据@EJP 建议的重要更正）将在构造函数的开头调用，之后超级构造函数已被调用（显式或隐式）并且*在*调用任何其他后续构造函数代码之前。我已经看到当一个类有多个构造函数并且需要为所有构造函数调用相同的初始化代码时使用它。与构造函数一样，您应该避免在此块中调用非最终方法。

请注意，此问题已在 stackoverflow 中多次回答，您最好搜索和查看类似问题及其答案。例如：[静态初始化块](https://stackoverflow.com/questions/2420389/static-initialization-blocks)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-23T06:09:41.500

每当您的类加载时，都会执行静态块。每当您实例化您的类时，都会执行空块。尝试比较这些：

**1.**

```
public static void main(String[] args) {
    Test t = new Test();
} 
```

**2.**

```
public static void main(String[] args) {

} 
```

* * *

输出：

**1.**

> 静态块
> 空块

**2.**

> 静态块

用通俗的话来说，静态块只会被调用**一次**，不管你创建了多少该类型的对象。

# c# - 为什么服务器验证在我的代码中不起作用？

> ID：12550140
> 
> 赞同：0
> 
> 时间：2012-09-23T06:07:09.807
> 
> 标签：c#, asp.net, form-submit

下面是我的简单页面的提交按钮单击的代码。我正在提交一个空表单，但没有显示服务器验证错误消息。我的代码有什么问题？当我点击提交时，页面只是变成空白，没有任何反应。我也无法附加调试器。

当我构建我的网站项目时，它也没有显示任何编译错误。我不知道我做错了什么。

```
 protected void btnSubmit_Click(object sender, EventArgs e)
        {
            // Need to Validate All Required Fields before redirecting to frmPersonalVerified.aspx
            bool blnFormIsValid = true;
            DateTime dtEndDate;
            DateTime dtStartDate;

            // Get Date because we have a value.
            dtEndDate = DateTime.Parse(txtEndDate.Text);

            // Get Date because we have a value.
            dtStartDate = DateTime.Parse(txtStartDate.Text);

            if (txtFirstName.Text.Trim() == "")
            {
                txtFirstName.BackColor = System.Drawing.Color.Yellow;
                lblError.Text = "Please enter first name.";
                blnFormIsValid = false;
            }
            else
            {
                lblError.Text = "";
                txtFirstName.BackColor = System.Drawing.Color.White;
                blnFormIsValid = true;
            }

            if (txtLastName.Text.Trim() == "")
            {
                txtLastName.BackColor = System.Drawing.Color.Yellow;
                lblError.Text = "Please enter last name.";
                blnFormIsValid = false;
            }
            else
            {
                lblError.Text = "";
                txtLastName.BackColor = System.Drawing.Color.White;
                blnFormIsValid = true;
            }
            if (txtPayRate.Text.Trim() == "")
            {
                txtPayRate.BackColor = System.Drawing.Color.Yellow;
                lblError.Text = "Please enter pay rate.";
                blnFormIsValid = false;
            }
            else
            {
                lblError.Text = "";
                txtPayRate.BackColor = System.Drawing.Color.White;
                blnFormIsValid = true;
            }
            if (txtStartDate.Text.Trim() == "")
            {
                txtStartDate.BackColor = System.Drawing.Color.Yellow;
                lblError.Text = "Please enter start date.";
                blnFormIsValid = false;
            }
            else
            {
                lblError.Text = "";
                txtStartDate.BackColor = System.Drawing.Color.White;
                blnFormIsValid = true;
            }
            if (txtEndDate.Text.Trim() == "")
            {
                txtEndDate.BackColor = System.Drawing.Color.Yellow;
                lblError.Text = "Please enter end date.";
                blnFormIsValid = false;
            }
            else
            {
                lblError.Text = "";
                txtEndDate.BackColor = System.Drawing.Color.White;
                blnFormIsValid = true;
            }

            // Compare Dates
            if (DateTime.Compare(dtStartDate, dtEndDate) >= 0)
            {
                txtStartDate.BackColor = System.Drawing.Color.Yellow;
                txtEndDate.BackColor = System.Drawing.Color.Yellow;
                lblError.Text = "Please make sure that start date is less than end date.";
                blnFormIsValid = false;
            }

            else
            {
                lblError.Text = "";
                txtStartDate.BackColor = System.Drawing.Color.White;
                txtEndDate.BackColor = System.Drawing.Color.White;
                blnFormIsValid = true;
            }

            if (blnFormIsValid == true)
            {
                //Assign a value to the session variable. 
                Session["FirstName"] = txtFirstName.Text;
                Session["LastName"] = txtLastName.Text;
                Session["PayRate"] = txtPayRate.Text;
                Session["StartDate"] = txtStartDate.Text;
                Session["EndDate"] = txtEndDate.Text;

                // Sends A Request from the Browser to the server.
                Response.Redirect("frmPersonalVerified.aspx");
            }
        } 
```

## 更新

我刚刚使用了 .Equals("")... 它不起作用。仍然显示空白页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:16:48.063

忽略正确方法是使用 ASP.NET 的内置验证工具这一事实，问题在于您的程序逻辑已损坏。

您`blnFormIsValid`用于存储表单的有效性，但是它的值没有意义，因为您在分配它时没有注意以前的状态。

如果我使用这些值提交您的页面表单...

```
txtFirstName = "" // this is invalid
txtLastName = "foo" // this is valid 
```

...那么它将正确地使第一次验证失败并且`blnFormIsValid`将是错误的，但是您的下一次检查会忽略状态`blnFormIsValid`并将其设置为`true`仅仅是因为 txtLastName 的值是有效的。

这个问题不是源于我们对 ASP.NET 缺乏了解或知识，而是基本的编程和逻辑。对代码进行简单的逐步调试或试运行就可以揭示这一点。

以下是我的推荐清单：

### 使用 ASP.NET 验证控件，如下所示：

```
<input type="text" id="firstName" runat="server" />
<asp:RequiredValidator runat="server" controlToValidate="firstName" />

void Page_Load() {
    if( Page.IsPostBack) {
        Page.Validate();
        if( Page.IsValid ) {
            // that's all you have to do
        }
    } 
```

### 不要使用匈牙利符号

这是当您在标识符前加上一个标识其类型的标签，例如“blnFormIsValid”或“txtFirstName”。只需使用“formIsValid”或“firstName”。匈牙利符号仅在编辑器不提供输入信息的环境中使用。

### 不要使用`foo == true`

...因为该操作将评估为与 相同的值`foo`。在您的情况下，您应该使用`if( formIsValid )`而不是`if( formIsValid == true )`. 避免不必要地使用`==`运算符有助于避免意外使用`=`赋值运算符而不是`==`相等运算符的情况（并使您的代码更具可读性）。

# jquery - 使用 css 和 jquery 创建圆形文本

> ID：12550141
> 
> 赞同：2
> 
> 时间：2012-09-23T06:07:29.743
> 
> 标签：jquery, css

我想用 JQuery 或 CSS 创建一个循环文本我该怎么做我的目标是这样的![在此处输入图像描述](../Images/1a09fb0ea057f4b393398d1aa2c38ab7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T17:46:04.377

你可以试试[circletype.js](http://circletype.labwire.ca/)。它重量轻，在流体布局中效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T07:45:25.710

我喜欢 Dai 提供的链接，但如果您想要一个更深入地了解其工作原理的教程，请查看：[http ://css-tricks.com/set-text-on-a -圆圈/](http://css-tricks.com/set-text-on-a-circle/)

这是相关的 Codepen 链接：[http ://codepen.io/chriscoyier/pen/arboK](http://codepen.io/chriscoyier/pen/arboK)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-23T06:11:23.747

CSS3 不支持路径上的“变形”文本，这样每个字符的形状都会被修改（如您的示例中所示），但您仍然可以执行常规路径上的文本。

你不需要任何 jQuery，静态 CSS3 就足够了。在此处使用此站点：http: [//csswarp.eleqtriq.com/](http://csswarp.eleqtriq.com/)

# model-view-controller - Zend Framework 2：修改控制器中 layout.pthml 的细节

> ID：12550144
> 
> 赞同：6
> 
> 时间：2012-09-23T06:08:04.730
> 
> 标签：model-view-controller, layout, zend-framework2

当我研究的骨架应用程序时`Zend Framework 2`，我想在页面的右上角添加一个标签来显示`UserName`谁已经登录。但是，我对定义的导航栏的代码感到困惑，`layout.pthml`控制器如何与`layout.phtml`修改它？

提前致谢！

此外，当用户未使用助手登录时，我想要页面右上角的登录表单。但我不知道如何使用助手添加表单，我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T14:18:22.537

在控制器中，您可以使用名为“Layout”的控制器插件来设置变量：

```
$this->layout()->username = “some value”; 
```

然后在 layout.phtml 你应该能够做到：

```
<?php echo $this->username; ?> 
```

如果您看一下，`Zend\Mvc\Controller\Plugin\Layout`您会发现`__invoke`不带参数的方法将返回 的实例`ViewModel`，因此这是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:16:39.283

如果要在模块范围内定义它，请在 Module.php 上

```
public function onBootstrap(MvcEvent $e)
{
  ....
  $e->getViewModel()->setVariable('username', 'some_value');
} 
```

在你的 layout.phtml 上

```
echo $layout->username; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T19:38:44.230

在 module.php 你可以做到这一点

```
public function onBootstrap(MvcEvent $e)
{
  ....
  $e->getViewModel()->setVariable('username', $username);
} 
```

在你的布局中你可以做

```
echo $this->layout()->username; 
```

还要检查你是否使用过 MvcEvent 类。

# php - Codeigniter 链接到样式表

> ID：12550148
> 
> 赞同：0
> 
> 时间：2012-09-23T06:09:19.770
> 
> 标签：php, css, codeigniter

我正在尝试学习 Codeigniter。我按照 CI 网站上的教程构建了一个简单的 MVC。这是我的控制器...

```
<?php

class Pages extends CI_Controller {

    public function view($page = 'home'){

        if(!file_exists(APPPATH.'/views/pages/'.$page.'.php')){
            show_404();
        }

        $data['title'] = ucfirst($page);

        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);
    }
} 
```

这是标题模板...

```
<html>
<head>
    <title><?php echo $title ?> - WurkWithUs</title>
    <link rel="stylesheet" href="http://localhost/ci/CodeIgniter_2.1.2/css/bootstrap.css" type="text/css" media="screen"/>
    <link rel="stylesheet" href="http://localhost/ci/CodeIgniter_2.1.2/css/custom.css" type="text/css" media="screen"/>
</head>
<body>
    <h1>Wurk With Us</h1> 
```

当我使用像上面这样的绝对路径时，样式表可以工作。但是，如果我尝试使用类似...

```
<link rel="stylesheet" href="<?= base_url()?>css/bootstrap.css" type="text/css" media="screen"/> 
```

我得到一个空白页。当我“查看页面源代码”时，我的样式线看起来像......

```
 <link rel="stylesheet" href=" 
```

我试图按照[这里](https://stackoverflow.com/questions/2745153/codeigniter-php-stylesheet-link-how)的建议，我得到了相同的结果，即文档停止在“href=”行被解析。

我究竟做错了什么？有没有更好的方法来加载我的样式表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T06:27:38.477

这个问题我遇到过很多很多次。我敢打赌你没有在[URL 助手](http://codeigniter.com/user_guide/helpers/url_helper.html)中加载。它不会自动加载，因此要么将其加载到您的控制器中，要么自动加载它。

如果您选择在控制器中引导它，请致电

```
$this->load->helper('url'); 
```

在加载视图之前。

您在源代码中看到`href`空白的原因是因为当时有一个 PHP 错误（它找不到方法`base_url()`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:13:45.500

试试这个：

```
<?php base_url("css/bootstrap.css"); ?> 
```

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T09:50:08.007

在你的控制器中试试这个

```
$this->load->helper('html'); 
```

这在头标签中

```
<?=link_tag('css/style.css')?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-04T07:38:09.207

我认为您需要加载“url”帮助程序。在 autoload.php 中加载你的助手

```
Like that way :: $autoload['helper'] = array('url'); 
```

这将每次自动加载您的助手。因此，您无需在每个控制器中一次又一次地加载它。

或者

如果您想为特定控制器加载此帮助程序，请在您的控制器调用中加载帮助程序

```
Like that way :: $this->load->helper('url'); 
```

# java - 尝试使用 UserPrincipal 获取文件所有者时出错

> ID：12550149
> 
> 赞同：0
> 
> 时间：2012-09-23T06:09:31.997
> 
> 标签：java, compiler-errors

我正在执行以下操作：

[如何在 OSX 上的 Java 中获取文件所有者的名称？](https://stackoverflow.com/questions/3096805/how-do-i-get-the-name-of-a-files-owner-in-java)

这是我的代码：

```
private String getOwner(File f)
{
    Path p = Paths.get(f.getAbsolutePath());
    UserPrincipal owner = Files.getOwner(p);
    return owner.getName();
} 
```

我收到“找不到符号”错误。这里是：

```
...$ javac Delete.java
Delete.java:38: error: cannot find symbol
    UserPrincipal owner = Files.getOwner(p);
    ^
  symbol:   class UserPrincipal
  location: class Delete
1 error 
```

我知道错误的含义，并且尝试了几个导入语句：

java.security.*; ( [http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/) )

java.nio.file.attribute; ( [http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/) )

即使不得不问这个我也觉得很荒谬，但我不知道我做错了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:01:59.750

我能够通过以下导入在我的 Mac 上编译和运行您的代码：

```
import java.nio.file.*;
import java.io.File;
import java.io.IOException;
import java.nio.file.attribute.UserPrincipal; 
```

并采用以下格式：

```
private String getOwner(File f) throws IOException {
    Path p = Paths.get(f.getAbsolutePath());
    UserPrincipal owner = Files.getOwner(p);
    return owner.getName();
} 
```

您应该检查您是否真的在编译代码的地方使用了 Java 7。

# php - php如何生成动态列表（）？

> ID：12550154
> 
> 赞同：2
> 
> 时间：2012-09-23T06:09:44.687
> 
> 标签：php, list, variables, extract

根据我的理解，这就是 list() 的工作方式。

```
list($A1,$A2,$A3) = array($B1,B2,B3); 
```

因此，在我们的帮助下，`list()`我们可以相应地从数组中分配值。
这是我的问题......**如何生成动态列表（）？**

1）。基于数据库返回结果，我不确定其中有多少，但我将其全部分配到数组
2）中。所以我们可以使用 count(array) 来知道它有多少。
3）。那么**我该如何生成/**准备一个列表呢？

示例：客户 A，有 3 个孩子，命名为 Apple、Boy、Cat，所以我使用`list($kid1, $kid2, $kid3)`它。

但是当客户 B 有 3 个以上的孩子时，我只得到前 3 个，或者如果客户 C 只有 1 个孩子，则会遇到错误。

我知道如果基于上述情况，有很多方法可以在不使用的情况下解决它，`list()` 但我想知道或找出使用 using 的解决方案`list()`。

**如何`list()`根据计数生成动态基础`array()`**

谢谢伙计们/姑娘们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T06:45:16.523

如果您有可变数量的元素，请为它们使用*数组*！如果您不知道要处理多少个变量，那么将它们提取到单个变量中是没有意义的。`$kid1`假设您确实通过将这些值提取到变量`$kidN`中，那么接下来的代码会做什么？`$kid1`您现在不知道范围内有多少变量，并且在测试是否通过之前，`$kidN`您没有实用的方法来找出或迭代它们`isset`。这是对变量的疯狂使用。只需使用数组。

话虽如此，[变量变量](http://php.net/manual/en/language.variables.variable.php)：

```
$i = 1;
foreach ($array as $value) {
    $varname = 'kid' . $i++;
    $$varname = $value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T06:36:35.817

这不是 PHP 的`list`目的。来自官方[PHP 文档](http://php.net/manual/en/function.list.php)

```
list is not really a function, but a language construct. 
list() is used to assign a list of variables in one operation. 
```

换句话说，编译器实际上并没有调用函数，而是直接将您的代码编译为变量和赋值的分配。

*   您可以通过设置逗号来专门跳到给定元素，如下所示：

    `list($var1, , $var2) = Array($B1, B2, B3);`

    `echo "$var1 is before $var2 \n";`

*   或取第三个元素

    `list( , , $var3) = Array($B1, B2, B3);`

（我假设 B2，B3 是常数？或者你错过了一个`$`？）

具体来说`list`，您可以使用 PHP`variable variables`从任意一维数组创建变量，如下所示：

```
$arr = array("arrindex0" => "apple", "banana", "pear");
reset($arr);
while (list($key, $val) = each($arr)) {
    $key = is_numeric($key) ? "someprefix_" . $key : $key;
    echo "key sdf: $key <br />\n";
    $$key = $val;
}
var_dump($arrindex0, $someprefix_0, $someprefix_1); 
```

结果

```
string 'apple' (length=5)
string 'banana' (length=6)
string 'pear' (length=4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T06:41:52.870

`$A1, $A2, .... $AN`这会为数组中的每个元素创建变量：

```
$list =  array("a", "b", "c", "d");

extract(array_combine(array_map(function($i) {
        return "A" . $i;
    }, range(1, count($list))), $list));

echo implode(" ", array($A1, $A2, $A3, $A4)), PHP_EOL; 
```

`array_map`您可以在回调中修改变量的名称。我希望我永远不会在生产中看到这样的代码；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T06:17:54.757

[为此，您可以使用create_function()](http://php.net/manual/en/function.create-function.php)创建 lambda 表达式。list() 只能在表达式中访问。

# c# - 将 SQL 转换为 LINQ 需要对每秒创建的记录进行分组

> ID：12550157
> 
> 赞同：1
> 
> 时间：2012-09-23T06:10:13.710
> 
> 标签：c#, sql, linq, lambda, group-by

我正在寻找一种在 C# LINQ 中使用 lambda 格式每秒对记录进行分组的方法。在我的搜索中，我还没有找到一个好的方法来做到这一点。

SQL查询如下。

```
select count(cct_id) as 'cnt'
  ,Year(cct_date_created) 
  ,Month(cct_date_created) 
  ,datepart(dd,cct_date_created) 
  ,datepart(hh,cct_date_created) 
  ,datepart(mi,cct_date_created) 
  ,datepart(ss,cct_date_created) 
from ams_transactions with (nolock)
where cct_date_created between dateadd(dd,-1,getdate()) and getdate()
group by 
  Year(cct_date_created)
  ,Month(cct_date_created)
  ,datepart(dd,cct_date_created)
  ,datepart(hh,cct_date_created)
  ,datepart(mi,cct_date_created)
  ,datepart(ss,cct_date_created) 
```

现在我能来的最接近的是以下，但它没有给我正确的结果。

```
var groupedResult = MyTable.Where(t => t.cct_date_created > start 
                                    && t.t.cct_date_created < end)
                           .GroupBy(t => new { t.cct_date_created.Month,
                                               t.cct_date_created.Day,
                                               t.cct_date_created.Hour,
                                               t.cct_date_created.Minute, 
                                               t.cct_date_created.Second })
                           .Select(group => new { 
                                                 TPS = group.Key.Second
                                                }); 
```

这似乎是按秒分组，但不考虑日期范围内的每一分钟，而是日期范围内每分钟的那一秒。要获得每秒事务数，我需要它分别考虑每月、每小时、每天、每分钟的每一分钟。

目标是从这个分组列表中提取最大值和平均值。任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:18:05.723

目前您选择的是第二个，而不是计数 - 为什么？（您也无缘无故地使用匿名类型 - 只要您有一个属性，请考虑只选择该属性而不是将其包装在匿名类型中。）

因此，将您的更改`Select`为：

```
 .Select(group => new { Key = group.Key,
                        Transactions = group.Count() }); 
```

或者分别拥有所有关键属性：

```
 .Select(group => new { group.Month,
                        group.Day,
                        group.Hour,
                        group.Minute,
                        group.Second,
                        Transactions = group.Count() }); 
```

（顺便说一句，你绝对不需要年份部分吗？它在你的 SQL 中......）

# glassfish - JCA glassfish 中的连接共享

> ID：12550158
> 
> 赞同：2
> 
> 时间：2012-09-23T06:10:22.753
> 
> 标签：glassfish, connection, sharing, jca

我对 JCA 中的连接句柄共享存在误解。

我想知道连接共享是否仅在事务阶段（多个组件调用）期间发生，或者在访问具有相同 EIS 目标的组件的多个客户端之间可以进行连接共享。

我在 Glassfish 应用程序服务器 3.1 上创建了自己的资源适配器。问题是资源适配器不执行任何连接共享（没有 associateConnection 方法调用）。

谢谢，

# c# - 将关系数据库模式转换为语义 Web RDF 模型

> ID：12550161
> 
> 赞同：0
> 
> 时间：2012-09-23T06:12:12.093
> 
> 标签：c#, relational-database, rdf, transformation, semantic-web

我需要在我的项目中将 RDBS 转换为 RDF 模型。我做了一些研究，发现 Apache [Jena](https://stackoverflow.com/tags/jena/info)可以提供帮助。但是，我对 Java 平台不熟悉（我擅长 C++，C# 编程一般），所以我尝试下载 Jena .Net，却发现它不可用。

你能给我一些建议，让我的项目领先一步吗？我可以从其他地方下载 Jena .Net 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:15:03.593

如果您只需要使用 RDF 方式访问您的 SQL 数据库，请查看 D2RQ：[http ://d2rq.org/](http://d2rq.org/)

> D2RQ 平台是一个用于以虚拟、只读 RDF 图的形式访问关系数据库的系统。它提供对关系数据库内容的基于 RDF 的访问，而无需将其复制到 RDF 存储中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T16:39:17.937

您是否尝试将 RDBS 转换为 RDF 作为练习以提高您在 Semweb 技术上的技能，或者您真的需要在现实生活项目中进行这种转换？如果是后者，那么您不应该从简单的 RDF API 开始。您应该看看 D2RQ，还应该看看 W3C 当前定义的内容。RDB2RDF[工作组](http://www.w3.org/2001/sw/rdb2rdf/)正在制定两种规范，一种用于直接将 RDB 数据映射到 RDF，无需进一步暗示用户（称为[Direct Mapping](http://www.w3.org/TR/rdb-direct-mapping/)），另一种用于指定自定义映射，以便您可以按照自己喜欢的方式生成 RDF，根据您喜欢的 RDF Schema（称为[R2RML](http://www.w3.org/TR/r2rml/)）。

在我撰写本文时，这些规范是建议的建议，这是建议之前的最后一步。已经[有两种规格的实现](http://www.w3.org/2001/sw/rdb2rdf/wiki/Implementations)。

# switch-statement - 在 Dart 中切换失败

> ID：12550164
> 
> 赞同：17
> 
> 时间：2012-09-23T06:13:13.093
> 
> 标签：switch-statement, dart, fall-through

我今天开始学习 Dart，我遇到了一些我的 google 技能无法找到的东西。

我如何在非空的情况下出现故障？

我的用例是这样的：我正在编写一个 sprintf 实现（因为 dart 也没有这个），除了这个失败的东西之外，它可以工作。例如，在解析变量类型时，您可以使用“%x”与“%X”，其中大写类型告诉格式化程序输出应该是大写。

半伪代码如下所示：

```
bool is_upper = false;
switch (getType()) {
    case 'X':
      is_upper = true;
    case 'x':
      return formatHex(is_upper);
} 
```

我能想到的其他方法是以下之一

1：

```
switch (getType()) {
  case 'X': case 'x':
    return formatHex('X' == getType());
} 
```

2：

```
var type = getType();
if (type in ['x', 'X']) {
   return formatHex('X' == getType());
} 
```

现在，第二个选择几乎看起来不错，但是您必须记住有 11 个案例，这意味着有 11 个`if (type in [])`，这是我想要的更多类型。

那么，飞镖有一些`// //$FALL-THROUGH$`我不知道的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-28T14:18:24.880

Dart 规范提供了一种使用“继续”的方式让一个 switch case 继续到另一个 switch case：

```
switch (x) {
  case 42: print("hello");
           continue world;
  case 37: print("goodbye");
           break;
  world:  // This is a label on the switch case.
  case 87: print("world");
} 
```

它可以在 VM 中运行，但遗憾的是 dart2js 开关实现还不支持该功能。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-23T18:46:26.373

从[飞镖语言之旅](http://www.dartlang.org/docs/language-tour/#switch)中，您的（2）示例应该是正确的。

```
var command = 'CLOSED';
switch (command) {
  case 'CLOSED':     // Empty case falls through.
  case 'NOW_CLOSED':
    // Runs for both CLOSED and NOW_CLOSED.
    executeClose();
    break;
} 
```

如果您尝试执行以下操作，那将是一个错误

```
var command = 'OPEN';
switch (command) {

  case 'OPEN':
    executeOpen();
    // ERROR: Missing break causes an exception to be thrown!!

  case 'CLOSED':
    executeClose();
    break;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-05T11:33:54.530

编辑：这似乎只是由于 Dart 实现中的错误而起作用。请参阅[Dart 1.x 语言规范](https://www.ecma-international.org/publications-and-standards/standards/ecma-408/)，“17.15 继续”部分。

正如评论中所报告的那样，该错误现已修复，因此**不再有效**。因历史原因而保留。

* * *

此外，Lasse 的答案的简化是使用简单的`continue;`而不是`continue <label>;`如下：

```
bool is_upper = false;
switch (getType()) {
    case 'X':
      is_upper = true;
      continue;
    case 'x':
      return formatHex(is_upper);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-23T06:18:44.627

你不能`case`在 Dart 中有一个非空的 body 掉下来，这会引发错误。

除了非常简单的语句之外，我倾向于将`switch`所有通用代码重构为函数，这样您本身就没有这种多级控制流`switch`。

换句话说，类似：

```
switch (getType()) {
    case 'X':
        return formatHex(true);
    case 'x':
        return formatHex(false);
} 
```

你没有理由*需要*失败。`case`当一个部分中的操作可以在另一个部分的末尾全部执行时，它会派上用场`case`，但是这种方法可以做到这一点而不会失败，也不会使您的`switch`陈述变得复杂。

它还可以处理更复杂的情况，即最后没有包含在 toto 中的常见操作。例如，您可能想在`case`部分的开头或中间做一些事情。调用通用函数处理得很好：

```
switch (getType()) {
    case 'X':
        doSomethingOnlyForUpperCase();
        doSomethingCommon();
        doSomethingElseOnlyForUpperCase();
        return formatHex(true);
    case 'x':
        doSomethingCommon();
        return formatHex(false);
} 
```

实际上，我也对支持这种非空失败的语言（例如 C）执行此操作，因为我相信它有助于提高可读性和可维护性。

# node.js - redis 会删除我旧的 express.js 会话吗？

> ID：12550167
> 
> 赞同：11
> 
> 时间：2012-09-23T06:13:53.087
> 
> 标签：node.js, express, redis

我将redis用作node.js + express应用程序的会话存储...它会在旧会话到期后自动删除它们吗？

...或者我需要在服务器端进行一些清理吗？（所以数据库不会变得太大）

```
 var RedisStore = require('connect-redis')(express)

  app.use(express.session({
    store: new RedisStore({
      host: cfg.redis.host,
      db: cfg.redis.db
    }), 
    secret: 'foobar'
  })); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-23T06:32:59.410

是的，`connect-redis`会让 Redis 在会话过期时清除它们。

如果我没记错的话，默认会话超时是 24 小时，这对我来说是相当长的时间来保持内存中的空闲，但是你可以给它一个`ttl`参数来配置（以秒为单位）你希望会话在 Redis 过期之前保持多长时间他们。

如果您想自己确保 Redis 为您清理一切，只需将超时设置为 30 秒，并在超时到期后自行查看 Redis；

```
app.use(express.session({
  store: new RedisStore({
    host: cfg.redis.host,
    db: cfg.redis.db,
    ttl: 30
  }), 
  secret: 'foobar'
})); 
```

`ttl`这里提到了这些选项，[这里](https://github.com/visionmedia/connect-redis)还有一些关于它如何与其他选项交互的额外[细节](https://github.com/visionmedia/connect-redis/pull/45)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T07:13:33.057

它按预期工作。如果我只进行浏览器会话（用户代理关闭时 cookie 过期），那么它会在 redis 中存在 24 小时（我没有在 connect-redis 中设置 ttl 选项）。

如果我将 cookie 设置为 2 周后过期，它会在 redis 中存活 14 天。

您可以使用以下命令进行检查：

```
start redis-cli
> keys *
> ttl <key> 
```

# android - 如何以编程方式设置滚动视图的 layoutMarginBottom

> ID：12550168
> 
> 赞同：9
> 
> 时间：2012-09-23T06:14:44.997
> 
> 标签：android, scrollview

在其中一种布局中，我正在使用滚动视图并希望以编程方式设置其 layoutMarginBottom。我该怎么做？这是 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/frameLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ScrollView
            android:id="@+id/scrollView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="90.0dip"
            android:layout_marginLeft="1.0dip"
            android:layout_marginRight="1.0dip"
            android:layout_marginTop="-2.0dip"
            android:animateLayoutChanges="true"
            android:fadeScrollbars="true"
            android:fadingEdge="none" >

            <!-- android:layout_marginBottom="60.0dip" -->
            <!-- android:fillViewport="true" -->

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="visible" >

                <ImageView
                    android:id="@+id/QuestionImageView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:visibility="visible" />

                <TextView
                    android:id="@+id/tv"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/QuestionImageView"
                    android:fadingEdge="vertical"
                    android:scrollbars="vertical" />

                <TextView
                    android:id="@+id/questionnumber"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:fadingEdge="vertical"
                    android:scrollbars="vertical" />

                <TextView
                    android:id="@+id/question"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/tv"
                    android:fadingEdge="vertical"
                    android:padding="10dp"
                    android:scrollbars="vertical"
                    android:text=""
                    android:textColor="@color/dark_green" />

                <RadioGroup
                    android:id="@+id/radioGroup1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/question"
                    android:orientation="vertical" >

                    <RadioButton
                        android:id="@+id/option1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option4"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />
                </RadioGroup>
            </RelativeLayout>
        </ScrollView>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativequestion"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <com.google.ads.AdView
            android:id="@+id/ad"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            ads:adSize="SMART_BANNER"
            ads:adUnitId="a1501e5633125fb"
            ads:loadAdOnCreate="true"
            ads:testDevices="TEST_EMULATOR, 123456789ABCDEF" />

        <LinearLayout
            android:id="@+id/newquestion"
            android:layout_width="fill_parent"
            android:layout_height="40.0dip"
            android:layout_above="@id/ad"
            android:background="#ff777777"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/PrevButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onPrevButtonClick"
                android:text="Prev" />

            <Button
                android:id="@+id/NextButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onNextButtonClick"
                android:text="Next" />

            <Button
                android:id="@+id/SkipButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onSkipButtonClick"
                android:text="Skip" >
            </Button>

            <Button
                android:id="@+id/SubmitButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_marginRight="5.0dp"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onSubmitButtonClick"
                android:text="Submit" />
        </LinearLayout>
    </RelativeLayout>

</RelativeLayout> 
```

在这里，我想设置滚动视图的 layoutMarginBottom。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-23T07:07:40.703

我是这样做的：

```
sv = (ScrollView)findViewById(R.id.scrollView);
sv.setBackgroundColor(Color.TRANSPARENT);

RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) sv
    .getLayoutParams();

layoutParams.setMargins(0, 0, 0, 100);
sv.setLayoutParams(layoutParams); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-23T04:58:36.717

如果你得到

> java.lang.ClassCastException: android.widget.FrameLayout$LayoutParams 不能转换为 android.widget.RelativeLayout$LayoutParams

使用上述解决方案然后尝试：

```
 ScrollView sv = (ScrollView)findViewById(R.id.scrollView);    
 FrameLayout.LayoutParams lp = (FrameLayout.LayoutParams)sv.getLayoutParams();

 lp.bottomMargin = 100;
 sv.setLayoutParams(lp); 
```

# c++ - 果酱 UI 构建器

> ID：12550169
> 
> 赞同：5
> 
> 时间：2012-09-23T06:14:57.237
> 
> 标签：c++, user-interface, marmalade

我刚从 6.1 开始我的果酱生涯。

我知道他们停止了他们的 UI 构建器，转而支持 3rd 方解决方案。但是，谷歌中的“Marmalade Ui Builder”在前 3 页中什么也没有显示（过去 3 页总是太远）。

有这样的第三方工具吗？还是人们实际上在使用记事本并手动编写 ui？

我见过一个简单地将 XML 解析为 .ui 样式的 XML UI 构建器。但是，我不认为这比手动输入所有内容更容易。

至于 IwUI 是否真的是正确的方式，这也是模棱两可的。

一些洞察力会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T09:39:19.027

IwUI 是旧系统替换为 IwNUI。N 个状态为 Native。IwNUI 对每个平台都使用本机控件。

我没有将 Iw*UI 用于游戏，我自己在 GL 中编写界面更简单。基本屏幕/按钮管理器在几个小时内完成编码。

自己写这样的东西然后知道有一些你无法改变的东西会更简单。

如果您开发商业应用程序，那么 Marmalade 添加了 PhoneGap 支持。我相信PhoneGap 是商业跨平台应用程序的更好方式。特别是因为大多数移动平台共享 WebKit 引擎。更重要的是 Marmalade Team 他们自己不相信 Iw*UI，这就是他们在 Marmalade 上强制使用 PhoneGap 的原因。

换句话说，如果不知道你为什么需要它，就不要使用 Iw*UI。

有 3rd 方 2D 游戏引擎 IwGame。我不使用它，但它有自己的 Interface Builder，它在 XML 中定义接口。

# html - 更改 HTML 标题标签的显示速度

> ID：12550171
> 
> 赞同：3
> 
> 时间：2012-09-23T06:15:39.423
> 
> 标签：html

有没有办法改变文本悬停时标题标签内容显示的速度/速度？

例如

```
<h1 title="show up title"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T06:21:41.197

this all require the JavaScript or jquery

try this

html

```
<h1   id="book" title="hello onw"  >the title </h1> 
```

jquery

```
 $("#book").append("<em></em>");
 $("#book").hover(function() {
      $(this).find("em").animate({opacity: "show", top: "-75"}, "slow");
      var hoverText = $(this).attr("title");
      $(this).find("em").text(hoverText);
    }, function() {
      $(this).find("em").animate({opacity: "hide", top: "-85"}, "fast");
    }); 
```

check the [fiddle](http://jsfiddle.net/swamimayank/QSgdD/)

also check [this](http://www.webdesignerwall.com/demo/jquery/animated-hover2.html) out

# c# - 如何在 WebGrid 中禁用分页

> ID：12550181
> 
> 赞同：17
> 
> 时间：2012-09-23T06:18:25.863
> 
> 标签：c#, asp.net-mvc, razor, webmatrix, webgrid

我搜索了文档（http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid.webgrid(v=vs.111).aspx），发现“canPage: false” - 这不起作用。说没有名为“canPage”的参数。

其他网站说'autoSortAndPage：false'有效，但它对我不起作用。

代码：

```
<div id="grid">
    @grid.Html(canPage: false,
      // the rest of my grid stuff
    );
</div> 
```

我怎样才能摆脱这个分页？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-23T06:43:52.067

它是`canPage`，但这是`WebGrid`构造函数的参数。

```
@{
    var grid = new WebGrid(canPage: false,
      // ... etc
    );
}

<div id="grid">
    @grid.GetHtml()
</div> 
```

# c# - 抛出格式异常 C#

> ID：12550184
> 
> 赞同：5
> 
> 时间：2012-09-23T06:19:08.937
> 
> 标签：c#, try-catch, formatexception

我试图在有人在提示输入年龄时尝试输入非整数字符的情况下引发格式异常。

```
 Console.WriteLine("Your age:");
        age = Int32.Parse(Console.ReadLine()); 
```

我不熟悉 C# 语言，可以使用帮助来为此实例编写 try catch 块。

非常感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-23T06:22:48.807

该代码将已经抛出一个`FormatException`. 如果你的意思是你想*抓住*它，你可以写：

```
Console.WriteLine("Your age:");
string line = Console.ReadLine();
try
{
    age = Int32.Parse(line);
}
catch (FormatException)
{
    Console.WriteLine("{0} is not an integer", line);
    // Return? Loop round? Whatever.
} 
```

但是，*最好*使用`int.TryParse`：

```
Console.WriteLine("Your age:");
string line = Console.ReadLine();
if (!int.TryParse(line, out age))
{
    Console.WriteLine("{0} is not an integer", line);
    // Whatever
} 
```

这避免了相当普通的用户错误情况的异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T06:25:48.227

那这个呢：

```
Console.WriteLine("Your age:");
try
{    
     age = Int32.Parse(Console.ReadLine());
}
catch(FormatException e)
{
    MessageBox.Show("You have entered non-numeric characters");
   //Console.WriteLine("You have entered non-numeric characters");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T06:22:39.137

无需为该代码设置 try catch 块：

```
Console.WriteLine("Your age:");
int age;
if (!Integer.TryParse(Console.ReadLine(), out age))
{
    throw new FormatException();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-09-16T16:28:42.810

你可以这样做...

```
int age; 
```

Console.WriteLine("你的年龄："); 年龄=Conver.ToInt32(Console.Readline());

//@Erfunll

# .net - 在 .Net 中编写大型 Xml 文件（带验证）

> ID：12550187
> 
> 赞同：0
> 
> 时间：2012-09-23T06:21:08.887
> 
> 标签：.net, xml-serialization, xsd

我的应用程序需要编写一个 Xml 文件，为此我有一个`XmlSchema`. 因为文件可能非常大，所以我认为将`XmlSerializer`与 xsd.exe 生成的类一起使用会有问题。

我知道我可以`XmlWriter`用来编写任意大的 Xml 文件，但这意味着我必须手动写出每个元素和每个属性，这很容易出错。

有没有一种工具可以生成“特定于模式”的`XmlWriter`类来帮助我避免错误？或者，至少，当我写一些非法的东西时会立即抛出异常？还有其他我不知道的方法吗？

-垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:36:26.830

一种选择是在没有验证的情况下将其*写出*，然后有一个额外的步骤使用模式再次*读取*`XmlReader`它（用于通读，而实际上并没有记住内存中的任何内容）。该步骤可能是可选的 - 最初总是这样做，然后当您认为您已经解决了任何错误时，您最终可以将其关闭以提高性能。（可能保留代码，以便您可以轻松地再次打开它。）

当然你不应该把它作为你*唯一*的检查——单元测试应该有助于阻止你走得那么远:)

# c++ - 在多重继承（菱形）中，祖父母的默认构造函数称为

> ID：12550203
> 
> 赞同：-5
> 
> 时间：2012-09-23T06:24:42.923
> 
> 标签：c++, constructor, multiple-inheritance, default-constructor

```
#include<iostream>
using namespace std;
class Person {
   // Data members of person
public:
    Person(int x)  { cout << "Person::Person(int ) called" << endl;   }
};

class Faculty : public Person {
   // data members of Faculty
public:
    Faculty(int x):Person(x)   {
       cout<<"Faculty::Faculty(int ) called"<< endl;
    }
};

class Student : public Person {
   // data members of Student
public:
    Student(int x):Person(x) {
        cout<<"Student::Student(int ) called"<< endl;
    }
};

class TA : public Faculty, public Student  {
public:
    TA(int x):Student(x), Faculty(x)   {
        cout<<"TA::TA(int ) called"<< endl;
    }
};

int main()  {
    TA ta1(30);
} 
```

开/关：

```
Person::Person() called
Faculty::Faculty(int ) called
Student::Student(int ) called
TA::TA(int ) called 
```

在上面的菱形中，两个父类是用 virtual 关键字从祖父继承的，因此 Person 类的构造函数只被调用一次。但是为什么祖父母的默认构造函数在这里调用。谁能告诉我确切的原因非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:30:54.310

`TA`是 a ，因此调用 ' 的构造函数并`Person`没有什么意外。*如果*您像声称的那样使用虚拟继承，那么您的类将有一个子对象，因此它的构造函数被调用一次这一事实是可以预料的。如果您没有使用虚拟继承，则会有两个子对象，并且您可能会期望两个构造函数调用。`Person`*`TA``Person``TA``Person``Person`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:34:02.440

菱形配置需要虚拟基类，否则您将在对象表示中得到重复。

```
class A
{
}

class B : virtual public A
{
};

class C : virtual public A
{
}

class D: public B, public C
{
} 
```

这将确保只有一个 A 的表示形式使其成为 D 类型的最终对象，并且它将被所有人共享。

我把它作为一个练习留给提问者如何通过这个来传递构造函数参数。它*并不*直观，但 google +“虚拟基类”将不仅仅是启发性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T06:35:38.283

**[C++ Faq](http://www.parashift.com/c++-faq-lite/virtual-inheritance-ctors.html)**很好地回答了你的问题：

> **[25.12] 当我从使用虚拟继承的类继承时，我需要了解哪些特殊注意事项？**
> 
> 大多数派生类的ctor的初始化列表直接调用虚拟基类的ctor。
> 
> 因为一个虚拟基类子对象在一个实例中只出现一次，所以有一些特殊的规则可以确保每个实例只调用一次虚拟基类的构造函数和析构函数。C++ 规则说，虚拟基类是在所有非虚拟基类之前构造的。作为程序员，你需要知道的是：类继承层次结构中任何位置的虚拟基类的构造函数都由“最派生”类的构造函数调用。
> 
> 实际上，这意味着当您创建具有虚拟基类的具体类时，您必须准备好传递调用虚拟基类的构造函数所需的任何参数。而且，当然，如果在您的类祖先中的任何地方都有多个虚拟基类，您必须准备好调用它们的所有构造函数。这可能意味着派生最多的类的构造函数需要比您想象的更多的参数。
> 
> 但是，如果虚拟基类的作者遵循前面的 FAQ 中的指导，那么虚拟基类的构造函数可能不带任何参数，因为它没有任何要初始化的数据。这意味着（幸运的是！）最终从虚拟基类继承的具体类的作者不必担心将额外的参数传递给虚拟基类的 ctor。*

# html - 通过 css 在我的文本旁边放一行

> ID：12550206
> 
> 赞同：-1
> 
> 时间：2012-09-23T06:25:22.927
> 
> 标签：html, css

我想在我的文字旁边放一条线 Like THIS

**- - - 你好世界 - - -**

这条线应该继续，粗体，中间对齐，红色

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T06:28:57.693

您是否尝试过 :before 和 :after 选择器？

```
<span class="dashes">Hello WOrld</span>

<style type="text/css">
 .dashes { font-weight: bold; }
 .dashes:before, .dashes:after { content:"----"; color:#f00; }
</style> 
```

它是这样出来的：[图像样本](http://o7.no/UseBTy)

**更新**

根据您的更新和评论，我认为这符合您的描述：

```
<h4 class="sidelines"><span>Hello WOrld</span></h4>
<style type="text/css">
h4.sidelines { text-align: center; border-bottom: 1px solid #f00; height: 0.5em; }
h4.sidelines span { display: inline-block; background: #fff; padding:0 0.25em; }
</style> 
```

这将为您提供一个居中的粗体标题，每边都有连续的线条。

以下是更新示例：http: [//o7.no/PVXvaH](http://o7.no/PVXvaH)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-06T02:51:04.893

不需要css

```
&boxh;&boxh;&boxh;&nbsp;Hello World&nbsp;&boxh;&boxh;&boxh; 
```

看起来像这样────你好世界────

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T06:32:18.920

试试这个。但不兼容所有浏览器版本。

```
 p:before,p:after  {
  content: "---";
 }

<p>Hello WOrld</p> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T06:58:42.723

我使用`div`'s 实现了这一点。检查此[链接](http://jsfiddle.net/venkateshwar/yJ2AF/2/)以查看结果。

**HTML**

```
<div class="line"></div>
<div class="text">Hello WOrld</div>
<div class="line"></div> 
```

**CSS**

```
.line
{
  width:100px;background-color:black;
  border: 0.1em solid black; /* dashed, groove, inset */
  margin-top:0.45em;margin-bottom:0.45em;
}

.line, .text
{
  float:left;
}

.text
{
  padding-left:10px;padding-right:10px;
} 
```

请记住，当您添加 和 的比例（高度）时，`margin-top`它应该等于 1。就像我的例子一样。这将保持布局干净。`margin-bottom``border``0.45 + 0.45 + 0.1 = 1`

如果你想让线条更粗，那么只需增加`border`记住`margin-top`和的比例即可`margin-bottom`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-11T16:20:38.413

你好世界

```
p {
    text-align:center;
    border-left: 50px solid #363454;
    border-right: 50px solid #363454;
    width:150px;
    line-height: 2px;
} 
```

```
<p>Hello World</p>
```

# mongodb - 如何在 MongoDB 中应用约束？

> ID：12550210
> 
> 赞同：30
> 
> 时间：2012-09-23T06:25:48.057
> 
> 标签：mongodb

我已经开始使用 MongoDB，而且我对它还很陌生。有什么方法可以对 MongoDB 中的文档应用约束？就像指定主键或将属性视为唯一？或者指定特定属性大于最小值？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-09-23T13:40:48.380

要超越索引中本机可用的唯一性约束，您需要使用[Mongoose](http://mongoosejs.com/index.html)之类的东西及其支持基于字段的[验证](http://mongoosejs.com/docs/validation.html)的能力。这将为您提供诸如最小值之类的支持，但仅当更新通过您的 Mongoose 模式/模型时。

**MongoDB 3.2 更新**

MongoDB 现在原生支持文档验证。

[文档](https://docs.mongodb.org/manual/core/document-validation/)中的示例：

```
db.createCollection( "contacts",
   { validator: { $or:
      [
         { phone: { $type: "string" } },
         { email: { $regex: /@mongodb\.com$/ } },
         { status: { $in: [ "Unknown", "Incomplete" ] } }
      ]
   }
} ) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-09-23T06:50:27.163

作为“无模式”数据库，您提到的某些内容必须受到应用程序端的限制，而不是数据库端。（如“最小值”）

但是，您可以创建索引（用于查询的键——请记住，查询一次只能使用一个索引，因此通常最好围绕查询设计索引，而不是仅仅索引您可能查询的每个字段）： [http://www.mongodb.org/display/DOCS/Indexes#Indexes-Basics](http://www.mongodb.org/display/DOCS/Indexes#Indexes-Basics)

您还可以创建唯一索引，这将强制类似于唯一约束的唯一性（它确实有一些警告，例如数组字段）： [http ://www.mongodb.org/display/DOCS/Indexes#Indexes-unique %3Atrue](http://www.mongodb.org/display/DOCS/Indexes#Indexes-unique%3Atrue)

# javascript - 2 复选框，当两个检查都提供新的 div

> ID：12550212
> 
> 赞同：1
> 
> 时间：2012-09-23T06:26:07.853
> 
> 标签：javascript, jquery, html

我有三个 div 当我想使用复选框时我应该有新的 div 如果我检查 car1 而未选中 car2 我应该有红色汽车但如果检查 car1 而检查 car2 我应该有黑色汽车

```
<div id="carblack">
    car black
</div>
<div id="carred"  style="display:none">
    car red
</div>
<div id="carblue"  style="display:none">
    car blue
</div>
<input type="checkbox" id="car1" name="vehicle" value="red" checked/>
<input type="checkbox" id="car2" name="vehicle1" value="blue"  checked/> 
```

```
$('#car1').change(function () {

    if($(this).attr("checked")){
        document.getElementById("carred").style.display = "block";
        document.getElementById("carblack").style.display = "none";
    } else{
        document.getElementById("carblack").style.display = "block";
        document.getElementById("carred").style.display = "none";
    }
});

$('#car2').change(function () {

    if($(this).attr("checked")){
        document.getElementById("carblue").style.display = "block";
        document.getElementById("carblack").style.display = "none";
    } else{
        document.getElementById("carblack").style.display = "block"; 
        document.getElementById("carblue").style.display = "none";
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:08:27.787

2 收音机检查或没有检查 - 黑色？

```
$(function(){
    var cars = $('div[id^="car"]'),
        inputs = $('input[type="checkbox"]');

    inputs.change(function(){
        cars.hide();
        if(inputs.filter(':checked').length === 1)
        {
           cars.filter('#car' + $(this).val()).show();
        }
        else {
           cars.filter('#carblack').show();
        }
    });
}); 
```

演示：http: [//jsfiddle.net/jAxHT/](http://jsfiddle.net/jAxHT/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T06:45:39.927

```
$('#car1').change(function () {

if($(this).attr("checked")){
    if($(this).next().attr("checked")){
    document.getElementById("carblack").style.display = "block";
    document.getElementById("carred").style.display = "none";
     document.getElementById("carblue").style.display = "none";
    }else{
    document.getElementById("carred").style.display = "block";
    document.getElementById("carblack").style.display = "none";
}
} else if($(this).next().attr("checked")){
    document.getElementById("carblack").style.display = "none";
    document.getElementById("carblue").style.display = "block";
}else{
       document.getElementById("carblack").style.display = "block";
    document.getElementById("carred").style.display = "none";
     document.getElementById("carblue").style.display = "none";        }
});

$('#car2').change(function () {

if($(this).attr("checked")){
     if($(this).prev().attr("checked")){
     document.getElementById("carblack").style.display = "block";
     document.getElementById("carred").style.display = "none";
     document.getElementById("carblue").style.display = "none";

    }else{
    document.getElementById("carblue").style.display = "block";
    document.getElementById("carblack").style.display = "none";
    }
 } else if($(this).prev().attr("checked")){
    document.getElementById("carblack").style.display = "none"; 
    document.getElementById("carred").style.display = "block";
 }else{
       document.getElementById("carblack").style.display = "block";
    document.getElementById("carred").style.display = "none";
     document.getElementById("carblue").style.display = "none";        }
});​ 
```

# node.js - NodeJS：取消监视文件并指定侦听器

> ID：12550222
> 
> 赞同：1
> 
> 时间：2012-09-23T06:28:32.903
> 
> 标签：node.js

我`fs.watchfile();`在 NodeJS 中使用有点像文档示例：

```
fs.watchFile('message.text', function (curr, prev) {}); 
```

当我使用监听器时：

```
fs.watchFile('message.text', function (curr, prev) {}, listener); 
```

并取消观看文件：

```
fs.unwatchFile(message.text, listener); 
```

删除文件的`unwatchfile`所有侦听器而不是指定的侦听器。文档指出它应该只删除指定的侦听器，那么做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T11:01:27.693

fs.watchFile 中的第二个参数将是一个带有选项的 JavaScript 对象，但您传递了两个函数。

测试用例：

```
var fs = require('fs');
var listener1 = function (curr, prev) { console.log('touched 1'); };
var listener2 = function (curr, prev) { console.log('touched 2'); };

fs.watchFile('message.text', listener1);
fs.watchFile('message.text', listener2);

fs.unwatchFile('message.text', listener1); 
```

# c++ - 在 Visual Studio 2010 Express 中编译 Mathlink 代码 LNK2019 错误

> ID：12550223
> 
> 赞同：1
> 
> 时间：2012-09-23T06:28:34.823
> 
> 标签：c++, visual-studio-2010, wolfram-mathematica, mathlink

我正在尝试编译一个用于 Mathematica 的简单 C 文件。（注意：我确实遵循了其余的说明，创建了空的 addtwotm.c 文件并添加了 addtwo.tm）

```
#include "mathlink.h"
extern int addtwo( int i, int j);

int addtwo( int i, int j)
{
    return i+j;
}

#if WINDOWS_MATHLINK

#if __BORLANDC__
#pragma argsused
#endif

int PASCAL WinMain( HINSTANCE hinstCurrent, HINSTANCE hinstPrevious, LPSTR lpszCmdLine, int nCmdShow)
{
char  buff[512];
char FAR * buff_start = buff;
char FAR * argv[32];
char FAR * FAR * argv_end = argv + 32;

hinstPrevious = hinstPrevious; /* suppress warning */

if( !MLInitializeIcon( hinstCurrent, nCmdShow)) return 1;
MLScanString( argv, &argv_end, &lpszCmdLine, &buff_start);
return MLMain( (int)(argv_end - argv), argv);
}

#else

int main(int argc, char* argv[])
{
return MLMain(argc, argv);
}

#endif 
```

但是，在构建时，我得到以下输出：

```
1>------ Build started: Project: addtwo, Configuration: Debug Win32 ------
1>  Performing Custom Build Tools
1>  on "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\VC\bin\mprep.exe" "" -o "D:\Applications\Mathematica\SystemFiles\Links\MathLink\DeveloperKit\Windows\MathLinkExamples\addtwo\addtwo\..\addtwotm.c"
1>addtwo.obj : error LNK2019: unresolved external symbol _MLMain referenced in function _WinMain@16
1>addtwo.obj : error LNK2019: unresolved external symbol _MLInitializeIcon referenced in function _WinMain@16
1>D:\Applications\Mathematica\SystemFiles\Links\MathLink\DeveloperKit\Windows\MathLinkExamples\addtwo\Debug\addtwo.exe : fatal error LNK1120: 2 unresolved externals
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我已按照 Wolfram 的 MathLink 开发人员指南中提供的所有说明进行操作，并确保将“ml32i3m.lib”添加到 Linker>Input>Additional Dependencies。假设 ml32/ml64 lib 文件包含 MlMain 的信息。任何帮助表示赞赏:)

# php - 如何防止 Session_id(); 在 PHP 从改变？

> ID：12550228
> 
> 赞同：-1
> 
> 时间：2012-09-23T06:29:42.187
> 
> 标签：php

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我正在尝试创建一个基于会话的计数器。而且我的代码似乎不起作用。每当，我重新加载页面。输出是“你已经浏览了 0 次页面”。

```
 <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
</head>
<body>
 <?php
session_start();

if(!isset($_SESSION['count']))
    $_SESSION['count'] = 0;
else
    $_SESSION['count']++;

 echo "You Have Viewed this page ", $_SESSION['count'], " times.";  

 echo session_id(); ?>
</body>
</html> 
```

什么时候，我在我的本地主机上运行这段代码。代码根本不起作用。当我在我的网络服务器（hostgator）上运行它时，我得到以下错误。

```
Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/rohitink/public_html/uiet.org/s4/index.php:8) in /home/rohitink/public_html/uiet.org/s4/index.php on line 9

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/rohitink/public_html/uiet.org/s4/index.php:8) in /home/rohitink/public_html/uiet.org/s4/index.php on line 9
You Have Viewed this page 0 times.788141cfa1329643918f87f5f6c9eb5a 
```

请给我有关如何修复此错误的详细信息。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:31:49.490

您需要将 放在该`session_start()`页面的顶部：

```
<?php session_start(); ?>
<html>
.... 
```

原因是`session_start()`在客户端设置了cookie，而cookie只有在还没有输出的情况下才能设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:32:17.400

你必须在页面的第一行开始会话，即使他的空间引起了警告

> ![在此处输入图像描述](../Images/85c2bde2d4662250a0f9d2572a830526.png)

并且对于标头已经发送错误，请检查此标[头已由 PHP 发送](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

# java - p：在ajax调用后未设置selectOneMenu值

> ID：12550229
> 
> 赞同：0
> 
> 时间：2012-09-23T06:29:46.933
> 
> 标签：java, jsf, primefaces

我试图在 AJAX 调用后将选项设置为后端的特定值，但是尽管所有其他字段类型都已成功设置，但 selectOneMenu 没有。我正在使用 Primefaces/JSF。

xhtml:

```
<p:inputText id="cpr" value="#{customerbean.customer.cpr}">
                <p:ajax event="change" listener="#{customerbean.fetchCustomerDatafromCBS}" update="@form" immediate="true" >
                    <f:param name="cprNumber" value="#{customerbean.customer.cpr}"/>
                </p:ajax>                 
                <f:validator validatorId="cprValidator" />                    
            </p:inputText>   

                <p:selectOneMenu id="gender" value="#{customerbean.customer.gender}" required="#{!customerbean.disabled}" requiredMessage="#{text['validation.error.required.gender']}" disabled="#{customerbean.disabled}">                      
                <f:selectItem itemLabel="Select One" itemValue="" noSelectionOption="true" />  
                <f:selectItem itemLabel="Male" itemValue="Male" />  
                <f:selectItem itemLabel="Female" itemValue="Female"  />  
                </p:selectOneMenu> 
```

豆：

```
 getCustomer().setGender(fetchedCustomer.getGender().trim()); 
```

**注意** 我刚刚发现该值已设置（因为数据库行插入了正确的值） - 但浏览器上的 selectOneMenu UI 对象并未反映这一点。

整体视图：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:t="http://myfaces.apache.org/tomahawk">  

    <ui:composition template="commonLayout.xhtml">

        <ui:define name="content">

            <p:panelGrid columns="2" styleClass="companyHeaderGrid" >  
                <f:facet name="header">  
                    Create customer
                </f:facet>  

                <h:outputLabel for="cpr" value="CPR" />
                <h:outputLabel for="passportno" value="Passport No." />

                <p:inputText id="cpr" value="#{customerbean.customer.cpr}">
                    <p:ajax event="change" listener="#{customerbean.fetchCustomerDatafromCBS}" update="@form" immediate="true" >
                        <f:param name="cprNumber" value="#{customerbean.customer.cpr}"/>
                    </p:ajax>                 
                    <f:validator validatorId="cprValidator" />                    
                </p:inputText>   

                <p:inputText id="passportno" value="#{customerbean.customer.passportno}" readonly="#{customerbean.disabled}">                
                    <f:validator validatorId="passportnoValidator" />
                </p:inputText>                          

                <h:outputLabel for="name" value="Name"/>                
                <h:outputLabel for="nationality" value="Nationality" />

                <p:inputText id="name" value="#{customerbean.customer.name}" required="true" requiredMessage="#{text['validation.error.required.name']}" readonly="#{customerbean.disabled}"/>
                <p:inputText id="nationality" value="#{customerbean.customer.nationality}" required="true" requiredMessage="#{text['validation.error.required.nationality']}" readonly="#{customerbean.disabled}" />                                                

                <h:outputLabel for="dob" value="Date of Birth" />
                <h:outputLabel for="address" value="Address" />

                <p:calendar id="dob"  value="#{customerbean.customer.dob}" pattern="ddmmyyyy" readonly="#{customerbean.disabled}" />                
                <p:inputText id="address"  value="#{customerbean.customer.address}" readonly="#{customerbean.disabled}" />                               

                <h:outputLabel for="mailingaddress" value="Mailing Address" />
                <h:outputLabel for="gender" value="Gender" />

                <p:inputText id="mailingaddress" value="#{customerbean.customer.mailingAddress}" readonly="#{customerbean.disabled}" />                                                            

                <p:selectOneMenu id="gender" value="#{customerbean.customer.gender}" required="#{!customerbean.disabled}" requiredMessage="#{text['validation.error.required.gender']}" disabled="#{customerbean.disabled}">                      
                    <f:selectItem itemLabel="Select One" itemValue="" noSelectionOption="true" />  
                    <f:selectItem itemLabel="Male" itemValue="Male" />  
                    <f:selectItem itemLabel="Female" itemValue="Female"  />  
                </p:selectOneMenu>              

                <h:outputLabel for="mobileno" value="Mobile No."  />
                <h:outputLabel for="faxno" value="Fax No." />

                <p:inputText id="mobileno"  value="#{customerbean.customer.mobileno}" required="true" requiredMessage="#{text['validation.error.required.mobileno']}" validatorMessage="#{text['validation.error.mobileno']}" readonly="#{customerbean.disabled}" >
                    <f:validateLongRange minimum="0" maximum="99999999999999" />
                </p:inputText>
                <p:inputText id="faxno"  value="#{customerbean.customer.faxno}" readonly="#{customerbean.disabled}" />                

                <h:outputLabel for="otherno" value="Other No." />                
                <h:outputLabel for="primaryemail" value="Primary email" />              

                <p:inputText id="otherno"  value="#{customerbean.customer.otherno}" readonly="#{customerbean.disabled}" />
                <p:inputText id="primaryemail"  value="#{customerbean.customer.primaryemail}" required="false" validatorMessage="#{text['validation.error.required.email']}" readonly="#{customerbean.disabled}">                   
                    <f:validateRegex pattern="([\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z])?" />
                </p:inputText>    

                <h:outputLabel for="alternativeemail" value="Alternative email" />              
                <p:inputText id="alternativeemail"  value="#{customerbean.customer.alternativeemail}" required="false" validatorMessage="#{text['validation.error.required.email']}" readonly="#{customerbean.disabled}">                   
                    <f:validateRegex pattern="([\w\.-]*[a-zA-Z0-9_]@[\w\.-]*[a-zA-Z0-9]\.[a-zA-Z][a-zA-Z\.]*[a-zA-Z])?" />
                </p:inputText>                    

                <h:outputLabel for="maritalstatus" value="Marital status" />
                <h:outputLabel for="nochildren" value="No. of Children" />                

                <p:selectOneMenu id="maritalstatus" value="#{customerbean.customer.maritalStatus}" disabled="#{customerbean.disabled}">  
                    <f:selectItem itemLabel="Select One" itemValue="" />  
                    <f:selectItem itemLabel="Single" itemValue="Single" />  
                    <f:selectItem itemLabel="Married" itemValue="Married"/>  
                    <f:selectItem itemLabel="Divorced" itemValue="Divorced"/>  
                    <f:selectItem itemLabel="Widow" itemValue="Widow"/>  
                </p:selectOneMenu>  

                <p:inputText id="nochildren"  value="#{customerbean.customer.nochildren}" readonly="#{customerbean.disabled}" />                

                <f:facet name="footer">  
                    <center>
                        <p:commandButton action="#{customerbean.add(customerbean.customer)}" ajax="false" value="Save" icon="ui-icon-check" />

                        <p:commandButton value="Reset" update="cpr passportno name nationality dob address mailingaddress gender genderhidden mobileno faxno otherno primaryemail alternativeemail maritalstatus maritalstatushidden nochildren messages" process="@this"  
                                         icon="ui-icon-cancel">  
                            <pe:resetInput for="cpr passportno name nationality dob address mailingaddress gender genderhidden mobileno faxno otherno primaryemail alternativeemail maritalstatus maritalstatushidden nochildren"/>  
                        </p:commandButton>              
                    </center>
                </f:facet>  
            </p:panelGrid>  
                            <p:inputText id="genderhidden" type="hidden" value="#{customerbean.customer.gender}" />
                            <p:inputText id="maritalstatushidden" type="hidden" value="#{customerbean.customer.maritalStatus}" />
        </ui:define>

    </ui:composition> 

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T06:20:38.273

好的，我在 f:selectItem 上找到了罪魁祸首：noSelectionOption="true"。一旦我删除它，它就可以正常工作。maritalStatus 起作用的原因是它没有 noSelectionOption 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:00:14.100

将 customerbean 设置为**@ViewScoped**

例如：

```
@ManagedBean
@ViewScoped
public class customerbean implements Serializable {

} 
```

# php - 原则 2：OneToMany 关系

> ID：12550230
> 
> 赞同：2
> 
> 时间：2012-09-23T06:29:54.273
> 
> 标签：php, orm, doctrine-orm

```
/** @Entity */  
class First
{
    /** @OneToMany(targetEntity="Second", mappedBy="parent") */
    protected $secondList;

    // access methods here
    public function __construct()
    {
       $this->secondList = new ArrayCollection();
    } 
}

/** @Entity */
class Second 
{
    /** 
     * @ManyToOne(targetEntity="First", inversedBy="secondList")
     * @JoinColumn(name="First_id", referencedColumnName="Id")
     */
    protected $parent;
} 
```

这是从类中获取`ArrayCollection $secondList`元素的问题。多对一关系工作正常。也许我在初始化持久性时做错了（因为在 SQL 基础中总是如此）。`Second``Second``First_Id``null`

```
$first = new Second();
$second = new First();
$first->getSecond()->add($second);
$em->persist($second);
$em->persist($first); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:35:43.560

您应该确保在 First class 中关闭括号。

```
/** @OneToMany(targetEntity =  "Second", mappedBy = "parent" ) */ 
```

如果这不是问题 - 是否有任何错误消息？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T07:13:13.793

[Doctrine2 文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#establishing-associations)这样说：

```
In the case of bi-directional associations you have to update the fields on both sides: 
```

这意味着您必须执行以下操作：

```
$second->setParent($first); 
```

因为`$second` **表**有外键。或者，您可以`cascade={"persist"}`为该属性添加一个选项`$first->secondList`。

# facebook - 为什么 FB Like 按钮不显示正确的喜欢计数？

> ID：12550232
> 
> 赞同：1
> 
> 时间：2012-09-23T06:30:16.743
> 
> 标签：facebook, facebook-like

当我点击我的 Like 按钮时，它确实将活动添加到我的 FB（每个屏幕截图）但计数保持为零（也是每个屏幕截图），为什么？

我检查了 Linter 工具，一切看起来都很好。

该网站是[www.FindCuro.com](http://www.FindCuro.com)

![在此处输入图像描述](../Images/4280001704bb8f3b538b88eda5fd764f.png)

这是我的代码（MVC）

```
<script src="http://connect.facebook.net/en_US/all.js#appId=@ConfigurationManager.AppSettings["FacebookAppId"]&amp;xfbml=1" type="text/javascript"></script>

<div id="fb-root"></div>
<div class="fb-like" data-href="http://www.findcuro.com" data-send="false" data-width="450" data-show-faces="true" data-layout="button_count"></div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:31:21.323

问题是like按钮。

```
<div class="fb-like" data-href="http://www.FindCuro.com" data-send="false" data-width="450" data-show-faces="false" data-layout="button_count"></div> 
```

您不应该使用“FindCuro.com”（注意大写字母）

如果你检查[https://graph.facebook.com/http://www.FindCuro.com/](https://graph.facebook.com/http://www.FindCuro.com/)你会看到两个共享 如果你检查[https://graph.facebook.com/http://www.findcuro。 com/](https://graph.facebook.com/http://www.findcuro.com/)你不会看到任何股票

Facebook 正在检查第二个。

尝试所有小写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:59:31.070

该问题与您用于类似按钮的 URL 上的页面具有由于周期性重定向而无法解析的**规范 URL**`http://www.FindCuro.com/`的事实有关：（请参见初始 URL[的调试工具的输出和](https://developers.facebook.com/tools/debug/og/object?q=http://www.findcuro.com/)[规范 URL 的](https://developers.facebook.com/tools/debug/og/object?q=http://www.FindCuro.com/)输出）

在 OpenGraph 元标记中提供小写**规范 URL应该可以解决问题。**

顺便说一句，如果您`standard`对 Like Button 使用布局，您可能会在喜欢应用程序管理员的用户时看到错误消息。无论实际喜欢的数量是否增加，都会发送有关喜欢页面的活动故事。

# java - java在Mongo中创建并启动存储过程？

> ID：12550234
> 
> 赞同：1
> 
> 时间：2012-09-23T06:30:48.650
> 
> 标签：java, mongodb, stored-procedures

为了尽量减少维护成本，我想知道是否可以通过 Java 在 Mongo 中创建和启动存储过程。

在这个存储过程中，我想通过 mapReduce 聚合一个集合并将结果存储到另一个集合中。

任何评论和帮助表示赞赏！非常感谢~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T16:50:33.567

您可以在 MongoDB 上以存储在特殊集合 db.system.js 中的 Javascript 函数的形式创建存储过程，但这通常是不可取的。存储过程对关系数据库有用的大多数原因不适用于 MongoDB。与其从 Java 调用服务器端函数，不如直接在 Java 中实现所述函数。

但是当你仍然想使用它们时，创建这样的函数被记录为“[存储函数服务器端](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside)”。要执行它们，您可以使用[DB.command()](http://api.mongodb.org/java/current/com/mongodb/DB.html#command%28com.mongodb.DBObject%29)或[DB.doEval()](http://api.mongodb.org/java/current/com/mongodb/DB.html#doEval%28java.lang.String,%20java.lang.Object...%29)。

# extjs - EXTJS 网格面板侦听器 - 从对象中检索数据

> ID：12550237
> 
> 赞同：0
> 
> 时间：2012-09-23T06:31:04.047
> 
> 标签：extjs, extjs4, gridpanel

伙计们，我对 extJS 很陌生，我希望得到你的帮助。我有这个带有听众的 Grid.Panel，我不知道我是否做对了。无论如何，我让它打印出它的属性，但我无法获取数据。这是控制台打印的内容。

```
Object { internalId=, raw={...}, data={...}, more...}

after clicking it: 
```

![见红圈](../Images/086cbdbd3cc2ea6651f1e934350be0ab.png)

用红色圈起来的“数据”。如何获取这些信息？我相信里面的“数据”是我点击某行时的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T11:01:51.783

您可以按照@sra 的建议在网格存储上添加一个负载侦听器，并遍历记录以执行另一个操作。

```
gridStore().load({
    callback : function(records, operation, success) {
                 //Iterate over each record and get data from record
                 var name = records[0].get('name');
    }}); 
```

# android - 在要启动的类中将 Intent 调度编写为静态方法是一种好习惯吗？

> ID：12550238
> 
> 赞同：2
> 
> 时间：2012-09-23T06:31:15.397
> 
> 标签：android, android-intent, coding-style

我刚刚开始 Android 开发，所以我想要一些关于代码风格的建议。`Intent`在进行调度的方法中编写调度程序对我来说似乎很好，比如

```
// in case it's not clear, names are meta-variables

public class MyService...
    ...

    public static void sendMessage(Context ctx, MyArgClass myArg) {
        Intent sendIntent = new Intent(ctx, MyService.class);
        sendIntent.setAction("send message");
        sendIntent.putExtra("my_arg", myArg);
        ctx.startService(sendIntent);
    }
} 
```

然后，任何被调用者都只是 run `MyService.sendMessage(ctx, arg)`，而不是`Intent`在他们的身体里有创建代码。

这似乎是一场胜利：当你想要 eg 时，要记住的东西更少`sendMessage`，而且你不必同步名称，比如模块`"send message"`和`"my_arg"`跨模块。但是，我在谷歌的音乐应用程序中并不经常看到他们开源，所以我想知道是否有缺点，我应该坚持惯例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:13:17.923

这是一个很好的做法。此模式可在 android 开发人员指南（[示例](http://developer.android.com/reference/android/app/DialogFragment.html#BasicDialog)）中找到

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T07:15:55.573

请允许我在更一般的情况下回答您的问题，即编程方法静态与单一，因为这些是我会考虑的替代方案。

我发现使用静态解决方案对方法、常量等进行全局访问似乎是个人喜好问题。

一种常用的替代方法是单例方法，在这种方法中，您只创建一个对象的一个​​实例并使用它来访问您的方法。因此，在您的情况下，您也可以改用 sigleton - 我没有查看您所指的 Google 代码，但如果看到 singelton 模式，我不会感到惊讶。

您可能会发现一些关于此的讨论 - 但通常单例允许您重用代码和控制对象状态比静态更容易。主要区别在于单例可以实现接口，因此您可以传递它们。

但是，在我只需要轻松访问某些实用程序方法的情况下，我更喜欢静态解决方案 - 因为它们更容易和更快地实现和使用恕我直言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T07:31:08.263

这就像有一个 Utility 方法来处理这个问题。

在`GCM`来自 Android 的示例代码中，他们做了类似的事情。

# windows - 如何读取和写入/写入文本文件？

> ID：12550245
> 
> 赞同：-8
> 
> 时间：2012-09-23T06:33:05.483
> 
> 标签：windows, mfc, atl

请更正以下代码：仅。

文件已包含条目：第一行用户名；第二行密码。

写入第三行所需的复选框状态，并且只需要读取或更改文件中的复选框状态值。

目前，如果复选框状态值已经有一个值，则此代码正在工作，然后它正在覆盖，否则 UI 挂起。

```
WriteCheckStatusToFile(BOOL& locVar)
{
    FILE *l_pFile = NULL;
    CString l_strRememberCheck;
    l_strRememberCheck = GetExePath() + _T("password");

    CString sVar;
    sVar.Format(_T("%d"),locVar);
    if(NULL != (l_pFile = fopen(l_strRememberCheck, _T("r+"))) )
    {
        int count = 0;
        char c;
        while(count != 2)
        {
            if((c = fgetc(l_pFile)) == '\n') count++;
        }
        fseek(l_pFile,ftell(l_pFile),SEEK_SET);
        fprintf(l_pFile, sVar);
    }
    l_strRememberCheck.ReleaseBuffer();
    fclose(l_pFile);
} 
```

在此先感谢大家！
山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:25:46.423

这条线

```
fprintf(l_pFile, sVar); 
```

看起来不对。我认为应该是

```
fprintf(l_pFile, "%s\n", (LPCTSTR) sVar); 
```

如果文件的换行符少于两个，则循环可能会变为无限：

```
while(count != 2) 
```

我认为应该是：

```
while( (count < 2) && ( ! feof(l_pFile) ) && ( c != EOF ) ) 
```

可能与您的错误无关，但是 - 至少对于此代码片段 - 不需要调用 CString::ReleaseBuffer()，因为您没有调用 CString::GetBuffer()。

```
l_strRememberCheck.ReleaseBuffer(); 
```

此行可能是不必要的，因为 fseek() 似乎指向文件指针所在的位置：

```
fseek(l_pFile,ftell(l_pFile),SEEK_SET); 
```

如果两行文件没有以 '\n' 结尾，您需要像这样打印：

```
 if ( count == 2 )
   {
      fprintf(l_pFile, "%s\n", (LPCTSTR) sVar);
   }
   else
   {
      fprintf(l_pFile, "\n%s\n", (LPCTSTR) sVar);
   } 
```

# mysql - mysql用MAX（值）连接两个表

> ID：12550252
> 
> 赞同：0
> 
> 时间：2012-09-23T06:34:35.857
> 
> 标签：mysql, join

我有这个 mysql 代码女巫工作得很好

```
SELECT uid , MAX(value) AS bidvalue FROM auction 
WHERE pid = '$pid' and max_bid=0 
GROUP BY uid 
ORDER BY bidvalue DESC 
LIMIT 1 
```

如何在 users.id=auction.uid 上的用户表中加入此选择？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:39:19.710

我在这里看不到任何魔法：

```
SELECT uid, users.name, MAX(value) AS bidvalue
FROM auction 
INNER JOIN users ON users.id = auction.uid
WHERE pid = '$pid' and max_bid=0 
GROUP BY uid 
ORDER BY bidvalue DESC 
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:46:52.413

您可以使用连接，您的查询可能看起来像

```
SELECT uid, users.name, MAX(value) AS bidvalue
FROM auction 
INNER JOIN users ON users.id = auction.uid
WHERE pid = '$pid' and max_bid=0 
GROUP BY uid 
ORDER BY bidvalue DESC 
LIMIT 1 
```

或者

```
SELECT uid, users.name, MAX(value) AS bidvalue
FROM auction 
OUTER JOIN users ON users.id = auction.uid
WHERE pid = '$pid' and max_bid=0 
GROUP BY uid 
ORDER BY bidvalue DESC 
LIMIT 1 
```

[根据您的需要加入详细信息](https://stackoverflow.com/questions/38549/difference-between-inner-and-outer-join)

# python - Python - 使用 Popen 打开 gnome 编辑器

> ID：12550253
> 
> 赞同：2
> 
> 时间：2012-09-23T06:34:38.537
> 
> 标签：python, subprocess, gedit

我想使用 Python 启动`gedit`（默认 gnome 文本编辑器）并打开一个文件。我可以这样做，但是当从 Python 调用时，`gedit`总是会打开一个名为“Untitled Document 1”的额外选项卡，并带有某种旋转刷新图标。

![在此处输入图像描述](../Images/b4a366e70d8b337a7ff237e5419e9b21.png)

我从

```
subprocess.call(["gedit", pathToFile]) 
```

但这阻止了主进程，所以我现在正在使用

```
Popen(["gedit", pathToFile]) 
```

这两个命令都会导致相同的不良行为。

如果我像这样从命令行调用 gedit，则不会发生这种情况**：**

```
gedit pathToFile 
```

问题的Python方面有什么我遗漏的吗？

**更新**：从接受的答案中，我想出了一个可行的解决方案：

```
Popen(["gedit", pathToFile], stdin=open(os.devnull, 'r')) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T06:51:17.707

我的猜测是它试图从标准输入或类似的输入中读取。

尝试添加`stdin=open(os.devnull, 'r')`到`Popen`构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:05:47.707

我无法复制 Popen 在我的 Ubuntu 12.04 系统上运行 Python 2.7.3 的任何问题。以下是部分抄本，行编号以供参考。在打印第 3 行或第 5 行之前，python 解释器显然被阻塞了；当我退出 gedit 时，打印了 0。所有的 gedit 调用都开始正常，并且没有一个带有 Popen 的调用阻止了解释器。有些文件在被 gedit 之前就已经存在，有些则没有。使用`shell=True`with subprocess.call （未显示的示例）没有任何区别，即它被阻塞了。

```
 1  >>> import subprocess
 2  >>> subprocess.call(['gedit','vv'], stdin=None, stdout=None, stderr=None, shell=False)
 3  0
 4  >>> subprocess.call(['gedit','vv'])
 5  0
 6  >>> pid = subprocess.Popen(['gedit','vv']).pid
 7  >>> pid
 8  3434
 9  >>> pid = subprocess.Popen(['gedit','uu']).pid
10  >>> pid
11  3442
12  >>> subprocess.Popen(['gedit','ww'])
13  <subprocess.Popen object at 0x1887c10>
14  >>> subprocess.Popen(['gedit','yy'])
15  <subprocess.Popen object at 0x1847c10> 
```

# jquery - 如何动态获取jquery数据表中行的特定单元格的详细信息

> ID：12550256
> 
> 赞同：3
> 
> 时间：2012-09-23T06:35:38.360
> 
> 标签：jquery, datatables

我在检索 jquery 数据表行中特定单元格的详细信息时遇到问题。我想要做的是数据表中一行的特定单元格我试图检索所有特定于它的数据并将其显示为输出

例如，从数据库中检索所有国家名称并显示在数据表的特定列中。现在我想要的是，当我单击国家名称时，应显示与其对应的所有城市。我希望它足够有意义。我需要在不刷新页面的情况下动态执行 dis 。

这是代码的一瞥：

```
$(document).ready(function() {
oTable = $('#datatables').dataTable( {
    alert("hi")
    "bProcessing": true,
    "bServerSide": true,
    "sAjaxSource": "../getcities.php",
    "aData" : "POST","getcities.php?cname="+cname
    "aoColumns": [
        { "sClass": "center", "bSortable": false },
        null,
        { "sClass": "center" },
    ]
} );

$('#datatables tbody tr td').live( 'click', function () {
    alert("hi")
    var nTr = this.parentNode.parentNode;

    // I need to display the data here in a dialog box
} );
} 
```

上面的代码可能不完全正确，因为我说我仍然是 jquery 数据表和 Ajax 的新手，这是我正在尝试的 html：

```
<div>                           
<table id = "datatables" class="display">
<thead>
    <tr>
        <th></th>
        <th>Country Name</th>
    </tr>
<thead>
<tbody>
    <?while($row=mysql_fetch_array($result)){
    <tr>                            
        <td class="center" id="cname" value="cname"><?= $row['cname']?></td>
    </tr>
    <?}}?>
</tbody> 
```

getcities.php 中的代码：

```
// Here I am trying to store all the cities corresponding to the country name in an array and returning it
<?php
 country = $_POST['cname'];
 var arr = new Array();
 arr = mysql_fetch_array(mysql_query("SELECT cityname FROM dbtable WHERE cname = '.country.'"))

return arr; 
?> 
```

由于我是 Datatables 的新手，所以我不明白如何实现这一点。我使用 PHP 作为脚本语言

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:03:26.783

试试下面的代码

```
$('#datatables tbody tr td img').live( 'click', function () {
    var iPos = oTable.fnGetPosition( this );
    if(iPos!=null){
        var aData = oTable.fnGetData( iPos );//get data of the clicked row
        var colData = aData[1];//get column data of the row
    }
} ); 
```

另外，看看这个： [How to select a row in Jquery datatable](https://stackoverflow.com/a/8254563/617373)

# php - PDO - catching when the database contraints prevent query from executing fully

> ID：12550258
> 
> 赞同：0
> 
> 时间：2012-09-23T06:35:40.653
> 
> 标签：php, mysql, pdo

I have a register.php file which takes the input from a form and tries to create a user account in a database. I have an innoDB MySQL database which has a 'UNIQUE' key added to the 'username' field of the users table. This is to prevent duplicate usernames.

Below is an extract from my php code. In my database I currently have a user called 'testUser'. However, when running the code below with `$username = testUser`, the php file returns 'Account created', even though a duplicate row is not created in the database. I would have expected there to be an exception thrown if the user already existed?

```
try{
    $stmt = $db->prepare("INSERT INTO users (username, password, salt) VALUES (:username,   :password, :salt)");
    $stmt->bindParam(':username', $username);
    $stmt->bindParam(':password', $hash);
    $stmt->bindParam(':salt', $salt);
    $stmt->execute();
}catch(PDOException $e){
    returnJSON(0,'Error creating account');
}

returnJSON(1,'Account created'); 
```

* * *

```
function returnJSON($errorCode, $message){
    $arr = array("returnCode" => $errorCode, "returnMessage" => $message);
    echo json_encode($arr);
    die();
}

 ----
try{
    $db = new PDO('mysql:host='.$host.';dbname='.$dbname, $username, $password);
}
catch(PDOException $e){
    $arr = array("returnCode" => 0, "returnMessage" => "unable to connect to server");
    echo json_encode($arr);
    die();
} 
```

My question is, how should I find out if the user's account was successfully added to the database.

PS. I do have code to query the database first and see if there exists a user with the same name before calling this code. But I'd still like to fix/understand this as well.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:43:51.940

```
catch (PDOException $er) {print("error".$er."<br />");} 
```

When you catch an Error, the flow of the program continues, try catching the Error and stopping the flow, using exit();

What I am saying is , even if an exception is caught, the following line of code should stil execute,

```
returnJSON(1,'Account created'); 
```

unless you are stopping the flow somehow. Would really appreciate if you post the entire file, including functions you are using.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:25:29.003

PDO by default has silent errors: you need to check then yourself by actually looking for them.

If you want to use exceptions, you need to tell PDO to do it. Check [http://php.net/manual/en/pdo.error-handling.php](http://php.net/manual/en/pdo.error-handling.php)

The specific code you want is

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

in the try/catch immediately after you create the connection.

# php - 从数据库存储和检索照片

> ID：12550269
> 
> 赞同：0
> 
> 时间：2012-09-23T06:38:09.957
> 
> 标签：php, mysql, html, database, photo

我正在寻找存储照片并从数据库中检索它，但我遇到了麻烦。我浏览了其他帖子，但找不到解决方案。照片正在上传到数据库，但我似乎无法将它们拉出来。另外，在 url 中，$id=0 但即使我将 $id 更改为等于相应的数据库编号，它仍然只是加载一个空白页......我知道这是很多代码，所以任何响应都会很大赞赏！！

CHOOSE_PHOTO.PHP

```
<form enctype="multipart/form-data" action="process_photo.php" method="POST">
<input type="hidden" name="MAX_FILE_SIZE" value="100000" />
Choose a file to upload: <input name="image" type="file" /><br />
<input type="submit" value="Upload File" />
</form> 
```

PROCESS_PHOTO.PHP

```
 MY_LOGIN_INFO_AND_DATABASE_CONNECTION

if ($_FILES) {
  $image_types = array 
    ("image/bmp",
    "image/jpeg",
    "image/pjpeg",
    "image/gif",
    "image/x-png"); 
 if (is_uploaded_file ($_FILES["image"]["tmp_name"])) {
   $image  = addslashes (fread 
      (fopen ($_FILES["image"]["tmp_name"], "r"), 
      filesize ($_FILES["image"]["tmp_name"])));
$file_name = $_FILES["image"]["name"];
$file_size = $_FILES["image"]["size"];
$file_type = $_FILES["image"]["type"];
if (in_array (strtolower ($file_type), $image_types)) {
  $sql = "INSERT INTO image_table "
     . "(image_type, image, image_size, image_name, image_date) ";
  sql.= "VALUES (";

  $sql.= "'{$file_type}', '{$image}', '{$file_size}', "
     . "'{$file_name}', NOW())";
  @mysql_query ($sql, $conn);

exit();
  }
 } 
} 

$id = mysql_insert_id($conn);

mysql_close($conn);

header("Location: photo_preview.php?id=$id"); 
```

PHOTO_PREVIEW.PHP

```
 MY_LOGIN_INFO_AND_DATABASE_CONNECTION

$result = mysql_query("SELECT * FROM image_table WHERE image_id=  " 
. mysql_real_escape_string($_GET["id"]), $conn);

if(!$result) die(mysql_error());

$row = mysql_fetch_assoc ($result);

  if (mysql_num_rows($result) > 0)
   {
    $row = @mysql_fetch_assoc ($result);
    $image_type = $row["image_type"];
    $image = $row["image"];
    Header ("Content-type: $image_type");
    print $image;
   } 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:11:09.373

基本上，您假设一切正常 - 但它不起作用。采取相反的方法，假设一切都会失败——因为它总是会失败。编写完成后，复制并粘贴到您的下一个项目中。然后，当发生意外情况时，您有代码可以准确地告诉您发生了什么。

几个问题：

1.  您没有正确地将条目“转义”到数据库中。您可以使用“add_slashes”使其工作，但您应该使用 mysql_real_escape_string() 来确保所有 sting 输入安全。更好的是，使用带有`PDO`or`mysqli_()`函数的准备好的语句，因为`mysql_()`函数要折旧。使用准备好的语句将自动转义字符串并使其安全。

2.  您使用 sql 插入隐藏所有错误 - '@mysql_query()'，并且不检查它是否有效。你万`if (!mysql_query()) {' then show errors (use 'mysql_error()`）。这可能是您出错的地方 - 输入失败并且您没有检查原因。

3.  您也不会检查您的“fread”和“fopen”等工作。他们可能有错误。使用 'file_get_contents()' 并检查返回值 - 它更整洁。如果它返回 false 则失败 - 显示错误以找出原因。

4.  您实际上并没有检查文件是否正确上传。检查 $_FILES["image"]["error"] 是否大于零。

5.  随着`SELECT`你假设该行已经找到 - 但如果它不是（例如，有人给你一个狡猾的 id）那么 $row 将是错误的（你有其他错误）。所以在继续之前检查 $row 是一个数组而不是 false。

6.  如果图像类型不匹配（`in_array`），则不会出现错误消息。您继续前进，使用不存在的 ID 并重定向到注定会失败的页面（参见第 5 点）。

7.  您实际上在重定向之前有“退出”。这是预期的吗？您基本上是说“如果我有一个有效的有效文件，请停止，但如果我没有有效文件，请重定向到不存在的文件...

所以 - 很多要修复。不要隐藏错误，而是在出现错误时给自己一些反馈。

# visual-studio-2010 - VS2010 永远找不到我的 DLL

> ID：12550270
> 
> 赞同：0
> 
> 时间：2012-09-23T06:38:14.780
> 
> 标签：visual-studio-2010, dll

我整天都在尝试让 VS2010 运行我的程序。如果我将它们复制并粘贴到与输出 exe 相同的文件夹中，我只能让程序找到 DLL。

**我在Linker > General**下列出了包含我需要的 DLL 的文件夹。但是运行程序仍然会给我错误，例如：

“程序无法启动，因为您的计算机中缺少 tbb_debug.dll。请尝试重新安装程序以解决此问题。”

可能出了什么问题？我正在尝试包含 2 个具有 VS2010 DLL 二进制文件的软件包；TBB（英特尔包）和 Open-CV（附带 DLL 和 LIB 文件）。对于 lib 文件，我也将它们设置为链接器输入，尽管 TBB 包不附带 vs2010 lib 文件。

我在链接器设置中输入完整路径，例如：“C:\opencv\build\common\tbb\ia32\vc10”，其中每个文件夹都包含 DLL 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:44:18.340

链接器仅查找 .lib 文件，这些文件将可执行文件“指向” dll 中函数的地址。它与您的可执行文件在哪里找到 DLL 无关。

您需要在 exe 的目录中拥有 DLL - 这是默认搜索路径，并且是最简单的解决方案。

如果您安装了需要并行配置的不同版本的 DLL，它会稍微复杂一些。然后你需要一个清单，告诉你的 exe 在哪里寻找 dll。然后将 dll 提供给 windows SxS 缓存。

# javascript - 如何通过触发函数的元素的父 div 的类名获取另一个子元素

> ID：12550274
> 
> 赞同：1
> 
> 时间：2012-09-23T06:39:32.207
> 
> 标签：javascript, jquery

我的问题听起来很简单。我有没有像这样指定的 id 和类的 div

```
<div style="position:relative; float:left">
    <input type="text" onfocus="renderCalendar(event);" size="50" id="cal" name="cal">
    <div class="wrappercal calwrapper">
        <div class="yearmonth">
            <table class="caltable"><tbody>
            <tr><th width="80%" scope="col" colspan="5">
                <select class="dtcombo year" onchange="changeCalendar()">
                    <option value="2000">2000</option>
                    <option value="2001">2001</option>
                </select>&nbsp;&nbsp;
                <select onchange="changeCalendar()" class="dtcombo month">
                    <option value="1">1</option>
                    <option value="2">2</option>
                 </select></th>
              </tr>
              </tbody>
              </table>
         </div>
     </div>
</div> 
```

页面中可能有几个类似的div

我有一个javascript函数

```
function renderCalendar(event){
    var triggerer=event.target.id; // THIS WILL GIVE THE ID OF TEXTBOX THAT TRIGGERED THIS FUNCTION.
  $("#"+triggerer).parent().children(".wrappercal").children(".yearmonth").children(".caltable").children(".year").val(); //not working
} 
```

巢是这样的

```
 Parent Div > wrappercal(div) > yearmonth(div) > caltable(table) > year(select) 
```

我的问题是使用触发该功能的文本框的父 div 的类“年份”来获取组合的值。

谁能弄清楚我哪里出错了？有什么建议么？

PS 请承担我不擅长 dom 元素。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:43:20.343

为什么不试试这个？

```
function renderCalendar(event){
    $(event.target).parent().find(".wrappercal .yearmonth .caltable .year").val(); 
} 
```

你能检查（使用`console.log(event.target)`和跟踪）目标元素真的是它应该是什么/应该在哪里吗？

**编辑**

问题是只搜索一层（深）子节点，和（ ）`children()`之间有多层。改为使用（它将通过您的节点递归搜索）。;-)`.caltable``.year``<tr><th>...``find()`

有关更多信息，请参阅[此](http://api.jquery.com/children/)内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T07:07:27.443

尝试以下

```
 function renderCalendaer(event) {

           $("#"+event.target.id).parent().find(".year").val();   

                   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T09:44:36.557

你可以试试

```
$("#"+triggerer).parent().find(".year").val() instead. 
```

# debugging - Haskell - 在 if 块中调试打印

> ID：12550276
> 
> 赞同：9
> 
> 时间：2012-09-23T06:40:42.327
> 
> 标签：debugging, haskell

我想通过打印一些东西来调试我的程序

例如，

```
isPos n 
    | n<0       = False
    | otherwise = True 
```

我想要类似的东西：

```
isPos n 
    | n<0       = False AND print ("negative")
    | otherwise = True  AND print ("positive") 
```

可以在 Haskell 中进行吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-23T12:17:45.183

正如 hammar 所说，`trace`从`Debug.Trace`模块中使用。我发现有用的提示是定义函数`debug`：

```
debug = flip trace 
```

然后你可以做

```
isPos n
  | n < 0     = False `debug` "negative"
  | otherwise = True  `debug` "positive" 
```

这样做的好处是在开发过程中很容易启用/禁用调试打印。要删除调试打印，只需注释掉该行的其余部分：

```
isPos n
  | n < 0     = False -- `debug` "negative"
  | otherwise = True  -- `debug` "positive" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-23T06:50:03.273

使用[`Debug.Trace.trace`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Debug-Trace.html#v%3atrace).

```
import Debug.Trace

isPos n 
  | n < 0     = trace "negative" False
  | otherwise = trace "positive" True 
```

# c++ - 托管 c++ vs com

> ID：12550277
> 
> 赞同：1
> 
> 时间：2012-09-23T06:40:48.787
> 
> 标签：c++, .net, com, managed-c++

嗨，我们有一个 c++ 项目（库），它必须暴露于 .net 语言或可能是其他语言（例如旧 vb，但这不是很重要）。两个选项是为项目编写 COM 包装器或托管 c++ 包装器。选择哪一个？

例如，使用托管 c++ 的一大优势是使用 .net 集合类作为参数传递，而不是在 COM 中使用极其复杂的集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:20:46.847

术语“COM 包装器”没有多大意义。如果想创建一个 COM 类，没有理由首先创建一个普通的 C++ 类，然后创建一个包装它并模仿它的 COM 类。这是 COM 优于托管 C++ 的一个优势：在托管 C++ 中，您必须创建一个普通 C++ 类（用于非托管客户端，除非您没有）和一个托管包装类（用于托管客户端）。

在我看来，何时应该使用 COM 或托管 C++ 进行互操作的决定因素很简单：

如果您想创建一个全新的非托管类（不是包装器），可以由任何语言的客户端使用，请使用 COM。

如果要创建一个全新的类（不是包装器），在其中混合大量托管和非托管代码，请使用托管 C++。

所以你看，“包装器”这个词不应该出现在你的设计中。包装很烂:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:02:00.757

如果您的 COM 集合非常复杂，您可能需要重新考虑如何处理 COM 集合管理。那里完全不同的问题，但话虽这么说......

您提到旧 VB 不是很重要，这对您的回答比您想象的更重要。旧的 VB 不会说 .NET，但它会说 COM 非常好。如果您预见到必须走这条路，那将是对 COM 方面的重大推动。

我不是托管 C++ 的粉丝，因为它是您可能遇到的最不可移植、难以管理、难以*阅读的语言方言。*但是，如果您的库中的核心代码足够简单，您可能会通过合理的努力在托管 C++ 中启动并运行它。库越动态，移植到 .NET 管理就越困难。然而...

一旦它在那里，COM 包装器可以让您回到您的 COM 客户端（如旧版 VB），而不会出现太多问题，前提是您在进行移植时做出了明智的选择，并在此过程中保持东西易于包装。

这就是我能说的最迂回的方式（带着极大的痛苦）托管 C++ 可能是你最好的选择，但在放弃那个挑战之前，我会认真对待它。

# facebook-social-plugins - Facebook评论以较低的宽度中断

> ID：12550278
> 
> 赞同：0
> 
> 时间：2012-09-23T06:41:02.543
> 
> 标签：facebook-social-plugins, facebook-comments

如果我使用较低的宽度（在本例中为 380 像素）来阻止 Facebook 评论，则内容会以某种方式被破坏。

由于不再可能使用自定义 CSS，因此我不知道如何解决此问题。

有人吗？

这是一个屏幕截图：

![FB评论](../Images/2346b4ccd8d72c32a063ca3827e64124.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:46:47.717

这不是您可以“修复”的事情，因为您无法控制评论插件框架的内容。

[实际上，根据文档](https://developers.facebook.com/docs/reference/plugins/comments/)，这是众所周知且记录在案的行为：

> **width** - 插件的宽度（以像素为单位）。建议的最小宽度：400 像素。

# php - 如何通过 url 识别 youtube 或 vimeo 网站？

> ID：12550279
> 
> 赞同：1
> 
> 时间：2012-09-23T06:41:24.670
> 
> 标签：php, drupal-6

我在 drupal 中创建了一个表单，其中有一个名为“URL”的字段。现在该站点的用户将在此处输入任何 url。现在通过该用户输入的网址，我只想验证它是否是正确的 youtube 或 vimeo 网址。示例如下：

网址：**www.youtube.com/video_Id** 网址：**www.vimeo.com**

我可以通过使用 strstr 或 preg_match 等 php 函数轻松识别它。但假设有人输入他的博客的 URL，其中讲述了 youtube 可能如下 - **www.learnyoutube.com**或**www.mysite/about_youtube.com**等。

在上述情况下，我的验证将失败，因为 url 字符串包含 youtube。

所以最后我只想知道' **youtube** '和' **vimeo** '视频的有效格式是什么，以便我可以相应地应用逻辑。

如果有人也有其他想法，请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-07T23:33:10.507

我一直在跨多个项目调整这些正则表达式以匹配 Youtube 和 Vimeo URL。它们都非常适合匹配，您可以使用 PHP`preg_match`来获取整个 URL 或仅获取视频 ID。我在我的项目中使用它从视频 URL 中获取 ID，并格式化比默认嵌入提供的更好的 Youtube 播放器。

```
/**
 * Fetches the ID of a Vimeo video given a URL
 *
 * @param string $source  Vimeo URL
 *
 * @return mixed          A video ID if matched, otherwise false
 */
function video_id_from_vimeo_url($source)
{
    $pattern = "/^(?:(?:https?:\/\/)?(?:www\.)?vimeo\.com.*\/([\w\-]+))/is";
    $matches = array();
    preg_match($pattern, $source, $matches);
    if (isset($matches[1])) return $matches[1];
    return false;
}

/**
 * Fetches the ID of a YouTube video given a URL
 *
 * @param string $source  YouTube URL
 *
 * @return mixed          A video ID if matched, otherwise false
 */
function video_id_from_youtube_url($source)
{
    $pattern = '/^(?:(?:(?:https?:)?\/\/)?(?:www\.)?(?:youtu(?:be\.com|\.be))\/(?:watch\?v\=|v\/|embed\/)?([\w\-]+))/is';
    $matches = array();
    preg_match($pattern, $source, $matches);
    if (isset($matches[1])) return $matches[1];
    return false;
}

/**
 * Generate a URL to a YouTube video with a YouTube video ID
 *
 * @param string $id     YouTube video ID
 * @param array $params  Query params to send to video
 *
 * @return string        A YouTube URL
 */
function youtube_video_url_with_id($id, array $params = array())
{
    $query = empty($params) ? '' : '?' . http_build_query($params);
    return esc_url("//youtube.com/embed/{$id}{$query}");
}

/**
 * Generate a URL to a Vimeo video with a Vimeo video ID
 *
 * @param string $id     Vimeo video ID
 * @param array $params  Query params to send to video
 *
 * @return string        A Vimeo URL
 */
function vimeo_video_url_with_id($id, array $params = array())
{
    $defaults = array(
        'color'    => 'ffffff',
        'title'    => 0,
        'byline'   => 0,
        'portrait' => 0,
    );
    $params = array_merge($defaults, $params);

    $query = empty($params) ? '' : '?' . http_build_query($params);
    return "//player.vimeo.com/video/{$id}{$query}";
} 
```

应匹配所有形式的 Youtube URL。示例使用：

```
$url = "https://www.youtube.com/watch?v=buNGJm_s0XE";
$id = video_id_from_youtube_url($url); // buNGJm_s0XE

$url = "http://youtu.be/buNGJm_s0XE";
$id = video_id_from_youtube_url($url); // buNGJm_s0XE

$fmt_url = youtube_video_url_with_id($id); 
```

或 Vimeo 网址：

```
$id = video_id_from_vimeo_url('https://vimeo.com/ondemand/afilmaboutcoffee/112360104'); // 112360104
$id = video_id_from_vimeo_url('https://vimeo.com/112360104'); // 112360104 
```

我使用这些函数和正则表达式的组合来匹配正确的格式化程序，然后输出一个漂亮的视频。在我最近的 Ember 应用程序中，我有一个 Javascript 组件，它观察 URL 的变化，然后更新 HTML 输出以显示视频的预览。使用与 PHP 版本相同的 RegEx。像这样的东西（咖啡脚本）：

```
 YOUTUBE_EXPR = /^(?:(?:(?:https?:)?\/\/)?(?:www\.)?(?:youtu(?:be\.com|\.be))\/(?:watch\?v\=|v\/|embed\/)?([\w\-]+))/i
  VIMEO_EXPR   = /^(?:(?:https?:\/\/)?(?:www\.)?vimeo\.com.*\/([\w\-]+))/i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T07:00:59.057

您可以只匹配url**开头的域部分**

```
preg_match('#^((http://)|(https://)){0,1}(www\.){0,1}youtube\.com#', $url) 
```

这就是这个 preg 的工作原理：

```
^ - everything after this should be at the very beginning
( - start sub pattern which can be "http://" or "https://"
   (http://)
   | - OR       
   (https://)
) - end subpattern 
{0,1} - look for 0 to 1 occurrences of the previous subpattern
(www\.){0,1} - look for 0 to 1 occurrences of "www."
youtube\.com - look for "youtube.com" 
```

它将匹配以以下开头的任何内容：

```
http(s)://www.youtube.com
http(s)://youtube.com
www.youtube.com
youtube.com 
```

编辑：JavaScript 版本：

```
var site= 'http://www.youtube.com';
var match = site.match(/^((http:\/\/)|(https:\/\/)){0,1}(www\.){0,1}youtube\.com/); 
```

`match``null`如果字符串匹配或不匹配，将有一个匹配值数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T15:06:49.647

我认为您正在使用嵌入字段。如果是，则嵌入将自动验证正确的 youtube 或视频（您必须检查配置页面上的站点）url。如果否，那么 Pinetree 已经正确解释了它，所以使用它。

# java - 如何在 Java 中编写队列

> ID：12550284
> 
> 赞同：0
> 
> 时间：2012-09-23T06:42:53.457
> 
> 标签：java, queue

我正在尝试在java中创建一个队列。

问题是我不知道如何从数组中删除（？）一个值，即我出列的索引值。

这是我的代码。front() 方法是出列部分。我使用 iter_ 设置当前索引位置。但是正如您所看到的，尽管该值仍保留在数组中，但它使正确的值出队:(

```
public class IntQueue {

    private int[] items_;
    private int top_;
    private int capacity_;
    private int iter_;

    public IntQueue(int capacity)
    {
        if(capacity <=0) capacity = 10;

        capacity_ = capacity;
        top_=0;
        count_ = 0;
        iter_=0;

        items_= new int[capacity_];
    }

    public void push_back(int value)
    {
        if(top_>= capacity_)
            overflow();

        items_[top_++]=value;
        count_++;
    }

    public int front()
    {
        if(top_<=0)
            return 0;

        int temp=0;
        temp=items_[iter_];

        count_--;
        iter_++;
        return temp;

    }

    public IntQueue clone()
    {
        IntQueue result = new IntQueue(capacity_);

        for(int i=0 ; i<top_; ++i)
        {
            result.push_back(items_[i]);

        }

        /*for(int i=0 ; i<top_ ; ++i)
        {

            result.items_[i] = items_[i];
        }*/

        return result;

    }

    public void log()
    {

        for(int i=0 ; i <top_; ++i)
        {
            System.out.print(items_[i]);
            if(i<top_ -1)
                System.out.print(", ");
        }
        System.out.println();
        }

    }

    private void overflow()
    {
        int[] newItem = new int[capacity_*2];

        for(int i=0 ; i <top_; ++i)
            newItem[i] = items_[i];
        items_=newItem;
        capacity_ *=2;

    }

    public static void main(String args[])
    {
        IntQueue queue = new IntQueue(2);

        System.out.println("queue push 3: "); queue.push_back(3);
        System.out.println("queue push 2: "); queue.push_back(2);
        System.out.println("queue push 1: "); queue.push_back(1);

        System.out.print("queue log: "); queue.log();

        System.out.println("front " + queue.front());
        System.out.println("front " + queue.front());

        System.out.print("queue log: "); queue.log();

        System.out.println("queue push 12: "); queue.push_back(12);
        System.out.println("queue push 11: "); queue.push_back(11);
        System.out.println("queue push 21: "); queue.push_back(21);
        System.out.println("queue push 31: "); queue.push_back(31);

        System.out.print("queue log: "); queue.log();

        System.out.println("front " + queue.front());
        System.out.println("front " + queue.front());

        System.out.print("clone queue log: "); queue.clone().log();

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T06:51:23.740

关于您的实施，我不明白的是：

*   在您使用的前面方法中`iter_`，但没有其他地方。到底有什么好处呢？
*   如果您没有使用某种变量来跟踪已删除的内容而没有实际删除它，从技术上讲，您需要将数组的所有项目向左移动一个位置，这样第一个项目就消失了。然而，这是一个 O(N) 操作。
*   使用链表而不是数组来实现队列更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T06:46:18.450

使用数组构建队列时，您可以创建一个指向数组头部的**循环“指针”**，您可以使用它来检索顶部。

简单地通过增加这个循环指针来从数组中弹出。

维护一个`int`变量：`top`，一旦你需要弹出一个元素`top = (top + 1) % items_.length`

使用 检索头部很简单`items_[top]`。

确保您防止弹出不存在的元素（从空数组中弹出）。
您可能还需要维护`size`队列大小的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-02T00:46:00.670

下面我分享我提出的简单线程安全 FIFO 队列的解决方案：D

```
public class Queue extends Object {

    private int numElements;

    private Node first;
    private Node last;

    /**
     * Helper linked list class 
     */
    private static class Node {
        private Object item;
        private Node next;
    }

    /**
     * Creates a new Queue object. 
     */
    public Queue() {
        numElements = 0;
        first = last = null;
    }

    /**
     * Puts an object at the end of the queue.
     * 
     * @param object 
     */
    public void putObject(Object object) {

        synchronized (this) {

            Node newNode = new Node();
            newNode.item = object;
            newNode.next = null;

            if ( numElements == 0 ) {
                first = last = newNode;
            } else {
                last.next = newNode;
                last = newNode;
            }

            numElements += 1;
        }
    }

    /**
     * Gets an object from the beginning of the queue. The object is removed
     * from the queue. If there are no objects in the queue, returns null.
     */
    public Object getObject() {

        synchronized (this) {

            Object item = null;

            if ( numElements > 0 ) {

                item = first.item;
                first = first.next;

                numElements -= 1;

                if (numElements == 0) {
                    last = null;
                }
            } 

            return item;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T06:49:36.100

当您设计一个队列时，您需要确定优先级，例如您将如何添加和删除元素。您可以通过此链接并以类似的方式实现它。 [先进先出](http://en.wikipedia.org/wiki/FIFO)

一个典型的例子是：

```
 import java.util.Iterator;
import java.util.LinkedList;
import java.util.Queue;

public class QueueExample {

    public static void main(String[] args) {

        Queue<String> qe=new LinkedList<String>();

        qe.add("b");
        qe.add("a");
        qe.add("c");
        qe.add("e");
        qe.add("d");

        Iterator it=qe.iterator();

        System.out.println("Initial Size of Queue :"+qe.size());

        while(it.hasNext())
        {
            String iteratorValue=(String)it.next();
            System.out.println("Queue Next Value :"+iteratorValue);
        }

        // get value and does not remove element from queue
        System.out.println("Queue peek :"+qe.peek());

        // get first value and remove that object from queue
        System.out.println("Queue poll :"+qe.poll());

        System.out.println("Final Size of Queue :"+qe.size());
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T06:49:41.277

您不能从像列表这样的数组中删除元素。您需要将值向上移动并将数组的最后一个索引设置为空。看一下实现`Queue.remove()`方法的java类的源码。例如以下是来自`removeAt(int index)`方法的代码`ArrayBlockingQueue`。

```
void removeAt(int i) {
        final E[] items = this.items;
        // if removing front item, just advance
        if (i == takeIndex) {
            items[takeIndex] = null;
            takeIndex = inc(takeIndex);
        } else {
            // slide over all others up through putIndex.
            for (;;) {
                int nexti = inc(i);
                if (nexti != putIndex) {
                    items[i] = items[nexti];
                    i = nexti;
                } else {
                    items[i] = null;
                    putIndex = i;
                    break;
                }
            }
        }
        --count;
        notFull.signal();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-23T06:51:10.957

首先，你不能从数组中删除一个项目，你可以覆盖它。您可以使用 a`List`代替。

正如阿米特的回答所指出的那样，另一种选择是使用循环队列。

使用数组的简单解决方案是：

```
int queue[SIZE];
int first = 0;
int last = 0;

void enque(int i) {
    if(last == SIZE)
        throw new RuntimeExeption("Queue is full");
    queue[last++] = i;
}

int deque() {
    if(first == last)
        throw new RuntimeExeption("Queue is empty");
    return queue[first++];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-23T06:46:22.480

检查这个：它有`enqueue`和`dequeue`方法：

```
 import java.io.*;  
 import java.lang.*;  
 class clrqueue  
 {  
  DataInputStream get=new DataInputStream(System.in);  
  int a[];  
  int i,front=0,rear=0,n,item,count=0;  
  void getdata()  
  {  
  try  
   {  
   System.out.println("Enter the limit");  
   n=Integer.parseInt(get.readLine());  
   a=new int[n];  
   }   
  catch(Exception e)  
   {  
   System.out.println(e.getMessage());  
   }  
  }  
  void enqueue()  
  {  
   try  
   {  
   if(count<n)  
    {  
    System.out.println("Enter the element to be added:");  
    item=Integer.parseInt(get.readLine());  
    a[rear]=item;  
     rear++;  
    count++;  
    }  
   else  
    System.out.println("QUEUE IS FULL");  
   }  
  catch(Exception e)  
   {  
   System.out.println(e.getMessage());  
   }  
  }  
  void dequeue()  
  {  
   if(count!=0)  
    {  
    System.out.println("The item deleted is:"+a[front]);  
    front++;  
    count--;  
    }  
   else  
    System.out.println("QUEUE IS EMPTY");  
  if(rear==n)  
   rear=0;  
  }  
  void display()  
  {  
   int m=0;  
   if(count==0)  
   System.out.println("QUEUE IS EMPTY");  
   else  
   {  
   for(i=front;m<count;i++,m++)  
   System.out.println(" "+a[i]);  
   }  
  }  
 }  
 class Myqueue  
 {  
  public static void main(String arg[])  
  {  
  DataInputStream get=new DataInputStream(System.in);  
  int ch;  
  clrqueue obj=new clrqueue();  
  obj.getdata();  
  try  
  {  
   do  
   {  
   System.out.println(" 1.Enqueue  2.Dequeue  3.Display  4.Exit");  
   System.out.println("Enter the choice");  
   ch=Integer.parseInt(get.readLine());  
   switch (ch)  
   {  
   case 1:  
       obj.enqueue();  
      break;  
   case 2:  
      obj.dequeue();  
      break;  
   case 3:  
      obj.display();  
      break;  
   }  
   }  
   while(ch!=4);  
  }  
  catch(Exception e)  
  {  
  System.out.println(e.getMessage());  
  }  
  }  
 } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-25T07:57:43.893

这是我实现的代码，在我的系统中运行良好。

```
import java.util.Arrays;

public class Queue {

public int[] queue = new int[3];

int head = -1, tail =-1;

public void enqueue(int N){
    if(tail == (queue.length-1))
        queue = Arrays.copyOf(queue,2*queue.length);
    if(head == -1){
        head++;
        tail++;
        queue[head] = N;
    }
    else {
        tail++;
        queue[tail] = N;
    }

}

public int dequeue(){
    if(head == -1)
        throw new IllegalStateException("Cannot dequeue if queue is empty");
    int firstItem = queue[head];
    if (head == tail) {
        head = -1;
        tail = -1;
    }
    else
        head++;
    return firstItem;
}

public void display(){
    for (int i = head; i<= tail ; i++){
        System.out.println("Display: " + queue[i]);
    }
 }
}
public class Main {

public static void main(String[] args) {

    Queue queue = new Queue();
    queue.enqueue(10);
    queue.enqueue(20);
    queue.enqueue(30);
    queue.enqueue(40);
    queue.display();
    int dequeue = queue.dequeue();
    System.out.println(dequeue);
    queue.display();
    int dequeue1 = queue.dequeue();
    System.out.println(dequeue1);
    queue.display();
 }
} 
```

# javascript - console.log 不适用于 nodejs socket.io 项目？

> ID：12550292
> 
> 赞同：0
> 
> 时间：2012-09-23T06:44:05.577
> 
> 标签：javascript, node.js, socket.io

这是关于以下小型演示项目： [https ://github.com/lockerfish/nodejs-socket-io-chat/blob/master/chat.js](https://github.com/lockerfish/nodejs-socket-io-chat/blob/master/chat.js)

有一个我永远无法触发的 console.log（chat.js 的第 32 行）。我也无法让任何其他 console.log 输出任何内容。聊天服务器按预期工作......但我根本无法让控制台日志工作。很简单，没有任何东西可以输出到控制台，期间。

为什么会这样？它与nodejs有关吗？也许与socket.io？显然我是新手，但一般来说不是javascript。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:32:00.380

我认为这只是您在 Web 浏览器中而不是在终端中寻找 console.log 输出。当我尝试它时，它工作得很好。

节点运行的脚本中的所有 console.logs 都会输出到启动脚本的窗口/终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-13T05:54:56.083

最后对我没有任何作用，要记录输出，我最终不得不将其发送给客户端并在那里记录。

```
server
socket.emit('test', logMessage)

client
socket.on('test', message=>{
console.log(message)
}) 
```

# c# - 如何使用 VSTO 和 MEF 解决 ServiceLocator.Current 为空

> ID：12550297
> 
> 赞同：4
> 
> 时间：2012-09-23T06:44:49.077
> 
> 标签：c#, .net, prism, mef, service-locator

在 VSTO 项目中使用 MEF 并定义容器如下

```
 var catalog = new AggregateCatalog();
        catalog.Catalogs.Add(new AssemblyCatalog(this.GetType().Assembly));
        catalog.Catalogs.Add(...);

        container = new CompositionContainer(catalog);
        container.SatisfyImportsOnce(this); 
```

除了代码使用的地方，使用各种库都运行良好

```
 ServiceLocator.Current.GetInstance<MyInterface>() 
```

这当然会引发 NullReferenceException

考虑到 ServiceLocator 在它自己的 dll 中，想知道如何连接它，或者它甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T15:41:01.143

好的，你可以试试这个，你定义你的容器：

```
var mefAdapter = new MefServiceLocatorAdapter(container);
ServiceLocator.SetLocatorProvider( () => mefAdapter); 
```

MefServiceLocatorAdapter 位于 Microsoft.Practices.Prism.MefExtensions 命名空间中。

****编辑：**
但请记住，使用 ServiceLocator 被认为是一种反模式，并且违背了 IoC/DI 的目的。

# iphone - Mobile Safari iOS 6.0 在键盘显示时固定定位

> ID：12550298
> 
> 赞同：5
> 
> 时间：2012-09-23T06:45:15.940
> 
> 标签：iphone, css, ios, mobile, safari

如果您将固定位置的 div 设置为屏幕底部，则该 div 在显示虚拟键盘时不会停留在底部。它会随着页面高度的增加而向上移动。这个问题在 iOS 5 中不会发生，因为 div 继续保持在底部，就像它应该的那样。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:39:33.243

您可以在键盘处于活动状态时简单地隐藏固定的 div 吗？

```
$("#text_field").focus(function(){
  $("#fixed_div").hide();
});

$("#text_field").blur(function(){
  $("#fixed_div").show();
}); 
```

# iis-7 - servicestack 上的身份验证在本地和 iis7 上工作，但在 iis6 上失败

> ID：12550300
> 
> 赞同：2
> 
> 时间：2012-09-23T06:45:16.143
> 
> 标签：iis-7, iis-6, authorization, servicestack

我有

1.  实现了一个基本的servicestack-service
2.  用 [Authenticate(ApplyTo.All)] 装饰它
3.  设置获得基本身份验证所需的最低配置（[请参阅此](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)）

该服务在本地运行时受到很好的保护，在 IIS7 服务器上类似 - 但是当部署到 IIS6 时，我无法访问该服务。它不断询问用户名/密码 - 但它不会接受正确的组合。

到目前为止，我已经尝试了以下没有任何运气

1.  检查服务器事件日志是否有错误（无错误/警告）
2.  将 customlocation 从 /api 更改为 /api.ashx（无变化）
3.  将用户名/密码更改为更复杂的组合（无更改）
4.  实现了一个自定义凭据身份验证提供程序（基于 BasicAuthProvider）（没有变化）

谁能建议我接下来可以做什么？

# local-storage - 如何使用 removeitem 删除本地存储值的特定部分？

> ID：12550301
> 
> 赞同：0
> 
> 时间：2012-09-23T06:45:34.330
> 
> 标签：local-storage

我有一个本地存储如下

Key0 为键，其值为**{"fav1,fav2,fav3,fav4,fav5"}**

如果我使用 localstorage.removeitem('key0')，整个值将被完全删除

**我如何使用removeitem**函数专门删除 fav1 或 fav2 等，或者有什么简单的方法可以删除本地存储的特定部分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:32:19.110

没有简单的方法可以做到这一点，因为您存储在特定键下的值只是一个字符串。因此，如果您存储`"fav1,fav2,fav3,fav4,fav5"`在 key 下`key0`，那么这个值就像任何其他字符串一样（例如`foobar`）。如果要更改存储在 localStorage 中的字符串，您必须 1) 从 localStorage 中读取，2) 手动更改，然后 3) 将其存储回 localStorage 下的同一键。

通常这样做的方式是使用 JSON 序列化和反序列化：

```
key = "key0";
value = JSON.stringify(["fav1", "fav2", "fav3", "fav4", "fav5"]);
// value is now the JSON string representing the array
localStorage.setItem(key, value);

newValue = JSON.parse(localstorage.getItem(key))
// newValue is now an array with the values fav1, fav2, ... so we can manipulate it and store it back
newValue.pop();
newValue = JSON.stringify(newValue);
localStorage.setItem(key, newValue); 
```

# php - 避免sql注入的PHP代码

> ID：12550304
> 
> 赞同：-2
> 
> 时间：2012-09-23T06:45:41.403
> 
> 标签：php, sql, code-injection

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

这是我的代码

```
$user_name = "admin";
$password = "123456";
$database = "jbit";
$server = "localhost";
$id = $_POST['id'];
$db_handle = mysql_connect($server, $user_name, $password);
$db_found = mysql_select_db($database, $db_handle);

if ($db_found) {

$SQL = "SELECT * FROM jbit WHERE htno='$id'";
$result = mysql_query($SQL);
$sum = "SELECT htno, SUM(tm) AS tech, ROUND(SUM(tm)/7.5, 2) AS divi, SUM(credits) AS cred , SUM(CASE WHEN credits <= 0 THEN 1 ELSE 0 END) AS log,
SUM(CASE WHEN credits > 0 THEN 1 ELSE 0 END) AS pass, SUM(CASE WHEN em >= 0 THEN 1 ELSE 0 END) AS atm, SUM(CASE WHEN em >= -2 THEN 1 ELSE 0 END) AS tot
FROM jbit WHERE htno='$id'";
$result1 = mysql_query($sum); 
```

请帮助我确保此代码的安全，以便我可以避免 SQL 注入

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T06:53:40.370

好吧，似乎人们对您投了反对票，因为您在解决问题方面表现出很少的努力。如果您想免受注入攻击，则必须使用带有[准备好的语句](http://php.net/manual/en/pdo.prepare.php)的 mysqli 或 PDO API 。MySQL API 总是容易受到注入的影响，这就是不建议使用它的原因。

看起来您的应用程序还处于早期阶段，所以我建议重构以使用更好的 API，如[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T06:48:39.903

更好的方法是

1.  [mysqli_query()](http://php.net/manual/en/mysqli.query.php)
2.  [PDO::查询（）](http://php.net/manual/en/pdo.query.php)

您可以使用下面的功能，但我/我们建议您不要使用功能，因为`mysql_*` 现在不再由社区维护和更新。

它只为你的知识

```
 $id = mysql_prep($_POST['id']);

function mysql_prep($value)
{
    $magic_quotes_active = get_magic_quotes_gpc();
    $new_enough_php = function_exists("mysql_real_escape_string"); // i.e. PHP >= v4.3.0
    if ($new_enough_php) { // PHP v4.3.0 or higher
        // undo any magic quote effects so mysql_real_escape_string can do the work
        if ($magic_quotes_active) {
            $value = stripslashes($value);
        }
        $value = mysql_real_escape_string($value);
    } else { // before PHP v4.3.0
        // if magic quotes aren't already on then add slashes manually
        if (!$magic_quotes_active) {
            $value = addslashes($value);
        }
        // if magic quotes are active, then the slashes already exist
    }
    return  $value ;
} 
```

**好读**

[在 PHP 中防止 SQL 注入的最佳方法是什么？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-23T06:50:40.093

```
$id = mysqli_real_escape_string(($_POST['id'])); 
```

使用 mysql_real_escape_sting 过滤每个输入。

如果这不起作用，请尝试使用已弃用的替代品 mysql_real_escape；

# asp.net - 业务逻辑和业务实体有什么区别？

> ID：12550305
> 
> 赞同：1
> 
> 时间：2012-09-23T06:45:41.863
> 
> 标签：asp.net, projects-and-solutions, crud

我在每个项目中的基本解决方案结构是：

*   Dal - 数据访问层
*   业务逻辑分为两部分，一是业务实体，二是业务逻辑

因此，在我目前的实践中，我的实体仅包括数据成员和属性，而不包括 CRUD 操作。将 CRUD 操作放在 Entity 中总是感觉不对。我的想法是..

*   哪个实体删除自己没关系？
*   哪个实体将自己添加到数据库中没关系？

因此，我将 CRUD 操作移至另一个代表我的业务逻辑的库（类）。

例如，假设我们有一个 foo 实体

```
public class Foo
{
    //Data Members
    private int _id;
    private string _Name;

    //Properties
    public int ID { get; set; }
    public string Name { get; set; }
} 
```

因此，对于这个实体，我将创建一个包含所有 CRUD 操作的 FooLogic 库（类），例如：

*   添加新实体
*   删除实体
*   获取实体列表
*   更新实体等等..

所以我要问的是：

1.  不将 CRUD 操作放在实体对象中是正确的做法吗？
2.  如果是这样，我当然应该在“打印详细信息”旁边放入实体自己的哪些方法
3.  每个重要实体都有业务逻辑库（类）可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:43:00.457

我不能说在任何情况下都是绝对正确的（因为什么都不是，但也因为我不是一个真正的“企业”-y 开发人员），但是......

1.  数据库/实体操作，例如插入和更新，通常由封装每个数据库操作的 Repository 类处理。存储库方法接受或返回表示数据库记录（或记录，如果您有良好的 ORM）的实体类对象。实体对象应该是 POCO 并且不包含将自身直接绑定到数据库的逻辑 - 这允许您将默认存储库实现替换为模拟，这使得测试变得更加容易。
    *   请注意，在 .NET 世界中，您的 EF`DbContext`已经是一个存储库。您不需要自己重新实现存储库模式。
2.  仅对实体对象的内存状态进行操作的访问器和修改器。这包括琐碎的属性，但也包括诸如`Person.GetFullName()`连接`Person.FirstName`和`Person.LastName`字段之类的东西。
    *   所以你不会在你的`Person`类上调用一个方法，`SendEmailTo()`因为这不是对 Person 的真正操作，而是在你的电子邮件系统上的操作。
3.  一般来说，没有。您的业​​务逻辑应该响应传入的消息（例如客户端事件或轮询计时器）而发生，并且与单纯的存储库任务分开关注。

以下是我如何实现一个简单的 CRM（使用单个实体`Customer`）：

### 一个实体类`DBCustomer`：

（可能由实体框架生成）表示存储在数据库中的客户。

```
class DBCustomer {
    public String FirstName { get; set; }
    public String LastName  { get; set; }
    public String FullName  { get { return this.FirstName + " " + this.LastName; } }
} 
```

### 一个存储库

实体框架`DbContext`是您的存储库对象，因此无需在此处完成任何工作。

### 商业逻辑

...例如 WCF 消息处理程序 - 但有时逻辑非常简单，尤其是当业务操作直接对应于数据库操作时，例如

```
StatusCode Customer_Add(CustomerXml newCustomerXml) {
    DBCustomer newCustomer = createNewCustomerFromXmlMessage( newCustomerXml );

    using( MyDbContext dbc = CreateDbContext() ) {
        dbc.Customers.Add( newCustomer );
        dbc.SaveChanges();
    }

    return StatusCode.Success;
} 
```

现在您可能会注意到这里似乎有很多无用的层 - 我可以使用 CustomerXml 类（它表示反序列化的以前 XML 格式的消息），然后直接从 WCF 消息事件处理程序调用 EF 上下文方法，并且它适用于非常琐碎的项目，但是随着项目的增长，您会发现您需要在每一步添加自定义逻辑，突然间事情变得无法管理。

因此，对于一个简单的数据驱动网站，一个简单的“在 ame 层中做所有事情”的方法可以正常工作，但是规范中有很多小问题的“企业”应用程序将需要这些额外的层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:21:49.703

关于 1,2 - 在对象持久性工具和 ORM 中有两种不同的常用方法，ActiveRecord 模式和 Repository 或 DataAdapter 模式。ActiveRecord 是将 CRUD 和其他一些操作放在实体对象中的一种，存储库模式将实体（DTO）与这些操作中的操作分开。
Active Record 模式有它自己的优势（据说更容易），但我更喜欢 Repository，因为它更灵活且可测试。

3-为每个实体创建一个项目有什么好处，我认为这不是一个好主意。

# c - fscanf 不在空格后扫描行

> ID：12550309
> 
> 赞同：0
> 
> 时间：2012-09-23T06:46:18.980
> 
> 标签：c, scanf

## 我的 fscanf 函数有问题

原谅我的英语不好。

程序读取文件如下：

```
status = fscanf(ifile, "%%!%11s", ifbuf); 
```

如果文件直接以所需条目开头，例如

```
%! UTF-8
some text 
```

`fscanf`中读取一行`ifbuf`。如果在行中以空格开头

```
 %! UTF-8
some text 
```

`fscanf`不读任何东西。

`fscanf`可以通过在格式字符串中添加一个空格来使函数在这两种情况下工作：

```
status = fscanf(ifile, " %%!%11s", ifbuf); 
```

* * *

我想知道`fscanf`函数的行为有多正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:22:47.597

您`s`在格式字符串中使用，它匹配不是空白字符的字节序列。该函数读取字节，根据格式解释它们，并将结果存储在其参数中。

在您的情况下，它会找到以空格开头的行，这与您要查找的格式不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:35:55.797

您描述为观察到的行为是正确的行为。这些函数仅在某些（实际上除了and之外的大多数）转换规范中[`scanf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fscanf.html)跳过前导空格。对于格式字符串的文字部分，它的行为或多或少是字面上的，只是格式字符串中的空格与数据中任意数量的空白字符匹配。`%c``%[`

# android - android中Imageview的圆角

> ID：12550311
> 
> 赞同：5
> 
> 时间：2012-09-23T06:46:23.943
> 
> 标签：android, imageview, android-linearlayout, rounded-corners

我在线性布局中有一个 textview 和 imageview 。Textview 在顶部，imageview 在底部。我使用下面的线为线性布局设置圆角。但是 imageview 的角不是圆角的。我看到只有线性布局的顶角是四舍五入的。**我怎样才能使imageview的底角变圆？**（如果我删除 imageview，我看到所有的角都是圆的）

rounded_corners.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

<solid android:color="#ffffff" />

<corners
    android:bottomLeftRadius="8dp"
    android:bottomRightRadius="8dp"
    android:topLeftRadius="8dp"
    android:topRightRadius="8dp" />

</shape> 
```

主要的.xml

```
 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="50dp"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:layout_marginTop="50dp"
    android:background="@xml/rounded_corners"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="xxxxxxxx" />

    <ImageView     
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:scaleType="centerCrop"
        android:src="@drawable/my_image_view" />
</LinearLayout> 
```

截屏 ： ![在此处输入图像描述](../Images/0ac87355f91c8e9404d4aa605416b0db.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-18T06:16:37.413

您可以使图像的左下角和右下角变圆，如下所示：

![在此处输入图像描述](../Images/133e5d8ee4da782a16b2c6784d95bde8.png)

代码：

```
public static Bitmap getRoundCornerBitmap(Bitmap bitmap, int radius) {
    int w = bitmap.getWidth();
    int h = bitmap.getHeight();
    Bitmap output = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(output);

    final Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    final RectF rectF = new RectF(0, 0, w, h);

    canvas.drawRoundRect(rectF, radius, radius, paint);

    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
    canvas.drawBitmap(bitmap, null, rectF, paint);

    /**
     * here to define your corners, this is for left bottom and right bottom corners
     */
    final Rect clipRect = new Rect(0, 0, w, h - radius);
    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC));
    canvas.drawRect(clipRect, paint);

    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
    canvas.drawBitmap(bitmap, null, rectF, paint);

    bitmap.recycle();

    return output;
} 
```

这种方法可以给你一个左下角和右下角圆角的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T10:12:22.250

对于图像视图的圆角，将您的图像转换为位图，然后尝试以下代码：

```
public static Bitmap roundCorner(Bitmap src, float round) 
{
    // image size
    int width = src.getWidth();
    int height = src.getHeight();

    // create bitmap output
    Bitmap result = Bitmap.createBitmap(width, height, Config.ARGB_8888);

    // set canvas for painting
    Canvas canvas = new Canvas(result);
    canvas.drawARGB(0, 0, 0, 0);

    // config paint
    final Paint paint = new Paint();
    paint.setAntiAlias(true);
    paint.setColor(Color.BLACK);

    // config rectangle for embedding
    final Rect rect = new Rect(0, 0, width, height);
    final RectF rectF = new RectF(rect);

    // draw rect to canvas
    canvas.drawRoundRect(rectF, round, round, paint);

    // create Xfer mode
    paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
    // draw source image to canvas
    canvas.drawBitmap(src, rect, rect, paint);

    // return final image
     return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T07:26:35.823

您的线性布局是圆角，毫无疑问，但您的图像不是。在屏幕截图中，图像与底部的线性布局重叠。尝试向线性布局（`android:padding="20dp"`）添加一些填充。这应该有效。

# php - 如何将android JSON数据转换为PHP数组

> ID：12550312
> 
> 赞同：-1
> 
> 时间：2012-09-23T06:46:30.917
> 
> 标签：php, android, json, httprequest, httpresponse

我有一个格式为的 JSON 数据

```
[{"product_id":"33","amount":"1"},{"product_id":"34","amount":"3"},{"product_id":"10","amount": "1"},{"用户名":"test"}]

```

现在我想在我的 PHP Web 系统中获取这些数据。我正在将这些数据从 android 应用程序发送到 PHP 服务器。我正在使用下面的代码将其发送到 Web 服务器。

```
public JSONObject sendAndGetJSONfromURL(String url,List&lt;NameValuePair&gt; params){
        InputStream is = null;
        String result = "";
        JSONObject jArray = null;

        //http post
        try{
                HttpClient httpclient = new DefaultHttpClient();
                HttpPost httppost = new HttpPost(url);
                httppost.setHeader("Content-type", "application/json");
                httppost.setHeader("Accept", "application/json");
                httppost.setEntity(new UrlEncodedFormEntity(params));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
..... 
```

在发送之前，我打印

```
jArray.toString()
```

并得到输出

```
[{"product_id":"33","amount":"1"},{"product_id":"34","amount":"3"},{"product_id":"10","amount":"1"},{"username":"test"}] 
```

我想知道如何从 PHP 系统中获取这些值。谁能帮帮我吗？

在通过 HTTPRequest 发送之前，params 变量值的输出如下所示

```
[cartdata=[{"product_id":"33","amount":"1"},{"product_id":"34","amount":"3"},{"product_id":"10","amount":"1"},{"username":"UWUDAMITH"}]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:52:06.160

采用`json_decode()`

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

用法：`json_decode($json, true)`//将json解码为关联数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T06:52:08.377

[http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)这应该会派上用场。还要检查[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)以获取与该功能完全相反的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T06:54:02.023

当您以 urlencoded 格式发送数据时，这些值将出现在 $_POST PHP 的数组中！从那里您将能够使用 json_decode() 对它们进行解码：

```
$json = $_POST['json']; // assumes JSON is posted as "json" POST variable
$data = url_decode($json, true); // gets you associative arrays, not objects 
```

您唯一需要做的就是在 POST 中将 JSON 字符串作为“json”变量发送，并在请求正文中进行正确编码（URL 编码）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T08:06:30.873

这可能不是最好的方法，因为我是 Java/Android 新手，但它对我有用 :)

```
 HttpClient httpclient = new DefaultHttpClient();
      HttpPost httppost = new HttpPost("http://www.yourdomain.com/save.php");

      try {
        // Add your data
          List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
          nameValuePairs.add(new BasicNameValuePair("id", "1"));
          nameValuePairs.add(new BasicNameValuePair("json",jArray.toString()));
          httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
          HttpResponse response = httpclient.execute(httppost);

      } catch (ClientProtocolException e) {
          // TODO Auto-generated catch block
      } catch (IOException e) {
          // TODO Auto-generated catch block
      } 
```

这将使用 $_POST['id'] = 1 将帖子发送到服务器，然后将 $_POST['json'] = 发送到您的 json 数据；

这是save.php。我实际上将它保存到 MySQL，所以是的。

```
 <?php
    $server = "localhost";
    $username = "user";
    $password = "pass";
    $database = "db";
    $con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
    mysql_select_db($database, $con);

    $id = $_POST["id"];
    $json = $_POST["json"];

    $sql = "INSERT INTO comments (id, json) ";
    $sql .= "VALUES ($id, '$json')";

    if (!mysql_query($sql, $con)) {
        die('Error: ' . mysql_error());
    } else {
        echo "Comment added";
    }
    mysql_close($con);
    echo json_decode($json);
    ?> 
```

# backbone.js - Backbone.Marionette 模板异步加载

> ID：12550316
> 
> 赞同：4
> 
> 时间：2012-09-23T06:47:22.807
> 
> 标签：backbone.js, jquery-templates, marionette, backbone-events, backbone-views

我们正在为我们的项目使用 Backbone 和 Backbone.Marionette。我们目前正在服务器上存储视图的所有模板，并且我们已经覆盖了 loadTemplate 调用以异步加载它们。

但是，当我们使用布局视图时，由于视图的模板是异步加载的，因此我们似乎无法立即访问布局的区域。下面是一个例子：

```
var layoutView = new Layout();
var itemView = new ItemView();

App.containerRegion.show(layoutView);
layoutView.mainRegion.show(itemView); <---- This is where the issue would occur. 
```

如果我们不从服务器异步加载模板，那么它会正常工作。什么是实现这一点的好方法？我们希望将模板保留在服务器上，而不是一次加载所有内容。我们还希望避免在整个代码中绑定到布局视图的渲染事件。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:51:54.933

我认为您必须覆盖 Marionette.ItemView 的渲染功能，您首先加载模板数据并在成功加载模板时渲染视图：

```
 render: function(){          
    if (this.beforeRender){ this.beforeRender(); }

    this.trigger("before:render", this);
    this.trigger("item:before:render", this);

    var data = this.serializeData();
    var templateSrc = this.getTemplate();

    $.ajax({
      url: 'templatesFolder/' + templateSrc,
      success: _bind(function(template){
         var html = Marionette.Renderer.render(template, data);
         this.$el.html(html);

         if (this.onRender){ this.onRender(); }
         this.trigger("render", this);
         this.trigger("item:rendered", this);
      }, this)
    })

    return this;
  }, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T02:46:53.677

您需要获取[Marionette.Async](https://github.com/marionettejs/backbone.marionette.async)插件。它旨在完全按照您的意愿行事。

但是，您需要知道从服务器异步获取模板会影响性能。这样做的网络延迟可能会导致用户认为应用程序没有响应，如果屏幕上没有任何内容告诉他们应用程序正在幕后工作（如微调器图形）。

最好一次获取尽可能多的模板，以减少网络延迟和传输。我的[一个朋友写了一篇](http://johndavidmathis.wordpress.com/2012/09/13/preloading-backbone-marionette-templates-2/)关于这样做的博客文章。

# ios - 排序 JSON 日期

> ID：12550319
> 
> 赞同：0
> 
> 时间：2012-09-23T06:47:35.610
> 
> 标签：ios, sorting, nsarray

我将日期/时间作为 JSON 存储为一系列 NSArray 对象。

JSON格式如下：

```
"created_at" = "2012-09-21T12:41:26-0500" 
```

如何对数组进行排序，以使最新的项目位于最顶部。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:14:08.410

您需要做的第一件事是将日期字符串转换`NSDate`为原始数组中每个项目的对象，这是关键，因为系统知道如何比较日期，但不知道 ISO8601 字符串。

有几种方法可以进行转换，在下面的示例中，我在 NSDate 上使用自定义类别，您可以使用此问题的答案进行转换：[是否有一种简单的方法可以将 ISO8601 时间戳转换为格式化的 NSDate？](https://stackoverflow.com/questions/2201216/is-there-a-simple-way-of-converting-an-iso8601-timestamp-to-a-formatted-nsdate),

一旦有了，使用如下所示`NSDates`的排序非常容易：`NSSortDescriptor`

```
NSArray *originalArray = @[
    @{@"created_at" : [NSDate dateFromISO8601String:@"2012-09-21T12:41:26-0500"]},
    @{@"created_at" : [NSDate dateFromISO8601String:@"2012-07-21T12:41:26-0500"]},
    @{@"created_at" : [NSDate dateFromISO8601String:@"2012-06-21T12:41:26-0500"]},
    @{@"created_at" : [NSDate dateFromISO8601String:@"2012-10-21T12:41:26-0500"]}
    ];

NSSortDescriptor *sortDescriptor = 
    [[NSSortDescriptor alloc] initWithKey:@"created_at" ascending:NO];
NSArray *sortedArray = 
    [originalArray sortedArrayUsingDescriptors:@[sortDescriptor]]; 
```

该变量`sortedArray`包含原始数组的排序版本，如您所见，我们传递了一个排序描述符数组，这允许您传递多个排序描述符，以防您想根据日期和另一个属性（例如标题，名称）作为辅助描述符。

# django - 如何从 Django 用户配置文件上传视频？

> ID：12550321
> 
> 赞同：0
> 
> 时间：2012-09-23T06:47:44.763
> 
> 标签：django, youtube-api

我正在寻找一种从 Django 用户配置文件上传视频的方法。我正在使用 Django-Userena 并希望扩展用户配置文件，使其具有将 1-2 分钟的短视频上传到用户配置文件的功能。我更喜欢将视频上传到 Youtube/Vimeo 等外部视频托管服务（因为我相信这会更容易维护 Django 项目文件）。

我发现与此相关的唯一 django-package 是 django-youtube (https://github.com/laplacesdemon/django-youtube) 不幸的是，我似乎在使用这个应用程序时遇到了一些麻烦。

我想知道是否有任何其他类似的 Django 可重用应用程序可用于将视频上传到 Youtube/Vimeo，或者你们使用任何其他方式从 Django 上的用户配置文件上传视频。

我已经阅读了有关基于浏览器上传的 Youtube API 文档，这让我不知所措。请善待，我是 Django 新手。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:29:43.437

这比自己实现基于浏览器的上传流程要少得多，并且它在上传完成时提供简单的回调（包括通过网络摄像头上传），以便您可以获取新 YouTube 视频的 id：

[https://developers.google.com/youtube/youtube_upload_widget](https://developers.google.com/youtube/youtube_upload_widget)

如果您可以将 <iframe> 插入页面而不是使用小部件，并且如果您可以在页面上运行自定义 JavaScript，那么您可以注册回调以获取新视频的 id。

# android - 以编程方式设置滚动视图的布局参数时出现异常

> ID：12550325
> 
> 赞同：3
> 
> 时间：2012-09-23T06:49:39.600
> 
> 标签：android, layout, scrollview, programmatically-created

我在以编程方式设置 scroolview 的 layoutparams 时遇到异常。我尝试过但在这样做时遇到异常。这是代码：

```
sv = (ScrollView)findViewById(R.id.scrollView);
        sv.setBackgroundColor(Color.TRANSPARENT);

            ScrollView.LayoutParams layoutParams = new ScrollView.LayoutParams(
                    ScrollView.LayoutParams.MATCH_PARENT,
                    ScrollView.LayoutParams.MATCH_PARENT);
            layoutParams.bottomMargin = 100;
            layoutParams.setMargins(0, 0, 0, 100);
            sv.setLayoutParams(layoutParams); 
```

这是错误日志：

```
09-23 12:13:20.666: E/AndroidRuntime(3284): Uncaught handler: thread main exiting due to uncaught exception
09-23 12:13:20.696: E/AndroidRuntime(3284): java.lang.ClassCastException: android.widget.FrameLayout$LayoutParams
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.RelativeLayout$DependencyGraph.findRoots(RelativeLayout.java:1291)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.RelativeLayout$DependencyGraph.getSortedViews(RelativeLayout.java:1238)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.RelativeLayout.sortChildren(RelativeLayout.java:279)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:299)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.View.measure(View.java:7964)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:569)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:361)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.View.measure(View.java:7964)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.View.measure(View.java:7964)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:464)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.View.measure(View.java:7964)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.View.measure(View.java:7964)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.View.measure(View.java:7964)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.ViewRoot.performTraversals(ViewRoot.java:763)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.os.Looper.loop(Looper.java:123)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at android.app.ActivityThread.main(ActivityThread.java:4363)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at java.lang.reflect.Method.invokeNative(Native Method)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at java.lang.reflect.Method.invoke(Method.java:521)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-23 12:13:20.696: E/AndroidRuntime(3284):     at dalvik.system.NativeStart.main(Native Method) 
```

这是xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerHorizontal="true"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/frameLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <ScrollView
            android:id="@+id/scrollView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="90.0dip"
            android:layout_marginLeft="1.0dip"
            android:layout_marginRight="1.0dip"
            android:layout_marginTop="-2.0dip"
            android:animateLayoutChanges="true"
            android:fadeScrollbars="true"
            android:fadingEdge="none" >

            <!-- android:layout_marginBottom="60.0dip" -->
            <!-- android:fillViewport="true" -->

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:visibility="visible" >

                <ImageView
                    android:id="@+id/QuestionImageView"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:visibility="visible" />

                <TextView
                    android:id="@+id/tv"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/QuestionImageView"
                    android:fadingEdge="vertical"
                    android:scrollbars="vertical" />

                <TextView
                    android:id="@+id/questionnumber"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:fadingEdge="vertical"
                    android:scrollbars="vertical" />

                <TextView
                    android:id="@+id/question"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_below="@id/tv"
                    android:fadingEdge="vertical"
                    android:padding="10dp"
                    android:scrollbars="vertical"
                    android:text=""
                    android:textColor="@color/dark_green" />

                <RadioGroup
                    android:id="@+id/radioGroup1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_below="@id/question"
                    android:orientation="vertical" >

                    <RadioButton
                        android:id="@+id/option1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option3"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />

                    <ImageView
                        android:layout_width="fill_parent"
                        android:layout_height="1.0dp"
                        android:background="@drawable/thinnest_blue_gradient" />

                    <RadioButton
                        android:id="@+id/option4"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="" />
                </RadioGroup>
            </RelativeLayout>
        </ScrollView>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relativequestion"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >

        <com.google.ads.AdView
            android:id="@+id/ad"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            ads:adSize="SMART_BANNER"
            ads:adUnitId="a1501e5633125fb"
            ads:loadAdOnCreate="true"
            ads:testDevices="TEST_EMULATOR, 123456789ABCDEF" />

        <LinearLayout
            android:id="@+id/newquestion"
            android:layout_width="fill_parent"
            android:layout_height="40.0dip"
            android:layout_above="@id/ad"
            android:background="#ff777777"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/PrevButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onPrevButtonClick"
                android:text="Prev" />

            <Button
                android:id="@+id/NextButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onNextButtonClick"
                android:text="Next" />

            <Button
                android:id="@+id/SkipButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onSkipButtonClick"
                android:text="Skip" >
            </Button>

            <Button
                android:id="@+id/SubmitButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_marginRight="5.0dp"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onSubmitButtonClick"
                android:text="Submit" />
        </LinearLayout>
    </RelativeLayout>

</RelativeLayout> 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-23T06:54:42.103

您的父母`ScrollView`是 a `RelativeLayout`，为此您应该使用`RelativeLayout.LayoutParams`：

```
 RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) sv
            .getLayoutParams();
    lp.setMargins(0, 0, 0, 100); 
```

# php - 如何将unixtimestamp转换为mysql日期格式

> ID：12550334
> 
> 赞同：3
> 
> 时间：2012-09-23T06:51:26.547
> 
> 标签：php, unix-timestamp

我正在编写代码来减去两个日期。它适用于合同类型的东西，用户可以在其中查看合同完成的剩余天数。类似于从数据库`start_date_time="today"`中检索`end_date_time=y` 值的`y`位置（DATETIME 类型）。它采用 mysql 日期时间格式 ( `yyyy-mm-dd HH:mm:ss`)。

```
<?php
include_once '../include/connections.php';
$id =$_REQUEST['uid'];
$result= mysql_query("SELECT * FROM data WHERE uid  = '$id'");
$test = mysql_fetch_array($result);
echo $test[14];
echo "<br /><br />";
$today=time();
$enddate=strtotime('$test[14]');
$timediff = $enddate - $today;
$days=intval($timediff/86400);
$remaining=$timediff%86400;
$hours=intval($remaining/3600);
$remaining=$remaining%3600;
$mins=intval($remaining/60);
$secs=$remaining%60;
echo "<br>".$days.' days '.$hours.' hours '.$mins.' minutes and '.$secs.' seconds.';
?> 
```

当我`echo $test[14];`，我得到存储在数据库中的日期和时间，即 ( `2012-09-26 00:00:00`)

当我`echo $today;`然后我以这种格式得到它`1348381896`。现在，我如何将此格式转换为从数据库中检索到的格式，以便我可以减去 2 个日期并获得剩余的天数和时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T06:55:55.753

您可以使用这 2 个函数将日期相互转换，

将其用于 MySQL 日期时间的时间戳：

```
$timestamp = '1348381896';
$date = date('Y-m-d H:i:s', $timestamp);
echo $date; 
```

将此用于 MySQL datetime 时间戳：

```
$date = '2012-09-26 00:00:00';
$timestamp = strtotime($date);
echo $timestamp; 
```

此外，如果您愿意在 MySQL 端减去您的日期，您可以使用[DATEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)和/或[TIMEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff)函数：

你也可以在 MySQL 中使用时间戳，使用[TIMESTAMPDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)和[UNIX_TIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:43:17.567

您可以为此使用 PHP 的[DateTime](http://www.php.net/datetime)类：-

```
$today = new DateTime();

$mysqlDate = "2012-12-15 13:40:20"; //for example
// To match your code this would be $mysqlDate = $test[14];
$mysqlFormat = 'Y-m-d H:i:s';

$endDate = DateTime::createFromFormat($mysqlFormat, $mysqlDate);
$diff = $today->diff($endDate);
echo "You have {$diff->d} days, {$diff->h} hours and {$diff->m} minutes left"; 
```

这将给出以下输出：-

> 你还有 22 天 6 小时 5 分钟

（这将根据您运行代码的时间而改变）。

`$diff`是[DateInterval](http://www.php.net/manual/en/class.dateinterval)的一个实例。

DateTime::createFromFormat() 可接受的日期格式可以在这里找到[http://www.php.net/manual/en/function.date.php](http://www.php.net/manual/en/function.date.php)

# ruby-on-rails - ruby-on-rails：使用 postgres 数据库进行文本数据类型迁移

> ID：12550336
> 
> 赞同：1
> 
> 时间：2012-09-23T06:51:30.987
> 
> 标签：ruby-on-rails, postgresql, activerecord

我正在 Postgres 上开发 rails 应用程序。我遇到的一个问题是当我尝试将空文本（''）分配给文本列值时。它只识别我要分配的文本是两个单引号作为文本值。

我的表架构：

```
 create_table :products do |t|
      t.integer :seq
      t.string :title
      t.text :description
      t.timestamps
    end 
```

我有问题的迁移：

```
Product.create({:seq => 1, :title => 'green_cos', :description => ''}) 
```

这是结果记录：

![在此处输入图像描述](../Images/1810ab7d66a656e248256acd53bb9ed1.png)

关于我应该做些什么来分配正确的空字符串有什么建议吗？或者它希望我分配一个 nil 值。它处理空文本和零文本的方式与其他数据库不同吗？我使用我之前提到的 SQL Server 没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T06:59:40.590

没有问题。引号不是值的一部分，或者换句话说，它们不存储在数据库中。它们仅在 ruby​​ 中用于指定字符串值（实际值在引号之间）。pgAdmin 碰巧为空字符串显示 '' 以区分空字符串和 NULL 值。NULL 值在 pgAdmin 中显示为空单元格，如果空字符串也导致空单元格，则会令人困惑。

# jquery - 为什么这个 javascript 可以在 Firefox 上运行，但不能在 Chrome 上运行？

> ID：12550337
> 
> 赞同：-2
> 
> 时间：2012-09-23T06:51:58.543
> 
> 标签：jquery, asp.net, google-chrome

这是一个用于虚拟键盘的 JavaScript。点击[这里](http://www.greywyvern.com/code/javascript/keyboard)查看来源。

要使用这个键盘，我所要做的就是在 TextBox 控件中使用 CSS 类。这是文本框。

```
<asp:TextBox ID="txtFTP" SkinID="Mini2" runat="server" TextMode="Password" 
ForeColor="Gray" CssClass="keyboardInputCenter txtAllign" /> 
```

Jquery 参考在母版页中。

```
<script src="../App_Themes/Default/js/jquery-1.6.1.js" type="text/javascript"></script>

<script src="../App_Themes/Default/js/keyboard.js" type="text/javascript"></script> 
```

我的 aspx 页面“XYZ.aspx”在 Firefox 中运行正常，单击文本框时会弹出虚拟键盘，但在 chrome 中以相同的形式没有任何反应。

**我使用相同的脚本来显示一个虚拟键盘，它适用于 firefox 和 chrome，但该页面和母版页位于另一个文件夹中。**

**我该如何解决/解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:55:38.937

确保在 firefox 中启用了 java 脚本。有时某些代码会在 chrome 中运行，但在 Firefox 中却不能，因为 web-kit 引擎不同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T18:34:36.837

发现错误。有一个“div”没有关闭。Firefox 以某种方式解决了该错误，但 Chrome/IE 没有。如果您知道 Firefox 工作的原因，请发表评论。谢谢大家的合作。

# javascript - 有没有办法在没有换行符的情况下使用 div 标签，或者有 替代方法吗？

> ID：12550340
> 
> 赞同：3
> 
> 时间：2012-09-23T06:52:13.507
> 
> 标签：javascript, asp.net, css, stylesheet

在我的网站中，在 asp.net 4 / vb 中，我需要在页脚中包含一个类“ **noprint** ”，如**print.css**中所定义。但是我已经有一个 span 类，所以我将 div 标签包裹在它周围。而且我的 tr 和 td 都已经有课程了。

基本上，我的页脚中有这个：

**知识库 | 联系我们 | 版权所有 © USS Vision Inc. 2012 | 888-888-8888**

我唯一想要打印的就是电话号码。

我用

```
<div class="noprint">whatever I want omitted when printing</div> 
```

这很好用。但是在查看网页时，我不希望`888-888-8888`出现在其他所有内容下方，所以我想我不能使用 div 标签。noprint 效果很好，但是有什么方法可以在我的页脚中使用 noprint，而不会由于 div 标签而将电话号码放在页脚的其余部分下方？感谢任何人都可以提供的任何帮助！

更新：我的**print.css**样式表如下所示：

```
@media screen
{
   /* whatever styles you have for display */
}

@media print
{
   .noprint { display: none; }
} 
```

所以我不知道如何制作 div 标签`display: inline`，但我会四处寻找并尝试弄清楚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T06:54:02.097

使用`<span>`.

但是，您可以使用 style 制作一个 div “内联” `display: inline`，但在这种情况下，您只需要一个`<span>`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T07:06:03.277

gd1 关于 span/div 和显示内联/块是绝对正确的，但在旁注中，我要补充一点，您要实现的目标通常是通过列表完成的（因为它实际上是页脚中的链接列表）

```
<ul class="footer">
  <li class="no-print">KnowledgeBase</li>
    ...
  <li>888-888-888</li>
<ul> 
```

有一个类似的CSS

```
.footer li {
  list-style-type: none;
  display: inline;
  padding: 0 10px;
  border-right: 1px solid black;    
}

.footer li:last-child {
  border-right: none;
}​ 
```

希望有帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T06:58:19.777

使用 CSS

```
<div style="display:inline" class="noprint">whatever I want omitted when printing </div> 
```

如果不使用内联对应范围，正如已经说过的答案。但请记住，内联显示没有高度、上边距、下边距等块属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T07:11:08.907

如果您仍想使用额外的 div，我建议使用 display:inline，但如果您只想让整个页脚同时包含两个类，您也可以这样做。

您可以像这样添加多个类：

```
<span class='footer lower noprint'></span> 
```

在 CSS 中，这看起来像：

```
.footer.lower.noprint{ display:none; } 
```

或者，“noprint”类也可以在不指定所有三个类的情况下工作。

这是一个例子：http: [//jsfiddle.net/yKRyp/](http://jsfiddle.net/yKRyp/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T06:53:42.217

设置好使用CSS的具体`width`和应用`height``div``float`

```
<div style='float:left; border:1px solid blue; width:100px; height:100px'>
div 1
</div>
<div style='float:left; border:1px solid red; width:100px; height:100px'>
div 2
</div><div style='float:left; border:1px solid orange; width:100px; height:100px'>
div 3
</div> 
```

这里有一个活生生的例子

[http://jsfiddle.net/AGWGs/](http://jsfiddle.net/AGWGs/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-23T07:17:47.787

`div`是块型元素，通常用于分组和包含块型元素。但是，使用 CSS，您可以更改任何元素的显示类型。

在一个简单的例子中：

`display:inline`使元素内联显示，它们可以并排放置。`span`element 是一个内联元素。这不能使用仅块类型的 css 规则，例如：`margin`, `padding`, `width`, `height`...

`display:block`使元素显示为块。除非继承值或给定 CSS 规则，否则它们将占用一行很长的行，被阻塞。他们可以采用块类型的 CSS 规则。它们可以使用`float`. 但是，除非该行被清除（或） `clear: left`，否则浮动元素之后的元素将溢出前一个容器。`clear:right``clear:both`

`display:inline-block`使元素具有块功能，内联显示。`float`这与使用和制作内嵌显示的块类型元素非常相似。但是这个规则只支持 IE8+，所以我鼓励你使用浮动来保持最大的兼容性。

`P.S: There are hacks that can be used to have display:inline-block feature used on IE5.5+.`

# redis - 如何安装最新版本的redis？

> ID：12550343
> 
> 赞同：1
> 
> 时间：2012-09-23T06:52:46.333
> 
> 标签：redis

我正在尝试安装 redis.2.6.0-rc7，因为我需要 BITCOUNT 命令。我从[redis-2.6.0-rc7.tar.gz下载了包](http://redis.io/download)

当我完成 make && make install 后，我检查了 redis-cli 的版本，它显示

```
redis-cli 2.5.13 
```

为什么不是 2.6.0？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:28:13.283

因为2.6还有待正式发布。对于 Redis，奇数版本号是开发版本，偶数版本是发布版本。2.6RC7 仍是开发版本，因此标记为 2.5.something。

# php - 网页在第一次加载时始终无法正常工作。为什么 output_buffering 会导致问题？

> ID：12550345
> 
> 赞同：0
> 
> 时间：2012-09-23T06:53:09.687
> 
> 标签：php, session, joomla, output-buffering

我想分享一个我遇到的问题，我找到的修复，然后问一个关于修复背后原因的问题。

**问题**

升级到 wampserver 2.2 后，我的一个网页在第一次加载到浏览器中时始终无法正常工作。这发生在 Internet Explorer、chrome、firefox 和 safari 上。重新加载时，该页面在所有浏览器中均有效。

**修复**

我决定实施一个更好的调试解决方案，而这样做无意中解决了我的问题。当我`output_buffering =On`在 php.ini 中设置时，页面工作正常。

**我的代码**

我不打算在这里详细介绍。我对 output_buffering 如何导致问题的理论更感兴趣。此外，我认为我的代码将比帮助更令人眼花缭乱。

*   我使用 ajax 和 joomla 会话（外部脚本）来检索页面的信息。
*   我相信当 output_buffering 关闭时，joomla 会话无法检索值。不过，我还不能证实这一点。

**我的问题**

哪些方式`output_buffering= Off` 会对代码产生不利影响？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:58:02.100

“我使用 ajax 和 joomla 会话（外部脚本）来检索页面信息。” 那是你的问题。您正在检索在特定时间延迟内变化的内容。

参考这个，它可以帮助你理解它是如何工作的：[https ://stackoverflow.com/a/2832179/817419](https://stackoverflow.com/a/2832179/817419)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T06:56:41.683

输出缓冲只是允许您推迟显示数据，否则这些数据会立即打印到浏览器。这些主要与模板引擎一起使用，以存储未渲染的模板，以便可以用值填充它们。我猜 Joomla 依赖于输出缓冲来为其模板填充正确的值，这可以解释为什么你会看到无效的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T04:59:20.383

事实证明，网页调用的文件之一编码不正确。一旦我对其进行编码，因为`UTF8 without BOM`我的问题在很大程度上得到了解决。我的脚本可以在没有打开 output_buffering 的情况下工作。

问题的另一部分是一些使用 Firebug 的脚本抱怨标头已被发送。这阻止了代码的运行。

# sql-server - SQL Server 如何使用 NEWID() 创建唯一标识符

> ID：12550346
> 
> 赞同：6
> 
> 时间：2012-09-23T06:53:31.277
> 
> 标签：sql-server

我`user_info`在五个不同的位置有一张桌子。现在我需要将所有行整合到一个中央`user_info`表中。为此，我需要源表中每一行的唯一 ID。因为当所有的行都进入中央表时，那么每个用户都必须有一个唯一的 ID。

现在我的问题是：

1.  如果我`uniqueidentifier` `NEWID()`用于每个源表，那么它在全局和生命周期中是唯一的还是有机会重复？

2.  SQL Server 如何创建`NEWID()`? 我需要知道密钥生成结构。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T06:59:21.663

是的，机器之间没有重复的机会。

`NEWID()`是基于**伪随机**数（来自时钟）和主 NIC 的 MAC 地址的组合。

然而，像这样插入随机数作为表上的聚集键对性能来说是很糟糕的。您应该考虑使用一种`NEWSEQUENTIALID()`或一种 COMB 类型的函数来生成 GUID，这些 GUID 仍可提供避免碰撞的好处，`NEWID()`同时仍保持可接受的`INSERT`性能。

# ruby-on-rails - Rails 批量分配安全错误

> ID：12550353
> 
> 赞同：0
> 
> 时间：2012-09-23T06:54:11.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在关注[Rails 的一个很棒的入门级教程](http://tutorials.jumpstartlab.com/projects/blogger.html)，这是一次很棒的体验——直到我遇到了这个

```
ActiveModel::MassAssignmentSecurity::Error in CommentsController#create

Can't mass-assign protected attributes: article_id 
```

这就是 CommentsController 的样子

```
class CommentsController < ApplicationController

    def create
        article_id = params[:comment].delete(article_id)

        @comment = Comment.new(params[:comment])
        @comment.article_id = article_id

        @comment.save

        redirect_to(article_path(@comment.article),
            :notice => "Comment added by #{@comment.author_name}.")
    end

end 
```

根据教程，以这种方式编写 create 方法而不是仅仅编写 like `@comment = Comment.new(params[:comment]`and`@comment.save`是为了避免 Mass-Assignment 安全错误。我认为这是由于使用了不同版本的 rails 造成的，因为我正在运行 Rails 3.2.8，而该教程的作者在撰写本文时正在运行 Rails 3.2.2。

有人可以给我一个解决方案吗？谢谢

### 编辑：

我用谷歌搜索了一下，发现你可以使用 :as 选项来定义类的角色，但我真的不知道我是否应该在这里使用它。我今天刚开始学习 Rails，在了解了一些基础知识后，我仍在努力理解它。

### EDIT2：迁移文件

```
class CreateComments < ActiveRecord::Migration
    def change
        create_table :comments do |t|
            t.integer :article_id
            t.string :author_name
            t.text :body
            t.timestamps
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:29:49.800

您可能需要`:article_id`从参数中删除密钥，而不是`article_id`.

```
article_id = params[:comment].delete(:article_id) 
```

代替

```
article_id = params[:comment].delete(article_id) 
```

Ruby 不会为自赋值抛出未定义的错误，

```
a = a
=> nil
b = c
=> NameError 
```

# c# - 具有多个 resx 文件的 .net 资源 DLL

> ID：12550354
> 
> 赞同：3
> 
> 时间：2012-09-23T06:54:25.097
> 
> 标签：c#, winforms, resources, .net-2.0

我需要知道如何从具有多个资源文件 (.resx) 的资源 DLL 中正确访问字符串和图像。

我正在处理一个非常大的项目，它由几个 Winform 组成，每个 Winform 都有多个面板。我试图通过使每个表单都有自己的 res 文件并将应用程序限制为一个资源 DLL 而不是多个资源 DLL 来稍微整理一下。

问题是当我尝试将新资源文件添加到我的资源 DLL 并尝试访问一个字符串时，例如，该字符串保存在新创建的 resx 文件中。ResourceManager 返回一个空字符串。

这是我创建 ResourceManager 对象并获取字符串的方式

```
static public string GetResourceString(string sStringName)
{     
System.Reflection.Assembly myDllAssembly = System.Reflection.Assembly.LoadFile(ResPath);
     string[] allResourcesinDLL = myDllAssembly.GetManifestResourceNames();
     ResourceManager ResInstance = new ResourceManager(allResourcesinDLL[0].Replace(".resources", string.Empty), myDllAssembly);

 return  ResInstance.GetString(sStringName);
} 
```

其中 ResPath 是我的资源 DLL 的路径，而 sStringName 是资源/字符串标题。

我不确定是否有办法指定要读取的 resx 文件，或者是否应该以其他方式处理。请记住，我的应用程序是使用 .net 2.0 框架编译的，所以我有点受限于我能够使用的 API。

# javascript - Array.prototype.slice.call 在 IE 中不起作用

> ID：12550356
> 
> 赞同：0
> 
> 时间：2012-09-23T06:55:49.793
> 
> 标签：javascript

> **可能重复：**
> [getElementsByTagName 的 IE 仅 javascript 错误](https://stackoverflow.com/questions/2143848/ie-only-javascript-error-with-getelementsbytagname)

```
var rows=myTable.getElementsByTagName('tr');   
rows=Array.prototype.slice.call(rows,0); 
```

在 IE 中不起作用，有没有其他方法可以将其转换为真正的数组，以便我可以在其上使用排序函数...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T07:00:00.743

如果 IE 版本 < 8，则需要使用循环。

```
var rows=myTable.getElementsByTagName('tr');   
var row_array = [];
for (var i = 0; i < rows.length; i++) {
  row_array.push(rows[i]);
} 
```

# c# - 转义字符串中的非特殊字符以进行 LDAP 查询

> ID：12550358
> 
> 赞同：5
> 
> 时间：2012-09-23T06:56:10.200
> 
> 标签：c#, string, escaping, ldap

我希望我已经恰当地命名了这个问题。这里有点混合主题。

我创建了一个函数`C#`来创建一个 Active Directory 用户。使用需要如下所示的 LDAP 字符串：

```
userinfo.displayName = "Surname, Firstname"

CN=" + userinfo.displayName, "user" 
```

由于逗号在字符串中，以下异常消息被传回。

> 指定了无效的 dn 语法。

应用字符串后的完整 dn 如下

```
"CN=Surname**,** Lastname,OU=Users,DC="Foo",DC="net" 
```

通用名称 CN= 中的逗号是问题所在...

有没有办法让 C# 忽略字符串中的逗号？有效地逃避它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T07:39:14.727

可通过前导斜杠 ('\') 转义可分辨名称中的无效字符。例如，上面的专有名称应该是：

```
"CN=Surname\, Lastname,OU=Users,DC=Foo,DC=net" 
```

根据[RFC 4514 的第 2.4 节：轻量级目录访问协议 (LDAP)：可分辨名称](http://www.ietf.org/rfc/rfc4514.txt)的字符串表示，字符`, `"`, `#`, `+`, `,`, `;`, `<`, `=`,`>`和`\`可以通过前导斜杠进行转义。其他非字母数字字符应以`\XX`XX 为 UTF8 字符编码的十六进制数字的形式显示。有关示例，请参见第 4 节。`

 `请注意，[X500DistinguishedName](http://msdn.microsoft.com/en-us/library/x01h8y30.aspx)类（在 System.Security Cryptography 中）似乎没有 Parse 或 Escape 方法来帮助解决这种情况。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T10:50:27.367

根据 RFC4514，某些字符**必须**使用反斜杠 ( `\`)**后跟两个十六进制数字**进行转义，而不是单个反斜杠。许多目录目录服务器支持`\,`，但由于它不是标准化的，LDAP 客户端不能使用这种表示法——它可以在某些服务器上工作，但不能在其他服务器上工作，并且客户端不能假设他们正在与特定服务器的软件进行通信。`

# mysql - 如何为与 DBD 和 MySQL 5.1 一起使用的 Apache2 身份验证生成正确的密码格式？

> ID：12550364
> 
> 赞同：1
> 
> 时间：2012-09-23T06:57:03.030
> 
> 标签：mysql, apache, authentication, apache2, mod-auth

我想对来自 MySQL 5.1 数据库的文件夹的用户进行身份验证`AuthType Basic`。
密码以纯文本形式存储（它们不是真正的密码，所以没关系）。
然而，apache 的密码格式只允许在 Linux 系统上使用 SHA1、MD5，[如此处所述](http://httpd.apache.org/docs/2.2/misc/password_encryptions.html)。

如何使用 SQL 查询生成正确的格式？似乎 apache 格式是长度为 20 的二进制格式，但 mysql`SHA1`函数返回 40 长。

我的 SQL 查询是这样的：

```
SELECT CONCAT('{SHA}', BASE64_ENCODE(SHA1(access_key))) FROM user_access_keys INNER JOIN users ON user_access_keys.user_id = users.id WHERE name = %s 
```

`base64_encode`存储函数在哪里（Mysql 5.1 还`TO_BASE64`没有）。此查询返回一个 61 字节的 BLOB，它与 apache 使用的格式不同。我怎样才能生成相同的格式？

您也可以为此建议其他方法。关键是我想使用纯文本作为密码对 MySQL5.1 数据库中的用户进行身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:18:35.163

您所指的文档并不意味着“仅限 Unix”暗示非 Linux，因此 crypt() 可供您使用。由于您似乎不关心安全性，我建议这是 MySQL[加密](http://dev.mysql.com/doc/refman/5.1/en/encryption-functions.html)功能旁边最简单的选择。您可能希望在查询中使用常量种子值。

```
SELECT ENCRYPT(access_key, 'SA') FROM user_access_keys INNER JOIN users ON user_access_keys.user_id = users.id WHERE name = %s 
```

# c# - 在距 A 给定距离处沿 AB 线计算一个点

> ID：12550365
> 
> 赞同：11
> 
> 时间：2012-09-23T06:57:09.857
> 
> 标签：c#, math, graphics, geometry

我非常疯狂地试图计算沿给定线 AB 的点，距离 A 的给定距离，以便我可以“绘制”两个给定点之间的线。一开始听起来很简单，但我似乎无法正确理解。更糟糕的是，我不明白我哪里出错了。几何（和一般的数学）不是我的强项。

我已经阅读了类似的问题，并且有关于 SO 的答案。事实上，我直接从*Mads Elvheim*的回答中提升了当前对 CalculatePoint 函数的实现：[给定起点和终点以及距离，计算沿线的点](https://stackoverflow.com/questions/1800138/given-a-start-and-end-point-and-a-distance-calculate-a-point-along-a-line)（加上稍后评论中的更正 - 如果我理解正确的话) 因为我为解决问题而进行的独立尝试让我无处可去，除了头等舱特快票令人沮丧的地方。

这是我的**更新**代码（请参阅帖子底部的编辑注释）：

```
using System;
using System.Drawing;
using System.Windows.Forms;

namespace DrawLines
{
    public class MainForm : Form
    {
        // =====================================================================
        // Here's the part I'm having trouble with. I don't really understand
        // how this is suposed to work, so I can't seem to get it right!
        // ---------------------------------------------------------------------

        // A "local indirector" - Just so I don't have go down and edit the 
        // actual call everytime this bluddy thing changes names.
        private Point CalculatePoint(Point a, Point b, int distance) {
            return CalculatePoint_ByAgentFire(a, b, distance);
        }

        #region CalculatePoint_ByAgentFire
        //AgentFire: Better approach (you can rename the struct if you need):
        struct Vector2
        {
            public readonly double X;
            public readonly double Y;
            public Vector2(double x, double y) {
                this.X = x;
                this.Y = y;
            }
            public static Vector2 operator -(Vector2 a, Vector2 b) {
                return new Vector2(b.X - a.X, b.Y - a.Y);
            }
            public static Vector2 operator *(Vector2 a, double d) {
                return new Vector2(a.X * d, a.Y * d);
            }
            public override string ToString() {
                return string.Format("[{0}, {1}]", X, Y);
            }
        }
        // For getting the midpoint you just need to do the (a - b) * d action:
        //static void Main(string[] args)
        //{
        //    Vector2 a = new Vector2(1, 1);
        //    Vector2 b = new Vector2(3, 1);
        //    float distance = 0.5f; // From 0.0 to 1.0.
        //    Vector2 c = (a - b) * distance;
        //    Console.WriteLine(c);
        //}
        private Point CalculatePoint_ByAgentFire(Point a, Point b, int distance) {
            var vA = new Vector2(a.X, a.Y);
            var vB = new Vector2(b.X, b.Y);
            double lengthOfHypotenuse = LengthOfHypotenuseAsDouble(a,b);
            double portionOfDistanceFromAtoB = distance / lengthOfHypotenuse;
            var vC = (vA - vB) * portionOfDistanceFromAtoB;
            Console.WriteLine("vC="+vC);
            return new Point((int)(vC.X+0.5), (int)(vC.Y+0.5));
        }
        // Returns the length of the hypotenuse rounded to an integer, using
        // Pythagoras' Theorem for right angle triangles: The length of the
        // hypotenuse equals the sum of the square of the other two sides.
        // Ergo: h = Sqrt(a*a + b*b)
        private double LengthOfHypotenuseAsDouble(Point a, Point b) {
            double aSq = Math.Pow(Math.Abs(a.X - b.X), 2); // horizontal length squared
            double bSq = Math.Pow(Math.Abs(b.Y - b.Y), 2); // vertical length  squared
            return Math.Sqrt(aSq + bSq); // length of the hypotenuse
        }

        #endregion

        //dbaseman: I thought something looked strange about the formula ... the question 
        //you linked was how to get the point at a distance after B, whereas you want the
        //distance after A. This should give you the right answer, the start point plus 
        //distance in the vector direction.
        //
        // Didn't work as per: http://s1264.photobucket.com/albums/jj496/corlettk/?action=view&current=DrawLinesAB-broken_zps069161e9.jpg
        //
        private Point CalculatePoint_ByDbaseman(Point a, Point b, int distance) {
            // a. calculate the vector from a to b:
            double vectorX = b.X - a.X;
            double vectorY = b.Y - a.Y;
            // b. calculate the length:
            double magnitude = Math.Sqrt(vectorX * vectorX + vectorY * vectorY);
            // c. normalize the vector to unit length:
            vectorX /= magnitude;
            vectorY /= magnitude;
            // d. calculate and Draw the new vector, which is x1y1 + vxvy * (mag + distance).
            return new Point(
                (int)((double)a.X + vectorX * distance)     // x = col
              , (int)((double)a.Y + vectorY * distance)     // y = row
            );
        }

        // MBo: Try to remove 'magnitude' term in the parentheses both for X and for Y expressions.
        //
        // Didn't work as per: http://s1264.photobucket.com/albums/jj496/corlettk/?action=view&current=DrawLinesAB-broken_zps069161e9.jpg
        //
        //private Point CalculatePoint_ByMBo(Point a, Point b, int distance) {
        //    // a. calculate the vector from a to b:
        //    double vectorX = b.X - a.X;
        //    double vectorY = b.Y - a.Y;
        //    // b. calculate the length:
        //    double magnitude = Math.Sqrt(vectorX * vectorX + vectorY * vectorY);
        //    // c. normalize the vector to unit length:
        //    vectorX /= magnitude;
        //    vectorY /= magnitude;
        //    // d. calculate and Draw the new vector, which is x1y1 + vxvy * (mag + distance).
        //    return new Point(
        //        (int)(  ((double)a.X + vectorX * distance)  +  0.5  )
        //      , (int)(  ((double)a.X + vectorX * distance)  +  0.5  )
        //    );
        //}

        // Didn't work
        //private Point CalculatePoint_ByUser1556110(Point a, Point b, int distance) {
        //    Double magnitude = Math.Sqrt(Math.Pow(b.Y - a.Y, 2) + Math.Pow(b.X - a.X, 2));
        //    return new Point(
        //        (int)(a.X + distance * (b.X - a.X) / magnitude + 0.5)
        //      , (int)(a.Y + distance * (b.Y - a.Y) / magnitude + 0.5)
        //    );
        //}

        // didn't work
        //private static Point CalculatePoint_ByCadairIdris(Point a, Point b, int distance) {
        //    // a. calculate the vector from a to b:
        //    double vectorX = b.X - a.X;
        //    double vectorY = b.Y - a.Y;
        //    // b. calculate the proportion of hypotenuse
        //    double factor = distance / Math.Sqrt(vectorX*vectorX + vectorY*vectorY);
        //    // c. factor the lengths
        //    vectorX *= factor;
        //    vectorY *= factor;
        //    // d. calculate and Draw the new vector,
        //    return new Point((int)(a.X + vectorX), (int)(a.Y + vectorY));
        //}

        // Returns a point along the line A-B at the given distance from A
        // based on Mads Elvheim's answer to:
        // https://stackoverflow.com/questions/1800138/given-a-start-and-end-point-and-a-distance-calculate-a-point-along-a-line
        private Point MyCalculatePoint(Point a, Point b, int distance) {
            // a. calculate the vector from o to g:
            double vectorX = b.X - a.X;
            double vectorY = b.Y - a.Y;
            // b. calculate the length:
            double magnitude = Math.Sqrt(vectorX * vectorX + vectorY * vectorY);
            // c. normalize the vector to unit length:
            vectorX /= magnitude;
            vectorY /= magnitude;
            // d. calculate and Draw the new vector, which is x1y1 + vxvy * (mag + distance).
            return new Point(
                (int)(((double)a.X + vectorX * (magnitude + distance)) + 0.5) // x = col
              , (int)(((double)a.Y + vectorY * (magnitude + distance)) + 0.5) // y = row
            );
        }

        // =====================================================================

        private const int CELL_SIZE = 4; // width and height of each "cell" in the bitmap.

        private readonly Bitmap _bitmap; // to draw on (displayed in picBox1).
        private readonly Graphics _graphics; // to draw with.

        // actual points on _theLineString are painted red.
        private static readonly SolidBrush _thePointBrush = new SolidBrush(Color.Red);
        // ... and are labeled in Red, Courier New, 12 point, Bold
        private static readonly SolidBrush _theLabelBrush = new SolidBrush(Color.Red);
        private static readonly Font _theLabelFont = new Font("Courier New", 12, FontStyle.Bold);

        // the interveening calculated cells on the lines between actaul points are painted Black.
        private static readonly SolidBrush _theLineBrush = new SolidBrush(Color.Black);

        // the points in my line-string.
        private static readonly Point[] _theLineString = new Point[] {
            //          x,   y
            new Point(170,  85), // A
            new Point( 85,  70), // B
            //new Point(209,  66), // C
            //new Point( 98, 120), // D
            //new Point(158,  19), // E
            //new Point(  2,  61), // F
            //new Point( 42, 177), // G
            //new Point(191, 146), // H
            //new Point( 25, 128), // I
            //new Point( 95,  24)  // J
        };

        public MainForm() {
            InitializeComponent();
            // initialise "the graphics system".
            _bitmap = new Bitmap(picBox1.Width, picBox1.Height);
            _graphics = Graphics.FromImage(_bitmap);
            picBox1.Image = _bitmap;
        }

        #region actual drawing on the Grpahics

        private void DrawCell(int x, int y, Brush brush) {
            _graphics.FillRectangle(
                brush
              , x * CELL_SIZE, y * CELL_SIZE    // x, y
              , CELL_SIZE, CELL_SIZE        // width, heigth
            );
        }

        private void DrawLabel(int x, int y, char c) {
            string s = c.ToString();
            _graphics.DrawString(
                s, _theLabelFont, _theLabelBrush
              , x * CELL_SIZE + 5   // x
              , y * CELL_SIZE - 8   // y
            );
        }

        // ... there should be no mention of _graphics or CELL_SIZE below here ...

        #endregion

        #region draw points on form load

        private void MainForm_Load(object sender, EventArgs e) {
            DrawPoints();
        }

        // draws and labels each point in _theLineString
        private void DrawPoints() {
            char c = 'A'; // label text, as a char so we can increment it for each point.
            foreach ( Point p in _theLineString ) {
                DrawCell(p.X, p.Y, _thePointBrush);
                DrawLabel(p.X, p.Y, c++);
            }
        }

        #endregion

        #region DrawLines on button click

        private void btnDrawLines_Click(object sender, EventArgs e) {
            DrawLinesBetweenPointsInTheString();
        }

        // Draws "the lines" between the points in _theLineString.
        private void DrawLinesBetweenPointsInTheString() {
            int n = _theLineString.Length - 1; // one less line-segment than points
            for ( int i = 0; i < n; ++i )
                Draw(_theLineString[i], _theLineString[i + 1]);
            picBox1.Invalidate(); // tell the graphics system that the picture box needs to be repainted.
        }

        // Draws all the cells along the line from Point "a" to Point "b".
        private void Draw(Point a, Point b) {
            int maxDistance = LengthOfHypotenuse(a, b);
            for ( int distance = 1; distance < maxDistance; ++distance ) {
                var point = CalculatePoint(a, b, distance);
                DrawCell(point.X, point.X, _theLineBrush);
            }
        }

        // Returns the length of the hypotenuse rounded to an integer, using
        // Pythagoras' Theorem for right angle triangles: The length of the
        // hypotenuse equals the sum of the square of the other two sides.
        // Ergo: h = Sqrt(a*a + b*b)
        private int LengthOfHypotenuse(Point a, Point b) {
            double aSq = Math.Pow(Math.Abs(a.X - b.X), 2); // horizontal length squared
            double bSq = Math.Pow(Math.Abs(b.Y - b.Y), 2); // vertical length  squared
            return (int)(Math.Sqrt(aSq + bSq) + 0.5); // length of the hypotenuse
        }

        #endregion

        #region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent() {
            this.picBox1 = new System.Windows.Forms.PictureBox();
            this.btnDrawLines = new System.Windows.Forms.Button();
            ((System.ComponentModel.ISupportInitialize)(this.picBox1)).BeginInit();
            this.SuspendLayout();
            // 
            // picBox1
            // 
            this.picBox1.Dock = System.Windows.Forms.DockStyle.Fill;
            this.picBox1.Location = new System.Drawing.Point(0, 0);
            this.picBox1.Name = "picBox1";
            this.picBox1.Size = new System.Drawing.Size(1000, 719);
            this.picBox1.TabIndex = 0;
            this.picBox1.TabStop = false;
            // 
            // btnDrawLines
            // 
            this.btnDrawLines.Location = new System.Drawing.Point(23, 24);
            this.btnDrawLines.Name = "btnDrawLines";
            this.btnDrawLines.Size = new System.Drawing.Size(77, 23);
            this.btnDrawLines.TabIndex = 1;
            this.btnDrawLines.Text = "Draw Lines";
            this.btnDrawLines.UseVisualStyleBackColor = true;
            this.btnDrawLines.Click += new System.EventHandler(this.btnDrawLines_Click);
            // 
            // MainForm
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(1000, 719);
            this.Controls.Add(this.btnDrawLines);
            this.Controls.Add(this.picBox1);
            this.Location = new System.Drawing.Point(10, 10);
            this.MinimumSize = new System.Drawing.Size(1016, 755);
            this.Name = "MainForm";
            this.SizeGripStyle = System.Windows.Forms.SizeGripStyle.Hide;
            this.StartPosition = System.Windows.Forms.FormStartPosition.Manual;
            this.Text = "Draw Lines on a Matrix.";
            this.Load += new System.EventHandler(this.MainForm_Load);
            ((System.ComponentModel.ISupportInitialize)(this.picBox1)).EndInit();
            this.ResumeLayout(false);
        }

        private System.Windows.Forms.PictureBox picBox1;
        private System.Windows.Forms.Button btnDrawLines;
        #endregion
    }

} 
```

对不起，如果它有点长，但这是[SSCCE](http://sscce.org/ "SSCCE")从我的真实项目中挖掘出来的，它是运行[MazeOfBolton的](http://cplus.about.com/od/programmingchallenges/a/challenge12.htm)[A* 最短路径算法](http://en.wikipedia.org/wiki/A*_search_algorithm)的实现......即迷宫跑步者。

我真正想做的是预先计算迷宫（矩阵）中两个给定点（起点和目标）周围的“栅栏”（即缓冲的[MBR](http://en.wikipedia.org/wiki/Minimum_bounding_rectangle)），这样“栅栏”内的所有点都在给定的范围内与“两点之间的直线”的距离，以便快速消除远离目标的数十万条可能的路径。

请注意，这个编程挑战赛几年前就结束了，所以这里没有“竞争性剽窃”的问题。不，这不是家庭作业，事实上我是一名专业的程序员......我只是离开了我的舒适区，即使是相对简单的几何图形。叹。

所以......请任何人都可以给我任何指示，以帮助我**正确**获取CalculatePoint函数：*在给定距离处计算沿线AB的点？*

在此先感谢您的慷慨……即使读到这里。

干杯。基思。

* * *

**编辑：**我刚刚更新了发布的源代码，因为：

(1) 我刚刚意识到它不是自给自足的。我忘记了单独的 MainForm。**设计器**.cs 文件，我已将其附加到已发布代码的底部。

(2) 最新版本包括我迄今为止尝试过的内容，带有一个照片桶链接，指向每个失败的样子......而且它们都是一样的。休？怎么回事？

我想我的问题可能在其他地方，比如一些以前被其他人错过的时髦的窗口表单设置，因为我忘记发布设计器生成的代码......除了一切（在我的实际项目中）完全绘制在我期望的地方，那么为什么计算点会有所不同。我不知道！？！？！？我很沮丧，我变得暴躁，所以我想我会再等一天;-)

去显示我们经常低估了让计算机做任何事情需要付出多少努力......甚至只是画一条简单的线......它甚至不是一条曲线，更不用说一个大圆或横向墨卡托或任何东西花式...只是一个简单的粗线！？！？！？;-)

## 非常感谢所有发帖的人！

再次欢呼。基思。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-23T07:13:47.523

**计算向量 AB**

首先定义从点 A(1,-1) 到点 B(2,4) 的向量，从 B 中减去 A。向量将是 Vab(1,5)。

**计算AB的长度**

使用勾股定理计算向量 AB 的长度。

```
|Vab| = SQRT(1²+5²) 
```

长度为（四舍五入）5.1

**计算单位向量**

将向量除以其长度得到单位向量（长度为1的向量）。

```
V1(1/5.1,5/5.1) = V1(0.2, 0.98) 
```

**计算长度为 4 的向量**

现在将 V1 乘以您想要的长度，例如 4，得到 Vt。

```
Vt(0.2*4,0.98*4) = Vt(0.8,3.92) 
```

**计算目标点**

将向量 Vt 添加到点 A 以获得点 T（目标）。

```
T = A + Vt = T(1.8,2.92) 
```

**编辑：回答您的编辑**

LengthOfHypotenuse 方法应该是这样的

*   修复了计算 bSq 的错误
*   并删除了多余的 Math.Abs​​ 调用，因为 2 的 pow 始终为正
*   删除了 0.5 的添加，不知道你为什么需要那个
*   您至少应该使用浮点数作为返回值（双精度或小数也可以）

    ```
    //You should work with Vector2 class instead of Point and use their Length property
    private double LengthOfHypotenuse(Point a, Point b) {
        double aSq = Math.Pow(a.X - b.X, 2); // horizontal length squared
        double bSq = Math.Pow(a.Y - b.Y, 2); // vertical length  squared
        return Math.Sqrt(aSq + bSq); // length of the hypotenuse
    } 
    ```

方法 Draw(Point a, Point b) 应该如下所示：

*   更正了 DrawCell() 调用

    ```
    private void Draw(Point a, Point b) {
        double maxDistance = LengthOfHypotenuse(a, b);
        for (int distance = 0; distance < maxDistance; ++distance) {
            var point = CalculatePoint(new Vector2(a), new Vector2(b), distance);
            DrawCell(point.X, point.Y, _theLineBrush);
        }
    } 
    ```

您的 CalculatePoint(Point a, Point b, int distance) 方法：

*   将一些计算移到 Vector2 类中

    ```
    private Point CalculatePoint(Vector2 a, Vector2 b, int distance) {
        Vector2 vectorAB = a - b;

        return a + vectorAB.UnitVector * distance;
    } 
    ```

我为您扩展了 Vector 类以添加缺少的运算符（归功于 AgentFire）

```
 //AgentFire: Better approach (you can rename the struct if you need):
    struct Vector2 {
        public readonly double X;
        public readonly double Y;
        public Vector2(Point p) : this(p.X,p.Y) { 
        }

        public Vector2(double x, double y) {
            this.X = x;
            this.Y = y;
        }
        public static Vector2 operator -(Vector2 a, Vector2 b) {
            return new Vector2(b.X - a.X, b.Y - a.Y);
        }
        public static Vector2 operator +(Vector2 a, Vector2 b) {
            return new Vector2(b.X + a.X, b.Y + a.Y);
        }
        public static Vector2 operator *(Vector2 a, double d) {
            return new Vector2(a.X * d, a.Y * d);
        }
        public static Vector2 operator /(Vector2 a, double d) {
            return new Vector2(a.X / d, a.Y / d);
        }

        public static implicit operator Point(Vector2 a) {
            return new Point((int)a.X, (int)a.Y);
        }

        public Vector2 UnitVector {
            get { return this / Length; }
        }

        public double Length {
            get {
                double aSq = Math.Pow(X, 2);
                double bSq = Math.Pow(Y, 2);
                return Math.Sqrt(aSq + bSq);
            }
        }

        public override string ToString() {
            return string.Format("[{0}, {1}]", X, Y);
        }
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-23T07:20:15.090

更好的方法（如果需要，您可以重命名结构）：

```
struct Vector2
{
    public readonly float X;
    public readonly float Y;

    public Vector2(float x, float y)
    {
        this.X = x;
        this.Y = y;
    }

    public static Vector2 operator -(Vector2 a, Vector2 b)
    {
        return new Vector2(b.X - a.X, b.Y - a.Y);
    }
    public static Vector2 operator +(Vector2 a, Vector2 b)
    {
        return new Vector2(a.X + b.X, a.Y + b.Y);
    }
    public static Vector2 operator *(Vector2 a, float d)
    {
        return new Vector2(a.X * d, a.Y * d);
    }

    public override string ToString()
    {
        return string.Format("[{0}, {1}]", X, Y);
    }
} 
```

要获得中点，您只需要执行以下`(a - b) * d + a`操作：

```
class Program
{
    static void Main(string[] args)
    {
        Vector2 a = new Vector2(1, 1);
        Vector2 b = new Vector2(3, 1);
        float distance = 0.5f; // From 0.0 to 1.0.
        Vector2 c = (a - b) * distance + a;
        Console.WriteLine(c);
    }
} 
```

这会给你重点：

![50%](../Images/fa0bd00650bd080d3eb87bcf7cc0ef6c.png)

`output:\> [2, 1]`

之后您需要的只是从**0.0**到**1.0**并绘制像素。`for(the distance; up to`[`one`](http://en.wikipedia.org/wiki/1_(number))`; d += step)`

 ***** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-23T07:24:03.070

```
 private static Point CalculatePoint(Point a, Point b, int distance)
    {

        // a. calculate the vector from o to g:
        double vectorX = b.X - a.X;
        double vectorY = b.Y - a.Y;

        // b. calculate the proportion of hypotenuse
        double factor = distance / Math.Sqrt(vectorX * vectorX + vectorY * vectorY);

        // c. factor the lengths
        vectorX *= factor;
        vectorY *= factor;

        // d. calculate and Draw the new vector,
        return new Point((int)(a.X + vectorX), (int)(a.Y + vectorY));
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T07:10:18.363

尝试删除 X 和 Y 表达式括号中的“幅度”项：

```
(int)(  ((double)a.X + vectorX * distance)  +  0.5  ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T04:47:21.103

好的，伙计们，我发现了我的主要错误。这是一个经典的Doh！我的 Draw 方法是在 pX, p 上绘画。**X**

所以，我终于得到了一些有用的东西。请注意，我并不是说这是一个“好的解决方案”，或“唯一可行的解​​决方案”，我只是说它做了我想做的事情；-)

这是我**更新**的工作代码：（这次完整且独立；-）

```
using System;
using System.Drawing;
using System.Windows.Forms;
using System.Diagnostics;

namespace DrawLines
{
    public class MainForm : Form
    {
        #region constants and readonly attributes

        private const int CELL_SIZE = 4; // width and height of each "cell" in the bitmap.

        private readonly Bitmap _myBitmap; // to draw on (displayed in picBox1).
        private readonly Graphics _myGraphics; // to draw with.

        // actual points on _theLineString are painted red.
        private static readonly SolidBrush _thePointBrush = new SolidBrush(Color.Red);
        // ... and are labeled in /*Bold*/ Black, 16 point Courier New
        private static readonly SolidBrush _theLabelBrush = new SolidBrush(Color.Black);
        private static readonly Font _theLabelFont = new Font("Courier New", 16); //, FontStyle.Bold);

        // the interveening calculated cells on the lines between actaul points are painted Silver.
        private static readonly SolidBrush _theLineBrush = new SolidBrush(Color.Silver);

        // the points in my line-string.
        private static readonly Point[] _thePoints = new Point[] {
            //          x,   y      c i
            new Point(170,  85), // A 0 
            new Point( 85,  70), // B 1
            new Point(209,  66), // C 2
            new Point( 98, 120), // D 3
            new Point(158,  19), // E 4
            new Point(  2,  61), // F 5
            new Point( 42, 177), // G 6
            new Point(191, 146), // H 7
            new Point( 25, 128), // I 8
            new Point( 95,  24)  // J 9
        };

        #endregion

        public MainForm() {
            InitializeComponent();
            // initialise "the graphics system".
            _myBitmap = new Bitmap(picBox1.Width, picBox1.Height);
            _myGraphics = Graphics.FromImage(_myBitmap);
            picBox1.Image = _myBitmap;
        }

        #region DrawPoints upon MainForm_Load

        private void MainForm_Load(object sender, EventArgs e) {
            DrawPoints();
        }

        // draws and labels each point in _theLineString
        private void DrawPoints() {
            char c = 'A'; // label text, as a char so we can increment it for each point.
            foreach ( Point p in _thePoints ) {
                DrawCell(p.X, p.Y, _thePointBrush);
                DrawLabel(p.X, p.Y, c++);
            }
        }

        #endregion

        #region DrawLines on button click

        // =====================================================================
        // Here's the interesting bit. DrawLine was called Draw

        // Draws a line from A to B, by using X-values to calculate the Y values.
        private void DrawLine(Point a, Point b)
        {
            if ( a.Y > b.Y ) // A is below B
                Swap(ref a, ref b); // make A the topmost point (ergo sort by Y)
            Debug.Assert(a.Y < b.Y, "A is still below B!");

            var left = Math.Min(a.X, b.X);
            var right = Math.Max(a.X, b.X);
            int width = right - left;
            Debug.Assert(width >= 0, "width is negative!");

            var top = a.Y;
            var bottom = b.Y;
            int height = bottom - top;
            Debug.Assert(height >= 0, "height is negative!");

            if ( width > height ) {
                // use given X values to calculate the Y values, 
                // otherwise it "skips" some X's
                double slope = (double)height / (double)width; 
                Debug.Assert(slope >= 0, "slope is negative!");
                if (a.X <= b.X)     // a is left-of b, so draw left-to-right.
                    for ( int x=1; x<width; ++x ) // xOffset
                        DrawCell( (left+x), (a.Y + ((int)(slope*x + 0.5))), _theLineBrush);
                else                // a is right-of b, so draw right-to-left.
                    for ( int x=1; x<width; ++x ) // xOffset
                        DrawCell( (right-x), (a.Y + ((int)(slope*x + 0.5))), _theLineBrush);
            } else {
                // use given Y values to calculate the X values, 
                // otherwise it "skips" some Y's
                double slope = (double)width/ (double)height; 
                Debug.Assert(slope >= 0, "slope is negative!");
                if (a.X <= b.X) {     // a is left-of b, so draw left-to-right. (FG)
                    for ( int y=1; y<height; ++y ) // yOffset
                        DrawCell( (a.X + ((int)(slope*y + 0.5))), (top+y), _theLineBrush);
                } else {              // a is right-of b, so draw right-to-left. (DE,IJ)
                    for ( int y=1; y<height; ++y ) // yOffset
                        DrawCell( (b.X + ((int)(slope*y + 0.5))), (bottom-y), _theLineBrush);
                }
            }
        }

        private void btnDrawLines_Click(object sender, EventArgs e) {
            DrawLines();  // join the points
            DrawPoints(); // redraw the labels over the lines.
        }

        // Draws a line between each point in _theLineString.
        private void DrawLines() {
            int n = _thePoints.Length - 1; // one less line-segment than points
            for ( int i=0; i<n; ++i )
                DrawLine(_thePoints[i], _thePoints[i+1]);
            picBox1.Invalidate(); // tell the graphics system that the picture box needs to be repainted.
        }

        private void Swap(ref Point a, ref Point b) {
            Point tmp = a;
            a = b;
            b = tmp;
        }

        #endregion

        #region actual drawing on _myGraphics

        // there should be no calls to Draw or Fill outside of this region

        private void DrawCell(int x, int y, Brush brush) {
            _myGraphics.FillRectangle(
                brush
              , x*CELL_SIZE
              , y*CELL_SIZE 
              , CELL_SIZE   // width
              , CELL_SIZE   // heigth
            );
        }

        private void DrawLabel(int x, int y, char c) {
            string s = c.ToString();
            _myGraphics.DrawString(
                s, _theLabelFont, _theLabelBrush
              , x * CELL_SIZE + 5   // x
              , y * CELL_SIZE - 10  // y
            );
        }

        #endregion

        #region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent() {
            this.picBox1 = new System.Windows.Forms.PictureBox();
            this.btnDrawLines = new System.Windows.Forms.Button();
            ((System.ComponentModel.ISupportInitialize)(this.picBox1)).BeginInit();
            this.SuspendLayout();
            // 
            // picBox1
            // 
            this.picBox1.Dock = System.Windows.Forms.DockStyle.Fill;
            this.picBox1.Location = new System.Drawing.Point(0, 0);
            this.picBox1.Name = "picBox1";
            this.picBox1.Size = new System.Drawing.Size(1000, 719);
            this.picBox1.TabIndex = 0;
            this.picBox1.TabStop = false;
            // 
            // btnDrawLines
            // 
            this.btnDrawLines.Location = new System.Drawing.Point(23, 24);
            this.btnDrawLines.Name = "btnDrawLines";
            this.btnDrawLines.Size = new System.Drawing.Size(77, 23);
            this.btnDrawLines.TabIndex = 1;
            this.btnDrawLines.Text = "Draw Lines";
            this.btnDrawLines.UseVisualStyleBackColor = true;
            this.btnDrawLines.Click += new System.EventHandler(this.btnDrawLines_Click);
            // 
            // MainForm
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(1000, 719);
            this.Controls.Add(this.btnDrawLines);
            this.Controls.Add(this.picBox1);
            this.Location = new System.Drawing.Point(10, 10);
            this.MinimumSize = new System.Drawing.Size(1016, 755);
            this.Name = "MainForm";
            this.SizeGripStyle = System.Windows.Forms.SizeGripStyle.Hide;
            this.StartPosition = System.Windows.Forms.FormStartPosition.Manual;
            this.Text = "Draw Lines on a Matrix.";
            this.Load += new System.EventHandler(this.MainForm_Load);
            ((System.ComponentModel.ISupportInitialize)(this.picBox1)).EndInit();
            this.ResumeLayout(false);
        }

        private System.Windows.Forms.PictureBox picBox1;
        private System.Windows.Forms.Button btnDrawLines;
        #endregion
    }

} 
```

**编辑 - 更新代码：**此版本绘制“实线”。之前发布的版本在几乎垂直的线上跳过了单元格，因此在这些情况下我反转了计算 X 值（而不是 Y 值）的算法......现在我可以使用它来设置（和绘制）“实心栅栏”围绕“可导航区域”;-)

这是正确结果的**更新**图片。

![DrawLiness_solid_success.png](../Images/f3dc9c6ea6c1784eb77febb022bcd164.png)

**再次感谢**所有帮助过的人......你确实提供了帮助;-)

干杯。基思。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-23T07:20:35.557

```
private Point CalculatePoint(Point a, Point b, int distance) {
      Point newPoint = new Point(10,10);
      Double Magnitude = Math.Sqrt(Math.Pow((b.Y - a.Y),2) + Math.Pow((b.X - a.X),2));
      newPoint.X = (int)(a.X + (distance * ((b.X - a.X)/magnitude)));
      newPoint.Y = (int)(a.Y + (distance * ((b.Y - a.Y)/magnitude)));
      return newPoint;
} 
```****

# javascript - AcceptVerbs 在 Web API 控制器中不起作用

> ID：12550366
> 
> 赞同：1
> 
> 时间：2012-09-23T06:57:11.107
> 
> 标签：javascript, asp.net-mvc-4, asp.net-web-api

我正在尝试通过 ajax 请求调用 Web API 控制器中的操作，如下所示

```
$.ajax({
            url: "/api/GuestPartyAPI/" + cerid,
            type: "GETAD",
            async: false,
            data: { Id: id, Name: name, NeedsHotel: needshotel_bool, TableNo: tableno, QR_CodeImage: qrcodeimage,
                AddressLabel: addresslabel, Address_1: address1, Address_2: address2, City: city, State: state,
                PostalCode: postalcode, Country: country, Email: email, Phone: phone
            },
            dataType: "json" 
        }).fail(function (jqXHR, textStatus) {
            console.log(jqXHR);
            console.log(textStatus);
            //alert("cerid " + cerid);
            //alert("Request failed: " + textStatus);
        }); 
```

Controller中的Action如下

```
[AcceptVerbs("GETAD")]
    public HttpResponseMessage GetGuestPartyCer(int cerid, GuestParty guestparty) 
    {

        if (ModelState.IsValid)
        {
            db.GuestParties.AddObject(guestparty);
            db.SaveChanges();

            CeremonyGuestParty ceremonygp = new CeremonyGuestParty(); //create a CeremonyGuestParty entry to link ceremony and guestparty
            ceremonygp.CeremonyId = cerid;
            ceremonygp.GuestPartyId = guestparty.Id;
            db.CeremonyGuestParties.AddObject(ceremonygp);
            db.SaveChanges();

            HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, guestparty);
            response.Headers.Location = new Uri(Url.Link("DefaultApi", new { id = guestparty.Id }));
            return response;
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    } 
```

同一个控制器中的一个类似 Action 正在通过类似的 ajax 请求使用 [AcceptVerbs("GETAC")] ，但不是这个，甚至没有通过将动词“GETAD”更改为其他内容。

这是代码 $.ajax({ url: "/api/GuestPartyAPI/" + id, type: "GETAC", async: false, dataType: "json" });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:38:59.807

您的问题与使用无关，`AcceptVerbs`但路由和操作参数匹配如何工作：

如果动作参数来自路由参数，则参数名称必须与您在路由中定义的参数名称匹配。

因此，如果您使用 ApiControllers 的默认路由：

```
config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

请注意，您的路线参数称为`{id}`.

因此，在您的操作中，您需要使用相同的名称`id`，以便框架可以进行匹配。

只需将您的操作签名更改`cerid`为`id`，它应该可以工作：

```
public HttpResponseMessage GetGuestPartyCer(int id, GuestParty guestparty) 
```

# mysql - 在mysql中使用带有单个关键字的单个where条件搜索表的所有列

> ID：12550368
> 
> 赞同：23
> 
> 时间：2012-09-23T06:57:41.320
> 
> 标签：mysql, sql, search

我有一个包含 64 个不同字段的表。我将在其中使用单个关键字进行搜索，结果应与任何字段中的关键字匹配。给出一些建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-30T06:30:38.083

```
SELECT * FROM `some_table`
WHERE
CONCAT_WS('|',`column1`,`column2`,`column3`,`column4`,`column64`) # single condition, many columns
LIKE '%VT%' 
```

瞧。

'|' 顺便说一句，分隔符是为了防止您找到巧合的匹配项，例如，column1 以“V”结尾，column2 以“T”开头，这会使您在搜索“VT”时出现误报。

我不确定上述方法是否比该`OR`方法更快（我猜它们的速度相同），但如果您手动编写查询，它肯定涉及更少的输入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-23T07:00:57.557

您可以将 where 与多个条件一起使用 `OR`

喜欢

```
where
name = 'expected'
OR rate ='expected' 
OR country ='expected' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-19T17:49:00.673

另一种可能性是使用 FOR XML 将所有列打印到单个字段...像这样：

```
SELECT c.*
FROM (
SELECT a.*
,( SELECT *
   FROM table_to_search b
   WHERE a.KeyField = b.KeyField
   FOR XML RAW) AS `Full_Text_Record`
FROM table_to_search a) c
WHERE c.`Full_Text_Record` LIKE '%Search_string%' 
```

如果它是一个特别大的表，可能需要一段时间才能运行，但它应该强制你找出该字符串是否存在于任何给定的表中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T07:08:11.573

我看不出您的查询简单但冗长的方法：

```
SET @term = "Somesearch";
SELECT id, title FROM sometable WHERE
    col1 LIKE '%@term%' OR
    col2 LIKE '%@term%' OR
    col3 LIKE '%@term%' ...; 
```

您可以只使用特定于语言的变量，而不是使用 MySQL 变量，但为了举例，我想我会坚持使用 MySQL 本身。

“...”是您放置其他 61 个列/字段的位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T07:08:27.380

最简单的解决方案是使用多个`ORs`.

```
select * from TAB where col1 like "%VAR%" OR col2 like "%VAR%" OR......col64 like "%VAR%"; 
```

您可以根据要求使用`like`or `=`，但每次添加新列时都需要更改查询。

作为替代方案，您可以获取`SQLDump for that table`然后`search`该文件。

通过一些谷歌搜索，

1.  看看这个项目是否有用 - [http://code.google.com/p/anywhereindb/](http://code.google.com/p/anywhereindb/)。搜索所有领域并受到许多人的称赞。

2.  尝试使用`information_schema`表中的信息。查找表中的所有列。现在，尝试使用此信息形成您的查询。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-23T07:09:11.317

如果您可以将此 SQL Server 语法转换为 MySQL

```
WHERE
name = @keyword OR
country = @keyword OR
department = @keyword OR
@keyword IS NULL -- match all when search text is empty 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-10T18:08:41.953

您可以编写一个查询，该查询将为表中的每一列生成一个查询。在下面的示例中，架构（“所有者”）是“DEV_USER”具有 64 个字段的表称为“CUSTOMER_INFO”搜索条件是其中值为“VT”的任何列：

```
select 'SELECT ' || COLUMN_NAME || ' FROM CUSTOMER_INFO
WHERE '  || COLUMN_NAME || q'# LIKE '%VT%';#'
FROM ALL_TAB_COLS 
WHERE OWNER = 'DEV_USER'
AND TABLE_NAME = 'CUSTOMER_INFO'; 
```

这一个查询将为您生成每个字段的查询。运行上述结果将是；

```
SELECT ADDRESS_1 FROM CUSTOMER_INFO
WHERE ADDRESS_1 LIKE '%VT%';

SELECT ADDRESS_2 FROM CUSTOMER_INFO
WHERE ADDRESS_2 LIKE '%VT%';

SELECT CITY FROM CUSTOMER_ADDRESSES_QASB
WHERE CITY LIKE '%VT%';

SELECT STATE_PROVINCE FROM CUSTOMER_INFO
WHERE STATE_PROVINCE LIKE '%VT%';

SELECT ZIP_POSTAL_CODE FROM CUSTOMER_INFO
WHERE ZIP_POSTAL_CODE LIKE '%VT%';
WHERE LATITUDE LIKE '%VT%';

... and so on for each column in the table 
```

然后，您只需将那些从您的第一个查询生成的查询粘贴到另一个选项卡中并运行它们。

希望有帮助。:-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-22T19:46:43.673

您可以使用动态 SQL 生成并执行搜索所有列的查询。

```
DELIMITER $$
CREATE PROCEDURE searchAllCols(inDB VARCHAR(64), inTable VARCHAR(64), search VARCHAR(32))
BEGIN
    SET @matches = (
        SELECT GROUP_CONCAT(CONCAT('`', COLUMN_NAME, '` LIKE "%', search, '%"') SEPARATOR ' OR ')
        FROM INFORMATION_SCHEMA.COLUMNS
        WHERE table_name = inTable and table_schema = inDB);
    SET @query = CONCAT('SELECT * FROM `', inDB, '`.`', inTable, '` WHERE ', @matches);
    PREPARE stmt FROM @query;
    EXECUTE stmt;
END
$$
DELIMITER ;
CALL searchAllCols('table_to_search', 'searchString'); 
```

# repository - 是否有任何理由不使用标准网络托管服务托管软件存储库？

> ID：12550369
> 
> 赞同：-1
> 
> 时间：2012-09-23T06:57:48.857
> 
> 标签：repository

我有网络空间，我正在考虑在上面设置一个 git 存储库。

如果我正在开发软件并且想在线托管存储库（CVS、SVN、git 等），是否有任何理由不使用标准的网络托管服务提供商（GoDaddy 等）来执行此操作？我在考虑安全性、可靠性等方面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T14:09:43.550

不使用标准公司的一个原因是通常需要 shell 访问来设置版本控制系统 (VCS)。许多提供商不会在正常的网络空间上提供 shell 访问权限。

当您开发开源软件时，我建议您托管在[SourceForge](http://sourceforge.net/)、[github](https://github.com)、[Google Code](http://code.google.com)或类似的提供商，因为您的代码在那里是公开的，您将获得一个问题跟踪器和其他一些可能对您有所帮助的工具。例如，在 github 上为您的项目添加更多开发人员非常容易。

当你在开发闭源软件时，你仍然可以使用 github，这给你带来了与上面提到的相同的优势，但当然每月花费你几块钱。开源项目是免费的。

因此，虽然没有真正的理由不使用标准托管服务提供商，但有充分的理由使用专门从事托管代码的公司。

正如您特别要求的安全性：github（我以它为例，因为我也在那里托管我的代码）为您提供[了他们为确保您的代码安全所做的工作的完整信息列表](https://help.github.com/articles/github-security)。

# bash - 在 bash 中生成不重复的随机数序列

> ID：12550372
> 
> 赞同：3
> 
> 时间：2012-09-23T06:58:38.810
> 
> 标签：bash, random, numbers

今晚我一直在努力学习 bash，我一直在尝试创建一个随机数序列，它使用一个范围内的所有数字，并且每个数字只使用一次。因此，输入 1-5 的范围将输出 4-3-5-2-1 或 2-5-1-3-4 等。我被困在这个问题上。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:08:24.043

以下命令并非特定于 bash，但它有效

```
seq 1 5 | shuf 
```

更具体的 bash 子字符串

```
x=12345
for((i=5;i>0;i--));do
  ((r=RANDOM%i+1))
  echo ${x:r-1:1}
  x=${x:0:r-1}${x:r}
done 
```

# java - 将固定电话连接到计算机以接听电话

> ID：12550376
> 
> 赞同：1
> 
> 时间：2012-09-23T06:59:18.647
> 
> 标签：java, networking, phone-call

我想将我的固定电话连接到计算机并通过计算机接听电话。我想为此创建一个应用程序。此应用程序将能够接听来电并创建新呼叫。可以在java中完成吗？任何人都给我一些想法。

# python - python的异常中包含的errnos是否与“linux/errno.h”中的errnos相同？

> ID：12550379
> 
> 赞同：3
> 
> 时间：2012-09-23T06:59:31.300
> 
> 标签：python, linux, sockets, exception, error-handling

据我所知，python的异常返回的大部分errnos与“linux/errno.h”中的errnos是一样的。但有时，事情并不像我期望的那样：

例如，当套接字连接抛出 socket.timeout 异常时，它返回的 errno 应该是 110，然而，它的 errno 始终是`None`：

```
try:
    address = ('8.8.8.8', 12345)  
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) 
    s.settimeout(1)
    s.connect(address)  
except EnvironmentError as e:
    print e.errno      # None
    print e.strerror   # "time out" 
```

其次，当抛出与地址相关的异常时，errno 将为负数，但 linux/errno.h 中的 errnos 在 1 到 133 之间：

```
try:
    address = ('xxxxxxx', 12345)
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect(address)
except socket.gaierror, v:
    print v[0]     # -5 
```

在这种情况下，将打印 -5。

我对所有这些错误感到很困惑。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:22:06.010

只有 OSError 和 IOError 带有 errno 值。将`socket.gaierror`返回`getaddrinfo(3)`错误代码。其他异常通常只带有字符串。代码在套接字模块中。-5 是`socket.EAI_NODATA`，表示“指定的网络主机存在，但没有定义任何网络地址”。

# objective-c - NSXMLParser 委托方法在 iOS6 中不起作用

> ID：12550381
> 
> 赞同：1
> 
> 时间：2012-09-23T06:59:51.363
> 
> 标签：objective-c, ios, nsxmlparser

NSXMLParser 委托方法在 iOS6 中未被调用，但在 iOS5 中运行良好。这就是我调用解析器的方式

```
NSURL *url = [NSURL fileURLWithPath:filePath];
    NSXMLParser *xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    //Set delegate
    xmlParser.delegate=self;

    //Start parsing the XML file.
    BOOL success = [xmlParser parse];

    if(success)
        NSLog(@"No Errors");
    else
        NSLog(@"Error Error Error!!!");

    [xmlParser release]; 
```

# javascript - Require.js + TypeError: Backbone 优化后未定义

> ID：12550385
> 
> 赞同：4
> 
> 时间：2012-09-23T07:00:12.680
> 
> 标签：javascript, scala, backbone.js, playframework, requirejs

Backbone 应用程序经过预优化后运行良好。使用 r.js（与杏仁）后，我成功生成了一个输出文件，该文件似乎总是在紧跟骨干的模块中抛出“TypeError：Backbone is undefined”错误。

例如，当 r.js 的输出如下所示时：

```
/consumer/public/javascripts/vendor/almond.js
/consumer/public/javascripts/vendor/jquery-1.7.2.js
/consumer/public/javascripts/vendor/underscore.js
/consumer/public/javascripts/vendor/bootstrap.js
/consumer/public/javascripts/vendor/backbone.js
/consumer/public/javascripts/rjs/src/mnp/prop_m.js
/consumer/public/javascripts/rjs/src/mnp/prop_c.js
/consumer/public/javascripts/vendor/play-mustache.js
...
/consumer/public/javascripts/main.js 
```

在浏览器中加载优化文件后，在引用 Backbone 时会在 'prop_m.js' 模块中抛出上述错误。使用 require 2.0.5、Backbone 0.9.2 和 almond 0.1.4。提前感谢您的帮助。

PS：build.js 看起来像这样：

```
 ({
    baseUrl:   "./",
    mainConfigFile: "main.js",
    paths: {
    'almond': 'vendor/almond',

        // need a path to the cs-compiled .js file
        'app' : '../../target/scala-2.9.1/resource_managed/main/public/javascripts/rjs/src/app',
        'mnp/router' : '../../target/scala-2.9.1/resource_managed/main/public/javascripts/rjs/src/mnp/router',
        'mnp/search_form_v' : '../../target/scala-2.9.1/resource_managed/main/public/javascripts/rjs/src/mnp/search_form_v',
        'mnp/prop_c' : '../../target/scala-2.9.1/resource_managed/main/public/javascripts/rjs/src/mnp/prop_c',
        'mnp/prop_m' : '../../target/scala-2.9.1/resource_managed/main/public/javascripts/rjs/src/mnp/prop_m',
        'mnp/prop_list_v' : '../../target/scala-2.9.1/resource_managed/main/public/javascripts/rjs/src/mnp/prop_list_v',
        'mnp/prop_item_v' : '../../target/scala-2.9.1/resource_managed/main/public/javascripts/rjs/src/mnp/prop_item_v'
    },

    /*not compatible with modules*/
    name: 'vendor/almond',
    include: ["main"],

    out: "dist/app.js",
    /*not compatible with modules*/

    keepBuildDir: false,

    preserveLicenseComments: false,
    optimize: "none", 
    wrap: {
        start: "(function(global, define) {\n"+
           // check for amd loader on global namespace
            "  var globalDefine = global.define;\n",

        end:   "  var library = require('main');\n"+
            "  if(typeof module !== 'undefined' && module.exports) {\n"+
            // export library for node
            "    module.exports = library;\n"+
            "  } else if(globalDefine) {\n"+
            // define library for global amd loader that is already present
            "    (function (define) {\n"+
            "      define(function () { return library; });\n"+
            "    }(globalDefine));\n"+
            "  } else {\n"+
            // define library on global namespace for inline script loading
            "    global['main'] = library;\n"+
            "  }\n"+
            "}(this));\n"
    }

})` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:28:04.597

FWIW：如果有人遇到这个问题……使用 amd 版本的主干和下划线似乎可以解决问题。IE。amd 版本有效，垫片没有

[使用 RequireJS 加载 Backbone 和 Underscore](https://stackoverflow.com/questions/8131265/loading-backbone-and-underscore-using-requirejs?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T22:08:15.333

当我忘记包含我`shim`的 s 时，我遇到了这个问题。我通过在构建配置中设置`mainConfigFile`我的`main.js`文件来解决它，例如如下所示：[https ://github.com/jrburke/r.js/blob/master/build/example.build.js](https://github.com/jrburke/r.js/blob/master/build/example.build.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T07:15:11.267

您可以尝试使用`inlineText: true`以确保主干在您的编译`.js`文件中

此外，为了避免关注存储路径的 2 个对象，我会推荐类似的东西`mainConfigFile: "main.js"`- 像魅力一样工作 ;) 编辑：你为什么要设置一个`mainConfigFile`选项*和*路径？

# ruby - 需要一个红宝石守护进程

> ID：12550388
> 
> 赞同：1
> 
> 时间：2012-09-23T07:00:32.063
> 
> 标签：ruby, linux, rubygems

我正在尝试遵循[Head Labs的](http://labs.headlondon.com/)[Skinny Daemon](http://labs.headlondon.com/2010/07/skinny-daemons/)教程，因为它完全符合我的需要。我也喜欢将应用程序制作成 gem 的方式，但它包含一个瘦服务器，因此我可以在需要时获取应用程序的脉搏。

我已经按照教程进行了修改，直到可以构建和安装 gem。但是当我尝试使用以下命令启动我的 gem 时，我得到了这个：

```
$ myservice start
-bash: myservice: command not found 
```

我怀疑该教程有点旧，并且由于某种原因 gem 安装程序没有将 gem 位置添加到我的路径中。

我怎样才能使本教程工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:16:47.903

首先，使用 Jeweler 有点过时了。改为使用`bundle gem`。我也没有在教程中看到指定`.gemfile`在`bin`. 如何做到这一点你在这里[http://guides.rubygems.org/make-your-own-gem/#adding-an-executable](http://guides.rubygems.org/make-your-own-gem/#adding-an-executable)。但是如果你使用 Bundler 创建你的 gem 脚手架，那么它将自动设置为：

```
gem.files         = `git ls-files`.split($\)
gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) } 
```

# ios - Facebook ios sdk 禁用 ARC

> ID：12550393
> 
> 赞同：2
> 
> 时间：2012-09-23T07:01:42.720
> 
> 标签：ios, facebook, sdk, github, automatic-ref-counting

我有一个非 ARC 项目，我需要集成 Facebook SDK。据我了解，当前版本的框架（3.0.8）将与启用 ARC 一起使用。但是我看了一下 github master 分支（实际上是 master 和 preview），并且......那里有很多保留/释放/自动释放调用，并且项目的“Objective-C 自动引用计数”已关闭。

所以我想，它不支持从头开始的 ARC，我们需要运行特殊的脚本来构建静态库，就像**boz** [提到](http://facebook.stackoverflow.com/questions/8421338/iphone-arc-facebook-sdk)的那样。但是 1 - 那里不再有这样的脚本，2 - github 同一分支上的示例使用 ARC！至于我 - 最好只使用来自 github 的非 ARC 资源，但可以保证一切正常吗？很奇怪：原始的 github 源代码是非 ARC 的，但示例是面向 ARC 的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T02:24:16.787

无论您的项目是否启用了 ARC，您都可以使用 Facebook SDK。只需从[https://developers.facebook.com/ios（iOS](https://developers.facebook.com/ios)开发中心）获取 SDK 包。下载并安装 SDK 后，您只需按照入门文档（在 iOS 开发中心下）中的说明设置 SDK。

# c++ - 为什么我们使用非类型模板参数？

> ID：12550398
> 
> 赞同：4
> 
> 时间：2012-09-23T07:02:14.077
> 
> 标签：c++, templates, arguments

我理解这个概念，但我不知道为什么我需要使用非类型模板参数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-23T07:06:54.353

有很多用例，所以让我们看一下它们必不可少的几种情况：

*   固定大小的数组或[矩阵](http://project-mathlibs.web.cern.ch/project-mathlibs/sw/html/SMatrixDoc.html)类，参见例如 C++11 [std::array](http://en.cppreference.com/w/cpp/container/array)或[boost::array](http://www.boost.org/doc/libs/1_51_0/doc/html/array.html)。

*   [数组的std::begin](http://en.cppreference.com/w/cpp/iterator/begin)的可能实现，或任何需要固定大小的 C 样式数组大小的代码，例如：

返回数组的大小：

```
template <typename T, unsigned int N>
unsigned int size(T const (&)[N])
{
  return N;
} 
```

它们在模板元编程中也非常有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T08:05:57.847

一个真实的例子来自结合非类型模板参数和模板参数推导来推导数组的大小：

```
template <typename T, unsigned int N>
void print_array(T const (&arr)[N])       // both T and N are deduced
{
    std::cout << "[";
    for (unsigned int i = 0; i != N; ++i)
    {
        if (i != 0) { std::cout << ", ";
        std::cout << arr[i];
    }
    std::cout << "]";
}

int main()
{
    double x[] = { 1.5, -7.125, 0, std::sin(0.5) };
    print_array(x);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T07:06:22.933

在编译时编程。考虑[维基百科](http://en.wikipedia.org/wiki/Template_metaprogramming#Compile-time_class_generation)的例子，

```
template <int N>
struct Factorial {
    enum { value = N * Factorial<N - 1>::value };
};

template <>
struct Factorial<0> {
    enum { value = 1 };
};

// Factorial<4>::value == 24
// Factorial<0>::value == 1
const int x = Factorial<4>::value; // == 24
const int y = Factorial<0>::value; // == 1 
```

WikiPedia 页面上还有许多其他示例。

# 编辑

正如评论中提到的，上面的示例演示***了可以做什么，***而不是***人们在实际项目中使用什么***。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T09:07:01.757

非类型参数的另一个例子是：

```
template <int N>
struct A
{
    // Other fields.
    int data[N];
}; 
```

这里数据字段的长度是参数化的。此结构的不同实例化可以具有不同长度的数组。

# android - 平板友好的界面和Android开发中的兼容性

> ID：12550400
> 
> 赞同：1
> 
> 时间：2012-09-23T07:03:13.127
> 
> 标签：android, user-interface, compatibility

我想开发一个新的 Android 应用程序。Droid 3.0+ 的设计指南鼓励使用片段来创建更好地利用平板电脑屏幕空间的 UI。此外，从 Droid 3.0+ 开始，我已经读到菜单栏应该存在于每个有菜单的活动上，而不是使用普通的旧菜单键

![Android UI 菜单栏](../Images/e8e5d75593f5f4de3ebbfb7e8b23df5a.png)

SDK 11+ 支持这些功能，但我希望支持 SDK 8 作为最低 SDK 以实现最佳市场份额（请参阅[此处](https://developer.android.com/about/dashboards/index.html)）。

我怎样才能实现我的两个目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:11:26.800

你有两种可能：

1.  谷歌为使用片段和操作栏开发应用程序提供[支持库，并支持旧的 android 版本。](http://developer.android.com/tools/extras/support-library.html)

2.  有很棒的工具[Action Bar Sherlock](http://actionbarsherlock.com/)。

# ruby-on-rails - 如何在登录期间添加额外检查（Rails + Devise）

> ID：12550404
> 
> 赞同：2
> 
> 时间：2012-09-23T07:03:36.760
> 
> 标签：ruby-on-rails, devise

我有一个使用设备的 Ruby On Rails 3.x 应用程序。

我的目标是在登录屏幕上添加一个 Yubikey 输入字段。

我已经生成了视图，调整了屏幕（即显示了额外的字段）并更新了路线，如下所示：

```
 devise_for :users, :controllers => { :sessions=>"sessions", :registrations => "registrations" }, :path => "users", :path_names => { :sign_in => "login", :sign_out => "logout", :sign_up => "register" } 
```

不要忘记，我创建了一个会话控制器：

```
class SessionsController < Devise::SessionsController
  def create
    begin
      if do_some_other_checks
        super
      else
        build_resource
        clean_up_passwords(resource)
        flash[:alert] = "Login error"
        render :new
      end
    rescue => e
        build_resource
        clean_up_passwords(resource)
        flash[:alert] = "Login error"
        render :new
    end
  end
end 
```

不幸的是，代码并不能很好地工作，它在 Devise 让用户登录后被调用，即即使附加检查失败，用户仍然可以登录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:42:59.290

有一种简单的方法可以通过添加以下内容在您的用户模型中执行此操作，无需创建任何设计控制器或更改默认路由...

```
class User < ActiveRecord::Base

 # check to see if a user is active or not and deny login if not
 def active_for_authentication?
   super && do_some_other_checks
 end

end 
```

# android - 如何将大文件上传到 Android 中的 PHP 服务器

> ID：12550405
> 
> 赞同：0
> 
> 时间：2012-09-23T07:03:39.273
> 
> 标签：android, android-internet

我正在尝试将图像和歌曲等文件上传到我的 PHP 服务器，但是当我尝试上传大文件（文件大小 5MB 或更大）时，我遇到了一些错误。我能够成功上传接近 500kb 的文件。请帮助我让我知道如何上传大文件大小..

java文件的代码：

```
public class UploadAudioDemo extends Activity {

    private static final int SELECT_IMAGE = 1, SELECT_AUDIO = 2;
    String selectedPath = "";
    Button ImageBtn, AudioBtn;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        ImageBtn = (Button)findViewById(R.id.image_btn);
        AudioBtn = (Button)findViewById(R.id.audio_btn);
        ImageBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(Intent.createChooser(intent,"Select Image"), SELECT_IMAGE);
            }
        });
        AudioBtn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent intent = new Intent();
                intent.setType("audio/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(Intent.createChooser(intent,"Select Audio"), SELECT_AUDIO);
            }
        });
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_IMAGE)
            {
                System.out.println("SELECT_IMAGE");
                Uri selectedImageUri = data.getData();
                selectedPath = getPath(selectedImageUri);
                System.out.println("SELECT_IMAGE Path : " + selectedPath);
                doFileUpload();
            }
            else if(requestCode == SELECT_AUDIO)
            {
                System.out.println("SELECT_AUDIO");
                Uri selectedImageUri = data.getData();
                selectedPath = getPath(selectedImageUri);
                System.out.println("SELECT_AUDIO Path : " + selectedPath);
                doFileUpload();
            }
        }
    }

    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

    private void doFileUpload(){
        HttpURLConnection conn = null;
        DataOutputStream dos = null;
        DataInputStream inStream = null;
        String lineEnd = "\r\n";
        String twoHyphens = "--";
        String boundary =  "*****";
        int bytesRead, bytesAvailable, bufferSize;
        byte[] buffer;
        int maxBufferSize = 1*1024*1024*1024;
        String urlString = "http://abhishekpnf.my3gb.com/test/testupload.php";
        try
        {
            FileInputStream fileInputStream = new FileInputStream(new File(selectedPath) );
            URL url = new URL(urlString);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoInput(true);
            conn.setDoOutput(true);
            conn.setUseCaches(false);
            conn.setRequestMethod("POST");
            conn.setRequestProperty("Connection", "Keep-Alive");
            conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
            dos = new DataOutputStream( conn.getOutputStream() );
            dos.writeBytes(twoHyphens + boundary + lineEnd);
            dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\"" + selectedPath + "\"" + lineEnd);
            dos.writeBytes(lineEnd);
            bytesAvailable = fileInputStream.available();
            bufferSize = Math.min(bytesAvailable, maxBufferSize);
            buffer = new byte[bufferSize];
            bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            while (bytesRead > 0)
            {
                dos.write(buffer, 0, bufferSize);
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
            }
            dos.writeBytes(lineEnd);
            dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
            Log.v("Debug","File is written");
            fileInputStream.close();
            dos.flush();
            dos.close();
        }
        catch(SocketException ex)
        {
          Log.v("Error : " , "Error on soapPrimitiveData() " + ex.getMessage());
            ex.printStackTrace();
        }
        catch (MalformedURLException ex)
        {
             Log.v("Debug", "error: " + ex.getMessage(), ex);
        }
        catch (IOException ioe)
        {
             Log.v("Debug", "error: " + ioe.getMessage(), ioe);
        }

        try {
              inStream = new DataInputStream ( conn.getInputStream() );
              String str;
              Log.v("Debug","Server Response "+String.valueOf(inStream));
              while (( str = inStream.readLine()) != null)
              {
                   Log.v("Debug","Server Response "+str);
                   Toast.makeText(this, "Status: "+str, Toast.LENGTH_LONG).show();
              }
              inStream.close();
        }
        catch (IOException ioex)
        {
             Log.v("Debug", "error: " + ioex.getMessage(), ioex);
        }
      }
} 
```

我还包括以下内容`Uses Permissions:`

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

日志猫：

```
09-23 12:26:15.676: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=pack.coderzheaven/.UploadAudioDemo }
09-23 12:26:15.746: D/AndroidRuntime(522): Shutting down VM
09-23 12:26:15.746: D/dalvikvm(522): Debugger has detached; object registry had 1 entries
09-23 12:26:15.806: I/AndroidRuntime(522): NOTE: attach of thread 'Binder Thread #3' failed
09-23 12:26:21.627: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.CHOOSER cmp=android/com.android.internal.app.ChooserActivity (has extras) }
09-23 12:26:22.428: I/ActivityManager(59): Displayed activity android/com.android.internal.app.ChooserActivity: 659 ms (total 6698 ms)
09-23 12:26:24.247: I/ActivityManager(59): Starting activity: Intent { act=android.intent.action.GET_CONTENT typ=audio/* flg=0x3000000 cmp=com.android.music/.MusicPicker }
09-23 12:26:24.867: I/ActivityManager(59): Displayed activity com.android.music/.MusicPicker: 599 ms (total 599 ms)
09-23 12:26:27.427: D/AudioSink(34): bufferCount (4) is too small and increased to 12
09-23 12:26:27.652: W/AudioFlinger(34): write blocked for 83 msecs, 98 delayed writes, thread 0xb3d0
09-23 12:26:29.106: W/TimedEventQueue(34): Event 17 was not found in the queue, already cancelled?
09-23 12:26:29.276: I/System.out(507): SELECT_AUDIO
09-23 12:26:29.306: I/System.out(507): SELECT_AUDIO Path : /mnt/sdcard/download/tu_judda.mp3
09-23 12:26:34.986: D/dalvikvm(507): GC_FOR_MALLOC freed 4352 objects / 283128 bytes in 110ms
09-23 12:26:35.076: I/dalvikvm-heap(507): Grow heap (frag case) to 7.707MB for 5277339-byte allocation
09-23 12:26:35.256: D/dalvikvm(507): GC_FOR_MALLOC freed 1424 objects / 83568 bytes in 173ms
09-23 12:26:35.346: D/dalvikvm(507): GC_FOR_MALLOC freed 42 objects / 1888 bytes in 83ms
09-23 12:26:35.516: I/dalvikvm-heap(507): Grow heap (frag case) to 17.693MB for 10554880-byte allocation
09-23 12:26:35.696: D/dalvikvm(507): GC_FOR_MALLOC freed 0 objects / 0 bytes in 178ms
09-23 12:26:35.696: V/Debug(507): File is written
09-23 12:26:39.083: W/ActivityManager(59): Launch timeout has expired, giving up wake lock!
09-23 12:26:39.244: W/ActivityManager(59): Activity idle timeout for HistoryRecord{4504efe8 pack.coderzheaven/.UploadAudioDemo}
09-23 12:26:39.809: D/SntpClient(59): request time failed: java.net.SocketException: Address family not supported by protocol 
```

我已经等了 25-30 分钟，但屏幕保持不变，文件都没有上传到服务器......

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T12:15:51.023

您还应该包括以下使用权限：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# osx-mountain-lion - xcode45-dp4 通知中心

> ID：12550406
> 
> 赞同：1
> 
> 时间：2012-09-23T07:03:58.787
> 
> 标签：osx-mountain-lion, xcode4.5

在尝试开发者预览后，Xcode 现在在通知中心显示为“Xcode45-DP4”。即使在安装更新并删除 Xcode45-DP4.app 之后。

是否有需要清除缓存才能更正？

# android - 当它们彼此相等时更改textViews？

> ID：12550407
> 
> 赞同：0
> 
> 时间：2012-09-23T07:04:14.820
> 
> 标签：android, android-widget

我的应用程序中现在有两个 textView。一个 textView 用作 Counter，其他服务器用作 Limit。我想要完成的是当计数器等于限制时，计数器设置回零并且限制增加 100。

```
private int i = 0;
Spinner spinnerMonsters = (Spinner) findViewById(R.id.spinnerMonsters);
TextView textViewBattleResults = (TextView) findViewById(R.id.textViewBattleResults);
TextView textViewXPValue = (TextView) findViewById(R.id.textViewXPValue);
TextView textViewXpNextLevel = (TextView) findViewById(R.id.textViewXpNextLevel);

        if (textViewXPValue.getText().toString().equals(textViewXpNextLevel.getText().toString())) {
            int newLimit = Integer.parseInt(textViewXpNextLevel.getText().toString()) + 100;
            textViewXpNextLevel.setText(newLimit + "");
            textViewXPValue.setText("0");
        }

        else {
            textViewXPValue.setText(textViewXPValue.getText().toString());
            textViewXpNextLevel.getText().toString();           
        }

        //Monster sequences

        if (spinnerMonsters.getSelectedItem().toString().equals("(0) Training Dummy")) {
            textViewBattleResults.setText("You have killed Training Dummy for 10 experience points!");
            i = i+10;
            textViewXPValue.setText(String.valueOf(i));
        }
        else {
            textViewBattleResults.setText(" ");
            textViewXPValue.setText(textViewXPValue.getText().toString());
            }

        if (spinnerMonsters.getSelectedItem().toString().equals("(2) Cockroach")) {
            textViewBattleResults.setText("You have killed a Cockroach for 27 experience points!");
            i = i+27;
            textViewXPValue.setText(String.valueOf(i));
        }
        else {
            textViewBattleResults.setText(" ");
            textViewXPValue.setText(textViewXPValue.getText().toString());
            }

        }

    }); 
```

这里的问题是当点击按钮时计数器会增加十。但是当 Counter 等于 Limit 时，Limit 增加 100，并且 Counter 保持相同的数字并且不会重置为零。

有什么建议么..？

**编辑**

另外，如果计数器等于或大于限制，我将如何做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:39:23.237

您不会将 i 的值重置为零。您首先将 xpvalue 的文本设置为零，然后将其文本设置为 i 的当前值，该值不为零。

# css - BOOTSTRAP CSS 照片墙覆盖页面

> ID：12550411
> 
> 赞同：0
> 
> 时间：2012-09-23T07:05:11.597
> 
> 标签：css, twitter-bootstrap

我试图用小照片覆盖整个页面，但我发现我不能导致它们在页面中留下一些左右边距。

我没有使用 js 来做到这一点，只是 css 和 html：

```
<div class="container-fluid" id="wrapper">
<div id="home-decore">

<img/>
<img/>
<img/>
<img/>
<img/>
<img/>
<img/>
<img/>
<img/>
<img/>
<img/>
etc ..

</div>
</div>

#wrapper{
  background:red;
    padding-top:5%;
min-height: 88%;
height: auto !important;
height: 88%;

}
#home-decore{
margin:0;
padding-top:60px;
left:0;
top:0;
position:realtive;
min-height: 100%;
height: auto !important;
height: 100%;
background:#000;

}
#home-decore img{
  border-radius:2px;
  border:0.3% solid white;
  opacity:0.6;
  width: 3.3333%; 
    overflow: hidden;
}
#home-decore img:hover{
opacity:1;
} 
```

我想要的是适合所有页面 right:0;top:0;bottom:0;left:0;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:09:37.417

取你水平的图像数量，然后将每个图像的宽度指定为 (100 / numHorizo​​ntalImages)%，然后对高度执行相同的操作。如果你有 10 个水平图像和 5 个垂直图像，它看起来像这样：

`img { width: 10%; height: 20%;}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T07:24:08.093

您可以在不使用 Bootstrap css 的情况下实现这一点

```
here's the Css code for it 
 <ul>
    <li style="float: left; padding-left: 5px; padding-right: 10px; padding-bottom: 15px">
  <img/>
   <li style="float: left; padding-left: 5px; padding-right: 10px; padding-bottom: 15px">
   <img/>
   </li>
  </li>
   ...........
 </ul> 
```

对于 Bootstrap 提供的图像边框，请参阅以下链接

[http://css-tricks.com/using-css-for-image-borders/](http://css-tricks.com/using-css-for-image-borders/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T07:32:26.737

您需要的是 CSS 重置：

[http://www.cssreset.com/](http://www.cssreset.com/)

您也可以尝试在 CSS 中的 body 元素中添加类似这样的内容作为快速修复：

```
body{
    padding:0;
    margin:0;
} 
```

发生的事情是浏览器为填充和边距定义了一些默认值，我认为这就是您目前遇到的情况。

（还注意到“#home-decore”中有一个错字，“realtive”应该是“relative”，这可能会提供意想不到的结果）

# c++ - 防止进入特定功能的 VS2012 NativeDE\StepOver 注册表项是否更改了格式？

> ID：12550412
> 
> 赞同：15
> 
> 时间：2012-09-23T07:05:21.063
> 
> 标签：c++, visual-studio, debugging, visual-c++, visual-studio-2012

我遇到过几篇文章/博客，它们展示了如何使用注册表项禁用单步执行特定函数和/或命名空间（例如，boost 库）。

当我尝试使用 VS2012 执行此操作时，我没有得到预期的结果。

我试过了...

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0_Config\NativeDE\StepOver]
"10"="std\:\:.*"
"20"="boost\:\:.*" 
```

格式变了吗？我有正确的注册表项吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-23T08:04:24.477

我终于找到了一个“解决方案”：

将新的 .natstepfilter 添加到 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\Packages\Debugger\Visualizers

```
<?xml version="1.0" encoding="utf-8"?>
<StepFilter xmlns="http://schemas.microsoft.com/vstudio/debugger/natstepfilter/2010">
  <Function><Name>boost::.*</Name><Action>NoStepInto</Action></Function>
  <Function><Name>std::.*</Name><Action>NoStepInto</Action></Function>
</StepFilter> 
```

我不肯定“boost::.*”格式在这个特定的例子中是正确的，但它应该是这个或类似的东西。您可以查看文件夹中的其他 .natstepfilter 文件以获取更多线索。

不幸的是，根据我发现的一篇文章，在调试混合模式（例如，C++/C#）应用程序时这样做不起作用，这就是我正在做的事情。我将把这个问题留给试图弄清楚如何实现此功能的其他人以及任何可能知道在混合模式下执行此操作的方法的人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-13T08:05:43.380

作为上一个答案的附录（不幸的是我还不能评论），该目录中已经有一个名为 default.natstepfilter 的文件，您可以在其中添加两行（在 之前`</StepFilter>`）。

您可能必须右键单击 default.natstepfilter 并转到`Properties`并取消选中`Read-Only`才能更改此文件。为此，您需要管理员权限。

*示例*：

```
<?xml version="1.0" encoding="utf-8"?>
<StepFilter xmlns="http://schemas.microsoft.com/vstudio/debugger/natstepfilter/2010">
  <Function><Name>std::.*</Name><Action>NoStepInto</Action></Function>
  <Function><Name>__security_check_cookie</Name><Action>NoStepInto</Action></Function>
  <Function><Name>__abi_winrt_.*</Name><Action>NoStepInto</Action></Function>
  ...
</StepFilter> 
```

# windows-phone-7 - 在 WP7 中检查节电模式的 API

> ID：12550415
> 
> 赞同：1
> 
> 时间：2012-09-23T07:06:24.867
> 
> 标签：windows-phone-7

有没有办法检查省电模式是否打开，这样我就可以减少密集操作（例如增加轮询间隔，减少图形，关闭 geocordinatewatcher）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:55:02.213

目前，对于 3rd 方应用程序的公开可用的 SDK，此信息是不可能的。因此，无法检测手机是否在省电模式下运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T08:56:37.900

没有用于检查电池状态的 WP7 API。

该功能是 WP8 中引入的新 API 的一部分。您可以使用新的 Windows.Phone.Devices.Power 命名空间来获取电池信息。

```
 using Windows.Phone.Devices.Power;

    private void OS_Batery(object sender, RoutedEventArgs e)
    {
        var battery = Battery.GetDefault();

        if (battery != null)
        {
            Debug.WriteLine(battery.RemainingChargePercent);
            Debug.WriteLine(battery.RemainingDischargeTime);

            battery.RemainingChargePercentChanged +=
                (s, args) => Debug.WriteLine(battery.RemainingChargePercent);
        }
    } 
```

# xaml - 如何实现语义缩放？

> ID：12550426
> 
> 赞同：0
> 
> 时间：2012-09-23T07:08:11.627
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我有一个应用程序，它的主页是这样组织的：

网格 (LayoutRoot)

```
 VisualStateManager                         (FullLandscape, FullPortrait, Filled,  Snap)

 Grid                                       (Back button and page title)

 ScrollViewer                               (FullLandscape View )

     StackPanel                             (Horizontal)

         GridView                           (non grouped GridView)

         GridView                           (grouped GridView)

         GridView                           (non grouped GridView)

         GridView                           (grouped GridView)

         GridView                           (grouped GridView)

 ScrollViewer                               (Snap View)

     Grid

         ListView                           (Vertical) 
```

我的问题是：

1.  我是否必须为申请中的每个页面提供 SemanticZoom 才能使申请通过认证？

2.  如果我想为此主页提供 SemanticZoom，我该怎么做？即我在哪里插入 SemanticZoom 控件？

（我阅读了这篇文章：快速入门：添加 SemanticZoom 控件：）

```
<SemanticZoom.ZoomedOutView>
    <!-- Put the GridView for the zoomed out view here. -->   
</SemanticZoom.ZoomedOutView>

<SemanticZoom.ZoomedInView>
    <!-- Put the GridView for the zoomed in view here. -->       
</SemanticZoom.ZoomedInView> 
```

谢谢， EitanB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T17:01:48.437

从上面写的内容中理解您想要实现的目标有点困难，但我会尽力回答您的问题。

**1)** SemanticZoom 的使用不是通过认证的强制要求。这是一个很好的功能，可以帮助您以一种简洁的方式向用户呈现数据，并且在适当使用时非常酷。但是，这只是一个控制。给我们一些关于您的项目的更多信息，也许我们可以帮助您决定它是否会为应用程序添加额外的东西。轻松开始，稍后再深入细节。

**2)** [从 MSDN 下载 SemanticZoom 示例](http://code.msdn.microsoft.com/windowsapps/GroupedGridView-77c59e8e)并查看代码。基本上它看起来像这样：

```
<Page.Resources>
    <CollectionViewSource x:Name="cvs2" IsSourceGrouped="true" />
</Page.Resources>

<Grid x:Name="ContentPanel" VerticalAlignment="Top" HorizontalAlignment="Left">
    <SemanticZoom x:Name="semanticZoom" VerticalAlignment="Bottom">
        <SemanticZoom.ZoomedOutView>
            <GridView ScrollViewer.IsHorizontalScrollChainingEnabled="False">
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <TextBlock
                            Text="{Binding Group.Key}"
                            FontFamily="Segoe UI Light"
                            FontSize="24"/>
                    </DataTemplate>
                </GridView.ItemTemplate>
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapGrid ItemWidth="75" ItemHeight="75" MaximumRowsOrColumns="1" VerticalChildrenAlignment="Center" />
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.ItemContainerStyle>
                    <Style TargetType="GridViewItem">
                        <Setter Property="Margin" Value="4" />
                        <Setter Property="Padding" Value="10" />
                        <Setter Property="BorderBrush" Value="Gray" />
                        <Setter Property="BorderThickness" Value="1" />
                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                        <Setter Property="VerticalContentAlignment" Value="Center" />
                    </Style>
                </GridView.ItemContainerStyle>
            </GridView>
        </SemanticZoom.ZoomedOutView>
        <SemanticZoom.ZoomedInView>
            <GridView ItemsSource="{Binding Source={StaticResource cvs2}}" IsSwipeEnabled="True" ScrollViewer.IsHorizontalScrollChainingEnabled="False">
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Margin="10,10,0,0" HorizontalAlignment="Left" Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
                            <Image Source="{Binding Image}" Height="60" Width="60" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <TextBlock TextWrapping="Wrap" Foreground="{StaticResource ApplicationForegroundThemeBrush}" Width="200" VerticalAlignment="Center" Text="{Binding Title}" HorizontalAlignment="Left" FontFamily="Segoe UI" />
                        </StackPanel>
                    </DataTemplate>
                </GridView.ItemTemplate>
                <GridView.GroupStyle>
                    <GroupStyle>
                        <GroupStyle.HeaderTemplate>
                            <DataTemplate>
                                <TextBlock Text='{Binding Key}' Foreground="{StaticResource ApplicationForegroundThemeBrush}" Margin="5" FontSize="18" FontFamily="Segoe UI Light" />
                            </DataTemplate>
                        </GroupStyle.HeaderTemplate>
                        <GroupStyle.ContainerStyle>
                            <Style TargetType="GroupItem">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="GroupItem">
                                            <StackPanel Orientation="Vertical">
                                                <ContentPresenter Content="{TemplateBinding Content}" />
                                                <ItemsControl x:Name="ItemsControl" ItemsSource="{Binding GroupItems}" />
                                            </StackPanel>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </GroupStyle.ContainerStyle>
                        <GroupStyle.Panel>
                            <ItemsPanelTemplate>
                                <VariableSizedWrapGrid Orientation="Vertical" MaximumRowsOrColumns="3" />
                            </ItemsPanelTemplate>
                        </GroupStyle.Panel>
                    </GroupStyle>
                </GridView.GroupStyle>
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapGrid Orientation="Vertical" MaximumRowsOrColumns="1" />
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <Button Visibility="Collapsed"/>
            </GridView>
        </SemanticZoom.ZoomedInView>
    </SemanticZoom>
</Grid> 
```

和代码隐藏：

```
StoreData _storeData = null;

public ScenarioOutput1()
{
   InitializeComponent();
   _storeData = new StoreData();

   List<GroupInfoList<object>> dataCategory = _storeData.GetGroupsByCategory();
   cvs1.Source = dataCategory;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:55:02.050

感谢您的回答。

我确实看到了这个例子，这对我来说很清楚。我不清楚的是：我在这一页上有多个 GridView，而不仅仅是示例中的一个。我脑海中的问题是：我应该遵循页面上每个 GridView 的示例代码，还是有办法为将覆盖所有 GridView 的页面执行一次？请看下面的伪代码。

谢谢， EitanB

VisualStateManager（FullLandscape、FullPortrait、Filled、Snap）

网格（后退按钮和页面标题）

ScrollViewer（全横向视图）

```
 StackPanel                             (Horizontal)

    <SemanticZoom x:Name="semanticZoom1" VerticalAlignment="Bottom">
        <SemanticZoom.ZoomedOutView>
            GridView                           (non grouped GridView)
        </SemanticZoom.ZoomedOutView>

        <SemanticZoom.ZoomedInView>
            GridView                           (non grouped GridView - Semantic Version)
        </SemanticZoom.ZoomedInView>
     </SemanticZoom>

    <SemanticZoom x:Name="semanticZoom2" VerticalAlignment="Bottom">
        <SemanticZoom.ZoomedOutView>
            GridView                           (grouped GridView)
        </SemanticZoom.ZoomedOutView>

        <SemanticZoom.ZoomedInView>
            GridView                           (grouped GridView - Semantic Version)
        </SemanticZoom.ZoomedInView>
     </SemanticZoom>

    <SemanticZoom x:Name="semanticZoom3" VerticalAlignment="Bottom">
        <SemanticZoom.ZoomedOutView>
            GridView                           (non grouped GridView)
        </SemanticZoom.ZoomedOutView>

        <SemanticZoom.ZoomedInView>
            GridView                           (non grouped GridView - Semantic Version)
        </SemanticZoom.ZoomedInView>
     </SemanticZoom>

    <SemanticZoom x:Name="semanticZoom4" VerticalAlignment="Bottom">
        <SemanticZoom.ZoomedOutView>
            GridView                           (grouped GridView)
        </SemanticZoom.ZoomedOutView>

        <SemanticZoom.ZoomedInView>
            GridView                           (grouped GridView - Semantic Version)
        </SemanticZoom.ZoomedInView>
     </SemanticZoom>

    <SemanticZoom x:Name="semanticZoom5" VerticalAlignment="Bottom">
        <SemanticZoom.ZoomedOutView>
            GridView                           (grouped GridView)
        </SemanticZoom.ZoomedOutView>

        <SemanticZoom.ZoomedInView>
            GridView                           (grouped GridView - Semantic Version)
        </SemanticZoom.ZoomedInView>
     </SemanticZoom> 
```

ScrollViewer（快照视图）

```
 Grid

     ListView                           (Vertical) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T21:15:52.533

这样做的方法就像我在我的问题中发布的那样，即问题是询问它是否是正确的方法，答案是肯定的。

艾坦B

# ios - iOS 6 Siri API 在哪里

> ID：12550432
> 
> 赞同：7
> 
> 时间：2012-09-23T07:08:58.240
> 
> 标签：ios, iphone, api, siri

我阅读了许多声称 Apple 将在 iOS 中提供 Siri 的 API 的新闻稿，但现在 Siri 已经发布，我在 developer.apple.com 上找不到上述 API 的任何文档

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-25T04:42:32.390

谣言是不正确的，没有 Siri API（但希望如此）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T18:55:04.267

有第三方的API，以前没用过，好不好说。

细微差别：

[http://news.cnet.com/8301-1035_3-57487441-94/nuance-unveils-nina-a-siri-sister-that-lives-in-third-party-apps/](http://news.cnet.com/8301-1035_3-57487441-94/nuance-unveils-nina-a-siri-sister-that-lives-in-third-party-apps/)

# django - 如何覆盖 Django 可重用应用程序的模型？

> ID：12550434
> 
> 赞同：2
> 
> 时间：2012-09-23T07:09:34.450
> 
> 标签：django, django-models

我已经安装了一个 django 可重用应用程序（Django-Userena），并希望覆盖给定的 models.py 文件。

我创建了一个名为“accounts”的应用程序，它从 Django-Userena 调用。在我的“帐户”应用程序中，我有这个 models.py 文件，它有一个类 MyProfile，它继承自 Django-Userena 类 UserenaBaseProfile - 类 MyProfile(UserenaBaseProfile)

在 UserenaBaseProfile 类中，有以下代码：

```
privacy = models.CharField(_('privacy'),
                           max_length=15,
                           choices=PRIVACY_CHOICES,
                           default=userena_settings.USERENA_DEFAULT_PRIVACY,
                           help_text = _('Designates who can view your profile.')) 
```

我想用“editable=False”的额外值来扩展隐私，因为我不希望这个字段显示在自动生成的表单中。

我尝试了几种方法，例如使用新设置在 MyProfile 继承模型中再次调用隐私，但我只知道 Django 的“不允许字段名称“隐藏””（https://docs.djangoproject.com/en/1.4/主题/db/models/#field-name-hiding-is-not-permitted)

我当前的解决方案是在我的“帐户”应用程序 models.py 中简单地包含整个 UserenaBaseProfile 类，然后再调用下面的类 MyProfile(UserenaBaseProfile)。

对我来说，这看起来不是一个优雅的解决方案。你们如何覆盖可重用应用程序中的 models.py 文件？

非常感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:29:12.263

在我看来，它可以通过两种方式完成：

1.  用你修改过的模型创建一个 Django-Userena 的分支，然后使用你的。

2.  使用您的 models.py 制作 Django-Userena 包装器并使用您的包装器应用程序。

对于 urls.py/views.py 你可以放：

```
#Your wrapper views:
from django-userena.views import *

#your wrapper urls:
from django-userena.urls import * 
```

这是您的模型：

```
#your MODIFIED model:
from django-userena.models import *
# then put you new UserenaBaseProfile

class UserenaBaseProfile(models.Model):
    #copy the model fields
    ...
    privacy = models.CharField(_('privacy'),
                       max_length=15,
                       choices=PRIVACY_CHOICES,
                       default=userena_settings.USERENA_DEFAULT_PRIVACY,
                       help_text = _('Designates who can view your profile.')) 
```

然后您可以在您的项目中使用您的自定义应用程序。

如果你想自定义模板，在你的项目中创建一个模板目录，并将修改后的模板文件放在那里，保持原来的名称，这样 django 模板加载器可以首先找到你的（这取决于模板加载器在你的设置中是如何配置的。 py)

# java - 如何在java中用遗传算法求解多项式方程？

> ID：12550437
> 
> 赞同：0
> 
> 时间：2012-09-23T07:09:46.130
> 
> 标签：java, genetic-algorithm, polynomial-math

对于我的第一个类项目，我需要了解遗传算法如何工作的基础知识（没什么大不了的），我还需要找到一个通过在 Java 中使用遗传算法解决的数字优化问题的示例，并且能够解释如何它适用于我的教授。

我已经尽我所能在互联网上搜索了一个 Java 程序，它可以解决某种形式的带约束的多变量方程，但无济于事。

所以我的问题是：是否有人碰巧有可链接的内容到带有约束的求解 GA 的样本多项式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:46:25.187

JGAP 是一个用于 GA 和 GP 的 Java 框架，并提供 GA+GP 示例来解决公式。请参阅[http://jgap.sf.net](http://jgap.sf.net)

# android - Qt + Android - Necessitas - 顶级窗户装饰

> ID：12550438
> 
> 赞同：1
> 
> 时间：2012-09-23T07:10:06.260
> 
> 标签：android, qt, window-decoration

最近我为 Android 构建了我的第一个 Qt 应用程序（使用 necessitas）。

它工作正常，但（全屏应用程序）.​​.....

消息框没有装饰，始终位于屏幕的左上角。

我怎样才能用标准装饰简单地装饰它们并恢复居中行为？

# batch-file - 目录不为空错误

> ID：12550439
> 
> 赞同：4
> 
> 时间：2012-09-23T07:10:08.367
> 
> 标签：batch-file

我尝试在我的批处理文件中删除包含许多文件和子目录的文件夹（BR），我尝试以下操作：

**如果存在 C:\BR ( rmdir "C:\BR" /S /q )**

但有时我会收到一个错误，即特定文件夹不是空的。这些文件夹包含 CSS 文件。什么问题？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T12:43:58.240

```
rd /s /q DIRNAME
rmdir /s /q DIRNAME 
```

无法删除的文件正在使用中。
关闭使它们保持打开状态的任何程序，可能是您的浏览器，然后重试。

让我猜猜，你试图删除你的`%TMP%`文件夹。

* * *

* * *

**编辑：**回答 zipi 的问题。

它将删除所有可以删除的文件和文件夹。所以，如果`c:\tmp\dir2\dir3\open.txt`是打开的，`c:\tmp\emptyDir`是一个空目录，你这样做：

```
c:\>dir c:\tmp /b /s
c:\tmp\a.txt
c:\tmp\dir2\b.txt
c:\tmp\dir2\dir3\open.txt

c:\>rd /q /s c:\tmp

c:\>dir /s /b c:\tmp
c:\tmp\dir2\dir3\open.txt 
```

您将删除：

```
c:\tmp\a.txt
c:\tmp\dir2\b.txt 
```

并删除：

```
c:\tmp\emptyDir 
```

但仍然有目录...

```
c:\tmp
c:\tmp\dir2
c:\tmp\dir2\dir3 
```

...一个文件：

```
c:\tmp\dir2\dir3\open.txt 
```

相反，如果`a.txt`是打开的，您将只有：

```
c:\tmp\ 
```

和

```
c:\tmp\a.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-16T11:57:06.560

在 win7 上，我使用一个简单的 bat 文件来解决这个问题：

```
call :rmdir "my_directory_01"
call :rmdir "my_directory_02"
pause
goto :EOF

:rmdir
  if exist %1 rmdir /s /q %1
  if exist %1 goto :rmdir
goto :EOF 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-23T14:16:58.003

我有一个类似的问题。尝试了许多不同的解决方案，但最终只有以下方法有效：

```
rmdir c:\<directory> /s /q 
```

以前在 CMD 中使用其他方法我得到以下信息：

> 目录不为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-18T17:46:49.313

我有同样的问题，解决方案非常愚蠢。请先使用 /Q 再使用 /S 来解决您的问题。所以命令应该是这样的：

如果存在 %build_folder% RD /Q /S %build_folder%

如果这能解决您的问题，请告诉我。

问候阿努杰

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T07:19:42.853

要在命令行中删除目录，您必须首先删除它包含的所有文件和子焊料。如果其中一些项目是只读的，则可能会出现此问题。/f 将尝试强制删除它们。

尝试

```
if exists C:\BR (del "C:\BR" /f /s /q) 
```

在这里，您有 DEL 命令的 MS 文档：http: [//www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/del.mspx? mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/del.mspx?mfr=true)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-25T12:32:06.637

这对我有用

您将需要转到该文件夹​​所在的任何驱动器。然后右键单击驱动器>属性>检查扫描磁盘或扫描驱动器和windows8扫描和修复

然后返回您的文件夹并将其删除

[批处理 - 在 rmdir 命令上获取“目录不为空”](https://stackoverflow.com/questions/22948189/batch-getting-the-directory-is-not-empty-on-rmdir-command/23293219#23293219)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-24T20:24:21.317

在我的情况下，使用 rd /Q /S 删除目录并使目录不为空的失败归结为文件权限。批处理作业正在执行备份并在最后删除最旧的备份文件夹以保留最新的 10 个备份。普通用户帐户仅对子文件夹中的某些文件具有读取和执行权限。在任务计划程序下运行包含 rd 命令的批处理文件，并在“以最高权限运行”选项中打勾，以删除目录。

如果您在 cmd 下运行批处理文件并选择以管理员身份运行，则可以实现类似的一次性操作。在 Windows 7 中，在搜索程序和文件框中键入 CMD，然后右键单击弹出窗口顶部的 cmd.exe，然后单击以管理员身份运行。然后在 cmd“黑色背景”窗口中找到并运行您的批处理文件。

# c# - 使图标始终显示在 Windows 7 托盘中的注册表设置

> ID：12550445
> 
> 赞同：0
> 
> 时间：2012-09-23T07:11:37.460
> 
> 标签：c#, c++, winapi, registry, system-tray

> **可能重复：**[*默认情况下*](https://stackoverflow.com/questions/904790/how-to-always-show-program-tray-icons-in-windows-by-default)
> [如何始终在 Windows 中显示程序托盘图标？](https://stackoverflow.com/questions/904790/how-to-always-show-program-tray-icons-in-windows-by-default)

 *我认为通过非 Microsoft 程序或脚本将托盘图标设置为始终显示在 Windows 7（或 Windows 8）的“新”系统托盘中是不可能的......直到我偶然发现了 Dropbox 的桌面代理（可立即下载）他们的主页）以某种方式设法在系统托盘上保持其托盘图标完全可见，只要它需要。（至少在设置阶段，它会询问您的用户名和密码。我让它运行了至少 5 或 10 分钟，并且图标仍然存在。）

然后我点击了显示一个弹出窗口的小 V 形，使用户能够更改要显示的图标，你会知道，Dropbox 的图标设置为“显示图标和通知”。请注意，我没有手动更改它......所以必须有一种方法可以从程序中做到这一点。

知道它是怎么做的吗？

PS。请不要将我指向 MSDN 文档说它无法完成......*

# java - 包含函数链表

> ID：12550446
> 
> 赞同：3
> 
> 时间：2012-09-23T07:11:43.897
> 
> 标签：java, linked-list, overriding, priority-queue

```
public class state implements Comparator<state>{
        Point a;
        Point b;
        private int path_cost=0;
        ...
}

    class Point {
        int x;
        int y;
        ...
    } 
```

对于上面我有：

```
PriorityQueue<state> openNode= new PriorityQueue<state>();
LinkedList<state> closed =new LinkedList<state>();
state currNode; 
```

我需要检查是否`Point a`ANY`openNode`或`closed`等于`currNode`'s `Point a`。

如果我必须匹配整个对象，我可以使用`contains`，但在这里我只关心状态类的一个变量（点 a）。我希望该方法检查 PriorityQueue 和 LinkedList 中的所有节点。

*另外：* 我正在考虑在我的priorityQueue 和LinkedList 上使用Iterator。但我不确定如何使用迭代器读取 Point a 的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:15:28.340

编辑：看起来我有点误解了。它比我想象的要简单。

```
// I've assumed more conventional names
Point currPoint = currNode.getPointA();
for (State openNode : openNodes) {
    if (openNode.getPointA().equals(currPoint)) {
        return true;
    }
}

for (State closedNode : closedNodes) {
    if (closedNode.getPointA().equals(currPoint)) {
        return true;
    }
}
// No matching points
return false; 
```

您可能会使用 Guava 的`Iterables.concat()`方法使这稍微简单一些：

```
for (State node : Iterables.concat(closedNodes, openNodes)) {
    if (node.getPointA().equals(currPoint)) {
        return true;
    }
}
return false; 
```

如果您需要知道*哪个*节点具有相等的点 A，只需将其更改为：

```
for (State node : Iterables.concat(closedNodes, openNodes)) {
    if (node.getPointA().equals(currPoint)) {
        return node;
    }
}
return null; 
```

当然，这只会找到*一个*这样的节点 - 可能有多个匹配项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:00:13.447

您必须`Point a`为`state`类提供 equals 方法，或者只使用简单的迭代并迭代两个 List 进行比较。`contains`方法也一样。

**如果您使用任何其他方法，这将非常耗时。**

很奇怪的方法是使用`Comparator to check equality`

```
 class PointAComparator implements Comparator<State>

{
    Point p = null;
    public PointAComparator(Point a) {
        p = a;
    }
    @Override
    public int compare(State o1, State o2) {
        return (p.x == o1.a.x && p.y == o1.a.y) ? 1
                : (p.x == o2.a.x && p.y == o2.a.y) ? 1 : -1;
    }
} 
```

> 上面的比较方法返回 1 等于 else -1 所以当你进行排序时，每个列表的开头都会有相等的元素。然后你可以检查第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T22:43:14.587

我使用方法覆盖`equals`对象的函数并实现了我的结果。

```
 class Point {
            int x;
            int y;
            ...

    @Override
    public boolean equals(Object other){
        if (other == null) return false;
        if (other == this) return true;
        if (!(other instanceof Point))return false;
        Point otherPoint = (Point)other;
        return (this.x==otherPoint.getX() && this.y==otherPoint.getY() )? true : false;
    }

        }

public class state implements Comparator<state>{
            Point a;
            Point b;
            private int path_cost=0;
            ...
    @Override
    public boolean equals(Object other){
        if (other == null) return false;
        if (other == this) return true;
        if (!(other instanceof state))return false;
        state otherState = (state)other;
        return ((this.a).equals(otherState.a))? true : false;
    }
    } 
```

# python - Django mezzanine - 将“博客页面”的网址设置为主页？如何？

> ID：12550447
> 
> 赞同：1
> 
> 时间：2012-09-23T07:11:48.820
> 
> 标签：python, django

Django夹层：

我的夹层博客中有一些页面和帖子。我创建了一个名为 "test" 的页面，它的 url 是 localhost:8000/test 。我可以将该“博客页面”“测试”作为主页吗？我的意思是，在 localhost:8000，它应该显示 localhost:8000/test 的内容，而不需要从 home 重定向到 /test。在管理员中，我无法将该页面的网址保留为主页。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:31:53.787

使主页成为可编辑的页面对象包含在文档中的常见问题解答中：

[http://mezzanine.jupo.org/docs/frequently-asked-questions.html#why-isn-t-the-homepage-a-page-object-i-can-edit-via-the-admin](http://mezzanine.jupo.org/docs/frequently-asked-questions.html#why-isn-t-the-homepage-a-page-object-i-can-edit-via-the-admin)

# iframe - 带有固定标题的 iFrame

> ID：12550450
> 
> 赞同：3
> 
> 时间：2012-09-23T07:12:23.540
> 
> 标签：iframe, css-position

我想做类似的事情： [http ://bit.ly/RLpHme](http://bit.ly/RLpHme)

我在一个房地产经纪人的网站上工作，她想从她的合作伙伴网站加载列表，但在顶部有一个带有她信息的固定标题。

我将如何实现这一目标？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T07:26:36.403

使用 iFrame 修复标题，检查[http://jsfiddle.net/QQKc4/50/](http://jsfiddle.net/QQKc4/50/)

```
<div id="headerfix"></div>
<iframe id="preview-frame" src="http://www.test.com" frameborder="0"></iframe> 
```

CSS

```
#headerfix {
    height: 60px;
    background-color:#DDD;
    border-bottom: 3px solid #59A3C8;
    z-index: 99999;
    position: fixed;
    width: 100%;
}
#preview-frame {
    margin: 0 auto;
    display: block;
    padding-top: 60px;
    width:100%;
    height: 581px;
} 
```

# iphone - iphone 4 和 iphone 5 的相机覆盖高度

> ID：12550453
> 
> 赞同：3
> 
> 时间：2012-09-23T07:13:14.557
> 
> 标签：iphone, ios

我正在使用标准 UIImagePickerController 并使用相机覆盖视图，默认控件。我有一个外部 nib 文件，我从中加载覆盖视图。问题是视图似乎在 460，所以没有完全包含 iphone 5 上的相机视图。我想使用自动布局来解决这个问题，但我不知道如何告诉笔尖调整它大小为 iphone 4 或 iphone 5 的高度。

我考虑过使用 setFrame，但那是非常不自动的布局。我还考虑过使用 2 个不同的 nib 文件，一个用于 iphone 4，一个用于 iphone 5，但这似乎也是错误的方法。我猜有某种方法可以告诉笔尖填充当前的相机视图，但我不确定它是什么。有人可以推荐“正确”的方法来处理这个吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T17:18:45.440

您可以根据手机尺寸以编程方式加载不同的 cameraOverlayView XIB。相机控制条在 480h 屏幕上大约 54px 高，在 568h 屏幕上大约 96px 高。

或者，您当然可以使用适当设置的自动调整大小掩码来设计您的 XIB，但随后需要在代码中执行 setFrame 以获得正确的尺寸。

因此，无论哪种方式，您都在编写一些代码来检测屏幕边界并加载不同的 XIB 或执行 setFrame。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T23:49:07.620

我已经有一段时间没有使用笔尖了（首选情节提要），但我相信到目前为止您所拥有的是笔尖中的 UIImageView，对吧？让它成为一个出口。然后在你的 m 文件中，检查设备的尺寸（最近很多人问这个如何检查屏幕尺寸），然后根据找到的尺寸设置 uiimageview 框架。它应该工作;）

# graphics - 使用向量在目的地准确停止精灵

> ID：12550456
> 
> 赞同：0
> 
> 时间：2012-09-23T07:13:22.873
> 
> 标签：graphics, vector, cocos2d-iphone

我希望我的精灵移动到精确的像素位置。我在更新方法中使用以下代码来移动我的精灵（kPlayerSpeed = 60.0f）：

```
if (ccpDistance(self.position, requestedPosition) < kPlayerSpeed) {
            [self changeState:kStateWalking];
            return;
        }

switch (self.characterState) {
        case kStateWalkingUp:
            self.position = ccp(self.position.x, self.position.y + kPlayerSpeed * deltaTime);
            break;
        case kStateWalkingDown:
            self.position = ccp(self.position.x, self.position.y - kPlayerSpeed * deltaTime);
            break;
        case kStateWalkingLeft:
            self.position = ccp(self.position.x - kPlayerSpeed * deltaTime, self.position.y);
            break;
        case kStateWalkingRight:
            self.position = ccp(self.position.x + kPlayerSpeed * deltaTime, self.position.y);
            break;
        case kStateIdle:
            break;
        default:
            break;

if (ccpDistance(self.position, requestedPosition) < kPlayerSpeed) 
```

使用此代码，玩家会在附近停下来，但不会完全停在原地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T15:54:23.660

我会按照这些思路做一些事情。不过还没有测试过，我是从我的 gfs 电脑上写的。

```
CGPoint velocity = CGPointZero;
CGPoint delta = ccpSubstract(requestedPosition, self.position);

switch (self.characterState) {
        case kStateWalkingUp:
            velocity= ccp(0, kPlayerSpeed * deltaTime);
            break;
        case kStateWalkingDown:
            velocity = ccp(0,-kPlayerSpeed * deltaTime);
            break;
        case kStateWalkingLeft:
            velocity= ccp(-kPlayerSpeed * deltaTime, 0);
            break;
        case kStateWalkingRight:
            velocity= ccp(kPlayerSpeed * deltaTime, 0);
            break;
        case kStateIdle:
            break;
        default:
            break;
}
CGPoint signsVelocity = ccpNormalize(velocity);
CGPoint absVelocity = ccp( MIN( fabsf(velocity.x), fabsf(delta.x)) , MIN(fabsf(velocity.y), fabsf(velocity.x) );
self.position = ccpAdd(self.position, ccpMult(absVelocity, signsVelocity) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T20:54:43.637

安德烈斯，谢谢你的回复。

我无法让你的代码正常工作，所以在你的带领下，我做了更多的研究并想出了这个......

```
 float step = kPlayerSpeed * deltaTime;
    float dist = ccpDistance(self.position, requestedPosition);

    if (dist <= step) {
        self.position = requestedPosition;
    } else {
        CGPoint vectorBetweenAB = ccpSub(self.position, requestedPosition);
        CGPoint normVectorBetweenPositionAndEnd = ccpNormalize(vectorBetweenAB);
        CGPoint movementVectorForThisFrame = ccpMult(normVectorBetweenPositionAndEnd, step);
        if (self.position.x > movementVectorForThisFrame.x) {
            movementVectorForThisFrame.x = -movementVectorForThisFrame.x;
        }
        if (self.position.y > movementVectorForThisFrame.y) {
            movementVectorForThisFrame.y = -movementVectorForThisFrame.y;
        }
        self.position = ccpAdd(self.position, movementVectorForThisFrame);
    } 
```

还有比这更好的方法吗？

谢谢

# facebook - 使用 facebook search api 获取位置或坐标特定帖子

> ID：12550459
> 
> 赞同：1
> 
> 时间：2012-09-23T07:14:04.267
> 
> 标签：facebook, facebook-graph-api, geolocation

有没有办法使用 facebook 搜索 api ( `https://graph.facebook.com/search/?q=KEYWORD&type=post ...`) 获取位置/坐标特定的公共帖子？我希望这是一个通用搜索查询，无需任何用户授权。

我尝试使用`https://graph.facebook.com/search?type=location&center=37.76,-122.427&distance=1000&access_token=...`，但这需要 access_token 并返回仅由其访问令牌用于查询的用户的朋友发布的对象（不是帖子）。

我也试过`https://graph.facebook.com/search?q=samsung&type=post&center=12.9833,77.5833&distance=1000&access_token=[I-USED-ANY-ACCESS-TOKEN]`了，但我不认为这给了我位置特定的结果，因为我没有在 json 响应中收到任何 loc 信息。

是否有任何免费的数据源/API 可以为我提供`location/coordinate/ip`来自网络/社交网站的特定帖子/数据/推文/提要等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T23:43:53.677

可以遍历 FB 图表来获取此类地点及其坐标类型，例如`event`, `place`, `checkin`。例如：

搜索（[链接](https://developers.facebook.com/tools/explorer?method=GET&path=search%3Fq%3Dconference%26type%3Devent)）：

```
https://developers.facebook.com/tools/explorer?method=GET&path=search%3Fq%3Dconference%26type%3Devent 
```

然后选择其中一个结果并执行（[链接](https://developers.facebook.com/tools/explorer?method=GET&path=463944956965055)）：

```
https://developers.facebook.com/tools/explorer?method=GET&path=463944956965055 
```

然后查找场地 id 的坐标（[链接](https://developers.facebook.com/tools/explorer?method=GET&path=199344279273)）：

```
https://developers.facebook.com/tools/explorer?method=GET&path=199344279273 
```

检查[FQL 表定义](https://developers.facebook.com/docs/reference/fql/event/)以验证是否提供了位置坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T02:31:57.253

接受的答案并没有真正回答问题。

答案是否定的，没有办法按位置搜索一般帖子（不包括您的朋友）。可能是为了保护用户隐私。

# postgresql - 由多列分布

> ID：12550461
> 
> 赞同：3
> 
> 时间：2012-09-23T07:14:21.547
> 
> 标签：postgresql

创建表时在分布上使用多列有好处吗？例如：

```
CREATE TABLE data_facts (
    data_id int primary key,
    channel_id smallint,
    chart_id smallint,
    demo_id smallint,
    value numeric)
DISTRIBUTED BY (
    channel_id,
    chart_id,
    demo_id) 
```

因为有机会我需要加入`data_facts`三个不同的表`channel`，`chart`并分别`demo`使用`channel_id`和。`chart_id``demo_id`

具体来说，

1.  我是否应该始终添加`distribution`并包括`id(s)`我用于加入的所有内容以提高效率？
2.  如果是这样，这些顺序是否`id(s)`重要？
3.  这在架构级别上是如何工作的？（可选的）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:36:09.430

这取决于您要对**数据库**进行多少分片，以及您希望在每个分区中分配多少记录，我的意思是，如果您在分配中添加多于一列，您会将更多数据分片到更多分区中。

这还取决于您是按模还是散列...

但是，在我看来，如果您有一个多列主键，并且您想按此主键进行分片，则可能具有按多列（主键中的所有列）分布的意义，否则您应该按单个列分片在大多数情况下就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-25T22:44:44.823

不，多个散列键不会提供任何好处，除非您进行散列分布并且单个键不能提供合理均匀的分布。

在以下情况下将发生同位连接：

*   这是一个等值连接（key = key）
*   所有分布列都在连接中使用。

如果两个条件都不满足，则其中一张表会在所有计算节点上广播，导致性能问题，偶尔查询失败。

使用分布的实用性与您的建模技术有很大关系。它在星型模式中比 3NF 结构更有效。在星型模式中，通常将事实分布在其最大维表的键上。如果您加入该维度，则会发生托管。这会给您带来最大的好处，因为这将是最耗时的连接。通常，较小的维度表（在查询中）最终会被广播并保存在内存中以进行连接。

# c# - 我需要getJson吗？

> ID：12550464
> 
> 赞同：0
> 
> 时间：2012-09-23T07:15:36.803
> 
> 标签：c#, jquery, ajax, razor, webmatrix

```
 $(document).ready(function ()
    {
        $(".viewmap").click(function ()
        {
            var id = $(this).attr("id");
            var responseURL = "~/changemap?id=" + id;
            //alert(responseURL);
            $.ajax(
            {
                url: responseURL,
                dataType: "json",
                type:"GET",
                success: function (dt)
                {
                    initialize(dt.Latt, dt.Longt); 
                }
            }
            );
        }
        );
    }); 
```

`changemap.cshtml`我使用该脚本对执行以下操作的页面进行 ajax 调用

```
@{

    if(!IsPost)
    {
        if(!Request.QueryString["id"].IsEmpty()&&Request.QueryString["id"].IsInt())
        {
            var countryId=Request.QueryString["id"];
            var db=Database.Open("GoogleMapView");
            var dbCmd="SELECT * FROM places WHERE id=@0";
            var row=db.QuerySingle(dbCmd,countryId);
            if(null!=row)
            {
               Json.Write(row,Response.Output);
            }
        }
    }
} 
```

即把数据库中查询到的数据以json格式返回给客户端。Initialize 函数定义为

```
function initialize(lat,lng)
            {
                var mapOptions = {
                    center: new google.maps.LatLng(lat,lng),zoom: 8,mapTypeId: google.maps.MapTypeId.ROADMAP 
                };
                var map = new google.maps.Map(document.getElementById("gmap"),mapOptions);
            } 
```

但是当我点击 class 的 div 标签时`viewmap`，什么也没有发生。我想我想念更多的脚本来让我的应用程序正常工作。

我只尝试实现一个简单的谷歌地图视图，其中一旦用户单击地名作为超链接，将重新加载与其匹配的地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:40:33.233

尝试以下

```
 success(data){

                   initialize(data.d.Latt, data.d.Longt); 

              } 
```

有关为什么使用 d 的更多参考，请查看以下链接

```
 http://encosia.com/never-worry-about-asp-net-ajaxs-d-again/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:29:54.513

我认为

```
var responseURL = "~/changemap?id=" + id; 
```

应该

```
var responseURL = '@(Url.Content("~/changemap")+"?id=")' + id; 
```

# sql - MS Access 2010 报告使用两个不同的表

> ID：12550472
> 
> 赞同：0
> 
> 时间：2012-09-23T07:17:17.117
> 
> 标签：sql, report, ms-access-2010

![在此处输入图像描述](../Images/fcd1eca69c7bc040dec81cecea243990.png)

![在此处输入图像描述](../Images/d84f55debf68fd1d3d0cc6aee7f4b290.png)

我正在尝试在报告中显示每只股票的总数及其描述。我有 2 个查询，但不知道如何组合它们。第一次查询

```
SELECT 
  stock_partno, SUM(stock_qty) AS TotalStock
FROM 
  stock
GROUP BY 
  stock_partno; 
```

第二次查询

```
SELECT DISTINCT 
  Stock.stock_PartNo, parts.parts_Desc
FROM 
  parts 
INNER JOIN 
  stock 
ON 
  parts.Parts_partno = Stock.stock_PartNo; 
```

我如何结合这两个查询，以便他们可以显示每个零件的总库存及其描述的报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:26:38.050

为了能够选择该`parts_Desc`列，请将其添加到 GROUP BY 子句。这将保持与第一个查询中相同的分组（因为每个部件号只有一个描述）。

```
SELECT  
  SUM(stock.stock_qty) AS TotalStock,
  Stock.stock_PartNo, parts.parts_Desc
FROM 
  parts 
INNER JOIN 
  stock 
ON 
  parts.Parts_partno = Stock.stock_PartNo;
GROUP BY 
  Stock.stock_partno, parts.parts_Desc; 
```

# python - Python 列出输入 - 整数和字符串

> ID：12550473
> 
> 赞同：1
> 
> 时间：2012-09-23T07:17:30.020
> 
> 标签：python, python-3.x

在 python 中有什么方法不会改变列表的元素。

例如，整数必须保持整数，字符串必须保持字符串，但这应该在同一个程序中完成。

示例代码将是：

```
print("Enter the size of the list:")
N = int(input())
for x in range(N):
    x = input("")    
    the_list.append(x)
    the_list.sort()

print(the_list) 
```

结果：`the_list = ['1','2','3']`

是整数已转换为错误字符串的整数列表。

但是列表的字符串必须是字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:36:41.493

```
for x in range(N):
    x = input("")
    try:  
        the_list.append(int(x))
    except ValueError:
        the_list.append(x) 
```

让我们运行这个：

```
1
hello
4.5
3
boo
>>> the_list
[1, 'hello', '4.5', 3, 'boo'] 
```

请注意，如果列表包含混合类型，则无法以有意义的方式（Python 2）或根本（Python 3）对列表进行排序：

```
>>> sorted([1, "2", 3])                     # Python 3
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unorderable types: str() < int()

>>> sorted([1, "2", 3])                     # Python 2
[1, 3, '2'] 
```

# image - SVG 1.2 中的 cmyk 颜色规范

> ID：12550474
> 
> 赞同：1
> 
> 时间：2012-09-23T07:17:42.957
> 
> 标签：image, svg, rgb, cmyk

根据 SVG 1.2 标准，现在支持 icc-color 规范（根据此链接：[W3.org spec for SVG 1.2](http://www.w3.org/TR/SVGColor12/#icc-colors)

我尝试了以下...这是整个文件，两个圆圈，都应该是绿色的

```
 <?xml version="1.0"?>
    <parent xmlns="http://example.org"
            xmlns:svg="http://www.w3.org/2000/svg">
       <svg:svg width="400" height="200" version="1.2">
          <svg:ellipse cx="100" cy="100" rx="100" ry="100" 
            fill="rgb(0,255,0)" />
          <svg:ellipse cx="300" cy="100" rx="100" ry="100" 
            fill="rgb(0,255,0) device-cmyk(0.11, 0.48, 0.83, 0.00)" />
       </svg:svg>
    </parent> 
```

但是，当我尝试用 IE9 或 Chrome 查看它时，第二个圆圈是黑色的。唯一将两个圆圈都呈现为绿色的是 GIMP 2（到目前为止我已经尝试过）。

RGB 应该是后备颜色...添加 CMYK 部分对于浏览器来说是否会变得如此糟糕以至于无法使用？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:50:49.637

如果您查看文档的顶部，您会看到 SVG 1.2 是 2009 年的工作草案。它从未完成，也没有浏览器实现过它。

# jquery - 跨页面重用页眉和页脚

> ID：12550475
> 
> 赞同：1
> 
> 时间：2012-09-23T07:17:47.460
> 
> 标签：jquery, html, css, jsp

我在标题部分有所有菜单。单击菜单链接时，仅内容会更改，但页眉和页脚保持不变。我正在考虑两种选择。

1.  将内容部分放在 iframe 中。
2.  包括（'header.jsp'）；

    // 渲染页面特定内容 ...

    包括（'footer.jsp'）；

有没有更好的方法来做到这一点？像 jQuery .load() 这样的东西会显着提高性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:24:27.973

使用 jQuery 的加载是一个不错的选择，只要确保在加载任何 javascript 之前加载 HTML。您只需要加载内容部分，例如：

与内容部分：

```
<div id='content'></div> 
```

以及下面的代码：

```
$('#content').load('/includes/content2.html', function(){
    // load scripts here
}); 
```

# c - 边缘避免程序的逻辑

> ID：12550480
> 
> 赞同：0
> 
> 时间：2012-09-23T07:18:55.010
> 
> 标签：c, microcontroller, avr, atmega

微控制器是 AVR，其中的处理器是 ATMEGA8。我写了一篇跟随黑色的文章。它像是 ：

```
#include<avr/io.h>
#include<util/delay.h>
int main()
{
int rs,ls; // denotes the right sensor and left sensor respectively 
DDRC=0x00; // DENOTES THAT WE TAKE INPUT FROM THE SENSER
DDRB=0xFF; // DENOTES THAT PORT IS MEANT FOR THE OUTPUT FROM THE MOTOR
while(1) {
 ls=PINC&0b0000001; // last bit on
 rs=PINC&0b0001000; // 1st bit on

 if((ls==0b0000001)&(rs==0b0001000))
  PORTB=0b00010010; // forward
 if((ls==0b0000001)&(rs==0b0000000))
  PORTB=0b00000010; // right
 if( (ls==0b0000000) & (rs==0b0001000))
  PORTB=0b00010000; // left
 if((ls==0b0000000)&(rs==0b0000000) )
  PORTB=0b00010010; // stop
}
} 
```

我正在尝试为边缘避免者写作。它具有检测黑色的相同传感器。*但现在那些感应器在桌子上移动时不得不避开一个坑*。我无法决定如何做到这一点。

*注意：如果坑下方没有任何东西，传感器能够检测到坑。但是我如何在编写代码时遇到问题。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:35:48.373

Edge Avoider 可以有很多解决方案。我见过的一种实现是 -

解释 -

*   如果没有（左和右）是黑色的（黑色 = 边缘，白色 = 桌面），您可以继续前进。
*   如果任何一个/两个都是黑色的，你需要稍微后退（注意：这很棘手，在后退时，你也可能会摔倒），然后改变方向。

您需要尝试延迟，以获得适当的工作。

这些是下面需要的值（我之前省略了它们，因为它们取决于配置）-

```
int move_backward = 0b00000110;
int right_turn = 0b00001010;
int move_forward = 0b00001001;
int left_turn = 0b00000101;

int left_sensor_on = 0b0010000;
int right_sensor_on = 0b0100000;
int left_sensor_off = 0b0000000;
int right_sensor_off = 0b0000000; 
```

下面的代码应该进入`while (1)`

```
left_sensor = (PINC & 0b0000001); // This depends upon your configuration
right_sensor = (PINC & 0b0001000); // So I have used, the one from your code

if ((left_sensor==left_sensor_off) & (right_sensor==right_sensor_off))
{
    PORTB = move_backward;       //move backward
    _delay_ms(50);
    PORTB=right_turn;           //take a right turn
    _delay_ms(30);
    left_sensor = 0;
    right_sensor = 0;
}
if ((left_sensor==left_sensor_on) & (right_sensor==right_sensor_on))
{
    PORTB = move_forward;        //move forward
    left_sensor = 0;
    right_sensor = 0;
} 
if ((left_sensor==left_sensor_off) & (right_sensor==right_sensor_on))
{
    PORTB = move_backward;
    _delay_ms(50);
    PORTB = right_turn;
    _delay_ms(30);
    left_sensor = 0;
    right_sensor = 0;
}

if ((left_sensor==left_sensor_on) & (right_sensor==right_sensor_off))
{
    PORTB = move_backward;
    _delay_ms(50);
    PORTB = left_turn;
    _delay_ms(30);
    left_sensor = 0;
    right_sensor = 0;
} 
```

# c++ - Object Mat(args); 之间有什么区别 - 明智的内存分配 和对象 *Mat = new Mat(args); 在 C++ 中？

> ID：12550482
> 
> 赞同：0
> 
> 时间：2012-09-23T07:19:20.127
> 
> 标签：c++, pointers, memory-management, heap-memory, stack-memory

> **可能重复：**
> [在 C++ 中正确使用堆栈和堆？](https://stackoverflow.com/questions/599308/proper-stack-and-heap-usage-in-c)
> [堆与堆栈分配](https://stackoverflow.com/questions/6713637/heap-vs-stack-allocation)

我试图理解为什么我从 Java 移植到 C++ 的库（在使用转换器后进行了漫长而艰巨的编辑工作）并没有释放内存并且只会爆炸虚拟内存直到崩溃。显然，这与具有 GC 和 C++ 的 Java 无关 - 并且算法非常直接地转换为 C++。

所以这是我的问题。我在哪里以及如何删除分配的内存（释放它）？当我有：

```
Matrix *mat = new Matrix(args); 
```

我显然需要以`delete mat;`. 我可以避免这种情况吗？使用`Matrix mat(args);`会更好吗？在内存分配和释放方面？还是使用`Matrix mat = Matrix(args)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:21:43.967

> 我在哪里以及如何删除分配的内存？（免费）

在大多数情况下，如果您正确编码，则不必显式释放或取消分配任何内存。要么使用自动分配，要么使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)。*否则，在哪里*的答案是相当不令人满意的：在哪里你需要，取决于你的程序。*如何*更简单的答案是：使用`delete`（或`delete[]`动态分配的数组）。

> ...我显然需要用删除垫结束范围；我可以避免这种情况吗？

是的，如果您使用自动分配：

```
Matrix mat(args); 
```

作为一般规则，您应该只在确实需要时才使用动态分配的对象。如果你不知道你是否真的需要，那么你可能不需要。

> ...或使用矩阵 mat = Matrix(args);

这将执行复制初始化，在这种情况下，与`Matrix mat(args);`. 表达式的 RHS 是一个临时`Matrix`对象，用于复制构造 LHS `mat`。

这是最近的[相关帖子](https://stackoverflow.com/questions/12545222/instance-of-class-in-c/12545227#12545227)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T07:21:01.480

如果您不希望对象超出创建它的范围，则第二种选择会更好。

一旦作用域结束，它会自动释放您的对象，这与您必须显式记住`delete`对象的动态内存选项不同。

**好读：**

[为什么 C++ 程序员应该尽量减少“新”的使用？](https://stackoverflow.com/questions/6500313/in-c-why-should-new-be-used-as-little-as-possible)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T07:32:55.330

您确实需要了解 C/C++ 中的内存分配是如何工作的。
我建议你从一本关于它的书开始，因为这个问题意味着你没有很多 C++ 经验。
对于手头的问题：
`Matrix *mat = new Matrix(args);` 在这里，您在堆上创建了一个`Matrix`对象，这意味着它没有绑定到范围（当然，指针仍然如此）并且您有责任使用`delete`.
`Matrix mat(args);`- 这里你在栈上创建了一个对象，当它的作用域结束时它会被破坏，这在Java中是不可用的，除了原始类型。
至于性能 - 在堆栈上创建对象不仅更安全（自动销毁）而且速度更快 - 除了不需要搜索空闲块之外，您的堆栈内存是预先分配的。
从堆中创建内存时 - 您的进程最终会向虚拟内存管理器请求内存，从而导致巨大的性能损失。
话虽如此 - 任何类型的分配都有时间和地点 - 你应该使用对你自己的代码更好的东西 - 没有“正确的方法”这样做。

# zend-framework2 - ZF2 自定义查询

> ID：12550490
> 
> 赞同：3
> 
> 时间：2012-09-23T07:20:55.507
> 
> 标签：zend-framework2

大家好，早上好，

我正在遵循手册中 Rob Allen 的快速入门教程。我正在尝试改变一些事情。我想做的一件事是得到这样的查询：

```
"SELECT max(id) FROM Albums"; 
```

我尝试过类似的事情

```
$this->select();
$this->columns(array('id' => 'MAX(id)')); 
```

显然这不是这样做的方法。我可能需要一些表达式对象左右。

谁能告诉我如何解决这个问题？

## 编辑（忘记上面的）

整个代码基于手册（ZF2）中的快速入门，我设法编写了这样的查询：

```
 $select = $this->getSql()->select();
    $select->columns(array(new Expression('max(id) as MaxId')));
    $rowset = $this->selectWith($select);
    $row = $rowset->current();
    return $row; 
```

这样做的结果是一个空对象。

但是当我改变

```
 $select->columns(array(new Expression('max(id) as MaxId'))); 
```

至

```
 $select->columns(array(new Expression('max(id) as id'))); 
```

然后我返回一个 id 为 1 的对象。这是 max(id)。

但是，当我在函数 exchangeArray 中添加我的专辑对象时，在一行中添加 maxId，然后它返回 maxId 字段。

但是，不可能每次我只想做这样的查询时都需要这样做。这真的是它的工作方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:48:16.350

使用[Zend\Db\Sql\Expression](http://framework.zend.com/apidoc/2.0/classes/Zend.Db.Sql.Expression.html "Zend\Db\Sql\Expression")

因此，如果我正确地看到了这一点（可能不是这种情况），您会像刚才那样做，但将 SQL-Expression 包装到`new Expression('max(id))`. 所以它应该像下面这样

```
use Zend\Db\Sql\Expression;
//...
$this->columns(array(
    'maxid' => new Expression('max(id)')
)); 
```

如果这样的语法是错误的，请不要诅咒我，但我认为了解 Sql\Expression 已经对你有所帮助；）

# html - img 标签下方的 HTML 中心文本

> ID：12550491
> 
> 赞同：2
> 
> 时间：2012-09-23T07:20:56.040
> 
> 标签：html, css, image, href, center

这是我所拥有的 -

```
<a href="/mi/">
    <img id="i1" name="First" src="1.JPEG" onClick="return goto(this);"></img> 
    First Image 
</a> 
```

我在我的模板中循环使用这段代码，以像时尚一样在网格（图库）中显示一堆图像。我想在所有图像下方显示一行标题。

我想在`img`标签正下方显示“第一张图片”文本（这是一个链接）。我想既然我有`<a>`作为父容器的文本应该放在下面，`<img>`但这并没有发生。

如何在图像正下方居中显示文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T07:22:24.457

这应该这样做：

```
<html>
    <head>
        <style>
            .imageLink{
                text-align:center;
            }
            .imageLink img{
                display:block;
            }
        </style>
    </head>
    <body>
        <a href="/mi/" class="imageLink">
            <img id="i1" name="First" src="1.JPEG" onClick="return goto(this);" /> 
            First Image 
        </a>
    </body>
</html> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T07:22:09.607

`text-align:center;`并且`display:block;` 会这样做

检查这个[小提琴](http://jsfiddle.net/swamimayank/W242k/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T07:22:54.177

将您的锚点设为块并在其中居中文本，然后将图像设为块，以便在文本上方产生换行符。

```
a { text-align: center; display: block; }
img { display: block; } 
```

此外，您不需要结束图像标签，使用`<img .. />`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-23T07:32:29.710

你可以用

```
<p>First Image </p> 
```

标签，这样就可以了；）

```
<a href="/mi/">
<img id="i1" name="First" src="1.JPEG" onClick="return goto(this);"></img> 
<p>First Image </p>
</a> 
```

# c# - 查询/选择 excel 列时出错

> ID：12550493
> 
> 赞同：-1
> 
> 时间：2012-09-23T07:21:24.147
> 
> 标签：c#, excel, oledb

我在这里按照教程：http: [//codehill.com/2009/01/reading-excel-2003-and-2007-files-using-oledb/](http://codehill.com/2009/01/reading-excel-2003-and-2007-files-using-oledb/)

但我只想查看一些列，所以我将查询编辑为

```
"select F1,F3,F6 from [" + worksheetName + "$]", con); 
```

但我在网上遇到了这个错误

```
cmd.Fill(excelDataSet);

System.Data.OleDb.OleDbException was unhandled
  Message=No value given for one or more required parameters.
  Source=Microsoft Access Database Engine
  ErrorCode=-2147217904
  StackTrace:
       at System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
       at System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult)
       at System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
       at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
       at System.Data.OleDb.OleDbCommand.ExecuteReader(CommandBehavior behavior)
       at System.Data.OleDb.OleDbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior)
       at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
       at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior)
       at System.Data.Common.DbDataAdapter.Fill(DataSet dataSet)
       at ExcelReader.mainForm.GetWorksheet(String worksheetName) in D:\PLN\ExcelReader\ExcelReader\Main.cs:line 112
       at ExcelReader.mainForm.sheetsToolStripComboBox_SelectedIndexChanged(Object sender, EventArgs e) in D:\PLN\ExcelReader\ExcelReader\Main.cs:line 125
       at System.Windows.Forms.ComboBox.OnSelectedIndexChanged(EventArgs e)
       at System.Windows.Forms.ComboBox.set_SelectedIndex(Int32 value)
       at ExcelReader.mainForm.openToolStripButton_Click(Object sender, EventArgs e) in D:\PLN\ExcelReader\ExcelReader\Main.cs:line 51
       at System.Windows.Forms.ToolStripItem.HandleClick(EventArgs e)
       at System.Windows.Forms.ToolStripItem.HandleMouseUp(MouseEventArgs e)
       at System.Windows.Forms.ToolStrip.OnMouseUp(MouseEventArgs mea)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ToolStrip.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at ExcelReader.Program.Main() in D:\PLN\ExcelReader\ExcelReader\Program.cs:line 17
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T01:15:55.347

仅当列在标题行中没有值或连接字符串`F1`包含`F2``HDR=No`

如果标题行中有值并且`HDR=Yes`连接字符串中有值，那么您需要使用实际的列标题而不是虚拟字段名称，例如`F1`

# sql - 查询最频繁的值或都不查询

> ID：12550500
> 
> 赞同：2
> 
> 时间：2012-09-23T07:22:06.493
> 
> 标签：sql, oracle

我需要在选择中显示两组之间最常见的值，并且它必须伴随一条消息，所以请耐心等待。我正在使用 Oracle XE，这就是我目前所拥有的：

```
SELECT (
    CASE type
        WHEN 0 THEN 'heroes'
        WHEN 1 THEN 'villains'
        ELSE 'neither'
    END
) AS MostFrequent
FROM (
    SELECT type
    FROM mutants
    GROUP BY type
    ORDER BY count(*) DESC
) WHERE rownum <= 1 
```

到目前为止，如果类型 0 的变种人多于类型 1，它会显示英雄，然后当类型 1 的数量多于类型 0 时，它会显示恶棍，但是当它们并列时，它不会显示任何数据，这不会为我工作:(我需要它说“都不”，所以任何帮助都将受到广泛赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:41:36.617

```
WITH
RECOUNTS AS
(    
  SELECT
    NVL(COUNT(CASE TYPE WHEN 0 THEN TYPE END), 0) AS HEROES,
    NVL(COUNT(CASE TYPE WHEN 1 THEN TYPE END), 0) AS VILLAINS
  FROM MUTANTS
)
SELECT
  CASE WHEN HEROES > VILLAINS THEN 'heroes'
       WHEN HEROES < VILLAINS THEN 'villains'
       ELSE 'neither'
  END AS MOSTFREQUENT
FROM RECOUNTS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:29:32.817

看看这个[SQL Fiddle](http://sqlfiddle.com/#!4/f14e9/15)

```
select 
   case when heroes > villains then 'heroes'
        when heroes < villains then 'villains'
        else 'neither'
   end as MostFrequent  
from ( select 
        (select count(*) from mutants where type = 0) as heroes,
        (select count(*) from mutants where type = 1) as villains
      from dual)
; 
```

最重要的是，如果没有两者的结果，您就无法决定“两者都不”。为了实现这一点，您首先需要一个子查询来进行计数。可以用不同的方式进行计数，上面的方法可能比 GuiGi 的建议效率低一些，它也有效，请参阅这个[SQL Fiddle](http://sqlfiddle.com/#!4/f14e9/16)

# macos - 在 Mountain Lion 上安装 ns-2.34

> ID：12550501
> 
> 赞同：2
> 
> 时间：2012-09-23T07:22:06.720
> 
> 标签：macos

我一直在努力`ns-2.34`在我刚刚升级的带有 ML 的 Mac 上安装。这就是我得到的

```
-L/Users/bcaceiro/desktop/DEI/IRC/ns-allinone-2.34/tcl8.4.18/unix -ltcl8.4  -framework CoreFoundation -lX11   -sectcreate __TEXT __info_plist Wish-Info.plist  -o wish
ld: library not found for -lX11
collect2: ld returned 1 exit status
make: *** [wish] Error 1
tk8.4.18 make failed! Exiting ... 
```

而且，我已经安装了 Xcode，所有的命令行工具都已安装，但似乎无法正常工作。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:11:34.950

我看到该消息包含对 X11 的引用，Mountain Lion 中默认未安装 X11。第一次调用 /Applications/Utilities/X11.app 将提示您找到当前的 Apple 知识库文章以安装 X11。

[从http://xquartz.macosforge.org](http://xquartz.macosforge.org)下载并安装最新版本的 XQuartx（撰写本文时为 2.7.3）

# blackberry-webworks - Blackberry Webwork 中没有进行编译

> ID：12550505
> 
> 赞同：0
> 
> 时间：2012-09-23T07:22:27.710
> 
> 标签：blackberry-webworks

我对这个黑莓网络非常陌生。我的应用程序没有编译，而且每当我使用 blackberry.advertising 时，我都无法获得签名的 .cod。![在此处输入图像描述](../Images/e75fd8c64229128e12fbe824e9d0d0ca.png)

更多参考：这是我遇到的错误，请让我知道任何解决方案。

感谢和问候， Krishnakumar P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T12:27:30.190

我注意到的第一件事是您正在运行 JDK 1.7 - 您需要卸载它，然后安装 32Bit 1.6 JDK。

其次，如果这没有帮助，您是否在您的应用程序中使用了任何扩展程序？

# jquery - jQuery removeClass 实际上并没有删除类

> ID：12550513
> 
> 赞同：0
> 
> 时间：2012-09-23T07:24:29.927
> 
> 标签：jquery, live, addclass, removeclass

我有一个锚点，在单击它时会触发一些事件，并添加一个新类并删除旧类，但是当我用新类再次单击它时，原始事件会再次触发（就像根本没有删除该类一样）。我尝试了该`.live()`功能但没有帮助（`toggleclass()`也没有工作）。

有谁知道这是怎么回事？

```
$('.no-cuenta').click(function(e) {
    e.preventDefault();

    $('.login-inputs').hide('drop', 1000, function(){
      $('.register-inputs').show('drop', 1000);
      $('.no-cuenta').empty().text('Ya tienes cuenta? Ingresa').addClass('si-cuenta').removeClass('no-cuenta');
    });
  });

  //Cargar la forma para loggearse
  $('.si-cuenta').live('click',function(d) {
    d.preventDefault();

    $('.register-inputs').hide('drop', 1000, function(){
      $('.login-inputs').show('drop', 1000);
      $('.si-cuenta').empty().text('No tienes cuenta? Registrate').addClass('no-cuenta').removeClass('si-cuenta');
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:32:08.690

这一行在执行时对所有具有类的元素注册回调，即使它们稍后更改类：

```
$('.no-cuenta').click(function(e) { 
```

采用

```
$(document).on('click', '.no-cuenta',function(e) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T07:32:21.073

您应该使用 .on() 方法将单击事件处理程序绑定到委托。这确保处理程序绑定到具有指定类的任何元素，即使它们是稍后创建的。

请注意，以下代码使`body`元素成为您处理这些单击事件的委托，您应该使用最接近的公共父级作为这些元素的“管理器”：

```
$("body").on('click', '.no-cuenta', function () {
    e.preventDefault();

    $('.login-inputs').hide('drop', 1000, function(){
        $('.register-inputs').show('drop', 1000);
        $('.no-cuenta')
            .empty()
            .text('Ya tienes cuenta? Ingresa')
            .addClass('si-cuenta')
            .removeClass('no-cuenta');
    });
});
$("body").on('click', '.si-cuenta', function () {
    d.preventDefault();

    $('.register-inputs').hide('drop', 1000, function(){
        $('.login-inputs').show('drop', 1000);
        $('.si-cuenta')
            .empty()
            .text('No tienes cuenta? Registrate')
            .addClass('no-cuenta')
            .removeClass('si-cuenta');
    });
}); 
```

# eclipse - 如何设置日食视图

> ID：12550515
> 
> 赞同：2
> 
> 时间：2012-09-23T07:24:54.907
> 
> 标签：eclipse

我有用于 Android 开发的 Eclipse INDIGO 版本。我不知道如何但错误地更改了eclipse视图。我想像以前一样再次恢复我的eclipse视图只是帮助我。我想以水平方式设置我的eclipse视图，即包视图和打开类视图应该按列显示喜欢。现在看起来像：

![在此处输入图像描述](../Images/a36fe7fa7a6b1e91d3fc06be9026125a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:29:17.083

尝试 Window -> Reset Perspective...

# ruby-on-rails - 获取回形针附件的绝对 URL

> ID：12550530
> 
> 赞同：25
> 
> 时间：2012-09-23T07:27:04.727
> 
> 标签：ruby-on-rails, paperclip

是否可以获得回形针附件的绝对 URI？现在，问题是生产环境部署在子 URI 中（Passenger: 上`RackBaseURI`），但`<paperclip attachment>.url`返回 Rails-app 相对 URI（`/system/images/...`）。有没有办法获取回形针附件的绝对 URI？

我正在使用 Paperclip v2.7 和 Rails 3.2.8。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-08-08T20:40:18.270

```
asset_url(model.attachment_name.url(:style)) 
```

[相关的github问题](https://github.com/thoughtbot/paperclip/issues/584)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-21T19:24:47.267

尝试

```
URI.join(request.url, @model.attachment_name.url) 
```

或者

```
URI(request.url) + @model.attachment_name.url 
```

如果您使用 S3 或绝对 url，它是安全的。

更新：这个答案比我的好；）[https://stackoverflow.com/a/21027839/683157](https://stackoverflow.com/a/21027839/683157)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-01-09T18:05:54.310

根据这个[github issue](https://github.com/thoughtbot/paperclip/issues/584#issuecomment-1985865)，它使用起来更干净，`ActionController::Base.asset_host`所以它会产生助手：

```
 def add_host_prefix(url)
    URI.join(ActionController::Base.asset_host, url)
  end 
```

这假设您在每个`/config/environments/<environment>.rb`文件中都有以下内容：

```
Appname::Application.configure do

  # ....

  config.action_controller.asset_host = 'http://localhost:3000' # Locally

  # ....

end 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-03T21:00:26.597

最广泛适用的方法是首先在相关的配置/环境文件中定义您的资产主机：

```
config.action_controller.asset_host = "http://assethost.com"
config.action_mailer.asset_host = "http://assethost.com" 
```

然后在视图和邮件中：

```
asset_url(model.attachment.url(:style)) 
```

在控制台中：

```
helper.asset_url(model.attachment.url(:style)) 
```

在模型中：

```
ApplicationController.helpers.asset_url(model.attachment.url(:style)) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-23T21:19:33.007

你可以这样做：

```
<%= image_tag "#{request.protocol}#{request.host_with_port}#{@model.attachment_name.url(:attachment_style)}" %> 
```

或者制作一个辅助方法来包装它。

```
def absolute_attachment_url(attachment_name, attachment_style = :original)
  "#{request.protocol}#{request.host_with_port}#{attachment_name.url(attachment_style)}"
end 
```

并像这样使用它：

```
<%= image_tag absolute_attachment_url(attachment_name, :attachment_style)}" %> 
```

例如：模型 = 人 (@person)，附件名称 = 头像，样式 = :thumb

```
<%= image_tag absolute_attachment_url(@person.avatar, :thumb)}" %> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-16T20:25:57.400

这并不能完全解决原始海报的问题（它在视图中运行，而不是在模型中运行），但对于试图在视图中“获取回形针附件的绝对 URL”的人可能会有所帮助：以同样的方式

```
image_tag(user.avatar.url(:large)) 
```

将图像本身置于您的视野中，

```
image_url(user.avatar.url(:large)) 
```

`link_to`如果您想直接链接到资产（例如在调用中），则只返回您需要的 URL 。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-06T15:57:51.213

您可以添加到您的`application.rb`（或特定环境中`config/environments/*`）：

```
config.paperclip_defaults = {
    url: "http://my.address.com/system/:class/:attachment/:id_partition/:style.:extension",
    path: ':rails_root/public/system/:class/:attachment/:id_partition/:style.:extension',
} 
```

重新启动并重新导入您的图像。

PS：显然您可以将[http://my.address.com](http://my.address.com)替换为环境变量。

# java - Eclipse Juno 内容辅助错误

> ID：12550534
> 
> 赞同：2
> 
> 时间：2012-09-23T07:28:30.750
> 
> 标签：java, eclipse, intellisense

我已经安装了 Eclipse Juno Build id：20120614-1722。java jdk版本是：

$ java -版本

```
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b10)
Java HotSpot(TM) Server VM (build 23.3-b01, mixed mode) 
```

Jre版本是：

$javac -版本

```
javac 1.7.0_07 
```

问题是，每当我想调用一个方法时，例如 System.out.print(); 我收到以下错误和跟踪日志。

错误 ![输入系统后出错。](../Images/385d163790bdef5ed1760f593255e14a.png)

下面是跟踪日志的开头。

```
Exception in thread "AutoAssist Delay" org.eclipse.swt.SWTException: 
Failed to execute runnable (java.lang.LinkageError: 
loader constraint violation: when resolving method                                                                   "org.eclipse.recommenders.utils.rcp.JdtUtils.
createUnresolvedType(Lorg/eclipse/jdt/internal/compiler/lookup/TypeBinding;)
Lcom/google/common/base Optional;" 

the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader) 
of the current class,
org/eclipse/recommenders/internal/completion/rcp/BaseRecommendersCompletionContext, 
and the class loader (instance of org/eclipse/osgi/internal/baseadaptor/DefaultClassLoader)
for resolved class,org/eclipse/recommenders/utils/rcp/JdtUtils
have different Class objects for the type 
pse.recommenders.utils.rcp.JdtUtils.
createUnresolvedType(Lorg/eclipse/jdt/internal/compiler
/lookup/TypeBinding;)Lcom/google/common/base/Optional; used in the signature)
        at org.eclipse.swt.SWT.error(SWT.java:4361)
        at org.eclipse.swt.SWT.error(SWT.java:4276)
        at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:196)
        at org.eclipse.ui.internal.UISynchronizer.syncExec(UISynchronizer.java:150)
        at org.eclipse.swt.widgets.Display.syncExec(Display.java:4291) 
```

# html - Google Docs 如何将鼠标坐标映射到文本偏移量（用于拖放）？

> ID：12550538
> 
> 赞同：2
> 
> 时间：2012-09-23T07:29:02.767
> 
> 标签：html, text, drag-and-drop, mouse

我花了一些时间搜索将鼠标坐标映射到文本偏移量（用于拖放），但我遇到的唯一解决方案是将每个字符包装在自己的跨度中，以便您可以监视该跨度上的鼠标事件，这不是一个可扩展的解决方案（对于大型文档）。

但此外，Google Docs 能够在鼠标拖动文本时跟踪鼠标光标（在鼠标所在的文本中绘制插入点）。从监视文本及其周围的 DOM 来看，它似乎没有使用字符跨度技术。有谁知道这是如何实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:12:28.097

不幸的是，我没有 Google 帐户，因此无法查看 Google 使用什么来完成 Google Docs。[但是为了获得选择源，您可能会对这个答案](https://stackoverflow.com/a/5084044/1678062)感兴趣。

您还提到了拖放。HTML5 支持一个名为“contenteditable”的属性。浏览器使其（顾名思义）可供用户编辑。[这是一个很好的例子](http://html5demos.com/contenteditable)。

要了解如何使用 HTML 5 技术编写编辑器（例如 CKEditor 甚至可能是 Google Docs），请阅读[http://www.quackit.com/html/codes/contenteditable.cfm](http://www.quackit.com/html/codes/contenteditable.cfm)。

# java - XML 将节点值解析为字符串

> ID：12550542
> 
> 赞同：1
> 
> 时间：2012-09-23T07:29:51.180
> 
> 标签：java, xml, jakarta-ee, xpath, xml-parsing

我的 xml 文件看起来像这样。我想像这样获取**值**节点文本内容。

```
<property regex=".*" xpath=".*">
     <value>
          127.0.0.1
     </value>
<property regex=".*" xpath=".*">
<value>

</value>
</property> 
```

我想按照他们在文件中指定的顺序获取文本。这是我的 java 代码。

```
Document doc = parseDocument("properties.xml");
NodeList properties = doc.getElementsByTagName("property");
for( int i = 0 , len = properties.getLength() ; i < len ; i++) {
     Element property = (Element)properties.item(i);
     //How can i proceed further .
} 
```

预期输出：

```
 Node 1 : 127.0.0.1 
```

请提出您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:19:18.317

下面的方法查找`property`文档中的所有元素，并使用 XPath 收集`value`那些命名为`value`wihtout 的元素的所有子元素。

```
 private static List<Element> getValueElements(Document document) {
    List<Element> result = new ArrayList<Element>();
    NodeList propertyElements = document.getElementsByTagName("property");
    for (int i = 0, ilen = propertyElements.getLength(); i < ilen; i++) {
      Node propertyNode = propertyElements.item(i);
      if (!(propertyNode instanceof Element))
        continue;

      NodeList children = ((Element) propertyNode).getChildNodes();
      for (int j = 0, jlen = children.getLength(); j < jlen; j++) {
        Node child = children.item(j);
        if (!(child instanceof Element) || !"value".equals(child.getNodeName()))
          continue;

        result.add((Element) child);
      }
    }
    return result;
  } 
```

但是您可以使用 XPath 表达式以更优雅的方式执行相同的操作`//property/value`：

```
private static List<Element> getValueElementsUsingXpath(Document document) throws XPathExpressionException {
  XPath xpath = XPathFactory.newInstance().newXPath();
  // XPath Query for showing all nodes value
  XPathExpression expr = xpath.compile("//property/value");
  Object xpathResult = expr.evaluate(document, XPathConstants.NODESET);

  List<Element> result = new ArrayList<Element>();
  NodeList nodes = (NodeList) xpathResult;
  for (int i = 0; i < nodes.getLength(); i++) {
    Node valueNode = nodes.item(i);
    if (!(valueNode instanceof Element)) continue;
    result.add((Element) valueNode);
  }

  return result;
} 
```

您可以像这样使用上面的方法：

```
 public static void main(String[] args) throws Exception {
    Document doc = parseDocument("properties.xml");
    List<Element> valueElements = getValueElements(doc);  // or getValueElementsUsingXpath(doc)

    int nodeNumber = 0;
    for (Element element : valueElements) {
      nodeNumber++;
      System.out.println("Node " + nodeNumber + ": " + formatValueElement(element));
    }
  }

  private static String formatValueElement(Element element) {
    StringBuffer result = new StringBuffer();

    boolean first = true;
    NodeList children = ((Element) element).getChildNodes();
    for (int i = 0, len = children.getLength(); i < len; i++) {
      Node child = children.item(i);

      String childText = null;
      switch (child.getNodeType()) {
      case Node.CDATA_SECTION_NODE:
      case Node.TEXT_NODE:
        childText = child.getTextContent().trim();
      }

      if (childText == null || childText.isEmpty()) {
        continue;
      }

      if (first)
        first = false;
      else
        result.append(" ");

      result.append(childText);
    }

    return result.toString();
  } 
```

我使用以下两个 XML 输入对其进行了测试，因为您的 XML 缺少结束`</property>`标记。

这是第一个（我添加了额外的元素，以表明它们没有找到）：

```
 <rootNode>
  <property regex=".*" xpath=".*">
       <value>
            127.0.0.1
       </value>
       <anythingElse>Text here</anythingElse>
  </property>
  <anythingElse>Text here</anythingElse>
  <property regex=".*" xpath=".*">
  <value>
       val <![CDATA[
       <Valve className="org.tomcat.AccessLogValve" exclude="PASSWORD,pwd,pWord,ticket" enabled="true" serviceName="zohocrm" logDir="../logs" fileName="access" format="URI,&quot;PARAM&quot;,&quot;REFERRER&quot;,TIME_TAKEN,BYTES_OUT,STATUS,TIMESTAMP,METHOD,SESSION_ID,REMOTE_IP,&quot;INTERNAL_IP&quot;,&quot;USER_AGENT&quot;,PROTOCOL,SERVER_NAME,SERVER_PORT,BYTES_IN,ZUID,TICKET_DIGEST,THREAD_ID,REQ_ID"/>
       ]]> test
  </value>
  </property>
  </rootNode> 
```

第二个有嵌套的属性元素（我在最后添加了缺少的元素）：

```
 <property regex=".*" xpath=".*">
      <value>
          127.0.0.1
      </value>
      <property regex=".*" xpath=".*">
      <value>
          val <![CDATA[
          <Valve className="org.tomcat.AccessLogValve" exclude="PASSWORD,pwd,pWord,ticket" enabled="true" serviceName="zohocrm" logDir="../logs" fileName="access" format="URI,&quot;PARAM&quot;,&quot;REFERRER&quot;,TIME_TAKEN,BYTES_OUT,STATUS,TIMESTAMP,METHOD,SESSION_ID,REMOTE_IP,&quot;INTERNAL_IP&quot;,&quot;USER_AGENT&quot;,PROTOCOL,SERVER_NAME,SERVER_PORT,BYTES_IN,ZUID,TICKET_DIGEST,THREAD_ID,REQ_ID"/>
          ]]> test
      </value>
      </property>
  </property> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T10:26:05.690

```
Document doc = parseDocument("properties.xml");
NodeList properties = doc.getElementsByTagName("property");
for( int i = 0 , len = properties.getLength() ; i < len ; i++) {
     Element property = (Element)properties.item(i);
     Element value = (Element)property.getElementsByTagName("value").item(0);
     if (value != null)
     {
        System.out.println("Node " + (i + 1) + ": " + value.getTextContent());
     }
} 
```

应该有助于访问元素的内容。请注意，如果您想要发布的确切结果，您可能还需要或可能想要去除前导和尾随空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T12:16:01.770

一一读取节点值：

```
 private static void printValues(String xml) throws Exception {
    Element element = parseXml(xml);

    NodeList values = element.getElementsByTagName("value");
    for(int i = 0; i<values.getLength(); i++){
        Node item = values.item(i);
        NodeList vals = item.getChildNodes();

        String value = ""; 

        for(int j = 0; j<vals.getLength(); j++){
            value += vals.item(j).getNodeValue(); 
        }

        System.out.print("Node ");
        System.out.print(Integer.toString(i));
        System.out.print(": ");
        System.out.println(value.trim());
    }
}

public static Element parseXml(String source) throws Exception{
    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
    Document doc = dBuilder.parse(new InputSource(new ByteArrayInputStream(source.getBytes("utf-8"))));
    Element element = doc.getDocumentElement();
    element.normalize();

    return element;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T13:30:43.233

您可以使用另一种方式解决此问题`XSLT`。这是Java代码：

```
public static void main(String args[]) throws TransformerException{

    String xmlFilePath = "/path/to/xml";
    String xslFilePath = "/path/to/xsl";

    Source xmlSource = new StreamSource(new File(xmlFilePath));
    Source xsltSource = new StreamSource(new File(xslFilePath));        
    Result transResult = new StreamResult(System.out);

    TransformerFactory transFact = TransformerFactory.newInstance();
    Transformer trans = transFact.newTransformer(xsltSource);

    trans.transform(xmlSource, transResult);

} 
```

这是样式表文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="text" omit-xml-declaration="yes" />

    <xsl:template match="/">
        <xsl:apply-templates select="*/property"/>
    </xsl:template>

    <xsl:template match="property">
        <xsl:number /> 
        <xsl:text> </xsl:text>
        <xsl:apply-templates select="node()" />
        <xsl:text>&#xa;</xsl:text>
    </xsl:template>

    <xsl:template match="node()">
        <xsl:if test="normalize-space(.)">
            <xsl:value-of select="normalize-space(.)" />
        </xsl:if>
    </xsl:template>

</xsl:stylesheet> 
```

应用于此输入时：

```
 <root>
  <property regex=".*" xpath=".*">
       <value>
            127.0.0.1
       </value>
       <anythingElse>Text here</anythingElse>
  </property>
  <property regex=".*" xpath=".*">
  <value>
       val <![CDATA[
       <Valve className="org.tomcat.AccessLogValve" exclude="PASSWORD,pwd,pWord,ticket" enabled="true" serviceName="zohocrm" logDir="../logs" fileName="access" format="URI,&quot;PARAM&quot;,&quot;REFERRER&quot;,TIME_TAKEN,BYTES_OUT,STATUS,TIMESTAMP,METHOD,SESSION_ID,REMOTE_IP,&quot;INTERNAL_IP&quot;,&quot;USER_AGENT&quot;,PROTOCOL,SERVER_NAME,SERVER_PORT,BYTES_IN,ZUID,TICKET_DIGEST,THREAD_ID,REQ_ID"/>
       ]]> test
  </value>
  </property>
  </root> 
```

将产生以下输出：

```
1 127.0.0.1
2 val <Valve className="org.tomcat.AccessLogValve" exclude="PASSWORD,pwd,pWord,ticket" enabled="true" serviceName="zohocrm" logDir="../logs" fileName="access" format="URI,&quot;PARAM&quot;,&quot;REFERRER&quot;,TIME_TAKEN,BYTES_OUT,STATUS,TIMESTAMP,METHOD,SESSION_ID,REMOTE_IP,&quot;INTERNAL_IP&quot;,&quot;USER_AGENT&quot;,PROTOCOL,SERVER_NAME,SERVER_PORT,BYTES_IN,ZUID,TICKET_DIGEST,THREAD_ID,REQ_ID"/> test 
```

# ios - xcode 4.5 上的符号化崩溃失败

> ID：12550545
> 
> 赞同：9
> 
> 时间：2012-09-23T07:30:01.197
> 
> 标签：ios, xcode, symbolicatecrash

我刚刚将我的 xcode 升级到 4.5 版，我尝试了三种方式来表示崩溃日志，但都没有成功。

首先，我从我的设备中获取了崩溃日志，然后将其导入到 Organizer 的“设备日志”中，但我的应用程序的确切功能无法显示，内存地址仍然显示在结果中。

其次，我将'symbolicatecrash'文件从'/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/Library/PrivateFrameworks/DTDeviceKit.framework/Versions/A/Resources'复制到'/usr/local /bin'并将.DSYM文件、.app文件和.crash文件放入一个文件夹，运行命令：'symbolicatecrash Myapp.crash'，结果还是显示内存地址。

最后，我尝试了[http://xperienced.com.pl/blog/symbolicate-ios-crash-report](http://xperienced.com.pl/blog/symbolicate-ios-crash-report)中的方法，但仍然没有运气。

你能帮我解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T05:12:10.533

我根据[https://github.com/TheRealKerni/QuincyKit/issues/46](https://github.com/TheRealKerni/QuincyKit/issues/46)中的讨论解决了它。[并从https://github.com/TheRealKerni/QuincyKit/blob/3c4a0b163ac71599a7795508fe6a91c1ced9daa6/server/local/symbolicatecrash.pl](https://github.com/TheRealKerni/QuincyKit/blob/3c4a0b163ac71599a7795508fe6a91c1ced9daa6/server/local/symbolicatecrash.pl)运行 perl 脚本以获得正确的结果。

@Kerni，谢谢你的剧本！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T10:58:20.740

如果您的应用名称中有国际字符（例如“ø”、“ô”、“ç”），则符号化将失败。符号化过程中的各个步骤会弄乱这些字符，从而导致无效的符号化路径。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-12T01:01:17.307

你关了聚光灯吗？symbolicatecrash 使用 Spotlight 来查找二进制文件和 dsym 文件，因此如果您关闭了 Spotlight，它将无法找到它们。无论如何，这里是将十六进制堆栈跟踪地址转换为行号的方法：

[1] 到 XCode->Organizer 找到 .dSym 文件，点击档案，然后右键点击档案，然后 cd 进入这个目录（你可以把文件夹拖到一个 shell 窗口中）。

[2] cd 进入 dSYMs 目录。

[3] 运行 dwarfdump 命令将十六进制地址转换为代码中的行号：

```
dwarfdump --arch armv7 myApp.dSYM --lookup 0xaabbccdd | grep 'Line table' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-21T19:59:52.047

我安装了 Xcode 4.5 和 4.4.1，删除 4.4.1 后，符号问题得到了修复。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-02T23:26:57.293

如果您还没有尝试过，请将您的 Mac 升级到 OSX 10.8.2。我运行的*是*OSX 10.7.5，升级**后立即**解决了我的符号化问题。

我已经尝试了几乎**所有**方法来让我的崩溃日志具有象征意义。我以前从来没有遇到过问题，但是自从我查看崩溃日志以来已经过去了几个月；在那段时间的某个时候，我升级到了 Xcode 4.5.2。在我看来，Xcode 4.5.2 symbolicatecrash perl 脚本的某些内容在运行 OSX 10.7.5 的 Mac 上无法正常工作。在 symbolicatecrash 中，它调用 atos 对地址进行符号化；它找不到匹配的符号，即使我**知道**我有正确的 xcarchive。无论如何，如果您能负担得起 20 美元，请购买 OSX 10.8.2，希望这对您有用。

# java - java中的e.consume()有什么作用

> ID：12550548
> 
> 赞同：13
> 
> 时间：2012-09-23T07:30:28.060
> 
> 标签：java

我在网上搜索并没有得到关于在java KeyEvent Handle中经常使用的e.consume（）的使用的明确解释。就像下面的代码一样。

```
public void keyTyped( KeyEvent e ) {
    char c = e.getKeyChar();
    if ( c != KeyEvent.CHAR_UNDEFINED ) {
        s = s + c; 
        repaint();
        e.consume();
    } 
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T07:36:29.153

来自[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/awt/event/InputEvent.html#consume())

> 使用此事件，以便它不会由发起它的源以默认方式处理。

本质上，这意味着您不希望将事件分派给任何其他事件侦听器或由任何其他事件侦听器处理。

虽然，一般来说，这取决于各个侦听器的实现

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T07:36:32.467

消费函数负责`KeyListeners`在某些特定类型的事件发生期间不处理代码。例如：如果我想`textfield`在java中制作一个它只在按下数字时响应，那么我可以使用consume方法来消费（不处理不是由于按下数字而引起的keyevents）这样的事件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-23T07:33:26.147

查看[文档](http://docs.oracle.com/javase/6/docs/api/java/awt/event/InputEvent.html#consume%28%29)：[InputEvent](http://docs.oracle.com/javase/6/docs/api/java/awt/event/InputEvent.html)类的`KeyEvent`继承`consume`方法。consume 方法使用此事件，以便它**不会由发起它的源以默认方式处理**。

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-23T07:33:08.917

它是`AWTEvent`类的一种方法。它用于消费`this`事件，如果它可以被消费的话。

你检查了[`AWTEvent.consume()`](http://docs.oracle.com/javase/7/docs/api/java/awt/AWTEvent.html#consume%28%29)吗？

此外，看看[consume() 是如何工作的？](http://mindprod.com/jgloss/event11.html#CONSUME)用于解释究竟消费是做什么的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-07T08:18:40.247

当事件被消费时，事件源（例如在键入键时具有焦点的 JTextField）将忽略该事件。

如果你看一下类的`processKeyEvent`方法`JComponent`：

```
protected void processKeyEvent(KeyEvent e) {
    boolean result;
    boolean shouldProcessKey;

    // This gives the key event listeners a crack at the event
    super.processKeyEvent(e);

    // give the component itself a crack at the event
    if (! e.isConsumed()) {
        processComponentKeyEvent(e);
    } 
```

您可以看到它`super.processKeyEvent(e)`首先被调用，这会将事件分派给注册的侦听器`component.addKeyListener()`。监听器按照它们最初注册的顺序被通知，即使其中一个消费了事件，它们也会被通知。唯一可以阻止事件被其余侦听器处理的是未捕获的异常。

在通知侦听器后，组件本身将处理该事件，但前提是它尚未被其中一个侦听器消费。对于 JTextField，如果侦听器使用了键类型事件，则不会更新该字段（但使用键按下事件将没有效果）。

请注意，鼠标事件的行为不同，其中一个侦听器使用的事件仍由组件处理。**

# php - htaccess url 的斜线不匹配

> ID：12550556
> 
> 赞同：0
> 
> 时间：2012-09-23T07:32:25.653
> 
> 标签：php, apache, .htaccess, url, mod-rewrite

我在 .htaccess 文件中有以下配置：

```
Options -Multiviews -Indexes +FollowSymLinks
RewriteEngine on
RewriteBase /coaster/CoasterInsider/
RewriteRule searchResults/keyword/(.*)/?$ index.php?page=searchResults&keyword=$1 [L,NC]
RewriteRule searchResults/keyword/(.*)/start/(.*)/?$ index.php?page=searchResults&keyword=$1&start=$2 [L,NC] 
```

但是`start=$2`不匹配。例如： url is:`localhost/coaster/CoasterInsider/searchResults/keyword/a/start/3/` 但是当我尝试`echo $_GET['keyword']`打印时`a/start/3/`，开始没有得到任何价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:33:44.290

请尝试颠倒最后两条规则的顺序。

# ruby-on-rails - 如何将语言环境参数传递给设计

> ID：12550564
> 
> 赞同：3
> 
> 时间：2012-09-23T07:33:28.480
> 
> 标签：ruby-on-rails, internationalization, devise

在我的站点中，区域设置由附加到 URL 的查询参数确定（例如[http://www.mysite.com/mypage?locale=en](http://www.mysite.com/mypage?locale=en)）。

我`before_filter :authenticate_user!`在我的应用程序控制器中使用 devise with，但不知道如何传递 locale 参数来设计登录视图（如果我在呈现后手动将其添加到视图 URL，它确实显示了翻译后的视图，它只是传递我无法弄清楚的参数）

我将以下内容添加到我的应用程序控制器中，但没有成功：

```
 before_filter :set_locale

  def set_locale
    I18n.locale = params[:locale] || I18n.default_locale
  end

  def default_url_options(options={})
    { locale: I18n.locale }
  end 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-27T13:59:45.377

我找到了解决方案。显然，Devise 需要像这样定义方法（而不像 rails[文档](http://guides.rubyonrails.org/i18n.html)状态那样）：

```
def self.default_url_options
  { :locale => I18n.locale }
end 
```

顺便说一句，如果有人能解释原因和区别，请做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-22T00:31:20.037

DeviseController 不继承自 ApplicationController，因此访问 default_url_options 的唯一方法是将其定义为 ApplicationController 上的类方法。

# java - 如何在三星手机上安装 Java ME 应用程序？

> ID：12550568
> 
> 赞同：4
> 
> 时间：2012-09-23T07:33:55.513
> 
> 标签：java, mobile, deployment, java-me, samsung-mobile

我的手机应该能够运行：JavaTM：基于 MIDP 2.0、CLDC 1.1 的应用程序。但是，无论我尝试在其上安装哪个应用程序，我都会收到错误消息：`Downloaded JAR are invalid`

我尝试使用指定的 MIDP 2.0 和 CLDC 1.1 在 Netbeans 上构建 Java ME 项目。这些应用程序很简单，使用 Netbeans 附带的自动生成代码来显示 hello world 消息。它可以在模拟器中运行，但是当我将 .JAR 传输到手机时，出现上述错误。

[这](http://developer.samsung.com/deviceSpecsView.do?compareModel0=&compareModel1=&compareModel2=&compareCdn0=&compareCdn1=&compareCdn2=&compareModel=&platformId=3&osVersion=&pageSize=50&sortingType=1&pageNum=1&modelCode=GT-C3222FIASER)是手机的型号和规格。

是否有人为此或任何类似的三星手机开发了任何 Java ME 应用程序，知道我需要做什么？

编辑： jad 文件的内容：

```
MIDlet-1: Midlet, , hello.Midlet
MIDlet-Jar-Size: 1565
MIDlet-Jar-URL: MobileApplication1.jar
MIDlet-Name: MobileApplication1
MIDlet-Vendor: Vendor
MIDlet-Version: 1.0
MicroEdition-Configuration: CLDC-1.1
MicroEdition-Profile: MIDP-2.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:02:07.133

尽管许多手机允许安装 MIDlet 的其他方法，但根据 JavaME 规范，它们都应该支持的唯一标准方法是：

*   将 jad 和 jar 放在任何人都可以访问的 Web 服务器上。选择您的移动网络运营商不会阻止的服务器。

*   打开电话网络浏览器。使其转到 jad 文件 URL。

*   Web浏览器应该下载jad文件，了解它是什么，让手机安装应用程序。

*   安装时手机的互联网连接应使用蜂窝网络（无 wi-fi ...）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T20:44:13.033

也许你的文件名太大了。“MobileApplication1”有 18 个字符。尝试将两个名称（jad 和 jar）减少到等于或低于 13，例如：MobileApp.jad 和 MobileApp.jar
将两个文件放在 SD 卡上并打开 Jad 文件。

# objective-c - glBindAttribLocation() 的某些名称不起作用。Objective-C 问题？

> ID：12550570
> 
> 赞同：3
> 
> 时间：2012-09-23T07:34:25.283
> 
> 标签：objective-c, opengl-es-2.0

在我发布一些代码之前，我先解释一下：我现在正在 iPhone 平台上学习 OpenGL ES 2.0，而且我的程序每次都要编译，但它只能在某些时候正确运行。这是一个超级简单的程序，有一个顶点着色器、一个片段着色器和一个三角形。

出于某种原因，只有顶点着色器中的某些属性名称有效。例如，如果我使用`attribute vec4 v_Color`程序运行得很好，但如果我`attribute vec4 v_color`不使用大写“C”，它会将我的位置属性重新分配为我的颜色属性，反之亦然，即使我明确地使`glBindAttribLocation()`名称参数与属性*完全*匹配姓名。另一个不起作用的是`vColor`，但由于某种原因`a_color`工作得很好。我尝试使用一些随机词，如“bar”，但没有奏效。请记住，我将顶点着色器中的名称与我在`glBindAttribLocation()`.

似乎不太可能只使用某些名称。（通用属性的全部意义不是为程序员提供更多灵活性吗？）鉴于我所做的只是更改名称，我想知道我将顶点着色器读入我的程序的方式是否有问题第一名；也许我使用了错误的编码类型。也许它误读了它并试图自己弄清楚它，从而忽略了我拥有的明确名称并重新分配它们。

这是我用来读取顶点着色器的代码：

```
NSError *error;
NSString *vertPath = [[NSBundle mainBundle] pathForResource:@"Simple" ofType:@"vert"];
NSString *vertShaderString = [NSString stringWithContentsOfFile:vertPath encoding:NSUTF8StringEncoding error:&error];
const GLchar *vertShaderText = [vertShaderString UTF8String];

if (!vertShaderString) {
    NSLog(@"%@", [error localizedDescription]);
}

vertShader = glCreateShader(GL_VERTEX_SHADER);
glShaderSource(vertShader, 1, &vertShaderText, NULL);

glCompileShader(vertShader);
glGetShaderiv(vertShader, GL_COMPILE_STATUS, &vertCompiled);
if (!vertCompiled) {

    NSLog(@"Vert shader not compiled.");
}

glAttachShader(prog, vertShader); 
```

然后是我实际用来进行绘制调用的代码：

```
GLfloat vertices[] = { 0.0, 0.0, 0.0, 0.5, 0.5, 0.5 };
GLubyte indices[3] = { 0, 1, 2 };

// Position vertex attribute data
glEnableVertexAttribArray(0);
glBindAttribLocation(prog, 0, "a_position");
glVertexAttribPointer(0, 2, GL_FLOAT, GL_FALSE, 0, vertices);

// Color vertex attribute data
GLfloat vColors[] = {
    1.0, 0.0, 0.0, 1.0,
    0.0, 1.0, 0.0, 1.0,
    0.0, 0.0, 1.0, 1.0 };

glEnableVertexAttribArray(1);
glBindAttribLocation(prog, 1, "a_color");
glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, vColors);

glDrawElements(GL_TRIANGLES, sizeof(indices)/sizeof(GLubyte), GL_UNSIGNED_BYTE, indices); 
```

最后，相当简单的顶点着色器（不需要包含片段着色器，因为它非常基础）：

```
attribute vec4 a_position;
attribute vec4 a_color;

varying vec4 varColor;

void main() {

gl_Position = a_position;
varColor = a_color;
} 
```

上面的代码其实可以正常工作，但是如果我改成`a_color`，`v_color`它会突然切换我的位置数据和我的颜色数据，所以我的三角形改变了形状，颜色都是错误的，这当然是不可取的。这是一个非常奇怪的问题。您是否怀疑这是我的 Objective-C 实现或我的 OpenGL ES 2.0 实现的问题？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T14:46:12.433

调用`glBindAttribLocation`仅在下次程序链接时生效`glLinkProgram`。像在这里一样调用它没有任何作用，因此您的变量被分配给编译器提供的任何随机数。

另一种选择，如果您不想在链接之前调用它，则可以使用`glGetAttribLocation`此处来查询 OpenGL 为每个属性分配的值。尽管尝试缓存该值，这样您就不会`get`在每一帧上都调用它。

# jquery - 我可以在同一列中为 tds 设置背景颜色吗？

> ID：12550575
> 
> 赞同：0
> 
> 时间：2012-09-23T07:35:50.593
> 
> 标签：jquery, html, jsp

我目前正在从事一个项目，我希望允许一次突出显示 1 列的 tds。如果任何其他列中没有突出显示，则允许任何列。提前致谢。下面提到的是我的代码。

```
<style>
    .highlight { background:yellow; }
</style>

<script>

$(function() {
    $('td').click(function() {
        alert(event.target.id);
       $(this).toggleClass("highlight");
    });
});
</script>
<%@ page import="java.util.*" %>
<%
ArrayList<String> rooms = new ArrayList<String>();
rooms.add("GSR_2-1");
rooms.add("GSR_2-2");
rooms.add("GSR_2-3");
rooms.add("GSR_2-4");
ArrayList<String> time = new ArrayList<String>();
time.add("0800");
time.add("0830");
time.add("0900");
time.add("0930");
%>
<table width="100%" border="1">
<%
    for(int x = 0 ; x<time.size() ; x++){
        out.println("<tr>");
        for(int y = 0 ; y<rooms.size() ; y++){
            out.println("<td id="+rooms.get(y) +">");
            out.println(rooms.get(y)+" "+time.get(x));
            out.println("</td>");
        }
        out.println("</tr>");
    }
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:49:56.487

这是你想要的吗？

```
$('td').click(function() {
    var $td = $(this);
    $td.closest('table').find('tr').each(function() {
        $(this).find('td:eq('+$td.index()+')').toggleClass("highlight");
    });
}); 
```

[***工作演示。***](http://jsfiddle.net/eHHDd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:43:39.943

如果我是你，我会为每一列使用一个类并这样做：

HTML

```
<html>

    <head>

        <title>Classes</title>

    </head>

    <body>

        <table>

            <tr>

                <td class='col1'>11</td>
                <td class='col2'>12</td>

            </tr>
            <tr>

                <td class='col1'>21</td>
                <td class='col2'>22</td>

            </tr>

        </table>

    </body>

</html>
​ 
```

CSS

```
.highlight {

    /* your style here*/
    background: #00aa00; /* demo highlight*/

}
td {

    padding: 2px;

}
​ 
```

jQuery

```
$("table tr td").on("click", function(){

    var clss = $(this).attr('class');
    var selector = "table tr td." + clss;
    if (clss.match(/highlight/)) {
        $(".highlight").removeClass("highlight");
    } else if ($(".highlight").size() == 0) {
        $(selector).addClass("highlight");
    } 
});​ 
```

**编辑**：这是工作的jsFiddle：

[http://jsfiddle.net/qUcPK/2/](http://jsfiddle.net/qUcPK/2/)

# asp.net - 带有 ASP.net webforms 的 jquery 移动对话框中未触发按钮单击事件

> ID：12550576
> 
> 赞同：1
> 
> 时间：2012-09-23T07:36:05.653
> 
> 标签：asp.net, jquery-mobile, webforms

我正在使用 Jquery Mobile 打开对话框。问题是`btnSend_Click`事件没有触发。我正在尝试做的是在更新面板中保留按钮和文本框，并在破坏服务器端的代码后回发并关闭对话框。

[样品在这里](http://dev.simpletix.com/kiosk/RetrieveTickets/RetrieveTicketsOptions.aspx?OrderNumber=C-C99F413B-9)

**父页面按钮 HTML**

```
<a href="/Kiosk/RetrieveTickets/RetrieveTicketsBySms.aspx" data-role="button" data-inline="true" data-theme="c" class="MyBigButton"
                        data-inline="true" data-rel="dialog" data-transition="pop">Via SMS
                        <br />
                        <br />
                        <img src="/Kiosk/images/mobile.png" />
                    </a> 
```

**对话框页面 HTML**

```
 <div id="dlgSms" data-role="dialog" data-theme="b">
        <div data-role="header" data-theme="d">
            <h1>
                Retrieve Tickets By SMS</h1>
        </div>
        <div data-role="content" data-theme="c">
            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
                    <p>
                        Please type here your mobile number. You will get your ticket on your mobile via
                        SMS.</p>
                    <asp:TextBox runat="server" ID="txtMobileNumber" placeholder="Enter Mobile Number" />
                    <asp:Button ID="btnSend" Text="Send SMS Now" runat="server" data-theme="b" OnClick="btnSend_Click" />
                </ContentTemplate>
            </asp:UpdatePanel>
            <a href="#" data-role="button" data-rel="back" data-theme="c">Cancel</a>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:21:28.020

我将在这里向您描述主要问题。

当您单击“通过 SMS”按钮打开一个对话框时，脚本会加载一个不同的 aspx 页面，`RetrieveTicketsBySms.aspx`并将其**呈现**在前一个的 DOM 中。所以按钮和更新面板和脚本`RetrieveTicketsBySms.aspx`现在已经成为历史。

所以按钮它的火，而是调用`RetrieveTicketsOptions.aspx`页面，甚至没有它，而且哈希验证也失败了，所以它没有被触发。您在更新面板中也有它，所以从我所看到的情况来看，甚至没有发回任何帖子。

此处可能的解决方案是放置对话框的内容，该内容将加载到`RetrieveTicketsBySms.aspx`iframe 内部——如果可能的话。并删除更新面板。

# php - 使用 CodeIgniter DataMapper ORM 保存一对一关系

> ID：12550584
> 
> 赞同：1
> 
> 时间：2012-09-23T07:37:10.277
> 
> 标签：php, codeigniter-datamapper

我的数据库架构：

```
CREATE TABLE IF NOT EXISTS `costumers` (
  `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `person_id` smallint(5) unsigned NOT NULL,
  `status` tinyint(1) unsigned NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  KEY `fk_costumers_persons_idx` (`person_id`)
);

CREATE TABLE IF NOT EXISTS `persons` (
  `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL,
  `phone` char(10) DEFAULT NULL,
  `mobile` char(10) DEFAULT NULL,
  `email` varchar(64) NOT NULL,
  `date_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `data_updated` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`id`)
); 
```

这是我的控制器代码：

```
class Test extends CI_Controller {
    public function index()
    {
        // Faking POST values
        $_POST = array(
            // Person info
            'name' => 'Paulo Freitas',
            'phone' => 'xxxxxxxxxx',
            'email' => 'xx@xxxxxxxxxxxx.xx',
            // Costumer info
            'status' => 2
        );

        // Utility function
        function factory_from($class, $fields)
        {
            $CI =& get_instance();
            $input = array();

            foreach ($fields as $field) {
                $input[$field] = $CI->input->post($field) ?: null;
            }

            $obj = new $class;
            $obj->from_array($input);

            return $obj;
        }

        // Save person
        $person = factory_from('Person', array(
            'name',
            'phone',
            'mobile',
            'email'
        ));
        $person->save();
        // Save costumer
        $costumer = factory_from('Costumer', array(
            'status'
        ));
        $costumer->save($person);
        var_dump($costumer->id); // New costumer id
    }
} 
```

我是 CodeIgniter 的 DataMapper ORM 的新手，我对如何确保仅在成功存储相关客户时才能确保存储一个人有点迷茫。例如，如果我验证一个客户`status`但它失败了，为了存储我以前必须存储其相关人员的客户......如果我不能存储客户，我该如何回滚新的人？（在实际场景中，我有一个`persons`、和表，只有在全部成功时才需要存储它们）`individuals``users``costumers`

我如何在这里使用交易？是的，我已经阅读了有关使用事务的文档，但我不知道，现在我已经坚持了几个小时。先感谢您！

**更新**

我稍微破解了我的控制器，现在它似乎可以工作了，有没有更好的方法来实现这一点？

新控制器：

```
class Test extends CI_Controller {
    public function index()
    {
        // Faking POST values
        $_POST = array(
            // Person info
            'name' => 'Paulo Freitas',
            'phone' => 'xxxxxxxxxx',
            'email' => 'xx@xxxxxxxxxxxx.xx',
            // Costumer info
            'status' => 2
        );

        // Utility functions
        function factory_from($class, $fields)
        {
            $CI =& get_instance();
            $input = array();

            foreach ($fields as $field) {
                $input[$field] = $CI->input->post($field) ?: null;
            }

            $obj = new $class;
            $obj->from_array($input);

            return $obj;
        }

        function get_errors()
        {
            $errors = array();

            foreach (func_get_args() as $obj) {
                $errors += $obj->error->all;
            }

            return $errors;
        }

        // Initialize person
        $person = factory_from('Person', array(
            'name',
            'phone',
            'mobile',
            'email'
        ));
        // Initialize costumer
        $costumer = factory_from('Costumer', array(
            'status'
        ));

        // Start transaction
        $person->trans_begin();

        if ($person->save()
                && $costumer->save($person)) {
            // If we can save all data, commit!
            $person->trans_commit();

            // Dump new costumer id
            var_dump($costumer->id);
        } else {
            // Otherwise, rollback all!
            $person->trans_rollback();

            // Dump all errors
            var_dump(get_errors($person, $costumer));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T12:37:06.117

```
// Begin transaction
$p->trans_begin();

// Attempt to save person
$p->save();

// Check status of transaction
if ($p->trans_status() === FALSE)
{
// Transaction failed, rollback
$p->trans_rollback();

// Add error message
$u->error_message('transaction', 'The transaction failed to save (insert)');
}
else
{

//since the person has been saved, then we can now process the customer

// Begin transaction
$c->trans_begin();

// Attempt to save person
$c->save($p);

if( $c->trans_status === TRUE ){

 $p->commit(); 
 $c->commit();

}

}

/*
 * you can nest a lot of if statements depending on the number of objects you want to save
 * I followed whats exactly in the documentation for that. So give it a try, it should run.
 * dont forget to create $c and $p as datamapper objects.
 */ 
```

# prism-4 - 如何从 Xaml 创建 ModuleCatalog？

> ID：12550585
> 
> 赞同：0
> 
> 时间：2012-09-23T07:37:15.943
> 
> 标签：prism-4

我将 Unity 用于我的 IoC 容器，在我的引导程序中我有以下代码：

```
protected override IModuleCatalog CreateModuleCatalog()
{
  return Microsoft.Practices.Prism.Modularity.ModuleCatalog.CreateFromXaml(
    new Uri("modulecatalog.xaml", UriKind.Relative));
} 
```

我创建了一个名为“modulecatalog.xaml”的xml文件，其中包含：

```
<?xml version="1.0" encoding="utf-8" ?> 
<Modularity:ModuleCatalog
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:sys="clr-namespace:System;assembly=mscorlib"
  xmlns:Modularity="clr-namespace:Microsoft.Practices.Prism.Modularity;assembly=Microsoft.Practices.Prism">

</Modularity:ModuleCatalog> 
```

而且我已经在 xaml 中收到错误，说找不到 Microsoft.Practices.Prism.Modularity 并且找不到 Modularity:ModuleCatalog。

这非常令人沮丧。我的项目中包含 Microsoft.Practices.Prism。我的引导程序中的代码编译得很明显 Microsoft.Practices.Prism.Modularity.ModuleCatalog 确实存在。但更奇怪的是，如果我将 CreateModuleCatalog 函数更改为：

```
using Microsoft.Practices.Prism.Modularity;

...

protected override IModuleCatalog CreateModuleCatalog()
{
  return ModuleCatalog.CreateFromXaml(
    new Uri("modulecatalog.xaml", UriKind.Relative));
} 
```

它说在 ModuleCatalog 上不存在 CreateFromXaml。查找 ModuleCatalog 没有问题，但如果我不每次都输入完整的命名空间，该功能显然不存在。WTF正在进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T17:31:20.947

尝试像这样显式解析 ModuleCatalogtype ，它应该可以工作

```
protected override Microsoft.Practices.Prism.Modularity.IModuleCatalog CreateModuleCatalog()
{
   return Microsoft.Practices.Prism.Modularity.ModuleCatalog.CreateFromXaml( new Uri( "Modules.xaml", UriKind.Relative ) );
} 
```

未找到 Modularity:ModuleCatalog 的错误对我来说是相同的，但应用程序运行良好。

啊我差点忘了。将 modules.xaml 文件设置为资源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T15:01:33.667

我也为此苦苦挣扎。我最终通过以下方式解决了这个问题：

**设置：** 在您的外壳中，您应该定义您的区域：

```
<Window x:Class="Prism101.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:prism="http://www.codeplex.com/prism"
        Title="MainWindow" Height="350" Width="525">
    <Grid x:Name="LayoutRoot" Background="White">
        <ContentControl prism:RegionManager.RegionName="MainContent" />
    </Grid>
</Window> 
```

**第 1 步：添加对模块项目/程序集的引用。**

**第 2 步：在模块目录中声明一个模块：** 这将在您的模块项目中。

```
<Modularity:ModuleCatalog 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:Modularity="clr-namespace:Microsoft.Practices.Prism.Modularity;assembly=Microsoft.Practices.Prism.Composition">

    <Modularity:ModuleInfo 
         Ref="Prism101.Modules.Core.xap"
         ModuleName="CoreModule" 
         ModuleType="Prism101.Modules.Core.CoreModule, Prism101.Modules.Core, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"
     />

</Modularity:ModuleCatalog> 
```

**第 3 步：实现您的模块：** 注意框架将如何为您初始化 RegionManager 和 UnityContainer。另请注意，“WelcomeView”是一个用户控件，它被映射到客户端外壳的 maincontent 区域。

```
namespace Prism101.Modules.Core
{
    public class CoreModule : IModule
    {
        private readonly IUnityContainer container;
        private readonly IRegionManager regionManager;

        public CoreModule(IUnityContainer container, IRegionManager regionManager)
        {
            this.container = container;
            this.regionManager = regionManager;
        }

        public void Initialize()
        {
            var view = new WelcomeView();
            regionManager.AddToRegion("MainContent", view);
        }
    }
} 
```

**第 4 步：实现引导程序：** 在 CreateModuleCatalog 方法中，确定目录模块所在的程序集的名称以及它的目录路径。

```
class Bootstrapper : UnityBootstrapper
{
    protected override DependencyObject CreateShell()
    {
        var shell = new MainWindow();
        Application.Current.MainWindow = shell;

        return shell;
    }

    protected override IModuleCatalog CreateModuleCatalog()
    {
        var assemblyName = "Prism101.Modules.Core";
        var filePath = "ModuleCatalog.xaml";
        var uriPath = string.Format("/{0};component/{1}", assemblyName, filePath);

        var uri = new Uri(uriPath, UriKind.Relative);
        var moduleCatalog = Microsoft.Practices.Prism.Modularity.ModuleCatalog.CreateFromXaml(uri);

        return moduleCatalog;
    }

    protected override void InitializeShell()
    {
        base.InitializeShell();
        App.Current.MainWindow.Show();
    }
} 
```

**结论：** 在查看了这些步骤之后，应该能够运行应用程序并观察引导 prism 应用程序并加载模块的结果。

**注意：** 请随时就我如何更好地表达这一点提供反馈。

# javascript - 如果启用 Java 而没有重复内容，则显示隐藏的 Javascript Div

> ID：12550586
> 
> 赞同：1
> 
> 时间：2012-09-23T07:37:46.653
> 
> 标签：javascript, html, cross-browser, hidden

简而言之，我正在尝试使用带有 Javascript 功能的 HREF 菜单来显示 DIV。但是，我担心的是，虽然我可以有两个单独的 DIV，一个启用 Javascript，一个启用没有 JAvascript，但我不想在我的页面上复制原始内容（因为蜘蛛会索引 Display: none html）

我不熟悉javascript的功能和最佳实践。我的直觉是在存在 javascript 时用字符串替换特定 id 样式标签的 DIV。

即，如果启用了 javascript，则将样式标签的文本替换为 display=none 的逻辑（对于特定 ID）

另外 - 有没有一种方法可以使 javascript 变得不特定。例如，如果我有 contentid1,contentid2,contentid3,contentid4,contentid5,contentid6 我可以使用，通过正则表达式或 contentid 2-6 的等价物

我将在 contentids 发生变化的多个页面上使用它。我不知道我是否应该创建一个 javascript 条件样式，因为我不确定该样式将如何应用于多个 ID（见此处） [仅在 Javascript 可用时隐藏 html](https://stackoverflow.com/questions/5258215/hide-html-only-when-javascript-is-available)

这是我当前的代码

```
 <script type="text/javascript">
function showHide(d)
{
var onediv = document.getElementById(d);
var divs=['content1','content2','content3','content4'];
for (var i=0;i<divs.length;i++)
  {
  if (onediv != document.getElementById(divs[i]))
    {
    document.getElementById(divs[i]).style.display='none';
    }
  }
onediv.style.display = 'block';
}
</script> 
```

那么这是我的菜单

```
<ul>
    <li><a href="javascript:showHide('content1');">link1</a></li>
    <li><a href="javascript:showHide('content2');">link2</a></li>
    <li><a href="javascript:showHide('content3');">link3</a></li>
    <li><a href="javascript:showHide('content4');">link4</a></li>
</ul> 
```

然后这是我的内容（注意，我让 content1 div 默认可见

```
<div id="content1" >Content</div>
<div id="content2" style="display: none;">Stuff</div>
<div id="content3" style="display: none;">Things</div>` 
```

如果可能的话，我想避免闪烁，并尽可能地刷新页面。就像可能有一个条件，以便 content2+ 将内联样式更改为隐藏。如果没有 javascript，我的 paeg 就会变得非常非常长。?

对不起-漫无边际。累了，得了肺炎：）

# android - 为跨平台 OpenGL ES 2.0+ 引擎选择语言和设计 - iOS 和 Android

> ID：12550587
> 
> 赞同：2
> 
> 时间：2012-09-23T07:38:18.170
> 
> 标签：android, c++, ios, c, opengl-es

我开始在`OpenGL ES 2.0+`和`EGL`for中编写一些东西`Android`，现在为了实现跨多个设备的最大兼容性，我想问：

*   我应该选择什么语言，`C`或者`C++`？（这个问题是基于我不太`Xcode`清楚，我不知道它与`C`or有多好`C++`）
*   Android 下的原生​​应用必须使用 EGL，但 iOS 或其他平台呢？
*   有哪些`OpenGL ES 2.0`功能不被视为该配置文件的核心部分？我的意思是我可以有一些功能，`OpenGL ES 2.0`因为`Android`这些功能对可移植性有风险，`iOS`例如不能工作？
*   `iOS`我可以为有`C`或`C++`没有包装器或第三方库编写一个完整的应用程序吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:00:52.557

Apple 的编译器支持：和`C++`，尽管它们的关系主要是为 设计的，但您仍然可以使用或，它们完全支持和。如果您想使用 iOS 作为您的主要平台（这作为一个商业决策最有意义），那么可以获取 android编译器的插件来执行.`C``objective C``API's``Obj C``C++``C``OpenGL ES 2.0``iOS``Android``NDK``objective c`

话虽这么说，我会使用，因为您不仅会与和，而且会与等等`C++`交叉兼容。在我看来是一个很棒的界面构建器，在最新版本中它没有任何错误（根本没有崩溃），它也是一个测试你的应用程序的好平台。我不是 android 专家（不认为它值得开发，除非我玩的是愤怒的小鸟那种游戏）但我知道它有好处（如果我错了，请纠正我，标准是这样做的），所以您必须使用才能获得功能。做一些你自己的研究，因为你所追求的所有信息都不难通过快速的谷歌搜索得到。`Android``iOS``MAC OS, Linux, Windows, BSD, BeOS, Haiku``Xcode``IDE``Java``SDK``NDK``C++/C`

# java - 在服务中访问 GPS？安卓/Java

> ID：12550592
> 
> 赞同：0
> 
> 时间：2012-09-23T07:40:25.190
> 
> 标签：java, android, gps

我正在尝试运行一个后台服务，该服务将提取最新的 GPS 坐标，然后通过 PHP 脚本将它们发布到服务器。

我有这个工作，因为它将信息发布到服务器，并且它将在后台（作为服务）这样做。

在下面的代码段中，它始终为 false（location == null）。

我是 Java 编程的新手，我认为我做的不正确。我是否应该在有 GPS 更新时更新一个变量，然后从我的后台服务中读取它？

我是否应该将 GPS 功能与这个服务类分开，并在需要数据时调用它？还是我应该使用 AsyncTask ？

抱歉，如果问题很无聊，与 PHP 相比，Java 相当复杂。

谢谢你。

```
 Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    String Long = null;
    String Lat = null;

    if (location != null) {
    Long =  String.format("%1$s",location.getLongitude());
    Lat = String.format("%1$s", location.getLatitude());
     } 
     else{
     Long = "error";
     Lat = "error";

     } 
```

下面是完整的代码。

```
 public class UpdaterService extends Service {
      private static final String TAG = UpdaterService.class.getSimpleName();
      private Updater updater;

      private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
      private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds
      protected LocationManager locationManager;

      @Override
      public IBinder onBind(Intent intent) {
        return null;
      }

      @Override
      public void onCreate() {
        super.onCreate();
        updater = new Updater();

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, 
                new MyLocationListener()
                );

        Log.d(TAG, "onCreate'd");

      }

        private class MyLocationListener implements LocationListener {

            public void onLocationChanged(Location location) {
            }

            public void onStatusChanged(String s, int i, Bundle b) {
            }

            public void onProviderDisabled(String s) {
            }

            public void onProviderEnabled(String s) {
            }

        }

    @Override
      public synchronized void onStart(Intent intent, int startId) {
          // Start the updater
        if (!updater.isRunning()) {
          updater.start();
        }

        Log.d(TAG, "onStart'd");
      }

      @Override
      public synchronized void onDestroy() {
        super.onDestroy();
        // Stop the updater
        if (updater.isRunning()) {
          updater.interrupt();
        }
        updater = null;
        Log.d(TAG, "onDestroy'd");
      }

      // ///// Updater Thread
      class Updater extends Thread {
        private static final long DELAY = 10000; // one minute
        private boolean isRunning = false;

        public Updater() {
          super("Updater");
        }

        @Override
        public void run() {
          isRunning = true;
          while (isRunning) {
            try {

              Log.d(TAG, "Updater run'ing");
              HttpClient httpclient = new DefaultHttpClient();
              HttpPost httppost = new HttpPost("http://www.mydomain.com/save.php");

              try {
                // Add your data
                  Log.d(TAG, "Working..");

                  Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

                 String Long = null;
                 String Lat = null;

                  if (location != null) {
                     Long =  String.format("%1$s",location.getLongitude());
                     Lat = String.format("%1$s", location.getLatitude());
                  } 
                  else{
                    Long = "error";
                    Lat = "error";

                  }

                 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(3);
                  nameValuePairs.add(new BasicNameValuePair("lid", "1"));
                  nameValuePairs.add(new BasicNameValuePair("lat",Lat));
                  nameValuePairs.add(new BasicNameValuePair("long", Long));
                  httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                  // Execute HTTP Post Request
                  HttpResponse response = httpclient.execute(httppost);

              } catch (ClientProtocolException e) {
                  // TODO Auto-generated catch block
              } catch (IOException e) {
                  // TODO Auto-generated catch block
              }

              // Sleep
              Thread.sleep(DELAY);
            } catch (InterruptedException e) {
              // Interrupted
              isRunning = false;
            }
          } // while
        }

        public boolean isRunning() {
          return this.isRunning;
        }

      }

    } 
```

以下是主要活动：

```
 public class Main extends Activity {
              /** Called when the activity is first created. */
          @Override
          public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
          }

          @Override
          protected void onStop() {
            super.onStop();

          }

          // /////// Menu Stuff

          @Override
          public boolean onCreateOptionsMenu(Menu menu) {
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
          }

          @Override
          public boolean onOptionsItemSelected(MenuItem item) {

            switch (item.getItemId()) {
            case R.id.itemPrefs:
           //     startService(new Intent(this, UpdaterService.class));
             break;
            case R.id.itemServiceStart:
              startService(new Intent(this, UpdaterService.class));
              break;
            case R.id.itemServiceStop:
              stopService(new Intent(this, UpdaterService.class));
              break;
            }

            return true;
          }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T11:09:32.630

> 在下面的代码段中，它始终为 false `(location == null)`。

如果您在模拟器上运行代码，则需要手动将 GPS 数据提供给模拟器（从 Eclipse 中的 DDMS 角度）。

> 我是 Java 编程的新手，我认为我做的不正确。我是否应该在有 GPS 更新时更新一个变量，然后从我的后台服务中读取它？

是的，你可以这么做。我之前做过类似的事情，并且有效。

> 我是否应该将 GPS 功能与这个服务类分开，并在需要数据时调用它？还是我应该使用 AsyncTask？

没有！但是，如果您执行以下操作，那将是一个好主意：

```
public class UpdaterService extends Service implements LocationListener{
} 
```

至于菜鸟式的部分。没有问题是愚蠢的，我们都是菜鸟或其他方式。希望这可以帮助。

# sql - SQL Server CE：如果存在更新，否则插入

> ID：12550594
> 
> 赞同：7
> 
> 时间：2012-09-23T07:40:35.730
> 
> 标签：sql, sql-server-ce

`INSERT`如果 SQL Server CE 数据库表中尚不存在行并且如果存在，我该如何处理`UPDATE`？

我已经尝试了很多 SQL 查询并不断收到错误。这是行不通的。

```
IF EXISTS (SELECT * FROM Table1 WHERE Column1='SomeValue')
    UPDATE Table1 SET (...) WHERE Column1='SomeValue'
ELSE
    INSERT INTO Table1 VALUES (...) 
```

**更新**：

我发现这对我有用。欢迎任何其他好的建议。

```
 INSERT INTO Table1 VALUES (...)
    SELECT (........)
    WHERE NOT Exists (SELECT ........)
    -- INSERT with Default value if not exist. Next, UPDATE it
    UPDATE Table1 SET (...) WHERE Column1='SomeValue' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:07:47.133

我知道你已经标记了 sql 和 sql-server-ce 但如果你愿意使用 c# 代码来解决这个问题..：

使用 c# 和结果集，这是我使用 SQL CE 为我的移动应用程序所做的：

```
 // UpdateRow is a struct/class to hold the data for each row
            // SqlCeConn = connection string for db

            SqlCeCommand cmd = new SqlCeCommand("Table1", SqlCeConn);
            cmd.CommandType = CommandType.TableDirect;
            cmd.IndexName = "Column1";

            using (SqlCeResultSet rsltSet = cmd.ExecuteResultSet(ResultSetOptions.Scrollable | ResultSetOptions.Updatable))
            {
                if (UpdateRow.Column1> 0) // or != "" if it's string etc 
                {
                    if (rsltSet.Seek(DbSeekOptions.FirstEqual, UpdateRow.Column1))
                        FoundRecord = true;
                }
                rsltSet.Read();

                if (FoundRecord)
                {
                    // Update
                    rsltSet.SetInt32(1, UpdateRow.Column1);
                    rsltSet.SetInt32(2, UpdateRow.Column2);

                    // etc

                    rsltSet.Update();
                }
                else
                {
                    // Insert new record
                    SqlCeUpdatableRecord record = rsltSet.CreateRecord();
                    record.SetInt32(0, UpdateRow.Column1);
                    record.SetInt32(1, UpdateRow.Column2);

                    // etc
                    rsltSet.Insert(record, DbInsertOptions.PositionOnInsertedRow);
                }
            }
            cmd.Dispose();
        }
        catch (Exception e)
        {
            // Deal with exception

        } 
```

# java - Android/Java Implements Runnable 进入无限循环

> ID：12550596
> 
> 赞同：0
> 
> 时间：2012-09-23T07:40:47.013
> 
> 标签：java, android, multithreading, android-intent

我正在使用以下代码连接两个 Android 设备 P2P。问题是，当服务器从客户端接收数据时，它的 Thread/Runnable 不会停止。

请建议我一种方法来停止/强制它进入无限循环。

以下是我用于服务器活动的一段代码：

```
 public class ServerThread implements Runnable {
            private volatile boolean keepGoing = true;

               public void requestStop() {
                   keepGoing = false;
                }
               public void run() {
                   try {
                       if (SERVERIP != null) {
                           handler.post(new Runnable() {
                               @Override
                               public void run() {
                      serverStatus.setText("Listening on IP: " + SERVERIP);
                    }
                });
                serverSocket = new ServerSocket(SERVERPORT);
                while (true) {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Connected.");
                        }
                    });

                    try {
                        BufferedReader in = new BufferedReader(new            
                             InputStreamReader(client.getInputStream()));
                        line = null;
                        while ((line = in.readLine()) != null) {
                            Log.d("ServerActivity", line);
                            handler.post(new Runnable() {
                                @Override
                                public void run() {

                                    serverStatus.setText(line);

                                    Log.d("IP recevied", line);
                                    requestStop();
                                    //finish();

                                    //Intent i = new Intent(ServerActivity.this, 
                                        //ClientActivity.class);
                                    //startActivity(i);
                                    //serverStatus.setText(line);
                                    // do whatever you want to the front end
                                    // this is where you can be creative
                                }
                            });
                        }

                        break;
                    } catch (Exception e) {
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Oops. Connection interrupted. 
                                        Please reconnect your phones.");
                            }
                        });
                        e.printStackTrace();
                    }
                }
            } else {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Couldn't detect internet connection.");
                    }
                });
                       }
                              } catch (Exception e) {
                                  handler.post(new Runnable() {
                                     @Override
                           public void run() {
                    serverStatus.setText("Error");
                           }
                       });
                       e.printStackTrace();
                   }
               }
           } 
```

编辑：

```
 while (keepGoing) {
         // listen for incoming clients
         Socket client = serverSocket.accept();
         handler.post(new Runnable() {
             @Override
             public void run() {
                 serverStatus.setText("Connected.");
             }
         });

         try {
             BufferedReader in = new BufferedReader(new            
                  InputStreamReader(client.getInputStream()));
             line = null;
             while (((line = in.readLine()) != null) && keepGoing) {
                 Log.d("ServerActivity", line);
                 handler.post(new Runnable() {
                     @Override
                     public void run() {

                         serverStatus.setText(line);

                         Log.d("IP recevied", line);
                         requestStop();
                         //finish();

                         //Intent i = new Intent(ServerActivity.this, 
                             //ClientActivity.class);
                         //startActivity(i);
                         //serverStatus.setText(line);
                         // do whatever you want to the front end
                         // this is where you can be creative
                     }
                 });
             } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:37:12.993

我认为问题在于，即使您向服务器发出停止信号，它仍然停留在对 的调用中`serverSocket.accept();`，等待其他客户端连接。您应该做的也是在 stop 方法中关闭套接字：

```
public void requestStop() {
      keepGoing = false;
      serverSocket.close();
} 
```

强制代码抛出一个`IOException`然后重新检查`while`条件并退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T07:51:18.970

你为什么评论这条线

```
 //finish(); 
```

一旦建立连接？

由于一旦连接就永远不会完成，因此您有一个无限循环

# python - 为什么我的 python 多进程代码运行很慢？

> ID：12550601
> 
> 赞同：2
> 
> 时间：2012-09-23T07:41:48.923
> 
> 标签：python, python-2.7

```
# multi-processes
from multiprocessing import Process, Queue
class Worker(object):
    def __init__(self, queue):
        self.queue = queue
        self.process_num = 10 <------------ 10 processes
        self.count = 0

    def start(self):
        for i in range(self.process_num):
            p = Process(target = self.run)
            p.start()
            p.join()

    def run(self):
        while True:
            self.count += 1
            user = self.queue.get()
            # do something not so fast like time.sleep(1)
            print self.count
            if self.queue.empty():
                break 
```

我使用**Worker().start(queue)**启动程序，但输出没有我预期的那么快（似乎只有一个进程在运行）。

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T07:51:05.427

是的，您一次只运行一个进程，您正在等待每个进程终止，然后再开始下一个进程；

```
def start(self):
    for i in range(self.process_num):
        p = Process(target = self.run)
        p.start()                       <-- starts a new process
        p.join()                        <-- waits for the process to terminate 
```

换句话说，您正在启动 10 个进程，但在第一个进程终止之前，第二个进程不会启动，依此类推。

对于您要执行的操作，最好不要`Process`手动使用，而是使用[Process Pool](http://docs.python.org/dev/library/multiprocessing.html#module-multiprocessing.pool)。

# ruby - 如何使用 rvmsudo 运行厨师命令（使用 rvm 安装乘客）

> ID：12550603
> 
> 赞同：2
> 
> 时间：2012-09-23T07:42:07.303
> 
> 标签：ruby, rvm, chef-infra, vagrant

我正在将 Chef 与 Vagrant 一起使用，并希望使用 RVM 构建一个 rails 堆栈。

到目前为止，这是我的 Vagrantfile 配置的片段：

```
...
config.vm.provision :chef_solo do |chef|
  chef.cookbooks_path = "cookbooks"

  chef.add_recipe "apt"
  chef.add_recipe "build-essential"
  chef.add_recipe "ntp"
  chef.add_recipe "openssl"
  chef.add_recipe "apache2"
  chef.add_recipe "mysql"
  chef.add_recipe "mysql::server"
  chef.add_recipe "redis"
  chef.add_recipe "git"
  chef.add_recipe "rvm::system"
  chef.add_recipe "rvm::gem_package"
  chef.add_recipe "passenger_apache2"

  chef.json = { 
    :mysql => { 
      :server_root_password => 'root',
      :bind_address => '127.0.0.1'
    },
    :redis => {
      :daemonize => 'yes',
      :port => '6379'
    },
    :rvm => {
      :rubies => 'ruby-1.9.3-p194',
      :global_gems => [
        {:name => 'bundler'},
        {:name => 'rake'},
        {:name => 'passenger',
         :version => '3.0.17'
        }
      ]
    },
    :passenger => {
      :version => '3.0.17'
    }
  }
end 
```

启动 vagrant，配置工作，直到它尝试安装乘客，然后我得到这个错误：

```
...
ERROR: gem_package[passenger] (passenger_apache2::default line 48) has had an error
ERROR: gem_package[passenger] (/tmp/vagrant-chef-1/chef-solo-1/cookbooks/passenger_apache2/recipes/default.rb:48:in `from_file') had an error:
gem_package[passenger] (passenger_apache2::default line 48) had an error: NoMethodError: undefined method `join' for nil:NilClass
... 
```

sshing 进入 vagrant，我可以看到 RVM 和 gems 安装得很好：

```
vagrant@lucid32:~$ rvm list

rvm rubies

=* ruby-1.9.3-p194 [ i686 ]

# => - current
# =* - current && default
#  * - default

vagrant@lucid32:~$ gem list

*** LOCAL GEMS ***

bundler (1.2.1)
daemon_controller (1.0.0)
fastthread (1.0.7)
passenger (3.0.17)
rack (1.4.1)
rake (0.9.2.2)
rubygems-bundler (1.1.0)
rvm (1.11.3.5) 
```

手动运行`rvmsudo passenger-install-apache2-module`效果很好

所以我很确定问题是厨师在没有加载 rvm 的情况下运行它的命令

这里是 cookbooks/passenger_apache2/recipes/default.rb 的命令：第 48-55 行

```
...
gem_package "passenger" do
  version node[:passenger][:version]
end

execute "passenger_module" do
  command 'passenger-install-apache2-module --auto'
  creates node[:passenger][:module_path]
end 
```

我用于 RVM 和 passaenger_apache 的食谱是：

*   [https://github.com/fnichol/chef-rvm](https://github.com/fnichol/chef-rvm)
*   [https://github.com/opscode-cookbooks/passenger_apache2](https://github.com/opscode-cookbooks/passenger_apache2)

我尝试用`passenger-install-apache2-module --auto`没有`rvmsudo passenger-install-apache2-module --auto`运气的替换...

**有人知道如何让 rvm 和 rvmsudo 在厨师中工作吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T11:57:04.087

我相信您认为 Chef 正在执行未加载 rvm 的命令是正确的。也许您可以使用[`rvm_shell`](https://github.com/fnichol/chef-rvm#-rvm_shell)chef-rvm 中的命令来安装乘客。像这样的东西可能会起作用：

```
rvm_shell "passenger_module" do
  ruby_string "ruby-1.9.3-p194"
  code        "passenger-install-apache2-module --auto"
  creates node[:passenger][:module_path]
end 
```

# jquery - 如何滑动谷歌地图？

> ID：12550604
> 
> 赞同：0
> 
> 时间：2012-09-23T07:42:14.067
> 
> 标签：jquery, ajax, google-maps, google-maps-api-3, webmatrix

我在这里解决了我的问题

[我需要getJson吗？](https://stackoverflow.com/questions/12550464/do-i-need-getjson-at-all/12550543#12550543)

每次单击我作为超链接创建的地名时，都会重新加载地图。但是，我不喜欢这种重新加载的效果，我希望地图可以*移动*，就像我慢慢拖动鼠标查看不同的地方时的样子。也就是说，如果我在浏览器客户端上单击某个地点的链接（我将其定位为显示在 中的表格数据`<table>`），地图将*滑动*以显示新地点，而不是重新加载整个区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:09:33.657

不确定我是否正确理解了您的问题，但是，如果您没有重新加载页面（在这种情况下您无法实现此效果），您应该使用该`panTo()`方法而不是`setCenter()`实现平滑滑动效果。

# iphone - 在 iPhone 上的 Facebook 上安排发布

> ID：12550606
> 
> 赞同：1
> 
> 时间：2012-09-23T07:42:51.773
> 
> 标签：iphone, ios, facebook, facebook-graph-api

在我的应用程序中，我想在 Facebook 上发帖以备后用。我知道如何在 Facebook 墙上发帖，但是如果到了指定的时间，是否有任何方法可以自动安排在 Facebook 上发帖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:29:32.733

我认为**没有**没有办法这样做，因为当你`POST`或`GET`在 facebook 上你需要一个有效`access token`的附加`URL`字符串时，`access token`它会生成很多次，因为它有过期日期。一段时间后，它会过期，你需要`access token`一次`POST`又一次`GET`。因此，在您的情况下`access token`将过期，并且您`POST`肯定会收到错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:33:25.087

据我所知，您可以使用**NSTimer**类。我觉得没有别的办法

您可以使用它的实例方法或类方法来做到这一点。

请从[这里参考详细信息](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

例子：

**initWithFireDate:interval:target:selector:userInfo:repeats:**

**集火日期：**

**scheduleTimerWithTimeInterval:invocation:repeats:**

**scheduleTimerWithTimeInterval:target:selector:userInfo:repeats:**

# java - 通过 Hibernate 框架学习数据访问对象的好资源

> ID：12550609
> 
> 赞同：0
> 
> 时间：2012-09-23T07:43:04.677
> 
> 标签：java, hibernate, dao

请列出一些好的资源，我可以在其中详细了解 Java 中的数据访问对象及其使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:45:02.857

访问[http://techtracer.com/2008/12/30/the-great-hibernate-tutorial-a-great-jump-start-for-beginners/](http://techtracer.com/2008/12/30/the-great-hibernate-tutorial-a-great-jump-start-for-beginners/)了解基本知识。

一旦您了解了基础知识，Google 就会一直在前进（阅读 DAO 和 Hibernate 的官方文档）！:)

# c# - 根据用户选择填充列表框

> ID：12550612
> 
> 赞同：-1
> 
> 时间：2012-09-23T07:43:22.663
> 
> 标签：c#, xml

1.  我正在使用 C# 来执行此操作。
2.  好的，这就是我的 XML 文件的样子……只有更多的 AUCCars 节点。

    ```
    <Recordset>
    <AUCCars>
        <Web_Series>5 Series</Web_Series>
            <Body_Desc>Sedan</Body_Desc>
            <Model_Type>550i (E60)</Model_Type>
            <Model_Year>2006</Model_Year>
            <Ext_Colour>Alpine White III - Non-Metallic</Ext_Colour>
            <Int_Colour>Leather Dakota Black - Dakota Leather</Int_Colour>
            <Price>R 579000</Price>
            <Search_Price>579000</Search_Price>
            <Province>Gauteng</Province>
            <AucID>106288</AucID>
            <DealerID>45</DealerID>
            <DealerCode>29968</DealerCode>
            <DealerName>Lyndhurst Auto</DealerName>
            <Transmission>Automatic</Transmission>
            <AirCon>n/a</AirCon>
            <Radio>Yes</Radio>
            <PSteering>Yes</PSteering>
            <ABS>Yes</ABS>
            <Airbag>Yes</Airbag>
            <Sunroof>Yes</Sunroof>
            <Km>11500</Km>
            <Motorplan>Yes</Motorplan>
            <Warranty>N</Warranty>
            <BodyNo>6CR76051</BodyNo>
            <ModelOEM>NB52</ModelOEM>
            <ColourOEM>300</ColourOEM>
            <TrimOEM>LCSW</TrimOEM>
            <WheelsOEM></WheelsOEM>
            <Sold>N</Sold>
            <Notes> </Notes>
            <Moreoptions>Automatic Transmission with Steptronic
                         Interior trim finishers, Fine-wood, Poplar Grain Brown, high-gloss
                         Park Distance Control (PDC),front and rear</Moreoptions>
            <Picture>\Vehicle_Pictures\E60\LI\frontview_big_P0300.jpg</Picture>
            <PictureRear>\Vehicle_Pictures\E60\LI\rearview_big_P0300.jpg</PictureRear>
            <Interior>\Vehicle_Pictures\E60\LI\Interior\big_Fo_LCSW.jpg</Interior>
    </AUCCars>
    <AUCCars>
            <Web_Series>5 Series</Web_Series>
            <Body_Desc>Sedan</Body_Desc>
            <Model_Type>550i (E60)</Model_Type>
            <Model_Year>2006</Model_Year>
            <Ext_Colour>Black Sapphire - Metallic</Ext_Colour>
            <Int_Colour>Amethyst Black Exclusive Leather - Exclusive Leather</Int_Colour>
            <Price>R 529990</Price>
            <Search_Price>529990</Search_Price>
            <Province>KwaZulu Natal</Province>
            <AucID>111922</AucID>
            <DealerID>17</DealerID>
            <DealerCode>2485</DealerCode>
            <DealerName>Supertech</DealerName>
            <Transmission>Automatic</Transmission>
            <AirCon> Yes</AirCon>
            <Radio>Yes</Radio>
            <PSteering>Yes</PSteering>
            <ABS>Yes</ABS>
            <Airbag>Yes</Airbag>
            <Sunroof>n/a</Sunroof>
            <Km>7000</Km>
            <Motorplan>n/a</Motorplan>
            <Warranty>N</Warranty>
            <BodyNo>6CR75567</BodyNo>
            <ModelOEM>NB52</ModelOEM>
            <ColourOEM>475</ColourOEM>
            <TrimOEM>LDRH</TrimOEM>
            <WheelsOEM></WheelsOEM>
            <Sold>N</Sold>
            <Notes> </Notes>
            <Moreoptions>Automatic Transmission with Steptronic
                         Electric Rear Screen Roller Sun Blind with manual Side Blinds
                         Interior trim finishers, Fine-wood, Poplar Grain Brown, high-gloss
                         High Beam Assist
                         Head-up display (not with SA354)</Moreoptions>
            <Picture>\Vehicle_Pictures\E60\LI\frontview_big_P0475.jpg</Picture>
            <PictureRear>\Vehicle_Pictures\E60\LI\rearview_big_P0475.jpg</PictureRear>
            <Interior>\Vehicle_Pictures\E60\LI\Interior\big_Fo_LDRH.jpg</Interior>  
    </AUCCars>
    <Recordset> 
    ```

3.  我需要填写系列、型号和年份的组合框。

4.  这我做对了。当我编译程序时，它将所有系列加载到系列中
5.  组合框。
6.  当我选择一个系列时，它会自动将所有模型加载到模型组合中
7.  盒子。当我选择一个模型时，它会自动加载相应的年份。

8.  现在我需要根据选择显示数据。

9.  例如。我为系列组合框选择了“5 系列”，为型号组合 11\. 框选择了“550i (E60)”，为年份组合框选择了“2006”。

10.  如何根据我的选择 13\. 在列表框中显示该特定节点中的所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:39:45.880

*我希望我做对了...*我创建了一个*小样本表格*。在组合框的**SelectedIndexChanged**上，我将**显示****过滤后的****aucCars**。ComboBoxes根据给定的详细信息*从 xml 文件*中获取数据*****`(Web_Series, Model_Type, Model_Year - distinct)`*****

 *****```
// get data from file
XElement aucCars = XElement.Load("data.xml");
private void cmbSeries_SelectedIndexChanged(object sender, EventArgs e)
{
    if (cmbSeries.SelectedItem != null)
    {
        string currentSeries = cmbSeries.SelectedItem.ToString();
        var models = (from a in aucCars.Elements()
                        where a.Element("Web_Series").Value == currentSeries
                        select a.Element("Model_Type").Value).Distinct().ToList();
        cmbModel.DataSource = models;
    }
    showAucCars();
}
private void cmbModel_SelectedIndexChanged(object sender, EventArgs e)
{
    if (cmbModel.SelectedItem != null)
    {
        string currentSeries = cmbSeries.SelectedItem.ToString();
        string currentModel = cmbModel.SelectedItem.ToString();

        var years = (from a in aucCars.Elements()
                        where a.Element("Web_Series").Value == currentSeries &&
                        a.Element("Model_Type").Value == currentModel
                        select a.Element("Model_Year").Value).Distinct().ToList();
        cmbYear.DataSource = years;
    }
    showAucCars();
}
private void cmbYear_SelectedIndexChanged(object sender, EventArgs e)
{
    showAucCars();
}
private void frmXmlLoad_Load(object sender, EventArgs e)
{            
    var series = (from a in aucCars.Elements()
                select a.Element("Web_Series").Value).Distinct().ToList();
    cmbSeries.DataSource = series;
}
private void showAucCars()
{
    var filterCars = aucCars.Elements();
    if (cmbSeries.SelectedItem!=null)
    {
        string currentSeries = cmbSeries.SelectedItem.ToString();
        filterCars = from a in filterCars
                        where a.Element("Web_Series").Value == currentSeries
                        select a;
    }
    if (cmbSeries.SelectedItem != null)
    {
        string currentModel = cmbModel.SelectedItem.ToString();
        filterCars = from a in filterCars
                        where a.Element("Model_Type").Value == currentModel
                        select a;
    }
    if (cmbSeries.SelectedItem != null)
    {
        string currentYear = cmbYear.SelectedItem.ToString();
        filterCars = from a in filterCars
                        where a.Element("Model_Year").Value == currentYear
                        select a;
    }
    // will show all the element data 
    // add a new linq stmt to select specific elements
    listBox1.DataSource = filterCars.ToList();            
} 
```

在`showAucCars()`我**根据组合框中的选择进行过滤**并在列表框中显示结果。如果您想在列表框中*显示特定元素*，请添加**新的 linq stmt 并选择相应的元素**。*****

# xcode - xcode - 有没有办法指示 xcode 在 C 项目中编译 intel 语法内联汇编？

> ID：12550613
> 
> 赞同：1
> 
> 时间：2012-09-23T07:43:42.297
> 
> 标签：xcode, inline-assembly

我已经下载了 Quake III Arena 源代码，制作了一个 Xcode 项目，现在构建失败，因为底层编译器（gcc？）在一个/几个 C 文件中遇到**Intel 语法**内联汇编。

假设编译器知道如何处理英特尔语法，如果适当的开关被传递给它，有没有办法指示 Xcode 将这种开关传递给底层编译器？

提前致谢！

# python - Python将两个列表写入2列txt文件，重新打开并添加数据，重写

> ID：12550614
> 
> 赞同：0
> 
> 时间：2012-09-23T07:43:47.210
> 
> 标签：python

我有两个几乎包含 100 个浮点数值的列表，我需要将它们的数据保存到一个包含两列的 txt 文件中。但是，我需要这个文件来重新打开它并添加额外的数据并保存它，在我的代码中至少 3 次......请如果有人有任何想法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-11T10:21:10.353

你可以试试这个想法：

首先，将两个列表写入一个两列文本文件。

```
a=[0.2342,2.0002,0.1901]
b=[0.4245,0.5123,6.1002] 
c = [a, b] 
with open("list1.txt", "w") as file:
    for x in zip(*c):
        file.write("{0}\t{1}\n".format(*x)) 
```

二、重新打开保存的文件`list1.txt`

```
with open("list1.txt", "r+") as file:
    d = file.readlines() 
```

三、添加额外数据

```
e=[1.2300,0.0002,2.0011]
f=[0.4000,1.1004,0.9802]
g = [e, f]
h = []
for i in d:
    h.append(i)
for x in zip(*g):
    h.append("{0}\t{1}\n".format(*x)) 
```

四、保存文本文件

```
with open("list2.txt", "w") as file1:
    for x in h:
        file1.writelines(x) 
```

文件中的输出`list2.txt`如下所示

```
0.2342  0.4245
2.0002  0.5123
0.1901  6.1002
1.23    0.4
0.0002  1.1004
2.0011  0.9802 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:14:23.453

这取决于您要如何分隔两列（使用空格、制表符或逗号）。以下是我如何以空格作为分隔符的快速“n”脏方式：

蟒蛇2：

```
with open('output.txt', 'w') as f:
    for f1, f2 in zip(A, B):
        print >> f, f1, f2 
```

蟒蛇 3：

```
with open('output.txt', 'w') as f:
    for f1, f2 in zip(A, B):
        print(f1, f2, file=f) 
```

# java - API 请求 datastore_v3.RunQuery() 出错

> ID：12550618
> 
> 赞同：0
> 
> 时间：2012-09-23T07:45:39.017
> 
> 标签：java, google-app-engine, objectify

如果出现此错误，我尝试寻找导致找到原因的原因，但我似乎找不到：

这是堆栈跟踪：

```
com.google.apphosting.api.ApiProxy$UnknownException: An error occurred for the API request datastore_v3.RunQuery().
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:518)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:452)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.call(ApiProxyLocalImpl.java:430)
    at java.util.concurrent.Executors$PrivilegedCallable$1.run(Executors.java:493)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.concurrent.Executors$PrivilegedCallable.call(Executors.java:490)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoSuchMethodError: com.google.apphosting.api.DatastorePb$Query.propertyNameSize()I
    at com.google.appengine.api.datastore.dev.LocalDatastoreService.runQuery(LocalDatastoreService.java:1053)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$AsyncApiCall.callInternal(ApiProxyLocalImpl.java:498) 
```

尝试保留已`Objectify`注册的`@Entity`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T08:36:36.503

NoSuchMethodError 几乎始终是代码针对一个 jar 版本编译但随后针对不同的 jar 版本运行的结果。也许您有旧版本的 GAE SDK？

# python - NumPy：使用切片索引与列表分配给矩阵

> ID：12550620
> 
> 赞同：0
> 
> 时间：2012-09-23T07:46:28.503
> 
> 标签：python, numpy, scipy, slice

鉴于以下代码，我希望最后两行的行为相同，但事实并非如此。

```
import numpy as np

C = np.matrix(np.zeros((4,4)))
C[0, 0:2] = np.matrix([[1, 2]]) # Works as expected.
C[0, [0,1]] = np.matrix([[1, 2]]) # Throws an "array is not broadcastable to correct shape" error. 
```

相反，当使用 an 时`ndarray`，事情会按预期工作（将分配的右侧调整为一维`ndarray`）：

```
D = np.zeros((4,4))
D[0, 0:2] = np.array([1, 2]) # Works as expected.
D[0, [0,1]] = np.array([1, 2]) # Works too. 
```

更奇怪的是，如果一个人只是索引矩阵`C`（而不是分配给它），似乎使用切片索引或列表只是返回相同的：

```
C[0, 0:2] # => matrix([[ 1.,  2.]])
C[0, [0, 1]] # => matrix([[ 1.,  2.]]) 
```

问题是，为什么这两种分配方法的行为不同？我错过了什么？

（编辑：错字）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:02:24.493

它似乎是 numpy 中的一个错误：[http](http://projects.scipy.org/numpy/ticket/803) ://projects.scipy.org/numpy/ticket/803 。解决方案是分配一个普通的列表或 numpy 数组，而不是为选定的元素分配一个矩阵。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-23T09:00:48.457

*编辑：*必须意识到，虽然我写的是真实的，但`D[0,0:2] = ...`与（因此对于数组）不同的事实`D[0,[0,1]] = ...`可能是真正的不一致（并且相关）。

据我所知，也许这是为什么会发生这种情况的解释。检查这个：

```
D[0,[0,1]] = np.array([[1,2]]) 
```

给出同样的错误。问题是在内部切片操作发生在矩阵形状再次“固定”为 2D 之前，这是因为`matrix`每当创建新视图时都会出现子类，但这里*没有*创建视图，因为它通常是不必要的！

这意味着当您像这样设置元素时，它的行为总是如下：

```
C.A[0,[0,1]] = matrix([[1,2]])  # Note the C.A giving normal array view of C. 
```

失败了，因为矩阵是二维的，但是`C.A[0,[0,1]]`是一维的（因为它没有被矩阵对象“固定”为至少是二维的），在这种情况下，可以说因为它只是从右手移除了一维轴侧 numpy 可能会容忍它，但只要它不容忍它，它就需要矩阵对象制作完整的自定义集合/分配运算符，这可能也不是很优雅。

但也许使用`C.A`等可以帮助解决这个不便。然而，一般来说，在 numpy 中最好始终使用基类数组，除非您正在进行大量矩阵乘法等（在这种情况下，如果它仅限于程序的一部分，最好只查看您的数组在它之前作为矩阵，但在其余部分使用数组）

# asp.net - 水晶报表，ReportDocument.printtoprinter() 未在实时代码中执行

> ID：12550622
> 
> 赞同：1
> 
> 时间：2012-09-23T07:47:07.177
> 
> 标签：asp.net, crystal-reports, visual-studio-2005, c#-2.0

我正在开发一个 Web 应用程序，其中水晶报表用于报告。

**开发环境：** MS Visual Studio 2005 (ASP.NET, C#.NET 和 Crystal Reports)

我正在使用以下代码行

```
ReportDocument objRd=new ReportDocument();
objRd.Load("SomeReport.rpt");
objRd.SetParameterValue(0,"Value");
objRd.PrintOptions.PrinterName="The Printer Connected";
objRd.PrintToPrinter(1,false,0,0);
objRd.Close(); 
```

代码在调试模式下工作正常，打印机被调用，我可以在纸上打印。

执行**objRd.PrintToPrinter(1,false,0,0)**行后代码**处于 Live（IIS 中托管）状态时；**没有进一步的过程正在进行（为了检查这一点，我去了 Visual Studio IDE 中的“调试 - >附加到进程”并附加了浏览器，这样当我通过 URL 访问托管网站时，我可以返回 IDE 并继续调试）。

 **系统本身没有挂起或应用程序。

我可以将 ReportDocument 重定向到 Crystal Report Viewer 并可以将其转换为 PDF、DOC 等，但我需要将输出直接打印到打印机。

请帮助我解决问题。

提前致谢

**编辑**

现在我真的感觉很糟糕，因为 stackoverflow 无法在一周内解决我的问题（？？？？）。

最近我尝试了我朋友建议的一种方法，即对托管文件夹进行完全访问控制。问题仍然存在:(。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:34:39.380

您需要将水晶报表 javascript 放入 live code iis 文件夹中。我现在不确定提取 javascript 的位置。但在 C 盘中搜索水晶报告 JavaScript 文件。没有此文件，您将无法访问水晶报表的任何内置功能**

# wpf - 我可以在 C# 的派生类中将公共成员从父类更改为私有吗？

> ID：12550626
> 
> 赞同：0
> 
> 时间：2012-09-23T07:49:37.900
> 
> 标签：wpf, wpf-controls

我有一个从 Border 派生的 DraggableBorder 类，但我想将 Border.Child 设为私有。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T07:50:57.717

你不能。这将打破[Liskov 的替代原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)。如果`DraggableBorder`派生自`Border`，我希望能够像使用它一样使用它`Border`。

毕竟，总有人可以写：

```
Border border = new DraggableBorder();
border.Child = ...; 
```

您希望编译器如何阻止它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:39:29.113

您可以通过定义一个新的私有成员来隐藏原来的 Child

```
public class DraggableBorder : Border
{
    private new object Child {get;set;}
} 
```

这样编译器会阻止您访问原始子属性

```
DraggableBorder myBorder = ...;
myBorder.Child ; // this will result in a compiler error 
```

但这并不是真正的保护，因为您可以轻松解决它

```
((Border)myBorder).Child; // this will be ok
Border myBaseBorder = myBorder;
myBaseBorder.Child; // this will be ok 
```

# c# - 有人可以帮我将这个用 C# 编写的正则表达式转换为 javascript 吗？

> ID：12550633
> 
> 赞同：0
> 
> 时间：2012-09-23T07:51:18.000
> 
> 标签：c#, javascript, html, regex, client-side

我必须对文本框中的文本进行一些模式匹配。我在 C# 服务器的回发事件中这样做。我的正则表达式如下：

```
 public bool ValidatePassword(string temp)
    {
        bool isMatch = false;
        passwd = passwd.Trim();

        isMatch = Regex.IsMatch(temp,
                             @"^           # Start of string
                        (?=.*\p{Lu})      # Assert at least one uppercase letter
                        (?=.*\p{Ll})      # Assert at least one lowercase letter
                        (?=.*\d)          # Assert at least one digit
                        (?=.*[^\p{L}\d])  # Assert at least one other character
                        .{8,13}           # Match at least 8 characters and maximum of 13 characters
                        $                 # End of string",
                             RegexOptions.IgnorePatternWhitespace);

        return isMatch;
    } 
```

我想将其移至 Javascript，以便在客户端进行匹配。有人可以帮我将此功能移至 Javascript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T07:54:54.097

就像是：

```
function ValidatePassword(temp) {
  return /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d)(?=.*[^a-zA-Z\d]).{8,13}$/.test(temp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:06:24.880

JavaScript 正则表达式实现只理解拉丁字符的大小写，它不实现国家字符语义，所以，不幸的是，没有办法翻译这个正则表达式，甚至在任何接近原点的地方都没有......

如果您将此作为学习练习，那么，也许您可​​以看一下正则表达式的 Perl 实现并拥有一份副本。但是，如果您的问题更多地涉及实际领域，那么请考虑您的目标受众以及他们可能输入的语言，查找其字符集中的小写/大写字母的 Unicode 代码点并采取相应的行动。另请注意，许多非拉丁语言没有字母大小写的概念。

或者，也许，考虑更严格的密码规则。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T10:00:53.903

在 Javascript 中匹配大小写字母并不容易，因为它不支持`\p{…}`字符类。我建议您在正则表达式之外进行测试。另外，“其他字符”很难定义，是只是`[^a-z0-9]`，还是没有变音符号等？顺便说一句，您宁愿强制使用更长的密码而不是更神秘的密码。

```
function validatePassword(temp) {
    // temp = temp.trim() - is not supported in all browsers or needs to be shimmed
    //                      will be done in the regex

    if (temp.toUpperCase() == temp) // no lowercase char
        return false;
    if (temp.toLowerCase() == temp) // no uppercase char
        return false;

    return temp.test(/^\s*(?=.*\d).{8,13}\s*$/);
} 
```

# javascript - 如何改进此 JavaScript 碰撞检测？

> ID：12550635
> 
> 赞同：2
> 
> 时间：2012-09-23T07:51:30.107
> 
> 标签：javascript, raphael, collision-detection, collision

我有一个测试应用程序，我正在使用 Raphael.js 在矩形之间创建碰撞检测。

我能够让碰撞检测正常工作，但我必须慢慢拖动它......当我移动鼠标太快时会出现问题。似乎刷新速度不够快，无法检测到可拖动的矩形。

紫色方块是唯一拖拽的方块。

[JS小提琴](http://jsfiddle.net/VQHWm/3/)

我想我的问题是如何改进检测/解决我的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T12:07:51.980

由于`move`在每个像素移动时都会被调用，因此您没有时间在计算方式上做很多事情来保持它的平滑。首先，我用更标准的函数替换了用于确定重叠的函数：

```
var rect_collision = function (x1, y1, size1, x2, y2, size2) {
  var a = {top: y1, bottom: y1+size1, left: x1, right: x1+size1};
  var b = {top: y2, bottom: y2+size2, left: x2, right: x2+size2};

  // this is the general way to figure out if two rects are overlapping
  return !(a.left >= b.right || a.right <= b.left ||                           
           a.top >= b.bottom || a.bottom <= b.top);
}; 
```

这只是检查一个矩形是否完全位于另一个矩形的左侧、右侧、顶部或底部。如果不是，那么它们一定是重叠的。由于这只是给出了一个真值或假值，我仍然必须弄清楚碰撞发生在哪一侧。

为了弄清楚这一点，我将碰撞分为两个部分，一个`x`碰撞和一个`y`碰撞，假装首先只`dx`改变然后只`dy`改变。一旦我知道哪个方向导致了重叠，我就可以使用方向的变化来确定重叠发生在哪一侧。例如，如果`x`导致碰撞并且先前`dx`大于当前`dx`，则碰撞在右侧。

```
 // check the x and y directions separately                                        
  var x_collide = rect_collision(r2_x, r2_y, rectSize, x, r1_y, rectSize);

  // see if we are currently overlapping
  if (!x_collide) {
    // not colliding, update our x position normally
    this.attr({x:x});
    this.pdx = dx;                          
  }
  else {
    // we are, stick the moving rect to the correct side of the stationary one
    // based on the drag direction that got us stuck
    this.attr({x: this.pdx > dx ? r2_x + rectSize + 1 : r2_x - rectSize - 1});                       
  } 
```

I then added a little bit of extra logic to match the functionality that you had which prevent the user from dragging the rectangle directly through the stationary one. Basically I ended up just seeing if the move would place the moving rectangle directly on the opposite side of the stationary one, and if so, prevent it.

I also cleaned up your checks for the border to get rid of all of the Math.min and Math.max calls since you didn't really need those. That's more of a preference thing though since I doubt there were causing much of the performance issues.

You can see the results at [http://jsfiddle.net/X7H9G/3/](http://jsfiddle.net/X7H9G/3/). I'm not sure if this is the best solution, but it seems to do the job.

# image - 为什么我的浏览器无法显示存储在横幅文件夹中的图像？

> ID：12550636
> 
> 赞同：0
> 
> 时间：2012-09-23T07:51:36.440
> 
> 标签：image, browser, show

我已将我的 Web 应用程序的图像存储在此路径**images/banners**中。但我的浏览器（Chrome、Firefox、IE）无法读取和显示它们。当我将**横幅**重命名为**横幅**时，这个问题就解决了。
怎么了 ？

# node.js - 数据库是否附加到heroku中的测功机？

> ID：12550637
> 
> 赞同：0
> 
> 时间：2012-09-23T07:51:43.290
> 
> 标签：node.js, heroku, redis

我想试试heroku，但不太确定我是否正确理解了所有术语。

我有一个带有 node.js 和 redis 的应用程序，我的主要关注点是扩展和速度。

在传统环境中，我会在负载均衡器前面有两台服务器；两台服务器完全独立，共享相同的代码并拥有自己的 redis 实例。两台服务器彼此不知道（数据由第三方服务器同步，但在这种情况下不感兴趣）。

然后我会在他们面前推一个负载均衡器。知道我可以轻松扩展，因为两个实例彼此不知道，如果我愿意，我可以添加更多实例。

我可以在测功机中镜像该环境还是不能将redis实例附加到测功机？

如果有不清楚的地方，请询问，因为我是 paas 的新手！

据我了解：我将为我的节点应用程序提供一个测功机，并且只需添加它的另一个实例。这很酷，但他们会共享相同的 redis 还是我可以让他们独立？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T03:03:40.870

您最好忘记传统架构并尝试这样思考：

*   dyno 是处理 HTTP 请求的进程，是 heroku 上应用程序实例的绝对最小值。
*   对于一个应用程序实例，您可以拥有任意数量的测功机，而且它是完全透明的。无需考虑服务器、负载平衡等......一切都得到了照顾。
*   redis 实例基本上是一种由应用程序实例使用的服务，因此由一个或多个 dynos 使用。同样，服务器、负载平衡等都得到了照顾。

也许您想再次查看 heroku.com 上的工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T01:20:49.817

您可以根据需要为一个 URL 设置任意数量的测功机 - 您只需更改控制器中的值。这实际上是 Heroku 的最佳功能之一 - 您不关心服务器，您增加了 dyno 的数量，从而增加了可以同时处理的请求数量。

与 redis 相同 - 添加实例基本上不起作用，您只需切换到性能更高的计划，请参阅[https://addons.heroku.com/redistogo](https://addons.heroku.com/redistogo)。再次，忘记服务器。

# eclipse - SVN 与 1.4 版本合并

> ID：12550638
> 
> 赞同：0
> 
> 时间：2012-09-23T07:51:56.110
> 
> 标签：eclipse, svn, tortoisesvn

根据我的阅读，在 1.4 之前合并 SVN 时，我必须“手动”执行此操作，因为以前的合并信息不可用：svn merge svn://server/repo/trunk@revision svn://server/repoo /分支 。

由于这是我第一次合并我在修订中添加了什么？我在“分支时间”使用那个吗？

另外，有没有办法在 Eclipse-Collabnet 客户端中执行此操作，还是我必须通过 Tortoise 执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:27:23.253

要使用的命令[在 SVN book 中](http://svnbook.red-bean.com/en/1.4/svn-book.html#svn.branchmerge.commonuses.wholebr)有说明。假设您在修订版 341 开始维护分支，并且主干位于修订版 405，并且工作副本指向主干，命令应该是：

svn 合并 -r 341:405 [http://svn.example.com/repos/calc/branches/my-maintenance-branch](http://svn.example.com/repos/calc/branches/my-maintenance-branch)

请记住，合并包括将 A 点到 B 点的差异应用到工作副本中。在这里，A 点和 C 点在同一个分支中：维护分支：您在此分支中所做的所有更改都必须重新应用到主干上。

# iphone - 解析中的 iOS API - 一对多关系

> ID：12550639
> 
> 赞同：0
> 
> 时间：2012-09-23T07:51:59.213
> 
> 标签：iphone, objective-c, ios, parse-platform

我正在为我的 iPhone 应用程序的后端部分使用[解析。](https://parse.com/)

我们可以在 Parse 中建立一对多关系，如[Relational Data](https://parse.com/docs/ios_guide#objects-pointers)中所述。

此代码可以正常检索数据：

```
PFQuery *query = [PFQuery queryWithClassName:@"Comment"];
PFObject *fetchedComment = [query getObjectWithId:@"0PprArjYi3"];

NSString *content = [fetchedComment objectForKey:@"content"];
printf("%s", [content UTF8String]); 
```

但是当我使用他们在链接中提供的代码时，它返回 null：

```
PFObject *post = [fetchedComment objectForKey:@"parent"];
[post fetchIfNeededInBackgroundWithBlock:^(PFObject *object, NSError *error) {
          title = [post objectForKey:@"title"];
}];
printf("%s", [title UTF8String]);     // RETURN NULL 
```

谁能告诉我这段代码有什么问题？**问题可以拿来评论**。

* * *

附加物

这个也有一个例外：

```
PFQuery *query = [PFQuery queryWithClassName:@"Comment"];
PFObject *fetchedComment = [query getObjectWithId:@"0PprArjYi3"];

PFObject *post = [fetchedComment objectForKey:@"parent"];
NSString *title = [post objectForKey:@"title"];
printf("%s", [title UTF8String]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:16:39.797

`fetchIfNeededInBackgroundWithBlock`顾名思义，该方法是在后台执行的。您的代码要求获取，然后立即继续到`printf`. 在那个时间点，数据还没有被提取，所以`title`可能仍然是`nil`.

你有两个选择——

1.  使用同步方法，例如 [post fetch]: 而不是 [parent fetchInBackground...]。

    ```
    [post fetch];
    title1 = [post objectForKey:@"title"]; 
    ```

2.  `fetchInBackground...`打印方法完成时执行的块内的标题。

# sql - 解析错误：语法错误，意外的 'from' (T_STRING)，期待 ']'

> ID：12550640
> 
> 赞同：0
> 
> 时间：2012-09-23T07:52:14.427
> 
> 标签：sql, parsing

我在 facebook 上制作一个简单的新闻提要，但我有这个错误：

> 解析错误：语法错误，意外的“来自”（T_STRING），在第 8 行的 C:\wamp\www\facebook\newfeed.php 中期待 ']'

我不知道出了什么问题，当我在 WAMP 中测试它时，我的查询有效。我需要帮助。

```
<html>
<head>
<?php
require("opendb.php");

$userid = (int) $_SESSION[`fb128_userid];
$query = mysql_query (" SELECT * FROM posts WHERE userid= ANY (
SELECT `from` as id FROM friends WHERE `to`= $userid and status='Confirmed' UNION 
SELECT `to` as id FROM friends WHERE `from`= $userid and status='Confirmed') 
ORDER BY date_created DESC LIMIT 1,10" );

require("closedb.php");
$promt = "";
while(list($id,$userid,$from,$content,$date_created) = mysql_fetch_array($query)){  
        $promt .="<hr>";
        $promt .='<p>'.substr($content,0,150)."...<a href='post.php'>see more</a></p>";
        $promt .="<a href='like.php'>    like</a> |  ";
        $promt .="<a href='comment.php?id=$id'>Comment |</a>";
        $promt .= "<p class='post-info'> | Date Created: $date_created </p> ";
        $promt .="<hr>";
    }
    ?>

</head>
<body>
<p><b>NewsFeed</b> <hr></p>
<?php echo $promt; ?>
<hr>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:57:59.873

```
$userid = (int) $_SESSION[`fb128_userid]; 
```

这看起来像是一个缺少的结束引号，也许你应该使用 ussign`'`而不是 `

# java - JTable中TableColumn的宽度

> ID：12550641
> 
> 赞同：1
> 
> 时间：2012-09-23T07:52:18.017
> 
> 标签：java, swing, jtable, tablecolumn

在我的应用程序中，我将 a`JTable`与一些可调整大小的列一起使用。关闭时，我希望应用程序存储显示的列的大小。

我的问题是，即使我手动调整列大小，该`getWidth()`函数始终返回 75（默认值），无论列的实际大小如何。如果我用调试器查看`TableColumn`对象，它的最小尺寸是 15，它的最大尺寸是 2147483648，它的首选尺寸是 75，它的尺寸是 75。但它显示的尺寸显然不是 75！

如何获得列的实际大小？

获取宽度的代码：

```
 for(i=0;i<TableOpérations.getColumnCount();i++){
              tc=TableOpérations.getColumn(TableOpérations.getColumnName(i));

              width=tc.getWidth();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:17:34.530

我没有看到你看到的行为。每次按下按钮时，以下程序都会显示正确的宽度。您必须显示另一个表或表列模型的列的宽度。

```
public class TableColumnTest extends JFrame {

    private JTable table;

    public TableColumnTest() {
        JPanel p = new JPanel();
        p.setLayout(new BorderLayout());
        table = new JTable(5, 4);
        p.add(new JScrollPane(table), BorderLayout.CENTER);
        JButton b = new JButton("Test");
        b.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                displayWidths();
            }
        });
        p.add(b, BorderLayout.SOUTH);
        add(p);
        pack();
    }

    private void displayWidths() {
        for (int i = 0; i < table.getColumnCount(); i++) {
            TableColumn column = table.getColumnModel().getColumn(i);
            System.out.println("Width of column " + i + " : " + column.getWidth());
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TableColumnTest().setVisible(true);
            }
        });
    }
} 
```

# mono - 使用 MonoDevelop 设置 MVC 4 (Razor)

> ID：12550642
> 
> 赞同：12
> 
> 时间：2012-09-23T07:52:24.670
> 
> 标签：mono, monodevelop

我正在拼命地尝试在 Monodevelop 上使用 Razor 设置 MVC 4（在最坏的情况下 3）。我坐在一台装有 Mono 2.11.4 的 Mac OS X 机器上。

它似乎没有所需的所有组件。例如， System.Web.Helper 似乎没有找到。而 MonoDevelop 只能找到 System.Web.Mvc 版本 3（选择 NET Framework 4.5）或版本 2（选择 NET Framework 4.0）。有谁知道如何让 MVC 4 with Razor 工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T13:30:57.317

（理论上，Razor pages 与 Mono 一起使用 2.10.x 系列，但您必须将 Microsoft 的程序集与它捆绑到您的 Linux 机器中。）

[从 Mono 2.11.1 开始，这些程序集现在默认捆绑在 Mono 中，因为 Microsoft 最近（2012 年3 月](http://tirania.org/blog/archive/2012/Mar-28.html)）开源了 Razor 。所以：您使用的是正确版本的 Mono。

问题在于，正如[这篇](http://tirania.org/blog/archive/2012/Mar-28.html)博文中所解释的，MVC4 依赖于异步 ASP.NET API 堆栈，该堆栈在 Mono 中还没有准备好。所以是的，您现在可以将 Razor 与 Mono 一起使用，而无需从 Windows 部署 MS 程序集，但是，您现在需要坚持使用 MVC3，而不是 4。

[（从另一个stackoverflow问题](https://stackoverflow.com/questions/10566352/is-it-possible-to-use-razor-2-0-view-engine-under-mono/12131564#12131564)中复制粘贴我的答案并稍微调整一下。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-23T21:28:37.723

我修改了 VS2010 MVC4 项目模板以在 Mac 和 Linux 上的 Xamarin Studio/MonoDevelop 中运行 out-of-the-zipfile：http: [//www.cafe-encounter.net/p1319/run-asp-net-mvc4-on- mono-monodevelop-on-mac-the-c-template-project](http://www.cafe-encounter.net/p1319/run-asp-net-mvc4-on-mono-monodevelop-on-mac-the-c-template-project)。

**更新：**我在 .Net 4.5 模板上做了一个 MVC4，并在[http://www.cafe-encounter.net/p1510/asp-net-mvc4-net-framework-version-4-5-c-razor- template-for-mono-on-mac-and-linux，](http://www.cafe-encounter.net/p1510/asp-net-mvc4-net-framework-version-4-5-c-razor-template-for-mono-on-mac-and-linux)包括指向 github 的链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T20:05:51.750

根据[Mono 站点上的兼容性页面，](http://www.mono-project.com/Compatibility)支持 MVC4，但异步功能除外。除非 MVC4 框架的一部分默认使用异步，否则只有在代码中添加了该模式时，这些新功能才会成为问题。

# python - 更好的算法（比使用字典）枚举具有给定总和的对。

> ID：12550645
> 
> 赞同：4
> 
> 时间：2012-09-23T07:52:50.700
> 
> 标签：python, algorithm

给定一个数字，我必须找出给定数组中所有可能的索引对，其总和等于该数字。我目前正在使用以下算法：

```
def myfunc(array,num):
    dic = {}
    for x in xrange(len(array)):  # if 6 is the current key,
        if dic.has_key(num-array[x]):  #look at whether num-x is there in dic
            for y in dic[num-array[x]]: #if yes, print all key-pair values
                print (x,y),
        if dic.has_key(array[x]):  #check whether the current keyed value exists
            dic[array[x]].append(x)  #if so, append the index to the list of indexes for that keyed value
        else:
            dic[array[x]] = [x]  #else create a new array 
```

这会及时运行`O(N)`吗？如果不是，那么应该怎么做才能做到这一点？`O(N)`而且无论如何，不​​使用任何辅助数据结构，是否有可能让它及时运行呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T08:00:23.477

> 这会在 O(N) 时间内运行吗？

是和不是。复杂性实际上是*输出大小*`O(N + M)`在哪里。 不幸的是，输出大小是最坏的情况，例如数组-这将导致需要生成的元素的二次数。`M` *`O(N^2)``[3,3,3,3,3,...,3]``number == 6`*

 *但是 - 渐近地说 - 它不能做得比这更好，因为它在输入大小和输出大小上是线性的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T08:04:38.440

非常非常简单的解决方案，实际上通过使用数组引用在 O(N) 时间内运行。如果您想枚举所有输出对，那么当然（如阿米特所述）在最坏的情况下必须采用 O(N^2) 。

```
from collections import defaultdict
def findpairs(arr, target):
    flip = defaultdict(list)
    for i, j in enumerate(arr):
        flip[j].append(i)
    for i, j in enumerate(arr):
        if target-j in flip:
            yield i, flip[target-j] 
```

后处理以获取所有输出值（并过滤掉`(i,i)`答案）：

```
def allpairs(arr, target):
    for i, js in findpairs(arr, target):
        for j in js:
            if i < j: yield (i, j) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T09:06:02.053

这可能会有所帮助 -[查找可被给定整数 k 整除的对所需的最佳算法](https://stackoverflow.com/questions/12545544/optimal-algorithm-needed-for-finding-pairs-divisible-by-a-given-integer-k)

（稍作修改，我们可以看到所有可以被给定数字整除的对，不一定等于给定数字）*

# android - Android txt 文件 v 的数据库

> ID：12550646
> 
> 赞同：-1
> 
> 时间：2012-09-23T07:52:58.813
> 
> 标签：android, sqlite, text-files

我的音乐应用程序正在引用持久存储的数据。所有当前都存储为文本文件：

收藏夹 - 单个文本文件数组。应用程序启动，读取文本文件，存储在内存中。展开 ListView 时检查数组。如果数组更改，则重写文本文件。

Last Played - 单个文本文件数组列表。每 5 秒更新一次。保留播放歌曲的历史记录，以允许用户返回任何专辑并恢复位置。

播放列表 - 当前单独的文本文件，每个列表一个。需要时从文件名生成的播放列表列表。每个播放列表文本文件里面都有数组列表。需要时读写。

大多数播放 - 单个文本文件数组列表。每播放一首歌更新一次。

我想知道这些数据是否需要更改为数据库，或者我是否采取了正确的方法。我不认为需要添加额外的数据，所以这应该是我最需要的。

请指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T07:58:03.523

您可以将文本文件存储在 SharedPreference 中，它应该可以正常工作。

如果需要存储大量数据，最好使用数据库。使用数据库比解析字符串更优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T08:13:07.227

正确的方法是为您想要表示的每个事物创建一个类，例如收藏夹。每个类都有一个 save() 和 reload() 方法。关键是您可以更改 save() 和 reload() 方法中的底层存储机制，而无需更改其余代码。想象一下，将来您想要启用保存到 Dropbox。您只需更改这些方法，您的应用程序就会正常工作（好吧，您需要添加一些东西来获取 Dropbox 帐户详细信息，但您明白了）。

您可以更进一步并定义用于加载和保存的接口。该接口可以使用一个类，只负责保存和加载。只要任何消费者和提供者类都遵循该接口，您就可以混合和匹配，甚至实现尚未发明的存储方法，而无需重新编码您的应用程序。如果以及何时更改存储方法，您只有一个类可以使用。

```
class StorageManager(){

     enum DataType {Favourites, MostPlayed, PlayList };

     ...

     public save(DataType dataType){

           if (dataType == DataType.Favourites){

              saveFavouritesToDB();

           ...

           ...

} 
```

这种方法为您提供了最大的灵活性、最大的未来验证和更好的可维护性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T08:09:43.553

我认为最好使用数据库。

数据库应该为您提供一些优化、性能改进，并且基本上您不必重新发明轮子（在磁盘上进行读/写操作，在重写之前使用一些缓冲区等）。

另外，一旦你开始使用这种方式，我认为你会喜欢所有代码的组织方式并分成自己的层。

# mysql - mysql用户登录

> ID：12550648
> 
> 赞同：0
> 
> 时间：2012-09-23T07:53:12.353
> 
> 标签：mysql, mysqldump, mysql-workbench

我为我的数据库创建了一个密码 mypass 的用户 Sam。

如何使用此用户登录。

我想检查该用户的特权。

我正在使用 MYSQL 5.5

我正在使用 Windows 7.mysql 命令行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:04:51.287

登录非常简单：

```
mysql -u Sam -p 
```

然后应该提示您输入密码。此时，您要么必须选择一个数据库来对其进行操作，要么您可以检查您的一般授权。

检查用户权限很简单：

```
SHOW GRANTS FOR CURRENT_USER; 
```

我强烈推荐阅读[MySQL :: MySQL 入门](http://dev.mysql.com/tech-resources/articles/mysql_intro.html)。

# ruby-on-rails - 在 Rails 应用程序中支持时区

> ID：12550650
> 
> 赞同：0
> 
> 时间：2012-09-23T07:53:33.050
> 
> 标签：ruby-on-rails, datetime

我在我的 Rails 应用程序中添加了一个日历。我们的活动有开始日期和结束日期（都包括小时和分钟）。这些是事件表中的字段，实际上它们的格式是日期时间。当您为特定事件选择开始日期、结束日期、标题和描述（以及其他）时，参数散列如下所示：

```
parameters = {"event" => {"title" => "a title", "description" => "a description", "start_date" => "2012-09-23 23:45", "end_date" => "2012-09-24 15:32"}} 
```

在事件控制器中，我有这样的事情：

```
Event.create(:title => params[:event][:title],
             :description => params[:event][:description],
             :start_date => params[:event][:start_date].present? ? DateTime.strptime(params[:event][:start_date], "%Y-%m-%d %H:%M") : nil,
             :end_date => params[:event][:end_date].present? ? DateTime.strptime(params[:event][:end_date], "%Y-%m-%d %H:%M") : nil,
             ...
            ) 
```

那么，当这个事件被存储到数据库（mysql）中时，开始日期的值为“2012-09-23 20:45”，而结束日期的值为“2012-09-24 12:32”。我知道 Rails 会自动处理时区。我的问题是，当我想获取特定时间的所有事件（例如，今天发生的所有事件）时，我会：

```
query = "((start_date between ? AND ?) OR (end_date between ? AND ?))"
query << "title NOT LIKE ? AND ..."
self.events.where(query, 
                  Time.now.beginning_of_day, Time.now.end_of_day, 
                  Time.now.beginning_of_day, Time.now.end_of_day, 
                  some_restriction_here, ...) 
```

我得到了错误的事件！（很明显，为什么数据库中的日期和时间与输入不同）。也有一个明显的解决方案，将所有事件带入内存，日期和时间将再次与原来的一样，但这在资源方面是昂贵的。另一方面，这并不能解决时区问题，如果有人在中国创建一个事件，则数据库中的值将相对于服务器本地化的时间偏移量。我可以在某处有一个字段，用户可以在其中设置时区并使用此字段为此类用户存储特定日期并完成此操作，您对处理此问题的最佳方法有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T12:40:29.473

Rails 以 UTC 格式将所有日期存储在数据库中。因此，一种方法是始终以 UTC 进行操作，并在视图中将显示的日期转换为当前时区。另一种方法是在每个操作开始时更改 Rails 时区。所有解析的时间和日期都将在您的自定义时区中。

```
def action_name
  Time.zone = "Prague"
  # ... logic
end 
```

# c# - 为网站实施管理面板的最有效和最安全的方法是什么？

> ID：12550651
> 
> 赞同：1
> 
> 时间：2012-09-23T07:53:52.480
> 
> 标签：c#, asp.net, sql-server-2008, panel, admin

我正在用 ASP.NET、C# 和 SQL Server 2008 开发一个网站。我的同事建议我应该在我的托管服务器的一个密码锁定**目录中构建一个管理面板作为我网站的安全部分之一。****但是我认为如果我将它构建为桌面 PC 上的应用程序**，使用 JavaScript 之类的任何脚本语言，它无法访问任何外部人员，它会更安全。但我无法预测什么是更有效和更安全的方式。第一个或第二个。请告诉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:17:59.470

从逻辑上讲，最有效的方法是扩展 Web 应用程序以包含管理区域。这意味着您只需维护一个应用程序。同样，如果您要构建一个桌面应用程序，它必须与 Web 应用程序通信，并且可能使用什么来验证自己，什么..？当然是密码。所以无论哪种方式，你都需要在网站上建立一个密码保护区域。

# caching - 如何配置 Dynacache CacheProvider？

> ID：12550653
> 
> 赞同：3
> 
> 时间：2012-09-23T07:54:27.013
> 
> 标签：caching, websphere

我正在尝试实现 Dynacache CacheProvider 并遇到问题。这是我所做的：

*   我在 D:\IBM\WebSphere85\AppServer\lib 下有我的 Dynacache CacheProvider 实现 jar
*   我已将 com.ibm.ws.cache.CacheConfig.cacheProviderName 配置为具有正确 CacheProvider 实现类的 JVM 定制属性。
*   使用相关设置创建了位于 D:\IBM\WebSphere85\AppServer\properties 下的 cacheinstance.properties，包括 com.ibm.ws.cache.CacheConfig.cacheProviderName 正确的类名值。
*   我的 cacheinstance.properties 也是 Dynacache CacheProvider 实现 jar 的一部分。
*   我将对象缓存实例配置为具有新的动态缓存。这也将 com.ibm.ws.cache.CacheConfig.cacheProviderName 作为定制系统属性。
*   我的应用程序使用以下内容访问缓存：

代码：

```
Properties props = new Properties();                               
props.put("com.ibm.ws.cache.CacheConfig.cacheProviderName","com.myCacheProvider");
map = (DistributedObjectCache)DistributedObjectCacheFactory.getMap("mycache",props); 
```

当应用程序尝试访问 DynaCache 时，我得到以下信息：

```
[9/18/12 10:10:52:917 EDT] 00000050 ServerCache   E   DYNA1066E: Unable to initialize the cache provider "com.myCacheProvider". The Dynamic cache will be used to create the cache instance "default" instead of the configured cache provider.
[9/18/12 10:10:52:919 EDT] 00000050 ServerCache   E   ENGLISH ONLY MESSAGE: cacheProvider is null. Check for the cache provider libraries 
[9/18/12 10:10:52:920 EDT] 00000050 ServerCache   I   DYNA1001I: WebSphere Dynamic Cache instance named default initialized successfully. 
```

我正在使用 WAS 8.5。

任何想法发生了什么以及如何调试它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T06:36:39.553

伙计，

我会打开 Dyna 缓存跟踪，看看为什么会发生这个错误

跟踪字符串：com.ibm.ws.cache。*=全部：com.ibm.ws.drs。*=全部

这应该为我们提供有关正在发生的事情的线索，并且取决于我们从跟踪中看到的内容，将为我们提供下一步该做什么的信息。

高温高压

# bash - 让 awk 从变量中一次解释一行

> ID：12550659
> 
> 赞同：0
> 
> 时间：2012-09-23T07:55:14.183
> 
> 标签：bash, shell, awk, echo

我对 shell 脚本和 bash 完全陌生。我的问题是如何让 awk 解释包含换行符的变量，就像 awk 解释来自标准输入的数据一样？

例子：

```
fileData=`cat /path/to/file`
echo $fileData | awk '{print $1}' 
```

上面的代码导致以下错误消息：`awk: program limit exceeded: maximum number of fields size=32767`这显然意味着 awk 会`$fileData`同时解释所有行，而不是一次解释一行。

如何让 awk 从变量中一次解释一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:05:54.193

如果我正确理解您的问题，我怀疑您的问题与 , 的关系不大`awk`，而与外壳空白分割有关。您的问题是外壳已将内部的换行符`$fileData`作为空白字段分隔符。为了防止这种情况：

```
echo "$fileData" | awk '{print $1}' 
```

例如，您还可以使用关联数组`export fileData`直接访问环境变量（`awk``environ``environ["fileData"]`

顺便说一句，我希望你的代码只是一个简单的例子，

```
awk '{print $1}' /path/to/file 
```

是首选。原样：

```
fileData=$(cat /path/to/file) 
```

过度使用反引号（尽管`cat`很少需要）。

# ios - OpenGL ES 视图 iOs 6.0 的快照

> ID：12550662
> 
> 赞同：1
> 
> 时间：2012-09-23T07:55:46.473
> 
> 标签：ios, opengl-es, screen, capture

> **可能重复：**
> [为什么 glReadPixels() 在 iOS 6.0 中的此代码中失败？](https://stackoverflow.com/questions/12528365/why-is-glreadpixels-failing-in-this-code-in-ios-6-0)

我们正在尝试拍摄 OpenGL ES 视图的快照并将结果保存在 UIImage 中。

对于 iOS 5.x，我们的功能运行良好。

对于 iOS 6，我们的功能仅适用于模拟器，不适用于设备。我们在设备上收到一张空白（白色）图像。

我们参考了[http://developer.apple.com/library/ios/#qa/qa1704/_index.html](http://developer.apple.com/library/ios/#qa/qa1704/_index.html)上的技术报告， 我们的功能与苹果在本技术报告中提供的功能几乎相同

下面附上我们的函数（在 Additional Details 窗口中）。

我们将很高兴获得帮助，我们希望尽快得到答复，因为我们的应用程序目前在线，存在此严重错误。（顺便说一句，我们只使用 opengl es 而不是 cocos2d）

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T20:08:29.447

如果您没有得到答案：正如其他一些帖子中所述，我发现这只会影响设备，而不影响运行我的应用程序的模拟器。在使用 kEAGLDrawablePropertyRetainedBacking 设置为 true 进行初始化时，我设置了 CAEAGLLayer drawableProperties。没有注意到速度上有很大的影响，我的捕获又开始工作了。

# ruby - 红宝石：console.log？

> ID：12550663
> 
> 赞同：80
> 
> 时间：2012-09-23T07:56:06.270
> 
> 标签：ruby

我最近在 JavaScript 程序的每一行都添加了 console.log 语句，发现它现在更容易理解了。有没有办法用服务器端代码，特别是 Ruby 来做到这一点？我认为没有办法在萤火虫中阅读它，但它会在 irb 中可见吗？我会在 Ruby 代码中放入什么 console.log 等效语句？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-09-23T07:57:18.597

`puts`是红宝石中的等价物。

例子

```
puts 'Hello World!' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-23T07:58:09.163

如果您在控制台中运行服务器，则可以使用`puts`. 否则，您将需要写入文件，可能通过记录器（如`Rails.logger.info`）。

# notice - 单击时公告板悬停

> ID：12550665
> 
> 赞同：-1
> 
> 时间：2012-09-23T07:56:41.870
> 
> 标签：notice

我只是想要想法..如何通过它.,.

请访问网站[http://www.gumtree.com.au/](http://www.gumtree.com.au/)。在主页的右侧，在一栏中，有许多像通知区域一样的便签。这些通知区域中的每一个都有许多单选按钮，当您将鼠标悬停在其中一个单选按钮上时，通知区域的内容会发生变化。我想知道是否有一个 JQuery 插件或者是否可以通过编程来实现。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:58:21.467

这些是带有图像的 div，而不是单选按钮，是的，这完全可以通过使用带有 CSS 和图像的 jQuery 进行编程来实现。[这是](http://caroufredsel.frebsite.nl)一个 jQuery 插件的例子，它做的事情几乎完全相同。

# iphone - 使用加速度计退出视图时崩溃

> ID：12550668
> 
> 赞同：0
> 
> 时间：2012-09-23T07:57:39.210
> 
> 标签：iphone, objective-c, ios, xcode, ipad

在我的 iOS 应用程序中，我有一个使用加速度计移动 UIImageView 的视图。当我退出视图回到主屏幕时，应用程序崩溃。我不知道为什么。在 viewDidUnload 方法中，我有这个：

```
[ball removeFromSuperview]; 
```

在 .h 文件中：

```
@interface PlayShotguniPad : UIViewController  <UIAccelerometerDelegate> {

// Declare IBOutlets for the moving fly
IBOutlet UIImageView *ball;

// Floats for the movement data
float valueX;
float valueY;

} 
```

在.m中，我有这个代码来移动苍蝇：

```
-(void)awakeFromNib {
[[UIAccelerometer sharedAccelerometer] setUpdateInterval:1.0/100.0];
[[UIAccelerometer sharedAccelerometer] setDelegate:self];
}

// Get accelerometer movement data, move fly with device tilt
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
valueX = acceleration.x*60.0;
valueY = acceleration.y*60.0;

int newX = (int)(ball.center.x +valueY);
if (newX > 1000-BALL_RADIUS)
    newX = 1000-BALL_RADIUS;
if (newX < 0+BALL_RADIUS)
    newX = 0+BALL_RADIUS;

int newY = (int)(ball.center.y +valueX);
if (newY > 740-BALL_RADIUS)
    newY = 740-BALL_RADIUS;
if (newY < 0+BALL_RADIUS)
    newY = 0+BALL_RADIUS;

CGPoint newCenter = CGPointMake(newX, newY);

ball.center = newCenter ;

} 
```

viewDidLoad 方法：

```
[self awakeFromNib]; 
```

有什么我必须做的，比如在离开视图时释放任何东西，以防止崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:32:18.323

您必须在您的 dealloc 中将加速度计委托设置为 nil，否则将调用不再存在的视图控制器的选择器。

```
- (void)dealloc {
[[UIAccelerometer sharedAccelerometer] setDelegate:nil];
} 
```

# r - 在 R 中是否有一些函数，如 python 中的 raw_input()？

> ID：12550677
> 
> 赞同：2
> 
> 时间：2012-09-23T07:58:17.867
> 
> 标签：r

在 Python 中，我们可以使用`raw_input()`，在 R 中我可以使用什么？

```
>>> raw_input("let x=3 or 4?")
let x=3 or 4?3
'3' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T08:09:06.490

尝试`readline()`：

```
> input = readline('Enter anything: ')
Enter anything: test
> input
[1] "test"
> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-09T14:44:32.387

这是一个更好的解决方案：

```
input = readline(prompt="Enter anything: ") 
```

这将在交互式会话中工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T04:49:34.123

......甚至更多的python-ish：

```
(readline(prompt = 'Enter anything: ')) 
```

# asp.net - 当我使用超链接中的目标在 iframe 中加载页面时，如何在父页面上获取 page_load 或某些事件？

> ID：12550679
> 
> 赞同：0
> 
> 时间：2012-09-23T07:58:26.353
> 
> 标签：asp.net, iframe, hyperlink, pageload

我有一个 asp.net 页面，说**Admin.aspx**，其中有一些超链接。我在同一页面上有一个 iframe 说**UserList.aspx**。当我单击任何超链接时，我将在 iframe 中打开新页面。

```
....
 <li><a href="UserList.aspx   target="targetFrame" >UserList</a></li>
......
......
 <tr>           
   <td class="content">
     <iframe name="targetFrame" height="100%" width="100%" frameborder="0" 
      style="" id="contentFrame"  runat="server"  src=""></iframe>
    </tr>
.....
 ..... 
```

现在我有一个要求，所以当用户单击超链接时，我必须获取 Admin.aspx 的页面加载事件。但目前我没有收到任何页面加载事件。我哪里错了？我该怎么做才能获取父级的 PageLoad 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T12:09:10.367

如果您将控制权委托给另一个页面，为什么还要在管理页面上引发页面加载事件？如果您从管理页面传输数据，您可以发布数据，或者如果您想更新应用程序状态，请使用会话。

无论如何，您不能从客户端的用户操作中引发服务器端事件，您必须确保超链接操作很好，因为在服务器端缺少更好的词“检测到”。您需要将锚链接更改为 asp:LinkBut​​ton。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:05:04.917

我解决了这个问题。基本上，一旦单击任何超链接，我就会发送一个 ajax 请求并将链接存储在会话中，以便我以后可以访问它。

感谢您的回复！

# jquery - Jquery根据滚动添加活动类

> ID：12550681
> 
> 赞同：-1
> 
> 时间：2012-09-23T07:59:26.130
> 
> 标签：jquery, scroll

我正在创建带有滚动到插件的一页网站。我想根据我滚动的距离向菜单项添加活动类。

导航：关于我们 | 服务 | 价格 | 联系人

如果我从顶部滚动 0 到 800 像素，则 About us 将处于活动状态，如果我从顶部滚动 800 到 1600 像素，则服务将处于活动状态

等等...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:07:23.440

我解决了我的问题。

```
$(window).scroll(function() {    
$(".top_menu a.active").removeClass("active");
var scroll = $(window).scrollTop();
if (scroll <= 800) {
    $(".top_menu .item1").addClass("active");
}
else if (scroll <= 1600) {
    $(".top_menu .item2").addClass("active");
}
else if (scroll <= 2400) {
    $(".top_menu .item3").addClass("active");
}
else if (scroll <= 3200) {
    $(".top_menu .item4").addClass("active");
}
else if (scroll <= 4000) {
    $(".top_menu .item5").addClass("active");
}
else if (scroll <= 4800) {
    $(".top_menu .item6").addClass("active");
} 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T08:03:53.737

我找到了最好的解决方案，我使用的是 scrollspy 插件，它包含在 bootstarp 和 uikit 中，您可以从以下网址下载具有许多其他有用功能的 uikit：[http ://www.getuikit.com/](http://www.getuikit.com/)

# javascript - 如果我删除添加它的对象，是否需要 removeEventListener？

> ID：12550683
> 
> 赞同：0
> 
> 时间：2012-09-23T07:59:50.547
> 
> 标签：javascript, addeventlistener

我有一个动态生成`li`s 然后附加的函数，`addEventListener`允许用户删除该行。`removeEventListener`即使已经删除了行，我还需要吗？

```
function li (){
  var li = document.createElement('li'), 
      that = this;

  li.addEventListener('click', function(){
     that.delete(li);
  }
} 
```

在旁注中，我正在使用一个匿名函数来传递`li`给该函数。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:09:20.027

不，你不需要打电话`removeEventListener`。

使用以下内容在单击自我时删除自我。

```
li.addEventListener('click', function(){
  this.parentNode.removeChild(this);
}​);​ 
```

# xml - 无法将名称“存储库：存储库”解析为（n）“类型定义”组件。

> ID：12550685
> 
> 赞同：9
> 
> 时间：2012-09-23T08:00:14.753
> 
> 标签：xml, spring, spring-data-jpa

尝试集成 Spring Data 时出现此错误。完整的堆栈跟踪是

```
nested exception is org.xml.sax.SAXParseException; systemId: http://www.springframework.org/schema/data/jpa/spring-jpa.xsd; lineNumber: 18; columnNumber: 48; src-resolve: Cannot resolve the name 'repository:repository' to a(n) 'type definition' component.
at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76) 
```

XML文件是

```
<beans:beans xmlns:beans="http://www.springframework.org/schema/beans"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://www.springframework.org/schema/data/jpa"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/data/jpa
        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">
    <repositories base-package="com.interviewedonline.poc.repositories" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:53:59.407

我对 XSD 文件有同样的问题。

我已将 Spring data Data Commons 1.4 更改为 Spring Data Commons 1.3.2，现在一切正常...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T03:29:03.257

我添加了这个 jar **spring-data-commons-core-1.2.1.RELEASE**

在 Pom.xml 添加了以下条目

```
<dependency>
     <groupId>org.springframework.data</groupId>
     <artifactId>spring-data-commons-core</artifactId>
     <version>1.2.1.RELEASE</version>
</dependency> 
```

在 jpa 配置文件中，在 xsi:schemaLocation [http://www.springframework.org/schema/data/jpa](http://www.springframework.org/schema/data/jpa) [http://www.springframework.org/schema/data/jpa/spring-jpa-1.2 下添加了以下条目。 xsd](http://www.springframework.org/schema/data/jpa/spring-jpa-1.2.xsd)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-09T08:50:44.300

我最近在更新旧项目的依赖项时遇到了这个错误。我遇到的问题是这种依赖：

```
<dependency>
  <groupId>org.springframework.data</groupId>
  <artifactId>spring-data-commons-core</artifactId>
  <version>1.5.1.RELEASE</version>
</dependency> 
```

已重命名，现在正确的是

```
<dependency>
  <groupId>org.springframework.data</groupId>
  <artifactId>spring-data-commons</artifactId>
  <version>1.8.1.RELEASE</version>
</dependency> 
```

正如我已经声明**spring-data-commons-core**和**spring-data-commons**是 data-mongodb 的传递依赖一样，我最终得到了两个 jar 并且类加载器使用了不正确的 spring-data-commons-core。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T05:11:44.670

我有同样的错误。添加`spring-data-commons-core`似乎为我解决了这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T08:03:10.423

您需要先定义[Spring Data JPA XML 命名空间](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#jpa.namespace)：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:jpa="http://www.springframework.org/schema/data/jpa"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/data/jpa
        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <jpa:repositories base-package="com.interviewedonline.poc.repositories" />

</beans> 
```

或者，如果您想在示例中使用默认 XML 命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/data/jpa"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:beans="http://www.springframework.org/schema/beans"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/data/jpa
        http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <repositories base-package="com.interviewedonline.poc.repositories" />

</beans:beans> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-17T07:33:45.720

在一些 Spring .jar 文件中，您可以找到 META-INF 文件夹。您会在该文件夹中找到 spring.handlers 和 spring.schemas。spring-data-commons- *.jar 确实有。如果你使用 Maven，你应该在 src/main/resources 下创建 META-INF 文件夹，并将 spring-data-commons-* .jar 中 spring.handlers,spring.schemas 的内容附加到你的 spring.handlers,spring.schemas 中。

祝你好运！

# javascript - 如何处理正则表达式中的 \(escape) 字符？

> ID：12550686
> 
> 赞同：0
> 
> 时间：2012-09-23T08:00:21.153
> 
> 标签：javascript, regex

我有以下脚本，它将用and替换`"`and`a`字符。`\"``\a`

```
'"replace'.replace(/"|a/g, "\\$&"); 
```

将导致：`\"repl\ace`

现在我需要将`\`（转义字符）替换为`\\`. `SyntaxError: Invalid regular expression: missing /`但在 chrome 控制台中尝试以下代码失败并出现异常。

```
'"re\place'.replace(/"|a|\/g, "\\$&"); 
```

替换正则表达式中的转义字符（在 Javascript 中）的可能解决方法是什么？

**更新**

简化 pblm，为什么 'rep\lace'.toString() 结果是 'replace' 而不是 'rep\lace'？

同样，我尝试过这些代码，

1.  `"re\nlace".toString();`结果`re`换行`lace`
2.  `"re\xlace".toString();`结果 `SyntaxError: Unexpected token ILLEGAL`。可能是 b，因为 \x 是不可执行的。

我认为 Javascript 正在执行字符串值。但为了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:04:37.813

```
'"replace'.replace(/"|a|\\/g, "\\$&"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:04:46.997

最后一个`\`转义最后一个`/`，你应该转义它以使你的正则表达式看起来像

```
'"replace'.replace(/"|a|\\/g, "\\$&"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T08:05:29.453

问题 #1需要在正则表达式中转义
：`\`

```
"re\place".replace(/a|\\/g,"\\$&");
repl\ace 
```

问题 #2
这`"\"`直接输入导致`""`-`\`再次需要转义：

```
"re\\place".replace(/a|\\/g,"\\$&");
re\\pl\ace 
```

关键是，a`\`说：这里我们有一个特殊的字符。
`\n`-> 新行
`\\`-> `\`
`\x`-> 错误，因为 x 未定义为其他字符的字符

换句话说：
如果要键入，`"re\nlace".toString();`则必须在字符串中键入`"re\\nlace".toString();`

也许这可以帮助你：[http ://en.wikipedia.org/wiki/Escape_character](http://en.wikipedia.org/wiki/Escape_character)

# objective-c - 在 Objective-C 中创建和使用枚举

> ID：12550689
> 
> 赞同：2
> 
> 时间：2012-09-23T08:00:50.780
> 
> 标签：enums, objective-c, ios, xcode, enums

我目前正在用 Objective-C 为 iOS 开发一个扑克游戏，但我在使用[enums](/questions/tagged/enums "显示标记为“枚举”的问题")时遇到了问题。我想创建一个`enum`名为“Suit”并在我的 Card 类中使用它，因为每张牌都有自己的套牌和花色，例如“Ace Spade”。

我在哪里定义我的`enum`？

```
typedef enum Suit {
    Diamond,
    Club,
    Heart,
    Spade
} 
```

另外，我应该在什么类型的类`enum`中定义套装（例如`NSObject`，，`UIView`等）？而且，在我导入`Suit.h`之后`Card.h`，我可以直接将它定义为属性`Card.h`吗？

我对Objective-C不是很熟悉，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T08:15:50.360

```
typedef enum {
    Clubs, Diamonds, Hearts, Spades
} Suit;

typedef int Value;

struct Card {
    Suit suit;
    Value value;
}; 
```

或者，如果你真的认为`Card`需要成为一个重量级的课程，那么

```
@interface Card : NSObject
@property Suit suit;
@property Value value;
@end 
```

# git - 取消发布主分支错误地显示本地主分支中远程分支的提交

> ID：12550691
> 
> 赞同：1
> 
> 时间：2012-09-23T08:01:03.480
> 
> 标签：git, github, github-for-windows

我在过去几周一直在从事的本地项目中使用 git repo。最近，一个朋友想帮忙合作，所以我想把它全部放在 GitHub 上，作为一个私人仓库。我最初只是把所有的分支都竖起来，因为我没有意识到有办法不这样做。在与 git 混了一会儿之后，我意识到我可以从 GitHub 上取消发布单个分支。

我有 4 个主要分支：主分支、开发分支、错误修复和沙箱​​。

我决定只发布开发和错误修复分支，将沙箱保持在本地以备不时之需，并在将文件上传到实际 Web 服务器之前从开发中提取更改。

与此同时，我的朋友为他想要添加的拖放功能创建了一个新分支，创建了一些新文件，我相信他将他的更改提交给了他所做的分支。

问题：在我的 Windows GitHub GUI 中

*   当我去查看我未发布的主分支或沙箱分支时，它们都显示了我的朋友添加到他的拖放分支中的提交，他们不应该这样做，因为拖放没有合并到它们中。

*   当我查看开发分支时，它显示了正确的提交，没有拖放提交。

*   当我发布主分支或沙箱分支时，它们现在也将显示正确的提交，而无需拖放。

*   当我再次取消发布它们时，它们再次开始显示拖放分支中的更改。

*   当我打开一个 shell 并在同一个未发布的本地版本上键入“git log master”时，它不会列出来自拖放分支的提交。它似乎只在 Windows GitHub GUI 中存在这个问题。

我想知道这是 GUI 的问题还是用户错误，可能是后者。我还不完全理解 git 的行为，所以它可能与拖放文件或主分支和沙箱分支一起设置的某些状态有关，我没有注意到它的存在。

# javascript - JavaScript 中的推送方法

> ID：12550693
> 
> 赞同：0
> 
> 时间：2012-09-23T08:01:45.970
> 
> 标签：javascript

嗨，我在 javascript 中遇到问题。

当我尝试在控制台的 localStorage 中保存信息时，我遇到了未定义的错误“方法”推送。

```
<script type="text/javascript">                  

//localStorage.clear(); // Clears the hard drive (database)
var oUsers = {aIds:[], aNames:[]}; 

// Default            
if(localStorage.sUsers){
    console.log('Users already in memory');
    // Get the string with users from the database and
    // convert it into an object, so we can use it
    oUsers = JSON.parse(localStorage.sUsers); 
} 

function SaveUser(){
    // Take the text and make it an object                          
    oUsers.aIds.push(document.getElementById("TxtId").value);
    oUsers.aNames.push(document.getElementById("TxtName").value);               
    localStorage.sUsers = JSON.stringify(oUsers);
    console.log(localStorage.sUsers);                
}              

</script> 
```

# sql-order-by - 我应该在哪里限制我的结果？

> ID：12550694
> 
> 赞同：0
> 
> 时间：2012-09-23T08:01:46.333
> 
> 标签：sql-order-by, xquery

我所做的是创建了一个 XML 文件，其中包含我需要在文档上执行的数千个搜索词的列表。然后，我从一组搜索词样本中创建了这个查询，作为测试，以针对测试文档执行，其中包含来自实际文档的一些样本：

```
let $keywords := ("best clients", "Very", "20")
for $keyword in $keywords
let $matches := doc('test')/set/entry[matches(comment, $keyword, 'i')]
return (<re>
{subsequence($matches/comment, 1, 1),
subsequence($matches/buyer, 1, 1)}</re>,
<re>
{subsequence($matches/comment, 2, 1),
subsequence($matches/buyer, 2, 1)}
</re>
) 
```

试图回来`<re><comment /><buyer /></re><re><comment /><buyer /></re>... continuous`，但我以粗略的顺序让他们回来。

这是正在解析的文档中的一个块（我已经删除了买家姓名和一些嵌套，以使其更易于阅读）：

```
<set>
<entry>
<comment>The client is only 20 years old.  Do not be surprised by his youth.</comment>
<buyer></buyer>
<id>1282</id>
<industry>International Trade; Fish and Game</industry>
</entry>
<entry>
<comment>!On leave in October.</comment>
<buyer></buyer>
<id>709</id>
<industry>Real Estate</industry>
</entry>
<entry>
<comment>Is often !out between 1 and 3 p.m.</comment>
<buyer></buyer>
<id>127</id>
<industry>Virus Software Marketting</industry>
</entry>
<entry>
<comment>Very personable.  One of our best clients.</comment>
<buyer></buyer>
<id>14851</id>
<industry>Administrative support.</industry>
</entry>
<entry>
<comment>!Very difficult to reach, but one of our top buyers.</comment>
<buyer></buyer>
<id>1458</id>
<industry>Construction</industry>
</entry>
<entry>
<comment></comment>
<buyer></buyer>
<id>276470</id>
<industry>Bulk Furniture Sales</industry>
</entry>
<entry>
<comment>A bit of an eccentric.  One of our best clients.</comment>
<buyer></buyer>
<id>1506</id>
<industry>Sports Analysis</industry>
</entry>
<entry>
<comment>Very gullible, so please !be sure she needs what you sell her.  She's one of our best clients.</comment>
<buyer></buyer>
<id>1523</id>
<industry>International Trade</industry>
</entry>
<entry>
<comment>He wants to buy everything, but !he has a tight budget.</comment>
<buyer></buyer>
<id>1524</id>
<industry>Public Relations</industry>
</entry>
</set> 
```

我使用的一些关键字：“最佳客户*”、“贸易”、“20”、....

我一直

输出是一长串条目，在 entry 元素下有评论和买家子代作为兄弟姐妹。我想限制返回的条目数`2 per keyword`。我还试图让以感叹号（！）开头的评论作为优先事项。

当前输出（接近）：

```
<re><comment>Very personable.  One of our best clients.</comment>
  <buyer/>
</re><re><comment>A bit of an eccentric.  One of our best clients.</comment>
  <buyer/>
</re><re><comment>Very personable.  One of our best clients.</comment>
  <buyer/>
</re><re><comment>!Very difficult to reach, but one of our top buyers.</comment>
  <buyer/>
</re><re><comment>The client is only 20 years old.  Do not be surprised by his youth.</comment>
  <buyer/>
</re><re/> 
```

当前输出格式：

```
<entry>
<comment>keyworda</comment>
<buyer></buyer>
</entry>
<entry>
<comment>keyworda</comment>
<buyer></buyer>
</entry>
<entry>
<comment>keywordb</comment>
<buyer></buyer>
</entry>
<entry>
<comment>!keywordb</comment> //Not prioritized.
<buyer></buyer>
</entry>
<entry>
<comment>keywordc</comment>
<buyer></buyer>
</entry> 
```

期望的输出：

```
<entry>
<comment>!keyworda</comment>
<buyer></buyer>
</entry>
<entry>
<comment>keyworda</comment>
<buyer></buyer>
</entry>
<entry>
<comment>!keywordb</comment>
<buyer></buyer>
</entry>
<entry>
<comment>!keywordb</comment>
<buyer></buyer>
</entry> 
```

（基本上，优先考虑包含感叹号的条目并将结果限制为每个关键字 2 个。）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:07:52.823

```
let $reults :=
(
  let $pKeywords := ('best clients', 'Very', '20')
  return
    for $kw in $pKeywords
    return
    (
      /*/entry[contains(comment, concat('!', $kw))],
      /*/entry[contains(comment, $kw)]
    )
  [not(position() gt 2)]
)
for $i in (1 to count($results))
return
(
  subsequence($results/comment, $i, 1),
  subsequence($results/buyer, $i, 1)
) 
```

返回正确的解决方案：

```
<comment>The client is only 20 years old.  Do not be surprised by his youth.</comment>
<buyer/>
<comment>Very personable.  One of our best clients.</comment>
<buyer/>
<comment>!Very difficult to reach, but one of our top buyers.</comment>
<buyer/>
<comment>A bit of an eccentric.  One of our best clients.</comment>
<buyer/> 
```

# javascript - 从 Sencha Touch 2 跨域更新到外部服务器

> ID：12550696
> 
> 赞同：4
> 
> 时间：2012-09-23T08:01:50.417
> 
> 标签：javascript, node.js, cross-domain, jsonp, sencha-touch-2

尝试创建同步到 Node.js 服务器的 Sencha-Touch-2 应用程序；下面的代码。服务器使用同一 IP 上的另一个端口，因此这是跨域的。 *（服务器使用 Mongoose 与 MongoDB 后端通信（未显示））*

*   如图所示，使用 JSONP 代理可以从服务器读取数据，但在写入时会中断： *“JSONP 代理只能用于读取数据”*。我猜 JSONP 代理编写器配置只是用于编写查询，而不是用于编写同步（保存）。

*   Sencha 文档指出**Ajax**代理不能跨域，即使`Ext.Ajax/Ext.data.Connection`在 Sencha 论坛中讨论了跨域： [http ://www.sencha.com/forum/showthread.php?17691-Cross-domain-Ext .Ajax-Ext.data.Connection](http://www.sencha.com/forum/showthread.php?17691-Cross-domain-Ext.Ajax-Ext.data.Connection)

*   我找到了几种方法来进行（跨域）JSON 发布（例如[，使用 Sencha Touch 的移动应用程序 - JSON 请求生成语法错误](https://stackoverflow.com/questions/3881779/mobile-application-using-sencha-touch-json-request-generates-syntax-error)），但不知道如何将其作为作家集成到同步我的商店的代理中。 [Sencha Touch：用于创建/更新功能的 ScriptTagProxy url](https://stackoverflow.com/questions/5620248/sencha-touch-scripttagproxy-url-for-create-update-functionality) 似乎提供了指针，但这是 ajax，显然不适合跨域。

我已经阅读这个论坛和其他地方几天了，但我似乎被困住了。任何帮助将非常感激。

# Node.js 和 restify 服务器

```
var server = restify.createServer({
  name: 'Server',
  key: fs.readFileSync(root+'/'+'privatekey.pem'),
  certificate: fs.readFileSync(root+'/'+'certificate.pem')
});

server.use(restify.bodyParser());
server.use(restify.queryParser());

function getMessages(req, res, next) {
  Model.find(function (err,data) {
    res.setHeader('Content-Type', 'text/javascript;charset=UTF-8');
    res.send(req.query["callback"] + '({"records":' +  JSON.stringify(data) + '});');
  });
}

function postMessage(req, res, next) {//not yet tested
  var obj = new Model(); 
  obj.name = req.params.name;
  obj.description = req.params.description;
  obj.date = new Date();
  obj.save(function (err) {
        if (err) throw err;
        console.log('Saved.');
        res.send('Saved.');
  });
}

server.post(/^\/atapp/, postMessage);
server.get(/^\/atapp/, getMessages);

server.listen(port, ipaddr, function() {
    console.log('%s: secure Node server started on %s:%d ...', Date(Date.now()), ipaddr, port);
}); 
```

# 煎茶触摸 2

## 模型

```
Ext.define('ATApp.model.User', {
    extend: 'Ext.data.Model',
    config: {
        fields: [
            { name: 'name',  type: 'string' },
            { name: 'description', type: 'string' },
            { name: 'date',  type: 'date' },
            { name: '_id' }
... 
```

## 店铺

```
Ext.define('ATApp.store.Data', {
    extend: 'Ext.data.Store',
    requires: [
        'ATApp.model.User',
        'Ext.data.proxy.JsonP'
    ],
    config: {
        autoLoad: true,
        model: 'ATApp.model.User',
        storeId: 'Data',
        proxy: {
            type: 'jsonp',  
            model: 'ATApp.model.User',
            url: 'https://192.168.2.45:13017/atapp',
            reader: {
                type: 'json',
                idProperty: '_id',
                rootProperty: 'records',
                useSimpleAccessors: true
            },
            writer: {
                type: 'json',
                allowSingle: false,
                encode: true,
                idProperty: '_id',
                rootProperty: 'records'
... 
```

## 控制器

```
onNewDataRecord: function (view) {
                        console.log('newDataRecord');
                        var now = new Date();
                        var record = Ext.create('ATApp.model.User', {
                            date: now,
                            name: '..',
                            description: '..'
                            });
                        var store = Ext.data.StoreManager.lookup('Data')
                        record.setProxy(store.getProxy());
                        store.add(record);
                        this.activateEditor(record);
                    },
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T10:20:46.907

在 Sencha-Touch-2 应用程序中，浏览器禁止跨域 AJAX 调用（这违反了同源安全策略）。这与不同的域、不同的 IP 地址甚至同一 IP 地址上的不同端口有关。JSONP 通过在新发起的 HTTP GET 消息中获取/读取封装在脚本标签中的数据来部分规避这一点。通过这种方式，Sencha-Touch-2 JSONP 代理可以从（跨域）服务器加载存储（获取/读取）。但是，JSONP 代理无法写入数据。在[1](http://code.google.com/p/extjsdyntran/source/browse/trunk/extjsdyntran/WebContent/js/3rdparty/Ext.lib.Ajax.js?r=203)和[2](http://extjs.com/forum/showthread.php?t=17691)中描述了一种我已经适应的方法。

我的解决方案使用 JSONP 代理来获取数据，但不存储（它不能）。相反，新记录以及要保存或删除的记录在新启动的 HTTP GET 消息中与服务器通信。即使只使用了 HTTP GET，服务器也会接受消息`get`（在上面的问题中描述）`put`、`del`和`new`. `Get`由 JSONP 存储/代理使用`load()`。

# Node.js 服务器

```
//routes
server.get(/^\/atapp\/put/, putMessage);
server.get(/^\/atapp\/get/, getMessages);
server.get(/^\/atapp\/del/, delMessage);
server.get(/^\/atapp\/new/, newMessage);

function newMessage(req, res, next) {    
    var obj = new Model();                  // Mongoose create new MongoDB object
    obj.save(function (err,data) {
        var x = err || data;
        res.setHeader('Content-Type', 'text/javascript;charset=UTF-8');
        res.send(req.query["callback"] + '({"payload":' +  JSON.stringify(x) + '});');
    });                                     // send reply to Sencha-Touch 2 callback
}

function putMessage(req, res, next) {    
    var q = JSON.parse(req.query.data);     // no reply: add error recovery separately
    var obj = Model.findByIdAndUpdate(q.key,q.val);  
}

function delMessage(req, res, next) {
    var key = JSON.parse(req.query.data);
    Model.findByIdAndRemove(key);       // no reply: add error recovery separately
} 
```

# 煎茶控制器

## 新的

```
onNewDataRecord: function (view) {
    var control = this;
    Ext.Ajax.Crossdomain.request({
        url: 'https://192.168.2.45:13017/atapp/new',
        rootProperty: 'payload',
        scriptTag: true, // see [1](http://code.google.com/p/extjsdyntran/source/browse/trunk/extjsdyntran/WebContent/js/3rdparty/Ext.lib.Ajax.js?r=203)
        success: function(r) { // process synchronously after response
            var obj = r.payload;
            var store = Ext.data.StoreManager.lookup('Data');
            var key = obj._id // MongoDB document id
            store.load(function(records, operation, success) { // add new record to store
                            var ind = store.findBy(function(rec,id) {
                                                return rec.raw._id==key;
                                            }); // identify record in store
                            var record = store.getAt(ind);
                            control.onEditDataRecord(view,record);
                        }, this);
        }
    }); 
```

## 节省

```
onSaveDataRecord: function (view, record) {
    rec = {key:record.data.id, val: {}} // save template
    var i; for (i in record.modified) rec.val[i]=record.data[i];
    var delta = Ext.encode(rec); // only save modified fields
    Ext.Ajax.Crossdomain.request({
        url: 'https://192.168.2.45:13017/atapp/put',
        params: {
            data: delta,
        },
        rootProperty: 'payload',
        scriptTag: true, // Use script tag transport
    });
}, 
```

## 删除

```
onDelDataRecord: function (view, record) {
    var key = record.data.id;
    Ext.Ajax.Crossdomain.request({ // delete document in db
        url: 'https://192.168.2.45:13017/atapp/del',
        params: {
            data: Ext.encode(key),
            format: 'json'
        },
        rootProperty: 'payload',
        scriptTag: true, // Use script tag transport
    });
    record.destroy(); // delete record from store
}, 
```

# ios - 没有Xib的IOS视图

> ID：12550697
> 
> 赞同：1
> 
> 时间：2012-09-23T08:01:52.963
> 
> 标签：ios, xib

我必须创建 iPAD 应用程序，并且不必使用 xib 文件。当我通过代码放置诸如文本框和标签之类的组件时，它们会有点偏离，并且很难像在设计中那样放置它们。

有什么方法可以帮助解决这个问题。就像我会在没有设计师帮助的情况下了解确切的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T10:00:48.180

如果您有预期设计的数字版本，例如设计师的图像，甚至是纸质设计的扫描图，您可以在 a 中使用此背景图像，`UIView`并在临时 Xcode 项目中将组件布局在它们之上一个`.xib`文件。

布局后，您可以记下每个组件的屏幕坐标，并在您的`.xib`-less 项目中对其进行编码。

# android - 如何获取使用 facebook 凭据登录到我的 android 应用程序的用户 ID

> ID：12550701
> 
> 赞同：-2
> 
> 时间：2012-09-23T08:02:37.373
> 
> 标签：android, facebook-graph-api

在我的应用程序中，我使用 facebook 登录，如果用户点击按钮，它会显示 facebook 登录屏幕，如果用户输入凭据，我想获取用户 ID，我在这里粘贴`login()`代码，你能告诉我有什么变化吗？必须做些什么来获取用户ID？

```
private void loginToFacebook() {
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);

    if (access_token != null) {
        facebook.setAccessToken(access_token);
    }

    if (expires != 0) {
        facebook.setAccessExpires(expires);
    }

    if (!facebook.isSessionValid()) {
        facebook.authorize(this,
                new String[] { "email", "publish_stream" },
                new DialogListener() {

            @Override
                    public void onCancel() {
                        // Function to handle cancel event
                    }

                    @Override
                    public void onComplete(Bundle values) {
                        // Function to handle complete event
                        // Edit Preferences and update facebook acess_token
                        SharedPreferences.Editor editor = mPrefs.edit();
                        editor.putString("access_token",
                                facebook.getAccessToken());
                        editor.putLong("access_expires",
                                facebook.getAccessExpires());

                        try {
                            editor.putString("access_expires",
                                    facebook.request("me"));

                            try {
                                JSONObject json = Util.parseJson(facebook
                                        .request("me", values));
                                String userId = json.getString("id");

                            } catch (FacebookError e) {
                                e.printStackTrace();
                            } catch (JSONException e) {
                                e.printStackTrace();
                            }

                            Log.i(TAG, facebook.request("me"));
                        } catch (MalformedURLException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }

                        editor.commit();
                    }

                    @Override
                    public void onError(DialogError error) {
                        // Function to handle error
                        Log.wtf(TAG, error);
                    }

                    @Override
                    public void onFacebookError(FacebookError fberror) {
                        // Function to handle Facebook errors
                        Log.wtf(TAG, fberror);
                    }
                });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:20:28.303

当前用户的用户信息有一个 api 调用，其中将包括他们的 id：

[https://graph.facebook.com/me](https://graph.facebook.com/me)

您可以通过以下方式访问该网址：

```
facebook.request("me") 
```

认证后。

它返回一个 json 用户对象，您可以从以下位置解析并获取 id：

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

# bash - 从 linux shell 中的文本文件生成二进制文件

> ID：12550702
> 
> 赞同：1
> 
> 时间：2012-09-23T08:02:57.980
> 
> 标签：bash

我有一个文本文件 a.txt，其中每一行由 2 个数字组成，如下所示：

```
1234 5678 
```

现在我想将a.txt的内容从文本转换为二进制，这意味着数字将不再是文本，而是二进制表示，可以通过`od -tu4`.

我怎样才能做到这一点`bash`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T09:05:02.763

这是一个使用 AWK 执行您想要的操作的 shell 脚本。将以下内容放入文件（hex2bin.awk）：

```
#!/usr/bin/awk -f
function dec2bin(n){
  for(i=0;i < 4; i++){
    printf("%c", n % 256);
    n = int(n / 256);
  }
}
{ dec2bin($1); dec2bin($2);} 
```

使文件可执行 ( `chmod a+x hex2bin.awk`)

然后运行它：

```
./hex2bin.awk a.txt | od -tu4
0000000              1234            5678                                
0000010 
```

这会读入以 ASCII 表示的两列十进制数字，并将它们打印成 32 位小端二进制。

# java - 我创建了一个带有套接字的 Java 服务器，如何打印到所有套接字？

> ID：12550712
> 
> 赞同：8
> 
> 时间：2012-09-23T08:05:10.117
> 
> 标签：java, sockets, serversocket, printwriter

我已经尝试了一段时间，我希望多个客户端同时接收多个输入。
有一个问题，如果一个客户端说“print2all Hi”，我希望服务器向所有客户端打印“Hi”。
我知道如何处理它来打印它，只是打印给所有客户就是问题所在。

这是我到目前为止所拥有的。
**服务器**

```
try{
    try{
        server = new ServerSocket(25565);
    } catch (Exception e){
        e.printStackTrace();
    }
    while (isListening){
        new SocketThread(server.accept()).start();
    }
    server.close();
} catch (Exception e){
    e.printStackTrace();
} 
```

**套接字线程**

```
try {
    PrintWriter out = new PrintWriter(socket.getOutputStream(), true);
    BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    String inputLine, outputLine;
    Processor kkp = new Processor();
    out.println("Hi!");

    while ((inputLine = in.readLine()) != null) {
        outputLine = kkp.Proccess(inputLine,this.socket);
        out.println(outputLine);
    }
    out.close();
    in.close();
    socket.close();

} catch (IOException e) {
    e.printStackTrace();
} 
```

**客户**

```
 Processor p = new Processor();
            socket = new Socket("localhost",25565);
            out = new PrintWriter(socket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));                
            BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
            String fromServer;
            String fromUser;
            out.println("print2all Hi")            
            socket.close(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T08:08:34.940

首先，您需要跟踪所有连接的客户端：

```
final List<SocketThread> clients = new ArrayList<>();

while (isListening){
    SocketThread client = new SocketThread(server.accept()).start();
    clients.add(client);
} 
```

如果一个客户端接收到这样的列表，`"print2all Hi"`它会简单地遍历所有列表`clients`并将消息发送给每个客户端。为此，您很可能必须公开一些`SocketThread`访问客户端套接字的方法。这意味着您必须将`out`变量更改为字段。

另一种方法是保留客户端套接字列表。但这严重破坏了封装。此外，如果套接字直接暴露，您可能会遇到讨厌的 IO/线程安全问题。最好将它们隐藏在某些 API（如`SocketThread`方法）后面并在内部正确进行同步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T08:19:39.503

您正在寻找的完整实现。

**服务器**

```
package tcpserver;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.ArrayList;
import java.util.List;
import java.util.StringTokenizer;
import java.util.logging.Level;
import java.util.logging.Logger;

public class TCPServer {

    private int serverPort = 25565;
    private ServerSocket serverSocket;
    private List<ConnectionService> connections = new ArrayList<ConnectionService>();

    public TCPServer() {
        try {
            serverSocket = new ServerSocket(serverPort);
            System.out.println("Waiting...");
            while (true) {
                Socket socket = serverSocket.accept();
                System.out.println("Connected: " + socket);
                ConnectionService service = new ConnectionService(socket);
                service.start();
            }

        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    public static void main(String[] args) {
        new TCPServer();
    }

    class ConnectionService extends Thread {

        private Socket socket;
        private BufferedReader inputReader;
        private PrintWriter outputWriter;
        //private String username;

        public ConnectionService(Socket socket) {
            this.socket = socket;
            try {
                inputReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                outputWriter = new PrintWriter(socket.getOutputStream(), true);
            } catch (IOException e) {
                System.out.println(e.getMessage());
            }
        }

        @Override
        public void run() {
            while (true) {
                try {
                    String receivedMessage = inputReader.readLine();
                    System.out.println(receivedMessage);
                    StringTokenizer stoken = new StringTokenizer(receivedMessage);
                    String fargument = stoken.nextToken();
                    if (fargument.equals("print2all")) {
                        this.sendToAnyone(stoken.nextToken());
                    }
                } catch (IOException ex) {
                    Logger.getLogger(TCPServer.class.getName()).log(Level.SEVERE, null, ex);
                } catch (NullPointerException e) {
                    System.out.println(e.getMessage());
                } finally {
                    outputWriter.close();
                }

            }
        }

        protected void sendMessage(String message) {
            outputWriter.println(message);
        }

        private void sendToAnyone(String message) {

            for (ConnectionService connection : connections) {
                connection.sendMessage(message);
            }
        }
    }
} 
```

**客户**

```
package tcpclient;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;

public class tcpClient extends javax.swing.JFrame {

    private Socket socket;
    private BufferedReader inputReader;
    private PrintWriter outputWriter;

    public tcpClient() {
        connectToServer();
    }

    private void connectToServer() {
        try {
            socket = new Socket(InetAddress.getByName("localhost"), 25565);
            inputReader = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            outputWriter = new PrintWriter(socket.getOutputStream(), true);
        } catch (IOException e) {
            e.printStackTrace();
        }

        new Thread() {
            @Override
            public void run() {
                receiveData();
            }
        }.start();
    }

    private void receiveData() {
        try {
            while (true) {
                System.out.println(inputReader.readLine());
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public void sendData(String messageToSend) {
        outputWriter.println(messageToSend);
    }

    public void closeSocket() {
        if (socket != null) {
            try {
                socket.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                tcpClient client = new tcpClient();
                client.sendData("print2all Hi");
                client.closeSocket();
            }
        });
    }
} 
```

# c# - 在 C# 中循环一个进程

> ID：12550714
> 
> 赞同：0
> 
> 时间：2012-09-23T08:05:36.823
> 
> 标签：c#, exception, loops

我对循环很熟悉，但循环一个过程让我感到困惑：

如果用户输入一个*非整数*，我希望再次提示“你的年龄”这个问题，直到用户输入一个*整数*。

```
 Console.WriteLine("Your age:");
 string line = Console.ReadLine();
 if (!int.TryParse(line, out age))
 {
     Console.WriteLine("{0} is not an integer", line);

 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-23T08:07:36.847

尝试

```
int age;

Console.WriteLine("Your age:");
string line = Console.ReadLine();
while (!int.TryParse(line, out age))
{
    Console.WriteLine("{0} is not an integer", line);
    Console.WriteLine("Your age:");
    line = Console.ReadLine();
} 
```

我不确定*循环进程*是什么意思。您正在循环获取用户输入并尝试解析该输入。

您主要可以使用*while*、*do*、*for*或 (gulp!don't do it!) *goto*来完成此操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-23T08:09:32.870

试试这个，它会让*“你的年龄：”*重复，直到你有正确的输入：

```
int age;
while(true)
{
    Console.WriteLine("Your age:");
    string line = Console.ReadLine();

    if (!int.TryParse(line, out age))
       Console.WriteLine("{0} is not an integer", line);

    else break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T10:00:35.370

我已经使用了这种方法。我不知道这是否会降低性能，但我发现使用正则表达式很酷。让我知道这是否适合你

将此添加到顶部

```
using System.Text.RegularExpressions; 
```

然后使用以下内容：

```
 bool bEnteredNumberNotValid = true;
            while (bEnteredNumberNotValid)
            {
                Console.WriteLine("Your age:");
                string sAge = Console.ReadLine();

                string regString = "(^[0-9]+$)"; //REGEX FOR ONLY NUMBERS

                Regex regVal = new Regex(regString, RegexOptions.IgnoreCase | RegexOptions.Singleline); //REGEX ENGINE
                Match matVal = regVal.Match(sAge); //REGEX MATCH WITH THE INPUT
                if (!matVal.Success) // IF THERE IS NO MATCH, SHOW THE BELOW
                {
                    Console.WriteLine("{0} is not an integer", sAge);
                }
                else // ELSE SET bEnteredNumberNotValid FALSE AND GET OUT.
                {
                    bEnteredNumberNotValid = false;
                    Console.WriteLine("Press any key to continue...");
                    Console.ReadLine();
                }
            } 
```

输出！

[单击此处查看上述程序的输出](http://i.stack.imgur.com/e3bC5.png)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T08:08:08.833

如果我理解你的问题，你为什么不做

```
Console.WriteLine("Your age:");
string line = Console.ReadLine();
while (!int.TryParse(line, out age))
{
    Console.WriteLine("{0} is not an integer", line);
    Console.WriteLine("Your age:");
    line = Console.ReadLine();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T08:11:42.103

我只知道递归函数来实现这一点，但不建议这样做，因为它容易出错并且使程序过于复杂。

**在班上**

```
 string line;
 int age = 0; 
```

**在主要**

```
 Console.WriteLine("Your age:");   
 line  = Console.ReadLine();  
 checkFunction(); 
```

**声明一个方法**

```
public int checkFunction()
{
  if (!int.TryParse(line, out age))
  {
    Console.WriteLine("{0} is not an integer", line);
    line = Console.ReadLine();
    return checkFunction();
  }
  else
  {
    return age;
  }
} 
```

# python - 当数据通过 rpy2 时，lmtest/lrtest 抛出 data.frame 错误

> ID：12550718
> 
> 赞同：1
> 
> 时间：2012-09-23T08:06:19.420
> 
> 标签：python, r, rpy2

我有一个错误，只有当我通过 rpy2 从用户定义的函数调用 lrtest（来自 lmtest 包）时才会发生错误。

回复：

```
continuous.test <- function(dat) {
  require('lmtest')
  options(warn=-1)
  model <- lm(formula='pheno ~ .', data=dat)
  anova <- lrtest(model,'interaction')
  pval  <- anova$"Pr(>Chisq)"[2]
} 
```

当我从 R 解释器调用这个函数时，一切运行正常。但是，从以下 python 代码片段调用时收到错误消息。请注意，这个特定的 python 文件成功地对 rpy2 进行了许多其他调用。

Python：

```
...
kway_dat = R.DataFrame(dataframe) # this is a valid dataframe, it's used in other calls.
...
R.r("source('/path/to/user/defined/file/perm_test.r')")
continuous_test = R.r['continuous.test']
pval = continuous_test(kway_dat) 
```

错误：

```
Error in is.data.frame(data) : object 'dat' not found
Traceback (most recent call last):
  File "./test_r_.py", line 83, in <module>
    pval = continuous_test(kway_dat)
  File "/usr/lib/python2.6/site-packages/rpy2-2.2.6dev_20120806-py2.6-linux-x86_64.egg/rpy2/robjects/functions.py", line 82, in __call__
    return super(SignatureTranslatedFunction, self).__call__(*args, **kwargs)
  File "/usr/lib/python2.6/site-packages/rpy2-2.2.6dev_20120806-py2.6-linux-x86_64.egg/rpy2/robjects/functions.py", line 34, in __call__
    res = super(Function, self).__call__(*new_args, **new_kwargs)
rpy2.rinterface.RRuntimeError: Error in is.data.frame(data) : object 'dat' not found 
```

故障排除：

*   我已经在 R 中测试了代码，一切正常。
*   我通过 rpy2 将数据帧从 python 传递到 R 并从 R 函数调用 is.data.frame(dat)，它返回 true，所以问题出在 lmtest 或 lrtest + rpy2 上。

任何帮助都会很棒。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T19:12:07.190

提供一个独立的示例会更容易（因此可以准确地重现您正在经历的事情）。

一个可能的答案仍然是：您可能想要检查文件的内容 `/path/to/user/defined/file/perm_test.r`是否真的是您认为的那样。

我还为一个独立的示例添加了一个存根：

```
r_code = """
  require('lmtest')
  options(warn=-1)
  continuous.test <- function(dat) {
    model <- lm(formula='pheno ~ .', data=dat)
    anova <- lmtest::lrtest(model,'interaction')
    pval  <- anova$"Pr(>Chisq)"[2]
  }
"""

from rpy2.robjects import packages
my_r_pack = packages.SignatureTranslatedAnonymousPackage(r_code, "my_r_pack")

# [build a demo kway_dat here]

my_r_pack.continuous_test(kway_dat) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T22:52:44.390

**找到答案**

问题是 lrtest 更新模型的内部调用。一旦进入 lrtest，dat 就超出了范围。通过手动更新模型并使用 lrtest 的替代调用 lrtest(model0,model1)，可以完全避免该问题。

感谢Achim Zeileis，他的回复非常迅速。

# objective-c - 应用程序、辅助工具通信

> ID：12550730
> 
> 赞同：0
> 
> 时间：2012-09-23T08:08:57.813
> 
> 标签：objective-c, xcode, macos, cocoa

我正在开发一个 OS X 桌面应用程序。我想与它捆绑一个帮助工具。我正在考虑使用`SMJobSubmit`提升权限启动一个帮助程序。（该工具基本上会`sudo`调用。）

如何将工具的控制台输出发送回我的主应用程序？

我知道`NSTask`我可以`NSPipe`用来重定向控制台输出。但是，由于我认为我不能使用`NSTask`提升的权限，所以我正在使用`SMJobSubmit`。

（是的，我已经处理了授权部分。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-18T21:28:41.060

我认为，据我所知，您应该使用 XPC 连接与您的帮助程序进行通信。不要使用 SMJobSubmit（因为它已被弃用），而是使用 SMJobBless 将您的帮助工具安装为以提升权限运行的 LaunchD 作业。使用 Mac OS X 应用程序中的 XPC 连接与其通信，以调用执行逻辑的函数调用，捕获输出并回复主应用程序。如果你愿意继续这个想法，下面来自 Apple 的示例代码将引导你完成。

[https://developer.apple.com/library/mac/samplecode/EvenBetterAuthorizationSample/Listings/Read_Me_About_EvenBetterAuthorizationSample_txt.html](https://developer.apple.com/library/mac/samplecode/EvenBetterAuthorizationSample/Listings/Read_Me_About_EvenBetterAuthorizationSample_txt.html)

# php - php中的搜索键

> ID：12550731
> 
> 赞同：1
> 
> 时间：2012-09-23T08:09:02.850
> 
> 标签：php

我想在 php 中搜索包含该单词的数组的键。

例子 ：

```
$test = array("hello"=>"value1","hello5"=>"value","testinghello"=>"test"); 
```

我想像这样使用它。

```
if(!empty($test[key_here_which_contains_hello])) 
```

我想显示一个包含 hello 键的数组的值。在该示例中，将显示所有值，因为所有键都有“hello”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:11:54.677

```
foreach ($test as $key => $val) {
    if (strpos($key, 'hello') !== false) {
        print $val."\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:13:51.673

使用`strpos`这样的功能：

```
foreach($test as $key=>$value){
   if(strpos($key,'helo')){
      echo $value;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T08:15:54.830

```
$test = array("hello"=>"value1","hello5"=>"value","testinghello"=>"test");
$keys = array_keys( $test );
$searchkey = array_search( 'hello', $keys, true ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T08:24:56.080

PHP 得到了函数[array_key_exists](http://php.net/manual/en/function.array-key-exists.php)。我想这就是你要找的东西：

```
<?php
$search_array = array('first' => 1, 'second' => 4);

if (array_key_exists('first', $search_array)) {
    echo $search_array['first'];
}
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-23T08:29:30.823

这可以通过

```
foreach($test as $key=>$value){
   if(strpos('hello',$key)){
      echo $value;
   }
} 
```

或者

```
if (array_key_exists('hello', $test)) { //array_key_exists ( $key , array $search )
    echo "hello";
} 
```

# mysql - 过高的 MySQL innodb 缓冲池大小会导致内核交换守护进程 (kswapd0) 的高负载吗？

> ID：12550742
> 
> 赞同：1
> 
> 时间：2012-09-23T08:10:20.113
> 
> 标签：mysql, web-services, linux-kernel, kernel

分析和避免由内核交换守护程序引起的高负载出现的最佳实践是什么？缓冲池大小等的MySQL配置是否有直接影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T12:05:53.233

在稳定的 Linux 系统中，几乎不应该使用交换文件，一旦使用它，您的系统就会变得缓慢。`oom_killer`它的存在有三个原因，过度使用会计（现在不再适用），将未使用的代码段交换到磁盘以为磁盘缓冲区腾出更多空间，并在开始前内存不足时给您更多警告终止您的应用程序。

MySQL 出于各种原因绕过了内核的内置磁盘缓冲。当它启动时，它会分配缓冲池并从那里的磁盘缓存页面。当缓冲池已满时，它会删除一些干净的页面，并写出一些脏页以腾出更多空间。

如果您将缓冲池设置为大于可用的 RAM 量，那么当 RAM 填满时，内核将开始将页面换出到交换文件。当缓冲池填满时，MySQL 将开始将页面换出到数据库文件。这将导致抖动并且通常性能不佳，因为您的所有 I/O 操作都将乘以（至少）三倍。

这很可能是您所看到的，我建议您减小缓冲池的大小，使其适合您的空闲 RAM。

# c# - __DynamicallyInvokable 属性有什么用？

> ID：12550749
> 
> 赞同：191
> 
> 时间：2012-09-23T08:12:04.570
> 
> 标签：c#, dynamic-invoke

在DotPeek`System.Linq.Enumerable`中查看时，我注意到某些方法带有`[__DynamicallyInvokable]`属性。

这个属性起什么作用？它是由 DotPeek 添加的还是起到了其他作用，也许会告知编译器如何最好地优化方法？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-09-23T11:44:41.017

它没有记录，但它看起来像是 .NET 4.5 中的优化之一。它似乎用于启动反射类型信息缓存，从而使常见框架类型上的后续反射代码运行得更快。System.Reflection.Assembly.cs，RuntimeAssembly.Flags 属性的参考源中有关于它的评论：

```
 // Each blessed API will be annotated with a "__DynamicallyInvokableAttribute".
 // This "__DynamicallyInvokableAttribute" is a type defined in its own assembly.
 // So the ctor is always a MethodDef and the type a TypeDef.
 // We cache this ctor MethodDef token for faster custom attribute lookup.
 // If this attribute type doesn't exist in the assembly, it means the assembly
 // doesn't contain any blessed APIs.
 Type invocableAttribute = GetType("__DynamicallyInvokableAttribute", false);
 if (invocableAttribute != null)
 {
     Contract.Assert(((MetadataToken)invocableAttribute.MetadataToken).IsTypeDef);

     ConstructorInfo ctor = invocableAttribute.GetConstructor(Type.EmptyTypes);
     Contract.Assert(ctor != null);

     int token = ctor.MetadataToken;
     Contract.Assert(((MetadataToken)token).IsMethodDef);

     flags |= (ASSEMBLY_FLAGS)token & ASSEMBLY_FLAGS.ASSEMBLY_FLAGS_TOKEN_MASK;
 } 
```

没有进一步的提示，“blessed API”可能意味着什么。尽管从上下文中可以清楚地看出，这仅适用于框架本身的类型。应该在某处有额外的代码来检查应用于类型和方法的属性。不知道它在哪里，但考虑到它需要查看所有 .NET 类型才能进行缓存，我只能想到 Ngen.exe。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-10-17T10:06:15.383

我发现它在`Runtime*Info.IsNonW8PFrameworkAPI()`内部方法套件中使用。将此属性放置在成员上会使 IsNonW8PFrameworkAPI() 返回`false`它，从而使该成员在 WinRT 应用程序中可用并关闭`The API '...' cannot be used on the current platform.`异常。

如果探查器编写者希望在 WinRT 下访问它们，则探查器编写者应将此属性放在由探查器发出的成员上并放入框架程序集中。

# java - JavaScript 不适用于 ICS

> ID：12550756
> 
> 赞同：2
> 
> 时间：2012-09-23T08:13:22.820
> 
> 标签：java, javascript, android, android-webview, epub

我正在为使用 JavaScript 的公司开发 EPUB 阅读器，该应用程序在 Android 2.2 上运行良好，但是当我在 ICS 和 HoneyCom 上尝试时，JavaScript 无法正常运行。我遇到的第一个问题，`WebView`不加载 JS 文件（`Unknown Error -6`），所以我使用了这个解决方案：

```
@TargetApi(11)
@Override
public WebResourceResponse shouldInterceptRequest(WebView view, String url) {
    Log.d("shouldInterceptRequest", url);

    InputStream stream = inputStreamForAndroidResource(url);
    if (stream != null) {
        return new WebResourceResponse("text/javascript", "utf-8", stream);
    }
    return super.shouldInterceptRequest(view, url);
}

private InputStream inputStreamForAndroidResource(String url) {
    final String ANDROID_ASSET = "file:///android_asset/";

    if (url.contains(ANDROID_ASSET)) {
        // url = url.replaceFirst(ANDROID_ASSET, "");
        String[] f = url.split("/");
        url = "epub/"
                + f[f.length - 1]
                        .substring(0, f[f.length - 1].indexOf("'"));
        try {
            AssetManager assets = mActivity.getAssets();
            Uri uri = Uri.parse(url);
            return assets
                    .open(uri.getPath(), AssetManager.ACCESS_STREAMING);
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return null;
} 
```

现在我没有这个错误，但JS仍然不起作用。有没有人有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T03:22:38.880

the only solution I found is the same as the question....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T11:35:35.860

我在这里说的可能是一件愚蠢的事情。但是已经很晚了，我累了...

您是否尝试过`Javascript`在 中启用`WebView`？

```
WebSettings webSettings = myWebView.getSettings();
webSettings.setJavaScriptEnabled(true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T13:26:18.843

您也可以在 manifest.xml 的应用程序标签中添加一个属性 android:hardwareAccelerated="true" 您可以在创建时添加一些设置

```
wvMain.getSettings().setSupportZoom(true);
      wvMain.getSettings().setBuiltInZoomControls(true);
      wvMain.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
      wvMain.setScrollbarFadingEnabled(true);
      wvMain.getSettings().setLoadsImagesAutomatically(true);
      wvMain.getSettings().setJavaScriptEnabled(true);
      wvMain.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
       wvMain.getSettings().setPluginsEnabled(true);
         wvMain.getSettings().setSupportZoom(false);     

         wvMain.getSettings().setCacheMode(wvMain.getSettings().LOAD_NO_CACHE);
         webSettings8.setPluginState(WebSettings.PluginState.ON);
         wvMain.setWebViewClient(new WebViewClient());
         wvMain.addJavascriptInterface(this, "Android");
         wvMain.getSettings().setSupportMultipleWindows(true);
         wvMain.getSettings().setPluginsEnabled(true);
         wvMain.getSettings().setUseWideViewPort(true);
         wvMain.getSettings().setLoadWithOverviewMode(true); 
```

我希望这有帮助。但请注意，硬件加速属性在 3.0 之后支持。

# javascript - 2 JS函数同名冲突

> ID：12550760
> 
> 赞同：8
> 
> 时间：2012-09-23T08:15:48.183
> 
> 标签：javascript, jquery, jquery-ui, button, twitter-bootstrap

# 短的

在同一页面上使用 2 个库：jQuery UI 和 Twitter Bootstrap：

*   jQuery UI 对我来说非常重要，因为几乎所有的 UI 都是基于它构建的
*   Twitter Bootstrap 仅适用于[具有下拉菜单](http://www.jqueryui.com/demos/button/#splitbutton)功能的拆分按钮。

现在，问题是两个库都有相同的命名函数，它们相互冲突：

# 详细的

***这是 jQuery UI 和 Twitter Bootstrap 按钮功能之间冲突的示例***

请进入[本网站](http://ecruting.tisoft.me/)。按桌子上的推荐按钮

![在此处输入图像描述](../Images/f01104f86eb936b5372d78039d0a140f.png)

将出现 jQuery UI 模式窗口。我在模态窗口中使用[了 jquery ui 组合框。](http://jqueryui.com/demos/autocomplete/#combobox)[问题是， jquery ui 组合框](http://jqueryui.com/demos/autocomplete/#combobox)演示中没有向下箭头按钮。

![在此处输入图像描述](../Images/f69b4bd54e046e5550c87c6096cbfb82.png)

我试图找出导致问题的原因：查看组合框代码，当它调用 .button() 时，它进入 bootstrap.min.js，而不是 jqui.js。

如您所见，这是 2 个 js 库之间冲突的证明。

顺便说一句，这是[jsFiddle](http://jsfiddle.net/sBXRn/)，它在没有引导程序的情况下运行良好。

# 问题

[我有多种方法来解决这个冲突问题（没有触摸网站的功能）我需要获得与带有下拉菜单](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)的拆分按钮完全相同的功能（Twitter Bootstrap）：

*   如果可能在 jQuery-UI 中（类似[这样](http://www.jqueryui.com/demos/button/#splitbutton)，但带有下拉菜单）
*   else 仅在 CSS + HTML 中

并摆脱 Twitter Bootstrap。任何解决方案都非常感谢。我已经准备好为好的答案提供 200 次代表（作为赏金）。提前谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-22T08:41:17.790

当前版本的引导程序 (v2.2.2) 现在有一个 noConflict 选项。只需在您的 bootstrap 和 jquery 脚本标记之后但在任何使用该`button()`函数之前将其插入某个位置。

```
<script type='text/javascript'>
    $.fn.bootstrapBtn = $.fn.button.noConflict();
</script> 
```

或者，您可以使用`$(document).ready(handler)`，但您仍然必须确保在`button()`调用之前发生替换。

一旦执行了那行代码，`button()`它将成为 JqueryUI 的按钮，`bootstrapBtn()`并将成为 Bootstrap 的版本。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-23T10:51:03.557

要修复 Bootstrap 和 jQuery UI 函数之间的冲突，请重命名其中之一：

```
<script type="text/javascript" src="bootstrap.min.js"></script>
<script type="text/javascript">
    $.fn.bsbutton = $.fn.button;
</script>
<script type="text/javascript" src="jquery-ui.min.js"></script> 
```

然后你可以随意调用每个函数：

```
<script type="text/javascript">
    $(".button-one").button()   // jQueryUI button
    $(".button-two").bsbutton()  // Bootstrap button
</script> 
```

您可以将此技术用于您需要的任何功能。

记住顺序`include A -> rename A -> include B`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T09:33:21.277

如果您只使用 Twitter Bootstrap 的下拉插件，则不需要该`.button()`插件。

转到[自定义引导页面](http://twitter.github.com/bootstrap/customize.html#plugins)并取消选择所有 jQuery 插件，然后仅选择下拉菜单之一。如果需要，您也可以取消选择某些 CSS。

* * *

如果您需要这两种实现（Twitter Bootstrap 和 jQuery UI），您可以将所有内容重命名`.button`为类似[文件](https://github.com/twitter/bootstrap/blob/v2.1.1/js/bootstrap-button.js)`.bsButton`中[的`bootstrap-button.js`](https://github.com/twitter/bootstrap/blob/v2.1.1/js/bootstrap-button.js)名称（或在非缩小版本中找到此部分） - 未经测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-12T05:17:07.690

所有其他答案都修复了 jQuery UI 按钮和引导按钮之间的冲突，但您不能使用引导数据 API 来重命名`button()`函数。只能手动使用新命名的`bootstrapBtn()`函数。

我找到了解决方案：

*   在文件`(\$[.\w]+\.)button`中查找并替换所有出现的正则表达式。`\1btn``bootstrap.js`
*   或者使用这个`sed`脚本：

    ```
    #!/bin/bash
    # Change bootstrap3 $.fn.button() function to $.fn.btn() for no conflict with jQuery UI
    sed "s/\(\$[[:alnum:]._]\+\.\)button/\1btn/g" bootstrap/js/bootstrap.js > bootstrap/js/bootstrap.btn.js
    sed "s/\(fn\.\)button/\1btn/g" bootstrap/js/bootstrap.min.js | sed "s/button\((\)/btn\1/g" > bootstrap/js/bootstrap.btn.min.js 
    ```

之后，您可以使用 bootstrap data-api 进行按钮绑定，也可以手动使用`btn()`函数代替`button()`Bootstrap，同时仍然使用 jQuery UI`button()`函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-29T15:44:22.647

我建议进行自定义 jQueryUI 或 Bootstrap 构建——两者都在网站上提供了这种可能性。

我使用带有核心、效果、交互的 jQueryUI 自定义构建，但没有小部件，这通常会导致冲突。

# swing - 如何制作自己的 Scala UI 事件

> ID：12550765
> 
> 赞同：2
> 
> 时间：2012-09-23T08:16:53.113
> 
> 标签：swing, events, scala, scala-swing

我目前正在开发我的第一个更大的 Scala Swing[项目](https://github.com/scan/MonMaker)，并且我已经编写了[自己的组件](https://github.com/scan/MonMaker/blob/master/src/main/scala/maker/gui/tiles/TileSetPane.scala)作为瓦片地图编辑器的一部分，用户可以在其中选择瓦片。

就像组合框在选择另一个元素时发出某种事件时，我希望这个组件用自己的案例类执行相同的操作。我还没有找到任何关于这个主题的文章或教程。

进一步注意，我怎样才能编写一个发布子组件事件的组件。这样它就可以通过它们到达。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:11:06.633

也许看看其他扩展 scala-swing 的项目。例如有[ScalaSwingContrib](https://github.com/benhutchison/ScalaSwingContrib)；我认为查看[`ColorChooser`](https://github.com/benhutchison/ScalaSwingContrib/blob/master/src/main/scala/scalaswingcontrib/ColorChooser.scala)组件和关联[`ColorChooserEvent`](https://github.com/benhutchison/ScalaSwingContrib/blob/master/src/main/scala/scalaswingcontrib/event/ColorChooserEvent.scala)是一个很好的起点，因为这是一个相当简单的组件。

```
import javax.{swing => js}
import js.{event => jse}
import java.awt.Color
import scala.swing._
import event.Event

class ColorChooser(initialColor: Color) extends Component {
  ...
  override lazy val peer: js.JColorChooser = 
    new js.JColorChooser(initialColor) with SuperMixin

  peer.getSelectionModel().addChangeListener(new jse.ChangeListener {
    def stateChanged(e: jse.ChangeEvent) {
      publish( new ColorChangeEvent(peer.getColor))
    }
  })
}

case class ColorChangeEvent(c: Color) extends Event 
```

# php - 找不到类 ZipArchive（从哪里获得预构建的 zip 库）

> ID：12550767
> 
> 赞同：0
> 
> 时间：2012-09-23T08:17:22.810
> 
> 标签：php, exception, ziparchive

首先检查这些图像：http: [//imgur.com/a/TOVbU](http://imgur.com/a/TOVbU)

我在哪里可以得到 zip dll。我尝试下载它的源代码，但它需要`php.h`.

我现在不想乱用 C，因为我在 PHP 中有很多东西。

有没有什么地方，显然是一个值得信赖的来源，我可以得到这个库？

请注意，在我的`phpinfo()`页面中它只显示 zlib。我的**ext**文件夹中有**php_zip.dll 。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:52:54.517

修改后需要重启网络服务器`php.ini`。只有设置更改才会生效。

* * *

屏幕截图显示“zlib”，它与“Zip”不同。还要确保您正在编辑正确的`php.ini`文件。CLI 和 Webserver PHP 进程可能使用不同的进程。启用`display_startup_errors`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T03:33:22.630

我通过使用此处找到的纯 php 库替代解决了此问题：[http ://www.phpconcept.net/pclzip/pclzip-downloads](http://www.phpconcept.net/pclzip/pclzip-downloads)

万一有人遇到同样的问题。该网站也有一些不错的图书馆。**

# asp.net - 如何限制未登录/未经授权的用户在 ASP.NET 中查看网页

> ID：12550768
> 
> 赞同：1
> 
> 时间：2012-09-23T08:17:26.743
> 
> 标签：asp.net, sql-server-2008, authentication, authorization

我创建了一些 Web 表单，在显示其他 Web 表单之前，我需要检查用户是否经过身份验证。所有用户都可以访问`Default.aspx`和`About.aspx`页面。我有三种类型的用户，即- `Admin,User and Super User`。此外，我将身份验证详细信息保存在自己的 SQL 服务器数据库中。

我怎样才能做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:18:55.833

首先建立会员和角色提供者。有关于它的完整故事。我会在这里提供帮助。

这是 SqlMembershipProvider 的链接（您可以选择的选项之一）：http: [//msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx)

这是指向 SqlRoleProvider 的链接（同样只有您可以选择的选项之一）：： http: [//msdn.microsoft.com/en-us/library/system.web.security.sqlroleprovider.aspx](http://msdn.microsoft.com/en-us/library/system.web.security.sqlroleprovider.aspx)

建立此设置后，您可以在文件夹级别限制用户/角色访问。将此代码放入 web.config （在配置标签内）：

```
 <location path="AdminPages">
    <system.web>
      <authorization>
        <allow roles="Administrator"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location>
  <location path="UserPages">
    <system.web>
      <authorization>
        <allow roles="Administrator,User"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location> 
```

这里稍微解释一下。根文件夹“AdminPages”将只允许“管理员”角色的用户使用。角色“管理员”和“用户”的用户的根文件夹“UserPages”。在这两种情况下，都将不允许未知用户访问文件夹。这就是你所需要的。对此的替代方法是创建从 Page 继承的类，然后在那里处理页面访问......但是我不会那样做。

# ios - AVAudioPlayer 无法从 url 播放

> ID：12550773
> 
> 赞同：0
> 
> 时间：2012-09-23T08:18:04.053
> 
> 标签：ios, xcode, avaudioplayer

我有一个小问题 - 当我尝试从本地主机播放音频时，它崩溃了。
这是代码，它经常崩溃。

`stuff`是一个字典/可变 URL 数组

```
 stuff = [json objectAtIndex:indexPath.row];

 songlink = [NSURL URLWithString:[stuff objectForKey:@"Link"]];
    NSData *songdata = [NSData dataWithContentsOfURL:[NSURL URLWithString:[stuff objectForKey:@"Link"]]];
    jam = [[AVAudioPlayer alloc] initWithData:songdata error:nil];
    jam.delegate = self;
    [jam play]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:02:27.330

您必须使用“valueForKey”而不是 objectForKey。

其他要考虑的事情。

确保您的 url 具有以 http 开头的完全限定 url，并且您不能使用 localhost 作为主机名。

您应该始终使用以下网址：

```
http://10.10.10.10/mysong.mp3 
```

如果您的网址包含名称中的空格，例如“my song.mp3”，也很容易修复：

```
NSString *stringUrl = [stuff valueForKey:@"Link"];
NSString *newUrl = [stringUrl stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
...[NSURL URLWithString:newUrl] 
```

# ms-word - 如何更改word文件的创建日期

> ID：12550774
> 
> 赞同：1
> 
> 时间：2012-09-23T08:18:11.027
> 
> 标签：ms-word

我想知道是否可以更改 word 文件的创建日期。例如，我在 2012 年创建了我的 word 文件，但我想显示它是在 2003 年创建的。这可能吗？如果是，你能解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:27:41.447

要更改访问时间，请使用 time stomp -

[http://www.offensive-security.com/metasploit-unleashed/Timestomp](http://www.offensive-security.com/metasploit-unleashed/Timestomp)

我不知道你为什么要这样做？以上是反恶意软件和道德黑客工具以及渗透测试工具。

# linux - 只有root才能登录。可能的原因？

> ID：12550779
> 
> 赞同：1
> 
> 时间：2012-09-23T08:20:17.080
> 
> 标签：linux, embedded, arm

我有一个 FriendlyARM Mini2440 ARM 板，我曾经`multistrap`为它创建一个基本的 debian 6.0 root fs。内核是来自 FriendlyARM 网站的官方 linux-2.6.32.2 树。一切都很好，除了只有 root 可以登录。其他用户也成功登录，但立即注销，并且永远不会进入 shell 提示符。我找不到原因。

也许串行终端设备权限？`/dev/s3c2410_serial0`是串口终端设备文件，属于`root:tty`并有600权限，但是即使有udev规则也不能修改权限。

有什么想法吗？

编辑：这是`/etc/passwd`

```
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/bin/sh
bin:x:2:2:bin:/bin:/bin/sh
sys:x:3:3:sys:/dev:/bin/sh
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/bin/sh
man:x:6:12:man:/var/cache/man:/bin/sh
lp:x:7:7:lp:/var/spool/lpd:/bin/sh
mail:x:8:8:mail:/var/mail:/bin/sh
news:x:9:9:news:/var/spool/news:/bin/sh
uucp:x:10:10:uucp:/var/spool/uucp:/bin/sh
proxy:x:13:13:proxy:/bin:/bin/sh
www-data:x:33:33:www-data:/var/www:/bin/sh
backup:x:34:34:backup:/var/backups:/bin/sh
list:x:38:38:Mailing List Manager:/var/list:/bin/sh
irc:x:39:39:ircd:/var/run/ircd:/bin/sh
gnats:x:41:41:Gnats Bug-Reporting System (admin):/var/lib/gnats:/bin/sh
nobody:x:65534:65534:nobody:/nonexistent:/bin/sh
libuuid:x:100:101::/var/lib/libuuid:/bin/sh
ntp:x:101:102::/home/ntp:/bin/false
dnsmasq:x:102:65534:dnsmasq,,,:/var/lib/misc:/bin/false
stunnel4:x:103:105::/var/run/stunnel4:/bin/false
sshd:x:104:65534::/var/run/sshd:/usr/sbin/nologin
op:x:1000:1000:,,,:/home/op:/bin/bash
op2:x:1001:1001:,,,:/home/op2:/bin/bash 
```

`op`并且`op2`是我通过`adduser`命令创建的用户帐户。

我还将这些用户添加到`root`、`tty`、和组`dialout`，但仍然没有运气。`users``ssh`

从 ssh 和串行终端，`op`用户成功登录，`/etc/motd`被打印，“Last login”行被打印，然后它干净地退出。

已解决（有点）

对不起，我找到了。我已将`vm.mmap_min_addr`内核变量从默认值 4096 更改为 65536。我在某处读到从安全角度来看这是一个好主意，但不知道它会破坏某些进程。

内核文档说（仅供参考）：

`mmap_min_addr`

> 此文件指示用户进程将被限制映射的地址空间量。由于内核空引用错误可能会根据内存前几页中的信息意外操作，因此不应允许用户空间进程写入它们。默认情况下，此值设置为 0，安全模块不会强制执行任何保护。将此值设置为 64k 之类的值将允许绝大多数应用程序正常工作，并针对未来潜在的内核错误提供深度防御。

但我仍然不确定为什么除了非 root 用户登录之外，其他一切都有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:31:20.880

您是否检查过用于其他帐户的外壳？输入您的用户名`/etc/passwd`并检查最后一个字段中是否有 shell 的完整路径。如果你想改变，你想试试这个`chsh`命令。

您是否也可以尝试通过键入例如从 root 登录：

```
# su - youruser -c /bin/bash 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:20:03.643

有`/etc/nologin`吗？如果是这样，只需将其删除。此文件可防止非 root 用户登录。

# java - NFC Acr122u-A2 读取

> ID：12550781
> 
> 赞同：2
> 
> 时间：2012-09-23T08:20:32.980
> 
> 标签：java, nfc

我有一个 ACR122u-A2 智能卡读卡器和 mifare 经典 1k 卡。我想知道如何通过 java 程序读取这些卡片。我一直在寻找，但我得到的答案对我来说并不清楚。卡片存储 NDEF 消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T10:18:39.717

查看[适用于 Java 的 NFC 工具](https://github.com/grundid/nfctools)。此外，您可能对这个[NDEF 编辑器插件](http://code.google.com/p/nfc-eclipse-plugin/)感兴趣，以进一步探索 NDEF 格式（无耻插件）。

# python - 通过 sqlalchemy 使用 autoinc 将记录插入 mysql 表会引发错误

> ID：12550783
> 
> 赞同：0
> 
> 时间：2012-09-23T08:21:06.357
> 
> 标签：python, mysql, sqlalchemy

我正在尝试为具有`auto_increment`一些外键的表插入一行。所有外键都存在。但它会引发错误。

> sqlalchemy.orm.exc.FlushError：0x9cf062c 处的实例库存具有 NULL 标识密钥。如果这是一个自动生成的值，请检查数据库表是否允许生成新的主键值，以及映射的 Column 对象是否配置为期望这些生成的值。还要确保此 flush() 不会在不适当的时间发生，例如在 load() 事件中。

甚至通过 MySQL 生成的复制粘贴 SQL 插入记录也在`echo=True`执行。

**股票类**

```
class Stock(Base):
    __tablename__ = 'Stock'

    Code = Column('Code',String(8),primary_key=True)
    Symbol = Column('Symbol',String(128))
    ListingName = Column('ListingName',String(256))
    ListingDate = Column('ListingDate',DateTime())
    RecordAddedDate = Column('RecordAddedDate',DateTime())

    HomeCountry = Column('HomeCountry',ForeignKey('Country.Code'))
    PrimaryExchange = Column('PrimaryExchange',ForeignKey('Exchange.Code'))
    BaseCurrency = Column('BaseCurrency',ForeignKey('Currency.Code'))
    InstrumentType = Column('InstrumentType',ForeignKey('Instrument.InstrumentType')) 
```

**记录插入**

```
Engine = sqlalchemy.create_engine('mysql://user:pass@host/db',echo=True)
Session = sqlalchemy.orm.sessionmaker(bind=Engine)
SessionObj = Session()

NewStock = Stock()
NewStock.InstrumentType = 'Stock'
NewStock.Symbol = 'MSFT'
NewStock.ListingName = 'Microsoft'
NewStock.HomeCountry = 'IN'
NewStock.PrimaryExchange = 'NSEOI'
NewStock.BaseCurrency = 'INR'
NewStock.ListingDate = datetime.datetime.now().strftime("%Y%m%d")
NewStock.RecordAddedDate = datetime.datetime.now().strftime("%Y%m%d")

print NewStock

SessionObj.add(NewStock)
SessionObj.flush()

print NewStock.Code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:34:01.460

添加[`autoincrement=True`](http://docs.sqlalchemy.org/en/rel_0_7/core/schema.html#column-table-metadata-api)到您的专栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:31:48.637

知道了。在转换为整数后，我的列类型为字符串，效果很好。

# php - 如何将变量动态分配给php列表函数

> ID：12550784
> 
> 赞同：0
> 
> 时间：2012-09-23T08:21:09.920
> 
> 标签：php

我在做什么，我想根据数组中有多少项目生成一个列表，所以我计算了项目并循环它们，创建一个基于数字的 var 并构造一个包含 $a1,$a2 的字符串 $var ....并将 $var 分配给列表 list($var)

并试图访问 $a1 但它给了我错误“未定义的变量：a1”

还有其他方法吗？

这是我的代码：

```
$arr = array('1','2','3');
$listsize = count($arr);
$var='';
for($i=1;$i<=$listsize;$i++){
        $var.='$a'.$i;
        if($i!=$listsize){
            $var.=',';
        }
}

list($var) = $arr;
echo $a1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:23:39.313

您正在寻找的是[变量 variables](http://php.net/manual/en/language.variables.variable.php)。

在 PHP 中，您可以动态分配变量*名称*（不仅仅是值）。

这是一个例子：

```
$foo = "Hello" . 1;

# In this line, I am taking the value of the variable $foo (Hello1) and
# using that as as a variable name. This is equivalent to
# $Hello1 = "World", except the variable is dynamic (hence variable variables).

$$foo = "World";

print $Hello1; # This will print World 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:36:53.853

为什么不使用[extract()](http://php.net/manual/en/function.extract.php)？

试试这个：

```
$values = array('1','2','3');
$variables = array();
$length = count($values);
$key = 'a1';

for ($i = 0; $i < $length; $i++){
  $variables[$key] = $values[$i];
  $key++;
}

extract($variables);
echo $a1, $a2, $a3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T09:34:16.740

您可以在没有循环的情况下解决您的问题。数组 $as 填充了您的数据，具有从 a1 到 aX 的键：

```
$arr = array('1', '2', '3', 'test', true, 4.56);
$keys = array_map(function($n) { return "a$n"; }, range(1, count($arr)) );
$a = array_combine($keys, $arr); 
```

数组 $as 具有如下输出的键和值：

```
Array
(
    [a1] => 1
    [a2] => 2
    [a3] => 3
    [a4] => test
    [a5] => 1
    [a6] => 4.56
) 
```

**我建议你通过像 $a['a3'] 这样的数组来访问变量，而不是像 $a3 这样的变量。**

*如果您想要 $a1 ... $aX 变量，请提取数组，如：*

```
extract($a); 
```

# sharepoint - 如何仅获取列表属性中显示的共享点列表列？

> ID：12550788
> 
> 赞同：3
> 
> 时间：2012-09-23T08:21:47.480
> 
> 标签：sharepoint

我正在使用 Sharepoint 2010 的 Web 服务界面来尝试获取给定列表的列。使用 GetList() 调用获取所有列没有问题，但问题是我只需要获取用户可以在 Sharepoint UI 的“列表设置”视图中看到的列。

我目前使用的代码如下：

```
rootNode = serviceReference.GetList(List_id.ToString());
Element element = XElement.Parse(rootNode.OuterXml);
var fields = from e in element.Descendants()
             where e.Name.LocalName == "Field" && e.Attribute("ID") != null &&
             !(e.Attribute("Name").Value.StartsWith("_") && e.Attribute("SourceID").Value == "http://schemas.microsoft.com/sharepoint/v3")            
             select e; 
```

其中 serviceReference 是 Sharepoint 列表服务的一个实例，List_id 是表示 Sharepoint 内部列表的 GUID。

这确实过滤掉了一些我不想要的列，但它并没有摆脱一切。

有谁知道我正在寻找哪些属性来将其缩小到用户可以选择添加到视图中的属性？或者我会以完全错误的方式解决这个问题？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T09:45:37.287

答案是我确实在错误的地方寻找我需要的信息。正如 user823959 指出的那样，我需要获取内容类型定义并使用其中的字段而不是列表本身。

要做到这一点是一个两阶段的过程，首先我们需要使用 Lists.GetListContentTypes 方法获取内容类型的列表（虽然这需要一个内容类型 id 参数，但实际上我们在这里放什么似乎并不重要）

```
 XmlNode rootNode = serviceReference.GetListContentTypes(List_id.ToString(), "0×01"); 
```

返回的 CAML 包含列表中可用的每种内容类型的定义 - 返回的第一个内容类型是默认内容类型（在我的情况下，是我之后的内容类型）

```
 String contentType = rootNode.ChildNodes[0].Attributes["ID"].Value; 
```

一旦我们获得了我们想要的内容类型，我们就可以使用适当的列表内容类型 id 调用 GetListContentType 来获取内容类型的完整定义：

```
 XmlNode contentTypeNode = serviceReference.GetListContentType(List_id.ToString(), contentType); 
```

此调用返回的 CAML 将包含一个字段元素列表，这些元素可以正确显示 SharePoint UI 的视图配置中可用的字段。可以在 LINQ 查询中选择它们，如下所示：

```
 XElement contentTypesElement = XElement.Parse(contentTypeNode.OuterXml);

    var fields = from e in contentTypesElement.Descendants()
                 where e.Name.LocalName == "Field"
                 select e; 
```

至此，我们得到了一个包含有关显示名称、静态名称、内容类型等信息的 Field XML 元素列表。有关每个字段返回的信息范围的详细信息，请参阅[Microsoft 在 Lists.GetListContentType 页面上的文档。](http://msdn.microsoft.com/en-us/library/lists.lists.getlistcontenttype%28v=office.12%29.aspx)

非常感谢 user823959 为我指明了正确的方向。

# winapi - 更改环境值后的 Innosetup SendMessage

> ID：12550791
> 
> 赞同：5
> 
> 时间：2012-09-23T08:21:59.907
> 
> 标签：winapi, casting, inno-setup

我使用 InnoSetup 在注册表中设置环境变量：

```
[Registry]
Root: HKLM; Subkey: "SYSTEM\CurrentControlSet\Control\Session Manager\Environment"; ValueType: string; ValueName: "MY_PROGRAM_HOME_DIR"; ValueData: "{app}" 
```

但是在我调用之前系统无法看到这个变量`SendMessage`。

```
[Code]
procedure DeinitializeSetup();
begin
  // HWND_BROADCAST = $FFFF 
  // WM_SETTINGCHANGE = $001A
  SendMessage($FFFF, $001A, 0, Longint(PChar('Environment')));
end; 
```

InnoSetup 说：

> ... 第 60 列：类型不匹配

如何在 InnoSetup 脚本中正确`PChar`输入？`Longint`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T08:26:29.217

使用该[`ChangesEnvironment`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_changesenvironment)指令而不是从您的脚本代码中执行相同的操作。从参考：

> 当设置为 yes 时，安装程​​序将在安装结束时通知其他正在运行的应用程序（特别是 Windows 资源管理器）它们应该从注册表重新加载其环境变量。

在 InnoSetup 中，当您使用上述指令时，内部会调用以下代码：

```
SendMessageTimeout(HWND_BROADCAST, WM_SETTINGCHANGE, 0,
  LPARAM(PChar('Environment')), SMTO_ABORTIFHUNG, 5000, MsgResult); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-04T10:20:27.240

> 使用 ChangesEnvironment

为我工作得很好。

前任：

```
[Setup]
ChangesEnvironment=yes 
```

注意：广播消息发生在调用“DeinitializeSetup”之前

# json - 如何在 Windows Phone 中解析 JSON？

> ID：12550793
> 
> 赞同：0
> 
> 时间：2012-09-23T08:22:17.270
> 
> 标签：json, windows-phone-7, json.net

我想解析[这个页面](http://kah601.cafe24.com/jp_mango_loadboard.php)

该页面具有如下 json 数据：

```
{"List":[{"num":"1","name":"hello","ox_score":"30","between_score":"30","order_score":"30","total_score":"90"}]} 
```

我尝试了下面的代码。（我使用过`JSON.NET`）但我对“列表”感到担忧，我也尝试了 JArray 和... o["Lists"]["name"] 但我无法得到正确的结果。下面的代码也返回空消息。请帮帮我。

**代码**

```
public void connection()
        {
            string uriString = "http://kah601.cafe24.com/jp_mango_loadboard.php";

            WebClient wc = new WebClient();
            wc.Headers["Accept"] = "application/json";

            wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
            wc.DownloadStringAsync(new Uri(uriString));

        }
        void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {

            JObject o = JObject.Parse(e.Result);

            String name = (string) o["name"];
            String ox_score = (string) o["ox_score"];
            String between_score = (string) o["between_score"];
            String order_score = (string) o["order_score"];
            String total_score = (string) o["total_score"];

            String rank_result = name + ox_score + between_score + order_score + total_score;

            MessageBox.Show(rank_result);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:29:10.840

鉴于它是一个列表，您应该索引 JArray 的元素。这是帮助您的示例代码（注意 [0] => 引用 JArray 的第一个元素）：

```
void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{

    JObject o = JObject.Parse(e.Result);
    JArray a = (JArray)o["List"];

    Debug.WriteLine("{0}", (String)a[0]["name"]);
} 
```

# c# - 新查询返回的 Schema 与基本查询不同

> ID：12550795
> 
> 赞同：0
> 
> 时间：2012-09-23T08:22:33.870
> 
> 标签：c#, data-binding, datagridview, query-builder

我使用 Visual Studio 在 C# 中开发了一个应用程序。我连接到 SQL 服务器并使用数据绑定将数据获取到数据网格。现在的问题是我想从两个表中获取数据到数据网格。我继续向网格中添加了一个新查询，但我无法设置它。它适用于查询生成器 bt 无法将其设置为数据网格。

```
SELECT        Employee.Eid, Employee.Fname, Employee.DateOfJoin, Employee.EmpType,   EmpSlary.TotSalary
FROM          EmpSlary INNER JOIN
                     Employee ON EmpSlary.EmpID = Employee.Eid 
```

以上是查询！谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:34:14.177

很难说不包括这两个查询，但问题可能是查询返回的字段不同。返回的字段必须相同且顺序相同。

# java - 如何使用方法返回的布尔值

> ID：12550804
> 
> 赞同：0
> 
> 时间：2012-09-23T08:25:19.060
> 
> 标签：java, android

我只想知道如何使用从方法返回的布尔值。这是返回值的方法：

```
 public  boolean hasConnection() {
            ConnectivityManager cm = (ConnectivityManager) MCQ.this.getBaseContext().getSystemService(
                Context.CONNECTIVITY_SERVICE);

            NetworkInfo wifiNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
            if (wifiNetwork != null && wifiNetwork.isConnectedOrConnecting()) {
              return true;
            }

            NetworkInfo mobileNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
            if (mobileNetwork != null && mobileNetwork.isConnectedOrConnecting()) {
              return true;
            }

            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
            if (activeNetwork != null && activeNetwork.isConnectedOrConnecting()) {
              return true;
            }

            return false;
          } 
```

这是我想使用这个值的方法：

```
public void setScrollViewLayoutMarginBottom()
     {
         Resources resources = this.getResources();
          DisplayMetrics metrics = resources.getDisplayMetrics();

          Boolean b = hasConnection();

         if(b == true)
         {
             px = 90 * (metrics.densityDpi/160f); 
         }
         else
             px = 60 * (metrics.densityDpi/160f); 

         layoutParams.bottomMargin = (int) px;
            layoutParams.setMargins(0, 0, 0, (int) px);
            sv.setLayoutParams(layoutParams);
     } 
```

请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:29:15.080

您已经在使用返回值，尽管您将它装箱为 a`Boolean`而不是仅`boolean`出于没有特殊原因使用 - 并且您明确地将它与 进行比较`true`，这是不寻常的。

实际上，我可能会使用条件运算符：

```
int scale = hasConnection() ? 90 : 60;
px = scale * (metrics.densityDpi / 160f); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T08:29:25.063

您不需要将返回值保存在变量中，直接使用即可。if(booleanValue == true) 将是 true 或 false，所以只需删除 == true，它已经过时了

```
 if(hasConnection()) {
         px = 90 * (metrics.densityDpi/160f); 
     } else {
         px = 60 * (metrics.densityDpi/160f); 
     } 
```

# jquery - 为什么这个 iframe (youtube embed) 在 chrome 和 ie 中表现不同？

> ID：12550805
> 
> 赞同：0
> 
> 时间：2012-09-23T08:25:39.513
> 
> 标签：jquery, internet-explorer, iframe, bxslider

我将 youtube iframe 嵌入到 bxslider 中。当您从一张幻灯片转到另一张幻灯片时，出于某种原因，iframe 仍位于 ie 中所有内容的顶部。

chrome 中的行为（对于相同的 html 和 css）是我想要的！

请参阅链接：www.torontochinesesoccer.com/brands

div（包括视频所在的那个）都是相对定位的。ie 是否以不同的方式对待 iframe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:13:41.227

尝试在您的 iframe 上使用 wmode="Opaque" 或者您可以使用 jquery 代码

```
 $('iframe').each(function()
     {var url = $(this).attr("src");
      var result = url.search(/youtube/i);
      if(result!=-1)
       {result = url.indexOf('?');
        if(result!=-1)  
          {$(this).attr("src",url+"&wmode=transparent");
          } else {$(this).attr("src",url+"?wmode=transparent");}
       }
     });
      }); 
```

你可以在这里找到更多 - [http://www.scorchsoft.com/news/youtube-z-index-embed-iframe-fix](http://www.scorchsoft.com/news/youtube-z-index-embed-iframe-fix)

# c - 显示字符串中每个字符的二进制

> ID：12550808
> 
> 赞同：0
> 
> 时间：2012-09-23T08:26:02.647
> 
> 标签：c, string, binary, newline

我已经弄清楚如何获取用户的输入（字符串）并从中获取每个字母并给出每个字母的二进制等效项。

问题是我希望每个字母在屏幕上显示时每行一个字母来给出一个二进制数。我需要帮助。

例如：

```
C 0 1 0 0 0 0 1 1
h 0 1 1 0 1 0 0 0
a 0 1 1 0 0 0 0 1
n 0 1 1 0 1 1 1 0
g 0 1 1 0 0 1 1 1 
```

这是我使用的代码：

```
#include <stdio.h>

int main()
{

    //get input
    printf( "Enter a string: " );
    char s[255];
    scanf( "%[^\n]s" , s );

    //print output 
    printf( "'%s' converted to binary is: " , s );

    //for each character, print it's binary aoutput
    int i,c,power;

    for( i=0 ; s[i]!='\0' ; i++ )
    {
        //c holds the character being converted
        c = s[i];

        //for each binary value below 256 (because ascii values < 256)
        for( power=7 ; power+1 ; power-- )
        //if c is greater than or equal to it, it is a 1
        if( c >= (1<<power) )
        {
            c -= (1<<power); //subtract that binary value
            printf("1");
        }
        //otherwise, it is a zero
        else
            printf("0");
    } 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:31:47.587

您只需要`printf("\n")`在处理完每个字符后添加一个语句。

```
for( i=0 ; s[i]!='\0' ; i++ )
    {
        //c holds the character being converted
        c = s[i];

        //for each binary value below 256 (because ascii values < 256)
        for( power=7 ; power+1 ; power-- )
        //if c is greater than or equal to it, it is a 1
        if( c >= (1<<power) )
        {
            c -= (1<<power); //subtract that binary value
            printf("1");
        }
        //otherwise, it is a zero
        else
            printf("0");

        /* Add the following statement, for this to work as you expected */
        printf("\n");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:33:57.027

不要立即打印您的`1`and `0`，而是从它们构建一个字符串。然后在刚刚构建的字符串旁边打印出刚刚转换的字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T08:34:46.373

要在新行上打印每个字符，请在打印每个字符后打印一个换行符：

```
printf("\n"); 
```

要首先打印字符，请使用 putchar：

```
putchar(c); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T08:35:22.180

撇开糟糕的代码风格不谈，您正在寻找的似乎是一个简单的

```
printf("\n"); 
```

紧跟`printf("0");`在外部 for 循环末尾的语句以添加换行符。

# python - Flask-Babel -0 pybabel：错误：未知语言环境“jp”

> ID：12550810
> 
> 赞同：0
> 
> 时间：2012-09-23T08:27:01.087
> 
> 标签：python, flask, python-babel, flask-babel

我在使用 Flask-babel 时遇到问题。我无法为日语创建翻译。

pybabel：错误：未知语言环境'jp'

这是 Flask-Babel 的问题吗？

当一种语言不存在时，这也是同样的错误。但是，德语工作。所以.....babel nit 支持日语吗？

是否有支持日语等主要语言的 Babel 替代方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T06:27:18.163

Babel 确实支持日语，实际上，错误的出现是因为 'jp' 不是有效的语言环境。

Babel 使用来自 CLDR 的语言代码（我相信这是来自 ISO 等的标准化语言代码）。在您的情况下，混淆来自语言/领土的分裂（“de”代表德语，“AT”代表奥地利领土，“DE”代表德国……）。

日语的语言代码是“ja”，领土是“JP”。所以你应该只使用'ja'或'ja_JP'。

# javascript - 通过 requirejs 共享原型实例而不使用单例模式？

> ID：12550811
> 
> 赞同：1
> 
> 时间：2012-09-23T08:27:12.940
> 
> 标签：javascript, singleton, instance, requirejs, amd

我有一个处理沙箱的中介对象。

每个沙箱都必须在中介处注册。因为我也使用 requirejs，所以这是一个小问题，因为我不知道如何共享实例而不是原型：

**中介者.js**

```
define([], function() {
    var Mediator = function() {};
    Mediator.prototype.start = function() {};
    Mediator.prototype.stop = function() {};
    Mediator.prototype.register = function() {};
    Mediator.prototype.unregister = function() {};
    return Mediator;
}); 
```

**sandbox_one.js**

```
define(['mediator'], function(Mediator) {
    var mediator = new Mediator();
    mediator.register('sandboxOne', SandboxObject);
}); 
```

**sandbox_two.js**

```
define(['mediator'], function(Mediator) {
    var mediator = new Mediator();
    mediator.register('sandboxtwo', SandboxObject);
}); 
```

正如您在当前方法中提到的那样，我在两个不同的中介处注册了沙箱。解决这个问题的一个想法是使用单例模式，但这与架构和 requirejs 建议冲突。

**那么我还有什么其他方法可以让沙箱注册到同一个中介者实例？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:22:59.210

由于无法发表评论，我将发布答案。

ggozad 在这里解释了如何在 RequireJS 中执行单例：[将 requireJS 模块用作单例是一种不好的做法吗？](https://stackoverflow.com/questions/9733201/is-it-a-bad-practice-to-use-the-requirejs-module-as-a-singleton)

他的代码：

```
define(function (require) {
    var singleton = function () {
        return {
            ...
        };
    };
    return singleton();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T13:25:01.157

实际上，使用**RequireJS**你已经收到了单例，所以如果你调用：

```
require(['mediator'], function(Mediator) {
  ....
}); 
```

`Mediator`将始终是同一个对象。如果它是一个构造函数，通过调用`new Mediator()`你总是会创建一个新的实例，但你每次都会**使用相同的函数**。

但是您不必返回函数：

```
define([], function() {
    return {
        start: function() {},
        stop: function() {},
        register: function() {},
        unregister: function() {}
    };
}); 
```

现在你的`Mediator`将是一个实例，而不是一个函数，你不能将它用作函数。你的例子现在看起来像：

```
require(['mediator'], function(Mediator) {
  Mediator.register('sandboxOne', SandboxObject);
}); 
```

**免责声明**：我在**Dojo中使用****RequireJS**版本内置。

# ruby - 为什么这不起作用 - ruby koans

> ID：12550817
> 
> 赞同：0
> 
> 时间：2012-09-23T08:27:41.507
> 
> 标签：ruby

我想出了以下针对公案的解决方案。

```
# and
#   about_triangle_project_2.rb
#
def triangle(a, b, c)

   driehoek = Array.new[ a, b, c].sort

  raise (TriangleError), "length cannnot be 0 or lesser" if (driehoek[0] <= 0) 
  raise (TriangleError), "impossible triangle" if (driehoek[0] + driehoek[1] < driehoek[2])

 return :equilateral if ((a == b) and (b == c))
 return :isosceles if (((a == b) and (b != c)) or 
                   ((a != b) and (b == c)) or 
                   ((a == c) and (a != b)))
  return :scalene  if ((a !=b) and (b != c))
end

# Error class used in part 2\.  No need to change this code.
class TriangleError < StandardError
end 
```

但是现在当使用三角形 [2,2,2] 时，我会看到以下错误消息：

```
The answers you seek...
 wrong number of arguments (3 for 2)

Please meditate on the following code:
  ./triangle.rb:18:in `[]'
  ./triangle.rb:18:in `triangle' 
```

谁能告诉我这里有什么问题？

罗洛夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:31:17.610

问题在于您如何创建阵列。`new`是一种方法，您需要使用`parens ()`. 改变这个：

```
driehoek = Array.new[ a, b, c].sort 
```

为此，它应该可以工作：

```
driehoek = Array.new([a, b, c]).sort 
```

# objective-c - 即使主窗口不活动，NSPopover 也会显示

> ID：12550822
> 
> 赞同：2
> 
> 时间：2012-09-23T08:28:24.267
> 
> 标签：objective-c, cocoa, nspopover

我以编程方式显示一个弹出框，如下所示：

```
popover = [NSPopover new];    
popover.contentViewController = popoverController;
popover.animates = YES;
popover.delegate = popoverController;
popover.behavior = NSPopoverBehaviorSemitransient;

[popover showRelativeToRect:[textfield bounds] 
                     ofView:textfield 
              preferredEdge:NSMaxYEdge]; 
```

其中 textfield 是一个 NSTextfield ，弹出框将显示在该字段下。这一切正常，但问题是即使窗口被隐藏且不活动，弹出窗口也会显示，就像它来自无处一样（主窗口在弹出窗口出现时保持隐藏）。任何帮助如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T11:37:40.587

您需要检查您的窗口是主窗口还是关键窗口，然后显示弹出窗口。像这样：

```
if ([yourWindowOutlet isMainWindow]) {
    // show popover
} 
```

或者

```
if ([yourWindowOutlet isKeyWindow]) {
    // show popover
} 
```

# linux - 在单个系统上，我可以期望 main() 总是在同一个 EIP 上吗？

> ID：12550823
> 
> 赞同：0
> 
> 时间：2012-09-23T08:28:31.447
> 
> 标签：linux, eip

我正在 Linux 中运行一些基准测试，并且正在寻找程序已完成加载并开始运行的一些迹象。期望`main()`总是相同是否合理`EIP`？

是否依赖于语言`EIP`？`main()`它依赖于编译器吗？

有什么`EIP`程序总是可以预期开始的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T08:32:24.813

没有。在 C 中，入口点实际上是`_start`，它来自`libc`; `_start`进行一些`libc`初始化，然后调用`main`.

`main`只是一个常规功能。链接器可以选择在过程映像中随意重新排列它。此外，对于可执行文件开头的重定位表等内容，该`.text`部分的开头甚至可能不是恒定的。哎呀，如果您正在汇编程序中编写程序，`main`甚至可能不存在。

但是，始终可以信任程序从其 ELF 标头中声明的入口点地址开始（假设它是 ELF 可执行文件）。所以，用那个。`readelf`可以告诉你价值。

# android - 方形按钮安卓

> ID：12550824
> 
> 赞同：1
> 
> 时间：2012-09-23T08:28:54.153
> 
> 标签：android

我想制作一个宽度与高度相同的按钮正方形。
我尝试`bt.setWidth(bt.getHeight())`但它不起作用。
如果我硬编码宽度（`bt.setWidth(90)`）它可以工作，但我不知道高度，所以我可以硬编码它。

这是一些代码。当我点击一个按钮时，它会打开一个对话框，这个对话框必须包含方形按钮。

```
public class MyClass extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.myLayout);
    }

    public void doClick(View view) {
        final Dialog dialog = new Dialog(view.getContext());
        dialog.setContentView(R.layout.dialogLayout);
        dialog.setTitle("Title");

        Button bt = (Button) dialog.findViewById(R.id.myButton);
        bt.setWidth(bt.getHeight());
        bt.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                ...
            }
        });

        dialog.show();
    }   
} 
```

我怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:56:01.780

直接的答案是，在显示对话框之前，它还没有测量它的布局，按钮高度将为零。您可以扩展 Dialog 类并覆盖 onMeasure() 方法或将全局布局侦听器附加到布局并在 onLayoutComplete() 中设置按钮大小。

但是，您的方法可能是错误的。为什么不能在对话框的布局 XML 中执行此操作？

# ghostscript - Ghostscript：如何在 Windows 上将 PDF 与通配符合并

> ID：12550826
> 
> 赞同：4
> 
> 时间：2012-09-23T08:29:03.520
> 
> 标签：ghostscript

我正在尝试合并目录中的所有 *.pdf ：

```
gswin64c -q -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile=Total_Files.pdf -dBATCH *.pdf 
```

这在 Linux 上对我来说非常有用，但是当我在 Windows 上运行它时，我得到了`**Error: /undefinedfilename in *.pdf.**`. 请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T08:47:27.550

之前有一个关于这个主题的问题，答案是一样的，Ghostscript 不允许在输入文件名中使用通配符，你必须指定你想要的每个文件作为输入。

为什么它可以在 Linux 上运行？因为您使用的 shell在将命令行传递给 Ghostscript*之前会将“*.ps”扩展为完整的文件列表。*

要在 Windows 中执行此操作，您需要执行 shell 脚本，将文件名通过管道传输到文件，然后将文件作为参数提供给 GS。

EG，类似

```
for %s in (*.ps) do ECHO %s >> filename.lst
gswin64c.... @filename.lst 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T18:17:32.180

（我的问题几乎完全相同）。我的解决方案（在以前的答案的帮助下）稍微更好地回答了原始问题（下面是一个实际的 MS-DOS 示例）

```
del filename.lst
for %%s in (C:\somefolder\some?wildcards*.pdf) do ECHO %%s >> filename.lst
gswin64c.... @filename.lst 
```

解释;

'>>' 表示在 MS-DOS 中追加 - 所以首先我们删除文件 filename.lst

我读到（刚刚在其他地方）`%%s`在 MS-DOS 批处理文件中工作（而不是`%s`）。显然 - 有一天文件名可能包含空格（就像我的那样），所以最好安全并引用文件名。所以更好的批处理文件是；

```
del filename.lst
for %%s in (C:\somefolder\some?wildcards*.pdf) do ECHO "%%s" >> filename.lst
gswin64c.... @filename.lst 
```

现在我只是用它来输入许多 EPS 文件——但许多 PDF 文件也可以正常工作；就像上面的例子一样——我实际上用两者测试了它——我的结果是一个包含许多 EPS 文件的 PDF——以及一个 PDF 中多个 PDF 文件的许多页面（根据问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T18:10:51.013

作为 for 循环的替代方案

```
dir /b /o:n *.ps > filename.lst 
```

完成工作（/b 仅获取文件，/o:n 按名称排序）。

要彻底解决排序问题，可以将前 9 个文件重命名为 01->09，或者在记事本中打开输出文件，手动处理这几种情况。但是，如果您将拥有超过 100 个文件，这可能会很麻烦。

*很抱歉挑起这个一年前的帖子，它帮助我解决了我的问题，但我认为使用 'dir' 更容易、更灵活，并且不需要您在开始之前删除文件列表。*

# three.js - 是否可以导入与像素对齐的 Collada 模型？

> ID：12550832
> 
> 赞同：1
> 
> 时间：2012-09-23T08:29:40.230
> 
> 标签：three.js, collada, sketchup

假设我有一个简单的立方体模型。（它比立方体更复杂，但为了讨论的目的，我们将简化。）

所以当我在 Sketchup 中时，立方体是 Xmm × Xmm × Xmm，其中 X 是一个整数。然后我导出一个 Collada 文件，然后将其加载到 threejs 中。

现在，如果我查看几何边界框，这些值是浮点数，而不是整数。

所以现在假设我将立方体彼此相邻放置，并且在 1 像素之间留出一小块空间。因为屏幕不能画半个像素，所以有时看到一个像素，有时看到两个，导致不均匀。

如果我能以某种方式让导入的模型具有整数维度，我想我可以令人满意地解决这个问题。从 Sketchup 开始，我可以完全访问模型的所有部分，因此过程中的任何一点都是公平的。

是否可以？

谢谢。

澄清：我的应用程序将有两个视图。与此相关的视图是使用直视碎片的 OrthographicCamera，因此这实际上是 2D 视图。出于这个问题的目的，在导入模型后，它应该看起来像一个正方形网格，中间有均匀的间距。

**更新：**除非您能提供实际答案，否则请不要回复。如果我需要帮助找到完成某事的方法，我会发布一个新问题。对于这个问题，我只想知道是否可以将导入的 Collada 模型与全像素对齐，如果可以的话如何。在这一点上，这主要是为了满足我的好奇心并增加我对什么是可能的和不可能的知识。感谢社区的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T09:33:56.367

现在您必须学习有关 3D 编程的知识：数字没有任何意义 :)

在现实世界`1mm`中，`2.13cm`并`100Kg`指定可以测量和复制的东西。但是对于绘图库来说，这些数字没有任何意义。

在绘图库中，3D 点始终用 3 个浮点值表示。您将点提交到库，它会将它们转换为 2D 点（它们必须在 2D 表面上查看），最后将这些 2D 点传递给*光栅化器*它将浮点值转换为整数值（屏幕具有`NxM`像素分辨率，两者都是整数）`N`并`M`为实际像素着色。

你的问题根本不是问题。一个立方体`1mm`真的没有任何意义，因为如果你正在设计一个天文应用程序，那个物体永远不会被看到，但如果它是一个微观物体，它甚至会比屏幕大得多。重要的是点的**坐标**和整个应用程序的**规模**。

现在回到你的立方体，不要试图插入`1px`两个相邻的立方体之间。您的立方体是根据 定义的`mm`，因此请尝试选择`mm`适合您的世界的距离，并让光栅化器完成其工作并将它们转换为像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T03:17:12.060

两位同事告诉我，我追查到这确实是不可能使用正常手段。

# ruby-on-rails - Rails button_to 用于自定义名称/值提交

> ID：12550842
> 
> 赞同：0
> 
> 时间：2012-09-23T08:32:02.257
> 
> 标签：ruby-on-rails, button-to

在 Rails 中是否可以使用 实现这样的 HTML 输出[`button_to`](http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to)？

```
<button type="submit" value="1" name="id">Type 1</button>
<button type="submit" value="2" name="id">Type 2</button> 
```

`button_to`在我的表单中使用过度手动输入 HTML的原因是什么？

...

编辑：

也许我应该改写这个？似乎更好的方法是在`button_to`表单中添加一些隐藏字段。我好像做不到这个。

那么，将额外隐藏字段传递给通过 a 生成的动态表单的正确 Rails 解决方案是`button_to`什么？还是我应该手动构建一个表单？

例如我有：

```
button_to "Download", items_path(:release_id => release), :remote => true 
```

我想以 POST 的形式传递一个额外的参数`format => "download"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T14:45:36.917

似乎我的答案是使用[form_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)助手

# python - 在 matplotlib 散点图中包含直方图

> ID：12550843
> 
> 赞同：0
> 
> 时间：2012-09-23T08:32:03.733
> 
> 标签：python, numpy, matplotlib

我正在 matplotlib 中绘制散点图，它们的生成效果很好。但是，要显示 x 和 y 之间的相关性，我需要在两个轴上添加直方图作为子图（如本[例](http://matplotlib.org/examples/axes_grid/scatter_hist.html)所示）。由于示例中的代码有点复杂，所以我无法了解如何让我的散点图拥有这些。这是我的代码：

```
import matplotlib.pyplot as plt
import numpy
from statlib import stats
from math import log

x1=numpy.loadtxt("a.txt")
x2 = numpy.loadtxt("b.txt")

x1 = numpy.array(x1)
x2 = numpy.array(x2)
x1 = x1.reshape(82,296)
x2 = x2.reshape(82,296)
x = numpy.vstack([x1, x2])

y1=numpy.loadtxt("c.txt")
y2=numpy.loadtxt("d.txt")

y1 = numpy.array(y1)
y2 = numpy.array(y2)

y1 = y1.reshape(82,296)
y2 = y2.reshape(82,296)

y = numpy.vstack([y1, y2])

plot = plt.scatter(y,x)
plt.grid('on')
plt.xlabel('X')
plt.ylabel('Y')
plt.ylim(-20,1000)
plt.title('Scatter Plot')

plt.show() 
```

任何帮助都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:03:58.933

复制[示例](http://matplotlib.org/examples/axes_grid/scatter_hist.html)中的代码。

找到线路

```
axScatter.scatter(x, y) 
```

这将创建散点图。将其与您的线路进行比较

```
plot = plt.scatter(y,x) 
```

它们基本相同，只是`x`和`y`相反。因此，要将您的代码连接到示例，只需替换

```
x = np.random.randn(1000)
y = np.random.randn(1000) 
```

（来自示例）与您的代码定义`y`和`x`.

# android - 缓存好友/项目列表

> ID：12550847
> 
> 赞同：0
> 
> 时间：2012-09-23T08:32:32.080
> 
> 标签：android, caching

我正在寻找一种在我的应用程序中缓存尽可能多数据的方法。这些数据中的大部分都是对以下步骤至关重要的项目，例如朋友列表。根据选择的朋友，我会显示一个包含某些项目的列表，并且可以向这个朋友发送一些东西。

我想缓存好友列表。这样，不可能向不存在的朋友发送东西，这显然会导致错误。或者也许缓存可以工作，以便它显示“无效的缓存朋友”消息并在它之后刷新......？

好友列表不会经常更改，但在用户使用应用程序时仍然可以更改。

我还想缓存可以发送给用户的项目。这些也不会经常更改，但用户不发送不存在的项目非常重要，如果他们在服务器端更新，他们当然希望他们看到最新的项目。

例如，这与缓存可以购买的物品的原理相同。用户不要尝试使用无效项目完成交易，这一点至关重要。

我已经做了一些研究，但到目前为止只能提出一个粗略的想法：

使用哈希或时间戳比较数据：在这种情况下，我不知道在什么时候做呢？加载屏幕可能没有任何意义，因为无论如何用户都必须等待服务器的响应。也许是后台进程？但我多久运行一次？如何同步？

此外，我可以添加一个更新菜单项，以便用户可以确保数据已更新。但这仍然没有解决用户可以尝试使用无效数据完成交易的问题（如果他们不按下按钮）。

我还发现了一些关于“实时数据”和 AVI 的信息，但我认为这不适用于我的情况，我的数据很少会改变，但要求它是有效的，因为它不仅是信息数据，而且是交易决定数据。

有什么办法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:22:10.900

我认为您是对的，您应该使用数据源（服务器）检查时间戳。

如果这是朋友之间的点对点交换，则在发送数据之前，请从服务器请求其时间戳。没有那么多数据，通常接近实时。但是发送过时数据的可能性仍然很小 - 更新后仅“一纳秒”。

如果它通过服务器（为什么不呢？），作为奖励，您将通过检查服务器上的时间戳并在发送的数据已过时取消事务来获得乐观锁定。

# java - Vim，Java：在光标下打开类并转到方法

> ID：12550848
> 
> 赞同：3
> 
> 时间：2012-09-23T08:32:45.487
> 
> 标签：java, vim, text-cursor, code-navigation

Vim 可以使用 . 打开光标下的文件`gf`。例如，如果我的光标下有以下内容：

```
SensorManagementActivity.java 
```

打`gf`会开`SensorManagementActivity.java`。

问题是在 Java 中，引用缺少`java`后缀，并且经常显示为`SomeClass`,`SomeClass()`或`SomeClass.method()`.

*   当光标在另一个文件中时，如何打开`SomeClass.java`并跳转到？`someMethod()``SomeClass.someMethod()`
*   有没有办法在不保存当前文件的情况下打开一个新文件，并在不丢失更改的情况下返回当前文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-23T09:18:23.240

该`'suffixesadd'`选项允许`gf`处理 Java 文件扩展名；它已经由Vim 附带的*java文件类型设置，如下所示：*

```
:setlocal suffixesadd=.java 
```

要跳转到方法，Vim 可以使用必须首先（重新）生成的*标签*文件（有插件可以自动生成）。对于 Java，您可以使用*exuberant ctags*工具。

```
:! ctags -R 
```

有关更多信息和替代方案，请阅读`:help ctags`。使用`:tag`命令或 Ctrl-] 快捷键跳转。

您可以通过 Ctrl-W ] 跳转到拆分窗口。为了能够`:set hidden`在您的`~/.vimrc`.

^(PS：虽然在这里它们有点相关，但最好避免在 Stack Overflow 上提出多个问题)

# mysql - MySQL REGEXP 获取整数之间的所有内容

> ID：12550852
> 
> 赞同：1
> 
> 时间：2012-09-23T08:33:26.013
> 
> 标签：mysql, regex, between

我怎样才能得到个位数整数之间的所有内容？像这个字符串：

```
7get this text9 
```

我试过了：

```
SELECT * FROM `test` WHERE `file` REGEXP '[0-9](.*?)[0-9]' 
```

但这会引发mysql错误：

> 从正则表达式中得到错误“重复运算符操作数无效”

你怎么做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T08:39:06.933

您有两个重复运算符，`*`并且`?`彼此跟随。

删除`?`将选择您正在搜索的文本。

[SQL小提琴](http://www.sqlfiddle.com/#!2/f1183/2)

# java - 是否有任何支持 C 预处理器的 Java IDE？

> ID：12550860
> 
> 赞同：3
> 
> 时间：2012-09-23T08:35:42.927
> 
> 标签：java, macros, editor, c-preprocessor

我想找到一个java IDE，或者任何方式来配置一个流行的代码编辑器，它可以理解java代码中的纯**C**预处理器（比如'#if'但不是像'//#if'这样的雅典娜注释预处理器），像这样：

```
class Person
{
#if USE_SHORT_ID
  short m_Id;
#elif
  int m_Id;
#endif
#define DEFAULT_ID 0
#include "some_functions.h"

} 
```

原因：我参与了一个java项目，在java代码中有**C**的定义和宏，然后在编译java代码之前运行预处理器。这些代码正在成长为我迷失的范围：太多的类、成员、函数名称，而没有代码完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:52:37.887

这看起来像是那种“当时看起来是个好主意”的东西......

如果所有的宏使用都和你复制的一样，也许你可以这样做：

**types.hj** : (java 头文件的通常扩展名是什么？！）

```
#if USE_SHORT_ID
    #define short id_t
#elif
    #define int id_t
#endif 
```

然后在`*.java`文件中您只需执行以下操作：

```
class Person
{
    id_t m_Id;
} 
```

然后，当您调用预处理器时，您会强制包含`types.hj`文件。例如，使用 GNU cpp 你可以：

```
$ cpp -include types.hj PersonP.java -o Person.java 
```

这应该足以不禁用您的 IDE 自动完成功能。

如果宏还有其他更具创造性的用途……好吧，那可能行不通。

# javascript - 使用 jQuery/JavaScript 检测“哑”手机？

> ID：12550861
> 
> 赞同：0
> 
> 时间：2012-09-23T08:35:51.743
> 
> 标签：javascript, jquery, browser-detection

我不知道如何使用 jQuery/JavaScript 检测“愚蠢”的手机浏览器。我的网站有台式机/平板电脑、智能手机和哑机版本。该网站的智能手机版本对于笨拙的手机来说太重且太慢，所以我想将它们重定向到“精简版”版本。

Facebook 就是一个很好的例子。当我在哑手机浏览器上打开 Facebook 时，用户会被重定向到 hte lite 版本。我该如何做同样的行为？

注意：由于平台限制，我使用的是 JavaScript 而不是 PHP。（它在 Tumblr 上。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:40:19.953

在您的 javascript 中，您将需要检测用户代理变量（这是每个浏览器用来识别自己的变量）。

```
if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
 // Redirect code goes here
 window.location = "someplace.com";
} 
```

本质上，您必须手动输入要测试的类型，并为每种情况使用 if/else 语句。（见[http://www.w3schools.com/jsref/prop_nav_useragent.asp](http://www.w3schools.com/jsref/prop_nav_useragent.asp)和[http://useragentstring.com/pages/useragentstring.php](http://useragentstring.com/pages/useragentstring.php)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:12:34.930

另一种好方法是检查浏览器中是否存在某些功能，例如[http://modernizr.com/](http://modernizr.com/)库。这可能会提高性能，并且您不必每次找到“哑电话”时都更新用户代理字符串。

# ios - FB ios SDK 未返回应用程序 - 无法在 plist 中找到问题

> ID：12550862
> 
> 赞同：2
> 
> 时间：2012-09-23T08:35:52.683
> 
> 标签：ios, facebook, fbconnect

我正在创建一个将使用 fb 登录服务的 ios 应用程序。我创建了一个新类 fbConnect，它具有所有 fb 功能 - 该类可以包含在相关文件中，然后可以使用 fb 相关功能。

我创建会话如下：

```
 - (void) createSession
{

if(!fbSession.isOpen)
{
if (!fbSession || fbSession.state != FBSessionStateCreated)
{
    fbSession = [[FBSession alloc] init];
}

[fbSession openWithCompletionHandler:^(FBSession *session,
FBSessionState status,
NSError *error) {
    [self sessionStateChanged:session state:status error:error];

}];

  }
} 
```

问题是对 fb 的调用永远不会返回到应用程序 - 没有对完成处理程序的调用。如果我尝试使用 safari，它会说该 url 不存在。

我已经检查并重新检查了 plist 设置 - 它们似乎很好。在单独的文件中定义函数而不在 appdelegate 中执行任何操作是否有问题？

编辑1：我认为我之前错了，问题出在plist；但是，我无法弄清楚问题所在。有人可以帮忙吗？我无法发布图片，但我的 plist 的图片链接是[http://i.stack.imgur.com/K7BqG.png](http://i.stack.imgur.com/K7BqG.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T06:39:40.610

我删除并重置了 info.plist 中的设置，瞧！需要注意的重要一点是，我没有写设置名称，而是从更改 info.plist 中的值时出现的下拉菜单中选择了 apt 设置。这应该无关紧要，但确实如此。

# python - 警告：DistUtilsExtra.auto 无法识别以下文件：运行 setup.py 时

> ID：12550870
> 
> 赞同：0
> 
> 时间：2012-09-23T08:37:26.170
> 
> 标签：python, distutils, setup.py

我正在尝试在 Ubuntu 12.04/12.10 上安装 Quickshot 应用程序，并且每当我运行 setup.py 时都会遇到以下错误（如果我只运行 setup.py、setup.py 检查、setup.py 也没关系build 或 setup.py clean——我没有尝试 setup.py install)。

```
 WARNING: the following files are not recognized by DistUtilsExtra.auto:
    bin/quickshot
    hooks/quickshot-crashdb.conf
    hooks/source_quickshot.py
    po/quickshot.pot
    quickshot.desktop
    run.sh 
```

我还将 setup.py 文件的副本粘贴到其中。在 Ubuntu 12.10 上，bin/quickshot 不会触发，但其余部分会触发。非常感谢任何有关修复什么以使其正常工作的建议。

谢谢，祝你周末愉快（剩下的）：）帕特里克。

安装程序.py

```
 #!/usr/bin/env python
    # -*- coding: utf-8 -*-
    ### BEGIN LICENSE
    # Copyright (C) 2010 Benjamin Humphrey <humphreybc@gmail.co>
    #This program is free software: you can redistribute it and/or modify it 
    #under the terms of the GNU General Public License version 3, as published 
    #by the Free Software Foundation.
    #
    #This program is distributed in the hope that it will be useful, but 
    #WITHOUT ANY WARRANTY; without even the implied warranties of 
    #MERCHANTABILITY, SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR 
    #PURPOSE.  See the GNU General Public License for more details.
    #
    #You should have received a copy of the GNU General Public License along 
    #with this program.  If not, see <http://www.gnu.org/licenses/>.
    ### END LICENSE

    ###################### DO NOT TOUCH THIS (HEAD TO THE SECOND PART) ######################

    try:
        import DistUtilsExtra.auto
    except ImportError:
        import sys
        print >> sys.stderr, 'To build quickshot you need https://launchpad.net/python-distutils-extra'
        sys.exit(1)

    assert DistUtilsExtra.auto.__version__ >= '2.10', 'needs DistUtilsExtra.auto >= 2.10'
    import os

    def update_data_path(prefix, oldvalue=None):

        try:
            fin = file('quickshot/quickshotconfig.py', 'r')
            fout = file(fin.name + '.new', 'w')

            for line in fin:            
                fields = line.split(' = ') # Separate variable from value
                if fields[0] == '__quickshot_data_directory__':
                     # update to prefix, store oldvalue
                    if not oldvalue:
                        oldvalue = fields[1]
                        line = "%s = '%s'\n" % (fields[0], prefix)
                    else: # restore oldvalue
                        line = "%s = %s" % (fields[0], oldvalue)
                fout.write(line)

            fout.flush()
            fout.close()
            fin.close()
            os.rename(fout.name, fin.name)
        except (OSError, IOError), e:
            print ("ERROR: Can't find quickshot/quickshotconfig.py")
            sys.exit(1)
        return oldvalue

    def update_desktop_file(datadir):

        try:
            fin = file('quickshot.desktop.in', 'r')
            fout = file(fin.name + '.new', 'w')

            for line in fin:            
                 if 'Icon=' in line:
                    line = "Icon=%s\n" % (datadir + 'media/icon.png')
                fout.write(line)
            fout.flush()
            fout.close()
            fin.close()
            os.rename(fout.name, fin.name)
        except (OSError, IOError), e:
            print ("ERROR: Can't find quickshot.desktop.in")
            sys.exit(1)

    class InstallAndUpdateDataDirectory(DistUtilsExtra.auto.install_auto):
        def run(self):
            if self.root or self.home:
                print "WARNING: You don't use a standard --prefix installation, take care that you eventually " \
                "need to update quickly/quicklyconfig.py file to adjust __quickly_data_directory__. You can " \
                "ignore this warning if you are packaging and uses --prefix."
            previous_value = update_data_path(self.prefix + '/share/quickshot/')
            update_desktop_file(self.prefix + '/share/quickshot/')
            DistUtilsExtra.auto.install_auto.run(self)
            update_data_path(self.prefix, previous_value)

    ##################################################################################
    ###################### YOU SHOULD MODIFY ONLY WHAT IS BELOW ######################
    ##################################################################################

    DistUtilsExtra.auto.setup(
        name='quickshot',
        version='0.0.83',
        license='GPL-3',
        author='Benjamin Humphrey, Tommy Brunn',
        author_email='humphreybc@gmail.com',
        url='https://launchpad.net/quickshot',
        description='Quickshot is a program designed for capturing a large number of screenshots in different languages. It is principally designed for use with the Ubuntu Manual Project, but should be able to be tweaked for different projects and uses.',
        #long_description='Here a longer description',
        cmdclass={'install': InstallAndUpdateDataDirectory}
        ) 
```

如果 setup.py 文件中的空格不正确，那是因为必须在此处手动缩进它们。应该假定它们在实际文件中是正确的，因为它确实安装在 Ubuntu 10.04、10,10 和可能的 11.04/11.10 下（我还没有验证最后两个）。

setup.py build 的结果也如下：

```
 running build
    running build_py
    creating build
    creating build/lib.linux-x86_64-2.7
    creating build/lib.linux-x86_64-2.7/quickshot
    creating build/lib.linux-x86_64-2.7/quickshot/lib
    creating build/lib.linux-x86_64-2.7/quickshot/lib/capture
    copying quickshot/lib/capture/__init__.py -> build/lib.linux-x86_64-2.7/quickshot/lib/capture
    copying quickshot/__init__.py -> build/lib.linux-x86_64-2.7/quickshot
    copying quickshot/common.py -> build/lib.linux-x86_64-2.7/quickshot
    creating build/lib.linux-x86_64-2.7/quickshot/lib/server
    copying quickshot/lib/server/__init__.py -> build/lib.linux-x86_64-2.7/quickshot/lib/server
    creating build/lib.linux-x86_64-2.7/quickshot/lib/resolution
    copying quickshot/lib/resolution/__init__.py -> build/lib.linux-x86_64-2.7/quickshot/lib/resolution
    copying quickshot/lib/__init__.py -> build/lib.linux-x86_64-2.7/quickshot/lib
    creating build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/screenshot_list.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/user_account.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/screenshot_compare.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/about.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/credits.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/graphics_confirm.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/licence.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/dialogue.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/graphics_change.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/base.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/__init__.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/user_details.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/screenshot_detail.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    copying quickshot/gui/project_selection.py -> build/lib.linux-x86_64-2.7/quickshot/gui
    creating build/lib.linux-x86_64-2.7/quickshot/lib/account
    copying quickshot/lib/account/environment.py -> build/lib.linux-x86_64-2.7/quickshot/lib/account
    copying quickshot/lib/account/__init__.py -> build/lib.linux-x86_64-2.7/quickshot/lib/account
    running build_i18n
    intltool-update -p -g quickshot
    running build_icons
    running build_help
    WARNING: the following files are not recognized by DistUtilsExtra.auto:
      bin/quickshot
      hooks/quickshot-crashdb.conf
      hooks/source_quickshot.py
      quickshot.desktop
      run.sh 
```

以下是 setup.py 安装的结果：

```
 running install
    ERROR: Can't find quickshot/quickshotconfig.py
    Traceback (most recent call last):
      File "setup.py", line 103, in <module>
        cmdclass={'install': InstallAndUpdateDataDirectory}
      File "/usr/lib/python2.7/dist-packages/DistUtilsExtra/auto.py", line 100, in setup
        distutils.core.setup(**attrs)
      File "/usr/lib/python2.7/distutils/core.py", line 152, in setup
        dist.run_commands()
      File "/usr/lib/python2.7/distutils/dist.py", line 953, in run_commands
        self.run_command(cmd)
      File "/usr/lib/python2.7/distutils/dist.py", line 972, in run_command
        cmd_obj.run()
      File "setup.py", line 83, in run
        previous_value = update_data_path(self.prefix + '/share/quickshot/')
      File "setup.py", line 54, in update_data_path
        sys.exit(1)
    NameError: global name 'sys' is not defined 
```

# java - 将 DocumentReferences 与 Ektorp 和 JSF 一起使用时出错

> ID：12550873
> 
> 赞同：1
> 
> 时间：2012-09-23T08:37:53.660
> 
> 标签：java, jsf-2, couchdb, jackson, ektorp

在我为学习 CouchDB/Ektorp 而创建的一个小型 JSF 项目中，我遇到了 DocumentReferences 错误。我相信一切都在 CRUD 中按原样工作，父文档的 id 存储为字符串，类似于教程项目。但是当我从数据库中检索父对象时，我得到了这个错误：

```
org.codehaus.jackson.map.JsonMappingException: Can not instantiate value of type 
[simple type, class com.pro.documents.Apple] from JSON String; no single-String 
constructor/factory method (through reference chain: com.pro.documents.Eiere["apple"]) 
```

这是其余的代码：

```
{
   "_id": "_design/Eiere",
   "_rev": "17-ebb06b0d3102622a3d9849b9399cd94f",
   "language": "javascript",
   "views": {
       "all": {
           "map": "function(doc){if (doc.type == 'eiere') {emit(doc._id, doc);}}"
       },
       "ektorp_docrefs_apple": {
           "map": "function(doc){ if(doc.eiere){emit([doc.eiere, 'apple', doc.kategori], null);}}"
       }
   } 
}

{
   "_id": "_design/Apple",
   "_rev": "8-e04d8b5633776545b9eacdc998db4aea",
   "language": "javascript",
   "views": {
       "all": {
           "map": "function(doc){ if(doc.type == 'apple'){emit(doc._id, doc);}}"
       }
   } 
}

public class Eiere extends CouchDbDocument {

    @TypeDiscriminator
    private String type;
    private String navn;
    private String telefon;
    @DocumentReferences(backReference = "eiere", fetch = FetchType.LAZY, descendingSortOrder = true)
    private Set<Apple> apple;
    private Date dateCreated;

    public Set<Apple> getApple() {
        return apple;
    }

    public void setApple(Set<Apple> apples) {
        this.apple = apples;
    }

    public void addApple(Apple c) {
        Assert.notNull(c, "Apple may not be null");
        if (getApple() == null) {
            apple = new TreeSet<Apple>();
        }
        c.setEiere(this.getId());
        apple.add(c);
    }

    public String getType() {
        if (type == null) {
            type = "eiere";
        }
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public String getNavn() {
        return navn;
    }

    public void setNavn(String navn) {
        this.navn = navn;
    }

    public String getTelefon() {
        return telefon;
    }

    public void setTelefon(String telefon) {
        this.telefon = telefon;
    }

    public Date getDateCreated() {
        return dateCreated;
    }

    public void setDateCreated(Date dateCreated) {
        this.dateCreated = dateCreated;
    }
}

public class Apple extends CouchDbDocument implements Comparable<Apple>{

    private static final long serialVersionUID = 1L;
    @TypeDiscriminator
    private String type;
    private List<String> prices;
    private String kategori;
    private String eiere;
    private Date dateCreated;

    public String getType() {
        if(type == null){
            type = "apple";
        }
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }

    public List<String> getPrices() {
        if(prices == null){
            prices = new ArrayList<String>();
            prices.add(0, " ");
            prices.add(1, " ");
            prices.add(2, " ");
        }
        return prices;
    }

    public void setPrices(List<String> prices) {
        this.prices = prices;
    }

    public String getKategori() {
        return kategori;
    }

    public void setKategori(String kategori) {
        this.kategori = kategori;
    }

    public String getEiere() {
        return eiere;
    }

    public void setEiere(String eiere) {
        this.eiere = eiere;
    }

    @Override
    public String toString() {
        return prices.toString();
    }

    public Date getDateCreated() {
        return dateCreated;
    }

    public void setDateCreated(Date dateCreated) {
        this.dateCreated = dateCreated;
    }

    @Override
    public int compareTo(Apple other) {
        if (other == this) return 0;
        if (dateCreated != null) {
            return - dateCreated.compareTo(other.dateCreated);  
        }
        return 0;
    }
} 
```

任何帮助我理解我做错了什么的帮助或建议将不胜感激。

编辑：如果有任何我可以添加的信息可以使我的问题更清楚或有助于确定问题的原因，请告诉我。

兄弟。

# c# - 链接行，单表 SQL

> ID：12550877
> 
> 赞同：0
> 
> 时间：2012-09-23T08:38:31.957
> 
> 标签：c#, sql, ms-access-2010

我有一张桌子，上面有零件和不同的阶段。`FromID=0`是输入零件材料的地方。`part1`并`part2`进行处理，然后组装成`part3`.

```
ID    Partname   FromID     Parts     Process
----------------------------------------------------
1     part1           0        10     process1 part1       
2     part1           1         0     process2 part1
3     part2           0        10     process1 part2
4     part2           1         0     process2 part2
5     part3           2         0     Assembly part1
6     part3           4         0     Assembly part2 
```

有没有办法编写查询来获取一个部件及其所有子部件，它们也可以处理嵌套的子部件？我正在使用 MS Access 2010 和 C#。

结果应该是这样的

**零件名称 = 第 1 部分**

```
ID    Partname   FromID     Parts     Work
-------------------------------------------
1     part1           0        10     work1 part1       
2     part1           1         0     work2 part1 
```

**零件名称 = 第 2 部分**

```
ID    Partname   FromID     Parts     Work
-------------------------------------------
3     part2           0        10     work1 part2
4     part2           1         0     work2 part2 
```

**零件名称 = 第 3 部分**

```
ID    Partname   FromID     Parts     Work
-------------------------------------------
1     part1           0        10     work1 part1       
2     part1           1         0     work2 part1
5     part3           2         0     Assembly part1
3     part2           0        10     work1 part2
4     part2           1         0     work2 part2
6     part3           4         0     Assembly part2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T08:49:54.040

使用修改后的前序树遍历来标记行以便快速查询。看看这篇文章：

[http://iamcam.wordpress.com/2006/03/24/storing-hierarchical-data-in-a-database-part-2a-modified-preorder-tree-traversal/](http://iamcam.wordpress.com/2006/03/24/storing-hierarchical-data-in-a-database-part-2a-modified-preorder-tree-traversal/)

如果您计划在 SQL Server 上部署，您可以考虑使用公用表表达式：

[http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms190766(v=sql.105).aspx)

# java - Spring 路由源和连接池

> ID：12550883
> 
> 赞同：3
> 
> 时间：2012-09-23T08:39:37.313
> 
> 标签：java, spring, connection-pooling

我正在使用此处解释的 spring Routing 数据源，并且运行良好。现在，我想添加连接池（Apache DBCP）。我把基础数据源改成了连接池数据源。好吧，它不起作用。

在服务器启动时，我看到正在发生连接池，我可以调试 Apache 的代码，但是当我尝试通过我的代码访问数据库时，我转到路由数据源，然后从那里转到 DriverManager 类获得连接 - 完全忽略 Apache 的代码。

```
<bean id="catalogDataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClass}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.user}" />
    <property name="password" value="${jdbc.pwd}" />
</bean>

<bean id="pool" class="org.apache.commons.pool.impl.GenericObjectPool">
    <property name="minEvictableIdleTimeMillis"><value>300000</value></property> 
    <property name="timeBetweenEvictionRunsMillis"><value>60000</value></property> 
</bean>

<bean id="dsConnectionFactory" class="org.apache.commons.dbcp.DataSourceConnectionFactory">
    <constructor-arg><ref bean="catalogDataSource"/></constructor-arg>
</bean>

<bean id="poolableConnectionFactory" class="org.apache.commons.dbcp.PoolableConnectionFactory">
    <constructor-arg index="0"><ref bean="dsConnectionFactory"/></constructor-arg>
    <constructor-arg index="1"><ref bean="pool"/></constructor-arg>
    <constructor-arg index="2"><null/></constructor-arg>
    <constructor-arg index="3"><null/></constructor-arg>
    <constructor-arg index="4"><value>false</value></constructor-arg>
    <constructor-arg index="5"><value>true</value></constructor-arg>
</bean>

<bean id="pooledDS" class="org.apache.commons.dbcp.PoolingDataSource" depends-on="poolableConnectionFactory">
    <constructor-arg><ref bean="pool"/></constructor-arg>
</bean>

<bean id="routingDataSource" class="something that derived from RoutingDataSource">
   <property name="defaultTargetDataSource" ref="pooledDS"/>
   <property name="targetDataSources">
   <map key-type="java.lang.Integer">
  </map>
   </property>
</bean> 
```

你能帮帮我吗 - 我做错了什么？

# delphi - 如何为接口对象注册预期的内存泄漏

> ID：12550887
> 
> 赞同：3
> 
> 时间：2012-09-23T08:40:16.500
> 
> 标签：delphi, memory-leaks, delphi-xe2

是否可以使用该程序注册接口`RegisterExpectedMemoryLeak`？

我有一个私有字段声明为：

```
FDragDropTarget: IDropTarget; 
```

然后我创建一个实例并尝试为这个对象注册一个已知的内存泄漏：

```
 FDragDropTarget := TDropTarget.Create(lcMain.Handle, FDragDrop);
  RegisterExpectedMemoryLeak(FDragDropTarget); 
```

但是，我收到一个编译器错误，指出存在不兼容的类型：“Pointer”和“IDropTarget”。对我来说，我的接口实例还是一个指针？

那我可以这样做吗？它是通过 ReportMemoryLeaksOnShutdown := 我在 .dpr 文件中的 True 声明进行报告的。

```
begin
  ReportMemoryLeaksOnShutdown := True;
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm2, Form2);
  Application.Run;
end. 
```

TDropTarget 是我对 IDropTarget 接口的实现：

```
 TDropTarget = class(TInterfacedObject, IDropTarget)
  ...
  end; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:56:50.973

泄漏的不是接口，而是实现它的对象。所以我认为这是需要注册的：

```
FDragDropTargetObj: TDropTarget;
FDragDropTarget: DropTarget;

FDragDropTargetObj := TDropTarget.Create(lcMain.Handle, FDragDrop); 
FDragDropTarget := FDragDropTargetObj;
RegisterExpectedMemoryLeak(FDragDropTargetObj); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T10:26:04.627

您需要注册实现对象，而不是接口，因为认为泄漏：

```
RegisterExpectedMemoryLeak(FDragDropTarget as TObject); 
```

该对象泄漏的事实表明您的引用计数以某种方式被破坏。我可能会寻求解决根本问题而不是压制它。

# jquery - 将 jquery 字符串传递给剃须刀中的代码

> ID：12550889
> 
> 赞同：0
> 
> 时间：2012-09-23T08:40:46.520
> 
> 标签：jquery, asp.net-mvc-3, razor

我想知道如何将我用 javascript 制作的字符串传递到 razor 中的代码块中。鉴于下面几行简单的js：

```
var k=0;
var str1 = 'Model.FeaturedItems[';
var str2 = '].SubHeadline.ToString();';
var query = str1 + k +str2; 
```

然后我将如何将字符串查询传递到代码块中？像这样的东西：

```
 alert("@"+query); 
```

应该打印该行代码的结果。 **编辑：** 基本上我想执行这段代码：`Model.FeaturedItems[0].SubHeadline.ToString();`并在 jquery 中对结果做一些事情。但是，尝试上述方法时，我不断收到语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:51:22.083

`javascript`在客户端和`razor`服务器上工作，您尝试在服务器上执行客户端代码。只需`c#`在代码块中使用：

`C#`代码：

```
@{
    int k = 0; 
    var query = Model.FeaturedItems[k].SubHeadline.ToString(); 
} 
```

在客户端`@query`将包含一些数据，如果它在剃刀视图中：

```
<script type="text/javascript">
    alert(@query); 
<script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:51:51.070

这是不可能的。主要原因是 JavaScript 代码在客户端运行，而剃刀视图正在服务器端呈现。在客户端[ASP.NET MVC 3 Razor 上创建 SubHeadlines 数组：初始化一个 JavaScript 数组](https://stackoverflow.com/questions/6777385/asp-net-mvc-3-razor-initialize-a-javascript-array)。

# actionscript-3 - Flash 和 Google Drive SDK 无法相互通信

> ID：12550894
> 
> 赞同：2
> 
> 时间：2012-09-23T08:41:45.097
> 
> 标签：actionscript-3, flash, oauth-2.0, google-drive-api

我需要创建一个连接到 Google Drive SDK 的 Flash Web 应用程序来检索公共二进制文件，但我面临跨域安全问题。

我可以使用带有 CORS**的跨站点 xmlhttprequest在 javascript 中执行此操作。**在 AS3 中，在*docs.google.com上请求一个***crossdomain.xml**文件。但是，当前设置不允许闪存访问该文件。

 *到目前为止，我的解决方案是使用 javascript 获取数据并使用 ExternalInterface 将其发送到 swf。

有没有**更好的解决方案**（代理不是我的选择）？

**编辑**：似乎理想的解决方案是授予对[https://docs.google.com/crossdomain.xml](https://docs.google.com/crossdomain.xml)中授权标头的访问权限：

```
<cross-domain-policy>
     <allow-http-request-headers-from domain="*" headers="Authorization">
      </allow-http-request-headers-from>
</cross-domain-policy> 
```

此更改将赋予 Flash API 与 Javascript 相同的安全权限。

google drive sdk 团队能评论一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:11:20.990

CORS 适用于大多数使用 Google Drive API 的操作。正如您所说的，您可以使用 Google JavaScript 客户端并使用 ExternalInterface。我现在可能更喜欢这个解决方案，具体取决于你在做什么。*

# php - 什么是元描述的正则表达式代码

> ID：12550903
> 
> 赞同：0
> 
> 时间：2012-09-23T08:45:16.330
> 
> 标签：php, regex

我正在寻找元描述标签的正则表达式代码。

```
#<meta|name="description|".*content|="([^"]+)"># <- 
```

这就是我所拥有的，但它与大写字母不匹配，因为我发现一些标签就像`META DESCRIPTION =`，等等。

是否有新代码或更改此代码以匹配大写字母内容的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T12:17:43.753

您的正则表达式`<meta|name="description|".*content|="([^"]+)">`已损坏，这意味着：

*   `<meta`
    **或者**
*   `name="description`
    **或者**
*   `"`后跟任何内容，然后是`content`
    **OR**
*   `="`后跟至少一个不`"`跟在后面的字符`">`

## 警告！

让我说[用正则表达式解析 HTML 是一个非常糟糕的主意](https://stackoverflow.com/a/1732454/1184510)。

## 用于培训目的的正则表达式替代方案

但是如果你想尝试一些训练，开始改进这个：

`#<meta name="description" content="([^"]+)">#i`

这是不区分大小写的，并且执行您认为的操作。

## 假阴性

请注意，它不会匹配这样的有效元素：

```
<meta name="description"      content="foo bar baz"> 
```

或者

```
<meta
   name="description"
   content="foo bar baz"> 
```

或者

```
<meta content="foo bar baz" name="description"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-07T11:02:21.080

检查此[php 函数](http://php.net/manual/en/function.get-meta-tags.php)以轻松获取所有元详细信息，包括描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T06:37:15.157

你可以像这样使用它：

```
/<meta[^>]*name=[\"|\']description[\"|\'][^>]*content=[\"]([^\"]*)[\"][^>]*>/i 
```

也适用于压缩的 html 代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T08:55:48.523

`i`在最后一个`#`.

像这样：

```
#<meta|name="description|".*content|="([^"]+)">#i 
```

这将告诉您的正则表达式不区分大小写。[在此处](http://www.javascriptkit.com/javatutors/redev.shtml)阅读有关标志的更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-13T09:32:15.593

```
<meta\s+(?=[^>]*name\s*=\s*("|')description\1)[^>]*content\s*=\s*("|')(.*?)\2[^>]*> 
```

# javascript - 通过脚本文件添加 jquery 脚本

> ID：12550904
> 
> 赞同：0
> 
> 时间：2012-09-23T08:45:45.680
> 
> 标签：javascript, jquery, html, css

我有在任何 HTML 页面中创建 div 和动画 div 的脚本 (myscript.js)。我的脚本正在使用 Jquery 动画功能

我目前正在使用以下代码（它是示例片段）

```
<script src="jquery.js"><script>
<script src="myscript.js"><script> 
```

但这是否可以仅使用以下可以自动添加 JQuery 库的代码？

```
<script src="myscript.js"><script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T08:51:05.130

在你的 myscript.js 上插入这个

```
var h=document.getElementsByTagName('head')[0];
var s=document.createElement('script');
s.type='text/javascript';
s.src='http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js';
h.appendChild(s); 
```

但是您必须等到使用 waitforload 函数加载脚本

```
function w4l(){
    if (typeof jQuery != "function"){
        setTimeout("w4l()", 1000);
        return;
    }else{
        //Do Jquery thing
    }
}
w4l(); 
```

或者只是简单地将所有 jquery.js 代码文件复制到您的 myscript.js 中，AKA 将 2 文件合并为一个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T08:47:35.407

要确保在加载**jQuery**`myscript.js`之前不会执行其余部分，请使用以下内容：

 **```
function dostuff() {
    //animate elements, etc.
}
var head = document.getElementsByTagName('head')[0];
var script = document.createElement('script');
script.type = 'text/javascript';
script.src = 'jquery.js';
script.onreadystatechange = dostuff;
script.onload = dostuff;
head.appendChild(script); 
```

**注意：有点不清楚****为什么**你不想在你的`head`.**

# asp.net-mvc - 在 ASP.NET MVC 中提供共享图像

> ID：12550905
> 
> 赞同：0
> 
> 时间：2012-09-23T08:46:02.007
> 
> 标签：asp.net-mvc, image, asp.net-web-api

我正在开发一个项目，该项目涉及托管在同一 IIS 7.5 服务器上的两个 Web 门户：（A）用于管理的 MVC4 Web 应用程序（B）带有 jQ​​uery Mobile 的 Mobile MVC4 Web 应用程序

两者都从托管在其他 IIS 服务器上的基于 Web API 的服务中检索数据。

现在，我将添加在管理门户 (A) 上管理并在移动应用程序 (B) 中显示给客户端的图像操作。图像将以更高的频率动态添加/更改。

我想到了两个解决方案：

1.  将托管 Web API 的服务器上的所有图像作为字节数组存储在数据库中，并以 base64 字符串的形式按需发送 - 在移动应用程序页面上以 base64 字符串的形式呈现它们：

    *   可以设置任何类型的安全限制并将它们与 MVC 很好地集成
    *   页面将在一个请求中呈现
    *   从 Web API 转移到移动应用程序
    *   缓存会发生什么？
2.  将托管 (A) 和 (B) 的服务器上的所有图像存储在某个共享文件夹中，并将它们作为常规标签包含在呈现的页面中。

    *   WebAPI 和 Web 服务器之间没有传输
    *   缓存图像
    *   页面上每个图像的多个请求

我还必须考虑的是，会有原生 iPhone 应用程序扮演与移动 Web 应用程序相同的角色，这意味着它应该可以访问相同的图像集。

对此的任何想法都将不胜感激，我正在寻找最佳实践解决方案、指南、提示或任何我可以使用的东西。

此外，如果建议选项 2.，存储要在两个门户之间共享的图像的最佳位置是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T13:00:51.193

我建议您使用选项 2 并将图像存储在某个共享文件夹中。最好的办法是拥有一个特定的应用程序，作为托管所有静态资源的 CDN。根据[YSlow 的最佳实践](http://developer.yahoo.com/performance/rules.html)，这个 CDN 应该托管在与客户端不同的顶级域上，从而允许对那些降低带宽消耗的人进行无 cookie 访问。

# php - ZendFramework 2 教程和 ide

> ID：12550908
> 
> 赞同：1
> 
> 时间：2012-09-23T08:46:21.703
> 
> 标签：php, zend-framework2

与 ZendFramework 2 一起使用的最佳 id 是什么？什么是学习 ZendFramework 最简单的来源？

我是 zend 框架的新手。当谈到 zend 框架 2 时，我宁愿有一些书或至少一些易于理解的文档？

你们中有人使用 Zend Framework 2 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:35:25.387

Zend Framework 2 仅在几天前发布，因此可用的资源并不多。就我而言，目前还没有涵盖 2.0 的书出版。然而，应该只需要几周时间就会有可用的书籍（例如，Rob Allen 已经[宣布](http://akrabat.com/zfia/zend-framework-2-in-action/)了他的书“Zend Framework in Action”的续集，其中涵盖了第 2 版）。不要使用涵盖 1.0 的书籍，因为 ZF1 和 ZF2 之间的变化太大。

目前，ZF2 的一个很好的起点是[骨架应用程序](http://framework.zend.com/downloads/skeleton-app)，它显示了基本结构，当然还有[Zend Framework 2 的程序员参考指南](http://zf2.readthedocs.org/en/latest/index.html)。

# java - Android/Java 中的 OOP

> ID：12550911
> 
> 赞同：2
> 
> 时间：2012-09-23T08:46:58.350
> 
> 标签：java, android, oop

我目前正在开发一个抽认卡应用程序，因为我不喜欢现有的，第二个原因是我想提高我的 java/android 技能。

在我的应用程序中，我尝试使用 OOP。我的卡片存储在 sqlite 数据库中。

现在我的问题：目前我的对象“卡”代表一个单一的闪存卡有它自己的数据库适配器，它可以用来更新它自己的状态，即它的点。

```
 Card card = new Card();
 card.setPoints(10); //<-- Also update its row in the database 
```

还是做这样的事情更好：

```
 DBAdapter dbAdapter = new DBAdapter();
 Card card = new Card();
 dbAdapter.setPoints(Card);//<-- Updates Card and Database! 
```

你觉得什么比较好？

提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T08:54:23.830

您在第二个示例中所做的事情是不可取的，因为您正在创建副作用。更新数据库也是更新卡，这是错误的。更新数据库应该做一件事，那就是更新数据库。

我更喜欢第一种方法，因为卡知道如何更新自己，但你也在更新数据库时犯了同样的错误。让数据库知道如何更新自己，让卡知道如何更新自己。我认为它实现了关注点的清晰分离。

例如：

```
card.setPoints(points)//update card and only card
dbAdapter.setPoints(card) //update the database and nothing else. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T08:50:52.540

绝对是第一个。设置点的类应该不知道如何设置（或存储）点。这是一种“责任分离”。

想象一下，如果您决定从数据库更改为 ACME Dilithium Crystal Accumulator(TM)。选项 1 和选项 2 需要更改多少代码？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T09:08:35.717

我想两者都不是。

```
 dbAdapter.update(card.getId(),card.getPoint()); 
```

语法应该是

```
 public boolean update(int id, int value) 
```

您的 DbAdapter 应该只具有存储或检索、删除数据的方法，它们不应特定于卡功能。

在上面的示例中`card.getId()` 返回`URI`关联，`Card`然后它只更新整数值，因此您的代码具有职责分离和隔离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T08:52:09.963

如果上面提到的两个代码片段都有效，我更喜欢第一个而不是第二个，因为代码看起来更易读、更直观并且更短！

我希望这有帮助。

# python - Flask Bable - [jinja2: **/templates/**.html] SyntaxError: invalid syntax

> ID：12550913
> 
> 赞同：0
> 
> 时间：2012-09-23T08:47:15.057
> 
> 标签：python, flask, python-babel, flask-babel

我发现 Flask Babel 和 Jinja 之间的文档令人困惑。

```
ubuntu@ubuntu-VirtualBox:~/workspace/rtbopsConfig/rtbDashboard3$ python run.py 
Traceback (most recent call last):
  File "run.py", line 11, in <module>
    from app import app
  File "/home/ubuntu/workspace/rtbopsConfig/rtbDashboard3/app/__init__.py", line 14, in <module>
    app.config.from_pyfile('babel.cfg')
  File "/usr/local/lib/python2.7/dist-packages/flask/config.py", line 129, in from_pyfile
    execfile(filename, d.__dict__)
  File "/home/ubuntu/workspace/rtbopsConfig/rtbDashboard3/app/babel.cfg", line 1
    [jinja2: **/templates/**.html]
           ^
SyntaxError: invalid syntax 
```

这是每个文档。

```
[python: **.py]
[jinja2: **/templates/**.html]
extensions=jinja2.ext.autoescape,jinja2.ext.with_ 
```

这是我的`__init__.py`文件

```
import os
from flask import Flask
from flaskext.babel import Babel
from config import basedir

app = Flask(__name__)
app.config.from_object('config')
app.config.from_pyfile('babel.cfg')
babel = Babel(app) 
```

现在这让我无处可去。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T08:54:51.933

该`babel.cfg`文件未集成为 Flask 配置文件；它只能与`pybabel`命令行工具一起*使用*：

```
pybabel extract -F babel.cfg -o messages.pot . 
```

从`app.config.from_pyfile('babel.cfg')`您的`__init__.py`. Flask Babel 文档顶部的 Flask 示例碰巧使用了`from_pyfile('mysettings.cfg')`，但您的项目已经使用`from_object(config)`.

# xcode - 带有 Clang 编译器的 Mac OS X 上的 CMake 和 GCOV，生成 gcno 但不生成 gcna

> ID：12550918
> 
> 赞同：2
> 
> 时间：2012-09-23T08:47:51.647
> 
> 标签：xcode, macos, cmake, gcov

我正在开发一个 C 项目并使用 CMake。我一直在尝试使用 GCOV 进行覆盖测试，并且即将完成。

这是我到目前为止所知道的：

```
-use clang for c compiler. "gcc" on the latest Xcode does nothing with -fprofile-arcs and -ftest-coverage
-add -fprofile-arcs and -ftest-coverage to c debug flags
-set cmake build type to Debug
-run cmake to build makefile
-double check that gcno files are created for each source file compiled (they are). 
```

这就是我现在卡住的地方。我运行了一项单元测试，但没有创建任何 .gcna 文件。

奇怪的是，当我使用 CMake 生成一个 Xcode 项目，并打开“生成测试覆盖文件”和“仪器程序流程”时，我得到了 gcno 和 gcna 文件。

我在使用 VERBOSE=1 运行 make 时验证了正在使用正确的编译器和链接器标志。

我还查看了 Xcode 以查看 Xcode 使用的任何其他库或特殊开关是否未在 makefile 中使用 - 除了 -fprofile-arcs 和 -ftest-coverage 之外，我没有看到任何其他内容。

还有其他人经历过吗？

我希望能够生成 gcna 文件，这样我就不必为所有事情都进入 Xcode。

# php - 日期时间格式不起作用

> ID：12550919
> 
> 赞同：0
> 
> 时间：2012-09-23T08:47:57.887
> 
> 标签：php

我正在尝试格式化日期，但它不起作用？

```
$date = new DateTime('23/09/2012 08:12:14 AM');
echo $date->format('l, dS F Y, H:i:s A'); 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:48:50.540

使用`createFromFormat`：

```
$date = DateTime::createFromFormat('d/m/Y h:i:s A', '23/09/2012 08:12:14 AM');
echo $date->format('l, dS F Y, H:i:s A'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T08:53:33.967

```
<?php

$result = mysql_query("SELECT `datetime` FROM `table`");
$row = mysql_fetch_row($result);
$date = date_create($row[0]);

echo date_format($date, 'Y-m-d H:i:s');
#output: 2012-03-24 17:45:12

echo date_format($date, 'd/m/Y H:i:s');
#output: 24/03/2012 17:45:12

echo date_format($date, 'd/m/y');
#output: 24/03/12

echo date_format($date, 'g:i A');
#output: 5:45 PM

echo date_format($date, 'G:ia');
#output: 05:45pm

echo date_format($date, 'g:ia \o\n l jS F Y');
#output: 5:45pm on Saturday 24th March 2012

?> 
```

尝试参考这个网站....会有所帮助

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# rubymotion - 如何在导航栏中设置背景图像

> ID：12550920
> 
> 赞同：1
> 
> 时间：2012-09-23T08:48:11.497
> 
> 标签：rubymotion

我正在使用最新版本的 RubyMotion。

我正在尝试在 RubyMotion 的导航栏上设置自定义背景图像。但我不断收到错误。

**这是我在 AppDelegate 中的代码：**

```
dashboardController = DashboardController.alloc.initWithNibName(nil, bundle: nil)
nav_controller = UINavigationController.alloc.initWithRootViewController(dashboardController)

image = UIImage.imageNamed('navbar/background_navbar.png') 
nav_controller.appearance.setBackgroundImage(image, forBarMetrics:UIBarMetricsDefault) 
```

**这是错误：**

```
*** Terminating app due to uncaught exception 'NoMethodError', reason: 'app_delegate.rb:10:in `application:didFinishLaunchingWithOptions:': undefined method `appearance' for #<DashboardController:0x6c4a9a0> (NoMethodError) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T12:20:16.803

例外是告诉你`UINavigationController`没有`appearance`方法。

如果要更改应用中所有导航栏的外观，可以`UINavigationBar`使用`UINavigationBar.appearance.setBackgroundImage(...`.

如果您只想更改`navigationBar`当前的`UINavigationController`然后调用`nav_controller.navigationBar.setBackgroundImage(...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:38:55.603

这是一个很好的例子：[https ://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_2/10_imagenavbar](https://github.com/IconoclastLabs/rubymotion_cookbook/tree/master/ch_2/10_imagenavbar)

做你想做的事的代码。

# java - Java：构造函数不返回。但它确实如此？

> ID：12550922
> 
> 赞同：1
> 
> 时间：2012-09-23T08:48:28.963
> 
> 标签：java

statement_1：每当定义类的构造函数时，都会跳过返回类型，即构造函数不返回任何内容。因此，即使它也不能被宣布为无效。

statement_2：但是`classname obj = new classname()`遇到JVM会创建一个对象并*返回*一个对`obj`变量的引用。

这两种说法都是正确的。现在我想知道 statement_2 与 statement_1 的关系。

我的问题是`obj`如果构造函数没有返回任何东西，如何初始化？意味着它确实返回了一些东西，那么它应该具有类的返回类型。

```
class Myclass{
              Myclass Myclass(){
                                   //return something of Myclass type 
               }

} 
```

那么`Myclass obj = new Myclass()`它不应该更有意义。

对这个话题有更多的了解

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T08:55:24.420

当您编写`classname obj = new classname()`时，它是`new`创建和返回对象的运算符。构造函数用于初始化它（例如设置任何字段），因此不返回任何内容。

您可以将其视为 3 个步骤

1.  `new`创建对象
2.  `new`在刚刚创建的对象上调用构造函数
3.  `new`返回创建的对象

[您可以在 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)中阅读有关对象创建的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T08:56:10.723

这是一条规则。构造函数没有返回类型。当您调用时，`new Foo()`您使用的是`new`运算符，然后是构造函数调用。

它是*构成表达式*并返回类型对象的`new`运算符。*`Foo`*

 *如果构造函数有返回类型，你就可以写

```
Foo something = Foo(); 
```

或者只是（假设 return `void`）

```
Foo(); 
```

但这两条代码都是非法的。构造函数调用必须**始终**以`new`运算符开头。`new`运算符创建一个类型的对象（`Foo`例如分配存储空间），将该对象传递给构造函数进行*初始化*，最后将初始化的实例返回给调用者。

您可能想知道为什么对象创建语法如此接近正常的方法调用。我想这是允许将参数传递给构造函数。他们本可以制作一种特殊的语法，例如

```
Foo foo = new Foo 
```

请注意缺少的括号，因此这与方法调用不同。但是，如何将参数传递给构造函数？也许只是通过列出它们

```
Foo foo = new Foo "Hello", "World" 
```

但是这种语法与在单个语句中初始化两个或多个变量的语法冲突，即

```
Number a = new Integer(12), b = new Float(1.2); 
```

所以他们最终选择了这种语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T08:57:34.977

这里的构造函数没有返回任何东西，这个语句只返回分配了 obj 对象的内存地址。& 它是 new operator 的工作，这就是我们在这里需要 new operator 的原因

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T08:58:43.820

构造函数不返回任何东西。构造函数旨在初始化您的实例变量。当你说

```
 Foo f = new Foo(); 
```

**new**运算符创建一个 Foo 对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T08:58:56.620

即使在字节码级别，构造函数也不会返回任何内容。它与返回的方法具有相同的返回类型，`void` 而是将对象作为参数作为`this`初始化参数。

注意：没有选项返回不同的对象，这就是需要工厂方法的原因。*

# c# - WPF ComboBox：ComboBoxItems 的静态列表，但数据绑定 SelectedItem？

> ID：12550926
> 
> 赞同：15
> 
> 时间：2012-09-23T08:49:23.707
> 
> 标签：c#, wpf, data-binding, combobox

在我的 WPF 应用程序中，我有一个 ComboBox，其中填充了 ComboBoxItems 的静态列表，因为它的内容永远不会改变。但是，因为我想将 SelectedItem 数据绑定到我的底层 ViewModel，我希望每个 ComboBoxItem 也有一个单独的值，该值将分配给我的 ViewModel 属性。我很难让这个工作正常进行。

我的 ComboBox 声明如下所示：

```
 <ComboBox Height="23" HorizontalAlignment="Stretch" Margin="2" Name="comboBox1" VerticalAlignment="Top"
              SelectedItem="{Binding Path=Amount, Mode=TwoWay}" SelectedValuePath="Tag" >
        <ComboBoxItem Content="None" Tag="0" />
        <ComboBoxItem Content="Few" Tag="1" />
        <ComboBoxItem Content="Some" Tag="2" />
        <ComboBoxItem Content="Enough" Tag="3" />
        <ComboBoxItem Content="Lots" Tag="4" />
        <ComboBoxItem Content="Too much" Tag="5" />
    </ComboBox> 
```

此 ComboBox 的 SelectedItem 绑定到 ViewModel 的 Amount 属性，该属性被声明为整数：

```
public class MyViewModel : INotifyPropertyChanged
{
    private int _amount = 3;

    public int Amount
    {
        get { return _amount; }
        set
        {
            _amount = value;
            OnPropertyChanged("Amount");
        }
    }

    //...
} 
```

我希望 SelectedValuePath="Tag" 会告诉 WPF 它应该使用 Tag 值绑定到 ViewModel 的 Amount 属性，但是当我运行此应用程序并更改 ComboBox 的选定项时，调试跟踪告诉我：

```
System.Windows.Data Error: 23 : Cannot convert 'System.Windows.Controls.ComboBoxItem: Some' from type 'ComboBoxItem' to type 'System.Int32' for 'en-US' culture ...
System.Windows.Data Error: 7 : ConvertBack cannot convert value 'System.Windows.Controls.ComboBoxItem: Some' (type 'ComboBoxItem'). (...) System.NotSupportedException: Int32Converter cannot convert from System.Windows.Controls.ComboBoxItem. 
```

显然，它试图将整个 ComboBoxItem 绑定到我的 ViewModel，而不仅仅是它的 Tag 值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-23T08:57:34.337

如果使用`SelectedValuePath`，则需要绑定到[SelectedValue](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedvalue.aspx)属性，该属性是

> 获取或设置SelectedItem的值，通过SelectedValuePath获取

所以修改你的绑定到

```
SelectedValue="{Binding Path=Amount, Mode=TwoWay}" 
```

因为根据您的经验，`SelectedItem`将始终包含实际选择的项目（在您的情况下为`ComboBoxItem`）而不是值。

# cuda - 2D 纹理的间距对齐

> ID：12550927
> 
> 赞同：5
> 
> 时间：2012-09-23T08:49:26.363
> 
> 标签：cuda, textures

2D 纹理是 CUDA 在图像处理应用中的一个有用特性。要将音高线性内存绑定到 2D 纹理，内存必须对齐。`cudaMallocPitch`是对齐内存分配的好选择。在我的设备上，返回的音高`cudaMallocPitch`是 512 的倍数，即内存是 512 字节对齐的。

设备的实际对齐要求`cudaDeviceProp::texturePitchAlignment`取决于我设备上的 32 字节。

**我的问题是：**

如果 2D 纹理的实际对齐要求是 32 字节，那么为什么`cudaMallocPitch`返回 512 字节对齐的内存呢？

这不是浪费内存吗？例如，如果我创建一个大小为 513 x 100 的 8 位图像，它将占用 1024 x 100 字节。

我在以下系统上得到这种行为：

1：华硕 G53JW + Windows 8 x64 + GeForce GTX 460M + CUDA 5 + Core i7 740QM + 4GB RAM

2：戴尔 Inspiron N5110 + Windows 7 x64 + GeForce GT525M + CUDA 4.2 + Corei7 2630QM + 6GB RAM

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T10:35:47.517

这是一个略微推测的答案，但请记住，分配的间距必须满足纹理的*两个*对齐属性，一个用于纹理指针，一个用于纹理行。我怀疑这`cudaMallocPitch`是对前者的尊重，由`cudaDeviceProp::textureAlignment`. 例如：

```
#include <cstdio>

int main(void)
{
    const int ncases = 12;
    const size_t widths[ncases] = { 5, 10, 20, 50, 70, 90, 100,
        200, 500, 700, 900, 1000 };
    const size_t height = 10;

    float *vals[ncases];
    size_t pitches[ncases];

    struct cudaDeviceProp p;
    cudaGetDeviceProperties(&p, 0);
    fprintf(stdout, "Texture alignment = %zd bytes\n",
            p.textureAlignment);
    cudaSetDevice(0);
    cudaFree(0); // establish context

    for(int i=0; i<ncases; i++) {
        cudaMallocPitch((void **)&vals[i], &pitches[i], 
            widths[i], height);
        fprintf(stdout, "width = %zd <=> pitch = %zd \n",
                widths[i], pitches[i]);
    }

    return 0;
} 
```

在 GT320M 上给出以下信息：

```
Texture alignment = 256 bytes
width = 5 <=> pitch = 256 
width = 10 <=> pitch = 256 
width = 20 <=> pitch = 256 
width = 50 <=> pitch = 256 
width = 70 <=> pitch = 256 
width = 90 <=> pitch = 256 
width = 100 <=> pitch = 256 
width = 200 <=> pitch = 256 
width = 500 <=> pitch = 512 
width = 700 <=> pitch = 768 
width = 900 <=> pitch = 1024 
width = 1000 <=> pitch = 1024 
```

我猜这`cudaDeviceProp::texturePitchAlignment`适用于 CUDA 数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T09:54:09.797

在对内存分配进行了一些实验之后，我终于找到了一个可以节省内存的工作解决方案。如果我强制对齐分配的内存`cudaMalloc`，则`cudaBindTexture2D`可以完美运行。

```
cudaError_t alignedMalloc2D(void** ptr, int width, int height, int* pitch, int alignment = 32)
{       
   if((width% alignment) != 0)
      width+= (alignment - (width % alignment));

   (*pitch) = width;

   return cudaMalloc(ptr,width* height);
} 
```

此函数分配的内存是 32 字节对齐的，这是`cudaBindTexture2D`. 我的内存使用量现在减少了 16 倍，所有使用 2D 纹理的 CUDA 函数也可以正常工作。

这是一个小实用函数，用于获取当前选择的 CUDA 设备间距对齐要求。

```
int getCurrentDeviceTexturePitchAlignment()
{
   cudaDeviceProp prop;
   int currentDevice = 0;

   cudaGetDevice(&currentDevice);

   cudaGetDeviceProperties(&prop,currentDevice);

   return prop.texturePitchAlignment;
} 
```

# python - 如何通过添加列表来使列表列表中的所有列表具有相同的长度

> ID：12550929
> 
> 赞同：5
> 
> 时间：2012-09-23T08:50:03.790
> 
> 标签：python, python-2.7

我有一个嵌套列表，其中包含用字符串填充的列表。我要做的是使这个嵌套中的每个列表的长度与该嵌套中最长的可用列表的长度相同。这听起来很容易，但我的尝试失败了（我对编程完全陌生），我找不到一个足够相关的已回答问题来解决我的问题。

首先，我确定最长的列表有多长：

```
maxSS7 = max(len(i) for i in ssValues7)) 
```

然后，如果每个列表的长度与最长列表的长度不同，我将使用 for 循环将每个列表扩展一定数量的“null”：

```
for row in ssValues7:
    if row < len(maxSS7):
        row.extend(['null' * (len(maxSS7) - len(row))]) 
```

我将行扩展为“null”*最长列表和当前列表之间的差异。没有发生错误，但不幸的是它似乎对我的嵌套列表没有任何作用。

有人可以告诉我我的错误吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T08:56:40.140

该表达式`'null' * (len(maxSS7) - len(row))`创建*一个*可能很长的字符串。

采用

```
row.extend('null' for _ in xrange(maxSS7 - len(row))) 
```

反而。生成器表达式让您避免创建一个额外的列表对象来扩展`row`。

```
>>> ['null' * 2]
['nullnull']
>>> ['null' for _ in xrange(2)]
['null', 'null'] 
```

但是`.extend`调用本身永远不会到达，因为您`if`的声明正在测试错误的东西；将其更改为：

```
 if len(row) < maxSS7: 
```

`maxSS7`是一个数字（最长列表的长度）；询问该数字的长度不是您想要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-23T08:57:23.530

问题出在这条线上：

```
if row < len(maxSS7): 
```

您正在将*list* `row`与*integer* `len(maxSS7)`进行比较。它将评估`False`每次。将其更改为：

```
maxLen = max(map(len, myList))
for row in myList:
    if len(row) < maxLen:
        row.extend(...) 
```

Martijn Peters[在他的回答中指出了您的代码的另一个问题](https://stackoverflow.com/a/12550972/1142167)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-28T09:37:51.010

你可以这样做，

```
maxLen = max(map(len, arr))
[row.extend(['null']*(maxLen - len(row))) for row in arr] 
```

# facebook - 关于为 facebook 创建应用程序的问题

> ID：12550932
> 
> 赞同：0
> 
> 时间：2012-09-23T08:50:32.130
> 
> 标签：facebook, ssl, https, hosting, web-hosting

目前我正在创建一个示例 facebook 应用程序。问题是它以两种类型要求我的应用程序 url。**Canvas url 和 Secure canvas url**我在此链接[Fb app url](http://praveen.comyr.com/fb/#slide1)上托管了我的应用程序，但托管没有为我提供 ssl 即带有**https**的链接由于这个问题，我无法包含**Secure canvas url** 我该如何克服这个问题。我该如何解决这个问题。是否有任何方法可以在没有安全画布 url 的情况下提交 facebook 应用程序，或者是否有任何免费的虚拟主机站点也提供 ssl (https)。请建议我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:52:10.367

不，您必须获得 ssl 证书才能保护 url

检查一下[什么是 SSL，什么是证书？](http://tldp.org/HOWTO/SSL-Certificates-HOWTO/x64.html)和[没有 SSL 证书的 Https 连接](https://stackoverflow.com/questions/3865039/https-connection-without-ssl-certificate)

这是[免费的 SSL 证书：由 Comodo](http://www.instantssl.com/ssl-certificate-products/free-ssl-certificate.html)提供 90 天，但我从未尝试过

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T08:53:22.910

试试heroku。在您注册应用程序时，Facebook 会为您提供该选项。

# delphi - 如何修改 TCustomEdit 以便所有后代继承更改？

> ID：12550934
> 
> 赞同：0
> 
> 时间：2012-09-23T08:51:02.857
> 
> 标签：delphi, vcl

读完[这个问题](https://stackoverflow.com/questions/9941787/is-it-possible-to-determine-if-the-text-in-a-dbedit-is-longer-than-what-is-visib)后，我想知道是否可以修改`TCustomEdit`以检查文本宽度，使其所有后代也继承更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T13:50:38.267

您所做的大多数更改`TCustomEdit`将由后代继承。这通常是继承的工作方式。不过，这具体取决于您所做的更改：

*   如果您编辑*StdCtrls.pas*，那么您所做的任何更改都将被任何新编译的代码继承。这种技术的一个障碍是让 Delphi 接受对您的*StdCtrls.pas*版本的更改，而不必重新编译库中难以或不可能重新编译的其他部分。

*   如果您`TCustomEdit`在运行时修补方法（通过覆盖方法的前几个字节以将控制直接控制到您自己的方法的常用技术），那么这些更改也将被后代继承。

*   如果您修补`TCustomEdit`虚拟方法表，则将继承*一些更改，但不是全部。*对修补方法的虚拟调用将使用您的自定义版本，但非虚拟调用将继续使用原始版本。当后代使用`inherited`时，对继承方法的调用的调度不是虚拟的，因此不涉及 VMT，后代最终将调用原始`TCustomEdit`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T19:36:40.150

TCustomEdit 在 stdctrls 单元中。要测试将继承哪些更改，请不要修改 VCL 路径上的更改，将 stdctrls 复制到您的主项目文件夹并在那里进行修改。Delphi 将首先找到您修改后的单元并使用它。

这使得所有其他项目和 VCL 补丁都使用/更新原始单元。您的修补单元不会受到影响。

如果我是对的，那么即使在新位置进行修改也会导致相关 VCL 单元的重建。因此，当切换到其他项目时，您需要进行构建，以便使用有效“切换回”的原始单元使用 VCL 部件重新编译。

# r - 像 SAS 宏一样在 R 中导入数据

> ID：12550936
> 
> 赞同：0
> 
> 时间：2012-09-23T08:51:09.283
> 
> 标签：r, import

在 SAS 中，我们可以编写宏来导入文件。宏可以是以下形式：

```
%MACRO IMPORT_Data(OUT = , FILE = );

        data &OUT ;  
           infile "&INPUT_path.\&File" 
           delimiter = ',' MISSOVER DSD lrecl=32767
           firstobs=2 ;

           input 
              Var1 : $10.
              Var2 : best12.
              Var3 : Percent5.2
              Var4 
              Var5 

           ;
%mend; 
```

一旦我们有了这个宏，我们只需要更改文件名，然后运行宏。我们不需要在每次读取文件时都编写导入文件语法。任何人都可以帮助我获得 R 中的版本吗？参考也非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:19:50.850

您正在寻找一个功能。用户定义的函数，用于读取指定`csv`文件，将某些格式应用于一个或多个列，并返回结果。这是一个例子：

```
import_macro <- function(file, ...) {
data <- read.csv(file, ...)
# do whatever formatting you need to do. e.g.
data$v1 <- as.numeric(data$var1)
# var1 should be a column in your csv otherwise change it to something else
return(data)
} 
```

然后你只需运行：

```
my_data <- import_macro('~/Desktop/file.csv', header = TRUE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:01:07.703

下面的代码帮助我像在 SAS 中一样读取数据。但我无法在这里格式化我的数据。因此，提出答案以获得一些有用的评论。

```
imp<-strmacro(df,var,expr={df<-read.csv("C:\\Users\\RAW_DATA\\var.csv")})

mydata<-imp(mydata,"Import_data")  /* Data set file name*/
View(mydata) 
```

# google-sheets - 匿名共享文档中的保护范围未按预期工作

> ID：12550938
> 
> 赞同：3
> 
> 时间：2012-09-23T08:51:31.357
> 
> 标签：google-sheets

我有一个共享电子表格，任何知道链接的人都可以编辑它。现在我想设置一个只能由我（所有者）编辑的受保护范围。

不幸的是，这对我不起作用。我无法编辑相关范围的权限，它只显示一个类似于以下内容的框：

```
 Visibility Options

    Save       Cancel 
```

这是预期的行为吗？一个错误？还没实施？

发送信息

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T17:48:27.093

我想出了如何保护某些单元格并允许任何人编辑其他单元格。在 Google 改进此功能之前，这是一种暂时的解决方法。

*   转到格式-> 命名和受保护的单元格
*   为要保护的数据和要编辑的数据创建单独的区域。
*   删除任何现有的保护
*   共享电子表格，使其对所有人都是只读的
*   返回命名和受保护的单元格并为您想要保护的区域创建共享
*   创建保护时，“所有人”应列为只读（您无法修改，它是从电子表格的当前全局共享继承的。）
*   不要为您希望每个人都能够编辑的区域创建任何保护
*   退出电子表格然后返回（不确定是否需要此步骤，但这就是我所做的）
*   现在重新共享电子表格，以便“每个人”都可以编辑
*   退出您的 Google 帐户并打开电子表格的公共链接。电子表格加载后，受保护区域应该是只读的（它们之间的灰色哈希线）并且输入区域应该可供所有人编辑

这终于对我有用。希望它适用于其他所有人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T17:42:21.153

卡尔顿的回答对我有用，但在阅读之后，我认为我对这个问题有了更好的理解和更短的解决方法。范围保护值（查看/编辑）似乎是在定义范围保护时取自电子表格的一般保护值。

因此，您可以使用更简单的解决方法：

*   将电子表格共享为所有人的“仅查看”
*   对于您希望保护的每个范围：
    *   创建一个命名范围
    *   将其标记为受保护（忽略它被标记为“编辑”的事实）
*   将电子表格共享为所有人的“编辑”

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T21:18:13.387

user1958927 的评估似乎是正确的 - 归结为将其全部剥离为仅查看匿名，然后命名一些范围并保护它们。在匿名开放后，命名范围保持受保护。

此外，我发现对命名范围的任何更改（例如，删除一列）都会打开该列以供匿名编辑。

方便的捕获，这使得谷歌电子表格对大型团体有用，而无需疯狂登录以保护大块免受无意更改。

如果您可以处理整个受保护单元格上的灰色对角线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-14T12:16:31.050

要清除剥离的灰线，任何人都可以转到查看并取消选中“受保护范围”。它可以清洁屏幕并且细胞仍然受到保护。

# sql - 在 LocalHost 上运行 Report Studio

> ID：12550940
> 
> 赞同：0
> 
> 时间：2012-09-23T08:51:49.247
> 
> 标签：sql, reporting-services

有问题，有没有人有任何建议，但是在报告工作室中有报告工作，我可以在其中构建和预览报告，但是我不能在 localhost 中运行程序？我已经正确安装了报告服务等。

# java - 如何阻止触摸外部打开线性布局？

> ID：12550944
> 
> 赞同：1
> 
> 时间：2012-09-23T08:52:23.383
> 
> 标签：java, android, android-theme

我的意思是我创建了一个安卓应用程序。我从我的主要活动中调用一个活动。我的新活动类型： `android:theme="@android:style/Theme.Dialog"` 我成功了。但是当新的活动到来时，我点击外面并关闭它。我不想要这个。我阻止触摸外面。我怎样才能做到这一点？谢谢。

# sql - SQL Server 查询以显示特定月份或日期之间的摘要列表

> ID：12550945
> 
> 赞同：1
> 
> 时间：2012-09-23T08:52:37.193
> 
> 标签：sql, sql-server, pivot

我有一张`attendance`表，其中包含学生的出勤日期和出勤状态。

有没有办法显示这样的摘要：

```
Student 20-09-2012 21-09-2012 22-09-2012 23-09-2012
  xyz       P          A          P           P
  abc       P          P          P           P 
```

通过 SQL Server 查询？

我已经尝试过，`PIVOT`但由于聚合函数它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:56:55.637

> 我尝试过使用 PIVOT，但由于聚合函数而无法正常工作。

您可以`MAX`像这样使用聚合函数：

```
SELECT t.StudentName,
  MAX(CASE WHEN t.Date = '20120920' THEN t.Status END) AS '20-09-2012',
  MAX(CASE WHEN t.Date = '20120921' THEN t.Status END) AS '21-09-2012',
  MAX(CASE WHEN t.Date = '20120922' THEN t.Status END) AS '22-09-2012',
  MAX(CASE WHEN t.Date = '20120923' THEN t.Status END) AS '23-09-2012'
FROM Attendence t
GROUP BY t.StudentName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:56:39.113

你的问题让我想起了我必须解决的类似问题。使用动态 SQL，您的问题解决如下

```
-- create list of all dates 
DECLARE @dates varchar(1000) = ''
SELECT @dates = @dates + ',[' + CAST(t.[date] as varchar)+']'
FROM ( SELECT DISTINCT [date] FROM Attendance) t

-- remove first comma
IF LEN(@dates)>1 SET @dates = RIGHT(@dates,LEN(@dates)-1)

-- create query with UNPIVOT and PIVOT
 exec('SELECT 
        StudentName,'+
        @dates+
   'FROM(
        SELECT  
            [date],
            [stat],
            StudentName 
        FROM 
            (SELECT 
                    [date],
                    [status],
                    StudentName 
                FROM 
                    Attendance
            ) AS t
        UNPIVOT 
            ( stat FOR s in ([status])) unpvt
        ) dummy
    PIVOT 
        (
            MAX(stat) FOR [date] in ('+@dates+')
        ) pvt
    ORDER BY StudentName;'); 
```

那是您请求的[SqlFiddle](http://sqlfiddle.com/#!3/2646b/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T19:38:07.300

```
DECLARE @DynamicPivotQuery AS NVARCHAR(max) 
DECLARE @ColumnName AS NVARCHAR(max) 

SELECT a.grno, 
       a.a_date [Date], 
       a.status, 
       s.first_name, 
       s.last_name 
INTO   #pivotdata 
FROM   attendance_master AS a, 
       student_master AS s 
WHERE  sid = " & dd_sub.selecteditem.value & " 
       AND s.grno = a.grno 
       AND a.a_date >= '" & txtdate1.Text & "' 
       AND a.a_date <= '" & txtdate2.Text & "' 
GROUP  BY a.grno, 
          a.status, 
          a.a_date, 
          s.last_name, 
          s.first_name 

SELECT @ColumnName = Isnull(@ColumnName + ',', '') 
                     + Quotename([date]) 
FROM   (SELECT DISTINCT [date] 
        FROM   #pivotdata) AS Dates 

SET @DynamicPivotQuery = 'SELECT grno,first_name,last_name,' 
                         + @ColumnName 
                         + 'FROM #PivotData PIVOT(sum(status) FOR [Date] IN (' 
                         + @ColumnName + ')) AS PVTTable1' 

EXEC Sp_executesql 
  @DynamicPivotQuery 
```

![在此处输入图像描述](../Images/79a8897c176e528030e1ef05191caee8.png)

# file-upload - 在 Windows Azure 网站上传大文件时如何使用 BlockBlob

> ID：12550948
> 
> 赞同：2
> 
> 时间：2012-09-23T08:53:17.433
> 
> 标签：file-upload, azure, azure-blob-storage

所有，我试图在一个网页中上传一个更大的文件（700MB），其中包含一个 Form 中的 File html 元素。我想在服务器端可以获取流并将其上传到 Azure 存储。这是服务器端的一些代码片段。

```
public void UploadFile()
{
    Stream source = Request.InputStream; 

    long copiedByteCount = 0;

    byte[] buffer = new byte[2 * 1024];

    for (int len; (len = from.Read(buffer, 0, buffer.Length)) > 0; )
    {
        //Begin to write buffer to Azure.
        ....(I am still searching the BlockBlob code sample in google.)
        //
        copiedByteCount += len;
    }

} 
```

我的问题是

> 1.我希望app不要吃掉所有的内存，所以逐块读取流。我不知道它是否如我所愿。
> 
> 2.有人可以帮忙举个例子如何将所有缓冲区块并行写入BlockBlob。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:27:51.410

首先你必须知道，要允许上传 700MB，你需要在 web.config 中允许：

```
<system.web>
  <httpRuntime executionTimeout="240" maxRequestLength="716800" />
</system.web>

<system.webServer> 
    <security> 
        <requestFiltering>
            <requestLimits maxAllowedContentLength="716800" /> 
        </requestFiltering> 
    </security> 
</system.webServer> 
```

每当有人上传大于 256KB 的文件（这是默认设置）时，该文件都会缓冲到磁盘（[在此处](http://msdn.microsoft.com/en-us/library/system.web.httppostedfile.aspx)记录）。所以你不必担心传入的文件。

要将此文件上传到 blob 而不将其加载到内存中，您可以简单地使用 HttpPostedFile 的流并将其转发到存储客户端：

```
 var blob = container.GetBlockBlobReference(blobName);
 blob.UploadFromStream(Request.Files[0].InputStream); 
```

最后，如果您想并行上传 Blob，您可以从此页面上的代码开始：[Blob 并行上传和下载](http://blogs.microsoft.co.il/blogs/applisec/archive/2012/05/14/blob-parallel-upload-and-download.aspx)（您需要更改**UploadFileToBlobAsync**方法以接受流而不是文件名）。

# calendar - 使用 PHP 的水平日历

> ID：12550949
> 
> 赞同：1
> 
> 时间：2012-09-23T08:53:18.620
> 
> 标签：calendar

你可以在这里看到我想要做什么[http://perthurbanist.com/website/calendarloader.php](http://perthurbanist.com/website/calendarloader.php)。基本上它是一个水平日历，您将使用箭头移动。我想要做的是让代码水平显示所有月份以及所有日期（从当前月份和日期开始）。我知道如何使用日期函数获取当前日期，但我不知道如何使日历从该日期开始。我还希望它加载很多个月（可能需要 2-3 年）。我该怎么做这两件事。

```
<?php
$showday = date("j");
$displaymonth = date("M");
$showmonth = date("n");
$showyear = date("Y");

$day_count = cal_days_in_month(CAL_GREGORIAN, $showmonth, $showyear);

echo '<ul class="calendarnavigation">';
echo '<li class="month">' . $displaymonth . '</li>';

for($i=1; $i<= $day_count; $i++) {
echo '<li>' . $i . '</li>';
}

echo '</div>';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:09:14.837

如果您知道（或能够计算出您想在几天内前进多远，则可以尝试以下操作：

```
for($i=0; $i<$numberOfDays; $i++)
{
    $timestamp=mktime(0,0,0,date("m"),date("d")+$i,date("Y"));
    $day=date("d", $timestamp);
    $month=date("m", $timestamp);
    $year=date("Y", $timestamp);

    ...Your display stuff here...

} 
```

在循环的每次迭代中，`$timestamp`将提前一天，在您的`date`函数中使用它将为您提供有关创建显示所需的日期的信息。

也许在你的情况下你可以使用

```
echo '<ul class="calendarnavigation">';

for($i=0; $i<$numberOfDays; $i++)
{
    $timestamp=mktime(0,0,0,date("m"),date("d")+$i,date("Y"));
    $showday=date("j", $timestamp);
    $displaymonth=date("M", $timestamp);
    $showmonth=date("n", $timestamp);
    $showyear=date("Y", $timestamp);

    if($showday=="1")
    {
        echo '<li>'.$displaymonth.'</li>';
    }

    echo '<li>'.$showday.'</li>';

}

echo '</ul>'; 
```

# objective-c - 将“CLLocationCoordinate2D”发送到“CLLocationCoordinate2D *”类型的参数

> ID：12550952
> 
> 赞同：0
> 
> 时间：2012-09-23T08:53:37.190
> 
> 标签：objective-c, pointers, delegates

编译时，尝试将坐标返回到类的委托方法时出现以下错误。

将“CLLocationCoordinate2D”发送到“CLLocationCoordinate2D *”类型的参数

我知道它必须与指针有关，但我不太确定如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T08:56:32.200

只需获取地址并返回：

```
CLLocationCoordinate2D thing;
[delegate methodcall:&thing]; 
```

# javascript - JSON 检查是否没有可用数据

> ID：12550958
> 
> 赞同：2
> 
> 时间：2012-09-23T08:55:16.543
> 
> 标签：javascript, jquery

我正在使用此代码从 json 获取数据。

```
$.each(data.id, function(index, value){

output += '<li>'+value.title+'</li>';

}

$('#listview').html(output).listview('refresh'); 
```

有时没有要显示的记录。

我如何知道是否没有记录并显示警报示例：alert('No records'); ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T08:59:38.903

我假设它`data.id`是一个数组，因为你`$.each`在它上面使用过：

```
if (data.id.length == 0) {
  // no data
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-23T09:24:36.203

通常在 javascript 中使用此代码来检查数组是否为空：

```
 if (myArray.length) {  // javascript shortcut for data.id.length>0
        alert('no elems found');
    } 
```

在您的特定情况下，以下代码应该有效：

```
 if (data.id.length) { 
        $.each(data.id, function(index, value){
        output += '<li>'+value.title+'</li>';
        });
        $('#listview').html(output).listview('refresh');
    } else {
        alert('no records found ');
    } 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T09:09:59.140

检查对象中是否有数据的最通用方法是使用

```
 length 
```

方法。

但是你应该非常小心。例如，如果您的数据采用以下格式：

```
SourceData =[
                {
                    ID:1,
                    Title:'Test1',
                },
                {
                    ID:2,
                    Title:'Test2',
                },
                {
                    ID:3,
                    Title:'Test3',
                },
            ] 
```

然后您进行以下检查：

```
if(SourceData.ID.length>0) 
```

并且由于某种原因（服务器错误、请求超时等）未定义“SourceData”，将引发 JavaScript 错误。

这就是我使用条件组合的原因：

```
if(typeof SourceData==='undefined'|typeof SourceData.ID==='undefined'|SourceData.ID.length==0) 
```

然后，如果“SoruceData”有问题（未定义），将显示一条消息“No Data”。或者当“SourceData”被初始化，但是例如有人改变了服务器返回数据的结构（不再是“ID”，现在是“TitleID”）不会产生错误。

请注意，我使用的是“|” 而不是“||”。这意味着，如果其中一个条件为“真”，则他的条件权将不会被执行。

# html - div 在所有其他 div 之上

> ID：12550967
> 
> 赞同：0
> 
> 时间：2012-09-23T08:56:17.327
> 
> 标签：html, css

我有一个简单的问题，想知道你是否可以为我解决它..

无论如何，问题是，我如何在页面右侧放置一个框，这不会影响页面上当前 css 的任何外观:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T08:58:31.053

使用`position: absolute;`. 要定义位置，您可以使用`top`, `left`, `right`,`bottom`属性来指定相应的偏移量。在您的情况下，您可能想要`right`：

```
.rightbar {
    position: absolute;
    top: 0px; /*how many pixels from top*/
    right: 25px; /*how many pixels from right*/
    width: 50px;
    height: 150px;
} 
```

如果您希望`div`在滚动后仍保持可见，请使用`position: fixed;`.

小演示：[小链接](http://jsfiddle.net/glee/KdhLy/)。

# mysql - 我可以在结果表中显示一对多的结果吗？

> ID：12550970
> 
> 赞同：1
> 
> 时间：2012-09-23T08:56:26.093
> 
> 标签：mysql

我有一张桌子`person`和一张桌子`language`。每个人最多可以说 4 种语言。例如，我的客户想要搜索会说话的人`Spanish`。

我的问题是结果表目前不会有一个名为的列，`Language`因为他们会说不止一个。我可以只显示第一个，但隐藏他们说的其他语言会产生误导。

该表可以为每种语言提供一列，`NULL`如果它们没有全部 4 种语言，请填写，即：

```
Language 1
Language 2
Language 3
Language 4 
```

但这似乎很草率。

我考虑过使用逗号分隔的列表在单个列中列出所有语言，但这对于按字母顺序对列进行排序很有用。

目前，我不得不告诉我的客户，结果表只能显示该人拥有其中之一的列（1 到 1），即`name`，`location`母语等。只有当客户点击该人时，它才能显示所有他们的语言。

有谁知道是否有解决这个问题的通用方法？希望这是有道理的

我确实有一个关联表。问题是我的搜索会返回

乔博客，哥谭市，西班牙语

然后

乔博客，哥谭市，法国

在下一行 - 但是同一个人在表中列出了两次。当我将其限制为每个名称一个条目时，我只会得到“joe bloggs, gotham city, spanish”。现在我不知道他还会说法语。这更清楚了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:04:57.007

您应该有一个包含两个字段的连接表：人员和语言。每人每种语言应该有一行，所以如果一个人会说四种语言，那么这个用户将有四行。

此表的主键将包含两个字段。

然后要获取哪些人说西班牙语的列表，您需要一个类似的查询

```
select people.name
from people inner join p2l
on people.id = p2l.person
inner join languages
on p2l.language = languages.id
where languages.name = 'Spanish' 
```

以及所有会说某种语言的人的名单

```
select people.name, languages.name
from people inner join p2l
on people.id = p2l.person
inner join languages
on p2l.language = languages.id 
```

现在是所有人的名单，无论他们是否说某种语言

```
select people.name, languages.name
from people left join p2l
on people.id = p2l.person
inner join languages
on p2l.language = languages.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T09:05:29.480

如果你愿意，可以创建两个
有 cloumns 的桌子人。 创建另一个表 - 具有列的语言 - 现在当你想访问语言时，只需通过比较 person_id 来获取 它们`person_id,person_name & more`
`person_id,lang1,lang2,lang3,lang4`
`person_id as foreign key`

```
 SELECT p.person_id
FROM person p, language l
WHERE p.person_id = l.person_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-23T09:01:17.037

所以解决这个问题的传统方法是创建一个称为关联表的东西，它具有人员表和语言表的外键。这使您可以添加任意数量的语言（包括零）。然后，您可以加入这些表以查找所有使用特定语言的用户。

这可能有助于如何构建数据库：[http](http://en.wikipedia.org/wiki/First_normal_form) ://en.wikipedia.org/wiki/First_normal_form 有更高的范式，但这将帮助您解决当前的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T04:11:08.577

再考虑一下，您似乎有以下选择

1.  使用 Christophe 和我建议的简单连接/链接/关联表，然后在调用 SQL 的程序中处理数据。这是最简单的路线。
2.  维护一个逗号分隔的语言列表以及连接表。连接表将允许您回答诸如“谁会说西班牙语”之类的查询，而列表将使您能够打印出每个人的语言列表。维护此列表将是一个问题。
3.  使用 Ravindra 的“每种语言的专用字段”方法；每次需要新语言时，都必须更改字段结构，因此非常不推荐这种方法。
4.  使用交叉表查询；这很难做到，取决于您使用的是哪种 SQL。看看这篇文章[创建交叉表查询和数据透视表](http://www.simple-talk.com/sql/t-sql-programming/creating-cross-tab-queries-and-pivot-tables-in-sql/)。

在我的选择中，选项 1 是最好和最简单的。SQL 擅长做的事，但不擅长做的事，因此最好采用 SQL 的最佳部分，并用声明性语言的最佳部分围绕它们。

# http - Http 标头 - Keep Alive 误解？

> ID：12550973
> 
> 赞同：0
> 
> 时间：2012-09-23T08:56:47.933
> 
> 标签：http, httpwebrequest

http标头：`Connection: Keep-Alive`

在[阅读](https://stackoverflow.com/questions/9334401/http-keep-alive-and-tcp-keep-alive)了很多关于这个之后，我仍然无法理解它是如何工作的。

[维基](http://en.wikipedia.org/wiki/Keepalive)：

> 保活信号也可用于向 Internet 基础设施指示应保留连接。如果没有 keepalive 信号，启用 NAT 的中间路由器可以在超时后断开连接。

我不明白：

一个服务器可以有 1,000,000 个当前连接。

John 向服务器发送请求。

Paul 的计算机在 Paul 附近的同一个局域网上。paul 还向同一服务器发送请求。

约翰和保罗的组织在路由器后面。

![在此处输入图像描述](../Images/0c6a10056251f4bb8951656682f22a4d.png)

*服务器怎么知道如何为 paul和*john保持连接？

另外，当约翰第二次发送请求时，它“没有打开新的连接”，那么这里如何应用keep-alive？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:09:09.397

首先，TCP/IP 连接不是临时连接两台计算机的细线。归根结底，TCP/IP 和 UDP 都只是一系列数据包。操作系统通过将 IP 数据包按正确顺序重新组合在一起来假装您已建立连接。

现在回到你的问题。请注意，问题并不是真正的 HTTP 特定的，所有这些都适用于 TCP/IP 层。假设 Paul 有`192.168.0.100`，John 有`192.168.0.101`内部 IP 地址，而 NAT 有公共`1.2.3.4`地址。当 Paul 连接到某个服务器时，他的操作系统使用`192.168.0.100:54321`地址（端口由操作系统随机选择）。此请求命中 NAT，后者会记住该地址并将请求转发到外部服务器。外部服务器*看到* `1.2.3.4:4321`（注意不同的端口）因为用户位于 NAT 后面，因此内部 IP 不可见。

当外部服务器（让它成为 Web 服务器）发送回复时，它会将其发送到`1.2.3.4:4321`. 另一方面，NAT 记得`4321`端口应该被转发到 192.168.0.100:54321` - 就是这样。

现在想象 John 向同一台服务器发送请求。此 TCP/IP 连接通过 NAT 路由，该 NAT 记住该请求来自`192.168.0.101:32123`。`1.2.3.4:4322`然后使用公共（注意不同的端口）转发此请求。当响应到达时，NAT 会检查端口，如果是`4322`，它会路由到`192.168.0.101:32123`(John)。否则（在港口`4321`）保罗会得到他的答复。

注意：不要混淆[客户端临时端口](http://en.wikipedia.org/wiki/Ephemeral_port)和服务器端口（HTTP 默认为 80）。

# c# - 控制台应用程序中的 Facebook API

> ID：12550976
> 
> 赞同：0
> 
> 时间：2012-09-23T08:56:54.443
> 
> 标签：c#, facebook, visual-studio-2010

我是使用 Facebook Api 的新手，我在 Visual Studio C# 中使用它，我下载了它的库 facebook。但我想知道如何开始工作？我应该使用 Windows 表单还是控制台可以？因为我只想通过 Api 更新我的状态，获取我的好友列表，读取我的状态。正如我之前运行此代码但它没有向我显示输出

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Facebook;    

namespace Social_network_work
{
    class Program
    {
        static void Main(string[] args)
        {
            var client = new FacebookClient();
            dynamic me = client.Get("totten");
        }
    }
} 
```

因为我是 python 用户，但现在我必须使用 Visual Studio C#。`"http://csharpsdk.org/"`此链接未显示如何在 Windows 7 中使用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T09:16:59.383

您的问题与 Windows 7 没有太大关系。

你的样品工作正常。您只是没有任何行写入控制台。尝试 ：

```
var client = new FacebookClient();
var me = client.Get("totten");

Console.WriteLine(me); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:48:12.650

要保持命令行打开以便您可以阅读输出，请`Console.Writeline`在行后添加以下内容

```
Console.Readline(); 
```

然后，当您运行它时，将显示输出，并等待您按 Enter - 这将允许程序继续并退出/退出。

此外，简而言之，是的，您应该能够毫无问题地将应用程序创建为完整的命令行应用程序。

# ios - 在 iOS 上，drawRect 不能在视图边界之外绘制？

> ID：12550979
> 
> 赞同：23
> 
> 时间：2012-09-23T08:57:23.120
> 
> 标签：ios, uiview, uikit, calayer

我从某些时候开始认为对于 OS X，对于 iOS 来说总是如此，内容可以出现在视图边界之外？（对于 UIView）但是如果我创建一个全新的单视图应用程序，并创建一个子类 UIView 的 MyView 类，并实现它的 drawRect：

```
- (void)drawRect:(CGRect)rect
{
    // Drawing code
    UIBezierPath *path = [UIBezierPath bezierPathWithRect:
                                           CGRectMake(-20, -20, 600, 600)];
    [[UIColor greenColor] set];
    [path fill];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, [[UIColor blueColor] CGColor]);
    CGContextFillRect(context, CGRectMake(-20, -20, 600, 600));
} 
```

我同时使用 UI 和 CG 来分别绘制一个矩形，以防一个有效而另一个无效。视图被添加到`viewDidAppear`：

```
- (void)viewDidAppear:(BOOL)animated {
    MyView *myView = [[MyView alloc] initWithFrame:CGRectMake(20, 20, 260, 260)];
    [self.view addSubview:myView];
} 
```

但无论如何，彩盒不会超出`(20, 20, 260, 260)`区域。只有 CALayers 可以自由添加并出现在视图边界之外，这是真的吗？可能是因为图形上下文仅限于此`(20, 20, 260, 260)`开始吗？如果是这样，有没有办法让`drawRect`内容出现在视图边界之外，在所有四个上、下、左、右方向上？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-23T11:18:49.907

您的问题是“drawRect”会自动剪辑到您正在绘制的视图中。

与其在视图本身中进行绘图，不如向第一个视图添加第二个（子）视图，即在第一个视图的边界之外。这将允许您根据第一个视图的位置进行绘制，但在第一个视图的范围之外。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-23T09:38:44.613

在添加了滚动视图的视图上尝试此操作：

```
self.scrollView.backgroundColor = [UIColor darkGrayColor];
self.scrollView.layer.cornerRadius = 10.0f;
self.scrollView.layer.masksToBounds = YES; 
```

它应该根据需要显示带有圆角的灰色滚动视图。

**记住你需要导入 QuartzCore FrameWork**

# ruby-on-rails-3 - 嵌套表单不显示分配

> ID：12550985
> 
> 赞同：1
> 
> 时间：2012-09-23T08:57:43.697
> 
> 标签：ruby-on-rails-3, nested-forms

我最近关注了[Ryan Bates](http://asciicasts.com/episodes/196-nested-model-form-part-1)的关于嵌套表单的教程，并做了与他对其他名称所做的基本相同的事情。我想在订单表格中嵌套分配，我想为该订单的每个面包建立一个分配，用户应该在表格中输入一个计数。

所以我的控制器看起来像这样

```
 def new
   @order = Order.new
   @buns = Bun.all
   @buns.each do |bun|
     @order.assignments.build(:bun_id => bun.id)
   end
 end 
```

_form 部分看起来像这样

```
 <%= form_for(@order) do |f| %>
    <div class="field">
      <%= f.label :user_id %><br />
      <%= f.number_field :user_id %>
    </div>
    <div id="assignments" class="field">
      <% f.fields_for :assignments do |builder| %>
        <div id="assignment" class="field">
          <%= builder.label :count, "Anzahl" %>
          <%= builder.text_field :count %>
          <%= builder.object.bun_id %>
        <% end %>
      </div>
    </div>
    <div class="field">
      <%= f.label :due_to %><br />
      <%= f.datetime_select :due_to %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
  <% end %> 
```

Order 模型有这部分

```
has_many :assignments
has_one :user

accepts_nested_attributes_for :assignments 
```

而作业模型这个：

```
attr_accessible :bun_id, :order_id, :count
belongs_to :bun
belongs_to :order 
```

当我记录所有作业时，应该构建这些作业，那么为什么没有渲染这些字段呢？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:02:41.773

您的 erb 中缺少等号 (=)：

```
 <%= f.fields_for :assignments do |builder| %> 
```

# jquery - 用 div 替换文本框，但 jquery 不起作用

> ID：12550986
> 
> 赞同：1
> 
> 时间：2012-09-23T08:57:44.340
> 
> 标签：jquery

它只工作了几秒钟，然后 div 再次消失：

```
$(document).ready(function () {

    $("#done").click(function () {
        $('#txtname').replaceWith(function () {

            return '<div>' + $(this).val() + '</div>';
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:29:56.527

`ID`如果`this`不起作用，您也可以使用

```
$("#done").click(function() {
    $('#txtname').replaceWith(function() {

        return '<div>' + $("#txtname").val() + '</div>';
    });
}); 
```

如果上述方法不起作用，这是另一个示例

```
$("#done").click(function() {
    $('#txtname').replaceWith('<div>' + $("#txtname").val() + '</div>');
}); 
```

# hibernate - 休眠，使用 Session 或 EntityManager

> ID：12550987
> 
> 赞同：0
> 
> 时间：2012-09-23T08:57:54.463
> 
> 标签：hibernate, jpa-2.0

这些选项中哪个更好？EntityManager 是 JPA，如果有一天我决定进行另一个实现，那会更容易。进行休眠会话的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:52:11.463

使用 EntityManager，您将受益于拥有标准接口和 JPA2 标准 API。如有必要，您始终可以获取底层 Hibernate 本机会话，并另外使用它。

使用本机 Hibernate 会话，您可以获得更多方法（但它们是否有用仍有待商榷）：`save()`、`saveOrUpdate()`等以及本机 Hibernate 标准 API，恕我直言，它比JPA2 标准 API。

除非您必须与使用本机 Hibernate API 的一大堆代码或 API 集成，否则我会使用 EntityManager 接口。

# http - Lua socket：为什么socket.http.request不下载页面的整个html代码？

> ID：12550988
> 
> 赞同：0
> 
> 时间：2012-09-23T08:57:55.390
> 
> 标签：http, lua

我想[将此网页](http://magiccards.info/roe/en/4.html)的整个 html 代码下载到 Lua 字符串。问题是当我使用 Inspect Elements 命令（右键单击网页，最后一个选项）时，保存的代码会跳过 Google Chrome 上可见的一些行。

我需要这些行，因为我想使用那里写的信息，准确地说，我想了解卡的价格。

使用的代码很简单：

```
-- loads the HTTP module and any libraries it requires
local http  = require("socket.http")

-- Lua socket --
b, c, h = http.request("http://magiccards.info/roe/en/4.html")
print(b) 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T09:03:59.653

页面上的一些元素可能是在主文档加载后创建的，要么是通过 Javascript DOM 操作，要么是通过填补缺失部分的 AJAX 查询。您可以查看这些脚本是否确实已下载，然后使用诸如 V8 之类的嵌入式引擎在本地运行它们。

# php - 使用 PHP+MySql 的投票系统？

> ID：12550995
> 
> 赞同：2
> 
> 时间：2012-09-23T08:58:56.733
> 
> 标签：php, mysql

我们必须建立一个投票系统，让用户投票给不同职位的不同候选人。有一个选民登录。您如何存储一个选民的投票，然后将该投票添加到之前的投票中？唯一可能的方法是将每张选票存储在数据库中，对吗？但是数据库的结构会是什么样子呢？你怎么计算它？

编辑：
投票系统不仅有一组候选人可以投票。有市长、副市长、参议员等等，太多了。这就是为什么我很困惑。如果只是一个总统的投票系统，那就更容易了。因此，如果我有一张选民表格，其中有一列他/她投票的候选人，这是不可能的，因为选民投票给了许多候选人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T09:07:37.357

更好的方法是使用不同的表来存储投票。并且该表将具有两个属性（VoterId，CandidateId）如果您允许从此表中进行多票，您可以获取投票计数。

但最好将 VoterId 设为此表中的主键。避免多次投票

> **CandidateType** : - (TypeId(PK), typeName, maxVotePerVoterForThisType)
> 
> **选民表**: - (voterId(PK), voterName, otherInfo)
> 
> **候选人表**：-（candidateId（PK），candidateName，选区，otherInfo，TypeId（FK））
> 
> **投票**：-（voterId（PK，FK），TypeId（PK，FK），candidateId（FK））

*编辑：- 使用原始帖子中更改的要求编辑的架构

*编辑： - 在 CandidateType 表中添加了一个字段以允许`multiple votes`。（例如：现在选民可以投票`10 Senators`，如果`maxVotePerVoter`此类型设置为 10..）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T09:03:01.743

您应该将每个候选人存储在一个表中，将位置存储在另一个表中，然后根据 ID 建立关系，投票系统相对简单：

数据库：

```
id, position_id, candidate_id, votes 
```

然后 PHP

```
$query = "UPDATE `votes` SET `votes`=`votes`+1 WHERE `position_id`=1 AND candidate_id=1"; // adds 1 vote where position_id is 1 and candidate_id is 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-23T09:05:44.657

您的账户（选民）和候选人需要这 3 个表格。

```
Account: Id (PK), Name, Password
Candidates: Id (PK), Name
Votes: AccountId (PK), CandidateId (PK) 
```

投票时在投票中插入一行。这可以防止由于 PK 导致的重复投票。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-23T09:06:18.340

从问题的解释中，我可以建议您使用以下数据库结构：

tlb用户投票：

```
UserID(PK)  |  UserName  |  Vote  |  CandidateId(FK) 
```

tlb候选人：

```
CandidateId(PK)  | CandidateName | TotalVotes 
```

通过这种结构，您可以将当前投票与以前的投票相加（通过先获取以前的投票并将其添加到当前投票）。

候选人的总票数也会更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-23T09:18:18.677

我可以说您将投票用户存储在名为 users 的表中，您可以使用字段`vaotecount` （int）类型初始化为零并跟踪他们的 ip 并为他们投票的主题 id 投票，当他们投票时，您可以检查 IP 和 topic_id 他们没有投票两次，如果他们通过了，您可以将该`vaotecount`字段增加一

当您计票时，请计算您为其计票的主题 id 的用户。简单：D

# django - Django 管理字段验证返回错误而不是在应用程序中引发异常

> ID：12550999
> 
> 赞同：5
> 
> 时间：2012-09-23T08:59:40.590
> 
> 标签：django, django-admin, django-hvad, django-nani

我有一个 Django 模型，其中有一个图像上传字段，我正在尝试验证图像字段以在存储之前检查图像大小并返回优雅的错误消息以供用户更正。

我尝试使用以下代码，但它不起作用

管理员.py

```
class BonanzaAdmin(TranslatableAdmin):
    list_display = ['get_bonanza_name', 'user_profile', 'publish_date', 'created_by', 'created_at', 'all_translations']

    def clean_image(self):

        image = self.cleaned_data.get('image')
        if not image:
            raise forms.ValidationError("No image!")
        else:
            w, h = get_image_dimensions(image)
            if w != 1170:
                raise forms.ValidationError("The image is %i pixel wide. It's supposed to be 1170px" % w)
            if h != 500:
                raise forms.ValidationError("The image is %i pixel high. It's supposed to be 500px" % h)
        return image 

    def save_model(self, request, obj, form, change):
        if not change:
            obj.created_by = request.user
        obj.save() 
```

整个 clean_image() 没有被调用，我也尝试将名称反转为 image_clean() 但也没有工作。无论如何，我试图将验证移至 save_model

```
class BonanzaAdmin(TranslatableAdmin):
    list_display = ['get_bonanza_name', 'user_profile', 'publish_date', 'created_by', 'created_at', 'all_translations']

    def save_model(self, request, obj, form, change):
        image = obj.image
        if not image:
            raise forms.ValidationError("No image!")
        else:
            w, h = get_image_dimensions(image)
            if w != 1170:
                raise forms.ValidationError("The image is %i pixel wide. It's supposed to be 1170px" % w)
            if h != 500:
                raise forms.ValidationError("The image is %i pixel high. It's supposed to be 500px" % h)
        if not change:
            obj.created_by = request.user
        obj.save() 
```

现在第二段代码工作正常，它通过了验证过程，但没有显示简单的错误消息。相反，它会引发异常！我怎样才能让它显示错误，以便用户更正并重试？

*PS 我正在使用 django 1.4 和 django-hvad 进行翻译，这就是我从 TranslatableAdmin 继承的原因*

问候

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-23T12:14:27.987

正如**demalexx**所说，您应该使用其他表格来验证您的模型。

```
class Bonanza(models.Model):
    user_profile = models.CharField(max_length = 128)
    publish_date = models.DateField() 
```

在您的管理表单中使用任何验证：

```
class BonanzaAdminForm(forms.ModelForm):
    class Meta:
        model = Bonanza
    def clean(self):
        # Validation goes here :)
        raise forms.ValidationError("TEST EXCEPTION!") 
```

和简单的自动生成管理员：

```
class BonanzaAdmin(admin.ModelAdmin):
    form = BonanzaAdminForm

admin.site.register(Bonanza, BonanzaAdmin) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T10:35:33.033

您继承`ModelAdmin`并且它没有验证方法。相反，您应该覆盖`form`属性以提供自定义表单并将验证方法添加到该表单。管理员中有关于自定义验证的文档：[https ://docs.djangoproject.com/en/1.4/ref/contrib/admin/#adding-custom-validation-to-the-admin](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#adding-custom-validation-to-the-admin)