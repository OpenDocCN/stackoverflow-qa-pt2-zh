# StackOverflow 问答 15810000-15810999

# c# - Can't getting value from Web.config

> ID：15810003
> 
> 赞同：1
> 
> 时间：2013-04-04T11:36:00.390
> 
> 标签：c#, asp.net-mvc, web-config

I am facing an issue with getting a value from Web.config.

Here is my web.config code which contains **Key**

```
<appSettings>
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" />
<add key="Email" value="myname@mydomain.com" /> 
```

i want email key value, i am writing,

```
 string From = ConfigurationManager.AppSettings["Email"].ToString(); 
```

but its giving me error **"Object reference is not set to an instance of an object"**

My other web.config declarations are:

```
<system.net>
    <mailSettings>
        <smtp>
            <network host="smtp.gmail.com" port="***" enableSsl="true" defaultCredentials="false" userName="myname@mydomain.com" password="mypassword" />
        </smtp>
    </mailSettings>
</system.net> 
```

Any help appreciated! Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:20:33.497

确保您的启动项目设置正确。如果您从一个单独的项目（即在测试中）运行它，它不会查看该 Web.config，而是查看它自己的 Web/App.config 文件。

# data-access-layer - The N-layers paradigm - is this concept wrong?

> ID：15810004
> 
> 赞同：1
> 
> 时间：2013-04-04T11:36:00.570
> 
> 标签：data-access-layer, n-tier-architecture, business-logic-layer, presentation-layer

I just saw the lecture:

[Breaking apart conceptions](http://www.youtube.com/watch?v=0tlMTJDKiug)

He keeps saying that the 3 layers paradigm started because of the problem with connection pooling.

**And NOT because of architectural considerations**.

Seems like a mind blowing theory.

**Can anybody** proove or disproove this claim?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:20:23.983

这是一个很难正确回答的问题。演示文稿的[相关部分](http://youtu.be/0tlMTJDKiug?t=11m27s)指出，由于数据库不是为数十个连接设计的，因此必须在应用程序和数据库中的存储过程之间引入一个业务层。

我不敢苟同。分离业务逻辑、状态表示和存储的想法起源于更早的时期，即 1970 年或 1980 年，根据[维基百科](http://en.wikipedia.org/wiki/Multitier_architecture#Comparison_with_the_MVC_architecture)，它是[在 Xerox PARC 开发的](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller#History)。

当然，当时的服务器比现在贵得多。然而，这仍然没有阻止他们考虑可维护性和软件开发的其他方面，即**测试**、**调试**和将完整产品开发的部分**分配给不同的团队。**在集成应用程序中拥有严格定义的接口不是为了连接池（这只是为了解决整个混合物中某个成分的限制），而是为了**保持应用程序的可维护性**和**简化开发，这很有意义过程**。

不过我喜欢这个谈话。从实践中，我**知道**盲目地订阅设计模式会导致您陷入不良情况。你总是可以做得过火。

简而言之，多层模型（无论是在单个服务器上还是仅仅作为一种开发范例）比互联网的兴起还要古老。至少从 1980 年开始，这种情况就已经司空见惯了。

# plsql - Getting an error saying "invalid rowid"

> ID：15810005
> 
> 赞同：0
> 
> 时间：2013-04-04T11:36:06.353
> 
> 标签：plsql

please help me with this "for update of" and "current of" clause in the cursors... though the cursor is able to fetch the records getting an error saying invalid rowid.

```
DECLARE
  CURSOR C_EMP IS SELECT * FROM emp FOR UPDATE OF SAL;--LOCKING MEANS WE CANNOT MAKE ANY CHANGES ON THIS COLUMN WHILE THIS CODE IS RUNNING
BEGIN
  FOR R_EMP IN C_EMP LOOP
  IF R_EMP.SAL<5000 AND C_EMP%FOUND THEN
  UPDATE EMP2 SET SAL=SAL*1.1 WHERE CURRENT OF C_EMP;
  END IF;
  END LOOP;
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:43:49.033

假设您真的想更新另一个表 (EMP2) 而不是 EMP，那么您不能使用 where current of 更新另一个表，因为 rowid 不匹配。

其中 current of 表示“我们正在处理的 rowid”。相反，您必须加入正确的列而不是该子句

# mysql - MySQL - Select Domains from url only

> ID：15810012
> 
> 赞同：0
> 
> 时间：2013-04-04T11:36:17.920
> 
> 标签：mysql

Can someone explain what the FOR is doing in this query as I have never seen this usage before in MySQL

```
SELECT SUBSTR( 
    url FROM 1 FOR IF( LOCATE('/', url, 9)!= 0, LOCATE('/', url, 9) - 1, LENGTH(url)  ) 
) AS justurl FROM DUAL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:41:13.777

一位同事指出了我哪里出错了，我错过了 SUBSTR 允许您在其中编写 FROM 和 FOR 的事实。阻止这些 4GL 语言。

```
SUBSTR(str FROM pos FOR len) 
```

[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substr](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substr)

# c# - __declspec(dllexport)::vector

> ID：15810016
> 
> 赞同：4
> 
> 时间：2013-04-04T11:36:26.357
> 
> 标签：c#, c++, vector, pinvoke, declspec

我一直在尝试研究如何将字符串数组从 c++ dll 返回到 ac# 应用程序，但我一直坚持如何做到这一点，或者在非常基本的层面上找到一篇文章。

假设我有下面的代码。如何修复粗体线：

```
extern "C" {
    __declspec(dllexport) int GetANumber();

//unsure on this line:
    **__declspec(dllexport) ::vector<std::string> ListDevices();**

}

extern::vector<std::string> GetStrings()
{
    vector<string> seqs;
    return seqs;
}

extern int GetANumber()
{
    return 27;
} 
```

谢谢

马特

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T16:40:10.937

您可以使用 COM 自动化[SAFEARRAY](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221482.aspx)类型，即使不使用完整的 COM（无对象、无类、无接口、无 TLB、无注册表等），只需使用 DLL 导出，因为 .NET 通过 P/Invoke 原生支持它，像这样的东西：

C++：

```
extern "C" __declspec(dllexport) LPSAFEARRAY ListDevices();

LPSAFEARRAY ListDevices()
{
    std::vector<std::string> v;
    v.push_back("hello world 1");
    v.push_back("hello world 2");
    v.push_back("hello world 3");

    CComSafeArray<BSTR> a(v.size()); // cool ATL helper that requires atlsafe.h

    std::vector<std::string>::const_iterator it;
    int i = 0;
    for (it = v.begin(); it != v.end(); ++it, ++i)
    {
        // note: you could also use std::wstring instead and avoid A2W conversion
        a.SetAt(i, A2BSTR_EX((*it).c_str()), FALSE);
    }
    return a.Detach();
} 
```

C＃：

```
static void Main(string[] args)
{ 
    foreach(string s in ListDevices())
    {
        Console.WriteLine(s);
    }
}

[DllImport("MyUnmanaged.dll")]
[return: MarshalAs(UnmanagedType.SafeArray)] 
private extern static string[] ListDevices(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:07:04.047

你有两种从 C++ 到 C# 的“标准”方式。

第一个是 C++/CLI。在这种情况下，您将构建一个 C++/CLI 库，该库接受`std::vector<std::string>`并将其转换为`System::vector<System::string>`. `System.String[]`然后你可以像在 C# 中一样自由地使用它。

另一个是COM。在那里，您创建了一个返回`SAFEARRAY`包含`BSTR`字符串的 COM 接口。然后通过 C# 中的 System.Runtime.InteropServices 实例化此 COM 接口。然后`SAFEARRAY`是一个 Object[] ，它可以被转换为单个字符串对象。

将 C 接口加载到 C# 中的工具基本上仅限于 C。任何 C++ 都会失败，Pete 提供了“非标准”方法。（它工作得很好，只是不是 MS 想要你做的。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T11:53:54.693

你不能直接做——你需要一个额外的间接级别。对于 C 风格的兼容接口，您需要返回原始类型。忘记使用来自任何其他编译器的 C++ DLL - 没有严格的 C++ ABI。

因此，您需要将一个不透明的指针返回到分配的字符串向量，例如

```
#define MYAPI __declspec(dllexport)
extern "C" {
    struct StringList;

    MYAPI StringList* CreateStringList();
    MYAPI void DestroyStringList(StringList* sl);
    MYAPI void GetDeviceList(StringList* sl);
    MYAPI size_t StringList_Size(StringList* sl);
    MYAPI char const* StringList_Get(StringList* v, size_t index);
} 
```

和实施明智：

```
std::vector<std::string>* CastStringList(StringList* sl) {
    return reinterpret_cast<std::vector<std::string> *>(sl);
}

StringList* CreateStringList() {
     return reinterpret_cast<StringList*>(new std::vector<std::string>);
}

void DestroyStringList(StringList* sl) {
     delete CastStringList(sl);
}
void GetDeviceList(StringList* sl) {
     *CastStringList(sl) = GetStrings(); // or whatever
}
size_t StringList_Size(StringList* sl) {
    return CastStringList(sl)->size();
}
char const* StringList_Get(StringList* v, size_t index) {
    return (*CastStringList(sl))[index].c_str();
} 
```

完成所有这些之后，您可以在 C# 端提供一个更干净的包装器。当然，不要忘记通过 DestroyStringList 函数销毁分配的对象。

# java - 为什么以及何时在 android 中取消注册内容观察者

> ID：15810017
> 
> 赞同：9
> 
> 时间：2013-04-04T11:36:33.370
> 
> 标签：java, android, contentobserver

我正在开发一个 android 应用程序，并且第一次与内容观察者合作。所以我阅读了很多教程并了解了为什么提供它以及如何使用它的概念。

现在我在一个博客上读到了这些行

> 不要忘记注销内容观察者

所以，我无法理解如果我想注册一个，`ContentObserver`那么我必须取消注册的情况可能是什么。

如果观察者的目的得到满足，那么就可以了，我们可以注销它。但是我必须观察直到用户卸载应用程序，然后我为什么要取消注册观察者。

这是那个博客的网址

[http://www.grokkingandroid.com/use-contentobserver-to-listen-to-changes/](http://www.grokkingandroid.com/use-contentobserver-to-listen-to-changes/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T11:44:46.187

查看[活动生命周期](http://developer.android.com/guide/components/activities.html)：

[![活动生命周期](https://i.stack.imgur.com/Aseri.png)](https://i.stack.imgur.com/Aseri.png)

*   如果您在其中注册观察者，则在其中`onCreate`取消注册`onDestroy`
*   如果您在其中注册观察者，则在其中`onStart`取消注册`onStop`
*   如果您在其中注册观察者，则在其中`onResume`取消注册`onPause`

由于只能同时显示一个活动，我建议使用最后一个选项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T11:39:13.667

请阅读您提供的链接，其中明确提及

**在 onResume() 生命周期方法中注册观察者，在 onPause() 方法中取消注册。**

一旦你取消注册这些方法之一。它不会`observe`有任何价值，`memory leak`也不会提供任何价值。

```
 @override

    public void onDestroy()
    {

getContentResolver().
      unregisterContentObserver(yourObserver);

    } 
```

或者你也可以这样做

```
 @override

    public void onPause()
    {
    getContentResolver().
  unregisterContentObserver(yourObserver);

    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-04T11:51:56.287

想象一下，您有一个应用程序，假设有一个使用`FriendListActivity`. 现在要为这个活动创建 UI，您从数据库中读取数据并创建您的 UI。

现在假设您还有一个在后台运行的服务，并使用 Web 服务将此数据库与远程数据库同步。

现在，每当服务更新数据库中的好友列表时，您也希望相应地更新您的 UI。因此，要实现这一点，您将`FriendListActivity`在`Activity`启动时为 Friends注册内容观察者`URI`（假设知道 的概念`URI`），以便每当数据库中的好友列表发生更改时，您也会更新您的`FriendListActivity`. 现在，如果用户退出您的活动或关闭应用程序，那么您不需要更新 UI（因此您不需要获取数据库更改的事件），因此您将取消注册内容观察者。

现在，下次用户来到此屏幕时，您将再次获取最新数据并在数据库中注册以进行内容更改...

因此，内容观察者通常是活动和数据库（或特定 URI）之间的关系。因此，您将在`Activity`启动时注册它，并在活动超出视图时取消注册它..

希望这可以帮助...

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-04T11:41:17.053

在博客文章中，它指出：

> 注册内容观察者后，您也有责任取消注册。否则，您将创建内存泄漏，并且您的 Activity 将永远不会被垃圾收集。

因此，当您`Activity`关闭时，您应该取消注册 - 这应该在`onPause`方法中完成。`onPause`总是会被调用，每当你离开你的`Activity`.

查看生命周期：http `Activities`: [//developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

# benchmarking - 飞镖基准在哪里？

> ID：15810018
> 
> 赞同：2
> 
> 时间：2013-04-04T11:36:38.973
> 
> 标签：benchmarking, dart

我在哪里可以看到飞镖基准（来源）？我知道 benchmark_harness，但我希望看到更多测试（NavierStokes、Splay 等）。

我已经看到他们在一些问题、提交、博客文章中提到，但我在任何地方都找不到它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:15:27.017

你可以看看[Dart Performance](http://www.dartlang.org/performance/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:59:50.330

大多数基准测试源尚未发布。我们需要先清理它们，目前还有更重要的事情要做。但是，我们确实计划随着时间的推移发布更多基准。

# c# - 如何更改导航属性返回类型

> ID：15810021
> 
> 赞同：1
> 
> 时间：2013-04-04T11:36:47.497
> 
> 标签：c#, winforms, entity-framework, entity-framework-5, ef-model-first

我阅读了以下有关 EF5 [Databinding with WinForms](http://msdn.microsoft.com/en-us/data/jj682076)的文章。

我使用 VS2010、.NET 4.0 和 EF5 Model First 方法，我不知道如何在 VS2010 EF 设计器中更改导航属性返回类型，而不更改自动生成的实体类。例如，我需要将导航属性返回类型从 更改`ICollection<T>`为`ObservableCollection<T>`，但在属性视图中禁用了“返回类型”选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:23:14.960

我找到了解决方案。可以更改作为集合的所有导航属性的类型。应编辑 Model First 自动生成实体的文本模板 *.tt 文件。

默认情况下，EF5 生成以下`HashSet`类型的导航属性：

```
If(edmProperty.ToEndMember.RelationshipMultiplicity = RelationshipMultiplicity.Many)
     defaultValue = " = New HashSet(Of " & propertyType & ")"
     propertyType = "ICollection(Of " & propertyType & ")"
End If 
```

要将导航属性类型更改为`ObservableCollection<T>`，应修改两行 *​​.tt 代码：

```
If(edmProperty.ToEndMember.RelationshipMultiplicity = RelationshipMultiplicity.Many)
     defaultValue = " = New ObservableCollection(Of " & propertyType & ")"
     propertyType = "ObservableCollection(Of " & propertyType & ")"
End If 
```

之后，实体类应该会自动重新生成。

# c# - 有 DateTime 列时，大容量复制会引发异常

> ID：15810022
> 
> 赞同：0
> 
> 时间：2013-04-04T11:36:49.600
> 
> 标签：c#, sql, sql-server-2008-r2, columnmappings

我在 C# 中进行批量复制，它工作正常，除非我将 DateTime 列添加到 DataTable 时，批量复制会引发异常`The given ColumnMapping does not match up with any column in the source or destination.`，当我删除 DateTime 列并执行批量复制时，一切正常

添加 DateTime 列时我需要做些什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:48:53.833

根据我的经验，以下是导致此类问题的可能性

1.  列名在源和表中匹配 列类型匹配

2.  在表中的日期\时间列中允许空值，然后通过 DataTable 插入空值，如果它有效，那么数据的问题，否则映射就是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:43:04.430

它可能不是特别是因为它是 DateTime 列 - 检查您的 ColumnMapping 名称，因为它们区分大小写 - 这可能是问题所在。

[在这里](http://www.adathedev.co.uk/2010/04/sqlbulkcopy-columnmappings-mismatch.html)写博客

# eclipse - 请求中缺少 wsse:Security 标头

> ID：15810027
> 
> 赞同：1
> 
> 时间：2013-04-04T11:37:22.163
> 
> 标签：eclipse, axis2, soapui, rampart

我尝试使用本[教程](http://jkrzemie.files.wordpress.com/2011/02/ws.pdf) **第 19-22 页向我的轴 2 项目添加壁垒安全性**

所以一切看起来都很好，但是当我切换到soapUI视角来尝试测试服务时，我提出的请求是：

```
soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:axis="http://axis2wstest">
 <soapenv:Header/>
   <soapenv:Body>
      <axis:testws>
         <!--Optional:-->
         <axis:x>5</axis:x>
      </axis:testws>
   </soapenv:Body>
</soapenv:Envelope> 
```

**它给了我一个回应：**

```
faultstring>Missing wsse:Security header in request</fau 
```

所以我添加了安全头，我的请求和教程中写的一样

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:axis="http://axis2wstest">
 <soapenv:Header>
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-
200401-wss-wssecurity-secext-1.0.xsd" soapenv:mustUnderstand="1">
<wsse:UsernameToken xmlns:wsu="http://docs.oasis-
open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="123">
<wsse:Username>test</wsse:Username>
<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-
200401-wss-username-token-profile-1.0#PasswordText">pass</wsse:Password>
</wsse:UsernameToken>
</wsse:Security>
</soapenv:Header>
   <soapenv:Body>
      <axis:testws>
         <!--Optional:-->
         <axis:x>5</axis:x>
      </axis:testws>
   </soapenv:Body>
</soapenv:Envelope> 
```

**但反应是一样的**

```
soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
   <soapenv:Body>
      <soapenv:Fault xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
         <faultcode>wsse:InvalidSecurity</faultcode>
         <faultstring>Missing wsse:Security header in request</faultstring>
         <detail/>
      </soapenv:Fault>
   </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:28:01.920

不要将安全标头直接添加到您的请求中！

点击左下角的**Aut 。**然后你可以在那里输入你的用户名/密码。有关更多信息，请参阅： http: [//www.soapui.org/SOAP-and-WSDL/authenticating-soap-requests.html](http://www.soapui.org/SOAP-and-WSDL/authenticating-soap-requests.html)

作为*Authorization type*选择*Preemptive*。（据我所知，仅在soapUI 4.5.1中）

# php - 大量返回列时查询慢

> ID：15810031
> 
> 赞同：0
> 
> 时间：2013-04-04T11:37:31.440
> 
> 标签：php, mysql, performance

我有一个相当大的查询，从 php 脚本中执行大约需要 0.11 秒（不是很大，但可能会被大量使用），但是当通过 phpmyadmin 执行时，它声称查询需要 0.0047 秒。

我进行了相当多的调查，我发现如果我将返回的列减少到最低限度（从 ~50 减少到 2，留下用于对结果进行排序的列）查询会快得多（在与 phpmyadmin 相同的区域内索赔）。不幸的是，我需要这些列中的数据。如果返回的数据被导出，它只有 3k 左右（作为 CSV）。删除 order by 子句的影响也可以忽略不计。

返回的行数非常少（大约 8 行），因此 phpmyadmin 默认使用的限制子句不是一个因素。

检索到的数据量对查询（而不是对任何数据行的获取）产生如此巨大的影响似乎很奇怪。

我不确定在不减少返回列或拆分查询（这只会改变瓶颈）的情况下如何提高性能。

查询如下（不确定这对明显的问题有多大帮助）。

```
SELECT DISTINCT
    f.MultiItemService,
    b.GroupName,
    n.CourierName,
    f.DeliveryserviceId,
    f.CourierId,
    f.DeliveryserviceName,
    f.CustomerDescription,
    f.SageCode,
    d.MarkupId,
    d.Description AS MarkupDescription,
    d.Discount,
    d.FixedAmount,
    f.Status,
    f.MinItems,
    f.MaxItems,
    f.MinWeight,
    f.MaxWeight,
    f.MinVolume,
    f.MaxVolume,
    f.MinWidth,
    f.MaxWidth,
    f.MinHeight,
    f.MaxHeight,
    f.MinDepth,
    f.MaxDepth,
    f.MinWorth,
    f.MaxWorth,
    d.MinItems AS MarkupMinItems,
    d.MaxItems AS MarkupMaxItems,
    d.MinWeight AS MarkupMinWeight,
    d.MaxWeight AS MarkupMaxWeight,
    d.MinVolume AS MarkupMinVolume,
    d.MaxVolume AS MarkupMaxVolume,
    d.MinWidth AS MarkupMinWidth,
    d.MaxWidth AS MarkupMaxWidth,
    d.MinHeight AS MarkupMinHeight,
    d.MaxHeight AS MarkupMaxHeight,
    d.MinDepth AS MarkupMinDepth,
    d.MaxDepth AS MarkupMaxDepth,
    d.MinWorth AS MarkupMinWorth,
    d.MaxWorth AS MarkupMaxWorth,
    f.Price,
    f.AdditionalPrice,
    f.DeliveryType,
    f.Consolidation,
    f.Surcharge,
    h.VatRate,
    k.InsuranceLevelId,
    k.InsuranceLevelDescription,
    k.InsuranceLevelMinimum,
    k.InsuranceLevelMaximum,
    m.OptionId, 
    m.OptionDescription, 
    m.OptionCost,
    f.CalculationId,
    CASE b.GroupName  WHEN 'home' THEN 1   WHEN 'customer' THEN 2  WHEN 'Standard' THEN 3 ELSE 4 END AS Priority
FROM users a
INNER JOIN groups b ON a.UserId = b.UserId AND a.ApiKey = 'ABC123ABC' 
INNER JOIN markups d ON b.GroupId = d.GroupId
INNER JOIN markups_deliveryservices o ON d.MarkupId = o.MarkupId 
INNER JOIN deliveryservices f ON o.DeliveryserviceId = f.DeliveryserviceId
INNER JOIN deliveryservices_days j ON f.DeliveryserviceId = j.DeliveryserviceId 
INNER JOIN couriers n ON f.CourierId = n.CourierId  
LEFT OUTER JOIN insurance_levels k ON f.DeliveryserviceId = k.DeliveryserviceId 
LEFT OUTER JOIN optional_services_deliveryservices l ON f.DeliveryserviceId = l.DeliveryserviceId 
LEFT OUTER JOIN optional_services m ON l.OptionId = m.OptionId  
INNER JOIN deliveryservices_delivery_groups g ON f.DeliveryserviceId = g.DeliveryserviceId
INNER JOIN delivery_groups h ON g.DeliveryGroupId = h.DeliveryGroupId 
INNER JOIN markups_delivery_groups p ON d.MarkupId = p.MarkupId
INNER JOIN delivery_groups q ON p.DeliveryGroupId = q.DeliveryGroupId 
WHERE h.DeliveryGroupId IN (15,12)
AND q.DeliveryGroupId IN (15,12) AND f.DeliveryType = 'Business And Domestic'
AND a.Status = 1
AND b.Status = 1
AND d.Status = 1
AND n.Status = 1
AND f.Status = 1
AND 1 BETWEEN f.MinItems AND f.MaxItems 
AND ((f.MultiItemService = 0 /* single parcel delivery services */
AND 32 BETWEEN f.MinWeight AND f.MaxWeight  /* item total weight within limits */
AND 193960 BETWEEN f.MinVolume AND f.MaxVolume  /* item total volume within limits */
AND 0 BETWEEN f.MinWorth AND f.MaxWorth)  /* item total value within limits */
OR (f.MultiItemService = 1 /* multiple parcel delivery services */
AND 0.16 BETWEEN f.MinWeight AND f.MaxWeight   /* max weight of any item within limits */
AND 969.8 BETWEEN f.MinVolume AND f.MaxVolume   /* max volume of any item within limits */
AND 0 BETWEEN f.MinWorth AND f.MaxWorth   /* max value of any item within limits */
AND ((32 != 0 AND 32 NOT BETWEEN f.MinWeight AND f.MaxWeight)  /* item total weight NOT within limits */
OR (149200 != 0 AND 193960 NOT BETWEEN f.MinVolume AND f.MaxVolume)  /* item total volume NOT within limits */
OR (0 != 0 AND 0 NOT BETWEEN f.MinWorth AND f.MaxWorth)
)))
AND 18.4 BETWEEN f.MinWidth AND f.MaxWidth 
AND 15.6 BETWEEN f.MinHeight AND f.MaxHeight 
AND 2.6 BETWEEN f.MinDepth AND f.MaxDepth
AND 1 BETWEEN d.MinItems AND d.MaxItems 
AND 32 BETWEEN d.MinWeight AND d.MaxWeight 
AND 193960 BETWEEN d.MinVolume AND d.MaxVolume 
AND 18.4 BETWEEN d.MinWidth AND d.MaxWidth 
AND 15.6 BETWEEN d.MinHeight AND d.MaxHeight 
AND 2.6 BETWEEN d.MinDepth AND d.MaxDepth
AND 0 BETWEEN d.MinWorth AND d.MaxWorth
AND j.DayOfWeek = 5 
AND j.UpToTime >= 61063
ORDER BY Priority 
```

解释如下：-

```
id  select_type     table   type    possible_keys   key     key_len     ref     rows    Extra 
1   SIMPLE  k   system  DeliveryserviceId   NULL    NULL    NULL    0   const row not found
1   SIMPLE  l   system  RuleId  NULL    NULL    NULL    0   const row not found
1   SIMPLE  m   system  PRIMARY NULL    NULL    NULL    0   const row not found
1   SIMPLE  a   ref PRIMARY,ApiKey  ApiKey  257 const   1   Using where; Using temporary; Using filesort
1   SIMPLE  q   index   PRIMARY PRIMARY 4   NULL    7   Using where; Using index; Using join buffer
1   SIMPLE  p   ref PRIMARY,DeliveryGroupId,MarkupId    DeliveryGroupId 4   DeliveryApiAdv.q.DeliveryGroupId    2    
1   SIMPLE  d   eq_ref  PRIMARY,GroupId PRIMARY 4   DeliveryApiAdv.p.MarkupId   1   Using where
1   SIMPLE  b   eq_ref  PRIMARY,UserId  PRIMARY 4   DeliveryApiAdv.d.GroupId    1   Using where
1   SIMPLE  o   ref markup_id,DeliveryserviceId markup_id   4   DeliveryApiAdv.p.MarkupId   2   Using index
1   SIMPLE  g   ref PRIMARY,DeliveryGroupId,DeliveryserviceId   PRIMARY 4   DeliveryApiAdv.o.DeliveryserviceId  1   Using where; Using index
1   SIMPLE  h   eq_ref  PRIMARY PRIMARY 4   DeliveryApiAdv.g.DeliveryGroupId    1    
1   SIMPLE  j   eq_ref  PRIMARY PRIMARY 5   DeliveryApiAdv.o.DeliveryserviceId,const    1   Using where
1   SIMPLE  f   eq_ref  PRIMARY,CourierId   PRIMARY 4   DeliveryApiAdv.o.DeliveryserviceId  1   Using where
1   SIMPLE  n   eq_ref  PRIMARY PRIMARY 4   DeliveryApiAdv.f.CourierId  1   Using where 
```

编辑 - 经过更多调查后进行跟进。减少返回的列数可将运行时间大幅缩短约 95%。发生这种情况的点因使用的列而异（即，大约十几个 INT 列，但只有大约 8 个合理大小的 VARCHAR 列）。对于一个实验，我使用 CONCAT_WS 运行 SQL 以将返回的列连接在一起，而不是单独返回。这将返回的数据列数从 11 增加到 22。

为了进一步调试，我更改了主 SELECT，因此它只返回其他表的 ID 字段，但根本没有更改连接。然后我用它来填充临时表。这运行得很快。然后，我将该临时表加入到表中以获取我实际需要的数据。此查询在主键上具有非常简单的连接，并且没有 where 子句，但运行缓慢。

对我来说，这证实了问题不是查询的复杂性，而是我遇到的与结果行大小相关的一些限制。

编辑 - 经过进一步调查后，问题似乎与查询无关。在配置稍有不同的数据库上运行它不会成为问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:09:58.477

您可以尝试在连接条件中使用 where 子句的某些部分。

例如

```
select a.*, b.* from a inner join b on a.col1 = b.col1 and b.status = 1 and a.status = 1 
```

# httpclient - Mule HTTP java.io.IOException：尝试在关闭的流上读取

> ID：15810032
> 
> 赞同：0
> 
> 时间：2013-04-04T11:37:31.957
> 
> 标签：httpclient, mule

当我在一个流中使用两个 HTTP 端点时，Mule 会抛出这个异常。我找到了解决这个问题的方法：在异步模式下使用第二个 HTTP 端点，但这不是一个好方法。

```
ERROR DefaultSystemExceptionStrategy [[testdemo].connector.http.mule.default.receiver.03]: Caught exception in Exception Strategy: Attempted read on closed stream.
java.io.IOException: Attempted read on closed stream.
    at org.apache.commons.httpclient.AutoCloseInputStream.isReadAllowed(AutoCloseInputStream.java:183)
    at org.apache.commons.httpclient.AutoCloseInputStream.read(AutoCloseInputStream.java:126)
    at org.mule.model.streaming.DelegatingInputStream.read(DelegatingInputStream.java:58)
    at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1025)
    at org.mule.transformer.simple.ObjectToOutputHandler$3.write(ObjectToOutputHandler.java:76)
    at org.mule.transport.http.HttpServerConnection.writeResponse(HttpServerConnection.java:315)
    at org.mule.transport.http.HttpMessageReceiver$HttpWorker.run(HttpMessageReceiver.java:164)
    at org.mule.work.WorkerContext.run(WorkerContext.java:311)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

我的代码：

```
<flow doc:name="httpPost" name="httpPost">
    <http:inbound-endpoint doc:name="HTTP" keep-alive="true"
        exchange-pattern="request-response" host="localhost" path="service"
        port="8082" />

    <http:body-to-parameter-map-transformer />

    <!-- This component is just set to show the message accecpted from the request -->
    <scripting:component>
        <scripting:script engine="groovy">
            println payload['name']
            return payload['name']+'123'
        </scripting:script>
    </scripting:component>
</flow>

<flow doc:name="httpPost" name="client">
    <http:inbound-endpoint doc:name="HTTP" name="httpClient"
        exchange-pattern="request-response" host="localhost" path="client"
        port="8082" encoding="UTF-8" />

    <http:body-to-parameter-map-transformer />

    <scripting:component>
        <scripting:script engine="groovy">
            payload['name'] = 'opasso'
            def paramstr = ""
                for( param in payload){
                paramstr = paramstr + "&amp;" + param.key+ "=" + param.value
            }
            println "querystr:$paramstr"
            return paramstr.substring(1)
        </scripting:script>
    </scripting:component>

    <http:outbound-endpoint address="http://localhost:8082/service"
        exchange-pattern="request-response" contentType="application/x-www-form-urlencoded"
        method="POST" encoding="UTF-8" />

    <!-- This component is just set to show the message accecpted from the request -->
    <scripting:component>
        <scripting:script engine="groovy">
            def msg = "return payload:$payload;".toString()
            println msg
            return payload
        </scripting:script>
    </scripting:component>
</flow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:42:55.050

该问题与您在`scripting:component`使用`http:outbound-endpoint`. 该脚本可能会消耗输入流，使其处于无法再使用的状态。

尝试在 之后添加一个`<object-to-string-transformer />`权利`http:outbound-endpoint`以将流反序列化为字符串，以便有效负载可以在`scripting:component`和 Mule 中使用。

# html - 如何在html隐藏值中添加特殊字符

> ID：15810034
> 
> 赞同：1
> 
> 时间：2013-04-04T11:37:38.350
> 
> 标签：html, html-escape-characters

我想将 value="name+asc" 放在隐藏字段中。Http方法是Get。

```
<input type="hidden" value="name+asc" name="sort" /> 
```

但我不能将名称+asc 放在 URL 中。

我该如何处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:48:25.307

提交表单时，表单输入的值将自动正确编码。在`application/x-www-form-urlencoded`数据中，`+`符号代表一个空格，因此浏览器会将其编码为`%2B`.

如果您想`+`在数据中提交表单：您拥有的代码很好。

如果要提交数据中包含空格的表单：使用文字空格。浏览器将为您编码。

如果您想使用 JavaScript 读取表单数据并在通过`encodeURIComponent`方法传递数据时以编程方式构造 URL（或发布请求）。

```
var value = "123+456";
var encodedValue = encodeURIComponent(value);
var url = "http://example.com/?query=" + encodedValue; 
```

如果您想手动构建一个 URI（例如粘贴到 HREF 属性中），那么您将需要在某个地方查找编码值。我倾向于在终端中运行 node.js，这样我就可以快速输入`encodeURIComponent('a string literal');`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:44:19.510

据我所知，除非编码为特殊字符，否则 + 会自动拆分您的值。您可以使用 - 或 _ 代替 +。

# python - 在 Python 中将文本写入文件

> ID：15810038
> 
> 赞同：-4
> 
> 时间：2013-04-04T11:37:50.803
> 
> 标签：python

如何在 Python 中将文本写入文件？

我的尝试：

```
def test(src):
    f = open('test.txt','w')
    f.write("testabc")
    for item in os.listdir(src):
        s = os.path.join(src, item)
        print s
        f.write(s)

def main ():
    src="/path/"
    test(src)

if __name__ == '__main__':
    main() 
```

但它不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:02:28.707

最好使用一个`with`块来为您处理文件的关闭：

```
def test(src):
    with open('test.txt','w') as f:
        f.write("testabc")
        for item in os.listdir(src):
            s = os.path.join(src, item)
            print s
            f.write(s) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:41:07.927

你不见了`f.close()`

```
.....
for item in os.listdir(src):
        s = os.path.join(src, item)
        print s
        f.write(s)
f.close() # <- add this line
..... 
```

# c# - C# - 为什么我得到一个空引用异常？

> ID：15810040
> 
> 赞同：-2
> 
> 时间：2013-04-04T11:37:51.990
> 
> 标签：c#, class, nullreferenceexception

我对为什么在尝试返回数据集时收到空引用异常感到困惑。

我有一个处理程序和 DBaccess 类，就像在 nTier 架构中一样。

首先，这是我的案例文件处理程序/和访问类的一部分，它们工作正常。我将它们包括在内是因为我不明白为什么这个有效而另一个无效。

```
public class CaseFileHandler
{
    CaseFileAccess caseaccess = null;

    public CaseFileHandler()
    {
        caseaccess = new CaseFileAccess();
    }

    public DataSet getCaseFileDataset(int caseID)
    {
        return caseaccess.GetCaseFileDataSet(caseID);
    }

    public bool UpdateCasefile(CaseFile casefile)
    {
        return caseaccess.updateCasefile(casefile);
    }     
} 
```

这是访问类。返回数据集的方法工作得很好。

```
public class CaseFileAccess
{
    const string CONNECTION_STRING = "Data Source = SQLSERVER;Initial Catalog=CaseManager;Integrated Security=SSPI;";

    DBManager _DAL = new DBManager(DataProvider.SqlServer, CONNECTION_STRING);

    public CaseFile GetCaseFile(int caseID)
    {
        CaseFile casefile = new CaseFile();

        _DAL.Open();
        _DAL.CreateParameters(1);
        //stuff
       return casefile;
    }

    public DataSet GetCaseFileDataSet(int caseID)
    {
        _DAL.Open();
        _DAL.CreateParameters(1);
        _DAL.AddParameters(0, "@CaseID", caseID);
        DataSet ds = _DAL.ExecuteDataSet(CommandType.StoredProcedure, "sp_BL_AdjustmentsPage_READ_Case");
        _DAL.Close();
        return ds;
    }

    public bool updateCasefile(CaseFile casefile)
    {
        int result = 0;
        _DAL.CreateParameters(56);

    //stuff 
        _DAL.Open();
        result = _DAL.ExecuteNonQuery(CommandType.StoredProcedure, "dbo.sp_BL_AdjustmentsPage_UPDATE_Case");
        _DAL.Close();
        return (result > 0);
    }

} 
```

这就是我感到困惑的原因。我创建了一个处理程序和一个访问类来返回要绑定到 asp:dropdown 列表的数据集，并以与案例文件类相同的方式构建这些类

这是处理程序类：

```
public class ddMenuHandler
{
    ddMenuAccess menuaccess = null;

    public ddMenuHandler()
    {
        ddMenuAccess menuaccess = new ddMenuAccess();
    }

    public DataSet dsCwkrCaseEditing(int cwID)
    {
        return menuaccess.CwkrsCaseEditing(cwID);
    }

} 
```

和访问类：

```
 public class ddMenuAccess
 {
        const string CONNECTION_STRING = "Data Source = SQLSERVER;Initial Catalog=CaseManager;Integrated Security=SSPI;";

        DBManager _DAL = new DBManager(DataProvider.SqlServer, CONNECTION_STRING);

        public DataSet CwkrsCaseEditing(int cwID)
        {
            _DAL.CreateParameters(1);
            _DAL.AddParameters(0, "@ID",cwID);
            _DAL.Open();
            DataSet ds = _DAL.ExecuteDataSet(CommandType.StoredProcedure, "sp_BL_CwkrsActiveCaseEdit");
            _DAL.Close();
            return ds;
        }

     } 
```

这是我背后的代码：

```
 protected global::Adjustfiles.CaseFile casefile;
  protected global::System.Web.UI.WebControls.DropDownList ddCaseworker;

protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack == false)
        {
            int caseID = Convert.ToInt32(Request.QueryString["caseID"]);
            MySession.Current.editCaseID = caseID;

            CaseFileHandler cfhandler = new CaseFileHandler();
            casefile = cfhandler.getCaseFile(caseID);

            DataSet DScase = cfhandler.getCaseFileDataset(caseID);
            fv_casefile.DataSource = DScase;
            fv_casefile.DataBind();
            BindDdCwkrs();

        }
    }

    private void BindDdCwkrs()
    {
        ddMenuHandler menuaccess = new ddMenuHandler();
        DataSet ds = menuaccess.dsCwkrCaseEditing(casefile.CaseWorkerID);
        int i = 0;
        ddCaseworker.DataSource = ds;
        ddCaseworker.DataTextField = "CwName";
        ddCaseworker.DataValueField = "CwID";
        ddCaseworker.DataBind();
        ddCaseworker.SelectedValue = Convert.ToString(casefile.CaseWorkerID);

    } 
```

在线`ddCaseworker.DataSource = ds;` 是我得到空引用异常的地方，menuaccess 是`null`. 但为什么？

```
Source Error:

Line 29:public DataSet dsCwkrCaseEditing(int cwID)
Line 30:{
Line 31:     return menuaccess.CwkrsCaseEditing(cwID);
Line 32:}
Line 33:

System.NullReferenceException was unhandled by user code
Message=Object reference not set to an instance of an object.
Source=Adjustfiles
StackTrace:
at Adjustfiles.ddMenuHandler.dsCwkrCaseEditing(Int32 cwID) in H:\Visual Studio 2010\Projects\Adjustfiles\Adjustfiles\ddMenuHandler.cs:line 31
       at Adjustfiles.adjustFile66EditCase.BindDdCwkrs() in H:\Visual Studio 2010\Projects\Adjustfiles\Adjustfiles\adjustFile66EditCase.aspx.cs:line 45
       at Adjustfiles.adjustFile66EditCase.Page_Load(Object sender, EventArgs e) in H:\Visual Studio 2010\Projects\Adjustfiles\Adjustfiles\adjustFile66EditCase.aspx.cs:line 29
       at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
       at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
       at System.Web.UI.Control.OnLoad(EventArgs e)
       at System.Web.UI.Control.LoadRecursive()
       at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
  InnerException: 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:43:34.570

您将 ddMenuAccess 设置为局部函数变量而不是类变量：

该行：

```
ddMenuAccess menuaccess = new ddMenuAccess(); 
```

变成：

```
this.menuaccess = new ddMenuAccess(); 
```

应该按预期工作。（“this.”可选，但有助于澄清）

```
public class ddMenuHandler
{
    ddMenuAccess menuaccess = null;

    public ddMenuHandler()
    {
        this.menuaccess = new ddMenuAccess();
    }

    public DataSet dsCwkrCaseEditing(int cwID)
    {
        return menuaccess.CwkrsCaseEditing(cwID);
    } 
```

}

# vba - VBA Excel 备份：通过 VBA 以新名称保存当前工作簿的副本，保留 VBA 脚本，无提示

> ID：15810046
> 
> 赞同：1
> 
> 时间：2013-04-04T11:38:11.673
> 
> 标签：vba, excel, backup

我需要制作一个 VBA 脚本，它可以获取当前工作簿的完整副本并将其保存为新名称。

它需要是包含 VBA 脚本和所有内容的完整副本。

可能不会提示用户输入任何内容 - 新文件名（和位置）将由代码提供。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T11:45:58.770

当然这样的事情就足够了吗？

```
Application.DisplayAlerts = False
ActiveWorkbook.SaveAs Filename:="C:\Data.xlsm"
Application.DisplayAlerts = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-16T10:47:54.487

试试这个：

```
Activeworkbook.SaveCopyAs "C:\Data.xlsm" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-13T12:37:38.250

我注意到至少对于 Excel 2013`ActiveWorkbook.SaveAs Filename:="C:\Data.xlsm`可能无法正常工作，因为我说 excel 无法保存为文件类型 xlsm。

[![在此处输入图像描述](https://i.stack.imgur.com/8o1yn.png)](https://i.stack.imgur.com/8o1yn.png)

但是，我确实找到了适合自己的解决方法，并想在此处添加它作为可能遇到相同问题的其他人的参考。

如果您`, FileFormat:=52`在代码之后添加，它将能够保存为`xlsm`格式。

所以这对我有用：

```
ActiveWorkbook.SaveAs Filename:="C:\Data.xlsm, FileFormat:=52" 
```

快乐编码！

# wcf - CommunicationChannel 出现故障 - DTexec 与 SQL 作业代理

> ID：15810047
> 
> 赞同：1
> 
> 时间：2013-04-04T11:38:12.320
> 
> 标签：wcf, channel, faulted, dtexec

我有一个 SSIS 包，里面有一个脚本任务。在脚本中，我使用 IRequestChannel 与 SAP RFC 程序进行通信。

奇怪的错误是，如果我通过 dtexec 运行包，我会收到错误消息，表明我的通道处于故障状态并且脚本终止。我尝试了此处或 MSDN 上的所有错误检查例程，例如

```
if (channel.State == CommunicationState.Faulted)
{
   // abort channel and create new one
} 
```

但错误仍然存​​在。

但是，如果我通过 SQL Server 2008 中的 Job Agent 运行相同的 SSIS 包，它运行得非常好，没有任何通道出现故障的消息。

这个怎么可能？感谢您的任何解释。克里斯

# javascript - 添加的javascript数组总和最小值最大值

> ID：15810049
> 
> 赞同：0
> 
> 时间：2013-04-04T11:38:17.350
> 
> 标签：javascript, arrays, function

我一直在努力解决在 Javascript 中困扰我的问题。我正在使用 .split() 从输入字段中获取值，该输入字段的数字由逗号分隔，然后我使用 split() 创建一个新变量，并将该值作为数组，一切都很好。我一直在使用控制台输出数组的值，我在两种不同的场景中尝试过，这些是输出：

1）在“孤立”网站中：[“46”，“43”，“44”，“41”，“47”，“42”，“45”]

2）在生产网站：["46", "43", "44", "41", "47", "42", "45", sum: function, max: function, min: function]

什么可以将数组更改为此？我怀疑 underscore.js 是罪魁祸首，因为它是在 web #2 而不是 #1 中加载的。

我只是问，因为我不知道还要寻找什么！

提前致谢。

**更新：**您可以在这里尝试并打开控制台：[http](http://www.cdc-bike.com/tienda) ://www.cdc-bike.com/tienda | 这是另一个网站：[http ://www.cdc-bike.com/stage/wordpress/?page_id=732](http://www.cdc-bike.com/stage/wordpress/?page_id=732)

使用的一些代码：

场地：

```
<input type="hidden" name="selected-brands" id="selected-brands" value="47,42"> 
```

选择值：

```
var selected_brands = $('input#selected-brands').val(); 
```

拆分值：

```
var splitted_brands = brands.split(','); 
```

就这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:03:17.133

`all.js`如果您的问题是通过数组循环使用，则这些原型在 中声明

`for(var i = 0; i < array.length...`

代替

`for(var i in array) { ....`

# wordpress - 在 IE8 中刷新页面加载

> ID：15810051
> 
> 赞同：5
> 
> 时间：2013-04-04T11:38:24.023
> 
> 标签：wordpress, internet-explorer, internet-explorer-8, responsive-design, zurb-foundation

我正在开发一个网站，在刷新页面时我遇到了很多加载不一致的问题。点击链接按预期工作；那里没有问题。该问题仅在刷新页面时出现。您会注意到加载需要很长时间，并且在某些情况下根本拒绝加载。

[http://annualreview.com.au/caltex/2012/](http://annualreview.com.au/caltex/2012/)

该网站是使用 WordPress 3.5.1 ( [http://wordpress.org](http://wordpress.org) ) 和 Foundation 3.2.5 ( [http://foundation.zurb.com/](http://foundation.zurb.com/) ) 构建的。

任何有关此事的帮助将不胜感激。我没主意了。

谢谢。

**更新：**这可能与 IE 无关。这个问题似乎也存在于其他浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:28:33.833

听起来在 response.js 中引入了一个基于时间的问题。它可能具有直接内联在 js 文件中的 javascript 代码，并且未包装在诸如 document.ready 之类的事件中。这将导致它在页面加载和读取 js 时立即执行，并可能导致页面加载行为不一致，具体取决于事情发生的快慢。

如果是这种情况，一个快速的解决方法可能是将 response.js 文件的全部内容包装在文档就绪事件处理程序中，这样代码在所有内容加载完成之前不会执行。

```
$(document).ready(function(){
    //respond.js contents here..
}); 
```

话虽如此，我会检查 IE 或 Chrome 开发人员工具控制台，看看是否发生任何 js 错误。如果仍然没有运气，我将重新跟踪页面加载逻辑，以尝试确定可能存在与时间相关的问题并从那里开始。您可以在代码中添加 console.log 条目，以帮助您在运行时跟踪它并确定流程。日志条目可以清楚地表明问题的根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:08:52.503

查看 Firebug，尝试加载图像存在巨大延迟。在加载前一个图像之前，每个图像都会阻塞 - 尝试刷新页面几次，图像每次都需要 1 到 11 秒。

[Firebug 结果图片：](https://s17.postimg.org/i3jtmbz1r/firebug_results.jpg) ![https://s17.postimg.org/i3jtmbz1r/firebug_results.jpg](https://s17.postimg.org/i3jtmbz1r/firebug_results.jpg)

我对图像优化不是很了解，但是在快速搜索之后，发现了几种可以尝试优化加载时间的方法：

*   [CSS Sprites](http://alistapart.com/article/sprites) - 这不太可能对您查看图像的尺寸有用，并且可能很难实现图像淡入淡出，但值得一提的是可以在网站的其他地方实现。
*   您可以尝试的另一件事是使用其他图像托管站点，例如 Flickr 或 Amazon S3。浏览器往往一次只允许你有 2 个连接到同一服务器（所有图像都在同一服务器上，你会得到很长的阻塞时间），但允许同时连接到 8 个不同的服务器，所以使用第三个派对网站可能会为您缩短加载时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T02:55:44.477

我用以下脚本替换了 Respond.js，问题自行解决了。[http://code.google.com/p/css3-mediaqueries-js](http://code.google.com/p/css3-mediaqueries-js)

# c++ - 为什么我有这个错误？

> ID：15810055
> 
> 赞同：-4
> 
> 时间：2013-04-04T11:38:41.963
> 
> 标签：c++, c

我有这个代码，当我编译时我有这个错误：

```
1>main1.obj : error LNK2019: unresolved external symbol _AsmSearchDll referenced in function _main
1>D:\Projects\C++\CascadeTrain\Debug\LicentaOpenCv2.4.4.exe : fatal error LNK1120: 1 unresolved externals

#include "stasm_dll.hpp"

int main (int argc, char** argv)
{
    const char *image_name = "D:\\Projects\\C++\\CascadeTrain\\CascadeTrain\\Images\\12\\FirstWide\\frame1.jpg";

    IplImage *img = cvLoadImage(image_name, CV_LOAD_IMAGE_COLOR);
    if (img == NULL) {
        printf("Error: Cannot open %s\n", image_name);
        return -1;
    }

    // locate the facial landmarks with stasm

    int nlandmarks;
    int landmarks[500]; // space for x,y coords of up to 250 landmarks
    AsmSearchDll(&nlandmarks, landmarks,
                 image_name, img->imageData, img->width, img->height,
                 1 , NULL , NULL );

    if (nlandmarks == 0) {
        printf("\nError: Cannot locate landmarks in %s\n", image_name);
        return -1;
    }

#if 0 // print the landmarks if you want
    printf("landmarks:\n");
    for (int i = 0; i < nlandmarks; i++)
        printf("%3d: %4d %4d\n", i, landmarks[2 * i], landmarks[2 * i + 1]);
#endif

    // draw the landmarks on the image

    int *p = landmarks;
    cvPolyLine(img, (CvPoint **)&p, &nlandmarks, 1, 1, CV_RGB(255,0,0));

    // show the image with the landmarks

    cvShowImage("stasm example", img);
    cvWaitKey(0);
    cvDestroyWindow("stasm example");
    cvReleaseImage(&img);
    return 0;
} 
```

我在同一个目录中有 .cpp 和 .dll 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:40:52.887

编译器找不到 的定义`AsmSearchDll`。这可能是因为您没有链接`.cpp`函数的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:01:20.673

您可能需要链接到 AsmSearchDll 的*导入库*。*仅在编译*时将其放在同一目录中是不够的。*但是，当您运行*时，您确实需要它。

# ios - 允许在 shouldAutoRotate 中旋转 - 但停止所有视图旋转 - iOS

> ID：15810057
> 
> 赞同：0
> 
> 时间：2013-04-04T11:38:51.050
> 
> 标签：ios, orientation, autorotate

编辑：（相机胶卷==图片库）

现在我有一个带有 2 个视图控制器的应用程序，其中第 2 个从第 1 个模态呈现。我想做的是创建类似于iOS默认相机应用程序所做的事情，从左向右滑动手指并平移以引入相机胶卷。

我打算创建一个滚动视图并并排添加两个视图。

目前在第一个视图控制器（即相机）中没有旋转支持。但在第二个屏幕中，所有方向都启用了自动旋转。

如果我将两者都放在一个滚动视图中，我应该如何在 2 个视图控制器中实现 shouldAutorotate 方法？视图控制器是不同的，但两者都会同时存在于内存中）

我不想在相机屏幕上自动旋转任何东西，但我希望在拉入相机胶卷时自动旋转。此外，当滚动视图可见内容是相机屏幕并且设备旋转时，相机胶卷部分应该旋转，以便平移手指从左到右以正确的方向进入相机胶卷。

我看到一个选项，允许在两个 VC 中自动旋转，但根据新的原点设置相机屏幕视图的位置，这样看起来好像没有任何旋转。

其他选项是在滚动视图显示相机屏幕时不允许自动旋转，并在相机胶卷进入时开始允许它。但是如果我在相机屏幕中，我必须使用滚动视图和相机胶卷的位置，以便平移正常工作.

第一个选项似乎更好......但仍然不够酷。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:37:20.530

如果您以模态方式呈现一些视图控制器，它会在控制器层次结构中变得更高，并且该视图控制器是当时唯一获得旋转通知的控制器。其他控制器是“聋子”。您也可以在您的应用程序委托中获得轮换通知。由于相机胶卷也应该以模态方式呈现，因此您需要使用两个视图控制器来处理。

如果我是你，我会处理用户滚动到他的图片库末尾的情况，下一个滑动手势会显示你的相机胶卷（你在浏览照片时不需要你的相机胶卷）

# delphi - 如何制作安装程序项目来为 Delphi 应用程序构建安装程序

> ID：15810059
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:38:54.780
> 
> 标签：delphi, inno-setup, pascal, delphi-xe3

我是 Delphi 的新手（以前曾在低级别使用过 Visual Studio）并且正在努力了解如何将项目编译成最终的应用程序/安装程序。我已经下载了 Inno 设置，我认为这是朝着正确方向迈出的一步。我使用 XE3。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:55:59.137

Delphi 无法编译 InnoSetup 项目（**编辑**Delphi*编译器*本身无法编译 InnoSetup 项目。Delphi *IDE*可以使用 Post Build 事件做任何事情），据我所知，我的 Delphi 时代没有这样的Delphi 中的“安装程序项目”就像在 Visual Studio 中一样。

Delphi 项目被编译成 exe/dll。然后，您使用 InnoSetup 脚本来描述 InnoSetup 应如何安装您的应用程序。然后使用 InnoSetup 编译器将脚本和所需的其他文件编译到设置中。

**编辑**
澄清我想说的：

Delphi 中没有“安装项目”之类的东西，而它存在于 Visual Studio 中。但是，您*当然*可以在项目的 Post Build 事件中为第三方设置创建者（如 Inno Setup）编译设置脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:53:21.540

**编辑**：原始帖子要求提供一种编译 Delphi 项目的方法。问题的新修订使这个答案看起来很愚蠢。

一旦你有了 Delphi 安装程序，你可以简单地通过调用命令行编译器来编译你的项目

```
DCC64 project 
```

如果需要，这将重新编译所有需要的单元，并生成生成的 EXE 文件。

# php - php语法错误，引号

> ID：15810060
> 
> 赞同：0
> 
> 时间：2013-04-04T11:39:04.293
> 
> 标签：php, syntax-error, epub

我有这段代码导致我的脚本崩溃。我敢肯定，我有某种引号混淆。现在已经盯着这个一个小时了，找不到错误。非常感谢任何帮助。

可以包含逗号，`$title`可以吗？删除所有变量可以解决问题，也许这是我如何添加它们或它们包含什么的问题？

```
$contentopf = "
<?xml version=\"1.0\" encoding=\"utf-8\"?>
<package xmlns=\"http://www.idpf.org/2007/opf\" unique-identifier=\"bookid\" version=\"3.0\" prefix=\"rendition: http://www.idpf.org/vocab/rendition/# ibooks: http://vocabulary.itunes.apple.com/rdf/ibooks/vocabulary-extensions-1.0/\">
  <metadata xmlns=\"http://www.idpf.org/2007/opf\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" >
     <dc:format>application/epub+zip</dc:format>
     <meta name=\"cover\" content=\"cover-image\" />
     <dc:title>".$title."</dc:title>
     <meta property=\"ibooks:version\">0.3.0</meta>
     <dc:creator id=\"aut\">".$fname." ".$lname"</dc:creator>
     <meta refines=\"#aut\" property=\"role\" scheme=\"marc:relators\">aut</meta>
     <meta refines=\"#aut\" property=\"file-as\">".$lname.", ".$fname"</meta>
     <dc:description>!</dc:description>
     <dc:publisher>".$publisher."</dc:publisher>
     <dc:date>".$year."</dc:date>
     <dc:language>".$lang."</dc:language>
     <dc:identifier id='bookid'>urn:uuid:".$uuid."</dc:identifier>
     <meta refines='#bookid' property='identifier-type' scheme='xsd:string'>uuid</meta>
     <dc:identifier id='isbn-id'>urn:isbn:".$isbn."</dc:identifier>
     <meta refines='#isbn-id' property='identifier-type' scheme='onix:codelist5'>15</meta>
     <meta property=\"dcterms:modified\">".$date."</meta>
     <meta property=\"rendition:layout\">pre-paginated</meta>
     <meta property=\"rendition:orientation\">landscape</meta>
     <meta property=\"rendition:spread\">none</meta>
     <meta property=\"ibooks:specified-fonts\">true</meta>
     <meta property='ibooks:iphone-orientation-lock'>landscape-only</meta>                                     
     <meta property='ibooks:ipad-orientation-lock'>landscape-only</meta>                          
</metadata>
";

echo $contentopf; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:41:26.113

你忘了`.`这里

```
".$fname"</meta> 
```

应该

```
".$fname."</meta> 
```

这里也是

```
".$lname."</dc:creator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:42:00.767

这里缺少点：

```
 <meta refines=\"#aut\" property=\"file-as\">".$lname.", ".$fname"</meta> 
```

应该

```
<meta refines=\"#aut\" property=\"file-as\">".$lname.", ".$fname."</meta> 
```

PS：您真的应该考虑切换到使用占位符的替代方法，例如 printf()。

# javascript - jQuery中运行代码的序列

> ID：15810067
> 
> 赞同：1
> 
> 时间：2013-04-04T11:39:19.120
> 
> 标签：javascript, jquery

这是我的代码的一部分：

```
$.post('category.php',{datatosend : datatosend},result);

function result(data) {
    $('#placeHolder').append('<select onchange="loadcats();" id="categoryPID" name="categoryPID" >').append(data).append('</select>');  
    alert($('#placeHolder').html());
    });
} 
```

我想在警报中有这个 HTML：

```
<select onchange="loadcats();" id="categoryPID" name="categoryPID">
<option value="37">computer</option><option value="38">mobile</option>
</select> 
```

但结果是：

```
<select onchange="loadcats();" id="categoryPID" name="categoryPID"></select>
<option value="37">computer</option><option value="38">mobile</option> 
```

为什么，我应该怎么做？！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:52:23.677

这出现了很多，这是由于对`.append()`函数的作用有误解。人们似乎觉得它与将 HTML 字符串连接到`innerHTML`所选元素的属性相同，但事实并非如此。

该`.append()`函数适用于实际的 DOM 元素。如果您传入一个字符串，那么它会将其解析为 HTML，创建元素，然后将它们附加到所选元素。所以当你这样做时：

```
$('#placeHolder').append('<select onchange="loadcats();" id="categoryPID" name="categoryPID" >') 
```

它创建整个`<select>`元素（它不在乎您没有关闭标签，它会为您完成），然后将其附加到`#placeHolder`. 然后，当您调用 时`.append(data)`，它会再次创建选项元素，然后将它们附加*到`<select>`*.

最好的办法是`<select>`单独创建元素，将`<option>`元素添加到其中，然后将其附加到`#placeHolder`：

```
// create the entire <select> element
var select = $('<select onchange="loadcats();" id="categoryPID" name="categoryPID" >');
// append the <option> elements to it
select.append(data);
// append the <select> to #placeHolder
$('#placeHolder').append(select);
// then finally alert its HTML
alert($('#placeHolder').html()); 
```

实际上可以将这些调用中的大多数链接起来，但我将其拆分出来纯粹是为了说明正在发生的事情。链式版本看起来像这样：

```
alert($('#placeHolder').append($('<select onchange="loadcats();" id="categoryPID" name="categoryPID" >').append(data)).html()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:44:48.747

尝试这个：

```
$('#placeHolder').append('<select onchange="loadcats();" id="categoryPID" name="categoryPID" >');
$('#categoryPID').append(data); 
```

# javascript - 什么时候应该以及什么时候不应该在javascript中的函数后面加上分号

> ID：15810068
> 
> 赞同：0
> 
> 时间：2013-04-04T11:39:24.663
> 
> 标签：javascript

我能问一下为什么有时我们创建一个函数，我们最终会得到一个分号，而有时却没有

```
function test(){

};

function test(){

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:40:27.487

取决于你如何声明函数。

```
var myfunc = function() {}; // use semicolon

function myfunc() {} // don't use semicolon 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:45:12.023

[检查在http://javascriptcompressor.com/](http://javascriptcompressor.com/)中压缩以下代码

```
var test  = function (){

}

a = 10; 
```

`var test=function(){}a=10;`它就像`SyntaxError`

声明函数不会有问题

```
function test(){

} 
```

压缩代码`function test(){}a=10;`是有效的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:58:49.180

要将答案背景化，您需要处理两种情况。

1.  函数声明 - 显式声明一个函数：

    ```
    function someFunction(){
      // some code
    } 
    ```

2.  函数表达式 - 将函数声明为表达式，因此：

    ```
    var someFunction = function(){
      // some code
    }; 
    ```

**注意**在第二种情况下您只需要分号。当涉及到**函数提升**的概念时，区别很重要。

函数提升基本上意味着您必须考虑在什么时候您希望函数在运行时“可见”（执行上下文）。案例 1 使该函数在脚本中的任何位置都可见，这意味着无论您在脚本中的何处声明了该函数，您始终可以调用它。该函数在执行上下文中被提升到更高的位置。另一方面，情况 2 不会发生这种情况，因此您只能在声明它的行下方调用该函数。

# css - 渐变叠加

> ID：15810069
> 
> 赞同：0
> 
> 时间：2013-04-04T11:39:28.230
> 
> 标签：css

我需要为body标签提供背景渐变+叠加。渐变+叠加图像看起来像附加的。

![在此处输入图像描述](https://i.stack.imgur.com/NEagk.png)

问题是我希望它在整个页面中很好地重复。如果我把它放在背景中并说重复，那么渐变叠加不起作用。基本上我希望渐变颜色平滑地流过整个页面，并且叠加在背景上。知道如何用 css/css3 做类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:20:24.060

[这](http://www.colorzilla.com/gradient-editor/)是我认为最好的 CSS 渐变工具/生成器

编辑这支持径向和对角线线性渐变

# facebook-php-sdk - 尝试获取访问令牌时出现“请求无效，因为应用程序机密与客户端令牌相同”错误

> ID：15810073
> 
> 赞同：3
> 
> 时间：2013-04-04T11:39:31.713
> 
> 标签：facebook-php-sdk, facebook-oauth, facebook-authentication, facebook-access-token, app-secret

我使用 facebook php sdk 在我的网站上提供 facebook 登录没有任何问题。几天后，我无法再登录了。我按照[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)上描述的步骤进行操作，但在第 6 步失败并出现以下响应：

```
{
  error: {
    message: "The request is invalid because the app secret is the same as the client token",
    type: "OAuthException",
    code: 1
  }
} 
```

我不明白为什么它停止工作。你有过同样的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:00:09.160

我刚刚遇到了这个问题，我通过重置我的客户端令牌（Facebook 应用程序设置页面上的高级 > 安全性）并将我的应用程序类型从本机/桌面更改为 Web 应用程序来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-25T13:49:23.017

将应用程序类型从本机更改为 Web 应用程序（高级 -> 应用程序身份验证）。当前的解决方案说要重置我不需要的客户端令牌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-22T23:07:35.170

对我来说，上述解决方案都不起作用。然而，只需重置我的秘密，它就开始工作了。

# php - 使用 CURL 上传文件

> ID：15810079
> 
> 赞同：0
> 
> 时间：2013-04-04T11:39:41.337
> 
> 标签：php, curl

我已经使用 CURL 成功上传了一个文件。

```
$uploaddir = realpath('./') . '/';
$uploadfile = $uploaddir . basename($_FILES['file_contents']['name']);
echo '<pre>';
if (move_uploaded_file($_FILES['file_contents']['tmp_name'], $uploadfile)) {
    echo "File is valid, and was successfully uploaded.\n";
} else {
    echo "Possible file upload attack!\n";
}
echo 'Here is some more debugging info:';
print_r($_FILES);
echo "\n<hr />\n";
print_r($_POST);
print "</pr" . "e>\n"; 
```

但在上传之前，我想检查文件是否存在，如果存在则附加到它。我可以检查文件是否存在。如何获取上传文件的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:49:55.483

我只是正常上传文件，检查文件名是否`$_FILES["filecontents"]["name"]`存在于您上传的目录中，如果它没有正常移动上传的文件，如果有，将上传的文件移动到临时位置，然后打开当前附加文件，然后将内容附加到新上传的文件中。

# iphone - IOS如何在MPMediaPickerController中获取IPHONE中当前所选音轨的完整URL

> ID：15810080
> 
> 赞同：0
> 
> 时间：2013-04-04T11:39:44.830
> 
> 标签：iphone, ios

按照这个方法

```
- (void)mediaPicker: (MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection 
```

我可以获取当前选择的音频文件

我的问题是如何获取此选定音轨的完整 URL

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:01:00.363

尝试这个，

```
- (void)mediaPicker: (MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection
{
  MPMediaItem * item = (MPMediaItem *)[mediaItemCollection.items objectAtIndex:index];
  NSURL * pathURL = [item valueForProperty:MPMediaItemPropertyAssetURL];
} 
```

# android - 谷歌地图 api 版本 1 不再工作（Android）为什么？

> ID：15810084
> 
> 赞同：1
> 
> 时间：2013-04-04T11:40:04.253
> 
> 标签：android, android-maps, android-maps-v2

我已经注册了 Google maps api vesrion 1。我有一个以前可以正常工作的密钥，但现在它无法正常工作。在官方网站上他们说使用谷歌地图版本1的应用程序将继续工作，但建议不要使用它。

那么为什么我的应用程序现在不能工作......我没有对代码进行任何更改......这是我的`log cat`.

```
04-04 16:37:26.701: W/MapActivity(873): Recycling dispatcher android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher@411fc5b0
04-04 16:37:26.801: V/MapActivity(873): Recycling map object.
04-04 16:37:27.321: I/MapActivity(873): Handling network change notification:CONNECTED
04-04 16:37:27.321: E/MapActivity(873): Couldn't get connection factory client
04-04 16:37:32.590: W/System.err(873): IOException processing: 26
04-04 16:37:32.590: W/System.err(873): java.io.IOException: Server returned: 3
04-04 16:37:32.641: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
04-04 16:37:32.641: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
04-04 16:37:32.641: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
04-04 16:37:32.641: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
04-04 16:37:32.641: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
04-04 16:37:32.641: W/System.err(873):  at java.lang.Thread.run(Thread.java:856)
04-04 16:37:38.341: W/System.err(873): IOException processing: 26
04-04 16:37:38.341: W/System.err(873): java.io.IOException: Server returned: 3
04-04 16:37:38.415: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
04-04 16:37:38.415: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
04-04 16:37:38.415: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
04-04 16:37:38.421: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
04-04 16:37:38.421: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
04-04 16:37:38.421: W/System.err(873):  at java.lang.Thread.run(Thread.java:856)
04-04 16:37:45.323: W/System.err(873): IOException processing: 26
04-04 16:37:45.323: W/System.err(873): java.io.IOException: Server returned: 3
04-04 16:37:45.323: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115)
04-04 16:37:45.331: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.map.MapService$MapTileRequest.readResponseData(MapService.java:1473)
04-04 16:37:45.331: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.processDataRequest(DataRequestDispatcher.java:1117)
04-04 16:37:45.331: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:994)
04-04 16:37:45.331: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
04-04 16:37:45.331: W/System.err(873):  at java.lang.Thread.run(Thread.java:856)
04-04 16:37:51.241: I/Choreographer(873): Skipped 34 frames!  The application may be doing too much work on its main thread.
04-04 16:37:53.021: W/System.err(873): java.lang.IllegalStateException: Connection pool shut down.
04-04 16:37:53.021: W/System.err(873):  at org.apache.http.impl.conn.tsccm.ConnPoolByRoute.getEntryBlocking(ConnPoolByRoute.java:284)
04-04 16:37:53.030: W/System.err(873):  at org.apache.http.impl.conn.tsccm.ConnPoolByRoute$1.getPoolEntry(ConnPoolByRoute.java:238)
04-04 16:37:53.030: W/System.err(873):  at org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager$1.getConnection(ThreadSafeClientConnManager.java:176)
04-04 16:37:53.030: W/System.err(873):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:326)
04-04 16:37:53.114: W/System.err(873):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-04 16:37:53.114: W/System.err(873):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-04 16:37:53.114: W/System.err(873):  at android_maps_conflict_avoidance.com.google.common.io.android.AndroidHttpClient.execute(AndroidHttpClient.java:246)
04-04 16:37:53.114: W/System.err(873):  at android_maps_conflict_avoidance.com.google.common.io.android.GoogleHttpClient.executeWithoutRewriting(GoogleHttpClient.java:129)
04-04 16:37:53.170: W/System.err(873):  at android_maps_conflict_avoidance.com.google.common.io.android.GoogleHttpClient.execute(GoogleHttpClient.java:189)
04-04 16:37:53.200: W/System.err(873):  at android_maps_conflict_avoidance.com.google.common.io.android.GoogleHttpClient.execute(GoogleHttpClient.java:242)
04-04 16:37:53.200: W/System.err(873):  at android_maps_conflict_avoidance.com.google.common.io.android.AndroidHttpConnectionFactory$AndroidGoogleHttpConnection.getResponse(AndroidHttpConnectionFactory.java:132)
04-04 16:37:53.280: W/System.err(873):  at android_maps_conflict_avoidance.com.google.common.io.android.AndroidHttpConnectionFactory$AndroidGoogleHttpConnection.openDataInputStream(AndroidHttpConnectionFactory.java:153)
04-04 16:37:53.280: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher.serviceRequests(DataRequestDispatcher.java:922)
04-04 16:37:53.280: W/System.err(873):  at android_maps_conflict_avoidance.com.google.googlenav.datarequest.DataRequestDispatcher$DispatcherServer.run(DataRequestDispatcher.java:1702)
04-04 16:37:53.280: W/System.err(873):  at java.lang.Thread.run(Thread.java:856) 
```

这是我的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/tv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />    

<com.google.android.maps.MapView
    android:id="@+id/pooja"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:apiKey="I've used my Key here!!"
    android:clickable="true" /> 
```

# mysql - Mysql从匹配另一个字段中的多个值的行中找到不同的值

> ID：15810086
> 
> 赞同：0
> 
> 时间：2013-04-04T11:40:08.620
> 
> 标签：mysql

在一张表中，我有如下记录：

```
ID, ID1, ID2
1, 2, 3
2, 2, 4
3, 2, 5
4, 3, 3
4, 3, 4
4, 4, 3
4, 4, 4
4, 4, 5 
```

我希望能够找到表中存在的所有 ID1 值，这些值具有所有 ID2 值 3、4 和 5

因此，在这种情况下，我希望某些 SQL 仅提取 ID1 = 2 和 ID1 = 4，但不提取 ID1 = 3，因为对于 ID1=3，仅存在 ID2=3 和 ID2=4 ......所以它缺少一行ID2=5，因此我不希望它包含在我的结果集中。

有没有一种有效的方法来做到这一点？

泰！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:42:15.940

您将需要使用以下内容来选择具有`id2`值为 3、4 或 5 的所有行，然后使用具有子句的 group by 以确保返回 3 个不同的`id2`值：

```
select id1
from yourtable
where id2 in (3, 4, 5)
group by id1
having count(distinct id2) = 3 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/61bd7/2)。

这种类型的查询称为[关系除法](https://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)。

# c# - 转换为json时如何格式化对象中仅是字符串的属性？

> ID：15810087
> 
> 赞同：2
> 
> 时间：2013-04-04T11:40:15.903
> 
> 标签：c#, json, serialization, json.net

实例类型不清楚。我以**Foo**为例。我有一个格式方法和一个如下所示的类，

```
public string FormatMethod(string s){
    //for example pattern ++
    return "++" + s + "++"; 
}

public class Foo{
    public int FooId {get;set;}
    public string Name {get;set;}
    public string Desciption {get;set;}
}

var foo = new Foo{ FooId = 1, Name = "FooName", Description = "Bla bla bla" };
// or
var list = new List<Foo>();
list.Add(foo);

var json = JsonConvert.SerializeObject(list);
//or
var jsonlist = JsonConvert.SerializeObject(foo); 
```

我希望在转换为 json 时将对象或列表中的字符串属性发送到格式方法，

我希望 json 结果如下所示，

**json结果**

```
 {"FooId": 1 , "Name": "++FooName++", "Description" : "++Bla bla bla++" } 
```

或作为列表

```
[{"FooId": 1 , "Name": "++FooName++", "Description" : "++Bla bla bla++" }] 
```

我该怎么做 ？

**编辑**：

我想在对象被序列化时应用任何模式，例如名称为“FooName”，序列化后需要为“++FooName++”。

我认为可以使用 myconverter 来完成，但是如何？

例如：

```
public class MyConverter : JsonConverter
    {
        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            // need to do something in here, I don't know what to do.
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }

        public override bool CanConvert(Type objectType)
        {
            throw new NotImplementedException();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:53:17.613

转换器：

```
class StringFormatConverter : JsonConverter
{
    public string Format { get; set; }

    public override void WriteJson (JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteValue(string.Format(Format, value));
    }

    public override object ReadJson (JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotSupportedException();
    }

    public override bool CanConvert (Type objectType)
    {
        return objectType == typeof(string);
    }
} 
```

用法：

```
Console.WriteLine(JsonConvert.SerializeObject(new List<Foo> {
    new Foo { FooId = 1, Name = "FooName", Description = "Bla bla bla" }
}, new JsonSerializerSettings {
    Converters = { new StringFormatConverter { Format = "++{0}++" } }
})); 
```

输出：

```
[{"FooId":1,"Name":"++FooName++","Description":"++Bla bla bla++"}] 
```

如果您需要将字符串修改限制为特定属性，您可以使用`JsonConverterAttribute`and `JsonPropertyAttribute.ItemConverterType`（并从 中删除“全局”转换器`JsonSerializerSettings`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:49:17.290

这样做的正确方法可能是

1.  反序列化
2.  做你的搅拌操作
3.  重新序列化

像这样

```
// build initial Json
var foo = new Foo { FooId = 1, Name = "FooName", Desciption = "Bla bla bla" };
JavaScriptSerializer json_serializer = new JavaScriptSerializer();
string fooJson = json_serializer.Serialize(foo);

// change value in Json
Foo newFoo = json_serializer.Deserialize<Foo>(fooJson);
newFoo.Name = String.Format("++{0}++", newFoo.Name);
fooJson = json_serializer.Serialize(newFoo); 
```

或者，您可能正在尝试在转换为 json 之前格式化您的字符串，如下所示

```
Foo foo = new Foo { FooId = 1, Name = "FooName", Desciption = "Bla bla bla" };

Foo formattedFoo = new Foo { 
                             FooId = foo.FooId, 
                             Name = String.Format("++{0}++", foo.Name), 
                             Desciption = String.Format("++{0}++", foo.Desciption) 
                           };

JavaScriptSerializer json_serializer = new JavaScriptSerializer();
string fooJson = json_serializer.Serialize(formattedFoo); 
```

# python - Python BadYieldError: 产生未知对象 HTTPError('HTTP 599: Connection closed',)

> ID：15810089
> 
> 赞同：4
> 
> 时间：2013-04-04T11:40:16.577
> 
> 标签：python, return, tornado, yield

我想知道为什么在这个函数中：

```
@tornado.gen.engine
def check_status_changes(netid, sensid):

    como_url = "".join(['http://131.114.52:44444/ztc?netid=', str(netid), \
               '&sensid=', str(sensid), '&start=-5s&end=-1s'])

    http_client = AsyncHTTPClient()
    response = yield tornado.gen.Task(http_client.fetch, como_url)

    if response.error:
        raise Exception(response.error) 
```

当有 response.error 时，我得到标题错误......为了在另一个函数中捕获返回的值，我必须做出什么？

我会做类似的事情：

```
try:
        periodic = tornado.ioloop.PeriodicCallback(check_status_changes(netid, sensid), 5000)
        value = periodic.start()
        print("Secondo")
        print value
    except:
        print("Quarto")
        periodic.stop()
        self.finish()
        return
    else: 
```

我不知道...我只是将返回的值与另一个值进行比较...

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T18:09:22.217

该函数有一个`gen.engine`装饰器，您不能从其中返回值（与龙卷风无关，您不能在生成器中返回值）。

如果您试图从该函数中获取一个值 - 前提是您在 IOLoop 上调用它 - 则该函数应该有一个`callback`（可调用的）关键字参数，如下所示：

```
@tornado.gen.engine
def check_status_changes(netid, sensid, callback=None):
    response = yield tornado.gen.Task(do_your_thing)
    if response.error:
        raise response.error
    callback(response.body)  # this is how you make the value available to the
                             # caller; response.body is HTTPResponse specific iirc 
```

现在您可以在其他地方调用此函数，如下所示：

```
# somewhere in a gen.engine decorated async method
body = yield tornado.gen.Task(check_status_changes, netid, sensid) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-22T17:43:09.020

您可以使用

```
raise tornado.gen.Return(response) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-09T09:12:46.727

```
 class MainHandler(tornado.web.RequestHandler):
        @gen.coroutine
        def get(self):
            http_client = AsyncHTTPClient()
            http_client = tornado.httpclient.AsyncHTTPClient()
            response = yield http_client.fetch('http://localhost:1338/api/getDistinctGeoPositions/?durationInMinutes=9000')
            if response.error:
                print response.error
            self.finish(response.body) 
```

# javascript - ajax 加载脚本不工作

> ID：15810090
> 
> 赞同：1
> 
> 时间：2013-04-04T11:40:18.060
> 
> 标签：javascript, jquery, ajax, load

嗨，家伙仍然有问题..所以虽然重新写了这个问题。将我的外部页面放入我的索引页面上的一个 div 中.. 很棒.. 但似乎无法让 java 脚本工作.. 我可以让它们工作一次使用它..

```
 <script>
        $.ajax({
        url: "pages/index.php",
        dataType: "html",
        success: function(html) {
          var target = $('.fademe');
        var targetHeight = target.outerHeight();
        $(document).scroll(function(e){
            var scrollPercent = (targetHeight - window.scrollY) / targetHeight;
            if(scrollPercent >= 0){
                target.css('opacity', scrollPercent);
            }
        }); 
        }
    });
</script> 
```

但是当我转到不同的页面并返回时它不起作用......我把我的脚本放在主索引页面的底部

```
<script>
    $.ajax({
        url: "pages/index.php",
        dataType: "html",
        success: function(html) {
            $('#st-accordion').accordion();
        };
    });

</script>

<script>
       $.ajax({
        url: "pages/index.php",
        dataType: "html",
        success: function(html) {
            $('#st-accordion2').accordion();
        }
    });

</script>

<script>
    $(function () {
        $.scrollUp();
    });
</script>

<!-- Fade Top Panel  -->
<script>
        $.ajax({
        url: "pages/index.php",
        dataType: "html",
        success: function(html) {
          var target = $('.fademe');
        var targetHeight = target.outerHeight();
        $(document).scroll(function(e){
            var scrollPercent = (targetHeight - window.scrollY) / targetHeight;
            if(scrollPercent >= 0){
                target.css('opacity', scrollPercent);
            }
        }); 
        }
    });
</script>

<script> 

    $ajax({
        url: "pages/index.php"
        dataType: "html",
        success: function(html) {
             $('#submit').click(function(){
            $.post("send.php", $("#mycontactform").serialize(),  function(data) {   });
                 $('#success').html('Message sent!');
                 $('#success').hide(2000);

                    $('#name1').val('');
                    $('#telephone').val('');
                    $('#email').val('');
                    $('#message').val('');

            });
        }

    });

</script>

<!-- Viberating Icons -->

<script>

    $(function() {
        var interval = 10;
        var duration= 1000;
        var shake= 3;
        var selector = $('.viberate'); /* Your own container ID*/
        $(selector).each(function(){
            var elem = this;
            var vibrateIndex;
            var timeoutIndex;
            $(this).hover( /* The button ID */
                function(){ 
                    vibrateIndex = setInterval(function(){
                      vibrate(elem); 
                    }, interval, 0);
                    timeoutIndex = setTimeout(function() 
                   {clearInterval(vibrateIndex)},1000);
                },
                function(){
                clearInterval(vibrateIndex);
                clearTimeout(timeoutIndex); 
                }
            );
        })

            var vibrate = function(elem){
                $(elem).stop(true,false)
                .css({position: 'relative', 
                left: Math.round(Math.random() * shake) - ((shake + 1) / 2) +'px', 
                top: Math.round(Math.random() * shake) - ((shake + 1) / 2) +'px'
            });
                        }
                    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:10:53.533

Better to load JS/CSS at first and then load only information that dynamic.

In this case you will have cached JS/CSS and small response. It means better performance.

And of course **DO NOT** load `<html><head>...</head>` part. Every page has only one `<html>` tag and yours already has one. If you load it you need to strip it. It means you'll do unnecessary work and **ajax will work slower**.

If you using AJAX you need to load only data you need. **Less garbage - faster response**.

**UPDATE**

Try this:

```
<script>

    function init(){

        // Accodion 1 & 2 -->
        $('#st-accordion').accordion();

       $('#st-accordion2').accordion();

        //Scroll Up -->

        $.scrollUp();

        // Fade Top Panel  -->

    var target = $('.fademe');
        var targetHeight = target.outerHeight();
        $(document).scroll(function(e){
            var scrollPercent = (targetHeight - window.scrollY) / targetHeight;
            if(scrollPercent >= 0){
                target.css('opacity', scrollPercent);
            }
        }); 

      // Contact Form Send -->

      $('#submit').click(function(){
            $.post("send.php", $("#mycontactform").serialize(),  function(data) {   });
                 $('#success').html('Message sent!');
                 $('#success').hide(2000);

                    $('#name1').val('');
                    $('#telephone').val('');
                    $('#email').val('');
                    $('#message').val('');

            });

// Viberating Icons -->

      var interval = 10;
        var duration= 1000;
        var shake= 3;
        var selector = $('.viberate'); /* Your own container ID*/
        $(selector).each(function(){
            var elem = this;
            var vibrateIndex;
            var timeoutIndex;
            $(this).hover( /* The button ID */
                function(){ 
                    vibrateIndex = setInterval(function(){
                      vibrate(elem); 
                    }, interval, 0);
                    timeoutIndex = setTimeout(function(){clearInterval(vibrateIndex)},1000);
                },
                function(){
                clearInterval(vibrateIndex);
                clearTimeout(timeoutIndex); 
                }
            );
        })

            var vibrate = function(elem){
                $(elem).stop(true,false)
                .css({position: 'relative', 
                left: Math.round(Math.random() * shake) - ((shake + 1) / 2) +'px', 
                top: Math.round(Math.random() * shake) - ((shake + 1) / 2) +'px'
            });
         }

    $("#posts").masonry({
        itemSelector: '.post',
        isAnimated: true,
        columnWidth: function(containerWidth) {

        var width = $(window).width();
        var col = 300;

        if (width < 1200 && width >= 980) {
            col = 240;
            } else if (width < 980 && width >= 768) {
                col = 186;
            }

            return col;
            }
            });

    }

</script> 
```

I put all JS in one **init()** function. Now after your ajax is loaded call that function.

*And check syntax I maybe lost some brackets*.

# javascript - 保护 javascript [AJAX] 代码？

> ID：15810093
> 
> 赞同：0
> 
> 时间：2013-04-04T11:40:24.230
> 
> 标签：javascript, jquery, html, ajax, web

我正在设计一个门户，我必须向服务器发送请求并从中获得响应。由于我在 javascript [AJAX] 中编写了整个代码，因此很难保护我正在使用的 URL。右击-->查看页面源代码会使整个脚本，URL的裸露！！

我知道用 javascript 编写不可能 100% 保护您的代码，有什么办法吗？任何其他语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:41:36.617

不可以。您不能对用户保密用户的浏览器和您的服务器之间的通信。

如果您不希望用户知道某些内容，也不要让浏览器知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:13:24.013

任何提供公共 API 的东西都需要绝对偏执，不仅要对每个请求进行身份验证，还要确保经过身份验证的用户具有执行请求所需的授权。

例如：删除 /file/4

1.  您必须确保您已经对提出请求的人进行了身份验证。
2.  您必须确保用户有权执行 DELETE 操作。
3.  您必须确保用户拥有文件 4。

即使您希望您自己的网站成为您 API 的唯一使用者，并且您不打算公开它或记录它，您仍然隐含地将其公开。

# c++ - qt creator 项目更改目录

> ID：15810099
> 
> 赞同：2
> 
> 时间：2013-04-04T11:40:48.377
> 
> 标签：c++, c++11, mercurial, qt-creator, scons

我想使用**Fltk**工具包、**Clam**编译器和**make**文件重新部署用**C++**开发的现有应用程序。我现在想使用**Qt Creator**来管理项目。我创建了一个新项目，在 Qt 中导入应用程序文件，并带有一个新的**Mercurial**存储库，现在我有了我的项目使用的一组文件，可以很好地编译和运行。但是 Qt 项目文件在我的 src 目录中，我想将它们与 Mercurial repo 一起放在外部的特定构建目录中。如何重新定位项目文件和**Mercurial**存储库？我在 Qt 向导中没有看到任何东西可以做到这一点。我要更改哪些文件和路径？最终，我如何使用**Scons****************而不是制造？**************

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:20:39.050

SCons 有一个工具集`QT`，您可以在创建环境时加载它，如下所示：

```
env = Environment(tools = ['qt']) 
```

这里有一个更高级的 qt 工具集`qt4`，可以单独[下载](http://scons.org/wiki/Qt4Tool)。

加载此工具集后，您可以使用[SCons 手册页](http://www.scons.org/doc/production/HTML/scons-man.html)中提到的 、 和相关的构造`Moc()`变量。`Uic()`

至于如何指定构建文件的位置，Stack Overflow 中还有很多其他问题/答案可以解决这个问题。******

# xcode - 通过标签值将动画添加到现有的 CCSprite

> ID：15810104
> 
> 赞同：3
> 
> 时间：2013-04-04T11:41:01.050
> 
> 标签：xcode, cocos2d-iphone, ccsprite, ccspritebatchnode

我已经为一个角色创建了动画..需要帮助通过它的标签值将此动画添加到现有角色..到目前为止，我在网络上检查..所有人都在创建新`CCSprite`的来制作这个动画..但我需要它来添加这个动画到现有的 Sprite..existing Sprite 的标记值为 20.. 它在创建新的时动画效果很好..在`CCSprite`此先感谢..

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("BearSprites.plist");
CCMutableArray<CCSpriteFrame*>* animateFrames = new CCMutableArray<CCSpriteFrame*>(9);
char str[50] = {0};
for(int i = 1; i < 9; i++)
{
    sprintf(str, "bear_frame%d.png",i);
    CCSpriteFrame *frame = CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(str);
    animateFrames->addObject(frame);
}
CCAnimation *animation = CCAnimation::animationWithFrames(animateFrames, 0.4f);
CCAnimationCache::sharedAnimationCache()->addAnimation(animation, "Walk");
CCAnimationCache *animCache = CCAnimationCache::sharedAnimationCache();
CCAnimation *normal = animCache->animationByName("Walk");
CCAnimate *animN = CCAnimate::actionWithAnimation(normal); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:43:42.593

使用此代码：

```
CCAnimate *animN = CCAnimate::actionWithAnimation(normal);
animN.tag = kTagHeroAnimation; //=272

CCSprite *sprite = (CCSprite*)[self getChildByTag:20];
[sprite stopActionByTag:kTagHeroAnimation]; //=272];
[sprite runAction: animN]; 
```

# asp.net - 无法使用正确的用户名和密码登录

> ID：15810106
> 
> 赞同：0
> 
> 时间：2013-04-04T11:41:09.093
> 
> 标签：asp.net, sql-server, login

我设计了一个使用 asp.net 和数据库 sql server 的站点。登录有两个角色；“管理员”和“用户”以及多个具有用户角色的用户。即使使用正确的用户 ID 和密码，用户现在也无法登录。我检查了数据库中的表。在“aspnet_membership”表中，字段值更改为：

```
IsLockedOut=True
FailedPasswordAttemptCount=10
LastLockoutDate=#some date
FailedPasswordAttemptWindowStart=#some date 
```

我已将 cthe 值更改为：

```
IsLockedOut=False
FailedPasswordAttemptCount=0   
LastLockoutDate=#default date  
FailedPasswordAttemptWindowStart=#default date 
```

但是用户仍然无法登录。

我是否必须更改任何表中的任何其他值？

# web-services - Web 服务中的两种通信方式

> ID：15810107
> 
> 赞同：0
> 
> 时间：2013-04-04T11:41:10.810
> 
> 标签：web-services, websocket, jms, mom

我怎样才能有两种方式与 WS 通信。两种方式意味着客户端可以是服务器，服务器可以是客户端。据我了解与 WS 使用的 HTTP 中的客户端-服务器模型相关的问题。当服务器想要将事件发送到多个客户端而不被轮询时，这种情况的最佳实践是什么。? 据我所知，有一些解决方案，但我不知道哪个是最好的 1）服务器推送技术（websockets）2）SOAP over JMS（这听起来很棒）3）WS-eventing

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:03:54.160

顾名思义，Web 服务的目的是服务。它响应请求，但从不单独发送请求（但通过 web 服务接口访问的应用程序可以向其他 web 服务发送请求以完成发送给它的请求）。

当[面向服务架构](http://en.wikipedia.org/wiki/Service-oriented_architecture)的一个组件应该从另一个组件接收事件时，这意味着接收组件必须充当服务器并公开自己的 Web 服务接口，以便发生事件的组件可以调用它。

# c - c中的while循环递增

> ID：15810121
> 
> 赞同：-3
> 
> 时间：2013-04-04T11:41:45.770
> 
> 标签：c, for-loop, while-loop, increment, nested-loops

我正在尝试在while循环中制作我的“步骤”或增量，以使我的值类似于N = 2、4、8、16 ...基本上是2到2 ^ 20的幂。我试过做

```
for(j=1;j<=20;j++){
    m=pow(2,2*i); 
    MAX=pow(2,20); 
    INC=pow(2,i);
while(m<=MAX){ 
```

然后让我的代码在其中运行。但是在输出中它给了我 2,4,6,8,10,12 .. 有谁知道这样做的正确方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:45:35.563

您可以从值 2 开始，然后每次迭代`m`乘以2。`m`作为优化，您可以用左移替换乘以 2：

```
int MAX = pow(2, 20); 
int m = 2;
while(m <= MAX) {
    //do your work
    m <<= 1;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:45:56.857

在while循环的每次迭代中；将您的变量乘以 2。

```
int m = 2;
while(m < maxpow)
{
  m = m * 2;
  printf("%d\n", m);
} 
```

# javascript - 设置内部原型

> ID：15810122
> 
> 赞同：1
> 
> 时间：2013-04-04T11:41:48.250
> 
> 标签：javascript

有没有可能在不使用`__proto__`属性的情况下更改实例原型的方法？

我想出了这个：

```
x=new String();
y=new Array();
Object.setPrototypeOf(x,y.__proto__) 
```

但这仍然使用`__proto__`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:50:25.160

一旦你有了一个对象，你就不能在不使用`__proto__`属性的情况下改变它的 [[Prototype]] 链接。

从实用性的角度来看，您的示例没有意义。如果您想在另一个上使用其中一个`String`或`Array`的方法，只需调用它们并设置它们的 ThisBinding，或根据需要分配它们。

但是，您*可以*创建其 [[Prototype]] 链接指向另一个的新对象。

```
var obj = Object.create(String.prototype); 
```

这当然不会修改原始对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:51:21.610

也许像：

```
function object(o) {
    function F() {}
    F.prototype = o;
    return new F();
}

x = object(y); 
```

取自Stoyan Stefanov的*JavaScript 模式*

# sql - SQL Server 上的单用户模式“缺失行为”

> ID：15810125
> 
> 赞同：1
> 
> 时间：2013-04-04T11:41:59.690
> 
> 标签：sql, sql-server, single-user

我运行了一个由 Microsoft 员工提供的[脚本](http://gallery.technet.microsoft.com/scriptcenter/All-Databases-Index-a68ed3c5)，以根据平均碎片找出哪些索引需要重建/重组。我得到了一个合理的列表，但是在尝试在特定数据库上重建其中一些时，我一直收到错误：

![超过锁定请求超时期限](https://i.stack.imgur.com/hkclD.png)

我得到的第一个想法是将数据库设置为单用户模式，重建索引，然后使其恢复活力。好吧，这并没有帮助，因为数据库正在由 Windows 服务填充，具有讽刺意味的是，该服务使用与我连接的同一用户，并且只有我有足够的权限才能使用。我正在一个公司环境中工作，所以月亮比获得另一个用户凭据更近一些。我也无法在执行任务时停止服务，因为它用于许多其他事情。

我的问题很简单：如何强制单用户模式强制单连接源？换句话说，如何从服务中隐藏数据库或最终的 SQL 服务器？它将正确处理缺席作为网络问题，因此我不必担心那部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:12:50.997

我找到了一个很好的解决方案，可以帮助其他人。我首先使用以下方法获取当前表上带有锁的事务列表：

```
USE [Your DB Name]

SELECT REQUEST_MODE, REQUEST_TYPE, REQUEST_SESSION_ID
FROM sys.dm_tran_locks
WHERE RESOURCE_TYPE = 'OBJECT'
AND RESOURCE_ASSOCIATED_ENTITY_ID =(SELECT OBJECT_ID('YourTableName')) 
```

这`REQUEST_SESSION_ID`是在表上设置了锁的会话的 ID。然后我运行`EXEC sp_who2`以确保 SPID 是预期服务的 SPID。最后我需要做的就是`KILL <SPID>`重建索引。如果您要构建多个索引，则可能需要多次执行此操作，因为可能会再次设置锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:54:49.280

在 SQL Server 2005 及更高版本中重建索引时，有一个 ONLINE = ON/OFF 选项可用，它控制用户如何访问基础表，这可能会解决您的问题。

[http://msdn.microsoft.com/en-us/library/ms188388(v=sql.110).aspx](http://msdn.microsoft.com/en-us/library/ms188388(v=sql.110).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T19:34:30.550

您的问题是界面只会等待一定的时间才能决定失败。我一直遇到这个问题。

您可以尝试编写更改脚本，然后手动运行它，这样您就可以等到当前使用索引的用户释放所有锁。但是，您必须小心，索引重建会在索引运行时锁定索引（当然，除非您有企业版，重建在线，而且一切都是用钱做的）

# asynchronous - 在 Lambda 中调用其他函数 [C++/CX]

> ID：15810127
> 
> 赞同：0
> 
> 时间：2013-04-04T11:42:09.693
> 
> 标签：asynchronous, windows-8, windows-store-apps, c++-cx

我正在开发一个 Windows 应用商店应用程序 (C++)。该应用程序使用 Web 服务从数据库加载数据，我希望该数据显示在页面上。为什么我不能调用在封闭函数内创建的类的实例的函数？这是我的应用程序首页的 LoadState 事件...

```
void ItemsPage::LoadState(Object^ navigationParameter, IMap<String^, Object^>^ pageState)
{
    (void) pageState;
    StorySource^ storysource = ref new StorySource();

    task<wstring> (GetFromDB(cancellationTokenSource.get_token()))
.then([this, storysource](task<wstring> response){
            try
            {
                auto resp = response.get();
                storysource->Init(resp);
                DefaultViewModel->Insert("Items", storysource->AllGroups);
             }
             catch(COMException^ ex)
             {  ...  }
        });
} 
```

我无法在 .then() 块中执行任何函数。我需要以某种方式将 GetFromDB() 的完成链接到 StorySource::Init() 并将其链接到 DefaultViewModel->Insert()。

我对异步编程很陌生。请向我解释我做错了什么以及解决我的问题的方法。提前致谢。

# prolog - Prolog，函数自己运行，但是当被另一个函数调用时，它说参数没有充分实例化

> ID：15810133
> 
> 赞同：0
> 
> 时间：2013-04-04T11:42:19.507
> 
> 标签：prolog

我正在使用以下代码按最后一个元素快速排序四倍。当我自己调用 productSort 时，它会按预期对列表进行排序。但是，当我在使用 makeList 函数后运行它时，它不起作用并在我自己使用它时返回运行。但是，当我尝试使用它时，它会显示“错误：> = / 2：参数没有充分实例化异常：(2,359) splitListProduct(_G35274, [2, 3, 5, 6], _G90741, _G90651) ？”。

```
makeList(_N, 50, _P, []):-!.

makeList(N, X, Y, [[X, Y, Sum, Product] | L2]) :-
    Sum is X + Y,
    Sum =< N,
    Product is X * Y,
    Hello is Y+1,
    write([X, Y, Sum, Product]),nl,
    makeList(N, X, Hello, L2).

makeList(N, X, Y, L) :-       
    write('here'),nl,
    write(X),nl,
    X == 49, !.

makeList(N, X, Y, L) :-
    write('Y'), write(Y),nl,
    write('X'), write(X),nl,
    Sum is X + Y,
    Sum > N,
    NewX is X + 1,
    NewY is X + 2,
    makeList(N, NewX, NewY , L).

proper_length(List, Length) :-
      is_list(List),
      length(List, Length).

run(N, X, Y, L) :- makeList(N, X, Y, L), productSort(L,SortedL).

productSort([[X,Y,S,P|_]|Xs],Ys) :-     
    splitListProduct(Xs,[X,Y,S,P],Left,Right), /*Split it, we have a nested list here as X*/
    productSort(Left,Ls),
    productSort(Right,Rs),
    append(Ls,[[X,Y,S,P]|Rs],Ys),!.

productSort([],[]).

splitListProduct([[X2,Y2,S2,P2]|Xs],[X1,Y1,S1,P1|_],[[X2,Y2,S2,P2]|Ls],Rs) :- /* Y is the nested list*/ 
    P1 >= P2, splitListProduct(Xs,[X1,Y1,S1,P1],Ls,Rs).

splitListProduct([[X2,Y2,S2,P2]|Xs],[X1,Y1,S1,P1|_],Ls,[[X2,Y2,S2,P2]|Rs]) :-
  P2 > P1, splitListProduct(Xs,[X1,Y1,S1,P1],Ls,Rs).

splitListProduct([],Y,[],[]):-!.

append([],Ys,Ys).
append([X|Xs],Ys,[X|Zs]) :- append(Xs,Ys,Zs). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:51:49.180

首先，这是您粘贴的一个非常大的程序。如果您首先尝试找到一个遇到您遇到的问题的最小示例，这将非常有用。这将使我们更容易发现问题，您可能会在此过程中自己发现问题。用我们这个时代的说法，它被称为“调试”。

然后，我尝试编译你的代码，它给出了多个单例变量警告。这并不一定意味着程序的逻辑有错误，但它表明存在问题、疏忽，或者只是代码不符合 Prolog 编程约定。

第三，您的错误信息非常清楚：您正在使用算术比较运算符，比较未实例化的变量。Prolog 算术比较运算符仅用于算术表达式，而不用于未绑定变量。所以你的问题就在那里。而且你的程序中只有一行有这个操作符，所以你甚至知道从哪里开始寻找。而且我还可以猜测您`makeList`最终会创建一个包含未绑定变量的列表。

我希望您会阅读我不必要的冗长非答案，并且您将能够使用它。

# marshalling - 解编时的代码库保护

> ID：15810134
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:42:20.307
> 
> 标签：marshalling, rmi, rpc

根据维基

[编组](http://en.wikipedia.org/wiki/Marshalling_%28computer_science%29)

编组对象包括代码库和对象数据。如果将代码库，即一个对象的类的源代码转移到另一台机器上，如何保护它被查看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:07:18.010

> 如果将代码库（即对象类的源代码）转移到另一台机器

它不是。这不是“代码库”的意思。类的“代码库”是有关 .class 文件从何处加载的信息。不要只是猜测单词的含义，而是要查找它们。

# math - 未定义对“tan”的引用，但已包含 math.h

> ID：15810135
> 
> 赞同：2
> 
> 时间：2013-04-04T11:42:22.257
> 
> 标签：math, gcc

我想从[http://pages.cs.wisc.edu/~travitch/pthreads_primer.html（Mutex](http://pages.cs.wisc.edu/~travitch/pthreads_primer.html)部分）编译示例 pthread 代码。当我运行这个命令时：

```
 gcc -pedantic -Wall -o theaded_program pth.c -lpthread 
```

在链接中说明，我收到此错误

```
pth.c:45:5: warning: ISO C90 forbids mixed declarations and code [-pedantic]
/tmp/ccajksBv.o: In function `opponent':
pth.c:(.text+0x4a): undefined reference to `tan'
/tmp/ccajksBv.o: In function `main':
pth.c:(.text+0x131): undefined reference to `tan'
collect2: ld returned 1 exit status 
```

但是`#include <math.h>`代码中有没有！！gcc 版本是 4.6

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T11:46:10.477

您应该将 -lm 添加到您的编译器选项中。

除此之外，您还可以将 -lpthread 更改为 -pthread。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-23T16:56:49.727

最后，它必须是这样的：`gcc -pedantic -Wall -o theaded_program pth.c -pthread -lm`

# c - 执行时线程卡在无限循环中

> ID：15810136
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:42:22.383
> 
> 标签：c, multithreading, sockets

我开发了一个使用线程的聊天服务器程序。在这个程序中有两个线程：

1.  一个接收数据
2.  一个发送数据

两个线程都包含无限循环，以便连续发送和接收数据。但是当它被执行时，接收数据的线程就卡在了循环中。

服务器的代码：

```
 {
            addr_len=sizeof(cli_addr);
            cli_sock=accept(sock,(struct sockaddr *)&cli_addr,&addr_len);
            if(cli_sock<0)
                    printf("\nConnetion Error\n");
            else
                    printf("conneted\n");

            status_s=pthread_create(&thread_s,NULL,send_data,&cli_sock);
            if(status_s==0)
                    printf("sending");
            status_r=pthread_create(&thread_r,NULL,recieve_data,&cli_sock);
            if(status_r==0)
                    printf("recieving");

    }

    }

    void *recieve_data(void *num)
    {
    int *sock_r=(int *) num;
    int sock=*sock_r;
    char msg[50];
    while(1)
    {
            recv(sock_r,msg,sizeof(msg),0);

            if(strcmp(msg,"exit")==0)
            {
            break;
            }
            printf("recieved data:");
            recv(sock_r,msg,sizeof(msg),0);
            printf("\n%s",msg);
    }
    }

    void *send_data(void *num)
    {
    int *sock_s=(int *) num;
    int sock=*sock_s;
    char msg[50];
    while(1)
    {
            gets(msg);
            //printf("sending data");
            if(strcmp(msg,"exit")==0)
            {
            break;
            }
            send(sock_s,msg,sizeof(msg),0);
    }
    send(sock,msg,sizeof(msg),0);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:55:55.013

如果像“exit”这样的控制命令是基于int的会更好。

此外，接收数据不处理对等连接关闭状态。[例如：从这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740121%28v=vs.85%29.aspx)复制。

```
// Receive until the peer closes the connection
do {

    iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);
    if ( iResult > 0 )
        printf("Bytes received: %d\n", iResult);
    else if ( iResult == 0 )
        printf("Connection closed\n");
    else
        printf("recv failed: %d\n", WSAGetLastError());

} while( iResult > 0 ); 
```

# php - 使用 group by 正确完成加入 4 个表

> ID：15810141
> 
> 赞同：0
> 
> 时间：2013-04-04T11:42:41.727
> 
> 标签：php, mysql, join

我是使用高级 SQL 查询的新手，我正在为一个查询而苦苦挣扎。

我在 php 中创建了预订系统，它使用 4 个表：

*   site_days
*   site_timeslots
*   网站预订
*   站点团队

*   每个 site_team 都与 site_booking 有关
*   每个 site_booking 都与 site_timeslot 相关
*   每个 site_timeslot 都与 site_days 相关

一个站点_day 可以有更多 site_timeslots 一个站点_timeslot 可以有更多 site_bookings 一个站点_bookings 可以有更多 site_teams

您可以使用此 sql 创建测试表：

```
-- Adminer 3.6.3 MySQL dump

SET NAMES utf8;
SET foreign_key_checks = 0;
SET time_zone = 'SYSTEM';
SET sql_mode = 'NO_AUTO_VALUE_ON_ZERO';

DROP TABLE IF EXISTS `site_bookings`;
CREATE TABLE `site_bookings` (
  `id` int(11) NOT NULL auto_increment,
  `timeslot_id` int(11) NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO `site_bookings` (`id`, `timeslot_id`) VALUES
(1, 6443);

DROP TABLE IF EXISTS `site_days`;
CREATE TABLE `site_days` (
  `id` int(11) NOT NULL auto_increment,
  `date` date NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=93 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO `site_days` (`id`, `date`) VALUES
(85,    '2013-04-01'),
(92,    '2013-04-02');

DROP TABLE IF EXISTS `site_teams`;
CREATE TABLE `site_teams` (
  `id` int(11) NOT NULL auto_increment,
  `booking_id` int(11) NOT NULL,
  `name` varchar(100) collate utf8_bin NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO `site_teams` (`id`, `booking_id`, `name`) VALUES
(1, 1,  'Avengers'),
(2, 1,  'Big Five');

DROP TABLE IF EXISTS `site_timeslots`;
CREATE TABLE `site_timeslots` (
  `id` int(11) NOT NULL auto_increment,
  `day_id` int(11) NOT NULL,
  `date` date NOT NULL,
  `starts` time NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=7152 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO `site_timeslots` (`id`, `day_id`, `date`, `starts`) VALUES
(6443,  85, '2013-04-01',   '08:00:00'),
(6444,  85, '2013-04-01',   '08:10:00'),
(7098,  92, '2013-04-02',   '08:00:00'),
(7099,  92, '2013-04-02',   '08:10:00'); 
```

因此，我想获取表 site_timeslots 的所有时间段，并提供一些附加信息： - 对于每个 site_timeslot，我想知道该时间段的所有相关预订中的 site_teams 总数（例如，如果该 site_timeslot 有 2 个 site_bookings 并且每个有 2 个 site_teams，那么总计数应该是 4) 以及相关预订的计数。

我试过这个sql：

```
SELECT `site_teams`.`id` AS site_teams_id, `site_teams`.`name` AS site_teams_name, `site_teams`.`booking_id` AS site_teams_booking_id, `site_days`.`id` AS site_days_id, `site_days`.`date` AS site_days_date, `site_timeslots`.`id` AS site_timeslots_id, `site_timeslots`.`starts` AS site_timeslots_starts, `site_bookings`.`id` AS site_bookings_id, `site_bookings`.`timeslot_id` AS site_bookings_timeslot_id
FROM (`site_days`)
LEFT JOIN `site_timeslots` ON `site_timeslots`.`day_id` = `site_days`.`id`
LEFT JOIN `site_bookings` ON `site_bookings`.`timeslot_id` = `site_timeslots`.`id`
LEFT JOIN `site_teams` ON `site_teams`.`booking_id` = `site_bookings`.`id`
GROUP BY `site_teams`.`booking_id` 
```

-> 但我不会得到没有任何 site_bookings 的时间段，请问我应该如何更改这个 sql 查询以获得结果：

1.  每行的 site_timeslot
2.  新列“count_of_site_bookings”中与该 site_timeslot 相关的 site_booking 计数
3.  与新列“count_of_site_teams”中与该站点时间段相关的所有站点预订相关的站点团队计数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:54:06.013

您可以通过从 site_timeslots 开始的 LEFT JOINing 来做到这一点，然后在 2 个相关字段上使用 COUNT 来获得您所追求的总数

```
SELECT

  sti.*,
  COUNT(DISTINCT sb.id) AS count_of_site_bookings,
  COUNT(DISTINCT ste.id) AS count_of_site_teams

FROM site_timeslots sti

INNER JOIN site_days sd
  ON sd.id = sti.day_id

LEFT JOIN site_bookings sb
ON sb.timeslot_id = sti.id

LEFT JOIN site_teams ste
ON ste.booking_id = sb.id

GROUP BY sti.id 
```

您可以在 SQL Fiddle [http://sqlfiddle.com/#!2/1a253/2上找到它](http://sqlfiddle.com/#!2/1a253/2)

由于我的假设不正确，我还做了一个使用子查询的先前版本，如果你想看看它以供参考，它也可以在[http://sqlfiddle.com/#!2/9ccf2/ 10](http://sqlfiddle.com/#!2/9ccf2/10)

# c++ - libstdc++-6.dll 问题

> ID：15810142
> 
> 赞同：2
> 
> 时间：2013-04-04T11:42:42.060
> 
> 标签：c++, c, c99, complex-numbers, libstdc++

我想提出一个关于 MinGW 4.7.2 的问题我第一次遇到 libstdc++-6.dll 引起的致命问题，当时我在 OpenCV 中冒险。幸运的是，我在这里遇到了一种解决方法-> [http://answers.opencv.org/question/3740/opencv-243-mingw-cannot-run-program/](http://answers.opencv.org/question/3740/opencv-243-mingw-cannot-run-program/)。它看起来很棒，有一段时间。

现在我正在尝试实现复数。我尝试以下代码

```
#include <iostream>
#include <complex.h>
using namespace std;

int main(int argc, char* argv[])
{
    float _Complex d = 2.0f + 2.0f*I;
    cout << "Testing Complex\t" << d;
    return 0;
} 
```

它应该运行，无论如何。链接时我没有遇到任何错误或警告。我在 Windows 中使用 CodeBlocks 作为我首选的 IDE。但是，再一次，我被困住了。这是 AppCrash 报告

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: complex.exe
  Application Version:  0.0.0.0
  Application Timestamp:    515d61f7
  Fault Module Name:    libstdc++-6.dll
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   4ed82a4d
  Exception Code:   c0000005
  Exception Offset: 000462bc
  OS Version:   6.1.7600.2.0.0.256.1
  Locale ID:    1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

然而令人惊讶的是，[如何在 C 中处理复数？](https://stackoverflow.com/questions/6418807/how-to-work-with-complex-numbers-in-c)提供完美运行的 C 代码！

```
#include <stdio.h>      /* Standard Library of Input and Output */
#include <complex.h>    /* Standart Library of Complex Numbers */

int main()
{
    double complex z1 = 1.0 + 3.0 * I;
    double complex z2 = 1.0 - 4.0 * I;

    printf("Working with complex numbers:\n");
    printf("Starting values: Z1 = %.2f  + %.2fi\tZ2 = %.2f  + %.2fi\n",creal(z1),cimag(z1),creal(z2),cimag(z2));
    double complex sum = z1 + z2;
    printf("The sum: Z1 + Z2 = %.2f %+.2fi\n", creal(sum), cimag(sum));
    return 0;
} 
```

如您所见，错误的 libstdc++-6.dll 再次发挥作用。这次任何人都可以建议我任何解决方法，希望不会降级到以前版本的 MinGW，因为那时我将不得不重建我所有的库。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:04:03.250

就像 Jens 所说，我认为`complex.h`头文件与 C++ 不兼容。在 C++ 中，您应该像这样使用[复杂](http://www.cplusplus.com/reference/complex/)的标头：

```
#include <iostream>
#include <complex>

int main()
{
  std::complex<double> c1(1.0,1.0), c2 ;

  c2 = pow(c1,2.0);

  std::cout << c1 << "  " << c2 << std::endl; 
} 
```

# php - 在浏览器中多次显示价格

> ID：15810148
> 
> 赞同：-4
> 
> 时间：2013-04-04T11:43:27.853
> 
> 标签：php, mysqli

我在数据库中有 3 顿饭。当我显示我的查询时，它显示 3 个价格。**我如何只显示一个结果？**

```
$result = mysqli_query($con, "SELECT meal, price FROM Meals");

while  ($row = $result->fetch_assoc())  {
    echo '<input name="price" type="text" value="'.$row['price'].'" />';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:44:24.347

您将需要使用 MySQL[`LIMIT`](https://stackoverflow.com/a/4708752/761793)子句。

```
$result = mysqli_query($con, "SELECT meal, price FROM Meals LIMIT 1"); 
```

**从[MySQL 手册](http://dev.mysql.com/doc/refman/5.6/en/select.html)：**

> 使用一个参数，该值指定从结果集开头返回的行数。
> 
> 有两个参数，第一个参数指定要返回的第一行的偏移量，第二个参数指定要返回的最大行数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:46:48.633

正确的查询是

```
$result = mysqli_query($con, "SELECT meal, price FROM Meals GROUP BY meal HAVING meal = "mealname" "); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T12:04:34.357

如果你想显示任何一个出三个然后使用

```
$result = mysqli_query($con, "SELECT meal, price FROM Meals LIMIT 1");
 if  ($row = $result->fetch_assoc())  {
        echo '<input name="price" type="text" value="'.$row['price'].'" />';
       } 
```

如果您想显示特定的，则在查询中使用 id 或任何主键。喜欢

```
$result = mysqli_query($con, "SELECT meal, price FROM Meals WHERE id='your id or primary key value' LIMIT 1");
 if  ($row = $result->fetch_assoc())  {
        echo '<input name="price" type="text" value="'.$row['price'].'" />';
       } 
```

简而言之，根据您想要的结果使用您的查询。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T12:04:39.800

使用此查询显示一顿饭的价格。 `$result = mysqli_query($con, "SELECT meal, price FROM Meals WHERE meal = "mealname" "); while ($row = $result->fetch_assoc()) { echo '<input name="price" type="text" value="'.$row['price'].'" />'; }`

# css - Twitter 引导响应式布局

> ID：15810154
> 
> 赞同：1
> 
> 时间：2013-04-04T11:43:49.200
> 
> 标签：css, html, twitter-bootstrap, responsive-design

我做了这个响应式布局。它工作正常，直到屏幕的宽度小于 800 像素，它被搞砸了。

我该如何解决这个问题，以便徽标只是“缩小”并且不会在彼此下方重新排列？

[http://jsfiddle.net/hashie5/Pnc3g/](http://jsfiddle.net/hashie5/Pnc3g/)

html:

```
<div class="container">
<div class="testimonials row-fluid">
    <div class="span6">
        <div class="row-fluid">
            <div class="span12"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
            <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a>
            <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a>
        </div>
        <div class="row-fluid">
            <div class="span3"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
            <div class="span3"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
            <div class="span3"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
            <div class="span3"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
        </div>
        <div class="row-fluid">
            <div class="span3"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
            <div class="span3"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
            <div class="span3"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
            <div class="span3"> <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a></div>
        </div>
    </div>
    <div class="span6">
        <div class="quote">
            <div class="text">
                <em>Congratulations! It is really a great tool, it is very friendly for us. Creating a new message is so easy with your smart builder. Thank you for that. 10/10</em>
            </div>
            <div class="author">JUAN ISAAC RODRIGUEZ, Credit Report, Peru.</div>
        </div>
    </div>
</div> 
```

CSS：

```
.testimonials {
    background-color:#f7f7f7;
}
.quote {
    background: url("http://www.flexmail.net/images/quote_home.gif") left top no-repeat;
    height: 128px;
    margin: 20px auto 0 auto;
    padding: 20px;
}
.quote .text {
    color: #444444;
    line-height: 22px;
}
.quote .author {
    color: #666666;
    float: left;
    font-family:'colaboratelightregular';
    font-size: 12px;
    line-height: 22px;
    margin: 10px 0 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:50:57.190

在较窄的窗口中，每个都`spanX`将成为宽度为 100% 的行。这就是导致你一团糟的原因:)

也许这是一个替代解决方案，但不是最好的，因为我们在 html 代码中复制了图像。

我添加了一些**CSS**

```
.visible-phone img {
    float: left;
    width: 25%;
} 
```

还有一些**html**

```
<div class="row-fluid visible-phone">
    <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a>
    <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a>
    <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a>
    <a href="#"><img src="http://www.flexmail.net/images/logos/logo_flexmail.png" alt="gas" /></a>
</div> 
```

所有图像在 html 中出现两次。注意包装图像的类`visible-phone`和s`hidden-phone`上。`div`

[http://jsfiddle.net/Pnc3g/5/](http://jsfiddle.net/Pnc3g/5/)

# css - 如何在整个应用程序中保持面板不变

> ID：15810160
> 
> 赞同：0
> 
> 时间：2013-04-04T11:44:07.340
> 
> 标签：css, html

我有一个页面，其中有三个面板...左面板，中面板，右面板...我的问题是这个...我的中心面板中有一个链接，该链接指向另一个页面...但是我希望新页面显示在中心面板中，条件是左右面板应保持原样......我可以在中心面板中显示第二页，但我无法阻止左右面板...

我的代码：

```
<div id="wrapper">
    <div id="centerPanel">
       center panel
       <a href="<s:url action="ViewAppeals"/>">View Appeals</a>
   </div>
</div>

<div id="leftPanel">
   leftpanel
</div>

<div id="rightPanel">
   rightpanel
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:15:02.183

这是一种方法，尽管它可能不是您想要的。

我为每个页面制作了一个 div，内容如下：

```
<div id="pagewrap" style="">
    <!---------------Home Page--------------->
    <div id="Content1"> 
        <object id="dHome" data="home.html" style="overflow:hidden;margin:5px;">
        </object>
    </div>
    <!----------------Gallery Page--------------->
    <div id="Content2"> 
        <object id="dGallery" data="gallery.html"> 
        </object>
    </div>
</div> 
```

等等...

正如您在上面看到的，我使用对象作为我的页面来加载外部 html 数据。

我将包装器`pagewrap`的宽度设置为所有页面宽度的总和，并使用 Jquery 将页面向左或向右移动，具体取决于单击的按钮。

这是向右分页时的代码：

```
$('#pagewrap').animate({'marginLeft' : "-=650px"},200); 
```

走了：

```
$('#pagewrap').animate({'marginLeft' : "+=650px"},200); 
```

以上`650px`是我所有内容页面的内容。

> **或者您可以只更改对象的源文件！**

*希望这可以帮助*

# c++ - 有没有办法在 C++11 中传递嵌套初始化列表来构造二维矩阵？

> ID：15810171
> 
> 赞同：24
> 
> 时间：2013-04-04T11:44:34.577
> 
> 标签：c++, c++11, nested-lists, initializer-list

想象一下你有一个简单的矩阵类

```
template <typename T = double>
class Matrix {

  T* data;
  size_t row, col;

public:

  Matrix(size_t m, size_t n) : row(m), col(n), data(new T[m*n]) {}
  //...       

  friend std::ostream& operator<<(std::ostream& os, const Matrix& m) {
    for (int i=0; i<m.row; ++i) {
      for (int j=0; j<m.col; ++j)
        os<<" "<<m.data[i + j*m.row];
      os<<endl;
    }
    return os;
  }
}; 
```

有没有办法可以用初始化列表初始化这个矩阵？我的意思是从初始化列表中获取矩阵和元素的大小。类似于以下代码：

```
Matrix m = { {1., 3., 4.}, {2., 6, 2.}}; 
```

会打印

```
 1 3 4
 2 6 2 
```

期待您的回答。谢谢你们。啊

**编辑**

因此，我根据您的建议制作了一个使用初始化列表初始化元素的通用数组。但这是我能得到的最通用的。如果你们中的任何人对使它成为更通用的类有任何建议，我将不胜感激。另外，还有几个问题：

*   派生类初始化基类的状态可以吗？因此，我没有调用基本构造函数，但无论如何我应该调用它吗？
*   我将 Generic_base 类的析构函数定义为受保护的，这是正确的方法吗？
*   是否有任何可预见的方式以更通用的方式执行属于初始化程序的构造函数的代码？我的意思是有**一个**通用的构造函数来处理所有情况？

我只包含了必要的代码来说明在构造中使用初始化列表。当进入更高维度时，它会变得混乱，但我只是为了检查代码而做了一个。

```
#include <iostream>
#include <cassert>

using std::cout;
using std::endl;

template <int d, typename T>
class Generic_base {

protected:

  typedef T value_type;

  Generic_base() : n_(), data_(nullptr){}

  size_t n_[d] = {0};
  value_type* data_;
};

template <int d, typename T>
class Generic_traits;

template <typename T>
class Generic_traits<1,T> : public Generic_base<1,T> {

protected:

  typedef T value_type;
  typedef Generic_base<1,T> base_type;
  typedef std::initializer_list<T> initializer_type;

  using base_type::n_;
  using base_type::data_;

public:

  Generic_traits(initializer_type l) {

    assert(l.size() > 0);
    n_[0] = l.size();
    data_ = new T[n_[0]];

    int i = 0;
    for (const auto& v : l)
      data_[i++] = v;
  }
};

template <typename T>
class Generic_traits<2,T> : public Generic_base<2,T> {

protected:

  typedef T value_type;
  typedef Generic_base<2,T> base_type;

  typedef std::initializer_list<T> list_type;
  typedef std::initializer_list<list_type> initializer_type;

  using base_type::n_;
  using base_type::data_;

public:

  Generic_traits(initializer_type l) {

    assert(l.size() > 0);
    n_[0] = l.size();
    n_[1] = l.begin()->size();

    data_ = new T[n_[0]*n_[1]];

    int i = 0, j = 0;
    for (const auto& r : l) {

      assert(r.size() == n_[1]);
      for (const auto& v : r) {
        data_[i + j*n_[0]] = v;
        ++j;
      }
      j = 0;
      ++i;
    }
  }
};

template <typename T>
class Generic_traits<4,T> : public Generic_base<4,T> {

protected:

  typedef T value_type;
  typedef Generic_base<4,T> base_type;

  typedef std::initializer_list<T> list_type;
  typedef std::initializer_list<list_type> llist_type;
  typedef std::initializer_list<llist_type> lllist_type;
  typedef std::initializer_list<lllist_type> initializer_type;

  using base_type::n_;
  using base_type::data_;

public:

  Generic_traits(initializer_type l) {

    assert(l.size() > 0);
    assert(l.begin()->size() > 0);
    assert(l.begin()->begin()->size() > 0);
    assert(l.begin()->begin()->begin()->size() > 0);

    size_t m = n_[0] = l.size();
    size_t n = n_[1] = l.begin()->size();
    size_t o = n_[2] = l.begin()->begin()->size();
    n_[3] = l.begin()->begin()->begin()->size();

    data_ = new T[m*n*o*n_[3]];

    int i=0, j=0, k=0, p=0;
    for (const auto& u : l) {
      assert(u.size() == n_[1]);
      for (const auto& v : u) {
        assert(v.size() == n_[2]);
        for (const auto& x : v) {
          assert(x.size() == n_[3]);
          for (const auto& y : x) {
            data_[i + m*j + m*n*k + m*n*o*p] = y;
            ++p;
          }
          p = 0;
          ++k;
        }
        k = 0;
        ++j;
      }
      j = 0;
      ++i;
    }
  }
};

template <int d, typename T>
class Generic : public Generic_traits<d,T> {

public:

  typedef Generic_traits<d,T> traits_type;
  typedef typename traits_type::base_type base_type;

  using base_type::n_;
  using base_type::data_;

  typedef typename traits_type::initializer_type initializer_type;

  // initializer list constructor
  Generic(initializer_type l) : traits_type(l) {}

  size_t size() const {
    size_t n = 1;
    for (size_t i=0; i<d; ++i)
      n *= n_[i];
    return n;
  }

  friend std::ostream& operator<<(std::ostream& os, const Generic& a) {
    for (int i=0; i<a.size(); ++i)
      os<<" "<<a.data_[i];
    return os<<endl;
  }      
};

int main()
{

  // constructors for initializer lists

  Generic<1, double> y = { 1., 2., 3., 4.};
  cout<<"y -> "<<y<<endl;

  Generic<2, double> C = { {1., 2., 3.}, {4., 5., 6.} };
  cout<<"C -> "<<C<<endl;

  Generic<4, double> TT = { {{{1.}, {7.}, {13.}, {19}}, {{2}, {8}, {14}, {20}}, {{3}, {9}, {15}, {21}}}, {{{4.}, {10}, {16}, {22}}, {{5}, {11}, {17}, {23}}, {{6}, {12}, {18}, {24}}} };
  cout<<"TT -> "<<TT<<endl;

  return 0;
} 
```

按预期打印：

```
y ->  1 2 3 4

C ->  1 4 2 5 3 6

TT ->  1 4 2 5 3 6 7 10 8 11 9 12 13 16 14 17 15 18 19 22 20 23 21 24 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-04T11:53:34.770

为什么不？

```
 Matrix(std::initializer_list<std::initializer_list<T>> lst) :
  Matrix(lst.size(), lst.size() ? lst.begin()->size() : 0)
  {
     int i = 0, j = 0;
     for (const auto& l : lst)
     {
        for (const auto& v : l)
        {
           data[i + j * row] = v;
           ++j;
        }
        j = 0;
        ++i;
     }
  } 
```

正如 stardust_ 所建议的那样 - 你应该在这里使用向量，而不是数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-24T21:05:17.690

使用初始化列表来解决这个问题的主要问题是它们的大小在编译时不容易访问。看起来这个特定的类是用于动态矩阵的，但是如果您想在堆栈上执行此操作（通常出于速度/局部性原因），这里提示您需要什么（C++17）：

```
template<typename elem_t, size_t ... dim>
struct matrix
{
    template<size_t ... n>
    constexpr matrix(const elem_t (&...list)[n]) : data{}
    {
        auto pos = &data[0];
        ((pos = std::copy(list, list + n, pos)), ...);
    }

    int data[dim...];
};

template<typename ... elem_t, size_t ... n>
matrix(const elem_t (&...list)[n]) -> matrix<std::common_type_t<elem_t...>, sizeof...(n), (n * ...) / sizeof...(n)>; 
```

我必须在我的线性代数库中解决同样的问题，所以我一开始就明白这是多么不直观。但是，如果您改为将 C 数组传递给构造函数，您将获得传入值的类型和大小信息。还要注意构造函数模板参数推导 (CTAD) 以抽象出模板参数。

然后，您可以像这样创建 constexpr 矩阵对象（或者，省略 constexpr 以在运行时在堆栈上简单地执行此操作）：

```
constexpr matrix mat{ {1, 2, 3}, {4, 5, 6}, {7, 8, 9}, {10, 11, 12} }; 
```

这将在编译时初始化一个对象类型：

```
const matrix<int, 4, 3> 
```

如果您的编译器支持 C++20，我建议在 CTAD 中添加“requires”子句以确保所有子数组的大小相同（从数学上讲，n1 == n2 == n3 == n4， ETC）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-11-03T08:53:42.643

## 使用`std::vector::emplace_back()`（更长）

使用`std::vector`, 而不是普通的旧数组，您可以使用它`std::vector::emplace_back()`来填充向量：

```
template <typename T = double>
class Matrix {
    std::vector<T> data;
    size_t row{}, col{}; // Non-static member initialization

public:
    Matrix(size_t m, size_t n) : data(std::vector<T>(m * n)), row(m), col(n)
    { //                         ^ Keep the order in which the members are declared
    }
    Matrix(std::initializer_list<std::initializer_list<T>> lst)
        : row(lst.size())
        , col(lst.size() ? lst.begin()->size() : 0) // Minimal validation
    {
        // Eliminate reallocations as we already know the size of matrix
        data.reserve(row * col);
        for (auto const& r : lst) {
            for (auto const &c : r) {
                data.emplace_back(c);
            }
        }
    }
};

int main() {
    Matrix<double> d = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};
} 
```

## 使用`std::vector::insert()`（更好更短）

正如[@Bob](https://stackoverflow.com/users/4944425/bob)在评论中提到的，您可以使用[`std::vector::insert()`](https://en.cppreference.com/w/cpp/container/vector/insert)成员函数，而不是内部`emplace_back`循环：

```
template <typename T = double>
class Matrix {
    std::vector<T> data;
    size_t row{}, col{}; // Non-static member initialization

public:
    Matrix(size_t m, size_t n) : data(std::vector<T>(m * n)), row(m), col(n)
    { //                         ^ Keep the order in which the members are declared
    }
    Matrix(std::initializer_list<std::initializer_list<T>> lst)
        : row{lst.size()}
        , col{lst.size() ? lst.begin()->size() : 0} // Minimal validation
    {
        // Eliminate reallocations as we already know the size of the matrix
        data.reserve(row * col);
        for (auto const& r : lst) {
            data.insert(data.end(), r.begin(), r.end());
        }
    }
};

int main() {
    Matrix<double> d = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};
} 
```

所以，我们说：对于 中的每一行 ( `r`) `lst`，将行的内容从开头 ( `r.begin()`) 到结尾 ( `r.end()`) 插入到空向量的末尾`data`， (在空向量中，语义上我们有`empty_vec.begin() == empty_vec.end()`：) .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-22T11:35:48.250

我可能有点晚了，但这里是一般初始化张量的代码，无论它们是矩阵、向量还是任何张量。当它不是矩阵时，你可以通过抛出运行时错误来限制它。下面是从 initilizer_list 中提取数据的源代码，它有点 hacky。整个技巧是使用正确的类型隐式调用构造函数。

```
#include <initializer_list>
#include <iostream>
using namespace std;

class ShapeElem{
public:
    ShapeElem* next;
    int len;

    ShapeElem(int _len,ShapeElem* _next): next(_next),len(_len){}

    void print_shape(){
        if (next != nullptr){
            cout <<" "<< len;
            next->print_shape();
        }else{
            cout << " " <<  len << "\n";
        }
    }

    int array_len(){
        if (next != nullptr){
            return len*next->array_len();
        }else{
            return len;
        } 
    }
};

template<class value_type>
class ArrayInit{
public:
    void* data = nullptr;
    size_t len;
    bool is_final;

    ArrayInit(std::initializer_list<value_type> init) : data((void*)init.begin()), len(init.size()),is_final(true){}

    ArrayInit(std::initializer_list<ArrayInit<value_type>> init): data((void*)init.begin()), len(init.size()),is_final(false){}

    ShapeElem* shape(){
        if(is_final){
            ShapeElem* out = new ShapeElem(len,nullptr);
        }else{
            ArrayInit<value_type>* first = (ArrayInit<value_type>*)data;
            ShapeElem* out = new ShapeElem(len,first->shape());
        }
    }
    void assign(value_type** pointer){
        if(is_final){
            for(size_t k = 0; k < len;k ++ ){
                (*pointer)[k] =  ( ((value_type*)data)[k]);
            }
            (*pointer) = (*pointer) + len;
        }else{
            ArrayInit<value_type>* data_array = (ArrayInit<value_type>*)data;
            for(int k = 0;k < len;k++){
                data_array[k].assign(pointer);
            }
        }
    }
};

int main(){
    auto x = ArrayInit<int>({{1,2,3},{92,1,3}});
    auto shape = x.shape();
    shape->print_shape();
    int* data = new int[shape->array_len()];
    int* running_pointer = data;
    x.assign(&running_pointer);
    for(int i = 0;i < shape->array_len();i++){
        cout << " " << data[i];
    }
    cout << "\n";
} 
```

输出

```
 2 3
 1 2 3 92 1 3 
```

shape() 函数将返回张量在每个维度上的形状。数组在写下时完全保存。创建类似形状的东西真的很重要，因为这会给你元素的顺序。

如果您想要张量中的特定索引，可以说 a[1][2][3] 正确的位置在 1*a.shape[1] *a.shape[2] + 2* a.shape[2] + 3

一些小细节和技巧可以在：[https ://github.com/martinpflaum/multidimensional_array_cpp](https://github.com/martinpflaum/multidimensional_array_cpp)

# charts - PowerPoint Interop - 如何从形状中访问图表？

> ID：15810201
> 
> 赞同：0
> 
> 时间：2013-04-04T11:45:56.097
> 
> 标签：charts, interop, powerpoint

我正在使用办公自动化工具来处理 PowerPoint 文档，我在格式化图表时遇到了问题。

我正在使用以下程序集来格式化演示文稿 Microsoft.Office.Interop.PowerPoint 版本：12.0.0.0 Microsoft.Office.Interop.Graph 版本：12.0.0.0 要求将一些样式（例如图例位置、颜色、字体等）应用于图表存在于演示文稿中。

我能够验证形状，如 shape.HasChart == MsoTriState.msoTrue 但无法使图表对象脱离形状

试过下面的代码，但是收到OLEFormat异常Graph.Chart chart = (Graph.Chart)shape.OLEFormat.Object

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T04:47:07.397

通过从 COM 选项卡中选择正确的引用解决了该问题。来自线程的回答 - [http://social.msdn.microsoft.com/Forums/en-US/officegeneral/thread/06cea2b7-f169-4f8a-b53e-4319b12b5450](http://social.msdn.microsoft.com/Forums/en-US/officegeneral/thread/06cea2b7-f169-4f8a-b53e-4319b12b5450)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:23:01.463

我知道您是从（相当）.NET 的角度提出问题，但我会向您展示一些来自 VBA PowerPoint 的代码。我的目标是向您展示对象层次结构。我相信这对您解决问题很有帮助。

```
Sub Chart_Elements()

Dim CHRT As Chart
'first shape in the 1st slide is chart
Set CHRT = ActivePresentation.Slides(1).Shapes(1).Chart

With CHRT
    'to set legend position
    .Legend.Position = xlLegendPositionBottom
    'to set size of 1st entry in legend
    .Legend.LegendEntries(1).Font.Size = 10
    'and so on
End With
End Sub 
```

如果该答案对您根本没有帮助，请考虑重新标记您的问题。

# ios - 需要有关核心数据关系概念的帮助，不要求任何代码

> ID：15810203
> 
> 赞同：0
> 
> 时间：2013-04-04T11:45:57.573
> 
> 标签：ios, core-data

我目前正在研究核心数据和新手，从通讯录中获取复合名称和联系电话。我现在可以使用 KVC 和子类化 NSManagedObject 以一对多的关系保存数据。但是我仍然不清楚一些概念。

![在此处输入图像描述](https://i.stack.imgur.com/Tjg0x.png)

在普通数据库中，我们以主键和外键的方式保存数据。ContactName 表中的 ID、compositeName 字段和 ContactNumber 表中的 ID、号码、类型字段。可以在两个表 ID 字段上轻松创建关系。

在核心数据中，它使用 KVC 像这样完成：

```
1\.        NSManagedObject *contactNameEntity = [NSEntityDescription insertNewObjectForEntityForName:@"ContactName" inManagedObjectContext:self.managedObjectContext];

2\.                [contactNameEntity setValue:@"TheName" forKey:@"compositeName"]

3\.                NSMutableSet *relationAsSet = [contactNameEntity mutableSetValueForKey:@"contactNameRelation"];

    //fetching multi values like contact mobile, iPhone, home, work, other numbers and iterating them
4\.                ABMutableMultiValueRef multiValues = ABRecordCopyValue(ref, kABPersonPhoneProperty);
5\.                        CFArrayRef mVArray = ABMultiValueCopyArrayOfAllValues(multiValues);
6\.                        for(int i=0; i<CFArrayGetCount(mVArray); i++) {
7\.                            NSManagedObject *contactNumberEntity = [NSEntityDescription insertNewObjectForEntityForName:@"ContactNumber" inManagedObjectContext:self.managedObjectContext];
8\.                            [contactNumberEntity setValue:(__bridge NSString*)CFArrayGetValueAtIndex(mVArray, i) forKey:@"number"];
9\.                            [contactNumberEntity setValue:(__bridge id)(ABMultiValueCopyLabelAtIndex(multiValues, i)) forKey:@"type"];
10\.                            [relationAsSet addObject:contactNumberEntity];
                        }

11\.        [contactNameEntity setValue:relationAsSet forKey:@"contactNameRelation"]; 
```

现在使用实体子类方法＃1：

```
1\.        ContactName *contactNameEntity = [NSEntityDescription insertNewObjectForEntityForName:@"ContactName" inManagedObjectContext:self.managedObjectContext];
2\.                [contactNameEntity setCompositeName:(__bridge id)(compositeName)];

3\.    for(int i=0; i<CFArrayGetCount(mVArray); i++) {
4\.                ContactNumber *contactNumberEntity = [NSEntityDescription 
5\. insertNewObjectForEntityForName:@"ContactNumber" inManagedObjectContext:self.managedObjectContext];
6\.                [contactNumberEntity setNumber:(__bridge NSString*)CFArrayGetValueAtIndex(mVArray, i)];
7\.                [contactNumberEntity setType:(__bridge id)(ABMultiValueCopyLabelAtIndex(multiValues, i))];
8\.                [contactNameEntity addContactNameRelationObject:contactNumberEntity];
            } 
```

现在使用类似于 KVC 方法 #2 的实体子类：

```
1\.    ContactName *contactNameEntity = [NSEntityDescription insertNewObjectForEntityForName:@"ContactName" inManagedObjectContext:self.managedObjectContext];
2\.             [contactNameEntity setCompositeName:(__bridge id)(compositeName)];

3\.    NSSet *set = [contactNameEntity contactNameRelation];
4\.            NSMutableSet *mSet = [NSMutableSet setWithSet:set];
5\.            set = nil;

6\.    for(int i=0; i<CFArrayGetCount(mVArray); i++) {
7\.                ContactNumber *contactNumberEntity = [NSEntityDescription 
8\. insertNewObjectForEntityForName:@"ContactNumber" inManagedObjectContext:self.managedObjectContext];
9\.                [contactNumberEntity setNumber:(__bridge NSString*)CFArrayGetValueAtIndex(mVArray, i)];
10\.                [contactNumberEntity setType:(__bridge id)(ABMultiValueCopyLabelAtIndex(multiValues, i))];
11\.                [mSet addObject:contactNumberEntity];
            }

12\.    [contactNameEntity addContactNameRelation:mSet]; 
```

问题：

1.  KVC方法第3行，为什么不能创建正常的NSSet？

2.  为什么关系以 NSSet 的形式存在，虽然在正常的数据库关系中只是一件简单的事情，但在核心数据中似乎很复杂。

3.  我是正确使用子类生成的方法还是以标准方式使用子类生成的方法？（要求验证我的概念）。

4.  为什么方法#1 和方法#2 不同？两者都在使用子类。

5.  `@property (nonatomic, retain) NSSet *contactNameRelation;`和`NSMutableSet *relationAsSet = [contactNameEntity mutableSetValueForKey:@"contactNameRelation"];`返回相同的对象/值吗？

*。请避免任何愚蠢的错误。

*。请告诉我问的问题不清楚。

**编辑 1**

ContactName 实体 xcode 生成的子类 .h 文件：

```
@property (nonatomic, retain) NSString * number;
@property (nonatomic, retain) NSSet *contactNumbers;
@end

@interface ContactName (CoreDataGeneratedAccessors)

- (void)addContactNumbersObject:(ContactNumber *)value;
- (void)removeContactNumbersObject:(ContactNumber *)value;
- (void)addContactNumbers:(NSSet *)values;
- (void)removeContactNumbers:(NSSet *)values; 
```

这是 .m 文件：

```
@implementation ContactName

@dynamic compositeName;
@dynamic contactNumbers;

@end 
```

我想知道如何正确使用这些方法，这就是为什么方法 1 和 2 是我在上面基于这个子类发布的两种不同方法。什么是正确的，什么是不正确的，请帮助我。

**编辑 2**

这是我在记录relationAsSet 时得到的

```
$0 = 0x0854c1c0 Relationship 'contactNameRelation' on managed object (0x835bae0) <ContactName: 0x835bae0> (entity: ContactName; id: 0x835ba80 <x-coredata:///ContactName/t66752D00-F08B-40DF-AEED-ABCACEA254652> ; data: {
    compositeName = myname;
    contactNameRelation =     (
    );
}) with objects {(
)} 
```

还有这个

```
$0 = 0x0821b460 Relationship 'contactNameRelation' on managed object (0x823fe50) <ContactName: 0x823fe50> (entity: ContactName; id: 0x823fea0 <x-coredata:///ContactName/t3CED08C3-94E0-4B43-93F0-96DE2D2A24922> ; data: {
    compositeName = myname;
    contactNameRelation =     (
        "0x821be40 <x-coredata:///ContactNumber/t3CED08C3-94E0-4B43-93F0-96DE2D2A24923>"
    );
}) with objects {(
    <ContactNumber: 0x8241ab0> (entity: ContactNumber; id: 0x821be40 <x-coredata:///ContactNumber/t3CED08C3-94E0-4B43-93F0-96DE2D2A24923> ; data: {
    contactNumberRelation = "0x823fea0 <x-coredata:///ContactName/t3CED08C3-94E0-4B43-93F0-96DE2D2A24922>";
    number = 123;
    type = iphone;
})
)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:43:36.487

1.  您将收到一个`NSMutableSet *`，但您可以将其存储在其中，`NSSet *`因为它`NSMutableSet *`是 的子类`NSSet *`。问题是，如果您不打算从集合中添加或删除元素，您应该只这样做。

2.  事实上，你可以更容易地做到这一点。你可以这样做：

    contactNumberEntity.contactNumberRelation = contactNameEntity;

3.  一般来说是的，但是您编写的代码比将所有这些中间步骤作为检索集合等所需的代码多得多……这完全没有必要。

4.  我不明白你要带着这个去哪里。在#2 中，您采取中间步骤并将关系存储在`NSSet *`类型指针中，然后创建一个新集合，`NSMutableSet *`将第一个集合中的对象复制到其中。＃1是从这两种选择中走出来的路。

5.  我站纠正！为了确定这一点，我做了一个实验，发现不仅应该将它们视为两个不同的对象，两种不同方法返回的集合实际上具有不同的内存地址，**因此它们是不同的对象。**

更新#1

做的理由

```
NSMutableSet *relationAsSet = [contactNameEntity mutableSetValueForKey:@"contactNameRelation"] ; 
```

是获取已经存在的关系。如果您对现有关系不感兴趣，则可以完全跳过此步骤。当然，如果您已经努力将您的 子类化`NSManagedObject`，您将永远不想这样做。

Xcode 将它们生成为`NSSet *`，因为 Apple 更喜欢您通过特殊方法更改集合。*Core Data*负责维护您的反向关系。为此，他们要求您尊重公共接口并使用这些方法。与 KVC 方法有细微的差别。在那里，他们将返回一个*Key-Value-Observable*代理对象。这就是为什么你可以改变你通过 KVC 检索到的集合，这也是它返回为 的原因`NSMutableSet *`，让你知道这没关系。

如果要在该关系中添加或删除单个对象，可以使用：

```
- (void)addContactNumbersObject:(ContactNumber *)value;
- (void)removeContactNumbersObject:(ContactNumber *)value; 
```

如果您希望替换整个关系集，可以使用：

```
- (void)addContactNumbers:(NSSet *)values;
- (void)removeContactNumbers:(NSSet *)values; 
```

这是[核心数据编程指南的链接：使用托管对象](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreData/Articles/cdUsingMOs.html#//apple_ref/doc/uid/TP40001803-SW3)。

@MartinR 指出的是，当您想要更改托管对象时，您需要使用 Core Data 方法或通过 KVC 提供的直接集。当你这样做时，

```
NSMutableSet *mSet = [NSMutableSet setWithSet:set]; 
```

您实际上是在创建一个全新的集合，它将旧集合中的所有对象复制到其中。而且我称这个铸造是不正确的 - 它不是。

现在是一个非常重要的难题。 **我在这里引用 Apple 文档（上面也引用过）：**

> 理解点访问器和 mutableSetValueForKey: 返回的值之间的区别很重要。mutableSetValueForKey：返回一个可变代理对象。如果您改变其内容，它将为关系发出适当的键值观察 (KVO) 更改通知。点访问器只是返回一个集合。如果您按此代码片段所示操作该集合：

```
[aDepartment.employees addObject:newEmployee]; // do not do this! 
```

> 然后不会发出 KVO 更改通知，并且不会正确更新反向关系。

**报价结束。**

永远不要**将**您`NSSet *`在 NSManagedObject 子类方法中检索到的方法转换为`NSMutableSet *`.

更新#2

扩展了我对为什么 Xcode 生成返回的访问器`NSSet *`以及为什么你不能将其强制转换`NSMutableSet *`为修改关系的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:52:03.200

正如@svena 已经说过的那样，您的关系名称有点“非常规”（而且您似乎已经在添加的代码中部分更改了它们）。所以我将假设以下模型和关系名称：

![核心数据模型](https://i.stack.imgur.com/uvwxk.png)

一对多关系的值是 a `NSSet`。例如

```
ContactName *aContact = ...;
NSSet *relatedNumbers = aContact.contactNumbers;
// or equivalently, using KVC:
relatedNumbers = [aContact valueForKey:@"contactNumbers"];
for (ContactNumber *contactNumber in relatedNumbers) {
    NSLog(@"%@", contactNumber.number);
} 
```

因此，您使用关系的值（`NSSet`在本例中为 a）来遍历对象图并找到相关对象。但是你不能修改这个集合（它是不可变的）。

然后你有问题

```
NSMutableSet *mutableRelatedNumbers = [aContact mutableSetValueForKey:@"contactNumbers"]; 
```

这是一件非常特别的事情。它是一个与`aContact`对象“绑定”的可变集合。这意味着如果您修改此集合（添加或删除某些内容），那么您有效地修改了对象的`contactNumbers`关系。`aContact`

所以

```
ContactName *aContact = ...;
ContactNumber *aContactNumber1 = ...;
ContactNumber *aContactNumber2 = ...;

// (A)
NSMutableSet *mutableRelatedNumbers = [aContact mutableSetValueForKey:@"contactNumbers"];
[mutableRelatedNumbers addObject:aContactNumber1];
[mutableRelatedNumbers addObject:aContactNumber2]; 
```

（这是您的第一个代码块的更正版本）是一种复杂的方法

```
// (B)
[aContact addContactNumbersObject:aContactNumber1];
[aContact addContactNumbersObject:aContactNumber2]; 
```

（这是您的方法＃1）。另一种等效方法是（因为逆关系）

```
// (C)
aContactNumber1.contactName = aContact;
aContactNumber2.contactName = aContact; 
```

或者

```
// (D)
NSMutableSet *mset = [NSMutableSet set];
[mset addObject:aContactNumber1];
[mset addObject:aContactNumber2];
[aContact addContactNumbers:mset]; 
```

这类似于（B），并且是您的方法＃2的更正版本。

这些都是将对象添加到关系中的有效方法，但是 (C) 是最容易使用的，其次是 (B)。(A) 和 (D) 很少使用。(C) 的另一个优点是更好的类型检查。

因此，即使我没有直接回答问题，我希望这有助于澄清问题！

# hadoop - 无法实例化 HiveMetaStoreClient

> ID：15810210
> 
> 赞同：3
> 
> 时间：2013-04-04T11:46:29.053
> 
> 标签：hadoop, permissions, hive, hdfs, hue

我有一个运行 hive 的 3 节点集群。当我尝试从集群外部运行一些测试时，出现以下错误

> 失败：元数据错误：java.lang.RuntimeException：无法实例化 org.apache.hadoop.hive.metastore.HiveMetaStoreClient 失败：执行错误，从 org.apache.hadoop.hive.ql.exec.DDLTask 返回代码 1 记录已初始化使用文件中的配置：/net/slc01nwj/scratch/ashsshar/view_storage/ashsshar_bda_latest_2/work/hive_scratch/conf/hive-log4j.properties

当我登录到集群节点并执行 hive 时，它​​工作正常。

蜂巢>显示数据库；好的 默认

在测试日志文件中生成以下错误

> 13/04/04 03:10:49 错误 security.UserGroupInformation: PriviledgedActionException as:ashsshar {我的用户名}(auth:SIMPLE) 原因:java.io.IOException: javax.jdo.JDOFatalDataStoreException: 无法创建数据库'/var/ lib/hive/metastore/metastore_db'，有关详细信息，请参阅下一个异常。NestedThrowables: java.sql.SQLException: 无法创建数据库'/var/lib/hive/metastore/metastore_db'，有关详细信息，请参阅下一个异常。

我的`hive-site.xml`文件包含此连接属性 ::

```
<name>javax.jdo.option.ConnectionURL</name>
<value>jdbc:derby:;databaseName=/var/lib/hive/metastore/metastore_db;create=true</value>
<description>JDBC connect string for a JDBC metastore</description> 
```

我`/var/lib/hive/metastore/metastore_db`在集群节点上更改了，但仍然出现相同的错误

我也试过从上面的目录中删除所有 *lck 文件

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T17:52:10.833

{username} 是否有创建权限 `/var/lib/hive/metastore/metastore_db`？

如果它是一个测试集群，你可以做

`sudo chmod -R 777 /var/lib/hive/metastore/metastore_db`

或者`chown`它给运行它的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T19:34:00.827

尝试删除 $HADOOP_HOME/build 文件夹。我对 hive-0.10.0 或更高版本有同样的问题。然后我尝试了 hive-0.9.0 并得到了一组不同的错误。幸运的是发现这个线程[Hive 在 install 上不起作用](https://stackoverflow.com/questions/6853445/hive-doesnt-work-on-install)。尝试了同样的技巧，它神奇地为我工作。我正在使用默认的德比数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T05:38:13.120

这是针对 hive 文件夹的权限问题。请德以下将运作良好。转到 hive 用户，对于我 hduser，sudo chmod -R 777 hive

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-23T21:56:32.757

此问题是由于 hive shell 的突然终止而发生的。它创建了一个无人值守的 db.lck 文件。为了解决这个问题，

> 浏览到您的 metastore_db 位置
> ，删除 tmp、dbex.lck 和 db.lck 文件。再次打开蜂巢外壳。它会起作用的。

您可以看到 tmp、dbex.lck 和 db.lck 文件再次创建。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-27T03:48:35.463

在我将元存储从 /var/lib/hive/ 移动后，它起作用了。我通过编辑来做到这一点：/etc/hive/conf.dist/hive-site.xml

从：

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:derby:;databaseName=/var/lib/hive/metastore/metastore_db;create=true</value>
  <description>JDBC connect string for a JDBC metastore</description>
</property> 
```

至：

```
<property>  
<name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:derby:;databaseName=/home/prashant/hive/metastore/metastore_db;create=true</value>
  <description>JDBC connect string for a JDBC metastore</description>
</property> 
```

`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-02T02:08:09.203

请确保您的 hadoop 目录中是否已经有 MetaStore_db，如果有，请将其删除并再次格式化您的 hdfs，然后尝试启动 hive

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-07-10T06:09:18.793

是的，这是特权问题。通过以下命令输入您的配置单元外壳：

```
sudo -u hdfs hive 
```

# c# - 如何为班级中的所有测试设置测试类别

> ID：15810215
> 
> 赞同：44
> 
> 时间：2013-04-04T11:46:45.320
> 
> 标签：c#, unit-testing, tfs, mstest

我正在使用[MSTest](https://en.wikipedia.org/wiki/MSTest)，我想一次为测试类中的所有方法设置相同的测试类别，而不是单独为每个方法设置 TestCategory 属性。如何才能做到这一点？

最方便和最明显的方法是在类上设置 TestCategory 属性，但它只能应用于方法。

最终目标是在 TFS 签入的测试运行期间跳过集成测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-06-14T19:37:28.543

为了能够在**类**`[TestCategory]`级别设置属性，请使用 NuGet 安装“MSTest V2”TestFramework。

 **参考：[https ://blogs.msdn.microsoft.com/devops/2016/06/17/taking-the-mstest-framework-forward-with-mstest-v2/](https://blogs.msdn.microsoft.com/devops/2016/06/17/taking-the-mstest-framework-forward-with-mstest-v2/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-09T20:51:39.097

我一直在寻求做类似的事情，并且我已经找到了一个非常适合我的目的的解决方案。

这并**不能解决**基于每个类应用 TestCategory 的问题，**但**您可以使用`/test:`命令行参数 for`mstest`指定搜索字符串以匹配测试的***完全限定*方法名称**的任何部分。这意味着您通常可以匹配类、名称空间或任何您可以到达的搜索字符串，以匹配目标测试。如果不这样做，您可以`/test:`多次使用该参数。IE：

```
> mstest /testcontainer:My.dll /test:My.FullyQualified.Namespace 
    /test:My.FullyQualified.OtherNamespace.OtherClass 
```

[更多信息](http://msdn.microsoft.com/en-us/library/ms182489.aspx#test)

**编辑：**

`TestCategory`正如下面 NomadeNumerique 的回答所述，MSTest V2 现在可以在类级别添加属性。[细节](https://devblogs.microsoft.com/devops/taking-the-mstest-framework-forward-with-mstest-v2/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-04-09T11:16:00.127

> 最终目标是在 TFS 签入的测试运行期间跳过集成测试。

还有其他方法可以做到这一点。在您的 TFS 构建中，[您可以设置要运行的单元测试，具体取决于它们的**程序集名称**。](http://msdn.microsoft.com/en-us/library/ms253138.aspx)

作为默认行为，它将在名称中包含“test”的程序集中运行所有单元测试。一个简单的解决方法是将您的集成测试重命名为不包含“测试”的名称。

* * *

如果您确实想使用**类别**，您可以尝试使用 AOP。例如，使用 Postsharp，您可以在集成测试程序集中创建一个方面，[将属性放在方法上](http://www.postsharp.net/blog/post/PostSharp-Principals-Day-12-e28093-Aspect-Providers-e28093-Part-1)。如果所有测试都分组在一个 dll 或每个集成测试类中，则为集成程序集中的所有公共方法启用方面。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T18:48:57.377

解决此限制的一种方法是将测试类别放在每个测试方法的开头。例如，命名您的单元测试

```
public void UnitTestDoSomething_ExpectThis() 
```

和你的集成测试

```
public void IntegrationTestDoSomething_ExpectThis() 
```

然后，当您执行 TFS 查询以获取集成测试时，您可以执行

`Field[Automated Test Name] with Operator[Contains] and Value[IntegrationTest]`

虽然这不是一个完美的解决方案，但它会帮助您区分代码和 TFS 中的测试。或者，您可以查看区域和迭代路径。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-09T11:07:11.630

您可以按“类名”分组到测试资源管理器面板中。

使用测试 TestCategory 属性无法解决问题，因为 C# 中的属性是元数据，不能用作动态值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-10T11:46:22.177

在 VS 2017 中这是可能的（并且看起来是[VS2012 update 1](https://blogs.msdn.microsoft.com/devops/2012/11/09/how-to-manage-unit-tests-in-visual-studio-2012-update-1-part-1using-traits-in-the-unit-test-explorer/)的一部分）。

您可以将 [TestCategory("Integration")] 放在单元测试中的类上并将其应用于所有测试，同样将 [TestCategory("Unit")] 放在单元测试类上。

然后，您可以使用测试资源管理器的搜索栏按特征名称 = 单位进行过滤，“全部运行”将仅运行与您的搜索匹配的测试。

当您在构建服务器上运行这些测试时，您可以使用 /category:Unit 之类的开关来仅运行单元测试。**

# c++ - 有没有办法在不创建该类的实例化的情况下获取 QObject 派生类的类名？

> ID：15810220
> 
> 赞同：7
> 
> 时间：2013-04-04T11:46:55.333
> 
> 标签：c++, qt, metaobject

我正在寻找这样的东西：

`MyClass::metaObject()->className()`

这不起作用，因为在执行此代码时，不存在 MyClass 的实例化。

如果这是可能的，有没有办法获得从 MyClass 派生的所有类的名称？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-04T11:58:41.743

使用[静态元对象](http://qt-project.org/doc/qt-4.8/qobject.html#staticMetaObject-var)：

```
 MyClass::staticMetaObject.className() 
```

作品！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-03-12T15:01:37.120

您应该能够使用：

```
obj->metaObject()->className(); 
```

# xcode - ios6关闭子视图时将父视图自动旋转为纵向

> ID：15810223
> 
> 赞同：0
> 
> 时间：2013-04-04T11:47:03.927
> 
> 标签：xcode, ios6, xcode4.5

嵌入在导航控制器中的登录视图控制器必须是纵向的。其他视图控制器的 push 可以旋转。场景：如果登录后我旋转子视图控制器，然后注销登录视图控制器出现在横向中。

logincontroller(portrait)->rotated device->childcontroller(landscape)->back->logincontroller(landscape)

当我回来时，我希望登录控制器是纵向的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:07:23.013

在你的登录 ViewController 中输入这两个方法

```
- (BOOL)shouldAutorotate {
    return YES;    
}

- (NSUInteger)supportedInterfaceOrientations {    
    return (UIInterfaceOrientationMaskPortrait | 
            UIInterfaceOrientationMaskPortraitUpsideDown);
} 
```

和

```
- (BOOL)shouldAutorotate {
    return YES;    
}

- (NSUInteger)supportedInterfaceOrientations {    
    return (UIInterfaceOrientationLandscapeRight | 
            UIInterfaceOrientationLandscapeLeft);
} 
```

在您的孩子控制器中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:40:16.317

在你的登录 ViewController 中输入这两个方法

```
(BOOL)shouldAutorotate { return YES;
}

(NSUInteger)supportedInterfaceOrientations {
return (UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown); } 
```

和

```
(BOOL)shouldAutorotate { return YES;
}

(NSUInteger)supportedInterfaceOrientations {
return (UIInterfaceOrientationLandscapeRight | UIInterfaceOrientationLandscapeLeft); } 
```

在您的孩子控制器中

需要添加类别自动旋转子类导航控制器，该控制器将调用 topcontroller shouldautorotate 并支持界面方向。

```
#import "UINavigationController+Autorotation.h"

@implementation UINavigationController (Autorotation)
-(BOOL)shouldAutorotate
{
for (UIViewController * viewController in self.viewControllers) {
    if (![viewController isEqual:self.topViewController]) {
        [viewController shouldAutorotate];
    }
}

return [self.topViewController shouldAutorotate];

}

-(NSUInteger)supportedInterfaceOrientations
{
for (UIViewController * viewController in self.viewControllers) {
    if (![viewController isEqual:self.topViewController]) {
        [viewController supportedInterfaceOrientations];
    }
}

return [self.topViewController supportedInterfaceOrientations];

} 
```

# c++ - 如何在用户模式下从内核模式驱动程序向二进制文件发送和接收数据

> ID：15810224
> 
> 赞同：1
> 
> 时间：2013-04-04T11:47:05.870
> 
> 标签：c++, windows, kernel-mode

我正在开发内核模式过滤器驱动程序，我希望该驱动程序将**UNICODE 字符串**发送到在用户模式下运行的 exe。请为此提供一个示例，因为我是驱动程序开发的初学者。

下面是我的驱动程序的代码（**我想从哪里发送 UNICODE 字符串**）

```
#include "drv_common.h"
#include "ntddk.h"
#include "FsFilter.h"
#define SOME_SIZE
// PassThrough IRP Handler

NTSTATUS FsFilterDispatchPassThrough( __in PDEVICE_OBJECT DeviceObject, __in PIRP Irp )
{
    PFSFILTER_DEVICE_EXTENSION pDevExt = (PFSFILTER_DEVICE_EXTENSION)DeviceObject->DeviceExtension;

    IoSkipCurrentIrpStackLocation(Irp);
    return IoCallDriver(pDevExt->AttachedToDeviceObject, Irp);
}
///////////////////////// struct file info ////////////////////////////////////
struct {
    OBJECT_NAME_INFORMATION NameInfo;
    WCHAR Buffer[64];   // 64 chars must be enough for everybody :)
} InfoBuffer;
///////////////////////////////////////////////////////////////////////////////////////////////////
// IRP_MJ_CREATE IRP Handler

NTSTATUS FsFilterDispatchCreate(
    __in PDEVICE_OBJECT DeviceObject,
    __in PIRP           Irp
    )
{       
        PFILE_OBJECT pFileObject = IoGetCurrentIrpStackLocation(Irp)->FileObject;   
        PUNICODE_STRING **temp**;
        RtlInitUnicodeString( temp, L"\\vs\\vs\\Setup\\eula.txt" );

        LONG flag = RtlCompareUnicodeString( temp, &pFileObject->FileName, TRUE ); 

        if ( flag == 0 )
        {
            DbgPrint("File is opened.\n" );
            return STATUS_UNSUCCESSFUL;
    }   

    return FsFilterDispatchPassThrough(DeviceObject, Irp);
} 
```

我想将**&pFileObject->FileName** (UNICODE String) 从上述代码发送到用户模式下的可执行文件。假设，该可执行文件只会在控制台上打印此字符串。下面是我在用户模式下的 exe 代码

```
.......
.......
int main()
{
    cout<< getUnicodeStringFromKernel();   // Just supposition
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:50:52.193

有几种不同的方法可以“访问”内核模式驱动程序。在这种情况下，最明显的是使用 ioctl 接口。

不幸的是，我无法为您提供示例，因为要实现这一点，我需要在我的虚拟机上安装 Windows DDK，并实际为其编写代码。

但是，[这里](http://support.microsoft.com/kb/262305)有一篇文章解释了过滤器驱动程序中的 ioctl 是如何工作的。

在您的应用程序中，您需要使用[`DeviceIoControl`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363216%28v=vs.85%29.aspx).

# c++ - Adobe Air NativeProcess 与 C++ Windows（非控制台）应用程序的通信

> ID：15810229
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:47:24.657
> 
> 标签：c++, apache-flex, air

如何在非控制台 C++ 应用程序中实现监听器以监听来自 Adob​​e AIR 的标准输入？
在 C# 控制台应用程序中，它看起来像：

```
namespace HelloNativeProcess
{
    class Program
    {
        static void Main(string[] args)
        {

            using (Stream stdin = Console.OpenStandardInput())
            using (Stream stdout = Console.OpenStandardOutput())
            {
                byte[] buffer = new byte[2048];
                int bytes;
                while ((bytes = stdin.Read(buffer, 0, buffer.Length)) > 0)
                {
                    stdout.Write(buffer, 0, bytes);
                }
            }
        }
    }
} 
```

我需要一个带有**APIENTRY winMain()**的 C++ 示例 - 启动函数。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:59:03.290

找到了答案。感谢皮特。

```
HANDLE thread = CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE)CreateAppThread, (LPVOID)NULL, 0, NULL); 
```

线程函数

```
 BOOL CreateAppThread()
    {       
        hStdout = GetStdHandle(STD_OUTPUT_HANDLE);
        hStdin = GetStdHandle(STD_INPUT_HANDLE);
        CHAR buffer [2048];
        DWORD bytes_read, bytes_written;
            while(ReadFile( hStdin, buffer, sizeof(buffer), &bytes_read, NULL))
            {   
                WriteFile(hStdout, buffer, sizeof(buffer), &bytes_written, NULL);
            }       
            return TRUE;    
    } 
```

# android - 如何在android中恢复活动时刷新先前的输入？

> ID：15810234
> 
> 赞同：1
> 
> 时间：2013-04-04T11:47:40.763
> 
> 标签：android, android-intent, android-activity

我有这个应用程序，当我在`editText`第一个活动中输入一些值时，即`ActivityA`然后按 a`Button`会在下一个活动中显示结果，即`ActivityB`。但是当我恢复`ActivityA`并更改一些值并按下按钮以便我想要`ActivityC`调用另一个值时，`ActivityB`只会出现。

但是如果我重新启动我的应用程序并输入获取所需的值，`ActivityC`我会得到它。我应该如何解决这个问题？

**编辑：** **活动A**

```
 package com.example.iolcalci;

import java.text.DecimalFormat;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.text.Editable;
import android.text.InputType;
import android.text.TextWatcher;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnFocusChangeListener;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.view.WindowManager;
import android.view.inputmethod.InputMethodManager;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.SpinnerAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class Selection extends Activity implements OnFocusChangeListener{
    private EditText k1_e,k2_e,al_e,alconst_e,dr_e;
    TextView k1_m,k2_m;
    private float k1,k2,al,al_const,dr,Avg_k,v_k1,v_k2,v_dr;
    private Float srkt_rnd,srk2_rnd,holladay_rnd,binkhorst_rnd,IOLPower_srkt,IOLPower_srk2,IOLPower_bink,IOLPower_holl;
    private float srkt_rf2,srkt_rf3,srkt_rf4,srkt_rf5,srkt_rf6,srkt_rf7,srkt_rf8,srkt_rf9,srkt_rf10,srkt_rf11,srkt_rf12;
    private float holladay_rf2,holladay_rf3,holladay_rf4,holladay_rf5,holladay_rf6,holladay_rf7,holladay_rf8,holladay_rf9,holladay_rf10,holladay_rf11,holladay_rf12;
    private float binkhorst_rf2,binkhorst_rf3,binkhorst_rf4,binkhorst_rf5,binkhorst_rf6,binkhorst_rf7,binkhorst_rf8,binkhorst_rf9,binkhorst_rf10,binkhorst_rf11,binkhorst_rf12; 
    private Spinner spin;
    private Button result;
    private int spinSelected=-1;
    int flag = 0;
    String k1_s,k2_s,al_s,al_const_s,dr_s;
    TextWatcher k1e,k2e,ale,dre;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.selective);
    setupUI(findViewById(R.id.form_layout));

        spin=(Spinner)findViewById(R.id.formulae);
        spin.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int pos,
                    long id) {
                // TODO Auto-generated method stub
                spinSelected=pos;

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
                spinSelected=-1;
            }
        });

        dr_e=(EditText)findViewById(R.id.dr_editText);
        k1_e=(EditText)findViewById(R.id.k1_editText);
        k2_e=(EditText)findViewById(R.id.K2_editText);
        al_e=(EditText)findViewById(R.id.al_editText);
        alconst_e=(EditText)findViewById(R.id.al_const_editText);
        k1_m=(TextView)findViewById(R.id.k1_metric);
        k2_m=(TextView)findViewById(R.id.k2_metric);

        dr_e.setText("0.0");

        dr_e.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                // TODO Auto-generated method stub
                dr_s=dr_e.getText().toString();
                v_dr=Float.valueOf(dr_s);

            }
        });

        al_e.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                // TODO Auto-generated method stub
                if(!hasFocus){
                    al_s = al_e.getText().toString();

                    int dotPos = -1;    

                    for (int i = 0; i < al_s.length(); i++) {
                        char c = al_s.charAt(i);
                        if (c == '.') {
                            dotPos = i;
                        }
                    }

                    if (dotPos == -1){
                        if(al_s.length()==0){
                            al_e.setText("0.00");
                        }else{
                            al_e.setText(al_s + ".00");
                        }
                    } else {
                        if ( al_s.length() - dotPos == 1 ) {
                            al_e.setText(al_s + "00");
                        } else if ( al_s.length() - dotPos == 2 ) {
                            al_e.setText(al_s + "0");
                        }
                    }
                }
            }
        });

        k1_e.setOnFocusChangeListener(new View.OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                // TODO Auto-generated method stub

                if(!hasFocus){
                    String k1_s = k1_e.getText().toString();

                    int dotPos = -1;    

                    for (int i = 0; i < k1_s.length(); i++) {
                        char c = k1_s.charAt(i);
                        if (c == '.') {
                            dotPos = i;
                        }
                    }

                    if (dotPos == -1){
                        if(k1_s.length()==0){
                            k1_e.setText("0.00");
                        }else{
                            k1_e.setText(k1_s + ".00");
                        }
                    } else {
                        if ( k1_s.length() - dotPos == 1 ) {
                            k1_e.setText(k1_s + "00");
                        } else if ( k1_s.length() - dotPos == 2 ) {
                            k1_e.setText(k1_s + "0");
                        }
                    }
                }
                k1_s=k1_e.getText().toString().trim();
                k1_e.setText(String.format(k1_s,"##.00"));
                if(k1_s.length()!=0){
                    k1=Float.parseFloat(k1_s);
                v_k1=Float.valueOf(k1);
                Log.v("K1",""+v_k1);
                if((v_k1>=(float)5.63)&&(v_k1<=(float)11.25)){
                    k1_m.setText("mm");
                    Log.v("CHECK1", "success1" +v_k1);
                }else if((v_k1>=(float)30)&&(v_k1<=(float)60)){
                    k1_m.setText("D");
                    Log.v("CHECK1", "success1" +v_k1);
                }else{

                }
                }

            }
        });

        k2_e.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                // TODO Auto-generated method stub

                if(!hasFocus){
                    String k2_s = k2_e.getText().toString();

                    int dotPos = -1;    

                    for (int i = 0; i < k2_s.length(); i++) {
                        char c = k2_s.charAt(i);
                        if (c == '.') {
                            dotPos = i;
                        }
                    }

                    if (dotPos == -1){
                        if(k2_s.length()==0){
                            k2_e.setText("0.00");
                        }else{
                            k2_e.setText(k2_s + ".00");
                        }
                    } else {
                        if ( k2_s.length() - dotPos == 1 ) {
                            k2_e.setText(k2_s + "00");
                        } else if ( k2_s.length() - dotPos == 2 ) {
                            k2_e.setText(k2_s + "0");
                        }
                    }
                }

                k2_s=k2_e.getText().toString().trim(); 
                if(k2_s.length()!=0){   
                    k2=Float.parseFloat(k2_s);
                v_k2=Float.valueOf(k2);
                Log.v("K2",""+v_k2);
                if((v_k2>=5.63)&&(v_k2<=11.25)){
                    k2_m.setText("mm");
                    Log.v("CHECK2", "success2" +v_k2);
                }else if((v_k2>=30)&&(v_k1<=60)){
                    k2_m.setText("D");
                    Log.v("CHECK2", "success2" +v_k2);
                }else{

                }
                }
            }
        });

        result=(Button)findViewById(R.id.result);
        result.setOnClickListener(new OnClickListener() {

            @SuppressLint("NewApi")
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                if(dr_e.getText().toString().length()==0|al_e.getText().toString().length()==0|alconst_e.getText().toString().length()==0){
                    flag=1;
                }else{

                dr=Float.parseFloat(dr_e.getText().toString());
                al=Float.parseFloat(al_e.getText().toString());
                al_const=Float.parseFloat(alconst_e.getText().toString());
                k1=Float.parseFloat(k1_e.getText().toString().trim());
                k2=Float.parseFloat(k2_e.getText().toString().trim());

                }

                if((v_k1>=(float)5.63)&&(v_k1<=(float)11.25)){
                    k1=Round((float)(337.5/v_k1),2);            
                }
                if((v_k2>=(float)5.63)&&(v_k2<=(float)11.25)){
                    k2=Round((float)(337.5/v_k2),2);            
                }

                Avg_k=(k1+k2)/2;
                if(spinSelected==0){
                IOLPower_srkt=Srkt();
                if(flag!=1){
                Intent iSrkt=new Intent(Selection.this,Srkt.class);
                iSrkt.putExtra("RESULT", IOLPower_srkt);
                iSrkt.putExtra("DR", dr);
                iSrkt.putExtra("IOL", srkt_rnd);
                iSrkt.putExtra("REFER7", srkt_rf7);
                iSrkt.putExtra("REFER2", srkt_rf2);
                iSrkt.putExtra("REFER3", srkt_rf3);
                iSrkt.putExtra("REFER4", srkt_rf4);
                iSrkt.putExtra("REFER5", srkt_rf5);
                iSrkt.putExtra("REFER6", srkt_rf6);
                iSrkt.putExtra("REFER8", srkt_rf8);
                iSrkt.putExtra("REFER9", srkt_rf9);
                iSrkt.putExtra("REFER10", srkt_rf10);
                iSrkt.putExtra("REFER11", srkt_rf11);
                iSrkt.putExtra("REFER12", srkt_rf12);
                startActivity(iSrkt);
                }else{
                    Intent iSrktx=new Intent(Selection.this,Srkt_x.class);
                    startActivity(iSrktx);

                }

            }else if(spinSelected==1){
                IOLPower_bink=Binkhorst();

                if(flag!=1){
                    Intent iBinkhorst=new Intent(Selection.this,Binkhorst.class);
                    iBinkhorst.putExtra("RESULT", IOLPower_bink);
                    iBinkhorst.putExtra("DR", dr);
                    iBinkhorst.putExtra("IOL", binkhorst_rnd);
                    iBinkhorst.putExtra("REFER7", binkhorst_rf7);
                    iBinkhorst.putExtra("REFER2", binkhorst_rf2);
                    iBinkhorst.putExtra("REFER3", binkhorst_rf3);
                    iBinkhorst.putExtra("REFER4", binkhorst_rf4);
                    iBinkhorst.putExtra("REFER5", binkhorst_rf5);
                    iBinkhorst.putExtra("REFER6", binkhorst_rf6);
                    iBinkhorst.putExtra("REFER8", binkhorst_rf8);
                    iBinkhorst.putExtra("REFER9", binkhorst_rf9);
                    iBinkhorst.putExtra("REFER10", binkhorst_rf10);
                    iBinkhorst.putExtra("REFER11", binkhorst_rf11);
                    iBinkhorst.putExtra("REFER12", binkhorst_rf12);
                    startActivity(iBinkhorst);
                }else{
                    Intent iBinkhorstx=new Intent(Selection.this,Binkhorst_x.class);
                    startActivity(iBinkhorstx);
                }

            }else if(spinSelected==2){
            IOLPower_srk2=Srk2();
            if((Math.ceil(IOLPower_srk2)-IOLPower_srk2)>0.5){
                srk2_rnd=(float) Math.floor(IOLPower_srk2);
            }else{
                srk2_rnd=(float) Math.ceil(IOLPower_srk2);
            }

            if(flag!=1){
                Intent iSrk2=new Intent(Selection.this,Srk2.class);
                iSrk2.putExtra("RESULT", IOLPower_srk2);
                iSrk2.putExtra("DR", dr);
                iSrk2.putExtra("IOL", srk2_rnd);
                startActivity(iSrk2);
            }else{
                Intent iSrk2x=new Intent(Selection.this,Srk2_x.class);
                startActivity(iSrk2x);

            }

            }else{
                IOLPower_holl=Holladay();

                if(flag!=1){
                    Intent iHolladay=new Intent(Selection.this,Holladay.class);
                    iHolladay.putExtra("RESULT", IOLPower_holl);
                    iHolladay.putExtra("DR", dr);
                    iHolladay.putExtra("IOL", holladay_rnd);
                    iHolladay.putExtra("REFER7", holladay_rf7);
                    iHolladay.putExtra("REFER2", holladay_rf2);
                    iHolladay.putExtra("REFER3", holladay_rf3);
                    iHolladay.putExtra("REFER4", holladay_rf4);
                    iHolladay.putExtra("REFER5", holladay_rf5);
                    iHolladay.putExtra("REFER6", holladay_rf6);
                    iHolladay.putExtra("REFER8", holladay_rf8);
                    iHolladay.putExtra("REFER9", holladay_rf9);
                    iHolladay.putExtra("REFER10", holladay_rf10);
                    iHolladay.putExtra("REFER11", holladay_rf11);
                    iHolladay.putExtra("REFER12", holladay_rf12);
                    startActivity(iHolladay);
                }else{
                    Intent iHolladayx=new Intent(Selection.this,Holladay_x.class);
                    startActivity(iHolladayx);
                }

            }
            }
            });
        Button reset=(Button) findViewById(R.id.reset);
        reset.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                dr_e.setText("0.0");
                al_e.setText("");
                k1_e.setText("");
                k2_e.setText("");
                alconst_e.setText("");
                dr_e.requestFocus();
            }
        });

}
    public static float Round(float Rval, int Rpl) {
          float p = (float)Math.pow(10,Rpl);
          Rval = Rval * p;
          float tmp = Math.round(Rval);
          return (float)tmp/p;
          }
    public float Srkt(){
         float Rcor;
         float Lcor;
         float Crwdest;
         float Corneal_H;
         float Acd_Const;
         float Offset;
         float Acd_Est;
         float Na=(float) 1.336;
         float C2=(float) 0.3333;
         float C3;
         float C4;
         float C5;
         float C6;
         float C8;
         float C9;
         float Iolam;

         float Rcor1=(float)(337.5/Avg_k);Rcor=Round(Rcor1,2);

            if(al<=24.2){
                Lcor=al;
            }else{
                Lcor=(float) (-3.446+1.716*al-0.0237*(al*al));
            }Lcor=Round(Lcor,2);
            Crwdest=(float) (-5.41+0.58412*Lcor+0.098*Avg_k);Crwdest=Round(Crwdest,2);
            Corneal_H=(float) (Rcor-(Math.sqrt(Rcor*Rcor-Crwdest*Crwdest/4)));Corneal_H=Round(Corneal_H,2);
            Acd_Const=(float) (0.62467*al_const-68.747);
            Offset=(float) (Acd_Const-3.336);Offset=Round(Offset,2);
            Acd_Est=(Corneal_H+Offset); float Acd_Est1=Round(Acd_Est,2);
            C3=(float) (0.97971*al+0.65696);C3=Round(C3,2);     
            C4=C3-Acd_Est1;C4=Round(C4,2);
            C5=(float) ((Na*Rcor)-(C2*Acd_Est)); C5=Round(C5, 2);
            C6=(float) ((Na*Rcor1)-(C2*C3));
            C8=(float) ((12*C6)+(C3*Rcor1));C8=Round(C8,2);
            C9=(float) ((12*C5)+(Acd_Est*Rcor1));C9=Round(C9,2);
            Iolam=(float) ((1336*(C6-(0.001*C8*dr)))/(C4*(C5-(0.001*dr*C9))));Iolam=Round(Iolam,2);
            if((Math.ceil(Iolam)-Iolam)>0.5){
                srkt_rnd=(float) Math.floor(Iolam);
            }else{
                srkt_rnd=(float) Math.ceil(Iolam);
            }
            srkt_rf7=(float) (((1336*C6)-(srkt_rnd*C4*C5))/((1.336*C8)-(0.001*srkt_rnd*C4*C9)));
            srkt_rf6=(float) (((1336*C6)-((srkt_rnd+0.5)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd+0.5)*C4*C9)));
            srkt_rf5=(float) (((1336*C6)-((srkt_rnd+1)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd+1)*C4*C9)));
            srkt_rf4=(float) (((1336*C6)-((srkt_rnd+1.5)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd+1.5)*C4*C9)));
            srkt_rf3=(float) (((1336*C6)-((srkt_rnd+2)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd+2)*C4*C9)));
            srkt_rf2=(float) (((1336*C6)-((srkt_rnd+2.5)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd+2.5)*C4*C9)));
            srkt_rf8=(float) (((1336*C6)-((srkt_rnd-0.5)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd-0.5)*C4*C9)));
            srkt_rf9=(float) (((1336*C6)-((srkt_rnd-1)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd-1)*C4*C9)));
            srkt_rf10=(float) (((1336*C6)-((srkt_rnd-1.5)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd-1.5)*C4*C9)));
            srkt_rf11=(float) (((1336*C6)-((srkt_rnd-2)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd-2)*C4*C9)));
            srkt_rf12=(float) (((1336*C6)-((srkt_rnd-2.5)*C4*C5))/((1.336*C8)-(0.001*(srkt_rnd-2.5)*C4*C9)));

        return(Iolam);
    }
    public float Binkhorst(){
        float K1;
        float LB2;
        float ACDbnk;
        float xb;
        float yb;
        float em;

        K1=(float)(337.5/Avg_k);
        LB2=(float) (al+0.1984);
        if(LB2>=26){
            ACDbnk=(float) (((0.58357*al_const)-63.896)*1.1087);
        }else{
            ACDbnk=(float) (((0.58357*al_const)-63.896)*LB2/23.45);
        }
        xb=(float) (1336*((1.336*K1-0.3333*LB2)-0.001*dr*(16.032*K1-4*LB2+LB2*K1)));
        yb=(float) ((LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk-0.001*dr*(16.032*K1-4*ACDbnk+ACDbnk*K1)));
        em=xb/yb;em=Round(em,2);
        if((Math.ceil(em)-em)>0.5){
            binkhorst_rnd=(float) Math.floor(em);
        }else{
            binkhorst_rnd=(float) Math.ceil(em);
        }
        binkhorst_rf7=(float) ((1336*((1.336*K1-0.3333*LB2))-binkhorst_rnd*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*binkhorst_rnd*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf6=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd+0.5)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd+0.5)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf5=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd+1)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd+1)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf4=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd+1.5)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd+1.5)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf3=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd+2)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd+2)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf2=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd+2.5)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd+2.5)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf8=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd-0.5)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd-0.5)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf9=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd-1)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd-1)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf10=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd-1.5)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd-1.5)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf11=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd-2)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd-2)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));
        binkhorst_rf12=(float) ((1336*((1.336*K1-0.3333*LB2))-(binkhorst_rnd-2.5)*(LB2-ACDbnk)*(1.336*K1-0.3333*ACDbnk))/(1.336*((16.032*K1)-(4*LB2)+(LB2*K1))-0.001*(binkhorst_rnd-2.5)*(LB2-ACDbnk)*((16.032*K1)-(4*ACDbnk)+(ACDbnk*K1))));

        return(em);
    }
    public float Srk2(){
        float X25 = 0;
        float Avg_k=(k1+k2)/2;
        if(al<20.0){
            X25=al_const+3;
        }else if((al>=20.0)&&(al<21.0)){
            X25=al_const+2;
        }else if((al>=21.0)&&(al<22.0)){
            X25=al_const+1;
        }else if((al>=22.0)&&(al<24.5)){
            X25=al_const;
        }else if(al>=24.5){
            X25=(float) (al_const-(0.5));
        }else{
            Toast.makeText(getApplicationContext(), "Please enter valid AL value", Toast.LENGTH_SHORT).show();
        }
        float SRK2 = (float) (X25-(0.9*Avg_k+2.5*al));
        return(SRK2);
    }
    public float Holladay(){
        float K;
        float Lhol;
        float SF;
        float Rag;
        float AGx;
        float AG;
        float ACDH;
        float CAhol;
        float xh;
        float yh;

        float K1=(float)(337.5/Avg_k);K=Round(K1,2);
        Lhol=(float) (al+0.2);
        SF=(float) ((0.5663*al_const)-65.6);
        if(K<7){
            Rag=7;
        }else{
            Rag=K;
        }
        AGx=(float) (al*0.533);
        if(AGx>13.5){
             AG=(float) 13.5;
        }else{
            AG=AGx;
        }
        ACDH=(float) (0.56+Rag-(Math.sqrt(Rag*Rag-AG*AG/4)));
        CAhol=ACDH+SF;
        xh=(float) (1336*((1.336*K1-0.3333*Lhol)-0.001*dr*(16.032*K1-4*Lhol+Lhol*K1)));
        yh=(float) ((Lhol-CAhol)*(1.336*K1-0.3333*CAhol-0.001*dr*(16.032*K1-4*CAhol+CAhol*K1)));
        float em=xh/yh;em=Round(em,2);
        if((Math.ceil(em)-em)>0.5){
            holladay_rnd=(float) Math.floor(em);
        }else{
            holladay_rnd=(float) Math.ceil(em);
        }

        holladay_rf7=(float) ((1336*((1.336*K1-0.3333*Lhol))-holladay_rnd*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*holladay_rnd*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf6=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd+0.5)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd+0.5)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf5=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd+1)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd+1)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf4=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd+1.5)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd+1.5)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf3=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd+2)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd+2)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf2=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd+2.5)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd+2.5)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf8=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd-0.5)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd-0.5)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf9=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd-1)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd-1)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf10=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd-1.5)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd-1.5)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf11=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd-2.0)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd-2)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));
        holladay_rf12=(float) ((1336*((1.336*K1-0.3333*Lhol))-(holladay_rnd-2.5)*(Lhol-CAhol)*(1.336*K1-0.3333*CAhol))/(1.336*((16.032*K1)-(4*Lhol)+(Lhol*K1))-0.001*(holladay_rnd-2.5)*(Lhol-CAhol)*((16.032*K1)-(4*CAhol)+(CAhol*K1))));

        return(em);
    }

    //when the back button is pressed from next activity
    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();

        dr_e.requestFocus();

    }
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        // TODO Auto-generated method stub

    }
    public static void hideSoftKeyboard(Activity activity) {
        InputMethodManager inputMethodManager = (InputMethodManager)  activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
        inputMethodManager.hideSoftInputFromWindow(activity.getCurrentFocus().getWindowToken(), 0);
    }
    public void setupUI(View view) {

        //Set up touch listener for non-text box views to hide keyboard.
        if(!(view instanceof EditText)) {

            view.setOnTouchListener(new OnTouchListener() {
                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    // TODO Auto-generated method stub
                    hideSoftKeyboard(Selection.this);
                    return false;
                }

            });
        }

        //If a layout container, iterate over children and seed recursion.
        if (view instanceof ViewGroup) {

            for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {

                View innerView = ((ViewGroup) view).getChildAt(i);

                setupUI(innerView);
            }
        }
    }

} 
```

* * *

**活动B**

```
 package com.example.iolcalci;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Srk2 extends Activity {
    private Float Result,dr,Srk2_rnd7,Srk2_rnd2,Srk2_rnd3,Srk2_rnd4,Srk2_rnd5,Srk2_rnd6,Srk2_rnd8,Srk2_rnd9,Srk2_rnd10,Srk2_rnd11,Srk2_rnd12;
    private Float Ref2,Ref3,Ref4,Ref5,Ref6,Ref7,Ref8,Ref9,Ref10,Ref11,Ref12;
    private float Rf;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_srk2);
        Thread srk2=new Thread(){
            public void run() { 

            TextView power=(TextView) findViewById(R.id.srk2_power);
            TextView name=(TextView) findViewById(R.id.iolpower);
            Result=getIntent().getExtras().getFloat("RESULT");
            dr=getIntent().getExtras().getFloat("DR");
            if(dr==0){
                name.setText("EM  :");
            }else{
                name.setText("AM  :");
            }
            Srk2_rnd7=getIntent().getExtras().getFloat("IOL");

            power.setText(String.valueOf(Result));

        //some more calculation

            }
            };
            srk2.start();
    }
    public float refraction(Float ans){
        Rf=refer();
        return((Result-ans)/Rf);
    }
    public float refer(){
        float Refer;
        if(Result>14){
            Refer=(float) 1.25;
        }else{
            Refer=1;
        }
        return(Refer);
    }

} 
```

* * *

**活动C**

```
 package com.example.iolcalci;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

@SuppressLint("NewApi")
public class Srk2_x extends Activity
{
    Float result;
      @SuppressLint("NewApi")
    protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_srk2_x);
          TextView text = (TextView) findViewById(R.id.srk2_power);
          text.setText("INVALID");

  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:49:44.130

正如我所看到的，`flag`价值是控制要开始的活动。我猜你应该`flag`在开始一个新活动时更改为默认值，或者在你的活动中覆盖[onPause](http://developer.android.com/reference/android/app/Activity.html#onPause%28%29)方法并在那里更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:55:20.993

通过维护访问过的activityQueue或者使用Activity stack来跟踪activity的顺序。

# ruby-on-rails - 康康：创造能力

> ID：15810236
> 
> 赞同：1
> 
> 时间：2013-04-04T11:47:44.757
> 
> 标签：ruby-on-rails, cancan

我有以下代码：

```
#/app/models/users/user.rb
class Users::User < ActiveRecord::Base
  has_many :phones, class_name: "Users::Phone"
end

#/app/models/users/phone.rb
class Users::Phone < ActiveRecord::Base
  belongs_to :user, class_name: "Users::User"
  attr_accessible :phone
end

#/app/models/ability.rb
class Ability
  include CanCan::Ability

  def initialize(user)

    can :read, :all

    unless user.nil? #logged_in
      if user.is? :admin
        can :manage, :all
      else
        can :create, Users::Phone, user_id: user.id
      end
    end

  end
end 
```

我想检查只为用户创建自己的手机的能力

```
#/app/views/users/users/show.html.slim
- if can? :create, Users::Phone.new
  a[href="#{new_user_phone_path(@user)}"] Add phone 
```

那是行不通的，因为我应该将 user_id 传递给电话型号（如`Users::Phone.new user_id: user.id`），但由于电话的批量分配，我不能这样做。

那么如何检查`:create`用户的手机功能呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T13:35:40.883

`Ability`通过了解底层参数结构，我在我的应用程序中做了类似的事情。根据您的要求，您有几个选项。因此，在您的控制器中，您大约有：

```
def create
  @phone = Users::Phone.new(params[:users_phone])

  # Optional - this just forces the current user to only make phones 
  # for themselves.  If you want to let users make phones for 
  # *certain* others, omit this.
  @phone.user = current_user

  authorize! :create, @phone
  ...
end 
```

然后在你的ability.rb中：

```
unless user.nil? #logged_in
  if user.is? :admin
    can :manage, :all
  else
    can :create, Users::Phone do |phone|
      # This again forces the user to only make phones for themselves.
      # If you had group-membership logic, it would go here.
      if phone.user == user
        true
      else
        false
      end
    end
  end
end 
```

# android - Android - Facebook sdk 3 登录

> ID：15810244
> 
> 赞同：1
> 
> 时间：2013-04-04T11:48:22.237
> 
> 标签：android, facebook, login, sdk

我完全遵循了最低代码指南：[https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

但它不起作用。应用程序运行正常，打开对话框登录，但在我按确定按钮（或填写字段登录名和密码）访问公共配置文件后，没有出现 Hello 'username'，模拟器和智能手机。我尝试使用片段，并且发生了同样的情况：/

# javascript - 如果我们有 2 个同名的函数声明，将调用哪个以及如何调用 javascript 函数？

> ID：15810249
> 
> 赞同：3
> 
> 时间：2013-04-04T11:48:29.567
> 
> 标签：javascript, function, ecmascript-5, hoisting

做一个测试：

```
<script>
    function say() { alert( "ABOVE" ); }

    say();

    function say() { alert( "BELOW" ); }
</script> 
```

*   所有测试（Chrome、Firefox、IE）的结果都是“低于”。
*   在这种情况下，javascript 解释器如何工作？
*   [http://jsfiddle.net/jcv6l/](http://jsfiddle.net/jcv6l/) << 运行代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:52:26.917

基本上，由于提升，将所有函数声明拉到当前范围的顶部，解释器基本上是这样做的：

```
function say() { alert( "ABOVE" ); }
function say() { alert( "BELOW" ); }
say(); 
```

这就是为什么它总是以警报告终`below`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:54:47.940

解释器首先读取函数的所有声明，然后执行函数外部的其他语句。所以后者的声明覆盖了前者，这就是后者被调用的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:55:22.237

在这种情况下，解释器首先解析函数定义，最后一个函数定义获胜。

这个问题也得到了回答：[Javascript中的模糊函数声明](https://stackoverflow.com/questions/2072685/ambiguous-function-declaration-in-javascript)

这里也有一篇不错的文章：http: [//kangax.github.com/nfe/](http://kangax.github.com/nfe/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T11:57:24.950

```
(function () {

// even though not declared yet, every 'inner' function will be hoisted,
// and be available to the entire function
sing();

// variables are dealt with after functions, so say will be a string
// the order of declaration suggests this to be the case, but that isn't what matters
function say () { }

var say = "say";

// variables are dealt with after functions, so shout will be a string
// even though the order suggests shout should be a function
var shout = "shout";

function shout() { }

// both are functions, the latter one 'wins'
function sing() { console.log("sing1"); }

function sing() { console.log("sing2"); }

console.log(typeof say, typeof shout);

sing();

}()) 
```

输出：

```
sing2
string string
sing2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T11:52:00.043

这是因为后一个函数覆盖了前一个函数。如果您尝试记录该功能：

```
console.log(say); 
```

它只会返回：

```
function say() { alert( "BELOW" ); } 
```

“上方”警报已替换为“下方”警报。类似于在同一范围内两次声明具有相同名称的变量 - 后者将覆盖前者。

[JSFiddle 示例](http://jsfiddle.net/79vZf/)。

为什么？请参阅[http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html](http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T11:58:36.483

`function xyz() { .. }`块是在解析时定义的。如果许多函数具有相同的名称，则它是最后定义的优先。

* * *

但是，您可以在运行时使用 statements 定义函数：

```
var say = function() { alert( "ABOVE" ); }
say(); 
say = function() { alert( "BELOW" ); } 
```

将输出`ABOVE`. ( [JSFiddle](http://jsfiddle.net/p4zvA/) )

# ios - 在 IOS5 中工作但在 IOS 6 中崩溃

> ID：15810253
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:48:41.700
> 
> 标签：ios

我正在向我的 iOS 应用程序添加共享功能（我必须支持到 iOS 5.0

以下代码是打标签它在 IOS5 中正常工作但在 IOS 6 中崩溃

**在CGContextStrokePath(c)**处崩溃；

 **```
CFIndex lineIndex = 0;
for (id line in lines) {        
    CGFloat ascent = 0.0f, descent = 0.0f, leading = 0.0f;
    CGFloat width = CTLineGetTypographicBounds((__bridge CTLineRef)line, &ascent, &descent, &leading) ;
    CGRect lineBounds = CGRectMake(0.0f, 0.0f, width, ascent + descent + leading) ;
    lineBounds.origin.x = origins[lineIndex].x;
    lineBounds.origin.y = origins[lineIndex].y;

    for (id glyphRun in (__bridge NSArray *)CTLineGetGlyphRuns((__bridge CTLineRef)line)) {
        NSDictionary *attributes = (__bridge NSDictionary *)CTRunGetAttributes((__bridge CTRunRef) glyphRun);
        BOOL strikeOut = [[attributes objectForKey:kTTTStrikeOutAttributeName] boolValue];
        NSInteger superscriptStyle = [[attributes objectForKey:(id)kCTSuperscriptAttributeName] integerValue];

        if (strikeOut) {
            CGRect runBounds = CGRectZero;
            CGFloat runAscent = 0.0f;
            CGFloat runDescent = 0.0f;

            runBounds.size.width = CTRunGetTypographicBounds((__bridge CTRunRef)glyphRun, CFRangeMake(0, 0), &runAscent, &runDescent, NULL);
            runBounds.size.height = runAscent + runDescent;

            CGFloat xOffset = CTLineGetOffsetForStringIndex((__bridge CTLineRef)line, CTRunGetStringRange((__bridge CTRunRef)glyphRun).location, NULL);
            runBounds.origin.x = origins[lineIndex].x + rect.origin.x + xOffset;
            runBounds.origin.y = origins[lineIndex].y + rect.origin.y;
            runBounds.origin.y -= runDescent;

            // Don't draw strikeout too far to the right
            if (CGRectGetWidth(runBounds) > CGRectGetWidth(lineBounds)) {
                runBounds.size.width = CGRectGetWidth(lineBounds);
            }

            switch (superscriptStyle) {
                case 1:
                    runBounds.origin.y -= runAscent * 0.47f;
                    break;
                case -1:
                    runBounds.origin.y += runAscent * 0.25f;
                    break;
                default:
                    break;
            }

            // Use text color, or default to black
            id color = [attributes objectForKey:(id)kCTForegroundColorAttributeName];

            if (color) {
                CGContextSetStrokeColorWithColor(c, (__bridge CGColorRef)color);
            } else {
                CGContextSetGrayStrokeColor(c, 0.0f, 1.0);
            }

            CTFontRef font = CTFontCreateWithName((__bridge CFStringRef)self.font.fontName, self.font.pointSize, NULL);
            CGContextSetLineWidth(c, CTFontGetUnderlineThickness(font));
            CGFloat y = roundf(runBounds.origin.y + runBounds.size.height / 2.0f);
            CGContextMoveToPoint(c, runBounds.origin.x, y);
            CGContextAddLineToPoint(c, runBounds.origin.x + runBounds.size.width, y);

            CGContextStrokePath(c);
        }
    }

    lineIndex++;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:09:41.963

它是[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel/)的错误，请查看[此问题](https://github.com/mattt/TTTAttributedLabel/issues/201)

希望有人可以解决这个问题，你会得到解决方案。在那里小心，直到你得到解决方案。**

# c - 警告：不兼容的指针类型

> ID：15810255
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:48:51.653
> 
> 标签：c, xml

在我之前的[问题之后：](https://stackoverflow.com/questions/15796223/error-conflicting-types)

现在我有这个：

```
xml_list *text1(xml_list *);
xml_list *text(xml_list *);

//operation: text1(elem)
xml_list *text1(xml_list *elem){
  if(isText(elem)){
    return Cons(elem,Nil());
  }
  else{
    return text(childeren(elem));
  }
}

//operation: text(elem)
xml_list *text(xml_list *elem){
  if(isEmpty(elem)){
    return Nil();
  }
  return append(text1(head(elem)),text(tail(elem)));
} 
```

当我运行它时，我收到 xml_list *text1 的警告：

```
incompatible pointer types passing 'xml_list *' (aka 'struct xml_list_struct *') to parameter of type 'xml *' (aka 'struct xml_struct *') [-Wincompatible-pointer-types]
 if(isText(elem)){ 
```

下一行还有这个警告：

```
warning: incompatible pointer types passing 'xml_list *' (aka 'struct xml_list_struct *') to parameter of type 'xml *' (aka 'struct xml_struct *') [-Wincompatible-pointer-types]
 return Cons(elem,Nil()); 
```

再次警告：

```
 warning: incompatible pointer types passing 'xml_list *' (aka 'struct xml_list_struct *') to parameter of type 'xml *' (aka 'struct xml_struct *') [-Wincompatible-pointer-types]
 return text(children(elem)); 
```

我怎样才能让这些警告消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:08:58.963

该错误是不言自明的：

您的`isText`,`Cons`和`children`方法期望`xml*`（指向 an 的指针`xml_struct`）。您正在传递一个`xml_list*`（指向一个的指针`xml_list_struct`）。

您可以通过传递正确的指针 ( `xml*`) 或修复方法以接受您拥有的指针 ( `xml_list*`)来消除警告

# php - 在 php 中创建嵌套的 JSON 对象？

> ID：15810257
> 
> 赞同：24
> 
> 时间：2013-04-04T11:49:09.780
> 
> 标签：php, json

我不经常使用 php，而且我对对象创建有点模糊。我需要发出一个发送 json 的网络服务请求，我想我已经涵盖了这部分。在我提交数据之前，我需要创建一个嵌套对象。根据我对基于 ecma 的脚本语言的经验，我假设这将是微不足道的，但我发现语法难以导航。我要创建的对象如下。

```
{ "client": {
    "build": "1.0",
    "name": "xxxxxx",
    "version": "1.0"
    },
    "protocolVersion": 4,
    "data": {
        "distributorId": "xxxx",
        "distributorPin": "xxxx",
        "locale": "en-US"
    }
} 
```

我见过很多平面对象的例子，但我还没有找到嵌套对象的最小例子。上面对象的 php 语法是什么？这是在php中做的不寻常的事情吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-04T11:53:43.620

这个 JSON 结构可以通过以下 PHP 代码创建

```
$json = json_encode(array(
     "client" => array(
        "build" => "1.0",
        "name" => "xxxxxx",
        "version" => "1.0"
     ),
     "protocolVersion" => 4,
     "data" => array(
        "distributorId" => "xxxx",
        "distributorPin" => "xxxx",
        "locale" => "en-US"
     )
)); 
```

见[json_encode](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-05-04T22:53:12.473

嘿，这里是手动将复杂 JSON 转换为 PHP 对象的快速技巧。

获取 JSON 示例：

```
{ "client": {
    "build": "1.0",
    "name": "xxxxxx",
    "version": "1.0"
    },
    "protocolVersion": 4,
    "data": {
        "distributorId": "xxxx",
        "distributorPin": "xxxx",
        "locale": "en-US"
    }
} 
```

搜索替换 `{`为`array(`

搜索替换 `:`为`=>`

搜索替换 `}`为`)`

完毕。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-04T11:52:32.183

用户数组获取正确的格式，然后调用 echo json_encode(array)

```
 array( "client" => array(
    "build" => "1.0",
    "name" => "xxxxxx",
    "version" => "1.0"
 ),
 "protocolVersion" => 4,
 "data" => array(
    "distributorId" => "xxxx",
    "distributorPin" => "xxxx",
    "locale" => "en-US"
 )) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-04T11:53:00.173

```
$client = new Client();
$client->information = new Information();
$client->information->build = '1.0';
$client->information->name = 'xxxxxx';
$client->information->version = '1.0';
$client->protocolVersion = 4;
$client->data = new Data();
$client->data->distributorId = "xxxx";
$client->data->distributorPin = "xxxx";
$client->data->locale = "en-US"; 
```

也许像上面的东西？客户端将持有两个对象。信息和数据。

***使用 json_encode编辑*** ，您将在 PHP 中将此对象创建为数组。

```
$clientObj = array('client'=> 
    array( array('build'=>'1.0','name'=>'xxxx', 'version'=>'1.0'), 

           'protocolVersion'=>4, 

           'data'=>array('distributorId' => 'xxxx', 'distributorPin' => 'xxxx', 'locale' => 'en-US')
);

print json_encode($clientObj); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-20T10:58:45.920

我们也可以构造嵌套数组，然后做一个 json_encode 来构造嵌套的 JSON。

例如：

```
{"User":
       {"username":"test",
        "address":"Posted value fro address field",
        "location":{
                     "id":12345
                    }
        }
} 
```

上面的输出我们可以通过编写下面的 php 代码来实现：

```
<?php
$obj = array(
            'username'=>$lv_username,
            'address'=>$lv_address,
            'location'=>array('id'=>$lv_locationId)
    );
$data = '{"User":'. json_encode($obj) .'}';
echo $data;

?> 
```

希望能帮助到你。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T11:53:30.127

使用 PHP 的 in build 函数：

[json_encode();](http://php.net/manual/en/function.json-encode.php)

这会将数组转换为 JSON 对象。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-04T11:56:39.170

您可以使用 json_encode 对 php 数组进行编码 [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

```
$theArray = array('client'= array('build'=>'1.0', 
                                'name'=>'xxxxx', 
                                'version'=>'1.0'
                               ), 
                'protocolVersion'=> 4, 
                'data'=> array('distributorId'=>'xxxx', 
                               'distributorPin'=>'xxxx', 
                               'locale'=>'en-US' 
                               ) 
                );

$theObj = json_encode($theArray); 
```

希望这会有所帮助..

发布它，然后已经看到了很多答案！:|

# iphone - 在 UITextview ios5 中的行之间添加空格

> ID：15810263
> 
> 赞同：1
> 
> 时间：2013-04-04T11:49:29.863
> 
> 标签：iphone, uitextview

我正在努力增加行之间的空间。如果有人告诉需要做什么，那将非常有帮助。

使用**NSMutableParagraphStyle**可以解决此问题，但部署目标是 ios5。因此不支持 NSMutableParagraphStyle。

**字号：18行距30**

代码：

CustomNote.h

```
@interface CustomNote : UITextView<UIScrollViewDelegate,
    UITextViewDelegate>{ } @end 
```

CustomNote.m

@implementation CustomNote

```
-(id)initWithFrame:(CGRect)frame
    {
        self = [super initWithFrame:frame];
        if (self) {
            // Initialization code
            self.delegate = self;
        }
        return self;
    }

-(void)drawRect:(CGRect)rect {

  CGContextRef context = UIGraphicsGetCurrentContext();

  CGContextSetStrokeColorWithColor(context, [UIColor colorWithRed:0.0f green:0.0f blue:0.0f alpha:0.2f].CGColor);

  CGContextSetLineWidth(context, 1.0f);

  CGContextBeginPath(context);

 //NSUInteger numberOfLines = (self.contentSize.height + self.bounds.size.height) / self.font.leading;

  NSUInteger numberOfLines = (self.contentSize.height + self.bounds.size.height) / KLineGap;

  CGFloat baselineOffset = 6.0f;

   for (NSUInteger x = 1; x < numberOfLines; x++) {

                //0.5f offset lines up line with pixel boundary
  CGContextMoveToPoint(context, self.bounds.origin.x+10, KLineGap *x + 0.5f + baselineOffset);
  CGContextAddLineToPoint(context, self.bounds.size.width-10, KLineGap *x + 0.5f + baselineOffset);
            }

  CGContextClosePath(context);
  CGContextStrokePath(context);
        } 
```

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/ZKeg1.png)

# c# - 数据模板绑定wp7

> ID：15810264
> 
> 赞同：0
> 
> 时间：2013-04-04T11:49:30.063
> 
> 标签：c#, windows-phone-7, xaml, datatemplate

i'v a `list box`，其中包含一个`listboxitem`& 这`listboxitem`包含 a `wrap panel`，我想在其中添加`grids`（包含用户个人资料图片和名称），以便我创建一个`datatemplate`--->

```
<DataTemplate x:Key="UserGridListTemplate">
            <Grid Height="140" Width="155">
                <Grid.Background>   
                      <ImageBrush ImageSource="{Binding UPicPath}" Stretch="Fill"/>
                </Grid.Background>
                <TextBlock VerticalAlignment="Bottom" HorizontalAlignment="Left" Text="{Binding UName}" Foreground="Black" FontSize="27" OpacityMask="#7C000000" />
            </Grid>
        </DataTemplate> 
```

我想在 c# 中动态分配数据（图像源和 texblock 值），那么我如何在代码中访问这个`datatemplate`和他的子控件（`image`& `textblock`），以及如何将这个`datatemplate`添加到那个`listboxitem`，

对于生成 xaml 的想法会是什么样子--->

```
<Grid Grid.RowSpan="5" Width="334" Grid.ColumnSpan="2" Margin="134,80,-12,20">
                        <ListBox>
                            <ListBoxItem>
                                <toolkit:WrapPanel HorizontalAlignment="Left" VerticalAlignment="Top">

                          //   -->UserGridListTemplate instance 1 with some data assigned
                          //   -->UserGridListTemplate instance 1 with some data assigned
                          //   -->UserGridListTemplate instance 1 with some data assigned
                             and so on................ 

                                </toolkit:WrapPanel>
                            </ListBoxItem>
                        </ListBox>
                    </Grid> 
```

看起来像上面的东西

# c# - Lambda 表达式：包含列表的 Where 子句

> ID：15810265
> 
> 赞同：6
> 
> 时间：2013-04-04T11:49:39.963
> 
> 标签：c#, linq, lambda

所以我得到了这样的东西：

```
var myObj = db.SomeObject
              .Include("Tasks")
              .SingleOrDefault(x => x.Id == someObjectId);

if (myObj != null)
{
    myObj.Tasks = myObj.Tasks.OrderBy(x => x.Number).ToList();
} 
```

在这里，我希望能够`where`在我的 Include 上添加一个条件 ()，例如： `.where task.IsDeleted == false`

到目前为止，我还没有找到解决方案。

我知道我可以将`where`与我订购任务的位置一起使用，但是这不会在数据库上运行，而是使用内存。我希望它在数据库上运行。

这里有人知道我该怎么做吗？如果是这样，是否还有办法将`order by`条件放入包含的任务列表中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:10:50.983

像这样的东西，返回你的原始对象，它的子集合被过滤和排序。

```
SomeObject a = db.SomeObjects.Where(x => x.Id == someobjectid)
                      .Select(
                          x =>
                          new
                              {
                                  someObject = x,
                                  task = x.Tasks.Where(task => task.IsDeleted == false)
                                                .OrderBy(task => whatever)
                              })
                      .Select(x => x.someObject).Single(); 
```

它实际上丢失了最后一次选择中的活动集合，因此您可以这样做：

```
SomeObject a = db.SomeObjects.Where(x => x.Id == someobjectid)
                      .Select(
                          x =>
                          new
                              {
                                  someObject = x,
                                  task = x.Tasks.Where(task => task.IsDeleted == false)
                                                .OrderBy(task => whatever)
                              });
 return a.FirstOrDefault().someObject; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T11:58:04.037

要做到这一点是 EF，您需要使用`Select`子句指定投影。

像这样的东西只会从数据库中获得你想要的数据：

```
var anonymous = db.SomeObject.Where( x => x.Id == someObjectId )
  .Select( x => new
    {
      SomeObject = x,
      Tasks = x.Tasks
        .Where( o => !o.IsDeleted )
        .OrderBy( o => ... )
    }
  )
  .SingleOrDefault()
; 
```

你最终会得到一个匿名类型的实例，但你可以很容易地在客户端上修复它：

```
MyObject myObject = anonymous.SomeObject;
myObject.Tasks = anonymous.Tasks; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T11:51:55.560

简单的答案是：你不能那样做。

为什么？因为你查询`SomeObject`.
每个返回的数据都`SomeObject`包含所有引用的数据，因为如果不这样做，它就不会代表数据库中的实际对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T11:57:23.643

分别获得它们怎么样：

```
var myObj = db.SomeObject
              .SingleOrDefault(x => x.Id == someObjectId);

var tasks = db.SomeObject
              .Where(x => x.Id == someObjectId)
              .SelectMany(x => x.Tasks)
              .Where(x => !x.Deleted); 
```

# dart - Future/Completer 只能调用一次？

> ID：15810267
> 
> 赞同：3
> 
> 时间：2013-04-04T11:49:46.683
> 
> 标签：dart

请考虑以下代码：

```
import 'dart:async';

abstract class ClassAbstract
{
   Completer<String> _onEvent1;
   Completer<int> _onEvent2;

   ClassAbstract()
   {
     _onEvent1 = new Completer<String>();
     _onEvent2 = new Completer<int>();
   }

   Future get Event1
   {
      return _onEvent1.future; 
   }

   Future get Event2
   {
      return _onEvent2.future;
   }
}

class NormalClass extends ClassAbstract
{
   NormalClass(): super()
   {
     _onEvent1.complete("Event1 rise");
     for (int iCounter = 0; iCounter < 100; iCounter++)
     {
       _onEvent2.complete(iCounter);
     }
  }
}

void main() {

  NormalClass normalClass = new NormalClass();

  normalClass.Event1.then( (val) { print("Event1 rised"); } );
  normalClass.Event2.then( (val) { print("Event2 rised: $val"); } );

  print("Application close");
} 
```

正如您所看到的，这是非常简单的代码，其中定义了 1 个`abstract`类和 2个类`Futures`，这些 2 的 getter `Futures`。另一个实现此类`abstract`并调用`Features`.NET 事件系统的类。

问题是每当我运行此代码时，它都会因错误而失败，并`for(int iCounter....)` 与 error: 一致`Future already complete`。

这是否意味着我只能`complete`Future 一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:32:51.667

那是对的。Futures 是为一次性异步调用而设计的。基本上，未来只能提供一个价值。如果您希望提供多个值，那么您将需要使用[Stream](http://api.dartlang.org/dart_async/Stream.html)。使用[StreamController](http://api.dartlang.org/dart_async/StreamController.html)您可以轻松添加多个值，然后可以订阅这些值。

所以你的样本看起来像这样：

```
import 'dart:async';

abstract class ClassAbstract
{
   StreamController<String> _onEvent1;
   StreamController<int> _onEvent2;

   ClassAbstract()
   {
     _onEvent1 = new StreamController<String>();
     _onEvent2 = new StreamContorller<int>();
   }

   Future get Event1
   {
      return _onEvent1.stream; 
   }

   Future get Event2
   {
      return _onEvent2.stream;
   }
}

class NormalClass extends ClassAbstract
{
   NormalClass(): super()
   {
     _onEvent1.add("Event1 rise");
     for (int iCounter = 0; iCounter < 100; iCounter++)
     {
       _onEvent2.add(iCounter);
     }
  }
} 
```

可以这样称呼：

```
main() {
  var sum = 0;
  var thing = new NormalClass();
  thing.Event1.listen((myStr) => print(myStr));
  thing.Event2.listen((val) { 
    sum += val;
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:21:57.780

就是这样。如果要触发多个值，则必须处理[Stream](http://api.dartlang.org/docs/releases/latest/dart_async/Stream.html)和[StreamController](http://api.dartlang.org/docs/releases/latest/dart_async/StreamController.html)。有关更多信息，请参阅[引入新的 Streams API](http://news.dartlang.org/2012/11/introducing-new-streams-api.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:21:24.067

是的，Completer 只能完成 Future 一次，这对我来说似乎是最明显的。Future 基本上是（读取“一个”）异步操作的令牌。它要么成功，要么失败。

在您的情况下，您正在寻找的是一种观察者模式，其中有一个调度事件的源和一个侦听源上的事件的侦听器。在这种情况下，源可以多次分派相同的事件。

编辑：我正要添加一些指向 Streams API 的链接，但 Alexandre 打败了我。查看[API 文档](http://api.dartlang.org/docs/releases/latest/dart_async/Stream.html)以获取更多信息。

# asp.net-mvc - MVC 简单会员网站管理工具

> ID：15810268
> 
> 赞同：1
> 
> 时间：2013-04-04T11:49:50.777
> 
> 标签：asp.net-mvc, security, simplemembership, user-roles

我一定是在某个地方错过了这个（或在课堂上睡过觉）……在使用新的简单安全版本时，用于管理用户和角色的标准 ASP 安全工具似乎不存在。也就是说，原来的存在并且工作，只是指向传统的 ASP 安全......而不是新的“简单”系统。

在我的项目中，我可以登录，我可以查看 pages_ 表，但在我的项目中找不到访问它们的方法......我很乐意管理角色并获取 USERID 可能还有 ROLEID，这样我就可以将用户绑定到我项目中的其他功能。

我浏览了数百篇文章和文章......通常我发现我缺少一些小的配置条目或其他东西，但这次我有点卡住了。

建议表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:23:27.190

SimpleMembership 不适用于网站管理工具 (WSAT)。此博客中对 SimpleMembership有很好的[概述](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx)。这是它的引述。

> WSAT 是为与 ASP.NET Membership 一起工作而构建的，并且与 Simple Membership 不兼容。那里有两个主要选项：
> 
> 1.  使用 WebSecurity 和 OAuthWebSecurity API 来管理用户和角色。
> 2.  使用上述 API 创建 Web 管理员。
> 3.  由于 SimpleMembership 在您的数据库之上运行，您可以像更新任何其他数据一样更新您的用户 - 通过 EF 甚至直接数据库编辑（当然在开发中）

我还要补充一点，您可以在应用程序启动时播种这些信息，例如可用的角色，如[本文所示](http://kevin-junghans.blogspot.com/2013/01/seeding-customizing-aspnet-mvc.html)。

# c# - C#：未从 GSM 设备接收

> ID：15810269
> 
> 赞同：0
> 
> 时间：2013-04-04T11:49:52.420
> 
> 标签：c#, serial-port, gsm, gprs

我编写了一个小程序来使用 GSM 设备读取/发送 SMS 消息。我的代码在一种设备上运行良好。今天我正在使用不同的设备，我的程序无法从它接收（尽管它可以发送给它就好了）。该设备在 puTTY 下使用相同的配置工作得很好。

```
 private void Form1_Load(object sender, EventArgs e)
    {
        Variables.sp.PortName = "COM1";
        Variables.sp.BaudRate = 9600;
        Variables.sp.DataBits = 8;
        Variables.sp.Parity = Parity.None;
        Variables.sp.StopBits = StopBits.One;
        Variables.sp.DataReceived += new SerialDataReceivedEventHandler(DataReceivedHandler);

        try
        {
            Variables.sp.Open();
            Variables.sp.WriteLine("AT\r");
            //Variables.sp.WriteLine("AT+CMGF=1\r");
        }
        catch
        {
            MessageBox.Show("Can't open COM1\. Quit and try again.");
        }
    }

    private static void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e)
    {
        SerialPort sp = (SerialPort)sender;
        string indata = sp.ReadExisting();

        MessageBox.Show(indata);
    } 
```

知道为什么它可以在一台设备上正常工作而不是另一台设备吗？当我在 puTTY 下输入相同的命令并且它们的工作方式相同时？

# sql - 通过从总数中减去另一个值来选择值

> ID：15810271
> 
> 赞同：0
> 
> 时间：2013-04-04T11:49:52.963
> 
> 标签：sql

我正在做简单的**mysql**数据库，如果我不擅长提出这个问题，我很抱歉。

我被要求通过从总质量中减去另一个值来创建一个选择语句来查找表中的一个值。

我有一张名为 FA 的表：

```
14:0 200
16:0 400
18:0 600 
```

所以如果我有一个`800`我想`18:0`通过减法找到的总质量`14:0 (200)`。我如何使用 select 语句来做到这一点？

希望各位大神帮忙。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:59:29.553

根据我从您的问题中收集到的信息：

```
SELECT ID FROM FA WHERE MASS = 800 - (SELECT MASS FROM FA WHERE ID = '14:0') 
```

# linq - List Find ,Hashset 或 Linq 哪个更好在列表中

> ID：15810273
> 
> 赞同：0
> 
> 时间：2013-04-04T11:49:58.423
> 
> 标签：linq, list, c#-3.0

我有一个字符串列表，我想在其中找到特定值并返回。如果我只想搜索，我可以使用 Hashset 而不是列表

```
 HashSet<string> data = new HashSet<string>();    
 bool contains = data.Contains("lokendra"); // 
```

但是对于我正在使用的列表，`Find`因为我也想从列表中返回值。我发现这种方法很耗时。此代码所在的方法是`hit more than 1000 times`，列表的大小是`20000 to 25000`appx。这种方法需要时间。有没有其他方法可以使搜索更快。

```
List<Employee> employeeData= new List<Employee>();
var  result = employeeData.Find(element=>element.name=="lokendra") 
```

我们是否有任何 linq 或任何其他方法可以更快地从搜索中检索数据。请帮忙。

```
 public struct Employee
    {
        public string role;
        public string id;
        public int salary;
        public string name;  
        public string address;          
    } 
```

我有这个结构的列表，如果名称属性与值“lokendra”匹配。那么我想重新运行整个对象。考虑将列表作为员工数据。

我想知道我们使用 Hashset 获得更快搜索的方式，无论如何，我们可以搜索数据并快​​速返回，而不是 find。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:58:37.250

听起来你*真正*想要的是一个`Dictionary<string, Employee>`. 构建一次，您可以多次有效地查询它。您可以轻松地从员工列表中构建它：

```
var employeesByName = employees.ToDictionary(e => e.Name);
...

var employee;
if (employeesByName.TryGetValue(name, out employee))
{
    // Yay, found the employee
}
else
{
    // Nope, no employee with that name
} 
```

编辑：现在我看到了你的编辑......*请*不要创建`struct`这样的类型。您几乎可以肯定想要一个`class`代替，一个具有属性而不是公共字段的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:53:25.200

您可以尝试使用`employeeData.FirstOrDefault(e => e == "lokendra")`，但它仍然需要遍历集合，因此会有性能列表`Find`方法。

如果您的列表内容仅设置一次，然后您一次又一次地搜索它，您应该考虑实施您自己的解决方案：

*   首次搜索前排序列表
*   使用二分搜索（对于标准和，这将是*O(log n)*而不是*O(n)*）`Find``Where`

# python - Twitter REST API 1.1 的问题 - App Auth only response 403 Error with Python

> ID：15810277
> 
> 赞同：3
> 
> 时间：2013-04-04T11:50:09.360
> 
> 标签：python, twitter, urllib2

[正如文档所说](https://dev.twitter.com/docs/auth/application-only-auth)，我正在尝试通过 POST 请求连接到 twiiter API，但我总是收到 403 禁止错误。

这是我的代码。我在 python 2.7 中使用 urlib2：

```
def auth_API():
    url = 'https://api.twitter.com/oauth2/token'
    header = {}
    values = {}
    header['User-Agent'] = 'Mozilla/6.0 (Windows NT 6.2; WOW64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1'
    header['Authorization'] = 'Basic ' + B64BEARERTOKENCREDS
    header['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8'
    header['Accept-Encoding'] = 'gzip'
    values['grant_type'] = 'client_credentials'

    data = urllib.urlencode(values)
    req = urllib2.Request(url, data, header)
    try:
        response = urllib2.urlopen(req)
        response.read()
    except urllib2.HTTPError as e:
        print e 
```

检查文档我发现一个示例请求与我的相同：

推特示例：

```
POST /oauth2/token HTTP/1.1
Host: api.twitter.com
User-Agent: My Twitter App v1.0.23
Authorization: Basic NnB1[...]9JM29jYTNFOA==
Content-Type: application/x-www-form-urlencoded;charset=UTF-8
Content-Length: 29
Accept-Encoding: gzip

grant_type=client_credentials 
```

我的请求：

```
POST /oauth2/token HTTP/1.1
Content-Length: 29
Accept-Encoding: gzip
Connection: close
User-Agent: Mozilla/6.0 (Windows NT 6.2; WOW64; rv:16.0.1) Gecko/20121011 Firefox/16.0.1
Host: api.twitter.com
Content-Type: application/x-www-form-urlencoded;charset=UTF-8
Authorization: Basic NnB1[...]YTNFOA==

grant_type=client_credentials 
```

知道这可能有什么问题吗？

问候。

PS：我知道这有一些第三方库，但我想自己制作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:53:50.893

我解决了我的问题，错误是 base64.encodestring() 在字符串的末尾添加了一个 \n 弄乱了请求。

使用 base64.b64encode() 代替工作正常。

问候

# if-statement - AngularJS 模板中的 if else 语句

> ID：15810278
> 
> 赞同：716
> 
> 时间：2013-04-04T11:50:13.800
> 
> 标签：if-statement, angularjs

我想在 AngularJS 模板中做一个条件。我从 Youtube API 获取视频列表。有些视频是 16:9 的比例，有些是 4:3 的比例。

我想做出这样的条件：

```
if video.yt$aspectRatio equals widescreen then 
    element's attr height="270px"
else
    element's attr height="360px" 
```

我正在使用`ng-repeat`. 不知道我应该怎么做这种情况：

*   在范围内添加一个函数？
*   在模板中做吗？

* * *

## 回答 #1

> 赞同：1313
> 
> 时间：2013-04-04T11:58:29.237

Angularjs（低于 1.1.5 的版本）不提供`if/else`功能。以下是您想要实现的目标的几个选项：

（***如果您使用的是 1.1.5 或更高版本，请跳转到下面的更新（#5）***）

### 1、三元运算符：

正如@Kirk 在评论中所建议的那样，最简洁的方法是使用三元运算符，如下所示：

```
<span>{{isLarge ? 'video.large' : 'video.small'}}</span> 
```

### 2.[`ng-switch`](https://docs.angularjs.org/api/ng/directive/ngSwitch)指令：

可以使用类似下面的东西。

```
<div ng-switch on="video">
    <div ng-switch-when="video.large">
        <!-- code to render a large video block-->
    </div>
    <div ng-switch-default>
        <!-- code to render the regular video block -->
    </div>
</div> 
```

### 3\. [`ng-hide`](https://docs.angularjs.org/api/ng/directive/ngHide)/[`ng-show`](https://docs.angularjs.org/api/ng/directive/ngShow)指令

或者，您也可以使用`ng-show/ng-hide`，但使用它实际上会渲染一个大视频和一个小视频元素，然后隐藏满足`ng-hide`条件的元素并显示满足`ng-show`条件的元素。因此，在每个页面上，您实际上将呈现两个不同的元素。

### 4\. 另一个需要考虑的选项是[`ng-class`](https://docs.angularjs.org/api/ng/directive/ngClass)指令。

这可以如下使用。

```
<div ng-class="{large-video: video.large}">
    <!-- video block goes here -->
</div> 
```

如果是真的，上面基本上会`large-video`为 div 元素添加一个 css 类`video.large`。

### 更新：[Angular 1.1.5](http://code.angularjs.org/1.1.5/docs/)引入了[`ngIf directive`](https://docs.angularjs.org/api/ng/directive/ngIf)

### 5.[`ng-if`](https://docs.angularjs.org/api/ng/directive/ngIf)指令：

在上述版本中，`1.1.5`您可以使用该`ng-if`指令。如果提供的表达式返回，这将删除元素，如果表达式返回`false`，则将 重新插入`element`DOM `true`。可以如下使用。

```
<div ng-if="video == video.large">
    <!-- code to render a large video block-->
</div>
<div ng-if="video != video.large">
    <!-- code to render the regular video block -->
</div> 
```

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2013-07-09T16:54:30.063

在 Angular 的最新版本（从 1.1.5 开始）中，它们包含了一个名为`ngIf`. 它的不同之`ngShow`处`ngHide`在于元素不是隐藏的，而是根本不包含在 DOM 中。它们对于创建成本高但未使用的组件非常有用：

```
<div ng-if="video == video.large">
    <!-- code to render a large video block-->
</div>
<div ng-if="video != video.large">
    <!-- code to render the regular video block -->
</div> 
```

* * *

## 回答 #3

> 赞同：144
> 
> 时间：2014-09-05T05:18:07.770

三元是最明确的方法。

```
<div>{{ConditionVar ? 'varIsTrue' : 'varIsFalse'}}</div> 
```

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2014-10-03T21:38:04.867

Angular 本身不提供 if/else 功能，但您可以通过包含此模块来获得它：

[https://github.com/zachsnow/ng-elif](https://github.com/zachsnow/ng-elif)

用它自己的话来说，它只是“控制流指令的简单集合：ng-if、ng-else-if 和 ng-else”。使用起来简单直观。

例子：

```
<div ng-if="someCondition">
    ...
</div>
<div ng-else-if="someOtherCondition">
    ...
</div>
<div ng-else>
    ...
</div> 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2013-04-04T16:45:03.983

您可以`video.yt$aspectRatio`通过过滤器直接使用您的属性，并将结果绑定到模板中的高度属性。

您的过滤器看起来像：

```
app.filter('videoHeight', function () {
  return function (input) {
    if (input === 'widescreen') {
      return '270px';
    } else {
      return '360px';
    }
  };
}); 
```

模板将是：

```
<video height={{video.yt$aspectRatio | videoHeight}}></video> 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2013-10-29T11:35:11.043

在这种情况下，您希望根据对象属性“计算”像素值。

我会在控制器中定义一个计算像素值的函数。

在控制器中：

```
 $scope.GetHeight = function(aspect) {
   if(bla bla bla) return 270;
   return 360;
} 
```

然后在您的模板中，您只需编写：

```
 element height="{{ GetHeight(aspect) }}px " 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2015-07-23T20:58:50.237

我同意**三元**非常干净。似乎这是非常有情境的，尽管我需要显示 div 或 p 或 table ，所以对于表格，出于明显的原因，我不喜欢三元组。调用函数通常是理想的，或者在我的情况下，我这样做了：

```
<div ng-controller="TopNavCtrl">
        <div ng-if="info.host ==='servername'">
            <table class="table">
                <tr ng-repeat="(group, status) in user.groups">
                    <th style="width: 250px">{{ group }}</th>
                    <td><input type="checkbox" ng-model="user.groups[group]" /></td>
                </tr>
            </table>
        </div>
       <div ng-if="info.host ==='otherservername'">
            <table class="table">
                <tr ng-repeat="(group, status) in user.groups">
                    <th style="width: 250px">{{ group }}</th>
                    <td><input type="checkbox" ng-model="user.groups[group]" /></td>
                </tr>
            </table>
        </div>
</div> 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-12-08T12:36:51.173

```
 <div ng-if="modeldate==''"><span ng-message="required" class="change">Date is required</span> </div> 
```

你可以使用上面的 ng-if 指令。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-10-09T08:44:57.120

Angular 的一种可能性：我必须在 html 部分包含一个 if - 语句，我必须检查我生成的 URL 的所有变量是否都已定义。我按照以下方式做到了，这似乎是一种灵活的方法。我希望它对某人有所帮助。

模板中的html部分：

```
 <div  *ngFor="let p of poemsInGrid; let i = index" >
        <a [routerLink]="produceFassungsLink(p[0],p[3])" routerLinkActive="active">
    </div> 
```

和打字稿部分：

```
 produceFassungsLink(titel: string, iri: string) {
      if(titel !== undefined && iri !== undefined) {
         return titel.split('/')[0] + '---' + iri.split('raeber/')[1];
      } else {
         return 'Linkinformation has not arrived yet';
      }
  } 
```

谢谢和最好的问候，

简

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-03T11:15:53.923

ng If else 语句

```
ng-if="receiptData.cart == undefined ? close(): '' ;" 
```

# android - Twitter OAuth 与 Android，从没有登录的 REST 1.0 到有登录的 REST 1.1

> ID：15810279
> 
> 赞同：2
> 
> 时间：2013-04-04T11:50:17.113
> 
> 标签：android, json, twitter, oauth, twitter-oauth

我有一个应用程序，它使用 Twitter API 的公共部分，不需要登录，但随着更新，需要登录，所以我需要实现 OAuth。我已经看到有像 Twitter4j 这样的库使这更容易，但是我的应用程序有很多代码，我不想重写它，不是现在，所以我想使用**SCRIBE**或**oauth-** signpost ，但是我真的不知道该怎么做。

我已经阅读了很多网络教程和 github 项目，但它们对我不起作用（也许我很愚蠢）。

我正在考虑接下来的事情，如果我错了，请纠正我。

1.  **带有登录按钮的初始活动，只有一个按钮，显示带有 twitter 的 web 视图。**

2.  **Token y Token Secret 的共享偏好。**

3.  **如果我没记错的话，我在 HTTPclient 中的 get json 函数上做了一点改动，它传递了带有令牌、令牌秘密、应用程序密钥和应用程序密钥秘密的标头。**

经过一周的阅读，我认为我理解了它是如何工作的，但是我什至连一个简单的新项目都无法建立联系。

我知道如果我没记错的话我应该提出 3 个请愿书，然后在第二个请求之后，打开一个带有第二个请求中的链接的 web 视图，用户登录的地方就在那里。

有了不同的选择，我认为我想做的最好的选择是**oauth-signpost**，但我找不到例子，我找到了一些，但他们崩溃了......

如果有人可以帮助我，一点解释或示例，但很简单，因为我正在失去理智，我无法继续，因为 API 1.0 很快就会被弃用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:01:41.843

你应该看看 Temboo。它简化了包括 Twitter 在内的许多 API 的 OAuth 流程。它是这样工作的：

1.  运行`InitializeOAuth`步骤。这将返回您可以向用户显示的授权 URL。他们需要按照此页面上的说明使用您的应用进行身份验证。

2.  运行`FinalizeOAuth`步骤。这会将用户通过您在上一步中显示的 URL 进行身份验证时生成的回调 ID 作为输入。此步骤的结果是您需要的访问令牌。

完整详情：[https ://www.temboo.com/library/Library/Twitter/OAuth/](https://www.temboo.com/library/Library/Twitter/OAuth/)

[此外，您可以在此处](https://www.temboo.com/examples)试用 Temboo 如何简化 Facebook 的 OAuth，并查看源代码。Twitter 支持的工作方式相同。

（全面披露：我在 Temboo 工作）

# xslt - 无法在创建的 PDF 文件中显示图像

> ID：15810280
> 
> 赞同：1
> 
> 时间：2013-04-04T11:50:18.127
> 
> 标签：xslt, xsl-fo

我正在使用 xsl-fo。

为了在 PDF 文件中包含图像，我编写了以下几行：

```
<fo:static-content flow-name="kopf">  <fo:external-graphic src="url('{.//ImagePath}Logo.png')" content-height="1em" content-width="1em" ></fo:static-content> 
```

我也尝试过相对路径和绝对路径，但还没有任何效果。奇怪的是我没有收到任何错误消息。PDF 文件使用所有数据创建，但不显示图像。

可能是什么问题呢？任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:16:59.127

是的，似乎问题出在您的 url('{.//ImagePath}Logo.png') 路径中，更正它并获得结果。

# cakephp - CakePHP 2.x 使用地址显示地图位置？

> ID：15810287
> 
> 赞同：0
> 
> 时间：2013-04-04T11:50:32.213
> 
> 标签：cakephp, google-maps-api-3, cakephp-2.0

我有 CakePHP 网站，我想在我的 CakePHP 应用程序的给定地址中显示 Google 地图和标记。

是否有任何插件可用于在谷歌地图中显示地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:54:07.500

你可能甚至没有尝试谷歌。或者你会偶然发现至少十几个插件/解决方案。

看看这个：http: [//www.dereuromark.de/2010/12/21/googlemapsv3-cakephp-helper/](http://www.dereuromark.de/2010/12/21/googlemapsv3-cakephp-helper/)

```
// include jquery js
$this->Html->script('jquery', array('inline' => false));

// include the google js code
$this->Html->script($this->GoogleMapV3->apiUrl(), array('inline' => false));

// echo the div container to display the map in
echo $this->GoogleMapV3->map(array('div'=>array('height'=>'400', 'width'=>'100%')));

$options = array(
    'lat' => 48.95145,
    'lng' => 11.6981,
    'title' => 'Some title', // optional
    'content' => '<b>HTML</b> Content for the Bubble/InfoWindow' // optional
);
$this->GoogleMapV3->addMarker($options);

// finalize js
$this->GoogleMapV3->finalize();
// Make sure you got `echo $this->Js->writeBuffer(array('inline' => true));` somewhere in your layout then 
```

如果您还没有 lat/lng，您可以在运行时通过 JS 进行地理编码或使用 Cake 进行地理编码：http: [//www.dereuromark.de/2012/06/12/geocoding-with-cakephp/](http://www.dereuromark.de/2012/06/12/geocoding-with-cakephp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T05:23:40.160

您还可以使用[CakePHP-GoogleMapHelper](https://github.com/marcferna/CakePHP-GoogleMapHelper)即时对地址进行地理编码并将其添加到您的地图中。你会做这样的事情：（查看共享链接的更多细节）

```
<?= $this->GoogleMap->addMarker("map_canvas", 1, "1 Infinite Loop, Cupertino, California"); ?> 
```

# tomcat - Tomcat 处理时间

> ID：15810291
> 
> 赞同：4
> 
> 时间：2013-04-04T11:50:48.307
> 
> 标签：tomcat, process

在我的服务器管理器中

```
http://localhost:8080/manager/status 
```

我可以看到

```
Max processing time: 4069 ms Processing time: 108.345 s 
```

我不太明白这次告诉我什么？我道歉。我意识到这是一个非常基本的问题，所以请指点我一个可以获取诸如此类的基本 Tomcat 知识的资源。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:56:39.960

最大处理时间是 servlet 处理一个请求所花费的最长时间。

处理时间是 servlet 处理所有请求所花费的总时间。

至于可以获取有关 Tomcat 指标知识的资源，试试这个：[Apache Tomcat Metrics](http://docs.oracle.com/cd/E11857_01/em.111/e10115/middleware_apache_tomcat.htm)

# object - Yii 集成 HP 对象存储插件。命名空间问题

> ID：15810293
> 
> 赞同：0
> 
> 时间：2013-04-04T11:50:56.207
> 
> 标签：object, yii, namespaces, storage

我需要将 HP Object Storage 插件集成到我的 Yii 项目中。[我已经在http://hpcloud.github.com/HPCloud-PHP/](http://hpcloud.github.com/HPCloud-PHP/)下载了 Hp 对象存储插件，并按照这里的教程 [https://blog.hpcloud.com/working-object-storage-php](https://blog.hpcloud.com/working-object-storage-php)

这是我的项目的结构

```
 /..
            /YiiBase.php
            /index.php
            /protected/..
            /protected/hpcloud/..
            /protected/hpcloud/Bootstrap.php 
```

在文件 /protected/config/main.php 中，我已经包含了 Bootstrap：

```
 spl_autoload_unregister(array('YiiBase','autoload')); //temporary skip yii autoload

            $basePath = dirname(__FILE__) . DIRECTORY_SEPARATOR . '..';
            require_once $basePath . DIRECTORY_SEPARATOR . 'hpcloud' . DIRECTORY_SEPARATOR . 'Bootstrap.php';

            use \HPCloud\Bootstrap;
            Bootstrap::useAutoloader();
            Bootstrap::useStreamWrappers();

            // Provide credentials
            $settings = array(
                'account' => YOUR_ACCOUNT_NUMBER,
                'secret' => YOUR_SECRET_KEY,
                'tenantid' => YOUR_TENANT_ID,
                'endpoint' => IDENTITY_SERVICES_URL,
            );
            Bootstrap::setConfiguration($settings);

            spl_autoload_register(array('YiiBase','autoload')); 
```

但它抛出了异常

```
 Fatal error: Class 'HPCloud\Storage\ObjectStorage\StreamWrapper' not found in D:\wamp\www\myproject\protected\hpcloud\Bootstrap.php on line 182 
```

我打开 Bootstrap.php 对其进行故障排除

```
 public static function useStreamWrappers() {
                $swift = stream_wrapper_register( // error in line 182
                  \HPCloud\Storage\ObjectStorage\StreamWrapper::DEFAULT_SCHEME,
                  '\HPCloud\Storage\ObjectStorage\StreamWrapper'
                );

                $swiftfs = stream_wrapper_register(
                  \HPCloud\Storage\ObjectStorage\StreamWrapperFS::DEFAULT_SCHEME,
                  '\HPCloud\Storage\ObjectStorage\StreamWrapperFS'
                );

                return ($swift && $swiftfs);
            } 
```

命名空间和路径都是正确的。我找不到错误的原因。如果我按照以下结构将插件单独保留一个简单的文件 index.php （在 Yii 项目文件夹之外），它工作正常。

```
 \..
            \index.php
            \hpcloud\Bootstrap.php 
```

当我将插件放入 Yii 项目时，错误刚刚发生，我认为命名空间有问题。

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:40:40.540

我现在发现了我的问题。这都是关于区分大小写的。命名空间是“HPCloud”，而插件目录名称是“hpcloud”。

# c# - 如何将 MVC 操作参数重新映射到另一个参数名称？

> ID：15810295
> 
> 赞同：38
> 
> 时间：2013-04-04T11:50:57.390
> 
> 标签：c#, .net, asp.net-mvc-3

我必须实现一个像这样调用的 MVC 操作：

```
http://address/Controller/MyAction?resName=name 
```

它被硬编码为 pass 的第三方调用`resName`。所以天真的方法是有这样的动作：

```
ActionResult MyAction( String resName )
{ 
```

但我认为有一个名为的参数`resName`是不酷的，我更喜欢它的名字`resourceName`。如果我只是重命名参数 MVC 参数映射不再起作用，并且我总是`resourceName`设置`null`为何时调用我的操作。

我试过`BindAttribute`这样：

```
ActionResult MyAction( [Bind(Include="resName")] String resourceName ) 
```

但`resourceName`仍然是`null`每次调用我的操作时。

如何重新映射我的参数名称？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-04T12:02:10.470

`Prefix`是你需要的：

```
ActionResult MyAction( [Bind(Prefix="resName")] String resourceName ) 
```

但是，执行 a`http://address/Controller/MyAction?resourceName=name`不适用于该设置。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-10T14:32:43.270

另一种选择是使用[ActionParameterAlias](https://www.nuget.org/packages/ActionParameterAlias/)库。它的好处是给定参数的两个名称都可以使用。

例如

```
using ActionParameterAlias;
//...

    [ParameterAlias("resourceName", "resName", Order = 1)]
    ActionResult MyAction( String resourceName ) 
```

然后像调用控制器一样调用`http://address/Controller/MyAction?resourceName=name` **并且** `http://address/Controller/MyAction?resName=name`都可以正常工作。

# java - wsimport：无法重命名包名

> ID：15810297
> 
> 赞同：2
> 
> 时间：2013-04-04T11:51:02.830
> 
> 标签：java, xml, jaxb, wsimport

我在 [https://mycompany.com/mywspath/Documents.svc?wsdl](https://mycompany.com/mywspath/Documents.svc?wsdl) 这样的地址有一个 wsdl 似乎 xsd 在 [https://mycompany.com/mywspath/Documents.svc?wsdl&xsd=xsd0可见](https://mycompany.com/mywspath/Documents.svc?wsdl&xsd=xsd0)

给一个

```
wsimport https://mycompany.com/mywspath/Documents.svc?wsdl 
```

我获得了包含与文档和依赖项相关的类的层次结构（com.microsoft，...）

```
com
-microsoft
--...
-mycompany
--...
org
-datacontract
--schemas
---... 
```

我愿意将 com.mycompany.mywspath 中生成的分类重构为 com.mycompany.mywspath.test 或 com.mycompany.mywspathA

这是因为在同一命名空间中还有其他包含其他定义的 Web 服务，因此生成的类存储在同一个包 com.mycompany.mywspath 中，并且从第一个 wsimport 获得的 ObjectFactory.class 被从以下调用生成的类覆盖。

我的意愿是避免使用 wsimport 的 -b 选项对来自不同 web 服务的命名空间的不同包进行这种绑定。

我使用了这样的 XML 绑定文件：

```
 <jxb:bindings 
        jxb:version="2.1"  
        xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"   
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
        xmlns:xs="http://www.w3.org/2001/XMLSchema" 
        xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
        xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc">

        <bindings schemaLocation="https://https://mycompany.com/mywspath/Documents.svc?xsd=xsd0"
                node="//xsd:schema[@targetNamespace='http://mycompany.com/mywspath']">
            <jxb:schemaBindings>
                <jxb:package name="com.mycompany.mywspath"/>
            </jxb:schemaBindings>
        </bindings>

    </jxb:bindings> 
```

类起源于同一个地方，没有任何修改，com/mycompany/mywspath/test 不是起源。

如何将这些类移动到 com/mycompany/mywspath/test 包？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-13T09:03:53.720

采用

```
wsimport -p com.bingo.charlie YOUR_WSDL_URL 
```

为您生成的文件定义一个包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-26T18:13:53.053

用于`wsimport -b binding.xml`更改生成文件的包。

来源：[配置目标包](https://github.com/highsource/maven-jaxb2-plugin/wiki/Configure-Target-Packages-in-Binding-Files)

# c# - 1(2),3,4(5,6(7,8),9),10 的正则表达式

> ID：15810309
> 
> 赞同：1
> 
> 时间：2013-04-04T11:51:48.777
> 
> 标签：c#, regex

## 序幕：

**输入字符串：`1(2),3,4(5,6(7,8),9),10`**

我正在使用 C#，我想最终`List<foo>`从上面的表达式中得到一个

```
public class foo
{
    public int bar { get; set; }
    public List<foo> listOfFoo { get; set; }
} 
```

我可以通过编写一些验证和逐字符解析来完成任务，但想知道更好的方法。减少代码，减少他们说的错误；）

## 询问

我正在寻找一个正则表达式来验证和可能捕获字符串中的信息，例如

```
1(2),3,4(5,6(7,8),9),10 
```

字符串基本上是一组用逗号分隔的数字。但是一个数字可以有一些使用括号的子表达式`(` `)`

我想从字符串中获取的是一个像

```
1
    2
3
4
    5
    6
        7
        8
    9
10 
```

我对reg-ex知之甚少。我可以阅读和理解其中的大部分内容，但写一篇我觉得很难

找人告诉我这样的事情是否可以使用 RegEx 实现。如果是这样，应该采取什么方法？我可以看到我需要一个递归表达式，任何链接或示例都会有很大帮助。愿意给我 RegEx 本身的人会锦上添花 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:08:23.517

.NET 正则表达式具有[平衡组](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx#balancing_group_definition)，允许您计算和匹配平衡括号，就像在这种情况下一样。

为此，您可以使用如下表达式：

```
(?x)                 # ignore spaces and comments
^
(?:
    (?<open> \( )*   # open++
    \d+
    (?<-open> \) )*  # open--
    (?:
        , (?!\z)     # match a , but not at end of string
    |   \z           # or end of string
    )
)+
\z
(?(open) (?!) )      # fail if unbalanced (open > 0) 
```

这将验证但不解析字符串。我相信要构建一棵你想要的树，你必须使用解析器。

# sql - Firebird - PGSQL 中的串行字段？

> ID：15810310
> 
> 赞同：2
> 
> 时间：2013-04-04T11:51:50.960
> 
> 标签：sql, firebird, identity, identifier, auto-increment

PGSQL 支持“串行”字段类型，转换为：

```
colname integer DEFAULT nextval('tablename_colname_seq') NOT NULL 
```

这使得标识符生成非常容易。

在 Firebird 中，我只看到了基于触发器的解决方案。

是否可以在 Firebird 中使用相同的解决方案来避免为每个表创建触发器？

```
colname integer DEFAULT gen_id(generator, 1) 
```

我现在没有安装 Firebird 版本来检查它，但也许有人知道答案。

或者我可以为此使用“我的功能”吗？伪：

```
create function mygenid(genname) returns integer
begin
   return gen_id(genname);
end;

create table x(
   colname integer DEFAULT mygenid(generator, 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:01:58.997

Firebird 2.5 及更早版本仅支持生成 id 的触发器。Firebird 3.0 引入了一个选项来在 DDL 表中指定它[`generated by default as identity`](https://www.firebirdsql.org/file/documentation/release_notes/html/en/3_0/rlsnotes30.html#rnfb30-ddl-identity)：

```
create table objects (
   id integer generated by default as identity primary key,
   name varchar(15)
); 
```

这是为您创建触发器和相关序列的语法糖。

# android - 突出显示菜单抽屉/滑动菜单中的选定项目

> ID：15810316
> 
> 赞同：5
> 
> 时间：2013-04-04T11:52:09.097
> 
> 标签：android, android-fragments, actionbarsherlock, android-viewpager, slidingdrawer

***使用的图书馆：***

1.  [https://github.com/SimonVT/android-menudrawer](https://github.com/SimonVT/android-menudrawer)
2.  [https://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)
3.  [https://github.com/JakeWharton/Android-ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)

***问题：***

我一直在尝试在类似于 YouTube/Beautiful Widget 应用程序的 menudrawer 上实现突出显示，但我不知道应该如何解决这个问题。

下面我给我的 aprproche 一个样本，我不确定，如果它是实现类似这样的正确方法：

***这是我创建的菜单抽屉 Adaptervew.click lisner：***

```
 private AdapterView.OnItemClickListener mItemClickListener = new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {

            mPreviousView=mActiveView;
            mActiveView=view;
            mActivePosition = position;
         //   mDrawer.setActiveView(view, position);
            TextView txtview=(TextView)mActiveView;
            txtview.setBackgroundResource( R.drawable.abs__cab_background_top_holo_dark);
           // mDrawer.closeMenu();
        }
    }; 
```

所以基本上我在这里要做的是在当前选定的视图上使用 .9 图像！

**我想知道的是有没有更系统或更好的方法来做同样的事情！**

***我想要实现以下屏幕截图::***

![在此处输入图像描述](https://i.stack.imgur.com/Vfc0U.png) ![在此处输入图像描述](https://i.stack.imgur.com/Lqygs.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-29T03:13:03.103

这是我突出显示当前菜单项的解决方案：

1) 公开 NavDrawer 活动的最后一个选择抽屉位置：

```
public class NavDrawerBaseActivity extends Activity {

    public static int LAST_DISPLAY_POSITION = 0;

    private void displayView(int position) {
        LAST_DISPLAY_POSITION = position;

        Fragment fragment = null;
        switch (position) {
            case 0:
                fragment = new ProgressPageFragment();
                break;
            // ..

            default:
                break;
        }

        FragmentManager fragmentManager = getFragmentManager();
        fragmentManager.beginTransaction().replace(R.id.frame_container, fragment).commit();

        // .. update selected item and title, then close the drawer
    } 
```

然后第 2 步，在适配器类中，引用该值：

```
public class NavDrawerListAdapter extends BaseAdapter {
   // ..

    @Override
    public View getView(int position, View convertView, ViewGroup parent {

        TextView txtTitle = (TextView) convertView.findViewById(R.id.title);

        if (position == NavDrawerActivity.LAST_DISPLAY_POSITION) {
            txtTitle.setTextColor(Color.WHITE);
        }
        else
           txtTitle.setTextColor(Color.BLACK);

        // .. etc .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:16:14.520

你可以试一试：

```
public View getView(int position, View convertView, ViewGroup parent) {
    view.setSelectionHandlerColorResource(Set your color here);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T13:34:59.450

有几种方法可以解决这个问题。我最喜欢的方法是将您的 ListView 项 TextView 放在 FrameLayout 中。然后，此 FrameLayout 可以有一个前景可绘制对象来容纳您的指示器。您可以通过编程方式或使用选择器显示/隐藏此指示器。

# git - git：无论分支如何，如何获取特定文件的最新提交？

> ID：15810319
> 
> 赞同：3
> 
> 时间：2013-04-04T11:52:16.447
> 
> 标签：git, branch, commit

我有这个包含不同模块的大型存储库，这些模块应该在不同的存储库中分解，每个模块一个。有时我`featbranch`在 repo 中创建了一个分支来处理特定模块，但`featbranch`对其他模块完全没有意义。你可以想象这可能导致的混乱......

无论如何，我的问题是：如何获取更改特定文件的最新提交，以及该提交可能属于哪个分支？“最新”是指时间戳最高的那个，据我所知，来自不同分支的提交可能没有任何优先关系。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T12:00:28.920

```
git log -n 1 --date-order --all -- <file> 
```

（请注意，如果有人直接在较新的提交之上进行了“较旧的”提交，则这可能不是具有最新时间戳的提交。不过，这只会发生在有人谎报提交时间的情况下。）

# php - 当数据作为会话传递时更新mysql数据库

> ID：15810329
> 
> 赞同：1
> 
> 时间：2013-04-04T11:52:40.360
> 
> 标签：php, mysql, database, session

我已经让会话显示子信息，我现在希望能够编辑该信息并更新数据库。我已经尝试了每个 youtube 视频和网站，但没有使用 $_SESSION 他们都使用 $_POST。

```
<div class="post">
  <h1 class="title">Child Details: </h1>
    <p class="title"><img src=" <?php echo "".$_SESSION['sourcepath']; ?>" 
    </p>
    <p class="title"><?php echo "".$_SESSION['ChildID']; ?></p>

    <table style="width: 100%">
        <tr>
            <td style="width: 106px">Name</td>
            <td style="width: 252px"><?php       echo "".$_SESSION            ['Firstname']; ?> <?php echo "".$_SESSION['Surname']; ?></td>
            <td style="width: 94px">School</td>
            <td><form method="post">
                <br />
                <textarea name="School" cols="20" rows="5"><?php echo "".$_SESSION['School']; ?></textarea></form>
            </td>
        </tr>
        <tr>
            <td style="width: 106px">Date of Birth</td>
            <td><?php echo "".$_SESSION['DateOfBirth']; ?></td>
            <td style="width: 94px">English</td>
            <td><form method="post">
                <br />
                <textarea name="English" cols="20" rows="5"><?php echo "".$_SESSION['English']; ?></textarea></form>
            </td>
        </tr>
        <tr>
            <td style="width: 106px">Age</td>
            <td><?php echo "".$_SESSION['Age']; ?>;</td>
            <td style="width: 94px">Science</td>
            <td><form method="post">
                <br />
                <textarea name="Science" cols="20" rows="5"><?php echo "".$_SESSION['Science']; ?></textarea></form>
            </td>
        </tr>
        <tr>
            <td style="width: 106px">Address</td>
            <td><form method="post">
                <br />
                <textarea name="Address" cols="20" style="height: 89px"><?php echo "".$_SESSION['Address']; ?></textarea></form>
            </td>
            <td style="width: 94px">Maths</td>
            <td><form method="post">
                <br />
                <textarea name="Maths" cols="20" rows="5"><?php echo "".$_SESSION['Maths']; ?></textarea></form>
            </td>
        </tr>
        <tr>
            <td style="width: 106px">Postcode:</td>
            <td><?php echo "".$_SESSION['PostCode']; ?>;</td>
            <td style="width: 94px">Homework</td>
            <td><form method="post">
                <br />
                <textarea name="Homework" cols="20" rows="5"><?php echo "".$_SESSION['Homework']; ?></textarea></form>
            </td>
        </tr>
        <tr>
            <td style="width: 106px">Contact Number</td>
            <td><form method="post">
                <textarea name="ContactNumber" cols="20" rows="2"><?php echo "".$_SESSION['ContactNumber']; ?></textarea></form>
            </td>
            <td style="width: 94px">Additional</td>
            <td><form method="post">
                <br />
                <textarea name="Additional" cols="20" rows="8"><?php echo "".$_SESSION['Additional']; ?></textarea></form>
            </td>
        </tr>
        <tr>
            <td style="width: 106px">Mother Name</td>
            <td><?php echo "".$_SESSION['MotherName']; ?></td>
            <td style="width: 94px">&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td style="width: 106px">&nbsp;</td>
            <td>&nbsp;</td>
            <td style="width: 94px">&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td style="width: 106px">Last Update</td>
            <td><?php echo "".$_SESSION['TimeStamp']; ?></td>
            <td style="width: 94px">&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td style="width: 106px">&nbsp;</td>
            <td>&nbsp;</td>
            <td style="width: 94px">&nbsp;</td>
            <td>&nbsp;</td>
        </tr>
        <tr>
            <td style="width: 106px">

            </td>
            <td>
            <form method="post" action="updatetest.php">
                <input type="hidden" name="id" value="<?php echo $_SESSION['ChildID']; ?>"/>
                <input name="Submit" type="submit" value="Update" /></form>
            </td>

<?php session_start(); ?>
    <?php       
    $connect = mysql_connect("127.0.0.1" , "root" , "") or die ("Couldnt connect     to            database");
    mysql_select_db("travellerfile") or die ("couldnt find the database");

    $School = $_SESSION['School'];
    $Maths = $_SESSION['Maths'];
    $English = $_SESSION['English'];
    $Science = $_SESSION['Science'];
    $Homework = $_SESSION['Homework'];
    $Additional = $_SESSION['Additional'];
    $id = $_SESSION['ChildID'];

    $q = "SELECT * FROM child WHERE ChildID = $_SESSION[ChildID]";
    $result = mysql_query($q);
    $person = mysql_fetch_array($result);

    $u = "UPDATE child SET Maths= '$_SESSION['Maths']', Science= '$_SESSION['Science']';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:58:16.943

```
$_SESSION['School'] = $_POST['School'];
$School = $_SESSION['School']; 
```

您必须在某处声明 $_SESSION['School'] 包含名称为“School”的 Textarea 的值。您不能只期望 PHP 将 POST 变量放入 SESSION 变量中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:59:22.317

例如：

```
 $_SESSION['ChildID'] = 5;

 <form method="post" action="updatetest.php">
 <input type="hidden" name="id" value="<?php echo $_SESSION['ChildID']; ?>"/>
 <input name="Submit" type="submit" value="Update" /></form> 
```

这将向您发布：

```
 $_POST['id'] = 5; 
```

所以：

```
 UPDATE table SET col = $_POST['id']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:12:35.713

Both `$_POST` and `$_SESSION` are merely arrays. The only thing that makes them special is that they are global. So, if you have code that works for `$_POST`, just substitute in the corresponding `$_SESSION` values.

What your real issue is, is that you are submitting a form. Forms can submit using `get` or `post` methods. There is no `session` method. So your values are arriving at your php script in the `$_POST` variable. You could then copy them to the `$_SESSION` variable before running your update, but there's really no good reason to. The only reason they would need to be in `$_SESSION` is so that they can be output if the form needs to be re-displayed with the submitted values.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:03:14.233

更新数据库的`$_SESSION`最终抓取`$_POST`；

```
...
$School = $_['School'] = $_POST['School'];
$Maths = $_SESSION['Maths'] = $_POST['Maths'];
$English = $_SESSION['English'] = $_POST['English'];
$Science = $_SESSION['Science'] = $_POST['Science'];
$Homework = $_SESSION['Homework'] = $_POST['Homework'];
$Additional = $_SESSION['Additional'] = $_POST['Additional'];
$id = $_SESSION['ChildID'];
... 
```

# wicket - 从 wicket 1.4.9 升级到 wicket 1.4.22 导致按钮不被触发

> ID：15810331
> 
> 赞同：-2
> 
> 时间：2013-04-04T11:52:44.467
> 
> 标签：wicket, upgrade

我们当前的 webapp 使用 1.4.9。但我们想升级到更高的 1.4.x 版本，最好是 1.4.22（最新的 1.4）。问题是如果单击 AjaxButton，页面将不会提交。这适用于 1.4.9。我在该按钮的 onSubmit 上放置了断点，但它不会去那里。对此有何见解？谢谢！

这是代码： 对于按钮：

```
public abstract class SXIButton extends AjaxButton {
    public SXIButton(String id, Form form) {
    super(id, form);
    initialize();
    add(new SimpleAttributeModifier("validating", "false"));
}
} 
```

在java中：

```
searchForm.add(new SXIButton("searchButton", searchForm) {
        private static final long serialVersionUID = -4366670520053224476L;

        @Override
        protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
            LOG.info("Searching Users");
            target.addComponent(userContainer);

            userSearchModel.setUserCurrentUserFilter(getSessionBOUser().getCd());
            UserDataProvider udp = new UserDataProvider(userSearchModel,isForSearch);
            udp.setSort("cd", true);
            userContainer.addOrReplace(getResultPanel(udp));
        }
    });
    add(portlet);
    portlet.add(searchForm); 
```

在 HTML 中

```
<input type = "submit" wicket:id = "searchButton" wicket:message="value:button.search" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:23:20.650

没有任何代码很难帮助你。我会首先检查[更改日志](http://mirror.synyx.de/apache/wicket/1.4.22/CHANGELOG-1.4)，看看在以后的版本中是否有任何可能给您带来麻烦的更改（例如[这张票](https://issues.apache.org/jira/browse/WICKET-1894)）。如果你找不到任何明显的东西，你可能想先更新到另一个不是最新的版本，以缩小你的代码第一次中断的版本。

但这些只是在黑暗中拍摄。

# c# - XElement 添加样式

> ID：15810333
> 
> 赞同：0
> 
> 时间：2013-04-04T11:52:56.860
> 
> 标签：c#, asp.net, xelement

我试图拥有一个具有如下风格的 XElement：

```
<g style="fill-opacity:0.7"> 
```

所以我这样做：

```
XElement root = new XElement("g");
root.SetAttributeValue("style",
                from attributes in Child.Attributes
                where char.IsUpper(attributes.Key[0]) & !attributes.Value.ToString().StartsWith(transformNS)
                select new XAttribute("style", attributes.Key + ":" + attributes.Value)); 
```

但我所拥有的是

```
<g style="System.Linq.Enumerable+WhereSelectEnumerableIterator`2[System.Collections.Generic.KeyValuePair`2[System.String,System.Object],System.Xml.Linq.XAttribute]"> 
```

有人可以帮助我吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:58:50.557

那是因为您选择了一个完整的 XAttribute 作为属性的值。您需要遍历您的属性并将它们合并成一个字符串。然后将此字符串用作属性的值。

像这样的东西：

```
XElement root = new XElement("g");
IEnumerable<string> styleprops = from attributes in Child.Attributes
                                 where char.IsUpper(attributes.Key[0]) & !attributes.Value.ToString().StartsWith(transformNS)
                                 select attributes.Key + ":" + attributes.Value

string value = string.empty;

foreach(string prop in styleprops){
    value += prop + ";";
}

root.SetAttributeValue("style", value); 
```

# javascript - 骨干 | 准备好文档的脚本

> ID：15810334
> 
> 赞同：2
> 
> 时间：2013-04-04T11:52:57.250
> 
> 标签：javascript, templates, backbone.js

我希望像 $(document).ready() 一样运行一个脚本（js）。有一种方法可以在模板（例如 home_tpl.html）文件中编写脚本。但我确信这不是一个好方法。

我正在从主干视图加载 html。我没有使用任何其他包装，如 marionate。在这里，我希望在加载模板（加载 DOM）时运行一些脚本。我可以通过哪种方式编写脚本？

这是视图的渲染

```
 reset: function(key, email){
     require(['js/views/reset_password', 'js/models/forgot_password'], function(ResetView, ResetModel){
        var resetModel = new ResetModel();
        resetModel.set('key', key);
        resetModel.set('email', email);
        $('body').html(new ResetView({model: resetModel}).render().el);
     });
    }, 
```

这是查看代码

```
define(['text!tpl/reset_passwordtpl.html'],function(Template){

return Backbone.View.extend({
    template: _.template(Template),  
    render: function(){
        $(this.el).html(this.template());
        return this;
    },
    events: {
        "click #btn_reset_password": "reset"
    },
    reset: function(){
        if($('#reset_password').val() != $('#confirm_reset_password').val()){
            $('#error_message').text('Passwords mismatched').show();
        }   

        else{
            $.ajax({
                url: server_url + 'reset',
                type:'POST',
                dataType:"json",
                data: {'id': this.model.get('email'), 'key': this.model.get('key'), 'new_password': $('#reset_password').val()},
                success:function (data) {
                    if(data.error) {  // If there is an error, show the error messages
                        $('.alert-error').text(data.error.text).show();
                    }
                    else { // If not, send them back to the home page
                        $("#content").html("<h6>Your password is reset. Click <a href='#login'>here</a> to login.</h6>");
                    }
                }
            });
        }
    }
});
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T12:54:54.977

在某个地方你应该有一个主视图。您还包括样式表等。在页面底部的正文结束标记之前。在某些脚本标签中，只需执行 document.ready 即可。除非这也在模板中，在这种情况下，我会考虑在视图方面使用不同的结构。

如果您只想在准备加载一个模板时执行此操作，我会使用带有匿名函数的 succes 。

# java - SetIconImage 来自资源中的图像

> ID：15810335
> 
> 赞同：1
> 
> 时间：2013-04-04T11:52:57.470
> 
> 标签：java, image, swing, jframe, embedded-resource

我有一个在资源中有一个图像文件夹的摇摆应用程序。我使用以下代码访问图像：

```
btnDel = new JButton(new ImageIcon(getClass().getResource("/Recycling-Pool.png"))); 
```

在参考 JLabels 和 JMenuItems 等组件的图像时，这种方法对我来说效果很好。我有一个使用以下代码访问的应用程序图标：

```
setIconImage(getToolkit().getImage("Images/Free bsd.gif")); 
```

这也适用于栏图标，但我希望图标也与应用程序捆绑在一起，我不知道如何访问应用程序栏的图标图像。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:27:32.873

我想出了答案。很抱歉浪费您的时间。它会是这样的：

```
setIconImage(getToolkit().getImage(getClass().getResource("/Free bsd.gif"))); 
```

这对我来说适用于嵌入式图像。:)

# asp.net - 无法使用实体框架从 WCF 服务获取数据

> ID：15810337
> 
> 赞同：0
> 
> 时间：2013-04-04T11:53:03.893
> 
> 标签：asp.net, wcf, entity-framework-4, linq-to-entities

我正在使用一个 Web 应用程序，其中用户将一个参数传递给服务，它将返回字符串数据类型，即查询结果。在服务中，我使用实体框架根据用户输入进行查询，但我无法获取数据，而是在我的**web 应用程序中抛出****异常**说..... **由于内部错误，服务器无法处理请求。****有关错误的更多信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自配置行为）以便将异常信息发送回客户端，或根据 Microsoft .NET Framework 3.0 SDK 文档打开跟踪并检查服务器跟踪日志。** ****Web应用程序和服务是两种不同的解决方案。我的 WCF 服务中的代码****

 ****```
public string GetFunctionality(string UserId)
    {
        string strRoleName = string.Empty;
        objEntity = new SYMPHONY_TVEntities();
        var Function = from t1 in objEntity.Users join t2 in objEntity.User_Role on t1.Role equals t2.User_Role1 where t1.UserID == UserId select t2;
        var UserName = from it in objEntity.Users where it.UserID == UserId select it;
        //Here i am getting exception
        User_Role objRole = Function.First();
        User objUser = UserName.First();
        if (objRole.User_Function != null && objUser.User_Name != null)
        {
            strRoleName = objRole.User_Function + "$" + objUser.User_Name;
        }
        return strRoleName;
    } 
```

我的连接字符串 WCF 服务

```
<add name="SYMPHONY_TVEntities" connectionString="metadata=res://*/UsersModel.csdl|res://*/UsersModel.ssdl|res://*/UsersModel.msl;provider=System.Data.SqlClient;provider connection string='Data Source=inhi1u-hd0212\;Initial Catalog=&quot;SYMPHONY TV&quot;;Integrated Security=True;MultipleActiveResultSets=True'" providerName="System.Data.EntityClient" /></connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:35:52.493

你的代码看起来不错。异常说它无法连接到数据库。这意味着您的连接字符串可能是错误的，请验证您的连接字符串。如果失败，请尝试在`objEntity`. （[为什么？](https://stackoverflow.com/a/3081776/860243)）

```
objEntity = new SYMPHONY_TVEntities();
objEntity.Connection.Open(); 
```****

# git - Git clean 不删除文件

> ID：15810338
> 
> 赞同：3
> 
> 时间：2013-04-04T11:53:04.207
> 
> 标签：git

```
git reset --hard HEAD 
```

给我

```
git status

# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   "LIFE/uploads/docs/Community_Plan_onlineA\314\203\342\200\240%92.pdf"
nothing added to commit but untracked files present (use "git add" to track) 
```

现在，通常进行清理会摆脱这个未跟踪的文件。

```
git clean -df

Removing "LIFE/uploads/docs/Community_Plan_onlineA\314\203\342\200\240%92.pdf" 
```

然而，我得到了这个

```
git status

# On branch master
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    "LIFE/uploads/docs/Community_Plan_online\303\203\342\200\240%92.pdf"
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

请注意文件名略有不同（_Plan_online\303 而不是 _Plan_onlineA\314）。是什么导致这个文件粘住？我正在使用 core.autocrlf=false 使用 OSX

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T23:15:26.933

它并没有真正卡住 - 你有一个名为`LIFE/uploads/docs/Community_Plan_online\303\203\342\200\240%92.pdf`. 暂存删除并提交以摆脱它。

Git 有时会被不区分大小写的文件系统欺骗。您正在处理具有 HFS+ 认为大小写等效的两个不同 Unicode 字符的两个文件名。Git 在某些条件下认为它们是不同的文件，有时在其他条件下认为它们是同一个文件。

OS-X 默认文件系统不区分大小写，它将文件名存储在[分解的 UTF-8](https://stackoverflow.com/a/9758019/11296)中（根据该答案，“规范化形式 D”）。所以我认为'A\314'是HFS+，使用分解的UTF-8作为拉丁语'A'和一个组合变音符号（上面的反逗号？）。Git 报告的 '\303' 表示带有波浪号的拉丁语 A。我猜这些字母在不区分大小写的文件系统上被认为是等效的。

在第一个 git 状态期间，我猜 Git 会检查所有跟踪文件的状态，并且 HFS+ 会报告该文件名的大小写等效文件名。然后，Git 查找未跟踪的文件，并在其跟踪文件列表中看到一个与任何文件名都不完全匹配的文件名。因此 Git 只报告一个未跟踪的文件。

在第二个 git status 期间，Git 检查所有跟踪文件的状态，HFS+ 报告没有与文件名匹配的文件。因此 Git 报告跟踪的文件已被删除。（当然，现在文件已经消失了，它不会被报告为未跟踪的文件。）

你没有说你使用的是什么版本的 Git，但更新版本的 Git 可能会更好地处理这种情况。

# scikit-learn - RandomForestClassifier 中的 feature_importances 是如何确定的？

> ID：15810339
> 
> 赞同：139
> 
> 时间：2013-04-04T11:53:03.917
> 
> 标签：scikit-learn, random-forest, feature-selection

我有一个以时间序列作为数据输入的分类任务，其中每个属性 (n=23) 代表一个特定的时间点。除了绝对分类结果，我想知道哪些属性/日期对结果的贡献程度。因此，我只是使用`feature_importances_`，这对我来说效果很好。

但是，我想知道它们是如何计算的以及使用了哪种度量/算法。不幸的是，我找不到有关此主题的任何文档。

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2013-04-04T21:16:55.203

确实有几种方法可以获得功能“重要性”。通常，对于这个词的含义没有严格的共识。

在 scikit-learn 中，我们实现了 [1] 中描述的重要性（经常被引用，但不幸的是很少阅读......）。它有时被称为“基尼重要性”或“平均减少杂质”，定义为节点杂质的总减少量（由到达该节点的概率加权（由到达该节点的样本比例近似））在所有合奏的树。

在文献或其他一些软件包中，您还可以找到实现为“平均降低精度”的特征重要性。基本上，这个想法是在随机排列该特征的值时测量 OOB 数据准确性的降低。如果减少量较低，则该特征不重要，反之亦然。

（请注意，这两种算法都在 randomForest R 包中可用。）

[1]：Breiman, Friedman，“分类和回归树”，1984 年。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-04-04T19:32:24.947

计算单个树的特征重要性值的常用方法如下：

1.  `feature_importances`您使用 size 初始化一个全零数组`n_features`。

2.  您遍历树：对于在特征上拆分的每个内部节点，`i`您计算该节点的误差减少乘以路由到该节点的样本数，然后将此数量添加到`feature_importances[i]`.

误差减少取决于您使用的杂质标准（例如 Gini、Entropy、MSE、...）。它是路由到内部节点的示例集的杂质减去由拆分创建的两个分区的杂质之和。

重要的是这些值是相对于特定数据集的（误差减少和样本数量都是特定于数据集的），因此无法在不同数据集之间比较这些值。

据我所知，有其他方法可以计算决策树中的特征重要性值。上述方法的简要描述可以在 Trevor Hastie、Robert Tibshirani 和 Jerome Friedman 的“统计学习要素”中找到。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-04-04T12:22:34.893

它是路由到决策节点的样本数量与训练集中任何树中涉及该特征的决策节点之间的比率。

决策树的顶级节点中涉及的特征往往会看到更多的样本，因此可能更重要。

**编辑**：这个描述只是部分正确：吉尔斯和彼得的答案是正确的答案。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-01-06T22:25:16.783

正如@GillesLouppe 上面指出的那样，scikit-learn 目前实现了特征重要性的“平均减少杂质”指标。我个人觉得第二个指标更有趣，你可以随机排列每个特征的值，看看你的袋外性能有多差。

由于您所追求的特征重要性是每个特征对您的整体模型的预测性能有多少贡献，因此第二个指标实际上可以直接衡量这一点，而“平均减少杂质”只是一个很好的代理。

如果你有兴趣，我写了一个小包，它实现了排列重要性度量，可用于计算来自 scikit-learn 随机森林类实例的值：

[https://github.com/pjh2011/rf_perm_feat_import](https://github.com/pjh2011/rf_perm_feat_import)

**编辑：这适用于 Python 2.7，而不是 3**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-08-06T07:59:50.203

代码：

```
iris = datasets.load_iris()  
X = iris.data  
y = iris.target  
clf = DecisionTreeClassifier()  
clf.fit(X, y) 
```

决策树图：
[在此处输入图像描述](https://i.stack.imgur.com/Qz6iC.png)
我们得到

```
compute_feature_importance:[0\. ,0.01333333,0.06405596,0.92261071] 
```

检查源代码：

```
cpdef compute_feature_importances(self, normalize=True):
    """Computes the importance of each feature (aka variable)."""
    cdef Node* left
    cdef Node* right
    cdef Node* nodes = self.nodes
    cdef Node* node = nodes
    cdef Node* end_node = node + self.node_count

    cdef double normalizer = 0.

    cdef np.ndarray[np.float64_t, ndim=1] importances
    importances = np.zeros((self.n_features,))
    cdef DOUBLE_t* importance_data = <DOUBLE_t*>importances.data

    with nogil:
        while node != end_node:
            if node.left_child != _TREE_LEAF:
                # ... and node.right_child != _TREE_LEAF:
                left = &nodes[node.left_child]
                right = &nodes[node.right_child]

                importance_data[node.feature] += (
                    node.weighted_n_node_samples * node.impurity -
                    left.weighted_n_node_samples * left.impurity -
                    right.weighted_n_node_samples * right.impurity)
            node += 1

    importances /= nodes[0].weighted_n_node_samples

    if normalize:
        normalizer = np.sum(importances)

        if normalizer > 0.0:
            # Avoid dividing by zero (e.g., when root is pure)
            importances /= normalizer

    return importances 
```

尝试计算特征重要性：

```
print("sepal length (cm)",0)
print("sepal width (cm)",(3*0.444-(0+0)))
print("petal length (cm)",(54* 0.168 - (48*0.041+6*0.444)) +(46*0.043 -(0+3*0.444)) + (3*0.444-(0+0)))
print("petal width (cm)",(150* 0.667 - (0+100*0.5)) +(100*0.5-(54*0.168+46*0.043))+(6*0.444 -(0+3*0.444)) + (48*0.041-(0+0))) 
```

我们得到 feature_importance: `np.array([0,1.332,6.418,92.30])`。

归一化后，我们得到`array ([0., 0.01331334, 0.06414793, 0.92253873])`，这与 相同`clf.feature_importances_`。

小心所有的课程都应该有一个权重。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-13T19:40:59.697

对于那些寻找 scikit-learn 关于此主题的文档的参考或对@GillesLouppe 答案的参考的人：

在 RandomForestClassifier 中，`estimators_`属性是 DecisionTreeClassifier 的列表（如[文档](http://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html)中所述）。为了计算`feature_importances_`RandomForestClassifier[的](http://(https://github.com/scikit-learn/scikit-learn/blob/f0ab589f/sklearn/ensemble/forest.py#L360)_`feature_importances_`

在 DecisionTreeClassifer 的[文档](http://scikit-learn.org/stable/modules/generated/sklearn.tree.DecisionTreeClassifier.html)中，提到“特征的重要性被计算为该特征带来的标准的（归一化）总减少。它也被称为基尼重要性 [1]。”

[这](https://www.stat.berkeley.edu/~breiman/RandomForests/cc_home.htm#varimp)是有关变量和基尼重要性的更多信息的直接链接，如下面的 scikit-learn 参考提供的。

[1] L. Breiman 和 A. Cutler，“随机森林”，[http://www.stat.berkeley.edu/~breiman/RandomForests/cc_home.htm](http://www.stat.berkeley.edu/~breiman/RandomForests/cc_home.htm)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-29T16:00:17.743

**随机森林中的特征重要性**

*   随机森林使用了许多树，因此减少了方差
*   随机森林还允许对特征组合进行更多探索
*   决策树赋予变量重要性，如果杂质减少（基尼杂质减少）则更重要
*   每棵树都有不同的重要性顺序

    **这是在后台发生的事情！**
*   我们取一个属性并检查它存在的所有树，并取该属性拆分上同质性变化的平均值。同质性变化的平均值为我们提供了属性的特征重要性 [![在此处输入图像描述](https://i.stack.imgur.com/kBvre.jpg)](https://i.stack.imgur.com/kBvre.jpg)

# twitter-bootstrap - 每次加载下一个图像之前，引导轮播都会消失

> ID：15810341
> 
> 赞同：2
> 
> 时间：2013-04-04T11:53:09.060
> 
> 标签：twitter-bootstrap, carousel

我将 Joomla 3.0 与引导框架一起使用，认为在已加载的内容中包含一个滑块是个好主意......

一切似乎都很好，但是我似乎无法弄清楚一些烦人的事情，

轮播加载找到，但是当下一张幻灯片的时间到来时，整个滑块消失到顶部，然后有 1 秒的间隙，然后滑块出现（从顶部向下）与下一张图像....

[http://radiustrade.com](http://radiustrade.com)（用户名：test，密码test）

非常感谢谁能帮我解决这个问题...

# matlab - matlab中的*和.*有什么区别？

> ID：15810349
> 
> 赞同：20
> 
> 时间：2013-04-04T11:53:33.067
> 
> 标签：matlab, operators

Matlab中的`*`和有什么区别？`.*`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T11:58:59.803

`*`是向量或矩阵乘法 `.*`是元素乘法

```
a = [ 1; 2]; % column vector
b = [ 3 4]; % row vector

a*b

ans =

     3     4
     6     8 
```

尽管

```
a.*b.' % .' means tranpose

ans =

     3
     8 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T11:55:35.827

`*`是矩阵乘法，`.*`而是元素乘法。

为了使用第一个运算符，操作数在大小方面应遵守矩阵乘法规则。

对于第二个运算符，向量长度（垂直或水平方向可能不同）或矩阵大小对于元素乘法应该相等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T04:49:38.757

`*`是矩阵乘法，`.*`而是元素数组乘法

我创建了这个简短的脚本来帮助澄清关于两种乘法形式的挥之不去的问题......

```
%% Difference between * and .* in MatLab

% * is matrix multiplication following rules of linear algebra
% See MATLAB function mtimes() for help

% .* is Element-wise multiplication follow rules for array operations
% Also called: Hadamard Product, Schur Product and broadcast
% mutliplication
% See MATLAB function times() for help

% Given: (M x N) * (P x Q)
% For matrix multiplicaiton N must equal P and output would be (M x Q)
% 
% For element-wise array multipication the size of each array must be the
% same, or be compatible. Where compatible could be a scalar combined with
% each element of the other array, or a vector with different orientation
% that can expand to form a matrix.

a = [ 1; 2] % column vector
b = [ 3 4] % row vector

disp('matrix multiplication: a*b')
a*b
disp('Element-wise multiplicaiton: a.*b')
a.*b

c = [1 2 3; 1 2 3]
d = [2 4 6]

disp("matrix multiplication (3 X 2) * (3 X 1): c*d'")
 c*d'
disp('Element-wise multiplicaiton (3 X 2) .* (1 X 3): c.*d')
c.*d

% References: 
% https://www.mathworks.com/help/matlab/ref/times.html
% https://www.mathworks.com/help/matlab/ref/mtimes.html
% https://www.mathworks.com/help/matlab/matlab_prog/array-vs-matrix-operations.html 
```

脚本结果：

一个=

```
 1
 2 
```

b =

```
 3     4 
```

矩阵乘法：a*b

答案=

```
 3     4
 6     8 
```

逐元素乘法：a.*b

答案=

```
 3     4
 6     8 
```

c =

```
 1     2     3
 1     2     3 
```

d =

```
 2     4     6 
```

矩阵乘法 (3 X 2) * (3 X 1): c*d'

答案=

```
28
28 
```

逐元素乘法 (3 X 2) .* (1 X 3): c.*d

答案=

```
 2     8    18
 2     8    18 
```

# symfony - 使用 symfony2 测试下载文件

> ID：15810352
> 
> 赞同：0
> 
> 时间：2013-04-04T11:53:36.613
> 
> 标签：symfony, phpunit

你能帮助我如何在 symfony2 中测试下载文件吗？有我的源代码：

控制器.php

```
public function downloadAction($picture_id) 
{

    $fichier= $this->uploadDir.$picture_id; 
    if (($fichier != "") && (file_exists($fichier))) {
        $content = file_get_contents($fichier);

        $response = new Response();
        $response->headers->set('Content-Type', 'application/octet-stream');
        $response->headers->set('Content-Disposition', 'attachment;filename="'.$picture_id);

        $response->setContent($content);

        return $response;
    }
    else return new Response(json_encode(array("response_code" => "ko")));  

} 
```

控制器测试.php

```
public function testdownload()
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible;)");
    curl_setopt($ch, CURLOPT_URL, "path/img.jpg");
    $response = curl_exec($ch);
} 
```

问题是我如何测试下载是否成功，或者我可以使用哪个断言来进行功能测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-29T18:52:01.553

5年前问过，但也许有人会发现这个有用（功能测试）：

```
$client = static::createClient();
$client->request('GET', '/path/img.jpg');

$this->assertEquals(true, $client->getResponse()->isOk());
$binaryData = $client->getInternalResponse()->getContent() 
```

问题是`$client->getResponse()->getContent()`当有二进制数据时返回空字符串。

使用 Symfony 4.2 测试。

# java - hashmap 如何在内部存储对象

> ID：15810358
> 
> 赞同：-2
> 
> 时间：2013-04-04T11:53:50.307
> 
> 标签：java, data-structures

昨天在我的课上，我的教授教哈希，我想知道一件事，哈希图如何存储对象？

我知道入门级。

但我知道 arraylist 默认可以从 10 个元素开始，或者您可以在构造函数中设置它，如果需要设置更多元素，将创建另一个数组复制值...

那么，hashmap 是如何增长的呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:57:59.340

直接来自[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)：

> HashMap 的实例有两个影响其性能的参数：初始容量和负载因子。容量是哈希表中的桶数，初始容量只是哈希表创建时的容量。负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。**当哈希表中的条目数超过负载因子和当前容量的乘积时，对哈希表进行重新哈希（即重建内部数据结构），使哈希表的桶数大约增加一倍。**

（强调我的）

如果您需要更多的实现细节，源代码也随 JDK 一起分发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:05:28.757

`HashMap`有一个[Entry](http://docs.oracle.com/javase/6/docs/api/java/util/Map.Entry.html)的内部数组，当没有指定其他大小时，默认为 16。

我做了一小段代码，在这里你可以看到实际的地图大小，以及它的内部数组大小，所以你可以比较。只需更改 for 循环，使其可以随心所欲地增长。

```
public static void main(String[] args) throws Exception{
    HashMap<Integer, Integer> m = new HashMap<Integer, Integer>();

    for(int i = 0 ; i < 100 ; i++){
        m.put(i, i);
        Field table = m.getClass().getDeclaredField("table");
        table.setAccessible(true);
        int tableLength = ((Entry[])table.get(m)).length;

        System.out.println("Map size: " + m.size());
        System.out.println("Internal table size: " + tableLength);
    }

} 
```

# mysql - 根据用户在 MYSQL 中选择的选项获取产品

> ID：15810361
> 
> 赞同：0
> 
> 时间：2013-04-04T11:53:59.600
> 
> 标签：mysql

`IN`我想要在子句中具有所有选项的产品。这是我的 SQL：

```
SELECT
    p.title, p.price FROM products AS p, product_options AS po
WHERE
    p.product_id = po.product_id
AND
    po.product_option_id IN (5,1,38,39)
GROUP BY
    p.product_id; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:55:54.137

如果要返回具有所有这些选项的结果，则可以使用：

```
SELECT p.title, p.price 
FROM products AS p
INNER JOIN product_options AS po
  ON p.product_id = po.product_id
WHERE po.product_option_id IN (5,1,38,39)
GROUP BY p.product_id
HAVING COUNT(DISTINCT po.product_option_id) = 4; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/5d04f/1)

# permissions - Drush make 目录不可写

> ID：15810362
> 
> 赞同：0
> 
> 时间：2013-04-04T11:54:00.270
> 
> 标签：permissions

我正在运行 drush make 并收到以下错误

```
Directory /Applications/MAMP/htdocs/geoslate/sites/default exists, but is not writable. Please check directory permissions.                                 [error]
Unable to copy /tmp/make_tmp_1365076314_515d695acefc3/__build__/sites/default to ./sites/default.                                                           [error]
Cannot move build into place 
```

我不是终端权限方面的专家，你能帮我给目录写权限吗？我试过 chmod -w /Applications/MAMP/htdocs/geoslate/sites/default 和 chmod u+x /Applications/MAMP/htdocs/geoslate/sites/default

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:31:33.770

```
chmod +w <directory> solved the problem 
```

# c++ - 当从包装函数调用时 pthread_create 什么也不做

> ID：15810366
> 
> 赞同：0
> 
> 时间：2013-04-04T11:54:07.117
> 
> 标签：c++, pthreads

我正在尝试实现这样的线程对象：

```
#include <pthread.h>
#include <iostream>

class Thread
{
private:
    int id;
    static void * run(void * arg)
    {
        int tid = (int)arg;
        std::cout << "Thread " << tid << " executed." <<std::endl;
        pthread_exit(NULL);
    }
public: 
    Thread(int _id);
    void start();
    int get_id();
}; 
```

这是公共方法和构造函数的实现：

```
#include "std_thread.h"

Thread::Thread(int _id)
{
    id = _id;
}

void Thread::start()
{
    std::cout << "Thread created." <<std::endl;
    pthread_t thread;
    int rc = pthread_create(&thread, NULL, run, (void*)id);
    if(rc) 
        std::cout << "Return code from thread is " << rc;
}

int Thread::get_id()
{
    return id;
} 
```

这是主要的：

```
#include "std_thread.h"

int main()
{
    Thread *thd = new Thread(0);
    thd->start();

    return 0;
} 
```

当我创建线程对象并调用它的 start 方法时，该方法又应该打印“Thread created”。并运行线程体 - 它没有；实际上，它确实打印了创建到控制台的线程，但似乎没有创建线程，或者线程没有做任何事情。顺便说一句，一切都编译得很好，并且没有运行时错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:17:11.927

您`main`在线程有机会运行之前返回。

程序不会等到所有线程都完成后再退出——一旦`main`结束，它就结束了，进程就被关闭了。

让你`pthread_t thread;`作为成员而不是局部变量，并添加一个方法来等待线程完成。
这是我能想到的最简单的例子：

```
void Thread::wait()
{
    pthread_join(thread, NULL);
}

int main()
{
    Thread thd(0); // There's no point in using dynamic allocation here.
    thd.start();
    thd.wait();
    return 0;
} 
```

# objective-c - 在 NSRunLoop 结束时释放资源

> ID：15810368
> 
> 赞同：0
> 
> 时间：2013-04-04T11:54:18.570
> 
> 标签：objective-c, macos, cocoa, daemon, nsrunloop

我试图在它结束时释放在守护进程中分配的资源，或者如果有人退出该进程。

可以说，

```
int main(int argc, const char * argv[])
{
    Controller *controller = [[Controller alloc] init];
    [controller allocateresources];

    [[NSRunLoop currentRunLoop] run];

    [controller release];

    return 0;
} 
```

这里不会调用Controller release。Quit [SIGTERM Signal] 只是终止运行循环。如何在应用程序结束时释放在类 Controller 中分配的资源？

**编辑：**我知道系统会收回资源。我试图解决的问题是跨进程合作锁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:02:42.623

我不认为真的可以保证你会从 -run 方法返回。所以你不应该依赖它来释放资源。还有其他方法可以做到这一点。例如，一个真正低级的解决方案是实现一个 atexit 处理程序

[https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/atexit.3.html](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/atexit.3.html)

并在那里进行必要的解锁。

# regex - 如何在 Lua 中删除括号内的文本？

> ID：15810371
> 
> 赞同：3
> 
> 时间：2013-04-04T11:54:26.413
> 
> 标签：regex, lua, gsub

我有一个喜欢的文字`"Text the I need (extra descriptor) text"`，我想要`"Text the I need text"`。

我曾尝试使用`str:gsub('\([^)]*\)', "")`但由于某种原因无法使用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:00:46.320

试试这个：

```
str = str:gsub('%b()', '') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T12:06:26.043

请记住，这些是模式而不是正则表达式，因此您可以使用 % 进行转义。我在左方括号上添加了一个前导空格，但您可能希望删除它，然后分别删除双空格。

```
str ="Text the I need (extra descriptor) text (more brackets)"
str = str:gsub(' %(.-%) ','')
print(str) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T11:58:13.650

[对于Lua 的特殊正则表达式风格](http://www.lua.org/manual/5.1/manual.html#5.4.1)，您需要一个不同的转义字符：

```
str:gsub('%([^)]*%)', "") 
```

# c# - 将对象中的值添加到字典中

> ID：15810375
> 
> 赞同：0
> 
> 时间：2013-04-04T11:54:37.830
> 
> 标签：c#, dictionary

我有一个从 xml 文件中获取的对象，它包含一个 SeriesCode 和 ProductCodes 字段，该字段与指定的 Series 代码相关联。

IE

```
SeriesCodeA
      prodCode1
      prodCode2
      prodCode3
SeriesCodeA
      prodCode4
      prodCode5
      prodCode6 
```

我创建了以下字典

```
Dictionary<string, List<string>> dictSeries = new Dictionary<string, List<string>>(); 
```

我要添加到字典中的对象的值。所以换句话说，我想，对于添加到 Dictionary 键的每个系列代码作为字符串值添加相应的产品代码作为字符串值。

就像是

```
foreach (var s in series)
{
    string code = s.SeriesCode;
    if (dictSeries.ContainsKey(code))
    {
        foreach (var l in s.ProductCodes)
        {
            dictSeries[code].Add(l);
        }
    }

} 
```

上面的不太对

如何将 SeriesCodes 作为键添加到字典中，并将相应的产品代码作为字符串值（列表）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:59:23.447

使用`LINQ`和[`ToDictionary`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.todictionary.aspx)方法使其更具可读性：

```
var dictSeries = series.ToDictionary(x => x.SeriesCode, x => x.ProductCodes); 
```

假设您的`Series`课程如下所示：

```
class Serie
{
    public string SeriesCode { get; set; }
    public List<string> ProductCodes { get; set; }
} 
```

您的代码也可以工作，但需要一些改进：

```
foreach (var s in series)
{
    string code = s.SeriesCode;
    if (!dictSeries.ContainsKey(code))
    {
        dictSeries.Add(code, new List<string>());
    }

    foreach (var l in s.ProductCodes)
    {
        dictSeries[code].Add(l);
    }
} 
```

# asp.net - 在不通过网站通知用户的情况下标记考勤

> ID：15810376
> 
> 赞同：0
> 
> 时间：2013-04-04T11:54:39.820
> 
> 标签：asp.net

我正在为 Hr & Payroll 开发一个 Web 应用程序。
其中考勤是通过生物识别设备进行标记

的。问题是有时用户忘记打卡设备，因此他们的工资会从他们的帐户中扣除。
所以为了避免这种情况，我想到了标记考勤的想法..我是否有可能在我的 Web 应用程序中使用每个员工的 IP 地址，以便在一天内第一次打开计算机时，时间应该保存在我的数据库中。
当那台计算机最后一次关闭时，也应该在数据库中标记出勤率..但我不知道该怎么做..这甚至可能吗.??。

因为这将为公司的人力资源部门提供 gr8 功能..n 他们不会有任何法律上的麻烦..

请对此有所了解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:27:19.633

您需要为此任务创建[窗口服务。](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)

这是创建窗口服务的逐步过程的一个很好的例子
[http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample](http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample)

我们的组织也有类似的情况。
我们在特定时间使用窗口调度程序读取考勤表。如果用户没有标记出勤，则发送邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:25:52.360

用户是否需要在某个地方登录系统？登录网络或计算机怎么样？您可以编写一个快速而肮脏的程序，当该人登录时运行（您可以使其隐藏运行），这会将某些内容保存到数据库中。

问题出在他们离开的时候。我通常做的是每 5 分钟更新一次记录，写一个 ping/我在这里！到一个记录。然后在某些时候你可以看到 - 这是我们第一次开始收到消息的时候（他们登录），这里是他们停止的地方（必须假设他们已经注销）。您甚至可以创建某种会话 ID，这样您就可以拥有该人的多条记录。

您可以将此程序设置为完全在后台运行或显示在通知区域中的程序。

# visual-studio - 在没有安装 VS 2012 的情况下构建使用 Visual Studio 2012 创建的 C++/C#？

> ID：15810384
> 
> 赞同：8
> 
> 时间：2013-04-04T11:54:53.103
> 
> 标签：visual-studio, visual-c++, msbuild, winapi, visual-c++-2012

如果我有一个 VS2012 的 Visual Studio 解决方案文件，其中包含几个 C++ 本机项目和几个 C# 项目，我可以在*不安装*Visual Studio 2012 本身的情况下构建此解决方案吗？

这将简化（除其他外）我们构建服务器节点的维护。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T16:00:33.337

您将需要安装 VS2012 Express。基于 Microsoft 文档：Windows SDK 不再附带完整的命令行构建环境。您必须分别安装编译器和构建环境。如果您需要包含编译器和构建环境的完整开发环境，您可以下载[Visual Studio 2012 Express](http://www.microsoft.com/visualstudio/11/en-us/products/express)，其中包含 Windows SDK 的相应组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-05T07:22:05.023

还有[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/Default.aspx) ...应该能够构建您需要的任何东西。您可能也需要安装 SDK - 不确定。但它比 VS (express or not) 轻了很多。如果您觉得 Microsoft 的编译器有问题，C# 和 LLVM 总是有 Mono（和 MonoDevelop/Xamarin Studio）、MinGW 和 LCC 用于 C/C++ 编译。LLVM 不久前刚刚发布了他们的第一个 Windows 版本，但它看起来相当可靠...... MinGW 已经在 Windows 上工作了很长时间（并且从各种 POSIX 操作系统交叉编译到 Windows 以进行引导）。LCC 有时可能会有点片状，但它很小。我认为许可也有点限制，但是您需要检查自己是否打算走这条路。

另外...刚刚发现[：演练：使用 MSBuild 创建 Visual C++ 项目](http://msdn.microsoft.com/en-us/library/dd293607%28v=vs.100%29.aspx)。

# android - Android：在运行时添加按钮

> ID：15810385
> 
> 赞同：1
> 
> 时间：2013-04-04T11:54:54.610
> 
> 标签：android, android-layout, button, view

我正在尝试在运行时在我的 TableRow 中添加一些按钮。我的 TableRow 有这样的结构：

```
 <TableRow 
            android:layout_marginTop="100px" 
            android:gravity="bottom" 
            android:paddingTop="50px" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:id="@+id/riga1">

            <Button 
                android:textSize="32px" 
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content" 
                android:id="@+id/buttonOK2" 
                android:text="YES"
                android:onClick="setResult"/>
        </TableRow> 
```

我的java代码是：

```
TableRow tr = (TableRow) findViewById(R.id.riga1);
        Button b = new Button(this);  
        b.setText("button 1");  
        b.setId(1);
        b.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));   
        tr.addView(b);

        Button b1 = new Button(this);  
        b1.setText("button 2");  
        b1.setId(2);
        b1.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));   
        tr.addView(b1); 
```

但这似乎行不通。在我的活动中，我只能看到 xml 文件中定义的按钮。

另一个问题是，如果我在相关的 TableLayout 中设置参数：

```
android:stretchColumns="*" 
```

我必须在上述 TableLayout 的 TableRow 中插入（在 xml 文件中）至少一个按钮，否则我会在 streatchColumns 附近获得“除以零错误”我该怎么办才能让 tableRow 为空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:05:32.520

我认为你的问题是你`LayoutParams`为你的 s 使用了错误的对象`TextView`试试这个：

```
 TableRow.LayoutParams layoutParams = new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, TableRow.LayoutParams.MATCH_PARENT); 
```

然后设置这个`layoutParams`对象：

```
 b.setLayoutParams(layoutParams); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T17:36:35.377

你应该使用相对布局而不是表格布局，这对我有用，试试吧

在你的 XML 文件中像这样

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@+id/myMainRelativeLayout"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<Button
    android:id="@+id/btnAdd"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="47dp"
    android:text="Add Button" /> 
```

你的java代码如下

```
public class MainActivity extends Activity implements
    android.view.View.OnClickListener {

Button btnAdd;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    btnAdd = (Button) findViewById(R.id.btnAdd);
    btnAdd.setOnClickListener(this);

}

@Override
public void onClick(View v) {
    if (v.getId() == R.id.btnAdd) {
        RelativeLayout rl = (RelativeLayout)findViewById(R.id.myMainRelativeLayout);
        Button btn = new Button(this);
        btn.setId(1234);
        btn.setText("Add Button Runtime");
        btn.setOnClickListener(this);
        rl.addView(btn);
    }
    if(v.getId() == 1234)
    {
        Toast.makeText(getApplicationContext(), "This is Your New Button", Toast.LENGTH_LONG).show();

    }
} 
```

}

试试这个真的很管用

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T12:02:42.577

首先，您需要使用此语句找到按钮

> btn=(Button)findViewById(R.id.Button1);

比你可以使用这个设置可见性：

> btn.setVisibility(View.INVISIBLE);

然后您可以使用以下语句设置可见性：

> btn.setVisibility(View.VISIBLE);

# android - 将变量从列表视图传递到另一个活动

> ID：15810386
> 
> 赞同：2
> 
> 时间：2013-04-04T11:54:54.977
> 
> 标签：android, listview, onitemclicklistener

我一直在努力使用一些教程将列表视图选项传递给新活动并将其作为标题（稍后我将使用它做其他事情）。我已经设置了一个 OnClickListener 最好放在里面

```
ListView listView1 = (ListView) findViewById(R.id.sportslist);

String[] items = { "Archery", "Badminton", "Cricket", "Dodgeball", "Equestrian", "Football", "Golf", "Handball", "Ice Hockey", "Ju Jitsu", "Karate", "Lacrosse", "Mountain Biking", "Netball" };

ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items);

listView1.setAdapter(adapter);

listView1.setOnItemClickListener(new OnItemClickListener() {
public void onItemClick(AdapterView<?> parent, View view,int position, long id) 

    ?????

}
}); 
```

谢谢

编辑：额外代码

```
final TextView changetitle = (TextView) findViewById(R.id.detailedsocietyname);
changetitle.setText(name); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:01:59.653

对于所有你将需要获得被选中的项目：

```
final String selected = items[position]; 
```

或者正如医生所建议的那样

```
final String selected = (String) parent.getSelectedItem(); 
```

然后，您需要将该字符串作为额外内容传递给您的新活动

```
Intent i = new Intent(getApplicationContext(), MyClass.class);
i.putExtra("name", selected);
startActivity (i); 
```

然后最后在你的下一个活动中

```
 Intent in = getIntent();
    String name = in.getStringExtra(("name"));//gets name from intent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:04:53.533

在`public void onItemClick(AdapterView<?> parent, View view,int position, long id)`添加此代码。

```
Intent i = new Intent(getApplicationContext(), NextClass.class);
i.putExtra("selectedItem", items[position]);
startActivity (i); 
```

在 NextClass Activity 中获得价值：

```
String SelectedItem = getIntent().getStringExtra("selectedItem"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:05:13.250

public void onItemClick(AdapterView parent, View view,int position, long id)

```
String str = items[position];
Intent in = new Intent(getApplicationContext(), NextClass.class);
in.putExtra("itemkey", str);
startActivity (in); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:21:23.700

将以下内容添加到您拥有的活动中`listview`

以下是`variable`将包含`value`您要传递给的`other activity`

在声明之前声明`Oncreate`它

```
// Activity_1

public final static String send_to_other_activity="ListViewSelected_ID"; 
```

将以下代码添加到`listView1.setOnItemClickListener`

```
Intent i= new Intent(Recipe_List.this,Recipe_View.class);
i.putExtra(send_to_other_activity, string.valueof(position));
// itz (key-value) pair on the left key thru which u will access it on other place. on the right value that you want to pass
// Iam passing posiion to other activity here
startActivity(i); 
```

现在在其他活动中通过将以下语句添加到其他活动的 oonCreate 中`activity`提取此值`key`

```
//Activity_2

getdata_from_list =getIntent().getStringExtra(Activity_1.send_to_other_activity); 
```

现在你有了想要的价值`getdata_from_list`

# core-plot - iOS CorePlot：错误的条形图定位

> ID：15810388
> 
> 赞同：1
> 
> 时间：2013-04-04T11:55:01.633
> 
> 标签：core-plot, bar-chart

我有一个用 CorePlot 创建的图表。用户可以在散点图之间切换：

![在此处输入图像描述](https://i.stack.imgur.com/R3GcV.png)

和条形图：

![在此处输入图像描述](https://i.stack.imgur.com/mNgZI.png)

正如您在条形图中看到的那样，图表向右移动，直到第二个条形不再可见。当显示超过 5 个元素时，不会发生这种情况：

![在此处输入图像描述](https://i.stack.imgur.com/Bjdt7.png) ![在此处输入图像描述](https://i.stack.imgur.com/bWgwG.png)

看起来自动定位错误地放置了一些填充，但我不确定如何避免这个问题。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:38:41.410

我想我找到了一个可能的解决方案，扩展绘图空间 X 轴范围以包含所有元素并在右侧留下一个小边距：

```
// X-Axis spacing
plotSpace.xRange = [CPTPlotRange
                    plotRangeWithLocation:CPTDecimalFromFloat(0.0)
                    length:CPTDecimalFromFloat([graphData count] - 0.7)]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/1cDkF.png)

我会等待将此设置为最佳解决方案，以防万一有人提出更好的解决方案。

# iphone - 我的变量有问题

> ID：15810389
> 
> 赞同：-2
> 
> 时间：2013-04-04T11:55:02.143
> 
> 标签：iphone, ios, variables, return, return-value

我创建了一个 getter 来获取变量的内容，但它不起作用。

这里的代码：

```
-(void)documentURLReceived:(NSURL *)url{

    _getUrl = [[NSURL alloc] init];
    _getUrl = url;
    NSLog(@"Result: %@", _getUrl);
}
-(void)getUrl{
    NSLog(@"getUrl: %@", _getUrl);
} 
```

这是控制台中的结果：

> 结果：`http://www.google.com`
> 
> 获取网址：（空）

我不明白为什么！

这是我的财产：

```
@property (strong, nonatomic) NSURL *getUrl; 
```

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:02:18.273

如果您使用 ARC 和最新的 Xcode - 摆脱 getURL 方法 - 除非您需要执行自定义逻辑，否则不应覆盖此方法，此外，您的 getURL 方法不返回任何内容并且是 void 方法 - 所以变量很可能设置但您的方法正在覆盖自动生成的 getter 并且没有返回任何内容。

在 Xcode 中进行了测试

在头文件中我有：

```
@property (nonatomic, strong) NSURL *getURL; 
```

然后在实现文件中我有：

```
- (void)documentURLReceived:(NSURL *)url
{
    _getURL = url;
    NSLog(@"%@",_getURL);
} 
```

> 输出：
> 
> 2013-04-04 23:29:27.681 VitalityDesignTestSuite[90518:c07] [http://www.google.com](http://www.google.com)

okie dokie 我给你写了一个示例：

[http://bit.ly/10yWb36](http://bit.ly/10yWb36)

使用那些你可以去的：

```
MyViewController *mvc = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
//Now you can set the myURL variable directly
[mvc setMyURL:[NSURL URLWithString:@"http://www.google.com"]];
NSLog(@"Direct Setting: %@",mvc.myURL);

//OR you can call the method your wrote
[mvc documentDidReceiveURL:[NSURL URLWithString:@"http://www.google.com"]];
NSLog(@"Selector Setting: %@",mvc.myURL); 
```

输出：

2013-04-04 23:39:09.407 VitalityDesign[92197:c07] 直接设置：[http](http://www.google.com) ://www.google.com 2013-04-04 23:39:09.408 VitalityDesign[92197:c07] 选择器设置：[http:// /www.google.com](http://www.google.com)

希望这可以帮助

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-04T11:58:12.047

首先，你在 url 中得到了什么吗？

如果否，-> 处理它

如果是，请尝试执行以下操作：

```
_getUrl = [[NSURL alloc] init];
_getUrl = url;
[_getUrl retain];
NSLog(@"Result: %@", _getUrl); 
```

享受编程！

# java - 在 Java 中将 GXT 树保存到 XML 文件

> ID：15810393
> 
> 赞同：0
> 
> 时间：2013-04-04T11:55:12.317
> 
> 标签：java, gwt, gxt

如何将 GXT 树内容 (com.extjs.gxt.ui.client.widget.tree.Tree) 保存到 Java 中的 XML 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:57:55.883

**Quid Pro Quo。**一个不太详细的答案如下

无论如何，您都会通过 Store 或 DataProviders 使用列表列表。通过 RequestBuilder 通过 RPC 或 JSON 序列化它们将它们发送到服务器。使用 XML 库在运行时将它们转换为 XML 文件，如果需要，在 rpc/request builder 的成功调用中提供一个 url 以下载 xml 文件。

**注意**- 这可以通过多种方式完成，具体取决于您的要求的详细信息和您的专业知识！！！！

# scroll - 编辑文本区域时，如何防止包含的 div 滚动到它？

> ID：15810398
> 
> 赞同：1
> 
> 时间：2013-04-04T11:55:21.817
> 
> 标签：scroll, textarea, overflow, containers, hidden

我正在开发一个网站，用户可以在其中创建文本区域并在容器 div 中随意移动它们，溢出：隐藏 - 对应于一张纸。

当 textarea 位于容器的边缘时（即只有一些 textarea 可见），就会出现我的问题。当用户在 textarea 中键入并且插入符号移出可见部分时，容器会滚动以显示所有 textarea。

通过在这个小提琴的文本区域中的分号后输入一些内容来尝试一下：http: [//jsfiddle.net/PG8SU/2/](http://jsfiddle.net/PG8SU/2/)

```
<div class="container">
    <p>Some other text</p>
    <textarea>Type:</textarea>
</div>

.container {
    position:absolute;
    width:300px;
    height:500px;
    border:2px solid blue;
    overflow:hidden;
    top: 50px; 
    left:100px;
}
textarea {
    position:absolute;
    display:block;
    left:250px;
    width:100px;
    top:200px;
} 
```

这似乎是大多数浏览器（如 Chrome 和 IE）中的默认行为。我想避免容器的任何滚动，并且即使用户输入文本区域，也只是让文本区域保持部分可见。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T19:57:42.417

在对此进行了一些研究之后，我相信以一种好的方式来做到这一点并不完全可能。

当然，这是一个奇怪的用例，通常最好将文本区域的宽度设置为 $(".container").width() - $("textarea").position().left ， 但！如果您确实需要容器外的文本，并且确实需要它溢出，这将起作用：

```
$("textarea").keyup(function() {
    $(".container").scrollTop(0).scrollLeft(0);
}).keydown(function() {
    $(".container").scrollTop(0).scrollLeft(0);
}); 
```

我在你的 jsfiddle 中运行了这个，当你输入时它会导致屏幕闪烁，但它最终会禁用滚动。这并不理想，但它是我认为你会找到的最好的。

# javascript - 如何在 IE 8 中获取 JavaScript 异常的堆栈跟踪？

> ID：15810402
> 
> 赞同：21
> 
> 时间：2013-04-04T11:55:36.763
> 
> 标签：javascript, debugging, exception, internet-explorer-8, stack-trace

在 IE 8 中引发 JavaScript 异常时，我如何查看其堆栈跟踪？

例如，以下来自 jQuery 的代码捕获异常并重新抛出它。在 Visual Studio (2012) 中进行调试，由于异常 ('e') 被 jQuery 捕获，执行中断，但我无法终生看到异常来源的堆栈跟踪：

```
// resolve with given context and args
resolveWith: function( context, args ) {
    if ( !cancelled && !fired && !firing ) {
        firing = 1;
        try {
            while( callbacks[ 0 ] ) {
                callbacks.shift().apply( context, args );
            }
        }
        // We have to add a catch block for
        // IE prior to 8 or else the finally
        // block will never get executed
        catch (e) {
            throw e;
        }
        finally {
            fired = [ context, args ];
            firing = 0;
        }
    }
    return this;
} 
```

我试过[stacktrace.js](https://github.com/eriwen/javascript-stacktrace)库，但是当浏览器是 IE 8 时它似乎忽略了异常，只是回退到产生当前帧的堆栈跟踪。

**编辑：**

从下面的屏幕截图中可以看出，异常没有与堆栈相关的属性：

![JavaScript 异常对象](https://i.stack.imgur.com/jZEIU.png)

# sql - SQL Server 2008 上缺少结束注释标记“*/”错误，而不是 2005

> ID：15810403
> 
> 赞同：4
> 
> 时间：2013-04-04T11:55:37.167
> 
> 标签：sql, sql-server-2008

在 SQL Server 2005 上运行没有问题的脚本现在在 SQL Server 2008 上引发错误：

> 缺少结束注释标记“*/”。

这是脚本

```
/********************************************************************************************************
Script: ED demographic update_new.sql
Author: ADR
Purpose: Uses tbl_patient_history in PHD to update patient demographics at time of attendance. Supersedes
         ED demographic update_old.sql, which relied on the data warehouse.
*********************************************************************************************************/

USE DB1

EXEC pr_printdate 'ED Demographic Update Start'

/*
DROP TABLE temp_ae_demo_update

CREATE TABLE [dbo].[temp_ae_demo_update](
    [aed_attendance_id] [varchar](20) NOT NULL,
    [ae_arr_date] [datetime] NOT NULL,
    [patient_id] [varchar](20) NULL,
    [patient_trust_number] [varchar](20) NULL,
    [birth_date] [datetime] NULL,
    [marital_status] [varchar](5) NULL,
    [ethnic_code] [varchar](5) NULL,
    [sex] int NULL,
    [nhs_number] [varchar](20) NULL,
    [patient_forename] [varchar](100) NULL,
    [patient_surname] [varchar](100) NULL,
    [patient_add_1] [varchar](100) NULL,
    [patient_add_2] [varchar](100) NULL,
    [patient_add_3] [varchar](100) NULL,
    [patient_add_4] [varchar](100) NULL,
    [patient_postcode] [varchar](20) NULL,
    [regd_gp_code] [varchar](10) NULL,
    [regd_practice_code] [varchar](10) NULL,
    [gp_postcode] [varchar](10) NULL,
    [demo_updated] [int] NOT NULL
)
*/ 
```

等等等等……这是脚本中唯一包含注释的部分，错误发生在本节中。报告的错误：

> 消息 113，级别 15，状态 1，服务器 UBHNT126，第 4 行
> 缺少结束注释标记“*/”。
> 
> 消息 102，级别 15，状态 1，服务器 UBHNT126，第 24 行
> '*' 附近的语法不正确。

标题块中没有`go`语句 - 在这种情况下我通常会寻找除“GO”之外的任何其他语句是否会导致相同的错误？

这不会发生在 2005 年，只有 2008 年。我不太担心这种特殊情况，因为我可以删除评论，但我们正在将整个系统移植到 2008 年，我想修复对于可能再次发生的其他情况。

ALSO - 仅当我在服务器上调用脚本（从作业中的 cmdexec）时才会发生这种情况，而不是在 ssms 中运行脚本时（无论是 2008 年还是 2005 年）

存储过程创建语句：

```
 USE [PHD]
GO

/****** Object:  StoredProcedure [dbo].[pr_printdate]    Script Date: 04/04/2013 13:24:14 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER OFF
GO

ALTER procedure [dbo].[pr_printdate] @printext char(30) as
set nocount on
select '**** ' + rtrim(@printext) + ' **** timestamp: ' + convert(char(20), getdate())
set nocount off

GO 
```

调用脚本的命令：

```
osql /e /n /S SERVER /U xxxxx /P xxxxx /d PHD /i "\\SERVER\phdadmin\SQL\AE Monthly\ED_Demographic_update_new.sql" /o "\\SERVER\PHDAdmin\LOG\ED_Demographic_update_new.log" 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-10T06:51:21.340

我在 SQL 2012 中遇到了类似的问题。我在结束注释 */ 之前有 GO 语句。在 */ 之前的评论中删除 GO 语句解决了问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T13:35:09.780

在 OSQL 的 2000 版本中，`ED`曾经是一个命令，在某些情况下，系统会忽略命令前的前导空格 - 所以请尝试确保第 4 行的第一个非空格字符不是`ED`，看看是否可以解决它

对于[2005](http://msdn.microsoft.com/en-us/library/ms162806%28v=sql.90%29.aspx)和[2008](http://msdn.microsoft.com/en-us/library/ms162806%28v=sql.100%29.aspx)，文档说：

> osql 不再支持`!!`and命令。`ED`

但是，即使未处理命令，仍然可能会*识别命令，并且行为上的差异纯粹是当命令前面有前导空格时是否可以识别命令之一。*显然，2008 年是这样，但 2005 年不是这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:16:05.587

我的猜测是你的问题在于`pr_printdate`过程/功能。

您可能也想检查和/或发布该内容；）

# mysql - MYSQL WHERE LIKE 语句

> ID：15810404
> 
> 赞同：9
> 
> 时间：2013-04-04T11:55:44.560
> 
> 标签：mysql, sql-like

我正在尝试在 mysql 语句中使用 LIKE 子句，如下所示：

```
SELECT * FROM batches WHERE FilePath LIKE '%Parker_Apple_Ben_20-10-1956%' 
```

'FilePath' 列中的数据匹配数据为：

```
C:\SCAN\Parker_Apple_Ben_20-10-1830\TEST 
```

上面的 SQL 语句工作正常并拾取相关行，但如果我将“\”字符添加到 LIKE 子句的末尾（如下所示），它不会正确拾取该行：

```
SELECT * FROM batches WHERE FilePath LIKE '%Parker_Apple_Ben_20-10-1956\%' 
```

有趣的是，如果我在 LIKE 子句的开头放置一个 '\' 字符（如下所示），它会很好地拾取该行 - 这让我感到困惑。

```
SELECT * FROM batches WHERE FilePath LIKE '%\Parker_Apple_Ben_20-10-1956%' 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T12:09:18.817

在 LIKE 中，`_`是一个匹配单个字符的通配符，因此需要转义才能正确匹配文字 '_' 而不是可能匹配任何内容。此外，您还提到尝试将以 1830 结尾的字符串与以 1956 结尾的类似字符串进行匹配。最后，正如 JW 和 MySQL 文档所提到的，您需要两次转义反斜杠

[http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

> 因为 MySQL 在字符串中使用 C 转义语法（例如，“\n”表示换行符），所以您必须将在 LIKE 字符串中使用的任何“\”加倍。例如，要搜索“\n”，请将其指定为“\n”。要搜索“\”，请将其指定为“\\”；这是因为反斜杠被解析器剥离一次，并且在进行模式匹配时再次剥离，留下一个反斜杠进行匹配。

尝试

```
SELECT * FROM batches 
WHERE FilePath LIKE '%Parker\_Apple\_Ben\_20-10-1830\\\\%' 
```

[http://sqlfiddle.com/#!2/3ce74/3](http://sqlfiddle.com/#!2/3ce74/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T11:58:37.443

添加`\`当前查询转义`%`，试试这个

```
SELECT * FROM batches WHERE FilePath LIKE '%Parker\_Apple\_Ben\_20-10-1956\\\\%' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/68003/2)

> 要搜索“\”，请将其指定为“\\\\”；这是因为反斜杠被解析器剥离一次，并且在进行模式匹配时再次剥离，留下一个反斜杠进行匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T12:00:26.540

使用四重转义：

```
SELECT * FROM batches WHERE FilePath LIKE '%Parker_Apple_Ben_20-10-1956\\\\%' 
```

[在这里解释](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:58:08.240

您应该转义您的 '\' 字符。试试这个：

```
SELECT * FROM batches WHERE FilePath LIKE '%Parker_Apple_Ben_20-10-1956\\%' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T11:58:38.270

这是因为`\%`在 MySQL 中是一个转义字符，有关更多信息，请参阅以下内容：

[https://stackoverflow.com/a/881208/1666167](https://stackoverflow.com/a/881208/1666167)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T12:00:03.730

您应该在 mysql 中转义特殊字符，如 \、'、_ 等，如`\\`, `\'`,`\_`

# android - Android 水平滚动菜单（如谷歌位置）

> ID：15810405
> 
> 赞同：2
> 
> 时间：2013-04-04T11:55:44.883
> 
> 标签：android, android-listview, android-imageview, android-menu

我想在谷歌位置应用程序中实现一个菜单。

它看起来像水平滑动菜单，但如果您向右移动指针，图像会向左滑动。onClick 事件在手指释放后触发，无需额外点击

![屏幕截图](https://i.stack.imgur.com/hkoNR.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:02:52.417

创建一个水平`LinearLayout`并将其添加到您想要的 clickable `ImageView`s。最后将所有这些包装在一个 中`HorizontalScrollView`，就像这样（这个例子是带按钮的）：

```
 <HorizontalScrollView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="47dp"
        android:scrollbars="none" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:background="@drawable/bar_edit"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/bAll"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/button1_all"
                android:clickable="true"
                android:onClick="onTasksListFilterButtonPressed"
                android:text="@string/all"
                android:textColor="@color/my_black" />

            <Button
                android:id="@+id/bWaiting"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/button2_pending"
                android:clickable="true"
                android:onClick="onTasksListFilterButtonPressed"
                android:text="@string/waiting"
                android:textColor="@color/my_white" />

            <Button
                android:id="@+id/bInProgress"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/button3_in_progress"
                android:clickable="true"
                android:onClick="onTasksListFilterButtonPressed"
                android:text="@string/inprogress"
                android:textColor="@color/my_white" />

            <Button
                android:id="@+id/bOnTheWay"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/button4_on_the_way"
                android:clickable="true"
                android:onClick="onTasksListFilterButtonPressed"
                android:text="@string/ontheway"
                android:textColor="@color/my_white" />

            <Button
                android:id="@+id/bComplete"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/button5_complete"
                android:clickable="true"
                android:onClick="onTasksListFilterButtonPressed"
                android:text="@string/complete"
                android:textColor="@color/my_white" />

            <Button
                android:id="@+id/bFailed"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/button6_failed"
                android:clickable="true"
                android:onClick="onTasksListFilterButtonPressed"
                android:text="@string/failed"
                android:textColor="@color/my_white" />
        </LinearLayout>
    </HorizontalScrollView> 
```

# sharepoint - 在引用项目上自动运行工作流？

> ID：15810411
> 
> 赞同：1
> 
> 时间：2013-04-04T11:55:55.937
> 
> 标签：sharepoint, sharepoint-2010

我们有一个列表 (Products)，它用作另一个列表 (Sales) 中的查找列。

现在，如果编辑了产品列表中的一个项目，那么是否有可能启动一个工作流，该工作流将在销售列表中引用产品列表的所有项目上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T17:43:17.217

你打算使用什么工具？如果是 SharePoint Designer，恐怕你不能这样做，因为 SharePoint Designer 在查询指定列表中的多个项目时很弱（销售，在你的情况下）。

尽管如此，如果您打算用代码弄脏自己的手，那绝对是肯定的。我假设您已经在销售清单上设计了您的工作流程。在“产品”列表中为“项目更新”事件注册一个事件处理程序。[Karine 有一篇关于在此处](http://karinebosch.wordpress.com/walkthroughs/event-receivers-walkthrough4/)注册事件处理程序的好帖子。

在事件接收器中，您必须输入以下代码：

```
//Opening a connection to the site
using (SPWeb web=properties.OpenWeb())
{
    //Getting Sales List
    SPList SalesList=web.Lists["Sales"];

    //Building and executing a CAML query to be executed on the sales list to retrieve sales that are related to the product item currently being updated. Note that you need to replace 'RelatedProduct' with the name of the lookup field in sales list that looks up on items in products list.
    SPQuery qRelatedSales=new SPQuery();
    qRelatedSales.Query=string.Format("<Where><Eq><FieldRef Name='RelatedProduct' LookupId='TRUE' /><Value Type='Lookup'>{0}</Value></Eq></Where>",properties.ItemId);
    SPListItemCollection relatedSales=SalesList.GetItems(qRelatedSales);

    //starting workflow on each related sales item. Note that you have to replace "Your Workflow Name" with the title of your workflow on sales list.
    SPWorkflowAssociation assoc = SalesList.WorkflowAssociations.GetAssociationByName("Your Workflow Name", CultureInfo.CurrentUICulture);
    foreach(SPListItem relatedSale in relatedSales)
    {
        web.Site.WorkflowManager.StartWorkflow(relatedSale, assoc, string.Empty, SPWorkflowRunOptions.Synchronous);
    }
} 
```

在此之后，部署项目并在产品项目更新时进行测试，事件接收器应该运行，最终，您的工作流应该在与产品相关的所有销售项目上运行。

# sql - 在sql中舍入值的函数

> ID：15810414
> 
> 赞同：-2
> 
> 时间：2013-04-04T11:56:14.113
> 
> 标签：sql, sql-server, sql-server-2008

sql 中对值进行四舍五入的任何函数。

即，如果值为 15.66，我应该得到 16 和 15.44，那么我应该得到 14。

是否有任何功能可以完成这项工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:01:07.653

嗯……应该是

```
round(your_value, 0) 
```

它将您的值四舍五入到第二个参数的位数。IE：

```
round (15.27,1) = 15,3
round (15.27,-1)= 20 
```

（是的，它也具有负面意义；）

哦，我只是认为 15.44->14 是一个错字

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:01:51.460

使用以下语法

```
Select **ROUND(column name, decimals)** FROM <table name> 
```

将小数设置为 0 以达到您的预期结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:03:34.853

`ROUND ( numeric_expression , length [ ,function ] )`

[通过这个链接](http://goo.gl/YNWZD)

虽然它很容易，你可以很容易地发现

# java - c3p0 池不工作（使用休眠和数据源，在 tomcat 上）

> ID：15810416
> 
> 赞同：2
> 
> 时间：2013-04-04T11:56:31.890
> 
> 标签：java, hibernate, tomcat, c3p0, pooling

我们有一个在 tomcat 6 上运行的 java web 应用程序，它正在调用一个 jar 以实现持久性。此 jar 位于 tomcat lib 文件夹中，并使用 tomcat 数据源：

```
<Resource name="jdbc/mydatasource"
          auth="Container"
          type="javax.sql.DataSource"
          username="USER"
          password="PASSWORD"
          driverClassName="org.postgresql.Driver"
          url="jdbc:postgresql://HOST:5432/DATABASE"/> 
```

该jar是一个java项目的二进制文件，它使用hibernate 3.5.6-Final for ORM。休眠配置如下：

```
 <property name="hibernate.c3p0.min_size">5</property>
    <property name="hibernate.c3p0.max_size">20</property>
    <property name="hibernate.c3p0.timeout">1800</property>
    <property name="hibernate.c3p0.max_statements">50</property>
    <property name="hibernate.connection.datasource">java:jdbc/mydatasource</property> 
    <property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property> 
```

起初，我们没有在应用程序中包含 hibernate-c3p0 包，因此没有使用 c3p0 设置。整个应用程序像这样正常工作。

我们添加了 hibernate-c3p0 包，以实现更好的池管理。所以这个包现在被嵌入到 jar 中以保持持久性。

但是我们现在有这个错误（它出现在每次启动后，当 weba 应用程序尝试从持久性 jar 中检索数据时）：

> [Task-Thread-for-com.mchange.v2.async.ThreadPerTaskAsynchronousRunner@eafa5f] 13:46:22 WARN - BasicResourcePool$AcquireTask: () com.mchange.v2.resourcepool.Basi cResourcePool$AcquireTask@b321c1 -- 采集尝试失败的！！！清算未决收购。在尝试获取所需的新资源时，我们未能成功超过允许的最大获取尝试次数 (30)。上次采集尝试异常：sun.jdbc.odbc.JdbcOdbcDriver.knownURL(JdbcOdbcDriver.java:476) 处 sun.jdbc.odbc.JdbcOdbcDriver.getProtocol(JdbcOdbcDriver.java:507) 处的 java.lang.NullPointerException。 odbc.JdbcOdbcDriver.acceptsURL(JdbcOdbcDriver.java:307) 在 java.sql.DriverManager.getDriver(DriverManager.java:253) 在 com.mchange.v2.c3p0.DriverManagerDataSource。

这似乎是错误的，因为似乎使用的是 Ojdbc 驱动程序而不是数据源中定义的 postgresql 驱动程序。

你知道什么会导致这个错误出现，以及如何解决它？

我在休眠配置中尝试了不同的东西，我在 stackoverflow 和不同的论坛中找到了这些东西，但没有解决问题：

```
<property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>

    <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
    <property name="driverClass">org.postgresql.Driver</property>
    <property name="hibernate.c3p0.driverClass">org.postgresql.Driver</property> 
```

我必须准确地说，我们只能控制用于持久性和 tomcat 安装的 jar。我们无法修改调用 jar 的 Web 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:39:53.830

也许你的应用程序根本不会去一个 Tomcat 配置的数据源，只是通过休眠工作？您是否尝试过跳过 Resource XML（这对于 c3p0 数据源来说并不完全正确），而只是为 c3p0 配置休眠？

```
<!-- add these -->
<property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
<property name="hibernate.connection.url">jdbc:postgresql://HOST:5432/DATABASE</property>
<property name="hibernate.connection.username">USER</property>
<property name="hibernate.connection.password">PASSWORD</property>

<!-- same as before -->
<property name="hibernate.c3p0.min_size">5</property>
<property name="hibernate.c3p0.max_size">20</property>
<property name="hibernate.c3p0.timeout">1800</property>
<property name="hibernate.c3p0.max_statements">50</property>
<property name="dialect">org.hibernate.dialect.PostgreSQLDialect</property> 

<!-- REMOVE THIS! -->
<!-- <property name="hibernate.connection.datasource">java:jdbc/mydatasource</property> --> 
```

# javascript - 需要循环功能

> ID：15810417
> 
> 赞同：0
> 
> 时间：2013-04-04T11:56:33.383
> 
> 标签：javascript, jquery, slidetoggle

嗨，我在单击图像时使用了 slideToggle 功能。假设我的页面中有四个图像，如果我单击特定图像，它必须显示与图像相关的特定内容。目前我是通过使用下面提到的脚本得到的，我为每个图像单独声明。但是我需要在我的页面中包含大约 100 张具有相同功能的图像，我不能重复该功能 100 次，这不是一个好习惯。那么任何人都可以帮助我如何在不重复该功能的情况下使用单个循环来获得它。

```
 <script type="text/javascript">
        $(document).ready(function() {
            $(".img").click(
    function() {
        if ($(this).hasClass('on')) {
            $(this).removeClass('on').addClass('off');
        } else if ($(this).hasClass('off')) {
            $(this).removeClass('off').addClass('on');
        }
        $(function() {
            $(".hide-con").slideToggle("800");
        });

    });

            $(".img1").click(
    function() {
        if ($(this).hasClass('on')) {
            $(this).removeClass('on').addClass('off');
        } else if ($(this).hasClass('off')) {
            $(this).removeClass('off').addClass('on');
        }
        $(function() {
            $(".hide-con1").slideToggle("800");
        });

    });

            $(".img2").click(
    function() {
        if ($(this).hasClass('on')) {
            $(this).removeClass('on').addClass('off');
        } else if ($(this).hasClass('off')) {
            $(this).removeClass('off').addClass('on');
        }
        $(function() {
            $(".hide-con2").slideToggle("800");
        });

    });

            $(".img3").click(
    function() {
        if ($(this).hasClass('on')) {
            $(this).removeClass('on').addClass('off');
        } else if ($(this).hasClass('off')) {
            $(this).removeClass('off').addClass('on');
        }
        $(function() {
            $(".hide-con3").slideToggle("800");
        });

    });

            $(".img4").click(
    function() {
        if ($(this).hasClass('on')) {
            $(this).removeClass('on').addClass('off');
        } else if ($(this).hasClass('off')) {
            $(this).removeClass('off').addClass('on');
        }
        $(function() {
            $(".hide-con4").slideToggle("800");
        });

    });
        });
</script> 
```

**HTML**

```
<div class="img on"></div>
<div class="hide-con">
    <h1>Background</h1>
    <p><strong>Textile-India (T-India)</strong> is an Indian company engaged </p>
</div>  

<div class="img1 on"></div>
<div class="hide-con1">
    <h1>Background</h1>
    <p><strong>Textile-India (T-India)</strong> is an Indian company engaged </p>
</div>  

<div class="img2 on"></div>
<div class="hide-con2">
    <h1>Background</h1>
    <p><strong>Textile-India (T-India)</strong> is an Indian company engaged </p>
</div>  

<div class="img3 on"></div>
<div class="hide-con3">
    <h1>Background</h1>
    <p><strong>Textile-India (T-India)</strong> is an Indian company engaged </p>
</div>  

<div class="img4 on"></div>
<div class="hide-con4">
    <h1>Background</h1>
    <p><strong>Textile-India (T-India)</strong> is an Indian company engaged </p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:57:57.153

您应该只定义一个类`img`并将您今天的类用作 id ：

```
<img class=img id=img3 src=...>

$(".img").click(function() {
    if ($(this).hasClass('on')) {
        $(this).removeClass('on').addClass('off');
    } else if ($(this).hasClass('off')) {
        $(this).removeClass('off').addClass('on');
    }
    $(".hide-con"+this.id.slice(3)).slideToggle("800"); // extracts the number from the id
}); 
```

请注意，我删除了无用的`$.ready`包装器。

你最好也使用`id=hide-con3`代替`class=hide-con3`和使用 `$("#hide-con"+this.id.slice(3))`来选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:01:18.980

尝试使用属性选择器和`^`运算符

```
$(document).ready(function() {
 $("img[class^='img']").click(function(){
    if ($(this).hasClass('on')) {
        $(this).removeClass('on').addClass('off');
    } else if ($(this).hasClass('off')) {
        $(this).removeClass('off').addClass('on');
    }

     //you don't have to wrap this in ready function again  
     $(".hide-con").slideToggle("800");
  });
}); 
```

这选择所有以类开头的img`img`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:02:10.103

这就是你将如何使用`for`循环来完成的。

```
for (var i = 0; i < 100; i++) {
    var n = i == 0 ? '' : i;
    $(".img" + n).click(function () {
        if ($(this).hasClass('on')) {
            $(this).removeClass('on').addClass('off');
        } else if ($(this).hasClass('off')) {
            $(this).removeClass('off').addClass('on');
        }
        (function (n) {
            $(function () {
                $(".hide-con" + n).slideToggle("800");
            });
        })(n);
    });
} 
```

我建议不要使用这种方法，并按照每个人的建议采用适当的基于类的解决方案。基于类的解决方案的唯一挑战是如何处理`.hide-con`，获得它取决于它相对于关联的`.img`.

您可能想知道这部分内容是什么：

```
(function (n) {
    $(function () {
        $(".hide-con" + n).slideToggle("800");
    });
})(n); 
```

如果没有这个包装函数，每次`.img`点击都会调用`slideToggle()`，`.hide-con100`因为 的值`n`将被保留。为了绕过它，我们调用一个匿名函数并给它赋值`n`，在函数内部它现在是它自己的变量，所以增加外部变量不会影响它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:02:59.460

代替

```
$(function() {
        $(".hide-con3").slideToggle("800");
}); 
```

和

```
$(this).slideToggle("800"); 
```

这将确保只有选定的实例切换而不是全部切换，并在所有图像上使用相同的类。

# javascript - 如何在 spin.js 中重新绑定控制器？

> ID：15810422
> 
> 赞同：1
> 
> 时间：2013-04-04T11:56:44.300
> 
> 标签：javascript, javascript-events, spine.js

在元素（this.el）在DOM中之前初始化控制器时如何重新绑定控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:26:35.943

我找到了一个简单的解决方案。您需要向 Spine 控制器添加新方法。此方法与 Controller.replace 基本相同，但不替换 DOM 元素。

```
Spine.Controller.prototype.rebind = function(element) {
    var previous, _ref;
    _ref = [this.el, $(element.el || element)], previous = _ref[0], this.el = _ref[1];
    this.delegateEvents(this.events);
    this.refreshElements();
    return this.el;
}; 
```

# c++ - 调试服务器

> ID：15810423
> 
> 赞同：1
> 
> 时间：2013-04-04T11:56:52.667
> 
> 标签：c++, debugging, remote-debugging

我有一个 C++ 服务器。在开发和测试代码时，客户端可以在 DE 中的调试控制下运行，但我假设调试服务器意味着我必须求助于嵌入打印语句来生成对“终端”的诊断并记录文件，这就是我所做的。

是否存在“调试包装器”，以便您在封闭的调试环境的控制下调用服务器。这样的包装器需要它自己的 gui 和对源代码的访问权限。是的，我现在已经超出了我的深度。

谁能帮忙，或者温和地向我解释为什么这是一个愚蠢的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:15:37.333

关键是服务器只是一个程序，而调试器只是一个程序。唯一的魔力是运行时环境（操作系统）使调试程序可以检查和操作其他程序。调试器需要被告知要调试哪个程序。*你如何*做到这一点取决于调试器。如果您对您的计算机及其操作系统有更多的了解，而不仅仅是一些 GUI 魔术，这将很有帮助。

例如，在 Unix 上，我可以使用以下 shell-script 命令启动服务器：

```
 myserver & 
```

我可能会在前台启动它：

```
 myserver 
```

我会在调试器的控制下`gdb`在前台启动它，因此：

```
 gdb myserver 
```

# c# - 使用 LINQ C# 计算 MTBF

> ID：15810426
> 
> 赞同：0
> 
> 时间：2013-04-04T11:57:04.273
> 
> 标签：c#, linq

我的数据按以下格式列出，（时间值相同，用于示例）

```
 ID Result      StartTime                EndTime
 1  Fail    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 2  Fail    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 3  Pass    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 4  Fail    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 5  Fail    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 6  Pass    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 7  Fail    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 8  Pass    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 9  pass    4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM
 10  pass   4/2/2013 1:17:29 PM     4/2/2013 1:19:30 PM 
```

我必须使用 ∑ (T1,T2,…Tn) / n 找到 MTBF，其中 n 是故障数，T1,T2,…Tn 是指发生故障之前的正常运行时间。到目前为止，我已经能够计算出每次迭代的经过时间，

```
using (DatabaseEntities entities = new DatabaseEntities())
{
    var result = entities.ExecutionDetails.Select(p => p);
    foreach (var p in result)
    {
        if (p.StartTime.HasValue && p.EndTime.HasValue)
        {
            var duration = (p.EndTime.Value - p.StartTime.Value).ToString("c");
            Console.WriteLine("Duration" + duration);
        }
    }
} 
```

你能帮我找到正确的方法和查询来捕获相关数据以计算 MTBF。谢谢。

更新代码

```
var results = entities.TestExecutionDetails.ToList();

            var failures = results.Where(p => p.Result == "Fail").Select(p => p); 

            foreach(var p in failures)
            {
             if (p.StartTime.HasValue && p.EndTime.HasValue)
             {

                 var elapsedduration = elapsedduration + (p.EndTime.Value - p.StartTime.Value).ToString("c");

             }

             var mtbf = elapsedduration / failures.Count(); 
```

最终更新

```
 TimeSpan elaspsedduration = new TimeSpan(0);
             ........
              .....
             foreach (var p in uptime)
            {
                Console.WriteLine("Uptime is" + uptime);
                if (p.StartTime.HasValue && p.EndTime.HasValue)
                {
                    elaspsedduration += (p.EndTime.Value - p.StartTime.Value);
                }
             var mtbf = elaspsedduration.TotalSeconds / failures;

            Console.WriteLine("MTBF Value is " + mtbf); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:09:32.110

我认为类似的事情可能会完成这项工作。

```
var results = entities.ExecutionDetails.ToList();

var failures = results.Where(p => p.Result == "Fail");

var sigmaDiff = failures.Sum(p => p.EndTime.Subtract(p.StartTime));

var mtbf = sigmaDiff/failures.Count(); 
```

# java - 通过 Wifi 将 Android 应用程序与 PC 应用程序通信

> ID：15810427
> 
> 赞同：0
> 
> 时间：2013-04-04T11:57:11.843
> 
> 标签：java, android, android-wifi

我正在制作一个 Android 应用程序，它将通过 Wifi 发送一个 UDP 广播。并且有一个PC程序来接收它。这是代码：

这是用户权限`AndroidManifest.xml`

```
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

**DeviceManagerWindow.java**

```
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.Menu;

public class DeviceManagerWindow extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_device_manager_window);
        WifiManager wifi = (WifiManager)getSystemService( Context.WIFI_SERVICE );
        if(wifi != null)
        {
            WifiManager.MulticastLock lock = wifi.createMulticastLock("WifiDevices");
            lock.acquire();
        }
        Thread sendMulticast = new Thread(new MultiCastThread());
        sendMulticast.start();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.device_manager_window, menu);
        return true;
    }

} 
```

此文件发送多播数据包：

**MultiCastThread.java**

```
public class MultiCastThread implements Runnable
{
    MulticastSocket s;
    DatagramPacket pack;
    public MultiCastThread()
    {
        try
        {
            s = new MulticastSocket(WifiConstants.PORT_NO);
            s.joinGroup(InetAddress.getByName(WifiConstants.GROUP_ADDR));
        }
        catch(Exception e)
        {
            Log.v("Socket Error: ",e.getMessage());
        }
    }
    @Override
    public void run()
    {
        try
        {
            pack = new DatagramPacket(WifiConstants.WHO_IS.getBytes(),WifiConstants.WHO_IS.getBytes().length, InetAddress.getByName(WifiConstants.GROUP_ADDR), WifiConstants.PORT_NO);
            s.setTimeToLive(WifiConstants.TIME_TO_LIVE);
            s.send(pack);
        }
        catch(Exception e)
        {
            Log.v("Packet Sending Error: ",e.getMessage());
        }
    }
} 
```

**WifiConstants.java**

该文件记录了 Wifi 交互的常量。

```
public class WifiConstants
{
    public static final int PORT_NO = 5432;
    public static final String GROUP_ADDR = "225.4.5.6";
    public static final int DGRAM_LEN = 1024;
    public static final String WHO_IS = "Who is?";
    public static final int TIME_TO_LIVE = 100;
} 
```

在我的系统上，我正在运行一个 java 代码来接收数据包并在控制台中打印它。

**ListenerDevice.java**

```
package Receiver;

import java.net.DatagramPacket;
import java.net.InetAddress;
import java.net.MulticastSocket;

public class ListenerDevice
{
    public static final int PORT_NO = 5432;
    public static final String GROUP_ADDR = "225.4.5.6";
    public static final int DGRAM_LEN = 1024;
    public static final String WHO_IS = "Who is?";
    public static final int TIME_TO_LIVE = 1;
    public static void main(String[] args)
    {
        MulticastSocket socket = null;
        DatagramPacket inPacket = null;
        byte[] inBuf = new byte[DGRAM_LEN];
        try
        {
          //Prepare to join multicast group
          socket = new MulticastSocket(PORT_NO);
          InetAddress address = InetAddress.getByName(GROUP_ADDR);
          socket.joinGroup(address);

              while(true)
              {
                    System.out.println("Listening");
                    inPacket = new DatagramPacket(inBuf, inBuf.length);
                    socket.receive(inPacket);
                    String msg = new String(inBuf, 0, inPacket.getLength());
                    System.out.println("From :" + inPacket.getAddress() + " Msg : " + msg);
              }
        }
        catch(Exception ioe)
        {
            System.out.println(ioe);
        }
      }
} 
```

这是发送数据，但在 PC 端不接收。两个设备都连接到同一个网络。

我还创建了一个用于在移动设备上接收数据包的类。它正在接收正在发送的数据包。

我应该怎么做才能连接这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:52:11.307

两个设备都应该连接到同一个**网络**。当您将数据包从模拟器发送到 PC 时，它驻留在同一系统上。因此，您不会遇到任何问题。但是由于您要将数据包从 PC 发送到移动设备，因此这两个设备应该共享同一个网络。

如果两个设备都连接到网络，**效率**会更高。`unfirewalled`因为防火墙可能会在发送数据包时造成麻烦。

这是我得出的结论。

# django - nginx 背后的 Django：获取远程 IP 地址的安全可靠的方法

> ID：15810428
> 
> 赞同：2
> 
> 时间：2013-04-04T11:57:13.627
> 
> 标签：django, nginx

我有一个 Django 服务器在 nginx 代理后面运行。我目前正在尝试通过读取来确定远程地址`request.META['REMOTE_ADDR']`。更准确地说：一个限制尝试暴力破解我的用户密码的应用程序（Django-brutebuster）正在这样做。

由于 Django 在 nginx 后面，`REMOTE_ADDR`因此是 Nginx 的地址（127.0.0.1），所以这并不是很有帮助。它还通过故意猜错密码打开了我的 DOS 应用程序，因为从蛮力破坏者的角度来看，每个人都在同一个 IP 上。

我在这个论坛上发现了类似的问题：

*   [Django 获取 IP 只返回 127.0.0.1](https://stackoverflow.com/questions/4512341/django-get-ip-only-returns-127-0-0-1)
*   [REMOTE_ADDR 未使用 nginx 和龙卷风发送到 Django](https://stackoverflow.com/questions/1627901/remote-addr-not-getting-sent-to-django-using-nginx-tornado)
*   [如何将远程 IP 传递给代理服务？- Nginx](https://stackoverflow.com/questions/4880283/how-to-pass-the-remote-ip-to-a-proxied-service-nginx)

我想拼图的部分可以在上面找到。但是，我也认为他们为新的攻击向量打开了应用程序。具体来说，如果 Django 出于某种原因没有在 nginx 后面运行，那么自动检查 X-something 标头会从客户端打开欺骗这些标头。

令我有些惊讶的是，在上述任何问题和答案中似乎都没有提到“正确且唯一的方法”（TM）。Django 没有针对此问题的规范解决方案吗？除此之外，我们能否提出一个至少不会造成安全问题的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:55:58.690

“The Right & Only Way To Do This” (TM) 的问题在于它需要为应用程序和部署配置提供说明。

Django 曾经有一个`SetRemoteAddrFromForwardedFor`中间件，但由于“这种机制不能足够可靠地用于通用用途”而被删除（您可以查看[django 1.1 的发行说明](https://docs.djangoproject.com/en/1.5/releases/1.1/#removed-setremoteaddrfromforwardedfor-middleware)）

您正确地描述了问题 - 您**通常不能信任**Django 应用程序收到的所有标头。此类标头的情况太多特定于部署，这就是它缺乏通用解决方案的原因。

要保护此类标头，您需要在 nginx/haproxy/whatever 上强制设置此标头。

# javascript - 带有 document.ready() 侦听器的动态脚本未使用 ajax 跨域调用执行

> ID：15810433
> 
> 赞同：3
> 
> 时间：2013-04-04T11:57:30.783
> 
> 标签：javascript, jquery, ajax, cross-domain, jquery-events

这是跨域的脚本代码。我进行 ajax 调用以在我的域中加载此脚本但不执行。这可以在我将`alert('something')`框放在`document.ready()`方法顶部时执行。请参阅第二个代码部分。

一个。第一部分没有警报

```
 <script>
    $(document).ready(function(){
         // .... Some javascript
    });
 </script> 
```

湾。第二部分带有警报及其执行。

```
<script>
    alert('something');
    $(document).ready(function(){
        // .... Some javascript
    });
</script> 
```

# javascript - jQuery不断发射悬停

> ID：15810443
> 
> 赞同：0
> 
> 时间：2013-04-04T11:58:02.030
> 
> 标签：javascript, jquery, html

我希望悬停功能在鼠标悬停在当前我正在使用的 div 上时不断触发，但它只触发一次。它监视鼠标的位置，并说明它是在第 1 节还是在第 2 节。

```
 $(".rating-image").mouseover(function(e){
        var offset = $(this).offset();
    where=(e.clientX - offset.left);
    if(where<=28){alert('1');}
    if(where>28){alert('2');}
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:13:42.597

使用`mousemove`会成功！

# javascript - 如果框架使用外部源，框架对象的文档属性不起作用？

> ID：15810445
> 
> 赞同：0
> 
> 时间：2013-04-04T11:58:06.233
> 
> 标签：javascript

当我试图从外部资源中检索一些数据时，我遇到了一些有趣的事情。当我将它与我自己的网站一起使用时，它可以正常工作，但使用外部资源却不能。

```
 doc = parent.Frame2.document;  
   alert(doc); 
```

来源`Frame2`是执行此脚本的网站主页，我收到消息“对象 HTML 文档”

但是，例如，当我将源更改为另一个时

它是：
`<frame name='Frame2' src="mysite.com'>` 我把它改成了：

```
<frame name="Frame2" src="http://cnn.com"/> 
```

得到了`"undefined"`。这是为什么？谁能解释一下？

我也尝试过 `contentDocument` ， `windowDocument` 正如在一堆类似问题中所描述的那样，但仍然没有运气。我只是初学者，我希望有人能向我解释，或者建议我可以用来在这件事上取得成功的其他方法，我也希望有人会觉得它有用。

感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:09:46.990

您遇到的是[**同源策略**](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)。

这是防止恶意网站访问其他网站的私有数据的安全功能，适用于[*XMLHttpRequest*](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)和`<iframe>`s。

实现成功的方法是使用您的服务器通过一些脚本代理页面，或设置[**CORS**](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)。
CORS 主要适用于*XMLHttpRequest*（我认为浏览器在`<iframe>`s 中忽略它）并要求您控制服务器发送给您要从中检索数据的 HTTP 标头，因为您需要发送允许您的站点（或所有通配符的网站`*`）。

# computer-science - 非流水线处理器

> ID：15810451
> 
> 赞同：1
> 
> 时间：2013-04-04T11:58:13.997
> 
> 标签：computer-science

每个人都知道要执行的指令必须分为多个阶段，例如取指，指令解码等.......

在流水线指令处理器中，每个阶段都在一个周期内完成，并且可能在一个周期内完成不同指令的不同阶段（指令在不同阶段重叠）

在非流水线处理器中，指令是按顺序完成的（没有重叠），我的问题是在非流水线处理器中，指令是在一个周期内完成（所有阶段）还是在一个周期内完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:57:57.003

每条指令至少要从缓存中取出（1 个周期）并进行解码（1 个周期）。只有这样才能执行（nr 个周期取决于指令）。因此不可能在 1 个周期内执行任何指令（包括其获取和解码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T08:22:54.793

绝对有可能实现一个非流水线 CPU，它在一个周期内评估每条指令。例如，参见[J1 内核](http://www.excamera.com/sphinx/fpga-j1.html)：在时钟的上升沿从块 RAM 获取数据，在下降沿完成回写。

指令可以足够简单以使关键路径短（并且时钟速率相当高）。

虽然，大多数历史上的 pre-RISC 内核曾经是多周期的。[此处](http://www.public.iastate.edu/~jchargo/portfolio/MulticycleProcessor.pdf)解释了这种 CPU 的典型设计。

# c# - 使用 C# 进行安全磁盘操作

> ID：15810454
> 
> 赞同：0
> 
> 时间：2013-04-04T11:58:17.530
> 
> 标签：c#, io

我有以下问题。现在，我们正在关闭时写出配置文件。碰巧用户在写入过程中遇到了进程终止，导致配置损坏。因此，我必须确保磁盘上的文件始终正确，并且不存在部分写入的文件等。当然，我可以自己使用备份文件实现一些模式（比如写入备份，然后用新文件替换旧文件，一些逻辑来检测和恢复失败的写入......）但也许有一种框架那里已经处理了这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:08:35.787

**Windows Vista 引入的事务性 NTFS**允许在文件系统上执行原子操作（读取、写入、删除...）。

这是一个可用于 .Net 的托管包装器：http: [//archive.msdn.microsoft.com/txfmanaged](http://archive.msdn.microsoft.com/txfmanaged)

请注意，遗憾的是，微软正在考虑弃用 Windows 的这一强大功能。请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/hh802690(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh802690(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:23:50.157

您可以将配置文件写入临时文件，然后使用以下方法将实际文件替换为临时文件`Sysyem.IO.File.Replace`：

```
string config = @"C:\my_config.xml";
string backup = @"C:\my_config.bak";
string temp = @"C:\temp_config.xml";

SaveConfigurationTo(temp);
File.Replace(temp, config, backup); 
```

如果您不想创建旧配置文件的备份，则可以`null`作为第三个参数传递。

请参阅： MSDN 上的[File.Replace 方法](http://msdn.microsoft.com/en-us/library/9d9h163f%28v=vs.90%29.aspx)。

# javascript - 即使服务器关闭，如何让 JavaScript 功能继续运行？

> ID：15810457
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:58:21.600
> 
> 标签：javascript, tomcat, grails, application-shutdown

我正在编写一个 Grails 应用程序来重新启动应用程序服务器。

单击链接时，我调用了一个 javascript 函数，该函数将在 15 秒后重新加载和重定向。在链接的控制器操作中，我调用了一个 unix 脚本，在该脚本中我执行了 tomcat 关闭和启动。

js 函数启动但随服务器关闭。无论如何，在后台发生重新启动时，用户是否可以看到重新加载/等待页面。磷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:02:04.667

在重新加载/等待页面中，有一个 JavaScript 函数每隔 N 秒向服务器发出一次 AJAX 请求，直到请求最终成功，表明服务器已重新启动。然后重定向到服务器提供的某个页面。

# javascript - localScroll jquery 插件问题

> ID：15810461
> 
> 赞同：0
> 
> 时间：2013-04-04T11:58:28.273
> 
> 标签：javascript, jquery, smooth-scrolling

我有一些关于 localScroll jquery 插件的教程，用于平滑滚动到页面中的特定锚标记。该示例显示，如果单击链接，页面将移动到标记。我想以不同的方式实现它。我想通过更改下拉列表的值在 div 内滚动。但它不起作用。整个代码如下。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>jQuery scrollTo & localscroll Demo</title>
    <!-- Load jQuery -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <!-- Load ScrollTo -->
    <script src="http://flesler-plugins.googlecode.com/files/jquery.scrollTo-1.4.2-min.js"></script>
    <!-- Load LocalScroll -->
    <script src="http://flesler-plugins.googlecode.com/files/jquery.localscroll-1.2.7-min.js"></script>
    <!-- Some CSS -->
    <style type="text/css">
    /* CSS for the big boxes */
    .box {
        width: 300px;
        height: 300px;
        color: #fff;
        padding: 10px;
        margin: 100px 0 0 0;
    }
    #box1 {
        margin: 300px 0 0 0;
        background: blue;
    }

    #box2 {
        background: red;
    }

    #box3 {
        background: green;
    }

    #box4 {
        background: gray;
    }

    /* CSS for the small boxes that will scroll inside a div */

    #small-box-container {
        border: 1px solid black;
        padding: 20px;
        width: 300px;
        height: 200px;

        overflow: scroll;
    }

    .small-box {

        color: #fff;
        padding: 10px;

        width: 200px;
        height: 200px;
        margin: 0 0 50px 0;
    }

    #small-box1 {
        background: blue;
    }

    #small-box2 {
        background: red;
    }

    #small-box3 {
        background: green;
    }

    </style>

    <!-- javascript that will initiate jQuery and the LocalScroll plugin -->
<script>
  $(document).ready(function()
  {
      $('#day_select').change(function(){
          jump = this.value;                         
          $(jump).localScroll({
             target:'#small-box-container'
          });
      });
  });
</script>

</head>

<body>
<h3>Scroll inside a div</h3>

<div id="small-box-links">
  <select id="day_select" size="1">
      <option value="#small-box1">Link to small-box #1</option>
      <option value="#small-box2">Link to small-box #2</option>
      <option value="#small-box3">Link to small-box #3</option>
  </select>
</div>

<div id="small-box-container">
  <div id="small-box1" class="small-box">Small-Box #1</div>
  <div id="small-box2" class="small-box">Small-Box #2</div>
  <div id="small-box3" class="small-box">Small-Box #3</div>
</div>

</body>
</html> 
```

专家的任何建议都非常感谢。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:22:32.040

使用此语法获取客户端控件 ID，然后使用 java 脚本访问它。

```
$("[id*=small-box-container]") 
```

# asynchronous - F# 使用可变对象异步逐行读取 csv

> ID：15810466
> 
> 赞同：0
> 
> 时间：2013-04-04T11:58:34.967
> 
> 标签：asynchronous, f#, mutable

我在这里阅读了很多帖子，这些帖子对我的问题有很大帮助，但我所有的尝试都没有结果。

听到是我的代码：

第一个函数（逐行读取文件以供使用）

```
let readLines filePath = System.IO.File.ReadLines(filePath) 
```

第二个函数（处理行）编辑：错字错误我在第一篇文章中忘记了字符串行

```
let processLine (line:string) (myobj:MYOBJ) = 
// ....  some processing
myobj  // I return the object modified 
```

现在我想用这个异步处理文件（尝试不起作用！但目的是解释我想要它做什么）

```
let processAll file =
async { // some processing
        let mutable obj = new MYOBJ()
        readLines file
        |> Seq.iter (fun l -> let obj = proceesLine l ) // I would like to modify the object after each Line
        } 
```

我尝试使用 ref 和！处理突变，但没有想出一个干净清晰的解决方案。在这种情况下，最佳代码实践是什么？

可能的解决方案：感谢您的宝贵帮助，这里有两种可能的解决方案

第一种解决方案：

```
let readL (file:string) = 
async {
        let mutable myobj = ref(new MYOBJ())
        use sr = new StreamReader(file)
        while not sr.EndOfStream do
            let line = sr.ReadLine()
            myobj := proccesLine line !myobj
            ()
        sr.Close()
        } 
```

第二个解决方案：（使用 CSVReader 库）

```
let readL (file:string) =
async {
        let myobj = new MYOBJ()
        use sr = new CsvReader(new StreamReader(file),false)
        let fcount = sr.FieldCount
        let data : string array = Array.zeroCreate fcount
        let rec readLinloop (readNext, str:CsvReader, obj:MYOBJ) = 
            match readNext with
                | false -> ()
                | true -> sr.CopyCurrentRecordPartTo(data,0)
                          let obj = processLine data obj
                          readL(str.ReadNextRecord(), str, obj)
        readLinLoop(sr.ReadNextRecord(),sr, myobj)
        sr.Dispose()
        } 
```

现在，我仍然想知道在使用 Seq.iter 时是否有可能有一个内联函数返回单位类型以外的内容。代码会更容易阅读。

编辑：iljarn 提出的解决问题的第三个解决方案

```
let processAll file =
    async { (MYOBJ(), readLines file) ||> Seq.fold processLine } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:51:33.247

这似乎是一个合适的用例[`Seq.fold`](http://msdn.microsoft.com/en-us/library/ee353471.aspx)：

```
let processAll file =
    async { (MYOBJ(), readLines file) ||> Seq.fold (fun o l -> processLine l o) } 
```

请注意，如果您颠倒`processLine`'s 参数的顺序，则可以将其简化为：

```
let processAll file =
    async { (MYOBJ(), readLines file) ||> Seq.fold processLine } 
```

# maven - 使用 maven、cargo、jetty 和 HSQL 进行系统测试的方法

> ID：15810468
> 
> 赞同：2
> 
> 时间：2013-04-04T11:58:36.883
> 
> 标签：maven, selenium, jetty, war, cargo

我一直在尝试让一些 Selenium 系统测试用例在集成测试阶段运行。我希望 Cargo 将 WAR 部署到本地 Jetty 安装。然后我希望我的测试用例运行，使用 Spring 配置文件的测试版本。目标是针对 web 应用程序运行测试，模拟所有外部依赖项，并使用 HSQL 作为数据库。

我认为这种方法是错误的：我认为在此阶段创建的 WAR 文件是“生产 WAR”，它不包括测试资源。这样做的最佳方法是什么？在“测试”阶段构建 WAR 的“测试版本”的 POM 中创建一个新配置文件？有没有例子说明如何做到这一点？我应该采取不同的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T07:36:14.997

我会使用不同的方法。使用“测试资源”进行测试的问题在于您没有测试您的真实应用程序。您的资源中可能有很多重要的“代码”，特别是如果您使用的是 Spring。我会为您的测试使用特殊配置来测试“生产 WAR”。每个外部系统（数据库、外部 Web 服务等）都应该是可配置的（使用 JNDI、外部配置文件等），而不是硬编码在 WAR 中。

以下 Maven 配置应该可以完成工作：

1.  使用[exec-maven-plugin](http://mojo.codehaus.org/exec-maven-plugin/exec-mojo.html)和 exec:exec 插件，您可以启动 HSQLDB。
2.  可以使用[sql-maven-plugin](http://mojo.codehaus.org/sql-maven-plugin/)初始化数据库（模式和表创建、数据插入） 。
3.  然后您可以使用 Cargo 在 Jetty 实例中启动您的 WAR。
4.  使用 maven-failsafe-plugin，您可以启动使用 Selenium 的 JUnit 测试。

当然，您还需要启动所有其他外部系统的模拟版本。

# php - 从结果集中获取内容到数组php

> ID：15810473
> 
> 赞同：-2
> 
> 时间：2013-04-04T11:58:43.640
> 
> 标签：php, arrays, resultset

我有一个来自 mysql Query 的结果集，查询类似于`SELECT DISTINCT c.id as course_id, c.fullname as fullname, c.shortname as shortname`，它返回为`$return[]`，我想做的是`c.id`从这个结果集中获取一个并将其存储在数组中。我有

```
foreach($returnSet as $rs)
{
    $i = 0;
    $courses=array($course->course_id[$i]);
    $i++;
} 
```

这是正确的方法吗，还是我走错了路，有人指导吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:01:47.507

它应该如下所示

```
$cources = array();
foreach($returnSet as $rs)
{
     $courses[] = $rs->course_id;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:02:22.903

我不确定我是否正确理解了您的问题，但我认为答案是：

```
$array = array();

$query = mysql_query("SELECT DISTINCT c.id as course_id, c.fullname as fullname, c.shortname as shortname") or die(mysql_error());
while($data = mysql_fetch_assoc($query)){
  $array[] = $data["course_id"];
}

print_r($array); #=> array(1, 2, 3, 4...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:04:09.113

你可以这样做：

```
$courses = array();
if (!empty($returnSet)) { //check if the $returnSet has anything inside it
   foreach($returnSet as $rs) {
      $courses[] = isset($rs->course_id) ? $rs->course_id : '';
   }
}

print_r($courses); 
```

希望这可以帮助 ：）

# java - 运行 sqlite 语句时 JRE 崩溃

> ID：15810482
> 
> 赞同：5
> 
> 时间：2013-04-04T11:59:01.583
> 
> 标签：java, sqlite, jdbc

我从来没有见过这样的事情。我花了一个多小时把它精简到我能得到的最简单的程度。

```
import java.io.File;
import java.sql.*;

public class Test {
    private static final String DB_PATH = "test.db";

    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        Class.forName("org.sqlite.JDBC");
        new File(DB_PATH).delete();

        Connection conn = null;
        Statement s = null;
        try {
            conn = DriverManager.getConnection("jdbc:sqlite:" + DB_PATH);

            s = conn.createStatement();
            s.execute("CREATE TABLE person (id integer primary key, name text)");
            s.execute("CREATE VIEW person_view AS SELECT p.id, p.name FROM person p");
            s.execute(""
                + "CREATE TRIGGER person_view_delete INSTEAD OF DELETE ON person_view "
                + "BEGIN delete from person where id = old.id; END"
            );
            s.executeUpdate("INSERT INTO person (id, name) VALUES (42, 'hi')");

            System.out.println("After this line...");
            s.executeUpdate("DELETE FROM person_view WHERE id = 42");
            System.out.println("And before this line...");
        } finally {
            try {
                if (s != null) s.close();
            } finally {
                if (conn != null) conn.close();
            }
        }
    }
} 
```

每次都会崩溃。日志文件：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x76f09b69, pid=3148, tid=5752
#
# JRE version: 7.0_15-b03
# Java VM: Java HotSpot(TM) Client VM (23.7-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [msvcrt.dll+0x9b69]  memcpy+0x259
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x0076a800):  JavaThread "main" [_thread_in_native, id=5752, stack(0x00d70000,0x00dc0000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x00000000

Registers:
EAX=0x00000002, EBX=0x00000054, ECX=0x00000000, EDX=0x00000002
ESP=0x00dbefb0, EBP=0x00dbefb8, ESI=0x00000000, EDI=0x00dbf2a0
EIP=0x76f09b69, EFLAGS=0x00010293

Top of Stack: (sp=0x00dbefb0)
0x00dbefb0:   00dbf280 00000002 00dbefe8 6c2c6d44
0x00dbefc0:   00dbf2a0 00000000 00000002 6c2e5daa
0x00dbefd0:   00000094 0523dcd0 00dbf108 00000054
0x00dbefe0:   00000000 0523cd00 00dbf258 6c2c6b44
0x00dbeff0:   00dbf280 00000000 00000002 6c2c6d44
0x00dbf000:   00dbf2f7 6c317342 00000001 00000000
0x00dbf010:   00000005 00000000 00000005 00000000
0x00dbf020:   00000007 6c317342 00dbf298 6c2c5bae 

Instructions: (pc=0x76f09b69)
0x76f09b49:   03 88 47 03 8a 46 02 88 47 02 8a 46 01 88 47 01
0x76f09b59:   8b 45 08 5e 5f c9 c3 f3 a5 ff 24 95 b8 99 f0 76
0x76f09b69:   8a 06 88 07 8a 46 01 88 47 01 8b 45 08 5e 5f c9
0x76f09b79:   c3 83 3d 44 00 fa 76 00 0f 84 b5 fd ff ff 57 56 

Register to memory mapping:

EAX=0x00000002 is an unknown value
EBX=0x00000054 is an unknown value
ECX=0x00000000 is an unknown value
EDX=0x00000002 is an unknown value
ESP=0x00dbefb0 is pointing into the stack for thread: 0x0076a800
EBP=0x00dbefb8 is pointing into the stack for thread: 0x0076a800
ESI=0x00000000 is an unknown value
EDI=0x00dbf2a0 is pointing into the stack for thread: 0x0076a800

Stack: [0x00d70000,0x00dc0000],  sp=0x00dbefb0,  free space=315k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [msvcrt.dll+0x9b69]  memcpy+0x259
C  [libsqlitejdbc-6544525787688936286.lib+0x6d44]  Java_org_sqlite_NativeDB_column_1metadata+0x46ac
C  [libsqlitejdbc-6544525787688936286.lib+0x6b44]  Java_org_sqlite_NativeDB_column_1metadata+0x44ac
C  [libsqlitejdbc-6544525787688936286.lib+0x6e5d]  Java_org_sqlite_NativeDB_column_1metadata+0x47c5
C  [libsqlitejdbc-6544525787688936286.lib+0x6ea5]  Java_org_sqlite_NativeDB_column_1metadata+0x480d
C  [libsqlitejdbc-6544525787688936286.lib+0x37a21]  Java_org_sqlite_NativeDB_column_1metadata+0x35389
C  [libsqlitejdbc-6544525787688936286.lib+0x39b3e]  Java_org_sqlite_NativeDB_column_1metadata+0x374a6
C  [libsqlitejdbc-6544525787688936286.lib+0x228ab]  Java_org_sqlite_NativeDB_column_1metadata+0x20213
C  [libsqlitejdbc-6544525787688936286.lib+0x3a05f]  Java_org_sqlite_NativeDB_column_1metadata+0x379c7
C  [libsqlitejdbc-6544525787688936286.lib+0x3a138]  Java_org_sqlite_NativeDB_column_1metadata+0x37aa0
C  [libsqlitejdbc-6544525787688936286.lib+0x3a506]  Java_org_sqlite_NativeDB_column_1metadata+0x37e6e
C  [libsqlitejdbc-6544525787688936286.lib+0x2e694]  Java_org_sqlite_NativeDB_column_1metadata+0x2bffc
C  [libsqlitejdbc-6544525787688936286.lib+0x2e924]  Java_org_sqlite_NativeDB_column_1metadata+0x2c28c
C  [libsqlitejdbc-6544525787688936286.lib+0x4331b]  Java_org_sqlite_NativeDB_column_1metadata+0x40c83
C  [libsqlitejdbc-6544525787688936286.lib+0x446c3]  Java_org_sqlite_NativeDB_column_1metadata+0x4202b
C  [libsqlitejdbc-6544525787688936286.lib+0x45200]  Java_org_sqlite_NativeDB_column_1metadata+0x42b68
C  [libsqlitejdbc-6544525787688936286.lib+0x35e54]  Java_org_sqlite_NativeDB_column_1metadata+0x337bc
C  [libsqlitejdbc-6544525787688936286.lib+0x3613d]  Java_org_sqlite_NativeDB_column_1metadata+0x33aa5
C  [libsqlitejdbc-6544525787688936286.lib+0x36219]  Java_org_sqlite_NativeDB_column_1metadata+0x33b81
C  [libsqlitejdbc-6544525787688936286.lib+0x1b1e]  Java_org_sqlite_NativeDB_prepare+0x3c
j  org.sqlite.NativeDB.prepare(Ljava/lang/String;)J+0
j  org.sqlite.DB.prepare(Lorg/sqlite/Stmt;)V+21
j  org.sqlite.Stmt.executeUpdate(Ljava/lang/String;)I+16
j  Test.main([Ljava/lang/String;)V+83
v  ~StubRoutines::call_stub
V  [jvm.dll+0x12a34a]
V  [jvm.dll+0x1d968e]
V  [jvm.dll+0x12a3cd]
V  [jvm.dll+0xaede4]
V  [jvm.dll+0xb9157]
C  [javaw.exe+0x206c]
C  [javaw.exe+0xa5a1]
C  [javaw.exe+0xa62b]
C  [kernel32.dll+0x133aa]  BaseThreadInitThunk+0x12
C  [ntdll.dll+0x39ef2]  RtlInitializeExceptionChain+0x63
C  [ntdll.dll+0x39ec5]  RtlInitializeExceptionChain+0x36

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  org.sqlite.NativeDB.prepare(Ljava/lang/String;)J+0
j  org.sqlite.DB.prepare(Lorg/sqlite/Stmt;)V+21
j  org.sqlite.Stmt.executeUpdate(Ljava/lang/String;)I+16
j  Test.main([Ljava/lang/String;)V+83
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x00e8e800 JavaThread "Service Thread" daemon [_thread_blocked, id=5104, stack(0x04a30000,0x04a80000)]
  0x00e80c00 JavaThread "C1 CompilerThread0" daemon [_thread_blocked, id=5128, stack(0x04450000,0x044a0000)]
  0x00e7f800 JavaThread "Attach Listener" daemon [_thread_blocked, id=6088, stack(0x04930000,0x04980000)]
  0x00e7c800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=4676, stack(0x047b0000,0x04800000)]
  0x00e69c00 JavaThread "Finalizer" daemon [_thread_blocked, id=5528, stack(0x04580000,0x045d0000)]
  0x00e65000 JavaThread "Reference Handler" daemon [_thread_blocked, id=1184, stack(0x044d0000,0x04520000)]
=>0x0076a800 JavaThread "main" [_thread_in_native, id=5752, stack(0x00d70000,0x00dc0000)]

Other Threads:
  0x00e63400 VMThread [stack: 0x045d0000,0x04620000] [id=1656]
  0x00ea9800 WatcherThread [stack: 0x048a0000,0x048f0000] [id=5976]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 4928K, used 1106K [0x23f00000, 0x24450000, 0x29450000)
  eden space 4416K,  25% used [0x23f00000, 0x24014aa8, 0x24350000)
  from space 512K,   0% used [0x24350000, 0x24350000, 0x243d0000)
  to   space 512K,   0% used [0x243d0000, 0x243d0000, 0x24450000)
 tenured generation   total 10944K, used 0K [0x29450000, 0x29f00000, 0x33f00000)
   the space 10944K,   0% used [0x29450000, 0x29450000, 0x29450200, 0x29f00000)
 compacting perm gen  total 12288K, used 580K [0x33f00000, 0x34b00000, 0x37f00000)
   the space 12288K,   4% used [0x33f00000, 0x33f91090, 0x33f91200, 0x34b00000)
    ro space 10240K,  45% used [0x37f00000, 0x38387290, 0x38387400, 0x38900000)
    rw space 12288K,  54% used [0x38900000, 0x38f8ace8, 0x38f8ae00, 0x39500000)

Card table byte_map: [0x00ec0000,0x00f70000] byte_map_base: 0x00da0800

Polling page: 0x004d0000

Code Cache  [0x02450000, 0x024f8000, 0x04450000)
 total_blobs=186 nmethods=38 adapters=84 free_code_cache=32107Kb largest_free_block=32877568

Compilation events (10 events):
Event: 0.288 Thread 0x00e80c00   33             sun.security.provider.SHA::implCompress (491 bytes)
Event: 0.290 Thread 0x00e80c00 nmethod 33 0x024f19c8 code [0x024f1b20, 0x024f20ac]
Event: 0.290 Thread 0x00e80c00   34             sun.nio.cs.SingleByte$Encoder::encode (114 bytes)
Event: 0.291 Thread 0x00e80c00 nmethod 34 0x024f2888 code [0x024f29a0, 0x024f2c70]
Event: 0.369 Thread 0x00e80c00   35             java.lang.String::<init> (67 bytes)
Event: 0.369 Thread 0x00e80c00 nmethod 35 0x024f42c8 code [0x024f4400, 0x024f4640]
Event: 0.370 Thread 0x00e80c00   36             java.util.Arrays::copyOfRange (63 bytes)
Event: 0.371 Thread 0x00e80c00 nmethod 36 0x024f4808 code [0x024f4960, 0x024f4cf8]
Event: 0.372 Thread 0x00e80c00   38             java.lang.Integer::reverseBytes (26 bytes)
Event: 0.372 Thread 0x00e80c00 nmethod 38 0x024f5248 code [0x024f5340, 0x024f53d0]

GC Heap History (0 events):
No events

Deoptimization events (0 events):
No events

Internal exceptions (10 events):
Event: 0.177 Thread 0x0076a800 Threw 0x23f6f700 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.181 Thread 0x0076a800 Threw 0x23f714d8 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.214 Thread 0x0076a800 Threw 0x23f7a8c8 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.216 Thread 0x0076a800 Threw 0x23f7f950 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.217 Thread 0x0076a800 Threw 0x23f85a80 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.221 Thread 0x0076a800 Threw 0x23f897e8 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.409 Thread 0x0076a800 Threw 0x23ff5c10 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.413 Thread 0x0076a800 Threw 0x23ff8c18 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.414 Thread 0x0076a800 Threw 0x23ffe960 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166
Event: 0.420 Thread 0x0076a800 Threw 0x24007ac8 at C:\jdk7u2_32P\jdk7u15\hotspot\src\share\vm\prims\jvm.cpp:1166

Events (10 events):
Event: 0.412 loading class 0x04b5af90
Event: 0.413 loading class 0x04b5af90 done
Event: 0.414 loading class 0x04bd0740
Event: 0.414 loading class 0x04bd0740 done
Event: 0.418 loading class 0x04bd0a38
Event: 0.419 loading class 0x04bd0a38 done
Event: 0.420 loading class 0x04bd06c8
Event: 0.420 loading class 0x04bd06c8 done
Event: 0.421 loading class 0x04bc42b8
Event: 0.422 loading class 0x04bc42b8 done

Dynamic libraries:
0x01020000 - 0x0104f000     C:\Program Files (x86)\Java\jdk1.7.0_15\bin\javaw.exe
0x77920000 - 0x77aa0000     C:\Windows\SysWOW64\ntdll.dll
0x75060000 - 0x75170000     C:\Windows\syswow64\kernel32.dll
0x76990000 - 0x769d7000     C:\Windows\syswow64\KERNELBASE.dll
0x751e0000 - 0x75280000     C:\Windows\syswow64\ADVAPI32.dll
0x76f00000 - 0x76fac000     C:\Windows\syswow64\msvcrt.dll
0x76ee0000 - 0x76ef9000     C:\Windows\SysWOW64\sechost.dll
0x76c10000 - 0x76d00000     C:\Windows\syswow64\RPCRT4.dll
0x75000000 - 0x75060000     C:\Windows\syswow64\SspiCli.dll
0x74ff0000 - 0x74ffc000     C:\Windows\syswow64\CRYPTBASE.dll
0x755a0000 - 0x756a0000     C:\Windows\syswow64\USER32.dll
0x767a0000 - 0x76830000     C:\Windows\syswow64\GDI32.dll
0x76550000 - 0x7655a000     C:\Windows\syswow64\LPK.dll
0x75500000 - 0x7559d000     C:\Windows\syswow64\USP10.dll
0x726c0000 - 0x7285e000     C:\Windows\WinSxS\x86_microsoft.windows.common-controls_6595b64144ccf1df_6.0.7601.17514_none_41e6975e2bd6f2b2\COMCTL32.dll
0x76fb0000 - 0x77007000     C:\Windows\syswow64\SHLWAPI.dll
0x75170000 - 0x751d0000     C:\Windows\system32\IMM32.DLL
0x75430000 - 0x754fc000     C:\Windows\syswow64\MSCTF.dll
0x676d0000 - 0x6778e000     C:\Program Files (x86)\Java\jdk1.7.0_15\jre\bin\msvcr100.dll
0x66af0000 - 0x66e3c000     C:\Program Files (x86)\Java\jdk1.7.0_15\jre\bin\client\jvm.dll
0x6f3e0000 - 0x6f3e7000     C:\Windows\system32\WSOCK32.dll
0x76ba0000 - 0x76bd5000     C:\Windows\syswow64\WS2_32.dll
0x76d20000 - 0x76d26000     C:\Windows\syswow64\NSI.dll
0x729b0000 - 0x729e2000     C:\Windows\system32\WINMM.dll
0x751d0000 - 0x751d5000     C:\Windows\syswow64\PSAPI.DLL
0x67e20000 - 0x67e2c000     C:\Program Files (x86)\Java\jdk1.7.0_15\jre\bin\verify.dll
0x677e0000 - 0x67800000     C:\Program Files (x86)\Java\jdk1.7.0_15\jre\bin\java.dll
0x6a040000 - 0x6a053000     C:\Program Files (x86)\Java\jdk1.7.0_15\jre\bin\zip.dll
0x6ea20000 - 0x6ea36000     C:\Windows\system32\CRYPTSP.dll
0x6e990000 - 0x6e9cb000     C:\Windows\system32\rsaenh.dll
0x72a00000 - 0x72a17000     C:\Windows\system32\USERENV.dll
0x729f0000 - 0x729fb000     C:\Windows\system32\profapi.dll
0x6a060000 - 0x6a074000     C:\Program Files (x86)\Java\jdk1.7.0_15\jre\bin\net.dll
0x6e9e0000 - 0x6ea1c000     C:\Windows\system32\mswsock.dll
0x73ea0000 - 0x73ea6000     C:\Windows\System32\wship6.dll
0x71f80000 - 0x71f90000     C:\Windows\system32\NLAapi.dll
0x72600000 - 0x72610000     C:\Windows\system32\napinsp.dll
0x725e0000 - 0x725f2000     C:\Windows\system32\pnrpnsp.dll
0x6d7d0000 - 0x6d814000     C:\Windows\system32\DNSAPI.dll
0x725d0000 - 0x725d8000     C:\Windows\System32\winrnr.dll
0x72060000 - 0x72065000     C:\Windows\System32\wshtcpip.dll
0x728c0000 - 0x728dc000     C:\Windows\system32\IPHLPAPI.DLL
0x728b0000 - 0x728b7000     C:\Windows\system32\WINNSI.DLL
0x741a0000 - 0x741a6000     C:\Windows\system32\rasadhlp.dll
0x6be50000 - 0x6be88000     C:\Windows\System32\fwpuclnt.dll
0x6a030000 - 0x6a03e000     C:\Program Files (x86)\Java\jdk1.7.0_15\jre\bin\nio.dll
0x6c2c0000 - 0x6c322000     C:\Users\Paul\AppData\Local\Temp\libsqlitejdbc-6544525787688936286.lib
0x72250000 - 0x7233b000     C:\Windows\system32\dbghelp.dll

VM Arguments:
jvm_args: -Dfile.encoding=Cp1252 
java_command: Test
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=C:\Program Files (x86)\Java\jdk1.7.0_15
PATH=C:/Program Files (x86)/Java/jre7/bin/client;C:/Program Files (x86)/Java/jre7/bin;C:/Program Files (x86)/Java/jre7/lib/i386;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Git\cmd;C:\Program Files (x86)\PharosSystems\Core;C:\Program Files (x86)\Java\jdk1.7.0_15\bin;C:\eclipse;
USERNAME=Paul
OS=Windows_NT
PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 15 Stepping 13, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows 7 , 64 bit Build 7601 Service Pack 1

CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 15 stepping 13, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, tsc

Memory: 4k page, physical 3143744k(933004k free), swap 6285632k(3672076k free)

vm_info: Java HotSpot(TM) Client VM (23.7-b01) for windows-x86 JRE (1.7.0_15-b03), built on Feb 15 2013 14:01:25 by "java_re" with unknown MS VC++:1600

time: Thu Apr 04 05:46:55 2013
elapsed time: 0 seconds 
```

我正在使用 sqlitejdbc-v056，并且正在 Eclipse 中进行开发。

我已将其导出为 jar 并运行它；我已经在命令行（在 Eclipse 之外）上把它编译成一个 .class 。在这两种情况下，我都无法重现这一点。

奇怪的是，如果我将视图定义为`CREATE VIEW person_view AS SELECT id, name FROM person`，我不会收到任何错误。

我个人祝贺任何能理解为什么会发生这种情况的人。（我也很想知道是否有其他人可以复制它。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:33:25.083

对于将其作为答案或评论的天气，我有两种看法。这不是 OP 的答案，但可能对未来的读者非常有用。建议未来的读者检查他们是否拥有最新版本，因为这是解决 OP 问题的原因。

**如果不是答案，我为什么要发布？...** 我刚刚遇到了一个非常相似的错误，仅根据错误无法将其与此错误区分开来。我尝试了许多不同版本的 xerial sqlite-library 并遇到了同样的问题。

在谷歌上呆了很长时间后，除了空白什么都没有，我最终发现这个错误是由我的代码触发的。我有效地呼吁：

```
conn = DriverManager.getConnection("jdbc:sqlite:" + DB_PATH);
s = conn.createStatement();
s.execute(null); // oops 
```

发生这种情况是因为我的所有查询都在运行时单独打包和加载，不正确的引用导致了应该有查询的空指针。

通常，您不希望您的代码所做的任何事情都会使 JVM 崩溃。但是，在涉及基于 JNI 的库时，情况并非总是如此。xerial sqlite-jdbc 库似乎没有进行完整的空检查，并且某些事情（例如空 SQL 查询）会导致它在空指针上崩溃 JVM。

空指针由错误文件中的地址“0x00000000”显示：

```
siginfo: ExceptionCode=0xc0000005, reading address 0x00000000 
```

然而，由于这也出现在 OP 的问题中，似乎以前版本中的错误无论如何都会导致这种情况。

# css - 使用 Twitter 引导程序实现以下布局

> ID：15810483
> 
> 赞同：0
> 
> 时间：2013-04-04T11:59:03.007
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在尝试借助 twitter bootstrap（12 列）实现以下布局：

![布局](https://i.stack.imgur.com/ZKOJM.png)

目前我有这个：

```
<div class="row">
    <div class="span6">1</div>
    <div class="span6">2</div>
    <div class="span6">3</div>
    <div class="span6">4</div>
    <!-- etc.. -->
</div> 
```

我假设它会起作用，但由于某种原因它不起作用（所有布局都搞砸了）是否需要应用修复才能使其起作用？还是使用引导程序无法实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:39:52.137

```
 <div class="row">
    <div class="span12">
        <div class="row">
            <div class="span6"></div>
            <div class="span6"></div>
        </div>
        <div class="row">
            <div class="span6"></div>
            <div class="span6"></div>
        </div>
    </div>
   </div> 
```

如果您想要行之间的空间，您可以为“行”类添加边距顶部或底部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:19:35.893

像这样的东西：

```
<div class="row">
    <div class="span6">
        <div class="row">
            <div class="span6"></div>
        </div>
        <div class="row">
            <div class="span6"></div>
        </div>
    </div>
    <div class="span6">
        <div class="row">
            <div class="span6"></div>
        </div>
        <div class="row">
            <div class="span6"></div>
        </div>
    </div>
    <!-- etc.. -->
</div> 
```

?

# ruby-on-rails - 从数据库中选择的 RoR 映射数组

> ID：15810493
> 
> 赞同：0
> 
> 时间：2013-04-04T11:59:31.550
> 
> 标签：ruby-on-rails, ruby, activerecord, map

我选择

```
m_repeats = Event.all 
```

然后我需要更改每个元素中的时间段（它是日期字段）。我需要为当前（日期）设置年份和月份

我尝试这样做：

```
m_repeats.map{ |elem| elem.schedule.year = date.year, elem.schedule.month = date.month } 
```

但我得到错误：

```
undefined method `month=' for Wed, 03 Apr 2013:Date 
```

我如何通过地图更改它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:11:26.697

There is no 'month=' method for Date class. I guess this will work,

```
m_repeats.map{ |elem| elem.schedule = Date.new(Date.today.year, Date.today.month, elem.schedule.day)} 
```

# ruby-on-rails - Rails 应用程序 + Apache Passenger + Postgres：CPU 消耗

> ID：15810494
> 
> 赞同：2
> 
> 时间：2013-04-04T11:59:32.700
> 
> 标签：ruby-on-rails, apache, passenger, cpu, rails-postgresql

我有一个 CPU 消耗问题的 Rails 3.0 应用程序。

该应用程序在 Debian 机器上的 Apache +passenger mod 上以生产模式运行。它是具有 6 Gb RAM 和 2 CPU（1 核 3GHz）的虚拟机。它是一个邮件应用程序，只需单击链接即可阅读邮件，需要在服务器上执行一系列操作来呈现页面。这个简单的点击在 2 到 3 秒内需要大约 50% 的 CPU（我用“top”命令看到它）。

问题是我在系统上有大约 150 个用户，并且 Postgresql 数据库安装在同一台机器上。当多个用户同时进行操作时，CPU 被 100% 使用并且 Postgresql 有足够的资源来接受请求。

我可以进行任何配置（Apache？Passenger？Rails？）以防止 CPU 增加和 Postgresql 崩溃？我可以在两个 CPU 上分配作业吗（我不知道是否已经如此）？

先感谢您。

雷米

编辑 ：

似乎 ruby​​ 进程为作业分配内存。但是当作业完成时，分配的内存似乎没有被释放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T06:03:50.767

我忘了提到 CPU 使用的内存也会增加。

在我的 Rails 日志中，我的错误如下：

ActiveRecord::StatementInvalid (PG::Error: FATAL: arrêt des connexions suite à la demande de l'administrateur FATAL: arrêt des connexions suite à la demande de l'administrateur

信号异常 (SIGTERM)

所以请求（选择，插入，...）被 Postgresql 拒绝。问题期间 Postgresql 的日志是空的（我想是因为 Postgresql 如果没有资源就无法写入日志）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:38:48.193

postgreSQL 真的会*崩溃*吗？那会很奇怪；我希望它会很慢，但不会崩溃。你可能还有其他问题...

您应该能够增加 postgresql 守护程序的优先级，或者减少 Unix/Linux 中的 rails 应用程序之一 :)，不错（作为 root）应该让您增加 postgresql 服务器的优先级（以便它获得 CPU它需要，而不是 rails 应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T09:29:14.743

根据您的说法，您最好的选择可能是使用连接池并尽可能多地减少同时连接的数量。这将导致更少的 PostgreSQL 内存，但更重要的是，它将导致更好的吞吐量，因为信号量和磁盘 I/O 的等待更少。毕竟，你的处理器和硬盘一次只能做这么多。一个好的起点是两倍的 CPU 内核加上磁盘轴的数量

在 Ruby 方面，这听起来像是一个垃圾收集问题。如果没有更多信息，很难说，但我会先删除你的同时 PostgreSQL 连接数，因为这是一个 Web 应用程序，因此连接不太可能长时间空闲。

# javascript - 如何将全局变量值放入 geocoder_map.geocode(..) 函数？

> ID：15810497
> 
> 赞同：0
> 
> 时间：2013-04-04T11:59:39.390
> 
> 标签：javascript, google-maps

```
var addressArr = new Array();
....
for(var i=0;i<addressArr.length;i++){
      geocoder_map.geocode( { 'address': addressArr[i]}, function(results, status) {

        alert(addressArr[i]); // here i found undefined - how i will find this value here ?

      });
} 
```

我尝试过在隐藏字段中查找值，也喜欢..

```
 var addressArr = new Array();
    ....
 document.getElementById("hidAddressStr").value = addressArr[i];
    for(var i=0;i<addressArr.length;i++){
          geocoder_map.geocode( { 'address': addressArr[i]}, function(results, status) {

            alert(document.getElementById("hidAddressStr").value); // i found only single value from here

          });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:05:50.930

尝试使用单独的功能

```
var testFunction = function(str) {
    geocoder_map.geocode( { 'address': str}, function(results, status) {
        alert(str);
    });
}

for(var i=0;i<addressArr.length;i++){
    testFunction(addressArr[i]);
} 
```

# asp.net-mvc-4 - 启用迁移后项目无法构建

> ID：15810501
> 
> 赞同：1
> 
> 时间：2013-04-04T11:59:42.770
> 
> 标签：asp.net-mvc-4, entity-framework-5, entity-framework-migrations

侧面信息：我正在学习有关复数视觉的 MVC 4 课程问题：我有一个 ASP.NET MVC4 互联网应用程序。一切都像这本书告诉我的那样，但是在`enable-migrations`进入包管理器控制台后，我得到了错误：`The project 'somesite.web' failed to build`。

我死了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T05:26:38.313

尝试自己构建项目`somesite.web`并检查详细错误。

# sql - 根据某些顺序对行进行排序

> ID：15810506
> 
> 赞同：0
> 
> 时间：2013-04-04T11:59:57.927
> 
> 标签：sql, sql-server, sql-order-by

我有一张这样的桌子

```
ID   Subject       StatusCd     Date
------------------------------------------
1    abc           3            01/03/2013
2    def           1            01/03/2013
3    ghi           2            05/03/2013
4    jkl           3            02/03/2013
5    mno           3            06/03/2013 
```

`StatusCd`我如何编写一个 SQL 查询，它将按照(3, 1, 2)的顺序对行进行排序。此外，我想根据其对组中的每一行进行排序`Date`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:03:06.057

您可以在子句中使用`CASE`表达式：`ORDER BY`

```
select id, subject, statuscd, date
from yt
order by 
  case statuscd
    when 3 then 0
    when 1 then 1
    when 2 then 2
  end, date 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/a94e5/2)。这给出了一个结果：

```
| ID | SUBJECT | STATUSCD |       DATE |
----------------------------------------
|  1 |     abc |        3 | 2013-01-03 |
|  4 |     jkl |        3 | 2013-02-03 |
|  5 |     mno |        3 | 2013-06-03 |
|  2 |     def |        1 | 2013-01-03 |
|  3 |     ghi |        2 | 2013-05-03 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:14:30.453

请试试：

```
select 
    ID, 
    [Subject], 
    StatusCd, 
    [Date] 
from
    YourTable
order by case StatusCd when 3 then 0 else StatusCd end, 
    [date] 
```

# c# - 引用不同版本的 log4net

> ID：15810510
> 
> 赞同：0
> 
> 时间：2013-04-04T12:00:13.390
> 
> 标签：c#, dependency-injection, dependencies, log4net

我们正在构建一个基于 log4net 的简单日志库。该项目有一些通用模块用于捕获未处理的异常等。

问题是我们想将此库部署到其他 Web 解决方案，例如 umbraco 和 EPiServer，它们都已经使用 log4net，并且使用不同的版本。如果我们从日志库部署 log4net 程序集，那么 umbraco 和 EPiServer 都会抱怨版本不匹配。

解决这个问题的最佳方法是什么？我在这里阅读了这种方法[http://www.claassen.net/geek/blog/2011/08/using-log4net-without-requiring-it-as-a-dependency.html](http://www.claassen.net/geek/blog/2011/08/using-log4net-without-requiring-it-as-a-dependency.html)但不确定这是否是标准化方法？

提前感谢艾尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:47:11.513

这实际上只有两种方法。一种是将您的代码加载到完全不同的 AppDomain 中，并且不依赖 umbraco 或 EPiServer。然后，您可以自由加载所需的任何版本的 log4net，因为它将是唯一加载的版本。这给您留下了依赖 umbraco 或 EPiServer 的 AppDomain 与您的 AppDomain*之间*的通信问题。这不是微不足道的。查看诸如 Microsoft Addin Framework (MAF) 之类的内容将向您展示它为何如此复杂以及如何操作。

另一种选择是使用类似 ilmerge 的工具将 log4net 程序集与您的程序集合并。这样，每当您的代码引用 log4net 时，它实际上是在引用它的私有版本。还有其他 3rd 方工具，如 SmartAssembly，在合并程序集时更可靠。我认为 ilmerge 已经有一段时间没有工作了，也没有得到真正的支持。

# php - php+curl：发送原始 tcp 请求

> ID：15810513
> 
> 赞同：0
> 
> 时间：2013-04-04T12:00:25.187
> 
> 标签：php, curl, tcp

是否可以使用 curl 和 php 发送原始 tcp 数据流？我知道 fsockopen/fputs 是此类发送的更好选择，当然我会尽可能使用它们。但是在某些服务器上，套接字功能被禁用，并且 curl 被启用。所以在这种情况下，如果可能的话，当然会非常舒适地使用 curl。例如我需要

```
$fp = fsockopen($my_ip, $my_port);
fwrite($fp, "test string"); 
```

我不能使用 fsockopen，因为它被服务器配置禁用。使用 curl 有什么技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:06:10.837

您可以使用 curl 的 Telnet 选项，如下所示：[Proper and fast way to TELNET in PHP。套接字非常慢或如何使用 PHP cURL 进行 TELNET？](https://stackoverflow.com/questions/8411182/proper-and-fast-way-to-telnet-in-php-sockets-are-damn-slow-or-how-to-telnet-wit)

所以你不会拖着 http 或 ftp 或任何协议。

之后你可以自己试试。

# iphone - dispatch_async 进入无限循环

> ID：15810520
> 
> 赞同：0
> 
> 时间：2013-04-04T12:00:49.640
> 
> 标签：iphone, ios, uitableview

我正在开发一个应用程序，我必须从 JSON 获取数据并在 UITableView 中显示。正在后台获取数据。但它似乎进入了无限循环。

任何帮助将不胜感激。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier   forIndexPath:indexPath];
queue = dispatch_queue_create("com.events.app", NULL);
dispatch_async(queue, ^{
    [self load];
    //Need to go back to the main thread since this is UI related
    dispatch_async(dispatch_get_main_queue(), ^{
        // store the downloaded image in your model
        Events *evObj = [eventsArray objectAtIndex:[indexPath row]];
        NSLog(@"evObj = %@",evObj);
        cell.textLabel.text = evObj.eName;
        cell.detailTextLabel.text = @"Detailed Text";
        [self.tableView beginUpdates];
        [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:indexPath, nil]
                              withRowAnimation:UITableViewRowAnimationLeft];
        [self.tableView endUpdates];
    });
});
    // Configure the cell...

return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:13:48.023

它进入循环，因为发送`-reloadRowsAtIndexPaths:withRowAnimation:`将触发`UITableView`向您的数据源询问另一个单元格`-tableView:cellForRowAtIndexPath:`

如果要异步更新单元格，则必须直接更新 UI 元素，但要避免重新加载整个单元格。如果事情没有自动更新，您可以发送`-setNeedsDisplay`或`-setNeedsLayout`在更新后发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:09:14.587

只需删除所有异步调用：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier   forIndexPath:indexPath];

   if(cell == nil) {
     /// load the cell.
   }

    // store the downloaded image in your model
   Events *evObj = [eventsArray objectAtIndex:[indexPath row]];
   NSLog(@"evObj = %@",evObj);
   cell.textLabel.text = evObj.eName;
   cell.detailTextLabel.text = @"Detailed Text";

   return cell;
} 
```

只需将 移至`[self load];`代码的其他部分，例如`viewDidLoad`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:21:38.193

区分数据部分和ui部分。

IE

只需调用`[self load];`一次方法，或多次调用。最好的地方是 viewDidLoad 方法左右。

重新加载数据并在 uitableview 中显示它们的实现可能如下所示（使用 GCD）

`dispatch_queue_t queue = dispatch_queue_create("com.events.app", NULL);`

```
dispatch_async(queue, ^{
[self load];

//Need to go back to the main thread since this is UI related
dispatch_async(dispatch_get_main_queue(), ^{
    [self.tableview reloadData];

//don't forget to release your queue
dispatch_release(queue);

}); 
```

});

从 rckoenes复制`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {}`方法的实现，你就完成了；）

但请记住一件重要的事情。您的第一个抛出的代码会导致很大的开销，每次调用此方法时，您都在下载、解析和设置数据，在开始时 uitableview 加载自身时至少 3 次，然后每次滚动时，它都会被调用多次您可以在屏幕上看到许多行/单元格

# c# - 尝试在 c# windows 应用程序中捕获问题

> ID：15810521
> 
> 赞同：-5
> 
> 时间：2013-04-04T12:00:56.200
> 
> 标签：c#, sql, sql-server, database, ado.net

当我执行我的程序时，当有一个现有项目时，执行必须进入 catch

```
con2=new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0DataSource=e:\\convert.accdb" + "; Persist Security Info=False");
OleDbCommand cmd = new OleDbCommand(sql, con2);           
con2.Open();           
try {
  cmd.ExecuteNonQuery();
  con2.Close();
  MessageBox.Show("Thanks");
}
catch (Exception ex) {
  MessageBox.Show(ex.Message);
  con.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:04:55.587

`catch`只有在块中存在错误时才会评估该部分`try`。因此，如果调用导致异常，那么它将落入该块，或者如果您引发异常，它也会。

`ExecuteNonQuery`返回 an `int`，因此，如果您想在返回大于 0 时抛出异常，请执行以下操作：

```
con2.Open();

try {
  if (cmd.ExecuteNonQuery() > 0) {
    throw new Exception("More than zero rows affected");
  }
  con2.Close();
  MessageBox.Show("Thnaks");
}
catch (Exception ex) {
 MessageBox.Show(ex.Message);
 con.Close();
} 
```

但即使这样也有很多不足之处。例如，您可以`finally`用于管理连接（以及您的命令，因为它们也是一次性的）：

```
try {
  if (cmd.ExecuteNonQuery() > 0) {
    throw new Exception("More than zero rows affected");
  }
  MessageBox.Show("Thanks");
}
catch (Exception ex) {
 MessageBox.Show(ex.Message);
}
finally {
  con.Close();
  con2.Close();
  cmd.Close();
} 
```

更进一步，您确定要使用异常来处理执行流程吗？这通常是不受欢迎的，因为根据他们的名字，在特殊情况下会考虑例外情况。您知道会发生什么的情况几乎没有例外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:29:49.317

听起来你正在寻找这样的东西。您需要捕获 SqlException 然后遍历其 Errors 集合以查找与您期望的错误匹配的消息。

```
try
{
  cmd.ExecuteNonQuery();
  con2.Close();
  MessageBox.Show("Thanks");
}
catch (SqlException ex)
{
   for (int i = 0; i < ex.Errors.Count; i++)
   {
        if (ex.Errors[i].Message.Contains("There is already an object named"))
        {
             /* Handle duplicate situation here */
             break;
        }
   }
}
catch (Exception ex)
{
  MessageBox.Show(ex.Message);
  con.Close();
} 
```

# c++ - TableWidget 不显示项目的更新值

> ID：15810528
> 
> 赞同：0
> 
> 时间：2013-04-04T12:01:09.707
> 
> 标签：c++, qt, qtablewidget

我正在尝试以下代码

```
QTableWidgetItem* item_a= new QTableWidgetItem("1");
QTableWidgetItem* item_b= new QTableWidgetItem("2");
QTableWidgetItem* item_c= new QTableWidgetItem("3");
ui.tableWidget->setItem(0,0,item_a); 
ui.tableWidget->setItem(0,1,item_b); 
ui.tableWidget->setItem(0,2,item_c); 

    item_c= new QTableWidgetItem("5"); //Is there anyway to update the table. 
```

我更改了 item_c 的值，但是更改没有显示在表格中，我可以在不调用 setITem 方法的情况下更新它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:05:38.423

您不会更改 item_c 的值。您正在创建一个新的 QTableWidgetItem。

如果要更改值，则需要使用 QTableWidgetItem::setText() ：

```
item = table->item( 2, 0); 
item->setText("5"); 
```

# c++ - 使用 OpenCV 进行相机校准

> ID：15810529
> 
> 赞同：0
> 
> 时间：2013-04-04T12:01:11.183
> 
> 标签：c++, opencv

我有一个项目，我必须使用 OpneCV 来获取相机矩阵，我运行 OpenCV 示例项目，我的问题是如何检查保存数据是否正确？因为对于我的第一个例子，她就是我得到的：

```
<Camera_Matrix type_id="opencv-matrix">
<rows>3</rows>
<cols>3</cols> 
```

d

4.0608614269653586e+001 0\. 3.1950000000000000e+002 0\. 4.0608614269653586e+001 2.3950000000000000e+002 0\. 0\. 1.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-12T09:18:52.670

如果您有兴趣检查您的数据是否正确保存，请回读您的矩阵。这可以通过 FileStorage 类 openCV 来完成。这是一个[写入](http://docs.opencv.org/modules/core/doc/old_xml_yaml_persistence.html?highlight=filestor#write)示例，您可以在同一页面上找到读取功能。

如果您想知道您的矩阵是否有意义，请先使用完整性检查。一个最简单的相机矩阵由以下条目组成：

[外汇，0，CX; 0, fy, cy; 0, 0, 1]

其中 fx=fy 如果像素是正方形并且 cx=w/2 和 cy=h/2 近似。鉴于您使用 640x480 图像并且焦距约为 40 像素，您的矩阵似乎是正确的。但是，后者看起来很可疑：您的相机的视野 (FOV) 可以通过以下公式计算：tan2(FOV/2) = w*0.5 / f = 320/40= 80，由此得出 FOV = 180deg ; 仅当您使用非常宽的角度长度（所谓的鱼眼）时，才会发生这种情况。如果不是这种情况，请检查您的校准程序。你用了什么代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:08:49.613

你的矩阵看起来不错，3x3 矩阵。

当您说保存数据时，您要录制视频吗？

但我建议你参考 openCV 的问答。

[http://answers.opencv.org/questions/](http://answers.opencv.org/questions/)

在这个论坛上问你的问题。

# android - Dropbox API 和 Android

> ID：15810530
> 
> 赞同：0
> 
> 时间：2013-04-04T12:01:14.970
> 
> 标签：android, dropbox-api

我正在尝试在我的 Android 应用程序中从 Dropbox 读取文件（我正在使用模拟器）。一切似乎都很好：打开浏览器并介绍我的凭据，然后单击“允许”，然后浏览器中出现下一条消息：

```
Webpage not available
The webpage at db-jar8vuiz4j3nlns://1/connect?oauth_token=...&oath_token_secret=...&uid=...
might be temporarily down or it may have moved to a new web address. 
```

那么，发生了什么事？这真的是`temporarily`Dropbox的错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:48:34.290

这似乎是 Chrome 中的一个错误：

[https://code.google.com/p/chromium/issues/detail?id=181186](https://code.google.com/p/chromium/issues/detail?id=181186)

它已经修复了，虽然修复的版本可能还没有发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T18:08:02.000

好吧，我已经解决了安装最新版本的 Dropbox Android 应用程序的问题。

# drupal - drupal_set_message drupal

> ID：15810533
> 
> 赞同：2
> 
> 时间：2013-04-04T12:01:20.540
> 
> 标签：drupal

我在 drupal 6 中创建了一个重置​​密码表单。提交时我必须重定向到同一页面显示 Drupal 消息。

我写了以下内容：

```
 global $language;

  $account = $form_state['values']['account'];

  _user_mail_notify('password_reset', $account, $language);

  watchdog('user', 'Password reset instructions mailed to %name at %email.', array('%name' => $account->name, '%email' => $account->mail));

  drupal_set_message(t('Further instructions have been sent to your e-mail address.'));

  $form_state['redirect'] = 'user/password';
  return;

} 
```

但我的邮件代码工作正常，但我的消息没有显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-07T10:12:21.870

试试这个代码，它会在同一页面上重定向你并显示消息......

```
$msg = "Further instructions have been sent to your e-mail address.";
drupal_set_message($msg, $type = 'status');
drupal_goto('user/password'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:50:59.593

*   您是否尝试过切换回 Garland（检查主题是否有问题）？
*   您是否检查过您的用户表有一个 0（零）匿名条目？由于 uid 字段的自动增量设置，有时导入的表会丢失该行。
*   消息是否显示给经过身份验证的/管理员用户？
*   我假设您的代码段是提交处理程序？我假设`$form_state`是通过引用传递的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-14T08:43:07.187

您可以尝试使用此代码重定向到带有消息的另一个页面

```
drupal_set_message(t('Further instructions have been sent to your e-mail address.'));
drupal_goto('user/password'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-21T05:56:03.463

而不是`$form_state['redirect']`使用该`drupal_goto`功能：

```
drupal_set_message(
    'Further instructions have been sent to your e-mail address.',
     'status', $repeat = FALSE);
drupal_goto('user/password'); 
```

# java - 使用 Roboguice 和 Robotium 注入包裹

> ID：15810539
> 
> 赞同：2
> 
> 时间：2013-04-04T12:01:34.950
> 
> 标签：java, android, robotium, roboguice

我在使用 Robotium 进行测试、传递 parcelables 并用 Roboguice 注入它们时遇到问题。

正如我在其他地方所读到的，我必须这样做才能传递意图附加信息

```
@Override
protected void setUp() throws Exception {
    super.setUp();
    Instrumentation instrumentation = getInstrumentation();
    Intent intent = new Intent(instrumentation.getTargetContext(), ConfirmOfferActivity.class);
    intent.putExtra(PARCELABLE_OFFER, MockOffer.create());
    setActivityIntent(intent);
} 
```

现在，当我尝试运行测试时，我在 ConfirmOffer 片段上得到了这个异常

```
 Reason: java.lang.IllegalStateException: Can't find the mandatory extra identified by key [com.parcelable.offer] on field class com.activity.offers.confirm.ConfirmOfferFragment.mOffer 
```

任何人？

# c# - 使用 ListBox 在 Windows Phone 8 应用程序中进行数据绑定

> ID：15810548
> 
> 赞同：0
> 
> 时间：2013-04-04T12:01:55.343
> 
> 标签：c#, windows-phone-7, data-binding, binding

这是我的代码。它在做什么。我有一个带有文本书名的文本框（按钮），当我单击它时，我可以使用绑定更改文本框中的文本。但是现在我为作者姓名添加了另一个文本框，我不知道如何绑定它。如果我使用与书名相同的方法，则它不起作用或书名中的文本在书作者中也是如此。所有文本都通过弹出设置页面进行更改。

我的来源在这里：[https](https://dl.dropbox.com/u/40039421/App1.rar) ://dl.dropbox.com/u/40039421/App1.rar 。图片在这里： [https ://dl.dropbox.com/u/40039421/helpp.png](https://dl.dropbox.com/u/40039421/helpp.png)

```
 public partial class MainPage : INotifyPropertyChanged
{
    private ObservableCollection<Book> _books = new ObservableCollection<Book>();
    public ObservableCollection<Book> AllBooks
    {
        get { return _books; }
        set { _books = value; }
    }

    ...

    private void InitializeData()
    {

        var bookName1 = new Book { Id = 1, BookName = "Small red apple",AuthorName = "Daniel"};
        ...

        AllBooks.Add(bookName1);
       ...

        OnPropertyChanged("AllBooks");
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(null, new PropertyChangedEventArgs(propertyName));
        }
    }

    private void btnGreenBook_Click(object sender, RoutedEventArgs e)
    {
        var button = sender as Button;
        if (button != null)
        {
            Popup popup = new Popup();
            popup.VerticalOffset = 30;
            PopupSettingPage control = new PopupSettingPage();
            popup.Child = control;
            popup.IsOpen = true;

            control.btnSave.Click += (s, args) =>
            {
                var id = Convert.ToInt32(button.Tag);
                var book = AllBooks.FirstOrDefault(sub => sub.Id == id);
                if (book != null)
                {
                    book.BookName = control.BookName;
                    book.OnPropertyChanged("BookName");

                }

                popup.IsOpen = false;
            };

           ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:02:54.120

哦，亲爱的，这是一个简单的错误:)

您忘记在 PopupSettingsPage.xaml 的 Xaml 中添加 AuthorName

```
<TextBox x:Name="tbInputAuthorName" Text="{Binding AuthorName, Mode=TwoWay}" VerticalAlignment="Center"/> 
```

然后在 MainPage 中执行此操作

```
book.BookName = control.BookName;
book.OnPropertyChanged("BookName");
book.AuthorName = control.AuthorName;
book.OnPropertyChanged("AuthorName"); 
```

根据您的评论补充答案：

为了实现这一点，您必须删除列表框中的第二个堆栈面板。而是使用 WrapPanel 控件。搜索如何使用 WrapPanel for WindowsPhone。

然后你必须想办法将背景设置为红色或绿色。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:43:06.657

好的，我使用**包装面板**，但问题仍然存在。我有两个全景项目（我从项目 1 和项目 2 发布的代码仅在第二个全景页面上显示相同的代码）并且问题仍然是如果我将一些值保存到全景项目 1 中的一个项目中，这个值也在全景项目中2我不知道怎么做。逻辑是点击全景1项改变全景1项中的值，点击全景2项改变全景2项值。它看起来像全景项目 1 与全景项目 2 具有相同的 ID。这是完整的源代码：[https ://dl.dropbox.com/u/40039421/App1SecondEdit.rar](https://dl.dropbox.com/u/40039421/App1SecondEdit.rar)

```
<Grid x:Name="LayoutRoot" Background="Transparent">
     <!--Panorama control-->
    <phone:Panorama>
        <!--Panorama item 1-->
        <phone:PanoramaItem Header="Test">
            <Grid x:Name="PanelPanoramaItem1" 
          Grid.Row="1"
          Margin="25,0,12,0">
                <ListBox ItemsSource="{Binding AllBooks}">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <toolkit:WrapPanel Orientation="Vertical"/>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                   <Button Width="140"
                            Height="140"
                            toolkit:TiltEffect.IsTiltEnabled="True" Margin="0,0,0,5" Click="Button_Click_1" Tag="{Binding Id}" >
                                            <Button.Template>
                                                <ControlTemplate>
                                                    <Grid Background="Chartreuse">
                                                        <TextBlock Foreground="Black" Text="{Binding BookName}" />
                                                    </Grid>
                                                </ControlTemplate>
                                            </Button.Template>
                                        </Button>

                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox>
            </Grid>
        </phone:PanoramaItem>
        <!-- END Panorama item 1 --> 
```

# image-processing - OpenGL ES 1.1 调制和 GL_RGB_SCALE

> ID：15810549
> 
> 赞同：0
> 
> 时间：2013-04-04T12:01:56.010
> 
> 标签：image-processing, opengl-es-1.1

在我的应用程序中，我需要将两个纹理相乘，然后将结果乘以大于 2 的因子。我为此使用 GL_MODULATE 和 GL_RGB_SCALE。我为此使用以下代码

```
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, Input.texID);
glEnable(GL_TEXTURE_2D);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, Temp64.texID);
glEnable(GL_TEXTURE_2D);
// glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, Temp64.wide, Temp64.high, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixels);

glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_COMBINE);
glTexEnvi(GL_TEXTURE_ENV, GL_COMBINE_RGB, GL_MODULATE);   
glTexEnvi(GL_TEXTURE_ENV, GL_SRC0_RGB, GL_TEXTURE);
glTexEnvi(GL_TEXTURE_ENV, GL_SRC1_RGB, GL_PREVIOUS);

glTexEnvi(GL_TEXTURE_ENV, GL_RGB_SCALE,   4.0);

glBindFramebufferOES(GL_FRAMEBUFFER_OES, SystemFBO);
glViewport(0, 0, wide, high);
//glClear(GL_COLOR_BUFFER_BIT);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); 
```

根据我对 OpenGL ES 1.1 规范的理解，首先在纹理之间进行调制，然后乘以 4，然后钳制到 [0 1]。

这就是规范所说的

“如果 TEXTURE ENV MODE 的值为 COMBINE，则纹理函数的形式取决于 COMBINE RGB 和 COMBINE ALPHA 的值，根据表 3.17。然后将纹理函数的 RGB 和 ALPHA 结果乘以RGB SCALE 和 ALPHA SCALE 的值。结果被限制在 [0, 1]。

但我注意到的是不同的。它首先将纹理单元 1 乘以 4 并夹在 [0 1] 中，然后用纹理单元 0 进行调制。但我希望在调制后应用 RGB_SCALE。

我尝试将调制结果写入 FBO，然后使用缩放，但它不起作用。

我想要做的是将一个图像与另一个图像相乘，然后将结果乘以一个高于 2 的值。在第二次乘法之前不应该有钳位。有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T00:59:27.647

在过去，我遇到了几个与纹理组合器相关的问题，类似于你提到的那些。现代硬件没有固定的功能管道，因此它的所有功能都是通过着色器实现的，其中一些实现会产生意想不到的结果。

你的目标平台是什么？我的建议是完全摆脱纹理组合器并将所有代码移动到着色器（如果您的目标平台允许的话）。

另外，如果我正确阅读了您的代码，则需要在绑定第一个纹理后放置 glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE)，以便在调用 glTexEnvi(GL_TEXTURE_ENV, GL_SRC1_RGB, GL_PREVIOUS) 时使用它。

glEnable(GL_TEXTURE_2D) 也放错了位置，应该在任何其他与纹理相关的函数之前调用它。

# hadoop - 使用自定义可写从 Hadoop Map Reduce 作业输出列表

> ID：15810550
> 
> 赞同：13
> 
> 时间：2013-04-04T12:01:58.663
> 
> 标签：hadoop, mapreduce

我正在尝试通过更改 hadoop 给出的 wordcount 示例来创建一个简单的 map reduce 作业。

我正在尝试列出一个列表而不是单词数。wordcount 示例给出以下输出

```
hello 2
world 2 
```

我正在尝试将其作为列表输出，这将成为未来工作的基础

```
hello 1 1
world 1 1 
```

我认为我在正确的轨道上，但我在编写列表时遇到了麻烦。而不是上面的，我得到

```
Hello   foo.MyArrayWritable@61250ff2
World   foo.MyArrayWritable@483a0ab1 
```

这是我的 MyArrayWritable。我在其中放了一个系统，`write(DataOuptut arg0)`但它从不输出任何东西，所以我认为该方法可能不会被调用，我不知道为什么。

```
class MyArrayWritable extends ArrayWritable{

public MyArrayWritable(Class<? extends Writable> valueClass, Writable[] values) {
    super(valueClass, values);
}
public MyArrayWritable(Class<? extends Writable> valueClass) {
    super(valueClass);
}

@Override
public IntWritable[] get() {
    return (IntWritable[]) super.get();
}

@Override
public void write(DataOutput arg0) throws IOException {
    for(IntWritable i : get()){
        i.write(arg0);
    }
}
} 
```

**编辑 - 添加更多源代码**

```
public class WordCount {

public static class Map extends Mapper<LongWritable, Text, Text, IntWritable> {
    private final static IntWritable one = new IntWritable(1);
    private Text word = new Text();

    public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
        String line = value.toString();
        StringTokenizer tokenizer = new StringTokenizer(line);
        while (tokenizer.hasMoreTokens()) {
            word.set(tokenizer.nextToken());
            context.write(word, one);
        }
    }
} 

public static class Reduce extends Reducer<Text, IntWritable, Text, MyArrayWritable> {

    public void reduce(Text key, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException {
        ArrayList<IntWritable> list = new ArrayList<IntWritable>();    
        for (IntWritable val : values) {
            list.add(val);
        }
        context.write(key, new MyArrayWritable(IntWritable.class, list.toArray(new IntWritable[list.size()])));
    }
}

public static void main(String[] args) throws Exception {
    if(args == null || args.length == 0)
        args = new String[]{"./wordcount/input","./wordcount/output"};
    Path p = new Path(args[1]);
    FileSystem fs = FileSystem.get(new Configuration());
    fs.exists(p);
    fs.delete(p, true);

    Configuration conf = new Configuration();

    Job job = new Job(conf, "wordcount");
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);
    job.setMapperClass(Map.class);
    job.setReducerClass(Reduce.class);
    job.setJarByClass(WordCount.class);
    job.setInputFormatClass(TextInputFormat.class);
    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));

    job.waitForCompletion(true);
} 
```

}

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-05T12:21:50.823

您的减速器中有一个“错误” - 值迭代器在整个循环中重复使用相同的 IntWritable，因此您应该将添加到列表中的值包装如下：

```
public void reduce(Text key, Iterable<IntWritable> values, Context context)
                                      throws IOException, InterruptedException {
    ArrayList<IntWritable> list = new ArrayList<IntWritable>();    
    for (IntWritable val : values) {
        list.add(new IntWritable(val));
    }
    context.write(key, new MyArrayWritable(IntWritable.class, list.toArray(new IntWritable[list.size()])));
} 
```

这实际上不是问题，因为您使用的是数组列表，而您的映射器只输出一个值（一个），但如果您扩展此代码，这可能会让您感到困惑。

你还需要在你的工作中定义你的 map 和 reducer 输出类型是不同的：

```
// map output types
job.setMapOutputKeyClass(Text.class);
job.setMapOutputValueClass(IntWritable.class);
// reducer output types

job.setOutputValueClass(Text.class);
job.setOutputValueClass(MyArrayWritable.class); 
```

您可能想要明确定义减速器的数量（这可能是您永远不会看到系统输出被写入任务日志的原因，特别是如果您的集群管理员已将默认数量定义为 0）：

```
job.setNumReduceTasks(1); 
```

您使用默认的文本输出格式，它在输出键和值对上调用 toString() - MyArrayWritable 没有覆盖的 toString 方法，因此您应该在 MyArrayWritable 中放置一个：

```
@Override
public String toString() {
  return Arrays.toString(get());
} 
```

最后`write`从 MyArrayWritable 中删除被覆盖的方法 - 这不是与免费的 readFields 方法兼容的有效实现。您不需要重写此方法，但如果您这样做（假设您想查看 sysout 以验证它是否被调用），那么请执行以下操作：

```
@Override
public void write(DataOutput arg0) throws IOException {
  System.out.println("write method called");
  super.write(arg0);
} 
```

# android - 如何使用 ADT 包在 android 中为 800 x 480 分辨率平板电脑创建模拟器

> ID：15810559
> 
> 赞同：2
> 
> 时间：2013-04-04T12:02:19.247
> 
> 标签：android, performance, android-emulator, adt

我正在为具有 800 x 480 屏幕分辨率和 Android 版本 4.0 的平板电脑开发 Android 应用程序。

我想在模拟器上对此进行测试，但我无法为具有 800 x 480 分辨率的平板电脑创建模拟器。我正在为 android 使用 ADT 包。

我为上述分辨率创建了一个模拟器，但它显示的是手机皮肤，而不是平板电脑皮肤。在 AVD 管理器中，我没有获得任何皮肤选项，我可以在其中选择手机或平板电脑的皮肤类型。

我的问题是：

1.  如何创建具有平板电脑皮肤类型的 800 x 480 分辨率的模拟器。
2.  什么是 Android 应用程序开发的最佳 IDE？

    i) 带有 ADT 插件的 Eclipse

    ii) 窗口的 ADT 包

请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:49:48.280

以下是答案：-

1.  转到 Android 虚拟设备管理器 -> 设备定义。双击 10.1" WXGA 平板电脑或您要编辑的任何其他 7" 平板电脑。输入分辨率 800x480 并克隆设备。现在将创建用户创建的示例设备定义。现在你可以使用这个定义来创建你自己的 avd。

2.  android 应用程序开发的最佳 IDE 是**适用于 windows 的 adt bundle**。根据我自己的经验，它比带有 ADT 插件的 eclipse 更快，并且针对 android 应用程序开发进行了优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T06:11:39.677

you can create a new device by clicking new button in Android Virtual Manager

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-01T08:57:26.883

ii 用于窗口的 ADT 捆绑包（多合一）

i 他的问题是如何制作便宜的平板电脑 avd（即 7" 平板电脑 480x800）。问题是如果您使用 480x800，AVD 会将其视为电话，如果您将其制成 7"，则存储桶是错误的。

我最接近的是（我有一个真正便宜的 7 英寸设备，它证实了这一点）：800x480（800 第一使其成为平板电脑）6 英寸（使其成为 sw430）正常，mdpi

人像不错。问题在于横向软按钮保留在侧面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:10:07.760

转到 Android 虚拟管理器 > 设备定义。

您可以找到许多设备... 根据您的喜好选择设备...

例如：对于 4"WVGA 或 3.7" WVGA，分辨率为 480x800。

# jquery - 根据窗口的位置更改 div 类

> ID：15810563
> 
> 赞同：2
> 
> 时间：2013-04-04T12:02:24.120
> 
> 标签：jquery

这是我的设置：http: [//jsfiddle.net/REGUs/](http://jsfiddle.net/REGUs/)

正如您通过单击左侧的菜单所看到的，页面滚动到相关信息并且菜单项将其外观更改为白色背景等。

我希望页面检查它的位置，然后分别更新列表上的 css，以便如果页面正在查看第二个标题，菜单会将第二个标题 css 更改为他们单击它时的样式。我知道这很罗嗦，可能没有多大意义，我很抱歉。

这是我认为它会起作用的方式：

我不知道每页上有多少标题（理论上我知道，但有很多页面，我宁愿有一些动态的）。所以我会`$("h2").length`用来检查标题的数量。然后可能有一个循环来获取每个的距离（存储在一个数组中？），然后每次窗口滚动时，它开始加载或更改大小，一个函数将捕获屏幕的位置，然后更新 css。如果这是您解决问题的方法，您能帮我把它放在一起吗，如果有另一种更好的方法（可能是因为我并没有真正使用 javascript），请告诉我。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:42:44.157

如果您不想要 bootstrap 中的所有内容，这就是您需要做的

[http://jsfiddle.net/6t83p/1/](http://jsfiddle.net/6t83p/1/)花了一些时间，但它总是很有趣:)

```
 $('.selectedNav').css( 'background-color', 'white');
$('.selectedNav').css( 'border-right', 'none');

$('.servicesNavItem').click(function () {
    $(this).parent().css( 'background-color', 'white');
    $(this).parent().css( 'border-right', 'none');
    $('.selectedNav').css( 'background-color', '#eeeeee');
    $('.selectedNav').css( 'border-right', '1px solid #c7c7c7');
    $('.selectedNav').toggleClass("selectedNav");
    $(this).parent().toggleClass("selectedNav");
});

var y = $('.servicesLeft').offset().top - 50;
    $(window).scroll( function() {
    if ($(window).scrollTop() > y)
        $('.servicesLeft').addClass('floating');
    else
        $('.servicesLeft').removeClass('floating');
    });

$('#sideNav li a').click(function(){
    $('html, body').animate({
        scrollTop: $( $.attr(this, 'href') ).offset().top
    }, 500);
    return false;
});
/***** ADDED THE FOLLOWING CODE ******/
// get positions of all linked href
var x = {};
$('#sideNav a').each(function(){
    var href = $(this).attr('href').replace('#','');
    x[href] = $('#'+href).offset().top;
});

$(document).on('scroll', function(){
    var current_top = window.pageYOffset;
    console.log(current_top);
    var active = '';
    var min_value = 9999999;
    $.each(x, function(index, value) { 
         // some big value
        if(value >= current_top && value < min_value)
        {
            console.log(min_value);
            min_value = value;
            active = index;
        }
    });

    $('#sideNav li').removeAttr('style');
    $('#sideNav a[href="#'+active+'"]').parent('li').css({'background-color': 'white', 'border-right-style': 'none'});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:20:31.710

我想这篇文章会对你有所帮助

[jQuery根据滚动位置更改div中的内容](https://stackoverflow.com/questions/9387452/jquery-to-change-content-in-div-based-on-scroll-position#)

**快乐编码:)**

# java - 禁用 GoogleAnalytics 以测试和开发新版本

> ID：15810567
> 
> 赞同：1
> 
> 时间：2013-04-04T12:02:36.037
> 
> 标签：java, android, exception, crash, google-analytics

此问题适用于新版 Google Analytics (GA)。所以这是针对 v2，而不是 v1。我刚刚发布了我的应用程序的 v1.01，一切都很顺利。我正在尝试为 v1.1 实现一些我现在不知道该怎么做的东西，我现在正在爬过它，并在开发过程中左右崩溃我的应用程序。第二天早上，当 GA 更新时，我看到始终为 0 的崩溃/异常图达到了 25！但我认为这只是我昨天在开发过程中的情况。

我的问题是如何在开发/测试期间禁用 GA，这样它就不会扭曲我的 GA 图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T19:52:56.480

**对于 v2（旧版）**

在您的 analytics.xml 中添加以下行，

```
<bool name="ga_debug">true</bool> 
```

以编程方式进行，

```
// Get singleton using application context.
GoogleAnalytics myInstance = GoogleAnalytics.getInstance(this);

// Enable debug mode.
myInstance.setDebug(true); 
```

v2 参考[这里](https://developers.google.com/analytics/devguides/collection/android/v2/advanced#testing)

* * *

**对于 v3**

Google 为 SDK v3 推出了更新版本，其中需要设置**dryRun标志以进行测试和调试。**

```
GoogeAnalytics.getInstance(this).setDryRun(true); 
```

v3 参考[这里](https://developers.google.com/analytics/devguides/collection/android/v3/advanced#testing)

# java - 用于按国家/地区建议国际电话前缀的 Java 库

> ID：15810575
> 
> 赞同：1
> 
> 时间：2013-04-04T12:02:55.890
> 
> 标签：java

是否有任何 java 库可以帮助按国家/地区建议国际电话前缀？例如，我们有罗马尼亚，建议是 +40

# ant - 如何清除蚂蚁输入任务中的addproperty值

> ID：15810578
> 
> 赞同：1
> 
> 时间：2013-04-04T12:03:01.290
> 
> 标签：ant

我有目标，它最终在特定条件下调用自身，但由于值已经设置，它进入无限循环。是否有任何方法可以重置 addproperty 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:35:59.287

您可以使用[ant-contrib](http://ant-contrib.sourceforge.net/tasks/index.html)的[变量](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)任务：

```
<var name="your.property" unset="true"/>
<input message="your message to the user" addproperty="your.property"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:45:06.360

如果您使用的是 Ant 1.8 或更高版本，Ant 的内置`<local>`任务提供本地范围的属性：

```
<local name="user.input"/>
<input message="Prompt the user" addproperty="user.input"/> 
```

[本地任务 - Apache Ant 的文档](http://ant.apache.org/manual/Tasks/local.html)

# jqgrid - 如何更改 jqgrid 中的编辑表单标题？

> ID：15810585
> 
> 赞同：1
> 
> 时间：2013-04-04T12:03:29.493
> 
> 标签：jqgrid

![在此处输入图像描述](https://i.stack.imgur.com/Jwsjy.png)

如何将标题“编辑记录”更改为“编辑项目记录”？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:09:44.480

您可以使用`editCaption`或`addCaption`选项[editGridRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#editgridrow)。选项的默认值在[grid.locale-en.js中定义](https://github.com/tonytomov/jqGrid/blob/master/js/i18n/grid.locale-en.js#L28-L29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:08:34.380

动态：

```
beforeShowForm: function (formid) {

var mytitle = "My text to show"; // or whatever you want

$(".ui-jqdialog-title","#edithd"+mygridid).html(mytitle);

} 
```

作为设置的一部分：

```
editGridRow(id,{editCaption: 'Edit caption', ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-09T14:49:14.140

使用**addCaption**属性更改**addForm**的标题并使用**editCaption**属性更改**editForm**的标题。

```
jQuery('#gridId').jqGrid('navGrid', '#pagerId',
{   //navbar options
            edit: true,
            editicon: 'fa fa-pencil blue',
            add: false,
            addicon: 'fa fa-plus-circle purple',
            del: false,
            delicon: 'fa fa-trash-o red',
            search: false,
            searchicon: 'fa fa-search orange',
            refresh: true,
            refreshicon: 'fa fa-refresh green',
            view: false,
            viewicon: 'fa fa-search-plus grey'
        },
        {
            editCaption:'Edit Project Record'
        }, //Edit
        {

        }, //Add
          {
addCaption:'Add Project Record'
          },
           {},
            {}); 
```

# linux - 如何防止 ps2eps 旋转页面

> ID：15810588
> 
> 赞同：0
> 
> 时间：2013-04-04T12:03:37.653
> 
> 标签：linux, ghostscript, postscript, eps

我想将一些单页后记文件转换为 eps。它们来自同一来源的多页 ps 文件，使用`psselect`. 当我这样做时，一些页面（短页面）相对于它们的原始方向旋转（向左旋转 90°）`ps2eps $file`。在 ps2eps 手册页（[ftp://ftp.tex.ac.uk/tex-archive/support/ps2eps/doc/html/ps2eps.html](ftp://ftp.tex.ac.uk/tex-archive/support/ps2eps/doc/html/ps2eps.html)）中，我发现： `ps2eps filters also %%Orientation`. 但我检查`diff file.ps file.eps`了文件之间的唯一区别是

```
diff tmp.ps tmp.eps 
1c1,3
< %!PS-Adobe-3.0
---
> %!PS-Adobe-2.0 EPSF-2.0
> %%BoundingBox: 132 613 466 750
> %%HiResBoundingBox: 132.000000 613.500000 465.500000 749.500000
9d10
< %%Pages: 1 0
12a14,23
> % EPSF created by ps2eps 1.68
> %%BeginProlog
> save
> countdictstack
> mark
> newpath
> /showpage {} def
> /setpagedevice {pop} def
> %%EndProlog
> %%Page 1 1
14d24
< 
85d94
< 
476a486,490
> %%Trailer
> cleartomark
> countdictstack
> exch sub { end } repeat
> restore 
```

那么为什么它会改变方向，我该如何防止呢？请注意，我指示我的查看器以原始方向显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T00:23:05.597

在终端中的我的 MacBook Pro 上添加标志“-R=-”保留方向：

`ps2eps -R=- input.ps`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T18:13:07.793

例如，如果您生成的 eps 文件逆时针旋转 90 度，您可以通过将转换命令修改为“ps2eps +R=+ file.ps”来避免此问题，这会将生成的 eps 文件顺时针旋转 90 度。

在“ps2eps --help”下查看带有“-R”的选项会显示许多用于旋转生成的 eps 文件的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-14T09:30:18.960

我找到了一个对我有用的解决方法，但你们中的一些人可能不喜欢。在这里...首先使用 ps2pdf 然后删除原始 ps 然后使用 pdf2ps 然后使用 ps2eps

我知道这听起来很荒谬，但那是唯一对我有用且没有任何缺点的东西，而且质量似乎仍然存在。祝你好运

# ruby-on-rails - 修改friendly_id gem

> ID：15810596
> 
> 赞同：0
> 
> 时间：2013-04-04T12:03:57.157
> 
> 标签：ruby-on-rails, friendly-id, ancestry

我希望能够在浏览栏中看到某些产品的完整路径。路径看起来像这样

```
www.mysite.com/categories/category_name/subcategory_name/product_name 
```

此刻我刚刚 `www.mysite.com/categories/category_name` 它只是提供了一个我不需要的级别路径。

为了建立这些友好的链接，我使用了friendly_id。我使用名为 Ancestry 的 gem 创建了完整的分类功能。

如何修改friendly_id slug 以便显示完整路径？我知道friendly_id 是如何工作的，但我不知道如何改变slug 的生成方式。

有些人可以给我链接或提示搜索。我可以解决，我只需要想法。我会非常高兴:) :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:12:38.310

您可能正在寻找嵌套资源。如果两个模型（类别、子类别）都有 slug，则将它们嵌套在`routes.rb`文件中应该可以解决问题：

```
resources :categories do
  resources :subcategories
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:18:13.480

您可以传递 gem 使用的方法，如下所示：

```
extend FriendlyId
friendly_id :method_name, use: :slugged

def method_name

end 
```

# android - 如果曾经调用过，必须在 [proguard.optimize.peephole.ClassMerger] 中覆盖方法

> ID：15810602
> 
> 赞同：2
> 
> 时间：2013-04-04T12:04:17.127
> 
> 标签：android, proguard

```
Proguard returned with error code 1\. See console
[2013-04-04 16:25:20 - ] Note: there were 157 duplicate class definitions.
[2013-04-04 16:25:20 - ] Error: Method must be overridden in [proguard.optimize.peephole.ClassMerger] if ever called 
```

我已经尝试了在 SO 上找到的所有可能的解决方案。大约有 2000 个重复项，现在下降到 157 个。我的项目中也有一些外部 jar。这是我的 proguard.cfg 文件：

```
-dontwarn android.support.**

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-keep public class * extends android.view.View {
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-keep class com.flurry.** { *; }
-dontwarn com.flurry.**

-keep class org.apache.** { *; }
-dontwarn org.apache.**

-dump proguard/class_files.txt 
-printseeds proguard/seeds.txt 
-printusage proguard/unused.txt 
-printmapping proguard/mapping.txt 
```

此应用程序适用于 Android 4.0 能否请您告诉我这是什么原因造成的，以及如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-24T08:55:23.490

将我的项目的 proguard 配置与来自 ${sdk.dir}/tools/proguard/proguard-android.txt 的配置合并就可以了。

此错误主要发生在不了解默认 proguard 配置的 3rd 方构建系统（例如 Maven）中。

UPD: ...因为默认配置的以下内容：

```
# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize 
```

# javascript - 给定一组 RGB 值，如何计算颜色滑块上的 Y 位置

> ID：15810603
> 
> 赞同：0
> 
> 时间：2013-04-04T12:04:17.360
> 
> 标签：javascript, canvas, colors

我目前使用以下代码将颜色滑块渐变渲染到画布元素上：

```
 var colorgrad = self.cache.colorctx.createLinearGradient(0, 0, 0, self.cache.colorpicker.height);
        colorgrad.addColorStop(0, 'red'); //red
        colorgrad.addColorStop(1 / 6, 'yellow'); //yellow
        colorgrad.addColorStop(2 / 6, 'lime') // green
        colorgrad.addColorStop(3 / 6, 'aqua'); // aqua
        colorgrad.addColorStop(4 / 6, 'blue'); //blue
        colorgrad.addColorStop(5 / 6, 'magenta'); // pink
        colorgrad.addColorStop(1, 'red'); //red
        self.cache.colorctx.fillStyle = colorgrad;
        self.cache.colorctx.fillRect(0, 0, 60, self.cache.colorpicker.height);

        self.cache.colourdata = self.cache.colorctx.getImageData(0, 0, 1, self.cache.colorpicker.height).data; 
```

这将创建一个渐变，从红色一直绘制到红色，并生成如下图像：

![在此处输入图像描述](https://i.stack.imgur.com/96yN3.jpg)

当用户移动图像顶部的圆形控制器时，我会`Y`根据缓存的图像像素数据检查控制器的位置，从而生成一个返回 hex/RGB 值的简单颜色选择器。

所以现在我可以根据用户输入进行颜色提取，我还需要能够获取一个十六进制颜色值并计算出`top`控件的值。所以从本质上讲，反转技术。但我似乎无法理解要使用的正确算法。

我有一个工作`hex to RGB`函数，因此可以将颜色输入视为一个 rgb 值数组：

```
colour : {
        r : 255,
        g : 255,
        b : 255
} 
```

总而言之，当知道上面图像的像素高度时，当提供一组 RGB 值时，如何计算该图像中给定颜色的**y位置？**

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:36:40.470

您可以将 rgb 颜色转换为[HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)，这将为您提供`H`从 0°（滑块顶部）到 360°（滑块底部）的颜色值 ( )。
有了它，您可以根据滑块的大小计算 y 位置`(height / 360 * H)`

# asp.net-mvc - DbContext - 存储库和工作单元模式的组合？

> ID：15810604
> 
> 赞同：3
> 
> 时间：2013-04-04T12:04:18.293
> 
> 标签：asp.net-mvc, entity-framework

想知道我是否可以在这里得到一些指导。在 DbContext 的 MSDN 页面 ( [http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext%28v=vs.103%29.aspx) ) 上，它声明：“表示单元的组合-Of-Work 和 Repository 模式，使您能够查询数据库并将更改组合在一起，然后将这些更改作为一个单元写回存储。”

我对存储库模式的理解是它提供了对数据持久层的抽象。与 EF 耦合的东西的具体实现如何被视为抽象？

另外，我将如何利用它作为工作单元模式？目前，我的工作单元有一个 ObjectContext 属性，以及我的每个存储库的一个属性：

```
public class UnitOfWork : IUnitOfWork
{
    private TPSEntities _context = new TPSEntities();
    private ICustomerRepository _customerRepository;
    private IUsersRepository _UsersRepository;

    public ICustomerRepository CustomerRepository
    {
        get
        {
            if (_customerRepository == null)
            {
                _customerRepository = new CustomerRepository(_context);
            }
            return _customerRepository;
        }
    }

    public IUsersRepository UsersRepository
    {
        get
        {
            if (_UsersRepository == null)
            {
                _UsersRepository = new UsersRepository(_context);
            }
            return _UsersRepository;
        }
    }

    public void Save()
    {
        _context.SaveChanges();
    }

    public void Save(string storedProcedure)
    {
        _context.SaveChanges();
        //_context.ExecuteStoreCommand
    }

    private bool disposed = false;

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                _context.Dispose();
            }
        }
        this.disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    } 
```

然后我通过 DI 将我的工作单元对象注入到我的控制器中，然后我就走了。

有没有更好的方法来使用 DbContext 做到这一点？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:11:19.283

实际上，`DbContext` *它是*对数据库的抽象——Microsoft 提供了几种 SQL 引擎，它们都可以与 EF 一起使用，如果您在代码中使用 EF，那么您唯一需要更改的就是在它们之间切换引擎是连接字符串。

也就是说，想要另一个抽象并不罕见，这次是通过 ORM 工具 - EF，在你的例子中。我发现大多数演示存储库模式的指南、博客文章等都是通过抽象 ORM 工具来实现的。你也一样，在你提供的代码中。

我想这归结为您对“数据库层”和“存储库”的定义——尽管我确信文献中有严格的定义，但互联网上的定义并不一致。（惊讶？：P）

# jquery - 处理 Flash 横幅上的点击事件

> ID：15810607
> 
> 赞同：0
> 
> 时间：2013-04-04T12:04:26.190
> 
> 标签：jquery, flash, click

我想处理 Flash 横幅上的点击事件。Flash 横幅是指向另一个页面的链接。

这是我的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function($) {
        $('.banner').click(function () {
          var id = $(this).attr('id');

          alert(id);
        });   
      });
    </script>
  </head>
  <body>
    <a id="banner_1" class="banner" href="http://google.com">
      <h1>Banner 1</h1>
    </a>

      <embed id="test_1" class="banner" src="http://www.dg/wp-content/uploads/2013/03/sera-flash_web-banner_preset.swf" 
          width="400" 
          height="120" 
          type="application/x-shockwave-flash"
      />       

    <a id="banner_2" class="banner" href="http://yahoo.com">
      <h1>Banner 2</h1>
    </a>
  </body>
</html> 
```

我怎样才能做到这一点？

编辑

我也尝试添加 onclick、onrelease 事件，如下所示。但它不起作用。

```
 <embed onrelease="alert('ddd');" src="http://www.dlk/stg/wp-content/uploads/2013/03/sera-flash_web-banner_preset.swf" 
          width="400" 
          height="120" 
          type="application/x-shockwave-flash"
      /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:44:13.860

您可以使用 CSS 代替 JavaScript。在嵌入上方注入一个绝对定位的 DIV，并将 z-index 设置为高于嵌入。

# network-programming - 请讲讲linux中网络包遍历的查询

> ID：15810608
> 
> 赞同：0
> 
> 时间：2013-04-04T12:04:31.043
> 
> 标签：network-programming, linux-kernel, linux-device-driver, kernel

我正在阅读*Understanding linux networking Internal* book and the pdf *Network packet capture in Linux kernelspace* on the link [networkkernel.pdf](http://beraldoleal.com/talks/networkkernel.pdf)

在**主题 9.2.2 下的***理解 linux 网络内部* ，给出了

 **> 处理输入帧的代码分为两部分：首先驱动程序将帧复制到内核可访问的输入队列中，然后内核对其进行处理（通常将其传递给专用于相关协议的处理程序，例如知识产权）。第一部分在中断上下文中执行，可以抢占第二部分的执行。

现在查询的是第二部分何时安排？谁安排他们？调用是否在中断处理程序中给出？在*Linux 内核空间*的网络数据包捕获中，数据包输入流被描述为：-

```
When working in interrupt driven model, the nic registers an
interrupt handler;
• This interrupt handler will be called when a frame is received;
• Typically in the handler, we allocate sk buff by calling

    dev alloc skb();

• Copies data from nic’s buffer to this struct just created;
• nic call generic reception routine `netif_rx();`
• `netif rx()` put frame in per cpu queue;
• if queue is full, drop!
• net rx action() decision based on skb->protocol;
• This function basically dequeues the frame and delivery a copy
for every protocol handler;
• ptype all and ptype base queues 
```

我想知道 netif rx(); 和 net rx action() 被调用？谁给他们打电话我的意思是谁安排他们。

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:41:01.433

这种调度是由`NAPI`结构完成的。[数据包](http://www.cse.wustl.edu/~jain/cse567-11/ftp/pkt_recp/)是通过所描述的方法来捕获的。当存在“活锁”问题或数据包泛滥时，此软中断会出现；这些都[处理好了](http://geocitiessites.com/asimshankar/notes/linux-networking-napi.html)。

数据包出口比数据包入口复杂得多，队列管理和 QOS（甚至可能是数据包整形）正在实施。“队列规则”用于实现用户可指定的[QOS 策略](http://linuxeco.com/?p=102)。

* * *

**NAPI 结构调度：**

对于 NAPI 结构[定义](http://dslab.utdallas.edu/~qasimj/wiki/index.php/Devel/NAPI)为；它的驱动程序[设计和硬件架构](http://www.linuxfoundation.org/collaborate/workgroups/networking/napi)。

Linux 使用 ksoftirqd 作为通用解决方案来安排 softirq 在下一次中断之前运行并将它们置于调度程序控制之下。这也防止了连续的软中断独占 CPU。这也有这样的效果，即在运行 CPU 密集型应用程序和网络时需要考虑 ksoftirq 的优先级，以获得软中断/用户平衡的适当平衡。据报道，将 ksoftirq 优先级增加到 0（最终更高）可以解决高 CPU 负载下网络性能低的问题。

还有一篇关于[NAPI Scheduling](http://www.tnt.dist.unige.it/paper/OR/IPSMOME2004.pdf)的研究论文。**

# php - codeigniter 触发后台进程

> ID：15810609
> 
> 赞同：1
> 
> 时间：2013-04-04T12:04:32.787
> 
> 标签：php, codeigniter, background-process

我正在研究 PyroCMS 中使用 Codeigniter 的模块。在此模块中，用户在前端提交某种订单，网站版主将收到通知并在后端检查订单，然后更新行并通知用户更改。现在都搞定了。

我要让事情变得有点自动化。提供作为电子商品（如文档文件等）的订单的过程是在其他服务器 (ftp) 中搜索订单并将其带到主服务器。

所以，我提出这个工作流程：

*   将行插入表（前端）
*   初始化机器人以搜索 ftp 服务器并设置机器人正在处理订单的标志。
*   如果找到：将文件传输到服务器并更新行和标志。
*   如果没有找到更新标志并让经理完成剩下的工作。

现在，问题是我认为将机器人代码放入同一个控制器并使用来自用户的 http 请求触发机器人任务并不是一个好主意。我的意思是，表单已提交，我只想插入行并结束进程并通知用户它已提交，那么机器人任务应该在后台完成。

现在我们可以更新工作流程，例如：

*   插入新行
*   通知用户您的订单已提交。让用户离开。
*   运行后台进程（触发它）以搜索 ftp 服务器并在成功时更新行或在出错时不执行任何操作。

我该如何做这种类型的后台进程？任何想法或经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:10:35.900

您可以将您的机器人代码放入其他 php 文件，然后在成功提交表单后使用 php 的系统或 exec 命令运行该 php 文件。这将像新的 php 线程一样运行。希望这可以帮助。

# ios - iOS：有什么方法可以清除 AvPlayer 流数据？

> ID：15810611
> 
> 赞同：6
> 
> 时间：2013-04-04T12:04:38.140
> 
> 标签：ios, caching, streaming, core-audio, avplayer

我有一个来自喊话服务器的应用程序流式传输音频。大多数情况下它都可以正常播放，但是我注意到，每当我使用该应用程序时，“设置”>“常规”>“使用情况”中的应用程序文档和数据都会增加。该应用程序本身只有 776kb，但在流式传输 30 分钟后，数据已从 1.3 mb 变为 1.5 mb。这是由于 AVPlayer 缓存了流式音频吗？当应用程序被杀死时，如何阻止这种情况发生或至少删除缓存的音频？另外，如果我不解决这个问题，我的应用会被应用商店拒绝吗？非常感谢。

# php - 卷曲网址无效

> ID：15810617
> 
> 赞同：0
> 
> 时间：2013-04-04T12:04:53.530
> 
> 标签：php, facebook-graph-api, curl, facebook-php-sdk

我的应用程序有问题，显示以下消息

警告：curl_setopt () [function.curl-setopt]：第 970 行 /home/storage/4/f6/25/mwiter/public_html/site/funada/momento_familia/base_facebook.php 中的 curl 配置选项无效

致命错误：未捕获的CurlException：7：无法连接到2A03：2880:10：CF01：face：b00c：0:4：网络无法访问/home/storage/4/f6/25/mwiter/public_html/site/ Funada / momento_familia / base_facebook.php 在第 977 行

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:54:27.880

`CURLOPT_IPRESOLVE`在旧版本的 curl 中不是正确的 curl 选项。[此处](http://php.net/manual/en/function.curl-setopt.php)列出了正确的值。

请参阅[以下](https://stackoverflow.com/a/11221630/122353)类似问题的答案。

# c++ - 具有自定义散列/相等函数的 unordered_map - 函数不会被调用

> ID：15810620
> 
> 赞同：12
> 
> 时间：2013-04-04T12:04:58.487
> 
> 标签：c++, c++11

[这很奇怪..以下代码（感谢Cassio Neri](https://stackoverflow.com/users/1137388/cassio-neri)我设法编译）正在编译没有任何错误..顺便说一下 hashing_func 和 key_equal_func 确实被调用了（控制台窗口中没有显示 couts ）

```
#include <iostream>
#include <string>
#include <unordered_map>
#include <algorithm>
#include <functional>

using namespace std;

unsigned long hashing_func(string key)
{
    cout << "Hashing called";
    unsigned long hash = 0;
    for(int i=0; i<key.size(); i++)
    {
        hash += (71*hash + key[i]) % 5;
    }
    return hash;
}

template<class T> bool key_equal_fn(T t1, T t2)
{
    return t1 == t2;
}

template <> bool key_equal_fn<string>(string t1, string t2)
{
    cout << "Equal called";
    return !(t1.compare(t2));
}

int main ()
{
    unordered_map<string, string>::size_type n = 5;
    unordered_map<string, string> mymap(n, (const std::hash<string> &)hashing_func, 
        (const std::equal_to<string> &)(function<bool(string,string)>(key_equal_fn<string>))) ;

    bool case_insensitive = mymap.key_eq()("test","TEST");

    mymap["paul"] = "jenna";
    mymap["frank"] = "ashley";

    if(mymap["paul"] == mymap["frank"])
        cout << "equal" << endl;

    return 0;
} 
```

我正在使用 MSVC2012，有什么提示可能是什么问题吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-04T12:29:28.180

您必须使用模板参数指定哈希/比较函数，而不是在构造函数中。这是一个例子：

```
class Hasher
{
public:
  size_t operator() (string const& key) const
  {
      cout << "Hashing called";
      size_t hash = 0;
      for(size_t i=0; i<key.size(); i++)
      {
          hash += (71*hash + key[i]) % 5;
      }
      return hash;
  }
};
class EqualFn
{
public:
  bool operator() (string const& t1, string const& t2) const
  {
    cout << "Equal called";
    return !(t1.compare(t2));
  }
};

unordered_map<string, string, Hasher, EqualFn> mymap(5); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T12:23:49.577

问题是您需要将散列函数和 hash_key_equal 函数的类型传递给 unordered_map，然后将实际函数传递给映射的 ctor。

您的 unordered_map 定义应如下所示：

```
unordered_map<
    std::string,
    std::string,
    std::function<unsigned long(std::string)>,
    std::function<bool(std::string, std::string)>
> mymap(n, hashing_func, key_equal_fn<std::string>); 
```

这`unordered_map`是一个模板，它看起来像这样：

```
template<
    class Key,
    class T,
    class Hash = std::hash<Key>,
    class KeyEqual = std::equal_to<Key>,
    class Allocator = std::allocator<std::pair<const Key, T>>
> class unordered_map; 
```

这意味着如果你想传递 new`Hash`和`KeyEqual`函数，你必须告诉模板这些东西的类型。

链接不再可用（请求更新）： [现场示例](http://liveworkspace.org/code/3rODqP$4)

# sql - 访问子窗体不刷新显示的记录

> ID：15810625
> 
> 赞同：1
> 
> 时间：2013-04-04T12:05:17.890
> 
> 标签：sql, ms-access, ms-access-2007, vba

我有一个使用子表单（连续表单模式）访问的主表单。子窗体的源是一个查询，它有一个从主窗体中的组合框获取值的条件参数。

当我打开主窗体时，组合框为空，子窗体显示所有记录。如果我在组合框中选择一个值并单击一个只有以下代码行的刷新按钮：`me.subformname.form.requery`它工作正常，并且子表单重新查询并刷新显示适当的记录。如果我更改组合框中的值并点击刷新按钮，它会再次请求/刷新子表单。

问题是，如果我使用上下文菜单`(Right Click > "Equals to...")`过滤子表单，则相应地过滤子表单，然后我删除过滤器`(Right Click > "Clear filter from...")`，子表单未过滤，但现在如果我更改组合框值并点击刷新按钮，子表单不会刷新也不会重新查询。

即使我在后台打开查询也是如此。一旦我过滤，刷新就不再起作用了。

这是子表单查询：

```
SELECT qry_listatoatesesizarile.idsesizare,
       branduri.numebrand,
       locatii.fsname,
       categoriiechipamente.categorieechipament,
       echipamente.codechipament,
       qry_listatoatesesizarile.nrsesizare,
       qry_listatoatesesizarile.datasesizare,
       qry_listatoatesesizarile.datasla,
       qry_listatoatesesizarile.detalii,
       qry_listatoatesesizarile.stare,
       Dlookup("[stareraport]", "listastarirapoarte",
       "[idstareraport]=" & [stare]) AS
       StareS,
       echipe.denumireechipa
       AS EchipaLocatie,
       qry_listarapoarte.nrraport,
       qry_listarapoarte.datainceput,
       qry_listarapoarte.datafinalizat,
       qry_listarapoarte.lucrariefectuate,
       qry_listarapoarte.cauzadefectiune,
       qry_listasesizariprogramate.denumireechipa
       AS EchipaProgramata,
       Iif([stare] = 1
            OR [stare] = 3
            OR [stare] = 0, Datediff("s", Cdate([datasla]), Now()),
       Datediff("s", Cdate([datasla]), Cdate([datafinalizat])))
       AS DiferentaSLASecs,
       Secs2dhms([diferentaslasecs])
       AS DiferentaSLA,
       Iif([diferentaslasecs] < 0, true, false)
       AS InSLA,
       Format([datasesizare], "mmmm yyyy")
       AS [Month],
       Iif([stare] = 2
            OR [stare] = 4, Iif([diferentaslasecs] < 0, "inchis in sla",
                            "inchis in afara sla"),
       Iif([diferentaslasecs] < 0, "deschis in sla", "deschis in afara sla"))
       AS
       Situatie,
       locatii.clientfrigorifice,
       clienti.client
FROM   clienti
       INNER JOIN (((((branduri
                       INNER JOIN ((qry_listatoatesesizarile
                                    INNER JOIN echipamente
                                            ON
qry_listatoatesesizarile.idechipament =
echipamente.idechipament)
                                   INNER JOIN locatii
                                           ON echipamente.idlocatie =
                                  locatii.idlocatie)
                               ON branduri.idbrand = locatii.idbrand)
                      INNER JOIN categoriiechipamente
                              ON echipamente.idcategorieechipament =
                                 categoriiechipamente.idcategorieechipament)
                     INNER JOIN echipe
                             ON qry_listatoatesesizarile.idechipa =
                                echipe.idechipa)
                    LEFT JOIN qry_listasesizariprogramate
                           ON qry_listatoatesesizarile.idsesizare =
                              qry_listasesizariprogramate.idsesizare)
                   LEFT JOIN qry_listarapoarte
                          ON qry_listatoatesesizarile.idraport =
                             qry_listarapoarte.idraport)
               ON clienti.idclient = locatii.clientfrigorifice
WHERE  ( ( ( Format([datasesizare], "mmmm yyyy") ) LIKE Iif(Nz(
                    [forms] ! [controlsla] ! [cb_lunaverificata], "") = "", "*",
                      [forms] ! [controlsla] ! [cb_lunaverificata]) )
         AND ( ( locatii.clientfrigorifice ) LIKE Iif(Nz(
               [forms] ! [controlsla] ! [cb_client]
                                                      ,
                                                          "") = "", "*",
               [forms] ! [controlsla] ! [cb_client]) ) ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:56:12.400

访问对于过滤可能有点有趣，尤其是在子表单上。

尝试将显式代码添加到您的组合框代码以每次清除过滤器。所以它看起来像：

```
Me.subformname.Form.Filter = Null
Me.subformname.Form.FilterOn = False
Me.subformname.Form.Requery 
```

或者，您可以尝试在 Combobox 中的每次更改时动态重置子窗体的 RecordSource。（请注意，如果您这样做，您不必显式地重新查询，因为它是自动完成的。）因此，代替您现在在 Combobox 中的代码，您将拥有以下内容：

```
Dim mySQLString as String

'Store subform query
mySQLString = "SELECT qry_listato... <<The rest of your query here>>>"

'Set Subform RecordSource
Me.subformname.Form.RecordSource = mySQLSTring 
```

希望其中之一可以帮助您。

# c# - 将 GIF 转换为 PDF 字节[]

> ID：15810633
> 
> 赞同：2
> 
> 时间：2013-04-04T12:05:39.710
> 
> 标签：c#, asp.net-mvc

我正在调用返回 GIF 的第三方网络服务。我想将该图像转换为 PDF，然后我想将其转换为`byte[]`.

这是我的代码：

```
 HttpWebRequest NxtserviceRequest = (HttpWebRequest)WebRequest.Create(ImgPath);
 NxtserviceRequest.Method = "GET";
 HttpWebResponse NxtServiceResponse = (HttpWebResponse)NxtserviceRequest.GetResponse();

 Stream NxtresponseStream;
 NxtresponseStream = NxtServiceResponse.GetResponseStream();

 using (MemoryStream ms = new MemoryStream())
 {
      int count = 0;
      do
      {
           byte[] buf = new byte[1024];
           count = NxtresponseStream.Read(buf, 0, 1024);
           ms.Write(buf, 0, count);
      } while (NxtresponseStream.CanRead && count > 0);

      binaryData = ms.ToArray();
      ...
 } 
```

当我试图`binaryData`在文件浏览器上传递它时，它在 PDF 生成时显示错误。

# java - java中的“实现”关键字？

> ID：15810634
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:05:40.800
> 
> 标签：java

我是android开发的新手，我浏览了一些代码，发现了以下代码行：

```
class Preview extends SurfaceView implements SurfaceHolder.Callback {
} 
```

有人可以解释或提示我这里真正发生的事情，尤其是在工具上`SurfaceHolder.Callback`吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:12:02.207

在Java`implements SurfaceHolder.Callback`中意味着你正在实现`"Interface"` `SurfaceHolder.Callback`。如果你实现接口意味着你必须在接口内定义所有方法。`SurfaceHolder.Callback`它会自动要求你实现`"ALL abstract method"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:17:19.417

Java 中的“implements”关键字要求被定义的类还包括在指定接口类中定义的所有方法签名的声明和定义。

在提供的示例中，SurfaceHolder.Callback 是一个接口并声明了一些方法。因此，根据定义，新类 Preview 也声明了这些相同的方法。在大多数情况下，方法已经定义为接口类的一部分，但不一定如此。程序员可以在他们认为合适的时候重写这些方法，但是 Preview 类的用户在不了解其他任何内容的情况下，可以通过简单地将其对象作为 SurfaceHolder.Callback 对象引用或与之交互来编写更通用和可重用的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:15:05.427

当一个类`implements`是接口时，这意味着该类的实例（`Preview`在您的情况下）被迫包含接口（`SurfaceHolder.Callback`）公开的方法的定义。

这也意味着您可以使用任何返回类 ( `Preview`) 或其子类的实例的表达式，只要需要接口类型 ( `SurfaceHolder.Callback`) 的表达式。

# c# - 为什么可以为空 ,struct, 允许 'null'

> ID：15810635
> 
> 赞同：3
> 
> 时间：2013-04-04T12:05:41.147
> 
> 标签：c#

Nullable 是一个结构。而且我知道不能将结构分配为“空”。那么我们怎样才能将 Nullable 的对象赋值为 null 呢？是什么原因？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T12:10:45.250

它实际上不接受`null`; 它只是具有语法糖，可以让它*像*`null`. 该类型实际上看起来有点像这样：

```
struct Nullable<T>
{
    private bool hasValue;
    private T value;
} 
```

所以当它被初始化时`hasValue == false`，和`value == default(T)`。

当您编写类似的代码时

```
int? i = null; 
```

C# 编译器实际上在幕后执行此操作：

```
Nullable<T> i = new Nullable<T>(); 
```

`null`在运行时转换为 a时也会进行类似的检查`int?`。

**延伸阅读**

*   [为什么可以将“null”分配给可空类型](http://www.markzhou.com/blog/post/2010/01/26/Why-can-assign-e2809cnulle2809d-to-nullable-types.aspx)

# java - 从数组中生成一个随机数

> ID：15810638
> 
> 赞同：0
> 
> 时间：2013-04-04T12:06:02.120
> 
> 标签：java, arrays, random

假设有一个数组：

```
int arr[] = {0,1,2} 
```

有没有办法可以从`0,1,2` *（即从数组中）*生成随机数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:10:26.803

试试这个

```
 import java.util.Random;

    Random random = new Random();
    System.out.println(arr[random.nextInt(arr.length)]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:08:36.437

当然。您应该生成一个介于 0 和 arr.length-1 之间的数字，将其四舍五入为 int 数字，然后获取 arr[your_random_number] 元素。

```
int random_index = (int) round(Math.random() * (arr.length - 1)); 
```

那么你的元素将是 arr[random_index]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:07:44.110

如果您每次都想要数组中的唯一元素，请尝试以下操作：

```
Integer arr[] = {0,1,2}
Collections.shuffle(Arrays.asList(arr));
for(int unique: ar)
   System.out.println(unique); 
```

Collections 的 Shuffle 方法将随机打乱给定的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-15T16:20:59.807

这将从数组中随机选择一个数字。

```
public static void main(String[] args) 
{
    int arr[] = {0,1,2};
    System.out.println(arr[(int)(Math.random()*arr.length)]);
} 
```

# php - ajax 导致停止对 php 页面的进一步操作

> ID：15810642
> 
> 赞同：0
> 
> 时间：2013-04-04T12:06:09.240
> 
> 标签：php, html, ajax, function, reload

我有一个使用 for 循环生成表格的页面。（语法在我的 php 文件中工作正常，这只是一个复制粘贴，所以忽略语法错误，因为这就像一个原型）

```
<form id="formid" name="formName" method="post" action="">                   
<input type="hidden" name="class" value="someclass">
<input type="hidden" name="section" value="somesection">
<select name="school" id="school">          
 $lengthArray = count($Array);                  
for ($k = 0; $k < $lengthArray ; $k++)
  {
    <option> . urldecode($Array[$k]) . </option>;
  }             
</select>       
</form> 
```

我的 Ajax 如下：

```
$("#school").change(function () {
    // resetValues();

    var data = $("#formid").serialize();
    jQuery.ajax({
        url: 'unexisting.php',
        type: "POST",
        dataType: "xml",
        data: data,
        async: false,
        success:function (response) 
                  {      
                    alert("Data Save Successful");
                  }
    });
} 
```

每当我第一次从列表中选择一所学校时（列表中有很多），我都可以调用 unexisting.php，但是一旦我第一次这样做，下面的下拉列表就不起作用了。我可以看到其中的所有学校并选择一个值，但这样做不会调用 unexisting.php 文件。

我哪里错了？我应该修复 onSuccess 里面的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:53:56.963

检查这是否有效

```
<form id="formid" name="formName" method="post" action="">                   
<input type="hidden" name="class" value="someclass">
<input type="hidden" name="section" value="somesection">
<select name="school" class="school" id="school1">          
 <?php $lengthArray = count($Array);                  
for ($k = 0; $k < $lengthArray ; $k++)
  { ?>
    <option value="<?php echo urldecode($Array[$k]) ?>"> 
      <?php echo urldecode($Array[$k]) ?> 
    </option> 
      <?php
  } ?>
</select>       
</form> 
```

阿贾克斯部分

```
var current_changed_id = '';
$(".school").change(function () {
current_changed_id = $(this).attr('id');

var data = $("#formid").serialize();
jQuery.ajax({
    url: 'unexisting.php',
    type: "POST",
    dataType: "xml",
    data: data,
    async: false,
    success: ListOnSuccess
});

function ListOnSuccess(xmlindata) 
{

    $('#'+current_changed_id).attr("disabled", "disabled");
    $('#'+current_changed_id).disabled = true;
} 
```

# iphone - MPMoviePlayerController 中 prepareToPlay 和 Play 的区别

> ID：15810644
> 
> 赞同：3
> 
> 时间：2013-04-04T12:06:10.823
> 
> 标签：iphone, ios, objective-c, mpmovieplayercontroller

请让我知道视频播放时`prepareToPlay`与`play`方法之间的区别。`MPMoviePlayerController`

**语法是：**

```
[moviePlayer prepareToPlay]; 
```

和

```
[moviePlayer play]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:08:40.833

正如方法所说

`prepareToPlay`- 没有开始播放，但正在播放任何内容*（视频/音频）*。

`play`- 说它是播放任何东西*（视频/音频）*的字符串。

正如文件所说：

**玩**

> 开始播放当前项目。（必需的）
> 
> ```
> - (void)play 
> ```
> 
> 讨论
> 如果之前暂停播放，此方法会从中断处恢复播放；否则，此方法从头开始播放第一个可用项目。
> 
> 如果调用此方法时电影播放器​​未准备好播放，则此方法先准备好电影播放器​​，然后开始播放。要最大限度地减少播放延迟，请在调用此方法之前调用 prepareToPlay 方法。
> 
> 要在电影播放器​​准备好播放时收到通知，请注册 MPMoviePlayerLoadStateDidChangeNotification 通知。然后，您可以通过访问电影播放器​​的 loadState 属性来检查加载状态。
> 
> 可用性 适用于 iOS 3.2 及更高版本。在 MPMediaPlayback.h 中声明

**准备播放**

准备播放电影播放器​​。（必需的）

> ```
> - (void)prepareToPlay 
> ```
> 
> 讨论
> 如果调用 play 方法时电影播放器​​尚未准备好播放，则该方法会自动调用此方法。但是，为了尽量减少播放延迟，请在调用 play 之前调用此方法。
> 
> 调用此方法可能会中断电影播放器​​的音频会话。有关中断以及如何回应中断的信息，请参阅音频会话编程指南。
> 
> 可用性 适用于 iOS 3.2 及更高版本。
> 
> 在 MPMediaPlayback.h 中声明

欲了解更多信息，[请阅读本官方文档。](http://developer.apple.com/library/ios/#documentation/MediaPlayer/Reference/MPMoviePlayerController_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:44:05.773

通过预先执行昂贵的操作来最小化播放延迟。

为了播放多媒体文件，例如 QuickTime 电影，在实际播放文件之前需要进行大量的加载和处理。拥有单独的`play`和`prepareToPlay`方法允许开发人员选择何时可以执行涉及播放的潜在昂贵操作，以最小化用户实际按下播放按钮时的延迟。

例如，需要读取和解析标头，并提取元数据。可能需要读取章节索引，并且玩家可能需要查找文件末尾以读取块偏​​移表、读取缩略图、海报框架等等。此外，为了在用户按下播放时启用快速播放，系统可能希望加载、解压缩和缓存第一秒左右的音频和视频内容。所有这些都可能需要相当长的时间，并且将由该`prepareToPlayback`方法执行。

综上所述，该`play`方法可以在用户指定时立即开始播放多媒体内容。显然，如果媒体尚未准备好，系统会`prepareForPlayback`在开始时要求您`play`进行这些必要的准备。

例如，在您的应用程序中，用户可能会一步选择多媒体剪辑。您可以立即致电`prepareToPlay`，并在预览窗口中显示海报框​​架。然后当用户按下`Play>`按钮时，内容就准备好了。

模拟世界中的一个简单化的平行可能类似于将磁带穿入卷轴，卷起卷轴并预张紧磁带，将磁带头定位在内容的开头。然后，当您按下播放键时，几乎立即就能听到声音。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:11:19.273

**准备播放**

> 准备播放电影播放器​​。（必需）如果在调用 play 方法时电影播放器​​尚未准备好播放，则该方法会自动调用此方法。但是，为了尽量减少播放延迟，请在调用 play 之前调用此方法。

**玩**

> 开始播放当前项目。（必需）如果之前暂停播放，则此方法从中断处恢复播放；否则，此方法从头开始播放第一个可用项目。如果调用此方法时电影播放器​​未准备好播放，则此方法先准备好电影播放器​​，然后开始播放。要最大限度地减少播放延迟，请在调用此方法之前调用 prepareToPlay 方法。

请访问[MPMediaPlayback 协议参考](http://developer.apple.com/library/ios/#documentation/MediaPlayer/Reference/MPMediaPlayback_protocol/Reference/Reference.html#//apple_ref/occ/intfm/MPMediaPlayback/prepareToPlay)

# python - Python如何更改列表中引用的变量

> ID：15810645
> 
> 赞同：1
> 
> 时间：2013-04-04T12:06:13.947
> 
> 标签：python, list

```
import random
warrior = 'Warrior'
mage = 'Mage'
warlock = 'Warlock'
paladin = 'Paladin'
firstList = [warrior, mage, warlock, paladin]
print(firstList[0], firstList[1], firstList[2], firstList[3])
firstNumber = random.randint(0, 3)
firstList[firstNumber] = '*taken*'
print(firstList[0], firstList[1], firstList[2], firstList[3])
secondList = [paladin, warlock, mage, warrior]
print(secondList[0], secondList[1], secondList[2], secondList[3]) 
```

假设随机数选择 0 我意识到第 9 行实际上只是将列表条目更改为“ *taken* ”，而不是将条目引用的“warrior”变量更改为“ *taken* ”。有没有办法做到这一点？

原谅魔兽参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:11:21.760

You want to use dictionaries instead:

```
taken = {'warrior': False, 'mage': False, 'warlock': False, 'paladin': False}
names = {'warrior': 'Warrior', 'mage': 'Mage', 'warlock': 'Warlock', 'paladin': 'Paladin'} 
```

or:

```
taken = dict.fromkeys(('warrior', 'mage', 'warlock', 'paladin'), False)
names = {character: character.capitalize() for character in taken} 
```

then pick a random character:

```
from random import choice
picked = choice(list(names.keys()))
taken[picked] = True
print('Picked:', names[picked]) 
```

You really do not want to use separate local identifiers to represent a group of characters, that only complicates matters.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:30:15.007

你不能用你目前的技术做到这一点。我建议在 Martijn Pieters 的回答中使用该技术。

只是为了稍微解释一下为什么你不能：

您的变量都是`string`不可变的对象（如 Peter Wood 所述）。不可变意味着无法更改 - 当您更改变量时，您正在创建一个新对象。如果您要使用可变类型做同样的事情，那么这将是可能的

```
>>> list_1 = []
>>> list_2 = []
>>> main_list = [list_1, list_2]
>>> main_list[1].append(5)
>>> print(list_2)
[5] 
```

有关可变性的更多信息，请参阅：
[不可变与可变类型](https://stackoverflow.com/questions/8056130/immutable-vs-mutable-types-python)
[在 Python 中哪些是不可变的？](https://stackoverflow.com/questions/5656998/which-of-these-are-immutable-in-python)
[http://stsdas.stsci.edu/pyraf/python_quick_tour.html#PyMutability](http://stsdas.stsci.edu/pyraf/python_quick_tour.html#PyMutability)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:13:26.907

我会选择两组，`untaken`并且`taken`，因为这似乎与顺序无关。

因此，您可以选择成员并在集合之间移动它们，例如

```
import random
taken = set()
untaken = set(['Mage','Warlock','Warrior','Paladin'])
chosen = random.sample(untaken,1)
taken.add(chosen)
untaken.remove(chosen) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:33:38.897

为什么不使用面向对象的方法？

```
from random import choice

class Character(object):
    def __init__(self, name, taken=False):
        self.name = name
        self.taken = taken
    def get_taken(self):
        self.taken = True
    def __repr__(self):
        return self.taken and '{} (taken)'.format(self.name) or self.name

class Team(list):
    def take_someone(self, number=None):
        if number is None:
            choice(self).get_taken()
        else:
            self[number].get_taken()

myTeam = Team([Character("Warrior"),
               Character("Mage"),
               Character("Warlock")])
print myTeam 
```

[战士，法师，术士]

```
myTeam.take_someone()

print myTeam 
```

【战士、法师、术士（拿下）】

现在你甚至可以将一个字符初始化为“ `taken`”，你可以让你的`myTeam`对象选择一些随机字符来使用`myTeam.take_someone()`，或者你可以通过索引来获取一个字符。例如`myTeam.take_someone(0)`。

# java - 从文件 java 添加单词

> ID：15810646
> 
> 赞同：0
> 
> 时间：2013-04-04T12:06:16.107
> 
> 标签：java, parsing, text-files

如何使用 java 从文件中添加单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:23:28.310

您只是将其与其中一个孩子进行比较。

```
for(int i=0; i<rootChildren.length; i++){
                    Node rootChild = rootChildren[i];
                    //see if the addChar1 already exists in the tree
                    //if it doesn't

                    if(!rootChild.equals(addChar1)){
                        //add the addChar1 as a child of the root
                        root.addChild(addChar1);

                    }
                    else{
                        System.out.println(addChar1.getItem() + " Exists in the tree already");
                    } 
```

在它不等于第一个孩子之后已经添加它。你想看看它是否等于任何孩子。你可以做的是这样的：

```
 int equalsnrofchildren = 0;
    for(Node rootChild : rootChildren){//loops through all the children
                        //see if the addChar1 already exists in the tree
                        //if it doesn't

                        if(rootChild.equals(addChar1)){
                            equalsnrofchildren++;

                        }
    }

    if(equalsnrofchildren == 0){
    root.addChild(addChar1);
    }else{
System.out.println("already exists..");
} 
```

# c# - 我无法使用 Web 服务从 oracle 数据库中获取数据集

> ID：15810648
> 
> 赞同：0
> 
> 时间：2013-04-04T12:06:24.463
> 
> 标签：c#, web-services, oracle

我有这个，但 DataSet 不会填充

```
[WebMethod(Description = "")]
    public DataSet OracleDataset()
    {
        OracleConnection conn = new OracleConnection("Provider=OraOLEDB.Oracle;Data Source=razvoj;User Id=kr;Password=kr;");

        OracleDataAdapter adapter = new OracleDataAdapter("SELECT * FROM FBARZN", conn);
        DataSet ds = new DataSet();

        adapter.Fill(ds);

        return ds;
    } 
```

该怎么办？有什么解决办法吗？

谢谢！

# sharepoint - 在工作流期间，不会更新计算字段。这可以做到吗？

> ID：15810651
> 
> 赞同：0
> 
> 时间：2013-04-04T12:06:28.887
> 
> 标签：sharepoint, sharepoint-2010

**塞纳里奥：**

假设我们有一个包含这些字段的列表：

*   **L：**查找
*   **T1：**文本
*   **T2：**文本
*   **C：**使用公式“=[T1] & [T2]”计算的字段

我们有一个工作流程可以做到这一点：

1.  使用查阅列的值更新字段 T1
2.  使用计算字段 C 的值更新字段 T2

**现在的问题：**

似乎计算的字段 C 在工作流程期间没有正确更新。

由于在步骤 1 中更新了字段 T1，我预计字段 C 会在步骤 2 中自动更改。但事实并非如此。这种行为可以改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:44:17.470

当您保存项目或更改字段设置中的计算时，计算字段会更新值。

您可以更改工作流程，如下所示：

1.  使用查阅列的值更新字段 T1

2.  使用 [T1] 和 [T2] 的值更新字段 T2

或者

1.  使用查阅列的值更新字段 T1
2.  调用 item.Update()
3.  使用计算字段 C 的值更新字段 T2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:54:15.770

我不认为它可以改变。但是，您也可以在工作流程中设置 C 值...

# php - 使用日期时 floor 和 ceil 之间的差异

> ID：15810653
> 
> 赞同：0
> 
> 时间：2013-04-04T12:06:39.633
> 
> 标签：php, mysql, excel, date

当使用 ceil 并输入 2013-02-28 作为开始和 2013-05-30 作为结束时，两者之间有 92 天：

```
return ceil(($end - $start) / $medium); 
```

而在地板上我得到 91 天：

```
return floor(($end - $start) / $medium); 
```

当我在 excel 和 mysql 中使用 datediff 函数执行此操作时，我也得到 91，rwo 和哪个是正确的方法有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:27:29.913

`ceil()`函数用于通过四舍五入获得下一个最高整数值，而函数通过四舍五入`floor()`将指定的数值转换为下一个最低整数值。

因此，当您使用 ceil() 时，您获得的值以及如果它包含小数点，它将始终舍入到下一个最高整数，但 floor 会将其舍入到下一个最低整数。

有关 ceil 和 floor 的更多信息可以在这里找到：http: [//php.net/manual/en/function.ceil.php](http://php.net/manual/en/function.ceil.php)和[http://php.net/manual/en/function.floor.php](http://php.net/manual/en/function.floor.php)

但我认为只需使用 floor 即可获得正确的输出：

```
$end = "2013-02-28";
$start = "2013-05-30";
$medium = '60*60*24';

$difference = abs(strtotime($end) - strtotime($start));
$days = floor(($difference)/ ($medium));

echo $days ; 
```

希望这可以帮助你:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:09:53.007

ceil - 向上舍入分数 floor - 向下舍入分数

> 天花板 (4.1) = 5 地板 (4.1) = 4

# python - 使用模板生成 Django 动态页面

> ID：15810657
> 
> 赞同：0
> 
> 时间：2013-04-04T12:06:42.387
> 
> 标签：python, html, django, django-templates, checkbox

我想使用模板和内容块生成一个页面。主页会生成一堆复选框来为某些特定值生成搜索查询。

```
<div id="searchbar">
  {% for foo in bar %}
    <input type="checkbox" name="foovar" value={{foo.name}}{%if foo.name in p %}checked=checked{%endif%}>{{foo.name}}<br>
  {%endfor%}
  <input type="submit" value="Submit">
</div>
<div id="searchresult">
{% block content %}
{% endblock %} 
```

值 'bar' 是传递给包含所有特定值的模板的参数：

```
 return render_to_response('testlink/foobar.html',{'bar':strings_from_database}) 
```

现在，在提交值后，它们被传递给我的视图，发生了一些神奇的事情，结果通过

```
 return render(request,'extend/extend.html',{'result':result,'p':queried_values}) 
```

result 是结果，p 包含查询的值（在提交后保持复选框处于选中状态）。

```
 {% extends "testlink/foobar.html" %}
 {% block content %}
 <b>results:</b>  <br>
 {% for result in result %}
     {{result.someattribute}}<br>
 {% endfor %}
 {% endblock %} 
```

现在，我的问题：复选框消失了，可能是因为再次执行了“for foo in bar”循环。有没有办法防止这种情况发生，而无需将复选框硬编码到我的模板中？这会起作用（我用几个复选框做到了，但是用太多的搜索值来做这件事并不好玩。我也想避免额外的数据库命中并再次传递参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:35:04.457

我同意上面的评论，使用表格几乎总是一个更好的主意。但是针对您的问题，如果您没有将`bar`变量传递给模板，则不会执行解析复选框的循环。您需要添加`bar`到上下文中`extend.html`：

```
return render(request,'extend/extend.html',
    {'result':result,'p':queried_values, 'bar':strings_from_database}) 
```

你这样做不是为了防止两次击中数据库吗？它是否被证明是一个非常昂贵的查询？

除了设置缓存之外，您始终可以将所有复选框“名称”与表单一起传递。您可以添加隐藏输入，如下所示：

```
{% for foo in bar %}
    <input type="checkbox" name="foovar" value="{{foo.name}}" {%if foo.name in p %}checked="checked"{%endif%}>{{foo.name}}<br>
    <input type="hidden" name="foovar_all" value="{{foo.name}}" />
{%endfor%} 
```

然后，您需要使用以下内容收集值：

```
bar = request.POST.getlist('foovar_all') 
```

但是您需要重新考虑您的代码，以便`bar`变量仅在两个视图中保存这些对象的名称，它看起来像是当前的对象列表。同样，是否真的有必要避免该查询？

# android - Android SyncAdapter：重试

> ID：15810659
> 
> 赞同：0
> 
> 时间：2013-04-04T12:06:43.937
> 
> 标签：android, synchronization, android-syncadapter

我正在使用一个`AbstractThreadedSyncAdapter`与我的服务器同步一些数据。我`SyncResult`用来指示执行同步时是否出现错误：

```
syncResult.stats.numParseExceptions++; 
```

我像这样初始化 SyncAdapter：

```
Bundle params = new Bundle();
params.putBoolean(ContentResolver.SYNC_EXTRAS_EXPEDITED, false);
params.putBoolean(ContentResolver.SYNC_EXTRAS_DO_NOT_RETRY, false);
params.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, false);
ContentResolver.addPeriodicSync(account, CONTENT, params, 3600);
ContentResolver.setSyncAutomatically(account, CONTENT, true);
ContentResolver.requestSync(account, CONTENT, new Bundle()); 
```

如果同步失败，我希望它在 5 分钟后重试（定期同步时间为 1 小时）。我以为我必须使用`syncResult.delayUntil`，但没有重试同步。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:52:18.210

Documentation say's: ([http://developer.android.com/reference/android/content/ContentResolver.html#addPeriodicSync(android.accounts.Account](http://developer.android.com/reference/android/content/ContentResolver.html#addPeriodicSync(android.accounts.Account), java.lang.String, android.os.Bundle, long))

> Periodic syncs are not allowed to have any of SYNC_EXTRAS_DO_NOT_RETRY, SYNC_EXTRAS_IGNORE_BACKOFF, SYNC_EXTRAS_IGNORE_SETTINGS, SYNC_EXTRAS_INITIALIZE, SYNC_EXTRAS_FORCE, SYNC_EXTRAS_EXPEDITED, SYNC_EXTRAS_MANUAL set to true. If any are supplied then an IllegalArgumentException will be thrown.

Maybe that's the problem. Try remove this params - may work. Write if it helps.

Or You forgot permissions:

```
<uses-permission android:name="android.permission.READ_SYNC_STATS" />
<uses-permission android:name="android.permission.READ_SYNC_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" /> 
```

# jquery - 没有给出样式时，JQuery .css 返回默认值

> ID：15810667
> 
> 赞同：0
> 
> 时间：2013-04-04T12:07:00.883
> 
> 标签：jquery

我想知道为什么 JQuery .css 方法在没有提供样式属性时返回默认值，就像[这里的示例一样](http://jsfiddle.net/4SaSw/)

```
var r = $('#mmalam').css('display');   $('#result').html(r); 
```

我做了一个简单的 div，没有给它样式属性，但 .css 方法仍然返回“display = block”

此外，当没有为元素提供样式时，是否有任何 JQuery 方法将返回空值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:11:15.077

所有浏览器都有一个内置的样式表，它规定了元素的显示方式。 `div`s 是块元素，因此具有`display`设置为的默认样式`block`。

这个[答案](https://stackoverflow.com/questions/32875/browsers-default-css-stylesheets)应该会更清楚一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:10:05.667

这是因为默认显示值为block

# android - 我想动态更改列表视图中文本视图的颜色

> ID：15810668
> 
> 赞同：1
> 
> 时间：2013-04-04T12:07:02.930
> 
> 标签：android, listview, textview

我有这个布局，其中有一个列表视图。列表的内容是在另一个布局中定义的。我在这个布局中有文本视图，我想根据某些条件动态更改文本视图的颜色（比如简单的 if else）。请让我知道如何执行此操作。这是我的代码-：

```
ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.recentlist,
                new String[] { KEY_CAT, KEY_DATE, KEY_TID, KEY_AMO, KEY_DEB,KEY_CUR,KEY_BAL,KEY_FEES}, new int[] {
                R.id.textView1,R.id.textView2, R.id.textView3, R.id.textView4,R.id.textView5,R.id.textView7,R.id.textView6,R.id.textView8});

        setListAdapter(adapter); 
```

这个特殊的布局是我从另一个 xml 文件中添加的，用于将 listview 的内容放入其中。所以我不能通过使用 textView 来设置TextColor，因为它需要这个类布局的 id 而不是这个布局。请帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:10:29.180

AFAIK you cant use a `SimpleAdapter` to perform this operation as SimpleAdapter only copies data from data set to TextView in your `ListView`. In order to handle color changes at run-time you should define a `CustomArrayAdapter`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:14:34.030

通过将 SimpleAdapter 的 getView 方法扩展到您自己的类来覆盖它。在 getView 方法中，您可以使用 View.findViewById ，然后对您的 TextView 做任何您想做的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:16:18.400

```
TextView tv1 = (TextView) vi.findViewById(R.id.your_textview_id);
// where vi is convertview
tv1.setTextColor(Color.BLUE); 
```

# wordpress - 在 wordpress 中禁用裁剪特色图像

> ID：15810671
> 
> 赞同：1
> 
> 时间：2013-04-04T12:07:13.530
> 
> 标签：wordpress, wordpress-theming, crop

我正在使用特色图片作为发布图片，但是在上传图片时，它会在将其设置为特色图片时进行裁剪，我找不到任何解决方案，有人可以帮忙吗？

**Wordpress 管理面板截图：** -

![在此处输入图像描述](https://i.stack.imgur.com/fBNjV.png)

这张图片实际上是**1024x702**但它会削减到**940x198**，我找不到任何解决方案来解决如何禁用裁剪...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:34:45.947

不确定如何禁用裁剪，但您可以尝试使用[add_image_size](http://codex.wordpress.org/Function_Reference/add_image_size)函数来注册更大的图像尺寸。

像这样的东西：（在functions.php中添加这个）

```
add_image_size( 'featuredImageCropped', 1024, 768, true ); 
```

然后在模板中找到 the_post_thumbnail 并修改如下：

```
the_post_thumbnail( 'featuredImageCropped' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T10:42:55.223

在您的主题内有一个名为 functions.php 的文件 - 在 functions.php 内，您会发现一行类似于以下的代码：

```
add_image_size('featured', 940, 198, true); 
```

这些参数是名称、宽度、高度和裁剪。

当裁剪设置为“true”时，您的图像将调整大小，使其完全填充宽度-高度尺寸。图片的最短边将等于允许的最大值，图片的最长边将被裁剪。

当裁剪设置为“false”时，您的图像将被调整大小，以使其适合*宽度*-高度尺寸。图像的最长边将等于最大允许值，而图像的较短边将更小。

我建议您使用这些设置来达到您所追求的确切效果。您最可能想要的*不是*禁用裁剪，而是简单地增加特色图像的最大允许高度。

# php - 根据 url 显示内容

> ID：15810683
> 
> 赞同：0
> 
> 时间：2013-04-04T12:08:05.407
> 
> 标签：php, html, web

是否可以根据 URL 确定要显示的内容？

我有一个索引文件，它是：

```
<?php include './includes/header.php'; ?>
<?php include './includes/menu.php'; ?>
<?php include './includes/content.php'; ?>
<?php include './includes/sidebar.php'; ?>
<?php include './includes/footer.php'; ?> 
```

注意：我有不同`content.php`的“”

是否可以执行以下操作：

```
If Url = url {
    show only content for the url
} 
```

然后有像这样的案例系统

```
case: home.php
      show some 
```

ETC

我知道 Wordpress 可以做到。PHP、MySQL 和 HTML 有可能吗？

编辑：我想显示从我的数据库中获得的所需 HTML 代码，而不是 content.php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:11:10.213

使用此功能查看您当前的页面。然后使用“switch”大小写正确的包含文件：

```
## Get Current Page / Section
function cur_page()
{
    $cur_page='';
    if(isset($_SERVER['PHP_SELF']) && $_SERVER['PHP_SELF']!='')
    {
        $temp_var1 = explode('/', $_SERVER['PHP_SELF']);
        $cur_page = $temp_var1[count($temp_var1)-1];
    }
    else if(isset($_SERVER['SCRIPT_NAME']) && $_SERVER['SCRIPT_NAME']!='')
    {
        $temp_var1 = explode('/', $_SERVER['SCRIPT_NAME']);
        $cur_page = $temp_var1[count($temp_var1)-1];
    }
    else if(isset($_SERVER['REQUEST_URI']) && $_SERVER['REQUEST_URI']!='')
    {
        $temp_var1 = explode('/', $_SERVER['REQUEST_URI']);
        $cur_page = $temp_var1[count($temp_var1)-1];
        $temp_var2 = explode('?', $cur_page);
        $cur_page = $temp_var2[0];
    }
    else if(isset($_SERVER['SCRIPT_FILENAME']) && $_SERVER['SCRIPT_FILENAME']!='')
    {
        $temp_var1 = explode('/', $_SERVER['SCRIPT_FILENAME']);
        $cur_page = $temp_var1[count($temp_var1)-1];
    }
    return $cur_page;
}//end func..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:11:32.407

从数据库查询。

> 不推荐MySql，希望大家改学PDO，不过只是为了这个例子

```
function get_me_title($page) {
$query = "SELECT * FROM title WHERE title = $page";
$result = mysql_query($query); 
foreach($result as $row) {

return $row[$page];
}

} 
```

现在，您可以使用 function 。`get_me_title('whatever')`从数据库中查询，并在下面回显

```
if(isset($_GET['page_id'])) {

$page = $_GET['page_id'];

switch($page) {

case "contact";
echo get_me_title('contact');
break; 

case "about";
echo get_me_title('about');
break; 

case "portofolio";
echo  get_me_title('portofolio')
break; 

default:
echo 'you are in home page';

}
}else {echo '404 ERROR! The Page you have requested does not exist';} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T12:15:26.170

您可以包含所需的页面，而不是包含 content.php。例如，如果您构建您的网址，例如 $_GET['page'] 将引用所需的页面，那么您可以这样做。

```
$availablePages = array('default' => 'home', 'about');
if (isset($_GET['page']) && in_array($_GET['page'], $availablePages) {
    $page = $_GET['page'] . '.php';
} else {
    $page = $availablePages['default'] . '.php';
}

include $page; 
```

# ektron - 将内容迁移到 Ektron

> ID：15810685
> 
> 赞同：1
> 
> 时间：2013-04-04T12:08:07.763
> 
> 标签：ektron, vignette

我在 Ektron 8.6 中工作。

我需要将内容从 Vignette CMS 迁移到 Ektron。ekron 中是否有任何选项可以自动执行内容迁移过程而不是手动执行（通过从其他 CMS 获取 HTML 来创建内容）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:12:46.293

您需要使用 Ektron API 添加内容。您必须自己编写该代码。您在 Ektron 中用于组织内容的文件夹将不同于其他任何人的文件夹。此外，在 Vignette 中组织内容的方式对于您的站点来说是独一无二的，因此必须自定义导入代码。

我发现如果您的内容少于 400 条，手动操作会更容易。

# c++ - memcpy 模板变体中的错误

> ID：15810689
> 
> 赞同：1
> 
> 时间：2013-04-04T12:08:22.877
> 
> 标签：c++, templates

我想编写 memcpy 的模板变体：

```
template< typename T > 
inline T& MemCopy( T& dest, const T& src )
{
  *( T* )memcpy( &dest, &src, sizeof( src ) ) ;
} 
```

当我尝试在 VS2010 中编译下一个代码时：

```
typedef short AMSync[ 4 ] ;
static AMPSync aSync ;

void Init( const AMPSync& sync )
{
   MemCopy( aSync, sync ) ;
} 
```

我得到错误：

```
'T &MemCopy(T &,const T &)' : template parameter 'T' is ambiguous
          : see declaration of 'MemCopy'
          could be 'const short [4]'
          or       'AMPSync' 
```

如果我使用：

```
template< typename T1, typename T2 > 
inline T1& MemCopy( T1& dest, const T2& src )
{
   *( T1* )memcpy( &dest, &src, sizeof( src ) ) ;
} 
```

然后错误不存在，但在这种情况下编译器无法检查参数的大小

有没有办法实现这两个目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:18:46.313

```
template<typename T1, typename T2> 
T1& MemCopy(T1& dest, const T2& src)
{
   static_assert(sizeof(src) == sizeof(dest));
   return *reinterpret_cast<T1*>(memcpy(&dest, &src, sizeof(src)));
} 
```

或者

```
template<typename T1, typename T2> 
typename std::enable_if<sizeof(T1) == sizeof(T2), T1&>::type MemCopy(T1& dest, const T2& src)
{
   return *reinterpret_cast<T1*>(memcpy(&dest, &src, sizeof(src)));
} 
```

虽然你为什么要这样做？你的例子会更好：

```
static AMPSync aSync ;

void Init( const AMPSync& sync )
{
    aSync = sync;
} 
```

# string - 逐行拆分字符串

> ID：15810690
> 
> 赞同：0
> 
> 时间：2013-04-04T12:08:23.440
> 
> 标签：string, codeigniter

我收到这样的错误消息。如何逐行拆分此字符串。比如 'Error Number: 1146' 作为一个字符串，下一行作为另一个字符串。

```
Error Number: 1146
Table 'baycliff.booking1' doesn't exist 
```

询问：

```
INSERT INTO booking1 (name, address, phonenumber, email, Noperson, room_id, fromDate, toDate, comment, booking_date, tariff) VALUES ('', '', '', '', '', '2', '', '', '', '', '') 
```

# kdb - KDB '@' 运算符

> ID：15810691
> 
> 赞同：2
> 
> 时间：2013-04-04T12:08:29.390
> 
> 标签：kdb

[@ 运算符](http://code.kx.com/q/ref/select/#index-at)返回由其参数在第一级索引的元素。

您将如何用英语解释参考示例中的最后一行：

```
q)d:((1 2 3;4 5 6 7);(8 9;10;11 12);(13 14;15 16 17 18;19 20))
q)d@1
(8 9;10;11 12)
q)d@1 2 / selects 2 items at the top level
((8 9;10;11 12);(13 14;15 16 17 18;19 20))

q)@[d;1 1 1;+;3]
((1 2 3;4 5 6 7);(17 18;19;20 21);(13 14;15 16 17 18;19 20)) 
```

我不理解上次`@`使用返回的任何值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:53:01.767

对于数据结构 d，在索引 1 1 1 处获取这些项目并添加 3。由于您引用相同的索引 3 次，因此意味着添加 9。将其分解为以下步骤：

```
q)d
(1 2 3;4 5 6 7)
(8 9;10;11 12)
(13 14;15 16 17 18;19 20)

/ use indexing to check which elements we are referring to
q)@[d;1]
8 9
10
11 12

/ adding 3 to a single index
q)@[d;1;+;3]
(1 2 3;4 5 6 7)
(11 12;13;14 15)
(13 14;15 16 17 18;19 20)

/ refer to same index multiple times
q)@[d;1 1 1;+;3]
(1 2 3;4 5 6 7)
(17 18;19;20 21)
(13 14;15 16 17 18;19 20) 
```

引用同一个索引加 9 的原因是由于 kdb 的内存管理：[http](http://www.timestored.com/kdb-guides/memory-management#reference_counting) ://www.timestored.com/kdb-guides/memory-management#reference_counting 在每种情况下都引用了相同的底层向量，这可能是有点意外。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T18:43:14.620

@罗伯特库布里克

对于你的第二个问题

为什么调用`@[d;1]`只返回索引元素而`@[d;1;+;3]`返回所有`d`元素？

`@[d;1]`仅返回 1 处的列表，因为它有效地索引到列表中。相当于做`d[1]`（或`d@1`）

```
 q )d:((1 2 3; 4 5 6 7);(8 9; 10 11 12); ( 13 14; 15 16 17 18; 19 20))
 q)d
 (1 2 3;4 5 6 7)
 (8 9;10 11 12)
 (13 14;15 16 17 18;19 20)
q)@[d;1]
 8 9
 10 11 12
q)d@1
8 9
10 11 12
q)d[1]
8 9
10 11 12 
```

同时doing`@[d;1;+;3]`将返回整个列表，因为它是在索引1时添加3的功能应用程序，它不等同于您正在使用`@[d;1]`的操作，它们是2个不同的操作，恰好`@`运算符重载有很多含义（这两个是其中之一）

# c# - 从 linq 到 sql 中的子查询中选择前 1 个结果

> ID：15810699
> 
> 赞同：24
> 
> 时间：2013-04-04T12:08:41.113
> 
> 标签：c#, linq, linq-to-sql

这是我的sql查询如下

```
select enq_Id,enq_FromName,
       enq_EmailId,
       enq_Phone,
       enq_Subject,
       enq_Message,
       enq_EnquiryBy,
       enq_Mode,
       enq_Date,
       ProductId,
       (select top 1 image_name 
        from tblProductImage as i 
        where i.product_id=p.product_Id) as imageName,
       p.product_Name,
       p.product_code    
 from tblEnquiry as e 
 inner join tblProduct as p ON e.ProductId=p.product_Id
 where ProductId is not null 
```

我尝试将此 sql 语句转换为 linq，如下所示

```
var result = from e in db.tblEnquiries
             join d in db.tblProducts 
                  on e.ProductId equals d.product_Id                     
             where e.ProductId != null
             orderby e.enq_Date descending
             select new {
                e.enq_Id,
                e.enq_FromName,
                e.enq_EmailId,
                e.enq_Phone,
                e.enq_Subject,
                e.enq_Message,
                e.enq_EnquiryBy,
                e.enq_Mode,
                e.enq_Date,
                d.product_Id,
                d.product_Name,
                imageName = (from soh in db.tblProductImages
                             where soh.product_id == e.ProductId
                             select new { soh.image_name }).Take(1) 
             }; 
```

但问题是它给了我`imageName`一个嵌套列表，但我希望它`imageName`只是一个字符串。

我还使用快速手表进行检查，在下图中您可以看到`imageName` 出现在内部列表中。

![这里可以查看快速观看结果](https://i.stack.imgur.com/fNmSy.png)

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-04T12:12:22.127

而不是`Take(1)`which 返回 sequence `IEnumerable<string>`，而是使用`FirstOrDefault()`which 返回单个字符串值（如果没有结果，则使用 null ）。也不要为子查询结果创建匿名类型：

```
imageName = (from soh in db.tblProductImages
             where soh.product_id == e.ProductId
             select soh.image_name).FirstOrDefault() 
```

顺便说一句，`FirstOrDefault()`生成`TOP(1)`SQL。

# rdf - .net RDF DBLP 查询

> ID：15810700
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:08:43.157
> 
> 标签：rdf

```
public partial class Index : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{

}
protected void ImageButton1_Click(object sender, ImageClickEventArgs e)
{
    try
    {
        String st = "";
        String qry = "";
        String uri_V;
        String dguri_V;

        // uri_V = "http://dbpedia.org/sparql";
        // dguri_V = "http://dbpedia.org";

        uri_V = "http://dblp.l3s.de/d2r/sparql";

        // Modify if need......
        //String ns = "\""+TextBox1.Text.ToString()+"\"";
        // String qry = "SELECT DISTINCT ?name WHERE { ?person foaf:name ?name.FILTER regex(str(?name),"+ns+").}";

        qry = "SELECT ?x WHERE { ?x dcterms:issued ?year} LIMIT 20";
        //  qry = "SELECT ?name WHERE { ?x dcterms:issued ?year. FILTER (?year>2011). ?x dc:creator ?author. ?author foaf:name ?name. } LIMIT 20";
        /* if (radiosrch.SelectedIndex == 0)
         {
             qry = "SELECT DISTINCT ?Concept WHERE {[] a ?Concept} LIMIT 5";
         }
         else// if (radiosrch.SelectedIndex == 1) 
         {
             // qry= "query for publisher."
             qry = "SELECT DISTINCT ?Concept WHERE {[] a ?Concept} LIMIT 5";
         }
         */

        //Common
        SparqlRemoteEndpoint endpoint = new SparqlRemoteEndpoint(new Uri(uri_V));//, dguri_V);
        SparqlResultSet results = endpoint.QueryWithResultSet(qry);
        foreach (SparqlResult result in results)
        {
            Console.WriteLine(result.ToString());
            st = st + result.ToString() + "\n";
        }
        TextBox3.Text = st.ToString();
    }
    catch (Exception ex)
    {
        Label1.Visible = true;
        Label1.Text = ex.ToString();
    }

}

} 
```

我收到以下错误：
`VDS.RDF.Query.RdfQueryException: A HTTP Error occurred while trying to make the SPARQL Query, see inner exception for details ---> System.Net.WebException: The remote server returned an error: (400) Bad Request. at System.Net.HttpWebRequest.GetResponse() at VDS.RDF.Query.SparqlRemoteEndpoint.ExecuteQuery(Uri target, String postData, String accept) at VDS.RDF.Query.SparqlRemoteEndpoint.QueryInternal(String sparqlQuery, String acceptHeader) at VDS.RDF.Query.SparqlRemoteEndpoint.QueryWithResultSet(ISparqlResultsHandler handler, String sparqlQuery) --- End of inner exception stack trace --- at VDS.RDF.Query.SparqlRemoteEndpoint.QueryWithResultSet(ISparqlResultsHandler handler, String sparqlQuery) at VDS.RDF.Query.SparqlRemoteEndpoint.QueryWithResultSet(String sparqlQuery) at Index.ImageButton1_Click(Object sender, ImageClickEventArgs e) in d:\SPARQL\Index.aspx.cs:line 53`

[但是当我在http://dblp.l3s.de/d2r/snorql](http://dblp.l3s.de/d2r/snorql)端点上运行这个查询时，我绝对没有错误。请帮帮我！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:30:42.080

我相信您的问题是您未能`PREFIX`在 SPARQL 查询中定义任何声明，但您在查询中使用了前缀名称缩写作为 URI。

因此，远程服务器完全有权返回 a `400 Bad Request`，因为它不知道您在问什么。

如果您不知道它已经尝试使用在线[SPARQL 查询验证器](http://sparql.org/query-validator.html)，它可以为您的查询提供有用的健全性检查。您所写的查询在此处输入时会出现以下错误：

> 第 1 行，第 22 列：未解析的前缀名称：dcterms:issued

您的查询应该如下是有效的：

```
String qry = @"PREFIX dcterms: <http://purl.org/dc/terms/>
SELECT ?x WHERE { ?x dcterms:issued ?year} LIMIT 20"; 
```

您可能还想查看Querying [with SPARQL](https://bitbucket.org/dotnetrdf/dotnetrdf/wiki/UserGuide/Querying%20with%20SPARQL)文档，该文档在 Representing Queries 部分包括使用[SparqlParameterizedString](http://www.dotnetrdf.org/api/index.asp?Topic=VDS.RDF.Query.SparqlParameterizedString)类而不是使用预定义前缀构建查询的示例，例如

```
SparqlParameterizedString queryString = new SparqlParameterizedString();
queryString.Namespaces.AddNamespace("dcterms", new Uri("http://purl.org/dc/terms/"));
queryString.CommandText = "SELECT ?x WHERE { ?x dcterms:issued ?year} LIMIT 20"; 
```

然后，您只需`ToString()`在`queryString`准备好将其传递给远程端点时调用。

# asp.net - ASP.net 与现有数据库合并？

> ID：15810702
> 
> 赞同：0
> 
> 时间：2013-04-04T12:08:49.943
> 
> 标签：asp.net, sql, entity-framework

我有一个在服务器上填充了数据的数据库。我对数据库模型进行了一些更改，我希望将现有数据与新数据合并，而不会丢失所有内容。

您知道实现此目的的适当且严肃的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:19:22.367

一种方法是设置从它们每个到单个数据库的复制。但这似乎相当耗时。我认为您可能必须编写一个程序来执行此操作（.net 或 SQL），因为如果您有两条具有相同主键的记录，它如何知道要获取哪条记录？

如果你知道永远不会有任何重复，你可以只写 sql 语句来做到这一点。但这是一个很大的如果。

您可以尝试类似[http://www.red-gate.com/products/sql-development/sql-data-compare/](http://www.red-gate.com/products/sql-development/sql-data-compare/)的方法来同步数据，我相信它也会弄清楚当有两条记录时该怎么做。我对 Red-Gate 产品非常满意。

# android - 当我们不知道哪个应用程序是提供者但第一个应用程序已存储数据时，如何在应用程序之间共享数据

> ID：15810705
> 
> 赞同：0
> 
> 时间：2013-04-04T12:09:02.173
> 
> 标签：android

我有 5 个（任意数量）android 应用程序，它们将共享一些`data`.

现在，当用户安装第 1/2/3 ..（我不知道）android 应用程序时，它将在内存（内部存储器）中保存一个字符串，

当安装任何其他应用程序时，它应该知道其中一个应用程序已经有`written`数据，现在它应该按照`user`这些数据行事。

总而言之，安装的第一个应用程序将充当提供者，而其他应用程序将充当用户……但所有应用程序都可能是潜在的`provider`，而其他应用程序将充当用户……

**这可行吗？**

我尝试使用`file/shared preference/content providers`...但是在`file`使用它之前，您应该知道文件路径，这取决于包名称..

在`shared preference`中，我们必须创建包上下文.. 在`content provider`中，我们必须导入提供程序包..

我真正的动机是，实际上在每个应用程序中，我都是第一次注册用户......

现在我想，如果用户从我这里安装第二个应用程序，它可以只使用第一个应用程序的数据而不要求注册..

但问题是我不知道用户将首先安装哪个应用程序。如果我可以使用其他方法，请帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T11:26:40.617

我找到了一个与此相关的线程...

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/W-oOa0x9amg](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/W-oOa0x9amg) [http://android.bigresource.com/Android-How-to-share-data-between-applications-无依赖-HRMMGMIkL.html](http://android.bigresource.com/Android-How-to-share-data-between-applications-with-no-dependency-HRMMGMIkL.html)

这个线程几乎回答了我的问题，就我在这种情况下的可行性和选项而言。

# asp.net - Asp.net 确定 IIS 站点的 SSL 证书到期

> ID：15810711
> 
> 赞同：1
> 
> 时间：2013-04-04T12:09:16.290
> 
> 标签：asp.net, ssl, certificate

我正在尝试使用 Net.WebRequest 和 Net.WebResponse 连接到站点并获取 SSL 证书的到期日期。我查看了请求和响应的所有属性，但找不到此信息。任何人都可以帮忙吗？

```
 ' Initialize the WebRequest. 
    Dim myRequest As Net.WebRequest = Net.WebRequest.Create("https://testsite.com")

    ' Return the response.  
    Dim myResponse As Net.WebResponse = myRequest.GetResponse() 
```

有没有办法为此使用 WebRequest 的服务点？

# ruby-on-rails - 访问 ruby 中属性的前一个值

> ID：15810716
> 
> 赞同：0
> 
> 时间：2013-04-04T12:09:30.657
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有一个模型（一个 ActiveRecord 类）：

```
class Sample < ActiveRecord::Base
  attr_accessor :x1
end 
```

我知道

```
Sample.last.x1 == 1 #true 
```

如果我设置`Sample.last.x1 = 3`那么`Sample.last.x1_was == 1 #true`.

但是当我再次设置 x1 的值时：`Sample.last.x1 = 8`然后`Sample.last.x1_was == 3 #false`，但是`Sample.last.x1 == 1 #true`

我可以猜到为什么会发生（Sample.last 自从更改后没有保存），但我想找到一种方法来检索 x1 的前一个值（不是 db 值）。你能建议一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:43:11.303

我想不出这样做的理由，但如果你真的需要，你可以重写 setter 以随时存储各种更改。

```
def x1=( value )
  @previous_x1_value = x1
  super
end

def previous_x1_value
  @previous_x1_value || x1_was
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:54:24.780

IT 全部内置于 Rails 中。请参阅文档`[ActiveRecord@dirty][1]`

```
 person.name = 'Bob'
  person.changed?       # => true
  person.name_changed?  # => true
  person.name_was       # => 'uncle bob'
  person.name_change    # => ['uncle bob', 'Bob']
  person.name = 'Bill'
  person.name_change    # => ['uncle bob', 'Bill'] 
```

# javascript - jQuery 空（）与文本（''）

> ID：15810728
> 
> 赞同：5
> 
> 时间：2013-04-04T12:10:06.887
> 
> 标签：javascript, jquery, dom-manipulation

之间有什么不同吗

`$(element).empty()`和`$(element).text('');`

哪一个更好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T12:17:37.997

结果是一样的，但是如果我们看一下 jQuery[文本](http://james.padolsey.com/jquery/#v=git&fn=jQuery.fn.text)方法的实现：

```
text: function (value) {
    return jQuery.access(this, function (value) {
        return value === undefined
            ? jQuery.text(this)
            : this.empty().append((this[0] && this[0].ownerDocument || document).createTextNode(value));
    }, null, value, arguments.length);
}, 
```

我们将看到它`$(element).text('');`实际上会在`.empty`内部使用。因此后者要快一些。

同样从语义的角度来看，如果你想*清空*某个节点，你应该明确地使用`.empty`方法，而不是`text`.

# umbraco - 如何在 umbraco 6 的管理面板中创建自定义部分？

> ID：15810730
> 
> 赞同：1
> 
> 时间：2013-04-04T12:10:12.350
> 
> 标签：umbraco

我希望在 umbraco 6 的管理面板中开发一个自定义用户部分。
该部分可以管理用户详细信息以及管理员批准。任何人都知道如何实现这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-09T02:07:58.843

显然它类似于[在 Umbraco 4 中这样做](http://www.geckonewmedia.com/blog/2009/8/3/how-to-create-a-custom-section-in-umbraco-4)

但在 Umbraco 6`umbracoApp`中，您无需更改表格，而是更改`Config/applications.config`文件

**更新：** 对于树节点，我仍然[使用旧方法](http://www.robertgray.net.au/posts/2011/5/creating-a-custom-content-tree-in-umbraco.aspx)。显然在 Umbraco 6 中您可以[使用 trees.config](http://www.theoutfield.net/blog/2012/07/creating-custom-applications-and-trees-in-umbraco-48plus)，但我还没有尝试过，我对此了解不多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T14:14:18.053

我已经写了一篇关于这个应该在 Umbraco 6 中工作的博客文章。

所做的更改是在配置文件中更改而不是更改表。也可以通过 C# 中的代码结合 c# 属性来创建表。

[http://marcus-abrahamsson.se/post/Custom-Section-in-Umbraco-Back-office](http://marcus-abrahamsson.se/post/Custom-Section-in-Umbraco-Back-office)

# jquery - Hide a div if appeared

> ID：15810734
> 
> 赞同：0
> 
> 时间：2013-04-04T12:10:28.630
> 
> 标签：jquery, html

I have a message box div in my page which will appear after succesfully submitting a form. I want to hide it after some time as it appears.

I have tried this code in the chrome developer tool and it works.

```
$(document).ready(function(){
   if ($('#notification').is(":visible")) {
       $('#notification').delay(1000).fadeOut();
   }
}); 
```

But when I inserted this code to my page, its not working.

Kindly give me a solution for this.

Thank you & Regards,

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:15:00.190

您正在 dom-ready 函数中运行此代码：`$(document).ready(function(){ ...`

这意味着代码将在页面完成加载时运行一次，此时通知可能不可见，因此代码将继续并且不会再次运行。

您需要使用[jQuery 的 .submit() 方法绑定此函数以在](http://api.jquery.com/submit/)**每次提交表单时**运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:12:15.637

```
$('#myForm').submit(function() {
    $('#notification').fadeIn().delay(3000).fadeOut();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:17:40.733

您可以使用以下**`setTimeout`**调用：

```
setTimeout( function() {
    if ($('#notification').is(":visible")) {
       $('#notification').delay(1000).fadeOut();
   }
}, 3000); 
```

# c# - Rewrite Sql at runtime

> ID：15810735
> 
> 赞同：0
> 
> 时间：2013-04-04T12:10:28.770
> 
> 标签：c#

I have a SQL statement with parameters eg.

```
SELECT * 
FROM persons 
WHERE id = @id 
  AND firstName = @firstname
   OR surname = @surname 
```

I would like to use c# to rewrite the statement based on the parameters supplied at run-time.

Example if at runtime, `@firstname` is not provided, then my SQL should be re-written to

```
SELECT * 
FROM persons 
WHERE id = @id OR surname = @surname 
```

This is what I have so far.

```
public class SqlRewriter
{
    public string RewriteSql(List<string> passedRuntimeParameter )
    {
        var sql = @"SELECT * FROM persons 
                 WHERE id=@id AND firstName=@firstname
                 or surname=@surname";
        /**
         * todo parse the sql and compare with passedRuntimeParameter.
         * todo reconstruct the sql based on parsed parameters
         */

        return sql;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:14:19.773

```
IF @firstname = Null {
    SELECT * FROM persons WHERE id=@id or surname=@surname
} else {
    SELECT * FROM persons WHERE id=@id AND firstName=@firstname or surname=@surname
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:20:07.043

好吧，您可以改写：

```
SELECT * FROM persons WHERE
    (id=@id OR @id is null) AND
    (
        (firstName=@firstname OR @firstname is null) OR
        (surname=@surname OR @surname is null)
    ) 
```

并在您没有​​指定值时发送空值

或者如果你真的想省略参数，你可以像 mikey 或 Patrick 回答的那样做。

但请记住，如果您真的想根据您拥有的参数进行查询（**id 和 surname**，或者只是**firstname**，或者**firstname + surname**），如果您愿意自定义，您最终会遇到很多 ifs您的查询字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:14:36.807

```
if FirstName==NULL
{
 sqlQuery="ConstructYourQueryfor This condition";
}
else
{
 sqlQuery="Another Construction for else Query";
} 
```

使用 SQL 命令参数

```
using(var connection = new SqlConnection("your connectionstring goes here"))
{
    using(var command = new SqlCommand(sqlQuery,                                                                          connection))
    {
        command.Parameters.AddWithValue("@id ", yourIDvalue);
        command.Parameters.AddWithValue("@firstname ", FirstName);    
        command.Parameters.AddWithValue("@surname", surname);    
        var reader = command.ExecuteReader();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T12:14:47.103

您正在使用很好的参数化查询。您可以使用 if 块来执行您想要的操作，甚至可以使用内联 if。

```
string query = "SELECT * FROM persons WHERE id=@id" + ((firstname!=null&&firstname!=string.Empty) ? " AND firstname=@firstname OR surname=@surname" : " AND surname=@surname");
// setup command with query
// setup parameters (remember to check if you need to provide a firstname parameter or not) 
```

祝你好运

# vba - Run Outlook VBA code without being logged into the client

> ID：15810736
> 
> 赞同：1
> 
> 时间：2013-04-04T12:10:28.483
> 
> 标签：vba, outlook

I have VBA code in a non-person mailfile. I need it to run without anyone being logged into that Outlook account. It saves Excel attachments to a network share (see below). It is currently set to run as a rule against all new incoming mails.

* * *

```
Public Sub saveAttachtoDisk(itm As Outlook.MailItem)

Dim objAtt As Outlook.Attachment
Dim saveFolder As String
Dim dateFormat
dateFormat = Format(Now, "mmdd H-mm")

saveFolder = "C:\Test\One"

For Each objAtt In itm.Attachments
  If Right(objAtt.FileName, 3) = "xls" Or Right(objAtt.FileName, 4) = "xlsx" Then
    objAtt.SaveAsFile saveFolder & "\" & objAtt.DisplayName
    Set objAtt = Nothing
  End If
Next

End Sub 
```

* * *

Is it possible to automate this rule to run without being logged into an Outlook client?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T19:29:23.500

你不能。

“因为 Outlook Visual Basic for Applications 代码在客户端上运行，所以必须运行 Outlook 才能运行代码。”

[http://support.microsoft.com/kb/324568](http://support.microsoft.com/kb/324568)

# php - Imagick doesn't work in php

> ID：15810747
> 
> 赞同：1
> 
> 时间：2013-04-04T12:10:54.023
> 
> 标签：php, xampp, imagick

I have a problem. I have installed Image Imagick software, this file:

> ImageMagick-6.8.4-6-Q16-x86-dll.exe

And my php code goes like this:

```
<?php
    $gume = 'svg/EC_tyre_label.svg';
    $im = new Imagick();
    $svg = file_get_contents($gume);

    $im->readImageBlob($svg);
    /*png settings*/
    $im->setImageFormat("png24");
    $im->writeImage('svg/EC_tyre_label.png');
    $im->clear();
    $im->destroy();

?>
<body>
<img src="svg/EC_tyre_label.png" />
</body> 
```

My version of php is 5.3.8 and i am using xampp version 1.7.7. When i open it in the browser, I get this error:

> Fatal error: Class 'Imagick' not found in C:\xampp\htdocs\SVG_antonio\index.php on line 9

Does anyone know how to solve this problem?? Cheers.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:40:27.337

当您调用 phpinfo() 时，“Imagick”是否列为扩展名？！在尝试创建任何 imagick 实例之前，您需要首先确保这一点。

如果它*被*列为扩展名，请确保您不在某个命名空间内，这就是无法找到普通“imagick”的原因。

尝试（注意反斜杠！）：

```
$im = new \Imagick(); 
```

编辑：如果*未*列出，请尝试非线程安全版本，并始终确保 php.ini 中的扩展路径设置正确。您可能需要绝对路径值并使用“/”而不是“\”或相反的方式用于扩展 dll 路径。

由于我的声誉低下，我无法发布屏幕截图，但是如果 imagick 加载成功，您可以通过谷歌搜索带有“phpinfo imagick”的图像，您会发现 phpinfo-section 的外观截图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:51:40.827

下载使用 Visual C++ 9 为 PHP5.3 编译的 ImageMagick - 您将需要 TS（线程安全版本）。这是另一个可能为您提供正确二进制文件的站点：

[http://valokuva.org/?page_id=50](http://valokuva.org/?page_id=50)

# sql-server - Unexpected string concatenation result

> ID：15810748
> 
> 赞同：0
> 
> 时间：2013-04-04T12:10:58.190
> 
> 标签：sql-server, sql-server-2008, tsql

Imagine the following schema:

```
create table tempdb..t1 (id int, name sysname); 
create table tempdb..t2 (id int, name sysname); 
create index IX1 on tempdb..t1 (id); 
create index IX2 on tempdb..t2 (id); 
```

Now I'm trying to script index definition:

```
declare @stmt nvarchar(max) = '';
select @stmt += 'create index ' + ix.name + ' on ' + t.name 
    + isnull(' where ' + ix.filter_definition, '') + char(13)
    from tempdb.sys.tables t
    join tempdb.sys.indexes ix on t.object_id = ix.object_id
    where ix.type > 0 and t.name in ('t1','t2')
    order by ix.name;
print @stmt; 
```

I'm expecting to get two index definitions:

```
create index IX1 on t1
create index IX2 on t2 
```

but get only second. If I remove `order by` or `isnull` part, or add `top` statement, I get both definitions.

Am I missing something obvious?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:49:18.813

我很惊讶这种行为是设计使然。

总结来自 Martin 链接的信息：**不要**像这样进行连接。即使没有 . 也不能保证工作`order by`。要获得保证有效的结果，请使用`for xml`.

```
declare @stmt nvarchar(max) = '';
select @stmt = (select  
    'create index ' + ix.name + ' on ' + t.name 
    + isnull(' where ' + ix.filter_definition, '') + char(10)
    from tempdb.sys.tables t
    join tempdb.sys.indexes ix on t.object_id = ix.object_id
    where ix.type > 0 and t.name in ('t1','t2')
    order by ix.name
    for xml path(''));
print @stmt; 
```

其他选项是使用游标或 SQLCLR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:43:12.847

当您使用 select 将值放入标量变量时，只会将一行放入变量中。它不会将您的两行（或无论您的结果集有多大）聚合为一行。

想象一下，您有一个整数变量，您尝试为其分配 700 个不同的值，但这是行不通的。尝试将两个字符串分配给同一个变量也是如此。相反，只会使用其中一个值。

```
declare @i int;

SELECT @i = t.value
FROM myTable AS t
WHERE t.value between 1 and 700

SELECT @i 
```

创建伪字符串连接聚合函数的一个好方法是将 XML 功能与 FOR XML PATH 一起使用。看看这个问题：[如何将 T-SQL 中的结果连接到列中？](https://stackoverflow.com/questions/7284671/how-to-concatenate-results-in-t-sql-into-column)

# c++ - 在 Mac 上处理来自控制台应用程序的 Apple 事件

> ID：15810750
> 
> 赞同：0
> 
> 时间：2013-04-04T12:11:00.730
> 
> 标签：c++, macos, cocoa, appleevents

请给我一些关于如何工作的提示，更实际的是，从 Mac 上用 C++ 编写的原始控制台应用程序处理 Apple 事件。我知道 Cocoa 中有用于此目的的巨大基础设施，但我认为这只是一个包装器。可能是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:20:00.083

它有 C API：

[http://developer.apple.com/legacy/mac/library/#documentation/Carbon/Reference/Open_Scripti_Architecture/Reference/reference.html](http://developer.apple.com/legacy/mac/library/#documentation/Carbon/Reference/Open_Scripti_Architecture/Reference/reference.html)

和

[http://developer.apple.com/legacy/mac/library/#documentation/Carbon/Reference/Apple_Event_Manager/Reference/reference.html](http://developer.apple.com/legacy/mac/library/#documentation/Carbon/Reference/Apple_Event_Manager/Reference/reference.html)

概述：

[http://developer.apple.com/legacy/mac/library/#documentation/AppleScript/Conceptual/AppleEvents/intro_aepg/intro_aepg.html](http://developer.apple.com/legacy/mac/library/#documentation/AppleScript/Conceptual/AppleEvents/intro_aepg/intro_aepg.html)

但是正如你所看到的，Apple 现在认为这是遗留问题，所以对于一个新项目，使用 Objective-C API 可能是更好的选择。

# javascript - 我可以避免 ng-repeat 循环中的对象变量名吗？

> ID：15810755
> 
> 赞同：6
> 
> 时间：2013-04-04T12:11:12.890
> 
> 标签：javascript, angularjs, angularjs-scope, angularjs-ng-repeat

当定义一个 ng-repeat 指令来迭代一个数组时，语法指定`ng-repeat="friend in friends"`，然后在模板中使用 interoplation 运算符，如下所示`{{friend.name}}`。

是否可以将属性分配给当前项目范围，而不是其中的变量？所以我可以打电话`{{name}}`而不是`{{friend.name}}`?

原因是我的指令在两个不同模板的范围内使用 - 例如，我可能有一个指令`"userActions"`既用于转发器，也用于不相关的模板，`{{friend.name}}` 但没有意义。我想避免人为地制造`friend`没有语义的对象。

* * *

**我的用例是这样的：**

我有一个渲染各种类型块的网格。一些伪代码：

```
<div ng-repeat="block in blocks">
   < cat block />

   < friend block >
         <userActions directive />
   </ friend block >

   < guitar block />

   .... more blocks
</div> 
```

我还有一个朋友页面，其中包含完全相同的用户操作：

```
..fragment of friend page..
  <element ng-control="friend">
     <userActions directive />
  </element> 
```

现在，如果我想使用中继器内块的属性，语法是`{{block.name}}`. 所以模板`userActions`包含这个。

*但是，一旦我在朋友*页面中使用了这个模板，我必须`{{block.name}}`在朋友控制器的范围内创建。但这没有意义，因为块仅存在于块网格的上下文中。我不应该创建这个`block`。

我想要做的只是`{{name}}`从`userActions`指令模板中调用，因为块范围和控制器都包含它。我不想创建一个对象，然后在我想使用该指令的每个范围内`block`人为地设置。`block.name``userActions`

**这是一个[jsFiddle 来说明原因](http://jsfiddle.net/opherv/b7KEm/)**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T19:40:44.680

我决定将[Mathew Berg](https://stackoverflow.com/users/973651/mathew-berg)和[ganaraj](https://stackoverflow.com/questions/15810755/can-i-avoid-the-object-variable-name-in-ng-repeat-loop#comment22494624_15810755)提供的信息丰富的答案与我新发现的知识相结合，以创建一个有用的答案。

简短的回答是**你真的不想那样做**。

* * *

更长的答案是这样的：

使用`ng-repeat="block in blocks`" 时，会为每个块元素创建一个新作用域，并在每个块中创建每个块对象的属性`scope.block`。这是一件好事，因为这意味着可以通过引用、更新或 $watched 访问所有属性。

如果`ng-repeat`不这样做，并且所有属性都将被拍打到块的范围内，那么`block`（字符串、整数等）中的所有原语将只是从块对象复制到块范围对象。一个变化不会影响另一个，这很糟糕。[更多信息在这里。](https://github.com/angular/angular.js/wiki/The-Nuances-of-Scope-Prototypal-Inheritance#wiki-ngRepeat)

好的，既然我们已经确定这是一件好事而不是一件坏事，我们如何克服语义问题？我决定使用`friendData`对象容器作为指令范围内的对象，因此指令期望`friend-data`属性包含相关属性

```
angular.module('myApp',[])
.directive("lookActions", function(){
    return {              
        restrict: 'E',        
        template: "<input value='Kill -{{ friendData.name }}-' type='button'>",
        scope : {
            friendData : '='            
        }
    }
}); 
```

这样，无论我调用指令模板的上下文是什么，我都可以分配这个对象。

给定这些控制器上下文：

```
function gridCtrl($scope) {    
    $scope.blocks = [{ type: "cat", name: "mitzi"},{ type: "friend", name: "dave"},{ type: "guitar", name: "parker"}];
}

function friendCtrl($scope) {    
    $scope.data={
        name: "dave"
    }
} 
```

如何调用指令 -

内`ng-repeat`：

```
 <div class="block" ng-repeat="block in blocks" >            
        <look-actions friend-data="block" />
    </div> 
```

或者在不同的上下文中：

```
 <div ng-controller="friendCtrl">  
         <look-actions friend-data="data" />
     </div> 
```

这是[解决方案小提琴](http://jsfiddle.net/opherv/pJ6Y9/)

感谢所有的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:20:19.940

这完全取决于您如何构建指令。如果没有小提琴/plunkr，很难说出你的代码是什么样的，所以我在这里暗中尝试。现在我认为你想说的是，在你使用指令friend.name的上下文中没有意义。也许像 person.name 这样更通用的东西可能更合适。在这种情况下，您可以执行以下操作，以便将您希望与该人关联的内容传递给指令：

**html**

```
<div data-ng-repeat="friend in friends">
    {{ friend.name }}
    <div class="myDirective" data-person="friend"></div>
</div> 
```

**javascript**

```
.directive("myDirective", function(){
    return {
        restrict: 'C',
        scope: {
            person: "=person"
        },
        template: "<div>{{ person.name }}</div>"

    }
}); 
```

**jsfiddle**：http: [//jsfiddle.net/5aVLf/1/](http://jsfiddle.net/5aVLf/1/)

# c# - Trying to get information from my listbox to display in text boxes

> ID：15810757
> 
> 赞同：0
> 
> 时间：2013-04-04T12:11:19.107
> 
> 标签：c#

I've got an application I'm building that inputs data into a list, using input textboxes on one tab (say Tab 1). When you hit the command button it adds the data (Book number, author, title, genre, # of pages and Publisher) to a list (books).

It then displays the title of the book in a listbox on tab 2\. When you click the item in the listbox on tab 2, I want it to redisplay all the information you just input on tab 1, into textboxes on tab 2\. But I can't get information to show up.

Below is my code, including the class I created for the project.

```
class Book
{
    //attributes
    private string callNumber;
    private string bookTitle;
    private string authorName;
    private string genre;
    private int numberOfPages;
    private string publisher;

    //constructor
    public Book()
    { 
    }
    //accessor
    public void SetNumber(string aNumber)
    {
        callNumber = aNumber;
    }
    public void SetTitle(string aTitle)
    {
        bookTitle = aTitle;
    }
    public void SetAuthor(String aName)
    {
        authorName = aName;
    }
    public void SetGenre(String aGenre)
    {
        genre = aGenre;
    }
    public void SetPages(int aPageNumber)
    {
        numberOfPages = aPageNumber;
    }
    public void SetPublisher(String aPublisher)
    {
        publisher = aPublisher;
    }
    public string GetNumber()
    {
        return callNumber;
    }
    public string GetTitle()
    {
        return bookTitle;
    }
    public string GetAuthor()
    {
        return authorName;
    }
    public string GetGenre()
    {
        return genre;
    }
    public int GetPages()
    {
        return numberOfPages;
    }
    public string GetPublisher()
    {
        return publisher;
    }
}

public partial class Form1 : Form
{

    List<Book> books;

    public Form1()
    {
        InitializeComponent();

        this.books = new List<Book>();
    }

    private void btnAdd_Click(object sender, EventArgs e)
    {
        Book aBook = new Book();
        aBook.SetNumber(txtCallNumber.Text);
        aBook.SetAuthor(txtAuthorName.Text);
        aBook.SetTitle(txtBookTitle.Text);
        aBook.SetGenre(txtGenre.Text);
        aBook.SetPages(int.Parse(txtNumberOfPages.Text));
        aBook.SetPublisher(txtPublisher.Text);

        foreach (Control ctrl in this.Controls)
        {
            if (ctrl is TextBox)
            {
                ((TextBox)ctrl).Clear();
            }
            txtCallNumber.Focus();

            txtAuthorName.Clear();
            txtBookTitle.Clear();
            txtCallNumber.Clear();
            txtGenre.Clear();
            txtNumberOfPages.Clear();
            txtPublisher.Clear();

            lstLibrary.Items.Add(aBook.GetTitle());

        }
    }

    private void lstLibrary_SelectedIndexChanged(object sender, EventArgs e)
    {

        int index = 0;
        foreach (Book book in books)
        {

            string tempTitle;
            tempTitle = book.GetTitle();
            if (tempTitle == (string)lstLibrary.SelectedItem)
                break;

            else
            {
                index++;
            }

        txtNumberRecall.Text = books[index].GetNumber();
        txtTitleRecall.Text = books[index].GetTitle();
        txtAuthorRecall.Text = books[index].GetAuthor();
        txtGenreRecall.Text = books[index].GetGenre();
        txtPagesRecall.Text = Convert.ToString(books[index].GetPages());
        txtPublisherRecall.Text = books[index].GetPublisher();
        break;
            }
        }
    }
} 
```

Once again, I'm trying to get the information from the listbox (in the click event) to show up in the textboxes.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:32:54.790

In the btnAdd_Click method, you are never saving the new aBook that you created. You need to add it to you books collection. Adding the title as an entry in lstLibrary.Items does not actually save the newly created object.

Also, you should review your looping structures. In btnAdd_Click() it looks like you will add it to lstLibrary once for each control that exists on your form. In lstLibrary_SelectedIndexChanged(), if you had actually added books to the collection in btnAdd_Click(), you would update the textboxes for the first book in the collection that does **not** match the selected book.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:28:00.677

这样的事情会起作用吗？

```
private void button1_Click(object sender, EventArgs e)
    {
        int i = 0;
        foreach (string s in listBox1.Items)
        {
            i++;
            if (i == 1)
            {
                textBox1.Text = s;
            }
            if (i == 2)
            {
                textBox2.Text = s;
            }
            if (i == 3)
            {
                textBox3.Text = s;
            }
        }
    } 
```

# python - how can I plot a histogram using random.expovariate() PYTHON

> ID：15810764
> 
> 赞同：0
> 
> 时间：2013-04-04T12:11:29.637
> 
> 标签：python, random, statistics

I have a question where it shows customers entering a bar at a rate of 7 per hour, the question states i NEED to use random.expovariate() and generate a histogram showing 100 inter-arrival times. So far i have this

```
import numpy as np
from matplotlib import pyplot as plt
import random

def customers():    
    x=np.random.expovariate(7,100)                                                                                                                                
    plt.hist(x,100)
    plt.axis([-0,100,0,100])
    plt.show()
    return True

def main():
    global history
    print(customers()) 

if __name__ == "__main__":
    main() 
```

And I am getting the error

```
AttributeError: 'module' object has no attribute 'expovariate' 
```

Also i am not 100% this is how i would show the graph, i have researched it and not found a clear answer anywhere! Hope you can help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:30:57.160

这里有一些让你开始的东西：

```
import numpy as np
from matplotlib import pyplot as plt
import random

def customers():
    x = [random.expovariate(7) for r in xrange(100)]                   
    plt.hist(x,10)
    plt.show()
    return True

def main():
    global history
    print(customers()) 

if __name__ == "__main__":
    main() 
```

你的主要问题是：

1.  你打电话`np.random.expovariate()`而不是`random.expovariate()`

2.  `random.expovariate()`接受 1 个参数而不是 2 个

3.  `random.expovariate()`只产生一个数字，要创建一个直方图，您需要多个数字。在上面我创建了一个显式随机数列表。

# .net - connecting to LDAP server

> ID：15810767
> 
> 赞同：2
> 
> 时间：2013-04-04T12:11:37.297
> 
> 标签：.net, ldap, openldap, ldapconnection, unboundid-ldap-sdk

I am a beginner with Ldap Server. I am trying to establish connection with my server using LDAP Wizard but dont know the values of the various parameters. could any body suggest the values? I am writing the code which is used to connect to the same server.

From App.Config:

```
<add key="ActiveDirectoryMainOU" value="Users" />
<add key="ActiveDirectoryDomain" value="intranet" />
<add key="ActiveDirectoryServer" value="intranet.city.com" />
<add key="ServiceAccountUserID" value="superUser" />
<add key="ServiceAccountPassword" value="P0R+@asq" /> 
```

From .vb file

...............

```
strDomain = ConfigurationSettings.AppSettings.Get("ActiveDirectoryDomain")
strDomainControllerLoadBalanced = ConfigurationSettings.AppSettings.Get("ActiveDirectoryServer")
strOUForAccounts = ConfigurationSettings.AppSettings.Get("ActiveDirectoryMainOU")
strServiceAccountUserID = ConfigurationSettings.AppSettings.Get("ServiceAccountUserID")
strServiceAccountPassword = ConfigurationSettings.AppSettings.Get("ServiceAccountPassword")
Try
    searchRoot = New DirectoryEntry(String.Format("LDAP://{0}/OU=" & strOUForAccounts & ",DC=" & strDomain & ",DC=city,DC=com", strDomainControllerLoadBalanced),             strServiceAccountUserID, strServiceAccountPassword, AuthenticationTypes.Secure Or AuthenticationTypes.Sealing Or AuthenticationTypes.ServerBind)
        searcher = New DirectorySearcher(searchRoot)
    searcher.SearchScope = SearchScope.Subtree
    searcher.PageSize = 1000
    searcher.CacheResults = False
    For i = 0 To arPropertiesToLoad.Length - 1
        searcher.PropertiesToLoad.Add(arPropertiesToLoad(i))
    Next
        searcher.Filter = "(&(objectCategory=user)(objectClass=person))" 'get all users
        results = searcher.FindAll()
        For Each result In results
         strObjectGUID = New Guid
             strValues(69) = New String("") 
```

...............

Please suggest in completeing step 3 of profile creation wizard or in completing below fields:

Authentication method(Annonymous, Currently logged on, external(SSL certificate),other)

Mechanism, Principal, Password

also if possible please help in completing next step as well. I am not able to add screenshot because of less reputation.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:06:38.987

我认为您是 .VB 文件，其中包含以下行：

`searchRoot = New DirectoryEntry(String.Format("LDAP://{0}/OU=" & strOUForAccounts & ",DC=" & strDomain & ",DC=hilton,DC=com", strDomainControllerLoadBalanced), strServiceAccountUserID, strServiceAccountPassword, AuthenticationTypes.Secure Or AuthenticationTypes.Sealing Or AuthenticationTypes.ServerBind)`

我想你有一些发行。在其中，您正在使用此部分构建一个 URL： `"LDAP://{0}/OU=" & strOUForAccounts & ",DC=" & strDomain & ",DC=hilton,DC=com"`

所以首先，最后一点，`,DC=hilton,DC=com`显然不是您的域信息。并且可能应该以某种方式存储在配置文件中。就像在您的 .App 文件中一样，但格式正确。您可以看到他们尝试使用 DC=strDomain 值，但当然，希尔顿的东西显然是不正确的。（除非它真的是？）。

希望这`{0}`部分有效，但不确定传递给它的是什么。

# c# - “An item with the same key has already been added” in dictionary

> ID：15810771
> 
> 赞同：2
> 
> 时间：2013-04-04T12:11:48.187
> 
> 标签：c#, dictionary, synchronization

I am trying to add some elements to a dictionary in C# but I've been running into some problems. I am new to C# development so I hope someone could help me with this.

The code for adding the element is:

```
if (!connections.ContainsKey(port.getParentName()))
{
    connections.Add(port.getParentName(), port.getLabel() + ";" + cable + ";" + cableTemplate + "|");
}
else
{
    connections[port.getParentName()] += port.getLabel() + ";" + cable + ";" + cableTemplate + "|";
} 
```

Although I'm checking if the key is allready contained in my ports dictionary I'm getting:

```
“An item with the same key has already been added” 
```

Have to mention also that I am getting the data asynchronously so I would guess that this is a synchronization issue. I tried to handle this by locking this block of code but this does not seem to solve the problem:

```
System.Object lockThis = new System.Object();
lock (lockThis)
{
    ....
} 
```

Also have to mention that I am not getting this error all the time. Just that occasionally when starting the application. Any idea what could be causing this? Is the way I'm making the synchronization wrong or is it something else?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:13:47.763

1.  你的锁无效。您需要有*一个*实例来锁定。您目前每次都创建一个新的。
2.  改用 a`ConcurrentDictionary<TKey, TValue>`并使用[`AddOrUpdate`](http://msdn.microsoft.com/en-us/library/ee378664.aspx). 这完全消除了对锁的需要：

    ```
    var value = port.getLabel() + ";" + cable + ";" + cableTemplate + "|";
    connections.AddOrUpdate(port.getParentName(), value, (k, v) => v + value); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:14:45.963

在类的范围内移动你的同步对象：

```
public class Test
{    
    private object syncRoot = new object();

    private void Foo()
    {
        lock (this.syncRoot)
        {
            ....
        }
    }
} 
```

是否将其设为静态，取决于您如何使用您的课程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T12:15:36.333

[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)可以为您处理同步问题。

# xslt - 俄罗斯娃娃到百叶窗xsl改造

> ID：15810773
> 
> 赞同：3
> 
> 时间：2013-04-04T12:11:56.130
> 
> 标签：xslt, xsd

我一直在尝试编写一个 xslt 转换来将“俄罗斯娃娃”风格的 xsd 转换为“百叶窗”风格。

我写了一些东西，但这并不完全符合我的预期。所以我有以下xsd文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="GX" targetNamespace="GX" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:complexType name="topType">
        <xs:sequence>
            <xs:element name="REQUESTOR" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
            <xs:element name="RETURN_CANCELLED_CUSTOMERS" nillable="false" minOccurs="0" maxOccurs="1">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="EXTERNAL_CUSTOMER_ID" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
                        <xs:element name="ON_BEHALF_OF" type="xs:string" nillable="false" minOccurs="1" maxOccurs="1"/>
                        <xs:element name="MSISDN_aaa" nillable="false" minOccurs="0" maxOccurs="1">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="GSP_ID" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
                                    <xs:element name="MSISDN_bbb" nillable="false" minOccurs="0" maxOccurs="1">
                                        <xs:complexType>
                                            <xs:sequence>
                                                <xs:element name="SSPP_ID" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
                                                <xs:element name="MSISDN_ccc" nillable="false" minOccurs="0" maxOccurs="1">
                                                    <xs:complexType>
                                                        <xs:sequence>
                                                            <xs:element name="SSPC_ID" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
                                                            <xs:element name="MSISDN_ddd" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
                                                            <xs:element name="IMSI" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
                                                            <xs:element name="MSISDN" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
                                                        </xs:sequence>
                                                    </xs:complexType>
                                                </xs:element>
                                            </xs:sequence>
                                        </xs:complexType>
                                    </xs:element>
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

我尝试将其转换为：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="GX" targetNamespace="GX" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:complexType name="topType">
        <xs:sequence>
            <xs:element name="REQUESTOR" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
            <xs:element name="RETURN_CANCELLED_CUSTOMERS" type="tns:RETURN_CANCELLED_CUSTOMERSType" nillable="false" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="RETURN_CANCELLED_CUSTOMERSType">
        <xs:sequence>
            <xs:element name="EXTERNAL_CUSTOMER_ID" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
            <xs:element name="ON_BEHALF_OF" type="xs:string" nillable="false" minOccurs="1" maxOccurs="1"/>
            <xs:element name="MSISDN_aaa" type="tns:MSISDN_aaaType" nillable="false" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="MSISDN_aaaType">
        <xs:sequence>
            <xs:element name="GSP_ID" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
            <xs:element name="MSISDN_bbb" type="tns:MSISDN_bbbType" nillable="false" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="MSISDN_bbbType">
        <xs:sequence>
            <xs:element name="SSPP_ID" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
            <xs:element name="MSISDN_ccc" type="tns:MSISDN_cccType" nillable="false" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="MSISDN_cccType">
        <xs:sequence>
            <xs:element name="SSPC_ID" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
            <xs:element name="MSISDN_ddd" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
            <xs:element name="IMSI" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
            <xs:element name="MSISDN" type="xs:string" nillable="false" minOccurs="0" maxOccurs="1"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

我正在编写的 XSLT 正在进行大量工作，我正在苦苦挣扎……有没有人做过类似的事情并且可以提供一条建议？基本上我被卡住了。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:exsl="http://exslt.org/common" exclude-result-prefixes='exsl'>
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="/">
        <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="GX" targetNamespace="GX" elementFormDefault="qualified" attributeFormDefault="unqualified">
            <!-- processing starts here from the root element -->
            <xsl:apply-templates/>
        </xs:schema>
    </xsl:template>
    <xsl:template match="xs:complexType[not(@name)]">
        <xs:complexType name="{../@name}Type">
            <xs:sequence>
                <xsl:apply-templates/>
                <xs:element>current:<xsl:value-of select="./@name"/> parent: <xsl:value-of select="../@name"/>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
        <xs:element>no name = parent: <xsl:value-of select="../@name"/>
        </xs:element>
    </xsl:template>
    <!--find the most nested complex type i.e. there are no more child complext types-->
    <xsl:template match="xs:complexType[not(xs:sequence/xs:element/xs:complexType)]">
        <xs:complexType name="{../@name}Type">
            <xsl:copy-of select="child::node()"/>
            <xs:element>current:<xsl:value-of select="./@name"/> parent: <xsl:value-of select="../@name"/>NO MORE NESTING!!!!!!!!!!!!!</xs:element>
        </xs:complexType>
    </xsl:template>
    <xsl:template match="xs:element">
        <xsl:copy>
            <xsl:apply-templates select="attribute()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="attribute()">
        <xsl:copy/>
    </xsl:template>
    <xsl:template match="xs:element[xs:complexType]">
        <xs:element name="{@name}" type="{@name}Type" nillable="{@nillable}" minOccurs="{@minOccurs}" maxOccurs="{@maxOccurs}"/>
        <xsl:apply-templates/>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:46:21.697

您可以在根模板中开始，只需选择 xsd 中的所有复杂类型

```
<xsl:apply-templates select="//xs:complexType" /> 
```

然后，您将拥有一个模板来匹配没有名称的复杂类型，因此您可以简单地根据其父元素使用名称输出它们。

```
<xsl:template match="xs:complexType[not(@name)]">
    <xs:complexType name="{../@name}Type">
        <xsl:apply-templates/>
    </xs:complexType>
</xsl:template> 
```

最后，您将有一个模板来匹配具有复杂类型的元素，并添加一个类型属性

```
<xsl:template match="xs:element[xs:complexType]">
    <xs:element type="{@name}Type">
        <xsl:apply-templates select="@*" />
    </xs:element>
</xsl:template> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:exsl="http://exslt.org/common" exclude-result-prefixes='exsl'>
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="/">
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="GX" targetNamespace="GX" elementFormDefault="qualified" attributeFormDefault="unqualified">
      <!-- processing starts here from the root element -->
      <xsl:apply-templates select="//xs:complexType" />
    </xs:schema>
  </xsl:template>

  <xsl:template match="xs:complexType[not(@name)]">
    <xs:complexType name="{../@name}Type">
      <xsl:apply-templates/>
    </xs:complexType>
  </xsl:template>

  <xsl:template match="xs:element[xs:complexType]">
    <xs:element type="{@name}Type">
      <xsl:apply-templates select="@*" />
    </xs:element>
  </xsl:template>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XSD XML 时，将输出以下内容

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:tns="GX"
           targetNamespace="GX"
           elementFormDefault="qualified"
           attributeFormDefault="unqualified">
  <xs:complexType name="topType">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="REQUESTOR" nillable="false" type="xs:string"/>
      <xs:element type="RETURN_CANCELLED_CUSTOMERSType" maxOccurs="1" minOccurs="0" name="RETURN_CANCELLED_CUSTOMERS" nillable="false"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="RETURN_CANCELLED_CUSTOMERSType">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="EXTERNAL_CUSTOMER_ID" nillable="false" type="xs:string"/>
      <xs:element maxOccurs="1" minOccurs="1" name="ON_BEHALF_OF" nillable="false" type="xs:string"/>
      <xs:element type="MSISDN_aaaType" maxOccurs="1" minOccurs="0" name="MSISDN_aaa" nillable="false"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="MSISDN_aaaType">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="GSP_ID" nillable="false" type="xs:string"/>
      <xs:element type="MSISDN_bbbType" maxOccurs="1" minOccurs="0" name="MSISDN_bbb" nillable="false"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="MSISDN_bbbType">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="SSPP_ID" nillable="false" type="xs:string"/>
      <xs:element type="MSISDN_cccType" maxOccurs="1" minOccurs="0" name="MSISDN_ccc" nillable="false"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="MSISDN_cccType">
    <xs:sequence>
      <xs:element maxOccurs="1" minOccurs="0" name="SSPC_ID" nillable="false" type="xs:string"/>
      <xs:element maxOccurs="1" minOccurs="0" name="MSISDN_ddd" nillable="false" type="xs:string"/>
      <xs:element maxOccurs="1" minOccurs="0" name="IMSI" nillable="false" type="xs:string"/>
      <xs:element maxOccurs="1" minOccurs="0" name="MSISDN" nillable="false" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

# .net - How to detect an incoming USB device in windows Service on Windows XP machine?

> ID：15810777
> 
> 赞同：1
> 
> 时间：2013-04-04T12:12:04.983
> 
> 标签：.net, c#-4.0, windows-services, windows-xp

I an trying to write a simple Windows Service that shall detect any incoming USB device and Launch a GUI application.

```
 WqlEventQuery query = new WqlEventQuery("SELECT * FROM Win32_VolumeChangeEvent WHERE EventType = 2");
            watcher.EventArrived += watcher_EventArrived;
            watcher.Query = query;
            watcher.Start();
            watcher.WaitForNextEvent(); 
```

This solution works well in Win 7 However, it fails in XP (I have XP SP3).

I found another solution here

[http://www.codeproject.com/Articles/63878/Enumerate-and-Auto-Detect-USB-Drives](http://www.codeproject.com/Articles/63878/Enumerate-and-Auto-Detect-USB-Drives)

This works very well in windows forms application even on windows XP, However it fails when I put it in service even on Win 7

Can you please help?

**EDIT 1:** Presently there is no solution that works on win XP when we put the code in windows service.

Kind Regards

Bharat

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:23:51.477

您可以简单地使用这两种解决方案，然后根据您使用的 Windows 版本使用适当的解决方案。

使用该`System.Environment.OSVersion`属性告诉您您使用的是哪个版本的 Windows，然后如果它早于 Windows 7，则执行 CodeProject 解决方案，如果它是 Windows 7 或更高版本，则执行其他解决方案。

[您可以在此处](http://support.microsoft.com/kb/304283)阅读有关`System.Environment.OSVersion`酒店回复您的信息的更多信息。

# actionscript-3 - 在 flex 中为图像添加对比度和亮度

> ID：15810785
> 
> 赞同：0
> 
> 时间：2013-04-04T12:12:27.090
> 
> 标签：actionscript-3, apache-flex, flash-builder

如何在 flex 中实现图像的亮度和对比度变化

我需要开发一种工具来增加亮度或对比度并降低它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:17:12.883

您可以`flash.geom.ColorTransform`对图像使用，至少用于预览。如果您需要更改图像的像素，我会说使用 Pixel Bender 着色器来满足您的需要。但是请注意，如果您希望更改该着色器的参数，您将需要一个备份副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:47:51.960

使用 ColorMatrixFilter 并将下面的矩阵分配给它的矩阵属性

```
var contrastAdj:ColorMatrixFilter = ColorMatrixFilter(filters.getItemAt(0));
        contrastAdj.matrix = getContrastMatrix(value);

    private static function getContrastMatrix(value:Number):Array
    {

    value /= 100;
    var s: Number = value + 1;
    var o : Number = 128 * (1 - s);
    var m:Array = new Array();
    m = m.concat([s, 0, 0, 0, o]);  // red
    m = m.concat([0, s, 0, 0, o]);  // green
    m = m.concat([0, 0, s, 0, o]);  // blue
    m = m.concat([0, 0, 0, 1, 0]);  // alpha

    return m;
} 
```

对于亮度矩阵使用此功能

```
private static function getBrightnessMatrix(value:Number):Array
{
                var m:Array = new Array();
                m = m.concat([1, 0, 0, 0, value]);  // red
                m = m.concat([0, 1, 0, 0, value]);  // green
                m = m.concat([0, 0, 1, 0, value]);  // blue
                m = m.concat([0, 0, 0, 1, 0]);      // alpha
                return m;
        } 
```

将 -100 到 100 之间的值传递给函数。

# java - 泽西 REST 资源上的 ClientAbortException

> ID：15810788
> 
> 赞同：0
> 
> 时间：2013-04-04T12:12:40.163
> 
> 标签：java, rest, jersey

我向我的 REST 资源 (Jersey) 添加了一个新方法。当我尝试测试它时，我失败了：

```
ClientAbortException:  java.io.IOException: An established connection was aborted by the software in your host machine. 
```

当我调试它时，我可以看到我的代码在某处失败后到达了 return 语句。
顺便说一句，我还有许多其他方法都可以正常工作，都返回 JSON 对象。

当我尝试从 Jersey 客户端或仅从 Web 浏览器调用新方法时，就会发生这种情况。

我的代码：

```
@GET
@Path("/metrics/samples")
@Produces(MediaType.APPLICATION_JSON)
public MetricSamples getFragmentMetricsSamples(@DefaultValue ("-1") @QueryParam ("from")long from, @DefaultValue ("-1") @QueryParam)
{
   //Calling DAO code. Everything is OK here. 
   //I can even see in debug that that return statement is executed successfully.
   return metricSamplesDataObject;
} 
```

什么会导致连接中止？

**编辑**
我刚回家，似乎这个问题只在办公室工作时才相关。
因此，问题在于这种特定方法仅导致 ClientAbortExcpetion 起作用。
会不会和网络安全有关？也许是因为数据量大？

谢谢

# ruby - 有没有办法从字符串形式的结构创建 Ruby 结构？

> ID：15810789
> 
> 赞同：3
> 
> 时间：2013-04-04T12:12:40.233
> 
> 标签：ruby, string, struct

我必须知道，如果我要从 struct （使用 .to_s）制作字符串，有什么办法可以让它返回 struct 吗？我想知道是否有一些帮助类或其他东西。

我的使用案例是在结构中保存或信息，然后通过互联网发送它并在另一端从它构建一个结构。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:56:29.897

要清除上面@Semyon 给出的其他选项：

*   **YAML**
    可移植，但在其使用方面是特定于 Ruby 的。支持以只有 Ruby 才能真正理解的特殊方式序列化任何 Ruby 对象。如果您希望在 Ruby 之间而不是语言之间具有可移植性，那么 YAML 是要走的路：

    ```
    require 'yaml'
    obj = [1,2,3]
    YAML.dump(obj) #=> Something like "---\n- 1\n- 2\n- 3\n"
    YAML.load(YAML.dump(o)) #=> [1,2,3] 
    ```

*   **JSON**
    JSON 是此类事物最广泛认可和可移植的数据标准。可在 Ruby、语言和系统之间移植。

    ```
    require 'json'
    obj = [1,2,3]
    obj.to_json #=> "[1,2,3]"
    JSON.load("[1,2,3]") #=> [1,2,3] 
    ```

与 不同`Marshal`，两者都是人类可读的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:42:01.153

您从中获得的字符串`struct.to_s`仅用于检查。要传输您的结构，您需要在一侧对其进行序列化并从另一侧对其进行反序列化。有多种格式，包括 JSON、YAML 和 Marshal。最后一个产生非人类可读的字节流，但它是最容易使用的：

```
Person = Struct.new(:first_name, :last_name)
me = Person.new("Semyon", "Perepelitsa")
p data = Marshal.dump(me)
"\x04\bS:\vPerson\a:\x0Ffirst_nameI\"\vSemyon\x06:\x06ET:\x0Elast_nameI\"\x10Perepelitsa\x06;\aT"

# on the other side
p Marshal.load(data)
#<struct Person first_name="Semyon", last_name="Perepelitsa"> 
```

# firefox-addon - firefox addon-sdk : 处理 http 请求超时

> ID：15810790
> 
> 赞同：4
> 
> 时间：2013-04-04T12:12:43.603
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在使用插件 sdk 构建一个 Firefox 插件。我需要向某个页面发出 http 请求，我想处理连接超时，但在 api 中找不到任何内容：[https ://addons.mozilla.org/en-US/developers/docs/sdk/latest /modules/sdk/request.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/request.html)

我实际上正在寻找的是一个回调，以防客户端无法连接到服务器。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T22:24:23.447

`onComplete`当请求被认为对网络完成时，SDK 请求将始终调用。这意味着`onComplete`在任何情况下都会调用它，而不管请求是返回错误还是成功。

为了检测您遇到了哪个错误，您需要检查 Response 对象（传递给`onComplete`函数的对象）的[属性“status”](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/request.html#status)（`response.status`）。它保存请求的状态代码。要查找状态代码，请考虑[Mozilla 开发者网络上的列表](https://developer.mozilla.org/en-US/docs/HTTP/HTTP_response_codes)。如果响应状态为 0，则请求完全失败，用户可能处于离线状态，或者无法到达目标。

超时可能是状态码 504 或 0。实现类似于：

```
var Request = require("sdk/request");

Request({
  url: "http://foo.bar/request.target",
  onComplete: function(response) {
    if(response.status==0||response.status==504) {
      // do connection timeout handling
    }
    // probably check for other status codes
    else {
      // assume the request went well
    }
  }
}).get(); 
```

我个人在请求对象上使用了一个验证函数，它返回一个数字，这取决于我是否得到了正确的响应、来自 Web 服务器的错误或连接问题（4xx 和 0 状态代码）。

# paypal - 允许最终用户修改定期贝宝订阅金额

> ID：15810792
> 
> 赞同：2
> 
> 时间：2013-04-04T12:12:44.623
> 
> 标签：paypal, paypal-subscriptions, recurring-billing, recurring

我在这里阅读了一些关于修改经常性费用金额的回复，但仍然感到困惑。

我们每月有 5 个订阅级别： £10 £15 £20 £30 £50

我们希望能够让客户将他们的订阅包更改为任何其他选项。

听起来，如果他们更改为与他们所使用的套餐相差超过 20% 的套餐 - 我们将不得不让他们取消并开始新的订阅。

肯定有办法让订户确认他们愿意更改金额吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:39:07.177

用户可以修改您的贝宝金额，但有一些限制。

在标准帐户中，您可以使用“修改”html 变量来更改订阅金额，如下所示。

0 - 仅允许订阅者注册新订阅 1 - 允许订阅者注册新订阅并修改其当前订阅 2 - 允许订阅者仅修改其当前订阅 默认值为 0。

以下链接将为您提供更多帮助， [https: //cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_subscribe_buttons#id08ADF500NXK](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_subscribe_buttons#id08ADF500NXK)

您不能经常修改您的金额，您只能在 180 天内将订阅金额增加 20%。

但是如果你转移到 paypal payflow（30 美元/月），paypal 本身提供 API 来与 paypal 服务通信。修改、取消订阅非常灵活。

贝宝标准 - 如果他们没有贝宝登录，用户不能取消他们自己的订阅。paypal payflow - 用户可以取消订阅。

# shell - 亚马逊在unix中的面试问题

> ID：15810793
> 
> 赞同：-4
> 
> 时间：2013-04-04T12:12:44.753
> 
> 标签：shell, unix

1.Count多次出现您的名字在一个文件中..并且您的名字在一行中出现多次。

2.编写正则表达式以从文件中检索“Ravi-10”。并且只打印名称“Ravi-10”（不应打印完整的行）。

3.在日志文件中，您有 yyyy mm dd hh:mi:ss 格式的日期。检索时间在 19:10:00 到 19:20:00 之间的日期

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:30:10.460

如果我回答得当，我希望我能得到这份工作......

1.Count多次出现您的名字在一个文件中..并且您的名字在一行中出现多次。

```
grep -o "your_name" file | wc -w 
```

2.编写正则表达式以从文件中检索“Ravi-10”。并且只打印名称“Ravi-10”（不应打印完整的行）。

```
grep -o "Ravi-10" file 
```

3.在日志文件中，您有 yyyy mm dd hh:mi:ss 格式的日期。检索时间在 19:10:00 到 19:20:00 之间的日期

```
awk '{if (($4 ~ "19:1[0-9]") || ($4 ~ "19:20")) {print}}' your_file 
```

# c++ - 在没有显式嵌套声明的情况下在另一个类的命名空间中声明一个类

> ID：15810796
> 
> 赞同：0
> 
> 时间：2013-04-04T12:12:54.910
> 
> 标签：c++, include, iterator, declaration

我正在实现一个特定类的迭代器，迭代器需要访问`A`成员，也`A`需要访问`iterator`——我希望能够声明`A::iterator it;`

我知道我可以简单地将一个类嵌套在另一个类中，在这种情况下，我会：

```
class A {
public:
    class iterator {
    };
}; 
```

但是类`A`和`iterator`本身都有大量的代码，我想把这些类分成两个不同的文件。

这里的问题是 class`A`自然会`#include iterator.hpp`，但`iterator`也需要 include `A`，以便实现正确的迭代器运算符。这就是我坚持的地方：即使添加了包含警卫，我也无法让它发挥作用。

* * *

这是我所拥有的一个片段：

*a.hpp*：

```
# include iterator.hpp
# ifndef A_HPP
# define A_HPP

template <typename T>
class A {
public:
    typedef iterator<T> iterator;
}; 
```

*迭代器.hpp*：

```
# include a.hpp
# ifndef ITERATOR_HPP
# define ITERATOR_HPP

template <typename T>
class iterator {
public:
    // Constructor
    iterator(A<T> *a) {
    }
}; 
```

课程更大，这就是我没有发布整个代码的原因

* * *

*Obs*：如果不可能执行这种递归包含，但我仍然可以设法将类`iterator`嵌套在 的命名空间中`A`，但在 class 外部声明`A`，这就足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:26:37.967

前向声明消除了大部分这些问题。请注意，您不必在类定义中定义成员函数；当所有类型都已定义后，您可以稍后定义它们。（如果有帮助，请在黑板上写 100 遍：C++ 不是 Java）。

```
class C;

class Iterator {
    // member function declarations
    // member data
};

class C {
    // member function declarations
    // member data
};

// member function definitions go here; there is
// no problem using C inside member
// functions of Iterator and vice versa 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:40:08.933

也许使该类成为迭代器的模板参数。然后迭代器将不需要立即访问该类。

班级：

```
#include "iterator.hpp"
template <typename T>
class A {
public:
  typedef Iterator<A, T> iterator;
}; 
```

迭代器：

```
template <typename C, typename T>
class Iterator {
  Iterator (C* a);
} 
```

# json - 10.6 的 NSJSONSerialization 的替代方案？

> ID：15810799
> 
> 赞同：4
> 
> 时间：2013-04-04T12:13:04.617
> 
> 标签：json, osx-snow-leopard

致力于为我在 MAS 上的 Mac 应用程序添加对 Snow Leopard 的支持，到目前为止，我发现唯一需要替换的是我对 NSJSONSerialization 的依赖。

那么雪豹下有什么好的JSON解析库呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T14:08:16.643

前段时间我遇到了同样的问题，那里有很多解析器，但我最喜欢的（性能方面）是[JSONKit](https://github.com/johnezang/JSONKit)

唯一的缺点是它不兼容 ARC，但是您可以为 JSONKit 源文件禁用 ARC 或将其构建为通用框架，您会在其中一个拉取请求中找到它。

# complexity-theory - 时间复杂度和时间复杂度证明

> ID：15810801
> 
> 赞同：0
> 
> 时间：2013-04-04T12:13:12.073
> 
> 标签：complexity-theory

哪个是真的，哪个是假的？我无法确定哪个是真的，哪个是假的。也许在前 3 种情况下。

> 1.  3n^5 − 16n + 2 ∈ O(n^5)
> 2.  3n^5 − 16n + 2 ∈ O(n)
> 3.  3n^5 − 16n + 2 ∈ O(n^17)
> 4.  3n^5 − 16n + 2 ∈ Ω(n^5)
> 5.  3n^5 − 16n + 2 ∈ Θ(n^5)
> 6.  3n^5 − 16n + 2 ∈ Θ(n)
> 7.  3n^5 − 16n + 2 ∈ Θ(n^17)

以及如何证明这一点：

> 2^(n+1) ∈ O(3^n/n )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:57:56.280

回到定义，f 和 g 有两个正函数：

f∈(g) ⇔ ∃k,n₀∈ℕ ∀n>n₀ f(n) ≤ kg(n)
f∈(g) ⇔ ∃k,n₀∈ℕ ∀n>n₀ kg(n) ≤ f(n)
f∈(g) ⇔ ∃k₁,k₂,n₀∈ℕ ∀n>n₀ k₁.g(n) ≤ f(n) ≤ k₂.g(n)

很容易看出： f∈(g) 和 f∈ (g) 蕴含 f∈(g)

* * *

使用这些定义很容易证明 1、3、5、6 为真，而 2 和 7 为假；那么 1 和 5 为真意味着 4 为真。

* * *

对于 2^(n+1) ∈ O(3^n/n ) ：
当 x→+∞ 时，你能证明 lim 2^(n+1)/ ( 3^n/n ) = 0 吗？
如果是这样，你证明了对于所有 ε>0 存在 δ 使得对于所有 n>δ 我们有 2^(n+1)/(3^n/n)<ε
对于 ε=2，存在 n₀ 使得对于所有 n>n₀ 2^(n+1)<2.3^n/n
你能得出什么结论？

# php - Magento：我在 CMS 页面上有一个可用的“添加到购物车”按钮……我怎样才能使“自定义数量”系统工作？

> ID：15810804
> 
> 赞同：0
> 
> 时间：2013-04-04T12:13:40.637
> 
> 标签：php, javascript, magento

我正在处理此页面（[http://liff2013.com/screenings2](http://liff2013.com/screenings2)），我可以通过以下代码将商品添加到购物车（尽管是 CMS 页面）：

```
<button onclick="setLocation('http://liff2013.com//checkout/cart/add?product=55&qty;=1')" class="addToCart">Purchase Tickets</button> 
```

但我试图弄清楚有人如何添加多张票。现在的下拉菜单实际上不起作用，它只是为了帮助说明它应该如何工作。

有任何想法吗？我在想也许一些 javascript 或 php 能够做到这一点，但不是 100% 肯定。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:50:22.697

将此代码用于 onclick 属性：

```
onclick="setLocation('http://liff2013.com//checkout/cart/add?product=55&qty='+jQuery(this).prev().val())" 
```

我删除了您的硬编码值`qty=1`并编写了`jQuery(this).prev().val()` 此 Javascript 代码，它只是获取按钮之前元素的值。

如果您移动`<select>`or`<button>`元素，它可能不再起作用，因此我建议您使用更好的选择器，例如 id，例如：`jQuery('#quantity-dropdown-1').val()`

# php - VXML 表单，将值传递给 PHP 并返回

> ID：15810805
> 
> 赞同：0
> 
> 时间：2013-04-04T12:13:41.850
> 
> 标签：php, forms, vxml

我有一个非常基本的拨号表单，可以检测 DTMF，然后将其提交给 dial.php

提交表单后，数字被传递，我可以使用`$_GET['digits']`

这很好用。但是，如果我不提交表单，只需使用`<goto next="#dial">`如何检索数字并将它们分配给一个值，以便我可以使用 PHP 进行查找？

此外，如果输入了无效数字，我可以抛出一个事件，然后使用 catch 将其路由回原始表单。但是，当提交该表单时，事件计数会丢失。提交表单时有什么方法可以保持这种状态吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:29:51.467

在 VXML 中，***goto***通常用于在文档中导航。您可以调用外部文档（可能是您的 PHP），但它没有***namelist***属性来传递查询字符串中的信息。您可以将查询字符串构建到 URI 中，但不能动态执行，因为***next***属性不接受表达式。

将信息传递给 PHP 应用程序的最佳方式是使用***提交***或***子对话框***标记，它们都具有用于传递数据的***名称列表***属性。***子***对话框用于调用可重用的通用对话框，并将返回到调用文档中停止执行的位置。它可以将数据返回给调用文档。而***提交***不会自动返回到调用文档。

如果您希望信息保留（而不是将其保留在后端），您可以使用根文档来分配变量。根文档中的变量对整个应用程序是全局的，并且将在整个调用过程中持续存在。[您可以在VoiceXML Specification](http://www.w3.org/TR/voicexml20/)的第 1.3.3 节中阅读有关根文档的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T21:14:23.910

有两种通用方法可以解决这个问题。正如您提到的，如果您离开当前页面，所有内置错误计数器都会重置。一种解决方案是使用一个通用的根文档，它可以存储“全局”变量，这些变量将在页面转换中持续存在。您将需要通过操作这些应用程序级变量来手动处理所有错误计数。第二种更优雅的解决方案是使用允许您将数据发送到另一个脚本的标签，该脚本可以选择执行更多 VoiceXML，然后返回到当前脚本而不会丢失上下文。子对话框可以被认为很像函数调用。您当前的范围被保留并创建了一个新范围。您可以传入变量并获取返回值。这是一个人为的例子：

```
<?xml version="1.0"?>
<vxml version="2.1">
  <form id="getdigits">
    <field name="digits" type="digits">
      <prompt>Please enter some digits</prompt>
    </field>
    <subdialog name="dial" src="dial.php" namelist="" method="get">
      <filled>
        <if cond="dial.status == 'failure'">
          <goto next="#getdigits"/>
        </if>
        <goto next="someotherpage.php"/>
      </filled>
    </subdialog>
  </form>
</vxml>

<?php
header("Content-type: text/xml");
echo("<?xml version=\"1.0\"?>\n");
$status = $_GET['digits'] == '1234' ? 'success' : 'failure';
?>
<vxml version="2.1">
  <form>
    <block>
      <var name="status" expr="'<?=$status?>'"/>
      <return namelist="status"/>
    </block>
  </form>
</vxml> 
```

# javascript - 在 setTimeout 和函数内部调用函数

> ID：15810808
> 
> 赞同：0
> 
> 时间：2013-04-04T12:13:45.617
> 
> 标签：javascript, function, call

基本上我写了一个函数：

```
函数动画（）{
    设置超时（
        功能（）{
        requestAnimationFrame(动画);
        if (player.currentFrame == player.frames) {
            播放器.currentFrame = 0;
            } 别的 {
            player.currentFrame++;
            }
        }
    , 1000 / 15);
}

```

我正在尝试用这段代码调用它 `animation(fps);`

我试着让它像这样：

```
函数动画（fps）{
    设置超时（
        功能（）{
        requestAnimationFrame(动画);
        if (player.currentFrame == player.frames) {
            播放器.currentFrame = 0;
            } 别的 {
            player.currentFrame++;
            }
        }
    , 1000 / fps);
}

```

并试图用它来调用它，`animation(30)` 但它没有用。我试过这样的搜索主题，但没有一个是我想要的。

任何帮助，将不胜感激！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:18:26.927

`setTimeout`在时间过去后只会调用该函数一次，因此除非您`animation`再次使用调用，否则`fps`它只会运行一次并完成。您可以使用每毫秒`setInterval`调用一次函数。`1000/fps`

```
var frame = 0;
animation(20);
function animation(fps){
    console.log(fps)
    setInterval(
        function(){
            console.log("A");
            document.getElementById("sp1").innerHTML = frame;
            frame++;
        }
    , 1000 / fps);
} 
```

小提琴示例：http: [//jsfiddle.net/Up4Cq/](http://jsfiddle.net/Up4Cq/)

或者如果你想使用setTimeout，你需要`animation`再次调用该函数：

```
function animation(fps){
    console.log(fps)
    setTimeout(
        function(){
            console.log("A");
            document.getElementById("sp1").innerHTML = frame;
            frame++;
           animation(fps);
        }
    , 1000 / fps);
} 
```

这是 setTimeout 的小提琴：http: [//jsfiddle.net/Up4Cq/1/](http://jsfiddle.net/Up4Cq/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:27:19.523

你试过这个语法吗

```
function animation(fbs){
        requestAnimationFrame(animation); 
        if (player.currentFrame == player.frames) {
            player.currentFrame = 0;
        } else {
            player.currentFrame++;
        }        
       setTimeout(function(){animation(fbs) }, 1000 / fbs);
} 
```

我将代码从更改`setTimeout('animation(fbs)', 1000 / fbs);`为`setTimeout(function(){animation(fbs) }, 1000 / fbs);`

# shell - 在 shell 脚本中的 2 个模式之间复制行数据

> ID：15810814
> 
> 赞同：-2
> 
> 时间：2013-04-04T12:14:11.953
> 
> 标签：shell, sed, grep

这是我的 source.php 文件，如果模式在**'<(single quot 小于)**和**'>;(sinle quot 大于逗号)之间匹配，我想要复制行号和行代码**

![在此处输入图像描述](https://i.stack.imgur.com/TVi2g.png)

这是destination.php文件我想要这样的输出

![在此处输入图像描述](https://i.stack.imgur.com/ZFjPa.png)

行号... 18,19,29 不应打印...因为它与 B/T 模式不匹配..所以如何删除它....任何建议

![在此处输入图像描述](https://i.stack.imgur.com/aELPs.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:03:46.173

如果你想复制所有恰好在 '< 和 >' 之间的行；进入destination.php：

```
sed -ne "/'</,/>'\;/wdestination.php" source.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:28:31.950

尝试以下命令：

```
sed -ne "/'</,/>'\;/{=;p}" source.php | sed '/./N;s/\n/ /' > wdestination.php 
```

打印模式的`=`行号。第二个`sed`命令将行号与文本放在同一行，否则它将打印在不同的行上。

# c++ - 实现析构函数

> ID：15810815
> 
> 赞同：2
> 
> 时间：2013-04-04T12:14:12.113
> 
> 标签：c++, destructor

我有一堂课：`A`我写了析构函数。

现在我有一堂课`B`：

```
class B {
    A* a;
  public:
    B() {
      a = new A[10];
    }

    ~B() {

    }

}; 
```

我想实现B的析构函数。

我认为是这样的：

```
~B() {
  delete[] a;
} 
```

但我有一个错误。

也许我必须做下一行？

```
delete a; 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:16:19.290

你没有说你得到了什么错误，但以下编译没有错误：

```
class A {};

class B {
    A* a;
  public:
    B() {
      a = new A[10];
    }

    ~B() {
      delete[] a;
    }
}; 
```

请注意，这是不完整的，因为它违反了[三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)。`B::a`应该是合适的智能指针，或者类需要实现复制构造函数和复制赋值运算符（或[禁用两者](http://www.boost.org/doc/libs/1_53_0/libs/utility/utility.htm#Class_noncopyable)）。一个更好的选择是使用`std::vector`or`std::array`代替原始指针。

# xcode - Xcode 在运行 segue 时强制 UIView 大小与 UIContainerView 相同

> ID：15810816
> 
> 赞同：1
> 
> 时间：2013-04-04T12:14:18.450
> 
> 标签：xcode, uistoryboardsegue, xcode-storyboard

我的故事板中有以下视图层次结构

```
UIViewController
-UIView
--UIContainerView
---UITableViewController
----UITableView

      |
  push segue
      |
      ﹀
UIViewController
-UIView 
```

带有表格视图的容器视图大约占屏幕的 1/3。我想从给定的表格行中触发一个全新的 UIViewController 。当我将新的 UIViewController 放置到情节提要上并从表视图中连接 push segue 时，Xcode 将目标 UIView 的大小调整为与容器和 UITableViewController 相同的大小（屏幕的 1/3）。但是，当您运行代码并输入 segue 时，“结束”视图应该是全屏的。

这个 Xcode 的大小调整使得无法在 Xcode 中为“结束”视图布局界面。如果这不是 Xcode 上的错误，那么连接这个 segue 并且仍然能够在故事板中布局界面的正确方法是什么？

# http - 从 java 代码调用 Sling Servlet

> ID：15810820
> 
> 赞同：1
> 
> 时间：2013-04-04T12:14:30.323
> 
> 标签：http, url, jakarta-ee, post, sling

我正在尝试通过我的 java 代码中的 HTTP POST 调用 servlet。下面是我的代码

```
private void sendRequest(String Url)
{
  //Url contains all the POST parameters

try {

        URL url = new URL(Url);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();           
        connection.setDoOutput(true); 
        connection.setInstanceFollowRedirects(false); 
        connection.setRequestMethod("GET"); 
        connection.setRequestProperty("Content-Type", "text/plain"); 
        connection.setRequestProperty("charset", "utf-8");
        connection.connect();
        connection.disconnect();

    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 

} 
```

但是请求不会发送到 servlet。我试图通过浏览器访问该 URL，它工作正常。是我遗漏了什么还是代码有任何问题。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:35:11.463

如果您尝试做的是通过正在运行的 sling 处理请求，您可能需要检查[Sling Request Processor](http://sling.apache.org/apidocs/sling6/org/apache/sling/engine/SlingRequestProcessor.html) 。您可以使用该服务处理对 Sling 引擎的请求。

另外，如果您使用 CQ，您可以使用[请求响应工厂](http://dev.day.com/docs/en/cq/current/javadoc/com/day/cq/contentsync/handler/util/RequestResponseFactory.html)来创建您传递给请求处理器的请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:53:29.027

您实际上无处**发送**HTTP 请求。仅连接/断开是不够的。如果`URLConnection`只有当您的代码开始获取有关 HTTP 响应的信息（例如响应状态、标头和/或正文）时，才会发送 HTTP 请求。

用例如替换那些不必要的`connect()`和`disconnect()`行

```
int responseStatusCode = connection.getResponseCode(); // 200 == OK. 
```

或者

```
InputStream responseBody = connection.getInputStream();
// Consume it. 
```

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests/2793153#2793153)

# c - scanf() 函数没有保持屏幕供用户输入数据

> ID：15810823
> 
> 赞同：0
> 
> 时间：2013-04-04T12:14:31.240
> 
> 标签：c, multithreading, sockets

我曾经`scanf()`在多线程客户端套接字程序中按住屏幕并从用户那里获取输入。 `scanf()`此处未按住屏幕，用户无法输入数据。线程函数的代码是：

```
void *send_data(void *num)
{
     int *sock_s=(int *) num;
     int sock=*sock_s;
     char msg[50];
     printf("Enter data:");

     while(1) {
          scanf("%s",msg);
          if(strcmp(msg,"exit")==0)
          {
               break;
          }
          send(sock_s,msg,sizeof(msg),0);
     }
     send(sock,msg,sizeof(msg),0);
} 
```

并且创建这个线程的代码是：

```
 status_s=pthread_create(&thread_s,NULL,send_data,(void *)&sock);
            if(status_s==0)
                    printf("sending"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:36:51.623

*   您在标准输入中留下尾随换行符。这个问题是一个常见问题，每天至少被问 5 个计时器。在此站点上搜索 scanf... 解决方案：`scanf(" %s", msg);`或类似的。
*   您不能`scanf`在线程内部使用普通和类似的库函数，它们不是线程安全的。
*   您使用它的方式`scanf`很容易受到攻击，并且会导致缓冲区溢出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:16:25.817

缓冲区中可能有“\r”或“\n”。我们需要刷新输入缓冲区才能将其删除。

使用[fflush](http://linux.die.net/man/3/fflush) (stdin) 函数刷新缓冲区。

```
fflush(stdin)  
scanf("%s", msg ); 
```

编辑：您是否尝试使用 fgets 而不是 scanf ？

```
fgets(msg); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T12:40:35.810

试试这个，看看它是否有效

```
 printf("Enter data:");
      scanf("\n%s",msg);

while(strcmp(msg,"exit")!=0)
{
   send(sock_s,msg,sizeof(msg),0);
        scanf("\n%s",msg);

} 
```

我认为while循环可能有问题

# memory-leaks - Java 内存转储问题

> ID：15810824
> 
> 赞同：1
> 
> 时间：2013-04-04T12:14:33.563
> 
> 标签：memory-leaks, java-5

我尝试使用以下代码创建内存转储

```
 **/usr/lib/jvm/j2sdk1.5-sun/bin/jmap -heap 10699** 
```

但我得到了下面提到的错误，任何人都可以帮助我

**正在附加到进程 ID 10699，请稍候...附加到进程时出错：sun.jvm.hotspot.debugger.DebuggerException：无法附加到进程**

我正在使用 java 5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:30:12.053

为了积极主动，我假设您正在运行 ubuntu。在这种情况下，键入以下内容：

```
echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope 
```

如果您没有运行 ubuntu，我建议您以与运行目标进程相同的用户身份运行 jmap

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-16T17:40:55.407

（假设你在 ubuntu 上）

快速修复是`echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope`.

如果您希望它在重新启动后仍然存在，并且您不想损害受限制`ptrace_scope`提供的保护，我建议`setcap cap_sys_ptrace=eip`在需要 ptrace 的二进制文件上使用。对于 java 开发人员，您可以运行此命令（以 root 身份）

```
find /usr/lib/jvm -type f -perm -o+x -exec setcap cap_sys_ptrace=eip {} \; 
```

# mondrian - 具有多个级别的雪花模式

> ID：15810828
> 
> 赞同：0
> 
> 时间：2013-04-04T12:14:41.307
> 
> 标签：mondrian, workbench

我的模式中的一个维度是建模为具有以下表结构的雪花模式：

```
fact table -> criteria_value -> criteria -> Domain 
```

蒙德里安模式：

```
<Dimension type="StandardDimension" foreignKey="id_value" highCardinality="false" name="Researched Value">
  <Hierarchy name="Researched Value" hasAll="true" primaryKey="id_va" primaryKeyTable="criteria_value">
    <Join leftAlias="criteria_value" leftKey="id_va" rightAlias="criteria" rightKey="id_c">
      <Table name="criteria_value">
      </Table>
      <Join leftAlias="criteria" leftKey="id_c" rightAlias="domain" rightKey="id_domain">
        <Table name="criteria" alias="">
        </Table>
        <Table name="domain" alias="">
        </Table>
      </Join>
    </Join>
    <Level name="Domain" table="domain" column="desc_d_Eng" type="String" uniqueMembers="true" levelType="Regular" hideMemberIf="Never">
    </Level>
    <Level name="Criteria" table="criteria" column="desc_c_Eng" uniqueMembers="false">
    </Level>
    <Level name="Value" table="criteria_value" column="desc_va_Eng" uniqueMembers="false">
    </Level>
  </Hierarchy>
</Dimension> 
```

问题是在 Mondrian Workbench 中尝试使用 MDX 查询时：

```
{[Researched Value].[Mobile services].operator} ON ROWS 
```

我可以看到相应的值（“移动服务”和“运营商”分别是“域”和“标准”级别的第一个成员

但是例如在尝试时：

```
{[Researched Value].[Mobile services].internet} ON ROWS 
```

我有：

> Mondrian 错误：在多维数据集“Recherche”中找不到 MDX 对象“[研究值]。[移动服务]。[互联网]”

而“互联网”是“标准”级别的成员（但它不是第一个）

为什么我看不到我关卡的所有成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:36:07.630

我认为您在 MDX 标识符中缺少级别的名称。正确的语法是：

```
[Hierarchy Name].[Level Name].[Member Name] (.[Child Member Name]) 
```

试试这个：

```
{[Researched Value].[Criteria].[Internet]} 
```

# outlook - IRibbonExtensibility GetCustomUI 未调用

> ID：15810829
> 
> 赞同：4
> 
> 时间：2013-04-04T12:14:44.323
> 
> 标签：outlook, ms-office, ribbon, extensibility

我正在为 Outlook 开发一个共享加载项。

我的一位客户在他的机器上遇到了问题，他在主窗口功能区中看不到我的加载项按钮/ui。

在探索了他的环境和我的日志后，我注意到接口 IRibbonExtensibility 的函数“GetCustomUI”在他的环境中没有被调用。

我不确定导致不同行为的原因是什么，为什么 Outlook 不调用客户计算机上的 GetCustomUI？

另外 - 是否可以自己发起对此方法的调用？或者刷新功能区以便调用 GetCustomUI？

如果有人有想法，请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-15T17:54:44.533

我有同样的问题。似乎实现 IRibbonExtensibility 的类应该用 ComVisible(true) 属性定义。像这样：

```
[ComVisible(true)]
public class Ribbon : IRibbonExtensibility {
...
} 
```

# c++ - 在 Qt 中使用 boost 会引发关于信号被定义为受保护的错误

> ID：15810839
> 
> 赞同：0
> 
> 时间：2013-04-04T12:15:07.900
> 
> 标签：c++, qt, boost, signals

我正在尝试使用 c++ 制作协议栈 DLL。我实际使用协议栈的 Gui 部分是用 Qt 编写的。但是我的协议栈是单独使用标准 c++ 编写的。我想让我的协议栈异步向 GUI 部分发送数据接收信号。为此，我想到了一个信号和槽机制。我不想使用 Qt 信号和插槽，因为我认为它会迫使我将协议栈 DLL 设为 Qt DLL。所以，我想到了使用升压信号。但在 Qt 中，它们将 #defining 信号定义为：

```
#define signals protected 
```

这会将所有升压信号替换为受保护的，我的程序会引发很多错误。有没有办法单独在Boost库中避免这种#defining？我不希望它在 Qt 库中停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:43:05.163

您可以添加[“CONFIG += no_keywords # 这样 Qt 就不会 #define any non-all-caps `keywords'”](http://www.boost.org/doc/libs/1_53_0/doc/html/signals/s04.html)

或者，您可以取消定义这样的符号：

```
 #undef signals 
```

并添加您自己的

```
 #define SIGNALS protected 
```

如果你想。如果以及当您迁移到 Qt 5 时，请将 protected 更改为 public。

# javascript - JavaScript 语法疯狂：指向 eval 函数的指针不是 eval 函数？

> ID：15810844
> 
> 赞同：2
> 
> 时间：2013-04-04T12:15:18.980
> 
> 标签：javascript, syntax

以下需要在函数范围内，因为不会发生奇怪的行为是交互式控制台模式。

以下函数按预期返回 5

```
(function() { var x = 5; return eval("x"); })() 
```

一个简单的透明（ish）更改：

```
(function() { var x = 5; var j = eval; return j("x"); })() 
```

产生错误：

```
ReferenceError: x is not defined 
```

这是某种奇怪的安全措施吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:16:55.073

您的第二个示例是*间接*调用`eval`. 间接调用`eval`在全局范围内进行评估，其中`x`不可见：

```
var x = 10;

// This will return 10
(function() { 
    var x = 5; 
    var j = eval; 
    return j("x");
})();

// This will return 5
(function() { 
    var x = 5; 
    return eval("x");
})(); 
```

从[规格](http://es5.github.com/#x10.4.2)：

> 1\. ...如果没有通过直接调用 eval 函数来评估 eval 代码，那么
> 
>      一种。初始化执行上下文，就好像它是一个全局执行上下文...

# ruby - 如何在 jenkins slave 上使用 watir 运行 ruby 测试？

> ID：15810845
> 
> 赞同：1
> 
> 时间：2013-04-04T12:15:21.927
> 
> 标签：ruby, testing, jenkins, watir, slave

我已经在名为 machineA 的 Windows 7 机器上安装了 jenkins 主节点和 testLink。我已经通过 Java Web Start (JNLP) 在名为 machineB 的 Windows Server 2003 上安装了 Ruby 1.8.7、watir 1.7.1、ci_reporter 1.8.4、测试单元 2.5.4、rake 10.0.3、jenkins 从节点。

该项目的目标是从 machineA 开始构建，之后，jenkins slave 将在 machineB 上执行 ruby​​ 测试（使用 watir，因此使用 ie navigator）并在 machineA 上发送报告（由 testLink 读取）。

我在 jenkins 主节点上的作业配置（如 machineA）：

```
restrict where this project can be run --> machineB

svn --> url --> svn://serverSVN/project/trunk

build --> invoke testlink --> testLink cfg --> TestLink Version --> testlink 1.9.3  
                                               Test Project Name --> my project     
                                               Test Plan Name --> my testPlan   
                                               Build Name --> watirTest-$BUILD_NUMBER       
                                               Custom Fields --> watir

testExecution --> Single Build Steps --> execute windows batch cmd --> rake test CI_REPORTS=results 

results seeking strategy --> include pattern --> results/*.xml
                             key custom field --> watir

post-action-build --> publish junit reports --> results/*.xml 
```

这是一个测试，我将以 2 种不同的方式执行（在 machineB 上的本地，在 machineA 上使用 Jenkins）。

```
require 'rubygems'
require 'watir'
require 'test/unit'
require 'ci/reporter/rake/test_unit_loader'
include Watir

class ModifierLocalisation < Test::Unit::TestCase

  def test_me
    ie = Watir::IE.new
    ie.goto("http://ipMachine/shopA/")
    assert(ie.text.include?("Identification"))
  end

end 
```

当我在本地机器B上执行测试时，测试通过了，所以这里是控制台输出：

```
** Invoke test (first_time)
** Execute test
E:/Ruby/bin/ruby.exe test/modifierLocalisation.rb
Loaded suite test/modifierLocalisation
Started
.
Finished in 2.140625 seconds.

1 tests, 1 assertions, 1 failures, 0 errors 
```

但是当我在 machineA 上使用 jenkins 执行测试时，测试失败，（但报告被发送到 machineA 上的 testLink）所以这里是控制台输出：

```
** Invoke test (first_time)
** Execute test
E:/Ruby/bin/ruby.exe test/modifierLocalisation.rb
Loaded suite test/modifierLocalisation
Started
F
Finished in 2.140625 seconds.

1) Failure:
test_me(ModifierLocalisation) [test/modifierLocalisation.rb:14]:
<false> is not true.

1 tests, 1 assertions, 1 failures, 0 errors
rake aborted! 
```

我认为当我在 machineA 上从 jenkins 执行测试时，Internet Explorer 无法启动，这就是测试失败的原因。

知道我能做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:30:24.013

您可以从机器 A 远程运行 selenium 测试。

在您的代码更改中

```
ie = Watir::IE.new 
```

到

```
capabilities = WebDriver::Remote::Capabilities.htmlunit(:javascript_enabled => true)
ie = Watir::Browser.new(:remote, :url => 'http://machineB:4444/wd/hub', :desired_capabilities => capabilities)
ie = Watir::Browser.new :ie 
```

# java - 在本地运行存储在服务器上的类 java

> ID：15810846
> 
> 赞同：0
> 
> 时间：2013-04-04T12:15:25.163
> 
> 标签：java, browser, applet

有什么方法可以（在本地）执行存储在服务器上的 java 类，而无需实际将其下载到 HD 上？

我的意图是，一旦用户在他的浏览器上加载了网站，他就不必连接到互联网来执行它。这样，服务器将不知道类接口具有的参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:09:24.050

考虑到您在客户端运行 java 的要求。我认为 Applet 将最适合该场景。

阅读有关 Java[小程序的更多信息](http://docs.oracle.com/javase/tutorial/deployment/applet/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:20:09.673

这种情况的最佳解决方案是使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)部署的自由浮动小程序或框架，该框架指定`offline-allowed`. 可以安装桌面快捷方式来启动应用程序。在以后的场合。

# java - 从 mysql 数据库中检索图像时出错

> ID：15810862
> 
> 赞同：0
> 
> 时间：2013-04-04T12:16:05.323
> 
> 标签：java, mysql, image, jsp, servlets

我想从数据库检索图像并将其显示到 jsp 页面。所以我创建了一个jsp页面，但我尝试了很多错误但无法修复它。我可以在 servlet 中轻松做到这一点，但我需要在 jsp 中

```
<%@ page import="java.sql.*" %>
<%@ page import="java.io.*" %> 
<%@page import ="DB.*" %>

<%// declare a connection by using Connection interface Connection connection = null;
/* Create string of connection url within specified format with machine 
name, port number and database name. Here machine name id localhost 
and database name is mahendra. */
Blob image = null;
Connection con = null;
Statement stmt = null;
ResultSet rs = null;
DataBaseConnection db= new DataBaseConnection();
ServletOutputStream out1 = response.getOutputStream();
try {
Class.forName("com.mysql.jdbc.Driver");
con=db.connet();
stmt = con.createStatement();
rs = stmt.executeQuery("select img from one where  id = '4'");
if (rs.next()) {
image = rs.getBlob(1);
} else {
response.setContentType("text/html");

out.println("<font color='red'>image not found for given id</font>");

return;
}
response.setContentType("image/gif");
InputStream in = image.getBinaryStream();
int length = (int) image.length();
int bufferSize = 1024;
byte[] buffer = new byte[bufferSize];
while ((length = in.read(buffer)) != -1) {
out1.write(buffer, 0, length);
}
in.close();
out.flush();

} catch (Exception e) {
response.setContentType("text/html");
out.println("<html><head><title>Unable To Display image</title></head>");
out.println("<body><h4><font color='red'>Image Display Error=" + e.getMessage() +
"</font></h4></body></html>");
return;
} 

%> 
```

错误是

```
HTTP Status 500 - java.lang.IllegalStateException: getOutputStream() has already been called for this response

type Exception report

message java.lang.IllegalStateException: getOutputStream() has already been called for this response

description The server encountered an internal error that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: java.lang.IllegalStateException: getOutputStream() has already been called for this response
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:585)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:465)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
root cause

java.lang.IllegalStateException: getOutputStream() has already been called for this response
    org.apache.catalina.connector.Response.getWriter(Response.java:639)
    org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:214)
    org.apache.jasper.runtime.JspWriterImpl.initOut(JspWriterImpl.java:125)
    org.apache.jasper.runtime.JspWriterImpl.flushBuffer(JspWriterImpl.java:118)
    org.apache.jasper.runtime.PageContextImpl.release(PageContextImpl.java:190)
    org.apache.jasper.runtime.JspFactoryImpl.internalReleasePageContext(JspFactoryImpl.java:126)
    org.apache.jasper.runtime.JspFactoryImpl.releasePageContext(JspFactoryImpl.java:80)
    org.apache.jsp.retrieveImage_jsp._jspService(retrieveImage_jsp.java:123)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.37 logs.

Apache Tomcat/7.0.37 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:25:32.127

这是因为您的 JSP 中有此代码。

```
ServletOutputStream out1 = response.getOutputStream(); 
```

一个好的经验法则是不要`ServletOutputStream`在 JSP 中使用

附带说明：使用 Servlet 执行此类任务并使用 JSP 进行演示，其次，`response.setContentType();`在编写响应之前进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:28:09.807

在 servlet 中，您可以创建输出流对象。但是在 jsp 中，不能创建 outputstream 对象。取而代之的是，您必须使用**隐式对象 out**。这就是为什么它抛出错误，因为 getOutputStream() 方法已经被调用。所以删除该行，并使用隐式对象。

# java - 从jsf中的java bean打印打印机上的当前html页面

> ID：15810865
> 
> 赞同：2
> 
> 时间：2013-04-04T12:16:12.503
> 
> 标签：java, jsf, servlets, printing, jsf-1.2

我需要`window.print()`用 java 支持 bean 进程更改 javascript 命令。

在这里，我使用的是 Jsf1.2

作为程序化，打印任何网页，

我们使用 window.print()。打开一个菜单来选择打印机打印页面。

现在我需要用java bean方法调用压缩这个过程。但无论如何它对我不起作用。

我真正需要的是，当我点击网页上的打印按钮时。它直接在选定的打印机上打印（此打印机选择在 backing bean 中使用`PrintServiceLookup.lookupPrintServices`方法完成。此选择适合我。）

这是我`question`的如何在按钮单击打印时在 java bean 中获取我的整页内容。

这里还有一个问题，

当我使用下面的代码进行简单的字符串打印时，它在编译时和运行时显示代码中没有错误，但在打印机上打印时显示错误（下图）。我从在线研究中获得此代码，我正在使用网络打印机。

![在此处输入图像描述](https://i.stack.imgur.com/vXQ6C.png)

打印代码::

```
try{
            System.out.println("getHtmlData = "+getHtmlData());
            PrintService[] printServices;
            String testData = "Hello World my first java print";
            InputStream is = new ByteArrayInputStream(testData.getBytes());
            DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
            PrintServiceAttributeSet printServiceAttributeSet = new HashPrintServiceAttributeSet();
            System.out.println("getPrinter() = "+getPrinter()); // here i give my printer name
            printServiceAttributeSet.add(new PrinterName(getPrinter(), null));       
            printServices = PrintServiceLookup.lookupPrintServices(null, printServiceAttributeSet); 
            System.out.println("printServices len = "+printServices.length+" ::: name = "+printServices[0].getName()); ///to verify its my selected printer or not
            PrintService service = printServices[0];
            DocFlavor[] flavors = service.getSupportedDocFlavors() ;
            //display : selected printers flavors
            for (int i = 0; i < flavors.length; i++) {
                 System.out.println("\t" +flavors[i]);
            }
            Doc doc= new SimpleDoc(is, flavor, null);
            DocPrintJob job = service.createPrintJob();
            //PrintJobWatcher pjDone = new PrintJobWatcher(job);

            // Print it
            job.print(doc, null);
            is.close();
            System.out.println("print Done");  
        }catch (Exception e) {
            System.out.println("error 1 "+e.toString());
           e.printStackTrace();
        } 
```

我知道这听起来像是间谍过程，但我需要从 java bean 打印页面。

更新1：

*   我可以在 js 中获取页面内容`document.documentElement.outerHTML`（实际上我不想使用 js 来传递 html 内容。如果没有找到任何东西，这可能是最后一个选项）。然后将它从 inputhidden 传递给 bean。但是现在如何使用此`String` 内容进行打印。

# xpages - 通过 Xpages 发送邮件 - 不适用于 NotesName 中的空白

> ID：15810867
> 
> 赞同：1
> 
> 时间：2013-04-04T12:16:14.303
> 
> 标签：xpages, sendmail

我正在尝试在单击指定 xpage 中的按钮时在 javascript 库中发送邮件。这很好用，因为我使用像“testuser@gmail.com”这样的网络邮件地址。

一旦我尝试使用我们的 Notes 名称，我就不会收到任何邮件。我尝试了“开发/公司/德国” - 有效。我尝试了“Firstname Lastname/COMPANY/DE”——它不再起作用了。

那是我的代码：

```
var mail = new HTMLMail();
mail.setTo( receiver );
mail.setSubject( subject );
mail.addHTML( bodyText );   
mail.send(); 
```

而变量接收者是：Firstname Lastname/COMPANY/DE

在我的[Mark Leusink](http://www.bleedyellow.com/blogs/m.leusink/entry/send_html_mails_from_an_xpage_with_only_5_lines_of_code?lang=en)脚本库中，Notes 名称仍然正确：

```
if (this._to.length>0) {
  mimeHeader = mimeRoot.createHeader("To");
  mimeHeader.setHeaderVal( this._to.join(","));
} 
```

mimeHeader.getHeaderVal() 提供确切的格式 Firstname Lastname/COMPANY/DE

但是我没有收到任何邮件。任何人都可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:35:56.890

从个人文档中检索用户电子邮件。

```
function getPersonEmail(person){
            var nab:NotesDatabase=session.getDatabase(database.getServer(),"names.nsf")
        var nview:NotesView=nab.getView("($NamesFieldLookup)")
        var doc:NotesDocument=nview.getDocumentByKey(@LowerCase(@Name("[CN]",person)),true)
        if(doc){
             var email = doc.getItemValueString("InternetAddress")
                 doc.recycle()
                 nview.recycle()
                 nab.recycle()
             return @LowerCase(email)
        } else {
         nview.recycle()
         nab.recycle()
         return ""  
        }

} 
```

# jquery - 从 json 对象访问内部元素

> ID：15810870
> 
> 赞同：0
> 
> 时间：2013-04-04T12:16:18.637
> 
> 标签：jquery, json

我想访问 json 数组中的最里面的值。我使用 ajax 调用获得的这个 json 数据。

以下是我从服务器获取的 json 数据：

```
{
"meta": {
    "limit": 20,
    "next": null,
    "offset": 0,
    "previous": null,
    "total_count": 7
},
"objects": [
    {
        "id": 2,
        "other": "{}",
        "name": "gmail"
    },
    {
        "id": 3,
        "other": "{'userinfo': [{ 'user1': { 'user_name':'nancy','address': [], 'outfields': ['login', 'url','type','id']}},{ 'createissue': { 'type':'post','infields': ['owner','repo','title','body'], 'outfields': []}}",
        "name": "yahoo"
    }
] 
```

}

现在在这里我想要使用 jquery 的 user_name 的值。如何得到它？请有人帮助我。

我试过这样：-

```
 user=rows.objects[i].other.userinfo[0]; 
```

但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:18:29.780

问题是它`rows.objects[i].other`没有被解析，它仍然是 JSON。

你应该做

```
var obj = JSON.parse(rows.objects[i].other);
var info = obj.userinfo ? obj.userinfo[0] : undefined; 
```

但是，如果您是生成 JSON 的人，您可能想要修复生成：您不应该在 JSON 中嵌入 JSON。

编辑：`rows.objects[i].other`甚至不是有效的 JSON：它是不完整的，`'`而不是`"`.

# php - 更改 Typo3 中的标题标签

> ID：15810877
> 
> 赞同：1
> 
> 时间：2013-04-04T12:16:46.970
> 
> 标签：php, web

我想更改 PHP 中的 ereg 方法。

我尝试使用`preg_match`没有成功。

任何人都可以帮我更改此代码：

```
if (ereg("/$", $pref) === FALSE) {
    $pref .= '/';
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:20:00.407

为此，您可以使用[strpos](http://php.net/manual/en/function.strpos.php)。

```
if(strpos($pred, "/") !== false) {
   echo "true";
} 
```

它有点快，因为您不需要正则表达式和 FSM-Mashine。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:27:34.577

您的代码段检查字符串是否`$pref`以斜杠结尾。您可以使用以下方法轻松检查`substr()`：

```
if (substr($pref, -1) != '/') {
    $pref .= '/';
} 
```

甚至更短：

```
$pref .= (substr($pref, -1) != '/' ? '/' : ''); 
```

# excel - 想要在 2 个 Excel 文件之间传输数据

> ID：15810883
> 
> 赞同：0
> 
> 时间：2013-04-04T12:17:08.227
> 
> 标签：excel

我有 2 个文件 sat.xls 和 plan.xls。在sit.xls

```
Roll No.    Roll No.    Roll No.
10          11          12
5659694     5659724     5659754
5659695     5659725     5659755 
```

我想当我点击 rollno(5659724) 时，它会自动传输或复制到 plan.xls 其中包含

```
ROW 1       ROW 2
ROLL NO.    ROLL NO. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T05:09:49.673

您可以在 sat.xls 中编写关于选择更改事件的 VBA 代码，如下所示。下面的代码将 plan.xls 中选定的单元格值复制到完全相同的位置。

```
 Private Sub Worksheet_SelectionChange(ByVal Target As Range)
     ' The variable for current cell value
     Dim currentValue As String
     ' The variable for current cell address
     Dim ActiveCellAddress As String
     'Get the value of the current cell from the current sheet Sit.xls
     currentValue = ActiveCell.FormulaR1C1
     'Get the address of the current cell from the current sheet Sit.xls
     ActiveCellAddress = ActiveCell.Address
     'Activate the another workbook Plan.xls
     Workbooks("Plan.xls").Activate
     'select the desired range
     Workbooks("Plan.xls").Sheets("Sheet1").Range(ActiveCellAddress).Select
     'Copy the value to the desired location
     ActiveCell.FormulaR1C1 = currentValue
     'Activate the old workbook again
     Workbooks("Sit.xls").Activate
  End Sub 
```

# android - AsyncTask 从未完成，onPostExecute 从未调用，getstatus 始终返回 running

> ID：15810894
> 
> 赞同：0
> 
> 时间：2013-04-04T12:17:20.273
> 
> 标签：android, android-asynctask

我只和 android 一起工作了几个星期。我正在尝试使用 AsyncTask。问题是我的 onPostExecute 从未被调用，并且 AsyncTask 似乎永远不会完成。

我只是在日志文件中得到这个：

```
04-04 11:47:42.722: D/BbHelper(10343): AsyncClic PreExecute ! 
04-04 11:47:42.742: D/BbHelper(10343): AsyncClic
04-04 11:47:43.774: D/BbHelper(10343): Waiting... clic=RUNNING 
04-04 11:47:44.838: D/BbHelper(10343): Waiting... clic=RUNNING 
04-04 11:47:45.869: D/BbHelper(10343): Waiting... clic=RUNNING 
04-04 11:47:46.919: D/BbHelper(10343): Waiting... clic=RUNNING 
04-04 11:47:47.977: D/BbHelper(10343): Waiting... clic=RUNNING 
04-04 11:47:48.999: D/BbHelper(10343): Waiting... clic=RUNNING 
04-04 11:47:50.001: D/BbHelper(10343): Waiting... clic=RUNNING 
04-04 11:47:51.005: D/BbHelper(10343): Waiting... clic=RUNNING 
... 
```

不确定。所以 getStatus 总是返回 RUNNING。

因此 AsyncTask 已启动，但从未完成。

我的代码有什么问题？

提前致谢。安德烈

```
public class MainActivity extends Activity {
    private AsyncClic clic;
    clic=new AsyncClic();

    @Override
    protected void onCreate(Bundle savedInstanceState) { 
        layout = (LinearLayout) LinearLayout.inflate(this, R.layout.activity_main, null);
    setContentView(layout);
        bActiver = (Button) layout.findViewById(R.id.bActiver);
        bActiver.setOnClickListener(new bActiverListener());
    }
    private class AsyncClic extends AsyncTask<Void, Void, Integer>{
        public Integer err = -1;        
    @Override
        protected void onPreExecute() {
            Log.d(TAG, "AsyncClic PreExecute ! ");      
    }
    @Override
    protected void onPostExecute(Integer result) {
    Log.d(TAG, "AsyncClic PostExecute ! ");
    //progressDialog.dismiss();
    }

    @Override
    protected Integer doInBackground(Void... arg0) {
    Log.d(TAG, "AsyncClic");
    return err;
    }
}

    class bActiverListener implements OnClickListener{          
    @Override
    public void onClick(View arg0) {
    clic.execute();
    while(!clic.getStatus().equals(AsyncTask.Status.FINISHED)){
        try {
        Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
        e.printStackTrace();
        }
        Log.d(TAG, "Waiting... clic=" + clic.getStatus());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:25:26.860

您的 AsyncTask 永远不会完成，因为您甚至没有给它启动的机会。

当你调用execute时，循环准备doInBackground的调度。但是你在主线程上循环和睡眠，永远不会从 onClick 返回，永远不会让循环者有机会在后台线程上安排 doInBackground ..

您必须在后台线程上安排 doInBackground 之前返回。

要么，要么你已经有 10 个异步任务卡住了。

## 编辑

不完全是，但同样的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:45:22.940

永远不会调用 onPostExecute() 的原因是您使主线程处于休眠状态，并且由于 onPostExecute() 在主线程上运行，因此您永远不允许执行它。

这应该有效。我还清理了一些代码：

```
public class MainActivity extends Activity {
private AsyncClic clic=new AsyncClic();

@Override
protected void onCreate(Bundle savedInstanceState) { 
    setContentView(R.layout.activity_main);
    Button bActiver = (Button) findViewById(R.id.bActiver);
    bActiver.setOnClickListener( new bActiverListener());
}

private class AsyncClic extends AsyncTask<Void, Void, Integer>{
    public Integer err = -1;        

    @Override
    protected void onPreExecute() {
        Log.d(TAG, "AsyncClic PreExecute ! ");      
    }

    @Override
    protected void onPostExecute(Integer result) {
        Log.d(TAG, "AsyncClic PostExecute ! ");
    }

    @Override
    protected Integer doInBackground(Void... arg0) {
        Log.d(TAG, "AsyncClic");
        return err;
    }
}

class bActiverListener implements OnClickListener {          

    @Override
    public void onClick(View v) {
        clic.execute();
    }
}
} 
```

# vba - 将数据更新到 Excel 中的适当列和行，在 VBA 中从一张工作表到另一张工作表

> ID：15810896
> 
> 赞同：0
> 
> 时间：2013-04-04T12:17:24.630
> 
> 标签：vba, excel, worksheet-function

正如我在标题中提到的，我需要将数据从一张表复制到另一张表。我在两张表中都有相同的数据（顺序不同）。我想更新第一张表中的数据，因为第二张表中的相应行发生了变化。例如，我在第一张表中有：

```
A   B           C 
1   one         1.1
2   two         1.2
3   three       1.3
4   one + two   2.3
5   one + three  ?? 
```

在第二个中：

```
A   B          C 
1   one        1.1
2   two        1.2
3   three      1.3 
```

正如我在第二篇文章中所写，更新按钮将更新更改的行，并尝试查找是否有任何行具有“一 + 三”形式。因此，它还会将数据从“一”和“三”复制到该行。将来如果添加另一个多名称行（如：一+四或二+三），按钮将执行相同的操作。

我尝试通过以下代码更新工作表中的所有数据：

```
 Private Sub CommandButton2_Click()

 Dim salesData As Range, targetRng As Range
 Dim e As Integer
 Set salesData = Worksheets("sheet1").Range("A2:C" & Range("A1").End(xlDown).Row)

 If Worksheets("sheet2").Range("B2") = vbNullString Then
      Set targetRng = Worksheets("sheet2").Range("A2") 'If no data in SalesDB start in row 2
 Else
      Set targetRng = Worksheets("sheet2").Range("A1").End(xlDown).Offset(1, 0) 'If data already in SalesDB, find next free row
 End If
 salesData.Copy Destination:=targetRng
 End Sub 
```

但它对我没有用，因为： 1 复制所有数据（这很耗时，而且由于 "Worksheets("sheet2").Range("B2") = vbNullString" 它会将数据添加到其余的空行中，不更新它们）

2-我无法检查B列的值，看看是否有这样一个名为“一+三”的字段来更新它。

最后，不要忘记：我是 VBA 和 excel 编程的新手！先感谢您

更新 1::

```
 Private Sub CommandButton5_Click()
 'here the beginning of  of your solution
 'after and instead of this line:
 'salesData.Copy Destination:=targetRng
 'try this... but carefully for the first time :)
  Dim salesData As Range, targetRng As Range
 Dim e As Integer
 Set salesData = Worksheets("sheet1").Range("A2:C" & Range("A1").End(xlDown).Row)

  ' Worksheets("Sheet2").Select

 If Worksheets("sheet2").Range("B2") = vbNullString Then
      Set targetRng = Worksheets("sheet2").Range("A2") 'If no data in SalesDB start in        row 2
 Else
      Set targetRng = Worksheets("sheet2").Range("A1").End(xlDown).Offset(1, 0) 'If   data already in SalesDB, find next free row
 End If

 targetRna.Columns(3).ClearContents

Dim dataItem
Dim Found As Range
Dim rngStart As Range
Set rngStart = targetRna.Cells(1, 1)
Dim strFirstAddress As String
For Each dataItem In salesData.Columns(2).Cells

Set Found = targetRna.Find(dataItem.Value, rngStart, xlValues, xlPart)

If Not Found Is Nothing Then
    strFirstAddress = Found.Address

    Do
        If dataItem.Value = Found.Value Then
            Found.Offset(0, 1) = dataItem.Offset(0, 1)
        Else
            Found.Offset(0, 1) = Found.Offset(0, 1) + dataItem.Offset(0, 1)
        End If
        Set rngStart = Found

    Set Found = targetRna.Find(dataItem.Value, rngStart, xlValues, xlPart)

    If Found Is Nothing Then
        Exit Do
    ElseIf Found.Address = strFirstAddress Then
        Exit Do
    End If

    Loop
End If

Next
End Sub 
```

Edit2:: ()清除地址中的空间以查看图像！[按钮将影响此工作表][1] [1]： http : [//i.stack.imgur.com/zSg1p.png](http://i.stack.imgur.com/)

![更新按钮将在这里][2] [2]： http : [//i.stack.imgur.com/sNiVK.png](http://i.stack.imgur.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:47:20.000

而不是你的：

```
salesData.Copy Destination:=targetRng 
```

尝试使用以下代码：

```
Private Sub CommandButton2_Click()
'here the beginning of  of your solution
'after and instead of this line:
'salesData.Copy Destination:=targetRng
'try this... but carefully for the first time :)

targetRna.Columns(3).ClearContents

Dim dataItem
Dim Found As Range
Dim rngStart As Range
Set rngStart = targetRna.Cells(1, 1)
    Dim strFirstAddress As String
For Each dataItem In salesData.Columns(2).Cells

    Set Found = targetRna.Find(dataItem.Value, rngStart, xlValues, xlPart)

    If Not Found Is Nothing Then
        strFirstAddress = Found.Address

        Do
            If dataItem.Value = Found.Value Then
                Found.Offset(0, 1) = dataItem.Offset(0, 1)
            Else
                Found.Offset(0, 1) = Found.Offset(0, 1) + dataItem.Offset(0, 1)
            End If
            Set rngStart = Found

        Set Found = targetRna.Find(dataItem.Value, rngStart, xlValues, xlPart)

        If Found Is Nothing Then
            Exit Do
        ElseIf Found.Address = strFirstAddress Then
            Exit Do
        End If

        Loop
    End If

Next
End Sub 
```

**编辑：所以，再一次......**我希望我没有错过你概念的任何部分。我不确定，因为您写的是从 sheet1 到 sheet2 的复制，而您的代码从 sheet2 复制到 sheet1。![在此处输入图像描述](https://i.stack.imgur.com/7HgZL.jpg)![在此处输入图像描述](https://i.stack.imgur.com/0RUoF.jpg)

以及完整的代码：

```
Private Sub CommandButton2_Click()
    Dim salesData As Range, targetRng As Range
    Dim e As Integer
    Set salesData = Worksheets("sheet2").Range("A1:C" & Range("A1").End(xlDown).Row)

   If Worksheets("sheet1").Range("B2") = vbNullString Then
   Set targetRng = Worksheets("sheet1").Range("A2") 'If no data in SalesDB start in        row 2
   salesData.Copy Destination:=targetRng
   Exit Sub
   Else
  'if data already exists than set range to search in
  Set targetRng = Worksheets("sheet1").Range("A1").CurrentRegion
  End If

  targetRng.Columns(3).ClearContents

   Dim boFound As Boolean
   Dim dataItem
   Dim Found As Range
   Dim rngStart As Range
   Set rngStart = targetRng.Cells(1, 1)
   Dim strFirstAddress As String
   For Each dataItem In salesData.Columns(2).Cells

          Set Found = targetRng.Find(dataItem.Value, rngStart, xlValues, xlPart)

          If Not Found Is Nothing Then
          strFirstAddress = Found.Address
          boFound = True
             Do 
               If dataItem.Value = Found.Value Then
                  Found.Offset(0, 1) = dataItem.Offset(0, 1)
               Else
                  Found.Offset(0, 1) = Found.Offset(0, 1) + dataItem.Offset(0, 1)
               End If
          Set rngStart = Found

         Set Found = targetRng.Find(dataItem.Value, rngStart, xlValues, xlPart)

         If Found Is Nothing Then
              Exit Do
         ElseIf Found.Address = strFirstAddress Then
             Exit Do
         End If
         Loop
   End If

   If Not boFound Then
          'if not found then copy into first free row
         dataItem.Offset(0, -1).Resize(1, 3).Copy Worksheets("sheet1").Range("A1").End(xlDown).Offset(1, 0)
   End If

   boFound = False

   Next

   End Sub 
```

# jquery - 从给定的 url 显示 json 数组

> ID：15810900
> 
> 赞同：0
> 
> 时间：2013-04-04T12:17:39.190
> 
> 标签：jquery, json

我是 JSON 新手，经过几天的搜索，我想问一个问题，但没有任何好的结果。我有一个包含 JSON 数组的 URL，我想知道如何使用 prepered 键将其显示到表中。eg: username , password , email 是表的第一行，现在只需要填写数据。由于缺乏ajax知识，我只想使用jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:57:53.763

当您在此处未收到警报时，请求失败。这就是为什么有一个 .fail() 方法的原因：

```
$.getJSON( "test.js", { name: "John", time: "2pm" } )
.done(function( json ) {
    console.log( "JSON Data: " + json.users[3].name );
})
.fail(function( jqxhr, textStatus, error ) {
    var err = textStatus + ', ' + error;
    console.log( "Request Failed: " + err);
}); 
```

看看[文档](http://api.jquery.com/jQuery.getJSON/)。

当您想从 POST 检索 JSON 数据时，您不能使用[$.getJSON](http://api.jquery.com/jQuery.getJSON/)：

> 使用 GET HTTP 请求从服务器加载 JSON 编码的数据。

[试试这个](http://jsfiddle.net/avfRT/1/)：

```
$.post( "justaurl")
.done(function( data ) {
    var json = JSON.parse(data);
    alert( json.Users[3].FirstName );
})
.fail(function( jqxhr, textStatus, error ) {
    var err = textStatus + ', ' + error;
    alert( "Request Failed: " + err);
}); 
```

# jquery - Jquery点击功能不会在浏览器调整大小时重置

> ID：15810908
> 
> 赞同：0
> 
> 时间：2013-04-04T12:17:55.370
> 
> 标签：jquery, resize, onclick

我有以下代码，它从左到右滑动一列，并将列右侧的所有内容推到右侧，然后再次返回（有点像 facebook 应用程序）。它在准备好文档时工作正常，但在调整大小时不能正常工作。调整大小后，它开始出现奇怪的行为。就好像它在执行以前的功能而不是在调整大小时注册新功能。

```
function doMenu() {

var $trigger = $(".icon-menu-2");
var $menu = $(".c_left");
var width = $(window).width();

if ((width < 870) && (width > 750)) {
    var status = 'closed';

    $('.icon-list').on('click', function(event){
        if ( status === 'closed' ){
            $menu.animate({
                width: 0,
                marginLeft: -200,
                display: 'toggle'
            }, 'fast');
            $(".content_right, .navbar").animate({
                marginRight: 0,
                display: 'toggle'
            }, 'fast');
            return status = 'open';

        } else if ( status === 'open' ) {
          $menu.animate({
                width: 200,
                marginLeft: 0,
                display: 'toggle'
            }, 'fast');
            $(".content_right, .navbar").animate({
                marginRight: -120,
                display: 'toggle'
            }, 'fast');
            return status = 'closed';
        }
    });
}

if (width < 750) {

   var status = 'closed';
    $('.icon-list').on('click', function(event){
        if ( status === 'closed' ){
            $menu.animate({
                width: 0,
                marginLeft: -200,
                display: 'toggle'
            }, 'fast');
            $(".content_right, .navbar").animate({
                marginLeft: 0,
                display: 'toggle'
            }, 'fast');
            return status = 'open';

        } else if ( status === 'open' ) {
            $menu.animate({
                width: 200,
                marginLeft: 0,
                display: 'toggle'
            }, 'fast');
            $(".content_right, .navbar").animate({
                marginLeft: 200,
                display: 'toggle'
            }, 'fast');
            return status = 'closed';
        }
    });            

}

}
$(document).ready(doMenu);
$(window).resize(doMenu); 
```

***编辑**- 将 toggle() 更改为 on('click', function(event) ，如下所示，但在调整大小时功能无法正常工作的问题仍然存在。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:38:21.817

您可以使用标志来代替切换。

```
var status = 'closed';
$('.foo').on('click', function(event){
    if ( status === 'closed' ){
        //...
        return status = 'open';

    } else if ( status === 'open' ) {
        //..
        return status = 'closed';

    }
}); 
```

# php - Concrete5 站点无法在 IE 中使用文档模式运行：Quirks

> ID：15810911
> 
> 赞同：0
> 
> 时间：2013-04-04T12:18:12.070
> 
> 标签：php, content-management-system, concrete5

我已经在 Concrete 5 中开发了一个站点，该站点在每个浏览器中运行良好，甚至在每个 IE 浏览器中也运行良好，但是当我将 ie 文档模式更改为**Quirks**时 ，该站点完全一团糟

你能建议我哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:19:30.380

当您在怪癖模式下使用 IE 时，它就像 IE5 一样工作，因此您只有 IE5 CSS。这就是为什么该网站被显示为“不同”的原因。

看看
[强制 IE9 进入 Quirks 模式？](https://stackoverflow.com/questions/5123326/force-ie9-into-quirks-mode) 有关 IE 和 quirks 模式的更多信息。

# android - ImageView 和 TextView 未在 Activity 创建时设置

> ID：15810915
> 
> 赞同：0
> 
> 时间：2013-04-04T12:18:21.857
> 
> 标签：android, android-activity

我正在尝试在我的活动中显示图像和一些字符串，但由于某种原因，视图没有被修改。

这是我的代码：

```
import java.io.File;
import java.io.FileInputStream;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.Menu;
import android.widget.ImageView;
import android.widget.TextView;

public class ObjectProperty extends Activity {

    Activity myAct = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        myAct = this;
        setContentView(R.layout.object_property);

        String objetoNome = myAct.getIntent().getStringExtra("nome");
        String arquivo = myAct.getIntent().getStringExtra("arquivo");
        String descricao = myAct.getIntent().getStringExtra("descricaoCompleta");

        System.out.println("objeto nome: " + objetoNome); //not null/empty
        System.out.println("arquivo: " + arquivo);        //not null/empty
        System.out.println("descricao: " + descricao);    //not null/empty

        ImageView imageView = (ImageView)findViewById(R.id.item_image);
        TextView textViewNome = (TextView)findViewById(R.id.item_nome);
        TextView textViewDescricao = (TextView)findViewById(R.id.item_desc);    

        textViewNome.setText(objetoNome); //does not set text
        textViewDescricao.setText(descricao); //does not set text

        if(!arquivo.equals("")){

            Bitmap myBit = getThumbnail(arquivo);

            if(myBit != null)
                imageView.setImageBitmap(myBit); // does not set image
        }

        super.onCreate(savedInstanceState);
        setContentView(R.layout.object_property);
    }

    public Bitmap getThumbnail(String filename) 
    {
        Bitmap thumbnail = null;

        try {
            File filePath = myAct.getFileStreamPath(filename);
            FileInputStream fi = new FileInputStream(filePath);
            thumbnail = BitmapFactory.decodeStream(fi);
        } catch (Exception ex) {
            ex.printStackTrace();
        }

        return thumbnail;
    }

} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:26:26.237

删除这个

```
setContentView(R.layout.object_property); 
```

从 onCreate 的最后一部分开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:27:17.203

调用超类方法`super.onCreate(savedInstanceState);`必须在 oncreate() 方法的第一行。

删除 oncreate() 方法的最后一行`setContentView(R.layout.object_property);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:29:46.583

试试这个，只调用一次 setConteinView。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //your code
} 
```

# javascript - 如何在不传递事件参数的情况下从 JS 函数获取触发事件？

> ID：15810917
> 
> 赞同：4
> 
> 时间：2013-04-04T12:18:22.330
> 
> 标签：javascript, event-handling

**是否可以在不传递任何事件参数**的情况下从调用的 JavaScript 函数获取 JavaScript 触发事件？

 **这是示例代码：

```
<html>
  <head>

    <script>
      function myFunction()
      {
        // How I will get from here the fired event  ??
      }
    </script>
  </head>
  <body>

    <p id="paragraghhh" onclick="myFunction()">
       Click on this paragraph. An alert box will
       show which element triggered the event.
    </p>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:24:41.123

在 JavaScript 函数中，您可以引用 this.event 属性。

例如，

```
function myFunction(){
  alert(this.event.type);
} 
```

提醒 JS 事件，在本例中为“点击”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T12:24:55.300

只需将 HTML 更改为

```
<p id="paragraghhh" onclick="myFunction(event)">
  Click on this paragraph. An alert box will
  show which element triggered the event.
</p> 
```

和 JS 到

```
function myFunction(event)
{
  // Handle event
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T12:22:14.460

尝试这个：

```
onclick="myFunction(event)" 
```

JS：

```
function myFunction(e)
{
    console.log(e.target);
} 
```

或者：

```
onclick="myFunction.call(this)" 
```

JS：

```
function myFunction()
{
    console.log(this);
} 
```

更好的解决方案：

```
document.getElementById('paragraghhh').addEventListener('click', function(){
     console.log(this);
}); 
```**

# php - 我只从mysql查询中获取最后一条记录

> ID：15810918
> 
> 赞同：0
> 
> 时间：2013-04-04T12:18:24.317
> 
> 标签：php, mysql

这是一个简单的问题，但我不明白

我在数据库日期和新闻邮件中有两个表我在新闻邮件中有一些列 ID、名称、地址、电子邮件等我有 2 个字段 ID、邮件

我需要从日期中提取所有记录，其中包含来自新闻邮件的电子邮件地址

我试过了 ：

```
SELECT * FROM date WHERE date.email IN (SELECT mail FROM newsmail); 
```

我从日期开始只收到一条记录，最后一行来自新闻邮件

```
SELECT * FROM date d JOIN newsmail n ON d.email LIKE n.mail 
```

与上面相同的结果...电子邮件和邮件字段是`VARCHAR(50)`

[http://sqlfiddle.com/#!2/fad06/1/0](http://sqlfiddle.com/#!2/fad06/1/0) 在这里它正在工作，但不是在我的真实数据库上

问题在于将数据从 txt 文件插入新闻邮件

最初的 ：

```
$tmpfisier = $_FILES["upfile"]["tmp_name"];
$file_handle = fopen($tmpfisier, "r");
    while(!feof($file_handle)){
        $email_line = fgets($file_handle);
        $values = mysql_query("INSERT INTO  newsmail (`ID` ,`mail`) VALUES ( NULL ,  '$email_line')");
    }
    fclose($file_handle); 
```

编辑：

```
$tmpfisier = $_FILES["upfile"]["tmp_name"];
$file_handle = fopen($tmpfisier, "r");
    while(!feof($file_handle)){
        $raw_email_line = fgets($file_handle);
        $email_line = preg_replace('/\s\v/u', '', $raw_email_line);
        $values = mysql_query("INSERT INTO  newsmail (`ID` ,`mail`) VALUES ( NULL ,  '$email_line')");
    }
    fclose($file_handle); 
```

所以问题是来自 txt/csv 文件的 WHITESPACES

谢谢你们 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:21:04.643

```
SELECT  a.*
FROM    Date a
        INNER JOIN NewsMail b
            ON a.email LIKE CONCAT('%', b.mail, '%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:21:11.393

用这个：

```
SELECT d.*
FROM date d
INNER JOIN newsmail n
    ON n.mail = d.email; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:27:05.183

可能需要 TRIM 函数来删除前导和尾随空格。

```
SELECT * FROM date d LEFT JOIN newsmail n ON TRIM(d.email) = TRIM(n.mail) 
```

对于 SQLSERVER，您可能需要同时使用 LTRIM 和 RTRIM 才能获得相同的结果。

```
SELECT * FROM date d LEFT JOIN newsmail n ON RTRIM(LTRIM(d.email)) = RTRIM(LTRIM(n.mail)) 
```

# javascript - localStorage.setItem 在 XPage 上的 IE10 中不起作用

> ID：15810923
> 
> 赞同：0
> 
> 时间：2013-04-04T12:18:42.897
> 
> 标签：javascript, local-storage, xpages, lotus-domino, internet-explorer-10

好吧，这很奇怪。

我有一个安装了 UP1 的 Domino 8.5.3FP3，无论我在该服务器上尝试什么 - localStoraget.setItem 在 IE10 中都不起作用！

我有一个空数据库，里面有一个空 XPage，我使用控制台发出：localStorage.setItem("test","ok")

这适用于同一服务器上的 IE8 和 IE9，但不适用于 IE10。（用IE10模拟IE9或IE8不行）

在 Domino 8.5.3 和 IE10 上，我收到错误消息：“预期功能”

使用我的本地开发机器（Domino 9），相同的数据库可以工作。

（IE10 localStorage 适用于任何其他页面，例如 google.com）。

我已经使用 Fiddler 比较了源和 HTTP 标头，我能发现的唯一区别是 Domino 8.5.3 对**utf-8**使用小写，而 Domino 9 将输出：**UTF-8**

您可以在此处查看比较：[https ://dl.dropbox.com/u/9681254/question/comparingDominoVersions.png](https://dl.dropbox.com/u/9681254/question/comparingDominoVersions.png)

想法？

谢谢！

/J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T06:48:28.120

检查这是否可以解决您的问题 [http://blogs.msdn.com/b/ieinternals/archive/2012/03/23/understanding-ie10-enhanced-protected-mode-network-security-addons-cookies-metro-desktop .aspx](http://blogs.msdn.com/b/ieinternals/archive/2012/03/23/understanding-ie10-enhanced-protected-mode-network-security-addons-cookies-metro-desktop.aspx)

# iphone - 在 Tap Counter 应用程序中，当达到特定计数时显示不同的图像

> ID：15810926
> 
> 赞同：0
> 
> 时间：2013-04-04T12:18:54.877
> 
> 标签：iphone, objective-c, xcode, xcode4.5

我正在创建一个简单的点击计数器应用程序。UI 由一个按钮（按下以进行计数）、一个显示计数的标签和一个图像视图组成。我希望能够在计数达到一定数量时更改图像。例如，如果计数在 0 到 100 之间，我想查看 image1，那么当计数在 101 到 200 之间时，我想查看 image2。

到目前为止，这是我的代码：

h 文件：

```
#import <UIKit/UIKit.h>

int counter;

@interface tapcount : UIViewController {

    IBOutlet UILabel *count;
    IBOutlet UIImage *imageview;
}

-(IBAction)click; 
```

.m 文件：

```
@implementation tapcount

-(IBAction)click {
    counter=counter +1;
    count.text = [NSString stringWithFormat:@"%i",counter];
    if (counter > 0) counter = 0;
    if (counter > 100);
} 
```

我不知道如何调用图像视图。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:27:42.953

试试这个：

在 .h 文件中

```
 #import <UIKit/UIKit.h>

    int counter;

    @interface tapcount : UIViewController {

            IBOutlet UILabel *count;
            IBOutlet UIImageView *imageview;
        }

    -(IBAction)click; 
```

在点击方法设置图像...

```
 -(IBAction)click 
    {
            counter=counter +1;
            count.text = [NSString stringWithFormat:@"%i",counter];
            if (counter >= 0 && counter <= 100)  {
                    imageview.image = [UIImage imageNamed:@"1.png"];
            }
            else if (counter >= 101 && counter <= 200) {
                    imageview.image = [UIImage imageNamed:@"1.png"];
            }
            else if (counter >= 201 && counter <= 300) {
                    imageview.image = [UIImage imageNamed:@"1.png"];
            }
            ....
    } 
```

最重要的是：在 .xib 文件中获取 uiimageview。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:29:44.093

只要有`click`像下面这样的方法

```
- (IBAction) click {
counter++;
count.text = [NSString stringWithFormat:@"%d",counter];
if (counter > 0 && counter < 101)
    imageView.image = [UIImage imageNamed:@"yourImageNamecount100.png"];
else if (counter > 100 && counter < 201)
    imageView.image = [UIImage imageNamed:@"yourImageNamecount200.png"];
else
    imageView.image = [UIImage imageNamed:@"yourImageNamedefault.png"];
} 
```

# c# - 我可以在一个页面上有两个媒体元素吗，一个总是会播放一些背景音乐，第二个会根据用户操作播放一些声音

> ID：15810927
> 
> 赞同：0
> 
> 时间：2013-04-04T12:19:02.580
> 
> 标签：c#, windows-store-apps, winrt-xaml

我正在开发 Windows 商店应用程序（使用 xaml/C#），我的问题是我可以在一个页面上有两个媒体元素，一个总是会播放一些背景音乐，第二个会根据用户操作播放一些其他声音吗？

我试过但不适合我，只有背景音乐正在播放，其他声音没有播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:44:40.943

我看不出问题。您可以在同一页面上使用 2 个媒体元素。mediaControl1 始终播放，mediaControl2 在用户单击按钮时开始播放。

```
 <Button Width="150" Height="150" Style="{StaticResource ButtonAppStyle}" Click="MainPage_Loaded">

  <MediaElement  x:Name="mediaControl1" Height="400" Source="Assets/muzika.mp3" RealTimePlayback="True" IsLooping="True"  />
          <MediaElement  x:Name="mediaControl2" Source="Assets/firework1.wav" IsMuted="True"/>

void MainPage_Loaded(object sender, RoutedEventArgs e)
        {
            mediaControl2.IsMuted = false;
            mediaControl2.Play();
        } 
```

# android - 如何使它工作在android webview 中的后退按钮？

> ID：15810931
> 
> 赞同：0
> 
> 时间：2013-04-04T12:19:11.170
> 
> 标签：android, eclipse, webview, back

我有这个代码：

```
package com.android.m2s;

import android.os.Bundle;
import android.app.Activity;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        WebView myWebView = (WebView) findViewById(R.id.wvBrowser);
        myWebView.loadUrl("http://www.message2space.es.vu/app/index.html");
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.getSettings().setGeolocationEnabled(true);
        myWebView.setWebViewClient(new CustomWebViewClient());
    }
    private class CustomWebViewClient extends WebViewClient {
        @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        }   
    WebView myWebView;
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
            myWebView.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

但它不起作用，当我返回应用程序崩溃并要求我关闭它时。不是我做错了什么，因为我看到的所有代码都是如此 Webview 和功能。为什么我的不工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:23:04.823

您有一个`WebView myWebView;`从未分配过的声明。要解决此问题，您可以更改：

```
WebView myWebView = (WebView) findViewById(R.id.wvBrowser); 
```

到

```
myWebView = (WebView) findViewById(R.id.wvBrowser); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:35:13.723

```
package com.android.m2s;

import android.os.Bundle;
import android.app.Activity;
import android.view.KeyEvent;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        myWebView = (WebView) findViewById(R.id.wvBrowser);
        myWebView.loadUrl("http://www.message2space.es.vu/app/index.html");
        myWebView.getSettings().setJavaScriptEnabled(true);
        myWebView.getSettings().setGeolocationEnabled(true);
        myWebView.setWebViewClient(new CustomWebViewClient());
    }
    private class CustomWebViewClient extends WebViewClient {
        @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                view.loadUrl(url);
                return true;
            }
        }   
    WebView myWebView;
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
            myWebView.goBack();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

这将起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:21:39.100

你为什么不直接使用：

```
YourActivity.this.onBackPressed(); 
```

# jquery - 在同一类的 div 之间悬停时停止闪烁

> ID：15810934
> 
> 赞同：1
> 
> 时间：2013-04-04T12:19:15.300
> 
> 标签：jquery, class, flicker, jquery-hover, fadeto

我有 3 组 div，它们有一个动态分配给它们的类。当用户将鼠标悬停在任何 div 上时，jQuery 会检查该类并淡化具有相同类的其他类。这很好用，但是如果我在具有相同类的 div 之间悬停，jquery 似乎每次都会触发。大概是因为它重新检查了课程并触发了效果。

我的问题是如何在同一类 div 之间悬停时停止闪烁？

div 都以 1px 的边距向左浮动。（我试过删除边距顺便说一句）。

我的标记：

```
<div id="projects">

   <div class="p-1">IMAGE</div>
   <div class="p-1">IMAGE</div>
   <div class="p-1">IMAGE</div>

   <div class="p-2">IMAGE</div>
   <div class="p-2">IMAGE</div>
   <div class="p-2">IMAGE</div>

   <div class="p-3">IMAGE</div>
   <div class="p-3">IMAGE</div>
   <div class="p-3">IMAGE</div>

</div> 
```

和 jQuery

```
 $('#projects div[class^=p-]').hover(function() {
        $('#projects div[class=' + $(this).attr('class') + ']').fadeTo(200, 0.2, function() {
        });
    }, function() {
        $('#projects div[class=' + $(this).attr('class') + ']').fadeTo(200, 1.0, function() {
        });
    }); 
```

还有一个小提琴：[小提琴](http://jsfiddle.net/hXHGe/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T16:41:35.800

我已经更新了你的小提琴。对于我从您的评论中理解的内容，添加该`stop()`功能应该足够了：

```
$('#projects div[class^=p-]').hover(function() {
    $('#projects div[class=' + $(this).attr('class') + ']').stop().fadeTo(0, 0.2, function() { });
    }, function() {
        $('#projects div[class=' + $(this).attr('class') + ']').stop().fadeTo('slow', 1.0, function() { });
    }); 
```

[http://jsfiddle.net/hXHGe/9/](http://jsfiddle.net/hXHGe/9/)

此功能停止任何先前的任何信息。由于悬停在悬停之前，它将停止正在运行的动画并强制它保持淡入淡出到 0.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:27:02.153

似乎当您将鼠标悬停在各个`div`元素之间时，光标被放置在`div class`触发淡入淡出之外的一个点上。当您继续将鼠标悬停在元素列表下方时，闪烁效果变得更加明显。

一种方法是重组您的标记，使其成为`.p-#` `div`这些图像的父 div，以便将悬停效果应用于子`div`元素一次，如下所示，

```
<div id="projects">

   <div class="p-1">
       <div>IMAGE</div>
       <div>IMAGE</div>
       <div>IMAGE</div>
   </div>

   <div class="p-2">
       <div>IMAGE</div>
       <div>IMAGE</div>
       <div>IMAGE</div>
   </div>

   <div class="p-3"> 
       <div>IMAGE</div>
       <div>IMAGE</div>
       <div>IMAGE</div>
   </div>

</div> 
```

如果需要，单个子`div`元素可以具有唯一标识符，但这将消除`flicking`您现在看到的效果。

您可以在此[jsfiddle预览代码](http://jsfiddle.net/nXSVe/)

上面的小提琴只是一个演示，但有了更多信息，我们可以设计出更好的方法来满足您的需求。

# asp.net - 在 IE 中下载文件时重复基本身份验证

> ID：15810935
> 
> 赞同：0
> 
> 时间：2013-04-04T12:19:19.053
> 
> 标签：asp.net, .net, iis-7, internet-explorer-8, basic-authentication

我有一个使用基本身份验证的站点，绑定到我们的 Active Directory。一切正常，除了在 IE8 中，当我单击链接下载文件时，身份验证窗口再次弹出。我可以取消，它可以让我毫无问题地下载它。

既然我已经通过了身份验证，为什么会重复？有没有办法摆脱它？我无法在任何其他浏览器上复制它。似乎无法在网上找到任何东西。还有其他人遇到这个吗？

# nopcommerce - nopCommerce：找不到资源。

> ID：15810937
> 
> 赞同：2
> 
> 时间：2013-04-04T12:19:22.653
> 
> 标签：nopcommerce

$ 我可以在管理部分 Plugin-->Import Product 中创建菜单项，但是当我单击它时，它给了我错误资源找不到。请帮助解决这个问题。我在下面附上了模型、视图、控制器和其他相关代码。

```
*************Model*************
namespace Nop.Plugin.Import.Product.Models
{
public class ImportProductModel
{        
    public string Button1 { get; set; }
}
 }

 **********Controller*************

using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Web.Mvc;
using Nop.Admin.Models.Catalog;
using Nop.Core.Domain.Catalog;
using Nop.Core.Infrastructure;
using Nop.Plugin.Import.Product.Models;
using Nop.Services.Catalog;
using ns_5OClock;

namespace Nop.Plugin.Import.Product.Controllers
{
class ImportProductController : Controller
{
    //
    // GET: /DisplayTime/

    public ActionResult Index(ImportProductModel model)
    {
        if (!String.IsNullOrEmpty(model.Button1))
        {
            CreateProduct();
        }

        return View();
    }

    //
  }
  }

   *************View (ImportProduct.cshtml) **********

   @{
   Layout = "";
   }
   @model Nop.Plugin.Import.Product.Models.ImportProductModel

   <table>
   <tr>
    <td>            
        <button title="Click to Create Products" 
        style="width:300px;height:60px"   name="Button1"></button>
    </td>
   </tr>
  </table>

    ***************Plugin (ImportProduct) **********************

   using System;
   using System.Collections.Generic;
   using System.Linq;
   using System.Text;
   using System.Threading.Tasks;
   using Nop.Core.Plugins;
   using Nop.Web.Framework.Web;

   namespace Nop.Plugin.Import.Product
   {
   public class ImportProduct : BasePlugin, IAdminMenuPlugin
   {
    public void BuildMenuItem(Telerik.Web.Mvc.UI.MenuItemBuilder menuItemBuilder)
    {
        menuItemBuilder.Text("Import Product");
        //menuItemBuilder.Url("/Plugins/ProductImport/Index");
        menuItemBuilder.Route("Plugin.Import.Product.ImportProduct");
     }
    }
    }

   **************Route Provider ****************

   using System.Web.Mvc;
   using System.Web.Routing;
   using Nop.Web.Framework.Mvc.Routes;

   namespace Nop.Plugin.Import.Product
   {
   public partial class RouteProvider : IRouteProvider
   {
    public void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute("Plugin.Import.Product.ImportProduct",
             "Plugins/Import/ImportProduct",
             new { controller = "Import", action = "ImportProduct" },
             new[] { "Nop.Plugin.Import.Product.Controllers" }
        );

    }

    public int Priority
    {
        get
        {
            return 0;
        }
       }
       }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-05T05:32:37.170

请查看您的路线登记表

```
routes.MapRoute("Plugin.Import.Product.ImportProduct",
      "Plugins/Import/ImportProduct",
      new { controller = "ImportProduct", action = "Index" },
      new[] { "Nop.Plugin.Import.Product.Controllers" }
); 
```

# iphone - UITableViewController 没有调用委托方法

> ID：15810938
> 
> 赞同：0
> 
> 时间：2013-04-04T12:19:23.713
> 
> 标签：iphone, ios, delegates, uitableview

我想在弹出窗口中显示一个 tableViewController，像这样创建 TableViewController。

```
@interface ContentViewController :UITableViewController{

}
@end

@implementation ContentViewController

- (id)initWithStyle:(UITableViewStyle)style {
    if ((self = [super initWithStyle:style])) {
        self.contentSizeForViewInPopover = CGSizeMake(100,400);

    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    // Return the number of rows in the section.
    return 10;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }
cell.textLabel.text = [NSString stringWithFormat:@"Item %d", [indexPath row]]; 
cell.textLabel.textColor = [UIColor whiteColor];
    return cell;
} 
```

从另一个 ViewController 我在 popOver 中调用这个 tableViewController，如下所示。

```
UIViewController *contentViewController = [[ContentViewController alloc]    initWithStyle:UITableViewStylePlain];
self.popoverController = [[popoverClass alloc]    initWithContentViewController:contentViewController] ;
self.popoverController.delegate = self;
CGRect rect = btn.frame;
[self.popoverController presentPopoverFromRect:rect inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

当我使用 init 语句分配 ContentViewController 时，tableView 委托方法没有调用，并且在 popOver 中没有创建任何内容。

如何让这个委托方法被调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:39:58.393

请与您的委托和数据源一起检查分配的位置。

如果您`ContentViewController`有 nib 文件意味着，只需跟踪数据源并委托给您的文件所有者。否则`initWithStyle`，通过设置委托和数据源来覆盖您的方法，如下所示。

```
self.tableView.delegate = self;
self.tableView.datasource = self; 
```

并告诉 contentViewController 将实现 tableview 控制器委托和数据源方法，如

```
@interface ContentViewController :UITableViewController<UITableViewDelegate, UITableViewDataSource>{

}
@end 
```

# gnuplot - 如何使用 gnuplot 4.6 boxplot 打印异常值？

> ID：15810939
> 
> 赞同：0
> 
> 时间：2013-04-04T12:19:24.027
> 
> 标签：gnuplot, boxplot, outliers

我正在尝试使用 gnuplot 4.6 制作箱线图，但我遇到了一些问题。我试图从多个来源找到答案，但没有找到。

例如，以下命令不起作用

```
gnuplot> set style boxplot
               ^
     expecting 'data', 'function', 'line', 'fill', 'rectangle', or 'arrow'
gnuplot> set style boxplot outliers pointtype 7
                   ^
         expecting 'data', 'function', 'line', 'fill', 'rectangle', or 'arrow' 
```

如果我直接绘制为 GNUPLOT 手册第 45 页中的状态，就像这样

```
gnuplot> plot 'boxplotdata.dat' using (1):2 
```

我刚上车`x=1`，所有点都像'+'一样绘制，但根本没有箱线图。如果进行处理并使用烛台/晶须图，那么没关系，但我无法得到异常值......

我的原始数据如下

```
32  0.521984
32  0.521801
32  0.512350
32  0.519136
32  0.518901
32  0.527961
32  0.506231
32  0.512615
32  0.526872
32  0.520300
32  0.511880
32  0.531184
32  0.510774
32  0.527602
32  0.520770
32  0.517887
32  0.527341
32  0.525647
32  0.525276
32  0.527341 
```

我怎样才能打印出异常值'o'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T21:58:27.753

在 gnuplot 4.6 手册中，p45：

> 默认情况下，晶须从盒子的末端延伸到最远的点，其 y 值在四分位间距的 1.5 倍范围内。

因此，异常值必须大 1.5 倍，并且数据中没有任何异常值（这就是我们在图片中看不到它们的原因）。

这在我的 gnuplot 4.6 MS-Windows 中完美运行：

```
set style boxplot outliers pointtype 19
set style data boxplot
plot 'data' u 1:2 
```

检查版本，尝试重新安装。

# android - 需要在 Android 中创建帮助组件

> ID：15810941
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:19:27.680
> 
> 标签：android, listview

我正在构建一个 Android 应用程序，并希望在其中包含一个帮助组件。帮助模块的结构如下所示：

帮助

*   常见问题
*   特征
    *   下订单
        *   在线订购
        *   基于移动应用程序的订购
        *   电话订购
    *   管理我的忠诚度帐户
        *   注册
        *   积分目录
        *   忠诚度状态跟踪
        *   积分兑换
    *   访问订单历史
        *   购买历史
        *   见解
        *   报告
    *   设置提醒
*   帮助热线

据我所知，有两种方法可以实现这种结构。

第一种方法是使用多级 ListView。这样做的问题是代码非常复杂，并且通常 ListViews 具有相同数量的子节点。例如：- 在上面提到的布局中，“功能”有几个孩子，而“常见问题”没有。这在列表视图中如何工作？

* * *

第二种方法是为所有第一级选项使用按钮，然后为每个相应的子项创建单独的活动页面。所以名为“帮助”的第一页将有 3 个按钮，如图所示：-

帮助

*   常见问题
*   特征
*   帮助热线

单击任何一个后，将打开一个新页面，其中包含更多按钮或一些文本；取决于用户点击什么。

我的问题是，以上两种方法中哪一种更适合我的应用？如果除了我提到的两种方法之外还有其他方法可以做到这一点，我也会很高兴听到这一点。我感谢您的时间和耐心帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:24:14.720

或者你可以使用这个开源项目来创建一个`TreeListView`：

[https://code.google.com/p/tree-view-list-android/](https://code.google.com/p/tree-view-list-android/)

![在此处输入图像描述](https://i.stack.imgur.com/2uPWx.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:01:39.513

我可以建议以下结构：

帮助活动将包含 3 个选项卡

*   **FAQ**可以包含问题的 ListView。
*   **功能**可以包含带有[部分分隔符](http://developer.android.com/design/building-blocks/lists.html)的 ListView ：下订单、管理我的忠诚度帐户等。
*   **帮助热线**可以包含例如文本和图像。

可以使用 Eclipse[活动模板](http://developer.android.com/tools/projects/templates.html)创建此结构：选项卡或选项卡 + 滑动或滑动视图 + 标题条。

# html - 网站结构的丰富片段

> ID：15810942
> 
> 赞同：1
> 
> 时间：2013-04-04T12:19:31.043
> 
> 标签：html, seo, rich-snippets

我最近发现了丰富的摘要及其用法，使搜索引擎了解地址、人员等内容的类型……

我有一个网站，我为每个页面复制菜单（一个简单的菜单，链接到网站的所有页面〜20）由于第一个元素`body`是菜单，谷歌对所有页面进行相同的搜索预览：菜单而不是页面的实际内容。

所以我想知道是否有办法告诉搜索引擎页面的结构：例如一些元素是导航元素，一些是内容，一些是版权......描述页面的“人”结构.

我的理解是，丰富的片段旨在描述“现实生活”信息，而我正在搜索的内容类似但描述结构。

我希望这是有道理的。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:54:26.723

> 所以我想知道是否有办法告诉搜索引擎页面的结构：例如一些元素是导航元素，一些是内容，一些是版权......描述页面的“人”结构.

嗯，这就是 HTML 元素的用途。有些人为此使用术语“语义标记/HTML”。当然，这有其局限性，因为并非*每种*结构/内容类型都可以描述。

您的示例的解决方案：

*   对于导航，有[`nav`元素](http://www.w3.org/TR/html5/sections.html#the-nav-element)。
*   [由于部分](http://www.w3.org/TR/html5/sections.html#sections)和[大纲算法](http://www.w3.org/TR/html5/sections.html#outlines)（在 HTML 5.1 中也有[`main`element](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-main-element)），可以自动找到页面的主要内容。
*   版权信息应该在[`small`元素](http://www.w3.org/TR/html5/text-level-semantics.html#the-small-element)中给出，可能在[`footer`元素](http://www.w3.org/TR/html5/sections.html#the-footer-element)中。如果它是指向许可证的链接，则应使用[`license`链接类型](http://www.w3.org/TR/html5/links.html#link-type-license)。

一般来说，您应该遵循以下步骤（从结构到内容）：

1.  使用适当的 HTML 元素，尽可能详细
2.  使用定义/注册的[链接类型](http://www.w3.org/TR/html5/links.html#linkTypes)（for`link`和元素）`a``area`
3.  使用[微格式](http://microformats.org/)（`class`所有元素的属性值）
4.  使用定义/注册的[元标记](http://www.w3.org/TR/html5/document-metadata.html#the-meta-element)（在`meta`元素中）
5.  使用[RDFa (Lite)](http://www.w3.org/TR/rdfa-lite/)和/或[Microdata](http://www.w3.org/TR/microdata/)（所有元素的新属性）

[WAI-ARIA](http://www.w3.org/TR/wai-aria/)可以提供有关用于可访问性的结构的其他信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:25:41.070

这可能是您正在寻找的：

```
<meta name="description" content="A description of the page" /> 
```

此标记提供页面的简短描述。在某些情况下，此描述用作搜索结果中显示的片段的一部分。Google 将采用该字符串并将其显示在搜索结果中

# jquery - 将 Jquery 数组元素附加到匹配的列表节点

> ID：15810944
> 
> 赞同：0
> 
> 时间：2013-04-04T12:19:35.587
> 
> 标签：jquery, arrays, filtering

作为此问题的扩展： [JQuery 仅在包含关键字时才返回 DIV 及其内容](https://stackoverflow.com/questions/15809376/jquery-return-divs-and-their-contents-only-if-contains-a-keyword)

我的菜单现在被分成 2 个组件 - 顶部菜单元素和底部菜单元素基于 html 中的标记值（现在这是 TOP ）

下一个问题是顶部菜单 div 已经包含如下所示的静态代码 - 如何将新创建的项目（用于顶部菜单）与其匹配的静态结构相匹配。让我给你看一下html：

静态 HTML

```
<div id="top">
    <ul>
        <li>Category 1</li>
        <li>Category 3</li>
    </ul>
</div> 
```

这个'topelement'中的每个项目都由一个包含h3标签的周围div和一个带有列表项目的后续UL组成。

例如：第一个 h3 标记将包含文本“TOP Item 1”，指示将其放在 topElement 组中，我的目标是隔离字符串“TOP”并将后面的“Item 1”UL 与 List静态导航中的项目，因此它成为子导航元素，如下所示：

```
<div id="top">
    <ul>
        <li>Category 1
            <ul><li>item 1</li><li>item 2</li><li>item 3</li></ul>
        </li>
        <li>Category 3<ul><li>item 1</li><li>item 2</li><li>item 3</li></ul>
        </li>
    </ul>
</div> 
```

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:27:59.760

嗨 MrFitz：我已经对您的代码进行了必要的修改，这是链接

jsfiddle.net/HRs8N/6。

快乐编码:)

# asp.net-mvc - 在 MVC 中更新模型的属性

> ID：15810947
> 
> 赞同：0
> 
> 时间：2013-04-04T12:19:50.633
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first

我有一个 MVC 应用程序，其中我将我的模型定义为专辑，如下所示：

```
public int AlbumId { get; set;}
public int GenersId { get; set; }
public int ArtistId { get; set; }
public string Title { get; set; }
public String Price { get; set; }
public String AlbumArtUrl { get; set; }
public Geners Geners { get; set; }
public Artist Artist { get; set; } 
```

在这个模型中，GenersId 以前是 GenerId 然后我将它更改为 GenersId 。现在在 index 方法中它向我显示如下错误：

自数据库创建以来，支持“MusicstoreEntity”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库

MusicstoreEntity 是我创建的模型实体。请建议我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:24:16.383

看看[http://msdn.microsoft.com/en-us/data/jj591621.aspx](http://msdn.microsoft.com/en-us/data/jj591621.aspx)。

您可以：

1.  删除数据库并重新开始
2.  更改数据库初始化程序
3.  启用迁移并编写和生成代码迁移
4.  在您的配置中启用迁移并使用自动迁移

如果您只是在开发过程中对模型进行大量更改，那么您可能很乐意在每次模型更改时删除您的数据库。您可以通过设置数据库初始化程序来做到这一点：

```
Database.SetInitializer(new DropCreateDatabaseWhenModelChanges<MyContext>()); 
```

查看[http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)了解更多信息。

# php - $_POST 在 wordpress 中提交表单时返回空

> ID：15810948
> 
> 赞同：4
> 
> 时间：2013-04-04T12:19:51.460
> 
> 标签：php, wordpress, forms, post

我有一个表格：

```
<form action="<?php echo the_permalink(); ?>" method="POST">
    <input type="text" name="name" value="" placeholder="Your First and Last Name *" />
    <?php echo $firstnameError; ?>
    <input type="text" name="email" value="" placeholder="Yoyr Email" />
    <?php echo $emailError; ?>
    <br>
    <input type="text" name="company" value="" placeholder="Your Company Name" />
    <input type="text" name="phone" value="" placeholder="Your Phone number" />
    <textarea name="project" rows="4" cols="50" placeholder="Describe the scope of work and the most important features of the project *'"></textarea>
    <?php echo $addressError; ?>
    <br>
    <input type="radio" name="budget" value="1500" />
    <input type="radio" name="budget" value="2500" />
    <input type="radio" name="budget" value="5000" />
    <input type="radio" name="budget" value="10000" />
    <input type="radio" name="budget" value="100001" />
    <input type="radio" name="budget" value="not sure" />
    <input type="hidden" name="submit" value="1" />
    <input type="submit" value="SUbmit" />
</form> 
```

它对同一页面进行操作，但是当我这样做时，`print_r($_POST);`它不会打印任何内容，即`$_POST`.

这可能是什么原因？我研究了一些关于 SO 的问题，但没有一个给出我正在寻找的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:43:29.240

如果您将名称作为 Post 值传递，wordpress DOSNT 就像这样！

改变这个

```
<input type="text" name="name" value="" placeholder="Your First and Last Name *" /> 
```

到

```
<input type="text" name="thename" value="" placeholder="Your First and Last Name *" /> 
```

将**名称**更改为**名称**，保证工作！;)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T12:24:28.620

```
<form action="<?php the_permalink(); ?>" method="POST"> 
```

你不需要 echo `the_permalink()`。

这对我有用：

```
<?php print_r($_POST);?>
<form action="" method="POST">
  <input type="text" name="name" value="" placeholder="Your First and Last Name *" /><?php echo $firstnameError; ?><input type="text" name="email" value="" placeholder="Yoyr Email"/><?php echo $emailError; ?><br>
  <input type="text" name="company" value="" placeholder="Your Company Name"/><input type="text" name="phone" value="" placeholder="Your Phone number"/>
  <textarea name="project" rows="4" cols="50"placeholder="Describe the scope of work and the most important features of the project *'"></textarea><?php echo $addressError; ?><br>
  <input type="radio" name="budget" value="1500" /><input type="radio" name="budget" value="2500" /><input type="radio" name="budget" value="5000" /><input type="radio" name="budget" value="10000" /><input type="radio" name="budget" value="100001" /><input type="radio" name="budget" value="not sure" />
  <input type="hidden" name="submit"value="1"/>
  <input type="submit" value="SUbmit" />
</form> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T12:21:25.580

改变这个

```
acton="<?php echo the_permalink(); ?>" 
```

到

```
action="<?php echo the_permalink(); ?>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-29T17:06:31.227

我在我的项目中发现了同样的问题，解决方案在 $_POST 中，也许您在代码中使用小写字母，将其更改为大写字母。将 $_post 更改为 $_POST ！

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-11-20T11:58:57.173

# 解决方案：

由于请求问题，在 wordpress 网站而不是

```
<form action="http://example.com/">... 
```

您可能需要指向 .php 文件.. 示例：

```
<form action="http://example.com/index.php">... 
```

//////ps echo 会自动使用`the_permalink()`[same is:`echo get_permalink()`

# c# - Windows Phone 复选框删除线/更改字体样式

> ID：15810952
> 
> 赞同：1
> 
> 时间：2013-04-04T12:20:08.153
> 
> 标签：c#, windows-phone-7, checkbox, windows-phone-8, strikethrough

我有一个复选框列表，选中时，内容（文本）应该被删除，甚至只是为了更改选中项目的字体样式（颜色）。我正在尝试在我的代码隐藏页面中的 checkbox_Tap 事件处理程序中执行此操作。

关于如何更改字体样式或如何使其罢工的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:05:34.667

设计[指南](http://msdn.microsoft.com/en-us/library/windowsphone/design/hh202897%28v=vs.105%29.aspx)提到您应该始终使用系统字体，除非您有特定的“品牌”，尽管没有任何东西强迫您遵循这一点。

不过，[CheckBox](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.controls.checkbox%28v=vs.105%29.aspx)本身具有您可以在代码隐藏中为 FontFamily、FontSize、FontStretch、FontStyle、Foreground 等设置的属性。

在您的`CheckBox_Tap`事件处理程序中，您可以执行以下操作：

```
void CheckBox_Tap(object sender, EventArgs e)
{
   CheckBox cb = (CheckBox)sender;
   cb.FontFamily = //<your new font here>
   cb.FontStyle = // <new style here>
} 
```

至于删除线 - 看起来没有内置的方法可以做到这一点（例如，删除线没有特定的属性，您可以将其设置为 True）。

但是，我确实遇到了[**这篇文章**](https://stackoverflow.com/questions/5059254/strikeout-text-in-windows-phone-7)，并且有一个答案显示了在 XAML（我没有尝试过）中使用`Border`. 我想知道你是否可以试试这个，并将你的包装`CheckBox`在`Border`默认情况下不可见的，然后在你想要删除线时让它可见？

希望这可以帮助！

# google-maps-api-3 - 如何从谷歌地图获得最近的沿海点？

> ID：15810954
> 
> 赞同：-1
> 
> 时间：2013-04-04T12:20:10.967
> 
> 标签：google-maps-api-3

我如何在谷歌地图中获得最近的沿海点。我在 google Places API 中阅读过我们可以查询地理位置的信息。

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:00:37.310

看看 Google Elevation API

[https://developers.google.com/maps/documentation/elevation/](https://developers.google.com/maps/documentation/elevation/)

您可以请求地图上的任何位置。您可以调整此 API 以从自定义位置找到最近的 0m 高程。

# iphone - 如何在图像上下文中绘制图像和文本？

> ID：15810959
> 
> 赞同：1
> 
> 时间：2013-04-04T12:20:38.280
> 
> 标签：iphone, ios, objective-c, core-graphics

我试图在图像上绘制文本。当我不应用转换时，图像被绘制在左下角并且图像和文本都很好（图 2），但我想要左上角的图像风景。

下面是我的 drawRect 实现。

如何翻转图像以使文本和图像正确对齐？

或者

如何将图像移动到视图的左上角？

如果我不使用以下函数调用，则在视图底部创建图像。（图 2）

```
CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0.0, self.bounds.size.height);
CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0); 

 - (void)drawRect:(CGRect)rect
    {

         UIGraphicsBeginImageContext(self.bounds.size);

         // Fig 2 comment these lines to have Fig 2
         CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0.0, self.bounds.size.height);
         CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0);
        // Fig 2 Applying the above transformations results in Fig 1

         UIImage *natureImage = [UIImage imageNamed:@"Nature"];
         CGRect natureImageRect = CGRectMake(130, 380, 50, 50);
         [natureImage drawInRect:natureImageRect];

         UIFont *numberFont = [UIFont systemFontOfSize:28.0];
         NSFileManager *fm = [NSFileManager defaultManager];
         NSString * aNumber = @"111";
        [aNumber drawAtPoint:CGPointMake(100, 335) withFont:numberFont];    

        UIFont *textFont = [UIFont systemFontOfSize:22.0];
        NSString * aText = @"Hello";
        [aText drawAtPoint:CGPointMake(220, 370) withFont: textFont];
        self.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        NSData * imageData = UIImagePNGRepresentation(self.image);
        NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Image.png"];
        NSLog(@"filePath :%@", filePath);

        BOOL isFileCreated = [fm createFileAtPath:filePath contents:imageData attributes:nil];

        if(isFileCreated)
        {
            NSLog(@"File created at Path %@",filePath);
        }

    } 
```

![应用翻译时翻转图像](https://i.stack.imgur.com/vkJoQ.png)

![图片在左下角，没有翻译](https://i.stack.imgur.com/W526h.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:13:59.767

这是我用来绘制相同图像的代码（除了我没有使用自然图像）。它不在绘制矩形中，但取决于您的最终目标，最好在自定义方法中在绘制矩形之外执行此操作，并将 self.image 设置为 -(UIImage *)imageToDraw 的结果。它输出这个：

![您可以调整框架以对齐内容](https://i.stack.imgur.com/CXRNK.png)

这是代码：

```
- (UIImage *)imageToDraw
{
    UIGraphicsBeginImageContextWithOptions(CGSizeMake(320, 480), NO, [UIScreen mainScreen].scale);
    UIImage *natureImage = [UIImage imageNamed:@"testImage.png"];
    [natureImage drawInRect:CGRectMake(130, 380, 50, 50)];

    UIFont *numberFont = [UIFont systemFontOfSize:28.0];
    NSString * aNumber = @"111";
    [aNumber drawAtPoint:CGPointMake(100, 335) withFont:numberFont];

    UIFont *textFont = [UIFont systemFontOfSize:22.0];
    NSString * aText = @"Hello";
    [aText drawAtPoint:CGPointMake(220, 370) withFont:textFont];

    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return resultingImage;
}

- (NSString *)filePath
{
    NSArray * paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:@"Image.png"];
}

- (void)testImageWrite
{
    NSData *imageData = UIImagePNGRepresentation([self imageToDraw]);
    NSError *writeError = nil;
    BOOL success = [imageData writeToFile:[self filePath] options:0 error:&writeError];
    if (!success || writeError != nil)
    {
        NSLog(@"Error Writing: %@",writeError.description);
    }
} 
```

无论如何-希望这会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T13:15:11.893

您的图像参考框架是标准的 iOS 参考框架：原点位于左上角。相反，您使用 Core Text 绘制的文本具有旧的参考框架，原点位于左下角。只需对文本（而不是图形上下文）应用变换，如下所示：

```
CGContextSetTextMatrix(context, CGAffineTransformMakeScale(1.0f, -1.0f)); 
```

那么你所有的东西都会像轴原点在左上角一样布局。

如果你必须用 Core Text 来写整个句子，而不仅仅是单词，看看[这篇博文](http://blog.spacemanlabs.com/2011/08/quick-tip-drawing-core-text-right-side-up/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-07T09:40:43.887

我想说的是 drawRect 方法是用于在视图中绘制而不是创建图像。性能问题，drawInRect被调用了很多。用这个意图是更好的viewDidLoad或一些自定义方法。

我已经根据您的要求做了一个示例：

```
- (void)viewDidLoad {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

UIGraphicsBeginImageContext(self.view.bounds.size);
CGContextRef context = UIGraphicsGetCurrentContext();

CGFloat margin = 10;

CGFloat y = self.view.bounds.size.height * 0.5;
CGFloat x = margin;
UIImage *natureImage = [UIImage imageNamed:@"image"];

CGRect natureImageRect = CGRectMake(x, y - 20, 40, 40);
[natureImage drawInRect:natureImageRect];
x += 40 + margin;

UIFont *textFont = [UIFont systemFontOfSize:22.0];
NSString * aText = @"Hello";

NSMutableParagraphStyle *style = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];
style.alignment = NSTextAlignmentCenter;
NSDictionary *attr = @{NSParagraphStyleAttributeName: style,
                       NSFontAttributeName: textFont};

CGSize size = [aText sizeWithAttributes:attr];
[aText drawInRect: CGRectMake(x, y - size.height * 0.5, 100, 40)
         withFont: textFont
    lineBreakMode: UILineBreakModeClip
        alignment: UITextAlignmentLeft];

self.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

self.imageView.image = self.image;

} 
```

[![在此处输入图像描述](https://i.stack.imgur.com/FkMgO.png)](https://i.stack.imgur.com/FkMgO.png)

# ios - 仅使用 Bundle ID 更新 iOS 应用程序

> ID：15810962
> 
> 赞同：1
> 
> 时间：2013-04-04T12:20:50.477
> 
> 标签：ios, mobile

我有一个我已经开发和打包的 iOS 应用程序，我准备提交到应用程序商店。但是，客户要求我更新由另一个不相关的开发人员开发的现有应用程序，而不是提交一个新应用程序。基本上使用我的新代码。到目前为止，我得到的只是一个 Bundle ID。显然，如果我尝试在我的开发者帐户下添加新的 App ID，我会收到错误消息：“您指定的捆绑标识符已在使用中。请选择另一个。” 有没有办法解决？我看不到任何简单的方法，因为这个 Bundle 永远不会在我的配置文件中。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:34:36.843

两种方式：

1.  您需要使用他们的 iTunes Connect 凭据并上传您的应用程序
2.  他们需要将您添加为团队成员（将您的 Apple ID 作为团队成员添加到他们的帐户中）为此，他们需要邀请您加入他们的计划，并且您需要接受他们的邀请。

他们可以通过登录他们的开发者帐户来邀请您，并且：

```
Developer Account->Member Center->People->Invite a person to your team 
```

参考：

[帐户管理](https://developer.apple.com/support/ios/account-management.html)

# c# - 如何在 C# WinForms 应用程序中添加 Flash 视频？

> ID：15810963
> 
> 赞同：1
> 
> 时间：2013-04-04T12:20:51.877
> 
> 标签：c#, .net, axshockwaveflash

我想为一个大项目做一个互动培训师。我不只是制作视频教程，而是考虑在 camtasia 中制作视频，并使用 Flash 进行编辑。视频准备好后，我想将它们上传到我的服务器，C# 应用程序应该从我的服务器加载 Flash 视频。

我找到了使用 axShockwaveFlash 控件将 Flash 视频添加到 C# 的解决方案。

我可以从 youtube 加载视频，例如：

```
axShockwaveFlash1.Movie = "https://www.youtube.com/v/N6O2ncUKvlg"; 
```

但是如果我有像[http://mywebsite.com/intro.flv](http://mywebsite.com/intro.flv)这样的 flash 视频到我的服务器，我该如何加载它们？

我想我需要将它们设置在播放器或类似的东西中。

另一个想法是在 camtasia 中制作视频，然后直接从 camtasia 将它们导出到“网络”。但是，仍然不知道如何告诉控件加载它。

我只是想做这个，这样下载视频会有点困难。我知道它们也可以通过这种方式轻松下载，但比仅将它们上传到 youtube 更安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:47:11.933

[这](http://www.c-sharpcorner.com/UploadFile/deepak.sharma00/how-to-play-flash-in-windows-forms-application-using-C-Sharp/)是一篇关于如何在 WinForms 应用程序中加载 Flash 的扩展文章

简而言之：

*   将工具箱引用添加到 COM Component Shockwave Flash 对象（位于 C:\Windows\System32\Macromed\Flash 中）
*   将控件 Shockwave Flash 对象添加到窗体
*   设置属性 Movie: [control].Movie = "[path]\animation.swf";
*   开始影片：[control].Play();

# jquery - 在事件上制作标签

> ID：15810965
> 
> 赞同：0
> 
> 时间：2013-04-04T12:20:58.713
> 
> 标签：jquery, jquery-ui, tabs

我正在使用 $("#tabs").tabs();

但是我在页面上有一个按钮，点击按钮第三个选项卡应该被选中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:23:45.233

使用选项卡的活动选项 ... [doc here](http://api.jqueryui.com/tabs/#option-active) 试试这个

```
 $('#buttonID').click(function(){
     $("#tabs").tabs({ active: 2 }); //2 because it is zero-based index of the panel 
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:31:29.303

使用初始化选项卡后

```
$(".tabs").tabs(); 
```

您可以使用以下代码在按钮单击时设置活动选项卡。

```
$(".tabs").tabs( "option", "active", 2 ); 
```

# javascript - 如何忽略 JSLint 中的一些 HTML 标签？

> ID：15810967
> 
> 赞同：1
> 
> 时间：2013-04-04T12:21:04.660
> 
> 标签：javascript, line-breaks, jslint

我正在使用'nobr' HTML 标签来避免表单中的换行符，但是，JSLint 给了我错误

是否可以让 JSLint 忽略一些 HTML 标签？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:43:40.437

JSLint 没有提供这样做的方法，但是如果您能够修改代码并将必要的标记添加到[列表中](https://github.com/douglascrockford/JSLint/blob/d9c3940eaef07669324843394fae6c01f3146d6d/jslint.js#L751)，则非常简单：

```
html_tag = {
    a: {},
    // etc... add yours in here
} 
```

但是，请注意 HTML 解析在[最新版本](https://github.com/douglascrockford/JSLint/commit/267939b9168419312782a8533e35c60243215d56)的 JSLint 中已被删除，因此我建议您升级并且不要使用为验证 JavaScript 而设计的工具来验证标记。

# hadoop - s3distcp：无法从空字符串创建路径

> ID：15810968
> 
> 赞同：5
> 
> 时间：2013-04-04T12:21:06.687
> 
> 标签：hadoop, amazon-web-services, amazon-s3, hdfs

从 S3 到 HDFS 运行 s3distcp 时：

```
 sudo -u hdfs hadoop jar /usr/lib/hadoop/lib/s3distcp.jar --src s3n://workAAAA-KKKK-logs/production-logs/Log-XXXX-click/Log-XXXXX-click-2013-03-27_06-21-19_i-7XXb2x39_00037.gz  --dest hdfs:///test/ 
```

我得到以下异常。

我的路径语法 (s3n:// ; hdfs:///) 有问题吗？有没有人遇到过这个问题？

```
13/04/04 12:10:52 INFO s3distcp.S3DistCp: Using output path 'hdfs:/tmp/96a8e57b-4c68-406c-b4ca-bf212de12d93/output'
13/04/04 12:10:53 INFO s3distcp.FileInfoListing: Opening new file: hdfs:/tmp/96a8e57b-4c68-406c-b4ca-bf212de12d93/files/1
Exception in thread "main" java.lang.IllegalArgumentException: Can not create a Path from an empty string
        at org.apache.hadoop.fs.Path.checkPathArg(Path.java:91)
        at org.apache.hadoop.fs.Path.<init>(Path.java:99)
        at org.apache.hadoop.fs.Path.<init>(Path.java:58)
        at com.amazon.external.elasticmapreduce.s3distcp.FileInfoListing.getOutputFilePath(FileInfoListing.java:155)
        at com.amazon.external.elasticmapreduce.s3distcp.FileInfoListing.add(FileInfoListing.java:111)
        at com.amazon.external.elasticmapreduce.s3distcp.FileInfoListing.add(FileInfoListing.java:78)
        at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.createInputFileListS3(S3DistCp.java:122)
        at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.createInputFileList(S3DistCp.java:60)
        at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.run(S3DistCp.java:529)
        at com.amazon.external.elasticmapreduce.s3distcp.S3DistCp.run(S3DistCp.java:216)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:70)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:84)
        at com.amazon.external.elasticmapreduce.s3distcp.Main.main(Main.java:12)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:208) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-24T08:16:39.880

如果您需要，有一种方法可以请求特定文件。您可以使用**--copyFromManifest**选项，它允许您为 s3distcp 提供一个包含所有文件路径的清单文件（即使在不同的文件夹中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T14:32:50.517

当您尝试写入即使存在但没有访问权限的路径时，也会出现此问题。

当您尝试在不存在的 Redshift 模式中写入时，也会出现这种情况。

# asp.net - 在 Drupal 中嵌入代码

> ID：15810975
> 
> 赞同：0
> 
> 时间：2013-04-04T12:21:27.827
> 
> 标签：asp.net, drupal, embed, query-string

我不熟悉 Drupal，但我们的客户报告说我们提供的嵌入内容不适用于 drupal。

我们的嵌入代码将是

`<iframe id="ivideoframe" src="https://mywebsite/Player.aspx?q=IsahXh4JBPTq9sc%252b2j4zmaJvfFIagPpqAIBQIZpQTGUxPzzL8g44uVrsRGGRbDnSk5IO3kBeGI%252b211on7BfXBL6UjrXe%252fI%252bhftSaavtHay8%253d" height="419" width="665" toolbar="no" scrolling="no" frameborder="0"></iframe>`

我从客户那里了解到的是查询字符串字母“？q”与drupal有一些问题。有人能帮我理解这段代码在drupal中使用时如何导致错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T17:19:48.013

如果您将此嵌入代码放入一个块或某种类型的 CCK 字段（正文、文本等）中，您需要确保“文本格式”设置为完整 HTML 或允许使用完整的html。

我发现，即使是完整的 HTML 有时也会在 iFrame 中出现问题。我们发现最佳实践是实际创建您自己的文本格式，称为“原始 HTML”，它允许所有内容，并且根本不尝试格式化。您可以在 [Admin --> Configuration --> Content authoring --> Text Formats] 中创建它。

然后，一旦您创建了格式，只需在包含 iFrame 嵌入代码的字段上选择该自定义格式。

# r - “ls()”的不同行为取决于 knitr Rmd 文档中的 cache=T 或 cache=F

> ID：15810976
> 
> 赞同：1
> 
> 时间：2013-04-04T12:21:28.910
> 
> 标签：r, knitr

下面是简单的test.rmd knitr文件

```
```{r}
opts_chunk$set(cache=TRUE)
```

```{r}
x <- 1
```

```{r}
x
ls()
``` 
```

当从 Unix shell 处理时：

```
R -e 'library(knitr) ; knit("test.Rmd")'
pandoc -s -f markdown -t latex test.md -o test.tex
pdflatex test.tex 
```

生成具有以下输出的 pdf 文件 (test.pdf)：

```
x <- 1

x

## [1] 1

ls()

## character(0) 
```

也就是说，最后一个代码块的输出首先显示了调用的内容，`x`而`ls()`调用并没有显示`x`在工作空间中调用了一个对象。`cache`如果我通过删除第一个代码块来禁用它，那么会按我的预期`ls()`显示。`x`我无法从文档中弄清楚`ls()`何时`opts_chunk$set(cache=TRUE)`使用这种行为的原因。`ls()`有人可以向我解释为什么会发生这种情况，以及在使用和不使用缓存的情况下我如何以相同的方式表现？

谢谢！！

罗伯特。ps：这是我`sessionInfo()`附加到`knit()`电话的时候：

```
R version 2.15.1 (2012-06-22)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF8       LC_NUMERIC=C             
 [3] LC_TIME=en_US.UTF8        LC_COLLATE=en_US.UTF8    
 [5] LC_MONETARY=en_US.UTF8    LC_MESSAGES=en_US.UTF8   
 [7] LC_PAPER=C                LC_NAME=C                
 [9] LC_ADDRESS=C              LC_TELEPHONE=C           
[11] LC_MEASUREMENT=en_US.UTF8 LC_IDENTIFICATION=C      

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] knitr_1.1

loaded via a namespace (and not attached):
[1] digest_0.6.3   evaluate_0.4.3 formatR_0.7    stringr_0.6.2  tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:43:24.403

更新：此问题已在[knitr 开发版](https://github.com/yihui/knitr#readme)中修复。下面的答案可以忽略。

* * *

您可以将此视为错误。这个问题我想了很久，因为已经报道过几次了。我将在下一个版本（1.2）中解决它。

至于原因，是因为`knitr`当 时使用了单独的空环境来评估代码`cache = TRUE`，而这个环境的父框架默认是全局环境，所以`x`在这个空环境中是可以访问的，但并不真正存在。希望下面的代码能更好地解释它：

```
x = 1
env = new.env(parent = parent.frame())
ls(env)  # character(0), nothing there
exists('x', envir = env, inherits = FALSE) # FALSE
env$x  # NULL
get('x', envir = env)  # 1 
```

# mysql - 如何使用嵌套连接优化这个 mysql 查询？

> ID：15810977
> 
> 赞同：0
> 
> 时间：2013-04-04T12:21:34.357
> 
> 标签：mysql, sql, query-optimization

以下是我需要优化的查询。

```
SELECT
        UPPER(IFNULL(op.supplier_payment_method,s.default_payment_method)) AS Payment_Method,
        op.supplier_payment_date AS Payment_Date,
        Date_format(IFNULL(op.supplier_payment_date,op.ship_date),'%M %Y') AS Payment_Month,
        s.supplier_name AS Farm,
        op.sub_order_id AS Order_num,
        Date_format(op.ship_date,'%b-%d-%Y') AS Ship_Date,
        op.farm_credit AS Farm_Credit,
        op.credit_memo AS Credit_Memo,
        op.credit_description AS Credit_Description,
        opb.boxes AS Box_Type,
        CONCAT('$',FORMAT(op.box_charge,2)) AS Box_Charge,
        op.invoice_num AS Invoice_num,
        CONCAT('$',FORMAT(op.invoice_amt,2)) AS Invoice_Amt,
        CONCAT('$',FORMAT(op.total_invoice_amt,2)) AS Total_Invoice_Amt,
        CONCAT(op.UM_qty,' ',op.UM_type) AS St_Bu_Qty,
        op.PO_Product_Name AS Invoice_desc,
        CONCAT('$',FORMAT((op.price_um*op.um_qty),2)) AS Cost_product_cms,
        op.supplier_invoice_note AS Supplier_Invoice_Notes,
        CONCAT('$',FORMAT(op.cms_invoice_cost,2)) AS CMS_Invoice_diff,
        CONCAT('$',FORMAT(op.total_farm_cost,2)) AS Farm_Cost
    FROM 
        orders_products op
        INNER JOIN 
            suppliers s ON s.supplier_id = op.supplier_name
        LEFT JOIN
            (
                SELECT 
                    sub_order_id, 
                    GROUP_CONCAT(CONCAT(box_type_qty,' ',bo.box_option_name) SEPARATOR ', ') AS boxes
                FROM
                    order_products_boxes opb
                    INNER JOIN box_options bo ON bo.id=opb.box_type_id
                GROUP BY
                    opb.sub_order_id
            ) opb ON opb.sub_order_id = op.sub_order_id
    WHERE
        op.order_active=0
        AND op.ship_date>='2013-03-01'
        AND op.ship_date<='2013-04_01'
    ORDER BY op.ship_date DESC 
```

如您所见，查询由 4 个表组成，每个表包含大约 20k-30k 行。因此，只要我添加子查询，查询就会变得异常缓慢。仅获取 500 行记录大约需要 1.5 分钟。有没有办法在单个查询中加快速度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:25:41.830

```
SELECT
    UPPER(IFNULL(op.supplier_payment_method,s.default_payment_method)) AS Payment_Method,
    op.supplier_payment_date AS Payment_Date,
    Date_format(IFNULL(op.supplier_payment_date,op.ship_date),'%M %Y') AS Payment_Month,
    s.supplier_name AS Farm,
    op.sub_order_id AS Order_num,
    Date_format(op.ship_date,'%b-%d-%Y') AS Ship_Date,
    op.farm_credit AS Farm_Credit,
    op.credit_memo AS Credit_Memo,
    op.credit_description AS Credit_Description,
     (
            SELECT 
                GROUP_CONCAT(CONCAT(box_type_qty,' ',bo.box_option_name) SEPARATOR ', ') 
            FROM
                order_products_boxes opb
                INNER JOIN box_options bo ON bo.id=opb.box_type_id
            GROUP BY
                opb.sub_order_id
        ) AS Box_Type,
    CONCAT('$',FORMAT(op.box_charge,2)) AS Box_Charge,
    op.invoice_num AS Invoice_num,
    CONCAT('$',FORMAT(op.invoice_amt,2)) AS Invoice_Amt,
    CONCAT('$',FORMAT(op.total_invoice_amt,2)) AS Total_Invoice_Amt,
    CONCAT(op.UM_qty,' ',op.UM_type) AS St_Bu_Qty,
    op.PO_Product_Name AS Invoice_desc,
    CONCAT('$',FORMAT((op.price_um*op.um_qty),2)) AS Cost_product_cms,
    op.supplier_invoice_note AS Supplier_Invoice_Notes,
    CONCAT('$',FORMAT(op.cms_invoice_cost,2)) AS CMS_Invoice_diff,
    CONCAT('$',FORMAT(op.total_farm_cost,2)) AS Farm_Cost
FROM 
    orders_products op
    INNER JOIN 
        suppliers s ON s.supplier_id = op.supplier_name
    LEFT JOIN

                order_products_boxes opb (
                INNER JOIN box_options bo ON bo.id=opb.box_type_id
        ) opb ON opb.sub_order_id = op.sub_order_id
WHERE
    op.order_active=0
    AND op.ship_date>='2013-03-01'
    AND op.ship_date<='2013-04_01'
ORDER BY op.ship_date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:55:24.663

预先连接子框选项的左连接查询首先查询整个数据库，然后仅连接到您为外部 WHERE 子句限制的条件内的那些。这可能需要更多的努力，但是将相同的外部标准拉入您的内部查询应该会有很大帮助。至于在每行的基础上进行字段级 sql-select 可能会成为性能杀手。

您只需要在“FROM”子句处进行更改...

```
from
   orders_products op
      INNER JOIN suppliers s 
         ON op.supplier_name = s.supplier_id 
      LEFT JOIN
         ( SELECT 
                 opb2.sub_order_id, 
                 GROUP_CONCAT(CONCAT(box_type_qty,' ',bo.box_option_name) SEPARATOR ', ') AS boxes
              FROM
                 orders_products op2
                    JOIN order_products_boxes opb2
                       on op2.sub_order_id = opb2.sub_order_id
                       INNER JOIN box_options bo 
                          ON opb2.box_type_id = bo.id
              WHERE
                     op2.order_active = 0
                 AND op2.ship_date >= '2013-03-01'
                 AND op2.ship_date <= '2013-04_01'
              GROUP BY
                 opb2.sub_order_id  ) opb 
         ON op.sub_order_id = opb.sub_order_id
WHERE
       op.order_active = 0
   AND op.ship_date >= '2013-03-01'
   AND op.ship_date <= '2013-04_01' 
```

# magento - Magento 将自定义标签添加到产品视图

> ID：15810982
> 
> 赞同：1
> 
> 时间：2013-04-04T12:21:44.033
> 
> 标签：magento, tabs

我在整个互联网上搜索并没有找到解决方案。

我想做的是做一个表格信息系统，类似于在 magento 现代中存在的用于产品描述和其他附加信息的信息系统。我设法用 javascript 完成了功能选项卡。但问题是，在我添加了我在下面描述的标签后，整个页面崩溃了，所以我不知道我做错了什么。

Tabs.phtml 中的代码：

```
<ul class="product-tabs">
    <?php foreach ($this->getTabs() as $_index => $_tab): ?>
        <?php //if($this->getChildHtml($_tab['alias'])): ?>
            <li id="product_tabs_<?php echo $_tab['alias'] ?>" class="<?php echo !$_index?' active first':(($_index==count($this->getTabs())-1)?' last':'')?>"><a href="#" onclick="return false;"><?php echo $_tab['title']?></a></li>
        <?php //endif; ?>
    <?php endforeach; ?>
</ul>
<?php foreach ($this->getTabs() as $_index => $_tab): ?>
    <?php //if($this->getChildHtml($_tab['alias'])): ?>
        <div class="product-tabs-content" id="product_tabs_<?php echo $_tab['alias'] ?>_contents"><?php echo $this->getChildHtml($_tab['alias']) ?></div>
    <?php //endif; ?>
<?php endforeach; ?> 
```

所以我试图在产品视图标签中添加几个标签。这是我在 xml 文件中的代码：

```
<block type="catalog/product_view_tabs" name="product.tabs" as="info_tabs" template="catalog/product/view/tabs.phtml">
                <action method="addTab" translate="title" module="catalog">
                    <alias>description</alias>
                    <title>Definition</title>
                    <block>catalog/product_view_description</block>
                    <template>catalog/product/view/description.phtml</template>
                </action>

                <action method="addTab" translate="title" module="catalog">
                    <alias>technical</alias>
                    <title>Technical Specification</title>
                    <block>catalog/product_view_technical</block>
                    <template>catalog/product/view/technical.phtml</template>
                </action>

                <action method="addTab" translate="title" module="catalog">
                    <alias>shipping</alias>
                    <title>Shipping</title>
                    <block>catalog/product_view_shipping</block>
                    <template>catalog/product/view/shipping.phtml</template>
                </action>

            </block> 
```

这是我得到的错误：

```
 Stack trace:
#0 /home/mihaip/work/magentotest/app/code/core/Mage/Core/Model/Layout.php(495): Mage::throwException('Invalid block t...')
#1 /home/mihaip/work/magentotest/app/code/core/Mage/Core/Model/Layout.php(437): Mage_Core_Model_Layout->_getBlockInstance('catalog/product...', Array)
#2 /home/mihaip/work/magentotest/app/code/core/Mage/Catalog/Block/Product/View/Tabs.php(59): Mage_Core_Model_Layout->createBlock('catalog/product...', 'shipping')
#3 [internal function]: Mage_Catalog_Block_Product_View_Tabs->addTab('shipping', 'Shipping', 'catalog/product...', 'catalog/product...')
#4 /home/mihaip/work/magentotest/app/code/core/Mage/Core/Model/Layout.php(348): call_user_func_array(Array, Array)
#5 /home/mihaip/work/magentotest/app/code/core/Mage/Core/Model/Layout.php(214): Mage_Core_Model_Layout->_generateAction(Object(Mage_Core_Model_Layout_Element), Object(Mage_Core_Model_Layout_Element)) 
```

当我采取*技术*和*运输*行动时，一切正常......我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T01:04:10.240

**Magento app/code/core/Mage/**中不存在这些模块、块及其类：

```
<block>catalog/product_view_technical</block>
<block>catalog/product_view_shipping</block> 
```

如果您没有在自己的包中创建具有这些路径和类的自定义模块，那么这就是这些错误的根源。您创建了模板视图，但尚未在块标记之间指定的路径中创建控制器。

你有两个选择：

1.  创建一个模块来处理您的自定义请求
2.  重用现有控制器为您提供数据并在您指定的块部分中指定它们的路径

[从 Alan Storm http://alanstorm.com/magento_controller_hello_world](http://alanstorm.com/magento_controller_hello_world)中了解有关此概念的更多信息

# search - SharePoint 2013 查询特定内容类型

> ID：15810983
> 
> 赞同：0
> 
> 时间：2013-04-04T12:21:46.550
> 
> 标签：search, web-parts, sharepoint-2013

我试图让搜索内容 Web 部件显示来自网站集中各种公告列表的公告聚合。

我使用“添加应用程序”然后“公告”创建了公告列表，所以我假设这是 ContentType 公告的列表？我在列表中添加了一个标题为“这是一个测试”的新公告。

在我将搜索内容 Web 部件添加到页面（出于测试目的，在与公告列表相同的站点中的页面）并将 Web 部件上的查询设置为：

```
ContentType:0x0104* 
```

没有返回任何结果。要检查公告是否已被爬虫索引，请将查询更改为：

```
Title:this is a test 
```

现在显示两个结果，一个是 csv，另一个是以 ../DispForm.aspx?ID=1 结尾的公告。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T23:37:17.017

使用 ContentTypeId。我知道默认情况下 ContentType 以这种方式显示，但这可能是一个错误。只需尝试 ContentTypeId。

# css - 固定菜单不水平滚动

> ID：15810984
> 
> 赞同：0
> 
> 时间：2013-04-04T12:21:47.520
> 
> 标签：css, layout, scroll, css-position

我有一个固定的菜单 - [http://mylandscapes.splintderteal.com/](http://mylandscapes.splintderteal.com/)

菜单未水平滚动 - 页面放大或在移动设备上查看时会出现问题

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:27:31.617

`position: fixed`顾名思义，固定窗口中的位置。如果它不尊重垂直滚动，它当然也不尊重水平滚动。您应该使用媒体查询：

```
@media screen and (max-width: 980px)
{
    #header
    {
        position: absolute;
    }
} 
```

这只是一个提示。您可能需要自定义或扩展此代码。但它给了你一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:27:24.903

`CSS3` `Media Queries`您可以通过您的 css轻松实现您的期望。

实际上你没有使用`Media Queries`这就是为什么你的菜单没有根据屏幕尺寸调整......

对于如何使用 CSS3 媒体查询，请阅读下面提到的文章，它们真的很有帮助。

[**标准设备的媒体查询**](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

[**如何使用 CSS3 媒体查询来创建您网站的移动版本**](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

# java - 删除 XML android 中的注释

> ID：15810985
> 
> 赞同：0
> 
> 时间：2013-04-04T12:21:49.647
> 
> 标签：java, android, xml, comments

我在 eclipse 中工作，我想在我的代码中删除我的 XML 文件中的所有注释。

当我的 XML 文件中没有注释时，我的应用程序可以工作。但是，只要我的 XML 文件中有任何注释，我的应用程序就会停止工作。

我的问题是：在 android java 中，有没有办法用代码删除我的 XML 文件中的所有注释？

我在谷歌上搜索了一些关键字，但我没有找到任何关于 java 的东西，只有 C# 或 VB。在那些语言中，他们使用类似“节点”的东西（我并没有真正理解它是如何工作的）

我加入了一个 XML 文件示例，其中有我想要删除的注释类型。

```
<?xml version="1.0" encoding="utf-8"?>

<pma_xml_export version="1.0" xmlns:pma="http://www.phpmyadmin.net/some_doc_url/">

    <database name="mvc">

       <!-- XML commentaries that i want to remove -->

        <table name="hrd">
            <column name="No_HRD">1</column>
            <column name="Nom_HRD">H?tel Fleuritel</column>
            <column name="Rue_HRD"> 1 Bd Jean Delautre</column>
            <column name="CP_HRD">08000</column>
            <column name="Ville_HRD"> Charleville-M?zi?re</column>
            <column name="Tel_HRD"> 03 24 37</column>
            <column name="Fax_HRD">03 24 37 5</column>
            <column name="Email_HRD"> </column>
            <column name="Image_HRD">1</column>
            <column name="Site_HRD"> http://www.hotel-fleuritel.com</column>
            <column name="No_Categorie_HRD">H</column>
            <column name="No_Ville_HRD">1</column>
        </table>

        <!-- XML commentaries that i want to remove -->

        <table name="hrd">
            <column name="No_HRD">2</column>
            <column name="Nom_HRD">Premi?re Classe CHARLEVILLE-MEZIERES</column>
            <column name="Rue_HRD">Route de la Francheville ZAC Du MOULIN-LE-BLANC</column>
            <column name="CP_HRD">08000</column>
            <column name="Ville_HRD"> Charleville-M?zi?re</column>
            <column name="Tel_HRD">08 92 70 7</column>
            <column name="Fax_HRD"> 03 24 37</column>
            <column name="Email_HRD">charlevillemezieres@premiereclasse.fr </column>
            <column name="Image_HRD">3</column>
            <column name="Site_HRD">http://www.premiere-classe-charleville-mezieres.fr</column>
            <column name="No_Categorie_HRD">H</column>
            <column name="No_Ville_HRD">1</column>
        <!-- XML commentaries that i want to remove -->
        </table>
        <!-- XML commentaries that i want to remove -->
    </database>
</pma_xml_export> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:30:09.960

你不必把它们弄出来。你可以跳过它们。它在android开发站点上进行了解释。在[这个](http://developer.android.com/training/basics/network-ops/xml.html)页面上。

如果您转到“阅读提要”部分，您会看到如果它不将其识别为标签，它将跳过它。如果你这样做，它只会跳过评论。我最近在自己的项目中实现了这一点。所以我可以确认它有效。

# grid - 重新配置后调用 Extjs 4 Grid 渲染器

> ID：15810986
> 
> 赞同：1
> 
> 时间：2013-04-04T12:21:51.843
> 
> 标签：grid, extjs4, renderer

我面临的问题是EXTJs网格。

我使用 grid.reconfigure(store,cols) 方法重新配置网格

我在网格中为我的列有一个自定义渲染器，在渲染器中我调用函数来根据内容设置列的宽度

我面临的问题是，即使在重新配置方法上调用了我的渲染器，但我的 colWidth 没有在第一次设置。但是在刷新网格时它被设置了。

举个例子

```
 someFunction:function(grid,store){
    cols.push({
        text: //something,
        dataIndex : //something
        renderer : renderer,    //function call to renderer
        width:100,
    });
    grid.reconfigure(store,cols);}

    renderer:function(value){
    colwidth(value);
    return value; }

    colwidth:function(value){
        // compute content length
        return 50;
    } 
```

# mysql - 在 MYSQL 5.1 中使用 @DECLARE

> ID：15810987
> 
> 赞同：0
> 
> 时间：2013-04-04T12:21:53.897
> 
> 标签：mysql, sql, pivot

只是在 MYSQL Server 5.1 上玩一些 sql 语句我已经问过一个问题如何对两个表进行特定计数（见[这里](https://stackoverflow.com/questions/15807635/sql-count-over-2-tables-by-a-type/15807676?noredirect=1#comment22483634_15807676)），我还找到了一个答案如何转置我的结果（见[这里](https://stackoverflow.com/questions/8429442/transposing-a-table-in-sql-server/14308741?noredirect=1#comment22486399_14308741)）但我不能用它我的本地 MYSQL Server 5.1。

这是表一：测试

```
id|name|test_type
-------------
1|FirstUnit|1
2|FirstWeb|2
3|SecondUnit|1 
```

第二张表：test_type

```
id|type
--------
1|UnitTest
2|WebTest 
```

以下结果将写入“yourtable”（临时表）

```
type|amount
-----------
UnitTest|2
WebTest|1 
```

最后我想要的是：

```
UnitTest|WebTest
-----------------
2|1 
```

（问题是我认为，最后一部分来自一个 MS-SQL 示例，所以它不适用于 MYSQL）

这是我的 sql 语句：

```
--create a temporary table
create temporary table IF NOT EXISTS yourtable
(
test_type varchar(255),
amount varchar(255)
);

--make a selecten into the temporary table 
INSERT INTO yourtable
SELECT
    t.test_type ,
    COUNT(*) AS amount

FROM test_types AS t
   JOIN test AS te ON t.id= te.test_type
GROUP BY test_type
ORDER BY t.test_type;

--just for debugging
select * from yourtable;

-- transpose result
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Type) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' from 
             (
                select Type, Amount,
                  row_number() over(partition by Type order by Type, Amount) rn
                from yourtable
            ) x
            pivot 
            (
                max(Amount)
                for Type in (' + @cols + ')
            ) p '

execute(@query)

--drop temporary table
drop table yourtable; 
```

我无法运行要转置临时结果的最后一部分。我收到“声明”错误

> /* SQL 错误 (1064): 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'DECLARE @cols AS NVARCHAR(MAX), @query AS NVARCHAR(MAX) 附近使用正确的语法
> 
> select @cols = ' at line 2 *//* 2 行受影响，找到 2 行。4 个查询中的 3 个的持续时间：0,000 秒。*/

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:41:09.667

MySQL 没有*数据透视*函数，因此您必须使用带有`CASE`表达式的聚合函数将数据从行转换为列：

```
select 
  sum(case when tt.type = 'UnitTest' then 1 else 0 end) UnitTest,
  sum(case when tt.type = 'WebTest' then 1 else 0 end) WebTest
from test t
inner join test_type tt
  on t.test_type = tt.id 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/c5159/3)。

如果`types`要转换为未知数量的列，可以使用准备好的语句生成动态 SQL：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN tt.type = ''',
      type,
      ''' THEN 1 else 0 END) AS `',
      type, '`'
    )
  ) INTO @sql
FROM test_type;

SET @sql 
  = CONCAT('SELECT ', @sql, ' 
            from test t
            inner join test_type tt
              on t.test_type = tt.id');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/c5159/6)

# jquery - Django ajax jquery 文件上传

> ID：15810988
> 
> 赞同：5
> 
> 时间：2013-04-04T12:21:55.383
> 
> 标签：jquery, ajax, django, file-upload, django-views

我的 django 项目中的文件上传有问题。所以问题是：如何通过 jquery ajax 将文件传递给 django 视图？

这一刻我有

**脚本：**

```
<script type='text/javascript'>
$(document).ready(function() {
    var csrf_token = $('input[name="csrfmiddlewaretoken"]').val();
    $('#upload').click(function() {
        $.ajax({
            csrfmiddlewaretoken: csrf_token,
            type: 'POST',
            url : '../ajax/upload_file/',
            enctype: "multipart/form-data",
            data  : {
                'file': $('#file').val()
            },
            success: function(data) {
                console.log(data)
            }
        })
    })
})
</script> 
```

**模板：**

```
 <form method="" action="" name='upload_form' id='upload_form' >{% csrf_token %}
    <input type='file' name='file' id='file' />
    <input type='button' value='Upload' id='upload'/>
 </form> 
```

并**查看：**

```
@csrf_exempt
@xhr_to_json
def verifyFile(request):
    if request.is_ajax():
        file = request.FILES['file']
        return {'message': file}
    else: 
        return HttpResponseForbidden() 
```

现在我得到

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 111,      in get_response
response = callback(request, *callback_args, **callback_kwargs)
  File "/usr/local/lib/python2.7/dist-packages/django/views/decorators/csrf.py", line 77, in wrapped_view
    return view_func(*args, **kwargs)
 File "/home/vova/git/LV-  083_LAMP.git/Testcase_Project/Testcase_Project/views/decorator.py", line 6, in wrapper
   data = func(*args, **kwargs)
  File "/home/vova/git/LV-   083_LAMP.git/Testcase_Project/Testcase_Project/views/testcase.py", line 96, in verifyFile
    request.FILES['file']
  File "/usr/local/lib/python2.7/dist-packages/django/utils/datastructures.py", line     258, in __getitem__
    raise MultiValueDictKeyError("Key %r not found in %r" % (key, self))
MultiValueDictKeyError: "Key 'file' not found in <MultiValueDict: {}>" 
```

没有外部库可以做到吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T12:55:47.503

试试这个：

```
def upload(request):
  id = request.POST['id']
  path = '/var/www/pictures/%s' % id
  f = request.FILES['picture']
  destination = open(path, 'wb+')
  for chunk in f.chunks():
    destination.write(chunk)
  destination.close()
  # return status to client
  ... 
```

你可以在这里阅读完整的教程：http: [//www.laurentluce.com/posts/upload-to-django-with-progress-bar-using-ajax-and-jquery/](http://www.laurentluce.com/posts/upload-to-django-with-progress-bar-using-ajax-and-jquery/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T13:07:23.620

```
@csrf_exempt
@xhr_to_json
def verifyFile(request):
    if request.is_ajax():
        file = request.FILES['file']
        return HttpResponse(file)
    else: 
        return HttpResponseForbidden()

<form method="POST" action="" name='upload_form' id='upload_form' enctype="multipart/form-data">
    {% csrf_token %}
    <input type='file' name='file' id='file' />
    <input type='button' value='Upload' id='upload'/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-15T17:24:41.147

//html

```
<form  id = "form_id"   method = "POST" action = "#" enctype="multipart/form-data"> {% csrf_token %}
                        {{modelform_filefield}}
                        <input type = "submit" value="Post"/>
                    </form> 
```

//javascript代码

```
<script>
    $(function(){
    $("#form_id").submit(function(){
    var data = new FormData($('#form_id').get(0));
                $.ajax({
                    type:"POST",
                    url: "your_upload_url",
                    data : data,
                    cache: false,
                    contentType: false,
                    processData: false,
                    success: function(data){
    alert('success');
                    },
                    failure: function(){
                        $(this).addClass("error");
                    }
                });
                return false;
    });
    });
</script> 
```

这将从客户端提取文件和表单数据。URL 链接到处理和存储文件的视图。

//views.py

```
def upload(request):
    if request.is_ajax():
        form = <modelFormName>(request.POST, files=request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponse("form saved")
        else:
            return HttpResponse("form invalid")

    return HttpResponse("not a ajax request") 
```

这应该可以解决问题

# mysql - 在记录保存到mysql问题之前 获取ID

> ID：15810990
> 
> 赞同：0
> 
> 时间：2013-04-04T12:21:58.020
> 
> 标签：mysql, max

我想为这些属性保存属性和图像。在填写属性表时，用户选择要上传的图像。

有两个表：property 和 images；在保存图像时，我`propertyid`也通过了。

运行 MAX(id) 的查询给了我 0。我输入它的方式是将其递增 1 并将其作为 prop_id 保存在 images 表中

```
select IFNULL(max(id),0) as id from property 
```

`prop_id=1`我从属性表中删除了所有数据，现在当我保存数据时，我在图像表中看到，而`propertyid`在属性表中的实际是 11（因为删除了 10 条记录）......这显然是一个问题。

在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:44:56.237

不要使用 MAX(id) 或类似的“魔法”，您会在这里遇到并发问题（即 2 个用户同时使用同一页面）。插入后，使用 MySQL 的 LAST_INSERT_ID() 或编程语言中的等效函数（例如 PHP 中的 mysql_insert_id()），然后使用 ID 将属性链接到图像。

> 我现在在保存数据时从属性表中删除了所有数据，我看到图像表中的 prop_id=1 和不动产 id=11（以前删除了 10 条记录）...这显然是一个问题。

这不是问题。您可以预期不同表中的 ID 最终会不同步；不要与之抗争。只需从一张桌子到另一张桌子，例如

```
CREATE TABLE property (
  int id primary key auto_increment,

  ... more columns ...
)

CREATE TABLE image (
  int id primary key auto_increment,
  int property_id REFERENCES property(id),

  ... more columns ...
) 
```

或者反过来，取决于你的使用。

# sql - 复杂的sql查询，取列数据并根据条件将其插入另一个表

> ID：15810994
> 
> 赞同：0
> 
> 时间：2013-04-04T12:22:14.097
> 
> 标签：sql

我手头有一项任务，这显然超出了我的 mysql 技能 :) 我正在学习...

我有两张桌子。

```
1\. import
2\. users 
```

import 包含分配的列，例如 id、user_id、user_email ... users 包含 user_id 和 user_email

我需要迁移用户内容以导入。具体来说，我在导入时缺少 user_id。但它包含 user_email。

所以我需要考虑一个语句，我从两个表中匹配 user_email 并使用匹配中的 user_id 更新导入表。

到目前为止，我有这个：

```
SELECT u.user_id, u.user_email, i.user_email FROM users u, import i WHERE i.user_email = u.user_email; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:25:07.130

`import`基本上你可以通过加入来直接更新表`user`。

这是在`MySQL`.

```
UPDATE `import` a
        INNER JOIN users b
            ON a.user_email = b.user_email 
SET     a.user_id  = b.user_id 
```

为了`SQL Server`

```
UPDATE  a
SET     a.user_id  = b.user_id 
FROM    [import] a
        INNER JOIN users b
            ON a.user_email = b.user_email 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:28:43.180

如果您想根据地址匹配用户，确保他们是唯一的，那么您可以像这样加入他们：

```
UPDATE import
        SET import.user_id = users.user_id
    FROM import
    INNER JOIN users ON import.user_email = users.user_email 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:29:31.667

你在正确的轨道上；那行得通；您可能需要根据需要选择其他字段。您也可以使用 JOIN 语句；然后您可以决定如何处理用户表；你在插入吗？更新？

我认为标准 SQL 支持 INSERT INTO SELECT，不确定更新，但您的 DBMS 可能有支持它的 SQL 扩展...

# git - Git post-receive 不工作

> ID：15810996
> 
> 赞同：0
> 
> 时间：2013-04-04T12:22:15.397
> 
> 标签：git

我是 git 新手。我在服务器上创建了一个裸 git repo。我的系统中有一个本地 git repo。提交后，在推送到主仓库之前，我推送到服务器仓库。
`date >> /home/d.txt`
在服务器 repo 中，当我尝试使用 ssh 将脚本运行到服务器时，以下代码被添加到 hooks/post-receive中`sh post-receive`，脚本运行良好。但是当我执行本地 git push 时，脚本没有运行。即没有插入日期。
post-receive 的权限设置是`-rwxr-xr-x 1 root root`
**更新：**
我将代码插入到 hooks/post-receive 文件中，并通过执行我的本地 git`echo "uploading"`来更改权限。`chmod +x hooks/post-receive`当我执行本地 git push 时，不会触发 post-receive 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:45:14.083

它需要被调用`post-receive`...即删除.sh 后缀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T14:17:09.297

确保您的 post-receive 脚本位于服务器的 .git/hooks 中，而不是客户端的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-16T19:46:37.597

您需要确保 post-receive 脚本的所有者是用户**git**。还要检查**git**帐户下的脚本，可能是git用户没有写入**/home/d.txt的权限**

# mysql - Opened_files 非常大

> ID：15810998
> 
> 赞同：0
> 
> 时间：2013-04-04T12:22:30.417
> 
> 标签：mysql

`Opened_files`如果我有我的那么大的原因是`table_open_cache=200000 and max_connections = 20000`什么？

```
 mysql> SHOW STATUS LIKE 'open%';
    +--------------------------+---------+
    | Variable_name            | Value   |
    +--------------------------+---------+
    | Open_files               | 618     |
    | Open_streams             | 0       |
    | Open_table_definitions   | 668     |
    | Open_tables              | 1003    |
    | Opened_files             | 2721799 |
    | Opened_table_definitions | 0       |
    | Opened_tables            | 0       |
    +--------------------------+---------+

cat /proc/sys/fs/file-max
1048576

limit.conf
mysql soft nofile 40960
mysql hard nofile 90240

mysqld soft nofile 40960
mysqld hard nofile 90240 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T16:58:16.597

如果我没记错`Opened_files`的话，类似于自上次状态刷新以来创建的文件描述符的计数器。

在这里，您当前打开的文件数是 618。您可以使用`lsof`.