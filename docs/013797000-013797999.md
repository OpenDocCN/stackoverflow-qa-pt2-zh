# StackOverflow 问答 13797000-13797999

# sql - TSQL 查询计算百分比

> ID：13797002
> 
> 赞同：1
> 
> 时间：2012-12-10T07:59:09.210
> 
> 标签：sql, sql-server, tsql

我有 2 张桌子：

*   表 A ( `id as int, M as int,...`)
*   表 B ( `Aid as int , P as int,...`)

A 和 B 之间存在关系`A.id = B.Aid`。父表是A，子表是B，这意味着A中的一行可能在B中有多行。

我需要编写一个返回以下信息的 T-SQL 查询：

*   A的一些列和B中的相关行
*   并`(M / Sum(p)) as 'Percent'`为 A 的每一行计算这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:02:37.637

你可以这样做：

```
SELECT
  a.M,
  (a.M / pSum)
FROM tableA a
INNER JOIN
(
  SELECT aid, SUM(p) pSum
  FROM TableB
  GROUP BY aid
) b ON A.id = B.Aid; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/e1231/1)

**更新：**如果您想从 中返回更多的一列，其中每个父记录`tableb`的总和，您可以像这样加入更多时间：`p``tablea``TableB`

```
SELECT
  a.M,
  b.p,
  (a.M / groupedb.pSum)
FROM tableA a
INNER JOIN TableB b ON A.id = B.Aid
INNER JOIN
(
  SELECT aid, SUM(p) pSum
  FROM TableB
  GROUP BY aid
) groupedb ON A.id = groupedb.Aid; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!3/e1231/2)

但这将使计算来自表中每个记录的`tableB`冗余中每个父记录的冗余的总和。`tableA``B`

# css - IE 破坏了我的网站设计

> ID：13797003
> 
> 赞同：0
> 
> 时间：2012-12-10T07:59:12.213
> 
> 标签：css, internet-explorer, google-chrome, firefox

我的 wordpress 主题在 chrome 、 Firefox 和 Opera 中看起来是正确的（截至 2012 年 12 月的最新版本）

当我在 IE 9 中查看它时，即使打开了兼容性视图，它看起来也不正确。

带有菜单的蓝色条看起来太粗了

链接在这里。 [http://www.kyaniworld.biz/products/sunrise/](http://www.kyaniworld.biz/products/sunrise/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:37:20.607

答案很简单！您可以通过创建`css`仅定位 IE 来找到解决方案。所以这里有一个有用的[链接](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)。您不必担心为用户添加的下载数据。`css`仅当从 IE 浏览器打开站点时，才会下载针对 IE的文件。希望我有所帮助！

PS：提示：您应该在所有 IE 版本中验证您的网站（我降到 IE 7）。每个版本都有它自己的错误和问题。

[编辑] 刚刚遇到这个。我所有问题的答案：“css”重置：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
width: auto;
height: auto;
margin: 0;
padding: 0;
border: 0;
outline: 0;
background: transparent;
} 
```

# ios - 检测 UIScrollView 是否正在滚动

> ID：13797005
> 
> 赞同：20
> 
> 时间：2012-12-10T07:59:16.887
> 
> 标签：ios

我正在寻找检测是否（而不是何时） a`UIScrollView`正在滚动。

IE

```
BOOL isScrolling = myscrollview.scrolling; 
```

我将如何实施呢？`.dragging`使用时`.decelerating`不适用`setContentOffset:animated:`。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-25T16:29:21.227

*编辑：自iOS 14以来，此方法似乎已停止工作。我会尝试看看是否可以找到替代方法，如果可以，我将更新此答案。*

* * *

这可能是一种有点狡猾的方式，但我以前在我的代码中使用过它，它还没有让我失望。:)

**迅速**

```
let isScrolling = scrollView.layer.animation(forKey: "bounds") != nil 
```

**Objective-C**

```
BOOL isScrolling = [scrollView.layer animationForKey:@"bounds"] != nil; 
```

除了`self.contentOffset`a 的偏移量`UIScrollView`也存储在 the 的`bounds.origin`属性中`UIView`（我猜是因为它在较低级别的代码中更方便一些）。当您调用 时`[setContentOffset:animated:]`，它会将其传递给`UIScrollView`as `CABasicAnimation`，从而操纵`bounds`属性。

当然，如果滚动视图本身的形状正在动画，则此检查也将返回 true。在这种情况下，您可能需要实际将边界对象拉出动画 ( `[CAAnimation toValue]`) 并进行手动比较以查看`origin`其自身是否发生了变化。

这不是最优雅的解决方案，但我喜欢尽可能避免使用滚动视图委托。特别是如果有问题的滚动视图可能是一个子类，它显式地将其委托作为其公共 API 的一部分出售。:)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-05-22T13:16:05.327

不是一个非常干净的解决方案..但应该是最可靠的：

```
var isScrolling = false

func scrollViewWillBeginDragging(_ scrollView: UIScrollView) {
    isScrolling = true
}

func scrollViewDidEndDragging(_ scrollView: UIScrollView, willDecelerate decelerate: Bool) {
    if !decelerate { scrollViewDidEndScrolling(scrollView) }
}

func scrollViewDidEndDecelerating(_ scrollView: UIScrollView) {
    scrollViewDidEndScrolling(scrollView)
}

func scrollViewDidEndScrollingAnimation(_ scrollView: UIScrollView) {
    scrollViewDidEndScrolling(scrollView)
}

func scrollViewDidEndScrolling(_ scrollView: UIScrollView) {
    isScrolling = false
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-10T08:03:53.483

我通常通过在`scrollViewWillBeginDragging:`和`scrollViewDidEndDragging:willDecelerate:`事件中设置一个布尔变量来做到这一点。

[UIScrollView 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-22T03:59:01.940

```
- (void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView; 
```

使用标志来保存当前的滚动状态？它只能解决 setContentOffset:animated: 问题。

“滚动”只是一种效果，有很多方法可以使滚动视图“滚动”，例如连续设置内容偏移量。所以这个问题应该没有答案。

# sql - 使用 SQL CASE 语句但返回相同的列值

> ID：13797008
> 
> 赞同：2
> 
> 时间：2012-12-10T07:59:32.550
> 
> 标签：sql, case

我是 SQL 新手，遇到以下问题：

我在一个名为性能的表中有以下列：

```
numbers
-------
13.80
4.9
32.1
0.00
12
0.00 
```

我想选择这个表，但是0.00的地方，我想返回-。所以选择后应该是：

```
numbers
-------
13.80
4.9
32.1
-
12
- 
```

我尝试使用如下案例：

```
select
    numbers, 
    case numbers
        when 0.00 then '-' 
    end as numbers
from 
    Performance 
```

我知道这是不正确的，另一个工作中的扳手是数字列数据类型是`decimal(18, 2)`

有人可以帮我做这个选择吗？就像我提到的，我还是 SQL 的新手，但我认为`CASE`这不是正确的选择。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:03:47.223

您需要将您的数字转换为`varchar(19)`（18 + 小数分隔符）。

```
select case numbers 
         when 0 
         then '-' 
         else cast(numbers as varchar(19)) 
       end as numbers 
```

# codeigniter - 如何在 CodeIgniter 中访问默认控制器配置

> ID：13797011
> 
> 赞同：1
> 
> 时间：2012-12-10T07:59:39.340
> 
> 标签：codeigniter, routing, controller, default

我想知道是否可以从控制器或库中检索 config/route.php 中设置的默认控制器？

我已经尝试过`$this->load->config('route')`，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:05:06.520

您可以通过以下方式访问默认控制器；

```
$this->router->default_controller 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T08:04:52.363

尝试以下行。希望它对你有用。

```
$this->router->fetch_class(); 
```

# asp.net-web-api - 映射到两种不同的集合类型时 AutoMapper 抛出异常

> ID：13797012
> 
> 赞同：0
> 
> 时间：2012-12-10T07:59:50.387
> 
> 标签：asp.net-web-api, automapper-2, ablecommerce

我正在编写一个使用 AutoMapper 进行对象映射的 ASP.NET Web API 服务。我正在针对 AbleCommerce 购物车软件构建此服务。有问题的服务（目标）类跟踪用户及其地址。

```
public class UserModel
{
    public int UserID { get; set; }
    ...
    public List<AddressModel> Addresses { get; set; }
}

public class AddressModel 
{
    public int AddressID { get; set; }
    public int UserID { get; set; }
    ...
    // Contains some of the fields from AbleCommerce Address
} 
```

我的来源是 AbleCommerce 包中的`User`和`Address`类。我已经包含了祖先类的类声明，因为我相信使用泛型约束可能存在问题，但我并不完全确定。

```
public class User: IPersistable
{
    public int UserId { get; set; }
    ...
    public AddressCollection Addresses 
    {
        get
        {
            // Calls an internal method which creates a new instance
            // of AddressCollection and loads the addresses for the
            // user from the database.
            ...
            return _Addresses;
        }
    }
}

public class Address : IPersistable 
{ 
    public int AddressId { get; set; }
    public int UserId { get; set; }
    ... 
}

public class AddressCollection : PersistentCollection<Address> { ... }

public class PersistentCollection<T> : SortableCollection<T> where T : IPersistable { ... }

public interface IPersistable { ... } 
```

从 AbleCommerce 类到我的服务类的映射按预期工作。只要我忽略映射配置中不需要的属性，从我的服务类映射到 AbleCommerce 类就可以了。但是，对于 Addresses 属性，我不知道如何解决`AddressCollection`AbleCommerce`User`类和`List<AddressModel>`我的服务`UserModel`类之间的差异（从 AutoMapper 的角度来看）。

当我测试映射配置时，我得到的异常是：

```
AutoMapper.AutoMapperConfigurationException : The following property on AlfredModel.Models.Classes.AddressModel cannot be mapped: 
    Addresses
Add a custom mapping expression, ignore, add a custom resolver, or modify the destination type AlfredModel.Models.Classes.AddressModel.
Context:
    Mapping to property Addresses from System.Object to AlfredModel.Models.Classes.AddressModel
    Mapping to property Addresses from CommerceBuilder.Users.AddressCollection to System.Collections.Generic.List`1[[AlfredModel.Models.Classes.AddressModel, AlfredModel, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
    Mapping to property User from CommerceBuilder.Users.User to AlfredModel.Models.Classes.UserModel
    Mapping from type CommerceBuilder.Orders.Basket to AlfredModel.Models.Classes.BasketModel
Exception of type 'AutoMapper.AutoMapperConfigurationException' was thrown.
   at AutoMapper.ConfigurationStore.DryRunTypeMap(ICollection`1 typeMapsChecked, ResolutionContext context)
   at AutoMapper.ConfigurationStore.DryRunTypeMap(ICollection`1 typeMapsChecked, ResolutionContext context)
   at AutoMapper.ConfigurationStore.DryRunTypeMap(ICollection`1 typeMapsChecked, ResolutionContext context)
   at AutoMapper.ConfigurationStore.DryRunTypeMap(ICollection`1 typeMapsChecked, ResolutionContext context)
   at AutoMapper.ConfigurationStore.AssertConfigurationIsValid(IEnumerable`1 typeMaps)
   at AutoMapper.ConfigurationStore.AssertConfigurationIsValid()
   at AutoMapper.Mapper.AssertConfigurationIsValid()
   at AlfredModelTests.AlfredMapConfigurationTest.Maps_Configured_Correctly() in C:\Users\ntruick\Documents\Visual Studio 2010\Projects\AlfredModel\AlfredModelTests\AlfredMapConfigurationTest.cs:line 21 
```

这让我很困惑，因为`AddressModel`该类没有名为`Addresses`. 我显然错过了一些东西。任何建议、建议或澄清将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:29:06.790

我相信我已经找到了解决方案。经过大量挖掘（以及一些赞赏的赞成票），我发现我需要通过为用户地址集合创建一个类型转换器来自己定义映射：

```
public class UserAddressesTypeConverter : 
    ITypeConverter<PersistentCollection<Address>, List<AddressModel>
{
    var source = (PersistentCollection<Address>)context.SourceValue;
    var result = new List<AddressModel>();

    foreach (Address address in source.Cast<Address>().ToList()
        result.Add(Mapper.Map<AddressModel>(address));

    return result;
} 
```

我的困惑是基于我试图`AddressCollection`直接使用类来完成与此类似的事情。似乎泛型约束`PersistentCollection`不允许后代类正确解析为`Address`类型。一旦我更改了源代码，它只需要一个简单的 LINQ`Cast`就可以让一切顺利进行。

# android - 位图工厂不显示图像

> ID：13797013
> 
> 赞同：0
> 
> 时间：2012-12-10T07:59:52.467
> 
> 标签：android

我用我的手机相机拍摄一张照片，然后将其设置为我的图像视图。我遇到了内存不足的错误，所以我决定使用下面的代码来压缩我的位图。错误消失了，但我的位图也消失了。我的图像视图不显示任何内容。我究竟做错了什么。以下代码在我的 onActivityResult 中。

```
InputStream input = getContentResolver().openInputStream(
                            data.getData());
                    //Decode image size
                        BitmapFactory.Options o = new BitmapFactory.Options();
                        o.inJustDecodeBounds = true;
                        BitmapFactory.decodeStream(input,null,o);

                        //The new size we want to scale to
                        final int REQUIRED_SIZE=40;

                        //Find the correct scale value. It should be the power of 2.
                        int scale=16;
                        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
                            scale*=2;

                        //Decode with inSampleSize
                        BitmapFactory.Options o2 = new BitmapFactory.Options();
                        o2.inSampleSize=scale;
                        bitmap=BitmapFactory.decodeStream(input, null, o2);

                        firstImageButton.setImageBitmap(bitmap); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:10:24.760

我刚刚完成了一个类似的例程。我发现我需要在两次调用 decodeStream 之间关闭然后重新打开我的输入流，否则它不会重新定位到流的开头。

此外，您不需要在第二次调用 decodeStream 时使用新的 BitmapFactory.options，只需将 o.inJustDecodeBounds 设置为 false 和 o.inSampleSize=scale 并使用它而不是 o2。

```
InputStream input = getContentResolver().openInputStream(data.getData());

//Decode image size
BitmapFactory.Options o = new BitmapFactory.Options();
o.inJustDecodeBounds = true;
BitmapFactory.decodeStream(input,null,o);
input.close();

//The new size we want to scale to
final int REQUIRED_SIZE=40;

//Find the correct scale value. It should be the power of 2.
int scale=16;
while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
    scale*=2;

//Decode with inSampleSize
input = getContentResolver().openInputStream(data.getData());
o.inJustDecodeBounds=false;
o.inSampleSize=scale;
Bitmap bitmap=BitmapFactory.decodeStream(input, null, o);

firstImageButton.setImageBitmap(bitmap); 
```

# ios - 删除 UITextView 中的字符填充

> ID：13797020
> 
> 赞同：0
> 
> 时间：2012-12-10T08:00:16.060
> 
> 标签：ios, xcode

![在此处输入图像描述](../Images/c0ed2e8133948ede919872c4e01b4f44.png)

我想删除这个填充，因为我从 textView.contentSize.height 得到了错误的高度（仅限日文/英文）。

你有我的解决方案或代码吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:22:38.717

我遇到了同样的问题并解决了

```
 YourTextField.contentInset = UIEdgeInsetsMake(-4,-8,0,0); //you can modify these values to best fit your text. 
```

# jquery - jQuery 基本滑块保持正确

> ID：13797021
> 
> 赞同：1
> 
> 时间：2012-12-10T08:00:21.520
> 
> 标签：jquery, slider

当您检查以下站点时：

[滑块示例](http://www.grafisign.nl/CAKE/simple/news/index.php)

当您单击按钮 << 'left' 时，一切正常。但是，当您单击右键时，滑块内容会在结束时消失，而不是返回到第一张幻灯片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:05:34.767

您忘记在第 104 行关闭标签（a 标签）。

# jquery - jQuery - click() 没有在 IE7 中触发 div 元素

> ID：13797022
> 
> 赞同：2
> 
> 时间：2012-12-10T08:00:32.513
> 
> 标签：jquery, internet-explorer-7, click, css

我正在构建一个“添加标签”小部件，但在让点击处理程序在 IE7 中触发时遇到问题。该小部件的工作方式几乎与在 Stack Overflow 中添加标签一样......当您键入时，它会建议标签。当用户点击“添加标签框”时，文本输入需要聚焦。我的代码适用于除 IE7 之外的所有浏览器......由于某种原因，点击处理程序没有被触发。我感觉这与我的 CSS 和/或 HTML 以及 IE7 中的框模型问题有关。

这是我的jsfiddle：（使用IE并打开IE7（浏览器和文档）

[http://jsfiddle.net/YYgy8/2/](http://jsfiddle.net/YYgy8/2/)

这是标记的示例：

```
<div id="tags">
    <div id="editor">
        <ul id="taglist">
            <li class="tag">
                <span class="tagname">Tag1</span>
            </li>
            <li class="tag">
                <span class="tagname">Tag2</span>
            </li>
            <li id="tag-editor">
                <input type="text" id="tag-editor-input">
            </li>
        </ul>
        <div class="clear"></div>
    </div>
</div> 
```

并且使用 jquery，我向编辑器添加了一个单击处理程序，该处理程序应该关注文本输入：

```
$('#editor').click(function(){
    $('#tag-editor-input').focus();
    alert ('click!');
}); 
```

这是我的CSS：

```
#tags {margin:1em;}
#editor {
    border:1px solid #ccc; background-color:#fff;
    padding:0.2em 0.4em;
    margin-bottom:1em;
}
#taglist {
    list-style:none; padding:0; margin:0;
}
#taglist > li {
    margin:2px 5px 2px 0; 
    float:left;
}
.tag {
    padding:0.2em; 
    border:1px solid #ccc; 
    background-color:#F2F1B3;
    margin-right:5px;
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    font-size:1em;
    line-height:1.3em;
    position:relative;
}
.tagname {
    display:block;
    max-width:100px;
    min-width:30px;
    white-space: nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}
#tag-editor {
    border:1px solid #eee;
}
#tag-editor-input {
    border:0; 
    padding:0.2em; 
    font-size:1em; 
    line-height:1.3em; 
    width:10px; 
    max-width:100px; 
    min-width:10px;
    -webkit-text-size-adjust: none;
    outline:none;
}

.clear {clear:both;} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:36:02.147

更新`#editor`类（`overflow:hidden;`已添加）：

```
#editor {
    border:1px solid #ccc; background-color:#fff;
    padding:0.2em 0.4em;
    margin-bottom:1em;
    overflow:hidden;
} 
```

现在它对我有用：http: [//jsfiddle.net/YYgy8/10/](http://jsfiddle.net/YYgy8/10/)

# iphone - 如何拉伸 UIImage 以适合文本？

> ID：13797025
> 
> 赞同：1
> 
> 时间：2012-12-10T08:00:48.013
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

我正在我的应用程序中实现一个标签系统，为此我需要标签的背景图像和覆盖该图像的文本。问题是 - 我如何拉伸图像以“适合”文本？“数学”可以正常工作，但像“经济学”这样的词就不行，因为它会与背景图像重叠。

这是我的标签的样子：

![](../Images/5725eba8fbd337b2816b462d6c80bcb9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:15:15.053

您可以找到字符串宽度（在您的情况下可能是 UILabel），如下所示

```
CGSize expectedLabelSize = [yourString sizeWithFont:yourLabel.font 
                        constrainedToSize:maximumLabelSize 
                        lineBreakMode:yourLabel.lineBreakMode]; 
```

一旦知道文本长度，您就可以使用它并将背景设置为可拉伸图像。

```
UIImage *strechableImage = [[UIImage imageNamed:@"tagImage"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 3, 3, 25)] 
```

插图（大写）是（顶部、左侧、底部、顶部）并定义未缩放/拉伸的区域（例如圆角）。

来自 Apple 文档

在图像的缩放或调整大小期间，被帽子覆盖的区域不会被缩放或调整大小。相反，每个方向上未被帽覆盖的像素区域从左到右和从上到下平铺，以调整图像大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:13:38.680

我最好的猜测是使用可拉伸图像，这些只是普通图像，您可以在其中设置 iOS 可以拉伸的部分。

这些图像很容易制作：

```
UIImage *imageTemp = [UIImage imageNamed:@"ButtonBackground.png"];

// For iOS 4.3 and lower
UIImage *stretchableImage = [imageTemp stretchableImageWithLeftCapWidth:20 topCapHeight:10];

// if you are targetting iOS 5 and higher
UIImage *stretchableImage = [imageTemp resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 20, 20)]; 
```

和只是示例`20`，`10`它们可能对您的图像有所不同。如果这些是`UIButton`您可以将可拉伸图像设置为按钮的背景，它将随着按钮正确增长。如果您从代码中设置文本，`UILabel`则可以使用`sizeWithFont:constrainedToSize:`来计算字符串的 with。然后设置正确的图像尺寸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T08:19:25.433

您首先需要计算文本的预期大小，然后相应地为图像提供框架。如果需要，您可以使用具有大写宽度和大写高度的图像。这是代码片段。

```
 CGSize maximumLabelSize = CGSizeMake(600,52);  // maximum possible size
    CGSize expectedLabelSize = [brandName sizeWithFont:[UIFont fontWithName: @"Helvetica-Bold" size:20] 
                                     constrainedToSize:maximumLabelSize 
                                         lineBreakMode:UILineBreakModeTailTruncation]; 

    UIImage *centerStretchedImage =[[UIImage imageNamed:@"yourImage.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0];

    CGRect frame = CGRectMake(x, y, expectedLabelSize.width+20,52);
    UIImageView *dynamicImage = [[UIImageView alloc] initWithFrame:frame];
    dynamciImage.image = centerStretchedImage; 
```

# c# - 如何在c#中获取局域网连接机器的所有IP地址

> ID：13797028
> 
> 赞同：-5
> 
> 时间：2012-12-10T08:01:03.923
> 
> 标签：c#

如何找到使用 LAN 网络连接的机器的所有 IP 地址。

```
foreach (NetworkInterface netInterface in NetworkInterface.GetAllNetworkInterfaces())
        {
            IPInterfaceProperties ipProps = netInterface.GetIPProperties();
            foreach (UnicastIPAddressInformation addr in ipProps.UnicastAddresses)
            {
                listBox1.Items.Add(addr.Address.ToString());
            }
        } 
```

这是我正在使用的代码.. 但此代码仅返回我的本地 IP 和 127.0.0.1。找不到其他ip地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:06:08.287

一般来说，你不能。您可以尝试 ping IP 地址范围内的所有机器（例如本地子网），但某些活动机器可能无法响应 ping。您可以尝试连接到开放端口（Web 服务器端口、Windows 文件共享端口等），您可能会找到一些机器，但不要期望找到所有机器。如果网络受到监控，你可能看起来像个黑客。

根据您的网络，您可以尝试反向 DNS 查找 IP 地址范围。这适用于使用 DHCP 并将其绑定到本地 DNS 服务器的情况，这很常见，因为它是一种通过名称访问主机的方式，即使动态 IP 地址发生更改也是如此。当它起作用时，这种方法将返回带有主机名的活动租约（因此某些机器可能当前不活动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:12:57.980

命名空间中有一个[`Ping`](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx)类[`System.Net`](http://msdn.microsoft.com/en-us/library/gg145039.aspx)。但是只有在目标计算机没有运行防火墙的情况下才能使用它。

```
using System.Net

NetworkInformation.Ping newping = new NetworkInformation.Ping();
NetworkInformation.PingReply reply = newping.Send("192.168.1.1");
if (reply.Status == NetworkInformation.IPStatus.Success)
{
    // Target computer is an active host
} 
```

如果计算机有防火墙，则不能在交换机上使用简单的网络管理协议。

# git - 如何使用 python 代码克隆 git 存储库？

> ID：13797029
> 
> 赞同：2
> 
> 时间：2012-12-10T08:01:05.037
> 
> 标签：git, python-2.7

我是 Git 新手。我想用 python 脚本克隆我的远程 github 存储库（git://github.com/eltejaee/BIC2.git）。我知道“dulwich”和“gitpython”是合适的，但我不能克隆或拉取它们。克隆我的远程 github 存储库的最佳 python 代码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:15:42.800

有几个模块可以使用[git-python](https://gitorious.org/git-python)或[pygit](https://gitorious.org/pygit/mainline)

如果您只想克隆/拉取，则可以使用系统命令：

```
os.system("git clone ...")
os.system("git pull") 
```

如果您还想要命令的输出，我建议您使用[子进程](http://docs.python.org/2/library/subprocess.html)

对于 Github，您可以使用[python-github](https://github.com/jmoiron/python-github)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:04:38.867

github有一个python包装器

[https://github.com/jmoiron/python-github](https://github.com/jmoiron/python-github)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T07:08:31.637

我的解决方案非常简单直接。它甚至不需要手动输入释义/密码。

这是我的完整代码：

```
import os
import sys

path        =   "/path/to/store/your/cloned/project" 
clone       =   "git://github.com/eltejaee/BIC2.git" 

os.system("sshpass -p your_password ssh user_name@your_lhost")
os.chdir(path) # Specifying the path where the cloned project has to be copied
os.system(clone) # Cloning

print "\n CLONED SUCCESSFULLY.! \n" 
```

# php - 如何在本地主机上使用 php 获取硬盘序列号

> ID：13797030
> 
> 赞同：4
> 
> 时间：2012-12-10T08:01:06.290
> 
> 标签：php, javascript, hardware

有没有办法我可以在本地主机上使用 php 或 javascript 获取硬盘序列号或机器序列号？

我们可以在 cmd 中使用以下命令来获取它

```
wmic DISKDRIVE GET SerialNumber 
```

或机器序列号由此

```
wmic bios get serialnumber 
```

用 php 或 javascript 可以吗？php中的一些东西

```
<?php

echo DISKDRIVE GET SerialNumber //** some thing like this on local host

?> 
```

需要在本地主机上给克林特一个项目，我希望没有人在其他计算机上访问它（在 php 中）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T08:46:08.953

你当然可以使用

```
shell_exec('wmic DISKDRIVE GET SerialNumber 2>&1') 
```

或者

```
shell_exec('wmic bios get serialnumber 2>&1') 
```

if`wmic`已安装在服务器上，并且您的 PHP 有权运行它。

这`'2>&1'`部分是从[这里的建议](http://php.net/manual/en/function.shell-exec.php#106250)中使用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T08:03:10.320

不可能。没有什么可以破坏浏览器沙箱，否则将是一个很大的安全问题。

唯一的可能是通过 ActiveX ，但仍然需要签名和更改 IE 设置。（不跨平台，不跨浏览器）

# css - CSS div 内联

> ID：13797032
> 
> 赞同：0
> 
> 时间：2012-12-10T08:01:23.447
> 
> 标签：css, html, css-float

我目前正在建立一个联系表格。代码 ：

```
<div id="contact_form">
            <form action="contact.php" method="post">

                <div class="contact_fields">
                    <div class="cf1">NAME</div>
                    <div class="cf2">
                        <input type="text" name="name" />
                     </div>
                </div>

                <div class="contact_fields">     
                    <div class="cf1">EMAIL</div>
                    <div class="cf2">
                        <input type="text" name="name" />
                     </div>
                </div> 

                 <div class="contact_fields">     
                    <div class="cf1">PHONE</div>
                    <div class="cf2">
                        <input type="text" name="name" />
                     </div>
                </div> 

            </form>
        </div> 
```

和 CSS ：

```
#contact_form
{
    padding:12px 20px 10px 20px;
    background:#f5f5f5;
    overflow:hidden;
    width:700px;
}

.contact_fields
{
    width:580px;
    margin-top:20px;    
}

.cf1
{
    width:80px;
    float:left;
    color:#333333;
    font-family: Calibri, Candara, Segoe, "Segoe UI", Optima, Arial, sans-serif;
    font-size:14px;
}
.cf2
{
    width:280px;
    float:left;

}
.cf2 input
{
    height:25px;
    width:280px;
} 
```

但是 div`contact_fields`是内联的，而不是带中断的 div（请参阅我附上的图片。）![联系表](../Images/42b70f50302de3b68b7222825701b99b.png)请给我一个解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:03:11.740

摆脱你的`float: left;`

[**演示**](http://jsfiddle.net/BV3vf/)

```
.cf2 {
    width:280px;
    float:left; <----Here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:16:52.640

现在定义你的父母`.contact_fields` `overflow:hidden;`

**像这样**

```
.contact_fields
{
overflow:hidden;    
} 
```

***[演示](http://jsfiddle.net/BV3vf/3/)***

# iphone - 将 ViewControllers 的视图添加为子视图

> ID：13797035
> 
> 赞同：2
> 
> 时间：2012-12-10T08:01:32.267
> 
> 标签：iphone, ios, viewcontroller

我将 ViewControllers 视图作为子视图添加到另一个 ViewController，

例子 ：

在 FirstScreen viewcontroller 我这样做，

```
 [self.view addSubview:self.secondScreen.view]; 
```

一旦我从 FirstScreen 中删除它，我就会这样做

```
 [self.secondScreen.view removeFromSuperView];
          self.secondScreen=nil; 
```

但是虽然调用了添加子视图**ViewDidLoad**方法，但没有调用 removeFromSuperView **ViewDidUnLoad**方法。

我的问题

1）一旦我将实例 self.secondScreen 设置为 nil，我的 secondScreen 中的所有对象都会被释放

2）这样做是否安全，这样我就不会收到任何泄漏或内存警告

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:07:46.303

假设您的应用从 iOS 5.0 开始支持，您需要将其添加为，

```
[self addChildViewController:self.secondScreen];
[self.view addSubview:self.secondScreen.view]; 
```

同样，对于删除，您可以使用`removeFromParentViewController`然后从 superview 中删除。在此处查看[苹果文档。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/addChildViewController%3a)

`ViewDidUnLoad`从 iOS 6.0 起已弃用，不会被调用。在此处查看[文档。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIViewController/viewDidUnload)

关于你的问题，

> 1）一旦我将实例 self.secondScreen 设置为 nil，我的 secondScreen 中的所有对象都会被释放

一旦你完成了`self.secondScreen`类，一旦你将它设置为 nil，它就会开始释放这个类中的对象。如果您使用 ARC，则不必担心释放问题。操作系统会处理这些事情。

> 2）这样做是否安全，这样我就不会收到任何泄漏或内存警告

是的，如果您使用 ARC，这很好。对于非 ARC，您需要确保已在此类中正确释放所有变量。确保在这种情况下保留/释放都是平衡的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:07:36.517

当视图从 ViewController 中移除时不会调用 ViewDidUnload，当视图从内存中卸载时会调用它。关于此的 iOS 文档有以下警告：

> 当控制器的视图从内存中释放时调用。（在 iOS 6.0 中已弃用。在内存不足的情况下不再清除视图，因此永远不会调用此方法。）

请注意“已弃用”和“从未调用此方法”这一事实。

# node.js - 无法处理 node.js 中的 POST 请求

> ID：13797039
> 
> 赞同：0
> 
> 时间：2012-12-10T08:02:11.007
> 
> 标签：node.js, http, post, get, http-headers

我有一个任务要写一个`http`服务器`node.js`，这就是为什么我不能使用这个`http`模块，你很快就会看到。无论如何，我需要能够同时收听 GET 和 POST 请求。我理解它的方式 GET 只触发`data`事件，并发布火灾`data`和`end`. 这是我的代码：

```
function Server(resourceMap, rootFolder) {

    this.resourceMap = resourceMap;
    this.rootFolder = rootFolder;

    function connectionHandler(socket) {
        console.log('server connected');
        console.log('CONNECTED: ' + socket.remoteAddress +':'+ socket.remotePort);
        socket.setEncoding('utf8');
        socket.on('data',function(data) {
                var re = new RegExp("^( *)(GET)", "i");                 
                if (data.match(re) != null) {
                    console.log("Handling GET request");
                    router.route(data,socket,handle,resourceMap,rootFolder);
                }
                else {
                    (function() {
                        var postData = data;
                        socket.on('data',function(data) {
                            postData += data;
                        });
                        console.log(postData);
                        socket.on('end',function(postData) {
                            console.log("END");
                            console.log("Handling POST request");
                            router.route(postData,socket,handle,resourceMap,rootFolder);
                        });
                    });
                }
            });
    }

    this.server = net.createServer(connectionHandler);

    this.port = undefined;

    this.startServer = function(port) { //Maybe change backlog for security reasons
        this.port = port;
        this.server.listen(port, function() { //'listening' listener add handle object here
            console.log('server bound');});
    }
} 
```

`GET`请求工作得很好。With `POST`It 甚至不进入匿名函数。

任何想法为什么以及如何解决它？

编辑：已解决 - 我定义了函数但没有调用它:) 如果您对我的设计有任何意见，我很想听听，因为我是 node.js 和 JavaSCript 的新手

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:08:11.890

常见错误：**定义了一个函数但没有调用。**

您可以：

为正则表达式去掉`function`else 之后的关键字

或添加`()`后功能（更推荐）

# php - 使用 GCM 推送通知 - PHP

> ID：13797040
> 
> 赞同：1
> 
> 时间：2012-12-10T08:02:10.917
> 
> 标签：php, android, push-notification, google-cloud-messaging

我正在尝试使用 GCM 实现推送通知，Besically 我正在尝试使用我的 PHP 服务器将通知发送到 GCM，该服务器会将其发送到我的 android 应用程序。

我在[androidhive](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/ "使用 GCM 的 Android 推送通知")使用过代码！

该设备已成功注册，但我的设备上没有收到任何通知，Google 控制台上也看不到任何内容。

我没有收到来自使用的链接[https://android.googleapis.com/gcm/send](https://android.googleapis.com/gcm/send "https://android.googleapis.com/gcm/send")或[https://android.googleapis.com的任何回复](https://android.googleapis.com "https://android.googleapis.com")

这种方法有什么问题吗？

任何人都可以建议我任何真实的来源吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:59:17.347

意识到有些人在实施 GCM 时遇到了问题。我决定发布解决方案。

[AndroidHive](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)上的示例运行良好。它只是正确配置的问题。

替换 Android 应用中的项目 ID。（您可以从您的 google 控制台链接获取项目 ID，即 google.com/apis/console/#project: **xxxxxxxxxxxx** :access）

替换服务器应用程序的 PHP Server(config.php) **密钥上的服务器 API 密钥（带 IP 锁定）**。您可以从[WhatIsMyIP](http://www.whatismyip.com/)获取您的 IP 。

**浏览器应用程序（带有引用）的密钥**将不起作用。

# java - JavaFX 应用程序的 ANT JAR 文件

> ID：13797041
> 
> 赞同：3
> 
> 时间：2012-12-10T08:02:13.250
> 
> 标签：java, ant, javafx-2

[我已经在前面的帮助下](https://stackoverflow.com/questions/13742149/compile-javafx-code-using-ant)使用 Build Script 成功编译了 JavaFX 代码。现在我无法为我的应用程序创建 JAR 文件 uisng ANT。我在 build.xml 中添加示例脚本。我的要求是为我的 JavaFx XYZ 应用程序创建一个简单的 JAR 文件。

```
<project name="XYZ" basedir=".">

<property name="WorkingFolder" location="XYZSourceData"/>
<property name="ClassPath" location="C:\Program Files\Oracle\JavaFX 2.2 Runtime\lib\jfxrt.jar;C:\Program Files\Java\jdk1.7.0_09\lib\ant-javafx.jar;"/>

<target name="init">
    <echo message="Java installation directory: ${java.home}"/>
    <!-- Create the time stamp -->
    <tstamp/>

    <delete dir="${WorkingFolder}/build"/>
    <delete dir="${dist}"/>

    <mkdir dir="${WorkingFolder}/CustomJars"/>
</target>

    <target name="Compilingxyz" depends="init">
        <mkdir dir="${WorkingFolder}/build"/>
        <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
            uri="javafx:com.sun.javafx.tools.ant" classpath=".;C:\Program Files\Oracle\JavaFX 2.2 Runtime\lib\jfxrt.jar"/>
        <javac classpath="${ClassPath};${WorkingFolder}/CustomJars/*.jar;" srcdir="${WorkingFolder}/src/com/xyz" destdir="${WorkingFolder}/build"/>
</target>     

<target name="CreatingxyzJars" depends="Compilingxyz" description="generate the distribution" >
    <taskdef resource="com/sun/javafx/tools/ant/antlib.xml"      
            uri="javafx:com.sun.javafx.tools.ant" classpath="C:\Program Files\Java\jdk1.7.0_09\lib\ant-javafx.jar"/>

    <fx:jar destfile="${WorkingFolder}/CustomJars/XYZ.jar">
            <fx:application name="XYZ"
                mainClass="com.xyz.main.XYZEntryFX"/>
        <fx:resources>
                <fx:fileset dir="${WorkingFolder}/build" includes="${WorkingFolder}/libs/*.jar"/>
        </fx:resources>
        <fileset dir="${WorkingFolder}/resources"/>
     </fx:jar> 

</target> 
```

我收到以下错误 -

```
 BUILD FAILED
C:\Users\JavaUser4\Desktop\2012.12FX\build.xml:83: The prefix "fx" for element "
fx:jar" is not bound. 
```

总时间：0秒

缺少的部分是什么？我有 Java 桌面应用程序。如何为 Java Fx 应用程序创建 ANT JAR。请帮忙。

我正在参考以下示例 -

[例子](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference001.htm#CIAEEAGG)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:39:36.287

您在项目中缺少 fx: 命名空间声明。而不是

```
<project name="XYZ" basedir="."> 
```

你需要类似的东西：

```
<project name="XYZ" basedir="."
     xmlns:fx="javafx:com.sun.javafx.tools.ant"> 
```

（这来自您链接到的文档，前一页，[*§12.3 Using JavaFX Ant Tasks。*](http://docs.oracle.com/javafx/2/deployment/javafx_ant_task_reference.htm)）

# iphone - 如何在 iPhone 开发中将字符串转换为十六进制

> ID：13797042
> 
> 赞同：1
> 
> 时间：2012-12-10T08:02:18.570
> 
> 标签：iphone, string, hex

我是 iPhone 开发的新手，我想将字符串转换为十六进制格式。

例如`00A400024F01`，`0x00,0xA4,0x00,0x02,0x4F,0x01`我想我应该从分割字符串开始，然后转换分组值。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:38:02.373

你刚刚从这个stackoverflow问题中找到了答案：-

[如何将 NSString 转换为十六进制值](https://stackoverflow.com/questions/3056757/how-to-convert-an-nsstring-to-hex-values/9398930#9398930)

```
+ (NSString *) stringToHex:(NSString *)str
    {   
        NSUInteger len = [str length];
        unichar *chars = malloc(len * sizeof(unichar));
        [str getCharacters:chars];

        NSMutableString *hexString = [[NSMutableString alloc] init];

        for(NSUInteger i = 0; i < len; i++ )
        {
            // [hexString [NSString stringWithFormat:@"%02x", chars[i]]]; /*previous input*/
            [hexString appendFormat:@"%02x", chars[i]]; /*EDITED PER COMMENT BELOW*/
        }
        free(chars);

        return [hexString autorelease];
    } 
```

**更新**

您可以使用以下方法将一根刺分成两根弦：-

```
NSString * mystring = @"Hello,How are you";// suppos your string like that
NSArray * array = [mystring componentsSeparatedByString:@","];
NSString * str1 = [array objectAtIndex:0]; //Hello
NSString * str2 = [array objectAtIndex:1]; //How are you 
```

如果您想将两个字符串合并为一个字符串，例如：-

```
NSString *str1=@"hi Sweet Lady";
NSString *str2=@"How are you";

NSString *mainstr=[NSString stringWithFormat:@"%@ %@",str1,str2]; 
```

> 输出是 ==== hi Sweet Lady 你好吗

# c# - 使用Repeater内部的值更改Repeater外部图像的ImageUrl

> ID：13797043
> 
> 赞同：0
> 
> 时间：2012-12-10T08:02:18.743
> 
> 标签：c#, asp.net, updatepanel, repeater, imageurl

我有一个带有几个项目的中继器。通过使用计时器，项目将使用以下代码依次突出显示：

```
((HtmlControl)Repeater1.Controls[nextHighlight].Controls[1]).Attributes["class"] += "highlighted"; 
```

项目保存的值之一是 ImageUrl（从数据库中收集），它将与中继器外部的 asp:Image 一起使用。

如何在Repeater 项中获取值（希望来自Timer_Tick 函数），以便我可以更改ImageUrl？我应该如何将 ImageUrl 存储在中继器中（也许是隐藏字段？）并不重要——无论是从 Timer_Tick 函数中最容易获得的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:37:06.557

使用 NamingContainer 方法在 Timer_Tick 事件中获取子中继器的 RepeaterItem。

```
 HtmlImage aImage=(HtmlImage)RptRow.Parent.Parent.Parent.FindControl("aImage"); 
 // RptRow is RepeaterItem 
 aImage.Src = "Your url"; 
```

如果您遇到任何问题，请告诉我。

# asp.net - 在 IIS8 中使用 Gzip 进行 Json HTTP 压缩

> ID：13797044
> 
> 赞同：5
> 
> 时间：2012-12-10T08:02:21.120
> 
> 标签：asp.net, json, wcf, iis, gzip

好的，我已经阅读了几个小时。数十个 SO 帖子和博客等。找不到答案。

目标：启用来自我的 WCF 服务的 json 响应的动态 http 压缩。

注意：当 applicationhost.config 包含以下内容时，gzip 已经适用于静态内容和动态内容：

```
<httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files">
            <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" />
        <dynamicTypes>
            <add mimeType="text/*" enabled="true" />
            <add mimeType="message/*" enabled="true" />
            <add mimeType="application/x-javascript" enabled="true" />
            <add mimeType="application/json; charset=utf-8" enabled="true" />
            <add mimeType="*/*" enabled="false" />
        </dynamicTypes>
        <staticTypes>
            <add mimeType="text/*" enabled="true" />
            <add mimeType="message/*" enabled="true" />
            <add mimeType="application/x-javascript" enabled="true" />
            <add mimeType="application/atom+xml" enabled="true" />
            <add mimeType="application/xaml+xml" enabled="true" />
            <add mimeType="*/*" enabled="false" />
        </staticTypes>    
</httpCompression>
</system.webServer> 
```

不幸的是，在我使用的服务器上，applicationhost.config 中缺少以下行：

```
<add mimeType="application/json; charset=utf-8" enabled="true" /> 
```

而且我无法手动添加它，因为服务器是由 Elastic Beanstalk 启动的 AWS EC2 实例（因此我可以在一个实例上更改它，但不是在所有实例启动时都更改它）。

同样不幸的是，applicationhost.config 包括这一行：

```
<section name="httpCompression" allowDefinition="AppHostOnly" overrideModeDefault="Deny" /> 
```

这意味着我无法覆盖我的应用程序 web.config 中的 httpCompression 部分。

我的问题：还有其他方法可以让我尝试对动态内容进行 gzip 压缩吗？

如果 overrideModeDefault="Allow" 那么我可以将 httpCompression 部分放在我的应用程序的 web.config 中并期望它覆盖吗？

如果需要，很高兴添加进一步的说明。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-20T04:40:03.643

在这里聚会迟到了，但如果没有 AMI，这绝对是可能的。

创建一个 s3 存储桶来托管您的设置文件。在此示例中，我有一个名为 mys3bucket 的存储桶。将以下文件上传到mybucket/ebExtensions/setup.ps1下的bucket

此文件修改了根应用程序主机配置。

```
write-host "Applying IIS configuration ..."

$globalConfig = "C:\Windows\System32\inetsrv\config\applicationHost.config"

$xmlDoc = new-object System.Xml.XmlDocument

$xmlDoc.Load($globalConfig)

#Set minimum compression size
write-host "Setting minimum compression size ..."
$xmlCurrentNode = $xmlDoc.SelectSingleNode("/configuration/system.webServer/httpCompression")
if ($xmlCurrentNode -eq $null)
{
    $xmlCurrentNode = $xmlDoc.CreateElement("httpCompression")
    $xmlDoc.SelectSingleNode("/configuration/system.webServer").AppendChild($xmlCurrentNode)
}
$xmlCurrentNode.SetAttribute("minFileSizeForComp", "10240")
$xmlCurrentNode.SetAttribute("dynamicCompressionEnableCpuUsage", "70")
write-host "Done."

#Enable dynamic compression
write-host "Enabling dynamic compression ..."
$xmlCurrentNode = $xmlDoc.SelectSingleNode("/configuration/system.webServer/urlCompression")
if ($xmlCurrentNode -eq $null)
{
    $xmlCurrentNode = $xmlDoc.CreateElement("urlCompression")
    $xmlDoc.SelectSingleNode("/configuration/system.webServer").AppendChild($xmlCurrentNode)
}
$xmlCurrentNode.SetAttribute("doDynamicCompression", "true")
write-host "Done."

#Add dynamic types for compression
write-host "Adding dynamic types ..."
$xmlCurrentNode = $xmlDoc.SelectSingleNode("/configuration/system.webServer/httpCompression/dynamicTypes")
if ($xmlCurrentNode -eq $null)
{
    $xmlCurrentNode = $xmlDoc.CreateElement("dynamicTypes")
    $xmlDoc.SelectSingleNode("/configuration/system.webServer/httpCompression").AppendChild($xmlCurrentNode)
}
$xmlCurrentNode = $xmlDoc.SelectSingleNode("/configuration/system.webServer/httpCompression/dynamicTypes/add[@mimeType='application/*']")
if ($xmlCurrentNode -eq $null)
{
    $xmlCurrentNode = $xmlDoc.CreateElement("add")
    $xmlCurrentNode.SetAttribute("mimeType", "application/*")
    $xmlDoc.SelectSingleNode("/configuration/system.webServer/httpCompression/dynamicTypes").AppendChild($xmlCurrentNode)
}
$xmlCurrentNode.SetAttribute("enabled", "true")
write-host "Done."

write-host "Saving the target config file ..."
$xmlDoc.Save("$globalConfig")
write-host "Done." 
```

接下来，您需要在项目中使用[弹性 beanstalk 扩展](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/customize-containers-windows-ec2.html)。

将以下 init.config 文件添加到网站根目录下的 .ebextensions 文件夹中。这是一个 YAML 文件，所以使用空格缩进而不是制表符。

```
files:
  "c:/cfn/init.ps1":
    content: |
      $instanceDoc = Invoke-RestMethod 'http://169.254.169.254/latest/dynamic/instance-identity/document'
      $extPath = "c:\cfn\.ebextensions"
        if (Test-Path $extPath) {
          Remove-Item $extPath -Recurse
        }
      Read-S3Object -BucketName "mys3bucket" -Folder $extPath -KeyPrefix '/ebExtensions' -Region ($instanceDoc.region)
      . (Join-Path $extPath -ChildPath '\setup.ps1')
container_commands:
  00-invoke-init:
    command: powershell.exe -nologo -noprofile -file "c:\cfn\init.ps1" 
```

*确保您的实例通过角色具有对存储桶的权限，否则在对 Read-S3Object 的调用中传递 aws 凭证*

以上执行以下操作

*   在 Files elastic beanstalk 事件中，名为 init.ps1 的新文件将被写入 c:\cfn\init.ps1
*   在 Commands 事件期间，将执行 init.ps1 文件。
*   init.ps1 文件从 S3 下载设置文件并执行它。（请注意，您可以将所有 powershell 内联，但这可以保持 YAML 干净，并且可以在安装过程中更轻松地使用多个文件。）

# jquery - jQuery 显示/隐藏嵌套的 div

> ID：13797050
> 
> 赞同：0
> 
> 时间：2012-12-10T08:02:58.197
> 
> 标签：jquery, jquery-ui, jquery-plugins, show, show-hide

我有无法解决的尴尬问题。

我有一个嵌套的 div，我想在用户单击链接时显示/隐藏它。一次所有的div。

我不能为我的 div 分配 ID，所以我需要用类来做。

```
<a href="#" id="showhide">Show more</a>

<div class="more">
<div class="more1">
<h2>Some title</h2>
<p>Some text</p>
</div>

<div class="more2">
<h2>Some title</h2>
<p>Some text</p>
</div>

<div class="more3">    
<h2>Some title</h2> 
<p>Some text</p>
</div>

</div>​ 
```

这是我的html结构的小提琴。 [http://jsfiddle.net/56jdL/1/](http://jsfiddle.net/56jdL/1/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:12:33.893

您可以使用首先隐藏 div，使用`css`：

```
.more { display: none } 
```

或 jQuery：

```
$('.more').hide() 
```

然后使用`toggle`方法：

```
$(function() {
   // $('.more').hide() 
   $('#showhide').click(function(e){
      e.preventDefault();
      $('.more').toggle()
   })
}) 
```

[http://jsfiddle.net/J2YgE/](http://jsfiddle.net/J2YgE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:15:28.470

试试这个 ：

```
$("#showhide").on('click', function(){
    $(".more").children("div").slideToggle();
    return false;
}); 
```

**[演示](http://jsfiddle.net/56jdL/6/)**

## 编辑

要有选择地切换 div，请给出一个可以选择它们的类。

```
<div class="hideMe">
    ...
</div> 
```

然后，下面的 jQuery 将只作用于那些 divs ：

```
$("#showhide").on('click', function(){
    $(".more").children("div.hideMe").slideToggle();
    return false;
}); 
```

**[演示](http://jsfiddle.net/56jdL/9/)**

## 编辑 2

这是一个适用于您更完整代码的版本：

```
$(".showhide").on('click', function() {
    $(this).closest(".vrsticaoglas").find(".more").children("div").slideToggle();
    return false;
}); 
```

**[演示](http://jsfiddle.net/5uZ6X/5/)**

# android - 从特殊号码收到短信转到我的程序，其他收到的短信转到电话收件箱

> ID：13797056
> 
> 赞同：0
> 
> 时间：2012-12-10T08:03:34.897
> 
> 标签：android, android-layout, sms, broadcastreceiver

我在android中编写了发送和接收程序。当从特殊号码收到短信时，短信会转到我的程序和短信正文，以文本形式显示。但是对于从其他电话号码收到的短信，短信转到手机的收件箱并且程序没有打开。现在在我的程序中，对于每条收到的短信，都会打开程序并在 textview 中显示短信正文。如果条件不起作用！！！我把我的代码，请检查我的代码。短信接收器.java

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
public class SmsReceiver extends BroadcastReceiver {
    public String str = "";
    static final String ACTION =
            "android.provider.Telephony.SMS_RECEIVED";
    @Override
    public void onReceive(Context context, Intent intent) {
         if (intent.getAction().equals(ACTION)) {       
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        if (bundle != null) {                   
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];

            for (int i = 0; i < msgs.length; i++) 
            {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);               
                String msg_from = msgs[i].getOriginatingAddress();    
                if(msg_from.equals("+9891--------"))
                {
                str += "SMS from " + msgs[i].getOriginatingAddress();
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";
               }
            }
            Intent act = new Intent(context, MainActivity.class);
            act.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            act.putExtra("message", str);
            context.startActivity(act);
            }
        abortBroadcast();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:12:23.273

您应该`context.startActivity(act);`在 if 条件下执行。我认为您错误地将其排除在 if 条件之外。也`abortBroadcast()`应该在 if 条件下因为这是有道理的，如果 msg 不是来自特殊号码，它应该进入收件箱....对 :)

编辑：

```
public void onReceive(Context context, Intent intent) {
    if (intent.getAction().equals(ACTION)) {
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];

            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                String msg_from = msgs[i].getOriginatingAddress();
                if (msg_from.equals("+9891--------")) {
                    String str = "SMS from " + msgs[i].getOriginatingAddress();
                    str += " :";
                    str += msgs[i].getMessageBody().toString();
                    str += "\n";
                    Intent act = new Intent(context, MainActivity.class);
                    act.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    act.putExtra("message", str);
                    context.startActivity(act);
                    abortBroadcast();
                }
            }

        }

    }
} 
```

# ajax - JSF f:ajax 在任何操作之前提示

> ID：13797064
> 
> 赞同：1
> 
> 时间：2012-12-10T08:03:57.123
> 
> 标签：ajax, jsf

如何在任何 f:ajax 操作之前显示对话框。我有如下代码：

```
 <h:commandButton  value="Create Project" styleClass="greyishBtn submitForm" action="#{projectController.delete}">
          <f:ajax execute="@form"  onevent="function(data) {createProjectEventHandler(data);}" render=":tblProject txtNewProjectName txtNewProjectStartDate taNewProjectDesc"/>
    </h:commandButton> 
```

此代码工作正常，但在调用删除操作之前我需要一个确认对话框，我尝试了 onevent，但它只有开始、成功和完成事件，我需要的是在“开始”事件之前确认对话框。

任何的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:11:16.200

`onclick="return false"`在 ajax 甚至开始之前，您可以取消它（ajax）或通过使用本身来取消它（ajax）或提交操作`<h:commandButton`本身......

所以使用 js`confirm("Delete?")`对话框的最简单方法是`onclick`

```
<h:commandButton  onclick="return confirm('Delete?');" value="Create Project" styleClass="greyishBtn submitForm" action="#{projectController.delete}">
    <f:ajax execute="@form"  onevent="function(data) {createProjectEventHandler(data);}" render=":tblProject txtNewProjectName txtNewProjectStartDate taNewProjectDesc"/>
</h:commandButton> 
```

* * *

可以在此处找到更高级的方法[jQuery UI 确认对话框不返回 true/false](https://stackoverflow.com/a/11418713/617373)它使用带有 JSF 的 jQuery 对话框

# python - 登录python

> ID：13797065
> 
> 赞同：5
> 
> 时间：2012-12-10T08:04:07.823
> 
> 标签：python

我想在 python 中创建单独的日志记录文件，如 info.log、debug.log、error.log 我有一个用于日志记录的设置文件（logging.conf），如下所示

```
[loggers]
keys=root,simpleExample

[handlers]
keys=consoleHandler

[formatters]
keys=simpleFormatter

[logger_root]
level=DEBUG
handlers=consoleHandler

[logger_simpleExample]
level=DEBUG
handlers=consoleHandler
qualname=simpleExample
propagate=0

[handler_consoleHandler]
class=StreamHandler
level=DEBUG
formatter=simpleFormatter
args=(sys.stdout,)

[formatter_simpleFormatter]
format=%(asctime)s - %(name)s - %(levelname)s - %(message)s
datefmt= 
```

我已经创建了如下所示的 logging.py 文件

```
import logging
import logging.config

logging.config.fileConfig('logging.conf')

# create logger
logger = logging.getLogger('simpleExample')

# 'application' code
logger.debug('debug message')
logger.info('info message')
logger.warn('warn message')
logger.error('error message')
logger.critical('critical message') 
```

但是当执行 logging.py 文件时，我在 consol 中得到以下结果

```
2012-12-10 13:30:20,030 - simpleExample - DEBUG - debug message
2012-12-10 13:30:20,031 - simpleExample - INFO - info message
2012-12-10 13:30:20,032 - simpleExample - WARNING - warn message
2012-12-10 13:30:20,032 - simpleExample - ERROR - error message
2012-12-10 13:30:20,033 - simpleExample - CRITICAL - critical message 
```

正如我所说的，我想在 log.info、debug.info、error.info 中创建单独的文件。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T08:16:06.313

您需要配置多个处理程序以将不同级别的日志输出到不同的文件。比如你想把INFO级别的日志记录到info.log，可以用INFO filer定义一个fileHandler

```
class MyFilter(logging.Filter):
    def filter(self, rec):
        return rec.levelno == logging.INFO

class MyHandler(logging.FileHandler):
    def __init__(self, *arg, **kw):
        logging.FileHandler.__init__(self, *arg, **kw)
        self.addFilter(MyFilter()) 
```

并将其添加到日志命名空间：

```
logging.MyHandler = MyHandler 
```

所以你可以在你的配置文件中使用它：

```
[handlers]
keys=consoleHandler,onlyinfoHandler
[handler_onlyinfoHandler]
class=MyHandler
level=DEBUG
formatter=simpleFormatter
args=('info.log','w') 
```

您可以继续添加其他人或使用级别作为处理程序参数。

# r - 使用 R 代码替换 mysql 表

> ID：13797071
> 
> 赞同：1
> 
> 时间：2012-12-10T08:04:32.120
> 
> 标签：r

我正在尝试使用 RODBC 的“sqlsave”功能将数据从 R 数据帧导出到 mysql 表名 X 中。但是，根据我的流程，我需要每次都替换表 X 中的数据。谁能告诉我我是否可以在 R 中执行此操作以删除表，然后使用 sqlsave 创建一个新表，或者是否有办法用新数据替换表 X。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:30:56.633

如果您需要覆盖表：

更简单的是使用`RMySQL`and `dbWriteTable`。

```
dbWriteTable(connection, data.frame, "MyTable", overwrite = TRUE, row.names = FALSE ) 
```

PS：如果表不存在，第一次调用就会创建。

# arduino - GPS 模块停止工作，无法将模式设置为开启

> ID：13797073
> 
> 赞同：2
> 
> 时间：2012-12-10T08:04:35.750
> 
> 标签：arduino

我一直在 waspmotes 上使用 GPS 模块，并且能够从中获取数据。但是在晴朗的日子里，天空清晰可见（我认为这并不重要），我无法打开电源模式。

在调用`GPS.setMode(GPS_ON)`时，它无法设置电源模式，并且在随后调用时冻结：`gpsConnected = GPS.check();`

我曾尝试更换 GPS 装置，但无济于事。我正在使用以下代码。（注意：为简洁起见，我删除了不必要的代码）

```
void setup()
{
  ACC.ON();
  USB.begin();  // Opening UART to show messages using 'Serial Monitor'

  //Initialize the GPS module
  GPS.ON();  // Turn GPS on
  GPS.setMode(GPS_ON);    // set GPS on
  if(!GPS.pwrMode) USB.println("Was unable to set on the GPS internal power mode.");  //this message gets printed.
  if(!GPS.setCommMode(GPS_NMEA_GGA)) USB.println("Was unable to set the GPS communication mode.");

  // Power up the Real Time Clock(RTC), init I2C bus and read initial values
  RTC.ON();
  ........
}

void loop(){
  //declare the variables
  len, i, j = 0;
  char degree[4] = "", minutes[8] = "", *latitude, *longitude, *altitude;
  uint8_t temperature = 0;
  int8_t fileFound = 0;
  double latitude_dd, longitude_dd;
  byte accOk;

  //check if the GPS has connected to the satellite
  GPS.begin();  // open the uart
  GPS.init();  // Inits the GPS module
  gpsConnected = GPS.check();

  ........
  ........
} 
```

可能发生了什么？？？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:10:20.087

这是由使用 RTC.setTime 函数引起的。在代码中，可以在这里看到：http: [//pastebin.com/RmA98MkD](http://pastebin.com/RmA98MkD)，在第 195 行`RTC.setTimeFromGPS()`，我用从 GPS 收到的时间来设置电路板时间。这最终搞砸了 GPS 连接，代码只循环了一次。你可以从这里看到详细的对话：[http ://www.libelium.com/forum/viewtopic.php?f=16&t=9861](http://www.libelium.com/forum/viewtopic.php?f=16&t=9861)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T13:08:44.753

你需要简单的测试。首先，确保将 TTl 输入提供给 Tx 和 rx 引脚。如果您上传此程序，它将给出 GPS 输出字符串。如果您使用带有 RS 232 串行输出的 GPS 模块，如您所说，它不会工作。它只需要 TTl 输入

```
void setup()
{
 Serial.begin();
}
void loop()
{

} 
```

# python - 如何为 django 安装paintstore

> ID：13797082
> 
> 赞同：0
> 
> 时间：2012-12-10T08:05:06.977
> 
> 标签：python, django, color-picker

你如何为 django 安装paintstore？Paintstore 是从[http://pypi.python.org/pypi/django-paintstore](http://pypi.python.org/pypi/django-paintstore)获得的。我使用命令安装了它

```
python setup.py install 
```

安装很顺利，我想，至少没有错误，但是当我这样做时

```
python manage.py sql appname 
```

它说

```
Traceback (most recent call last):
File "manage.py", line 10, in <module> execute_from_command_line(sys.argv)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line utility.execute()
File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute self.fetch_command(subcommand).run_from_argv(self.argv)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv self.execute(*args, **options.__dict__)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 231, in execute self.validate()
File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 266, in validate num_errors = get_validation_errors(s, app)
File "/usr/local/lib/python2.7/dist-packages/django/core/management/validation.py", line 30, in get_validation_errors for (app_name, error) in get_app_errors().items():
File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 158, in get_app_errors self._populate()
File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 64, in _populate self.load_app(app_name, True)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/loading.py", line 88, in load_app models = import_module('.models', app_name)
File "/usr/local/lib/python2.7/dist-packages/django/utils/importlib.py", line 35, in import_module __import__(name)
File "/ProjectDir/ProjectName/app/models.py", line 7, in <module>
class Bag(models.Model):
File "/ProjectDir/ProjectName/app/models.py", line 10, in Bag Color = models.ColorPickerField()
AttributeError: 'module' object has no attribute 'ColorPickerField' 
```

我尝试在 django-paintstore-0.1.2 中复制paintstore 文件夹的内容（在提取 django-paintstore-0.1.2.tar.gz 文件时会得到这个），但仍然无济于事。README 没有任何帮助，因为它只说

```
Install the app with your preferred Python packaging utility 
```

我也将paintstore添加到 INSTALLED_APPS 并且我没有忘记使用导入它

```
from paintstore.fields import ColorPickerField 
```

提前感谢您的帮助。顺便说一句，我不介意您是否为 ColorPickerField 建议其他东西，只要它与这个一样好或更好，但请告诉我如何安装它以使其正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:41:04.257

这与使用 django 模型有点不同。它不是models.ColorPickerField。它应该只是 ColorPickerField。

# flash - 如何在闪蒸催化剂中创建具有不规则边缘的按钮

> ID：13797086
> 
> 赞同：3
> 
> 时间：2012-12-10T08:05:20.743
> 
> 标签：flash, apache-flex, flash-builder, flex4.5, flashcatalyst

我正在使用 Photoshop、Flash Catalyst 和 Flash Builder 一起开发 Flash 应用程序。作品以 Photoshop 文件的形式提供，每一层都有一个图像。这些图像中的每一个都是不规则的，必须转换为按钮。

问题是，当我在 Catalyst 中创建按钮时，实际艺术品周围的矩形区域成为按钮的目标区域。我希望仅将艺术品作为目标区域。从 Photoshop 导入的图像具有透明背景。有没有一种技术可以将不规则的艺术品形状作为我的实际目标区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:52:45.107

诀窍是在 Photoshop 中使用矢量蒙版。每个包含一件艺术品的图层也必须使用矢量蒙版进行蒙版。因此，问题被简化为如何为给定的选择创建矢量蒙版。可以通过首先从当前选择创建一个工作路径，然后将该路径转换为矢量蒙版来完成。

该过程的其余部分保持不变，即导入到催化剂以转换为 UI 组件，最后使用 flash builder 添加功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:48:41.017

看看这个网站：[Button Hit Area](http://flashcats.net/2010/05/17/create-a-button-with-a-hit-area-that-matches-your-artwork/)。我想这就是你要找的。

1.  选择您的图稿并将其转换为按钮（右键单击 -> 将图稿转换为组件 -> 按钮）
2.  双击按钮进入原地编辑模式
3.  选择按钮皮肤中的所有艺术品（编辑 -> 全选）
4.  将选择转换为组（修改 -> 组）
5.  在右下角的属性面板中，选择图形标题并取消选择“透明度接受鼠标”

# bash - bash - 为什么要为私有函数添加双下划线 (__)？为什么 (_) 用于 bash 完成功能？

> ID：13797087
> 
> 赞同：26
> 
> 时间：2012-12-10T08:05:29.187
> 
> 标签：bash, function, coding-style

当您查看您选择的 Linux 附带的 bash 函数时，您经常会看到`private`（推荐意义上的私有）函数是这样编写的：

```
__private_func() {
    :
} 
```

因此，您首先想知道为什么私有函数不只`_`使用一个下划线 ( )... 然后您会看到 bash 完成函数通常以单个下划线开头，通常使用双下划线调用私有函数，就像之前的示例一样：

```
_complete_func() {
    __private_func
} 
```

我想知道的是：这是什么原因？关于如何为私有函数添加前缀是否有一些约定？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-03T03:05:13.523

我查看了 bash 手册页和[POSIX shell 标准](http://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html)，但无法找到有关此命名约定的任何内容。也就是说，在 C 中使用下划线表示保留名称或内部名称。引用[libc 保留名称手册](http://www.gnu.org/software/libc/manual/html_node/Reserved-Names.html)：

> 除了本手册中记录的名称之外，保留名称还包括以下划线 ('_') 开头的所有外部标识符（全局函数和变量）以及以两个下划线或下划线后跟大写字母是保留名称

这个命名约定的主要逻辑是：

> 这样库和头文件可以为内部目的定义函数、变量和宏，而不会与用户程序中的名称发生冲突

它还有一个好处是能够轻松地在“私有”和“公共”函数之间进行 grep（我把它放在引号中，因为用户可以调用任何一种形式，而不管命名如何）。

# java-me - j2me 混淆失败

> ID：13797088
> 
> 赞同：2
> 
> 时间：2012-12-10T08:05:32.427
> 
> 标签：java-me, obfuscation

我试图在 j2me 中混淆我的项目..但它显示以下错误。我知道这个混淆错误仅在我在项目中导入 Json.jar 时发生..如果我删除这个 jar 意味着混淆正在发生..请帮我解决这个问题..提前谢谢。

```
Warning: org.json.me.JSONArray: can't find referenced method 'java.lang.Object remove(int)' in class java.util.Vector
Warning: there were 1 unresolved references to program class members.
         Your input classes appear to be inconsistent.
         You may need to recompile them and try again.
         Alternatively, you may have to specify the options 
         '-dontskipnonpubliclibraryclasses' and/or
         '-dontskipnonpubliclibraryclassmembers'.
Error: Please correct the above warnings first.
C:\Users\Ponmani\Documents\TThehinduNov22ponmani\nbproject\build-impl.xml:427: Obfuscation failed with error code 1.
BUILD FAILED (total time: 4 seconds) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:19:44.877

发生此错误是因为`JSONArray`该类使用类中的`remove(int)`方法`Vector`，但此方法不适用于 Java ME：[http ://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/java/util /Vector.html](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/java/util/Vector.html)

您选择了该库的 Java Se 版本。请尝试这个其他库：[https ://github.com/upictec/org.json.me/](https://github.com/upictec/org.json.me/)

**更新**
有一个 ZIP 按钮，您可以在其中将存储库下载为 zip 文件。
在 zip 文件中输入 /src/main/java。
复制 org 文件夹并将其粘贴到您的 src 文件夹中。

# typescript - TypeScript 中的类设计

> ID：13797090
> 
> 赞同：4
> 
> 时间：2012-12-10T08:05:44.817
> 
> 标签：typescript

考虑到它不支持具有不同原型的多个构造函数，我正在努力在 TypeScript 中实现一些类设计。基本上，我想设计一个带有一些参数的公共构造函数和一个“内部”构造函数（仅在库中使用）的类。公共构造函数将调用内部构造函数。在 C# 中，它看起来像这样：

```
public class Class1
{
    internal Class1(int id)
    { 
    }

    public Class1(string s)
        : this(s.Length)
    {
    }
} 
```

知道如何将其翻译成 TypeScript 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:34:26.110

这也有效，并且可能更接近原版：

```
class Class1 {

    id:number;

    constructor(s: string) {
        (n:number) => {
            this.id = n;
        }(s.length)
    }
}

var t:Class1 = new Class1("HELLO");
console.log("Class1ID: " + t.id); // Output = Class1 ID: 5 
```

作为参考，这里是输出 JS：

```
var Class1 = (function () {
    function Class1(s) {
        var _this = this;
        (function (n) {
            _this.id = n;
        })(s.length);
    }
    return Class1;
})();
var t = new Class1("HELLO");
console.log("Class1 ID: " + t.id); 
```

**更新**

如果您必须能够仅使用 ID 调用构造函数，那么我认为您将不得不使用工厂方法，正如 Steve 所建议的那样。而且，由于我不认为 TS 构造函数可以是私有的，如果您需要该方法是私有的，您将不得不完全放弃构造函数并使用一对工厂方法。第一个实例可能如下所示：

```
class Class1 {

    constructor(public id:number) {} // Public, unfortunately.

    static Fabricate(s:string):Class1 {
        return new Class1(s.length);
    }
}

var classA:Class1 = new Class1(1);
var classB:Class1 = Class1.Fabricate("Hello");

console.log(classA.id);   // "1"
console.log(classB.id);   // "5" 
```

第二个是这样的：

```
class Class1 {

    id:number;

    private static fabricate(n:number):Class1 {
        var class1:Class1 = new Class1();
        class1.id = n;
        return class1;
    }

    static Fabricate(s:string):Class1 {
        return fabricate(s.length);
    }
}

var classA:Class1 = Class1.Fabricate("Hello");

console.log(classA.id);   // "5" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:25:40.603

我的第一个想法是使用重载，但这并不能处理您对数字构造函数的保护，这也意味着在构造函数中添加一个条件来确定您传递了哪个参数：

```
class MyClass {
    constructor(s: number);
    constructor(s: string);
    constructor(s: any) {

    }
} 
```

所以务实的解决方案是拥有一个私有函数：

```
class MyClass {
    constructor(s: string) {
        this.initialize(s.length);
    }

    private initialize(id: number) {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T13:16:39.373

在 TypeScript 1.4 中，Union 类型现在可用于允许函数类型重载。请参阅[TypeScript 博客文章](http://blogs.msdn.com/b/typescript/archive/2015/01/16/announcing-typescript-1-4.aspx)中的描述。这应该允许您使用一个构造函数来拥有多个构造函数输入类型。

> ## 联合类型
> 
> JavaScript 函数可能采用许多可能的参数类型。到目前为止，我们已经使用函数重载来支持这一点。从 TypeScript 1.4 开始，我们已经推广了此功能，现在允许您使用联合类型指定该值是多种不同类型之一：

```
function f(x: number | number[]) {
  if (typeof x === "number") {
    return x + 10;
  }
  else {
    // return sum of numbers
  }
} 
```

> 一旦有了联合类型的值，就可以使用 typeof 和 instanceof 检查以类型安全的方式使用该值。您会注意到我们在上面的示例中使用了它，并且可以将 x 视为 if 块内的数字类型。
> 
> 联合类型是一种新的类型，可以在您指定类型的任何地方使用。

# windows-store-apps - 如何使用非 ASCII 文件名上传到 Box.net

> ID：13797094
> 
> 赞同：2
> 
> 时间：2012-12-10T08:06:11.443
> 
> 标签：windows-store-apps, box-api

我正在使用 Box.net 开发一个 Windows 商店应用程序。

我正在尝试使用 winRT 中的 backgrounduploader 上传文件，

代码片段：

```
 public async Task<UploadOperation> CreateUploadOperationV2(StorageFile file, string name, string destFolderId)
    {
        BackgroundUploader uploader = new BackgroundUploader();
        uploader.Method = "POST";
        uploader.SetRequestHeader("Authorization", "BoxAuth " + "api_key=" + mykey + "&auth_token=" + mytoken);
        var uploadUrl = "https://www.box.net/api/2.0/"+ "files/content";
        List<BackgroundTransferContentPart> parts = new List<BackgroundTransferContentPart>();
        var part = new BackgroundTransferContentPart("filename", name);
        part.SetFile(file);
        parts.Add(part);
        part = new BackgroundTransferContentPart("folder_id");
        part.SetText(destFolderId);
        parts.Add(part);
        var uploadOperation = await uploader.CreateUploadAsync(new Uri(uploadUrl), parts);
        return uploadOperation; 
    } 
```

它适用于 ascii 编码的文件名，但不适用于其他文件名。

在标题中，它看起来像这样：

内容处置：表单数据；名称="文件名"; 文件名*=utf-8''Foo%E8%A4%87.jpg

有人可以帮我弄这个吗？

我被困在这里2天。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T22:28:19.983

@seanhc，我有这个问题。并解决了，但我用的是java。可以帮助您：

```
String url = "https://api.box.com/2.0/files/content";
            HttpPost post = new HttpPost(url);
            MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE, null, Charset.forName("UTF-8"));

            HtmlUtils.addEntity(entity, "folder_id", path.id);
            entity.addPart("filename", new CounterFileBody(post, file, onProgress, breakFlag));
            post.setEntity(entity);

            return BoxComHttpUtils.requestResponse(_storage, post, url); 
```

开始工作正常，然后我将实体设置为：

**MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE, null, Charset.forName("UTF-8"));**

[在这里](https://stackoverflow.com/questions/13126327/utf-8-encoding-with-filebody-in-multipartentity/13211145#13211145)找到解决方案

# bash - 如何在错误时中断 bash 管道？

> ID：13797095
> 
> 赞同：4
> 
> 时间：2012-12-10T08:06:11.830
> 
> 标签：bash, shell, error-handling, pipeline

在以下示例`echo`语句中，无论管道中先前命令的退出代码如何，都会执行：

```
asemenov@cpp-01-ubuntu:~$ 
asemenov@cpp-01-ubuntu:~$ false|echo 123
123
asemenov@cpp-01-ubuntu:~$ true|echo 123
123
asemenov@cpp-01-ubuntu:~$ 
```

我希望`echo`命令仅在前一个命令的**零**退出代码上执行，即我想实现这种行为：

```
asemenov@cpp-01-ubuntu:~$ false|echo 123
asemenov@cpp-01-ubuntu:~$ 
```

在bash中可能吗？

这是一个更实际的例子：

```
asemenov@cpp-01-ubuntu:~$ find SomeNotExistingDir|xargs ls -1
find: `SomeNotExistingDir': No such file or directory
..
..
files list from my current directory
..
..
asemenov@cpp-01-ubuntu:~$ 
```

`xargs ls -1`如果`find`失败则没有理由执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:17:58.260

管道的组件总是无条件地和逻辑地并行运行；只有当第一个（或更早的）进程成功完成时，您才能在管道中创建第二个（或以后的）进程。

在您使用 显示的特定情况下`find`，您至少有两个选项：

```
find SomeNotExistingDir ... -exec ls -1 {} + 
```

或者您可以使用 GNU 的一个非常有用的功能（ [POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/xargs.html)`xargs`中不存在）：

```
find SomeNotExistingDir ... | xargs -r ls -1 
```

`-r`option 等价于`--no-run-if-empty`option，它相当准确地解释了它的作用。如果您使用的是 GNU`find`和 GNU `xargs`，您应该使用扩展`-print0`和`-0`：

```
find SomeNotExistingDir ... -print0 | xargs -r -0 ls -1 
```

这会正确处理可以出现在文件名中的每个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:01:28.373

在命令流方面，最简单的方法是使用逻辑 OR 运算符，如下所示：

```
[pierrep@DEVELOPMENT8 ~]: false || echo 123
123
[pierrep@DEVELOPMENT8 ~]: true || echo 123
[pierrep@DEVELOPMENT8 ~]: 
```

这是可行的，因为`||`运算符是以惰性方式计算的，这意味着仅当左语句评估为 false 或 1 时才评估右语句。

**注意**：成功运行的命令在成功时返回退出状态 0。当它们不是 0 时，它们不是 0。在您的示例中`find`：

```
[pierrep@DEVELOPMENT8 ~]: find somedir || echo 123
find: `somedir': No such file or directory
123
[pierrep@DEVELOPMENT8 ~]: find .profile || echo 123
.profile 
```

使用`||`不会重定向来自左侧命令的任何类型的输出`||`。如果您只想在某个命令成功时运行某个命令，您应该只进行基本的退出代码检查，并将一个命令的输出临时存储在脚本中的变量中，以便将其提供给下一个命令，如下所示：

```
$result=( $(find SomeNotExistingDir) )
$exit_code=$?
if [ $exit_code -eq 0 ]; then
    for path in ${result[@]}; do
        #do some stuff with the find results here...
        echo $path;
    done
fi 
```

这是做什么的：当 find 运行时，它将其结果放入`$result`数组中。`$?`保存上次运行命令的退出代码，所以这里是`find`命令。如果`find`找到`SomeNotExisitingDir`，则遍历其结果（因为它可能已找到多个实例）并使用这些路径进行处理。否则什么都不做。`else`当执行命令时发生错误`find`或找不到文件/目录时， 将触发此处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:11:35.123

你不能用管道做到这一点，因为管道创建不会等待完成，否则怎么可能`cat | tr 'a-z' 'A-Z'`工作？使用测试和临时文件模拟管道：

```
file1=$(mktemp)
file2=$(mktemp)
false > $file1 && (echo 123 > $file2) < $file1 && (prog3 > $file1) < $file2 && #.... 
rm $file1 $file2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T08:28:24.910

> > 关键是当第一个命令失败时，第二个命令没有输出并且没有理由执行它 - 这种行为的结果变得出乎意料

如果退出代码非零时 stdout 上没有输出，则此信息本身可用于管道数据。无需检查退出代码。（当然优化部分除外。）

例如，如果你忽略优化部分，只考虑正确性部分，

```
find SomeNotExistingDir|xargs ls -1 
```

可以改为

```
find SomeNotExistingDir| while read x; do ls -1 "$x"; done 
```

除了while循环，里面的命令不会被执行。这种方法的缺点是，一些信息（如行号）将丢失，以便使用 awk/sed/head 等命令代替 ls。另外，在 xargs 方法的情况下， ls 将被执行 N 次，而不是 1 次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T00:03:34.977

对于您给出的特定示例，只需检查管道上是否有任何数据就足够了。您遇到的问题`xargs`是没有输入，因此它`ls`不带参数调用，并且`ls`默认打印当前目录的内容。anishsane 的解决方案几乎就足够了，但它并不完全相同，因为它会`ls`为每一行输出调用，这根本不是什么`xargs`。但是，您可以这样做：

```
find /bad/path | xargs sh -c 'test $# = 0 || exec ls -1 "$@"' 
```

现在，这条管道将始终成功，也许这是不可取的（`find /bad/path | xargs ls -l`尽管这与你得到的行为相同）为了确保管道失败，你可以这样做：

```
find /bad/path | xargs sh -c 'test $# = 0 && exit 1; exec ls -1 "$@"' 
```

然而，也有一些担忧。 `xargs`会很高兴地用许多参数调用它的命令（这就是它的重点！），但是一些 shell 将处理比 xargs 少得多的参数，因此 shell 很可能会截断参数。然而，这可能是一个学术问题。

# c# - 为什么在上传 Blob 后会出现“指定的 Blob 不存在”？

> ID：13797099
> 
> 赞同：0
> 
> 时间：2012-12-10T08:06:47.143
> 
> 标签：c#, .net, azure, azure-storage, azure-blob-storage

我正在查看我的 Azure Web 服务的日志并看到记录的异常：

```
The specified blob does not exist.
Microsoft.WindowsAzure.StorageClient.StorageClientException
  at Microsoft.WindowsAzure.StorageClient.Tasks.Task`1.get_Result()
  at Microsoft.WindowsAzure.StorageClient.RequestWithRetry.RequestWithRetrySyncImpl[TResult](
       ShouldRetry retryOracle, SynchronousTask`1 syncTask)
  // my code calling CloudBlob.DownloadToStream() here 
```

并且服务结构的设计使得遇到异常的代码仅在 blob 首次上传到存储后才运行。

这段代码已经工作了几个月，并且对数千个 blob 工作得很好。现在它遇到了上面的异常，并且似乎无法重现。最令人惊讶的是，在此异常中声称“不存在”的 blob 当前位于存储中，并且看起来与所有其他 blob 一样好。

根据[这个答案](https://stackoverflow.com/a/6517352/57428)，一旦上传了 blob，任何人都应该可以立即访问它（当然就访问限制而言），因此后续下载应该会成功。

所以它看起来像一些奇怪的问题。如果这很重要，我正在使用 Azure SDK 1.6。

我做错了什么？我该如何解决？

# python - 在python中缩放读取矩阵

> ID：13797110
> 
> 赞同：4
> 
> 时间：2012-12-10T08:07:58.120
> 
> 标签：python, matplotlib

我正在寻找一种方法来重新缩放通过使用 matplotlib 例程 imread 读取 png 文件给出的矩阵，例如

```
from pylab import imread, imshow, gray, mean
from matplotlib.pyplot import show
a = imread('spiral.png')
#generates a RGB image, so do
show() 
```

但实际上我想手动指定 $a$ 的维度，比如 200x200 个条目，所以我需要一些魔法命令（我假设它存在但我自己找不到）来插值矩阵。

感谢您提供任何有用的评论：）

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:31:11.377

您可以尝试使用 PIL (Image) 模块和 numpy. 使用 Image 打开并调整图像大小，然后使用 numpy 转换为数组。然后使用pylab显示图像。

```
import pylab as pl
import numpy as np
from PIL import Image

path = r'\path\to\image\file.jpg'

img = Image.open(path)

img.resize((200,200))

a = np.asarray(img)

pl.imshow(a)
pl.show() 
```

希望这可以帮助。

# soundcloud - 是否有可能隐藏 Soundcloud HTML 5widget 中的“购买”链接？

> ID：13797111
> 
> 赞同：1
> 
> 时间：2012-12-10T08:08:01.263
> 
> 标签：soundcloud

我们希望将 Soundcloud 嵌入到有关使用 Soundcloud 的艺术家的文章中。但由于我们是公共广播电台 - 我们不允许链接到在线商店。是否有任何参数可以隐藏 HTML 5 小部件中的“购买”链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:01:50.427

`buying=false`是的，插入小部件时需要使用GET 参数。[您可以在此处](http://developers.soundcloud.com/docs/api/html5-widget#params)查看小部件的所有可能参数。

# html - 选择和选项标记，即 html 中的下拉列表显示完整列表

> ID：13797112
> 
> 赞同：-1
> 
> 时间：2012-12-10T08:08:01.367
> 
> 标签：html

`<select> </select>` 当我单击从下拉列表中选择时，我的标签中有 25-30 个选项。我只得到前 20 个选项的列表，之后我必须向下滚动列表以向前选择，即 21 以进一步。

但我的要求是，当单击下拉选择时，应显示完整列表，即应显示所有 25-30 个选项，没有滚动条。

请帮帮我..我已经做了很多谷歌搜索，但没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:11:14.530

试试那个片段

```
$('select').on('click', function(){
    $('select').attr('size', $('select option').size());
}) 
```

[演示](http://jsfiddle.net/roine/gskad/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:18:51.053

看看这个问题：

[HTML 选择框的高度（下拉菜单）](https://stackoverflow.com/questions/570642/height-of-an-html-select-box-dropdown/570651#570651)

正如公认的答案所述 - 没有办法做到这一点。假设您需要使用自定义 JS 下拉菜单来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:24:31.210

元素的属性指定下拉列表中可见选项的数量`size`。`select`

如果 size 属性的值大于 1，但小于列表中的选项总数，浏览器会添加一个滚动条，表示还有更多选项可以查看。

如果您使用`JQuery`，您可以在选择列表中找到选项的数量，如下所示：

```
var count = $("#mySelect :selected").length; 
```

并将`size`属性设置为此数字，如下所示：

```
$("select").attr('size',count); 
```

# operating-system - 当我们安装操作系统时，只安装硬件的特定驱动程序还是安装磁盘中的所有驱动程序？

> ID：13797120
> 
> 赞同：0
> 
> 时间：2012-12-10T08:09:07.847
> 
> 标签：operating-system, drivers

我基本上是在要求这样做以最小化我的操作系统磁盘空间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T22:07:41.200

这取决于什么操作系统。例如，Windows 在硬盘驱动器中安装了一堆驱动程序，GNU/Linux，取决于分布。一些发行版，除了通用驱动程序之外，您还可以选择要安装的驱动程序。

# django - Django Admin 停止工作 - “模块”对象不可迭代

> ID：13797128
> 
> 赞同：1
> 
> 时间：2012-12-10T08:09:44.857
> 
> 标签：django, admin

我开始使用 Django。我无法让管理员工作（它曾经工作过，我不确定是什么更新让它崩溃了......）。

一旦我在管理员中注册模型，网站就会在任何 URL 上崩溃并出现此错误：

```
'module' object is not iterable 
```

在跟踪中，它碰巧遇到了这个问题：

```
/Library/Python/2.7/site-packages/django/contrib/admin/sites.py in register
        for model in model_or_iterable: 

admin_class 
<class 'django.contrib.admin.options.ModelAdmin'>
options 
{}
model_or_iterable   
<module 'model.Branch' from '...../farmpower/src/model/Branch.pyc'>
self    
<django.contrib.admin.sites.AdminSite object at 0x1098196d0> 
```

在该示例中，我尝试了不同的模型，使用 Branch（admin.py 中的代码）：

```
from django.contrib import admin
from models import *

admin.site.register(Branch) 
```

模型.py：

```
import Page, Promotion, Branch, Contact 
```

分支.py

```
from django.db import models
from django.utils.translation import ugettext_lazy as _

class Branch(models.Model):
    name = models.CharField 
```

[...]

```
class Meta:
    app_label = "model"
    db_table  = "cms_branch"

def __unicode__(self):
    return self.name 
```

感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:24:05.613

您的代码中有几处不是很整洁。其中之一可能会导致您看到的错误，尽管我不知道是哪一个。

*   您使用相对导入 ( `from models import ...`)。做一个像`from yourapp.models import ...`) 这样的绝对导入会更健壮。

*   您使用“星形导入”：`from models import *`。您并不真正知道要在执行此操作的文件中准确导入什么。自动代码检查器（如[pyflakes](http://pypi.python.org/pypi/pyflakes)）也无法检查您是否缺少导入。

*   你提到`models.yml`的文件名。这不是一个`.py`扩展，所以 python 不会对那个做任何事情。

*   `Meta`您在模型中设置的应用名称是`model`. 请注意，“模型”和“模型”是 django 内部的名称。因此，使用带有“models.py”的名为“model”的应用程序很容易出错。为什么没有应用程序`yourapp`或类似的东西？

以下是一些可能出错的方法：

明星进口：也许你进口了不同`admin`的`models.py`？哪个通过星号导入覆盖 admin.py 中的那个？

The `models.yml`: 如果这真的是名字，`from models import *`返回什么？与一个不存在的`models.py`? 尝试`Branch`显式导入：`from models import Branch`看看是否失败。

应用程序名称：如果您的应用程序真的被称为“模型”，则相对导入`from models import *`可能会为您提供顶级“模型”模块，而不是您的意思的“model.models”，以防您输入错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:25:54.653

是你的

```
from models import * 
```

它应该是

```
from appName.models import className 
```

# database - "heroku db:pull --exclude table_name" 如何排除多个表？

> ID：13797134
> 
> 赞同：6
> 
> 时间：2012-12-10T08:10:23.393
> 
> 标签：database, heroku

我在任何地方都找不到如何使用“--exclude”。当我尝试这段代码时

```
heroku help db:pull 
```

我明白了：

```
Usage: heroku db:pull [DATABASE_URL]

 pull heroku data down into your local database

 DATABASE_URL should reference your local database. if not specified, it
 will be guessed from config/database.yml

 -c, --chunksize SIZE # specify the number of rows to send in each batch
 -d, --debug          # enable debugging output
 -e, --exclude TABLES # exclude the specified tables from the pull
 -f, --filter REGEX   # only pull certain tables
 -r, --resume FILE    # resume transfer described by a .dat file
 -t, --tables TABLES  # only pull the specified tables 
```

好的，我了解如何在一张桌子上使用“-e”，但我想排除一张以上的桌子。它不工作：

```
heroku db:pull -e users, versions 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T08:40:55.300

这个对我有用

```
heroku db:pull -e "stats admins" --app APP_NAME 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-12T22:33:22.850

来自文档“使用';' 拆分名字”

`heroku pg:pull [DATABASE] --exclude-table-data "[FIRST_TABLE_NAME];[SECOND_TABLE_NAME]" --app [APP_NAME]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-26T16:24:13.060

我刚用

`heroku pg:pull DATABASE_URL LOCAL_DB --exclude-table-data TABLE_NAME --app APP_NAME`

更新：要排除多个表尝试

`heroku pg:pull DATABASE_URL LOCAL_DB --exclude-table-data TABLE_1_NAME; --exclude-table-data TABLE_2_NAME --app APP_NAME`

尝试 heroku pg:pull --help 以获得完整的文档

# javascript - 从 ManagedBean 属性获取 Javascript 变量值

> ID：13797141
> 
> 赞同：0
> 
> 时间：2012-12-10T08:11:20.817
> 
> 标签：javascript, jsf-2, managed-bean

我有一个 ManagedBean，它的属性从 EJB 获取其值。在 JSF 中，我有一个 Javascript 变量，该变量然后从 ManagedBean 属性中获取其值。当我运行项目时，未设置 Javascript 变量。

在 ManagedBean 中，我尝试了以下方法但不起作用：

*   在`Constructor`

*   在带有注解的`init()`方法中设置属性的值`@PostConstruct`

*   `getMenuData()`在方法中设置它。

**JSF JavaScript**

```
<script>
    YAHOO.util.Event.onDOMReady(function ()) {
        // Data to build the menubar
        var menuData = [#{userMenu.menuData}];

        ...
    });
</script> 
```

**托管豆**

```
package com.qrra.PROFIT.web;

import javax.annotation.PostConstruct;
import javax.ejb.EJB;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import qrcom.profit.ejb.UserMenuFacade;

@ManagedBean
@ViewScoped
public class UserMenuController {

    public UserMenuController() {
        menuData = usermenu.buildMenuDataByUserProfile("UAT");
    }

    // @PostConstruct
    // public void init() {
    //    menuData = usermenu.buildMenuDataByUserProfile("UAT");
    // }

    public void getMenuData() {
        return this.menuData;
    }

    public void setMenuData(String menuData) {
        // usermenu.buildMenuDataByUserProfile("UAT");
        this.menuData = menuData;
    }

    private String menuData;
    @EJB
    private UserMenuFacade usermenu;

} 
```

当我查看源代码时，我只看到`var menuData = [];`

有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:16:33.270

构造方法会失败，因为在构造实例之前[不可能](https://stackoverflow.com/questions/7038919/ejbfacade-is-null/7040771#7040771)在实例中注入 EJB，你只会面对`NullPointerException`EJB 是`null`. 该`@PostConstruct`方法应该可以正常工作。business-logic-in-getter 方法也可以正常工作，但它是[简单的糟糕设计](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)。

如果您在 中正确执行作业`@PostConstruct`，您的代码看起来不错。您的具体问题表明它`usermenu.buildMenuDataByUserProfile("UAT");`本身只返回一个空字符串，因此您的具体问题需要在更高级别上解决。您应该已经在调试器和常识的帮助下自己确定了它。

# xaml - 在 Metro 中创建用户控件 Treeview

> ID：13797142
> 
> 赞同：2
> 
> 时间：2012-12-10T08:11:26.047
> 
> 标签：xaml, microsoft-metro

win rt 中没有treeview 控件，有人知道如何创建treeview 用户控件吗？我应该继承任何控制权吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:11:13.780

在 winrt 中使用 ListView 可以更好地可视化分层结构的导航。您需要显示一个节点列表，当用户触摸一个节点时，它应该显示带有子节点和按钮返回的 ListView。

但是您可以实现自己的控件 TreeView（看起来像 WPF 或 Silverlight TreeView）。您需要从 ListBox 和 ListBoxItem 控件派生，并在 PrepareContainerForItemOverride() 方法中为子节点添加缩进。

# android - 在 android 应用程序中创建文本或图像的反射的步骤

> ID：13797148
> 
> 赞同：0
> 
> 时间：2012-12-10T08:11:56.827
> 
> 标签：android, reflection

我是 android 应用程序开发的初学者.. 对应用程序开发充满好奇，我想知道在 android 应用程序中创建对 TEXT 或图像的反射的逐步过程。请帮我写代码

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:25:50.293

您应该为此使用自定义视图并覆盖 onDraw()。这样的事情应该可以反映：

```
@Override
protected void onDraw(Canvas canvas) {
    int width = getWidth();
    int height = getHeight();

    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    Matrix matrix = new Matrix();
    matrix.postTranslate(width, 0);
    matrix.postScale(-1, 1);
    matrix.postRotate(180, width / 2, height / 2);
    canvas.concat(matrix);

    super.onDraw(canvas);

    canvas.restore();
} 
```

# iphone - 如何从其他网页重定向到我的 iPhone 网络应用程序？

> ID：13797149
> 
> 赞同：2
> 
> 时间：2012-12-10T08:12:00.603
> 
> 标签：iphone, oauth, iphone-web-app

我想在我的网络应用程序中使用 OAuth。我在新窗口 Safari 中打开 OAuth 页面。授权后我可以从身份验证页面返回 Web 应用程序吗？

这是我重定向到 OAuth 页面的代码：

```
<a class="auth-link twitter" href="<?php echo (Yii::app()->request->baseUrl); ?>/mobile.html?service=twitter" rel="external" >
<img src="<?php echo (Yii::app()->request->baseUrl); >/img/mobile/soc_icon_tweet.png" id="social_logo" alt="image">
</a> 
```

不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T12:53:23.823

不幸的是，这是不可能的。您需要一个本机应用程序，然后添加一个自定义 URL 方案，如“oauth://your-url.com”。

# java - 为什么我的活动没有开始？

> ID：13797155
> 
> 赞同：0
> 
> 时间：2012-12-10T08:12:28.287
> 
> 标签：java, android, android-manifest

我认为我的活动存在问题，因为它可以正常运行初始屏幕，但是当它进入主页时会出现强制关闭错误。如果您能看到我的`home.java`代码是否正确，我也很感激我基本上想打开其他活动并使用退出按钮退出应用程序。

安卓清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.decrypter"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Splash"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".Home"
        android:label="@string/title_activity_home" >
        <intent-filter>
            <action android:name="com.example.decrypter.HOME" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

主页.java

```
package com.example.decrypter;

import android.os.Bundle;
import android.app.Activity;
import android.app.Application;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.Button;
import android.widget.EditText;
import android.widget.AdapterView.OnItemSelectedListener;

public class Home extends Activity implements OnItemSelectedListener {

    Button btn_start,btn_about,btn_exit;
    @Override 
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);

        btn_start = (Button) findViewById(R.id.btn_start);
        btn_about = (Button) findViewById(R.id.btn_about);
        btn_exit = (Button) findViewById(R.id.btn_exit);

        btn_start.setOnClickListener( new View.OnClickListener() 
        {
            public void onClick(View v) {
                Intent start = new Intent(Home.this, MainPage.class);
                Home.this.startActivity(start);
            }
        });
        btn_about.setOnClickListener( new View.OnClickListener() 
        { 
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent about = new Intent(Home.this, about.class);
                Home.this.startActivity(about);
            }
        });
        btn_exit.setOnClickListener( new View.OnClickListener() 
        { 
            public void onClick(View v) {
                // TODO Auto-generated method stub
                System.exit(0);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.layout.home, menu);
        return true;
    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
    }
} 
```

字符串.xml

```
<string name="app_name">decrypter</string>
<string name="menu_settings">Settings</string>
<string name="title_activity_main_page">MainPage</string>
<string name="title_activity_home">Home</string>
 <string name="prompt">- </string>

<string-array name="numbers">
    <item >1</item>
    <item >2</item>
    <item>3</item>
    <item >4</item>
    <item>5</item>
    <item >6</item>
    <item >7</item>
    <item >8</item>
    <item>9</item>
</string-array> 
```

主页.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/btn_about"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="@drawable/home" >

 <Button
    android:id="@+id/btn_start"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="183dp"
    android:gravity="center"
    android:text="Start" />

 <Button
    android:id="@+id/btn_about"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/btn_start"
    android:layout_below="@+id/btn_start"
    android:layout_marginTop="16dp"
    android:gravity="center"
    android:text="About me" />

 <Button
    android:id="@+id/btn_exit"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/Button01"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="15dp"
    android:gravity="center"
    android:text="Exit" />

  </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:48:10.613

在您`main.java`的**onClick**或任何其他事件中，您必须为 home 活动调用 start 活动。或者，如果您希望家庭活动首先加载，那么您可以将家庭活动设为主要活动并删除其他主要活动。将您的家庭活动转换为`LAUNCHER`活动。

# jquery - 添加额外行后，tablersorter 不起作用

> ID：13797158
> 
> 赞同：0
> 
> 时间：2012-12-10T08:12:35.653
> 
> 标签：jquery, jquery-plugins, tablesorter

我有一个下表。

```
<table id="myTable" class="tablesorter"> 
<thead> 
<tr> 
    <th>No</th>
    <th>Name</th>     
    <th>Email</th> 
    <th class='time'>Time</th> 
    <th>Price</th> 
</tr> 
</thead> 
<tbody> 
<tr> 
    <td>1</td>
    <td>Smith</td>    
    <td>jsmith@gmail.com</td> 
    <td class='time'>60 mins</td> 
    <td>45</td> 
</tr> 

</tbody> 
</table> 
```

我正在使用 jquery tablesorter 插件。Onready，tablesorter 运行良好。我可以看到所有列都可以排序。

在我的应用程序中，单击“刷新”按钮后，将动态添加或删除行。这意味着，表格内容将被更改。表修改后，排序不起作用。

这是[jsfiddle 演示](http://jsfiddle.net/umeshpatil86/6jAyF/9/)。

下面是调用 tablesorter 的代码。

```
 $("#myTable").tablesorter({
        headers: { 
            4: { sorter: "integer"}, 
            2: {sorter: false} 
        },
        debug:true,
        textExtraction:function(node){
           var $node = $(node)
           var text = $node.text();  
           if ($node.hasClass('time')) {
                text = text.replace('mins', '');
            };
            return text;            
        }
    }); 
```

在给定的演示示例中，添加的行成为第一行并且不用于排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:25:05.943

API 文档的初步查看显示了此演示链接：[http ://tablesorter.com/docs/example-empty-table.html](http://tablesorter.com/docs/example-empty-table.html)

关键是这行代码：

```
 // let the plugin know that we made a update 
    $("table").trigger("update"); 
```

如果您将其添加到您的代码中...

```
 $("#myTable").append(row).trigger("update"); 
```

...[它有效](http://jsfiddle.net/dwFHG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:26:50.293

Either apply [THE FIX](http://www.daniweb.com/web-development/javascript-dhtml-ajax/code/376219/tablesorter-jquery-plugin-a-fix) to Christian Bach's original version or use Mottie's improved v2.x, [HERE](http://wowmotty.blogspot.co.uk/2011/06/jquery-tablesorter-missing-docs.html#events).

Do not rely on `.trigger("update")` in the unfixed original version.

# extjs - 作为网格编辑器的容器控件不会更新值

> ID：13797159
> 
> 赞同：2
> 
> 时间：2012-12-10T08:12:41.973
> 
> 标签：extjs, extjs4.1, gridpanel

所以我有一个两列的网格，第一列只有文本，第二列需要有一个自定义控件（带有一个复选框和一个组合框）

检查屏幕：

这是一个screenie的链接： ![屏风](../Images/f52ae490356ff349334a26ae86955899.png)

**问题**：_

当我单击更新以更新行时。第一**列**得到更新，但第二列没有

我天真地`getValue()`在我的自定义控件中添加了一个，但没有运气！（注意：我使用的是行编辑插件）

这是我的代码：

```
Ext.define('MainGrid', {
    extend: 'Ext.grid.Panel',
    //defs for all the toolbars and buttons
    plugins: [rowEditing],
    columns: [
                {
                    xtype: 'rownumberer'
                },
                {
                    xtype: 'gridcolumn',
                    text: 'Column Titles',
                    dataIndex: 'ColumnTitle',
                    editor: {
                        xtype: 'textfield',
                    }
                },
                {
                    xtype: 'gridcolumn',
                    sortable: false,
                    align: 'center',
                    dataIndex: 'IssueCondition',
                    editor: {
                        xtype: 'reportpopulation'
                    }]
}); 
```

这里`reportpopulation`是**自定义控件**。这是它的代码：

```
Ext.define('SelectPopulation', {
    extend: 'Ext.container.Container',
    itemId: 'ctrSelectpopulation',
    alias: 'widget.reportpopulation',
    layout: {
        type: 'hbox'
    },
    initComponent: function () {
      //code to add combo box and checkbox snipped
      ....
    },
    getValue: function () {
        //This doesn't work! 
        return "Booo";
    }
}); 
```

所以点击更新不会：

*   有什么我想念的吗？
*   我应该从 FieldBase 继承吗？我可以使用多个控件并使用 FieldBase 创建类似于 screenie 的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T12:36:30.600

这有效，即使您`getValue()`正在工作，问题是您在该网格列 ( `IssueCondition`) 上使用了自定义类型值并且没有为其指定任何渲染器，请尝试以下操作：

```
Ext.define('MainGrid', {
extend: 'Ext.grid.Panel',
height: 300,
plugins: [Ext.create('Ext.grid.plugin.RowEditing', {
    clicksToEdit: 1
})],
columns: [{
    xtype: 'rownumberer'
}, {
    xtype: 'gridcolumn',
    text: 'Column Titles',
    dataIndex: 'ColumnTitle',
    editor: {
        xtype: 'textfield'
    }
}, {
    xtype: 'gridcolumn',
    sortable: false,
    text: "Issue Condition",
    align: 'center',
    dataIndex: 'IssueCondition',
    width: 200,
    editor: {
        xtype: 'reportpopulation'
    },
    renderer: function (v, attr, rec) {
        console.info(arguments);
        return 'cb: ' + rec.data.IssueCondition.cb + ' combo: ' + rec.data.IssueCondition.combo;
    }
}],
store: Ext.create("Ext.data.Store", {
    fields: ["ColumnTitle", "IssueCondition"],
    proxy: {
        type: "memory",
        reader: {
            type: "json"
        }
    }
})
});

Ext.define('SelectPopulation', {
extend: 'Ext.container.Container',
itemId: 'ctrSelectpopulation',
alias: 'widget.reportpopulation',
layout: {
    type: 'hbox'
},
initComponent: function () {
    Ext.apply(this, {
        items: [{
            xtype: "checkbox"
        }, {
            xtype: "combobox",
            allowBlank: false,
            store: [
                [0, 'Zero'],
                [1, 'One'],
                [2, 'Two']
            ]
        }]
    });
    this.callParent(arguments);
},
getValue: function () {
    return {
        cb: this.child('checkbox').getValue(),
        combo: this.child('combobox').getValue()
    };
}
}); 
```

请注意，这只是一个示例。

[在这里检查小提琴](http://jsfiddle.net/voidmain/ktWpQ/embedded/result/)

希望这可以帮助。

# c# - WCF 事务不起作用

> ID：13797162
> 
> 赞同：1
> 
> 时间：2012-12-10T08:13:10.537
> 
> 标签：c#, .net, wcf

我在 WCF 服务中使用事务时遇到问题。我希望我的应用程序表现得像这样：客户端开始编辑一些放在数据库中的数据。在他按下“编辑”按钮后，交易开始并持续到他结束编辑并按下“接受”按钮。然后交易结束。问题是当他没有按“接受”并退出应用程序时。事务仍在进行中，唯一合理的解决方案是设置事务超时。我应该在哪里放置有关超时的信息以使服务知道事务必须在一段时间后完成？

我尝试添加一个属性`[ServiceBehavior(TransactionTimeout="00:01:00")]`，但之后客户端无法访问服务。添加`<machineTimeout "00:01:00">`到 app.config 以同样的方式结束......

详细留言：

> 下载 ' 时出错`http://127.0.0.1:8732/Design_Time_Address/WebService/BSService/?wsdl'`。无法连接到远程服务器 无法建立连接，因为目标计算机主动拒绝它`127.0.0.1:8732`元数据包含无法解析的引用：“ `http://127.0.0.1:8732/Design_Time_Address/WebService/BSService/?wsdl`”没有在“ `http://127.0.0.1:8732/Design_Time_Address/WebService/BSService/?wsdl`”处侦听可以接受消息的端点。这通常是由不正确的地址或 SOAP 操作引起的。无法连接到远程服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:20:04.593

mTransactionConnection、mTransaction 和 mTransactionSQLCommand 是类中的私有属性，打开连接、启动事务、执行工作、提交/回滚、关闭事务。但是这个对象的实例必须存在于整个事务中。

```
 Public Function StartTransaction() As Boolean
        Dim result As Boolean = False

        mTransactionConnection = New SqlConnection(_ConnectionString)
        mTransactionConnection.Open()
        mTransaction = mTransactionConnection.BeginTransaction()

        result = True

        Return result

    End Function

    Public Function RunSQL(ByVal strSQL As String) As Integer

        Dim intReturn As Integer = 0

        Dim objSQLConnection As SqlConnection
        Dim objSQLCommand As SqlCommand

        objSQLConnection = New SqlConnection(_ConnectionString)
        objSQLCommand = New SqlCommand(strSQL, objSQLConnection)

        objSQLCommand.CommandType = CommandType.Text
        objSQLCommand.CommandTimeout = intCommandTimeOut

        'set  params

        objSQLConnection.Open()

        'execute SQL
        intReturn = objSQLCommand.ExecuteNonQuery()

        objSQLCommand.Dispose()

        objSQLConnection.Close()

        return intReturn

    End Function

    Public Sub CommitTransaction()

        mTransaction.Commit()

    End Sub

    Public Sub RollbackTransaction()

        mTransaction.Rollback()

    End Sub

    Public Sub CloseTransaction()

        mTransaction.Dispose()

        mTransactionConnection.Close()

        mTransaction = Nothing
        mTransactionConnection = Nothing

    End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:14:35.993

我们保持 WCF 事务相当简单。我们为各个表创建了单独的创建/修改方法。然后我们在启动事务的服务中添加了一个“复合”函数（使用 db 命令），插入/更新单个表，然后提交或回滚事务。交易结果由客户报告。

这允许客户端收集数据并应用业务规则，调用服务中的事务函数使用数据库内置的事务处理来完成真正的数据库事务工作。

只是一个想法。

# android - AlarmManager 启动 Intent 的“过程很糟糕”

> ID：13797172
> 
> 赞同：1
> 
> 时间：2012-12-10T08:14:23.620
> 
> 标签：android, process, broadcastreceiver, alarmmanager, repeatingalarm

我有一项需要在 Android 设备上频繁运行的任务。我在启动时运行以下代码：

```
am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);

pollIntent = new Intent(context,PollTask.class);

pollPendingIntent = PendingIntent.getBroadcast(context, 0, pollIntent, 0);

am.setRepeating(AlarmManager.RTC_WAKEUP,
            System.currentTimeMillis(), 1000*15, pollPendingIntent); 
```

请不要唠叨我关于电池使用的问题，这是针对自定义嵌入式应用程序的，所以这不是问题。

问题是该任务在一定时间后频繁停止运行。我开始查看 logcat 并注意到每 15 秒，在它停止工作后，我会收到一条错误消息，指出无法启动 Intent 并且“进程错误”。此时，我在代码中使用了一个单独的进程

```
android:process=":remote" 
```

在 PollTask​​ 广播接收器的 Android 清单中。

我删除了这段代码，所以我现在只是在默认线程上运行广播接收器。它似乎正在工作，但如果我知道确切的问题是什么，我会更满意。不幸的是，我之前提到的错误消息一点也不冗长。我现在仍在几台设备上对此进行测试，看看它会持续运行多长时间。

关于这个错误，我需要知道什么？使用相同的过程有什么缺点吗？

# svn - 工作副本的 Unversion 文件夹 - TortoiseSVN 1.7

> ID：13797176
> 
> 赞同：3
> 
> 时间：2012-12-10T08:14:39.773
> 
> 标签：svn, tortoisesvn

如何取消我的 tortoiseSVN 工作副本中的子文件夹的版本？我找到了该指南[http://tortoisesvn.net/unversion.html](http://tortoisesvn.net/unversion.html)但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:44:11.420

如果此文件夹需要在存储库中保持轻松可用，而不是在您的工作副本中，您需要的是[稀疏检查](http://svnbook.red-bean.com/en/1.7/svn.advanced.sparsedirs.html)（另请参见[http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-checkout。 html#tsvn-dug-checkout-depth](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-checkout.html#tsvn-dug-checkout-depth)）。

查看父文件夹（或项目根目录），但不是完全深入。然后用适当的深度更新每个子文件夹，省略你不想要的 WC。

# android - parser.setInput 失败

> ID：13797187
> 
> 赞同：0
> 
> 时间：2012-12-10T08:15:49.673
> 
> 标签：android, xml-parsing

我的代码是：

```
 // get a new XmlPullParser object from Factory  

    XmlPullParserFactory xmlPullParserFactory = XmlPullParserFactory.newInstance();
    xmlPullParserFactory.setNamespaceAware(false);
    XmlPullParser parser  = xmlPullParserFactory.newPullParser();

    // set input source  
    URL input = new URL(url);
    parser.setInput(input.openStream(), null); 
```

功能`setInput`失败。

你能帮我理解为什么吗？

当我使用 Android 2.2 时它可以正常工作，但在使用最新的 Android 4.2 时就不行了。这是相对的吗？

我再次检查它并失败，因为：`input.openStream()`

这是错误日志：

```
FATAL EXCEPTION: main
12-10 12:42:29.224: E/AndroidRuntime(1774): java.lang.IllegalStateException: Could not execute method of the activity
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.view.View$1.onClick(View.java:3597)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.view.View.performClick(View.java:4202)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.view.View$PerformClick.run(View.java:17340)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.os.Handler.handleCallback(Handler.java:725)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.os.Looper.loop(Looper.java:137)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.app.ActivityThread.main(ActivityThread.java:5039)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at java.lang.reflect.Method.invokeNative(Native Method)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at java.lang.reflect.Method.invoke(Method.java:511)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at dalvik.system.NativeStart.main(Native Method)
12-10 12:42:29.224: E/AndroidRuntime(1774): Caused by: java.lang.reflect.InvocationTargetException
12-10 12:42:29.224: E/AndroidRuntime(1774):     at java.lang.reflect.Method.invokeNative(Native Method)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at java.lang.reflect.Method.invoke(Method.java:511)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.view.View$1.onClick(View.java:3592)
12-10 12:42:29.224: E/AndroidRuntime(1774):     ... 11 more
12-10 12:42:29.224: E/AndroidRuntime(1774): Caused by: android.os.NetworkOnMainThreadException
12-10 12:42:29.224: E/AndroidRuntime(1774):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at java.net.URL.openStream(URL.java:462)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at com.example.eduloops.LoginScreen.parse(LoginScreen.java:201)
12-10 12:42:29.224: E/AndroidRuntime(1774):     at com.example.eduloops.LoginScreen.onClickLoginButton(LoginScreen.java:130)
12-10 12:42:29.224: E/AndroidRuntime(1774):     ... 14 more
12-10 12:42:29.782: E/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T15:41:59.667

您正在主线程上使用网络代码。在后台线程中进行联网。[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)是一个不错的选择。

# c# - 强制分支

> ID：13797192
> 
> 赞同：0
> 
> 时间：2012-12-10T08:17:05.280
> 
> 标签：c#, perforce

我需要对应用程序进行一些测试更改。该应用程序具有版本控制（由 Perforce）。如何创建一个我不打算重新签入的分支（来自 Perforce），以便我可以进行一些测试修改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:20:06.147

这取决于您不打算将其重新签入是什么意思。您的意思是从不，或者只是不进入主分支？

如果您真的只想进行一些本地更改，然后将它们丢弃，而不需要对更改本身进行任何形式的版本控制，那么您根本不需要分支。只需同步，检查您正在更改的内容，然后恢复文件。如果您想在以后的构建中检查本地更改，您甚至可以在工作时重新同步文件（解决冲突）。只是不要提交任何东西，你就很好（只要记住 P4 没有备份你的本地更改，所以如果你的 PC 死机并且你没有备份它，很难）。

如果您希望能够在本地更改和正常构建之间切换，您可以“搁置”您的更改，这实际上将它们提交到 P4，但将它们保留在更改列表中，而不是将它们实际集成到主分支中。这样，您可以恢复到文件的“真实”版本，并在以后再次重新同步您自己的更改 - 甚至可能在不同的机器上。这是一种能够进行本地更改的轻量级方式，同时仍然在 P4 服务器上拥有一个副本，而不会污染 depot。

但是，如果您想要自己的适当的更改跟踪分支，则可以将要作为其基础的版本集成到软件仓库的新部分中，然后在处理它时使用与之同步的客户端规范。您可以随时在任一方向上自由地在您的分支之间进行集成。你可以分支整个树，或者只是它的一个子集，使用客户端规范来分类哪些位去哪里。

或者，最近版本的 P4 具有“流”，这是一种处理软件仓库的替代方式，更适合并行运行多个开发和发布分支。这可能不是你要找的。

至于具体*如何*做这些事情，我建议查看 P4 的网站，该网站有很好的文档和大量教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-28T17:15:53.190

实际上，您不需要创建新分支来测试您的更改。只需制作一个包含您的应用程序的客户端并同步您的本地计算机。之后，您需要更改特定文件或添加新文件或搁置删除。然后只需使用搁置构建您的应用程序。如果您在构建工件中发现您的更改并且您认为您的更改是正确的，那么您可以将其提交给 perforce。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-20T04:57:48.937

最简单的方法是转到“蒸汽”选项卡。创建一个新流并选中您要从中分支的分支复选框。超级容易。

# c# - 使用 Linq 中的查询按最可靠的数据源过滤

> ID：13797196
> 
> 赞同：0
> 
> 时间：2012-12-10T08:17:28.120
> 
> 标签：c#, asp.net, linq

我对使用 Linq 相当陌生，这对我来说在从 ac# 数据表中过滤最佳数据源时有点棘手。我需要对数据表执行以下过滤。数据背后的背景是它是一组记录，其中包含来自不同数据源的独立冗余，以实现故障保护。如果某个数据源在某个时间点损坏，则辅助或第三个数据源将成为该事件线程的主要源。

原始数据（例如）：signintable：

```
source  First       Last
d1      John        Smith
d1      John        Smith
d3      John        Smith
d1      Jane        Doe
d2      Jane        Doe
d3      Richard     Miles
d3      Richard     Miles
d1      Richard     Miles 
```

我想为此添加两列：按（名字、姓氏和数据源）分组的唯一成员计数，以及基于不同组（名字、姓氏、数据源）但按该特定名字的任何数据源排序的 uniqueRecordGroupnumber姓氏的记录最多，最少。

```
source  First   Last    Count   UniqueRecordGroup
d1      John    Smith   2       1
d1      John    Smith   2       1
d3      John    Smith   1       2
d1      Jane    Doe     1       1
d2      Jane    Doe     1       2
d3      Richard Miles   2       1
d3      Richard Miles   2       1
d1      Richard Miles   1       2 
```

然后我最终将只过滤掉主要（唯一记录组 1），以消除该特定记录的冗余/不太可靠的数据源。

```
source  First   Last    Count   UniqueRecordGroup
d1      John    Smith   2       1
d1      John    Smith   2       1
d1      Jane    Doe     1       1
d3      Richard Miles   2       1
d3      Richard Miles   2       1 
```

上述步骤是如何在数据表（例如数据表 signintable）上使用 Linq 完成的？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:09:45.927

现在完成此应用程序功能后，我不建议尝试为此目的使用 Linq。我发现没有多少资源和论坛专门用于更多涉及的 Linq 查询，而对于 Oracle 或 SQL，至少在需要的部分上有很多论坛和帖子。因此，我没有在 Linq 脚本的 c#/asp.net 层中添加该功能，而是在数据库查询层中添加了它。

在 Oracle 中，我通过 4 个步骤完成了上述操作：

```
--1\.  creating a derived table of unique instances of main data (a): (First, Last) and a count of instances in the main table:

b As
(select First, Last, source, COUNT(*) distinctpersoncount
From a
GROUP BY First, Last, source)

--2\.  Rank the fills from greatest to least.

c As
(select b.*, row_number() over(partition by  First, Last
order by distinctpersoncount desc) as distinctpersonrowid
from b

--3\.  combine the new distinctperson columns into a joined table with the original data a.

d As
(select a.*, c.distinctpersoncount, c.distinctpersonrowid
from a
left join c
on
.... (join conditions here)

--4\.  select all the data in d, filtering by distinctpersonrowid = 1 (the best source). 
```

# .net - .net RSA - 更改私钥

> ID：13797197
> 
> 赞同：0
> 
> 时间：2012-12-10T08:17:31.730
> 
> 标签：.net, security, encryption

我正在测试 RSA 算法，只是为了尝试测试使用错误的私钥（D 参数）解密时发生的情况。

我正在使用`RSACryptoServiceProvider`默认构造函数（无参数）。我加密一个字节数组，然后更改私钥。为此，我导出到`RSAParameters`对象修改 D 参数，然后再次导入。然后我解密信息，结果是原始数据！！

所以我应该在它的工作原理上缺少一些东西。这是代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using System.Security.Cryptography;
using Apoyo;

namespace PruebaRSA
{
    class Program
    {
        static void Main(string[] args)
        {
            Ayuda ayuda = new Ayuda();
            byte[] datosOriginales = new byte[10];
            byte[] datosCifrados;
            byte[] datosDescifrados;

            CrearArrayDatos(datosOriginales);

            RSACryptoServiceProvider rsaCSP = new RSACryptoServiceProvider();
            datosCifrados = rsaCSP.Encrypt(datosOriginales, false);

            //--------------------------------------------------------------
            //Decrypt with the original Private Key

            datosDescifrados = rsaCSP.Decrypt(datosCifrados, false);

            Console.WriteLine("Texto Cifrado:");
            ayuda.WriteHex(datosCifrados, datosCifrados.Length);
            Console.WriteLine("Texto Descifrado:");
            ayuda.WriteHex(datosDescifrados, datosDescifrados.Length);

            //Change the Private Key
            RSAParameters rsaParameters = rsaCSP.ExportParameters(true);
            byte[] newD = new byte[rsaParameters.D.Length];
            CrearArrayDatos(newD);
            rsaParameters.D = newD;
            rsaCSP.ImportParameters(rsaParameters);

            //Decrypt with the new Private Key
            datosDescifrados = rsaCSP.Decrypt(datosCifrados, false);
            Console.WriteLine("Texto Descifrado:");
            ayuda.WriteHex(datosDescifrados, datosDescifrados.Length);

            rsaParameters = rsaCSP.ExportParameters(true);
            Console.WriteLine("Clave privada utilizada: ");
            ayuda.WriteHex(rsaParameters.D, rsaParameters.D.Length);

            //____________________________________________

            Console.Write("Presionar Tecla");
            Console.Read();

        }

        private static void CrearArrayDatos(byte[] datos)
        {
            for (byte i = 0; i < datos.Length; i++)
            {
                datos[i] = i;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:41:39.883

RSAParameters 包含可用于使用中国剩余定理加速 RSA 解密的附加参数。这种方式解密不需要D，只需要Dp和Dq。因此，如果您更改这两个参数之一，那么我预计解密会失败。

当然，为了良好的安全性，如果 .net 也提供一致性检查，这样就可以检测到参数不一致的私钥。（不确定是否没有实施这种一致性检查，或者我只是找不到它）。

# android - 拨一个在 Android 手机应用程序中显示另一个电话号码

> ID：13797200
> 
> 赞同：2
> 
> 时间：2012-12-10T08:18:01.597
> 
> 标签：android

寻找解决方案，但没有找到任何类似的东西。

从 Android Phone 应用程序拨打号码时，根据之前预定义的前缀，我拦截了一个呼叫。之后我又打了一个电话，号码是某个访问号码 + 2 秒暂停 + 截获的号码 + #-sign。我的问题是 - 是否有任何可能性（任何额外的 ACTION_CALL 意图或其他东西）被截获而不是访问号码显示在 Android 手机应用程序中？

示例：访问号码：999999 前缀：011 号码：011552657659

因此，新拨打的电话是 999999,011552657659#。结果：电话应用程序显示 999999 和其他数字按音调拨号，而我希望用户看到 011552657659 代替。

我的代码是：

```
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse("tel:999999,011552657659#");
context.startActivity(intent); 
```

先感谢您！

# flash - 如何从 AS3 代码操作在 Flash IDE 中创建的多重掩码

> ID：13797202
> 
> 赞同：2
> 
> 时间：2012-12-10T08:18:12.357
> 
> 标签：flash, mask

我使用 Flash CS5.5。我手动创建了几个图层，其中一些应用了在其中一个图层上创建的形状蒙版。 [这里看图片](http://i.stack.imgur.com/EqxK5.png)

然后我使用 AS3 代码中的儿童（addChild、removeChild）进行操作。之后，掩码消失 8(。我遇到了一个问题，即每个子对象都没有掩码，代码如下。

```
 `for(var i:uint=0; i < this.numChildren; i++)
    {
        trace("poster["+String(i)+"] =",this.getChildAt(i),"mask =",this.getChildAt(i).mask);
        //poster[0] = [object Shape] mask = null
        //poster[1] = [object PosterItemsContainer] mask = null
        //poster[2] = [object PosterItemsContainer] mask = null
        //poster[3] = [object PosterItemsContainer] mask = null
        //poster[4] = [object PosterItemsContainer] mask = null
        //poster[5] = [object PosterBut_3] mask = null
        //poster[6] = [object PosterBut_3] mask = null
        //poster[7] = [object PosterBut_3] mask = null
        //poster[8] = [object PosterBut_3] mask = null
        //poster[9] = [object TextField] mask = null
        //poster[10] = [object TextField] mask = null
    }`
```

 `当然，我可以从 AS3 代码动态地创建所有这些孩子，然后可能不会出现掩码属性的问题，但在这种情况下，我必须创建用于掩码对象的容器。我想尝试创建一层嵌套并处理神秘的 Flash IDE 图层蒙版。`

# java - Spring Security 过滤器有多个 URL 拦截映射

> ID：13797207
> 
> 赞同：3
> 
> 时间：2012-12-10T08:18:39.427
> 
> 标签：java, spring, spring-security, interceptor

我正在关注本教程： [http ://www.mkyong.com/spring-security/spring-security-hello-world-example/](http://www.mkyong.com/spring-security/spring-security-hello-world-example/)

在里面`spring-security-xml`

```
<http auto-config="true">
    <intercept-url pattern="/welcome*" access="ROLE_USER" />
</http> 
```

而在 web.xml 中，我们必须定义实际的过滤器

```
<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
              org.springframework.web.filter.DelegatingFilterProxy
            </filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

所以我不明白，我们将拦截映射到 2 个地方的 2 个 url。到`/welcome*`和`/*`。为什么我们需要这两个？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T08:34:30.557

`DelegatingFilterProxy`不是 Spring Security 类。它来自 Spring Web 包。

> 标准 Servlet 2.3 过滤器的代理，委托给实现过滤器接口的 Spring 管理的 bean。支持 web.xml 中的“targetBeanName”过滤器 init-param，在 Spring 应用程序上下文中指定目标 bean 的名称。

当你使用

```
<http auto-config="true">

</http> 
```

Spring Security 创建（隐式）具有名称的 bean `springSecurityFilterChain`（这就是您`<filter-name>springSecurityFilterChain</filter-name>`在 中的原因`web.xml`）并且所有请求（`/*`）都由它（由 Spring Security）处理。

然后配置 Spring Security 并为其提供更具体的 URL ( `/*welcome`)。

```
<intercept-url pattern="/welcome*" access="ROLE_USER" /> 
```

这就像在说：

*   所有 URL 请求 ( `/*`) 都应由 Spring Security 调查
*   当 URL 匹配时`/welcome*`，主体应该具有`ROLE_USER`角色。

如果您的应用程序需要更高级的安全处理，您可以自己创建过滤器链 bean 并手动配置所有过滤器。

例子：

```
<!-- Filter Chain -->
<bean id="springSecurityFilterChain"
      class="org.springframework.security.web.FilterChainProxy">
    <constructor-arg>
        <list>
            <sec:filter-chain pattern="/favicon.ico"
                              filters="none"/>

            <sec:filter-chain pattern="/img/**"
                              filters="none"/>

            <sec:filter-chain pattern="/**" 
                 filters="bannedIPsFilter, <!-- custom filter -->
                         channelProcessingFilter,
                         securityContextPersistenceFilter,
                         concurrentSessionFilter,
                         logoutFilter,
                         secondAuthenticationFilter, <!-- custom filter -->
                         openIDAuthenticationFilter,
                         usernamePasswordAuthenticationFilter,
                         anonymousAuthenticationFilter,
                         captchaFilter, <!-- custom filter -->
                         sessionManagementFilter,
                         exceptionTranslationFilter,
                         filterSecurityInterceptor,
                         switchUserProcessingFilter"
                    />
        </list>
    </constructor-arg>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:39:53.923

`springSecurityFilterChain`是此过滤器链内所有弹簧安全过滤器的外观。它在 web.xml 中注册为单独的 servlet 过滤器。

`/welcome*`- 是特定于 spring-security 的“内部”过滤器的配置，它不存在于 web.xml 中，并且 servlet 容器对此一无所知。

# iphone - 在 iPhone 中连接协议

> ID：13797208
> 
> 赞同：1
> 
> 时间：2012-12-10T08:18:39.127
> 
> 标签：iphone, ios, hook, cydia-substrate

我想在 iOS 中挂钩委托（协议）方法，谁能告诉我怎么做？

比如钩子法`applicationDidFinishLaunching:`

我这样做，但它不工作......

```
extern IMP original_UIApplication_applicationDidFinishLaunching;
extern void replaced_UIApplication_applicationDidFinishLaunching(UIApplication<UIApplicationDelegate> * self, SEL cmd, UIApplication* application); 

MSHookMessageEx(objc_getMetaClass("UIApplication"),
                @selector(applicationDidFinishLaunching:), 
                (IMP)replaced_UIApplication_applicationDidFinishLaunching, 
                (IMP *)&original_UIApplication_applicationDidFinishLaunching); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:08:41.893

applicationDidFinishLaunching 是由应用程序 DELEGATE 实现的方法，而不是 UIApplication 本身。绝对没有理由需要在 UIApplication 上调配方法。只需在您的委托中实现这些方法。

对于您想要覆盖 Apple 提供的类中的方法的情况，您可以通过在它们上创建一个类别来实现。添加的类别方法将通过相同的方法签名覆盖系统方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-05T06:35:16.970

你应该交换实现协议的类的方法。像这样：

```
 // Protocol Method Exchange
    int numClasses = objc_getClassList(NULL, 0);

    Class *list = (Class *)malloc(sizeof(Class) * numClasses);
    objc_getClassList(list, numClasses);
    for (int i = 0; i < numClasses; i++) {
        if (class_conformsToProtocol(list[i], @protocol(TowstViewDelegate)) &&
            class_getInstanceMethod(list[i], @selector(submit))) {
            NSLog(@"%@ sumit have exchanged",NSStringFromClass(list[i]));
            jm_swizzleSelector(list[i], @selector(submit), @selector(hk_submit));
        }
    }
    free(list);
    NSLog(@"Exchange END"); 
```

# c# - 无法将“ADODB.Recordset”类型的对象转换为“MSDATASRC.DataSource”类型

> ID：13797209
> 
> 赞同：0
> 
> 时间：2012-12-10T08:18:50.193
> 
> 标签：c#, vb6, vb6-migration

我有一个将 Vb6 迁移到 c#.net 的项目。当我运行这个 c# 解决方案时，我得到了一个 **InvalidCastException**，例如**Unable to cast object of type 'ADODB.Recordset' to type 'MSDATASRC.DataSource'**

在语句**DataGrid1.DataSource = (MSDATASRC.DataSource)(object)(Module1.rs);** .

其中 rs 生成如下： public static ADODB.Connection conn = null; 公共静态 ADODB.Recordset rs = null;

```
 conn = new ADODB.Connection();
     conn.Open("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + System.Windows.Forms.Application.StartupPath + "\\myDatabase.mdb;Persist Security Info=False",String.Empty,String.Empty,-1);

     rs = new ADODB.Recordset();         
     rs.ActiveConnection = conn;
     rs.CursorLocation = (ADODB.CursorLocationEnum)(MSAdodcLib.CursorLocationEnum.adUseClient);
     rs.CursorType = (ADODB.CursorTypeEnum)(MSAdodcLib.CursorTypeEnum.adOpenDynamic);
     rs.LockType = ADODB.LockTypeEnum.adLockOptimistic;
     rs.Source = "SELECT * FROM MyTable";

     rs.Open(null,null,ADODB.CursorTypeEnum.adOpenUnspecified,ADODB.LockTypeEnum.adLockUnspecified,-1); 
```

任何人都可以请你帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:22:43.960

尝试：

```
 DataGrid1.DataSource = DataGrid1.DataSource = (MSDATASRC.DataSource)(object)(Module1) 
```

# java - Java 编译器重载

> ID：13797218
> 
> 赞同：-11
> 
> 时间：2012-12-10T08:20:07.863
> 
> 标签：java

为什么java允许重载？一个具有 10 个同名方法的类会给编译器带来压力，而且还会助长不良的编程习惯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:22:56.347

java 编译器使用消息签名（名称、接受的参数和类型以及在某种程度上的返回类型）而不是方法名称来标识方法，因此编译器没有额外的压力。如果两种方法达到相同的结果，只是在完成其工作的参数上有所不同，为什么不应该给这两种方法取相同的名称呢？通过这种方式，它使您的代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:23:04.287

主要优点是代码的简洁性。否则，您将有许多方法以不同的名称执行类似的操作。

您还可以阅读[本文档](http://www.ehow.com/info_12137692_advantages-disadvantages-overloading-method-java.html)以了解它的其他优点。

# c++ - 来自不同文件夹的 CMake 测试源

> ID：13797224
> 
> 赞同：2
> 
> 时间：2012-12-10T08:20:34.470
> 
> 标签：c++, cmake, googletest, ctest

我开始使用 CMake 来使用 Qt 创建一个项目并使用 Google Test 对其进行测试。目前，我成功地找到了编译和链接所有必需库的方法。但是，我找不到将源链接到具有以下项目结构的测试文件的方法：

```
root
|
+-- CMakeLists.txt
+-- src
| |
| +-- CMakeLists.txt
| +-- MyClass.h
| +-- MyClass.cpp
|
+-- test
| |
| +-- CMakeLists.txt
| +-- MyClassTest.cpp
|
+-- lib
  |
  +-- gtest-1.6.0
    |
    +-- CMakeLists.txt 
```

根 CMakeLists.txt 包含 gtest、src 和 test 文件夹的 add_subdirectory。我已成功编译并运行“Hello world”应用程序和简单的 EXPECT_TRUE(true) 测试，以检查每个部分是否正确编译。不幸的是，我找不到将源文件包含到测试中的方法。是否可以使用以下项目结构？

PS我知道可以将我的源代码编译为库并将其链接到测试，但我不喜欢这种方法，因为它更适合集成测试，而不是单元测试......

**编辑：**向树中添加了类名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:14:42.070

您可以在根 CMakeLists.txt 级别添加一个全局变量：

```
set(ALL_SRCS CACHE INTERNAL "mydescription" FORCE) 
```

在第一个 add_subdirectory(src) 中，您可以执行以下操作：

```
set(ALL_SRCS ${ALL_SRCS} blabla.cpp CACHE INTERNAL "description") 
```

在 add_subdirectory(test) 中，您继续：

```
set(ALL_SRCS ${ALL_SRCS} bla_test.cpp CACHE INTERNAL "description") 
```

You can then do, add_executable, or library or whatever, with all your sources files.

EDIT: add trick for global variables in CMake.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:51:10.453

在根 CMakeLists.txt 中，您可以添加一个`include_directories(src)`This 也将被测试使用。您可以做的另一件事是在测试 CMakeLists.txt 中添加一个`include_directories(${<projectName>_SOURCE_DIR})`where **projectName**是`project(myproj)`在 src/CMakeLists.txt 中使用指定的名称（当然，如果您在其中指定了一个项目。还要检查有关**project的**[文档](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3aproject)）

# java - Java REST Web 服务的服务细节

> ID：13797225
> 
> 赞同：1
> 
> 时间：2012-12-10T08:20:34.750
> 
> 标签：java, web-services, rest

我是 Java 中的 Web 服务的新手。

在 SOAP Web 服务中，我们有**wsdl**来告诉我们操作等服务，但在 REST 中，我们没有**wsdl**。

所以，我的问题是如果有人想知道服务细节，那么在 REST Web 服务的情况下如何找到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:27:16.850

对于 REST，目前还没有单一的既定方法可以实现这一目标，但是出现了几个选项：

*   **Swagger** [http://swagger.wordnik.com/](http://swagger.wordnik.com/) - 检查源代码中的注释（支持 Web 框架 JAX-RS 注释、Spring 注释、Play2）并生成描述 API 的 JSON 文档。[可以使用swagger-ui](https://github.com/wordnik/swagger-ui)将此 JSON 文档显示为作为最终用户文档的交互式网页。
*   **Json Home** [https://datatracker.ietf.org/doc/html/draft-nottingham-json-home-02](https://datatracker.ietf.org/doc/html/draft-nottingham-json-home-02) - 描述您的 RESTful API 的 JSON 文档规范
*   **WADL** [http://en.wikipedia.org/wiki/Web_Application_Description_Language](http://en.wikipedia.org/wiki/Web_Application_Description_Language)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T08:27:49.113

SOAP 引入了 WSDL 来描述服务，可以自动发现服务并与 UDDI 等机制集成。实际上，SOAP 就像硬编码的 RPC 一样使用。如果使用 REST，异常处理、操作类型、幂等性等许多细节都是使用众所周知的 HTTP 机制处理的。您唯一需要知道的是有效负载编码。如果您使用 XML，您可以使用 XSD 来描述服务，如果您使用 JSON，则需要自己处理（它更简单）。您的 URL 结构应设计得足够直观，以便在一页自述文件中进行描述。简而言之：WebServices 是如此复杂，您需要大量的样板，REST 服务应该如此简单，以至于开发人员不必重新定义和重新记录基础知识。

# ios6 - 在 IOS 6 中实现 Google Analytics 2

> ID：13797226
> 
> 赞同：1
> 
> 时间：2012-12-10T08:20:38.133
> 
> 标签：ios6, google-analytics

在将应用程序更新到 ios 6 时，我发现谷歌分析也需要更新。

按照这个方法，我发现它需要一个扩展 GAITrackedViewController 类的 ViewController

[https://developers.google.com/analytics/devguides/collection/ios/v2/](https://developers.google.com/analytics/devguides/collection/ios/v2/)

该指南在 ViewDidLoad 方法中提到了以下代码，而我希望在某些特定方法中使用它。它似乎不起作用。好心提醒。

```
self.trackedViewName = @"My App"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:32:41.397

使用 GAITrackedViewController 意味着放弃对何时调用 [tracker trackView:viewName] 的控制。设置 trackedViewName 允许 GAITrackedViewController 随时调用 [tracker trackView:self.trackedViewName]（大概在 viewDidAppear 中）。

此外，GAITrackedViewController 在这个属性上使用了一个 KVO，所以在执行 self.trackedViewName = @"view name" 之前不会打开视图跟踪。

在 viewDidLoad 中调用它可确保在调用第一个 viewDidAppear 时它已正确设置。

# java - 在 Android 中动态添加行

> ID：13797227
> 
> 赞同：2
> 
> 时间：2012-12-10T08:20:43.440
> 
> 标签：java, android, tablelayout

我已经在一个单独的应用程序（测试应用程序）中编写了这段代码，它工作正常..

```
public class MainActivity extends Activity {

    String companies[] = {"Google","iPhone","Nokia","Samsung",
                          "Google","Windows","iPhone","Nokia","Samsung",
                          "Google","Windows","iPhone","Nokia","Samsung","waseela"};
    String os[]       =  {"Android","iOS","Bada",
                          "Android","Mango","iOS","Symbian","Bada",
                          "Android","Mango","iOS","Symbian","Bada","wwwwwwww","wx"};

    TableLayout tl;
    TableRow tr;
    TextView companyTV,valueTV;
   @Override
   public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);
       tl = (TableLayout) findViewById(R.id.maintable);
       addHeaders();
       addData();
   }
   /** This function add the headers to the table **/
   public void addHeaders(){

        /** Create a TableRow dynamically **/
       tr = new TableRow(this);
       tr.setLayoutParams(new LayoutParams(
               LayoutParams.FILL_PARENT,
               LayoutParams.WRAP_CONTENT));

       /** Creating a TextView to add to the row **/
       TextView companyTV = new TextView(this);
       companyTV.setText("Companies");
       companyTV.setTextColor(Color.GRAY);
       companyTV.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
       companyTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
       companyTV.setPadding(5, 5, 5, 0);
       tr.addView(companyTV);  // Adding textView to tablerow.

       /** Creating another textview **/
       TextView valueTV = new TextView(this);
       valueTV.setText("Operating Systems");
       valueTV.setTextColor(Color.GRAY);
       valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
       valueTV.setPadding(5, 5, 5, 0);
       valueTV.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
       tr.addView(valueTV); // Adding textView to tablerow.

       // Add the TableRow to the TableLayout
       tl.addView(tr, new TableLayout.LayoutParams(
               LayoutParams.FILL_PARENT,
               LayoutParams.WRAP_CONTENT));

       // we are adding two textviews for the divider because we have two columns
       tr = new TableRow(this);
       tr.setLayoutParams(new LayoutParams(
               LayoutParams.FILL_PARENT,
               LayoutParams.WRAP_CONTENT));

       /** Creating another textview **/
       TextView divider = new TextView(this);
       divider.setText("-----------------");
       //divider.setTextColor(Color.<span class="IL_AD" id="IL_AD11">GREEN</span>);
       divider.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
       divider.setPadding(5, 0, 0, 0);
       divider.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
       tr.addView(divider); // Adding textView to tablerow.

       TextView divider2 = new TextView(this);
       divider2.setText("-------------------------");
       divider2.setTextColor(Color.GREEN);
       divider2.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
       divider2.setPadding(5, 0, 0, 0);
       divider2.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
       tr.addView(divider2); // Adding textView to tablerow.

       // Add the TableRow to the TableLayout
       tl.addView(tr, new TableLayout.LayoutParams(
               LayoutParams.FILL_PARENT,
               LayoutParams.WRAP_CONTENT));
   }
   /** This function add the data to the table **/
   public void addData(){

       for (int i = 0; i < companies.length; i++)
       {
           /** Create a TableRow dynamically **/
           tr = new TableRow(this);
           tr.setLayoutParams(new LayoutParams(
                   LayoutParams.FILL_PARENT,
                   LayoutParams.WRAP_CONTENT));

           /** Creating a TextView to add to the row **/
           companyTV = new TextView(this);
           companyTV.setText(companies[i]);
           companyTV.setTextColor(Color.RED);
           companyTV.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
           companyTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
           companyTV.setPadding(5, 5, 5, 5);
           tr.addView(companyTV);  // Adding textView to tablerow.

           /** Creating another textview **/
           valueTV = new TextView(this);
           valueTV.setText(os[i]);
           valueTV.setTextColor(Color.GREEN);
           valueTV.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
           valueTV.setPadding(5, 5, 5, 5);
           valueTV.setTypeface(Typeface.DEFAULT, Typeface.BOLD);
           tr.addView(valueTV); // Adding textView to tablerow.

           // Add the TableRow to the TableLayout
           tl.addView(tr, new TableLayout.LayoutParams(
                   LayoutParams.FILL_PARENT,
                   LayoutParams.WRAP_CONTENT));
       }
   }
} 
```

带有包含表格布局的 ScrollView 的 xml 文件。

问题是当我将该代码放在我正在处理的主项目中时，它什么也没有显示。我已将 xml 布局嵌入到主项目布局中，我没有收到任何错误，但没有显示任何内容。

我怎样才能得到这个工作？

# matlab - 存储for循环的结果

> ID：13797230
> 
> 赞同：0
> 
> 时间：2012-12-10T08:21:03.897
> 
> 标签：matlab

我有以下数据：`ET = [1 3 5 7 6 4]`，下面是我的代码：

```
for i=1:3
    meanET(i)=ET(:,1+(2*i-2)); %//for i=1,extract ET column 1 data
    stdET(i)=ET(:,2+(2*i-2)); 
    totalET(i)=meanET(i)+stdET(i)
end 
```

但是，MATLAB 显示一个错误，指出在 assignment`A(I)=B`中，B 和 I 中的元素数必须相同，因此我将代码修改为：

```
for i=1:3
    meanET=ET(:,1+(2*i-2));%for i=1,extract ET column 1 data
    stdET=ET(:,2+(2*i-2)); 
    totalET=meanET+stdET
end 
```

运行后面的代码后，它显示`meanET=6`、`stdET=4`和`totalET=10`，这意味着它只将 i=3 的数据存储在工作区中。我想得到像 `totalET=[4 12 10]`在工作区中一样的结果，对应于`i = 1, 2, 3`. 我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:17:26.067

或者您可以使用简单的矢量化解决方案：

```
>> totalET = ET(1:2:5) + ET(2:2:6)

totalET =
    4   12   10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T08:44:26.783

您应该在代码的开头声明您的目标数组：

```
meanET=zeros(size(ET,1),3);
stdET=zeros(size(ET,1),3);
for i=1:3
   meanET(:,i)=ET(:,1+(2*i-2));
   stdET(:,i)=ET(:,2+(2*i-2)); 
end
totalET=meanET+stdET 
```

# synchronization - 分布式多资源悲观锁定算法

> ID：13797231
> 
> 赞同：1
> 
> 时间：2012-12-10T08:21:04.520
> 
> 标签：synchronization, distributed-computing, pessimistic-locking

我正在为分布式键值存储实现悲观锁定。我有一个坚如磐石的原子比较交换（以及递增和递减）操作来实现锁。还有已经提供原子操作的集合、排序集合、列表和数组的数据结构（我可以使用服务器端脚本以任何方式原子地操作这些结构）。

使用上述作为构建块，我需要制作一个支持像.Net's [WaitHandle.WaitAll](http://msdn.microsoft.com/en-us/library/z6w25xa6.aspx)这样的操作的可重入互斥锁，即。能够在一次调用中锁定多个资源，同时最大限度地减少活锁和饥饿的可能性。我怎么做？有普遍接受的算法吗？

作为一个附带问题，我已经研究了诸如彼得森算法及其亲属之类的东西，但似乎这些互斥算法正在解决与我所面临的问题不同的问题（我已经有了原子操作）。我正在努力做一些我认为被认为是更高级的同步原语的东西（基于[http://en.wikipedia.org/wiki/Mutual_exclusion#Advanced_mutual_exclusion](http://en.wikipedia.org/wiki/Mutual_exclusion#Advanced_mutual_exclusion)的标题），我想知道是否有单独的一类算法这回答了这些不那么深入的核心问题。

# jquery - 如何在 DataTables 中单击时选择单元格中的整个文本

> ID：13797234
> 
> 赞同：1
> 
> 时间：2012-12-10T08:21:39.713
> 
> 标签：jquery, datatables, edit

我需要编辑 dataTables jQuery 代码，所以当我单击可编辑单元格时，它将选择单元格中的整个文本。我知道它通常使用 onclick="this.select()" 完成，但 jQuery 代码对我来说很难阅读......到目前为止我的代码（至少我理解这是我需要编辑的代码）：

```
"fnDrawCallback": function () {
        $('#table_dzs tbody tr td:nth-child(7)').editable( './files/save_dzs.php?stavba=<?echo $stavba;?>', {
            "callback": function( sValue, y ) {
                var aPos = oTable.fnGetPosition( this );
                oTable.fnUpdate( sValue, aPos[0], aPos[2] );

            },
            "submitdata": function ( value, settings ) {
                return { "id": oTable.fnGetData( this.parentNode )[0], // get the value of first row/column. In my case it is the "id" in database
                "value": oTable.fnGetPosition( this )[7] // Column number
                };

            },
            "height": "14px"
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:46:43.353

只需在数据表初始化后添加这一行：

```
$.fn.editable.defaults.select = true 
```

它是用于自定义可编辑插件的公共词典。

# jdeveloper - jdeveloper eclipse 快捷键

> ID：13797242
> 
> 赞同：3
> 
> 时间：2012-12-10T08:22:58.810
> 
> 标签：jdeveloper

在 Jdeveloper 中，加载 eclipse 键盘模式不起作用。（Eclipse 快捷键 Ctrl + O 方法列表，Ctrl + Shift + R 资源列表不起作用。）

我正在使用 Jdeveloper 11.1.1.6.0。

我是如何尝试的。（工具 > 首选项 > 快捷方式 >（从更多操作下拉菜单中加载键盘模式）> Eclipse 模式

参考：[http ://web-center-suite.blogspot.in/2011/08/jdeveloper-shortcuts.html](http://web-center-suite.blogspot.in/2011/08/jdeveloper-shortcuts.html)

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:36:52.830

您可能需要通过工具-> 属性加速器自己专门设置这两个。查看 JDeveloper 中的导航菜单中的“转到文件”和“快速大纲”以查看当前快捷方式。

# android - 安卓广告

> ID：13797245
> 
> 赞同：1
> 
> 时间：2012-12-10T08:23:04.067
> 
> 标签：android

我在美国注册了一个发布者帐户，我正在从该帐户部署我的应用程序。我有一个在印度注册的 admob 帐户。我可以向我的应用投放广告，两者都使用不同的详细信息进行注册。这是我要部署的第一个应用程序请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:42:30.730

是的。Google Play 和 Admob 可以使用不同的帐户。

# c# - 串口发不出数据

> ID：13797251
> 
> 赞同：1
> 
> 时间：2012-12-10T08:23:25.770
> 
> 标签：c#, serial-port

我正在串行端口上做一个项目..但是在我将串行通信端口更改为组合框选择之后，我似乎无法将任何数据传输出去。这是我的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;

namespace XSP
{
    public partial class Form1 : Form
    {
        string RxString;
        byte[] buffer = Encoding.UTF8.GetBytes("RxString");

        public Form1()
        {
            InitializeComponent();

            this.Load += Form1_Load;

            serialPort1.DataReceived += new SerialDataReceivedEventHandler(serialPort1_DataReceived);
            Console.ReadLine();
        }

        void Form1_Load(object sender, EventArgs e)
        {
            var serialPort1 = SerialPort.GetPortNames();
            cbCommPorts.DataSource = serialPort1;
        }

        public static byte[] ConvertToBinary(string str)
        {
            System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
            return encoding.GetBytes(str);
        }

        private void btnOpen_Click(object sender, EventArgs e)
        {

            if (cbCommPorts.SelectedIndex > -1)
            {
                MessageBox.Show(String.Format("You selected port '{0}'", cbCommPorts.SelectedItem));
                Connect(cbCommPorts.SelectedItem.ToString());
            }
            else
            {
                MessageBox.Show("Please select a port first");
            }

        }

        private void Connect(string portName)
        {
            var serialPort1 = new SerialPort(portName);
            if (!serialPort1.IsOpen)
            {
                serialPort1.BaudRate = 115200;
                serialPort1.Open();

                btnTransmit.Enabled = true;
                btn2.Enabled = true;
                btn3.Enabled = true;
                btnOpen.Enabled = false;
                btnClose.Enabled = true;
            }
        }
        private void btnTransmit_Click(object sender, EventArgs e)
        {
            if (serialPort1.IsOpen)
            {
                string value = "12345";
                serialPort1.Write(value);
            }
            else serialPort1.Close();
        }

        private void txtReceive_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (serialPort1.IsOpen) return;
            char[] buff = new char[1];
            buff[0] = e.KeyChar;
            serialPort1.Write(buff, 0, 1);
            e.Handled = true;
        }

        private void DisplayText(object sender, EventArgs e)
        {
            txtReceive.AppendText(RxString);
        }

        private void serialPort1_DataReceived
            (object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
        {
            RxString = serialPort1.ReadExisting();
            this.Invoke(new EventHandler(DisplayText));
        }

        private void btnOpenFile_Click(object sender, EventArgs e)
        {
            OpenFileDialog openFileDialog1 = new OpenFileDialog();
            openFileDialog1.InitialDirectory = "c:\\";
            openFileDialog1.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";
            openFileDialog1.FilterIndex = 2;
            openFileDialog1.RestoreDirectory = true;

            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                System.IO.StreamReader sr = new
             System.IO.StreamReader(openFileDialog1.FileName);
                MessageBox.Show(sr.ReadToEnd());
                sr.Close();
            }
        }

        private void btnExit_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private void btnClose_Click(object sender, EventArgs e)
        {
            serialPort1.Close();
            btnOpen.Enabled = true;
            btnClose.Enabled = false;
            btnTransmit.Enabled = false;
            btn2.Enabled = false;
            btn3.Enabled = false;
        }
    }
} 
```

有人可以帮我指出我的错误在哪里吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:37:49.333

这里有几个可能的选项，但我们需要更多信息来解决这个问题。首先，请确保您实际上正在发送数据。为此，请尝试在上面发送数据的 if 语句上设置断点。并使用进入代码`F10`，看看你是否真的在发送任何数据。

如果您正在发送数据，您的代码运行良好并检查接收器应用程序。检查波特率等...

# ruby - 删除下一个/尾随字符的转义序列？

> ID：13797253
> 
> 赞同：9
> 
> 时间：2012-12-10T08:23:36.643
> 
> 标签：ruby, escaping

除了使用 删除前导字符之外，是否有可能`\x08`还删除尾随字符？是否有一个转义序列会删除下一个字符而不是前一个字符？

我看到 delete 显然映射到 ASCII 127，即 Hex 7F，但代码如下：

```
puts "a\x08b\x7fcd" 
```

生产

```
b⌂cd 
```

我预计 \x7f 会删除它后面的“c”字符，但事实并非如此。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-13T19:56:47.767

你实际上并没有删除任何东西`\x08`，你只是用“b”覆盖“a”。

想象一下您使用电传纸终端的非常古老的日子。您实际上会在纸上看到打印的“a”，电传打字机将备份一个空格，然后在其上打印“b”。所有非打印ASCII码都是为了控制电传纸终端的运动而发明的。

这正是上面的输出所做的，只有终端屏幕不会保持前一个“a”的像素点亮。

“del”字符对基本终端屏幕没有这种特殊含义。它对诸如编辑器或 shell 之类的程序可能意味着什么，但对于 STDOUT 来说，它只是另一个要打印的 ascii 字符。

“del”的原意是忽略这个字符作为输入，见：

[http://en.wikipedia.org/wiki/Delete_character](http://en.wikipedia.org/wiki/Delete_character)

我不知道您可以将 STDOUT 视为不打印下一个 CHAR 的信号的 char 之前。但是，如果您的输出是终端仿真程序（例如 xterm），您可以使用转义码做很多事情来完成您想要的。参见例如：

[http://ascii-table.com/ansi-escape-sequences-vt-100.php](http://ascii-table.com/ansi-escape-sequences-vt-100.php)

抽象出所有这些复杂代码的“标准”库是`ncurses`，其中有几个 ruby​​ 接口。看

[使用 ncurses 和 ruby​​ 的最佳宝石](https://stackoverflow.com/questions/9398076/best-gem-for-working-with-ncurses-and-ruby)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-15T18:09:57.040

退格字符（charcode `?\x08`，它的别名`?\b`和它的频繁`?\C-H`(Ctrl+H) 映射）与删除字符（charcode `?\x7f`，意思是 ascii 127）不同。开箱即用，两者的区别在于退格在删除之前将光标位置向左移动。

请注意，在 unix 平台上的这两种情况下，删除通常代表终止转义序列，而后者代表终止光标右侧的行（即，就像终端中的 Ctrl+K 映射）。换句话说，`?\b`等价于`"\e[D\e[K"`(left, kill) 和`?\x7f`等价于`"\e[K"`(kill)。IRB（Ruby 2.0.0，OSX）中的示例输出来说明这一点：

```
>> print "abc\b"            # abc, backspace
ab=> nil
>> print "abc\e[D\b"        # abc, left, backspace
a=> nil
>> print "abc\x7f"          # abc, delete
abc=> nil
>> print "abc\e[D\x7f"      # abc, left, delete
ab=> nil
>> print "abc\e[D\e[D\x7f"  # abc, left, left, delete
a=> nil
>> print "abc\e[D\e[D\e[K"  # abc, left, left, kill
a=> nil 
```

上面的操作词*通常是*。如果您在终端中使用 getch ，其行为将与 IRB 的行为完全不同。（如果没记错的话，删除键会将角色向左移动，而不会终止该行，或者按照该顺序进行。）

澄清这一点，回到您的问题：据我所知，没有转义序列可以杀死光标位置的单个字符；仅用于终止光标左侧、右侧或两者的行的序列。如果您想深入研究，Fred 发布的参考资料非常好：

[http://ascii-table.com/ansi-escape-sequences-vt-100.php](http://ascii-table.com/ansi-escape-sequences-vt-100.php)

无论如何，我猜你正在玩`getch`这个顺序。为了删除单个字符，您想要做的是在将字符打印到标准输出的同时保持缓冲区和光标的位置。这将允许您映射`?\b`或`?\x7f`按照您认为合适的方式使用以下内容：

```
def refresh
  rest = @buffer[@position..-1]
  @stdout.print "\e[K"
  @stdout.print rest, "\e[#{rest.length}D" if rest && !rest.empty?
  nil
end 
```

或者，尝试通常的嫌疑人来避免头痛：readline、ncurses、highline gem 等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-17T06:08:28.010

这里的主要问题是：标准`IO`没有短期记忆。也就是说，没有神奇的操作实体可以对*即将到来*的符号采取行动。以下代码片段显示“删除”，即使以[现代方式](http://www.gnu.org/software/termutils/manual/termutils-2.0/html_chapter/tput_1.html)提供，也不知道未来的符号：

```
> puts "a#{`tput dch1`}b"
# ⇒ ab 
```

无论您是否真的需要“删除预期符号”，我都建议您为此使用普通的 ruby​​ monkeypatch：

```
class String
  DEL = '␡'
  def postprocess
    self.gsub /#{DEL}./, ''
  end
end

puts "a␡bc".postprocess
# ⇒ ac 
```

实际上，这不是直接回答您的问题，但可能会给出建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T14:07:14.857

这是删除下一个字符的另一种方法：

```
class String
  alias_method :default_initialize, :initialize
  alias_method :default_plus, :+

  attr_accessor :delnext

  def initialize
    default_initialize
    @delnext = false
  end

  def +(x)
    str = String(x)
    str[0] = '' if @delnext
    @delnext = false
    default_plus str
  end
end 
```

现在，您可以执行以下操作：

```
s = 'test string'
s.delnext = true
s += 'test again'
s # => 'test stringest again' 
```

同样，您可以轻松实现`delprev`：

```
class String
  def delprev
    self[self.length - 1] = ''
    # self # uncomment if you want delprev to return the new string
  end
end

s = 'test string'
s.delprev
s # => 'test strin' 
```

# sql - 如何以数据透视表获得以下查询的结果？

> ID：13797255
> 
> 赞同：1
> 
> 时间：2012-12-10T08:23:43.800
> 
> 标签：sql, sql-server, sql-server-2008, pivot

> **可能重复：**
> [在 T-SQL 中透视数据](https://stackoverflow.com/questions/7232593/pivot-data-in-t-sql)

请在查询中进行必要的更改以创建数据透视表显示...

```
select COUNT(employeeid) as count_of_employees,Title 
from HumanResources.Employee 
group by Title order by no_of_employees desc 
```

此查询返回以下结果

```
count_of_employees  Title
26                  Production Technician - WC50
26                  Production Technician - WC60
26                  Production Technician - WC40
25                  Production Technician - WC30
22                  Production Technician - WC20
17                  Production Technician - WC10
15                  Production Technician - WC45
14                  Sales Representative
9                   Buyer
5                   Marketing Specialist
4                   Scheduling Assistant 
```

我需要想要的结果

```
Production Technician-WC50 |  Production Technician-WC60  |   Production Technician-WC40
           26              |            26                |                26 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:42:09.903

要按照您描述的方式将行转换为列，您必须使用[**`PIVOT`**](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)表运算符。像这样：

```
SELECT *
FROM
(
  SELECT [count_of_employees], [Title]
  FROM YourQuery
  ) t
PIVOT
(
  MAX(count_of_employees)
  FOR Title IN([Production Technician - WC50], 
               [Production Technician - WC60], 
               [Production Technician - WC40],
               [Production Technician - WC30], 
               [Production Technician - WC20], 
               [Production Technician - WC10], 
               [Production Technician - WC45], 
               [Sales Representative], 
               [Buyer], 
               [Marketing Specialist], 
               [Scheduling Assistant])
 ) p; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/6136b/2)

* * *

但这很难看，因为您必须编写这些标题列表。但是，最好通过动态获取标题列表来动态执行此操作，如下所示：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

SELECT @cols = STUFF((SELECT distinct ',' +  QUOTENAME (title)
               FROM YourQuery
               FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)')  ,1,1,'');

SET @query = 'SELECT ' + @cols + ' FROM
(
   SELECT [count_of_employees], [Title] FROM YourQuery
) t
PIVOT
(
   MAX(count_of_employees)
   FOR title IN (' + @cols + ')
             ) p ';

EXECUTE(@query); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/6136b/4)

这应该给你：

```
| BUYER | MARKETING SPECIALIST | PRODUCTION TECHNICIAN - WC10 | PRODUCTION TECHNICIAN - WC20 | PRODUCTION TECHNICIAN - WC30 | PRODUCTION TECHNICIAN - WC40 | PRODUCTION TECHNICIAN - WC45 | PRODUCTION TECHNICIAN - WC50 | PRODUCTION TECHNICIAN - WC60 | SALES REPRESENTATIVE | SCHEDULING ASSISTANT |
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
|     9 |                    5 |                           17 |                           22 |                           25 |                           26 |                           15 |                           26 |                           26 |                   14 |                    4 | 
```

这更好，但您可能需要小心使用动态 SQL，请参阅此以获得更多详细信息：

*   [**动态 SQL 的祸与福**](http://www.sommarskog.se/dynamic_sql.html)

* * *

**请注意：**`YourQuery`我在此处的回答中使用的表必须替换为您的查询：

```
select COUNT(employeeid) as count_of_employees,Title 
from HumanResources.Employee 
group by Title order by no_of_employees desc 
```

# javascript - 如何在不使用参数的情况下在 javascript 中传递变量？

> ID：13797260
> 
> 赞同：1
> 
> 时间：2012-12-10T08:24:14.147
> 
> 标签：javascript, variables, parameters

我有一个函数用于从文本文件中获取数据并在另一个函数中提醒它。

```
 var library_name; // Global Variable

  function getLibraryName(){
         jQuery.get('stream.txt', function(data) {
           library_name = data.toString().substring(17,data.length);
         });
  }

 function saveFeedback() {
    alert(library_name);
  } 
```

当 saveFeedback 被调用时，它会提醒 library_name

我一直试图把它放在像这样的相同功能中

```
function saveFeedback() {
    jQuery.get('stream.txt', function(data) {
         library_name = data.toString().substring(17,data.length);
    });

    alert(library_name);
} 
```

但它仍然在控制台中一直说未定义

如何解决这个问题？不使用参数，因为必须从其他地方调用 saveFeedback 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:32:14.820

您应该在 $.get(data) 回调中使用 saveFeedback() 函数，因为它是异步请求并且您不知道何时完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:28:27.677

`.get`get 完成时调用第二个参数 to 。您是说“获取`stream.txt`并在完成后执行此功能”。获取完成后，以下调用 saveFeedback：

```
function getLibraryName(){
         jQuery.get('stream.txt', function(data) {
           library_name = data.toString().substring(17,data.length);
           saveFeedback();
         });
  } 
```

因为 get 是异步的，所以您的解释器将在`saveFeedback`调用函数之前实例化该函数`success`（尽管一些像 JSLint 这样的健全性检查器可能希望您在`saveFeedback`之前定义`getLibraryName`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:36:53.810

您可以使用 $.data() 创建一个隐藏的输入字段并将数据附加到它；

例如：

```
 function getLibraryName(){
         jQuery.get('stream.txt', function(data) {
           var library_name = data.toString().substring(17,data.length);
           $('#myHiddenField').data('library_name', library_name);
         });
  }

 function saveFeedback() {
    alert($('#myHiddenField').data('library_name'));
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T08:41:12.853

jQuery`get`发起一个异步调用。异步意味着它的结果将*稍后*返回……可能会在很短的时间后返回，也可能会在几秒后返回。启动此调用后，代码将立即进入下一行，即您的警报。这个警报发生在异步调用返回*之前*，所以当然变量仍然是`undefined`——它还没有被设置。

解决问题的一种方法可能是告诉 jQuery 使调用同步。但这是错误的答案，因为它会在调用发生时阻止浏览器响应用户交互。相反，您需要调整对异步调用的看法。基本概念是，您不必像普通的程序配方（执行第 1 步，然后执行第 2 步，然后执行第 3 步）那样拥有一个逐步执行操作的大函数，而是必须设置两个不同的配方或代码片段：一种是发起ajax调用然后**退出**，一种是响应ajax调用的结果。

现在，您已经拥有了两个功能。由于我已经解释过的原因，您不能将它们组合起来。但是，您可以将它们链接起来，或者将一个封装在另一个内部：

```
var library_name;

function saveFeedback() {
   alert(library_name);
}

function getLibraryName(){
   jQuery.get('stream.txt', function(data) {
      library_name = data.toString().substring(17 ,data.length);
      saveFeedback(); // this chains the two functions together
   });
} 
```

或者甚至更好：

```
var library_name;

function saveFeedback() {
   alert(library_name);
}

function receiveLibraryName(data) {
   library_name = data.toString().substring(17, data.length);
   saveFeedback();
   // additional statements here after saving
}

function getLibraryName(){
   jQuery.get('stream.txt', receiveLibraryName);
} 
```

关键是你*不能*像往常一样在`getLibraryName`函数中继续下一个语句。您希望在 ajax 调用之后执行的步骤*必须*在另一个函数中：在回调函数本身中，或者在从回调函数调用的另一个函数中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-22T06:06:42.150

试试下面的代码：

```
var library_name;
function getLibraryName(){
     jQuery.get('stream.txt', function(data) {
       let lbName= data.toString().substring(17,data.length);
       saveFeedback(lbName);
  });
}

function saveFeedback(lbName) {
   library_name = lbName; //If you are using library_name in other code
   alert(library_name);
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-10T08:28:20.963

您必须在 jquery.get 之前定义 library_name 一次。因为如果 jquery.get 不起作用 library_name 将不会在您调用警报时创建。请添加 var library_name; 作为 saveFeedback() 的第一行。

# javascript - 关闭连接后如何重新连接到 websocket

> ID：13797262
> 
> 赞同：56
> 
> 时间：2012-12-10T08:24:21.417
> 
> 标签：javascript, html, websocket, socket.io

我用这段代码（例如）构建了我的 websocket 连接：

```
var socket = new WebSocket("ws://94.12.176.177:8080"); 
```

我关闭了与这个的连接：

```
socket.close(); 
```

但是如何重新建立连接？

我做了一些研究并尝试了几种方法。这个问题帮不了我：[Socket.io reconnect on disconnect?](https://stackoverflow.com/questions/5898327/socket-io-reconnect-on-disconnect) 这是唯一接近我正在寻找的结果。

我想这样做的原因是允许用户暂时停止向网络发送数据，并在一段时间后重新发送。如果没有重新连接，用户必须刷新页面才能重新发送。这可能会导致一些数据丢失。谢谢你。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2016-06-30T05:44:01.080

当服务器关闭连接时，客户端*不会*尝试重新连接。可能有一些 JS 框架，但问题是，在这个答案的时候，被标记为普通的 Vanilla JS。

我有点沮丧，因为接受的、赞成的答案显然是错误的，并且在找到正确的解决方案时花费了我一些额外的时间。

在这里：[当服务器在 WebSocket 中重新启动时重新连接客户端](https://stackoverflow.com/questions/3780511/reconnection-of-client-when-server-reboots-in-websocket)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2018-10-17T15:38:44.637

我在此页面上找到了一个很好的解决方案：sam-low.com

关闭原始连接后，您需要使用新的事件侦听器创建一个新的 WebSocket 对象

```
function startWebsocket() {
  var ws = new WebSocket('ws://localhost:8080')

  ws.onmessage = function(e){
    console.log('websocket message event:', e)
  }

  ws.onclose = function(){
    // connection closed, discard old websocket and create a new one in 5s
    ws = null
    setTimeout(startWebsocket, 5000)
  }
}

startWebsocket(); 
```

请注意，如果重新连接出现问题，新的 WebSocket 对象仍将收到另一个关闭事件，这意味着`onclose()`即使从技术上讲它从未打开也会执行。这就是为什么延迟 5 秒是明智的 - 没有它，您可能会发现自己以可能会破坏某些东西的速度创建和破坏数千个 websocket 连接。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-10T08:30:45.940

> 注意：问题已标记`socket.io`，因此此答案专门针对`socket.io`.
> 正如许多人指出的那样，这个答案不适用于 vanilla websockets，它在任何情况下都不会尝试重新连接。

Websockets 不会自动尝试重新连接。您必须重新创建套接字才能获得新连接。唯一的问题是你必须重新连接你的处理程序。

但实际上，websockets 旨在保持开放。

更好的方法是让**服务器关闭连接**。这样，websocket 将触发一个`onclose`事件，但会继续尝试建立连接。当服务器再次监听时，连接将自动重新建立。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-14T22:13:55.020

完美实现：

```
var socket;

const socketMessageListener = (event) => {
  console.log(event.data);
};

const socketOpenListener = (event) => {
  console.log('Connected');
  socket.send('hello');
};

const socketCloseListener = (event) => {
  if (socket) {
    console.error('Disconnected.');
  }
  socket = new WebSocket('ws://localhost:8080');
  socket.addEventListener('open', socketOpenListener);
  socket.addEventListener('message', socketMessageListener);
  socket.addEventListener('close', socketCloseListener);
};

socketCloseListener(); 
```

要测试它：

```
setTimeout(()=>{
  socket.close();
},5000); 
```

编辑：注意指数退避实现（在顶部评论的链接线程中：[https](https://stackoverflow.com/a/37038217/8805423) : //stackoverflow.com/a/37038217/8805423），不在上面的代码中，但非常非常关键。

再次编辑：`back`从[https://www.npmjs.com/package/back](https://www.npmjs.com/package/back)查看，这是一个灵活的性感实现。`primus`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-03-06T00:11:11.110

```
function wsConnection(url){
    var ws = new WebSocket(url);
    var s = (l)=>console.log(l);
	ws.onopen = m=>s(" CONNECTED")
    ws.onmessage = m=>s(" RECEIVED: "+JSON.parse(m.data))
    ws.onerror = e=>s(" ERROR")
    ws.onclose = e=>{
        s(" CONNECTION CLOSED");
        setTimeout((function() {
            var ws2 = new WebSocket(ws.url);
			ws2.onopen=ws.onopen;
            ws2.onmessage = ws.onmessage;
            ws2.onclose = ws.onclose;
            ws2.onerror = ws.onerror;
            ws = ws2
        }
        ).bind(this), 5000)
    }
    var f = m=>ws.send(JSON.stringify(m)) || "Sent: "+m;
    f.ping = ()=>ws.send(JSON.stringify("ping"));
    f.close = ()=>ws.close();
    return f
}

c=new wsConnection('wss://echo.websocket.org');
setTimeout(()=>c("Hello world...orld...orld..orld...d"),5000);
setTimeout(()=>c.close(),10000);
setTimeout(()=>c("I am still alive!"),20000);
```

```
<pre>
This code will create a websocket which will 
reconnect automatically after 5 seconds from disconnection.

An automatic disconnection is simulated after 10 seconds.
```

# r - 以初始顺序获取索引

> ID：13797263
> 
> 赞同：1
> 
> 时间：2012-12-10T08:24:28.403
> 
> 标签：r

```
> which(LETTERS %in% c("R","A"))
[1]  1 18 
```

我怎样才能得到答案`18 1`，即初始向量中出现的顺序的索引？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T08:30:14.803

```
match(c("R","A"),LETTERS)

[1] 18  1 
```

# ruby-on-rails - “很好地”显示哈希列表的快捷方式

> ID：13797264
> 
> 赞同：1
> 
> 时间：2012-12-10T08:24:28.760
> 
> 标签：ruby-on-rails, ruby

当我有一个哈希列表（例如`.attributes`调用的结果）时，创建逐行可读输出的捷径是什么？就像一个捷径

```
u.attributes.each {|p| puts p[0].to_s + ": " + p[1].to_s} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:36:52.360

除非您创建自己的方法，否则我不确定您是否可以缩短它。

一个小的改进是：

```
u.attributes.each {|k,v| puts "#{k}: #{v}"} 
```

或者您可以创建一个扩展名`Hash`：

```
class Hash
  def nice_print
    each {|k,v| puts "#{k}: #{v}"}
  end
end

u.attributes.nice_print 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:44:20.343

如果您正在寻找用于开发目的的输出（例如在 Rails 日志文件中），`inspect`或者`pretty_inspect`应该这样做：

```
u.attributes.inspect 
```

或者

```
u.attributes.pretty_inspect 
```

但是，如果您正在寻找一种在 Rails 控制台中很好地打印的方法，我相信您将不得不编写自己的方法，或者使用像**awesome_print**这样的 gem ，请参阅：[Ruby on Rails：variable.hash_set.inspect 的漂亮打印。 ..有没有办法在控制台中漂亮地打印 .inpsect ？](https://stackoverflow.com/questions/6597359/ruby-on-rails-pretty-print-for-variable-hash-set-inspect-is-there-a-way-to)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T16:17:02.313

[awesome_print](https://github.com/michaeldv/awesome_print)是要走的路

`gem install awesome_print`

```
require "ap"
ap u.attributes 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T23:57:14.910

正如我在评论中所说，我喜欢使用`y hash`或`puts YAML.dump(hash)`在 yaml 中显示您的哈希值。[它也可以用于其他对象](http://rubyquicktips.com/post/1405061475/viewing-a-model-in-yaml)。

```
h = {:a => 1, :b => 2, :c => 3}
# => {:a=>1, :b=>2, :c=>3}
y h
#---
#:a: 1
#:b: 2
#:c: 3
# => nil 
```

还有[一个关于它的内容丰富的答案](https://stackoverflow.com/a/11572045/1004274)。

# sql - Sql Server 2008：如何最小化存储过程的执行时间

> ID：13797266
> 
> 赞同：1
> 
> 时间：2012-12-10T08:24:33.943
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

我有 Sql Server 数据库，我的表有 1500000 行......因为我的以下过程的大量数据执行时间非常高

桌子 - - -

```
CREATE TABLE [dbo].[MyTable](
[Id] [bigint] IDENTITY(1,1) NOT NULL,
[Link] [text] NULL,
[Title] [text] NULL,
[Duration] [text] NULL,
[Image] [text] NULL,
[Embbed] [text] NULL,
[Keywords] [text] NULL,
[Category] [text] NULL,
PRIMARY KEY CLUSTERED 
(
[Id] ASC
)
WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO 
```

程序 - - -

```
ALTER PROCEDURE [dbo].[Search]
 @SearchQuery varchar(1000),
 @Id bigint
 As
BEGIN
  Select top 100 * from MyTable
  where Id > @Id and Title like '%'+@SearchQuery+'%' 
```

谁能帮助我如何最小化 1500000 行表上的 sql 查询的执行时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:37:13.393

您通过以下方式强制执行表扫描：

> 标题如 '%'+@SearchQuery+'%'

实际上没有 - 你绝对强制不使用标题上的索引。当索引“从左到右”时，“中间的某个点”查询只会关闭索引的使用。

如果 ID 有很多要搜索的内容 - 就可以了，尤其是当您将其与不适当的慢速硬件结合使用时（毕竟 150 万是小数据）。

你要么去掉 LIKE 语句中的第一个“%”——所以可以使用索引——或者使用全文搜索，这已经分解了索引中的单词，但即使这样你最好去掉第一个“ %”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T08:29:27.240

问题出`LIKE`在`WHERE`子句中。您正在字段内的任何位置搜索文本，这会导致`Title`未使用列上可能存在的索引。

只要您需要使用`LIKE`字段（ ）中间的术语进行搜索`LIKE '%...'`，就可能没有机会优化查询运行时。

您可以尝试做的事情（即使查询引擎本身应该足够聪明）是：

将条目选择`ID > @ID`到临时表中，然后使用语句`TOP 100`从该表中选择。`LIKE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:29:15.503

使用`VARCHAR(MAX)`而不是`TEXT`作为字段类型。

TEXT 字段存储在与表的其余部分不同的位置，而 VARCHAR(MAX) 字段与行数据一起存储，因此可以对这种类型的字段应用全文索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T08:36:53.797

发布您的表定义，这将有助于我们为您提供帮助。但是，您可以检查以下几点：

*   确保您的表有 a`primary key`和 a `clustered index`。只要它们存在，它们的定义几乎无关紧要。我建议`Id`在没有任何其他信息的情况下定义它们。

*   你真的需要从表中返回所有列吗？如果有很多列而您只需要一些列，则明确指定它们。这将减少结果集的大小。

*   询问用户是否真的*需要*在`Title`. 您可以*先从*搜索开始，即删除第一个`'%'`吗？如果你能做到这一点，那么`Title`过滤器就变成了 SARGable，即查询优化器将使用`Title`列上的索引而不是进行表扫描。你有一个索引，`Title`不是吗？

**更新：**

看过表定义后，我注意到它`Title`有 type `text`。使用表扫描进行搜索非常慢，*因为*所有数据都存储在表行之外并且必须单独获取。`varchar`您可以通过将其更改为类型来加快速度。现代等价于`text`is `varchar(max)`，所以先试试吧。但是，既然是标题，那么您确定列中真的需要 2GB 的字符吗？大多数事物的标题最多不超过 100 个字符。尝试测量所有标题的长度，看看是否可以将列的长度缩短到更合理的程度。

实际上，查看您所有列的名称，我看不到*任何*可以证明使用`text`. 甚至`Link`，我认为它是一个 URL，不需要超过`varchar(1023)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-06T19:38:29.557

这个还开吗？将文本字段更改为 varchar 并添加 set rowcount 语句后，如果您需要保留前导通配符功能，您已经在 sql 中完成了所有可以做的事情。我经常做这类事情，没有性能问题，所以你的下一步是：硬件升级。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-10T10:27:38.640

我会将您的`LIKE`声明更改`CharIndex`为其他人所说的那样，这`LIKE`将导致对表进行全面扫描。

[http://msdn.microsoft.com/en-us/library/ms186323.aspx](http://msdn.microsoft.com/en-us/library/ms186323.aspx)向您展示如何使用`CHARINDEX`

# ajax - jsf2 f：ajax在数据表中呈现问题

> ID：13797269
> 
> 赞同：0
> 
> 时间：2012-12-10T08:24:44.040
> 
> 标签：ajax, jsf-2

我有一个数据表，每行都有一个删除链接命令，如下所示：

```
<h:dataTable value='#{glbProjectDtoList}' var='projectDto'
    binding='#{projectController.projectDataTable}' styleClass='display'
    id='tblProject' rowClasses='gradeA, gradeA'
    columnClasses='projectTableName, projectTableProgress, projectTableAction'>
    ......
    <h:commandLink
        action="#{projectController.delete(projectDto.projectId)}">
        <img class="btnDeleteProject mr5"
            src="#{request.contextPath}/resources/images/icons/dark/trash.png" />
        <f:ajax execute="@form"
            onevent="function(data) {deleteProjectEventHandler(data);}"
            render=":tblProject" />
    </h:commandLink>
    ......
</h:dataTable> 
```

删除函数工作正常，但整个数据表没有重新渲染，是因为动作嵌套在数据表中还是其他原因？

* * *

更新 ：

它不工作，删除（:）后，抛出以下异常：

```
 javax.faces.FacesException: <f:ajax> contains an unknown id 'tblProject' - cannot locate it in the context of the component j_idt68 
```

表示没有 (:)，元素必须在相同的 h:form 标记中。

* * *

提前致谢。

-奶牛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:58:00.337

这可能是因为刷新组件状态时在 viewroot 中找不到数据表的 id。

> 要找出该组件在 viewroot 上的确切 ID，请检查页面源并找出呈现此数据表的 ID。

您需要使用与在 viewSource 中找到的 ID 相同的 ID，以允许组件在状态更改时在 viewRoot 中可见。

或者， UIComponent.findComponent 也会有所帮助，如果您指定的 ID 正确，它将返回 UIComponent 实例，否则返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:45:45.920

去掉`:`id前面的：

`<f:ajax execute="@form" onevent="function(data) {deleteProjectEventHandler(data);}" render="tblProject"/>`

如果 id 以分隔符开头（通常是`:`），则从根组件开始搜索该组件，否则从下一个 开始搜索`NamingContainer`。

查看 javadoc 了解更多信息：[UIComponent.findComponent](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#findComponent%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T03:25:50.020

我采取了另一种方法，使用表格外的隐藏形式。有用。

感谢大家 ;）

# android - helloword cocos2d-x android 失败

> ID：13797271
> 
> 赞同：-1
> 
> 时间：2012-12-10T08:24:48.097
> 
> 标签：android, cocos2d-x

我是学生，和我的同学一起，我们必须实现一个Android和IOS的游戏。我们使用 cocos2d-x 框架来做，但是我们在执行 android 的 helloword 项目时遇到了问题。事实上，我们可以在 android 模拟器上看到 helloword 应用程序，但是当我们启动它时，我们有一个黑屏，我们什么也做不了。我们可以毫无问题地启动 win32 应用程序，但它是导致 appart 崩溃的 android 部分。我提前感谢你，我为我糟糕的英语道歉，因为我不是英国人或美国人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:32:24.133

Android旧模拟器不支持OpenGl，即使他们支持它们太滞后..所以你需要在设备上测试它....

如果您使用的是最新版本的 Cocos2d-x，它利用了 OpenGL ES 2.0，它将无法在模拟器下运行。模拟器不支持 OpenGL ES 2.0。另外在显示太滞后时使用模拟器......所以在设备上测试它更好的选择

即使您有兴趣在模拟器上运行它

你必须在清单中添加这一行 < uses-feature android:glEsVersion="0x00020000" android:required="true" />

# c - 如何防止 Lua 在 rtos 中使用 stdio 或重定向 stdio

> ID：13797273
> 
> 赞同：-2
> 
> 时间：2012-12-10T08:24:47.607
> 
> 标签：c, lua, stdio, rtos

我正在尝试将 Lua 移植到 arm9 cpu 上的 ucos。lua 源代码在很多地方都有 usd stdio 库。然而，在我的硬件中，没有 uart 可用于 stdin/sdout 等。更糟糕的是，如果使用 stdio，则 ADS 的编译使用半主机。

所以我想避免在 lua 中使用 stdio 或者只是将 stdio 重定向到内存中的某个缓冲区！

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:22:41.443

您可以使用`io.input`/`io.output`重定向标准输入和输出。您也需要重新实现打印`io.write`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:00:41.930

Lua 中唯一使用 stdio 的部分是 io 库和捆绑的解释器。您可以简单地不包含 io 库并提供自己的接口，或者适当地修补它。您可能还需要覆盖基本库集中的打印。

# android - 无法运行示例 Facebook 应用程序

> ID：13797274
> 
> 赞同：2
> 
> 时间：2012-12-10T08:24:57.730
> 
> 标签：android, facebook

我整天都在做这件事。我遵循了多个教程，包括 facebooks 开发者网站上的一个和 mybringback.com 上的一个。我只是想让示例应用程序正常工作。到目前为止，它适用于模拟器。它允许我登录。当然，我还没有在模拟器上安装 facebook apk。在我的手机上，我只收到“发生错误”。信息。堆栈跟踪仅在应用程序在退出时崩溃时给出错误消息。`Unable to resume activity... caused by Failure delivering result ResultInfo....`当应用程序尝试从尝试 facebook 登录恢复时，错误是它的空指针异常。

*   我在 facebook sdk 的 hackbook 示例应用程序中有我的 facebook 应用程序 ID。

*   我已经使用 facebook sdk 指示您使用的命令生成了一个 keyhash。

*   我还使用了来自easyfacebookandroidsdk 的这个工具来以某种方式获得第二个keyhash。我不知道哪个是正确的，所以我把它们都放在了仪表板上。

*   我已经在我的测试设备上更新了 facebook 应用程序。

*   我输入了包名和类名。

com.facebook.android com.facebook.android.HackBook

除了替换 app_id 之外，我还需要对示例应用程序做些什么吗？

还有什么可能会影响我的应用程序登录 facebook 吗？

只是想在这方面找到一个新的方向，因为我觉得我已经耗尽了我的大脑资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:56:31.880

所以.....我觉得有点愚蠢，但我不敢相信我在搜索中没有偶然发现这些信息。

我的应用程序无法正常工作，因为我的手机上已经安装了 facebook，并且我以与我开发时使用的用户不同的用户身份登录。一旦我在实际的 facebook 应用程序中注销，一切都会完美无缺。

不是设置错误。感谢您的所有帮助观众实际上没有太多事情要做，因为一切实际上都设置正确。

# android - 我在哪里可以找到完整的参数列表，可以将其与 intent.putExtra 一起放入 Intent.ACTION_PICK 以从图库中获取视频？

> ID：13797275
> 
> 赞同：0
> 
> 时间：2012-12-10T08:24:57.517
> 
> 标签：android, video, android-intent, gallery

我的意思是，就像我定义的那样：

```
 intent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
        intent.putExtra("crop", "true");
        intent.putExtra("scale", true);
        intent.putExtra("aspectX", 1);
        intent.putExtra("aspectY", 1);
        intent.putExtra("outputX", 640);
        intent.putExtra("outputX", 640); 
```

从图库中获取 640x640 的方形图像。

以同样的方式，我想从具有某些参数的画廊中获取一些视频。

# jakarta-ee - 奇怪的 javax.el.propertynotfoundexception

> ID：13797276
> 
> 赞同：1
> 
> 时间：2012-12-10T08:24:59.260
> 
> 标签：jakarta-ee, propertynotfoundexception

我正在尝试在 glassfish-3.1.2 下开发一个应用程序。我有以下组实体：

```
@Entity
@NamedQueries({
@NamedQuery(name = Groups.FIND_BY_ID, query="SELECT g FROM Groups g WHERE g.id = :id"),
@NamedQuery(name = Groups.FIND_BY_NAME, query="SELECT g FROM Groups g WHERE g.group_name = :name"),
@NamedQuery(name = Groups.FIND_ALL, query="SELECT g FROM Groups g ORDER BY g.group_name")})

public class Groups implements Serializable {

    public static final String FIND_ALL = "Groups.findAll";
    public static final String FIND_BY_ID = "Groups.findById";
    public static final String FIND_BY_NAME = "Groups.findByName";

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String group_name;
    private String group_desc;
    @ManyToMany(mappedBy = "UsersGroups")
    private List<Users> user;
    /* Follow setters and getters 
```

和固件实体：

```
@Entity
@NamedQueries({
@NamedQuery(name = "findById", query="SELECT f FROM Firmware f WHERE f.id = :id"),
@NamedQuery(name = "findByType", query="SELECT f FROM Firmware f WHERE f.type = "type"),
@NamedQuery(name = "findAll", query="SELECT f FROM Firmware f ORDER BY f.type")})
public class Firmware implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private String type; 
    /* Follow getters and setters */ 
```

和以下 Bean

```
@Stateless
@LocalBean  
public class GroupsEJB {
@PersistenceContext private EntityManager em;

 public Groups persist(Groups group) {
    em.persist(group);
    return group;
}

 public Groups getById(Long id) {
    TypedQuery<Groups> query = em.createNamedQuery("findById",   Groups.class).setParameter("id", id);
    return query.getSingleResult();
}

public List<Groups> getAllGroups() {
    TypedQuery<Groups> query = em.createNamedQuery("findAll", Groups.class);
    return query.getResultList();
}

public List<Groups> getByName(String name) {
    TypedQuery<Groups> query = em.createNamedQuery("findByName", Groups.class).setParameter("group_name", name);
    return query.getResultList();
}
}

@Stateless
@LocalBean                                                                          
public class FirmwareEJB {
@PersistenceContext private EntityManager em;
/**
 * Creates a new instance of FirmwareEJB
 */
public FirmwareEJB() {
}
  public Firmware persist(Firmware firmware) {
    em.persist(firmware);
    return firmware;
}

public List<Firmware> getAllFirmware() {
    TypedQuery<Firmware> query = em.createNamedQuery("findAll", Firmware.class);
    return query.getResultList();
}

public List<Firmware> getByType(String type) {
    TypedQuery<Firmware> query = em.createNamedQuery("findByType", Firmware.class).setParameter("type", type);
    return query.getResultList();
}
 public Firmware getById(Long id) {
    TypedQuery<Firmware> query = em.createNamedQuery("findById", Firmware.class).setParameter("id", id);
    return query.getSingleResult();
    //Firmware f = em.find(Firmware.class, id);
    //return f;
}        
} 
```

和以下控制器

```
@ManagedBean
@RequestScoped
public class GroupsController {

@EJB
private GroupsEJB groupsEJB;

private Groups group = new Groups();
private List<Groups> groupsList = new ArrayList<Groups>();

/**
 * Creates a new instance of GroupsController
 */
public GroupsController() {
}

public String createGroup() {
    return "createGroup.xhtml";
}

public String saveGroup() {

    group = groupsEJB.persist(group);
    groupsList = groupsEJB.getAllGroups();
    return "listGroups.xhtml";
}

public String listGroups() {
    groupsList = groupsEJB.getAllGroups();
    return "listGroups.xhtml";
}

public Groups getGroup() {
    return group;
}

public void setGroup(Groups group) {
    this.group = group;
}

public List<Groups> getGroupsList() {
    return groupsList;
}

public void setGroupsList(List<Groups> groupsList) {
    this.groupsList = groupsList;
}

@ManagedBean
@RequestScoped
public class FirmwareController {

@EJB
private FirmwareEJB firmwareEJB;
private Firmware firmware = new Firmware();
private List<Firmware> firmwareList = new ArrayList<Firmware>();

/**
 * Creates a new instance of FirmwareController
 */
public FirmwareController() {
}

public String newFirmware() {
    return "newFirmware.xhtml";
}

public String saveFirmware() {
    List type = firmwareEJB.getByType(firmware.getType());
    if (!type.isEmpty()) {
        addMessage("Firmware already exist.");
        return "newFirmware.xhtml";
    }
    firmware = firmwareEJB.persist(firmware);
    firmwareList = firmwareEJB.getAllFirmware();
    return "listFirmware.xhtml";
}

public String listFirmware() {
    firmwareList = firmwareEJB.getAllFirmware();
    return "listFirmware.xhtml";

}

public String searchFirmware() {
    return "searchFirmware.xhtml";
}

public String searchFirmwareById() {
    Long id = firmware.getId();
    Firmware f = firmwareEJB.getById(id);
    addMessage("Firmware: " + f.getType());
    return "searchFirmware.xhtml";
}

public List<Firmware> getFirmwareList() {
    return firmwareList;
}

public void setFirmwareList(List<Firmware> firmwareList) {
    this.firmwareList = firmwareList;
}

public Firmware getFirmware() {
    return firmware;
}

public void setFirmware(Firmware firmware) {
    this.firmware = firmware;
} 
```

因此，当我使用以下 jsf 时：

```
 <ui:composition template="./base.xhtml">

        <ui:define name="content">
            <h:dataTable value="${groupsController.groupsList}" var="g" >

                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Group Name" />
                    </f:facet>
                    <h:outputText value="${g.group_name}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Group Description" />
                    </f:facet>
                    <h:outputText value="${g.group_desc}" />
                </h:column>

            </h:dataTable>
        </ui:define>

    </ui:composition> 
```

为了显示组列表，我获得

```
javax.el.PropertyNotFoundException: /listGroups.xhtml @25,65 value="${g.group_name}": The class 'entities.Firmware' does not have the property 'group_name'. 
```

我重建，重写，没有解决方案。我无法找到解决方案。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:41:22.947

看到 getter 和 setter 会很好。只是在黑暗中拍摄：在属性中使用下划线不符合 Java Bean 公约。我相信这也可能是您问题的根源。我敢肯定，如果你摆弄外壳，你可以解决它。我强烈建议您将属性重命名为 groupName 并设置 setGroupName 和 getGroupName，并使用 g.groupName 作为表达式。

# c - C中的printf语句中如何进行增量

> ID：13797279
> 
> 赞同：-3
> 
> 时间：2012-12-10T08:25:10.297
> 
> 标签：c, printf

我打印了上面的行。但是我得到的结果是 65。尽管我在第二次增加了，但我如何增加和打印？

```
int i=5; 
printf("%d%d",i,i++); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:32:22.023

您的`printf`调用会产生*未定义的行为*。修改`i`(in `i++`) 并同时执行独立读取而`i`没有中间序列点是非法的。

各种“评估顺序”在这里无关紧要。所有基于“评估顺序”或“之前”发生的事情和“之后”发生的事情来解释此代码行为的所有尝试都是绝对错误的。行为只是未定义的。故事结局。

就 C 语言本身而言，此代码可以打印`"Kill all humans!"`、使程序崩溃、格式化您的硬盘驱动器或干脆拒绝编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:29:46.367

ANSI C99 ISO/IEC 9899:1999 标准说

> 6.5.2.2 函数调用 函数指示符、实际参数和实际参数中的子表达式的求值顺序未指定，但在实际调用之前有一个顺序点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:28:14.827

正如您刚刚发现的那样，评估的顺序是未指定的。编译器可以自由地以任何顺序评估参数。（在您的情况下， i++ 在 i 之前进行评估。）

# regex - 使用正则表达式在 R 中提取特定长度的单词

> ID：13797280
> 
> 赞同：10
> 
> 时间：2012-12-10T08:25:12.047
> 
> 标签：regex, string, r

我有一个类似的代码（我在[这里](https://stackoverflow.com/questions/3423930/how-do-i-match-words-of-specific-sizes-using-regular-expressions)得到）：

```
m<- c("Hello! #London is gr8\. I really likewhatishappening here! The alcomb of Mount Everest is excellent! the aforementioned place is amazing! #Wow")

x<- gsub("\\<[a-z]\\{4,10\\}\\>","",m)
x 
```

我尝试了其他方法，比如

```
m<- c("Hello! #London is gr8\. I really likewhatishappening here! The alcomb of Mount Everest is excellent! the aforementioned place is amazing! #Wow")

x<- gsub("[^(\\b.{4,10}\\b)]","",m)
x 
```

我需要删除长度小于 4 或大于 10 的单词。我哪里错了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T09:11:12.020

```
 gsub("\\b[a-zA-Z0-9]{4,10}\\b", "", m) 
 "! # is gr8\. I  likewhatishappening ! The  of   is ! the aforementioned  is ! #Wow" 
```

让我们解释一下正则表达式术语：

1.  \b 在称为“单词边界”的位置匹配。这个匹配是零长度的。
2.  [a-zA-Z0-9]：字母数字
3.  {4,10}：{最小，最大}

如果你想得到这个的否定，你把它放在 between() 和你拿 //1

```
gsub("([\\b[a-zA-Z0-9]{4,10}\\b])", "//1", m) 
```

“你好！#London 是 gr8。我真的很喜欢这里发生的事情！珠穆朗玛峰的 alcomb 很棒！前面提到的地方太棒了！#Wow”

有趣的是，在 2 个正则表达式中存在 4 个字母的单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:56:22.047

来自 Alaxender & agstudy 的答案：

```
x<- gsub("\\b[a-zA-Z0-9]{1,3}\\b|\\b[a-zA-Z0-9]{10,}\\b", "", m) 
```

现在工作！

非常感谢，伙计！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:02:05.677

```
# starting string
m <- c("Hello! #London is gr8\. I really likewhatishappening here! The alcomb of Mount Everest is excellent! the aforementioned place is amazing! #Wow")

# remove punctuation (optional)
v <- gsub("[[:punct:]]", " ", m)

# split into distinct words
w <- strsplit( v , " " )

# calculate the length of each word
x <- nchar( w[[1]] )

# keep only words with length 4, 5, 6, 7, 8, 9, or 10
y <- w[[1]][ x %in% 4:10 ]

# string 'em back together
z <- paste( unlist( y ), collapse = " " )

# voila
z 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T09:08:14.947

```
gsub(" [^ ]{1,3} | [^ ]{11,} "," ",m)
[1] "Hello! #London gr8\. really here! alcomb Mount Everest excellent! aforementioned
     place amazing! #Wow" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T09:09:24.997

这可能会让你开始：

```
m <- c("Hello! #London is gr8\. I really likewhatishappening here! The alcomb of Mount Everest is excellent! the aforementioned place is amazing! #Wow")
y <- gsub("\\b[a-zA-Z0-9]{1,3}\\b", "", m) # replace words shorter than 4
y <- gsub("\\b[a-zA-Z0-9]{10,}\\b", "", y) # replace words longer than 10
y <- gsub("\\s+\\.\\s+ ", ". ", y) # replace stray dots, eg "Foo  .  Bar" -> "Foo. Bar"
y <- gsub("\\s+", " ", y) # replace multiple spaces with one space
y <- gsub("#\\b+", "", y) # remove leftover hash characters from hashtags
y <- gsub("^\\s+|\\s+$", "", y) # remove leading and trailing whitespaces
y
# [1] "Hello! London. really here! alcomb Mount Everest excellent! place amazing!" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T08:40:51.760

我不熟悉 R，也不知道它在正则表达式模式中支持哪些类或其他功能。没有它们，模式将是这样的

```
[^A-z0-9]([A-z0-9]{1,3}|[A-z0-9]{11,})[^A-z0-9] 
```

# c# - PropertyDescriptor.AddValueChanged 是如何工作的？

> ID：13797286
> 
> 赞同：2
> 
> 时间：2012-12-10T08:26:01.220
> 
> 标签：c#, .net

我对这种方法的细节很感兴趣。如何以及通过什么来跟踪财产的价值变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:33:09.620

Andrew Smith 有一篇[很酷的博客文章](http://agsmith.wordpress.com/2008/04/07/propertydescriptor-addvaluechanged-alternative/)，我认为它对你有帮助。

> 我看到的解决方案是访问 `PropertyDescriptor`并使用它的`AddValueChanged`方法来提供一个 `EventHandler`在属性发生变化时接收通知。有时，回复会`DependencyPropertyDescriptor` 直接提及/使用，但它是同一件事，因为它只是一个派生的 PropertyDescriptor，它提供有关它所代表的基础 DependencyProperty 的附加信息。您可以通过几种方式获取此属性描述符，但最常见的是从 TypeDescriptor.GetProperties 方法或使用 DependencyPropertyDescriptor.FromProperty 获取它。
> 
> 这种方法的问题是它会根您的对象，因此**它永远不会被 GC 收集**. 已经有很多关于挂钩事件（尤其是静态事件）如何使您的对象植根的讨论，所以我不会在那里详细介绍。虽然在这种情况下您似乎没有挂钩静态事件，但实际上您是。当您将处理程序添加到属性描述符时，该属性描述符会将委托存储在一个哈希表中，该哈希表由您要挂钩其属性的对象作为键控。委托/处理程序基本上是指向对象上的方法的指针（如果是静态方法，则没有对象），因此这意味着属性描述符具有对您的对象以及您正在查看其值的对象的引用（因为是哈希表的关键）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-18T22:05:12.177

`PropertyDescriptor`是一个抽象类，因此对于如何触发值更改事件可能有很多答案，具体取决于您手头的具体实现。但可能一个常见的情况是**通过反射**`PropertyDescriptor`获得a ，在这种情况下，我认为返回了一个对象。**`ReflectPropertyDescriptor`**

 **查看该类的[参考源](https://referencesource.microsoft.com/#system/compmod/system/componentmodel/ReflectPropertyDescriptor.cs,cf693c889afd5cca)`SetValue()`，您可以看到该事件仅在调用该方法时引发。据我了解，这意味着如果您只是这样做：

`someObject.A = "value";`

不会`ValueChanged`引发任何事件。

但是，如果您获得了`ReflectPropertyDescriptor`for 属性`A`并使用它来间接设置值，如下所示：

`descriptor.SetValue(someObject, "value");`

这将引发事件。

从另一个角度考虑这一点，当设置属性值时，CLR 似乎无法在更基本的级别上实际引发事件。我假设这样的事情会产生通常不受欢迎的开销，因为每次在任何属性上设置值时，即使没有事件订阅者，每个集合（实际上只是一个函数调用）也必须检查事件订阅者。**

# python - 带有使用self的静态方法的python静态类？

> ID：13797296
> 
> 赞同：1
> 
> 时间：2012-12-10T08:27:13.320
> 
> 标签：python, class, static, static-methods

我在 pycassa 中做一个数据库插入脚本。我想建立一个公共静态类，它定义了一些变量，这些变量稍后会被其他函数大量使用。这是我所拥有的...

```
class ks_refs():
    pool = ConnectionPool('TweetsKS')

    user_name_cf = self.cf_connect('UserName')
    user_tweet_cf = self.cf_connect('UserTweet')

    def cf_connect(column_family):
        cf = pycassa.ColumnFamily(self.pool, column_family)
        return cf 
```

我什至还没有尝试运行它，因为我确信它不会工作。你可以看到我首先想要这个静态变量 'pool'，然后使用需要 'pool' 工作的 cf_connect 方法设置 user_name_cf 和 user_tweet_cf（以及稍后的更多）。

我知道我可以将该方法放在类之外，或者我可以拥有这个非静态的并创建它的实例，但我想尝试一下，因为这是我真正想要的（在我只是使用全局变量之前，但我认为拥有所有这些的静态类是最好的主意）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:31:21.230

我认为您想要一个*类*方法：

```
@classmethod
def cf_connect(cls, column_family):
    cf = pycassa.ColumnFamily(cls.pool, column_family)
    return cf 
```

现在您可以轻松地引用在您的类上定义的池。

但是，您的`user_name_cf`和`user_tweet_cf`“属性”将不起作用。您可以在创建类定义后添加这些：

```
class ks_refs():
    pool = ConnectionPool('TweetsKS')

    @classmethod
    def cf_connect(cls, column_family):
        cf = pycassa.ColumnFamily(cls.pool, column_family)
        return cf

user_name_cf = ks_refs.cf_connect('UserName')
user_tweet_cf = ks_refs.cf_connect('UserTweet') 
```

然后它们是模块级常量，或者您可以在事后将它们作为属性添加到类中：

```
ks_refs.user_name_cf = ks_refs.cf_connect('UserName')
ks_refs.user_tweet_cf = ks_refs.cf_connect('UserTweet') 
```

# scala - Scala：插入异常及其管理

> ID：13797299
> 
> 赞同：0
> 
> 时间：2012-12-10T08:27:25.013
> 
> 标签：scala, exception

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:19:55.467

一旦我有一个名为`NubLogger`处理此类问题的类。不要问名字的选择...

```
public static void handle(Throwable t) {
    if (t == null) {  
        t = new Throwable(NubLogger.class.getName() + ".handle((Throwable)null)");            
    }
    if (t instanceof RuntimeException) {
        log(t);
        throw (RuntimeException) t;
    } else if (t instanceof Exception) {
        log(t);
        throw new RuntimeException(t);
    } else if (t instanceof Error) {
        log(t);
        throw (Error) t;
    } else if (t instanceof Throwable) {
        log(t);
        throw new RuntimeException(t);
    } else {
        t = new UnsupportedOperationException("Unknown throwable type: " + t.getClass(), t); 
        log(t);
        throw (RuntimeException)t;
    }
} 
```

**编辑**

```
class Element (var name:String){

    // VALIDAZIONE DI ELEMENT
    // Preferrable variant - use val name, not var name
    require(name != null)

    // VALIDAZIONE DI ELEMENT 2
    // Will work with var-s
    def validate = name != null

}//class Element 
```

# html - Css无法并排列出框

> ID：13797301
> 
> 赞同：1
> 
> 时间：2012-12-10T08:27:50.893
> 
> 标签：html, css

我有一个简单的代码，我想列出画廊中的图像。我想显示这些图像

![](../Images/ae88229d74a9222b9a730faecf6280a4.png)

但是 div 在 y 轴上按升序输出。我怎样才能解决这个问题？我的 php 和 html 代码在这里

```
<div id="gallerycontent">
        <?php for($x=0;$x<10; $x++){ ?>
        <div class="galleryitem">
        <img src="images/SamplePackSpread.png"/>
        </div>
        <?php }?>
    </div> 
```

我的css代码在这里

```
#gallerycontent{
    float: left;
    max-width: 685px;
    padding: 10px 5px 5px 5px;
    text-align: justify;
}

#gallerycontent .galleryitem{
    width: 250px;
    height: 250px;
    background:url('../images/screen.png');
    background-repeat: no-repeat;
    padding: 5px 5px 5px 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    clear: both;
}
#gallerycontent img{
    float: left;
    width: 90%;
    height: 90%;
    margin: 2.5%;
}
#gallerycontent ul{
    padding-left: 50px;
    list-style-type:square;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:37:36.620

添加`display:inline-block`到`.galleryitem`

```
#gallerycontent .galleryitem{
    width: 250px;
    height: 250px;
    background:url('../images/screen.png');
    background-repeat: no-repeat;
    padding: 5px 5px 5px 5px;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
    clear: both; display:inline-block
} 
```

**[演示](http://jsfiddle.net/b5XDK/11/)**

# html - 使用“已弃用”的 HTML 标签

> ID：13797302
> 
> 赞同：1
> 
> 时间：2012-12-10T08:27:54.730
> 
> 标签：html

很长一段时间以来，我一直在我的 HTML 中使用“已弃用”的 HTML 标签，例如`b`, `i`,`u`用于优化很重要的项目。我经常会发现如下代码：

```
<div class="WrapperName">
  <div class="ItemElementName">
  </div>
</div> 
```

不久前（有些奇怪的年份）我注意到谷歌使用了我在搜索列表中提到的标签，显然是为了优化输出。所以我上面的例子可能看起来像这样：

```
<b>
  <u>
  </u>
</b> 
```

我喜欢这个，从那以后就经常使用它。我主要在没有定义布局的部分代码中使用标签，但是像重复容器的部分一样，因为这是最大的胜利。使用 CSS 我取消设置元素的默认属性以使它们成为“干净”的元素。

即使在现代浏览器中，您可以使用任何您喜欢的标签名称并且它会起作用，但我选择了这些标签名称，因为它们适用于较旧的（IE）浏览器，因此我不需要在浏览器中注册它们。

对这种工作方式有什么真正的反对吗？原来的标签已经被弃用（所以不要添加任何特定的值 - 就像我想要的那样），它们很短并且适用于所有浏览器..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:31:42.837

[`<b>`](http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-b-element), [`<i>`](http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-i-element)an等元素[`<u>`](http://www.w3.org/html/wg/drafts/html/master/text-level-semantics.html#the-u-element)并**没有**被弃用，它们的含义刚刚改变，所以继续使用它们。

（我已经将上面的每一个链接到它在 W3C HTML5 规范中的条目）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:07:40.290

某些元素是否被弃用与基本问题无关。您实际上是在询问 HTML 标签的使用与它们定义的含义无关，甚至与它们定义的含义相反，仅仅是因为标签很短，您希望覆盖它们的默认样式并强加您自己的样式。有几个反对这种用法的论据。它们对所有类型的使用都不是决定性的，但它们使网页上的使用受到高度质疑：

某些元素具有您可能无法覆盖的已定义或实际功能。例如，一个`<input>`元素接受用户输入并参与跳格顺序。这可能不适用于您脑海中的单字母标签，但值得注意的是关于“免费”使用标签的一般要点。

元素可能具有您无法（完全）在（所有）浏览器中覆盖的默认渲染。尤其是较旧的浏览器可能会使用不受 CSS 影响的渲染例程（例如，表单字段）。这也可能不适用于单字母标签。

CSS 最终只是表示建议，可能会被多种原因和多种方式忽略或覆盖；请参阅[CSS 警告](http://www.cs.tut.fi/%7Ejkorpela/css-caveats.html)。

搜索引擎将按照自己的方式处理标签。例如，他们可能认为`b`元素内容比同一页面上的其他文本具有更多的相对权重。

以这种方式使用标签维护页面变得复杂，特别是如果不熟悉这个想法的人需要接管它。

`<c>`使用,等未定义的标签可能会更好`<d>`，`<e>`即使您必须在 IE 中“注册”它们（`document.createElement()`每个标签名称只有一个）。但是许多反驳仍然适用（并且某些浏览器有一天可能会定义`<c>`一些令人惊讶的含义）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T08:34:19.743

`b`, `i`, 和`u`已被弃用，您也不应该使用自己的标签名称，因为规范不允许这样做。将`strong`标签用于您想要强调的内容并`span`用于其余内容。`span`具有特定目的，允许您使用它来将您喜欢的任何 CSS 应用于某些文本。

# android - 如何使用 PhoneGap 包装现有的 iOS 应用程序

> ID：13797305
> 
> 赞同：0
> 
> 时间：2012-12-10T08:28:05.980
> 
> 标签：android, iphone, ios, cordova

我已经有工作的 iPhone 和 Android 应用程序。我们计划添加更多功能/页面，我们还计划使用 PhoneGap 扩展应用程序以支持多个移动平台。

如何在现有的 iPhone 应用程序中使用 PhoneGap？PhoneGap 是否是可插拔的，除了用PhoneGap 重写整个Application 之外，有没有其他的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:37:02.927

我不认为这是可能的。最好的办法是使用 PhoneGap 重新编写应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T07:23:42.080

您可以在现有项目中将 PhoneGap 与 webView 一起使用。

请参阅[此](http://docs.phonegap.com/en/2.9.0/guide_cordova-webview_ios.md.html#Embedding%20Cordova%20WebView%20on%20iOS)链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T20:40:32.020

我从来没有亲自使用过phonegap，但你不能只添加phonegap sdk，然后在你添加的任何活动/视图控制器中使用webview吗？这样你就可以保持所有旧的相同，但添加对 ios 和 android 相同的新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T12:22:14.633

据我所知，您所要求的是不可能的，或者至少是不合理的。

如果我没听错的话，您已经为 iOS（在 ObjC 中）和 Android（在 Java 中）编写了*原生*移动应用程序，而 Phonegap 应用程序是嵌入在它们自己的容器中的基于 HTML5 的应用程序。

这是两个完全不同的世界，没有（有用或有利可图的）混合方式。

您可以考虑一些技巧（使用 webview，如其他答案中所述）在*现有的*本机应用程序中包含用 Phonegap 编写的*新代码。*但是，没有机会，您可以在 Phonegap中重用*本机代码（即当前功能）。*

 **我能想到的唯一一件事是，您可以考虑将现有应用程序作为本机插件并在 Phonegap 内部使用。但是，您将需要做大量工作来更改现有代码以适应插件的标准，而且我不确定，如果在 Phonegap 中从头开始重写整个应用程序不是更好的解决方案，因为在这方面花费的时间和金钱过程。**

# xml - XML Starlet 的替代品

> ID：13797307
> 
> 赞同：7
> 
> 时间：2012-12-10T08:28:19.243
> 
> 标签：xml, bash, xmlstarlet

`XML starlet`中的 XML 处理有什么替代方法`bash`吗？我的典型用法是：

*   漂亮的格式；
*   通过 选择数据`XPath`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:38:00.820

看看[`xmllint`](http://xmlsoft.org/xmllint.html)。

要格式化 xml：

```
$ xmllint --format file.xml 
```

要评估 XPath：

```
$ xmllint --format --shell file.xml <<< "cat /some/xpath/expression" 
```

# wordpress - WordPress：使用 add_filter 时如何返回值？

> ID：13797313
> 
> 赞同：10
> 
> 时间：2012-12-10T08:28:35.817
> 
> 标签：wordpress, add-filter

我已经阅读了 WordPress codex 很多次，但是如果涉及多个参数，我仍然不明白如何返回值。例如：

```
function bbp_get_topic_title( $topic_id = 0 ) {
    $topic_id = bbp_get_topic_id( $topic_id );
    $title    = get_the_title( $topic_id );

    return apply_filters( 'bbp_get_topic_title', $title, $topic_id );
} 
```

在上面的过滤器中，有 2 个参数。当我`add_filter`，我应该返回 2 值，还是只返回我需要的值？如果需要标题，以下示例是否正确？

```
add_filter( 'bbp_get_topic_title', 'my_topic_title', 10, 2 );

function my_topic_title( $title, $topic_id ){
  $title = 'my_example_title';
  return $title;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T08:48:57.523

这是完全正确的。

注册过滤器（或基本上调用`apply_filters`）时，您应该使用至少两个参数调用该函数 - 要应用的过滤器的名称和将应用过滤器的值。

您传递给函数的任何其他参数都将传递给过滤函数，但**前提**是它们请求了额外的参数。这是一个例子：

```
// Minimal usage for add_filter()
add_filter( 'my_filter', 'my_filtering_function1' );
// We added a priority for our filter - the default priority is 10
add_filter( 'my_filter', 'my_filtering_function2', 11 );
// Full usage of add_filter() - we set a priority for our function and add a number of accepted arguments.
add_filter( 'my_filter', 'my_filtering_function3', 12, 2 );

// Apply our custom filter
apply_filters( 'my_filter', 'content to be filtered', 'argument 2', 'argument 3' ); 
```

鉴于上面的代码，`content to be filtered`将首先传递给`my_filtering_function1`. 此函数将只接收`content to be filtered`而不是附加参数。

然后内容将被传递（在被 处理之后`my_filtering_function1`）到`my_filtering_function2`. 同样，该函数将只接收第一个参数。

最后，内容将被传递给`my_filtering_function3`函数（因为它已被前两个函数更改）。这次函数将被传递 2 个参数（因为我们指定了这个），但它不会得到`argument 3`参数。

* * *

见[`apply_filters()`源代码](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/plugin.php#L134)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-12T21:18:51.693

## **练习`add_filter`和`apply_filters`**

**首先要知道**的是`apply_filters`返回它的第二个参数，试试这个`functions.php`：

```
echo apply_filters('cat_story', 'A cat'); // echoes "A cat" 
```

**第二件要知道**的是，在`apply_filters`返回“A cat”之前，它会应用可以修改“A cat”的过滤器，添加过滤器`add_filter`：

```
function add_chasing_mice($cat) {
    return $cat . ' is chasing a mice';
}
add_filter('cat_story', 'add_chasing_mice');

echo apply_filters('cat_story', 'A cat'); // echoes "A cat is chasing a mice" 
```

**第三件事**是我们可以添加多个过滤器：

```
// #1
function add_chasing_mice($cat) {
    return $cat . ' is chasing a mice';
}
add_filter('cat_story', 'add_chasing_mice');

// #2
function add_something_else($cat) {
    return $cat . ', but it\'s not gonna catch it';
}
add_filter('cat_story', 'add_something_else');

echo apply_filters('cat_story', 'A cat'); // echoes "A cat is chasing a mice but it\'s not gonna catch it" 
```

**要知道的第四件事**是您可以按特定顺序应用过滤器：

```
// #1
function add_chasing_mice($cat) {
    return $cat . ' is chasing a mice';
}
add_filter('cat_story', 'add_chasing_mice', 10); // 10 - is priority

// #2
function add_something_else($cat) {
    return $cat . ', but it\'s not gonna catch it';
}
add_filter('cat_story', 'add_something_else'); // 10 as well, if omitted 

// The filter will be applied before `add_chasing_mice` and `add_something_else`
function replace_the_cat($cat) {
    return 'A dog';
}
add_filter('cat_story', 'replace_the_cat', 9); // 9 < 10, so the filter will be applied first

echo apply_filters('cat_story', 'A cat'); // echoes "A dog is chasing a mice but it's not gonna catch it"; 
```

**要知道的第五件事**是您可以将其他参数传递给过滤器：

```
function add_chasing_mice($cat) {
    return $cat . ' is chasing mice';
}
add_filter('cat_story', 'add_chasing_mice', 10); // 10 - is priority

function add_something_else($cat, $exclam, $wft) {
    return $cat . ', but it\'s not gonna catch it' . $exclam . $wft;
}
add_filter('cat_story', 'add_something_else', 10, 3); // 3 arguments

function replace_the_cat($cat) {
    return 'A dog';
}
add_filter('cat_story', 'replace_the_cat', 9); // 9 < 10, so the filter will be applied first

echo apply_filters('cat_story', 'A cat', '!!!', '!1wTf!?'); 
// 3 arguments are: 'A cat', '!!!', '!1wTf!?'.
// echoes "A dog is chasing a mice but it's not gonna catch it!!!!1wTf!?"; 
```

# iphone - 如何在 UIToolBar 键盘中添加自定义键？

> ID：13797314
> 
> 赞同：1
> 
> 时间：2012-12-10T08:28:39.447
> 
> 标签：iphone, ios, uitoolbar

我想为十进制数字添加自定义键（图像上的红点），我该怎么做？

![在此处输入图像描述](../Images/e760c5157256398c2257396a6ab3eba7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:39:19.230

要解决此问题，您只需将键盘类型更改为 UIKeyboardTypeNumbersAndPunctuation：

```
amountTextField.keyboardType = UIKeyboardTypeNumbersAndPunctuation; 
```

如果你使用它，那么也不需要添加工具栏......你只需将 UIKeyBoard 的“RETURNKEYTYPE”添加为 UIReturnKeyDone

```
amountTextField.returnKeyType = UIReturnKeyDone; 
```

例如：

```
amountTextField = [[UITextField alloc] initWithFrame:CGRectMake(100, 4, 190, 26)];
amountTextField.backgroundColor = [UIColor clearColor];
amountTextField.keyboardType = UIKeyboardTypeNumbersAndPunctuation;
amountTextField.returnKeyType = UIReturnKeyDone;
amountTextField.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T16:24:01.140

解决了。我只需要像屏幕截图一样选择键盘：“小数点”。

![在此处输入图像描述](../Images/02c74bced6cc899598a64a1854837504.png)

# java - 使用cyberneko将html字符串解析为dom文档

> ID：13797315
> 
> 赞同：0
> 
> 时间：2012-12-10T08:28:39.533
> 
> 标签：java, html-parsing, domdocument, cyberneko

我正在尝试使用 neko html 将 html 字符串解析为 w3c dom 文档，但我的文档始终为空。这是我使用的代码：

```
try {
        String html = readFile("C:/Users/thomas/Desktop/test.html");

        InputStream is = new ByteArrayInputStream(html.getBytes("UTF-8"));

        DOMParser parser = new DOMParser();

        parser.parse(new InputSource(is));
        Document document = parser.getDocument();

        System.out.println(parser.getDocumentSource());
    } catch (Exception e) {
        System.out.println(e.getMessage());
    } 
```

# android - 共享首选项与 Sql Lite 数据库

> ID：13797316
> 
> 赞同：3
> 
> 时间：2012-12-10T08:28:54.573
> 
> 标签：android

我正在开发一个应用程序，我必须存储 30 到 50 个朋友联系人、姓名、电话和密码，我有两个选项共享首选项和 sql lite，所以我应该使用哪一个，以便它获得更少的存储空间并且不会浪费很多内存，在搜索任何联系人 no 或 item 时哪个会更快？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T08:30:51.823

**SQLite** *（数据类型复杂，数据量大）*

大量相同的结构化数据应存储在 SQLite 数据库中，因为数据库是为此类数据设计的。

由于数据是由数据库结构化和管理的，因此可以使用 SQL 等查询语言对其进行查询以获取符合特定条件的数据子集。

这使得在数据中进行搜索成为可能。**当然，管理和搜索大量数据会影响性能，因此从数据库读取数据可能比从 SharedPreferences 读取数据要慢。**

**SharedPreferences***（数据很小，数据是premitive类型，您不想与用户共享）*

SharedPreferences 是一个**键/值**存储，您可以在其中将数据保存在某个键下。

要从存储中读取数据，您必须知道数据的键。这使得读取数据非常容易。

但是，尽管存储少量数据很容易，但存储和读取大型结构化数据却很困难，因为您需要为每个数据定义键，而且**您无法真正在数据中进行搜索，除非您有一定的概念命名键。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:44:38.400

对于此类数据和要求，您绝对应该使用 SQLite。SharedPreferences 旨在保存首选项（因此得名），而不是结构化数据。大量数据。同样使用 SQL，您可以过滤和排序数据，例如`select * from contact where lastname like 'A%' order by firstname`获取姓氏以 A 开头的所有联系人，并按他们的名字排序（仅作为示例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:47:00.377

我认为最好的解决方案取决于现在和将来必须如何开发应用程序。如果您想开发一个将来无法更改的应用程序（例如，联系人必须是姓名、电话和密码），您可以使用“快速而肮脏”的解决方案，在共享首选项中保存键值集和不要浪费任何时间。但是如果信息可以改变并且应用程序可以有一些改进......创建对象联系人和数据结构来管理它更有用。

如果联系人是几个数字，你不关心表演。直接访问用户id的50条记录在SQLite上有不错的表现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:08:02.820

SQLite（数据类型复杂，数据量大）

SharedPreferences（数据很小，数据是premitive类型，你不想和用户分享）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T06:47:13.530

共享首选项是维护数据以轻松存储和获取的最佳选择。但是，一旦我们从设置菜单中清除了该应用程序的数据，我们就会丢失该应用程序的所有共享首选项。如果我错了，请纠正我。

谢谢。

# c# - 实体框架查询结果

> ID：13797318
> 
> 赞同：2
> 
> 时间：2012-12-10T08:29:03.407
> 
> 标签：c#, entity-framework-4

我正在使用 EntityFramework 4.3.1 并尝试运行这样的查询

```
Context.Set<KullaniciYetkiView>().Where(y => y.KullaniciId == kullaniciId && y.YetkiKod == yetkiKod) 
```

当我运行查询并按预期返回 115 条记录时。但是当我查看记录时，它们都是一样的。所以我听探查器的查询，看看我错过了什么，看看下面的查询，它从管理工作室返回 115 条不同的记录。

```
exec sp_executesql N'SELECT 
[Extent1].[YetkiKod] AS [YetkiKod], 
[Extent1].[KullaniciId] AS [KullaniciId], 
[Extent1].[LokasyonId] AS [LokasyonId], 
[Extent1].[YetkiId] AS [YetkiId], 
[Extent1].[HiyerarsikKod] AS [HiyerarsikKod], 
[Extent1].[LokasyonSeviye] AS [LokasyonSeviye], 
[Extent1].[Yetkili] AS [Yetkili], 
[Extent1].[Engelli] AS [Engelli], 
[Extent1].[LokasyonEngelli] AS [LokasyonEngelli]
FROM [dbo].[sayKullaniciYetkiView] AS [Extent1]
WHERE ([Extent1].[KullaniciId] = @p__linq__0) AND ([Extent1].[YetkiKod] = @p__linq__1)',N'@p__linq__0 uniqueidentifier,@p__linq__1 nvarchar(4000)',@p__linq__0='283CCB41-3BDF-4BEF-BD26-E46191CA069D',@p__linq__1=N'FIN.SATISFATURA.E' 
```

我认为问题出在 EF 中，为了证明这一点，我运行这样的代码

```
 var yetkiler1 = Context.Set<KullaniciYetkiView>().Where(y => y.KullaniciId == kullaniciId && y.YetkiKod == yetkiKod).Distinct().ToList();
        var yetkiler2 = Context.Set<KullaniciYetkiView>().Where(y => y.KullaniciId == kullaniciId && y.YetkiKod == yetkiKod).ToList().Distinct(); 
```

第一个查询返回 115 行，第二个查询返回 1。

![在此处输入图像描述](../Images/a8a4f5e4bd8d3412007c8c03c6b657d7.png)

我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:02:57.313

就像昆顿说我的模型配置是错误的。

如果你有超过 1 列作为键，你应该在上下文**OnModelCreating**方法上设置它们，比如`modelBuilder.Entity<KullaniciYetkiView>().HasKey(ky => new { ky.KullaniciId, ky.LokasyonId, ky.YetkiId });`

这里是 HasKey 方法的解释。[http://msdn.microsoft.com/en-us/library/gg671266(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg671266(v=vs.103).aspx)

# node.js - 是否可以连接 Node.js 和 RED5？

> ID：13797321
> 
> 赞同：0
> 
> 时间：2012-12-10T08:29:26.480
> 
> 标签：node.js, chat, red5

我有以下问题。

我有一个使用 ActionScript3 (AS3)、SharedObjects (SO) 和 RED5 开发的聊天。好吧，这可以正常工作。现在，我正在使用 Node.js 开发一个聊天，这也可以正常工作。

我的问题/问题是如何连接这两个聊天。是否可以在 Node.js 和 RED5 之间发送消息？我希望一个使用 Node.js 聊天的用户和另一个使用 RED5 聊天的用户可以一起聊天。

有人知道一些解决方案吗？这是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:54:22.377

您需要在 Java 中编写一些服务器端 servlet 来代理您的 Node.js 消息与 red5 聊天之间的往来。
您是否熟悉 Red5 API 并对 Java Servlet Container 有所了解？因为您将需要它来实施解决方案。Red5 是一种在 Tomcat Servlet Container 中运行的服务器端技术。可能 Node.js 可以通过一个简单的 servlet 向 red5 发送消息，然后将消息转发给所有连接的客户端。
反过来，您可以在 Red5 服务器端捕获所有聊天消息，然后将消息转发到 Node.js（但是我不知道您可以在 Node.js 中编写哪些传入消息接收器）。

塞巴斯蒂安

# android - 是否可以在 Android 上显示 svgz？

> ID：13797322
> 
> 赞同：4
> 
> 时间：2012-12-10T08:29:28.533
> 
> 标签：android, svg, zip

有没有一种简单的方法可以在 Android 应用程序中显示 SVGZ 图像。我知道有一些库可以显示 SVG 图像。但据我所知，他们不支持 SVGZ。

如果没有可以显示 SVGZ 图像的库，是否可以使用 java.util.zip 解压缩文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:43:53.513

是的，应该可以提取 svg 文件并使用一个名为[svg-android](https://code.google.com/p/svg-android/)的小库将其可视化。

小例子：

```
GZIPInputStream is=/*...*/;
PictureDrawable img = SVGParser.getSVGFromInputStream(is, 0, 0)
                               .createPictureDrawable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:02:16.867

试试[这个 svg-android 的分支](https://github.com/josefpavlik/svg-android/commits/master)。它会自动检测 svgz，所以你可以直接做

```
SVGParser.getSVGFromResource(getResources(), R.raw.mysvgz); 
```

它与 svg 定义更兼容。换句话说，svg-android的原始版本由于缺少某些功能而无法查看许多svg。

# mongodb - 将 Java bean 和 Scala 案例类映射到 MongoDB 对象

> ID：13797323
> 
> 赞同：3
> 
> 时间：2012-12-10T08:29:29.810
> 
> 标签：mongodb, javabeans, morphia, case-class, salat

我目前正在努力解决这个问题..

在我们的系统中，我们使用**Java bean** *和* **Scala 案例类**，它们经常相互包含。所以，我正在寻找如何将这些对象映射到**mongoObjects**的好解决方案，这样我就可以从数据库中保存/加载它们。

为此，我尝试**了 Morphia**，但不幸的是它不会从 json 序列化回对象，因为它无法构造案例类。

所以我尝试了**Salat**，但这个只适用于案例类而不适用于 java bean :(

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T17:29:12.083

萨拉特开发商在这里。

如果您想使用 Salat，您可以将您的 Java bean 转换为 Scala 案例类，并使用注释构造函数参数以`@scala.reflect.BeanProperty`实现与 Java 的互操作性（如果确实有必要的话）。

# javascript - 最后一部分字符串的正则表达式应该是数字

> ID：13797325
> 
> 赞同：-3
> 
> 时间：2012-12-10T08:29:41.173
> 
> 标签：javascript, asp.net, regex

TST0001-ABI-NGW-000003

以上是我想要编写一个正则表达式的字符串，它只允许以 6 位数字结尾的代码。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:39:40.987

以下表达式匹配以六位数字结尾的字符串，不少于**但也不少**。

```
/(?:\D|^)\d{6}$/.test(str) 
```

测试模式：

```
'TST0001-ABI-NGW-000003'  // match
'ABC123456'  // match
'123456'     // match
'1234567'    // no match 
```

最后匹配至少六位数字可以简单地完成：

```
/\d{6}$/.test(str) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:32:28.033

以下应该有效：

```
/\b\d{6}$/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T08:39:12.950

`\d{6}$`

执行您指定的操作。这匹配任何以 6 位数字结尾的字符串。（它不检查其他任何东西）

```
'08909089089' // matches
'42LK429409'  // matches
'098908'      // matches
'AR09890'     // doesn't match 
```

# jquery - 使用自动完成 live() 和 _renderItem 不起作用

> ID：13797328
> 
> 赞同：0
> 
> 时间：2012-12-10T08:29:47.517
> 
> 标签：jquery, jquery-ui, autocomplete

我整个早上都被困在这个问题上：我想动态使用自动完成功能，我需要调用 _renderItem 来显示服务器正在返回的所有项目。我有一个静态完美运行的代码。现在我需要 web 是更灵活的解决方案，将这部分动态地引入 DOM。我已经改变了我认为它会起作用的东西......但它没有。这是我的代码简化：

```
$(document).ready(function(){

var site_id = 'site_id';

// Use the .autocomplete() method to compile the list based on input from user
$('#itemCode').livequery( function() {
    $(this).autocomplete({
        source: 'include/autocompletado_promos.php?site_id=' + site_id,
        minLength: 1,
        select: function(event, ui) {
            return false;
        }
    });

}).data( "autocomplete" )._renderItem = function(ul, item) {
    alert("works!");

}); 
```

那里有什么问题？非常感谢提前！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:03:23.383

编辑：好的，我一次又一次地意识到我做错了什么，这是最终的代码工作：

```
 $(this).autocomplete({
        source: 'include/autocompletado_promos.php?site_id=' + site_id,
        minLength: 1,
        select: function(event, ui) {
            return false;
        }
    }).data( "autocomplete" )._renderItem = function(ul, item) {
         alert("works!");
    }; 
```

谢谢！

# python - 使用 argparse 显示脚本的功能

> ID：13797330
> 
> 赞同：0
> 
> 时间：2012-12-10T08:29:54.450
> 
> 标签：python, argparse

当我用 -h 调用我的脚本时，我希望它打印一条消息，说“这个脚本做某事”

我的意思是当我做

```
$myscript --help 
```

它应该显示

```
This script is used to fire monkeys and hire donkeys.

usage -- .... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:32:46.583

只需将 help="my help message" 添加到每个参数即可。 [http://docs.python.org/dev/library/argparse.html#add-help](http://docs.python.org/dev/library/argparse.html#add-help)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:39:08.383

回答我自己的问题：

我需要使用

```
parser = argparse.ArgumentParser(description="This script ... " 
```

# git - Intellij - 在多个 git 本地分支之间切换

> ID：13797331
> 
> 赞同：4
> 
> 时间：2012-12-10T08:30:06.243
> 
> 标签：git, intellij-idea

我在具有多个模块的项目中使用 Intellij。我已经开始了一个大的重构并为 3 个模块创建了本地分支。每个分支都有相同的名称。目前，我必须检查它们中的每一个（即每个模块）。有没有办法进行全局结帐？或者为所有模块创建一个分支？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T16:03:51.880

只需转到设置| 版本控制 | Git 并选择“同步控制来自不同根的分支”，对分支（VCS -> Git -> 分支）的所有操作将同时针对 3 个存储库执行。

请参阅此[博文](http://blogs.jetbrains.com/idea/2012/08/git-branches-for-multi-root-projects/)中的详细信息。

还要确保所有 3 个模块都正确注册在 Settings | 的根表中。版本控制。

# php - 在 CentOS 机器上保存带有变音符号的文件

> ID：13797340
> 
> 赞同：0
> 
> 时间：2012-12-10T08:30:53.523
> 
> 标签：php, file-upload, unicode, character-encoding, filenames

我们有一台带有 Apache 网络服务器的 CentOS 6 机器，它接受来自富 Javascript 客户端的文件上传。文件用php保存`move_uploaded_file`

客户端和服务器 (php) 文件都以 iso-8859-1 编码，服务器上的数据库也是如此。此外，html 输出将 iso-8859-1 声明为字符集。

到目前为止，文件上传工作正常，除了带有元音变音（或其他未知特殊字符）的文件会导致错误。例如，文件`1.Nachtrag Gemeinde Höchst.pdf`在应用程序中得到正确回显，并且为下载文件而生成的链接具有正确的（url-）编码：

```
http://ourdomain/saba/data/dok/00000092/1.Nachtrag%20Gemeinde%20H%C3%B6chst.pdf 
```

但是当点击这个链接时，会出现 404 错误。在 shell 中查找文件时，它显示为`1.Nachtrag Gemeinde H?chst.pdf`，这表示某种错误的编码，尽管这可能只是因为 shell 具有 utf-8 编码。

我们忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:58:12.533

正如@Amadan 正确指出的那样，在保存之前需要将文件名转换为 utf-8，即：

```
 $filename = iconv('ISO-8859-1', 'UTF-8', $filename);
 $is_successful = @move_uploaded_file($tmp_filename, $ordnername . DIRECTORY_SEPARATOR . $filename); 
```

# c++ - 将 dynamic_cast 放入循环中

> ID：13797344
> 
> 赞同：0
> 
> 时间：2012-12-10T08:31:07.220
> 
> 标签：c++, loops, casting, dynamic-cast

`dynamic_cast`放入循环是否正确？

```
//Searches for the reservation with the given reservation number, and   //deletes it. Uses the confirmReservation function if the reservation to be     //deleted was an OK one 
void cancelReservation(string resNum)
{
    for (int i=0;i<seats+waitingListMax;i++)
    {
        for (int seat=i;seat<seats;seat++)
        {
    Ok* okptr=dynamic_cast <Ok*>(reservations[seat]);
        }
        for ( int wait=seats;wait<seats+waitingListMax;wait++)
        {
    Waiting* waitingptr=dynamic_cast <Waiting*>(reservations[wait]);
        }
        if ((reservations[i]!=0) && (reservations[i]->getReservationNumber()==resNum))
            if (okptr)
            {
                //doing somting
            }
            if (waitptr)
            {
                //doing somthing else
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:33:44.633

将它放在 for 循环下没有错。
你的类应该是多态的，但这是使用`dynamic_cast`.

在您的示例中，您并没有真正实现太多，因为您在每次迭代时都覆盖了指针。但这可能是您对原始代码的简化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:34:33.160

`dynamic_cast`在循环中使用没有错。

但是您的代码确实有一个不同的问题：指针`okptr`和`waitingptr`仅作用于最内层`{}`，因此以后不能使用。

# node.js - 尝试在 Azure 上使用 imagemagick 会出现“系统找不到文件”错误

> ID：13797347
> 
> 赞同：1
> 
> 时间：2012-12-10T08:31:24.223
> 
> 标签：node.js, azure, imagemagick

我在 Azure 上运行的 nodejs 上使用[https://github.com/rsms/node-imagemagick 。](https://github.com/rsms/node-imagemagick)但是，当我尝试获取有关文件的信息时，例如

```
var im = require('imagemagick');
im.readMetadata('kittens.jpg', function(err, metadata){
  if (err) throw err;
  console.log('Shot at '+metadata.exif.dateTimeOriginal);
}) 
```

我得到错误

> “错误：命令失败：CreateProcessW：系统找不到指定的文件。”

系统似乎找不到imagemagick的路径，但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:34:05.760

我想你必须安装 ImageMagick。

我认为您是否可以做到这一点以及如何做到这一点取决于您使用的是 Windows Azure 网站、云服务还是虚拟机（在这种情况下，您使用的是什么操作系统）。

您可能首先将二进制文件复制到与您的 Node.js 代码相同的目录中，以查看它是否会在那里被拾取。

# java - Ford-Fulkerson 不规则性（多个顶点与回流）

> ID：13797348
> 
> 赞同：2
> 
> 时间：2012-12-10T08:31:43.057
> 
> 标签：java, algorithm, max-flow, ford-fulkerson

到目前为止，我一直在处理顶点之间只有一条有向边的图。对于我用来测试我的实现的所有示例，已经产生了正确的答案。但是，当我使用包含具有两个方向的边的顶点的图时，我没有得出正确的答案。我一直将这种向后运行的边缘视为这两个顶点之间的回流，因为看起来回流和向后运行的不同“管道”最终将是等效的。我的假设是错误的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:49:47.613

`U--[a]-->V`具有容量“a”和“b”的两条边`V--[b]-->U`等效于一条边的假设 `U--[a-b]-->V`是不正确的。假设 a > b，负流到 -b 在第一种情况下是合法的，但在第二种情况下是非法的。

您只能将同向边的流量相加。在下图中，将 E 到 F 和 F 到 E 的两个相反管道相加会使它们从图中消失，从而改变最优解。 ![在此处输入图像描述](../Images/6ef51eeca4ce62ff40da5b000a2d744b.png)

# android - .java 不使用 2 或 3 参数视图构造函数；XML 属性不起作用

> ID：13797349
> 
> 赞同：21
> 
> 时间：2012-12-10T08:31:43.527
> 
> 标签：android, eclipse

我是新手我在创建游戏时遇到问题

执行过程

activity_main.xml -> MainActivity.java -> GameLoop.java -> action.xml（错误） -> CustomView.java

```
Custom view CustomView is not using the 2- or 3-argument View constructors; XML attributes will not work 
```

我不明白......

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-10T08:39:26.120

您需要在 CustomView 中重写 View 的其他 2 个构造函数：

```
public CustomView(Context context) {
    super(context);
    init(context);
}

public CustomView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

public CustomView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
}

private void init(Context context) {
    //do stuff that was in your original constructor...
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-10T08:40:01.170

您还需要实现这些构造函数：

```
//Constructor that is called when inflating a view from XML.
View(Context context, AttributeSet attrs)

//Perform inflation from XML and apply a class-specific base style.
View(Context context, AttributeSet attrs, int defStyle) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-09T09:05:08.503

我认为这取决于您如何创建自定义视图以及您将如何使用它。
并非所有 3 个构造函数都是真正必要的。
如果您使用属性 xml 文件创建视图，但不使用 defstyle，则足以调用

```
public CustomView(Context context, AttributeSet attrs) {
    this(context, attrs);
    //Your code
} 
```

如果你不使用属性和 defstlye /我看到了这个的例子/你很乐意只打电话

```
public CustomView(Context context) {
    super(context);
    //Your code
} 
```

如果你也想使用 defstyle 和属性

```
public CustomView(Context context, AttributeSet attrs) {
    this(context, attrs);
    //Yourcode
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-28T09:42:25.153

如果有人使用 Kotlin，他/她可以这样做：

```
class KotlinView @JvmOverloads constructor(
        context: Context, attrs: AttributeSet? = null, defStyleAttr: Int = 0
) : View(context, attrs, defStyleAttr) 
```

您可以在此处找到此解决方案和更多详细信息：[https ://antonioleiva.com/custom-views-android-kotlin/](https://antonioleiva.com/custom-views-android-kotlin/)

# android - Android 相对布局对齐中心

> ID：13797352
> 
> 赞同：41
> 
> 时间：2012-12-10T08:32:15.397
> 
> 标签：android, android-relativelayout

我正在尝试创建一个列表活动项目布局，如下所示

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <ImageView 
        android:contentDescription="ss"
        android:id="@+id/place_category_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingRight="15dp"
        android:paddingTop="10dp" android:src="@drawable/marker"/>

    <TextView
        android:id="@+id/place_distance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="320" />

    <TextView
        android:id="@+id/place_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/place_category_icon"
        android:text="Place Name"
        android:textColor="#FFFF00"
        android:textSize="14sp"
        android:textStyle="bold" />
</RelativeLayout> 
```

我希望布局显示如下。

![在此处输入图像描述](../Images/28eb86c35bc9a7f4fd5157baeea9a4f5.png)

我想将它居中水平对齐

![在此处输入图像描述](../Images/3b8de3c787e29213d14b78043c1671c5.png)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-12-10T08:43:39.650

我希望这会奏效

已编辑

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingRight="15dp" >

    <ImageView
        android:id="@+id/place_category_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:contentDescription="ss"
        android:paddingTop="10dp"
        android:src="@drawable/ic_launcher" />

    <TextView
        android:id="@+id/place_distance"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:text="320" />

    <TextView
        android:id="@+id/place_title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="15dp"
        android:layout_toRightOf="@+id/place_category_icon"
        android:text="Place Name"
        android:textColor="#FFFF00"
        android:textSize="14sp"
        android:textStyle="bold" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-10T08:38:03.450

如果要使其居中**`android:layout_centerVertical="true"`**，请在 TextView 中使用。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-01T10:39:12.743

这肯定会为你工作。

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/top_bg" >

    <Button
        android:id="@+id/btn_report_lbAlert"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="@dimen/btn_back_margin_left"
        android:background="@drawable/btn_edit" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_centerVertical="true"
        android:text="FlitsLimburg"
        android:textColor="@color/white"
        android:textSize="@dimen/tv_header_text"
        android:textStyle="bold" />

    <Button
        android:id="@+id/btn_refresh_lbAlert"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="@dimen/btn_back_margin_right"
        android:background="@drawable/btn_refresh" />
</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-03-22T06:56:21.823

您可以使用重力对齐顶部和底部。

```
 android:gravity="center_vertical"
 android:layout_alignTop="@id/place_category_icon"
 android:layout_alignBottom="@id/place_category_icon" 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-11-07T12:34:57.370

在您的 RelativeLayout 中使用它

`android:gravity="center_vertical"`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-10T08:44:52.613

这是你需要的吗？

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="10dp" >

        <ImageView
            android:id="@+id/place_category_icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:contentDescription="ss"
            android:paddingRight="15dp"
            android:paddingTop="10dp"
            android:src="@drawable/marker" />

        <TextView
            android:id="@+id/place_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="Place Name"
            android:textColor="#F00F00"
            android:layout_gravity="center_vertical"
            android:textSize="14sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/place_distance"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0"
            android:layout_gravity="center_vertical"
            android:text="320" />
    </TableRow>

</RelativeLayout> 
```

# c# - 我正确使用 IEnumerable 吗？

> ID：13797353
> 
> 赞同：0
> 
> 时间：2012-12-10T08:32:17.577
> 
> 标签：c#

我对以下代码感到头疼。看起来很简单，但我不明白为什么会出错。

这个想法很简单，我只是循环将 DataGirdView 的引用添加到 ViewModel 的属性中。就这样。

但是在我修改了 ViewModel 中的值之后，`IEnumerable<ICompanyViewModel> vms`就不会像没有发生一样反映它。我做错了什么？请帮忙。

```
 public void UpdateCompany(IEnumerable<ICompanyViewModel> vms) {
        CompanyBindingSource.DataSource = new BindingListView<CompanyViewModel>(vms.ToList());
        var lst = new List<DataGridViewRow>();
        foreach (DataGridViewRow dgvr in DataGridView1.Rows) lst.Add(dgvr);
        foreach (var vm1 in vms) { 
            foreach (var dgvr in lst) {
                var ov = (ObjectView<CompanyViewModel>)dgvr.DataBoundItem;
                var vm2 = (ExhibitorViewModel)ov.Object;
                if (vm1.ID == vm2.ID) {
                    vm1.DataGridViewRow = dgvr;
                    break;
                }
            }                
            if (vm1.DataGridViewRow != null) lst.Remove(vm1.DataGridViewRow); 

        } // I can see DataGridViewRows being matched with vm1.
    }     // Then, I expand IEnumerable 'vms' and check the value again. All
          // the ViewModels lost their references to the matching DataGridViewRows.
          // In every ViewModel.DataGridViewRow = null; WHY IS THIS HAPPENING?? 

//.... here is the background code of my model

public class CompanyViewModel : BaseViewModel, ICompanyViewModel {
    public DataGridViewRow DataGridViewRow { get; set; }
    public ICompany Company { get; set; }
    public long ID {
        get { return Company.ID; }
    }
    public string Name {
        get { return Company.Name; }
        set { Company.Name = value; }
    }
}    
public interface ICompanyViewModel : IViewModel {
    DataGridViewRow DataGridViewRow { get; set; }
    public ICompany Company { get; set; }
    long ID { get; }
    string Name { get; set; }
}
public interface IViewModel { }
public abstract class BaseViewModel : IViewModel { } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:25:34.463

问题的根源：IEnumerable 的多重枚举

我错误地使用了 IEnumerable。根据 Resharper 的说法，我真的应该调用 .ToList(); 我一得到 IEnumerable < ICompanyViewModel > vms 的列表。

否则，每次我调用 foreach 时......我都会再次有效地调用数据库！天哪，不要在这方面犯错是非常重要的，幸运的是我发现了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:36:20.843

好吧，如果你正在使用`IEnumerable<T>`你必须手动（明确地）说绑定机制（不管它是什么），更新！。

如果您不喜欢这个想法，请考虑改用[ObservableColelction](http://msdn.microsoft.com/en-us/library/ms668604.aspx)。在这种情况下，`.net framework`它本身会跟踪该集合中发生`Add`的`Remove`事件并更新它所绑定的绑定。

# android - android设备硬件上的增加和减少音量按钮

> ID：13797358
> 
> 赞同：-1
> 
> 时间：2012-12-10T08:32:32.900
> 
> 标签：android

> **可能重复：**
> [Android - 我的应用程序中使用的音量按钮](https://stackoverflow.com/questions/2874743/android-volume-buttons-used-in-my-application)

如何知道用户何时按下 android 设备硬件上的减小和增大音量按钮。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:44:35.027

卢克的好答案，请参阅[https://stackoverflow.com/a/674207/603233](https://stackoverflow.com/a/674207/603233)

不要自己处理音量键——几乎不可能保证你不会破坏音量键的行为。

在你的 onCreate() 中调用这个 API：

setVolumeControlStream(AudioManager.STREAM_MUSIC);

这告诉 AudioManager 当你的应用程序有焦点时，音量键应该调整音乐音量。

# javascript - 歌剧中过期的cookies

> ID：13797359
> 
> 赞同：0
> 
> 时间：2012-12-10T08:32:40.133
> 
> 标签：javascript, cookies, opera

我们在 Opera 中遇到了 cookie 的有趣行为：我们应该将`expires`选项设置为超过一秒才能删除 cookie。如果我们这样做：

```
var date = new Date();

date.setTime( date.getTime() - 100 );
cookie('c', 'value', { expires: date });
expect(cookie('c')).toBeNull(); 
```

测试将失败。但是如果我们设置 1000 而不是 100 它将通过。但在其他浏览器中一切正常。我们使用`toUTCString()`过期方法。

奇怪的是：Opera 的行为与其他浏览器不同。哪种行为不正确？歌剧还是其他？

有什么想法吗？

PS 我的意思是 Safari、Chrome 和 Firefox 作为其他浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:48:00.567

当您使用 Date 对象的 toUTCString() 方法时，您将获得如下值：

```
Wed, 12 Dec 2012 12:41:08 GMT 
```

如您所见，这里引用的最小单位是一秒。*如果*脚本在一秒的前 99 毫秒内运行，则减去 100 毫秒*可能*会给您一秒前的时间。大多数情况下，您只需设置一个 cookie，该 cookie 将在*当前*秒结束时过期，而 IMO Opera 在技术上正确地将该 cookie 保留在那一秒的剩余时间（以及脚本的剩余部分）。

 **（虽然我认为这是处理有点模棱两可的脚本的正确方法，但我也认为 Opera 可能应该将其过期策略与其他浏览器保持一致以实现兼容性，而且我似乎记得 Opera 的错误跟踪器中有一个错误这样做） .**

# textbox - ToolStripTextBox1.ScrollBars = Windows.Forms.ScrollBars.Vertical

> ID：13797360
> 
> 赞同：2
> 
> 时间：2012-12-10T08:32:45.083
> 
> 标签：textbox, scrollbars, toolstrip, toolstripdropdown, toolstripitem

快速提问。

> 在win7 x64上使用VS2012、.net framework 4.5、VB。

尝试在我的状态栏中创建一个消息持有者，以在我的应用程序出现问题时显示较长的异常消息。我有一个使用 ToolStripSplitButton 并向其项目添加文本框的想法。因此，当发生异常时，ToolStripSplitButton 图标会更改以指示失败，如果用户想知道原因，他单击 ToolStripSplitButton 会弹出文本框。

当我的表单第一次加载时，我更改了这个文本框的属性。我使它更宽更长和多线。

```
ToolStripTextBox1.Multiline = True
ToolStripTextBox1.Width = 600
ToolStripTextBox1.Height = 300
ToolStripTextBox1.WordWrap = False 
```

唯一的问题是这种类型的文本框不接受滚动条。

```
ToolStripTextBox1.ScrollBars = Windows.Forms.ScrollBars.Vertical 
```

好像微软已经禁用了它的功能？

关于让这个框以某种方式滚动有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T02:12:59.237

您可以尝试将您自己的 ToolStripTextBox 版本实现为自定义用户控件并将[其添加到 ToolStrip](https://stackoverflow.com/questions/5549895/toolstriptextbox-customisation)。用户控件上的文本框将是允许垂直滚动条的常规文本框。

# vba - vba 脚本挂在 Workbook.Close

> ID：13797367
> 
> 赞同：6
> 
> 时间：2012-12-10T08:33:06.927
> 
> 标签：vba, excel

我正在尝试在 Visual Basic for Applications 中编写一个 hello world 应用程序，即修改 Excel 工作表中的单元格。这里是：

```
Sub hello()

    Dim obj As Object
    Dim Workbook As Object

    Set obj = CreateObject("Excel.Application")
    Set Workbook = obj.Workbooks.Open("C:\Users\gbuday\Desktop\Oktatás\Excel\start.xlsx")

    Workbook.Worksheets("Munka1").Range("B3") = "Hello World!"

    Workbook.Close
    Set Workbook = Nothing
    Set obj = Nothing

End Sub 
```

运行时，Excel 挂起，我无法停止脚本运行，只能终止 excel 进程。调试它，它挂`Workbook.Close`在线上。那条线有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:38:24.697

问题是您没有给 Excel 足够的时间来完成它的操作。通常a`DoEvents`会解决问题。另外为避免混淆，您可能希望将变量命名为“wbk”而不是“工作簿”

```
Sub hello()
    Dim obj As Object, wbk As Object

    Set obj = CreateObject("Excel.Application")
    Set wbk = obj.Workbooks.Open("C:\Users\gbuday\Desktop\Oktatás\Excel\start.xlsx")

    wbk.Worksheets("Munka1").Range("B3") = "Hello World!"

    DoEvents

    '~~> Change True to False if you do not want to save
    wbk.Close SaveChanges:=True

    Set wbk = Nothing: Set obj = Nothing
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:43:29.827

它应该是

```
Workbooks.Close 
```

我也认为“Workbook”是一个保留字，你应该使用“wb”之类的东西。

```
Dim wb As Workbook 
```

# c++ - 在 Visual Studio 2012 中使用嵌套的 std::async 和 std::condition_variable

> ID：13797368
> 
> 赞同：2
> 
> 时间：2012-12-10T08:33:06.397
> 
> 标签：c++, c++11, visual-studio-2012, condition-variable, stdasync

我已经有了`Worker`类和一个`Handler`类来为工作创建一个抽象层。我想用`std::async`一些异步来混合，但我的 Visual Studio 2012（更新 1）出现了一些奇怪的行为。

我的类层次结构如下：

*   `Worker`是一个具有纯虚方法的抽象类`Init`。`Work`
*   `BasicWorker : Worker`只是`printf`用于一些输出。
*   `GroupWorker : Worker`是其他工作人员的聚合。
*   `Handler`坚持`Worker`做一些工作。

然后我调用几个`std::async`方法，在其中创建工作程序和处理程序，在嵌套`std::async`调用中调用处理程序，等待工作程序的初始化（`std::condition_variable`此处），然后停止处理程序。

最后，我等待所有的`std::future`s 完成。

代码如下：

```
#include <stdio.h>
#include <future>
#include <array>
#include <atomic>
#include <vector>

struct Worker
{
    virtual ~Worker() { }
    virtual void Init() = 0;
    virtual void Work() = 0;
};

struct BasicWorker : public Worker
{
    virtual ~BasicWorker() { }
    virtual void Init()
    {
        printf("\t\t\t\tInit: %d\n", std::this_thread::get_id());
    }

    virtual void Work()
    {
        printf("\t\t\t\tWork: %d\n", std::this_thread::get_id());
    }
};

struct GroupWorker : public Worker
{
    GroupWorker()
    {
        workers.push_back(std::make_shared<BasicWorker>());
    }

    virtual ~GroupWorker() { }

    virtual void Init()
    {
        for(int i = 0; i < workers.size(); ++i)
        {
            workers[i]->Init();
        }
        initEvent.notify_all();
    }

    virtual void Work()
    {
        for(int i = 0; i < workers.size(); ++i)
        {
            workers[i]->Work();
        }
    }

    void WaitForInit()
    {
        //std::unique_lock<std::mutex> initLock(initMutex);
        //initEvent.wait(initLock);
    }
private:
    std::mutex initMutex;
    std::condition_variable initEvent;
    std::vector<std::shared_ptr<Worker>> workers;
};

struct Handler
{
    static const int Stopped = -1;
    static const int Ready = 0;
    static const int Running = 1;

    Handler(const std::shared_ptr<Worker>& worker) :
        worker(worker)
    { }

    void Start(int count)
    {
        int readyValue = Ready;
        if(working.compare_exchange_strong(readyValue, Running))
        {
            worker->Init();

            for(int i = 0; i < count && working == Running; ++i)
            {
                worker->Work();
            }
        }
    }

    void Stop()
    {
        working = Stopped;
    }
private:
    std::atomic<int> working;
    std::shared_ptr<Worker> worker;
};

std::future<void> Start(int jobIndex, int runCount)
{
    //printf("Start: %d\n", jobIndex);
    return std::async(std::launch::async, [=]()
    {
        printf("Async: %d\n", jobIndex);
        auto worker = std::make_shared<GroupWorker>();
        auto handler = std::make_shared<Handler>(worker);

        auto result = std::async(std::launch:async, [=]()
        {
            printf("Nested async: %d\n", jobIndex);
            handler->Start(runCount);
        });

        worker->WaitForInit();
        handler->Stop();

        result.get();
    });
}

int main()
{
    const int JobCount = 300;
    const int RunCount =  5;
    std::array<std::future<void>, JobCount> jobs;

    for(int i = 0; i < JobCount; ++i)
    {
        jobs[i] = Start(i, RunCount);
    }

    for(int i = 0; i < JobCount; ++i)
    {
        jobs[i].get();
    }
} 
```

我的问题是：

*   如果我取消注释函数中的行，`WaitForInit@GroupWorker`那么在进行所有第一级异步函数调用之前，不会进行嵌套的异步函数调用
*   在等待`std::condition_variable`我增加作业数量时，新线程的创建感觉就像成倍地变慢。对于我的试验，低于 100 个工作存在一些异步，但超过 300 个则完全按顺序创建工作。
*   然后，如果我取消注释方法中的`printf`行`Start`，所有嵌套的异步都会像魅力一样工作

所以，

*   我在使用中做错了`std::condition_variable`什么？
*   为什么为 100 多个线程创建作业会变慢？（这个问题是可选的，似乎是操作系统的问题，可以用智能线程池概念来解决）
*   这`printf`和这些有什么关系？（我尝试`printf`在竞争条件下删除所有调用，我在代码中放置了一个断点但没有帮助。情况`std::cout`也是如此）

编辑：我添加了启动策略（由 Jonathan Wakely 建议）以确保创建线程。但这也无济于事。我目前正在创建一个`std::thread`并调用`thread::join`函数以在第一级异步中等待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:45:17.147

NB 可以调用`printf`，但不能假设`std::thread::id`可以转换为`int`. 您可以像这样使它更便携：

```
inline long tol(std::thread::id id)
{
  std::ostringstream ss;
  ss << id;
  return stol(ss.str());
} 
```

（这仍然假设 的字符串值`std::thread::id`可以转换为`long`，这不是必需的，但比假设隐式转换为 更有可能`int`）

> 我在使用 std::condition_variable 时做错了什么？

您没有正在等待的“条件”，也没有同步来确保在`notify_all`调用`wait`. 你应该有一个成员变量，上面写着“这个工人已经被初始化”，它是由 设置的`Init`，并且只有在条件变量不为真时才等待条件变量（该标志应该是原子的或由互斥锁保护，以防止数据竞争） .

> 为什么为 100 多个线程创建作业会变慢？（这个问题是可选的，似乎是操作系统的问题，可以用智能线程池概念来解决）

因为有数百个线程有很多共享资源的争用和 OS 调度程序的很大压力，所以实现可能决定开始返回延迟函数（即好像`std::async`被调用`std::launch::deferred`）而不是异步函数。您的代码假定`async`不会返回延迟函数，因为如果异步工作者及其嵌套的异步工作者都作为延迟函数运行，则程序可能会死锁，因为外部函数会阻塞等待嵌套的调用`Init`，但嵌套函数永远不会运行，直到出一通电话`result.get()`。您的程序不可移植，只能在 Windows 上运行，因为（如果我理解正确的话）MSVC`async`使用工作窃取线程池，如果线程可用，它将运行延迟函数。**这不是标准要求的。** 如果您想强制每个工作人员拥有一个新线程，请使用该`std::launch::async`策略。

> printf 与这些有什么关系？（我尝试在竞争条件下删除所有 printf 调用，我在代码中放置了一个断点但没有帮助。std::cout 也是如此）

它会带来轻微的延迟，并且可能会在线程之间产生某种形式的不可靠排序，因为它们现在正在竞争并且可能在竞争单个全局资源。施加的延迟`printf`可能足以让一个线程完成，这会将其资源释放到线程池并允许另一个异步工作者运行。

# java - Eclipse 自动显示相同的类名

> ID：13797375
> 
> 赞同：1
> 
> 时间：2012-12-10T08:33:43.863
> 
> 标签：java, eclipse

我使用 Eclipse 作为 IDE。但是，当我在 java 中创建一个类时，会自动创建另一个具有相同名称和相同数据的类。但是，如果我删除任何一个类，另一个类也会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:44:38.163

如果您右键单击`src`源文件夹并添加一个类，它应该只创建一个类。其他文件夹中的东西暂时不用你担心。

另外，请阅读网站指南和常见问题解答。这与标准论坛不同。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:46:32.607

您正在创建一个`.java`文件。这将被编译为`.class`具有相同名称的文件。默认情况下，这些已编译的类位于一个名为的目录中，该目录`bin`在 eclipse 中未显示。但是您可以在文件系统中看到这一点。您需要这些`.class`文件来运行您的应用程序，因此您不应该删除它们。

# java - 错误 500：运行 EJB 示例项目时出现 java.lang.NullPointerException

> ID：13797377
> 
> 赞同：0
> 
> 时间：2012-12-10T08:33:56.377
> 
> 标签：java, jsp, nullpointerexception, ejb, ejb-3.0

我是 EJB 新手，因此我正在执行教程[Java EE 6 教程中的示例 EJB 项目](http://docs.oracle.com/javaee/5/tutorial/doc/bnbnc.html)

这是豆子的样子：

**转换器.java**

```
package converter.ejb;

import java.math.BigDecimal;
import javax.ejb.Remote;

@Remote
public interface Converter {
    public BigDecimal dollarToYen(BigDecimal dollars);
    public BigDecimal yenToEuro(BigDecimal yen);
} 
```

**转换器Bean.java**

```
package converter.ejb;

import java.math.BigDecimal;
import javax.ejb.LocalBean;
import javax.ejb.Stateless;

@Stateless
public class ConverterBean {

    private BigDecimal yenRate = new BigDecimal("115.3100");
    private BigDecimal euroRate = new BigDecimal("0.0071");

    public BigDecimal dollarToYen(BigDecimal dollars) {
        BigDecimal result = dollars.multiply(yenRate);
        return result.setScale(2, BigDecimal.ROUND_UP);
    }

    public BigDecimal yenToEuro(BigDecimal yen) {
        BigDecimal result = yen.multiply(euroRate);
        return result.setScale(2, BigDecimal.ROUND_UP);
    }
} 
```

**转换器客户端.java**

```
package converter.ejb;

import java.math.BigDecimal;
import javax.ejb.EJB;

public class ConverterClient {

    @EJB
    private static Converter converter;

    public ConverterClient(String[] args) {
    }

    public static void main(String[] args) {
        ConverterClient client = new ConverterClient(args);
        client.doConversion();
    }

    public void doConversion() {
        try {
            BigDecimal param = new BigDecimal("100.00");
            BigDecimal yenAmount = converter.dollarToYen(param);

            System.out.println("$" + param + " is " + yenAmount
                    + " Yen.");
            BigDecimal euroAmount = converter.yenToEuro(yenAmount);
            System.out.println(yenAmount + " Yen is " + euroAmount
                    + " Euro.");

            System.exit(0);
        } catch (Exception ex) {
            System.err.println("Caught an unexpected exception!");
            ex.printStackTrace();
        }
    }
} 
```

我有一个 Web 客户端，它是一个 JSP 页面：**converterweb.jsp**

```
<%@ page import="converter.ejb.Converter,
            java.math.*, javax.naming.*"%>    
 <%!
    private Converter converter = null;
    public void jspInit() {
        try {
            InitialContext ic = new InitialContext();
            converter = (Converter)
                    ic.lookup(Converter.class.getName());
        } catch (Exception ex) {
            System.out.println("Couldn’t create converter bean."+
                    ex.getMessage());
        }
    }
        public void jspDestroy() {
        converter = null;
    }
%>
<html>
    <head>
        <title>Converter</title>
    </head>

    <body bgcolor="white">
        <h1>Converter</h1>
        <hr>
        <p>Enter an amount to convert:</p>
        <form method="get">
            <input type="text" name="amount" size="25">
            <br>
            <p>
            <input type="submit" value="Submit">
            <input type="reset" value="Reset">
        </form>

        <%
            String amount = request.getParameter("amount");
            if ( amount != null && amount.length() > 0 ) {
                BigDecimal d = new BigDecimal(amount);

                BigDecimal yenAmount = converter.dollarToYen(d);
        %>
        <p>
        <%= amount %> dollars are  <%= yenAmount %>  Yen.
        <p>
        <%
                BigDecimal euroAmount =
                        converter.yenToEuro(yenAmount);
        %>
        <%= amount %> Yen are <%= euroAmount %>  Euro.
        <%
            }
        %>
    </body>
</html> 
```

但是每当我尝试执行这个项目时，我都会得到一个 NullPointerException。我使用 Websphere 应用程序服务器。有人可以解释一下为什么会发生这种情况以及我该如何纠正它？

**编辑：**错误日志

```
[12/10/12 14:21:26:956 IST] 0000001f webapp        E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[/converterweb.jsp]: java.lang.NullPointerException
    at com.ibm._jsp._converterweb._jspService(_converterweb.java:118)
    at com.ibm.ws.jsp.runtime.HttpJspBase.service(HttpJspBase.java:99)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:668)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1188)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:763)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:454)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
    at com.ibm.wsspi.webcontainer.servlet.GenericServletWrapper.handleRequest(GenericServletWrapper.java:122)
    at com.ibm.ws.jsp.webcontainerext.AbstractJSPExtensionServletWrapper.handleRequest(AbstractJSPExtensionServletWrapper.java:205)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1020)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:895)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1662)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1659) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:24:59.627

您的代码充满了错误：

*   EJB 依赖注入适用于由容器管理的组件。您的 ConverterClient 上没有注释（我假设您没有在 xml 描述符中进行任何额外的 EJB 配置）。所以容器不知道它，不能进行注入。
*   您的转换器被声明为静态的。这行不通。
*   您正在尝试通过远程接口访问声明为 @LocalBean 的 bean（这意味着它公开无接口视图）。这也行不通。尝试直接使用 ConverterBean 或避免使用 @LocalBean 并改用 @Remote(Converter.class) 。

也许我错过了什么。希望这个对你有帮助。

# c++ - 二叉树插入函数

> ID：13797378
> 
> 赞同：0
> 
> 时间：2012-12-10T08:34:00.773
> 
> 标签：c++, binary-search-tree

这不起作用，这对你们来说是正确的吗？我认为逻辑是正确的，但我可能完全错了

有人有想法么？

这只是插入功能，它只适用于整数

```
void BST::Insert(int valueToInsert) {

    if (root == NULL) {
        root = new Node();
        root->val = valueToInsert;
        root->parent = NULL;
        root->left = NULL;
        root->right = NULL;

    } else {
        Node* tmp = new Node();
        tmp->val=valueToInsert;
        Node* trav = root;
        tmp->left=NULL;
        tmp->right=NULL;

        while (true) {   
            if((trav->val)>(trav->val)) {
                if (trav->right == NULL) {
                    trav->right = tmp;
                    tmp->parent = trav;
                    tmp->right = NULL;
                    tmp->left = NULL;                  
                    break;
                } else {
                    trav = trav->right;
                    continue;
            }
        }

        if ((tmp->val)<(trav->val)) {
            if (trav->left == NULL) {
                trav->left = tmp;        
                tmp->parent = trav;
                break;
            }else {
                trav = trav->left;
                continue;
            }
        }
    }        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:37:48.990

以下看起来很可疑：

```
 if((trav->val)>(trav->val)) {
               ^^^^        ^^^^ 
```

第一个`trav`是故意的`tmp`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:39:50.210

```
while (true) {

                if((trav->val)>(trav->val)) { 
```

正下方的 while 条件 trav->val 正在与 trav->val 进行比较。这不是本意，我猜。

# .net - 使用可移植类库而不是使用“添加为链接”有什么好处？

> ID：13797385
> 
> 赞同：12
> 
> 时间：2012-12-10T08:34:35.470
> 
> 标签：.net, portable-class-library, code-sharing

有人向我解释使用可移植类库而不是使用“添加为链接”有什么好处吗？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-10T20:27:43.007

链接文件的缺点：

*   添加为链接可能很难维护，尤其是当您扩展到多个项目和许多源文件时。工具（例如 Visual Studio 2010 的项目链接器，或在 Visual Studio 2012 中拖动时按住 ALT）可以使这更容易。
*   重构工具不适用于链接文件。例如，如果您重命名链接文件中的类或方法，重构工具不会更新对该 API 的其他链接副本的引用。
*   在链接文件中编辑代码时，智能感知可能会向您显示并非在文件链接到的所有平台上都可用的 API。
*   当您尝试打开已由另一个项目打开的链接文件时，Visual Studio 会给您一个消息框，显示“此文档已由另一个项目打开”。
*   您最终会为每个平台创建一个单独的 DLL。如果您正在创建一个希望与他人共享的可重用库，那么如果它只有一个版本，而不是每个平台都有一个单独的版本，那么分发可能会更容易。

可移植类库的缺点：

*   您仅限于在您定位的所有平台上可用的 API。您不能使用条件编译（`#if`语句）来解决平台之间的差异
*   很难弄清楚给定的平台组合支持哪些 API。这是一个可以帮助解决此问题的电子表格：[Portable Class Library API List](http://sdrv.ms/OVdfNc)

有关如何利用可移植类库的一些指导，请参阅以下内容：

*   [如何使便携式类库为您工作](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)
*   [使用可移植类库创建跨平台应用程序（BUILD 会话）](http://channel9.msdn.com/Events/Build/2012/3-004)

虽然我偏爱 Portable Class Libraries（作为 PCL 团队的成员），但链接文件也是一种完全有效的代码共享方式，如果您不遇到或不介意这些缺点，那么请继续使用链接的源文件。我主要使用可移植类库，但当 PCL 不适合时，我仍然使用链接源文件。

# php - 如何从 PHP 中的 Linkedin 公司 URL 获取公司 ID？

> ID：13797388
> 
> 赞同：6
> 
> 时间：2012-12-10T08:34:48.753
> 
> 标签：php, dom, linkedin

我的Linkedin公司网址如下，

```
http://in.linkedin.com/company/abb 
```

ABB 有限公司的公司 ID 是`277579`。本质上，您也可以通过`http://www.linkedin.com/company/277579`.

但如果我只有`http://in.linkedin.com/company/abb`. 是否可以通过此 URL 获取公司 ID？解析 URL 有帮助吗？寻求任何获得公司ID的好方法。

不使用 Linkedin API 还有其他方法吗？

希望我对我的问题很清楚。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-13T00:46:47.130

在自动完成字段中输入您的公司名称。等到结果显示您的公司名称。然后点击您的公司名称。点击获取代码。

```
<script src="//platform.linkedin.com/in.js" type="text/javascript"> lang: en_US</script>
<script type="IN/FollowCompany" data-id="162479" data-counter="top"></script> 
```

例如`data-id="162479"`是 Apple 公司页面的 ID

[https://developer.linkedin.com/plugins/follow-company](https://developer.linkedin.com/plugins/follow-company)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-26T20:53:42.177

我不知道用 PHP 获得这个的方法，所以以编程方式发现公司的 id 可能不是这种方式的选择。

但是，如果您在自己和 LinkedIn.com 之间设置了 MITM，则可以发现您的浏览器和 LinkedIn 之间的所有网络活动。一个快速的方法是使用[https://www.owasp.org/index.php/ZAP](https://www.owasp.org/index.php/ZAP)或[http://mitmproxy.org/](http://mitmproxy.org/)。

LinkedIn 通过双击将您访问的任何公司页面的公司 ID 发送给他们的广告合作伙伴。我发现的一个示例请求是：

> [https://ad.doubleclick.net/adi/linkedin.dart/biz-overview;optout=false;lang=en;tile=2;sz=300x250;s=0;v=6;u=jDh5sSdmpllmbkt1lndQdCt7;mod= 950;title=ic;func=cre;func=edu;coid=744212;coid=2408664;ind=69;ind=80;csize=c;csize=d;occ=290;occ=294;occ=382; pocc=82;pocc=41;pocc=10;zip=20009;cntry=us;reg=97;sub=0;con=j;edu=19947;gy=2011;deg=400;dgcls=200;gdr= m;age=23;seg=773;seg=805;seg=546;seg=1039;seg=683;seg=535;seg=682;seg=1048;seg=748;seg=543;seg=9001; grp=122208;grp=49362;grp=3981403;grp=40456;grp=2229435;sjt=627;sjt=517;sjt=75;fos=100173;fos=100189;company=1273631;tile_p=2;adsuite= v2.2.5 分钟；sfadapter=t；ord=4824126317418](https://ad.doubleclick.net/adi/linkedin.dart/biz-overview;optout=false;lang=en;tile=2;sz=300x250;s=0;v=6;u=jDh5sSdmpllmbkt1lndQdCt7;mod=950;title=ic;func=cre;func=edu;coid=744212;coid=2408664;ind=69;ind=80;csize=c;csize=d;occ=290;occ=294;occ=382;pocc=82;pocc=41;pocc=10;zip=20009;cntry=us;reg=97;sub=0;con=j;edu=19947;gy=2011;deg=400;dgcls=200;gdr=m;age=23;seg=773;seg=805;seg=546;seg=1039;seg=683;seg=535;seg=682;seg=1048;seg=748;seg=543;seg=9001;grp=122208;grp=49362;grp=3981403;grp=40456;grp=2229435;sjt=627;sjt=517;sjt=75;fos=100173;fos=100189;company=1273631;tile_p=2;adsuite=v2.2.5-min;sfadapter=t;ord=4824126317418)

在请求参数中，找到“公司”参数，它的值应该是您需要的数字公司 ID：

> 公司=1273631

要验证它是正确的公司 ID，请将其粘贴到 LinkedIn 公司页面的末尾：

> [https://www.linkedin.com/company/1273631](https://www.linkedin.com/company/1273631)

瞧，它有效！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-27T16:50:38.290

一种简单的方法是在公司页面上执行 file_get_contents 以获取 html 源代码并查找“company%3D”并获取该数字与下一个“%”之间的数字

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-27T16:54:10.287

您可以下载网站的内容并找到

`encodeURIComponent('company=12345')`

这似乎是有效的公司 ID。只需解析它以获取 ID。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-09T12:01:54.710

为什么不将鼠标悬停在公司/展示页面的“关注”/“取消关注”上，这会在 url 中显示 id？

还是我错过了什么？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-29T14:30:40.650

```
<html>
<head>
    <script type="text/javascript" src="http://platform.linkedin.com/in.js">
      api_key: [API KEY]
    </script>       
    <script type="text/javascript">     
        function onGetSuccess(data) {
            console.log(data);              
            for(var i in data.values){
                document.getElementById("company").innerHTML = data.values[i].name + " / " + data.values[i].id;
            }               
        }
        function onError(error) {
            console.log(error);
        }           
        function GetCompanyLinkedIn() {
            var url = "/companies/?/updates/format=json&is-company-admin=true";
            IN.API.Raw(url)     
            .method("GET")
            .result(onGetSuccess)
            .error(onError);            
        }           
    </script>
</head>
<body id="body">
    <div >          
        <script type="IN/Login">
            Hello, <?js= firstName ?> <?js= lastName ?>
            <p id="company" >
                <button type="button" onclick="GetCompanyLinkedIn()">Get company id('s)</button>
            </p>                    
        </script>                   
    </div>      
</body> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-30T20:11:40.653

确认 Andrew 的解决方案有效。在页面源中，有多个带有 company%3... 数据属性和公司 ID 的脚本；由于 URL 是自定义的，因此我的不可见。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-04-04T20:09:45.830

尝试 .htaccess 文件并键入以下行

```
rewriterule ^http://in.linkedin.com/company/abb http://www.linkedin.com/company/277579 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-11-02T23:02:54.020

将鼠标悬停在公司页面上的关注按钮上。[https://www.linkedin.com/company/follow/submit?id=6667854&fl=stop&ft=0_Y3kiyf](https://www.linkedin.com/company/follow/submit?id=6667854&fl=stop&ft=0_Y3kiyf)

编号“6667854”

当我从另一个实施它的站点跟踪我的公司页面时，它就起作用了。

# post - _utf8 gmail 登录的 POST 参数包含雪人字符

> ID：13797389
> 
> 赞同：47
> 
> 时间：2012-12-10T08:34:55.243
> 
> 标签：post, login, utf-8, gmail

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-10T08:43:06.607

The _utf8 header along with a [Unicode](http://en.wikipedia.org/wiki/Unicode) character is to ensure that

1.  At least one Unicode character is submitted to the server
2.  Force certain non-compliant browsers to respect the form's character encoding

In some cases, the `_utf8` header is given a value of a ☃ and sometimes it is a ✓. What it is doesn't really matter and may have arbitrarily been chosen for fun.

# c# - C# 中实例成员的受保护访问？

> ID：13797390
> 
> 赞同：3
> 
> 时间：2012-12-10T08:35:02.277
> 
> 标签：c#, .net, protected

> **可能重复：**
> [为什么我不能访问受 C# 保护的成员，除非这样？](https://stackoverflow.com/questions/567705/why-cant-i-access-c-sharp-protected-members-except-like-this)

*当我在阅读 ac# book 时（特殊的注释版本，它显示了 c# 的所有棘手部分）*

我看到了这段代码：

```
public class A
{
    protected int x;
    static void F(A a, B b)
    {
        a.x = 1; // Okay
        b.x = 1; // Okay
    }
}
public class B: A
{
    static void F(A a, B b)
    {
        a.x = 1; // Error: must access through instance of B
        b.x = 1; // Okay
    }
} 
```

看`protected`意思：

> 访问仅限于此类或从此类派生的类

**问题**

*   为什么存在此限制（通过*实例*）？

*   **您**能否提供一个有问题的情况的示例，就好像它被允许一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:17:09.743

您引用的受保护含义不是技术定义，而仅仅是规范引用的直观含义（第 3.5.1 节）：

> protected 的直观含义是“仅限于包含类或从包含类派生的类型的访问”。

在同一部分的更下方，它给出了更严格的定义（这里 M 是类型 T 的成员）：

> 否则，如果 M 受保护，则如果访问发生在声明 M 的类中，或者如果访问发生在从声明 M 的类派生的类中并通过派生类类型发生（第 3.5 节），则允许访问.3)。

引用的部分（3.5.3）专门关于受保护的成员访问，并包含您的示例和注释：

> 此限制阻止一个派生类访问其他派生类的受保护成员，即使这些成员是从同一基类继承的。

这样答案就很清楚了。它旨在防止第三类做这样的事情：

```
public class C : A
{
  public static void F(A a, B b, C c)
  {
     a.x = 1; // not allowed
     b.x = 1; // not allowed
     c.x = 1; // allowed
  }
} 
```

根据您`protected`对前两个分配的定义，将被允许。这将是相当奇怪的。假设我有我的库并且我定义了`A`，`B`但是我让你继承`A` 并且你写了`C`. 作为库作者，我会有点担心有人可以修改我编写的类实例中的内部细节！当然，您可以通过属性或方法公开对字段`x`的修改，`C`但这种行为仅限于您的类的实例`C`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:48:20.107

这是您第二个问题的好答案

> 此限制阻止一个派生类访问其他派生类的受保护成员，即使这些成员是从同一基类继承的。

这是现有问题的链接

[有没有办法从派生类型中访问另一个对象的“受保护”成员？](https://stackoverflow.com/questions/344503/is-there-a-way-to-reach-a-protected-member-of-another-object-from-a-derived-ty)

# multithreading - 线程 AX 2012

> ID：13797392
> 
> 赞同：2
> 
> 时间：2012-12-10T08:35:20.813
> 
> 标签：multithreading, serial-port, axapta, x++, dynamics-ax-2012

我在使用 AX 2012 时遇到问题，我的意思是我必须在 Dynamics 中连接 RS-232 秤。

我有工作离散模式（打开端口，获取当前权重，关闭端口），所以 COM 端口配置很好。

我的问题是在实现连续模式时（从端口连续读取，并执行逻辑来加权多个项目，而无需用户单击任何内容），而我正在读取端口，UI 被冻结，甚至无法单击按钮停止该过程。

我的问题是：这可以通过另一个不阻塞主（UI）线程的线程来完成吗？

我正在阅读文档，但找不到任何明确的内容。恕我直言，我认为只在一个线程中完成所有操作不会成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:31:33.530

AX 不是多线程的，所以显而易见的答案是：不。

然而，AX 确实支持从事件循环（以一种形式）调用的“轮询”调用。使用适用于所有对象的[setTimeOut](http://msdn.microsoft.com/en-us/library/object.settimeout.aspx)方法。

有关工作示例，请参阅[此问题。](https://stackoverflow.com/questions/11359271/settimeout-and-local-function)

如果您可以进行非阻塞调用以测试是否有任何数据，这可能对您有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T10:44:41.930

可以在 Ax 中创建单独的线程，但是很少这样做并且不建议这样做。谷歌“Axe 2012 Thread MSDN”获取信息。

在我看来，您最好在 C# 中创建一个服务来处理通过 COM 端口进行通信的具体细节，并在必要时使用 Business Connector 读取/写入记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:10:06.580

实现这种连续处理的推荐方法是创建一个定期运行的批处理作业。您可以从单个批处理作业执行中运行多个处理任务，并且您可以从单个作业执行中以编程方式创建此任务，以便您可以通过这种方式模拟多线程并具有良好的性能：

一个例子：

[http://community.dynamics.com/ax/b/axilicious/archive/2012/02/24/business-operation-framework-and-multi-threading.aspx](http://community.dynamics.com/ax/b/axilicious/archive/2012/02/24/business-operation-framework-and-multi-threading.aspx)

# iphone - 只有一个 UISwitch 应该能够在 UITableviewCell 中切换

> ID：13797394
> 
> 赞同：1
> 
> 时间：2012-12-10T08:35:32.033
> 
> 标签：iphone, objective-c, xcode, uitableview, uiswitch

我有一个表格视图，其中每个单元格都有一个`UISwitch`，当我选择一个单元格时，我将能够切换`UISwitch`，当我在表格视图中选择下一个单元格时，我不应该能够切换它，或者即使我想切换它之前选择应该用 , 关闭切换`UIAlertView`，所以基本上`UITableViewCell`应该只允许切换一个。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *cellIdentifier=@"cellIdentifier";
        PPtableCell *cell=(PPtableCell*)[tableView dequeueReusableCellWithIdentifier:cellIdentifier];

        if (cell==nil)
        {
            cell=[[PPtableCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
        }

        cell.remedyImage.image=[[remedyArray objectAtIndex:indexPath.row]objectForKey:@"RemedyImageDic"];
        cell.remedyTextLabel.text=[[remedyArray objectAtIndex:indexPath.row]objectForKey:@"RemedyTxtDic"];
        cell.remedyLabel.text=[[remedyArray objectAtIndex:indexPath.row]objectForKey:@"RemedyName"];
        cell.remedyID=[[[remedyArray objectAtIndex:indexPath.row]objectForKey:@"RemedyID"]intValue];
        cell.frequency = [[[remedyArray objectAtIndex:indexPath.row]objectForKey:@"RemedyFrequency"]intValue];
        cell.symptomIDNo =[[[remedyArray objectAtIndex:indexPath.row]objectForKey:@"SymptomID"]intValue];

        // cell.textLabel.text = [[notify objectAtIndex:indexPath.row] objectForKey:@"notifyData"];

        //  Specific Background Image Depending upon the Row

        if (indexPath.row==0)
        {
            cell.backgroundCellImage.image=[UIImage imageNamed:@"top-cell.png"];
        }
        else if (indexPath.row==remedyArray.count-1)
        {
            cell.backgroundCellImage.image=[UIImage imageNamed:@"bottom-cell.png"];
        }
        else
        {
            cell.backgroundCellImage.image=[UIImage imageNamed:@"middle-cell.png"];
        }

        if ([indexPath isEqual:remedySelectedIndexPath])
        {
            cell.isZoomedIn = YES;
        }
        else
        {
            cell.isZoomedIn = NO;
        }

        return cell;

    }

}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if(tableView==remedyTableView)
    {

        PPtableCell *cell = nil;
        cell=( PPtableCell*)[tableView cellForRowAtIndexPath:indexPath];
        cell.selectionStyle=UITableViewCellSelectionStyleNone;
        CGSize maximumLabelSize=CGSizeMake(320.0,100.0);
        CGSize expectedLabelSize=[cell.remedyTextLabel.text sizeWithFont:cell.remedyTextLabel.font constrainedToSize:maximumLabelSize
                                                           lineBreakMode:cell.remedyTextLabel.lineBreakMode];

        if (expectedLabelSize.height > 17 || expectedLabelSize.width > 260.0)
        {
            if ([indexPath isEqual:remedySelectedIndexPath])
            {
                remedySelectedIndexPath = nil;
                [remedyTableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];

            }
            else
            {
                oldSelectedIndexPath=remedySelectedIndexPath;
                remedySelectedIndexPath=indexPath;

                if (oldSelectedIndexPath==nil)
                {
                    [remedyTableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:remedySelectedIndexPath] withRowAnimation:UITableViewRowAnimationNone];

                }

                else
                {
                    [remedyTableView reloadRowsAtIndexPaths:[NSArray arrayWithObjects:oldSelectedIndexPath,remedySelectedIndexPath,nil] withRowAnimation:UITableViewRowAnimationNone];

                }
            }

        }

    }

} 
```

这是处理 UISwitches 的代码：

```
(IBAction)notification:(id)sender {
    if (sender == notifyMe) {
        if(notifyMe.isOn == YES) {
            toggle = YES; 
            NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults]; 
            [defaults setBool:notifyMe.on forKey:@"switchValueKey"]; 
            [defaults synchronize]; 
            NSLog(@"Notification is ON");
        } 
    } else { 
        toggle = NO; 
    } 
} 

if ([cellDelegate respondsToSelector:@selector(notificationReqd:)]) { 
    [cellDelegate notificationReqd:self];
} 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:02:46.440

3个步骤-

1.  设置`setUserInteractionEnabled`为`NO`所有`UISwitch`的`tableView:cellForRowAtIndexPath:`

2.  设置`setUSerIntertactionEnabled`为特定单元格`YES`的`UISwitch``tableView:didSelectRowAtIndexPath`

3.  设置`setUSerIntertactionEnabled`为特定单元格`NO`的`UISwitch``tableView:didDeselectRowAtIndexPath`

这就是你需要做的。

**编辑：**

对于 2 和 3，您必须参考您正在选择或取消选择的单元格。

为此，您必须在 2 和 3 中执行以下操作

```
UITableViewCell *cell=[yourTableView cellForRowAtIndexPath:indexPath];  
cell.notifyMe setUserInteractionEnable=YES; // set NO for step 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:10:39.630

为了获得更好的用户体验，您应该使用`notifyMe.enabled`而不是`notifyMe.userInteractionEnabled`.

首先，禁用所有开关。你可以做到这一点`cellForRowAtIndexPath:`

```
…
cell.notifyMe.enabled = NO;
… 
```

要禁用正在取消选择的单元格中的开关：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView == tableViewThatDealsWithSwitches)
    {
        PPtableCell *cell = (PPTableCell *)[tableView cellForRowAtIndexPath:indexPath];
        cell.notifyMe.enabled = NO;
    }
    return indexPath;
} 
```

并启用即将被选中的单元格中的开关：

```
- (NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView == tableViewThatDealsWithSwitches)
    {
        cell.notifyMe.enabled = YES;
        return indexPath;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:49:07.750

我对开关进行了类似的模拟。我用 UiSwitch 分配的标签制作了一个自定义视图，默认情况下禁用了用户交互。这个视图被设置为方法 cellForRowAtIndexPath 中的单元格的附件视图。

启用活动单元的交互实现

```
-(NSIndexPath *)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

根据 NSIndexpath 在 yourtableview 单元格中找到带有开关的 customview 并设置其 userinteractionenabled 属性 yo YES

# c# - C# Integer/Float 线程安全和 Interlocked.Increment/CompareExchage

> ID：13797397
> 
> 赞同：-2
> 
> 时间：2012-12-10T08:35:46.540
> 
> 标签：c#

从很多线程中[，](https://stackoverflow.com/questions/3047280/is-int-thread-safe)我发现 C# int/float 是线程安全的。但是我看到很多开发人员使用 Interlocked.Increment/CompareExchage 进行多线程应用程序。任何人都可以告诉我使用这些构造的原因。 **更新：** 我知道这些构造。我只是想问如果 int 是线程安全的，为什么我们需要这些构造？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:43:25.073

> 任何人都可以告诉我使用这些构造的原因。

这与读/写的线程安全无关。但是关于 COMPLETE 操作的线程安全。

增量是读，加1，写。联锁保证在一次“交易”中发生。与比较/交换相同。

如果您不使用某种锁定来编写它，那么您可能会在操作之间被打断。

读增量写

这三个步骤中的每一个都是原子的，但不是组合。当您回写时，其他人可能已经更改了值 - 互锁确保整个操作是原子的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:50:43.090

如前所述，您可能想在谷歌上搜索它。

但是，要回答“为什么要使用 InterlockedIncrement(&c.)？”的问题，虽然您确实可以始终执行一个简单的 int 访问并且保证不会返回任何半写的内容，但您不能保证诸如增量之类的“读取和修改”操作将达到您的预期。

InterlockedIncrement 和它的同类，都保证操作将以原子方式执行 - 所以在 InterlockedIncrement 本身的情况下，如果两个线程都在同一个 int 上调用它，那么 int 保证增加两次并返回正确的值调用线程。但是，做一个简单的 'i++;' 同时在两个线程上（对于相同的“i”）可能会导致读取的值不正确。

这是因为诸如“i++”之类的增量被分解为至少两个机器指令：“读取值”和“增加值”（或者更糟的是：“读取”、“增加局部值”、“写入”） . 如果两个线程同时执行此操作，那么它们可能都读取值 0，但增加的值最终可能为 2。

# c# - 简化简写 if bool

> ID：13797403
> 
> 赞同：0
> 
> 时间：2012-12-10T08:36:11.710
> 
> 标签：c#, .net

我刚刚声明了一个这样的变量：

```
bool b = (x is Foo) ? (x as Foo).Bar == 1 ? false; 
```

但是 resharper 告诉我，我可以简化表达式，所以我将它改写成这样：

```
bool b = (x as Foo).Bar == 1; 
```

AMD 现在 resharper 很满意，但是“异常安全”吗？例如，如果`x`不是 type ，它会返回 false`Foo`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:38:28.097

`NullReferenceException`如果 x 不是该类型，第二个将抛出 a`Foo`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T08:43:01.713

我认为 Resharper 在抱怨，因为第一个版本投了两次。这只会施放一次：

```
Foo xAsFoo = x as Foo;
bool b = (xAsFoo != null) ? xAsFoo.Bar == 1 : false; 
```

或更短：

```
Foo xAsFoo = x as Foo;
bool b = (xAsFoo != null) && xAsFoo.Bar == 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:40:09.460

不知道为什么*Resharper*会这么说，但它是错误的。

**与这种**情况一样，当`x`不是Foo 时，它会引发异常。

 **```
bool b = (x as Foo).Bar == 1; //IF X IS SOMETHING ELSE, EXCEPTION ! 
```

as 运算符允许**运行**强制转换，但如果失败，则返回`null`. 所以`x as Foo == null`, 并且访问属性 of`null`将引发异常。**

# jquery - 使用悬停 jquery 动画运动

> ID：13797407
> 
> 赞同：0
> 
> 时间：2012-12-10T08:36:38.150
> 
> 标签：jquery, html, jquery-animate

我正在尝试获取一个图像链接，以便在使用 jquery 悬停时上下摆动......但到目前为止没有任何效果。继承人的代码：

```
$("#footer").find("a").hover(function () {
    $(this).animate({
        down: '+=10'
    }, 200);
}, function () {
    $(this).animate({
        down: '-=10'
    }, 200);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:59:08.990

您要查找的 CSS 属性是`bottom`，而不是`down`。

```
$("#footer").find("a").hover(function () {
    $(this).animate({
        bottom: '+=10'
    }, 200);
}, function () {
    $(this).animate({
        bottom: '-=10'
    }, 200);
}); 
```

还要检查在你的 CSS 中，mage-links 的定位是相对的还是绝对的，并且你已经为底部设置了一些值。否则它将无法正常工作。

```
a {
    position: relative;
    bottom: 0;
}​ 
```

这是一个[jsFiddle](http://jsfiddle.net/NBqTu/)，我在其中设置了上述代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:10:59.073

如果您正在寻找它在用户的鼠标进入链接时上下摆动一次，请尝试这个[小提琴](http://jsfiddle.net/PT8St/1/)

```
$(".animate_handler").mouseover(function () {
    $(".animate_link").animate({top: '-=10px'}, 200).animate({top: '+=10px'}, 200);
}); 
```

请注意，链接位于一个容器内，在链接底部有足够的空间，以防止在链接动画超出鼠标范围时重复出现动画。

# jquery - Jquery Ui 拖放

> ID：13797408
> 
> 赞同：1
> 
> 时间：2012-12-10T08:36:40.067
> 
> 标签：jquery, jquery-ui-draggable

我正在使用 jquery UI 将我的元素从左侧导航拖动到可放置区域，如果我必须从可放置区域中删除拖动的元素该怎么办？我期望的简单功能是，当它被拖出容器时，它应该被删除。它不应该弹回容器。这是我的代码：

```
$(document).ready(function() {
$(".txtI").draggable({
    appendTo: "body",
    helper: "clone"
});

$("#phone").droppable({
    activeClass: "ui-state-default",
    hoverClass: "ui-state-hover",
    accept: ":not(.ui-sortable-helper)",
    drop: function(event, ui) {
        $(this).find(".placeholder").remove();
        ui.draggable.clone().removeClass("txtI").addClass("txt2").appendTo(this);
    }
}).sortable({
    items: "div",
    sort: function() {
        $(this).removeClass("ui-state-default");
    }
}); 
```

});

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-11T07:32:10.393

感谢您的投入。这是通过简单的一行来实现的：

ui.draggable.remove();

# iphone - iOS 返回手机上没有 Twitter 帐户，即使有一个

> ID：13797409
> 
> 赞同：1
> 
> 时间：2012-12-10T08:36:44.750
> 
> 标签：iphone, objective-c, ios, twitter

我检查是否有使用此代码的 Twitter 帐户：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

NSArray *arrayOfAccounts = [accountStore accountsWithAccountType:accountType]; 
```

`twitter`如果我使用帐户在 iOS 6 模拟器上运行它，`arrayOfAccounts.count`则为 1，但在 iPhone 4 iOS6 上，`arrayOfAccounts.count`则为 0。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T08:47:24.060

我也遇到了同样的问题。使用此代码。

原因是它没有从 Twitter 帐户访问设置中获得权限，所以我们需要先检查一下。

```
if ([TWRequest class])
            {
                ACAccountStore *account = [[ACAccountStore alloc] init];
                ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:
                                              ACAccountTypeIdentifierTwitter];

                [account requestAccessToAccountsWithType:accountType options:nil
                                              completion:^(BOOL granted, NSError *error)
                 {
                     if (granted == YES)
                     {
                         // Get account and communicate with Twitter API
                         NSArray *arrayOfAccounts = [account
                                                     accountsWithAccountType:accountType];

                         if ([arrayOfAccounts count] > 0)
                         {
                             ACAccount *twitterAccount = [arrayOfAccounts lastObject];
                         }
                  }
                     else
                     {
                         NSLog(@"No Twitter Access Error");
                         return;
                     }
                 }];
            }

            if ([TWRequest class])
            {
                ACAccountStore *as = [[ACAccountStore alloc] init];
                ACAccountType *accountType = [as accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
                NSArray *twitterAccounts = [as accountsWithAccountType:accountType];
                if (!twitterAccounts.count)
                {
                    NSLog(@"No Twitter Account configured");

                    return;
                }
            }
} 
```

# c - 在 C 中实现一个基本的基数特里树

> ID：13797410
> 
> 赞同：0
> 
> 时间：2012-12-10T08:36:46.463
> 
> 标签：c, data-structures, implementation, radix

我目前正在实施[此处](http://en.wikipedia.org/wiki/Radix_tree)描述的算法（维基百科）。
本文描述了 2 个主要结构：

*   一个节点，包含一组边
*   一条边，包含一个指向目标节点的指针和一个标签

所以，目前我的 C 代码中有 2 个结构：`radix_node_s`和`radix_edge_s`

```
typedef struct radix_node_s radix_node_t;

typedef struct radix_edge_s {
    radix_node_t                *target_node;
    char                        *label;

    SLIST_ENTRY(radix_edge_s)   next;
} radix_edge_t;

struct radix_node_s {
    SLIST_HEAD(radix_edge_list_s, radix_edge_s) edges;
    void                                        *data;
}; 
```

我想知道是否可以使*边缘*结构消失并将其包含与其*目标节点*合并。因此，*边缘标签*将是*节点*的新字段。

这是一个很好的方法还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:16:19.307

好吧，如果边的标签与源节点或目标节点的标签相同，那么只需将边结构更改为指向节点的指针，复制数据没有意义。

但是如果它是*边*的名称，并且节点可能有不同名称的边，那么你确实需要边的数据“元组”：目标和名称。用 C 处理这个问题的最好方法是使用边缘结构。

说这个以防万一，也许它已经是这样了（不知道是什么`SLIST_*`）：因为你的结构很小，你应该将它用作值类型。也就是说，不是具有指向边缘结构的指针数组或边缘结构的链表，而是具有指向边缘结构值数组的指针。即使您需要调整小结构数组的大小，与通过指针数组保持链接列表或额外间接相比，现代处理器仍然更有效。

# sql-server - 如何强制 sql server 先执行子查询并过滤“where”语句

> ID：13797411
> 
> 赞同：13
> 
> 时间：2012-12-10T08:36:48.023
> 
> 标签：sql-server, tsql, query-optimization

我有一个这样的查询：

```
select * from (
    select * from TableX
    where col1 % 2 = 0
) subquery
where col1 % 4 = 0 
```

实际的子查询更复杂。当我单独执行子查询时，它可能会快速返回 200 行，但是当我执行整个查询时，等待时间太长。

我知道 sql server 在这里进行了一些优化并将`where`语句合并到子查询中，并生成效率不高的新执行计划。尽管我可以深入研究执行计划并分析原因，例如索引丢失，统计数据陈旧。

但我当然知道，我作为 BaseTable 的子查询只会返回一小部分数据，所以我希望所有进一步的过滤或连接都只发生在这些小部分数据中。

我的问题是，我可以强制 sql server 先执行子查询，而不关心外部`where`语句吗？（顺便说一句，TempTable 是我的最后一个选择，CTE 不起作用）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-04-18T12:46:14.057

如果您的 TableX 中有一个键列，您可以使用自联接：

```
select x1.* 
from TableX x1
inner join  (
    select x.IdColumn 
    from TableX x
    where x.Col1 % 2 = 0
) x2 on x1.IdColumn = x2.IdColumn
where x1.Col1 % 4 = 0 
```

Sql server 必须在匹配第二个条件之前执行内部查询。

你也可以使用这个`TOP(MaxInt)`技巧：

```
select * 
from (
    select top (9223372036854775807) * 
    from TableX
    where Col1 % 2 = 0
) subquery
where Col1 % 4 = 0 
```

`WHERE`它会在应用外部过滤器之前强制获取子查询

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-24T13:48:16.227

[![在此处输入图像描述](../Images/2462ee1a9d028dd9d5c1287d4fa34b09.png)](https://i.stack.imgur.com/lSVND.png)

```
CREATE TABLE [dbo].[Performance](
    [Id1] [int] NOT NULL,
    [Id2] [int] NOT NULL,
    [Id3] [int] NOT NULL,
    [Description] [varchar](50) NOT NULL,
 CONSTRAINT [PK_Performance] PRIMARY KEY CLUSTERED 
(
    [Id1] ASC,
    [Id2] ASC,
    [Id3] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
) 
```

`select count(*) from [Performance]`= 2.000.000

```
select
    a.*
from
    [Performance] a
    inner join (
        select Id1,Id2,Id3,Description from [Performance] where ( id1 % 2 = 0)
    ) b on ( a.id1 = b.id1 )
where
    ( b.Id3 % 3 = 0 ) 
```

与派生表的自联接

我会说结果返回得非常快（200.000 行）。

[![在此处输入图像描述](../Images/76d89915b67882668d148b30eca7efd8.png)](https://i.stack.imgur.com/hsNhg.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-09T17:29:35.173

你有没有尝试过：

`select * from ( select * from TableX as inner where inner.col1 % 2 = 0 ) as subquery where subquery.col1 % 4 = 0`

我相信它必须首先在这里执行子查询，因为您明确地在子查询的别名结果上有 where 条件。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-12-10T08:51:09.173

您可以为此使用 cte：

```
with cte as(
 select * from TableX where col1 % 2 = 0 
)

select * from ( select * from cte ) subquery where col1 % 4 = 0 
```

# javascript - 单选按钮随机选择？- 硒 IDE

> ID：13797448
> 
> 赞同：0
> 
> 时间：2012-12-10T08:39:02.687
> 
> 标签：javascript, random, selenium-ide

我想知道如何随机选择 1 以及如何使用 selenium IDE 在我的网站上的单选按钮/复选框中随机选择 1-6 个选项。

我已经有一个脚本，可以在下拉菜单中进行随机选择，并且工作正常 - 可以轻松修改以进行其他选择吗？（请包括代码示例，因为我是菜鸟）

谢谢你的帮助。

```
 <tr>
    <td>store</td>
    <td>frontrudestatus</td>
    <td>elementId</td>
</tr>
<tr>
    <td>storeXpathCount</td>
    <td>//select[@name='${elementId}']/child::option</td>
    <td>elementCount</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>Math.floor(Math.random() * (${elementCount}-1))+1</td>
    <td>randomIndex</td>
</tr>
<tr>
    <td>select</td>
    <td>xpath=(//select[@name='${elementId}'])</td>
    <td>index=${randomIndex}</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:06:30.953

这个怎么样？

```
<tr>
    <td>storeXpathCount</td>
    <td>//input[@name='NAME']</td>
    <td>total</td>
</tr>
<tr>
    <td>storeEval</td>
    <td>Math.floor(Math.random() * ${total} )+1</td>
    <td>index</td>
</tr>
<tr>
    <td>click</td>
    <td>xpath=(//input[@id='NAME'])[${index}]</td>
    <td></td>
</tr> 
```

首先，您需要获取具有 name 属性的可用单选按钮的总数并进行随机化。

# php - Javascript - 在 FOR LOOP 中以特定间隔执行某些操作

> ID：13797453
> 
> 赞同：1
> 
> 时间：2012-12-10T08:39:17.033
> 
> 标签：php, javascript

我在开发基于javascript的想法时遇到了问题..

这是主要代码，

```
 $.post("datainlines.php", function(data) { 

        var lines = data.split("\n");

           for (var i = 1; i < lines.length; i++) {

             sitename= lines[i]; sitetype=lines[i++]; 

             if(i/2 == '0'){ alert current values in sitename and sitetype variables}

            }

       } ); 
```

这将通过POST获取datainlines.php中的数据，datainlines.php文件数据结构是这样的——

```
Google
search
Stackoverflow
Questions
Yahoo
search
Facebook
social network 
```

如何获取站点名称并输入组，例如

```
Google
search 
```

然后

```
Stackoverflow
questions 
```

无论如何在for循环中每两个循环分组并发出警报？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:42:27.957

将循环值增加 2：

```
$.post("datainlines.php", function(data) {

    var lines = data.split("\n");

    for (var i = 1; i < lines.length; i+=2) {
        sitename = lines[i];
        sitetype = lines[i+1];
        alert(sitename + " " + sitetype);
    }
});​ 
```

注意`i+=2`for 循环中的。这将跳过数组中的所有其他条目。

* * *

顺便说一句，我认为这条线：

```
if(i/2 == '0') 
```

你真正要找的是模数：

```
if(i % 2 === 0) 
```

# facebook - 使用 AS3 和 facebook apprequests 发送和接收数据

> ID：13797455
> 
> 赞同：0
> 
> 时间：2012-12-10T08:39:18.290
> 
> 标签：facebook, actionscript-3, apprequests

我正在使用 facebook 图形 API 使用 AS3 在 Flash 中开发 facebook 应用程序。有时，我正在向用户发送应用请求，我需要在请求中包含一些数据，以便在用户单击它并运行应用程序时使用。

到目前为止，我的请求代码是这样的：

```
var fbReq:Object = new Object();
fbReq.message='Play with me!';
fbReq.title='You were invited to play a game!';
fbReq.to=sendTo;
fbReq.data = {test: "testingData"};

Facebook.ui('apprequests',fbReq,inviteResult,'iframe'); 
```

根据我在网上可以找到的内容，数据对象应该在我的应用程序加载时添加为 URL 参数，但我在任何地方都看不到这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:53:02.143

> 根据我在网上找到的内容，当我的应用程序加载时，应该将数据对象添加为 URL 参数

我不知道是什么让你产生了这个想法——但这不是真的。

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)：

> *数据：可选的，您可以传递用于跟踪的附加数据。**这将作为创建的请求对象的一部分存储**。*

因此，您必须使用传递给您的应用程序的请求 ID 来读取请求对象。

# c# - BulkCopy 错误：源列“CreatedBy”的区域设置 ID“1025”与目标列“CreatedBy”的区域设置 ID“1033”不匹配

> ID：13797458
> 
> 赞同：5
> 
> 时间：2012-12-10T08:39:25.280
> 
> 标签：c#, asp.net, sql-server, sqlbulkcopy

我正在使用 SqlBulkCopy 类执行 SQL 大容量复制。我创建了与源表完全相同的目标表。它们都具有相同的表名、列名、数据类型甚至相同的排序规则。我还做了sql映射以确保准确性。

我的代码如下：

```
SqlConnection SourceConnection =  new SqlConnection(SourceConnectionString);
SqlConnection DestinationConnection =  new SqlConnection(DestinationConnectionString);

DestinationConnection.Open();
SourceConnection.Open();

SqlCommand commandSourceData = new SqlCommand("SELECT * FROM Requisitions;", SourceConnection);

SqlDataReader reader = commandSourceData.ExecuteReader();    

    using (SqlBulkCopy bulkCopy = new SqlBulkCopy(DestinationConnection))

    {
           bulkCopy.DestinationTableName = "Requisitions";

           bulkCopy.ColumnMappings.Add("RequisitionId", "RequisitionId");
           bulkCopy.ColumnMappings.Add("CreatedBy", "CreatedBy");
           bulkCopy.ColumnMappings.Add("DateCreated", "DateCreated");
           bulkCopy.ColumnMappings.Add("AircraftTailNum", "AircraftTailNum");
           bulkCopy.ColumnMappings.Add("JobNumber", "JobNumber");
           bulkCopy.ColumnMappings.Add("ShopCode", "ShopCode");
           bulkCopy.ColumnMappings.Add("RequestedByName", "RequestedByName");
           bulkCopy.ColumnMappings.Add("RequestedById", "RequestedById");
           bulkCopy.ColumnMappings.Add("Status", "Status");
           bulkCopy.ColumnMappings.Add("IsCancelled", "IsCancelled");
           bulkCopy.ColumnMappings.Add("IsProcessed", "IsProcessed");

           try
               {
                  // Write from the source to the destination.
                  bulkCopy.WriteToServer(reader);
                }
          catch (Exception ex)
                {
                     Console.WriteLine(ex.Message);
                 }
          finally
                 {

                    reader.Close();
                  }
          } 
```

但是，每次执行代码时，都会出现以下错误：

> 源列“CreatedBy”的区域设置 ID“1025”与目标列“CreatedBy”的区域设置 ID“1033”不匹配。

我在互联网上搜索了很多，但没有找到任何解决方案。如果有人帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:42:42.757

源 varchar 列的排序规则与目标 varchar 列的排序规则不同。

首先加载到数据表可以解决这个问题，但是如果您正在加载大量数据，您可能会遇到 System.OutOfMemoryException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:49:37.233

像这样试试

```
 public DataTable fetchValue()
    {
        SqlDataAdapter dap=new SqlDataAdapter("SELECT RequisitionId,CreatedBy,DateCreated,AircraftTailNum,JobNumber,ShopCode,RequestedByName,RequestedById,Status,IsCancelled,IsProcessed FROM Requisitions;", cn);
        DataSet ds=new();
        dap.Fill(ds);
        return ds.Tables[0];
    } 
```

* * *

```
 DataTable dtgenerate=new DataTable();
        dtgenerate=fetchValue();

       cn.open();
       using (SqlBulkCopy bulkCopy = new SqlBulkCopy(n))
       {
           bulkCopy.DestinationTableName = "Requisitions";//DestionTableName
           // bulkCopy.ColumnMappings.Add("SourceColumnIndex", "DestinationColumnIndex");  
           bulkCopy.ColumnMappings.Add("RequisitionId", "RequisitionId");
           bulkCopy.ColumnMappings.Add("CreatedBy", "CreatedBy");
           bulkCopy.ColumnMappings.Add("DateCreated", "DateCreated");
           bulkCopy.ColumnMappings.Add("AircraftTailNum", "AircraftTailNum");
           bulkCopy.ColumnMappings.Add("JobNumber", "JobNumber");
           bulkCopy.ColumnMappings.Add("ShopCode", "ShopCode");
           bulkCopy.ColumnMappings.Add("RequestedByName", "RequestedByName");
           bulkCopy.ColumnMappings.Add("RequestedById", "RequestedById");
           bulkCopy.ColumnMappings.Add("Status", "Status");
           bulkCopy.ColumnMappings.Add("IsCancelled", "IsCancelled");
           bulkCopy.ColumnMappings.Add("IsProcessed", "IsProcessed");

           bulkCopy.WriteToServer(dtgenerate);
       }
       cn.close(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-17T15:01:32.060

虽然您声称源表和目标表的列排序规则相同，但显然它们是不同的，至少对于这一特定列而言。

一种更简单的方法，既不消除`DataReader`直接传递 to的性能优势`SqlBulkCopy`，也不使用任何额外的内存，是简单地强制该列的排序规则成为目标排序规则。您可以通过指定`SELECT`而不是使用的列来执行此操作`*`（在任何情况下都是一个好习惯），然后您可以将`COLLATE`关键字添加到出现此错误的任何字符串列中。例如：

```
@"SELECT RequisitionId, CreatedBy COLLATE {destination_collation_name}, DateCreated,
         AircraftTailNum, JobNumber, ShopCode, RequestedByName, RequestedById,
         Status, IsCancelled, IsProcessed
 FROM    Requisitions;" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-29T16:37:52.310

该错误通常发生在将 NULL 值从一个表插入到另一个表时，其中表具有不同的“区域设置”（排序规则）设置。

这通常出现在从一个数据库到另一个数据库的大容量复制操作中，因为这两个数据库可能具有不同的排序规则配置。

防止此问题的一种方法是对所有可排序（char、varchar 或 nvarchar）列使用 ISNULL，以确保永远不会在其中输入 NULL。

但是，您的

```
SELECT * 
```

含糊不清，应尽可能避免。很可能您的 SELECT 中有一些 NULL 列通过，并且由于您没有指定要选择的列，因此您不能使用 ISNULL 来防止插入 NULL 值。

# jakarta-ee - com.sun.faces.config.ConfigurationException：配置失败！必须有一个接受 BehaviorConfig 的构造函数

> ID：13797467
> 
> 赞同：0
> 
> 时间：2012-12-10T08:40:13.880
> 
> 标签：jakarta-ee, jsf-2, icefaces-3

我正在尝试将**jsf 2.1.14**与**icefaces 3.2.0**一起使用， 并且在尝试运行应用程序时，出现以下异常：

```
com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! Must have a Constructor that takes in a BehaviorConfig
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:375)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: javax.faces.view.facelets.FaceletException: Must have a Constructor that takes in a BehaviorConfig
    at com.sun.faces.facelets.tag.AbstractTagLibrary$UserBehaviorHandlerFactory.<init>(AbstractTagLibrary.java:453)
    at com.sun.faces.facelets.tag.AbstractTagLibrary.addBehavior(AbstractTagLibrary.java:601)
    at com.sun.faces.facelets.tag.TagLibraryImpl.putBehavior(TagLibraryImpl.java:94)
    at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processBehavior(FaceletTaglibConfigProcessor.java:396)
    at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTags(FaceletTaglibConfigProcessor.java:367)
    at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTagLibrary(FaceletTaglibConfigProcessor.java:314)
    at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.process(FaceletTaglibConfigProcessor.java:263)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:362)
    ... 11 more
Caused by: java.lang.NoSuchMethodException: org.icefaces.ace.component.ajax.AjaxBehaviorHandler.<init>(javax.faces.view.facelets.BehaviorConfig)
    at java.lang.Class.getConstructor0(Class.java:2706)
    at java.lang.Class.getConstructor(Class.java:1657)
    at com.sun.faces.facelets.tag.AbstractTagLibrary$UserBehaviorHandlerFactory.<init>(AbstractTagLibrary.java:451)
    ... 18 more
Dec 10, 2012 10:35:15 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener
java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! Must have a Constructor that takes in a BehaviorConfig
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Caused by: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! Must have a Constructor that takes in a BehaviorConfig
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:375)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:225)
    ... 10 more
Caused by: javax.faces.view.facelets.FaceletException: Must have a Constructor that takes in a BehaviorConfig
    at com.sun.faces.facelets.tag.AbstractTagLibrary$UserBehaviorHandlerFactory.<init>(AbstractTagLibrary.java:453)
    at com.sun.faces.facelets.tag.AbstractTagLibrary.addBehavior(AbstractTagLibrary.java:601)
    at com.sun.faces.facelets.tag.TagLibraryImpl.putBehavior(TagLibraryImpl.java:94)
    at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processBehavior(FaceletTaglibConfigProcessor.java:396)
    at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTags(FaceletTaglibConfigProcessor.java:367)
    at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.processTagLibrary(FaceletTaglibConfigProcessor.java:314)
    at com.sun.faces.config.processor.FaceletTaglibConfigProcessor.process(FaceletTaglibConfigProcessor.java:263)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:362)
    ... 11 more
Caused by: java.lang.NoSuchMethodException: org.icefaces.ace.component.ajax.AjaxBehaviorHandler.<init>(javax.faces.view.facelets.BehaviorConfig)
    at java.lang.Class.getConstructor0(Class.java:2706)
    at java.lang.Class.getConstructor(Class.java:1657)
    at com.sun.faces.facelets.tag.AbstractTagLibrary$UserBehaviorHandlerFactory.<init>(AbstractTagLibrary.java:451)
    ... 18 more
Dec 10, 2012 10:35:15 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Dec 10, 2012 10:35:15 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/XenoBillingWeb] startup failed due to previous errors
Dec 10, 2012 10:35:15 AM javax.faces.FactoryFinder$FactoryManager getFactory
SEVERE: Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory. Attempting to find backup.
Dec 10, 2012 10:35:15 AM com.sun.faces.config.ConfigureListener contextDestroyed
SEVERE: Unexpected exception when attempting to tear down the Mojarra runtime
java.lang.IllegalStateException: Could not find backup for factory javax.faces.application.ApplicationFactory. 
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:1008)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:343)
    at com.sun.faces.config.InitFacesContext.getApplication(InitFacesContext.java:131)
    at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:328)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4831)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5478)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

以下是我的**web.xml**：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>My APP</display-name>
  <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:META-INF/spring/applicationContext.xml
        classpath:META-INF/spring/applicationSecurity.xml
        </param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
    <param-value>
    /WEB-INF/springsecurity.taglib.xml;/WEB-INF/utils.taglib.xml
    </param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Production</param-value>
  </context-param>
  <welcome-file-list>
    <welcome-file>/</welcome-file>
  </welcome-file-list>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
  </context-param>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>

  <filter>
    <filter-name>hibernateFilter</filter-name>
    <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
    <init-param>
      <param-name>sessionFactoryBeanName</param-name>
      <param-value>sessionFactory</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>hibernateFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
  </filter-mapping>

  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
  </filter-mapping>
  <filter>
    <filter-name>Pretty Filter</filter-name>
    <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
    <init-param>
      <param-name>logLevel</param-name>
      <param-value>ERROR</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>Pretty Filter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
  </filter-mapping>
  <session-config>
    <session-timeout>30</session-timeout>
  </session-config>
  <context-param>
    <param-name>com.icesoft.faces.synchronousUpdate</param-name>
    <param-value>true</param-value>
  </context-param>
  <context-param>
    <param-name>org.icefaces.connectionLostRedirectURI</param-name>
    <param-value>/login</param-value>
  </context-param>
  <context-param>
    <param-name>org.icefaces.sessionExpiredRedirectURI</param-name>
    <param-value>/login</param-value>
  </context-param>
  <context-param>
    <param-name>com.ocpsoft.pretty.DEVELOPMENT</param-name>
    <param-value>false</param-value>
  </context-param>
  <servlet>
    <servlet-name>Resource Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.CompatResourceServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Resource Servlet</servlet-name>
    <url-pattern>/xmlhttp/*</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>

  <error-page>
    <exception-type>java.lang.Throwable</exception-type>
    <location>/error</location>
  </error-page>
  <error-page>
    <error-code>400</error-code>
    <location>/error</location>
  </error-page>
  <error-page>
    <error-code>404</error-code>
    <location>/pageNotFound</location>
  </error-page>
  <context-param>
    <param-name>org.icefaces.ace.theme</param-name>
    <param-value>rime</param-value>
  </context-param>

       <context-param>
         <param-name>quartz:shutdown-on-unload</param-name>
         <param-value>true</param-value>
     </context-param>

     <context-param>
         <param-name>quartz:wait-on-shutdown</param-name>
         <param-value>true</param-value>
     </context-param>

     <context-param>
         <param-name>quartz:start-on-load</param-name>
         <param-value>true</param-value>
     </context-param>

     <listener>
         <listener-class>com.myapp.web.control.ContextListener</listener-class>
     </listener>

</web-app> 
```

请告知如何解决它，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:32:37.660

安装最新的 icefaces eclipse 插件后问题已解决。

# kernel - 在 Windbg 内核调试期间将地址与堆栈匹配

> ID：13797469
> 
> 赞同：2
> 
> 时间：2012-12-10T08:40:15.783
> 
> 标签：kernel, windbg, callstack

我在调试时找到了一个地址，我怀疑它属于某个进程的某个线程的调用堆栈。

找出它是哪个线程的最佳方法是什么（或者那是我的假设是错误的）？

PS我本可以使用`!process`，然后`.process`反复使用`!thread`，但必须有更好的方法。

PSS 不幸的是，我无法在用户模式调试时重现这种情况。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:23:49.033

首先，如果您加载了符号，您可以使用[`ln <address>`](http://blogs.msdn.com/b/debuggingtoolbox/archive/2008/06/11/special-command-listing-the-nearest-symbols-with-ln.aspx). 从那里，不难猜测涉及哪个进程/线程。

如果这不符合您的要求，您可以继续使用蛮力方法。您最好的搜索选择是以更易于搜索的格式自动获取调用堆栈。以下将它们全部写入一个文件，您可以使用您喜欢的文本编辑器更轻松地搜索该文件。

```
.logopen c:\stacks.txt; !for_each_process "!process @#Process; ~*kv1000"; .logclose 
```

这需要一段时间，所以去喝杯咖啡吧。如果你觉得幸运，你可以直接从 windbg 搜索输出，如下所示：

```
.shell -ci "!for_each_process \"!process @#Process; ~*kv1000\"" findstr "deadbeef" 
```

（将*deadbeef*替换为您要查找的地址）

希望这可以满足您的需求，或者至少可以将您指向编写解决方案的脚本。

# gps - 无法使用蓝牙 GPS 等安卓设备

> ID：13797471
> 
> 赞同：2
> 
> 时间：2012-12-10T08:40:29.873
> 
> 标签：gps, android-4.0-ice-cream-sandwich, nmea, bluez, raspbian

我想将我的安卓手机（ICS 4.0.1）像蓝牙 GPS 一样与我的树莓派一起使用。我目前的分发是 raspbian。我尝试了 Google Play 中的几个应用程序，但最后我选择了 blueNmea。它创建一个 RFCOM/L2CAP 通道以在蓝牙流上广播 GPS 位置。

当我浏览树莓派上可用的蓝牙服务时，我看到了 blueNmea RFCOM/L2CAP 通道。但是当我尝试使用频道时，出现“无效交换”错误

我尝试了两种使用该服务的方法，使用 rfcomm 命令和使用 pybluez 包装器。两种方式都会出现同样的错误。

我认为 blueNmea 没有看到 rasperrry，因此不会发送 nmea 数据。blueNmea 应用程序有一个“已连接的客户端”列表，而树莓派从未出现在此列表中。

我也尝试将两个设备配对在一起，但没有区别。

也可以在 TCP/IP 连接上使用 blueNmea，我用我的笔记本进行了测试，它工作正常。

谢谢。

# elasticsearch - ElasticSearch：选择性查询

> ID：13797472
> 
> 赞同：0
> 
> 时间：2012-12-10T08:40:31.070
> 
> 标签：elasticsearch

需要一些帮助。我的文档有一个版本字段。只有更新的文档才会有带有递增版本号的新记录。

例子：

```
{id:1 , version:1,…} 
{id:1 , version:2,….} //This has been updated
{id:2 , version:1,…} 
```

在上面的示例中，id=1 有两条记录，因为它已被更新。虽然 id=2 有一条记录，因为它尚未更新并且仍在版本 1 上。

现在在弹性搜索中是否有任何查询可以获得最大版本。示例：获取唯一文档 TILL 版本 1 应该给出结果：

```
{id:1 , version:1,…}
{id:2 , version:1,…} 
```

在第 2 版之前获取唯一文档时应该给出：

```
{id:1 , version:2,….}
{id:2 , version:1,…} 
```

（在上面的结果中有版本 1 和版本 2 的混合）

谢谢， 卡兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:43:25.497

在 elasticsearch 中没有简单的方法来实现这一点（至少在实现像[Field Collapsing/Combining](https://github.com/elasticsearch/elasticsearch/issues/256)之类的东西之前）。我建议维护两个索引：一个用于具有自动生成的 id 的所有版本，另一个索引仅具有最新版本，记录的`id`字段作为 id。当你需要所有版本时，你可以搜索第一个索引，当你只需要最新版本时，你可以搜索第二个。

另一种解决方案是以某种方式指示一条记录代表最新版本。可以通过添加一个布尔字段“latest”来完成，这意味着当添加新记录时，您必须使用以前的最新版本重新索引记录，或者您可以添加一个子文档来跟踪每条记录的最新版本.

# php - 创建一个以用户输入为标题的文件夹

> ID：13797474
> 
> 赞同：1
> 
> 时间：2012-12-10T08:40:34.630
> 
> 标签：php, filesystems

在 PHP 中，我需要使用用户的输入作为文件夹的标题。

例如：

```
$foldername = $_REQUEST["foldername"];
mkdir("./userfolders/".$foldername); 
```

因为，我看到的一个问题是输入可能包含一个“../”，这会导致文件夹被写入父目录，这是我不想要的。我对此的解决方案是`str_replace`去掉字符串中的所有正斜杠。

还有其他我错过的漏洞吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:45:58.977

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:53:16.067

Is there a possibility you can use the `urlencode` function on the folder name variable. When showing the folder to the user you can then use `urldecode`.

```
$foldername = urlencode($_REQUEST["foldername"]);
mkdir("./userfolders/".$foldername);

// Show folder name
echo urldecode($foldername); 
```

# java - 将字符串拆分成小部分 [JAVA]

> ID：13797483
> 
> 赞同：-1
> 
> 时间：2012-12-10T08:41:15.410
> 
> 标签：java, regex, arrays, string, split

例如，我有一个字符串，上面写着 Bingo，我想把它分成更小的部分，并让它们中的每一个都成为一个字符串数组；

`String s = "BINGO"`

我希望它是这样的；

```
String s[] = new String[s.length];
s[0] = B;
s[1] = I;
s[2] = N;
s[3] = G;
s[4] = O; 
```

我试过了，但失败了；

```
public static void main(String[] args) {

    String sentence = "BINGO";
    String words[] = sentence.split("a-zA-Z");

   for (String word : words) {
    System.out.println(word);
} 
```

它只是打印出“BINGO”，而我想拆分它们，现在我应该使用什么正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:51:36.863

您可能想要转换为字符数组

```
char[] letters = word.toCharArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:44:06.973

利用`sentence.split("");`

1.  split 方法通过应该拆分的内容获取正则表达式。这意味着正则表达式捕获的所有内容都不会成为结果。
2.  如果您希望 regexp 捕捉字母，您应该放置`a-zA-Z`方括号 ( `[a-zA-Z]`) 阅读 regexp 文档。
3.  如果要获取结果中的每个字符，请使用空字符串。如果您不需要空格，请使用`\\s*`（空格字符 0 次或多次）

**编辑：**

放在`(?!^)`前面`\\s*`。`^`是字符串的开头并`(?!^)`否定它。
所以`(?!^)\\s*`意味着不是字符串的起点和空格 0 个或多个 tames。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:50:39.580

您也可以使用[`String.getChars()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#getChars%28int,%20int,%20char%5B%5D,%20int%29).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T08:55:34.437

```
String sentence = "BINGO";
String words[] = sentence.split(""); // empty regex

for (String word : words) 
        System.out.println(word); 
```

# hibernate - 通过从 Spring MVC 控制器类调用相同 DAO 的方法尝试使用 Hibernate SessionFactory 时变为 null

> ID：13797487
> 
> 赞同：0
> 
> 时间：2012-12-10T08:41:25.303
> 
> 标签：hibernate, transactions, spring-3, spring-transactions, sessionfactory

我正在使用 Spring 3.0.2 版。我想通过[`@Transactional`](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/transaction/annotation/Transactional.html)注释管理事务。

在`applicationContext.xml`文件中，我有以下数据源配置。

```
<bean id="dataSource"
      class="org.springframework.jdbc.datasource.DriverManagerDataSource"
      p:driverClassName="oracle.jdbc.OracleDriver"
      p:url="jdbc:oracle:thin:@localhost:1521:xe"
      p:username="userName"
      p:password="password"/> 
```

已[`SessionFactory`](http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/SessionFactory.html)配置如下。

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="mappingResources">
  <list>
    <value>hibernate.cfg.xml</value>
  </list>
  </property>
  <property name="hibernateProperties">
    <value>
      hibernate.dialect=org.hibernate.dialect.OracleDialect
    </value>
  </property>
</bean> 
```

该`hibernate.cfg.xml`文件位于默认包中。

* * *

```
<bean id="transactionManager"
      class="org.springframework.orm.hibernate3.HibernateTransactionManager"
      p:sessionFactory-ref="sessionFactory" />

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="CountryService"
      class="dao.CountryDAO"
      p:sessionFactory-ref="sessionFactory" /> 
```

`CountryService`界面简单如下。

```
package daoservice;

import java.util.List;
import model.Country;

public interface CountryService
{
    public List<Country>getAllCountries();
} 
```

以下是它的实现 - `CountryDAO`.

```
package dao;

import daoservice.CountryService;
import java.util.List;
import model.Country;
import org.hibernate.SessionFactory;
import org.springframework.dao.DataAccessException;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

@Repository
@Transactional(readOnly = true)
final public class CountryDAO implements CountryService
{
    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory)
    {
        this.sessionFactory = sessionFactory;
        System.out.println("template = "+this.sessionFactory);
    }

    @SuppressWarnings("unchecked")
    public List<Country>getAllCountries() throws DataAccessException
    {
        System.out.println("sessionFactory = "+sessionFactory);
        return sessionFactory.getCurrentSession().createQuery("from model.Country order by countryId desc").list();
    }
} 
```

关于**部署**时间，下面的语句，

```
System.out.println("template = "+this.sessionFactory); 
```

如在`setSessionFactory()`方法中显示类似

```
template = org.hibernate.impl.SessionFactoryImpl@c63558 
```

这意味着在`applicationContext.xml`文件中进行的上述配置似乎有效。

* * *

`getAllCountries()`但是从我的 Spring 控制器类中调用前一个类中的方法，例如（在 GET 方法期间）

```
CountryDAO c=new CountryDAO();
List<Country> countryList = c.getAllCountries(); 
```

导致`NullPointerException`抛出和语句

```
System.out.println("sessionFactory = "+sessionFactory); 
```

显示

```
sessionFactory = null 
```

很明显。

* * *

据推测，似乎是由构造函数创建了一个新实例，`CountryDAO`并且对象在其中`sessionFactory`变为`null`.

那么如何使用`CountryDAO`Spring（或其他地方）的 DAO？

* * *

根据答案尝试，它抛出了以下异常。

> org.springframework.beans.factory.BeanCreationException：创建名为“countryController”的bean时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：private dao.CountryDAO controller.CountryController.countryDAO; 嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [dao.CountryDAO] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true)}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:07:01.233

您需要从 中获取`CountryDAO`bean，`WebApplicationContext`或者通过 xml 或注释将其注入到您的控制器中。像这样的东西：

```
@Controller
public class SomeController{

    @Autowired
    private CountryService CountryService;

    // Getters and Setters

} 
```

您正在做`CountryDAO c=new CountryDAO();`的只是实例化一个不受弹簧容器管理的新对象，因此它当然会将其会话工厂设置为`null`.

# git - 基于 Drupal CMS 的项目和 MySQL 数据库的 Git 版本控制

> ID：13797488
> 
> 赞同：0
> 
> 时间：2012-12-10T08:41:27.160
> 
> 标签：git, drupal, version-control, content-management-system, cpanel

我正在使用 Drupal/CMS 托管一个网站（在共享托管服务提供商中）。我经常不得不使用不同的模块更新站点，并且每次手动更改站点、不同的模块等时备份非常耗时。我想知道是否有办法将 git（或等效项）设置为版本控制我的 Drupal CMS 源以及 MySQL 数据库？如何为在共享 Web 托管服务的 cPanel 下运行的基于 Drupal/CMS 的项目设置基于 git 的版本控制系统？如何将开发服务器上的源/数据库与实时/部署服务器的源和数据库合并/同步（用户可能正在更新内容）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:11:55.030

是的。你当然可以使用 Git。您可以将文件夹上传到 Git 存储库。每次更新您的网站后，您可以剪切一个标签，该标签将在发布时保存这些文件的版本。

有关使用版本号标记的更多信息，请参阅[https://softwareengineering.stackexchange.com/questions/141973/how-do-you-achieve-a-numeric-versioning-scheme-with-git](https://softwareengineering.stackexchange.com/questions/141973/how-do-you-achieve-a-numeric-versioning-scheme-with-git)

要设置 Git 存储库，请参阅：

*   [https://help.github.com/articles/set-up-git](https://help.github.com/articles/set-up-git)
*   [http://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup](http://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup)

# visual-studio - 从颁发者授权证书创建 ClickOnce 证书

> ID：13797490
> 
> 赞同：0
> 
> 时间：2012-12-10T08:41:32.833
> 
> 标签：visual-studio, certificate, clickonce, pfx

我正在尝试从我购买的颁发机构证书创建一个证书，以便我可以在[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)应用程序中使用它。

我有一个我知道密码的 .pfx 文件。如何从此文件中创建一个可以安装到我的个人证书中的证书，以便我可以使用它来发布此 ClickOnce 应用程序？

我一直在查看makecert.exe，但似乎没有找到制作此证书的正确方法。

编辑：如果我手动选择了颁发者证书，我将在 Visual Studio 中收到此错误：

> 所选证书对代码签名无效。选择另一个证书文件

我知道这是有道理的，因为这些证书不是为此目的。问题是：我如何从这个证书制作我可以使用的证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:39:03.873

你不能。您必须拥有代码签名证书才能对 ClickOnce 部署进行签名。

# asp.net - 如何在asp标签中将文本对齐到中心

> ID：13797492
> 
> 赞同：13
> 
> 时间：2012-12-10T08:41:44.913
> 
> 标签：asp.net, html

我有一个标签，我需要将文本对齐到中心，我试过这个

```
 <asp:Label ID="Label3" runat="server" Text="ABC" style="text-align:center" Font-Bold="true" Font-Size="X-Large" CssClass="StrongText"></asp:Label> 
```

但它不起作用..

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-10T08:49:29.377

```
<div style="margin-left: auto; margin-right: auto; text-align: center;">
    <asp:Label ID="Label3" runat="server" Text="ABC" Font-Bold="true" Font-Size="X-Large"
        CssClass="StrongText"></asp:Label>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-24T07:38:31.950

如果您编写`text-align: center;`它不起作用，请尝试添加`display:inline-block;`到样式定义中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T10:08:29.857

设置边距为0；总是检查任何元素的父元素，因为它们继承了它们的 css 属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-26T06:23:53.087

```
Use the following CSS Class to align label text center

.textAlign{
                text-align:center;
            } 
```

# php - 首先在php中检查并列出现有值

> ID：13797494
> 
> 赞同：0
> 
> 时间：2012-12-10T08:41:54.593
> 
> 标签：php

我有用户表，其中有

```
name        email
abc       xxx@yyy.com
def       xyz@yyy.com
ghi      
jkl       xyx@yyy.com 
```

现在我想检查电子邮件是否存在。如果存在我想首先列出，那么输出将是

```
name        email
abc       xxx@yyy.com
def       xyz@yyy.com          
jkl       xyx@yyy.com
ghi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:05:06.860

只需使用

```
<your query> ORDER BY email DESC 
```

这样，有电子邮件的用户将排在第一位，没有电子邮件的用户将列在最后。

# javascript - 使用新的 PDF 文件重新加载对象的内容

> ID：13797501
> 
> 赞同：2
> 
> 时间：2012-12-10T08:42:11.993
> 
> 标签：javascript, jquery, html, activex

在更新其文件路径后，我需要刷新对象元素的内容，如下所示。

```
<input type="file" onchange="$('#oPdf').attr('data',this.value')" />
<object id="oPdf" data='[path]' type="application/pdf" width="500px" height="100%"></object> 
```

该值已设置，但似乎没有使用 javascript 更新。

我已经设法在 iframe 中做到了，但我不会不使用 iframe。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:22:54.783

您的问题已在此处得到解答：[<object> 标签在 Chrome 中更改其数据属性时不会刷新](https://stackoverflow.com/questions/10366867/object-tag-doesnt-refresh-when-its-data-attribute-is-changed-in-chrome)

您可能会遇到一些问题，因为它还不是标准。

祝你好运 ;）

# sublimetext2 - Sublime Text 2 - 插件

> ID：13797505
> 
> 赞同：1
> 
> 时间：2012-12-10T08:42:36.300
> 
> 标签：sublimetext2, sublimetext

我想在我的插件搜索引擎中使用“cmd + p”文件搜索。任何线索如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:26:59.677

您是指一般的快速面板吗？如同，您从插件中指定一个条目列表，然后将其用于填充面板。然后用户可以搜索，就像他们使用“去任何地方”功能一样？如果是这样，请查看[这里](http://www.sublimetext.com/docs/2/api_reference.html#sublime.Window)`show_quick_panel`的方法。您基本上指定了一个项目数组（或者如果您需要额外信息，则指定一个数组数组 - 例如您执行此操作时的路径）以及在选择或取消时调用的方法。如果您想要一个具体的示例（[示例 1](https://github.com/skuroda/FindKeyConflicts/blob/master/find_key_conflicts.py#L271)、[示例 2](https://github.com/facelessuser/FuzzyFileNav/blob/master/fuzzy_file_nav.py#L465)），有许多插件使用它。`cmd + p`

如果这不是你的意思，请澄清。

# facebook - Facebook 帖子作为图像

> ID：13797513
> 
> 赞同：0
> 
> 时间：2012-12-10T08:43:00.467
> 
> 标签：facebook, oauth, facebooker2

我想在 Facebook 上发布帖子作为图片而不是文本（也不是专辑），并且我正在使用以下代码：

```
def facebook_page
@page ||= Mogli::Page.new(:id => facebook_page_id, :client => Mogli::Client.new(facebook_page_token))
end

def post_to_facebook_page()
    post_params = {
    :message     => "message,"
    :link        => "url.jpeg"
    :name        => "name",
    :description => "description",
    :picture     => "picture_url"
   } 
    facebook_page.feed_create(Mogli::Post.new(post_params))
    rescue Mogli::Client::OAuthException, Mogli::Client::HTTPException => e
   Rails.logger.error("Unable to post to Facebook page #{facebook_page_id} due to #{e.message} on #{Time.now}")
end 
```

但它没有像我预期的那样发布：这是输出： [http](http://www.facebook.com/profile.php?id=100004124073785) ://www.facebook.com/profile.php?id=100004124073785所有帖子都是文本和

我期望 ：

[http://www.facebook.com/bigjoneschicago?fref=ts](http://www.facebook.com/bigjoneschicago?fref=ts)找到第一篇文章“今晚菜单上的手工意大利面”，有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:45:54.377

您不想发布链接，而是发布照片：[https ://developers.facebook.com/docs/reference/api/user/#photos](https://developers.facebook.com/docs/reference/api/user/#photos)

*编辑以回应评论：*

使用`source`参数需要格式类似于实际 HTTP 文件上传的数据。如果要使用可公开访问的 URL 上传图片，请改用参数`url`。

是的，如果您没有明确指定要上传到的相册，照片将转到以您的应用命名的相册。您可以改为上传到特定相册，但这需要权限`user_photos`。

# c - 在 C 中嵌入 ruby 代码

> ID：13797516
> 
> 赞同：2
> 
> 时间：2012-12-10T08:43:07.470
> 
> 标签：c, ruby

我知道有几个关于这个的帖子，但我是堆栈

这是我的 C 代码

```
#include </usr/include/ruby-1.9.1/ruby/ruby.h>
#include <stdio.h>
#include <stdlib.h>

int main()
{
 ruby_init();
 rb_eval_string("puts 'hello'");
 ruby_finalize();
 return 0;
 } 
```

在 sublime text 2 中编译时出现以下错误

```
In file included from /Users/pierrebaille/Code/Ruby/embedRuby/embedRubyFirst.c:1:
/usr/include/ruby-1.9.1/ruby/ruby.h:1481:24: error: ruby/subst.h: No such file or directory         
[Finished in 0.1s with exit code 1] 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T08:48:52.540

您不应该硬编码头文件的完整路径，例如

`#include </usr/include/ruby-1.9.1/ruby/ruby.h>`

正确的是

`#include <ruby.h>`

并告诉您的 gcc 通过 CFLAGS 和 libariy 通过 LD_FLAGS 搜索头文件，没有 makefile 的简单命令可以是：

`gcc -o demo.exe -I/path/to/ruby/headers rubydemo.c -L/path/to/ruby/lib -lruby-libary-name`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T08:45:28.867

您包含的其中一个文件依次包含`ruby/subst.h`, ，但它似乎`ruby`不在您的路径中，这就是您在代码中包含此内容的原因：

```
#include </usr/include/ruby-1.9.1/ruby/ruby.h> 
```

您应该简单地将“/some_path/”添加到您的编译器路径设置中，而不是硬编码路径，其中`some_path`包含`ruby`作为子文件夹的文件夹。现在您自己的包含变成：

```
#include <ruby/ruby.h> 
```

# asp.net - 请求失败，http 状态 401 未经授权的 ssrs

> ID：13797518
> 
> 赞同：0
> 
> 时间：2012-12-10T08:43:12.987
> 
> 标签：asp.net, sql-server-2008, reporting-services

我正在使用 Asp.net & c# 开发一个 Web 应用程序。要生成报告，我正在使用 SQL Server 商业智能开发工作室（ssrs）。我收到类似**“请求失败，http 状态 401 未授权”之**类的错误，请帮助我提前感谢实际错误如下

ex = {“请求失败，HTTP 状态 401：未授权。”}

{System.Net.WebException：请求失败，HTTP 状态 401：未经授权。在 Microsoft.Reporting.WebForms.Internal.Soap.ReportingServices2005.Execution.RSExecutionConnection.IsSecureMethod(String methodname) 在 Microsoft.Reporting.WebForms.Internal 的 Microsoft.Reporting.WebForms.Internal.Soap.ReportingServices2005.Execution.RSExecutionConnection.GetSecureMethods() .Soap.ReportingServices2005.Execution.RSExecutionConnection.SetConnectionSSLForMethod(String methodname) at Microsoft.Reporting.WebForms.Internal.Soap.ReportingServices2005.Execution.RSExecutionConnection.ProxyMethodInvocation.Execute[TReturn](RSExecutionConnection 连接，ProxyMethod`1 initialMethod, ProxyMethod`1 retryMethod) 在 Microsoft.Reporting.WebForms.Internal.Soap.ReportingServices2005.Execution.RSExecutionConnection.LoadReport(String Report, String HistoryID) 在 Microsoft.Reporting.WebForms.ServerReport.EnsureExecutionSession() 在 Microsoft.Reporting.WebForms.ServerReport.SetParameters (IEnumerable`1 参数) 在 Microsoft.Reporting.WebForms.Report.SetParameters(ReportParameter 参数) 在 Reports_CustomerWtrEff.GetReports(String SampleCodes, String lstSampleCode) 在 CustomerWtrEff.aspx.cs:line 98}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T20:17:25.190

查看下面的此链接，因为它可以为您的问题提供答案。

**参考：** [http ://www.taznetworks.com/rss/2006/03/crm-30-sbe-sql-reporting-error.html](http://www.taznetworks.com/rss/2006/03/crm-30-sbe-sql-reporting-error.html)

**编辑：**

> 在最近对 CRM 进行一些测试安装时，我们不断出现错误“安装程序无法验证指定的 Reporting Services 报告服务器[https://server.xxx.com/ReportServer](https://server.xxx.com/ReportServer)。错误：请求失败，HTTP 状态 401 : 未经授权。
> 
> 这似乎是一个非常普遍的问题，但对这些问题的回应并不多。我可以说的一件事是 CRM 是一个很好的产品，但人的内心是复杂的。对于胆小的人来说，这是肯定的，尤其是在涉及 SQL 和 SQL 报告服务时。
> 
> 无论如何回到问题。在大多数使用 CRM 3 和 SBS 的情况下，[Anne Stanton](http://thenorwichgroup.blogs.com/mscrm/2005/11/sbs_sp1_and_ms_.html)等网站上的文档显示 ISA 存在问题。我们正在建造的这个盒子还没有 ISA（到目前为止）。
> 
> 我们遇到的问题似乎更多地与 Windows Server 2003 的 SP1 相关。[知识库文章 896861](http://support.microsoft.com/default.aspx?scid=kb;en-us;896861)似乎是正确的。我们根据文章做了以下操作：
> 
> 1.  单击开始，单击运行，键入 regedit，然后单击确定。
> 2.  在注册表编辑器中，找到并单击以下注册表项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa
> 3.  右键单击 Lsa，指向新建，然后单击 DWORD 值。
> 4.  键入 DisableLoopbackCheck，然后按 Enter。
> 5.  右键单击 DisableLoopbackCheck，然后单击修改。
> 6.  在数值数据框中，键入 1，然后单击确定。
> 7.  退出注册表编辑器，然后重新启动计算机。
> 
> 这样做使我们能够访问[https://servername/reports](https://servername/reports)并显示完整的 SQL Reporting Services 网站。CRM 报告现在可以按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T13:16:45.203

我遇到了这个问题并尝试了越来越多，最后发现

1.  打开报告服务配置并连接到服务器然后打开 Web 服务 url 你会发现 url 复制它（**URL**）

2.  打开您的 SQL Server 数据工具项目，在项目属性中，目标服务器 URL 是报告服务配置中提到的**URL**，目标报告文件夹是项目的名称

3.  在您的 asp.net 项目中，您将编写以下代码：

.

```
ReportViewer1.ProcessingMode = 
Microsoft.Reporting.WebForms.ProcessingMode.Remote;
ReportViewer1.ServerReport.ReportServerUrl = new Uri(**URL**);
ReportViewer1.ServerReport.ReportPath = String.Concat(**target report folder**, "name of the report ");
ReportViewer1.ServerReport.Refresh(); 
```

# mysql - 在没有主键的情况下删除 MySQL 数据库中的重复条目

> ID：13797521
> 
> 赞同：5
> 
> 时间：2012-12-10T08:43:27.213
> 
> 标签：mysql, database, duplicates, primary-key, distinct

我收到了一个相当大的 MySQL 数据库，其中有很多重复项。大约三分之一的数据库是重复的。它也**缺少**主键。

数据库的结构是这样的：

```
unique_id | field01 | field02 | field03 | field04 | ...... | field26 | field27 | 
```

现在虽然 unique_id 应该是唯一的；有很多重复。

此外，对于属于特定 unique_id 副本的一组行，其余列可能相同也可能不同。例如，查看下面的 unique_id 'id_1'，两个实例中的 field01 相同，但 field02 和 field03 不同。

我想删除重复项，并且每个 unique_id 仅保留一份副本。**哪一个幸存下来并不重要。**

例子：

```
id_1 | abc  | dfd  | NULL | ... | def | 
id_2 | abc  | daf  | ghi  | ... | 12a |
id_1 | abc  | xyz  | jkl  | ... | def |
id_4 | aaa  | bbb  | NULL | ... | def |
id_3 | NULL | bbb  | NULL | ... | 123 |
id_5 | 1e3  | NULL | NULL | ... | def |
id_3 | aaa  | bbb  | fds  | ... | def |
id_9 | awa  | bbb  | NULL | ... | 910 | 
```

应该变成：

```
id_1 | abc  | dfd  | NULL | ... | def | 
id_2 | abc  | daf  | ghi  | ... | 12a |
id_4 | aaa  | bbb  | NULL | ... | def |
id_3 | NULL | bbb  | NULL | ... | 123 |
id_5 | 1e3  | NULL | NULL | ... | def |
id_9 | awa  | bbb  | NULL | ... | 910 | 
```

或者这也很好：

```
id_2 | abc  | daf  | ghi  | ... | 12a |
id_1 | abc  | xyz  | jkl  | ... | def |
id_4 | aaa  | bbb  | NULL | ... | def |
id_5 | 1e3  | NULL | NULL | ... | def |
id_3 | aaa  | bbb  | fds  | ... | def |
id_9 | awa  | bbb  | NULL | ... | 910 | 
```

完成此操作后，我需要将 unique_is 设置为主键。

请建议最好和准确的方法来做到这一点。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T08:59:04.123

您可以在表中添加唯一索引，忽略所有错误，并让 MySql 为您删除所有重复的行（除了一个）：

```
ALTER IGNORE TABLE your_table ADD UNIQUE INDEX dupidx (unique_id) 
```

但如果你仍然得到一个错误，即使你使用 IGNORE 子句，试试这个：

```
ALTER TABLE your_table ENGINE MyISAM;
ALTER TABLE IGNORE your_table ADD UNIQUE INDEX dupidx (unique_id);
ALTER TABLE your_table ENGINE InnoDB; 
```

如果您只是对显示数据感兴趣，为每个重复的 id 保留一行，您可以使用：

```
SELECT *
FROM your_table
GROUP BY unique_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-30T15:18:12.817

我遇到了这个问题，这对我很有用：

```
CREATE TABLE newtable SELECT * FROM oldtable GROUP BY unique_id; 
```

然后删除旧表，并将新表重命名为旧表名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:32:00.240

尝试这个 ：

```
select unique_id, field01 , field02 , field03 from (table_name) group by unique_id having sum(unique_id)<1 
```

# android - Android：加载图像

> ID：13797522
> 
> 赞同：0
> 
> 时间：2012-12-10T08:43:28.843
> 
> 标签：android

尝试从服务器加载和显示图像。

```
public static Bitmap loadImageByURL(final String url,
        final Context context, final HttpClient httpClient) {
            HttpGet httpget = new HttpGet(url);
            HttpResponse response = httpClient.execute(httpget);
            HttpEntity entity = response.getEntity();
            if (entity != null) {
                data = entity.getContent();
            }
        }
        bitmap = BitmapFactory.decodeStream(data);
    } catch (Exception e) {
        // TODO: handle exception
    }
    return bitmap;
} 
```

但位图始终为空！！！我做错了什么？URL 很好，它可以在浏览器和 iOS 上运行。

编辑1：

当我在浏览器中打开 url 时，它向我显示了类似的内容：

```
/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAYEBQYFBAYGBQYHBwYIChAKCgkJChQO DwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSgBBwcHCggK EwoKEygaFhooKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgo KCgoKCgoKCgoKP/AABEIAZABLAMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAA AAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQci cRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElK U1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeo qaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5 +gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncA AQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYn 
```

那是什么 ？)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:02:28.317

首先，创建与 net 的连接。

```
InputStream iStream=null;

URL imgUrl = new URL(strImageURL);
//strImageUR   image url you want to download. 

URLConnection urlCon = imgUrl.openConnection();
iStream = urlCon.getInputStream();
BufferedInputStream bis = new BufferedInputStream(iStream,128);
ByteArrayBuffer baf = new ByteArrayBuffer(128);
int current = 0;

while ((current = bis.read()) != -1) 
{
    baf.append((byte) current);
}
Bitmap bitmap=BitmapFactory.decodeByteArray(
  baf.toByteArray(), 
  0, 
  baf.toByteArray().length()); 
```

这应该有效。

# c# - 这是参考还是价值？

> ID：13797527
> 
> 赞同：1
> 
> 时间：2012-12-10T08:44:01.653
> 
> 标签：c#, pass-by-reference

我几乎没有编写 C# 代码的经验，但我想为我的一些代码制作一个强大的 Windows GUI。我想知道下面的代码是按值传递还是按引用传递。特别是如果`bytes[]`在传递给神秘之前被复制？我需要在 extern 中有一个明确的 ref 语句吗？

```
 [DllImport("unSHA.dll", CallingConvention = CallingConvention.Cdecl)]
 private static extern void time(byte[] bytes); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T08:49:54.667

参数总是按值传递，除非您使用`ref`or`out`关键字。

数组是一种引用类型，因此传递的值是对数组的引用的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:46:45.990

bytes 参数通过引用传递，这对于 .NET 中的所有数组类型都是如此。

# java - 移动谷歌地图会导致错误？

> ID：13797528
> 
> 赞同：0
> 
> 时间：2012-12-10T08:44:03.670
> 
> 标签：java, android, multithreading, google-maps, android-layout

以下是问题的摘要：

我有一个名为 BusLocator 的类，它跟踪公共汽车的位置。现在我正在从一个文本文件中获取我的输入。

程序开始时很好，然后当公共汽车到达屏幕的尽头，或者当我试图看别的东西时，它会随机停止。

这是我的错误：

```
12-10 08:28:43.014: E/AndroidRuntime(15257): FATAL EXCEPTION: main
12-10 08:28:43.014: E/AndroidRuntime(15257): java.util.ConcurrentModificationException
12-10 08:28:43.014: E/AndroidRuntime(15257):    at java.util.ArrayList$ArrayListIterator.next(ArrayList.java:569)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at com.google.android.maps.OverlayBundle.draw(OverlayBundle.java:41)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at com.google.android.maps.MapView.onDraw(MapView.java:532)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.View.draw(View.java:13707)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.View.draw(View.java:13591)
 12-10 08:28:43.014: E/AndroidRuntime(15257):   at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.View.draw(View.java:13589)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.View.draw(View.java:13710)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.widget.FrameLayout.draw(FrameLayout.java:467)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.View.draw(View.java:13591)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.View.draw(View.java:13589)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewGroup.drawChild(ViewGroup.java:2928)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at  android.view.ViewGroup.dispatchDraw(ViewGroup.java:2797)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.View.draw(View.java:13710)
 12-10 08:28:43.014: E/AndroidRuntime(15257):   at android.widget.FrameLayout.draw(FrameLayout.java:467)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at  com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2211)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewRootImpl.drawSoftware(ViewRootImpl.java:2281)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewRootImpl.draw(ViewRootImpl.java:2177)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewRootImpl.performDraw(ViewRootImpl.java:2045)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1854)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at  android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at    android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.Choreographer.doCallbacks(Choreographer.java:562)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.Choreographer.doFrame(Choreographer.java:532)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.os.Handler.handleCallback(Handler.java:725)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at android.os.Looper.loop(Looper.java:137)
 12-10 08:28:43.014: E/AndroidRuntime(15257):   at    android.app.ActivityThread.main(ActivityThread.java:5039)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at java.lang.reflect.Method.invokeNative(Native Method)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at java.lang.reflect.Method.invoke(Method.java:511)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-10 08:28:43.014: E/AndroidRuntime(15257):    at dalvik.system.NativeStart.main(Native Method)
12-10 08:28:45.464: D/dalvikvm(15257): GC_CONCURRENT freed 1479K, 21% free 6387K/7988K, paused 18ms+214ms, total 568ms
12-10 08:28:46.034: I/Process(15257): Sending signal. PID: 15257 SIG: 9 
```

读取总线坐标的代码在单独的线程上运行，如下所示：

```
 class BusThread extends Thread {
private boolean run = true;
private Context context;
    BusLocator bus;

public BusThread(Context context,BusLocator bl) {
    this.context = context;
    this.bus=bl;
}

public void negateRun() {
    run = false;
}

public void run() {
    try {
        AssetManager am = context.getAssets();
        InputStream is = am.open("test.txt");
        Scanner scan = new Scanner(is);
        double longitude;
        double latitude;
        while (run) {
            if (scan.hasNext()) {
                latitude = scan.nextDouble();
                longitude = scan.nextDouble();
                bus.updateBusLoc(longitude,latitude);
                //Pause for 2 seconds
                Thread.sleep(2000);
            }
            else
                scan.reset();
        }

    } catch (IOException ioe) {

        ioe.printStackTrace();
        return;
    } catch (InterruptedException ie) {
        // TODO Auto-generated catch block
        ie.printStackTrace();
        return;
    }
}

} 
```

最后，我的错误可能来自哪里，虽然我不知道为什么：

```
public void updateBusLoc(double longi,double lati){
    if(!onScreen){
        onScreen=true;
        GeoPoint point = new GeoPoint((int)(lati*1E6),(int)(longi*1E6));
    busOverlay.addOverlay(new OverlayItem(point, busTitle, busText));
    mapView.getOverlays().add(busOverlay);
    }
    else
    {
        GeoPoint point = new GeoPoint((int)(lati*1E6),(int)(longi*1E6));
        busOverlay.replaceLastOverlay(new OverlayItem(point,busTitle, busText));
        mapView.getOverlays().add(busOverlay);
    }
    mapView.refreshDrawableState();
} 
```

我变得非常绝望......现在看了几个小时。非常感激任何的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:56:58.980

从`java.util.ConcurrentModificationException`异常中可以清楚地看出，在一个线程中，您的程序正在修改`ArrayList`（即您正在添加 new `Overlay`），而同一列表正在由一个单独的线程迭代（即调用`mapView.refreshDrawableState()`以强制 View 重新绘制，这反过来又遍历添加的覆盖列表）- 根据 Java 文档，这是不允许的，参考：[ConcurrentModificationException](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ConcurrentModificationException.html)

所以你可以尝试以这样的方式重写你的代码，首先添加所有可用的覆盖，然后调用`mapView.refreshDrawableState()`

# css - CSS 模拟元素移动

> ID：13797541
> 
> 赞同：0
> 
> 时间：2012-12-10T08:44:48.160
> 
> 标签：css, responsive-design, css-float

我有一个带有两个侧边栏和中间内容的网站。在 HTML 中它被定位为：

```
sidebar 1 - floated left
middle content - floated left
sidebar 2 - floated right 
```

这也是它在网站上的外观。都好。问题是我试图让网站响应，我希望内容位于顶部，侧边栏跳到下方，我不完全确定如何做到这一点。我可以使用 javascript，但如果可能的话，我更喜欢 CSS 来做。

如果有帮助，这是我正在开发的网站：

[网址不再允许]

将窗口向下挤压一点，然后观察左侧边栏出现在内容上方 - 不好。

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:12:05.213

重新排序您的 div，以便首先显示正文内容 div。然后将第一个侧边栏和正文内容包装在一个 div 中，将正文内容向右浮动。使用媒体查询，以便在缩小到移动尺寸后将浮动设置为无

```
<div float:left>
  <main-content float:right>
  <sidebar float:left>
<\div>
<sidebar float:right> 
```

# flash - 无法在 flex 中使用 alivePdf 打印特殊符号/字符

> ID：13797544
> 
> 赞同：1
> 
> 时间：2012-12-10T08:44:53.103
> 
> 标签：flash, apache-flex, alivepdf

我正在使用alivePdf 在flex 中生成pdf。我们如何在 flex 中使用 live pdf 打印 Delta (Δ) 符号？我可以打印°C，但 Δ 符号不起作用...

# mysql - mysql 兰德（）限制

> ID：13797553
> 
> 赞同：6
> 
> 时间：2012-12-10T08:45:54.307
> 
> 标签：mysql

您好，我有一个这样的查询：

```
 SELECT otel_id 
        FROM YAZILIM_menu_icerik 
        WHERE YAZILIM_menu_icerik.menu_id = 39 
        AND otel_id IN (
                        SELECT otel_id 
                        FROM YAZILIM_menu_icerik 
                        WHERE menu_id =$id 
                        ORDER BY RAND()
                        ) 
        LIMIT 0,20 
```

它应该在每次工作时随机显示 20 家酒店，但相反，我每次都会得到相同的 20 家酒店。长话短说`RAND()`似乎不起作用，我似乎找不到任何逻辑错误。

编辑：问题解决了。Mysql 看不到内部 RAND() 所以这是正确的方法：

```
SELECT otel_id 
    FROM YAZILIM_menu_icerik 
    WHERE YAZILIM_menu_icerik.menu_id = 39 
    AND otel_id IN (
                    SELECT otel_id 
                    FROM YAZILIM_menu_icerik 
                    WHERE menu_id =$id 
                   )
ORDER BY RAND() 
LIMIT 0,20 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T08:51:07.973

您的 ORDER BY 和 LIMIT 子句应该放在一起：

```
SELECT otel_id 
FROM YAZILIM_menu_icerik 
WHERE YAZILIM_menu_icerik.menu_id = 39
AND otel_id IN 
(
    SELECT otel_id 
    FROM YAZILIM_menu_icerik 
    WHERE menu_id = $id 
)
ORDER BY RAND()
LIMIT 20 
```

`ORDER BY`在没有子句的子查询中使用bare 是没有意义的，`LIMIT`因为排序不一定保留在外部查询的结果中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-26T04:36:30.333

ORDER BY RAND() 是不好的解决方案。您的索引将被忽略。数据量大的情况尤其困难。

如果您在 id 上有主键，则可以选择：

```
 SELECT b1.* FROM Bugs AS b1 JOIN 
(SELECT CEIL( RAND()* (SELECT MAX(id) FROM Bugs)) AS id) AS b2 
 WHERE b1.id >= b2.id ORDER BY b1.id LIMIT 1 
```

# sql-server - 复制本地 SQL Server 数据库（不在 Azure 上）

> ID：13797556
> 
> 赞同：1
> 
> 时间：2012-12-10T08:45:58.307
> 
> 标签：sql-server, tsql, azure-sql-database, sql-server-2012

为了定期备份我的 SQL Azure 数据库，我一直在使用简单的 tSQL 语句

```
CREATE DATABASE FiveModes10_12_12 AS COPY OF FiveModes 
```

但是对于这个项目（分析一些实验结果），我的数据库是本地 SQL Server 2012 数据库，我无法运行该语句（我收到错误消息`Incorrect syntax near 'COPY'`）。查看[SQL Server 2012 命令](http://msdn.microsoft.com/en-us/library/ms176061.aspx)[的文档，`CREATE DATABASE`](http://msdn.microsoft.com/en-us/library/ms176061.aspx)没有`AS COPY OF`选项。什么是最简单的替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:07:13.887

对于长期存在的副本，请改为使用数据库备份：

```
backup database FiveModes to disk = 'path to .bak file' with init, copy_only; 
```

您可以在需要时恢复它：

```
restore database FiveMode from disk = 'path to .bak file'; 
```

您甚至可以将备份还原为新数据库，但您需要在还原期间移动 MDF/LDF 文件的位置：

```
restore database FiveMode_12_12 from disk = 'path to .bak file'
   with move 'FiveMode' to '<path to place the new copy of MDF>',
   move 'FiveMode_log' to '<path to place the new copy of LDF>' 
```

如果您只需要短期副本（例如，创建副本、做一些实验、恢复到副本），您可以使用数据库快照，但它需要企业许可证。请参阅[数据库快照](http://msdn.microsoft.com/en-us/library/ms175158.aspx)：

```
create database FiveModes10_12_12  on
  (Name = 'FiveMode', FileName = '<path to MDF snapshot file>')
as snapshot of FiveModes; 
```

但请注意，快照与 Azure 副本完全不同，长时间保留它们是非常不利的。对于长时间副本，请使用备份。

# javascript - 如何在本地网络上使用 Google Cloud Messaging

> ID：13797559
> 
> 赞同：2
> 
> 时间：2012-12-10T08:46:11.630
> 
> 标签：javascript, cordova, google-cloud-messaging

我想在本地网络上使用 gcm 推送通知服务。

例如：

我有一个使用 PhoneGap 和 Phonegap GCM 插件[Phonegap GCM 插件](https://github.com/marknutter/GCM-Cordova)和**本地**Jetty Web 服务的移动应用程序。

GCM的标准用法是：

在 Internet GCM 上注册设备 -> 将设备的注册 ID 返回到设备 -> 将 registerid 发送到自己的 Web 服务 -> Web 服务将带有注册 ID（设备 ID）的消息发送到 gcm Internet -> gcm 将消息发送到设备对吗？！！

就我而言，我需要完整的本地使用：

我将在**本地**GCM 上注册设备 -> 将注册 ID 返回到设备 -> 将 registerid 发送到自己的**本地**web 服务 -> 本地 web 服务将带有 registerid 的消息发送到**本地**gcm ->**本地**gcm 将消息发送到设备

有没有办法在我的本地网络服务上集成“gcm”？

# visual-c++ - 如何解释应用程序验证程序日志

> ID：13797561
> 
> 赞同：0
> 
> 时间：2012-12-10T08:46:32.013
> 
> 标签：visual-c++, windows-ce

应用程序验证程序代码 `enter code here`：潜在泄漏。1 个项目（1000 字节）在 0x2f356b78 (nk.exe:80077408) 调用堆栈：(nk.exe:80077408) 泄漏项目：(nk.exe:80077408) 0x001d3860 1000 字节，线程：0x769eabe6，检查点 0 (nk.exe:80077408) ) 总计：1000 字节

```
 Above is the Application verifier log for an application.How to interpret it?
  WHat is the difference between 0x2f356b78
  and  0x001d3860. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T20:38:48.580

Those values are addresses. They indicate where the leak occurred. The easiest way to translate those values in to something useful is to point App Verifier to the PDB file for your application.

This article describes how to use App Verifier: [http://msdn.microsoft.com/en-us/library/aa446904.aspx](http://msdn.microsoft.com/en-us/library/aa446904.aspx)

# java - 调用方法时出现空指针异常

> ID：13797567
> 
> 赞同：1
> 
> 时间：2012-12-10T08:46:46.570
> 
> 标签：java, class, arraylist, resultset

当我调用我的两个方法时，我得到一个空指针异常。我不知道，为什么我得到它。当我检查代码时，它似乎是正确的

这是我的 HentbestillingsordreHandler 类

```
public class HentbestillingsordreHandler extends JPanel{

private Connection con = null;
private ResultSet rs = null;
private HentbestillingsordreRegistrer ho;
private ArrayList<HentbestillingsordreRegistrer> hbor = new ArrayList<HentbestillingsordreRegistrer>();

HentbestillingsordreHandler() {

}

public void Hentbestillingsordre(){
    KaldSQL ks = new KaldSQL();
    try {
        con = ks.connectNow();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ResultSet rs = ks.Hentalleordreliste(con);
    try {
        while(rs.next()){
            String status = "";
            if(rs.getInt("BestillingsStatus") == 1){
                status = "Leveret";
            }else{
                status = "Ikke Leveret";
            }
            System.out.println(status);
            HentbestillingsordreRegistrer ho = new HentbestillingsordreRegistrer(
                    rs.getInt("BestillingsID"),
                    rs.getString("BestillingsStatus"),
                    rs.getInt("ModtagetAf"),
                    rs.getInt("Vare"),
                    rs.getInt("Antal"));

                    hbor.add(ho);
                    System.out.println(ho);

        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    try {
        rs.close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}   
public void printBestillingsordre(){

        for(HentbestillingsordreRegistrer hentbestillingsordreRegistrer: hbor){
        String temp = "";
        temp += ho.getLeverandoerID()+" \n";
        System.out.println(temp);
    }

} 
```

}

我的 kaldsql

```
public ResultSet Hentalleordreliste(Connection con){

    ResultSet Hentalleordreliste = null;

    try {
        PreparedStatement statement = con.prepareStatement("select varebestillinger.BestillingsID, " +
                "varebestillinger.LeverandoerID, "+
                "varebestillinger.BestillingsStatus, varebestillinger.ModtagetAf, "+
                "varebestillingsliste.Vare, " +
                "varebestillingsliste.Antal from varebestillinger left outer join " +
                "varebestillingsliste on  ListeID = BestillingsID");
                ResultSet result = statement.executeQuery();
                Hentalleordreliste = result;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return Hentalleordreliste;

} 
```

这是我的班级 HentbestillingsordreRegistrer

```
int LeverandoerID;
String BestillingsStatus;
int ModtagetAf;
int Vare;
int Antal;

public HentbestillingsordreRegistrer(int LeverandoerID, String BestillingsStatus, int ModtagetAf,int Vare,int Antal){
    this.LeverandoerID = LeverandoerID;
    this.BestillingsStatus = BestillingsStatus;
    this.ModtagetAf = ModtagetAf;
    this.Antal = Antal;
}

public int getLeverandoerID() {
    return LeverandoerID;
}

public void setLeverandoerID(int leverandoerID) {
    LeverandoerID = leverandoerID;
}

public String getBestillingsStatus() {
    return BestillingsStatus;
}

public void setBestillingsStatus(String bestillingsStatus) {
    BestillingsStatus = bestillingsStatus;
}

public int getModtagetAf() {
    return ModtagetAf;
}

public void setModtagetAf(int modtagetAf) {
    ModtagetAf = modtagetAf;
}

public int getVare() {
    return Vare;
}

public void setVare(int vare) {
    Vare = vare;
}

public int getAntal() {
    return Antal;
}

public void setAntal(int antal) {
    Antal = antal;
} 
```

当我调用它时，我输入这个

```
 HentbestillingsordreHandler hboh = null;
hboh.Hentbestillingsordre();
hboh.printBestillingsordre(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T08:48:45.477

不要使用

```
HentbestillingsordreHandler hboh = null; 
```

相反，尝试

```
HentbestillingsordreHandler hboh = new HentbestillingsordreHandler(); 
```

当您调用 时`new HentbestillingsordreHandler()`，您正在创建一个新`HentbestillingsordreHandler`对象，该对象将存储在计算机内存中的某个位置；然后，您告诉`hboh`指向要在访问时使用的特定内存`hboh`。

然而，第一个语句只是指向`hboh`计算机内存中一个无用（且无法访问）的点。所以在运行时，当你尝试访问时`hboh`，你会得到一个空指针异常，因为变量`hboh`是“指向”不存在的一块内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:51:49.143

您正在声明方法的名称以及其中具有相同名称的变量::

```
public ResultSet Hentalleordreliste(Connection con){
ResultSet result = null;

    try {
        PreparedStatement statement = con.prepareStatement("select varebestillinger.BestillingsID, " +
                "varebestillinger.LeverandoerID, "+
                "varebestillinger.BestillingsStatus, varebestillinger.ModtagetAf, "+
                "varebestillingsliste.Vare, " +
                "varebestillingsliste.Antal from varebestillinger left outer join " +
                "varebestillingsliste on  ListeID = BestillingsID");
                result = statement.executeQuery();

    } catch (Exception e) {
        e.printStackTrace();
    }
    return result;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:53:49.517

例如，与 Objective-C 相比，Java 不允许对空引用进行方法调用。因此，一般来说，您必须在尝试对其调用方法之前使用对象实例初始化您的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T08:57:59.157

NullPointerExceptions 通常很容易弄清楚。在堆栈跟踪中，您可以获得发生异常的类和行号。在您的情况下，它应该是 line `hboh.Hentbestillingsordre()`。使用该信息，您可以检查将值分配给变量的位置。你的任务是`HentbestillingsordreHandler hboh = null`。由于您不能对`null`您进行任何方法调用，因此会出现异常。

在某些情况下，您不需要该方法的对象的任何属性。在这种情况下，您可以制作方法`static`。您可以使用 then 调用它`HentbestillingsordreHandler.Hentbestillingsordre()`，而无需该类的实例。

# visual-studio-2012 - Windows Phone 8 的 Visual Studio 2012 Express 中缺少应用栏模板

> ID：13797568
> 
> 赞同：0
> 
> 时间：2012-12-10T08:46:56.623
> 
> 标签：visual-studio-2012, windows-phone, windows-phone-8, application-bar

根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394040%28v=vs.105%29.aspx)，在每个为 Windows Phone 项目生成的 Xaml 文件中都应该有一个应用程序栏模板：

> 找到默认添加到您的页面的示例应用程序栏元素。如下所示。

我在 Visual Studio 2012 中创建了一个新的空 Windows Phone 8 项目，但我缺少为 Windows Phone 7 开发时可见的 App Bar 模板。这只是停用还是我需要复制和粘贴代码片段在我开发 Windows Phone 8 项目时创建应用栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:06:09.037

除了像这样将 XAML 代码复制并粘贴到我的 WP8 项目中之外，我没有找到其他解决方案（代码取自[此页面](http://programming4.us/mobile/2330.aspx)）：

```
<phone:PhoneApplicationPage.ApplicationBar>
<shell:ApplicationBar Opacity="1" IsVisible="True" IsMenuEnabled="True">
            <shell:ApplicationBar.Buttons>
               <shell:ApplicationBarIconButton IconUri="/Images/appbar.add.rest.png"
Text="add">
               </shell:ApplicationBarIconButton>          

<shell:ApplicationBarIconButton IconUri="/Images/appbar.save.rest.png"
Text="save">
               </shell:ApplicationBarIconButton>
               <shell:ApplicationBarIconButton IconUri="/Images/appbar.delete.rest.png"
Text="delete">
               </shell:ApplicationBarIconButton>
            </shell:ApplicationBar.Buttons>
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="Menu Item 1" IsEnabled="True">
                </shell:ApplicationBarMenuItem>
                <shell:ApplicationBarMenuItem Text="Menu Item 2" IsEnabled="True">
                </shell:ApplicationBarMenuItem>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

微软似乎鼓励用户[使用可本地化的 ApplicationBar 。](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff637520%28v=vs.105%29.aspx#BKMK_LocalizinganApplicationBar)

# c# - 如何安装起订量框架

> ID：13797572
> 
> 赞同：18
> 
> 时间：2012-12-10T08:47:02.750
> 
> 标签：c#, unit-testing, frameworks, moq

我计划使用 Moq 在我创建的单元测试代码中模拟一些接口。我已经下载了最新版本的 Moq。

我的问题是如何安装它？我应该将 Moq.dll 放在哪里？

我试过在互联网上搜索，但我能找到的只是如何使用 Moq 的示例，而不是如何*安装*它。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-10T09:01:12.453

添加对 Moq 框架的引用的最佳方法是从[Nuget](http://nuget.org/packages/moq)安装它。此外，您仍然可以[下载](http://code.google.com/p/moq/downloads/list)Moq.dll 并添加对这个库的引用（通常我`libs`在解决方案文件夹下创建文件夹，我将所有第三方库都放在其中，这不是通过 Nuget 提供的）。

*顺便说一句*，从 Nuget 安装包的另一个选项 - 右键单击​​项目引用并选择`Manage Nuget packages...`. 然后在线搜索 Moq 并安装它。了解[为什么使用 Nuget 而不是直接在我的机器上安装库](https://stackoverflow.com/questions/9784186/why-use-nuget-over-installing-libraries-directly-on-my-machine)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-10T08:59:31.520

没有必要*安装*它。只需在项目中添加对 moq.dll 的引用。

但当然，您可以使用`gacutil`在全局程序集缓存中注册库。

> c:\path> gacutil /i Moq.dll

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-01-14T11:12:33.270

使用 Visual Studio 时：

1.  右键单击**引用**[它在项目资源管理器中]
2.  管理 NuGet 包
3.  搜索起订量并将其添加到您的解决方案中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-23T10:04:09.827

这是一个老问题，但这里没有列出我使用的方便方法，这是谷歌上的第一个结果。我正在使用 VS 2013，如果我在 Extensions and Updates 中搜索 Moq，则没有结果，所以：

1.  转到包管理器控制台-（工具->库包管理器）
2.  将默认项目更改为您的测试项目
3.  然后输入：`install-package moq`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-24T00:17:18.827

对于 .NET Core，使用 dotnet CLI -`dotnet add package Moq`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-10T08:58:10.057

你不需要安装它。

您当然可以使用 NuGet（如果您使用较新版本的 VS），但您可以将其复制到您的项目文件夹（或者最好是`lib`项目文件夹的子目录）并添加对它的引用。

编辑：

你似乎有错误版本的问题。在您下载的 moq zip 存档中，有多个文件夹。您需要使用一个 from 文件夹`Net35`，而不是一个 from `Net40`。这些数字是指目标 .NET 框架的版本，而不是 Moq 本身的版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-09T21:54:13.157

如果您使用的是较新版本的 Visual Studio (2013+)，则可以使用包管理器控制台。

工具 > Nuget 包资源管理器 > 包管理器控制台

执行：

安装包最小起订量-版本 4.5.16

另见： [https ://www.nuget.org/packages/Moq/](https://www.nuget.org/packages/Moq/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-21T16:13:14.493

使用 Visual Studio 时

1.  在解决方案资源管理器中右键单击测试项目
2.  管理 NuGet 包...
3.  **将包源更改为全部**
4.  浏览起订量
5.  安装

# java - PBEWITHSHA256AND128BITAES-CBC-BC 的填充是什么

> ID：13797573
> 
> 赞同：0
> 
> 时间：2012-12-10T08:47:10.663
> 
> 标签：java, aes, bouncycastle, jasypt

PBEWITHSHA256AND128BITAES-CBC-BC（充气城堡）的填充是什么

对不起，信息很少，让我详细说明这个问题的更多背景。有两个系统。一个是 java ( **A** )，另一个是 PHP ( **B** )。现在我们需要将字符串/文本从系统 A 发送到 B。字符串/文本的内容通过 AES 使用`jasypt`. 但我无法使用`mcrypt`. 我怀疑这可能是由于 A 和 B 使用了不同的 AES 参数，所以我尝试找出系统 A 如何加密字符串/文本。我发现的信息如下所示，除了**padding**，

jasypt（java简单加密）/PBEWITHSHA256AND128BITAES-CBC-BC

密码：AES

长度：128位

加密方式：CBC

JCE 供应商：充气城堡

盐：FixedStringSaltGenerator

迭代次数：2

填充：**????**

***预先感谢！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:32:55.220

这实际上取决于`Cipher`您用于加密的实际实例，因此您的问题没有多大意义（正如@Buhake Sindi 指出的那样）。

无论如何，使用 PKCS#5 并不少见，如

```
Cipher.getInstance( "AES/CBC/PKCS5Padding" ) 
```

关键是：*您*决定填充模式（提供者当然必须实现它）。

查看[BouncyCastle 规范](http://www.bouncycastle.org/specifications.html)- 从第 4.2 节中应该清楚哪些填充模式可以与哪些密码一起使用。同样，默认值为 PKCS#5/#7。

干杯，

# c# - 错误使用 SendOrPostCallback 变量（委托（对象状态））给了我 WCF 异常：“服务器没有提供有意义的回复”？

> ID：13797579
> 
> 赞同：1
> 
> 时间：2012-12-10T08:47:32.387
> 
> 标签：c#, wcf, callback, wcfserviceclient

我是 WCF 的新手。我目前正在开发一个项目，我在此处发布的最后一个问题中进行了解释-->[如何在 c# 中实现对另一台服务器的回调](https://stackoverflow.com/questions/13716391/how-can-i-implement-callbacks-to-another-server-in-c-sharp)

我正在尝试用一个例子来研究回调。它使用控制台应用程序来托管服务，并使用 Windows 窗体来托管客户端。我必须使用控制台应用程序而不是 Windows 窗体运行我的服务器 B。当我单独运行该服务时，一切都很好。但是当我运行我的服务器 B（客户端）时，显示了一个错误：

“服务器没有提供有意义的回复；这可能是由于合同不匹配、会话过早关闭或内部服务器错误造成的。”

它在我的 serverB(client) 代码中指向此代码：

```
public void NotifySubscribe(string subscriberName)
    {
        SendOrPostCallback callback =
           delegate (object state)
           {
               Console.WriteLine(String.Format("{0} has subscribe to service", state.ToString()));
               Console.WriteLine(subscriberName);
               Console.Read();
           };
        _uiSyncContext.Post(callback, subscriberName);
    } 
```

几乎从我的一个例子中模仿了一切。这是上面代码的原始代码：

```
public void NotifyGuestJoinedParty(string guestName)
    {
        // The UI thread won't be handling the callback, but it is the only one allowed to update the controls.  
        // So, we will dispatch the UI update back to the UI sync context.
        SendOrPostCallback callback = 
            delegate (object state)
            { this.WritePartyLogMessage(String.Format("{0} has joined the party.", state.ToString())); };

        _uiSyncContext.Post(callback, guestName);
    }

private void WritePartyLogMessage(string message)
    {
        string format = this.txtPartyLog.Text.Length > 0 ? "{0}\r\n{1} {2}" : "{0}{1} {2}";
        this.txtPartyLog.Text = String.Format(format, this.txtPartyLog.Text, DateTime.Now.ToShortTimeString(), message);
        this.txtPartyLog.SelectionStart = this.txtPartyLog.Text.Length - 1;
        this.txtPartyLog.ScrollToCaret();
    } 
```

因为我在我的项目中使用控制台应用程序，而不是将它放在文本框中，我使用 Console.writeline(); 编写它。我不知道它是否与代码中的委托（对象状态）有关。请回复。我不知道如何修复错误。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:48:19.327

我也是 WCF 的新手。

我相信您无法在使用双工服务的控制台应用程序中执行此类操作。这个问题是 5 个月前提出的，所以我想你已经找到了你想要的答案。如果我错了，请纠正我。我会很感激的。

# jsp - onChange() 无法正常工作

> ID：13797582
> 
> 赞同：1
> 
> 时间：2012-12-10T08:47:49.300
> 
> 标签：jsp

在下面的 jsp 中，当我更改下拉列表时，值不会被清除。请帮帮我。但是另一个函数（Enable()）工作正常。任何人都可以让我知道我哪里出错了。

```
<%@ page contentType="text/html; charset=utf-8" language="java" import="java.sql.*" errorPage="" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Untitled Document</title>
<script type="text/javascript">
    document.getElementById("Comp_Text").value=document.getElementById("tgt1").value;
    function Enable(){
        if(document.getElementById("abcd").value=="DAIS")
            {
                    document.getElementById("c1").disabled=true;
                    document.getElementById("c2").disabled=true;
                    document.getElementById("c3").disabled=true;
                    document.getElementById("c4").disabled=true;
                    document.getElementById("c5").disabled=true;
                    document.getElementById("c6").disabled=true;
                    document.getElementById("c1").value='0';
                    document.getElementById("c2").value='0';
                    document.getElementById("c3").value='0';
                    document.getElementById("c4").vaue='0';
                    document.getElementById("c5").value='0';
                    document.getElementById("c6").value='0';
                    document.getElementById("tot1").readOnly=false;
            }
            else
                {
                    document.getElementById("c1").disabled=false;
                    document.getElementById("c2").disabled=false;
                    document.getElementById("c3").disabled=false;
                    document.getElementById("c4").disabled=false;
                    document.getElementById("c5").disabled=false;
                    document.getElementById("c6").disabled=false;
                    document.getElementById("tot1").readOnly=true;
                }

    }
    function Sum()
    {
        var int1=document.getElementById("c1").value;
        var int2=document.getElementById("c2").value;
        var int3=document.getElementById("c3").value;
        var int4=document.getElementById("c4").value;
        var int5=document.getElementById("c5").value;
        var int6=document.getElementById("c6").value;
        document.getElementById("tot1").value=parseInt(int1)+parseInt(int2)+parseInt(int3)+parseInt(int4)+parseInt(int5)+parseInt(int6); 
    }
    function clear(){
                    document.getElementById("c1").value='';
                    document.getElementById("c2").value='';
                    document.getElementById("c3").value='';
                    document.getElementById("c4").vaue='';
                    document.getElementById("c5").value='';
                    document.getElementById("c6").value='';
    }

</script>
</head>

    <body>
<form id="form1" name="form1" method="post" action="UpdateCounts_DB.jsp">
    <input type="text" name="Comp_Text" id="Comp_Text" value="<%=(String)request.getParameter("tgt1")%>" size="100" style="border: 0"/>
    <table width="420" cellspacing="3"> <tr><td width="37">Types</td>
  &nbsp;
  &nbsp;
  &nbsp;
  <td width="127">
      <select name="abcd" id="abcd" onchange="Enable();clear()" >
          <!--<optgroup label="a">-->
          <option value="">Select the Type</option>
          <option value="Updates">Updates</option>  
          <option value="Multibases">Multibases</option>
          <option value="DAIS">DAIS</option>
          <option value="Acds">Admin Codes</option>
          <option value="Legis">Legis</option>
          <option value="LegAll">Legis-All</option>
          <option value="Ins">Ins And Reg</option><!--</optgroup>--></select></td>
          <td width="236"> <font size="-1" color="#0033CC"> Select your Update Type From the Drop Down</font>
          </td> </tr></table>
  <p>
    <label for="DB Count">DB Count</label>&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="text" name="DB_Count" id="DB_Count" style="width:30px" value="<%String abc=(String)request.getAttribute("abc");%>"/>
  </p>
    <font size="5" color="#0033CC">Fill all the below fields, enter Zero if there are no changes in a section</font>
  <table width="312" border="0">
    <tr>
      <td width="156"><label>
      Summary</label></td>
      <td><label for="c1"></label>
          <input type="text" name="c1" id="c1" style="width:30%" onchange="Sum();"/></td>
    </tr>
    <tr>
      <td><label>
    Contents</label></td>
        <td><input type="text" name="c2" id="c2" style="width:30%" onchange="Sum()"/></td>
    </tr>
    <tr>
      <td><label>
    Citation Formats</label></td>
        <td><input type="text" name="c3" id="c3" style="width:30%" onchange="Sum()"/></td>
    </tr>
    <tr>
      <td><label>
      Searching and Fields</label></td>
        <td><input type="text" name="c4" id="c4" style="width:30%"  onchange="Sum()" /></td>
    </tr>
    <tr>
      <td><label>
    Related Research</label></td>
        <td><input type="text" name="c5" id="c5" style="width:30%" onchange="Sum()"/></td>
    </tr>
    <tr>
      <td><label>
    Legal Notices</label></td>
        <td><input type="text" name="c6" id="c6"  style="width:30%" onchange="Sum()"/></td>
    </tr>
    <tr><td>Update Count</td><td>
            <input type="text" name="tot1" id="tot1" style="width:30%" readonly="readonly"/></td></tr>
    </table>
  <p>
    <input type="submit" name="Enter" id="Enter" value="Submit" />
      </p>
</form>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:30:40.447

尝试给该`clear()`函数起一个不同的名称，例如 say`clearValues()`或`clearFields()`：

```
function clearFields(){ // name changed

    document.getElementById("c1").value='';
    document.getElementById("c2").value='';
    document.getElementById("c3").value='';
    document.getElementById("c4").vaue='';
    document.getElementById("c5").value='';
    document.getElementById("c6").value='';
} 
```

`clear()`这可能是由于浏览器使用的事实。`clear`虽然我在 javascript 关键字中找不到任何参考，但请接受[这个](http://help.dottoro.com/ljgwnrft.php)。

此外，您可能会发现此[答案](https://stackoverflow.com/q/7165570/468763 "“clear”是 Javascript 中的保留字吗？")很有帮助，因为它与javascript 中保留字的使用有关，也与保留字[有关](https://stackoverflow.com/q/26255/468763 "Reserved Keywords in Javascript")`clear`。

# php - 日期间隔可以返回负零或正零如何在结果上设置条件语句

> ID：13797583
> 
> 赞同：2
> 
> 时间：2012-12-10T08:47:51.610
> 
> 标签：php, datetime, dateinterval

假设[$interval](http://php.net/manual/en/datetime.diff.php)是[DateInterval](http://php.net/dateinterval)对象，则无论周年纪念日是在当前日期 = 0 之前的 1 年内还是周年纪念日是在当前日期 = -0 之后的 1 年内，条件语句都为真。

```
$interval = $anniversary->diff($current_Date);
if ($interval->format('%r%y') < 0){
    do something
} 
```

*   我不能使用 abs 因为它们都是 0
*   我不能使用 <= 0 因为它们都是
*   我不能使用 >= 0 因为这在我不想要的其他情况下设置为 true
*   我不能使用 < 0 因为 0 不是，我希望 0 为真
*   我不能使用 == 0 因为两者都是真的
*   我不能使用 > 0 因为 0 不是，我希望 0 为真

所以我想能够说这个数字是否为负数，但据我所知不存在这样的事情。有什么想法吗？

** 编辑 **

解决方案是比较日期对象并确定它们是否在适当的 DateInterval 中：

```
if ($anniversary < $current_Date && $interval->format('%r%y') == 0){ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:41:13.650

由于的返回值[`DateTime::diff()`](http://php.net/manual/en/datetime.diff.php)是一个[DateInterval](http://php.net/manual/en/class.dateinterval.php)对象，解决方案是使用[`DateInterval::invert`](http://php.net/manual/en/class.dateinterval.php#dateinterval.props.invert)属性：-

```
$interval = $anniversary->diff($current_Date);
if ($interval->invert){
    //do something
} 
```

引用[手册](http://php.net/manual/en/class.dateinterval.php#dateinterval.props.invert)：-

> 倒置
> 
> 如果间隔表示负时间段，则为 1，否则为 0。请参阅[DateInterval::format()](http://php.net/manual/en/dateinterval.format.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:55:32.387

你应该这样做`%r%d`。你真正需要知道的是它是积极的还是消极的，对吧？然后就是获取天差的数量，看这个数字是小于0还是大于0。之后可以做a`days%365`得到年差，也可以再做一个`%y`

# php - 将 md5-string 添加到图像 URL 值得吗？

> ID：13797584
> 
> 赞同：0
> 
> 时间：2012-12-10T08:47:53.527
> 
> 标签：php, caching, md5, etag, md5-file

我正在通过 PHP 动态生成一个页面。我正在使用站点的输出字符串来生成一个 Etag，并在站点自上次请求以来没有更改时检查它是否发送 304（未修改）。

我现在也在尝试改进我网站上图片的缓存。每个站点上有 6 到 30 张图片（jpg，70 - 200 KB）。如果图片的内容发生了变化，我希望用户重新加载图片。我正在考虑通过向每张图片的 URL 添加一个查询字符串来做到这一点：

`src="'.$files[$x].'?id='.md5_file($files[$x]).'"`

这是不是太复杂了，每个请求都会产生太多的工作量，还是值得？正如我所说：我正在为每个图像生成这些 md5-hash，然后为输出字符串生成一个 md5-hash，以将其用作每个请求的 Etag。

这些是我的图像中的响应标头：

```
HTTP/1.1 304 Not Modified
Date: Mon, 10 Dec 2012 08:56:49 GMT
Server: Apache
Connection: keep-alive, Keep-Alive
Keep-Alive: timeout=1, max=99
ETag: "360f-4d02f5fcfc34f"
Expires: Mon, 07 Jan 2013 08:56:49 GMT
Cache-Control: max-age=2419200, must-revalidate 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:23:01.967

使用基于时间的缓存头意味着客户端在一段时间内根本不会询问服务器文件是否已更新。
使用 Etag 缓存 headers 意味着客户端每次都会询问服务器，但数据不需要每次都传输。

两种方法都有其优点和缺点。对于很少更改的资产，您应该使用基于时间的缓存标头，因为这会占用您服务器的大量负载。要在更新后立即进行更新，向其 URL 添加唯一令牌是个好主意。对于经常更新的资产，使用没有基于时间的缓存标头（或非常短的缓存标头）的 Etags 是一个好主意，因为这意味着它们将在更新后立即更新，同时仍然减轻服务器的负载。通常，您希望对动态网页进行 Etag*并对*图像资产进行时间缓存。

所以，是的，如果让客户端尽快下载更新版本是一个真正的问题，那么将 md5 哈希添加到静态时间缓存资产的 URL 是一个好主意。确保添加这些哈希不会比您节省的开销更多。

# android - 安装错误：Android 2.3.4 上的 INSTALL_FAILED_MISSING_SHARED_LIBRARY

> ID：13797588
> 
> 赞同：0
> 
> 时间：2012-12-10T08:48:22.780
> 
> 标签：android, google-maps

我的安卓是W806，MIUI系统(andrid 2.3.4，可以在

```
http://119.147.150.88/gdown_group321/M00/01/BB/d5OWWE-TiE0AAAAABFRc6HZ-Izc1688998/MIUI_W806_updateEX.zip?k=rscjHEFnZBVxNvfDqVP3Iw&t=1355119512&u=712526008-27587528-bjpdc2a8&s=51200&file=MIUI_W806_updateEX.zip 
```

） 我按照这个例子： http: [//mirnauman.wordpress.com/2012/01/30/using-google-maps-in-android-development-tutorial-part-1/](http://mirnauman.wordpress.com/2012/01/30/using-google-maps-in-android-development-tutorial-part-1/)，我选择了2.3.3的Google API从 SDK 管理器下载。但是我遇到了问题安装错误：`INSTALL_FAILED_MISSING_SHARED_LIBRARY`。

我尝试在 google 和 stackoverflow 中搜索解决方案，但没有人适合我……我有一些 logcat，它是：

```
12-10 16:38:19.820: W/dalvikvm(5906): Unable to resolve superclass of Lcom/example/googlemapapp/GooglemapsActivity; (463)
12-10 16:38:19.820: W/dalvikvm(5906): Link of class 'Lcom/example/googlemapapp/GooglemapsActivity;' failed
12-10 16:38:19.820: D/AndroidRuntime(5906): Shutting down VM
12-10 16:38:19.820: W/dalvikvm(5906): threadid=1: thread exiting with uncaught exception (group=0x4011b560)
12-10 16:38:19.830: E/AndroidRuntime(5906): FATAL EXCEPTION: main
12-10 16:38:19.830: E/AndroidRuntime(5906): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.googlemapapp/com.example.googlemapapp.GooglemapsActivity}: java.lang.ClassNotFoundException: com.example.googlemapapp.GooglemapsActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.googlemapapp-1.apk]
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.os.Looper.loop(Looper.java:130)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.app.ActivityThread.main(ActivityThread.java:3684)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at java.lang.reflect.Method.invokeNative(Native Method)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at java.lang.reflect.Method.invoke(Method.java:507)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at dalvik.system.NativeStart.main(Native Method)
12-10 16:38:19.830: E/AndroidRuntime(5906): Caused by: java.lang.ClassNotFoundException: com.example.googlemapapp.GooglemapsActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.googlemapapp-1.apk]
12-10 16:38:19.830: E/AndroidRuntime(5906):     at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
12-10 16:38:19.830: E/AndroidRuntime(5906):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
12-10 16:38:19.830: E/AndroidRuntime(5906):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:08:07.540

看起来您在 android 项目文件和/或 AndroidManifest.xml 中缺少一些信息？

试着看看我之前对一个有点相似的答案的回答：

[1\. 回答](https://stackoverflow.com/questions/13393327/issues-when-using-a-library-project-in-android/13393472#13393472) [2\. 回答](https://stackoverflow.com/questions/11579425/error-when-calling-pure-java-code-separate-project-from-android-in-eclipse/11579711#11579711)

# jquery - Jquery 不显眼的验证工作非常慢 ASP.Net MVC3

> ID：13797589
> 
> 赞同：8
> 
> 时间：2012-12-10T08:48:37.023
> 
> 标签：jquery, asp.net-mvc-3, unobtrusive-validation

我有 ASP.Net MVC3 应用程序，其中有一个部分页面加载大量 html 控件（大约 Count=980），并为其分配了验证。

JQuery Unobtrusive 验证需要很长时间才能使用上述控件验证表单。它影响了应用程序的性能。有没有办法改进，如何对 DOM 的元素进行验证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T09:23:25.583

我有同样的问题。我们发现没有简单的方法来提高性能。

我不得不为页面禁用不显眼的客户端验证。表单需要 10 + 秒才能呈现，并且每个项目只有一个 id 和复选框，大约 1000 个项目。在我们移除客户端后，不显眼的页面加载大约需要 1 秒

我们刚刚在控制器上进行了验证。

您可以使用这些页面级助手

```
Html.EnableClientValidation(false);
Html.EnableUnobtrusiveJavaScript(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T20:43:38.647

我今天遇到了这个问题。我意识到我的一份大名单出现了明显的放缓。有一个查看所有选项的选项，在该视图中，每行都有一个用于删除项目的表单。`jquery.validate.unobtrusive`在加载时破坏了这个页面。当它被移除时，负载​​只有2s。许多表格不需要验证，但有些仍然需要。结果，我查看了该文件的代码并发现了这一点：

```
parse: function (selector) {
        /// <summary>
        /// Parses all the HTML elements in the specified selector. It looks for input elements decorated
        /// with the [data-val=true] attribute value and enables validation according to the data-val-*
        /// attribute values.
        /// </summary>
        /// <param name="selector" type="String">Any valid jQuery selector.</param>
        $(selector).find(":input[data-val=true]").each(function () {
            $jQval.unobtrusive.parseElement(this, true);
        });

        $("form").each(function () {//THIS IS THE OFFENDING CODE
            var info = validationInfo(this);
            if (info) {
                info.attachValidation();
            }
        });
    } 
```

我意识到我需要以某种方式更改该调用，但仍保留功能。我最终做的是标记我不想通过这个解析方法的所有表单`class="skipValid"`。然后，在源代码中，我进行了以下更改：

```
$("form:not(.skipValid)").each(function () { 
```

我拥有两全其美的东西。

# android - 如何自定义一个包含两个 Button 和一个 EditText 的 android 布局。布局可以在屏幕上到处移动

> ID：13797593
> 
> 赞同：0
> 
> 时间：2012-12-10T08:48:43.450
> 
> 标签：android, android-edittext

现在我必须让一个 android EditText 在屏幕上移动和旋转。所以我使用和 LinerLayout，anh 放入两个按钮和一个 EditText。LinerLayout 不能在屏幕上移动和拖动。所以我想自定义一个可以移动的布局类并轮换它自己的父母。有没有人可以帮助我！如果可以的话，请给我一个样品。非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:04:44.117

尝试使用此代码在屏幕上移动文本（仅适用于 API 级别大于或等于 11）

```
 final TextView tv = (TextView) findViewById(R.id.textView);

        tv.setTranslationX(tv.getTranslationX() + 10);
        tv.setTranslationY(tv.getTranslationY() + 10);
        tv.invalidate(); 
```

# multi-touch - 多点触控不起作用

> ID：13797595
> 
> 赞同：0
> 
> 时间：2012-12-10T08:48:45.007
> 
> 标签：multi-touch, cocos2d-x

我正在尝试使用 Cocos2d-x 制作类似 MegaMan 的游戏，并尝试使其在 Android 设备上运行。问题是，我可以单独按下按钮，没有任何问题，但是当我向左/向右跑并按下跳跃时，玩家停止移动。

当我手动设置 right=true 和 jump=true 时，播放器会很好地向右跳转，所以 if else 的东西执行得很好。

这是我在 init() 中所做的

```
 //add controls
    buttonLeft = CCMenuItemImage::create(
        "button_left.png", 
        "button_left.png");
    buttonLeft->setPosition( ccp(buttonLeft->getContentSize().width/2, buttonLeft->getContentSize().height/2) );

    buttonRight = CCMenuItemImage::create(
        "button_right.png", 
        "button_right.png");
    buttonRight->setPosition( ccp(buttonRight->getContentSize().width/2 + buttonLeft->getContentSize().width, buttonRight->getContentSize().height/2) );
    CCMenu* controlMenu1 = CCMenu::create(buttonLeft, buttonRight, NULL);
    controlMenu1->setPosition(CCPointZero);
    this->addChild(controlMenu1, 1);

    buttonJump = CCMenuItemImage::create(
        "button_jump.png", 
        "button_jump.png");
    buttonJump->setPosition(ccp(winSize.width - buttonJump->getContentSize().width/2, buttonJump->getContentSize().height/2));
    CCMenu* controlMenu2 = CCMenu::create(buttonJump, NULL);
    controlMenu2->setPosition(CCPointZero);
    this->addChild(controlMenu2, 1); 
```

我每 0.02 秒安排一次：

```
void BeginScene::updatePlayerMove(float dt)
{
CCSize winSize = CCDirector::sharedDirector()->getWinSize();

int newYpos;
int maxYpos;
int minYpos;

int newXpos;
int maxXpos;
int minXpos;

if(buttonJump->isSelected() && !maxJumpReached){
    //jump
    if(playerMoveAction != NULL){
        player->stopAction(playerMoveAction);
        playerMoveAction = NULL;
    }

    if(playerJumpAction != NULL){
        player->stopAction(playerJumpAction);
        playerJumpAction = NULL;
    }

    if(buttonLeft->isSelected()){
        player->setTexture(CCTextureCache::sharedTextureCache()->addImage("player2.png"));
        minXpos = player->getContentSize().height/2;
        newXpos = player->getPosition().x - PIXELS_PLAYER_MOVES;

        if(newXpos < minXpos){
            newXpos = minXpos;
        }
    }else if(buttonRight->isSelected()){

    player->setTexture(CCTextureCache::sharedTextureCache()->addImage("player1.png"));
        maxXpos = winSize.width - player->getContentSize().height/2;
        newXpos = player->getPosition().x + PIXELS_PLAYER_MOVES;

        if(newXpos > maxXpos){
            newXpos = maxXpos;
        }
    }else{
        newXpos = player->getPosition().x;
    }

    maxYpos = player->getContentSize().height/2 + closestGround + MAX_JUMP_HEIGHT;
    newYpos = player->getPosition().y + PIXELS_PLAYER_MOVES;

    if(newYpos > maxYpos){
        newYpos = maxYpos;
        maxJumpReached = true;
    }

    CCPoint destination = ccp(newXpos, newYpos);
    float lengthX = destination.x - player->getPosition().x;
    float lengthY = destination.y - player->getPosition().y;
    float length = sqrtf((lengthX * lengthX) + (lengthY*lengthY));
    float duration = length/DURATION_DIVIDER;

    playerJumpAction = player->runAction( CCSequence::create(
        CCMoveTo::create(duration, destination),
        CCCallFuncN::create(this,  NULL),
        NULL) );

}else if(!buttonJump->isSelected() || maxJumpReached){ //basicly: if not jumping -> gravity will pull always)
    //descent
    if(playerMoveAction != NULL){
        player->stopAction(playerMoveAction);
        playerMoveAction = NULL;
    }

    if(playerJumpAction != NULL){
        player->stopAction(playerJumpAction);
        playerJumpAction = NULL;
    }

    if(buttonLeft->isSelected()){
        player->setTexture(CCTextureCache::sharedTextureCache()->addImage("player2.png"));
        minXpos = player->getContentSize().height/2;
        newXpos = player->getPosition().x - PIXELS_PLAYER_MOVES;

        if(newXpos < minXpos){
            newXpos = minXpos;
        }
    }else if(buttonRight->isSelected()){

    player->setTexture(CCTextureCache::sharedTextureCache()->addImage("player1.png"));
        maxXpos = winSize.width - player->getContentSize().height/2;
        newXpos = player->getPosition().x + PIXELS_PLAYER_MOVES;

        if(newXpos > maxXpos){
            newXpos = maxXpos;
        }
    }else{
        newXpos = player->getPosition().x;
    }

    minYpos = player->getContentSize().height/2 + closestGround;
    newYpos = player->getPosition().y - PIXELS_PLAYER_MOVES;

    if(newYpos < minYpos){
        newYpos = minYpos;
        maxJumpReached = false;
        jumpButtonPressed = false;
    }
    CCPoint destination = ccp(newXpos, newYpos);
    float lengthX = destination.x - player->getPosition().x;
    float lengthY = destination.y - player->getPosition().y;
    float length = sqrtf((lengthX * lengthX) + (lengthY*lengthY));
    float duration = length/DURATION_DIVIDER;

    playerDescentAction = player->runAction( CCSequence::create(
        CCMoveTo::create(duration, destination),
        CCCallFuncN::create(this, NULL),
        NULL) );

}else if(buttonLeft->isSelected()){
    //left
    minXpos = player->getContentSize().height/2;
    newXpos = player->getPosition().x - PIXELS_PLAYER_MOVES;

    if(newXpos < minXpos){
        newXpos = minXpos;
    }

    player->setTexture(CCTextureCache::sharedTextureCache()->addImage("player2.png"));
    CCPoint destination = ccp(newXpos, player->getPosition().y);
    float lengthX = destination.x - player->getPosition().x;
    float lengthY = destination.y - player->getPosition().y;
    float length = sqrtf((lengthX * lengthX) + (lengthY*lengthY));
    float duration = length/DURATION_DIVIDER;

    playerMoveAction = player->runAction( CCSequence::create(
        CCMoveTo::create(duration, destination),
        CCCallFuncN::create(this,  NULL),
        NULL) );

}else if(buttonRight->isSelected()){
    //right
    maxXpos = winSize.width - player->getContentSize().height/2;
    newXpos = player->getPosition().x + PIXELS_PLAYER_MOVES;

    if(newXpos > maxXpos){
        newXpos = maxXpos;
    }

    player->setTexture(CCTextureCache::sharedTextureCache()->addImage("player1.png"));
    CCPoint destination = ccp(newXpos, player->getPosition().y);
    float lengthX = destination.x - player->getPosition().x;
    float lengthY = destination.y - player->getPosition().y;
    float length = sqrtf((lengthX * lengthX) + (lengthY*lengthY));
    float duration = length/DURATION_DIVIDER;

    playerMoveAction = player->runAction( CCSequence::create(
        CCMoveTo::create(duration, destination),
        CCCallFuncN::create(this,  NULL),
        NULL) );

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:49:09.440

似乎它不仅不能在我的旧 LG 上运行，但在我的 Galaxy s2 和平板电脑上却能完美运行......

所以可能我的LG太旧了：P

# c++ - 获取应用末尾不带应用名称的应用路径

> ID：13797599
> 
> 赞同：2
> 
> 时间：2012-12-10T08:49:05.693
> 
> 标签：c++, c, xcode

我正在使用 xcode 并希望在路径末尾没有应用程序名称的情况下获取我的应用程序运行的路径，但我尝试过：

```
printf("%s\n", argv[0]); 
```

它为我提供了运行我的应用程序的正确路径，但它以 /my 应用程序名称结尾，我如何删除应用程序名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:52:09.037

您可以使用该[`dirname`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/dirname.3.html#//apple_ref/doc/man/3/dirname)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T08:52:49.050

用于`std::string::find_last_of`查找路径分隔符的最后一个实例（`/`如果 *nix，`\`如果是 windows）并用于`std::string::substr`将所有内容复制到该索引。

例子 ：

```
std::string file = argv[0];

std::string path = file.substr(0,file.find_last_of("/")); 
```

这应该做你想做的事，除非我的代码中有任何愚蠢的错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:03:38.297

使用**目录名**

```
#include <iostream>
#include <libgen.h>

int main(int argc, char* argv[])
{        
    std::string dir = dirname(argv[0]);
    std::cout << dir << std::endl;
} 
```

运行应用程序：

```
 $/data/temp/test 
```

输出：

```
 $/data/temp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T08:58:34.627

如果您正在寻找等效的 bash `pwd`，您可以使用：

```
#include <unistd.h>
char *getcwd(char *buf, size_t size); 
```

请注意，如果您之前调用了 chdir()。这不会返回您正在寻找的路径。

# c# - 移动到 DLL

> ID：13797601
> 
> 赞同：0
> 
> 时间：2012-12-10T08:49:08.687
> 
> 标签：c#, dll

我的任务是将代码中更有用的部分移动到 dll 中（如果可能的话）以进行 ip 保护并阻止其他开发人员更改不需要更改的部分。我很好奇如何最好地处理与我创建的类相关的命名空间和方法参数..

是否就像确保它们在同一个命名空间中一样简单？我觉得当 dll 用于其他应用程序时，这会给其他人带来问题。

我能看到的唯一其他可行的解决方案是将我的类变量移动到这个新的 dll 中，然后在这个命名空间下使用它们。

如果它需要我使用winforms

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:56:39.010

我看不出将代码移动到 dll 将如何更好地保护您的 IP。

话虽如此，我的建议只是复制代码以尽量减少需要重写的客户端代码量。您更有可能需要将某些类从 更改`internal`为`public`，或者至少更改一些方法的可见性。

如果您的命名空间是适度合理的，那么保持相同的命名空间不会导致在其他应用程序中使用 dll 时出现问题。在最坏的情况下，您可以在客户端应用程序中为命名空间/类名（使用指令）设置别名，`using`以解决问题（如果有）。

# ruby-on-rails - Sphinx：可以更新用于索引的 SQL 查询大小的限制吗？

> ID：13797602
> 
> 赞同：0
> 
> 时间：2012-12-10T08:49:19.753
> 
> 标签：ruby-on-rails, ruby, sphinx, thinking-sphinx

我似乎撞到了某个狮身人面像的头套。我正在为某个表编制索引，每条记录将生成 ≈ 140 个索引字段（相信我，它们都很重要）。对于其中的 27 * 3 个，产生它的子查询本身就已经相当大了。这导致向我的 development.sphinx.conf（17 行）生成一个巨大的查询。这会产生结果，我直接在数据库中对其进行了测试。但是哪个不能索引。它抱怨

“错误：索引 'vendor_song_core': sql_query_range: : 在匹配提取查询中找不到宏 '$start'。”

，但这真正意味着守护程序没有加载完整的查询。显然它太长了。我的假设对吗？如果是这样，我可以解决它吗（比如，我可以在某处更新一个神奇的 max_query_length 字段）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:46:01.270

从 Sphinx 论坛复制的答案... [http://sphinxsearch.com/forum/view.html?id=10403](http://sphinxsearch.com/forum/view.html?id=10403)

将“长”查询定义移动到 mysql VIEW 中。

那么 sql_query 可以很短:)

即视图本身，包含所有列名，sql_query 可以只使用“SELECT * FROM”。同样，如果加入许多表格 - 所有表格都可以移动到视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:54:47.850

似乎没有真正的方法可以做到这一点。Sphinx 直接在其源代码中定义了查询大小的限制，因此这样做的唯一方法是编辑其源代码并在本地编译它，或者按照 barryhunter 所述进行，只要您可以定义这样的一个看法。有关此问题的更多详细信息，请访问 barryhunter 提供的链接。

# android - 安卓动画游戏开发

> ID：13797606
> 
> 赞同：-4
> 
> 时间：2012-12-10T08:49:31.107
> 
> 标签：android, opengl-es

我对游戏开发完全陌生，我需要开发一款游戏，我需要在某个领域为玩家设置动画。我浏览了一些文档，但仍然有很多疑问。

1.  `openGL`我可以单独使用 ES 来实现这一点吗？我的理解是这`openGL`是 android sdk 的一部分，除了实际的游戏编码之外，我不需要做任何额外的事情？

2.  我看到了一些像andengine 这样的引擎，它是基于openGL 给出的。这是什么意思，使用这些引擎是否更好/更容易

3.  如果是这样，是否有推荐用于动画播放器的引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:52:43.010

您可以使用 Unity 3d。unity可以为android导出和生成apk

[http://unity3d.com/#mobile-games](http://unity3d.com/#mobile-games)

# jquery - wp_editor Tiny MCE getContent 不返回 HTML 视图的内容

> ID：13797607
> 
> 赞同：4
> 
> 时间：2012-12-10T08:49:37.693
> 
> 标签：jquery, wordpress, tinymce

我在我正在开发的插件中使用 wp_editor 并注意到如果 .getContent() 在 HTML 视图中（与可视化编辑器相反），它不会获取编辑器的内容。

如果编辑器在 HTML 视图中加载，它将返回

```
 tinyMCE.get(inputid) is undefined 
```

但即使我尝试通过以下方式获取内容：

```
 jQuery("#"+inputid).html() or jQuery("#"+inputid).val() 
```

它返回空值。更让我困惑的是，如果编辑器以可视模式加载，切换到 HTML 视图，进行一些更改，然后使用 .getContent() 它将在进行任何更改之前返回可视编辑器的值。

我正在用这个拔出我有限的头发供应，因此将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-14T14:37:22.840

我正在努力解决同样的问题。原因是可视选项卡中的编辑器是 tinyMCE，而 html 选项卡中的编辑器只是纯文本区域。不知何故，当 html 选项卡处于活动状态时，tinyMCE 编辑器未激活，因此您需要改为查询 textarea。textarea 将 id 传递给 wp_editor() 函数。您可以使用传统的 jquery 方法对其进行查询。

例如，此代码设置一个名为 content 的变量，如果它被激活，则使用 tinyMCE 编辑器的内容；如果 tinyMCE 没有返回任何内容（因为选择了 HTML 选项卡），则使用 textarea 的内容：

```
var content;
var editor = tinyMCE.get(inputid);
if (editor) {
    // Ok, the active tab is Visual
    content = editor.getContent();
} else {
    // The active tab is HTML, so just query the textarea
    content = $('#'+inputid).val();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-24T18:04:03.483

为了让它 100% 工作，我必须这样做：

```
function get_tinymce_content(id) {
    var content;
    var inputid = id;
    var editor = tinyMCE.get(inputid);
    var textArea = jQuery('textarea#' + inputid);    
    if (textArea.length>0 && textArea.is(':visible')) {
        content = textArea.val();        
    } else {
        content = editor.getContent();
    }    
    return content;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-28T13:57:14.260

这是我正在使用的功能，从未让我失望。

如果 TinyMCE 还没有加载，它真的很简单并且可以工作。它只是检查包装器的类，这是非常安全的使用。

* * *

```
function get_tinymce_content(id) {

    if (jQuery("#wp-"+id+"-wrap").hasClass("tmce-active")){
        return tinyMCE.get(id).getContent();
    }else{
        return jQuery("#"+id).val();
    }

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T09:55:20.203

您需要调用`tinyMCE.triggerSave();` before`jQuery("#"+inputid).html()`将产生实际的编辑器内容。

（顺便说一句。'html 视图'是什么意思？）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-19T18:15:34.893

您可以像这样检查活动选项卡：

```
let content;
const editor = tinyMCE.get(inputid);
if (null !== editor && false === editor.hidden) {
    // Ok, the active tab is Visual
    content = editor.getContent();
} else {
    // The active tab is HTML, so just query the textarea
    content = $('#'+inputid).val();
} 
```

# macos - sendto：无论传递的地址如何，目标都变为 0.0.0.0

> ID：13797610
> 
> 赞同：0
> 
> 时间：2012-12-10T08:49:50.410
> 
> 标签：macos, sockets

我正在编写一个 ping 克隆来练习套接字编程。我能够发送 ICMP 数据包，但目标地址是 0.0.0.0，无论我传递什么`sendto`。这是最相关的代码片段：

```
struct sockaddr_in dest;
memset(&dest, 0, sizeof(dest));
dest.sin_family = AF_INET;
if (0 == inet_aton(argv[1], &dest.sin_addr)) {
  puts("could not parse address\n");
  exit(EXIT_FAILURE);
}

ssize_t nbytes = sendto(sock, &hdr, ICMP_MINLEN, /*flags=*/0,
    (struct sockaddr*)&dest, sizeof(dest)); 
```

完整的程序[在 GitHub 上](https://github.com/thejohnfreeman/netutils/blob/master/ping/main.c)。我正在为 Mac OS X 10.6.8 进行编译，并且正在使用 Wireshark 1.8.4 来验证数据包。

`dest.sin_addr.s_addr`我已经通过调用验证了 的值`printf("%X")`，并且`inet_aton`按预期工作。我什至特意将它设置为`0x08080808`（谷歌的名称服务器），它仍然不起作用。

我在这里可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:21:44.870

There's one (copy-paste) bug in your full program on github:

```
struct sockaddr_in src;
memset(&dest, 0, sizeof(dest)); 
```

After declaring `src`, you memset `dest` again. This means that dest's sin_addr member is now 0 so you're requesting a destination address of 0.0.0.0.

As an aside, src's `sin_port` is left uninitialised so you may sometimes get other errors if you end up requesting a local port that is already in use.

# java - 如何用java中的临时文件修改txt文件？

> ID：13797612
> 
> 赞同：0
> 
> 时间：2012-12-10T08:49:54.697
> 
> 标签：java, database, grid, store, temporary-files

只是想知道为什么我们正在使用的代码不起作用...我创建了一个管理商店产品的程序，在特定的程序中，用户可以添加或删除存储在仓库中的产品，应用程序显示网格，它代表商店的一部分，引用在用户添加或删除产品时上传的 ProductDatabase。对于添加功能没问题...当我尝试删除产品时，我读取了 ProductDatabase，我得到了要删除的产品的字符串，我创建了一个临时文件，其中复制了所有数据，而没有引用产品的字符串行我必须删除，然后我重写 ProductDatabase。此时我应该通过删除产品和特定文件行来上传数据库。我不知道为什么它会起作用，有时它不会。好吧，我知道这听起来很奇怪，但这就是发生的事情！这是代码：

```
 import java.awt.Color;
 import java.awt.Dimension;
 import java.awt.Toolkit;
 import java.util.logging.Level;
 import java.util.logging.Logger;
 import java.io.*;
 import javax.swing.JOptionPane;

/**
 *
 * @author Kastriot
 */
public class Preleva_Prodotto extends javax.swing.JFrame {

/** Creates new form Ricerca_Prodotto */
public Preleva_Prodotto() {
    initComponents();

    String fileLine;

    try {
        FileReader fileReader = new FileReader("DatabaseProdotti.txt");
        BufferedReader bufReader = new BufferedReader(fileReader);

        int i = 0;
        String[] Prodotto = new String[21];
        String[] DetProd = new String[6];

        while ((fileLine = bufReader.readLine()) != null) {

            Prodotto[i] = fileLine;
            DetProd = Prodotto[i].split(",");
            NomeProdotto = DetProd[0];
            Descrizione = DetProd[1];
            Peso = Integer.parseInt(DetProd[2]);
            CodiceID = DetProd[3];
            Posizione = DetProd[4];
            DataReg = DetProd[5];

            if (Peso <= 500) {
                if (Posizione.equals("C0")) {
                    jLabel1.setText("<html>" + NomeProdotto);
                    jPanel3.setBackground(Color.red);
                } else if (Posizione.equals("C1")) {
                    jLabel13.setText("<html>" + NomeProdotto);
                    jPanel4.setBackground(Color.red);
                } else if (Posizione.equals("C2")) {
                    jLabel14.setText("<html>" + NomeProdotto);
                    jPanel5.setBackground(Color.red);
                } else if (Posizione.equals("C3")) {
                    jLabel15.setText("<html>" + NomeProdotto);
                    jPanel2.setBackground(Color.red);
                } else if (Posizione.equals("C4")) {
                    jLabel16.setText("<html>" + NomeProdotto);
                    jPanel6.setBackground(Color.red);
                } else if (Posizione.equals("C5")) {
                    jLabel17.setText("<html>" + NomeProdotto);
                    jPanel7.setBackground(Color.red);
                } else if (Posizione.equals("C6")) {
                    jLabel18.setText("<html>" + NomeProdotto);
                    jPanel8.setBackground(Color.red);
                }

            } else if (Peso <= 1000) {
                if (Posizione.equals("B0")) {
                    jLabel19.setText("<html>" + NomeProdotto);
                    jPanel16.setBackground(Color.red);
                } else if (Posizione.equals("B1")) {
                    jLabel20.setText("<html>" + NomeProdotto);
                    jPanel17.setBackground(Color.red);
                } else if (Posizione.equals("B2")) {
                    jLabel21.setText("<html>" + NomeProdotto);
                    jPanel18.setBackground(Color.red);
                } else if (Posizione.equals("B3")) {
                    jLabel22.setText("<html>" + NomeProdotto);
                    jPanel19.setBackground(Color.red);
                } else if (Posizione.equals("B4")) {
                    jLabel23.setText("<html>" + NomeProdotto);
                    jPanel20.setBackground(Color.red);
                } else if (Posizione.equals("B5")) {
                    jLabel24.setText("<html>" + NomeProdotto);
                    jPanel21.setBackground(Color.red);
                } else if (Posizione.equals("B6")) {
                    jLabel25.setText("<html>" + NomeProdotto);
                    jPanel22.setBackground(Color.red);
                }

            } else if (Peso > 1000) {
                if (Posizione.equals("A0")) {
                    jLabel26.setText("<html>" + NomeProdotto);
                    jPanel9.setBackground(Color.red);
                } else if (Posizione.equals("A1")) {
                    jLabel27.setText("<html>" + NomeProdotto);
                    jPanel10.setBackground(Color.red);
                } else if (Posizione.equals("A2")) {
                    jLabel28.setText("<html>" + NomeProdotto);
                    jPanel11.setBackground(Color.red);
                } else if (Posizione.equals("A3")) {
                    jLabel29.setText("<html>" + NomeProdotto);
                    jPanel12.setBackground(Color.red);
                } else if (Posizione.equals("A4")) {
                    jLabel30.setText("<html>" + NomeProdotto);
                    jPanel13.setBackground(Color.red);
                } else if (Posizione.equals("A5")) {
                    jLabel31.setText("<html>" + NomeProdotto);
                    jPanel14.setBackground(Color.red);
                } else if (Posizione.equals("A6")) {
                    jLabel32.setText("<html>" + NomeProdotto);
                    jPanel15.setBackground(Color.red);
                }

            }

        }

    } catch (IOException ex) {
        Logger.getLogger(PianoB.class.getName()).log(Level.SEVERE, null, ex);
    }

}
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

    String lineToRemove = jTextField1.getText();

    if ((!lineToRemove.equals("A0")) && (!lineToRemove.equals("A1")) && (!lineToRemove.equals("A2")) && (!lineToRemove.equals("A3")) && (!lineToRemove.equals("A4")) && (!lineToRemove.equals("A5")) && (!lineToRemove.equals("A6"))
            && (!lineToRemove.equals("B0")) && (!lineToRemove.equals("B1")) && (!lineToRemove.equals("B2")) && (!lineToRemove.equals("B3")) && (!lineToRemove.equals("B4")) && (!lineToRemove.equals("B5")) && (!lineToRemove.equals("B6"))
            && (!lineToRemove.equals("C0")) && (!lineToRemove.equals("C1")) && (!lineToRemove.equals("C2")) && (!lineToRemove.equals("C3")) && (!lineToRemove.equals("C4")) && (!lineToRemove.equals("C5")) && (!lineToRemove.equals("C6"))) {
        JOptionPane.showMessageDialog(this, "La posizione inserita non è esistente, inserire una posizione libera tra quelle disponibili!", "Operazione non riuscita!", JOptionPane.ERROR_MESSAGE);
        PosizioneVuota = false;
    }

    try {

        File inputFile = new File("DatabaseProdotti.txt");
        File tempFile = new File("C:\\Users\\Kastriot\\Documents\\Università\\tmpFileProdotti.txt");
        BufferedReader reader = new BufferedReader(new FileReader(inputFile));
        BufferedWriter writer = new BufferedWriter(new FileWriter(tempFile));

        String[] DetProd = new String[100];
        String fileLine;
        while ((fileLine = reader.readLine()) != null) {
            // trim newline when comparing with lineToRemove
            DetProd = fileLine.split(",");
            PosDaPrelevare = DetProd[4];

            if (!PosDaPrelevare.equals(lineToRemove)) {
                writer.write(fileLine);
                writer.newLine();
            } else {
                JOptionPane.showMessageDialog(this, "Il prodotto presente nella posizione " + (lineToRemove) + " è stato prelevato con successo!", "Operazione riuscita", JOptionPane.INFORMATION_MESSAGE);
                PosizioneVuota = false;
                NuovaSchermata = true;

            }
        }
        reader.close();
        writer.flush();
        writer.close();
        inputFile.delete();

        tempFile.renameTo(new File("C:\\Users\\Kastriot\\Documents\\NetBeansProjects\\EasyStorage1.0\\DatabaseProdotti.txt"));

        if (PosizioneVuota) {
            JOptionPane.showMessageDialog(this, "La posizione " + (lineToRemove) + " non contiene alcun prodotto", "Operazione non riuscita", JOptionPane.INFORMATION_MESSAGE);
        }
        if (NuovaSchermata) {
            Situazione_Generale_ SitGenFrame = new Situazione_Generale_();              //Apre la schermata Situazione Generale
            //Centrare la finestra e mostrala sullo schermo
            Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
            SitGenFrame.setSize(950, 480);
            Dimension frameSize = SitGenFrame.getSize();
            SitGenFrame.setLocation((screenSize.width - frameSize.width) / 2,
                    ((screenSize.height - frameSize.height) / 2));

            SitGenFrame.setVisible(true);
        }

    } catch (IOException ex) {
        Logger.getLogger(Preleva_Prodotto.class.getName()).log(Level.SEVERE, null, ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:42:32.227

最好的办法是将文件路径更改为`inputfile`.

```
File inputFile = new File("DatabaseProdotti.txt"); 
```

将其更改为 -

```
File inputFile = new File("C:\\Users\\Kastriot\\Documents\\NetBeansProjects\\EasyStorage1.0\\DatabaseProdotti.txt"); 
```

[您可以在此问题](https://stackoverflow.com/a/4485744/813471)中找到有关此问题的更多信息。

# java - 如何使用 Super CSV 跳过仅包含空格的行？

> ID：13797616
> 
> 赞同：3
> 
> 时间：2012-12-10T08:50:33.103
> 
> 标签：java, csv, supercsv

如何配置 Super CSV 以跳过空白行或仅包含空格的行？

我正在使用 CsvListReader，有时我的数据中会出现空行。发生这种情况时，会出现以下情况的异常：

> CellProcessor 的数量必须与字段的数量匹配

我想简单地跳过这些行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:30:54.570

**更新：** Super CSV 2.1.0（2013 年 4 月发布）允许您`CommentMatcher`通过首选项提供一个允许您跳过被视为评论的行的首选项。您可以使用 2 个内置匹配器，也可以提供自己的匹配器。在这种情况下，您可以使用`new CommentMatches("\\s+")`跳过空白行。

* * *

Super CSV 只跳过零​​长度的行（只是一个行终止符）。

如果有空行，则它不是有效的 CSV 文件（请参阅RFC4180 的[规则 4](http://supercsv.sourceforge.net/csv_specification.html)，其中指出`Each line should contain the same number of fields throughout the file`）。空行唯一有效的情况是它是用引号括起来的多行字段的一部分。例如

```
column1,column2
"multi-line field

with a blank line",value2 
```

话虽如此，有可能让 Super CSV 对空行更宽容一些（它可以忽略它们）。如果您可以在我们的 SourceForge 页面上发布[功能请求](https://sourceforge.net/p/supercsv/feature-requests/)，我们可以对此进行进一步调查，并可能在未来的版本中添加此功能。

但这对你现在没有帮助！

我没有对此进行广泛的测试，但它应该可以工作:) 你可以编写自己的标记器来跳过空行：

```
package org.supercsv.io;

import java.io.IOException;
import java.io.Reader;
import java.util.List;

import org.supercsv.prefs.CsvPreference;

public class SkipBlankLinesTokenizer extends Tokenizer {

    public SkipBlankLinesTokenizer(Reader reader, CsvPreference preferences) {
        super(reader, preferences);
    }

    @Override
    public boolean readColumns(List<String> columns) throws IOException {

        boolean moreInput = super.readColumns(columns);

        // keep reading lines if they're blank
        while (moreInput && (columns.size() == 0 || 
                             columns.size() == 1 && 
                             columns.get(0).trim().isEmpty())){
            moreInput = super.readColumns(columns);
        }

        return moreInput;
    }

} 
```

只需将其传递给阅读器的构造函数（您必须将首选项传递给阅读器和标记器）：

```
ICsvListReader listReader = null;
try {
    CsvPreference prefs = CsvPreference.STANDARD_PREFERENCE;
    listReader = new CsvListReader(
        new SkipBlankLinesTokenizer(new FileReader(CSV_FILENAME), prefs),
        prefs);
... 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:01:16.633

我不知道这个库（您应该添加一个 Java 标记...），但是查看[示例](http://supercsv.sourceforge.net/examples_reading.html)，我看到他们的阅读器支持每行可变数量的行。空行是此模式的子情况。

或者（可能效率较低），您可以捕获异常并继续阅读......

# android - 从 Android 生成简单的 JSON

> ID：13797617
> 
> 赞同：-3
> 
> 时间：2012-12-10T08:50:34.197
> 
> 标签：android, json

```
public class DemoActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    JSONArray jsonarray=new JSONArray();
    jsonarray.put("Info");

    JSONObject j1=new JSONObject();
    try {

        j1.put("NAME", "NAKUL");
        j1.put("ADDRESS", "NASHIK");
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    jsonarray.put(j1);
    Log.d("Test",jsonarray.toString());

} 
```

}

它给了我输出

```
12-10 14:14:59.639: D/Test(862): ["Info",{"ADDRESS":"NASHIK","NAME":"NAKUL"}] 
```

但我需要输出

```
["Info":{"ADDRESS":"NASHIK","NAME":"NAKUL"}] 
```

这意味着我需要“：”而不是“，”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:06:14.823

你说你想要的输出不是一个合适的数组`JSON`

`JSON`数组只包含文字和对象，而不是单独的键值对

你可以试试，

`jsonarray.put('info', j1)`

哪个更接近您想要的，但可能会引发错误

你真正想要的是：

`{['Info' : {...}]}`

[在您尝试对其进行编程之前，请在jsonlint.com](http://jsonlint.com)上测试您的输出以确保它们是有效的 JSON。

# php - 访问方法的异常获取行 PHP

> ID：13797620
> 
> 赞同：1
> 
> 时间：2012-12-10T08:50:43.183
> 
> 标签：php, exception, throw

如何获取访问方法的行？

方法：

```
function configure($newFile = false){

    try {

        ...
        throw new Exception("Error X");

    } catch (Exception $e) {

        $exception = "<b>Caught exception: </b>\n<blockquote>"
            .$e->getMessage()
            ."</blockquote>"
            ."\n"."on line <b>"
            .$e->getLine()
            ."</b> of <i>"
            .$e->getFile()
            ."</i>";

        echo $exception;

    }

} 
```

输出是这样的：

```
Caught exception:
Error X
on line 25 of C:\xampp\htdocs\MgFramework\classes\MgDatabase.class.php 
```

但我想显示访问该方法的行和文件：

```
$database = new MgDatabase();
$database->configure(); 
```

可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-13T01:43:12.553

```
class YourClass extends Exception
    {
        /**
         * can use
         * $this->line
         *
         * only __construct and __toString are not final
         *
         * @link http://php.net/manual/en/class.exception.php
         *  */
        function SomeMethod()
        {
            return "that is mine one: " . $this->line; // Exception extends variable access to protected variable $line
        }
        function AnotherMethod(Exception $e)
        {
            return $e->getLine() . " – " . $e->getFile();
        }
        function ThirdMethod($l,$f)
        {
            return $l . " – " . $f;
        }
    }

    $test = new YourClass;
    print $test->getLine(); // Exception extends method

    print "<hr>";
    print $test->SomeMethod(); // your class Method

    print "<hr>";
    print $test->AnotherMethod(new Exception()); // new Exception

    print "<hr>";
    print $test->ThirdMethod(__LINE__,__FILE__); // magic constant __LINE__ and __FILE__ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:27:37.783

我只需要访问 getTrace() 方法。

它返回一个二维数组，其中包含所有到 throw 的跟踪。

# flash - AS2.0：除了编译时我不能实例化一个类吗？谁能解释这意味着什么？

> ID：13797622
> 
> 赞同：1
> 
> 时间：2012-12-10T08:50:53.807
> 
> 标签：flash, actionscript, actionscript-2

对不起，这可能是一个有点愚蠢的问题，但我正在尝试编写一个 Actionscript 2.0 类来处理加载 XML 数据，然后使其可供应用程序的其余部分访问。

然而，这是我第一次为任何不是 MovieClip 的东西编写类定义，我遇到了一个奇怪的错误。例如这里：

```
class Main extends SEBanner {

public function Main() {
    _root._quality = 'BEST';
    trace(_root._quality + ' SWF Quality Setting.');
    trace('Banner main object instantiated. Ready to run.')
    trace('Width of banner: ' + bannerWidth());
    trace('Height of banner: ' + bannerHeight());
    trace('Banner aspect ratio: ' + bannerAspectRatio());
    trace('----------------------------------------------');
}

public var externals:External = new External();

} 
```

最后一行，我尝试实例化 External 类（之所以这样命名，是因为它将处理外部提供的 Flash 变量以及 XML），正在被编译器挂钩，它给了我一个错误，转换为（我是在日语版本的 Flash 上）“类实例变量只能在编译时实例化。”

我很困惑，因为据我所知，如果代码正在编译，它就是编译时间。这段代码应该没问题，因为我编译它时出现了错误。

奇怪的。

谢谢！

党卫军

更新：这是（剥离，以避免显示任何机密信息）外部类进行比较：

```
import mx.xpath.XPathAPI;

class External {

private var _rawXML = new XML();
private var _xmlLocation:String = '';

public function External() {
    trace('Loading external information...');

    _rawXML.ignoreWhite = true;

    _rawXML.onLoad = function(success:Boolean) {
        if (success) {
            trace('XML data was successfully loaded.')
            initXML();
        } else {
            trace('There was an error loading the XML. Please check the XML file.');
        }
    }

    preLoadXML();
}

private function loadLocalXML():Void {
    getXML();
}

private function loadNetworkXML():Void {        
    getXML();
}

function getXML():Void {
    if ( _rawXML.load( _xmlLocation ) ) {
        trace('XML loading...');
    } else {
        trace('I\'m having difficulty finding the XML. You might want to check your data source.')
    }
}

function initXML():Void {
    _root._ary = XPathAPI.selectNodeList(this.rawXML, eventPath);
    _root._total = _ary.length;

    _root.siteLink = getXRedirect();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:32:46.317

英文错误是：“类的实例变量只能初始化为编译时常量表达式。”

根据我的经验，它是这样的：

将类定义视为应如何创建该类的每个实例的“蓝图”。

在您的示例中，您定义“Main”的每个实例都应包含类 External 的定义，然后创建该类的实例并将其绑定到变量 externals [Main.externals]。这里的问题是该代码 [Main 的定义] 仅运行一次 [静态，在启动期间将所有定义加载到内存中]，因此 Main 的每个后续实例将始终链接到“外部”的同一实例。由于您没有在代码中提到您希望出现这种情况，因此您会收到此错误。

所以，你可能想做的是在 Main 的构造函数中，创建 External 的实例——

```
public var externals:External;

public function Main() {
    _root._quality = 'BEST';
    externals = new External();
    trace('----------------------------------------------');
} 
```

这样，每个 Main 实例都会收到自己的 external 实例。这至少解决了您的问题，并且在涉及类/实例如何在编码语言中工作时会更加“正确”。

另一方面，如果您希望 Main 的所有实例都链接到 External 的同一个实例，您应该只写

```
public static var externals:External = new External();

public function Main() {
    _root._quality = 'BEST';
    trace("external=" + externals);
    trace('----------------------------------------------');
} 
```

希望这是有道理的，我意识到解释我的意思有点困难......：o

# python - 生成固定大小的虚拟数据包

> ID：13797624
> 
> 赞同：1
> 
> 时间：2012-12-10T08:50:59.983
> 
> 标签：python, linux, network-programming, udp

嗨，我想使用 python 生成固定大小的虚拟数据包，比如 1400 字节。生成后，我想使用 UDP 广播以及每个数据包的序列号通过网络流式传输它。有没有可能的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:18:46.037

尝试使用[scapy](http://www.secdev.org/projects/scapy/)。

可以使用简单的 1-liner 发送一个简单的 UDP 数据包，例如`send(IP(dst="192.168.0.255")/UDP(dport=0)/("X"*1400))`

# variables - 批量变量赋值

> ID：13797629
> 
> 赞同：3
> 
> 时间：2012-12-10T08:51:16.553
> 
> 标签：variables, batch-file

这个问题似乎（非常）愚蠢，因为我无法处理它:(

当我尝试这个批处理代码时：

```
if "%1" == "-i" (
set is = %2
echo. %is%
shift
) 
```

用 2 个（或更多）参数调用，它不起作用。它实际上打印了一个空白。“shift”命令也没有完成。当我查看执行的代码时（开头没有关闭@echo），我可以看到“set”命令已完成。

它出什么问题了？

调用示例：

```
c:\script.bat -i test -d bla 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T08:59:49.473

你有两个问题。默认情况下，括号中的语句组将一次完成变量扩展，即在您的`set`命令之前。的语义`set`也是错误的，你不希望`=`.

将此添加到文件的顶部：

```
setlocal ENABLEDELAYEDEXPANSION 
```

并删除周围的`=`空格`set`：

```
set is=%2 
```

最后使用延迟扩展：

```
echo. !is! 
```

可能的第三个问题是您可能需要两个`SHIFT`s，一个用于`-i`，一个用于它的`is`论点。

## 更新

感谢@dbenham 指出这不是语法错误`set`，这只是令人惊讶的行为，值得稍微解释一下。如果执行这些命令：

```
set a=one
echo "%a%" 
```

结果是：

```
"one" 
```

这是有道理的，但请尝试：

```
set b = two
echo "%b%" 
```

你得到：

```
"%b%" 
```

什么？这是未设置环境变量时您所期望`b`的。但我们*只是*设置它。还是我们：

```
echo "%b %" 
```

显示：

```
" two" 
```

对于 Windows`set`命令，与我所知道的任何其他语言或环境不同，空格很重要。前面的空格`=`成为环境变量名的一部分，后面的空格成为值的一部分。这种不常见的行为是编写 Windows 批处理程序时常见的错误来源。

# java - java.lang.IncompatibleClassChangeError 出现在特定情况下

> ID：13797637
> 
> 赞同：0
> 
> 时间：2012-12-10T08:51:53.360
> 
> 标签：java, playframework

我正在尝试部署 Java Play！2 应用。我的 Bamboo 服务器正在运行`play clean dist`，它会生成一个包含已部署应用程序的 zip 文件。Bamboo 然后解压缩文件，并将符号（命名为当前）链接更改为这个新文件夹。

然后，手动（现在）我想运行`start`脚本但`java.lang.IncompatibleClassChangeError`抛出异常：

```
root # pwd
/home/webserver/current/
root # ./start
Play server process ID is 9795
[info] play - datasource [jdbc:mysql://XXX/XXX] bound to JNDI as DefaultDS
[debug] c.j.b.BoneCPDataSource - JDBC URL = jdbc:mysql://XXX/XXX, Username = lmc, artitions = 3, max (per partition) = 5, min (per partition) = 2, helper threads = 3, idle max ge = 10 min, idle test period = 5 min
[info] play - database [default] connected at jdbc:mysql://XXX/XXX
Oops, cannot start the server.
java.lang.IncompatibleClassChangeError: Implementing class
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:905)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:890)
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:57)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:52)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:34)
    at play.db.jpa.JPAPlugin.onStart(JPAPlugin.java:35)
    at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
    at play.api.Play$$anonfun$start$1.apply(Play.scala:60)
    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)
    at scala.collection.immutable.List.foreach(List.scala:45)
    at play.api.Play$.start(Play.scala:60)
    at play.core.StaticApplication.<init>(ApplicationProvider.scala:51)
    at play.core.server.NettyServer$.createServer(NettyServer.scala:133)
    at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:162)
    at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:161)
    at scala.Option.map(Option.scala:133)
    at play.core.server.NettyServer$.main(NettyServer.scala:161)
    at play.core.server.NettyServer.main(NettyServer.scala) 
```

我已经阅读了很多关于这个错误的帖子，但现在没有什么可以解决我的问题。我试图将文件夹复制到另一个地方，就像这样：

```
root # cp -r /home/webserver/current /root/webserver-current
root # cd /root/webserver-current
root # ./start 
```

在这里，我的应用程序正在运行，而不是异常！:-O 我的结论是它不适用于`/home`分区，但我不敢相信！你有什么想法或解决方案让它工作吗？

问候，塞缪尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T08:57:51.060

您需要清理和构建整个应用程序。您以某种方式更改了一个类，这会影响依赖它的其他类，而无需重新编译这些类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:45:54.753

这是一个依赖问题。两者都`ejb3-persistence-1.0.2.GA`在`hibernate-jpa-2.0-api`lib 目录中，这是不兼容的！（JPA 1.0 和 JPA 2.0）我`ejb3-persistence-1.0.2.GA`从我的 Maven 文件和 lib 目录中删除，它可以工作。:)

# android - 如何通过电子邮件分享广告，标题为广告标题，广告描述为正文

> ID：13797646
> 
> 赞同：0
> 
> 时间：2012-12-10T08:52:30.967
> 
> 标签：android, json

我是安卓新手。经过大量搜索后，我在这里发布了这个问题。我的应用程序包含在列表视图中显示的广告，我正在尝试通过电子邮件共享广告我已经包含了电子邮件代码，但它没有从 SingleMenuItem.java Activity 中提取标题以将其显示在电子邮件的主题中，并在正文的描述中显示. 我该怎么做有人可以帮忙吗？以下是代码

电子邮件.java

```
 public class Email extends Activity {
  Button  send;
  EditText address, subject, emailtext;
   @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.email);
  send=(Button ) findViewById(R.id.send);
  address=(EditText) findViewById(R.id.emailaddress);
  subject=(EditText) findViewById(R.id.emailsubject);
  emailtext=(EditText) findViewById(R.id.emailtext);

  send.setOnClickListener(new OnClickListener() {

                public void onClick(View  v) {
                        // TODO Auto-generated method stub

               final Intent emailIntent = new         Intent(android.content.Intent.ACTION_SEND);

                               emailIntent.setType("plain/text");

         emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String []{ address.getText().toString()});

                                  emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject.getText());

                emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailtext.getText());

                            Email.this.startActivity(Intent.createChooser(emailIntent, "Send mail..."));

                }

        });
      }
     } 
```

SingleMenuItemActivity.java

```
 public class SingleMenuItemActivity  extends Activity {

         // JSON node keys
             private static final String TAG_TITLE = "title";
             private static final String TAG_DATE = "date";
             private static final String TAG_NAME = "name";
             private static final String TAG_CONTENT = "content";
         @Override
            public void onCreate(Bundle savedInstanceState) {
               super.onCreate(savedInstanceState);
            setContentView(R.layout.single_list_item);

      // getting intent data
      Intent in = getIntent();

       // Get JSON values from previous intent
      String title = in.getStringExtra(TAG_TITLE);
      String date = in.getStringExtra(TAG_DATE);
      String name = in.getStringExtra(TAG_NAME);
      String content = in.getStringExtra(TAG_CONTENT);

     // Displaying all values on the screen
        TextView lblName = (TextView) findViewById(R.id.name_label);
        TextView lblCost = (TextView) findViewById(R.id.email_label);
        TextView lblDesc = (TextView) findViewById(R.id.mobile_label);
        TextView lblCont = (TextView) findViewById(R.id.content_label);

       lblName.setText(title);
       lblCost.setText(date);
       lblDesc.setText(name);
       lblCont.setText(content);

      final ImageView email3 = (ImageView) findViewById(R.id.email);

       email3.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v){
              //my codes
             startActivity(new Intent(SingleMenuItemActivity.this, Email.class));   
          }
        });
             }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:39:34.390

```
private void sendMail(String appName, String adLink) {
    String msg = "<HTML><BODY>Hello,<br>Recently,I downloaded <b><font color=\"red\">"+appName+"</font></b>"+
" from Play Store.I found this very challenging and a great game."+
            "<br>I would like to suggest you this game.<br><br><a href="+playStoreLink+">Download</a><br><br>"+
"<br>Thank You</BODY></HTML>";
    String sub = "Get it now. It is there in Play Store";
    Intent email = new Intent(Intent.ACTION_SEND);
    email.setType("text/html");
    email.putExtra(Intent.EXTRA_SUBJECT, sub);
    email.putExtra(android.content.Intent.EXTRA_TEXT, Html.fromHtml(msg));
    email.setType("message/rfc822");
    startActivity(Intent.createChooser(email, "Choose an Email client :"));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:35:51.010

在您的情况下，无需创建只需在Button`Email.class`的单击侦听器中编写您的电子邮件意图代码。`email3`

代码应如下所示。

```
email3.setOnClickListener(new View.OnClickListener() {
           public void onClick(View v){
                //my codes
             Intent emailIntent = Intent(android.content.Intent.ACTION_SENDTO);
        emailIntent.setType("text/html");
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, title);
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, content));
        startActivity(Intent.createChooser(emailIntent, "Email to Friend"));
           }
        }); 
```

# solr - KeywordTokenizer 对多值字段的影响

> ID：13797647
> 
> 赞同：0
> 
> 时间：2012-12-10T08:52:37.477
> 
> 标签：solr

如果通过 KeyWordTokenizer 传递多值字段，整个内容会返回单个标记还是与值的数量一样多的标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:10:07.933

将是馈送到 Solr 的多个令牌。

多值字段基本上存储为单个值，在由 positionIncrementGap 确定的术语之间有额外的间距。

因此，即使您通过 KeyWordTokenizer 传递该字段，从技术上讲，令牌也将是一个单一令牌，但使用 positionIncrementGap 将表现为多值。

# javascript - Joomla - 无法嵌入自定义 javascript

> ID：13797652
> 
> 赞同：0
> 
> 时间：2012-12-10T08:52:51.747
> 
> 标签：javascript, plugins, joomla, jqtransform

*   我有 Joomla 1.5
*   我找到了一个表单样式插件，“jqtransform”
*   我有一篇文章导入了连接到外部数据库的“myform.php”页面

我尝试嵌入 jquery 插件（jqtransform）来风格化驻留在 myform.php 中的表单。我做的步骤是：

*   在 joomla 的 index.php 的标题中添加 css 的链接
*   在 joomla 的 index.php 中（或在 myform.php 中）添加 jquery 插件的链接
*   在 myform.php 的表单标签中添加 jqtransform 类（插件需要）
*   在 myform.php（或 joomla 的 index.php）的末尾，我在脚本标签中添加了 javascript 片段：

```
 $(function() {
           //find all form with class jqtransform and apply the plugin
           console.log("foo");
           $("form.jqtransform").jqTransform(); }); 
```

（插件需要）

问题是插件不起作用。

我在浏览器中调试javascript并将书签放在前面`$(function(){});`和前面`$("form.jqtransform").jqTransform(); });`

第一个书签工作正常（浏览器停止）。

第二个书签不做任何事情。这意味着浏览器不会进入函数内部。

控制台日志不显示任何内容。

任何人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:15:33.513

问题是 JQuery 冲突。

你应该使用 var jq = jQuery.noConflict(); 就在脚本上方并使用 jq 而不是 $ 符号。像：

```
 jq = jQuery.noConflict();
 jq(function(){});
 jq("form.jqtransform").jqTransform(); }); 
```

类似的东西。您也可以从 myform.php 添加脚本，无需编辑 index.php 即可使用。就像一个页面需要一些 js 和 css 不要在 index.php 中加载它每次都会加载，所以速度会降低。对于组件或模块或特定页面，您可以使用 joomla 的默认文档工厂。

像：

```
$document = &JFactory::getDocument();
$document->addScript('your script file full path');
$document->addStylesheet('your style sheet full path '); 
```

希望这对你朋友有帮助。。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:59:18.153

此方法不需要编辑模板文件。

只需使用自定义 HTML 模块并将其发布到位

```
<script type="text/javascript">jQuery.noConflict();</script>
<script>
jQuery(document).ready(function() {
    jQuery("form.jqtransform").jqTransform(); 
});
</script> 
```

# python - 通过导入访问另一个类对象

> ID：13797653
> 
> 赞同：0
> 
> 时间：2012-12-10T08:52:56.830
> 
> 标签：python, python-2.6

我有一个程序名称“new.py”，带有“：

```
class hello:

    def __init__(self, summary):
        self.summary = summary

    def hi(self):
        print self.summary

if __name__ == "__main__":
    h = hello(summary = "this is a hello program")
    h.hi() 
```

当我想将函数 hi 访问到另一个程序名称 another.py 中时，我无法访问该函数.. 请帮助我并纠正我... another.py：

```
import new 

    class another:

        def __init__(self, value):
            self.value = value

        def show(self):
            print "value is %s" % self.value
            new.hi()
            print "done"

    if __name__ == "__main__":
        a = another(value = "this is a another value")
        a.show() 
```

输出：

```
new.hi()
AttributeError: 'module' object has no attribute hi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:00:31.047

问题是您没有初始化 hello 对象。因此，在调用 hi 函数之前，您需要在某处执行此操作：

```
 n  = new.hello('some string') 
```

然后你可以打电话：

```
 n.hi() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:16:37.160

实际的问题是你这样做：

```
import new 
```

接着：

```
new.hi() 
```

hi() 没有在 new 中定义，它在 new.hello 中定义，这是你的类。您需要创建类 hello 的新实例并从那里调用 hi() 。

# ios - Restkit 映射 0.2

> ID：13797656
> 
> 赞同：0
> 
> 时间：2012-12-10T08:53:07.443
> 
> 标签：ios, ipad, restkit

如何`json`在 Restkit 2.0 中映射像这样0.20.0

```
 {
      "days" : [
        {
          "day" : 1,
          "id" : 1,
          "set1" : [
            {
              "exercise_id" : 1,
              "exerciseunits" : [
                {
                  "count" : 3,
                  "id" : 1,
                  "weight" : 60
                }
              ],
              "id" : 1,
              "name" : null,
              "subbodypart_id" : 1,
              "subbodypartname" : "Chest"
            }
          ]
        }
      ],
      "description" : "desc",
      "id" : 1,
      "name" : "asdfg"
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:05:40.497

[使用wiki 中](https://github.com/RestKit/RestKit/wiki/Object-mapping)有关对象映射的更新文档。不仅如此，您还可以下载当前带有示例（例如 Twitter 核心数据）的 RestKit master，其中也使用了嵌套对象。

# javascript - Javascript/canvas 如果不能正常工作

> ID：13797662
> 
> 赞同：-1
> 
> 时间：2012-12-10T08:53:40.987
> 
> 标签：javascript, canvas, conditional-statements, if-statement

当我单击 2 个单选按钮中的任何一个时，文本会重叠。我希望 if else 条件单独运行。这意味着当我单击较高的单选按钮时，它会检查 playertotal 是否高于 computertotal 并写入结果。与下部单选按钮相同。

![](../Images/63dfe3465b511001b8ee49bae3fd5b29.png)

这属于更长的代码：

```
function button1()
{
    // Checks if it's the players turn
    if(playerturn==true)
    {
        // Generates eyes for the dice
        var eyes3=Math.floor(Math.random()*6)+ 1;
        var eyes4=Math.floor(Math.random()*6)+ 1;
        //Shows the eyes
        showEyes(eyes3, 325);
        showEyes(eyes4, 450);

        computerturn=true;
        playerturn=false;

        playerTotal = eyes3+eyes4;
        //Checks if player has won
        if (higher=1 && playerTotal > computerTotal) 
        {
            pen.font = '20pt Calibri';
            pen.fillText('You have won',300,250);
        }
        else if (higher=1 && playerTotal < computerTotal) 
        {
            pen.font = '20pt Calibri';
            pen.fillText('You have lost',300,250);
        }

        if (lower=1 && playerTotal < computerTotal) 
        {
            pen.font = '20pt Calibri';
            pen.fillText('You have won!',300,250);
        }
        else if (lower=1 && playerTotal > computerTotal) 
        {
            pen.font = '20pt Calibri';
            pen.fillText('You have lost',300,250);
        }
    }
}

function higherRadioButton()
{
    higher = 1
    lower = 0
}

function lowerRadioButton()
{
    lower = 1
    higher = 0
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:02:18.547

在 JavaScript 中，比较运算符是`==`，而不是`=`。您的代码应如下所示：

```
if (higher == 1 && playerTotal > computerTotal) 
{
    //...
} 
```

对于所有其他陈述也是如此。

为避免将来出现此类问题，请始终将数字放在左侧：

```
if (1 == higher && playerTotal > computerTotal) 
{
    //...
} 
```

这样，如果您忘记了一个“=”，您将得到错误而不是错误的结果。

# jquery - jQuery 查找并替换为 div 的内容

> ID：13797665
> 
> 赞同：1
> 
> 时间：2012-12-10T08:53:46.647
> 
> 标签：jquery, replace

我正在寻找并用 jQuery 替换文本，但只找到了用其他静态文本替换静态文本的简单函数。我想弄清楚如何用另一个 div 的内容替换字符串。例如：

```
<div class="item-one">blue</div>

<p>My color is item one</p> 
```

我想要做的是将字符串“item one”替换为div 的内容，其中包含item-one 类。我想要的不仅仅是这个字符串的一个实例，而是页面上的所有实例。我真的很感激这方面的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:58:17.853

您可以使用`text`方法：

```
$('p').text(function(i, current){
   var c = $('.item-one').text();
   return current.replace('item one', c);
}) 
```

[http://jsfiddle.net/3eE4G/](http://jsfiddle.net/3eE4G/)

如果您有更多元素：

```
$('p').text(function(i, t) {
   var w = t.split(' ')[4];
   var c = $('.item-'+w).text();
   return t.replace('item '+w, c)
}) 
```

[http://jsfiddle.net/e7DRr/](http://jsfiddle.net/e7DRr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:36:27.873

如果您想拥有这种完全动态的效果，而不关心 div 有多少个类，以及应该使用 div 的内容多少次。

```
$(document).ready(function()
{
    var replaceClasses = [];
    var currentClasses;
    var i = 0;

    // Save all classes to be used for replacement in an array
    $('div').each(function()
    {
        currentClasses = $(this).attr('class').split(/\s+/);
        for (i; i < currentClasses.length; i++)
        {
            replaceClasses.push(currentClasses[i].replace('-', ' '));
        }
        i = 0;
    });

    // Loop all classes and replace text if applicable
    for (i; i < replaceClasses.length; i++)
    {
        var pText = $('p:contains("' + replaceClasses[i] + '")').text();

        $('p:contains("' + replaceClasses[i] + '")').each(function()
        {
            $(this).text($(this).text().replace(replaceClasses[i], $('.' + replaceClasses[i].replace(' ', '-')).text()));
        });
    }  

}); 
```

[http://jsfiddle.net/KzCCQ/](http://jsfiddle.net/KzCCQ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T08:57:57.853

```
$('p').text($('p').text().replace('item one',$('.item-one').text())); 
```

[jsFiddle 链接](http://jsfiddle.net/sRYWe/)。

提示：

*   如果“item-one”是唯一用途`ID`而不是类
*   您还应该向`<p>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T09:00:41.843

两种方式

首先是使用 .replace() 函数，它可以将一些静态文本替换为 div 中的文本，如下所示：

```
$("p").text($("p").text().replace("text", $("#some_text").text())); 
```

但更好的方法是将要更改的文本更改为“span”标签并使用 text() 函数

```
$("p span").text($(".item-one").text()); 
```

# asp.net - Silverlight API 中的 Youtube

> ID：13797667
> 
> 赞同：1
> 
> 时间：2012-12-10T08:53:50.263
> 
> 标签：asp.net, silverlight, youtube

我想在 Silverlight 应用程序中播放 Youtube 视频。有了它，我也想控制播放器本身并捕捉播放完成时的事件。

有没有好的API来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:53:39.780

这是一个看起来应该可行的可能解决方案：http: [//blogs.microsoft.co.il/blogs/mcs/archive/2011/06/10/embedding-youtube-in-silverlight-application.aspx](http://blogs.microsoft.co.il/blogs/mcs/archive/2011/06/10/embedding-youtube-in-silverlight-application.aspx)

# android - 引入android项目时FileIO异常

> ID：13797669
> 
> 赞同：-1
> 
> 时间：2012-12-10T08:54:11.150
> 
> 标签：android, file-io

这是一个游戏项目。引入项目并在虚拟机上运行后一直黑框。没有游戏画面。

```
package com.badlogic.androidgames.jumper;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;

import com.badlogic.androidgames.framework.FileIO;

public class Settings {
    public static boolean soundEnabled = true;
    public final static int[] highscores = new int[] { 100, 80, 50, 30, 10 };
    public final static String file = ".superjumper";

    public static void load(FileIO files) {
        BufferedReader in = null;
        try {
            in = new BufferedReader(new InputStreamReader(files.readFile(file)));  // 这里报异常
            soundEnabled = Boolean.parseBoolean(in.readLine());
            for(int i = 0; i < 5; i++) {
                highscores[i] = Integer.parseInt(in.readLine());
            }
        } catch (IOException e) {
            // :( It's ok we have defaults
        } catch (NumberFormatException e) {
            // :/ It's ok, defaults save our day
        } finally {
            try {
                if (in != null)
                    in.close();
            } catch (IOException e) {
            }
        }
    }

    public static void save(FileIO files) {
        BufferedWriter out = null;
        try {
            out = new BufferedWriter(new OutputStreamWriter(
                    files.writeFile(file)));
            out.write(Boolean.toString(soundEnabled));
            out.write("\n");
            for(int i = 0; i < 5; i++) {
                out.write(Integer.toString(highscores[i]));
                out.write("\n");
            }

        } catch (IOException e) {
        } finally {
            try {
                if (out != null)
                    out.close();
            } catch (IOException e) {
            }
        }
    }

    public static void addScore(int score) {
        for(int i=0; i < 5; i++) {
            if(highscores[i] < score) {
                for(int j= 4; j > i; j--)
                    highscores[j] = highscores[j-1];
                highscores[i] = score;
                break;
            }
        }
    }
} 
```

我断点并调试错误是`FileNotFoundException`。我`superjumper`在`mmnt/SdCard`.

代码没有问题。为什么它有例外？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:01:23.833

在编译您的项目时，编译器无法查看文件“.superjumper”是否存在。
如果找不到它，它将在运行时抛出异常。这里就是这种情况。

您需要知道要加载的“.superjumper”文件的确切位置。

# forms - Nodejs POST 请求多部分/表单数据

> ID：13797670
> 
> 赞同：31
> 
> 时间：2012-12-10T08:54:15.707
> 
> 标签：forms, api, node.js, http, post

我正在尝试通过 POST 请求上传照片[`request module`](https://github.com/mikeal/request)

根据自述文件，我应该能够做到这一点

```
var r = request.post("http://posttestserver.com/post.php", requestCallback)
var form = r.form()
form.append("folder_id", "0");
form.append("filename", fs.createReadStream(path.join(__dirname, "image.png")));

function requestCallback(err, res, body) {
    console.log(body);
} 
```

问题是，这行不通。我从测试服务器收到回复说它转储了 0 个帖子变量。

我已经通过这个小 html 页面确认服务器处于工作状态

```
<html>
    <body>
        <form action="http://posttestserver.com/post.php?dir=example" method="post" enctype="multipart/form-data">
            File: <input type="file" name="submitted">
            <input type="hidden" name="someParam" value="someValue"/>
            <input type="submit" value="send">
        </form>
    </body>
</html> 
```

所以问题是，我在请求模块上做错了什么？有没有更好的`multipart/form-data`使用节点发送的方法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-11T13:11:29.767

经过更多研究，我决定使用[`restler module`](https://github.com/danwrong/restler). 它使分段上传非常容易。

```
fs.stat("image.jpg", function(err, stats) {
    restler.post("http://posttestserver.com/post.php", {
        multipart: true,
        data: {
            "folder_id": "0",
            "filename": restler.file("image.jpg", null, stats.size, null, "image/jpg")
        }
    }).on("complete", function(data) {
        console.log(data);
    });
}); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-12-10T22:47:41.647

所以我自己刚刚完成了与这个的搏斗，这就是我学到的：

事实证明，请求或表单数据都没有为生成的正文流设置内容长度标头。

这是报告的问题：[https ://github.com/mikeal/request/issues/316](https://github.com/mikeal/request/issues/316)

[@lildemon](https://github.com/lildemon)发布的解决方案通过以下方式解决了这个问题：

1.  生成 FormData 对象
2.  得到它的长度
3.  发出请求并明确设置表单对象和内容长度标头

这是您的示例的修改版本：

```
var request = require('request');
var FormData = require('form-data');

var form = new FormData();
form.append("folder_id", "0");
form.append("filename", fs.createReadStream(path.join(__dirname, "image.png")));

form.getLength(function(err, length){
  if (err) {
    return requestCallback(err);
  }

  var r = request.post("http://posttestserver.com/post.php", requestCallback);
  r._form = form;     
  r.setHeader('content-length', length);

});

function requestCallback(err, res, body) {
  console.log(body);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-08-14T06:18:42.730

我的工作代码完全符合您的问题，但有一个例外。我的文件内容以这种方式附加：

```
form.append('file', new Buffer(...),
    {contentType: 'image/jpeg', filename: 'x.jpg'}); 
```

为了发现最终的选项参数，我不得不深入研究`form-data`. 但这给了我一个工作配置。（也许这是您所缺少的，但这当然取决于服务器。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-26T09:38:10.750

我还尝试了请求和表单数据模块，但无法上传文件。您可以使用有效的超级代理：

[http://visionmedia.github.io/superagent/#multipart-requests](http://visionmedia.github.io/superagent/#multipart-requests)。

```
var request = require('superagent');
var agent1 = request.agent();
agent1.post('url/fileUpload')
      .attach('file',__dirname + "/test.png")
      .end(function(err, res) {
          if (err) {
              console.log(err)
           }
       }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-24T06:47:38.423

尝试请求模块。它的工作方式与任何其他正常的发布请求一样

```
var jsonUpload = {  };
var formData = {
    'file': fs.createReadStream(fileName),
    'jsonUpload': JSON.stringify(jsonUpload)
};
var uploadOptions = {
    "url": "https://upload/url",
    "method": "POST",
    "headers": {
        "Authorization": "Bearer " + accessToken
    },
    "formData": formData
}
var req = request(uploadOptions, function(err, resp, body) {
    if (err) {
        console.log('Error ', err);
    } else {
        console.log('upload successful', body)
    }
}); 
```

# windows - 脚本来检查 Windows 服务是否正在运行以及它是否不启动该服务。视窗 2000

> ID：13797672
> 
> 赞同：1
> 
> 时间：2012-12-10T08:54:24.360
> 
> 标签：windows, batch-file, windows-2000

不幸的是，SC 命令在 W2000 上还不可用，所以我不能使用它。

我正在尝试检查 W2000 服务器上是否正在运行服务，如果它没有运行，脚本应该能够启动该服务。

如何在 Windows 2000 上执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:38:24.623

```
net start | find "yourservice"
if %errorlevel%==1 net start "yourservice" 
```

# excel - Excel 2010：如何将列中的信息用作行标题？

> ID：13797677
> 
> 赞同：0
> 
> 时间：2012-12-10T08:54:28.753
> 
> 标签：excel, excel-2010

我有这种格式的信息（空格分隔）：

```
CustomerNbr Employee        Employee      Employee      Employee
1234567890  Martha.Stewart  Tom.Brady     Master.Chief  Bart.Simpson
2345678901  Martha.Stewart  Tom.Brady     Bart.Simpson  
3456789012  Martha.Stewart  Master.Chief        
4567890123  Tom.Brady       Bart.Simpson        
5678901234  Tom.Brady       Bart.Simpson        
6789012345  Tom.Brady           
7890123456  Martha.Stewart          
8901234567  Master.Chief            
9012345678  Master.Chief 
```

我需要它采用这种格式（空格分隔）：

```
Employee       CustomerNbr    CustomerNbr     CustomerNbr   CustomerNbr  CustomerNbr
Martha.Stewart 1234567890     2345678901     3456789012     7890123456  
Tom.Brady      1234567890     2345678901     4567890123     5678901234   6789012345
Master.Chief   1234567890     3456789012     8901234567     9012345678  
Bart.Simpson   1234567890     2345678901     4567890123     5678901234 
```

有没有办法做到这一点？到目前为止，我已经搜索无济于事。想法是翻转它们之间的关系，但我无法通过 excel 找到方法，并且对宏了解不足，无法做如此复杂的事情。

我找到的最接近的是：[Return column header based on row header and cell value](https://stackoverflow.com/questions/11458744/return-column-header-based-on-row-header-and-cell-value)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T05:53:22.647

`A3:A11`: 初始表。

`A15`：员工姓名（“Martha.Stuart”）

`B15`: 数组公式（在公式窗口中按 Ctrl-Shift-Enter 插入；大括号将由 Excel 插入，而不是由用户插入）：

```
{=LEFT(OFFSET($A$1;SMALL(IF(NOT(ISERROR(SEARCH(" "&$A15&" ";$A$3:$A$11)));ROW($A$3:$A$11);IF(ISERROR(SEARCH(" "&$A15;$A$3:$A$11))=FALSE;IF(SEARCH(" "&$A15;$A$3:$A$11)=LEN($A$3:$A$11)-LEN($A15);ROW($A$3:$A$11);65000)));B$14)-1;0);10)} 
```

电子表格示例：[http ://www.bumpclub.ee/~jyri_r/Excel/Customer_number_transposition.xls](http://www.bumpclub.ee/~jyri_r/Excel/Customer_number_transposition.xls)

# cuda - 英特尔 C++ Composer 和 CUDA

> ID：13797678
> 
> 赞同：1
> 
> 时间：2012-12-10T08:54:34.577
> 
> 标签：cuda, icc

我在 VisualStudio2008 中创建了一个默认的 CUDA 项目。它适用于 MS 编译器。当我尝试 Intel C++ Composer 时，它失败了，如下所示：

```
1>------ Rebuild All started: Project: testCUDA, Configuration: Debug Win32 ------
1>Deleting intermediate files and output files for project 'testCUDA', configuration 'Debug|Win32'.
1>Compiling with CUDA Build Rule... (Microsoft VC++ Environment)
1>"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\\bin\nvcc.exe"  -G   -gencode=arch=compute_10,code=\"sm_10,compute_10\" -gencode=arch=compute_20,code=\"sm_20,compute_20\"  --machine 32 -ccbin "D:\Microsoft Visual Studio 9\VC\bin"    -Xcompiler "/EHsc /W3 /nologo /O2 /Zi  /MT  "  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v5.0\\include" -maxrregcount=0   --compile -o "Debug/kernel.cu.obj" kernel.cu  
1>nvcc : fatal error : A single input file is required for a non-link phase when an outputfile is specified
1>Project testCUDA : error: A tool returned an error code from "Compiling with CUDA Build Rule..."
1>Build log was saved at "file://C:\Users\JSC\Documents\Visual Studio 2008\Projects\testCUDA\testCUDA\Debug\BuildLog.htm"
1>testCUDA - 2 error(s), 0 warning(s), 0 remark(s)
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

我的平台是win7(32bit) CUDA5.0。我使用版本 11.1 到 Composer XE 2011 甚至 Composer XE 2013 的 Intel C++ 编译器。所有版本的 Intel C++ 编译器都会提供错误信息。

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:36:14.457

如[The CUDA 5.0 Release Notes](http://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#supported-operating-systems)中所述，在 Windows 上仅支持 Visual C++ 9.0/10.0 编译器。

在 Linux 上仅支持 GCC（有关特定版本，请参见上面的链接）。

# mysql - 如果参数为空，MySQL 存储过程会跳过 WHERE 条件

> ID：13797681
> 
> 赞同：2
> 
> 时间：2012-12-10T08:54:59.820
> 
> 标签：mysql, search, stored-procedures, multiple-columns

我正在编写应该基于几个过程参数搜索记录的存储过程。问题是并非总是必须传递所有参数，有时它们可​​能设置为 NULL。

有没有办法写出那样的东西？

```
CREATE PROCEDURE testProc(IN p_idWorker INTEGER, IN p_idEffect INTEGER)
BEGIN
    SELECT 
        * 
    FROM 
        CallHistory
    WHERE
        idWorker = IFNULL(p_idWorker, ANYTHING)
        AND 
        idEffect = IFNULL(p_idEffect, ANYTHING);
END$$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T08:56:24.970

像这样：

```
 ...
 WHERE (p_idWorker IS NULL OR idWorkder = p_idWorker)
   AND (p_idEffect IS NULL OR idEffect = p_idEffect); 
```

或者，就像您所做的那样，但不是`Anything`像这样使用列名：

```
 ...
   WHERE
        idWorker = IFNULL(p_idWorker, idWorker )
        AND 
        idEffect = IFNULL(p_idEffect, idEffect ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T08:59:40.060

您可以使用例如：

```
 idWorker = IFNULL(p_idWorker, idWorker) 
```

IF`p_idWorker is null`那么这个条件总是`TRUE`适用于所有行。如果不是，那么只有当`idWorker = p_idWorker`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T07:47:21.917

首先感谢 Mahmoud 和 valex 的宝贵时间，但两个答案都不是很好。例如，如果字段`idWorker`可以为空，它们将不起作用 - 它不会看到 field 所在的行`idWorker IS NULL`。

对此的最终解决方案看起来很奇怪，但它确实有效：

```
...
WHERE 
    idWorker = IFNULL(p_idWorker, idWorker)
    AND
    IFNULL(ch.idProjTime, -1) = IFNULL(p_idProjTime, IFNULL(ch.idProjTime, -1)) 
```

现在它也会看到`NULL`字段。

如果这样做是个坏主意（我可以看到可能的性能影响 - 连续 3 次出现这种`IFNULL`情况） - 请纠正我。

# php - Javascript-PHP 变量传递

> ID：13797684
> 
> 赞同：-1
> 
> 时间：2012-12-10T08:55:10.880
> 
> 标签：php, javascript, uploadify

我有一个 php 文件，其中从另一个 PHP 文件中获取一个变量。现在我想将此变量传递给另一个在 Javascript 中给出的 PHP 文件。我怎样才能做到这一点？这是 Uploadify 的代码

```
<head>

<script type="text/javascript" src="uploadifyit/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="uploadifyit/swfobject.js"></script>
<script type="text/javascript" src="uploadifyit/jquery.uploadify.v2.1.4.min.js">     
<script type="text/javascript">

$(document).ready(function() {

//alert('I am ready to use uploadify!');
$("#file_upload").uploadify({
    'uploader': 'uploadifyit/uploadify.swf',
    'script': 'uploadifyit/uploadify.php',
    'cancelImg': 'uploadifyit/cancel.png',
    'folder': 'uploads',
    'auto': false, // use for auto upload
    'multi': true,
    'queueSizeLimit': 200,
    'onQueueFull': function(event, queueSizeLimit) {
        alert(" You can upload " +    queueSizeLimit + " files at once");
        return false;
    },
    'onComplete': function(event, ID, fileObj, response, data) {
        // you can use here jQuery AJAX method to send info at server-side.
        $.post("insert.php", { name: fileObj.name},   function(info) {
            alert(info); // alert UPLOADED FILE NAME
        });
    }
     });

        });

       </script>

      </head>

      <body>
      <?php
      $tabname=$_GET['tabname'];
      ?>

      <form id="form1" name="form1" action="">
      <input type="file" id="file_upload" name="file_upload" /><br />
       <a href="javascript:$('#file_upload').uploadifyUpload();">Upload File</a>
      </form>
      </body>
      </html> 
```

请参阅该部分，$tabname 是我要在 insert.php 中使用的变量。我需要将此 $tabname 传递给 insert.php 并在其中使用它。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T08:59:07.587

您可以使用脚本数据标签：

```
'scriptData'     :{
    'variable1': '<?php echo $_GET["variable1"]; ?>',
    'variable2': '<?php echo $_GET["variable2"]; ?>'
}, 
```

或者，为什么不将变量存储在 a`$_COOKIE`或`$_SESSION`变量中？您可以在其他脚本中访问这些变量，而无需传递任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T08:58:41.167

将您的帖子行更改为：

```
$.post("insert.php?tabname="<?=$_GET['tabname'];?>, { name: fileObj.name},   function(info) 
```

# objective-c - NSSearchField 中的可点击搜索图标和褪色背景

> ID：13797685
> 
> 赞同：0
> 
> 时间：2012-12-10T08:55:12.987
> 
> 标签：objective-c, xcode, macos, cocoa, nssearchfield

我想做一个 NSSearchField，就像 Ecoute 3.0 中的那个。搜索字段中的搜索图标应该是可点击的，如果您点击它，它会展开和折叠。

![在此处输入图像描述](../Images/42e4b0544615a37fdebff752426d8c10.png) ![在此处输入图像描述](../Images/4afb40fb6455a0598e9a3a3c314855cd.png)

你怎么能做到这一点？我已经搜索了文档，但没有找到任何有用的东西。我可以使用动画代理来实现扩展，这很清楚。

另一件事是背景在展开/折叠时淡入/淡出。我怎样才能做到这一点？

我会感谢任何建议、示例代码等。

**编辑**

好的，我自己找到了第一部分。

```
- (void) resetSearchButtonCell {
    NSButtonCell *c= [[NSButtonCell alloc] init];
    [c setButtonType:NSMomentaryChangeButton];  // configure the button
    [c setBezelStyle:NSRegularSquareBezelStyle];    // configure the button
    [c setBordered:NO];
    [c setBezeled:NO];
    [c setEditable:NO];
    [c setImagePosition:NSImageOnly];
    [c setImage:[NSImage imageNamed:@"search"]];
    [c setAlternateImage:[NSImage imageNamed:@"search-pushed"]];
    [c setTarget:self];
    [c setAction:@selector(_search:)];
    [self setSearchButtonCell:c];
} 
```

现在，我创建了一个属性`isCollapsed`，我将其切换到`_search:`. 在`setIsCollapsed:`setter 方法中，我执行以下操作：

```
NSRect newRect = self.frame;

if (_isCollapsed) {
    newRect.size.width = kCollapsedWidth;
} else {
    newRect.size.width = kEXpandedWidth;
}

[[self animator] setFrameSize:newRect.size]; 
```

但是由于某种原因，当 NSSearchField 获得或失去焦点时，框架被重置为初始大小，即在 Interface Builder 中设置的大小。

谁能告诉我为什么？

**编辑**

我也解决了这个问题。这是自动布局，弄乱了动画。现在，唯一剩下的就是 background-alpha，它应该会改变。我可以重绘整个东西，但是是否有另一种解决方案，我可以只修改背景的 alpha 和取消按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:43:48.560

我想做类似的事情。ITSearchField 非常扎实和漂亮。但是，一旦获得焦点，我希望扩展搜索字段。很快就会发现 NSSearchfield 由许多组件和层组成。

这是我写的让它工作的内容...... 注意：它适用于 10.7 或更高版本。此外，您必须将 IB 中搜索字段控件宽度的布局约束连接到插座。

。H

```
@interface MySearchField : NSSearchField 
@end 
```

.m

```
#pragma mark - Implementation: Search Field Control

@interface MySearchField()
@property (readwrite, nonatomic, getter=isExpanded) BOOL expand;
@property (readwrite, nonatomic, getter=hasFocusRing) BOOL focusRing;
@property (readwrite, strong, nonatomic) NSTimer *expandTimer;
@property (readwrite, strong, nonatomic) IBOutlet NSLayoutConstraint *widthConstraint;
@property (readwrite, nonatomic) CGFloat searchWidth;
@end

static NSTimeInterval const kSearchFieldTime = 0.5;

@implementation MySearchField

@synthesize expand, focusRing;
@synthesize expandTimer, searchWidth;
@synthesize widthConstraint;

#pragma mark Timer Methods:

- (void) resizeSearchField {

    if ( self.hasFocusRing ) {

        if ( !self.isExpanded ) {

            self.searchWidth = self.widthConstraint.constant;
            [[self.widthConstraint animator] setConstant:(self.searchWidth * 2)];
            self.expand = YES;

    } } else {

        if ( (self.isExpanded) &&
            ((!self.stringValue) || ([self.stringValue isEqualToString:@""])) ) {

            [[self.widthConstraint animator] setConstant:self.searchWidth];
            self.expand = NO;
    } }
}

- (void) stopTimer {

    if ( self.expandTimer )
        [self.expandTimer invalidate];

    self.expandTimer = nil;
}

- (void) startTimer {

    [self stopTimer];

    SEL resizeSelector = @selector(resizeSearchField);
    NSMethodSignature *expandSignature = [MySearchField instanceMethodSignatureForSelector:resizeSelector];
    NSInvocation *expandInvocation = [NSInvocation invocationWithMethodSignature:expandSignature];
    [expandInvocation setSelector:resizeSelector];
    [expandInvocation setTarget:self];

    self.expandTimer = [NSTimer scheduledTimerWithTimeInterval:kSearchFieldTime invocation:expandInvocation repeats:NO];
}

#pragma mark Override Methods:

- (void) noteFocusRingMaskChanged {

    self.focusRing = !NSEqualRects(NSZeroRect, self.focusRingMaskBounds);
    [self startTimer];
    [super noteFocusRingMaskChanged];
}

@end 
```

好的，就是这样。当聚焦环发生变化并启动快速计时器方法时，您会收到通知。当您单击重置控件的搜索字段的取消按钮时，计时器是必需的。计时器唯一要做的就是触发 resizeSearchField 方法。

更新：哦，是的，不要忘记将 IB 中的 Search Field 控件的类设置为 MySearchField 或任何您想调用的名称。

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T13:04:11.960

我最终重绘了背景。像这样我能够设置它的alpha。

源代码在 Github 上可用：

[https://github.com/iluuu1994/ITSearchField](https://github.com/iluuu1994/ITSearchField)

# ios - 在点击识别器时识别表格单元格

> ID：13797687
> 
> 赞同：0
> 
> 时间：2012-12-10T08:55:28.730
> 
> 标签：ios, uitableview, uiscrollview, uigesturerecognizer

我的视图中有一个表格视图。单元格是使用自定义单元格创建的。我需要在表格视图单元格中显示一个大字符串所以我在滚动视图中添加了文本标签。当用户点击表格视图单元格时，我还需要执行一些代码。请看下面的代码：

```
 [cell.textLabelLine2 setFrame:CGRectMake(cell.textLabelLine2.frame.origin.x, cell.textLabelLine2.frame.origin.y, 500, cell.textLabelLine2.frame.size.height)];
   cell.scrollView.contentSize = CGSizeMake(cell.textLabelLine2.text.length*10 , 10);
   cell.scrollView.pagingEnabled = NO; 
```

问题是当用户触摸 Scroll View 上方时，不会调用 Tableview did select 方法。我为这个问题找到的解决方案是在滚动视图中添加一个手势识别器。但是在这个解决方案中，我们无法检查选择了哪个单元格（或哪个手势识别器）。谁能帮我找到解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:35:01.070

在带有滚动视图的解决方案中，您无法在滚动视图中滚动，因为gestureRecognizer“获得”了触摸。因此我根本不会使用滚动视图。

使标签调整为其内容的大小，例如：

```
 CGSize customTextLabelSize = [cell.customTextLabel.text sizeWithFont:cell.customTextLabel.font constrainedToSize:CGSizeMake(cell.customTextLabel.frame.size.width, 999999)];
    cell.customTextLabel.frame = CGRectMake(cell.customTextLabel.frame.origin.x, cell.customTextLabel.frame.origin.y, cell.customTextLabel.frame.size.width, customTextLabelSize.height); 
```

您还需要在 heightForRowAtIndexPath 中实现它

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    CGSize cellSize = [bigTextString sizeWithFont:customTextLabel.font constrainedToSize:CGSizeMake(generalCellWidth, 999999)];
    return cellSize.height;
} 
```

这样您就可以使用 didSelectRowAtIndex 方法。

* * *

* * *

如果您真的想使用滚动视图，请在 cellForRowAtIndexPath: 方法中向您的单元格添加一个按钮。使按钮与单元格一样大，并添加一个按钮标签，如下所示：

```
 UIButton *cellButton = [UIButton buttonWithType:UIButtonTypeCustom];
    cellButton.frame = CGRectMake(0, 0, cell.frame.size.width, cell.frame.size.height);
    cellButton.tag = indexPath.row;
    [cellButton addTarget:self action:@selector(cellButtonAction:) forControlEvents:UIControlEventTouchUpInside];
    [cell.contentView addSubview:cellButton]; 
```

然后加：

```
-(void)cellButtonAction:(UIButton*)sender
{
    //do something with sender.tag
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:04:32.273

将滚动视图放在滚动视图中通常是个坏主意。UITableView 也只是一个 UIScrollView。只有当它们在不同的轴上滚动时才有效，即外部滚动视图垂直滚动而内部滚动视图水平滚动。

对于您的特定场景，您必须自己触发选择。一旦你有了对单元格的引用，你就可以向表格视图询问它的 indexPath。然后，您将自己调用 didSelectRow... 的委托方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:00:28.110

您可以通过以下代码了解单元格

```
if(gestureRecognizer.state == UIGestureRecognizerStateBegan) {
    CGPoint p = [gestureRecognizer locationInView:[self tableView]];

    NSIndexPath *indexPath = [[self tableView] indexPathForRowAtPoint:p];

    if(indexPath != nil) {

        UITableViewCell *cell = [[self tableView] cellForRowAtIndexPath:indexPath];

                    ...
    }
} 
```

# animation - 如何在 Android 中创建具有动画效果的自定义可扩展列表视图？

> ID：13797690
> 
> 赞同：2
> 
> 时间：2012-12-10T08:55:34.237
> 
> 标签：animation, expandablelistview

我想在 android 中使用动画效果创建自定义可扩展列表视图。当我单击布局时，会显示一些 imageview 子项，然后单击其他布局显示其他子项...

提前感谢

# gcc - arm-linux-gcc 和 arm-none-linux-gnueabi 有什么区别

> ID：13797693
> 
> 赞同：71
> 
> 时间：2012-12-10T08:55:46.457
> 
> 标签：gcc, arm

arm-linux-gcc 和 arm-none-linux-gnueabi 和 arm-linux-gnueabi 工具链有什么区别？

它们的编译方式不同吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-10T09:33:20.013

工具链有一个松散的命名约定，例如`arch[-vendor][-os]-abi`.

*   `arch`适用于架构：**arm**，**mips**，**x86**，**i686** ...
*   `vendor`是工具链供应商：**苹果**，
*   `os`适用于操作系统：**linux**，**无**（裸机）
*   `abi`用于应用程序二进制接口约定：**eabi**，**gnueabi**，**gnueabihf**

对于你的问题，`arm-none-linux-gnueabi`也是`arm-linux-gnueabi`一样的。`arm-linux-gcc`实际上是 gcc 的二进制文件，它为 ARM 架构生成在 Linux 上运行的对象，并使用工具链提供的默认配置 (abi)。

一些不错的阅读：[工具链](http://web.eecs.umich.edu/~prabal/teaching/eecs373-f12/notes/notes-toolchain.pdf)。

# android - 在同时做两件事的两个部分上切割手机屏幕

> ID：13797697
> 
> 赞同：7
> 
> 时间：2012-12-10T08:56:22.060
> 
> 标签：android

我可以创建一个将手机屏幕分成两部分的程序吗？

这两个屏幕将同时做两件事，例如观看剪辑和读写短信。

我认为：1）我需要先创建一个家庭午餐应用程序。 [如何为 Android 创建自定义主屏幕替换应用程序？](https://stackoverflow.com/questions/3666771/how-can-i-create-a-custom-home-screen-replacement-application-for-android)

2）然后我可以在我的活动中启动两个片段。 [http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

3）最后，我在第一个片段中打开 app1，在第二个片段中打开 app 2。我可以这样做，在片段中打开应用程序吗？

任何其他想法都会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:46:48.297

我认为您需要**修改版本的 Android ROM**才能做到这一点。使用标准 ROM，您在任何给定时间只能在前台运行 1 个应用程序。

三星在 Galaxy Note 上做了类似的事情，允许你一边看视频一边做其他事情。

如果您**不想更改 ROM**，您可以在自己的应用程序上实现此功能，但不能在所有应用程序上实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T11:33:59.613

您可以自定义启动器和主屏幕和 lancher，查看下面的链接

[https://android.googlesource.com/platform/packages/apps/Launcher2.git](https://android.googlesource.com/platform/packages/apps/Launcher2.git)

[如何为 Android 创建自定义主屏幕替换应用程序？](https://stackoverflow.com/questions/3666771/how-can-i-create-a-custom-home-screen-replacement-application-for-android)

从 Eclipse 编译启动器/AOSP：

[Eclipse 上的 Android Launcher 应用程序编译](https://stackoverflow.com/questions/3837685/android-launcher-application-compilation-on-eclipse)

阅读本文以获取有关如何编译和运行自定义启动器的信息。 [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/zI9LPeU1mbc](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/zI9LPeU1mbc)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-22T14:22:35.963

我不是专家，但在我看来，您可以拥有一个包含两个片段的应用程序。顶部片段将显示视频，底部片段将显示消息。由于 Fragments 只有 API 11 及更高版本，您不必担心旧手机能够处理它。

您的第 3 步声明您将在片段中打开应用程序，我认为它们不是这样工作的。

> 您可以将片段视为活动的模块化部分，它有自己的生命周期，接收自己的输入事件，并且可以在活动运行时添加或删除（有点像“子活动”，您可以在不同的活动中重复使用）。

在此处阅读有关片段的更多信息：http: [//developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

# c# - 将 java 小程序嵌入到 C# 桌面应用程序中

> ID：13797703
> 
> 赞同：2
> 
> 时间：2012-12-10T08:57:10.193
> 
> 标签：c#, java, applet

我创建了一个网站，该网站使用第三方 java 小程序来完成一些任务。现在我需要将网站转换为桌面（Windows）应用程序。我相信我可以将网页转换为表单，但是 java 小程序呢？

是否可以将 java 小程序嵌入到 C# 桌面应用程序中？有什么方向可以走吗？这些小程序是第三方的，我没有任何源代码。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:44:50.573

尝试查看 Java Native Interface API 和[Using the Java Native Interface in C#](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC4QFjAA&url=http://www.codeproject.com/Articles/245622/Using-the-Java-Native-Interface-in-Csharp&ei=l67FUPWHF4ezhAfa0IGQDw&usg=AFQjCNE5wWTJ20s-b-rNFeSXehTTzy4Sdw)

# java - 为什么Java中存在已检查和未检查的异常

> ID：13797705
> 
> 赞同：2
> 
> 时间：2012-12-10T08:57:15.657
> 
> 标签：java, exception

> **可能重复：**
> [Java：已检查与未检查的异常解释](https://stackoverflow.com/questions/6115896/java-checked-vs-unchecked-exception-explanation)
> [为什么将异常命名为已检查和未检查？](https://stackoverflow.com/questions/13104251/why-are-exceptions-named-checked-and-unchecked)

为什么Java中的两种异常类型分别命名为“checked”和“unchecked”？选择此类异常的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:12:47.667

已检查的异常会扩展`java.lang.Exception`，而未检查的异常会扩展`java.lang.RuntimeException`，或者`java.lang.Error`.

`Exception`延伸`java.lang.Throwable`，而`RuntimeException`延伸`Exception`，和`Error`，像`Exception`，延伸`java.lang.Throwable`。

在决定是否应该使用已检查和未检查的异常时，请始终记住以下规则：

*   `Exception`S 是应用程序想要处理的情况。
*   `RuntimeException`S 是您（通常）由于编程错误而无法处理的情况。您不应该捕获`RuntimeException`S，它们应该在您的单元测试中作为目标，并在您的生产代码中修复。
*   `Error`S 是由于严重错误而无法处理的情况，例如系统问题（例如文件系统出现故障）。`Error`除非您正在为 JVM 构建诸如编译器之类的东西，否则您永远不应该抛出、捕获或子类化 an 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:09:27.230

类`RuntimeException`及其子类，以及类`Error`及其子类都是*未经检查的异常类*。**编译器不会强制它们在 throws 子句中声明。**`Throwable`属于层次结构的所有其他异常类都是*检查异常。*

*未经检查的异常类*在 java 中免于编译时检查，因为它们可以在程序中的许多点发生，并且很难或不可能从它们中恢复。它们还取决于程序员的逻辑。例如，`OutOfMemory Exception`当 JVM 无法为程序分配更多内存时抛出

# c# - Json.net：序列化/反序列化不适用于具有循环引用的 ISerializable 对象

> ID：13797707
> 
> 赞同：5
> 
> 时间：2012-12-10T08:57:33.073
> 
> 标签：c#, .net, json, serialization, json.net

前段时间我报告了一个[问题](https://stackoverflow.com/questions/13412359/json-net-issues-stackoverflowexception-is-thrown-when-serialising-circular-depe)，我在 Json.net 4.5 R11 中得到了修复。

如果我的循环引用属性`Manager`为 NULL，则序列化和反序列化工作正常。

但是，当循环引用属性`Manager`设置为 NON NULL 值时，它会在序列化字符串中被忽略，因此它会在反序列化中引发异常。

Json.net 问题库说问题出在您的代码中，但我无法弄清楚。有人可以在这里帮助我吗？

**问题：**

1.  下面的代码有问题吗？
2.  如果是，我应该怎么做才能解决问题？
3.  如果不是，那么应该在 Json.net 代码中做什么来解决这个问题？

**更多更新**：在当前使用二进制序列化的遗留应用程序中需要这样做。由于变化巨大，使用 Json 序列化标签标记所有涉及序列化的私有字段是一项繁重的工作。由于 Json.net 可以对 ISerializable 对象进行序列化，因此我们希望这样做。如果没有循环引用对象，则此方法有效。

**我的课程**

```
[Serializable]
class Department : ISerializable
{
    public Employee Manager { get; set; }
    public string Name { get; set; }

    public Department() { }

    public Department( SerializationInfo info, StreamingContext context )
    {
        Manager = ( Employee )info.GetValue( "Manager", typeof( Employee ) ); //Manager's data not found since json string itself does not have Employee property
        Name = ( string )info.GetValue( "Name", typeof( string ) );
    }
    public void GetObjectData( SerializationInfo info, StreamingContext context )
    {
        info.AddValue( "Manager", Manager );
        info.AddValue( "Name", Name );
    }
}

[Serializable]
class Employee : ISerializable
{
    public Department Department { get; set; }
    public string Name { get; set; }

    public Employee() { }

    public Employee( SerializationInfo info, StreamingContext context )
    {
        Department = ( Department )info.GetValue( "Department", typeof( Department ) );
        Name = ( string )info.GetValue( "Name", typeof( string ) );
    }

    public void GetObjectData( SerializationInfo info, StreamingContext context )
    {
        info.AddValue( "Department", Department );
        info.AddValue( "Name", Name );
    }
} 
```

**我的测试代码：**

```
JsonSerializerSettings jsonSS= new JsonSerializerSettings();
jsonSS.Formatting = Formatting.Indented;
jsonSS.ReferenceLoopHandling = ReferenceLoopHandling.Ignore; //If there is referenced object then it is not shown in the json serialisation
//jsonSS.ReferenceLoopHandling = ReferenceLoopHandling.Serialize; //Throws stackoverflow error
jsonSS.PreserveReferencesHandling = PreserveReferencesHandling.All;

Department department = new Department();
department.Name = "Dept1";

Employee emp1 = new Employee { Name = "Emp1", Department = department };
department.Manager = null;

string json1 = JsonConvert.SerializeObject( emp1, jsonSS );
//json1 = 
//            {
//  "$id": "1",
//  "Department": {
//    "$id": "2",
//    "Manager": null,
//    "Name": "Dept1"
//  },
//  "Name": "Emp1"
//}

Employee empD1 = JsonConvert.DeserializeObject<Employee>( json1, jsonSS ); //Manager is set as null

department.Manager = emp1; //Non null manager is set
string json2 = JsonConvert.SerializeObject( emp1, jsonSS ); //SEE Manager property is missing

//  json2 =          {
//  "$id": "1",
//  "Department": {
//    "$id": "2",
//    "Name": "Dept1"
//  },
//  "Name": "Emp1"
//}

Employee empD2 = JsonConvert.DeserializeObject<Employee>( json2, jsonSS );  //Throws exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-30T22:03:31.423

根据[khillang](https://stackoverflow.com/users/682105/khellang)的回答，它定位了 JSon.Net 在使用接口实现时无法处理循环引用的问题`ISerializable`，您可以尝试强制 JSon.Net 序列化程序忽略该`ISerializable`实现，而不实际删除该实现。
您应该能够通过使用属性装饰您的类（`Department`和`Employee`）来实现这一点。 我没有测试这是否真的解决了你的问题。`JsonObject`

引用[序列化指南](http://www.newtonsoft.com/json/help/html/SerializationGuide.htm)（强调我的）：

> 实现 ISerializable 的类型被序列化为 JSON 对象。序列化时，仅使用从 ISerializable.GetObjectData 返回的值；类型上的成员被忽略。反序列化时，调用带有 SerializationInfo 和 StreamingContext 的构造函数，传递 JSON 对象的值。
> 
> **在不需要此行为的情况下，可以将 JsonObjectAttribute 放置在实现 ISerializable 的 .NET 类型上，以强制将其序列化为普通 JSON 对象。**

由于您的问题和评论可以追溯到 2012 年，因此当时可能还没有此解决方案。即使在使用时，当前的 JSon.Net 实现也有可能处理循环引用`ISerializable`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:53:24.697

> 但是当循环引用属性管理器设置为 NON NULL 值时，它会在序列化字符串中被忽略，因此它会在反序列化中引发异常。

因为循环引用被忽略了。这就是 ReferenceLoopHandling.Ignore 的意义所在。

PreserveReferencesHandling 不适用于 ISerializable，因为必须在父值之前创建子值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:32:10.030

我会保持简短:)

1.  似乎是`ISerializable`接口搞砸了。如果您删除它，一切都会完美运行。

2.  你[*真的*有充分的理由](https://stackoverflow.com/questions/8933187/is-implementing-iserializable-interface-necessary-when-not-implementing-any-cust)在and中实现`ISerializable`接口吗？如果没有，只需将其删除。如果你这样做了，转到 3 ;)`Employee``Department`

3.  我不知道**Newtonsoft.Json**内部结构，但不知何故，它在实现时没有正确处理循环引用`ISerializable`。您可能应该在[GitHub 上](https://github.com/JamesNK/Newtonsoft.Json/issues)提出问题。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-14T14:41:23.617

看起来你真的不需要实现 Iserializable 接口。这种类结构很简单。我已经序列化了非常大的类，而不必走那么远。

如果您仍然遇到循环引用问题，请尝试以下操作：

1.  我相信 JSON.net 有一个格式化选项来忽略循环引用

    JsonSerializerSettings jsSettings = new JsonSerializerSettings(); jsSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;

2.  忽略违规属性

3.  重组你的班级

# php - 变量名长度对 PHP 的性能有影响吗？

> ID：13797709
> 
> 赞同：8
> 
> 时间：2012-12-10T08:57:42.277
> 
> 标签：php, performance, variable-names

我已经看到这个[变量名长度对性能 C# 有影响吗？](https://stackoverflow.com/questions/2443164/does-variable-name-length-matter-for-performance-c)主题和关于 php 的相同问题。

我的同事（前端）已经对 $o、$r、$x、$m、$c 等所有内容进行了编码，并激发了它的最佳性能。我真的很怀疑它，代码变得难以阅读。

1.  $o - 对象或 obj
2.  $m - $型号
3.  $r - $query_result 或 $result
4.  $x - $xml_node

每件事看起来都像

```
 if ( isset ( self::$o[ self::$x -> name ] ) ) :

            $c = 'ClassPrefix_' . self::$o[ self::$x -> name ];

            $o = new $c;

            self::$x -> read ( ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T09:01:16.617

变量名称更多地作为程序员助手存在 - 当解释程序或脚本时，它们被转换为内存位置。将来修改/调试代码时，较短的变量只会对程序员的性能产生负面影响。

混淆是一种广泛使用的技术，它涉及用单字符/多字符变量名称替换变量名称，但它用于尝试从源代码易于获得/易于提取的项目中进行逆向工程/提升核心技术更加困难。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T08:59:21.120

虽然它可能会在这里节省一个字节，在那里节省一个字节，不，一个 iota 并不重要，而且您不会通过使用短变量名看到真正的内存或性能节省。

如果您真的担心内存使用和性能，请分析您的代码。 [xdebug](http://xdebug.org/)和[xhprof](https://github.com/facebook/xhprof)是完成它的*好工具。*您甚至可以在生产机器上安装 xhprof。一旦您实际测量了性能和内存使用情况，您就可以针对代码中的*真正*问题。

此外，如果可以，请确保您运行的是 5.4。它在性能和内存使用方面引入了一些巨大的改进。

# iphone - 如何将 pdf 文件保存在 iPhone 内存中，并通过使用钛的 pdf 文件打开器应用程序访问它

> ID：13797712
> 
> 赞同：0
> 
> 时间：2012-12-10T08:57:49.903
> 
> 标签：iphone, ios, ipad, titanium-mobile

我是我的应用程序中钛的新手，我需要使用钛在 iOS 中下载并保存一个 pdf 文件，第三方 pdf 查看器应用程序可以访问下载的文件。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T00:19:06.157

1- 确保您的网络服务返回 PDF 文件。

2-使用文件系统来管理您的文件

```
var xhr = Titanium.Network.createHTTPClient({
    onload : function() {

        var f = Ti.Filesystem.getFile(Ti.Filesystem.externalStorageDirectory, 'file.pdf');
        f.write(this.responseData);

        tmpFile = Ti.Filesystem.createTempFile();
        var newPath = tmpFile.nativePath + "." + f.extension();
        Ti.API.info("newPath: " + newPath);
        tmpFile = Ti.Filesystem.getFile(newPath);
        tmpFile.write(f.read());

    },
    timeout : 10000
});
xhr.open('GET', 'your webservice');
xhr.send(); 
```

现在您使用 pdf 查看器并从我在 Android 上测试的 externalStorageDirectory 打开 PDF，它可以工作了！

# java - JENA - 从 RDF 中获取价值

> ID：13797713
> 
> 赞同：0
> 
> 时间：2012-12-10T08:57:56.677
> 
> 标签：java, xml, rdf, sparql, jena

抱歉，我又来了，因为我有一个快速的问题，例如，如果我有这个 rdf：

```
<rdf:RDF
 xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
 xmlns:ts="http://www.test.com/testModel.owl#">  
<ts:Entity rdf:ID="1234_test"> 
   <ts:Resource> 
       <ts:testProp rdf:datatype="http://www.w3.org/2001/XMLSchema#string">test_ID_test</ts:testProp>
 </ts>
</ts>
</rdf:RDF> 
```

我如何提取值 test_ID_test ？？？如果我想使用 SPARQL 我该怎么做耶拿？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:37:00.527

要使用 Jena 运行 SPARQL 查询，请参阅[ARQ 文档](http://jena.apache.org/documentation/query/app_api.html)或[Jena SPARQL](http://jena.apache.org/tutorials/sparql.html)教程。

至于您的查询，这取决于您要如何识别资源。如果您*先验*地知道资源的 URI，则很简单：

```
prefix ts: <http://www.test.com/testModel.owl#>
select ?tp_value where {
  ts:1234_test ts:testProp ?tp_value
} 
```

如果您碰巧只知道它是 type 的资源`Entity`，那么查询只会稍微多一些：

```
prefix ts: <http://www.test.com/testModel.owl#>
select ?tp_value where {
  ?entity a ts:Entity ;
            ts:testProp ?tp_value
} 
```

# .net - WCF服务返回不同的客户端

> ID：13797716
> 
> 赞同：2
> 
> 时间：2012-12-10T08:58:03.410
> 
> 标签：.net, wcf, callback, file-transfer, nettcpbinding

我有一个 WCF 服务，用于将文件分发给以下列方式工作的客户端：

1.  客户端向服务发送文件
2.  其他客户端轮询请求文件的服务
3.  如果服务有任何文件，它会将它们作为 poll 方法的结果返回

问题在于，当通过慢速 Internet 连接处理大文件时，该服务在将文件返回给客户端时似乎会阻塞。

当我尝试从另一个客户端连接到服务时，它永远不会响应，直到正在进行的传输完成。我在服务上也有一个计时器，可以写出日志条目。这些也会停止，直到传输完成。

我想我遗漏了一些东西，但我是 WCF 的新手，不确定我遗漏了什么以防止服务阻塞。

我想我可以使用回调并在单独的线程中发送文件，但我不知道这是否是个好主意，因为我无法确定合适的`SendTimeout`.

我正在使用 net/tcp 绑定。

# jquery - 深入研究 Highcharts 中的 ColumnChart 滚动条问题

> ID：13797719
> 
> 赞同：0
> 
> 时间：2012-12-10T08:58:14.593
> 
> 标签：jquery, charts, highcharts, pie-chart

我正在尝试使用 Highcharts 构建向下钻取图表。
我有一个饼图。
单击饼图时，我正在尝试显示柱形图。
[我的 jsfiddle 链接](http://jsfiddle.net/nagoba/cberN/1/)
在柱形图中，我需要滚动条。因此我写了

```
xAxis:{
min:4
} 
```

在图表选项中。现在，当我单击任何饼图时。我没有显示任何列。
应该怎么做才能使向下钻取到柱状图有滚动条？
任何帮助将不胜感激。
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:20:23.557

您需要在钻取中添加类型参数，以查看非常简单的示例：

[http://jsfiddle.net/NULTY/389/](http://jsfiddle.net/NULTY/389/)

```
setChart(drilldown.name, drilldown.categories, drilldown.data, drilldown.color, drilldown.level, drilldown.type); 
```

# sql - 我如何交叉表此表

> ID：13797724
> 
> 赞同：3
> 
> 时间：2012-12-10T08:58:34.560
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

我正在使用 sql server 2008，我想交叉表这个表

```
Month   Affec   KPI     Total   KPI_%   Out     rep_in_10  ftm
Jan-11  30565   34623   42003   82.4    7380    7003       5024
Jan-12  20955   25915   27857   93      1942    4754       3518
Feb-11  27754   27757   36483   76.1    8726    5648       4189
Feb-12  19513   25188   26962   93.4    1774    5768       4185
Mar-11  22838   23758   29951   79.3    6193    4394       3282
Mar-12  18778   25098   26177   95.9    1079    5784       4105
Apr-11  20235   21950   25917   84.7    3967    3895       2967 
```

到

```
 Jan-11  Jan-12  Feb-11  Feb-12  Mar-11  Apr-11
Affec       30565   
KPI         34623   
Total       42003   
KPI_%       82.4         
Out         7380    
rep_in_10   7003 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:05:16.053

在我看来，你不应该这样做。您可以使用 PHP 或您正在使用的任何东西在表示层上轻松实现这一点。数据库是用来获取数据的，而不是用来很好地格式化它的。将 Mahmoud 的回答更多地视为概念证明。但是查询永远不会像您现在获取数据的查询一样快。维护可能是反对它的另一个论据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:58:14.737

像这样：

```
;WITH UNpivoted
AS
(
  SELECT MonthsValue, Value, month
  FROM (SELECT [Month], 
        CAST([Affec] AS VARCHAR(10)) Affec ,
        CAST([KPIprecent] AS VARCHAR(10)) KPIprecent,
        CAST([Total] AS VARCHAR(10)) Total, 
        CAST([KPI] AS VARCHAR(10)) KPI, 
        CAST([Out] AS VARCHAR(10)) [Out],
        CAST([rep_in_10] AS VARCHAR(10)) [rep_in_10], 
        CAST([ftm] AS VARCHAR(10)) ftm
        FROM table1
       ) t
  UNPIVOT
  (
    MonthsValue FOR Value IN([Affec], 
                             [KPIprecent], 
                             [Total], 
                             [KPI],        
                             [Out], 
                             [rep_in_10], 
                             [ftm])
  ) u
)
  SELECT
    value,
    [Jan-11], 
    [Jan-12], 
    [Feb-11], 
    [Feb-12],
    [Mar-11], 
    [Mar-12], 
    [Apr-11]
  FROM
  (
    SELECT monthsvalue, value, month
    FROM Unpivoted
  ) t
  PIVOT
  (MAX(monthsvalue) for Month IN ([Jan-11], 
                                 [Jan-12], 
                                 [Feb-11], 
                                 [Feb-12],
                                 [Mar-11], 
                                 [Mar-12], 
                                 [Apr-11])
  ) p; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/f4544/6)

这会给你：

```
|      VALUE | JAN-11 | JAN-12 | FEB-11 | FEB-12 | MAR-11 | MAR-12 | APR-11 |
-----------------------------------------------------------------------------
|      Affec |  30565 |  20955 |  27754 |  19513 |  22838 |  18778 |  20235 |
|        ftm |   5024 |   3518 |   4189 |   4185 |   3282 |   4105 |   2967 |
|        KPI |   82.4 |   93.0 |   76.1 |   93.4 |   79.3 |   95.9 |   84.7 |
| KPIprecent |  34623 |  25915 |  27757 |  25188 |  23758 |  25098 |  21950 |
|        Out |   7380 |   1942 |   8726 |   1774 |   6193 |   1079 |   3967 |
|  rep_in_10 |   7003 |   4754 |   5648 |   5768 |   4394 |   5784 |   3895 |
|      Total |  42003 |  27857 |  36483 |  26962 |  29951 |  26177 |  25917 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:07:21.690

对于这种类型的数据转换，您将需要使用该[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数，然后[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)在 SQL Server 中应用该函数。

有两种方法可以执行此操作，或者使用静态版本对值进行硬编码，使用动态 sql 将值生成为运行时。

**静态版本：**

这`UNPIVOT`部分从您的多个列中获取数据并将其转换为两行。*请注意，使用 unpivot 要记住的一件事是数据类型必须相同。因此，您可能必须对数据执行数据类型转换。*：

```
select [Month], value, col
from
(
  select DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4)) Month,
    [Affec], [KPI], [Total], [KPI_%], [Out], [rep_in_10], [ftm]
  from yourtable
) src
unpivot
(
  value
  for col in ([Affec], [KPI], [Total], [KPI_%], [Out], [rep_in_10], [ftm])
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/19462/6)

结果：

```
|         MONTH | VALUE |       COL |
-------------------------------------
|  January-2011 | 30565 |     Affec |
|  January-2011 | 34623 |       KPI |
|  January-2011 | 42003 |     Total |
|  January-2011 |  82.4 |     KPI_% |
|  January-2011 |  7380 |       Out |  ---etc 
```

然后您将其`PIVOT`应用于月份：

```
select *
from
(
  select [Month], value, col
  from
  (
    select DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4)) Month,
      [Affec], [KPI], [Total], [KPI_%], [Out], [rep_in_10], [ftm]
    from yourtable
  ) src
  unpivot
  (
    value
    for col in ([Affec], [KPI], [Total], [KPI_%], [Out], [rep_in_10], [ftm])
  ) unpiv
) src
pivot
(
  max(value)
  for month in ([January-2011], [February-2011], [March-2011],
             [April-2011], [January-2012], [February-2012], [March-2012])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/19462/7)

结果：

```
|       COL | JANUARY-2011 | FEBRUARY-2011 | MARCH-2011 | APRIL-2011 | JANUARY-2012 | FEBRUARY-2012 | MARCH-2012 |
------------------------------------------------------------------------------------------------------------------
|     Affec |        30565 |         27754 |      22838 |      20235 |        20955 |         19513 |      18778 |
|       ftm |         5024 |          4189 |       3282 |       2967 |         3518 |          4185 |       4105 |
|       KPI |        34623 |         27757 |      23758 |      21950 |        25915 |         25188 |      25098 |
|     KPI_% |         82.4 |          76.1 |       79.3 |       84.7 |           93 |          93.4 |       95.9 |
|       Out |         7380 |          8726 |       6193 |       3967 |         1942 |          1774 |       1079 |
| rep_in_10 |         7003 |          5648 |       4394 |       3895 |         4754 |          5768 |       5784 |
|     Total |        42003 |         36483 |      29951 |      25917 |        27857 |         26962 |      26177 | 
```

**动态版本：**

上面的方法很好用，如果你有一个已知数量的值，但你的值是未知的，那么你会想要使用动态 sql。我猜你会想要一个动态版本，因为你会有未知数量的日期：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsUnpivot = STUFF((SELECT DISTINCT ',' 
                      + quotename(c.name)
                    from sys.columns as C
                   where C.object_id = object_id('yourtable') and
                         C.name not in ('Month')
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @cols = STUFF((SELECT ',' + QUOTENAME(DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4))) 
                    from yourtable
                    group by [Month]
                    order by [Month]
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT col,' + @cols + ' from 
             (
               select [Month], value, col
              from
              (
                select DateName(month,[Month]) +''-''+Cast(datepart(year, [month]) as varchar(4)) Month,
                  [Affec], [KPI], [Total], [KPI_%], [Out], [rep_in_10], [ftm]
                from yourtable
              ) src
              unpivot
              (
                value
                for col in ('+@colsunpivot+')
              ) unpiv
            ) x
            pivot
            (
              max(value)
              for [Month] in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/89353/12)

结果将与动态版本相同。

**UNION ALL/CASE 与聚合：**

最后，如果您无权访问`UNPIVOT`or`PIVOT`函数，那么您可以使用 a`UNION ALL`来取消透视，并使用带有 a 的聚合函数`CASE`来透视数据：

```
select col,
  max(case when month='January-2011' then value end) [January-2011],
  max(case when month='February-2011' then value end) [February-2011],
  max(case when month='March-2011' then value end) [March-2011],
  max(case when month='April-2011' then value end) [April-2011],
  max(case when month='January-2012' then value end) [January-2012],
  max(case when month='February-2012' then value end) [February-2012],
  max(case when month='March-2012' then value end) [March-2012]
from
(
  select DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4)) Month,
    [Affec] value,
    'Affec' col
  from yourtable
  union all
  select DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4)) Month,
    [KPI] value,
    'KPI' col
  from yourtable
  union all
  select DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4)) Month,
    [Total] value,
    'Total' col
  from yourtable
  union all
  select DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4)) Month,
    [KPI_%] value,
    'KPI_%' col
  from yourtable
  union all
  select DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4)) Month,
    [rep_in_10] value,
    'rep_in_10' col
  from yourtable
  union all
  select DateName(month,[Month]) +'-'+Cast(datepart(year, [month]) as varchar(4)) Month,
    [ftm] value,
    'ftm' col
  from yourtable
) src
group by col 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/19462/9)

# c# - 日期时间和文化信息

> ID：13797727
> 
> 赞同：26
> 
> 时间：2012-12-10T08:58:49.773
> 
> 标签：c#, datetime, cultureinfo

我的代码中有这个：

```
var date1 = DateTime.ParseExact(date, "dd.MM.yyyy HH:mm:ss", System.Globalization.CultureInfo.InvariantCulture); 
```

当我现在的文化是荷兰语 ( `nl-NL`) 而不是 5 月 1 日时，我会得到 1 月 5 日。

我认为错误在第二个参数`dd.MM.yyyy HH:mm:ss`中。

有没有办法使用`CultureInfo`类来解决这个问题？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-10T09:02:51.293

您可以尝试以下方法：

```
System.Globalization.CultureInfo cultureinfo =
        new System.Globalization.CultureInfo("nl-NL");
DateTime dt = DateTime.Parse(date, cultureinfo); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T09:02:44.633

使用`CultureInfo`类来改变你的文化信息。

```
var dutchCultureInfo = CultureInfo.CreateSpecificCulture("nl-NL");
var date1 = DateTime.ParseExact(date, "dd.MM.yyyy HH:mm:ss", dutchCultureInfo); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:01:05.760

`InvariantCulture`类似于`en-US`，所以我会改用正确的`CultureInfo`：

```
var dutchCulture = CultureInfo.CreateSpecificCulture("nl-NL");
var date1 = DateTime.ParseExact(date, "dd.MM.yyyy HH:mm:ss", dutchCulture); 
```

[**演示**](http://ideone.com/DfiVQa)

> 当文化是我们的时候呢？我必须为那里的每一种语言编写代码吗？

如果您想知道如何在“en-us”等另一种文化中显示日期，您可以使用`date1.ToString(CultureInfo.CreateSpecificCulture("en-US"))`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-12T09:42:18.040

试试看..它会工作

字符串文本=“2021 年 3 月 15 日”；

DateTime.ParseExact(text, "dd/M/yyyy", CultureInfo.InvariantCulture);

# java - ZipFile 抛出错误，但 ZipInputStream 能够解压缩存档

> ID：13797733
> 
> 赞同：7
> 
> 时间：2012-12-10T08:59:18.573
> 
> 标签：java, zip, winzip

我遇到了**java.util.zip.*的奇怪行为**

我有一个 zip 文件，解压后会发生以下情况

```
ZipFile zipfile = new ZipFile(file, ZipFile.OPEN_READ); 
```

这是确切的错误消息

```
java.util.zip.ZipException: error in opening zip file
at java.util.zip.ZipFile.open(Native Method)
at java.util.zip.ZipFile.<init>(ZipFile.java:127)
at java.util.zip.ZipFile.<init>(ZipFile.java:143)
at com.basware.ExtractZip.unpack(ExtractZip.java:27)
at com.basware.ExtractZip.main(ExtractZip.java:17) 
```

但是，如果我使用以下代码，它可以打开存档而不会出现任何错误

```
try {
     BufferedOutputStream dest = null;       
     File file = new File("File_Path");        
     FileInputStream fis = new FileInputStream(file);
     ZipInputStream zis = new ZipInputStream(new BufferedInputStream(fis));
     ZipEntry entry;
     while((entry = zis.getNextEntry()) != null) {
        System.out.println("Extracting: " +entry);
        int count;
        byte data[] = new byte[BUFFER];
        // write the files to the disk
        FileOutputStream fos = new 
      FileOutputStream(entry.getName());
        dest = new 
          BufferedOutputStream(fos, BUFFER);
        while ((count = zis.read(data, 0, BUFFER)) 
          != -1) {
           dest.write(data, 0, count);
        }
        dest.flush();
        dest.close();
     }
     zis.close(); 
```

请注意，文件是使用 WinZIP 压缩的。

我的问题是由于 ZipFile 和 ZipInputStream 几乎相同，为什么 ZipFile 会给出异常以及为什么它无法执行解压缩。

编辑：问题是如果我使用 WinZip 工具压缩文件，然后使用列出的程序解压缩它，它工作正常。但是，这个问题专门针对来自外部来源的档案（外部来源声称他们正在使用 WinZip）。最重要的是，如果我使用 WinZip 工具打开相同的存档（外部存档），它会显示和解压缩文件。但是这个 JAVA 特定代码（ZipFile）根本不起作用。

编辑：我无法弄清楚为什么 java 本机代码不适用于我的 ZIP 档案，但 apache compress 解决了我的问题。它按照 Ian Roberts 的建议为我工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:20:03.853

`ZipFile`尝试解析 zip 末尾的“中央目录”，以构建允许您按名称访问各个条目的数据结构。`ZipInputStream`没有，它只查看每个条目的本地标题，因为它从上到下读取文件。因此，看起来您的文件具有良好的条目，但由于某种原因，中央目录已损坏。

有很多可能性，例如[条目名称中非 ASCII 字符的编码](http://ant.apache.org/manual/Tasks/zip.html#encoding)问题，或者 zip 包含超过 64k 的条目。我会尝试 ZipFile 的[commons-compress](http://commons.apache.org/compress/)实现——即使它不起作用，它也应该给你一个比你从 java.util.zip 得到的“有问题”更具体的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:21:53.650

除了 Ian Robert 的回答，如果 Java 7 是一个选项，您可能希望回避旧`java.util.zip`库，转而使用[ZIP 文件系统提供程序](http://docs.oracle.com/javase/7/docs/technotes/guides/io/fsp/zipfilesystemprovider.html)。

# html - div的顺序，vs css左右浮动

> ID：13797735
> 
> 赞同：0
> 
> 时间：2012-12-10T08:59:25.770
> 
> 标签：html, css-float, positioning

我正在尝试设计一些基本上具有以下结构的 HTML（它是由一个可怕的 PHP 脚本生成的，如果我可以避免的话，我不想使用它）。

```
<div class="outer">
  <div class="imageContainer"><img src="image42.png" /></div>
  <h1>The Title String</h1>
  <div class="description">Lorem ipsum dolor sit amet, ... </div>
  <div class="details">These are the details...</div>
</div> 
```

我希望`div.imageContainer`向左浮动，`div.details`向右浮动，描述文本在它们之间向下流动（如果有很多描述文本，则在左侧的图像下方）。

下面的 CSS 获得了 the`div.imageContainer`和`div.description`右边，但是把`div.details`下面的和放在描述的右边，看起来好像它已经被赋予了 a `"clear:left"`（实际上，它完全在 之外`div.outer`）：

```
.imageContainer { float: left; }
.description    { width: 50%;  }
.details        { width: 50%;
                  float: right; } 
```

根据我在 SO 上找到的其他几篇帖子的建议，我尝试添加：

```
.outer          { overflow: hidden; } 
```

它延长了 the`div.outer`以便它包含`div.details`- 但`div.details`相对于`div.description`.

在我的示例 HTML 中，我发现如果我交换`div.description`and`div.details`标记的顺序，我会得到它看起来就像我想要的一样。就*示例而言，这很好，但并不能帮助我避免深入研究那些生成我**真正*想要样式化的 HTML 的极其可怕的 PHP 代码。：-/

有什么办法让我只用 CSS 来完成这个吗？

（我意识到我可以用 Javascript/jQuery 摆弄 DOM，但这对我来说似乎很笨拙。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:56:24.807

我在 JSBin.com 中为您的请求创建了一个[示例。](http://jsbin.com/exejuq/1)

在示例中，我将`float:left;`样式应用于`div.description`元素并清除了元素的浮动`div.outer`。

[在此处](http://jsbin.com/exejuq/1/edit)检查更新的源

# xcode - 为什么编译器看不到@end？

> ID：13797736
> 
> 赞同：0
> 
> 时间：2012-12-10T08:59:30.840
> 
> 标签：xcode

我有 2 个类，一个 NSObject 和一个 NSView。没有 AppDelegate。

即使方法在@implementation 和@end 之间，我也遇到了一个硬错误“方法定义不在@implementation 上下文中”。在@implementation 之前移动#import 消除了这一点，但是来自另一个文件的变量是未知的。为了摆脱它，我结束了 // 注释掉 .h 和 .m 文件中的所有代码行。除了@interfaces、@implementations 和@ends 之外，没有剩下任何代码。

我仍然收到警告“@end 必须出现在实现上下文中。” 其中一个出现在@end 之后立即出现！

我没有尝试在这个程序中使用 IB。

其他程序编译正确，我认为他的代码是正确的，它应该可以工作。

编译器是否有某种方式卡住了？OSX 10.6.8，Xcode 3.2.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:04:41.997

我放弃了那个项目，创建了一个新项目，并从坏项目中复制并粘贴了文本。新项目适用于相同的旧文本。
然后我反复运行 memtest 和 Applejack 来清理。硬件没问题。

可能编译器很不稳定；今年我不得不这样做几次。上次有错误信息说编译器有分区问题；谷歌链接说要升级，也许新版本会解决这个问题。所以我安装了 Xcode 3.2.6，不幸的是，它产生了同样的错误。再次复制并粘贴到新项目是必要的。

# javascript - jQuery 按钮状态激活

> ID：13797738
> 
> 赞同：4
> 
> 时间：2012-12-10T08:59:32.223
> 
> 标签：javascript, jquery, jquery-ui

如何使 jQuery UI 按钮维护`ui-state-active`？

我有一个按钮，我想成为一个切换按钮。所以当我激活它应该保持活跃。

目前，如果我设置`ui-state-active`一个按钮，如果我将鼠标悬停在它上面，它将被删除。

按钮的标记只是：

```
this.button = $('<div>')
    .html(this.text)
    .addClass(this.options.baseClass)
    .attr('title', this.getTitle())
    .click(this.click.bind(this))
    .button(); 
```

而且按钮必须是 a `div`，不能是 a `checkbox`。

？？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T20:37:41.077

## 简单的解决方法

另一个建议是`ui-state-highlight`改用。

## 手动处理悬停

除了使用`checkbox`&`label`组合而不是 a之外`div`，我使用的唯一解决方法是从按钮初始化后取消绑定`mouseover`& ，然后将我自己的/函数绑定到处理我自己切换的按钮。`mouseout``mouseover``mouseout``ui-state-hover`

```
this.button = $('<div>')
    .html(this.text)
    .addClass(this.options.baseClass)
    .attr('title', this.getTitle())
    .click(this.click.bind(this))
    .button()
    .unbind('mouseover mouseout hover')
    .bind('mouseover', function() {
        $(this).addClass('ui-state-hover');
    }).
    bind('mouseout', function() {
        $(this).removeClass('ui-state-hover');
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T05:17:50.560

Using ui-state-highlight would be easy for you. Instead maintaining the state of ui-state-active, you can assign the above markup to this ui-state-highlight.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T07:59:32.260

Not strictly legal, but try adding a `type="checkbox"` attribute to your div or perhaps do `this.button.type = 'checkbox'` The button will still be a `div`, but you might get the effect you want.

The other day I was doing some soul searching, tracking down a similar problem, and ended up at the following "offending" lines in jQuery UI:

```
 var self = this,
        options = this.options,
        toggleButton = this.type === "checkbox" || this.type === "radio",
        hoverClass = "ui-state-hover" + ( !toggleButton ? " ui-state-active" : "" ),
        focusClass = "ui-state-focus"; 
```

A bit after that there is some code that removes the `hoverClass` from the button on `mouseout`. Essentially you need to force `toggleButton` true.

***This is 10 out of 10 hackery, though. Use at your own risk.***

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:59:41.023

I suppose if styling is the issue, what you can do is build the button manually, something like:

```
this.button = $('<div>')
    .addClass(this.options.baseClass)
    .addClass("ui-state-default ui-button ui-button-text-only ui-corner-all")
    .attr('title', this.getTitle())
    .append('<span class="ui-button-text">button text</span>')
    .hover(function() {
        $(this).toggleClass('ui-state-hover');
    })
    .click( function() {
        this.toggleClass('ui-state-active');
        // anything else you need
    }; 
```

This makes it themeroller compatible (the classes don't change between themes). Of course you can replace "ui-button-text-only" with the icon version if you prefer... (I've used this on my own projects, it does the trick)

# php - 无论用户是通过 facebook connect 还是我自己的表单登录，如何开始会话？

> ID：13797740
> 
> 赞同：1
> 
> 时间：2012-12-10T08:59:40.023
> 
> 标签：php, facebook, forms, login, connect

我提供了两个登录/注册选项：facebook 连接和我自己的登录/注册表单。

我想在用户登录后将他们带到同一页面，无论他们使用 fb connect 还是我的表单。

我可以让它为一个或另一个工作。因此，如果用户通过 fb connect 登录，他们会转到一个页面，例如：

```
//$_SESSION['user'] seems to be the facebook session. 
if(!isset($_SESSION['user'])) { 
   echo "sorry"; 
} else { 
   include"myconfig.php";
   $email = GetSQLValueString($_SESSION['user'], "text");
   //The email from fb has already been inserted into my mysql users table...
   $query = sprintf("SELECT * FROM users WHERE user_email = %s",$email);
   $res = mysql_query($query) or die(mysql_error());
   $row = mysql_fetch_array($res);
   echo($row['user_name']);
   echo "<b>   EMAIL : </b>" . $row['user_email'];
} 
```

这一切都很好。但是，如果用户使用我的表单登录，我如何设置另一个会话和 fb 会话？我什至不知道从哪里开始，因为我无法掌握逻辑。我想说：“如果用户已通过 fb 登录，则显示用户表中包含其电子邮件的行中的内容，或者如果他已通过我的表单登录，则也显示该内容。” 我是否应该每个页面只有两个版本，一个用于 fb 用户，另一个用于我的表单用户？

我在其他任何地方都找不到这个问题，所以我认为解决方案非常简单，以至于我是唯一一个愚蠢到无法得到它的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T21:21:17.303

我不确定您是如何让他们登录 facebook，但就个人而言，我使用：

```
if ($fbinfo['facebook_app_id']) {
    // Create our Application instance (replace this with your appId and secret).
    $facebook = new Facebook(array(
        'appId'  => $fbinfo['facebook_app_id'],
        'secret' => $fbinfo['facebook_app_secret'],
    ));

    // Get User ID
    $user = $facebook->getUser();

    // Login or logout url will be needed depending on current user state.
    if ($user) {
        $logoutUrl = $facebook->getLogoutUrl();

        if (!$_SESSION['extened_fb_token']) {
            // ask for the extended token and get it from session ...
            $facebook->setExtendedAccessToken();
            $access_token = $_SESSION["fb_".FB_APP_ID."_access_token"];
            // now set it into the facebook object ....
            $facebook->setAccessToken($access_token);
            // now our fb object will use the new token as usual ...
            setCompanyFacebookExtendedToken($facebook->getAccessToken());
        }

        //print_r($_SESSION);
        //print_r(facebookGetUserPages($user));
        //echo $_SESSION['extened_fb_token'];
    } else {
        $loginUrl = $facebook->getLoginUrl(array('scope'=>'manage_pages,publish_stream'));
    }
} 
```

有了这个，我已经对数据库进行了查询以找出应用程序密钥是什么（因为我的数据库中有“公司”，每个人都可以为他们的用户拥有自己的 fb 应用程序）。使用他们的信息，我使用 facebook api 来确定他们是否登录。如果不是，我会生成登录 url。一旦他们登录，`$user`包含他们的 facebook 用户 ID，然后可以在我自己的数据库中查询它以找出它实际上是哪个用户。在 if 语句 where `$user`is true 中，我可以进行 db 调用，提取该用户的电子邮件地址并将其分配给我自己的`$_SESSION['user']`变量。所以对你来说，它可能看起来像：

```
if (isset($_POST)) {
    //Handle your post normally here
}else{
    if ($fbinfo['facebook_app_id']) {
        // Create our Application instance (replace this with your appId and secret).
        $facebook = new Facebook(array(
            'appId'  => $fbinfo['facebook_app_id'],
            'secret' => $fbinfo['facebook_app_secret'],
        ));

        // Get User ID
        $user = $facebook->getUser();

        // Login or logout url will be needed depending on current user state.
        if ($user) {
            $logoutUrl = $facebook->getLogoutUrl();

            //This is just getting an extended token that is good for 60 days
            if (!$_SESSION['extened_fb_token']) {
                // ask for the extended token and get it from session ...
                $facebook->setExtendedAccessToken();
                $access_token = $_SESSION["fb_".FB_APP_ID."_access_token"];
                // now set it into the facebook object ....
                $facebook->setAccessToken($access_token);
                // now our fb object will use the new token as usual ...
                setCompanyFacebookExtendedToken($facebook->getAccessToken());
            }

            include"myconfig.php";

            //The email from fb has already been inserted into my mysql users table...
            $query = sprintf("SELECT * FROM users WHERE fb_id = %s",$user);
            $res = mysql_query($query) or die(mysql_error());
            $row = mysql_fetch_array($res);
            echo($row['user_name']);
            echo "<b>   EMAIL : </b>" . $row['user_email'];
                $_SESSION['user'] = $row['user_email'];
        } else {
            $loginUrl = $facebook->getLoginUrl(array('scope'=>'manage_pages,publish_stream'));
        }
    }
} 
```

**编辑** 对不起，我猜这并没有完全回答你的问题。您实际上可以重命名您自己的用户会话变量，或者一旦他们使用 facebook 登录，从 facebook 获取您需要的数据然后覆盖他们的会话变量（基本上将他们从 facebook 中注销，但您已经获得了您需要的数据脸书反正）。真的，我认为这是让他们登录 facebook 所需的全部令牌，尽管它可能会导致用户会话变量在页面加载时被覆盖，因此您需要完全删除 facebook 会话，或者只是重命名您的会话变量。

（我还是 facebook api 的新手，所以我希望这是有道理的。）

# c# - 领英 API 错误

> ID：13797741
> 
> 赞同：-1
> 
> 时间：2012-12-10T08:59:42.510
> 
> 标签：c#, desktop-application, linkedin

我下载了示例“linkedIntollkit”，我想为我的 destop 应用程序获取我的 infor 帐户和朋友列表。这是来源。 [http://linkedintoolkit.codeplex.com/SourceControl/changeset/view/94877](http://linkedintoolkit.codeplex.com/SourceControl/changeset/view/94877)

我尝试使用他们的 APi Key 和 secret ket（已经在代码中）运行它运行正常。但是当我用我的方式改变它们时。我可以得到 ![在此处输入图像描述](../Images/690d4dc9ceacc87b4f197473f0dabc10.png)

单击“允许访问”后，出现错误“发生错误（拒绝访问连接）”这是我的应用程序配置 ![在此处输入图像描述](../Images/e8e06b2b2f7c6c1a94b8906338b07307.png)

![在此处输入图像描述](../Images/03c67d5337dedeaaae31035090db9e74.png)

请告诉我我的api有什么问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T11:39:08.263

试试 www.springframework.net/social-linkedin/

# php - 从具有特定索引的 CakePHP 获取 mysql 记录

> ID：13797743
> 
> 赞同：0
> 
> 时间：2012-12-10T08:59:43.747
> 
> 标签：php, mysql, cakephp

我正在使用以下 cakephp 查询从 mysql 检索数据：

```
 $tops = $this->PageBanner->find('all', array(
        'conditions' => array(
            'PageBanner.status' => 1
        ),
        'fields' => array(
            'PageBanner.page_url',
            'PageBanner.image',
            'PageBanner.logo',
            'PageBanner.logo_text',
            'PageBanner.content'
        )
    )); 
```

此查询返回以下结果：

```
 [0] => Array
    (
        [PageBanner] => Array
            (
                [page_url] => index
                [image] => home_banner.png
                [logo] => home_logo.png
                [logo_text] => abc 
                [content] => abc.
            )

    )

[1] => Array
    (
        [PageBanner] => Array
            (
                [page_url] => write_review
                [image] => kids2.png
                [logo] => home_logo.png
                [logo_text] => abc
                [content] => abc. 
            )

    ) 
```

但我希望数据以以下格式返回：

```
 [index] => Array
    (
                [page_url] => index
                [image] => home_banner.png
                [logo] => home_logo.png
                [logo_text] => abc
                [content] => abc.
    )

[write_review] => Array
    (
                [page_url] => write_review
                [image] => kids2.png
                [logo] => home_logo.png
                [logo_text] => abc
                [content] => abc. 
    ) 
```

我需要 page_url 字段内容来代替数组索引（ei 0、1）。是否可以获取这种格式的数据，或者我需要手动配置数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:55:37.057

```
$result = Set::combine($tops, '{n}.PageBanner.page_url', '{n}.PageBanner');
pr($result); 
```

# c# - 如何使用c#代码检查sql server中是否存在存储过程

> ID：13797744
> 
> 赞同：9
> 
> 时间：2012-12-10T08:59:43.923
> 
> 标签：c#, sql, sql-server, stored-procedures

我试过下面的代码来检查 SP 是否已经存在。如果不存在，我正在创建..

但是每次都显示 sp 没有创建.....但是我的数据库已经有了这个 sp。

让我知道我在哪里做错了。

```
string checkSP = String.Format(
  "IF OBJECT_ID('{0}', 'U') IS NOT NULL SELECT 'true' ELSE SELECT 'false'", 
  "GP_SOP_AdjustTax");

SqlCommand command = new SqlCommand(checkSP, myConnection);
command.CommandType = CommandType.Text;

if (myConnection == null || myConnection.State == ConnectionState.Closed)
{
    try
    {
        myConnection.Open();
    }
    catch (Exception a)
    {
        MessageBox.Show("Error " + a.Message);
    }
}

bool Exist = false;
Exist = Convert.ToBoolean(command.ExecuteScalar());
if (Exist == false)   //false : SP does not exist
{ 
    // here i am writing code for creating SP
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-10T09:06:43.883

尝试：

```
if exists(select * from sys.objects where type = 'p' and name = '<procedure name>' ) 
```

您也可以使用 c# 进行检查：

```
string connString = "";
string query = "select * from sysobjects where type='P' and name='MyStoredProcedureName'";
bool spExists = false;
using (SqlConnection conn = new SqlConnection(connString))
{
    conn.Open();
    using (SqlCommand command = new SqlCommand(query, conn))
    {
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                spExists = true;
                break;
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-05-24T12:22:23.583

> **对于那些使用实体框架和 DbContext 的人：**

为 DbContext 创建一个扩展类：

```
internal static class DbContextExtensions
{
    public static bool StoredProcedureExists(this DbContext context,
        string procedureName)
    {
        string query = String.Format(
            @"select top 1 from sys.procedures " +
              "where [type_desc] = '{0}'", procedureName);
        return dbContext.Database.SqlQuery<string>(query).Any();
    }
} 
```

正如 robIII 所说，此代码不应向外界发布，因为它会使数据库容易受到黑客攻击（感谢 RobIII！）。为了防止这种情况，请使用参数化语句。[上述方法的问题在这里描述](http://www.w3schools.com/sql/sql_injection.asp)

解决方案是将procedureName**作为参数**放在SQL 语句中。SQL 将检查字符串参数是否具有所需的格式，从而抑制恶意调用：

```
public static bool ImprovedExists(this DbContext dbContext, string procedureName)
{
    object[] functionParameters = new object[]
    {
        new SqlParameter(@"procedurename", procedureName),
    };
    const string query = @"select [name] from sys.procedures where name= @procedurename";
    return dbContext.Database.SqlQuery<string>(query, functionParameters).Any();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-10T09:05:04.207

我在[MSDN上找到了这个](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/eb986342-af36-488e-9c5b-8ea8e2ca6c1e)

```
select * from sys.objects where type_desc = 'SQL_STORED_PROCEDURE' AND name = 'Sql_PersonInsert' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T09:05:01.353

尝试：

```
SELECT * 
FROM sys.objects 
WHERE object_id = OBJECT_ID(N'GP_SOP_AdjustTax') AND type in (N'P', N'PC') 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-04T15:51:45.950

我的尝试：

*   可重复使用的扩展方法
*   最小的 Sql / 最小的 C#
*   作为 OP 隐式请求从 .Net 调用
*   由于该`object_id`功能，可能会更快

```
public static bool StoredProcedureExists(this string source)
{
  using (var conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
  {
    conn.Open();
    using (var cmd = new SqlCommand($"select object_id('{source}')", conn))
      return !cmd.ExecuteScalar().ToString().IsNullOrWhiteSpace();
  }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-03-07T13:41:14.980

```
string checkSP = String.Format(
  "IF OBJECT_ID('{0}', 'U') IS NOT NULL SELECT 'true' ELSE SELECT 'false'", 
  "GP_SOP_AdjustTax"); 
```

如果您将“U”更改为“P”就可以了。使用“U”查询用户表，“P”为您提供存储过程。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-12-10T09:04:57.717

您可以使用以下 tsql 查询（适用于 SQL Server）进行检查：

```
select * from sysobjects where ytype='P' and name='MyStoredProcedureName' 
```

如果查询返回行，则存在名为“MyStoredProcedureName”的存储过程。

以下是如何在代码中使用它：

```
 //TODO: set connection string
        string connString = "";
        string query = "select * from sysobjects where ytype='P' and name='MyStoredProcedureName'";
        bool spExists = false;
        using (SqlConnection conn = new SqlConnection(connString))
        {
            conn.Open();
            using (SqlCommand command = new SqlCommand(query,conn))
            {
                using (SqlDataReader reader = command.ExecuteReader())
                {
                    while (reader.Read())
                    {
                        spExists = true;
                        break;
                    }
                }
            }
        } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-10T11:12:09.647

```
private static bool StoredProcedureExists(string sp)
{    
      var connString = @"<your string here>";
      var query = string.Format("SELECT COUNT(0) FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_NAME = '{0}'", sp);
      using (var conn = new SqlConnection(connString))
      {
          conn.Open();
          using (var cmd = new SqlCommand(query, conn))
          {
              return Convert.ToInt32(cmd.ExecuteScalar()) > 0;  
          }
      }
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-15T06:58:16.973

*   处理具有不同模式的过程名称
*   带和不带括号的名称 ([])
*   使用参数避免 SQL 注入

注意：调用者拥有 SQL 连接

```
public static class SqlConnectionExtensions
{        
    public static Task<bool> StoredProcedureExistsAsync(this SqlConnection sqlConnection, string storedProcedureName)
    {
        string query = "SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(@storedProcedureName) AND type in (N'P', N'PC')";

        using (SqlCommand command = new SqlCommand(query, sqlConnection))
        {
            command.Parameters.AddWithValue("@storedProcedureName", storedProcedureName);
            using (SqlDataReader reader = command.ExecuteReader())
            {
                return reader.ReadAsync();
            }
        }
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-09-02T09:01:32.660

我认为以下适用于 MySQL、SQL Server 和 Oracle：

```
SELECT * FROM INFORMATION_SCHEMA.ROUTINES
WHERE ROUTINE_TYPE='PROCEDURE'
AND (ROUTINE_SCHEMA='questionnaire' OR ROUTINE_CATALOG = 'questionnaire')
AND SPECIFIC_NAME='create_question'; 
```

用法：

```
string procedureName = "create_question";
using (DbConnection conn = new SqlConnection("Server=localhost;Database=questionnaire;Trusted_Connection=True;")) // Connection is interchangeable
{
    conn.Open();
    using (var cmd = conn.CreateCommand())
    {
        cmd.CommandText = $"SELECT * FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_TYPE='PROCEDURE' AND (ROUTINE_SCHEMA='{conn.Database}' OR ROUTINE_CATALOG = '{conn.Database}') AND SPECIFIC_NAME='{procedureName}';";
        return cmd.ExecuteScalar() != null;
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-01T16:13:01.527

如果您使用`Microsoft.SqlServer.Management.Smo`，请尝试

```
private static bool CheckIfStoredProcedureExists(Database db, string spName, string schema)
{
   db.StoredProcedures.Refresh();
   return (db.StoredProcedures[spName, schema] != null);
} 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-12-10T09:07:33.470

尝试这个;

```
if object_id('YourStoredProcedureName') is null
    exec ('create procedure dbo.YourSp as select 1')
go
alter procedure dbo.YourStoredProcedure
as 
```

# grails - 如何进行淘汰赛验证本地化

> ID：13797745
> 
> 赞同：2
> 
> 时间：2012-12-10T08:59:46.850
> 
> 标签：grails, localization, knockout.js, knockout-validation

我有一个视图页面，我正在使用 knockout.js 验证字段。我想用不同国家的语言（如西班牙语、法语等）验证我的字段，即使用本地化。我已将 el-GR.js 、fr-FR.js 、 ru-RU.js 等文件添加到我的 js 文件夹中并引用它们。现在我如何验证或签入我的 modalModal.js 页面？

modalModal.js

```
 ko.validation.rules.pattern.message = 'Invalid.';
    ko.validation.configure({
    registerExtenders : true,
    messagesOnModified : true,
    insertMessages : true,
    parseInputAttributes : true,
    messageTemplate : null
    });

   var mustEqual = function (val, other) {
   return val == other();
   };

   var modalViewModel= {
   firstName : ko.observable().extend({
    minLength : 2,
    maxLength : 40
    }),
    lastName : ko.observable().extend({
    minLength : 2,
    maxLength : 10
    }),
    organisation : ko.observable().extend({
    minLength : 2,
    maxLength : 40
    }),

    email : ko.observable().extend({ // custom message
    email: true
    }),
    password: ko.observable()
    };

    modalViewModel.confirmPassword = ko.observable().extend({
    validation: { validator: mustEqual, message: 'Passwords do not match.', params: 
    modalViewModel.password }
    });
   modalViewModel.errors = ko.validation.group(modalViewModel);

  // Activates knockout.js
   ko.applyBindings(modalViewModel,document.getElementById('light')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:37:47.590

我为我最新的 KO 项目做了这个

我覆盖了 KO 验证规则并使用 Globalize 插件，例如

```
ko.validation.rules.number.validator = function (value, validate) {
    return !String.hasValue(value) || (validate && !isNaN(Globalize.parseFloat(value)));
};

ko.validation.rules.date.validator = function (value, validate) {
    return !String.hasValue(value) || (validate && Globalize.parseDate(value) != null);
}; 
```

编辑：顺便说一句，Globalize 插件中有一个错误，即使不是，它也会接受点 (.) 作为数字的一部分，我这样修复了

```
Globalize.orgParaseFloat = Globalize.parseFloat;
Globalize.parseFloat = function (value) {
    value = String(value);

    var culture = this.findClosestCulture();
    var seperatorFound = false;
    for (var i in culture.numberFormat) {
        if (culture.numberFormat[i] == ".") {
            seperatorFound = true;
            break;
        }
    }

    if (!seperatorFound) {
        value = value.replace(".", "NaN");
    }

    return this.orgParaseFloat(value);
}; 
```

# php - PHP表单没有上传图片

> ID：13797747
> 
> 赞同：0
> 
> 时间：2012-12-10T08:59:53.113
> 
> 标签：php, mysql, image, upload

我在使用表单上传图片时遇到问题。这是我的表单代码：

```
<?php

    echo '<table width="70%">';
    echo '<tr>';
    echo '<td>Add Promotion</td>';
    echo '</tr>';

echo "<form action='addpromotion_post.php' method='post' enctype='multipart/form-data' name='form1' id='form1'>";

echo '<tr>';
echo "<td>&nbsp;</td>";
echo '</tr>';

echo '<tr>';
echo "<td>Promotion :</td>";
echo "<td><textarea name='promotion1' rows='2'></textarea></td>";
echo '</tr>';

echo '<tr>';
echo "<td>Valid From :</td>";
echo "<td><input type='text' size='40' name='validfrom1' value='promotion' /></td>";
echo '</tr>';

echo '<tr>';
echo "<td>Add Picture :</td>";
echo "<td><input type='file' name='pic1' id='pic1' /></td>";
echo '</tr>';

echo '<tr>';
echo "<td>Add Picture :</td>";
echo "<td><input type='file' name='pic2' id='pic2' /></td>";
echo '</tr>';

echo '<tr>';
echo "<td>Add Picture :</td>";
echo "<td><input type='file' name='pic3' id='pic3' /></td>";
echo '</tr>';

echo '<tr>';
echo "<td>&nbsp;</td>";
echo '</tr>';

echo'<tr>
<td colspan="3" align="center"><input type="submit" name="button" id="button" value="Submit"  /></td>
</tr>
</table>
</form>'; 
```

这是我的邮政编码：

```
<?php

    //session_start();
    include_once("connection.php");

    $promotion= $_POST["promotion1"];
    $validfrom= $_POST["validfrom1"];

    $promotion= mysql_real_escape_string($promotion);
    $validfrom= mysql_real_escape_string($validfrom);

    $sql = "insert into promotion(proid, promotion, validfrom) values ('', '$promotion', '$validfrom')";

mysql_query($sql) or die ("Error in query: $sql");

$lastid=mysql_insert_id();

$file = "slider_imagesClient/".$lastid."/";
mkdir($file);

 $pic1 = $_FILES['pic1']['name'];
 $pic2 = $_FILES['pic2']['name'];
 $pic3 = $_FILES['pic3']['name'];

 print_r($pic1);

 $ext1 = pathinfo($pic1,PATHINFO_EXTENSION);
 $ext2 = pathinfo($pic2,PATHINFO_EXTENSION);
 $ext3 = pathinfo($pic3,PATHINFO_EXTENSION);

 //$fileEnote = $_FILES['eNote']['name'];

$path1 = $file.$pic1.'.'.$ext1;
$path2 = $file.$pic2.'.'.$ext2;
$path3 = $file.$pic3.'.'.$ext3;

print_r($path1);

$ory1 = $sfish.$pic1.'.'.$ext1;
$ory2 = $sfish.$pic2.'.'.$ext2;
$ory3 = $sfish.$pic3.'.'.$ext3;

if (!file_exists($path1))
{
 move_uploaded_file ($_FILES['pic1']['tmp_name'], $path1) or die ("Error");
 }

if (!file_exists($path2))
{
 move_uploaded_file ($_FILES['pic2']['tmp_name'], $path2) or die ("Error");
 } 

if (!file_exists($path3))
{
 move_uploaded_file ($_FILES['pic3']['tmp_name'], $path3) or die ("Error");
 }

 if(!empty($pic1)) {
  $sql5= "INSERT INTO pimage (id, proid, image)
            VALUES ('', $lastid, '$ory1')";

  mysql_query($sql5) or die ("Error in query: $sql5");
}
else
{
$not = "not good";
print_r($not);
}

if(!empty($pic2)) {
  $sql5= "INSERT INTO image (resID, image)
            VALUES ($lastid, '$ory2')";

  mysql_query($sql5) or die ("Error in query: $sql5");
}
else
{
$not = "not good";
print_r($not);
}

if(!empty($pic3)) {
  $sql5= "INSERT INTO image (resID, image)
            VALUES ($lastid, '$ory3')";

  mysql_query($sql5) or die ("Error in query: $sql5");
}
else
{
$not = "not good";
print_r($not);
}

?> 
```

print_r($pic1) 没有输出任何东西。print_r($path1) 只是输出slider_imagesClient/50/。

我该如何解决这个问题？我怀疑表格中有错误，但我找不到任何错误。非常感谢：D。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:07:36.900

```
 echo '<table width="70%">';
  echo '<tr>';
  echo '<td>Add Promotion</td>';
  echo '</tr>';

echo "<form action='addpromotion_post.php' method='post'
 enctype='multipart/form-data' name='form1' id='form1'>"; 
```

像这样改变

```
echo "<form action='addpromotion_post.php' method='post' enctype='multipart/form-data' name='form1' id='form1'>";
    echo '<table width="70%">';
    echo '<tr>';
    echo '<td>Add Promotion</td>';
    echo '</tr>'; 
```

# objective-c - 动画后如何执行代码？

> ID：13797749
> 
> 赞同：1
> 
> 时间：2012-12-10T08:59:58.537
> 
> 标签：objective-c, xcode4.5

我有这个简单的代码：

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    BGEditTextField * theTableViewCell = (BGEditTextField *) [self.tableView cellForRowAtIndexPath:indexPath];
    theTableViewCell.displaytextField =true;
    [self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
    //self.helpFinishUpdating.viewNotToCover = theTableViewCell;
} 
```

一切都很完美，除了我想要的

`self.helpFinishUpdating.viewNotToCover = theTableViewCell`

完成后执行
`[self.tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];`。

我将如何实现这一目标？

我之所以要这样做是因为`self.helpFinishUpdating.viewNotToCover = theTableViewCell;`对`UITableViewCell`. 我希望`UITableViewCell`在执行之前先到达最终位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:07:41.127

`UITableViewDelegate`符合`UIScrollViewDelegate`，因此您可以实现`scrollViewDidEndDecelerating:`或满足您的需求。

# php - OpenX API 列出活动的链接区域

> ID：13797752
> 
> 赞同：0
> 
> 时间：2012-12-10T09:00:23.680
> 
> 标签：php, openx

是否可以通过 OpenX API 列出活动的链接区域？

我找到了在活动中链接和取消链接区域的方法（linkCampaign、unlinkCampaign），但我无法列出它们

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:21:54.387

不，没有列出与活动相关的区域的方法。

但是，您有一种方法可以列出与发布者关联的区域：getZoneListByPublisherId

# android - 在sqlite表中插入记录时出错

> ID：13797756
> 
> 赞同：0
> 
> 时间：2012-12-10T09:00:33.803
> 
> 标签：android, sqlite

我正在使用 webservices 从另一个表中获取数据。我正在跟踪表的每个值，所以我确定我正在获取值，但我无法将它们插入到我的新表中。我无法到达我要去的地方任何人都帮我..

我为此使用的代码是

```
 private void insertData(String bbookId,String bdesc, byte[] image1,byte[] image2 ,String bid,String bname) {
            Log.i("id",bid);
            Log.i("BookId",bbookId);
            Log.i("name",bname);
            System.err.println("url1"+image1);
            System.err.println("url2"+image2);
            System.err.println("desc"+bdesc);
            Log.e("testing","LOOK @ 1214353469TRJB UJIOY ");
             SQLiteDatabase db = placeData.getWritableDatabase();
             Log.i("Bookid",bbookId);
             ContentValues values;
             values = new ContentValues();
             values.put("bbookid",bbookId);
             values.put("desc",bdesc);
             values.put("url1",image1);
             values.put("url2",image2);

             values.put("bid",bid);
             values.put("name", bname);
             Log.i("inserting","______________");
              db.insert("pagess", null, values); 
        } 
```

我已成功获取所有日志值，并且日志标签“正在插入” **_**也正在显示

我的数据库类是 :::::::::

```
 public class PlaceData extends SQLiteOpenHelper {
private static final String DATABASE_NAME = "page.db";
private static final String DATABASE_TABLE = "pagess";
private static final int DATABASE_VERSION = 1;
private static final String KEY_ID="bid";
private static final String KEY_BBOOKID="bbookid";
private static final String KEY_NAME="name";
private static final String KEY_URL1="url1";
private static final String KEY_URL2="url2";
private static final String KEY_DESC="desc";
 private SQLiteDatabase sqLiteDatabase;
private Context context;
public PlaceData(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    this.context = context;
}
@Override
public void onCreate(SQLiteDatabase db) {
    Log.i("table","table");
    Log.i("bookid in table is ",KEY_BBOOKID);
    db.execSQL("CREATE TABLE " + DATABASE_TABLE+"("+KEY_BBOOKID+" varchar(15),"+KEY_DESC+" text(1500),"+KEY_URL1+" BLOB,"+KEY_URL2+" BLOB,"+KEY_ID+" INTEGER PRIMARY KEY AUTOINCREMENT ,"+KEY_NAME+" varchar(150))");   
}   
public void createDataBase() throws IOException{
     boolean dbExist = checkDataBase(DATABASE_NAME);
     if(dbExist){
    Log.i("g","ds");         
     }else{
      CopyFiles();
     }
    }
    private void CopyFiles()
    {
     try
        {
        InputStream is = context.getAssets().open(DATABASE_NAME);
         File outfile = new File("data/data/com.books.bcukbook/databases/",DATABASE_NAME);
         outfile.getParentFile().mkdirs();
         outfile.createNewFile();

        if (is == null)
          throw new RuntimeException("stream is null");
        else
        {
             FileOutputStream out = new FileOutputStream(outfile);      
         byte buf[] = new byte[128];
             do {
              int numread = is.read(buf);
                 if (numread <= 0)
                     break;
              out.write(buf, 0, numread);
               } while (true);

             is.close();
             out.close();
        }
        }
        catch (IOException e)
        {
           throw new RuntimeException(e);
        }

    }    
    public long insert(String bbookid, String desc,String url1,String url2,String bid,String name){

          ContentValues contentValues = new ContentValues();      
          contentValues.put(KEY_BBOOKID,bbookid);
          contentValues.put(KEY_DESC,desc);
          contentValues.put(KEY_URL1,url1);
          contentValues.put(KEY_URL2,url2);
          contentValues.put(KEY_ID,bid);
          contentValues.put(KEY_NAME,name);
          return sqLiteDatabase.insert(DATABASE_TABLE, null, contentValues);
         }
    public Cursor selectQuery(String query) throws SQLException
    {
     String myPath = "data/data/com.books.bcukbook/databases/" + DATABASE_NAME;
     CursorFactory bcuk_pages = null;
     SQLiteDatabase myData = SQLiteDatabase.openDatabase(myPath, bcuk_pages, SQLiteDatabase.OPEN_READWRITE);
     Cursor mCursor =myData.rawQuery(query, null);
     mCursor.moveToFirst();    
        myData.close();
        return mCursor;
    }
private void versionUpdation(SQLiteDatabase db) {

}
public boolean checkDataBase(String db) {

    SQLiteDatabase checkDB = null;
     File dbFile = new File( "data/data/com.books.bcukbook/databases/" +  DATABASE_NAME);  
       return dbFile.exists();
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion >= newVersion)
        return;
    if (oldVersion == 1) {
        Log.d("New Version", "Datasadsggfdh can be upgraded");
    }
    Log.d("Sample Data", "onUpgrade : " + newVersion);
}
     @Override
     public synchronized void close() {
           super.close();
     }

    } 
```

我的日志显示为

```
 12-10 14:13:41.285: I/inserting(30596): ______________
  12-10 14:13:41.295: E/SQLiteDatabase(30596): Error inserting bbookid=1 desc=<p>Providing in-depth coverage of how to build mobile applications using the next major release of the Android SDK, this invaluable resource takes a hands-on approach to discussing Android with a series of projects, each of which introduces a new feature and highlights techniques and best practices to get the most out of Android.</p> url1=[B@42725768 bid=2 url2=[B@42636730 name=Hello World page1
  12-10 14:13:41.295: E/SQLiteDatabase(30596): android.database.sqlite.SQLiteConstraintException: PRIMARY KEY must be unique (code 19)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at android.database.sqlite.SQLiteConnection.nativeExecuteForLastInsertedRowId(Native Method)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at android.database.sqlite.SQLiteConnection.executeForLastInsertedRowId(SQLiteConnection.java:775)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at android.database.sqlite.SQLiteSession.executeForLastInsertedRowId(SQLiteSession.java:788)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:86)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1469)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at com.books.bcukbook.DetailsActivity$LoadAllProducts.insertData(DetailsActivity.java:688)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at com.books.bcukbook.DetailsActivity$LoadAllProducts.callInsertion(DetailsActivity.java:663)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at com.books.bcukbook.DetailsActivity$LoadAllProducts.doInBackground(DetailsActivity.java:616)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at com.books.bcukbook.DetailsActivity$LoadAllProducts.doInBackground(DetailsActivity.java:1)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
  12-10 14:13:41.295: E/SQLiteDatabase(30596):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:05:11.433

消除

`values.put("bid",bid);` 从插入语句值。

与**Auto Increment Primary Key**`bid`一样。

 **然后再试一次..

**更新：**

从你的`PlaceData Database class`.

```
KEY_ID+" INTEGER PRIMARY KEY AUTOINCREMENT 
```

和`private static final String KEY_ID="bid";`

所以你不必插入`bid`主键。您的 Sqlite 表会自动生成（增量）它。对于每个新插入的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:03:56.877

**不要尝试放置投标价值，因为它已经是自动增量值。**

删除这个**values.put("bid",bid);**

不需要插入它，它违反了主键约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:05:00.590

日志告诉你出了什么问题！您的插入终止您的主键约束。检查是否将重复值插入主键字段

```
 android.database.sqlite.SQLiteConstraintException: PRIMARY KEY must be unique (code 19) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T09:06:20.337

错误本身会告诉您到底出了什么问题：

> android.database.sqlite.SQLiteConstraintException: PRIMARY KEY 必须是唯一的（代码 19）

你真的不需要提供`KEY_ID`价值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T09:27:17.107

您创建了一个表`Primary Key`。所以它的值一定是`unique`而不是`NULL`。所以当你第一次跑步时它工作得很好。但是第二次它采用相同的值，因此它不符合约束要求。**

# php - jquery将span的值相乘得到总数

> ID：13797757
> 
> 赞同：-1
> 
> 时间：2012-12-10T09:00:34.703
> 
> 标签：php, jquery

我试图增加我跨度的答案。

例如值`<span id="total_f">210</span>`

顺便说一句`.21`，它是 %21%，所以我们需要让它`.21`乘以它并得到总数。`btw`在`VAT`荷兰

如果你看到 jquery`var get_total`我确实乘以`mul`

我的jQuery错了吗？

这是我的jQuery

```
$(document).ready(function(){
   var sum = 0;
   $('input[name=sumof]').each(function(){
        sum += parseInt($(this).val());
   });
   $('input[name=total_f]').val(sum);
   $('#total_f').text(sum);

   var mul = parseInt($('input[name=total_f]').val());

   var get_total = mul * parseInt($('input[name=btw]').val());

   $('input[name=s_btw]').val(get_total);
   $('#s_btw').text(get_total);
}); 
```

我的 html

```
<table cellpadding="5" cellspacing="0" width="100%">
    <tr>
        <td><strong>Sub Total</strong></td>
        <td>
        <?php
            if ( $get_total_computation['currency'] == 'euro' ) {
                $msg_tot = '&euro;';
            } elseif ( $get_total_computation['currency'] == 'usd' ) {
                $msg_tot = '&#36;';
            }
            echo $msg_tot;

        ?>                      
            <span id="total_f"></span>
            <input type="hidden" name="total_f" value="" />
        </td>
    </tr>
    <tr>
        <td>
            <?
            echo $get_total_computation['quo_btw'];
            $get_per = explode( '%', $get_total_computation['quo_btw']);
            ?>
            <input type="hidden" name="btw" value=".<?=$get_per[0];?>" />
        </td>
        <td>
            <span id="s_btw"></span>
            <input type="hidden" name="s_btw" value="" />
         </td>
    </tr>
    <tr>
        <td><strong>Total</strong></td>
        <td><?=$btw;?></td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:12:43.223

用于[`parseFloat`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)解析包含十进制数字的值。在您的情况下，包含`btw`不合适的值。`.21``parseInt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:47:52.737

如果您将 HTML 更新为这样的内容（这对 JS 的性能会更好）：

```
<table cellpadding="5" cellspacing="0" width="100%">
  <tr>
    <td><strong>Sub Total</strong></td>
    <td>
      <?php
        // cleaner way to do what you
        // were trying to do here before
        $currencies = array(
          'euro' => '&euro;', 
          'usd' => '&#36;'
        );
        echo $currencies[$get_total_computation['currency']];
      ?>                      
      <span id="total_f">
        <input type="hidden" name="total_f" />
      </span>
    </td>
  </tr>
  <tr>
      <td>
          <?php echo $get_total_computation['quo_btw']; ?>
          <!-- 
            removed the hidden input that was here as it's not 
            necessary unless you need to submit the btw value 
            with the form? 
          -->
      </td>
      <td>
          <span id="s_btw">
            <input type="hidden" name="s_btw" data-btw="<?php echo $get_total_computation['quo_btw']; ?>" />
          </span>
       </td>
  </tr>
  <tr>
      <td><strong>Total</strong></td>
      <td><?php echo $btw; ?></td>
  </tr>
</table> 
```

然后，您可以使用以下内容来执行您需要的操作：

```
$(document).ready(function() {
  var $subTotal = $('#total_f'),
      $total = $('#s_btw'), 
      subTotal = 0,
      total, btw;

  $('input[name=sumof]').each(function() {
    // can multiply by 1 to convert to
    // number instead of using parseInt();
    subTotal += (this.value * 1);
  });

  // btw is stored in #s_btw's data attr so 
  // we can get to it like this, remove the % 
  // symbol and multiply by 1 to convert to
  // a number instead of using parseInt();
  btw = ($total.data('btw').replace('%', '') * 1);

  // total is subTotal + 21% of subTotal so:
  total = subTotal + ((subTotal * btw) / 100);

  // update the UI
  $total.append(total);
  $subTotal.append(subTotal);
  $total.find('input').val(total);
  $subTotal.find('input').val(subTotal);
}); 
```

# java - 为什么列出 在休眠中给出错误？

> ID：13797758
> 
> 赞同：0
> 
> 时间：2012-12-10T09:00:38.253
> 
> 标签：java, hibernate, collections

在我的 Java 应用程序中创建具有一个字段的值对象（Java Bean）

```
@Entity
@Table(name="EC_TIMETABLE")
    public class TimetableVO
{
----//@id and some other column and variables
----

private List<WeekdayType> repeatDays;//Their is No column in Database
------
------//setter and getter method
} 
```

听说 WeekdayType 是 Enum 类

```
public static enum WeekdayType {
    MONDAY(Calendar.MONDAY), TUESDAY(Calendar.TUESDAY), WEDNESDAY(
            Calendar.WEDNESDAY), THURSDAY(Calendar.THURSDAY), FRIDAY(
            Calendar.FRIDAY), SATURDAY(Calendar.SATURDAY), SUNDAY(
            Calendar.SUNDAY);

    private int day;

    private WeekdayType(int day) {
        this.day = day;
    } 
```

我正在使用 TimetableVO getRepeatedDays() 另一个类。

当我启动服务器时出现错误

```
org.hibernate.MappingException: Could not determine type for: java.util.List, at table: EC_TIMETABLE, for columns: [org.hibernate.mapping.Column(repeatDays)] 
```

他们在数据库或语法问题中需要的任何列也是如此.....提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:03:14.043

不，如果您不想，您不需要在数据库中为该字段提供一列。

如果您不想使其持久化，可以通过 @Transient 注释将其标记为瞬态。

```
@Transient
private List<WeekdayType> repeatDays; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:19:48.990

**JPA's @Transient annotation is used to indicate that a field is not to be persisted in the database, i.e. their semantics are different.**

Now the solution is ...

```
@Transient
private List<WeekdayType> repeatDays; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:06:40.157

将集合标记为瞬态将指示 Hibernate 这不是持久项。我认为这样[的](https://stackoverflow.com/questions/1126029/how-to-map-a-set-of-enum-type-in-hibernate)事情更符合您的要求。

# c++ - 只允许在程序中使用选择的字母（字符串）？

> ID：13797759
> 
> 赞同：2
> 
> 时间：2012-12-10T09:00:38.590
> 
> 标签：c++, validation

我的程序是一个成绩计算器，程序会根据您键入 P、M 或 D 来加分。我想警告用户，这些是您可以使用的唯一字符串。下面是程序的代码：

```
 #include <cstdlib>
#include <iostream>
#include <string>

using namespace std;

int points = 0;

string lesson[18];  
char grades[18];    

void start();
void lessons();  
void grades_selector();
void award_points();
void point();
void BTEC();
void UCAS();

int main(int argc, char *argv[])
{
    start();
    lessons();
    grades_selector();
    point();
    cout << "You have achieved " << points << " points." << endl;
    BTEC();
    UCAS();

    system("PAUSE");
    return EXIT_SUCCESS;
}

void start()
{
     cout << "BTEC & UCAS GRADE CALCULATOR." << endl;
     cout << "For every lesson input either (P)ass, (M)erit, (D)istinction." << endl;
}

void lessons()
{
     lesson[0] = "Year 1:Communication and Employability Skills";
     lesson[1] = "Year 1:Computer Systems";
     lesson[2] = "Year 1:Information Systems";
     lesson[3] = "Year 1:Event Driven Programming";
     lesson[4] = "Year 1:Database Design";
     lesson[5] = "Year 1:Data Analysis and Design";
     lesson[6] = "Year 1:Installing and upgrading Software";
     lesson[7] = "Year 1:Digital Graphics for Interactive Media";
     lesson[8] = "Year 1:CCNA Network Home Small Business";
     lesson[9] = "Year 2:Software Design and Development";
     lesson[10] = "Year 2:Object Oriented Programming";
     lesson[11] = "Year 2:Procedural Programming";
     lesson[12] = "Year 2:Client Side Customisation of Web Pages";
     lesson[13] = "Year 2:Developing Computer Games";
     lesson[14] = "Year 2:Human Computer Interaction";
     lesson[15] = "Year 2:Computer Animation";
     lesson[16] = "Year 2:Computer Games Platforms and technologies";
     lesson[17] = "Year 2:3D Modelling";
}

void grades_selector()
{
     int index; //local variable

     for (index = 0; index < 18; index = index + 1)
     {
         cout << "What grade was achieved for " << lesson[index] << "?" << endl;
         cin >> grades[index];
         } }

void point()
{
int index;
         for (index = 0; index < 18; index = index + 1)
         {

             switch ( grades[index] )
             {
              case 'D':
                   points = points + 90;
                   break;
              case 'd':
                   points = points + 90;
                   break;
              case 'M':
                   points = points + 80;
                   break;
              case 'm':
                   points = points + 80;
                   break;
              case 'P':
                   points = points + 70;
                   break;
              case 'p':
                   points = points + 70; 
                   break;
              default:
                      points = 0;
                      break;
         }
     }
}

void BTEC()
{
                 if( points >= 1590)
                 {
                     cout <<" You have achieved D*D*D*" << endl;
                     }
                 else if( points >= 1560)
                 {
                     cout <<" You have achieved D*D*D" << endl;
                     }
                 else if( points >= 1530)
                 {
                     cout <<" You have achieved D*DD" << endl;
                     }
                 else if( points >= 1500)
                 {
                     cout <<" You have achieved DDD" << endl;
                     }
                 else if( points >= 1460)
                 {
                     cout <<" You have achieved DDM" << endl;
                     }
                 else if( points >= 1420)
                 {
                     cout <<" You have achieved DMM" << endl;
                     }
                 else if( points >= 1380)
                 {
                     cout <<" You have achieved MMM" << endl;
                     }
                 else if( points >= 1340)
                 {
                     cout <<" You have achieved PMM" << endl;
                     }
                 else if( points >= 1300)
                 {
                     cout <<" You have achieved PPM" << endl;
                     }
                 else
                 {
                     cout <<" You have achieved PPP" << endl;
                     }
}

void UCAS()
{
                 if( points >= 1590)
                 {
                     cout <<" You have 420 UCAS points." << endl;
                     }
                 else if( points >= 1560)
                 {
                     cout <<" You have 400 UCAS points." << endl;
                     }
                 else if( points >= 1530)
                 {
                     cout <<" You have 380 UCAS points" << endl;
                     }
                 else if( points >= 1500)
                 {
                     cout <<" You have 360 UCAS points." << endl;
                     }
                 else if( points >= 1460)
                 {
                     cout <<" You have 320 UCAS points." << endl;
                     }
                 else if( points >= 1420)
                 {
                     cout <<" You have 280 UCAS points." << endl;
                     }
                 else if( points >= 1380)
                 {
                     cout <<" You have 240 UCAS points." << endl;
                     }
                 else if( points >= 1340)
                 {
                     cout <<" You have 200 UCAS Points." << endl;
                 }
                 else if ( points >= 1300)
                {
                    cout <<" You have 160 UCAS Points." << endl;
                }
} 
```

我希望能够提示用户，如果他们输入除了 P、p、M、m、D 或 d 之外的任何内容，那么程序会警告他们。

我在stackoverflow上注意到了这一点，并找到了一个接近的解决方案：

```
char c;

while (std::getline(std::cin, line))
{
    // Iterate through the string one letter at a time.
    for (int i = 0; i < line.length(); i++) {

        c = line.at(i);         // Get a char from string

        // if it's NOT within these bounds, then it's not a character
        if (! ( ( c >= 'a' && c <= 'z' ) || ( c >= 'A' && c <= 'Z' ) ) ) {

             std::cout << "Error!" << std::endl;

             // you can probably just return here as soon as you
             // find a non-letter char, but it's up to you to
             // decide how you want to handle it exactly
             return 1;
        }
     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:09:58.663

添加此功能：

```
bool isValidInput (char input) {
    switch (input) {
        case 'm':
        case 'M':
        case 'p':
        case 'P':
        case 'd':
        case 'D':
            return true;
        default:
            return false;
    }
} 
```

然后，要求输入：

```
for (index = 0; index < 18; index = index + 1)
{
    cout << "What grade was achieved for " << lesson[index] << "?" << endl;
    cin >> grades[index];
    while (! isValidInput(grades[index])
    {
        cout << "Only m, p and d are valid inputs!";
        cin >> grades[index];
    }
} 
```

# c# - 将 ListView 导出到 Excel（单元格颜色）？

> ID：13797764
> 
> 赞同：0
> 
> 时间：2012-12-10T09:00:58.397
> 
> 标签：c#, listview

我正在使用以下方法将我的 ListView 导出到 Excel：

```
 Microsoft.Office.Interop.Excel.Application app = new Microsoft.Office.Interop.Excel.Application();
        app.Visible = true;
        Microsoft.Office.Interop.Excel.Workbook wb = app.Workbooks.Add(1);
        Microsoft.Office.Interop.Excel.Worksheet ws = (Microsoft.Office.Interop.Excel.Worksheet)wb.Worksheets[1];
        int i = 1;
        int i2 = 1;
        foreach (ListViewItem lvi in listView1.Items)
        {
            i = 1;
            foreach (ListViewItem.ListViewSubItem lvs in lvi.SubItems)
            {
                ws.Cells[i2, i] = lvs.Text;
                i++;
            }
            i2++;
        } 
```

在我的 ListView 中，我为每个单元格设置了背景颜色，我希望这些颜色也可以导出到 Excel。上述方法完美运行，但不包括导出中的颜色。

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:27:40.670

试试这些帖子，它会对您有所帮助：[使用 C# 在 Winforms 中使用网格颜色导出到 Excel](http://www.dotnetfunda.com/codes/code1071-export-to-excel-with-grid-color-in-winforms-using-csharp.aspx)

[将 GridView 导出到 Excel 时保留单元格背景颜色](http://forums.asp.net/t/1648977.aspx)

# javascript - 未启用 Android WebView Javascript

> ID：13797772
> 
> 赞同：0
> 
> 时间：2012-12-10T09:01:22.950
> 
> 标签：javascript, android, webview

我的活动中有以下代码：

```
 browser = (WebView)findViewById(R.id.webkit);
    browser.getSettings().setJavaScriptEnabled(true);
    browser.getSettings().setPluginsEnabled(true);
    browser.getSettings().setDomStorageEnabled(true);

    /*if (Build.VERSION.SDK_INT >= 16) {
        browser.getSettings().setAllowFileAccessFromFileURLs(true);
        browser.getSettings().setAllowUniversalAccessFromFileURLs(true);
    }*/

    // Loads html-string into webview
    browser.loadUrl("file:///android_asset/index.html"); 
```

页面加载正常，css加载正常，图像加载正常。但是我也有一个本地 js 文件。目前仅包含一条警报消息`alert("JSEnabled");`，但警报从未出现。我该如何诊断？

我目前正在使用模拟器来开发项目，并且必须支持回到 Gingerbread (2.3.3)。

顺便说一句，当我在模拟器上使用浏览器应用程序时，相同的 html / js 工作正常（指向相同 HTML / js 的远程服务版本）

我还应该指出 - 所有文件都在项目的资产文件夹中，我尝试将 js 引用为 file:///android_assets/main.js 和 main.js。我什至尝试过引用远程 js 文件。没有任何作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:10:27.273

要使用您的 javascript 警报，请将其添加到您的 webview

```
 webview.setWebChromeClient(new WebChromeClient() {

        @Override
        public boolean onJsAlert(WebView view, String url, String message,
                JsResult result) {

            return super.onJsAlert(view, url, message, result);
        }

    }); 
```

# php - PHP如何像phpBB一样解析textarea中的html标签

> ID：13797775
> 
> 赞同：0
> 
> 时间：2012-12-10T09:01:27.537
> 
> 标签：php, html-parsing, xss, phpbb

> **可能重复：**
> [如何将 HTML 转换为 BBCode](https://stackoverflow.com/questions/4308734/how-to-convert-html-to-bbcode)

我正在建立允许用户发布主题的社区网站。当然，我应该意识到当一些“聪明的”用户试图“发布”一些不应该是它应该是的东西时，可能会发生许多问题。基本上我试图保护自己免受 XSS 攻击。
在我的 textarea 字段中，我当然应该过滤 html 标签，并且不允许 **script 或 iframe 标签**。
用自定义标签更改 html 标签的好方法，例如 phpBB 所做的：
**[b] 粗体 [/b]**
**[code] 片段在这里 [/code]**
**[list] 无序列表 [/list]**
我如何在 php 中做到这一点，或者只是我如何在 php 中将这些标签作为字符串捕获并在阅读文本时执行渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:03:53.050

不要重新发明轮子，看看PHP.net 上的[公告板代码](http://php.net/manual/en/book.bbcode.php)。

# php - 用 PEAR 安装 Doctrine2

> ID：13797778
> 
> 赞同：1
> 
> 时间：2012-12-10T09:01:39.577
> 
> 标签：php, doctrine-orm, pear, failed-installation

当我尝试这个时： `sudo pear install -o pear.doctrine-project.org/DoctrineORM`

我收到以下错误：

```
 Package "pear.doctrine-project.org/DoctrineORM" dependency  "pear.symfony.com/Console" has no releases
    Package "pear.doctrine-project.org/DoctrineDBAL" dependency "pear.symfony.com/Console" has no releases
    doctrine/DoctrineORM requires package "pear.symfony.com/Console" (version >= 2.0.0)
    doctrine/DoctrineORM requires package "pear.symfony.com/Yaml" (version >= 2.0.0), installed version is 1.0.6
    doctrine/DoctrineDBAL requires package "pear.symfony.com/Console" (version >= 2.0.0)
    No valid packages found
    install failed 
```

通过执行以下操作解决了上述问题： `sudo apt-get purge php-pear`

最终得到如下结果：

```
 Removing php-pear ...
    Purging configuration files for php-pear ...
    dpkg: warning: while removing php-pear, directory '/usr/share/doc/php5-common/PEAR' not empty so not removed
    dpkg: warning: while removing php-pear, directory '/usr/share/php/.channels' not empty so not removed 
```

以下文件夹也是如此：

```
 /usr/share/php/.registry/
    /usr/share/php/.channels/.alias
    /usr/share/php/data
    /usr/share/doc/php5-common/PEAR/Archive_Tar/docs
    /usr/share/doc/php5-common/PEAR 
```

因此，我将它们全部删除，然后`php-pear`完全清除并重新安装。

现在，`sudo pear channel-discover pear.doctrine-project.org`也没有说频道已经在注册表中，后面的步骤也成功了。

虽然我已经在上述步骤中解决了我的问题。虽然我未能使用这篇[文章的评论和答案中所述的建议](https://stackoverflow.com/questions/12536668/how-do-i-correctly-install-phpunit-with-pear/13620648#13620648)

但我只是好奇一开始可能出了什么问题。PEAR 为何无法获取正确版本的 Doctrine2？

即使[接受 answer](https://stackoverflow.com/a/12545727/799845)的过程也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:28:50.677

您应该已经升级了`pear.symfony.com/Yaml`软件包。PEAR 列出了 2.0.0 版本作为要求，但您只有 1.0.6：

```
$ pear upgrade symfony/yaml 
```

此外，它没有找到（兼容的）版本`pear.symfony.com/console`- 这是失败的主要原因。一个解决方案是一个`pear clear-cache`电话，然后是一个可能的`pear channel-update pear.symfony.com`电话。之后，控制台 dep 应该会自动安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-17T08:16:18.280

我遇到了与本主题相同的问题，但安装了 Doctrine pear。

当我尝试这个时： `sudo pear install -o pear.doctrine-project.org/DoctrineORM`

我收到以下错误：

```
 Package "pear.doctrine-project.org/DoctrineORM" dependency  "pear.symfony.com/Console" has no releases
        Package "pear.doctrine-project.org/DoctrineDBAL" dependency "pear.symfony.com/Console" has no releases
        doctrine/DoctrineORM requires package "pear.symfony.com/Console" (version >= 2.0.0)
        doctrine/DoctrineORM requires package "pear.symfony.com/Yaml" (version >= 2.0.0), installed version is 1.0.6
        doctrine/DoctrineDBAL requires package "pear.symfony.com/Console" (version >= 2.0.0)
        No valid packages found
        install failed 
```

我已经应用了 @Paulo 和 @Parris 在另一个 SO QA 中的建议。但这并没有帮助。在这里发布只是为了记录。

编辑：

通过执行以下操作解决了上述问题： `sudo apt-get purge php-pear`

最终得到如下结果：

```
 Removing php-pear ...
        Purging configuration files for php-pear ...
        dpkg: warning: while removing php-pear, directory '/usr/share/doc/php5-common/PEAR' not empty so not removed
        dpkg: warning: while removing php-pear, directory '/usr/share/php/.channels' not empty so not removed 
```

以下文件夹也是如此：

```
 /usr/share/php/.registry/
        /usr/share/php/.channels/.alias
        /usr/share/php/data
        /usr/share/doc/php5-common/PEAR/Archive_Tar/docs
        /usr/share/doc/php5-common/PEAR 
```

因此，我将它们全部删除，然后`php-pear`完全清除并重新安装。

现在，`sudo pear channel-discover pear.doctrine-project.org`也没有说频道已经在注册表中，后面的步骤也成功了。

谢谢大家！

# ios - Parse.com 推送通知徽章值

> ID：13797786
> 
> 赞同：3
> 
> 时间：2012-12-10T09:02:19.193
> 
> 标签：ios, push-notification, badge, parse-platform

我在 iOS 应用程序中使用[parse.com](http://www.parse.com)和[iOS Parse Framework](http://www.parse.com/apps/quickstart)。我想向频道发送推送通知，但我希望将徽章的值设置为`1`，即使用户收到多个通知。

以下是用于发送通知的代码，取自文档：

```
NSDictionary *data = [NSDictionary dictionaryWithObjectsAndKeys:
    @"Here is the content of the notification !", @"alert",
    @"Increment", @"badge",
    @"cheering.caf", @"sound",
    nil];
PFPush *push = [[PFPush alloc] init];
[push setChannels:[NSArray arrayWithObjects:@"A Channel", nil]];
[push setData:data];
[push sendPushInBackground]; 
```

以下是[他们](http://www.parse.com/docs/push_guide#options-data/iOS)`badge`对字典中键值的评价（转到“发送选项”>“自定义通知”） ：

> **徽章：（** *仅限 iOS）*应用图标右上角指示的值。**这可以设置为一个值**或增量，以便将当前值增加 1。

很明显，该值`@"Increment"`工作正常，但我想始终将徽章值设置为“ `1`”。

什么是正确的语法？我好像找不到！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T19:19:07.040

您应该使用 NSNumber。IE

```
[push setData:@{
    @"alert": @"Here is the content of the notification !",
    @"badge": @1,
    @"sound": @"cheering.caf"}]; 
```

# c# - 作为单行矢量路径的文本轮廓

> ID：13797787
> 
> 赞同：9
> 
> 时间：2012-12-10T09:02:21.910
> 
> 标签：c#, text, gdi+, glyph

对于应用程序，我需要将文本/字形绘制为基于矢量的路径。使用[GDI+](https://stackoverflow.com/questions/4200843/outline-text-with-system-drawing) GraphicsPath 和 Graphics.DrawPath 或[WPF](http://blogs.msdn.com/b/wpfsdk/archive/2006/12/24/using-text-as-a-decorative-graphic.aspx) FormattedText 和 Geometry 工作正常，我得到的输出如第一张图片所示。但是，是否有可能以某种方式将字母作为单行路径，如第二张图片所示（显示 L）。

如果有人有想法，我很高兴。

![文字大纲](../Images/a57448e931472c1fecfdca13e2d64903.png) ![单行字形路径](../Images/73cc50e9a2de5e5a263d0525a9693b91.png)

请参阅此示例。使用内置函数将始终为您提供包含其内部和外部边界的字母的路径。只有第一个是由单笔划组成的，这导致路径更短。

![在此处输入图像描述](../Images/b7a748c4d515eb8ce0948f14f392666b.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-22T23:02:16.457

单笔画字体通过字体的填充区域来定义自己。TTF（轮廓）字体通过围绕填充区域的笔划定义每个字符。所以，它们**必然**形成一个封闭的形状。换句话说，不可能有“真正的单笔”轮廓字体，因为单笔字体只有一个填充区域。.NET Framework 仅支持 TTF 字体。

幸运的是，有一些字体通过闭合轮廓笔画来模拟单笔画行为。大多数情况下，它们被 CNC 绘图软件使用。这是 zip 文件的[链接](http://www.mrrace.com/CamBam_Fonts/CamBam%20Stick%20Fonts.zip)，其中包含 @Simon Mourier 建议使用的相同字体。

我尝试了第一个，实际上我看不到封闭区域的单独路径。我确实编写了一些代码，使常规字体的笔画靠近自己，但弯曲区域在某些地方消失了。无论 .NET 使用什么内部算法来尝试从压扁的轮廓创建 1px 路径，都不能像使用设计良好的字体那样工作。因此，这与使用 .NET 一样好。

您可以使用此代码查看安装后每种字体产生的效果。或者，我想您可以在您的软件中尝试它们 :) 无论哪种方式，我希望这对您有用。

这是`Graphics.DrawPath`, NOT的输出`Graphics.FillPath`。

![在此处输入图像描述](../Images/c303a8b1ebadf9cbe0f9a25b355b5f4d.png)

```
 private void button1_Click(object sender, EventArgs e) {
        DrawText("single stroke ttf engraving fonts");
    }

    private void DrawText(string text) {
        using (Graphics g = panel.CreateGraphics())
        using (Font font = new System.Drawing.Font("1CamBam_Stick_1", 50, FontStyle.Regular))
        using (GraphicsPath gp = new GraphicsPath())
        using (StringFormat sf = new StringFormat()) {
            sf.Alignment = StringAlignment.Center;
            sf.LineAlignment = StringAlignment.Center;

            gp.AddString(text, font.FontFamily, (int)font.Style, font.Size, panel.ClientRectangle, sf);
            g.Clear(Color.Black);
            g.DrawPath(Pens.Red, gp);
        }
    } 
```

此外，如果您打算做很多这样的事情，这里是一篇非常相关的文章。 [http://tipsandtricks.rolanddga.com/software/how-to-generate-single-line-fonts-for-use-with-dr-engrave/](http://tipsandtricks.rolanddga.com/software/how-to-generate-single-line-fonts-for-use-with-dr-engrave/)

# .net - 两个语句之间的区别

> ID：13797789
> 
> 赞同：0
> 
> 时间：2012-12-10T09:02:39.163
> 
> 标签：.net, c++-cli

有什么区别：

```
this->textBox1->Text = this->textBox1->Text + ("2"); 
```

还有这个：

```
this->textBox1->Text = this->textBox1->Text + "2"; 
```

或者它只是一个语法糖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:04:28.997

那是完全相同的，因此就结果而言没有区别。编译器首先将评估括号中的内容，因为它只是（“2”），它将导致“2”，因此与您的第二个代码相同。

# asp.net - CKEditor 与 AjaxControlToolkit 的 ModalPopup

> ID：13797795
> 
> 赞同：0
> 
> 时间：2012-12-10T09:02:51.887
> 
> 标签：asp.net, ckeditor, ajaxcontroltoolkit

我通过使用 CKEditor 的 ASP.NET 控件（v 3.6.4）嵌入了 Ckeditor 的 *.ascx 控件。我也有来自 AjaxControlToolkit4.5 的 ModalPopup 控件，附加到链接按钮。单击时，它会显示面板，其中在逻辑背后的一些代码的帮助下填充了单选按钮列表。

我应该如何更改我的 *.ascx 控件以在工具栏中有一个 CKEditor'a 插件按钮，触发这个 ModalPopup？

代码（不工作）：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="CKEditorWithModalPopup.ascx.cs" Inherits="Controls_CKEditorWithModalPopup" %>

<%@ Register Assembly="CKEditor.NET" Namespace="CKEditor.NET" TagPrefix="CKEditor" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>

<script type="text/javascript">

    $(function () {

        var a = {
            exec: function (editor) {
                javascript: __doPostBack('ctl03$LinkButton1', '') // explicite id for test
            }
        },

        b = 'modalPopup';

        CKEDITOR.plugins.add(b, {
            init: function (editor) {
                editor.addCommand(b, a);
                editor.ui.addButton("modalPopup", {
                    label: 'Modal Popup',
                    icon: "~/Images/modal_popup.png",
                    command: b
                });
            }
        });
    });

</script>

<CKEditor:CKEditorControl ID="CKEditor1" BasePath="~/ckeditor" Toolbar="Basic" runat="server" />

<ajaxToolkit:ModalPopupExtender ID="ModalPopupExtender" runat="server" TargetControlID="LinkButton1"
        PopupControlID="Panel1" BackgroundCssClass="modalBackground" OkControlID="OkButton"
        CancelControlID="CancelButton" DropShadow="true" PopupDragHandleControlID="Panel3" />

<asp:LinkButton ID="LinkButton1" runat="server" Text="Click here to change the paragraph style" />

<asp:Panel ID="Panel1" runat="server" Style="display: none" CssClass="modalPopup">

    <asp:Panel ID="Panel3" runat="server" Style="cursor: move; background-color: #DDDDDD;
        border: solid 1px Gray; color: Black">
        <div>
            <p>
                Choose the phrase to insert:</p>
        </div>
    </asp:Panel>

    <asp:RadioButtonList ID="rbList" runat="server" />

    <p style="text-align: center;">
        <asp:Button ID="OkButton" runat="server" Text="OK" />
        <asp:Button ID="CancelButton" runat="server" Text="Cancel" />
    </p>

</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T18:04:07.260

我为 CKEditor 模态弹出功能找到了更好的解决方案 - 我决定将其编写为 CKEditor 插件。这是更容易和可维护的方法。

[使用自定义对话窗口创建 CKEditor 插件](http://docs.cksource.com/CKEditor_3.x/Tutorials/SimpleLink_Plugin_Part_1)

此答案的目的是结束旧问题。

# android - Android 如何在搜索栏中添加间隔文本

> ID：13797807
> 
> 赞同：14
> 
> 时间：2012-12-10T09:03:58.230
> 
> 标签：android, seekbar

我正在使用搜索栏，我想在搜索栏中添加某些带有文本的标记以将其用作比例。应突出显示选定的间隔点。 ![在此处输入图像描述](../Images/7ecf4d61f0a01fe3710beb0f8ad41daf.png)

对应的代码在这里：

```
 seekbar = (SeekBar) findViewById(R.id.seekBar1);
    seekbar.setMax(max);
    seekbar.setProgress(50);
    seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            // TODO Auto-generated method stub
            value.setText("SeekBar value is " + progress);
        }

        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub
        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T12:16:26.367

要制作上述搜索栏，您首先必须添加一个测量比例作为背景可绘制对象。然后，您必须为测量刻度上的每个间隔制作文本框。

```
<SeekBar 
        ....
android:progressDrawable="@drawable/progress"
android:thumb="@drawable/thumb"
        ....
/> 
```

然后

```
public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {   
   progress = ((int)Math.round(progress/interval))*interval;
   seekBar.setProgress(progress);
   if(progress==5) textBox5.setTextColor(Color.RED);
   else if(progress==10) textBox10.setTextColor(Color.RED);
   //......... for all the text boxes.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-10T06:22:18.880

实际上，上述所有解决方案都强制选择最后一个进度点，这不符合逻辑。

为了使它更准确，Seek bar 必须检测到哪个是最近的点并跳转到它。

所以下面是解决方案，

```
@Override
public void onStopTrackingTouch(SeekBar seekBar) {

    int progressStep = getMax() / dotsCount;

    int lastDotProgress = Math.round(getProgress() / progressStep) * progressStep;
    int nextDotProgress = lastDotProgress + progressStep;
    int midBetweenDots = lastDotProgress + (progressStep / 2);

    if (getProgress() > midBetweenDots)
        seekBar.setProgress(nextDotProgress);
    else
        seekBar.setProgress(lastDotProgress);
} 
```

如果你想防止在点之间寻找，你可以在 onProgressChanged() 中使用相同的行为

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:14:46.707

```
public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {   
 int s_size=5;
    progress = ((int)Math.round(progress/s_size))*s_size;
    seekBar.setProgress(progress);
    textview.setText(progress + "");
} 
```

> 你想 settext 很容易从进度和 textview.settext() 值中得到什么

# java-native-interface - jni 中的 env->ReleaseDoubleArrayElements()

> ID：13797809
> 
> 赞同：0
> 
> 时间：2012-12-10T09:04:02.413
> 
> 标签：java-native-interface

我在 releasedoublearrayelements 中遇到了问题，它在这个函数中崩溃了，所以请你帮我解决这个问题，这是我的代码：

```
jdouble *dxyz = new jdouble[3];
    dxyz[0] = 0.0;
    dxyz[1] = 0.0;
    dxyz[2] = 0.0;
    jdoubleArray darr = env->NewDoubleArray(3);
    env->SetDoubleArrayRegion(darr,0,3,dxyz); 

    jclass dclass = env->GetObjectClass( darr );
    jobjectArray iarr = env->NewObjectArray(nbControlNodes,dclass,darr);
    env->ReleaseDoubleArrayElements(darr,dxyz,JNI_ABORT);//its crashing here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T23:00:10.677

`ReleaseDoubleArrayElements`旨在用于`dxyz`通过`GetDoubleArrayElements`. 这样，JNI 会为您创建一个 C 数组，并且它需要知道何时进行解除分配。崩溃很可能是因为`Release`试图释放你的`dxyz`with `free()`。您已经创建`dxyz`并`operator new`希望使用`delete`.

# asp.net - Window azure 并在项目类型上选择云

> ID：13797810
> 
> 赞同：0
> 
> 时间：2012-12-10T09:04:08.093
> 
> 标签：asp.net, visual-studio-2010, azure

我尝试在 azure 窗口中部署现有项目。我搜索了很多并找到了一些教程。我遵循了它们。

[http://www.developerfusion.com/article/119960/upgrade-your-aspnet-site-to-the-cloud/](http://www.developerfusion.com/article/119960/upgrade-your-aspnet-site-to-the-cloud/)

[http://netindonesia.net/blogs/wely/archive/2010/08/01/step-by-step-migrating-asp-net-application-to-windows-azure-part-1-preparing-the-application。 aspx](http://netindonesia.net/blogs/wely/archive/2010/08/01/step-by-step-migrating-asp-net-application-to-windows-azure-part-1-preparing-the-application.aspx)

我按照这些链接下载并安装 Windows `Azure SDK/Tolls`。但我在这里缺少一些东西。我正在使用。它是`VS2010`我的添加新网站向导。

![截屏](../Images/64f2fd5c0a5c58f66bfcb19c6ed329dd.png)

但我没有找到上面链接说的。

`In the New Project dialog, select Visual C# > Cloud > Windows Azure Project`

我的选择在哪里。我 `Cloud > Windows Azure Project`可能错过了一些`sdk`安装或我完全错误的方式？如何在本地测试该项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:27:24.567

我不确定您安装了什么，但是您正在查看的帖子已有两年多的历史了。如果您访问[windowsazure.com](http://www.windowsazure.com)，您会在顶部看到一个名为**Develop**的链接。单击它，然后转到右侧的**.NET 。**然后您会看到一些快速链接，其中之一是**安装 SDK**。选择它，您将看到 VS2010 或 VS2012 的选择。选择 VS2010，它应该会为您启动正确的安装程序。

完成所有这些后，启动 Visual Studio，您应该拥有云项目。

注意：在 .NET 开发页面中，还有一些教程可以帮助您入门。更上一层楼，下载[Windows Azure 培训工具包](http://www.microsoft.com/en-us/download/details.aspx?id=8396)，其中包含几乎所有 Windows Azure 服务的实验室。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:20:28.180

您不能使用“新网站”选项。您需要创建一个“新项目”并创建一个 Web 应用程序。创建 Web 应用程序项目后，添加另一个“新项目”，然后添加 Cloud >> Windows Azure Cloud Service。

![在 VS2012...](../Images/a225beb5c6e925678cd1e3f393f6ec5e.png)

![云项目](../Images/8874dba331fb126251aa3878ef0f8148.png)

# c# - 如何访问 SerialPort.Flush() 和 SerialPort.Finalize() 函数

> ID：13797812
> 
> 赞同：1
> 
> 时间：2012-12-10T09:04:12.553
> 
> 标签：c#, .net, winforms, io

我只是在浏览 msdn 并找到了这个[页面](http://msdn.microsoft.com/en-us/library/dd169859.aspx)。我从未见过这些功能`SerialPort.Flush()`或`SerialPort.Finalize()`以前。所以我尝试使用这些功能，但出现错误。

我添加了`System.IO.Ports`命名空间，但`Finalize()`函数出现以下错误：

`Cannot access protected member 'object.~Object()' via a qualifier of type 'System.IO.Ports.SerialPort'; the qualifier must be of type 'STP_Design.SerialCom' (or derived from it)`

我在函数上收到以下错误`Flush()`：

`'System.IO.Ports.SerialPort' does not contain a definition for 'Flush' and no extension method 'Flush' accepting a first argument of type 'System.IO.Ports.SerialPort' could be found (are you missing a using directive or an assembly reference?)`

我想我正在使用错误的方法访问 finalizing 函数（我可能根本不能访问它），但我真的想知道这个`Flush()`函数怎么样。

我用过这样的东西：

```
 private void test()
    {
        SerialPort s1 = new SerialPort();
        s1.PortName = "COM1";
        s1.Open();
        thread.Sleep(200);
        s1.WriteLine("test");
        s1.Flush();
        s1.Close();
        thread.Sleep(200);
        s1.Finalize();
    } 
```

这里有什么见解吗？

编辑：使用 SerialPort.Dispose(boolean) 函数遇到了同样的问题可选的布尔值也无法访问......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:10:12.427

[http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.aspx)：没有`Flush`。您正在查看 .Net Micro Framework，它显然有一个`Flush`

垃圾回收结束时，GC 会调用终结器。用户代码不能从外部访问它们，也不应该显式调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-20T07:58:08.047

您可以使用 DiscardInBuffer() 和 DiscardOutBuffer()

# jquery - 插件中 $.extend 调用的区别？

> ID：13797815
> 
> 赞同：1
> 
> 时间：2012-12-10T09:04:31.370
> 
> 标签：jquery, jquery-plugins

我相信这个问题与此有关：[init 函数如何在插件中工作？](https://stackoverflow.com/questions/13723395/how-does-the-init-function-work-in-plugins)谁能回答这个问题，可能就可以回答这个问题。

如果我将我的插件称为：

```
$('.view_title_images').prodigal({width: 500});
$('.glglg').prodigal({ width: 600 }); 
```

然后，在我的`init`函数中，我扩展为：

```
options = $.extend({}, options, opts); 
```

并将其添加到每个元素：`$(this).data('prodigal', options)`在选择器中。稍后当我在元素上调用另一个函数时，我会`width`为每个元素（`500`一个元素和另一个元素）获得正确的值。`600``open``click`

但是，如果我这样做：

```
options = $.extend(options, opts); 
```

对于这两个选择器，尽管被单独调用，我得到`600`. 我在我的`open`函数中通过这样做来测试它：

```
console.log($(this).data('prodigal')); 
```

我知道不扩展到空对象将覆盖该选择器/全局对象的对象，但为什么`data`每个选择器都会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:08:24.483

首先，它是一个对象，而不是一个数组。而且您很可能不想扩展预先存在的对象，而是创建一个基于默认值的新对象，然后使用传递的选项覆盖这些对象，如下所示：

```
options = $.extend({}, defaults, opts); 
```

它的作用是`$.extend`使用其余参数扩展第一个参数（数组或对象）。因此，将预先存在的对象作为第一个参数传递将不会创建克隆，而是更改原始对象。

在上面的示例中，通过传递一个新对象 ( `{}`)，我们改为创建第二个参数的克隆，然后用第三个参数覆盖。

改变它会解决很多问题，但你仍然会遇到竞争条件，因为它仍然会在实例之间共享相同的选项对象。那么，如果我只想为其中一个或两个实例更改选项怎么办？

解决方案很简单，只需将该行移动到`.each`循环中，插件的每个实例都会有自己的选项对象。

这是[jsFiddle 上的一个测试用例](http://jsfiddle.net/mekwall/bvswE/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:13:15.060

尽管@Marcus 的回答很好，并且它显示了一个很好的插件设置，实际上可以避免这种混淆，但我想我会放置这个答案，因为它只是更好地回答了这个问题。

我正在见证，就像在 PHP 中一样，这里有一个用于内存管理的写时复制场景：[什么是写时复制？](https://stackoverflow.com/questions/628938/what-is-copy-on-write)由此我的 init 函数，如这个小提琴所示：http: [//jsfiddle.net/Sammaye/65XLy/1](http://jsfiddle.net/Sammaye/65XLy/1)受到每个调用引用的静态选项对象的影响。所以两者：

```
$('.view_title_images').prodigal({width: 500});
$('.glglg').prodigal({ width: 600 }); 
```

为插件中的对象引用内存中的相同位置，`options`因为数据分配不是写安全复制：

```
$(this).data('prodigal', options).on('click', open); 
```

事实证明，如果您将小提琴中的这一行更改为：

```
$(this).data('prodigal', $.extend(options, opts)).on('click', open); 
```

它实际上的工作原理与`var options = $.extend({}, options, opts);`它在扩展时复制到一个新的空对象的方式相同，在写入时复制会触发一个副本。

这就是我看到这个的原因，因为`data`每个元素中的实际上都是对静态对象（插件）`options`对象的引用。

作为补充说明，我实际上在发布此答案后不久就发现了这一点：[http](http://my.opera.com/GreyWyvern/blog/show.dml/1725165) ://my.opera.com/GreyWyvern/blog/show.dml/1725165作者指出：

> 关于 Javascript，有一些事情会让人们大吃一惊。一个事实是，将布尔值或字符串分配给变量会复制该值，而将数组或对象分配给变量会引用该值。

这完美地解释了我的问题。

# php - 检查表单字段数组时空函数不起作用

> ID：13797826
> 
> 赞同：1
> 
> 时间：2012-12-10T09:05:12.203
> 
> 标签：php, arrays

我有一个名为 say 的 html 文本框元素数组`date_field[]`。表单中可能有多个字段。提交表单以检查是否至少有一个文本框不为空后，我使用了 -

```
<?php
if(empty($_POST["date_field"])){
        echo "Is empty";
    }else{
        echo "is not empty";
    }
?> 
```

`is not empty`无论我填写还是不填写，它都会回响`date_field`。

PS如果我使用打印表单值`print_r`

如果我没有把价值

```
[followup_date] => Array
        (
            [0] => 
        ) 
```

如果我把价值

```
[followup_date] => Array
        (
            [0] => 2012-12--14
        ) 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:07:33.813

您的“空”数组包含一个空字符串：

```
array(0 => '') 
```

这不是一个*空*数组。唯一的“空”数组是`array()`.

您可能希望通过 运行它[`array_filter`](http://php.net/array_filter)，这会删除所有评估为的元素`false`（其中还包括`"0"`，请小心）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:13:09.993

该数组不为空，因为每个未禁用的表单字段将包含一个元素（即使这些字段为空）。

您可以使用@deceze 提到的 array_filter 函数，但请记住，这也会删除一些人类不会认为是空的元素。

因此，我宁愿自己遍历数组并检查您想要的所有元素是否为空。例如：

```
function all_is_empty(array $subject)
{
    foreach($subject as $value)
        if(str_len($value) > 0)
            return false;
    return true;
} 
```

用法：

```
if(all_is_empty($_POST["date_field"]))
{
    echo "Is empty";
}
else
{
    echo "is not empty";
} 
```

如果这是我，我可能还会将此与检查所有字段是否有效结合起来。因此，如果您知道该数组中的所有字段都应该是日期，请检查它们是否真的是:)

# oracle - 如何从另一台机器访问 oracle oem？

> ID：13797828
> 
> 赞同：0
> 
> 时间：2012-12-10T09:05:32.590
> 
> 标签：oracle, oracle11g

我是 oracle 的新手，但我曾经使用过 sql server。我意识到有一个名为 oem 的图形控制台，我们可以从 web 浏览器中使用它。oracle安装在CentOS 6.3，它是oracle 11g r2。我电脑的操作系统是win7。我可以在本地访问服务器机器中的oem，但我无法使用IP地址从我的计算机访问它。那我应该怎么配置？
我的错误页面是这样的： ![错误页面](../Images/268170f421c182867f18dbe3b99165f7.png) 谢谢

# python - 列表索引超出范围错误：python

> ID：13797829
> 
> 赞同：0
> 
> 时间：2012-12-10T09:05:37.937
> 
> 标签：python, mysql, sql

```
import MySQLdb
import pyodbc

typesFile = open('servinfo.txt', 'r').readlines()
dataTypes = dict((row.split(',')[0].strip(),row.split(',')[1].strip()) for row in typesFile)   

conn = pyodbc.connect('DRIVER={FreeTDS}; SERVER=prsoft; DATABASE=blueseas; UID=sa;    PWD=tiger')
msCursor = conn.cursor()

db = MySQLdb.connect(passwd="pr", db="tenable")
myCursor = db.cursor()

msCursor.execute("SELECT * FROM airlinemaster WHERE type='U'") 
dbTables = msCursor.fetchall()
noLength = [56, 58, 61] 

for tbl in dbTables:
msCursor.execute("SELECT * FROM airlinemaster WHERE airline = air india('%s')" % tbl[0]) #syscolumns: see sysobjects above.
columns = msCursor.fetchall()
attr = ""
for col in columns:
colType = dataTypes[str(col.xtype)] 

if col.xtype == 60:
    colType = "float"
    attr += col.name +" "+ colType + "(" + str(col.length) + "),"
elif col.xtype in noLength:
    attr += col.name +" "+ colType + ","
else:
    attr += col.name +" "+ colType + "(" + str(col.length) + "),"

attr = attr[:-1]
myCursor.execute("CREATE TABLE " + tbl[0] + " (" + attr + ");") #create the new table and all columns
msCursor.execute("select * from %s" % tbl[0])
tblData = msCursor.fetchall()

#populate the new MySQL table with the data from MSSQL
for row in tblData:
fieldList = ""
for field in row:
    if field == None: 
    fieldList += "NULL,"
    else:
    field = MySQLdb.escape_string(str(field))
    fieldList += "'"+ field + "',"

fieldList = fieldList[:-1]
myCursor.execute("INSERT INTO " + tbl[0] + " VALUES (" + fieldList + ")" ) 
```

我已经以多种方式尝试了上面的代码来导入数据..但由于列表索引超出范围仍然不断出错..不知道我哪里出错了..我该如何解决这个问题？

```
 Traceback (most recent call last):
 File "C:\Python27\programs new\codes.py", line 10, in <module>
 dataTypes = dict((row.split(',')[0].strip(),row.split(',')[1].strip()) for row in typesFile)
 File "C:\Python27\programs new\codes.py", line 10, in <genexpr>
 dataTypes = dict((row.split(',')[0].strip(),row.split(',')[1].strip()) for row in typesFile)
 IndexError: list index out of range 
```

请帮助..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:09:28.430

您至少有一个其中`row`没有`typesFile`逗号`,`：

```
>>> 'line without a comma'.split(',')
['line without a comma']
>>> 'line without a comma'.split(',')[1]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range 
```

如果`servinfo.txt`应该是包含两列的逗号分隔文件，为什么不使用`csv`模块来读取它呢？

```
import csv
csvreader = csv.reader(open('servinfo.txt', 'rb'))
dataTypes = dict(csvreader) 
```

但是，这并不能解决您的问题，因为该文件中有一行没有逗号，您必须先解决该问题。

# magento - system.xml magento 中的 Onchange 事件

> ID：13797831
> 
> 赞同：0
> 
> 时间：2012-12-10T09:05:43.147
> 
> 标签：magento

谁能告诉我怎么做. 我的代码是：选择选项

```
<email_sender translate="label">
  <label>E-mail Sender</label>
  <frontend_type>select</frontend_type>
  <source_model>adminhtml/system_config_source_email_identity</source_model>
  <sort_order>0</sort_order>
  <show_in_default>1</show_in_default>
  <show_in_website>1</show_in_website>
  <show_in_store>1</show_in_store>
</email_sender> 
```

要在选择选项上显示的文本框是：

```
<interval translate="label">
  <label>Interval</label>
  <frontend_type>text</frontend_type>
  <sort_order>4</sort_order>
  <show_in_default>1</show_in_default>
  <show_in_website>1</show_in_website>
  <show_in_store>1</show_in_store> 
```

. 而对于选择我在模型中使用这段代码

```
public function toOptionArray()
{
    return array(
        array('value'=>'show_txtbx', 'label'=>Mage::helper('mymodule')->__('Show Textbox')),
        array('value'=>'hide', 'label'=>Mage::helper('mymodule')->__('Hide')),

    );
} 
```

我该怎么做。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:41:30.383

大家好，经过一番额外的搜索，我得到了答案。感谢艾伦提供了这么好的教程。这是我得到答案的链接。[点击这里](http://alanstorm.com/magento_system_configuration_in_depth_tutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-11T10:29:45.233

我尝试了上面给出的链接，但就我而言，它不适用于该语法。添加依赖的核心概念是正确的，但我猜语法有些不同。您需要添加

```
<depends>
    <field id="custom">1</field>
</depends> 
```

这是一个对我有用的链接： [https ://webkul.com/blog/create-dependant-field-admin-configuration-magento-2/](https://webkul.com/blog/create-dependant-field-admin-configuration-magento-2/)

# c# - C# - perlembed - linux中的编译错误

> ID：13797834
> 
> 赞同：0
> 
> 时间：2012-12-10T09:06:19.013
> 
> 标签：c#, c, linux, perl

我想问你一个关于 perlembed 的问题。关于以下问题的最后一个条目： [PerlEmbed - C# - Mono - Linux](https://stackoverflow.com/questions/1196620/perlembed-c-sharp-mono-linux?answertab=oldest#tab-top)

我问了 jonathanpeppers，但他说他不再研究 perl 和 c。所以我问这个小组。

我尝试在 linux 机器上运行 perlembed.c，但出现以下错误。你能帮帮我吗？

```
[root@BSG01 melih]# gcc -shared -Wl,-soname,perlembed.so -o perlembed.so perlembed.c `perl -MExtUtils::Embed -e ccopts -e ldopts`
/usr/bin/ld: /tmp/ccRP7CYZ.o: relocation R_X86_64_32S against `a local symbol' can not be used when making a shared object; recompile with -fPIC
/tmp/ccRP7CYZ.o: could not read symbols: Bad value
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T13:44:33.710

只需按照错误消息中的建议进行操作即可。使用编译器选项`-fPIC`：

```
gcc -shared -Wl,-soname,perlembed.so -o perlembed.so -fPIC perlembed.c `perl -MExtUtils::Embed -e ccopts -e ldopts` 
```

**编辑：**

[有关's options](http://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html)的文档，请参见[此处`gcc`](http://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html)。

# kendo-ui - 如何使用kendoui在网格中使用模板功能

> ID：13797836
> 
> 赞同：1
> 
> 时间：2012-12-10T09:06:21.850
> 
> 标签：kendo-ui

我正在使用模板来显示一些按钮。我写了以下代码：

```
template: kendo.template($("#edit-template").html()) 
```

在我写的编辑模板中：

```
<script id="edit-template" type="text/x-kendo-template">
    <a class="k-grid-edit" style="visibility:hidden;" id="edit">Edit</a>
</script> 
```

最初它将是隐藏模式。在数据绑定功能上，我将显示或隐藏按钮。如果显示权限，那么我写

```
$(".k-grid-edit").show(); 
```

每当我更新网格时，编辑按钮就会再次消失。这是因为按钮最初处于隐藏状态。更新后，我还需要以可见模式显示。我怎样才能做到这一点。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:46:15.540

如何将您的模板转换为：

```
<script id="edit-template" type="text/x-kendo-template">
    # if (isVisible) { #
        <a class="k-grid-edit">Edit</a>
    # } else {#
        <a class="k-grid-edit" style="display:none">Edit</a>
    # } #
</script> 
```

然后有一个变量：

```
var isVisible = false; 
```

然后将其切换为可见是：

```
isVisible = true;
$(".k-grid-edit").show(); 
```

虽然隐藏它是：

```
isVisible = false;
$(".k-grid-edit").hide(); 
```

基本上，变量`isVisible`存储状态，模板使用 JavaScript 对其进行检查。

**注意**该模板可能更紧凑，但我认为这更具可读性。

还有一个问题（样式）我从模板中`id`的锚点中删除了，因为它必须是唯一的，并且您为所有行设置了相同的 id。`a``id``kendoGrid`

# jquery-validate - Jquery验证数字范围

> ID：13797838
> 
> 赞同：1
> 
> 时间：2012-12-10T09:06:25.593
> 
> 标签：jquery-validate

我想在 jquery 验证规则中将有效数字从 -1 设置为无穷大，但是我应该如何指定数字范围。从我指定“-1”及其工作，但**应该**是什么值**。**

```
rules: {
                "numberOfUsers": {
                    "required": true,
                    "number":true,
                    "range":[-1,1000]
                } 
```

- 谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:14:19.013

当一个数字超过浮点数的上限时显示无穷大，即 1.7976931348623157E+10308。

像这样重写你的规则

```
rules: {
                "numberOfUsers": {
                    "required": true,
                    "number":true,
                    "range":[-1,1.7976931348623157E+10308]
                } 
```

或者干脆用这个

```
rules: {
                    "numberOfUsers": {
                        "required": true,
                        "number":true,
                        "range":[-1,Infinity]
                    } 
```

# oracle - Oracle - 如何使用 oracle 变量创建 oracle 用户？

> ID：13797841
> 
> 赞同：0
> 
> 时间：2012-12-10T09:06:38.387
> 
> 标签：oracle

我想在脚本文件中创建一个带有 oracle 变量的 oracle 用户，而不是 PL/SQL 客户端。

像这样的东西：

```
define var DBUSERNAME = 'AAA';

CREATE USER '&DBUSERNAME' PROFILE "DEFAULT" IDENTIFIED BY "pwd123" DEFAULT TABLESPACE "USERS" TEMPORARY TABLESPACE "TEMP" ACCOUNT UNLOCK
BEGIN
DBMS_WM.GrantSystemPriv('ACCESS_ANY_WORKSPACE', '&DBUSERNAME', 'NO');
END;

GRANT ADMINISTER ANY SQL TUNING SET TO '&DBUSERNAME'
GRANT ADMINISTER DATABASE TRIGGER TO '&DBUSERNAME'
BEGIN
dbms_resource_manager_privs.grant_system_privilege(privilege_name=>'ADMINISTER_RESOURCE_MANAGER', grantee_name=>'&DBUSERNAME', admin_option=>FALSE);
END;

GRANT ADMINISTER SQL TUNING SET TO '&DBUSERNAME'
GRANT ADVISOR TO '&DBUSERNAME'
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:45:03.003

对于 DDL 调用，用户名不应包含在引号中：

```
define var DBUSERNAME = 'AAA';

CREATE USER &DBUSERNAME PROFILE "DEFAULT" ... 
```

它可以用*双*引号括起来，但我建议您仅在确定名称将设置为大写以避免将来出现问题时才这样做 - 最好跳过引号以避免这种情况。`create`（只要您没有任何具有奇怪名称的东西，您实际上也不需要在呼叫中使用双引号引起的配置文件、密码等，但是`get_ddl`为了安全起见，实用程序总是包含它们）。尽管如果它们无论如何都不是大写的，那么过程调用可能无法识别该名称。

`GrantSystemPriv`脚本中唯一需要单引号的地方是对and的调用`grant_system_privilege`，其中您将字符串作为参数传递。

您还缺少 DDL 语句后的分号，以及`/`匿名 PL/SQL 块后的终止符：

```
GRANT ADMINISTER DATABASE TRIGGER TO &DBUSERNAME; 
```

和

```
BEGIN
    dbms_resource_manager_privs.grant_system_privilege(
        privilege_name=>'ADMINISTER_RESOURCE_MANAGER',
        grantee_name=>'&DBUSERNAME',
        admin_option=>FALSE);
END;
/ 
```

等等

# javascript - 编写行中最高的标题

> ID：13797843
> 
> 赞同：0
> 
> 时间：2012-12-10T09:06:43.760
> 
> 标签：javascript, jquery, html

我有这种类型的[目录](https://i.stack.imgur.com/eHHil.jpg)，它是用 li 和 float:left 制作的。如何从字符串中选择最高的产品标题。例如，我有 2 个产品字符串，第一行最高的标题有 2 个文本字符串，这意味着这个字符串中的所有标题都应该等于最高标题的高度，第二行最高的标题有 3文本字符串，这意味着这个字符串中的所有标题都应该等于高度为 3 的字符串，即使它有 1 个字符串

这是我的标记[点击](http://business-dev4.alleanza.ru/mu/vikkar/02_psd_catalog.html)

```
<ul class="b-products__list">
   <li class="b-product">
    <div class="b-product__img-wrap"><a href="" class="b-product__img-link" title="товар"><img src="_mod_files/ce_images/product-1.jpg" alt="" class="b-product__img"></a></div>
    <h3 class="b-product__title"><a href="" class="b-product__link">Интеллектуальные вентиляторы вентиляторы</a></h3>
   </li>
   <li>...</li> 
```

![在此处输入图像描述](../Images/825ae6fc8e145ddbb9d2681faa31b25e.png)

我有一个类似的脚本，但它没有按行查找

```
function setEqualHeight(columns)
{var tallestcolumn = 0;
columns.each(
function()
{currentHeight = $(this).height();
if(currentHeight > tallestcolumn)
{tallestcolumn = currentHeight;}
});
columns.height(tallestcolumn);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:11:26.597

最简单的方法是将所有行合并到容器中并更改`<li>`此容器中每个行的高度，如果不可能或您不知道有多少项目可以包含您的行，您可以通过 offset().top 在这里区分每一行下面是一个适用于您的页面的示例。可以重构，但主旨清晰

```
function getHeight(offset){
var max = 0;
var curr = 0;
$('.b-product__title').each(function(){
    curr = $(this).height();
    if($(this).offset().top == offset && curr > max){
        max = curr
    }
});
return max;
}

$('.b-product__title').each(function(){
    var offset = $(this).offset().top;
    var height = getHeight(offset);
    $(this).height(height);
}); 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:59:47.013

仅使用 HTML 和 CSS 就有多种选择。一方面，它是表格数据，没有什么可以反对为此使用好的 ol' `<table>`。

如果你不能这样做，你可以使用[本文](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)`display: inline-block`中讨论的方法。最终结果将与您目前的结果相同，但它会是稳定的，即，如果某些内容不匹配，则不会像这样：

![错误显示：浮动](../Images/6441c296a99fcc47c74ecfa441aad23c.png)

第三，如果您不能使用表格并且需要相等的高度，请像这样遍历每一行：

```
var lis = $('.b-products__list').find('li'),// all list elements
    lis_length = lis.length,
    row_width = 3, // the number of columns
    i, tmp_h3s, tmp_height;

// loop through all lis, but with row_width instead of `1`
for (i = 0; i < lis_length; i += row_width) {
  tmp_height = 0;

  // fetch all relevant headings in this group
  tmp_h3s = lis.slice(i, i+row_width).find('h3');
  tmp_h3s.each(function() {
    var h = $(this).height();
    if (tmp_height < h) {
      tmp_height = h;
    }
  });
  tmp_h3s.height(tmp_height);
} 
```

（诀窍是使用[拼接](http://docs.jquery.com/Traversing/slice)方法）。

# .net - 如何同时更新两个字典

> ID：13797847
> 
> 赞同：2
> 
> 时间：2012-12-10T09:06:54.763
> 
> 标签：.net, c#-4.0, concurrency, thread-safety

我需要支持更新两个并发字典（在创建、更新、删除时）的功能。每个操作（更新、删除、创建）使用其中的两个并且应该是原子的。在 .NET C# 中执行此操作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:15:47.530

最简单的方法是使用锁：

```
private object m_methodMonitor = new object();

private void Update()
{
    lock (m_methodMonitor)
    {
        // Do whatever
    }
}

private void Delete()
{
    lock (m_methodMonitor)
    {
        // Do whatever
    }
} 
```

**请注意**：锁定字典上的“写入”操作是不够的！您还需要同步对字典的读取，以避免尝试从字典中获取值时出现这种情况，该字典当前正被一种更新方法访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:36:54.647

这里的挑战是要求必须以**原子方式修改**两个字典。该类`ConcurrentDictionary<TKey,TValue>`没有任何内置机制来支持将实例“分组”在一起以允许同时更新共享相同键的键值对。

因此，您无法使用任何高吞吐量机制来授予您操作中的原子性。

要对一组对象进行原子操作，您唯一可以做的就是将对对象的访问包装在锁定机制中：

```
public void Update(...)
{
    lock(this.dictionaryLock)
    {
        this.dictionaryA.AddOrUpdate(...);
        this.dictionaryB.AddOrUpdate(...);
    }
} 
```

您可能会使用不同的锁定机制获得更好的结果，优化应用程序的常见模式（例如，[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/bb300132.aspx)如果您的应用程序倾向于频繁读取和不经常修改，则使用 a），但您将只能序列化对整个字典的访问。

如果并发性能对您非常重要，您必须重构您的设计以使用单个并发字典而不是两个。

# ios - 列表只显示 sqlite_sequence

> ID：13797848
> 
> 赞同：0
> 
> 时间：2012-12-10T09:06:57.290
> 
> 标签：ios, sqlite

我正在模拟器中运行 iOS 程序，但出现此错误

> 'ISDatabaseSQLiteException'，原因：'执行语句失败：'create table GroceryItem（primaryKey integer primary key autoincrement，name text NOT NULL，number integer NOT NULL）' with message: table GroceryItem already exists'

这是我在 AppDelegate.m 中使用的代码

```
self.database = [[[ISDatabase alloc] initWithFileName:@"db20121207.sqlite"] autorelease];

if(![[database tableNames] containsObject:@"GroceryItem"])
{        
    [database executeSql:@"create table GroceryItem(primaryKey integer primary key autoincrement, name text NOT NULL, number integer NOT NULL)"];    
    [database executeSql:@"insert into GroceryItem (name, number) values('apple', 5)"];    
    [database executeSql:@"insert into GroceryItem (name, number) values('zuoyou', 3)"];
}
else
{
    [database executeSql:@"insert into GroceryItem (name, number) values('apple', 5)"];
    [database executeSql:@"insert into GroceryItem (name, number) values('zuoyou', 3)"];
} 
```

我有这个方法来列出表名`sqlite_master`

```
- (NSArray *) tables
{
    return [self executeSql:@"select * from sqlite_master where type = 'table'"];
}

- (NSArray *) tableNames
{
    NSLog(@"%@", [[self tables] valueForKey:@"name"]  );
    NSLog(@"%u", [[[self tables] valueForKey:@"name"] count]  );
    return [[self tables] valueForKey:@"name"];
} 
```

但控制台显示

GroceryList[7439:c07] ("sqlite_sequence")

2012-12-10 16:59:40.305 GroceryList[7439:c07] 1

只得到表`sqlite_sequence`，计数为1；从上面的异常中，它说*“表 GroceryItem 已经存在”*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:37:21.747

我认为这个问题与`executeSql`方法有关。

从这段代码`[[self tables] valueForKey:@"name"]`看来，您正在将表名添加到 NSDictionary 对象中。

**记住所有的键`NSDictionary`都是唯一的**。您正在使用`name`as将所有表名添加到字典中`key`。

所以它会覆盖之前添加的值。这就是为什么它显示一个元素。

**解决方案：**

1.  对不同的表名使用不同的键
2.  使用`NSMutableArray`代替`NSDictionary`
3.  更改您的表创建代码，如：

    `[database executeSql:@"create table if not exists GroceryItem(primaryKey integer primary key autoincrement, name text NOT NULL, number integer NOT NULL)"];`

如果...其他条件，则不需要那个

# jquery - jquery如何将值传递给输入类型=文本

> ID：13797849
> 
> 赞同：-1
> 
> 时间：2012-12-10T09:06:56.120
> 
> 标签：jquery

```
Date: <input type="text" id=" ">

var startDate = new Date(2012,1,20);
$('#date-start')
.datepicker()
.on('changeDate', function(ev){
    if (ev.date.valueOf() > endDate.valueOf()){
        $('#alert').show().find('strong').text('The start date must be before the end date.');
    } else {
        $('#alert').hide();
        startDate = new Date(ev.date);
        $('#date-start-display').text($('#date-start').data('date'));
    }
    $('#date-start').datepicker('hide');
}); 
```

我正在尝试使用这个 jquery datepicker。如何将值日期输出传递到输入类型 = 文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:09:31.320

您已经离开 id `blank`，分配一些`id`输入 type=text 您需要`assign`约会。

假设`$('#date-start').data('date')`会给你所需的日期。

*html*

```
<input type="text" id="txtDate"> 
```

*Javascript*

```
$('#txtDate').val($('#date-start').data('date')); 
```

或者

```
$(':text').val($('#date-start').data('date')); // will assign date to all text fields 
```

# objective-c - obj-c 代码上的 UTF8 文字 - 无法在真实设备上运行

> ID：13797851
> 
> 赞同：0
> 
> 时间：2012-12-10T09:07:09.317
> 
> 标签：objective-c, xcode, character-encoding

我对 UTF8 编码有奇怪的行为：

例如：当我在模拟器上运行时

```
NSString *uni   = @"\U0001d11e";
NSString *uni2  = [[NSString alloc] initWithUTF8String:"\xF0\x9D\x84\x9E"];
NSString *uni3  = @"";
NSLog(@"unicode: %@ and %@ and %@",uni, uni2, uni3); 
```

我得到了预期的结果：

```
unicode:  and  and 
```

但是当我将它运行到一个真实的设备中时，这里的输出：

```
unicode: ùÑû and ùÑû and ùÑû 
```

我不明白为什么。这是一个编译解决方法，还是我不明白的东西？我知道 @"" 构造只能采用 ASCII 字符。但为什么这是在模拟器上工作？你知道如何让它在真实设备上运行吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:19:44.800

一切正常，字节被正确接收。只是设备将它们解码为[Mac OS Roman](http://en.wikipedia.org/wiki/Mac_OS_Roman)而不是 UTF-8。您需要做的就是向设备指定输入为 UTF-8。如果您不知道该怎么做，那么您应该提供更多详细信息。

# java - Java JFileChooser 无法检测到外语

> ID：13797859
> 
> 赞同：3
> 
> 时间：2012-12-10T09:07:33.000
> 
> 标签：java, macos, swing, locale, jfilechooser

在我的应用程序中，用户选择使用的文件`JFileChooser`。碰巧的是，如果文件夹名称是其他语言，则它不会检测到该文件夹​​。

例如：在桌面上，如果文件夹名称是`spillet sitt på er helt`(norweigian)，那么除了上面提到的文件夹之外，所有的文件夹都被JFileChooser显示出来。我该如何处理这个问题？

PS：原来这个问题只在Mac上。在 Windows 上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:41:23.490

这是一个已知问题（在此处找到[错误状态报告](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7193966)）。

似乎它最终已在 7u10、7u11 和 7u12+ 更新中得到修复。

由于这些更新尚未正式发布，如果您迫不及待，可以在[java.net](http://jdk7.java.net/download.html)下载 Developers Review Releases 。

# c# - 具有频繁在线同步的 C# 桌面应用程序

> ID：13797863
> 
> 赞同：1
> 
> 时间：2012-12-10T09:07:43.550
> 
> 标签：c#, .net, offline-caching

我要开发一个病人管理系统，它是一个用 c# .Net 构建的桌面应用程序
，问题是很多医生都在使用它，而且不同房间之间不能联网，因为它是一家政府医院和医生或者他们自己做，所以他们负担不起网络基础设施，他们可以做的是只要机器上可用，他们就可以连接到互联网。

这就是我需要的。`update`每台安装了系统的机器上都会有一个本地数据库，只要有互联网可用并且用户点击按钮，它就会更新。系统还将允许用户更新在线数据库。因此，push 和 pull 操作都需要支持。

* * *

现在问：.Net 是否支持这种功能。如果是，那么任何特定的 api，如果不是，我有什么选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:35:31.263

如果您要通过 Internet 传输患者记录，那么您将不得不非常仔细地考虑这样做的合法性。这几乎肯定会涉及确保患者记录的存储和传输加密，存储它们的服务器经过精心配置和维护，并提供必要的安全更新，并且访问这些数据的医生的 PC 被验证为被允许这样做（被认证为合法并被授权有权访问特定记录）。

弄错任何一个都可能导致机密的患者数据泄露，这可能会使您的手术（以及您自己）面临诉讼。如果您被发现疏忽，您甚至可能会面临刑事指控。（IANAL，您需要自己进行尽职调查。）

就个人而言，我建议尽你所能建立一个局域网。这应该消除这些法律问题中更敏感的问题，因为您将不再与公共网络交互。网络并不昂贵或困难，如果您解释情况并提供其成本的详细信息，您甚至可以自己获得预算来实施。

如果您有大量的医生 PC，每台都更新自己的本地数据缓存，然后定期更新集中存储，那么迟早您会发现最终会出现数据冲突。一个幼稚的系统会简单地用最近推送的更改覆盖旧数据，丢失任何早期的独立更改。正如我猜你不希望数据丢失，那么你需要选择一种策略来避免这种情况。这可能涉及记录锁定或某种形式的冲突解决。查看[并发控制](http://en.wikipedia.org/wiki/Concurrent_access)Wikipedia 文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:12:03.283

> c# 是否支持这种功能。

是的，它被称为编程。C# 是一种语言（根据语言规范）。它支持某人程序的所有内容。

> 如果是，那么任何特定的 api，如果不是，我有什么选择

不在 C# 中，不。C# 根本没有 API - 甚至没有用于在控制台上写一行的 API（Console.WriteLine 是 .NET 框架的 API，而不是 C# 应用程序的 API）。

如果您起诉 SQL Server 或为此编写自己的提供程序，Microsoft 有一个您可以使用的 SYNC FRAMEWORK。检查[http://msdn.microsoft.com/en-us/sync/bb736753.aspx](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)以了解此框架的开始。

# mysql - 无法在netbeans ide中连接mysql

> ID：13797865
> 
> 赞同：0
> 
> 时间：2012-12-10T09:08:02.673
> 
> 标签：mysql, netbeans-7, mysql-connector

我正在使用 netbeans ide 7.1.2 并使用 mysql db 和必要的驱动程序连接器。我错误地删除了我的一个数据库中的默认表“用户”。现在我无法在 netbeans 中连接我的任何数据库。每当我连接时，它都会引发以下错误。

**无法连接。无法建立到 jdbc:mysql://192.168.1.15.:3306/mysql using com.mysql.jdbc.Driver (Communication link failure 最后一个成功发送到服务器的数据包是在 0 毫秒前。驱动程序没有从服务器接收到任何数据包）。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:35:27.930

参考this，它指导您如何恢复已删除的表

[mysql - 我删除了用户表！我怎样才能恢复它？](https://stackoverflow.com/questions/7816124/mysql-i-deleted-the-user-table-how-can-i-recover-it)

# yui - 为什么 YUI3 没有像 jQuery 这样的所有类和方法的示例？

> ID：13797869
> 
> 赞同：0
> 
> 时间：2012-12-10T09:08:22.257
> 
> 标签：yui

我计划使用这个很棒的库，但我想我错了
在 YUI3 库内部，对于每个方法和类，根本
没有示例。

我不知道为什么雅虎在没有
每个方法和类甚至类方法的示例的情况下制作如此多的文档。

我错过了什么吗？

我发布了[这个](http://yuilibrary.com/forum/viewtopic.php?p=36969#p36969)问题并没有得到回应。甚至在stackoverflow中也是如此。[这](https://stackoverflow.com/questions/13796513/how-to-use-find-function-in-yui3-and-how-to-find-meta-tag-list)是我的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:22:53.773

实际上 YUI 有很好的文档。除[api 文档](http://yuilibrary.com/yui/docs/api/) 外，还提供[用户指南](http://yuilibrary.com/yui/docs/guides/)和功能[示例](http://yuilibrary.com/yui/docs/examples/) 不，但是如果您想添加它们，他们确实会接受拉取请求。提问的最佳地点也是 freenode 上的#yui irc 频道。此外，如果您来自 jquery，那么[Rosetta Stone](http://www.jsrosettastone.com/)网站也会有所帮助。

# android - ListFragment 点击被错误的片段回答

> ID：13797871
> 
> 赞同：0
> 
> 时间：2012-12-10T09:08:34.110
> 
> 标签：android, android-fragments, listadapter, android-pageradapter

我有一系列`ListFragments`每个显示不同的 SQLite 表或视图。我使用可滑动的标签布局在它们之间切换。

我有两个不同的可滑动布局加载到同一个活动中，具体取决于调用的 Intent 参数。警报对话框和操作栏上的按钮切换可滑动布局。可滑动标签设置在[http://www.pushing-pixels.org/2011/08/11/android-tips-and-tricks-swipey-tabs.html](http://www.pushing-pixels.org/2011/08/11/android-tips-and-tricks-swipey-tabs.html)中进行了描述。

单击项目后会出现问题。

```
android.database.sqlite.SQLiteException: no such column: authorHash: , 
  while compiling: SELECT name, shared, authorHash, primaryMatch 
  FROM contacts_view 
```

异常表明 SELECT 子句来自下面的第一个声明，而 VIEW 来自第二个声明。

```
LogFragment.newInstance(PeerDataProvider.URI_RESPONSES_VIEW,
  PeerDataProvider.URI_PEERDATA_TABLE, R.loader.responseslogfragloader,
  PeerCreatedDataColumns.NAME, 
      new String[] { PeerCreatedDataColumns.NAME,
  PeerCreatedDataColumns.SHARED, PeerCreatedDataColumns.AUTHORHASH,
  ResponsesColumns.PRIMARYMATCH });

LogFragment.newInstance(UserDataProvider.URI_CONTACTS_VIEW, 
      UserDataProvider.URI_USERDATA_TABLE, R.loader.contactslogfragloader, 
      UserCreatedDataColumns.NAME,
  new String[] { UserCreatedDataColumns.LONGSUMMARY }); 
```

这是被调用的片段：

```
public class LogFragment extends ListFragment implements LoaderManager.LoaderCallbacks<Cursor> {
private static int LIST_LOADER;
protected int layout = R.layout.log_fragment;
int entryLayout = R.layout.list_item;
private static Uri logView, logTable;
String[] listItemProjection;
int[] listItemFields = { R.id.title };
String itemClickProjection[];
String[] createProjection;
int mCurCheckPosition = 0;
Button clearLogButton;
protected SimpleCursorAdapter listAdapter;

public static Fragment newInstance(Uri logview, Uri logtable, int listLoader, String displayColumn,
        String[] clickProjection) {
    LogFragment f = new LogFragment();
    Bundle args = new Bundle();
    args.putString("listItemProjection", "" + displayColumn);
    args.putStringArray("itemClickProjection", clickProjection);
    args.putString("logView", "" + logview);
    args.putString("logTable", "" + logtable);
    args.putString("LIST_LOADER", "" + listLoader);
    Log.d(DEBUG_TAG, "listLoader" + listLoader);
    f.setArguments(args);
    return f;
}

public LogFragment() {
    super();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(layout, container, false);

    String listItemProjection_String = getArguments().getString("listItemProjection");
    String[] itemClickProjection_StringArray = getArguments().getStringArray("itemClickProjection");
    String logView_String = getArguments().getString("logView");
    String logTable_String = getArguments().getString("logTable");
    String LIST_LOADER_String = getArguments().getString("LIST_LOADER");
    listItemProjection = new String[] { listItemProjection_String };
    createProjection = new String[] { UserDatabase._ID, listItemProjection_String };
    itemClickProjection = itemClickProjection_StringArray;
    logView = Uri.parse(logView_String);
    logTable = Uri.parse(logTable_String);
    LIST_LOADER = Integer.parseInt(LIST_LOADER_String);

    getLoaderManager().initLoader(LIST_LOADER, null, this);
    listAdapter = new SimpleCursorAdapter(getActivity().getApplicationContext(), entryLayout, null,
            listItemProjection, listItemFields, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
    setListAdapter(listAdapter);
    return view;
}

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    Cursor c = getActivity().getContentResolver().query(logView, itemClickProjection, null, null, null);
    String fields = "";
    c.moveToPosition(position);
    for (String column : itemClickProjection) {
        fields += column + " " + c.getString(c.getColumnIndex(column)) + "\n";
        Toast.makeText(getActivity(), fields, Toast.LENGTH_SHORT).show();
    }
}
} 
```

这是适配器

```
private class SearchSwipePagerAdapter extends FragmentPagerAdapter implements SwipeyTabsAdapter {
    private final String DEBUG_TAG = "SearchSwipePagerAdapter";
    private final Context mContext;
    public SearchSwipePagerAdapter(Context context, FragmentManager fm) {
        super(fm);
        this.mContext = context;
    }

    @Override
    public Fragment getItem(int position) {
        switch (position) {
        case 0:
            return SearchFragment.newInstance();
        case 1:
            return ResponsesFragment.newInstance();
        case 2:
            return LogFragment.newInstance(PeerDataProvider.URI_RESPONSES_VIEW,
                    PeerDataProvider.URI_PEERDATA_TABLE, R.loader.responseslogfragloader,
                    PeerCreatedDataColumns.NAME, new String[] { PeerCreatedDataColumns.NAME,
                            PeerCreatedDataColumns.SHARED, PeerCreatedDataColumns.AUTHORHASH,
                            ResponsesColumns.PRIMARYMATCH });
        case 3:
            return LogFragment.newInstance(UserDataProvider.URI_CONTACTS_VIEW, UserDataProvider.URI_USERDATA_TABLE,
                    R.loader.contactslogfragloader, UserCreatedDataColumns.NAME,
                    new String[] { UserCreatedDataColumns.LONGSUMMARY });
        case 4:
            return LogFragment.newInstance(PeerDataProvider.URI_METHODS_VIEW, PeerDataProvider.URI_PEERDATA_TABLE,
                    R.loader.methodslogfragloader, PeerCreatedDataColumns.NAME, new String[] {
                            PeerCreatedDataColumns.NAME, PeerCreatedDataColumns.SHARED,
                            PeerCreatedDataColumns.AUTHORHASH, MethodsColumns.PRIMARYMATCH });
        default:
            return SwipeyTabFragment.newInstance(WORKFLOW[position]);
        }
    } 
```

每个片段都有一个唯一的加载器 ID。我在整个项目中保持兼容模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:25:50.157

本声明：

```
private static Uri logView, logTable; 
```

意味着您`LogFragment`将始终拥有传递给由 构建`Uris`的`Uris`最后一个片段的那些，`FragmentPagerAdapter`因为这些静态变量将由您的`LogFragment`实例共享。将这些字段设为实例变量：

```
private Uri logView, logTable; 
```

# angularjs - AngularJS 过滤器

> ID：13797872
> 
> 赞同：0
> 
> 时间：2012-12-10T09:08:38.337
> 
> 标签：angularjs, javascript-framework

我有以下代码：

```
<input type="text" ng-model="searchText">
<div ng-repeat="user in student.suggested_users | filter:searchText" ng-init="current_user = getUser(user)">{{current_user.name}}
</div> 
```

这将帮助我从 student.suggested_users 数组中过滤对象。但我想过滤为每个用户对象初始化的 current_user 对象的名称。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:17:03.540

这是我项目中的一个示例：[https](https://github.com/lucassus/mongo_browser/blob/master/app/assets/templates/databases.html) ://github.com/lucassus/mongo_browser/blob/master/app/assets/templates/databases.html并解释它是如何工作的：http: [//jsfiddle.net/pkozlowski_opensource/JtAZM /1/](http://jsfiddle.net/pkozlowski_opensource/JtAZM/1/)

基本上`ng-model="filterValue"`你应该使用`ng-model="filterValue.{akey}"`

# html - 在 WebView mac os x 中滚动时出现 HTML 渲染问题

> ID：13797880
> 
> 赞同：0
> 
> 时间：2012-12-10T09:09:32.390
> 
> 标签：html, objective-c, macos, cocoa, webview

我在右下角有一个按钮`Webview`。当我滚动时，按钮会向下或向上移动，这不应该发生，就像我们在 Safari 中检查的 HTML 一样，它工作正常并且按钮位置在滚动时不会改变。

我该如何解决此类问题并渴望知道为什么在 safari 和`WebView`相同的 HTML 文件中行为会有所不同？

寻找您的宝贵建议。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:44:21.793

您需要在 html 和 Webview 中禁用滚动。

即对于 HTML：

```
overflow : none 
```

会做。而对于 cocoa webview，您必须找到一种方法，可能在 .xib 文件中您可以执行或查看文档。

# php - 使用 PHP 发布到 Google Plus 流/墙

> ID：13797881
> 
> 赞同：0
> 
> 时间：2012-12-10T09:09:42.377
> 
> 标签：php, google-plus

现在是否可以像使用 Facebook Api ( `'scope' => 'publish_steam'`) 一样发布到 Google plus 用户墙/流？

这个[Google Plus Api](https://developers.google.com/+/api/)看起来像是只读的。

我发现了一个叫做 Moments 的东西：[https](https://developers.google.com/+/history/api/moments) ://developers.google.com/+/history/api/moments 。但我不知道如何用 php 运行它。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T14:55:14.043

History API 目前处于开发者预览阶段。在尝试使用它之前，请确保您已注册。您可能还想通过示例应用程序来了解它做了什么（以及它**不做什么**），并确保它符合您的需求。它不能完全替代 Facebook 的解决方案。

如果它确实满足您的需求，您可能可以使用[https://code.google.com/p/google-api-php-client/](https://code.google.com/p/google-api-php-client/)上的 PHP API来导航 OAuth2 过程，这可能是最棘手的部分整个东西。您还可以使用他们描述为历史 API 一部分的 Google+ 登录按钮。之后，发送一个插入命令（通过[https://developers.google.com/+/history/#writing_moments](https://developers.google.com/+/history/#writing_moments)中记录的 HTTP POST ）并确保您有一个包含片段标记信息的页面被插入（记录在[https://developers.google.com/+/plugins/snippet](https://developers.google.com/+/plugins/snippet)和 schema.org）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:18:42.387

Google+ 的 API 是只读的，抱歉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:13:05.220

您可以使用 google-php 客户端，但如上所述，该客户端仍处于开发过程中。事实上，最新的库是 0.6.1，但没有发布所需的所有方法。正如我的问题[401 Unauthorized access when publishing Google+ Moments with PHP Client 中发布](https://stackoverflow.com/questions/15759821/401-unauthorized-access-when-posting-google-moments-with-php-client)的那样，您必须从 SVN 存储库下载最新开发的库，然后在设置 API google 控制台和您的库后，您可以检查 post momments 是否与[Silvano 脚本](https://gist.github.com/silvolu/5054214)一起使用配置文件。

您可以在 Silvano G+ 帖子中阅读有关此问题的更多信息：https: [//plus.google.com/+SilvanoLuciani/posts/2kMX9Dzaf8V](https://plus.google.com/+SilvanoLuciani/posts/2kMX9Dzaf8V)

# winapi - ARM 是否支持 kernel32.dll 和 shell32.dll？

> ID：13797883
> 
> 赞同：3
> 
> 时间：2012-12-10T09:09:48.927
> 
> 标签：winapi, arm, kernel32, windows-rt

我有一个在 ARM（Surface）上运行良好的 Metro App (C#)，但是当我在**Windows App Cert Kits**上检查我的应用程序兼容性时，一个组件在 ARM 上运行不正常，它显示如下：

```
AreFileApisANSI , CopyFileW , CreateFileMappingW , CreateFileW , CreateMutexW , CreateThread , ExitProcess , ExitThread , FatalAppExitA , FindFirstFileW , FreeEnvironmentStringsW , GetACP , GetCommandLineA , GetConsoleCP , GetConsoleMode , GetCurrentDirectoryW , GetDriveTypeW , GetEnvironmentStringsW , GetFileAttributesW , GetFileSize , GetFileType , GetFullPathNameA , GetFullPathNameW , GetModuleFileNameA , GetModuleFileNameW , GetModuleHandleExW , GetModuleHandleW , GetOEMCP , GetStartupInfoW , GetStdHandle , GetSystemInfo , GetTempFileNameW , GetTempPathW , GetTickCount , HeapQueryInformation , HeapValidate , InitializeCriticalSection , InitializeCriticalSectionAndSpinCount , LoadLibraryExW , LoadLibraryW , LocalFree , MapViewOfFile , MoveFileW , OpenFileMappingW , OutputDebugStringA , ReadConsoleW , RtlUnwind , SetConsoleCtrlHandler , SetCurrentDirectoryW , SetFilePointer , SetStdHandle , SetUnhandledExceptionFilter , Sleep , TerminateProcess , UnhandledExceptionFilter , WaitForSingleObject , WriteConsoleW , lstrlenA 
```

*此应用程序类型MyLib.dll***不**支持这些所有*kernel32.dll*函数，并且

 ***```
SHGetSpecialFolderPathW in shell32.dll is not supported for this application type 
```

在**ARM**上运行时。

*ARM是否有任何替代/等效库？如果是，请告诉我。*

提前致谢

普拉尚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:19:32.460

您不能在 ARM 上调用这些函数。它们根本不可用。事实上，许多功能甚至在英特尔 Windows RT 上也不可用。例如，考虑[`CreateFileMapping`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366537.aspx). 文档明确指出，此功能仅适用于桌面应用程序。

你必须找到一种没有这些功能的生活方式。***

# android - 移动手机时的图像稳定 - Android

> ID：13797891
> 
> 赞同：2
> 
> 时间：2012-12-10T09:10:31.007
> 
> 标签：android, camera, preview

我为 Android 操作系统开发应用程序，它可以帮助您在相机的帮助下进行绘图。应用程序以从相机槽捕获帧的方式工作`onPreviewFrame(byte[] data, Camera camera)`，并从这里将图片转换为二进制黑/白。一般应用程序有效，但我有以下问题：

1.  通过 onPreviewFrame 捕获图像真的很慢。现在我跳过帧，但方法仍然很慢。

    ```
    YuvImage yuvImage = new YuvImage(data, ImageFormat.NV21, width, height, null);
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    yuvImage.compressToJpeg(new Rect(0,0,width, height), 100, baos);
    byte [] imageData = baos.toByteArray();
    Bitmap bmp = BitmapFactory.decodeByteArray(imageData , 0, imageData .length);
    bmp = Bitmap.createScaledBitmap(bmp, surfaceView.getMeasuredHeight(), surfaceView.getMeasuredWidth(), false);
    Bitmap bmps = ImageHelper.rotate(bmp, kot); 
    ```

    有什么方法可以更快地获取图片吗？

2.  我还注意到每几帧图片都不相同（不同的直方图），尽管手机完全静止并且光线相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:16:26.433

我认为您应该使用指出的 NDK。您可能也想在另一个线程上进行这种类型的处理，而不是在主线程中。

关于您的 (2) 的小问题。直方图有何不同？大多数相机传感器和处理会有所不同，并且由于 3A 算法的噪声和变化，很难产生精确的直方图。

# eclipse - 项目与远程 git 断开连接，如何重新连接？

> ID：13797892
> 
> 赞同：0
> 
> 时间：2012-12-10T09:10:41.843
> 
> 标签：eclipse, egit

我正面临一个意想不到的问题，它扰乱了我的日常日程，而且我的时间已经很紧了。我正在工作的项目与远程 git 存储库分离。我不确定这是怎么发生的，可能是我在 Eclipse 中的 Git Repository Exploring 时错误地删除了。

无论如何，我有东西要推送，所以我需要以某种方式将项目重新附加到远程存储库，而不会丢失本地更改（并取回所有 git 好东西，如修订、分支等）。

我想避免再次从 Git 中提取，而不是与我当前的工作进行比较以获取更改，因此感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:22:24.887

在 Eclipse 中查看您的遥控器列表，可能遥控器已被删除，您只需要再次添加即可。添加后，您将恢复远程分支。添加远程 Eclipse 后，将为您执行提取操作，因此您无需拉动。

# javascript - 在输入新闻时单击锚标记链接

> ID：13797894
> 
> 赞同：9
> 
> 时间：2012-12-10T09:10:44.640
> 
> 标签：javascript, jquery, google-chrome

我有一个锚标签

```
<a class="btn btn-danger" id="clicking" data-bind="click: $root.enterLocation" href="#">Continue</a> 
```

它在一个弹出窗口内。我需要在按回车键时单击此链接。我已经尝试了以下代码，但它对我不起作用。

```
$(document).ready(function(){ 
  $(document).keyup(function(event){
    if (event.keyCode == 13){
      $("#clicking").trigger('click');     
    }
  })
}); 
```

不知道为什么该功能不起作用。我也使用了单击功能，结果相同。它在鼠标单击时正常工作。我需要让它在输入时自动工作。

以下代码在 Firefox 中运行良好。

```
$(document).ready(function () {
  $(document).on("keyup", function (event) {
    if (event.which == 13) {
      document.getElementById("clicking").click();   
    }
  });
}); 
```

如何在 Chrome 上进行这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:24:53.933

我认为问题在于您使用的`event.keyCode`是 ，并非总是在所有浏览器中使用。某些浏览器使用`event.charCode`甚至不同的`event.which`，这可能会受到您使用的内容的支持。无论如何，使用 jQuery 从事件中获取键码的正常方法是使用`event.which`.

jQuery 规范化`event`传递给事件处理程序的对象并修复这样的“问题”，这样您就不必担心。同时，它似乎复制了一些原始事件的属性（“原始事件的大多数属性都被复制并规范化为新的事件对象。” - 来自 jQuery API 文档）。这可能就是为什么它对其他评论/回答的人“起作用”的原因。传递给处理程序的`event`参数已由 jQuery 生成/规范化，并且使用正确的属性将拥有您需要的一切。但是，正确的方法是用于`event.which`获取事件的规范化键码。[http://api.jquery.com/event.which/](http://api.jquery.com/event.which/)

```
$(document).ready(function () {
    $(document).on("keyup", function (event) {
        if (event.which == 13) {
            $("#clicking").trigger('click');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:24:30.793

我已经创建了这个 JSFiddle： http: [//jsfiddle.net/egzsf/](http://jsfiddle.net/egzsf/) 它完美运行我只为 Internet Explorer 添加了一个后备。

你的弹出窗口是什么样子的？也许它是一个 iFrame，这将是一个合乎逻辑的解释。

代码：

```
<a class="btn btn-danger" id="clicking" data-bind="click: $root.enterLocation" onclick="alert('test')" href="#">Continue</a>

$(document).ready(function(){ 
    $(document).keyup(function(e){
        if (e.keyCode == 13){
        $("#clicking").trigger('click');       

        }
    })
});​ 
```

**更好的选择是使用 e.which**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:40:02.233

我希望下面的代码可以帮助你。试试吧代码：

```
<a class="btn btn-danger" id="clicking" onclick="window.location='index.php'" href="#">Continue</a>

$(function(){
  $('body').keyup(function(e){
    if (e.keyCode == 13){  
      $("#clicking").click();
    }
  })
}); 
```

# c# - 实体框架 - 在同一个对象中使用同一个实体两次，使用一对多流利的 api

> ID：13797896
> 
> 赞同：1
> 
> 时间：2012-12-10T09:11:02.847
> 
> 标签：c#, entity-framework, ef-code-first, many-to-many, one-to-many

抱歉，如果标题有点不清楚/模棱两可，但我不确定如何通过 Fluent API 绑定以下代码（如果甚至需要）

```
public class ChatUser 
{
    [Key]
    public int ChatUserId { get; set; }
    public string Name { get; set; }

    public bool IsOnline { get; set; }
    // other properties

    // navigation properties
    public ICollection<ChatMessage> Messages { get; set; }
}

public class ChatMessage
{
    [Key]
    public int ChatMessageId { get; set; }
    public string Message { get; set; }

    public int UserFromId { get; set; }
    public int UserToId { get; set; }

    public DateTime DateSent { get; set; }

    // navigation properties
    public ChatUser UserFrom { get; set; }
    public ChatUser UserTo { get; set; }
} 
```

我遇到的问题是让两个`"ChatUser"`对象绑定到`UserFromId`and `UserToId`- 它们都以`null`.

我需要能够访问来自用户的“消息”列表，并且当我有一个`Message`对象时，我需要能够访问两者`UserFrom`，`UserTo`这样我才能获得诸如`Name`.

如果有人能指出我正确的方向/我可以从中学到的任何链接，我将不胜感激。

PS，如果我想要达到的目标有适当的术语，有人可以告诉我吗 - 我不确定谷歌用什么来解决我的问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:22:20.063

你的问题有两个部分。

首先，为了正确延迟加载关系，需要将它们标记为`virtual`. 这至少适用`UserFrom`于`UserTo`和`Messages`。

其次，单个集合属性不可能从关系的双方加载元素。但这很容易通过 LINQ-to-objects 投影来实现：

```
public virtual ICollection<ChatMessage> MessagesFrom { get; set; }
public virtual ICollection<ChatMessage> MessagesTo { get; set; }

public virtual IEnumerable<ChatMessage> Messages
{
    get { return MessagesFrom.Concat(MessagesTo); }
} 
```

您需要使用 fluent API来映射`MessagesFrom`到.`UserFrom``MessagesTo``UserTo`

这将是围绕线的东西`.HasMany(x => MessagesFrom).WithRequired(x => x.UserFrom)`; 您可以使用智能感知和文档来找出确切的形式。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-12-10T09:43:57.623

这是一个示例。

```
public class Class1
{
    ChatUser user1 = new ChatUser();

    public Class1()
    {
        //List of Message for current User
        List<ChatMessage> lstChatMessages = user1.Messages.ToList();

        //Take firstMessage in sequence
        ChatMessage firstMessage = lstChatMessages.FirstOrDefault();

        //User from
        ChatUser UserFrom = firstMessage.UserFrom;

        //User To
        ChatUser UserTo = firstMessage.UserTo;

    }
} 
```

开始阅读一些 .Net 书籍

# javascript - 将 Backbone 同步与预先存在的 Javascript API 一起使用

> ID：13797897
> 
> 赞同：2
> 
> 时间：2012-12-10T09:11:04.330
> 
> 标签：javascript, backbone.js

我正在为一种新的编程语言构建一个 Backbone*框架*，我正在尝试使其适应 Backbone 的同步，而不是让 Backbone 适应它。

我需要使用预先存在的 Javascript API，它提供一些抽象并最终提供与服务器的同步。让我们举个例子：

假设我想获取一个模型，让我们想象这个*框架*已经构建好了。当我调用`fetch()`模型时，在模型获得数据之前，函数调用（及其参数）和事件的流程是什么？我知道`fetch()`可能有一个参数，它是一个带有选项的对象，但是由于我需要覆盖这个`fetch()`调用，所以我需要知道 Backbone 期望`fetch()`返回的格式，`parse()`输入参数或`save()`调用也是如此，以及在每个函数上触发的事件.

我想我知道`parse()`需要一个对象作为参数，该参数将用于自动设置模型及其数据，并且我应该覆盖它以在那里构建模型和集合，以防有一些模型嵌套。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:46:59.543

覆盖同步的关键是将“读取”、“创建”、“更新”和“删除”操作映射到您的 API。您将收到一个`options`具有`success`回调的对象。您需要`success`在 API 返回时调用该函数，并使用一个填充了属性的对象。

这是最终将被发送到`parse`解决问题的对象。

我最近通过这个练习使 SignalR 适应 Backbone.Sync：

[骨干网.SignalR](https://github.com/SrtSolutions/backbone.signalr/blob/master/client/backbone.signalr.js)

我阅读了 Backbone 的 LocalStorage 适配器以获得灵感：

[Backbone.LocalStorage](https://github.com/jeromegn/Backbone.localStorage/blob/master/backbone.localStorage.js)

# c# - 卡在正则表达式中以检测 c# 中特定域的 URL

> ID：13797899
> 
> 赞同：1
> 
> 时间：2012-12-10T09:11:12.817
> 
> 标签：c#, regex

我正在尝试找出属于的 URL：

```
http://domain.blob.core.windows.net/ 
https://domain.blob.core.windows.net/

http://domain.blob.core.windows.net
https://domain.blob.core.windows.net 
```

我写的正则表达式

```
Regex reg2= new Regex(@"^http(s?)://[0-9a-zA-Z](.blob.core.windows.net)(/?)$");
string url = "http://abc.blob.core.windows.net";
        if(reg2.IsMatch(url))
        {
            Console.WriteLine("Yes");
        }
        else
        {
            Console.WriteLine("no");
        } 
```

我无法找到匹配项。它不起作用:(我的正则表达式很弱。所以谁能帮我找出我的错误？我使用的是c#。它总是打印不。

更新：对我有用的最终答案：

```
Regex reg2 = new Regex(@"^http(s?)\:\/\/[0-9a-zA-Z]*(\.blob\.core\.windows\.net)
(/?)$"); 
```

以防万一有人需要这样的东西:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:15:09.873

`"^http(s?)://[0-9a-zA-Z](.blob.core.windows.net)(/?)$"`但是，您`[0-9a-zA-Z]`应该很接近，`[0-9a-zA-Z]+`因为您想成为多个角色，`.blob.core.windows.net`而不仅仅是一个角色。

注意：如果您不捕获匹配的部分，则此处不需要括号，可选运算符仅应用于前一个字符`^https?$`匹配`'http'`或`'https'`不`''`只是`s`可选，还转义所有`.`字符，因为`regex`字符`.`匹配任何单个字符以便匹配`.`您想要的文字`\.`。

```
"^https?://[0-9a-zA-Z]+\.blob\.core\.windows\.net/?$" 
```

# sas - sas 中的 _imex_ 错误

> ID：13797903
> 
> 赞同：0
> 
> 时间：2012-12-10T09:11:35.857
> 
> 标签：sas

当我使用 PROC IMPORT 从 excel 文件导入数据时，出现类似“ *IMEX* ”的错误。我的excel是旧版本。

如果我将其更改为较新的版本并运行相同的代码，我就可以导入数据。

有什么方法可以从旧版本的 excel 中导入数据？

# java - 在 Eclipse 上学习 Java（专注于企业）的好书

> ID：13797904
> 
> 赞同：1
> 
> 时间：2012-12-10T09:11:47.340
> 
> 标签：java, eclipse, tomcat, javabeans

我是一名 .net 开发人员，在过去的 8 年里我一直在使用 Microsoft 技术……但一个月后我将开始在 Eclipse 上使用 Java。我不是很了解。我一直在遵循 java 学习路径，但我更喜欢看书学习，但有数以百万计的书。

对我来说最重要的一点是： - Web 服务 - 桌面应用程序和部署

你对我有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:23:48.547

你有 8 年的编程经验，所以我认为 Thinking in java 和 Effective in Java 对你来说已经足够了。

Think in java让你熟悉Java语法，Effective in Java帮助你理解如何正确使用java。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:16:23.327

一般来说，在寻找企业模式时，这是一个真正的标准：

[http://martinfowler.com/books/eaa.html](http://martinfowler.com/books/eaa.html)

它可能只涵盖您正在寻找的部分，但至关重要的部分。

# android - 如何在锁定屏幕上显示 SurfaceView？

> ID：13797906
> 
> 赞同：1
> 
> 时间：2012-12-10T09:11:56.687
> 
> 标签：android, surfaceview, lockscreen, keyguard

我正在努力实现一个锁屏，就像三星 Galaxy 3 的水波纹锁屏一样。我已经完成了 GLSurfaceView 对象。但是当我将它移植到锁定屏幕时出现问题。SurfaceView 无法在窗口类型为 TYPE_KEYGUARD 的锁定屏幕上显示。如果我对这个SurfaceView使用setZOrderOnTop(true)，它是可以显示的，但是它会覆盖Lock Screen的所有其他层，这不是我的预期。此 SurfaceView 在正常应用程序中可以正常显示。我使用“adb shell dumpsys SurfaceFlinger”来转储图层信息。它的 visibleRegionScreen 就是这样，Region visibleRegionScreen (this=0x15841a0, count=1) [ 0, 0, 0, 0]

任何人都知道如何解决此问题并在锁定屏幕上显示 SurfaceView？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T18:55:12.583

你对 setZOrderOnTop(true) 调用是正确的，但我不太明白你的问题。您只在整个屏幕上看到 SurfaceView？在这种情况下，只需在锁屏布局 xml 中放置一个 LinearLayout 并将您的 Surfaceview 添加到其中。

在数字时钟视图后的*keyguard_screen_tab_unlock.xml中，输入：*

```
<LinearLayout
        android:id="@+id/dummyGLLayout"
        android:orientation="vertical"
        android:layout_width="match_parent"
         android:layout_height="wrap_content"
        android:gravity="top">
</LinearLayout> 
```

在*LockScreen.java*构造函数中：

```
GLSurfaceView mySurfaceView
mySurfaceView = new MySurfaceViewClass(mContext);
LinearLayout ll = (LinearLayout) findViewById(R.id.dummyGLLayout);
mySurfaceView.setZOrderOnTop(true);
ll.addView(mySurfaceView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T04:20:05.460

我很感激你的评论。附上我的实现供您参考。GLSurfaceView 无法在锁定屏幕上显示。我的布局是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_lockscreen_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<FrameLayout
    android:id="@+id/my_lockscreen_clock"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" 
    android:visibility="gone"/> 
```

在 LockScreen.java 构造函数上添加 GLSurfaceViewn：

```
RelativeLayout mRootLayout = (RelativeLayout) findViewById(R.id.my_lockscreen_root);
View myGLSurfaceView = new MyGLSurfaceView(mContext, mCallback);
FrameLayout.LayoutParams layoutparams = 
   new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
mRootLayout.addView(mUnlockWidget, 0, layoutparams); 
```

# ios - 从 UIView 中的 UITextView 复制文本后，UITextView 更改为 UIWebDocumentView？

> ID：13797908
> 
> 赞同：0
> 
> 时间：2012-12-10T09:12:30.593
> 
> 标签：ios, uiview, uitextview, subview

我已经放置了`UITextView`，`UIButton`并且`UIImageView`在一个`UIView`。如果我记录`UIView Subviews`它正确显示所有三个子视图。但在从中选择并复制文本后`UITextView`，记录的 `UIView's`子视图将更改为`UIWebDocumentView`。

任何帮助都是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T16:39:21.337

`UITextView`有各种子视图，包括一个`UIWebDocumentView`保存文本（或属性文本）的子视图。您可以在登录时看到它们（您可能已经在为您的主视图执行此操作）：

```
for (UIView *subview in textView.subviews)
    NSLog(@"subview: %@", subview.description); 
```

当然，根据 Apple 的说法，我们不应该玩这些子视图。当子视图行为不端时，这尤其令人沮丧。

从[UIView 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)：

> 对于在 UIKit 和其他系统框架中声明的复杂视图，视图的任何子视图通常被认为是私有的并且随时可能更改。因此，您不应尝试检索或修改这些类型的系统提供的视图的子视图。如果这样做，您的代码可能会在未来的系统更新期间中断。

# c# - C# 在对象数组中创建一个数组

> ID：13797912
> 
> 赞同：0
> 
> 时间：2012-12-10T09:12:43.720
> 
> 标签：c#

```
using System;
using System.IO;
using System.Text;
public class Movies
{
    public string moviename { get; set; }
    public int cast { get; set; }
    public string[] castmember { get; set; }
    public override string ToString()
    {
        return string.Format("Movie: {0} \nCast #: {1} \nCast Member: {3}",
        moviename.ToString(),
        cast,
        castmember.ToString());
    }
}
public class MovieData
{
    public int NumberOfLines = 0;
    public string UserInput;
    public void ManageData()
    {
        string[] text = File.ReadAllLines("@File Path");
        NumberOfLines = text.GetUpperBound(0);
        Movies[] movies = new Movies[NumberOfLines];
        int i = 0;
        foreach (string line in text)
        {
            movies[i] = new Movies();
            movies[i].moviename = Convert.ToString(line.Trim());
            movies[i].cast = Convert.ToInt32(line.Trim());
            int ii = movies[i].cast;
            //Here I want to create a movies[i].castmember[ii] with ii being the length

} 
```

我正在尝试存储基本上以行格式的数据，但是有一组特定的行将更合乎逻辑地存储在数组中。我将如何创建一个长度为 ii (cast) 的 movies[i].castmember 数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:27:15.787

我可以注意到您的代码中有一些错误..例如，您将相同的`line.Trim()`值转换为`string`，`Int32`但这不是问题..

我想你在问如何创建一个`ii`元素数组..就是这样：

```
movies[i].castmember = new string[ii]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:28:26.740

这不是更简单的方法吗？

```
var movies = File.ReadAllLines("@FilePath").Select(line =>
    new Movies
        {
            moviename = line.Trim(),
            cast = Convert.ToInt32(line.Trim()),
            castmember = new string[Convert.ToInt32(line.Trim())]
        }); 
```

* * *

我对您发布的代码有很多担忧。例如，同一个名称如何同时`line`代表一个名称并定义演员表大小？为什么`Movies`代表一部电影的类有复数名称？

* * *

冒着勺子喂你的风险，你的代码应该更像这样吗？

```
using System;
using System.IO;
using System.Text;

public class Movie
{
     public string Name { get; set; }
     public IList<string> Cast { get; set; }

     public override string ToString()
     {
         var s = new StringBuilder();
         s.AppendFormat("Movie: {0}", this.Name);
         s.AppendLine();
         for (var i = 0; i < this.Cast.Count; i++)
         {
             s.AppendFormat(
                 "  Cast #:{0}, Member: {1}",
                 i + 1,
                 this.Cast[i]);
             s.AppendLine();
         }
         return s.ToString();
     }
}

public class MovieData
{
    public void MovieData(string filePath)
    {
        this.Movies = File.ReadAllLines(filePath).Select(line =>
            new Movie
            {
                // Something here that makes sense.
            });
    }

    public IList<Movie> Movies { get; private set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:28:27.433

```
var moviesCollection = new Collection<Movie>();

var movie = new Movie();
// for each movie...
moviesCollection.Add(movie);

// if you use System.Linq you can convert any IEnumerable<T> to array
// by calling ToArray()

movies = moviesCollection.ToArray(); 
```

您可以遵循相同的原则将演员添加到电影中。

# jquery - 在鼠标悬停时使用 jquery 将 div 自动调整为内容

> ID：13797914
> 
> 赞同：1
> 
> 时间：2012-12-10T09:12:47.403
> 
> 标签：jquery, css, fluid-layout

我有一个 div 自动隐藏到屏幕左侧并包含米勒列。div 内容的宽度未知。如果我使用 .width(500) 对宽度进行硬编码，它可以正常工作，但现在我试图让它自动适应鼠标悬停时的内容，然后在 mouseleave 上缩小。

这是我目前拥有的代码，问题是，当我将鼠标悬停时没有任何反应。想法是删除宽度的css属性，恢复为默认值

```
$(".leftnavdiv").live({                                          //code for autohide
    mouseenter:
    function () {
        $(this).css('width','');
        //$("body").css('padding-left','510px');
    },
    mouseleave:
    function () {
        $(this).css('width','10px');
        //$("body").css('padding-left','20px');
    }
}
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:23:11.473

将您的容器浮动到左侧，然后将`width: auto;`鼠标悬停在上面：

```
$(".leftnavdiv").bind("mouseenter", function() {
    $(this).css('width', 'auto');
});

$(".leftnavdiv").bind("mouseleave", function() {
    $(this).css('width','10px');
});​ 
```

Working example: [jsFiddle here](http://jsfiddle.net/aLhHX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:20:27.257

尝试将宽度设置为 0，将其设置为空白使其取一些随机值。检查这个小提琴并尝试 0 和空白。您可以在控制台日志中看到差异。小提琴：http : [//jsfiddle.net/UyAPj/](http://jsfiddle.net/UyAPj/)

```
$(this).css('width','0px'); 
```

# mysql - 在 MySQL 5.5 中使用真实日期分区

> ID：13797915
> 
> 赞同：0
> 
> 时间：2012-12-10T09:12:48.780
> 
> 标签：mysql, partitioning

我们目前使用的是来自 MySQL 5.1 的 MySQL 5.5。在 5.1 中，您可以通过使用 to_days() 函数来按日期创建分区。但是，似乎在 MySQL 5.5 中，您可以[直接使用日期而无需此解决方法](http://dev.mysql.com/tech-resources/articles/mysql_55_partitioning.html)。

本文没有提到的是，是否有从解决方法到新方法的方法。如何从使用 to_days() 迁移到不再使用 to_days()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T20:27:49.550

要更改分区类型，请使用`ALTER TABLE ... PARTITION BY ...`新分区的定义。见[18.3.1。RANGE 和 LIST 分区的管理](http://dev.mysql.com/doc/refman/5.5/en/partitioning-management-range-list.html)

您不能使用 REORGANIZE PARTITION 更改表的分区类型；也就是说，您不能（例如）将 RANGE 分区更改为 HASH 分区，反之亦然。您也不能使用此命令来更改分区表达式或列。要在不删除和重新创建表的情况下完成这些任务中的任何一个，您可以使用 ALTER TABLE ... PARTITION BY ...。例如：

所以按照你提到的例子，但`CREATE TABLE`改为`ALTER TABLE`

```
ALTER TABLE Annual_Data
PARTITION BY RANGE COLUMNS (date_field)
 (
  PARTITION p01 VALUES LESS THAN ('2007-01-01'),
  PARTITION p02 VALUES LESS THAN ('2008-01-01'),
  PARTITION p03 VALUES LESS THAN ('2009-01-01'),
  PARTITION p04 VALUES LESS THAN (MAXVALUE)); 
```

# c# - Exchange Web 服务 (EWS) 调用在 ASP.NET 下失败，但不是控制台应用程序

> ID：13797916
> 
> 赞同：4
> 
> 时间：2012-12-10T09:13:08.543
> 
> 标签：c#, exchange-server, exchangewebservices

当我尝试通过 ASP.NET 连接到 Exchange Web 服务时出现错误。

如果我通过控制台应用程序调用以下代码，但在 ASP.NET Web 表单页面上执行时，相同的代码会失败。顺便说一句，我在整个代码示例中都使用了我自己的凭据。

*“当以没有邮箱的帐户发出请求时，您必须为任何可分辨的文件夹 Id 指定邮箱主 SMTP 地址。”*

我想我可以通过指定一个模拟用户来解决这个问题。

```
exchangeservice.ImpersonatedUserId = 
    new ImpersonatedUserId(ConnectingIdType.SmtpAddress, "email@domain.com"); 
```

但后来我得到一个不同的错误。

*“该帐户无权模拟所请求的用户。”*

运行 Web 应用程序的应用程序池也是我自己的帐户（与控制台应用程序相同），所以我不知道是什么导致了这个问题。

我正在使用 .NET 框架 3.5。

这是完整的代码。

```
var exchangeservice =
                        new ExchangeService(ExchangeVersion.Exchange2010_SP1)
                        {
                            Timeout = 10000
                        };

 var credentials = new System.Net.NetworkCredential("username", "pass", "domain");

exchangeservice.AutodiscoverUrl("email@domain.com")

FolderId rootFolderId = new FolderId(WellKnownFolderName.Inbox);

var folderView = new FolderView(100)
            {
                Traversal = FolderTraversal.Shallow
            };

            FindFoldersResults findFoldersResults =
                service.FindFolders(rootFolderId, folderView); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:44:17.710

您是否尝试过直接针对服务设置凭据？

```
this.exchangeService.Credentials = new WebCredentials("username", "pass");

this.exchangeService.AutodiscoverUrl("username", this.RedirectionUrlValidationCallback); 
```

并将其用作验证回调..

```
 /// <summary>
    /// Redirections the URL validation callback.
    /// </summary>
    /// <param name="redirectionUrl">The redirection URL.</param>
    /// <returns>true if https</returns>
    private bool RedirectionUrlValidationCallback(string redirectionUrl)
    {
        // The default for the validation callback is to reject the URL.
        var result = false;

        var redirectionUri = new Uri(redirectionUrl);

        // Validate the contents of the redirection URL. In this simple validation
        // callback, the redirection URL is considered valid if it is using HTTPS
        // to encrypt the authentication credentials. 
        if (redirectionUri.Scheme == "https")
        {
            result = true;
        }

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:02:08.343

检查凭据并查看用户是否有足够的权限进行模拟。检查 EWS 限制策略并提供正确的权限将解决问题。

# java - Javassist 添加方法和调用

> ID：13797919
> 
> 赞同：7
> 
> 时间：2012-12-10T09:13:21.060
> 
> 标签：java, javassist

我被javassist困住了。我在运行时向我的对象类添加了一个新方法。

我的对象类：

```
package tmp3;

public class Car {
    public Car(){}
} 
```

我的测试课：

```
package tmp3;

import java.lang.reflect.Method;
import javassist.ClassPool;
import javassist.CtClass;
import javassist.CtMethod;
import javassist.CtNewMethod;

public class TestMain {
    public static void main(String[] args) {
        try {

            CtClass ctclass = ClassPool.getDefault().get("tmp3.Car");
            CtMethod newmethod = CtNewMethod.make("public void testPrint() { System.out.println(\"test ok\"); }",ctclass);
            ctclass.addMethod(newmethod);
            ctclass.writeFile();

            for(Method me: ctclass.toClass().getDeclaredMethods()){ //test print, ok
                System.out.println(me.getName());
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

但在那之后，我不知道如何调用（调用）它。我读过 javassist 没有调用方法的能力。那么如何调用我刚刚用 javassist 添加的方法呢？

我在两天内尝试了很多东西，但没有成功。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T09:51:55.953

Java 类具有静态接口，这意味着，您可能已经知道，Java 在默认情况下并未设计为在运行时向类添加方法，因此它有点棘手，但实现您想要的并不难。

您使用了字节码修饰符框架 Javassist 来设计编译的类以添加更多表示新方法的字节码。您可以有以下两种情况之一：

## 场景 1：在注入之前与 Car 类一起编译的代码

在这种情况下，当您的代码被编译时，Java 编译器只知道`Car`接口而不进行任何注入。所以你**不能**直接调用注入的方法，像这样：

```
 Car car = new Car();
 car.testPrint(); 
```

你必须通过像@Scorpion 正确评论的反思来做到这一点：

```
 Car car = new Car();
 Method method = car.getClass().getMethod("testPrint", new Class[]{});
 method.invoke(car,new Object[]{}); 
```

但这不是唯一的方法...

## 场景 2：使用您编译和注入的类的代码

如果您编译您的`Car`类，注入它，**然后**针对编译的类编写代码（例如将`Car`类放在 jar 文件中），您将能够调用注入的方法，就像它是任何其他常规方法一样。

做以下练习：

1.  编译你的`Car`类
2.  运行您的 TestMain 它将进行注入
3.  在您的 IDE 中创建另一个项目并将注入类的目录添加到该项目的类路径中，**或者**创建一个仅包含注入类的 jar 并将该 jar 添加到类路径中
4.  在新项目中创建一个创建新`Car`实例的类，注意您现在可以轻松调用 testPrint 方法。

您应该注意的几件事：

*   如果你用注入的类覆盖你的原始类，你最终可能会得到一个无效的类，从而导致`java.lang.ClassFormatError`一条错误消息表明你有一个截断的类文件。如果 Javassist 没有将所有字节码加载到内存并尝试在同一个类文件中写入和读取，则会发生这种情况，这会导致完全混乱。为避免这种情况，您可以写入不同的路径或确保在写入文件之前将所有字节码加载到内存（使用`toByteCode()`from `CtClass`）。
*   如果您有两个类文件，一个带有注入代码，一个带有原始代码，请记住**在您的 classpath 中只有一个**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T21:53:08.127

使用java反射来调用它，javassist用于类修改和加载......然后使用java反射来运行它（调用......）。

# windows - Windows 应用商店 - 应用内产品问题

> ID：13797921
> 
> 赞同：3
> 
> 时间：2012-12-10T09:13:56.903
> 
> 标签：windows

我已将我的游戏提交到商店但我失败了，它永远不会结束试用和应用内购买。查看代码后，审阅者收到 licenseInformation.ProductLicenses[product].IsActive 为 false 的消息，如果他还没有购买，怎么可能？（有了他发给我的图片，我可以保证）。

在 App.xaml.cs 我添加：

```
public static LicenseInformation licenseInformation = null;
    public static bool IsTrial { get { return licenseInformation.IsActive && licenseInformation.IsTrial; } }

    private async void LoadMoneyInfo()
    {
        //StorageFolder proxyDataFolder = await Package.Current.InstalledLocation.GetFolderAsync("data");
        //StorageFile proxyFile = await proxyDataFolder.GetFileAsync("in-app-purchase.xml");
        //await CurrentApp.ReloadSimulatorAsync(proxyFile);
        // setup application upsell message
        //ListingInformation listing = await CurrentApp.LoadListingInformationAsync();
        //await CurrentApp.LoadListingInformationAsync();
        licenseInformation = CurrentApp.LicenseInformation;
    } 
```

在购买部分，我添加了：

```
private async void BuyCommandInvokedHandler(IUICommand command)
    {
        if (command.Label == "Buy")
        {
            LicenseInformation licenseInformation = CurrentApp.LicenseInformation;

            string product = String.Empty;

            switch (Product)
            {
                case Products.OneHundred:
                    product = String.Concat("oneh", OneHundred); //In-app product with Stored Counter
                    break;
                case Products.FiveHundred:
                    product = String.Concat("fiveh", FiveHundred); //In-app product with Stored Counter
                    break;
                case Products.OneThousand:
                    product = String.Concat("onet", OneThousand); //In-app product with Stored Counter
                    break;
                default:
                    break;
            }

            var productLicense = licenseInformation.ProductLicenses[product];
            if (!productLicense.IsActive)
            {
                try
                {
                    await CurrentApp.RequestProductPurchaseAsync(product, false);

                    if (licenseInformation.ProductLicenses[product].IsActive)
                    {
                        switch (Product)
                        {
                            case Products.OneHundred:
                                GoldenCards += 100;
                                OneHundred++;
                                CheckAllEnable();
                                break;
                            case Products.FiveHundred:
                                GoldenCards += 500;
                                FiveHundred++;
                                CheckAllEnable();
                                break;
                            case Products.OneThousand:
                                GoldenCards += 1000;
                                OneThousand++;
                                CheckAllEnable();
                                break;
                            default:
                                break;
                        }

                        m.Content = "You bought " + message + " golden cards";
                        m.Commands.RemoveAt(0);
                        await m.ShowAsync();
                        IsButtonEnabled = true;
                    }
                    else
                    {
                        m.Content = "For security reasons this product is not available until tomorrow.";
                        m.Commands.RemoveAt(0);
                        await m.ShowAsync();
                        IsButtonEnabled = true;
                    }
                }
                catch (Exception ex)
                {
                    m.Content = "It was not able to buy " + message + " golden cards, try it later.";
                    m.Commands.RemoveAt(0);
                    m.ShowAsync();
                    IsButtonEnabled = true;
                }
            }
            else //<-- 'The reviewer is here'

           {
                MessageDialog msc = new MessageDialog("For security reasons this product is not available until tomorrow.", "Note");
                Actions.Delayed(1.0, async () => 
                    {
                        await msc.ShowAsync();
                        IsButtonEnabled = true;
                    });
            }
        }
    } 
```

1.- 此代码是否适合提交？他到达“审稿人来了”

然后我检查是否像 sdk 示例一样试用：

```
public async void ShowTrial()
    {
        LicenseInformation licenseInformation = CurrentApp.LicenseInformation;
        if (licenseInformation.IsTrial)
        {
            try
            {
                await CurrentApp.RequestAppPurchaseAsync(false);
                if (!licenseInformation.IsTrial && licenseInformation.IsActive)
                {
                    MessageDialog ms = new MessageDialog("You successfully upgraded AnimalCards to the fully-licensed version. Enjoy the full game, Thank you.");
                    await ms.ShowAsync();
                    if (AcceptAction != null)
                        AcceptAction.Invoke();
                }
                else
                {
                    MessageDialog ms = new MessageDialog("You still have a trial license for AnimalCards.");
                    await ms.ShowAsync();
                    if (CancelAction != null)
                        CancelAction.Invoke();
                }
            }
            catch (Exception)
            {
                MessageDialog ms = new MessageDialog("The upgrade transaction failed. You still have a trial license for AnimalCards.");
                ms.ShowAsync();
                if (CancelAction != null)
                    CancelAction.Invoke();
            }
        }
        else
        {
            MessageDialog ms = new MessageDialog("You already bought AnimalCards and have a fully-licensed version.");
            await ms.ShowAsync();

        }
    } 
```

2.- 这段代码对吗？

# c++ - c中的字母数字到数字的歧义

> ID：13797924
> 
> 赞同：3
> 
> 时间：2012-12-10T09:14:10.293
> 
> 标签：c++, c

全部，

检查和隐藏字符串是否为数字的函数，例如 atol 和 atoi ...我在 atol 描述中检查了 c/c++ 参考，在字符串中没有任何数字的情况下它是这样写的。

> 不执行任何转换并返回零。

`"0"`显然，如果我传递的字符串如此 atol 将返回与前例相同的零，这可能是一个歧义。

由于函数签名是 int atoi() 或 long atol()，因此返回值可能是 int 或 long，因此返回值在所有情况下都将与实际 int 的返回值匹配。（我的意思是即使 atoi 返回负数非数字字符串的值此返回的值与此值的字符串的转换匹配）它自己）歧义持续存在

检查字符串是否为数字或不使用此函数是否不安全？对于这种情况，什么是好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:19:55.933

使用[`strtol`](http://en.cppreference.com/w/c/string/byte/strtol)or [`strtoll`](http://en.cppreference.com/w/c/string/byte/strtol)，它们返回第一个无效字符的位置，以便您知道是否发生了任何转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:19:52.623

```
(int)strtol() 
```

您可以传递一个 char * 来验证转换

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T09:22:53.963

来自组的函数`ato...`实际上没有任何有意义的实际用途。为了执行此转换或检查输入字符串是否具有正确的格式，请使用`strto...`组中的函数。

除了返回转换后的实际值外，`strto...`组中的函数还会告诉您输入字符串中的哪个字符导致转换过程停止。此外，这些函数会将全局`errno`变量设置为`ERANGE`以防溢出。通过在通话后分析这些附加数据，您可以准确判断转换是否成功。

同时，`ato...`函数没有提供有意义的诊断功能。它们还会在溢出时触发未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T09:25:22.210

如果您使用的是 c++11，则可以使用位于 <string> 中的 stoi()。如果转换失败，它将引发异常：http: [//en.cppreference.com/w/cpp/string/basic_string/stol](http://en.cppreference.com/w/cpp/string/basic_string/stol)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T14:24:34.760

它既不安全也不不安全。它根本不这样做。这是否“安全”取决于您已经为验证输入所做的工作。如果您希望验证作为将文本转换为值的一部分，`strtol`则为您提供更多信息。

# c++ - “new int(100)”有什么作用？

> ID：13797926
> 
> 赞同：47
> 
> 时间：2012-12-10T09:14:14.210
> 
> 标签：c++, new-operator

> **可能重复：**
> [这是一个变量还是函数](https://stackoverflow.com/questions/8686635/is-this-a-variable-or-function)

我错误地使用了类似的东西：

```
int *arr = new int(100); 
```

它通过了编译，但我知道这是错误的。它应该是

```
int *arr = new int[100]; 
```

当我写错了编译器会怎么想？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-10T09:15:49.857

**第一行分配一个单`int`并将其初始化为`100`.** 将`int(100)`视为构造函数调用。

由于这是一个标量分配，因此尝试访问`arr[1]`或释放内存`delete[]`会导致未定义的行为。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-10T09:17:58.303

[维基百科新（C++）](https://en.wikipedia.org/w/index.php?title=New_and_delete_(C%2B%2B)&oldid=690112349)引用：

```
int *p_scalar = new int(5); //allocates an integer, set to 5\. (same syntax as constructors)
int *p_array = new int[5];  //allocates an array of 5 adjacent integers. (undefined values) 
```

### 更新

在当前的 Wikipedia 文章[`new`和`delete`(C++)](https://en.wikipedia.org/wiki/New_and_delete_(C%2B%2B))中，该示例已被删除。

此外，这里是不太直观但完全可靠的 C++ 参考[`new`](http://www.cplusplus.com/reference/new/operator%20new/)和[`new[]`](http://www.cplusplus.com/reference/new/operator%20new[]/).

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-10T09:15:52.023

它分配一个类型的对象`int`并将其初始化为 value `100`。

很多人不知道您可以将初始化程序传递给`new`，有一个特殊的习惯用法应该更广为人知，以避免使用`memset`：

```
new int[100](); 
```

这将分配一个数组`int`并对其元素进行零初始化。

此外，您不应该使用数组版本的`new`. 曾经。就是`std::vector`为了这个目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T09:16:56.880

第一个创建一个新的整数，将其初始化为值 100 并返回一个指向它的指针。

在 C/C++ 中，指向数组的指针和指向单个值的指针之间没有区别（指向数组的指针实际上只是指向其第一个元素的指针）。因此，这是创建具有一个元素的数组的有效方法。

# luajit - Luajit API 的最佳使用

> ID：13797931
> 
> 赞同：1
> 
> 时间：2012-12-10T09:14:49.743
> 
> 标签：luajit

我正在开发一个程序，它会生成一些 Lua 代码然后运行它。

我可以（1）让程序生成一个文件，以便我可以使用命令行 luajit 编译器，或者（2）让程序通过 API 直接运行 luajit。

经过一些基准测试后，方法 (1) 似乎更快。这让我觉得也许我没有以最佳方式使用 API。我基本上做了一系列的 dostring(chunk) 并检查错误。

那么在针对性能的时候有没有使用 API 的好方法呢？

# android - 如何在 onSaveInstanceState() 中保存 AsyncTask 类对象

> ID：13797934
> 
> 赞同：3
> 
> 时间：2012-12-10T09:14:55.333
> 
> 标签：android

这是否可以在旋转时保存 AsyncTask 类对象并再次重用它。

```
 public class MyTask extends AsyncTask<Void, Void, Integer>
    {

    } 
```

任何好的解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:33:45.227

> 这是否可以在旋转时保存 AsyncTask 类对象并再次重用它。

使用`onRetainNonConfigurationInstance()`或保留的片段。

> 感谢您的回复，但 onRetainNonConfigurationInstance() 在 3.0 之后已弃用

那是因为他们建议您改用保留片段。如果您不使用片段，请使用`onRetainNonConfigurationInstance()`.

# jquery - 如何在句子中添加指向特定单词的链接？

> ID：13797938
> 
> 赞同：-1
> 
> 时间：2012-12-10T09:15:07.993
> 
> 标签：jquery

用户在文本框中输入他的语句后，我必须创建一个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:18:46.563

How would you create a normal hyperlink?

`<a href="...">Hai</a>, How are you`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:28:55.407

假设`jQuery`标签是正确的并且你想要 DOM 操作，这里有一个答案：

[http://jsfiddle.net/APUHd/](http://jsfiddle.net/APUHd/)

```
<button>Link words</button>
<div id="sentence">Hai, How are you</div>​ 
```

```
var jqSentence = $('div#sentence');
var aSentence  = jqSentence.html().split(' ');

function LinkWord(iIndex, sHref) {
    aSentence[iIndex] = '<a href="' + sHref + '">' + aSentence[iIndex] + '</a>';
    jqSentence.html(aSentence.join(' '));
}

$('button:first').click(function(){
    LinkWord(1, '/some/path');
    LinkWord(3, '/some/other/path');     
}); 
```

​</p>

# java - 将迭代器传递给Java中的线程

> ID：13797939
> 
> 赞同：0
> 
> 时间：2012-12-10T09:15:09.483
> 
> 标签：java, multithreading, iterator, queue

给定以下从 Cassandra 数据库中获取记录的代码片段：

```
QueryResult<OrderedRows<String, String, String>> result = rangeSlicesQuery.execute();
OrderedRows<String, String, String> rows = result.get();
Iterator<Row<String, String, String>> rowsIterator = rows.iterator(); 
```

如果我将 rowsIterator 对象放在定义为的 Queue 上：

```
BlockingQueue<Iterator<Row<String, String, String>>> queue = 
    new PriorityBlockingQueue<Iterator<Row<String, String, String>>>(); 
```

现在，如果我有一个从这个队列中读取的线程，我是否能够从队列中获取迭代器并迭代这个线程中的 OrderRows？

换句话说，是否可以将在一个线程中创建的迭代器传递给第二个线程，以便第二个线程可以迭代在第一个线程中为其创建迭代器的原始集合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:21:37.817

Briefly, yes. It's just an object referencing your collection.

I would perhaps be wary of this. Having an iterator used in one thread presumably means that you can modify your collection in the other thread, and you run the risk of concurrent modifications unless you're careful. Perhaps iterate over a copy of your original collection ?

# java - 在mysql更新查询的情况下java在结果集中返回什么

> ID：13797942
> 
> 赞同：3
> 
> 时间：2012-12-10T09:15:12.743
> 
> 标签：java, mysql, jdbc, resultset

我需要知道更新查询是错误还是正确，我知道如何在 PHP 中执行此操作，但在 java 中不知道（我是 java 新手）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T09:17:04.510

它返回：

1.  如果查询是 DML 查询（插入、更新、删除），则结果集中受影响的行数
2.  0，如果查询是 DDL（创建、更改等）

有关详细信息，请参阅 javadoc：[执行更新 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#executeUpdate%28java.lang.String%29)

我强烈建议您阅读[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)中的相关部分，阅读标题为：executeUpdate 方法的返回值的部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:51:24.767

执行 时`UPDATE`，不应使用`executeQuery`，因为更新不会产生结果集。一般来说，您应该使用[`executeUpdate`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html#executeUpdate%28%29)for`UPDATE`和。此方法返回更新计数。`INSERT``DELETE`

如果查询失败（即：如果发生错误），则 JDBC 驱动程序将抛出一个`SQLException`. 如果查询运行了，但没有更新任何行，这并不意味着它失败了，那么根本就没有任何行要更新，所以更新计数将为 0。

此外，我建议您遵循[JDBC 基础教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)并检查[包`java.sql`](http://docs.oracle.com/javase/7/docs/api/java/sql/package-frame.html)中类的 Javadocs （为了更好的可用性，请访问[http://docs.oracle.com/javase/7/docs/api/](http://docs.oracle.com/javase/7/docs/api/)并`java.sql`在左上角框架）。

# android - 如何在下面给出的我的 android 日历中添加提醒、备忘录？

> ID：13797945
> 
> 赞同：1
> 
> 时间：2012-12-10T09:15:33.890
> 
> 标签：android, android-calendar

```
public class CalendarView extends Activity  {
    public Calendar month, itemmonth;// calendar instances.
    public CalendarAdapter adapter;// adapter instance
    public Handler handler;// for grabbing some event values for showing the dot
                            // marker.
    public ArrayList<String> items; // container to store calendar items which
                                    // needs showing the event marker
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.calendar);
        month = Calendar.getInstance();
        itemmonth = (Calendar) month.clone();
        items = new ArrayList<String>();
        adapter = new CalendarAdapter(this, month);
        GridView gridview = (GridView) findViewById(R.id.gridview);
        gridview.setAdapter(adapter);
        handler = new Handler();
        handler.post(calendarUpdater);
        TextView title = (TextView) findViewById(R.id.title);
        title.setText(android.text.format.DateFormat.format("MMMM yyyy", month));
        RelativeLayout previous = (RelativeLayout) findViewById(R.id.previous);
        previous.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                setPreviousMonth();
                refreshCalendar();
            }
        });
        RelativeLayout next = (RelativeLayout) findViewById(R.id.next);
        next.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                setNextMonth();
                refreshCalendar();
            }
        });
        gridview.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {
                ((CalendarAdapter) parent.getAdapter()).setSelected(v);
                String selectedGridDate = CalendarAdapter.dayString
                        .get(position);
                String[] separatedTime = selectedGridDate.split("-");
                String gridvalueString = separatedTime[2].replaceFirst("^0*",
                        "");// taking last part of date. ie; 2 from 2012-12-02.
                int gridvalue = Integer.parseInt(gridvalueString);
                // navigate to next or previous month on clicking offdays.
                if ((gridvalue > 10) && (position < 8)) {
                    setPreviousMonth();
                    refreshCalendar();
                } else if ((gridvalue < 7) && (position > 28)) {
                    setNextMonth();
                    refreshCalendar();
                }
                ((CalendarAdapter) parent.getAdapter()).setSelected(v);
                showToast(selectedGridDate);    

            }
        });

    }

    protected void setNextMonth() {
        if (month.get(Calendar.MONTH) == month.getActualMaximum(Calendar.MONTH)) {
            month.set((month.get(Calendar.YEAR) + 1),
                    month.getActualMinimum(Calendar.MONTH), 1);
        } else {
            month.set(Calendar.MONTH, month.get(Calendar.MONTH) + 1);
        }

    }

    protected void setPreviousMonth() {
        if (month.get(Calendar.MONTH) == month.getActualMinimum(Calendar.MONTH)) {
            month.set((month.get(Calendar.YEAR) - 1),
                    month.getActualMaximum(Calendar.MONTH), 1);
        } else {
            month.set(Calendar.MONTH, month.get(Calendar.MONTH) - 1);
        }

    }<br/>

    protected void showToast(String string) {<br/>
        Toast.makeText(this, string, Toast.LENGTH_SHORT).show();<br/>

    }<br/>

    public void refreshCalendar() {<br/>
        TextView title = (TextView) findViewById(R.id.title);<br/>

        adapter.refreshDays();<br/>
        adapter.notifyDataSetChanged();<br/>
        handler.post(calendarUpdater); // generate some calendar items<br/>

        title.setText(android.text.format.DateFormat.format("MMMM yyyy", month));
    }

    public Runnable calendarUpdater = new Runnable() {

        @Override
        public void run() {
            items.clear();

            // Print dates of the current week
            DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
            String itemvalue;
            for (int i = 0; i < 7; i++) {
                itemvalue = df.format(itemmonth.getTime());
                itemmonth.add(Calendar.DATE, 1);
                items.add("2012-09-12");
                items.add("2012-10-07");
                items.add("2012-10-15");
                items.add("2012-10-20");
                items.add("2012-11-30");
                items.add("2012-11-28");
            }
            adapter.setItems(items);
            adapter.notifyDataSetChanged();
        }
    };
}

//Adapter class
public class CalendarAdapter extends BaseAdapter {
    private Context mContext;
    private java.util.Calendar month;
    public Calendar pmonth; // calendar instance for previous month
    /**
     * calendar instance for previous month for getting complete view
     */
    public Calendar pmonthmaxset;
    private Calendar selectedDate;
    int firstDay;
    int maxWeeknumber;
    int maxP;
    int calMaxP;
    int lastWeekDay;
    int leftDays;
    int mnthlength;
    String itemvalue, curentDateString;
    DateFormat df;
    private ArrayList<String> items;
    public static List<String> dayString;
    private View previousView;

    // private List<String> mnthString;

    public CalendarAdapter(Context c, Calendar monthCalendar) {
        CalendarAdapter.dayString = new ArrayList<String>();
        month = monthCalendar;
        pmonth = (Calendar) month.clone();
        selectedDate = (Calendar) monthCalendar.clone();
        mContext = c;
        month.set(Calendar.DAY_OF_MONTH, 1);
        this.items = new ArrayList<String>();
        df = new SimpleDateFormat("yyyy-MM-dd");
        curentDateString = df.format(selectedDate.getTime());
        refreshDays();
    }

    public void setItems(ArrayList<String> items) {
        for (int i = 0; i != items.size(); i++) {
            if (items.get(i).length() == 1) {
                items.set(i, "0" + items.get(i));
            }
        }
        this.items = items;
    }

    public int getCount() {
        return dayString.size();
    }

    public Object getItem(int position) {
        return dayString.get(position);
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new view for each item referenced by the Adapter<br/>
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        TextView dayView;
        if (convertView == null) { // if it's not recycled, initialize some
                                    // attributes
            LayoutInflater vi = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.calendar_item, null);

        }
        dayView = (TextView) v.findViewById(R.id.date);
        // separates daystring into parts.
        String[] separatedTime = dayString.get(position).split("-");
        // taking last part of date. ie; 2 from 2012-12-02
        String gridvalue = separatedTime[2].replaceFirst("^0*", "");
        // checking whether the day is in current month or not.
        if ((Integer.parseInt(gridvalue) > 1) && (position < firstDay)) {
            // setting offdays to white color.
            dayView.setTextColor(Color.WHITE);
            dayView.setClickable(false);
            dayView.setFocusable(false);
            // i++;
        } else if ((Integer.parseInt(gridvalue) < 7) && (position > 28)) {
            dayView.setTextColor(Color.WHITE);
            dayView.setClickable(false);
            dayView.setFocusable(false);
            // i++;
        } else {
            // setting curent month's days in blue color.
            dayView.setTextColor(Color.BLUE);
        }

        if (da<br/>yString.get(position).equals(curentDateString)) {
            setSelected(v);
            previousView = v;
        } else {
            v.setBackgroundResource(R.drawable.list_item_background);
        }
        dayView.setText(gridvalue);

        // create date string for comparison
        String date = dayString.get(position);

        if (date.length() == 1) {
            date = "0" + date;
        }
        String monthStr = "" + (month.get(Calendar.MONTH) + 1);
        if (monthStr.length() == 1) {
            monthStr = "0" + monthStr;
        }

        // show icon if date is not empty and it exists in the items array
        ImageView iw = (ImageView) v.findViewById(R.id.date_icon);
        if (date.length() > 0 && items != null && items.contains(date)) {
            iw.setVisibility(View.VISIBLE);
        } else {
            iw.setVisibility(View.INVISIBLE);
        }
        return v;
    }

    public View setSelected(View view) {
        if (previousView != null) {
            previousView.setBackgroundResource(R.drawable.list_item_background);
        }
        previousView = view;
        view.setBackgroundResource(R.drawable.calendar_cel_selectl);
        return view;
    }

    public void refreshDays() {
        // clear items
        items.clear();
        dayString.clear();
        // month start day. ie; sun, mon, etc
        firstDay = month.get(Calendar.DAY_OF_WEEK);
        // finding number of weeks in current month.
        maxWeeknumber = month.getActualMaximum(Calendar.WEEK_OF_MONTH);
        // allocating maximum row number for the gridview.
        mnthlength = maxWeeknumber * 7;
        maxP = getMaxP(); // previous month maximum day 31,30....
        calMaxP = maxP - (firstDay - 1);// calendar offday starting 24,25 ...
        /**
         * Calendar instance for getting a complete gridview including the <br/>three<br/>
         * month's (previous,current,next) dates.

        pmonthmaxset = (Calendar) pmonth.clone();
        /**
         * setting the start date as previous month's required date.
         */<br/>
        pmonthmaxset.set(Calendar.DATE, calMaxP + 1);

        /**<br/>
         * filling calendar gridview.<br/>
         */<br/>
        for (int n = 0; n < mnthlength; n++) {
            itemvalue = df.format(pmonthmaxset.getTime());
            pmonthmaxset.add(Calendar.DATE, 1);
            dayString.add(itemvalue);
        }
    }

    private int getMaxP() {
        int maxP;
        if (month.get(Calendar.MONTH) == month.getActualMinimum(Calendar.MONTH)) {
            pmonth.set((month.get(Calendar.YEAR) - 1),
                    month.getActualMaximum(Calendar.MONTH), 1);
        } else {
            pmonth.set(Calendar.MONTH, month.get(Calendar.MONTH) - 1);
        }
        maxP = pmonth.getActualMaximum(Calendar.DAY_OF_MONTH);
        Log.i("", "maxP is :         "+maxP);
        Log.e("", "calendar month is :            "+Calendar.MONTH);
        return maxP;
    }

} 
```

# mysql - 使用 VB.NET 2010 连接到远程 MySQL 数据库

> ID：13797946
> 
> 赞同：2
> 
> 时间：2012-12-10T09:15:35.427
> 
> 标签：mysql, vb.net

我的连接字符串如下。

```
conn.ConnectionString = "Server=192.248.***.***; Port=3036; User id=admin; password=***; Database=abc; Connect Timeout=60;" 
```

但它返回错误“连接到数据库时出错：无法连接到任何指定的 MySQL 主机。”

但我可以使用 PHPMyAdmin 登录。

```
//192.248.***.***/phpmyadmin 
```

我也可以使用以下方法登录本地 MySQL 数据库：

```
 conn.ConnectionString = "server=" & "localhost" & ";" & "user id=" & "admin" & ";" & "password=" & "" & ";" & "database=abc" 
```

这段代码有什么问题。我想连接到远程数据库，因为这是系统的要求。请提供任何帮助。

**更新：** 在即时窗口中显示：

```
 PassbookPrinter.vshost.exe Error: 0 : Unable to connect to any of the specified MySQL hosts.
A first chance exception of type 'MySql.Data.MySqlClient.MySqlException' occurred in MySql.Data.dll 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-04T14:22:17.780

# 使用 VB.Net 连接到远程 MySQL 数据库

将 vb.net 连接到远程 MySql 数据库；无论您使用的是什么 VB.Net 版本，只需执行以下步骤即可。

[1) 从 url ( https://dev.mysql.com/downloads/connector/net/](https://dev.mysql.com/downloads/connector/net/) )下载 Mysql Connector/Net

2) 安装连接器；默认情况下，连接器将安装在我安装的版本的路径 (C:\Program Files\MySQL\Connector Net 6.9.6) 中。

3) 打开 VB.Net IDE 并启动新项目。

4）添加“Mysql.Data.dll”作为项目的引用，您可以在路径中找到它（C:\Program Files\MySQL\Connector Net 6.9.6\Assemblies\v4.5）；

5) 准备好您的连接表格，如图所示； ![在此处输入图像描述](../Images/c666c6d3022b7684a3fdd9048f47609d.png)

6) 创建名为“Database”的类并编写以下代码。

# 数据库类代码

导入 MySql.Data.MySqlClient

公共类数据库

```
Private _connection As New MySqlConnection
Private _errormessge As String
Private _servername As String
Private _databasename As String
Private _userid As String
Private _password As String

Public WriteOnly Property ServerName() As String
    Set(ByVal value As String)
        _servername = value
    End Set
End Property

Public WriteOnly Property DatabaseName() As String
    Set(ByVal value As String)
        _databasename = value
    End Set
End Property

Public WriteOnly Property UserID() As String
    Set(ByVal value As String)
        _userid = value
    End Set
End Property

Public WriteOnly Property Password() As String
    Set(ByVal value As String)
        _password = value
    End Set
End Property

Public ReadOnly Property ErrorMessage() As String
    Get
        Return _errormessge
    End Get
End Property

Public Function Connection() As Boolean
    Try
        _connection.ConnectionString = "Server=" & _servername & ";Port=3306;Database=" & _databasename & ";User ID=" & _userid & ";Password=" & _password & ""
        _connection.Open()
        If _connection.State = ConnectionState.Open Then
            _connection.Close()
            Return True
        End If
    Catch ex As Exception
        _errormessge = ex.Message
        Return False
    End Try
End Function 
```

结束类

# 表单类代码

公共类 Frm_Main Private Sub btn_connect_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 btn_connect.Click

'对象声明和实例化

暗淡数据作为新数据库

```
 With data
        'Assing the object property values
        .ServerName = txt_server.Text
        .DatabaseName = txt_database.Text
        .UserID = txt_uid.Text
        .Password = txt_pwd.Text

        'Connection testing
        If .Connection Then
            MessageBox.Show("Database Conneted.")
        Else
            MessageBox.Show(.ErrorMessage)
        End If
    End With
End Sub

Private Sub btn_exit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btn_exit.Click
    Close()
End Sub 
```

结束类

7）运行项目并尝试连接；如果连接成功，那么你的运气；如果连接不成功并出现以下错误消息，请不要继续阅读更多内容； ![在此处输入图像描述](../Images/d964fe920ae8b3eae994f6b7ca479dda.png)

8）在@之后记下错误消息中的ip地址（那是你的ip）并将其添加到你的域cpanel“远程mysql访问”下图说明了远程mysql访问的样子（它们是相同的，但它们可能在颜色上有所不同); 不要忘记按“添加主机”按钮。对于使用静态 ip 的用户，此设置每天都可以使用。 ![在此处输入图像描述](../Images/7a40a662f8253baa0c732aa46055302b.png)

完成以上步骤后看到成功信息；

![在此处输入图像描述](../Images/083ba78d9af4e9e09bd1b7f2afda970e.png)

但是，如果错误消息仍然存在，请尝试将密码文本留空并在远程数据库中没有密码时再次连接；如果错误再次出现，除了 YES 更改为 NO 那么您必须检查您是否在 DHCP 中；

9）如果您在 DHCP 中，这意味着 IP 在每个新的 Internet 连接中都会发生变化。如果您使用调制解调器，可能您在 DHCP 中。如果您在动态 ips 中，请检查 ip 的 4 个块中发生了什么变化。如果第一次连接的第一个ip是197.250.3.201，下一个ip是197.250.60.70，下一个ip是197.250.80.24；您必须在您的 cpanel 访问主机中添加 197.250.% 才能使您的连接稳定。 ![在此处输入图像描述](../Images/74557494440e74879d86fc723afc3fec.png)

10) 注意：随着百分号（通配符）流向 IP 地址的左侧，安全门打开得越多。如果出现新错误，请联系您的域提供商，域中可能存在其他一些安全问题。谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T09:31:31.583

试试这个，它会工作的

```
con.ConnectionString ="Persist Security Info=False;datasource=site.com;port=3306;username=username;password=password;database=database name" 
```

您必须添加

> 坚持安全

在你的代码中。访问站点服务器的 mysql 数据库。转到 cpanel > Remote MySQL ，然后添加您的 IP 地址

看到这张图片>>> [https://www.dropbox.com/s/ytsz57spanwdpkz/cpanel.PNG](https://www.dropbox.com/s/ytsz57spanwdpkz/cpanel.PNG)

现在享受：p

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:37:28.713

MySQL 的默认端口是 3306。如果您可以使用默认设置从 phpmyadmin 连接，这听起来像是一个错字，您应该：

```
conn.ConnectionString = "Server=192.248.***.***; Port=3306; User id=admin; password=***; Database=abc; Connect Timeout=60;" 
```

此外，默认情况下禁用对 MySQL 服务器的远程访问。例如，如果您在 Debian Linux 发行版上运行 MySQL，您可能需要执行以下步骤以允许从另一台计算机访问：

[http://www.debianhelp.co.uk/remotemysql.htm](http://www.debianhelp.co.uk/remotemysql.htm)

对于 Windows 主机，以下内容可能很有用：

[http://tech Mind.net/blog/allow-remote-connections-for-mysql-on-windows.html](http://techminded.net/blog/allow-remote-connections-for-mysql-on-windows.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:13:32.290

我以前有同样的问题，我和它在不同的服务器上运行时一样。

尝试从运行应用程序的服务器 ping 通，看看是否可以连接。这就是我发现并需要更改防火墙的方式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-16T01:25:24.707

尝试在 mysql 的 .ini 配置上将端口更改为 3307，然后在 mysql 的 .ini 配置上绑定地址=服务器的 ip 或主机名

# c# - AccessViolationException 错误

> ID：13797950
> 
> 赞同：1
> 
> 时间：2012-12-10T09:15:53.447
> 
> 标签：c#, access-violation, opencvsharp

我想问你一个问题。当我厌倦了使用 Marshal.ReadByte 时，我收到一个错误“尝试读取或写入受保护的内存。这通常表明其他内存已损坏。”我进行了搜索，但我仍然无法解决这个问题。你能帮帮我吗？这是我的代码。

```
unsafe static void Main(string[] args)
        {
 IplImage I_input = Cv.LoadImage("1.6.tif", LoadMode.GrayScale);

  IntPtr ptr2 = I_input.ImageData;

            for (int x = 0; x < I_input.Width; x++)
            {
                for (int y = 0; y < I_input.Height; y++)
                {
                    int offset = (I_input.WidthStep * y) + (x * 3);
                    byte b = Marshal.ReadByte(ptr2, offset + 0);    // B
                    byte g = Marshal.ReadByte(ptr2, offset + 1);    // G
                    byte r = Marshal.ReadByte(ptr2, offset + 2);    // R
                    Marshal.WriteByte(ptr2, offset, r);
                    Marshal.WriteByte(ptr2, offset, g);
                    Marshal.WriteByte(ptr2, offset, b);
                }
            }
} 
```

# java - 如何在两个线程之间共享一个对象（线程同步）？

> ID：13797951
> 
> 赞同：4
> 
> 时间：2012-12-10T09:16:05.573
> 
> 标签：java, android, multithreading, thread-synchronization

我有两个线程。一是将音频数据记录到变量中。另一个线程将记录的变量发送到服务器。由于我是多线程新手，在并发方面我需要做什么？

下面是代码片段：

```
short[] sData = new short[1024];

recordingThread = new Thread(new Runnable() {
        public void run() {
            android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
            while (isRecording) {
                recorder.read(sData, 0, BufferElements2Rec);
            }

        }
    }, "AudioRecorder Thread");
    recordingThread.start(); 
```

另一个线程正在访问相同的 sData 并将其发送到服务器：

```
Thread sendThread= new Thread(new Runnable() {
    public void run() {
                android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
    while (true) {
        try {

      ByteBuffer.wrap(bData).order(ByteOrder.LITTLE_ENDIAN)
            .asShortBuffer().put(sData);            
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:50:07.887

为了尽量减少重新发明轮子，您可以将其实现为生产者/消费者同步。对于初学者：

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ArrayBlockingQueue.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ArrayBlockingQueue.html)

以防万一，这里有一些介绍性的东西：

[http://en.wikipedia.org/wiki/Producer-consumer_problem](http://en.wikipedia.org/wiki/Producer-consumer_problem)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:36:15.547

你的问题有两个方面。

*   假设这`sData`是一个局部变量，那么要让两个线程共享数组，您只需声明`sData`为`final`. （如果`sData`是一个实例或类变量，你甚至不需要这样做......）

*   *让两个线程安全地*共享数组有点困难。问题是两个线程需要同步。发送线程需要知道记录线程已写入数组的哪一部分。此外，同步对于确保记录线程写入的数据对发送线程可见是必要的。

在这个例子中，正确的同步很可能需要几个额外的变量来指示两个线程的当前位置。而且由于您必须处理一个线程需要等待另一个线程添加或发送数据的情况，您可能需要使用`Object.wait()`并`Object.notify()`避免忙等待。

* * *

但是你在语义级别上所做的看起来好像它需要像经典的循环`short`值缓冲区一样操作。所以我建议寻找一个可以重用的现有实现。（例如，如果您愿意承担`Short`vs的开销，`short`那么您可以使用`ArrayBlockingQueue<Short>`.）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:03:41.700

处理此问题的一种方法是，如果这是一次性操作，则使用[闩锁](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)；如果需要重复，则使用[CyclicBarrier 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html)

# python - 从多对多关系中获取数据（中间表）

> ID：13797952
> 
> 赞同：0
> 
> 时间：2012-12-10T09:16:08.043
> 
> 标签：python, django, many-to-many

我设置了几个模型如下：

**产品**

**类别**

产品和类别*共享多对多关系*，这使得第三个表**product_categories** 包含产品 ID 和类别 ID。

我想按类别显示产品列表。*强调文本*I 现在我有类别 ID，但我不知道如何从这个 M2M 中间表中获取数据。

所以请给我建议一些这样做的方法。

谢谢。

已编辑

我试过这个东西

我的模型

```
class Product():
    image = CharField(_("Image"), max_length=100, blank=True, null=True)
    style_idea = models.TextField(_("style idea"), blank=True)
    categories = models.ManyToManyField("Category", blank=True,
                                    verbose_name=_("Product categories")) 
```

我的**看法**

```
if page.id == 11:
            value = Category.objects.all()
            value2 = Product.objects.all()
            value1 = ProductVariation.objects.all()
            return render_to_response('boutique.html',{'page':page,'productvariation':value1,'category':value,'products':value2} , context_instance=RequestContext(request)) 
```

我的**模板**

```
{% regroup products by category as products_by_category %}
{% for c in products_by_category %}
{{c}}
{%endfor%} 
```

这个 c 打印所有产品

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:46:06.760

通常你会做类似的事情

```
category = Category.objects.get(pk=10)
products = category.product_set.all()  # note that this is a queryset 
```

# python - Django SqlServer 配置不正确 - settings.DATABASES

> ID：13797969
> 
> 赞同：1
> 
> 时间：2012-12-10T09:17:26.480
> 
> 标签：python, sql-server, django, apache, pyodbc

早些时候我的 pyodbc 模块有[问题](https://stackoverflow.com/questions/13643494/error-loading-pyodbc-module-while-running-on-apache)，它没有在我的 Windows 机器上运行的 apache 服务器上运行我的应用程序。[我发现使用这个提示](http://code.google.com/p/pyodbc/issues/detail?id=214)可以解决我让 django 项目在 apache 上运行的问题。

但现在我面临着一个不同的问题。django 应用程序在 apache 上运行，但在页面上抛出此错误。

```
ImproperlyConfigured at /auth/login/
settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details. 
```

***需要明确的是，这个项目在通过 djangos 内置服务器部署时运行完美。***这就是我的数据库连接在 settings.py 中的样子

```
DATABASES = {
    'default': {
        'ENGINE': 'sql_server.pyodbc',
        'NAME': 'myDbName',
        'USER': 'myusername',    
        'PASSWORD': '',
        'HOST': '',
        'OPTIONS' : {
            'driver': 'SQL Native Client',
            'dsn': 'test',
            'MARS_Connection': True,
        },
    },    
} 
```

更新：

我根据[Django MSSQL 文档](http://django-mssql.readthedocs.org/en/1.2/settings.html)更新了我的代码，遇到了一些问题并通过更新我的 pywin32 让它工作，***这又在 djangos 内置服务器上工作，而不是 APACHE，给了我同样的 ImproperlyConfigured 错误***

```
DATABASES = {
    'default': {
        'NAME': 'myDbName',
        'ENGINE': 'sqlserver_ado',
        'HOST': 'MYHOST',
        'USER': 'myusername',
        'PASSWORD': 'mypassword',
        'OPTIONS' : {
            'provider': 'SQLNCLI11', 
            'use_mars': False,
        },
    }
} 
```

我的系统 - Windows 7、Apache 2.2、python 2.7、django 1.4.2、pyodbc-3.0.6.win32-py2.7

对此的任何提示或技巧都非常受欢迎，我已经尝试让这个项目启动并运行一段时间了。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:28:14.340

如果您使用的是内置后端，则应指定数据库引擎，如下所示：

```
'ENGINE':'django.db.backends.mysql' 
```

如果您不使用内置后端，则应`mypackage.backends.whatever`在设置中指定完全限定的路径（即 ）`ENGINE`。[在此处的 django 文档](https://docs.djangoproject.com/en/1.4/ref/settings/#engine)中给出了有关定义数据库后端的信息。

更新：
您可以尝试使用[django-mssql](https://bitbucket.org/Manfre/django-mssql)将 sql-server 与 django 一起使用，并且[在 readthedocs](http://django-mssql.readthedocs.org)中提供了清晰的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:44:09.500

我的问题的答案可能有点奇怪，但这就是我如何在我的机器上工作的方式。

我遇到的主要问题是我的 DSN 没有与 django 项目建立联系，在我下面提到的步骤中，这是使其工作变得完全不同的最后一步。以前我在创建我的 DSN 时选择了*“使用集成 Windows 身份验证”*，但令人惊讶的是，当我使用 djangos 内置服务器运行它时它可以工作。

*   在 Windows 7 中打开应用程序 ODBC 数据源管理器（从开始菜单搜索 ODBC）。
*   在系统 DSN 选项卡下，单击添加按钮。
*   选择 SQL Server Native Client 10.0
*   输入 DSN **your_dsn_name**、描述（可选）和要连接的 SQL Server ，点击下一步
*   选择“使用用户输入的登录 ID 和密码进行 SQL Server 身份验证”选项。
*   输入登录 ID（' **your_username** '）和密码（' **your_password** '）。单击下一步、下一步和完成。

我把我的数据库连接改回原来的代码

```
DATABASES = {
    'default': {
        'ENGINE': 'sql_server.pyodbc',
        'NAME': 'MaDaMa_App',
        'USER': 'your_username',
        'PASSWORD': 'your_password',
        'HOST': 'MYHOST',
        'OPTIONS' : {
            'driver': 'SQL Native Client',
            'dsn': 'your_dsn_name',
            'MARS_Connection': True,
        },
    },
 } 
```

感谢所有帮助我解决此问题的人，并希望这对那里的人有所帮助。

干杯

# robohelp - 为我的 ROBOHELP 创建多个 TOC

> ID：13797970
> 
> 赞同：0
> 
> 时间：2012-12-10T09:17:30.130
> 
> 标签：robohelp, help-authoring

我正在为我的项目创建一个机器人帮助，并希望创建一个基于角色的机器人帮助，即某些页面将为某些角色隐藏。为此，我创建了多个目录。我的问题是如何根据角色从我的 Java 项目中调用多个 TOC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T09:38:51.897

您可以在 RoboHelp 中创建多个 TOC，但一次只能输出一个。换句话说，每个编译的帮助只能包含一个 TOC。但是你可以创建多个帮助，每个都有不同的目录，然后你只需要告诉你的 Java 代码你想打开哪个帮助。

1.  为您要生成的每个 TOC创建一个**单一来源布局。**
2.  指定要在每个**单一来源布局**中使用的 TOC （**单一来源布局**>>**内容**设置）。
3.  将每个**单源布局**生成到不同的文件夹（**单源布局**>>**常规**>>**输出位置**设置）。
4.  根据您自己的标准，告诉 Java 要启动哪个帮助。

# javascript - 为什么我们需要javascript mvc？

> ID：13797971
> 
> 赞同：2
> 
> 时间：2012-12-10T09:17:32.933
> 
> 标签：javascript, javascriptmvc

1.  什么时候会使用 Javascript MVC？我的意思是为什么需要 JS-MVC ？
2.  仅仅是因为这种设计模式在其他语言中很出名，用于代码维护、可读性和许多 Web 应用程序都在交付客户端吗？
3.  它如何帮助开发人员、测试人员和最终用户减轻他们的任务？
4.  任何最适合 JS-MVC 的用例以及根本不需要它的任何用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T11:10:28.927

## 问题 1,2,4

我的观点是，你应该只应用任何类型的设计模式，并且只有在你真的需要它的时候。仅仅是因为设计模式毕竟并不容易。它们会给您的解决方案增加复杂性，但它们也会为您提供（通常）为特定类型的问题建立和工作解决方案的好处。

是否使用它们实际上取决于您要构建什么以及它有多复杂。也就是说，我可能不会使用 MVC 模式来构建我的 200 行 jQuery 插件，也许......

但是在工作中，我们创建单页应用程序，我们有 2-5 名开发人员同时在一个项目上工作，项目时间为 500 天。在这样的环境中，事情会很快变得复杂，如果你不遵循任何适当的结构，你就会迷失方向。

我希望这应该回答你的问题1和2。

## 对于问题 3：

最终用户希望得到一个质量更好、错误更少的应用程序，但通常他甚至不应该注意到（也不关心）应用程序的底层架构。

MVC 帮助开发人员

*   作为在应用程序源代码中导航时的方向。考虑在一个源文件中包含 3000 行代码的应用程序，然后让 4 个开发人员同时处理它。乱七八糟的，对吧？当拥有一个通常也使用路由等的 MVC 应用程序时......您通常已经通过查看 url 中的路由知道相应控制器位于源代码中的位置以及您应该把手放在哪里
*   以便于测试。在应用单元测试实践时，关注点分离总是有益的，因为您可以更轻松地测试您的控制器，因为它不直接耦合到数据或表示性内容（如 HTML 代码等）。顺便说一句，你绝对应该对你的 JavaScript 代码进行单元测试，绝对！！
*   维护：这是前面几点的结果

I'm not sure which kind of figure you intend by "tester". If he writes automated tests at the unit or acceptance level, then the benefits from before pretty much hold as well. If he's testing the app as a whole in the sense of navigating around, taking the app as a black box by testing its reaction to different kind of inputs, then MVC doesn't really play a big role for him. It's like for the end-user.

So I hope I was able to clarify some things for you. But as said, never just follow a pattern because people follow it but only 'cause it gives you any kind of benefits.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T09:20:40.767

MVC 用于构建您的代码，尤其是在您大量使用客户端渲染的情况下。如果没有结构，您的代码会很快变得复杂。

如果您只需要部分更新，则无需等待整个页面刷新，最终用户的用户体验要好得多。

1.  如果您有明确定义的代码结构，它有助于更​​快地浏览代码。
2.  JS MVC 框架最适用于您拥有复杂系统并且希望通过使用 AJAX 和部分页面重新加载或更新来提供更好的用户体验的情况。通常你不会将 MVC 用于个人网站、博客或类似的东西......

# sql - MongoDB嵌入与SQL外键？

> ID：13797972
> 
> 赞同：0
> 
> 时间：2012-12-10T09:17:37.560
> 
> 标签：sql, mongodb, foreign-keys

与 SQL 为相同逻辑使用外键相比，MongoDB 在文档中嵌入对象的能力有什么特别的优势吗？

在我看来，唯一的优点是易于使用（也许还有性能？），甚至看起来它也可以很容易地抽象出来（例如，Django 似乎非常直观地处理 SQL 的外键）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:11:13.833

这归结为是否嵌入的经典问题。

在我解释更多内容之前，这里有一些开始的链接：

*   [我应该将活动时间线放在 mongodb 中的哪个位置，嵌入到用户中还是单独放置？](https://stackoverflow.com/questions/13617379/where-should-i-put-activities-timeline-in-mongodb-embedded-in-user-or-seperatel/13621570#13621570)
*   [MongoDB架构设计——选择两种收集方式或嵌入文档](https://stackoverflow.com/questions/9967740/mongodb-schema-design-choose-two-collection-approach-or-embedded-document)
*   [用于存储用户位置历史的 MongoDB 模式](https://stackoverflow.com/questions/9418633/mongodb-schema-for-storing-user-location-history)

现在来更具体地回答。

您必须记住 SQL 中外键的服务器端用法：JOIN。嵌入是在单个文档中获取您需要的所有数据的单次往返，但连接不是，它们实际上是基于范围的两个选择，然后合并以省略重复项（在某些数据集上有很大的开销）。

所以外键的使用并不完全依赖于应用程序，它也依赖于服务器和数据库。

话虽如此，有些人误解了 MongoDB 中的嵌入，并试图将所有数据放入一个文档中。不幸的是，您应该始终尝试嵌入所有内容的常识再次强化了这一点。链接和更多内容将提供一些有用的指南。

现在我们清除了一些东西，嵌入 JOIN 的主要优点是：

*   单程往返
*   在很多情况下很容易更新文档，除非你嵌入了很多层次
*   可以将实体数据与其相关的实体保存在一起

然而嵌入有一些缺陷：

*   必须对文档进行分页以获取其值，这在较大的文档上可能会出现问题
*   子文档被设计为对于不需要高级查询的实体来说是唯一的，因此您通常不会得到两个相互关联的单独实体，即一个`post`可以嵌入`comments`但一个可能由于查询需要而`user`不会嵌入。`posts`
*   嵌套超过 3 层可能会影响您使用诸如原子锁之类的东西的能力。

因此，当使用正确时，MongoDB 嵌入可以成为 SQL 连接的巨大力量，但您必须了解何时正确使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:29:50.660

Mongo 的核心优势在于它的数据文档视图，这自然可以扩展到数据的“POCO”视图。Mongo 客户端（如 .NET 中的 NoRM 项目）看起来与经验丰富的 Fluent NHibernate 用户惊人地相似，这绝非偶然——您的 POCO 数据模型被简单地序列化为 BSON 并以 1:1 的比例保存在 Mongo 中。不需要映射。

总体而言，这两种技术之间最大的区别在于模型以及开发人员必须如何考虑他们的数据。Mongo 更适合快速应用程序开发。

# iphone - 执行http post时的UIImage图像分辨率

> ID：13797977
> 
> 赞同：0
> 
> 时间：2012-12-10T09:17:57.277
> 
> 标签：iphone, objective-c, ios, uiimage

我的应用程序允许用户在相机中拍照/或从他的照片库中选择。

我希望发布的图像的分辨率为 650X550

但是我看到：

此代码之后的大小为 320X480

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
    {
        chosenImage = image;
        NSLog(@"The widht is %f",image.size.width);
        NSLog(@"The height is %f",image.size.height);
    } 
```

当我像这样提交图像时 - 我在服务器端以 1024X480 检索它

```
 NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://myurl/upload/"] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];
    [request setHTTPMethod:@"POST"];
    NSMutableData *body = [NSMutableData data];
    NSString *boundary = @"---------------------------14737809831466499882746641449";
    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
    [request addValue:contentType forHTTPHeaderField:@"Content-Type"];
    NSData *imageData = UIImageJPEGRepresentation(appDelegate.chosenImage, 0.5);
    // file
    [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Disposition: form-data; name=\"file\"; filename=\"iphone.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    [body appendData:[NSData dataWithData:imageData]];
    [body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
    // close form
    [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    // set request body
    [request setHTTPBody:body]; 
```

**我想将它作为 650X550（我在 objcetive-c 中声明的大小）检索到我在服务器端的代码中**

当我尝试使用常规 HTML 页面提交到我的后端代码时 - 它发送图像的原始大小而不是 1024X480。

如何以原始大小检索图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:31:01.807

您对从选择器获得的尺寸没有影响——尽管它应该大得多

您可以在上传之前手动缩放它

```
#import <UIKit/UIKit.h>
@interface UIImage (Resize)
- (UIImage*)scaleToSize:(CGSize)size;
@end

@implementation UIImage (Resizing)

- (UIImage*)scaleToSize:(CGSize)size {
    UIGraphicsBeginImageContext(size);

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(context, 0.0, size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGContextDrawImage(context, CGRectMake(0.0f, 0.0f, size.width, size.height), self.CGImage);

    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return scaledImage;
}
@end 
```

演示：

对象端：

```
UIImage *demo = [UIImage imageNamed:@"demo.jpg"];
UIImage *scaledImage = [demo scaleToSize:CGSizeMake(650, 550)];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.pich.info/test.php"] cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];
[request setHTTPMethod:@"POST"];
NSMutableData *body = [NSMutableData data];
NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
[request addValue:contentType forHTTPHeaderField:@"Content-Type"];
NSData *imageData = UIImageJPEGRepresentation(scaledImage, 0.5);
// file
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition: form-data; name=\"file\"; filename=\"iphone.jpg\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:imageData]];
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
// close form
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
// set request body
[request setHTTPBody:body];

[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *r, NSData *d, NSError *e) {
    NSLog(@"response: %@", [[NSString alloc] initWithData:d encoding:NSUTF8StringEncoding]);
}];

<?php 
//copy file IF a file was uploaded

$imgFile = $_FILES['file']['tmp_name'];
if(!file_exists($imgFile))
{
    var_dump($_FILES);
    die("no file uploaded");
}

print " File: $imgFile\n";

$im = imagecreatefromjpeg($imgFile);
$imgWidth = imagesx($im);
$imgHeight = imagesy($im);

print " Width: $imgWidth\n";
print "Height: $imgHeight\n";
print "Format: red:green:blue\n"; 
```

# embedded-linux - GPIO pins will not toggle (high/low) on beagleboard xm

> ID：13797980
> 
> 赞同：1
> 
> 时间：2012-12-10T09:18:01.707
> 
> 标签：embedded-linux, beagleboard, gpio

I am trying to use the expansion header to control a couple motors and auxiliary task mechanism. For this I am using the appropriate pins as GPIO and merely attempting to send high or low signals as needed by the robot. (For instance, I might need the robot to move forward and so I'd send high signals on both sets of pins, whereas if I needed the robot to turn I'd send a high signal to one pin and a low to the other.)

However, the problem is that the pins will only stay high! I've followed the conventions for sysfs just via the terminal, and, although I'm able to set the "values", "active_lows", etc. to 0 or 1, I can't actually get the pins to send 0V. After checking the beagle.h file I used for u-boot it looks like the multiplexer mode is configured correctly. This is also reflected when I get the info from sys/class/gpio/gpio%/% and sys/kernel/debug/gpio. Furthermore I don't get any errors or indication from anywhere that there is something wrong...it just doesn't work!

What should I do? For the first time in my life I have seemingly exhausted the internet...

details: Beagleboard xm rev c1 ubuntu 12.04 kernel 3.6.8-x4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T04:22:50.653

我对小猎犬板很陌生，我最近一直在尝试在我的经典 beagleboard c4 上配置 GPIO 引脚，我相信这应该非常相似。

无论我做什么，我的 GPIO 引脚的一半似乎工作正常，而另一半似乎保持高或低。即使它们的配置方式与 /sys/class/gpio/ 中的工作引脚相同

您是否尝试过使用其他 gpio 引脚？

我最终按照[http://labs.isee.biz/index.php/Mux_instructions](http://labs.isee.biz/index.php/Mux_instructions) 将多路复用器配置为 4，现在我可以控制不工作的引脚。

我基本上使用了命令：

```
 sudo echo 0x004 > /sys/kernel/debug/omap_mux/(mux 0 name) 
```

其中 (mux 0 name) 是您希望配置的 gpio 引脚的 mux 0 设置的子系统名称

IE。用于 beagleboard c4 上的 gpio 183

```
 sudo echo 0x004 > /sys/kernel/debug/omap_mux/i2c2_sda 
```

虽然我必须更改权限才能修改这些文件

正如我所说，我对 beagleboard 和 ubuntu 很陌生，但这对我有用，所以我想我会与您分享，希望对您有所帮助。

问候; 保罗；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:57:35.557

**似乎 beagleboard 扩展销以交替方式编号，如此清晰和专业地[描绘](http://i.imgur.com/kXB3H.jpg)。**

感谢大家的帮助。我现在对 OMAP 系统上的 GPIO 的了解比我应该知道的多得多（你也一样）。祝你在决赛/生活中好运！**

***tl;博士我是个白痴！***

# spring - How to add Restrictions to Criteria API in Hibernate

> ID：13797981
> 
> 赞同：1
> 
> 时间：2012-12-10T09:17:59.617
> 
> 标签：spring, hibernate, jakarta-ee, hibernate-mapping, hibernate-criteria

I am newbie to Hibernate and Spring. My question is on “ how to add criteria…” in situation like, I have two beans:

1) Language:

```
public class Language {
    private int languageId;
    private String languageName;
    private List<Topic> listOfAllTopics;
} 
```

2) Topic:

```
public class Topic {
    private int topicId;
    private String topicName;
} 
```

My database tables:

1) language

```
language_id       int(PK)
language_name     varchar(30) 
```

2) topic

```
topic_id          int(PK)
topic_name        varchar(30)
language_id       int(FK) 
```

Hibernate mapping xml files are:

1) Language.hbm.xml

```
<hibernate-mapping package="com.mw.javamentordb.dto">
    <class name="Language" table="language" lazy="true">
        <id name="languageId" column="language_id" type="int">
            <generator class="increment" />
        </id>
        <property name="languageName" column="language_name"type="string"/>
        <bag name="listOfAllTopics" cascade="all">
        <key column="language_id" not-null="true" />
        <one-to-many class="Topic"/>
        </bag>
    </class>
</hibernate-mapping> 
```

2) Topic.hbm.xml

```
<hibernate-mapping package="com.mw.javamentordb.dto">
    <class name="Topic" table="topics" lazy="true">
        <id name="topicId" column="topics_id" type="int">
            <generator class="increment" />
        </id>
        <property name="topicName" column="topics_name" type="string" />
    </class>
</hibernate-mapping> 
```

And I get all lang in my database using this method and it works properly.

```
public List<Language> getAllLanguages() {
    Criteria criteria = getSession().createCriteria(Language.class);
    return criteria.list();
} 
```

But when I try to get all topics of particular language(by langId) using criteria, it not works. Actually I don’t know how to use criteria in such kind of situation..

```
public List<Topic> getAllTopicOfLanguage(Language language) {
    Criteria criteria = getSession().createCriteria(Topic.class);
    criteria.add(Restrictions.eq("?");
    return criteria.list();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:08:49.490

您的 Topic 表方案具有外键约束`language_id`，但您的类和 hbm.xml 映射没有。

所以你想要的查询是不可能的。

将其更改为：

```
public class Topic 
{
    private int topicId;
    private String topicName;
    private Language language;
} 
```

并在 hbm.xml 的属性处：

```
<many-to-one name="language" class="package.Language" fetch="select">
    <column name="language_id">
</many-to-one> 
```

然后您可以使用如下条件查询它：

```
criteria.add(Expression.eq("language.language_id", language.getLanguageId())); 
```

或者，您可以使用对象本身的相等性而不是它们的 id 或使用`Expression.eqId(Object Object)`

*建议：*

使用带有标识符字段的抽象超类使事情更通用。`topicId`在类和表`Topic`以及`languageId`类和表上命名标识符一次`Language`只是开销。只需`id`在属性、类和表上使用即可让事情变得更容易。在更大的应用程序中，这将变得更加明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:09:03.473

您正在通过错误的方式搜索结果，根据您的设计，您将获得结果，

```
public Language getAllTopicOfLanguage(Language language) {
    Criteria criteria = getSession().createCriteria(Language.class);
    criteria.add(Expression.eq("languageId",language.getLanguageId()));
    return (Language)(criteria.list().get(0));
} 
```

这将返回您的 Language DTO 对象，其中包含与语言 id 匹配的主题列表，仅填写 Language DTO。

作为新手，只想告诉你，当你使用hibernate时，你的DTO和表格设计应该是非常精确的。

# draw - To locate points as initialization of GVF snakes

> ID：13797983
> 
> 赞同：1
> 
> 时间：2012-12-10T09:18:02.823
> 
> 标签：draw, points, locate

I want to detect several shapes around a reference shape. The centroids point of the reference shape is already determined. Basically the position of the surrounding shapes are almost fix in terms of angle. How do I locate points into the surrounding shapes so I use them as the initialization points of the GVF snakes. (Automatic detecting based on reference shape).

# html - How to create a simple, smooth marque?

> ID：13797985
> 
> 赞同：1
> 
> 时间：2012-12-10T09:18:17.293
> 
> 标签：html, css, marquee

Firstly I have a html marque:

```
<marquee behavior="scroll" direction="left" scrollamount="1"> 
```

But it wasn't smooth, and was too slow.
The higher scrollamount - the lower the smoothness.

Then i tried with css

```
marquee{
  width: 200px; height: 50px; white-space: nowrap;
  overflow: hidden;
  overflow-x:-webkit-marquee;
  -webkit-marquee-direction: forwards;
  -webkit-marquee-style: scroll;
  -webkit-marquee-speed: normal; //I changed this to `slow` - without effect
  -webkit-marquee-increment: small;
  .-webkit-marquee-repetition: 5;
  overflow-x: marquee-line;
  marquee-direction: forward;
  marquee-style: scroll;
  marquee-speed: normal;  //I changed this to `slow` - without effect
} 
```

I suppose, if I could change the speed to `slow` the above marque will be smooth.
So, I want a `simple`, `smooth` and `speed-adjustable` marque.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:21:50.750

```
 (function($) {
        $.fn.textWidth = function(){
             var calc = '<span style="display:none">' + $(this).text() + '</span>';
             $('body').append(calc);
             var width = $('body').find('span:last').width();
             $('body').find('span:last').remove();
            return width;
        };

        $.fn.marquee = function(args) {
            var that = $(this);
            var textWidth = that.textWidth(),
                offset = that.width(),
                width = offset,
                css = {
                    'text-indent' : that.css('text-indent'),
                    'overflow' : that.css('overflow'),
                    'white-space' : that.css('white-space')
                },
                marqueeCss = {
                    'text-indent' : width,
                    'overflow' : 'hidden',
                    'white-space' : 'nowrap'
                },
                args = $.extend(true, { count: -1, speed: 1e1, leftToRight: false }, args),
                i = 0,
                stop = textWidth*-1,
                dfd = $.Deferred();

            function go() {
                if(that.css('overflow')!="hidden") { 
                    that.css('text-indent', width + 'px'); 
                    return false;
                }
                if(!that.length) return dfd.reject();
                if(width == stop) {
                    i++;
                    if(i == args.count) {
                        that.css(css);
                        return dfd.resolve();
                    }
                    if(args.leftToRight) {
                        width = textWidth*-1;
                    } else {
                        width = offset;
                    }
                }
                that.css('text-indent', width + 'px');
                if(args.leftToRight) {
                    width++;
                } else {
                    width--;
                }
                setTimeout(go, args.speed);
            };

            if(args.leftToRight) {
                width = textWidth*-1;
                width++;
                stop = offset;
            } else {
                width--;            
            }
            that.css(marqueeCss);
            go();
            return dfd.promise();
        };
               // $('h1').marquee();
$("h1").marquee();
    $("h1").mouseover(function () {     
        $(this).removeAttr("style");
   }).mouseout(function () {
        $(this).marquee();
   });
 })(jQuery); 
```

**[​演示](http://jsfiddle.net/zrW5q/)**

# perl - Disk usage in Perl Core

> ID：13797991
> 
> 赞同：0
> 
> 时间：2012-12-10T09:18:39.070
> 
> 标签：perl, perl-core

I’m looking for a way to check the remaining free space on a disk within Perl. I can’t use CPAN since I have to deploy the script on many servers with different versions of Perl, and I can’t change it because my team leader ordered me that way.

Any idea? I tried `File::stat` but I can’t use it on `D:\` (the script runs on Windows versions).

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:23:28.827

```
fsutil volume diskfree C: 
```

对于 Windows 服务器，您可以从 system() 方法运行此 cmd 命令。

# google-maps - Google Map Marker pulse animation?

> ID：13797995
> 
> 赞同：17
> 
> 时间：2012-12-10T09:18:52.787
> 
> 标签：google-maps, animation, google-maps-api-3

I wonder is there any way to make Google Map Marker to pulse? Like here: [http://plebeosaur.us/etc/map/](http://plebeosaur.us/etc/map/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-17T16:16:51.107

查看代码后，我注意到您提供的演示中使用了 CSS pulsate。很高兴看到这方面的其他例子。

他使用静态图像作为中心。

这是玩弄的代码... [http://jsfiddle.net/86Ejf/945/](http://jsfiddle.net/86Ejf/945/)

```
var image = new google.maps.MarkerImage(
    'bluedot_retina.png',
    null, // size
    null, // origin
    new google.maps.Point( 8, 8 ), // anchor (move to center of marker)
    new google.maps.Size( 17, 17 ) // scaled size (required for Retina display icon)
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-21T05:34:32.130

您提供的链接使用纯 css 制作此动画：

```
@-moz-keyframes pulsate {
    from {
        -moz-transform: scale(0.25);
        opacity: 1.0;
    }
    95% {
        -moz-transform: scale(1.3);
        opacity: 0;
    }
    to {
        -moz-transform: scale(0.3);
        opacity: 0;
    }
}
@-webkit-keyframes pulsate {
    from {
        -webkit-transform: scale(0.25);
        opacity: 1.0;
    }
    95% {
        -webkit-transform: scale(1.3);
        opacity: 0;
    }
    to {
        -webkit-transform: scale(0.3);
        opacity: 0;
    }
}
/* get the container that's just outside the marker image, 
    which just happens to have our Marker title in it */
#map_canvas div.gmnoprint[title="I might be here"] {
    -moz-animation: pulsate 1.5s ease-in-out infinite;
    -webkit-animation: pulsate 1.5s ease-in-out infinite;
    border:1pt solid #fff;
    /* make a circle */
    -moz-border-radius:51px;
    -webkit-border-radius:51px;
    border-radius:51px;
    /* multiply the shadows, inside and outside the circle */
    -moz-box-shadow:inset 0 0 5px #06f, inset 0 0 5px #06f, inset 0 0 5px #06f, 0 0 5px #06f, 0 0 5px #06f, 0 0 5px #06f;
    -webkit-box-shadow:inset 0 0 5px #06f, inset 0 0 5px #06f, inset 0 0 5px #06f, 0 0 5px #06f, 0 0 5px #06f, 0 0 5px #06f;
    box-shadow:inset 0 0 5px #06f, inset 0 0 5px #06f, inset 0 0 5px #06f, 0 0 5px #06f, 0 0 5px #06f, 0 0 5px #06f;
    /* set the ring's new dimension and re-center it */
    height:51px!important;
    margin:-18px 0 0 -18px;
    width:51px!important;
}

/* hide the superfluous marker image since it would expand and shrink with its containing element */
/*  #map_canvas div[style*="987654"][title] img {*/
    #map_canvas div.gmnoprint[title="I might be here"] img {
        display:none;
    }
    /* compensate for iPhone and Android devices with high DPI, add iPad media query */
    @media only screen and (-webkit-min-device-pixel-ratio: 1.5), only screen and (device-width: 768px) {
        #map_canvas div.gmnoprint[title="I might be here"] {
            margin:-10px 0 0 -10px;
        }
    } 
```

当我复制他们的代码和他们的 css 时，可以确认它在我的网站上有效

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-05-28T13:23:44.927

**如果您不介意[IE/Edge 兼容性，这里的](https://caniuse.com/#search=svg)**SVG**可以创造奇迹。**

 **我创建了[这个蓝色脉动点](https://codepen.io/mpacary/pen/KLBQme)（改编自[这个](https://codepen.io/brandonreid/details/zxbXMa)）。

警告：动画不在 Edge 18 上播放（[但应该在 Edge 75](https://caniuse.com/#feat=svg-smil)上）。

只需替换标记属性中的图像：

```
var marker = new google.maps.Marker({
  //...
  icon: {
    url: 'path/to/your/image.svg',
    //...
  },
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-10T09:31:22.697

这可能部分回答了你的问题。您可以在此示例中使用动画折线： [https ://developers.google.com/maps/documentation/javascript/examples/overlay-symbol-animate](https://developers.google.com/maps/documentation/javascript/examples/overlay-symbol-animate)

当然，如果需要，您可以构建更复杂的动画。您还可以使用 setInterval() 图像（透明 PNG）标记或其 css 样式（根据您的示例的 box-shadow）进行切换，以便它看起来像动画。**

# c++ - C++ 指针，如何？

> ID：13797997
> 
> 赞同：1
> 
> 时间：2012-12-10T09:19:13.717
> 
> 标签：c++, winapi

我需要将指针作为`std::string`消息传递并获取字符串或在主窗口的消息处理程序中。`LPARAM``WM_USER``char*``WM_USER`

我怎么做 ？

我现在在做什么（这是不正确的，因为它没有产生它应该产生的结果）：

```
PostMessage(hwnd, LP_DOWNLOADUPDATE, (WPARAM)hHandleToWindow, (LPARAM)&remSize); 
```

where`remSize`是`sdt::string remSize;`一个全局变量。

在我正在做的消息处理程序中：

```
SetWindowText( (HWND)wParam, (char*)lParam ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T09:22:02.557

只需要获得一个 C 风格的字符串，即指向一个以零结尾的字符数组的指针：

```
PostMessage( hwnd, LP_DOWNLOADUPDATE, (WPARAM)hHandleToWindow, remSize.c_str() ); 
```

确保`remSize`在确定消息已被处理之前不会超出范围，否则会有悬空指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:22:21.190

您正在发送 a 的地址`std::string`，并将其解释为`char*`. 这是行不通的。您需要在发送指针时将其解释为 a 的地址`std::string`：

```
SetWindowText( (HWND)wParam, ((std::string*)lParam)->c_str() ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:22:46.367

而不是`(LPARAM)&remSize`您需要通过`(LPARAM) remSize.c_str()`将您的转换`std::string`为 const `char*`（即从`std::string`实例中提取指针）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T09:32:21.877

当您使用`PostMessage`调用时立即返回，并且消息刚刚放入接收线程的消息队列中。如果被引用的对象超出范围，接收代码将引用一个不存在的对象。这是未定义的行为。

相反，用于`SendMessage`传递数据。然后接收方可以复制数据并使用`PostMessage`（如果需要）提醒自己稍后处理数据。

无论如何，如果您从指向 的指针开始`std::string`，则接收者无法将其转换为`char const*`或其他一些不相关的类型。在接收端传递一个指向`std::string`并解释为指向的指针。`std::string`或者传递一个指针`char const*`并将其解释为`char const*`接收端的指针。

* * *

加起来：

*   `SendMessage`通过而不是通过传递指向的数据`PostMessage`。

*   如果需要，请使用它`PostMessage`来调用稍后的处理。

*   不要在不相关的类型之间转换指针。