# StackOverflow 问答 15098000-15098999

# iphone - AVPlayer - 将秒数添加到 CMTime

> ID：15098004
> 
> 赞同：19
> 
> 时间：2013-02-26T19:50:58.147
> 
> 标签：iphone, ios, xcode, avplayer, cmtime

如何将当前播放时间增加 5 秒？
其实这是我的代码：

```
CMTime currentTime = music.currentTime; 
```

我不能使用 CMTimeGetSeconds() ，因为我需要 CMTime 格式。

谢谢您的回答...

编辑：如何为 CMTime 设置变量？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-26T19:56:21.727

这是一种方法：

```
CMTimeMakeWithSeconds(CMTimeGetSeconds(music.currentTime) + 5, music.currentTime.timescale); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-27T23:20:06.083

优雅的方式是使用`CMTimeAdd`

```
CMTime currentTime = music.currentTime;
CMTime timeToAdd   = CMTimeMakeWithSeconds(5,1);

CMTime resultTime  = CMTimeAdd(currentTime,timeToAdd);

//then hopefully 
[music seekToTime:resultTime]; 
```

到您的编辑：您可以通过这些方式创建 CMTime 结构

```
CMTimeMake
CMTimeMakeFromDictionary
CMTimeMakeWithEpoch
CMTimeMakeWithSeconds 
```

更多@： [https ://developer.apple.com/library/mac/#documentation/CoreMedia/Reference/CMTime/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/CoreMedia/Reference/CMTime/Reference/reference.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-31T13:18:06.103

在斯威夫特：

```
private extension CMTime {

    func timeWithOffset(offset: TimeInterval) -> CMTime {

        let seconds = CMTimeGetSeconds(self)
        let secondsWithOffset = seconds + offset

        return CMTimeMakeWithSeconds(secondsWithOffset, preferredTimescale: timescale)

    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-16T13:51:21.567

Swift 4，使用自定义运算符：

```
extension CMTime {
    static func + (lhs: CMTime, rhs: TimeInterval) -> CMTime {
        return CMTime(seconds: lhs.seconds + rhs,
                      preferredTimescale: lhs.timescale)
    }

    static func += (lhs: inout CMTime, rhs: TimeInterval) {
        lhs = CMTime(seconds: lhs.seconds + rhs,
                      preferredTimescale: lhs.timescale)
    }

} 
```

# wordpress - Wordpress do term 是某个术语的子项

> ID：15098008
> 
> 赞同：0
> 
> 时间：2013-02-26T19:51:09.327
> 
> 标签：wordpress, parent-child, term

例如我有术语“孩子”，如何检查这个术语是否是术语“母亲”的孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:52:34.673

根据您的评论，我认为您可以通过以下方式执行此操作 -

将此方法放在您的主题`functions.php`文件中

```
function is_child($pageID) { 
    global $post; 
    if( is_page() && ($post->post_parent==$pageID) ) {
               return true;
    } else { 
               return false; 
    }
} 
```

然后你可以在你的主题的任何地方使用这个方法——

```
<?php
if(is_child(343)) {
echo "This is a child page of 'The Parent Page Title'.";
}
?> 
```

参考 - [http://bavotasan.com/2009/check-if-a-page-is-a-child-of-another-page-in-wordpress/](http://bavotasan.com/2009/check-if-a-page-is-a-child-of-another-page-in-wordpress/)

# javascript - d3 js 添加点到路径转换示例

> ID：15098009
> 
> 赞同：1
> 
> 时间：2013-02-26T19:51:11.417
> 
> 标签：javascript, d3.js

刚从 D3 开始。

我试图在 y 值大于 0.2 时向路径转换示例添加点，并将它们跨路径转换，以便它们看起来相对于路径保持在相同的位置。它只是最终应用于我自己的数据的测试，但我真的不明白我该怎么做。到目前为止，这是我尝试的 jsfiddle 的链接。任何指针都会很棒。

[http://jsfiddle.net/yn7XY/](http://jsfiddle.net/yn7XY/)

想我可以在更新中执行以下操作，谢谢

```
points = svg.selectAll("circle") .data([data])                       
.enter().append("circle")
.attr("opacity", function(d) {
if (d > .2) {
    return .9;}
else {
    return 0;
});
.style("fill", "DarkRed")
.attr("cx", function(d, i) { return x(i);})
.attr("cy", function(d) {return y(d);})
.attr("r", function(d) {return 4;})
.transition()
.duration(500)
.ease("linear")
.attr("transform", "translate("+ x(0) + ")")
.each("end", tick);

points.exit().remove(); 
```

# javascript - 将主干模型的“this”实例替换为获取的实例

> ID：15098010
> 
> 赞同：0
> 
> 时间：2013-02-26T19:51:15.067
> 
> 标签：javascript, backbone.js, underscore.js, parse-platform

我试图让加载我的模型更容易。如果尚未获取模型，则它只需使用该`id`字段并自行获取。然后我`_.extend(this, fetchedModel)`用来更新`this`. 现在的问题是，当我尝试将此获取和扩展的模型设置为另一个模型中的属性时，我遇到了循环活动 - `othermodel.set("fetchedModel", fetchedModel)`.

`this`有没有另一种方法来获取我的模型并简单地用刚刚获取的内容覆盖整个当前实例？

这是我的上下文代码（我也在使用 Parse）：

```
load : function(success) {
    debug("Loading workout...");

    // if it's not grabbed, grab it
    if(!this.createdAt) {
        var q = new Parse.Query(Workout);
        q.include("user");
        return q.get(this.id, {
            success : function(workout) {
                _.extend(this, workout);
                this.load(success);
            }.bind(this)
        });
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:06:10.013

无限递归是由方法`load`调用中的成功回调`this.load`，即自身引起的。

重置模型的属性，`_.extend(this, workout)`不是正确的方法。这会将 的属性复制`workout`到模型对象本身中。您要做的是`attributes`使用以下方法更新模型的内部对象[`Model#set`](http://backbonejs.org/#Model-set)：

```
this.set(workout); 
```

如果您想确保新属性不仅覆盖旧属性，而且还清除新对象中不存在的任何先前属性，请调用[`Model#clear`](http://backbonejs.org/#Model-clear)：

```
this.clear();
this.set(workout); 
```

顺便说一句，通常要更新 Backbone 模型，您只需调用[`Model#fetch`](http://backbonejs.org/#Model-fetch)，如下所示：

```
this.fetch({
  success: function() {
    //model has been updated...
  }
}); 
```

唉，我不知道 parse.com 的最佳实践是什么。的文档`Parse.Object` [似乎提到了 fetch 方法](https://parse.com/docs/js/symbols/Parse.Object.html#fetch)。

# ios - 如何将子模块、框架或库添加到 SVN 存储库

> ID：15098012
> 
> 赞同：0
> 
> 时间：2013-02-26T19:51:39.467
> 
> 标签：ios, xcode, svn

如果我想使用一些集成库，我正在创建一个新的 iOS 项目。IE：facebook、sharekit 等。我注意到它们中的大多数都是静态库或 git 子模块......所以问题是你如何将这些库上传到 SVN 存储库中？我的意思是任何开发人员只要下载 svn repo 内容并运行应用程序就会很棒。所以基本上我想以这样一种方式配置项目，即所有库或框架都相对于基本文件夹链接？然后上传所有这些内容。推荐的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:03:17.917

我通常只是抓取我需要的资源，将它们放在我本地目录层次结构中我想要的位置（在签出的 SVN 项目中），然后将它们添加/提交到我的存储库。这样做当然没有坏处。如果您正在寻找动态资源加载（`maven`例如，la），您需要走不同的路线，但在我看来，您不是。

附带说明一下，如果您正在开始一个新的 iOS 应用程序并计划与一堆第三方 API 集成，您可能想看看[Temboo 的 iOS SDK](https://www.temboo.com/download) *（完整披露：我在 Temboo 工作）*。它极大地简化了与 API 的集成，以及总体上令人头疼的 OAuth。[SDK 可免费使用，目前支持 100 多个 API，您可以在此处](https://live.temboo.com/library/)查看哪些（并试用）。

干杯

# image - IE8 中“背景大小”CSS 属性的解决方法，尝试将两个 div 分层

> ID：15098017
> 
> 赞同：1
> 
> 时间：2013-02-26T19:51:51.697
> 
> 标签：image, html, internet-explorer-8, css

通读论坛获取背景图像以覆盖 div 的方法，无论大小如何，并发现了“background-size”CSS 属性。它是一个宝石，在 Firefox 中运行良好，但不幸的是，我正在为一家以 IE8 为标准的大公司工作。浏览器无法识别“背景大小”，我将不得不作弊以获得所需的效果。

我正在尝试将两个 div 分层 - 一个图像大小适合 img 标签中的 div，另一个包含要叠加的文本。独立地，两个 div 都工作正常，但它们根本没有分层。他们一个接一个地出现。

我已经用 z-index 值、绝对和相对定位组合、浮点数等进行了测试，但没有运气。感觉我一定是遗漏了一些明显的东西，另一双眼睛将不胜感激。

最新的 CSS 如下：

```
.case-background {
margin-left: 93px;
margin-right: 93px;
border: 1px solid #665546;
}
.case-background img {
height: 100%;
width: 100%;
position: relative;
z-index: 0;
}
.case-text {
margin: 12px;
padding-left: 35px;
padding-right: 35px;
border: 1px solid #665546;
font-family: Arial, Helvetica, sans-serif;
color: #665546;
border: 1px solid #665546;
font-weight: normal;
background-color: #FFFFFF;
position: relative;
z-index: 1;
} 
```

HTML如下，减去header info和html、head、body标签等：

```
<div class="case-background">
<img src="images/test.jpg" />
<div class="case-text">
<h2>testing header</h2>
<p>testing paragraph</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:27:37.870

[CSS3Pie](http://css3pie.com/)是一个库，它为旧版本的 IE 添加了许多 CSS3 功能。如果您卡在 IE8 上但需要支持一些现代 CSS 功能，那就太好了。

最新版本的 CSS3Pie 包括对`background-size`样式的支持。因此，使用 CSS3Pie，您可以只使用标准 CSS 来获得背景大小效果。

您可以使用许多其他 javascript hack 也可以做同样的事情，但 CSS3Pie 是一个很棒的小工具；我每次都会推荐它。

# javascript - Dojo：如何更新 dojo.dnd.boxConstrainedMoveable 上的约束？

> ID：15098018
> 
> 赞同：0
> 
> 时间：2013-02-26T19:51:52.980
> 
> 标签：javascript, dojo

我在图像裁剪小部件中使用 dojo.dnd.boxConstrainedMoveable 以允许用户选择原始图像的子区域。此小部件的一部分允许用户调整图像大小。发生这种情况时，我会重新计算 dnd.boxConstrainedMoveable 的框约束。

下面是我尝试更新约束框的代码，但不起作用。是否有另一种方法可以让小部件根据新的约束框重新计算其约束，因为它在实例化时计算约束？

```
 # var dnd = reference to the boxConstrainedMoveable itself
    var mb = dojo.marginBox(cropImage);
    var constraintBox = {t: (mb.h - viewportHeight) * -1,
                         l: (mb.w - viewportWidth) * -1,
                         w: mb.w,
                         h: mb.h};
    this.dnd.constraintBox = constraintBox; # overwrites, but then is reset to original when moved 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T10:04:06.757

使用`constrainedMoveable`而不是`boxConstrainedMoveable`. 不同之处在于使用预定义框或动态框。 [受约束可移动](http://dojotoolkit.org/reference-guide/1.9/dojo/dnd.html#constrainedmoveable)

# html - 第一个子列表项在 Chrome (Mac/Windows) 中未对齐

> ID：15098019
> 
> 赞同：2
> 
> 时间：2013-02-26T19:51:57.547
> 
> 标签：html, css, google-chrome

**JSFiddle：http: [//jsfiddle.net/UXA5Q/](http://jsfiddle.net/UXA5Q/)**

我有以下 HTML 代码：

```
 <ul class="advisorlist">
           <li>                     
              <div class="employee">
                   <address>
                       <a title="E-mail John Doe" href="http://www.example.com/employee.html" rel="nofollow" class="email"><strong>John Doe</strong></a>
                       <br><em>Academic Advisor</em>
                      <br>Phone: 540-351-5555                           
                      <br>Fax: 540-351-5555                             
                   </address>                                           
               </div>                                          
            </li>                                      
            <!-- etc -->
       </ul> 
```

以及以下 CSS 代码：

```
ul.advisorlist {
    clear:both;
    list-style: none;
}
ul.advisorlist li {
    float: left;
    padding: 0;
    margin: 10px 10px 0 10px;
    width: 140px;
    min-height: 200px;
    height: auto !important;
    height: 200px;
} 
```

列表中的第一项在 Mac/Windows 上的 Chrome 中未对齐。Chromium、FF、Safari、IE 等正确显示所有列表项。

![未对齐的第一个孩子的图像](../Images/f2b7244888b1bb985b9e7a9032ac55ec.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T19:58:47.683

尝试删除`clear:both;`.`ul.advisorlist`

**[jsFiddle 示例](http://jsfiddle.net/j08691/UXA5Q/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:03:39.303

`clear: both`意味着没有浮动元素可以与任一侧的较早浮动框相邻。

> clear 属性指示元素框的哪些边不能与之前的浮动框相邻。

[http://www.w3.org/wiki/CSS/Properties/clear](http://www.w3.org/wiki/CSS/Properties/clear)

一些更详细的信息`clear`：[http ://www.w3.org/TR/CSS2/visuren.html#flow-control](http://www.w3.org/TR/CSS2/visuren.html#flow-control)

删除它，你看起来不错。

另外，你有一堆没有多大作用的css！看看我放在一起的这个[jsFiddle 叉子。](http://jsfiddle.net/tpPxL/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T03:39:40.357

. 从 li 的父级中删除 clear:both 并添加 overflow: hidden 到 ul

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T13:45:35.017

```
li {
list-style-position: inside;
} 
```

为我工作。感谢大家的努力！

# c# - 自定义类型的二进制搜索数组

> ID：15098022
> 
> 赞同：1
> 
> 时间：2013-02-26T19:52:15.243
> 
> 标签：c#, search, binary, custom-type

我有一个对象数组 A，每个对象都有公共字段 Value (double)，它在 0 和 1 之间具有随机双精度值。A 按此字段排序。我创建双随机 = 0.25。现在我想用 A[index].Value >= random 从 A 中找到第一个对象。我可以用 int index = Array.BinarySearch() 以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:05:40.737

这是`BinarySearch`您可以使用的实现。除了通常会接受的其他参数之外，它还接受 a `selector`，它确定应该为每个项目比较的实际对象，并且对于要找到的值，它接受该类型的值，而不是数组的类型.

```
public static int BinarySearch<TSource, TKey>(this IList<TSource> collection
    , TKey item, Func<TSource, TKey> selector, Comparer<TKey> comparer = null)
{
    return BinarySearch(collection, item, selector, comparer, 0, collection.Count);
}
private static int BinarySearch<TSource, TKey>(this IList<TSource> collection
    , TKey item, Func<TSource, TKey> selector, Comparer<TKey> comparer
    , int startIndex, int endIndex)
{
    comparer = comparer ?? Comparer<TKey>.Default;

    while (true)
    {
        if (startIndex == endIndex)
        {
            return startIndex;
        }

        int testIndex = startIndex + ((endIndex - startIndex) / 2);
        int comparision = comparer.Compare(selector(collection[testIndex]), item);
        if (comparision > 0)
        {
            endIndex = testIndex;
        }
        else if (comparision == 0)
        {
            return testIndex;
        }
        else
        {
            startIndex = testIndex + 1;
        }
    }
} 
```

使用它很简单：

```
public class Foo
{
    public double Value { get; set; }
}

private static void Main(string[] args)
{
    Foo[] array = new Foo[5];
    //populate array with values
    array.BinarySearch(.25, item => item.Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:54:54.540

最好的方法是自己动手。

```
public static class ListExtensions
{
        public static T BinarySearchFirst<T>(this IList<T> list, Func<T, int> predicate)
            where T : IComparable<T>
    {
        int min = 0;
        int max = list.Count;
        while (min < max)
        {
            int mid = (max + min) / 2;
            T midItem = list[mid];
            int comp = predicate(midItem);
            if (comp < 0)
            {
                min = mid + 1;
            }
            else if (comp > 0)
            {
                max = mid - 1;
            }
            else
            {
                return midItem;
            }
        }
        if (min == max &&
            predicate(list[min]) == 0)
        {
            return list[min];
        }
        throw new InvalidOperationException("Item not found");
    }
} 
```

用法：

```
var list = Enumerable.Range(1, 25).ToList();
var mid = list.Count / 2; //13

list.BinarySearchFirst(c => c >= 23 ? 0 : -1); // 23 
```

基于[LINQ 可以在集合排序时使用二进制搜索吗？](https://stackoverflow.com/questions/1766328/can-linq-use-binary-search-when-the-collection-is-ordered)

# ember.js - 如何在车把模板中呈现同一视图的多个实例

> ID：15098026
> 
> 赞同：0
> 
> 时间：2013-02-26T19:52:26.827
> 
> 标签：ember.js, handlebars.js

我正在尝试在单个车把模板中呈现 containerView 的多个实例。

[http://jsfiddle.net/skane/bZFB3/4/](http://jsfiddle.net/skane/bZFB3/4/)

```
<script type='text/x-handlebars'>
  {{ view "App.MyContainerView" }}
</script> 
```

只要我不添加引用同一视图的其他 {{ view }} 标签，上面的代码就可以正常工作。我不明白为什么......我附上了一个完整的小提琴来证明这个问题。（检查控制台以查看引发的错误）。

抛出的错误是“您所做的某事导致视图在呈现后但在插入 DOM 之前重新呈现”。

任何帮助/澄清将不胜感激！

史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:53:35.593

问题是您在容器视图定义中创建（）子视图，因此相同的子视图实例被（或试图）插入两次，一个用于容器视图的每个实例。将这些 create() 更改为 extend() 就可以了。

作为 extend() 块的一部分设置的属性位于原型上，因此它们在实例之间共享。在容器视图的情况下，如果容器视图在它期望找到子视图的位置找到一个类，则容器视图将实例化一个类，因此拥有该子视图的自己的实例，但如果原型上已经存在实例，它将尝试使用它，并且由于 containerview 的另一个实例认为它拥有该子视图实例并且已经插入它而崩溃。

# powershell - 如何找出当前安装的 webdeploy/msdeploy 版本？

> ID：15098030
> 
> 赞同：17
> 
> 时间：2013-02-26T19:52:41.250
> 
> 标签：powershell, msdeploy, webdeploy

我正在寻找类似 Powershell 脚本的东西来检查是否安装了 msdeploy，如果是，是什么版本

我考虑过检查“c:\Program Files\IIS”并在那里检查 MSDeploy 安装，但这总是保证是安装位置吗？

我需要这个在任何给定的服务器机器上工作

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T20:34:10.683

安装时`msdeploy`（无论在文件系统中的哪个位置），都会将其安装路径添加到注册表中；

```
HKLM\Software\Microsoft\IIS Extensions\MSDeploy\<version>\InstallPath 
```

及其版本信息；

```
HKLM\Software\Microsoft\IIS Extensions\MSDeploy\<version>\Version 
```

...`<version>`根据您安装的 WebDeploy 版本，当前为 1、2 或 3。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T20:25:37.003

取决于您认为的“版本”。通过文件夹名称“c:​​\Program Files\IIS\Microsoft Web Deploy V3”，版本为 3，但如果您运行 msdeploy.exe，则版本为 7.X

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-10T15:09:30.880

这就是我在 PowerShell 脚本中所做的：

```
$WebDeployInstalled = Get-WmiObject Win32_Product | ? {$_.Name -like '*Microsoft Web Deploy*'}
if ($WebDeployInstalled -eq $null)
{
    $msg = "Microsoft Web Deploy is not found on this machine."
    Write-host -BackgroundColor Red -ForegroundColor White $msg
    return
}
else
{
    $MSDeployPath = Get-ItemProperty "HKLM:\SOFTWARE\Microsoft\IIS Extensions\MSDeploy\*" | Select-Object InstallPath
    $MSDeployPath = $MSDeployPath.InstallPath
} 
```

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-11T23:58:04.743

您可以使用以下 PowerShell 代码段：

```
$installPath = $env:msdeployinstallpath
if(!$installPath){
    $keysToCheck = @('hklm:\SOFTWARE\Microsoft\IIS Extensions\MSDeploy\3','hklm:\SOFTWARE\Microsoft\IIS Extensions\MSDeploy\2','hklm:\SOFTWARE\Microsoft\IIS Extensions\MSDeploy\1')
    foreach($keyToCheck in $keysToCheck) {
        if(Test-Path $keyToCheck){
            $installPath = (Get-itemproperty $keyToCheck -Name InstallPath -ErrorAction SilentlyContinue | select -ExpandProperty InstallPath -ErrorAction SilentlyContinue)
        }
        if($installPath) {
            break;
        }
    }
} 
```

如果将其包装到脚本块中，则可以在远程会话中调用它。

# ruby-on-rails - 可以将表单添加到 rails 中的另一个模型视图

> ID：15098036
> 
> 赞同：0
> 
> 时间：2013-02-26T19:53:03.953
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我在 Rails 中构建了一个非常小的应用程序。这是一个简单的体重跟踪器应用程序。我创建了一个`User`具有注册页面的模型。一旦用户登录，他们就会被重定向到`user#show`视图。到目前为止，这是用户控制器：

```
class UsersController < ApplicationController
before_filter :authenticate_user!

def show
  @user = current_user
end

end 
```

我有 2 个其他模型，一个是`Weight`模型，另一个是`Goal`模型，我想要它，所以当用户注册时，他们会看到一个屏幕，要求他们输入当前体重和目标体重，然后将这些信息存储在和模型分别`Weight`与`Goal`登录的用户 ID 一起。

到目前为止，我已经能够向用户`show.html.erb`模板添加一个表单：

```
<%= form_for @user do |f| %>

  <%= f.fields_for :weight do |builder| %>
    <fieldset>
      <%= f.label :value, "Current weight" %><br />
      <%= f.text_field :value %><br />
    </fieldset>
  <% end %>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

它正确地呈现了表单，但是当我点击提交按钮时，它只是进入一个错误页面，说`Unknown action- The action 'update' could not be found for UsersController`. 我假设 iM 做错了什么，因为它应该尝试发送到创建操作。

有没有人可以帮助我回到正确的道路上，我非常喜欢rails。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:03:05.553

好吧，这与您的所有模型无关。这与您没有`update`在控制器中定义方法有关。

完成后，如果要嵌套模型，请查看[Accepts_nested_attributes_for 。](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

除此之外，`show`页面*通常*显示对象的只读。`edit`页面具有对象的可编辑形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:09:09.650

您正在使用`form_for`Rails 帮助程序并传递`@user`给它，因为它`@user`是一个持久模型（保存在数据库中），那么生成的表单将具有`/users/:id`与`PUT`方法的操作，因此请求将被发送到您的名为的操作`update`，`UsersController`看来您没有在你的`UsersController`

它应该类似于以下内容：

```
def update
  @user = Users.find(params[:id])
  if @user.update_attributes(params[:user])
  # do something if saving succeeds
  else
  # do something if saving fails
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T21:54:07.440

我相信，在搜索了具有类似问题的这个问题之后，缺少的不是更新而是编辑。

我知道这是一个旧线程，您可能已经解决了这个问题，但如果没有尝试添加：

```
def edit

    @user = User.find(params[:id])

end 
```

# android - android eclipse 项目导入打开

> ID：15098038
> 
> 赞同：0
> 
> 时间：2013-02-26T19:53:19.450
> 
> 标签：android, eclipse, import, project

我是正确的，如果我有一个现有的项目，我必须将它导入到 Eclipse 中？我打不开吗？

另外，要从 Eclipse 中删除项目，我一直在删除它。这是关闭项目的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:58:02.600

你是对的。您必须导入项目才能在现有工作空间中打开它，并且无需删除或删除项目-您只需右键单击该项目并关闭它即可。右键单击时会找到该选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:58:04.473

**导入项目**

如果它是一个有效的 Eclipse 项目（有`.classpath`和`.projectpath`），您可以将其重新导入 Eclipse。如果项目不在 Eclipse 中，您还必须重新导入才能使用它。

使用它来导入：`File -> Import -> Existing Projects into Workspace`

**关闭项目**

在 Eclipse 中，您可以使用项目上下文菜单关闭项目。右键单击项目并选择关闭项目：`Right hand click -> Close Project`

**删除项目**

eclipse中删除项目有两种方法。不删除项目文件的“软删除”和从系统中删除文件的“硬删除”。前者要求您在弹出的删除对话框中选择“删除项目文件...”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T19:58:21.417

导入：

单击`File`-> `Import...`->`Android`并选择`Existing Android Code Into Workspace`

从那里您为您的 Android 项目选择根目录。

而不是删除项目：

右键单击项目，然后单击`Close Project`

# pdf - Ps2pdf 错误？pdf 输出相对于 ps 输出旋转

> ID：15098041
> 
> 赞同：4
> 
> 时间：2013-02-26T19:53:32.513
> 
> 标签：pdf, pdf-generation, postscript, typesetting

我在使用 ps2pdf 将 postscript 转换为 pdf 时遇到了一个奇怪的问题。这是导致问题的最小代码片段。

```
/Times findfont 40 scalefont setfont
-1 1 scale
15 15 moveto (R) show 
```

这应该显示水平反射的字母。当我查看后记时，这就是我所看到的。但是，如果我采用上面的代码，请将其保存为文件“bad.ps”并在其上运行以下命令

```
ps2pdf bad.ps 
```

我得到一个*垂直*反射的字母 R。

我对其他字体也有同样的问题。但是当我只画线等时，问题就消失了。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T22:33:59.577

听起来PDF的方向是旋转的。默认情况下，PS2PDF 根据页面上的主要文本方向检测方向。要覆盖此行为，请使用

`-dAutoRotatePages=/None`

命令行选项。[这个选项在PS2PDF 命令行参考](http://ghostscript.com/doc/current/Ps2pdf.htm#Orientation)中有更详细的描述。

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中使用 Jquery File Upload 上传文件

> ID：15098042
> 
> 赞同：3
> 
> 时间：2013-02-26T19:53:32.867
> 
> 标签：asp.net-mvc-3, jquery, jquery-forms-plugin

有没有人有一个干净的建议来实例化这个 jquery 的有用库。

我需要提交文件并管理来自服务器的**Json响应。****我总是在Js**代码中没有得到任何 json 响应。我已经查看了一些提到它的文章，但代码不符合目的。情况是：我实现了提交并保存在数据库中，但 Json 响应从未到达。

提前致谢。

这是我的视图代码：

```
<script type="text/javascript">

$("#formUplImg").fileupload({
    dataType: "json",
    url:'@Url.Action("CreateJson","ProductImage")',
    done: function (e, data) {
        alert(data.StatusMessage);
    }
});

</script>

@using (Html.BeginForm("CreateJson", "ProductImage", FormMethod.Post, new { id = "formUplImg", enctype = "multipart/form-data", @class = "jqtransform" }))
{
@Html.ValidationSummary(true)

<div class="rowElem">
    <input type="file" id="Content" name="Content" />
</div>
<div class="rowElem">
    @Html.ValidationMessageFor(item => item.Content)
</div>

<div class="rowElem">@Html.JQueryUI().Button("Guardar imagen", ButtonElement.Button, ButtonType.Submit, new { id = "guardar_imagen" })</div>
} 
```

这是我的控制器操作代码：

```
 [HttpPost]
    public ContentResult CreateJson(UploadedFileInfo fileInfo)
    {
        try
        {
            if (fileInfo.Content == null)
                throw new Exception("Hubo problemas con el envío. Seleccione un archivo a subir");

            var file = new TempDocument
            {
                CreatedBy = User.Identity.Name,
                CreationTime = DateTime.Now,
                FileName = fileInfo.Content.FileName,
                MimeType = fileInfo.Content.ContentType,
                Size = fileInfo.Content.ContentLength,
                Content = new byte[fileInfo.Content.ContentLength]//Image content to save
            };

            fileInfo.Content.InputStream.Read(file.Content, 0, fileInfo.Content.ContentLength);//Reading image content into ProductImage object
            DocumentsManager.StorePendingDocuments.Add(file);
            DocumentsManager.SaveTempDocuments();//Store each document uploaded to: TempDocument Table

            TempData["SuccessMsg"] = "The image was saved successfully";

            var json = new JavaScriptSerializer().Serialize(new { Success = true, StatusMessage = "El objeto fue insertado correctamente" });
            return Content(json, "application/json");
        }
        catch (Exception exception)
        {
            TempData["ErrorMsg"] = exception.Message;
            var json = new JavaScriptSerializer().Serialize(new { Success = false, StatusMessage = exception.Message });
            return Content(json, "application/json");
        }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-14T11:03:27.780

使用 Action 的返回类型作为 ActionResult 并使用：

```
`return Json(new { Result = "Success" });` 
```

这样一来，您将获得包含结果值的 Json 对象。

# javascript - JQuery Post 数据操作

> ID：15098043
> 
> 赞同：0
> 
> 时间：2013-02-26T19:53:33.560
> 
> 标签：javascript, jquery, json, mobile, http-post

我正在尝试从表单提交中获取数据。这是代码。

```
function codeSubmission() {
$("#questionCodeForm").submit(function() {
    $.post("SubmitCode.php", $("#questionCodeForm").serialize()).done(function(data) {
        var questionName = data.questionName,
            options = data.options,
            pollingStatus = data.pollingStatus,
            codeExist = data.codeExist;

        alert(data);
        alert(data[1])
        alert(questionName);
        alert(options);

        if(codeExist == true) {
            $("#quizTitle").text("questionName");

            for(rowNum=1;rowNum<=5;rowNum++) {
                $("#checkbox-"+rowNum).val("Answer1");
                $("#checkbox"+rowNum+"label").text("Answer"+rowNum);
            } 

            $("#answerForm").slideDown(500);
        } else if(codeExist == false) {
            alert("This quiz code is invalid");
        }   
    });
    return false;   
});
return false;
} 
```

现在的问题是我无法将数据放入我想要的变量中。此外，我认为数据是作为字符串而不是数组发送的。这是用于调试目的的 alert(data) 的输出

> {"questionName":"Test","pollingStatus":"0","options": {"1":"Test7","2":"Test8","3":"Test9","4": "Test10","5":"Test11"},"codeExist":true}

现在 jsonencode 的上述输出似乎是正确的。但是在这里看到的问题是数据[0]的输出。

> {

所以我认为 jsonencode 作为字符串返回。我想要做的是访问像 questionName 这样的数据。我该怎么做呢？如果可以的话请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:00:12.883

您可以告诉 jQuery 使用“json”数据类型：

```
$.post('url', postData, function(returnData) {
  alert(returnData.question);
}, 'json'); 
```

请参阅[文档](http://api.jquery.com/jQuery.post/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T19:07:28.327

正如上面发布的 OhGodWhy 一样，您还必须在客户端解析 json。您可以使用

obj = jQuery.parseJSON(数据);

# java - Axis HTTP 与 Axis HTTPS 代理设置

> ID：15098044
> 
> 赞同：3
> 
> 时间：2013-02-26T19:53:37.873
> 
> 标签：java, web-services, proxy, axis, proxy-classes

我部署在 Weblogic Cluster 上的 Java 应用程序调用两个 Web 服务，如下所示。

• 它通过 HTTPS 向 Internet 上的外部应用程序发送 SOAP 客户端请求。（通过 Axis 1.4 创建的 Java 类）

• 此后，它通过 HTTP 将 SOAP 客户端请求发送到内部应用程序（存在于连接到我的 LAN 的其他节点上）。（通过 JAX-WS 创建的 Java 类：Jdeveloper 向导）

为了到达第一个 WS，我必须使用以下代码为 Web 服务客户端设置 https 代理设置：

```
System.setProperty("https.proxyHost", myProxyIP);  
System.setProperty("https.proxyPort", myProxyPort); 
```

而第二个 Web 服务不需要此代理设置，因为它们已经可以在网络上访问。

我的问题如下：

如果我调用第一个服务（具有代理设置的服务），然后调用另一个服务，则 Axis 客户端尝试使用相同的代理设置调用这些服务，即使我在我之前从系统属性中删除了代理设置即将通过写来inoke 2ns WS

```
 System.setProperty("http.proxySet", "false");  
    System.getProperties().remove("http.proxyHost");  
    System.getProperties().remove("http.proxyPort");  
    AxisProperties.setProperty("http.proxyHost", null);  
    AxisProperties.setProperty("http.proxyPort", null); 
```

我在某个地方读到使用 nonProxyHosts。但我很困惑是否应该写

```
System.setProperty("https.nonProxyHosts","secws.secondwsint.com"); 
```

或者

```
System.setProperty("http.nonProxyHosts","secws.secondwsint.com"); 
```

http ot https，因为需要绕过的是HTTP，而我们设置代理的是HTTPS。

我还在一篇博客中读到：

```
AxisProperties.setProperty("https.proxyHost", "bla1.bla1"); 
AxisProperties.setProperty("https.proxyPort", "8080"); 
AxisProperties.setProperty("https.nonProxyHosts", "secws.secondwsint.com"); 
```

但再次混淆使用 https.nonProxyHosts 或 http.nonProxyHosts

建议在我的 java 程序中使用哪一个，`System.setProperty`或者`AxisProperties.setProperty`重要的是，我应该使用 http ot https 来编写该代码行此外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:20:31.637

您可以同时使用两者。但是 System.setProperty() 也会影响 VM 中其他与 HTTP 相关的 java 函数，而 AxisProperties 只影响 Axis WS 客户端。所以我会选择 AxisProperties.setProperty()。

http 代理参数缓存机制的 Axis[问题](https://issues.apache.org/jira/browse/AXIS-2295)存在一个错误。基本上，该实现缓存旧的代理设置并且不读取新设置。所以即使你使用`AxisProperties.setProperty()`方法，它仍然不起作用。我不确定它是否适用于 Axis 1.4，因为 JIRA 不提供受影响的版本号。

我也相信你应该设置 http.nonProxyHosts 因为你的内部 WS 使用 HTTP，而不是 HTTPS。但是在另一篇文章中，您提到您同时设置了两者并且它不起作用。还是这样吗？

# c# - 使用 SendMessage 插入文本

> ID：15098045
> 
> 赞同：0
> 
> 时间：2013-02-26T19:53:45.930
> 
> 标签：c#, winapi

当我尝试将文本粘贴到另一个程序的文本框中时，插入了文本，但程序无法识别它。

```
 [DllImport("user32.dll", CharSet = CharSet.Auto)]
 static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);
 const uint WM_SETTEXT = 0x000C;

 IntPtr text = Marshal.StringToCoTaskMemUni("100");
 IntPtr thisWindow = FindWindow(null, "AnotherWindow");
 IntPtr handle = FindWindowEx(thisWindow, IntPtr.Zero, "AnotherTextBox", null);
 SendMessage(handle, WM_SETTEXT, IntPtr.Zero, text);
 Marshal.FreeCoTaskMem(text); 
```

也许我应该向父母发送一条文本框已更新的消息？像这样：

```
 //Wrong code, because I do not know how correctly send a message
 SendMessage(handle, WM_COMMAND, EM_SETMODIFY, handle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:35:34.397

再次...帮助来自另一个站点

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static extern IntPtr SendMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);
//...
IntPtr boo = new IntPtr(1);
SendMessage(handle, EM_SETMODIFY, boo, IntPtr.Zero); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:15:10.887

您将希望执行以下操作：

```
PostMessage(GetParent(handle), WM_COMMAND, MAKEWPARAM(GetWindowLong(handle, GWL_ID), EN_CHANGE), (LPARAM)handle); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-01T10:11:18.743

一些文本框已被设置，因此您不能立即通过 WM_SETTEXT 设置文本，尤其是那些接受数字并根据这些数字执行计算的文本框。我有类似的问题并通过下面的代码解决了。我应用了 WM_PASTE、EM_REPLACESEL 来克服它。

```
SendMessage(child, WM_SETFOCUS,0 , IntPtr.Zero);  // go to text box
System.Windows.Forms.Clipboard.SetText("1");   // set something in clipboard. it does not matter what it is.
SendMessage(child, WM_PASTE, 0, IntPtr.Zero); // paste to get control of text box
SendMessage(child, WM_SETTEXT, IntPtr.Zero, string.Empty);  // clear textbox to insert your desired text.
SendMessage(child, EM_REPLACESEL, IntPtr.Zero, "your text"); // insert your desired text. i inserted digits as text. 
```

您首先需要导入 user32.dll 文件：

```
[DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = false)]
    private static extern int SendMessage(IntPtr hWnd, uint msg, IntPtr wParam, string lParam);

    [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = false)]
    private static extern int SendMessage(IntPtr hWnd, uint msg,int  wParam, IntPtr lParam); 
```

# vba - 如何获取满足条件的行号

> ID：15098046
> 
> 赞同：0
> 
> 时间：2013-02-26T19:53:48.363
> 
> 标签：vba, excel

我在 Excel 工作表中有一个包含三列的表格。第一列包含人名，第二列包含公司名称，第三列包含城市名称。

```
Name    Company City
abc     mn      C1
asd     th      C2
qwe     mn      C1
aqw     kj      C1
ert     mn      C2 
```

在这里，我在 Excel 2007/2010 中编写了一个宏来获取为公司“mn”工作且位于“C1”城市的人的姓名。

谁能帮帮我？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:13:45.737

我认为按公司然后按城市对区域进行排序是发现员工的最简单方法。但是这样的事情也应该起作用：

```
Sub SearchEmployeeByCompanyAndCity(company As String, city As String, start As Range)
    Dim i, j As Integer
    i = 1
    j = 1
    While (start.Cells(i, j).Value <> "")
        If start.Cells(i, j + 1).Value = company And start.Cells(i, j + 2).Value = city Then
            MsgBox start.Cells(i, j)
        End If
        i = i + 1
    Wend
End Sub

Sub Test()
    SearchEmployeeByCompanyAndCity "mn", "C1", Worksheets(1).Range("A1")
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:17:42.057

如果表格在这样的右上角`Sheet1`：

![在此处输入图像描述](../Images/f22e506d8019490aedf9f0968961a099.png)

像这样的 a 宏就足够了 - 但还有很多其他方法可以做到这一点 - 最简单的是 a `Pivot Table`！

```
Option Explicit

Sub FINDemployees()

With Excel.ThisWorkbook.Sheets("Sheet1")
    Dim cell
    For Each cell In .Range(.Cells(2, 1), Cells(.Rows.Count, 1).End(Excel.xlUp))
        If LCase(cell(1, 2)) = "mn" And LCase(cell(1, 3)) = "c1" Then
            MsgBox cell.Value
        End If
    Next
End With
End Sub 
```

# c - 带有二维数组参数的c中的函数调用和函数原型

> ID：15098047
> 
> 赞同：5
> 
> 时间：2013-02-26T19:53:49.863
> 
> 标签：c, arrays, syntax, function-prototypes

```
void setup_map (int *map); <--- prototype

int row, col;  <-- global variables

some main 
{
  //get number of rows and cols from user
  int map[rows][cols]; //create map here because another function uses it
  setup_map (map[row][col]);
}

void setup_map (int map[row][col])
{
  loop through and set up map
} 
```

我的问题是我无法完全正确地制作原型我希望某个地方可以向我解释我的原型需要是什么？我刚刚开始学习指针并很好地理解了这个概念，只是从未使用过二维数组作为参数。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:57:05.597

正确的原型包括：

```
void setup_map(int map[ROWS][COLS]);
void setup_map(int map[][COLS]);
void setup_map(int (*map)[COLS]); 
```

并称之为：

```
setup_map(map); 
```

但是请注意，行数和列数需要是编译时常量才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:05:57.067

这是一个例子

```
#include <stdio.h>

void print_matrix(int x, int y, int matrix[][x])
{
    int i, j;

    for (i = 0; i < y; ++i) {
        for (j = 0; j < x; ++j) {
            printf("[%i]", matrix[i][j]);
        }
        putchar('\n');
    }
}

int main()
{
    int matrix[][2] = {{0, 1}, {2, 3}};
    print_matrix(2, 2, matrix);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T19:59:02.070

有几件事是错误的。

首先错了，你以错误的方式调用你的函数。

您不应该调用`setup_map (map[row][col]);`而是应该调用`setup_map (map);`，因为数组名称是一个指针，数组名称加上 [] 运算符会获取内存上特定位置的内容。

然后你需要让你的原型和你的定义看起来一样，因为编译器会使用原型（不是定义，如果是之后的）来解析你的代码是否正确，如果你的原型错误，就会得出错误的结论。

现在在原型本身：

如果你真的需要你的函数期望一个固定大小的数组，那么你必须使用编译时常量。

像这样：

`void setup_map( int map[23][9]);`

或这个：

```
#define ROWS = 23;
#define COLS = 9;
void setup_map( int map[ROWS][COLS] ); 
```

请记住，数组的名称是一个指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-03T11:19:16.297

您必须在以您的方式清除数组时提供整数值。

如：

```
int map[5][10]; 
```

如果您想将这些值作为 row 和 col，首先您必须为 row 和 cols 定义宏。

宏：

```
#define ROW 5
#define COL 10 
```

main() 中的声明：

```
int map[ROW][COL]; 
```

如果您打算从用户那里获取 row 和 col 值，事情可能会变得有点复杂，因为您必须使用 malloc() 和 free() 函数进行动态内存分配。

```
int main()
{
    int *map;
    int row, col;

    printf("enter row and col value:");
    scanf("%d %d", &row, &col);

    map = (int *) malloc(row * col * sizeof(int));

    //use the array

    free(map);
    return 0;
} 
```

示例函数原型：

```
void setMap(int *map, int row, int col); 
```

在进行功能实现时使用您的功能原型。只需添加大括号并开始填写。

# mysql - #1005 - 通过 FOREIGN KEY 连接表时无法在 ALTER TABLE 上创建表

> ID：15098048
> 
> 赞同：1
> 
> 时间：2013-02-26T19:53:51.343
> 
> 标签：mysql, sql, database, database-design

我正在做家庭作业。我必须为音像店建立一个数据库。以下所有作品：

```
CREATE TABLE Stock
(
PKStock_ID VARCHAR(8) NOT NULL,
FKTitle VARCHAR(8) NOT NULL,
NoOfDVD INT(10) NOT NULL,
NoOfVHS INT(10) NOT NULL,
PRIMARY KEY (PKStock_ID)
);

CREATE TABLE Inventory
(
PKUnique_ID VARCHAR(8) NOT NULL,
DistributorSerialNo VARCHAR(8) NOT NULL,
Distributor_ID VARCHAR(8) NOT NULL,
FKTitle_ID VARCHAR(8) NOT NULL,
InStock CHAR(1) NOT NULL, 
DateOut TIMESTAMP,
DateBack TIMESTAMP,
Customer_ID VARCHAR(8) NOT NULL,
Rental_Price DECIMAL(4,2) NOT NULL,
PRIMARY KEY (PKUnique_ID)
);

CREATE TABLE Movie
(
PKTitle_ID VARCHAR(8) NOT NULL,
FKTitle_ID VARCHAR(8) NOT NULL,
Title VARCHAR(30),
Genre VARCHAR(8),
YearReleased INT,
Length INT,
PRIMARY KEY (PKTitle_ID)
);

CREATE TABLE Actors
(
PKActor_ID VARCHAR(8) NOT NULL,
FKActor_ID VARCHAR(8) NOT NULL, 
Actors VARCHAR(30),
PRIMARY KEY (PKActor_ID)
);

CREATE TABLE Awards
(
PKAward_ID VARCHAR(8) NOT NULL,
FKAward_ID VARCHAR(8) NOT NULL,
Awards VARCHAR(30),
PRIMARY KEY (PKAward_ID)
);

CREATE TABLE Directors
(
PKDirector_ID VARCHAR(8) NOT NULL,
FKDirector_ID VARCHAR(8) NOT NULL,
Directors VARCHAR(30),
PRIMARY KEY (PKDirector_ID)
);

CREATE TABLE ElectronicCatalogue
(
PKElectronicCatalogue VARCHAR(8) NOT NULL,
FKDistributor_ID VARCHAR(8) NOT NULL,
DistributorSerialNo VARCHAR(8) NOT NULL,
Price DECIMAL(6,2) NOT NULL,
PRIMARY KEY (PKElectronicCatalogue)
);

CREATE TABLE Distributors
(
PKDistributor_ID VARCHAR(8) NOT NULL,
FKDistributor_ID VARCHAR(8) NOT NULL,
NameOfDistributer VARCHAR(30) NOT NULL,
Horror CHAR(1) NOT NULL, 
Drama CHAR(1) NOT NULL, 
Comedy CHAR(1) NOT NULL, 
Action CHAR(1) NOT NULL, 
Thrillers CHAR(1) NOT NULL,
PRIMARY KEY (PKDistributor_ID)
);

CREATE TABLE Customers
(
PKCustomer_ID VARCHAR(8) NOT NULL,
FKUnique_ID VARCHAR(8) NOT NULL,
Name VARCHAR(30),
Address VARCHAR(100),
Phone INT NOT NULL,
PRIMARY KEY (PKCustomer_ID)
);

CREATE TABLE Fees
(
PKFee_ID VARCHAR(8) NOT NULL,
FK_ID VARCHAR(8) NOT NULL,
Damages DECIMAL(10,2) NOT NULL,
Late DECIMAL(10,2) NOT NULL,
PRIMARY KEY (PKFee_ID)
);

ALTER TABLE Stock
ADD FOREIGN KEY (FKTitle)
REFERENCES Inventory(PKUnique_ID);

ALTER TABLE Movie
ADD FOREIGN KEY (FKTitle_ID)
REFERENCES Stock (PKStock_ID);

ALTER TABLE Actors
ADD FOREIGN KEY (FKActor_ID)
REFERENCES Movie (PKTitle_ID);

ALTER TABLE Awards
ADD FOREIGN KEY (FKAward_ID)
REFERENCES Movie (PKTitle_ID);

ALTER TABLE Directors
ADD FOREIGN KEY (FKDirector_ID)
REFERENCES Movie (PKTitle_ID);

ALTER TABLE ElectronicCatalogue
ADD FOREIGN KEY (FKDistributor_ID)
REFERENCES Inventory (PKUnique_ID);

ALTER TABLE Distributors
ADD FOREIGN KEY (FKDistributor_ID)
REFERENCES ElectronicCatalogue (PKElectronicCatalogue); 
```

接下来我想将 Inventory 表连接到 customers 表。当我执行以下操作时：

```
ALTER TABLE Customers
ADD FOREIGN KEY (FKUnique_ID)
REFERENCES Inventory (Customer_ID); 
```

我收到此错误：

```
#1005 - Can't create table 'mm.#sql-9f69_110' (errno: 150) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T20:13:23.213

外键应指向唯一列（主键或唯一）。你`Inventory (Customer_ID)`的不是唯一的。

我认为您正在尝试：

```
ALTER TABLE Inventory
ADD CONSTRAINT fk1_Inv FOREIGN KEY (Customer_ID)
REFERENCES Customers (PKCustomer_ID); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-26T20:04:35.997

不知道为什么你没有得到完整的消息，但是有一个与 MySQL 捆绑在一起的命令行工具，它提供了关于这样的神秘错误消息的更多信息（或者你可以只谷歌搜索错误代码）：

```
C:>perror 150
MySQL error code 150: Foreign key constraint is incorrectly formed 
```

如果您有`SUPER`权限，您可以使用此查询获取更多详细信息：

```
show engine innodb status 
```

在这种情况下，您会看到：

```
LATEST FOREIGN KEY ERROR
------------------------
130226 21:00:25 Error in foreign key constraint of table test/#sql-1d98_1:
FOREIGN KEY (FKUnique_ID)
REFERENCES Inventory (Customer_ID):
Cannot find an index in the referenced table where the
referenced columns appear as the first columns, or column types
in the table and the referenced table do not match for constraint.
Note that the internal storage type of ENUM and SET changed in
tables created with >= InnoDB-4.1.12, and such columns in old tables
cannot be referenced by such columns in new tables.
See http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html
for correct foreign key definition. 
```

因此，您缺少解释的索引。

**编辑：**正如其他答案指出的那样，如果没有索引，那是因为您链接到错误的列。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T20:13:54.010

正如 Álvaro G. Vicario 所说，您缺少索引，这是因为您没有正确使用外键。

```
ALTER TABLE Customers
ADD FOREIGN KEY (FKUnique_ID)
REFERENCES Inventory (Customer_ID); 
```

这应该是：

```
ALTER TABLE Inventory
ADD FOREIGN KEY (Customer_ID)
REFERENCES Customer(PKCustomer_ID); 
```

外键检查 Inventory 表中的客户是否确实存在于 Customers 表中。因此，这里的 Inventory 也是您要添加外键的表，它在 Customer 表的主键中引用。

您要做的是引用 Inventory 中的 Customer_ID，它只是一个 VARCHAR(8) 列，而不是主键（索引）。

您还应该仔细检查您的其他更改语句。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-07T01:00:39.557

事实证明，您在这些表之间有不同的排序规则设置。就我而言，我们有 latin_swedish_ci 和 utf8_general_ci

# python - Google App Engine 开发服务器随机 (?) 减速

> ID：15098051
> 
> 赞同：2
> 
> 时间：2013-02-26T19:54:24.043
> 
> 标签：python, google-app-engine

我正在做一个可能最终需要扩展的小型 Web 应用程序，并且对 Google App Engine 感到好奇。但是，我遇到了开发服务器 (dev_appserver.py) 的问题：

看似随机的，请求将需要 20-30 秒才能完成，即使没有硬计算或数据使用。一个请求可能非常快，即使在更改了静态文件的脚本之后，但下一个请求可能非常慢。如果盒子被放置一段时间没有活动，它似乎会更系统地发生，但并非总是如此。

在此期间 CPU 和磁盘访问量较低。我的应用程序中也没有分配数据。

有谁知道什么会导致这种随机减速？我已经谷歌搜索并在这里搜索，但需要一些指针../：我也尝试过 --clear_datastore 和 --use_sqlite，但后者给出了错误：*DatabaseError('file is encrypted or is not a database' ,)*。寻找该文件，它似乎不存在。

我使用的是 Windows 8、python 2.7 和最新版本的 App Engine SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:27:57.110

别担心。它（IIRC）使用真实事物的“仿真”将整个数据库（数据存储）保存在内存中。还有很多其他问题在部署时是看不到的。

我建议您的**硬盘驱动器正在减速，您看到的延迟是需要几秒钟才能重新唤醒。**

如果这成为问题，请使用已部署的版本进行开发。它没有那么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:17:12.940

这是否发生在所有网络浏览器中？在多个浏览器中同时查看本地应用程序引擎开发站点以进行跨浏览器测试时，我遇到了这样的问题。然后，IE 会遇到困难，请求的时间与您描述的一样长。

如果这是问题，我发现 IETester 没有出现问题。

对不起，如果它不相关，但我认为这是值得一提的，以防万一。

# objective-c - 在objective-c中使用compare方法比较对象

> ID：15098056
> 
> 赞同：0
> 
> 时间：2013-02-26T19:54:37.533
> 
> 标签：objective-c

如果我要尝试在objective-c中比较两个对象，我相信从IOS 6开始可以只使用普通运算符，例如==（下面的证明），但是，我想知道如何做到这一点- 比较方法。

据我所知，比较方法以这种方式起作用：

```
if ([objOne compare:objTwo] == NSOrderedAscending){
    // objOne is greater 
```

首先，这是正确的吗？其次，还有哪些比较方法，即NSOrderedAscending？

![在此处输入图像描述](../Images/46ca6af4a27af6b26e7582e8a05a6175.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T19:57:21.307

类的编写者负责比较，这意味着您必须定义两个对象何时相等。

这是通过定义一个方法来完成的，该方法`compare:`应该返回 NSOrderedAscending、NSOrderedDescending、NSOrderedSame

从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html#//apple_ref/c/tdef/NSComparisonResult)

> **NSComparisonResult**
> 
> 这些常量用于指示请求中的项目是如何排序的。
> 
> ```
> enum {
>    NSOrderedAscending = -1,
>    NSOrderedSame,
>    NSOrderedDescending
> };
> typedef NSInteger NSComparisonResult; 
> ```

请注意，没有什么能阻止您创建返回这些 NSComparisionResults 的其他方法。iE NSString 有`compare:`和`caseInsensitiveCompare:`

`==`将只检查身份：如果指针相同，这将返回 true，而如果存在不同的对象但相同属性的定义相同，它仍将返回 false。

* * *

来自**[NSComparisonMethods 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSComparisonMethods_Protocol/Reference/Reference.html)**

> NSObject 为其中许多方法提供的默认实现适用于实现单个比较方法的对象，其选择器、签名和描述与以下内容匹配：
> 
> ```
> - (NSComparisonResult)compare:(id)object; 
> ```
> 
> 如果接收者小于对象，则此方法应返回 NSOrderedAscending，如果接收者大于对象，则返回 NSOrderedDescending，如果接收者和对象相等，则返回 NSOrderedSame。例如，NSString 并没有实现这个非正式协议中声明的大部分方法，但是 NSString 对象仍然可以正确处理符合该协议的消息，因为 NSString 实现了满足必要要求的 compare: 方法。Cocoa 还包括适当的 compare: NSDate、NSDecimalNumber 和 NSValue 类的方法实现。

这意味着如果你提供了一个`-compare:`方法，你也可以使用`-isEqual:`.

```
if ([objOne isEqual:objTwo]){ //… 
```

* * *

![在此处输入图像描述](../Images/43883f2b6766dd7725a54197b8552f20.png)

# magento - Magento - 防止浏览而不重写

> ID：15098064
> 
> 赞同：0
> 
> 时间：2013-02-26T19:55:15.660
> 
> 标签：magento, url-rewriting, ddos

我对某人（使用许多 IP 地址）浏览我的商店有疑问：

```
example.com/catalog/category/view/id/$i 
```

我打开了 URL 重写，所以通常的人类浏览看起来“友好”：

```
example.com/category_name.html 
```

因此，问题是 - 如何防止使用“旧”（未重写）网址浏览商店，只允许“友好”网址？

这非常重要，因为它使用了数百个线程，这导致商店工作非常缓慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:19:36.913

由于有许多随机 IP 地址，显然您不能只阻止来自单个或一小组地址的访问。您可能需要实现一些以某种方式唯一标识此爬虫的日志记录（可能通过浏览器代理，或者可能通过巧妙地使用 Modernizr javascript 库）。

一旦你能够区分这个爬虫的一些唯一标识符，你可能会使用一个规则`.htaccess`（如果它是一个用户代理的东西）来重定向或以其他方式阻止它们消耗你的服务器的魅力。

这个 SO question 提供了有关用户代理规则的详细信息。

[使用 htaccess 阻止特殊目录的所有机器人/爬虫/蜘蛛](https://stackoverflow.com/questions/10735766/block-all-bots-crawlers-spiders-for-a-special-directory-with-htaccess)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:19:55.927

如果蜘蛛爬取给定模式的所有 url：

```
example.com/catalog/category/view/id/$i 
```

那么你可以在`.htaccess`. 重写是在内部进行的，`category.html -> /catalog/category/view/id/$i`因此您只能阻止机器人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:22:00.337

一旦重写在那里......他们就在那里。出于多种原因，它们存储在 Mage 数据库中。一种是爬虫，例如爬取您的网站的爬虫。另一个是可能将旧页面添加为书签的用户。个人已经想出了许多方法来清理和清理您的重定向[（谷歌）](https://www.google.com/#hl=en&safe=off&output=search&sclient=psy-ab&q=magento+cleanup+url+rewrite&oq=magento+clean+rewrite+&fp=391df00389b752a5) ......但就目前而言，在 Magento 中，一旦他们在那里，使用 Magento 就不容易管理它们。

我可能会建议生成一个新的`site map`并将其提交给影响您网站的爬虫。这个爬虫不仅会爬取它不需要的大量页面，还会看到重复的内容（bad ju ju）。

# javascript - 如何仅对二维数组中的一列进行排序

> ID：15098065
> 
> 赞同：1
> 
> 时间：2013-02-26T19:55:17.977
> 
> 标签：javascript, multidimensional-array, 2d, sorting

我有一个名为 dateTime[] 的二维数组。dateTime[count][0] 包含未来的日期时间，而 dateTime[count][1] 包含一个 4 位数的值，例如 1234 之类的。我正在尝试按升序对作为 dateTime[count][0] 的第 0 列进行排序。（即，根据最近的日期时间对二维数组的第 0 列进行排序）

假设我的 javascript 2d 数组是这样的：

```
dateTime[0][0] = 2/26/2013 11:41AM; dateTime[0][1] = 1234;
dateTime[1][0] = 2/26/2013 10:41PM; dateTime[1][1] = 4567;
dateTime[2][0] = 2/26/2013 8:41AM; dateTime[2][1] = 7891;
dateTime[3][0] = 3/26/2013 8:41AM; dateTime[3][1] = 2345; 
```

我只是这样写的，实际上这就是我将值插入到`dateTime[count][0] ; = new Date(x*1000);`x 是 unix time()的位置

我希望数组在排序后如何看待：

```
dateTime[0][0] = 2/26/2013 8:41AM; dateTime[0][1] = 7891;
dateTime[1][0] = 2/26/2013 11:41AM; dateTime[1][0] = 1234;
dateTime[2][0] = 2/26/2013 10:41PM; dateTime[2][1] = 4567;
dateTime[3][0] = 3/26/2013 8:41AM; dateTime[3][1] = 2345; 
```

请让我知道如何用更少的代码解决这个问题。

谢谢。:)

这是我到目前为止所做的（我还没有对数组进行排序，这里的 dateTime 也称为计时器）

```
function checkConfirm() {
        var temp = timers[0][0];
        var timeDiv = timers[0][1];
        for (var i=0;i<timers.length;i++) {
            if (timers[i][0] <= temp) { temp = timers[i][0]; timeDiv = timers[i][1]; }
        }
        if (timers.length > 0 ){ candidate(temp,timeDiv); }

    }

    function candidate(x,y) {
        setInterval(function () {
            var theDate = new Date(x*1000); 
            var now = new Date(); 
            if ( (now.getFullYear() === theDate.getFullYear()) && (now.getMonth() === theDate.getMonth()) ) {
                if ( (now.getDate() === theDate.getDate()) && (now.getHours() === theDate.getHours()) ) {
                    if ( now.getMinutes() === theDate.getMinutes() && (now.getSeconds() === theDate.getSeconds()) ) { alert("its time"); }
                }
            }
        }, 10);
    } 
```

最后，我想在每次当前时间与数组中的时间匹配时提醒用户。这就是我试图解决问题的方法，但这是完全错误的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:00:51.520

使用该`.sort()`功能，并比较日期。

```
// dateTime is the array we want to sort
dateTime.sort(function(a,b){
    // each value in this array is an array
    // the 0th position has what we want to sort on

    // Date objects are represented as a timestamp when converted to numbers
    return a[0] - b[0];
}); 
```

演示：http: [//jsfiddle.net/Ff3pd/](http://jsfiddle.net/Ff3pd/)

# c# - RichTextBox 滚动条闪烁

> ID：15098067
> 
> 赞同：0
> 
> 时间：2013-02-26T19:55:25.047
> 
> 标签：c#, winforms, richtextbox

我在 Windows 窗体中遇到了 RichTextBox 问题。

我启用了垂直滚动，一切正常，除非我使用鼠标拖动滚动条。当我这样做时，滚动条会保持原位并闪烁，直到我释放拖动。当我使用鼠标上的滚轮或单击向上/向下箭头键时，该栏会定期滚动而不会闪烁。

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T14:21:38.057

万一其他人遇到这个问题，我在这里找到了解决方案：[http ://www.angryhacker.com/blog/archive/2010/07/21/how-to-get-rid-of-flicker-on-windows -forms-applications.aspx](http://www.angryhacker.com/blog/archive/2010/07/21/how-to-get-rid-of-flicker-on-windows-forms-applications.aspx)

本质上，需要添加到 form.cs 文件的所有内容是：

```
int originalExStyle = -1;
bool enableFormLevelDoubleBuffering = true;

protected override CreateParams CreateParams
{
    get
    {
        if (originalExStyle == -1)
            originalExStyle = base.CreateParams.ExStyle;

        CreateParams cp = base.CreateParams;
        if (enableFormLevelDoubleBuffering)
            cp.ExStyle |= 0x02000000;   // WS_EX_COMPOSITED
        else
            cp.ExStyle = originalExStyle;

        return cp;
    }
}

private void TurnOffFormLevelDoubleBuffering()
{
    enableFormLevelDoubleBuffering = false;
    this.MaximizeBox = true;
}

private void frmMain_Shown(object sender, EventArgs e)
{
    TurnOffFormLevelDoubleBuffering();
} 
```

# html - 滚动覆盖 div 而不滚动整个页面

> ID：15098069
> 
> 赞同：8
> 
> 时间：2013-02-26T19:55:35.987
> 
> 标签：html, css

我有一个主页，上面有一些内容。然后我会弹出一个比屏幕本身更长的模式，所以我必须滚动才能看到它。我需要对我的 CSS 做什么才能只制作模态`div`滚动而不是整个页面？

这是模态的CSS

```
#overlay {
    visibility: hidden;
    position: absolute;
    left: 45%;
    width:auto;
    border:1px solid #A17E13;
    height:auto;
    text-align:left;
    z-index: 1000; 
}
#overlay div {
    background-color:#FCFBEC;
} 
```

这是 HTML：

```
<html><body>
    <div>main page</div>
    <div id="overlay">
    <div>
        <div>
             <asp:Label ID="test">Text for modal here</asp:Label>
        </div>
    </div>
    </div>
</body></html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:32:55.033

除了模态div，整个页面都不能滚动吗？如果是这样，您可以尝试位置：固定；在页面上。模态必须在位置之外：绝对；

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#overlay {
    /*visibility: hidden;*/
    position: fixed;
    left: 45%;
    width:auto;
    border:1px solid #A17E13;
    height:900px;
    text-align:left;
    background-color:orange;
}
.scroller {
    height:3000px;
    width:400px;
    background-color:green;
}
</style>
</head>
<body>
    <div id="overlay">
        this is not moving
    </div>

    <div>
        <div class="scroller">
             <asp:Label ID="test">This is moving if big enough</asp:Label>
        </div>
    </div>
</body>
</html> 
```

[在这里提琴](http://jsfiddle.net/RL6v8/)

# c# - 如何使用 LINQ 查找 DataGridView 行？

> ID：15098071
> 
> 赞同：20
> 
> 时间：2013-02-26T19:55:48.920
> 
> 标签：c#, winforms, linq, datagridview

有没有办法使用 LINQ 样式查询来查找 DataGridView 行？我试图找到绑定到特定对象的那个并突出显示它。

```
MyDatagrid.Rows.FirstOrDefault(r => r.DataBoundItem == myItem).Selected = true; 
```

> 错误 1“System.Windows.Forms.DataGridViewRowCollection”不包含“FirstOrDefault”的定义，并且找不到接受“System.Windows.Forms.DataGridViewRowCollection”类型的第一个参数的扩展方法“FirstOrDefault”（您是否缺少使用指令还是程序集引用？）

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-26T19:57:12.397

您需要转换为，`IEnumerable<DataGridViewRow>`因为`DataGridViewRowCollection`只有实现`IEnumerable`：

```
MyDatagrid.Rows
    .Cast<DataGridViewRow>()
    .FirstOrDefault(r => r.DataBoundItem == myItem).Selected = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-27T14:04:32.147

对于那些来这里寻找 VB 版本的人，Lee 的回答是：

```
MyDatagrid.Rows.Cast(Of DataGridViewRow)().FirstOrDefault(Function(r) r.DataBoundItem Is myItem).Selected = True 
```

此外，如果您像我一样，并且正在使用它`DataGridViewRow`从您的绑定`DataTable.DataRow`( `DataGridView.DataSource = DataTable`) 中找到您的，那么您可以像这样访问它：

```
Dim MyDataRowSearch() As DataRow = MyDataTable.Select("SomeColumn = SomeValue")
If MyDataRowSearch.Count = 1 Then
  MyDataGrid.Rows.Cast(Of DataGridViewRow)().FirstOrDefault(Function(r) DirectCast(r.DataBoundItem, DataRowView).Row Is MyDataRowSearch(0)).Selected = True
End If 
```

`DataGridView`这比循环查找匹配值要高效得多。

# assembly - 如何将 IA32 'cmp' 指令转换为 Y86？

> ID：15098073
> 
> 赞同：2
> 
> 时间：2013-02-26T19:55:53.413
> 
> 标签：assembly, x86, cmp, y86

**IA32**至**Y86**

**ATT大会**

我有以下 IA32 汇编代码：

```
Bubble:
.LFB0:
    pushl   %esi
    pushl   %ebx
    movl    16(%esp), %esi
    movl    12(%esp), %edx
    subl    $1, %esi
    andl    %esi, %esi
    jle .L1
.L7:
    xorl    %eax, %eax
.L5:
    movl    4(%edx,%eax,4), %ecx
    movl    (%edx,%eax,4), %ebx
    cmpl    %ebx, %ecx
    jge .L4
    movl    %ebx, 4(%edx,%eax,4)
    movl    %ecx, (%edx,%eax,4)
.L4:  
    addl    $1, %eax
    cmpl    %eax, %esi
    jg  .L5
    subl    $1, %esi
    jne .L7
.L1: 
    popl    %ebx
    popl    %esi
    ret 
```

我正在尝试将其转换为 Y86 汇编代码。我在翻译比较指令时遇到问题：

```
 cmpl    %ebx, %ecx 
```

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-26T20:01:45.623

Y86好像没有`cmp`指令。但是，它有`sub`和。`push``pop`

所以`cmpl %ebx, %ecx`可以转换成如下代码：

```
pushl %ecx
subl  %ebx, %ecx
popl  %ecx 
```

`cmp`和 完全一样`sub`，不同的是`cmp`不存储结果，只更新标志。所以`cmp`总是可以用`push`, `sub`,代替`pop`（如果堆栈中有足够的空间）。

# angularjs - AngularJS $watch 迭代器

> ID：15098075
> 
> 赞同：1
> 
> 时间：2013-02-26T19:55:58.733
> 
> 标签：angularjs

有没有办法访问角度 $watch 迭代器？

我想通过这样的 $watch 捕获第一次迭代：

```
scope.$watch("var", myFunc);

myFunc() {
    if (iterator === 1) ...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:14:15.203

您的 watch 函数将获得两个参数，“var”的当前值和前一个值。当您的手表第一次触发时，两者都是相同的，因此您可以检查它是否是第一次被调用。像这样：

```
var myFunc = function(value, oldValue) {
    if (value === oldValue) {
        // First run
    }
} 
```

# vim - ++ 在 vi m 命令中

> ID：15098084
> 
> 赞同：4
> 
> 时间：2013-02-26T19:56:35.580
> 
> 标签：vim, vi

`++`在 vim中是什么意思？

例如，`:e ++ff=dos`。我理解`e`，`ff=dos`只是不确定如何`++`适应那里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T19:59:36.237

`:h ++opt`详情

```
The [++opt] argument can be used to force the value of 'fileformat',
'fileencoding' or 'binary' to a value for one command, and to specify the
behavior for bad characters.  The form is: >
    ++{optname}
Or: >
    ++{optname}={value}

Where {optname} is one of:      *++ff* *++enc* *++bin* *++nobin* *++edit*
    ff     or  fileformat   overrides 'fileformat'
    enc    or  encoding     overrides 'fileencoding'
    bin    or  binary       sets 'binary'
    nobin  or  nobinary     resets 'binary'
    bad             specifies behavior for bad characters
    edit            for |:read| only: keep option values as if editing
                a file 
```

你问题中的cmd：

```
:e ++ff=dos 
```

意味着再次编辑同一个文件，文件格式设置为“dos”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T20:03:16.460

`++`用于强制命令的值，如`ff`,`enc`和其他。

使用`:h ++`自己在 vim 帮助中查找！

# r - 有没有办法在 R 中右对齐基本（历史）图的主标题？

> ID：15098086
> 
> 赞同：3
> 
> 时间：2013-02-26T19:56:40.490
> 
> 标签：r, plot

我试图让情节的标题与情节的最右边部分对齐。

为了澄清，在下面的示例中，绘图的标题与中心对齐。

```
op <- par(mfrow=c(2, 2))
hist(islands)
utils::str(hist(islands, col="gray", labels = TRUE)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T20:08:56.393

对主标题和图形参数 adj 使用单独的函数：

```
op <- par(mfrow=c(2, 2))
hist(islands,main=NULL)
title("Histogram of islands",adj=1)
utils::str(hist(islands, col="gray", labels = TRUE,main=NULL))
title("Histogram of islands",adj=1) 
```

# mysql - PHPEXCEL mysql php插入空行

> ID：15098088
> 
> 赞同：1
> 
> 时间：2013-02-26T19:56:48.637
> 
> 标签：mysql, validation, rows, phpexcel

我正在尝试使用 phpexcel 让用户上传电子表格并插入 mysql。我让它工作，除非用户在电子表格中有空白行，它会在数据库中放置几个​​不必要的行。我已经阅读并且 mysql 不支持检查约束，其中大部分需要在应用程序级别完成，这是我正在尝试做的。PHP 如何让它检查特定列是否为空并跳过该行。任何帮助将不胜感激，或者如果有更好的解决方案，我愿意接受所有选择。我尝试了一段时间才知道该`bldg`列是空的，而不是跳过该行但没有任何运气..

```
<?php require '../Classes/PHPExcel.php';
require_once '../Classes/PHPExcel/IOFactory.php';

$path = "../upload/uploads/$Filename";

$objPHPExcel = PHPExcel_IOFactory::load($path);
foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
$worksheetTitle = $worksheet->getTitle();
$highestRow =  $worksheet->getHighestRow();
$highestColumn = 'L'; // e.g 'F'
$highestColumnIndex = PHPExcel_Cell::columnIndexFromString($highestColumn);
$nrColumns = ord($highestColumn) - 64;
$objReader = PHPExcel_IOFactory::createReaderForFile($path);
$objReader->setReadDataOnly(true);

echo '<br>Data: <table width="100%" cellpadding="3" cellspacing="0"><tr>';
for ($row = 16; $row <= $highestRow; ++ $row) {

echo '<tr>';
for ($col = 0; $col < $highestColumnIndex; ++ $col) {
$cell = $worksheet->getCellByColumnAndRow($col, $row);
$val = $cell->getValue();
if($row === 1)
echo '<td style="background:#000; color:#fff;">' . $val . '</td>';
else
echo '<td>' . $val . '</td>';
}
echo '</tr>';
}
echo '</table>';

for ($row = 16; $row <= $highestRow; ++ $row) {

$val=array();
    for ($col = 0; $col < $highestColumnIndex; ++ $col) {
    $cell = $worksheet->getCellByColumnAndRow($col, $row);
    $val[] = $cell->getValue();

    }

  $sql="insert into excess1(date_excessed, bldg, floor, jack, equipment_owner,     contact_name, contact_phone, qty, type_of_excess, asset_tag, service_tag, comments)
values('".$val[0] . "','" . $val[1] . "','" . $val[2]. "','" . $val[3]. "','" . $val[4].     "','" . $val[5]. "','".$val[6] . "','".$val[7] . "','".$val[8] . "','".$val[9] .     "','".$val[10] . "','".$val[11] . "')";

$result = mysql_query($sql) or die(mysql_error());

   print "$result";
  }
   }
    unlink("../upload/uploads/$Filename");
?>
</article> 
```

# php - 当全文不是可行的解决方案时动态 mysql 搜索

> ID：15098089
> 
> 赞同：2
> 
> 时间：2013-02-26T19:56:51.950
> 
> 标签：php, mysql, search, full-text-search

许多文章将指向全文索引，以获得 mysql 搜索的简单解决方案。在正确的情况下可能会出现这种情况，但是当无法使用全文时（例如，跨表），我还没有看到接近全文的解决方案。我正在寻找的解决方案最好是可以匹配句子中任何内容的解决方案。

因此， search`James Woods`或 search`Woods James`可能都返回文本所在的同一行`James Woods`。基本的搜索方法会使搜索词的“混合匹配”变得无用。

`REGEXP`可能的答案是用or替换全文`LIKE`。然后将搜索词中的“空白”替换为`|`or可能会变为，`%`因此和的任何组合都会返回结果。或者变成'%James%Woods%'，这会降低生产力，但仍然会返回匹配的结果。`James Woods``James|Woods``James``Woods``aren't necessarily exact`

**示例 SQL**

```
SELECT * FROM people
  LEFT JOIN 
   (SELECT GROUP_CONCAT(other_data) AS people_data GROUP BY people_id) 
   AS t2 ON(t2.people_id = people.id)
WHERE CONCAT_WS(' ', people.firstname, people.lastname, people_data) LIKE {$query} 
```

这真的是最好的方法吗？是否有任何技巧可以使这种方法（或另一种方法）更有效地工作？我真的在寻找一个 mysql 解决方案，所以如果你的答案是使用另一个数据库服务，那么，就这样吧，我会接受它作为答案，但真正的问题是 mysql 的最佳解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T17:32:04.623

在 MySQL 中，您是否尝试过使用

MATCH() 和 AGAINST() 函数的组合

我猜他们会产生你正在寻找的结果。

例如

对于以下数据集::

```
mysql> select * from temp;
+----+---------------------------------------------+
| id | string                                      |
+----+---------------------------------------------+
|  1 | James Wood is the matyr.                    |
|  2 | Wood James is the saviour.                  |
|  3 | James thames are rhyming words.             |
|  4 | Wood is a natural product.                  |
|  5 | Don't you worry child - Swedish House Mafia |
+----+---------------------------------------------+
5 rows in set (0.00 sec) 
```

如果您需要 james 或 wood 存在，此查询将返回以下结果

```
mysql>  select string from temp where match (string) against ('james wood' in bo
olean mode);
+---------------------------------+
| string                          |
+---------------------------------+
| James Wood is the matyr.        |
| Wood James is the saviour.      |
| James thames are rhyming words. |
| Wood is a natural product.      |
+---------------------------------+
4 rows in set (0.00 sec) 
```

如果您要求 James 和 Wood 这两个词都应该出现，则此查询将起作用。注意单词前的“+”号。检查这个[布尔模式](http://dev.mysql.com/doc/refman/5.5/en//fulltext-boolean.html)

```
mysql> select string from temp where match (string) against ('+james +wood' in b
oolean mode);
+----------------------------+
| string                     |
+----------------------------+
| James Wood is the matyr.   |
| Wood James is the saviour. |
+----------------------------+
2 rows in set (0.00 sec) 
```

查找具有任何后缀的单词，它的工作方式类似

```
mysql> select string from temp where match (string) against ('Jame*' in boolean
mode);
+---------------------------------+
| string                          |
+---------------------------------+
| James Wood is the matyr.        |
| Wood James is the saviour.      |
| James thames are rhyming words. |
+---------------------------------+
3 rows in set (0.02 sec) 
```

但请注意，Mysql 的全文搜索尚不支持前缀搜索

```
mysql> select string from temp where match (string) against ('*ame*' in boolean
mode);
Empty set (0.00 sec) 
```

我希望这有帮助。

顺便说一句，这个回复很晚，但我有足够的兴趣来回复。

要了解更多信息，请查看此链接[http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html](http://dev.mysql.com/doc/refman/5.5/en//fulltext-search.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-11T16:49:00.813

我参加聚会有点晚了-为此道歉。

您提到您不能使用全文功能，因为您正在使用连接 - 好吧，虽然情况确实如此，但有*一种*流行的方法可以解决这个问题。

考虑以下将全文搜索与连接结合使用：

```
SELECT
    article.articleID,
    article.title,
    topic.title
FROM articles AS article
-----
    INNER JOIN (
        SELECT articleID
        FROM articles
        WHERE MATCH (title, keywords) AGAINST ("cat" IN BOOLEAN MODE)
        ORDER BY postDate DESC
        LIMIT 0, 30
    ) AS ftResults ON article.articleID = ftResults.articleID
-----
LEFT JOIN topics AS topic ON article.topicID = topic.topicID
GROUP BY article.id
ORDER BY article.postDate DESC 
```

请注意，我如何`topics`通过在另一个查询中运行全文搜索并按 ID 加入/匹配结果来保持我的加入完好无损。

如果您不在共享主机上，还可以考虑将[Sphinx](http://sphinxsearch.com/)或[Lucene Solr](https://lucene.apache.org/solr/)与 MySQL 一起使用，以实现更快速的全文搜索。我用过 Sphinx 并强烈推荐它。

# sql-server - 四舍五入 TSQL

> ID：15098090
> 
> 赞同：6
> 
> 时间：2013-02-26T19:56:55.300
> 
> 标签：sql-server, tsql, rounding

我必须遗漏一些明显的东西。

```
select CEILING(85/30) = 2

85/30 = 2.83333 
```

我希望值为 3。

CEILING 功能不应该为我圆润吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T19:58:54.350

尝试

```
SELECT CEILING(85.0/30) 
```

为了比较

```
SELECT 85.0 / 30, 85 / 30 
```

第一个示例使用浮点数，第二个示例使用整数，因此在达到上限函数之前对结果进行四舍五入。你所做的是

```
SELECT CEILING(2) 
```

而不是

```
SELECT CEILING(2.833333) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T19:58:55.347

将其更改为：

```
select CEILING(85/30.0) 
```

INT / INT 产生一个 INT，因此 85/30 向下舍入（FLOOR）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:16:02.363

使用一些类型化参数，您就不必担心如何输入数据。这是山姆

```
DECLARE @int_num integer
DECLARE @int_dem integer
DECLARE @dec_num decimal(18,0)
DECLARE @dec_dem decimal(18,0)

SET @int_num = 85
SET @int_dem = 30
SET @dec_num = 85
SET @dec_dem = 30

SELECT CEILING(@int_num / @int_dem) AS int_div, CEILING(@dec_num / @dec_dem) AS dec_div

int_div   |   dec_div
----------------------
2         |   3 
```

# bash - bash 命令行追加到变量将改为前置

> ID：15098093
> 
> 赞同：0
> 
> 时间：2013-02-26T19:57:01.803
> 
> 标签：bash, variables, loops, for-loop, append

在 shell 脚本中，我通常将字符串附加到带有“${variable} end”的变量中。但是，我有一个文件“file.txt”，我希望在其中的所有行都附加“end”。所以我做的命令行，例如，`for i in `cat file.txt`; do echo "${i} end"; done`. 但是“结束”这个词（加上空格）不会被附加而是附加。当我使用 while 循环时，也会发生同样的事情。谁能告诉我那里发生了什么？我在 LinuxMint13 64 位（Cinammon 和 Mate）上使用 GNU bash 版本 4.2.37。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:06:40.197

您应该使用 while 循环而不是 for 循环，[如此处所述](http://mywiki.wooledge.org/DontReadLinesWithFor?highlight=%28loop%29%7C%28over%29%7C%28lines%29%7C%28in%29%7C%28file%29)。

```
while IFS= read -r line
do
    echo "$line end"
done < "file.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:31:42.230

使用循环是唯一的选择吗？如果您只想在每一行的末尾附加一些内容，那么它可能更容易使用`sed`：

```
sed -ie 's/.*/& end/' file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:00:17.160

这可能只是您的语法 - 不要忘记`do`. 那是：

```
for i in `cat file.txt`; do echo "${i} end"; done 
```

如果您要询问如何创建一个新文件，并在每行附加“end”，请尝试以下操作：

```
for i in `cat file.txt`; do echo "${i} end" >> some_new_file; done 
```

# macos - 有没有办法从 shell 脚本中添加到 OS X 的 install.log 中？

> ID：15098095
> 
> 赞同：2
> 
> 时间：2013-02-26T19:57:07.887
> 
> 标签：macos, logging, installation

有没有办法从 shell 脚本中向 OS X 的 /var/log/install.log 文件添加一个条目？

最佳情况下，该方法不需要 root 访问权限，因为我认为我不会拥有它。

我遇到的问题是我正在通过 Javascript [System.run](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/DistributionDefinitionRef/DistributionDefinitionRef.pdf) **(** )命令（第**30 页**的Apple's [Installer Javascript Reference](https://developer.apple.com/library/mac/documentation/DeveloperTools/Reference/InstallerJavaScriptRef/InstallerJavaScriptRef.pdf)），但我看不到该 shell 脚本的任何输出。

 **我知道 shell 脚本正在执行，因为当我在脚本中使用“logger”命令时，我的日志文本出现在 /var/log/system.log 中。但是为了全面了解正在发生的事情，我需要手动将它与 /var/log/install.log 合并，这是安装程序的一般输出以及我所做的任何 Javascript 日志记录的结​​束位置向上。

任何帮助，将不胜感激。我尝试使用“logger”命令的 -f 标志来使用 /var/log/install.log，例如

```
logger -f /var/log/install.log sometext 
```

...但没有骰子；sometext 仍然被添加到 /var/log/system.log。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:29:18.340

阅读 bash 脚本。您可以像这样在文件中添加一行

```
echo "My line here" >> /var/log/system.log 
```

如果出现`Permission denied`错误，则需要 root 访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-15T16:30:48.590

好的。很久过去了，我发现了以下内容。

在正常情况下，安装前和安装后脚本（我的是 python 和 bash）写入标准输出的任何内容都将由安装程序守护程序记录到 /var/log/install.log。我尝试了各种工具来创建我的安装程序包，他们通常这样做。

但是，在我自己的部署安装程序中，出于某种原因，只有写入 stderr 的内容才会记录到 /var/log/install.log - 所以您可能也想尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-09T12:13:37.963

有点晚了，但遇到了同样的问题，并且能够使用带有*LOG_INSTALL工具的**[记录器](https://man.openbsd.org/logger.1)*从 AppleScript将日志添加到*install.log*：

 *```
logger -p 'install.error' "My error message" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-02T09:08:53.843

这本身不是一个答案，但也许是一个提示？安装程序手册页提到“LOG_INSTALL 工具”，其输出是所需的 /var/log/install.log

但是这个“设施”是什么，它在哪里可用 - 我找不到。我真的需要将我的前/后脚本失败和特定场景写入该日志。***

# ajax - JavaServer Faces ajax 控件未更新（启用/禁用）

> ID：15098096
> 
> 赞同：0
> 
> 时间：2013-02-26T19:57:08.530
> 
> 标签：ajax, jsf, jsf-2, primefaces

这是我的 JSF 页面的一个片段：

```
 <p:selectBooleanCheckbox value="#{FormXYZ_01.propertyNone0}">
        <p:ajax event="blur" render="propertyNone0" />
 </p:selectBooleanCheckbox>

<p:inputTextarea id="propertyNone0" disabled="#{FormXYZ.propertyNone0}" rows="3" styleClass="fixed400" /> 
```

这是我的支持 bean 中的相关代码：

```
@ManagedBean(name="FormXYZ_01")
@SessionScoped
public class FormXYZ_01 implements Serializable {
private Boolean propertyNone0;   
public Boolean getPropertyNone0() {return propertyNone0;} 
public void setPropertyNone0(Boolean propertyNone0) {this.propertyNone0 = propertyNone0;} 
```

我的最终目标是在选中 selectBooleanCheckbox 时禁用文本框。我对 JSF 很陌生，并且正在使用 primefaces。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:22:28.787

这是最终工作的代码：

```
<h:form>

<p:selectBooleanCheckbox value="#{FormXYZ_01.propertyNone0}">
    <p:ajax event="change" update="ctrlPropertyDescLoc0" />
</p:selectBooleanCheckbox>

<p:inputTextarea id="ctrlPropertyDescLoc0" disabled="#{FormXYZ_01.propertyNone0}" cols="27" rows="3" />

</h:form> 
```

要点是，**事件**必须是“更改”并且**更新**必须指向目标控件的 id 属性。

另外，不要忘记将控件包装在表单标签中！

```
<h:form>...</h:form> 
```

# css - 无序列表菜单中不需要的边框

> ID：15098099
> 
> 赞同：0
> 
> 时间：2013-02-26T19:57:14.207
> 
> 标签：css, zurb-foundation

我试图弄清楚水平菜单项的边框来自哪里（基于无序列表）：http: [//developers.ttsistemi.com/clive/](http://developers.ttsistemi.com/clive/)

我什么都试过了。我什至尝试将边框（以及以防万一背景、填充和边距）设置为无/透明/0、主元素及其子元素，但我仍然得到这个烦人的边框（你几乎看不到它，但是在所有菜单项之间）。

该站点使用 WordPress 并使用 Required+ 子主题（基于 Zurb's Foundation）。

我花了大约 4 个小时试图找到这个边框的来源（使用 Chrome 的开发人员工具检查 CSS），但我被卡住了。我只是没有看到任何剩余的边框设置：父主题可能设置的所有内容现在都应该被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:06:19.323

1）`.navbar > li`删除当前设置的这些属性：

```
.navbar > li {
box-shadow: 1px 0 0 rgba(255, 255, 255, 0.2) inset; /* Delete */
border-width: 1px medium 1px 1px; /* Delete */
border-style: solid none solid solid; /* Delete */
border-color: #333333 -moz-use-text-color #333333 #333333; /* Delete */ 
```

2）因为您的最后一个`<li>`是使用`:last-child`伪选择器选择的，所以您必须单独更改它，否则您将在最后一个菜单项上有边框。所以删除：

```
.navbar > li:last-child {
border-right: 1px solid #333333; /* Delete */
box-shadow: 1px 0 0 rgba(255, 255, 255, 0.2) inset, 
            1px 0 0 rgba(255, 255, 255, 0.2); /* Delete */ 
```

* * *

这是显示缺少边框/框阴影的屏幕截图

[http://img38.imageshack.us/img38/5845/menu2b.jpg](http://img38.imageshack.us/img38/5845/menu2b.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:54:15.007

我看了一下，只是不知道您要删除什么边框，也许是菜单中的边框，我在这里找到了：

```
.home #container #content-wrapper #access {
   font-family: 'Museo Slab';
   width: 100%;
   border-top: 1px solid black;
   border-bottom: 1px solid black;
   background-color: rgba(236, 236, 236, 0.5);
   margin: 0;
   padding: 0;
   text-align: center;
} 
```

在 app.css 第 101 行，删除它不再显示的边框。

在 Dark 的回答中，我也检查了它：我认为宽度`nav id="access"`不正确，它应该像这样改变：

```
.eight, .row .eight {
width: 38.66667%;
} 
```

我看到你`background-image`的页脚使文本难以看，我建议你应该删除它或为它们添加一个空格。

# sql - 将 sql 列拆分为可查询的结果集

> ID：15098100
> 
> 赞同：3
> 
> 时间：2013-02-26T19:57:20.993
> 
> 标签：sql, sql-server-2008

这是我的问题：

我在 sql 列中有一个包含以下数据的列：

```
Answers
=======
1:2:5: <--- notice my delimiter 
```

我需要能够将数字分解成一个结果集，我可以加入一个查找表，例如

```
Answers_Expanded
=======
1 apple
2 pear
3 cherry
4 mango
5 grape 
```

并返回

```
Answers
=======
apple pear grape 
```

有这样的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:25:06.893

这篇[博](http://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx)文有一个很好的用户定义函数示例，该函数将返回一个表，其中包含列中分隔字符串的值。然后，您可以将该表加入您的 Answers_Expanded 表以获得您的值。

如果您正在解析相当短的字符串，并且如果您将其作为一次性的事情进行，那么这很好用，但是如果您有一个表格，其中您的答案存储在这样的列中，您不希望在整个表，因为它将对性能造成很大影响。理想情况下，您希望避免在 SQL 中获得这样的分隔字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:52:57.707

这有点像 hack（the `LIKE`、the`XML PATH`和 the `STUFF`），它假定您希望答案按它们排序，`ID`而不是与多值列中的原始顺序匹配...

但这会给出您正在寻找的结果：

```
SELECT STUFF((
  SELECT ' ' + ae.Answer
  FROM
    Answers_Expanded ae
    JOIN Answers a ON ':' + a.Answers LIKE '%:' + CAST(ae.ID AS VARCHAR) + ':%' 
  ORDER BY ae.ID
  FOR XML PATH(''))
, 1, 1, '') AS Answers 
```

## [Sql 小提琴](http://sqlfiddle.com/#!3/cb88d/16)

这有效，因为：

1.  连接`LIKE`查找`Answer_Expanded`与多值列匹配的任何行。
2.  `XML PATH` simulates a group concatenation... and allows for `' '` to be specified as the delimiter
3.  `STUFF` removes the leading delimiter.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:16:21.627

我建议您以一个单元格只有一个数字的方式保存您的答案……而不是一个单元格中的多重信息。（违反第一范式）。

否则你最好使用一些高级的 sql 语言，例如 T-SQL。

# android - 如何在主要活动 api 7 中设置主题？

> ID：15098103
> 
> 赞同：1
> 
> 时间：2013-02-26T19:57:23.460
> 
> 标签：android, actionbarsherlock, android-manifest

我为我的用户提供了一个明暗的主题选项。

日志中的错误：

> Caused by: `java.lang.IllegalStateException`: 您必须使用`Theme.Sherlock`, `Theme.Sherlock.Light`, `Theme.Sherlock.Light.DarkActionBar`, 或派生词。

错误发生在`setContentView(R.layout.activity_main);`MainActivity 中。

主要活动

```
public class MainActivity extends SherlockFragmentActivity {.....public static int globalTheme;
Context context;
protected void onCreate(Bundle savedInstanceState) {

    context = getApplicationContext();
    mySharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);

    Editor editor = mySharedPreferences.edit();
    editor.putBoolean("proxy", false);
    editor.commit();

    if (mySharedPreferences.getString(Preferences.PREF_THEME, "1").trim().equals("1"))
        globalTheme = R.style.Sherlock___Theme;
    else
        globalTheme = R.style.Sherlock___Theme_Light;
    setTheme(globalTheme);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main); 
```

我没有在清单中添加一些东西，因为主题应该动态更改 AndroidManifest.xml

```
<uses-sdk android:minSdkVersion="7"
   />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:name="com.belasheuski.activities.MyApplication"
     >
    <activity
        android:name="com.belasheuski.activities.MainActivity"
        android:label="@string/name_main"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

此错误发生在 API 7 上。在 API 15 上一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:20:54.757

我是这样设置的...

```
 setTheme(isLightTheme ? R.style.MyApp_Light : R.style.MyApp); 
```

样式定义的样子...

```
 <style name="MyApp.Light" parent="@style/Theme.Sherlock.Light.ForceOverflow">
     <item name="overlayedActionBarBackground">@color/overlayedActionBarLight</item>

     ...
 </style>

 <style name="MyApp" parent="@style/Theme.Sherlock.ForceOverflow">
     <item name="overlayedActionBarBackground">@color/overlayedActionBarDark</item>

     ...
 </style> 
```

这很好用。所以我认为您从 ABS 中获取了错误的样式定义。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:19:57.630

错误信息告诉你出了什么问题，你的主题必须是“Theme.Sherlock、Theme.Sherlock.Light、Theme.Sherlock.Light.DarkActionBar，或衍生”。

这发生在 API 7 上，但不是在 API 15 上，因为 API 15 具有本机 ActionBar 支持，所以使用它，而在 API 7 上不是这种情况，因此需要主题化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:22:08.453

从错误出发：

> 您必须使用 Theme.Sherlock、Theme.Sherlock.Light、Theme.Sherlock.Light.DarkActionBar 或衍生产品。”

您的自定义`style`似乎不是从`Sherlock`主题继承的。检查`styles.xml`文件`values`夹中的文件并确保它们继承自其中之一。

# xpages - Javascript 与 Lotusscript

> ID：15098109
> 
> 赞同：1
> 
> 时间：2013-02-26T19:57:31.260
> 
> 标签：xpages

我希望有人能把我从这里的痛苦中解救出来。我用 JavaScript 重写了一个 LotusScript 函数，但它没有按应有的方式工作。我不能再看这个东西了。我希望有人能帮我解决这个问题。

该函数采用组名和地址簿数据库对象。它获取并返回该组的所有成员，包括嵌套组。它在 Lotusscript 版本中运行良好，但在 Javascript 版本中却不行。这与递归函数和数组的索引有关。

如果您创建两个组。将 10 个姓名放入第一组，将 5 个姓名放入第二组。请注意，使用前导 # 命名第二组，使其排在第一组的顶部

A组 1A组 bla bla2 bla3 bla4 bla5 bla6 bla7 bla8 bla9 bla10

1组-A 其他1 其他2 其他3 其他4 其他5

在 Javascript 版本中，当您传递函数 group-A 时，它会返回 10 个名称。第二组五个，第一组第二个五个。

这是lotusscript版本的代码

```
Function LibGetGroupMembers( groupName As String, addressBook As NotesDatabase ) As Variant

'  This Function takes a passed in group name and gets all the members of that group.
'  Not a big whoop until you consider nested group names.  This is a recursive routine.
'
 '   Inputs  :  Name of the group to fetch the members of.
'
'  Uses     :  Global objects
 '
 '  Outputs : Returns an array of members
 '
 '  History:
 '  02.19.2001  - Steven Rieger           :  Created Function.

Dim groupView As NotesView
Dim groupMainDoc As NotesDocument
Dim groupMembers As Variant
Dim nestedGroupMembers As Variant
Dim arrayOfMembers() As String
Dim mainIndex As Integer
Dim nestedIndex As Integer
Dim resultIndex As Integer

On Error Goto ErrorHandling

gLibObjectName = CStr( GetThreadInfo(1) ) & " - " & gLibDatabaseNamePath
gLibErrorMessage = "Begin " & gLibObjectName
Call LibLogErrorPushCallingPgm ( gLibErrorMessage  )
Print( gLibErrorMessage )

gLibAdditionalErrorMessage = "Fetching Group View From NAB"
Set groupView = addressBook.GetView( "($VIMGroups)" )
If( groupView Is Nothing ) Then
    Call LibLogError( "Error: Un-able to get view from address book", gLibErrorMessage )
    Exit Function
End If

gLibAdditionalErrorMessage = "Fetching Group Main Document " & groupName    
Set groupMainDoc = groupView.GetDocumentByKey( groupName, True )

resultIndex = 0
Redim arrayOfMembers( 0 )

'  Did we find a matching group document?
If Not( groupMainDoc Is Nothing ) Then
    If Not( Iselement ( gListOfGroupNames( Lcase( groupName ) ) ) ) Then
'           Print( "Processing Group: " & groupName )
        gListOfGroupNames( Lcase( groupName ) ) = " "
        groupMembers=groupMainDoc.GetItemValue( "Members" )
        For mainIndex = Lbound( groupMembers ) To Ubound( groupMembers)
            nestedGroupMembers= LibGetGroupMembers( groupMembers( mainIndex ), addressBook )
            If( nestedGroupMembers(0) = "" ) Then
                If( groupMembers( mainIndex ) <> "" ) Then
                    Redim Preserve arrayOfMembers( Ubound( arrayOfMembers ) + 1) 
                    arrayOfMembers( resultIndex ) = groupMembers( mainIndex )
                    resultIndex = resultIndex + 1
                End If
            Else
                Redim Preserve arrayOfMembers( Ubound( nestedGroupMembers ) + resultIndex ) 
                For nestedIndex = Lbound( nestedGroupMembers ) To Ubound( nestedGroupMembers )
                    arrayOfMembers( resultIndex ) = nestedGroupMembers( nestedIndex )
                    resultIndex = resultIndex + 1
                Next
            End If
        Next
        If( arrayOfMembers( Ubound( arrayOfMembers ) ) = "" And Ubound( arrayOfMembers ) > 0 ) Then
            Redim Preserve arrayOfMembers( Ubound( arrayOfMembers ) - 1 ) 
        End If
    Else
        groupName = "*** Circular Group: " & groupName & " ***"
    End If
End If

LibGetGroupMembers = arrayOfMembers

Goto Bye

ErrorHandling :
Call LibLogError( "Error: " & Err( ) & ": " & Error( ) & Chr( 13 ) & Chr( 13 ) & "Occured in Module " & CStr( GetThreadInfo(1) ) & " at Line Number: " & Erl(), CStr( GetThreadInfo(1) & " - " & gLibDatabaseNamePath ) )
Resume Bye     

Bye: 

gLibAdditionalErrorMessage = "End " & CStr( GetThreadInfo(1) & " - " & gLibDatabaseNamePath ) 
' This will pop the last entry of the stack!
Call libLogErrorPopCallingPgm()
Print( gLibAdditionalErrorMessage )

End Function 
```

这是 JAVASCRIPT 函数的代码

```
function jsLibGetGroupMembers( groupName:string, addressBook:NotesDatabase )
{
//  This Function takes a passed in group name and gets all the members of that group.
//  Not a big whoop until you consider nested group names.  This is a recursive routine.
//
//   Inputs  :  Name of the group to fetch the members of.
//
//  Uses     :  Global objects
//
//  Outputs : Returns an array of members
//
//  History:
//  02.19.2001  - Steven Rieger           :  Created Function.

var groupView:NotesView;
var groupMainDoc:NotesDocument;
var groupMembers:java.util.Vector;
var nestedGroupMembers = new Array();
var arrayOfMembers = new Array();
var mainIndex:Integer;
var nestedIndex:Integer;
var resultIndex:Integer;

print( "Begin jsLibGetGroupMembers - Passed in Name: " + groupName  );
groupView = addressBook.getView( "($VIMGroups)" )
if( groupView == null ) 
{
    print( "group document not found!" );
    return nestedGroupMembers;
}

//  gLibAdditionalErrorMessage = "Fetching Group Main Document " & groupName    
groupMainDoc = groupView.getDocumentByKey( groupName, true )

resultIndex = 0

//  Did we find a matching group document?
if( groupMainDoc != null ) 
{   //  is the group name already in the global list of groups?
    if( !(groupName.toLowerCase() in gListOfGroupNames ) )  
    {
        //  Add the group name to the globla list of groups to prevent processing duplicate groups
        gListOfGroupNames[ groupName.toLowerCase() ] = " "
        groupMembers = groupMainDoc.getItemValue( "Members" );
        for( groupMemberIndex = 0; groupMemberIndex < groupMembers.length; groupMemberIndex++ )
        {
            //  Fetch any nested group members if the current member is a group name
            nestedGroupMembers = jsLibGetGroupMembers( groupMembers[groupMemberIndex], addressBook );
            if ( typeof nestedGroupMembers[0] === 'undefined' || nestedGroupMembers[0] === null )
            {
                //  If no group was found and we have an actual member name add it to the list.
                if( groupMembers[groupMemberIndex].length > 0 ) 
                {
                    print( "adding user to array: " + groupMembers[groupMemberIndex] + " resultIndex = " + resultIndex );
                    arrayOfMembers[resultIndex] = groupMembers[groupMemberIndex];
                    resultIndex += 1;
                }
                else
                {
                    print( "No User to Add!");
                }
            }
            else
            {
                //  If this was a nested group we found add the members of that group to the list
                for( nestedGroupMemberIndex = 0; nestedGroupMemberIndex < nestedGroupMembers.length; nestedGroupMemberIndex++ )
                {
                    print( "adding nested user to array: " + nestedGroupMembers[nestedGroupMemberIndex] + " resultIndex = " + resultIndex );
                    arrayOfMembers[ resultIndex ] = nestedGroupMembers[nestedGroupMemberIndex];
                    resultIndex += 1;
                }
            } 
        }
    }
    else
        print( "Duplicate Group!");
}
else
{
    print( "no group doc found!" );
}
print( "exiting jsLibGetGroupMembers: " + "\n" + arrayOfMembers );
return arrayOfMembers;

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T01:27:06.963

[鉴于我最近的博客文章](http://www.timtripcony.com/blog.nsf/d6plinks/TTRY-955KHF)，这个答案无疑会显得很讽刺，但这里有一个 SSJS 实现，它将返回组层次结构中所有成员的排序列表：

```
var AtFunctions = (function() {

    function getGroupNames (groupRecord, serverName) {
        var result = new java.util.TreeSet();
        if (groupRecord) {
            for (var eachMember in groupRecord.getItemValue("Members")) {
                var nestedGroupRecord = getGroupRecord(eachMember, serverName);
                if (nestedGroupRecord) {
                    result.addAll(getGroupNames(nestedGroupRecord, serverName));
                    nestedGroupRecord.recycle();
                } else {
                    result.add(eachMember);
                }
            }
        }
        return result;
    }

    function getGroupRecord (groupName, serverName) {
        var result = null;
        try {
            serverName = (serverName || session.getServerName());
            var NAB = session.getDatabase(serverName, "names.nsf");
            var groupView = NAB.getView("($VIMGroups)");
            result = groupView.getDocumentByKey(groupName, true);
        } catch (e) {
            print("Error getting group record: " + e.toString());
        }
        return result;
    }

    var API = {
        expandNameList: function(groupName, serverName) {
            var result = new java.util.TreeSet();
            if (groupName) {
                var groupRecord = getGroupRecord(groupName, serverName);
                if (groupRecord) {
                    result.addAll(getGroupNames(groupRecord, serverName));
                    groupRecord.recycle();
                }
            }
            return result;
        }
    };

    return API;

})();

var @ExpandNameList = AtFunctions.expandNameList; 
```

如果需要，最后的变量别名将允许您将其视为自定义@Function，因此您可以通过以下两种方式之一调用它：

```
var groupMembers = @ExpandNameList("All Employees");
var groupMembers = AtFunctions.expandNameList("All Employees");
// in either syntax, you can optionally pass a server name as a second argument 
```

注意：它使用 Java TreeSet 类而不是 JavaScript 数组，它具有以下优点：

1.  它是自动排序的。你可能不想要这个，但对于这种类型的操作，它通常很有用。
2.  它会自动忽略重复项，因此即使同一成员存在于多个子组中，您也应该只获得每个名称的一个实例。
3.  从语法上讲，它比数组更容易操作。

享受。:)

# android - 通知在 API 17 下可见，但在 API 13 下不可见

> ID：15098110
> 
> 赞同：1
> 
> 时间：2013-02-26T19:57:38.733
> 
> 标签：android, android-notifications, textcolor

我正在使用 NotificationCompat.Builder 制作一个简单的通知，然后将其添加到通知栏。在运行 API 17 的 AVD 上，可以按预期在通知下拉菜单中看到通知。但在运行 API 13 的 AVD 上，无法看到通知的标题/文本/信息（可能是由于黑色背景下的黑色文本）。

在寻找我的问题的解决方案时，我发现了以下内容：[自定义通知颜色和文本颜色](https://stackoverflow.com/questions/4867338/custom-notification-layouts-and-text-colors/4935191#4935191)但这似乎仅适用于为通知使用自定义布局的情况。

这是我的代码：

```
 private static int notificationId = 1;
private void displayNotification() {

    // create an Intent to launch the Show Notification activity
    // (when user selects the notification on the status bar)
    Intent i = new Intent(this, ShowNotificationActivity.class);
    // pass it some value
    i.putExtra(ShowNotificationActivity.NOTIF_ID, notificationId);

    // wrap it in a PendingIntent
    PendingIntent pendingIntent = PendingIntent.getActivity(this, notificationId, i, 0);

    // create the notification
    NotificationCompat.Builder builder = new NotificationCompat.Builder(this);
    builder.setContentTitle("This is the Title #" + notificationId);
    builder.setContentText("This is the Text");
    builder.setContentInfo("This is the Info");
    builder.setContentIntent(pendingIntent);
    builder.setSmallIcon(android.R.drawable.ic_notification_overlay);
    builder.setAutoCancel(true);
    Notification notif = builder.build();

    // display the notification
    NotificationManager nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    nm.notify(notificationId, notif);

    notificationId++;
} 
```

我曾希望发布一些屏幕截图，显示 API 17 和 API 13 下的通知下拉，但显然我没有足够的“声誉点”来发布图像。所以我想书面描述就足够了：

在 API 17 下，通知下拉菜单显示通知的图标（红点）、标题和文本。背景颜色为黑色，文本颜色为白色。

在 API 13 下，只有图标（红点）可见。背景颜色是黑色，我怀疑文本颜色也可能是黑色。

我怀疑我遗漏了一些明显的东西，但我对此并不陌生，并且希望得到任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:43:57.900

当我将您的代码复制粘贴到我的空活动中时，出现了几个错误（您的代码似乎不完整）。我添加了这些行以使其工作：

```
int notificationId = 1;
Intent intent = new Intent(this, MyActivity.class);
PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

//Here goes your code. 
```

我刚刚在 3.2 模拟器上测试了您的代码，这就是通知的样子：

![在此处输入图像描述](../Images/b2bdee25f7b041398776fc9f23710e7e.png)

我相信，它应该是这样的。

你能用我的代码测试一下，让我知道它是否有效吗？

# .net - .net mvc 下拉列表未更新

> ID：15098111
> 
> 赞同：0
> 
> 时间：2013-02-26T19:57:48.210
> 
> 标签：.net, asp.net-mvc, entity-framework

我有两个模型如下：

员工模型

```
public int ID{get;set;}
public string name{get;set;}
public virtual Department Department{get;set;} 
```

部门型号

```
public int ID{get;set;}
public string name{get;set;} 
```

添加新员工时，我正在使用员工视图的下拉菜单

员工编辑控制器

```
public ActionResult Edit(employee employee)
{
   ....
   ViewBag.ID = new SelectList(db.departments,"ID","Name",employee.ID);
   return View(employee);
} 
```

在视图中：

```
@Html.DropDownList("ID") 
```

添加新员工可以正确保存部门，但是当我编辑现有记录时，它没有保存。

我在看什么？

模型绑定：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using AssetManagement.Models;

namespace AssetManagement.Controllers
{
    public class EmployeeController : Controller
    {
        private AssetContext db = new AssetContext();

        //
        // GET: /Employee/

        public ActionResult Index()
        {
            var employees = db.Employees.Include(e => e.Department);
            return View(employees.ToList());
        }

        //
        // GET: /Employee/Details/5

        public ActionResult Details(int id = 0)
        {
            Employee employee = db.Employees.Find(id);
            if (employee == null)
            {
                return HttpNotFound();
            }
            return View(employee);
        }

        //
        // GET: /Employee/Create

        public ActionResult Create()
        {
            ViewBag.ID = new SelectList(db.Departments, "ID", "Name");
            return View();
        }

        //
        // POST: /Employee/Create

        [HttpPost]
        public ActionResult Create(Employee employee)
        {
            if (ModelState.IsValid)
            {
                db.Employees.Add(employee);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            ViewBag.ID = new SelectList(db.Departments, "ID", "Name", employee.ID);
            return View(employee);
        }

        //
        // GET: /Employee/Edit/5

        public ActionResult Edit(int id = 0)
        {
            Employee employee = db.Employees.Find(id);
            if (employee == null)
            {
                return HttpNotFound();
            }
            ViewBag.IDList = new SelectList(db.Departments, "ID", "Name", employee.ID);
            return View(employee);
        }

        //
        // POST: /Employee/Edit/5

        [HttpPost]
        public ActionResult Edit(Employee employee)
        {

            if (ModelState.IsValid)
            {
                db.Entry(employee).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
          ViewBag.IDList = new SelectList(db.Departments, "ID", "Name", employee.ID);

            return View(employee);
        }

        //
        // GET: /Employee/Delete/5

        public ActionResult Delete(int id = 0)
        {
            Employee employee = db.Employees.Find(id);
            if (employee == null)
            {
                return HttpNotFound();
            }
            return View(employee);
        }

        //
        // POST: /Employee/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            Employee employee = db.Employees.Find(id);
            db.Employees.Remove(employee);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

public class Division { public int ID {get;set;} public string Name { get; 放; } 公共虚拟员工 SiteContact { 获取；放; } 公共 ICollection 资产{ 获取；放; } }

```
public class Employee
{
    [Key, ForeignKey("Division")]
    public int ID { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public virtual Department Department{ get; set; }
    public string Title { get; set; }
    public string Address { get; set; }
    public string City { get; set; }
    public string BuildingName { get; set; }
    public string Floor { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-04T17:11:44.487

实体框架未保存，因为 Employee 实体“员工”（编辑帖子中的参数）不在上下文中。当你再次调用控制器时，之前的上下文被破坏了，这个实体不在实际的上下文中。Get 和 Post 中的 db Context 不一样。

因此，您必须去搜索实体进行编辑和修改。之后，您可以保存您的实体。

尝试这个：

```
 [HttpPost]
    public ActionResult Edit(Employee employee)
    {

        if (ModelState.IsValid)
        {
            var employeeModify = db.Find(employee.Id);
            employeeModify.name = employee.Name;
            employeeModify.DepartamentId = employee.DepartamentId;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
      ViewBag.IDList = new SelectList(db.Departments, "ID", "Name", employee.ID);

        return View(employee);
    } 
```

# variables - 局部变量在分配时不起作用 Xna

> ID：15098113
> 
> 赞同：0
> 
> 时间：2013-02-26T19:58:00.993
> 
> 标签：variables, timer, xna, local

我需要使用局部变量，但是当我将它们用于计时器时（减少时间直到满足条件）它不起作用

```
 for (int i = 0; i < Weapons.Count; i++)
        {
            if (Weapons[i].ItemType == 6)
            {
                if (standard.IsKeyDown(Keys.G))
                {
                    Cannons.Add(new CannonFire(this));
                }
            }
            else if (Weapons[i].ItemType == 7)
            {
                float Recharge  = Weapons[i].Laser.Rate;
                Recharge -= (float)gametime.ElapsedGameTime.Seconds;
                if (standard.IsKeyDown(Keys.G) && Recharge < 0)
                {
                    laser.Add(new LaserFire(this, new Vector3(Weapons[i].Laser.range, 1, 1) ));
                    Recharge = Weapons[i].Laser.Rate;
                }
            }
        } 
```

其他相关代码是我从中获得费率的地方

```
 public class LaserItem
{
    float Damage;
    float Range;
    float Last;
    float RechargeRate;
    public float damage
    {
        get { return Damage; }
        set { Damage = value; }
    }
    public float Rate
    {
        get { return RechargeRate; }
        set { RechargeRate = value; }
    }
    public float Life
    {
        get { return Last; }
        set { Last = value; }
    } 
```

它可以在没有计时器的情况下工作，但我不能那样做，因为我不希望每次有人击键时都制造 300 个激光器。据我所知，计时器设置为每帧的激光速率，因此它永远不会达到 0（本节在更新功能中）

对于这段代码很好，但是当我在循环中需要它时，我必须使用局部变量；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:12:52.943

据我了解，您在代码中所做的是创建一个新的局部变量，其值设置为每次更新的激光充电率，当上次更新的时间长于充电率 - 这只会在非常缓慢的更新时发生。

考虑到 XNA 的自动更新（主循环之一）调用，对您有帮助的是为武器设置一些类变量，例如`RemainingRecharge`，当您开火时，将其设置为充电率并减去每次更新的经过时间，直到它达到零或更少。与您的代码的唯一区别是充值被移动到类实例，因此在更新之间保留。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:36:27.597

我想通了，XNA 有一个 TimeSpan 的东西，你可以使用它更容易使用它，你可以告诉它它是否达到了数字重置并做你想做的事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:17:09.880

`Recharge`不是引用或指针；它是一个副本（因为`float`并且`double`是不可变类型）。`Recharge`因此，在块的末尾分配一个值`if()`绝对没有任何作用。（我敢打赌它甚至会被编译器删除）。

尝试这个：

```
 else if (Weapons[i].ItemType == 7)
                {
                    float recharge  = Weapons[i].Laser.Rate;
                    recharge -= (float)gametime.ElapsedGameTime.Seconds;

                    if (standard.IsKeyDown(Keys.G) && recharge < 0)
                    {
                        laser.Add(new LaserFire(this, new Vector3(Weapons[i].Laser.range, 1,1)));

                        /// changed the the next line:                        
                        Weapons[i].Laster.Rate = recharge;
                    }
                } 
```

# javascript - 使用 jQuery Ajax 成功显示脚本

> ID：15098116
> 
> 赞同：0
> 
> 时间：2013-02-26T19:58:05.623
> 
> 标签：javascript, jquery, ajax

我使用这个脚本（做一个 document.write，你可以访问 src 来查看它），它会在我的页面的 HTML 序列中花费时间加载：

```
<script type="text/javascript" src="http://pkmncards.disqus.com/recent_comments_widget.js?num_items=25"></script> 
```

这可以防止脚本在加载时加载一两秒后的任何内容，因此我想通过 jQuery Ajax 加载它以防止挂断。

这是我尝试过的：

```
var $j = jQuery.noConflict();
$j(document).ready(function () {
    $j.ajax({
        url: "http://pkmncards.disqus.com/recent_comments_widget.js?num_items=25",
        dataType: "script",
        success: function (data) {
            $j("#recent-discussion").html(data)
        }
    });
}); 
```

但是我没有正确处理成功。我看到请求加载，但它没有做任何事情。我希望它运行脚本并将 document.write 输出到目标#recent-discussion。

我仍在寻找示例，但无法弄清楚我做错了什么......非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:12:08.647

`document.write`页面加载后无法执行。您通过使用的 AJAX 调用加载的任何脚本都`document.write`将无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:06:36.390

您的 ajax 调用似乎是正确的，并且您实际上不需要在`success`回调中执行任何操作 - 到那时脚本已经开始执行（[但不一定如此](http://api.jquery.com/jQuery.getScript/)）。

如果它不起作用，则检查它是否已正确加载（可能`error`在 ajax 调用中使用回调）。顺便说一句，这个脚本与您的主页在同一个域中吗？您可以从不同的域加载脚本，但通常不能对它们进行 ajax 调用（由于同源策略）。

> 我希望它运行脚本并将 document.write 输出到目标#recent-discussion。

我认为这实际上是不可能的......如果这是您的脚本需要做的，而您无法更改它，恐怕您无能为力（`document.write`即缺少猴子补丁）。

# cakephp - CakePHP：将 product_id 值传递给结帐添加页面

> ID：15098117
> 
> 赞同：1
> 
> 时间：2013-02-26T19:58:06.703
> 
> 标签：cakephp

我对 cakePHP 很陌生，而且我已经被这个问题困住了几天了。我的产品索引视图显示我们在库存中的产品列表，并包含一个“结帐”操作，每个产品指向结帐/添加视图。问题是需要签出的产品中的 product_id 没有传递到添加结帐页面，我不知道如何实现这一点。如果有人有任何建议，我真的可以使用一些帮助。

这是我的 CheckoutController 添加操作：

```
 public function add() {
    if ($this->request->is('post')) {
        $this->Checkout->create();
        if ($this->Checkout->save($this->request->data)) {
            $this->Session->setFlash(__('The checkout has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The checkout could not be saved. Please, try again.'));
        }
    }
    $products = $this->Checkout->Product->find('list');
    $users = $this->Checkout->User->find('list');
    $this->set(compact('products', 'users'));
} 
```

结帐添加视图

```
<?php echo $this->Form->create('Checkout');?>
<fieldset>
    <legend><?php echo __('Add Checkout'); ?></legend>
<?php
    echo $this->Form->input('product_id');
    echo $this->Form->input('start_time');
    echo $this->Form->input('end_time');
    echo $this->Form->input('user_id');
    echo $this->Form->input('description');
?>
</fieldset> 
```

来自产品索引页面的链接

```
 <?php echo $this->Html->link(__('Checkout'), array('controller' => 'Checkouts','action' => 'add', $product['Product']['id'])); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:08:22.500

Cake 会将 product_id 作为您操作的第一个参数传递；默认 Cake 'Routes' 将匹配此 url；

```
/mycontroller/myaction/param1/param2/param3 
```

对于这个动作：

```
MycontrollerController::myaction(param1, param2, param3) 
```

您可以通过将参数添加到 add() 操作并将其添加到“请求”（如果未发布表单）来将此值传递给表单。像这样;

```
public function add($productId = null) {
    if ($this->request->is('post')) {
        $this->Checkout->create();
        if ($this->Checkout->save($this->request->data)) {
            $this->Session->setFlash(__('The checkout has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The checkout could not be saved. Please, try again.'));
        }
    } else {
        $this->request->data['Checkout']['product_id'] = $productId;
    }

    $products = $this->Checkout->Product->find('list');
    $users = $this->Checkout->User->find('list');
    $this->set(compact('products', 'users'));
} 
```

这将自动传播 product_id 下拉列表的“值”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:59:27.843

从您在产品索引页面上的链接看来

`public function add()`

应该读

`public function add($product_id)`

此外，您应该将其设置`$product_id`到视图中，并将其填充到输入框中`echo $this->Form->input('product_id', array('value'=>$product_id));`

# javascript - 在 Jade 中使用 indexOf

> ID：15098121
> 
> 赞同：6
> 
> 时间：2013-02-26T19:58:20.103
> 
> 标签：javascript, node.js, express, pug

在这里与 Jade & Express 合作。

`'#{value.users}'`是一个数组。

`'#{user.username}'`是一个字符串。

试图做`if '#{value.users}'.indexOf('#{user.username}')`

如果为真，那么我会显示一堆东西，否则，不应该渲染。

Jade 的语法没问题，但即使`#{value.users}'.indexOf('#{user.username}')`是假的，if 语句中的内容也会被渲染。

例如，如果 user.username =`bob`和 value.users = `['tim', 'billy']`，则该`if`语句正在通过，而这显然不应该通过。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T22:28:24.793

不应该`#{value.users.indexOf(user.username)}`吗？

里面的任何js命令`#{}`都会被执行。您应该能够将整个表达式放入单个`'#{}'`

通过说`if '#{value.users}'.indexOf('#{user.username}')`正在`'#{value.users}'`序列化为字符串，并且在使用`.indexOf()`它时在字符串中搜索，而不是在原始数组中搜索。

如果你在if语句中使用它，为什么不直接执行js呢？例如。

```
- if ( value.users.indexOf(user.username) )
    p some jade
- else
    p alternate jade 
```

[https://github.com/visionmedia/jade#a8](https://github.com/visionmedia/jade#a8)

或者，您可以使用下划线库。

[http://underscorejs.org/#indexOf](http://underscorejs.org/#indexOf)

如果您想在 Jade 模板中使用它，请务必在您的应用程序中使用 require() 或请求本地。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T20:35:51.880

我对 Jade 不熟悉，但您不需要针对 != -1 或 == 1 进行测试吗？

```
 str.indexOf('#{user.username}') ! = -1 
```

或者由于您正在针对数组进行测试，因此类似于。

```
 array.toString().indexOf('#{user.username}') != -1 
```

更新：随着 ES6 的出现，我在下面更新了一点

```
 array.includes('#{user.username}') // returns true or false
 str.includes('#{user.username}') // returns true or false 
```

# arduino - Arduino 在 uint32_t 和无符号字符之间转换

> ID：15098129
> 
> 赞同：2
> 
> 时间：2013-02-26T19:58:53.117
> 
> 标签：arduino, rgb, unsigned-char, uint32-t

我正在使用 Rainbowduino，它有一些方法将单个 rgb 值作为无符号字符，还有一些采用 24 位 rgb 颜色代码。

我想将 rgb 值转换为 uint32_t 类型的 24 位颜色代码（这样我的所有代码都只需要使用 rgb 值。

有任何想法吗？

我已经尝试过 uint32_t result = r << 16 + g << 8 + b; r = 100 g =200 b=0 给出绿色，但 r=0 g=200 b=0 没有给出任何结果

```
Rb.setPixelXY(unsigned char x, unsigned char y, unsigned char colorR, unsigned char colorG, unsigned char colorB)
This sets the pixel(x,y)by specifying each channel(color) with 8bit number.

Rb.setPixelXY(unsigned char x, unsigned char y, unit32_t colorRGB) 
This sets the pixel(x,y)by specifying a 24bit RGB color code. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:46:25.523

驱动代码为：

```
void Rainbowduino::setPixelXY(unsigned char x, unsigned char y, uint32_t colorRGB /*24-bit RGB Color*/)
{
    if(x > 7 || y > 7)
    {
     // Do nothing.
     // This check is used to avoid writing to out-of-bound pixels by graphics function. 
     // But this might slow down setting pixels (remove this check if fast disply is desired)
    }
    else
    {
    colorRGB = (colorRGB & 0x00FFFFFF);
    frameBuffer[0][x][y]=(colorRGB & 0x0000FF); //channel Blue
    colorRGB = (colorRGB >> 8);
    frameBuffer[1][x][y]=(colorRGB & 0x0000FF); //channel Green
    colorRGB = (colorRGB >> 8);
    frameBuffer[2][x][y]=(colorRGB & 0x0000FF); //channel Red
    }
} 
```

所以我会认为与上述类似：

```
uint8_t x,y,r,b,g;
uint32_t result = (r << 16) | (g << 8) | b;
Rb.setPixelXY(x, y, result); 
```

应该管用。我认为上面可能需要括号，以确保正确排序，因为“+”高于“<<”。也可能不会受伤，但“|” 更好，以免防止不受欢迎的进位。

PS请记住，当移位为无符号时，除非您想要算术移位与逻辑移位。在这点上，我不喜欢轮班，因为它们经常混乱且效率低下。相反，联合是简单而有效的。

```
union rgb {
  uint32_t word;
  uint8_t  byte[3];
  struct {
    uint8_t  blue;
    uint8_t  green;
    uint8_t  red;
  } color ;
}rgb ;

// one way to assign by discrete names.
rbg.color.blue = b;
rbg.color.green = g;
rbg.color.red = r;
//or assign using array
rgb.byte[0] = b;
rgb.byte[1] = g;
rgb.byte[2] = r;
// then interchangeably use the whole integer word when desired.
Rb.setPixelXY(x, y, rgb.word); 
```

不要搞乱跟踪班次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:13:08.637

解决此问题的一种方法是将位向左移动...

```
uint32_t result = r << 16 + g << 8 + b; 
```

# sql-server - 通过查询对组使用 PIVOT

> ID：15098133
> 
> 赞同：0
> 
> 时间：2013-02-26T19:58:59.570
> 
> 标签：sql-server, pivot

我一直在尝试为以下查询创建一个支点：

```
select mainstate, customertypeid, count(1) as [counter] from customers group by customertypeid, mainstate 
```

这个查询应该在每个州显示尽可能多的客户类型，它看起来像这样（顺序无关紧要）：

```
State|customertypeid|counter
  UT      3            200
  CA      3            500
  NY      3            300  
  UT      2            100
  CA      2            200
  NY      2            120
  UT      1             20
  CA      1             50
  NY      1             30 
```

我尝试按如下方式使用 PIVOT（我确定我错了）：

```
SELECT *
FROM ( select mainstate, customertypeid, count(1) as [counter] from customers where customertypeid in (1,2,3) and mainstate != '' group by customertypeid, mainstate) as NonPivotedDataForReport2
PIVOT
(
COUNT([counter])
FOR mainstate IN ([# of Amb],[# Whole Sale Customers],[# Retail Customers])
) AS PivotedDataForReport2 
```

我得到这个：

```
customertypeid|type1|type2|type3
       1         0     0     0
       2         0     0     0
       3         0     0     0 
```

报告应如下所示：

```
State|type1|type2|type3
UT     20    100   200
CA     50    200   500
NY     30    120   300 
```

*Ps : 我真的不想回到 CASE + SUM 语句，

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:11:09.890

这将做：

```
SELECT  mainstate [State],
        [1] type1,
        [2] type2,
        [3] type3
FROM (  SELECT mainstate, customertypeid, COUNT(1) [counter] 
        FROM customers 
        WHERE customertypeid in (1,2,3) 
        AND mainstate != '' 
        GROUP BY customertypeid, mainstate) as NonPivotedDataForReport2
PIVOT(SUM([counter]) FOR customertypeid IN ([1],[2],[3])) AS PivotedDataReport2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:11:20.603

这（可能稍微编辑）应该为您完成工作，无需案例/总和/枢轴。创建一个临时表，插入起始数据，然后根据有多少客户类型 ID 动态添加列。

```
declare @s varchar(10), @xx1 varchar(500)

select distinct state into #temp from customers

DECLARE myCursor CURSOR FOR SELECT distinct customertypeid from customers
open MyCursor
FETCH NEXT FROM myCursor into @S
WHILE @@FETCH_STATUS = 0
    begin
        set @xx1 = 'alter table #temp add ['+@s+'] varchar(5)'
        execute sp_executesql @xx1
            set @xx1 = 'update a set a.['+@s+'] = coalesce(b.counter,0) from #temp a, customers b where b.customertypeid = '+@s+' and a.state = b.state'
            execute sp_executesql @xx1
        FETCH NEXT FROM myCursor into @S
    End
Close myCursor
DEALLOCATE myCursor

select * from #temp 
```

# html - 导航工具提示错误的地方

> ID：15098138
> 
> 赞同：0
> 
> 时间：2013-02-26T19:59:24.590
> 
> 标签：html, css, wordpress, navigation, tooltip

我为此导航创建了工具提示箭头。它们出现在悬停时，但它们也出现在下拉列表的底部。我想知道是什么代码将它们保留在那里！

这是我用来实现它们的代码。

[链接到开发网站](http://mycustomdevelopment.com/campfire/)

```
.cftopnavrightlower ul > li:hover:after {
content: '';
display: block;
width: 0;
height: 0;
position: absolute;
left: 50%;
bottom: 0;
border-left: 10px solid transparent;
border-right: 10px solid transparent;
border-bottom: 10px solid #FFC700;
margin-left: -10px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:12:23.450

您需要针对箭头所针对的 UL 提供更高的特异性。ul.flyout 使用当前选择器的箭头设置样式。

这可能会更好：

```
#menu-header-nav > li:hover:after {
content: '';
display: block;
width: 0;
height: 0;
position: absolute;
left: 50%;
bottom: 0;
border-left: 10px solid transparent;
border-right: 10px solid transparent;
border-bottom: 10px solid #FFC700;
margin-left: -10px;
} 
```

# android - 带背景的旋转图像上的抗锯齿？

> ID：15098142
> 
> 赞同：1
> 
> 时间：2013-02-26T19:59:39.043
> 
> 标签：android, android-imageview, image-rotation

我创建了一个带有背景旋转的旋转图像视图，但结果是“别名”。

通常的方法是创建一个`Paint`带有抗锯齿标志，然后用它来绘制位图。但是，背景是通过视图的`draw(Canvas canvas)`方法绘制的，所以我不能使用带有`canvas.drawBitmap`方法的绘制。

这是我的代码来旋转包括背景的图像视图：

```
@Override
    public void draw(Canvas canvas)
    {
        canvas.save();
        canvas.rotate(mAngle%360, canvas.getClipBounds().exactCenterX(), canvas.getClipBounds().exactCenterY());
        canvas.scale(scaleWidth, scaleHeight, canvas.getClipBounds().exactCenterX(), canvas.getClipBounds().exactCenterY());
        super.draw(canvas);

        canvas.restore();

} 
```

和我的 onMeasure 方法，它根据角度调整高度和宽度

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec)
{
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

    int w = getDrawable().getIntrinsicWidth();
    int h = getDrawable().getIntrinsicHeight();
    double a = Math.toRadians(mAngle);

    int width = (int) (Math.abs(w * Math.cos(a)) + Math.abs(h * Math.sin(a)));
    int height = (int) (Math.abs(w * Math.sin(a)) + Math.abs(h * Math.cos(a)));

    scaleWidth = (width != 0) ? ((float) w) / width : 1;
    scaleHeight = (height != 0) ? ((float) h) / height : 1;

    setMeasuredDimension(width, height);
} 
```

那么，我怎样才能在这个旋转中“启用”抗锯齿呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T12:09:43.290

也许在画布上使用 setDrawFilter ？

> DrawFilter 子类可以安装在 Canvas 中。当它存在时，它可以（临时）修改用于绘制的油漆。有了这个，过滤器可以禁用/启用抗锯齿，或更改所有绘制的颜色。

编辑：见这里：[https ://stackoverflow.com/a/13191948/1954497](https://stackoverflow.com/a/13191948/1954497)

# c# - 将 NavigationWindow 与页面一起使用

> ID：15098143
> 
> 赞同：0
> 
> 时间：2013-02-26T19:59:45.063
> 
> 标签：c#, wpf, navigationservice, navigationwindow

在一个项目中，有很多`Page`派生类，其中一个`MainWindow`是`NavigationWindow`.

代码中真的应该有还是应该先构建`Navigate(new PageDerivedClass())` 层次树？`Page`

如果我回去并再次做同样的事情来创建一个新 `PageDerivedClass`的，应用程序不应该以某种方式处理这种情况并使用已经创建的页面而不是构建一个新的页面吗？

据我所见，新创建的页面不是`GarbageCollected`，因为您仍然可以通过`NavigationWindow`.

它是否以某种方式泄漏？

如何正确使用它？MSDN 在这里不是很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:11:14.653

NavigationWindow 不会在导航历史记录中存储内容对象的实例。相反，NavigationWindow 每次使用导航历史导航到内容对象时都会创建一个新实例。此行为旨在避免在导航到大量和大量内容时过度消耗内存。因此，从一个导航到下一个导航不会记住内容的状态。但是，WPF 提供了几种技术，您可以通过这些技术在导航历史记录中存储一段内容的一段状态。（来源[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationwindow.aspx)）

如果您真的想避免每次都创建新的，您还可以创建各种页面（Page1、Page2 等）的实例并将它们存储在您的 Application 对象中，然后像这样切换到它们：

```
 NavigationSerivce.Navigate(App.Page2); 
```

来源：[Stackoverflow 答案](https://stackoverflow.com/questions/3057422/creating-pages-or-windows-in-wpf)

# bash - Bash 脚本在没有输入重定向的情况下为 c++ 文件输入输入

> ID：15098148
> 
> 赞同：0
> 
> 时间：2013-02-26T20:00:03.707
> 
> 标签：bash

这就是我所拥有的”

```
#!/bin/bash
MAX=3

for((ctr = 0;ctr < MAX; ++ctr))
do
    ./make.o  > out$ctr.txt
    output$ctr.txt 
done 
```

所以我想将 make.o 的输出放入 out$ctr.txt 并在我的 make.o 中调用 cin，我可以将 output$ctr.txt 作为输入吗？我宁愿不使用输入重定向，因为我必须重写程序。

编辑：我不想使用 < 因为它会给我文件 output$ctr.txt 的内容，我确实想要文件的实际名称而不是内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:03:21.100

你的意思是这样的

```
./make.o < output$ctr.txt  > out$ctr.txt 
```

编辑：如果你想要这个名字，那么就这样做：

```
./make.o output$ctr.txt  > out$ctr.txt 
```

或者可能是这个`echo`名称，以便可以从 C++ 中读取`cin`：

```
echo output$ctr.txt | ./make.o  > out$ctr.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:04:03.780

但你真正想要的是：

```
./make.o output$ctr.txt >out$ctr.txt 
```

where`output$ctr.txt`是程序的*命令行参数*。

假设一个 C++ 程序，因为你提到`cin`，你处理命令行参数是这样的：

```
int main(int argc, char *argv[])
{
    if (argc < 2) {
        // argv[0] usually contains the program name
        std::cerr << "missing argument\n"
                  << "Syntax: " << argv[0] << " input-file\n";
        return -1;
    }

    char *input = argv[1]; // = "output$ctr.txt"
    // ...
} 
```

* * *

## 第一个猜测

听起来你只是想要；

```
./make.o  >out$ctr.txt <output$ctr.txt 
```

`>``FILE *stdout`重定向与和关联的文件描述符 STDOUT_FILENO `std::cout`。

`<``FILE *stdin`重定向与和关联的文件描述符 STDIN_FILENO `std::cin`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:25:31.060

只是关于你循环的评论，另一种更简单的编写方法是

```
#!/bin/bash

for i in {0..2}
do
    echo $i
done 
```

# java - Spring Beans 配置文件和 OSGI

> ID：15098152
> 
> 赞同：2
> 
> 时间：2013-02-26T20:00:12.070
> 
> 标签：java, spring, osgi, apache-servicemix

我在开发 spring 和`OSGi`基于应用程序的过程中遇到了一个问题。在我的应用程序中，我想使用 Spring`beans`配置文件，但是我不知道如何强制使用特定的配置文件。我曾经使用过一次弹簧配置文件，但在 Web 应用程序中，我遵循了本教程：http: [//java.dzone.com/articles/spring-31-environment-profiles](http://java.dzone.com/articles/spring-31-environment-profiles)。

但我不知道如何在 OSGi 环境中执行此操作，因为我找不到类似的`ApplicationContextInitializer`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:20:56.727

我不确定 spring-dm 是否支持它，因为它基于旧的 Spring。Spring 配置文件被添加到 Spring 3.1，它是在 spring-dm 是一个死项目之后很久才创建的。 [http://www.springsource.org/osgi](http://www.springsource.org/osgi)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:35:30.977

Spring-DM 可能不支持更新版本的 Spring，但[Eclipse Gemini Blueprint](http://eclipse.org/gemini/blueprint/)支持。如果您可以使用 Spring 3.1.x 或更高版本和 Blueprint，您可能可以让 Spring 配置文件正常工作。一种方法是使用您自己的实现来[扩展 Blueprint Extender 捆绑包](http://www.eclipse.org/gemini/blueprint/documentation/reference/1.0.2.RELEASE/html/app-deploy.html#app-deploy%3aextender-configuration)，根据您认为合适的`OsgiApplicationContextCreator`方式配置活动配置文件。`ApplicationContext` `Environment`例如，考虑以下自定义`BlueprintContainerCreator`实现：

```
public class MyOsgiApplicationContextCreator extends BlueprintContainerCreator {
  @Override
  public DelegatedExecutionOsgiBundleApplicationContext createApplicationContext(
      BundleContext bundleContext) throws Exception {
    DelegatedExecutionOsgiBundleApplicationContext applicationContext = super
        .createApplicationContext(bundleContext);

    if (null == applicationContext) {
      // non-spring/blueprint bundles will not build an ApplicationContext
      return null;
    }

    // determine environment profile here...
    applicationContext.getEnvironment().setActiveProfiles("myProfile");

    return applicationContext;
  }
} 
```

您需要将其放入附加到蓝图扩展包的片段包中。请执行下列操作：

您需要创建一个包含三个文件的包：META-INF/MANIFEST.MF、META-INF/spring/extender/extender.xml（xml 文件可以命名为任何带有 xml 扩展名的文件，但必须在META-INF/spring/extender 文件夹），以及你的`OsgiApplicationContextCreator`实现。您的 MANIFEST.MF 文件将需要包含 OSGi 清单标头 Fragment-Host 的`org.eclipse.gemini.blueprint.extender`. 如果您使用的是 maven-bundle-plugin，您的插件配置将如下所示：

```
...
<plugin>
  <groupId>org.apache.felix</groupId>
  <artifactId>maven-bundle-plugin</artifactId>
  <version>2.3.5</version>
  <extensions>true</extensions>
  <configuration>
    <instructions>
      <Fragment-Host>org.eclipse.gemini.blueprint.extender</Fragment-Host>
      <Export-Package>your.package,!*</Export-Package>
      <Import-Package>org.osgi.framework,org.springframework.core.env,!*</Import-Package>
    </instructions>
  </configuration>
</plugin>
... 
```

您的 extender.xml 文件将需要定义您的自定义`OsgiApplicationContextCreator`bean，其名称为`applicationContextCreator`. 该文件可能如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:util="http://www.springframework.org/schema/util"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">
  <util:properties id="extenderProperties">
    <prop key="shutdown.wait.time">30000</prop>
  </util:properties>
  <bean id="applicationContextCreator" class="your.package.MyOsgiApplicationContextCreator"/>
</beans> 
```

然后将捆绑包部署到您的环境中。您可能需要重新启动蓝图 OSGi 包（或您的服务器），具体取决于此片段包相对于蓝图包的安装顺序。

# uml - 是否有构建实时记录序列图的工具？

> ID：15098155
> 
> 赞同：2
> 
> 时间：2013-02-26T20:00:18.980
> 
> 标签：uml, sequence-diagram

## 客观的

运行一个 ASP.NET 应用程序，遍历一个过程，然后返回一个序列图。一个可以向我展示回帖和称为方法的方法-诸如此类的东西。

## 我的研究

我已经执行了以下 Google 搜索，但并没有真正找到我要查找的内容。许多参考资料都谈到了 Visual Studio 2010 及更高版本中的内置序列图。有人谈论第三方序列图生成器。但是我正在寻找一些东西来让我完成整个过程，然后告诉我发生的事件的顺序。

第二次搜索结果的相关性更低（并不那么令人惊讶），但值得一试。

[谷歌搜索 1](https://www.google.com/#hl=en&newwindow=1&safe=active&output=search&sclient=psy-ab&q=asp.net+sequence+diagram&oq=asp.net+sequence+diagram&gs_l=hp.3..0i30j0i8j0i8i30l2.381.3328.0.3689.24.17.0.7.7.1.283.2789.2j7j7.16.0.les;..0.0...1c.1.4.psy-ab.FnbpMMlmvdw&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.42965579,d.dmQ&fp=d7b2718ad022bc29&biw=1257&bih=820)

[谷歌搜索 2](https://www.google.com/#hl=en&newwindow=1&safe=active&sclient=psy-ab&q=asp.net+sequence+recorder&oq=asp.net+sequence+recorder&gs_l=hp.3...8068.9966.2.10079.9.9.0.0.0.3.390.1292.1j3j0j2.6.0.les;..0.0...1c.1.4.psy-ab.t4uA0D4qHtU&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.42965579,d.dmQ&fp=d7b2718ad022bc29&biw=1257&bih=820)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:15:26.707

[Sparx Enterprise Architect](http://www.sparxsystems.com/products/index.html)具有使用调试器允许记录程序的步骤并从中创建序列图的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:03:13.260

尝试使用[ASP.net Tracing](http://msdn.microsoft.com/en-us/library/bb386420%28v=vs.100%29.aspx)来逐个请求获取所需的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:08:59.977

在 http 请求/响应级别，我总是启动 Fiddler2 - 显示所有请求/响应、多个查看器、用于触发原始请求的作曲家等。

不写序列图，但非常有用。

# php - 限制一个电子邮件帐户可以使用 php 进行的注册数量

> ID：15098157
> 
> 赞同：1
> 
> 时间：2013-02-26T20:00:22.813
> 
> 标签：php, registration

我正在尝试构建一个 php 注册表单，它收集所有常用的姓名、姓氏、电子邮件，但我不确定如何使用相同的电子邮件地址或用户名停止多次注册。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:20:31.793

您可以在插入重复电子邮件或登录名的记录之前查询数据库。（确保使用参数化查询，这只是 SQL 的说明）

```
SELECT emailaddress, username FROM [mytable] WHERE emailaddress = 'abc@123.com' OR username = 'dude smith' 
```

如果这返回任何记录，则不要运行插入并返回一条消息，表明存在具有该电子邮件地址或用户名的用户，您可以提议将它们返回到登录页面以使用该登录。

注意：重复的电子邮件很好地表明这是同一个人，但重复的用户名并不能很好地表明这是同一个人。我会分别处理每个问题。

# actionscript-3 - 闪光朋克。将实体添加到世界的方法

> ID：15098158
> 
> 赞同：1
> 
> 时间：2013-02-26T20:00:37.890
> 
> 标签：actionscript-3, flash, entity, flashdevelop

好吧，当我浏览 Flashpunk 上的不同资源时，我发现了三种向世界添加实体的方法：

```
add(new Entity(10, 10));
//***************
var _entity:Entity;
//In constructor:
_entity = new Entity(10,10);
add(_entity);
//***************
FP.world.add(new Entity(10,10)); 
```

所以我的问题是我应该使用哪一个以及何时使用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T00:40:51.997

```
add(new Entity(10, 10)); 
```

这仅适用于`add()`定义的任何上下文。我没有使用过这个特定的库，但假设它将在一个名为类似的类`World`以及从它继承的任何东西中。

```
var entity:Entity = new Entity(10, 10);
add(entity); 
```

这只是将第一个示例分成两行。它还允许您在将其添加到世界之前和之后引用该特定实体，而在另一个示例中，您无法引用您添加的实体。

```
FP.world.add(new Entity(10,10)); 
```

在这里，我假设有一个类`FP`的静态属性`world`表示当前相关的 World 实例。它与第一个示例执行相同的操作，只是您可以在任何上下文中执行此操作。我会避免使用它；您会发现自己以此为借口从代码中的意外位置向世界添加内容，从而导致代码可读性降低、沮丧和更难的调试体验。

我的偏好是示例 2。它更具可读性，它建议您在`add`适当的上下文中使用，它允许您更改您创建的实体：

```
var entity:Entity = new Entity();
entity.property = newValue;

add(entity); 
```

# timeout - 如果流媒体源不可用，则连接超时

> ID：15098159
> 
> 赞同：0
> 
> 时间：2013-02-26T20:00:40.913
> 
> 标签：timeout, streaming, handler, android-mediaplayer

我正在尝试找出一种方法来超时连接到我的流式 http 源，如果它变得不可用。我确实进行了检查，以验证我是否已连接到互联网，无论是 WIFI 还是数据。我确实找到了一些使用处理程序的示例，并且我到达了它实际超时的地步，但它并没有停止不同类中的实际服务。这会导致模拟器中出现 ANR。关于如何处理此问题的任何建议或不同方法？感谢您的时间 ！

```
public Runnable mUpdateTimeTask = new Runnable() { 
public void run() { 
    Toast.makeText(MainActivity.this, "Running Thread", Toast.LENGTH_LONG).show();
        if (RadioService.isMusicActive()==false){
            stopPlaying();
            } 
        } 
     }; 

private void stopPlaying() {        
    buttonPlay.setEnabled(true);
    buttonStopPlay.setEnabled(false);
    stopService(new Intent(this, RadioService.class));//
}  

if (v == buttonPlay) {                      
            startPlaying();
            mHandler.postDelayed(mUpdateTimeTask, 5000);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:51:48.943

在更多地使用它和一些小的修改之后，这段代码按我预期的方式工作。也许它会帮助其他人。

# .htaccess - 转发 URL 时如何获得干净的 URL？

> ID：15098160
> 
> 赞同：1
> 
> 时间：2013-02-26T20:00:43.437
> 
> 标签：.htaccess, redirect

我正在尝试尽可能无缝地将 URL 重定向到另一个站点，并且我在站点的 htaccess 文件中使用以下内容：

> 重定向/durhamchapelhill [http://gds.chapelhilluumc.org/](http://gds.chapelhilluumc.org/)

重定向有效，但生成的 URL 很乱：[http ://gds.chapelhilluumc.org/?/durhamchapelhill](http://gds.chapelhilluumc.org/?/durhamchapelhill)

应该是： http: [//gds.chapelhilluumc.org/](http://gds.chapelhilluumc.org/)

我可以对此使用一些输入。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:05:55.463

## 根据评论更新了 .htaccess 内容

```
AddHandler php5-script .php

RewriteEngine On
RewriteBase /

RewriteRule ^durhamchapelhill$ http://gds.chapelhilluumc.org [R]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

# c# - 如何强制遵守 .NET 中的给定架构？

> ID：15098166
> 
> 赞同：8
> 
> 时间：2013-02-26T20:01:04.657
> 
> 标签：c#, .net, schema, xmlreader

假设我有一个模式，我希望输入文档符合该模式。我根据这样的架构加载文件：

```
// Load the ABC XSD
var schemata = new XmlSchemaSet();
string abcSchema = FooResources.AbcTemplate;
using (var reader = new StringReader(abcSchema))
using (var schemaReader = XmlReader.Create(reader))
{
    schemata.Add(string.Empty, schemaReader);
}

// Load the ABC file itself
var settings = new XmlReaderSettings
{
    CheckCharacters = true,
    CloseInput = false,
    ConformanceLevel = ConformanceLevel.Document,
    IgnoreComments = true,
    Schemas = schemata,
    ValidationType = ValidationType.Schema,
    ValidationFlags = XmlSchemaValidationFlags.ReportValidationWarnings
};

XDocument inputDoc;
try
{
    using (var docReader = XmlReader.Create(configurationFile, settings))
    {
        inputDoc = XDocument.Load(docReader);
    }
}
catch (XmlSchemaException xsdViolation)
{
    throw new InvalidDataException(".abc file format constraint violated.", xsdViolation);
} 
```

这可以很好地检测文件中的琐碎错误。然而，因为模式被锁定到一个命名空间，像下面这样的文档是无效的，但会偷偷溜过去：

```
<badDoc xmlns="http://Foo/Bar/Bax">
  This is not a valid document; but Schema doesn't catch it
  because of that xmlns in the badDoc element.
</badDoc> 
```

我想说只有我拥有架构的命名空间才能通过架构验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:52:13.507

尽管看起来很愚蠢，但您要查看的内容实际上是在`XmlReaderSettings`对象上：

```
settings.ValidationEventHandler += 
    (node, e) => Console.WriteLine("Bad node: {0}", node); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T20:26:26.917

我最终确定的解决方案是基本上检查根节点是否在我期望的命名空间中。如果不是，那么我会像对待真正的模式验证失败一样对待它：

```
// Parse the bits we need out of that file
var rootNode = inputDoc.Root;
if (!rootNode.Name.NamespaceName.Equals(string.Empty, StringComparison.Ordinal))
{
    throw new InvalidDataException(".abc file format namespace did not match.");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T20:11:41.433

设置 ReportValidationWarnings 标志。请参阅[http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidationflags.aspx](http://msdn.microsoft.com/en-us/library/system.xml.schema.xmlschemavalidationflags.aspx)和[http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.validationflags .aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreadersettings.validationflags.aspx)。

# html - 如何将 @font-face 与 Gotham-Light 字体一起使用？

> ID：15098167
> 
> 赞同：4
> 
> 时间：2013-02-26T20:01:06.287
> 
> 标签：html, css, font-face

我想用 css 编码在网上展示 Gotham-Light，但我不会编码。我有两种字体，分别名为 Gotham-Light.eot、Gotham-Light.ttf。现在如何在浏览器上使用？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T17:40:30.460

像这样定义你的字体：

```
@font-face{
   font-family: gotham-light;
   src: url('gotham-light.ttf') url('gotham-light.eot');
} 
```

并像往常一样使用它

```
#someelement {
    font-family: gotham-light;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-11T22:58:45.500

```
@font-face {
    font-family: 'GothamLight';
    src: url('/fonts/Gotham-Light.eot');
    src: url('/fonts/Gotham-Light.otf') format('opentype'),
         url('/fonts/Gotham-Light.eot?iefix') format('embedded-opentype'),
         url('/fonts/Gotham-Light.woff') format('woff'),
         url('/fonts/Gotham-Light.ttf') format('truetype'),
         url('/fonts/Gotham-Light.svg#gothamlight') format('svg');} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:38:59.600

这不适用于 IE，但 FF 和 Chrome 你可以这样做

```
@font-face{
font-family: gotham-light;
src: url('gotham-light.ttf');
} 
```

或者

```
@font-face{
font-family: gotham-light;
src: url('gotham-light.eot');
} 
```

然后将 font-family 应用于您想要的 css 类

# javascript - 使用 jQuery 向页面添加视频

> ID：15098168
> 
> 赞同：-2
> 
> 时间：2013-02-26T20:01:07.127
> 
> 标签：javascript, jquery

无论如何仅使用 jQuery 在页面中嵌入视频。基本上我会寻找一个代码，如果你在控制台中运行，它会将视频从 URL 嵌入到页面。请给我一些示例代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:07:23.550

您将不得不使用一些 HTML 来创建 DOM 元素，但这里有一个使用硬编码 HTML 的示例：[http ://www.w3schools.com/html/tryit.asp?filename=tryhtml_video_html5_4](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_video_html5_4)

要使用 jQuery 将视频附加到正文，您可以这样做：

```
$('body').append('<video width="320" height="240" controls autoplay><source src="movie.ogg" type="video/ogg"><source src="movie.mp4" type="video/mp4"><source src="movie.webm" type="video/webm"><object data="movie.mp4" width="320" height="240"><embed width="320" height="240" src="movie.swf"></object></video>'); 
```

如果您想回答更具体的问题，请发布其他信息。

# css - Wordpress 页脚跨浏览器浮动错误行为

> ID：15098171
> 
> 赞同：0
> 
> 时间：2013-02-26T20:01:10.763
> 
> 标签：css, html, wordpress, footer

我的 wordpress 的页脚在 chrome 和 Firefox 中的行为不同。在 chrome 中，我的页脚的右侧部分会移动，即使它应该与左侧部分对齐。在Firefox中它工作正常。

可以在此处找到该页面的骨架：http: [//sometestdomain.comeze.com/3-2/](http://sometestdomain.comeze.com/3-2/) 任何想法如何解决这个问题？

这是我的 CSS 的相关部分

```
div.front-widgets * h3 {
    color: #ffffff;
}

.template-front-page.two-sidebars .widget-area .front-widgets {
    background: #2c2c2c;
    float: left;
    width: 60.9375%;
    margin-bottom: 24px;
    margin-bottom: 1.714285714rem;
    height: 17.857142rem;
    color: #ffffff !important;
}
.template-front-page .widget-area .widget {
    padding: 20px 20px 0 20px;
}
.template-front-page .widget-area .widget:nth-child(odd) {
    clear: right;
}
.template-front-page .widget-area .widget:nth-child(even),
.template-front-page.two-sidebars .widget-area .front-widgets + .front-widgets {
    float: right;
    width: 39.0625%;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T02:01:48.930

在 Chrome 中，.front-widgets 的父 div 混淆了第二个 .front-widgets 元素的正确呈现。如果您只是为 #secondary 对象分配一些高度，它将解决问题。

就像是：

```
#secondary {
    min-height: 200px;
} 
```

应该为 chrome 解决问题 =)

# cakephp - 日期之间的 CakeDC 插件搜索

> ID：15098172
> 
> 赞同：0
> 
> 时间：2013-02-26T20:01:14.810
> 
> 标签：cakephp, date, search, cakedc

如何使用这个插件（CakeDC 的一个分支）在日期之间进行搜索？

[https://github.com/dereuromark/search](https://github.com/dereuromark/search)

我读过文档，但我做不到。即使我只搜索了一个日期，我也没有成功。

```
public $filterArgs = array(
    'my_date' => array('type' => 'like')
); 
```

在视图中：

```
echo $this->Form->input('my_date', array('div' => false, 'label' => 'Date', 'dateFormat'     => 'DMY', 'minYear' => date('Y') - 80)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:31:28.813

有两种方法可以使用 CakeDC 进行日期搜索，

第一：只寻找特定的年份

在模型中

```
'creationdate'  => array('type' => 'like'), 
```

在控制器动作中：

```
 $this->Prg->commonProcess();

if(array_key_exists('creationdate',$this->passedArgs))
$this->passedArgs['creationdate'] = $this->passedArgs['creationdate']['year']; 
```

并认为：

```
 echo $this->Form->input('creationdate', array(
    'label'             => __('Creation date'),
    'dateFormat'    => 'Y',
    'minYear'           => date('Y') - 100,
    'maxYear'           => date('Y'),
    'empty'             => true
    )
); 
```

第二种方式：查找日期范围

在模型中：

```
 'creationDateBetween'       => array(
            'type'      => 'expression',
            'method'    => 'CreationDateRangeCondition',
            'field'     => 'MODEL.creationdate BETWEEN ? AND ?',
        ),

public function CreationDateRangeCondition($data = array()){
    if(strpos($data['creationDateBetween'], ' - ') !== false){
        $tmp = explode(' - ', $data['creationDateBetween']);
        $tmp[0] = $tmp[0]."-01-01";
        $tmp[1] = $tmp[1]."-12-31";
        return $tmp;
    }else{
        return array($data['creationDateBetween']."-01-01", $data['creationDateBetween']."-12-31");
    }
} 
```

在视图中：请注意，我使用的是年份范围的滑块

```
 echo $this->Form->input('creationDateBetween', 
    array(
        'label'     => __('Creation date between X and Y'),
        'div'       => false,
        'style' => 'border: 0; color: #49AFCD; font-weight: bold;'
    )
);

?><div id="creationDateBetweenSlider" style="padding:0;"></div><?php

<script>
$(function() {

    var     creationDateBetweenSlider = $( "#creationDateBetweenSlider" ),
        institutionCreationDateBetween  = $( "#MODELCreationDateBetween" ), 

lock = 0;

creationDateBetweenSlider.slider({
                range: true,
                min: 1900,
                max: 2050,
                values: [ 2000, 2013 ],
                slide: function( event, ui ) {
                    MODELCreationDateBetween.val(  ui.values[ 0 ] + " - " + ui.values[ 1 ] );
                }
            });
        if(lock != 0) MODELCreationDateBetween.val( creationDateBetweenSlider.slider( "values", 0 ) + " - " + creationDateBetweenSlider.slider( "values", 1 ) );

lock = 1;

    });
</script> 
```

希望能帮助到你 ！

# c++ - 尽管 Clang 拒绝 type_info 不完整 已经包括了

> ID：15098174
> 
> 赞同：6
> 
> 时间：2013-02-26T20:01:20.637
> 
> 标签：c++, c++11, clang, libstdc++

我不知道为什么 Clang 拒绝以下代码：

```
#include <typeinfo>
#include <exception>

const char* get_name( const std::exception_ptr eptr )
{
  return eptr.__cxa_exception_type()->name();
}

int main() {} 
```

GCC 没问题，但是 Clang 抱怨说它`type_info`是一个不完整的类型：

```
$ g++-4.7 -std=c++0x -O3 -Wall -Wextra t.cc -o t
$ clang++-3.2 -std=c++0x -O3 -Wall -Wextra t.cc -o t
t.cc:6:37: error: member access into incomplete type 'const class type_info'
  return eptr.__cxa_exception_type()->name();
                                    ^
/usr/bin/../lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/exception_ptr.h:144:19: note: forward declaration of
      'std::__exception_ptr::type_info'
      const class type_info*
                  ^
1 error generated.
$ 
```

**问题：**如何使用 Clang 修复它？还是我错过了什么，而 Clang 拒绝代码是正确的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:36:46.843

感谢@HowardHinnant 的评论，我设法解决了这个问题。这个问题在预处理器输出中变得很明显：libstdc++甚至在它*声明*之前就包含`<exception>`了. 这使得 Clang 假设了一个新的 forward-declaration 。解决方案很简单，因为它是非法的：`<type_info>` *`std::type_info``std::__exception_ptr::type_info`*

 *```
namespace std { class type_info; }

#include <typeinfo>
#include <exception>

const char* get_name( const std::exception_ptr eptr )
{
  return eptr.__cxa_exception_type()->name();
}

int main() {} 
```

似乎我应该检查 libstdc++ 是否已经有一个错误报告，如果没有，创建一个。

**更新：**现在为 GCC 4.7.3+ 修复了错误[# 56468](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=56468)*

# ruby-on-rails - Carrierwave 后台程序 sidekiq 没有工人

> ID：15098175
> 
> 赞同：4
> 
> 时间：2013-02-26T20:01:24.340
> 
> 标签：ruby-on-rails, carrierwave, sidekiq

我在本地设置了carrierwave后台程序以及sidekiq和sidekiq web。我可以看到已将作业添加到 sidekiq Enqueued 中，但它们从未运行。什么会阻止他们执行？

设置：Rails 3.2.11 Unicorn 4.6.1 Sidekiq 2.7.5carrierwave 0.8.0carrierwave_backgrounder 0.2.0

后台配置。

```
CarrierWave::Backgrounder.configure do |c|
  c.backend :sidekiq, queue: :carrierwave
end 
```

模型

```
class EntryImage < ActiveRecord::Base
  attr_accessible :alt, :image_path

  belongs_to :imageable, :polymorphic => true

  validates :image_path, presence: true

  mount_uploader :image_path, ImageUploader
  process_in_background :image_path

end 
```

上传者

```
# encoding: utf-8

class ImageUploader < CarrierWave::Uploader::Base
  include ::CarrierWave::Backgrounder::Delay
  # Include RMagick or MiniMagick support:
  # include CarrierWave::RMagick
  include CarrierWave::MiniMagick

  # Include the Sprockets helpers for Rails 3.1+ asset pipeline compatibility:
  # include Sprockets::Helpers::RailsHelper
  # include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  if Rails.env.test?
    storage :file
  else
    storage :fog
  end

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Provide a default URL as a default if there hasn't been a file uploaded:
  # def default_url
  #   # For Rails 3.1+ asset pipeline compatibility:
  #   # asset_path("fallback/" + [version_name, "default.png"].compact.join('_'))
  #
  #   "/images/fallback/" + [version_name, "default.png"].compact.join('_')
  # end

  # Process files as they are uploaded:
  # process :scale => [200, 300]
  #
  # def scale(width, height)
  #   # do something
  # end

  # Create different versions of your uploaded files:
  # version :thumb do
  #   process :scale => [50, 50]
  # end
  process :resize_and_pad => [1280, 720, "#111111"]

  version :thumb do
    process :resize_and_pad => [384,216, "#111111"]
  end

  version :thumblarge do
    process :resize_and_pad => [640,360, "#111111"]
  end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
  def extension_white_list
     %w(jpg jpeg gif png)
  end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
  # def filename
  #   "something.jpg" if original_filename
  # end

end 
```

![在此处输入图像描述](../Images/a56d4a4a82ee2a9d2af01be00323e8ff.png)

检查注册工人返回空

```
1.9.3p194 :006 > Sidekiq::Client.registered_workers
 => [] 
```

配置/sidekiq.yml

```
:concurrency: 1 
```

配置/初始化程序/sidekiq.rb

```
require 'sidekiq'

Sidekiq.configure_client do |config|
  config.redis = { :size => 1 }
end

Sidekiq.configure_server do |config|
  # The config.redis is calculated by the
  # concurrency value so you do not need to
  # specify this. For this demo I do
  # show it to understand the numbers
  config.redis = { :size => 3 }
end 
```

我也以几种方式从命令行启动了sidekiq

```
bundle exec sidekiq -q high,5 default
bundle exec sidekiq 
```

感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T20:21:44.570

好的，我错误地启动了sidekiq。-q 需要设置为队列名称。

# python - 如何计算短语并将短语用作 Python 中的标题？

> ID：15098182
> 
> 赞同：1
> 
> 时间：2013-02-26T20:01:46.623
> 
> 标签：python, text, count

我有一个文件，我试图在其中获取短语计数。在某些文本行中，我需要计算大约 100 个短语。作为一个简单的例子，我有以下内容：

```
phrases = """hello
name
john doe
"""

text1 = 'id=1: hello my name is john doe.  hello hello.  how are you?'
text2 = 'id=2: I am good.  My name is Jane.  Nice to meet you John Doe'

header = ''
for phrase in phrases.splitlines():
    header = header+'|'+phrase
header = 'id'+header 
```

我希望能够得到如下所示的输出：

```
id|hello|name|john doe
1|3|1|1
2|0|1|1 
```

我把标题放下了。我只是不确定如何计算每个短语并附加输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:15:42.540

创建标题列表

```
In [6]: p=phrases.strip().split('\n')

In [7]: p
Out[7]: ['hello', 'name', 'john doe'] 
```

使用使用[单词边界](http://docs.python.org/2.7/library/re.html#regular-expression-syntax)的正则表达式，即`\b`获得避免部分匹配的出现次数。该标志`re.I`是使搜索不区分大小写。

```
In [11]: import re

In [14]: re.findall(r'\b%s\b' % p[0], text1)
Out[14]: ['hello', 'hello', 'hello']

In [15]: re.findall(r'\b%s\b' % p[0], text1, re.I)
Out[15]: ['hello', 'hello', 'hello']

In [16]: re.findall(r'\b%s\b' % p[1], text1, re.I)
Out[16]: ['name']

In [17]: re.findall(r'\b%s\b' % p[2], text1, re.I)
Out[17]: ['john doe'] 
```

在它周围放一个`len()`以获得找到的模式数量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:05:21.490

您可以使用来计算字符串中的单词`.count()`

```
>>> text1.lower().count('hello')
3 
```

所以这应该有效（除了下面评论中提到的不匹配）

```
phrases = """hello
name
john doe
"""

text1 = 'id=1: hello my name is john doe.  hello hello.  how are you?'
text2 = 'id=2: I am good.  My name is Jane.  Nice to meet you John Doe'

texts = [text1,text2]

header = ''
for phrase in phrases.splitlines():
    header = header+'|'+phrase
header = 'id'+header
print header

for id,text in enumerate(texts):
    textcount = [id]
    for phrase in header.split('|')[1:]:
        textcount.append(text.lower().count(phrase))
    print "|".join(map(str,textcount)) 
```

上面假设你有一个按它们`id`的顺序排列的文本列表，但如果它们都以你的开头，`'id=n'`你可以这样做：

```
for text in texts:
    id = text[3]  # assumes id is 4th char
    textcount = [id] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:19:13.107

虽然它没有回答你的问题（@askewchan 和 @Fredrik 已经这样做了），但我想我会就你的其余方法提供一些建议：

通过在列表中定义您的短语可能会更好地为您服务：

```
phrases = ['hello', 'name', 'john doe'] 
```

然后，您可以跳过创建标头的循环：

```
header = 'id|' + '|'.join (phrases) 
```

并且您可以`.split ('|')[1:]` 省略 askewchan 答案中的部分，例如，只支持`for phrase in phrases:`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:37:52.767

```
phrases = """hello
name
john doe
"""

text1 = 'id=1: hello my name is john doe.  hello hello.  how are you?'
text2 = 'id=2: I am good.  My name is Jane.  Nice to meet you John Doe'

import re
import collections

txts = [text1, text2]
phrase_list = phrases.split()
print "id|%s" % "|".join([ p for p in phrase_list])
for txt in txts:
    (tid, rest) = re.match("id=(\d):\s*(.*)", txt).groups()

    counter = collections.Counter(re.findall("\w+", rest))
    print "%s|%s" % ( tid, "|".join([str(counter.get(p, 0)) for p in phrase_list])) 
```

给出：

```
id|hello|name|john|doe
1|3|1|1|1
2|0|1|0|0 
```

# javascript - Javascript DOM 图像到画布

> ID：15098183
> 
> 赞同：0
> 
> 时间：2013-02-26T20:01:52.937
> 
> 标签：javascript, image, html, canvas, cross-domain

我需要从 DOM 中先前加载的图像创建一个画布元素。我怎么能用javascript做到这一点？

我的图像来源在另一台服务器上。因此我有跨域问题......

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:44:41.220

所以我创建了[这个小提琴](http://jsfiddle.net/E6SNu/1/)，展示了如何加载图像、跨域然后在画布上显示..

```
 var canvas = document.getElementById('myCanvas');
    var context = canvas.getContext('2d');
    var imageObj = new Image();

    var img = new Image();
    img.onload = function(){
        context.drawImage(img, 69, 50);

    }
    img.src="http://indianautosblog.com/wp-content/uploads/2013/01/2014-Ferrari-F150-Enzo-successor-rendered.jpeg"; 
```

这个 JS 展示了如何从另一个站点加载图像..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:04:04.367

[这里](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/) 只传递`drawImage`图像对象。

# java - 在 Java 中读/写时如何强制使用 UTF-16？

> ID：15098186
> 
> 赞同：7
> 
> 时间：2013-02-26T20:02:12.403
> 
> 标签：java, file-io, character-encoding, utf-16

我看到您可以通过 指定 UTF-16 作为字符集`Charset.forName("UTF-16")`，并且可以通过 创建新的 UTF-16 解码器`Charset.forName("UTF-16").newDecoder()`，但我只看到指定 a `CharsetDecoder`on`InputStreamReader`的构造函数的能力。

那么如何在 Java 中读取任何流时指定使用 UTF-16？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T20:04:58.820

输入流处理原始字节。当您直接从输入流中读取时，您得到的只是与字符集无关的原始字节。

根据定义，将原始字节解释为字符需要某种翻译：如何将原始字节转换为可读字符串？该“翻译”以字符集的形式出现。

这个“添加”层是由 Readers 实现的。因此，要从流中读取字符（而不是字节），您需要`Reader`在流的顶部构造某种（取决于您的需要）。例如：

```
InputStream is = ...;
Reader reader = new InputStreamReader(is, Charset.forName("UTF-16")); 
```

这将导致`reader.read()`使用您指定的字符集读取字符。如果您想阅读整行，请`BufferedReader`在顶部使用：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(is, Charset.forName("UTF-16")));
String line = reader.readLine(); 
```

# ruby-on-rails - 在 RhoMobile 上访问 Ruby 参数时遇到问题

> ID：15098187
> 
> 赞同：2
> 
> 时间：2013-02-26T20:02:13.603
> 
> 标签：ruby-on-rails, ruby, params, rhomobile, rhodes

我是Ruby新手，所以请原谅我的无知。我真的不知道如何表达这个问题，所以这也可能是我没有在网上找到答案的部分原因。

我正在使用 Rho Elements，并且正在尝试将某些内容从一页传递到另一页。我取得了一些不错的进展，但遇到了一些我不明白的事情。我可以像这样通过一个ID

```
<input type="hidden" name="id" value="<%= @orderdetails.object %>"/> 
```

然后我获取 ID（现在才这样做以确保我确实获得了 ID）

```
@id = @params['id'] 
```

然后重定向到另一个页面

```
redirect url_for(:action => :newpage, :id => @id). 
```

这就是我的问题开始的地方。当我调试应用程序时，我通过了重定向并输入 :newpage

```
def newpage
    @orderdetails = OrderDetails.find(@params['id'])
    if @orderdetails
      render :action => :newpage, :back => url_for(:action => :index)
    else
      redirect :action => :index
    end
end 
```

一旦在这里我检查

```
@params['id] 
```

这就是显示的内容。

```
@params {"id"=>"{131113212443313.17}"}  
"id"    "" 
```

@params {"id"=>"{131113212443313.17}"} 由 Eclipse 显示，当我进入变量 "id" "" 时显示。

为什么我可以看到我想用来获取刚刚创建的 orderdetails 的 ID，但实际变量也为空？

**编辑：这是我试图传递的信息。

```
@params {"id"=>"131113212443313.17", "next"=>"asleftnext", "orderdetails"=>
{"AsFoundMeterRead"=>"", "AsFoundImage"=>""}}   
"id"    "131113212443313.17"    
"next"  "asleftnext"    
"orderdetails"  {"AsFoundMeterRead"=>"","AsFoundImage"=>""} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:07:46.593

`params`在控制器中使用，而不是`@params`. 访问密钥的规范形式也是`params[:id]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:22:44.080

就像它在上一个答案中所说的那样，您可以通过这种方式访问​​控制器中的参数

```
@id = params[:id] 
```

此外，如果您使用的是 Rails 3 或更高版本，您可能希望使用新的 url 方式不那么冗长，因此更易于阅读。

```
newpage_controllername_url(:id => @id) 
```

您也可以使用此方法询问路径。

如果您不知道是否正确传递参数，您可以使用显示内容

```
params.inspect 
```

您可以使用检查查看任何对象的内容

# php - 处理来自多个第三方 API 的登录

> ID：15098196
> 
> 赞同：3
> 
> 时间：2013-02-26T20:03:09.960
> 
> 标签：php, api, login, accounts

我需要实现一个允许用户通过 Facebook、Twitter 和 LinkedIn API 登录的帐户系统。我正在寻找使用 MySQL 和 PHP 在后端执行此操作的最简单和最有效的方法。这是我想到的起点：

首先，我将创建两个数据库模式。

*   用户（ID、姓名、密码哈希）
*   thirdPartyLogins (userId, serviceName, token)

然后，我将运行以下查询以使用第三方 API 提供的令牌获取用户记录。

```
SELECT * FROM users, thirdPartyLogins
WHERE serviceName = $serviceName 
AND token = $token
AND thirdPartyLogins.userID = users.id
LIMIT 1 
```

这是处理第三方登录的有效方法吗？您会建议任何调整（或现有框架）以加快此类帐户系统的开发吗？

提前感谢您分享您的智慧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T10:16:43.320

而不是开发自己的系统，您必须开发和维护，您应该只使用现有的库：

[http://hybridauth.sourceforge.net/](http://hybridauth.sourceforge.net/)

这个SO问题也在谈论它： [PHP - Simple way to allow login using Facebook, Google and Twitter](https://stackoverflow.com/questions/7797481/php-simple-way-to-allow-login-using-facebook-google-and-twitter)

希望这可以帮助！

[编辑]实际上这似乎是一个相当新的和很好的资源： [http ://www.9lessons.info/2013/03/oauth-login-for-linkedin-facebook.html](http://www.9lessons.info/2013/03/oauth-login-for-linkedin-facebook.html)

# ibm-mobilefirst - Worklight http 适配器问题

> ID：15098203
> 
> 赞同：3
> 
> 时间：2013-02-26T20:03:28.523
> 
> 标签：ibm-mobilefirst, worklight-adapters

2个简单的问题：

1.  是否所有的 http 请求都通过 http 适配器首先通过 worklight 服务器？

2.  如果是这样，那是否意味着即使是对公共网站的 http 适配器请求也会说对雅虎网站的股票价格请求也会先通过 worklight 服务器，然后再通过雅虎网站？如果是这样，那么我如何在不通过 worklight 服务器的情况下发出 http 请求？我只想在没有“中间”服务器（即 workligth 服务器）的情况下直接访问 yahoo 网站

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-27T04:08:21.630

> 1）是否所有的http请求都通过http适配器首先通过worklight服务器？

是的。[Worklight 适配器通过使用Mozilla Rhino](https://developer.mozilla.org/en-US/docs/Rhino)在 Worklight Server 上执行 JavaScript 来工作。[您可以在IBM Worklight 入门模块](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html)中阅读有关适配器的更多信息。查看[模块 5 和 6](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#server-side-development)以了解适配器的具体细节。还有一些代码示例，您可以在接下来尝试。API 文档位于[IBM InfoCenter](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp)中。还有一篇[Developer Works 文章](https://www.ibm.com/developerworks/mydeveloperworks/blogs/worklight/entry/using_ibm_worklight_http_adapters_with_rest_json_services7?lang=en)讨论了您可能会发现有用的适配器。

> 2）如果是这样，那是否意味着即使是对公共网站的 http 适配器请求也会说对雅虎网站的股票价格请求也会先通过 worklight 服务器，然后再通过雅虎网站？

是的。

> 我只想在没有“中间”服务器（即 workligth 服务器）的情况下直接访问 yahoo 网站

IBM Worklight 附带 jQuery，您可以使用[ajax 方法](http://api.jquery.com/jQuery.ajax/)。这是一个例子：

```
WLJQ.ajax( "http://finance.yahoo.com/d/quotes.csv?s=DOW+MSFT+AAPL+GOOG&f=snl1" )
.done(function (data) {
    console.log(data);
}); 
```

请注意，WLJQ 是 Worklight 发布的 jQuery 版本的名称空间。你可以使用`jQuery`or`$`做:`var $ = WLJQ;`或`var jQuery = WLJQ;`.

你应该得到这样的东西：

```
"DOW","Dow Chemical Comp",30.89
"MSFT","Microsoft Corpora",27.37
"AAPL","Apple Inc.",448.97
"GOOG","Google Inc.",790.13 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:52:47.213

如果您在客户端使用适配器 API，那么您的请求将通过 Worklight 服务器。您仍然可以从客户端发出 AJAX 请求并跳过服务器。本质上，您将以与在 Cordova 中相同的方式发出服务器请求，这意味着使用白名单来允许您的请求访问第三方服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T07:06:21.573

> 是否所有的 http 请求都通过 http 适配器首先通过 worklight 服务器？

绝对不是，这完全取决于你。如果您使用的是 HTTP 适配器，那么 HTTP 请求将从 Worklight Server 发起，它会为您返回响应。

> 如果是这样，那是否意味着即使是对公共网站的 http 适配器请求也会说对雅虎网站的股票价格请求也会先通过 worklight 服务器，然后再通过雅虎网站？如果是这样，那么我如何在不通过 worklight 服务器的情况下发出 http 请求？我只想在没有“中间”服务器（即 workligth 服务器）的情况下直接访问 yahoo 网站

如果您使用的是 HTTP 适配器，那么它将按照第一个答案通过 Worklight Server。

如果您不想要中间服务器，那么您可以使用传统的 HTTP 请求方式，就像通过 Javascript /Ajax 层或本机（Android/iOS/Windows..）

当涉及到 Worklight 用来确保从已注册设备发起请求的安全性时，适配器非常有用 - 身份验证是通过交换设备令牌等来完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T17:31:46.827

Of course You can access it directly without calling any adapter functions using simple jquery ajax calls.

```
$.ajax({
       url: url,
       data: data,
       success: success,
       dataType: dataType
}); 
```

or

```
$.get(url, function() {
    alert( "success" );
})
.done(function() {
    alert( "second success" );
})
.fail(function() {
    alert( "error" );
})
.always(function() {
   alert( "finished" );
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-26T21:50:03.690

我认为您错过了关于 WL 中适配器架构的重要一点。适配器存在于服务器中，因此根据定义，您使用它发出的任何请求都将“通过”服务器。但是，信息不会通过您的 WAS（或 Tomcat）服务器。

您是否有不想使用适配器的原因？我建议使用它，因为它可以更轻松地从 RESTful http 调用或数据库查询中提取数据。

如果您确实想绕过适配器，则跨域授权存在问题。我在这方面没有太多经验，但是您可以使用 jQuery.ajax() 之类的东西来解决它。

# php - 无法在 Windows 7 XAMPP 上安装 gmagick

> ID：15098204
> 
> 赞同：2
> 
> 时间：2013-02-26T20:03:29.817
> 
> 标签：php, apache, xampp, gmagick

我安装了 XAMPP 1.8.1 和 PHP 5.4.7。当我添加`php_gmagick_ts.dll`到我的 php.ini 时（我确保我需要**ts**而不是**nts**版本），在重新启动 Apache 时出现以下错误：

> 无法在动态链接库 php5ts.dll 中定位程序入口点 php_checkuid_ex

在那之后：

> PHP 启动：无法加载动态库 'C:\xampp\php\ext\php_gmagick_ts.dll' - 找不到指定的过程。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T11:51:58.137

AFAIK 目前没有在 Windows 上与 PHP 5.4 一起使用的 GraphicsMagick DLL。

由于最新 PHP 版本的 php_gmagick_(n)ts.dll 的可用性始终是个问题，我建议您要么退回到 PHP 5.3（[此处提供 DLL](http://valokuva.org/)），要么使用独立版本的 GraphicsMagick 并从 PHP 中调用它使用 exec() 命令。

# android - 更改 Android JellyBean 上的操作栏高度

> ID：15098206
> 
> 赞同：23
> 
> 时间：2013-02-26T20:03:31.957
> 
> 标签：android, tabs, android-actionbar, actionbarsherlock, android-4.2-jelly-bean

我最近一直在开发一个 Android 应用程序，我需要在其中为标签栏设置自定义布局和尺寸。到目前为止，我这样做的方式是使用 Jake Wharton 的 ActionBarSherlock 库来支持预HoneyComb Android 版本，并将样式应用于我编辑actionBarSize 样式项的应用程序。

现在，我一直在 Galaxy S3 上测试应用程序（上面有 Jellybean），标签栏高度不再根据`actionBarSize`值改变。

于是我开始翻看JellyBean的代码，在`ActionBarPolicy`类中找到了这个方法：

```
 public int getTabContainerHeight() {
            TypedArray a = mContext.obtainStyledAttributes(null, R.styleable.ActionBar,
               com.android.internal.R.attr.actionBarStyle, 0);
            int height = a.getLayoutDimension(R.styleable.ActionBar_height, 0);
            Resources r = mContext.getResources();
            if (!hasEmbeddedTabs()) {
                // Stacked tabs; limit the height
                height = Math.min(height,
                        r.getDimensionPixelSize(R.dimen.action_bar_stacked_max_height));
            }
            a.recycle();
            return height;
    } 
```

从我在这种方法中收集的内容来看，当应用程序处于纵向模式时，JellyBean 似乎通过将标签栏高度设置为“action_bar_stacked_max_height”尺寸值（在 4.1 的`/values/dimen.xml`文件中为 48dp）来限制 TabBar 的高度)，即使我已将操作栏高度设置为`actionBarSize`.

我已经尝试通过在我自己的文件中将它设置为我自己的值来覆盖这个维度值`dimen.xml`，但我没有运气。它没有用。

我的问题：

你们知道我可以覆盖“action_bar_stacked_max_height”尺寸值的方法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-27T17:29:29.957

尝试将`android:actionBarSize`和`actionBarSize`放在您正在使用的主题下，如下所示：

```
<style name="Theme.white_style" parent="@android:style/Theme.Holo.Light.DarkActionBar">
        <item name="android:actionBarSize">55dp</item>
        <item name="actionBarSize">55dp</item>
</style> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-10T10:41:27.603

尝试使用`android:height`如下：

```
<style name="AppActionBar">
    <item name="android:height">50dp</item>
</style>

<style name="MainActivityStyle" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/AppActionBar</item>
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T17:52:09.107

在我看来，这是故意的，我不知道为什么。[bools.xml](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/values/bools.xml)中有一些变量

```
<bool name="action_bar_embed_tabs">true</bool>
<bool name="action_bar_embed_tabs_pre_jb">false</bool> 
```

正如您已经提到的，在[ActionBarPolicy.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/com/android/internal/view/ActionBarPolicy.java)中嵌入选项卡的高度限制为 48dip 。这就是为什么这种行为只能在 Android JellyBean 或更高版本中看到。我找不到比进行一些 java 反射更好的解决方案。所以这里是代码

```
private void hackJBPolicy() {
    View container = findScrollingTabContainer();
    if (container == null) return;

    try {
        int height = getResources().getDimensionPixelSize(R.dimen.action_bar_height);
        Method method = container.getClass()
                .getDeclaredMethod("setContentHeight", Integer.TYPE);
        method.invoke(container, height);
    } catch (NoSuchMethodException e) {
        Log.e(LOG_TAG, e.getLocalizedMessage(), e);
    } catch (IllegalArgumentException e) {
        Log.e(LOG_TAG, e.getLocalizedMessage(), e);
    } catch (IllegalAccessException e) {
        Log.e(LOG_TAG, e.getLocalizedMessage(), e);
    } catch (InvocationTargetException e) {
        Log.e(LOG_TAG, e.getLocalizedMessage(), e);
    }
}

private View findScrollingTabContainer() {
    View decor = getWindow().getDecorView();
    int containerId = getResources().getIdentifier("action_bar_container", "id", "android");

    // check if appcompat library is used
    if (containerId == 0) {
        containerId = R.id.action_bar_container;
    }

    FrameLayout container = (FrameLayout) decor.findViewById(containerId);

    for (int i = 0; i < container.getChildCount(); i++) {
        View scrolling = container.getChildAt(container.getChildCount() - 1);
        String simpleName = scrolling.getClass().getSimpleName(); 
        if (simpleName.equals("ScrollingTabContainerView")) return scrolling;
    }

    return null;
} 
```

使用`hackJBPolicy()`你的方法`onCreate`。请注意，我使用了 appcompat 库中的 ActionBar。这是使用此解决方法的示例项目的[链接。](https://github.com/kothead/no-jb-policy)

毕竟，在我看来，如果您的 ui 设计与指导线有点远，那么将来创建与屏幕顶部对齐的自定义视图而不是在选项卡模式下使用 ActionBar 会更容易。

# gxt - EditorGrid 中的字段验证

> ID：15098207
> 
> 赞同：0
> 
> 时间：2013-02-26T20:03:33.527
> 
> 标签：gxt

让我们首先说我在 GWT 2.3.0 上使用 GXT 2.2.5。

我的目标是向用户展示从查询中检索到的一组数据，他需要为其中一个字段指定一个值。例如，假设查询返回电话号码列表，用户需要分别指定号码类型（即家庭、办公室、手机或寻呼机）。

因此，我将 EditorGrid 视为一种潜在的解决方案。网格将显示类型和编号，并通过 CellEditor 将 ComboBox 附加到第一个字段。

要求是用户必须为每个号码选择一个类型。我该如何执行？我可以在 ComboBox 上将 allowBlank 设置为 false，但我该如何管理呢？如何验证网格？

我一直在寻找答案，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:21:30.820

我建议使用**Grid**，而不是**EditorGrid**。在**Grid**中使用**RowEditor**时，用户保存行更改时会触发 allowBlank 验证（或任何其他字段验证器）。

 **如果您不熟悉 Grid，这里有一个小例子：

```
ColumnConfig colNombre = new ColumnConfig("name", "Name", 200);
            TextField<String> txtNombre = new TextField<String>();
            txtNombre.setAllowBlank(false);
            txtNombre.getMessages().setBlankText("IT CANT BE EMPTY.");
            colNombre.setEditor(new CellEditor(txtNombre));
            configs.add(colNombre);

re = new RowEditor<BeanModel>();
        re.addListener(Events.AfterEdit, new Listener<RowEditorEvent>() {
            public void handleEvent(RowEditorEvent e) {
                editar(e);
            }
        });
        re.setClicksToEdit(ClicksToEdit.TWO);

        grid = new Grid<BeanModel>(STORE, new ColumnModel(configs));
        grid.addPlugin(re); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T11:31:37.507

有一个`SimpleComboBox<String>`存储所有类型的号码（家庭、办公室等）。将其附加到`EditorGrid`. 设置 的`setEditable(false)`属性`SimpleComboBox<String>`，并确保默认情况下在组合框中选择了有效的“类型”（使用`setValue(...)`）。

这样，当您的 Grid 被渲染时，电话号码旁边将有类型，并选择了默认值。

我觉得这是一个很好的方法，而不是最初有一个空白值的组合框，然后要求用户通过显示验证错误来填充它。**

# php - 在页面重新加载时将两个变量传递给 URL

> ID：15098208
> 
> 赞同：2
> 
> 时间：2013-02-26T20:03:39.133
> 
> 标签：php

在我的页面上，我有两个下拉框：一个用于日期列表，一个用于选项。日期框填充如下：

```
echo "<form name='selectedDate' action='page.php' method='GET' class='auto-style1'>";
echo "<select name='date' onchange='this.form.submit()'>";
echo "<option value=select>Select a Date</option>";
while ($row = mysql_fetch_array($result))
{
    $date = date("m-d-Y",strtotime($row['date']));

    if($date==date("m-d-Y"))
    {
        echo "<option>TODAY</option>";
    }
    else
    {
        echo "<option>" . $date . "</option>";
    }
}
echo "</select>";

echo "<br />";          
echo "<noscript>";
echo "<input type='submit' value='Select'>";
echo "</noscript>";
echo "</form>"; 
```

另一个下拉列表填充为：

```
echo "<form name='selectedFormat' action='page.php' method='GET' class='auto-style1'>";
echo "<select name='option' onchange='this.form.submit()'>";
echo "<option value=select>Select a Option</option>";
echo "<option value=Artist>Artist</option>";
echo "<option value=Song>Song</option>";
echo "</select>";

echo "<br />";          
echo "<noscript>";
echo "<input type='submit' value='Select1'>";
echo "</noscript>";
echo "</form>"; 
```

现在，您注意到它们都已为`Submit()`更改做好了准备。如果我更改第一个，浏览器中的 URL 变为`page.php?date=02-26-2013`，如果我更改第二个，浏览器中的 URL 将变为`page.php?option=Song`。

我遇到的问题是，如果我将 更改`date`为较旧的日期，然后更改`option`，我的页面将恢复为`date`当前日期。我尝试将操作设置为不同的 URL：

```
$url = "musicInfo.php?date=" .  $nonFormatedDate . "&option=" . $option; 
```

我将两种形式都更改为：

```
echo "<form action='" . $url . "' method='GET' class='auto-style1'>"; 
```

如果 I `echo $url;`，它会正确显示浏览器 URL 应该是什么。但是，浏览器 URL 仍然由我最后使用的下拉列表填充。

我的问题是，如何在任一提交时传递两个变量？

因此，例如，如果我将 更改`date`为`01-13-2012`，然后将 更改`option`为`Song`，我如何确保`date`将也通过？反之亦然。或者，如果我将日期更改为`01-12-2012`，是否可以`date`在重新加载时选择下拉框？

我想做的网站：http: [//www.legendary-immersion.com/random/test.php](http://www.legendary-immersion.com/random/test.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:20:48.150

正如人们在评论中所说，每个请求只能提交一份表格。因此，最好的方法是在表单中隐藏您需要的数据。

在您的 php 文件中添加此代码

```
$date = isset($_GET["date"]) ? $_GET["date"] : "";
$option = isset($_GET["option"]) ? $_GET["option"] : ""; 
```

然后在第一种形式中添加

```
<input type="hidden" name="option" value="<?php echo $option; ?>"/> 
```

并在第二种形式中添加

```
<input type="hidden" name="date" value="<?php echo $date; ?>"/> 
```

作为每个表单提交的结果，您将获得类似的 url

```
page.php?date=yourdate&option=youroption 
```

最好的问候，希望这会有所帮助

# python - 关于 Flask 中的 as_view 函数

> ID：15098215
> 
> 赞同：7
> 
> 时间：2013-02-26T20:04:02.637
> 
> 标签：python, mongodb, listview, flask

本[例](http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-flask-mongoengine/)中的代码：

```
posts.add_url_rule('/', view_func=ListView.as_view('list'))
posts.add_url_rule('/<slug>/', view_func=DetailView.as_view('detail')) 
```

没看懂上面函数中传入的参数，这里`as_view`的目的是什么？`list``detail`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:42:27.217

它为路由系统创建端点，因此您可以使用`url_for('posts.list')`或类似的[API 文档在这里](http://flask.pocoo.org/docs/api/#flask.views.View.as_view)。

# java - Java - 字节流与字符流？

> ID：15098222
> 
> 赞同：15
> 
> 时间：2013-02-26T20:04:10.267
> 
> 标签：java, stream, char, byte

标题是不言自明的。在很多 JRE javadocs 中，我到处都能看到短语“*字节流*”和“*字符流*”。

**但它们不是一样的吗？**还是它们在 Java 领域略有不同（例如解释不同）？提前致谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-26T20:06:32.567

在 Java 中， a`byte`与 a 不同`char`。因此，字节流不同于字符流。字节用于任意二进制数据；字符专门用于表示字符串构建块的数据。

> 但如果 char 的宽度只有 1 个字节

除了**它不是。** 根据[JLS §4.2.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1) a`char`是范围内的数字：

> 从`'\u0000'`到`'\uffff'`包含，即从0到65535

但 a`byte`是范围内的数字

> 从 -128 到 127（含）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-26T20:10:46.267

字节流只是普通字节，就像在 HEX 编辑器中打开文件时看到的一样。

字符与普通字节不同。ASCII 编码每个字符恰好使用 1 个字节，但对于许多其他编码来说并非如此。例如，[UTF-8 编码](http://en.wikipedia.org/wiki/UTF-8#Description)可以使用 1 到 4 个字节来编码单个字符。字符流旨在抽象出底层编码，并产生`char`一种编码（在 Java 中，`char`并`String`使用 UTF-16 编码）。

根据经验：

*   在处理文本时，必须使用字符流将字节解码为具有适当编码的字符。

*   当您处理二进制数据或二进制和文本混合时，您必须使用字节流，否则它没有意义。如果一个字节序列以某种编码表示一个字符串，那么您总是可以挑选出这些字节并使用[`String(byte[] bytes, Charset charset)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String(byte[],%20java.nio.charset.Charset))构造函数来取回字符串。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-26T20:07:13.477

它们是不同的。`char`是 Java 中的 2 字节数据类型：`byte`是 1 字节数据类型。

编辑：`char`也是无符号类型，而`byte`不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:13:36.680

一般来说，最好根据它们的大小来谈论流，而不是它们携带的东西。字节流比字符流更直观，因为字符流使我们必须仔细检查 char 确实是一个字节，而不是 unicode char 或任何花哨的东西。

char 是一种表示形式，可以用一个字节表示，但一个字节总是一个字节。当字节不再是 8 位时，所有的世界都会被烧毁。

# html - 可变高度的浮动元素将兄弟姐妹向下推

> ID：15098223
> 
> 赞同：2
> 
> 时间：2013-02-26T20:04:14.693
> 
> 标签：html, css

我有 6 个元素，它们应该产生两行，每行 3 个元素，所以我浮动它们。但是元素的内容变化很大，当一个更高的元素阻止后续兄弟元素一直向左浮动时，布局就会中断：

![浮动元素破坏布局](../Images/db9689fec0bdd7c7705829958a594183.png)

这是示例 CSS：

```
figure { width: 30%; float: left; margin-left: 1%; font-size: small; outline: solid #999 1px; }
img { max-width: 100%; } 
```

和 HTML：

```
<figure>
  <img src="http://placekitten.com/150/200?image=1" alt="Kitten 1" />
  <figcaption>Bacon ipsum dolor sit amet short ribs pork chop pork belly spare ribs shoulder tri-tip beef ribs turkey brisket short loin tenderloin ground round. </figcaption>
</figure>
<figure>
  <img src="http://placekitten.com/150/200?image=2" alt="Kitten 2" />
  <figcaption>Short ribs cow corned beef, beef tenderloin swine biltong short loin. </figcaption>
</figure>
<figure>
  <img src="http://placekitten.com/150/200?image=3" alt="Kitten 3" />
  <figcaption>Boudin chuck ground round, pig pastrami salami turkey ham hock beef ribs tongue. </figcaption>
</figure>
<figure>
  <img src="http://placekitten.com/150/200?image=4" alt="Kitten 4" />
  <figcaption>Tri-tip pork loin tongue corned beef shankle ball tip. </figcaption>
</figure>
<figure>
  <img src="http://placekitten.com/150/200?image=5" alt="Kitten 5" />
  <figcaption>Turkey swine tenderloin spare ribs sausage filet mignon hamburger. Leberkas andouille prosciutto, bresaola tri-tip short loin meatloaf shank pig shoulder spare ribs ribeye. </figcaption>
</figure>
<figure>
  <img src="http://placekitten.com/150/200?image=6" alt="Kitten 6" />
  <figcaption>Pastrami andouille tongue tri-tip jerky.</figcaption>
</figure> 
```

还有一个 JSFiddle 示例：http: [//jsfiddle.net/KatieK/5Upbt/](http://jsfiddle.net/KatieK/5Upbt/)

如何让第二行`figure`元素排列在前 3 个元素下方？

HTML/CSS 解决方案优于 JavaScript/jQuery 解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:07:47.037

仅使用 CSS 的解决方案怎么样？添加此规则：

```
figure:nth-of-type(3n+1) {
    clear:left;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/5Upbt/2/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T20:10:01.143

您可以使用`:nth-child`伪类每隔四个元素清除一次。

```
figure:nth-child(4n){clear: left;} 
```

编辑：

4n并没有完全削减它。3n + 1 就是你想要的。

```
figure:nth-child(3n + 1){clear: left;} 
```

[http://jsfiddle.net/jMCng/1/](http://jsfiddle.net/jMCng/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T20:21:25.310

这是我测试过的解决方案：http: [//jsfiddle.net/5Upbt/7/](http://jsfiddle.net/5Upbt/7/)

我修改你的身材风格

```
figure { display: inline-block; vertical-align: top; width: 30%; margin-left: 1%; font-size: small; outline: solid #999 1px; } 
```

这是基于这里更通用的解决方案：http: [//jsfiddle.net/bazmegakapa/Ft9d2/](http://jsfiddle.net/bazmegakapa/Ft9d2/)

# ssis - SSIS FTP 任务在 FTP 服务器不可用时重试

> ID：15098224
> 
> 赞同：0
> 
> 时间：2013-02-26T20:04:31.120
> 
> 标签：ssis, ftp

我有一个简单的 SSIS 包，它从数据库中提取数据并创建一个文件。该文件然后通过 FTP 传输到另一台服务器。我遇到了一个问题，即 FTP 服务器不可用并且包在未发送文件的情况下失败。我希望能够让包继续尝试连接，直到服务器恢复并且 FTP 可以成功。

有没有人对我如何实现这一点有想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:14:14.403

在 FTP 连接管理器中，而不是 FTP 任务本身，您可以设置连接重试次数。

# java - 如何去除图表周围的白色边框？

> ID：15098227
> 
> 赞同：1
> 
> 时间：2013-02-26T20:04:39.820
> 
> 标签：java, charts, jfreechart

这是稍微修改的代码`org.jfree.chart.demo.BarChartDemo1`：

```
public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {

                CategoryDataset dataset = createDataset();

                JFreeChart chart = createChart(dataset);

                //chart.setBorderVisible(false); // no effect
                //chart.setPadding(new RectangleInsets(0, 0, 0, 0)); // no effect

                ChartPanel chartPanel = new ChartPanel(chart);
                chartPanel.setFillZoomRectangle(true);
                chartPanel.setMouseWheelEnabled(true);
                //chartPanel.setPreferredSize(new Dimension(500, 270));
                chartPanel.setBounds(100,100,640,480);

                JFrame frame = new JFrame();
                frame.setLayout(null);
                //frame.setContentPane(chartPanel);
                frame.add(chartPanel);
                frame.pack();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    } 
```

它画

![在此处输入图像描述](../Images/16d81b83924a2f3f7327fc0ae8d811dd.png)

是否可以删除图表周围的白色边框？一些尝试在代码中，没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:27:29.643

既然您已经消除了域和范围轴，那么还有一个您没有考虑的填充来源。你错过了这个：

```
chart.getPlot().setInsets( new RectangleInsets(){
        public void trim( Rectangle2D area ) {};
    }); 
```

您在发布的示例中看到的空白区域是由于`Plot`您发布的代码正在操作`JFreeChart`. 解决方案代码中匿名子类的原因是为了消除原始实现中的 1 像素“光环”。

编辑：

我又摆弄了一下，发现除了插入修复之外，您可能需要也可能不需要这个。我对此并没有深入探讨，但是传递一个子类`CategoryPlot`似乎至少可以解决这个特殊情况。

```
private class WrappedCategoryPlot extends CategoryPlot
{
  @Override
  protected AxisSpace calculateAxisSpace( Graphics2D g2, Rectangle2D plotArea )
  {
     return new AxisSpace();
  }
} 
```

# apache-flex - Flex 4.6、AIR 3.5、桌面应用程序、navigateToURL、_self

> ID：15098231
> 
> 赞同：0
> 
> 时间：2013-02-26T20:04:56.390
> 
> 标签：apache-flex, browser, air

我有一个使用 Flex 4.6 和 Air 3.5 构建的桌面 AIR 应用程序。我使用 navigateToURL 在默认浏览器中启动 URL，工作正常：

```
var request : URLRequest = new URLRequest  ( "http://localhost:8890/test.html" );
var urlVariables : URLVariables = new URLVariables ();
urlVariables['activity'] = "xyz.json";
request.data = urlVariables;
request.method = URLRequestMethod.GET;
navigateToURL(request, "_self"); 
```

该应用程序允许用户构建一些 JSON 内容 (xyz.json)，然后在测试平台 (test.html) 中对其进行测试。

第二次和以后我这样做，我得到一个新标签（我正在使用 Chrome）。我想要的是它出现在与最后一个相同的选项卡中。请注意，我使用了“_self”。如果我传递任何字符串，我会得到相同的结果。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T01:54:51.677

我相信，当您调用 NavigateToURL() 时，它会从桌面应用程序强制启动一个新窗口（容器）。

如果可以，您可以在服务器上创建一个单独的“接收者”页面来接收数据（对用户不可见）然后使用 NavigateToURL 启动一个“查看器”页面，该页面将包含一个 ajax 脚本来检查和更新从“接收者页面。

我会检查 URLLoader() 类。我多次将它用于我的 Web 服务脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:17:13.600

我不相信有可能强制浏览器重用相同的选项卡 - 那将是浏览器行为，而不是 AIR 行为（即：您将更改浏览器设置中的预期行为；例如：始终在新选项卡中打开内容）。

# android - 解析字符串并将所有数据库值打印到文本视图

> ID：15098235
> 
> 赞同：1
> 
> 时间：2013-02-26T20:05:14.307
> 
> 标签：android, xml, textview

我正在尝试根据输入`SQLite`数据库的值为我的 android 应用程序着色文本。我已经设置了 3 个`textviews`并为所有这些设置了不同的文本颜色。

代码看起来像这样

```
String arr[] = data.split("..\n\n");
for(int i = 0; i < arr.length; i++)
{
    System.out.println("arr["+i+"] = " + arr[i].trim());

    if(arr[i].contains("High Severity"))
    {
       // String highArr = arr[i];
        textView.setVisibility(View.VISIBLE);
        textView.setText(highArr+"\n");
        textView.setTextColor(Color.RED);
    }
    else if(arr[i].contains("Low Severity"))
    {
        textView3.setVisibility(View.VISIBLE);
        textView3.setText(arr[i]+"\n");
        textView3.setTextColor(Color.GREEN);
    }
    else if(arr[i].contains("Medium Severity"))
    {
        textView2.setVisibility(View.VISIBLE);
        textView2.setText(arr[i]+"\n");
        textView2.setTextColor(Color.rgb(255, 136, 0));
    }

} 
```

我已经解析了包含我的数据库表的所有值的字符串，但是当我尝试我的 for 循环时，它只打印出最新输入的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:19:30.650

看起来您的 arr[] 可能只有一个条目。您应该使用调试器来查看您的循环实际运行了多少次以及数组的实际长度是多少。

编辑：

我刚刚意识到你只有三个文本视图。当然，textview 会显示最后一个，因为每次调用 settext 方法都会重置文本。有几种方法可以做你正在尝试的事情，但我不确定你的应用程序是如何设置的。您应该尝试动态创建文本视图，为其设置文本，然后将该文本视图添加到您设置的线性布局或相对布局中。或者，您可以根据需要使用 baseadapter 或任何其他适配器的自定义实现在列表视图中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T12:10:56.143

我会像这样更改我的代码：

```
String arr[] = data.split("..\n\n");
String Hseverity = "", Mseverity = "", Lseverity = "";
for(int i = 0; i < arr.length; i++)
{
    System.out.println("arr["+i+"] = " + arr[i].trim());

    if(arr[i].contains("High Severity"))
    {
       // String highArr = arr[i];
        textView.setVisibility(View.VISIBLE);
        Hseverity += arr[i] +"\n";
        textView.setText(Hseverity);//do this to save each High Severity entry
        //same for the other severity levels
        textView.setTextColor(Color.RED);
    }
    else if(arr[i].contains("Low Severity"))
    {
        textView3.setVisibility(View.VISIBLE);
        Lseverity += arr[i]+"\n";
        textView3.setText(Lseverity);
        textView3.setTextColor(Color.GREEN);
    }
    else if(arr[i].contains("Medium Severity"))
    {
        textView2.setVisibility(View.VISIBLE);
        Mseverity += arr[i] + "\n";
        textView2.setText(Mseverity);
        textView2.setTextColor(Color.rgb(255, 136, 0));
    }

} 
```

# java - 黑莓收音机应用程序流式音频

> ID：15098239
> 
> 赞同：0
> 
> 时间：2013-02-26T20:05:38.887
> 
> 标签：java, blackberry, java-me, audio-streaming, blackberry-5

我正在 BB 5 中构建一个广播应用程序。我有一个 .pls url，我可以在其中找到我的 url 来播放流。我的问题是。我需要构建一个缓冲区来播放此流，因为下载的文件太大而无法立即播放，但我不知道如何构建此缓冲区。任何的想法？我认为它必须是类似的东西

[流媒体BB](http://supportforums.blackberry.com/t5/Java-Development/Streaming-media-Start-to-finish/ta-p/488255)

但我想要更简单的东西，只播放和停止广播流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:23:28.280

好的，我已经解决了这个问题，使用上面链接中提到的代码中的流包。我已经`CircularByteBuffer`从文章中显示的小链接添加了。straming 包中有一个类需要一些修复（在某些`BufferOverflowException`和 resize 方法中`CircularByteBuffer`）。现在我的项目正在运行！伟大的！

**添加**

修复在`StreamingPlayer`类中，调用了带有一些 int 参数的方法 resize。在`CircularByteBuffer`代码中，方法是`resize()`，所以不需要 int 参数，它使缓冲区容量加倍。因此，我使用不带 int 参数的 resize() 更改了该调用。另一个修复是关于`BufferOverflowException`. 在代码中，这个对象有一个`String`，但它给出了一个错误。我删除这个`Strings`。

# java - 使用 GoogleMap V2 时，Android 应用程序不断崩溃

> ID：15098243
> 
> 赞同：0
> 
> 时间：2013-02-26T20:05:47.783
> 
> 标签：java, android, google-maps, google-maps-api-2

我对 GoogleMap 有一个恼人的问题。我已经测试过了，地图显示正常。但现在我想设置我的位置启用，以便地图自动从手机所在的位置开始。现在每次我运行应用程序时它都会崩溃。而且我注意到，当我使用 GoogleMap 语法时，应用程序崩溃了。我试图找出这个问题并在网上四处寻找没有结果。

这是我的 Maps.java 文件：

```
package test.test;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class Maps extends FragmentActivity implements LocationListener{

    GoogleMap googlemap;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.maps);
        SupportMapFragment mf = (SupportMapFragment)     getSupportFragmentManager().findFragmentById(R.id.map);
        googlemap = mf.getMap();

        googlemap.setMyLocationEnabled(true);
        googlemap.setMapType(GoogleMap.MAP_TYPE_NORMAL);

    } 
```

地图.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:name="com.google.android.gms.maps.SupportMapFragment" />

</LinearLayout> 
```

最后是我的androidmanifest：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="test.test"
        android:versionCode="1"
        android:versionName="1.0" >

        <uses-sdk
            android:minSdkVersion="8"
            android:targetSdkVersion="16" />

        <permission
            android:name="test.test.permission.MAPS_RECEIVE"
            android:protectionLevel="signature" />

        <uses-permission android:name="test.test.permission.MAPS_RECEIVE" />
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
        <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
        <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

        <uses-feature
            android:glEsVersion="0x00020000"
            android:required="true" />

        <application

....
<meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="my key is here" />
    </application> 
```

这是错误日志：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{test.test/test.test.Maps}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
at android.app.ActivityThread.access$600(ActivityThread.java:141)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5039)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at test.test.Maps.onCreate(Maps.java:23)
at android.app.Activity.performCreate(Activity.java:5104)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:05:46.457

该片段尚未准备好或设备上的 Google Play 服务出现问题。

从[文档](http://developer.android.com/reference/com/google/android/gms/maps/SupportMapFragment.html#getMap%28%29)（强调添加）：

> **返回**
> 谷歌地图。**如果片段的视图尚未准备好，则为 Null。**如果片段生命周期`onCreateView(LayoutInflater, ViewGroup, Bundle)`尚未完成，则可能会发生这种情况。如果 Google Play 服务不可用，也会发生这种情况。如果之后 Google Play 服务可用且 Fragment 已通过`onCreateView(LayoutInflater, ViewGroup, Bundle)`，则再次调用该方法将初始化并返回 GoogleMap。

'maps' 演示应用程序显示了一种模式来处理这个问题，如果需要在创建和恢复时尝试设置地图：

```
/**
 * This shows how to create a simple activity with a map and a marker on the map.
 * <p>
 * Notice how we deal with the possibility that the Google Play services APK is not
 * installed/enabled/updated on a user's device.
 */
public class BasicMapActivity extends FragmentActivity {
    /**
     * Note that this may be null if the Google Play services APK is not available.
     */
    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.basic_demo);
        setUpMapIfNeeded();
    }

    @Override
    protected void onResume() {
        super.onResume();
        setUpMapIfNeeded();
    }

    /**
     * Sets up the map if it is possible to do so (i.e., the Google Play services APK is correctly
     * installed) and the map has not already been instantiated.. This will ensure that we only ever
     * call {@link #setUpMap()} once when {@link #mMap} is not null.
     * <p>
     * If it isn't installed {@link SupportMapFragment} (and
     * {@link com.google.android.gms.maps.MapView MapView}) will show a prompt for the user to
     * install/update the Google Play services APK on their device.
     * <p>
     * A user can return to this FragmentActivity after following the prompt and correctly
     * installing/updating/enabling the Google Play services. Since the FragmentActivity may not have been
     * completely destroyed during this process (it is likely that it would only be stopped or
     * paused), {@link #onCreate(Bundle)} may not be called again so we should call this method in
     * {@link #onResume()} to guarantee that it will be called.
     */
    private void setUpMapIfNeeded() {
        // Do a null check to confirm that we have not already instantiated the map.
        if (mMap == null) {
            // Try to obtain the map from the SupportMapFragment.
            mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                    .getMap();
            // Check if we were successful in obtaining the map.
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    /**
     * This is where we can add markers or lines, add listeners or move the camera. In this case, we
     * just add a marker near Africa.
     * <p>
     * This should only be called once and when we are sure that {@link #mMap} is not null.
     */
    private void setUpMap() {
        mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
    }
} 
```

# silverstripe - SilverStripe 3：循环内模板中的备用值

> ID：15098248
> 
> 赞同：0
> 
> 时间：2013-02-26T20:06:06.063
> 
> 标签：silverstripe

我正在尝试创建一个页面，显示来自持有者子页面的最新图像。每行将在以下示例之间交替：

大图 | 小图像

小图 | 大图

大图 | 小图像

等等....

模板.ss

```
<div class="row">
<div class="span8">  
  LARGE IMAGE
</div>  
<div class="span4"> 
  SMALL IMAGE
</div>
</div> 
<div class="row">
<div class="span4"> 
  Small Image
</div>  
<div class="span8"> 
 Large IMage
</div> 
</div>  
</div> 
<div class="row">
<div class="span8">  
 Large Image
</div> 
<div class="span4">  
 Small Image
</div> 
</div> 
```

如何在模板文件中处理它？

我试图编写一个自定义函数来处理 Holder Controller 中的最新图像

控制器.php

```
$works = WorkPage::get(); 
```

这仅返回图像 ID，我尝试了左连接，但它不返回文件路径。

```
$works = WorkPage::get()->leftJoin("File", "\"File\".\"ID\" = \"WorkPage\".\"FeaturedImageID\""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:14:18.333

```
File::get()->
    leftJoin("SiteTree", "\"SiteTree\".\"ParentID\" = ".$this->ID)->
    leftJoin("WorkPage", "\"WorkPage\".\"ID\" = \"SiteTree\".\"ID\"")->
    where("\"File\".\"ID\" = \"WorkPage\".\"FeaturedImageID\""); 
```

可能是您所追求的 sql 查询（虽然未经测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:53:44.030

我就是这样做的，不确定这是否是最好的方法，但它确实有效。

```
$works = WorkPage::get();

foreach ($works as $work) {
  //Build the IMage Object so we can add it to the Work Object
  $ImageObj = File::get()->byID($work->FeaturedImageID);
  $Image->ID = $ImageObj->ID;
  $Image->Title = $ImageObj->Title;
  $Image->Name = $ImageObj->Name;
  $Image->Filename = $ImageObj->Filename;
  $work->ImageObj = $Image;

  $ImagePath = $work->ImageObj->Filename;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:16:14.497

只是为了评论您测试的加入：

这不起作用： $works = WorkPage::get()->leftJoin("File", "\"File\".\"ID\" = \"WorkPage\".\"FeaturedImageID\"");

该联接没有得到联接表的数据；本质上，您是请求工作页对象，没有将其作为数据。如果您以相反的方式完成了加入，您将能够获得您所追求的信息

无论如何，正如 Columba 已经提到的那样，您可以通过调用该字段来正确获取关系，因为“函数”有一个并且有很多，例如 $this->hasmanyrelation() < 返回数据列表（是 ss3 的 coorect 术语 :) ）。当在 tempate 上使用 $hasmanyrelation 关系时，它会神奇地获得集合。

此外，您应该使用 Link() 在我的意见中获取文件的路径，因为它也适用于 sitetree 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T03:57:15.697

你的问题不是100%清楚。我不确定您是否在模板循环和条件或从 WorkPage 获取图像对象时遇到问题，所以我会尝试回答这两个问题。

要创建交替布局，最简单的方法是使用基于循环计数是奇数还是偶数的条件。一个未经测试的快速示例：

```
<% loop $Works %>
<div class="row">
    <% if $Odd %>
    <div class="span8">LARGE IMAGE</div>  
    <div class="span4">SMALL IMAGE</div>
    <% else %>
    <div class="span4">SMALL IMAGE</div>  
    <div class="span8">LARGE IMAGE</div>
    <% end_if %>
</div>    
<% end_loop %> 
```

文档参考位于[http://docs.silverstripe.org/framework/en/reference/templates#position-indicators](http://docs.silverstripe.org/framework/en/reference/templates#position-indicators)

要在循环中获得不同大小的图像，您可以简单地使用`$FeaturedImage->CroppedImage(xxx,xxx)`. 这假设您每行都有“工作”并且每个工作有两个图像，但正如我所说的问题并不那么清楚，所以如果我的假设不正确，您将需要提供有关您的模型和您正在尝试的内容的更多信息达到。

# python - 如何使用 wxFormBuilder 生成 python 代码？

> ID：15098252
> 
> 赞同：2
> 
> 时间：2013-02-26T20:06:28.267
> 
> 标签：python, wxformbuilder

我在 wxBuilderForm 中创建了一个带有按钮的简单表单（框架）。

当我生成代码时（在 wxFormBuilder 中按 F8 时），它会生成以下三个文件：

```
noname.cpp
noname.h
test1.fbp 
```

如果我与我下载并包含以下文件的模板进行比较..：

```
gui.fbp
gui.py
gui.pyc
main.py
MainFrame.py
MainFrame.pyc 
```

我想知道为什么我不能生成（通过在 wxFormBuilder 中按 F*）Python 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T15:36:04.557

实际上，我相信正确的方法是设置项目属性，以便将“code_generation”属性设置为 Python。此外，您需要为“文件”属性提供一个值，否则您将继续获取名为“无名”的文件。

您应该能够通过选择对象树中的根节点来访问项目的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T21:49:08.090

要将生成代码从默认 C++ 更改为 Python，只需单击左侧项目树顶部的项目。然后在右侧的对象属性下，您将能够在“code_generation”设置下选择要输出的语言，并且可以在“file”设置中更改文件名。默认情况下，它将添加一个 .py 扩展名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T19:22:12.690

别介意伙计们。

这非常简单。

底部有一个名为 python 的标签。这是您获取代码的地方。

# c# - 为什么不能将常量字符串分配给常量字符串类型？

> ID：15098256
> 
> 赞同：3
> 
> 时间：2013-02-26T20:06:46.643
> 
> 标签：c#, string

据我所知，`"H" + 'i'`产生一个常量字符串的连接。
我或 C# 错了吗？

代码 ：

```
const string b = "H" + 'i';
// Error : The expression being assigned to 'b' must be constant 
```

这算作错误还是功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T20:07:45.667

这是一个微妙之处。

`'i'`是一个**字符**文字。
将其添加到字符串涉及装箱转换（调用`string operator +(string x, object y)`，如规范中所指定），这不是常量表达式。

有关更多信息，请参阅我[之前的回答](https://stackoverflow.com/a/14244846/34397)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:09:01.097

也许 VS2010 错误将有助于定义它：

```
Constant initializer must be compile-time constant 
```

所以 "H" + 'i' 是一个运行时值。

# eclipse - Ant“JAVA_HOME 不指向 JDK”- 但它确实

> ID：15098258
> 
> 赞同：21
> 
> 时间：2013-02-26T20:06:52.943
> 
> 标签：eclipse, ant, java

自从我更新到 java 1.7.0_52（或大约）后，我无法运行我的 Ant build.xml。多年来，我一直在我的 Windows 7 笔记本电脑上通过 Eclipse 本地运行它 - 但是有了这个最新的 jave jdk 更新，有些不同（？）。

```
BUILD FAILED
C:\workspace\WaterAspectsModel3\build.xml:329: Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK.
It is currently set to "D:\Morten\Java\jdk1.7.0_52" 
```

这是我的jdk！所以 JAVA_HOME 指向一个 jdk（从错误消息中也可以清楚地看到）。像往常一样，我的路径中有带有 bin 文件夹的 JAVA_HOME。我已经配置了 Eclipse - 外部工具配置 - 使用指向相同 D:\Morten\Java\jdk1.7.0_52 的 JRE（通过“单独的 JRE”设置）。而且我尝试了许多其他配置 - 都没有运气。

我一直在这里和其他地方阅读列表中的大量答案，并认为我已经尝试了所有建议。大多数似乎是JAVA_HOME实际上指向jre并且只需要更正为jdk或者有一个“;”的情况。在路径或类似的东西。这些似乎都不适用于我的情况。

有什么建议么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-10-07T20:29:56.343

通过 Eclipse 运行 ANT 时，我收到了相同的消息。

**什么对我有用：**

1.  在 Eclipse 中，访问菜单：“Window -> Preferences”；
2.  在树上访问“Ant -> Runtime”；
3.  访问类路径选项卡；
4.  展开“全局条目”项；
5.  在全局条目中，路径`tools.jar`是错误的。它指向的是旧版本的 Java；
6.  我删除了错误的条目并使用“添加外部罐子”按钮添加了正确的条目。有效。

![在此处输入图像描述](../Images/a267649b8c6b7492708557a2b62ba3b0.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-16T10:15:03.890

`Had to copy C:\Program Files\Java\jdk1.6.0_10\lib\tools.jar to C:\Program Files\Java\jre6\lib\ext`来自[这里](http://forums.drftpd.org/viewtopic.php?f=5&t=2978)的解决方案“ ”对我很有帮助并且对我有用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-26T20:20:49.103

真正的消息是 Ant 找不到`com.sun.tools.javac.Main`.

其中，再加上最新的“Sun”（Oracle）JDK 是 1.7.0_13（或者可能是 _14，但绝对不是您的安装目录指示的“_52”）这一事实，让我认为您没有使用发行版蚂蚁认得。您可以通过运行`jar tvf $JAVA_HOME/lib/tools.jar`并查找该类来验证这一点。

[Ant 手册](http://ant.apache.org/manual/Tasks/javac.html)讨论了使用不同编译器的方法。由于我只使用过“Sun”编译器，恐怕无法给你任何指点。

* * *

编辑：您也可以尝试`fork="yes"`在构建文件中进行设置。这应该运行编译器可执行文件，而不是尝试调用编译器类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:09:08.173

尝试添加`JAVA_HOME\bin`到您的`env PATH`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-19T09:42:29.953

将 JAVA_HOME 添加到 Eclipse-Preferences-Java-Build Path-Classpath 变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-22T17:01:21.067

对不起，出土了，

我有同样的问题，我的解决方案不需要对环境变量进行任何修改，并且适用于找不到 tools.jar 的最新 JDK。

只需进入 ant run 按钮旁边的小向下箭头然后单击“配置外部工具”然后在 JRE 选项卡中选择您计算机上安装的 JDK，而不是 JRE，如果选择的 JDK 不是同一个 JDK/JRE，则没有问题就像在你的项目中一样。

现在应该可以工作了。

# sharepoint - 嵌入在 SharePoint 2013 的 Masterpage 中的 SandBox Webpart 给出错误

> ID：15098260
> 
> 赞同：3
> 
> 时间：2013-02-26T20:07:01.003
> 
> 标签：sharepoint, master-pages, sandbox, sharepoint-2013

嗯，SharePoint 2013 对沙盒不太友好。有很多问题。

在 SharePoint 2010 中，我能够使用以下方法成功地将沙盒 Web 部件嵌入到母版页中：

```
<WebPartPages:SPUserCodeWebPart runat="server" Description="Description" Title="TITLE"
    AssemblyFullName="$SharePoint.Project.AssemblyFullName$" SolutionId="00000000-0000-0000-0000-00000000000"
    ID="ID" TypeFullName="Namespace.WP">
</WebPartPages:SPUserCodeWebPart> 
```

但是，当我在 SharePoint 2013 的母版页中添加此内容时，我收到以下错误：

> ExecuteRequestInSandBox 调用失败。System.NullReferenceException：对象引用未设置为对象的实例。在Microsoft.SharePoint.WebPartPages.BinaryWebPartSerializer.Serialize（PersonalizationScope范围，BinaryWebPartSerializerFlag binaryWebPartSerializerFlags，BinaryWebPartSerializerWriter作家）在Microsoft.SharePoint.WebPartPages.BinaryWebPartSerializer.Serialize（SerializationMode模式，BinaryWebPartSerializerFlag binaryWebPartSerializerFlags，BinaryWebPartSerializerWriter作家）在Microsoft.SharePoint.WebPartPages.SPUserCodeWebPart.EnsurePersistedBlobsMatchPropertiesCollection () 在 Microsoft.SharePoint.UserCode.SPUserCodeWebPartRemoteExecutionHelper 的 Microsoft.SharePoint.WebPartPages.SPUserCodeWebPart.GetWebPartDataForRemoteCall(Object& viewState, Object& controlState)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:29:23.983

我已经尝试了很多东西，但似乎您无法将沙盒 Web 部件嵌入到母版页中。但是，场级别的 Webpart 解决方案可以成功地嵌入到母版页中。

我不知道为什么这是这种行为。但是，您可以部署一个嵌入了 SandBox WP 的应用程序页面，并且该应用程序页面可以正常工作。这是非常有趣的行为。

现在，我保持这个问题开放。也许有人会弄清楚这种疯狂。

唯一不好的是您无法将母版页部署到 SharePoint Online（托管），因为它不允许场级解决方案。也许 AppParts、iFrames 或带有后端虚假服务的嵌入式 javascript/jQuery 可能会解决问题，但出于我的目的，我正在考虑更复杂一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T12:54:53.243

我通过在 Register 标签中将引用程序集的版本从 15.0.0.0 更改为 16.0.0.0（或者更确切地说，完全删除程序集名称的版本和关键部分）解决了这个问题（欢呼！）。

基本上我认为第 15 波中有一个错误，在第 16 波中已修复。

唯一的问题是，我的开发环境是第 15 波（我猜其他人也是）。但是从引用标记中删除版本号，它至少不会完全崩溃，只是在 web 部件出现的位置给出错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T19:56:48.813

今天在 SP 农场遇到了类似的问题。安装 SharePoint 2013 SP1 后，此问题已修复。如果您遇到这种情况，请检查您的补丁版本。如果小于 15.0.4569，则至少升级到 15.0.4569。

# php - PHP file_get_contents 在本地服务器中出现错误

> ID：15098262
> 
> 赞同：0
> 
> 时间：2013-02-26T20:07:22.257
> 
> 标签：php, file-get-contents

我使用此脚本发送帖子并获取文件及其内容并处理请求

```
$postdata = http_build_query(
    array(
        'inUsername' => ''.$_REQUEST['inUsername'].'',
        'inPassword' => ''.$_REQUEST['inPassword'].'',
        'csfr_token' => ''.$_REQUEST['csfr_token'].''
    )
);

$opts = array('http' =>
    array(
        'method'  => 'POST',
        'header'  => 'Content-type: application/x-www-form-urlencoded',
        'content' => $postdata
    )
);

$context  = stream_context_create($opts);

$result2 = file_get_contents('http://cp.ufowebs.com/index.php', false, $context);

$result="Invalid";

if (eregi($result,$result2)) 
{
print '{"login":"ok"}';
}
else
{
print "ok";
header("Location:http://cp.ufowebs.com/index.php");v<meta http-equiv="refresh" content="2;url=http://cp.controlpanel.com/index.php"> 

}

}
?> 
```

在本地或从其他 url 工作正常，但在同一个 url 或如果转到子域等，没有工作，总是给我这个错误：

```
Warning: file_get_contents(): php_network_getaddresses: getaddrinfo failed: Name or service not known in /var/hostdata/admin/public_html/domain_com/test_cp.php on line 94 Warning: file_get_contents(http://cp.domain.com/index.php): failed to open stream: php_network_getaddresses: getaddrinfo failed: Name or service not known in /var/hostdata/admin/public_html/domain_com/test_cp.php on line 94 ok 
```

我不知道为什么从其他域工作而不进入同一个域等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:08:56.747

`file_get_contents`来自 URL 在大多数主机中被阻止。如果它被阻止，请咨询您的托管服务提供商。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T13:06:09.877

该域根本不存在。

```
nsa:~# host cp.ufowebs.com
Host cp.ufowebs.com not found: 3(NXDOMAIN) 
```

这与防火墙无关，也不是因为您的服务器上禁用了功能。

`ufowebs.com`确实存在。如果您是所有者，Klaba 先生，您必须为子域设置 DNS 记录或设置`*`通配符子域以匹配任何子域流量。

# sql - SQL Server + 动态查询“列名无效”

> ID：15098268
> 
> 赞同：5
> 
> 时间：2013-02-26T20:07:33.250
> 
> 标签：sql

我正在尝试执行以下动态查询，但出现错误：Invalid column name 'cat'

```
 DECLARE @SQLDelQuery AS NVARCHAR(1200)   
 DECLARE @MemberNames varchar(50)

 SET @MemberNames = 'cat'

      SET @SQLDelQuery = 'SELECT [Email] FROM [aspnet_Membership] am
      INNER JOIN [aspnet_Users] u
      ON (am.UserId = u.UserId)
      INNER JOIN [Member] m
      ON (am.UserId = m.UserId)
      WHERE u.UserName IN (' + @MemberNames + ')

  EXECUTE(@SQLDelQuery) 
```

如果我将其更改为正常查询，我很好：

```
SELECT [Email] FROM [aspnet_Membership] am
  INNER JOIN [aspnet_Users] u
  ON (am.UserId = u.UserId)
  INNER JOIN [Member] m
  ON (am.UserId = m.UserId)
  WHERE u.UserName IN ('cat') 
```

谁能指出我的错误？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T20:09:51.200

由于`cat`是 varchar，因此您需要在其周围包含单引号，并且您需要将`IN`子句的右括号放在 sql 字符串内。

新代码将是：

```
DECLARE @SQLDelQuery AS NVARCHAR(1200)   
 DECLARE @MemberNames varchar(50)

 SET @MemberNames = 'cat'

      SET @SQLDelQuery = 'SELECT [Email] FROM [aspnet_Membership] am
      INNER JOIN [aspnet_Users] u
      ON (am.UserId = u.UserId)
      INNER JOIN [Member] m
      ON (am.UserId = m.UserId)
      WHERE u.UserName IN (''' + @MemberNames + ''')'

  EXECUTE(@SQLDelQuery) 
```

查看打印了查询字符串的[SQL Fiddle 演示。](http://www.sqlfiddle.com/#!3/d41d8/9681)这会生成一个查询字符串，如下所示：

```
SELECT [Email] 
FROM [aspnet_Membership] am 
INNER JOIN [aspnet_Users] u 
  ON (am.UserId = u.UserId) 
INNER JOIN [Member] m 
  ON (am.UserId = m.UserId) 
WHERE u.UserName IN ('cat') -- cat surrounded in single quotes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:09:42.807

你的字符串：

```
WHERE u.UserName IN (' + @MemberNames + ') 
```

将评估为：

```
WHERE u.UserName IN (cat) 
```

因为您拥有的撇号只是封装了字符串，并且字符串文字周围没有额外的撇号。

你需要：

```
WHERE u.UserName IN (''' + @MemberNames + ''') 
```

或者，您可以保持查询不变，并在`@MemberNames`变量中用撇号分隔每个 ID：

```
SET @MemberName = '''cat'''           -- for a single user
SET @MemberName = '''cat'', ''dog'''  -- for multiple users 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T20:10:13.613

您需要将其作为字符串传递给动态查询

```
 SET @MemberNames = '''cat''' 
```

区别*`resulted query`*在于

```
WHERE u.UserName IN (cat) -- cat is taking as a column name here
WHERE u.UserName IN ('cat') -- cat is taking as a string here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:10:20.230

您的动态查询使用`'`字符作为字符串分隔符，因此在构建字符串后最后一行最终会变成这样：

```
WHERE u.UserName IN (cat) 
```

据此，`cat`读起来像一个列名。

要修复它，您需要`'`在定义中包含转义字符

```
`SET @MemberNames = '''cat'''` 
```

或在用于构建 sql 的字符串中：

```
`WHERE u.UserName IN (''' + @MemberNames + ''')'` 
```

# python - 如何在 Python 中实现字数统计？

> ID：15098269
> 
> 赞同：-2
> 
> 时间：2013-02-26T20:07:44.473
> 
> 标签：python

```
x="I use computers"
print (x)
y=x[0:1]
y1=x[2:5]
y2=x[6:15]
n=(y+y1+y2)
print len(n) 
```

我知道这会计算字母的数量，但我如何计算句子中的单词数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:37:14.750

如果您只是对**计算**单词感兴趣，而不是将字符串拆分为单词，则会`split()`做不必要的工作。通过计算空格的数量并加一，您可以更快地获得单词的数量。尽管这确实假设所有单词都由一个空格分隔，而不是更多。

证明：

```
>>>import timeit 
>>> timeit.timeit("len(x.split())", setup='x="I use computers"' , number=10**6)

0.28843931717636195
>>> timeit.timeit("x.count(' ')+1", setup='x="I use computers"' , number=10**6)

0.19020372901493232 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:13:21.723

试试这段代码

```
x = "I use computers"
print len(x.split()) 
```

# sql - SQL-Query - 查找另一个表的模式

> ID：15098275
> 
> 赞同：2
> 
> 时间：2013-02-26T20:07:58.617
> 
> 标签：sql, sql-server, comparison

我有一张颜色表：

```
COLORS

idColor   Name
-------   ------
   4      Yellow
   5      Green
   6      Red 
```

我还有另一个数据表：

```
PRODUCTS

idProduct   idCategory   idColor
---------   ----------   -------
    1           1           4     
    2           1           5     
    3           1           6     
    4           2           10    
    5           2           11    
    6           2           12    
    7           3           4     
    8           3           5     
    9           3           8     
    10          4           4     
    11          4           5     
    12          4           6     
    13          5           4     
    14          6           4     
    15          6           5 
```

我只想从表(4, 5, 6) 中的值出现在第二个表中并且恰好有 3 个具有相同值的元素`Products`时返回行。`idColor``Colors``IdCategory``idColor``4, 5, 6`

对于此示例，查询应返回：

```
IdCategory
----------
    1      
    4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:20:55.547

尝试这个：

```
SELECT idCategory
FROM PRODUCTS
GROUP BY idCategory
HAVING COUNT(*) = 3
AND COUNT(DISTINCT CASE WHEN idColor IN (4,5,6) THEN idColor END) = 3 
```

[这是一个演示](http://sqlfiddle.com/#!3/b727c/2)供您尝试。

**更新**

如果要根据表的值动态过滤结果 `COLOR

```
SELECT idCategory
FROM PRODUCTS P
LEFT JOIN (SELECT idColor, COUNT(*) OVER() TotalColors
           FROM COLORS) C
     ON P.idColor = C.idColor
GROUP BY idCategory
HAVING COUNT(*) = MIN(C.TotalColors)
AND COUNT(DISTINCT C.idColor) = MIN(C.TotalColors) 
```

[这是这个例子的一个小提琴](http://sqlfiddle.com/#!3/607fe/2)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T20:18:07.873

您可以使用聚合来确保它具有所有 3 种颜色，并确保它**没有**任何其他颜色。像这样的东西：

```
SELECT *
FROM
(
SELECT idCategory
  , SUM(CASE WHEN idColor IN (4, 5, 6) THEN 1 ELSE 0 END) AS GoodColors
  , SUM(CASE WHEN idColor NOT IN (4, 5, 6) THEN 1 ELSE 0 END) AS BadColors
FROM Products
GROUP BY idCategory
) t0
WHERE GoodColors = 3 AND BadColors = 0 
```

请注意，如果在每个 idCategory 中多次找到 4、5、6，则必须采用不同的技术。但是从您的示例来看，情况并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:53:58.527

我猜您想根据表中的数据执行此任务，而不是对值 4、5 和 6 进行硬编码（就像在给出的某些答案中一样）。为此，在[我的解决方案中](http://sqlfiddle.com/#!3/1abf4/2)，我创建了一个`dbo.ColorSets`表格，您可以根据需要填充任意数量的不同颜色集，然后运行查询并查看与这些颜色集匹配的所有产品类别。我不只是使用您的表的原因是它似乎是查找表，并带有颜色名称，因此选择一*组特定*颜色而不是可能的整个列表`dbo.Color`似乎不合适.

 *与仅使用聚合的其他查询方法相比，我使用了一种即使在大量数据上也能保持良好性能的技术。无论使用哪种方法，此任务几乎总是需要扫描整个`Products`表，因为如果不比较所有行，就无法比较所有行。但是 JOIN 是在可索引的列上，并且仅适用于很有可能成为正确匹配的候选者，因此所需的工作量大大减少。

`ColorSets`表格如下所示：

```
CREATE TABLE dbo.ColorSets (
   idSet int NOT NULL,
   idColor int NOT NULL,
   CONSTRAINT PK_ColorSet PRIMARY KEY CLUSTERED (idSet, idColor)
);

INSERT dbo.ColorSets
VALUES
   (1, 4), 
   (1, 5),
   (1, 6), -- your color set: yellow, green, and red
   (2, 4),
   (2, 5),
   (2, 8)  -- an additional color set: yellow, green, and purple
; 
```

和查询（[见这个工作在 SqlFiddle](http://sqlfiddle.com/#!3/1abf4/2)）：

```
WITH Sets AS (
   SELECT
      idSet,
      Grp = Checksum_Agg(idColor)
   FROM
      dbo.ColorSets
   GROUP BY
      idSet
), Categories AS (
   SELECT
      idCategory,
      Grp = Checksum_Agg(idColor)
   FROM
      dbo.Products
   GROUP BY
      idCategory
)
SELECT
   S.idSet,
   C.idCategory
FROM
   Sets S
   INNER JOIN Categories C
      ON S.Grp = C.Grp
WHERE
   NOT EXISTS (
      SELECT *
      FROM
         (
            SELECT *
            FROM dbo.ColorSets CS
            WHERE CS.idSet = S.idSet
         ) CS
         FULL JOIN (
            SELECT *
            FROM dbo.Products P
            WHERE P.idCategory = C.idCategory
         ) P
            ON CS.idColor = P.idColor 
      WHERE
          CS.idColor IS NULL
          OR P.idColor IS NULL
   )
; 
```

结果：

```
idSet  idCategory
 1       1
 2       3
 1       4 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-26T20:15:53.553

如果我理解你的问题，应该这样做

```
select distinct idCategory
  from Products 
 where idColors in (4,5,6) 
```*

# javascript - 如何控制变量吊装？

> ID：15098276
> 
> 赞同：0
> 
> 时间：2013-02-26T20:08:02.990
> 
> 标签：javascript, jquery

我在将函数从数组绑定到某些元素时遇到问题，但是在单击任何具有“类”类的元素后出现此错误。

> 未捕获的类型错误：对象函数 (){alert(1)}、函数 (){alert(2)}、函数 (){alert(3)}、函数 (){alert(4)} 的属性“4”不是一个函数

```
var c = [
    function(){alert(1)},
    function(){alert(2)},
    function(){alert(3)},
    function(){alert(4)}
];

function test(b){
    for(var i = 0; i < b.length; i++){
        $('.class').eq(i).bind('click', function(){
            b[i]();
        });
    }
}

test(c); 
```

我认为变量 i 保持其最后一个值。

任何解决方案或解释将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:12:53.953

您需要一个闭包 - 在 js 中变量范围由函数确定。使用 jQuery，只需使用`.each`：

```
$('.class').each(function(i) {
     $(this).on('click', function(){
         alert(i+1);
     });
}); 
```

但是，如果您确实需要一组不同的函数，您可以直接将函数本身绑定为处理程序：

```
var elems = $('.class');
for (var i=0;i<b.length;i++) {
    elems.eq(i).on('click', b[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:20:30.403

问题是，在您的循环中，您设置为`click`处理程序的函数都共享相同的`i`值。在循环之后，该`i`值将是`4`，因此每个函数都会尝试调用`b[4]`，但它不存在。

您需要为每个函数创建一个新范围，以便`i`值都不同。

```
for(var i = 0; i < b.length; i++){
    (function(i){
        $('.class').eq(i).bind('click', function(){
            b[i]();
        });
    }(i));
} 
```

您也可以`click`直接将数组中的函数设置为处理程序。

```
for(var i = 0; i < b.length; i++){
    $('.class').eq(i).bind('click', b[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:12:27.447

您的函数数组只有 4 个项目，因此`b[4]`未定义。与其`b`在您的点击处理程序中引用，不如将其设为点击处理程序本身：

```
elems.eq(i).on('click', b[i]); 
```

通过这样做，`i`将在循环中的每次迭代中检查 的值，而不是在单击元素时（此时其值应始终为`4`）。

# oop - 对象概念

> ID：15098278
> 
> 赞同：4
> 
> 时间：2013-02-26T20:08:27.720
> 
> 标签：oop, software-design

根据标准定义，对象是包含数据和行为的实体。根据我的理解，数据是从外部发送的。例如，我们有一个计算数字平方的类。我们创建一个实例并将消息与数字一起发送到对象以计算平方。我们不是从外部发送数据吗？为什么所有定义都声明对象包含数据？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:22:29.227

在这种情况下，数据是对象的状态。定义说对象的状态/数据应该在内部存储。例如，考虑以下类：

```
class Math {

  Double square(double x) {
      return x * x;
  }
  // other similar functions
} 
```

作为一种语言结构，它是一个类。但是，它不是面向对象意义上的真正类。因为它没有状态或数据。它只是一个包装在类结构中的函数。这不一定是错的。因为在这种情况下，碰巧您有不需要状态的操作。

该定义试图强调的是：您拥有一个真实的对象，当它（或它的类）同时具有数据和行为时。并非类构造的每次使用都代表一个真正的对象。

因此，如果代表它的类满足以下三个条件，则您有一个对象。

1.  该类有状态/日期。如果没有，那么它只是一堆功能。它不是面向对象的，它是过程的。
2.  该类具有行为。如果不是，那么它只是一个容器，一堆变量（C 中的结构）。
3.  不仅类具有状态/数据和行为/方法，而且数据和行为之间存在内在关系。这意味着仅仅将一些变量和函数放在一起并不能成为一个真正的对象。例如，如果您有状态/数据并且在类中也有一些方法，但如果该函数不需要对任何状态进行操作，那么该方法是否真的属于该类存在疑问。

下面是一个简单的例子，我认为是一个适当的类（对象的表示）。

```
Class Patient {
      // blood pressure
     double systolic;
     double diastolic;
     double weight;
      int age;
     public Patient(double systolic,   double diastolic,  double weight, int age){

    }

   Public boolean isHealthy(){
        // do some calculations and algorithms on age, weight and blood pressure indicators.
        // return result as true of false
  }

} 
```

在这里，我们看到类既有状态又有行为。我们还看到状态和行为都真正属于这个类。它们是患者概念的属性。我们进一步看到，操作与数据有着内在的关系。如果不咨询/使用其状态，您无法确定患者是否健康。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:17:10.583

我认为问题在于您的示例与面向对象的设计非常不匹配。我只是说计算一个数字的平方是一个无记忆的函数，因此显然没有理由将数据存储在对象属性中。但是，当您必须处理有状态实体的管理时，您将更容易地了解类和面向对象的重要性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:16:57.670

您的示例是一个私有案例，其中对象不需要保存数据（即状态）。在这种情况下，它可以用一个函数替换（只是行为）。大多数对象都需要存储数据。例如，对象 Person 应该包含描述该人的品质，而不仅仅是可能的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:56:49.553

对象是类的一个实例。

类 (a, a*a) 是方形类，但 (2, 4) 是它的一个实例（对象）。是的，数据被发送到类并创建新对象。

# c++ - '->' 和 '.' 用于对对象的引用？

> ID：15098290
> 
> 赞同：0
> 
> 时间：2013-02-26T20:09:14.690
> 
> 标签：c++

我正在编写一个代码库，我遇到了一些让我很难过的东西，或者至少让我三思而后行。

我有一个通过引用传递的函数的参数，如下所示：

```
const PathTile &refTile 
```

在函数中的某一时刻，`pathTile`可以像预期的那样使用操作符`->`访问 的成员函数，使用操作符访问相同的成员函数只需几行`.`。奇怪的是代码有效。使用时这是`->`隐含的`.`吗？

我问是因为我不确定前一个人是否故意这样做。我应该改变它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:14:09.487

> 在函数中的某一点，使用 -> 操作符访问 pathTile 的成员函数，就像预期的那样

这是不正确的。引用成员通常应通过`.`. 正如 Seth 在评论中指出的那样，`->`可以重载......当您想假装您的类型是指针时，这很有用。`.`不能超载。

> 这是 -> 当 . 用来？？

不，必须有另一种解释。`->`（立即想到不同的变量和重载）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:23:17.317

有一些称为智能指针的特殊对象，其使用方式几乎与常规指针相同。提供它们重载 operator -> 但它们是真实对象，因此您可以通过 . 所以：

```
struct Foobar { void method(); };
smart_pointer<Foobar> spointer;
spointer->method(); // called method() of class Foobar of instance where spointer points to
spointer.reset();   // called reset() of object spointer itself. 
```

如果您使用引用没有区别，因此如果上面示例中的指针是对类型 smart_pointer 的引用，那么它将是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:19:41.513

这可能与您可以：

```
foo *x=new foo();
foo &y=*x; 
```

现在：

```
x->bar(); 
```

和：

```
y.bar(); 
```

是等效的、合法的、有效的、将编译并做同样的事情等。

请更多代码

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:19:54.533

不，访问是不一样的/可互换的，仅仅是因为它们是引用。

一种常见的情况是被引用对象是容器对象（即智能指针）时；`obj.member`可以访问容器成员，同时`obj->member`可以通过`operator->()`.

我会`PathTile`检查`operator->()`.

# wso2 - 部署规则服务 WSO2 业务规则服务器

> ID：15098292
> 
> 赞同：1
> 
> 时间：2013-02-26T20:09:19.397
> 
> 标签：wso2, wso2carbon, rule-engine, business-rules

我正在尝试使用 WSO2 Business Rule Server 部署规则服务

我完全按照这个链接 [http://docs.wso2.org/wiki/display/BRS200/Creating+and+Deploying+the+Rule+Service#CreatingandDeployingtheRuleService-RuleServiceWizard](http://docs.wso2.org/wiki/display/BRS200/Creating+and+Deploying+the+Rule+Service#CreatingandDeployingtheRuleService-RuleServiceWizard)

我还从 3 个不同的类文件中制作了 jar 文件：OrderAccept.class OrderReject.class 和 PlaceOrder.class

我正在尝试使用向导部署服务器最后我收到了这个错误

```
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask. runPeriodic(ScheduledThreadPoolExecutor.java:181)
at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.
run(ScheduledThreadPoolExecutor.java:205)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:885)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:907)
at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.ClassNotFoundException: Class Not found : samples.userguide
.PlaceOrder
at org.apache.axis2.deployment.DeploymentClassLoader.findClass(Deploymen
tClassLoader.java:92)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at org.apache.axis2.deployment.DeploymentClassLoader.loadClass(Deploymen
tClassLoader.java:280)
at java.lang.ClassLoader.loadClass(ClassLoader.java:251)
at org.wso2.carbon.rule.common.config.HelperUtil.processFactDefaultValue
s(HelperUtil.java:43) 
```

任何人都可以在我可能犯错误的地方帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:18:53.723

看来您的 jar 文件没有正确选择。我能想到的一个原因是，您的axis2存档文件夹结构错误。我说的是规则服务上传机制。您可能会在文档中看到推荐的文件夹结构。创建 .aar 文件后，将其解压缩并查看是否具有相同的文件夹结构。如果它与推荐的不同，您的 jar 文件将不会被选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T06:48:42.147

我尝试了相同的示例，它也给了我相同的错误（两种方法，规则服务上传和规则服务向导）。根据文档，@Amila 建议的文件夹结构似乎没问题。我最近发现的是这个链接[http://wso2.com/library/articles/2013/05/eclipse-plugin-wso2-business-rules-server](http://wso2.com/library/articles/2013/05/eclipse-plugin-wso2-business-rules-server)我从中引用了“以前 WSO2 BRS 工件（aar/car）是使用 Web UI 规则向导创建的，或者通过组合多个工件来创建工件。使用用于规则服务的新 WSO2 Developer Studio 插件，可以轻松创建一个完整的使用 Eclipse IDE 部署可部署的 BRS 工件。开发人员可以使用此工具轻松创建 WSO2 BRS 工件，并将其部署在 WSO2 业务规则服务器中。我猜这个新方法/工具将替代“旧”方法（上传和向导）。试试看。

# php - 项目研究 - 可缩放、可滚动、可悬停的高分辨率图像

> ID：15098293
> 
> 赞同：3
> 
> 时间：2013-02-26T20:09:36.917
> 
> 标签：php, javascript, ajax, html

在我开始一个项目之前，我正在做一些研究，我想在开始之前知道进行这个项目的最佳方法是什么。非常感谢我能得到的任何帮助，如有必要，我很乐意提供更多信息。

基本上，我会得到一些非常高分辨率的图像来显示给用户。我想创建一个界面，用户可以在其中滚动图像并放大，以及将鼠标悬停在图片的某些部分上并接收有关该特定位置的一些信息。另外，如果我可以在不以任何方式使用 Flash 的情况下做到这一点，我会非常非常喜欢它，因为我不喜欢 Flash 并且因为它无法在 i 设备上运行。

这是我正在寻找的[缩放功能的示例，这是我正在寻找的](http://www.kennicottbible.org/all.php)[悬停功能](http://dss.collections.imj.org.il/isaiah)的示例（对不起，它们都是圣经手稿，并不是要对你们都信教，这些是我能找到的最好的例子！）

无论如何，到目前为止，我已经找到[了这个漂亮](http://www.ajax-zoom.com/)的缩放脚本，但是我还没有找到任何可以悬停的东西（我正在寻找的另一个例子是当你在 Facebook 上的图片中标记某人时 - 如果你悬停在他们的脸上，他们的名字突然出现）。为了让事情变得更加困难，我必须弄清楚如何让它们玩得更好，所以放大不会破坏悬停功能。

所以我的问题是......有没有人有这样的经验？你对允许这种事情的项目（开源是首选）有什么建议吗？我真的很感谢你们优秀的人能给我的任何帮助！之后我将发布我的发现和代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T08:44:04.937

我认为谷歌地图（和其他此类技术）背后的技术将是可行的方法。使用 Google Maps API，您可以使用自己的自定义图块而不是地图图块。然后，您可以在地图上设置边界以阻止用户离开您的可用图像。最后，您可以使用 API 指定“地图”上多边形的坐标。这些多边形很棒，因为它们允许您进行悬停/单击事件，这应该为您提供您所追求的功能。

我发现一篇与您所追求的内容相似的好文章可以在这里找到：http: [//forevermore.net/articles/photo-zoom/](http://forevermore.net/articles/photo-zoom/)

希望这能提供一些方向，听起来像是你即将开始的一个有趣的项目:)

# php - 有没有像 EtherPad 这样使用 php 和 mySql 的开源项目？

> ID：15098296
> 
> 赞同：1
> 
> 时间：2013-02-26T20:09:46.227
> 
> 标签：php, mysql, etherpad

我想在我的 debian 服务器上安装一个像 EtherPad 这样的工具，它使用 PHP 和 MySQL 作为后端。

我找到[了 etherpad-lite](https://github.com/ether/etherpad-lite)，它是用[node.js](http://nodejs.org/)和[PiratePad](http://piratepad.net/)编写的，它只是一个在线平台，但我需要一个可以安装在服务器上的脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:48:44.383

PHP 无法轻松解决“协作编辑器问题”，因为它为站点的每个访问者生成了一个新进程，因此内存空间不共享，这意味着您将在数据库读取/写入时有太多延迟。

所以简短的回答，不，PHP 不会解决你的问题。为什么不直接安装 Etherpad？

# javascript - jQuery 转义 content

[问问题](https://stackoverflow.com/questions/ask)问问题 2013-02-26T20:09:48.86750 次This question shows research effort; it is useful and clear1This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I'm using jquery as an xml parser (big mistake). However, I have too much invested to switch now. I'm having issues with jQuery automatically escaping the `<style>` tag's content.

```
var a = $("<style><foo>content</foo></style>"),
 b = $("<bar><foo>content</foo></bar>");

b.find('foo').length // => 1
a.find('foo').length // => 0

b.html() // => '<foo>content</foo>'
a.html() // => 'foo>content</foo>'
 // ^--- missing '<'

b.text() // 'test'
a.text() // 'foo>content</foo>' 
```

Is there a way to prevent jQuery from doing this?

[javascript](/tags/javascript "show questions tagged 'javascript'")[jquery](/tags/jquery "show questions tagged 'jquery'")[xml](/tags/xml "show questions tagged 'xml'")4

## 1 回答 1

This answer is useful2

你可以使用：

```
var xml = jQuery.parseXML("<style><foo>content</foo></style>"); var a = $(xml); 
```

为了防止 jQuery 以`style`不同的方式处理标签。

这是一个演示：http: [//jsfiddle.net/FABmh/](http://jsfiddle.net/FABmh/)

于 2013-02-26T20:12:08.757 回答

#### Related

[1](/questions/17078629 "Question score (upvotes - downvotes)")[jquery-ui - 如何在模式窗口（jQuery）中创建文件上传](/questions/17078629)[1](/questions/17078631 "Question score (upvotes - downvotes)")[batch-file - Windows Shell 脚本“此时出乎意料”。在命令提示符中](/questions/17078631)[0](/questions/17078632 "Question score (upvotes - downvotes)")[linux - 通过 RDP 或直接（本机）检测用户会话的脚本](/questions/17078632)[0](/questions/17078633 "Question score (upvotes - downvotes)")[java - 将综合应用于 java Swing 和 Open swing](/questions/17078633)[1](/questions/17078640 "Question score (upvotes - downvotes)")[php - PHP循环而不是空数组](/questions/17078640)[0](/questions/17078642 "Question score (upvotes - downvotes)")[python - Cronjob 运行通过 sSMTP 发送电子邮件的 python 脚本？](/questions/17078642)[1](/questions/17078643 "Question score (upvotes - downvotes)")[tcp - 我可以将 ZeroMQ 与基于软件的负载均衡器 HAProxy 一起使用吗？](/questions/17078643)[1](/questions/17078644 "Question score (upvotes - downvotes)")[php - 在不影响安全性的情况下查看实时站点上的 DOCUMENT_ROOT？](/questions/17078644)[0](/questions/17078649 "Question score (upvotes - downvotes)")[fancybox - 我想将多个带有文本的“side div”添加到fancybox](/questions/17078649)[1](/questions/17078652 "Question score (upvotes - downvotes)")[android - 使用 android maps api v2 的热图](/questions/17078652)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：15098298
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# dart - Is there a more elegant way to handle HttpRequest body content in Dart?

> ID：15098315
> 
> 赞同：1
> 
> 时间：2013-02-26T20:10:59.503
> 
> 标签：dart

With the release of the new dart:io libraries, in order to read the data from an [HttpRequest](http://api.dartlang.org/docs/releases/latest/dart_io/HttpRequest.html) we now need to:

> Listen to the body to handle data and notified of it's completion.

In order to accomplish this, I've been using something similar to the following to get all of the data from the request (taken from the dart:io tests):

```
List<int> body = new List<int>();
request.listen(body.addAll, onDone: () {
  var str = new String.fromCharCodes(body);
  // Now do something with the string of data
}); 
```

Is there some way of using [transform](http://api.dartlang.org/docs/releases/latest/dart_io/HttpRequest.html#transform) and/or [StringDecoders](http://api.dartlang.org/docs/releases/latest/dart_io/StringDecoder.html) to already provide a constructed result. The only way I can think of, I would still need to create a StringBuffer and use writeAll to ensure all data is passed in the event it doesn't all arrive at once, and still call the onDone before using the string in the buffer.

So I guess ultimately the question is: is there some way I can use a HttpRequest (or in all actuality any Stream) without needing to buffer/build the results and can just pass a callback or handler which receives the entire contents?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:38:15.617

我还没有尝试过，但我认为你应该能够使用 StringDecoder、toList() 和 join() 来获取整个身体：

```
request.transform(new StringDecoder()).toList().then((data) {
  var body = data.join('');
  print(body);
} 
```

# mysql - Delete from table when field does not match another table in MySQL

> ID：15098319
> 
> 赞同：0
> 
> 时间：2013-02-26T20:11:07.977
> 
> 标签：mysql

I'm trying to use the following SELECT statement to craft a DELETE statement after I get it working.

Basically table "listing" has a bunch of record that need to be removed. If the EmpNo cannot be found in address table then I want to remove the record from listing table. I keep getting a invalid syntax. What am I doing wrong?

```
SELECT A.*
FROM address A
LEFT JOIN listing B
USING (EmpNo)
WHERE B.EmpNo IS <> A.EmpNo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:13:17.757

在此处删除`IS`关键字：

```
WHERE B.EmpNo IS <> A.EmpNo 
```

应该：

```
WHERE B.EmpNo  <> A.EmpNo 
```

如果`EmpNo`在两个表中都存在同名，`USING`则将在那里正常工作。否则，您可以更明确一点`ON`：

```
FROM 
  address A
  LEFT JOIN listing B
    ON A.EmpNo = B.EmpNo 
```

要在 中查找`A`不匹配的记录`B`，请测试`B.EmpNo IS NULL`而不是`B.EmpNo <> A.EmpNo`。

```
WHERE B.EmpNo IS NULL 
```

# iphone - change user agent multiple times

> ID：15098321
> 
> 赞同：1
> 
> 时间：2013-02-26T20:11:09.600
> 
> 标签：iphone, ios, uiwebview

I am trying to toggle user agent for a uiwebview between iPhone and iPad. So to have a button that will change from iPad user agent to iPhone user agent and backward.

I found this link: [http://www.mphweb.com/en/blog/easily-set-user-agent-uiwebview](http://www.mphweb.com/en/blog/easily-set-user-agent-uiwebview)

Unfortunately, the user agent can be changed only once, even if I recreate the uiwebview.

Does anyone has an idea about how to do it?

Btw, I also tried set the user agent in urlrequest header, without success.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-26T16:27:01.723

我也是，我只能设置一次 UserAgent。那我就不能再改了。我也在模拟器和设备上试过。同样的麻烦。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSDictionary *dictionary = @{@"UserAgent" : @"MyOWnUserAgent_2"};
    [[NSUserDefaults standardUserDefaults] registerDefaults:dictionary];
} 
```

我不使用网络视图。我只是打这样的电话：

```
NSURLSession *session = [NSURLSession sharedSession];
[[session dataTaskWithURL:[NSURL URLWithString:urlRequest] completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) 
```

我清理，从设备中删除应用程序，我重建，我退出，重新启动，重建......问题仍然存在。我在 OS X 10.11.5 (15F34) 上运行 XCode 7.3 (7D175) 并针对 Deploymen Target iOS 9.1、Base SDK iOS 9.3 进行构建。有什么线索吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-08T08:43:19.940

尝试这个

```
static void appendUA(NSString *uaStr) {
    if (!uaStr)
        return;

    UIWebView *tempWebView = [[UIWebView alloc] initWithFrame:CGRectZero];
    NSString *secretAgent = [tempWebView stringByEvaluatingJavaScriptFromString:@"navigator.userAgent"];
    secretAgent = [secretAgent stringByAppendingString:uaStr];
    NSDictionary<NSString *, id> *domain = [[NSUserDefaults standardUserDefaults] volatileDomainForName:NSRegistrationDomain];
    if (domain) {
        NSMutableDictionary<NSString *, id> *newDomain = [domain mutableCopy];
        [newDomain setObject:secretAgent forKey:@"UserAgent"];
        domain = newDomain;
    } else {
        domain = [[NSDictionary alloc]
                  initWithObjectsAndKeys:secretAgent, @"UserAgent", nil];
    }

    [[NSUserDefaults standardUserDefaults] removeVolatileDomainForName:NSRegistrationDomain];
    [[NSUserDefaults standardUserDefaults] setVolatileDomain:domain forName:NSRegistrationDomain];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

您应该在创建 WKWebview/UIWebView**之前**调用此函数，并且**不会**自动添加空间。

```
 appendUA(@" ====TEST_UA====");
    WKWebView *wkWebView = [WKWebView new];
    //... 
```

# java - 在哪里可以找到日志记录通道适配器的文档？

> ID：15098324
> 
> 赞同：1
> 
> 时间：2013-02-26T20:11:11.183
> 
> 标签：java, spring-integration

参考手册只提到了三遍，并没有很好地列出配置选项。例如，有没有办法设置日志记录类别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:37:05.243

有关可用属性，请参阅架构文档；例如...

```
 <xsd:attribute name="logger-name" type="xsd:string">
        <xsd:annotation>
            <xsd:documentation>
                Provide a name for the logger. This is useful when there are multiple logging Channel Adapters configured,
                and you would like to differentiate them within the actual log. By default the logger name will be the
                fully qualified class name of the LoggingHandler implementation.
            </xsd:documentation>
        </xsd:annotation>
    </xsd:attribute> 
```

大多数 IDE 上下文辅助会在创建元素时提供此文档。

但是，请随时打开“文档”问题[https://jira.springsource.org/browse/INT](https://jira.springsource.org/browse/INT)

# python - 使用 Python 2.7 解析包含空结果 NameError 的 json

> ID：15098330
> 
> 赞同：0
> 
> 时间：2013-02-26T20:11:29.513
> 
> 标签：python, json, python-2.7

我想从这个 json 数据中挑选出“b”标签。但它会导致 NameError。请告诉如何改进此代码。

```
json_data = {"one": null,
         "two": {"a": "1", "b": null},
         "three": "3"
         }

if __name__=="__main__":
    new_data = json.decode(json_data)
    json = json.loads(new_data)
    print json["two"]["b"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:14:23.957

您的问题是您正在尝试解码对象，而不是包含 JSON 的字符串。这意味着 Python 将您的数据解析为`dict`文字，这导致它试图找到一个`null`自然地在 Python 中不存在的值。相反，您想创建一个字符串：

```
json_data = '''{"one": null,
         "two": {"a": "1", "b": null},
         "three": "3"
         }''' 
```

这里我们使用三引号 ( `'''`) 来定义多行字符串。

这应该按预期工作。我想你只是举个例子，但是值得注意的是，这在这种情况下是毫无意义的，你最好直接定义 Python 数据结构，而不是使用 JSON。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:31:30.180

您的代码不起作用，因为您试图将 Python 字典传递给不存在的`json.decode()`函数。下面通过手动转换`json_data`为字符串并将其直接传递给`json.loads()`将`null`遇到的 s 转换为`None`s 来解决这些问题。

```
import json

json_data = '''{"one": null,
                "two": {"a": "1", "b": null},
                "three": "3"
               }'''

if __name__=="__main__":
    json = json.loads(json_data)
    print json["two"]["b"] 
```

输出：

```
None 
```

# sql-server - 更改小数字段的精度会导致 SSIS 包失败

> ID：15098332
> 
> 赞同：0
> 
> 时间：2013-02-26T20:11:35.497
> 
> 标签：sql-server, sql-server-2008, ssis

我在数据类型为十进制 (10,2) 的源表中有一个字段。源字段在一个 SSIS 包中的简单数据泵中使用，以将数据插入到另一个表中到具有精确数据类型的字段中。最近，源表和目标表的精度都更改为 18，数据类型为 Decimal(18, 2)。

软件包开始在服务器上失败，并出现以下错误：

> 说明：输出“OLE DB 源输出”(11) 上的输出列“RunningTotal”(20) 存在错误。返回的列状态为：“转换失败，因为数据值溢出了指定类型。”

当我进入 DataPump 中 OLE DB 源的高级编辑器时，我发现输出列仍然显示旧的精度 10。

这是否意味着，每当发生此类更改（例如更改精度而不是整个数据类型）时，都需要手动更新包并将其推送到服务器？或者有没有办法让包自动识别这些类型的变化？

非常感谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:20:18.800

是的，每次元数据在源中发生更改时，您都需要手动更新元数据。避免手动刷新的唯一方法是明确定义要使用的元数据，这`convert`在您的查询中意味着很多。

例如，更改：

```
select id
  from mytable 
```

进入 ：

```
select convert(int, id) as id
  from mytable 
```

因此，当数据类型从 int 更改为 bigint 时，您不需要更新元数据。请注意，它可能会开始失败，因为 bigint 值大于 SSIS 中的 int 大小！

# excel - 基于日期导入值：Excel 宏

> ID：15098335
> 
> 赞同：0
> 
> 时间：2013-02-26T20:11:47.230
> 
> 标签：excel, pointers, copy-paste, vba

我正在尝试为 Excel 编写一个相当智能的宏。在这种情况下，我有两个单独的工作簿，我在它们之间传输信息。第一个工作簿在 A 列中有日期列表，后面是以下列中的相应值。像这样：

![在此处输入图像描述](../Images/2b72ce31675c9a12e6d6f85a6412a8ba.png)

如您所见，日期和值的输入不一致。它们仅在特定日期可用。当前条目在 2012 年底停止。这个宏的重点是每个月添加新数字。

工作簿 2 的摘录如下所示： ![在此处输入图像描述](../Images/19930ad6e27aa9ec3b68be3298c33066.png)

我当前的宏当前在工作簿 2 中找到正确的值并将它们复制到工作簿 1。这很好，除了日期可能不一致。“CMP (3 YEARS)”部分可能有 15 天的价值，但“CMP (4 YEARS)”部分只有 14 天的价值。如果我盲目地将这些值复制到第一张纸上，它们将无法正确排列。如果缺少日期，我宁愿有一个计算出的平均值

因此，为了解决这个问题，我正在尝试当前的解决方案：

```
 'Grab 1 Month
Call Import("CMA/FIXED     (4 WEEKS)", "B1", DestinationWorkbook, ExportedWorkbook, 3, 2, False, DestinationDateRange) 
```

对于要定位的每一列数字以及提取日期，都会调用上述方法。

请允许我解释下面应该发生的事情。首先传入要在第二张工作表中搜索的字符串。它与 x 和 y 偏移整数一起使用以定位正确的值。DestinationSheetName 是 Workbook1，ExportedDataSheetName 是 Workbook2。isDateImport 布尔值用于告诉该方法这是第一次导入，我们所获取的只是将添加到 Workbook1 的 A 列的第一组日期。ByRef DateRange 是指向这些日期的指针，这些日期已被复制并粘贴到 Workbook1 的 A 列。所以很明显，当它最初用于日期时，它是空的。

从那里我们检查我们正在做什么样的导入。如果是日期，我们只需进行简单的定位、复制和过去。如果不是，我们尝试智能导入定位值。这个想法是创建一个指向两组日期的指针，即 workbook1 中 A 列中的日期以及与我们正在复制的值相对应的日期。我们希望粘贴位置在每个日期的正确行中。我创建了两个指针并将它们指向两个日期列的开头。代替复制粘贴代码，我只是打印到调试窗口。如果指针值相互匹配。比较日期后，我尝试将指针递增到日期列中的下一个值。

这适用于 2 个日期，然后当我尝试增加指针时出现错误。

我应该怎么做才能修复这个错误？还是有更简单的方法来做到这一点？...我知道指针对于 Excel 电子表格来说有点矫枉过正...

```
Sub Import(SearchString As String, PasteLocation As String _
, DestinationSheetName As Variant _
, ExportedDataSheetName As Variant, xOffset As Integer, yOffset As Integer _
, isDateImport As Boolean, ByRef DateRange)

Windows(DestinationSheetName).Activate
Set newSpot = Range(PasteLocation).End(xlDown)
newSpot.Select 'remove
Set newSpot = newSpot.Item(2, 1)

Windows(ExportedDataSheetName).Activate
Cells.Find(What:=SearchString, After:=ActiveCell, LookIn:=xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False).Activate
ActiveCell.Select

If Not isDateImport Then

    'intelligent import
    Set datesColumn = ActiveCell.Item(xOffset, yOffset)
    datesColumn.Select 'remove
    Set valuesColumn = datesColumn.Item(1, 2)
    valuesColumn.Select 'remove
    Set datesColumn = Range(datesColumn, datesColumn.End(xlDown))
    datesColumn.Select 'remove
    Set valuesColumn = Range(valuesColumn, valuesColumn.End(xlDown))
    valuesColumn.Select 'remove

    Set DateColumnPointer = datesColumn.Item(1, 1)
    DateColumnPointer.Select 'remove

    Set DateRangePointer = DateRange.Item(1, 1)
    Windows(DestinationSheetName).Activate
    DateRangePointer.Select 'remove

    For Each cell In valuesColumn
    If (DateColumnPointer = DateRangePointer) Then
        Debug.Print "Same"
    Else
        Debug.Print "Different"
    End If

    'increment Pointers
    Windows(ExportedDataSheetName).Activate
    DateColumnPointer = DateColumnPointer.Item(2, 1)

    Windows(DestinationSheetName).Activate
    DateRangePointer = DateRangePointer.Item(2, 1)

    Next
Else

'primitive import
Set cell1 = ActiveCell.Item(xOffset, yOffset)
If isDateImport Then
Set cell2 = cell1.End(xlDown)
Else
Set cell2 = cell1.End(xlDown).End(xlToRight)
End If
Set rng = Range(cell1, cell2)
rng.Select
rng.Copy

Windows(DestinationSheetName).Activate

If isDateImport Then
Range("W1").Select
Else
Range("V1").Select
End If

ActiveSheet.Paste

 'Add grabbed values
Set numbers = Range(Range("W1"), Range("W1").End(xlDown))
numbers.Copy
newSpot.PasteSpecial xlValues

End If

Windows(ExportedDataSheetName).Activate
Range("A1").Select
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:58:10.247

您需要`set`在增量指针部分中使用增量指针部分来增量增加范围，否则您只需将值从下一个单元格复制到当前单元格。

```
'increment Pointers 
Windows(ExportedDataSheetName).Activate 
Set DateColumnPointer = DateColumnPointer.Item(2, 1)

Windows(DestinationSheetName).Activate 
Set DateRangePointer = DateRangePointer.Item(2, 1) 
```

除非我错过了你问题的重点？

# database - 数据库设计：客户、用户、组和所有者

> ID：15098336
> 
> 赞同：0
> 
> 时间：2013-02-26T20:11:49.477
> 
> 标签：database, usergroups

我有一个问题，但我找不到任何解决方案。

我有用户分组，一个用户不能在多个组中（所以，一个组有很多用户。这里没有问题）。一个组的一个用户必须是该组的所有者，同样，它不能是两个或多个组的所有者（因为一个用户不能在多个组中）。最后，组的所有者必须是父客户表的子表。

为了澄清，一个用户可以在一个组中。一个组可以有多个用户，组的所有者是用户，也是客户。一个组只能有一个所有者。

我需要一个设计来支持这一点，我尝试了很多 ERD，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:48:41.880

**客户**
ID、姓名

**用户** ID、名称、组 ID、IsOwner（布尔值）、客户 ID

**组** ID、名称、所有者 (UserID)

抱歉，如果我错过了您的问题的重点！

# javascript - 在 Windows 8 应用程序中获取用户帐户 Active Directory 组

> ID：15098338
> 
> 赞同：1
> 
> 时间：2013-02-26T20:11:59.853
> 
> 标签：javascript, html, windows-8, active-directory, winjs

我整天都在为这个问题苦苦挣扎。

我正在使用 JavaScript 和 HTML5 开发一个 Windows 8 应用程序。我需要根据分配用户帐户的活动目录组来限制应用程序上的某些功能。

问题是：如何检查用户帐户是否属于 Active Directory 组？

我尝试使用 Windows.System.UserProfile.UserInformation 和 Windows.Security.Credentials.UI.CredentialPicker，但它们都没有返回测试用户帐户是否属于组或分配用户帐户的组的方法.

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:10:34.933

我找到了执行此操作的解决方案，这是我实施的解决方案，并且可以正常工作。您可以创建一个针对 Active Directory 验证凭据的 Web 服务，您可以在其中传递域、用户名和密码，然后使用 WinJS.xhr 从应用程序调用它。要请求凭据，您可以使用 CredentialPicker 控件，该控件返回用户输入的域、用户名和密码。

这是代码：

网络服务代码：

```
ValidateUserResult vur = new ValidateUserResult();

    try
    {
        using (PrincipalContext context =
            new PrincipalContext(ContextType.Domain, domain))
        {
            vur.UserCredentialsAreValid = context
                .ValidateCredentials(username, password);

            if (vur.UserCredentialsAreValid)
            {
                vur.ProcessMessageText = "Ok";
                vur.ProcessMessageCode = 0;
            }
            else
            {
                vur.ProcessMessageText =
                    "Credenciales invalidas";
                vur.ProcessMessageCode = -1;
            }
        }
    }
    catch (Exception ex)
    {
        vur.UserCredentialsAreValid = false;
        vur.ProcessMessageText = ex.Message;
        vur.ProcessMessageCode = ex.HResult;
    }

    return vur; 
```

Windows 8 应用程序：

```
WinJS.xhr({
    type: "get"
    , url: {Web Service Url}
        + "/json/{Web Service Method Name}?domain="
        + domain + "&username=" + username
        + "&password=" + password
}).then(
    function (result) {
        if (result.status === 200) {

            // Place code here.

        }
    },
    function (error) {

        // If an error occurs, manage here

    }); 
```

# android - 在 Activity A 中写入数据库，以便 Activity B 可以读取它

> ID：15098340
> 
> 赞同：1
> 
> 时间：2013-02-26T20:12:04.513
> 
> 标签：android

在android中，如果您想在Activity A中写入数据库以便Activity B可以读取它，您应该在onPause，onStop还是任何一种方法中写入数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:15:42.163

`Intent`更好的办法是在启动 Activity B之前存储该数据。

# c++ - 异常处理和强制

> ID：15098345
> 
> 赞同：12
> 
> 时间：2013-02-26T20:12:16.317
> 
> 标签：c++, exception-handling, language-design, coercion, subtyping

```
try
{
    throw Derived();
}
catch (Base&)
{
    std::cout << "subtyping\n";
}

try
{
    throw "lol";
}
catch (std::string)
{
    std::cout << "coercion\n";
} 
```

输出：

```
subtyping
terminate called after throwing an instance of 'char const*' 
```

为什么异常处理对子类型很好，但对强制却不行？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T20:41:58.187

捕获抛出的异常与将参数传递给函数完全不同。有相似之处，但也有细微的差别。

3个主要区别是：

*   异常总是至少被复制一次（根本不可能避免）
*   `catch`子句按照声明的顺序进行检查（不是最合适的）
*   **它们受到较少形式的类型转换**：
    *   基于继承的覆盖，
    *   从类型化指针到非类型化指针的转换（`const void*`捕获任何指针）

不允许任何其他类型的转换（例如`int`to`double`或隐式`const char*`to `string`- 您的示例）。

**关于评论中的问题** 假设存在层次结构：

```
class Base {}; 
class Derived: public Base {};
class Base2 {};
class Leaf: public Derived, public Base2 {}; 
```

现在根据`catch`子句的顺序，将执行适当的块。

```
try {
    cout << "Trying ..." << endl;
    throw Leaf();

} catch (Base& b) {
    cout << "In Base&";

} catch (Base2& m) {
    cout << "In Base2&"; //unreachable due to Base&

} catch (Derived& d) {
    cout << "In Derived&";  // unreachable due to Base& and Base2&
} 
```

如果您切换`Base`并`Base2`捕获订单，您会注意到不同的行为。如果`Leaf`从 私下继承`Base2`，那么`catch Base2&`无论放在哪里都无法访问（假设我们抛出 a `Leaf`）

通常很简单：**顺序很重要。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-26T20:21:21.350

C++11 标准的第 15.3/3 段定义了处理程序与某个异常对象匹配的确切条件，这些条件不允许*用户定义的转换*：

> 处理程序是匹配异常对象的类型`E`，如果
> 
> — 处理程序的类型是`cv T`or`cv T&`并且`E`和`T`是相同的类型（忽略顶级 -`cv`限定符），或者
> 
> — 处理程序的类型是`cv T`or`cv T&`并且是, or`T`的明确公共基类`E`
> 
> — 处理程序是类型`cv1 T* cv2`，并且`E`是一个指针类型，可以通过其中一个或两个转换为处理程序的类型
> 
> *   标准指针转换 (4.10) 不涉及到指向私有或受保护或不明确类的指针的转换
>     
>     
> *   资格转换
>     
>     
> 
> — 处理程序是一个指针或指向成员类型的指针，并且`E`是`std::nullptr_t`.
> 
> [ ... ]

# c# - 将所见即所得的内容写入 Word 文档

> ID：15098346
> 
> 赞同：0
> 
> 时间：2013-02-26T20:12:20.507
> 
> 标签：c#, html, ms-word, ms-office

我正在使用 CKeditor 从用户和 id 获取一些数据，希望将这个 html 编辑器上的任何用户类型保存到 Word 文档，而不会丢失外观。

我做了很多搜索，但实际上无法找到任何资源。

其中一些是： [如何在 C# 中创建 Word 文档？](https://stackoverflow.com/questions/10412/how-can-a-word-document-be-created-in-c)

[在 ASP.NET 中将 HTML 内容写入 Word 文档时出现问题](https://stackoverflow.com/questions/801255/problem-writing-html-content-to-word-document-in-asp-net)

很快。

不知道为什么没有明确的方向。

任何指针？可以推荐的图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:20:40.670

您可以使用`Open XML sdk`以编程方式创建 Word 文档，而无需在服务器上安装 Word。[您可以使用Html to Openxml](http://html2openxml.codeplex.com/)将简单的 html 转换为 word 文档。或者，您可以将 html 文件作为 alt 块插入到 word 文档中，而不会丢失格式（除非您使用外部 css）。它的示例代码[here](http://www.codeproject.com/Articles/91894/HTML-as-a-Source-for-a-DOCX-File)和[this one](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2011/03/28/importing-html-that-contains-numbering-using-altchunk.aspx)。

# blackberry - BlackBerry 兼容性问题，适用于触控和非触控设备

> ID：15098348
> 
> 赞同：2
> 
> 时间：2013-02-26T20:12:23.593
> 
> 标签：blackberry, backwards-compatibility, blackberry-jde

目前我们的应用程序有两个分支（两个不同的二进制文件），一个用于触摸设备（用 JDE 4.7 编译），另一个用于非触摸设备（用 JDE 4.6 编译）。这两个版本是相同的，除了一些 UI 渲染和仅针对触摸设备的交互。

我正在尝试将这两个组合成一个二进制文件，并使用 JDE 5.0 进行编译，以便它可以在 OS 5.0/6.0/7.0 和 7.1 上运行，适用于触摸和非触摸设备。我的问题是如何在一个二进制文件中处理触摸和非触摸设备之间的这些差异行为？谢谢！

# javascript - JSON 存储无法加载 PHP 数据 - EXTJS 4

> ID：15098349
> 
> 赞同：0
> 
> 时间：2013-02-26T20:12:25.410
> 
> 标签：javascript, ajax, extjs, extjs4, store

```
Ext.define('GoogleMarkerModel', {
        extend: 'Ext.data.Model',
        fields: [
        {name: 'ID',    type: 'int'},
        {name: 'Locating',    type: 'int'},
        {name: 'MainPower',    type: 'int'},
        {name: 'Acc',    type: 'int'},
        {name: 'PowerOff',    type: 'int'},
        {name: 'Alarm',    type: 'int'},
        {name: 'Speed',    type: 'int'},
        {name: 'Direction',    type: 'int'},
        {name: 'Latitude',    type: 'float'},
        {name: 'Longitude',    type: 'float'},
        {name: 'DateTime',    type: 'date'},
        {name: 'MainID',    type: 'int'},
        {name: 'IOState',    type: 'int'},
        {name: 'OilState',    type: 'int'}]
    });

    var MarkerStore = Ext.create('Ext.data.JsonStore', {
        model: 'GoogleMarkerModel',
        autoLoad: true,
        proxy: {
            type: 'ajax',
            url: 'get-googlemarker.php',
            baseParams: {  //here you can define params you want to be sent on each request from this store
                        mainid: 'value1'
                        },
            reader: {
                type: 'json',
                idProperty:'MainID',
            }

        }
    }); 
```

这段代码我用来调用 MarkerStore 并传递值为 1 的参数 mainid

```
MarkerStore.load({
                        params: {  //here you can define params on 'per request' basis
                                mainid: 1,
                                }
                        }) 
```

当我使用网络浏览器获取-googlemarker.php 和 mainid=1 将返回这些值

```
http://localhost/GPS/examples/tabs/get-googlemarker.php?mainid=1

[{"ID":"1808","Locating":"1","MainPower":"0","Acc":"1","PowerOff":"1","Alarm":"128","Speed":"0","Direction":"293","Latitude":"5.391788482666016","Longitude":"100.29693603515625","DateTime":"2013-02-19 15:44:36","MainID":"1","IOState":"0","OilState":"0"}] 
```

但我试图列出所有数据，不幸的是 JSON 存储为空，我怀疑数据未存储在 MarkerStore 中，下面的代码正在尝试列出数据，但在控制台 FireBug 上没有写任何内容。

```
MarkerStore.each( function (model) {
    console.log( model.get('MainID') ); 
    }); 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:17:30.340

尝试`autoload = true`从商店中删除财产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T10:50:08.197

您的代码有效，但主要问题是当您调用 MarkerStore.each 时，此时商店为空（Ajax 是异步的）。您的脚本与数据的 ajax 一样快。如果您使用以下简单代码段，您将看到您的“mainID”。

```
setTimeout(function(){
        MarkerStore.each( function (model) {
                console.log( model.get('MainID') );
        });     
    }, 1500, MarkerStore); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T13:12:22.653

```
MarkerStore.on('load', function(store, records) {
    for (var i = 0; i < records.length; i++) {
    console.log(records[i].get('Latitude'));
    lati = records[i].get('Latitude'); 
    };
}); 
```

应该使用此代码，然后将在控制台上打印数据。以上问题打印存储数据代码错误，实际数据成功保存在JSON存储中

# c# - 棱镜 IRegionNavigationJournal.GoBack 不起作用

> ID：15098352
> 
> 赞同：4
> 
> 时间：2013-02-26T20:12:37.470
> 
> 标签：c#, .net, wpf, navigation, prism

正如标题所说，我`IRegionNavigationJournal`的 GoBack 方法有问题。首先我的场景：

2 个 Prism 模块 1 个带有内容区域的 Prism 外壳

我只通过`RegionManager.RequestNavigate("region", "ModuleName")`. 此外，我使用 ModuleName 在 unitycontainer 中注册视图和视图的 ViewModel

其中一个模块是仪表板模块，其中第二个模块（以及每个其他模块）注册了一个 navigateto 命令。此命令请求导航到模块 2。

一切正常，仪表板请求导航到内容区域，显示并呈现模块 2 的 navigateto 命令。

单击第二个模块的navigationto 命令后，第二个模块将显示在内容区域中。

此外，每个模块都将 GoBack 命令注入到 shell 中，以`IRegionNavigationJournal.GoBack`在方法中执行模块特定的内容`OnNavigateTo`。

每个 ViewModel 都实现`INavigationAware`（确切地说，这是在基本视图模型中实现的）。在 OnNavigatedTo 中，我保存了 NavigatioService。在发出模块 2 的 GoBack 命令后，执行的最后一个操作是调用模块 2 的 OnNavigateFrom。仪表板的 OnNavigateTo 永远不会被调用。模块 2 的视图停留在 contentregion 中，仅此而已。

如果我调试应用程序，则`IRegionNavigationJournal`返回堆栈显示 1 个带有 Uri“DashBoard”的条目。

一些代码片段：

寄存器类型：

```
container.RegisterType<object, DashboardViewModel>(new  ContainerControlledLifetimeManager());
container.RegisterType<object, DashboardView>(ModuleResources.ModuleName,
            new ContainerControlledLifetimeManager()); 
```

请求导航：

```
regionManager.RequestNavigate(ShellRegionNames.ContentRegion, ModuleResources.ModuleName); 
```

回去：

```
 navigationService.Journal.GoBack(); 
```

希望任何人都可以提供帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T10:04:32.023

似乎`RegisterType<T>`方法中的字符串必须与视图的类名相同。A`RequestNavigate(RegionName, ViewName)` 适用于不同的字符串，但`GoBack()`不适用。

# asp.net - 使用存储过程从数据库中检索数据表

> ID：15098353
> 
> 赞同：0
> 
> 时间：2013-02-26T20:12:41.030
> 
> 标签：asp.net, c#-4.0

让我详细解释一下我所拥有的场景以及我正在寻找的解决方案。首先，我创建了一个存储过程，它输出简单的东西，例如 2 个表和一条消息“不要停在这里”

**T-SQL：**

```
USE [mydb]
GO
/****** Object:  StoredProcedure [dbo].[BackupDatabase]    Script Date: 2/26/2013 11:29:10 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROCEDURE [dbo].[testing]
AS
BEGIN
    select 'A' firstname, 'B' lastname;

    print 'dont stop here'

    select 1 final
END 
```

到目前为止，我曾经使用 datarowcollection 类以单一方式重新检索表，我的静态方法如下所示：

**C＃：**

```
 public static class DataMan
    {
        public static DataRowCollection SelectData(string sql)
        {
            SqlDataSource DS = new SqlDataSource(CS, sql);
            return ((DataView)DS.Select(DataSourceSelectArguments.Empty)).ToTable().Rows;
        }
public static string CS =  ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
} 
```

在这里我可以很容易地得到我需要的东西，并找到我想要的任何行：

```
DataRowCollection people = Util.SelectData("Select * from students") 
```

但现在我打算创建一个存储过程，就像我上面提到的那样，做这样的事情，例如：

```
**DataTableCollection** people = Util.SelectData("exec dbo.Testing") 
```

**更新：**

所以我可以从我的存储过程中找到特定的表。

我曾尝试使用 DataTable、DataSet、DataTableCollections 但没有成功。我无法以正确的方式使用它们。

请帮我

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:32:14.647

尽管可以在此处说明的代码隐藏中使用它，但 SqlDataSource 更通常以声明方式在 ASP.NET 标记页上使用。但是，鉴于您已经开始，在调用存储过程时，您应该将 设置`SqlCommandType`为`StoredProcedure`，将过程名称提供给`SelectCommand`，然后返回`DataReader`。反过来`DataReader`，它支持一种`NextResult()`方法，您可以调用该方法来检索过程提供的每个离散结果集。这是一个伪代码框架，试图说明如何利用它：

```
// pseudo code
void stub()
{
   SqlDataSource d = new SqlDataSource(*connection string*);
   d.DataSourceMode = SqlDataSourceMode.DataReader;
   d.SelectCommandType = SqlDataSourceCommandType.StoredProcedure;
   d.SelectCommand = "dbo.Testing";
   // set some parameters 
   d.SelectParameters.Add("Parameter1Name","Parameter1Value"); // must be tailored to your proc!!
   d.SelectParameters.Add("Parameter2Name","Parameter2Value"); // must be tailored to        SqlDataReader r = (SqlDataReader) d.Select();

   while (r.HasRows)
   {
       while (r.Read())
       {
           // do something with each row
       }
       // advance to next result set
       r.NextResult();
   }

   r.Close();
} 
```

# python - Python：urllib.urlencode 正在逃避我的东西*两次*

> ID：15098354
> 
> 赞同：0
> 
> 时间：2013-02-26T20:12:42.150
> 
> 标签：python, urlencode, urllib

...但它并没有以同样的*方式*逃脱它两次。

我正在尝试将 ASCII 输出从 gpg 上传到网站。所以，到目前为止，我得到的只是查询表，向我显示它获得的数据，然后在它为 HTTP POST 请求编码后将其显示给我：

```
cnx = connect()
sql = ("SELECT Data FROM SomeTable")
cursor = cnx.cursor()
cursor.execute(sql)
for (data) in cursor:
        print "encoding : %s" % data
        postdata = urllib.urlencode( { "payload" : data } ) 
        print "encoded as %s" % postdata 
```

...但我得到的是：

```
encoding : -----BEGIN PGP MESSAGE-----
Version: GnuPG v1.4.12 (GNU/Linux)
.... etc...

encoded as payload=%28u%27-----BEGIN+PGP+MESSAGE-----%5CnVersion%3A+GnuPG+v1.4.12+... etc ... 
```

需要注意的部分是换行符并没有像我预期的那样变成 %0A。相反，它们以某种方式转义为“\n”，然后反斜杠转义为 %5C，因此换行符变为“%5Cn”。更奇怪的是，数据前面加上了*%28u%27*，结果是“ *(u'* ”。

奇怪的是，如果我只是做一个基本的测试：

```
data = "1\n2"
print data
print urllib.urlencode( { "payload" : data } ) 
```

我得到了我的期望，换行符变成 %0A ...

```
1
2
payload=1%0A2 
```

所以，我的预感是，从 mysql 查询返回的数据元素与我的文字“1\n2”（可能是一个 1 元素字典...不知道）不是同一种字符串，但我没有Python功夫知道如何检查它。

有谁知道这里发生了什么，以及我该如何解决？如果没有，关于如何通过 HTTP 发布此内容并正确转义所有内容的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:16:36.637

假设`connect()`是来自某些[DB-API 2.0](http://www.python.org/dev/peps/pep-0249)兼容数据库接口（如内置`sqlite3`或最流行的`mysql`接口）的函数，`for (data) in cursor:`是迭代`Row`对象，而不是字符串。

当您打印出来时，您实际上是在打印`str(data)`（通过将其传递给`%s`格式）。如果你想编码相同的东西，你必须编码`str(data)`.

但是，更好的方法是首先将行作为（一列的）行来处理，而不是依赖于`str`做你想做的事。

PS，如果您试图依靠元组解包来制作`data`每一行的第一个元素，那么您做错了：

```
for (data) in cursor: 
```

… 等同于：

```
for data in cursor: 
```

如果你想要一个元素`tuple`，你需要一个逗号：

```
for data, in cursor: 
```

（如果需要，您也可以添加括号，但它们仍然没有任何区别。）

具体来说，迭代游标将调用可选[`__iter__`](http://www.python.org/dev/peps/pep-0249/#iter)方法，该方法返回游标本身，然后循环调用其[`next`](http://www.python.org/dev/peps/pep-0249/#next)上的方法，这与调用相同，`fetchone()`直到结果集耗尽，并[`fetchone`](http://www.python.org/dev/peps/pep-0249/#id20)记录为返回“单个序列”，其类型未定义。在大多数实现中，这是一种特殊的行类型，例如[`sqlite3.Row`](http://docs.python.org/2/library/sqlite3.html#row-objects)，可以像访问一样访问它，`tuple`但对于以表格格式打印、允许按名称访问等具有特殊语义。

# recursion - 为什么这个函数会死循环——学习lisp

> ID：15098360
> 
> 赞同：4
> 
> 时间：2013-02-26T20:13:00.180
> 
> 标签：recursion, lisp, infinite-loop

（编辑：我不会担心 TCO）

我（终于开始）学习 Lisp。我正在尝试编写自己的（天真的）函数来展平列表。我从更简单的案例开始，如果它不起作用，我会建立它来处理更复杂的案例。不幸的是，我现在陷入了无限循环，无法弄清楚原因。

我也不知道如何在 lisp 中使用任何调试方法，所以如果你能指出我的方向，我也会很感激。

```
(defun flattenizer (lst)
  (if (listp (car lst))
    (flattenizer (car lst))
    (if (null lst)
      nil
      (cons (car lst) (flattenizer (cdr lst)))))) 
```

最终代码：

```
(defun flattenizer (lst)
  (cond
    ((null lst) nil)
    ( (consp (car lst)) 
        (nconc (flattenizer (car lst)) (flattenizer (cdr lst)) ))
    (T (cons (car lst) (flattenizer (cdr lst)))))) 
```

测试：

```
* (flattenizer '((1 2) (3 4)))

(1 2 3 4)
* (flattenizer '(1 (2 3) (4 5)))

(1 2 3 4 5)
* (flattenizer '((1 2) 3 (4 5) 6))

(1 2 3 4 5 6)
* (flattenizer '(1 2 3 4))

(1 2 3 4) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:19:29.860

`(listp NIL)`return `T`，`(listp (car NIL))`所以当你到达列表末尾并递归时`NIL`，循环就会发生。

您需要更改测试的顺序，`(null lst)`首先测试，以避免循环。最好为此重写它`cond`。更改测试的顺序更容易，使用`cond`.

然后您会注意到，由于某种原因，您永远只会展平参数列表中的第一个元素。`(3 4)`in`((1 2) (3 4))`等呢？我们真的应该以某种方式将扁平化的`car`结果与扁平化的结果结合起来`cdr`。

如果扁平化列表的结果是一个列表，那么我们需要合并两个结果列表。此外，由于我们将组合列表，如果我们遇到一个原子，我们将不得不生成一个列表，作为展平该原子的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T21:04:46.110

`NIL`由于实际和历史原因，在 Common Lisp 中有点“奇怪”。例如：

*   `NIL`是一个符号：`(symbolp NIL) ==> T`
*   `NIL`是一个列表：`(listp NIL) ==> T`
*   `NIL`不是**缺点**细胞：`(consp NIL) ==> NIL`
*   但无论如何你都可以接受它`car`：和`cdr``(car NIL) ==> NIL``(cdr NIL) ==> NIL`

在您的代码中递归调用`(car x)`何时`(listp (car x))`导致无限递归，因为`NIL`它是一个列表，它`car`本身就是一个列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T20:32:16.460

**使用 SBCL 进行调试。**

告诉 SBCL 你要调试：

```
* (proclaim '(optimize (debug 3))) 
```

你的代码：

```
* (defun flattenizer (lst)
    (if (listp (car lst))
      (flattenizer (car lst))
      (if (null lst)
        nil
        (cons (car lst) (flattenizer (cdr lst))))))

FLATTENIZER 
```

踩着它`STEP`

```
* (step (flattenizer '(1 (2 3) 4)))
; Evaluating call:
;   (FLATTENIZER '(1 (2 3) 4))
; With arguments:
;   (1 (2 3) 4) 
```

下一步

```
1] step
; Evaluating call:
;   (FLATTENIZER (CDR LST))
; With arguments:
;   ((2 3) 4) 
```

下一步

```
1] step
; Evaluating call:
;   (FLATTENIZER (CAR LST))
; With arguments:
;   (2 3) 
```

下一步

```
1] step
; Evaluating call:
;   (FLATTENIZER (CDR LST))
; With arguments:
;   (3) 
```

下一步

```
1] step
; Evaluating call:
;   (FLATTENIZER (CDR LST))
; With arguments:
;   NIL 
```

下一步

```
1] step
; Evaluating call:
;   (FLATTENIZER (CAR LST))
; With arguments:
;   NIL 
```

下一步

```
1] step
; Evaluating call:
;   (FLATTENIZER (CAR LST))
; With arguments:
;   NIL 
```

看起来你现在处于一个循环中。

回到顶层。

```
1] top

* 
```

现在检查您的源代码。

# css - 如何更改 css 以使降低一个班级不会降低另一个班级？

> ID：15098363
> 
> 赞同：0
> 
> 时间：2013-02-26T20:13:04.947
> 
> 标签：css, padding, word-wrap

我有两个 CSS 课程。一个应该在页面左侧保存文本图像，另一个应该在页面右侧保存表单。出于某种原因，当我增加填充以尝试降低页面左侧的文本图像时，右侧的表单也会下降。我该如何解决它，以便我可以独立调整两个类的填充。这是CSS：

```
.header { background:url(images/slider_bgpng200.png) top repeat-x; padding:0; margin:0 auto; }
.header .headertop{width: 100%; background: #d3e5e8; height: 30px;}
.block_header {margin:0 auto; width:1200px; padding:0; border:none; }
.formbox{float: right;}
.logo { float:left; padding:0; margin:0; width:242px;}
.slider { background: transparent; margin:0 auto; padding:0; height:383px;}
.slider .gallery { margin:0 auto; width:980px; height:383px; padding:0;} 
.slider .textholder {padding-top: 100px;} 
```

以下是它在 html 中的显示方式：

```
<div class="header">
   <div class="headertop"> 
       <div class="header_text"><a href="#">Email</a> | <a href="#">Client Login</a> </div>
   </div>
   <div class="block_header">
       <div class="logo"><a href="index.html"><img src="logo.png" width="242" height="94" border="0" alt="logo" /></a>
       </div>
       <div class="slider">
          <div class="gallery">
             <div class="textholder"> <img src="images/textimg.png"></div>
             <div class="formbox">Form is here </div>
          </div>
      </div>
   </div>
</div> 
```

谢谢。该网站位于 avidest.com/schneer。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:19:32.487

添加一个 float:left 到 textholder。

```
.slider .textholder {float:left;padding-top: 100px;} 
```

我还建议使用检查工具来查看实际发生的情况。在这种情况下，您会注意到 textholder 是一个使用整个容器宽度的块元素。

# c - char 字符串* 与 char 字符串 []

> ID：15098364
> 
> 赞同：0
> 
> 时间：2013-02-26T20:13:08.603
> 
> 标签：c

有没有区别：

```
char string = "name";
const char* point = string; 
```

对比

```
const char string[] = "name"; 
```

你也能解释一下区别吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:14:48.323

是的。

第一个简单地指向内存的只读部分，声明应该是：

```
const char* string = "name"; 
```

第二个创建一个足够长的数组来保存字符串`"name"`（因此，四个字符加一个用于空终止符）并将字符串复制到分配的空间内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:23:16.610

```
#include <stdio.h>

int main(int argc, const char** argv)
{
    const char *a1 = "hello";
    const char a2[] = "hello";
    char* b1;
    char* b2;

    b2 = (char*) a2;
    *b2 = 'c';
    puts(b2);

    b1 = (char*)a1;
    *b1 = 'c';
    puts(b1);

    return 0;
} 
```

b2 将正确显示“大提琴”。b1 将导致分段错误。

这是因为 b1 存储在代码的文本段中，而 b2 存储在数据段中。

我希望我没有搞砸...

此外，编译器可以通过识别在文本段上声明的某些内容来使其无效，但在代码中访问，因此 C 有时会流行起来，并将声明更改为数据段

# jquery - 单击外部菜单关闭不起作用

> ID：15098366
> 
> 赞同：0
> 
> 时间：2013-02-26T20:13:16.337
> 
> 标签：jquery

我一直[在 stackoverflow 阅读一些问题](https://stackoverflow.com/questions/2868582/click-outside-menu-to-close-in-jquery)，关于如何在没有插件的情况下使用 jQuery 在外部单击时关闭菜单。

我尝试使用`event.stopPropagation()`但无法正常工作。你能告诉我如何在下一个代码中使用它，并**解释为什么**在你的代码中工作吗？

这是我网页中的原始代码，**我希望它执行相同的功能，并在外部单击时将其关闭**（[此处为完整代码](https://github.com/gamersmafia/gamersmafia/blob/production/app/assets/javascripts/application.js#L84)）：

```
$('.open-popup-on-click').unbind('click').click(function() {
    $('#' + $(this).data('popup-id')).toggleClass('hidden');
    return false;
}); 
```

HTML 代码（第一个 div 只是用户点击的链接，当他们点击时，第二个 div 作为弹出窗口打开）：

```
<div class="topbar-block topbar-profile-options">
  <a class="open-popup-on-click"
    data-popup-id="topbar-user-actions"
    href="/cuenta"><%=avatar_img(@user, :very_small)%></a>
</div>

<div id="topbar-user-actions" class="hidden popup">
  <div style="float: left"><a href="/miembros/<%=@user.login%>"><%=avatar_img(@user, :normal)%></a></div>
  <ul style="display: inline-block">
    <li><a href="/cuenta">mi cuenta</a></li>
    <li><a href="/cuenta/clanes">mis clanes</a></li>
    <li><a href="/cuenta/competiciones">mis competiciones</a></li>
    <li style="padding-top: 20px; padding-bottom: 20px;"><a href="/miembros/<%=@user.login%>">mi perfil público</a></li>
    <li><a class="confirm-click nav" href="/cuenta/logout">cerrar sesión</a></li>
  </ul>
</div> 
```

`open-popup-on-click`是一个与所有链接一起使用的类，我想从那里打开一个弹出窗口。在这种情况下，弹出窗口是第二个 div，带有 ID`topbar-user-actions`

如果你还是不明白，请看这张图：

[http://i281.photobucket.com/albums/kk205/LEANDRO351/Gamersmafia/exampleMenu.png](http://i281.photobucket.com/albums/kk205/LEANDRO351/Gamersmafia/exampleMenu.png)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:04:05.550

尝试这个。

```
$(document).on('click',function(event){
          $('#topbar-user-actions').hide();
       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:23:27.073

有一些事情，但这会工作

```
 $('body').click(function(event){
                 $('.open-popup-on-click').not(':hidden').toggle();
             }); 
```

我的印象是，当用户单击页面上的其他任何位置时，您希望关闭该锚点。

# eclipse - eclipse 不接受我的 eclipsified todolist 应用程序

> ID：15098371
> 
> 赞同：1
> 
> 时间：2013-02-26T20:13:29.430
> 
> 标签：eclipse, scala, playframework-2.0, osx-mountain-lion

我是新手。所以我很自然地从[官方网站上](http://www.playframework.com/documentation/2.1.0/ScalaTodoList)[的 scala`todolist`](http://www.playframework.com/documentation/2.1.0/ScalaTodoList)教程开始。但由于我想在 eclipse 上做这项工作，我也在我的项目中使用[这个教程。](http://www.playframework.com/documentation/1.2.3/ide)`eclipsify`所以我做了这个

```
play new todolist
play eclipsify todolist 
```

然后，当我尝试通过执行以下操作导入项目时：`File >> import >> general >> existing project into workspace`然后将我的项目指向为`myPath/todolist`，eclipse 抱怨说`No projects are found to import`. 请问有什么帮助吗？

* * *

编辑：

我的搜寻使我找到了本教程（http://scala-ide.org/docs/tutorials/play20scalaide20/index.html）。于是我`cd`进入`todolist`并开始`play`。然后，当我键入时，`eclipsify`我收到错误：

```
[todolist] $ eclipsify
[error] Not a valid command: eclipsify (similar: eclipse)
[error] Expected '/'
[error] Expected ':'
[error] Not a valid key: eclipsify
[error] eclipsify
[error]          ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:52:29.707

`eclipsify`在最近版本的 sbt 中已被替换`eclipse`，因此请改用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T23:17:56.863

播放 eclipse |应用名称|

创建使用 Eclipse IDE 所需的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-11T10:05:26.023

如果你想创建可以导入的eclipse项目，你必须这样做：“sbt”之后的“eclipse”命令

然后尝试导入它应该可以工作。

# facebook - 获得朋友喜欢的 Facebook 页面

> ID：15098372
> 
> 赞同：0
> 
> 时间：2013-02-26T20:13:28.453
> 
> 标签：facebook, facebook-graph-api, django-socialauth, facepy

我使用 Django-social-auth 进行 facebook 登录和 Facepy 从 facebook 检索数据。现在我正在尝试获取用户朋友喜欢的所有页面的列表。如果我使用：

```
graph.get('some_friend_id/likes') 
```

我得到一个空的喜欢列表（ {'data': []} ）。

我在我的 Facebook 应用程序的用户和朋友权限中添加了“friends_likes”，但它仍然不起作用。我的代码如下所示：

```
instance = UserSocialAuth.objects.filter(user=request.user).filter(provider='facebook')
graph = GraphAPI(instance[0].extra_data['access_token'])
ps = graph.get('me/friends')
myfriends = ps['data']
frnd_id = myfriends[29]['id'] # getting a friend's ID
lk = frnd_id + '/likes'
frnd_likes = graph.get(lk)
print frnd_likes 
```

一点帮助会很棒。谢谢！

# javascript - 在布局顶部保留自定义 div，同时允许用户浏览网站

> ID：15098374
> 
> 赞同：2
> 
> 时间：2013-02-26T20:13:33.587
> 
> 标签：javascript, html, css, ajax, iframe

```
#ontop {
    position: absolute;
    width: 100%;
    height: 10%;
    top: 0;
    bottom: 90%;
    background-color: yellow;
}
#content {
    position: absolute;
    width: 100%;
    height: 90%;
    top: 10%;
    bottom: 0;
    border: 0;
} 
```

鉴于上述 CSS，是否可以在 DOM 元素中加载外部网站`#content`以允许用户浏览它？然后，该`#ontop`元素将能够向当前加载的网站提出一些附加功能。

* * *

`iframe`通常表现得像我想要的那样：

```
<div id="ontop">Always on top</div>
<iframe id="content" src="http://en.wikipedia.org/"></iframe> 
```

`iframe`不过，出于安全目的，一些网站（例如 Stack Overflow）会避免在其中访问其内容。

```
<div id="ontop">Always on top</div>
<iframe id="content" src="http://www.stackoverflow.com/"></iframe> 
```

上面的代码段不会加载网站内容，同时抛出以下错误：*由于 X-Frame-Options 禁止显示而拒绝显示文档*。

* * *

然后我尝试使用 AJAX 来满足我的需求（请参阅[此 mod](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)以允许使用 jQuery 进行跨域 AJAX 请求）：

```
<script type="text/javascript">
    $(function() {
        $.ajax({
            url: 'http://www.stackoverflow.com/',
            type: 'GET',
            success: function(data) {
                $("#content").html(data.responseText);
            }
        });
    });
</script>
<div id="ontop">Always on top</div>
<div id="content"></div> 
```

这*几乎*可以工作，因为出现了两个问题：

1.  复杂网站的渲染失败（例如 Stack Overflow）；
2.  用户无法浏览加载的网站，因为 URL（例如链接、请求）现在与运行上述脚本的服务器相关。

* * *

我终于尝试将两个第一个解决方案结合起来：

```
<script type="text/javascript">
    $(function() {
        $.ajax({
            url: 'http://www.stackoverflow.com/',
            type: 'GET',
            success: function(data) {
                $("#content").contents().find('body').append(data.responseText);
            }
        });
    });
</script>
<div id="ontop">Always on top</div>
<iframe id="content"></iframe> 
```

这有点好：

1.  渲染失败*更少*（例如，Google 仍然搞砸了，而 Stack Overflow 不再）；
2.  网址仍然是错误的。

* * *

怎么可能达到我的目的？无论是管理这些相对 URL 的解决方案，还是仍然适合我需要的完全不同的解决方案，都将受到欢迎。

* * *

Since jsFiddle isn't powerful enough for such complex asynchronous requests, below are the source codes of the three attempts I provided:

*   Using `iframe`: [iframe.html](http://pastebin.com/tGpw0ncM)
*   Using AJAX: [ajax.html](http://pastebin.com/BufJmacM)
*   Using both: [both.html](http://pastebin.com/E3sj1A2f)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:32:04.580

It looks like you've already discovered why this is difficult to do on the web, partially deliberately in order to prevent people from maliciously loading their website into another website.

With that in mind, if I were in your position I would investigate writing either a browser extension ([Chrome](http://developer.chrome.com/extensions/getstarted.html), [Firefox](http://blog.mozilla.org/addons/2009/01/28/how-to-develop-a-firefox-extension/)) ,or perhaps a [bookmarklet](http://en.wikipedia.org/wiki/Bookmarklet), all of which preserve the site's functionality while at the same time injecting JavaScript into the page that gets around the permissions issues that you are experiencing.

The advantage of a bookmarklet is that it should be the least amount of work and the most cross-browser solution, at the cost of power and flexibility. If you'd like the ability to have nice interfaces that act like part of the browser and don't require the user to activate the bookmarklet whenever it's appropriate, then look into an extension, especially if your target audience is Chrome/FF users.

Note that if you absolutely have to have IE users, developing extensions for IE is not very user friendly, although certainly doable.

Also, if you want to prototype your FF extension a bit before committing to developing one, look into [GreaseMonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/), an extension that essentially lets you write a lightweight version of extension code without worrying about the associated packaging.

# php - 来自 MySQL 的正则表达式

> ID：15098376
> 
> 赞同：0
> 
> 时间：2013-02-26T20:13:40.960
> 
> 标签：php, mysql, regex

我在 MySQL 中有一个表，其中包含我想传递给的几个表达式`preg_replace`

我的代码：

```
$q = mysql_query("SELECT * FROM TABLE");
while($r=mysql_query($q)) {
  $expressions = $r['expressions'];
}
$expressions = explode("\n", $expressions);
foreach ($expressions as $expression) {
  $content = preg_replace($expression, '', $content);
} 
```

数据库中的一些数据：

```
#<div class="FBTbtn">(.*?)</div>#
#<!-- Extra Link -->(.*?)<!-- End Of Extra Link -->#
#<a(.*?)/a>#
#Learn More:# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:17:07.830

如 mysql_query() 函数页面所述，使用 mysql_fetch_assoc() 遍历结果。[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

```
$content = 'foo bar baz';
$result = mysql_query("SELECT * FROM expressions");
while ($row = mysql_fetch_assoc($result)) {
    $content = preg_replace($row['expression'], '', $content);
} 
```

顺便说一句，不推荐使用 mysql_*() 函数。您应该切换到 PDO。 [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:58:07.003

我通过使用“，”而不是“\n”来修复它

代码：

```
$q = mysql_query("SELECT * FROM TABLE");
while($r=mysql_query($q)) {
  //Remove last "," from string
  $expressions = rtrim($r['expressions'], ",");
}
//Explode string into array based on "," instead of "\n"
$expressions = explode(",", $expressions);
foreach ($expressions as $expression) {
  $content = preg_replace($expression, '', $content);
} 
```

数据库中的数据应如下所示：

```
#<div class="FBTbtn">(.*?)</div>#,#<!-- Extra Link -->(.*?)<!-- End Of Extra Link -->#,#<a(.*?)/a>#,#Learn More:#, 
```

# c# - 绑定图像，使其水平滚动不起作用

> ID：15098377
> 
> 赞同：0
> 
> 时间：2013-02-26T20:13:42.850
> 
> 标签：c#, windows-phone-7, window

刚开始学习 c# 和 windows phone，我的问题我似乎无法让我的图像（绑定图像）显示并水平滚动，如果我在 xaml 中硬编码，我可以让它们工作，这是我的代码.. .

```
<!-- row 4 start -->
    <Grid x:Name="row3" Grid.Row="3">
        <ScrollViewer HorizontalScrollBarVisibility="Auto">
        <StackPanel x:Name="imgStackPanel" Orientation="Horizontal" ScrollViewer.HorizontalScrollBarVisibility="Auto">

                <!--<Image Source="{Binding Path=DvdPhoto}" Width="150" Height="150"  Margin="5"/>-->

            <Image Source="/GmanDVDStore;component/Images/rain.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/snow.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/sun.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/wind.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/rain.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/snow.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/sun.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/wind.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/rain.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/snow.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/sun.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/wind.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/rain.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/snow.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/sun.jpg" Width="150" Height="150" Margin="5"/>
                <Image Source="/GmanDVDStore;component/Images/wind.jpg" Width="150" Height="150" Margin="5"/>

        </StackPanel>
        </ScrollViewer>
    </Grid> 
```

这工作图像显示，我可以从左到右滚动，我有图像绑定的注释掉的代码不起作用。

如果我做垂直它会很好，因为我有一个列表框，我已经尝试过水平的列表框。

有没有人有这个问题的解决方案。

提前致谢

格曼

PS：放轻松，正如我所说，我刚刚开始学习windows phone。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:41:16.990

正如这个问题的答案中提到的：

[WP7 - 水平滚动列表框的问题](https://stackoverflow.com/questions/12558935/wp7-issues-with-horizontal-scrolling-listbox)

您可以通过为 ScrollViewer 的宽度指定一个值来执行此操作

希望这会有所帮助。

# android - 自定义对话框等待响应

> ID：15098381
> 
> 赞同：2
> 
> 时间：2013-02-26T20:13:56.920
> 
> 标签：android, dialog, return, customdialog

我创建了一个自定义对话框，以创建一个标准对话框，我可以在稍后的一行中创建它，这将是标准的。使用参数我更改文本。该对话框非常简单，只有一个按钮。

现在我重新考虑这是一个好主意。我实际上希望我的应用程序停止，直到显示我的对话框。我怎么能做到这一点？给对话框一个返回类型？或者，还有更好的方法？

我的对话：

```
/**
 * custom dialog
 * 
 * @param mcontext use activityname.this
 * @param title
 * @param text
 * @param button
 */
 public void showDialog(Context mcontext, String title,String text, String button) {
     // fonts
     Typeface tf_hn = Typeface.createFromAsset(mcontext.getAssets(), "helveticaneue.ttf");
     Typeface tf_hn_bold = Typeface.createFromAsset(mcontext.getAssets(), "helveticaneuebd.ttf");
     Resources res = mcontext.getResources();

     // custom dialog
     final Dialog dialog = new Dialog(mcontext);
     dialog.requestWindowFeature(Window.FEATURE_NO_TITLE); //not the normal dialog title
     dialog.setContentView(R.layout.view_dialog);

     TextView tv_dialog_title = (TextView) dialog.findViewById(R.id.tv_dialog_title);
     tv_dialog_title.setText(title);
     tv_dialog_title.setTypeface(tf_hn_bold);
     tv_dialog_title.setTextColor(res.getColor(R.color.white));

     TextView tv_dialog_text = (TextView) dialog.findViewById(R.id.tv_dialog_text);
     tv_dialog_text.setText(text);
     tv_dialog_text.setTypeface(tf_hn);
     tv_dialog_text.setTextColor(res.getColor(R.color.white));

     Button dialogButton = (Button) dialog.findViewById(R.id.bt_dialog_button);
     dialogButton.setTypeface(tf_hn_bold);
     dialogButton.setText(button);
     dialogButton.setTextColor(res.getColor(R.color.white));
     // if button is clicked, close the custom dialog
     dialogButton.setOnClickListener(new OnClickListener() {
         @Override
         public void onClick(View v) { 
             dialog.dismiss();
         }
     });

     dialog.show();
} 
```

然后我可以像这样使用它：

```
dialogH.showDialog(LoginActivity.this, res.getString(R.string.txt_dialog_fout), res.getString(R.string.txt_dialog_not_connected),res.getString(R.string.txt_dialog_button)); 
```

一切正常，直到我想显示一个带有“您已登录”（或左右）的对话框，然后在单击显示后开始一个意图。任何人的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:10:32.303

像这样创建一个带有内置监听器的自定义对话框类。

```
public class MyDialog extends Dialog {
    String title;
    String text;
    String button;

    DialogListener listener;

    interface DialogListener {
        void onCompleted();

        void onCanceled();
    }

    public MyDialog(Context context, String title, String text, String button) {
        super(context);
        this.title = title;
        this.text = text;
        this.button = button;
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Typeface tf_hn = Typeface.createFromAsset(getContext().getAssets(), "helveticaneue.ttf");
        Typeface tf_hn_bold = Typeface.createFromAsset(getContext()..getAssets(), "helveticaneuebd.ttf");
        Resources res = getContext().getResources();

        requestWindowFeature(Window.FEATURE_NO_TITLE); // not the normal dialog title
        setContentView(R.layout.view_dialog);

        TextView tv_dialog_title = (TextView) findViewById(R.id.tv_dialog_title);
        tv_dialog_title.setText(title);
        tv_dialog_title.setTypeface(tf_hn_bold);
        tv_dialog_title.setTextColor(res.getColor(R.color.white));

        TextView tv_dialog_text = (TextView) findViewById(R.id.tv_dialog_text);
        tv_dialog_text.setText(text);
        tv_dialog_text.setTypeface(tf_hn);
        tv_dialog_text.setTextColor(res.getColor(R.color.white));

        Button dialogButton = (Button) findViewById(R.id.bt_dialog_button);
        dialogButton.setTypeface(tf_hn_bold);
        dialogButton.setText(button);
        dialogButton.setTextColor(res.getColor(R.color.white));
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if(listener != null)
                    listener.onCompleted();
                MyDialog.this.dismiss();
            }
        });

        setOnCancelListener(new OnCancelListener() {

            @Override
            public void onCancel(DialogInterface dialog) {
                if(listener != null)
                    listener.onCanceled();
            }
        });
    }   public void setDialogListener(DialogListener listener) {
        this.listener = listener;
    }

} 
```

并实现对话框：

```
 MyDialog dialog = new MyDialog(getContext(), title, text, button);
    dialog.setDialogListener(new MyDialog.DialogListener() {

        @Override
        public void onCompleted() {
            // do stuff when dialog is completed
        }

        @Override
        public void onCanceled() {
            // do stuff when dialog is cancelled
        }
    });
    dialog.show(); 
```

# node.js - 在 exe 中嵌入 node.js 网站

> ID：15098385
> 
> 赞同：2
> 
> 时间：2013-02-26T20:14:16.567
> 
> 标签：node.js, express, embed, obfuscation, desktop-application

我想构建将使用**node.js**并**表示**在浏览器中“呈现”gui 的桌面应用程序。

由于客户可以访问我的应用程序，是否有任何简单的方法可以将所有内容嵌入到我的 exe 中？

我不喜欢在我的应用程序文件夹中有这么多文件夹的想法，这使每个人都可以轻松修改和窃取源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:27:28.940

提供基于 Web 的跨平台应用程序的两种流行解决方案是：

*   [NW.js](https://nwjs.io/)
*   [电子](https://electron.atom.io/)

我更喜欢 NW.js，因为它具有更好的向后兼容性，尤其是在 OS X 上。它们具有不同的功能集，因此您可能希望同时使用两者，看看哪一个满足您的需求。

# c# - 多个异步任务执行

> ID：15098387
> 
> 赞同：0
> 
> 时间：2013-02-26T20:14:21.693
> 
> 标签：c#, .net, task-parallel-library

请多多包涵 ：-）

我在 C# 中的 TPL 上苦苦挣扎，我一直在努力找出设计解决方案的最佳方法，以启动多个异步任务，等待它们完成，然后继续。我的初始 POC 如下。每个 IDataGatherer 实例都需要获取数据并将其按摩到 DataObject 实例中。

1.  我不确定如何处理来自 DownloadStringTaskAsync 调用的延续，以便我可以获取结果并将其按摩到 DataObject 中。ContinueWith 想要提供一个带有 void 返回签名的方法，但我觉得 ExtractData 方法需要返回一个 Task 实例，否则我没有 Task 实例可以从 GetDataAsync() 方法返回。

2.  我还想知道是否需要在我的 IDataGatherer 实例中引入一个 TaskCompletionSource ，但我如何将它附加到正在执行实际工作的任务上 - 例如 DownloadstringTaskAsync 和 ExtractData？

```
interface IDataGatherer
{
    Task<DataObject> GetDataAsync();
}

class DataObject
{
    public string Data { get; set; }
}

class IpGatherer : IDataGatherer
{
    private readonly string _url = "http://ip.jsontest.com";

    public Task<DataObject> GetDataAsync()
    {
        var tcs = new TaskCompletionSource<DataObject>(); // Do I need this???

        var client = new WebClient();

        // stuck here
        var task = client.DownloadStringTaskAsync(_url).ContinueWith(ExtractData);
    }

    private void ExtractData(Task<string> obj)
    {

    }
}

class Program
{
    private static void Main(string[] args)
    {
        // takes a list of IDataGatherers and waits for them
        // all to complete, handles exceptions, etc.
    }
} 
```

以这种方式设计解决方案可能会使事情变得过于复杂，所以我愿意接受清理事情或更简洁的建议。

**我正在使用 .NET 4.5**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:58:53.763

首先，你不需要`TaskCompletionSource`. 那是因为`ContinueWith()` *可以*提供一个非`void`签名的方法。例如：

```
public Task<DataObject> GetDataAsync()
{
    var client = new WebClient();

    return client.DownloadStringTaskAsync(_url)
                 .ContinueWith((Func<Task<string>, DataObject>)ExtractData);
}

private DataObject ExtractData(Task<string> task)
{
    return new DataObject(task.Result);
} 
```

（使用`Result`不会阻塞，因为您可以确定此时`Task`将完成。）

但由于您使用`DownloadStringTaskAsync()`的是 .Net 4.5，这意味着您可以使用`await`. 这使得代码更加简单：

```
public async Task<DataObject> GetDataAsync()
{
    var client = new WebClient();

    var s = await client.DownloadStringTaskAsync(_url);
    return ExtractData(s);
}

private DataObject ExtractData(string s)
{
    return new DataObject(s);
} 
```

# sql-server - SQL Server - 带 JDBC 的行锁定

> ID：15098389
> 
> 赞同：0
> 
> 时间：2013-02-26T20:14:25.200
> 
> 标签：sql-server, jdbc

是否可以使用 JDBC 锁定 SQL Server 表上的单行？

我正在使用 jTDS 驱动程序 v1.2.7 和 SQL Server 2005。

尝试

```
UPDATE myTable SET timestamp=GETDATE() WHERE id='myid' 
```

从 SQL Server Management Studio 中正确获取行上的锁。我能够在其他行上执行`SELECT`和`UPDATE`指示。

如果我尝试相同但使用 JDBC 整个表被锁定。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:55:56.227

Look at the isolation level of your session.

```
select session_id,login_name,program_name,
date_format,quoted_identifier,arithabort,
ansi_null_dflt_on,ansi_defaults,ansi_warnings,
ansi_padding,ansi_nulls,concat_null_yields_null,
case transaction_isolation_level  
when 0 then 'Unspecified'
when 1 then 'ReadUncomitted'
when 2 then 'ReadCommitted'
when 3 then 'Repeatable'
when 4 then 'Serializable'
when 5 then 'Snapshot'
end as transaction_isolation_level,
deadlock_priority
from sys.dm_exec_sessions 
```

Maybe your SELECT becomes blocked because you are using READ COMMITTED. The UPDATE will block only that single row as you leave opened the transaction.

Best Regards.

# c++ - 使用 boost MPL 或类似方法执行此迭代器过滤器的任何方式

> ID：15098390
> 
> 赞同：0
> 
> 时间：2013-02-26T20:14:27.867
> 
> 标签：c++, boost, c++11

本质上，我有几种情况`boost::filter_iterator`用于过滤某些条件的迭代器。有一种情况，我想同时过滤 2 个条件，我们已经有一些预先存在的代码，但我想知道是否有使用 boost 或标准库的惯用方法：

```
 /*! TODO: Surely there should be something in std/boost to achieve this??? */
    /*! Filter for things that satisfy F1 and F2 */
    template <
        typename F1,
        typename F2,
        typename ArgT
    >
    struct filter_and
    {
        F1 f1;
        F2 f2;

        filter_and(F1 _f1, F2 _f2): f1(_f1), f2(_f2)
        {}

        inline bool operator() (ArgT const& arg) const
        {
            return f1(arg) && f2(arg);
        }
    }; 
```

如果解决方案需要 c++11，只要最新的 MSVC 可以处理它就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:39:57.423

尝试这个：`make_filter_iterator( it, [=](value_type const& v) { return f1(v) && f2(v); } );`

对于更高级的东西...

```
bool and_in_order() { return true; }
template<typename F0, typename Funcs...>
bool and_in_order( F0&& f0, Funcs&&... funcs ) {
  return f0() && and_in_order(funcs...);
}

template<typename... Funcs>
struct and_unary_functors {
  std::tuple<Funcs...> funcs;
  template<typename Arg, typename seq=typename make_seq<sizeof...(Funcs)>::type>
  bool operator()(Arg&& arg) const;

  template<typename Arg, int...s>
  bool operator()<Arg, seq<s...>>(Arg&& arg) const {
    return and_in_order( [&](){ return get<s>(funcs)(arg); }... );
  }
};

template<typename... Funcs>
and_unary_functors<Funcs> make_and_unary( Funcs const&... funcs ) {
  return {std::make_tuple(funcs...)};
};

auto filter_it = make_filter_iterator( base_iterator, make_and_unary( f1, f2, f3, f4 ) ); 
```

或类似的愚蠢的东西。

# ios - 无填充画圈IOS

> ID：15098391
> 
> 赞同：12
> 
> 时间：2013-02-26T20:14:34.807
> 
> 标签：ios, xcode

我正在使用此代码在 UIImageView 内绘制一个圆圈。

```
CAShapeLayer *circleLayer = [CAShapeLayer layer];
// Give the layer the same bounds as your image view
[circleLayer setBounds:CGRectMake(0.0f, 0.0f, [photoView bounds].size.width,
                                  [photoView bounds].size.height)];
// Position the circle anywhere you like, but this will center it
// In the parent layer, which will be your image view's root layer
[circleLayer setPosition:CGPointMake(coordsFinal.x + 130, coordsFinal.y + 200)];
// Create a circle path.
UIBezierPath *path = [UIBezierPath bezierPathWithOvalInRect:
                      CGRectMake(0.0f, 0.0f, 50.0f, 50.0f)];
// Set the path on the layer
[circleLayer setPath:[path CGPath]];
// Set the stroke color
[circleLayer setStrokeColor:[color CGColor]];
// Set the stroke line width
[circleLayer setLineWidth:2.0f];

// Add the sublayer to the image view's layer tree
[[photoView layer] addSublayer:circleLayer]; 
```

我希望圆圈是空的，并且只有边框。我怎样才能去除填充物？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T20:33:58.307

将填充颜色设置为透明（alpha 0）

```
[circleLayer setFillColor:[[UIColor colorWithWhite:0 alpha:0] CGColor]]; 
```

又名...

```
[circleLayer setFillColor:[[UIColor clearColor] CGColor]]; 
```

（*感谢泽夫*）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-07T05:48:37.617

CAShapeLayer 手册页明确指出将 fillColor 设置为`nil`不执行填充操作。这与填充透明颜色不同，有些人建议这样做，因为后者会覆盖现有内容，使它们变得清晰/透明，应该被视为破坏性操作。

# rest - 登录和注销操作应在“RESTful”设置中使用哪种 HTTP 方法

> ID：15098392
> 
> 赞同：38
> 
> 时间：2013-02-26T20:14:36.177
> 
> 标签：rest

好奇这里的其他人如何在 REST 架构中表示这些。

```
/users/login/
/users/logout/ 
```

这些端点分别设置会话以登录用户或清除它。我的直觉说 POST，但我实际上并没有创建一个对象。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-26T20:16:36.293

您应该使用`POST`-`GET`用于这些操作可能会导致浏览器预取和搜索引擎爬虫出现问题。见（[1、2](https://stackoverflow.com/a/14587231/51) [）](https://stackoverflow.com/q/7140074/51) _

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2019-09-06T03:53:21.917

也许连接？MDN 说：

> HTTP CONNECT 方法启动与请求资源的双向通信。它可以用来打开隧道。

由于登录意味着在浏览器和服务器之间保持会话，因此 CONNECT 方法最有意义。

# java - 可能有一个ApplicationScoped bean，它用richfaces 皮肤来皮肤JSF 2 应用程序？

> ID：15098394
> 
> 赞同：1
> 
> 时间：2013-02-26T20:14:39.360
> 
> 标签：java, jsf, jakarta-ee, jsf-2, richfaces

在生产中希望用户能够编写属性文件并将该文件上传到我们的生产服务器。一旦它到位，它将包含richfaces皮肤所需的属性。这个文件可以随便命名。

`WEB-INF/myprop.properties`在开发中，我希望从我所有其他属性文件所在的内部读取属性文件。这个文件可以随便命名。

到目前为止，我已经这样做了：

```
@ManagedBean(name="myCustomSkin ")
@ApplicationScoped
public class MyCustomSkin extends SkinFactoryImpl {
    /*
     * In here I call 
     * Skin s = this.buildSkin(context, "skin"); in my constructor
     * I am also overriding the loadProperties() method so it load my properties just fine
     * For some reason I can't get my app to actually use the properties I have loaded
     */
} 
```

有任何想法吗？基本上，我想通过一个 ApplicationScoped ManagedBean 动态地皮肤我的richfaces 应用程序，该应用程序在我的 Tomcat 7 服务器启动时被初始化。理想情况下，皮肤文件的名称将是动态用户输入，可能从数据库或不同的属性文件中读取。

编辑 1：我已经让它加载属性文件，然后我手动（通过 java 代码）尝试通过使用`servletContext.setInitParameter("org.richfaces.skin", this.skin);`where `this.skin`is a String 变量插入上下文参数，我得到这样的值：`this.skin = s.getName();`如果你看到上面`s`是只是我从中得到的 Skin 对象`this.buildSkin`。这是`SkinNotFound Exception`因为我假设我的皮肤没有在我的课程路径或其他东西中占据一席之地。

编辑 2：使用 JSF 2.1.17、Richfaces 4.3.0 和 Tomcat7

编辑3：有没有办法告诉richfaces 在不同的目录中查找`myskin.skin.properties`文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:45:19.850

实现这样的 RichFaces 源代码是你最好的朋友。

这是我发现的如何做你想做的事：

将文件添加到 jar（或任何地方，以便它出现在类路径中） `META-INF/services/org.richfaces.application.Module` 文件的内容应该是`com.example.CustomModule`

自定义模块的实现可以是这样的：

```
public class CustomModule implements Module {
    public void configure(ServicesFactory factory) {
        factory.setInstance(SkinFactory.class, new CustomSkinFactoryImpl());
    }
} 
```

然后根据您的需要实现 SkinFactory，例如（如果您想使用 CustomSkin 扩展默认行为）：

```
public class CustomSkinFactoryImpl extends SkinFactoryImpl {
    public Skin getSkin(FacesContext context) {
        return new CompositeSkinImpl(new CustomSkin(), super.getSkin(context));
    }
} 
```

# javascript - JS'返回'格式

> ID：15098395
> 
> 赞同：1
> 
> 时间：2013-02-26T20:14:43.547
> 
> 标签：javascript, jquery

甚至不知道如何称呼这个问题......我四处询问，没有人真正知道如何解决我的建议。所以我在这里...

让我解释一下我需要做什么。处理一个 JS 函数。一切都很好，除了这一行：

```
return '<div class="pie-label-custom">'+label+'<br/>'+Math.round(series.percent)+'%</div>'; 
```

哪个有效。但是，我想删除退货`'<br/>'`- 这很容易做到。我的问题是，当我这样做时，它不会添加空格。即“nospace”应该是“no space”。

问题 - 我如何`<br/>`用空格替换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:17:30.000

代替

> `<br/>`

利用

> `&nbsp;`

# mysql - MySQL Append-Only 模型 - 使用 DELETE 清理查询

> ID：15098398
> 
> 赞同：0
> 
> 时间：2013-02-26T20:14:48.713
> 
> 标签：mysql, sql, rdbms

目前将我们的表移动到仅附加模型，以通过避免 UPDATE 和 DELETE 来提高写入性能，并使用 SELECT 的 memcached 前端。

所有行都带有时间戳，使用 MAX(timestamp) 选择最新的行。这很好用，虽然一段时间后表格会充满旧的不相关数据，我们可以编写一个简单的

```
DELETE FROM table WHERE timestamp < XXXX 
```

尽管这将删除在过去 XX 时间内可能尚未更新的行，因此从表中完全删除该 ID 而不仅仅是旧行。

下面提供了一个非常简单的示例模式和数据来演示

```
---------------------------
| id        |   INT       |
| name      |   VARCHAR   |
| timestamp |   TIMESTAMP |
--------------------------- 
```

初始数据

```
-------------------------------------------
| id        |   name       |  timestamp   |
-------------------------------------------
| 1         |   Trevor     |            1 |
| 2         |   Mike       |            1 |
------------------------------------------- 
```

如果用户名被更新，一行将被追加，而不是更新，用户的新名称。

```
-------------------------------------------
| id        |   name       |  timestamp   |
-------------------------------------------
| 1         |   Trevor     |            1 |
| 2         |   Mike       |            1 |
| 1         |   Trev       |           60 |
------------------------------------------- 
```

使用简单的 DELETE 查询删除超过 60 秒的行（实际情况更像是一个小时甚至一天）将按预期删除第 1 行的 Trevor，但它也会删除 Mike 的唯一记录。

```
-------------------------------------------
| id        |   name       |  timestamp   |
-------------------------------------------
| 1         |   Trev       |           60 |
------------------------------------------- 
```

我们需要它只删除早于 XX 的不同 ID 行，因此即使 Mike 没有更新他的名字并且他的时间戳早于 XX 时间，我们也会留下两个用户。

```
-------------------------------------------
| id        |   name       |  timestamp   |
-------------------------------------------
| 2         |   Mike       |            1 |
| 1         |   Trev       |           60 |
------------------------------------------- 
```

我们可以遍历每个 ID，获取最新的时间戳，然后删除所有早于该时间戳的行，但是随着表获得更多用户，此过程将花费更长的时间。

是否有任何 SQL 查询可以，最好是在一个或两个查询中清理表，如上所述？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:43:07.113

我不是 MySQL 专家，但我相信这个查询应该可以解决问题：

```
DELETE t1 FROM
  table1 AS t1, table1 AS t2
WHERE 
  t1.id = t2.id
AND 
  t1.timestamp < t2.timestamp; 
```

您可以将这 60 分钟添加到 t1.timestamp，这样它只会删除超过 60 分钟的行。

[SQL小提琴](http://sqlfiddle.com/#!2/13963/1)

# javascript - XPages DateTextBox - 设置约束

> ID：15098399
> 
> 赞同：0
> 
> 时间：2013-02-26T20:14:52.073
> 
> 标签：javascript, dojo, xpages

我正在使用日期文本框并且有几个问题。这是设计师 9，所以它使用 dojo 1.8 并不是说​​它应该有太大的不同。

设置最小/最大日期

我没有在设计师中看到这样做的方法。xe:djDateTimeConstraints 中没有任何匹配的内容，所以这是我需要通过 javascript 执行的操作吗？我在下面有一个示例，一旦选择了 StartDate，就会更改 EndDate 控件，但没有看到设置 StartDate 的方法，而不是 beforeRenderResponse 或类似的方法。

可选日期

[http://dojotoolkit.org/reference-guide/1.8/dijit/form/DateTextBox.html](http://dojotoolkit.org/reference-guide/1.8/dijit/form/DateTextBox.html) “还针对开发人员提供的约束进行验证，例如最小值、最大值、一周中的有效天数等。”

一周中的有效日期 - 我很乐意将其设置为可选择的工作日，但没有示例，并且链接不会转到具有星期限制的页面。我应该搜索什么术语？在下面的示例中，我有一个验证器，但我不知道日期文本框是否可以让周末无法选择。

这是我的示例控件-设置开始日期后，它会更改结束日期的约束

```
<xp:label value="Start Date" id="lblStartDate"></xp:label>
<xe:djDateTextBox id="djDateStart">
    <xe:this.constraints>
        <xe:djDateTimeConstraints datePattern="M/dd/yyyy"></xe:djDateTimeConstraints>
    </xe:this.constraints>
    <xp:eventHandler event="onChange" submit="false">
        <xe:this.script><![CDATA[
        var startDateID = "#{id:djDateStart}";
        var endDateID = "#{id:djDateEnd}";
        var hiddenEndDateID = "#{id:hiddenEndDate}";

    require(["dojo/date/locale"], function(locale){
        var x = new Date (dojo.byId(startDateID).value);
          // Fails if current date is the weekend or empty
        if(locale.isWeekend(x) || dojo.byId(startDateID).value == "") {
            dojo.style(hiddenEndDateID, "display", "none");
            dojo.byId(endDateID).value = "";
            dojo.byId(startDateID).value = "";
            dijit.byId(startDateID).displayMessage("dates must be weekdays");
        } else {
            // Set display value and constraint for End Date
            dojo.byId(endDateID).value = dojo.byId(startDateID).value;
            dijit.byId(endDateID).constraints.min =  arguments[0];
            dijit.byId(endDateID).constraints.max = dojo.date.add(arguments[0], "week", 3);

            // Make End Date and Comment visible. 
            dojo.style(hiddenEndDateID, "display", "inline");
        }
    })
    ]]></xe:this.script>
    </xp:eventHandler>
</xe:djDateTextBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:28:50.760

我想出的解决方案是使用范围检查 - 而不是约束。因此，在下面的脚本块中，当日期为星期日/星期六 (0, 6) 并且不在范围内时，它将返回 false。

也许这会帮助别人。

```
 fyStart = new Date ("#{applicationScope.fyStart}");
        fyEnd = new Date ("#{applicationScope.fyEnd}");
        calendarEnd = new Date ("#{applicationScope.calendarEnd}");

    require(["dojo/ready", "dojo/parser", "dijit/registry", "dijit/Dialog"], function(ready, parser, registry){
         ready(function(){

            dijit.byId('#{id:djDateStart}').rangeCheck = function(date,constraints) {
                var day=date.getDay();
                return day !==0 && day !== 6 &&  date >=  fyStart && date <=  calendarEnd;
            }
            dijit.byId('#{id:djDateEnd}').rangeCheck = function(date,constraints) {
                var day=date.getDay();
                return day !==0 && day !== 6 &&  date >= fyStart && date <=  calendarEnd;
            }

        });
    }); 
```

# jquery - jQuery Tipsy Tooltip 插件自定义

> ID：15098407
> 
> 赞同：2
> 
> 时间：2013-02-26T20:15:11.677
> 
> 标签：jquery, jquery-plugins, tipsy

当特定元素悬停在上方时，我正在使用 jQuery 插件[Tipsy来激活工具提示。](http://onehackoranother.com/projects/jquery/tipsy)目前，工具提示出现在触发它的元素的中间，但我想自定义插件，使工具提示出现在相应的标题上。看看我在下面链接到的示例。当整个`#everything`div 悬停时触发工具提示，这是正确的，但我希望工具提示出现在标题上方。

示例：http: [//jsfiddle.net/JqFwP/2/](http://jsfiddle.net/JqFwP/2/)

如果您需要更多信息或进一步解释我要完成的工作，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:24:45.703

我不熟悉喝醉的插件，但是如何将`mouseenter`事件链接到`#everything`？

JAVASCRIPT：

```
$("#everything").tipsy({
    gravity: 's'
}).mouseenter(function(){
    var top=$(this).find('h2').offset().top - 35,
        left=$(this).find('h2').offset().left - 10;
    $('.tipsy').css({
        'top': top + 'px',
        'left': left + 'px'
    });
}); 
```

演示（单标题）：http: [//jsfiddle.net/dirtyd77/JqFwP/16/](http://jsfiddle.net/dirtyd77/JqFwP/16/)

演示（多个标题）：http: [//jsfiddle.net/dirtyd77/JqFwP/17/](http://jsfiddle.net/dirtyd77/JqFwP/17/)

恕我直言，我建议您改用[jQueryUI 的工具提示](http://jqueryui.com/tooltip/)。我觉得会更有好处。只是一个想法！如果您有任何问题，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T03:54:53.703

我想我明白了。

您需要从以下位置更改此 pos 变量：

```
 var pos = $.extend({}, this.$element.offset(), {
                width: this.$element[0].offsetWidth,
                height: this.$element[0].offsetHeight
            }); 
```

到：

```
 var pos = $.extend({}, this.$element.offset(), {
                width: $(this).children("h2").offsetWidth,
                height: $(this).children("h2").offsetHeight
            }); 
```

在这里工作小提琴：http: [//jsfiddle.net/jeremythuff/L9BVc/8/](http://jsfiddle.net/jeremythuff/L9BVc/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T23:06:10.240

从我的角度来看，操作插件的代码并不是最好的解决方案。@Dom 的方法看起来不错，但不支持重力属性的“s”值，这表明元素中心的工具提示已绑定。

我的第一个想法是检测容器“div”的鼠标输入并将醉酒绑定到内部标题（h2）。这不适用于小标题，因为默认情况下 h2 显示为块并占用 100% 的容器元素。

您必须在标题中添加一些 CSS 样式，这会破坏您的内容。所以我设法建立了一个解决方案，我用 span 元素包装 h2 内容，以保持干净和清晰。

处理您的原始 HTML

```
<div id="everything" original-title="The whole kit and caboodle.">
     <h2>Working with really great and awesome headlines</h2>
     ....
</div> 
```

到

```
<div id="everything" original-title="The whole kit and caboodle.">
     <h2><span original-title="The whole kit and caboodle.">Working with really great and awesome headlines</span></h2>
</div> 
```

最不重要的是，我已经完善了我的代码，以便为每个 div 容器仅绑定一次小费，因为我无法找出插件如何操作 DOM

**@585connor 建议的更新版本**

[http://jsfiddle.net/JqFwP/22/](http://jsfiddle.net/JqFwP/22/)

**更新 vol2：** 我的方法还有一个问题，如果标题太短，工具提示会被剥离到 DOM 之外。我已经设法使用包装跨度中的一个类和一些 css 代码来解决这个问题。

这个问题的证明 [http://jsfiddle.net/JqFwP/25/](http://jsfiddle.net/JqFwP/25/)

我的解决方法 [http://jsfiddle.net/JqFwP/24/](http://jsfiddle.net/JqFwP/24/)

# .net - 使用 WCF 和 DefaultCredentials 时如何处理密码更改？

> ID：15098409
> 
> 赞同：9
> 
> 时间：2013-02-26T20:15:16.767
> 
> 标签：.net, wcf, security, exception, passwords

我有一个使用 WCF 代理来调用服务的客户端。凭据和其他功能正常工作，但如果用户更改了他们的域密码并且我重新启动了应用程序，那么由于此错误，我无法调用该服务：

`System.ServiceModel.Security.SecurityNegotiaionException`-> 服务器已拒绝客户端凭据。

`System.Security.Authentication.InvalidCredentialException`-> 服务器已拒绝客户端凭据。

`System.componentmodel.Win32Exception` -> 登录尝试失败。

显然，我知道用户的凭据已更改，但如何刷新`CredentialCache`以反映新凭据，以便 WCF 调用成功？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-06T18:30:23.473

The service checks the token in the client context against the AD. The wcf client uses the existing windows token it receives when the user logged into his windows account. If you change the password, the windows session still runs with the old credentials. You have to log in and out of your windows session in order to update the cached credentials.

# php - php mysqli 结果对象不能立即在 if 语句中引用...？

> ID：15098410
> 
> 赞同：1
> 
> 时间：2013-02-26T20:15:20.167
> 
> 标签：php, if-statement, mysqli, logic, conditional-statements

```
//Execute query and fetch first row  
if ($qry=$db->query("SELECT statement")) {  
  if ($row=$qry->fetch_object()) {

  }  
}

//Same code as above using only one if statement
if ($qry=$db->query("SELECT statement") && $row=$qry->fetch_object()) {

} 
```

为什么第二个代码块（作为第一个代码块的替换运行时）会产生错误“调用非对象上的函数 fetch_object”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:37:08.450

这是因为 PHP 并没有像您期望的那样解析第二条语句。

它的读法如下：

```
if ($qry = ($db->query("SELECT statement") && $row = $qry->fetch_object())) 
```

如您所见，在调用它`$qry`之前设置了手段。`fetch_object`

尝试将您的陈述附在`()`：

```
if (($qry=$db->query("SELECT statement")) && ($row=$qry->fetch_object())) 
```

# c# - ASCII + Numpad 组合 10 次幂

> ID：15098415
> 
> 赞同：5
> 
> 时间：2013-02-26T20:15:27.827
> 
> 标签：c#, math, language-agnostic

我正在编写一个应用程序，我需要在字符串中使用幂数。但我终其一生都无法弄清楚如何输入 power 10 个字符。我知道如果我按住`ALT`+ `0178`，字符“²”会出现，但我如何输入³甚至^(40)之类的东西？

我试过在网上寻找，但只看到“²”的代码（以及其他不相关的代码）。我尝试在 Windows 中使用字符映射程序，但除了“²”之外我找不到任何东西。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-26T20:40:40.833

以与通常键入相同的方式制作上标 10：使用 1 和 0。

*   上标 1：Alt 0185 或 Alt +00B9：¹
*   上标 2：Alt 0178 或 Alt +00B2：²
*   上标 3：Alt 0179 或 Alt +00B3：³
*   上标 4：Alt +2074：⁴</li>
*   上标 5：Alt +2075：⁵</li>
*   上标 6：Alt +2076：⁶</li>
*   上标 7：Alt +2077：⁷</li>
*   上标 8：Alt +2078：⁸</li>
*   上标 9：Alt +2079：⁹</li>
*   上标 0：Alt +2070：⁰</li>

如果您正在编写代码，在代码中引用它们的更好方法是使用正确的转义码。这里的语法适用于 C/C++/C#/Java，但其他语言应该有类似的东西。

*   上标 1：“\u00B9”
*   上标 2：“\u00B2”
*   上标 3：“\u00B3”
*   上标 4：“\u2074”
*   上标 5：“\u2075”
*   上标 6：“\u2076”
*   上标 7：“\u2077”
*   上标 8：“\u2078”
*   上标 9：“\u2079”
*   上标 0：“\u2070”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T20:20:26.740

我不相信 10 次方的 Unicode 字符。记事本允许您输入文本，Alt+NumPad 击键为您提供了一种输入 Unicode 字符的方法。但据我所知，您要找的角色并不存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T20:24:17.987

2 指数字符是扩展的 ASCII 字符（十进制 253）；10 没有等价物。有关典型字符集中可用内容的列表，请参阅[ASCII 表](http://www.asciitable.com/)。

考虑使用 Word（或任何文字处理器，或 Mathematica，它使输入公式和“数学符号”变得非常容易，并且您可以执行它！）因为记事本并不能真正应对挑战。我使用的每个文字处理器都提供上标（指数）字符样式，有些（包括 Word）提供“公式编辑器”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T20:20:10.623

每次您希望数字显示为幂时，您是否尝试按“^”这个符号？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-15T17:38:47.127

这是一个用于复制/粘贴的上标生成器。我对 0 和高于 4 的数字有不同程度的成功，这取决于我粘贴的内容。它与您粘贴到的任何工具的字符编码有关。汤米和大卫在上面的评论中讨论了这个问题。

[https://lingojam.com/SuperscriptGenerator](https://lingojam.com/SuperscriptGenerator)

创作者还做了一个下标生成器： [https ://lingojam.com/SubscriptGenerator](https://lingojam.com/SubscriptGenerator)

# android - 给文本一个颜色

> ID：15098416
> 
> 赞同：0
> 
> 时间：2013-02-26T20:15:30.010
> 
> 标签：android, textview

如果我有类似的东西：

```
TextView description_label;
description_label.setText("Information"); 
```

如何选择/设置文本的颜色。例如。以绿色显示“信息”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:16:16.043

打电话`description.setTextColor()`。或者`android:textColor`在xml中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T00:44:46.987

```
TextView description_label;
description_label.setTextColor(Color.GREEN);
description_label.setText("Information"); 
```

# javascript - Play Framework 2.1 返回 HTTP 标头而不是 JavaScript

> ID：15098419
> 
> 赞同：4
> 
> 时间：2013-02-26T20:15:52.737
> 
> 标签：javascript, caching, playframework, http-headers, playframework-2.1

在 Play Framework 2.1 中请求公共资产时，我得到的是 HTTP 标头而不是 JavScript/资产源。

我在 iPad 上的 Safari 中遇到了这个问题，它经常发生在随机的 JavaScript 文件上。

在我的 index.html 中，我请求了一些 js 文件：

```
<script src='@routes.Assets.at("javascripts/libs/moment.js")'></script>
<script src='@routes.Assets.at("javascripts/libs/underscore.js")'></script>
<script src='@routes.Assets.at("javascripts/libs/backbone.js")'></script>
<script src='@routes.Assets.at("javascripts/bridge/component.js")'></script> 
```

在控制台中，我以开发模式运行 Play

```
play run 
```

当我在 Safari 中请求文件时，我收到显示 HTTP 标头而不是 JavaScript 代码的响应。我的问题是什么会导致这种行为？

![在此处输入图像描述](../Images/e974b564f9b0977d7bafe92f7f43920f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T15:00:26.077

我们正在 iPad 应用程序上试验同样的问题。它似乎与 Playframework 资产和 iPad 相关联。

我们应该在游戏中创造一个问题，事实上它很难重现。

我们也在使用 Play 2.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T23:47:27.037

您可以在屏幕截图中看到您正在显示调试控制台，该控制台通常显示标题等......您需要展开实际的浏览器窗口以查看响应内容。

# python - 从 Jenkins 生成外部进程 - 生成但未执行

> ID：15098423
> 
> 赞同：1
> 
> 时间：2013-02-26T20:16:03.033
> 
> 标签：python, jenkins

我正在尝试从 Windows 7 64 位中的 Jenkins 构建步骤启动几个外部应用程序。它们本质上是旨在相互交互并对某些软件执行一系列回归测试的程序。Jenkins 作为 Windows 服务作为在机器上具有管理员权限的用户运行。我认为这完全揭示了我的 Jenkins 安装的任何奇怪之处。

我编写了一个 Python3 脚本，当从 Windows 命令行运行时，它成功地完成了我想要的操作。当我将此脚本作为 Jenkins 构建步骤运行时，我可以看到应用程序已通过任务管理器生成，但没有与它们关联的 CPU 活动，也没有其他证据表明它们实际上在做任何事情（它们产生日志文件等，但这些都没有出现）。在回归测试过程中，其中一个应用程序通常以 25% 的 CPU 运行。

Python 脚本本身运行完成，就好像一切正​​常。Jenkins 正在正确监控脚本的输出，我可以从作业的控制台输出中看到。我为每个外部应用程序使用 os.spawnv(os.P_NOWAIT, ...) 。subprocess 模块没有做我想做的事，我只是想让这些程序在外部运行。

我什至通过 Cygwin 运行了一个 bash 脚本，该脚本在功能上与 Python 脚本执行相同的操作，但结果相同。知道为什么这些应用程序会产生但不执行吗？

谢谢！

# python - 实例方法上的 Python 装饰器

> ID：15098424
> 
> 赞同：3
> 
> 时间：2013-02-26T20:16:03.870
> 
> 标签：python, oop, decorator, instance-methods

有人知道这段代码有什么问题吗？

```
def paginated_instance_method(default_page_size=25):
    def wrap(func):
        @functools.wraps(func)
        def inner(self, page=1, page_size=default_page_size, *args, **kwargs):
            objects = func(self=self, *args, **kwargs)
            return _paginate(objects, page, page_size)
        return inner
    return wrap

class Event(object):
    ...
    @paginated_instance_method
    def get_attending_users(self, *args, **kwargs):
        return User.objects.filter(pk__in=self.attending_list) 
```

我收到以下错误：

```
 Traceback (most recent call last):
      File "<console>", line 1, in <module>
      File "/Users/zarathustra/Virtual_Envs/hinge/hinge_services/hinge/api/decorators.py", line 108, in wrap
        def inner(self, page=1, page_size=default_page_size, *args, **kwargs):
      File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/functools.py", line 33, in update_wrapper
        setattr(wrapper, attr, getattr(wrapped, attr))
    AttributeError: 'Event' object has no attribute '__name__' 
```

我认为这会起作用的原因是，通过反复试验，我得到了以下装饰器，就像类方法的魅力一样：

```
def paginated_class_method(default_page_size=25):
    def wrap(func):
        @functools.wraps(func)
        def inner(cls, page=1, page_size=default_page_size, *args, **kwargs):
            objects = func(cls=cls, *args, **kwargs)
            return _paginate(objects, page, page_size)
        return inner
    return wrap 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:32:18.747

`paginated_instance_method`不是装饰器，它是一个*返回*装饰器的函数。所以

```
@paginated_instance_method()
def get_attending_users(self, *args, **kwargs): 
```

（注意括号。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:36:44.607

你的装饰器有一个额外的间接层次，它把事情扔掉了。当你这样做时：

```
@paginated_instance_method
def get_attending_users(self, *args, **kwargs):
    return User.objects.filter(pk__in=self.attending_list) 
```

你正在这样做：

```
def get_attending_users(self, *args, **kwargs):
    return User.objects.filter(pk__in=self.attending_list)
get_attending_users = paginated_instance_method(get_attending_users) 
```

这就是装饰器所做的。请注意，它`paginated_instance_method`被称为 with`get_attending_users`作为其参数。这意味着在您的装饰器中，参数`default_page_size`设置为 function `get_attending_users`。您的装饰器返回函数`wrap`，因此`get_attending_users`设置为该`wrap`函数。

然后，当您调用`Event().get_attending_users()`它时`wrap(self)`，`self`您的 Event 实例在哪里。 `wrap`期望参数是一个函数，并尝试返回一个包装该函数的新函数。但是参数不是一个函数，它是一个`Event`对象，所以`functools.wrap`在尝试包装它时会失败。

我有一种预感，你想要做的是：

```
@paginated_instance_method()
def get_attending_users(self, *args, **kwargs):
    return User.objects.filter(pk__in=self.attending_list) 
```

也就是说，你想`paginated_instance_method`争论。但即使您想使用该参数的默认值，您仍然必须实际*调用* `paginated_instance_method`. 否则，您只需将该方法作为参数传递，这不是`paginated_instance_method`预期的。

它对类方法“起作用”的原因是类方法将类作为第一个参数，并且类（与实例不同）*确实*具有`__name__`属性。但是，我怀疑如果您进一步测试它，您会发现它并没有真正做您想要做的事情，因为它仍然包装类而不是方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T12:34:35.043

这真的很容易，但乍一看很棘手。看看[pep 318](http://www.python.org/dev/peps/pep-0318/#current-syntax)。

```
@dec2
@dec1
def func(arg1, arg2, ...):
    pass 
```

这相当于：

```
def func(arg1, arg2, ...):
    pass
func = dec2(dec1(func)) 
```

你有一个额外的包装器，它需要一个装饰器的参数来在包装的函数中使用它（[闭包设计模式](http://en.wikipedia.org/wiki/Closure_%28computer_programming%29)）。所以你的装饰器看起来像这样：

```
@dec(arg=True)
def func(arg1, arg2, ...):
    pass 
```

相当于：

```
def func(arg1, arg2, ...):
    pass
func = dec(arg=True)(func) 
```

# java - 阅读 MIME 多部分消息

> ID：15098425
> 
> 赞同：1
> 
> 时间：2013-02-26T20:16:05.733
> 
> 标签：java, httpresponse, mime, multipartform-data

我希望有人可以帮助我。我正在向服务器发送这样的请求：

```
ClientResponse cr = service.path(url)
.accept(MediaType.MULTIPART_FORM_DATA).get(ClientResponse.class); 
```

作为回应，我收到了一条看起来像这样的多部分消息：

```
------- =_aaaaaaaaaaA
Content-Type: text/plain; Content-Id: "name"

bkbfdkbfkdbfk3ik3ooijo

------- =_aaaaaaaaaaB
Content-Type: application/octet-stream; Content-Id: "image"

nkniha3q479894ph4934233 
```

我的问题是如何通过 Id 阅读该消息的那些正文部分？我需要将该消息的每个部分存储在不同的位置。

# php - 验证电子邮件域

> ID：15098426
> 
> 赞同：3
> 
> 时间：2013-02-26T20:16:10.517
> 
> 标签：php

我想验证电子邮件域，但我不想担心可能出现的任何子域。

例如：

```
@abc.com
@a.abc.com
@b.abc.com
... 
```

这些都应该是有效的。

另外，我有一个要验证的域列表，例如 abc.com、xyz.com ... 从列表中验证电子邮件域（包括子域）的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:29:43.860

我决定将其重写为更友好，这样您就不会限制您将哪种类型的域方案列入白名单。

```
$whitelist = array("abc.com", "xyz.com", "specific.subdomain.com", "really.specific.subdomain.com"); //You can add basically whatever you want here because it checks for one of these strings to be at the end of the $email string.
$email = "@d.xyz.com";

function validateEmailDomain($email, $domains) {
    foreach ($domains as $domain) {
        $pos = strpos($email, $domain, strlen($email) - strlen($domain));

        if ($pos === false)
            continue;

        if ($pos == 0 || $email[(int) $pos - 1] == "@" || $email[(int) $pos - 1] == ".")
            return true;
    }

    return false;
} 
```

所以，你会这样使用：

```
if (validateEmailDomain($email, $whitelist))
    //Do something. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T20:33:48.430

您还可以使用 dns 验证域：

```
function validEmail($email)
{
    $allowedDomains = array('abc.com');
    list($user, $domain) = explode('@', $email);
    if (checkdnsrr($domain, 'MX') && in_array($domain, $allowedDomains))
    {
        return true;
    }
    return false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:27:41.367

我不久前写了这个函数。它可能满足您正在寻找的要求。它做了两件事，验证电子邮件地址是有效地址，然后根据 DNS 中的 MX 记录验证域名是否是有效名称。

```
function validate_email($email) {
    // Check email syntax
    if(preg_match('/^([a-zA-Z0-9\._\+-]+)\@((\[?)[a-zA-Z0-9\-\.]+\.([a-zA-Z]{2,7}|[0-9]{1,3})(\]?))$/', $email, $matches)) {
        $user = $matches[1];
        $domain = $matches[2];

        // Check availability of DNS MX records
        if(getmxrr($domain, $mxhosts, $mxweight)) {
            for($i=0;$i<count($mxhosts);$i++){
                $mxs[$mxhosts[$i]] = $mxweight[$i];
            }

            // Sort the records
            asort($mxs);
            $mailers = array_keys($mxs);
        } elseif(checkdnsrr($domain, 'A')) {
            $mailers[0] = gethostbyname($domain);
        } else {
            $mailers = array();
        }
        $total = count($mailers);

        // Added to still catch domains with no MX records
        if($total == 0 || !$total) {
            $error = "No MX record found for the domain.";
        }
    } else {
        $error = "Address syntax not correct.";
    }

    return ($error ? $error : TRUE);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T20:38:33.077

我写了一个简单的正则表达式示例，能够检查域列表。

```
 <?php

    $email = 'shagtv@a.xyz.com';

    $domains = array('abc.com', 'xyz.com');

    $pattern = "/^[a-z0-9._%+-]+@[a-z0-9.-]*(" . implode('|', $domains) . ")$/i";

    if (preg_match($pattern, $email)) {
        echo 'valid';
    } else {
        echo 'not valid';
    }
    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T20:27:12.670

那么你应该使用一些这样的代码：

```
<?php
$subject = "abcdef";
$pattern = '/^def/';
preg_match($pattern, substr($subject,3), $matches, PREG_OFFSET_CAPTURE);
print_r($matches);
?> 
```

或这个：

```
<?php
$email = "someone@exa mple.com";

if(!filter_var($email, FILTER_VALIDATE_EMAIL))
  {
  echo "E-mail is not valid";
  }
else
  {
      echo "E-mail is valid";
  }
?> 
```

或者您必须[对此页面](http://www.regular-expressions.info/email.html)进行[一些修改](https://stackoverflow.com/questions/10673892/regular-expression-to-match-single-dot-but-not-two-dots)。

希望能帮助到你！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T20:31:34.380

与这篇文章非常相似：[PHP Check domain of email being registered is a 'school.edu' address](https://stackoverflow.com/questions/6917198/php-check-domain-of-email-being-registered-is-a-school-edu-address)

但是，您需要更进一步。完成拆分后，查看 parse_url [http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)并获取 HOST 部分。

# ios - UIAppearance 删除 MFMailComposeViewController 的自定义导航栏背景

> ID：15098428
> 
> 赞同：6
> 
> 时间：2013-02-26T20:16:15.087
> 
> 标签：ios, uinavigationbar, uiappearance

我的应用程序的导航控制器中有一个自定义导航栏图像，使用 UIAppearance 协议设置。但是，当通过应用程序（通过`MFMailComposeViewController`）发送邮件时，我想要默认导航栏而不是自定义导航栏。我尝试了这个问题中概述的方法：[UIAppearance Remove Custom NavBar Background for UIPopoverController](https://stackoverflow.com/questions/11334062/uiappearance-remove-custom-navbar-background-for-uipopovercontroller)但它不起作用。我使用的代码是：

```
[[UINavigationBar appearanceWhenContainedIn:[MFMailComposeViewController class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

但它没有任何效果。我的应用程序是 iOS 6+。这是特定的东西`MFMailComposeViewController`还是我错过了什么？

编辑：尝试的其他方法：

```
MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
mailer.mailComposeDelegate = self;
mailer.navigationBar.barStyle = UIBarStyleBlack;
[self.navigationController presentViewController:mailer animated:YES completion:nil];
[mailer.navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

设置`UIBarStyleBlack`有一些效果，因为“取消”按钮随后变黑，但背景图像仍设置为旧值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:23:59.670

尝试这样的事情：

```
MFMailComposeViewController *mail = [[MFMailComposeViewController alloc] init];
[mail.navigationBar setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

这应该只为这个实例重置背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-03T05:57:19.650

移除自定义背景图片

```
[[UINavigationBar appearance] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault]; 
```

打电话之前，

```
MFMailComposeViewController *vc = [[MFMailComposeViewController alloc] init]; 
```

重点是之前为导航栏外观设置任何自定义`init`。

# regex - 使用正则表达式查找 PHP 锚点之间的特定匹配

> ID：15098430
> 
> 赞同：2
> 
> 时间：2013-02-26T20:16:19.353
> 
> 标签：regex

如果我有以下代码并且只想使用正则表达式返回包含“函数 xyz”的 PHP 块：

```
<?php
  function xyz(
    // Code goes here
  )
?>

<!-- HTML code here -->

<?php
  // Other code
  echo "Its done!";
?> 
```

我尝试执行以下正则表达式： /(<\?php).*function xyz.*(\?>)/s 以获得以下结果：

```
<?php
  function xyz(
    // Code goes here
  )
?> 
```

但它最终没有得到预期的结果，而是给了我第一个“<\?php”和最后一个“\?>”之间的所有内容。任何人都可以建议正确的正则表达式语法来完成这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:29:24.547

Jack Maney 提出了一个很好的观点，但是，对于您的具体情况，您可以简单地使用

```
/<\?php.*function xyz.*?\?>/s 
```

您需要使用*ungreedy/lazy*运算符，它是您在 a or`?`之后立即插入的 a 。这两个量词（* 和 +）是贪心运算符，这意味着它将获取最长的匹配，而不是我们试图实现的最短匹配。`+``*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:25:33.800

尝试以下一种：

```
/(<\?php).*function xyz.*?(\?>)/s 
```

唯一的区别是我更改`.*`了`.*?`. [在此处](http://www.regular-expressions.info/repeat.html)阅读有关它的更多信息（在*“小心贪婪”下！*）

# python - 从文件制作文件夹

> ID：15098431
> 
> 赞同：-2
> 
> 时间：2013-02-26T20:16:21.763
> 
> 标签：python, linux, shell

这就是我的文件的样子..

```
 a-b-2013-02-12-16-38-54-a.png
   a-b-2013-02-12-16-38-54-b.png 
```

我喜欢成千上万个这样的文件。我们可以为每组文件创建文件夹，例如`a-b` Can I grep it？我该怎么做？

```
import glob, itertools, os
import re
foo = glob.glob('*.png')

for a in range(len(foo)):
        print foo[a]
        match=re.match("[a-zA-Z0-9] - [a-zA-Z0-9] - *",foo[a])
        print "match",match 
```

那么，那里的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:23:35.490

列出所有带有`glob.glob('*.png')`.

然后，您可以使用正则表达式 ( ) 解析每个文件名`import re`。

使用`os.mkdir(path)`.

使用`os.rename(src, dst)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:54:27.173

此代码将适用于您想要做的事情：

```
import os

path="./"
my_list = os.listdir(path)   #lists all the files & folders in the path ./ (i.e. the current path)

for my_file in my_list:
    if ".png" in my_file:
        its_folder="something..."
        if not os.path.isdir(its_folder):
            os.mkdir(its_folder)     #creates a new folder
        os.rename('./'+my_file, './'+its_folder+'/'+my_file)    #moves a file to the folder some_folder. 
```

您必须为要创建的每个文件夹指定名称，并将文件移动到其中（而不是“某物...”），例如：

```
its_folder=my_file[0:3];    #if my_file is "a-b-2013-02-12-16-38-54-a.png" the corresponding folder would have its first 3 characters: "a-b". 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:45:18.773

让你盯着看的东西，适应你自己的需求：

让我们创建一些文件：

```
$ touch a-b-2013-02-12-16-38-54-{a..f}.png

$ ls
a-b-2013-02-12-16-38-54-a.png  a-b-2013-02-12-16-38-54-c.png  a-b-2013-02-12-16-38-54-e.png  f.py
a-b-2013-02-12-16-38-54-b.png  a-b-2013-02-12-16-38-54-d.png  a-b-2013-02-12-16-38-54-f.png 
```

一些蟒蛇

```
#!/usr/bin/env python

import glob, os

files = glob.glob('*.png')

for f in files:
    # get the character before the dot
    d = f.split('-')[-1][0]
    #create directory
    try:
        os.mkdir(d)
    except OSError as e:
        print 'unable to creade dir', d, e
    #move file
    try:
        os.rename(f, os.path.join(d, f))
    except OSError as e:
        print 'unable to move file', f, e 
```

让我们运行它

```
$ ./f.py

$ ls -R
.:
a  b  c  d  e  f  f.py

./a:
a-b-2013-02-12-16-38-54-a.png

./b:
a-b-2013-02-12-16-38-54-b.png

./c:
a-b-2013-02-12-16-38-54-c.png

./d:
a-b-2013-02-12-16-38-54-d.png

./e:
a-b-2013-02-12-16-38-54-e.png

./f:
a-b-2013-02-12-16-38-54-f.png 
```

# angularjs - 动态更改目录模板

> ID：15098435
> 
> 赞同：1
> 
> 时间：2013-02-26T20:16:29.417
> 
> 标签：angularjs, angularjs-directive, directive

我是 Angular.js 的新手，我正在尝试在指令中为不同的客户端使用不同的模板。

问题是，我有三种客户的三个模板，我想根据客户类型检测后的结果为我的指令使用不同的模板

我在谷歌搜索后发现的结果都是关于向目录标签添加属性，但是当我准备好检测结果时，模板已经编译好了。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:20:29.863

您可以在指令模板中使用[ngSwitch 。](http://docs.angularjs.org/api/ng.directive%3angSwitch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:58:39.600

您可以在指令中注入一个变量，以在不同的目录中查找模板。

```
myApp.directive('testDirective', [
  'clientType', function(clientType) {
    return {
      ...
      templateUrl: '/templates/' + clientType + '/test.html'
    };
  }
]); 
```

然后，您可以在应用程序外部设置常量“clientType”并将其作为常量传递。

```
myApp.constant('clientType', 'mobile'); // Some type of function to determine this 
```

您可能需要手动引导您的应用程序才能有效地使用它。我在生产代码中做类似的事情来控制从哪里加载模板。

# windows - Powershell从ls搜索保存目录路径？

> ID：15098439
> 
> 赞同：0
> 
> 时间：2013-02-26T20:16:40.370
> 
> 标签：windows, powershell, dynamic, ls

我正在尝试递归搜索包含 .exe 的指定文件的目录，然后保存该目录路径以便稍后在变量中使用。

我认为使用：

```
ls -recurse -filter "PsExec.exe" | sort name | ft directory,name 
```

将显示包含 .exe 的目录。有没有办法可以保存目录，以便以后可以使用它来引用脚本另一部分中的 .exe？.exe 将保存在一个动态命名的文件夹中，这就是为什么我不能硬编码它的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:40:15.907

如果您只想将完整路径保存到文件的单个实例，您可以使用

```
$path = ls -recurse -filter "PsExec.exe" | select -first 1 | select -expand FullName 
```

或者，您可以根据需要保存多个属性

```
$file = ls -recurse -filter "PsExec.exe" | select -first 1 | select Name,FullName,Directory

$file.Name
$file.FullName
$file.Directory 
```

# facebook - 删除应用程序 - 删除状态历史记录？

> ID：15098441
> 
> 赞同：0
> 
> 时间：2013-02-26T20:16:52.413
> 
> 标签：facebook, publish, wordpress

我被指示删除我的应用程序并重新创建它，以解决与 2013 年重大更新的兼容性问题。

该应用程序用于根据发布到 Wordpress 博客的帖子为页面创建状态更新。

当我删除应用程序时，所有的状态更新似乎都被删除了？

谁能解释为什么以及我需要做什么来恢复更新？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:07:27.457

当您删除一个应用程序时，它在 Facebook 中生成的所有内容也会被删除（或者至少不再对任何人可见）。您可以尝试联系 Facebook 并要求他们取消删除您的应用程序，但他们很可能不会（或不能）。因此，不幸的是，您已经丢失了所有这些更新，并且必须重新开始使用新的应用程序。

# sql - 如何防止 SSIS 将列名写入平面文件输出？

> ID：15098443
> 
> 赞同：4
> 
> 时间：2013-02-26T20:16:58.197
> 
> 标签：sql, sql-server-2008, tsql, ssis

我在平面文件中得到输出，如下所示。

![平面文件输出文件](../Images/ccd9a957b7ef0b178d1e6d928af2d090.png)

如何避免将列名写入平面文件输出？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-04T20:58:40.497

我发现完成此操作的最佳方法如下：

1.  我创建了一个测试输出平面文件。我使用将在包中使用的 SQL 查询的结果集填充 .txt 文件。确保 .txt 文件的第一行包含列标题名称。
2.  创建平面文件连接。将其指向文本输出平面文件。选中“第一个数据行中的列名”框。这将确保将使用/显示实际的列标题名称，而不是“列 0”、“列 1”等。单击“确定”关闭平面文件连接管理器。
3.  编辑 Flat File Destination 项目以确保选择了实际的列标题名称，并且字段在查询和 Flat File Connection 的输出列之间正确映射。单击“确定”。
4.  突出显示平面文件连接并按“F4”打开“属性”窗口。在那里，将“ColumnNamesInFirstDataRow”更改为“False”。

现在您的输出平面文件将只包含数据...没有列标题行。然而，您仍然可以转到 Flat File Destination 项目并查看那里使用的实际列标题名称。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T20:23:47.877

### 避免平面文件输出中的列名：

双击*平面文件连接管理器*以打开*`Flat File Connection Manager Editor`*

在*平面文件连接管理器编辑器*上，取消选中该框**`Column names in the first data row`**。

这将阻止平面文件连接管理器将列名写入平面文件输出。

![平面文件连接管理器编辑器](../Images/a23aa8d04176b0e35677eaa690a891c8.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T19:29:49.080

如果您已经在文件中有标题 - 您可以简单地跳过第一行。请参阅@user756519 答案的屏幕截图。设置`Header rows to skip`为**1**

# haskell - 如何解码quotedprintable 编码字符串？

> ID：15098452
> 
> 赞同：6
> 
> 时间：2013-02-26T20:17:28.930
> 
> 标签：haskell, decode

我正在编写一个网络邮件应用程序，需要解码电子邮件标题字段中的 Quotedprintable 值。

我已经从haskell上的各种包中尝试了几个解码功能，到目前为止没有运气。

例如，我如何解码这个字符串：

```
"freelancermap Newsletter:  Erfolgreich =?ISO-8859-1?Q?selbstst=E4ndig?= mit Sicherheit" 
```

# javascript - 拉斐尔：用简单的无限动画逐渐减速

> ID：15098456
> 
> 赞同：11
> 
> 时间：2013-02-26T20:17:52.010
> 
> 标签：javascript, performance, animation, svg, raphael

这个问题与两年前提出的另一个问题在本质上相似：[为什么 Raphael 的帧速率在这段代码上会变慢？](https://stackoverflow.com/questions/2733613/why-does-raphaels-framerate-slow-down-on-this-code)

我通过以下方式在 Chromium 25 中使用 Raphael 2.1.0：

```
<html>
<head>
  <title>Drawfun</title>
  <style>
    * {
      margin: 0;
      padding: 0;
    }
  </style>
</head>
<body>
  <script src="raphael.js"></script>
  <script>
    var paper = Raphael(10, 50, 320, 200);
    var anim = Raphael.animation({transform: "R360"}, 500).repeat(Infinity);

    var rect = paper.rect(50, 40, 10, 20);
    rect.attr("fill", "#f00");
    rect.attr("stroke", "#fff");
    rect.animate(anim);
  </script>
</body> 
</html> 
```

最初，矩形平滑地旋转，正如人们所期望的那样。一两分钟后，旋转以约 15 FPS 的速度运行。五到八分钟后，动画以大约 5 FPS 的速度运行。

Chrome CPU 配置文件表明，随着动画变得越来越不稳定，脚本在 和 中花费的时间越来越少，而`(program)`在.`repush``eve.listeners`

Chrome 任务管理器并没有表明存在内存泄漏，无论是在 JS 内存池中还是在 Chrome 中，但确实显示该页面随着时间的推移消耗越来越多的 CPU。

在最新版本的 Firefox 中运行该页面时，动画会变得更加不稳定，而且速度更快。这些结果已在 Linux 和 Windows 上得到验证，因此这不是操作系统问题 :)。

有没有人知道我的代码或 Raphael 的内部可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T01:40:28.597

好吧，我知道这不是任何人都想听到的答案（并且是一个有争议的逃避），但从拉斐尔的表情和对上面评论的阅读来看，我不禁认为这是一个垃圾收集问题，也是每个人的浏览器结果不同的原因。快速浏览一下 Raphael 源代码，看起来在每帧动画的过程中声明或实现了相当多的变量。我知道至少在 Chrome 的 V8 引擎中，每个 var 都在可跟踪的方法中声明并放在堆上，帧速率降低的延迟仅进一步表明垃圾收集器正在进入高模式以释放块声明不再使用的变量。

我在适应 webgl 的自定义实现中遇到了这个问题，基本上我是在没有启用 webgl 的情况下使 webgl 命令工作。我构建的管道光栅化器有一个非常相似的问题，基本上它会以 68fps 开始绘制帧，但到测试结束时，会下降到 13fps 或更低，并且处理器使用率为 98%。直到我清理了每一个在管道范围之外创建新内存分配的声明（并且做了一些与变量查找有关的更深入研究的加速技巧），我才终于能够跟上并产生一个编写良好的光栅化器可以一次将大约 3-5MB/s 的像素泵送到屏幕上，同时保持 50-60fps 的速率。

同样，不确定这是否是您想要或需要的答案，但我认为这是正确的答案。:( 对不起，我无能为力。祝你好运 :)

# c# - LINQ - 转换为字符串 LIST 并替换字符

> ID：15098464
> 
> 赞同：2
> 
> 时间：2013-02-26T20:18:15.337
> 
> 标签：c#, linq

我有一个从存储过程返回的数据集，我将其保存到字符串 LIST 中。

到目前为止，这就是我所拥有的并且它工作正常：

```
 this.UserOrgs = ds.Tables[0].AsEnumerable()
           .Select(r => r.Field<string>(0))
                            .ToList(); 
```

但是，在将返回值放入列表之前，我还需要将返回值中的所有“X”替换为“Y”。

我想我的问题是，我可以使用 LINQ 一次完成所有操作吗？或者我应该先替换数据集中的字符，然后再将其转换为列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:21:22.820

当然，这很容易 - 你甚至不需要另一个电话：

```
this.UserOrgs = ds.Tables[0].AsEnumerable()
                            .Select(r => r.Field<string>(0).Replace("X", "Y"))
                            .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:33:28.277

```
var chars = new[] { "X", "Y" };
EnumerableRowCollection<string> enumerableRowCollection = dataTable.AsEnumerable().Select(r => chars.Aggregate(r.Field<string>(0), (s, s1) => s.Replace(s1, string.Empty))); 
```

上面的答案将替换所有 X 和所有 Y。

至少你放在 char 数组中的任何东西

# c# - 在DataGrid中右键选择

> ID：15098465
> 
> 赞同：3
> 
> 时间：2013-02-26T20:18:25.147
> 
> 标签：c#, wpf

我在 C# 项目的 XAML 中创建了一个 DataGrid。我在行中添加了一个上下文菜单。基本上，当用户直接单击单元格时，它应该在当前窗口中打开相关项目，这是在`SelectionChanged`事件中实现的。

但是，如果用户右键单击一行，它应该显示上下文菜单而不选择该行，以便用户可以在上下文菜单中选择一个项目以在新窗口中打开相关项目。因此他们可以同时查看已选择的项目和新项目，但是当右键单击选择行时，用户会在当前窗口和新窗口中看到新选择的项目。

如何停止右键单击操作以显示选择单元格的上下文菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-27T09:09:18.173

对于我的解决方案，我必须覆盖以下两个事件处理程序（即 PreviewMouseRightButtonDown 和 PreviewMouseRightButtonUp）。另外，不确定为什么 ItemsSource 的数据绑定不起作用，所以我必须手动绑定它。

```
 private void ResultDataGrid_PreviewMouseRightButtonDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        if (sender is DataGrid dg)
        {
            if (this.DataContext is PipelineStepResultViewModel dataContext
                && dataContext.DatagridMenuItems != null)
            {
                dg.ContextMenu.ItemsSource = dataContext.DatagridMenuItems;
            }
        }

        e.Handled = true;
    }

    private void ResultDataGrid_PreviewMouseRightButtonUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
    {
        if (sender is DataGrid dg && dg.ContextMenu.ItemsSource != null)
        {
            ResultDataGrid.ContextMenu.IsOpen = true;
        }
        e.Handled = true;
    } 
```

# android - 使用字体和字符串作为 Drawable

> ID：15098468
> 
> 赞同：2
> 
> 时间：2013-02-26T20:18:38.967
> 
> 标签：android, fonts, android-drawable

本着 Android 上总是看起来清晰的简单矢量图像的精神，我想知道我是否不能使用与字符串（或字符）配对的自定义字体作为`Drawable`.

例如，如果我想使用 Webdings 字符作为 a 上的可绘制对象`Button`，我该怎么做？

我希望选择最佳字体大小（使用`dip`or `sp`），这样我就不会在图像上失真。

您对我如何实现这一目标有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:32:14.050

你可以查看我的库[IconicTextView](https://github.com/atermenji/IconicTextView) 它允许使用几种标志性字体来显示矢量图像。目前 TextView 的一个子类用于显示它们，但我正在重写它以使用自定义 Drawable。这里的主要问题是选择最佳字体大小，我正在尝试找到一种自动调整字体大小的方法。

# javascript - JavaScript – 原型继承而不覆盖基类

> ID：15098469
> 
> 赞同：0
> 
> 时间：2013-02-26T20:18:39.010
> 
> 标签：javascript, prototypal-inheritance

我正在用 JavaScript 构建一个纸牌游戏，以增加我的网络编程能力，但我遇到了 JavaScript Prototype 继承问题。我的设计有一个基础 Card 类，其中包含任何卡片所需的所有功能和数据。设计本身比较灵活，因此只需更改存储的数据，大约 25% 的卡片可以使用基类。我需要做的是创建新类，它继承 Card 的所有内容（包括数据），但在不触及基类函数的情况下覆盖一小部分可用函数。

我一直在尝试使用原型继承来实现这一点，但这会改变基类，这不仅会破坏使用 Card 类的任何卡片，还会破坏从基类继承的所有其他函数。

我需要的是一种设计模式，它允许我只为从 Card 继承的类覆盖一个函数。这在 JavaScript 中可能吗？

编辑...

对不起，这是一个例子，可能应该首先添加这个。

从基卡类开始。

```
function Card(){
    this.cardID = 0;
    this.name = '';
    this.imageID = 0;
    this.imageURL = '';
    this.imageAlt = '';
    etc....
}

Card.prototype.init = function( inID
    , inName
    , inImageID
    , inImageURL
    , inImageAlt
    , inImageHorizontal
    etc...
){
    this.cardID = inID;
    this.name = inName;
    this.imageID = inImageID;
    this.imageURL = inImageURL;
    this.imageAlt = inImageAlt; 
}

Card.prototype.whenPlayed = function(){
    return false;
} 
```

现在我的孩子班：

```
ChildCard.prototype = new Card();
ChildCard.constructor = ChildCard;
function ChildCard(){};

ChildCard.prototype.whenPlayed = function(){
    alert("You Win!");
    return true;
} 
```

就目前而言，如果我要创建一个 Card 对象并调用它 whenPlayed，我会从 ChildCard 而不是 Card 获得行为。

我在这里真正面临的问题是卡片类有接近 3 种方法，我不想在每个子类中定义每个方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T20:44:20.537

一个非常简单直接的模式：

```
function Parent(arg) {
    this.someProperty = arg;
    // initialize all instance properties in the constructor
}

// The prototype should only contain methods and primitive values.
Parent.prototype.someMethod = function() {
    // ...
};

Parent.prototype.someOtherMethod = function() {
    // ...
};

function Child(arg1, arg2) {
    // call parent constructor -- like super() in other languages
    Parent.call(this, arg1);
    // initialize all instance properties in the constructor
}

// Hook up Base.prototype into the prototype chain
Child.prototype = Object.create(Parent.prototype);
Child.prototype.constructor = Child; // not necessary but can be useful

Child.prototype.someMethod = function() {
   // override method and call parent method
   Base.prototype.someMethod.call(this);
   // ...
}; 
```

它依赖于[`Object.create` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)。它创建一个继承自传入对象的新对象。`Child.prototype`因此，您在and之间获得了一级间接性`Parent.prototype`，即更改为`Child.prototype`不影响``Parent.prototype`。

# sql - 需要询问 SQL Server 中的关联查询

> ID：15098470
> 
> 赞同：-4
> 
> 时间：2013-02-26T20:18:49.213
> 
> 标签：sql, sql-server

我有 2 个查询，第一个：

```
SELECT XEDETALLES_BODEGA.IDPROD, SUM(XEDETALLES_BODEGA.CANTIDAD) AS CANTIDAD, MONTH (XEDETALLES_BODEGA.XFECHA) AS MES, 
       YEAR(XEDETALLES_BODEGA.XFECHA) AS ANO, CONVERT(DATETIME, CAST(YEAR(XEDETALLES_BODEGA.XFECHA) AS VARCHAR) + '-1-' + CAST(MONTH(XEDETALLES_BODEGA.XFECHA) AS VARCHAR) , 103)   AS FECHA
FROM XEDETALLES_BODEGA 
    LEFT OUTER JOIN xEGRESOS_BODEGA ON XEDETALLES_BODEGA.IDEGRESO = xEGRESOS_BODEGA.ID
WHERE (YEAR(XEDETALLES_BODEGA.XFECHA) = 2012) AND XEDETALLES_BODEGA.IDPROD <> 0
GROUP BY XEDETALLES_BODEGA.IDPROD, MONTH(XEDETALLES_BODEGA.XFECHA), YEAR(XEDETALLES_BODEGA.XFECHA)
ORDER BY XEDETALLES_BODEGA.IDPROD, MONTH(XEDETALLES_BODEGA.XFECHA), YEAR(XEDETALLES_BODEGA.XFECHA) 
```

第二个查询：

```
SELECT TOP (1) PRECIOUNIT
FROM XCDETALLES_BODEGA
WHERE (IDPROD = FIRSTQUERY.IDPROD) AND (XFECHA < FIRSTQUERY.FECHA)
ORDER BY XFECHA DESC 
```

* * *

问题：对于第一个表上的每条记录，我需要在替换 IDPROD 和 FECHA 后获取第二个查询产生的 PRECIOUNIT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:20:17.670

如果您希望将第二个查询返回的列*添加*到第一个查询的结果中，您可以简单地将第二个查询作为*相关子查询合并到第一个查询*中，如下所示：

```
SELECT
  XEDETALLES_BODEGA.IDPROD,
  SUM(XEDETALLES_BODEGA.CANTIDAD) AS CANTIDAD,
  MONTH(XEDETALLES_BODEGA.XFECHA) AS MES, 
  YEAR(XEDETALLES_BODEGA.XFECHA) AS ANO,
  CONVERT(DATETIME, CAST(YEAR(XEDETALLES_BODEGA.XFECHA) AS VARCHAR) + '-1-' + CAST(MONTH(XEDETALLES_BODEGA.XFECHA) AS VARCHAR), 103) AS FECHA,
  **(
    SELECT TOP (1) PRECIOUNIT
    FROM XCDETALLES_BODEGA
    WHERE (XCDETALLES_BODEGA.IDPROD = XEDETALLES_BODEGA.IDPROD)
      AND (XCDETALLES_BODEGA.XFECHA < CONVERT(DATETIME, CAST(YEAR(XEDETALLES_BODEGA.XFECHA) AS VARCHAR) + '-1-' + CAST(MONTH(XEDETALLES_BODEGA.XFECHA) AS VARCHAR), 103))
    ORDER BY XCDETALLES_BODEGA.XFECHA DESC
  ) AS PRECIOUNIT**
FROM XEDETALLES_BODEGA 
  LEFT OUTER JOIN xEGRESOS_BODEGA ON XEDETALLES_BODEGA.IDEGRESO = xEGRESOS_BODEGA.ID
WHERE (YEAR(XEDETALLES_BODEGA.XFECHA) = 2012) AND XEDETALLES_BODEGA.IDPROD <> 0
GROUP BY XEDETALLES_BODEGA.IDPROD, MONTH(XEDETALLES_BODEGA.XFECHA), YEAR(XEDETALLES_BODEGA.XFECHA)
ORDER BY XEDETALLES_BODEGA.IDPROD, MONTH(XEDETALLES_BODEGA.XFECHA), YEAR(XEDETALLES_BODEGA.XFECHA)
; 
```

但是，此查询还有改进的余地。

首先，我将介绍较短的表别名。考虑一下这个重写：

```
SELECT
  **xed**.IDPROD,
  SUM(**xed**.CANTIDAD) AS CANTIDAD,
  MONTH(**xed**.XFECHA) AS MES, 
  YEAR(**xed**.XFECHA) AS ANO,
  CONVERT(DATETIME, CAST(YEAR(**xed**.XFECHA) AS VARCHAR) + '-1-' + CAST(MONTH(**xed**.XFECHA) AS VARCHAR), 103) AS FECHA,
  (
    SELECT TOP (1) PRECIOUNIT
    FROM XCDETALLES_BODEGA **AS xcd**
    WHERE (**xcd**.IDPROD = **xed**.IDPROD)
      AND (**xcd**.XFECHA < CONVERT(DATETIME, CAST(YEAR(**xed**.XFECHA) AS VARCHAR) + '-1-' + CAST(MONTH(**xed**.XFECHA) AS VARCHAR), 103))
    ORDER BY **xcd**XFECHA DESC
  ) AS PRECIOUNIT
FROM XEDETALLES_BODEGA **AS xed**
  LEFT OUTER JOIN xEGRESOS_BODEGA **AS xeg** ON **xed**.IDEGRESO = **xeg**.ID
WHERE (YEAR(**xed**.XFECHA) = 2012) AND **xed**.IDPROD <> 0
GROUP BY **xed**.IDPROD, MONTH(**xed**.XFECHA), YEAR(**xed**.XFECHA)
ORDER BY **xed**.IDPROD, MONTH(**xed**.XFECHA), YEAR(**xed**.XFECHA)
; 
```

您同意较短的别名使您的查询更具可读性吗？

另一个问题是您的分组标准，特别是这两个项目：

```
MONTH(xed.XFECHA), YEAR(xed.XFECHA) 
```

它们当然使您的意图清晰，但是当您将它们重新转化为`datetime`价值时，它们也会经历多次转换。现在我们也在`datetime`相关子查询中使用相同的方法。这些转换是绝对不必要的，因为你可以反过来做。您可以将日期时间“向下舍入”到相应月份的开始，而不是从 a 中提取年份和月份`datetime`，然后将它们转换回 a 。`datetime`下面的表达式就是这样做的：

```
DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0) 
```

现在，当您需要将月份和年份显示为数值时，您可以从上述表达式的结果中提取它们，因为这样会给出相同的月份和年份。所以，现在看看你的查询：

```
SELECT
  xed.IDPROD,
  SUM(xed.CANTIDAD) AS CANTIDAD,
  MONTH(**DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0)**) AS MES, 
  YEAR(**DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0)**) AS ANO,
  **DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0)** AS FECHA,
  (
    SELECT TOP (1) PRECIOUNIT
    FROM XCDETALLES_BODEGA AS xcd
    WHERE (xcd.IDPROD = xed.IDPROD)
      AND (xcd.XFECHA < **DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0)**)
    ORDER BY xcd.XFECHA DESC
  ) AS PRECIOUNIT
FROM XEDETALLES_BODEGA AS xed
  LEFT OUTER JOIN xEGRESOS_BODEGA AS xeg ON xed.IDEGRESO = xeg.ID
WHERE (YEAR(xed.XFECHA) = 2012) AND xed.IDPROD <> 0
GROUP BY xed.IDPROD, **DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0)**
ORDER BY xed.IDPROD, **DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0)**
; 
```

我知道你可能在想什么。新表达式似乎使用了太多次，这并没有使查询看起来很干净，更不用说因为表达式不是那么短。这能帮上忙吗？是的，它可以。您可以使用派生表。将连接、WHERE 过滤器和必要的列（包括计算月初的表达式）放入子选择中，让您的主查询从中提取数据。将分组、排序和相关子查询留在主 SELECT 中。简而言之，这就是您最终可能得到的结果：

```
SELECT
  **s.IDPROD,**
  SUM(**s.CANTIDAD**) AS CANTIDAD,
  MONTH(**s.XFECHA**) AS MES, 
  YEAR(**s.XFECHA**) AS ANO,
  **s.XFECHA**,
  (
    SELECT TOP (1) PRECIOUNIT
    FROM XCDETALLES_BODEGA AS xcd
    WHERE (xcd.IDPROD = xed.IDPROD)
      AND (xcd.XFECHA < **s.XFECHA**
    ORDER BY xcd.XFECHA DESC
  ) AS PRECIOUNIT
FROM **(
  SELECT
    xed.IDPROD,
    xed.CANTIDAD,
    DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0) AS FECHA
  FROM XEDETALLES_BODEGA AS xed
    LEFT OUTER JOIN xEGRESOS_BODEGA AS xeg ON xed.IDEGRESO = xeg.ID
  WHERE (YEAR(xed.XFECHA) = 2012) AND xed.IDPROD <> 0
) s**
GROUP BY **s.IDPROD**, **s.XFECHA**
ORDER BY **s.IDPROD**, **s.XFECHA**
; 
```

但是，如果您使用的是 SQL Server 2005 或更高版本，则不需要派生表——您可以使用 CROSS APPLY 代替。这里：

```
SELECT
  xed.IDPROD
  SUM(xed.CANTIDAD) AS CANTIDAD,
  MONTH(**s.XFECHA**) AS MES, 
  YEAR(**s.XFECHA**) AS ANO,
  **s.XFECHA**,
  (
    SELECT TOP (1) PRECIOUNIT
    FROM XCDETALLES_BODEGA AS xcd
    WHERE (xcd.IDPROD = xed.IDPROD)
      AND (xcd.XFECHA < **s.XFECHA**
    ORDER BY xcd.XFECHA DESC
  ) AS PRECIOUNIT
FROM XEDETALLES_BODEGA AS xed
  LEFT OUTER JOIN xEGRESOS_BODEGA AS xeg ON xed.IDEGRESO = xeg.ID
**CROSS APPLY (
  SELECT DATEADD(MONTH, DATEDIFF(MONTH, 0, xed.XFECHA), 0) AS FECHA
) AS s**
WHERE (YEAR(xed.XFECHA) = 2012) AND xed.IDPROD <> 0
GROUP BY xed.IDPROD, **s.XFECHA**
ORDER BY xed.IDPROD, **s.XFECHA**
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:41:48.897

您可能可以将第一个查询放入 CTE 并将其加入您的第二个查询。

```
;WITH 
 FIRSTQUERY (IDPROD, CANTIDAD, MES, ANO, FECHA)
 AS
 (
  SELECT XEDETALLES_BODEGA.IDPROD
    ,SUM(XEDETALLES_BODEGA.CANTIDAD) AS CANTIDAD
    ,MONTH(XEDETALLES_BODEGA.XFECHA) AS MES
    ,YEAR(XEDETALLES_BODEGA.XFECHA) AS ANO
    ,CONVERT(DATETIME, CAST(YEAR(XEDETALLES_BODEGA.XFECHA) AS VARCHAR) + '-1-' + CAST(MONTH(XEDETALLES_BODEGA.XFECHA) AS VARCHAR) , 103) AS FECHA
  FROM XEDETALLES_BODEGA 
  LEFT OUTER JOIN xEGRESOS_BODEGA ON XEDETALLES_BODEGA.IDEGRESO = xEGRESOS_BODEGA.ID
  WHERE (YEAR(XEDETALLES_BODEGA.XFECHA) = 2012) AND XEDETALLES_BODEGA.IDPROD <> 0
  GROUP BY XEDETALLES_BODEGA.IDPROD, MONTH(XEDETALLES_BODEGA.XFECHA),     YEAR(XEDETALLES_BODEGA.XFECHA)
  ORDER BY XEDETALLES_BODEGA.IDPROD, MONTH(XEDETALLES_BODEGA.XFECHA), YEAR(XEDETALLES_BODEGA.XFECHA)
 )
SELECT TOP (1) XCDETALLES_BODEGA.PRECIOUNIT
FROM XCDETALLES_BODEGA
LEFT JOIN FIRSTQUERY on FIRSTQUERY.IDPROD = XCDETALLES_BODEGA.IDPROD
WHERE XCDETALLES_BODEGA.XFECHA < FIRSTQUERY.FECHA
ORDER BY XFECHA DESC 
```

# vb.net - 不返回所有数据

> ID：15098472
> 
> 赞同：0
> 
> 时间：2013-02-26T20:19:08.790
> 
> 标签：vb.net, winforms, entity-framework

一点背景知识，我是一名 Web 开发人员，正在开发他的第一个`Winform`.

我正在使用`EF5`. 这些表是关系的，但是这些表只有一个主键。我有`Winform`一个`GridView`附在它上面的。这`GridView`是由一个`BindingSource`. 的`Datasource`for`BindingSource`正在由 Linq 查询填充。

* * *

```
Public Class Form1
    Private batchEnt As BatchMananger.PrintManagerEntities
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load
        Try

            batchEnt = New BatchMananger.PrintManagerEntities

            batchBindingSource.DataSource = (From b In batchEnt.AutomatedBatches Join bd In batchEnt.AutomatedBatchResults On b.ID Equals bd.AutomatedBatchID Where b.BatchName <> "" Select b.ID, b.BatchName, b.Description, b.ScheduleDesc, b.BatchResultEmail, b.BatchSourceEmail, bd.ExecutionDateTime, bd.TotalSuccesful, bd.TotalItems, bd.TotalFail).ToList
        Catch ex As Exception
            Throw
        End Try
    End Sub
End Class 
```

* * *

我的问题是`Gridview`只填充了`AutomatedBatches`表中的数据，而不是连接表中的数据`AutomatedBatchResults`。但是，在检查`Datasource`元素时，我看到连接的结果又回来了。我将如何绑定到 ，`BIndingsource`以便`Linq`查询的所有结果都填充到我的`Gridview`.

如果您需要更多信息，请告诉我。

## **更新**

发现出了什么问题。我没有在 GridView 的属性上设置 DataPropertyName。将 DataPropertyName 设置为它工作的数据库字段的相同名称后。我还在 EF 数据模型中创建了 AutomatedBatch (1) 与 AutomatedBatchResult (many) 之间的关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:58:39.043

在没有看到您的数据的情况下，猜测是您的联接请求导致联接表中的某些记录不显示。记住linq中的join关键字是inner join，所以任何不满足join条件的记录都不会显示。要显示表中的所有记录，我会执行以下操作：

快速注释——请在所有对象上添加类型。

```
Private batchEnt As BatchMananger.PrintManagerEntities
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles Me.Load

        Try
            Dim batchEnt As PrintManagerEntities = New PrintManagerEntities
            Dim batchBindingSource

            Dim batcheswithResults = (From b In batchEnt.AutomatedBatches
                                             Join bd In batchEnt.AutomatedBatchResults  On b.ID Equals bd.AutomatedBatchID
                                             Where b.BatchName <> ""
                                             Select New Results(b, bd)).ToList

            Dim batchesWithoutResults = (From b In batchEnt.AutomatedBatches
                                         Where Not batchEnt.AutomatedBatchResults.Any(Function(o) o.Id = b.Id)
                                         Select New Results(b, Nothing)).ToList

            Dim itemsSource As New List(Of Object)
            itemsSource.AddRange(batcheswithResults)
            itemsSource.AddRange(batchesWithoutResults)

            batchBindingSource.DataSource = itemsSource

        Catch ex As Exception
            Throw
        End Try
    End Sub

End Module

Public Class Results
    'TODO: Add types to params and all properties
    Public Sub New(AutomaticBatches, AutomatedBatchResults)
        _automaticBatches = AutomaticBatches
        _automatedBatchResults = AutomatedBatchResults
    End Sub

    Private _automaticBatches
    Private _automatedBatchResults

    Public Property ID
        Get
            Return _automaticBatches.ID
        End Get
        Set(value)
            _automaticBatches.ID = value
        End Set
    End Property
    Public Property BatchName
        Get
            Return _automaticBatches.BatchName
        End Get
        Set(value)
            _automaticBatches.BatchName = value
        End Set
    End Property
    Public Property Description
        Get
            Return _automaticBatches.Description
        End Get
        Set(value)
            _automaticBatches.Description = value
        End Set
    End Property
    Public Property ScheduleDesc
        Get
            Return _automaticBatches.ScheduleDesc
        End Get
        Set(value)
            _automaticBatches.ScheduleDesc = value
        End Set
    End Property
    Public Property BatchResultEmail
        Get
            Return _automaticBatches.BatchResultEmail
        End Get
        Set(value)
            _automaticBatches.BatchResultEmail = value
        End Set
    End Property
    Public Property BatchSourceEmail
        Get
            Return _automaticBatches.BatchSourceEmail
        End Get
        Set(value)
            _automaticBatches.BatchSourceEmail = value
        End Set
    End Property
    Public Property ExecutionDateTime
        Get
            If _automatedBatchResults IsNot Nothing Then Return _automatedBatchResults.ExecutionDateTime
            Return Nothing
        End Get
        Set(value)
            If _automatedBatchResults IsNot Nothing Then _automatedBatchResults.ExecutionDateTime = value
        End Set
    End Property
    Public Property TotalSuccesful
        Get
            If _automatedBatchResults IsNot Nothing Then Return _automatedBatchResults.TotalSuccesful
            Return Nothing
        End Get
        Set(value)
            If _automatedBatchResults IsNot Nothing Then _automatedBatchResults.TotalSuccesful = value
        End Set
    End Property
    Public Property TotalItems
        Get
            If _automatedBatchResults IsNot Nothing Then Return _automatedBatchResults.TotalItems
            Return Nothing
        End Get
        Set(value)
            If _automatedBatchResults IsNot Nothing Then _automatedBatchResults.TotalItems = value
        End Set
    End Property
    Public Property TotalFail
        Get
            If _automatedBatchResults IsNot Nothing Then Return _automatedBatchResults.TotalFail
            Return Nothing
        End Get
        Set(value)
            If _automatedBatchResults IsNot Nothing Then _automatedBatchResults.TotalFail = value
        End Set
    End Property

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:01:41.370

发现出了什么问题。我没有在 GridView 的属性上设置 DataPropertyName。将 DataPropertyName 设置为它工作的数据库字段的相同名称后。我还在 EF 数据模型中创建了 AutomatedBatch (1) 与 AutomatedBatchResult (many) 之间的关联。

# php - imagecreatefromstring 太大，只想旋转图片

> ID：15098476
> 
> 赞同：1
> 
> 时间：2013-02-26T20:19:16.177
> 
> 标签：php, iphone, image, upload

所以就像我读过的许多帖子一样，当我从我的 iphone 将文件上传到我的网站时，图像会以错误的方式旋转。我理解为什么并且我有一个函数可以读取 exif 数据来检测方向。

我还有一些代码和一个 switch 语句在这里将图像旋转 90 度我遇到的问题是

```
 $image = imagecreatefromstring(file_get_contents($_FILES['file']['tmp_name'])); 
```

返回相同的旧错误，即允许的 x 字节内存大小已用完

我无权访问我的 php.ini 来增加最大上传大小我也无法在这个远程服务器上使用 .htaccess 文件做任何事情

从我的 iphone 上传的文件都抛出这个错误，因为我相信每个人的 iphone 也是如此

我可以使用检测图像大小

```
 $info = getimagesize($_FILES['file']['tmp_name']); 
```

由于 switch 语句基于 $image var，我该如何解决这个问题？在 $info var 中获取文件大小（高度和宽度）后，我该怎么办？

期待回复 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T00:14:51.927

如果真的是大小，可以尝试添加

```
ini_set('memory_limit', '64M'); 
```

到单个相关 php 脚本的顶部。

但也可能有限制。

# sqlite - PhoneGap、SQLite 和全文搜索

> ID：15098477
> 
> 赞同：2
> 
> 时间：2013-02-26T20:19:18.890
> 
> 标签：sqlite, cordova, fts3, fts4

我们正在尝试确定一个具有相对复杂的搜索功能的项目。例如，它需要搜索单词的变体——“legal”和“legally”被视为相同。

我相信 SQLite 全文扩展（FTS3、FTS4）会做我们需要的一切，但我不知道这是否是一个选项。有没有人在 PhoneGap 应用程序中成功使用 SQLite 和 FTS3 或 FTS4？

如果没有，有没有人知道任何可以在 PhoneGap 中使用的强大替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:03:01.617

iOS 中的默认 sqlite 构建不支持 FTS。您已经编译了支持 FTS3/FTS4 的自己的版本，并将其包含在您的项目中。然后，在 PhoneGap 中，使用[SQLite 插件](https://github.com/ApplicationCraft/PGSQLitePlugin)，你就有了一个带有 FTS 的 SQLite DB。

# jquery - jQuery 数据函数返回“未定义”

> ID：15098478
> 
> 赞同：1
> 
> 时间：2013-02-26T20:19:19.527
> 
> 标签：jquery

我有以下 HTML：

```
<a href="#" data-secID="1901">
  <img src="pencil.png" title="Edit" />
</a> 
```

下面的 jQuery 我希望将 1901 的 secID 警告到屏幕上，而是向屏幕警告“未定义”。

```
$(document).on("click", "a[data-secID]", function ($e) {
  alert($(this).data('secID'));
  $e.preventDefault();
}); 
```

为什么我得到“未定义”而不是 1901？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:22:39.203

看起来好像属性名称已转换为小写。试试这个：

```
$(document).on("click", "a[data-secID]", function ($e) {
  alert($(this).data('secid'));
  $e.preventDefault();
}); 
```

演示：http: [//jsfiddle.net/72Ykj/](http://jsfiddle.net/72Ykj/)

来自评论的参考：http: [//www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2A-attributes](http://www.w3.org/html/wg/drafts/html/master/dom.html#embedding-custom-non-visible-data-with-the-data-%2A-attributes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:23:18.550

[评论后编辑]一个（不太好的）解决方法是使用

```
.attr('data-secID') 
```

代替

```
.data('secID) 
```

# javascript - 如何获取子对象的全局/世界位置？

> ID：15098479
> 
> 赞同：48
> 
> 时间：2013-02-26T20:19:21.263
> 
> 标签：javascript, three.js

如何在另一个 Object3D 中获取 Object3D 的全局位置？

**设置：**

```
var parent = new THREE.Object3D();
parent.position.set(100, 100, 100);

var child = new THREE.Object3D();
child.position.set(100, 100, 100);
parent.add(child);

scene.add(parent); 
```

**笔记：**

我认为这将是做到这一点的方法：

```
console.log(child.localToWorld(parent.position)); 
```

...但它给了我*(100, 100, 100)*，而不是*(200, 200, 200)*。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-26T20:43:01.137

您可以像这样提取世界位置：

```
var target = new THREE.Vector3(); // create once an reuse it

child.getWorldPosition( target ); 
```

`target`将包含结果。

编辑：更新到three.js r.120

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-02-11T08:26:24.257

在threejs **r89中**，您可以通过[`Object3D.getWorldPosition`](https://threejs.org/docs/index.html#api/core/Object3D.getWorldPosition). 不知道什么时候加的。

# bash - 安装 Heroku Toolbelt Windows 后 Cygwin 不执行 .bashrc

> ID：15098489
> 
> 赞同：0
> 
> 时间：2013-02-26T20:19:40.430
> 
> 标签：bash, heroku, path, cygwin, heroku-toolbelt

安装 Heroku Toolbelt 后，Cygwin 不再执行 .bashrc 我该如何解决？

github上的这个heroku/toolbelt问题在[Windows上创建/覆盖ENV ['HOME']，这打破了Cygwin](https://github.com/heroku/toolbelt/issues/28)所说的

```
 Renaming HOME to %USERPROFILE% evidently fixes this 
```

我的 HOME 系统属性变量已命名为 %USERPROFILE%。

作为一个菜鸟，我专注于 PATH 问题。我开始更改我的系统路径变量以包含 .bashrc PATH

```
C:\cygwin\home\usermatt 
```

然后我尝试了各种系统 PATH 变量，一次一个，每次都重新启动我的机器：

```
C:\cygdrive\c\home\usermatt\
C:\home\usermatt\
C:\cygwin\c\home\usermatt\ 
```

Cygwin 启动时的密码是 /cygdrive/c/Users/usermatt。我尝试将 .bashrc 移到这里但没有成功。

Cygwin FAQs 和文件本身的注释在编辑 etc/profile 文件后警告问题，我没有尝试这个。

在安装 Heroku Toolbelt 之前一切都很好。如何让 Cygwin 找到 .bashrc 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:35:20.613

根据您提供的链接：

> 您需要从系统属性中删除**HOME环境变量。**查看如何从 Windows 永久设置/删除变量。

这取决于您的 Windows 操作系统，但通常：

1.  右键单击“计算机”并选择属性
2.  点击“高级系统设置”
3.  点击“环境变量...”
4.  查找并删除**Home**变量
5.  确定你的出路并再次尝试 Cygwin

# html - 如何将背景图片保留在页面底部？

> ID：15098491
> 
> 赞同：1
> 
> 时间：2013-02-26T20:19:42.003
> 
> 标签：html, css, position, background-image

这是我的网站：[http ://www.alexklinghoffer.com/](http://www.alexklinghoffer.com/)

如何将背景图像保持在底部？如果您使浏览器窗口变小，图像会向顶部漂移，但我想将其保留在右下角。这是我的代码：

HTML：

```
<body>

<div class="logo">
    <a href="http://www.alexklinghoffer.com"><img id="logo" src="images/aklogowhite.png" alt="Alex Klinghoffer Logo"/></a>
</div>

<div id="dock">
    <ul>
        <li><a href="/index.html"><span>&#160;Home&#160;</span><img src="images/home.png" alt="[photo]" /></a></li><!--
        --><li><a href="/bio.html"><span>&#160;Bio&#160;</span><img src="images/bio.png" alt="[photo]" /></a></li><!--
        --><li><a href="/resume.html"><span>&#160;Resume&#160;</span><img src="images/resume.png" alt="[photo]" /></a></li><!--
        --><li class="active"><a href="/collections.html"><span>&#160;Collections&#160;</span><img src="images/collections.png" alt="[photo]" /></a></li><!--
        --><li class="active"><a href="/references.html"><span>&#160;References&#160;</span><img src="images/references.png" alt="[photo]" /></a></li><!--
        --><li><a href="/contact.html"><span>&#160;Contact&#160;</span><img src="images/email.png" alt="[photo]" /></a></li><!--
        --><li><a href="/blog.html"><span>&#160;Blog&#160;</span><img src="images/blog.png" alt="[photo]" /></a></li><!--
        --><li><a href="http://www.facebook.com/alexklinghoffer"><span>&#160;Facebook&#160;</span><img src="images/facebook.png" alt="[photo]" /></a></li><!--
        --><li><a href="http://www.linkedin.com/in/alexklinghoffer"><span>&#160;LinkedIn&#160;</span><img src="images/linkedin.png" alt="[photo]" /></a></li>
    </ul>
</div>

<div id="content">

</div>

<div id="footer">
    <p>&copy; 2013 <a href="http://www.alexklinghoffer.com">Alex Klinghoffer</a></p>
</div><!--//footer-->

</body>
</html> 
```

CSS

```
body {
    background: url("images/background.png");
    background-size: cover;
    background-repeat: no-repeat;
    background-color: #111111;
    padding: 0;
    margin: 0;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:44:01.963

你应该能够通过这样做来做到这一点，

```
background-attachment:fixed;
background-position:center bottom; 
```

添加固定附件可确保在发生任何滚动时它保持在同一位置。

如果这不起作用，您也可以尝试，

```
html {height: 100%;}
body {
    background-position: 0% 100%;
    background-attachment: fixed;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:30:39.267

只需使用基本的 CSS 代码..

```
{
background-image:url('smiley.gif');
background-repeat:no-repeat;
background-attachment:fixed;
background-position:right bottom;
} 
```

If you want to choose some other metod for positioning your picture, you can go to: [w3 schools](http://w3schools.com/cssref/playit.asp?filename=playcss_background-position) site and see which option suits you best (really a good job done by w3 guys). Hope you find a solution. Cheers!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:24:04.727

在你的 CSS 中试试这个：

```
background-position: center bottom; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:37:38.803

尝试使用

```
background-position: right bottom; 
```

正如Lowkase建议的那样。但要让它在 Firefox 和 Opera 中运行，您还应该设置

```
background-attachment: fixed; 
```

它对我有用，或者我不明白你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T20:39:36.977

这段代码让它在 Firebug (Firefox) 中工作。添加以下样式：

```
<style type="text/css">
html {
    height: 100%;
}

body {
    background-position: 50% 100%;
}
</style> 
```

# drupal - 如何使用 Drupal 使用单独的别名、菜单/面包屑选择、基于上下文的分类链接来显示内容

> ID：15098492
> 
> 赞同：0
> 
> 时间：2013-02-26T20:19:46.323
> 
> 标签：drupal, breadcrumbs, aliases

我正在使用 Drupal 构建一个站点，该站点具有可以链接到（又名标记）一个或多个“项目”的内容项（例如新闻文章）。

* * *

例如，新闻文章具有这种结构，并且看起来像这样：

{文章标题}

{文章图片}

{文章日期}

{文章正文}

项目：{项目 1}、{项目 2} 等

* * *

我希望能够在不同的上下文中访问新闻文章，例如

a) 主页 > 新闻 > {文章标题} - /news/{article-title}

b) 首页 > 项目 > {项目标题} > 新闻 > {文章标题} - /projects/{project-title}/news/{article-title}

我设置了一种内容类型，以便新闻文章可以标记/链接到一个或多个项目。

* * *

问题：

1) 别名 - 如何通过不同的 URL 别名（例如新闻与项目新闻）访问节点？

2) 面包屑 - 我如何根据访问者访问网站上的新闻文章的位置来维护面包屑？

3) 菜单 - 我如何根据访问者访问网站上的新闻文章的位置来维护正确的菜单选择？

4) 分类/标签链接 - 我如何更改“项目”标签链接以链接到项目页面与通用分类页面？

# c# - 如何将数据网格视图中最高数字的颜色设置为背景色

> ID：15098494
> 
> 赞同：-4
> 
> 时间：2013-02-26T20:19:56.337
> 
> 标签：c#, datagridview

```
 int highest = 0;
        for (int row = 0; row < dgvCalories.Rows.Count - 1; row++)
        {
           for (int col = 0; col < dgvCalories.ColumnCount; col++)
           {
            if (calories[row, col] > highest)
                highest = calories[row, col];

           }

     } 
```

我想知道需要什么代码才能在数据网格视图中用颜色突出显示这个最高值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:26:27.797

首先，这是倒退

```
if (calories[row, col] > lowest) 
```

你需要

```
if (calories[row, col] < lowest) 
```

其次，您可能需要循环一次以确定最小的数字，然后再次设置颜色。目前，您将在每个位置设置颜色，如果它是 SO FAR 最低的，而不是整体最低的。

# sql - SQL - 按标准对行进行分组并显示总数

> ID：15098496
> 
> 赞同：1
> 
> 时间：2013-02-26T20:20:01.253
> 
> 标签：sql, tsql, sql-server-2008-r2

不太清楚如何给这个标题，但我尽我所能。我有一份报告，其中显示了选定位置的所有资产。我们的问题之一是我们将一切都视为资产。因此，一个典型的计算机系统将有 5 台计算机、8 台显示器，但有 10 多根网线。我正在尝试编写一份报告，该报告将“汇总”任何不必要的项目并显示计数而不是实际项目。

例如，我想要这样：

```
Desc            | Manufacturer  | Serial Number
-----+-------    ----+--------------------
20" monitor     | Dell          | 123456
25" monitor     | Dell          | 123456ab
6ft Net. Cable  | N/A           | NA123
6ft Net. Cable  | N/A           | NA124
6ft Net. Cable  | N/A           | NA125
6ft Net. Cable  | N/A           | NA456
1TB SATA HD     | SeaGate       | SG125000
1.5TB SATA HD   | SeaGate       | SG100000 
```

成为：

```
Desc            | Manufacturer  | Serial Number/Qnty
-----+-------    ----+-----------------------------
20" monitor     | Dell          | 123456
25" monitor     | Dell          | 123456ab
6ft Net. Cable  | N/A           | 4
1TB SATA HD     | SeaGate       | SG125000
1.5TB SATA HD   | SeaGate       | SG100000 
```

这是我的 SQL，它让我获得最高部分，但我不太确定从哪里开始获得最低结果。

```
SELECT i.ItemDescription AS Desc, s.Name AS Manufacturer, inv.SerialNumber AS [Serial Number]
FROM Assets a 
LEFT OUTER JOIN Inventory inv ON a.InventoryID = inv.InventoryID 
LEFT OUTER JOIN Items i ON inv.ItemID = i.ItemID 
LEFT OUTER JOIN Rooms r ON a.RoomID = r.RoomID 
LEFT OUTER JOIN Locations l ON r.LocationID = l.LocationID 
LEFT OUTER JOIN Suppliers s ON i.ManufacturerID = s.SupplierID 
WHERE l.LocationID = 5 
```

我需要让“分组”行基于标准，所以它必须在 WHERE 子句中，比如： `WHERE l.LocationID = 5 AND inv.SerialNumber LIKE 'NA%'`但我不太确定把它放在哪里，所以它不会过滤我所有的记录序列号如“NA%”的那些

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:36:27.693

您应该能够使用以下内容：

```
;with cte as
(
  SELECT i.ItemDescription AS Desc, s.Name AS Manufacturer, inv.SerialNumber AS [Serial Number]
  FROM Assets a 
  LEFT OUTER JOIN Inventory inv ON a.InventoryID = inv.InventoryID 
  LEFT OUTER JOIN Items i ON inv.ItemID = i.ItemID 
  LEFT OUTER JOIN Rooms r ON a.RoomID = r.RoomID 
  LEFT OUTER JOIN Locations l ON r.LocationID = l.LocationID 
  LEFT OUTER JOIN Suppliers s ON i.ManufacturerID = s.SupplierID 
  WHERE l.LocationID = 5
),
totals as
(
  select [Desc], count(*) TotalCount
  from cte
  group by [desc]
)
select c.[desc],
  c.Manufacturer,
  case 
    when t.TotalCount > 1 
    then cast(t.TotalCount as varchar(50))
    else [Serial Number]
  end [Serial Number/Qnty]
from cte c
inner join totals t
  on c.[desc] = t.[desc] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:26:13.097

试试这个

```
;with cte as

(
    SELECT i.ItemDescription AS Desc, s.Name AS Manufacturer, 
    CASE WHEN isnull(inv.SerialNumber,'') like 'NA%' Then 'NA'
         Else inv.SerialNumber end AS [Serial Number]

     FROM Assets a 
     LEFT OUTER JOIN Inventory inv ON a.InventoryID = inv.InventoryID 
     LEFT OUTER JOIN Items i ON inv.ItemID = i.ItemID 
     LEFT OUTER JOIN Rooms r ON a.RoomID = r.RoomID 
     LEFT OUTER JOIN Locations l ON r.LocationID = l.LocationID 
     LEFT OUTER JOIN Suppliers s ON i.ManufacturerID = s.SupplierID 
     WHERE l.LocationID = 5

), cte2 as
(
     SELECT Desc, Manufacturer, [Serial Number], Count(*) cnt
     FROM cte2
     GROUP BY Desc, Manufacturer, [Serial Number]
)
SELECT Desc, Manufacturer, CASE WHEN isnull([Serial Number],'') = 'NA' 
                                THEN CAST(cnt as varchar)
                                else [Serial Number] end [Serial Number]
from cte2; 
```

# cuda - CUDA 共享内存访问冲突

> ID：15098498
> 
> 赞同：0
> 
> 时间：2013-02-26T20:20:11.653
> 
> 标签：cuda

我正在尝试在 CUDA 中使用并行遗传算法来解决 TSP

我在用着

```
THREAD_SIZE as 32

BLOCK_SIZE as 16 
```

我在每个块中使用的共享内存是这个

```
__shared__ int population[THREAD_SIZE][NUM_OF_CITIES]; 
```

当 NUM_OF_CITIES 为 14 或 29 时，程序工作得很好，但是当我将 NUM_OF_CITIES 增加到 51 时，某处发生内存访问冲突

和显示驱动程序崩溃..

是因为我使用的共享内存超过了限制吗？有没有办法解决这个问题？

**[已编辑]** 正如*Robert Crovella*指出的那样，在我看来问题是每个线程的执行所花费的时间

在每个线程中，我执行以下操作

> for(int k = 0 ; k < 100 ; k++ ) {
> //选择
> //​​CrossOver
> //进化（使用两个 Opt 启发式）
> }

**如果我删除两个选择进化**步骤 ，即在循环中*。*循环中最昂贵的一步，内核工作得很好......

有没有办法让内核执行超过 2 秒？购买一张更好更强大的卡会解决这个问题吗？

我正在使用**GTS 450**，计划在不久的将来购买**GTX 650 Ti ，这样可以解决问题吗？**

# wordpress-theming - wordpress 循环多个类别

> ID：15098499
> 
> 赞同：0
> 
> 时间：2013-02-26T20:20:13.283
> 
> 标签：wordpress-theming, wordpress

我想要达到的目标

```
<div>
posts from category "vitejte"
</div>
<div>
posts from category "novinky"
</div> 
```

这是我的 index.php 代码

```
<?php get_header(); ?>

    <div class="body_resize">
        <div class="body">
            <div class="body_small2">
            <?php if (have_posts()) :  while (have_posts()) : the_post(); ?>

                <?php if ( in_category('vitejte') ) { ?>

                    <h2><?php the_title(); ?></h2>
                    <img src="wp-content/themes/trywp/images/img_1.jpg" alt="picture" width="353" height="102" />
                    <?php the_content('Read More...'); ?>
                    <div class="clr"></div>

                <?php } else { ?>
                    <?php _e('Prosím vytvořte článek v kategorii "vitejte"'); ?>
                <?php } ?>
                <div class="line"></div>
            </div>
            <?php endwhile; else: ?>
                <?php _e('Prosím vytvořte článek v kategorii "vitejte2"'); ?>
            <?php endif; ?>

            <?php if (have_posts()) :  while (have_posts()) : the_post(); ?>
            <div class="body_small">
                <h2>Novinky</h2>
                <?php if ( in_category('novinky') ) { ?>
                    <p class="data"> 20 / May / 09</p>
                    <div class="clr"></div>
                    <p><?php the_content('Read More...'); ?> <a href="#">&gt;&gt;</a></p>
                    <div class="clr"></div>

                <?php } else { ?>
                    <?php _e('Prosím vytvořte článek v kategorii "novinky"'); ?>
                <?php } ?>
                <div class="line"></div>
            </div>
            <?php endwhile; else: ?>
                <?php _e('Prosím vytvořte článek v kategorii "vitejte2"'); ?>
            <?php endif; ?>

    <?php get_footer(); ?> 
```

问题是它按要求返回帖子，但它也返回

> Prosím vytvořte článek v kategorii "vitejte"

和

> Prosím vytvořte článek v kategorii "novinky"

它们在 else 语句中，不应该返回顺便说一句：文本表示 smt，如“请在“vitejte”类别中创建帖子

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:04:37.237

一旦你通过循环一次，`have_posts()`将是错误的 - 你`else`看到`endwhile`. 尝试`rewind_posts()`在第二个循环之前调用（即在第二个之前`<?php if (have_posts()) : while (have_posts()) : the_post(); ?>`）。这应该允许您再次循环浏览帖子。

# mysql - 如何在需要来自超级查询的数据的 where 子句中使用带有 where 子句的 mysql 子查询

> ID：15098505
> 
> 赞同：1
> 
> 时间：2013-02-26T20:20:38.183
> 
> 标签：mysql, subquery, where-clause

我要试试这个：

```
SELECT
    Bestellung.ID BNr,
    RechnAddr Kunde,
    (SELECT
        Name
     FROM `User`
     WHERE ID = Bestellung.SalesPerson) Verkaeufer,
    Clerk Sachbearbeiter,
    (SELECT
         Ort
     FROM `Location`
     WHERE ID = Bestellung.Location) Standort,
    CONCAT_WS('.', LPAD(Day, 2,'0'), LPAD(Month, 2,'0'), Year) Erstelldatum 
FROM `Bestellung`
WHERE
    SalesPerson != ''
AND
    (SELECT COUNT(*) cnt FROM _BestellungsPosition bp
     WHERE bp.OrderID = Bestellung.BNr) = 0 
```

我只想要所有没有订单项目的订单，但是 mysql 告诉我“'where 子句中的未知列'Bestellung.BNr'”......我使用子查询错误吗？！

请帮我

* * *

编辑：我将之前使用的（伪）查询更改为真正的查询，因为我的伪查询有效，但具有真实数据的真正查询却没有

* * *

edit2：现在我将查询更改为：

```
SELECT
    Bestellung.ID BNr,
    RechnAddr Kunde,
    (SELECT
        Name
     FROM `User`
     WHERE ID = Bestellung.SalesPerson) Verkaeufer,
    Clerk Sachbearbeiter,
    (SELECT
         Ort
     FROM `Location`
     WHERE ID = Bestellung.Location) Standort,
    CONCAT_WS('.', LPAD(Day, 2,'0'), LPAD(Month, 2,'0'), Year) Erstelldatum 
FROM `Bestellung` LEFT JOIN _BestellungsPosition bp
WHERE
    SalesPerson != ''
AND
    bp.Order IS NULL 
```

它有效......感谢有这个提示的响应者，但我认为他删除了他的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T13:12:30.033

edit2：现在我将查询更改为：

```
SELECT
    Bestellung.ID BNr,
    RechnAddr Kunde,
    (SELECT
        Name
     FROM `User`
     WHERE ID = Bestellung.SalesPerson) Verkaeufer,
    Clerk Sachbearbeiter,
    (SELECT
         Ort
     FROM `Location`
     WHERE ID = Bestellung.Location) Standort,
    CONCAT_WS('.', LPAD(Day, 2,'0'), LPAD(Month, 2,'0'), Year) Erstelldatum 
FROM `Bestellung` LEFT JOIN _BestellungsPosition bp
WHERE
    SalesPerson != ''
AND
    bp.Order IS NULL 
```

它有效......感谢有这个提示的响应者，但我认为他删除了他的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:28:41.900

您需要在子查询中指定要选择（或排除）的 ID，这可能效率低下。在下面试试这个：

```
SELECT
    ID, Customer, SalesPerson, Clerk, Date
FROM `Order`
WHERE ID NOT IN
    (SELECT DISTINCT OrderID FROM OrderItem); 
```

# ios - 如果我不想使用 nib 文件，正确调整根视图大小的 loadView 的正确实现是什么？

> ID：15098507
> 
> 赞同：0
> 
> 时间：2013-02-26T20:20:44.353
> 
> 标签：ios, uiviewcontroller

这里有一堆相关的问题，但没有一个感觉像一个简洁或正确的答案。情况如下：

我正在创建一个新的 ViewController 并且不想使用 nib 文件。我对[Apple 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)的理解是，如果我不想使用 nib，我应该实现 loadView 来手动创建自己的视图层次结构。

但是，我不清楚我应该如何正确地实例化 self.view 与适当的边界（鉴于此视图控制器可能在许多不同的情况下使用，将其简单地设置为屏幕边界感觉不对）。

不知何故，默认的 UIViewController loadView 似乎确实正确地启动了帧大小，但不清楚我是否正在编写自己的版本，我应该做什么来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:28:07.220

没有必要实施`loadView`。相反，实现`viewDidLoad`并创建和添加您想要的任何和所有所需的子视图。只需将它们添加到默认值`self.view`。

如果要添加填充视图控制器视图的视图，请执行以下操作：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIView *someView = [[UIView alloc] initWithFrame:self.view.bounds];
    someView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:someView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-30T10:20:23.417

在 loadView 中，您应该设置 viewController 的视图属性，仅此而已。添加子视图应该在 viewDidLoad 中完成。

```
- (void)loadView {
    self.view = [[NSView alloc] initWithFrame:NSMakeRect(0, 0, 80, 40)]; 
} 
```

Roopesh Chander 有一篇关于选择哪种策略的有趣博客文章：[用于程序化 UI 设置的 loadView 与 viewDidLoad](http://roopc.net/posts/2015/loadview-vs-viewdidload/)。他建议在 loadView 而不是 viewDidLoad 中设置框架以获得最大效率。

# haskell - 有人可以在 Haskell 中向我解释这种 Integer 模块化行为吗？

> ID：15098510
> 
> 赞同：6
> 
> 时间：2013-02-26T20:20:53.283
> 
> 标签：haskell

```
*Test> ((3^40) `mod` 3) :: Int
2
*Test> ((3^40) `mod` 3)
0 
```

为什么会这样？我正在使用 GHCi 7.0.3。如果这不是错误，请解释 Integral/Int 如何在 haskell 中工作，或提供解释链接。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T20:24:37.407

您只是超出范围，`3^40`数字太大，甚至无法放入 64 位 int：

```
Prelude> 3^40 :: Int
-6289078614652622815
Prelude> 3^40 :: Integer
12157665459056928801 
```

另一方面，该`Integer`类型是无界的，并且接受所有数字，无论大小。在你的第二种情况下（你得到一个`0`结果）你得到了一个类型的`Integer`推断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T23:27:05.520

如果您仅在模运算的上下文中使用求幂，请查看包中的`powerMod`函数`arithmoi`：

[http://hackage.haskell.org/package/arithmoi](http://hackage.haskell.org/package/arithmoi)

```
import Math.NumberTheory.Powers (powerMod)

test = powerMod 3 40 3 
```

`powerMod`在计算幂运算时会减少结果，这应该会减少工作量。

# r - 在R中将矩阵转换为马尔可夫转换矩阵

> ID：15098518
> 
> 赞同：1
> 
> 时间：2013-02-26T20:21:12.820
> 
> 标签：r, markov-chains

我有一个值在 0 和 1 之间的矩阵垫（所以可以是概率），如下所示：

```
> t <- c(22, 65, 37, 84, 36, 14, 9, 19, 5, 49)
> x <- t/max(t)
> mat <- x%*%t(x) 
```

我现在想将此矩阵 b 转换为马尔可夫转换矩阵，即每行的元素加起来为 1。我通过将矩阵除以 rowSums 来实现这一点：

```
> y <- mat/rowSums(mat)
> z <- y/rowSums(y)
> rowSums(z)
  [1] 1 1 1 1 1 1 1 1 1 1 
```

但是，这会导致每列中的元素具有相同的值：

```
 [,1]      [,2]      [,3]      [,4]      [,5]
 [1,] 0.06470588 0.1911765 0.1088235 0.2470588 0.1058824 
 [2,] 0.06470588 0.1911765 0.1088235 0.2470588 0.1058824 
 [3,] 0.06470588 0.1911765 0.1088235 0.2470588 0.1058824 
 [4,] 0.06470588 0.1911765 0.1088235 0.2470588 0.1058824 
```

这不是我想要的。我要求每个元素具有不同的值，但我不知道如何做到这一点。任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:37:35.820

为什么你首先制作矩阵`y`然后`z`？

您除以 rowSums 的想法是正确的，但我认为问题出在您的原始矩阵中，因为它有效：

```
mat<-matrix(runif(100),10,10)
mat2<-mat/rowSums(mat)
rowSums(mat2)
 [1] 1 1 1 1 1 1 1 1 1 1 
```

编辑： Line`x <- t/max(t)`似乎会导致不需要的行为，即您不应该将向量除以`t`最大值，因为这会使您的结果矩阵奇异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:39:29.343

您不能在`mat`. 试试这个：

```
n <- 10
mat <- matrix(runif(n**2),n)
mat <- mat/rowSums(mat) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:48:30.657

您可以用 's 填充矩阵，`runif`然后迭代 Sinkhorn-Knopf 算法（例如，在[http://www.cerfacs.fr/algor/reports/2006/TR_PA_06_42.ps.gz](http://www.cerfacs.fr/algor/reports/2006/TR_PA_06_42.ps.gz)的第 3 页顶部描述）将收敛到一个双重随机（马尔可夫）矩阵。

# actionscript-3 - 如何更改自定义 TabNavigator 组件中的 TabBar 选项卡背景颜色

> ID：15098519
> 
> 赞同：0
> 
> 时间：2013-02-26T20:21:13.170
> 
> 标签：actionscript-3, apache-flex, flex4.5, mxml

我正在创建一个`TabNavigator`要在其他应用程序中使用的自定义组件。但现在，选项卡的背景不会改变（尽管其他样式更改确实适用）。

在我的`CustomTabNavigator`课堂上，我有这个覆盖：

```
override protected function updateDisplayList (w:Number, h:Number):void {
    super.updateDisplaylist(w,h);

    tabBar.styleName="CustomTabBarStyle";
} 
```

这是`<style>`声明中的css：

```
.CustomTabBarStyle {
    tabHeight:100;
    tabWidth:100;
    tabStyleName: "CustomTab";
    backgroundColor: #FFFFFF;
}

.CustomTab {
    backgroundColor: #FFFFFF;
    color: haloBlue;
} 
```

应用了文本的 haloBlue 颜色，以及 tabHeight 和 tabWidth。但是背景颜色没有改变。我已经通过大约 5 个教程尝试了不同的东西，但无济于事......有没有办法在自定义组件中做到这一点？我要做的就是摆脱渐变背景而不是纯白色背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:12:32.783

我可以通过扩展 TabBar 和 ButtonBarButton 类来做到这一点。然后，我为自定义 ButtonBarButton 制作了一个单独的皮肤，该皮肤使用从自定义类中的新字段（例如`hostComponent.tabBackgroundColor`）中提取的自定义背景颜色。

如果有人使用 CSS 方法有更好的解决方案，我很乐意接受它（因为那是我最初要求的）。

# javascript - jQuery Mobile 对话框在 Chrome 中立即消失

> ID：15098520
> 
> 赞同：1
> 
> 时间：2013-02-26T20:21:18.283
> 
> 标签：javascript, jquery, google-chrome, jquery-mobile

我已经看了一段时间，觉得我错过了一些明显的东西......

我正在使用 jQuery mobile 为 Web 应用程序的用户弹出一个对话框，我正在使用用户代理嗅探来提供一个快速对话框，以指导用户根据他们的平台选择如何安装应用程序。

虽然这似乎无关紧要，但我想确保我尽可能地覆盖我的基础。最后一个 if 语句适用于宽度小于 600 像素且没有先前 ua 字符串之一的浏览器……因此，如果您减少 Chrome 的桌面安装，它将触发该弹出窗口。但是，在 Chrome 中它会出现然后立即消失。我看不到任何抛出的错误，因为我没有看到它在 Firefox 中发生，所以我没有看到发生了什么。

我有两个问题：

1 - 有谁知道这里发生了什么？我尝试过返回 false 和不返回 false，我认为这无关紧要，只是为了测试逃生。

2 - 有没有人建议做这个清洁剂。由于我正在测试 ua，因此我正在考虑尝试将其作为 switch 语句运行，但我不确定测试是否能正常工作......但我觉得我并没有把头绕在右边方法。

```
var ua = navigator.userAgent.toLowerCase();
var isAndroid = ua.indexOf("android") > -1;
var isWinPhone = ua.indexOf("windows phone") > -1;
var isBlackberry = ua.indexOf("blackberry") > -1;
var isbbTen = ua.indexOf("bb10") > -1;
var current_width = $(window).width();
$( '#home' ).live( 'pageinit',function(event){
if(isAndroid) {
$.mobile.changePage( '#android' , { transition:"pop", role:"dialog" });
return false;
};
if(isWinPhone) {
$.mobile.changePage( '#winPhone' , { transition:"pop", role:"dialog" });
return false;
};
if(isBlackberry) {
$.mobile.changePage( '#Blackberry' , { transition:"pop", role:"dialog" });
return false;
};
if(isbbTen) {
$.mobile.changePage( '#bbTen' , { transition:"pop", role:"dialog" });
return false;
};
if(current_width < 599 && !isAndroid && !isWinPhone && !isBlackberry && !isbbTen){
$.mobile.changePage( '#generic' , { transition:"pop", role:"dialog" });
return false;
};
}); 
```

您可以在这里看到同样的事情：http: [//jsfiddle.net/fskirschbaum/2YTwE/1/](http://jsfiddle.net/fskirschbaum/2YTwE/1/)如果您在 Chrome 中查看它。

我已经尝试了一些其他参数，但不明白为什么会发生这种情况，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-19T15:24:37.607

我也有一个消失的对话框问题 - 原来与早期尝试摆脱“闪烁”有关 - 一个 SO 答案表明以下将停止闪烁（它没有）：

```
.ui-page { -webkit-backface-visibility: hidden; } 
```

当我删除这行 css 时，对话框工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T03:10:34.490

1.  如果您链接正确的 jQuery 和 jQuery Mobile 库，一切都会正常工作（请参阅最后的 jsFiddle）。
2.  这个实现怎么样

```
$('#home').on('pageinit', function(){
    var ua = navigator.userAgent.toLowerCase(),
        page = '', 
        role='dialog';

    switch(true) {
        case (ua.indexOf("android") > -1):
            page = '#android';
            break;
        case (ua.indexOf("windows phone") > -1):
            page = '#winPhone';
            break;
        case (ua.indexOf("blackberry") > -1):
            page = '#Blackberry';
            break;
        case (ua.indexOf("bb10") > -1):
            page = '#bbTen'; 
            break;
        case ($(window).width() < 599):
            page = '#generic';
            break;
    }
    if (page.length) {
        $.mobile.changePage(page, {transition:'pop', role:role});
        return false;
    }    
}); 
```

这里正在工作**[jsFiddle](http://jsfiddle.net/pmatseykanets/GmVTM/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T17:12:55.280

我也遇到了这个问题，如果我在加载页面时有条件地打开了一个弹出窗口，在 Chrome 浏览器中（不是在 FF 中）修复结果是将库更新到 jqm 1.3.1。

而已。在 FF 和 Chrome 中测试。

请注意，jsfiddle.com 上作为选项提供的 1.3.0b 不起作用。1.3.1 可以。

然后绑定到 pageshow 事件：

```
jQuery(document).on ( 'pageshow', function(event) {
    $( '#popupID' ).popup('open'); 
}); 
```

# python - Django Book Ch. 3：“没有名为 mysite.wsgi 的模块”

> ID：15098526
> 
> 赞同：3
> 
> 时间：2013-02-26T20:21:29.610
> 
> 标签：python, django

我似乎永远被困在这个问题上，而且我发现的其他线程似乎都没有帮助。

当我在 cmd 中运行 python manage.py runserver 时，我得到以下输出：

```
C:\Documents and Settings\ltiokhin\My Documents\DJCode\mysite>python manage.py runserver
Validating models...

0 errors found

Django version 1.4.3, using settings 'settings'

Development server is running at http:___________________________

Quit the server with CTRL-BREAK.

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x010689 F0>>

Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\django\core\management\commands\runserver.
  py", line 109, in inner_run
   handler = self.get_handler(*args, **options)

  File "C:\Python27\lib\site-packages\django\contrib\staticfiles\management\commands\runserver.py", line 24, in get_handler
handler = super(Command, self).get_handler(*args, **options)

 File "C:\Python27\lib\site-packages\django\core\management\commands\runserver.py", line 39, in get_handler
return get_internal_wsgi_application()

 File "C:\Python27\lib\site-packages\django\core\servers\basehttp.py", line 58, in get_internal_wsgi_application

 "could not import module '%s': %s" % (app_path, module_name, e)) django.core.exceptions.ImproperlyConfigured: WSGI application 'mysite.wsgi.appli cation' could not be loaded; could not import module 'mysite.wsgi': No module na med mysite.wsgi 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:31:42.453

在“C:\Documents and Settings\ltiokhin\My Documents\DJCode\mysite\mysite”文件夹下查找“wsgi.py”。标准 django 应用程序文件可能丢失或被命名为其他文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:43:41.803

你使用的是和书中相同的版本吗？上次我遇到这种错误就是因为这个！

或者你是否将wsgi添加到settings.py中的installed_apps？

# c# - 获取所有 Environment.SpecialFolder.MyMusic 文件夹的列表

> ID：15098527
> 
> 赞同：0
> 
> 时间：2013-02-26T20:21:32.427
> 
> 标签：c#, windows, windows-8, windows-runtime, windows-store-apps

Windows 将允许您拥有多个音乐文件夹。如何查询所有文件夹的路径。我知道以下将获取当前设置的文件夹，但我想要其他文件夹。

```
Environment.GetFolderPath(Environment.SpecialFolder.MyMusic) 
```

在我的系统上，这将生成以下文件夹。`D:\Users\Bobby\Music`. 然而，这还不够。我有另一个文件夹，它是一个音乐文件夹，位于`C:\Users\Bobby\SkyDrive\Music`.

基本上我想从我的 Windows Store 应用程序中迭代 MyMusic 库中的所有文件夹。

![在此处输入图像描述](../Images/2aadcb1fd3b834a6ce6dc49838273be2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:37:23.230

我想到了。这是您访问所有 MP3 音乐的方法，它是一个 Windows 音乐库。

```
var options = new QueryOptions(CommonFileQuery.OrderByMusicProperties, new List<string> { ".mp3" });
options.SetThumbnailPrefetch(ThumbnailMode.MusicView, 256, ThumbnailOptions.UseCurrentScale);

var query = KnownFolders.MusicLibrary.CreateFileQueryWithOptions(options);
var files = await query.GetFilesAsync();

foreach (var file in files)
{
    /* Access MP3s */
} 
```

# r - 从基于 R 中数据的 ANOVA 对象中提取数据

> ID：15098528
> 
> 赞同：0
> 
> 时间：2013-02-26T20:21:34.027
> 
> 标签：r, anova

我试图找到一种不那么复杂的方法来从`aov`对象中提取数据。假设我有一个`a`如下所示的数据集，并且我根据数据运行了方差分析，得到了一个名为`a.model`. 我试图通过使用来定位数据`str(a.model)`，但一直无法找到它们。因为我知道如何从`lm`对象中提取数据，所以我所做的就是使用`lm(a.model)$model$score`，这很有效。但是是否可以在`a.model`不先将对象转换为`aov`对象的情况下直接从中提取数据`lm`？- 我想这更多是出于好奇，因为转换的“额外”步骤并没有那么多工作。

```
a=data.frame(factor1 = rep(letters[1:2], each=10), 
             factor2 = rep(letters[c(1,2,1,2)], each=5), 
             score=sort(rlnorm(20)))
a.model = aov(score~factor1*factor2, data=a) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:25:56.877

来自的输出`aov`还有一个名为的组件`model`，其中包含数据，即。`a.model$model$score`与 相同`lm(a.model)$model$score`。

功能`names`很有用：

```
> names(a.model)
 [1] "coefficients"  "residuals"    
 [3] "effects"       "rank"         
 [5] "fitted.values" "assign"       
 [7] "qr"            "df.residual"  
 [9] "contrasts"     "xlevels"      
[11] "call"          "terms"        
[13] "model" 
```

另一种可能更方便且适用于更一般情况的方法是使用函数`model.matrix`并`model.frame`给出设计矩阵和公式中使用的整个模型。在您的第二个示例中（在评论中），您可以使用它`model.frame`来获取数据。

# javascript - 在嵌入式视频播放器周围包装 html 5 视频标签

> ID：15098537
> 
> 赞同：0
> 
> 时间：2013-02-26T20:22:03.650
> 
> 标签：javascript, html, html5-video

我正在寻找一种方法，以便可以将来自 youtube/video/其他没有的视频提供商的某个嵌入链接`API`包裹在`HTML5 <video>`标签周围。如果我能够使用这个标签的 HTML5 特性呢？我正在寻找这样的东西：

```
<video width="560" height="315" controls autoplay>
<iframe width="560" height="315" src="http://www.youtube.com/embed/5qm8PH4xAss" frameborder="0" allowfullscreen></iframe>
</video> 
```

或这个：

```
<video width="640" height="505" controls autoplay>
<object width="640" height="505" type="application/x-shockwave-flash" data="http://www.youtube.com/v/YE7VzlLtp-4">
<param name="movie" value="http://www.youtube.com/v/YE7VzlLtp-4" />
</object>
</video> 
```

我实际上希望概括视频提供程序的嵌入式视频选项，我希望能够调用**play()、stop()、...**，`javascript`而不仅限于指定了`API`. 我基本上在寻找这样的东西： http: [//www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:37:15.993

除非您所描述的是指向视频文件的直接链接，否则您所要求的内容是不可能的，即便如此，这可能还不够，我将解释原因：

首先，HTML5`<video>`元素旨在处理视频，而不是 Flash 对象。其次，不同的浏览器只支持特定的视频格式：

*   火狐：OGV、WebM
*   互联网浏览器：MP4
*   Safari/iOS：MP4
*   铬：MP4、WebM

因此，除非您有 MP4 版本的视频和 OGG 版本的视频源，否则它不适用于所有现代浏览器。例如：

```
<video width="640" height="360" controls>
    <source src="__VIDEO__.MP4" type="video/mp4" /><!-- Safari / iOS video    -->
    <source src="__VIDEO__.OGV" type="video/ogg" /><!-- Firefox / Opera / Chrome10 -->
    <!-- Fallback code (e.g. Images, Flash, text, etc.) -->
</video> 
```

# html - 如何在另一个 div 中制作 auto hight div

> ID：15098541
> 
> 赞同：0
> 
> 时间：2013-02-26T20:22:17.353
> 
> 标签：html, css

你好我有这样的问题。我有这个代码：

```
<div id="1" style="min-height: 50px;">
    <div id="dynamicDiv">This div can be here, but not always.
    </div>
    <div id="2" style="display: table; MIN-HEIGHT: 50px;">
          <div id="3" style="display: cell-table; vertical-align: middle;">
              Any middled text.
          </div>
    </div>
</div> 
```

现在我的问题......有时dynamicDiv不会在这里，我需要div =“2”得到整个div =“1”。但是当设置 dynamicDiv 时，我需要 id="2" 的最小高度为 50px。

我不知道如何让它工作。我需要一个适用于 IE、FF、CHrome、Opera 和 Safari 的解决方案。

# apache-flex - 如何将资源添加到 Flex 库？

> ID：15098542
> 
> 赞同：5
> 
> 时间：2013-02-26T20:22:19.750
> 
> 标签：apache-flex

我正在尝试将资产添加到 flex 库 .swc 文件中，但没有成功。

库项目中的 assets 文件夹包含一个 gif 文件。该项目还包含一个显示图像的 Spark Group 组件。

当我尝试在其他项目中使用此组件时，图像不可见。如果我将资产文件夹从库项目复制到主项目，则图像可见。

我在 Flex Library Build Path 中添加了 assets 文件夹

为什么资产不包含在 swc 中？

谢谢！

附截图：![在此处输入图像描述](../Images/d1e92a457932cac7f89f0357bfea6238.png) ![在此处输入图像描述](../Images/7701b45e2339587d0985e1b54b15f702.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:22:21.600

在库项目中创建类

```
package resources
{
    public final class IconResource
    {
        //list embedded items - you can embed any files, mp3 etc

        [Embed (source="../assets/facebook.gif" )]
        public static const icon_facebook:Class;    

        public function IconResource()
        {}
    }
} 
```

在生产项目中使用：

```
import resources.IconResource;

var img:Image = new Image();
img.source = IconResource.icon_facebook; 
```

或者

```
<fx:Script>
  <![CDATA[
    import resources.IconResource;
  ]]>
</fx:Script>

<s:Image source="{IconResource.icon_facebook}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:02:08.783

这取决于您如何尝试从库中访问图像。

要使其正常工作，您需要在您的情况下使用 @Embed("facebook.gif") - 路径中不使用“assets”文件夹。因此，除非您将其嵌入，否则您将无法从应用程序访问它，并且您只能使用文件名进行嵌入。

# wpf - WPF 视觉工作室，如工具栏“添加和删除按钮”菜单

> ID：15098543
> 
> 赞同：0
> 
> 时间：2013-02-26T20:22:34.593
> 
> 标签：wpf, wpf-controls

我正在尝试制作一个自定义的工具栏控件，如下所示：

![在此处输入图像描述](../Images/dd6f7afa91e852b3d01a53acc61eea92.png)

主窗口可以有多个工具栏，它们都是在后台创建的。我需要的是让所有工具栏都包含一个“添加或删除按钮”菜单。它应该与 Visual Studio 的工作方式完全相同。您可以通过检查“添加或删除按钮”菜单下的菜单项来显示/隐藏项目。

现在具有挑战性的部分是如何使“添加或删除按钮”控件像 Visual Studio 一样工作。似乎 wpf 没有这种控制....

当鼠标悬停在“添加或删除按钮”时，可检查的菜单项应继续显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:04:45.760

我看不到它对我来说似乎已损坏的链接，但是如果您谈论的是 VS 中允许您添加新按钮的小“向下”箭头，那么我的第一个想法是使用上下文菜单，该菜单在 wpf 中可用。

# javascript - 如何在 Eclipse 中为 JavaScript 项目的 DOM 启用代码辅助

> ID：15098551
> 
> 赞同：0
> 
> 时间：2013-02-26T20:23:02.690
> 
> 标签：javascript, eclipse, code-completion

我怎样才能简单地进入这个小弹出窗口（代码完成）当我输入 window.(blablabla) 时给出的所有可能的方法/函数。因为如果我输入窗口。例如，没有“事件”方法。

在 NuSphere 中列出了所有方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:28:05.503

请区分 JavaScript 和 DOM 代码辅助。这里有很多关于这个的问题/答案，但他们指的是这两个中的哪一个是模棱两可的。没有，我见过，特别是声称已经找到了**DOM**的解决方案，并且大多数人提到 Aptana 作为独立的 IDE 或 Eclipse 插件来解决。

由于此问题范围之外的原因，我使用**Eclipse Indigo** (3.7.2) 并在没有 Aptana 的情况下使其正常工作。此解决方案可能取决于 JavaScript 开发工具插件。

首先在 Navigator 窗格中右键单击项目并将鼠标悬停在*Configure*选项上。选择*转换为 JavaScript 项目*或*添加 JavaScript 支持*。

打开项目属性和一个 JavaScript 项应该出现在左侧的配置选项列表中。展开并选择*包含路径*。在右侧的 Libraries 选项卡中，您将看到*ECMA Script*和*ECMA 3 Browser Support*。切换到*Global Supertype*选项卡并勾选*ECAM 3 Browser Support*复选框。重新启动 Eclipse。

--

However in my case this last option didn't seem to work (when selected 'window' as global supertype, below the list got 'Window() null') and window. 没有带来结果，而是记录。和所有其他 JS 全局变量一样。（所以我可以说例如`var w = document.defaultVeiw;`和 w. 确实提出了所需的列表。）

# java - 如何通知 TreeModel 其底层模型已更改？

> ID：15098559
> 
> 赞同：1
> 
> 时间：2013-02-26T20:23:23.800
> 
> 标签：java, swing, model-view-controller, jtree

我正在开发一个世界模拟，其中`World`代表：

```
public class World {
    Turtle turtle;
    // .. basic constructors, getters, setters
} 
```

a`Turtle`表示为：

```
public class Turtle {
    List<Turtle> turtles;
    // .. basic constructors, getters, setters
} 
```

一个`Turtle`站在它的背上，其余`turtles`的`World`靠在一个上，主要的`Turtle`（下面可能有乌龟）。我想在 Swing 中将其表示为 JTree。

所以我编写了一个 JTree 和一个 TreeModel：

```
JTree tree = new JTree(new WorldModel(world.getTurtle());

public class WorldModel implements TreeModel {

    private Turtle = null;

    public WorldModel(Turtle turtle) {
        this.turtle = turtle;
    }

    @Override
    int getChildCount(Object object) {
        return ((Turtle) object).getNumTurtles();
    }

    @Override
    Object getChild(Object parent, int index) {
        return ((Turtle) object).getTurtle(index);
    }

    // etc., you get the overbearing point

} 
```

在我更改`Turtle`最初传递给 TreeModel 的构造函数的点之前，这非常有效：

```
world.getTurtle().removeAllTurtleChildren(); 
```

如何更新我的 JList 以反映此更改？我是否必须创建一个新的 TreeModel 并再次设置它？

（如果可能的话，我想远离 DefaultTreeModel。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:58:34.530

给模型添加支持修改结构的api：

```
public class WorldModel implements TreeModel {

     ...

     public void removeAllChildren(Turtle parent) {
         if (parent.getChildCount() == 0) return;
         Turtle[] children = parent.getChildren();
         int[] locations = new int[children.length());
         for(int loc = 0; loc < locations.length; loc++) {
            locations[i] = i;
         }
         parent.removeAllChildren();
         List<Turtle> path = new ArrayList<>();
         while (parent != null) {
             path.add(0, parent);
             parent = parent.getParent();
         }

         TreeModelEvent event = new TreeModelEvent(this, path, locations, children);
         // for each listener
              listener.treeNodesRemoved(event);   
     }
} 
```

如您所见，这是一项相当多的工作-您可能会重新考虑不使用 DefaultTreeModel :-)

# java - Java replaceAll 在替换中使用找到的模式

> ID：15098564
> 
> 赞同：1
> 
> 时间：2013-02-26T20:23:45.657
> 
> 标签：java, regex

我想用定义的 URL 和查询字符串中的原始链接替换 ​​HTML 页面上的所有链接。

这是一个例子：

```
"http://www.ex.com abc http://www.anotherex.com" 
```

应替换为：

```
"http://www.newex.com?old=http://www.ex.com ABC http://www.newex.com?old=http://www.anotherex.com" 
```

我考虑过使用replaceAll，但我不知道如何在替换中重用正则表达式模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:30:52.803

就像是

```
String processed = yourString.replaceAll([ugly url regexp],"http://www.newex.com?old=$0") 
```

$0 是对正则表达式的主要捕获组的引用。查看[Matcher.appendReplacement的文档](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#appendReplacement%28java.lang.StringBuffer,%20java.lang.String%29)

对于一个有价值的正则表达式，你可以从[这里](https://stackoverflow.com/questions/163360/regular-expresion-to-match-urls-in-java)选择例如

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:30:35.957

我会通过执行以下操作来解决此问题：

```
List<String> allMatches = new ArrayList<String>();
Matcher m = Pattern.compile("regex here")
  .matcher(StringHere);
while (m.find()) {
allMatches.add(m.group());
}

for(String myMatch : allMatches)
{
  finalString = OriginalString.replace(myMatch, myNewString+myMatch);
} 
```

我没有对此进行任何测试，但它应该让您了解如何处理它

# r - 在 R 中创建 data.frame 列组合的索引

> ID：15098567
> 
> 赞同：11
> 
> 时间：2013-02-26T20:23:49.757
> 
> 标签：r, dataframe, indexing

[这个问题与这个问题](https://stackoverflow.com/questions/6112803/how-to-create-an-index-from-a-variable-in-a-dataframe)有点相关，但是我想使用两个 data.frame 列的唯一组合创建一个索引。所以我的数据结构看起来像这样（dput）：

```
structure(list(avg = c(0.246985988921473, 0.481522354272779, 
0.575400762275067, 0.14651009243539, 0.489308880181752, 0.523678968337178
), i_ID = c("H", "H", "C", "C", "H", "S"), j_ID = c("P", "P", 
"P", "P", "P", "P")), .Names = c("avg", "i_ID", "j_ID"), row.names = 7:12, class = "data.frame") 
```

因此，为上述结构创建的索引应如下所示

```
1
1
2
2
1
3 
```

在示例数据中，列 j_ID 始终具有值 P，但情况并非总是如此。此外，反之亦然（SP 或 PS）组合应产生相同的索引。

有人知道实现这一目标的好方法吗？我可以使用很多 for 循环和 if-else 命令来做到这一点，但这并不是很优雅。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:26:02.440

该`interaction`功能将运行良好：

```
foo = structure(list(avg = c(0.246985988921473, 0.481522354272779, 0.575400762275067, 0.14651009243539, 0.489308880181752, 0.523678968337178), i_ID = c("H", "H", "C", "C", "H", "S"), j_ID = c("P", "P", "P", "P", "P", "P")), .Names = c("avg", "i_ID", "j_ID"), row.names = 7:12, class = "data.frame")

foo$idx <- as.integer(interaction(foo$i_ID, foo$j_ID))

> foo
         avg i_ID j_ID idx
7  0.2469860    H    P   2
8  0.4815224    H    P   2
9  0.5754008    C    P   1
10 0.1465101    C    P   1
11 0.4893089    H    P   2
12 0.5236790    S    P   3 
```

* * *

啊，我读得不够仔细。可能有一个更优雅的解决方案，但您可以使用`outer`函数和上下三角形：

```
# lets assign some test values
x <- c('a', 'b', 'c') 
foo$idx <- c('a b', 'b a', 'b c', 'c b', 'a a', 'b a') 

mat <- outer(x, x, FUN = 'paste') # gives all possible combinations
uppr_ok <- mat[upper.tri(mat, diag=TRUE)]
mat_ok <- mat
mat_ok[lower.tri(mat)] <- mat[upper.tri(mat)] 
```

然后，您可以将在 中找到的索引`mat`与在 中找到的索引进行匹配`mat_ok`：

```
foo$idx <- mat_ok[match(foo$idx, mat)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:46:40.773

要添加到[贾斯汀的答案](https://stackoverflow.com/questions/15098567/create-an-index-of-a-combination-of-data-frame-columns-in-r/15098607#15098607)，如果您希望索引保留原始的顺序`i_ID`，您可以将`interaction()`结果分配给一个变量，然后分配`order`给`levels`.

```
x <- interaction(foo$i_ID, foo$j_ID) 
x <- factor(x, levels=levels(x)[order(unique(foo$i_ID))])

foo$idx <- as.integer(x) 
```

这使：

```
> foo
         avg i_ID j_ID idx
7  0.2469860    H    P   1
8  0.4815224    H    P   1
9  0.5754008    C    P   2
10 0.1465101    C    P   2
11 0.4893089    H    P   1
12 0.5236790    S    P   3 
```

# c# - 当数据量可以被 1023 或 1024 整除时，为什么 fetch 操作会崩溃？

> ID：15098568
> 
> 赞同：1
> 
> 时间：2013-02-26T20:23:51.770
> 
> 标签：c#, io, null, windows-ce, dispose

（或者，当被 1023 整除时（见下面的更新 3））

我正在寻找一个错误，当包含要提取的数据的文件的大小可以被 1024 整除时，就会出现一个错误。在这种情况下，提取似乎一直工作到完成，但最后却失败了。

考虑到在这种情况下可能会发生一些奇怪的事情（当有一个文件的大小是 1024 的倍数时），我在代码中搜索了对“1024”的任何引用，但没有具体提到“1024”的实时代码。”

我确实在获取代码中发现了一件我认为看起来很奇怪的东西，即：

```
connFrmSitesData.Dispose();
connFrmSitesData = null; 
```

将表单设置为 null 是否可能导致问题？有什么理由让它存在吗？

## 更新

我发现这段代码让我想知道：

```
string theMessage = new string( '\x00', 1023 ); 
```

...如果它可能与问题无关。

## 更新 2

现在我看到那个字符串 (theMessage)* 甚至没有被使用；我能够将其注释掉（在所有三个类似声明且此后未使用的地方）。

那么为什么在这段代码中有：

```
bool    retVal      = false;            
string  theMessage  = new string( '\x00', 1023 ); // fill 1023 bytes with nulls
. . .
    if( retVal = Util.NetSendCommand( rc.command ) ) 
```

...“retVal”是变灰的变量（我假设是 Resharper），而“theMessage”没有变灰？

*   还有一个“正常”** theMessage 声明为类私有：

    私人字符串 theMessage；

** “正常”，因为它没有用重载的构造函数实例化。

## 更新 3

我可能已经找到了问题区域（实际上在不同的项目中 - 项目调用的 .DLL）。

此代码是可疑的，因为 MAXREAD = 1023。

任何人都可以看到这会导致精确大小的文件失败的任何问题吗？例如，如果先前的 Read 已获得所有内容，对 bReader.Read() 的调用会失败吗？

还是这里的某个地方潜伏着其他问题？

```
BinaryReader bReader          = null;
. . .
bReader = new BinaryReader( theN_Stream );
. . .
fsWriteText = new FileStream( destFPath, FileMode.Create, FileAccess.Write );
. . .
bWriter = new BinaryWriter( fsWriteText );
. . .

/* --------------------------------------- *
 *   Incoming message may be larger than 
 *   the buffer size.
 * --------------------------------------- */ 
int index     = 0;
int indexLast = 0;
int next2Read = MAXREAD;

try
{
    // keep doing this until no data available on the stream, ...
    do
    {
        next2Read         = MAXREAD; //1023
        longString        = "";

    Array.Clear( readbuffer, 0, MAXREAD );

    numberOfBytesRead = bReader.Read( readbuffer, 0, next2Read );

    indexLast  = index;
    realTotBytesRead += numberOfBytesRead; 
    index     += numberOfBytesRead;
    nBytes    += numberOfBytesRead;
    xferProgress = nBytes.ToString() + "|" + fsize.ToString();
    OnProgressChanged(xferProgress);

    if( bWriter != null )
        {
            if( bWriter.BaseStream.CanWrite )
            {
                bWriter.Write( readbuffer, 0, numberOfBytesRead );
            }
        }

    if( index >= fsize )
    {
        haveFinishedRead = true;
        break;
    }

    if( !theN_Stream.CanRead )
    {
        break;
    }
} while( index < fsize ); 
```

## 更新 4

在试图解决这个问题的过程中，我编译了（不是双关语）以下注释。

// readbuffer 是一个字节数组。// bReader 是一个二进制阅读器

“索引”从 0 开始，分配读取的字节数（1023 或剩余/最后一位），稍后针对文件大小进行测试 - 如果等于或更大，则退出循环。

“indexLast”从 0 开始，首先分配 index 的值（第一次通过循环时为 0，之后为 1023 或余数/最后一位），但它从未被引用，因此可以将其注释掉。

"next2Read" 最初分配为 MAXREAD，即 1023。它在这一行中使用：

```
numberOfBytesRead = bReader.Read( readbuffer, 0, next2Read ); 
```

...但此后未引用，因此可以将其删除，并且上面的行更改为：

```
numberOfBytesRead = bReader.Read( readbuffer, 0, MAXREAD); 
```

"longString" 被初始化为一个空字符串，但是没有在任何地方被引用；但是，由于它是一个全局变量，也许其他地方需要这个值？

"numberOfBytesRead" 被分配了 bReader 的 Read() 方法的返回值。然后将其分配给“index”和“nBytes”。然后在调用 bWriter.Write() 时将其用作“要写入的字节数”。

与“longString”一样，“realTotBytesRead”被分配给此方法，然后在此方法中不被引用，但由于它是一个全局变量，它可以在其他地方使用...

“nBytes”在“numberOfBytesRead”中被赋值，然后用于进度条。似乎可以使用“numberOfBytesRead”并切断中间人，但我猜“nBytes”并没有伤害任何东西（除了让我的头骨不会塌陷的糊状灰色东西）......

“fsize”用于条件分支。它最初设置为 0，然后这样设置：

```
fsize = (int)Int32.Parse( fFileSz ); 
```

“fFileSz”是一个公共静态字符串，它保存文件大小（在别处设置）。

“theN_Stream”是一个网络流。

*在调试计算机程序时，您有点像侦探，但不是在黑暗的小巷里追捕坏人并揭露罪犯，而是在吸食行为不端的人。这种侦探工作比另一种更安全——更久坐不动，也更稳重——但是你从备用鞋皮中获得的收益和节省的人寿保险费，你会在突触破裂和过度劳累的脑细胞中损失惨重，WAY超越“云”；在你做/不做的每一件事上总是有一个权衡。*

## 更新 5

我现在预计问题出在其他地方，因为无论文件大小小于、等于还是大于 MAXREAD (1023)，此代码似乎都可以工作。伪代码：

//文件大小 < MAXREAD:

```
if filesize == 1022:
numberOfBytesRead == 1022
index == 1022;
//....breaks out (as it should, it's done), because index == fsize 
```

//文件大小 == MAXREAD: //1023

```
if filesize == 1023:
numberOfBytesRead == 1023
index == 1023;

//breaks out (as it should, it's done), because index == fsize 
```

//文件大小> MAXREAD：

```
if filesize == 1024:
numberOfBytesRead == 1023
index == 1023;
...continues to loop again:
numberOfBytesRead == 1
index == 1024;
//breaks out (as it should, it's done), because index == fsize 
```

// 对于任何文件大小 > MAXREAD 都应该相同

## 更新 6

已找到“神奇数字” - 处理 190KB 大小的文件时应用程序崩溃。显示获取过程的进度条比冻结 - 永远并且在每次文件大小正好如此的情况下；否则很好（如果文件大小小于或大于 190KB，则可以正常工作）。

## 更新 7

我意识到这是一个糟糕的修复，但遗留代码是如此复杂，[故意？]混淆，和花招——DLL调用exe，反之亦然，多个后台线程触发和停止，闪烁和像来自疯人院的闪光灯一样闪烁——我以这种方式强行临时修复，更改了以下代码：

```
if( processMessage )
{
                Util.ProcessServerResponse( theMessage.Trim( uDelims.ToCharArray() ) );
} 
```

...对此：

```
if ( processMessage )
{
                string valToPass = theMessage.Trim(uDelims.ToCharArray());
                if (valToPass.IndexOf("190980") > 0)
                {
                                valToPass = valToPass.Replace("190980", "190978"); 
                }
                Util.ProcessServerResponse( valToPass );
} 
```

// 注意： 1) 出于某种原因，当文件大小为 190980 时，DLL 中会出现无限循环，其中“索引”（已读取的字节数）仍然小于表示要读取的总字节数的值 - 所有其他文件大小或所有其他文件大小的很大一部分，它工作正常...... 2）我不能使用 string.Contains() 来查找“190980”，只是因为它在 .NET 1.1 中不可用

# php - 如何在不使用 PDO 的情况下改进我的 PHP 清理

> ID：15098569
> 
> 赞同：2
> 
> 时间：2013-02-26T20:23:53.187
> 
> 标签：php, sql-injection, input-sanitization

在用于 SQL 查询之前，我编写了一个用于清理字符串/变量的简短函数：

```
function cleanstring($sanitize, $maxlength=10, $minlength=0){
    if(strlen($sanitize) <= $maxlength && strlen($sanitize) >= $minlength){
    $sanitize = substr(mysql_real_escape_string(strip_tags($sanitize)), 0, $maxlength);
}
else{
    include("includes/header.php");
    exit("Error!");
    }

return $sanitize;
} 
```

调用使用：

```
$variable = cleanstring($_POST['someInput'], 5, 5) 
```

将定义字符串的长度，使用 real_escape_string 和 strip_tags 清理它，然后使用 substr() 确保返回的数据仍然符合长度标准。

有什么方法可以在不使用 PDO 的情况下改进这种清理功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:34:20.247

我认为你错过了重点（或者说得太过分了）。 **每当**您将控制字符与数据混合时，都需要一种方法来转义这些控制字符，以便将它们解释为数据。

在网络编程中，有几个领域：

*   SQL（每个数据库不同）
*   命令外壳
*   URI
*   HTML 属性
*   HTML 内容
*   JavaScript

每个人都需要一种独特的逃生方法。有时有多个级别的转义，例如编码 URI，然后将其编码为`href=""`属性。

您的功能在技术上是“安全的”，但有点混乱。你不想给用户一个错误而不是默默地截断他们的输入吗？此外，如果有人对...发表评论怎么办`When I put <strong> tags around the gadget, it breaks?`？您的代码将删除`<strong>`. 但是插入 SQL 是完全安全的`<`。`>`

我建议您只需使用为上述每个项目创建的方法。

*   MySQL: `"'" . mysqli_real_escape_string(...) . "'"`，可能`intval`在某些情况下。
*   命令外壳：`escapeshellargI(...)`
*   URI：`urlencode()`
*   HTML 属性：`'"' . htmlspecialchars(..., ENT_QUOTES) . '"'`
*   HTML 内容：`htmlspecialchars(...)
*   JavaScript：`json_encode(...)`可能包含在 HTML 编码中，具体取决于上下文。

为方便起见，您可以将其中一些包装成更短的函数：

```
function QA($val)
{
    return '"' . htmlspecialchars($val, ENT_QUOTES) . '"';
} 
```

ETC...

**但要点是 100% 的时间防止数据被读取为控制字符。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:34:06.723

不要`strip_tags`和不要做`mysql_real_excape_string`！！！在打印时，您需要考虑是否要使用 或其他方式打印它`strip_tags`，`htmlspecialchars`而不是在消毒中。而不是`mysql_real_excape_string`使用准备好的语句。还可以使用过滤器将字符串清理为电子邮件或其他内容。

# cocoa - AFNetworking 没有在变量中写入响应

> ID：15098573
> 
> 赞同：0
> 
> 时间：2013-02-26T20:24:05.260
> 
> 标签：cocoa, asynchronous, afnetworking

我在使用 AFNetworking 时遇到问题代码：

```
#import "SyncProfile.h"
#import "AFNetworking.h"

@implementation SyncProfile: NSObject 
@synthesize delegate = _delegate;

- (BOOL)syncProfile {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    NSString *token =[userDefaults objectForKey:@"token"];
    int user_id = [userDefaults objectForKey:@"user_id"];
    if([token length]) {

        self.profileData = [[self sendRequest:@"method.get" token:token withUser:user_id andParameters:@"param1,param2"] valueForKeyPath:@"response"];
        NSLog(@"%@", self.profileData);

        return YES;
     } else
         return NO;

}

-(id)sendRequest:(NSString *)apiMethod token:(NSString *)token withUser:(int)user_id andParameters:(NSString *)param {

NSMutableString *apiLink = [NSMutableString stringWithFormat:@"https://domain.com/method/%@?uid=%@&fields=%@&access_token=%@", apiMethod, user_id, param, token];
    NSURL *url = [[NSURL alloc] initWithString:apiLink];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        NSLog(@"%@", JSON);
        self.req = JSON;
        [self myMethod:JSON];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];
    [operation start];
    return self.req;
}

- (id)myMethod:(id)data {
    NSLog(@"%@",data);
    return 0;
}

@end 
```

我需要使用结果 AFNetworking 返回方法返回一个变量。但是结果比方法返回要晚得多。当我使用不同的方法来处理结果时，它不会。尝试使用，`[operation waitUntilFinished]`但没有任何改变。

Xcode 输出中的结果：

```
//Return variable from "sync" method
2013-02-26 23:57:29.793 walkwithme[13815:11303] (null)
//Return from AFN response
2013-02-26 23:57:31.063 walkwithme[13815:11303] {response = ({someJSON})}
//Return from MyMethod
2013-02-26 23:57:31.063 walkwithme[13815:11303] {response = ({someJSON})} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:15:37.257

你绝对不想使用任何`wait`方法。您需要做的是在您的成功和失败块中回电。您可以按照我在[这个问题](https://stackoverflow.com/questions/15040463/how-to-return-a-response-object-using-afjsonrequestoperation/15042250#15042250)中展示的方式执行此操作，您也可以执行其他操作，例如消息传递。要实现的关键是您不会使用典型的方法返回模式。使用这样的异步方法的原因是您不知道它何时会完成，这就是它使用块回调的原因。就像我说的那样，您绝对不想这样做，`wait`因为这可能会完全阻止您的应用程序。

编辑：

我在我的一个项目中使用此代码：

声明方法

```
- (void)postText:(NSString *)text
     forUserName:(NSString *)username
   ADNDictionary:(NSDictionary *)dictionary
       withBlock:(void(^)(NSDictionary *response, NSError *error))block; 
```

然后在这个方法中，我将这些参数传递给网络请求。

在块中返回值：

```
if (block) {
    block(responseObject, someError);
} 
```

然后我用这个来称呼它：

```
[[KSADNAPIClient sharedAPI] postText:postText
                             forUserName:username
                           ADNDictionary:parameters
                               withBlock:^(NSDictionary *response, NSError *error)
    {
        if (error) {
               // Deal with error
        } else {
               // Probably success!
        }
    } 
```

这样，被调用的方法将其值返回给块内的调用者方法。我认为它会将阻塞推迟给调用者。

# java - 尝试启动和部署 Jetty 时出现问题

> ID：15098579
> 
> 赞同：0
> 
> 时间：2013-02-26T20:24:28.600
> 
> 标签：java, jetty

每当我尝试在特定机器上部署 Jetty（与其他机器一起使用）时，我都会遇到问题，该机器是非英语 Windows 机器。

> [2013-02-15 04:14:05.894] [错误] Thread-39
> System.err
> java.lang.IllegalStateException: 无法在 C:\Windows\system32\config\systemprofile\AppData\Local\Temp\ 中创建 tmp 目录上下文 oejwWebAppContext{/spdy,null},C:\Program Files\server\work\tmp\my-app\webapps\spdy.war
> 
> [2013-02-15 04:14:05.894] [错误] Thread-39
> System.err
> java.io.IOException: Žw'è‚³‚ê‚½ƒpƒX‚ªŒ©‚‚©‚è‚Ü‚¹‚ ñB

我试图查看这是否是与管理员权限相关的问题，但不是，我正在使用管理员权限启动该进程。

任何建议都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T00:20:17.143

能够找出问题所在。如果 TEMP 文件夹不存在，Jetty 不会创建它，因此您必须检查自己并在临时文件夹不存在时创建它。

在这种情况下，它最终是： C:\Windows\system32\config\systemprofile\AppData\Local\Temp\ 不存在，尽管 C:\Windows\system32\config\systemprofile\AppData\Local\ 确实存在并且 TEMP= C:\Windows\system32\config\systemprofile\AppData\Local\Temp\

在 C:\Windows\system32\config\systemprofile\AppData\Local\ 中创建“Temp”目录解决了这个问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T12:14:57.357

这是一个很老的帖子，但最近我也遇到了同样的问题，所以我也想分享一下我的经验。

导致问题的部分代码可以在这里找到：http: [//download.eclipse.org/jetty/stable-8/xref/org/eclipse/jetty/webapp/WebInfConfiguration.html#225](http://download.eclipse.org/jetty/stable-8/xref/org/eclipse/jetty/webapp/WebInfConfiguration.html#225)，`resolveTempDirectory (WebAppContext context)`方法（检查最后几行该方法，第三种情况在评论中解释）。因此，该问题的另一种解决方法也可以将默认`java.io.tmpdir`文件夹更改为指向现有文件夹。

我已经检查了一些系统，并且`C:\Windows\system32\config\systemprofile\AppData\Local\Temp`Windows 上不存在文件夹：7、2008、2012。

# javascript - 检查鼠标悬停时是否按下鼠标按钮？

> ID：15098584
> 
> 赞同：21
> 
> 时间：2013-02-26T20:24:40.487
> 
> 标签：javascript

我有一个用户在网站上与之交互的框格。如果他们单击一个框，它会改变颜色。有相当多的盒子，我希望它不那么乏味，所以最好有这样的功能：如果鼠标按钮按下并且你悬停在盒子上，它会改变状态。有什么想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-26T20:27:11.297

您可以使用[`buttons`](https://developer.mozilla.org/en-US/docs/DOM/MouseEvent)传递给悬停回调的事件的属性来检查触发事件时按下了哪些鼠标按钮。

例如，要检测鼠标输入元素时是否按下了左键，可以使用：

```
myElement.addEventListener("mouseover", function(e){
    if(e.buttons == 1 || e.buttons == 3){
        //do some stuff
    }
}) 
```

这是这个想法的一个演示：http: [//jsfiddle.net/Ah6pw/](http://jsfiddle.net/Ah6pw/)

按住鼠标左键并在不同的列表项之间移动鼠标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:29:55.827

我发现了类似的东西。单击某个空间中的对象，然后很少进行交互。 [http://mrdoob.github.com/three.js/examples/canvas_interactive_cubes.html](http://mrdoob.github.com/three.js/examples/canvas_interactive_cubes.html)（在代码中寻找灵感）

这些链接也可能对您有用

*   [jQuery 在 mouseover 上是 mousedown](https://stackoverflow.com/questions/2349764/jquery-is-mousedown-on-mouseover)
*   [检测鼠标左键按下](https://stackoverflow.com/questions/3944122/detect-left-mouse-button-press)
*   [http://unixpapa.com/js/mouse.html](http://unixpapa.com/js/mouse.html)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-02-26T20:29:52.083

请参阅[onmousedown 和 onmouseup](http://www.quirksmode.org/js/events_mouse.html)事件。

# ruby-on-rails - Rails 一对一关系

> ID：15098586
> 
> 赞同：12
> 
> 时间：2013-02-26T20:24:55.353
> 
> 标签：ruby-on-rails, ruby, one-to-one

我有以下内容：

```
class User < ActiveRecord::Base
  has_one :car, :class_name => 'Car', :foreign_key => 'user_id'

class Car < ActiveRecord::Base
  belongs_to :worker, :class_name => 'User', :foreign_key => 'user_id' 
```

它基本上是用户和汽车之间的一对一关系。

我想要的是让用户能够拥有一辆而且只有一辆汽车。这意味着如果他创建分配给他的汽车，他将无法创建第二个。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-08T00:53:31.373

当然有几种不同的方法可以实现这一点。我建议在该表上创建一个复合键索引，以确保 user_id 在表中是唯一的。这将确保它只会出现一次。在迁移中，您可以编写类似这样的内容。

```
add_index(:cars, :worker_id, :unique => true) 
```

第一个参数是表名（不要忘记这通常是类名的复数形式）。字段名称排在第二位。唯一的 true 将阻止您插入额外的行。

注意：这是一个数据库级别的约束。如果您因为验证没有捕获它而点击它，它将引发错误。

除了此解决方案之外，您还需要向 Car 模型本身添加验证。

```
validates_uniqueness_of :worker_id, message: "can not have more than one car" 
```

你会看到这个错误，比如“Worker ID can not have more than one car”。您很可能希望自定义其中的“工人 ID”部分。有关如何执行此操作的说明，请参阅此[帖子。](https://stackoverflow.com/questions/808547/fully-custom-validation-error-message-with-rails)

您当然不必执行 db 约束，但如果其他人插入数据库，这是一个好主意。否则，就 Rails 而言，您将拥有“无效”数据。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-26T20:32:47.560

稍微改变关系的定义：

```
class User < ActiveRecord::Base
  has_one :car

class Car < ActiveRecord::Base
  belongs_to :worker, :class_name => 'User', :foreign_key => 'user_id' 
```

你会建立你正在寻找的东西。见： http: [//guides.rubyonrails.org/association_basics.html#the-has-one-association](http://guides.rubyonrails.org/association_basics.html#the-has-one-association)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:38:30.897

为什么不在用户尝试添加汽车之前进行测试？

```
if worker.car
 raise "sorry buddy, no car for you"
else
 car = Car.create(user_id: worker.id)
end 
```

# perl - perl中的grep错误

> ID：15098589
> 
> 赞同：1
> 
> 时间：2013-02-26T20:25:02.533
> 
> 标签：perl

perl 新手。我正在尝试从哈希数组的值中进行 grep。有人可以解释为什么我在尝试时会出现未初始化的值错误

```
#!/usr/bin/perl
use strict;
use warnings;

my %families = (Flintstone => [ qw(Pebbles)                    ],
            Simpson    => [ qw(Bart Lisa Maggie)           ],
            Keaton     => [ qw(Alex Mallory Jennifer Andy) ]);
my $user = 'Mary';
foreach my $name (keys %families)
{
    print "$name has @{$families{$name}} \n";

    if (grep /$user/,@{families{$name}})
    {
    print "User $user found \n"
    }
    else
    {
    print "User $user not found";
    }
} 
```

更新：谢谢。我修复了 $name。但是 grep 似乎对我不起作用。即，如果我将 $user 更改为 Bart，我仍然找不到用户 Bart。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:29:50.463

你的意思是

```
@{$families{$name}} 
```

代替

```
@{families{name}} 
```

也许？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:31:09.213

你会注意到你在第 13 行得到了错误，但在第 11 行没有？缺少的 $ 可能很重要。

# sql - 选择 id 出现在另一个表的列中的行

> ID：15098592
> 
> 赞同：2
> 
> 时间：2013-02-26T20:25:14.057
> 
> 标签：sql, sql-server

我无法完全理解 SQL 查询，因为它不是我的强项。我正在尝试选择员工表中的行的名称，`id`其中的 's 出现在`salesPersonId`另一个表的列中，`accounts`. 也就是说，在帐户表中表示的任何员工姓名。

```
ACCOUNT
+----+---------------+
| id | salesPersonID |
+----+---------------+
|  0 |     1020      |
+----+---------------+
|  1 |     1020      |
+----+---------------+
|  2 |     1009      |
+----+---------------+

EMPLOYEE
+------+---------------+
|  id  |   firstName   |
+------+---------------+
| 1009 |     BILL      | <-select his name
+------+---------------+
| 1020 |     KATE      | <-select her name
+------+---------------+
| 1025 |     NEIL      | <-not this guy
+------+---------------+ 
```

由于 Neil 在 account.salesPersonID 中没有任何存在，我想选择除他之外的其他两个。不过，我并没有走得太远，并且正在寻找一些输入。

```
SELECT * FROM employee e
LEFT JOIN account a
ON a.salesPersonID = e.id
WHERE (SELECT COUNT(salesPersonID) FROM account) > 0 
```

不起作用。我想知道如何选择出现在`salesPersonID`. 谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:28:21.023

尝试这个：

```
SELECT Distinct e.firstName 
FROM employee e
JOIN account a ON a.salesPersonID = e.id 
```

将`JOIN`负责过滤以确保您只返回两个表中都存在的记录。

`Distinct`将确保您只获得每个`firstName`值一次。您也可以通过 Grouping by `employee.Id`or来完成此`employee.firstName`操作（如果您想为每个唯一员工返回一行，即使他们有相同的名字，按 Id 分组是更好的策略，分组`firstName`或使用`distinct`是当您只想要一个时每个唯一的名称，即使该名称由多个员工使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:10:16.237

你可以有这样的查询....

select e.firstname from employees1 e left join account a on(e.id=a.salespersonid) where e.id= a.salespersonid group by e.firstname

结果：

名字比尔凯特

# c# - C# 文本框数组

> ID：15098600
> 
> 赞同：-2
> 
> 时间：2013-02-26T20:25:44.127
> 
> 标签：c#, .net, wpf

我正在写 WPF 数独，我需要一个文本框数组。我有 81 个文本框，它们的名称以 txt11、txt21、txt31 开头，这意味着第 1 行和第 1 列中的第一个 txt，第 1 行和第 2 列中的第二个 txt ......等等。

我的代码是：

```
private TextBox[,] texts = new TextBox[9, 9];

void Initialization_text()
    {

        texts[0, 0] = txt11;
        texts[0, 1] = txt21;
        texts[0, 2] = txt31;
        texts[0, 3] = txt41;
        texts[0, 4] = txt51;
        texts[0, 5] = txt61;
        texts[0, 6] = txt71;
        texts[0, 7] = txt81;
        texts[0, 8] = txt91;

..................
} 
```

但我想要这样：

```
void Initialization_text()
   {

        for (int i = 0; i < 9; i++)
        {
            for (int j = 0; j < 9; j++)
            {
                texts[i, j] = (TextBox)Control["txt" + j+i];//j will be the column and i will be the line
            }
        } 
```

但它不起作用。我不知道如何解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:36:57.187

当你写

```
private TextBox[,] texts = new TextBox[9, 9]; 
```

您初始化“指针”数组，其中每个指针都初始化为空。您还必须初始化该类的每个实例！

在您的 For 循环中，您应该执行以下操作：

```
texts[i,j] = new TextBox();
texts[i,j].text = "txt" + i.ToString() + j.ToString(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T20:29:46.813

```
Control["txt" + j.ToString() + i.ToString()] 
```

# javascript - 加载一个元素。之后将另一个元素加载到加载的元素中

> ID：15098603
> 
> 赞同：2
> 
> 时间：2013-02-26T20:25:50.030
> 
> 标签：javascript, jquery

我建立了一个网站，我的框架，主菜单和横幅，总是存在的。

我创建了一个 div 元素，我可以在其中动态加载我想要的所有内容。

但现在我有一个问题。如果有人单击链接，我想将 html 文档加载到我的 div 框架中。完成此操作后，应将另一个 html 文档加载到新加载的 html 文档的一部分中。

现在的 rask 是检查第一个 div 元素何时已加载并将某些内容加载到该元素中。

**一个例子：**

```
$("#examplelink").click(function() 
{

$("#mainsite").load("firstlowerside.html");

$("#firstlowerside_div").load("secondlowerside.html");

}); 
```

Javascript 忽略命令行： $("#firstlowerside_div").load("secondlowerside.html") ，因为此时“firstlowerside.html”不存在。

有人可以告诉我如何检查文档是否已加载到我的 div 中并在此之后开始执行第二个命令吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:28:10.530

[`.load`](http://api.jquery.com/load/)有一个完整的回调参数，你可以传递一个在内容加载后触发的函数。

```
$("#mainsite").load("firstlowerside.html", function(){
    $("#firstlowerside_div").load("secondlowerside.html");
}); 
```

# javascript - 在模态窗口中上传 ajax 文件

> ID：15098608
> 
> 赞同：3
> 
> 时间：2013-02-26T20:26:04.523
> 
> 标签：javascript, jquery, ajax, jquery-ui, file-upload

因为用户上传的一些文件很大，我希望上传在模式窗口内进行，以便他们在上传过程中自由导航。我无法将模态窗口集成到 jquery 中。有人能帮忙吗。谢谢

```
function upload() {
  var fileInput = $('#file')[0];
  var data = new FormData();

for(var i = 0; i < fileInput.files.length; ++i){
    data.append('file[]',fileInput.files[i]);
}
$.ajax({
    type:'POST',
    method:'POST',/* for newest version of jQuery */
    url:'upload.php',
    headers:{'Cache-Control':'no-cache'},
    data:data,
    contentType:false,
    processData:false,
    success: function(response){
        var return_data = response;
        alert(return_data);
        if(return_data !== 'success') {
             failed();
        }
        else if(return_data == 'success') {
            success();
        }         
      }
    });
 }   
   <boby>
     <form id="form" method = "POST" enctype="multipart/form-data">
        <input type = "file" id = "file" multiple />
     </form>
  </body> 
```

# c# - 使用相同的 ViewModel 打开两个窗口时无法设置单选按钮值

> ID：15098611
> 
> 赞同：1
> 
> 时间：2013-02-26T20:26:23.020
> 
> 标签：c#, .net, wpf, mvvm

我在同时打开的两个窗口中使用以下控件模板，并且都使用相同的视图模型。这是模板；

```
 <ControlTemplate x:Key="SecurityTypeSelectionTemplate">
        <StackPanel>
            <RadioButton GroupName ="SecurityType"  Content="Equity" 
                     IsChecked="{Binding Path=SecurityType, Mode=TwoWay, Converter={StaticResource EnumBoolConverter}, ConverterParameter=Equity}" />
            <RadioButton GroupName ="SecurityType" Content="Fixed Income" 
                     IsChecked="{Binding Path=SecurityType, Mode=TwoWay, Converter={StaticResource EnumBoolConverter}, ConverterParameter=FixedIncome}" />
            <RadioButton GroupName ="SecurityType" Content="Futures" 
                     IsChecked="{Binding Path=SecurityType, Mode=TwoWay, Converter={StaticResource EnumBoolConverter}, ConverterParameter=Futures}" />
        </StackPanel>
    </ControlTemplate> 
```

这是视图模型属性：

```
 private SecurityTypeEnum _securityType;
    public SecurityTypeEnum SecurityType
    {
        get { return _securityType; }
        set
        {
            _securityType = value; RaisePropertyChanged("SecurityType");
        }
    } 
```

这是枚举：

```
public enum SecurityType { Equity, FixedIncome, Futures } 
```

这是转换器：

```
public class EnumToBoolConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object enumTarget, CultureInfo culture)
    {
        string enumTargetStr = enumTarget as string;
        if (string.IsNullOrEmpty(enumTargetStr))
            return DependencyProperty.UnsetValue;

        if (Enum.IsDefined(value.GetType(), value) == false)
            return DependencyProperty.UnsetValue;

        object expectedEnum = Enum.Parse(value.GetType(), enumTargetStr);

        return expectedEnum.Equals(value);
    }

    public object ConvertBack(object value, Type targetType, object enumTarget, CultureInfo culture)
    {
        string expectedEnumStr = enumTarget as string;
        if (expectedEnumStr == null)
            return DependencyProperty.UnsetValue;

        return Enum.Parse(targetType, expectedEnumStr);
    }
} 
```

问题有点奇怪。我有两个窗口显示 SAME ViewModel 的视图略有不同。上面显示的相同模板在两个视图中重复使用。如果 Equity 最初设置为 SecurityType，我可以通过单击相关单选按钮将其更改为 FixedIncome。然后我无法将其更改回股权。但是，我可以将其设置为期货。但在那之后，我无法通过单击相关单选按钮将其更改为 FixedIncome 或 Equity。
在我无法设置更改的情况下发生的情况是 Setter 被调用了两次。第一次将值设置为正确的选定值，但在触发 RaisePropertyChanged 的​​那一刻，再次调用设置器，这次使用原始值。
感觉就像当 RaisePropertyChanged 时，setter 被第二个窗口的绑定调用，从而覆盖了用户进行选择的第一个窗口中设置的值。有谁知道这是否是这种情况以及在这种情况下如何避免？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:51:20.613

这是我的 EnumToBoolConverter 版本：

```
public class EnumToBoolConverter : BaseConverterMarkupExtension<object, bool>
    {
        public override bool Convert(object value, Type targetType, object parameter)
        {
            if (value == null)
                return false;

            return value.Equals(Enum.Parse(value.GetType(), (string)parameter, true));
        }

        public override object ConvertBack(bool value, Type targetType, object parameter)
        {
            return value.Equals(false) ? DependencyProperty.UnsetValue : parameter;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:05:54.873

RadioButton 的默认行为是在属性更改时更新源，因此两个窗口都尝试更新源。一种解决方法是仅从用户单击的位置更新源。为此，请在绑定上使用[Binding.UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx) Explict。在 RadioButton 后面的代码中添加一个单击处理程序。在其中明确更新源。

```
 <StackPanel>
        <RadioButton GroupName ="SecurityType"  Content="Equity" 
                 IsChecked="{Binding Path=SecurityType, Mode=TwoWay, Converter={StaticResource EnumToBoolConverter}, UpdateSourceTrigger=Explicit, ConverterParameter=Equity}" Click="RadioButton_Click" />
        <RadioButton GroupName ="SecurityType" Content="Fixed Income" 
                 IsChecked="{Binding Path=SecurityType, Mode=TwoWay, Converter={StaticResource EnumToBoolConverter}, UpdateSourceTrigger=Explicit, ConverterParameter=FixedIncome}" Click="RadioButton_Click"/>
        <RadioButton GroupName ="SecurityType" Content="Futures" 
                 IsChecked="{Binding Path=SecurityType, Mode=TwoWay, Converter={StaticResource EnumToBoolConverter}, UpdateSourceTrigger=Explicit, ConverterParameter=Futures}" Click="RadioButton_Click"/>
    </StackPanel>  

    private void RadioButton_Click(object sender, RoutedEventArgs e)
    {
        BindingExpression be = ((RadioButton)sender).GetBindingExpression(RadioButton.IsCheckedProperty);
        be.UpdateSource();
    } 
```

您可能必须使用 UserControl 代替 ControlTemplate 或在 ControlTemplate 中使用您的视图中的代码。

# sbt - sbt 未解决的传递依赖

> ID：15098615
> 
> 赞同：2
> 
> 时间：2013-02-26T20:26:42.547
> 
> 标签：sbt

我似乎无法正确配置 SBT 来解决我的项目所依赖的 RootProject 的传递依赖关系。问题似乎是解决方案。我已经能够用一个非常简单的结构复制它。请参阅下面的代码。

在 common/ 我可以运行`sbt console`，它将解决依赖关系，我可以使用它。但是在 proj/ 内部，相同的命令失败了。与`UNRESOLVED DEPENDENCIES`. 但我的`edofic snapshots`解析器未列在尝试过的解析器中。不知怎的，它没有被捡起来。如果我手动将解析器添加到 Build.scala 中，它会起作用，但这违背了传递依赖的目的。

```
├── common
│   └── build.sbt
└── proj
    └── project
        └── Build.scala 
```

*常见/build.sbt*

```
scalaVersion := "2.10.0"

resolvers += "edofic snapshots" at "http://edofic.github.com/repository/snapshots"

libraryDependencies += "com.edofic" % "reactivemacros_2.10.0" % "0.1-SNAPSHOT" 
```

*项目/项目/Build.scala*

```
import sbt._
import Keys._

object BarBuild extends Build {
  val common = RootProject(file("../common"))

  val main = Project(id = "main", base = file(".")).settings(
    scalaVersion := "2.10.0"
  ) dependsOn common
} 
```

只是为了说明清楚：我想为“common”设置单独的 SBT 配置，并且我不想在本地发布它——我想让 SBT 在需要时处理增量重新编译。RootProject 是不是适合这项工作的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:55:21.230

这是一个对我有用的解决方案，但它可能会破坏其他东西：
在*proj/project/Build.scala*中，在您的项目定义中添加一个“代表”参数，如下所示：

```
val main = Project(id = "main", base = file("."), 
                   delegates = common :: Nil).settings(
  scalaVersion := "2.10.0"
) dependsOn common 
```

我认为这可能会导致您的“主”项目从“通用”项目中获取所有配置，所以我不确定可能有什么副作用。因此，我为我的项目选择的解决方案是拥有一个“配置”项目，该项目具有我所有项目的通用配置，并在该项目中使用“委托”，以便我可以控制正在选择的配置。

# installation - InstallShield 在路径变量中使用产品版本

> ID：15098616
> 
> 赞同：1
> 
> 时间：2013-02-26T20:26:46.103
> 
> 标签：installation, windows-installer, installshield-2011

在构建 exe 被转储的路径或其他场景等时，有没有办法使用产品版本号作为变量？

这样我就可以设置一次变量，然后让它随处自动更新。（最终，我想传递版本号，但那是在路上。）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-15T08:17:11.927

我尝试了很多东西，但似乎没有办法使用可变产品版本字符串（网上也有很多线程得出这个结论）。此外，在我们的项目中，我们还在快捷方式名称、设置文件名等中使用了版本字符串，但没有办法将其存储在一个地方。我们通过自动化找到了一个非常易于管理的解决方案。这是一个使用 VBScript 更新版本号和文件名的示例，但您也可以使用 C# 例如。

```
Set ISWIProject = CreateObject("IswiAuto19.ISWiProject")
ISWIProject.OpenProject "Our.ism"
ISWIProject.ProductVersion = "4.0.2.0"
ISWIProject.ISWiProductConfigs.Item("Release").SetupFileName = "App_4.0.2.0_Setup" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:05:54.640

构建时，`IsCmdBld.exe`您可以使用 -b 选项指定构建位置。令人遗憾的是，它实际上会改变主义。构建会更改源代码控制文件总是让我烦恼。

使用 -y 在命令行中传递产品版本也很简单（奇怪的是 - 这不会更改 .ism 文件）

我认为您不能在发布位置指定诸如 [ProductVersion] 之类的属性，我也无法创建路径变量并将其用作发布位置。

# bash - 如何遍历目录结构查找文件

> ID：15098618
> 
> 赞同：0
> 
> 时间：2013-02-26T20:26:53.620
> 
> 标签：bash, file, directory, find, traversal

我正在尝试创建一个脚本，它将遍历我的音乐目录并最终将超过 192bps 的任何内容转换为 192bps。到目前为止，我有以下...

```
#!/bin/bash

music="/backup/MUSIC/AC-DC/Back In Black"

for file in `find "$music" -type  f -name '*.mp3'`; do
        echo "$file" | cut -d/ -f6-
done 
```

但我得到了奇怪的输出，比如每行 1 个单词，甚至不是整个文件名。我不明白 cut -d/ -f6- 是什么...

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:43:55.550

尝试使用`while`循环：

```
#!/bin/bash

music="/backup/MUSIC/AC-DC/Back In Black"

find "$music" -type f -name "*.mp3" | while read file; do
  echo "$file"
done 
```

# python - 更改像素值

> ID：15098619
> 
> 赞同：0
> 
> 时间：2013-02-26T20:26:59.333
> 
> 标签：python, opencv

我有一张我使用打开的图像，我`LoadImageM`使用 put 获取像素数据`Get2D`我似乎找不到任何内置函数来更改像素值。我尝试使用从`Rectangle`to的多种东西，`CV_RGB`但没有成功的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:57:48.180

考虑查看新版本的 opencv 库。

你导入它

```
import cv2 
```

它直接返回numpy数组。

例如，如果你这样做

```
image_array = cv2.imread('image.png') 
```

那么您可以通过简单的操作来访问和更改像素值`image_array`：

```
image_array[0,0] = 100 
```

将左上角像素的值设置为 100。

根据您的安装，您可能已经拥有`cv2`绑定，因此请检查是否`import cv2`有效。

否则只需安装`opencv`，`numpy`你就可以开始了。

# c++ - sin回归伪代码

> ID：15098621
> 
> 赞同：0
> 
> 时间：2013-02-26T20:27:11.550
> 
> 标签：c++, struct, analytics, regression, pseudocode

我想知道给定一个包含整数 x 和 y 结构的数组，Sin 回归的伪代码是什么？我已经搜索了一段时间和谷歌，到目前为止我还没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:14:45.483

这个网站可以帮助你。他们讨论了 TI 计算器如何执行正弦回归。

[用于计算正弦回归的算法](http://epsstore.ti.com/OA_HTML/csksxvm.jsp?nSetNumber=11576)

# c++ - Visual Studio 2012“智能”缩进自定义

> ID：15098626
> 
> 赞同：7
> 
> 时间：2013-02-26T20:27:25.190
> 
> 标签：c++, visual-studio, visual-studio-2012

我正在使用 Visual Studio 2012 并为 C++ 文件打开了智能缩进¹。² 我想自定义智能缩进的行为，以便它格式化我输入的代码，使其符合我公司的编码风格。

如何自定义智能缩进行为的所有细节？

例如，当我输入此代码时，智能缩进将其格式化为：

```
#include <cstdlib>
#include <string>
using namespace std;

struct Foo
{
    const string mA;
    const int mB;
    const string mC;

    Foo(const string& a,
        const int b,
        const string& c)
        :
    mA(a),
        mB(b),
        mC(c)
        {
        }
};

int main()
{
} 
```

这大部分是我想要的，除了引入初始化列表的冒号、初始化列表中的第一项以及构造函数主体的缩进级别。我希望这些格式像这样，并且我希望 Visual Studio 自动为我执行此操作：

```
Foo(const string& a,
    const int b,
    const string& c)
:
    mA(a),
    mB(b),
    mC(c)
{
} 
```

如何自定义智能缩进的行为？我宁愿不使用任何外部工具，如 Visual Assist X。

* * *

¹：通过**工具**>**选项**>**文本编辑器**> **C/C++** >**选项卡**>**缩进**

²：我也将制表位设置为 4，插入空格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T03:10:08.667

查看 MS Visual Studio SDK，可在此处找到：

[http://msdn.microsoft.com/en-us/library/bb139565.aspx](http://msdn.microsoft.com/en-us/library/bb139565.aspx)

特别是您要覆盖 VewFilter 类中的 HandleSmartIndent ：

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.viewfilter.handlesmartindent.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.package.viewfilter.handlesmartindent.aspx)

每当您在编辑器中按 Enter 键时，都会调用它。不幸的是，这并不像在配置对话框中更改一些规则那么简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T15:15:29.367

一个丑陋的解决方案是这样的：

```
Foo(const string& a,
    const int b,
    const string& c)

    : mA(a)
    , mB(b)
    , mC(c)
{
} 
```

出于某种可恶的原因，这是我见过的让 VS 正确缩进该混乱的唯一方法。

# ios - 除模态视图控制器外，所有视图控制器中的纵向

> ID：15098632
> 
> 赞同：6
> 
> 时间：2013-02-26T20:27:48.280
> 
> 标签：ios, objective-c, uiviewcontroller, uiinterfaceorientation

我正在展示带有代码的模态视图：

```
 [self presentViewController:movieViewController animated:YES completion:^{
     // completed
 }]; 
```

在movieViewController中，控制器被解除：

```
[self dismissViewControllerAnimated:YES completion:^{
    // back to previous view controller
}]; 
```

目前，我所有的视图控制器都可以纵向和两个横向查看。

除了模态视图控制器，我如何将所有视图控制器限制为纵向？所以模态视图控制器可以在三个方向上看到，其他一切都在一个方向上。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-27T01:02:24.207

在 appDelegate 中：

```
- (UIInterfaceOrientationMask)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    } 
```

带有方法的特殊 UINavigationController 子类（如果您使用导航控制器）：

```
- (NSUInteger)supportedInterfaceOrientations {
    if (self.topViewController.presentedViewController) {
        return self.topViewController.presentedViewController.supportedInterfaceOrientations;
    }
    return self.topViewController.supportedInterfaceOrientations;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return self.topViewController.preferredInterfaceOrientationForPresentation;
} 
```

每个视图控制器都应该返回它自己支持的方向和首选的呈现方向：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationPortrait;
} 
```

我的应用程序以纵向模式工作，但视频播放器以模态 vc 的形式打开：

```
 - (NSUInteger)supportedInterfaceOrientations {
     return UIInterfaceOrientationMaskAllButUpsideDown;
 }

 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
     return UIInterfaceOrientationLandscapeLeft;
 } 
```

它对我来说很完美，希望对我有帮助！

# python - 从列表中获取所有最小元素及其索引

> ID：15098642
> 
> 赞同：8
> 
> 时间：2013-02-26T20:28:22.253
> 
> 标签：python, list

我有一个列表，其中包含多次出现的最小元素，例如

```
a = [1,2,1,1,4,5,6] 
```

我希望 Python 返回列表中存在的元素`1`和所有索引。`1`我尝试使用

```
min_index, min_value = min(enumerate(a), key=operator.itemgetter(1)) 
```

它只给出`1`首先出现的索引。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T20:32:38.810

我会这样做：

```
minimum = min(a)
indices = [i for i, v in enumerate(a) if v == minimum] 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-26T20:31:58.853

确定最小元素，然后将其与列表中的其他元素进行检查。

```
def locate_min(a):
    smallest = min(a)
    return smallest, [index for index, element in enumerate(a) 
                      if smallest == element] 
```

这将返回一个元组 (min_element, [location, location, ...])。如果我理解正确，这就是我认为你想要的。对于您的示例：

```
>>> locate_min([1, 2, 1, 1, 4, 5, 6])
(1, [0, 2, 3]) 
```

此示例使用列表推导。如果你不熟悉这个，它大致相当于下面的 for-loop 版本。（使用第一个版本，这只是为了帮助您理解它是如何工作的）

```
def locate_min(a):
    min_indicies = []
    smallest = min(a)
    for index, element in enumerate(a):
            if smallest == element: # check if this element is the minimum_value
                    min_indicies.append(index) # add the index to the list if it is

    return smallest, min_indicies 
```

# python - 从一个目录复制内容并粘贴到另一个目录中，IOError: [Errno 13] python

> ID：15098643
> 
> 赞同：0
> 
> 时间：2013-02-26T20:28:23.010
> 
> 标签：python, copy, shutil

我已经在论坛中查看了与此类似的几个帖子，但出现了相同的错误，但仍然无法修复它。我收到 IOError: [Errno 13] Permission denied: 'C:/..../.' 使用 shutil.copy() 时。这是代码：

```
import subprocess, os, shutil

for i in range(1,3):
    path = 'C:/Users/TEvans/Desktop/Testing/slope%d' % i 
    if not os.path.exists(path): 
        os.makedirs(path)
    os.chdir(path)
    for j in range(1,4):
        path1 = 'C:/Users/TEvans/Desktop/Testing/slope%d/r%d' % (i, j)
        if not os.path.exists(path1): 
            os.makedirs(path1)
        src = 'C:/Users/TEvans/Desktop/Testing/PP%d/S%d' % (i, j)
        dst = 'C:/Users/TEvans/Desktop/Testing/slope%d/r%d' % (i, j)
        shutil.copy(src, dst)

Traceback (most recent call last):
  File "sutra.py", line 14, in <module>
    shutil.copy(src, dst)
  File "C:\Python27\lib\shutil.py", line 117, in copy
    copyfile(src, dst)
  File "C:\Python27\lib\shutil.py", line 82, in copyfile
    with open(src, 'rb') as fsrc:
IOError: [Errno 13] Permission denied: 'C:/Users/TEvans/Desktop/Testing/PP1/S1' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:07:20.413

shutil.copy 复制一个文件。您希望 shutil.copytree 递归地复制整个目录：

```
import subprocess, os, shutil

for i in range(1,3):
    path = 'C:/Users/TEvans/Desktop/Testing/slope%d' % i 
    if not os.path.exists(path): 
        os.makedirs(path)
    os.chdir(path)
    for j in range(1,4):
        src = 'C:/Users/TEvans/Desktop/Testing/PP%d/S%d' % (i, j)
        dst = 'C:/Users/TEvans/Desktop/Testing/slope%d/r%d' % (i, j)
        shutil.copytree(src, dst) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:14:54.433

shutil.copy 用于复制文件而不是目录。它需要一个文件作为第一个参数和目录或文件名作为第二个参数。如果第二个参数是文件名，它将复制并重命名文件。

对于复制目录，最好的方法是使用`distutils's dir_util`库包。

```
>>> import distutils.dir_util
>>>
>>> dir(distutils.dir_util)
['DistutilsFileError', 'DistutilsInternalError', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '__revision__', '_build_cmdtuple', '_path_created', 'copy_tree', 'create_tree', 'ensure_relative', 'errno', 'log', 'mkpath', 'os', 'remove_tree']
>>> 
```

copy_tree 函数将帮助您复制整个目录。

请参考以下定义。

```
>>> help(distutils.dir_util.copy_tree)
Help on function copy_tree in module distutils.dir_util:

copy_tree(src, dst, preserve_mode=1, preserve_times=1, preserve_symlinks=0, upda
te=0, verbose=1, dry_run=0)
    Copy an entire directory tree 'src' to a new location 'dst'.

    Both 'src' and 'dst' must be directory names.  If 'src' is not a
    directory, raise DistutilsFileError.  If 'dst' does not exist, it is
    created with 'mkpath()'.  The end result of the copy is that every
    file in 'src' is copied to 'dst', and directories under 'src' are
    recursively copied to 'dst'.  Return the list of files that were
    copied or might have been copied, using their output name.  The
    return value is unaffected by 'update' or 'dry_run': it is simply
    the list of all files under 'src', with the names changed to be
    under 'dst'.

    'preserve_mode' and 'preserve_times' are the same as for
    'copy_file'; note that they only apply to regular files, not to
    directories.  If 'preserve_symlinks' is true, symlinks will be
    copied as symlinks (on platforms that support them!); otherwise
    (the default), the destination of the symlink will be copied.
    'update' and 'verbose' are the same as for 'copy_file'.

>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T14:13:13.347

我猜您可能在 Windows Vista 或更高版本上的 Windows 机器上；看到这是 Errno 13，我很确定您没有以管理员身份运行脚本。尝试以管理员身份运行脚本，或者如果您通过命令提示符执行脚本，请尝试以管理员身份运行 cmd.exe 然后执行它。

尝试使用反斜杠，因为您在 Windows 中，并且在使用反斜杠时尝试使用原始字符串，即

```
path = r'C:\Users\TEvans\Desktop\Testing\slope%d' 
```

# java - Netbeans API：如何保存文件或当前项目中的所有文件？

> ID：15098644
> 
> 赞同：3
> 
> 时间：2013-02-26T20:28:23.403
> 
> 标签：java, netbeans, save, netbeans-platform, netbeans-plugins

我正在使用提供的 API 为 Netbeans 开发一个插件模块，以便为新的编程语言提供支持。

我在上下文菜单中创建了一个操作，使用文件类型中定义的 MIME 类型。

我正在寻找一种方法来保存正在选择的文件。最好只有当它改变时。

是否可以保存项目所有文件中的所有更改？

我的部分来自 Action Listener 类的代码：

```
 @Override
    public void actionPerformed(ActionEvent ev) {
        FileObject f = context.getPrimaryFile();
        String path = f.getPath();     
        String name = f.getName();

        //Save file here

        ExecutionDescriptor descriptor = new ExecutionDescriptor()
                .controllable(true)
                .frontWindow(true)
                .preExecution(before)
                .postExecution(after);
        ExecutionService exeService = ExecutionService.newService(
                new ProcessLaunch(cmdLine),
                descriptor, "Run " + name);
        Future<Integer> exitCode = exeService.run();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T09:52:28.933

`LifecycleManager.getDefault().saveAll();`

这将保存项目中的所有对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-30T19:30:51.043

尝试这个：

```
FileObject f = ...
DataObject data = DataObject.find(f);
EditorCookie cookie = data.getLookup().lookup(EditorCookie.class);
cookie.saveDocument(); 
```

# sql-server - 将存储为 NUMERIC 的日期转换为 DATETIME

> ID：15098651
> 
> 赞同：3
> 
> 时间：2013-02-26T20:29:09.077
> 
> 标签：sql-server, tsql, datetime

我目前正在处理一个需要计算两个不同日期之间天数差异的查询。我以前对我们的`DATE`列有问题，因为它们都被存储为`numeric`列，这完全是一个痛苦。

我尝试`CONVERT`像过去一样使用来尝试`DATETIME`构建字符串的不同部分，但我没有任何运气。

注释行`--convert(datetime,)`是我遇到问题的地方。基本上，我需要将`PO_DATE`和转换`LINE_DOCK_DATE`为可用的格式，这样我就可以计算出两者之间的差异天数。

```
USE BWDW

GO

SELECT 

  [ITEM_NO]
  ,[ITEM_DESC]
  ,[HEADER_DUE_DATE]
  ,[BWDW].[dbo].[DS_tblDimWhs].WHS_SHORT_NAME AS 'Warehouse'
  ,[BWDW].[dbo].[DS_tblFactPODtl].[PO_NO] AS 'PO NUMBER'
  ,[BWDW].[dbo].[DS_tblFactPODtl].[PO_DATE] AS 'Start'
  ,[BWDW].[dbo].[DS_tblFactPODtl].[PO_STATUS] AS 'Status'
  ,[BWDW].[dbo].[DS_tblFactPODtl].[LINE_DOCK_DATE] AS 'End'
  --,(SELECT CONVERT(DATETIME, CONVERT(CHAR(8), [BWDW].[dbo].[DS_tblFactPODtl].[PO_DATE])) FROM dbo.DS_tblFactPODtl)

FROM [BWDW].[dbo].[DS_tblFactPODtl] 
INNER JOIN [BWDW].[dbo].[DS_tblDimWhs] ON [BWDW].[dbo].[DS_tblFactPODtl].WAREHOUSE = [BWDW].[dbo].[DS_tblDimWhs].WAREHOUSE
INNER JOIN [BWDW].[dbo].[DS_tblFactPO] ON [BWDW].[dbo].[DS_tblFactPODtl].PO_NO = [BWDW].    [dbo].[DS_tblFactPO].PO_NO
WHERE [BWDW].[dbo].[DS_tblFactPODtl].[PO_STATUS] = 'Closed'
AND [BWDW].[dbo].[DS_tblFactPODtl].[LINE_DOCK_DATE] <> 0 
```

我有一个从我以前工作的项目中保存的片段，该片段只需要显示从今天到另一年的结果。里面有一堆 CAST 和 CONVERTS，但我尝试了同样的方法，但没有成功。

从长远来看，我想为每个数据库表添加一列以包含`datetime`将来可用的适当列……但这是另一回事。我在 stackoverflow 上阅读了很多关于转换为 NUMERIC 等的帖子，但没有将 NUMERIC 转换为`DATETIME`.

示例数据：

```
Start    | End      | Difference
--------------------------------
20110501 | 20111019 | 171
20120109 | 20120116 | 7
20120404 | 20120911 | 160 
```

只是想计算差异..

每个亚伦修改：

```
SELECT
  FPODtl.[ITEM_NO] AS [Item]
  ,FPODtl.[ITEM_DESC] AS [Description] 
  ,D.WHS_SHORT_NAME AS [Warehouse]
  ,FPODtl.[PO_NO] AS [PO NUMBER]
  ,FPODtl.[PO_DATE] AS [Start]
  ,FPODtl.[PO_STATUS] AS [Status]
  ,FPODtl.[LINE_DOCK_DATE] AS [End]
  ,DATEDIFF
  (
    DAY,
    CASE WHEN ISDATE(CONVERT(CHAR(8), FPODtl.PO_DATE)) = 1
      THEN CONVERT(DATETIME, CONVERT(CHAR(8), FPODtl.PO_DATE)) END,
    CASE WHEN ISDATE(CONVERT(CHAR(8), FPODtl.[LINE_DOCK_DATE])) = 1
      THEN CONVERT(DATETIME, CONVERT(CHAR(8), FPODtl.[LINE_DOCK_DATE])) END
  )
    FROM [dbo].[DS_tblFactPODtl] AS FPODtl 
    INNER JOIN [dbo].[DS_tblDimWhs] AS D 
  ON FPODtl.WAREHOUSE = D.WAREHOUSE
    INNER JOIN [dbo].[DS_tblFactPO] AS FPO 
  ON FPODtl.PO_NO = FPO.PO_NO
    WHERE FPODtl.[PO_STATUS] = 'Closed'
    AND FPODtl.[LINE_DOCK_DATE] <> 0; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T22:13:04.413

```
DECLARE @x NUMERIC(10,0);

SET @x = 20110501;

SELECT CONVERT(DATETIME, CONVERT(CHAR(8), @x)); 
```

结果：

```
2011-05-01 00:00:00.000 
```

比较两个：

```
DECLARE @x NUMERIC(10,0), @y NUMERIC(10,0);

SELECT @x = 20110501, @y = 20111019;

SELECT DATEDIFF
(
  DAY, 
  CONVERT(DATETIME, CONVERT(CHAR(8), @x)),
  CONVERT(DATETIME, CONVERT(CHAR(8), @y))
); 
```

结果：

```
171 
```

更重要的是，修好桌子。停止将日期存储为数字。将它们存储为日期。如果您在此转换中遇到错误，那是因为您糟糕的数据选择导致错误数据进入表中。您可以通过编写旧版本来解决这个问题 - 可能`TRY_CONVERT()`-

```
SELECT DATEDIFF
(
  DAY, 
  CASE WHEN ISDATE(col1)=1 THEN CONVERT(DATETIME, col1) END,
  CASE WHEN ISDATE(col2)=1 THEN CONVERT(DATETIME, col2) END
)
FROM 
( 
  SELECT 
    col1 = CONVERT(CHAR(8), col1), 
    col2 = CONVERT(CHAR(8), col2)
  FROM dbo.table
) AS x; 
```

这将为任一列中有垃圾的任何行产生空值。这是对原始查询的修改：

```
SELECT
  [ITEM_NO] -- what table does this come from?
  ,[ITEM_DESC] -- what table does this come from?
  ,[HEADER_DUE_DATE] -- what table does this come from?
  ,D.WHS_SHORT_NAME AS [Warehouse] -- don't use single quotes for aliases!
  ,FPODtl.[PO_NO] AS [PO NUMBER]
  ,FPODtl.[PO_DATE] AS [Start]
  ,FPODtl.[PO_STATUS] AS [Status]
  ,FPODtl.[LINE_DOCK_DATE] AS [End]
  ,DATEDIFF
  (
    DAY,
    CASE WHEN ISDATE(CONVERT(CHAR(8), FPODtl.PO_DATE)) = 1
      THEN CONVERT(DATETIME, CONVERT(CHAR(8), FPODtl.PO_DATE)) END,
    CASE WHEN ISDATE(CONVERT(CHAR(8), FPODtl.[LINE_DOCK_DATE])) = 1
      THEN CONVERT(DATETIME, CONVERT(CHAR(8), FPODtl.[LINE_DOCK_DATE])) END
  )
FROM [dbo].[DS_tblFactPODtl] AS FPODtl 
INNER JOIN [dbo].[DS_tblDimWhs] AS D 
  ON FPODtl.WAREHOUSE = D.WAREHOUSE
INNER JOIN [dbo].[DS_tblFactPO] AS FPO 
  ON FPODtl.PO_NO = FPO.PO_NO
WHERE FPODtl.[PO_STATUS] = 'Closed'
AND FPODtl.[LINE_DOCK_DATE] <> 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:50:33.020

如果存储为数字的日期是这样的：`20130226`对于今天，那么转换为`DATE`or的更简单方法`DATETIME`是：

```
SELECT CONVERT(DATETIME,CONVERT(VARCHAR(8),NumberDate),112) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:06:55.660

这是从零件创建日期的快速公式：

```
DateAdd( Month, (( @Year - 1900 ) * 12 ) + @Month - 1, @Day - 1 ) 
```

只需使用原始字段中的子字符串来提取 `@Year`,`@Month`和`@Day`. 例如，如果你有一个类似`19531231`1953 年 12 月 31 日的数字，你可以这样做：

```
DateAdd( Month, (( SubString(Cast(DateField As Varchar(8)), 1, 4) - 1900 ) * 12 ) + 
                   SubString(Cast(DateField As Varchar(8)), 5, 2) - 1, 
                   SubString(Cast(DateField As Varchar(8)), 7, 2) - 1 ) 
```

# git - netbeans 同步 ftp 和 git 分支开关

> ID：15098652
> 
> 赞同：1
> 
> 时间：2013-02-26T20:29:12.380
> 
> 标签：git, netbeans, synchronization

我正在使用 Netbeans 在 ftp 网站上远程工作，而我在本地使用 git。每次\我保存修改它都会上传到网站。

当我尝试切换分支时出现问题。Netbeans 看到修改并开始同步代码。这意味着它会再次上传整个站点。

如果那个网站有时事通讯、wordpress 博客，你可以想象我陷入的混乱以及在我进行分支切换后我必须等待多长时间。

为了更干净、更聪明地工作，你有什么建议吗？

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:10:12.440

您应该在主分支上使用 git 挂钩和 git ftp 同步器，而不是 netbeans 内置解决方案...

您可以通过这种方式检查您是否正在提交 master ：

```
$(git symbolic-ref HEAD 2>/dev/null) == "refs/heads/master" 
```

有几个 ftp 同步器：

*   [https://github.com/BeezyT/git-ftp-sync](https://github.com/BeezyT/git-ftp-sync)
*   [https://github.com/ezyang/git-ftp](https://github.com/ezyang/git-ftp)
*   ...

也许您可以在 netbeans 中配置同步以执行相同的分支检查，但我不使用 netbeans，所以我无能为力。通过同步检查手册和配置选项。

# java - 在 Jlist 项中添加 ToolTipText

> ID：15098656
> 
> 赞同：1
> 
> 时间：2013-02-26T20:29:19.507
> 
> 标签：java, tooltip, jlist

```
public static void populateJList(JList list) {
        ArrayList<String> contents= DataAccess.getContents();
        DefaultListModel listModel = new DefaultListModel();
        for (String string : contents) {
            listModel.addElement(string);
        }
        preset.setModel(listModel);
} 
```

我有这个填充我的 JList 的方法，有没有办法可以添加`toolTipText`JList 中的每个项目？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-11T21:42:54.510

如果您不想覆盖`JList`，可以使用 a`MouseMotionAdapter`更改工具提示文本

```
 jList.addMouseMotionListener(new MouseMotionAdapter() {
        @Override
        public void mouseMoved(MouseEvent e) {
            JList l = (JList)e.getSource();
            ListModel m = l.getModel();
            int index = l.locationToIndex(e.getPoint());
            if( index>-1 ) {
                l.setToolTipText(m.getElementAt(index).toString());
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:41:59.810

1.  您可以覆盖 JList 的 getToolTipText(..) 方法。

2.  我相信您也可以使用调用 setToolTipText(...) 方法的自定义渲染器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T16:10:03.543

对于 JDK >= 1.6，需要稍微不同的构造：

```
 loggingList.addMouseMotionListener(new MouseMotionListener() {

        @Override
        public void mouseDragged(MouseEvent e) {
            // no-op
        }

        @Override
        public void mouseMoved(MouseEvent e) {
            JList l = (JList) e.getSource();
            ListModel m = l.getModel();
            int index = l.locationToIndex(e.getPoint());
            if (index > -1) {
                l.setToolTipText(m.getElementAt(index).toString());
            }
        }
    }); 
```

# android - 将资源声音文件读入字节数组

> ID：15098657
> 
> 赞同：7
> 
> 时间：2013-02-26T20:29:22.243
> 
> 标签：android, android-resources

我有`cheerapp.wav`或`cheerapp.mp3`或其他格式。

```
InputStream in = context.getResources().openRawResource(R.raw.cheerapp);       
BufferedInputStream bis = new BufferedInputStream(in, 8000);
// Create a DataInputStream to read the audio data from the saved file
DataInputStream dis = new DataInputStream(bis);

byte[] music = null;
music = new byte[??];
int i = 0; // Read the file into the "music" array
while (dis.available() > 0) {
    // dis.read(music[i]); // This assignment does not reverse the order
    music[i]=dis.readByte();
    i++;
}

dis.close(); 
```

对于`music`从`DataInputStream`. 我不知道要分配的长度。

这是来自资源的原始文件而不是文件，因此我不知道那个东西的大小。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T20:42:58.590

如您所见，您确实有字节数组长度：

```
 InputStream inStream = context.getResources().openRawResource(R.raw.cheerapp);
 byte[] music = new byte[inStream.available()]; 
```

然后您可以轻松地将整个 Stream 读入字节数组。

当然，我建议您检查大小并在需要时使用具有较小 byte[] 缓冲区的 ByteArrayOutputStream：

```
public static byte[] convertStreamToByteArray(InputStream is) throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    byte[] buff = new byte[10240];
    int i = Integer.MAX_VALUE;
    while ((i = is.read(buff, 0, buff.length)) > 0) {
        baos.write(buff, 0, i);
    }

    return baos.toByteArray(); // be sure to close InputStream in calling function
} 
```

如果您要进行大量 IO 操作，我建议您使用[org.apache.commons.io.IOUtils](http://commons.apache.org/proper/commons-io/)。这样你就不需要太担心你的 IO 实现的质量，一旦你将 JAR 导入到你的项目中，你就可以这样做：

```
byte[] payload = IOUtils.toByteArray(context.getResources().openRawResource(R.raw.cheerapp)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-26T09:45:16.840

希望它会有所帮助。

创建 SD 卡路径：

```
String outputFile = 
    Environment.getExternalStorageDirectory().getAbsolutePath() + "/recording.3gp"; 
```

转换为文件，必须调用字节数组方法：

```
byte[] soundBytes;

try {
    InputStream inputStream = 
        getContentResolver().openInputStream(Uri.fromFile(new File(outputFile)));

    soundBytes = new byte[inputStream.available()];
    soundBytes = toByteArray(inputStream);

    Toast.makeText(this, "Recordin Finished"+ " " + soundBytes, Toast.LENGTH_LONG).show();
} catch(Exception e) {
    e.printStackTrace();
} 
```

方法：

```
public byte[] toByteArray(InputStream in) throws IOException {
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    int read = 0;
    byte[] buffer = new byte[1024];
    while (read != -1) {
        read = in.read(buffer);
        if (read != -1)
            out.write(buffer,0,read);
    }
    out.close();
    return out.toByteArray();
} 
```

# ssrs-2008 - 如何从子报表中查询 Web 服务 (XML)？

> ID：15098659
> 
> 赞同：4
> 
> 时间：2013-02-26T20:29:26.277
> 
> 标签：ssrs-2008, reporting-services

如果已经有人问过这个问题，我深表歉意，但我的搜索运气不佳。我也尝试过 MSDN 论坛，但很明显我需要大炮来解决这个问题；）

我正在使用 VS2008 (SSRS 2008 R2) 创建一系列子报表。每个子报表从 WCF Web 服务查询 1 个或多个 Web 方法。

当我将 rdl 作为独立报告运行时，一切都会正确呈现。当我将该 rdl 作为子报告运行时，我收到一条错误消息，建议我检查日志（详细信息和以下重现的步骤。）

**简单测试（无子报告）：**

使用[Reporting Services：使用 XML 和 Web 服务数据源](http://technet.microsoft.com/en-US/library/aa964129%28v=SQL.90%29.aspx)一文中的说明，我能够为每个 Web 方法创建必要的共享数据集。

我利用表的共享数据集成功创建了一个报告 (SubTest.rdl)。数据集的底层 Web 方法不包含参数（尽量保持简单）。

SubTest.rdl 正确呈现！到目前为止，一切都很好。

**测试 2：主/子报表结构**

1.  创建了父/主报告 (MasterTest.rdl)
2.  添加了一个 Subreport 报告项，并指定了“SubTest.rdl”
    注意：没有指定报告参数，因为 SubTest 没有定义任何参数。

在呈现 MasterTest.rdl 报告期间收到以下错误：

*警告 1 [rsErrorExecutingSubreport] 执行子报告“Subreport1”（实例：5iS0）时出错：子报告“Subreport1”的数据检索失败，位于：/SubTest。请检查日志文件以获取更多信息。*

**附加测试：**

为了确保我的子报表在 MasterTest.rdl 中正确定义，我更改了 SubTest.rdl。在 SubTest 中，我从“SubTest.rdl”中删除了 DataSource、DataSet 和 Table，并插入了一个用“Output From Subreport”字样填充的 TextBox。这在主报告中正确呈现，表明该问题与我的 Web 服务数据源/数据集特别相关。

**问题： ：（**

*   有没有办法完成这个任务？

*   如果这是不可能的，任何人都可以建议一种解决方法来为子报表提供 Web 服务 xml 吗？

*   另外，根据错误消息：知道在哪里可以找到此日志吗？（因为这是在 Visual Studio 中运行的，所以检查我本地机器上的 SSRS 日志文件夹没有帮助，在启用日志记录的情况下运行 VS 也没有帮助。）

**我无法开始工作的解决方法：** 我尝试按照链接文章中的说明将 XML 作为参数传递给子报表，但是

*   master 将 xml 作为标量字符串传递。因为我查询的是 Web 服务，而不是使用每行包含一个保存 XML 的 col 的数据集，所以我只有结果数据集可以使用。基本上我需要将数据集转换为标量。

*   我很难按照说明进行操作（即使我可以解决问题 1，我什至不确定我是否正确定义了数据集和参数——当数据直到运行时才知道时如何获取字段？）

感谢您提供的任何帮助。这几天一直在发疯！

# ios - ipad 上的操作表

> ID：15098660
> 
> 赞同：3
> 
> 时间：2013-02-26T20:29:41.363
> 
> 标签：ios, ipad, uiactionsheet, alignment

此代码在 iPhone 上运行良好，但在 iPad 上，操作表显示在屏幕中间。不在触发按钮所在的角落。也没有显示取消按钮。

此外，该应用程序仅处于横向模式。相机触发按钮位于屏幕的右上角。

```
mediaPicker = [[UIImagePickerController alloc] init];
mediaPicker.allowsEditing = YES;
if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                             delegate:self
                                                    cancelButtonTitle:@"Cancel"
                                               destructiveButtonTitle:nil
                                                    otherButtonTitles:@"Take photo", @"Choose Existing", nil];
    //[actionSheet showInView:self.view];
    [actionSheet showInView:self.navigationController.view];
}
// If device doesn't has a camera, Only "Choose Existing" and "Cancel" options will show up.
else {
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil
                                                             delegate:self
                                                    cancelButtonTitle:@"Cancel"
                                               destructiveButtonTitle:nil
                                                    otherButtonTitles:@"Choose Existing", nil];
    [actionSheet showInView:self.view];
} 
```

我需要操作表来显示按钮的位置。我该怎么办。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T20:35:20.630

IPAD 有一些关于`actionsheets`取消按钮的特殊规则，这通常取决于您在哪里`actionsheets`显示

您可以显示来自`UIToolbar`、`UITabBar`、`UIBarButtonItem`或的操作表`UIView`。在确定如何呈现操作表时，此类会考虑起始视图和当前平台。对于在 iPhone 和 iPod touch 设备上运行的应用程序，操作表通常从拥有视图的窗口底部向上滑动。**对于在 iPad 设备上运行的应用程序，操作表通常显示在以适当方式锚定到起始视图的弹出框中**。在弹出框之外点击会自动关闭操作表，在任何自定义按钮中点击也是如此。您也可以通过编程方式将其关闭。

在 iPad 上显示操作表时，有时您不应该包含取消按钮。如果您只显示操作表，系统会在弹出框内显示操作表而不使用动画。因为在弹出框外点击会关闭操作表而不选择项目，这会导致默认方式取消工作表。因此，包括取消按钮只会引起混乱。但是，如果您有一个现有的弹出框并且正在使用动画在其他内容之上显示一个操作表，那么取消按钮仍然是合适的

而不是使用`showInView`这些方法之一的尝试使用

```
[actionSheet showFromBarButtonItem:barItem animated:YES]; 
```

解释在[这里](http://crazyviraj.blogspot.com/2010/05/showing-cancel-button-in.html)和[这里](https://stackoverflow.com/questions/5448987/ipads-uiactionsheet-showing-multiple-times)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:41:52.117

在 iPad 上，不要使用`showInView:`. 相反，请使用其他更具体的方法之一来显示操作表，例如`showFromBarButtonItem:animated:`.

如 nsgulliver 的回答中所述，操作表在 iPad 上不显示“取消”按钮是正常的。用户需要做的就是在操作表之外点击。这与取消相同。

# c# - MVCMailer SendAsync() 因 Amazon SES 而失败

> ID：15098667
> 
> 赞同：3
> 
> 时间：2013-02-26T20:29:58.633
> 
> 标签：c#, asp.net-mvc, amazon-ses, mvcmailer

如果我将 Send() 与 MVCMailer 一起使用，我的 SES 工作正常，但 SendAsync() 显示下面的错误消息，有人知道解决这个问题的方法吗？谢谢！

```
System.Net.Mail.SmtpException: Failure sending mail. ---> System.InvalidOperationException: An asynchronous operation cannot be started at this time. Asynchronous operations may only be started within an asynchronous handler or module or during certain events in the Page lifecycle. If this exception occurred while executing a Page, ensure that the Page is marked <%@ Page Async="true" %>.
   at System.Web.AspNetSynchronizationContext.OperationStarted()
   at System.ComponentModel.AsyncOperation.CreateOperation(Object userSuppliedState, SynchronizationContext syncContext)
   at System.Net.Mail.SmtpClient.SendAsync(MailMessage message, Object userToken)
   --- End of inner exception stack trace ---
   at System.Net.Mail.SmtpClient.SendAsync(MailMessage message, Object userToken)
   at Mvc.Mailer.SmtpClientWrapper.SendAsync(MailMessage mailMessage, Object userState)
   at Mvc.Mailer.MailMessageExtensions.SendAsync(MailMessage message, Object userState, ISmtpClient smtpClient)
   at MVCWebsite.Helpers.AccountHelper.RegisterNewUser(BaseDBContext db, AccountViewModelForReg VM, Boolean isCaptchaValid, Boolean modelValidity) in c:\Users\William-Business\Desktop\TWB\TWB Central\Projects\AwesomeSauce\AwesomeSauce\Helpers\AccountHelper.cs:line 316
   at MVCWebsite.Controllers.AccountController.Register(AccountViewModelForReg VM, Boolean captchaValid) in c:\Users\William-Business\Desktop\TWB\TWB Central\Projects\AwesomeSauce\AwesomeSauce\Controllers\AccountController.cs:line 308
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T18:06:09.310

此错误是设计使然。您可以全局关闭它：

```
<appSettings>
  <add key="aspnet:AllowAsyncDuringSyncStages" value="false" />
</appSettings> 
```

参考[http://msdn.microsoft.com/en-us/library/hh975440.aspx](http://msdn.microsoft.com/en-us/library/hh975440.aspx)

要考虑的其他事情是使用任务在后台执行异步，将其与 ASP.Net 使用的调度程序分离。使用此方法，您无需更改 appSetting。

```
using Mvc.Mailer;
...
public ActionResult SendWelcomeMessage()
{
    Task.Factory.StartNew(() => UserMailer.Welcome().SendAsync());
    return RedirectToAction("Index");
} 
```

* * *

编辑

启用 AllowAsyncDuringSyncStages 或使用任务并行库都有潜在的缺点。使用 AsyncController 没有任何缺点。感谢@StephenCleary 挑战我的回答。

```
public class HomeController : AsyncController
{
  public void SendMessageAsync()
  {
    var client = new SmtpClientWrapper();
    client.SendCompleted += (sender, args) => 
      AsyncManager.OutstandingOperations.Decrement();
    AsyncManager.OutstandingOperations.Increment();
    new UserMailer().Welcome().SendAsync("", client);
  }

  public ActionResult SendMessageCompleted()
  {
    return View();
  }
} 
```

# c# - 使用 C++/MFC 和 C# 中的插件扩展 C++/MFC 应用程序

> ID：15098668
> 
> 赞同：3
> 
> 时间：2013-02-26T20:29:58.733
> 
> 标签：c#, c++, plugins, mfc, c++-cli

我想知道如何最好地开发一个插件框架，您可以在其中使用 C++/MFC 和 C# 开发插件。

主机程序是用原生 C++/MFC 开发的现有程序。为了扩展这个程序的功能，到目前为止，我们已经在 C++/MFC 和 C# 中开发了单独的程序，它们作为单独的应用程序或 Windows 服务运行。这些程序现在通过文件与主机应用程序通信。这显然是一种相当笨拙的方法，因此我们希望将它们置于一个通用的插件框架下。

每个程序还具有单独的设置管理。因此，我们希望每个插件都扩展主机应用程序中的设置窗口，以便可以在一个地方管理所有设置。我们怎样才能以一种灵活而简单的方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:28:44.167

> (...) 因此，我们希望将它们置于一个通用的插件框架下。(...)

您可以通过在类型库中创建一组 COM 接口来做到这一点，您可以将其包装在 C++/MFC dll 项目中。然后，您可以从 C++ 或 C# 导入此类型库并创建实现预定义接口的新 COM 类。这些方法的两个缺点是： 1- 您的主应用程序需要以某种方式知道类 ID 以创建 COM 类的实例。2-您的插件需要在系统上注册，或者您需要提供[清单文件](https://stackoverflow.com/questions/465882/generate-manifest-files-for-registration-free-com)。

> (...) 因此，我们希望每个插件都在主机应用程序中展开设置窗口，以便可以在一个地方管理所有设置。(...)

这个有点棘手，但是您可以尝试为每个插件设置一个选项卡控件，然后在初始化期间将相应选项卡的窗口句柄传递给每个插件，然后使用它来放置 ActiveX对其进行控制。在 MFC 中创建 ActiveX 控件有很好的文档，这里有一个示例项目可以在 C# 中执行相同的操作：[CSActiveX 示例](http://code.msdn.microsoft.com/windowsdesktop/CSActiveX-b86194f8)

# performance - XNA - 如何更有效地绘制顶点？

> ID：15098669
> 
> 赞同：3
> 
> 时间：2013-02-26T20:29:59.810
> 
> 标签：performance, xna

使用下面的代码，1 个最大化网格以 60 FPS 绘制，2 个最大化网格以 33~ FPS 绘制，3 个最大化网格以 28~ FPS 绘制，4 个最大化网格以 20~ FPS 绘制。我做错了什么，还是我达到了某种极限？我似乎没有画很多多边形，但**我还是编程新手，**所以我不太了解。请提供一些效率建议。谢谢你。

```
class PolygonManager
{
    List<List<VertexPositionColor>> vertices;
    VertexBuffer vertexBuffer;
    List<List<int>> indices;
    IndexBuffer indexBuffer;
    int meshRef;
    int indexRef;
    Random random;

    public PolygonManager()
    {
        vertices = new List<List<VertexPositionColor>>();
        vertices.Add(new List<VertexPositionColor>());
        indices = new List<List<int>>();
        indices.Add(new List<int>());
        meshRef = -1;
        indexRef = 0;
        random = new Random();
    }

    public void CreateMesh(int length, int width, Vector3 position, Color color)
    {
        meshRef = -1;
        indexRef = 0;
        for (int i = 0; i < vertices.Count; i++)
        {
            if (vertices[i].Count <= 65536 - (length * width))
                meshRef = i;
        }

        if (meshRef == -1)
        {
            vertices.Add(new List<VertexPositionColor>());
            indices.Add(new List<int>());
            meshRef = vertices.Count - 1;
        }

        indexRef = vertices[meshRef].Count;

        for (int y = 0; y < length; y++)
        {
            for (int x = 0; x < width; x++)
            {
                vertices[meshRef].Add(new VertexPositionColor(new Vector3(x, 0, y) + position,
                                      new Color(color.R + (random.Next(-10, 10) / 100), color.G + (random.Next(-10, 10) / 100), color.B + (random.Next(-10, 10) / 100))));
            }
        }

        for (int y = 0; y < length - 1; y++)
        {
            for (int x = 0; x < width - 1; x++)
            {
                int topLeft = x + y * width;
                int topRight = (x + 1) + y * width;
                int lowerLeft = x + (y + 1) * width;
                int lowerRight = (x + 1) + (y + 1) * width;

                indices[meshRef].Add(topLeft + indexRef);
                indices[meshRef].Add(lowerRight + indexRef);
                indices[meshRef].Add(lowerLeft + indexRef);

                indices[meshRef].Add(topLeft + indexRef);
                indices[meshRef].Add(topRight + indexRef);
                indices[meshRef].Add(lowerRight + indexRef);
            }
        }
    }

    public void Draw(GraphicsDevice graphicsDevice, BasicEffect basicEffect)
    {
        for (int v = 0; v < vertices.Count; v++)
        {
            vertexBuffer = new VertexBuffer(graphicsDevice, typeof(VertexPositionColor), vertices[v].Count, BufferUsage.WriteOnly);
            vertexBuffer.SetData<VertexPositionColor>(vertices[v].ToArray());
            graphicsDevice.SetVertexBuffer(vertexBuffer);
            indexBuffer = new IndexBuffer(graphicsDevice, typeof(int), indices[v].Count, BufferUsage.WriteOnly);
            indexBuffer.SetData<int>(indices[v].ToArray());
            graphicsDevice.Indices = indexBuffer;
            foreach (EffectPass effectPass in basicEffect.CurrentTechnique.Passes)
            {
                effectPass.Apply();
                for (int i = 0; i < 6; i++)
                {
                    graphicsDevice.DrawIndexedPrimitives(PrimitiveType.TriangleList, 0, 0, vertices[v].Count, 0, indices[v].Count/3);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:53:00.843

移动初始化缓冲区的代码并将数据写入 draw 方法之外应该会显着提高性能。

创建顶点和索引缓冲区是一项昂贵的操作。对于静态网格（顶点不变），您可以重用缓冲区。

如果顶点/索引经常更改（每帧一次），请使用动态缓冲区。

# ios - UIScrollview 在缩放时同步子视图原点

> ID：15098671
> 
> 赞同：1
> 
> 时间：2013-02-26T20:30:11.990
> 
> 标签：ios, uiscrollview, zooming, scale, uiscrollviewdelegate

我正在尝试开发一种自定义地图。

所以我有一个启用缩放的滚动视图。

这个滚动视图有一个 UIImageView 作为它的子视图，代表用户的地图。

我希望用户能够像在 MapKit 中那样“放下一个图钉”。

如果我将图钉图像视图添加到地图图像视图中，图钉图像将根据滚动视图缩放进行缩放，这不是我想要的。

我想达到与 MapKit Mapview 相同的结果。

当用户平移或缩放时，图钉应该四处移动，但它的图像不应该变小或变大。

有一种简单的方法可以做到这一点，而不会因为对缩放比例和内容偏移的数学推测而变得疯狂？

非常感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:38:02.030

这更像是一种猜测，但是将 pin 的层添加为图像视图的子层似乎是这样做的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T05:32:04.733

我做的。

我所要做的就是将图钉添加到地图图像视图中。

在滚动视图委托之后，我根据滚动视图缩放比例调整了引脚比例，如下所示：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
    _redPin.transform = CGAffineTransformMakeScale(1 / scrollView.zoomScale, 1 / scrollView.zoomScale);
} 
```

# c++ - 异步调用 MATLAB 的 engEvalString

> ID：15098678
> 
> 赞同：2
> 
> 时间：2013-02-26T20:30:37.967
> 
> 标签：c++, api, matlab

**编辑2：**问题已解决，请参阅我的答案。

我正在编写一个通过[Engine API](http://www.mathworks.ch/ch/help/matlab/matlab_external/using-matlab-engine.html)与 MATLAB 通信的 C++ 程序。C++ 应用程序在 Windows 7 上运行，并与 MATLAB 2012b（32 位）交互。

我想使用 MATLAB 引擎进行耗时的调用`engEvalString`，但无法弄清楚如何使调用异步。不需要回调（但如果可能的话会很好）。

以下是不起作用的最小示例。

```
#include <boost/thread.hpp>

extern "C" {
    #include <engine.h>
}

int main()
{
    Engine* eng = engOpen("");
    engEvalString(eng,"x=10");
    boost::thread asyncEval(&engEvalString,eng,"y=5");
    boost::this_thread::sleep(boost::posix_time::seconds(10));
    return 0;
} 
```

运行这个程序后，我切换到 MATLAB 引擎窗口，发现：

```
» x
x =
    10
» y
Undefined function or variable 'y'. 
```

因此，似乎应该设置 y=5 的第二个调用永远不会被 MATLAB 引擎处理。

线程肯定会运行，您可以通过将`engEvalString`调用移动到本地函数并将其作为线程启动来检查这一点。

我真的很难过，如果有任何建议，我将不胜感激！

**编辑：**正如 Shafik 在他的回答中指出的那样，引擎不是线程安全的。我不认为这对我的用例来说应该是一个问题，因为我需要进行的调用相隔约 5 秒，计算需要 2 秒。我等不及这个计算的原因是 C++ 应用程序是一个“中等难度”的实时机器人控制器，它应该以 50Hz 的频率发送命令。如果此速率降至 30Hz 以下，机器人将承担网络问题并关闭连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:48:50.150

所以根据这个 Mathworks 文档，它不是线程安全的，所以我怀疑这会起作用：

[http://www.mathworks.com/help/matlab/matlab_external/using-matlab-engine.html](http://www.mathworks.com/help/matlab/matlab_external/using-matlab-engine.html)

根据本文档，engOpen 派生了一个新进程，它可能会解释您所看到的其余行为：

[http://www.mathworks.com/help/matlab/apiref/engopen.html](http://www.mathworks.com/help/matlab/apiref/engopen.html)

另请参阅，线程和分叉，三思而后行混合它们：

[http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them](http://www.linuxprogrammingblog.com/threads-and-fork-think-twice-before-using-them)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:42:04.633

所以，我找到了问题所在，但如果有人能解释**原因**，我会很高兴的！

以下作品：

```
#include <boost/thread.hpp>

extern "C" {
#include <engine.h>
}

void asyncEvalString()
{
    Engine* eng = engOpen("");
    engEvalString(eng,"y=5");
}

int main()
{
    Engine* eng = engOpen("");
    engEvalString(eng,"x=10");
    boost::thread asyncEvalString(&asyncEvalString);
    boost::this_thread::sleep(boost::posix_time::seconds(1));
    engEvalString(eng,"z=15");
    return 0;
} 
```

如您所见，您需要在新线程中获取指向引擎的新指针。返回的指针与 main 函数中`asyncEvalString`返回的原始指针不同`engOpen`，但是两个指针继续运行没有问题：

```
» x
x =
    10
» y
y =
     5
» z
z =
    15 
```

最后，为了解决线程安全问题，可以围绕 engEvalString 调用设置互斥锁，以确保任何时候只有一个线程使用引擎。也可以修改 asyncEvalString 函数以在 engEvalString 函数完成后触发回调函数。

但是，我希望有人解释上述解决方案为何有效。线程共享进程的堆分配内存，并且可以访问其他线程堆栈上的内存（？），所以我不明白为什么第一个`Engine*`在单独的线程中使用时突然无效。

# android - 在 setTheme() 之后使用 setSingleChoiceItems 的 AlertDialog 样式错误

> ID：15098679
> 
> 赞同：0
> 
> 时间：2013-02-26T20:30:39.693
> 
> 标签：android, android-alertdialog, android-theme

我正在使用以下代码更改应用程序主题：

MainActivity.java：

```
setTheme(R.style.AppBlackTheme);
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 
```

样式.xml：

```
<style name="AppTheme" parent="android:Theme.Light" />
<style name="AppBlackTheme" parent="android:Theme.Black" /> 
```

然后创建 AlertDialog：

```
 SimpleAdapter simpleAdapter=new SimpleAdapter(this, listItems, R.layout.templates_list_item, new String[] {"name","descr"}, new int[] {R.id.name,R.id.descr});
AlertDialog.Builder alert = new AlertDialog.Builder(this);
alert.setSingleChoiceItems(simpleAdapter, -1, new OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                //...
            }
        });
alert.show(); 
```

但在 Android 2.1 中，此 AlertDialog 以白色背景和白色文本显示。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:42:11.897

请试试：`setInverseBackgroundForced(true)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:43:35.740

您正在使用默认的 Android 主题。这意味着操作系统将决定颜色。如果您自己设置颜色，则可能会妨碍标准主题。

尝试自定义或使用您自己定义的主题。有关详细信息，请参阅以下主题。

[如何更改 AlertDialog 的主题](https://stackoverflow.com/questions/2422562/how-to-change-theme-for-alertdialog)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T13:20:51.267

现在我这样做：

值/样式.xml：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="android:Theme.Light">
        <item name="alert_text_color">@android:color/black</item>
    </style>
    <style name="AppBlackTheme" parent="android:Theme.Black">
        <item name="alert_text_color">@android:color/black</item>
    </style>
</resources> 
```

值-v11/styles.xml：

```
<resources>
    <style name="AppTheme" parent="android:Theme.Holo.Light" >
        <item name="alert_text_color">@android:color/black</item>
    </style>
    <style name="AppBlackTheme" parent="android:Theme.Holo" >
        <item name="alert_text_color">@android:color/white</item>
    </style>
</resources> 
```

值/attrs.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="customAttrs">
        <attr name="alert_text_color" format="reference" />
    </declare-styleable>
</resources> 
```

在布局中（templates_list_item）：

```
<TextView
    android:id="@+id/name"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="?attr/alert_text_color" /> 
```

# java - intellij 导入现有的 eclipse android 项目失败

> ID：15098688
> 
> 赞同：3
> 
> 时间：2013-02-26T20:31:18.793
> 
> 标签：java, intellij-idea

导入后我在编译时遇到了这个错误：

```
java: Cannot find JDK '<unknown>' for module 'CallsFreeCalls' 
```

我也看不到JI里面的Android UI Designer

这是我在项目设置中的内容：

![在此处输入图像描述](../Images/d997e43b33d103630cc3a76aa2778779.png)

我有两个选择，但如果我改变它，什么都没有发生:(

这是批准启用 android 设计器：

![在此处输入图像描述](../Images/84d957b5fb530d4df0ead97caeadea8f.png)

项目SDK：

![在此处输入图像描述](../Images/f25918e0c3558574cf1f81eec7d914b4.png)

平台设置 SDK：

![在此处输入图像描述](../Images/b6456df77a5564408357d9307b8a2c6b.png)

通过添加到平台设置/SDK Java 1.6 sdk 解决了构建问题。但我仍然没有在任何地方看到 Android UI Designer。项目现在也已构建，但 JI 在 XML 布局文件中显示错误（构建完成时实际上不会重复）： ![在此处输入图像描述](../Images/557d5fd2ca83c27fb9bf7a124aed3fde.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T22:38:03.870

尝试以下操作：在项目工具窗口（左侧）中选择该模块，然后按 F4 键。这将打开`Project Structure`对话框。确保选择您的模块和`Dependencies`选项卡，如图所示：

![设置模块 SDK 依赖项](../Images/78487f73271609939bf7027200aae0cf.png)

从`Module SDK`下拉列表中设置您的 SDK。

至于 UI Designer：检查是否在 Settings/Plugins 中启用了 Android Designer 插件。

# windows-phone-8 - windows phone 8 应用程序中的静态内容在哪里？

> ID：15098689
> 
> 赞同：0
> 
> 时间：2013-02-26T20:31:26.290
> 
> 标签：windows-phone-8, isolatedstoragefile

我有 Windows Phone 8 应用程序，我想在其中包含我自己的 10 个 MP3。我将它们包含在 /Assets 中，但是像这样的调用

```
using (IsolatedStorageFile store = IsolatedStorageFile.GetUserStoreForApplication())
{
    songs = store.GetFileNames("*.mp3").ToList();
    Console.WriteLine("Found  {0} files ", songs.Count());
} 
```

不断返回我商店中的 MP3 数量为 0。

我尝试将 MP3 放入 Content、Assets、Resources 并设置 Copy Always 选项，但无济于事。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:47:11.413

如果您将文件设置为“嵌入式资源”，则可以在运行时获取文件列表。

您可以这样做：

1.  将文件的构建操作设置为“嵌入式资源”。
2.  使用 Assembly.GetCallingAssembly().GetManifestResourceNames() 枚举资源名称

    ```
    string[] GetResourcesNames()
    {
        return Assembly.GetCallingAssembly().GetManifestResourceNames();
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:53:11.180

这些文件不会复制到您的应用程序的独立存储中，但您可以通过 uri 获取它们：

```
var mymp3file = new Uri("Assets/HomersDoh.mp3", UriKind.RelativeOrAbsolute); 
```

# ipython-notebook - ipython notebook 重新排列命令历史顺序

> ID：15098700
> 
> 赞同：1
> 
> 时间：2013-02-26T20:31:56.887
> 
> 标签：ipython-notebook

我正在制作一个演示笔记本。在处理它时，我正在插入命令，有时会返回上一个单元格以插入更多命令。最后，我希望命令编号是递增顺序，而不是我在准备笔记本时输入的随机顺序。

有什么方法可以方便地从笔记本上做到这一点？我可以去编辑与笔记本关联的 .ipynb 文件并编辑“prompt_number”字段以根据需要进行命令排序，但更方便的方法更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:48:45.527

基于没有回应，我将基础 .ipynb 文件的编辑发布为重新排列编号的答案。

当您编辑 ipynb 文件时，请注意大多数时候数字是成对的（输出和输入）：

```
 "output_type": "pyout",
   "prompt_number": 35,
   "text": [
    "Empty DataFrame\n",
    "Columns: [utilization]\n",
    "Index: []"
   ]
  }
 ],
 "prompt_number": 35
}, 
```

**vim 提示**：我在 vim 上进行了 /prompt_n/b+16 搜索，它会将您带到号码的开头，然后只需对您想要的新号码执行 cw 即可。对于该对的第二个数字，只需执行 .

**注意：**注意成对的数字，我发现第一个是输出的，以逗号结尾。第二个是没有逗号的输入。但是，如果您有意从 Web 界面中删除了特定的输入/输出单元格，则该对可能会丢失，因此请小心将相同的新编号放入相同的输入/输出对，并且不要将相同的编号分配给不同的输入/输出单元格，这会使笔记本出现乱码，Web 界面会报错。

# php - 尝试打印 MySQL Query 时出现 AJAX 问题

> ID：15098704
> 
> 赞同：1
> 
> 时间：2013-02-26T20:32:05.170
> 
> 标签：php, javascript, html, ajax, xhtml

我目前正在学习 AJAX，我遇到了这个错误，其中没有显示 MySQL 查询的结果。

以下片段是 javascript ：

```
<script type="text/javascript">
function showCustomers()
{
    var zip = document.getElementById('zipcode').value;
    var st = document.getElementById('stname').value;
    if ((zip=="")&&(st=="")){
        document.getElementById("showCustResults").innerHTML="";
        return;
    } 
    mlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
            document.getElementById("showCustResults").innerHTML=xmlhttp.responseText;
        }
    }
    var querystring = "?zip" + zip + "&st" + st ;
    xmlhttp.open("POST","findCustomers.php" + querystring, true);
    xmlhttp.send();
} 
```

以下是从中提取信息的形式：

```
<form id="search_customers" class="appnitro"  method="post" action="">
        <ul>
            <li id="li_2" >
                <label class="description" for="zipcode">Zip Code </label>
                <div><input id="zipcode" name="zip_code" class="element text small" type="text" maxlength="10" value=""/> </div>
                <p class="guidelines" id="guide_2"><small>Please enter a Zip Code</small></p> 
            </li>
            <li id="li_1" >
                <label class="description" for="stname">Street Name </label>
                <div><input id="stname" name="st_name" class="element text medium" type="text" maxlength="50" value=""/></div>
                <p class="guidelines" id="guide_1"><small>Please Enter the Street Name</small></p> 
            </li>
                <li class="buttons">
                <input id="findCust" class="button_text" onclick="showCustomers()" type="submit" name="find"/>
            </li>
        </ul>
    </form> 
    <div id="showCustResults"><!-- Eventually search results will appear here --></div> 
```

拉鳕鱼的 PHP 如下：

```
<?php 
include 'functions.php'; #Library that holds all the functions

#Sanitizing strings for SQL entry
$zip = mysqli_real_escape_string($db, $_POST['zip']); 
$st = mysqli_real_escape_string($db, $_POST['st']);

$db = db_connect(); #Connecting to the database

#Querying the database to find any matches
#ALSO: We might need to add another column to 
$sql = "SELECT CustomerName, ServiceAddress, BillingAddress FROM enrollment_users WHERE UserName = '$username' AND Password = '$password'";
$res = mysqli_query($db, $sql);

#Creating the table to shoot out the information
#First the header...
echo "<table border='1'>";
echo "  <tr>";
echo "      <th>Customer</th>";
echo "      <th>Address 1</th>";
echo "      <th>Address 2</th>";
echo "      <th>Status</th>";   
echo "  </tr>";

#Now the actualy information 
while($row = mysqli_fetch_assoc($res)){
    echo "  <tr>";
    echo "      <td>" . $row['CustomerName'] . "</td>";
    echo "      <td>" . $row['ServiceAddress'] . "</td>";
    echo "      <td>" . $row['BillingAddress'] . "</td>";
    echo "      <td></td>";     
}
echo"</table>";
db_close($db); #Closing the database 
```

?>

过去一天我一直试图弄清楚这一点，但无济于事。希望有人能看到我看不到的东西。

提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:38:39.427

要发送帖子数据，您必须将其放入发送方法而不是 url，它们必须`key=value`成对出现，您还应该使用 对它们进行编码`encodeURIComponent`，您还必须将内容类型设置为`application/x-www-form-urlencoded`

```
var querystring = "zip=" + encodeURIComponent(zip) + "&st=" + encodeURIComponent(phone) ;
xmlhttp.open("POST","findCustomers.php" , true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send(querystring); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-26T20:45:23.507

> ```
> mlhttp = new XMLHttpRequest();
> xmlhttp.onreadystatechange=function() 
> ```

我没有尝试运行您的代码，但乍一看，您似乎有一个错字声明您的 xmlhttp 变量。

> var querystring = "?zip" + zip + "&st" + phone ;

我还看到您的查询字符串似乎不正确。AJAX 代表异步 javascript 和 xml（现在最常替换为 JSON），您应该在键值对之间使用 : 格式化查询字符串。 [http://www.json.org/](http://www.json.org/)

我不确定这些是否会解决您的问题，因为我没有尝试过代码，但我会给出一些建议。

如果这确实是问题所在，那将告诉我一些事情。1\. 你不要使用你的浏览器开发者工具，因为如果你这样做了，你会看到如果那个变量不正确，一个 httprequest 永远不会被触发。2\. 你是在文本编辑器而不是 IDE 中开发的。（这是优先的，我只是将其作为观察而不是推荐）

我不知道这项工作的目的是什么，但我假设你不允许使用 jquery，因为 $.ajax 方法将允许你清理这段代码并在更少的行中完成你想要的。

# php - 提交后保持选择可见

> ID：15098712
> 
> 赞同：2
> 
> 时间：2013-02-26T20:32:37.530
> 
> 标签：php, html, mysql, drop-down-menu

如何使过滤后的选择仍然出现在请求之后。

因此，如果我有选项 1、2 和 3。当我选择 2 并显示数据时，我仍然希望显示 2，表示数据已通过选项 2 过滤。

```
echo "<form name='country_list' method='POST' action='http://opben.com/colombia/familias-de-carteras' >";
echo "<select name='Country' tabindex='1' >";

while($row = mysql_fetch_array($result))
 {
  echo " <option  value='". $row['Fund_Manager_Company_Code'] ."'>". $row['Fund_Manager_Company_Name'] ."</option>";
 }
echo "</select>";
echo "<input type='submit' value='Filter' />";
echo "</form>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:37:12.720

你可以这样做：

```
 $country = isset($_POST['Country']) ? $_POST['Country'] : '';
    while($row = mysql_fetch_array($result))
     {
      echo " <option  value='". $row['Fund_Manager_Company_Code'] ."' ".(($row['Fund_Manager_Company_Code'] == $country) ? 'selected="selected"' : '').">". $row['Fund_Manager_Company_Name'] ."</option>";
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:37:08.333

您需要将 selected 属性添加到选项：

```
$Country = $_POST['Country'];
$sected = 'selected = "selected" ';
while($row = mysql_fetch_array($result))
 {
    echo " <option  ".($row['Fund_Manager_Company_Code'] == $Country? $selected : '')."value='". $row['Fund_Manager_Company_Code'] ."'>". $row['Fund_Manager_Company_Name'] ."</option>";
} 
```

然后将选择该值选择并发布的那个...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:38:15.393

就像是

```
echo" <option  value='" . $row['Fund_Manager_Company_Code'] . "' " . ((isset($_POST['Country']) && $_POST['Country'] == $row['Fund_Manager_Company_Code'])
? 'selected="selected"' : '') . ">" . $row['Fund_Manager_Company_Name'] . "</option>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:38:53.797

提交后，您需要在 PHP 代码中捕获选择：

```
$selection = $_POST['Country'];

echo "<form name='country_list' method='POST' action='http://opben.com/colombia/familias-de-carteras' >";
echo "<select name='Country' tabindex='1' >";

while($row = mysql_fetch_array($result))
 {
  $selected = "";
  if ($row['Fund_Manager_Company_Code'] == $selection) {
    $selected = "selected";
  }
  echo " <option  value='". $row['Fund_Manager_Company_Code'] ."' ".$selected.">". $row['Fund_Manager_Company_Name'] ."</option>";
 }
echo "</select>";
echo "<input type='submit' value='Filter' />";
echo "</form>"; 
```

# android - 解决错误“致命异常

> ID：15098717
> 
> 赞同：0
> 
> 时间：2013-02-26T20:32:50.753
> 
> 标签：android, maps, nullpointerexception, location, fatal-error

我正在制作 android 应用程序，其中我需要使用位置管理器 api 的用户当前位置...首先它确保互联网连接，如果没有连接互联网，则会在应用程序上显示 dailog 框。然后它将获得纬度和纬度。但是当我运行它，它显示了不同类型的错误，如致命的主要异常等。我很累，但严重的是我找不到出路，因为它与最后一年的项目有关，所以请帮助我..

```
package com.example.directory;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.ListView;

public class MainActivity extends Activity {
    ConnectionDetector cd;
    AlertDialogManager alert = new AlertDialogManager();
    Boolean isInternetPresent = false;
    GPSTracker gps;
    ListView lv;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //cd = new ConnectionDetector(getApplicationContext());
        //isInternetPresent = cd.isConnectingToInternet();
        /*if (!isInternetPresent) {
            // Internet Connection is not present
            alert.showAlertDialog(MainActivity.this, "Internet Connection Error",
                    "Please connect to working Internet connection", false);
            // stop executing code by return
            return;
        }
        else{alert.showAlertDialog(MainActivity.this, "Internet Connection Error",
                " working Internet connection", false);}*/
        gps = new GPSTracker(this);
        if (gps.canGetLocation()) {
            Log.d("Your Location", "latitude:" + gps.getLatitude() + ", longitude: " + gps.getLongitude());
        } else {
            // Can't get user's current location
            alert.showAlertDialog(MainActivity.this, "GPS Status",
                    "Couldn't get location information. Please enable GPS",
                    false);
            // stop executing code by return
            return;
        }
    //  lv = (ListView) findViewById(R.id.list);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}
/////////////////////
package com.example.directory;

import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

public class ConnectionDetector {

    private Context _context;

    public ConnectionDetector(Context context){
        this._context = context;
    }

    /**
     * Checking for all possible internet providers
     * **/
    public boolean isConnectingToInternet(){
        ConnectivityManager connectivity = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);
          if (connectivity != null)
          {
              NetworkInfo[] info = connectivity.getAllNetworkInfo();
              if (info != null)
                  for (int i = 0; i < info.length; i++)
                      if (info[i].getState() == NetworkInfo.State.CONNECTED)
                      {
                          return true;
                      }

          }
          return false;
    }
}

//////////////////
package com.example.directory;

import android.app.AlertDialog;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings;
import android.util.Log;

public class GPSTracker extends Service implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location = null; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener Calling this function will stop using GPS in your
     * app
     * */
    public void stopUsingGPS() {
        if (locationManager != null) {
            locationManager.removeUpdates(GPSTracker.this);
        }
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude() {
        if (location != null) {
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude() {
        if (location != null) {
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * 
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }
    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }}
/////////////////////////
package com.example.directory;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;

public class AlertDialogManager {
    /**
     * Function to display simple Alert Dialog
     * @param context - application context
     * @param title - alert dialog title
     * @param message - alert message
     * @param status - success/failure (used to set icon)
     *               - pass null if you don't want icon
     * */
    public void showAlertDialog(Context context, String title, String message,
            Boolean status) {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();

        // Setting Dialog Title
        alertDialog.setTitle(title);

        // Setting Dialog Message
        alertDialog.setMessage(message);

        if(status != null)
            // Setting alert dialog icon
            alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

        // Setting OK Button
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }
}

log cat
////////////////////////////
01-26 20:11:59.212: W/dalvikvm(2541): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-26 20:11:59.232: E/AndroidRuntime(2541): FATAL EXCEPTION: main
01-26 20:11:59.232: E/AndroidRuntime(2541): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.directory/com.example.directory.MainActivity}: java.lang.SecurityException: ConnectivityService: Neither user 10042 nor current process has android.permission.ACCESS_NETWORK_STATE.
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.os.Looper.loop(Looper.java:130)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.app.ActivityThread.main(ActivityThread.java:3683)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at java.lang.reflect.Method.invokeNative(Native Method)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at java.lang.reflect.Method.invoke(Method.java:507)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at dalvik.system.NativeStart.main(Native Method)
01-26 20:11:59.232: E/AndroidRuntime(2541): Caused by: java.lang.SecurityException: ConnectivityService: Neither user 10042 nor current process has android.permission.ACCESS_NETWORK_STATE.
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.os.Parcel.readException(Parcel.java:1322)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.os.Parcel.readException(Parcel.java:1276)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.net.IConnectivityManager$Stub$Proxy.getAllNetworkInfo(IConnectivityManager.java:390)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.net.ConnectivityManager.getAllNetworkInfo(ConnectivityManager.java:267)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at com.example.directory.ConnectionDetector.isConnectingToInternet(ConnectionDetector.java:22)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at com.example.directory.MainActivity.onCreate(MainActivity.java:23)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-26 20:11:59.232: E/AndroidRuntime(2541):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
01-26 20:11:59.232: E/AndroidRuntime(2541):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:04:13.163

```
java.lang.SecurityException: ConnectivityService: Neither user 10042 nor current process has android.permission.ACCESS_NETWORK_STATE. 
```

此异常告诉您清单中缺少权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

# drupal - 通过themesnap将jw播放器添加到drupal commerce/ecommerce pro

> ID：15098718
> 
> 赞同：1
> 
> 时间：2013-02-26T20:32:52.117
> 
> 标签：drupal, drupal-7, jwplayer, drupal-themes, commerce

我对这一切都很陌生，但我有我修改了很多的电子商务专业主题。我在我最后的两周，但我被卡住了。我的主题很好，产品和一切都很好，除了涉及向产品页面添加视频的问题。我可以自己制作一个视频页面，效果很好。我已经将该字段添加到产品设置页面，所以现在您可以将视频上传到产品页面，但是在查看页面时它不会显示。也许我的主题中的CSS阻止了它？任何帮助或正确方向的观点都会很棒，如果没有在正确的地方发布，对不起。干杯-

# email - VBA - Outlook Email.HTMLBody 行距？

> ID：15098719
> 
> 赞同：1
> 
> 时间：2013-02-26T20:33:04.017
> 
> 标签：email, vba, outlook, spacing

他是一个小问题，但让我感到困惑。我正在自动从excel发送一封电子邮件。出于某种原因，下面的代码使最后一行的间距大于正常间距：

```
Sub emailspacing()
Dim OutApp As Object
Dim OutMail As Object
Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.CreateItem(0)
With OutMail
    .HTMLBody = "<p style='font-family:calibri;font-size:14.5'>Thanks for your help</p>"
    .display
End With 
```

然而，当我删除 P 样式部分时，生成的电子邮件具有完美的行距？？？

```
Sub emailspacing()
Dim OutApp As Object
Dim OutMail As Object
Set OutApp = CreateObject("Outlook.Application")
Set OutMail = OutApp.CreateItem(0)
With OutMail
    .HTMLBody = "Thanks for your help"
    .display
End With 
```

有谁知道将程式化的 HTML 文本与正常行距相结合的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T11:30:27.003

破解它！这需要添加到 p 样式中：

边距底部：.0001pt；

# java - 如何创建具有新比较器且没有指定初始容量的 PriorityQueue？

> ID：15098731
> 
> 赞同：12
> 
> 时间：2013-02-26T20:34:22.673
> 
> 标签：java, priority-queue

在 Java 中，我不知道如何`PriorityQueue`使用新的比较器创建一个新的但没有给出队列长度？我怎样才能创建它？

我知道我可以写：

```
Queue<Node> theQueue = new PriorityQueue<Node>(15,new Comparator<Node>(); 
```

但我希望队列可以这样工作`LinkedList`，我的意思是它的长度不是固定的，我该如何声明它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T20:39:24.003

现代答案，截至 2021 年：[https ://stackoverflow.com/a/30015986/139010](https://stackoverflow.com/a/30015986/139010)

* * *

Pre-Java-8 答案，供后代使用：

没有这样的构造函数。根据 JavaDocs，[默认容量为 11](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html#PriorityQueue%28%29)，因此您可以将其指定为与无参数`PriorityQueue`构造函数类似的行为：

```
Queue<Node> theQueue = new PriorityQueue<Node>(11,new Comparator<Node>()); 
```

是[的，如果需要，队列会增加。](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)

> 优先级队列是无界的，但具有控制用于存储队列元素的数组大小的内部容量。它总是至少与队列大小一样大。随着元素被添加到优先级队列中，其容量会自动增长。未指定增长政策的详细信息。x

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-03T15:59:47.390

从 Java 版本 8 开始，有一个新的构造函数可以满足您的要求：PriorityQueue(Comparator compare)

所以你会得到：

```
Queue<Node> theQueue = new PriorityQueue<>(new Comparator<Node>()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:40:55.410

恐怕没有办法只指定 a`Comparator`而不指定初始容量。请注意，这只是初始容量——队列可以从这个初始值开始增长。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-05T17:55:34.597

您可以使用 Java Lambda（Java SE 8 中的一项功能）创建具有自定义比较器的优先级队列，而无需固定大小。

例如，您可以这样做：

`PriorityQueue<String> pq = new PriorityQueue<>((s1, s2) -> s1.compareTo(s2));`

请参阅有关 Lambda 的示例： [https ://www.mkyong.com/java8/java-8-lambda-comparator-example/](https://www.mkyong.com/java8/java-8-lambda-comparator-example/)

# c# - 查询直接在 SQL Server 中执行 4 秒，但在 ASP.NET 中需要 > 30 秒？

> ID：15098733
> 
> 赞同：4
> 
> 时间：2013-02-26T20:34:30.573
> 
> 标签：c#, .net, sql, sql-server-2008

当在 SQL Server Management Studio 中执行时，我有一个查询（*大约 1600 行存储为存储过程*），执行大约需要 3 秒（通过添加正确的索引对其进行优化后）。

我在 C# 中为此编写了一个包装器，并为自己提供了使用 URI 来执行此查询的能力。但是，这需要 30 多秒才能执行，因此，当我将此查询作为循环的一部分运行时，浏览器会因挂起的请求过多而停止。我这样写了包装器：

```
try
{
   string ConString = Constants.connString;

   using (con = new SqlConnection(ConString))
   {
      cmd = new SqlCommand(sql, con);
      con.Open();
      dr = cmd.ExecuteReader();

      while (dr.Read())
      {
         ...
      }
   }
} 
```

我的连接字符串是这样的：

```
Data Source={0};Initial Catalog={1};Integrated Security=True;MultipleActiveResultSets=true 
```

我知道查询本身很好，因为我在 SSMS 中多次运行它并且它运行良好（平均不到 5 秒）。而且，我很乐意提供更多调试信息，但我不知道要提供什么。

要解决此类问题，我应该从哪里开始？

**编辑：**

我运行 SQL Profiler 并收集了一些统计数据。这就是我正在观察的。很奇怪，它是正在执行的确切查询。让我知道此时我还能做些什么。

![在此处输入图像描述](../Images/4a978ffde28116c99a0d79049d966ea5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T23:16:56.033

行; [最后，在这里](https://stackoverflow.com/questions/3187150/executing-stored-proc-from-dotnet-takes-very-long-but-in-ssms-it-is-immediate)和[这里](https://stackoverflow.com/questions/2736638/sql-query-slow-in-net-application-but-instantaneous-in-sql-server-management-st)找到了答案。为方便起见，此处复制了答案。感谢原始海报[Jacques Bosch](https://stackoverflow.com/users/269512/jacques-bosch)，他又从[这里](http://www.eggheadcafe.com/tutorials/sql-server/353cb16c-3cde-44dd-a264-750c1ce4e423/sql-server-query-analyzer-runs-fast--stored-procedure-runs-slow.aspx)拿走了它。不敢相信这个问题在 2004 年就解决了！

该问题似乎是由 SQL Server 的[Parameter Sniffing](http://blogs.msdn.com/b/queryoptteam/archive/2006/03/31/565991.aspx)引起的。为了防止它，只需将传入的参数值分配给在 SP 顶部声明的其他变量。

[看到这篇关于它的好文章](http://www.simple-talk.com/sql/t-sql-programming/parameter-sniffing/?utm_source=simpletalk&utm_medium=email-main&utm_content=Sniffing-201010116&utm_campaign=SQL)

例子：

```
CREATE PROCEDURE dbo.MyProcedure
(
    @Param1 INT
)
AS

declare @MyParam1 INT
set @MyParam1 = @Param1

SELECT * FROM dbo.MyTable WHERE ColumnName = @MyParam1 

GO 
```

我从[eggheadcafe.com](http://www.eggheadcafe.com/tutorials/aspnet/353cb16c-3cde-44dd-a264-750c1ce4e423/sql-server-query-analyzer.aspx)复制了这些信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T23:21:43.887

由于查询计划的缓存，查询通常在 SQL Server 管理工作室中运行得更快。在进行基准测试之前，请尝试在您的存储过程上运行 sp_recompile。这将清除查询计划。

更多细节可以在这里找到：http: [//www.sommarskog.se/query-plan-mysteries.html](http://www.sommarskog.se/query-plan-mysteries.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:44:47.913

为什么不使用 XML 而不是 Result Set ？据我所知，使用 XML 比读取结果集要快得多。所以在这种情况下你应该使用这样的东西：

```
SELECT * 
FROM [Table Name]
FOR XML PATH('[Your Path]'), ELEMENTS XSINIL, ROOT('Your Root') 
```

之后我认为你可以在你的项目中序列化它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T23:38:54.857

我曾经遇到过同样的问题，结果发现差异是`ARITHABORT`通过SQL管理工作室连接的设置不同造成的。.net 连接将`ARITHABORT`设置设置为`OFF`，而 SQL 管理工作室将此设置设置为`ON`。

如果遇到同样的问题，您可以尝试`SET ARITHABORT OFF`在 SQL Management Studio 中执行，然后执行您的查询。

[这是一个线程](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/0c861af2-1991-4d93-bd24-1eda8698053f/)，解释了为什么此设置会导致如此显着的性能差异。

# django - Django - 我可以更改在抽象基础模型中为特定子模型定义的字段的构造吗？

> ID：15098734
> 
> 赞同：11
> 
> 时间：2013-02-26T20:34:33.270
> 
> 标签：django, django-models, factory

我为我的所有模型添加了一个 slug 用于序列化目的，所以我定义了一个抽象基类，它使用来自 django_autoslug 的[AutoSlugField](http://pythonhosted.org/django-autoslug/)。

```
class SluggerModel(models.Model):
    slug = AutoSlugField(unique=True, db_index=False) 

    class Meta:
        abstract=True 
```

我还定义了一个自定义管理器和一个 natural_key 方法，此时我有大约 20 个子类，因此除了定义字段的单行之外，还有几件事使使用抽象基础模型值得。

但是，我希望能够切换一些默认参数来初始化`AutoSlugField`一些子模型，同时仍然能够利用抽象基类。例如，我希望他们中的一些人使用该`populate_from`选项，从他们的特定模型中指定字段，而其他人则拥有`db_index=True`而不是我的默认值 ( `False`)。

我开始尝试使用自定义元类来做到这一点，利用每个子模型的内部元类中定义的自定义选项，但这成为了老鼠窝。我愿意接受有关该方法的指导或任何其他建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-02T20:42:27.330

一种解决方案是动态构造您的抽象基类。例如：

```
def get_slugger_model(**slug_kwargs):
    defaults = {
        'unique': True,
        'db_index': False
    }
    defaults.update(slug_kwargs)

    class MySluggerModel(models.Model):
        slug = AutoSlugField(**defaults)

        class Meta:
            abstract = True

    return MySluggerModel

class MyModel(get_slugger_model()):
    pass

class MyModel2(get_slugger_model(populate_from='name')):
    name = models.CharField(max_length=20) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T04:58:08.310

**更新：**我从以下解决方案开始，这很丑陋，然后切换到 Daniel 的解决方案，但事实并非如此。我把我的留在这里以供参考。

这是我的 Metaclass 捕鼠器，它似乎正在工作（尚未进行广泛的测试）。

```
class SluggerMetaclass(ModelBase):
    """
    Metaclass hack that provides for being able to define 'slug_from' and 
    'slug_db_index' in the Meta inner class of children of SluggerModel in order to set 
    those properties on the AutoSlugField
    """
    def __new__(cls, name, bases, attrs):
        # We don't want to add this to the SluggerModel class itself, only its children
        if name != 'SluggerModel' and SluggerModel in bases:
            _Meta = attrs.get('Meta', None)
            if _Meta and hasattr(_Meta, 'slug_from') or hasattr(_Meta, 'slug_db_index'):
                attrs['slug'] = AutoSlugField(
                    populate_from=getattr(_Meta, 'slug_from', None),
                    db_index=getattr(_Meta, 'slug_db_index', False),
                    unique=True
                )
                try:
                    # ModelBase will reject unknown stuff in Meta, so clear it out before calling super
                    delattr(_Meta, 'slug_from')
                except AttributeError: 
                    pass
                try:
                    delattr(_Meta, 'slug_db_index')
                except AttributeError: 
                    pass
            else:
                attrs['slug'] = AutoSlugField(unique=True, db_index = False)  # default

        return super(SlugSerializableMetaclass, cls).__new__(cls, name, bases, attrs) 
```

现在`SlugModel`看起来基本上是这样的：

```
class SluggerModel(models.Model):
    __metaclass__ = SluggerMetaclass
    objects = SluggerManager()
    # I don't define the AutoSlugField here because the metaclass will add it to the child class.
    class Meta:
        abstract = True 
```

我可以通过以下方式达到预期的效果：

```
class SomeModel(SluggerModel, BaseModel):
    name = CharField(...)
    class Meta:
        slug_from = 'name'
        slug_db_index = True 
```

对于具有多个抽象父模型的模型，我必须将 SluggerModel 放在继承列表的*第一位，否则其他父模型不会拾取字段并且验证失败；*但是，我无法解释原因。

我想我可以把它作为我自己问题的答案，因为它有效，但我希望有更好的方法，因为它有点丑陋。再说一遍，hax 就是 hax，所以你能做什么，所以也许这就是答案。

# asp.net - 使用 C# 在 ASP.NET 中获取远程用户的 guid

> ID：15098739
> 
> 赞同：0
> 
> 时间：2013-02-26T20:34:40.633
> 
> 标签：asp.net, guid

我正在尝试使用 C# 在 ASP.NET 中构建一个简单的 Web 应用程序。此应用程序的目的是获取用户 Windows 帐户登录的 guid。

预期效果是用户在他或她自己的 Windows 机器上尝试登录到该站点。服务器查看用户的凭据，并为他或她自己的网络上的 Windows 登录拉取 guid。然后根据数据库检查 guid，如果它与我们之前存储的匹配，我们对它们进行身份验证并重定向。我遇到的问题是，我尝试获取的任何凭据（如果我什至可以获得任何凭据）始终是服务器的凭据，而不是远程用户的凭据。

在 中`web.config`，我尝试过设置`authentication mode = "windows"`、拒绝匿名用户和设置`identity impersonate="true"`. 我也尝试了这些的许多排列。

既没有`HTTPContext`也没有 `User.Identity`返回任何东西。`WindowsIdentity.GetCurrent()`以及任何通过`System.Security.Principal`返回服务器的凭据。

但是，这确实适用于我的`localhost`. 每当我将它发布到外部 IIS 服务器时，它都会失败。

我想要做的就是获取远程用户 Windows 登录的 guid。甚至有可能这样做吗？如果是这样，任何为我指明正确方向的帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:06:11.640

以下内容来自[msdn](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/43e05117-d25f-4489-af19-41d2dad33b33/)。我不知道这是否对你有帮助。

> 在 .Net 3.5 中，在 System.DirectoryServices.AccountManagement 命名空间下引入了 UserPrinciple 类。它具有获取当前 UserPrinciple 和从中获取 Guid 的属性。
> 
> 例子：

```
using System.DirectoryServices.AccountManagement;
Guid currentGuid = UserPrincipal.Current.Guid; 
```

# java - Android SQLite 创建了数据库但找不到表

> ID：15098740
> 
> 赞同：1
> 
> 时间：2013-02-26T20:34:47.090
> 
> 标签：java, android, eclipse, sqlite, android-sqlite

所以我正在尝试从我的一个数据库表中获取数据，您能否帮我检查一下，看看您是否能发现错误？

```
SQLiteDatabase db = SQLiteDatabase.openDatabase(DB_PATH, null,
            SQLiteDatabase.OPEN_READONLY);

    Cursor cursor = db.query(TABLE_CLASSES, new String[] { TABLE_C_DAY,
            TABLE_C_NAME, TABLE_C_DAY, TABLE_C_LOCATION, TABLE_C_TIMEHR,
            TABLE_C_TIMEMIN, TABLE_C_DURATION, TABLE_C_ONETIMEEVENT,
            TABLE_C_CTYPE, TABLE_C_OCCURINGWEEK}, TABLE_C_DAY + "=?",
            new String[] { String.valueOf(day) }, null, null, null, null); 
```

好的，`DB_PATH`这绝对是正确的。我试图关闭 db 连接，它工作正常，所以 db 工作正常并且存在。

所有表列名称都是正确的，因为它们在 onCreate 中用于创建数据库并且工作正常。我也尝试过使用

```
db.rawQuery("SELECT * FROM " + TABLE_CLASSES + " WHERE day = ?", new String[] { String.valueOf(day) }); 
```

因此，当我进行查询时，应用程序停止并且我`Source code not found`在 Eclipse 中收到一条消息。LogCat 说表“类”不存在。

我手动尝试了创建代码并且它有效。这是来自 onCreate(SQLiteDatabase db); 的代码

```
String CREATE_DB_WITH_INIT_VALUES = 
            "CREATE TABLE %1$s (%4$s TEXT);" +
            "INSERT INTO %1$s VALUES('Lecture');" +
            "INSERT INTO %1$s VALUES('Lab');" +
            "INSERT INTO %1$s VALUES('Tutorial');" +
            "INSERT INTO %1$s VALUES('Meeting');" +
            "INSERT INTO %1$s VALUES('Examples Class');" +
            "CREATE TABLE %2$s (%5$s smallint, %6$s varchar(40), %7$s varchar(10), %8$s smallint, %9$s smallint, %10$s smallint, %11$s boolean, %12$s smallint, %13$s smallint);" +
            "INSERT INTO %2$s VALUES(1,'COMP12112 Computation',1.1,9,0,60,'False','Lecture',3);" +
            "INSERT INTO %2$s VALUES(1,'COMP16212 Java OOP 2',1.1,11,0,45,'False','Lecture',3);" +
            "INSERT INTO %2$s VALUES(1,'COMP18111 Distributed Systems','Unix',13,15,60,'False','Lab',3);" +
            "INSERT INTO %2$s VALUES(2,'Tutorial','LF13',15,0,60,'False','Tutorial',3);" +
            "INSERT INTO %2$s VALUES(2,'COMP14111 AI','LF31',10,30,60,'False','Lab',3);" +
            "CREATE TABLE %3$s (%14$s smallint, %15$s smallint, %16$s TEXT, %17$s date);";

    CREATE_DB_WITH_INIT_VALUES = String.format(CREATE_DB_WITH_INIT_VALUES, TABLE_CLASS_TYPES,
            TABLE_CLASSES, TABLE_DEADLINES, TABLE_CT_TYPE,
            TABLE_C_DAY, TABLE_C_NAME, TABLE_C_LOCATION, TABLE_C_TIMEHR, TABLE_C_TIMEMIN, TABLE_C_DURATION,
            TABLE_C_ONETIMEEVENT, TABLE_C_CTYPE, TABLE_C_OCCURINGWEEK,
            TABLE_D_TIMEHR, TABLE_D_TIMEMIN, TABLE_D_DTEXT, TABLE_D_DDATE
            );

    db.execSQL(CREATE_DB_WITH_INIT_VALUES); 
```

这段代码没有崩溃，一切看起来都很好，但是在查询过程中找不到表。

知道有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-20T16:06:08.513

您所做的是一个有效的 SQL 语句列表。这里真正的问题是方法 execSQL() 只允许您执行单个 sql 语句（请参阅[此处](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29 "这里")的文档）。

如果你想自动执行多个语句，我会编写一个方法，首先拆分这些语句（通过每个语句的结束分号），然后在循环中执行每个语句，检查每次迭代中的错误，以便当一些 sql 语句失败，你可以抛出一个 SQLException 指示失败的 sql 语句。像这样的东西：

```
public static void execSQLScript(SQLiteDatabase db, String script) throws SQLException {
    String[] statements = script.split(";");
    db.beginTransaction();
    for(String statement : statements) {
        try { 
        db.execSQL(statement); // Seems like this method already throws a decent exception
        }
        catch(SQLException e) {
            db.endTransaction(); // Rolling back the changes done
            throw e; 
        }
    }
    db.setTransactionSuccessful(); // Not rolling but commiting changes, since everything went fine.
    db.endTransaction();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:14:02.060

我不是 SQL 专家，但我认为您在创建表时尝试做的太多了。我建议创建表格并在 2 个不同的步骤中添加任何初始数据。

我的数据库中没有任何初始数据，但这是我用来创建表的：

```
createTable = "CREATE TABLE " + TABLE_NAME + "(" + COLUMN_ID + " INTEGER PRIMARY KEY," + 
COLUMN_ONE + " TEXT," + COLUMN_TWO + " INTEGER," + COLUMN_THREE + " TEXT," +
COLUMN_FOUR + " TEXT," + COLUMN_FIVE + " TEXT)";

db.execSQL(createTable); 
```

现在，在创建表之后，您可以插入所需的初始数据。后

```
db.execSQL(createTable); 
```

使用 a`ContentValues`将您需要的数据添加到数据库中。

```
contentValues = new ContentValues();
contentValues.putXXX();
// keep adding data
// the insert method will add the data for you.
SQLiteDatabase.insert(TABLE_NAME, null, contentValues); 
```

# objectify - 我的查询是否正确？

> ID：15098742
> 
> 赞同：0
> 
> 时间：2013-02-26T20:34:57.700
> 
> 标签：objectify

我正在尝试使用 objectify 进行查询以显示`<Fight>`eventEid = 111 的列表。以下调用是否正确？我运行它，它返回 0 ......但它很奇怪，因为它看起来正确

请注意，eventEid 很长。这会影响查询吗？

```
ofy().load().type(Fight.class).filter("eventEid", 111).list(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:07:18.377

Make sure that *eventEid* is indexed property.

> Filtering on unindexed properties returns no results.

[https://developers.google.com/appengine/docs/java/datastore/queries#Filters](https://developers.google.com/appengine/docs/java/datastore/queries#Filters)

# python - 在 PyOdbc 中获取表名和列名

> ID：15098747
> 
> 赞同：15
> 
> 时间：2013-02-26T20:35:28.040
> 
> 标签：python, pyodbc

我想从 PyOdbc 游标中检索完全引用的列名。例如，假设我有 2 个简单的表：

*   `Table_1(Id, < some other fields >)`
*   `Table_2(Id, < some other fields >)`

我想检索加入的数据

```
select * from Table_1 t1, Table2 t2 where t1.Id = t2.Id 
```

使用pyodbc，像这样：

```
query = 'select * from Table_1 t1, Table2 t2 where t1.Id = t2.Id'

import pyodbc
conn_string = '<removed>'
connection =  pyodbc.connect(conn_string)

cursor = connection.cursor()cursor.execute(query) 
```

然后我想获取列名：

```
for row in cursor.description:
    print row[0] 
```

但如果我这样做，我会得到`Id`两次我不想要的。理想情况下，我可以得到`t1.Id`和`t2.Id`输出。

我想到的一些解决方案（以及为什么我真的不想实现它们）：

1.  重命名查询中的列 - 在我的实际用例中，有几十个表，有些表有几十行更改太频繁
2.  解析我的查询并自动生成我的 SQL 查询（基本上检查表的查询，使用 cursor.tables 函数获取列，然后用`select *`一组命名列替换） - 如果我也有，我会这样做，但是对于测试工具来说，这似乎有点矫枉过正

有没有更好的办法？任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-05-02T00:21:17.940

## PyOdbc***文档***提供

```
# columns in table x
for row in cursor.columns(table='x'):
    print(row.column_name) 
```

[www.PyOdbc wiki](https://code.google.com/p/pyodbc/wiki/) API 文档很有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-16T00:04:52.293

这是我的做法。

```
import pyodbc
connection = pyodbc.connect('DSN=vertica_standby', UID='my_user', PWD='my_password', ansi=True)
cursor = connection.cursor()
for row in cursor.columns(table='table_name_in_your_database'):
    print(row.column_name) 
```

您必须通过两个文件设置您的 DSN（数据源名称）。odbc.ini 和 odbcinst.ini

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2015-02-15T15:28:53.790

如果不编写大量代码来包装它，似乎不可能做我想做的事。其他答案都没有真正回答通过它们以某种相对自动的方式起源的表返回不同列名的问题。

# javascript - Highchart：addSeries 与 chart.options.series

> ID：15098749
> 
> 赞同：0
> 
> 时间：2013-02-26T20:35:37.947
> 
> 标签：javascript

我继承了一个使用 Highcharts 的项目。

以前的开发人员使用该`.addSeries`方法将所有系列添加到正在呈现的每个图表中。从我读过的 Highcharts 来看，它似乎`.addSeries`真的是为了动态添加数据。

用于填充图表的数据来自 AJAX 请求。旧开发人员的方法是获取数据，渲染图表，然后使用`.addSeries`. 我在想最好更新`options.series`然后将整个内容传递`new Highcharts.Chart()`给渲染，从而`.addSeries`排除等式。

然而，由于我是 Highcharts 的新手，我希望能得到一些反馈，说明什么是更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:46:46.263

尽管您的问题表明您可能只是在寻找对严格正确/错误答案的偏好，但您的道路很好。

从我所见，除非您在页面上有交互会触发在绘制图表后更新图表的需要，否则使用的好处`addSerie`是添加一些视觉效果。使用`addSerie`，您的图表将在访问者面前直观地绘制自己 - 而他们已经被绘制。（我相信 HighCharts 演示网站有一些很好的例子。）

我最近还继承了一个 HighCharts 项目，并`Highcharts.Chart()`通过动态解析 AJAX 数据来生成一个新的使用动态数据。好消息是所有图表仍然有很好的视觉眩光（眩光很重要），因为它们在 AJAX 数据完全加载之前不会绘制。这个片段说明了我是如何加载动态图表、动态解析 JSON 数据的：

```
 $(function () {
        var visitsChart;
        $(document).ready( function() {
            $.getJSON('/json-data-url', function(json){        
                var visitsChart = new Highcharts.Chart({
                    chart: {
                        renderTo: 'visitsContainer',
                        type: 'spline',
                    },
                    title: {
                        text: 'Test Widget'
                    },
                    series: [{
                        name: 'Speed',
                        data: [parseInt(json.visits)],
                    }],
                ...
                });     
            });   
        });
    }); 
```

我不会撒谎...刚开始时我有几分钟的头发拉扯，但现在我希望我有更多的时间与 Highcharts 一起工作，因为一旦你开始工作就会很有趣。希望这可以帮助。

# windows-8 - Windows 应用商店应用程序在哪里存储其本地设置？

> ID：15098751
> 
> 赞同：16
> 
> 时间：2013-02-26T20:35:48.193
> 
> 标签：windows-8, microsoft-metro, windows-store-apps

各位程序员好，

我是 Windows 8 的新手。Windows 应用商店应用的 LocalSettings 将其序列化文件存储在哪里？我指的是这个：

```
Windows.Storage.ApplicationData.Current.LocalSettings 
```

[根据此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh986968.aspx)的WinStore 应用教程，我可以加载序列化属性并将其保存到漫游设置或本地设置。漫游到云端，但本地设置到底去哪里？注册表？隔离文件？

先感谢您。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-26T21:13:13.313

查看 c:\users\{username}\AppData\Local\Packages\{packageID} 其中 packageID 标识特定应用程序。在那里您会看到许多文件夹，在一个名为“设置”的文件夹中，您会看到 settings.dat。这就是 LocalSettings 和 RoamingSettings 的存储位置。（漫游设置存储在本地并与云同步，因此您不必每次都访问云。）

如果要在设置中存储的内容对于键值对而言过于复杂，则可以在 Settings 旁边的 LocalState、RoamingState 和 TempState 文件夹中存储自己的文件。

# ninject - Ninject 约定和拦截

> ID：15098757
> 
> 赞同：3
> 
> 时间：2013-02-26T20:36:27.980
> 
> 标签：ninject, aop, ninject-interception, ninject-conventions

我想用拦截属性装饰我的服务，然后让基于约定的绑定为我设置拦截器。我不希望我的属性从拦截属性继承......如果我可以避免的话。

例如，我有以下课程：

```
[Log]
public class SomeClassToLog
{
    public void DoSomething() { ... }
} 
```

我知道我可以按如下方式绑定它：

```
var kernel = new StandardKernel();
            kernel.Bind(x => x.FromAssembliesMatching("SomeProject.*")
                              .SelectAllClasses()
                              .WithAttribute(typeof(LogAttribute))
                              .BindToSelf().Configure(syntax => syntax.Intercept().With(LogInterceptor))); 
```

如何使用属性和拦截器的不同组合来做到这一点？例如：

如果我有 Log 和 Authorize 属性，我必须配置 3 组绑定？（1 为无授权日志，1 为无日志授权，1 为日志和授权）。

**更新：**虽然我无法根据我原来的问题参数找到解决方案，但我确实偶然发现了一个类似的问题，这导致我最终得到了解决方案。这是源代码：

**注意：** *Common.Interception.Interceptors*命名空间位于一个程序集中，该程序集引用了 Ninject.Extensions.Interception（及其所有必需的依赖项）。我的属性是在一个单独的程序集中定义的，没有它们自己的依赖项。

**MiscExtensions.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Threading.Tasks;

namespace Common.Interception.Interceptors
{
    // TODO: Remove the dependence on these eventually

    /// <summary>
    /// A bundle of extension methods which I needed to borrow from ninject source since they were internal:
    /// Ninject.Extensions.Interception.Infrastructure.Language
    /// ExtensionsForIEnumerable
    /// ExtensionsForMethodInfo
    /// ExtensionsForICustomAttributeProvider  
    /// </summary> 
    internal static class MiscExtensions
    {
        /// <summary>
        /// Converts all of the items in the specified series using the specified converter.
        /// </summary>
        /// <typeparam name="TInput">The type of items contained in the input list.</typeparam>
        /// <typeparam name="TOutput">The type of items to return.</typeparam>
        /// <param name="items">The series of items to convert.</param>
        /// <param name="converter">The converter to use to convert the items.</param>
        /// <returns>A list of the converted items.</returns>
        public static IEnumerable<TOutput> Convert<TInput, TOutput>(this IEnumerable<TInput> items,
                                                                     Func<TInput, TOutput> converter)
        {
            return items.Select(converter);
        }

        /// <summary>
        /// Skips the last items where the count of skipped items is given by count.
        /// </summary>
        /// <typeparam name="T">The type of the enumerable.</typeparam>
        /// <param name="source">The source.</param>
        /// <param name="count">The count of skipped items.</param>
        /// <returns>An enumerable that skippes the last items from the source enumerable.</returns>
        public static IEnumerable<T> SkipLast<T>(this IEnumerable<T> source, int count)
        {
            var enumerator = source.GetEnumerator();
            var items = new Queue<T>();

            while (enumerator.MoveNext())
            {
                if (count-- <= 0)
                {
                    yield return items.Dequeue();
                }

                items.Enqueue(enumerator.Current);
            }
        }

        private const BindingFlags DefaultBindingFlags =
            BindingFlags.Public |
            BindingFlags.NonPublic |
            BindingFlags.Instance;

        public static PropertyInfo GetPropertyFromMethod(this MethodInfo method, Type implementingType)
        {
            if (!method.IsSpecialName)
            {
                return null;
            }

            var isGetMethod = method.Name.Substring(0, 3) == "get";
            var returnType = isGetMethod ? method.ReturnType : method.GetParameterTypes().Last();
            var indexerTypes = isGetMethod ? method.GetParameterTypes() : method.GetParameterTypes().SkipLast(1);

            return implementingType.GetProperty(method.Name.Substring(4), DefaultBindingFlags, null, returnType, indexerTypes.ToArray(), null);
        }

        public static PropertyInfo GetPropertyFromMethod(this MethodInfo method)
        {
            if (!method.IsSpecialName)
            {
                return null;
            }
            return method.DeclaringType.GetProperty(method.Name.Substring(4), DefaultBindingFlags);
        }

        /// <summary>
        /// Gets the types of the parameters of the method.
        /// </summary>
        /// <param name="method">The method in question.</param>
        /// <returns>An array containing the types of the method's parameters.</returns>
        public static IEnumerable<Type> GetParameterTypes(this MethodBase method)
        {
            return method.GetParameters().Convert(p => p.ParameterType);
        }

        /// <summary>
        /// Gets the method handle of either the method or its generic type definition, if it is
        /// a generic method.
        /// </summary>
        /// <param name="method">The method in question.</param>
        /// <returns>The runtime method handle for the method or its generic type definition.</returns>
        public static RuntimeMethodHandle GetMethodHandle(this MethodBase method)
        {
            var mi = method as MethodInfo;

            if (mi != null &&
                 mi.IsGenericMethod)
            {
                return mi.GetGenericMethodDefinition().MethodHandle;
            }
            return method.MethodHandle;
        }

        /// <summary>
        /// Gets the first attribute of a specified type that decorates the member.
        /// </summary>
        /// <typeparam name="T">The type of attribute to search for.</typeparam>
        /// <param name="member">The member to examine.</param>
        /// <returns>The first attribute matching the specified type.</returns>
        public static T GetOneAttribute<T>(this ICustomAttributeProvider member)
            where T : Attribute
        {
            var attributes = member.GetCustomAttributes(typeof(T), true) as T[];

            return (attributes == null) ||
                   (attributes.Length == 0)
                       ? null
                       : attributes[0];
        }

        /// <summary>
        /// Gets the first attribute of a specified type that decorates the member.
        /// </summary>
        /// <param name="member">The member to examine.</param>
        /// <param name="type">The type of attribute to search for.</param>
        /// <returns>The first attribute matching the specified type.</returns>
        public static object GetOneAttribute(this ICustomAttributeProvider member, Type type)
        {
            object[] attributes = member.GetCustomAttributes(type, true);

            return (attributes == null) ||
                   (attributes.Length == 0)
                       ? null
                       : attributes[0];
        }

        /// <summary>
        /// Gets an array of attributes matching the specified type that decorate the member.
        /// </summary>
        /// <typeparam name="T">The type of attribute to search for.</typeparam>
        /// <param name="member">The member to examine.</param>
        /// <returns>An array of attributes matching the specified type.</returns>
        public static T[] GetAllAttributes<T>(this ICustomAttributeProvider member)
            where T : Attribute
        {
            return member.GetCustomAttributes(typeof(T), true) as T[];
        }

        /// <summary>
        /// Gets an array of attributes matching the specified type that decorate the member.
        /// </summary>
        /// <param name="member">The member to examine.</param>
        /// <param name="type">The type of attribute to search for.</param>
        /// <returns>An array of attributes matching the specified type.</returns>
        public static object[] GetAllAttributes(this ICustomAttributeProvider member, Type type)
        {
            return member.GetCustomAttributes(type, true);
        }

        /// <summary>
        /// Determines whether the member is decorated with one or more attributes of the specified type.
        /// </summary>
        /// <typeparam name="T">The type of attribute to search for.</typeparam>
        /// <param name="member">The member to examine.</param>
        /// <returns><see langword="True"/> if the member is decorated with one or more attributes of the type, otherwise <see langword="false"/>.</returns>
        public static bool HasAttribute<T>(this ICustomAttributeProvider member)
            where T : Attribute
        {
            return member.IsDefined(typeof(T), true);
        }

        /// <summary>
        /// Determines whether the member is decorated with one or more attributes of the specified type.
        /// </summary>
        /// <param name="member">The member to examine.</param>
        /// <param name="type">The type of attribute to search for.</param>
        /// <returns><see langword="True"/> if the member is decorated with one or more attributes of the type, otherwise <see langword="false"/>.</returns>
        public static bool HasAttribute(this ICustomAttributeProvider member, Type type)
        {
            return member.IsDefined(type, true);
        }

        /// <summary>
        /// Determines whether the member is decorated with an attribute that matches the one provided.
        /// </summary>
        /// <typeparam name="T">The type of attribute to search for.</typeparam>
        /// <param name="member">The member to examine.</param>
        /// <param name="attributeToMatch">The attribute to match against.</param>
        /// <returns><see langword="True"/> if the member is decorated with a matching attribute, otherwise <see langword="false"/>.</returns>
        public static bool HasMatchingAttribute<T>(this ICustomAttributeProvider member, T attributeToMatch)
            where T : Attribute
        {
            T[] attributes = member.GetAllAttributes<T>();

            if ((attributes == null) ||
                 (attributes.Length == 0))
            {
                return false;
            }

            return attributes.Any(attribute => attribute.Match(attributeToMatch));
        }
    }
} 
```

**AlternateInterceptorRegistrationStrategy.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using Ninject;
using Ninject.Components;
using Ninject.Extensions.Interception;
using Ninject.Extensions.Interception.Advice;
using Ninject.Extensions.Interception.Planning.Directives;
using Ninject.Extensions.Interception.Registry;
using Ninject.Planning;
using Ninject.Planning.Strategies;

namespace Common.Interception.Interceptors
{
    /// <summary>
    /// This is a derivation of InterceptorRegistrationStrategy from Ninject.Extensions.Interception.Planning.Strategies, merged with 
    /// http://stackoverflow.com/questions/6386461/ninject-intercept-any-method-with-certain-attribute
    /// </summary>
    public class AlternateInterceptorRegistrationStrategy<TAttribute, TInterceptor> : NinjectComponent, IPlanningStrategy
        where TAttribute : Attribute
        where TInterceptor : IInterceptor
    {
        protected const BindingFlags DefaultBindingFlags =
            BindingFlags.Public |
            BindingFlags.NonPublic |
            BindingFlags.Instance;

        public AlternateInterceptorRegistrationStrategy(IAdviceFactory adviceFactory, IAdviceRegistry adviceRegistry, IKernel kernel)
        {
            AdviceFactory = adviceFactory;
            AdviceRegistry = adviceRegistry;
            Kernel = kernel;
        }

        public IKernel Kernel { get; set; }
        public IAdviceFactory AdviceFactory { get; set; }
        public IAdviceRegistry AdviceRegistry { get; set; }

        public virtual void Execute(IPlan plan)
        {
            IEnumerable<MethodInfo> candidates = GetCandidateMethods(plan.Type);

            RegisterClassInterceptors(plan.Type, plan, candidates);

            foreach (MethodInfo method in candidates)
            {
                PropertyInfo property = method.GetPropertyFromMethod(plan.Type);
                ICustomAttributeProvider provider = (ICustomAttributeProvider)property ?? method;
                TAttribute[] attributes = provider.GetAllAttributes<TAttribute>();

                if (attributes.Length == 0)
                {
                    continue;
                }

                RegisterMethodInterceptor(plan.Type, method);

                // Indicate that instances of the type should be proxied.
                if (!plan.Has<ProxyDirective>())
                {
                    plan.Add(new ProxyDirective());
                }
            }
        }

        protected virtual void RegisterClassInterceptors(Type type, IPlan plan, IEnumerable<MethodInfo> candidates)
        {
            var attributes = type.GetAllAttributes<TAttribute>();

            if (attributes.Length == 0)
            {
                return;
            }

            foreach (MethodInfo method in candidates)
            {
                PropertyInfo property = method.GetPropertyFromMethod(type);
                ICustomAttributeProvider provider = (ICustomAttributeProvider) property ?? method;

                var config = Kernel.Get<IInterceptorConfig>();

                if (config.DoNotInterceptAttribute == null)
                {
                    // A "do not intercept" attribute wasn't defined in the config, so go ahead and register
                    RegisterMethodInterceptor(type, method);
                }
                else if (!provider.IsDefined(config.DoNotInterceptAttribute, true))
                {
                    // The method wasn't decorated with the "do not intercept" attribute, so go ahead and register
                    RegisterMethodInterceptor(type, method);
                }
            }

            if (!plan.Has<ProxyDirective>())
            {
                plan.Add(new ProxyDirective());
            }
        }

        protected virtual void RegisterMethodInterceptor(Type type, MethodInfo method)
        {
            IAdvice advice = AdviceFactory.Create(method);

            advice.Callback = request => request.Context.Kernel.Get<TInterceptor>();

            var config = Kernel.TryGet<IInterceptorConfig>();
            if (config != null)
            {
                advice.Order = config.GetOrder<TInterceptor>();
            }

            AdviceRegistry.Register(advice);
        }

        protected virtual IEnumerable<MethodInfo> GetCandidateMethods(Type type)
        {
            MethodInfo[] methods = type.GetMethods(DefaultBindingFlags);

            return methods.Where(ShouldIntercept);
        }

        protected virtual bool ShouldIntercept(MethodInfo methodInfo)
        {
            return methodInfo.DeclaringType != typeof(object) &&
                   !methodInfo.IsPrivate;// &&
            //!methodInfo.IsFinal;
        }
    }
} 
```

**IInterceptorConfig.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Ninject.Extensions.Interception;

namespace Common.Interception.Interceptors
{
    public interface IInterceptorConfig
    {
        IInterceptorConfig SpecifyOrder<TInterceptor>(int order) where TInterceptor : IInterceptor;

        IInterceptorConfig SpecifyDoNotInterceptAttribute<TAttribute>() where TAttribute : Attribute;

        int GetOrder<TInterceptor>() where TInterceptor : IInterceptor;

        Type DoNotInterceptAttribute { get; }
    }
} 
```

**拦截器配置文件**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Ninject.Extensions.Interception;

namespace Common.Interception.Interceptors
{
    public class InterceptorConfig : IInterceptorConfig
    {
        private readonly Dictionary<Type, int> _orderDictionary = new Dictionary<Type, int>();

        public IInterceptorConfig SpecifyOrder<TInterceptor>(int order) where TInterceptor : IInterceptor
        {
            _orderDictionary.Add(typeof(TInterceptor), order);
            return this;
        }

        public IInterceptorConfig SpecifyDoNotInterceptAttribute<TAttribute>() where TAttribute : Attribute
        {
            DoNotInterceptAttribute = typeof(TAttribute);
            return this;
        }

        public int GetOrder<TInterceptor>() where TInterceptor : IInterceptor
        {
            return _orderDictionary[typeof(TInterceptor)];
        }

        public Type DoNotInterceptAttribute { get; private set; }
    }
} 
```

**TraceInterceptor.cs** - 只是一个示例拦截器

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Ninject.Extensions.Interception;

namespace Common.Interception.Interceptors
{
    public class TraceInterceptor : IInterceptor
    {
        public void Intercept(IInvocation invocation)
        {
            Console.WriteLine("Enter Method");

            invocation.Proceed();

            Console.WriteLine("Exit Method");
        }
    }
} 
```

**注意：**这是一个简单的控制台应用程序，展示了如何连接属性/拦截器。这依赖于 Ninject.Extensions.Interception.DynamicProxy 和 Ninject.Extensions.Conventions （以及它们所有必需的依赖项）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Text;
using System.Threading.Tasks;
using Common.Interception.Attributes;
using Common.Interception.Interceptors;
using Ninject;
using Ninject.Extensions.Conventions;
using Ninject.Planning.Strategies;
using SomeProject.Infrastructure;

namespace SomeProject.ConsoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            var kernel = new StandardKernel();

            kernel.Components.Add<IPlanningStrategy, AlternateInterceptorRegistrationStrategy<TraceAttribute, TraceInterceptor>>();
            kernel.Components.Add<IPlanningStrategy, AlternateInterceptorRegistrationStrategy<AuthorizeAttribute, AuthorizeInterceptor>>();

            // I needed a way to specify execution order and "DoNotIntercept" without deriving from attributes that would force ninject references all over my domain
            // not 100% confident this is the best way - but it works
            kernel.Bind<IInterceptorConfig>().ToConstant(new InterceptorConfig()
                                                             .SpecifyOrder<TraceInterceptor>(1)
                                                             .SpecifyOrder<AuthorizeInterceptor>(0)
                                                             .SpecifyDoNotInterceptAttribute<DoNotInterceptAttribute>());

            // SomeProject.Infrastructure contains my service classes decorated with my custom attributes
            kernel.Bind(x => x.FromAssembliesMatching("SomeProject.Infrastructure")
                              .SelectAllClasses()
                              .BindToSelf());

            var a = kernel.Get<SomeServiceA>();
            var b = kernel.Get<SomeServiceB>();

            Console.WriteLine("Calling a.DoSomeStuff()...");
            a.DoSomeStuff();

            Console.WriteLine("Calling b.DoMyThing()...");
            b.DoMyThing();

            Console.WriteLine("Calling b.NowTraceThis()...");
            b.NowTraceThis();

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:27:31.720

翻来翻去，发现这里也有人问和回答了一个类似的问题：[Ninject Intercept any method with certain attribute？](https://stackoverflow.com/questions/6386461/ninject-intercept-any-method-with-certain-attribute)

我将它与 Ninject.Extensions.Interception.Planning.Strategies 中的 InterceptorRegistrationStrategy 类的源代码结合使用，以创建我现在正在使用的派生。

*蟋蟀*

# actionscript-3 - 通过支持 as3gif 项目在 Flash AS3 中加载 gif 动画图像

> ID：15098759
> 
> 赞同：0
> 
> 时间：2013-02-26T20:36:34.330
> 
> 标签：actionscript-3, flash, animated-gif

在 gif 播放器中加载外部图像时遇到问题。我正在使用[as3gif 类包](http://code.google.com/p/as3gif/)
这是有效的：

```
 import flash.display.Sprite;
    import flash.net.URLRequest;
    import org.gif.player.GIFPlayer;
                    var request:URLRequest = new URLRequest("diego.gif");

                var player:GIFPlayer = new GIFPlayer();
                player.load(request);

                addChild(player); 
```

这不起作用：

```
import flash.display.Sprite;
    import flash.net.URLRequest;
    import org.gif.player.GIFPlayer;

                   var request:URLRequest = new URLRequest("http://www.idea-files.com/problemGif/127.gif");

                    var player:GIFPlayer = new GIFPlayer();
                    player.load(request);

                    addChild(player); 
```

当我在我的 flash CS5 中测试时，它加载了图像。但是在服务器上没有加载图像你能给我任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:06:07.507

如果您有权访问远程域，则可以在那里部署一个 crossdomain.xml 文件。这是 Flash Player 查找的文件，以查看该域是否允许来自其他站点的 Flash 应用程序访问其数据。通常对于 JPEG 和 PNG 图像，这不是必需的，除非您想要实际访问这些图像包含的位图数据。

默认情况下，Flash 不显示 GIF（或者可能只是动画 GIF），并且您正在使用的库可能会获取位图数据来制作动画。因此，在这种情况下，您可以考虑执行以下操作之一：

1.  在该服务器上部署一个 crossdomain.xml。我将省略执行此操作的步骤，因为[Adob​​e 对此进行了详细记录](http://kb2.adobe.com/cps/142/tn_14213.html)。

2.  如果您不控制该服务器，则应联系该站点并询问他们是否允许您下载图像，以便您可以将其部署在您自己的服务器上或将其嵌入到您的 SWF 中。或者询问他们是否可以为您部署 crossdomain.xml 文件。

3.  在 Flash Professional 中创建您自己的动画，这消除了对 GIF 库的需要。

4.  创建您自己的动画 GIF。

# c# - UriMapper 和重写的 URI 问题

> ID：15098765
> 
> 赞同：0
> 
> 时间：2013-02-26T20:36:45.183
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

对不起，蹩脚的问题标题，很难用一句话来描述这个问题。问题如下：

我需要确保用户在开始使用该应用程序之前已接受许可协议。我的想法是使用 UriMapper，它会检查用户之前是否接受过协议，如果没有，将他或她重定向到许可协议页面。

```
public override Uri MapUri(Uri uri)
    {
        if(!settingsStorage.IsLicenseAgreementAccepted)
            return LicenseAgreementPage;
        return uri;
    } 
```

但是，在许可协议页面上，如果我重写 OnNavigatedTo，我会看到导航 URI 不是当前页面的 URI，而是未映射的 URI，例如我的主页的地址。因此，当我尝试导航到该主页时，什么也没有发生，因为导航服务认为我已经在那里。

```
public partial class LicenseAgreementPage : PhoneApplicationPage
{
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e); // somehow e.Uri equals to /MainPage.xaml, instead of /LicenseAgreementPage.xaml
    }
} 
```

那么如何克服呢？UriMapper 在这里不适用吗？还是有一些解决方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:46:19.530

我有一个类似的问题，有些页面需要用户登录。如果用户试图访问需要登录的页面，他们会被重定向到登录页面，然后返回。也许您可以使用相同的策略？

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        if (Requirelogin && !CurrentAppManager.IsUserLoggedIn)
        { 

           // Transfer URI to the login page and save it, after successful login, 
           // the login page navigate back to the stored URI
            ((PhoneApplicationFrame)Application.Current.RootVisual).Navigate(new Uri("Login?" + Helpers.URI + "=" + e.Uri.ToString(), UriKind.Relative));
        }

        // if the user has just come from Login
        // remove it from the stack so they dont hit when pressing back
        var entry = NavigationService.BackStack.FirstOrDefault();

        if (entry != null && entry.Source.OriginalString.Contains("Login"))
        {
            NavigationService.RemoveBackEntry();
        }
    } 
```

# nuget - 让 NuGet.exe 完全绕过 http 代理的命令行开关是什么？

> ID：15098768
> 
> 赞同：0
> 
> 时间：2013-02-26T20:36:47.933
> 
> 标签：nuget, http-proxy

我在命令行开关上找到了大量文档，用于指定 NuGet.exe 在获取包时使用的 HTTP 代理。

告诉 NuGet.exe 完全绕过当前配置的 http 代理的开关是什么？我将自动化 NuGet 以在多台机器上运行，因此我不想在每台机器上手动配置代理设置，而是在 NuGet.exe 命令行中指定它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:21:42.400

据我所知，命令行工具中没有命令可以执行此操作。作为一种解决方法，您可以为不同类型的机器准备几个不同的 NuGet.config-s，然后将其复制到`%APPDATA%\NuGet\NuGet.Config`. 但在这种情况下，您启用的解决方案中`Package Restore`不得有代理设置`.nuget\NuGet.config`

# excel - Excel MATCH 功能不适用于自动数据更新

> ID：15098770
> 
> 赞同：0
> 
> 时间：2013-02-26T20:36:54.880
> 
> 标签：excel, excel-2013, excel-match

我有一个看起来像这样的 excel 函数：

```
=MATCH($A3,Table[Column],FALSE)+1 
```

这个函数的作用是返回匹配行的行号，其中

```
 table[column] == $A3 
```

这在静态文件中运行良好。但是，一旦我将数据`Table`设置为每分钟自动更新一次，它就会停止工作（`#N/A`函数返回时出现错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:41:04.863

在导入/更新表和数据透视表后，您通常需要使用数据工具栏中的全部刷新按钮。这应该可以解决这个问题！我什至会创建一个 VBA 宏来在每次更新后自动调用刷新。

我还发现在这种情况下使用命名范围或动态命名范围会更好。看看这个：http: [//support.microsoft.com/kb/830287](http://support.microsoft.com/kb/830287)

# java - PersistenceUnit 中的多个类

> ID：15098780
> 
> 赞同：2
> 
> 时间：2013-02-26T20:37:26.613
> 
> 标签：java, spring, hibernate

我有一个项目，它使用另一个项目作为库，我在两个项目上都有 Spring 和 Hibernate，问题是我需要将类从我的第一个项目映射到我的第二个项目。

这是我得到的例外：

```
Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Usuario is not mapped [SELECT u FROM Usuario u WHERE usuario = 'abc' order by idUsuario desc]
    at org.hibernate.hql.internal.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:180) 
```

所以我尝试用这种方式映射persistence.xml中的类：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="default">

    <class>com.planner.pov.model.Usuario</class>
    <class>com.planner.pov.model.LogWork</class>
    <class>com.planner.pov.model.Responsavel</class>
    <class>com.planner.pov.model.GrupoResponsavel</class>
    <class>com.planner.pov.model.Cargo</class>
    <class>com.planner.pov.model.TarefaBackLog</class>
    <class>com.planner.pov.model.ItemBackLog</class>
</persistence-unit> 
```

但是要映射的类太多了，都是链式的……有没有更好的办法呢？

@编辑

应用程序上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd">

    <context:component-scan base-package="com.planner.pov" />
    <bean
        class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

    <bean id="ConfiguradorDePropriedades"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <description>The service properties file</description>
        <property name="location" value="file:AppConfig.properties" />
    </bean>

    <bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSourceLocal" />
        <property name="packagesToScan" value="com.planner.pov" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="database" value="${database}" />
                <property name="showSql" value="false" />
                <property name="generateDdl" value="true" />
            </bean>
        </property>
    </bean>
    <bean id="dataSourceLocal"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${driver}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.user}" />
        <property name="password" value="${jdbc.pass}" />
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Configuração do LogWorkController -->
    <bean id="logWorkDao" class="br.javablocker.dao.LogWorkDaoImpl" />

    <!-- Configuração do ClockMainController -->
    <bean id="clockMainController" class="br.javablocker.controller.PlannerClockMainController">
        <property name="usuarioController" ref="usuarioController" />
        <property name="logWorkDao" ref="logWorkDao" />
    </bean>

    <!-- Configuração do UsuarioController -->
    <bean id="usuarioDao" class="br.javablocker.dao.UsuarioDaoImpl" />
    <bean id="responsavelDao" class="com.planner.pov.dao.ResponsavelDaoImpl" />

    <bean id="usuarioController" class="br.javablocker.controller.UsuarioController">
        <property name="usuarioDao" ref="usuarioDao" />
        <property name="responsavelDao" ref="responsavelDao" />
        <property name="logWorkDao" ref="logWorkDao" />
    </bean>

    <bean id="logWorkController" class="br.javablocker.controller.LogWorkController">
        <property name="logWorkDao" ref="logWorkDao" />
    </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:50:48.353

在您的 Spring 配置设置中，组件扫描以查找实体，请注意您必须包含上下文命名空间：

```
<context:component-scan base-package="com.planner.pov.model"/> 
```

通过此设置，您应该能够从 persistence.xml 中删除类：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="default">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

</persistence-unit> 
```

# python - r.findall 的 Python 正则表达式

> ID：15098789
> 
> 赞同：0
> 
> 时间：2013-02-26T20:38:02.783
> 
> 标签：python, regex

我正在使用 findall 来分隔文本。

我从这个表达式开始 re.findall(r'(. *?)(\$.* ?\$)' 但在找到最后一段文本后它没有给我数据。我错过了 '6\n\n '

如何获得最后一段文字？

这是我的python代码：

```
#!/usr/bin/env python

import re

allData = '''
1
2
3 here Some text in here 
$file1.txt$
4 Some text in here and more  $file2.txt$
5 Some text $file3.txt$ here  
$file3.txt$
6

'''

for record in re.findall(r'(.*?)(\$.*?\$)|(.*?$)',allData,flags=re.DOTALL) :
print repr(record) 
```

我得到的输出是：

```
('\n1\n2\n3 here Some text in here \n', '$file1.txt$', '')
('\n4 Some text in here and more  ', '$file2.txt$', '')
('\n5 Some text ', '$file3.txt$', '')
(' here  \n', '$file3.txt$', '')
('', '', '\n6\n')
('', '', '')
('', '', '') 
```

我真的很想要这个输出：

```
('\n1\n2\n3 here Some text in here \n', '$file1.txt$')
('\n4 Some text in here and more  ', '$file2.txt$')
('\n5 Some text ', '$file3.txt$')
(' here  \n', '$file3.txt$')
('\n6\n', '', ) 
```

* * *

背景信息，以防您需要查看大图。

我想你有兴趣，我正在用 python 重写它。我控制了其余的代码。我只是从 findall 中得到了太多东西。

[https://discussions.apple.com/message/21202021#21202021](https://discussions.apple.com/message/21202021#21202021)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:50:37.080

如果我从该 Apple 链接中理解正确，您想要执行以下操作：

```
import re

allData = '''
1
2
3 here Some text in here
$file1.txt$
4 Some text in here and more  $file2.txt$
5 Some text $file3.txt$ here
$file3.txt$
6

'''

def read_file(m):
    return open(m.group(1)).read()

# Sloppy matching :D
# print re.sub("\$(.*?)\$",  read_file, allData)
# More precise.
print re.sub("\$(file\d+?\.txt)\$",  read_file, allData) 
```

**编辑**正如奥斯卡建议使匹配更精确。

IE。取`$`s 之间的文件名并读取文件中的数据，这就是上面要做的。

示例输出：

```
1
2
3 here Some text in here

I'am file1.txt

4 Some text in here and more  
I'am file2.txt

5 Some text 
I'am file3.txt
 here

I'am file3.txt

6 
```

文件：

```
==> file1.txt <==

I'am file1.txt

==> file2.txt <==

I'am file2.txt

==> file3.txt <==

I'am file3.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:56:57.090

要获得您想要的输出，您需要将模式限制为 2 个捕获组。（如果您使用 3 个捕获组，则每个“记录”中将有 3 个元素）。

您可以将第二组设为可选，这应该可以完成工作：

```
r'([^$]*)(\$.*?\$)?' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T21:46:56.573

这是解决替换问题的一种方法`findall`。

```
def readfile(name):
    with open(name) as f:
        return f.read()

r = re.compile(r"\$(.+?)\$|(\$|[^$]+)")

print "".join(readfile(filename) if filename else text 
    for filename, text in r.findall(allData)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:56:20.533

这个部分解决了你的问题

```
import re

allData = '''
1
2
3 here Some text in here 
$file1.txt$
4 Some text in here and more  $file2.txt$
5 Some text $file3.txt$ here  
$file3.txt$
6

'''

for record in re.findall(r'(.*?)(\$.*?\$)|(.*?$)',allData.strip(),flags=re.DOTALL) :
    print  [ x for x in record if x] 
```

生产输出

```
['1\n2\n3 here Some text in here \n', '$file1.txt$']
['\n4 Some text in here and more  ', '$file2.txt$']
['\n5 Some text ', '$file3.txt$']
[' here  \n', '$file3.txt$']
['\n6']
[] 
```

避免最后一个空列表

```
for record in re.findall(r'(.*?)(\$.*?\$)|(.*?$)',allData.strip(),flags=re.DOTALL) :
    if ([ x for x in record if x] != []):
        print  [ x for x in record if x] 
```

# visual-studio-2010 - stack select() 函数在 Visual Studio 中不起作用

> ID：15098793
> 
> 赞同：0
> 
> 时间：2013-02-26T20:38:21.850
> 
> 标签：visual-studio-2010, sockets, libcurl

以下是来自[http://curl.haxx.se/libcurl/c/sendrecv.html](http://curl.haxx.se/libcurl/c/sendrecv.html)的示例代码的一部分：

```
static int wait_on_socket(curl_socket_t sockfd, int for_recv, long timeout_ms)
{
  struct timeval tv;
  fd_set infd, outfd, errfd;
  int res;

  tv.tv_sec = timeout_ms / 1000;
  tv.tv_usec= (timeout_ms % 1000) * 1000;

  FD_ZERO(&infd);
  FD_ZERO(&outfd);
  FD_ZERO(&errfd);

  FD_SET(sockfd, &errfd); /* always check for error */ 

  if(for_recv)
  {
    FD_SET(sockfd, &infd);
  }
  else
  {
    FD_SET(sockfd, &outfd);
  }

  ///* select() returns the number of signalled sockets or -1 */ 
  res = select(sockfd + 1, &infd, &outfd, &errfd, &tv);
  return res;
} 
```

它在 Linux 上运行良好，但是当我将它带到 Visual Studio 2010 时，它抱怨 select() 函数。我正确编译并链接了所有 cURL 库/dll，我什至下载了一些东西作为 http 请求。

但是当我尝试使用套接字 select() 函数时，它会抱怨以下错误：

```
error LNK2028: unresolved token (0A00034C) "extern "C" int __stdcall select(int,struct fd_set     *,struct fd_set *,struct fd_set *,struct timeval const *)" (?select@@$$J220YGHHPAUfd_set@@00PBUtimeval@@@Z) referenced in function "int __cdecl `anonymous namespace'::wait_on_socket(unsigned int,int,long)" (?wait_on_socket@?A0x7d9db21b@@$$FYAHIHJ@Z)

error LNK2019: unresolved external symbol "extern "C" int __stdcall select(int,struct fd_set *,struct fd_set *,struct fd_set *,struct timeval const *)" (?select@@$$J220YGHHPAUfd_set@@00PBUtimeval@@@Z) referenced in function "int __cdecl `anonymous namespace'::wait_on_socket(unsigned int,int,long)" (?wait_on_socket@?A0x7d9db21b@@$$FYAHIHJ@Z) 
```

此外，select() 函数似乎与 Windows 兼容：http: [//msdn.microsoft.com/en-us/library/ms740141 (VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms740141(VS.85).aspx)

我错过了什么吗？有人可以告诉我如何解决这个问题吗？

谢谢，--鲁迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T08:12:53.927

您必须链接到 Microsoft 套接字库。告诉您的链接器在您的项目中使用 Ws2_32.lib。在 Visual Studio 2010 中，将此库添加到 Project->Properties->Linker->Input->Add。依赖关系。

或者在你的代码中添加这个库：

`#pragma comment(lib, "Ws2_32.lib")`

# javascript - MarkerClusterer 缩放问题

> ID：15098796
> 
> 赞同：1
> 
> 时间：2013-02-26T20:38:31.427
> 
> 标签：javascript, google-maps, google-maps-api-3, google-maps-markers, markerclusterer

我正在使用最新版本的 MarkerClusterer 和 Google Maps API v3，我想我发现了一个错误！

我的谷歌地图 minZoom 设置为 1。从级别 1 缩放到任何级别并返回到 1 就可以了。当我尝试从 1 级缩小到 0 级时，会看到该错误。

当我单击以从级别 1 缩小到级别 0 时，gMap UI 不允许按预期进行缩放，但是我的所有 markerCluster 都消失了，当我下降到缩放级别 2 并返回到级别 1 时它们重新出现.

我已经在 Google Maps API v3 的 Google Group 页面上发布了此内容，但到目前为止没有任何回复（截至今天已经超过一周）。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T00:49:16.307

这更像是 Maps-API 中的错误而不是 markerClusterer 中的错误，但您可以在[markerClusterer.js中修复它](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer.js)

当您（尝试）将缩放设置为 0 时，我不确定您单击的位置（当我使用缩放控件时不会出现这个问题），但是当我使用设置缩放时会发生这种情况`map.setZoom(0)`

问题：API 报告缩放为 0，但这是不正确的，因为缩放将设置为 1（minZoom）。

**修复：**
替换 marcerclusterer.js 的这一部分：

```
// Add the map event listeners
  var that = this;
  google.maps.event.addListener(this.map_, 'zoom_changed', function() {
    var zoom = that.map_.getZoom();

    if (that.prevZoom_ != zoom) {
      that.prevZoom_ = zoom;
      that.resetViewport();
    }
  }); 
```

...接着就，随即：

```
 // Add the map event listeners
  var that = this;
  google.maps.event.addListener(this.map_, 'zoom_changed', function() {
    var zoom = that.map_.getZoom(),
        minZoom=that.map_.minZoom||0,
        maxZoom=Math.min(that.map_.maxZoom||100,
                         that.map_.mapTypes[that.map_.getMapTypeId()].maxZoom);
        zoom=Math.min(Math.max(zoom,minZoom),maxZoom);

    if (that.prevZoom_ != zoom) {
      that.prevZoom_ = zoom;
      that.resetViewport();
    }
  }); 
```

# makefile - 收到错误“使用 -fPIC 重新编译”

> ID：15098803
> 
> 赞同：1
> 
> 时间：2013-02-26T20:38:54.197
> 
> 标签：makefile, centos, asterisk, recompile, fpic

在 centos 中的 ./configure asterisk 之后，我输入 make 命令但收到以下错误

/usr/bin/ld: /usr/local/lib/liblua.a(lapi.o): 重定位 R_X86_64_32 反对 `luaO_nilobject_' 在制作共享对象时不能使用；使用 -fPIC /usr/local/lib/liblua.a 重新编译：无法读取符号：值错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:02:47.933

我解决了这个问题。我在 64 位平台上编译，但 /usr/local/lib/liblua.a 是 32 位的。所以我只是禁用它make menuselect。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:09:08.677

你的问题似乎是 lua 库。如果您在 centos 上，请尝试

```
yum install lua lua-devel 
```

然后`./configure`在星号上重新运行。

# c# - C#在计算机之间传递套接字连接

> ID：15098804
> 
> 赞同：0
> 
> 时间：2013-02-26T20:38:55.360
> 
> 标签：c#, sockets

我正在寻找一种简单的方法来模拟仲裁应用程序以进行测试。这个想法是创建三个独立的节点（在三台不同的计算机上），这些节点将作为我正在测试的 C# 服务器套接字的客户端工作。假设我正在尝试建立 4 个客户端-服务器连接，我希望仲裁器随机确定哪个节点获得哪些连接。如果其中一个节点死亡（应用程序已关闭），我希望仲裁器将其连接传递给另一个节点。当节点重新打开时，我希望仲裁器重新分配连接。任何链接或示例代码都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:33:44.587

套接字连接不是这样工作的——它们是在两台机器之间创建的。好消息是创建新连接的成本并不高。

如果您想详细了解如何使用它们，阅读[Berkely Sockets](http://en.wikipedia.org/wiki/Berkeley_sockets)可能是值得的。

除非您的意思是您不关心实际的连接对象，而是关心连接的总数。在这种情况下，您可以使用[Semaphore](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)或[SemaphoreSlim](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx)来控制连接总数。这将允许您随机分配连接，直到达到最大数量。然后，当连接丢失时，您再次重新分配，直到信号量被最大化；当新客户端连接时，您可以执行相反的过程 - 关闭与随机当前客户端的连接并为新客户端打开新连接，直到数量达到您的喜好。

让我知道这是否是您的想法 - 如果您正在考虑其他事情，我不想太深入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:35:19.853

您不能真正在计算机之间“传递”套接字。创建它们时，TCP/IP 堆栈会分配各种无法传输的设置，例如 TCP 序列号等。但是，您可以做的是让您的“仲裁者”在所有传入连接中保持活跃。然后，仲裁器将为您的节点创建另一个套接字，以便它将充当两者之间的代理。

您应该查找负载平衡通用架构，这正是您想要的我认为

# c# - 尝试仅编辑时间时 MVC 4 日期时间验证失败

> ID：15098805
> 
> 赞同：0
> 
> 时间：2013-02-26T20:38:56.170
> 
> 标签：c#, datetime, asp.net-mvc-4, validation

从数据库优先方法开始，我试图仅编辑 DateTime 字段中的时间，该字段是从我无法更改的表中生成的（因此将其从 SQL 的日期时间更改为其他内容是不可能的）。我遇到的问题是验证器一直告诉我，除非我还包括日期，否则框中的内容不是有效日期。

这是我到目前为止所拥有的：

模型：

```
[DisplayName("Time")]
[DisplayFormat(DataFormatString = "{0:h:mm tt}", ApplyFormatInEditMode = true)]
public System.DateTime PrintTime { get; set; } 
```

看法：

```
 <div class="editor-field">
        @Html.EditorFor(model => model.PrintTime)
        @Html.ValidationMessageFor(model => model.PrintTime)
    </div> 
```

我尝试了 ModelBinder，并且尝试使用自定义验证属性（两者都成功编译并从此处获取），但无论我做什么，即使使用这些解决方案，我在验证时遇到的错误是：

“时间字段必须是日期”

我已经看到其他线程表明 jquery 可能具有我无法过去的日期要求（就线程建议的解决方案而言），并且似乎解决方案可以完全禁用验证。显然，我想继续验证（它适用于其他一切）。

那么我能做些什么来解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:43:34.987

我用一种解决方法解决了这个问题。首先，我在模型中添加了一个不在数据库中的字符串，然后在模型中添加了一些方法。如果从数据库中刷新模型，这将导致问题，所以要小心！

这是添加到模型中的内容：

```
 [DisplayName("Daily Print Time")]
    [RegularExpression("^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9][\\s]*[apAP][mM][\\s]*", ErrorMessage="Invalid Time Format")]
    [Required]
    public string sPrintTime { get; set; }
    [DisplayName("Daily Print Time")]
    [DisplayFormat(DataFormatString = "{0:h:mm tt}", ApplyFormatInEditMode = true)]
    [Required]
    public System.DateTime PrintTime { get; set; } 
```

方法：

```
 public void UpdatePrintTime()
    {
        //This is a workaround to get past jquery validation errors when
        //attempting to edit a DateTime value directly with just a time string.
        DateTime dt = DateTime.MinValue;
        DateTime.TryParse("12/30/1899 " + sPrintTime.ToUpper(), out dt);
        if (dt != DateTime.MinValue)
        {
            PrintTime = dt;
        }
    }
    public void UpdatePrintString()
    {
        sPrintTime = PrintTime.ToString("h:mm tt");
    } 
```

正则表达式验证并不完美（例如，它仍然允许您输入“23:59 am”，但方法 UpdatePrintTime() 使用 TryParse() 处理了这一点。

接下来，我更新了 Edit.cshtml 文件，如下所示：

```
@Html.HiddenFor(model => model.PrintTime) 
```

需要添加上述行以避免由于缺少字段而导致的运行时错误

```
<div class="editor-field">
    @Html.EditorFor(model => model.sPrintTime)
    @Html.ValidationMessageFor(model => model.sPrintTime)
</div> 
```

我还必须用上面的 <div> 更新 Create.cshtml 文件。注意：我没有包含隐藏的 PrintTime 字段，因为我添加了方法，我在控制器操作 Edit 和 Create 中使用如下：

```
 [HttpPost]
    public ActionResult Create(PrintJob printjob)
    {
        if (ModelState.IsValid)
        {
            printjob.UpdatePrintTime();
            db.PrintJobs.Add(printjob);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ...
        return View(printjob);
    }

    public ActionResult Edit(int id = 0)
    {
        PrintJob printjob = db.PrintJobs.Find(id);
        if (printjob == null)
        {
            return HttpNotFound();
        }
        printjob.UpdatePrintString();
        ...
        return View(printjob);
    }

    [HttpPost]
    public ActionResult Edit(PrintJob printjob)
    {
        if (ModelState.IsValid)
        {
            printjob.UpdatePrintTime();
            db.Entry(printjob).State = EntityState.Modified;
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        printjob.UpdatePrintString();
        ...
        return View(printjob);
    } 
```

所有这些都是让它工作所必需的。现在，当我尝试输入错误的内容时，它会给我一个不同的验证错误，并仔细检查输入的内容，即使它通过了验证。如果它通过了客户端验证，但没有通过 TryParse()，那么如果处于编辑模式，它将完全保持时间不变。如果处于创建模式，则会引发异常。

所以这两个缺陷是 1) 验证与 TryParse() 不匹配，因此 2) 可能会漏掉一个错误的时间字符串，这会导致异常。

除此之外，这是我提出的完整解决方案。:)

# c# - 使用 IF 语句处理 Enter 键

> ID：15098808
> 
> 赞同：2
> 
> 时间：2013-02-26T20:39:07.707
> 
> 标签：c#, asp.net

我正在开发一个使用 USB 条形码扫描仪的简单 ASP.NET C# 应用程序。我有一个详细信息视图，默认为插入，底部有一个提交按钮。当页面加载时，表单从 URL 中获取 ID 并将其输入到第一个字段，然后将光标焦点设置到第二个字段。

默认情况下，USB 扫描仪会输入其扫描的数字，然后按 Enter 键。我想在其中放置一个处理程序，基本上说如下：

*   如果光标在 textbox2 中并按下 Enter 键，则将数据保留在 textbox2 中并将光标移动到 textbox3。
*   如果光标在 textbox3 中并按下 Enter 键，则将数据保留在 textbox3 中并点击提交按钮。

这个想法是，用户可以连续扫描 3 或 4 个条形码，填写表单中的每个文本框，而无需 A）每次触发提交按钮，以及 B）不必在扫描之前单击每个字段（如果我禁用输入键）。

这是我的代码的开头，它从 URL 中获取 ID 并填充 textbox1，然后将焦点设置为 textbox2。

```
protected void DetailsView1_DataBound(object sender, EventArgs e)
    {
        if (DetailsView1.CurrentMode == DetailsViewMode.Insert)
        {
            if (!string.IsNullOrEmpty(Request.QueryString["id"]))
            {
                    TextBox tbox1 = DetailsView1.FindControl("TextBox1") as TextBox;
                    TextBox tbox2 = DetailsView1.FindControl("TextBox2") as TextBox;
                    if (tbox != null)
                    {
                        tbox.Text = Request.QueryString["id"].ToString();
                    }
                    SetFocus(tbox2);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:51:44.767

但我认为输入流程已经有效，不是吗？为什么不只使用 JQuery 为文本框添加流？

```
$('#TextBox1').keydown(function(e) {
   var code = (e.keyCode ? e.keyCode : e.which); // Crossbrowser fix
   if(code === 13) {          //If Enter keycode
     $('#TextBox2').focus(); // Set focus to second textbox
     e.preventDefault();     // Prevent that the enter does a submit
   }
}); 
```

如果输入流程不起作用，您可以为表单配置此项。

# linux - 将bash用户输入传递给sql语句时出错

> ID：15098809
> 
> 赞同：0
> 
> 时间：2013-02-26T20:39:11.467
> 
> 标签：linux, oracle, bash, sqlplus

我正在尝试编写一个 bash 函数来提示模式所有者并删除所有相应的模式。

```
function db_cleanup

{
        #accept user input
        read -p "Schema Owner: " input

        sqlplus -s $usr1/$pwd1@$sid1 << EOF

declare
        usr_d varchar2(10) := '&input'; --reas user input here
        sqlstmt varchar2(128);
begin   
        sqlstmt := 'drop user '||$usr_d||' cascade';
        dbms_output.put_line(sqlstmt); execute immediate sqlstmt;

        sqlstmt := 'drop user ab_'||$usr_d||' cascade';
        dbms_output.put_line(sqlstmt); execute immediate sqlstmt;

        sqlstmt := 'drop user xy_'||$usr_d||' cascade';
        dbms_output.put_line(sqlstmt); execute immediate sqlstmt;
end;
/
EOF
} 
```

输出如下所示：

```
 Enter Schema Owner: ABC
    Enter value for usr_in: 
    User requested Interrupt or EOF detected.

-bash-3.2$ 
```

请让我知道如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:59:50.393

汇总@244an 和我自己的评论：

*   `'&input'`应该是`'$input'`，因为你指的是一个 shell 变量。
*   `$usr_d`应该是`usr_d`（没有`$`），因为您在这里*不是*指 sheel 变量；这来自 PL/SQL`declare`部分。
*   SQL*Plus的`-s`标志会抑制横幅；但是您最初的问题表明，因此不确定您是否在途中丢失了它。

所以：

```
function db_cleanup
{
        #accept user input
        read -p "Schema Owner: " input

        sqlplus -s $usr1/$pwd1@$sid1 << EOF
set timing off
set feedback off
set serverputput on size 10000
spool $log_file.out

declare
        usr_d varchar2(10) := '$input';
        sqlstmt varchar2(128);
begin   
        sqlstmt := 'drop user '||usr_d||' cascade';
        dbms_output.put_line(sqlstmt);
        execute immediate sqlstmt;

        sqlstmt := 'drop user ab_'||usr_d||' cascade';
        dbms_output.put_line(sqlstmt);
        execute immediate sqlstmt;

        sqlstmt := 'drop user xy_'||usr_d||' cascade';
        dbms_output.put_line(sqlstmt);
        execute immediate sqlstmt;
end;
/
EOF
} 
```

不确定您是否可能要清理您获得的架构......您真的不想意外放弃许多用户。[任何](http://docs.oracle.com/cd/E11882_01/server.112/e10575/tdpsg_user_accounts.htm#BABGEGFI)一个开始，你可能也有自己的。

# css - 歌剧中的css3过渡导致边界底部不随机出现

> ID：15098813
> 
> 赞同：0
> 
> 时间：2013-02-26T20:39:26.230
> 
> 标签：css, opera, transitions

我创建了 css3 菜单。链接在这里[http://test.partnuz.hekko.pl/eliticon/1032px/](http://test.partnuz.hekko.pl/eliticon/1032px/)。尽管它正确地渲染了歌剧中的过渡，但有时会显示底部边框，有时不显示。有什么解决办法吗？

链接到 css 代码是[http://test.partnuz.hekko.pl/eliticon/1032px/css/dropdown.css](http://test.partnuz.hekko.pl/eliticon/1032px/css/dropdown.css)

# asp.net-mvc-4 - jqGrid 从 url 选项获取数据

> ID：15098817
> 
> 赞同：0
> 
> 时间：2013-02-26T20:39:41.947
> 
> 标签：asp.net-mvc-4, jqgrid

我最难从我的 url 中提取数据并将其放入我在 asp.net MVC4 中的 jqGrid 中。我在这里想念什么？

```
 $(document).ready(function () {
        jQuery("#frTable").jqGrid ({
            cmTemplate: { sortable: false },
            caption: '@TempData["POPNAME"]' + ' Population',
            url: '@Url.Action("GetAjaxPagedGridData", "Encounters", new { popId = TempData["POPULATIONID"] })',//'/Encounters/GetAjaxPagedGridData/'+ '',
            datatype: "jsonstring",
            mtype: 'GET',
            pager: '#pager',
            height: '450',
            ... 
```

然后你进入 colNames 和 colModels 以及所有与这个特定查询相切的东西。这是返回我的数据的方法。我只想说我做客户端分页的东西似乎有效。但除非我能真正看到数据，否则我无法验证？

我在这里做错了什么？

```
 public string GetAjaxPagedGridData(int page, int rows, int popId) {
        string userID = HttpContext.User.Identity.Name;
        DataRepository dr = new DataRepository();
        string encounter = dr.Get(popId, userID, "1", page, rows, "");
        return encounter;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:15:44.670

您可以`postData`在表单中使用 jqGrid 选项

```
postData: {
    popId: 123
} 
```

或形式

```
postData: {
    popId: function () {
        return 123;
    }
} 
```

您应该另外使用`datatype: "json"`而不是`datatype: "jsonstring"`.

# c++ - 在 Windows 上安装 MongoDB C++ 驱动程序。

> ID：15098819
> 
> 赞同：0
> 
> 时间：2013-02-26T20:39:58.103
> 
> 标签：c++, windows, qt, mongodb, mingw

如何在 Windows 中编译和链接 MongoDB C++ 驱动程序？我想在 Qt 中为 MinGW 使用 Mongodb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:19:13.123

请参阅 10gen 的[C++ 驱动程序构建说明](https://wiki.10gen.com/pages/viewpage.action?pageId=21266598)。有一个部分用于在 Windows 上构建。

# java - 用大写拆分字符串

> ID：15098820
> 
> 赞同：2
> 
> 时间：2013-02-26T20:40:03.573
> 
> 标签：java, string

我有一些字符串，我想逐字拆分它们。它们有不同的格式，例如：

```
THIS-IS-MY-STRING
ThisIsMyString
This_Is_My_String
This is my string 
```

我用：

```
String[] x = str1.split("(?=[A-Z])|[_]|[-]|[ ]"); 
```

但是有一些问题：

1.  x 数组中的某些元素将为空
2.  对于第一个字符串，我想要“THIS”，但拆分的结果是“T”、“H”、“I”、“S”</li>

我应该如何更改拆分以达到我的目的？请你帮助我好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:54:22.390

您还需要包括look-behind，在这里：

```
String[] x = str1.split("([-_ ]|(?<=[^-_ A-Z])(?=[A-Z]))"); 
```

`[-_ ]`手段`-`或`_`空间。

`(?<=[^-_ A-Z])`表示前一个字符不是`-`, `_`, 空格或`A-Z`.

`(?=[A-Z])`表示下一个字符是`A-Z`.

[参考](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)。

**编辑：**

不幸的是，没有办法（我知道）你可以在避免或空字符串的同时使用`split`拆分。`_CITY_ABC``_CITY`

但是，如果不是空的，您只能处理第一个和最后一个字符串，但这并不理想。

为此，我建议`Matcher`：

```
String str1 = "_CityCITY_";
Pattern p = Pattern.compile("[A-Z][a-z]+(?=[A-Z]|$)|[A-Za-z]+(?=[-_ ]|$)");
Matcher m = p.matcher(str1);
while (m.find())
   System.out.println(m.group()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:44:16.033

试试 Regex.Split()。第一个参数是要拆分的字符串，第二个字符串是您的正则表达式。希望这可以帮助。

# node.js - 使用 node.js 监听 2 个不同的端口

> ID：15098823
> 
> 赞同：31
> 
> 时间：2013-02-26T20:40:30.280
> 
> 标签：node.js, sockets, webserver

我目前正在使用 Sockets.io 与客户端通信，从端口发送 JSON 等。

这一切都很好，但我想做的是同时在另一个端口上监听以创建一种用于测试目的的管理页面。

例如，该页面将有一个按钮，用于为连接在另一个端口上的所有客户端发送某种类型的 JSON。

如果这不理想，那么对其他简单解决方案的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-02-26T20:49:08.953

只需创建另一个 http 实例并将其用于侦听您感兴趣的端口即可。让我给你看一个例子：

```
var http = require('http');

http.createServer(onRequest_a).listen(9011);
http.createServer(onRequest_b).listen(9012);

function onRequest_a (req, res) {
  res.write('Response from 9011\n');
  res.end();
}

function onRequest_b (req, res) {
  res.write('Response from 9012\n');
  res.end();
} 
```

然后，您可以测试它（使用您的浏览器，或`curl`）：

```
$ curl http://localhost:9011
Response from 9011

$ curl http://localhost:9012
Response from 9012 
```

# python - 通过 twistd 启动 Twisted 应用程序时，如何向应用程序发送命令行参数？

> ID：15098827
> 
> 赞同：0
> 
> 时间：2013-02-26T20:40:45.673
> 
> 标签：python, twisted

当像这样启动一个 Twisted 应用程序时，

```
twistd -y application.py 
```

如何发送应用程序特定的命令行参数，例如

```
twistd -y application.py app_arg1 app_arg2 --app_flag 
```

或类似的东西？

上面的语法`twistd`会尝试为自己解释所有参数（即 的参数`twistd`），因此（通常）失败并显示错误的命令行参数消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T17:32:15.187

您不能将参数传递给 tac 文件（application.py 是一个 tac 文件，即使它的名称没有反映这一点，因为您正在使用 -y 选项）。

一个 tac 文件**是**配置文件。它不需要**配置**。

如果您希望能够将命令行配置信息传递给您的应用程序，您可能希望编写一个`twistd` *插件*而不是一个 tac 文件。

请参阅[插件操作方法](http://twistedmatrix.com/documents/current/core/howto/tap.html)。

# cakephp - 在 CakePHP 中实现授权后 JSON 视图不起作用

> ID：15098829
> 
> 赞同：1
> 
> 时间：2013-02-26T20:40:49.637
> 
> 标签：cakephp, cakephp-2.3

由于我在我的 cakephp 项目中实现了授权，因此我无法再使用 JSON 访问我的视图。我是否必须在任何地方设置特定设置才能使其再次工作？我希望将 autoComplete 添加到 allowedActions 和 isAuthorized 可以解决问题

app\Controller\BrandsController.php（从不必要的代码中删除）

```
<?php
    App::uses('Sanitize', 'Utility');

    class BrandsController extends AppController {
        public $helpers = array('Html', 'Form', 'Session');
        public $components = array('Session', 'RequestHandler');

        public function beforeFilter() {
            parent::beforeFilter();
            $this->Auth->allowedActions = array('autoComplete');
        }

        public function isAuthorized($user) {
            if ($this->action === 'view' || $this->action === 'index' || $this->action === 'autoComplete') {
                return true;
            }
            return parent::isAuthorized($user);
        }

        public function autoComplete($name = null)
        {
            if(!$name)
            {
                $name = @$this->params->query['name'];
            }

            $name = Sanitize::paranoid($name, array(' '));

            if (!$name || empty($name))
            {
                new NotFoundException(__('Invalid searchquery'));
            }
            else
            {

                $objects = $this->Brand->find('list', 
                    array(
                        'conditions' => array("Brand.name LIKE" => "%" . $name . "%")
                    )
                );
                $this->layout = 'ajax';
                $this->RequestHandler->setContent('json', 'application/json' ); 
                $this->set(compact('objects'));
                $this->render('json/output_json');
            }
        }
    }
?> 
```

应用\查看\品牌\json\output_json.ctp

```
<?php
    Configure::write('debug', 0);
    echo json_encode($objects);
?> 
```

称呼

```
<?php 
    $brandsAutoCompleteUrl = Router::url(array('controller' => 'brands', 'action' => 'autoComplete')); 
?>
<script type="text/javascript">
    $(document).ready(function(){
        $.getJSON('<?php echo $brandsAutoCompleteUrl; ?>', { name: 'test' }, function(data) {
            // never called
        });
    });
</script> 
```

在我的 Chrome 调试窗口中，它是

```
GET http://localhost/cakephp/brands/autoComplete?name=tes 500 (Internal Server Error) 
```

当我直接从浏览器调用这个 url 时，我得到了预期的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:29:23.353

我通过更换解决了这个问题

```
$this->RequestHandler->setContent('json', 'application/json' ); 
```

经过

```
$this->response->type(array('json' => 'application/json')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T23:16:38.527

正确的允许是

```
$this->Auth->allow('view', 'index'); 
```

这只能在允许操作的所有者的控制器中完成 - [链接到文档](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html#making-actions-public)

此外 - 在 firefox firebug 或 chrome 中，您可以查看对 500 HTTP 错误的响应，该错误通常是带有精确 CakePHP 错误的 html 代码 - 首先对此进行调查。

为什么在这个控制器而不是 AppController 中添加组件和助手？这个组件对于任何控制器都是通用的——将它们放在 AppController 中是合理的。
如果您没有注意到 - AppController 的所有助手和组件都与子控制器的助手和组件合并。您不能通过替换子控制器中的组件来关闭 Auth 组件。

建议：
避免在`@$this->params->query['name'];`. `!empty($this->params->query['name'])`在“如果”条件下使用

如果您不知道：`empty($name) == !$name`，也`!$name`可以在变量 $name 未启动时触发错误 - [http://www.php.net/manual/ru/types.comparisons.php](http://www.php.net/manual/ru/types.comparisons.php)（第一个表）

# c++ - 一副纸牌，不知道如何洗牌

> ID：15098830
> 
> 赞同：0
> 
> 时间：2013-02-26T20:40:51.487
> 
> 标签：c++

我的代码已经制作了一副纸牌，但我该如何洗牌呢？我的随机播放功能似乎不起作用。我可能在其他地方也有一些错误，如果你能看到它们，请告诉我。它编译并运行，但它按顺序列出卡片。

```
#include <iostream>
#include <string>
#include <ctime>
#include <vector>
using namespace std;

class Card{
public:
    int face;
    int suit;
    void setData(int f, int s){
        face = f;
        suit = s;
    }
    string toString(int F, int S){
        static string faces[13] = {"Two", "Three", "Four", "Five", "Six", "Seven",       "Eight", "Nine", "Ten", "Jack", "Queen", "King", "Ace"};
        static string suits[4] = {"Clubs", "Spades", "Diamonds", "Hearts"};
        string FandS = faces[F] + " of " + suits[S] + "\n";
        return FandS;
    }
};

class DeckOfCards:public Card{
public:
    Card deck[13][4];
    int currentCard;

    void shuffle(){
        srand (time(0));
        Card temp[13][4]; int R, r;
        for(int shuf=0; shuf<52; shuf++){
            for(int i=0; i<13; i++){
                for(int j=0; j<4; j++){
                    R = rand()%13;  
                    r = rand()%4;
                    temp[i][j] = deck[i][j];
                    deck[i][j] = deck[R][r];
                    deck[R][r] = temp[i][j];
                }
            }
        }
    }

    bool moreCards(){
        currentCard=52;
        currentCard--;
        if(currentCard>0){
            return true;
        }else 
            return false;
    }

    void dealCard(){
        for(int i=0; i<13; i++){
            for(int j=0; j<4; j++){
                cout << toString(i, j);
            }
        }
    }

    DeckOfCards(){  
        for(int i=0; i<13; i++){
            for(int j=0; j<4; j++){
                deck[i][j].setData(face, suit);
            }
        }
    }

};

int main(){
    DeckOfCards myDeck;
    myDeck.shuffle();
    myDeck.dealCard();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:48:15.143

这就是您的牌按顺序“发牌”的原因：

```
void dealCard(){
    for(int i=0; i<13; i++){
        for(int j=0; j<4; j++){
            cout << toString(i, j);
        }
    }
} 
```

你根本不使用甲板。您只需按顺序打印出来。

尝试这个：

```
cout << toString(deck[i][j].face, deck[i][j].suit); 
```

你真的应该写一个`Card::toString`没有参数的函数并让它使用它的`face`和`suit`成员。

```
cout << deck[i][j].toString(); 
```

郑重声明，我真的不喜欢你，你把你的牌组安排成二维数组。完全没有必要这样做。而且我更不喜欢`DeckOfCards`继承自`Card`.

由于我在吹毛求疵，因此您的临时交换变量不需要整个甲板大小的数组。你只需要一个`Card`。事实上，你应该`std::swap`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:58:08.720

除了其他答案之外，我认为您对甲板的初始分配不起作用。

```
DeckOfCards(){  
    for(int i=0; i<13; i++){
        for(int j=0; j<4; j++){
            deck[i][j].setData(face, suit);
         }
    }
} 
```

您将每张牌都设置为“（脸，花色）”。在这一点上是什么？我认为您的意思是将它们设置为“（i，j）”。我很惊讶这个编译，因为 face 和 suit 只被声明为 card 对象的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:49:55.017

我建议您避免使用数组并使用[std::vector](http://www.cplusplus.com/reference/vector/vector/)，并且使用[std::random_shuffle](http://www.cplusplus.com/reference/algorithm/random_shuffle/)来洗牌。

这是我对您的代码所做的快速编辑，以向您展示它是如何完成的

```
#include <ctime>
#include <vector>
#include <algorithm>

using namespace std;

class Card{
public:
    int face;
    int suit;
    void setData(int f, int s){
        face = f;
        suit = s;
    }
};

class DeckOfCards:public Card{
public:
    std::vector<Card> deck;

    void shuffle(){
        srand (time(0));
        std::random_shuffle(deck.begin(), deck.end());
    }

    DeckOfCards(){  
        deck.reserve(13 * 4);
        for(int i=0; i<13; i++){
            for(int j=0; j<4; j++){
                Card card;
                card.setData(i, j);
                deck.push_back(card);
            }
        }
    }

};

int main(){
    DeckOfCards myDeck;
    myDeck.shuffle();
    return 0;
} 
```

# css - 命令行 less.watch()

> ID：15098831
> 
> 赞同：2
> 
> 时间：2013-02-26T20:40:52.373
> 
> 标签：css, less

用于查看和编译 .less 文件的 write 命令行是什么。我想查看 lss 文件的文件夹是否有任何更改并将其编译为 css。

我尝试使用终端 cd 直接进入我的 .less 文件所在的文件夹并运行此命令 less.watch() 但是当我进行更改时，没有任何内容输出到 css 文件。

我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T18:59:50.220

你可以用[看门狗](https://pypi.python.org/pypi/watchdog)做到这一点：安装看门狗

```
pip install watchdog 
```

或者

```
easy_install watchdog 
```

那么[下面的脚本](https://gist.github.com/jkeyes/1242040)应该可以解决问题：

```
watchmedo shell-command --patterns="*.less" --command=\
'LESS=`echo "${watch_src_path}" | sed s/.less$/.css/`; \
echo compile: "${watch_src_path}";\
lessc "${watch_src_path}" "${LESS}"; \
if [ "$?" -eq "0" ]; then echo wrote: "${LESS}"; fi' $* 
```

`.bash_profile`在您的（或您系统上的任何等效项）中为其创建别名可能是最简单的。

# android - Android：使用 Google 登录获取访问令牌

> ID：15098834
> 
> 赞同：5
> 
> 时间：2013-02-26T20:41:02.120
> 
> 标签：android, google-plus

[在这里](http://allthingsd.com/20130226/with-new-sign-in-feature-google-plus-makes-its-developer-pitch/)和[这里](https://developers.google.com/+/mobile/android/sign-in)阅读最后的 Google+ 新闻后。完成登录后如何获取访问令牌？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-05T14:27:08.487

要回答有关 oauth 范围的疑问（只是对 googlers 有用）：

要完全理解，google-it 有一些关于身份验证和授权的概念。

检查用户/密码是否存在是关于**身份验证**部分。

**授权**部分需要范围：您被授权代表用户执行或接收的内容。要获取允许的范围列表，请查看 OAuth 服务文档。

从 Google 和 G+ 可以找到最常见的范围：[https ://developers.google.com/+/api/oauth?hl=pt-ZA](https://developers.google.com/+/api/oauth?hl=pt-ZA)

例如，要从用户那里获取所有可能的信息，您可以使用范围：

“openid 个人资料电子邮件[https://www.googleapis.com/auth/plus.login](https://www.googleapis.com/auth/plus.login) [https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me) ”

（第一个词指的是协议，后面是要求响应字段的词，所需的范围可以用空格分隔符一起声明）

**注意：稍后，如果您尝试使用您的访问令牌来请求或执行您之前未使用范围请求的任何操作，该服务可能会返回授权错误。**

对于 Google，您可以用来了解他的 OAuth 服务和范围的一个好工具是 OAuth Playground：[https ://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T21:03:58.613

你看过[API 参考](https://developer.android.com/reference/gms-packages.html)吗？

您可能正在寻找的课程是[`com.google.android.gms.auth.GoogleAuthUtil`](https://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html).

除其他外，它提供了以下方法：
[`static String getToken(Context context, String accountName, String`](https://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html#getToken%28android.content.Context,%20java.lang.String,%20java.lang.String%29)

**说明：**
对用户进行身份验证并返回有效的 Google 身份验证令牌，如果获取令牌时出错，则引发异常。

**用法：**

```
String token;
try {
    token = GoogleAuthUtil.getToken(context, accountName, scope);
} catch (GooglePlayServicesAvailabilityException playEx) {
    Dialog dialog = GooglePlayServicesUtil.getErrorDialog(
        playEx.getConnectionStatusCode(),
        Activity.this,
        AUTH_REQUEST_CODE);
    // Use the dialog to present to the user.
} catch (UserRecoverableAutException recoverableException) {
    Intent recoveryIntent = recoverableException.getIntent();
    // Use the intent in a custom dialog or just startActivityForResult.
} catch (GoogleAuthException authEx) {
    // This is likely unrecoverable.
    Log.e(TAG, "Unrecoverable authentication exception: " + authEx.getMesssage(), authEx);
} catch (IOException ioEx) {
    Log.i(TAG, "transient error encountered: " + ioEx.getMessage());
    doExponentialBackoff();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T13:41:25.943

您需要使用异步任务来获取它。

```
public void onConnected(Bundle connectionHint) {
    // Reaching onConnected means we consider the user signed in.
    Log.i(TAG, "onConnected");

    // Update the user interface to reflect that the user is signed in.
    mSignInButton.setEnabled(false);
    mSignOutButton.setEnabled(true);
    mRevokeButton.setEnabled(true);

    // Retrieve some profile information to personalize our app for the user.
    Person currentUser = Plus.PeopleApi.getCurrentPerson(mGoogleApiClient);

    AsyncTask<Void, Void, String > task = new AsyncTask<Void, Void, String>() {
        @Override
        protected String doInBackground(Void... params) {
            String token = null;
            final String SCOPES = "https://www.googleapis.com/auth/plus.login ";

            try {
                token = GoogleAuthUtil.getToken(
                         getApplicationContext(),
                         Plus.AccountApi.getAccountName(mGoogleApiClient),
                         "oauth2:" + SCOPES);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (GoogleAuthException e) {
                e.printStackTrace();
            }

          return token;

        }

        @Override
        protected void onPostExecute(String token) {
            Log.i(TAG, "Access token retrieved:" + token);
        }

    };
    task.execute();

    System.out.print("email" + email);
    mStatus.setText(String.format(
            getResources().getString(R.string.signed_in_as),
            currentUser.getDisplayName()));

    Plus.PeopleApi.loadVisible(mGoogleApiClient, null)
            .setResultCallback(this);

    // Indicate that the sign in process is complete.
    mSignInProgress = STATE_DEFAULT;
} 
```

您的访问令牌将存储到令牌变量中。

# php - 使用 url 变量使用 RewriteRule 重写 URL

> ID：15098839
> 
> 赞同：0
> 
> 时间：2013-02-26T20:41:17.737
> 
> 标签：php, .htaccess, url, mod-rewrite

好的，我有一个链接[http://www.cuadmemo.com/posts.php?id=2861](http://www.cuadmemo.com/posts.php?id=2861)并希望它像这样显示 [http://www.cuadmemo.com/2861](http://www.cuadmemo.com/2861) 我在 .htaccess 文件中有这个。

```
RewriteEngine On
RewriteRule ^([a-zA-Z0-9_-]+)$  posts.php?id=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$  posts.php?id=$1 
```

我尝试了许多不同的解决方案，我在这个网站上读到过，但到目前为止似乎没有一个有效。任何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:44:52.617

```
RewriteEngine On
RewriteBase /

# Make sure we don't rewrite directories and existing files        
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9_-]+)/?$ posts.php?id=$1 [L] 
```

# jquery - KendoUI ObservableObject：设置多个属性

> ID：15098844
> 
> 赞同：6
> 
> 时间：2013-02-26T20:41:48.587
> 
> 标签：jquery, kendo-ui, observable

我正在使用 kendo.data.ObservableObject，并且想一次更改两个属性（因此更改事件不会被触发两次）。我不确定语法（`background.set('id', backgroundId)`对于单个属性），并且文档没有太大帮助。有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:06:06.953

一次不能设置多个属性。您需要调用该`set`方法两次。

如果您只是想避免触发更改事件，请在不使用`set`方法的情况下分配属性：

```
model.foo = "foo" ; // won't trigger "change"
model.set("bar", "bar"); // will trigger "change" 
```

# python - 使用字符串输入创建类实例（python）

> ID：15098845
> 
> 赞同：1
> 
> 时间：2013-02-26T20:41:51.153
> 
> 标签：python, string, input, instantiation

我想创建类实例并用用户输入字符串命名它们。像这样的东西，它确实有效。有任何想法吗？

```
class Account:
     balance=0

input("What's your name?") = Account() 
```

如果用户要输入 Scott，我希望能够使用 Scott.balance 等调用属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:44:17.307

您最好将它们存储在字典中。使用用户输入在全局/本地空间中创建变量是一个麻烦的秘诀。

```
accounts = {}
account[x] = Account() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T21:05:53.100

使用内置`raw_input`将用户输入作为“构造函数”的参数

```
class Account:
     def __init__(self, name=0, money=0):
         self.name = name
         self.money = money

input = raw_input("What's your name? -->")
account = Account(input,10000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:44:19.053

给你的班级一个`__init__`方法：

```
class Account:
     def __init__(self, x=1, y=2):
         self.x = x
         self.y = y 
```

只需初始化它：

```
def createAccount(x):
    return Account(x) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-03T10:07:41.970

我们可以从类外部输入字符串，只需像往常一样使用两种方法将其传递给 init：input() 或 raw_input()。

```
class Account:
     def __init__(self, balance):
        self.balance = balance
     def output_all(self):
        print( '{}'.format(self.balance))

MyAccount = Account(input('Type your account : '))

Account.output_all(MyAccount) 
```

# java - 如何在我的安卓游戏中使用 atan2

> ID：15098849
> 
> 赞同：0
> 
> 时间：2013-02-26T20:42:01.230
> 
> 标签：java, android, atan2

我正在制作横向卷轴射击游戏。我目前让我的角色水平向右射击。我想让他在屏幕上的任何地方拍摄。

我知道我应该使用 atan2 来确定我的子弹将射向哪个角度，但我很困惑如何在我的游戏中实现它。

我的问题是如何将屏幕上的触摸坐标调用为 atan2？我是否将它放在我的触摸命令代码或我的射弹的类中。最后我需要再做一个 atan2 来提高速度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:03:04.743

首先你需要你的播放器的向量

P = (a, b)

以及你的射击点的位置

T = (x, y)

这给了我们一个从 P 到 T 的向量 (x - a, y - b)。通过采取

角度 = atan2 (yb, xa)

从那里开始，这取决于您如何实施拍摄。

重申一下， **atan2 所做的只是找到角度**，所以

> 我需要再做一个 atan2 来提高速度吗

取决于您是否想让弹丸根据角度以不同的速度移动。事实上，如果你旋转你的弹丸，你只需要角度，否则你可以沿着向量移动它（如果它是一个圆，不管它面向什么方向！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:10:52.273

您不需要任何三角函数，也不应该使用它，因为它速度慢、不准确并且充满符号 (+/-) 情况会出错。

你可能可以用线性代数做你需要的一切。使用向量，而不是角度。

# smartgwt - SmartGWT 关闭标题换行会使行太宽

> ID：15098851
> 
> 赞同：0
> 
> 时间：2013-02-26T20:42:04.623
> 
> 标签：smartgwt

我有一个，里面`VLayout`有两个`DynamicForms`。第一个的标题足够短，不会被包装。第二个有更长的标题，所以我像这样使用它`setWrapItemTitles(false);`

事实证明，第二个表格比第一个表格更宽，即使行中有很多额外的空间，足以容纳标题并保持原始宽度。将表单分组时，这看起来很糟糕。

有没有办法避免包装但不添加太多未使用的额外空间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:42:04.623

我发现的一种解决方法是手动为标题设置足够的空间以使其适合不会导致换行，也不会添加额外的未使用偏移量。

```
 setTitleWidth(150); //Or enough width 
```

但是，如果可用，我更喜欢“硬编码”的解决方案。

# events - Twitter Bootstrap 轮播：事件范围？

> ID：15098854
> 
> 赞同：2
> 
> 时间：2013-02-26T20:42:09.713
> 
> 标签：events, twitter-bootstrap, scope, carousel

我有一个 Twitter 引导轮播 .on(slid) 事件，该事件在单击以特定幻灯片为目标的元素后触发，还有一个 .on(slid) 事件在单击不同元素（关闭按钮）后触发。但是，一旦发生第二个事件，即使第一个 on(slid) 事件也会继续触发。我认为 preventDefault() 会解决这个问题，但事实并非如此。我什至尝试了一个更完整的功能（如下所示，来自[Herb Caudill](https://stackoverflow.com/users/239663/herb-caudill)）来做到这一点，但没有成功。

使用 (this) 将事件的范围绑定到函数不起作用。我对此很陌生，所以我认为这里可能有一个我没有掌握的基本概念。

这是我的代码的简化版本：

```
// Intended to prevent event bubble up or any usage after this is called.
eventCancel = function (e)
{
   if (!e)
     if (window.event) e = window.event;
     else return;
   if (e.cancelBubble != null) e.cancelBubble = true;
   if (e.stopPropagation) e.stopPropagation();
   if (e.preventDefault) e.preventDefault();
   if (window.event) e.returnValue = false;
   if (e.cancel != null) e.cancel = true;
}    

$('.recentContent').click(function(){
var $lastIndex = $('#splashCarousel .carousel-inner').children().last().getIndex();
$('#splashCarousel').carousel($lastIndex); //slide to specific index
$('#splashCarousel').carousel('pause');

$('#splashCarousel').on('slid', function (e) {
            alert("open");
    //do stuff
    return eventCancel(e);
})
});

$('.closeX').click(function(){

var $lastItem = $('#splashCarousel .carousel-inner').children().last();

$('#splashCarousel').carousel(0); 

$('#splashCarousel').on('slid', function (e) {
        alert("close");
    //do other stuff
        return eventCancel(e);
})
}); 
```

这是一个更简单的小提琴尝试 preventDefault：http: [//jsfiddle.net/chardwick/a5Dpe/](http://jsfiddle.net/chardwick/a5Dpe/)

我可能做错了什么？

谢谢！

**编辑：**我在其他地方看到一些关于嵌套事件的讨论，它们不应该做，有时他们必须做。无论哪种方式，我似乎仍然会触发多个事件。使用 live() 进行事件委托看起来很有希望。尽管如此，仍然可以使用一些反馈，因为这一切都开始让我感到困惑。

# java - 使用 Spring Security 3.1 通过 form-login 和 http-basic 安全性来保护相同的 RESTful 资源

> ID：15098856
> 
> 赞同：4
> 
> 时间：2013-02-26T20:42:15.020
> 
> 标签：java, spring, spring-security, basic-authentication, form-authentication

我有一个在 Tomcat 7 上运行的 Java Web 应用程序。我在后端使用 Spring 3.2 和 Spring Security 3.1，并按照 /api/** 模式通过 RESTful URL 公开一个 API。

Web 应用程序的 UI 是使用 BackboneJS 构建的。我正在使用直接映射到 RESTful URLS 的 Backbone 模型。

UI 使用表单登录身份验证锁定，因此如果用户当前未通过身份验证，则始终将用户重定向到登录屏幕。

我现在尝试使用 http-basic 身份验证将相同的 RESTful URL 公开给另一个外部服务。不幸的是，当保护相同的 URL 模式时，Spring 似乎不允许我使用多个过滤器链。配置文件中首先定义的似乎优先。

我不想必须为相同的 RESTful 资源映射到单独的 URL 模式，但似乎我可能别无选择。

这是我的（当前已损坏的）spring 安全配置的重要示例：

```
<!--  configure basic http authentication -->
<http pattern="/api/**" create-session="stateless">
    <intercept-url pattern="/**" access="ROLE_USER"/>
    <http-basic/>
</http>

<!--  configure form-login authentication -->
<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/ui/login" access="permitAll" />
    <intercept-url pattern="/ui/logout" access="permitAll" />
    <intercept-url pattern="/ui/loginfailed" access="permitAll" />
    <intercept-url pattern="/**" access="ROLE_USER" />
    <custom-filter ref="ajaxTimeoutRedirectFilter" after="EXCEPTION_TRANSLATION_FILTER" />
    <form-login login-page="/ui/login" default-target-url="/" authentication-failure-url="/ui/loginfailed" />
    <logout logout-success-url="/ui/logout" />
    <session-management invalid-session-url="/ui/login"/>
</http> 
```

我的问题是： **是否可以使用 Spring Security 为相同的 URL 模式配置两种不同类型的安全性（http-basic 和 form-login）？这种情况是否有最佳实践？**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:18:48.823

你为什么不像这样合并两个`<http>`元素：

```
<http pattern="/api/**" use-expressions="true">
    <intercept-url pattern="/ui/login" access="permitAll" />
    <intercept-url pattern="/ui/logout" access="permitAll" />
    <intercept-url pattern="/ui/loginfailed" access="permitAll" />
    <intercept-url pattern="/**" access="ROLE_USER" />
    <http-basic/>
    <custom-filter ref="ajaxTimeoutRedirectFilter" after="EXCEPTION_TRANSLATION_FILTER" />
    <form-login login-page="/ui/login" default-target-url="/" authentication-failure-url="/ui/loginfailed" />
    <logout logout-success-url="/ui/logout" />
    <session-management invalid-session-url="/ui/login"/>
</http> 
```

这将在同一过滤器链中设置 a`UsernamePasswordAuthenticationFilter`和 a `BasicAuthenticationFilter`，该过滤器链可以为 ui 客户端和外部服务提供服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:52:58.040

不可能开箱即用地为单个 URL 模式应用 2 个不同的过滤器链。

但建议将唯一的 URL 模式用作 UI 和 API，因为您将来必须应用完全不同的过滤器链。

例如，SecurityContextRepository 保存会话信息并为每个请求检索。您不想通过基本身份验证对 UI 和 API 访问应用相同的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:28:27.823

尝试在 API 配置中将pattern="/ **" 替换为 pattern="/api/ "：**

```
<http pattern="/api/**" create-session="stateless">
    <intercept-url pattern="/api/**" access="ROLE_USER"/>
    <http-basic/>
</http> 
```

# javascript - html pageshow 和 load 事件有什么区别？

> ID：15098865
> 
> 赞同：4
> 
> 时间：2013-02-26T20:42:52.663
> 
> 标签：javascript, html, dom-events, onload, pageshow

HTML5 有一个[pageshow 事件](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/pageshow)。在什么情况下它的工作方式与身体的`onload`处理程序不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:23:48.960

pageshow 事件在每次页面加载时触发，而在 Firefox 1.5 中从缓存加载页面时 load 事件不会触发。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-17T04:50:26.383

除了上面的答案，两者之间还有一个更重要的区别。

根据我在 iOS 上的测试，如果你从 a 加载一个本地页面`WkWebView`，点击一个链接跳转到另一个页面并使用该`goBack`功能返回上一页，只会`onpageshow`触发，`onload`不会。

# .net - 如何保持 DataGridRow 焦点和选择同步？

> ID：15098869
> 
> 赞同：5
> 
> 时间：2013-02-26T20:43:01.053
> 
> 标签：.net, wpf, xaml, c#-4.0, wpfdatagrid

我有一个`DataGrid`并且我希望选定的行和聚焦的行同步，即如果聚焦的行发生变化，那么选定的行也会发生变化，如果选定的行发生变化，它就会成为聚焦的行。

给定具有以下 XAML 的 WPF 窗口，如何同步焦点行和选定行？

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">

    <Grid>
        <Grid.Resources>

            <x:Array x:Key="MyList" Type="sys:String" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:sys="clr-namespace:System;assembly=mscorlib">
                <sys:String>Hello</sys:String>
                <sys:String>World</sys:String>
                <sys:String>World</sys:String>
                <sys:String>World</sys:String>
                <sys:String>World</sys:String>
                <sys:String>World</sys:String>
                <sys:String>World</sys:String>
                <sys:String>World</sys:String>
                <sys:String>World</sys:String>
            </x:Array>

            <Style TargetType="{x:Type DataGrid}">
                <Setter Property="AlternationCount" Value="2" />
                <Setter Property="AutoGenerateColumns" Value="False"/>
            </Style>

            <Style TargetType="{x:Type DataGridCell}">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="Focusable" Value="False"/>
            </Style>

            <Style TargetType="{x:Type DataGridRow}">
                <Setter Property="Focusable" Value="True"/>
                <Style.Triggers>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="AlternationIndex" Value="0"/>
                            <Condition Property="IsSelected" Value="False"/>
                        </MultiTrigger.Conditions>
                        <Setter Property="Background" Value="White"/>
                    </MultiTrigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="AlternationIndex" Value="1"/>
                            <Condition Property="IsSelected" Value="False"/>
                        </MultiTrigger.Conditions>
                        <Setter Property="Background" Value="Gainsboro"/>
                    </MultiTrigger>
                    <Trigger Property="AlternationIndex" Value="1">
                        <Setter Property="Background" Value="Gainsboro"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Background" Value="#BF228B22"/>
                        <Setter Property="BorderBrush" Value="ForestGreen"/>
                        <Setter Property="BorderThickness" Value="1"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

        </Grid.Resources>

        <DataGrid ItemsSource="{StaticResource MyList}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Name" Binding="{Binding}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

    </Grid>

</Window> 
```

通过下图，您可以看到红色的焦点矩形和绿色的选定行显然不同步，因为我相信这是默认行为。我想要的是让他们始终保持一致，即 SelectedRow 始终是 Focused，而 FocusedRow 始终是 Selected。

![在此处输入图像描述](../Images/5af701d90ca560b3d17795f5c261bc5d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T23:29:05.800

尝试使用附加属性来侦听 DataGrid 中的焦点更改和选择更改事件。当其中任何一种情况发生时，您可以通过更改选择或焦点来做出相应的反应。

这是一些示例代码。请特别注意 DataGridAttachment 类。那是定义附加属性的地方，也是逻辑用来对焦点和选择更改事件做出反应的地方。

**主窗口.xaml**

```
<Window x:Class="_15098869.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:_15098869"
    Title="MainWindow"
    Width="525"
    Height="350">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>
    <DataGrid Name="DataGrid"
              ItemsSource="{Binding Path=Items}"
              local:DataGridAttachment.SyncSelectionWithFocus="True" />
    <Button Grid.Row="1"
            Click="MoveSelectionButtonOnClick"
            Content="Move Selection" />
</Grid> 
```

**MainWindow.xaml.cs（代码隐藏）**

```
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Controls.Primitives;

namespace _15098869
{
    /// <summary>
    ///     Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow
    {
        public MainWindow()
        {
            InitializeComponent();

            DataContext = this;

            Items = new ObservableCollection<DemoItem>();
            Items.Add(new DemoItem {FirstName = "John", LastName = "Doe"});
            Items.Add(new DemoItem {FirstName = "Jane", LastName = "Doe"});
            Items.Add(new DemoItem {FirstName = "Bob", LastName = "Doe"});
        }

        public ObservableCollection<DemoItem> Items { get; private set; }

        public void MoveSelectionButtonOnClick(object sender, RoutedEventArgs e)
        {
            var max = DataGrid.Items.Count - 1;
            DataGrid.SelectedIndex = DataGrid.SelectedIndex == max ? 0 : DataGrid.SelectedIndex + 1;
        }
    }

    public class DemoItem
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
    }

    public static class DataGridAttachment
    {
        public static readonly DependencyProperty SyncSelectionWithFocusProperty =
            DependencyProperty.RegisterAttached("SyncSelectionWithFocus", typeof (bool), typeof (DataGridAttachment), new PropertyMetadata(default(bool), SyncSelectionWithFocusChanged));

        private static void SyncSelectionWithFocusChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs e)
        {
            var dataGrid = dependencyObject as DataGrid;
            if (dataGrid == null) return;

            var shouldSync = GetSyncSelectionWithFocus(dataGrid);

            if (shouldSync)
            {
                dataGrid.AddHandler(UIElement.GotFocusEvent, new RoutedEventHandler(DataGridOnGotFocus));
                dataGrid.AddHandler(Selector.SelectionChangedEvent, new SelectionChangedEventHandler(DataGridOnSelectionChanged));
            }
        }

        private static void DataGridOnGotFocus(object sender, RoutedEventArgs e)
        {
            var dataGrid = sender as DataGrid;
            var element = e.OriginalSource as DataGridCell;

            if (dataGrid == null || element == null) return;
            dataGrid.SelectedItem = element.DataContext;
        }

        private static void DataGridOnSelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            var dataGrid = sender as DataGrid;

            if (dataGrid == null) return;

            if (!dataGrid.IsKeyboardFocusWithin)
            {
                dataGrid.Focus();
            }
        }

        public static void SetSyncSelectionWithFocus(DataGrid element, bool value)
        {
            element.SetValue(SyncSelectionWithFocusProperty, value);
        }

        public static bool GetSyncSelectionWithFocus(DataGrid element)
        {
            return (bool) element.GetValue(SyncSelectionWithFocusProperty);
        }
    }
} 
```

# html - 没有 Flash 的视频弹出窗口

> ID：15098871
> 
> 赞同：1
> 
> 时间：2013-02-26T20:43:03.740
> 
> 标签：html, video, fancybox

我正在尝试创建一个适用于 Apple 设备的视频弹出窗口，并且我一直在玩 fancyBox 和一些 YouTube 视频。因为 YT 使用 Flash，所以这行不通（我现在才意识到）

有没有办法在这个弹出窗口中打开一个 html5 视频？我已经设置了该部分：

这是我已经在使用 fancyBox 的页面：http://legal-replay.com/video-test/[请](http://legal-replay.com/video-test/) 帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:01:38.567

```
<a class="iframe" src="http://www.youtube.com/embed/dP15zlyra3c?html5=1">Open HTML5 Video</a> 
```

我对fancybox了解不多，但看起来你可以让它打开你想要的任何iframe，这将与YoutTube的默认嵌入方法一起使用。只需传递`html5=1`给 iframe。

从我对stackoverflow的侦察来看，这只支持单个视频，我不知道你是否可以强制整个播放列表使用HTML5，这可能仍然是客户的偏好。

[来源](https://stackoverflow.com/questions/5845484/force-html5-youtube-video)

[Fancybox Howtwo](http://fancybox.net/howto)

# c# - 在显式接口实现上在 C# 中实现 == 运算符

> ID：15098875
> 
> 赞同：1
> 
> 时间：2013-02-26T20:43:22.780
> 
> 标签：c#, interface, operator-overloading, equality

我定义了一个结构**Coords**，它显式实现了三个接口，每个接口的定义如下：

```
 public partial struct Coords
  {
    int           ICoordsUser.X          { get { return VectorUser.X; } }
    int           ICoordsUser.Y          { get { return VectorUser.Y; } }
    IntVector2D   ICoordsUser.Vector     { get { return VectorUser;   }
                                           set { VectorUser=value;    } }
    ICoordsCanon  ICoordsUser.Canon      { get { return this;         } } 
    ICoordsUser   ICoordsUser.Clone()    { return NewUserCoords(VectorUser);  }
    string        ICoordsUser.ToString() { return VectorUser.ToString(); }

    IEnumerable<NeighbourCoords> ICoordsUser.GetNeighbours(Hexside hexsides) { 
        return GetNeighbours(hexsides); 
    }
    int ICoordsUser.Range(ICoordsUser coords) { return Range(coords.Canon); }
  } 
```

名称`ICoordsCanon`为 ,`ICoordsUser`和`ICoordsCustom`. 然后我在结构上定义了价值平等，如下所示：

```
#region Value Equality
bool IEquatable<Coords>.Equals(Coords rhs) { return this == rhs; }

public override bool Equals(object rhs) { 
  return (rhs is Coords) && this == (Coords)rhs; 
}

public static bool operator == (Coords lhs, Coords rhs) { 
  return lhs.VectorCanon == rhs.VectorCanon; 
}

public static bool operator != (Coords lhs, Coords rhs) { return ! (lhs == rhs); }
public override int GetHashCode() { return VectorUser.GetHashCode(); }

bool IEqualityComparer<Coords>.Equals(Coords lhs, Coords rhs) { return lhs == rhs; }
int  IEqualityComparer<Coords>.GetHashCode(Coords coords) {
    return coords.GetHashCode();
}
#endregion 
```

但是，当我在其中一种接口类型的值之间使用**==**运算符执行相等比较时，如

```
if (coordsUser1 == userCoords2) { /* whatever */ } 
```

始终使用**object.==进行参考比较。**有谁知道在这种情况下如何使用 C#将值相等强制到**==运算符上？**

提前感谢您的任何想法或建议。

[编辑] 在上面的示例中，**coordsUser1**和**userCoords2**都是存储在 ICoordsUser 类型变量中的**Coords****实例**，所以我不清楚为什么不使用**==的定义覆盖。**

 ***** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:51:21.010

由于您无法为接口定义静态成员，因此您无法在接口上定义运算符。因为运算符重载是在编译时解决的，所以编译器不会看到任何`==`与给定接口类型的签名匹配的运算符。由于`Object`定义了`==`对象的运算符，并且在编译时没有更好的匹配，它将使用那个。

有三种方法可以解决这个问题：

1.  将左侧对象转换为定义`==`运算符的类型。

    ```
    return (Coords)coordsUser1 == userCoords2; 
    ```

2.  使用常规`Equals(object)`方法。但是，这会将您的结构*装箱。*

    ```
    return coordsUser1.Equals(userCoords2); 
    ```

3.  强制你的接口实现`IEquatable<T>`，并使用泛型`Equals(T)`（减少装箱）。

    ```
    return coordsUser1.Equals(userCoords2); 
    ```****

# c# - 为什么不能在不安全的语句中获取变量的地址？

> ID：15098876
> 
> 赞同：2
> 
> 时间：2013-02-26T20:43:26.567
> 
> 标签：c#

根据 MSDN，我们可以在不安全的上下文中获取变量的地址。
我们可以在不安全声明的方法中获取变量的地址，但为什么不能在所有不安全的上下文中获取它？

```
static void Main(string[] args) {      
    //Managed code here
    unsafe {
        string str = "d";
        fixed (char* t = &str[0]) {// ERROR :  Cannot take the address of the given expression
        }
    }
    //Managed code here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:53:19.550

它只是无效的 C# 语法。字符串不是数组，它只是看起来像一个。尝试：

```
unsafe 
{
   string str = "d";
   fixed (char* t = str) 
   {
       char c1 = *t;
       char c2 = t[0];
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:54:25.117

获取字符串地址的正确方法是这样的：

```
char* t = str 
```

[http://msdn.microsoft.com/en-us/library/f58wzh21.aspx](http://msdn.microsoft.com/en-us/library/f58wzh21.aspx)

# android - 在片段中使用 LocationListener

> ID：15098878
> 
> 赞同：3
> 
> 时间：2013-02-26T20:43:35.617
> 
> 标签：android, fragment, locationmanager, locationlistener

我可以使用 LocationListener`LocationManager`从片段中获取用户位置吗？或者我是否需要`LocationListener`在底层活动中使用 from 并使用接口（或其他方法）将数据传输回片段？由于更改应用程序 UI，我正在将活动转换为片段。当我使用独立活动时，获取位置没有问题，但是，现在我已经将活动变成了一个片段，我无法返回任何位置。

下面是我如何添加 LocationListener。它在前面声明为 LocationListener locationListener。

```
private void addLocationListener(){
    locationListener = new LocationListener(){

        @Override
        public void onLocationChanged(Location location) {
            GeoPoint userLoc = processNewLocation(location);
            if(userLoc != null){
                Log.d("USERLOC", userLoc.toString());
                                    //do something with the location    
            }
        }

        @Override
        public void onProviderDisabled(String provider) {
            locationManager = (LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
            if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
            } else {
                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
            }
        }

        @Override
        public void onProviderEnabled(String provider) {
            locationManager = (LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);
            if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
            } else {
                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
            }
        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }

    };
} 
```

注意：processNewLocation 只是将位置转换为 GeoPoint。它甚至没有走那么远，因为没有获得任何位置。

这是向位置管理器注册侦听器的代码

```
public void addLocationManager(){
locationManager = (LocationManager) getActivity().getSystemService(Context.LOCATION_SERVICE);
}

private void getLocationFromNetwork(){
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, LOCATION_REFRESH_TIME, LOCATION_REFRESH_DISTANCE, locationListener);
Log.d("GET NETWORK", "Listener registered");
}

private void getLocationFromGPS(){
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, LOCATION_REFRESH_TIME, LOCATION_REFRESH_DISTANCE, locationListener);
Log.d("GET GPS", "Listener registered");
}

private Location getLastLocation(){
Location lastKnownLocation = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
return lastKnownLocation;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-08-11T11:04:30.583

我知道这已经很晚了，但我只花了 2 个多小时才找到一些代码。以下是我在 Androidx 上的实现方式。任何进一步的改进将不胜感激。

创建一个新的帮助类

```
package me.yokeyword.sample.CONSTANTS;

import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

import static android.content.Context.LOCATION_SERVICE;

public class GPSHelper implements LocationListener {

    private static final String TAG = "GPSHelper";

public Location getCurrentLocation(Context mContext){
    int MIN_TIME_BW_UPDATES = 1000;
    int MIN_DISTANCE_CHANGE_FOR_UPDATES = 5;
    Location loc = null;
    Double latitude, longitude;

    LocationManager locationManager = (LocationManager) mContext
            .getSystemService(LOCATION_SERVICE);

    // getting GPS status
    Boolean checkGPS = locationManager
            .isProviderEnabled(LocationManager.GPS_PROVIDER);

    // getting network status
    Boolean checkNetwork = locationManager
            .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

    if (!checkGPS && !checkNetwork) {
        Toast.makeText(mContext, "No Service Provider Available", Toast.LENGTH_SHORT).show();
    } else {
        //this.canGetLocation = true;
        // First get location from Network Provider
        if (checkNetwork) {
            Toast.makeText(mContext, "Network", Toast.LENGTH_SHORT).show();
            try {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    loc = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

                }

                if (loc != null) {
                    Log.d(TAG, "getCurrentLocation: " + loc.getLatitude() + ", " + loc.getLongitude());
                    return loc;
                }
            } catch (SecurityException e) {

            }
        }
    }
    // if GPS Enabled get lat/long using GPS Services
    if (checkGPS) {
        Toast.makeText(mContext, "GPS", Toast.LENGTH_SHORT).show();
        if (loc == null) {
            try {
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("GPS Enabled", "GPS Enabled");
                if (locationManager != null) {
                    loc = locationManager
                            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    if (loc != null) {
                        latitude = loc.getLatitude();
                        longitude = loc.getLongitude();
                    }
                }
            } catch (SecurityException e) {

            }
        }
    }
    Location locErr = null;
    return locErr;
}

@Override
public void onLocationChanged(Location location) {

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {

}

@Override
public void onProviderEnabled(String provider) {

}

@Override
public void onProviderDisabled(String provider) {

    }
} 
```

从您的 Fragment 调用以下代码：

```
 GPSHelper gpsHelper = new GPSHelper();
    Location loc = gpsHelper.getCurrentLocation(getContext());
    if (loc!=null){
        Log.d(TAG, "onCreateView: " + loc.getLatitude() + ", " + loc.getLongitude());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:46:10.950

在您上面发布的代码中，您永远不会`LocationListener`使用`LocationManager`. 您需要`onProviderEnabled`在创建代码中某处的代码中使用这样的`Fragment`代码：

```
locationManager = (LocationManager)getActivity().getSystemService(Context.LOCATION_SERVICE);

if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);
} else {
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);
} 
```

在`onProviderEnabled`您向位置管理器注册之前，不会发生回调。

# gcc - Makefile vpath %.o 找不到 obj 文件

> ID：15098881
> 
> 赞同：3
> 
> 时间：2013-02-26T20:43:47.127
> 
> 标签：gcc, makefile

我正在使用以下 vpath 来尝试定位我的 $(OBJ) 文件：

```
vpath %.o ./lib/obj 
```

我的目标是这样设置的：

```
# Link target
link:
    @echo "\nLinking files"
    $(CC) $(LINK_FLAGS) -o main.elf $(OBJS) 
```

查看输出时，我得到（对于所有 *.o 文件）：

```
...error: misc.o: No such file or directory 
```

我的项目结构如下：

```
.
├── Makefile
├── inc
│   └── main.h
├── lib
│   ├── inc
│   │   ├── cmsis
│   │   │   ├── arm_common_tables.h
│   │   │   ├── ...
│   │   ├── peripherals
│   │   │   ├── misc.h
│   │   │   ├── ...
│   │   └── stm32f4xx
│   │       ├── stm32f4xx.h
│   │       ├── ...
│   ├── obj
│   │   ├── misc.o
│   ├── src
│   │   ├── peripherals
│   │   │   ├── misc.c
│   │   │   ├── ...
│   │   └── system_stm32f4xx.c
│   └── startup_stm32f4xx.s
├── src
│   └── main.c
└── stm32f4.ld 
```

为什么找不到我的 .o 文件？

完整输出供参考：

> arm-none-eabi-gcc -T"stm32f3.ld" -nostartfiles -Wl,-Map,"main.map" -mcpu=cortex-m4 -mthumb -g3 -gdwarf-2 -L"./" -o main .elf misc.o stm32f4xx_adc.o stm32f4xx_can.o stm32f4xx_crc.o stm32f4xx_cryp.o stm32f4xx_cryp_aes.o stm32f4xx_cryp_des.o stm32f4xx_cryp_tdes.o stm32f4xx_dac.o stm32f4xx_dbgmcu.o stm32f4xx_dcmi.o stm32f4xx_dma.o stm32f4xx_exti.o stm32f4xx_flash.o stm32f4xx_fsmc.o stm32f4xx_gpio.o stm32f4xx_hash.o stm32f4xx_hash_md5.o stm32f4xx_hash_sha1.o stm32f4xx_i2c.o stm32f4xx_iwdg.o stm32f4xx_pwr.o stm32f4xx_rcc.o stm32f4xx_rng.o stm32f4xx_rtc.o stm32f4xx_sdio.o stm32f4xx_spi.o stm32f4xx_syscfg.o stm32f4xx_tim.o stm32f4xx_usart.o stm32f4xx_wwdg.o system_stm32f4xx.o

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T21:27:11.347

`$(OBJS)`只是一个变量，并被扩展为文本。当它出现在`link`规则中的命令文本中时，它会简单地扩展为文本。

`vpath`搜索应用于**先决条件**，因此您必须安排您`$(OBJS)`作为链接规则的先决条件出现，并让规则的命令[使用这些先决条件](http://www.gnu.org/software/make/manual/html_node/Recipes_002fSearch.html)（通过自动变量，而不是直接使用`$(OBJS)`）。

所以你的规则需要看起来更像

```
# Link target
link: main.elf

main.elf: $(OBJS)
    @echo "\nLinking files"
    $(CC) $(LINK_FLAGS) -o $@ $+ 
```

（我还冒昧地写出生成的文件（*main.elf*）作为中间规则的非虚假目标。将这些东西明确地制作出来通常是一个好主意。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T12:21:25.893

尽管其他答案在他们所说的细节上是正确的，但这里有一个更大的观点：不可能可靠地使用 VPATH/vpath 来查找*派生*文件，例如从 makefile 构建的 .o 文件。VPATH/vpath*仅对查找**源*文件有用，例如 .c 文件。

你应该阅读[http://make.mad-scientist.net/vpath.html](http://make.mad-scientist.net/vpath.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T21:27:27.523

`vpath`只是告诉 make 在哪里找到文件，而不是编译器/链接器。你必须让 make 告诉编译器/链接器它在哪里找到它们。最简单的方法是使它们成为正确的依赖关系（以便在链接之前重建它们），然后使用`$^`：

```
# Link target
link: $(OBJS)
        @echo "\nLinking files"
        $(CC) $(LINK_FLAGS) -o main.elf $^ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T08:36:08.593

我已将以下内容添加到我的 Makefile 中：

```
OBJS = $(LIB_SRC:.c=.o)
OBJ_FILES = $(addprefix lib/out/,$(notdir $(LIB_SRC:.c=.o))) 
```

并更新了目标：

```
link:
    @echo "\nLinking files"
    $(CC) $(LINK_FLAGS) -o main.elf $(OBJ_FILES) 
```

链接器现在可以正确找到 .o 文件。

# asp.net-mvc-3 - 加载视图时，带有 url 的 MVC ViewBag 会删除所有符号

> ID：15098882
> 
> 赞同：1
> 
> 时间：2013-02-26T20:43:48.240
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4, viewbag

我正在尝试使用 viewbag 显示/返回 url。我在 Action 上得到这个作为 ViewBag 的值：

```
http:\\www.mysite.com\\images\\logo.jpg 
```

但是每当视图被加载时，所有的斜线都会被删除，最终会得到这样的结果：

```
http:wwwmysitecomimageslogo.jpg 
```

编辑：关于生成 LogoUrl 的代码。

编辑 2：这就是我将其从数据库中拉出的方式，我使用上下文并使用 EF 将其拉出，否则您如何将其拉出？

```
ViewBag.LogoUrl = context.Event.FirstOrDefault(e => e.Id == id).LogoUrl; 
```

这就是我知道什么被拉的方式：

```
string url = context.Event.FirstOrDefault(e => e.Id == id).LogoUrl;

ViewBag.LogoUrl = url; 
```

这就是我使用它的方式：

```
var logoUrl;
$('#logo').click(function (event) {
        <% if(ViewBag.LogoUrl != null) { %>
            logoUrl = '<%: ViewBag.LogoUrl %>';
        <% } %>

           :
           :
           :
     return false;
 } 
```

说得通？

# cocoa-touch - UICollectionViewFlowLayout 不使用整帧

> ID：15098886
> 
> 赞同：3
> 
> 时间：2013-02-26T20:44:03.250
> 
> 标签：cocoa-touch, ios6, uicollectionview

我最近开始使用 UICollectionView，对 UICollectionViewFlowLayout 有点困惑。看起来集合视图中每个单元格的框架是在每个项目之间的相等空间计算的。这会导致某些单元格的帧具有分数位置，这将导致模糊标签和未对齐的图像像素等。

我很惊讶地发现堆栈溢出没有关于这个的问题，这让我觉得我做错了什么。我创建了一个测试项目，非常简单地演示了这个问题：

[https://github.com/rmaz/BlurryCollectionView](https://github.com/rmaz/BlurryCollectionView)

这真的是标准行为吗？在我看来，这使得流布局在没有子类化的情况下基本上无法使用。还是我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T02:53:54.050

解决方法： subclass `UICollectionViewFlowLayout`， override`UICollectionViewLayout`和`-layoutAttributesForElementsInRect:`每个布局属性都使框架变得完整：

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray *allLayoutAttributes = [super layoutAttributesForElementsInRect:rect];
    for (UICollectionViewLayoutAttributes *layoutAttributes in allLayoutAttributes) {
        layoutAttributes.frame = CGRectIntegral(layoutAttributes.frame);
    }
    return allLayoutAttributes;
} 
```

注意：iOS 7`UICollectionViewFlowLayout`已修复为始终为其单元格的框架使用整体框架。我建议保留 iOS 6.x 的修复程序，但有条件地在 iOS 7 和更新版本中弃用它。

最好的，拉斐尔

# box-api - Box API v2 - 检索文件夹和文件的标签

> ID：15098888
> 
> 赞同：1
> 
> 时间：2013-02-26T20:44:07.503
> 
> 标签：box-api

这似乎是一个重复的帖子，但我真的不知道跟进[这篇](https://stackoverflow.com/questions/13033034/box-api-v2-retrieving-folder-items-with-fields-is-tag-allowed)帖子的最佳方式是什么。

我肯定对能够检索与各种文件和文件夹相关联的标签很感兴趣，我想这样做，而不必使用今年将被弃用的 API 版本来实现所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T01:37:49.433

感谢您的跟进。标签肯定仍在为 V2 API 计划，我们将很快添加它们。

# html - 如何在其他元素上显示分区

> ID：15098889
> 
> 赞同：0
> 
> 时间：2013-02-26T20:44:13.443
> 
> 标签：html, css

我正在尝试在图像上显示 div。当用户输入图像时，该分区必须显示，即悬停效果。但是当我将鼠标悬停在图像下方显示的 div 的主分区上时会发生什么。

我的代码是：

```
 <div class="bgimg">
 <img width="100%" height="100%" data-id="1" src="data:image/jpeg;">
 <div id="changeBackPicture" style="display: none;"> 
  <a id="ChangeBAKPicture" href="javascript:void(0)">Change BackGround Picture</a>
 </div>     <-- This division need to display above the image --->
 <div class="primg"></div>
 <div id="uname">xyz </div>
 </div> 
```

CSS代码：

```
#changeBackPicture
{
float:right;
margin-top:-70px;
margin-right:500px;
width:270px;
height:35px;
margin-left:-3px;
margin-right:-3px;
} 
```

下图显示了分区现在的显示方式。我需要在图像上显示除法... ![在此处输入图像描述](../Images/005d338d7908220197aa2eebe91709da.png)

请任何人告诉我如何做这些东西............谢谢。...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:55:33.830

z-index 是一个 CSS 属性，用于设置特定元素的堆叠顺序。具有较大堆栈顺序的元素总是在另一个具有较低堆栈顺序的元素之前。

为了让元素使用 z-index，它必须是绝对定位、相对定位或固定定位。

```
#changeBackPicture { position: relative; z-index: 9999;} 
```

**资源：[http ://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:48:32.700

它真的没有那么复杂，你应该看看[Z Index CSS 属性](http://www.w3schools.com/cssref/pr_pos_z-index.asp)，因为它完全符合你的要求。

确保为要覆盖的图像和要覆盖的 div 设置 Z 索引！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T20:49:30.053

您是否尝试将 z-index 添加到覆盖 div？给它一个 50 的 z-index，看看它是否有效。您也可以给它绝对定位并将其放置在图像 div 的顶部。

# java - Java - Android SDK - 不幸的是 已崩溃错误

> ID：15098895
> 
> 赞同：0
> 
> 时间：2013-02-26T20:44:30.603
> 
> 标签：java, android, sdk, crash, runtime-error

我一直在开发一个小应用程序，它可以为我计算复数（除法、减法、乘法等）。我没有明显的编译错误，但是当我运行程序时，我得到了一堆我无法理解或不知道如何修复的运行时错误。我错过了一些明显的东西吗？这是我的代码：

```
 package complex.OliverV;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.TextView;
    import android.widget.RadioButton;
    import android.widget.EditText;

    public class ComplexNumbersActivity extends Activity {

Button Check;
RadioButton plus, minus, multiply, div;
EditText X1,X2,Y1,Y2;
TextView Ans;
int sign;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Check = (Button) findViewById(R.id.Check);
    plus = (RadioButton) findViewById(R.id.plus);
    minus = (RadioButton) findViewById(R.id.minus);
    multiply = (RadioButton) findViewById(R.id.multiply);
    div = (RadioButton) findViewById(R.id.div);
    Ans = (TextView) findViewById(R.id.Ans);
    plus.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=1;
        }

    });
    minus.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=2;
        }

    });
    multiply.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=3;
        }

    });
    div.setOnClickListener(new View.OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            sign=4;
        }

    });
    Check.setOnClickListener(new View.OnClickListener(){

        String xs=X1.getText().toString();
        String xss=X2.getText().toString();
        String ys=Y1.getText().toString();
        String yss=Y2.getText().toString();

        double x3,y3;

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(xs!="" && xss!="" && ys!="" && yss!="")
            {
            double x1=Double.parseDouble(xs);
            double x2=Double.parseDouble(xss);
            double y1=Double.parseDouble(ys);
            double y2=Double.parseDouble(yss);
            switch(sign)
            {
            case(1):
            {
                x3=x1+x2;
                y3=y1+y2;
            }
            case(2):
            {
                x3=x1-x2;
                y3=y1-y2;
            }
            case(3):
            {
                x3=(x1*x2-y1*y2);
                y3=(x2*y1 + x1*y2);
            }
            case(4):
            {
                if(x2!=0 && y2!=0)
                {
                x3 = (x1 * x2 + y1 * y2) / (x2 * x2 + y2 * y2);
                y3 = (x2 * y1 - x1 * y2) / (x2 * x2 + y2 * y2);
                }
                else
                {
                    Ans.setText("Enter valid numbers!");
                }
            }
        }
            Ans.setText("x="+x3+"y="+y3);
        }
            else
            {
                Ans.setText("Enter valid numbers!");
            }

        }
    });
}

} 
```

我还添加了我得到的错误的屏幕截图。![错误](../Images/fcda6d1598433f345af3541d481d27a8.png) 我放了一张图片，因为复制文字看起来很乱。很抱歉这个问题很长，感谢任何可以花时间帮助我的人，我非常感谢每一个帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:51:47.717

正如 Ted Hopp 在他的回答中提到的那样初始化`X1,X2,Y1,Y2`你`onCreate()`，然后

改变这个：

```
if(xs!="" && xss!="" && ys!="" && yss!="") 
```

到：

```
if( (xs != null && !xs.equal("")) && 
    (xss != null && !xss.equal("")) && 
    (ys !== null && !ys.equal("")) && 
    (yss != null &&!yss.equal("")) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:51:42.313

问题似乎在这里：

```
Check.setOnClickListener(new View.OnClickListener(){

    String xs=X1.getText().toString();
    String xss=X2.getText().toString();
    String ys=Y1.getText().toString();
    String yss=Y2.getText().toString();

    . . .
} 
```

在内部执行时`onCreate`，字段`X1`等尚未初始化。即使有，这些字段也只有默认文本，这可能不是您想要的。您应该将分配移动到`onClick`侦听器的方法中。`onClick`这样，当方法运行时，您将使用当前字段内容。

将来，请发布 logcat 输出的文本，而不是屏幕快照。如果做不到这一点，至少调整列的大小并根据需要滚动，以便我们可以看到 logcat 消息的整个文本。请确定您的代码中的哪些行正在生成异常。

# c++ - 在 C++ 中返回局部变量的引用和标准指针的替代方法是什么？

> ID：15098897
> 
> 赞同：0
> 
> 时间：2013-02-26T20:44:40.303
> 
> 标签：c++, pointers, boost, reference, smart-pointers

我对 C++ 相当陌生，我知道返回局部变量的三种方法，它们都有其缺点：

```
Person& getPerson()
{
   Person bob;
   return bob;
} 
```

显然不是一个好主意。

```
Person getPerson()
{
   Person bob;
   return bob;
} 
```

没有机会出现空指针或悬空引用，但会影响性能。

```
Person* getPerson()
{
   return new Person();
} 
```

没有空指针的机会，但这肯定违反了 OO 设计的基本规则。另一个对象将不得不删除它 - 但它为什么必须这样做？getPerson() 方法的实现与它无关。

所以，我正在寻找替代方案。我听说过共享指针和智能指针（标准和 Boost），但我不确定它们中的任何一个是否旨在处理这个问题。你们有什么建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T20:46:20.390

选项#2：按值返回。

```
Person getPerson()
{
  Person bob;
  return bob;
} 
```

这里没有性能受到影响。您的编译器可能（并且可能会）忽略此副本。事实上，即使您关闭编译器的复制省略优化，对于 C++11 编译器，这也将被视为先行一步。

事实上，即使你这样做`Person p = getPerson()`，通常会涉及两个副本，*两者都*可能被省略。

见§12.9/31：

> 在`return`具有类返回类型的函数的语句中，当表达式是具有与函数返回类型相同的 cv 非限定类型的非易失性自动对象（函数或 catch 子句参数除外）的名称时，可以通过将自动对象直接构造到函数的返回值中来省略复制/移动操作

和§12.9/32：

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T20:45:50.743

> 没有机会出现空指针或悬空引用，但会影响性能。

实际上，根本没有性能受到影响。例如，请参见此处：[想要速度？按值传递](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)。

编译器可以通过称为复制省略和命名返回值优化的策略轻松优化它（查看链接）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T20:46:08.973

您不必太担心这里的性能影响：

```
Person getPerson()
{
   Person bob;
   return bob;
} 
```

您担心的副本很可能会在所谓的[返回值优化 (RVO)](http://en.wikipedia.org/wiki/Return_value_optimization)中被忽略。C++ 标准允许编译器进行这种优化，即使它违反了*as-if*规则。很长一段时间以来，我都没有遇到过不会在这种表达式中省略副本的编译器：

```
Person p = getPerson(); 
```

在 C++11 中，即使没有复制省略，这也是移动构造的候选者。这*可能*是一个非常便宜的操作，但这实际上取决于所讨论的类型。无论如何，复制省略是难以避免的。

请参阅[此相关帖子](https://stackoverflow.com/questions/10553091/what-is-the-best-way-to-return-string-in-c/10553140#10553140)。

请参阅[此演示](http://ideone.com/JnMVsR)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T20:57:02.627

正如其他人已经指出的那样，返回值优化有助于最大限度地减少简单返回值对性能的影响。

移动语义（C++11 新增）在这方面也有帮助——返回表达式几乎是“xvalue”的规范示例，它有资格将其值从源移动到目标，而不是复制。特别是对于主要由指向真实数据的指针组成的类型（例如向量），这可能是*非常*有益的，因为它本质上允许浅拷贝而不是深拷贝（即，而不是制作整个向量的副本，它只会复制指针）。

shared_ptr 或 unique_ptr 也可以在这里工作。shared_ptr 基本上是一个引用计数指针，因此（C++11 之前的版本）它允许您通过在返回过程中增加引用计数，然后再减少它来保持对象的活动状态。至少在单线程环境中，这通常相当便宜——通常比制作数据副本更便宜。

unique_ptr 做了大致相似的事情，但没有增加和减少引用计数的开销。基本区别在于，它不是使复制变得便宜，而是移动指针以完全避免进行复制。

其中任何一个都可以工作，但很明显，在大多数情况下，它们中最好的就是只返回值（如果有意义，添加一个移动构造函数和/或移动赋值运算符到你正在使用的类型）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T20:49:36.920

一旦函数执行完成，局部变量就会超出范围 - 它们的生命周期结束。因此，通常返回对局部变量的引用或指针并不是一个好主意。

您可能想要做的是返回对类成员变量的引用或指针，只要类对象在范围内或具有有效的生命周期，它们就会保持它们的生命周期。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T21:23:52.723

如果您需要返回多态对象，我建议使用唯一指针：

```
std::unique_ptr<Person> getPerson()
{
    return std::unique_ptr<Person>(new Programmer);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-26T22:02:07.437

我知道我经常谈论这个。

另一种选择是不返回任何东西。

告诉对象要做什么：

*   显示自己，使用这个渲染器
*   使用这个序列化器序列化自己（实现可以是 xml、数据库、json、网络）
*   这次更新你的状态
*   用控件装饰自己，使用这个控件创建器（创建滑块、下拉列表、复选框等）

整体上不需要吸气剂。努力避免它们，你会发现你的设计令人愉快地改变、可测试、合理。

# python - 如何设置 pygame.transform.rotate() 的轴心点（旋转中心）？

> ID：15098900
> 
> 赞同：7
> 
> 时间：2013-02-26T20:44:47.060
> 
> 标签：python, python-2.7, rotation, pygame

我想围绕中心以外的点旋转一个矩形。到目前为止，我的代码是：

```
import pygame

pygame.init()
w = 640
h = 480
degree = 45
screen = pygame.display.set_mode((w, h))

surf = pygame.Surface((25, 100))
surf.fill((255, 255, 255))
surf.set_colorkey((255, 0, 0))
bigger = pygame.Rect(0, 0, 25, 100)
pygame.draw.rect(surf, (100, 0, 0), bigger)
rotatedSurf = pygame.transform.rotate(surf, degree)
screen.blit(rotatedSurf, (400, 300))

running = True
while running:
    event = pygame.event.poll()
    if event.type == pygame.QUIT:
        running = False
    pygame.display.flip() 
```

我可以改变度数以获得不同的旋转，但旋转是关于中心的。我想将矩形中心以外的点设置为旋转点。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2018-03-21T17:30:39.950

为了围绕其中心旋转一个表面，我们首先旋转图像，然后得到一个新的矩形，我们将`center`前一个矩形的坐标传递给它以使其保持居中。要围绕任意点旋转，我们几乎可以做同样的事情，但我们还必须向中心位置（枢轴点）添加一个偏移向量来移动矩形。每次我们旋转图像时都需要旋转这个向量。

所以我们必须存储轴心点（图像或精灵的原始中心）——在元组、列表、向量或矩形中——和偏移向量（我们移动矩形的量）并将它们传递给`rotate`函数. 然后我们旋转图像和偏移向量，得到一个新的矩形，传递枢轴+偏移作为`center`参数，最后返回旋转后的图像和新的矩形。

[![在此处输入图像描述](../Images/4b149fea56b01f63126444ffab590b83.png)](https://i.stack.imgur.com/5VyZ9.jpg)

```
import pygame as pg

def rotate(surface, angle, pivot, offset):
    """Rotate the surface around the pivot point.

    Args:
        surface (pygame.Surface): The surface that is to be rotated.
        angle (float): Rotate by this angle.
        pivot (tuple, list, pygame.math.Vector2): The pivot point.
        offset (pygame.math.Vector2): This vector is added to the pivot.
    """
    rotated_image = pg.transform.rotozoom(surface, -angle, 1)  # Rotate the image.
    rotated_offset = offset.rotate(angle)  # Rotate the offset vector.
    # Add the offset vector to the center/pivot point to shift the rect.
    rect = rotated_image.get_rect(center=pivot+rotated_offset)
    return rotated_image, rect  # Return the rotated image and shifted rect.

pg.init()
screen = pg.display.set_mode((640, 480))
clock = pg.time.Clock()
BG_COLOR = pg.Color('gray12')
# The original image will never be modified.
IMAGE = pg.Surface((140, 60), pg.SRCALPHA)
pg.draw.polygon(IMAGE, pg.Color('dodgerblue3'), ((0, 0), (140, 30), (0, 60)))
# Store the original center position of the surface.
pivot = [200, 250]
# This offset vector will be added to the pivot point, so the
# resulting rect will be blitted at `rect.topleft + offset`.
offset = pg.math.Vector2(50, 0)
angle = 0

running = True
while running:
    for event in pg.event.get():
        if event.type == pg.QUIT:
            running = False

    keys = pg.key.get_pressed()
    if keys[pg.K_d] or keys[pg.K_RIGHT]:
        angle += 1
    elif keys[pg.K_a] or keys[pg.K_LEFT]:
        angle -= 1
    if keys[pg.K_f]:
        pivot[0] += 2

    # Rotated version of the image and the shifted rect.
    rotated_image, rect = rotate(IMAGE, angle, pivot, offset)

    # Drawing.
    screen.fill(BG_COLOR)
    screen.blit(rotated_image, rect)  # Blit the rotated image.
    pg.draw.circle(screen, (30, 250, 70), pivot, 3)  # Pivot point.
    pg.draw.rect(screen, (30, 250, 70), rect, 1)  # The rect.
    pg.display.set_caption('Angle: {}'.format(angle))
    pg.display.flip()
    clock.tick(30)

pg.quit() 
```

这是一个带有 的版本`pygame.sprite.Sprite`：

```
import pygame as pg
from pygame.math import Vector2

class Entity(pg.sprite.Sprite):

    def __init__(self, pos):
        super().__init__()
        self.image = pg.Surface((122, 70), pg.SRCALPHA)
        pg.draw.polygon(self.image, pg.Color('dodgerblue1'),
                        ((1, 0), (120, 35), (1, 70)))
        # A reference to the original image to preserve the quality.
        self.orig_image = self.image
        self.rect = self.image.get_rect(center=pos)
        self.pos = Vector2(pos)  # The original center position/pivot point.
        self.offset = Vector2(50, 0)  # We shift the sprite 50 px to the right.
        self.angle = 0

    def update(self):
        self.angle += 2
        self.rotate()

    def rotate(self):
        """Rotate the image of the sprite around a pivot point."""
        # Rotate the image.
        self.image = pg.transform.rotozoom(self.orig_image, -self.angle, 1)
        # Rotate the offset vector.
        offset_rotated = self.offset.rotate(self.angle)
        # Create a new rect with the center of the sprite + the offset.
        self.rect = self.image.get_rect(center=self.pos+offset_rotated)

def main():
    screen = pg.display.set_mode((640, 480))
    clock = pg.time.Clock()
    entity = Entity((320, 240))
    all_sprites = pg.sprite.Group(entity)

    while True:
        for event in pg.event.get():
            if event.type == pg.QUIT:
                return

        keys = pg.key.get_pressed()
        if keys[pg.K_d]:
            entity.pos.x += 5
        elif keys[pg.K_a]:
            entity.pos.x -= 5

        all_sprites.update()
        screen.fill((30, 30, 30))
        all_sprites.draw(screen)
        pg.draw.circle(screen, (255, 128, 0), [int(i) for i in entity.pos], 3)
        pg.draw.rect(screen, (255, 128, 0), entity.rect, 2)
        pg.draw.line(screen, (100, 200, 255), (0, 240), (640, 240), 1)
        pg.display.flip()
        clock.tick(30)

if __name__ == '__main__':
    pg.init()
    main()
    pg.quit() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-16T09:58:25.737

我也遇到了这个问题并找到了一个简单的解决方案：您可以创建一个更大的表面（双倍长度和双倍高度）并将较小的表面blit到更大的表面，这样旋转点就是较大的表面的中心。现在您可以围绕中心旋转较大的那个。

```
def rotate(img, pos, angle):
    w, h = img.get_size()
    img2 = pygame.Surface((w*2, h*2), pygame.SRCALPHA)
    img2.blit(img, (w-pos[0], h-pos[1]))
    return pygame.transform.rotate(img2, angle) 
```

（如果您要绘制草图，它会更有意义，但请相信我：它有效，并且在我看来比其他解决方案更易于使用和理解。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-23T15:17:42.530

我同意 MegaIng 和 skrx。但我也不得不承认，在阅读了他们的答案后，我无法真正理解这个概念。然后我找到了这个[游戏教程](http://fivedots.coe.psu.ac.th/Software.coe/learnPygame/Code/More%20Games/Cannon/)，关于一个**旋转的卡农在它的边缘**。

运行它后，我仍然有疑问，但后来我发现他们用于大炮的图像是其中的一部分。

[![以枢轴为中心的PNG Cannon 图像。](../Images/57c5e10fd6023a1364de2646c8ec3ec4.png)](https://i.stack.imgur.com/Us6W4.png)

图像不是以大炮中心为中心，而是以枢轴点为中心，图像的另一半是透明的。在那顿悟之后，我将同样的方法应用到我的虫子的腿上，它们现在都工作得很好。这是我的轮换代码：

```
def rotatePivoted(im, angle, pivot):
    # rotate the leg image around the pivot
    image = pygame.transform.rotate(im, angle)
    rect = image.get_rect()
    rect.center = pivot
    return image, rect 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-24T09:02:43.183

围绕图像上的 a 旋转图像`pivot`，该图像锚定到世界中的一个点 ( `origin`)，可以通过以下功能实现：

```
def blitRotate(surf, image, origin, pivot, angle):
    image_rect = image.get_rect(topleft = (origin[0] - pivot[0], origin[1]-pivot[1]))
    offset_center_to_pivot = pygame.math.Vector2(origin) - image_rect.center
    rotated_offset = offset_center_to_pivot.rotate(-angle)
    rotated_image_center = (origin[0] - rotated_offset.x, origin[1] - rotated_offset.y)
    rotated_image = pygame.transform.rotate(image, angle)
    rotated_image_rect = rotated_image.get_rect(center = rotated_image_center)
    surf.blit(rotated_image, rotated_image_rect) 
```

* * *

解释：

一个向量可以用 来表示[`pygame.math.Vector2`](https://www.pygame.org/docs/ref/math.html#pygame.math.Vector2)并且可以用 来旋转[`pygame.math.Vector2.rotate`](https://www.pygame.org/docs/ref/math.html#pygame.math.Vector2.rotate)。请注意， 与`pygame.math.Vector2.rotate`的旋转方向相反`pygame.transform.rotate`。因此必须反转角度：

计算从图像中心到图像轴的偏移向量：

```
image_rect = image.get_rect(topleft = (origin[0] - pivot[0], origin[1]-pivot[1]))
offset_center_to_pivot = pygame.math.Vector2(origin) - image_rect.center 
```

将偏移矢量旋转到您要旋转图像的相同角度：

```
rotated_offset = offset_center_to_pivot.rotate(-angle) 
```

通过从世界中的枢轴点减去旋转的偏移向量来计算旋转图像的新中心点：

```
rotated_image_center = (origin[0] - rotated_offset.x, origin[1] - rotated_offset.y) 
```

旋转图像并设置包围旋转图像的矩形的中心点。最后blit图像：

```
rotated_image = pygame.transform.rotate(image, angle)
rotated_image_rect = rotated_image.get_rect(center = rotated_image_center)

surf.blit(rotated_image, rotated_image_rect) 
```

另请参见[旋转曲面](https://github.com/Rabbid76/PyGameExamplesAndAnswers/blob/master/documentation/pygame/pygame_surface_rotate.md#rotate-surface)

* * *

最小的例子：`[![](../Images/1046507529a28f50314afc43ea70d681.png) repl.it/@Rabbid76/PyGame-RotateSpriteAroundOffCenterPivotCannon](https://repl.it/@Rabbid76/PyGame-RotateSpriteAroundOffCenterPivotCannon#main.py)`

[![](../Images/d777c32a4ea83f641651a4b7be9b4c20.png)](https://i.stack.imgur.com/fhxNf.gif)

```
import pygame

class SpriteRotate(pygame.sprite.Sprite):

    def __init__(self, imageName, origin, pivot):
        super().__init__() 
        self.image = pygame.image.load(imageName)
        self.original_image = self.image
        self.rect = self.image.get_rect(topleft = (origin[0]-pivot[0], origin[1]-pivot[1]))
        self.origin = origin
        self.pivot = pivot
        self.angle = 0

    def update(self):
        image_rect = self.original_image.get_rect(topleft = (self.origin[0] - self.pivot[0], self.origin[1]-self.pivot[1]))
        offset_center_to_pivot = pygame.math.Vector2(self.origin) - image_rect.center
        rotated_offset = offset_center_to_pivot.rotate(-self.angle)
        rotated_image_center = (self.origin[0] - rotated_offset.x, self.origin[1] - rotated_offset.y)
        self.image = pygame.transform.rotate(self.original_image, self.angle)
        self.rect = self.image.get_rect(center = rotated_image_center)

pygame.init()
size = (400,400)
screen = pygame.display.set_mode(size)
clock = pygame.time.Clock()

cannon = SpriteRotate('cannon.png', (200, 200), (33.5, 120))
cannon_mount = SpriteRotate('cannon_mount.png', (200, 200), (43, 16))
all_sprites = pygame.sprite.Group([cannon, cannon_mount])
angle_range = [-90, 0]
angle_step = -1

frame = 0
done = False
while not done:
    clock.tick(60)
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            done = True

    all_sprites.update()
    screen.fill((64, 128, 255))
    pygame.draw.rect(screen, (127, 127, 127), (0, 250, 400, 150))
    all_sprites.draw(screen)
    pygame.display.flip()
    frame += 1
    cannon.angle += angle_step
    if not angle_range[0] < cannon.angle < angle_range[1]:
        angle_step *= -1

pygame.quit()
exit() 
```

* * *

另见

[围绕枢轴旋转和缩放图像，同时在 Pygame 中分别缩放宽度和高度](https://stackoverflow.com/questions/70819750/rotating-and-scaling-an-image-around-a-pivot-while-scaling-width-and-height-sep/70820034#70820034)
![围绕枢轴旋转和缩放图像，同时在 Pygame 中分别缩放宽度和高度](../Images/b2e7cb2aa3575be74a0ee993ddfcf4b1.png) ![围绕枢轴旋转和缩放图像，同时在 Pygame 中分别缩放宽度和高度](../Images/157de01de487ac96c076a65c24948d52.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T12:30:18.307

我认为您必须为此创建自己的功能。

如果你制作一个 Vector 类，它会容易得多。

也许是这样的：

```
def rotate(surf, angle, pos):
    pygame.transform.rotate(surf, angle)
    rel_pos = surf.blit_pos.sub(pos)
    new_rel_pos = rel_pos.set_angle(rel_pos.get_angle() + angle)
    surf.blit_pos = pos.add(new_rel_pos) 
```

所以你有了它。你唯一需要做的就是带有方法'add()'、'sub()'、'get_angle()'和'set_angle()'的Vector类。如果您正在苦苦挣扎，请谷歌寻求帮助。

最后你会得到一个很好的 Vector 类，你可以在其他项目中扩展和使用它。

# javascript - EXT 拖放事件冲突 - 即。如何同时使用 ondragout 和 notifyout？

> ID：15098902
> 
> 赞同：1
> 
> 时间：2013-02-26T20:44:49.753
> 
> 标签：javascript, extjs

所以我有多个`Ext.dd.DragSource`和`Ext.dd.DropTarget`对象。为了获得我需要的正确行为，我将逻辑附加到这两个对象上的事件中。不可能只将所有逻辑附加到拖放。

我的问题是，当我设置`onDragOut`和`onDragEnter`拖动对象时，它们会停止`notifyEnter`和`notifyOut`触发放置对象。

有没有办法让这两个事件都触发？

```
var ds = new Ext.dd.DragSource(id, { ddGroup: 'drops' });
ds.onDragEnter = function (e, id) { console.log('Drag Enter'); }
ds.onDragOut = function (e, id) { console.log('Drag Exit'); }

var dt = new Ext.dd.DropTarget(id, { ddGroup: 'drops' });
// These never fire.
dt.notifyEnter = function (source, evt, data) { console.log('Drop Enter'); }
dt.notifyOut = function (source, evt, data) { console.log('Drop Exit'); } 
```

我正在使用 Extjs 4.0.2a，不幸的是，我目前仍坚持使用这个版本。对此的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:56:16.707

由于没有答案，我将添加我目前正在使用的解决方法。这不是问题的解决方案，只是绕过问题的替代方案。

因此，由于我无法同时在拖放元素上触发这两个事件，我只是使用不同的事件。

```
var ds = new Ext.dd.DragSource(id, { ddGroup: 'drops' });
ds.onDragOver = function (e, id) { console.log('Drag Over'); }
ds.beforeDragOut = function (e, id) { console.log('Drag Out Almost'); } 
```

尽管这些事件与我想要的并不完全相同，但通过一些额外的逻辑，我可以让它们以非常相似的方式行动。

如果有更好的解决方案，一种触发正​​确事件的方法，那么我会很高兴地接受它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:40:35.810

查看 ExtJS 文档和源代码，我认为您正在覆盖`onDragEnter`and ，其中原始函数将触发对and`onDragOut`的调用。我建议仅将文档（[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dd.DragSource](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dd.DragSource)）中列出的函数覆盖为“默认为空函数”，例如,和.`notifyEnter``notifyOut``beforeDragEnter``beforeDragOut`

如果您真的必须覆盖这些方法，我建议您保存原件并从您的函数中调用它们。如果您需要有关该模式的帮助，我可以编辑我的答案以提供示例。

# asp.net - 比较两个不同的gridview的选择值

> ID：15098904
> 
> 赞同：0
> 
> 时间：2013-02-26T20:44:55.983
> 
> 标签：asp.net, vb.net, gridview

您好，我有启用选择行的三个网格视图。用户将从每个网格视图中选择一个项目，然后在选定的索引更改上将值与其他两个网格视图进行比较以查看它们是否相等。在调试时我可以看到它们是相同的，所以我不确定为什么 if 语句总是传递为真。是否可以比较索引？谢谢您的帮助！

```
If gvCustomer.SelectedValue IsNot gvSiteAddress.SelectedValue Then
            dataSourceGVCust.SelectCommand = ConfigurationManager.AppSettings("SelectCustomer") & " WHERE CUST_NO LIKE '%" & gvSiteAddress.SelectedValue.ToString & "%' ORDER BY CUST_NAME"
        End If
If gvJobNumber.SelectedValue IsNot gvSiteAddress.SelectedValue Then
     dataSourceGVJobNumber.SelectCommand = ConfigurationManager.AppSettings("SelectJobNumber") & " WHERE CUST_NO LIKE '%" & gvSiteAddress.SelectedValue.ToString & "%' ORDER BY JOB_NO"
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:48:43.590

您在滥用`IsNot`运算符。请参阅[http://msdn.microsoft.com/en-us/library/t3bat82c.aspx](http://msdn.microsoft.com/en-us/library/t3bat82c.aspx)

`IsNot`引用是否等于。也就是说，这两个对象是否在**物理**上指向一个对象的同一个实例——不仅仅是它们具有相同的值。

更改`IsNot`为`<>`，您应该重新开始行动。

编辑：可能需要转换为正确的类型。例如，如果您的值是数字 ID，则类似于：

```
If CType(gvJobNumber.SelectedValue, Integer) <> CType(gvSiteAddress.SelectedValue, Integer) Then 
```

或者，如果`String`然后替换`String`您在`Integer`上面看到的位置。

# qt - 如何在 QMediaPlayer 中播放音频和删除文件？

> ID：15098905
> 
> 赞同：8
> 
> 时间：2013-02-26T20:45:02.427
> 
> 标签：qt, audio-streaming, qmediaplayer

我正在使用qt5.0。我创建了 dll 并将所有音频文件放入 dll 中。现在我正在从资源创建文件并播放。它工作正常。

但问题是播放文件后我无法删除该文件并重新创建新文件。

如果我尝试手动删除也会出错。“使用该文件的其他程序”。一旦我停止程序，则只能删除该文件。

如何在立即回滚后删除文件。这是我的代码

```
player = new QMediaPlayer;
connect(player,SIGNAL(mediaStatusChanged(QMediaPlayer::MediaStatus)),this,SLOT(mediaStatusChanged(QMediaPlayer::MediaStatus)));

QFile file2(QDir::tempPath() + "/temp0.mp3");

if (file2.open(QIODevice::ReadWrite))
{
    QFile workFile(":/AUDIO/" + fn +".mp3");
    if(workFile.open(QIODevice::ReadOnly))
    {
      file2.write(workFile.readAll());
      workFile.close();
    }

    file2.close();
}

player->setMedia(QMediaContent(QUrl::fromLocalFile(QDir::tempPath() + "/temp0.mp3")));
player->setVolume(100);
player->play(); 
```

* * *

```
void Audio::mediaStatusChanged(QMediaPlayer::MediaStatus state)
{
    if(state==QMediaPlayer::EndOfMedia)
    {
        QFile::remove(QDir::tempPath() + "/temp0.mp3");
        qDebug()<<"Audio played";
    }
} 
```

我收到“已播放音频”消息，但它没有删除文件。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-06T21:25:13.030

最近，我遇到了同样的问题。我通过将编译器从 msvs 更改为 mingw 来解决它。我认为 Qt 家伙没有解决这个错误，因为它的状态是“需要更多信息”。发布媒体文件的代码如下。

```
player->setMedia(QMediaContent()); 
```

但是，如果我使用 mingw 编译器，视频不会在 VM win7 x86 中播放并报告`DirectShowPlayerService::doRender: Unresolved error code 80040266`. 这对我来说似乎是一个僵局。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-10T19:06:20.450

[文档](http://qt.apidoc.info/5.1.1/qtmultimedia/qmediaplayer.html#media-prop)告诉我们QMediaPlayer ::setMedia：

> 将此属性设置为空 QMediaContent 将导致播放器丢弃与当前媒体源相关的所有信息并停止与该媒体相关的所有 I/O 操作。

不幸的是，这不适用于带有 Qt 5.1.1 的 Windows 7 - 这就是我提交[错误报告的原因](https://bugreports.qt-project.org/browse/QTBUG-34725)

甚至 Qt irc 频道的人也告诉我不要在 Windows 上使用 QMediaPlayer。他们建议使用 SDL。对于带有多媒体 API 的跨平台框架来说有点奇怪。

# ruby-on-rails - Aptana Studio 3 围绕选择的片段

> ID：15098906
> 
> 赞同：0
> 
> 时间：2013-02-26T20:45:04.590
> 
> 标签：ruby-on-rails, ruby, aptana, code-snippets, aptana3

所以我最近从 to 切换`Dreamweaver`到`Aptana Studio 3`并且一直在玩整个自定义片段功能。尽管我无法弄清楚如何选择/突出显示文本并用我自己的自定义代码和/或文本包装它，但对于我的一生。我已经在互联网上浏览了三天，找不到任何关于片段的信息。我发现了一些使用命令和组合键的东西，但我想创建和使用一个片段并尝试修改我发现的东西并不能产生好的结果。

我已经能够创建自己的类别和一些插入纯文本的基本片段，但没有使用选择。

`Ruby`如果接下来的内容完全残暴，我绝对没有经验，请原谅我。`PHP`我在, `HTML`, `Javascript`,等方面有更多经验`Java`。这是我到目前为止所拥有的。

```
snippet "Selection Test" do |snip|
  snip.trigger = "my_code"
  snip.input = :selection
  selection = ENV['TM_SELECTED_TEXT'] || ''
  snip.expansion = "<test>$selection</test>\n"
  snip.category = "My Snippets"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:22:05.643

我没有对自定义片段做太多，但如果它有帮助，在片段的 HTML 包中有一个示例，`<p></p>`当你这样做时，它会用标签包围选定的文本`Ctrl + Shift + W`。您可以在 HTML 包中的 snippets.rb 中看到它的代码：

```
with_defaults :scope => 'text.html - source', :input => :none, :output =>    :insert_as_snippet do |bundle|
  command t(:wrap_selection_in_tag_pair) do |cmd|
    cmd.key_binding = "CONTROL+SHIFT+W"
    cmd.input = :selection
    cmd.invoke do |context|
      selection = ENV['TM_SELECTED_TEXT'] || ''
      if selection.length > 0
        "<${1:p}>${2:#{selection.gsub('/', '\/')}}</${1:p}>"
      else
        "<${1:p}>$0</${1:p}>"
      end
    end
  end
end 
```

我摆弄了几分钟，将它放入 PHP 包中，`CTRL + Shift + P`让它在 HTML 文件中工作，这不是我的目标……但这是进步。稍后我可能会再玩弄它，但与此同时，也许您在完成所有研究后了解得足够多，可以整理出一些东西。如果你弄清楚了，我很想看看你的结果。

# asp.net - ORA-00947: 值不足

> ID：15098907
> 
> 赞同：0
> 
> 时间：2013-02-26T20:45:05.687
> 
> 标签：asp.net, oracle11g

我收到错误“ORA-00947：没有足够的值”）插入记录，但看不出原因！在我看来，我有正确数量的参数：

```
string sQuery = "insert into EventLog (UserEventLogID, USERID, EVENTSEVERITYID, LOGTIME_TZ, USEREVENTTYPEID, USEREVENTMSG) " +
    "values (0, :USERID, :EVENTSEVERITYID, cast(:LOGTIME_TZ as Timestamp(6) With Time Zone) at time zone '" + oLog.TimeZone + "'), " +
    ":EVENTTYPEID, :EVENTMSG) " +
    " returning USEREVENTLOGID into :EventLogID";

    oraCmd = new OracleCommand();
    oraCmd.BindByName = true;
    oraCmd.Parameters.Add("EVENTSEVERITYID", OracleDbType.Int16, 2, oLog.EventSeverityID, ParameterDirection.Input);
    oraCmd.Parameters.Add("LOGTIME_TZ", OracleDbType.TimeStamp, 6, oLog.EventTimestamp, ParameterDirection.Input);
    oraCmd.Parameters.Add("EVENTTYPEID", OracleDbType.Int16, 4, oLog.EventTypeID, ParameterDirection.Input);
    oraCmd.Parameters.Add("EVENTMSG", OracleDbType.Varchar2, 300, oLog.EventMsg, ParameterDirection.Input);
    oraCmd.Parameters.Add("USERID", OracleDbType.Varchar2, 50, oLog.UserID, ParameterDirection.Input);

    outParam = new OracleParameter("EventLogID", OracleDbType.Decimal);
    outParam.Direction = ParameterDirection.Output;
    oraCmd.Parameters.Add(outParam); 
```

该表还有一列“LGTIME”可以为空，因此我没有将其包含在插入语句中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:47:24.373

我看到一个额外的 ")" 。cast(:LOGTIME_TZ as Timestamp(6) With Time Zone) **<-----** at time zone '" + oLog.TimeZone + "')

# mfc - MFC CtabControl CTreeViewControl

> ID：15098908
> 
> 赞同：0
> 
> 时间：2013-02-26T20:45:06.977
> 
> 标签：mfc

下午好

我使用 tabControl 和 treeViewControl。我使用“OnSelchangTabcontrol(NMHDR *pNMHDR, LRESULT *pResult)”并且在某些情况下我想禁止更改所选项目。如何取消活动？我对 treeViewControl 有同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:02:15.473

在`OnSelchangingTabcontrol()`检查条件后在正文中执行以下操作：

```
if(/*erroneous condition*/)
{
  *pResult = 1;
  return;
} 
```

同样的事情也适用于树视图事件。确保你处理`XX_CHANGING`事件，而不是`XX_CHANGED`

# database - Microsoft Azure HIPAA 数据库合规性

> ID：15098909
> 
> 赞同：5
> 
> 时间：2013-02-26T20:45:10.253
> 
> 标签：database, azure, sql-server-ce

我正在研究在 Microsoft Azure 上开发与医疗保健相关的应用程序；但是，有人告诉我 SQL Server Azure 不符合 HIPAA。现在，我听说 Azure Web 开发和虚拟机符合 HIPAA。问题，Azure 虚拟机上的本地数据库是否符合 HIPPA（即 SQL Server Compact、MySQL 等）？我知道这是一个模糊的问题，但 Azure 似乎是一个很好的开发平台。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T20:55:35.873

并不是说虚拟机符合 HIPAA 标准。相反，可以为使用虚拟机的应用程序提供 BAA。应用程序本身仍然需要通过任何合规性。

如果您查看[Azure 信任中心](http://www.windowsazure.com/en-us/support/trust-center/compliance/)，您将看到 HIPAA BAA 的详细信息，以及指向 Azure [HIPAA 实施指南](http://download.microsoft.com/download/8/4/8/8483B6A9-1865-4D17-B6F1-5B66D5C29B10/Windows%20Azure%20HIPAA%20Implementation%20Guidance.pdf)的链接。

我不是律师，不能就 HIPAA 和您的应用程序的详细信息向您提供咨询。但是，我通读了合规性指南~~，它只指出 Windows Azure SQL 不在范围内~~。对于虚拟机，您有责任处理某些事情。从文档：

> 提供服务后，客户应对其环境负责，包括其应用程序、数据内容、虚拟机、访问凭证，以及遵守适用于其特定行业和地区的法规要求。

# php - 如何为 youtube 添加 wmode="opaque" 或 wmode="transparent" 到这个 php 片段？

> ID：15098914
> 
> 赞同：0
> 
> 时间：2013-02-26T20:45:40.133
> 
> 标签：php, youtube

**上述评论的注意事项：这不是重复的问题！**

> 以上没有解决我的问题；我已经知道不透明和透明属性......我的问题是将它们同化到给定的 php 代码中。

我有一个与我的顶级导航视频重叠的 youtube 视频页面。我读过包含属性**wmode="opaque"**将解决问题。

但我不确定如何在 PHP 中实现它。

调用视频的代码是：

```
 if ($showcase != ""):

    if (isset($_GET['entry'])) { 
        $iframe_src = 'http://www.youtube.com/v/' . $_GET['entry'] . '?version=3&
f=videos&app=youtube_gdata&autoplay=1';
    }
    else {
        $iframe_src = 'http://www.youtube.com/v/' . $showcase . '?version=3&
f=videos&app=youtube_gdata&autoplay=1';
    }

    $showcase_output = "<iframe height='" . $showcase_height . "' width='". 
$showcase_width . "' src='" . $iframe_src . "'></iframe>";

  endif; 
```

有谁知道我如何使这些视频**不透明**，动态地在 php 中，所以我的顶部导航菜单与视频重叠，而不是相反？我已经在论坛中搜索了答案，但还没有找到解决方案。感谢任何人都可以提供的任何指导！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:51:35.097

```
$iframe_src = 'http://www.youtube.com/v/' . $showcase . '?wmode=opaque&version=3&f=videos&app=youtube_gdata&autoplay=1'; 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:50:39.363

你可以这样做 ：

```
$iframe_src .= (empty($iframe_src) ? '?' : '&').'wmode=opaque'; 
```

# php - preg_match($username, '/\W/') （或者，另一个“preg_match()：分隔符不能是字母数字或反斜杠”）

> ID：15098917
> 
> 赞同：0
> 
> 时间：2013-02-26T20:45:49.510
> 
> 标签：php, regex, preg-match

我查看了（许多）其他类似的帖子，但他们只是没有为我做这件事。

我正在尝试确认 $username 仅包含“单词”字符——字母数字和/或下划线。我的代码是：

```
if (preg_match($username, '/\W/')) {
    //stuff happens
} 
```

我收到“分隔符不能是字母数字或反斜杠”消息。我敢肯定这是非常明显的事情，但有人能看出我做错了什么吗？我已经尝试过使用单引号/双引号并将退格键加倍，但没有任何效果。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:50:54.647

如前所述，您的[preg_match](http://php.net/manual/en/function.preg-match.php)参数设置错误。此外，您可能希望查看[ctype_*](http://php.net/manual/en/book.ctype.php)系列函数。

哦，我想你在追求`\w`，也没有`\W`看到[这个](http://www.php.net/manual/en/regexp.reference.escape.php)。

# sql-server - 无法使用 INSTEAD OF 触发器更新视图

> ID：15098933
> 
> 赞同：4
> 
> 时间：2013-02-26T20:46:58.337
> 
> 标签：sql-server, ms-access, view, ms-access-2007, adp

我的数据库是一个 Access Data Project，绑定到 SQL Server 2005 后端。我正在尝试将表单绑定到使用`INSTEAD OF`触发器的视图。Access 认为视图是不可更新的，所以它使表单成为只读的；显然它没有考虑到触发器。

我怀疑问题是 SQL Server 的元数据说视图不可更新。`INFORMATION_SCHEMA.VIEWS`例如，查询显示`IS_UPDATABLE`= NO。尽管如此，我绝对*可以*`UPDATE`通过使用语句或使用 SSMS GUI来更新视图。

有没有人知道我可以用来说服 Access 这个视图确实是可更新的方法？我知道还有其他方法可以让我获得对该表单的读写访问权限，但我计划使用此视图来限制某些用户对非常特定的数据子集的访问，如果可以的话，事情会变得容易得多将所有这些数据封装在这一视图中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T21:22:16.717

Access 需要链接表上的 PK 以使其可更新 - 我认为这是 JET（或任何新的）引擎可以唯一标识要更改的行。

这意味着您需要将此视图转换为索引视图，[这与可能非常复杂的蠕虫完全不同。](http://technet.microsoft.com/en-us/library/cc917715.aspx)

# c - 检查字符串是否包含C中另一个字符串的简单方法？

> ID：15098936
> 
> 赞同：57
> 
> 时间：2013-02-26T20:47:20.320
> 
> 标签：c, string, substring

我对这门语言很陌生。假设我有一个来自 HTTP 请求的字符串，例如

```
char * request = "GET /favicon.ico HTTP/1.1"; 
```

我特别想知道是否`favicon`在那个请求中，也许是一个布尔值。什么是相对简单的方法来解决这个问题？我知道如何在 Java 中做到这一点，但我对 C 更迷茫。

谢谢！

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-02-26T20:48:27.423

```
if (strstr(request, "favicon") != NULL) {
    // contains
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-02-26T20:48:06.597

```
strstr(request, "favicon") != NULL 
```

# java - 为什么我的文本不能打印到我的 JTextArea？

> ID：15098939
> 
> 赞同：1
> 
> 时间：2013-02-26T20:47:25.463
> 
> 标签：java, swing, variables, jtextarea

我正在调用一个返回字符串（来自网页的编辑文本）的方法，并且我想将该字符串打印到我的 JTextArea 上。我知道我发送到 JTextArea 的字符串是正确的，因为它将正确打印到命令行，但不会打印到 JTextArea。一定是我在将它添加到 TextArea 时做错了什么。任何帮助，将不胜感激。

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;

public class BrowserPanel extends JPanel {

private JTextField textField;
private String urlText;
private JTextArea textArea;
private BrowserPageReader myModel;
private String pageContent;
private BrowserFrame myFrame;
private String pageTitle;
private String pageBody;

public BrowserPanel(JTextField myTextField, BrowserPageReader model,
        BrowserFrame frame)
{
    myFrame = frame;
    myModel = model;
    textField = myTextField;
    textField.addActionListener(new InputHandler());

    /*JScrollPane areaScrollPane = new JScrollPane(textArea);
    areaScrollPane.setVerticalScrollBarPolicy(
            JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);

    areaScrollPane.setPreferredSize(new Dimension(250,250));*/
    textArea = new JTextArea(20,40);
    textArea.setEditable(false);
    textArea.setWrapStyleWord(true);
    textArea.setLineWrap(true);
    JScrollPane scroll = new JScrollPane(textArea);

    add(scroll);
}

public void paintComponent(Graphics g)
{
    super.paintComponent(g);

}
private class InputHandler implements ActionListener
{
    public void actionPerformed(ActionEvent e)
    {
         urlText = textField.getText();  
         //textArea.append(urlText);

         myModel.setURL(urlText);
         pageTitle = myModel.getTitle();
         myFrame.setTitle(pageTitle);
        pageBody = myModel.getBody();
        textArea.setText(pageBody); 
         System.out.println(pageBody); //This prints out exactly what Im wanting
                                       //  Its just a test             
         textArea.repaint();
    }
}
} 
```

我猜我可能需要向我的paintComponent 添加一些东西，因为我的TextArea 位于附加到我的Panel 的scrollPane 中。我真的不知道出了什么问题。如果我把`textArea.setText("blah");`它做它应该做的。我发送的变量是一个非常大的字符串，它是整个网页。这可能是问题吗？使用代码，textArea 保持空白，我希望它显示的内容正确打印到命令行。帮助！

*编辑*这里是我的代码的其余部分

```
 import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;

public class BrowserFrame extends JFrame{

public BrowserFrame()
{
    BrowserPageReader myModel = new BrowserPageReader();
    setTitle("My Browser");
    Toolkit kit = Toolkit.getDefaultToolkit();
    Dimension screenSize =kit.getScreenSize();
    setSize(screenSize.width/2,screenSize.height-500);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Container contentPane = getContentPane();
    JTextField textField = new JTextField(20);
    BrowserPanel myPanel = new BrowserPanel(textField,myModel,this);
    contentPane.add(myPanel);
    contentPane.add(textField,BorderLayout.PAGE_START);
    setVisible(true);

}
}

 import javax.swing.*;
import java.io.*;
import java.net.*;

public class BrowserPageReader {

private URL myURL;
//private String webURL;
private String totalWebContent;
private String htmlString;
private String contentToPrint = " ";
private String urlPath;
private String urlHost;
private String pageTitle;
private String pageBody;
private String formattedBody;

public void setURL (String webURL)
{
   try{
        myURL = new URL(webURL);
        urlPath = myURL.getPath();
        urlHost = myURL.getHost();

    }
    catch(MalformedURLException e)
    {
        JOptionPane.showMessageDialog(null,"URL is incorrectly formatted");
    }
}

public void retrieveContent()
{
    try{
        Socket socket = new Socket(urlHost,80);
        PrintWriter out = new PrintWriter(socket.getOutputStream());
        BufferedReader in = new
                BufferedReader(new InputStreamReader(socket.getInputStream()));
        out.print("GET " + urlPath + " HTTP/1.1\n");
        out.print("Host: "+ urlHost + "\n");
        out.print("\n");
        out.flush();
        while((totalWebContent = in.readLine()) != null)
        {
            //System.out.println(totalWebContent);
            htmlString = htmlString + totalWebContent;
            //System.out.println(contentToPrint);
        }
        //System.out.println("htmlString\n" + htmlString);
    }
    catch(Exception e){
        e.printStackTrace();
    }
}

public String getTitle()
{
       retrieveContent();
      //System.out.println(htmlString);
      pageTitle = htmlString.substring(htmlString.indexOf("<title>")+ 7,
              htmlString.indexOf("</title>")); 
      return pageTitle;
}

public String getBody()
{
    String toDelete;
    String edited;
    retrieveContent();

    pageBody = htmlString.substring(htmlString.indexOf("<body")+5,
            htmlString.indexOf("</body>"));
    toDelete = pageBody.substring(0,pageBody.indexOf('<'));
    edited = pageBody.replace(toDelete,"");
    pageBody = edited
    formattedBody = pageBody.replaceAll("<[^>]*>", "");
    //System.out.println(formattedBody);
    return formattedBody;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:55:44.643

由于您发布的代码不是[SSCCE](http://SSCCE.org)，一个我们可以编译、运行和测试的小型独立程序，我认为我们不会在没有猜测的情况下回答这个问题。所以我的猜测是：您添加文本的 JTextArea 与 JFrame 中显示的不同。

不过，为了能够自信地回答这个问题，我们需要[SSCCE](http://SSCCE.org)，尤其是显示您在上面创建类的位置以及将其添加到显示的 JFrame 的位置的代码。

例如，如果我使用模拟 BrowserFrame JFrame 和 BrowserPageReader 模型类创建一个小型[SSCCE](http://SSCCE.org)，一切似乎都运行良好：

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;

public class BrowserPanel extends JPanel {

   private JTextField textField;
   private String urlText;
   private JTextArea textArea;
   private BrowserPageReader myModel;
   private String pageContent;
   private BrowserFrame myFrame;
   private String pageTitle;
   private String pageBody;

   public BrowserPanel(JTextField myTextField, BrowserPageReader model,
         BrowserFrame frame) {
      myFrame = frame;
      myModel = model;
      textField = myTextField;
      textField.addActionListener(new InputHandler());

      /*
       * JScrollPane areaScrollPane = new JScrollPane(textArea);
       * areaScrollPane.setVerticalScrollBarPolicy(
       * JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
       * 
       * areaScrollPane.setPreferredSize(new Dimension(250,250));
       */
      textArea = new JTextArea(20, 40);
      textArea.setEditable(false);
      textArea.setWrapStyleWord(true);
      textArea.setLineWrap(true);
      JScrollPane scroll = new JScrollPane(textArea);

      add(scroll);
   }

   public void paintComponent(Graphics g) {
      super.paintComponent(g);

   }

   private class InputHandler implements ActionListener {
      public void actionPerformed(ActionEvent e) {
         urlText = textField.getText();
         // textArea.append(urlText);

         myModel.setURL(urlText);
         pageTitle = myModel.getTitle();
         myFrame.setTitle(pageTitle);
         pageBody = myModel.getBody();
         textArea.setText(pageBody);
         System.out.println(pageBody); // This prints out exactly what Im
                                       // wanting
                                       // Its just a test
         textArea.repaint();
      }
   }

   private static void createAndShowGui() {
      BrowserFrame frame = new BrowserFrame();
      JTextField textField = new JTextField(10);
      BrowserPageReader myModel = new BrowserPageReader();
      BrowserPanel mainPanel = new BrowserPanel(textField, myModel, frame);

      frame.add(textField, BorderLayout.NORTH);
      frame.add(mainPanel, BorderLayout.CENTER);

      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class BrowserFrame extends JFrame {

}

class BrowserPageReader {

   public void setURL(String urlText) {
      // does nothing for now. for testing purposes.
   }

   public String getBody() {
      return "body"; // for testing purposes
   }

   public String getTitle() {
      return "title"; // for testing purposes
   }

} 
```

由于我的代码“有效”，因此证明错误不在您上面发布的代码中。

您的工作是发布*无法*正常工作的类似代码，而是展示您的问题。我猜如果你努力创建这样一个程序，你会隔离错误，你会看到你可能有两个 BrowserPanel，一个显示，一个未显示但正在获取它的文本处理程序中的更改，您将能够在没有我们直接帮助的情况下解决您的错误。

* * *

**编辑**
SwingWorker 例如

```
import javax.swing.*;
import java.awt.*;
import java.awt.geom.*;
import java.awt.event.*;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.MalformedURLException;
import java.net.Socket;
import java.net.URL;

public class BrowserPanel extends JPanel {

   private JTextField textField;
   private String urlText;
   private JTextArea textArea;
   private BrowserPageReader myModel;
   private String pageContent;
   private BrowserFrame myFrame;
   private String pageTitle;
   private String pageBody;

   public BrowserPanel(JTextField myTextField, BrowserPageReader model,
         BrowserFrame frame) {
      myFrame = frame;
      myModel = model;
      textField = myTextField;
      textField.addActionListener(new InputHandler());

      /*
       * JScrollPane areaScrollPane = new JScrollPane(textArea);
       * areaScrollPane.setVerticalScrollBarPolicy(
       * JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
       * 
       * areaScrollPane.setPreferredSize(new Dimension(250,250));
       */
      textArea = new JTextArea(20, 40);
      textArea.setEditable(false);
      textArea.setWrapStyleWord(true);
      textArea.setLineWrap(true);
      JScrollPane scroll = new JScrollPane(textArea);

      add(scroll);
   }

   private class InputHandler implements ActionListener {
      public void actionPerformed(ActionEvent e) {
         urlText = textField.getText();
         // textArea.append(urlText);
         System.out.println(urlText);

         myModel.setURL(urlText);

         myModel.getContent(new PropertyChangeListener() {

            @Override
            public void propertyChange(PropertyChangeEvent evt) {
               if (SwingWorker.StateValue.DONE == evt.getNewValue()) {
                  pageTitle = myModel.getTitle();
                  myFrame.setTitle(pageTitle);
                  pageBody = myModel.getBody();
                  textArea.setText(pageBody);
                  System.out.println(pageBody);
               }
            }
         });
         // textArea.repaint();
      }
   }

   private static void createAndShowGui() {
      BrowserFrame frame = new BrowserFrame();
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class BrowserFrame extends JFrame {

   public BrowserFrame() {
      BrowserPageReader myModel = new BrowserPageReader();
      setTitle("My Browser");
      Toolkit kit = Toolkit.getDefaultToolkit();
      Dimension screenSize = kit.getScreenSize();
      setSize(screenSize.width / 2, screenSize.height - 500);
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      Container contentPane = getContentPane();
      JTextField textField = new JTextField(20);
      BrowserPanel myPanel = new BrowserPanel(textField, myModel, this);
      contentPane.add(myPanel);
      contentPane.add(textField, BorderLayout.PAGE_START);
      setVisible(true);

   }
}

class BrowserPageReader {

   private URL myURL;
   // private String webURL;
   private String totalWebContent;
   private String htmlString;
   private String contentToPrint = " ";
   private String urlPath;
   private String urlHost;
   private String pageTitle;
   private String pageBody;
   private String formattedBody;

   public void setURL(String webURL) {
      try {
         myURL = new URL(webURL);
         urlPath = myURL.getPath();
         urlHost = myURL.getHost();

      } catch (MalformedURLException e) {
         JOptionPane.showMessageDialog(null, "URL is incorrectly formatted");
      }
   }

   public void getContent(PropertyChangeListener listener) {
      RetrieveWorker worker = new RetrieveWorker();
      worker.addPropertyChangeListener(listener);
      worker.execute();
   }

   private void retrieveContent() {
      try {
         Socket socket = new Socket(urlHost, 80);
         PrintWriter out = new PrintWriter(socket.getOutputStream());
         BufferedReader in = new BufferedReader(new InputStreamReader(
               socket.getInputStream()));
         out.print("GET " + urlPath + " HTTP/1.1\n");
         out.print("Host: " + urlHost + "\n");
         out.print("\n");
         out.flush();
         while ((totalWebContent = in.readLine()) != null) {
            // System.out.println(totalWebContent);
            htmlString = htmlString + totalWebContent;
            // System.out.println(contentToPrint);
         }
         // System.out.println("htmlString\n" + htmlString);
      } catch (Exception e) {
         e.printStackTrace();
      }
   }

   public String getTitle() {
      // !! retrieveContent();
      System.out.println(htmlString);
      pageTitle = htmlString.substring(htmlString.indexOf("<title>") + 7,
            htmlString.indexOf("</title>"));
      return pageTitle;
   }

   public String getBody() {
      String toDelete;
      String edited;
      // !! retrieveContent();

      pageBody = htmlString.substring(htmlString.indexOf("<body") + 5,
            htmlString.indexOf("</body>"));
      toDelete = pageBody.substring(0, pageBody.indexOf('<'));
      edited = pageBody.replace(toDelete, "");
      pageBody = edited;
      formattedBody = pageBody.replaceAll("<[^>]*>", "");
      // System.out.println(formattedBody);
      return formattedBody;

   }

   private class RetrieveWorker extends SwingWorker<Void, Void> {
      @Override
      protected Void doInBackground() throws Exception {
         retrieveContent();
         return null;
      }

   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T21:17:25.277

我敢打赌你的输入处理程序被多次调用。文本可以设置为正文，然后打印，然后由于某种原因被设置回空。通过添加在您的 system.out.println 语句中对此进行测试

```
System.out.println("outputStart: " + pagebody + " :END"); 
```

然后你就可以知道你的输入处理程序运行了多少次。

# php - PHP 代码未在浏览器中呈现

> ID：15098940
> 
> 赞同：2
> 
> 时间：2013-02-26T20:47:31.637
> 
> 标签：php, html, rendering

我有一个文件 manage.php，其中包含 php 代码，如下所示。

其他文件在同一台 PC 和同一台服务器上运行良好（我使用 WAMP）。并且代码正在与 MySQL 数据库正确交互以实现另一个页面上的登录机制......

由于某种原因，代码没有在 FF 或 Chrome 中呈现。如您所见，在 chrome 中，代码被 html 注释块注释掉，没有任何内容被打印或读取，等等。我没有在我的文本编辑器中编写这样的代码。

我烦了。有任何想法吗？

[http://captainscall.site11.com/temp_stuff/why-php.PNG](http://captainscall.site11.com/temp_stuff/why-php.PNG)

这是 manage.php 的完整脚本：

```
<?php 
/*
    /admin/index.php
    admin area for Neos Massage
    Made by Douglas Franz, freelance PHP/MySQL/HTML/CSS/JS/jQuery-ist.
*/

session_start();
include('models/auth.php');
include('includes/database.php');
?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Neos Massage Admin Area</title>
    <script type="text/javascript" src="js/jquery.js"></script>
    <link rel="stylesheet" type="text/css" href="css/admin.css" />
    </head>

<body>

    <div id="admin_header"> 
        <img src="../images/header-background-restored-flower-no-color.png" style="vertical-align: top;"/>
        <span><b>Admin Area</b><br /><?php if (isset($_SESSION['uName'])) { echo $_SESSION['uName']; } ?></span>
        <div id="border">
        <img src="../images/border.png" width="100%" height="20"/>
        </div>
    </div>  

    <div id="admin_content">

        <h1 style="color: #402d11;">Neos Massage - Manage</h1>
            <hr />
            <a href="index.php?logout">logout</a>
            <br />
            <?php var_dump($_SESSION); echo "this is a test"; ?>
            <?php print "this is a test"; ?>

    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T21:06:05.443

哇。好的，所以为了诊断它，我复制了文件中的代码，然后完全删除了 manage.php。

然后，我使用名为 manage.php 的 Windows 资源管理器 GUI（“正常”方式）创建了一个新文件并粘贴了代码。

然后它起作用了。

在我使用 Windows PowerShell 创建 manage.php 之前

```
new-item -type file manage.php 
```

我遇到过类似的问题，其中 PowerShell 的编码不是 UTF-8 而是 Big-Endian 或其他东西，它......简单地说，就是把事情搞砸了。我想这是一个罕见的问题，但却是诊断问题的一个很好的教训。

多谢你们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:59:02.917

这绝对不是浏览器问题：它是环境问题。WAMP 中的某些内容未设置为将此页面作为 PHP 脚本执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T21:06:55.643

如果你说的是真的，其他`*.php`文件运行没有问题，我的假设是你保存文件的编码导致了问题。

`<!--?php`<- Chrome 正在更改 PHP 标记以使我认为文档的编码不正确。

尝试将文件另存为新文档，或将代码复制并粘贴到新文档中并将其另存为新文件。我敢打赌，这可以解决您的问题。

# linux - Linux 命令返回登录的服务器

> ID：15098947
> 
> 赞同：-1
> 
> 时间：2013-02-26T20:47:59.523
> 
> 标签：linux, terminal

我一直在寻找错误的答案。我一次打开了许多终端窗口，并且......如果我分心于另一份工作并回来，我想要一种快速的方法来查看我当前登录到服务器的位置。

因为我在一个 Drupal 站点上工作，所以有两个结构相同的独立服务器，所以我试图避免向上滚动或使用历史记录和查找。我的提示在两个不同的服务器上是相同的，因此没有快速参考。

`Netstat`并没有真正做到这一点，因为 IP 不同并且无法立即识别并且`arp`已关闭但显示防火墙 IP 而不是特定服务器。

我为 www.server1.com 和 www.server2.com 设置了别名，这样我就可以快速登录......正如我所提到的，这一天很忙，所以我想选择一个终端窗口，输入一个命令然后繁荣看, “啊，这是 server1.com”

是否有一个命令实际上显示“您当前已登录......并且 IP# 或人类可读的 url 都可以。

我已经对其他服务器终端窗口进行了颜色编码，这很酷，但我确定我刚刚找到了一些命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:52:57.977

**hostname**打印当前登录的主机名。

**ifconfig**应该显示 IP 地址。

设置诸如 PS1 之类的 bash environmnet 变量可以得到提示。例如：

```
export PS1="\u@\h:\w\n\$ " 
```

这将在提示中显示登录用户、主机名和当前工作目录。

将导出添加到您的 $HOME/.bashrc 应该保持它的持久性。

更新：由于您说两个系统之间的 IP 地址不同，您可以将其添加到您的 bashrc（将 eth0 更改为系统上已知的任何接口）

```
HOST_IPADDR=$(ifconfig eth0 | sed -n '/inet /{s/.*addr://;s/ .*//;p}')
if [ "$HOST_IPADDR" == "a.b.c.d" ]; then
    export PS1="\u@\h-DEV:\w\n\$ "
elif [ "$HOST_IPADDR" == "e.f.g.h" ]; then
    export PS1="\u@\h-PROD:\w\n\$ "
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:49:04.603

```
hostname 
```

打印当前主机的名称。您可能还想通过修改`PS1`变量（在 Bash 中）将主机名放在提示符中，例如

```
PS1='\u@\h \w' 
```

得到类似的提示

```
username@someserver /tmp$ 
```

（把它放在你的`.bashrc`里面，让它在登录会话之外持续存在）。

# ruby-on-rails-3 - 不推荐使用 find(:first) 和 find(:all)

> ID：15098961
> 
> 赞同：7
> 
> 时间：2013-02-26T20:48:37.700
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在使用`RubyMine`with`rails 3.2.12`并且在我的 IDE 中收到了已弃用的警告。任何想法如何解决这个已弃用的警告？

```
find(:first) and find(:all) are deprecated in favour of first and all methods. Support will be removed from rails 3.2. 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T20:52:34.840

@keithepley 评论后我改变了我的答案

```
#Post.find(:all, :conditions => { :approved => true })
Post.where(:approved => true).all

#Post.find(:first, :conditions => { :approved => true })
Post.where(:approved => true).first
or
post = Post.first  or post = Post.first!
or
post = Post.last   or post = Post.last! 
```

 ~~[您可以从此位置](http://www.simonecarletti.com/blog/2010/07/the-way-to-rails-3/)阅读更多信息

### 不推荐使用的语句

```
Post.find(:all, :conditions => { :approved => true }) 
```

### 更好的版本

```
Post.all(:conditions => { :approved => true }) 
```

### 最佳版本 (1)

```
named_scope :approved, :conditions => { :approved => true }
Post.approved.all 
```

### 最佳版本 (2)

```
Post.scoped(:conditions => { :approved => true }).all 
```

 ~~* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-24T20:20:00.437

这是 Rails 3-4 的做法：

```
Post.where(approved: true) # All accepted posts
Post.find_by_approved(true) # The first accepted post
# Or Post.find_by(approved: true)
# Or Post.where(approved: true).first
Post.first
Post.last
Post.all 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T21:11:46.920

使用 Rails 3 中添加的新`ActiveRecord::Relation`内容。在此处查找更多信息：http: [//guides.rubyonrails.org/active_record_querying.html](http://guides.rubyonrails.org/active_record_querying.html)

而不是在您的模型上`#find`使用`#first`, `#last`,`#all`等，以及返回 ActiveRecord::Relation 的方法，例如`#where`.

```
#User.find(:first)
User.first

#User.find(:all, :conditions => {:foo => true})
User.where(:foo => true).all 
```~~~~

# informix - 在 ESQL/C 中使用 PID 创建临时表

> ID：15098962
> 
> 赞同：1
> 
> 时间：2013-02-26T20:48:40.710
> 
> 标签：informix, embedded-sql

我正在使用 ESQL/C 代码为 UI 提供后端支持，连接到 Informix 数据库。我正在我的代码中创建临时表。但是，我猜如果多个用户同时使用这个 UI，那么临时表可能已经存在于数据库中，这可能会产生问题。那么，有人可以建议我是否可以在我的 ESQL/C 代码中创建以 PID 作为后缀的临时表

```
create temp table tabname_PID (name char(10)); 
```

在 shell 脚本中，我通常使用`tabname_$$`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T21:13:29.070

您可以创建嵌入了 PID 的表，但这不是必需的。任何临时表仅在创建它的会话中可见，因此您可以在每个会话中使用相同的表名（单独但同时执行的 ESQL/C 程序），而不必担心冲突。

如果尽管确信这是不必要的，但您仍然想这样做，那么您必须准备和执行（或声明、打开、获取、关闭）字符串中的语句：

```
snprintf(sql, sizeof(sql), "CREATE TEMP TABLE tabname_%d(name CHAR(10))", (int)getpid());
EXEC SQL PREPARE s FROM :sql;
EXEC SQL EXECUTE s; 
```

或使用 EXECUTE IMMEDIATE （这是明显的赢家）：

```
EXEC SQL EXECUTE IMMEDIATE :sql; 
```

然后，您还必须准备所有查询；使用固定名称临时表的一个明显优势是，如果您不想，您不必准备引用临时表的所有内容（尽管使用 PREPARE 等通常有好处）。

出于同样的原因，您也不必`$$`在 shell 脚本中使用 - 临时表是会话专用的。

# validation - 没有 requiredValidator 的 customValidator？

> ID：15098964
> 
> 赞同：0
> 
> 时间：2013-02-26T20:48:42.897
> 
> 标签：validation, xpages, xpages-ssjs

我正在为文本字段使用自定义验证器。似乎自定义验证仅在执行所需验证后才有效。这意味着无法自定义验证没有 requiredValidator 的字段 - 是这样吗？我想做的事：

我有一个文本字段。只有选择了另一个字段中的特定值（这里是一个复选框组），才需要该值。这是一个依赖验证。在需要文本字段之前，我的自定义验证器可以正常工作 - 但情况并非如此。

复选框没有特定值 -> 文本字段可以为空白
复选框保存值 -> 文本字段必须有值。

有任何想法吗？

```
 <xp:inputText id="inputText1" disableClientSideValidation="true">
</xp:inputText>

<xp:inputText id="inputText2" disableClientSideValidation="true">

    <xp:this.validators>
        <xp:customValidator message="err">
            <xp:this.validate><![CDATA[#{javascript:if(getComponentValue("inputText1").length>0 && getComponentValue("inputText2").length==0) postValidationError(this, "foo")}]]></xp:this.validate>
        </xp:customValidator>

    </xp:this.validators>
</xp:inputText> 
```

其中 getComponentValue 是一种从组件接收带有 getValue 或 getSubmittedValue 的值的方法，而 postValidationError 是一种添加面孔消息的方法。

**编辑和最终答案**

结论和示例：http: [//mardou.dyndns.org/Privat/osnippets.nsf/id/OBUE-95BLK4](http://mardou.dyndns.org/Privat/osnippets.nsf/id/OBUE-95BLK4)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T22:17:16.380

*所需的验证器*始终是验证期间将执行的第一个验证器。这意味着您问题第一部分的答案是肯定的。

但这并不意味着您需要一个必需的验证器才能使用自定义验证器：您的这部分问题必须用明确的“否”来回答。

*所需*的验证器是一种特殊的“hack”，因为只有当您的组件接收到新值（也就是非空白）时才会执行验证器。

我不确定为什么您对自定义验证器有问题 - 在您描述的场景中，您只是在使用必需的验证器......

**编辑**：

只需“转动您的验证器”：将自定义验证器从*inputText2*添加到*inputText1*，它应该可以工作。

**编辑2：**

```
<xp:inputText id="inputText1" disableClientSideValidation="true">
   <xp:this.validators>
      <xp:customValidator message="err">
         <xp:this.validate><![CDATA[#{javascript:
            var val = getComponent("inputText2").getSubmittedValue();
               if( val.equals("") == true )
                  return false;
               null}]]>
         </xp:this.validate>
      </xp:customValidator>
   </xp:this.validators>
</xp:inputText>

<xp:inputText id="inputText2" disableClientSideValidation="true" /> 
```

# ruby-on-rails-3 - sidekiq true god.rb 从不运行我的工人，来自终端的相同命令在哪里？

> ID：15098967
> 
> 赞同：3
> 
> 时间：2013-02-26T20:48:45.273
> 
> 标签：ruby-on-rails-3, redis, sidekiq, god

运行 god.rb 来启动和监控 Sidekiq 这不起作用。在我的 sidekiq 的上帝配置下方。

在生产环境中从终端手动运行 sidekiq -C /srv/books/current/config/sidekiq.yml 确实可以正常工作，但不是 sidekiq god.rb 配置任何人都知道为什么会发生这种情况？日志中没有太多内容。

```
God.watch do |w|

  w.name = "sidekiq"
  w.interval = 30.seconds
  w.start = "cd #{ENV['RAILS_ROOT']}; sidekiq -C /srv/books/current/config/sidekiq.yml"
  w.stop = "cd #{ENV['RAILS_ROOT']}; exec sidekiqctl stop /srv/books/shared/tmp/pids/sidekiq.pid"
  w.restart = "#{w.stop} && #{w.start}"
  w.start_grace = 10.seconds
  w.restart_grace = 10.seconds
  w.log = File.join(ENV['RAILS_ROOT'], 'log', 'sidekiq.log')

  # determine the state on startup
  w.transition(:init, {true => :up, false => :start}) do |on|
    on.condition(:process_running) do |c|
      c.running = true
    end
  end

  # determine when process has finished starting
  w.transition([:start, :restart], :up) do |on|
    on.condition(:process_running) do |c|
      c.running = true
      c.interval = 5.seconds
    end

    # failsafe
    on.condition(:tries) do |c|
      c.times = 5
      c.transition = :start
      c.interval = 5.seconds
    end
  end

  # start if process is not running
  w.transition(:up, :start) do |on|
    on.condition(:process_running) do |c|
      c.running = false
    end
  end

  # Notifications
  # --------------------------------------
  w.transition(:up, :start) do |on|
    on.condition(:process_exits) do |p|
      p.notify = 'ect'
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-28T22:39:29.343

您似乎缺少`RAILS_ROOT`定义。您在脚本中使用它，但它从未定义过。它可能在终端中工作，因为它设置在那里。但是当 god.rb 运行它时，你得到的不是终端环境，而是一个新的干净的环境。

尝试将此添加到您的上帝脚本中：

```
w.env = { 'RAILS_ROOT' => "/srv/books/current",
          'RAILS_ENV' => "production" } 
```

您也可以将其设置为普通的 ruby​​ 变量，如[示例](http://godrb.com/#wiki-_config_files_are_ruby_code)所示。

# c# - 如何在不使用^的情况下实现异或？

> ID：15098971
> 
> 赞同：0
> 
> 时间：2013-02-26T20:49:19.010
> 
> 标签：c#, c++, .net, c, bit-manipulation

有没有办法在不使用的情况下实现按位异或`^`？

1）与其他按位运算？

2）算术运算？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-26T20:50:48.707

```
a xor b == (a and (not b)) or ((not a) and b) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T21:04:32.287

我不知道您为什么要这样做，但是： `(a|b)&~(a&b)`或者`(a&~b)|(b&~a)` 算术版本似乎太复杂了，如果没有充分的理由就无法尝试。

# c++ - Eclipse 无法解析用宏声明的字段

> ID：15098972
> 
> 赞同：3
> 
> 时间：2013-02-26T20:49:24.997
> 
> 标签：c++, eclipse, eclipse-cdt

我最近开始深入研究一个开源项目的代码，该项目主要是用 C++ 编写的。我在 Ubuntu 12.10 中使用 Eclipse 3.8。

**问题：** Eclipses 错误地将字段标记为未解析，因为用于将字段声明与头文件分开的特别复杂的约定。

*某个类.h*

```
class SomeClass
{
public:
    #define MACRO_CLASS_PARAM(Name) SomeType m_##Name;
    #include "fields.h"
    #undef MACRO_CLASS_PARAM
}; 
```

*字段.h*

```
MACRO_CLASS_PARAM(Field1)
MACRO_CLASS_PARAM(Field2)
... 
```

现在在 cpp 文件中，如果我想做类似`instanceOfSomeClass.Field1`Eclipse 之类的操作，会将其标记为“无法解析字段 'Field1'”的错误。

**问题：**有没有办法让 Eclipse 正确处理这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-16T04:28:54.210

无法正确处理`#include`不在全局范围内的语句是Eclipse 索引器[中长期存在的缺陷](https://bugs.eclipse.org/bugs/show_bug.cgi?id=315964)。

你可以做的事情：

*   修改您的代码以避免这种模式。一旦文本头包含模型被 C++ 模块取代，它无论如何都将是无效的。
*   为 Eclipse CDT 提供针对此缺陷的修复。
*   使用可以解析此模式的其他 IDE。（我不知道有一个在我脑海中，但我也没有花很多时间去寻找。）

# javascript - 如果窗口大小低于某个数字，则仅允许 .click 事件

> ID：15098976
> 
> 赞同：0
> 
> 时间：2013-02-26T20:49:30.023
> 
> 标签：javascript, jquery, if-statement, screen-size

我有一个`#div1`，单击时应`#div2`使用 jquery 切换。此点击事件应仅在窗口大小低于 760 像素时执行该功能。我不擅长 javascript，所以我得到了错误的结果......当用户单击 时`#div1`，它不会切换 div，而是在您将窗口大小调整到 760 像素以下时自动切换。我确定 if 语句或其他东西的顺序存在明显的问题。

那是我的代码：

```
$(function(){
    if($(window).width() <= 760){
        $('#div').click(function(){
                $('#div2').toggle({"display":"block"});
        });
    }
}); 
```

希望我的问题可以理解。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:51:12.450

你的订单有点混乱。它应该是

```
$(function(){
    $('#div').click(function(){
        if($(window).width() <= 760){
                $('#div2').toggle({"display":"block"});
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T20:54:56.230

如果将 if 放在 .click() 中会怎样？

```
$(function(){
   $('#div').click(function(){
    if($(window).width() <= 760)
      {
         $('#div2').toggle({"display":"block"});
      }
   });
}); 
```

希望能帮助到你！

# ruby - 在迭代之间执行某些指令块的循环是否有成语？（特别是在 Ruby 中）

> ID：15098978
> 
> 赞同：-1
> 
> 时间：2013-02-26T20:49:33.480
> 
> 标签：ruby, loops, iterator

我经常需要在循环中做一些操作，在迭代之间做一些其他操作。一个简单的例子是将数组中的单词收集成一个字符串，向后拼写并用逗号分隔。是否有任何语言的成语或语言支持？（现在我对 Ruby 最感兴趣。）

我通常会做类似的事情

```
a = ['foo', 'bar', 'baz']
s = ''
n = a.size - 1
i = 0
loop do
  s << a[i].reverse
  break if i == n
  s << ', '
  i += 1
end 
```

但是如果使用 ruby​​ 迭代器，我不知道保存这个半迭代的好方法。

这看起来是多余的：

```
a = ['foo', 'bar', 'baz']
s = ''
a.each do |w|
  s << w.reverse
  s << ', ' unless w == a.last
end 
```

* * *

**更新 1.**一个更实际的示例是创建一个 Haml 模板，其中 HTML 块是在循环中创建的，并且需要与其他 HTML 块连接。

* * *

**更新 2.**在[programmers.stackexchange](https://softwareengineering.stackexchange.com/questions/188501/)上，有人建议我的问题被称为“循环半”问题。

* * *

**更新 3.**我无法在 Haml 中应用 Map-Reduce 模式，因为 Haml 不允许关闭块`end`（它只使用缩进），所以我找不到链接`map`和`reduce`. 所以从某种意义上说，这个问题仍然是开放的，但也许它也是封闭的，因为没有办法做到这一点。所以这是一个悬而未决的问题，我猜。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T20:59:33.693

标准的 Ruby 方式是：

```
a.map(&:reverse).join(", ") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T21:45:24.250

您已经区分了数组中每个元素的处理和以某种方式转换结果数组的其他处理。这些是 MapReduce 模型中的“map”和“reduce”。

[http://en.wikipedia.org/wiki/Mapreduce](http://en.wikipedia.org/wiki/Mapreduce)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:00:56.837

```
a = ['foo', 'bar', 'baz'] 
a.each do |w|
    w.reverse!
end
s = a.join(',') 
```

这是你要找的吗？输出是：

`oof,rab,zab`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T22:26:44.233

如果您需要经常执行这样的操作，您可以轻松扩展`Array`：

```
class Array
  def join_cb
    inject ('') { |v, e| 
      v += "#{e}#{yield e unless e == self.last}"
    }
  end
end 
```

并像这样使用它：

```
> a = ['foo', 'bar', 'baz']
> a.map(&:reverse).join_cb { '%' }
# ⇒ "oof%rab%zab" 
```

或者，使 concat 字符串依赖于数组元素：

```
> a.map(&:reverse).join_cb { |e| e == 'rab' ? '-' : '_' }
# ⇒ "oof_rab-zab" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-02T12:22:09.430

作为即使在 Haml 中也有效的解决方案，建议我执行以下操作：

```
a.each_with_index do |item, index|
  unless index.zero?
    # do what is to be done between the iterations
  end
  # do what is to be done on all iterations
end 
```

我现在正在使用它，但它当然不是最优的：条件在每次迭代时运行。作为一个小小的不便，前一个项目在“迭代之间”是不可访问的。

# matlab - 在matlab中绘制一般形式的二次曲面

> ID：15098980
> 
> 赞同：4
> 
> 时间：2013-02-26T20:49:36.060
> 
> 标签：matlab

我有二次曲面方程 ![在此处输入图像描述](../Images/a0f0d8f791758e5e294da2c0625d0864.png)

我知道 A,B,C... 如何在 matlab 中绘制我的方程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T22:13:59.617

最好的办法是生成函数的 3D 等高线图，其中函数值为 0 的单个等高线。要以合理的精度执行此操作，请在 x、y、z 的多个点处计算函数 F，如下所示：

```
gv = linspace(-30,30,50); % adjust for appropriate domain
[xx yy zz]=meshgrid(gv, gv, gv);
F = A*xx.*xx + B*yy.*yy + C*zz.*zz+ ... etc

figure
isosurface(xx, yy, zz, F, 0) 
```

这样做的原因是你的函数通常是多值的——也就是说，对于给定的 X 和 Y 值，Z 可能有两个可能的答案。通过这种方式你可以有效地绕过这个问题——指导 matlab将曲面放在函数为零的任何地方。

请注意，我`gv`为网格提供了一个任意向量 - 即评估函数的点。要获得准确且视觉上令人愉悦的结果，您可能需要在可能的解决方案范围内的每个维度中大约 50 个点（这可能在三个维度上有所不同）；

例如，与

```
F = xx.^2 + 2*yy.^2 + 0.5*zz.^2 + .4*xx.*yy + .5*xx.*zz + .6*yy.*zz + 7*xx + 8*yy + 9*zz - 100; 
```

你得到下图：

![在此处输入图像描述](../Images/61c319187b3f6b1467b29387ab37b595.png)

# jquery - jQuery 在通过 AJAX 加载的元素上运行函数

> ID：15098989
> 
> 赞同：0
> 
> 时间：2013-02-26T20:50:16.247
> 
> 标签：jquery, ajax, livequery

我有一个项目正在通过 js 函数加载对帖子的回复：

```
$('div.discussion_content').each( function() {
    discussion.loadDiscussion($(this));
}); 
```

它在页面加载时运行良好，但我们在页面上有一个“无限滚动”，当我向下滚动以获取更多内容（以及因此更多讨论）时，我什么也得不到。

我已经尝试过 .on() jQuery 函数......但是在什么上？我想在元素加载后立即调用此函数并尝试 .on('load' ... ) 无济于事。

我已经尝试过 .livequery() 插件...

```
$('div.discussion_content').livequery(function() { 
    discussion.loadDiscussion($(this)); 
}); 
```

也无济于事。

我想要的不可能是不可能的，甚至是不寻常的……但我发现自己很糟糕，不知道解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T20:55:08.180

如果您想在插入后立即执行操作，那么您可能应该只将逻辑作为 AJAX 调用的成功处理程序的一部分。

如果您确实想对其中一个元素的某些操作执行此逻辑，那么`on()`应该是您的方法。请注意，`on()`需要将父元素附加到`on()`调用函数时存在的动态元素。用法是这样的：

```
$('#container_available_at_page_load').on('click', '.class_of_dynamic_elements', function() {
    // do something
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T20:53:02.097

你试过滚动事件吗？ [http://api.jquery.com/scroll/](http://api.jquery.com/scroll/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T20:53:19.223

你试过事件委托吗？

```
$(document).on('click','myClickeableDiv', function(){
  //do your thing
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T20:57:05.873

这些元素在页面加载时不存在，因此“每个”语句不会影响它们。尝试在创建后触发“每个”语句（在滚动事件上）。

*如果您附上了更多代码，它可能会有所帮助。

# xcode - 如何向在 tabcontroller 中以编程方式创建的导航控制器中的 barbuttonitem 添加操作

> ID：15098991
> 
> 赞同：0
> 
> 时间：2013-02-26T20:50:23.617
> 
> 标签：xcode

我试图将 barbuttonitem 添加到 xcode proj 中，最后使用视图控制器显示它并将代码放在视图中确实加载部分，但我无法连接操作......我一直使用界面构建器和 IBOutlets 但那不是一个选项，因为必须以编程方式放入此导航控制器才能使标签栏控制器工作

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    //add navbar buttons progamatically b/c nothing to use in xibs...
    UIBarButtonItem * popbutt = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(apopbuttonPressed:)];

    UINavigationItem * navigItem = [[UINavigationItem alloc]initWithTitle:@"Scribbler"];
    navigItem.rightBarButtonItem = popbutt;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
} 
```

这是我第一次尝试在不使用 IBOutlet 和界面构建器的情况下将操作放在一起，所以我确信它看起来很糟糕，目标是使用 FPPopover 并让导航栏按钮项目在按下时显示一个弹出窗口

```
-(void)apopbuttonPressed
{
    //the controller we want to present as popover
    ScribblePopoverViewController * controller = [[ScribblePopoverViewController alloc] initWithStyle:UITableViewStylePlain];
    controller.delegate = self;
    apop = [[FPPopoverController alloc] initWithViewController:controller];

    //apop.arrowDirection = FPPopoverArrowDirectionAny;
    apop.tint = FPPopoverDefaultTint;

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        apop.contentSize = CGSizeMake(300, 500);
    }
    else {
        apop.contentSize = CGSizeMake(200, 300);
    }

    apop.arrowDirection = FPPopoverArrowDirectionAny;

    //sender is the UIButton view
    // idk  [apop presentPopoverFromView:];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:09:07.670

您将选择器设置为“apopbuttonPressed：”<-结尾：说它需要一个参数

您的方法是“apopbuttonPressed”，没有任何参数。

所以试试

```
action:@selector(apopbuttonPressed) 
```

或将您的方法更改为

```
apopbuttonPressed:(id) sender 
```

编辑：这是一个工作代码片段：

这是我的代码，它工作正常：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    UIBarButtonItem * popbutt = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemAction target:self action:@selector(apopbuttonPressed:)];

    self.navigationItem.rightBarButtonItem = popbutt;
}

- (void) apopbuttonPressed:(id) sender
{
    NSLog(@"pressed");
} 
```

# plone - 创建内容类型后如何执行操作？

> ID：15098994
> 
> 赞同：6
> 
> 时间：2013-02-26T20:50:27.460
> 
> 标签：plone, dexterity

在创建敏捷内容类型后，我正在尝试执行一些任意代码。例如，内容类型可以代表一匹马。

```
import logging
logger = logging.getLogger("Plone")

class IHorse(form.Schema):

    def __init__(self, context):
        logger.info('Creating horse')
        super(self).init(self, context) 
```

在前台运行应用程序时，我想在控制台中打印记录器消息“Creating horse”。但是这匹马是被创造出来的，我没有收到它的消息。我猜内容类型对象是由创建的`__init__`，但也许我错了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T20:58:33.487

您已连接到内容类型`__init__`的*架构*。模式用作填充内容的字段的基础，但它不是内容类型类本身。

如果你想挂钩内容类型的创建，你可以注册[事件订阅者](http://plone.org/products/dexterity/documentation/manual/developer-manual/advanced/event-handlers)：

```
from zope.app.container.interfaces import IObjectAddedEvent

@grok.subscribe(IHorse, IObjectAddedEvent)
def logHorseCreated(horse, event):
    logger.info('Created a horse') 
```

如果您确实*必须*在方法中自定义内容项初始化，`__init__`则必须创建自己的[自定义内容类](http://plone.org/products/dexterity/documentation/manual/developer-manual/advanced/classes)。

```
from plone.dexterity.content import Item

class Horse(Item):
    def __init__(self, id=None):
        super(Horse, self).__init__(id) 
```

# macos - 如果父进程死亡，子进程不会自杀

> ID：15098995
> 
> 赞同：1
> 
> 时间：2013-02-26T20:50:29.083
> 
> 标签：macos, kqueue

我有一个子进程（在 MacOS 上运行），如果父进程退出、退出、终止、被杀死或崩溃，我想杀死它自己。遵循了[如何在父母退出后使子进程死亡的建议？](https://stackoverflow.com/questions/284325/how-to-make-child-process-die-after-parent-exits)如果父程序崩溃，我无法让它安静地自杀。在我手动杀死它之前，它将进入 100% CPU。

以下是代码的关键点：

```
int main(int argc, char *argv[])
{
  // Catch signals
  signal(SIGINT,  interruptHandler);
  signal(SIGABRT, interruptHandler);
  signal(SIGTERM, interruptHandler);
  signal(SIGPIPE, interruptHandler);

  // Create kqueue event filter
  int kqueue_fd = kqueue();
  struct kevent kev, recv_kev;
  EV_SET(&kev, parent_pid, EVFILT_PROC, EV_ADD|EV_ENABLE, NOTE_EXIT, 0, NULL);
  kevent(kqueue_fd, &kev, 1, NULL, 0, NULL);

  struct pollfd kqpoll;
  kqpoll.fd = kqueue_fd;
  kqpoll.events = POLLIN;

  // Start a run loop
  while(processEvents())
  {
    if(kill(parent_pid, 0) == -1)
      if(errno == ESRCH)
        break;

    if(poll(&kqpoll, 1, 0) == 1)
      if(kevent(kqueue_fd, NULL, 0, &recv_kev, 1, NULL))
        break;

    parent_pid = getppid();
    if(parent_pid == 1)
      break;

    sleep(a_short_time);

    // (simple code here causes subprocess to sleep longer if it hasn't
    // received any events recently)
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T11:21:27.173

在这里回答我自己的问题：

这个问题的原因不在于检测父进程是否已经死亡。在`processEvents()`我正在从父进程轮询管道以查看是否有任何通信。当父母死亡时，`poll()`返回值 1 并且读取循环认为有无限数据等待读取。

解决方法是检测管道是否断开。

# java - java.sql.SQLException：列索引无效

> ID：15098998
> 
> 赞同：0
> 
> 时间：2013-02-26T20:50:46.840
> 
> 标签：java, sql, oracle, oracle11g

我有一个 SQL 查询，我想用它来将组件计数到表中。

```
private DCDataObj dc;

    public class DCDataObj
    {

        private int datacenter;             //  Datacenters
        ..............

        public DCDataObj(int datacenter............)
        {
            this.datacenter = datacenter;
            ...............
        }

        public int getDatacenter()
        {
            return datacenter;
        }

        public void setDatacenter(int datacenter)
        {
            this.datacenter = datacenter;
        }

        ............
    }

ps = conn.prepareStatement("SELECT COUNT(1) AS CNT FROM COMPONENTSTATS CS, COMPONENTTYPE CT "
        + " WHERE CS.COMPONENTTYPEID = CT.COMPONENTTYPEID AND CT.COMPONENTTYPEID IN ( "
        + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, " //  10
        + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, " //  20
        + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, " //  30
        + " ?, ?, ?, ?, ?, ?, ?, ?, ?, ? ) " //  40
        + " GROUP BY CT.NAME ORDER BY CT.NAME");

ps.setInt(1, 1000);
...............

ResultSet result = ps.executeQuery();
            while (result.next())
            {

                dc = new DCDataObj(
                        result.getInt(1),
                        ............... 
```

这是完整的源代码： http: [//pastebin.com/YMvqBPpV](http://pastebin.com/YMvqBPpV)

我收到此错误消息：java.sql.SQLException: Invalid column index

这是设计问题还是问题出在 SQL 查询中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T20:55:04.487

我看到了你的完整源代码，你有一堆`result.getInt(INDEX)`. 由于您只在做`SELECT COUNT(1)`，因此只有一列，因此对于`INDEX`1 以外的任何值，`getInt()`都会失败。

将查询更改为要从中检索值的列名的逗号分隔列表`SELECT <LIST> ...`在哪里。`LIST`