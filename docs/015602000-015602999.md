# StackOverflow 问答 15602000-15602999

# php - 根据上一个 MySQL 搜索创建下一个/上一个链接

> ID：15602001
> 
> 赞同：0
> 
> 时间：2013-03-24T17:58:15.913
> 
> 标签：php, mysql

我有一个可以搜索并返回分页结果列表的会员数据库。

我想要做/拥有的是，如果有人从该搜索结果列表中单击成员个人资料，该个人资料还可以使用搜索结果中的下一个个人资料或上一个个人资料的链接。

此链接需要“动态”包含的所有内容是用户 ID。例如。

```
<p><a href = 'memberprofile.php?$userid'>Previous</a></p>
<p><a href = 'memberprofile.php?$userid'>Next</a></p> 
```

我的结果页面的伪代码大致是：

```
Run query to find number of results which match search criteria
Calculate Number of pages of results and generate page number links
while($row = mysql_fetch_array($result))
{
    //Pull out content from each matching row which match search criteria
} 
```

所以这给了我我的搜索结果。伟大的。

因此，为了做我想做的事，我需要从用户实际点击的行中获取前行和下一行的“用户 ID”。

例如，如果我的结果显示用户 ID 为 3、5、12、13、22、41，并且访问者点击查看用户 12（新页面），我如何抓取 5 和 13 用作下一个/上一个？

此外，假设我可以生成下一个/上一个链接，并且访问者单击它，我如何为该配置文件生成上一个/下一个按钮？

我想它的方式几乎是一个次要的“分页”脚本，但我无法理解它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:52:05.920

您可以这样做（也可以使用伪代码）

```
$prev_row= NULL;
$next_row=NULL;
while($row = mysql_fetch_array($result))
{
  - this element is the $next_row for previous element, if it is not null, of course
  - the last element is the $prev_row for this element (or default NULL if this one is first)

  - Pull out content from each matching row which match search criteria

  - store this element so that you can use it in next element as the previous one
} 
```

# jquery - 如何选择除 type=password 之外的所有输入和文本区域

> ID：15602008
> 
> 赞同：2
> 
> 时间：2013-03-24T17:59:05.940
> 
> 标签：jquery, jquery-selectors

直到现在我成功地使用了这个选择器：

```
$('input, textarea') 
```

但问题是这也选择了输入`type=password`

[我知道我可以选择这样的东西：](https://stackoverflow.com/a/12866974/463065)

```
$("input[type=text],input:not([type]),textarea") 
```

但是其他类型呢？

我想选择所有未将 type 属性设置为`password`.

我试图使用`:not`选择器但无法成功使用它。

```
$("input:not(:password)") 
```

似乎没有工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T18:00:37.667

像这样 ：

```
$("input[type!='password'], textarea") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T18:00:40.053

Try

```
$('input:not([type="password"]), textarea') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-24T18:00:46.910

jQuery does not have a `:password` selector.

Instead, you can use the [`attributeNotEqual` selector](http://api.jquery.com/attribute-not-equal-selector/):

```
$(':input[type!="password"]') 
```

Note this example also uses the [`:input` selector](http://api.jquery.com/input-selector/), which selects all input types, including `textarea` and `select` elements.

# javascript - 如何维护页面更改时保留的jquery更改？

> ID：15602013
> 
> 赞同：-2
> 
> 时间：2013-03-24T17:59:32.470
> 
> 标签：javascript, jquery

我正在使用下面的代码来滑动我的导航菜单

```
$(document).ready(function(){
 $("#flipnav").click(function(){
    $("nav").slideToggle("slow");
    }); 
}); 
```

但是在浏览到另一个页面或刷新导航时又回来了。但是如何保留此更改以使导航保持隐藏状态，直到用户单击以再次显示导航并且即使浏览到另一个页面也保持不变（隐藏）？

更远

```
if(sessionStorage["navigationMoved"]== "true"){

  $(document).ready(function(){
 $("#flipnav").ready(function(){
    $("nav").slideToggle("slow");
    }); 
}); 

 $(document).ready(function(){
$('#flipnav').toggle(function(){
  $('#content').animate({
   top:"0%"
 });
}, 

function(){
  $('#content').animate({
  top:"2%"
  });     
});
});

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:04:40.500

您可以直接在每个页面的 HTML 中对菜单中的更改进行硬编码，或者如果不可能，则使用 cookie 或本地存储，因为 HTML 是无状态的，并且不会记住您在新页面加载后所做的更改。

**编辑：**

杰兹

您必须存储菜单是否在每个 slideToggle 上可见，然后在页面加载时检查该值以相应地设置菜单

```
var isSet = localStorage.getItem('nav');
document.getElementsByTagName('nav')[0].style.display = isSet ? 'block' : 'none';

$(document).ready(function () {
    $("#flipnav").click(function () {
        $("nav").slideToggle("slow", function() {
            localStorage.setItem('nav', $("nav").is(':visible'));
        });
    });
}); 
```

我倾向于使用 localStorage，但 sessionStorage 是同一个 HTML5 Web 存储 API 的一部分，因此如果您正在寻找仅对会话的持久性，则可以使用它。

对于较旧的浏览器， [MDN](https://developer.mozilla.org/en-US/docs/DOM/Storage)有一个回退到 cookie 的 polyfill，因此您可以始终如一地使用 Web 存储语法，而不必担心不支持的浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:04:58.330

您必须在页面加载并重置操作时进行检查。您可以使用 sessionStorage 在页面重新加载或更改时保存信息。

所以

```
$(document).ready(function(){
 $("#flipnav").click(function(){
    $("nav").slideToggle("slow");
    }); 
    sessionStorage["navigationMoved"] = true;
}); 
```

然后，当你加载一个新页面时，你必须有这样的代码

```
if(sessionStorage["navigationMoved"]){
    $(document).ready(function(){
       $("#flipnav").click(function(){
       $("nav").slideToggle("slow");
     }); 
     }); 
} 
```

当您重新加载页面时，它会根据提供的 HTML/Javascript/CSS 完全重新呈现站点。因此，除非您明确保存并检查信息，否则它不会“记住”以前的状态

# ios - 使用自动布局在 Storyboard 中与分辨率无关的同等大小的元素

> ID：15602014
> 
> 赞同：1
> 
> 时间：2013-03-24T17:59:40.920
> 
> 标签：ios, autolayout

我有一个包含带有导航栏的视图的故事板，我的目标是在下面有另外 3 个元素（按钮、视图，我想这无关紧要），它们可以拉伸，使它们都具有相同的高度，并相互粘连，即没有间隙它们之间。

我尝试使用 AutoLayout 来实现这一点，方法是将顶部元素的约束设置为导航栏的垂直间距为 0，垂直间距为 0，下面的元素，底部元素的垂直间距为 0，超级视图底部和上面的元素。我还添加了所有元素具有相同高度的约束，一切都很好，直到我在 Storyboard 编辑器中从 iPhone4 切换到 iPhone5 视图时，InterfaceBuilder 删除了顶部元素的“坚持导航栏”约束并给出它固定大小（不等于其他两个）。

摆弄了一段时间，因此布局中的任何地方都不存在绝对高度，但是在 iPhone5 和 iPhone4 之间切换会破坏我所做的一切，方法是删除一些约束或将其他一些约束设置为固定值。

有人知道使用 AutoLayout 实现此目的的方法，还是我应该使用带有 flowlayout 的 UICollectionView？

或者换一种说法 - 在“故事板中的 UIViewControler + 导航栏”场景中，实现三个元素以相互粘连并在所有可能的当前和未来屏幕尺寸上保持相同高度的最佳方法是什么，使用InterfceBuilder？

（我对在代码中执行此操作的想法并不陌生，我知道如何去做，但如果可以使用 IB，我会这样做。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:14:38.793

您必须在那里至少有一个其他约束才能开始，因为您所描述的还不够——这三个视图中的一个有其高度设置（或固有高度），或者您对底部有一个约束屏幕的也是如此。后者会导致它在屏幕尺寸变化时爆炸。您确实需要有一个具有设定高度的项目，每个项目对上方和下方的项目都有垂直间距约束，并且它们的高度都相同。如果您没有其他应该起作用的约束（在垂直方向上）。

# java - DefaultTableModel - 删除行更新向量，添加不

> ID：15602019
> 
> 赞同：0
> 
> 时间：2013-03-24T18:00:12.530
> 
> 标签：java, vector, jtable, defaulttablemodel

事情就是这样。我的框架中有一个`JTable`显示一些可以编辑的数据。可以添加新行，可以删除旧行。

现在，如果我从一个填充了一些数据的表开始，它可以正常工作。我可以删除行，这也会从我的数据中删除行`Vector<Vector>`。但是，当我添加一行时，该行显示在我的表中，但更改并未反映在数据中。

```
Vector<Object> newQuestion = new Vector<Object>(3, 1);
newQuestion.add(question.getText());
newQuestion.add(answer.getText());
newQuestion.add(false);
model.addRow(newQuestion); // Update the model with new question 
```

`model`是一个`DefaultTableModel`。`model.fireTableDataChanged();`即使 DTM 自行触发，我也尝试过，但这也不起作用。

任何指针？

**编辑**：有趣的是，如果我从表中的一些数据开始，然后添加一行，则更改也会反映在数据中。

**编辑 2**：[https](https://github.com/thekarangoel/YALT/blob/master/src/editDB.java) ://github.com/thekarangoel/YALT/blob/master/src/editDB.java从第 65 行开始添加一行！要尝试、编译、运行，文件 > 添加新数据库。给个名字。添加新行。

**编辑 3**：对于此代码： System.out.println("Data:" + data); 矢量> 模型数据 = 模型.getDataVector(); System.out.println("数据：" + modelData);

我明白了：

```
Data: null
Data: [[w, a, false]] 
```

第一个 if 数据来自我的 Vector。第二个是`model的Vector中的数据。为什么会这样？当我向现有表添加内容时，文件行也会显示更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:41:04.527

看看你是如何创建数据的：

```
public Vector<Vector<Object>> convertMapToVector(Map<String, String> quesToAnsMap) {
    if (quesToAnsMap.size() > 0) {
        // the data field is initialized here
        data = new Vector<Vector<Object>>(quesToAnsMap.size(), 1); 
        ...
        return data;
    }
    // but not here
    return new Vector<Vector<Object>>();
} 
```

我的建议使代码更健壮：

*   不要使用`data`字段。它没有用，因为数据已经包含在模型中。因此，要获取数据，您只需要从模型中获取数据。
*   要么让你的所有方法都接受参数并返回值，要么不接受任何东西，返回 void 并初始化字段，但将两者混合会令人困惑。上面的方法初始化一个字段*并*返回它，但是else子句只返回它而不初始化它。

# javascript - Charts showing on the same line in non-IE browsers, but on the next line on IE browsers

> ID：15602028
> 
> 赞同：0
> 
> 时间：2013-03-24T18:00:58.097
> 
> 标签：javascript, css, svg, d3.js

Here is the exact code you can try for yourself:

[http://bl.ocks.org/AndrewStaroscik/5232739](http://bl.ocks.org/AndrewStaroscik/5232739)

When I render this in IE, each chart shows in a different line. When I render it in any other browser except for IE, charts show on the same line like in-line elements.

What is going on? What is the reason for this? Is there any fix ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:11:59.437

您的图表在我尝试过的所有浏览器（最新的 Chrome 26、最新的 Firefox 19 和 IE 9）中呈现在两行上。

它们包含在`<iframe>`宽度为 960px 的中。每个`<svg>`图表的宽度是 500px，所以如果没有某种浮动定位，它们当然不能并排显示。调整图表大小或使用 CSS 使它们重叠（或者，如果这不是目标，则使用 CSS 强制它们堆叠）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:10:32.933

对我来说都是以内联方式加载的原因？因为 SVG 具有由浏览器的 USER AGENT 关联的内联属性。我不确定您使用的是哪个 IE 浏览器，但我使用的是 IE 10.0、chrome 和 firefox 也是最新的。一切都显示它 INLINE 。

ps: SVG 在 IE 小于 8 时不能正常工作

修复：尝试使用 CSS 减小 svg 的高度和宽度。由于某种原因，它可能会被推到下一行。

# php - Posting Variables to webserver in android

> ID：15602035
> 
> 赞同：0
> 
> 时间：2013-03-24T18:01:19.880
> 
> 标签：php, android

i want to post a variable to this file on webserver. i am using free hosting company. [http://locationmeter.comule.com/reg.php](http://locationmeter.comule.com/reg.php) it is doing good on emulator but it is not working on device. here is the code

```
public class MainActivity extends Activity {

    Button bSubmit;
    EditText name, age;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        init();
    }

    private void init() {
        // TODO Auto-generated method stub
        name = (EditText) findViewById(R.id.editText1);
        bSubmit = (Button) findViewById(R.id.button1);
        bSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                ArrayList<NameValuePair> params = new ArrayList<NameValuePair>();
                NameValuePair param = new BasicNameValuePair("name", name
                        .getText().toString());
                params.add(param);
                try {
                    HttpPost httpPost = new HttpPost(
                            "http://locationmeter.comule.com/reg.php");
                    httpPost.setEntity(new UrlEncodedFormEntity(params));

                    HttpClient client = new DefaultHttpClient();
                    HttpResponse response = client.execute(httpPost);
                    InputStream is = response.getEntity().getContent();
                    BufferedReader br = new BufferedReader(
                            new InputStreamReader(is));
                    String line = br.readLine();
                    do {
                        Toast.makeText(getBaseContext(), line, 300).show();
                        Log.d("", "usmann" + line);
                        line = br.readLine();
                    } while (line != null);

                } catch (Exception e) {
                    e.printStackTrace();
                }

            }
        });
    }

} 
```

Manifest:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.postingvar"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="5"
        android:targetSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.postingvar.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

reg.php

```
 <?php
            if (isset($_POST['name'])) {
                $res = "success";
                echo json

_encode($res);

        }else{
            $res = "failed";
            echo json_encode($res);
        }
    ?> 
```

from device i am getting a long html error page. please help

```
usmann<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
03-24 10:40:19.185: D/(413): usmann<html><head>
03-24 10:40:19.194: D/(413): usmann<meta http-equiv="Content-Type" CONTENT="text/html; charset=utf-8">
03-24 10:40:19.215: D/(413): usmann<title>ERROR: The requested URL could not be retrieved</title>
03-24 10:40:19.225: D/(413): usmann<style type="text/css"><!-- 
03-24 10:40:19.234: D/(413): usmann /*
03-24 10:40:19.246: D/(413): usmann Stylesheet for Squid Error pages
03-24 10:40:19.265: D/(413): usmann Adapted from design by Free CSS Templates
03-24 10:40:19.285: D/(413): usmann http://www.freecsstemplates.org
03-24 10:40:19.305: D/(413): usmann Released for free under a Creative Commons Attribution 2.5 License
03-24 10:40:19.315: D/(413): usmann*/
03-24 10:40:19.324: D/(413): usmann
03-24 10:40:19.335: D/(413): usmann/* Page basics */
03-24 10:40:19.355: D/(413): usmann* {
03-24 10:40:19.364: D/(413): usmann font-family: verdana, sans-serif;
03-24 10:40:19.375: D/(413): usmann}
03-24 10:40:19.395: D/(413): usmann
03-24 10:40:19.404: D/(413): usmannhtml body {
03-24 10:40:19.425: D/(413): usmann margin: 0;
03-24 10:40:19.435: D/(413): usmann padding: 0;
03-24 10:40:19.455: D/(413): usmann background: #efefef;
03-24 10:40:19.475: D/(413): usmann font-size: 12px;
03-24 10:40:19.495: D/(413): usmann color: #1e1e1e;
03-24 10:40:19.505: D/(413): usmann}
03-24 10:40:19.524: D/(413): usmann
03-24 10:40:19.555: D/(413): usmann/* Page displayed title area */
03-24 10:40:19.565: D/(413): usmann#titles {
03-24 10:40:19.595: D/(413): usmann margin-left: 15px;
03-24 10:40:19.614: D/(413): usmann padding: 10px;
03-24 10:40:19.636: D/(413): usmann padding-left: 100px;
03-24 10:40:19.654: D/(413): usmann background: url('http://www.squid-cache.org/Artwork/SN.png') no-repeat left;
03-24 10:40:19.665: D/(413): usmann}
03-24 10:40:19.686: D/(413): usmann
03-24 10:40:19.694: D/(413): usmann/* initial title */
03-24 10:40:19.716: D/(413): usmann#titles h1 {
03-24 10:40:19.725: D/(413): usmann color: #000000; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:06:26.760

我猜你的问题是关于“线程”。我想如果你在一个你的 Httppost 中`AsyncTask`你的问题将得到解决。如果我没有犯错，在 Android3 和更高版本中，你必须这样做。

# c# - Open another view with caliburn micro

> ID：15602036
> 
> 赞同：0
> 
> 时间：2013-03-24T18:01:24.147
> 
> 标签：c#, wpf, view, caliburn.micro

I use Caliburn.Micro and I have 2 View and relative 2 ViewModel:

*   MainView (MainViewModel)
*   BView (BViewModel)

In BView i have a DataGrid and in BView a method to fill DataGrid. In MainView there is a Botton, I want you to click the button to open the window BView and call the methot to fill the DataGrid (the method name is:AllArticles).

So when I click the button (in MainWiew) will open BView with DataGrid filled.

The MainViewModel code is:

```
[Export(typeof(IShell))]
public class MainViewModel : Screen
{
    public string Path{ get; set; }

    public void Open()
    {
        OpenFileDialog fd = new OpenFileDialog();
        fd.Filter = "Text|*.txt|All|*.*";
        fd.FilterIndex = 1;

        fd.ShowDialog();

        Path= fd.FileName;
        NotifyOfPropertyChange("Path");
    }

} 
```

The BViewModel code is:

```
public class BViewModel : Screen
{
    public List<Article> List { get; private set; }

    public void AllArticles()
    {
        Recover recover = new Recover();
        List = recover.Impor().Articles;
        NotifyOfPropertyChange("List");
    }    
} 
```

What should I do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T03:07:20.173

考虑使用 Caliburn 的 WindowManager。主视图模型中的代码可能如下所示：

```
 [Export(typeof(IShell))]
    public class MainViewModel : Screen
    {
        public string Path{ get; set; }

        [Import]
        IWindowManager WindowManager {get; set;}

        public void Open()
        {
            OpenFileDialog fd = new OpenFileDialog();
            fd.Filter = "Text|*.txt|All|*.*";
            fd.FilterIndex = 1;

            fd.ShowDialog();

            Path= fd.FileName;
            NotifyOfPropertyChange("Path");

            WindowManager.ShowWindow(new BViewModel(), null, null);
        }    
    } 
```

另外，我注意到您的 MainViewModel 类上有 Export(IShell) 属性 - 这看起来不正确，因为 Screen 不是 IShell。

# git - git rebase upstream/master vs git pull --rebase upstream master

> ID：15602037
> 
> 赞同：57
> 
> 时间：2013-03-24T18:01:28.747
> 
> 标签：git, git-rebase, git-pull

Is there a difference between `git rebase upstream/master` and `git pull --rebase upstream master`, and if so, what? The remote could be any remote, not necessarily upstream.

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-24T18:04:15.577

将首先[获取（](http://git-scm.com/docs/git-fetch)[）](http://git-scm.com/docs/git-fetch)`git pull --rebase`，更新提交。[`git fetch`](http://git-scm.com/docs/git-fetch)`upstream/master`

如果您只是在*没有*先更新的情况下进行变基`upstream/master`，您将不会得到相同的结果。

我在“[`master`分支和' `origin/master`'已经发散，如何'发散'分支'？](https://stackoverflow.com/a/2452610/6309) ”中说明它

* * *

[SnakE](https://stackoverflow.com/users/213376/)[在评论](https://stackoverflow.com/questions/15602037/git-rebase-upstream-master-vs-git-pull-rebase-upstream-master/15602072?noredirect=1#comment46443846_15602072)中提到的`git pull --rebase`并不*完全是* `git fetch && git rebase origin/master`.
见“[什么” `git pull --rebase`“做什么？](http://gitolite.com/git-pull--rebase.html) ”

```
(origin/master)
   |
A--B--C (master)
 \ 
  B'--D (actual origin/master after changing B and force pushing) 
```

`git pull --rebase`在这种情况下，什么是：

```
git fetch origin
git rebase --onto origin/master B master 
```

这里：

*   origin/master 是新更新的`origin/master`( `B'`)
*   `B`是旧的`origin/master`（在 fetch 更新之前）
*   `master`是要在其上重放的分支`origin/master`

这与`git fetch`+的不同之处在于`git rebase origin/master`，该`pull --rebase`命令试图找出哪些提交*确实是*您的本地提交，以及哪些提交是在较早的提取中来自上游的。

> 为此，它会查看远程跟踪分支的 reflog（`origin/master`在本例中为 ）。此 reflog以“最近的第一”顺序表示对 的连续`git fetch`操作的提示。`origin`
> 
> 对于每个 reflog 条目，( `origin/master@{1}`、 then`...{2}`等) 它检查该提交是否是当前分支 head 的祖先`master`。一旦找到它，它就会选择它作为 rebase 的起点（`B`在上面的示例中）。

# python - SyntaxError: Non-UTF-8 code starting with '\x82'

> ID：15602038
> 
> 赞同：7
> 
> 时间：2013-03-24T18:01:38.660
> 
> 标签：python, eclipse

I get this error in Eclipse while working on "Byte of Python"

It says the error shows up in 2 lines:

```
source = ["C:\\My Documents", "C:\\Code"] 
```

and

```
zip_command = "zip -qr {0} {1}".format(target, ‚ ‚.join(source)) 
```

I cant really figure out what im doing wrong here.

Here's the full error:

> SyntaxError: Non-UTF-8 code starting with '\x82' on line x, but no encoding declared; see [http://python.org/dev/peps/pep-0263/](http://python.org/dev/peps/pep-0263/) for details

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:17:52.443

您正在使用`windows-1252`无法解码的字符（弯引号），因为它无效`utf-8`。替换引号，您就可以开始了。

# javascript - Javascript "this" pointer in Method Invocation Pattern not pointing to object

> ID：15602039
> 
> 赞同：3
> 
> 时间：2013-03-24T18:01:45.160
> 
> 标签：javascript, object, this, method-invocation

I am attempting to use the method invocation pattern in Javascript. I declare a function as an object member.

According to **Javascript: The Good Parts**, this should result in the `this` pointer referencing the enclosing object. When I've tried this before, this has been the case.

In the sample of code below, the `this` pointer reference by the single `console.log` statement is pointing to the *function*, not the object. I've double-checked my code and I honestly don't know what's going on.

I could use another pair of eyes on this. Is there something really obvious that I'm missing here, or am I expecting the wrong behavior? Thank you.

EDIT: I had a mistake in my code that I posted (it's been in flux); the keyword inside the anonymous function should be `that`, not `this`. Fixed.

DOUBLE EDIT: I've added the rest of my code within the module. I'm trying to write a commonJS module (in accordance with the gameJS library that I'm using) and although I'm not sure where that would be the problem, I'm wondering if it is. Does this change anything?

```
var gamejs = require('gamejs');
var system = require('app/system');

var input = {
    eval_keys: function () {
        console.log(this); // This should be the outer object, but shows the function!
        var that = this;
        gamejs.event.get().forEach(function (event) {
            if (event.type === gamejs.event.KEY_DOWN) {
                for (var key in that.keyconfig) {
                    if (that.keyconfig.hasOwnProperty(key)) {
                        if (event.key === gamejs.event[key]) {
                            that.keyconfig.key = true;
                        }
                    }
                }

                system.log("KEYDOWN", event.key);
            }

            if (event.type === gamejs.event.KEY_UP) {
                for (var key in that.keyconfig) {
                    if (that.keyconfig.hasOwnProperty(key)) {
                        if (event.key === gamejs.event[key]) {
                            that.keyconfig.key = false;
                        }
                    }
                }

                system.log("KEYUP", event.key);
            }

            return keyconfig;
        });
    },
    eval_mouse: function () {
/* in progress
        else if (event.type === gamejs.event.MOUSE_MOTION) {
            // if mouse is over display surface
            if (display.rect.collidePoint(event.pos)) {
                system.log("mousemove", testcoords);
                testcoords = event.pos;
            }
        }
*/
    },
    keyconfig: {
        K_UP: false,
        K_LEFT: false,
        K_RIGHT: false,
        K_DOWN: false
    }
};

exports.eval_keys = input.eval_keys; 
```

Output from Chrome's dev console:

```
Object {eval_keys: function}
eval_keys: function () {
arguments: null
caller: null
length: 0
name: ""
prototype: Object
__proto__: function Empty() {}
<function scope>
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:12:42.750

通过在声明对象后调用，它看起来[对](http://jsfiddle.net/guypursey/hfecB/)我有用。`input.eval_keys()`

您在控制台中显示的输出在我看来也是您想要的输出——即`Object {eval_keys: function}`包含该方法的外部对象。

问题似乎更多的是您应该看到您在其中声明的其他方法，如下所示：

```
Object {eval_keys: function, eval_mouse: function, keyconfig: Object}
eval_keys: function () {
eval_mouse: function () {
keyconfig: Object
__proto__: Object 
```

所以，据我所知，你的问题应该是“为什么这些其他方法没有出现在我的控制台对象中？” 但是我不知道您对可能解释该问题的代码所做的其他事情，也不知道您如何以及何时调用相关方法。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:08:13.597

如果您没有在该[`forEach`循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)中使用匿名函数，它将起作用，[`this`关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)在其中具有不同的值。您可以将它传递给第二个参数：

```
gamejs.event.get().forEach(function (event) {
    // this now refers to the outer this
}, this); 
```

或者，您也可以使用`that`引用外部`this`值的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:23:36.987

好吧，我弄清楚了是什么导致`this`指针只显示一个具有一个函数的对象 - 就是这一行：

```
exports.eval_keys = input.eval_keys; 
```

一时兴起，我决定添加`exports.keyconfig = input.keyconfig`它，它作为对象的一部分出现在控制台中。

看起来`exports`关键字在`this`引用它时对指针做了一些事情，即使`this`指针在相关模块内也是如此。我不完全确定它是如何工作的，但确实如此。

我遇到了更多问题，但目前，眼前的问题已经解决。我将不得不对此进行更多阅读。

# sql - Joining SQL tables and updating values

> ID：15602040
> 
> 赞同：1
> 
> 时间：2013-03-24T18:01:47.543
> 
> 标签：sql, oracle

I'm still trying to join tables and it is not running correctly when I try to run it. Also, the bottom block of input it messed up. I want output to display representing values 1-10\. Any help will be appreciated.

```
SELECT customer_id, cust_first_name
FROM demo_customers
WHERE cust_state= 'VA'
INNER JOIN demo_orders
ON demo_customers.customer_id.cust_first_name=demo_orders.order_id

SELECT order_id
FROM demo_orders
WHERE customer_id= '1'

SELECT order_item_id
FROM demo_order_items
WHERE order_id= '2'

SELECT product_name
FROM demo_product_info
WHERE product_id= <10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:03:58.573

```
demo_customers.customer_id.cust_first_name = demo_orders.order_id 
```

应该读

```
demo_customers.customer_id = demo_orders.order_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:34:53.563

目前尚不完全清楚您在这里追求什么，但这样的事情将提供 4 个表的连接。

```
SELECT 
   *
FROM 
   demo_customers
INNER JOIN demo_orders
   ON demo_customers.customer_id=demo_orders.customer_id
INNER JOIN demo_order_items
   ON demo_order.order_id = demo_order_items.order_id
INNER JOIN demo_product_info
   ON demo_product_info.product_id = demo_order_item.product_id
WHERE 
  cust_state= 'VA' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T18:34:55.960

尝试这个

```
 SELECT demo_customers.customer_id, demo_customers.cust_first_name
    FROM demo_customers c
      INNER JOIN demo_orders o
    ON demo_customers.customer_id = demo_orders.order_id
       WHERE c.cust_state= 'VA'; 
```

# java - 将数据输出到 android 上的文件，不确定它的去向或是否去任何地方

> ID：15602042
> 
> 赞同：3
> 
> 时间：2013-03-24T18:02:03.963
> 
> 标签：java, android, file-io, stream, storage

我正在尝试从我正在编写的 Android 应用程序中一次输出一个数值，但我很难弄清楚发生了什么。试图寻找答案，但只会更加困惑。这让我觉得应该是相对简单的东西，所以我为它如此困惑而感到非常愚蠢。

```
String directory = Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

当我登录目录时，我得到一个路径“/storage/emulated/0”那在哪里？如果我不调试，这与我得到的不同吗？

然后我有：

```
String fileName = directory + "/Android/data/com.sample.app/files/test.txt"
File myFile = new File(fileName);
FileOutputStream fos;
try { 
    fos = new FileOutputStream(myFile);
    String text = "Test text\n";
    fos.write(text.getBytes());
fos.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e){
    e.printStackTrace();
} 
```

我尝试使用 Windows 资源管理器找出保存和/或应该保存的内容，但我没有看到它。这是基于此链接中信息的代码：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)，但我真的不明白“/storage/emulated/0”在哪里来自以及我如何访问该位置或摆脱它。

编辑：现在我只想保存所有的数字，这样我就可以检查会出现什么。这些数字是从音频输入中记录的。

编辑：使用我手机上的 ASTRO File 应用程序显示文件不需要“/Android/data/com.sample.app/files/”部分，不知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:18:44.423

**路径不对？**

`/storage/emulated/0`是文件系统中的路径，代表外部存储。在早期版本的 Android 中，我们经常拥有`/mnt/sdcard/`或类似的东西，但今天的许多设备没有 SD 卡，但无论如何都模拟外部存储。

要查看 Android 文件系统中的文件，我建议使用[Astro File Manager](https://play.google.com/store/apps/details?id=com.metago.astro)之类的应用程序。看看您的文件是否已写入。

一个可能的错误可能是，您在自己的路径和本地路径`File.separator`之间缺少一条。`directory`

```
String fileName = directory + File.seperator + "Android/data/com.sample.app/file/test.txt" 
```

**创建目录？**

您还应该通过调用确保该目录存在`myDir.mkDirs();`，其中`myDir`是没有文件名的完整路径。

要创建目录，您可以使用以下代码

```
directory = directory + "/Android/data/com.sample.app/file/test.txt" 
new File(directory).mkDirs(); 
```

**清单中的使用权限？**

最后一个错误来源可能是，您可能会错过外部存储权限，您需要一个

您还需要确保您需要写入外部存储的权限。`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`在您的 Android 清单文件中查找。

# c - 从c中的文件接受浮点值

> ID：15602045
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:02:15.963
> 
> 标签：c, file

我正在设计一个收银机，其中程序的目的是计算必须退还给客户的零钱。

程序的输入以命令行参数的文件形式给出。输入文件包含几行。每行是一个测试用例。每行包含两个用分号分隔的数字。第一个是购买价格（PP），第二个是客户给的现金（CH）。

例如。

15.94;16.00

17;16

我逐个字符地从输入文件中读取值，然后在接受字符串形式的输入后使用 atof 函数进行转换。有没有更好更有效的方法来接受输入？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:05:11.663

你可以[`fscanf()`](http://pubs.opengroup.org/onlinepubs/007908775/xsh/fscanf.html)改用。

# android - 使用 Jannson JSON Reader 读取 Facebook 响应

> ID：15602048
> 
> 赞同：0
> 
> 时间：2013-03-24T18:02:31.023
> 
> 标签：android, json, facebook, cocos2d-x, cocos2d-android

长话短说，我有一个 android 应用程序，我使用 cocos2dx 来开发它。我正在研究的一个组件是将我的 facebook 朋友带入我的游戏。我这样做的方式是在本机端（java）我设置了我的 facebook sdk。我成功登录并毫无问题地拉下我的朋友列表。我的问题是我需要将此数据转发到 c++ 端，以便我可以访问数据并将其带入标签等。

在这里，我猜想一些事情是如何发生的结构：Java native - 开始活动，登录到 facebook，结交朋友 -> STRING DATA JNI TO C++ -> CPP 使用 Jannson 解析 JSON 数据。

我的问题是，如果我有这样的示例数据：

```
[
    {
        "pic_square": "https://www.facebook.com/blah",
        "uid": 4654546445,
        "name": "somename"
    }
] 
```

我可以解析没有问题，但实际上 facebook 的响应是这样的：

```
{
    Response: responseCode: 200,
    graphObject: GraphObject{
        graphObjectClass=GraphObject,
        state={
            "data": [
                {
                    "pic_square": "https://www.facebook.com/blah",
                    "uid": 4654546445,
                    "name": "somename"
                }
            ]
        }
    }
} 
```

并且 Jansson 无法说明它不是数组（确切的错误是“错误：根不是数组”）。不知道如何处理。我应该以某种方式解析“数据”之后的内容：然后找出正确停止的位置还是有更好的方法。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:18:02.283

您需要做的是修改解析逻辑，以首先处理包装`data`您感兴趣的数组的 Json 对象。虽然这需要一些额外的编程，但它绝对胜过任何字符串操作尝试。除非您 100% 确定“[”和“]”将始终是响应的一部分，否则我不会对您收到的内容做出任何假设。

我对 Jannson 不熟悉，但在处理`data`数组之前，您需要做一些其他的事情。仅从查看教程来看，它可能看起来应该是这样的：

```
// make request
text = request(url);
// decode json
root = json_loads(text, 0, &error);

// parse "Response"
json_t *response = json_object_get(root, "Response");
json_t *responseCode = json_object_get(response, "responseCode");
int responseCodeValue = json_integer_value(responseCode);

// parse "graphObject"
json_t *graphObject = json_object_get(root, "graphObject");
json_t *graphObjectClass = json_object_get(graphObject, "graphObjectClass");
json_t *state = json_object_get(graphObject, "state");
json_t *data = json_object_get(state, "data");

// iterate over the "data" array, parse the key/values etc.
for(i = 0; i < json_array_size(data); i++) {
    json_t *data = json_array_get(root, i);
} 
```

为了这个例子，我省略了所有类型检查（你会想自己添加）以及任何内存/变量的清理。另外，请注意任何拼写错误和/或明显的错误，因为我只是直接在浏览器中输入了这个，并没有进行任何编译或运行时检查。我相信你可以自己过滤掉这些。

我很好奇的一件事是你为什么选择詹森？我猜是因为它同时支持Android和iOS？如果您专门针对 Android，还有很多其他选择。例如，[Android 框架中内置了](http://developer.android.com/reference/org/json/package-summary.html)基本的 Json 支持，但也有第三方库可以将 Json 映射到 Java 对象，如[GSON](https://code.google.com/p/google-gson/)和[Jackson](http://jackson.codehaus.org/)。

# php - 将基于 Symfony 2.0 的项目更新到 Symfony 2.2

> ID：15602057
> 
> 赞同：4
> 
> 时间：2013-03-24T18:03:09.100
> 
> 标签：php, symfony

我正在尝试将我用 Symfony 2.0 编写的项目更新为 Symfony 2.2。

将源代码移入 2.2 项目以不兼容`config.yml`而告终。`security.yml`

有没有办法将 Symfony 2.0 项目正确迁移到 Symfony 2.2？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T18:17:06.253

最好等到 Symfony 2.3 再迁移。它将[在五月的某个地方](http://symfony.com/doc/current/contributing/community/releases.html#schedule)发布。这是[第一个 LTS](http://symfony.com/doc/current/contributing/community/releases.html#long-term-support-releases)（长期支持）版本，这意味着它已经维护了*三年*。所以：你不必担心 BC 休息 3 年！

对于 Symfony 2.0 到 2.3 的迁移：您无能为力。阅读`UPGRADE-*.md`文件（存储在`symfony/symfony`包的根目录中）并修复代码中的任何内容。对普通用户很重要的每个 BC 中断都将放在这些 UPGRADE 文件中。

如果在修复 UPGRADE 文件中的所有内容后仍无法解决，则应查看`CHANGELOG.md`软件包根目录中的文件（例如`symfony/security`软件包）。试着找出一些被改变并导致你的代码中断的东西。

最后，如果你的脚本不能正常工作，有很多活跃的 Symfony2 用户正在等待帮助你。查看[社区页面](http://symfony.com/community)并找到您提出问题的地方。

# android - Android在原始html中获取spannable的位置

> ID：15602058
> 
> 赞同：0
> 
> 时间：2013-03-24T18:03:10.823
> 
> 标签：android, html, spannable

如果我知道某个字符在 spannable 中的位置，我如何获得 html 中的相应位置？例如，如果我有字符串：

```
<b>example</b> 
```

我知道字母'p'在spannable中的第4位，我怎么知道它在html中的第7位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T05:44:16.583

您可以从标签中提取文本，然后找到字符的位置。

```
 String mystring= "<b>examplep</b>";
    for( int i=0; i<mystring.length(); i++ )
    {
      if( mystring.charAt(i) == 'p' ) 
       {
        System.out.println("index is"+i);//will print 7 and 10 
       }
    } 
```

用jsoup解析

```
 Document doc = Jsoup.parse(mystring);// can parse html tags uisng jsoup
    Elements elements = doc.select("b");
    String s= elements.text();
    System.out.println("String is"+s);
    for( int i=0; i<s.length(); i++ ) 
    {
    if( s.charAt(i) == 'p' ) 
     {
     System.out.println("index is"+i);
     }
    } 
```

# git - 如果还没有本地的话，用克隆拉取 Git 快捷方式？

> ID：15602059
> 
> 赞同：56
> 
> 时间：2013-03-24T18:03:19.817
> 
> 标签：git, jenkins

是否有一种单一命令的方式来获取远程仓库的最新镜像？那是

*   如果本地仓库还没有：克隆
*   如果它在那里：拉

我知道我可以围绕 (eg `if [ -d repo ]; then (cd repo && git pull); else git clone $repourl;fi` ) 编写脚本，但我需要最简单的跨平台方式（实际上用于 Jenkins-CI，我知道默认情况下会这样做，但是我需要 2 个支持有限的存储库）。

Git 对其他事情有类似的快捷方式（例如 checkout -b 和 pull 本身），所以我想知道我是否遗漏了什么。谢谢！

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-03-24T18:09:15.987

没有，因为在现有存储库上运行的命令都假定它们正在给定的存储库中运行。

也就是说，如果你在 shell 中运行，你可以简单地使用 shell 内置函数。例如，这里是 bash：

```
if cd repo; then git pull; else git clone https://server/repo repo; fi 
```

这会检查是否`repo`是一个有效的目录，如果是，则`pull`在其中执行一个；否则它会`clone`创建目录。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-07-02T13:53:16.123

最干净的单线可能是

```
git -C repo pull || git clone https://server/repo repo 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-17T19:47:17.473

如果升级 git 不是一个选项，并且您不想为 repo 传递参数，则脚本方法可能是：

```
#!/bin/bash

function clone_pull {
  DIRECTORY=$(basename "$1" .git)
  if [ -d "$DIRECTORY" ]; then
    cd "$DIRECTORY"
    git pull
    cd ../
  else
    git clone "$1"
  fi
}

clone_pull https://github.com/<namespace>/<repo>
# or
clone_pull git@github.com:<namespace>/<repo>.git 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-08T14:03:51.970

`git -C repo pull`仅适用于[git 1.8.5](https://github.com/git/git/blob/5fd09df3937f54c5cfda4f1087f5d99433cce527/Documentation/RelNotes/1.8.5.txt#L115-L116)或更高版本。**要在早期版本**上实现这一点，请尝试：

```
remote_repo=https://server/repo
local_repo=repo

if [ -d $local_repo/.git ]; then pushd $local_repo; git pull; popd; else git clone $remote_repo; fi 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-24T18:09:10.907

[`git pull`](http://git-scm.com/docs/git-pull)知道从哪里克隆，因为本地 repo 在其本地配置中注册了一个远程。它从工作树运行。

但[`git clone`](http://git-scm.com/docs/git-clone)不是，它必须有一个显式的远程 url 传入参数才能克隆。它在工作树之外运行。

*这种快捷方式不*存在的主要原因是：

*   您`git init`很少为给定的 repo：它是 repo 生命周期中的一次性命令。
    另外，它可能需要*额外*的命令才能完成：例如，如果您有子模块，则需要添加一个`git submodule update --init`.
*   你`git pull`经常在给定的回购中。git pull 本身就是一个快捷方式（对于`git fetch`+ `git merge`）。Even`git pull --rebase`是`git fetch`+的另一个快捷方式`git rebase`。

考虑到您要使用的次数`git init`，这样的快捷方式并不是一个高优先级。

因此，脚本仍然是定义所需内容的最可靠方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-26T20:01:42.617

由于您提到了 Jenkins，因此可以使用[Jenkins SCM API](https://jenkins.io/doc/pipeline/steps/workflow-scm-step/)进行克隆或拉取。该`checkout`方法完全符合您的要求。

您可以像这样从 groovy 脚本运行它：

```
dir (targetFolder) {
  checkout(scm: [$class: 'GitSCM', branches: [[name: 'master']], ...])
} 
```

请注意，它不会在 git 意义上检查指定的分支，而是在相应的提交时将工作空间留在一个分离的头上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-15T22:12:31.473

这是另一个 1-liner。与此处的其他解决方案相比，此代码不会在终端中输出错误：

```
(test -d my-repo && git -C my-repo pull --rebase) || \
  git clone https://github.com/my-repo my-repo 
```

这是一个变体，其中 repo 和源 URL 是变量，因此您不需要重复 repo-folder 三次：

```
DIR=my-repo && ORIGIN=https://github.com/my-repo/ && \
  (test -d $DIR && git -C $DIR pull --rebase) || git clone $ORIGIN $DIR 
```

# php - JSON 到自定义 PHP 对象实例

> ID：15602060
> 
> 赞同：0
> 
> 时间：2013-03-24T18:03:26.947
> 
> 标签：php, json, object, casting

假设我们有一个 PHP 类发票和项目：

```
class Item{
    public $CID;
    public $CATID;             // category id...
    public $net;
    public $t1;
    public $t2;
    public $total;
}

class invoice{
    public $items = array();        //array of object item;
    public $date;
    public $title;
    public $description;
    public $subtotal;
    public $t1;
    public $t2;
    public $total;

    public function __construct(){
    }
} 
```

对象发票包含几种方法，例如：添加项目、删除项目、重新计算、设置税金和其他东西......这有点复杂。我想出了如何使用以下方法将此对象的实例解析为 javascript：

```
$json=json_encode((array)$invoice); 
```

然后在javascript中，我有完全相同的对象定义，相同的方法，然后我使用：

```
test = jQuery.parseJSON('<?php= $json?>');
test.__proto__ = invoice.prototype; 
```

到目前为止一切顺利，我的测试变量现在已成为 javascript 中的发票对象，我可以使用发票和项目 javascript 类中定义的方法。经过一些操作后，我可以使用以下命令将对象重新发送到 php（让我们说 ajax）：

```
function send_ajax(){
    $.ajax({
        url: "ajax.php",
        type: "POST",
        data: ({
             invoice:JSON.stringify(test)
        }),
        success: function(msg){
            $('#response').html(msg);
        }
    });
} 
```

然后，服务器端我使用 json_decode 将 json 转换为数组。这就是我卡住的地方！我无法将我的 $invoice[] 或 stdObjcect 转换为我的发票类。我还在 ASP .net C# 中编写代码，这样的事情真的很容易实现。我需要实现这样的事情的原因很简单：我需要使用从我的 php 发票类到解析的 JSON 的方法......有人有想法吗？

我之前唯一想到的就是手动解析json对象......还有其他“内置”方法吗

```
 public function __construct($json = null){
        if ($json != null){
           $json=json_decode($json, true);

           for($i=0;$i<count($json[items]);$i++){
               $newItem= new Item();
                foreach ($json[items][$i] as $key=>$value){
                    $newItem->$key=$value;
                }
               array_push($this->items,$newItem);
           }
            foreach($json as $key =>$value){
                if(!is_array($value)){
                $this->$key=$value;
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:13:52.907

我不知道 ASP 做了什么，但尝试在不同语言之间创建某种序列化并不是最好的解决方案。

您应该定义一个 JavaScript 和 PHP 可以相互通信的协议。JS 和 PHP 端将特定值加载到它们自己的对象结构中。

PHP 类可能有一个方法，该方法知道特定的数组结构以及将哪些字段放入哪些实例变量中。

```
public function loadJSON(array $data) {
    $this->title = $data['Title'];
    ...
} 
```

# ios - 在 iOS 中展示客户广告

> ID：15602062
> 
> 赞同：1
> 
> 时间：2013-03-24T18:03:32.233
> 
> 标签：ios, cocoa-touch, popup, app-store

我们希望在我们的 iOS 应用中展示我们自己的客户广告。你认为苹果会容忍它吗？

就像我们要为加拿大移动运营商做广告一样？我最近有一个应用被拒绝 - 浪费了很多时间和金钱，所以我不想再次一无所获。我检查了文档，但没有找到任何东西。

当用户在下载相关文件 (mp3) 之前单击列表项时，该概念将弹出广告。我认为他们可能会发现它是“侵入性”行为或其他东西。因此，如果您有任何信息，我将非常乐意阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:05:22.097

是的，Apple 允许使用您自己/客户的广告，并且不应危及 Apple 对您的申请的批准。

# python - 逐行比较2个文件

> ID：15602080
> 
> 赞同：1
> 
> 时间：2013-03-24T18:05:09.087
> 
> 标签：python, python-2.7

我有以下形式的 2 个文件：

```
file1:
work1
7 8 9 10 11
1 2 3 4  5
6 7 8 9  10

file2:
work2
2 3 4 5 5
2 4 7 8 9
work1
7 8 9 10 11
1 2 4 4  5
6 7 8 9  10
work3
1 7 8 9 10 
```

现在我想与文件进行比较，并且无论标题（work1）是否相等..我想比较后续部分并打印发现差异的行。例如

```
 work1 (file1)
7 8 9 10 11
1 2 3 4  5
6 7 8 9  10

work1 (file2)
7 8 9 10 11
1 2 4 4  5
6 7 8 9  10 
```

现在我想打印出现差异的行，即“1 2 4 4 5”

为此，我编写了以下代码：

```
with open("file1",) as r, open("file2") as w:
    for line in r:
        if "work1" in line:
            for line1 in w:
                if "work1" in line1:
                        print "work1" 
```

但是，从这里开始，我对如何同时读取这两个文件感到困惑。有人可以帮我解决这个问题...因为在比较“work1”之后我没有得到我应该如何并行读取文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:52:42.937

`[itertools](http://docs.python.org/2/library/itertools.html#itertools.islice)`您可能想在 Python中试用模块。它包含一个名为的函数`izip`，可以满足您的需要，以及一个名为`islice`. 您可以遍历第二个文件，直到找到您要查找的标题，然后您可以将标题切片。

这是一些代码。

```
from itertools import *    

w = open('file2')
for (i,line) in enumerate(w):
  if "work1" in line:
    iter2 = islice(open('file2'), i, None, 1) # Starts at the correct line

f = open('file1')
for (line1,line2) in izip(f,iter2):
  print line1, line2 # Place your comparisons of the two lines here. 
```

您现在可以保证，在循环的第一次运行中，您将在两行上都获得“work1”。之后就可以比较了。由于`f`比 短`w`，迭代器将耗尽自身并在您到达末尾时停止`f`。

希望我解释得很好。

编辑：添加了导入语句。

编辑：我们需要重新打开 file2。这是因为在 Python 中迭代可迭代对象会消耗可迭代对象。所以，我们需要传递一个全新的来`islice`让它工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:40:51.593

```
with open('f1.csv') as f1, open('f2.csv') as f2 :
    i=0
    break_needed = False
    while True :
        r1, r2 = f1.readline(), f2.readline()
        if len(r1) == 0 :
            print "eof found for f1"
            break_needed = True
        if len(r2) == 0 :
            print "eof found for f2"
            break_needed = True
        if break_needed : 
            break
        i += 1
        if r1 != r2 :
            print " line %i"%i
            print "file 1 : " + r1
            print "file 2 : " + r2 
```

# sql - 查找表的最小值

> ID：15602083
> 
> 赞同：0
> 
> 时间：2013-03-24T18:05:18.377
> 
> 标签：sql, sql-server

我正在寻找一个声明来找到一个具有最小值的特殊字段的用户。我的意思是这样的

```
Select ID, Username, Joindate, MIN(score) 
from table1 
```

实际上，我正在寻找一种方法来找到得分最低的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:06:59.087

要找到得分最低的用户，您可以简单地对表进行排序并获取第一条记录：

```
SELECT TOP 1 ID, UserName, JoinDate, score FROM table1 ORDER BY score 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T18:11:42.350

您可以通过几种不同的方式获得此结果。

子查询：

```
Select t1.ID,
  t1.Username,
  t1.Joindate,
  t1.Score
from table1 t1
inner join
(
  select min(score) LowestScore
  from table1
) t2
  on t1.score = t2.lowestscore 
```

[`TOP WITH TIES`](http://msdn.microsoft.com/en-us/library/ms189463.aspx)：

```
select top 1 with ties id, username, joindate, score
from table1
order by score 
```

您甚至可以使用[排名函数](http://msdn.microsoft.com/en-us/library/ms189798.aspx)来获得结果：

```
select id, username, joindate, score
from
(
  select id, username, joindate, score,
    rank() over(order by score) rnk
  from table1
) src
where rnk = 1 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/3398b/6) of all queries。

其中每一个都将返回所有得分最低的用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T18:10:32.273

查询可以是 -

```
Select ID,Username,Joindate,score from table1 
where score in (select MIN(score) from table1) 
```

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T08:37:53.473

从 table1 中选择前 1 个 ID、用户名、Joindate、score 其中 score = (select min(score) from table1)

# scala - Scala：使用 foldl 将列表中的对添加到地图中？

> ID：15602085
> 
> 赞同：0
> 
> 时间：2013-03-24T18:05:30.740
> 
> 标签：scala, fold

我正在尝试使用 foldl 将列表中的对添加到地图中。我收到以下错误：

```
"missing arguments for method /: in trait TraversableOnce; follow this method with `_' if you want to treat it as a partially applied function" 
```

代码：

```
 val pairs = List(("a", 1), ("a", 2), ("c", 3), ("d", 4))

  def lstToMap(lst:List[(String,Int)], map: Map[String, Int] ) = {
    (map /: lst) addToMap ( _, _)
  }

  def addToMap(pair: (String, Int), map: Map[String, Int]): Map[String, Int] = {
      map + (pair._1 -> pair._2)
  } 
```

怎么了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T18:15:49.197

```
scala> val pairs = List(("a", 1), ("a", 2), ("c", 3), ("d", 4))
pairs: List[(String, Int)] = List((a,1), (a,2), (c,3), (d,4))

scala> (Map.empty[String, Int] /: pairs)(_ + _)
res9: scala.collection.immutable.Map[String,Int] = Map(a -> 2, c -> 3, d -> 4) 
```

但是你知道，你可以这样做：

```
scala> pairs.toMap
res10: scala.collection.immutable.Map[String,Int] = Map(a -> 2, c -> 3, d -> 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:05:24.050

这不是问题的直接答案，即在地图上正确折叠，但我认为强调这一点很重要

*   *a`Map`可以被视为对的`Traversable`泛型*

您可以轻松地将两者结合起来！

```
scala> val pairs = List(("a", 1), ("a", 2), ("c", 3), ("d", 4))
pairs: List[(String, Int)] = List((a,1), (a,2), (c,3), (d,4))

scala> Map.empty[String, Int] ++ pairs
res1: scala.collection.immutable.Map[String,Int] = Map(a -> 2, c -> 3, d -> 4)

scala> pairs.toMap
res2: scala.collection.immutable.Map[String,Int] = Map(a -> 2, c -> 3, d -> 4) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T18:20:57.833

您需要交换 addToMap 的输入值并将其放在括号中以使其工作：

```
 def addToMap( map: Map[String, Int], pair: (String, Int)): Map[String, Int] = {
    map + (pair._1 -> pair._2)
  }

  def lstToMap(lst:List[(String,Int)], map: Map[String, Int] ) = {
    (map /: lst)(addToMap)
  } 
```

missingfaktor 的答案更加简洁、可重用和类似scala。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T05:30:23.823

如果你已经有一个 Tuple2 的集合，你不需要自己实现这个，已经有一个 toMap 方法，它只在元素是元组时才有效！

完整的签名是：

```
def toMap[T, U](implicit ev: <:<[A, (T, U)]): Map[T, U] 
```

它通过要求一个隐式来工作，该隐式`A <:< (T, U)`本质上是一个可以采用元素类型 A 并将其转换/转换为类型的元组的函数`(T, U)`。另一种说法是，它需要一个隐含的证人`A`is-a `(T, U)`。因此，这是完全类型安全的。

更新：这是@missingfaktor 所说的

# vb.net - Visual Basic - 计算随机数组中数字的出现次数

> ID：15602089
> 
> 赞同：2
> 
> 时间：2013-03-24T18:06:04.147
> 
> 标签：vb.net

我需要使用数组和字符串。该程序应该只搜索用户将输入的 1 个数字 (0-9)。下面是我的代码。它使用一个数组来获取一个随机数，并测试每个数字的出现次数。但是它不起作用，但无论如何我不需要它来测试每个数字。

程序必须只测试用户请求的数字 1。因此，如果生成的随机数是“7417”，并且用户用户选择了“7”，那么程序将报告有两个 7。我将使用文本框“txtEnter”来获取要搜索的用户编号。谁能帮我？谢谢！

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
  Randomize()
  Dim ArrayNum(1) As Integer
  ArrayNum(0) = Int(Rnd() * 100000)

  lblDisplayNumber.Text = ArrayNum(0)

  Dim num As Integer
  txtEnter.Text = num
  Dim counts = From c In num.ToString()
               Group By c Into Group
               Select DigitGroup = New With {.Count = Group.Count(),
                                             .Digit = c, .Group = Group}
               Order By DigitGroup.Count Descending
               Select String.Format("There are {0} number {1}'s found.",
                                     DigitGroup.Count, DigitGroup.Digit)
  Dim message = String.Join(Environment.NewLine, counts)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:26:05.363

如果你想使用 Linq，它简短易读：

```
Dim counts = From c In num.ToString()
             Group By c Into Group
             Select DigitGroup = New With {.Count = Group.Count(), .Digit = c, .Group = Group }
             Order By DigitGroup.Count Descending
             Select String.Format("There are {0} number {1}'s found.",
                                   DigitGroup.Count, DigitGroup.Digit)
Dim message = String.Join(Environment.NewLine, counts) 
```

**更新**：这是一个完整的示例，显示了输入数字的结果和摘要：

```
Dim rnd As New Random()
Dim randomInt = rnd.Next(0, 100000)
lblDisplayNumber.Text = randomInt.ToString()

Dim num As Integer
If Int32.TryParse(txtEnter.Text, num) AndAlso num >= 0 AndAlso num < 10 Then
    Dim counts = From c In randomInt.ToString()
             Group By c Into Group
             Select DigitGroup = New With {.Count = Group.Count(), .Digit = c, .Group = Group}
             Order By DigitGroup.Count Descending, DigitGroup.Digit
    Dim numCount = counts.FirstOrDefault(Function(grp) grp.Digit.ToString() = num.ToString())
    If numCount IsNot Nothing Then
        Dim numMessage = String.Format("There are {0} number {1}'s found.", numCount.Count, num)
        MessageBox.Show(numMessage)
    Else
        MessageBox.Show("Number does not contain " & num)
    End If
    Dim summaryCount = From grp In counts
                       Select String.Format("There are {0} number {1}'s found.", grp.Count, grp.Digit)
    Dim summaryMessage = String.Join(Environment.NewLine, summaryCount)
    MessageBox.Show("Summary:" & Environment.NewLine & summaryMessage)
Else
    MessageBox.Show("Please enter a number between 0 and 9.")
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:16:38.070

您的代码有几个问题，但要直接为您提供缺少的答案：

您应该先将随机数转换为字符串

```
 Number= Int(Rnd() * 100000) 
 NumberString = Number.ToString() 
```

将该字符串转换为字符数组

```
 DigitArray = NumberString.ToCharArray() 
```

然后遍历数组的所有字符并将每个字符转换`c`回整数

```
 For Each c As Char In DigitArray
     num = c - "0"C` 
```

然后将其`num`用作`counts`数组的索引

```
 count(num)+=1 
```

而不是那种可怕的`switch`说法。我让你找出`Dim`这些变量的正确陈述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T19:55:13.333

如果您只需要找出输入的数字在随机数字中的次数，那么前面介绍的解决方案似乎有点复杂。

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    ' create the data
    Dim nDigits As Integer = 5
    Dim digits(nDigits - 1) As String
    For i = 0 To nDigits - 1
        digits(i) = CInt(Rnd() * 10).ToString
    Next

    ' show the data
    TextBox1.Text = String.Join("", digits)

    Dim inp = InputBox("Enter a number from 0 to 9")

    ' count the occurrences of the entered number
    Dim nFound = digits.Count(Function(d) d = inp)

    MsgBox(String.Format("There are {0} occurrences of {1}.", nFound, inp))

End Sub 
```

# cakephp - CakePHP 1.3：成功登录时获取 authError 消息

> ID：15602093
> 
> 赞同：0
> 
> 时间：2013-03-24T18:06:46.887
> 
> 标签：cakephp, cakephp-1.3

我正在尝试实现一个登录功能，用户可以使用他的用户名或电子邮件地址。我已经解决了两者的登录问题，但是当用户使用他的电子邮件地址成功登录时，authError 仍然闪烁（用户已登录）。我在登录操作中添加了一条评论“这里”，但我不确定重定向之后会发生什么。

以下是我的代码的相关位：

应用程序控制器：

```
public $components = array(
    'Auth' => array(
        'authorize' => 'controller',
        'loginRedirect' => array(
            'controller' => 'users',
            'action' => 'welcome_page'
        ),
        'loginError' => 'Invalid user name/password',
        'authError' => 'You don\'t have permission'
    ),

    'Session',
); 
```

用户控制器：

```
public function beforeFilter() {

    parent::beforeFilter();

    $this->Auth->allow('add');
}

public function login() {       

    // At this point, the Auth Component is unable to log in user, so check with email.
    if (!empty($this->data) &&
        !empty($this->Auth->data['User']['username']) &&
        !empty($this->Auth->data['User']['password'])) {        

        // Look for user with email address using the entered username
        $user = $this->User->find('first', array(
            'conditions' => array(
                'User.email' => $this->Auth->data['User']['username'],
                'User.password' => $this->Auth->data['User']['password']
            ),
            'recursive' => -1
        ));

        // Check if a matching user is found and that if login was succesfull
        if (!empty($user) && $this->Auth->login($user)) {       

            if ($this->Auth->autoRedirect) {
                // NOTE: user trying to log in with email reaches HERE
                $this->redirect($this->Auth->redirect());   // this is the default authentication redirect defined in App Controller
            }

        } else {
            $this->Session->setFlash($this->Auth->loginError, $this->Auth->flashElement, array(), 'auth');
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T02:44:49.283

我编辑了您的原始帖子以从会话变量中删除消息。

```
<?php

$this->Session->delete('Message.flash');
$this->Session->delete('Message.auth');

?> 
```

希望这可以帮助！

-安德鲁

# jquery - 如何切换“a”标签元素以显示隐藏的 DIV，就像 Facebook 通知中心一样

> ID：15602097
> 
> 赞同：0
> 
> 时间：2013-03-24T18:07:34.810
> 
> 标签：jquery, html, css

在我的源代码中，我有两个`a`元素要切换以一次显示一个内容为一个的隐藏 div。就像点击图标时 Facebook 通知中心的运作方式一样，我认为，你们所有人都至少与 Facebook 网站左上角靠近徽标的 Facebook 通知中心进行了交互。他们是如何锻炼的？

这是我下面的代码

```
 <style>
    div, a {
        display: block;
    }

    body {
        width: 500px;
        margin: 100px auto;
    }

    a {
        border: 1px solid #ccc;  
        background: #ececec;  
        -webkit-border-radius: 3px;  
        padding: 5px 20px;  
        text-align: center;
        color: red;
        text-decoration: none;
    }

    #one {
        margin-bottom: 30px;
    }

    .dn_js {
        display: none;
    }

    .db_js {
        display: block;
    }

</style> 
```

这是我的 HTML

```
 <div class="wrap">
    <div id="one">
        <a href="#" data-open="frdz" class="aTggl active">Friends</a>
        <div id="frdz" class="innerWrap dn_js">Mike</div>
    </div>
    <div id="two">
        <a href="#" data-open="Ntfn" class="aTggl">Noticiations</a>
        <div id="Ntfn" class="innerWrap dn_js">Peter</div>
    </div>
</div> 
```

下面是我的 jQuery 代码

```
 <script type="text/javascript">
    $(document).ready(function (e) {
        $(".aTggl").on("click", function(e) {
            e.preventDefault();
            var $this = $(this);

            $(".active").removeClass("active");

            $this.addClass("active").parent().siblings().children(".innerWrap").addClass("dn_js");

            var content_show = $(this).data("open");
            $("#"+content_show).addClass("db_js"); 
        });
    });
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:13:58.630

所以你在这里，就像 mg007 指出已经更好地使用 toggle() 和 toggleClass()

小提琴：http: [//jsfiddle.net/dASdJ/2/](http://jsfiddle.net/dASdJ/2/)

```
var switchToggle = function (toggleEle) {
    $('#' + $(toggleEle).data('open')).toggle('slow', function() {
        // Animation complete.
          $(this).parent().children('.aTggl').toggleClass('active');
    });
 }

$('.aTggl').click(function(e) {
    e.preventDefault();
    switchToggle($(this));

    if (!$(this).hasClass('active')) {
        $('.active').each(function() {
          switchToggle($(this));
        });
    }
}); 
```

# codeigniter - Phil Sturgeon 的 Codeigniter Restserver 和 Backbone.js 中的 HTTP OPTIONS 错误

> ID：15602099
> 
> 赞同：18
> 
> 时间：2013-03-24T18:07:43.113
> 
> 标签：codeigniter, rest, backbone.js, http-options-method, codeigniter-restserver

当我尝试将模型保存到位于另一个主机/URL 上的 restful Web 服务时，我`backbone.js`的应用程序抛出 HTTP OPTIONS not found 错误。

根据我的研究，我从这篇[文章](https://stackoverflow.com/questions/13727696/backbonejs-cors-and-save-method)中收集到：

> 一个请求会不断地发送一个 OPTIONS http 请求头，而根本不会触发 POST 请求。
> 
> 显然，带有“对用户数据造成副作用”的请求的 CORS 将使您的浏览器在实际发送您预期的 HTTP 请求方法之前“预检”带有 OPTIONS 请求标头的请求以检查批准。

我试图通过以下方式解决这个问题：

*   将 Backbone 中的 emulateHTTP 设置为 true。

> Backbone.emulateHTTP = true;

*   我还允许在标头中允许所有 CORS 和 CSRF 选项。

    header('Access-Control-Allow-Origin: *');
    header("Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept"); header("Access-Control-Allow-Methods: GET, POST, OPTIONS");

`Backbone.emulateHTTP`引入代码行时应用程序崩溃。

有没有办法响应 CodeIgniter RESTServer 中的 OPTIONS 请求，还有其他替代方法可以允许从谈话的地方禁用此请求吗？

* * *

我[在 Github 上发现了这个](https://github.com/clockworkgeek/codeigniter-restserver-extra-verbs)作为一种解决方案。我不确定我是否应该使用它，因为它似乎有点过时了。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-10-11T04:28:06.923

我遇到了完全相同的问题。为了解决这个问题，我在核心中有一个 MY_REST_Controller.php，我所有的 REST API 控制器都将它用作基类。我只是添加了一个这样的构造函数来处理 OPTIONS 请求。

```
function __construct() {

    header('Access-Control-Allow-Origin: *');
    header("Access-Control-Allow-Headers: X-API-KEY, Origin, X-Requested-With, Content-Type, Accept, Access-Control-Request-Method");
    header("Access-Control-Allow-Methods: GET, POST, OPTIONS, PUT, DELETE");
    $method = $_SERVER['REQUEST_METHOD'];
    if($method == "OPTIONS") {
        die();
    }
    parent::__construct();
} 
```

这只是检查请求类型是否为 OPTIONS，如果是，则返回请求的代码 200。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-11T05:25:57.523

您还可以修改`$allowed_http_methods`子类中的属性以排除选项方法。以前版本的 REST_controller 没有对**OPTIONS**做任何事情，添加这一行似乎模仿了这种行为：

```
protected $allowed_http_methods = array('get', 'delete', 'post', 'put'); 
```

# java - 在 java swing GUI 中显示文件

> ID：15602104
> 
> 赞同：2
> 
> 时间：2013-03-24T18:08:16.220
> 
> 标签：java, swing, filereader

在 java swing Gui 中显示“.txt”文件时出现问题。

我有读取 .txt 文件并将其显示在 cmd 窗口中的代码，但似乎无法链接它，因此它将显示在 Gui 中。

这是读取文件的代码：

```
import java.io.*;
public class ReadFile {
public static void main (String [] args) throws IOException{

String inputLine = "";
FileReader inputFile = new FileReader( "player.txt");
BufferedReader br = new BufferedReader(inputFile);

System.out.println( "\nThe contents of the file player.txt are ");

// Read lines of text from the file, looping until the
// null character (ctrl-z) is endountered
while( ( inputLine = br.readLine()) != null){
  System.out.println(inputLine); // Write to the screen
}
br.close();         // Close the stream

}  // end of main method
}  //  end of class 
```

这是 Swing Gui 的代码

```
import java.awt.event.*;
import javax.swing.*;
import java.io.*;

public class GUI extends JFrame{

private JButton button;

//Set Hight and Width of Interface
private static final int WIDTH = 500;
private static final int HEIGHT = 500;

//Method to Create Inteface
public GUI(){
    createComponents();
    createDisplay();
    setSize(WIDTH, HEIGHT);
}

//An Action Listener To Contorl Action Preformed
class ClickListener implements ActionListener{
    public void actionPerformed(ActionEvent event){

    }
}
//Method to Create Button
private void createComponents(){
    button = new JButton("Click Me");
    ActionListener listener = new ClickListener();
    button.addActionListener(listener);

    JPanel panel = new JPanel();
    panel.add(button);
    add(panel);

}
//Method To Create Display
private void createDisplay(){
    JTextArea myArea = new JTextArea();

    JPanel panel1 = new JPanel();
    panel1.add(myArea);
    add(panel1);
}
} 
```

这是运行 Swing GUI 的代码

```
import javax.swing.*;

public class GUITest{
public static void main (String [] agrs){

    JFrame frame = new GUI();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);

}
} 
```

所有文件与 .txt 文件都位于我笔记本电脑上的同一个文件夹中。我正在使用 TextPad 进行编码和编译。

所有的帮助都会很感激

谢谢德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T20:23:49.107

> 这是读取文件的代码：

摆脱该代码，它不是必需的。

JTextArea 有一种`read(...)`方法，您可以使用该方法将文本文件直接读入文本区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:22:05.543

您可以在`ReadFile`类中创建类的对象`Actionlistener`并调用`ReadFile`main 方法。

# php - 正则表达式字符串操作 - php

> ID：15602105
> 
> 赞同：0
> 
> 时间：2013-03-24T18:08:20.470
> 
> 标签：php, regex, string

我想编写一个函数，它将 string1 作为输入，抓取两个参数之间的任何文本，操纵抓取的字符串，然后返回整个内容。

例如，假设我有这个：[Hi] 我的名字 [is] John。

我想要这个：

```
 <a href='Hi'>Hi</a> my name <a href='is'>is</a> John. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:10:48.853

```
preg_replace('/\[(.*?)\]/', '<a href="$1">$1</a>', $str); 
```

# css - 突出显示文本 - 如何保持一致的填充？

> ID：15602106
> 
> 赞同：1
> 
> 时间：2013-03-24T18:08:32.017
> 
> 标签：css, text, highlighting

我无法按我的意愿显示这一段。文本和背景末尾之间的填充应在每一行上保持一致，如图所示

![填充问题的图片](../Images/3884de256cbc7416139b15c09a036c11.png)

**HTML**

```
<div id="title-image-container">
    <?php echo '<img src="'.get_post_meta($id, 'title-image', true).'">' ?> 
    <div class="highlight-title"><p><?php the_title(); ?></p></div>
</div> 
```

**CSS**

```
#title-image-container {
    float: left;
}
.highlight-title {
    position: relative;
    top: -300px;
    padding: 5px 5px 5px 10px;
}
.highlight-title p {
    background-color: red;
    display: inline; 
    color: #000;    
    font: 1.9em 'oswald';
    line-height: 60px;
    padding: 0 10px;
}
#content img {
    height: auto;
    margin: 0;
    max-width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:33:12.427

[根据在另一个网站](http://samcroft.co.uk/2011/jquery-plugin-for-inline-text-backgrounds/)上找到的评论，我通过简单地用 box-shadow 替换填充来解决这个问题。

```
.highlight-title p {
    box-shadow: 10px 0 0 0 red, -10px 0 0 0 red;
    background-color: red;
    display: inline; 
    color: #000;    
    font: 1.9em 'oswald';
    line-height: 60px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:57:09.663

这将使你的工作完成——

```
p{padding-left:5px;
padding-right:5px;
text-align:justify;
word-spacing:5px;} 
```

# python - 为什么 python 字典中的字符串键的写入/读取速度比元组慢？

> ID：15602107
> 
> 赞同：2
> 
> 时间：2013-03-24T18:08:47.000
> 
> 标签：python, dictionary, key

在尝试优化模拟树结构的程序的速度时（“树”存储在 DICT 中，笛卡尔坐标 x，y 坐标对作为键）我发现将它们的唯一地址作为元组存储在字典中，而不是比字符串，导致运行时间大大加快。

我的问题是，如果 Python 针对字典和散列中的字符串键进行了优化，为什么在这个例子中使用元组要快得多？在执行完全相同的任务时，字符串键似乎要多花 60% 的时间。我在我的例子中忽略了一些简单的东西吗？

我将这个线程作为我的问题的基础（以及其他同样断言字符串更快的人）：[在字典中使用字符串作为键总是更快吗？](https://stackoverflow.com/questions/11162201/is-it-always-faster-to-use-string-as-key-in-a-dict)

下面是我用来测试这些方法的代码，并为它们计时：

```
import time

def writeTuples():
    k = {}
    for x in range(0,500):
        for y in range(0,x):
            k[(x,y)] = "%s,%s"%(x,y)
    return k

def readTuples(k):
    failures = 0
    for x in range(0,500):
        for y in range(0,x):
            if k.get((x,y)) is not None: pass
            else: failures += 1
    return failures

def writeStrings():
    k = {}
    for x in range(0,500):
        for y in range(0,x):
            k["%s,%s"%(x,y)] = "%s,%s"%(x,y)
    return k

def readStrings(k):
    failures = 0
    for x in range(0,500):
        for y in range(0,x):
            if k.get("%s,%s"%(x,y)) is not None: pass
            else: failures += 1
    return failures

def calcTuples():
    clockTimesWrite = []
    clockTimesRead = []
    failCounter = 0
    trials = 100

    st = time.clock()
    for x in range(0,trials):
        startLoop = time.clock()
        k = writeTuples()
        writeTime = time.clock()
        failCounter += readTuples(k)
        readTime = time.clock()
        clockTimesWrite.append(writeTime-startLoop)
        clockTimesRead.append(readTime-writeTime)

    et = time.clock()

    print("The average time to loop with tuple keys is %f, and had %i total failed records"%((et-st)/trials,failCounter))
    print("The average write time is %f, and average read time is %f"%(sum(clockTimesWrite)/trials,sum(clockTimesRead)/trials))
    return None

def calcStrings():
    clockTimesWrite = []
    clockTimesRead = []
    failCounter = 0
    trials = 100

    st = time.clock()
    for x in range(0,trials):
        startLoop = time.clock()
        k = writeStrings()
        writeTime = time.clock()
        failCounter += readStrings(k)
        readTime = time.clock()
        clockTimesWrite.append(writeTime-startLoop)
        clockTimesRead.append(readTime-writeTime)

    et = time.clock()
    print("The average time to loop with string keys is %f, and had %i total failed records"%((et-st)/trials,failCounter))
    print("The average write time is %f, and average read time is %f"%(sum(clockTimesWrite)/trials,sum(clockTimesRead)/trials))
    return None

calcTuples()
calcStrings() 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:32:16.203

测试的权重不公平（因此存在时间差异）。`format`您在`writeStrings`循环中的调用次数是循环中的两倍，`writeTuples`并且在`readStrings`. 为了进行更公平的测试，您需要确保：

*   `%`两个写循环只对每个内部循环进行一次调用
*   这`readStrings`两者都对每个内部循环`readTuples`进行一次或零次调用。`%`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:53:44.970

正如其他人所说，字符串格式是问题所在。

这是一个预先计算所有字符串的**快速版本......**

在我的机器上，写字符串比写元组快 27%。写/读速度快 22%。

我只是迅速将您的内容重新格式化并简化为 timeit。如果逻辑有点不同，您可以计算读取与写入的差异。

```
import timeit

samples = []
for x in range(0,360):
   for y in range(0,x):
        i = (x,y)
        samples.append( ( i, "%s,%s"%i) ) 

def write_tuples():
    k = {}
    for pair in samples:
        k[pair[0]] = True
    return k

def write_strings():
    k = {}
    for pair in samples:
        k[pair[1]] = True
    return k

def read_tuples(k):
    failures = 0
    for pair in samples:
        if k.get(pair[0]) is not None: pass
        else: failures += 1
    return failures

def read_strings(k):
    failures = 0
    for pair in samples:
        if k.get(pair[1]) is not None: pass
        else: failures += 1
    return failures

stmt_t1 = """k = write_tuples()"""
stmt_t2 = """k = write_strings()"""
stmt_t3 = """k = write_tuples()
read_tuples(k)"""
stmt_t4 = """k = write_strings()
read_strings(k)"""

t1 = timeit.Timer(stmt=stmt_t1, setup = "from __main__ import samples, read_strings, write_strings, read_tuples, write_tuples")
t2 = timeit.Timer(stmt=stmt_t2, setup = "from __main__ import samples, read_strings, write_strings, read_tuples, write_tuples")
t3 = timeit.Timer(stmt=stmt_t3, setup = "from __main__ import samples, read_strings, write_strings, read_tuples, write_tuples")
t4 = timeit.Timer(stmt=stmt_t4, setup = "from __main__ import samples, read_strings, write_strings, read_tuples, write_tuples")

print "write tuples       : %s" % t1.timeit(100)
print "write strings      : %s" % t2.timeit(100)
print "write/read tuples  : %s" % t3.timeit(100)
print "write/read strings : %s" % t4.timeit(100) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:37:10.770

我会说速度的差异是由于访问键的字符串格式。

在 writeTuples 你有这一行：

```
 k[(x,y)] = ... 
```

在传递给 k 的访问器之前，它会创建一个新元组并为其赋值 (x,y)。

在 writeStrings 你有这一行：

```
 k["%s,%s"%(x,y)] = ... 
```

它执行与 writeTuples 中相同的所有计算，但也有解析字符串 "%s,%s" 的开销（这可能在编译时完成，我不确定）但它还必须构建一个新字符串从数字（例如“12,15”）。我相信正是这增加了运行时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T19:19:31.517

我在 Core i5 1.8GHz 机器上运行了您的代码，结果如下

*   `0.076752`与`0.085863`元组到字符串的循环
*   写`0.049446`对比`0.050731`
*   阅读`0.027299`对比`0.035125`

所以元组似乎赢了，但你在 write 函数中进行了两次字符串转换。更改`writeStrings`为

```
def writeStrings():
    k = {}
    for x in range(0,360):
        for y in range(0,x):
            s = "%s,%s"%(x,y) 
            k[s] = s
    return k 
```

*   `0.101689`与`0.092957`元组到字符串的循环
*   写`0.064933`对比`0.044578`
*   阅读`0.036748`对比`0.048371`

首先要注意的是结果有很大的变化，所以你可能想改成`trials=100`更大的，回想一下 python 的`timeit`默认值是 10000。我做了`trials=5000`

*   `0.081944`与`0.067829`元组到字符串的循环
*   写`0.052264`对比`0.032866`
*   阅读`0.029673`对比`0.034957`

所以字符串版本更快，但正如其他帖子中已经指出的那样，它不是字典查找，而是字符串转换受到伤害。

# macos - 无法在带有 Clang、c++11 的 Mac OS X 中与 boost 链接

> ID：15602113
> 
> 赞同：5
> 
> 时间：2013-03-24T18:09:19.263
> 
> 标签：macos, boost, clang

我尝试在 Qt Creator 的 Mac OS X 上使用带有 Clang++ 的 boost 编译程序。一切正常：我已经编译了 boost 和所有程序模块，但是在链接阶段 clang 找不到任何符号：

```
Undefined symbols for architecture x86_64:
  "_BIO_ctrl", referenced from:
      boost::asio::ssl::detail::engine::map_error_code(boost::system::error_code&) const in session.o
  .....
  "boost::log::v2s_mt_posix::core::get()", referenced from:
      INIT_LOG() in log.o
  ..... 
```

qmake 配置：

```
CONFIG       -= qt

CONFIG       += console debug

TARGET = server

QMAKE_CXXFLAGS -= -mmacosx-version-min=10.6
QMAKE_CXXFLAGS += -std=c++11 -stdlib=libc++ -mmacosx-version-min=10.7
QMAKE_LFLAGS -= -mmacosx-version-min=10.6
QMAKE_LFLAGS += -stdlib=libc++ -mmacosx-version-min=10.7 
```

链接命令为：

clang++ -headerpad_max_install_names -stdlib=libc++ -mmacosx-version-min=10.7 -o server main.o session.o log.o -L/Users/apple/Lib/boost_1_53_0/usr/lib -L/opt/local/lib - L/usr/lib -lssl -lboost_system -lboost_filesystem -lboost_date_time -lboost_thread -lboost_log_setup -lboost_log -lboost_chrono -lboost_program_options

如果我重命名 *.dylib，它会说找不到 -lboost_*，所以它确实看到了库文件。

我`nm`可以找到，该符号存在：

```
0000000000018ad0 T __ZN5boost3log11v2_mt_posix4core3getEv 
```

# phpstorm - PHPStorm - 在选择中查找和替换文本？

> ID：15602114
> 
> 赞同：10
> 
> 时间：2013-03-24T18:09:32.427
> 
> 标签：phpstorm

在大多数其他编辑器中，我可以选择要运行查找和替换的文本的一部分，然后按 ctrl + h 组合。弹出一个屏幕，询问我要查找什么以及要替换什么。我如何在 PHPStorm 中做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-24T18:18:16.873

如果您使用的是默认键盘映射（您也可以使用 Eclipse、Visual Studio 等的键盘映射），请按`Ctrl+r`以显示替换工具栏。如果您已经有一个选择，则该选项`In Selection`将被选中，否则您可以检查它然后进行选择（如果您先选择然后检查选项，它将在检查选项后取消选择文本）。

`Replace`如果您希望更改快捷键，则在 Keymap 配置中调用该功能。

`Shift+F6`如果您想要这样做，您也可以按直接重命名变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-09T15:32:54.870

1.  突出显示您希望处理的代码选择（`alt + arrow up`如果您正在寻找一种很酷的方法，您可以使用）
2.  `Ctlr + r`在 PC 或`Command + r`Mac 上按
3.  在上方的选项窗口中，插入要替换的值
4.  选中“选择中”复选框
5.  按替换/全部替换按钮

# python - 如何在python中用双引号和单引号定义字符串

> ID：15602118
> 
> 赞同：3
> 
> 时间：2013-03-24T18:09:54.863
> 
> 标签：python

我正在使用 python 与操作系统进行通信。

我需要创建以下形式的字符串：

```
string = "done('1') && done('2')" 
```

请注意，我的字符串中必须有双引号，但我不确定如何做到这一点，因为双引号在 python 中用于定义字符串。

然后我做类似的事情：

```
os.system(string) 
```

但是系统只会读取带有双引号和单引号的字符串。

我试过了：

```
>>> s = '"done('1') && done('2')"'
  File "<stdin>", line 1
    s = '"done('1') && done('2')"'
                ^
SyntaxError: invalid syntax 
```

我还尝试了此处建议的三引号，但出现错误：

```
>>> s = """"done('1') && done('2')""""
  File "<stdin>", line 1
    s = """"done('1') && done('2')""""
                                     ^
SyntaxError: EOL while scanning string literal 
```

[如何在python中存储包含单引号（'）和双引号（“）的字符串](https://stackoverflow.com/questions/8107103/how-to-store-a-string-containing-both-single-quote-and-double-quote-in?rq=1)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T18:12:05.150

当您使用[三引号字符串](http://docs.python.org/2/reference/lexical_analysis.html#literals)时，您需要记住，当 Python 找到一个由三个引号组成的闭合集合时，该字符串*结束*- 而且它并不贪婪。这样你就可以：

更改为用三个*单*引号括起来：

```
my_command = '''"done('1') && done('2')"''' 
```

转义结尾引用：

```
my_command = """"done('1') && done('2')\"""" 
```

或在引号周围添加空格并调用`strip`结果字符串：

```
my_command = """
"done('1') && done('2')"
""".strip()
# Blank lines are for illustrative purposes only
# You can do it all on one line as well (but then it looks like you have
# 4 quotes (which can be confusing) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T18:12:40.097

您可以转义这两种引号：

```
s = '"done(\'1\') && done(\'2\')"' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T18:24:46.420

All four flavors of quotes:

```
print('''"done('1') && done('2')"''')  # No escaping required here.
print(""""done('1') && done('2')\"""")
print("\"done('1') && done('2')\"")
print('"done(\'1\') && done(\'2\')"') 
```

Output:

```
"done('1') && done('2')"
"done('1') && done('2')"
"done('1') && done('2')"
"done('1') && done('2')" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T18:27:43.023

我认为这是您所期望的： string = "\"done('1') && done('2')\""

如果这不能回答您的问题，请忽略。

# c++ - 我应该如何重载模板化结构？

> ID：15602120
> 
> 赞同：0
> 
> 时间：2013-03-24T18:10:11.300
> 
> 标签：c++, templates, struct, overloading

我希望编写一个可以接受 2 或 3 个类型名的模板化结构。但是，程序会产生错误，`template<class F1, class F2, class F3>...' cannot be overloaded`. 如何纠正？

```
template< typename F1, typename F2, typename F3>    // this shouldn't be right because the compiler expects three typenames, and the program can provide two 
struct Force{
    F1 force1;
    F2 force2;
    F3 force3;

    Force(F1 f1, F2 f2) : force1(f1), force2(f2) {    // construct out of two forces
    }

    Force(F1 f1, F2 f2, F3 f3) : force1(f1), force2(f2), force3(f3) {   // construct out of three forces
    }

    Point operator()(double t) {
        return force1(t) + force2(t);
    }

    Point operator()(double t) {    // this overloading should not be right because it has the same signature as above
        return force1(t) + force2(t) + force3(t);
    }   
};

// this is used by the main program
      template< typename F1, typename F2>
      Force<F1, F2> make_physics(F1 first, F2 second){ 
        return Force<F1, F2>(first, second);
      }

// this is used by the main program
      template< typename F1, typename F2, typename F3>
      Force<F1, F2, F3> make_physics(F1 first, F2 second, F3 third){ 
        return Force<F1, F2, F3>(first, second, third);
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:58:35.727

为了简化演示，我将类型替换`Point`为`double`. 下面的代码应该足以说明我的观点：

```
// This will be the default F3 argument. It's basically a "zero force".
struct zero {
    double operator()(double) { return 0.0; } 
};

// You only need one struct Force
template< typename F1, typename F2, typename F3 = zero>
struct Force {

   F1 force1;
   F2 force2;
   F3 force3;

   Force(F1 f1, F2 f2, F3 f3 = zero()) : force1(f1), force2(f2), force3(f3) {   // construct out of three forces
   }

   double operator()(double t) {
       return force1(t) + force2(t) + force3(t);
   }   
};

// You might provide two make_physics overload for 2D and 3D problems (that's what you want, right?)
template< typename F1, typename F2>
Force<F1, F2> make_physics(F1 first, F2 second){ 
    return Force<F1, F2>(first, second);
}

template< typename F1, typename F2, typename F3>
Force<F1, F2, F3> make_physics(F1 first, F2 second, F3 third){ 
    return Force<F1, F2, F3>(first, second, third);
} 
```

如果您的编译器具有良好的 C++11 覆盖率，那么您可以用`make_physics`可变参数模板函数替换 的重载。此外，由于这是一个工厂函数，它只是将其参数转发给`Force`的构造函数，因此您应该使用[通用引用](http://accu.org/var/uploads/journals/Overload111.pdf)和完美转发。代码应该是这样的：

```
template< typename F1, typename F2, typename... F3>
Force<F1, F2, F3...> make_physics(F1&& first, F2&& second, F3&&... third){ 
    return Force<F1, F2, F3...>(std::forward<F1>(first), std::forward<F2>(second), std::forward<F3>(third)...);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:22:59.220

您可以阅读有关[http://en.wikipedia.org/wiki/Variadic_template](http://en.wikipedia.org/wiki/Variadic_template)（可变参数模板）的信息。

或者您可以为模板提供如下默认参数：

```
template< typename F1, typename F2 = void, typename F3 = void> 
```

两者都还没有在 Visual Studio 2012 中实现但是......不确定你使用的是什么

或者（你可能不喜欢那样）复制你的类（不同的名字......）和模板每个上面的 1、2 和 3 个参数......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T18:48:34.237

您可以将[可变参数模板](http://en.wikipedia.org/wiki/Variadic_template)与[元组](http://en.cppreference.com/w/cpp/utility/tuple)一起使用：

```
template<typename... F>
struct Force
{
    std::tuple<F...> f;
}; 
```

您还可以提供不同的专业化（此方法在 C++03 中使用）：

```
template<typename F1, typename F2 = void, typename F3 = void>
struct Force
{
    F1 a;
    F2 b;
    F3 c;
};

template<typename F1, typename F2>
struct Force<F1,F2,void>
{
    F1 a;
    F2 b;
};

// and so on... 
```

# xcode - 有一个按钮应用效果xcode

> ID：15602121
> 
> 赞同：0
> 
> 时间：2013-03-24T18:10:12.910
> 
> 标签：xcode, uibutton

我想对我在应用程序中拍摄的照片应用滤镜效果。我需要 3 个按钮来调用这些效果（即，一个用于黑白，一个用于棕褐色，一个用于复古）。所以这是我的问题。保存我的图像时，您将在下面看到一个代码。您将在那里看到“img = [img e1]”。这会将图像保存为黑白。如果我做了“img = [img e2]”，那将是棕褐色。如果我希望这种效果是永久性的，我的代码就可以正常工作。问题是，如果有意义的话，我需要按钮在不同的 e 数字之间进行切换。抱歉，如果没有很好地解释这一点。

```
- (void)captureEnded:(CameraView *)camView {
NSLog(@"%f, %f", [camView capturedImage].size.width, [camView capturedImage].size.height)

UIImage *img = [camView capturedImage];
img = [img e1];
   img = [UIImage imageWithCGImage:[ self rotateImage:img angle:90 ].CGImage
                          scale:1.0 orientation: UIImageOrientationUp];

UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:40:55.033

方法名称数组

```
NSArray *methodArray = [NSArray arrayWithObjects:@"e1", @"e2", @"e3", nil]; 
```

用数组中使用的名称声明方法

```
- (void)e1
{
    // Code for Black & White effect
}

- (void)e2
{
    // Code for Sepia effect
}

- (void)e3
{
    // Code for Vignet effect
} 
```

现在用数组对象调用方法使用以下代码

```
[self performSelector:NSSelectorFromString([methodArray objectAtIndex:0])]; // call to method e1
[self performSelector:NSSelectorFromString([methodArray objectAtIndex:1])]; // call to method e2
[self performSelector:NSSelectorFromString([methodArray objectAtIndex:2])]; // call to method e3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:27:43.950

你可以声明

```
UIImage *img; 
```

在头 .h 文件和主类中编写三个按钮操作

```
-(IBAction) nbutton1{ 
```

img = [img e1];

}

```
-(IBAction) nbutton2{ 
```

img = [img e2];

}

```
-(IBAction) nbutton3{ 
```

img = [img e3];

}

# hadoop - Hive QL / UDF / Impala 查询的包装器

> ID：15602122
> 
> 赞同：0
> 
> 时间：2013-03-24T18:10:15.180
> 
> 标签：hadoop, hive, hdfs, hiveql

我正在尝试编写一个可以被来自 Sql 背景的人轻松使用的包装器。我还没有开始这项工作，我想知道我应该采取什么方法。

这是问题陈述 - 如果有人在他们的 rdbms 数据上编写了很多本机 Sql，并且他们想切换到 hadoop，那么就会有很多问题。Hive 消除了在 hdfs 中构建表的一个主要问题。现在是查询部分——为此我们有不同的框架，但没有一个框架本身是完整的——比如一个可能很慢，而另一个可能缺乏功能。例如，有 Impala，有 Hive QL，但对于最终用户来说，没有 ONE 框架。我打算做这样的事情 - select(comma-separated string of column names, tableName).where(filter-expression)....

像用于 hdfs 的 Linq 之类的东西，它会找出执行 select（hive ql 或 Impala）的最佳方法，执行 where 子句的最佳方法等。

建议？想法？批判？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:59:01.603

为什么不使用Impala的[ODBC](http://www.cloudera.com/content/cloudera-content/cloudera-docs/ImpalaBeta/0.7/Installing-and-Using-Impala/ciiu_topic_2_7.html)或[JDBC驱动程序？](http://www.cloudera.com/content/cloudera-content/cloudera-docs/ImpalaBeta/0.7/Installing-and-Using-Impala/ciiu_topic_2_8.html)MicroStrategy 或 Tableau 等第三方工具使用这些驱动程序向 Impala 提交查询。

# excel - Excel：如何检查查找表中是否存在满足指定条件的值？

> ID：15602124
> 
> 赞同：0
> 
> 时间：2013-03-24T18:10:31.903
> 
> 标签：excel

**只需说我在Sheet2**中有以下数据：

```
 --+-----+-----+
    :  A  :  B  :
  --+-----+-----+
  1 : abc : 123 :
  --+-----+-----+
  2 : def : 456 :
  --+-----+-----+
  3 : hij : 789 :
  --+-----+-----+ 
```

现在，从**Sheet1 中，我想在****Sheet2**中搜索“def”值，其 B 列中的值为“456”。如果找到，则在**Sheet1**的当前单元格中返回“存在”值。

我怎样才能做到这一点？我认为，我可以通过将 VLOOKUP 和 ISNA 与另一个功能相结合来实现，但我不知道是哪一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:53:34.730

使用`Countifs`

```
=IF(COUNTIFS(Sheet2!A:A,"def",Sheet2!B:B,456),"exists","") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:58:22.053

使用匹配：

```
 =IF(MATCH("def",Sheet2!A:A,0)=MATCH("456",Sheet2!B:B,0),"exists") 
```

如果找不到匹配项，此公式将返回“#N/A”。如果您希望它在不匹配时显示其他内容，则将公式包装在 IFERROR 函数中。

```
 =IFERROR(IF(MATCH("def",Sheet2!A:A,0)=MATCH("456",Sheet2!B:B,0),"exists"),"value_to_return") 
```

# php - 在 Laravel 4 中将 Eloquent 模型返回为 JSON

> ID：15602129
> 
> 赞同：38
> 
> 时间：2013-03-24T18:10:57.723
> 
> 标签：php, json, api, laravel, laravel-4

如何将 Eloquent 模型作为 JSON 返回给浏览器？下面两种方法有什么区别？两者似乎都有效。

**#1：**

```
return Response::json($user->toArray()); 
```

**#2：**

```
return $user->toJson(); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-15T21:34:11.497

实际发送的数据是一样的，但是...

#1 发送`Content-Type:application/json`到浏览器

#2 发送`Content-Type:text/html`

#1 更正确，但这取决于您的 Javascript，请参阅：[什么是正确的 JSON 内容类型？](https://stackoverflow.com/questions/477816/what-is-the-correct-json-content-type)

但是，仅返回模型要简单得多。它会自动返回为 JSON，并且 Content-Type 设置正确：

```
return $model; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-24T18:13:28.973

`Response::json($someArray)`是返回 JSON 数据的通用方式。

`return $model->toJson()`特定于将模型返回为 JSON。在使用 Eloquent 模型时，这将是我的首选方法。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-24T18:19:44.997

在 #1 中，您首先将 Eloquent 转换为数组，然后将其转换为 JSON，这似乎有点多余。

考虑到这一点，如果您将 JSON 返回给调用者，我会选择 #2。

另请注意，在 L4 中，每当将 Eloquent 模型转换为字符串时，它都会自动转换为 JSON。因此，您可以像文档中的这个示例一样直接从您的路由返回 JSON 数据：

```
Route::get('users', function()
{
    return User::all();
}); 
```

有关更多信息，请参阅[http://four.laravel.com/docs/eloquent#converting-to-arrays-or-json](http://four.laravel.com/docs/eloquent#converting-to-arrays-or-json)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-19T14:35:45.820

这解决了我在 laravel 5.5 中的问题：

```
function allUsers()
{
    $users = \App\User::all();
    $usersJson = json_encode($users);
    return $usersJson;
} 
```

# jquery - 使用 Ember.js 修改 HEAD 元素——规范 url 链接

> ID：15602137
> 
> 赞同：3
> 
> 时间：2013-03-24T18:11:42.580
> 
> 标签：jquery, ember.js, ember-data, canonical-link

我有一个提供关键字但忽略它们的 URL 结构。

例如：`/album/could-be-anything/12`

它将通过 id 12 查找专辑。

但是由于可以修改关键字，为了保护自己免受“重复内容”的影响，我知道我需要`link rel="canonical"`在 HEAD 中实现。规范的 url 将从我的模型的 api 中返回。

```
<head>
    <link rel="canonical" href="http://www.example.com/album/album-name/12/">
</head>
<body>
    ... applicationController ...
</body> 
```

我不确定在 Ember.js 中如何或在哪里实现这一点的最佳方法。我应该使用 jQuery 在某个回调中设置 href 属性吗？如果是这样，最好的回调是什么？`bindAttr`或者我可以在href上为头部创建一个控制器吗？

此外，这可能发生在嵌套很深的路线中......我如何确定钩子会在正确的时间触发并且不会被其他（较浅的）钩子覆盖？

# javascript - 浮动 div - 向现有脚本添加多个

> ID：15602138
> 
> 赞同：0
> 
> 时间：2013-03-24T18:11:50.580
> 
> 标签：javascript, jquery, css, html

我正在使用[此页面](http://prehuman.tumblr.com)作为我的 Web 项目的门户。[作为这个问题](https://stackoverflow.com/questions/10385950/how-to-get-a-div-to-randomly-move-around-a-page-using-jquery-or-css)的答案发布的 jsfiddle 脚本本质上是我正在寻找的，但我不确定如何让*多个*div 同时在窗口周围滑动。我想在其中包含带有文本链接的 div，例如“WEIRD CREEP”。我尝试自己编辑它无济于事，因为我对脚本的了解很差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:21:25.450

这是你想要的？

[http://jsfiddle.net/Xw29r/865/](http://jsfiddle.net/Xw29r/865/)

我改变了 animateDiv 来接受一个 obj

```
function animateDiv(obj){
var newq = makeNewPosition();
var oldq = $(obj).offset();
var speed = calcSpeed([oldq.top, oldq.left], newq);

$(obj).animate({ top: newq[0], left: newq[1] }, speed, function(){
  animateDiv(obj);        
}); 
```

};

我在所有 div 上调用了 .each

```
$("div").each(function(i,v){animateDiv(v)}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:21:37.030

我认为这就是你要找的：

```
$(document).ready(function(){

    $(".example_selector").each(function() {
         animateDiv($(this));
    });
}); 
```

请参阅小提琴的完整示例：

[http://jsfiddle.net/cfLG8/2/](http://jsfiddle.net/cfLG8/2/)

# phing - 如果出现奇怪的行为，则输入任务

> ID：15602139
> 
> 赞同：1
> 
> 时间：2013-03-24T18:11:56.800
> 
> 标签：phing

我遇到以下情况：

```
<target name="test_something">
    <if>
        <equals arg1="1" arg2="1" />
        <then>
            <input propertyname="confirm_cleanup" defaultValue="y" validArgs="y,n" promptChar="?">Hello</input>
        </then>
    </if>
</target> 
```

当我运行任务时，输出是：HelloHelloHelloHello(y,n) [y]?

任何想法为什么它会被回显 4 次？

干杯

# css - 如何在表单中设置禁用选项的样式

> ID：15602140
> 
> 赞同：39
> 
> 时间：2013-03-24T18:11:58.390
> 
> 标签：css, forms

我正在使用一个带有下拉菜单的表单，其中包含一些禁用的选项，因此用户无法选择它们。我正在尝试通过 css 自定义这些元素，但 Chrome 和 IE7/8/9/10 存在一些问题。

HTML：

```
<div class="formBody">
    <select  name="form[categoria][]"  id="categoria"  class="rsform-select-box">
      <option selected="selected" value="">Scegli una categoria</option>
      <option disabled="disabled" value="">Impresa </option>
    </select>
    <span class="formValidation">
        <span id="component50" class="formNoError">Scegli una categoria</span>
    </span>
</div> 
```

CSS：

```
select option[disabled] { color: #000; font-weight: bold } 
```

此代码仅适用于 Firefox，不适用于 Chrome 和 IE（所有版本）。

有什么想法可以解决这个问题吗？

* * *

在选择框的 html 代码下方

```
<div class="formBody"><select  name="form[categoria][]"  id="categoria"  class="rsform-select-box" ><option selected="selected" value="">Scegli una categoria</option><option disabled="disabled" value="">Impresa </option><option  value="Servizi">Servizi</option><option  value="Informatica">Informatica</option><option  value="Commercio">Commercio</option><option  value="Telecomunicazioni">Telecomunicazioni</option><option  value="Editoria/Stampa">Editoria/Stampa</option><option  value="Meccanica/Elettrica">Meccanica/Elettrica</option><option  value="Alimentare">Alimentare</option><option  value="Chimica/Farmaceutica">Chimica/Farmaceutica</option><option disabled="disabled" value="">Edilizia </option><option  value="Tessile/Moda">Tessile/Moda</option><option  value="Mobili/Arredamenti">Mobili/Arredamenti</option><option  value="Alberghi/Ristoranti">Alberghi/Ristoranti</option><option  value="Trasporto/Logistica">Trasporto/Logistica</option><option  value="Finanza">Finanza</option><option  value="Altro">Altro</option><option disabled="disabled" value="">Professionista </option><option  value="Commercialista">Commercialista</option><option  value="Ragioniere">Ragioniere</option><option  value="Notaio">Notaio</option><option  value="Tributarista">Tributarista</option><option  value="Avvocato">Avvocato</option><option  value="Consulente del lavoro">Consulente del lavoro</option><option  value="Altro">Altro</option><option disabled="disabled" value="">P.A. Locale </option><option  value="Regione">Regione</option><option  value="Provincia">Provincia</option><option  value="Comune">Comune</option><option  value="Comunit&agrave; Montana">Comunit&agrave; Montana</option><option  value="ASL">ASL</option><option  value="CCIA">CCIA</option><option  value="Altro">Altro</option><option disabled="disabled" value="">P.A. Centrale </option><option  value="Associazione di categoria">Associazione di categoria</option><option  value="Privato">Privato</option><option  value="Altro">Altro</option></select><span class="formValidation"><span id="component50" class="formNoError">Scegli una categoria</span></span></div> 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-09-12T11:13:03.330

你要找的是这个：

```
select option:disabled {
    color: #000;
    font-weight: bold;
} 
```

[来，拉小提琴。](http://jsfiddle.net/Cthulhu/zt0r42v7/1/z)

**注意：**根据评论部分的报告，此解决方案不适用于 OS X。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-05-16T10:06:30.127

我使用**:invalid**来解决我的问题，描述如下：

因此，这些答案确实设置了禁用选项的样式，但仅在下拉列表中。如果您想将列表顶部的禁用选项显示为“请选择”，则不是。

希望这可以帮助其他与我遇到类似问题的人。

基本上，选择需要是必填字段才能工作：

```
<select required> 
```

假设该选项位于列表顶部：

```
<option disabled selected value="">Please select</option> 
```

你的 SCSS 看起来像这样：

```
select {

  // The select element is set to required
  // as long as the selected options value
  // is empty the element is not valid.
  &:invalid {
    color: gray;
  }

  // Styling for browsers which do support
  // styling select option elements directly
  [disabled] {
    color: gray;
  }

  option {
    color: black;
  }
} 
```

所以它是 :invalid 允许我们为禁用的选定选项着色。

感谢 Markus Oberlehner 的帖子：

博文：[https ://markus.oberlehner.net/blog/faking-a-placeholder-in-a-html-select-form-field/](https://markus.oberlehner.net/blog/faking-a-placeholder-in-a-html-select-form-field/)

[代码笔： https](https://codepen.io/maoberlehner/pen/WOWrqO) ://codepen.io/maoberlehner/pen/WOWrqO

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-04T20:21:29.890

有一种方法可以仅使用 CSS 来做到这一点。但是您需要调整您的 HTML 以遵循一些规则：

*   设置你`select`是`required`
*   禁用的选项需要有空值字段：`value=""`
*   您需要设置`:valid`和`:invalid`状态的样式

这是标记：

```
<select required>
    <option value="" selected disabled>Disabled default</option>
    <option value="" disabled>Just disabled</option>
    <option value="" >Empty but valid</option>
    <option value="a-value-here">Fully valid</option>
</select> 
```

```
select {
   width: 500px;
   padding: 10px;
}

select:invalid {
   background: red;
}

select:valid {
   background: green;
} 
```

这是小提琴：[https ://jsfiddle.net/james2doyle/hw1m2cd9/](https://jsfiddle.net/james2doyle/hw1m2cd9/)

现在，当一种选项`disabled`和选项时`value=""`，`:invalid`将应用样式。您可以看到空值仍然可以。

如果只`select`支持`pattern`，那么我们可以改用正则表达式进行验证。在发表此评论时，它不支持且仅支持输入“文本”类型。

此解决方案应适用于 IE >= 10

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-24T18:24:18.557

I do not think you can target an `option` tag using pure CSS; you can only modify a `select` tag.

*   [Effort to modify a `select` tag](http://jsfiddle.net/W5B5p/).
*   [Same effort to modify an `option` tag](http://jsfiddle.net/W5B5p/1/).

However, there are workarounds. See [this question](https://stackoverflow.com/questions/8430279/how-to-style-the-option-with-only-csst).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-17T10:34:52.310

```
<select>
    <option value="volvo" >Volvo</option>
    <option value="saab">Saab</option>
    <option value="vw" disabled>VW</option>
    <option value="audi" class="colr">Audi</option>
    <option value="aaa">Something</option>
    <option value="ccc">Other</option>
    <option value="vw" disabled>VW</option>
    <option value="vvv">Apple</option>
    <option value="nnn" class="colr">Mango</option>
    <option value="cmmmcc">Plum</option>
</select>

option:disabled {
   background: #ccc;
   width: 500px;
   padding: 5px;
   }

option.colr {
   background: red;
   width: 500px;
   padding: 5px;
   } 
```

检查链接 [http://jsfiddle.net/W5B5p/110/](http://jsfiddle.net/W5B5p/110/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-03T14:12:15.610

我使用了一个简单的技巧将禁用的选项设置为灰色，希望有人觉得它有用。

```
<label>
    <div id="disabledMask"></div>
    <select id="mySelect">
        <option disabled selected>Please Select</option>
        <option value="foo">Bar</option>
    </select>
</label>

<style>
    label {
        position: relative;
    }

    #disabledMask {
        position: absolute;
        background-color: #fff;
        opacity: 0.5;
        pointer-events: none;
        width: 100%;
        height: 100%;
        display: none;
    }
</style>

<script>
    var toggleMask = function(){
        var option = this.options[this.selectedIndex];
        var disabledMask = document.getElementById('disabledMask');
        disabledMask.style.display = option.disabled? 'block' : 'none';
    };

    var mySelect = document.getElementById('mySelect');
    mySelect.addEventListener('change', toggleMask);
    toggleMask.bind(mySelect)();
</script> 
```

这是一个jsfiddle：[https ://jsfiddle.net/jhavbzcx/](https://jsfiddle.net/jhavbzcx/)

免责声明：根据您选择的样式，您可能需要设置#disabledMask 的样式，以免与下拉箭头重叠。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-01-26T10:05:45.207

```
<select class="dropdown" name="contactMethod">
<option selected disabled>Contact method:</option>
<option class="dropdownplus"> E-mail: </option>
<option class="dropdownplus"> Website </option>
<option class="dropdownplus"> None</option>
</select>

<style>
.dropdown {
  background-color: rgba(195, 0, 97, 0.1);
  width: 100%;
  border: 1px solid #CC0061;
  border-style: inset;
  color: grey;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 10px;
  }

option.dropdownplus {
  color: black;
}
</style> 
```

见 img [https://ibb.co/d9453b](https://ibb.co/d9453b)

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2016-11-22T18:41:10.787

```
var select = document.getElementsByTagName("select");

for(var i = 0;i < select.length; i++)
{
var el = select[i];
var optVal = el.options[el.selectedIndex].value
el.addEventListener('change', function () {
// Using an if statement to check the class
    if (optVal == "") {
        el.classList.remove('not_chosen');
    } else {
        el.classList.add('not_chosen');
    }
});
} 
```

# url - 从 Nginx 创建一个随机哈希并碰巧查询字符串

> ID：15602143
> 
> 赞同：1
> 
> 时间：2013-03-24T18:12:05.817
> 
> 标签：url, hash, nginx

简而言之，我希望 nginx 在访问任何给定的 url 时生成一个随机散列，并将该唯一散列发生在查询字符串中。

这样，当访问[http://www.mysite.com/](http://www.mysite.com/)时 ，Url 被重写为：[http://www.mysite.com/AjiJfaGVCJzwBMEoqYd3r929fz1l2fiuh](http://www.mysite.com/AjiJfaGVCJzwBMEoqYd3r929fz1l2fiuh)

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T14:47:02.723

你可以使用 nginx 内置的 perl 模块：[ngx_http_perl_module](http://nginx.org/en/docs/http/ngx_http_perl_module.html)。

基于 Perl 的请求处理程序可以生成随机和/或任何所需的哈希字符串，然后将用户重定向到新链接。

# c++ - 获取对 typeid() 对象的引用？

> ID：15602149
> 
> 赞同：1
> 
> 时间：2013-03-24T18:12:44.120
> 
> 标签：c++, constants

嘿，我来自 java 背景，我正在阅读一本 c++ 书，它说 typeid() 返回 type_info 的对象。但是，如果我尝试做类似的事情；

```
type_info *x = typeid(somthing); 
```

我收到错误：不存在从 const type_info 到 type_info 的合适转换。

有人能告诉我如何获得对 type_info 对象的引用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:16:46.123

运算符`typeid`返回一个 . `const type_info&`因此，您需要一个 const 引用，而不是指针：

```
const std::type_info &x = typeid(something); 
```

# php - 使用 PHP 从 HTML 字符串中获取特定数据的快速方法

> ID：15602151
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:13:08.313
> 
> 标签：php, jquery, regex

我避免了很多来这里分享我的问题。我用谷歌搜索了很多，找到了一些解决方案，但没有得到证实。首先我解释我的问题。

我的网站中有一个 CKEditor 让用户发表评论。假设用户点击两个帖子进行多引用，CKEditor中的数据会是这样的

```
<div class="quote" user_name="david_sa" post_id="223423">
This is Quoted Text 
</div>

<div class="quote" user_name="richard12" post_id="254555">
This is Quoted Text 
</div>

<div class="original">
This is the Comment Text 
</div> 
```

我想在php中分别获取所有元素，如下所示

```
user_name = david_sa
post_id = 223423;
quote_text = This is Quoted Text

user_name = david_sa
post_id = richard12;
quote_text = This is Quoted Text

original_comment = This is the Comment Text 
```

我想在 PHP 中获取上述格式的数据。我用谷歌搜索并找到了我的问题附近的 preg_match_all() PHP 函数，它使用 REGEX 来匹配字符串模式。但我不确定这是一个合法有效的解决方案还是有更好的解决方案。如果您有更好的解决方案，请建议我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:36:40.857

您可以为此使用[`DOMDocument`](http://www.php.net/manual/en/class.domdocument.php)和。[`DOMXPath`](http://www.php.net/manual/en/class.domxpath.php)解析 HTML 并从中提取任何内容只需要很少的代码行。

```
$doc = new DOMDocument();
$doc->loadHTML(
'<html><body>' . '

<div class="quote" user_name="david_sa" post_id="223423">
This is Quoted Text 
</div>

<div class="quote" user_name="richard12" post_id="254555">
This is Quoted Text 
</div>

<div class="original">
This is the Comment Text 
</div>

' . '</body></html>');

$xpath = new DOMXPath($doc);

$quote = $xpath->query("//div[@class='quote']");
echo $quote->length; // 2
echo $quote->item(0)->getAttribute('user_name'); // david_sa
echo $quote->item(1)->getAttribute('post_id');   // 254555

// foreach($quote as $div) works as expected

$original = $xpath->query("//div[@class='original']");
echo $original->length;             // 1
echo $original->item(0)->nodeValue; // This is the Comment Text 
```

如果您不熟悉[XPath 语法](http://msdn.microsoft.com/en-us/library/ms256471.aspx)，那么[这里有一些示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:20:50.027

您不应该使用正则表达式来处理 HTML/XML。这就是构建[DOMDocument](http://php.net/manual/en/class.domdocument.php)和[SimpleXML的目的。](http://php.net/manual/en/book.simplexml.php)

你的问题似乎相对简单，所以你应该能够使用 SimpleXML （恰当地命名，是吧？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:24:56.370

Do not even try regex to parse html. I would recommend simple html dom. Get it here: [php html parser](http://simplehtmldom.sourceforge.net/)

# c# - 如何处理浮点数

> ID：15602152
> 
> 赞同：1
> 
> 时间：2013-03-24T18:13:11.343
> 
> 标签：c#

我有以下代码

```
float m = vScrollBar1.Value;
float a = (100 - m);
textBox1.Text = a.ToString();

   float b = (a - 32);
   float c = (5 / 9);
   b = b * c;
   textBox2.Text = b.ToString(); 
```

当我滚动滚动条时，textbox1 的值逐渐变化，但 textbox2 的值始终显示为零。我也使用了 double 并且仍然总是显示零。有人请在这里帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:15:09.810

因为`(5 / 9)`是**整数除法**。

试试`(5.0f / 9)`吧。

# video - 如何在 Unity Pro 的脚本中加载视频文件作为新材料？

> ID：15602153
> 
> 赞同：0
> 
> 时间：2013-03-24T18:13:13.653
> 
> 标签：video, unity3d, unityscript

我正在尝试为 Unity Pro 编写一个脚本，该脚本使用其上的关键对象在用户身上加载视频纹理。我是各种错误，例如“NullReferenceException：对象引用未设置为对象的实例”，代码如下：

```
#pragma strict
static var isPlay : boolean = false;

function OnTriggerEnter (other : Collider) {
    if(other.CompareTag("key")) {
        print("Key!\n");
        isPlay = true;
    }
}

var movTexture : MovieTexture;

function Update() {
    if(isPlay) {
        movTexture = Resources.Load("VideoScraping/VidsList/20130324003252.mp4") as MovieTexture;
        renderer.material.mainTexture = movTexture;
        movTexture.Play();
    }
} 
```

是否有另一种形式的转换需要我加载资源？电影加载方式不同吗？我还缺少另一个元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:05:57.803

因此，第一个可能的修复方法是，资源路径必须相对于 /Assets/Resources。从[Resources.Load():](http://docs.unity3d.com/Documentation/ScriptReference/Resources.Load.html)

> 如果可以找到，则返回路径中的资产，否则返回 null。该路径相对于项目的 Assets 文件夹中的任何 Resources 文件夹，必须省略扩展名。

接下来是多次播放电影纹理的问题。出于您的问题的目的，我将坚持使用您的布尔标志示例（更改 isPlay -> triggerPlay）：

```
if(triggerPlay) {
    movTexture = Resources.Load("VideoScraping/VidsList/20130324003252.mp4") as  MovieTexture;
    renderer.material.mainTexture = movTexture;
    movTexture.Play();
    triggerPlay = false; //Just swap the flag here.
} 
```

这并不理想，因为无论电影纹理是否正在播放，OnTriggerEnter 都会将 'triggerPlay' 设置为 true。在这方面，您可以将电影播放代码直接移动到 OnTriggerEnter 并摆脱标志。或者您可以执行以下操作：

```
var movTexture : MovieTexture;
function OnTriggerEnter(other:Collider){
    if(other.CompareTag("key")&&!IsPlaying()){
        movTexture = Resources.Load("VideoScraping/VidsList/20130324003252.mp4") as  MovieTexture;
        renderer.material.mainTexture = movTexture;
        movTexture.Play();  
    }
}
function IsPlaying() :boolean {
    if(movTexture==null) return false;
    if(movTexture.isPlaying)return true;
    return false;
} 
```

您也可以使用[协程](http://docs.unity3d.com/Documentation/ScriptReference/MonoBehaviour.StartCoroutine.html)来播放电影，而不是使用标志，但这有点超出了原始问题的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T14:22:05.273

现在回答这个问题已经很晚了，但我认为你不应该在 Resoruces.Load() 函数中包含文件扩展名。

```
 movTexture = Resources.Load("VideoScraping/VidsList/20130324003252") as  MovieTexture; 
```

# javascript - Android：如何使用 javascript 界面显示 toast？

> ID：15602155
> 
> 赞同：1
> 
> 时间：2013-03-24T18:13:16.160
> 
> 标签：javascript, android, webview

我想从 webview 中显示的网页中显示 toast，例如 Google 的示例：http: [//developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

我为此创建了一个名为 : 的`WebAppInterface.java`类

包 com.test.test；

```
import android.annotation.TargetApi;
import android.app.ActionBar;
import android.os.Bundle;
import android.content.Context;
import android.os.Build;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.GradientDrawable;
import android.graphics.Color;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.webkit.WebSettings;
import android.webkit.WebChromeClient;
import android.webkit.JavascriptInterface;
import android.app.Activity;
import android.view.KeyEvent;
import android.app.ProgressDialog;
import android.view.Window;
import android.widget.Toast;
import com.test.test.R;

public class WebAppInterface extends Activity{
    Context mContext;

    /** Instantiate the interface and set the context */
    WebAppInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    @JavascriptInterface
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
} 
```

这是我的主要活动代码`MainActivity.java`：

```
class JsObject {
    @JavascriptInterface
    public String toString() { return "injectedObject"; }
 }
myWebView.addJavascriptInterface(new JsObject(), "injectedObject"); 
```

Web 视图加载的页面包含以下代码：

```
<input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />

<script type="text/javascript">
    function showAndroidToast(toast) {
        Android.showToast(toast);
    }
</script> 
```

我完全按照谷歌示例中的说明进行操作，但它不起作用……为什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:30:54.170

利用

```
myWebView.addJavascriptInterface(new JsObject(), "Android"); 
```

在 javascript 中，该变量`Android`将可用。您`injectedObject`在注册 Javascript 接口时改为使用。

[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

# jquery - DOM 选择器如何在 jQuery 中查找元素？

> ID：15602163
> 
> 赞同：-3
> 
> 时间：2013-03-24T18:13:55.623
> 
> 标签：jquery

我是 jQuery 的新手。我学习了 jQuery 选择器，它用于选择 DOM 元素。但我不明白它是如何在内部找到 DOM 元素的。如果我给出类似的东西`$("#pelement")`或者`$(".pclass")`jQuery 如何找到 DOM 元素？

是否使用 document.getElementById() 之类的？我怎么能理解这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:17:51.960

它只是一个库，所以是的，如果您正在寻找一个 ID，它使用`document.getElementById()`

如果`querySelector()`在浏览器中可用，它也使用它，否则它可能`getElementsByClassName()`用于类。

换句话说，它采用浏览器中可用的内容并使用最有效的内容，并将其抽象化，以便您可以在代码中使用 CSS 选择器，而无需考虑诸如浏览器支持什么以及使用什么方法等内容.

# mysql - 在 drupal 中超过 db 查询的问题

> ID：15602165
> 
> 赞同：0
> 
> 时间：2013-03-24T18:14:16.963
> 
> 标签：mysql, database, drupal, hosting, vps

我们有一个基于 drupal 的网站，托管在 www.fatcow.com。但最近它开始给出超过“max_questions”资源错误的最大数量的错误。如[http://drupal.org/node/38996#comment-6295156](http://drupal.org/node/38996#comment-6295156)所述，我们增加了用户数量。但是 fatcow 对此有一个限制。现在我们正在考虑迁移到 VPS。但是我们如何为我们的网站找到最佳计划呢？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:30:00.093

我真的很喜欢 Drupal，但是当您开始添加模块时，它往往会占用大量资源，并且需要付出更多努力才能使其扩展。我会在您的 vps 中获得至少 1 gig 的 ram，将内存限制设置为至少 128M，使用查询缓存和最大数据包大小自定义 mysql 服务器。我也会打开内容缓存 - 如果您有很多内容变化不大，这可能是一个选择。Pressflow 可能是一种选择。如果您将 Drupal 7 与 sqlite 一起使用，则另一种选择，这完全取决于您的用户使用场景。

# jquery - 使用jQuery slideDown和slideUp时奇怪的img移位

> ID：15602166
> 
> 赞同：0
> 
> 时间：2013-03-24T18:14:34.680
> 
> 标签：jquery, html

我有以下html结构：

```
<div class ='profileName'>
   <hr>
   <span class='name'>Content</span>
</div>
<div class ='profile'>
<div class='floatRightImg padded'>
<img src='imgUrl' class='shadow'/>
    </div>
    <p>description</p>
</div> 
```

与以下 CSS 链接：

```
hr {
color: #CCCCCC;
}

.floatRightImg {
float: right;
}

.profile {
height: 450px;
width: 700px;
margin: auto;
}

.profileName {
width: 700px;
margin: auto;
}

.shadow {
box-shadow: 10px 10px 5px #888888;
}

.padded {
padding: 0 30px 0 15px;
}

.name {
background-color: #FFFFFF;
color: #CCCCCC;
left: 70px;
padding: 0 8px;
position: relative;
top: -20px;
font-weight: bold;
font-size: 20px;
}

.name:hover {
cursor:pointer;
} 
```

我正在使用以下 jQuery 函数：

```
$(document).ready(function(){

            $(".name").click(function(){
                var toBeSlided = $(this).parent("div").next("div");
                if(toBeSlided.is(":visible")) {
                    toBeSlided.slideUp();
                } else {
                    toBeSlided.slideDown();
                }
            });

        }); 
```

一切都按我的意愿工作（当我单击“名称”跨度时，向下滑动显示和隐藏“配置文件”div 的内容。问题是我注意到一个奇怪的效果：浮动图像执行奇怪的是，当我关闭 div 时向上移动，当我打开 div 时向下移动。换句话说，在显示或隐藏内容时它不会保持固定（事实上，它是要隐藏/显示的内容的一部分). 对这种行为有什么可能的解释吗？在此先感谢大家。

[这是jsfiddle](http://jsfiddle.net/6k2wv/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:35:25.517

这是因为您的浮动右侧旁边的 p 元素。 [http://jsfiddle.net/6k2wv/3/](http://jsfiddle.net/6k2wv/3/)

```
<div class ='profileName'>
   <hr>
   <span class='name'>Content</span>
</div>
<div class ='profile'>
    <div class='floatRightImg padded'>
        <img src='http://www.polpenuil.it/convenzioni/images/smile.jpg' class='shadow'/>
    </div>
    <p style="float: left;">description</p>
</div> 
```

注意左边的新浮动。

此外，您可以将 JS 代码简化为：

```
$(document).ready(function(){
    $(".name").click(function(){
        var toBeSlided = $(this).parent("div").next("div");
        toBeSlided.slideToggle();
    });
}); 
```

通常最好的做法是避免串接 .parent/.next 调用。您最终会得到取决于特定 DOM 结构的令人困惑的代码。相反，给元素一个唯一的类并直接在你的事件之外选择它。

```
$(function(){
    var smileyFace = $(".smiley-face");
    $(".name").click(function(){
        smileyFace.slideToggle();
    });
}); 
```

# c - 计算给定字符串中有多少由空格分隔的整数值

> ID：15602169
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:14:51.790
> 
> 标签：c, arrays, size

我想做一个函数，给定包含由空格分隔的（无符号）整数值的字符串，给我字符串中值的数量：

```
int conta_coords(char *args) {
  char *pal;
  int k=0;
  pal = strtok (args," ");
  while (pal != NULL)
  {
      k++;
      pal =strtok (NULL," ");
  }
  return k;
} 
```

这个函数不会给我正确的数字。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:34:54.540

像这样的东西：

```
#include <string.h>
#include <stdio.h>
#include <stdbool.h>
#include <ctype.h>

bool is_stringified_num(const char *str, const size_t size)
{
    int n = 0;
    while(n < size && isdigit(str[n++]));

    return n == size;
}

int str_numbers_count(char *str)
{
    int numbers_count = 0;
    char *prev_pos = str;
    char *pos = strchr(str, ' ');

    while(pos)
    {
        if (is_stringified_num(prev_pos, pos - prev_pos)) ++numbers_count ;
        prev_pos = ++pos;
        pos = strchr(pos, ' ');
    }

    if (is_stringified_num(prev_pos, strlen(str) - (prev_pos - str))) ++numbers_count ;

    return numbers_count ;
}

int main(int argc, char *argv[])
{
    char str[] = "1 23 456 7890 12345";
    printf("%s contains %d numbers\n", str, str_numbers_count(str));

    return 0;
} 
```

Ideone 编译良好并输出：

```
1 23 456 7890 12345 contains 5 numbers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:29:59.370

它以什么方式不会给你正确的号码？这是嵌入到 SSCCE 中的代码（[简短、独立、正确的示例](http://sscce.org/)）。

```
#include <string.h>
#include <stdio.h>

extern int conta_coords(char *str);

int conta_coords(char *args) {
  char *pal;
  int k=0;
  pal = strtok (args," ");
  while (pal != NULL)
  {
  k++;
      pal =strtok (NULL," ");
  }
  return k;
}

int main(void)
{
    char data[] = "1 23 456 7890 12345";
    printf("Data: %s\n", data);
    printf("Number: %d\n", conta_coords(data));
    printf("Data split: %s\n", data);
    return 0;
} 
```

输出：

```
$ ./cntnum
Data: 1 23 456 7890 12345
Number: 5
Data split: 1
$ 
```

这在我看来是正确的。但请注意，原始字符串已被切成碎片。此外，如果我传递了一个只读字符串（字符串文字），我可能会得到不同的结果，因为`strtok()`修改了它所处理的数据，但字符串文字并不总是可修改的（你可能会因为尝试而得到核心转储修改它）。例如：

```
 printf("Number: %d\n", conta_coords("   1     23    45   67    99    ")); 
```

这给了我一个“总线错误”（如果它们没有被禁用，它会给出一个核心转储）。

这是一个替代实现，它通过根本不修改搜索字符串来处理常量字符串，使用被低估的 C89 标准函数`strspn()`和`strcspn()`：

```
#include <string.h>
#include <stdio.h>

extern int conta_coords(const char *str);

int conta_coords(const char *str)
{
    const char  digits[] = "0123456789";
    const char *ptr = str;
    int   k = 0;
    int   n = strcspn(ptr, digits);
    while (ptr[n] != '\0')
    {
        ptr += n;
        n = strspn(ptr, digits);
        if (n > 0)
            k++;
        ptr += n;
        n = strcspn(ptr, digits);
    }
    return k;
}

int main(void)
{
    char data[] = "1 23 456 7890 12345";
    printf("Data: %s\n", data);
    printf("Number: %d\n", conta_coords(data));
    printf("Data unsplit: %s\n", data);
    printf("Number: %d\n", conta_coords("   1     23    45   67    99    "));
    return 0;
} 
```

输出：

```
Data: 1 23 456 7890 12345
Number: 5
Data unsplit: 1 23 456 7890 12345
Number: 5 
```

请注意，对此的一个合理批评是它不要求整数用空格分隔（因此更准确的描述是“计算一个或多个连续数字的序列数（由一个或多个非数字分隔）出现在给定的字符串中'）。但是原始代码也可以基于类似的理由受到批评：它计算给定字符串中出现的连续非空白序列的数量，由一个或多个空白分隔。您可以改进实现，但要注意如何处理错误格式的数据并报告问题。

# java - 使用 JOptionPane 打印出 .txt 文件

> ID：15602170
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:14:54.007
> 
> 标签：java, joptionpane

我正在尝试获取必须滚动的单词列表，而不是从屏幕上运行的窗口。滚动条现在正在工作，但我无法让维度工作。它说它`( new Dimension( 200, 400 )) ;`有一个错误。找不到标志

```
import javax.swing.JDialog;
import javax.swing.*;
import java.util.*;
import java.io.*;

public class print1 
{
    public static void main(String [] args) throws IOException
    {
        String input = "";

        BufferedReader reader = new BufferedReader(new FileReader("wordlist.txt"));
        String line = null;
        while ((line = reader.readLine()) != null) {

            input += line + "\n";
        }
        reader.close();

        JTextArea textArea = new JTextArea(input);
        JScrollPane scrollPane = new JScrollPane(textArea);  
        textArea.setLineWrap(true);  
        textArea.setWrapStyleWord(true); 

        scrollPane.setPreferredSize( new Dimension( 200, 400 )) ;
        JOptionPane.showMessageDialog(null,  scrollPane, "Complete Word List:",           
        JOptionPane.PLAIN_MESSAGE);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:31:53.357

它比您拥有的代码要复杂一些。此外，您正在尝试使用`FileWriter`并且`PrintWriter`您的问题暗示您要读取文件。

读取文本文件的基本设置通常是这样的：

```
String input = "";
//Setup the reader
BufferedReader reader = new BufferedReader(new FileReader("/path/to/file.txt"));
String line = null;
//Loop through every line in the .txt file
while ((line = reader.readLine()) != null) {
    //Add the line and then "\n" indicating a new line
    input += line + "\n"
}
reader.close(); 
```

现在你有了包含`input`txt 文件所有行的变量。

[在此处](http://docs.oracle.com/javase/tutorial/essential/io/charstreams.html)阅读有关阅读文件的更多信息。

现在`JOptionPane`，您可能会发现`JFrame`使用`JTextArea`. 阅读如何使用它们：[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)和[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/textarea.html)。你会想要制作一个`JFrame`然后添加一个`JTextArea`。

更新：或者你可以做这样的事情（取自[SO 上的这个答案](https://stackoverflow.com/a/8375077/1758037)）：

```
JTextArea textArea = new JTextArea(input);
JScrollPane scrollPane = new JScrollPane(textArea);  
textArea.setLineWrap(true);  
textArea.setWrapStyleWord(true); 
scrollPane.setPreferredSize( new Dimension( 200, 400 ) ); //whatever size you want
JOptionPane.showMessageDialog(null, 
    scrollPane, 
    "text file contents:", 
    JOptionPane.PLAIN_MESSAGE); 
```

我运行了上面的代码并得到了这个结果：

![在此处输入图像描述](../Images/6f900777acdf477257ff30798c0c8b23.png)

我认为这与您正在尝试做的事情很接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T14:27:19.450

以下将过滤后的 jpg 文件从文件夹添加到 JList

```
private void listPicFiles(){
  DefaultListModel dlm = new DefaultListModel();  
  String path = "C:/New folder";  
  String files;
  File folder = new File(path);
  File[] listOfFiles = folder.listFiles(); 

  for (int i = 0; i < listOfFiles.length; i++) { 
   if (listOfFiles[i].isFile()) {
   files = listOfFiles[i].getName();
       if (files.endsWith(".jpg") || files.endsWith(".jpg"))   {
           dlm.add(i, files);
           //System.out.println(files);
        }
     }    
  }
  JList list = new JList(dlm);
  JOptionPane.showMessageDialog(null, list);
  System.out.println(list.getSelectedValue());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:40:57.713

也许这会帮助你：

```
 public class JOptionTest {

        private String text;

        public void readFileContent() throws FileNotFoundException{

           text = new Scanner( new File("install.txt") ).useDelimiter("\\A").next();

        }

        public String getFileContent(){

           return this.text;
        }

        public void displayJOptionTest(){

            JOptionPane.showMessageDialog(null,
            text,
            "StackOverFlow Test",
            JOptionPane.ERROR_MESSAGE);

        }

        public static void main(String [] args) throws FileNotFoundException{

             JOptionTest test = new JOptionTest();

             test.readFileContent();
             test.displayJOptionTest();
        }
    } 
```

# java - 读取音频文件时出现 NullPointer 异常

> ID：15602173
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:15:14.217
> 
> 标签：java, audio, jar, executable-jar

我做了一个程序来读取音频文件。起初我是用绝对路径来做的，因为它更容易开发。
然后我将它转换为相对路径，因为我想将它压缩为`*jar`. 所以我编写了这个方法（起初只是简短的代码：

```
1.: at first I make a FileArray to save the Files
2.: make the array to save the AudioClip
3.: for loop to read the Clips 
```

现在代码：

```
 private AudioClip[] liesAudioDateien (File inputFile) {
        File[] dateFileArray;
        AudioClip[] tracks;
        dateFileArray = inputFile.listFiles();
        tracks = new AudioClip[dateFileArray.length];
        for (int i = 0; i < tracks.length; i++) {
            if (dateFileArray[i].isFile()) {
                try {
                    tracks[i] = Applet.newAudioClip(dateFileArray[i].toURL());
                } catch (IOException ex) {
                    System.err.println("Error!: -- " + ex.toString());
                }
            }

        }
        return tracks;   
    } 
```

`inputFile.listfiles()`返回null，好像我的路径不正确。但是我的路径还可以，因为我让它在命令行上打印。 `D:\Eclipse\MyProjekt\dist\MyProject.jar\audio`. 在 NetBeans 中，它确实有效。`If I make a jar file, it doesn't work.`

我已经尝试过：

1.  `D:\Eclipse\MyProjekt\dist\MyProject.jar\audio\`
2.  `/`代替`\`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:23:08.300

你确定这是正确的文件路径吗？

```
D:\Eclipse\MyProjekt\dist\MyProject.jar\audio 
```

音频目录位于**名为 MyProject.jar 的文件夹**中？

如果您的音频文件在 .jar 文件中，则您不能使用`File`该类来列出它们。相反，您需要做的是[从 .jar 文件中读取条目，就像在这个问题中一样](https://stackoverflow.com/questions/1429172/how-do-i-list-the-files-inside-a-jar-file)。

# google-maps - 在 Google 地图上显示 NOAA ENC 海图

> ID：15602174
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:15:16.290
> 
> 标签：google-maps, kml, noaa

我目前正在投资一个项目，将海图和地图应用到我们的自定义谷歌地图应用程序中。但是，我不确定如何实际执行此操作。我想使用这里的 NOAA ENC 数据：

```
http://www.charts.noaa.gov/ENCs/ENCs.shtml 
```

我想做的是使用这些数据在谷歌地图上显示图表。有没有人对如何做到这一点有任何想法/提示/见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:46:25.900

显然有一个开源阅读器可以插入通用实用程序 (ogr2ogr)，它允许您将数据转换为 shapefile 格式： [http ://home.gdal.org/projects/s57/](http://home.gdal.org/projects/s57/)

将数据转换为 shapefile 格式后，将其转换为切片是一个很好理解的问题。这是一篇关于某人做到这一点的博客文章： ~~[http://jongyulin.com/2009/05/getting-started-with-map-tiling-mapnik-and-shapefiles/](http://jongyulin.com/2009/05/getting-started-with-map-tiling-mapnik-and-shapefiles/)~~ [https://web.archive.org/web/20150523144053/http://jongyulin.com:80/2009/05/getting-started-with-map-tiling-mapnik-and-shapefiles/](https://web.archive.org/web/20150523144053/http://jongyulin.com:80/2009/05/getting-started-with-map-tiling-mapnik-and-shapefiles/)

# active-directory - 在需要 DC 的 windows 2008 R2 集群上启动 DC VM

> ID：15602176
> 
> 赞同：0
> 
> 时间：2013-03-24T18:15:21.653
> 
> 标签：active-directory, cluster-computing, windows-server-2008-r2, hyper-v, san

我们继承了以下架构：

*   2 物理服务器 Windows 2008 R2
*   SAN

2 个服务器是集群的，并使用一个包含我们所有生产 Hyperv 虚拟机的通用 LUN。主域控制器也是一个 hyperv VM。

我们的问题如下：电源在一段时间内停止。重新启动2台HW机器时，集群节点无法挂载，因为找不到Active Directory ID（这是正常的，因为VM没有启动）。

这是错误消息：*无法使群集网络名称资源“xxxx”联机，无法使用 GUID 获取计算机对象*

因此，如果集群节点无法启动，就无法访​​问 LUN。

而且我们找不到 DC 单次保存。

有没有办法强制集群在没有 GUID 的情况下启动？

提前一百万谢谢:(

PS：IBM最近的硬件3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T16:33:01.073

I haven't messed with hardware Cluster servers for a while, but it used to be best practice to have cluster nodes DCs in thier own domain, if it where likely, that they could start without being able to contact a DC for exactly the reason you stated.

# google-maps - gmaps4rails 方法 - Gmaps.map.centerMapOnUser() 和 Gmaps.map.markers.length

> ID：15602178
> 
> 赞同：1
> 
> 时间：2013-03-24T18:15:40.320
> 
> 标签：google-maps, google-maps-api-3, gmaps4rails

这里有两个问题，但它们是相关的。有没有办法让`centerMapOnUser()`动作流畅？我有一个标记我的位置，它是可拖动的。

```
// watch for marker movement, and update location accordingly
function updateUserLocation(latLng) {
  var revGeo = new google.maps.Geocoder();
  revGeo.geocode({'latLng': latLng}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      if (results[1]) {
        $('#loc').html(results[1].formatted_address); 
      }
    } else {
      alert("Geocoder failed due to: " + status);
    }
  });
  Gmaps.map.userLocation = latLng;
  Gmaps.map.centerMapOnUser();
  lat = latLng.lat();
  lng = latLng.lng();
} 
```

不过，这非常突然，几乎让人迷失方向。我想知道是否有人知道如何使其顺利过渡。

边问。有时地图显示 1 个标记，有时显示 26 (AZ)。如果它只有 1，则缩放级别设置为最大。我禁用`auto_zoom`并添加了此功能：

```
function zoom() {
  if (Gmaps.map.markers.length == 1) {
    //only one marker, choose the zoom level you expect
    Gmaps.map.serviceObject.setZoom(16);
  }
  else{
    //more than one marker, let's auto_zoom
    Gmaps.map.map_options.auto_zoom = true;
    Gmaps.map.adjustMapToBounds();
  }
} 
```

检查控制台，无论有 0、1 还是多个标记，`Gmaps.map.markers` **总是返回 0。**不过，标记最初是添加的，甚至是后来通过该`replaceMarkers()`函数添加的，所以一切*似乎*都配置正确。

# hadoop - 集群不适用于 cdh4 tarball 安装

> ID：15602183
> 
> 赞同：0
> 
> 时间：2013-03-24T18:16:05.050
> 
> 标签：hadoop, cloudera

我正在尝试使用 tarball 版本安装 CDH4，但面临的问题如下：

我从链接下载了压缩包`https://ccp.cloudera.com/display/SUPPORT/CDH4+Downloadable+Tarballs`

我首先解压 hadoop-0.20-mapreduce-0.20.2+1341 tar 文件

我做了配置更改

```
hadoop-0.20-mapreduce-0.20.2+1341  since i wanted mrv1 not yarn . 
```

cdh4安装中提到的第一件事是配置HDFS

我做了相关的改变

```
core-site.xml
hdfs-site.xml
mapred-site.xml
masters --- which is my namenode
slaves ---- my datanodes 
```

复制集群中所有节点上的hadoop配置

做了一个namenode格式。

格式化后我必须启动集群，但在 bin 文件夹中不能

找到 start-all.sh 脚本。所以在那种情况下，我从命令开始

```
bin/start-mapred.sh 
```

在日志中它显示在从节点上启动了 jobtracker 和 tasktracker 但是当我执行 jps

我只能看到

```
jobtracker
jps 
```

进一步，使用以下命令在数据节点上启动了数据节点

```
bin/hadoop-daemon.sh start datanode . 
```

它显示数据节点已启动。

Namenode 未启动，tasktracker 未启动。

当我检查我的日志时，我可以看到

```
ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: Exception in namenode join
java.io.FileNotFoundException: webapps/hdfs not found in CLASSPATH 
```

不知道是什么阻止了我的集群工作。

早些时候我有一个 cdh3 运行。所以我停止了 cdh3 集群。然后我开始安装 cdh4 。此外，我更改了所有目录 hdfs-site.xml，即为 namenode 和 datanode 指定了新的空目录，而不是使用 cdh3 中定义的目录。

但似乎仍然没有任何帮助。

我也关闭了防火墙，因为我确实有 root 访问权限，但同样的事情它对我不起作用。

上面的任何帮助都会有很大的帮助。

* * *

谢谢你的回复，但是

我没有

```
start-dfs.sh file in bin folder 
```

只有 /home/hadoop-2.0.0-mr1-cdh4.2.0/bin 文件夹中的文件为

```
start-mapred.sh
stop-mapred.sh
hadoop-daemon.sh
hadoop-daemons.sh
hadoop-config.sh
rcc
slaves.sh
hadoop 
```

我现在使用的命令如下

用于启动数据节点：

```
for x in /home/hadoop-2.0.0-mr1-cdh4.2.0/bin/hadoop-* ; do $x start datanode ; done ; 
```

用于启动 namenode ：

```
bin/start-mapred.sh 
```

我仍然在处理同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:15:17.767

您好，对于上述误解，您可以运行以下命令来启动您的 datanodes 和 namenode

启动名称节点：

```
hadoop-daemon.sh  start namenode 
```

启动数据节点：

```
hadoop-daemons.sh  start datanode 
```

要启动辅助名称节点：

```
hadoop-daemons.sh --hosts masters start secondarynamenode 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T21:29:19.347

运行命令后，jobtracker 恶魔将在您的主节点中启动，tasktraker 恶魔将在您的每个数据**节点**中**启动**

```
bin/start-mapred.sh 
```

在**Hadoop Cluster Setup**中，masternode 中的 JPS 命令将仅显示**jobtacker**恶魔，并且在您的每个数据节点中，您都可以使用 JPS 命令查看正在运行的**Tasktracker恶魔。**

然后你必须通过在你的主节点中运行以下命令来启动 HDFS

```
bin/start-dfs.sh 
```

此命令将在您的名称节点机器中启动名称**节点**恶魔（在此配置中，我相信您的主节点本身），并且在您的每个从节点中启动数据节点恶魔**。**

现在您可以在每个数据节点上运行 JPS，它会给出输出

```
tasktracker
datanode
jps 
```

我认为这个链接会很有用 [http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-multi-node-cluster/)

# .htaccess - 字符串中带有 _.html 的 Apache .htacces 重写规则不起作用

> ID：15602184
> 
> 赞同：0
> 
> 时间：2013-03-24T18:16:12.527
> 
> 标签：.htaccess, mod-rewrite, underline

我有以下问题：

谷歌网站管理员工具中有数千个 404 错误，我想摆脱它。带有错误的链接具有以下形式：

```
 detail1_1573950017_.html
 detail1_0471241687_.html
 detail1_3150182638_.html
 detail1_319004077X_.html
 detail1_3464901092_.html
 detail1_347332437X_.html    
 detail1_3577104848_.html 
```

现在这是我不工作的 .htaccess 条目来摆脱它：

```
 RewriteRule ^detail1_([^/]+)_\.html  shops.php?go=detail1&ItemId=$1 [L] 
```

或者

```
 RewriteRule ^detail1_([^/]+)\_\.html    shops.php?go=detail1&ItemId=$1 [L] 
```

两个版本都不行！！其他 RewriteRules 运行良好。

两个 _ 之间的字符应该成为 ItemId 的 $1

任何提示表示赞赏

系统信息：PHP erstellt für Linux 2.6.32-379.19.1.lve1.2.7.el6.x86_64 #1 SMP Wed Jan 23 14:53:41 EST 2013 x86_64 Datenbankversion 5.1.68-cll Datenbankzeichensatz utf8_general_ci PHP-Version 5.3.22 Webserver Apache PHP-Interface für den Webserver cgi-fcgi

# r - 如何使用 xts 对象的索引来子集另一个 xts 对象？

> ID：15602187
> 
> 赞同：1
> 
> 时间：2013-03-24T18:16:28.993
> 
> 标签：r, xts

```
require(quantmod)
require(TTR)
require(PerformanceAnalytics)

tckr<-"^GSPC"

start<-"1986-12-31"
end<- format(Sys.Date(),"%Y-%m-%d") # yyyy-mm-dd

getSymbols(tckr, from=start, to=end)
US10yRate<-getSymbols("DGS10",src="FRED",auto.assign=FALSE,from=start, to=end)

US10yRate<-to.daily(US10yRate)[,1]

#running 25 day correlation 
correlationSPand10y<-runCor(US10yRate[,1],GSPC[1:12789,2],n=25) 
```

此代码来自 TimelyPortfolio 博客。它在 runCor 的最后一行给了我错误。原因是 US10yRate 的观测次数与 GSPC 不同。US10yRate 的日期不连续（1990-01-02、1990-01-05 等）。我想根据 US10yRate 日期对 GSPC 进行子集化，以便它们可以相互匹配。此操作与 SQL 中的合并完全相同。我该如何处理 R 中的 xts 对象？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:57:12.587

您可以先合并它们以确保它们具有相同的行数。

```
dat <- merge(US10yRate[, 1], GSPC[, 2], all=FALSE)
# or,
# dat <- na.locf(merge(US10yRate[, 1], GSPC[, 2]))

correlationSPand10y <- runCor(dat[, 1], dat[, 2], n=25) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:45:56.337

看一下`GSPC`，特别是它的行数。

```
> dim(GSPC)
[1] 6612    6

> GSPC[1:12789,2]
Error in `[.xts`(GSPC, 1:12789, 2) : subscript out of bounds 
```

* * *

```
 U <- US10yRate[index(US10yRate) %in% index(GSPC),1]
 G <- GSPC[index(GSPC) %in% index(US10yRate), 2]
 dim(U)
 #  [1] 6552    1
 dim(G)
 #  [1] 6552    1 
```

# apache - htaccess 密码保护单个文件。我仍然在其他文件上收到密码提示

> ID：15602190
> 
> 赞同：2
> 
> 时间：2013-03-24T18:16:48.933
> 
> 标签：apache, file, .htaccess, permissions, directory

下面是我的 htaccess 文件。这里发生了 2 件事。在代码的第一部分，我确保服务器位于 https 中。在第二部分文件匹配中，我想用密码保护一个文件。这可以正常工作。但是，我不希望目录中的其他文件提示用户输入密码。当我尝试访问另一个页面时说 index.php 我仍然收到密码提示。如果我单击取消，我可以按我应该的方式访问该文件，但是如何让它根本不提示其他文件？

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteCond %{REQUEST_URI} reservations 
RewriteRule ^(.*)$ https://www.mydomain.com/reservations/$1 [R,L]

<filesMatch "protectme.php">
  AuthName "Username and password required"
  AuthUserFile "/home/path/.htpasswds/passwd"
  Require valid-user
  AuthType Basic
</filesMatch> 
```

# python - 即使用笔，如何阻止乌龟画画？

> ID：15602192
> 
> 赞同：2
> 
> 时间：2013-03-24T18:16:51.553
> 
> 标签：python, python-3.x, turtle-graphics

我在python中使用turtle模块。问题是每当我让乌龟移动时，即使笔已经抬起，我也会画画。例如，如果我运行这个程序：

```
import turtle

turtle.penup
turtle.goto(0,50) 
```

海龟移动到 (0,50) 时仍会画一条线 为什么会这样，如何防止？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T18:20:27.583

看起来你实际上并没有调用turtle.penup。尝试这个：

```
import turtle

turtle.penup()
turtle.goto(0,50) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T18:20:28.240

你有一个错字，你没有调用 penup 方法：

```
import turtle

turtle.penup() #This needs to be a method call
turtle.goto(0,50) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-29T17:44:25.777

这个问题已经很老了，肯定已经回答过了，但我会把这个解释留给未来的人

“penup”是 Python 中的一种方法，也就是其他语言中的函数。这意味着当您想使用它时，您可以在其中包含一些括号，以便您的代码知道应该发生什么

```
import turtle

turtle.penup()
turtle.goto(0,50) 
```

当你不包含括号时，代码认为你在谈论一个变量，并寻找一个名为“penup”的变量，但没有那个名称的变量，所以 Python 举起手来崩溃

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-28T10:26:47.503

进口龟

`turtle.up() turtle.goto(0,50) turtle.down()`

如果你不放下笔，它会继续在隐形状态下绘图。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-23T17:34:35.953

你应该试试

```
turtle.penup() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-28T07:09:47.267

您在没有 () 的情况下调用了 penup。和

```
turtle.penup() 
```

这会奏效。

这里的其他人这么说，但含蓄地说。试图确保清楚错字在哪里。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2015-09-29T19:34:32.377

不，应该是这样的：

```
turtle.up()         # This a method call
turtle.goto(0,50)   # Part of the method call 
```

# c++ - 计数函数无限循环。怎么修？

> ID：15602193
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:16:53.807
> 
> 标签：c++, loops, infinite

这是我的代码中的一个函数，我确信计数循环是导致我的程序中断的原因。

第一个打印语句将返回代码中前面设置的数字，但它从不打印下一个打印语句`hello`。

我不知道为什么它不起作用。有人能帮我吗？

```
//Function Declaration
int calc_digits(int number)
{
 //Local Declaration
  int count = 0; // the times the loop has ran

  printf("%d", number);
  fflush(stdout);

  while (number != 0);
   {
     number /=  10;
     count++;
   }
 printf("hello");
 fflush(stdout);
 return(count);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T18:19:43.130

这是错误：

```
while (number != 0); 
```

你的while循环在这里结束:-)

`;`您应该从此行中删除。

# google-chrome-extension - 在历史搜索中通过消息发送响应

> ID：15602194
> 
> 赞同：0
> 
> 时间：2013-03-24T18:16:56.670
> 
> 标签：google-chrome-extension

我一直在尝试在后台页面发送搜索历史并将响应发送回首页。我正在使用消息解析。搜索历史记录后，我无法发回回复。

---------background.js-------------

```
var SECONDS_PER_WEEK = 1000 * 60 * 60 * 24 * 7;

chrome.extension.onMessage.addListener(
 function(request, sender, sendResponse) {
    if(request === "getHistory"){
        var value = getHistory();
        console.log("Response" , value);
        sendResponse(value);    
} 
} 
```

);

```
function getHistory(){
var current_time = new Date().getTime();
var timeToFetch = current_time - SECONDS_PER_WEEK;
return chrome.history.search({
        'text' : '',
        'startTime' : timeToFetch
    },
    function(resp){
        return resp;
}); 
```

}

问题本身就在这里，因为在记录时我得到“未定义”作为响应。谁能指导我解决问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:26:11.527

大多数`Chrome.*`API 函数都是异步的，因此请尝试这样做：

**背景.js**

```
var SECONDS_PER_WEEK = 1000 * 60 * 60 * 24 * 7;

chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
  if(request === "getHistory"){
    getHistory(sendResponse);
    return true;
  } 
});

function getHistory(sendResponse){
  var current_time = new Date().getTime();
  var timeToFetch = current_time - SECONDS_PER_WEEK;
  chrome.history.search({
    'text' : '',
    'startTime' : timeToFetch
  },
  function(resp){
    console.log("Response: " + resp);
    sendResponse(resp);
  });
} 
```

# ios - iOS iPad 如何使用 UIActionSheet 创建 UIPopoverController？

> ID：15602197
> 
> 赞同：0
> 
> 时间：2013-03-24T18:17:07.023
> 
> 标签：ios, objective-c, ipad, uipopovercontroller, uiactionsheet

我正在将我的一个 iPhone 应用程序重新制作`UIActionSheet`成一个 iPad 应用程序，并**希望将操作表添加到** `UIPopoverController`. 我知道这应该不会太难，但我对整个 popover 设计很陌生。有我可以看看的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:42:39.560

您不需要在 Popover 视图中添加它。UIActionSheet 通常包裹在 iPad 的 Popover 视图中

# dynamics-crm-2011 - 等待日期字段的工作流程

> ID：15602203
> 
> 赞同：3
> 
> 时间：2013-03-24T18:18:02.557
> 
> 标签：dynamics-crm-2011

如何告知工作流等到特定日期或日期字段？
它适用于超时等于日期，但我更愿意使用等待，直到处理时间在日期或之后。

当我尝试这个时，工作流程被推迟到我们远古的祖先因年老去世；如果我输入日期字段而不是特定日期（这是最终目标），也是一样的：
![在此处输入图像描述](../Images/227b2d6f9832b6cbc39aed91431630e7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-14T02:45:31.243

You want to consider what is considered a "timeout" for the desired behavior. The following links provide some more context.

Also, unless you have a really specific use case for using a specific date (like year end deadlines or processing) -- you'll probably want to use a datetime field on an entity as the basis for the right side of the comparison. You can always use the dialog on the right to choose a fixed date/time before or after any of the entity datetime fields.

![Detail screen for Timeout wait condition.](../Images/b4a0f74272dc7c3956a78e5c108b8923.png)

[http://social.technet.microsoft.com/wiki/contents/articles/11291.microsoft-dynamics-crm-2011-workflows-wait-and-timeout.aspx](http://social.technet.microsoft.com/wiki/contents/articles/11291.microsoft-dynamics-crm-2011-workflows-wait-and-timeout.aspx)

[http://www.powerobjects.com/blog/2012/11/06/multiple-waiting-workflows-wait-conditions-and-timeouts/](http://www.powerobjects.com/blog/2012/11/06/multiple-waiting-workflows-wait-conditions-and-timeouts/)

[http://www.dynamicscrmtrickbag.com/2009/07/12/waits-timeouts/](http://www.dynamicscrmtrickbag.com/2009/07/12/waits-timeouts/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:50:05.857

是的，每次检查工作流时都会使用该字段的当前值。

相关：[CRM2011 工作流程：如果工作流程条件中使用的字段在工作流程启动后更新，会发生什么情况？](https://stackoverflow.com/questions/11867800/crm2011-workflow-what-happens-if-the-field-which-is-used-in-the-condition-of-th/11870836#11870836)

# c# - 在 EWL 中，如何在使用不同查询参数导航到同一页面时清除滚动位置？

> ID：15602205
> 
> 赞同：1
> 
> 时间：2013-03-24T18:18:17.523
> 
> 标签：c#, navigation, scroll, enterprise-web-library

我在 MyPage.aspx?questionNumber=1 上，我正在导航到 MyPage.aspx?questionNumber=2。我正在使用此代码创建两者之间的导航：

```
EwfUiStatics.SetContentFootActions( new ActionButtonSetup( "Next",
                                                                           EwfLink.Create(
                                                                               new Info( es.info, new OptionalParameterPackage { QuestionNumber = info.QuestionNumber + 1 } ),
                                                                               new ButtonActionControlStyle() ) ) ); 
```

请注意，我正在使用“新信息”并重新使用实体的信息对象。也许我应该改用 GetInfo 或其他东西。

当我进入下一个问题时，我被滚动到页面的一半。我想在顶端。如何强制清除滚动位置（或者更一般地说，如何指定 info 对象，以免上一页出现不希望的结转）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:57:19.613

您导航的方式（包括是否重用`Info`对象）对保留的内容没有影响。即使是这样的（在 a 中`DataModification`）也会产生与您看到的相同的结果：

```
parametersModification.QuestionNumber += 1; 
```

目前，EWL 不支持在页内导航后选择要保留的状态。但特别是对于滚动位置，您可以覆盖`EwfPage.scrollPositionForThisResponse`以获得您想要的。`ScrollPosition.TopLeft`只要页面从不回发您*想要*保留滚动位置的页面，您就可以无条件返回。

# c - 比较高值和低值以调用函数

> ID：15602214
> 
> 赞同：0
> 
> 时间：2013-03-24T18:19:14.237
> 
> 标签：c, function, structure

我想将温度传感器中的电流与我在程序中使用结构设置的上限值进行比较。如果温度传感器的值超过当前的上限我只想`printf`声明。

`printf`这段代码有什么问题，无论当前温度是多少，它都不会打印出语句。请假定所有必要的头文件、定义等都在程序中说明。

它作为一个整体工作正常，但我不明白为什么我不能得到一个简单的`printf`命令来显示！请假设所有需要的定义都已经做出，并且所有`typedef`的 s 都相应地做出了。

这是我的结构

```
struct temperatureChannel_t { //set a structure that encompasses all of the follow elements in an array
    temperature_t temperatureArray;
    temperature_t temperatures[MAXSAMPLES];
    temperature_t currentTemperature;
    temperature_t lowLimit;
    temperature_t highLimit;
    temperature_t minTemperature;
    temperature_t maxTemperature;

};

struct temperatureChannel_t temperatureChannel[MAXCHANNELS]; 
```

这是我如何初始化当前上限

```
void initializeTemperatureSubsystem()
{
    currentInsertionPoint = 0;
    for(int chID = 0; chID < MAXCHANNELS; chID++)
    {
            srand(time(NULL));
            for(int i = 1; i < MAXSAMPLES; i++)
            {   
                    temperatureChannel[chID].temperatures[i] = rand()%100;
            }
            temperatureChannel[chID].lowLimit = 50;
        temperatureChannel[chID].highLimit = 100;
        temperatureChannel[chID].currentTemperature = 75;

        averageIsValid = FALSE; //NEW line  
    }

} 
```

这是我设置当前温度的方式，首先调用函数

```
setCurrentTemperature(CH1, temperatureSensor1Reading); 
```

然后函数

```
temperature_t setCurrentTemperature(int channelID, temperature_t temperature)
{
    return temperatureChannel[channelID].currentTemperature;
} 
```

首先，我使用我正在使用的当前频道调用该函数

```
compareHighLimit(CH1); 
```

**然后这是不会打印出 printf 命令的函数**

```
void compareHighLimit (int channelID)
{
    if (temperatureChannel[channelID].currentTemperature > temperatureChannel[channelID].highLimit)
            printf("you have activated the high alarm!!");  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:26:46.237

您的 set temp 函数实际上并未设置值：

```
temperature_t setCurrentTemperature(int channelID, temperature_t temperature)
{
    // you need to set the data here, not just return the existing  value
    return temperatureChannel[channelID].currentTemperature;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:27:28.833

好像你从来没有设置过温度。你说你打电话

```
setCurrentTemperature(CH1, temperatureSensor1Reading); 
```

我认为，这应该将`CH1`' 的温度设置为`temperatureSensor1Reading`。然而，这个函数似乎并没有改变温度：

```
temperature_t setCurrentTemperature(int channelID, temperature_t temperature)
{
    return temperatureChannel[channelID].currentTemperature;
} 
```

看来您可能混淆了`setCurrentTemperature`and的代码`getCurrentTemperature`？

# android - 我如何在我的 android 应用程序中实现加载一堆图像

> ID：15602217
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:19:37.843
> 
> 标签：android

我正在尝试实现一个从服务器加载一堆图像（如谷歌图像加载）的应用程序。通过使用哪个概念我可以实现这个，我试过谷歌没有找到解决方案给我很好的建议和任何例子或链接谢谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:36:38.387

使用列表视图或网格视图来显示图像。

膨胀您的自定义布局并在列表视图或网格视图中显示图像。

您可以使用[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) Universal Image Loader 从 MediaStore 或网络加载图像。使用缓存。基于延迟加载，但具有更多配置选项。

在您的适配器构造器中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "UniversalImageLoader/Cache");

// Get singletone instance of ImageLoader
imageLoader = ImageLoader.getInstance();
// Create configuration for ImageLoader (all options are optional)
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
          // You can pass your own memory cache implementation
         .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
         .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
         .enableLogging()
         .build();

// Initialize ImageLoader with created configuration. Do it once.
imageLoader.init(config);
options = new DisplayImageOptions.Builder()
.showStubImage(R.drawable.stub_id)//dummy image
.cacheInMemory()
.cacheOnDisc()
.displayer(new RoundedBitmapDisplayer(20))
.build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
  imageLoader.displayImage(imageurl, image,options); 
```

您也可以使用[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)。还使用缓存。

还可以在 listview 或 grdiview 中使用 ViewHolder。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

对于无尽列表，您可以使用常用的无尽列表。[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)。

# wordpress - ShareThis 将 http 和 https 视为不同的页面

> ID：15602221
> 
> 赞同：1
> 
> 时间：2013-03-24T18:19:47.293
> 
> 标签：wordpress, social, sharethis

我们最近从[http://www.domain.com](http://www.domain.com)转到[https://www.domain.com](https://www.domain.com)以提供更安全的在线环境。这样做的部分原因是为了允许现场捐赠。

我们使用名为 ShareThis ( [www.sharethis.com](http://www.sharethis.com) ) 的社交分享工具。在过去的一年里，我们的主页收到了数千个赞和“ShareThis”点击。不幸的是，当更改为 https 时，所有这些现在都消失了。

这个问题有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T05:07:03.940

您可以自定义传递给小部件的 URL。将 http URL 传递给它，这就是共享的内容，这就是您将获得的计数..

我编写了 ShareThis 小部件，因此请告诉我这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T23:21:58.600

我看到两个选项：

1) 从 https:// 改回 http://

2) 要求公司在他们的数据库中更新您的网站和/或更新他们的软件以识别[http://www.example.com](http://www.example.com)和[https://www.example.com](https://www.example.com)是同一个网站。

因此，如果您愿意/能够切换回 http://，这是两个选项，否则，请忽略选项 1。

# jsf - 使用 p:commandButton 传递字符串参数

> ID：15602224
> 
> 赞同：0
> 
> 时间：2013-03-24T18:20:05.257
> 
> 标签：jsf, jsf-2

我想使用 notificationUpdate 函数发送到两个参数。我能够成功传递 p.email，但是当我尝试将状态作为字符串发送时，它被传递为 null。

```
<p:commandLink value="Views"
                                    action="#{statusBean.update(p.statusId)}" ajax="true"
                                    style="text-decoration:none;color:white;" update=":statusBlock" >
                                    <f:actionListener binding="#{notificationBean.notificationUpdate(p.email,status)}" />
</p:commandLink> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:34:02.320

如果您的意思是要将“状态”字符串作为值发送，请尝试按以下方式发送：

```
<f:actionListener binding="#{notificationBean.notificationUpdate(p.email,'status')}" /> 
```

# php - 输入密码后的 PHP/MYSQL 内联编辑

> ID：15602226
> 
> 赞同：0
> 
> 时间：2013-03-24T18:20:07.803
> 
> 标签：php, mysql, inline, editing

我想创建简单的 CMS，允许就地编辑网站（内联编辑）。

我做了什么：

1.  PHP 和 MySQL 的登录面板
2.  使用内联编辑器 BootStrap WyswiHTML5 编辑页面
3.  通过 WyswiHTML5 从 MySQL 完全保存和读取

但是，现在我们有一个站点，它只为普通用户从 MySQL 读取表。第二个是镜像站点优先，添加了 BootStrap WyswiHTML5，管理员可以首先更改站点内容。

所以非常烦人的是我必须有镜像站点......我知道如果我们去 url: [http://example.com/admin](http://example.com/admin)，我们有一个登录表单。如果密码正确，则将我们重定向到第一页（也是唯一一个），但有一些价值。

在这个站点上将有一个 if 函数，如果我们登录，则启用编辑器。

在这里写很简单，但我不知道该怎么做。也许更有经验的 StackOverflow 成员可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:26:52.310

为什么不用 PHP 实现登录检查？

登录后将登录状态保存在 PHP $_SESSION 变量中。

在常规网站上检查此变量。如果管理员已登录，您可以打印出您所见即所得的 HTML 代码，进行页面重定向，或任何您喜欢的。

阅读：[http ://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)

# entity-framework - Sql Azure 连接字符串错误

> ID：15602227
> 
> 赞同：0
> 
> 时间：2013-03-24T18:20:16.833
> 
> 标签：entity-framework, azure-sql-database

我正在尝试使用门户仍然提供的 ADO.net 连接来连接到 Sql Azure。它的格式是

var 连接字符串 =

“服务器=tcp:abcdefghij.database.windows.net,1433;数据库=[myDatabase];用户 ID=[myName]@abcdefghij;密码=[]myPassWord;Trusted_Connection=False;Encrypt=True;连接超时=30;”

当我将此连接字符串传递给 DbContext 构造函数时，它会失败。错误信息是

“'System.Data.Entity.ModelConfiguration.Utilities.TypeExtensions' 的类型初始化程序引发了异常。”

任何想法可能是什么问题？

谢谢

马丁

# java - 覆盖paintComponent

> ID：15602235
> 
> 赞同：2
> 
> 时间：2013-03-24T18:21:20.770
> 
> 标签：java, swing, jpanel, paintcomponent, mouselistener

好的，所以在过去的 26 小时里，我一直试图通过指南和在线帮助来解决这个问题，但没有成功。

我想要做的就是在用户单击 PaintPanel 时画一个椭圆形请有人帮忙，这样我就可以睡觉了：P

![屏幕](../Images/c8356032b7e1c5d096bfff147425071f.png)

在 PaintApplet 类中：

```
 private void PaintPanelMouseClicked(java.awt.event.MouseEvent evt) {                                        
    // TODO add your handling code here:
    if(FillRadioButton.isSelected())
    {
    PaintPanel.setBackground(JColor.getColor());
   PaintPanel.repaint();
    }
    if(BrushRadioButton.isSelected())
    {
         Point ComponentPoint = PaintPanel.getLocationOnScreen();
         PaintPanel.add(new Painter(ComponentPoint));
    }
} 
```

画家班：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JFrame;
import javax.swing.JPanel;
 import java.awt.*;

public class Painter extends JPanel{

Point  Component;

public Painter(Point Com)
{
    Component = Com;
}

public void paintComponent(Graphics g) 
{

        super.paint(g);
      Point CursorPoint=   MouseInfo.getPointerInfo().getLocation(); //gets cursorpoint

       int ComPX =  Component.x;
        int ComPY =  Component.y;
        int CurPX =  CursorPoint.x;
        int CurPY =  CursorPoint.y;
        int FinalX = CurPX - ComPX;
        int FinalY =  CurPY - ComPY;

       g.drawOval(FinalX, FinalY, 20, 20);

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:30:28.400

不要打电话

```
super.paint(g); 
```

内`paintComponent`。这将导致油漆链机制中的无限循环。相反，你需要

```
super.paintComponent(g); 
```

为了获得更好的帮助，请尽快考虑发布[SSCCE](http://sscce.org/)

# ios - 第一次地图头无处

> ID：15602238
> 
> 赞同：1
> 
> 时间：2013-03-24T18:21:33.420
> 
> 标签：ios, xcode, map, coordinates

我将地图放入我的 iOs 应用程序并以这种方式进行设置：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    CLLocationCoordinate2D cord = {.latitude = 44.508473, .longitude =  11.375828};

    [self.myMap setRegion:MKCoordinateRegionMake(cord, MKCoordinateSpanMake(.005, .005)) animated:YES];

    AddressAnnotation * annotazione = [[AddressAnnotation alloc] init];

    [annotazione setCoordinate:cord];
    [self.myMap addAnnotation:annotazione];
} 
```

和 AddressAnnotation.m：

```
- (void)setCoordinate:(CLLocationCoordinate2D)coord {
    coordinate = coord;
} 
```

它可以工作，但当我第一次打开地图视图时，它会显示南极海附近的一个区域（针头指向坐标，但地图显示南极海域），关闭并重新打开地图视图时，它准确地显示了我的图钉。

如何在第一次打开时显示在 Pin 上放大的地图？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:21:35.867

这段代码没有任何问题。我可能只是`coordinate`为您定义一个属性`AddressAnnotation`，让编译器合成适当的设置器并摆脱自定义设置器，尽管这可能与您描述的问题无关......这样做更容易，它确保注释`coordinate`将符合 KVO 等。

我可能会建议您将视图控制器定义为地图视图的委托，然后实现`regionDidChangeAnimated`：

```
- (void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
    NSLog(@"%s %f, %f %d", __FUNCTION__, mapView.region.center.latitude, mapView.region.center.longitude, animated);
} 
```

了解`region`正在设置的内容可能很有用，也许您可​​以对正在发生的事情进行逆向工程。

但是，最重要的是，问题与您在问题中包含的代码无关，而且问题无疑在于其他地方。

* * *

通过在您的项目中执行此操作，我看到了以下日志：

```
2013-03-30 23:11:12.326 iBo[25408:c07] -[POIMapController mapView:regionDidChangeAnimated:] -47.422141, 0.000000 0
2013-03-30 23:11:12.328 iBo[25408:c07]-[POIMapController mapView:regionDidChangeAnimated:] 44.508473, 11.375828 0
2013-03-30 23:11:12.328 iBo[25408:c07] -[POIMapController mapView:regionDidChangeAnimated:] -47.422141, 0.000000 0
2013-03-30 23:11:12.329 iBo[25408:c07] -[POIMapController mapView:regionDidChangeAnimated:] -47.422141, 0.000000 0

```

因此，显然您正在设置区域，但是在那之后还有其他东西正在重置区域。玩了一下，我发现这种行为只在使用自动布局时才会表现出来。如果您关闭自动布局，这种行为就会消失，并且会像您期望的那样工作。

或者，我注意到，如果您将代码移出`viewDidLoad`（在视图创建过程中相当早的时间（在创建视图之后，但在它们出现之前）将区域设置出来）并将其放入`viewDidAppear`，它可以工作。

# java - Java 类在 Linux 服务器中消耗大量内存？

> ID：15602241
> 
> 赞同：1
> 
> 时间：2013-03-24T18:21:42.857
> 
> 标签：java, linux, vps

我正在研究一种 SMTP 协议，我用 java 制作并成功运行。它在我的笔记本电脑中消耗了大约 20 到 30 MB。后来我决定让协议在互联网上上线。我购买了服务器（VPS），域。这让我付出了很多。但是当我试图在该服务器上运行我的程序时，我感到非常震惊，以至于我运行的每个类的程序消耗了大约 800 到 900 MB。我认为这可能是我的编程错误，我尝试了很多从问题中恢复，但我不能。后来我的一个朋友建议我在同一台服务器上测试一个简单的 Hello word 程序，我非常震惊，甚至那个程序也占用了我总内存的 900 MB。

会是什么问题？是这些服务器的问题，还是它们的操作系统和内核版本的问题？是带有 Linux 内核还是较旧的 linux 内核的 JVM 的问题。我什至尝试过使用较旧的 JVM，但没有用。:(

我尝试了大多数流行的 Linux 风格，但它的工作原理相同，并且在所有 Linux 风格上都存在完全相同的问题。在所有情况下都在吃巨大的内存。（他们都有 Linux 内核 2.6.xx）

但它工作得非常顺利，并且消耗了我笔记本电脑中的预期内存。（大约 30 到 50 Mb）。我在笔记本电脑上使用 Linux。但不同的是我的内核在 3.1.xx 以上。可能是问题吗？我对我的服务器的行为感到非常失望，并且在其中损失了很多钱。请任何人告诉我可能的解决方案，是Linux内核的问题还是我编程中的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:25:25.750

Is your laptop running Windows? I'll assume that the answer is yes. The memory values you see reported in Windows Task Manager are not what Linux reports for total resident memory.

I don't believe that Hello World is taking up 900 MB. If it is, that tells me that the JVM memory is being reported, not your app.

Are you running this app on a Java EE app server like Tomcat or JBOSS? That will make a very big difference indeed.

The best advice is to search SO for other questions that showed how to use Linux tools like nmap to figure out where memory is being consumed.

# asp.net - 如何为 div 元素设置边框以进行文本格式设置？

> ID：15602249
> 
> 赞同：0
> 
> 时间：2013-03-24T18:22:20.247
> 
> 标签：asp.net, html, css

我正在制作一个评论部分页面，它允许用户发表评论。我的布局需要帮助才能将评论显示到转发器控件中。我曾经将评论放在item的div元素和repeater的alternateitem模板中。因此，如果用户输入的单词或段落过多，则注释将直接沿着 div 元素中的行进行。我想要的是限制文本将停止并继续到 div 元素的下一行。我该怎么做？最好的方法是什么？有什么建议吗？这是我用来插入评论的中继器控件的布局。

```
<asp:Repeater ID="Repeater1" runat="server" DataSourceID="SqlDataSource1">

<HeaderTemplate>
</HeaderTemplate>  
<ItemTemplate>  
<tr>
<td >
<div style="background-color:#FFFF66" >
<%# Eval("Name") %> Says...
<%# Eval("Comments") %>
</div>
</td>
</tr> 
</ItemTemplate> 
<AlternatingItemTemplate>  
<tr>
<td >
<div style="background-color:#CCFF33" >
<%# Eval("Name")%> Says...
<%# Eval("Comments")%>
</div>
</td>
</tr> 
</AlternatingItemTemplate>  
<SeparatorTemplate >
<br />   
</SeparatorTemplate>  
<FooterTemplate>
</FooterTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:45:42.143

你可以这样做来设置 div 边框

```
 <div style="border:black 2px">

        <!-- content goes here -->
     </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-05T18:19:32.403

请参阅[有没有办法在 div 中自动换行长单词？](https://stackoverflow.com/questions/1638223/is-there-a-way-to-word-wrap-long-words-in-a-div/1638824#1638824)

我在 div 中使用中继器时遇到了同样的问题，我在那里找到了答案。

/* 来源：[http](http://snipplr.com/view/10979/css-cross-browser-word-wrap) ://snipplr.com/view/10979/css-cross-browser-word-wrap */

```
.wordwrap { 
   white-space: pre-wrap;      /* CSS3 */   
   white-space: -moz-pre-wrap; /* Firefox */    
   white-space: -pre-wrap;     /* Opera <7 */   
   white-space: -o-pre-wrap;   /* Opera 7 */    
   word-wrap: break-word;      /* IE */
} 
```

# c - C中对象的函数指针

> ID：15602250
> 
> 赞同：2
> 
> 时间：2013-03-24T18:22:22.530
> 
> 标签：c, arrays, object, function-pointers

```
typedef struct node{
        int term;
        struct node *next;
}node;
typedef void(*PTR )(void *);
typedef void(*PTR1)(void *,int,int);
typedef int(*PTR2)(void *,int);
typedef void(*PTR3)(void *,int);
typedef void(*PTR4)(void *,void *,void *);

typedef struct list{
      node *front,*rear;
      PTR3 INSERT;
      PTR *MANY;
      PTR DISPLAY,SORT,READ;
      PTR4 MERGE;
}list;

void constructor(list **S)
{
    (*S)=calloc(1,sizeof(list));
    (*S)->front=(*S)->rear=NULL;
    (*S)->INSERT=push_with_value;
    (*S)->READ=read;
    (*S)->SORT=sort;
    (*S)->DISPLAY=display;    
    (*S)->MERGE=merger;    

    (*S)->MANY=calloc(2,sizeof(PTR));
    (*S)->MANY[1]=read; 

}
int main() 
{
    list *S1,*S2,*S3;
    constructor(&S1);
    constructor(&S2);
    constructor(&S3);

    S1->MANY[1](S1);
    S1->SORT(S1);
    S1->DISPLAY(S1);
    return 0;
} 
```

所有此类函数中的`void *`参数都被类型转换为`list *`函数内部。有什么方法可以`S1->READIT;`通过将 更改`MANY[1]`为另一个名称来调用`READ_IT;`吗？

我打算创建一个通用头文件，以便我可以将它用于我的所有程序。由于我不知道需要多少个函数指针，我打算为每个函数指针类型创建一个动态数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:02:56.217

```
typedef struct list{
  node *front,*rear;
  PTR3 INSERT;
  PTR READIT;
  PTR DISPLAY,SORT,READ;
  PTR4 MERGE;
}list; 
```

...

```
(*S)->READIT = read; 
```

...

```
S1->READIT(S1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:57:56.507

[查看此处](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/include/linux/list.h)定义的（双向链接）列表的 Linux 内核实现（以及以下/引用的文件）。它们到处都在使用。大多数操作在宏中完成，例如在列表的所有节点上运行操作。

如果您要定义的内容变得过于复杂，请退后一步，寻找更简单的替代方案。不要事先一概而论；如果不使用泛化，那就是浪费；如果以后需要一些（稍微）不同的东西，这是一个糟糕的匹配，需要变通办法甚至重新实现。

看看 C++ STL [list](http://www.cplusplus.com/reference/list/list/)公开的接口，这些人对这个问题进行了长时间的思考（尽管在不同的环境中）。

或者，如果您想要完全成熟的 OOP，就硬着头皮使用 C++。

# c# - 已经与其底层 RCW 分离的 COM 对象不能使用？

> ID：15602251
> 
> 赞同：0
> 
> 时间：2013-03-24T18:22:25.767
> 
> 标签：c#, ms-access

抛开盐和哈希辩论。并且请仅在您知道答案的情况下回复。

我正在尝试创建一种方法，在该方法中，用户输入其凭据，并在登录和注销时自动记录日期和时间。

我有两个问题

问题 1 - 我创建了一个简单的登录和注销方法。当我包含日期和时间代码时，我注意到这些是为所有用户记录和存储的。我目前有两个用户。因此，如果一个用户登录的日期和时间被记录下来并为另一个用户盖章。

问题 2 - 第二个问题是主题标题说，当 Update 命令参数与 Select 使用相同的方法时，我收到一条错误消息。

如果有人可以帮助我，我将不胜感激这两个问题。希望这只是一个小问题？如果省略日期和时间，那么如果有人可以帮助我进行多登录功能，我将不胜感激。

访问 2003 ~ 两个表。表 1 - 命名 LoginTable 表 2 - 命名 LoginLogTable

登录表

> 字段名数据类型

```
UserName   Text
Password   Text

LoginLogTable
FieldName     DataType
UserNameID    Text
UserName      Text
LoggedIn      Date/Time
LoggedInTime  Date/Time     

 private void btnLogin_Click(object sender, EventArgs e)
 {
    using (var command = myCon.CreateCommand())
        {
            command.CommandText = "select UserName, Password from LoginTable where WHERE STRCOMP(UserName, @UserName,0) = 0 AND STRCOMP(Password, @Password,0)=0";
           command.Parameters.AddWithValue("UserName", (txtUserName.Text));
            command.Parameters.AddWithValue("Password", (txtPassword.Text));
            myCon.Open();

            var reader = command.ExecuteReader();
            {
                if (reader.HasRows)
                {
                    MessageBox.Show("Login Successful");
                    Form2 frm = new Form2();
                    frm.Show();
                    while (reader.Read())
                    {
                      txtUserName.Text = reader["UserName"].ToString();
                      txtPassword.Text = reader["Password"].ToString();
                    }

                    OleDbCommand cmd = new OleDbCommand();
                    cmd.Connection = myCon;

                     cmd.CommandText = "UPDATE [LoginLogTable] SET [LoggedInDate] = ?, [LoggedInTime] = ?";
                      cmd.Parameters.AddWithValue("@LoggedInDate", DateTime.Now.ToShortDateString());
                    cmd.Parameters.AddWithValue("@LoggedInTime", DateTime.Now.ToString("HH:mm"));
                    cmd.ExecuteNonQuery();
                    myCon.Close();

                }
            else MessageBox.Show("Login Falied");
            }

        }
           myCon.Close();
           myCon.Close(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:45:25.530

您的查询中没有任何条件`update`，因此它将更新表中的所有记录。添加条件以仅更新一条记录。我不知道你的桌子上有什么，但像这样：

```
cmd.CommandText = "UPDATE [LoginLogTable] SET [LoggedInDate] = ?, [LoggedInTime] = ? where UserName = ?";
cmd.Parameters.AddWithValue("LoggedInDate", DateTime.Now.ToShortDateString());
cmd.Parameters.AddWithValue("LoggedInTime", DateTime.Now.ToString("HH:mm"));
cmd.Parameters.AddWithValue("UserName", txtUserName.Text); 
```

您应该在执行第二个命令之前关闭并处理第一个数据读取器和命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:43:25.007

我想您在 LoginLogTable 中需要一个 UserName 列并更新类似这样的表

```
UPDATE [LoginLogTable] SET [LoggedInDate] = ?, [LoggedInTime] = ? WHERE UserName = 'YourUserName'. 
```

其次，我相信您在这里不需要阅读器。您可以使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)代替 Reader。第二个命令无法运行，因为 Reader 处于打开状态。

# javascript - 如何从 2 个单元格中添加小时数？

> ID：15602253
> 
> 赞同：0
> 
> 时间：2013-03-24T18:22:38.067
> 
> 标签：javascript, google-apps-script, google-sheets

我有一些谷歌电子表格日志，我在其中以小时格式 [[HH]:MM:SS] 存储一些活动的持续时间。电子表格可以毫无问题地添加此类单元格。但是，当我尝试通过 Google 脚本添加它们时，我得到了一些垃圾。我发现 Date() 对象是为此类单元格隐式创建的，但我找不到该值类型的 API。

我知道我可以通过将数据乘以 24 将数据转换为“小时整数”，但这是一个令人讨厌的解决方法，因为它需要复制许多单元格。我更想要一个允许在谷歌脚本本身中做到这一点的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T22:08:53.840

这是一个可以解决问题的工作函数。

我首先尝试将其格式化为日期，但 36 小时并不是真正的标准！所以我做了一点数学:-)）

要使其正常工作，您应该在某处设置一个带有值的单元格`00:00:00`，我们将在电子表格标准中将其用作参考日期。在我的代码中它是单元格`D1`（参见代码中的注释，SS 中的参考日期是 1900 年，而 Javascript 中的参考日期是 1970 年……这就是为什么它是以毫秒为单位的 70 年负常数……）

这是代码，下面是测试表 + 记录器的屏幕截图。修改此代码以使其成为一个将单元格值作为参数并将结果作为数组返回的函数是一个好主意，例如（[h, m,s] 或类似的东西），这段代码只是为了展示它是如何工作的。

```
function addHoursValues() {
  var sh = SpreadsheetApp.getActive()
  var hours1 = sh.getRange('A1').getValue();
  var hours2 = sh.getRange('B1').getValue();
  var ref = sh.getRange('D1').getValue().getTime();
//var ref = -2209161600000 // you could also use this but it would be less obvious what it really does ;-)
Logger.log(ref+' = ref');
  var h1 = parseInt((hours1.getTime()/3600000)-ref/3600000);
  var h2 = parseInt((hours2.getTime()/3600000)-ref/3600000);
Logger.log(h1+' + '+h2+' = '+(h1+h2))
  var m1 = parseInt((hours1.getTime()-h1*3600000-ref)/60000);
  var m2 = parseInt((hours2.getTime()-h2*3600000-ref)/60000);
Logger.log(m1+' + '+m2+' = '+(m1+m2))
  var s1 = parseInt((hours1.getTime()-h1*3600000-m1*60000-ref)/1000);
  var s2 = parseInt((hours2.getTime()-h2*3600000-m2*60000-ref)/1000);
Logger.log(s1+' + '+s2+' = '+(s1+s2))
  var ts=s1+s2
  var tm=m1+m2
  var th=h1+h2
    if(ts>59){ts=ts-60;tm++};
    if(tm>59){tm=tm-60;th++}
Logger.log('sum = '+th+':'+tm+':'+ts)
} 
```

![在此处输入图像描述](../Images/1e52b7fe396d786e43df696b459685ed.png)

![在此处输入图像描述](../Images/37b7e0a37374209f29de9896bb2e40c6.png)

* * *

**编辑：**这里有 2 个“功能”版本，带有相应的测试功能，展示了如何使用它

```
function getHMS(hrs) {
  var t = hrs.getTime()/1000;
  var ref = -2209161600;
  var h = parseInt((t-ref)/3600);
  var m = parseInt((t-h*3600-ref)/60);
  var s = parseInt(t-h*3600-m*60-ref);
  return[h,m,s];// returns an array of 3 discrete values
}

function testHMS(){
  var sh = SpreadsheetApp.getActive();

  var hours1 = sh.getRange('A1').getValue();
  var hours2 = sh.getRange('B1').getValue();

  var sumS = getHMS(hours1)[2]+getHMS(hours2)[2];// add seconds
  var sumM = getHMS(hours1)[1]+getHMS(hours2)[1];// add minutes
  var sumH = getHMS(hours1)[0]+getHMS(hours2)[0];// add hours
    if(sumS>59){sumS=sumS-60 ; sumM++}; // handles values >59
    if(sumM>59){sumM=sumM-60 ; sumH++}; // handles values >59
  Logger.log(sumH+':'+sumM+':'+sumS);
} 
```

或者

```
function addHMS(hrs1,hrs2) {
  var t1 = hrs1.getTime()/1000;
  var t2 = hrs2.getTime()/1000;
  var ref = -2209161600;
  var h = parseInt((t1-ref)/3600)+parseInt((t2-ref)/3600);
  var m = parseInt((t1-parseInt((t1-ref)/3600)*3600-ref)/60)+parseInt((t2-parseInt((t2-ref)/3600)*3600-ref)/60);
  var s = parseInt(t1-parseInt((t1-ref)/3600)*3600-parseInt((t1-parseInt((t1-ref)/3600)*3600-ref)/60)*60-ref)
         +parseInt(t2-parseInt((t2-ref)/3600)*3600-parseInt((t2-parseInt((t2-ref)/3600)*3600-ref)/60)*60-ref);
    if(s>59){s=s-60 ; m++}; // handles values >59
    if(m>59){m=m-60 ; h++}; // handles values >59
  return[h,m,s];// returns sum in an array of 3 discrete values
}

function othertestHMS(){
  var sh = SpreadsheetApp.getActive();

  var hours1 = sh.getRange('A1').getValue();
  var hours2 = sh.getRange('B1').getValue();
  Logger.log(addHMS(hours1,hours2));
} 
```

# jquery - 将字符串值从视图传递到仅发送 null 的控制器

> ID：15602255
> 
> 赞同：0
> 
> 时间：2013-03-24T18:22:49.207
> 
> 标签：jquery, ajax, asp.net-mvc, model-view-controller

我想向控制器发送一些数据，但我总是在控制器的参数中得到空值。我在寻找解决方案，但没有找到解决方案。请提供一些建议或帮助。

ajax 调用

```
 var submittedName = 1; 
 $.ajax(
  {
      url: '/api/monitor/Detailsfetch',
      type: "post",
      data: { 'submittedName': submittedName},
      success: function (data) {
          alert("passed");
      },
      error: function (xhr, ajaxOptions, thrownError) {
               alert(thrownError);}
  }); 
```

控制器部分

```
 [System.Web.Http.HttpPost]
  public ContentResult Detailsfetch(string submittedName)        
    {sone code here}` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:43:36.620

从评论和您提供的少量信息中，我猜您的路线设置不正确。如果您想对此进行测试（假设您没有更改默认规则）。尝试将参数重命名为 id（在控制器和 JS 中）。如果可行，那是因为您的路线未配置

在这种情况下，请参阅[此](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)以获得帮助

基本上你应该在你的`application_start`

```
RouteTable.Routes.Add(new Route {
    Url = "[controller]/[action]/[submittedName]",
    RouteHandler = typeof(MvcRouteHandler)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T13:47:17.447

在这种情况下，无法使用数据发送参数值：{'submittedName'：submittedName} 所以另一种方法是在 URL 本身中传递参数数据

```
/api/monitor/Detailsfetch/?submittedName="+somename+"", 
```

希望这可以帮助一些身体！

# c# - 在布局页面的部分视图中显示博客类别

> ID：15602257
> 
> 赞同：3
> 
> 时间：2013-03-24T18:22:58.377
> 
> 标签：c#, asp.net, asp.net-mvc

目前，我有一个部分视图，我在其中手动显示所有带有链接的博客类别。我想通过从数据库中提取来使其动态化。我不确定如何在局部视图中完成此操作。如果这样更容易，我什至愿意在实际的 _layout 页面中执行此操作。

这是我现在所拥有的。

_Categories.cshtml

```
<h2>Categories</h2>
<hr/>
<p>
    <a href="@Url.Action("Category", "Blog", new {id = 1})">ASP.Net MVC</a><br/>
    <a href="@Url.Action("Category", "Blog", new {id = 2})">Ruby on Rails</a><br/>
</p> 
```

我想动态创建这些链接，而不是硬编码。

_Layout.cshtml

```
@Html.Partial("_Categories") 
```

主要问题是部分布局没有控制器，这就是为什么我不知道如何去做。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:26:41.597

创建一个名为`ListCategories`in `BlogController`（或 new `CategoryController`）的控制器操作。`ViewBag`通过从后端数据库中查询它们，将所有类别添加到操作中

```
public ActionResult ListCategories()
{
    ViewBag.Categories = db.Categories;
} 
```

并在视图中使用`@foreach`循环来执行操作`ListCategories.cshtml`：

```
<h2>Categories</h2>
<hr/>
<p>
    @foreach(Category c in ViewBag.Categories)
    {
        <a href="@Url.Action("Category", "Blog", new { id = c.Id })">@c.Name</a><br/>
    }
</p> 
```

最后，将您`_Layout.cshtml`的指向此操作：

```
@Html.Action("ListCategories") 
// or @Html.Action("ListCategories", "CategoryController") 
```

# yahoo-api - Yahoo GeoPlanet - 查找指定国家或地区的地点

> ID：15602260
> 
> 赞同：0
> 
> 时间：2013-03-24T18:23:04.517
> 
> 标签：yahoo-api

我正在尝试确保文本搜索的结果仅为英国或爱尔兰。我的地点 REST 请求如下所示：

```
http://where.yahooapis.com/v1/places.q('Belfast')?format=json&appid=MyAppIdGoesHere 
```

URL 是否有另一个参数可以指定国家或结果必须在其中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T22:59:29.263

我不相信有办法在 GeoPlanet Web 服务调用中添加这种特殊性。支持[Filters](http://developer.yahoo.com/geo/geoplanet/guide/api_docs.html#filters)，包括`$and`允许您将两个过滤器组合在一起的过滤器，但看起来并不存在可以直接满足您的请求的组合。

作为替代方案，您可以进行 API 调用，然后过滤结果以仅将这些结果保留在匹配的国家/地区。

例如，以下是搜索“贝尔法斯特”的部分结果。检索这些结果后，您可以只保留 country=GB 的那些地方：

```
<place xmlns="http://where.yahooapis.com/v1/schema.rng"
    xml:lang="en-GB" yahoo:uri="http://where.yahooapis.com/v1/place/44544">
    <woeid>44544</woeid>
    <placeTypeName code="7">Town</placeTypeName>
    <name>Belfast</name>
    <country code="GB" type="Country" woeid="23424975">United Kingdom</country>
    <admin1 code="GB-NIR" type="Country" woeid="20070563">Northern Ireland</admin1>
    <admin2 code="GB-BFS" type="County" woeid="20071112">Belfast</admin2>
    <admin3 code="" type="Local Administrative Area" woeid="20078326">Belfast</admin3>
    <locality1 type="Town" woeid="44544">Belfast</locality1>
</place>
<place xmlns="http://where.yahooapis.com/v1/schema.rng"
    xml:lang="en-GB" yahoo:uri="http://where.yahooapis.com/v1/place/2361609">
    <woeid>2361609</woeid>
    <placeTypeName code="7">Town</placeTypeName>
    <name>Belfast</name>
    <country code="US" type="Country" woeid="23424977">United States</country>
    <admin1 code="US-ME" type="State" woeid="2347578">Maine</admin1>
    <admin2 code="" type="County" woeid="12588673">Waldo</admin2>
    <admin3/>
    <locality1 type="Town" woeid="2361609">Belfast</locality1>
</place>
<place xmlns="http://where.yahooapis.com/v1/schema.rng"
    xml:lang="en-GB" yahoo:uri="http://where.yahooapis.com/v1/place/2348154">
    <woeid>2348154</woeid>
    <placeTypeName code="7">Town</placeTypeName>
    <name>Belfast</name>
    <country code="NZ" type="Country" woeid="23424916">New Zealand</country>
    <admin1 code="NZ-CAN" type="Region" woeid="15021751">Canterbury</admin1>
    <admin2 code="" type="County" woeid="55875854">Christchurch City</admin2>
    <admin3/>
    <locality1 type="Town" woeid="2348154">Belfast</locality1>
</place>
<place xmlns="http://where.yahooapis.com/v1/schema.rng"
    xml:lang="en-GB" yahoo:uri="http://where.yahooapis.com/v1/place/2361600">
    <woeid>2361600</woeid>
    <placeTypeName code="7">Town</placeTypeName>
    <name>Belfast</name>
    <country code="US" type="Country" woeid="23424977">United States</country>
    <admin1 code="US-NY" type="State" woeid="2347591">New York</admin1>
    <admin2 code="" type="County" woeid="12589313">Allegany</admin2>
    <admin3/>
    <locality1 type="Town" woeid="2361600">Belfast</locality1>
</place> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T18:17:51.827

这可以通过使用`$and`运算符作为过滤器来实现。请注意，`$and`运算符可以组合两个不同的过滤器，在您的情况下，您希望在指定地点（英国或爱尔兰）内进行文本搜索。为此，您可以使用`.woeid`和`.q`过滤器，如下所示：

```
http://where.yahooapis.com/v1/places$and(.woeid(23424975),.q('Belfast'))?format=json&appid=YourAppIdGoesHere 
```

其中，本例中，数值为UK`23424975`的**woeid**。

# php - XML 数据到我的数据库

> ID：15602262
> 
> 赞同：0
> 
> 时间：2013-03-24T18:23:13.330
> 
> 标签：php, mysql, xml, database

自从我成为一名编码员以来已经有很长一段时间了，我正在准备一些我知道非常简单的东西。

我正在尝试访问产品的 XML 页面并将它们插入到我的数据库中。

我生成的代码给了我以下错误消息：

```
Unknown column '10074' in 'field list' 
```

10074 是第一项的产品 ID。

代码如下。

你能指出我正确的方向吗，因为它真的很接近我。

提前谢谢了！

```
<?php
   $Products = simplexml_load_file('http://atsdistribution.co.uk/feeds/xml_all_products.aspx');

$con = mysql_connect(*****);
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("catflaps_products", $con);

foreach($Products->Product as $Product)
{
$ProductID = $Product->ProductID;
$Name = $Product->Name;
$DropshipPrice = $Product->DropshipPrice;
$SRP = $Product->SRP;
$Brand = $Product->Brand;
$Xline = $Product->Xline;
$InStock = $Product->InStock;
$Stock = $Product->Stock;
$Barcode = $Product->Barcode;
$Weight = $Product->Weight;
$CategoryID = $Product->CategoryID;
$Category = $Product->Category;
$SmallImage = $Product->SmallImage;
$LargeImage = $Product->LargeImage;
$Description = $Product->Description;

mysql_query("INSERT INTO test(ProductID, Name, DropshipPrice, SRP, Brand, Xline, InStock, Stock, Barcode, Weight, CategoryID, Category, SmallImage, LargeImage, Description)
VALUES(`$ProductID`, `$Name` , `$DropshipPrice`, `$SRP`, `$Brand`, `$Xline`, `$InStock`, `$Stock`, `$Barcode`, `$Weight`, `$CategoryID`, `$Category`, `$SmallImage`, `$LargeImage`, `$Description`)")
        or die(mysql_error());

}

mysql_close($con);
// some code

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:31:22.590

您正在使用“反引号”（`）来引用您的值，因此 MySQL 将它们视为“列名”。使用常规的“单”引号 (') 应该可以解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:27:07.113

很可能是 xml 的解析。确保调用 mysql_real_escape_string 来清理数据。

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

# java - 在 Java 中验证 Diameter URI 的方法？

> ID：15602263
> 
> 赞同：0
> 
> 时间：2013-03-24T18:23:14.223
> 
> 标签：java, regex, uri, guava, diameter-protocol

我想知道是否有任何很好的简单方法可以使用 Java 验证 Diameter URI（下面的描述）？

```
Note, a Diameter URI must have one of the forms:

aaa://FQDN[:PORT][;transport=TRANS][;protocol=PROT]
aaas://FQDN[:PORT][;transport=TRANS][;protocol=PROT]

The FQDN (mandatory) has to be replaced with the fully qualified host name (or IP), the PORT (optional, default is 3868) with the port number, TRANS (optional) with the transport protocol (can be TCP or SCTP) and PROT (optional) with diameter.

Some examples of the acceptable forms are:

aaa://server.com
aaa://127.0.0.1
aaa://server.com:1234
aaas://server.com:1234;transport=tcp
aaas://[::1]
aaas://[::1]:1234
aaas://[::1]:1234;transport=tcp;protocol=diameter

Note, as shown above, if using an IPv6 address, the address must be placed in box brackets, whereas the port number (if specified), with its colon separator, should be outside of the brackets. 
```

我认为使用正则表达式执行此操作会非常混乱且难以理解，而且我看到的其他不使用正则表达式的示例看起来也很尴尬（例如[https://code.google.com/p/cipango/源/浏览/主干/cipango-diameter/src/main/java/org/cipango/diameter/util/AAAUri.java?r=763](https://code.google.com/p/cipango/source/browse/trunk/cipango-diameter/src/main/java/org/cipango/diameter/util/AAAUri.java?r=763)）。

所以想知道是否有更好的方法来做到这一点，例如像 URI 验证器库这样的东西，它采用一些规则（例如上面的 Diameter URI 的规则），然后将它们应用于一些输入来验证它？

我还查看了 Google Guava 库，看看是否有什么可以帮助的，但我看不到任何东西。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:35:37.757

由于 URI 类是不够的，而且实际上会为有效的 Diameter URI 创建异常，所以这不是一项简单的任务。

我认为reg.ex。是去这里的方式，但由于复杂性，如果你把它放在一个助手类中你可能会更好。我同意你链接到的代码看起来不太好——你可以做得更好！:)

看看下面的代码示例，我将一个正则表达式分解成各个部分，作为“记录”正在发生的事情的一种方式。

它在任何方面都不完整，它是为了符合您的示例而创建的。特别是 IP6 类型的地址需要工作。此外，您可能希望在验证中提供更多信息；就像它失败的原因一样。

但至少这是一个开始，我认为它比您链接到的代码要好得多。看起来可能有很多代码，但其中大部分实际上是打印语句和测试...... :) 此外，由于每个部分都被分解并保存为字段变量，因此您可以创建简单的 getter 来访问每个部分（如果这对你很重要）。

```
import java.net.URISyntaxException;
import java.util.Arrays;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class DiameterUri {

    private String diameterUri;
    private String protocol;
    private String host;
    private String port;
    private String[] params;

    public DiameterUri(String diameterUri) throws URISyntaxException {
        this.diameterUri = diameterUri;
        validate();
        System.out.println(diameterUri);
        System.out.println("  protocol=" + protocol);
        System.out.println("  host=" + host);
        System.out.println("  port=" + port);
        System.out.println("  params=" + Arrays.toString(params));
    }

    private void validate() throws URISyntaxException {
        String protocol = "(aaa|aaas)://";              // protocol- required
        String ip4 = "[A-Za-z0-9.]+";                   // ip4 address - part of "host"
        String ip6 = "\\[::1\\]";                       // ip6 address - part of "host"
        String host = "(" + ip4 + "|" + ip6 + ")";      // host - required
        String port = "(:\\d+)?";                       // port - optional (one occurrence)
        String params = "((;[a-zA-Z0-9]+=[a-zA-Z0-9]+)*)"; // params - optional (multiple occurrences)
        String regEx = protocol + host + port + params;
        Pattern pattern = Pattern.compile(regEx);
        Matcher matcher = pattern.matcher(diameterUri);
        if (matcher.matches()) {
            this.protocol = matcher.group(1);
            this.host = matcher.group(2);
            this.port = matcher.group(3) == null ? null : matcher.group(3).substring(1);
            String paramsFromUri = matcher.group(4);
            if (paramsFromUri != null && paramsFromUri.length() > 0) {
                this.params = paramsFromUri.substring(1).split(";");
            } else {
                this.params = new String[0];
            }
        } else {
            throw new URISyntaxException(diameterUri, "invalid");
        }
    }

    public static void main(String[] args) throws URISyntaxException {
        new DiameterUri("aaa://server.com");
        new DiameterUri("aaa://127.0.0.1");
        new DiameterUri("aaa://server.com:1234");
        new DiameterUri("aaas://server.com:1234;transport=tcp");
        new DiameterUri("aaas://[::1]");
        new DiameterUri("aaas://[::1]:1234");
        new DiameterUri("aaas://[::1]:1234;transport=tcp;protocol=diameter");
        try {
            new DiameterUri("127.0.0.1");
            throw new RuntimeException("Expected URISyntaxException");
        } catch (URISyntaxException ignore) {}
    }

} 
```

# docx - pandoc mmd_title_block 似乎无法加载

> ID：15602264
> 
> 赞同：3
> 
> 时间：2013-03-24T18:23:32.440
> 
> 标签：docx, pandoc, multimarkdown

我是 pandoc 的新手，并试图使用它将一些简单的 mmd 文件转换为 docx。这些 mmd 文件包含以下形式的 mmd 样式标题块：

```
Author: Author_name  
Title: Title_name  
Date: Date_name 
```

我更喜欢这种风格而不是 pandoc 风格的标题栏，所以我想将它们保留在 multimarkdown 风格中。pandoc 文档表明有一个扩展允许我使用它们，但是当我尝试使用该扩展时，它对输出没有影响。我尝试了许多命令的排列都无济于事，但一个示例如下所示：

```
pandoc -f markdown-pandoc_title_block+mmd_title_block -o test.docx testinput.txt 
```

如果我将标题块转换为使用 pandoc 的样式，则输出会正确地将标题块转换为生成的 Word 文件中的正确格式，因此我知道参考文件是可以的。此外，当我保持 pandoc 风格的标题栏但使用 markdown-pandoc_title_block 命令时，它会正确忽略标题栏，所以我知道问题不在于禁用 pandoc 标题栏。

关于我可能做错了什么的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:03:44.670

如果您升级到 Pandoc 1.11.1 并尝试运行以下命令，它应该可以正常工作：

```
pandoc -f markdown_mmd -t docx test.md -o test.docx 
```

它保留标题、作者和日期字段。

# opentok - 参加会议的人数

> ID：15602265
> 
> 赞同：3
> 
> 时间：2013-03-24T18:23:32.790
> 
> 标签：opentok

是否知道有多少人连接到会话？我希望实现一种机制，只允许两个人连接，如果超过两个，就会显示警报。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-19T19:24:53.780

当你得到一个 sessionConnected 事件时，你会得到一个连接数组，告诉你会话中的人数。[http://www.tokbox.com/opentok/docs/js/reference/SessionConnectEvent.html](http://www.tokbox.com/opentok/docs/js/reference/SessionConnectEvent.html)

连接后，每次有人加入会话时，您都会获得离开和加入会话的人的[ConnectionEvents](http://www.tokbox.com/opentok/docs/js/reference/ConnectionEvent.html)。

这些事件可以在任何给定时间为您提供会话中连接数的准确计数

# html - html5 video player won't play videos longer that an hour

> ID：15602268
> 
> 赞同：1
> 
> 时间：2013-03-24T18:23:41.350
> 
> 标签：html

My HTML5 video player won't play a file longer than one hour. Here is my code:

```
<video src="/Movies/MP4/Blaa.mp4" controls="controls"></video>. 
```

I am quite new to HTML5 so i am asking what the problem could be? Any answers are appreciated.

-Simon

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:37:33.990

看起来您只使用一个 mp4 文件，所以我不确定这是否会有所帮助，但我能够通过切换源文件的顺序来解决我的问题。据我所知，Chrome 能够播放 H.264 视频（通常包含在 MP4 包装器中），但无法播放 MP4 文件。我猜他们终于像他们一直说的那样[取消了对 MP4 的支持。](http://blog.chromium.org/2011/01/html-video-codec-support-in-chrome.html)

这是我的代码过去的样子：

```
<video width="640" height="360" controls>
    <source src="http://example.com/video.mp4" type="video/mp4"  />
    <source src="http://example.com/video.webm" type="video/webm" />
    <source src="http://example.com/video.ogv" type="video/ogg"  />
</video> 
```

据我了解，当浏览器尝试呈现 HTML5 视频标签时，它应该跳过它无法播放的任何源标签，并尝试播放它可以播放的第一个标签。无论出于何种原因，Chrome 目前都没有这样做。无论如何，它都在尝试播放 MP4，但失败了。

甚至“[所有人的视频](http://camendesign.com/code/video_for_everybody/test.html)”页面上的视频现在对我来说都失败了。

我的解决方案是切换源标签的顺序，使 webm 视频排在 mp4 视频之前：

```
<video width="640" height="360" controls>
    <source src="http://example.com/video.webm" type="video/webm" />
    <source src="http://example.com/video.mp4" type="video/mp4"  />
    <source src="http://example.com/video.ogv" type="video/ogg"  />
</video> 
```

到目前为止，这已经解决了这个问题。Chrome 现在可以毫无问题地播放 webm 文件，而且我测试过的所有其他浏览器似乎仍然可以正常工作。

我仍然需要测试的唯一可能的问题是，我读到 iPad 有一个错误，需要首先列出 MP4 源。我正在着手使用 iPad，看看这是否仍然是一个问题。

目前，这个解决方案解决了我的问题。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:10:11.240

问题是 chrome 目前无法播放 MP4 电影文件。Safari 是目前唯一可用的浏览器。

# c - Why the pointer's value changes in multi-thread malloc?

> ID：15602269
> 
> 赞同：-4
> 
> 时间：2013-03-24T18:23:41.647
> 
> 标签：c, multithreading, malloc

1.  Hi guys, I get a very odd problem here. Do u have any idea about the segmentation fault? Any advice would be appreciated! Thx in advance!

Test()

{

```
pMsg_node = found_bakup_msg_node();

if(pMsg_node != NULL) {
    Dprintf("#%s#%d %p\n", __FUNCTION__, __LINE__, pMsg_node); 
    ret = cp_msg_node_data(pMsg_node, pMsg_next);
} 
```

}

===================================================================

struct MSG_INFO* found_bakup_msg_node(void) { struct MSG_INFO* msg_node = NULL;

```
 msg_node = (struct MSG_INFO*)malloc(sizeof(struct MSG_INFO));
    if(msg_node != NULL) {
            memset(msg_node, 0x0, sizeof(struct MSG_INFO));

            Dprintf("#%s# %p\n", __FUNCTION__,
                             msg_node);
    }

    return msg_node; 
```

}

========================================================

---------------------------LOG 1--------------------------------

```
> header=0x923950    
>found_bakup_msg_node#alloc_bakup_count=1 0x7f6090032f70 //return from malloc() 
>cp_msg_list#561
> cp_msg_node_data#458   
>cp_msg_node_data#463 0xffffffff90032f70  0x923950  //notice here
>Segmentation fault
> robin@robin-desktop:/media/work/project/rcd$ 
```

--------------------------LOG 2 --------------------------------

```
 #cp_msg_list#566
#found_bakup_msg_node#alloc_bakup_count=180 **0x7fe6e000d5b0**
#cp_msg_node_data#464 **0xffffffffe000d5b0** 0x2154620
Segmentation fault
robin@robin-desktop:/media/work/project/rcd$ 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T23:40:30.550

你试过在gdb下运行程序吗？它通常会显示您遇到分段错误的原因，并且通常有助于学习如何使用 gdb。

# php - "View Full Site" button and cookie with PHP and jQuery Mobile

> ID：15602271
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:24:00.210
> 
> 标签：php, jquery, jquery-mobile

I have a website, with a main version and a mobile version. I'm trying to create a "view full site" button that does two things when clicked:

*   Set a cookie so the site can remember that the button was clicked.
*   Navigate to the main (not mobile) version of the site.

Here is how I went about doing it:

*   Create the button.
*   On click, navigate to a processor page with PHP that sets the cookie, and then redirects to the main version of the site.
*   Add PHP to the main version of the site that checks if the "view full site" button has been clicked.

Here is what my site is built with:

*   jQuery Mobile (site is built with this)
*   [PHP mobile detect](http://code.google.com/p/php-mobile-detect/)
*   [jQuery cookie](https://github.com/carhartl/jquery-cookie)

But it's not working.

On the index of the main version of the site, on the header above the opening HTML tag, I have this:

```
if(!isset($_COOKIE['dontDoMob'])){

    //its not set so check for device type.
    include("Mobile_Detect.php");
    $detect = new Mobile_Detect();

    if ($detect->isMobile() ) {
        //"its some kind of mobile device so redirect to mobile";
        header("Location:http://myforecyte.com/m/");
        exit();
    }
} 
```

On the index of the mobile site, I added the button, and set on click to set the cookie via jQuery, and then redirect to home page which should continue to load the main version of the site thanks to the cookie.

But it didn't work: it wouldn't even redirect. I wasn't sure if it was jQuery Mobile's fault, so I separated everything. What I did was set the "view full site" link within jQuery mobile to go to a separate processor page (like `<a href="processorpage.php" rel="external">`), which has this code on it:

```
setcookie('dontDoMob', 'yes');
header("Location:http://www.myforecyte.com"); 
```

But it *always* goes back to the mobile version. I see the main site's URL for a split second, and then it redirects to the mobile again. As if the cookie wasn't set.

I think it has something to do with setting the cookie on a global scale or something like that.

* * *

Note: I checked to make sure that the process of setting the cookie worked fine, with this code:

```
if(isset($_COOKIE['dontDoMob'])){
    echo "its set yo";
} else {
    echo "its not set";
} 
```

It works and tells me "its set yo". When I delete all cookies and retest with firebug, it always works accordingly.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T09:18:45.240

我一直在尝试做同样的事情，我终于让它工作了。我用了和你一样的方法，所以我不确定你的为什么不起作用......

在我的移动网站上，我有一个按钮可以查看完整的网站。此按钮链接到 www.fullsite.com/setmobile.php

setmobile.php 是一个简单的 php 文件，如下所示：

```
<?php
    setcookie("mobile", "full", time()+3600);
    header("Location:http://www.fullsite.com");
?> 
```

它设置 cookie 并转到主站点。主站点有以下php代码：

```
<?php
if (!isset($_COOKIE["mobile"])){
    (...detect mobile script)
}
?> 
```

它对我有用，但看起来与您使用的方法相同，所以我不确定为什么您的方法不起作用...

您现在可能已经找到了解决方案，但如果没有，我希望这可以帮助您:)

祝你好运，安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:47:52.507

Cookie 具有“域”限制，

例如，默认情况下， 的cookie`http://mobile.example.com`不可*用*。`http://www.example.com`

但是，它*可*用于创建 cookie 的域的所有子域。例如`http://a.mobile.example.com`和`http://b.mobile.example.com`。

您可以在设置 cookie 时指定应该为哪个域创建 cookie。在此处阅读 PHP 手册：

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

不确定这是否是您问题的完整答案，但由于您提到多个域名，这可能是问题的*一部分*。

希望这可以帮助

# eclipse - Accidently deleted JRE from my Eclipse project

> ID：15602274
> 
> 赞同：4
> 
> 时间：2013-03-24T18:24:27.520
> 
> 标签：eclipse, project, java

I have opened a new Java project, wrote a lot of code, added a few external jars. I wanted to delete one external jar, accidently deleted the JRE library.

Can't figure out how to re-add the JRE to the project.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T18:31:36.763

哦，当然，我错过了“添加库”按钮。

右键单击项目->属性->Java构建路径->库选项卡（缺少JRE！）->添加库->选择一个库。

我怎么会错过这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T23:36:30.647

**右键单击项目**->**属性**->**构建路径**->**添加库**-> **JRE 系统库**->**完成** 希望对您有所帮助

# android - Android Beam - payload transfer from both devices when only one Touch To Beam?

> ID：15602275
> 
> 赞同：0
> 
> 时间：2013-03-24T18:24:34.230
> 
> 标签：android, nfc, ndef, nfc-p2p, android-beam

Ok, I watched the Google I/O from 2011 [presentation on NFC](http://youtu.be/49L7z3rxz4Q?t=10m20s) on peer to peer.

The demo was done on Gingerbread and using the [application Sticky Notes found](http://nfc.android.com)

Now in this demo, both device the onNewIntent() was called at the same time so both devices are trying to share information to one another.

On ICS and above, you have Android Beam..

With Android Beam, you have to touch to trigger the onNewIntent() event that will send the NDef message across.

Now the problem with this is that now to trigger the onNewIntent() on both devices, both user on each device has to "Touch To Beam" at the same time.

Is there a way that when you Touch To Beam on one device, both can have the onNewIntent() to be called?

I am trying to develop an app that will exchange data to each other but for it to work in a nice friendly fashion I need the devices to share the data at the same time once the Touch To Beam has been initiated on one device. I do hope this is possible.

**Edit:** [It looks like](https://groups.google.com/forum/?fromgroups=#!topic/nfc-developers/voG3icInxt8) this might not be possible to do :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T20:58:48.140

据我所知，NFC 本身无法提供您想要的功能。touch-to-beam/SNEP/NPP 传输仅在 Android 上是一个方向。单击其屏幕的用户会将 NDEF 消息推送到另一部电话。

我相信他们在视频中所做的是与 NDEF 消息建立蓝牙连接以进行传输（正如您在便笺演示中看到的那样）。不幸的是，没有很好的 API。

然而，EasyNFC 项目承诺能够让您在两个手机/应用程序之间创建蓝牙连接和套接字。[在这里](https://github.com/Mobisocial/EasyNFC)查看

我试了一下，并不喜欢设置蓝牙连接时仍然需要的 Touch-to-Beam UI。它也不太适合我的需求，因为我想将手机转移到电脑上，并且不想实现 NFC P2P 和蓝牙连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T21:25:31.640

一般来说，Android 不应该允许 NFC 数据同时双向传输。让我们考虑一个场景，我想用 NFC 向我的朋友发送一个东西。我朋友手机上主动打开的内容并不重要。即使接收方没有打开同一个应用程序，我也应该发送这个东西。我朋友的手机中可能有另一个应用程序试图向我发送另一件事。当我们触摸我们的手机时，Android Beam (TM) 会出现，并且他的数据是从被触摸的手机发送的。

在您的情况下，我认为您应该通过设置禁用 Android Beam (TM)`setNdefPushMessage(null)`并使用旧方式发送两种方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T09:15:23.467

您是否尝试过：
在 phone-1 上使用 Touch to Beam 来“**推送**”数据，而在另一个（phone-2）上，使用 NDEF_DISCOVERED/TECH_DISCOVERED 意图触发/启动数据捕获/接收。我隐约记得当 PUSH 完成时触发了上述意图之一。虽然，每次传输都需要“触摸”才能开始发射。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-21T20:46:04.813

[https://developer.android.com/preview/api-overview.html](https://developer.android.com/preview/api-overview.html)

我认为它将在 L 中可用！

**NFC 增强功能**

*您的应用可以通过调用 android.nfc.NfcAdapter.invokeBeam() 来调用用户设备上的 Android Beam 来共享数据。这避免了用户手动将设备轻敲另一台支持 NFC 的设备来完成数据传输的需要。*

# php - PHP: calling javascript function with parameters from php

> ID：15602276
> 
> 赞同：5
> 
> 时间：2013-03-24T18:24:37.573
> 
> 标签：php, javascript, function, google-maps, google-maps-api-3

I am trying to call JavaScript function with parameter that are PHP variables. I have tried 2 approaches.

1.  calling JavaScript function in PHP with script tags in echo i.e

    ```
    <?php
    echo '<script>initialize('.$lat.','.$lang.','.$zom.');</script>';
    ?> 
    ```

2.  assigning PHP variables values to JavaScript variables

    ```
     <script>
     var lat="<?php echo $lat;?>";
     var lang="<?php echo $lang; ?>";
     var zoom="<?php echo $zoom; ?>";
     alert(lat+lang+zoom);
     initialize(lat,lang,zoom);
     </script>

    ```

In first case function is called as I cross-checked from page source but parameters passed are undefined. And in 2nd case values are successfully saved in JavaScript variables, check it by alert(), but function is not called.

Here is the whole code:

```
<!DOCTYPE html>

<html>

<head>

    <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">

    </script>
<?php
     if(  isset($_POST['lat']) && isset($_POST['lang']) && isset($_POST['zoom']) && isset($_POST['city'])):

        $lat=$_POST['lat']; 

        $lang=$_POST['lang'];

        $zoom=$_POST['zoom'];

        $city=$_POST['city'];
        $zom=(int)$zoom;
              var_dump($lang);
        var_dump($lat);
        //var_dump($zoom);
              var_dump($zom);
          //echo '<script>initialize('.$lat.','.$lang.','.$zom.');</script>';

    endif;

?>          

<script>
var lat="<?php echo $lat; ?>";
var lang="<?php echo $lang; ?>";
var zoom="<?php echo $zoom; ?>";
alert(lat+lang+zoom);
initialize(lat,lang,zoom);
</script>

    <script>

function initialize(a,b,zom){        

    if (!a || !b ||!zom){ 
    alert('came on not' +a+b +zom);

    //      var centerLoc=new google.maps.LatLng( 33.61701054652337,73.37824736488983);

          zoom=16;

    }

    else

    {
        alert('came');

        var zoom =parseInt(zom);

        var centerLoc=new google.maps.LatLng(a,b);

    }

       var mapProp = {

            center:centerLoc,

            zoom:zoom,

            //mapTypeId:google.maps.MapTypeId.ROADMAP

            mapTypeId:google.maps.MapTypeId.SATELLITE

       };  

       var map=new google.maps.Map(document.getElementById("googleMap") ,mapProp);

            marker=new google.maps.Marker({

                  position:centerLoc,

                  title:'Click to zoom'

             });

    google.maps.event.addListener(marker,'click',function() {

                map.setZoom(map.getZoom()+1);

                map.setCenter(marker.getPosition());

       });

            marker.setMap(map);

}

       google.maps.event.addDomListener(window, 'load', initialize);

</script>

</head>

<body style= "background-color:gainsboro;">

    <form method="POST"  action="myPage.php" >

        Enter latitude:     <input type ="text" name="lat" id="lat" / ><br/>

        Enter longitude:    <input type ="text" name="lang"  id="lang"/ ><br/>

        Enter City Name:    <input type="text" name="city" id="city"/><br/>

        Enter Zoom level:   <input type ="text" name="zoom"  id="zoom"/ ><br/>

                        <input type="button" value ="Perview" onclick=" initialize(

                     document.getElementById('lat').value,

                     document.getElementById('lang').value,

                     document.getElementById('zoom').value)"/>

                        <input type="Submit"  value="Save" />

    </form>

                        <center><div id="googleMap"  style="width:1000px;height:500px;"></div></center>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T20:20:08.060

使用[`json_encode()`](http://php.net/manual/en/function.json-encode.php). 如果你不这样做，那么当数据从 PHP 传递到 HTML/JS 层时，你总是有可能错误地转义了数据。

```
$vars = array($lat, $lang, $zoom);
// JSON_HEX_TAG and JSON_HEX_AMP are to remove all possible surprises that could be
// caused by vars that contain '</script>' or '&' in them. The rules for 
// escaping/encoding inside script elements are complex and vary depending 
// on how the document is parsed.
$jsvars = json_encode($vars, JSON_HEX_TAG | JSON_HEX_AMP);

echo "<script>initialize.apply(null, $jsvars)</script>"; 
```

一般来说，为了您的理智，您需要提供给当前页面上运行的 js 的 PHP 中的所有数据都应该收集到一个 PHP 数组中，然后放入一个 js 对象中。例如：

```
<?php
$jsdata = array(
   'formvars' => array(
                      'lat' => $lat,
                      'lang' => $lang,
                      'zoom' => $zoom
    ),
   'username' => $username,
   'some_other_data' => $more stuff
);
?>
<script>
  var JSDATA = <?=json_encode($jsdata, JSON_HEX_TAG | JSON_HEX_AMP )?>;
  initialize(JSDATA.formvars.lat, JSDATA.formvars.lang, JSDATA.formvars.zoom);
</script> 
```

现在 JS 和 PHP/HTML 层之间只有一个接触点，因此您可以轻松地跟踪您在 JS 命名空间中放入的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T20:01:44.890

当浏览器完成加载 javascript 时调用该函数。

```
<script>
     window.onload = function() {
         var lat="<?php echo $lat; ?>";
         var lang="<?php echo $lang; ?>";
         var zoom="<?php echo $zoom; ?>";
         alert(lat+lang+zoom);
         initialize(lat,lang,zoom);
     };
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-21T10:14:00.530

只需调用预定义的 java 脚本代码，如 jsFunction() ；在你的 php 代码中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-18T19:27:18.927

我发现了一些关于[从 php 调用 javascript 函数的](http://www.hoverdroids.com/tutorials/php/calling-a-javascript-function-from-php/)非常好的示例，看来您也可以在[PhpFiddle.org上在线运行代码](http://phpfiddle.org/main/code/9254ef97cf085e276f46)

以防万一链接中断，以下是示例：

示例 1：不带参数调用

```
<?php
echo "<a href='http://www.hoverdroids.com/2015/06/10/calling-a-javascript-function-from-php/'>Full example at: http://www.hoverdroids.com/2015/06/10/calling-a-javascript-function-from-php/</a>";
echo "<p>Add whatever PHP you want here...</p>";
?>
<!--This JS function can be defined here or a separate file since so long as it gets created in JS space'-->
<script>
    function callAlert(){
        alert('A alert without a parameter');
    }
</script>
<script>
    callAlert();
</script>
<?php
?> 
```

示例 2：使用单个参数调用

```
<?php
echo "<a href='http://www.hoverdroids.com/2015/06/10/calling-a-javascript-function-from-php/'>Full example at: http://www.hoverdroids.com/2015/06/10/calling-a-javascript-function-from-php/</a>";
echo "<p>Add whatever PHP you want here...</p>";

//Data that is going to be passed into the JavaScript function. Try to keep all vars together so
//that it's easier to track down the php/javascript interaction
$jsdata = 'MyName';
?>
<!--This JS can be here or a separate file since all it's doing is defining a function in the JS space'-->
<script>
    function callAlert(text){
        alert(text);
    }
</script>
<!--This JS must be defined with the php since it's using previously defined php variables -->
<script>
    var JSDATA = <?=json_encode($jsdata, JSON_HEX_TAG | JSON_HEX_AMP )?>;

    //Prompt using a single var
    callAlert(JSDATA);
</script>
<?php
?> 
```

示例 3：使用参数数组调用

```
<?php
echo "<a href='http://www.hoverdroids.com/2015/06/10/calling-a-javascript-function-from-php/'>Full example at: http://www.hoverdroids.com/2015/06/10/calling-a-javascript-function-from-php/</a>";
echo "<p>Add whatever PHP you want here...</p>";

$myname = 'MyName';
$yourname = 'YourName';

//Data that is going to be passed into the JavaScript function. Try to keep all vars together so
//that it's easier to track down the php/javascript interaction
$jsdata = array(
                'input' => $myname,
                'array_input' => array(
                                        'name' => $yourname
                ),
);
?>
<!--This JS can be here or a separate file since all it's doing is defining a function in the JS space'-->
<script>
    function callAlert(text){
        alert(text);
    }
</script>
<!--This JS must be defined with the php since it's using previously defined php variables -->
<script>
    var JSDATA = <?=json_encode($jsdata, JSON_HEX_TAG | JSON_HEX_AMP )?>;

    //Prompt using a single var in the array
    callAlert(JSDATA.input);

    //Prompt using a var from a nested array    
    callAlert(JSDATA.array_input.name);
</script>
<?php
?> 
```

# c++ - Convert pointer to int and back to typed object

> ID：15602280
> 
> 赞同：2
> 
> 时间：2013-03-24T18:24:56.447
> 
> 标签：c++, visual-c++, pointers, casting

I need a simple way to convert a pointer to an int, and then back to the pointer. I need it as an int for portability, since an int is easier to carry around in my project than a pointer.

Start player and return pointer:

```
SoundPlayer* player = new FxPlayerTiny();
return (int)player; // this works, but is it correct? 
```

Stop player using pointer int:

```
FxPlayerTiny* player = static_cast<FxPlayerTiny*>((int*)num); // this gives me an error
FxPlayerTiny* player = (FxPlayerTiny*)((int*)obj); // this works, but is it correct?
delete player; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T22:20:11.067

最好的办法是修复您的项目，以便它可以处理指针。整数和指针是两个不同的东西。您可以来回转换，但如果您不小心，此类转换可能会丢失信息。

`int`根据实现和底层平台，来回转换指针值很容易丢失信息。例如，有系统上`int`的指针小于指针。如果您有 32 位`int`s 和 64 位指针，那么将指针转换为 an`int`并再次返回几乎肯定会给您一个无效的指针。

很可能`long`或`unsigned long`足够宽以保存转换后的指针值而不会丢失信息；我从来没有在一个没有它的系统上工作过。（就个人而言，我更喜欢无符号类型，但不是出于任何真正好的理由；两者都应该同样有效。）

所以你可以写，例如：

```
SoundPlayer* player = new FxPlayerTiny();
return reinterpret_cast<unsigned long>player; 
```

并`unsigned long`使用 . 将值转换回指针`reinterpret_cast,SoundPlayer*>`。

较新的实现提供 typedef`uintptr_t`和`intptr_t`，它们是无符号和有符号整数类型，保证在往返指针到整数到指针的转换中正常工作。它们是在 C99 中引入的，并且*可以*在`<stdint.h>`标题中定义。（指针大于*任何*整数类型的实现不会定义它们，但这种实现很少见。）C++ 在 2011 标准中采用它们，在`<cstdint>`标头中定义它们。但 Microsoft Visual C++ 从 2010 版本开始支持它们。

此保证仅适用于普通指针，不适用于函数指针或成员指针。

所以如果你必须这样做，你可以写：

```
#include <cstdint>
SoundPlayer* player = new FxPlayerTiny();
return reinterpret_cast<std::uintptr_t>player; 
```

但首先，请考虑这一点。`new FxPlayerTiny()`给你一个指针值，你会想要一个指针值。如果可能，请将其保留为指针。将其转换为整数意味着您必须决定使用几种技术中的哪一种，并且您必须跟踪整数值应该表示的指针类型。如果你犯了一个错误，要么使用了一个不够大的整数类型，要么忘记了你存储的指针类型，编译器可能不会警告你。

也许您有充分的理由需要这样做，但是如果您可以将指针存储为指针，您的生活将会轻松得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:41:44.507

不建议使用 int 来实现可移植性，尤其是因为`sizeof (int)`它`sizeof (void*)`可能会有所不同（例如在为 Windows x64 编译时）。如果用户界面需要整数，最好使用指针表并通过索引访问它们。

但是，如果要将指针转换为整数，反之亦然，那么简单的转换就足够了，但它是一样的，如果`sizeof *int) == sizeof (void*)`.

# c++ - how can I make this work without cin.get()

> ID：15602281
> 
> 赞同：-5
> 
> 时间：2013-03-24T18:25:08.607
> 
> 标签：c++

How can I change this so it works without cin.get?

```
void convert(int bit[],string &s)
{    
    char c = 0;
    for(int i = 0;i < 8;i++)
    {
        c = c+(bit[i] << i);
    }
    cin.get();
    cout << c;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:08:20.257

目前还不清楚你甚至想做什么。您丢弃 的返回值`cin.get()`，因此它的唯一作用是从输入流中提取字符，并执行与提取字符相关的任何副作用。（默认`std::cout`绑定到`std::cin`，所以副作用之一是冲洗`std::cin`。）如果你想要冲洗，你可以直接做，例如`std::cout.flush()`，或简单地`std::cout << c << flush`。但是请注意，输出一个字符可能无法满足您的要求。如果要输出 的实际值`c`，而不是将其解释为编码字符，则必须`char`先将其转换为大于的整数类型。当然，如果对普通字符进行签名，您可能希望将其转换为`unsigned char`首先，除非您准备好处理负值。

# python - Setting directory to path of script

> ID：15602282
> 
> 赞同：0
> 
> 时间：2013-03-24T18:25:15.207
> 
> 标签：python

What I would like to do is create a variable homedir that is set to the home folder script. How do I do this? Like say the script is located in C:\blah\, I would want homedir to be assigned to that.

```
homedir = (current directory)
pdfList = []

def getfiles():
    directory = os.listdir(homedir)
    for file in directory:
        if "pdf" in file:
            pdfList.append(file) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T18:32:10.220

`__file__`module 属性包含脚本位置，但它可能是相对的。下面的文件是`c:\test\x.py`.

```
import os
print(__file__)
homedir = os.path.abspath(os.path.dirname(__file__))
print(homedir) 
```

输出：

```
.\x.py
c:\test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:27:37.563

```
homedir = '.' 
```

或者

```
import os
homedir = os.getcwd() 
```

将导致`os.listdir(homedir)`列出当前工作目录（即执行脚本的目录）中的文件（和子目录）。请注意，这*不一定*与包含脚本的目录相同。对于该目录使用

```
import os
homedir = os.path.dirname(__file__) 
```

# jquery - How to send parameters from PHP to Backbone in external file.js

> ID：15602287
> 
> 赞同：1
> 
> 时间：2013-03-24T18:25:35.253
> 
> 标签：jquery, backbone.js, default-value

I'm tring to write my first `Backbone.js app` inside my `CakePHP app` and trying to avoid writing my app in the page directly but to do it on a specific file stored in `js/backbone/app.js` where I'll put the Backbone app.

My first test was made by writing the app inside the page just to make some test, the problem is that the Model app has default values which came from php data.

Here is the example **without** including the `app.js`:

```
<html>
    <head>
        <title>My app test</title>
        <script type="text/javascript" src="js/backbone/backbone.min.js"></script>
        <script type="text/javascript" src="js/jquery.min.js"></script>
        <script type="text/javascript" src="js/underscore.min.js"></script>
        <script type="text/javascript">
        var Status = {
            Models: {},
            Collections: {},
            Views: {},
            Templates:{}
        }
        Status.Models.Message = Backbone.Model.extend({
            defaults:{
                icon:"<?php echo $this->App->icon('default-icon-name');?>",
                type:"warning",
                title:"<?php echo __('Default title'); ?>",
                message:"<?php echo __('Default status message text'); ?>"
            },
            initialize:function () {
                console.log("Backbone console message from initialize event");
            }
        });
        // here the rest of the app
        </script>
    </head>
    <body>
        here is the app!
    </body>
</html> 
```

Now I've moved the app inside `js/backbone/app.js` and I'm not sure how is the easiest way to pass the default parameters of the Model from the page inside my `app.js`.

Here is the example **where I've put** all the Backbone app inside the `app.js`:

```
$(function(){
    $.ajax({
      url: "http://site.com/json/default_app"
    }).done(function(data) {
        var Status = {
            Models: {},
            Collections: {},
            Views: {},
            Templates:{}
        }
        Status.Models.Message = Backbone.Model.extend({
            defaults:data,
            initialize:function () {
                console.log("Backbone console message from initialize event");
            }
        });
    });
})(jQuery); 
```

Should i put my app for example inside the document ready of `jQuery`? I hope not, this would force me to create a specific `Controller` inside my `CakePHP` app that would be very annoying to keep up to date.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:57:07.337

所以你基本上有两个选择：

1.  您可以 PHP 化您的 JS 文件。我不是 PHP 专家，所以我不能告诉你如何做这件事的细节，但本质上你可以修改一些设置来告诉 PHP 处理你的 *.js 文件。如果你这样做了，那么你可以坚持任何你想要的 PHP 逻辑`app.js`（或任何其他 JS 文件）。

    然而，这种方法将您的 PHP 和您的 JS 代码强耦合，这通常被认为是一个坏主意（出于同样的原因，将您的 PHP 和您的 HTML 大量混合被认为是不好的做法）。因此，我建议...

2.  您可以将 PHP 部分写入 PHP 页面上的变量，然后在 JS 文件中引用这些变量。

例如，在您的 PHP 文件中，您可以执行以下操作：

```
<script type="text/javascript">
var YOUR_APP = {};
YOUR_APP.MESSAGE = {};
YOUR_APP.MESSAGE.ICON_SRC = "<?php echo $this->App->icon('default-icon-name');?>";
YOUR_APP.MESSAGE.TITLE = "<?php echo __('Default title'); ?>";
</script>
<script type="text/javascript" src="js/app.js"></script> 
```

然后`app.js`你可以这样做：

```
Status.Models.Message = Backbone.Model.extend({
    defaults: {
        icon: YOUR_APP.MESSAGE.ICON_SRC,
        title: YOUR_APP.MESSAGE.TITLE,
    },
    initialize:function () {
        console.log("Backbone console message from initialize event");
    }
}); 
```

由于`<script>`标签的顺序，您不需要任何 onDOMReady 包装。

# android - Android Application not installing

> ID：15602288
> 
> 赞同：0
> 
> 时间：2013-03-24T18:25:38.773
> 
> 标签：android

I made a android application on my pc. I kept the build sdk at 4.1, and minimum sdk version at 2.2 The app ran fine on the emulator but when i tried it on my friends Samsung Note it after installing gave an error "Application Not installed". I did so on Google Nexux 7.

I exported the app as a unsigned apk

I tried a simple hello world ap but had the same problem. Please help what to do and how to correct the error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:30:38.657

您需要对应用程序进行签名以使其在真实设备上运行.. 简单地选择导出为已签名的 apk 并使用密钥库对其进行签名...如果您没有，您可以通过与您相同的向导创建一个新的密钥库导出时获取

# mysql - MySQL - 没有数据的 Date_Format 子集的显示计数 = 0

> ID：15602294
> 
> 赞同：0
> 
> 时间：2013-03-24T18:26:27.267
> 
> 标签：mysql

```
SELECT COUNT(wash) AS HandHyCounts, COUNT(enex) AS EnExCounts,
(COUNT(wash)*100/COUNT(enex)) AS Performance, DATE_FORMAT(time, ?) AS groups 
FROM ((SELECT true AS enex, null AS wash, time FROM enexlive
WHERE time >= ? AND time <= ? AND unitid IN (?)) 
UNION ALL 
(SELECT null AS enex, true AS wash, time 
FROM washtablelive WHERE time >= ? AND time <= ? AND unitid IN (?))) AS t1 
GROUP BY groups ORDER BY groups; 
```

MySQL 是否可以为未出现在数据库表中的 Date_Format 返回 0 计数？

示例：假设您将日期格式设置为 %m-%d-%k，因此它显示月-日-小时，并且您正在查找时间戳在 2 月 26 日下午 1 点到 2 月 27 日下午 1 点之间的数据。但在 2 月 27 日凌晨 5 点到 2 月 27 日下午 1 点之间没有数据。

```
SELECT COUNT(wash) AS HandHyCounts, COUNT(enex) AS EnExCounts,
(COUNT(wash)*100/COUNT(enex)) AS Performance, DATE_FORMAT(time, '%m-%d-%k') AS groups 
FROM ((SELECT true AS enex, null AS wash, time FROM enexlive
WHERE time >= '2013-02-26 13:50:33' AND time <= '2013-02-27 13:50:33' AND unitid IN ('6')) 
UNION ALL 
(SELECT null AS enex, true AS wash, time 
FROM washtablelive WHERE time >= '2013-02-26 13:50:33' AND time <= '2013-02-27 13:50:33' AND unitid IN ('6'))) AS t1 
GROUP BY groups ORDER BY groups; 
```

这就是我得到的：

```
+--------------+------------+-------------+----------+
| HandHyCounts | EnExCounts | Performance | groups   |
+--------------+------------+-------------+----------+
|           12 |         47 |     25.5319 | 02-26-13 |
|           87 |        268 |     32.4627 | 02-26-14 |
|           80 |        261 |     30.6513 | 02-26-15 |
|           71 |        275 |     25.8182 | 02-26-16 |
|           71 |        270 |     26.2963 | 02-26-17 |
|           58 |        154 |     37.6623 | 02-26-18 |
|           45 |        141 |     31.9149 | 02-26-19 |
|           53 |        281 |     18.8612 | 02-26-20 |
|           44 |        175 |     25.1429 | 02-26-21 |
|           29 |        140 |     20.7143 | 02-26-22 |
|           22 |        107 |     20.5607 | 02-26-23 |
|           26 |        139 |     18.7050 | 02-27-0  |
|           23 |         56 |     41.0714 | 02-27-1  |
|           23 |        154 |     14.9351 | 02-27-2  |
|           18 |        144 |     12.5000 | 02-27-3  |
|           19 |         93 |     20.4301 | 02-27-4  |
+--------------+------------+-------------+----------+ 
```

这就是我要的：

```
+--------------+------------+-------------+----------+
| HandHyCounts | EnExCounts | Performance | groups   |
+--------------+------------+-------------+----------+
|           12 |         47 |     25.5319 | 02-26-13 |
|           87 |        268 |     32.4627 | 02-26-14 |
|           80 |        261 |     30.6513 | 02-26-15 |
|           71 |        275 |     25.8182 | 02-26-16 |
|           71 |        270 |     26.2963 | 02-26-17 |
|           58 |        154 |     37.6623 | 02-26-18 |
|           45 |        141 |     31.9149 | 02-26-19 |
|           53 |        281 |     18.8612 | 02-26-20 |
|           44 |        175 |     25.1429 | 02-26-21 |
|           29 |        140 |     20.7143 | 02-26-22 |
|           22 |        107 |     20.5607 | 02-26-23 |
|           26 |        139 |     18.7050 | 02-27-0  |
|           23 |         56 |     41.0714 | 02-27-1  |
|           23 |        154 |     14.9351 | 02-27-2  |
|           18 |        144 |     12.5000 | 02-27-3  |
|           19 |         93 |     20.4301 | 02-27-4  |
|            0 |          0 |        NULL | 02-27-5  |
|            0 |          0 |        NULL | 02-27-6  |
|            0 |          0 |        NULL | 02-27-7  |
|            0 |          0 |        NULL | 02-27-8  |
|            0 |          0 |        NULL | 02-27-9  |
|            0 |          0 |        NULL | 02-27-10 |
|            0 |          0 |        NULL | 02-27-11 |
|            0 |          0 |        NULL | 02-27-12 |
+--------------+------------+-------------+----------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:48:43.170

是的。但这个答案太短了。

`count()`总是返回一个值，从不`NULL`。您可以通过一个简单的查询来验证这一点，例如：

```
select count(*)
from information_schema.columns
where 1 = 0; 
```

这返回`0`，不是`NULL`。

我很确定这是符合 ANSI 的行为。

另一方面，您有按`count()`价值划分的部分。在这种情况下，MySQL 将返回`NULL`for`0/0`而不是生成错误（其他数据库可能会这样做）。您也可以轻松地将其模仿为：

```
select count(table_name) / count(*)
from information_schema.columns
where 1 = 0; 
```

这将返回一行，其中一列的值为`NULL`。

# recursion - 使用多种解决方案递归回溯

> ID：15602295
> 
> 赞同：1
> 
> 时间：2013-03-24T18:26:36.533
> 
> 标签：recursion, backtracking

```
function BACKTRACKING-SEARCH(csp) returns a solution, or failure 
       return RECURSIVE-  BACKTRACKING({ }, csp)
function RECURSIVE-BACKTRACKING(assignment,csp) returns a solution, or failure 
       if assignment is complete then 
                 return assignment
       var ←SELECT-UNASSIGNED-VARIABLE(VARIABLES[csp],assignment,csp)
       for each value in ORDER-DOMAIN-VALUES(var,assignment,csp) do
                 if value is consistent with assignment according to CONSTRAINTS[csp] then
                           add {var = value} to assignment
                           result ← RECURSIVE-BACKTRACKING(assignment, csp)
                           if result ̸= failure then 
                                            return result
                           remove {var = value} from assignment 
       return failure 
```

这是来自 AIMA 的回溯递归算法伪代码。但是，我不明白它是返回所有可能的解决方案还是只返回第一个找到的解决方案。如果这是最后一个选项，请您帮我修改它以返回可能的解决方案列表（或至少更新一些全局列表）。

编辑：我在 Java 中实现了这个算法。但是，有一个问题：

如果我不返回分配，而是将其保存在**结果**中，则递归停止条件失败（即它不再存在）。如何实现另一个停止条件？也许我最终应该返回**true**？

这是我的代码：

```
/**
 * The actual backtracking. Unfortunately, I don't have time to implement LCV or MCV,
 * therefore it will be just ordinary variable-by-variable search.
 * @param line
 * @param onePossibleSituation
 * @param result
 */
public static boolean recursiveBacktrack(Line line, ArrayList<Integer> onePossibleSituation, ArrayList<ArrayList<Integer>> result){

if (onePossibleSituation.size() == line.getNumOfVars()){
    // instead of return(assignment)
    ArrayList<Integer> situationCopy = new ArrayList<Integer>();
    situationCopy.addAll(onePossibleSituation);
    result.add(situationCopy);
    onePossibleSituation.clear();
}

Block variableToAssign = null;
// iterate through all variables and choose one unassigned
for(int i = 0; i < line.getNumOfVars(); i++){
     if(!line.getCspMiniTaskVariables().get(i).isAssigned()){
         variableToAssign = line.getCspMiniTaskVariables().get(i);
         break;
     }
}

// for each domain value for given block   
for (int i = line.getCspMiniTaskDomains().get(variableToAssign.getID())[0]; 
        i <= line.getCspMiniTaskDomains().get(variableToAssign.getID())[0]; i++){

    if(!areThereConflicts(line, onePossibleSituation)){
        //complete the assignment
        variableToAssign.setStartPositionTemporary(i);
        variableToAssign.setAssigned(true);
        onePossibleSituation.add(i);
        //do backtracking
        boolean isPossibleToPlaceIt = recursiveBacktrack(line,onePossibleSituation,result);
        if(!isPossibleToPlaceIt){
            return(false);
        }
    }

    // unassign
    variableToAssign.setStartPositionTemporary(-1);
    variableToAssign.setAssigned(false);
    onePossibleSituation.remove(i);

}

// end of backtracking
return(false);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:39:49.513

此代码检查是否找到解决方案，如果找到，则返回解决方案。否则，继续回溯。这意味着，它返回找到的第一个解决方案。

```
if result ̸= failure then 
    return result
remove {var = value} from assignment 
```

你可以这样修改它：

```
if result ̸= failure then 
    PRINT result // do not return, just save the result
remove {var = value} from assignment 
```

或者，更好的是，修改这部分：

```
if assignment is complete then 
    print assignment
    return assignment // print it and return 
```

关于已编辑的问题：

首先，`true`在 first中返回`if`，因此递归将知道它找到了解决方案。第二步，出现错误，大概：

```
if(!isPossibleToPlaceIt){
    return(false);
} 
```

应该

```
if(isPossibleToPlaceIt){
    return(true);
} 
```

因为如果你的回溯找到了一些东西，它就会返回`true`，这意味着你不必再检查其他任何东西了。

**编辑#2**：如果您想继续回溯以找到**所有**解决方案，只需删除整个上`if`一部分`return`：

```
//if(isPossibleToPlaceIt){
//    return(true);
//} 
```

因此，我们将以任何方式继续搜索。

# c# - Kinect 仰角覆盖

> ID：15602299
> 
> 赞同：0
> 
> 时间：2013-03-24T18:26:53.357
> 
> 标签：c#, kinect, angle

有没有办法覆盖 Kinect 设备的仰角属性？

据我所知，该设备正在使用内部传感器计算这个角度，并使用它的值来改进用户检测和跟踪。

我想要的是将 Kinect 安装在天花板上并将其直接指向地面，然后我会以某种方式尝试将仰角设置为 0 并欺骗他认为它被放置在正常位置，从而可能会改善跟踪躺在传感器下方地面上的用户。

# javascript - “字符”是 Typescript 中的关键字还是保留方法？

> ID：15602301
> 
> 赞同：2
> 
> 时间：2013-03-24T18:26:57.187
> 
> 标签：javascript, typescript

我的类“Character”不断出现编译错误，但如果我把它放在一个模块中它工作正常......即使我把它作为一个空类，里面什么都没有。

当我说类时，它不是一个“真正的”类，因为我只是想将一些旧的 Javascript 移植到 Typescript，但它看起来像：

```
function Character() {
 // Blows up
} 
```

但...

```
Module Something
{
    function Character() {
        // Works
    }
} 
```

我主要是提出这个问题，以防其他人像我一样遇到这个几乎无法解决的问题（因为我只是评论了所有内容，直到错误停止）。

== 编辑 ==

当我不将它放入模块时出现的错误是：

```
tsc.js(14053, 13) Microsoft JScript runtime error: please implement in derived classFailed to compile files: <a couple of *.ts files> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:33:16.980

一个名为的函数`Character`在[Typescript playground](http://www.typescriptlang.org/Playground/#src=function%20Character%28%29%20%7B%0A%20%20console.log%2842%29%3B%0A%7D%0A%0ACharacter%28%29%3B)中工作得很好。

# ios - ECSlidingViewController 和测试

> ID：15602304
> 
> 赞同：2
> 
> 时间：2013-03-24T18:27:19.200
> 
> 标签：ios, objective-c, xcode, testing, xcode4

我正在使用 ECSlidingViewController 0.9.0 ( [https://github.com/edgecase/ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController) )。我开始使用核心数据进行全新安装，启用弧和测试，并使用 Cocoapods 安装 ECSlidingViewController。

当我在测试模式下运行它时，由于某种原因，slidingViewController 方法返回 null 而不是 InitialSlidingViewController。

这是ECSlidingViewController.m中定义的方法

```
- (ECSlidingViewController *)slidingViewController
{
  UIViewController *viewController = self.parentViewController;
  while (!(viewController == nil || [viewController isKindOfClass:[ECSlidingViewController class]])) {
    viewController = viewController.parentViewController;
  }

  return (ECSlidingViewController *)viewController;
} 
```

在模拟器和测试中，self.parentViewController 返回一个 InitialSlidingViewController。

但在测试模式下，[viewController isKindOfClass:[ECSlidingViewController class]] 返回 false 而不是 true。

知道我接下来应该看哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T10:22:59.173

问题与 ECSlidingViewController 无关。

答案在这里[isKindOfClass: 在单元测试 bundle 中返回假阴性](https://stackoverflow.com/questions/5755289/iskindofclass-returns-false-negative-in-unit-test-bundle)。

我在测试包的编译源构建阶段删除了应用程序的源文件，它现在可以工作了。

# c# - 为什么 AntiXss 库不能与 Eval() 一起使用？

> ID：15602307
> 
> 赞同：1
> 
> 时间：2013-03-24T18:27:36.990
> 
> 标签：c#, asp.net, antixsslibrary

我正在开发一个简单的 ASP.NET 应用程序来证明 AntiXss 库的使用。该库非常强大，除了在 aspx 页面中使用 Eval() 之外，它对我来说工作得很好。例如，如果我有一个如下标签控件：

```
<asp:Label runat="server" ID="CommentsLabel" Text='<%# Eval("Name") %>' /> 
```

**我将如何使用 AntiXss？**

我按照[这里提到的这个示例](http://blogs.msdn.com/b/cisg/archive/2008/10/01/asp-net-data-binding-and-antixss-encoding.aspx)进行操作，并通过执行以下操作将库添加到标签控件：

```
<asp:Label runat="server" ID="CommentsLabel" Text='<%#Microsoft.Security.Application.AntiXss.HtmlEncode(((System.Data.DataRowView)Container.DataItem)["Comments"].ToString()) %>'/> 
```

我的教练仍然告诉我它很脆弱​​，我不知道为什么。然后，`AntiXss.HtmlEconde()`我没有使用 ，而是`Encoder.HtmlEncode()`在上一行中使用

```
<asp:Label runat="server" ID="CommentsLabel" Text='<%#Microsoft.Security.Application.Encoder.HtmlEncode(((System.Data.DataRowView)Container.DataItem)["Comments"].ToString()) %>'/> 
```

**编辑：**

根据我的导师使用的扫描工具，他仍然告诉我它很脆弱​​。**那么通常如何将此库与 Eval 或 Data Binding 一起使用？**

# android - 将事件添加到 android 日历失败

> ID：15602311
> 
> 赞同：3
> 
> 时间：2013-03-24T18:27:47.100
> 
> 标签：android, calendar, android-contentresolver, android-cursor

我正在尝试以编程方式将事件添加到用户的日历中。我在 StackOverflow 和其他地方遵循了无数指南，但没有一个能让那个该死的事件出现在我的日历中。这是我当前的代码：

```
public void saveGamesToCalendar() {
    showCalendarPopup();
}

private void showCalendarPopup() {
    final ContentResolver cr;
    final Cursor result;
    final Uri uri;
    List<String> listCals = new ArrayList<String>();
    final String[] projection = new String[] {CalendarContract.Calendars._ID, CalendarContract.Calendars.ACCOUNT_NAME, CalendarContract.Calendars.CALENDAR_DISPLAY_NAME, CalendarContract.Calendars.NAME,};

    uri = CalendarContract.Calendars.CONTENT_URI;

    cr = context.getContentResolver();
    result = cr.query(uri, projection, null, null, null);
    if(result.getCount() > 0 && result.moveToFirst()) {
        do {
                listCals.add(result.getString(result.getColumnIndex(CalendarContract.Calendars.NAME)));
    } while(result.moveToNext());
}
CharSequence[] calendars = listCals.toArray(new CharSequence[listCals.size()]);

AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setTitle("Calendar to use:");
builder.setItems(calendars, new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog,int itemCal) {
            Log.e("SettingsActivity", "CalendarID: " + itemCal);
            loopThroughGames(itemCal);
        };
    });
    AlertDialog alert = builder.create();
    alert.show();
}

private void loopThroughGames(int whichCalendar) {
    ArrayList<Model_Game> games = memoryManager.getGames();

    // for(Game e: games)
    Log.e("Game", games.get(101).toString());
    addGameToCalendar(games.get(101), whichCalendar);

    Log.e("ID", "" + whichCalendar);
}

private void addGameToCalendar(Model_Game game,int whichCalendar) {
    ContentResolver cr = context.getContentResolver();
    ContentValues values = new ContentValues();

    try {
        values.put(CalendarContract.Events.CALENDAR_ID, whichCalendar);
        values.put(CalendarContract.Events.TITLE, "Hockey- " + game.getLeague() + ": " + game.getTeamH() + " vs " + game.getTeamA());
        values.put(CalendarContract.Events.EVENT_LOCATION, "Twin Rinks Ice Arena- " + game.getRink() + " Rink");
        values.put(CalendarContract.Events.DTSTART, "" + game.getCalendarObject().getTimeInMillis());
        //values.put(CalendarContract.Events.DTEND, "" + game.getCalendarObject().getTimeInMillis() + 5400000);
        values.put(CalendarContract.Events.DURATION, "" + 5400000);
        values.put(CalendarContract.Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());

        cr.insert(CalendarContract.Events.CONTENT_URI, values);
    } catch(Exception e) {
        Log.e("Error", e.getMessage());
        toast(e.getMessage());
    }
} 
```

基本上正在发生的事情是用户按下操作栏按钮，该按钮调用该`saveGamesToCalendar()`方法，该方法调用该`ShowCalendarPopup()`方法。此方法显示一个带有用户日历列表的标准对话框，当用户选择其中一个时，将`loopThroughGames()`调用该方法，并将所选日历的 ID 作为参数。当一切正常时，此方法会将用户的所有游戏写入日历，但出于测试目的，它只写入一个。该`addGameToCalendar()`方法采用一个游戏对象，该对象包含许多值，如时间、标题、位置、日期等，并使用网络上许多不同地方概述的标准方式将其插入日历。

我没有收到此代码的错误消息（除了我自己发送到错误日志的错误消息），所以我不知道为什么此代码不起作用。没有错误，只是游戏从未出现在我的日历中。我在清单中正确设置了权限，所以我知道这不是问题。

有没有人可以解决这个烦人的问题？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T08:07:29.567

[重新编辑]] 这就是我所做的，它就像一个魅力..

```
 Cursor cursor = null ;

         String[] projection = new String[] {
                   CalendarContract.Calendars._ID,
                   CalendarContract.Calendars.ACCOUNT_NAME,};

         ContentResolver cr = context2.getContentResolver();
         cursor = cr.query(Uri.parse("content://com.android.calendar/calendars"), projection, null, null, null);

         if ( cursor.moveToFirst() ) {
                final String[] calNames = new String[cursor.getCount()];
                calIds = new int[cursor.getCount()];
                for (int i = 0; i < calNames.length; i++) {
                    calIds[i] = cursor.getInt(0);
                    calNames[i] = cursor.getString(1);
                    cursor.moveToNext();
                }
            }

        try {           

            ContentValues values = new ContentValues();

//          int apiLevel = android.os.Build.VERSION.SDK_INT;
//            if(apiLevel<14){
//              values.put("visibility", 0);
//
//            }
            values.put(Events.DTSTART, stTime);
            values.put(Events.DTEND, enTime);
            values.put(Events.TITLE, category);
            values.put(Events.DESCRIPTION, description);
            values.put(Events.CALENDAR_ID, calIds[0]);
            values.put(Events.EVENT_LOCATION,place);
            values.put(Events.EVENT_TIMEZONE,tZone);

            mInsert =  cr.insert(CalendarContract.Events.CONTENT_URI, values);

            Toast.makeText(context2, "Event added Successfully",
                    Toast.LENGTH_LONG).show();

        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(context2, "Exception: " + e.getMessage(),
                    Toast.LENGTH_SHORT).show();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T13:20:14.760

受保护的无效事件添加（）{

```
 try
    {
        Calendar beginTime = Calendar.getInstance();
        beginTime.set(2013, 11, 20, 8,0 );
        startMillis = beginTime.getTimeInMillis();
        Calendar endTime = Calendar.getInstance();
        endTime.set(2013, 11, 20, 8, 50);
        endMillis = endTime.getTimeInMillis();

      ContentResolver cr = this.getContentResolver();
      ContentValues values = new ContentValues();

      values.put(Events.DTSTART, startMillis);
      values.put(Events.DTEND, endMillis);
      values.put(Events.TITLE, "Hello");

      values.put(Events.CALENDAR_ID, 1);            
      values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().getID());

if (android.os.Build.VERSION.SDK_INT <= 7) {

         uri = Uri.parse("content://calendar/events");
     } else 
     {

         uri = Uri.parse("content://com.android.calendar/events");
     }
      Uri urievent = cr.insert(uri, values);    

     } 
catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

       }

    //event = Utility.readCalendarEvent(CalnderEvent.this);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-01-31T03:35:05.467

这很有效，而且更容易理解：

```
 long startTime = calSet.getTimeInMillis();
           Intent intent = new Intent(Intent.ACTION_INSERT).setData(Events.CONTENT_URI)
                 .setData(Events.CONTENT_URI)
                .putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME, startTime)
            .putExtra(CalendarContract.EXTRA_EVENT_END_TIME, startTime + (length*3600000))
                .putExtra(Events.TITLE, examName)
                .putExtra(Events.EVENT_LOCATION, venue)
                .putExtra(Events.AVAILABILITY, Events.AVAILABILITY_BUSY)
                .putExtra(Events.HAS_ALARM, 1);

                 startActivity(intent); 
```

# c++ - 如何在 Arduino 上使用 C++ 中的伺服库控制伺服电机？

> ID：15602312
> 
> 赞同：2
> 
> 时间：2013-03-24T18:27:48.937
> 
> 标签：c++, arduino

我尝试使用[Arduino Pro](http://arduino.cc/en/Main/ArduinoBoardPro)套件旋转全旋转伺服电机。我正在使用伺服库，尤其是伺服功能。我使用`Write()`此功能是为了控制伺服电机的速度和方向。

根据 Arduino C++ 舵机库，写入函数的参数是标准舵机中的角度，以及全旋转舵机的速度。现在我想知道这个参数的单位，因为当我把这个参数设置为45时，速度比我设置为90时要高！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:44:54.023

> 在连续旋转伺服上，这将设置伺服的速度（0 是一个方向的全速，180 是另一个方向的全速，接近 90 的值表示没有运动）。

来源：[http ://arduino.cc/en/Reference/ServoWrite](http://arduino.cc/en/Reference/ServoWrite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T07:18:27.830

我有一些从类库中控制伺服电机的代码示例，希望你能从中得到一些帮助。

转到：[http ://everysolutionshere.blogspot.in/2013/05/step-to-control-servo-motors-from-c.html](http://everysolutionshere.blogspot.in/2013/05/step-to-control-servo-motors-from-c.html)

您可以使用轴卡轻松控制伺服。它为脉冲和方向控制提供了更好的精度。

# shell - Erlang：服务器光标挂在命令行上？

> ID：15602314
> 
> 赞同：2
> 
> 时间：2013-03-24T18:28:12.183
> 
> 标签：shell, erlang, cursor, freeze

在 shell 中运行的服务器挂起并且不能接受任何输入。有什么方法可以让程序在运行服务器循环以接受传入连接的同时允许输入？

```
-module(cp1).
-export([start/0,accept/1,enter_loop/1,loop/1]).

start() ->

    io:format("Started Server:~n"),
    {ok, Socket} = gen_tcp:listen(4001, [binary, {packet, 0},{reuseaddr, true},{active, false}]),
    accept(Socket).

accept(ListenSocket) ->
    case gen_tcp:accept(ListenSocket) of
        {ok, Socket} ->
            Pid = spawn(fun() ->
                io:format("Connection accepted ~n", []),
                enter_loop(Socket)
            end),
            io:format("Pid ~p~n",[Pid]),
            gen_tcp:controlling_process(Socket, Pid),
            Pid ! ack,
            accept(ListenSocket);
        Error ->
            exit(Error)
    end.

enter_loop(Sock) ->
    %% make sure to acknowledge owner rights transmission finished
    receive ack -> ok end,
    loop(Sock).

loop(Sock) ->
    %% set soscket options to receive messages directly into itself
    inet:setopts(Sock, [{active, once}]),
    receive
        {tcp, Socket, Data} ->
            io:format("Got packet: ~p~n", [Data]),
            io:format("Send packet: ~p~n",[Data]),
            gen_tcp:send(Socket, Data),
            loop(Socket);
        {tcp_closed, Socket} ->
            io:format("Socket ~p closed~n", [Socket]);
        {tcp_error, Socket, Reason} ->
            io:format("Error on socket ~p reason: ~p~n", [Socket, Reason])
    end. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:00:53.513

为服务器循环生成一个进程，而不是调用 start 函数。`Pid = spawn(fun()-> cp1:start() end).`

# java - odftoolkit NoClassDefFoundError 异常

> ID：15602315
> 
> 赞同：0
> 
> 时间：2013-03-24T18:28:13.967
> 
> 标签：java, odt, odfdom

我已经阅读[了这个](https://stackoverflow.com/questions/4791389/how-to-create-an-odt-file-programmatically-with-java)主题，并且按照描述使用了 odfdom 库，但是我有一个例外

```
 Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/xerces/dom/DocumentImpl 
```

我该如何处理？谢谢！

PS：这里是[要点](https://gist.github.com/iSkeeve/5232992)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T11:18:35.697

我有同样的问题。将 xercesImpl.jar（可以在[http://xerces.apache.org/mirrors.cgi#binary](http://xerces.apache.org/mirrors.cgi#binary)上的 Xerces2 Java 存档中找到）添加到我的库中解决了它。

# ios - 数据库即服务

> ID：15602318
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:28:31.383
> 
> 标签：ios, database

我正在构建一个需要远程服务器上的数据库的简单 iOS 应用程序。没有什么太花哨的，只是存储一些字符串。我也想要一个用户名/密码。

我正在为此获取报价，但我想知道是否有一项服务可以为此提供开箱即用的解决方案。相当于 Wordpress 等 Web 模板服务的数据库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-28T07:23:55.343

我认为有许多内置身份验证的 NoSQL DBaaS，但我认为您应该查看 CloudBoost.io。他们有一个单一的 API，可以帮助您创建用户。我认为他们还没有 iOS SDK，但您始终可以使用 REST。

[https://docs.cloudboost.io/#CloudUser](https://docs.cloudboost.io/#CloudUser)

# java - 创建了一个 jar 文件并且框架在 Netbeans 中打开时没有在 jar 中打开

> ID：15602320
> 
> 赞同：0
> 
> 时间：2013-03-24T18:28:36.410
> 
> 标签：java, swing, netbeans, jar, frames

我创建了一个项目，其中每个框架都有 2 个以上的“.java”文件，例如`home.java`和`control.java`. 单击时有一个按钮，`home.java`可打开`control.java`. 这在从 Netbeans 运行时有效，但在创建 jar 文件时会打开第一帧。但是第二帧没有打开。请帮忙。

**主页.java：**

```
public class home extends javax.swing.JFrame {

    public home() {
        initComponents();
    }
     private void jButton1ActionPerformed(java.awt.event.ActionEvent evt){                                         
       setVisible(false);
       new controls().setVisible(true);// TODO add your handling code here:
    }

    public static void main(String args[]) {

        try {

        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new home().setVisible(true);
            }
        });
    } 

     private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
    {
      setVisible(false);
      new controls().setVisible(true);
    } 
```

**控制.java：**

```
public class controls extends javax.swing.JFrame {

/**
 * Creates new form controls
 */
public controls() {
    initComponents();
}

public static void main(String args[]) {

    try {          

    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new controls().setVisible(true);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:55:12.733

在设置第一个不可见之前，将另一个框架设置为可见。

# c - 是什么导致分段错误？

> ID：15602322
> 
> 赞同：1
> 
> 时间：2013-03-24T18:28:47.470
> 
> 标签：c, pointers

我在递归循环中创建了分段错误，但不明白为什么。有人可以帮助我吗？

```
struct node{
int value;
    int order;
    struct node *left;
    struct node *right;
};

typedef struct node node_t;

node_t array[10];

void createTree(node_t **p, int order){
   (*p)->value = rand()%10;
   (*p)->order = order;
   printf("%i", (*p)->value);
   printf(" ");
   printf("%i\n", (*p)->order);

   if (!order){
       (*p)->left = NULL;
       (*p)->right = NULL;
       return; 
   }
//I believe that here is the origin of the problem...     
createTree(&(*p)->left, order-1);
createTree(&(*p)->right, order-1);
}

int main(void)
{
node_t *root = &array[0];
srand(time(NULL));
createTree(&root, 1);
printf("%i\n", root->value);
return 1;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:36:39.597

问题是

```
node_t array[10]; 
```

您正在创建 10 个节点，并且由于该数组是在文件范围（全局）中声明的，因此它是零初始化的，因此`right`和`left`指针的值将是`NULL`.

现在

```
createTree(&(*p)->left, order-1); 
```

在这个你传递左节点的地址。

在这份声明中

```
(*p)->value = rand()%10; 
```

`*p`是`NULL`并且取消引用会`NULL`产生分段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:35:23.007

我看不到你在哪里设置`left`和`right`成员。您将它们设置为`NULL`if`order`为零，否则您根本不设置它们。然而，您将这些成员的地址作为参数递归传递。显然，这样的地址无法访问，您的代码就是这样做的。

你期望它如何工作？

# java - JMenuItem 中的 addActionListener 错误

> ID：15602325
> 
> 赞同：1
> 
> 时间：2013-03-24T18:28:59.620
> 
> 标签：java, swing

> 必需：ActionListener
> 找到：EditMenuFunctions
> 原因：实参EditMenuFunctions 无法通过方法调用转换为ActionListener
> 
> .\AFrame.java:56：错误：AbstractButton 类中的方法 addActionListener 不能应用于给定类型；
> 
> refMenuBar.time_date.addActionListener(new EditMenuFunctions());

```
AMenuBar refMenuBar = new AMenuBar();
protected final JMenuItem time_date = new JMenuItem("Time / Date");
refMenuBar.time_date.addActionListener(new EditMenuFunctions()); 
```

`class EditMenuFunctions`是我的类，其中包含该`actionPerformed()`方法。我将 actionListener 添加到 JMenuItem 中，`class AFrame`并在其中创建了 JMenuItem`class AMenuBar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:33:07.400

您`EditMenuFunctions`必须实施`ActionListener`. 例如：

```
public class EditMenuFunctions implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent event) { ... }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:31:29.733

将您的类 EditMenuFunctions 更改为实现/扩展 ActionListener

# c# - 如何使用菜单条控制标签页？

> ID：15602327
> 
> 赞同：0
> 
> 时间：2013-03-24T18:29:20.347
> 
> 标签：c#, .net, powershell, powershell-2.0, powershell-3.0

我创建了一个 powershell 脚本，我正在尝试使主界面使用选项卡式布局。

我得到了我想要工作的所有功能，除了我想隐藏顶部的选项卡并使用菜单条上的按钮来切换选项卡。

我已经成功创建了菜单条并将选项卡隐藏在顶部，但我不知道如何让菜单上的按钮选择不同的选项卡。

谁能有办法做到这一点？

例子 ：

在我的菜单条上：Control1 Control2 我的标签页控件上的标签页：Tabpage1 Tabpage2

如何用 Control1 显示标签页 Tabpage1，用 Control2 显示 Tabpage2？

下面的代码：

```
#----------------------------------------------
#region Application Functions
#----------------------------------------------

function OnApplicationLoad {
#Note: This function is not called in Projects
#Note: This function runs before the form is created
#Note: To get the script directory in the Packager use: Split-Path $hostinvocation.MyCommand.path
#Note: To get the console output in the Packager (Windows Mode) use: $ConsoleOutput (Type: System.Collections.ArrayList)
#Important: Form controls cannot be accessed in this function
#TODO: Add snapins and custom code to validate the application load

return $true #return true for success or false for failure
}

function OnApplicationExit {
#Note: This function is not called in Projects
#Note: This function runs after the form is closed
#TODO: Add custom code to clean up and unload snapins when the application exits

$script:ExitCode = 0 #Set the exit code for the Packager
}

#endregion Application Functions

#----------------------------------------------
# Generated Form Function
#----------------------------------------------
function Call-example_pff {

#----------------------------------------------
#region Import the Assemblies
#----------------------------------------------
[void][reflection.assembly]::Load("mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
[void][reflection.assembly]::Load("System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
[void][reflection.assembly]::Load("System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
[void][reflection.assembly]::Load("System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
[void][reflection.assembly]::Load("System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")
[void][reflection.assembly]::Load("System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
[void][reflection.assembly]::Load("System.DirectoryServices, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")
[void][reflection.assembly]::Load("System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089")
[void][reflection.assembly]::Load("System.ServiceProcess, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")
[void][reflection.assembly]::Load("System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")
#endregion Import Assemblies

#----------------------------------------------
#region Generated Form Objects
#----------------------------------------------
[System.Windows.Forms.Application]::EnableVisualStyles()
$form1 = New-Object 'System.Windows.Forms.Form'
$tabcontrol1 = New-Object 'System.Windows.Forms.TabControl'
$tabpage1 = New-Object 'System.Windows.Forms.TabPage'
$tabpage2 = New-Object 'System.Windows.Forms.TabPage'
$menustrip1 = New-Object 'System.Windows.Forms.MenuStrip'
$control1ToolStripMenuItem = New-Object 'System.Windows.Forms.ToolStripMenuItem'
$control2ToolStripMenuItem = New-Object 'System.Windows.Forms.ToolStripMenuItem'
$InitialFormWindowState = New-Object 'System.Windows.Forms.FormWindowState'
#endregion Generated Form Objects

#----------------------------------------------
# User Generated Script
#----------------------------------------------
$form1_Load={
    #TODO: Initialize Form Controls here

}

# --End User Generated Script--
#----------------------------------------------
#region Generated Events
#----------------------------------------------

$Form_StateCorrection_Load=
{
    #Correct the initial state of the form to prevent the .Net maximized form issue
    $form1.WindowState = $InitialFormWindowState
}

$Form_Cleanup_FormClosed=
{
    #Remove all event handlers from the controls
    try
    {
        $form1.remove_Load($form1_Load)
        $form1.remove_Load($Form_StateCorrection_Load)
        $form1.remove_FormClosed($Form_Cleanup_FormClosed)
    }
    catch [Exception]
    { }
}
#endregion Generated Events

#----------------------------------------------
#region Generated Form Code
#----------------------------------------------
#
# form1
#
$form1.Controls.Add($tabcontrol1)
$form1.Controls.Add($menustrip1)
$form1.ClientSize = '842, 355'
$form1.MainMenuStrip = $menustrip1
$form1.Name = "form1"
$form1.Text = "Form"
$form1.add_Load($form1_Load)
#
# tabcontrol1
#
$tabcontrol1.Controls.Add($tabpage1)
$tabcontrol1.Controls.Add($tabpage2)
$tabcontrol1.Location = '9, 71'
$tabcontrol1.Name = "tabcontrol1"
$tabcontrol1.SelectedIndex = 0
$tabcontrol1.Size = '811, 256'
$tabcontrol1.TabIndex = 1
#
# tabpage1
#
$tabpage1.Location = '4, 22'
$tabpage1.Name = "tabpage1"
$tabpage1.Padding = '3, 3, 3, 3'
$tabpage1.Size = '803, 230'
$tabpage1.TabIndex = 0
$tabpage1.Text = "tabpage1"
$tabpage1.UseVisualStyleBackColor = $True
#
# tabpage2
#
$tabpage2.Location = '4, 22'
$tabpage2.Name = "tabpage2"
$tabpage2.Padding = '3, 3, 3, 3'
$tabpage2.Size = '803, 230'
$tabpage2.TabIndex = 1
$tabpage2.Text = "tabpage2"
$tabpage2.UseVisualStyleBackColor = $True
#
# menustrip1
#
$menustrip1.BackColor = 'Red'
[void]$menustrip1.Items.Add($control1ToolStripMenuItem)
[void]$menustrip1.Items.Add($control2ToolStripMenuItem)
$menustrip1.Location = '0, 0'
$menustrip1.Name = "menustrip1"
$menustrip1.Size = '842, 24'
$menustrip1.TabIndex = 0
$menustrip1.Text = "menustrip1"
#
# control1ToolStripMenuItem
#
$control1ToolStripMenuItem.Name = "control1ToolStripMenuItem"
$control1ToolStripMenuItem.Size = '65, 20'
$control1ToolStripMenuItem.Text = "Control1"
#
# control2ToolStripMenuItem
#
$control2ToolStripMenuItem.Name = "control2ToolStripMenuItem"
$control2ToolStripMenuItem.Size = '65, 20'
$control2ToolStripMenuItem.Text = "Control2"
#endregion Generated Form Code

#----------------------------------------------

#Save the initial state of the form
$InitialFormWindowState = $form1.WindowState
#Init the OnLoad event to correct the initial state of the form
$form1.add_Load($Form_StateCorrection_Load)
#Clean up the control events
$form1.add_FormClosed($Form_Cleanup_FormClosed)
#Show the Form
return $form1.ShowDialog()

} #End Function

#Call OnApplicationLoad to initialize
if((OnApplicationLoad) -eq $true)
{
#Call the form
Call-example_pff | Out-Null
#Perform cleanup
OnApplicationExit
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:54:26.047

您需要事件处理程序。您可以通过单击 GUI 元素并双击要处理的事件处理程序字段，在 PrimalForms 中为这些生成存根。要查看事件处理程序，请单击闪电图标。

这样做将关联一个脚本块来处理控件的事件。然后添加您的代码来处理事件。对于您的需求，我认为您正在寻找：

```
$tabcontrol1.SelectTab(0) 
```

PrimalForm 将附加如下所示的脚本块：

```
$control1ToolStripMenuItem.add_Click($control1ToolStripMenuItem_OnClick)
$control2ToolStripMenuItem.add_Click($control2ToolStripMenuItem_OnClick) 
```

然后在该`Generated Form Code`部分中找到这些并添加修改它们，如下所示：

```
$control1ToolStripMenuItem_OnClick=
{
    $tabcontrol1.SelectTab(0)  
}

$control2ToolStripMenuItem_OnClick=
{
    $tabcontrol1.SelectTab(1)  
} 
```

# apache - HTTP 服务器错误 403。禁止

> ID：15602331
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:29:30.330
> 
> 标签：apache, http, networking

我收到以下错误：

```
Forbidden: You don't have permission to access [directory] on this server. 
```

我需要直接访问该目录和该目录上的子文件夹，以便我的 Android 应用程序可以与之通信。

我尝试将文件夹放在托管服务器上，一切正常。

但是，我正在做一个学术项目，我需要将这些文件夹和脚本存储在可以与本地本地主机对话的大学 Web 服务器上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:38:17.347

1.
如果您有可能并且您的服务器是 linux 服务器，您可以使用类似的方式更改权限

```
sudo chmod -R 777 /var/www/folder 
```

或者完全改变所有者

```
sudo chown -R user /var/www/folder 
```

* * *

2.
查看 apache 配置文件和**.htaccess**，如果目录被阻止

```
Deny from all 
```

或者根本不允许。您可以通过创建一个 .htaccess 文件来允许该目录并输入

```
<Directory yourdirectory>
Order allow,deny
Allow from all
</Directory> 
```

# java - onTouch 无法正常工作

> ID：15602339
> 
> 赞同：0
> 
> 时间：2013-03-24T18:30:34.993
> 
> 标签：java, android, ontouchlistener

好的，所以我正在制作一个简单的秒表，当您按下屏幕上的任意位置时，我希望它开始计时，但现在，只需在输出中打印一些内容即可。我看过很多例子，我看了很多其他问题的答案，但没有一个有效。这是我到目前为止所拥有的（onTouch 在它的底部）：

```
package com.timeofcubeeliteDYLANFERRIS.cubetimerelite;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.AlertDialog.Builder;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {
final private int RANDOM_DIALOG = 0;
String message;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main_menu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item){
    switch(item.getItemId())
    {
    case R.id.settingsMenu: 
        Intent intent = new Intent (MainActivity.this, MainPreferenceActivity.class);
        startActivity(intent);
        break;
    case R.id.cubetypeMenu:
        Intent cubeTypeIntent = new Intent (MainActivity.this, PreferenceCubeType.class);
        startActivity(cubeTypeIntent);

        SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
        String value = preferences.getString("test", "String not found");
        System.out.println(value);
        Log.d("Cubetimer:", value);
        break;
    default:
    }
    return super.onOptionsItemSelected(item);
}

public boolean onTouch(View view, MotionEvent event){
    int action = event.getAction();
    switch(action){
    case MotionEvent.ACTION_DOWN: Log.d(message, "down"); break;
    case MotionEvent.ACTION_MOVE: Log.d(message, "move"); break;
    case MotionEvent.ACTION_UP: Log.d(message, "up"); break;

    }
    System.out.println("Oh my oh MY...");
    return true;
}

} 
```

那么，我将如何修复触摸事件？（我不在乎保留 ACTION_UP、DOWN、MOVE。这正是我试图测试的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:33:31.473

我认为您没有覆盖正确的事件。这就是为什么不调用您的方法的原因。

您应该`onTouchEvent`改用，如下所示：

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
    //Do your stuff
    return super.onTouchEvent(event);
} 
```

# javascript - 将标签值显示为未定义的错误 javascript 代码

> ID：15602342
> 
> 赞同：1
> 
> 时间：2013-03-24T18:30:52.183
> 
> 标签：javascript, asp.net

伙计们，我想在 javascript 中获取 asp.net 标签控件的文本，但它显示我的值未定义。我不知道我在哪里弄错了，因为我对 javascript 了解不多。在此先感谢，任何类型的帮助都将不胜感激。

我的代码是这样的：

```
 <script type="text/javascript" language="javascript">
        function getIndex(index) {
                        var x = document.getElementsByName('lblAmount').Text;
            alert(x + ' ');
    }
    </script> 
```

标签是这样的

```
 <asp:Label ID="lblAmount" runat="server" Text="666"></asp:Label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:31:41.370

```
var x = document.getElementsByName('lblAmount').innerHTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:32:42.420

函数 getIndex(index) { var x = document.getElementsByName('lblAmount').Text; 警报（x + ' '）；}

应该

```
 <script type="text/javascript" language="javascript">
        function getIndex(index) {
                        var x = document.getElementsById('lblAmount').value;
            alert(x + ' ');
    }
    </script> 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T00:26:16.300

要获得呈现控件的名称，请使用以下命令`UniqueID`：

```
 <script type="text/javascript" language="javascript">
 function getIndex(index) {
       var x = document.getElementsByName('<%=lblAmount.UniqueID%>').innerHTML;
       alert(x + ' ');
 }
 </script> 
```

并且`asp:Label`被渲染为，因此您可以使用（不是文本或值）`span`获得跨度内的内容`innerHTML`

这

`UniqueID`给出呈现的名称
`ClientID`给出呈现的 id
`ID`给出你可以在后面的代码中使用的 id

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T18:48:39.687

尝试：

```
var x = document.getElementById('lblAmount').innerHTML; 
```

# php - 奇怪的“mysql_num_rows() 期望参数 1 是资源”错误

> ID：15602343
> 
> 赞同：-6
> 
> 时间：2013-03-24T18:30:52.753
> 
> 标签：php, html, mysql

我在这里跟随一个教程系列：[https](https://www.youtube.com/watch?feature=player_embedded&v=bribF8a3fgo) ://www.youtube.com/watch?feature=player_embedded&v=bribF8a3fgo我正在使用下面的代码，是的，我知道有更好的方法来做到这一点。虽然我收到此错误：

```
Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given in   /Applications/XAMPP/xamppfiles/htdocs/friends/login.php on line 26 
```

我不知道为什么，我很确定我输入的所有内容都是正确的，但我不确定。介意看看吗？谢谢。

```
<html>
<head>
<title>Login - Friend System</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
    <?php include 'connect.php'; ?>

<?php include 'functions.php'; ?>

<?php include 'header.php'; ?>

<div class="container">
<h3>Login</h3>
<form method="post">
<?php
    if (isset($_POST['submit'])) {
        $username = $_POST['username'];
        $password = $_POST['password'];

        if (empty($username) or empty($password)) {
            $message = "Fields Empty, Please Recheck";
        }else {
            $check_login = mysql_query("SELECT id FROM users WHERE username='$username' AND password='" . md5($password) . "'");     

            if(mysql_num_rows($check_login) == 1) {
                $message = "Ok!";
            } else {
                $message = "Username and/or password incorrect!";
            }
        }

        echo "<div class='box'>" . $message . "</div>";
    }
?>
    Username: <br/>
    <input type="text" name="username" autocomplete="off"/>
    <br/><br/>

    Password: <br/>
    <input type="password" name="password" />
    <br/><br/>

    <input type="submit" name="submit" value="Register">
</form>
</div>

</body>
</html> 
```

第 26 行是：

```
if(mysql_num_rows($check_login) == 1) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:36:59.670

如果查询失败，它将返回布尔值`FALSE`而不是结果集资源。

您应该**始终**检查返回值是否表示错误，然后以有意义的方式处理错误，例如通过记录错误消息。例如：

```
if ($check_login === false) {
    die("Error in query: ".mysql_error());
}

if (mysql_num_rows($check_login) == 1) { ... 
```

顺便说一句，这个旧`mysql`API[已被弃用，不应在新的 PHP 代码中使用](http://www.php.net/manual/en/intro.mysql.php)。建议使用`PDO`or`mysqli`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:34:16.697

$check_login 的上下文不是有效的查询。“选择”是正确的术语。每当查询无效时，它都会返回该错误。

```
$check_login = mysql_query("SELECT id FROM users WHERE username='$username' AND password='" . md5($password) . "'"); 
```

# javascript - 有没有办法根据另一个变量的值来制作动态变量名？

> ID：15602347
> 
> 赞同：0
> 
> 时间：2013-03-24T18:31:19.880
> 
> 标签：javascript

有没有办法让一个变量的值成为另一个变量的名称？例如，我希望变量名 ( **value_of_i** )是该迭代期间的任何数字**“i” 。**下面的while循环不是我使用它的目的，它只是为了解释我在问什么。

```
var i = 1;
while(i<10)
{

var value_of_i = "This loop has ran " + i + "times.";

i++;
} 
```

对于第一次迭代，“i”等于 1，所以我希望变量名是“1”：

```
var 1 = "This loop has ran " + i + "times."; 
```

第二次互动：

```
var 2 = "This loop has ran " + i + "times."; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:33:38.613

是的。使用[括号表示法](http://es5.github.com/#x11.2.1)（这是[MDN 中的教程](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)）

[**这是一个工作小提琴**](http://jsfiddle.net/Jqn8t/)

当`containingObject[stringVariable]`您执行类似访问的属性时，该属性`containingObject`的**名称**是存储在`stringVariable`.

```
// this assumes browser JavaScript where window is the global namespace
// in node.js this would be a little different
var i=0;
while(i<10){ 
   window["counters"+i] = "This is loop has ran " + i + "times.";
   i++;
}
console.log(counters3); 
```

如果您愿意，可以使用`this`而不是窗口，但是这在严格模式下可能会失败。

以下是上面 MDN 链接中括号符号如何工作的主要解释：

JavaScript 对象的属性也可以使用方括号表示法访问或设置。对象有时称为关联数组，因为每个属性都与可用于访问它的字符串值相关联。因此，例如，您可以按如下方式访问 myCar 对象的属性：

```
myCar["make"] = "Ford";
myCar["model"] = "Mustang";
myCar["year"] = 1969; 
```

您还可以使用存储在变量中的字符串值来访问属性：

```
var propertyName = "make";
myCar[propertyName] = "Ford";

propertyName = "model";
myCar[propertyName] = "Mustang"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:34:25.310

您不能将变量名称设为数字，它不是有效名称。所以`var 1=""`无效。

但是要动态设置你可以做的值

```
var x = "variablenamehere";

window[x] = "variablevaluehere"; 
```

那是一样的

var 变量名here

除了它将被限定为全局变量并且可以在任何地方访问，而不是仅限于当前函数范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:35:14.023

为什么不将您的存储`strings`在`array`由 索引的`i`？

这样您就可以在以后高效、轻松地引用它们；

```
var loopI = new Array();

for(var i = 0; i < 10; ++i) {
    loopI[i] = "This loop has ran " + i + "times.";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-21T22:57:17.260

这有效：

```
var o = {};
var d = "dog";
for (var k = 0; k < 5; k += 1) {
    o[d+k] = k*100;
}
console.log(o.dog3);  // 300 
```

这更接近于做你想做的事：

```
var N = {};
var M = {};
var i = 1;
while(i<10)
{
    N[i] = "This loop ran " + i + " times.";
    // Or, so you can use dot notation later:
    M['OO'+i] = "This loop ran " + i + " times.";
    // Those are capital O's, not zeros. Numbers won't work.
    i++;
}
console.log(N[3]); // This loop ran 3 times.
console.log(M.OO7); // This loop ran 7 times. 
```

'OO' 符号可能会导致其他人试图使用您的代码时感到困惑和浪费时间；但它也可能是他们的娱乐来源。这让我想起了一个棋盘，白棋的前两步是带出一个马然后放回去。然后棋盘似乎显示黑棋先走，有些人会无休止地坚持认为该配置证明存在非法游戏，除非有人告诉他们发生了什么。

# c# - 如何模拟程序的特定时间？

> ID：15602354
> 
> 赞同：1
> 
> 时间：2013-03-24T18:32:09.493
> 
> 标签：c#, .net

这个问题有点难以理解，但我想做的是启动一个程序并让该程序认为系统时钟是“其他日期和时间”，而不是实际更改系统时间。如何使用 C# 以编程方式执行此操作？

PS：我无法以任何方式更改我启动的程序。

编辑：我刚刚意识到该程序仅在启动约 4-6 秒后检查一次时间。所以我只需将系统时钟更改10秒并恢复它！感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:38:28.553

您将不得不拦截对 winAPI 的调用，例如`GetSystemTime`. C# 不是处理此类事情的最佳工具，但没有什么不可能。使用任何支持 C# 的 detours 库。想办法修改程序地址空间（远程线程`WriteProcessMemory`，，过滤DLL）。

这是您可以在哪里找到解决方案的一个非常笼统的想法。

虽然如果你要问如何拦截对操作系统的程序调用，你在这里几乎不会得到任何答案，至少如果你没有表现出自己的努力的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:45:43.330

如果您知道您的应用程序使用了哪些日期/时间函数，则可以调查这些 CLR 方法使用的系统调用。`DateTime.Now`一旦你知道了，你就可以在那些调用被截获的环境中测试你的软件，大概是在 .NET 中给出“假”响应。

有一些实用程序可以为您执行此操作，例如[http://www.nirsoft.net/utils/run_as_date.html](http://www.nirsoft.net/utils/run_as_date.html)

我不知道该实用程序拦截的特定系统调用是否是框架使用的系统调用，例如`DateTime.Now`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-22T13:35:41.137

这是老问题，但我的回答可能会对某人有所帮助。我们在项目中所做的是使用这样的界面：

```
interface IDateTime
{
    DateTime Now();
    ....
} 
```

然后你在任何地方都使用 IDateTime 而不是常规的 DateTime，并使用 IoC 来获取 IDateTime 的实例。

因此，您可以创建 Now() 的任何实现。在编写单元测试时真的很有帮助。

# android - 创建自定义侦听器

> ID：15602359
> 
> 赞同：2
> 
> 时间：2013-03-24T18:32:32.060
> 
> 标签：android

如何为诸如此类的事情创建自定义侦听器

`int`1.如果活动的字段达到特定值，则应调用相关侦听器的方法

2.当光传感器读取到特定值时，应该调用监听器的另一个方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T22:40:00.787

您可以为此实现自己`Interface`的。[在这里](https://stackoverflow.com/a/8293106/1376688)你可以找到一个例子。

希望这可以帮助。

# javascript - 为按钮制作一个通用加载图标？

> ID：15602363
> 
> 赞同：1
> 
> 时间：2013-03-24T18:32:48.257
> 
> 标签：javascript, jquery, html

我正在尝试创建某种类型的“通用”加载指示器，该指示器将出现在单击的按钮旁边。例如; 我的页面有两个按钮，一个用于联系表格，另一个用于订阅表格。我的第一个想法是通过 jQuery 在每个按钮旁边创建一个自定义 div。但是，我试图避免在我的页面上出现错误的 div。

我尝试使用的代码使加载指示器出现在按钮内部而不是外部。这是带有 JSFiddle 链接的代码：

[JSFIDDLE 链接](http://jsfiddle.net/FHmqF/1/)

CSS

```
#contact, #subscribe {
    margin:50px;
    width:100px;
    height:25px;
}
.indicator {
    position:relative;
    float:right;
    top:-23px;
    right:-25px;
    width:16px;
    height:16px;background:url(../graphics/loader.gif) no-repeat;
} 
```

jQuery

```
$('#contact-submit').click(function()
{   
    $(this).addClass('indicator');
});
$('#subscribe-submit').click(function()
{   
    $(this).addClass('indicator');
}); 
```

HTML

```
<div id="contact">
    <button id="contact-submit">Contact</button>                                            
</div>  
<div id="subscribe">
    <button id="subscribe-submit">Subscribe</button>                                            
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:40:15.187

也许你可以利用伪元素`:after`？例子：

```
.indicator {
    position: relative;
}
.indicator:after {
    content: '';
    position: absolute;
    top: 50%;
    right: 3px;
    margin-top: -8px;
    width: 16px;
    height: 16px;
    background:url(http://www.graphicsoptimization.com/blog/wp-includes/images/go_examples/2008_05/indicator.gif) no-repeat;
} 
```

[http://jsfiddle.net/FHmqF/3/](http://jsfiddle.net/FHmqF/3/)

*免责声明：这种方法不适用于`<input type="button">`按钮，因为这些元素不能有内部内容。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:40:55.667

就像 Mike 已经指出的那样，您正在将类附加到按钮本身，尝试这样的事情并玩弄 css，或者告诉我您想要在哪里放置指示器。

```
$('#contact-submit').click(function()
{   
    $('<div class="indicator"></div>').appendTo($(this).parent());
});
$('#subscribe-submit').click(function() 
{   
    $('<div class="indicator"></div>').appendTo($(this).parent());
}); 
```

[http://jsfiddle.net/Ls3LW/](http://jsfiddle.net/Ls3LW/)

# java - 在保存、更新和删除时发出事件的 DAO

> ID：15602373
> 
> 赞同：1
> 
> 时间：2013-03-24T18:33:43.390
> 
> 标签：java, spring, jdbc, spring-jdbc

我创建了几个 DAO 类（我正在使用 Spring JDBC），我想在保存、更新和删除时发出事件，以便我也可以更新搜索索引。

一种方法是在每个 DAO 中创建事件发出逻辑，但这将是很多重复。所以我想到了使用 AOP 和一个“周围的建议”，但我不知道这是否是使用 AOP 的正确“时间”。还有其他更适合的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:08:50.343

我会通过为所有 CRUD dao 创建一个抽象基类来做到这一点。基本接口将采用某种回调机制，看起来像这样：

```
public abstract class AbstractCrudDao<T> {
    public void create(T t, CompleteCallback completeCallback)
    {
        create(t);
        completeCallback.onComplete();
    }

    public abstract void create(T t);

    //same for read, update, delete

    public interface CompleteCallback {
        void onComplete();
    }
} 
```

显然这是一个远非完整的例子，但我认为它展示了利用回调作为完成触发器的想法。您也可以进一步扩展接口以接收 onException 事件。

如果您使用 Spring 的事务管理，您可能需要根据您是否希望回调事件发生在事务内部或外部进行一些进一步的调整。

就个人而言，除非您不拥有 DAO 代码，否则我不会为此使用 AOP，但即使是这种情况，也可能首选其他一些机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:36:32.310

您也可以通过使用侦听器来做到这一点。流程有点反转，因为子类利用父类作为各种帮助。

```
public abstract class AbstractCrudDao<T> {
    private Collection<Listener> listeners = new HashSet<Listener>();

    public void addListener(final Listener listener) {
        listeners.add(listener);
    }

    protected void doAction(CrudAction<T> crudAction)
    {
        for(Listener listener : listeners) {
             listener.beforeAction();
        }
        crudAction.doAction();
        for(Listener listener : listeners) {
             listener.afterAction();
        }
    }

    public interface CrudAction {
        void doAction();
    }

    public interface Listener {
        void beforeAction();
        void afterAction();
    }
}

public class CarDao extends AbstractCrudDao {
    public void create(Car car) {
        doAction(new CrudAction() {
            public void doAction() {
                //create car here
            }
        });
    }
} 
```

您可以为每个 CRUD 操作制作一个单独`Collection`的`Listener`'s，或者根据您的喜好更改它。

# blackberry-10 - 将 Android 应用程序移植到 BlackBerry 10

> ID：15602374
> 
> 赞同：0
> 
> 时间：2013-03-24T18:33:50.413
> 
> 标签：blackberry-10, blackberry-playbook, blackberry-android

我有兴趣将我的 Android 应用程序移植到 BlackBerry 10。我知道可以移植到 PlayBook，但是这种风格移植对 BlackBerry 10 也有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:35:31.403

是的，Blackberry Playbook 是基于 QNX-OS 构建的，与 Blackberry 10 的基础相同（以及它是/将可升级的原因）。您应该能够将任何现有的 Android 应用程序移植到 Blackberry 10。您可以直接移植代码，也可以使用适用于 Blackberry 的 Android App Player 移植代码，下面的链接中对这两者都有更详细的说明。

这是有关该过程的一些文档的链接：http: [//developer.blackberry.com/native/documentation/bb10/porting_from_android_ndk.html](http://developer.blackberry.com/native/documentation/bb10/porting_from_android_ndk.html)

最后，如果您已经移植到 Playbook 并想现在移植到 BB10：http: [//developer.blackberry.com/android/documentation/port_android_app_pb_to_bb10.html](http://developer.blackberry.com/android/documentation/port_android_app_pb_to_bb10.html)

# javascript - 区分点击的链接？

> ID：15602379
> 
> 赞同：0
> 
> 时间：2013-03-24T18:34:19.010
> 
> 标签：javascript, html

我对 HTML/CSS/JS 等非常陌生，只是出于爱好创建了一个小原型页面。

我在尝试重用特定的 javascipt 时遇到了困难，如下所示：

```
<script type="text/javascript">
function noDownload()
{
document.getElementById("nodownload").innerHTML="Download unavailable.";
}
</script> 
```

然后在页面的下方，我将拥有以下内容：

```
<h3>r9 (Mar 23, 2013) <a id="nodownload" onClick="noDownload()"><img id="nodownload" height="19" width="19" src="[imagerurl]"></a></h3> 
```

然后它会再显示几次......

```
<h3>r7 (Jan 11, 2013) <a id="nodownload" onClick="noDownload()"><img id="nodownload" height="19" width="19" src="[imageurl]"></a></h3> 
```

如果我单击 r9 图像，我会得到我想要的结果 - 图像被替换为文本“下载不可用”。

但是，如果我单击 r7 图像，则将 r9 图像替换为文本，而不是 r7 图像。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:35:48.107

**ID 应该始终是唯一的**- 使用唯一 ID 或给它们一个公共类。

在这里，我给他们每个人一个唯一的 ID：

```
<h3>r1 (Jan 7, 2013) <a id="noDownloadOne" onClick="noDownload('aOne')"><img height="19" width="19" src="http://i.imgur.com/In5SIVc.png">a</a></h3>
<h3>r2 (Jan 7, 2013) <a id="noDownloadTwo" onClick="noDownload('aTwo')"><img height="19" width="19" src="http://i.imgur.com/In5SIVc.png">a</a></h3> 
```

然后根据选择的内容，相应地更改 innerHTML：

```
<script type="text/javascript">
function noDownload(e) {
    if(e == 'aOne') {
      document.getElementById("noDownloadOne").innerHTML="Download unavailable One.";
        alert('aOne was chosen');
    }
    else if(e == 'aTwo') {
      document.getElementById("noDownloadTwo").innerHTML="Download unavailable Two.";
        alert('aTwo was chosen');
    }
    else {
        alert('Neither aOne nor aTwo was chosen');
    }
}
</script> 
```

这是一个有效的 jsFiddle - [http://jsfiddle.net/Ezauy/2/](http://jsfiddle.net/Ezauy/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:38:44.440

不要对两个不同的元素使用相同的 ID

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:58:35.840

事实上，你根本不需要使用 id 来让你的代码工作。您可以传递对在处理程序中单击的元素的引用。例如：

```
<script type="text/javascript">
    function handleClick(target) {
        console.log(target); // for debugging
        target.innerHTML='clicked';
    }
</script>

<a href="#" onclick="handleClick(this)">click me</a> 
```

编辑：事实证明，自从我以这种方式将锚点连接到一个函数已经很久了，我并没有完全正确。我现在已经修好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T18:37:32.253

在 HTML ID 中，应该在页面上是唯一的，所以我猜测如果有多个，它只会选择具有匹配 ID 的第一个元素。如果你想重用它，那么你可以使用`class="nodownload"`而不是`id="nodownload"`.

# java - 当该方法已更改时，调用Java反射的方法不在运行时更新该方法

> ID：15602382
> 
> 赞同：0
> 
> 时间：2013-03-24T18:34:25.697
> 
> 标签：java, reflection

我有一个课堂演示：

```
public class Demo {
        public static void main(String[] args) {
                System.out.println("Hello World!");
        }
    } 
```

在运行时我调用main方法：

```
 Class cls = Class.forName(packClassName);
    Method thisMethod = cls.getMethod("main", String[].class);
    thisMethod.setAccessible(true);
    thisMethod.invoke(cls.newInstance(), (Object)str); 
```

它打印“Hello World！” 信息。现在，一段时间后，我将演示类的打印消息更改为“Hello java”而不是“Hello World！” 并再次编译 Demo 类。现在我再次通过与上面相同的代码调用该方法，但我无法获得更新的消息。它会打印“Hello World！” 我如何打印更新的消息。请帮我。

现在，我刚刚做了两件事： 1\. 实例化另一个新的 ClassLoader 实例

```
 cls = Class.forName("anotherClassName"); 
```

1.  删除class文件并重新编译

`boolean success = (new File ("filename")).delete();`

但仍然没有收到更新的消息...我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:38:57.523

一旦类加载器导入了你的类，它就不会再改变了。据我所知，没有办法卸载这样的类。因此，您无法更改正在加载的类。

我能想到的唯一方法是，如果您可以实例化另一个`ClassLoader`尚未加载类的新实例。

查看[这个](http://tutorials.jenkov.com/java-reflection/dynamic-class-loading-reloading.html)和[那个](http://www.javaworld.com/javaworld/javaqa/2003-03/01-qa-0314-forname.html)以获取更多信息。

# jquery - 将 Click 函数分配给使用 Dropkick jQuery 插件设置样式的选择元素

> ID：15602390
> 
> 赞同：0
> 
> 时间：2013-03-24T18:35:07.883
> 
> 标签：jquery, jquery-plugins, onclick

如何为使用[Dropkick jQuery 插件](http://jamielottering.github.com/DropKick/)`<select>`样式的元素分配“点击”功能？Dropkick 不直接支持函数，所以我试图创建一个单独的“点击”函数，但我尝试过的方法不起作用 `click`

```
$('#Select1').click(function () {
    var $select2 = $('#Select2');
    removeDefaultFromSelect($select2);
}); 
```

我知道必须为更改事件处理程序分配插件的“自定义`change`回调”，但我假设有一种方法可以`click`在使用 Dropkick 样式的元素上调用函数*（特别是因为[这个 SO 帖子](https://stackoverflow.com/a/7508128/1056713)似乎暗示有办法在 Dropkick 的“自定义`change`回调”中调用它）*。

我正在尝试添加一个单击功能，以便在单击“#Select1”时触发以下功能，而不仅仅是在更改时触发。我在这里发布了一个函数的工作示例：http: [//jsfiddle.net/chayacooper/zJ5c3/#username](http://jsfiddle.net/chayacooper/zJ5c3/#username)

*现有功能*

```
// Helper function that removes "_default" from the end of the option values for the given select element.
function removeDefaultFromSelect($select) {
    $select.find('option[value$=_default]').prop('value', function(i, value){ return value.replace(/_default$/g, '');
    });
}

$('#Select1').dropkick({
    change: function(value) {     
        var $select2 = $('#Select2');
        removeDefaultFromSelect($select2);
        $select2.val(value);      
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T19:43:44.530

我还没有找到将`click`事件与 Dropkick 一起使用的方法，但我通过创建 2 组`<select>`元素找到了一个有点复杂的临时解决方法 - 一组使用标准元素并隐藏*( `display:none`)*，另一组使用 Dropkick 和对用户可见。因为它使用该`change()`方法，所以如果用户单击下拉框然后有意识地决定保留“默认”值，则不会修改该值。

我已经用我在这里使用的方法发布了一个小提琴：http: [//jsfiddle.net/john_s/yhAX5/4/](http://jsfiddle.net/john_s/yhAX5/4/)。

```
function removeDefaultFromSelect($select) {
    $select.find('option[value$=_default]').prop('value', function(i, value){ return value.replace(/_default$/g, '');
    });
}

$('#Select1').dropkick({
    change: function(value) {
        var $select2 = $('#Select2');
        removeDefaultFromSelect($select2);
        $select2.val(value);
    }
}); 
```

# java - editText.toString=="something" 总是假的

> ID：15602391
> 
> 赞同：-23
> 
> 时间：2013-03-24T18:35:08.497
> 
> 标签：java, android, android-edittext

我正在尝试检查 editText 中的文本是否等于某个字符串。这是我的 if（每次我按下按钮时都会出现）：

`if(tx.getText().toString()=="bla")`

这是TX： `tx=(EditText)findViewById(R.id.editText1);`

我不知道为什么，但 if 从来都不是真的，我试图用这种方式通过 toast 来检查它：

```
Toast.makeText(getApplicationContext(),tx.getText().toString(), Toast.LENGTH_LONG).show(); 
```

它是“bla”，但仍然是错误的，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:36:20.403

你应该使用等于

```
if(tx.getText().toString().equals("bla")) 
```

equals 比较字符串，但 == 比较对象。

正如`@Frank`建议的那样，为了避免这样的 NPE 比较

```
if("bla".equals(tx.getText().toString())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:38:58.827

当您比较两个`String`对象时，您不会比较它们的字面值。您检查它们是否是同一个对象，通常情况并非如此。这就是为什么您要改用它的原因`mystring.equals("my string litereal")`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T18:37:50.617

您没有使用“==”来测试两个字符串的相等性。`equals`使用 String 类的方法。

# javascript - jQuery Validate submitHandler 不适用于 Ajax

> ID：15602392
> 
> 赞同：2
> 
> 时间：2013-03-24T18:35:13.113
> 
> 标签：javascript, jquery, ajax, django

我有以下表格：

```
 <form id="squatsForm"> 
        {% csrf_token %}
        <input type="text" name="amount" id="squatsVal" value="Squats" />
        <input type="hidden" name="exercise" value="squats" />
        <input type="submit" id="submitSquats" value="Add Squats"/><br />
    </form> 
```

我想验证表单，然后通过 Ajax 以该表单发送数据以进行进一步处理。我正在尝试使用`submitHandler`，因此表单不会执行使用 POST 请求加载新页面的默认操作，而是触发我的 Ajax 函数：

```
$(document).ready(function() {
    $('#squatsForm').validate({
        rules: {
            amount: {
                required: true,
                number: true    
               }   
            },  
        submitHandler: function(form) {
            $.post(
                "submitWorkout1",
                form.serialize(),
                function(data) {
                    var jsonData = $.parseJSON(data);
                    $("#squats").html(jsonData['amount']);
                }); 
            }   
        }); 
```

但是，当我尝试使用表单输入数据时，它会重新加载页面并且不执行 Ajax 请求。

在我实施验证之前，我的 Ajax 请求运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T20:41:22.023

它是否验证您的表格？

我没有足够的声誉来对您的问题发表评论，否则我只会问您是否只是忘记结束准备好的功能，或者只是在复制粘贴时错过了它。

我使用了您的代码并确认它没有运行。当我点击**Add Squats**按钮时，它只是重新加载页面，而不管我在**金额**字段中是否有正确的值。

但是，当我`});`在代码末尾添加 a 以正确结束 时`$(document).ready(function () {`，它起作用了！

它执行验证并触发我作为第一条语句放在`submitHandler`.

```
 $(document).ready(function () {
        $('#squatsForm').validate({
            rules: {
                amount: {
                    required: true,
                    number: true
                }
            },
            submitHandler: function (form) {
                $.post(
                            "submitWorkout1",
                           form.serialize(),
                           function (data) {
                               var jsonData = $.parseJSON(data);
                               $("#squats").html(jsonData['amount']);
                           }
                      );
            }
        });
    }); 
```

我希望您的问题的解决方案就像`ready`正确结束函数一样简单。如果不是，让我们一起进一步调试！让我知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T16:51:50.780

用 jquery 函数在 submitHandler 函数中包装“form”变量将修复它

```
$(document).ready(function() {
    $('#squatsForm').validate({
        rules: {
            amount: {
                required: true,
                number: true    
               }   
            },  
        submitHandler: function(form) {
            $.post(
                "submitWorkout1",
                $(form).serialize(),
                function(data) {
                    var jsonData = $.parseJSON(data);
                    $("#squats").html(jsonData['amount']);
                }); 
            }   
        }); 
```

请看这个答案： [https ://stackoverflow.com/a/10861735/1497042](https://stackoverflow.com/a/10861735/1497042)

# dom - 在指令之外在 AngularJS 中操作 DOM？

> ID：15602394
> 
> 赞同：0
> 
> 时间：2013-03-24T18:35:15.777
> 
> 标签：dom, angularjs

这个[plunkr](http://plnkr.co/edit/logwOpfzNViPqTbp0hJ2?p=preview)说明了 AngularJS 对某些 HTML 元素的问题（特别是 table re: [gist](https://github.com/angular/angular.js/issues/1459) --这就是为什么 ui.bootstrap.collapse 也不适用于表格）

正如您从 plunkr 中看到的那样，我可以很好地隐藏和删除静态行，但生成的行通过`ng-repeat`不起作用。使用`ng-transclude`也不能解决问题，因为浏览器会重新排序节点，或者删除没有正确根元素的节点。

我想做的核心是在表中创建可扩展的行。每个扩展都是一个相当复杂的表结构，其中包括嵌套的 `ng-repeats

我知道我*可以*用表格样式重写我的表格 div，或者尝试为扩展表格创建一个指令，但似乎需要*大量*额外的工作才能基本上拥有这个：

```
<tr onclick="$('#exp').toggle()">
  <td>1</td>
</tr>
<tr id='exp'>
   <td>2</td>
</tr> 
```

那么有没有一种替代的、惯用的 Angular 方法来设置 onclick 处理程序而没有所有这些麻烦，或者我只是说' [eff it Dude，让我们去打保龄球](http://www.youtube.com/watch?v=Ywmfnz7sD98)'，然后在我的 html 中连接一个 onclick。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:42:26.217

您可以使用 ng-hide（或 ng-show）来进行简单的 hide&show 布尔逻辑。对于在“点击”行上应用自定义类，您可以使用 ng-class：

```
<table>
  <tr ng-click='hideRow2 = !hideRow2' ng-class="{active: !hideRow2}">
    <td>1</td>
  </tr>
  <tr ng-hide="hideRow2">
    <td>2</td>
  </tr>
  <tr ng-click='hideRow4 = !hideRow4' ng-class="{false: 'active', true: 'default'}[hideRow4]">
    <td>3</td>
  </tr>
  <tr ng-hide="hideRow4">
    <td ng-repeat='e in els'>{{e}}</td>
  </tr>
</table> 
```

[普努克](http://plnkr.co/edit/rmHTK0KIrCvTfswZE2OQ)

# c# - WPF路径冲突检测？

> ID：15602400
> 
> 赞同：4
> 
> 时间：2013-03-24T18:35:36.787
> 
> 标签：c#, wpf, xaml, collision-detection, collision

我有两个六边形 ![十六进制 1 和 Hex2](../Images/20f58f35af49690990a363dfc75a7b86.png)

```
<Path Stroke="Black" HorizontalAlignment="Left" VerticalAlignment="Top" Fill="Red" StrokeThickness="1" Name="Hex1" Canvas.Left="31.343" Canvas.Top="26.866" Height="163.687" Stretch="Fill" Width="159.134" >
            <Path.Data>
                <PathGeometry >
                    <PathGeometry.Figures>
                        <PathFigureCollection >
                            <PathFigure StartPoint="43,0">
                                <PathFigure.Segments>
                                    <PathSegmentCollection >
                                        <PolyLineSegment Points="43,0"/>
                                        <PolyLineSegment Points="86,25"/>
                                        <PolyLineSegment Points="86,75"/>
                                        <PolyLineSegment Points="43,100"/>
                                        <PolyLineSegment Points="0,75"/>
                                        <PolyLineSegment Points="0,25"/>
                                        <PolyLineSegment Points="43,0"/>
                                    </PathSegmentCollection>
                                </PathFigure.Segments>
                            </PathFigure>
                        </PathFigureCollection>
                    </PathGeometry.Figures>
                </PathGeometry>
            </Path.Data>
        </Path>
        <Path Stroke="Black" HorizontalAlignment="Left" VerticalAlignment="Top" Fill="Aqua" StrokeThickness="1" Name="Hex2" Canvas.Left="455.224" Canvas.Top="210.448" Height="163.687" Stretch="Fill" Width="159.134" >
            <Path.Data>
                <PathGeometry >
                    <PathGeometry.Figures>
                        <PathFigureCollection >
                            <PathFigure StartPoint="43,0">
                                <PathFigure.Segments>
                                    <PathSegmentCollection >
                                        <PolyLineSegment Points="43,0"/>
                                        <PolyLineSegment Points="86,25"/>
                                        <PolyLineSegment Points="86,75"/>
                                        <PolyLineSegment Points="43,100"/>
                                        <PolyLineSegment Points="0,75"/>
                                        <PolyLineSegment Points="0,25"/>
                                        <PolyLineSegment Points="43,0"/>
                                    </PathSegmentCollection>
                                </PathFigure.Segments>
                            </PathFigure>
                        </PathFigureCollection>
                    </PathGeometry.Figures>
                </PathGeometry>
            </Path.Data>
        </Path> 
```

我需要检测两个六边形之间的碰撞

案例1（碰撞） ![在此处输入图像描述](../Images/9ad5b3580de984bbb8a69349404816bd.png)

案例2（碰撞） ![在此处输入图像描述](../Images/bbec38d32533f6a07679b2d59bd8de3b.png)

案例3（无碰撞） ![在此处输入图像描述](../Images/6c468c899592e8b259fdf91c68206755.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T18:59:14.773

您应该能够通过[`FillContainsWithDetail`](http://msdn.microsoft.com/en-us/library/ms607451.aspx)它们的几何方法获得两条路径的交集：

```
var intersectionDetail = path1.Data.FillContainsWithDetail(path2.Data);

if (intersectionDetail != IntersectionDetail.NotCalculated &&
    intersectionDetail != IntersectionDetail.Empty)
{
    // collision
} 
```

# jquery - div 填充但未显示在 HTML5 选项卡中

> ID：15602404
> 
> 赞同：1
> 
> 时间：2013-03-24T18:35:59.290
> 
> 标签：jquery, html

我在 html5 选项卡中有一个 div，它显示 RSS 提要的结果，该提要是从 jQuery 填充的。jQuery 运行并填充了 div，但由于某种原因，height 属性始终设置为 0，这使得它在选项卡中不可见。如果我将 div 放在选项卡之外，它可以正常工作。这是代码：

```
<script type="text/javascript">
$(document).ready(function () {
$('#rssFeed').rssfeed('http://news.google.com/news?hl=en&gl=us&q=alabama+football&um=1&ie=UTF-8&output=rss',{}, function(e) {
  $(e).find('div.rssBody').vTicker({ showItems: 4});
});    
});
</script> 
```

和 HTML：

```
<div class="tabpage" id="tabpage_10">  
    <div id="rssFeed"></div>
</div> 
```

这是实际页面的链接：http: [//www.inceptionsolutions.com/spread-option/division1-aa/sec/alabama-crimson-tide.html](http://www.inceptionsolutions.com/spread-option/division1-aa/sec/alabama-crimson-tide.html)

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:10:23.993

您的“rssBody”类的高度为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:40:03.197

无论出于何种原因，高度在某处被设置为 0。它在 HTML5 选项卡之外工作，我检查了 HTML5 选项卡 css，它没有被设置在那里，所以不确定它被设置在哪里。我将此添加到 RSS 提要 css 以修复它：

```
.rssBody {
overflow: hidden;
position: relative;
height: 748px;
}

.rssBody li.rssRow{
margin:0px;
padding:0px;
height:187px;
} 
```

# java - PreparedStatements 或 callableStatements

> ID：15602407
> 
> 赞同：3
> 
> 时间：2013-03-24T18:36:15.073
> 
> 标签：java, jdbc

我试图理解`PreparedStatements`&之间的区别`CallableStatements`，但我无法理解。所以请任何人都可以将以下`sql`查询转换为`CallableStatement`. 我知道如何将 Statement 转换为 a`PreparedStatement`但在`CallableStatements`.

作为一个`java.sql.Statement`

```
SELECT * FROM Customer WHERE customerId = 'C001' 
```

作为一个`java.sql.PreparedStatement`

```
SELECT * FROM Customer WHERE customerId = ? //set customerId using preparedStatement.setString(1,"C001") 
```

如何在`CallableStatements`

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T18:40:11.013

如[CallableStatement API](http://docs.oracle.com/javase/6/docs/api/java/sql/CallableStatement.html)中所述：

> 用于执行 SQL 存储过程的接口。

因此，它不能用于执行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:42:02.170

可调用语句用于访问存储过程。

您必须在数据库中编写存储过程

为了

```
SELECT * FROM Customer WHERE customerId = 'C001' 
```

和

请查看以下链接以获得有关可调用语句的帮助 -

1 > [http://www.mkyong.com/jdbc/jdbc-callablestatement-stored-procedure-out-parameter-example/](http://www.mkyong.com/jdbc/jdbc-callablestatement-stored-procedure-out-parameter-example/)

2> [http://www.tutorialspoint.com/jdbc/callablestatement-object-example.htm](http://www.tutorialspoint.com/jdbc/callablestatement-object-example.htm)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:39:59.280

检查这个

[存储过程和准备好的语句之间的区别..？](https://stackoverflow.com/questions/7296417/difference-between-stored-procedures-and-prepared-statements)

CallableStatement 主要用于 StoredProcedure

# html - 如何在 CSS 中使用外部字体？

> ID：15602409
> 
> 赞同：3
> 
> 时间：2013-03-24T18:36:22.277
> 
> 标签：html, css, google-chrome, firefox, font-face

我有使用字体*Tarminis*的 HTML 页面。此字体安装在我的 windows 字体文件夹中。因此，如果我使用 Chrome 打开页面，页面将按预期呈现。但是，如果我用 Firefox 打开页面，它的编码不正确。

所有数据都在这里：[https ://dl.dropbox.com/u/72276354/snowbank.zip](https://dl.dropbox.com/u/72276354/snowbank.zip)

不知何故，Firefox（也是 Opera）无法将文本编码到括号中。所以我想做的是把这个字体和我的网页放在同一个文件夹中，然后从那里加载。我一直在尝试使用 CSS`@font-face`功能，但没有运气。

那么如何强制我的网页使用字体*Tarminis*作为外部字体而不是系统字体？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T18:40:48.547

它应该像这样简单

```
@font-face {
        font-family: "Name of your font";
        src: url(name-of-font.ttf);
}
* {
    font-family: "Name of your font";
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T18:45:42.300

补充 Zane 的回答，浏览器/平台在渲染字体时往往存在兼容性问题，因此使用它们的最佳方法是提供多种格式，如下所示：

```
@font-face {
    font-family: 'Name of font';
    src: url('font.eot') format('embedded-opentype'); /* IE9 Compat Modes */
    src: url('font.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
     url('font-webfont.woff') format('woff'), /* Modern Browsers */
     url('font.ttf') format('truetype'), /* Safari, Android, iOS */
     url('font-webfont.svg#levenim') format('svg'); /* Legacy iOS */
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-24T18:44:18.247

如果字体的许可证允许 Web 嵌入，您可以使用[`fontsquirrel generator`](http://www.fontsquirrel.com/tools/webfont-generator)生成所有必要的文件，这些文件也适用于旧版浏览器。

它还为您提供了一个包含所有必要 css 代码的工作示例。

# c# - 在 C# 中为 Enterprise Architect Interop 创建“对象”元素

> ID：15602420
> 
> 赞同：2
> 
> 时间：2013-03-24T18:37:34.373
> 
> 标签：c#, enterprise-architect

我环顾四周，没有找到关于如何在 Enterprise Architect 的 C# 中创建图表的示例/文档，并且对于我的具体情况，“对象”类型的元素。

我正在为 EA 工作，以从另一个 Web 应用程序导入 UserStories，然后作为**复合对象**导出到 EA ，我可以包含一些子对象（直接从子用户故事映射）。

我该怎么做，或者我在哪里阅读如何做到这一点？

探索 EA_Interop 参考，我坚持：

```
EA.DiagramObject d = new DiagramObject();
EA.Element e = new Element(); 
```

在第一种情况下将对象添加到可能的对象列表中，并在第二种情况下将元素指定为对象 - 均未成功。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T04:46:50.157

Enterprise Architect 的对象模型基于集合，您可以通过查找集合并扩展它来添加新对象。因此，您通过在图表的 DiagramObjects 集合上调用 AddNew() 创建一个新的图表对象，通过在（通常）包的 Elements 集合上调用 AddNew() 创建一个新元素，通过在源上调用 AddNew() 创建一个新的连接器元素的连接器集合等。

# python - 如果在 if python

> ID：15602421
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:37:35.270
> 
> 标签：python, if-statement, python-2.7

我一直在搜索，但找不到帮助我纠正此问题的信息。

为了练习 Python 编程，我正在编写用于家庭自动化的控制代码。我从温度转换计算器开始，效果很好。然后我把它放在另一个“if”中，让它具有改变温度和读取当前温度的功能。这将我的转换器“if”作为我的控制“if”的子项。该程序打开良好，但只进入转换器的行。它不适用于作为一般控制一部分的“elif”语句。以下：

```
while True:

    task = (raw_input("What would you like to do? "))

    if task == 'Convert' or 'convert':
        ask = raw_input("C to get Celsius, F to get Fahrenheit: ")

        if ask == 'F':
            Cconvert = float(raw_input("Temp in C: "))
            F = Cconvert * 9 / 5 + 32
            print F, 'F'

        elif ask == 'C':
            Fconvert = float(raw_input("Temp in F: "))
            C = ((Fconvert - 32) * 5) / 9
            print C, 'C'

        else:
            print "That is not a temperature measurement I understand."

    elif task == "ChangeTemp":
        temptype = raw_input("Celsius or Fahrenheit? ")
        if temptype == "Celcius" or "celsius":
            temp = float(raw_input("New Temp: ")), str(temptype)
        elif temptype == "Fahrenheit" or "fahrenheit":
            temp = float(raw_input("New Temp: ")), str(temptype)
        else:
            print "That is not a temperature measurement I understand."

    elif task == "SetTemp":
        print temp

    else:
        print "I do not know what you are asking." 
```

如果在其他地方回答了这个问题而我根本找不到它，请链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T18:41:51.757

```
if task == 'Convert' or 'convert': 
```

该行将始终成功，因为它相当于

```
if (task == 'Convert') or ('convert'): 
```

`'convert'`单独作为布尔表达式将导致`True`. 正确的写法是这样的：

```
if task == 'Convert' or task == 'convert': 
```

您也可以执行以下操作之一：

```
if task in ('Convert', 'convert'):

if task.lower() == 'convert': 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:42:07.190

这不是你想要的：

```
if task == 'Convert' or 'convert': 
```

即使`task`is not `Convert`，`convert`也始终是 true 值。所以你永远不会到达那个`elif`部分。

你必须这样做：

```
if task == 'Convert' or task == 'convert': 
```

（考虑到上下文，忽略更好的方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:43:19.077

错误在这行代码中：

```
if task == 'Convert' or 'convert': 
```

用这行代码替换它：

```
if task == 'Convert' or task == 'convert': 
```

或者更好的是，使用str的[lower()方法：](http://docs.python.org/2/library/stdtypes.html#string-methods)

```
if task.lower() == 'convert' 
```

# oracle - 在存储过程 Oracle [作业] 中使用参数作为 SQL 查询的一部分

> ID：15602429
> 
> 赞同：0
> 
> 时间：2013-03-24T18:38:37.697
> 
> 标签：oracle, parameters, sqlplus, procedure

我对存储过程和使用游标为多行运行 SELECT 有点困惑。我需要在 SQL 查询中使用 LIKE 子句。我已经测试过这实际上与我的存储过程一起使用：

```
SQL> /* THIS WORKS*/
SQL> create or replace procedure search_testimonials(
  2  curRETURN OUT sys_refcursor
  3  )
  4  IS
  5  begin
  6   OPEN curRETURN FOR 
  7   SELECT testimonial
  8   FROM testimonial
  9   WHERE testimonial like '%like%';
 10  END search_testimonials;
 11  /

Procedure created.

SQL> variable buffer refcursor;
SQL> execute Search_Testimonials(:buffer);

PL/SQL procedure successfully completed.

SQL> print buffer;

TESTIMONIAL
--------------------------------------------------------------------------------
I like the way OAG does business. I will be a repeat customer
I like the Cashier named David. I think he is a hottie! Go AOGS 
```

当我尝试将参数用作搜索词的一部分时，就会出现问题：

```
SQL> /* THIS DOES NOT WORK*/
SQL> create or replace procedure search_testimonials(
  2  search_term IN varchar2,
  3  curRETURN OUT sys_refcursor
  4  )
  5  IS
  6  begin
  7   OPEN curRETURN FOR 
  8   SELECT testimonial
  9   FROM testimonial
 10   WHERE testimonial like search_term||'%%';
 11  END search_testimonials;
 12  /

Procedure created.

SQL> 
SQL> execute Search_Testimonials('like', :buffer);

PL/SQL procedure successfully completed.

SQL> print buffer;

no rows selected 
```

我不知道为什么这不起作用。我还尝试使用@VARIABLE 表示法来传递正确的术语。我正在使用 SQLPlus 运行代码。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:46:04.897

改变

```
 WHERE testimonial like search_term||'%%' 
```

至

```
 WHERE testimonial like '%'|| search_term||'%' 
```

# iis - 在 IIS 上运行 Scrapy

> ID：15602439
> 
> 赞同：0
> 
> 时间：2013-03-24T18:39:52.590
> 
> 标签：iis, scrapy, scrapyd

我有一个 IIS 服务器，上面有一个 ASP.NET MVC 应用程序。MVC 应用程序将围绕 Scraped 数据展开。有没有办法在 IIS 上运行[Scrapy](http://scrapy.org/)（Python 内置的工具）？类似于我们如何在 IIS 上运行 PHP 和 WordPress。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:13:30.220

Scrapy [Tool](https://scrapy.readthedocs.org/en/latest/topics/commands.html)不需要 Web 服务器即可运行，是的，您可以[将它安装在 Windows 上](http://doc.scrapy.org/en/latest/intro/install.html#windows)。如果您正在谈论使用基于 Web 的图形界面，您可能必须自己编写，或者您可以跟上[邮件列表](https://groups.google.com/forum/?fromgroups=#!searchin/scrapy-users/gui)上的最新成果。

# r - 用 R 中的行改变 pch

> ID：15602442
> 
> 赞同：2
> 
> 时间：2013-03-24T18:40:14.670
> 
> 标签：r, plot

我想在图表上绘制几条线并让它们使用不同的`pch`：

```
plot(1:10, sample(1:10,10), pch=3)              
lines(1:10, sample(1:10,10), pch=1)    
lines(1:10, sample(1:10,10), pch=2)
lines(1:10, sample(1:10,10), pch=3)
lines(1:10, sample(1:10,10), pch=4)
lines(1:10, sample(1:10,10), pch=5) 
```

但是，所有命令似乎都使用忽略参数`lines`的相同绘图字符进行绘图。`pch`这样做的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T18:42:40.383

`type=`线条的默认设置是`l`只制作线条。要绘制线和符号添加`type="b"`或`type="o"`功能`lines()`。

```
plot(1:10, sample(1:10,10), pch=3)              
lines(1:10, sample(1:10,10), pch=1,type="o") 
```

`type="o"`表示该行将进入符号“内部”，并`type="b"`表示该行将在符号之前结束。

# c# - 对象脱离上下文

> ID：15602448
> 
> 赞同：0
> 
> 时间：2013-03-24T18:40:54.580
> 
> 标签：c#, json, asp.net-mvc, entity-framework, objectcontext

我的对象 eventTypeList 脱离上下文，即使它在使用中。有什么建议吗？

错误消息：ObjectContext 实例已被释放，不能再用于需要连接的操作。

```
public ActionResult GetEventTypeList()
{
    List<EventType> eventTypeList;
    using (var db = new ICTTBEntities())
    {
        eventTypeList = (from et in db.EventTypes select et).ToList();
        var result = new { Result = "OK", Records = eventTypeList };

        return Json(result, JsonRequestBehavior.AllowGet);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T10:16:11.457

将延迟加载设置为禁用：

```
[...]
using (var db = new ICTTBEntities())
    {
         db.Configuration.LazyLoadingEnabled = false;
         [...]
    } 
```

[在http://msdn.microsoft.com/en-us/library/bb896272.aspx](http://msdn.microsoft.com/en-us/library/bb896272.aspx)查看更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:45:36.840

问题可能是延迟加载而不是急切加载的一个或多个关系。好消息是您不需要`using`a 的语句，`DbContext`因为上下文已经管理了连接，几乎不需要 Dispose（参见[http://stephenwalther.com/archive/2008/08/20/asp-net -mvc-tip-34-dispose-of-your-datacontext-or-don-t.aspx](http://stephenwalther.com/archive/2008/08/20/asp-net-mvc-tip-34-dispose-of-your-datacontext-or-don-t.aspx)）。或者，您可以通过设置上下文的加载选项来确保您拥有的任何关系都被急切地加载。

注意：如果你使用 IoC 并注入上下文而不是直接创建它，你可以完全避免这个问题，因为 DI 框架会为你清理上下文。

# javascript - Firefox 在硬盘驱动器上运行 javascript 时运行缓慢，而不是上传文件

> ID：15602453
> 
> 赞同：1
> 
> 时间：2013-03-24T18:41:27.277
> 
> 标签：javascript, firefox

我目前正在开发一个基于 javascript 的游戏引擎。我在本地驱动器上运行它，因为将每一个小的更改重新上传到网络服务器需要太多时间。

本地副本在 Chrome 中运行良好（使用 --allow-file-access-from-files 参数），但在 Firefox (v19) 中，引擎速度大大降低。网站本身完全加载，但任何移动或点击反应都很慢，直到脚本崩溃。清除缓存或关闭选项卡不会让它更快。

但是，当我将站点上传到服务器时，它在 Firefox 中运行得很好。

我尝试在我的开发配置文件中禁用 security.fileuri.strict_origin_policy。它使它更快一点，但并不能解决所有的减速问题。

本地 javascript 在 Firefox 中运行速度较慢是否存在已知问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:56:02.533

`file:`为什么不使用本地 Web 服务器，而不是在 URL 上测试您的代码？然后一切都应该像在任何其他 Web 服务器上一样运行，并且您将能够在所有浏览器中测试您的应用程序，而无需摆弄它们的安全设置。

你在运行什么操作系统？您可以在任何流行的操作系统上轻松安装[XAMPP 。](http://www.apachefriends.org/en/xampp.html)在 Windows 上，有些人更喜欢[Uniform Server](http://www.uniformserver.com/)。在 OSX 上，您可以使用 XAMPP 或内置的 Web 服务器。

然后就像在任何其他服务器上一样将文件保存在本地 Web 服务器的`htdocs`目录中，并从 URL 加载您的应用程序`localhost:`，或者更好的是，使用您自己机器的主机名和`whatevermyhostnameis:`URL，以避免 localhost 可能的任何特殊安全处理收到。

# numbers - 使用 Applescript 将字符串的结尾编号分隔到变量中

> ID：15602456
> 
> 赞同：2
> 
> 时间：2013-03-24T18:41:55.420
> 
> 标签：numbers, applescript

我想知道是否可以检测到随机字符串末尾的数字。例如在这个字符串中：“localfile/random/1”我想分割这个字符串，所以一个变量将是字符串末尾的数字，第二个变量将是路径的其余部分。我无法谷歌任何东西。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T16:33:28.897

如果您可以仅在最后一个斜杠周围拆分字符串：

```
set x to "localfile/random/1"
set text item delimiters to "/"
{(text items 1 thru -2 of x) as text, last text item of x} 
```

仅当字符串始终以数字结尾时，这两种方法才有效：

```
on test(x)
    set c to count of x
    repeat with i from 1 to c
        if item (c - i) of x is not in items of "0123456789" then
            return {text 1 thru (c - i) of x, text (c - i + 1) thru -1 of x}
        end if
    end repeat
end test
test("localfile/random/1")

do shell script "sed -E $'s/([0-9]*)$/\\\\\\n\\\\1/' <<< " & quoted form of "localfile/random/1"
set {x, y} to paragraphs of result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:20:34.823

这将允许您拆分字符串，而无需在数字字符串之前指定最后一个字符：

```
set myString to "localfile/random/13451"
set delimiter to "||"

set {TID, text item delimiters} to {text item delimiters, delimiter}
set myItems to text items of (do shell script "sed -E 's/([0-9]+$)/" & delimiter & "\\1/' <<< " & quoted form of myString)
set text item delimiters to TID
return myItems 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-04T12:18:56.190

这个怎么样？

```
set s to "blah4"
set l to (get last character of s)
if "1234567890" contains l then log "yes" 
```

# php - 上传文件到服务器

> ID：15602462
> 
> 赞同：0
> 
> 时间：2013-03-24T18:42:22.617
> 
> 标签：php

我目前致力于将文件上传到网站，它应该只是将它交给一个文件夹。

这样我就无法上传文件并且没有文件或其他东西。

我需要稍后将文件信息保存到数据库中，其中一些东西已经进入服务器等。

应该加载到服务器的内容主要是 pdf 和 mp3 以及 zip 文件和 Word（doc 文件）

我试着这样做

```
<form action="#" enctype="multipart/form-data" method="post">
            <table width="100%">
                <tr>
                    <td>Upload</td>
                    <td><input type="file" name="file" class="new"></td>
                </tr>
                <tr>
                    <td>Materialer</td>
                    <td>
                        <select name="materialer" class="new">
                            <?php
                            $materialer = $mebe->materialer();
                            ?>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>File type</td>
                    <td>
                        <select name="materialer" class="new">
                            <?php
                                $file_type = $mebe->file_type();
                            ?>
                        </select>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td><input type="submit" name="upload_telefon" value="Upload" class="new"></td>
                </tr>
            </table>
        </form>
        <?php
        if(isset($_POST["upload_telefon"]))
        {
            $upload_file_typer_indhold = $mebe->upload_file_typer_indhold();
        }
        ?>

function upload_file_typer_indhold()
    {

        if($_FILES["file"]["error"] > 0)
        {

            echo "" . $_FILES["file"]["error"] . "";

        }
        else
        {

            move_uploaded_file($_FILES["fil1"]["tmp_name"], "upload/undervisning/");

        }
    } 
```

当我尝试上传时，它说：

**该站点无法访问**，它也站在旁边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:50:09.687

您应该使用另一个文件名而不是“#”：

```
<?php echo basename(__FILE__); ?> 
```

# javascript - 在可变数量上设置 Javascript 的 setInterval 函数——可能吗？

> ID：15602464
> 
> 赞同：0
> 
> 时间：2013-03-24T18:42:28.193
> 
> 标签：javascript, html, setinterval

因此，我使用 setInterval 逐步更改页面上的一些基本 HTML 文本。为简单起见，假设它只是一个计数器/指示灯。是否可以允许用户输入来调整 setInterval 值的速度？

在下面的代码中， playSpeed 保存了 PlayLife() 将被执行的值。它的默认值为 1500，但我在页面上有一个构造/表单，允许用户增加/减少速度。不幸的是，它不影响速度。我有一种预感，因为当读取 setInterval 时无论 playSpeed 是什么，它都是最终的，并且不会因为您更改 playSpeed 而改变。如果这是正确的，是否有任何解决方法？

谢谢！

```
var automateLife = setInterval(function(){PlayLife()}, playSpeed); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:44:12.973

您可以`setTimeout`改用：

```
 function timer() {
       PlayLife();
       setTimeout(timer, playSpeed);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:47:36.293

我猜这就像一个人生游戏，所以`setTimeout`不是你想要的。更改时`playSpeed`，您可以像这样重新设置间隔：

```
clearInterval( automateLife );
automateLife = setInterval(function(){PlayLife()}, playSpeed); 
```

它现在将有新的延迟。这将重置当前计时器，因此如果更新很快就会被推迟。要“解决”这个问题，您需要有一个更快的间隔并执行您自己的计时逻辑（例如，`frame`每次添加到一个变量，当它达到您的延迟时，将其重置为 0 并运行逻辑）

# uiwebview - 如何使用 MonoTouch Dialog 显示 HTML 字符串？

> ID：15602470
> 
> 赞同：0
> 
> 时间：2013-03-24T18:43:16.667
> 
> 标签：uiwebview, xamarin.ios, monotouch.dialog

我需要一种在 MonoTouch.Dialog 元素中显示带有 HTML 标记的字符串的方法。如果我理解正确，则 HTMLElement 中的构建仅用于加载要显示的外部数据。

所以我向谷歌询问并在这里找到了这个线程[display-uiwebview-in-custom-monotouch-dialog-element](https://stackoverflow.com/questions/12431208/display-uiwebview-in-custom-monotouch-dialog-element)但似乎现在解决方案也找到了我发现的其他一些搜索结果......

也许有人知道解决方案是否仍然可用，或者如果没有，有人知道一个库来转换字符串中的 HTML 标记，它会在标准元素中得到很好的外观......？

谢谢

安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:33:12.467

您可以创建一个 UIWebView 并在那里添加文本，然后使用 UIViewElement 来显示它。

但这有点偏重。

如果您只想为项目添加一些样式，也许您应该考虑使用 NSAttributedString。

# jquery - 注册表单上是否需要 CSRF 保护？

> ID：15602473
> 
> 赞同：38
> 
> 时间：2013-03-24T18:43:22.200
> 
> 标签：jquery, ruby-on-rails, csrf

默认情况下，Rails 会自动为所有表单添加 CSRF 保护，方法是`authentication_token`向站点生成的所有表单添加一个。

我真的希望我的网站在网站的首页上有一个简单的注册表单，这当然是一个静态 HTML 页面。理想情况下，这将完全避免碰到 Rails 堆栈，从而使我可以向首页提供更多请求。

这样做的缺点是它使 CSRF 保护更加困难。

但我想知道是否真的有必要在注册表单上设置 CSRF 保护，因为 CSRF 攻击通常依赖于受害者登录，以便可以利用信任。如果验证正确，注册表单*将使*用户登录，但我认为这对攻击者没有任何用处。

对此是否有既定观点或使用 Rails/jQuery 的解决方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-30T17:41:29.670

不，对于这种特定情况不是。CSRF 攻击允许攻击者利用受害者拥有的权利，例如`bank.com/pay?ammount=1000&to=34.67.978.246`

攻击登录表单是没有意义的，因为如果攻击者拥有对登录字段进行成功攻击所需的信息（用户名和密码），则攻击者可以自行登录。

Rails 在登录字段上使用 CSRF 保护的原因很简单：在全局范围内实现 CSRF 保护要比对 95% 的字段简单得多；）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-24T21:30:06.647

# 在 CSRF 上

首先，必须弄清楚 CSRF 到底是什么。

> [跨站请求伪造](http://en.wikipedia.org/wiki/Cross-site_request_forgery) 是一种对网站的恶意利用，通过该攻击从网站信任的用户传输未经授权的命令。

考虑以下示例：黑客知道您在 www.example.com 上有一个帐户，假设您已登录该网站，并且仍在运行有效会话。现在，黑客可以引诱您打开另一个网站，例如 trustme.com，他在该网站上发布了带有以下代码的图像：

```
<img src="http://www.example.com/users/delete"/> 
```

如果 www.example.com 的程序员实际上可以通过简单的 GET 请求通过该 URL 删除您的帐户，并且黑客知道，只需使用您的有效 cookie 查看和加载该图像就会删除您在 example.com 上的帐户，即使您只是浏览 trustme.com，而且这两个网站似乎彼此无关。

总结这个例子，CSRF 利用了站点在用户浏览器中的信任，在本例中是 www.example.com 在您的浏览器中的信任。

对您的案例使用该类比意味着利用您的站点对用户浏览器的信任 - 但该信任尚未建立，因为用户在看到您的表单时尚未登录。**但是，您必须确保用户在已经登录并尝试再次使用该表单加载页面时被重定向**，否则可以利用建立的信任。

因此，根据经验，每当您使用 cookie 和会话请求验证用户时，即确认或建立对用户的信任时，请使用 CSRF 保护。由于您希望在用户注册时建立对他的信任，因此同样适用。

不幸的是，CSRF 攻击不仅限于此。我发现了另外两件可能发生的事情（当然不限于此）：

1.：以下是监视您的帐户的一个很好的例子，通过省略登录表单上的 CSRF 保护来实现：

1.  黑客在您真正信任的网站 (youtrustthis.com) 上创建了一个帐户
2.  他使用自己的凭据从您的浏览器伪造登录请求，并诱骗您使用他的帐户
3.  如果您没有注意到您实际上是在以其他用户身份浏览 youtrustthis.com，那么攻击者稍后会看到您“代表他”所做的事情，这几乎是在监视您

2.：如果没有 CSRF 保护，黑客可以在他自己的 html 文档中模仿您的登录或注册表格，并方便地一次又一次地提交（或者只是使用终端上的[curl](http://curl.haxx.se)进行），而受信任的站点不会注意到请求没有实际上来自其本身——即，受信任域上的实际登录表单从未显示在您的浏览器中，也没有从那里提交。这使他能够更轻松地执行蛮力攻击。如果恶意用户成功地尝试找出凭据，您的服务器将响应一个有效的会话 cookie 并信任该用户，从而窃取您的身份。如果是注册表单，他将能够注册大量帐户，从而向您的数据库发送垃圾邮件。

总结一下：使用 CSRF 保护。恶意用户可以非常多地使用不安全的登录和注册表单来滥用您的网站并监视您的用户或窃取他们的身份。

有关更多信息，另请参阅[此类似问题（用于登录表单）](https://stackoverflow.com/questions/6412813/do-login-forms-need-tokens-against-csrf-attacks)和[此学术论文](http://seclab.stanford.edu/websec/csrf/csrf.pdf)。后者在第 3 页有关于登录 CSRF 的专门章节。另外，请查看此[CSRF 预防备忘单](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)。

# 关于潜在的解决方法

由于 CSRF 保护使用会话来比较在服务器端生成的令牌与从表单提交的令牌，我想不出一种仅在客户端执行此操作的方法，即不触及 Rails 堆栈。关键是客户端仅在生成服务器端后才收到令牌。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T14:28:52.473

在我看来，从注册表单中关注 csrf 几乎没有技术上的理由。攻击者可以欺骗某人在您的网站上创建一个新帐户 - 如果受害者随后使用您的网站，攻击者可以监视他们的行为，因为他也可以访问该帐户？

更有可能的风险可能是非技术性的。当您的站点获得安全审核时，您必须解释为什么 csrf 在这里没有风险......并且很难证明否定性......“Appscan 已将此标记为严重的安全漏洞 - 为什么不呢？修好它？为什么你不能像查尔斯一样有一个干净的报告？:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T00:37:59.717

如果你想缓存首页但仍然有 CSRF 保护（这可能是一个好主意，正如 Charles 所说），你可以在页面加载后通过 Javascript 注入适当的真实性令牌。

[在http://broadcastingadam.com/2011/05/advanced_caching_in_rails/](http://broadcastingadam.com/2011/05/advanced_caching_in_rails/)的“CSRF 和 form_authenticty_token”标题下有一些关于此的信息。相关代码为：

```
$("meta[name='csrf-token']").attr('content', '<% Rack::Utils.escape_html(request_forgery_protection_token) %>');
$("meta[name='csrf-param']").attr('content', '<% Rack::Utils.escape_html(form_authenticity_token) %>'); 
```

使用这种技术，您可以缓存整个主页，但代价是所有客户端都会发出额外的（但非常小且快速）请求来获取此身份验证令牌。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-06T15:45:46.440

一般来说，保护您的注册表单免受 CSRF 攻击是一个好主意。考虑 Google 搜索，并假设登录表单受到 CSRF 保护，但注册表单易受攻击。攻击者可以强制受害者使用攻击者知道的凭据注册一个新帐户，从那一刻起，受害者所做的任何搜索也将对攻击者可见，因为他知道登录受害者帐户的凭据。这假设易受攻击的站点在注册后立即登录用户。

电子邮件提供商的其他方案是创建用于垃圾邮件目的的帐户。攻击者可以强制受害者创建新帐户，并在注册表中使用 CSRF，并使用这些帐户发送垃圾邮件。这个想法是为了打败基于 IP 或国家/地区限制帐户创建的安全机制。

但是，在特定情况下，可能无法利用易受攻击的注册表单，但是对于该主题的非专家来说，这种分析可能很难。保护表单是个好主意，但是可以创建成功攻击的场景并不多，因此风险通常很低。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-24T09:11:08.823

是的，所以其他网站无法模仿您的注册表单！就如此容易。

**他们可以通过这样做获得什么？**

*   第一：你不想允许这样。你想拥有请求来自哪里。
*   第二：可以阻止虚假警报。
*   第三：如果您允许自动登录后注册，它与[登录表单 csrf一样容易受到攻击](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet#Login_CSRF)

# c++ - ASSIMP 与 directx9 网格化

> ID：15602484
> 
> 赞同：1
> 
> 时间：2013-03-24T18:44:26.723
> 
> 标签：c++, directx, direct3d9

可悲的是，[这个](https://stackoverflow.com/questions/14074280/load-a-obj-model-with-assimp-in-directx9)问题从未得到回答。

我正在尝试使用 ASSIMP 加载模型的 .X 文件 [或任何其他文件]。

这是我正在尝试使用的代码：

```
LPDIRECT3DVERTEXBUFFER9 vbuf;
IDirect3DDevice9* dev;
Assimp::Importer imp;
aiMesh* mm1;

struct CUSTOMVERTEX {
    float x,y,z;
    D3DVECTOR normal;
    float tx,ty;
};
#define CUSTOMFVF (D3DFVF_XYZ | D3DFVF_NORMAL | D3DFVF_TEX1)

void loadtextures() {
    const aiScene* sc=imp.ReadFile("model1.x",aiProcess_Triangulate | aiProcess_ConvertToLeftHanded | aiProcess_ValidateDataStructure | aiProcess_FindInvalidData);
    if (!sc) {
        MessageBox(NULL,"critical error in loading model file. see next dialog for errcode.",0,0);
        crash((char*) imp.GetErrorString());
    }
    if (!sc->HasMeshes()) {
        crash("failed to load model, meshes missing");
    }
    mm1=sc->mMeshes[0];
    if (!mm1) crash("no model found in file.");
    ZeroMemory(&vbuf,sizeof(vbuf));
    dev->CreateVertexBuffer(mm1->mNumVertices*sizeof(CUSTOMVERTEX),0,CUSTOMFVF,D3DPOOL_DEFAULT,&vbuf,NULL);
    CUSTOMVERTEX* vptr[1024];
    vbuf->Lock(0,0,(void**) &vptr,0);
    for(unsigned int i=0;i<mm1->mNumVertices;i++) {
        CUSTOMVERTEX* c=new CUSTOMVERTEX;
        c->x=mm1->mVertices[i].x; // after debugging, x,y,z are all 0.
        c->y=mm1->mVertices[i].y;
        c->z=mm1->mVertices[i].z;
        if (mm1->HasTextureCoords(i)) {
            c->tx=mm1->mTextureCoords[i]->x;
            c->ty=mm1->mTextureCoords[i]->y;
        } else c->tx=c->ty=0;
        if (mm1->HasNormals()) {
            c->normal=D3DXVECTOR3(mm1->mNormals[i].x,mm1->mNormals[i].y,mm1->mNormals[i].z);
        }
        vptr[i]=c;
    }
    vbuf->Unlock();
}

void draw_frame(HWND hwnd) {

    static float cr=0;cr+=0.01f;

    D3DXMATRIX mat_translate,mat_viewport,mat_projection,mat_roty,mat_rotx,mat_rotz;

    D3DXMatrixLookAtLH(&mat_viewport,&D3DXVECTOR3(0,0,-20),&D3DXVECTOR3(0,0,0),&D3DXVECTOR3(0,1,0));
    D3DXMatrixPerspectiveFovLH(&mat_projection,fov,(float) SCRW / (float) SCRH,1,100);
    D3DXMatrixRotationY(&mat_roty,roty);
    D3DXMatrixRotationX(&mat_rotx,rotx);

    mat_translate=mat_rotx*mat_roty;

    dev->Clear(0,NULL,D3DCLEAR_TARGET,D3DCOLOR_XRGB(0,0,0),1,0);
    dev->Clear(0, NULL, D3DCLEAR_ZBUFFER, D3DCOLOR_XRGB(0, 0, 0), 1.0f, 0);
    dev->BeginScene();
        dev->SetFVF(CUSTOMFVF);
        dev->SetTransform(D3DTS_WORLD,&mat_translate);
        dev->SetTransform(D3DTS_VIEW,&mat_viewport);
        dev->SetTransform(D3DTS_PROJECTION,&mat_projection);
        dev->SetStreamSource(0,vbuf,0,sizeof(CUSTOMVERTEX));
        HRESULT f=dev->DrawPrimitive(D3DPT_TRIANGLELIST,0,mm1->mNumFaces);
        if (FAILED(f)) {
            crash("failed to draw vertex buffer.",f);
        }
    dev->EndScene();
    dev->Present(NULL,NULL,NULL,NULL);
} 
```

没有 DirectX 错误，并且模型不显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:03:34.363

我能够使用 Assimp 成功地将任何网格格式加载到我的 directx9 应用程序中。如果您仍然坚持这一点，请告诉我。

现在，我只能在没有任何纹理的情况下在第 0 个索引处加载网格。处理其余的东西......让我知道:)

# java - Python 的 filter() 的 Java 类似物？

> ID：15602485
> 
> 赞同：3
> 
> 时间：2013-03-24T18:44:40.687
> 
> 标签：java, python

[是否有任何与 Pyton 的filter()](http://docs.python.org/2/library/functions.html)完全相同的 Java 方法？如果是这样，它在哪个图书馆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T18:47:35.123

它出现在 Java 8 中。目前，最好的办法是使用具有[`Iterables.filter()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Iterables.html#filter%28java.lang.Iterable,%20com.google.common.base.Predicate%29)(or [`FluentIterable.filter()`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/FluentIterable.html#filter%28com.google.common.base.Predicate%29)) 方法的 Guava 库。

# linux - 以 x86 nasm 进行除法时的浮点异常

> ID：15602489
> 
> 赞同：8
> 
> 时间：2013-03-24T18:45:29.087
> 
> 标签：linux, assembly, x86, nasm

我正忙于学习组装并正在考虑划分，但是我遇到了以下陈述：

```
mov edx,0x00000001
mov eax,0x00000000
mov ecx,0x00000002
idiv ecx 
```

广发银行：

```
 0x08048071 <+17>:    mov    edx,0x1
   0x08048076 <+22>:    mov    eax,0x0
   0x0804807b <+27>:    mov    ecx,0x2
=> 0x08048080 <+32>:    idiv   ecx 
```

我想将 0x100000000 除以 0x00000002，所以由于除法的跨度是 EDX:EAX，我将 0x1 移动到 EDX 并将 0x0 移动到 EAX。然后我将 0x2 移动到 ECX 并除以，不幸的是这给了我一个浮点异常，我不确定我做错了什么。

使用 div （无符号）时，它工作正常，所以我想知道 div 和 idiv 对于导致异常的特定语句的解释有什么区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T18:48:05.360

商 ( `0x80000000`) 不适合 32 位有符号整数（最大值：`0x7fffffff`）。因此你得到一个例外。它*确实*适合 32 位无符号整数（最大值`0xffffffff`），因此无符号除法不会触发异常。

# c - 使用“make”C 编程（艰难地学习 C）

> ID：15602496
> 
> 赞同：7
> 
> 时间：2013-03-24T18:45:59.150
> 
> 标签：c, makefile, compilation

我正在通过“Learn C the Hard Way”学习 C 编程。我目前正在进行练习 1，可以在这里找到：[http ://c.learncodethehardway.org/book/ex1.html](http://c.learncodethehardway.org/book/ex1.html)

我了解所涵盖的概念，但不了解编译过程。在命令行中使用“make”命令时，为什么会这样：

```
$ make ex1 
```

这不起作用：

```
$ make ex1.c 
```

实际上，直到一分钟前我才运行第二个命令。不过我最终想通了。在我这样做之前，我一直收到此错误消息：

```
make: nothing to be done for 'ex1.c' 
```

虽然这只是一个技术问题，但我仍然想知道发生了什么。谢谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T18:53:24.503

两者都有效；他们只是做不同的任务。

*   `make ex1.c`说“使用makefile中的规则加上内置知识，确保文件`ex1.c`是最新的”。

    该`make`程序找到`ex1.c`并且没有规则可以从其他东西构建它（例如，没有 RCS 或 SCCS 源代码），因此它报告“无事可做”。

*   `make ex1`说“使用makefile中的规则加上内置知识，确保文件`ex1`是最新的”。

    `make`程序发现它知道一种`ex1`从源文件创建可执行文件的方法`ex1.c`，因此它确保源文件`ex1.c`是最新的（它存在，所以它是最新的），然后确保源文件也是`ex1`最新的（这意味着 'file`ex1`的修改时间比 ' 更近`ex1.c`）。如果您在`ex1.c`上次运行`make`后进行了编辑，它将进行编译以使其`ex1`比`ex1.c`. 如果编译失败，该文件`ex1`将不存在，因此您下次也将获得另一个重新编译。并且一旦它是最新的，在您再次修改源之前`make`不会`ex1`再次重建。

这是`make`设计工作的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T18:48:40.170

目标`make`通常指定您希望它构建或重建的东西，而不是您希望它用来构建其他东西的东西。

如果您键入`ex1.c`（并且没有自动生成它的规则），make 基本上只是回答“是的，该文件存在”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-05T21:15:35.590

该`make`工具的参数是它将帮助您创建的可执行文件的名称。它不应该有`.c`扩展名。你应该只写`make ex1`。

# haskell - Haskell 中的无点函数

> ID：15602500
> 
> 赞同：4
> 
> 时间：2013-03-24T18:46:08.497
> 
> 标签：haskell, pointfree, monomorphism-restriction

如何定义这个无点？

```
let argmax m = (fst.(maximumBy (comparing snd)).(zip [0..])) m 
```

按预期工作。最合乎逻辑的似乎只是放弃`m`这样的：

```
let argmax = (fst.(maximumBy (comparing snd)).(zip [0..])) 
```

可以在 ghci 中定义，但是用它来调用它`argmax [1,3,4,5,6,1]`给了我

```
<interactive>:103:9:
    No instance for (Num ())
      arising from the literal `1'
    Possible fix: add an instance declaration for (Num ())
    In the expression: 1
    In the first argument of `argmax', namely `[1, 3, 4, 5, ....]'
    In the expression: argmax [1, 3, 4, 5, ....] 
```

我认为这与类型有关：

```
:t (fst.(maximumBy (comparing snd)).(zip [0..]))
:: (Enum c, Num c, Ord a) => [a] -> c 
```

对于点版本：

```
argmax :: (Enum c, Num c, Ord a) => [a] -> c 
```

对于无积分版本：

```
argmax :: [()] -> Integer 
```

这是 ghci 诡异还是我做错了什么？

# grails - Grails 控制器中动作和方法的区别

> ID：15602501
> 
> 赞同：1
> 
> 时间：2013-03-24T18:46:10.973
> 
> 标签：grails, methods, controller, closures, action

据我所知，如果我想在控制器中创建一个动作，那么我可以通过以下方式完成：

```
class My Controller {
    def myAction = {
      println "in my action "
    }
} 
```

或者我可以通过以下方式创建它：

```
class My Controller {
    def myAction(){
      println "in my action "
    }
} 
```

有人可以告诉我这两种方法之间的区别，或者我的概念或看法有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T08:43:56.940

第一个实现是在控制器中定义公共闭包，第二个是使用公共方法。

第二种方式是在 grails 2 中引入的，被广泛认为是最好的方式。

我能想到的几个原因：

*   尤其是在最新版本的 grails 中，使用方法可以让您利用 Traits。
*   您可以使用继承来组织您的方法
*   它必须更有效率

**更新：** [为什么要将 grails 操作声明为方法而不是闭包，它有什么区别？](https://stackoverflow.com/questions/9205209/why-should-grails-actions-be-declared-as-methods-instead-of-closures-and-what-di)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:48:27.760

我不确定，但我认为它曾经是第一种方式是唯一的方式，然后它改变为允许第二种方式。我*认为*第二种方式是首选方式，但我不确定。

[编辑]

这是另一个堆栈溢出帖子，进一步解释了它：

[为什么要将 grails 操作声明为方法而不是闭包，它有什么区别？](https://stackoverflow.com/questions/9205209/why-should-grails-actions-be-declared-as-methods-instead-of-closures-and-what-di)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-30T06:55:55.860

利用方法而不是动作（闭包属性）有一些优点：

1.  内存效率
2.  允许使用无状态控制器（单例范围）
3.  您可以覆盖子类中的操作并使用 super.actionName() 调用被覆盖的超类方法
4.  方法可以被标准代理机制拦截，这对于闭包来说很复杂，因为它们是字段。

请访问以下链接了解更多信息。

[Grails 控制器](http://grails.github.io/grails-doc/2.2.4/guide/single.html#controllers)

# c# - 计算字符串值

> ID：15602502
> 
> 赞同：0
> 
> 时间：2013-03-24T18:46:15.527
> 
> 标签：c#, math, eval, equation, ncalc

我正在用 C# 编写一个程序，该程序从用户输入中获取一个方程并对其进行评估。目前，我有一种方法可以计算用户输入并从存储的变量（例如 x）中获取值。将输入的方程式将类似于`2.0 * 78 * 4X / 3`。

目前我可以用`X`与之关联的值替换。但是我需要一种搜索​​字符串并找到的方法`X`，然后如果`X`在它之前有一个数字，则乘以`X * X`该次数。在上面的示例中，这将是 4 次。

最好使用该`IndexOf`方法还是将字符串拆分为子字符串？

我想要的只是能够找到`X`前面有一个数字的天气；如果不是，则只输出 的值`X`，否则如果在乘以所述倍`X`之前有一个数字。`X*X`

这是我用于查找`X`传递的数据的代码。理想情况下，我想包含以下任何代码：

```
if (name == "x" || name == "X")
{
    args.Result = x; // Returns value of x
} 
```

这是所有其余的代码

```
var e = new Expression(input);

// Set up a custom delegate so NCalc will ask you for a parameter's value
// when it first comes across a variable
e.EvaluateParameter += delegate(string name, ParameterArgs args)
{
    if (name == "x" || name == "X")
    {
        args.Result = x; // Returns value of x
    }
    else if (name == "y" || name == "Y")
    {
        //....
    }
    else if (name == "z" || name == "Z")
    {
        //....
    }

    // Or if the names match up you might be able to something like:
    //  args.Result = dataRow[name];
};

//var result =  
return e.Evaluate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:08:22.853

你可以用正则表达式来做到这一点。一个简单的例子：

```
class MainClass
{
    private static int X = 3, Z = 5, Y = 10;

    public static void Main (string[] args)
    {
        string eqn = "2.5Y * 78Z * 4X / 3 + H * 3N";

        string regex = "(?<var>[a-z])|(?<int>(\\d+(\\.\\d+))|(\\d+))(?<var>[a-z])";

        Regex r = new Regex (regex, RegexOptions.IgnoreCase | RegexOptions.Singleline | RegexOptions.Compiled);
        MatchCollection m = r.Matches (eqn);
        if (m.Count > 0) 
        {
            foreach (Match ma in m) {
                MatchVar (ma);
            }
        }
    }

    private static void MatchVar (Match m)
    {
        string stringValue = string.IsNullOrEmpty (m.Groups ["int"].ToString ()) ? "1" : m.Groups ["int"].ToString ();
        double value = double.Parse (stringValue);
        string var = m.Groups ["var"].ToString ();
        switch (m.Groups ["var"].ToString ()) 
        {
            case "X":
                Console.WriteLine ("Result for {0}: {1}", var, value * X);
                break;
            case "Z":
                Console.WriteLine ("Result for {0}: {1}", var, value * Z);
                break;
            case "Y":
                Console.WriteLine ("Result for {0}: {1}", var, value * Y);
                break;
            default: 
                Console.WriteLine ("No value defined for {0}", var);    
                break;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:51:36.117

我认为你应该制作一个“真正的”解析器，它会创建一个表达式树。

您可以手动执行此操作，请参阅例如 [http://www.codeproject.com/Articles/88435/Simple-Guide-to-Mathematical-Expression-Parsing](http://www.codeproject.com/Articles/88435/Simple-Guide-to-Mathematical-Expression-Parsing)

或者您可以使用现成的解析器生成器，例如 ANTLR，您可以提供简单的语法，请参见 [http://www.codeproject.com/Articles/18880/State-of-the-Art-Expression-Evaluation](http://www.codeproject.com/Articles/18880/State-of-the-Art-Expression-Evaluation)

无论哪种方式，对于变量值，您可能应该将它们保存在`Dictionary<string, double>`

```
public double GetVariableValue(string varName)
{
    double val;
    if (!variables.TryGetValue(varName, out val))
       throw new InvalidOperationException("Undefined variable "+varName);
    return val;
} 
```

# google-app-engine - 如何在启用计费的应用中查看 appengine 配额百分比？

> ID：15602503
> 
> 赞同：1
> 
> 时间：2013-03-24T18:46:34.703
> 
> 标签：google-app-engine, quota

在免费的 appengine 应用程序中，您可以看到数据存储区读取和写入使用配额占免费配额的百分比，以及绝对数量（大约 1 万次操作）。

百分比值可以更准确地查看电流使用情况（至少显然，百分比值似乎精确到一个百分点）。而如果你计算绝对值的百分比，你只能得到 20 个百分点的准确度。

在启用计费的应用程序上，您只能看到绝对值，它仅提供当前使用情况的非常粗略的近似值。有没有办法在计费应用中获得更准确的百分比视图？

我需要这个来对我的应用程序进行分析研究，我在十小时内在不同负载下运行它，然后读取配额使用情况......

# codeigniter - Code Igniter更新查询结果+ajax成功

> ID：15602510
> 
> 赞同：0
> 
> 时间：2013-03-24T18:47:34.507
> 
> 标签：codeigniter

我正在使用 jquery ajax 来更新字段。现在我可以使用更新查询来更新数据库。

我的更新函数有一个返回语句。如何使用 ajax 成功功能更新 div。

我应该将它传递给控制器​​然后我应该传递给 view 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T18:56:08.440

在你的控制器中有一个函数 ajaxupdate() 怎么样，它返回一个 div 的新内容来更新和用新内容替换那个 div 的内容。那么，在你看来，你所需要的只是这些方面的东西

```
<div id='AjaxDiv'>Contents of this div is replaced</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(function(){
          UpdateAjaxDiv();
       });

        function UpdateAjaxDiv(){
           $('#AjaxDiv').load('<?php echo base_url() ?>welcome/ajaxupdate');
            setTimeout(UpdateAjaxDiv, 5000);
        }
    </script> 
```

# arrays - 在 knockout.js 中对数组的一些误解

> ID：15602515
> 
> 赞同：1
> 
> 时间：2013-03-24T18:47:53.227
> 
> 标签：arrays, knockout.js, logic

我正在尝试了解淘汰赛js的一些逻辑过程，希望您能帮助我。可能有一个非常原始的问题，但在那种情况下，它们将类似于我的理解水平。

所以，这里是js代码：

```
LookData = [{
    slName: 'body weight',
    slValue: '75',
    slType: 'kg',
    slDate: '01.02.03'
}, {
    slName: 'body fat',
    slValue: '50',
    slType: '%',
    slDate: '02.03.04'
}];

function LGoal(data) {
    this.alooks = ko.observableArray(data.LookData);
    this.ltitle = ko.observable(data.slName);
    this.lvalue = ko.observable(data.slValue);
    this.ltype = ko.observable(data.slType);
    this.ldate = ko.observable(data.slDate);
}

function GoalListViewModel() {
    var self = this;
    self.lookgoals = ko.observableArray([]);

    var mappedLookGoals = $.map(LookData, function (item) {
        return new LGoal(item);
    });
    self.lookgoals(mappedLookGoals);

}

ko.applyBindings(new GoalListViewModel(LookData)); 
```

LookData 数组模仿我们收到的 JSon 数据对象。之后来自数组 LookData 的信息成为 HTML 页面的一部分：

这是一项工作，我可以在 HTML 中看到结果，但这里有几个问题：

1.  为什么我需要放置“foreach：lookdata”而不是“foreach：LGoal”？
2.  如何实现将具有可观察数据的新行添加到数组中？

PS：对不起我糟糕的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:22:57.890

**如果您浏览以下代码，您将获得问题的答案。**

```
Why I need to put "foreach: lookdata" instead of "foreach: LGoal"? 
```

我做了一些更改，您可以使用“foreach:lookdata”而不是“foreach:LGoal”..

```
How can I realize the adding of new row with observible data to array? 
```

newLookData 方法用于从您的 json 添加数据。

newEmptyLookData 方法用于向您的 ui 添加空数据。

```
LookData = [{
 slName: 'body weight',
 slValue: '75',
 slType: 'kg',
 slDate: '01.02.03'
}, {
 slName: 'body fat',
 slValue: '50',
 slType: '%',
 slDate: '02.03.04'
}];

function LGoal(data){
 this.lookdata.push(new newLookData(data));
}

function newLookData(data) {
 this.ltitle = ko.observable(data.slName);
 this.lvalue = ko.observable(data.slValue);
 this.ltype = ko.observable(data.slType);
 this.ldate = ko.observable(data.slDate);
}

//call this method to add empty row
function newEmptyLookData(data) {
 this.ltitle = ko.observable('');
 this.lvalue = ko.observable('');
 this.ltype = ko.observable('');
 this.ldate = ko.observable('');
}

function GoalListViewModel() {
  var self = this;
  self.lookdata= ko.observableArray([]);

  ko.utils.arrayForEach(LookData, function(item) {
    LGoal(item);
  });

}

ko.applyBindings(new GoalListViewModel()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T21:37:33.570

我没有看到您的代码有任何特殊问题。我会稍微重构一下，然后让 GoalListViewModel 在构造函数中接受它的数据。而且我真的不明白你在 LGoal ViewModel 中要做什么 - 它在评论中。

这是我要做的：

```
function LGoal(data) {
    //this does not make sense to me. Why the "data" object at this moment 
    //holds one item of your LookData collection - and there is no more 
    //inner LookData collection.
    //this.alooks = ko.observableArray(data.LookData);
    this.ltitle = ko.observable(data.slName);
    this.lvalue = ko.observable(data.slValue);
    this.ltype = ko.observable(data.slType);
    this.ldate = ko.observable(data.slDate);
}

function GoalListViewModel(data) {
    var self = this;
    self.lookgoals = ko.observableArray([]);

    var mappedLookGoals = $.map(data, function (item) {
        return new LGoal(item);
    });
    self.lookgoals(mappedLookGoals);
}

ko.applyBindings(new GoalListViewModel(LookData)); 
```

# android - android：需要所有屏幕尺寸的相同输出

> ID：15602519
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:48:17.697
> 
> 标签：android, android-layout, android-debug

我正在使用 320*480 大小的相对布局来定义布局。我在定义元素的长度和宽度时使用“dp”。但是，当我尝试使用不同的尺寸进行检查时，例如 1024*600 或 480*800。我得到一个奇怪的输出。

我需要在所有尺寸中获得与 320*480 尺寸相同的输出。

以下是我遵循的布局。请帮助我..

提前致谢。

![在此处输入图像描述](../Images/46194f16ac1ff706cb9c0b3703689937.png)

## 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="match_parent"
android:background="@drawable/background"
android:gravity="top" >

<RelativeLayout
    android:id="@+id/rl1"
    android:layout_alignParentLeft="true"
    android:layout_width="120dp"
    android:layout_height="wrap_content" 
    android:orientation="vertical" > 

    <RelativeLayout
        android:id="@+id/rl1A"
        android:layout_alignParentLeft="true"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >

    <ImageButton
        android:id="@+id/imOption1" 
        android:layout_centerHorizontal="true" 
        android:layout_centerVertical="true"
        android:layout_width="80dp"
        android:layout_height="80dp" 
        android:background="@drawable/kite"/> 

     </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl1B"
        android:layout_alignParentLeft="true" 
        android:layout_below="@+id/rl1A"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >
    <ImageButton
        android:id="@+id/imOption2"
        android:layout_centerHorizontal="true"
        android:layout_width="80dp"
        android:layout_height="80dp" 
        android:background="@drawable/kite"/>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl1C"
        android:layout_alignParentLeft="true" 
        android:layout_below="@+id/rl1B"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >
    <ImageButton
        android:id="@+id/imOption3" 
        android:layout_centerHorizontal="true"
        android:layout_width="80dp"
        android:layout_height="80dp"  
        android:background="@drawable/kite" />
    </RelativeLayout>

</RelativeLayout> 

<RelativeLayout
    android:id="@+id/rl2"
    android:layout_toRightOf="@+id/rl1"
    android:layout_width="120dp" 
    android:layout_height="wrap_content" 
    android:orientation="vertical" >     

    <RelativeLayout
        android:id="@+id/rl2A"
        android:layout_alignParentLeft="true"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >

    <ImageButton
        android:id="@+id/imOption4" 
        android:layout_centerHorizontal="true"
        android:layout_width="80dp"
        android:layout_height="80dp" 
        android:background="@drawable/kite"/> 
     </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl2B"
        android:layout_alignParentLeft="true" 
        android:layout_below="@+id/rl2A"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >
    <ImageButton
        android:id="@+id/imOption5"
        android:layout_below="@+id/imOption4"
        android:layout_centerHorizontal="true"
        android:layout_width="80dp"
        android:layout_height="80dp" 
        android:background="@drawable/kite"/>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl2C"
        android:layout_alignParentLeft="true" 
        android:layout_below="@+id/rl2B"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >
    <ImageButton
        android:id="@+id/imOption6"
        android:layout_below="@+id/imOption5"
        android:layout_centerHorizontal="true"
        android:layout_width="80dp"
        android:layout_height="80dp"  
        android:background="@drawable/kite" />
    </RelativeLayout>
</RelativeLayout>

<RelativeLayout
    android:id="@+id/rl3"
    android:layout_toRightOf="@+id/rl2"
    android:layout_width="120dp"
    android:layout_height="wrap_content" 
    android:orientation="vertical" >    

    <RelativeLayout
        android:id="@+id/rl3A"
        android:layout_alignParentLeft="true"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >
    <ImageButton
        android:id="@+id/imOption7" 
        android:layout_centerHorizontal="true"
        android:layout_width="80dp"
        android:layout_height="80dp" 
        android:background="@drawable/kite"/> 
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl3B"
        android:layout_alignParentLeft="true" 
        android:layout_below="@+id/rl3A"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >
    <ImageButton
        android:id="@+id/imOption8"
        android:layout_below="@+id/imOption7"
        android:layout_centerHorizontal="true"
        android:layout_width="80dp"
        android:layout_height="80dp" 
        android:background="@drawable/kite"/>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/rl3C"
        android:layout_alignParentLeft="true" 
        android:layout_below="@+id/rl3B"
        android:layout_width="120dp"
        android:layout_height="93dp"
        android:orientation="vertical" >
    <ImageButton
        android:id="@+id/imOption9"
        android:layout_below="@+id/imOption8"
        android:layout_centerHorizontal="true"
        android:layout_width="80dp"
        android:layout_height="80dp"  
        android:background="@drawable/kite" />
    </RelativeLayout>
</RelativeLayout> 

<RelativeLayout
    android:id="@+id/rl4"
    android:layout_toRightOf="@+id/rl3"
    android:layout_width="1dp"
    android:layout_height="fill_parent"
    android:background="#000000"   >     
</RelativeLayout>  

<RelativeLayout
    android:id="@+id/rl5"
    android:layout_width="240dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/rl4" >

    <ImageView
        android:id="@+id/ivDisplayArea"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_width="90dp"
        android:layout_height="90dp"
        android:background="@drawable/kite"/>  

    <ImageButton
        android:id="@+id/bQuestion" 
        android:layout_marginTop="15dp"
        android:layout_marginLeft="10dp"
        android:layout_below="@+id/ivDisplayArea" 
        android:layout_alignParentLeft="true"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:background="@drawable/question"  />

    <ImageButton
        android:id="@+id/bNext" 
        android:layout_marginTop="15dp"
        android:layout_marginLeft="30dp"
        android:layout_below="@+id/ivDisplayArea"
        android:layout_toRightOf="@+id/bQuestion"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:background="@drawable/next"/>

</RelativeLayout>

<RelativeLayout
    android:id="@+id/rl6"
    android:layout_width="360dp"
    android:layout_height="1dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/rl1"  
    android:background="#000000">
</RelativeLayout>

<RelativeLayout
    android:id="@+id/rl7"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/rl6"
    android:layout_toLeftOf="@+id/rl4" >

     <TextView
         android:id="@+id/tvRewardAccount"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_alignParentLeft="true"
         android:gravity="center"
         android:text="Reward Account"
         android:textColor="#000000"
         android:textStyle="bold" />

             <ImageButton
                 android:id="@+id/bReward1"
                 android:layout_marginLeft="16dp"
                 android:layout_width="28dp"
                 android:layout_height="28dp"
                 android:layout_below="@+id/tvRewardAccount"
                 android:background="@drawable/lollipop" /> 

             <ImageButton
                 android:id="@+id/bReward2"
                 android:layout_width="28dp"
                 android:layout_height="28dp"
                 android:layout_marginLeft="4dp"
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward1"
                 android:background="@drawable/lollipop" />

             <ImageButton
                 android:id="@+id/bReward3"
                 android:layout_marginLeft="4dp"
                 android:layout_width="28dp"
                 android:layout_height="28dp" 
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward2"
                 android:background="@drawable/lollipop" />

             <ImageButton
                 android:id="@+id/bReward4"
                 android:layout_marginLeft="4dp"
                 android:layout_width="28dp"
                 android:layout_height="28dp" 
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward3"
                 android:background="@drawable/lollipop" />

             <ImageButton
                 android:id="@+id/bReward5"
                 android:layout_marginLeft="4dp"
                 android:layout_width="28dp"
                 android:layout_height="28dp" 
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward4"
                 android:background="@drawable/lollipop" />

             <ImageButton
                 android:id="@+id/bReward6"
                 android:layout_marginLeft="4dp"
                 android:layout_width="28dp"
                 android:layout_height="28dp" 
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward5"
                 android:background="@drawable/lollipop" />

             <ImageButton
                 android:id="@+id/bReward7"
                 android:layout_marginLeft="4dp"
                 android:layout_width="28dp"
                 android:layout_height="28dp" 
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward6"
                 android:background="@drawable/lollipop" />

             <ImageButton
                 android:id="@+id/bReward8"
                 android:layout_marginLeft="4dp"
                 android:layout_width="28dp"
                 android:layout_height="28dp" 
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward7"
                 android:background="@drawable/lollipop" />

             <ImageButton
                 android:id="@+id/bReward9"
                 android:layout_marginLeft="4dp"
                 android:layout_width="28dp"
                 android:layout_height="28dp" 
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward8"
                 android:background="@drawable/lollipop" />

             <ImageButton
                 android:id="@+id/bReward10"
                 android:layout_width="28dp"
                 android:layout_height="28dp" 
                 android:layout_marginLeft="4dp"
                 android:layout_alignTop="@+id/bReward1"
                 android:layout_toRightOf="@+id/bReward9"
                 android:background="@drawable/lollipop" />

</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:52:27.613

当您在与密度无关的像素中定义尺寸时，这是为了使如此定义的对象在不同密度的屏幕上或多或少具有相同的物理尺寸。我怀疑您发布的图像是像素尺寸较小的屏幕特写镜头，以及像素尺寸较大的屏幕的更远视图；如果您将两个屏幕并排放在桌子上并拍摄物理设备，我怀疑您的图像大小大致相同。您的大屏幕不仅有更多像素，而且有更多与密度无关的像素，因此以 dp 表示的特定尺寸的图像将占据该屏幕的较小百分比，尽管它可能与物理尺寸大致相同（例如， 以英寸来算）。

您似乎期望使用 dp 单位定义图像会导致它们占据物理屏幕的相同*百分比*，但这不是这些单位的目的。事实上，由于不同的屏幕具有不同的纵横比（宽高比），这种行为会导致图形失真。

考虑使用 fill_parent 将最外层布局缩放到屏幕大小。您可以将该外部布局设置为显示器左侧和右侧的水平配置 LinearLayout，使用 layout_weight 将每个宽度定义为百分比。然后，您可以嵌套一个垂直配置的 LinearLayout 作为此水平布局的第一个元素，顶部包含左侧 3x3 图像的 GridView，每个图像在其包含的正方形内以保持其纵横比的方式缩放，并且很快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T18:58:57.530

您的可绘制对象是否足够大以支持更高的分辨率？默认情况下，Android 不会放大图像。

您还可以使用基于显示尺寸的尺寸 - Android 资源管理非常适合。以下页面可能会对您有所帮助。

[http://android-er.blogspot.de/2010/04/how-to-define-dimension-in-android.html](http://android-er.blogspot.de/2010/04/how-to-define-dimension-in-android.html) [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:08:59.727

您不能将布局设置为静态。您应该在代码端获取设备的屏幕尺寸并根据此尺寸设置布局。在这种情况下，您需要多个 xml 布局，您应该根据屏幕大小在代码中设置它。

# c++ - （简单例子）MPI并行io写垃圾

> ID：15602521
> 
> 赞同：0
> 
> 时间：2013-03-24T18:48:31.673
> 
> 标签：c++, io, mpi

我试图让多个进程使用 MPI 并行 io 同时将整数缓冲区写入文件。为了实现这个目标，我搜索了各种网站：

*   [MPI 和并行 IO](http://lisboa.lip.pt/computing/publications/2/wednesday/MPI_and_Parallel_IO-handout.pdf)
*   [谷歌图书搜索](http://books.google.pt/books?id=iLj516DOIKkC&pg=PA161&lpg=PA161&dq=mpi%20parallel%20io%20c%2b%2b%20example&source=bl&ots=Q_fdcsX3Ed&sig=Jziu22Dt_OxCGWAmCOunRFJasrk&hl=pt-PT&sa=X&ei=XkBPUbGSIfKS7AaihoC4Bg&sqi=2&ved=0CEMQ6AEwAg#v=onepage&q=mpi%20parallel%20io%20c%2b%2b%20example&f=false)
*   [带 MPI 的并行 IO](https://fs.hlrs.de/projects/craydoc/docs/books/S-2490-40/html-S-2490-40/chapter-sc4rx058-brbethke-paralleliowithmpi.html)

我试图学习他们的教导。为了测试它们，我在 C++ 中创建了以下简单代码：

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <mpi.h>

#define BUFSIZE 100

using namespace std;

int main(int argc, char *argv[])
{
    int myrank, buf[BUFSIZE], rcode;
    MPI_File thefile;

    MPI_Init(&argc, &argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &myrank);

    for (int i=0; i<BUFSIZE; i++)
        buf[i] = myrank * BUFSIZE + i;

    rcode = MPI_File_open(MPI_COMM_WORLD, "testfile", MPI_MODE_CREATE | MPI_MODE_RDWR,
                                MPI_INFO_NULL, &thefile);

    if(rcode != MPI_SUCCESS){
        cerr << "Did not open file" << endl;
        return EXIT_FAILURE;
    }

    rcode = MPI_File_set_view(thefile, myrank * (MPI_Offset)BUFSIZE * sizeof(int), MPI_INT, MPI_INT,
                                        "native", MPI_INFO_NULL);
    if(rcode != MPI_SUCCESS){
        cerr << "Problem setting process view" << endl;
        return EXIT_FAILURE;
    }

    MPI_File_write(thefile, buf, BUFSIZE, MPI_INT, MPI_STATUS_IGNORE);
    if(rcode != MPI_SUCCESS){
        cerr << "Problem writting file" << endl;
        return EXIT_FAILURE;
    }

    MPI_File_close(&thefile);
    MPI_Finalize();

    return EXIT_SUCCESS;
} 
```

然而，当我尝试用 Kate 读取文件时，我得到了随机垃圾：一堆正方形、矩形、!$"%&!!/ 符号，根本没有整数。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:54:53.730

您似乎对文本/二进制数据有误解。

写入的`int`s`MPI_File_write(..., MPI_INT,...)`将被写入二进制数据，而不是 ASCII 或 Unicode 文本。“一堆正方形、矩形、@#$@#! 符号”对我来说就像您正在使用文本编辑器打开文件并查找 ASCII 数字一样。

如果要格式化输出，则必须自己格式化。如果你想要一个文本编辑器来读取你的文件，你需要写文本，而不是`int`s。

# asp.net - 单击网格项目时显示 Div - Javascript 未更新面板

> ID：15602523
> 
> 赞同：0
> 
> 时间：2013-03-24T18:48:38.250
> 
> 标签：asp.net

在一个 aspx 页面上，我有一个 GridView，其中包含从 db 加载的 Thingys 列表。这被放置在一个 div 中。

在另一个具有 display=none 的 Div 中，我有添加新事物的表单。

我还有一个链接 [add new thingy]，它隐藏了 gridview div 并显示了表单的内容。

我正在使用 JS 方法来隐藏和显示 Div。

现在在网格中，第一列也是一个链接，我想用 Thingy 信息加载表单而不回发。

目前的问题是，如果我使用 Grid 的 OnRowCommand，我会收到回发。

1）如何删除该回发并在第二个 Div 中加载表单

2）类似的问题是在保存表单上，我可以非常快速地使用js切换回gridview div，但是如何使用新保存的Thingies重新加载网格。

如果可以解决问题，我愿意采用完全不同的方法。我选择了这种方法而不是更简单的 UpdatePanel，因为它可以更快地在内容之间切换而无需回发。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:43:54.830

您要做的是在此页面上使用 Ajax，这是您需要具备的条件：

*   后面的代码使用`[WebMethod]`Attribute 创建函数。这些函数将由 JavaScript 调用以处理服务器端处理（获取更新信息、创建新项目等）
*   在 .aspx 页面上创建一个 ScriptManager 控件，该控件具有`EnabledPageMethods="True"`
*   创建 JavaScript 以填充控件并向使用 Ajax 的代码发送请求。如果我在哪里，我会研究 jQuery 和 Knockout 框架。

资源：

*   [Asp.net 从 Ajax 调用 C# 方法](https://stackoverflow.com/questions/14372532/asp-net-call-c-sharp-method-from-ajax)
*   [jQuery](http://jquery.com/)
*   [淘汰赛](http://knockoutjs.com/)

# c++ - SDL + OpenGL 需要 MSVCR90.dll 仍然报错

> ID：15602527
> 
> 赞同：1
> 
> 时间：2013-03-24T18:48:52.920
> 
> 标签：c++, opengl, dll, mingw, sdl

所以我打算用 MinGW 做一个 SDL + OpenGL 项目。但由于某种原因，它仍然取决于我觉得有点奇怪的 MSVCR90.dll。所以我试图在我的电脑上找到一个 dll 的副本并复制到我的 bin 文件夹中。现在它给了我这个讨厌的小错误：

![在此处输入图像描述](../Images/f0e239315fbeb904851cfe9e0d5424e2.png)

这是我的代码和编译设置：

```
#include <SDL/SDL.h>
#include <SDL/SDL_opengl.h>
#include <SDL/SDL_image.h>
#include <stdio.h>
#include <stdlib.h>
#include <string>

using namespace std;

SDL_Surface * screen;

GLuint loadImage(string path)
{
    GLuint texture;
    GLint nop;
    GLenum texture_format;
    SDL_Surface * sdlimage = IMG_Load(path.c_str());
    if (sdlimage)
    {
        if ((sdlimage->w & (sdlimage->w - 1)) != 0)
        {
            printf("warning: %s's width is not a power of 2\n", path.c_str());
        }
        if ((sdlimage->h & (sdlimage->h - 1)) != 0)
        {
            printf("warning: %s's height is not a power of 2\n", path.c_str());
        }

        nop = sdlimage->format->BitsPerPixel;
        if (nop == 4)
        {
            if (sdlimage->format->Rmask == 0x000000FF) texture_format = GL_RGBA;
            else texture_format = GL_BGRA;
        } else if (nop == 3)
        {
            if (sdlimage->format->Rmask == 0x0000FF) texture_format = GL_RGB;
            else texture_format = GL_BGR;
        } else
        {
            printf("Invalid byte format on image %s", path.c_str());
            exit(1);
        }
        glGenTextures(1, &texture);
        glBindTexture(GL_TEXTURE_2D, texture);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST); //Make sure it doesn't blur
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST); //In both shrinking and stretching situations
        glTexImage2D(GL_TEXTURE_2D, 0, nop, sdlimage->w, sdlimage->h, 0, texture_format, GL_UNSIGNED_BYTE, sdlimage->pixels);
        SDL_FreeSurface(sdlimage);
        return texture;
    } else
    {
        printf("Could not loud %s: %s\n", path.c_str(), SDL_GetError());
        exit(1);
    }
}

void drawTexture( GLuint texture )
{
    glBindTexture(GL_TEXTURE_2D , texture);
    glBegin(GL_QUADS);
        glTexCoord2i( 0 , 0 );
        glVertex2f( 0 , 0 );

        glTexCoord2i( 1 , 0 );
        glVertex2f( 16 , 0 );

        glTexCoord2i( 1 , 1 );
        glVertex2f( 16 , 32 );

        glTexCoord2i( 0 , 1 );
        glVertex2f( 0 , 32 );
    glEnd();
}

void shutdown(void)
{
    SDL_Quit();
}

void init()
{
    if (SDL_Init(SDL_INIT_EVERYTHING) != 0) //Loads SDL
    {
        printf("Error could not initialize SDL!");
        exit(1);
    }
    SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1); //Double buffer for openGL
    screen = SDL_SetVideoMode(640, 480, 32, SDL_HWSURFACE | SDL_DOUBLEBUF | SDL_OPENGL); //Setup screen size
    glEnable(GL_TEXTURE_2D); //2d textures
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f); //Background colour will be black
    glViewport(0, 0, 640, 480); // Setup a viewport that matches our resolution
    glClear(GL_COLOR_BUFFER_BIT); //Clear the colours
    glMatrixMode(GL_PROJECTION); //Setup our projection
    glLoadIdentity(); //Load a new one
    glOrtho(0.0f, 640, 480, 0.0f, -1.0f, 1.0f); //Make our view matches our resolution
    glMatrixMode(GL_MODELVIEW); //Go into modelview
    glLoadIdentity(); //Load a new one
    atexit(shutdown);
}

int main(int argc, char * argv[])
{
    init();
    GLuint text = loadImage("rmb.png");
    drawTexture(text);
    SDL_GL_SwapBuffers();
    SDL_Delay(3000);
    glDeleteTextures( 1, &text );
    return 0;
} 
```

编译设置：

```
g++ -o bic.exe "src\\game.o" -lmingw32 -lopengl32 -lglu32 -lSDLmain -lSDL -lSDL_image 
```

# php - 无法导入资源 Symfony 错误

> ID：15602528
> 
> 赞同：1
> 
> 时间：2013-03-24T18:48:55.797
> 
> 标签：php, symfony

我已经创建了简单的控制器，设置了路由并且一切正常，直到我为第三个链接添加路由。然后我得到一个错误

> 无法从“C:/xampp/htdocs/Symfony/app/config\routing.yml”导入资源“C:\xampp\htdocs\Symfony\src\Acme\Bundle\WebBundle/Resources/config/routing.yml”。

`DefaultController.php`：

```
<?php

namespace Acme\Bundle\WebBundle\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;

class DefaultController extends Controller
{
public function indexAction()
{
    return $this->render('AcmeWebBundle:Default:index.html.twig');
}

//* find a ride *//

public function findAction()
{

    return $this->render('AcmeWebBundle:Default:find.html.twig');

}

//*book a ride *//

public function bookAction()
 {

    return $this->render('AcmeWebBundle:Default:book.html.twig');
  }
} 
```

这是`master.html.twig`简单导航的一部分。

```
 ...
   <div id="left1"><a href="{{ path('acme_web_homepage') }}"><strong>Home</strong></a>
     </div>
     <div id="left2">
     </div>
     <div id="left3"><a href="{{ path('find') }}"><strong>Find a ride</strong></a>
     </div>
     <div id="left4">
     </div>
     <div id="left5"><a href="{{ path('book') }}"><strong>Book a ride</strong></a>
     </div> 
```

和`routing.yml`文件

```
acme_web_homepage:
    pattern:  /home
    defaults: { _controller: AcmeWebBundle:Default:index }

find:
    pattern: /find
    defaults: { _controller: AcmeWebBundle:Default:find }
book:
    pattern: /book
    defaults: { _controller: AcmeWebBundle:Default:book } 
```

如果我删除书籍路径的路线，一切正常。我哪里错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T18:52:27.483

Yaml 基于缩进。`book`您必须使用一些空格缩进 的所有属性（我建议使用 4 个空格）：

```
book:
    pattern: /book
    defaults: { _controller: AcmeWebBundle:Default:book } 
```

[文档](http://symfony.com/doc/current/components/yaml/yaml_format.html)中有关 Yaml 格式的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T18:53:02.333

yml 文件必须缩进 4 个空格。

```
book:
    pattern: /book
    defaults: { _controller: AcmeWebBundle:Default:book } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T17:57:23.217

最后我找出问题所在：

按下标签按钮后，我留下了空间。无论这听起来多么奇怪，我都会用@Wouter建议的4个空格替换它，一切正常。

下次使用 yml 文件时忘记选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-21T13:41:39.457

我在导入过程中注意到一些奇怪的 Symfony 行为。当在 config/services.yaml 文件中定义服务时，它们会正确加载，但是当我在 config/services/services.yaml 中配置它们时，（从 config/services.yaml 导入后）它们开始出现类似错误

无法自动装配服务“App\Command***\XyzCommand”：方法“__construct()”的参数“$env”是类型提示的“字符串”，您应该
明确配置其值。

# r - 在 R 中循环以获取从零开始的组合总和

> ID：15602531
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:49:35.753
> 
> 标签：r, loops

我有以下等式，我必须用 R 来写它。![在此处输入图像描述](../Images/c43a1aecf8c38d8d19fa10cf4dcf11fd.png)

我在使用这种编码时面临的主要挑战是，对于每个 i 和每个 k，我需要一个组合总和（分子中的二项式）。这里对于某些 i 和 k，min{(nk),Mi} 可以为 0，特别是当 k=n 时。最重要的是，循环不能从 0 开始，但我需要它！

出于您的考虑，这是我的代码和数据（d1）。你会看到我需要在 line 之后从 0 开始循环`sum<-0`，这是我的主要问题。你能看到问题并更正代码吗？需要从 0 开始的循环怎么办？

```
n<-4

n^2

id<-1:16

r<-c(1,1,1,1,0,1,1,1,0,1,0,1,1,1,1,1)

tr<-rep(0,n^2)
for(i in 1:n^2){
tr[i]<-ifelse(r[i]==1,rexp(1,1/1),0)
}

t0<-rep(0,n^2)
for(i in 1:n^2){
t0[i]<-ifelse(r[i]==0,rexp(1,1/1.5),0)
}

#Total number of subjects who cannot get B1:

M<-sum(r==0)    #If there were cenoring then M<-sum(r==0 & tr>cenc)

d<-data.frame(id,r,t0,tr)

d1<-d[tr>0,]
d1

d1<-d1[order(d1$tr),]
d1

d1$rank<-1:length(d1$tr)
d1

###Calculating the probability of getting B1 for each subject with r[i]=1:

d1$prob<-rep(0,length(d1$tr))
for(i in 1:length(d1$tr)){  #loop i begins
Mi<-sum(d1$tr[i]>t0[t0>0])
for(k in 1:n){  #loop k begins
sum<-0
for(m in 0:min(n-k,Mi)){    #loop m begins
sum<-sum+choose(Mi,m)*choose(n^2-i-Mi,n-k-m)
}   #loop m ends.
d1$prob[i]<-d1$prob[i]+choose(i-1,k-1)*sum/choose(n^2,n)
}   #loop k ends.
}   #loop i ends.
d1$prob<-d1$prob*1/n 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:30:44.883

我看不出您的原始代码有什么问题？您不能索引从零开始的向量，但它与循环中迭代器的范围无关。无论如何，这应该给你相同的答案，但避免了最里面的循环：

```
d1$prob<-rep(0,length(d1$tr))
for(i in 1:length(d1$tr)){  #loop i begins
  Mi<-sum(d1$tr[i]>t0[t0>0])
  for(k in 1:n){  #loop k begins
    # function choose is vectorized, so you can compute all 
    # binomial terms at once given k
    SUM<-sum(choose(Mi,0:min(n-k,Mi))*choose(n^2-i-Mi,n-k-(0:min(n-k,Mi))))
    d1$prob[i]<-d1$prob[i]+choose(i-1,k-1)*SUM
  }   #loop k ends.
}   #loop i ends.
d1$prob<-(d1$prob/choose(n^2,n))*1/n 
#as choose(n^2,n) does not depend on i nor k, 
#you can make the division after the loops for all elements at once 
```

# java - 常规 If 语句中的奇怪 Java 问题

> ID：15602537
> 
> 赞同：0
> 
> 时间：2013-03-24T18:49:54.330
> 
> 标签：java, android

我正在eclipse中开发一个Android应用程序，我有这个if语句：

```
private static final int MAX_FREQ=2484;
private static final int MIN_FREQ=2412;

if ((freq >= MIN_FREQ) && (freq <= MAX_FREQ)){
        return true;     
    } 
```

是 2462，由于`freq`某种奇怪的原因，它未能进入声明。当我将源更改为：

```
private static final int MAX_FREQ=2484;
private static final int MIN_FREQ=2412;

if ((freq >= MIN_FREQ) && (freq <= MAX_FREQ)){
        Log.e(TAG,""Bla Bla");
        return true;     
    } 
```

这个有效... :-/ ? 我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:54:41.093

尝试这个：

```
 private static final int MAX_FREQ=2484;
private static final int MIN_FREQ=2412;

if ((freq >= MIN_FREQ)  && (freq <= MAX_FREQ)) //missing (
    {
        Log.e(TAG,"Bla Bla"); //Semicolon missing in your code and two " signs together
        return true;     
    } 
```

# html - HTML5 和地名参考

> ID：15602539
> 
> 赞同：4
> 
> 时间：2013-03-24T18:50:18.927
> 
> 标签：html, rdfa, geonames

有没有办法使用 HTML5（和 RDFa？）的“语义”属性来明确引用地名？这可能是使用地名 URI，所以像这样（我认为这是不正确的）：

```
<span about="http://sws.geonames.org/7298792">St Mary's</span> is a great place to go coasteering. 
```

在世界各地经常重复许多地名的地方，例如圣玛丽，如果能够“消除歧义”所指的是哪个位置，那就太好了。

我正在寻找与 HTML5 中的时间类似的解决方案，其中有一个标签可以使时间明确且机器可读：

```
<time datetime="2013-03-14">last Thursday</time> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:33:10.007

您的示例很好，这就是您可以引用 HTML 和 RDFa 中的位置的方式。使用地名也是一个好主意。

PS：谷歌测试工具不会显示任何内容，因为您那里的数据太少，并且您没有将您的地名地点与页面上的任何其他内容相关联。以下是如何改进它。例如，如果你想说该页面是关于 St Mary's 的，你可以这样写：

```
<div prefix="dc: http://purl.org/dc/terms/">
  <span property="dc:subject" resource="http://sws.geonames.org/7298792">St Mary's</span> is a great place to go coasteering.
</div> 
```

如果你想将 St Mary's 描述为一个有活动的地方，你可以这样做（这次我将 schema.org 定义为默认词汇，并且我不使用任何前缀，如 'dc'）：

```
<div vocab="http://schema.org/">
  ...
  <div typeof="Place" resource="http://sws.geonames.org/7298792">
    <span property="name">St Mary's</span> is a great place to go coasteering.
    <div property="event" resource="http://example.org/festival/stmarys1" typeof="Event">
      <span property="name">Festival of St Mary's</span>
    </div>
  </div>
  ....
</div> 
```

# google-chrome - Webkit Web Inspector 中的“选择元素”功能是否有键盘快捷键？

> ID：15602542
> 
> 赞同：3
> 
> 时间：2013-03-24T18:51:17.373
> 
> 标签：google-chrome, safari, webkit, web-inspector

您知道，您单击的按钮，以便您可以单击一个元素以将其聚焦在 DOM 检查器中。如果Safari和Chrome上都存在这样的快捷方式，它们之间可能会有所不同，但我真的厌倦了一直寻找那个按钮。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-18T22:15:48.810

Chrome 和每晚构建的 Webkit 都使用键盘快捷键

`Command + Shift + C`

# python - python, __str__ 一个私有变量

> ID：15602544
> 
> 赞同：0
> 
> 时间：2013-03-24T18:51:37.820
> 
> 标签：python, printing, private

我正在尝试使用私有变量，所以制作了这个测试用例。

```
class X():
    def __init__(self):
        self.__a = 0
    def __str__(self):
        print(self.getA())
    def getA(self):
        return self.__a
x = X()
print(x.getA())
print(str(x.getA()))
print(x) 
```

输出是：

```
0
0
0
Traceback (most recent call last):
  File "/Users/lego90511/Documents/workspace/dummy/dummy.py", line 150, in <module>
    print(x)
TypeError: __str__ returned non-string (type NoneType) 
```

错误是因为它是私人的吗？因为这对我来说没有意义，因为 getA() 有效。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T18:54:32.180

该`__str__()`函数应该返回一个字符串，而不是打印一个。

您得到的错误是`str(x)`期望`x.__str__()`返回一个字符串，而您的错误则不返回任何内容（NoneType）。

# java - 覆盖私有方法

> ID：15602549
> 
> 赞同：4
> 
> 时间：2013-03-24T18:52:17.327
> 
> 标签：java, overriding

我正在阅读“Thinking in Java”并且有疑问。在“重用类”一章的“最终和私有”部分中，它说私有方法不能被覆盖。不过，我在机器上试了一下。它实际上可以被覆盖。

这是代码：

```
class Amphibian {
     private void print() { System.out.println("in Amphibian"); }
}

public class Frog extends Amphibian {
     public void print() { System.out.println("in Frog"); }

     public static void main(String[] args) {
          Frog f = new Frog();
          f.print();
     }
} 
```

打印：

> 在青蛙

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-24T18:52:58.047

你没有*覆盖*它，你只是用一个同名的新方法 *隐藏它。*

如果你没有创建一个新`print()`方法，你的`Frog`类就不会有一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T18:57:47.820

为了说明覆盖和隐​​藏之间的区别，请考虑以下内容：

```
class Amphibian {
    private void print() { System.out.println("in Amphibian"); }
    public void callPrint() {
        /* 
         * This will DIRECTLY call Amphibian.print(), regardless of whether the
         * current object is an instance of Amphibian or Frog, and whether the
         * latter hides the method or not.
         */
        print(); // this call is bound early
    }
}

class Frog extends Amphibian {
    public void print() { System.out.println("in Frog"); }
    public static void main(String[] args) {
        Frog f = new Frog();
        f.callPrint(); // => in Amphibian

        // this call is bound late
        f.print(); // => in Frog
    }
} 
```

不会调用“覆盖”（即隐藏）方法，而是调用父类中的方法。这意味着它并不是真正的覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:32:10.340

您可以简单地编写一个`private`方法，`subclass`但它不会被覆盖。但它仍然遵循用于覆盖的访问修饰符规则

如果您在方法为私有时使方法更宽`access modifier`（默认、受保护、公共），则编译器会显示错误。它遵循压倒一切的规则，但实际上并没有覆盖。`superclass``subclass's`

# r - R 的 reshape() 函数更改列标签

> ID：15602554
> 
> 赞同：9
> 
> 时间：2013-03-24T18:52:48.190
> 
> 标签：r, reshape

我想将我的数据从长格式转换为宽格式。如果发现`reshape`更改列标签真的很烦人，有什么办法可以避免这种情况吗？

例如，如果我有这样的长格式数据：

```
Year Name Value
1996 a    1
1997 a    2
1998 b    3
1999 b    4 
```

我会这样`reshape()`使用

```
reshape(long, timevar = "Year", idvar = "Name", direction = "wide") 
```

转换本身工作正常，但列名如下所示：

```
Name Time.1996 Time.1997 Time.1998 Time.1999 
```

我现在唯一能想到的就是手动重命名列名，如果你必须为多个数据集这样做，这真的很烦人。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-24T18:58:35.453

我在这里没有看到任何*问题*，但是如果它让您感到困扰，还有一些选择。

在基础 R 中，您可以`xtabs`（很多时候）使用这种类型的转换。

```
as.data.frame.matrix(xtabs(Value ~ Name + Year, long))
#   1996 1997 1998 1999
# a    1    2    0    0
# b    0    0    3    4 
```

或者，借助包，您可以使用`dcast`“reshape2”。

```
library(reshape2)
dcast(long, Name ~ Year)
# Using Value as value column: use value.var to override.
#   Name 1996 1997 1998 1999
# 1    a    1    2   NA   NA
# 2    b   NA   NA    3    4 
```

* * *

我确实同意以这种方式重新调整单个变量，将名称修改成原来的样子可能会很烦人。但是，请记住该`reshape`函数的其他典型用例，您会发现它非常有用。例如，让我们向您的“长”数据集添加另一列，然后重塑：

```
> long$Something <- 5:8
> reshape(long, timevar = "Year", idvar = "Name", direction = "wide")
  Name Value.1996 Something.1996 Value.1997 Something.1997 Value.1998
1    a          1              5          2              6         NA
3    b         NA             NA         NA             NA          3
  Something.1998 Value.1999 Something.1999
1             NA         NA             NA
3              7          4              8 
```

如果不保留正在重塑的列的名称，您将不知道哪个 1996 代表“价值”，哪个代表“某事”。

* * *

*最后*，如果您想使用`reshape`（我碰巧喜欢），*并且*此示例准确反映了您的实际数据（只需一列需要由一列或多列“透视”），这里还有两个选项：

***使用`setNames`***. *很容易预测名称应该是什么：ID 变量的向量，后跟时间变量。*

```
> setNames(reshape(long, timevar = "Year", idvar = "Name", direction = "wide"), 
+          c("Name", long$Year))
  Name 1996 1997 1998 1999
1    a    1    2   NA   NA
3    b   NA   NA    3    4 
```

***使用`sub`或`gsub`编辑变量名称。*** *同样，由于我们知道我们只有一个被旋转的变量，因此很容易预测需要进行的更改。*

```
> wide <- reshape(long, timevar = "Year", idvar = "Name", direction = "wide")
> names(wide)
[1] "Name"       "Value.1996" "Value.1997" "Value.1998" "Value.1999"
> names(wide) <- gsub("Value.", "", names(wide))
> wide
  Name 1996 1997 1998 1999
1    a    1    2   NA   NA
3    b   NA   NA    3    4 
```

# javascript - Nodejs 引用 module.exports

> ID：15602562
> 
> 赞同：1
> 
> 时间：2013-03-24T18:53:29.363
> 
> 标签：javascript, node.js, module, require

我正在尝试在浏览器和 nodejs 服务器之间共享一些 js 代码。为此，我只使用这些做法：[http ://caolanmcmahon.com/posts/writing_for_node_and_the_browser/](http://caolanmcmahon.com/posts/writing_for_node_and_the_browser/)

问题是当我想导出一个函数而不是一个对象时。在节点中，您可以执行以下操作：

```
var Constructor = function(){/*code*/};
module.exports = Constructor; 
```

这样当使用 require 时，您可以执行以下操作：

```
var Constructor = require('module.js');
var oInstance = new Constructor(); 
```

问题是当我尝试引用模块中的 module.exports 对象并使用该引用用我的函数覆盖它时。在模块中它将是：

```
var Constructor = function(){/*code*/};
var reference = module.exports;
reference = Constructor; 
```

为什么这不起作用？我不想使用简单的解决方案在干净的代码中插入 if ，但我想了解为什么它是非法的，即使 reference===module.exports 是真的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T18:58:56.247

它不起作用，因为*不*`reference`指向，它指向的对象指向：*`module.exports``module.exports`*

 *```
module.exports
              \ 
                -> object
              / 
     reference 
```

当您为 分配新值时`reference`，您只需更改`reference`指向的内容，而不是`module.exports`指向的内容：

```
module.exports
              \ 
                -> object

reference -> function 
```

* * *

这是简化的示例：

```
var a = 0;
var b = a; 
```

现在，如果您设置`b = 1`，那么 的值`a`仍然是`0`，因为您刚刚为 分配了一个新值`b`。它对 的值没有影响`a`。

> 我想了解为什么它是非法的，即使 reference===module.exports 是真的

这不是*非法*的，这就是 JavaScript（和大多数其他语言）的工作方式。`reference === module.exports`是真的，因为在赋值之前，它们都指向同一个对象。赋值后，`references`引用与 不同的对象`modules.export`。*

# php - 空白电子邮件，使用 PHP 发送电子邮件时没有错误

> ID：15602565
> 
> 赞同：-3
> 
> 时间：2013-03-24T18:53:40.320
> 
> 标签：php, html, email, email-attachments

我的代码没有产生电子邮件，只是显示一个空白屏幕。我已经将输出与其他电子邮件进行了比较，并且比较标题似乎没有问题。

### 代码：

```
 function SendEmail($pemail, $pfirst, $plast, $add1,$add2,$pcode) {

    $messageplain="Test here is a test ";
    $messagehtml = "<p> A test is here </p>";
    $myemail = "coconut@gmail.com";         //<-----Put Your email address here. ----->
    $test_email="blah@hotmail.co.uk";
    $crlf = "\r\n";

        echo "<br /><b>Emailing ..." . $pemail. "</b><br />";

        $to = $test_email;
         //$to = "$first_name $lasyt_name<$pemail";
        $email_subject = "With urgent regard your pledge to support Speckled Wood TQ834112";
        // Add in our primary content boundary, and mime type specification - for inline attachment image:
        $sep = sha1(date('r', time()));
        $headers = array
        (
    //        'Content-Transfer-Encoding: 7bit',
    //      'In-Reply-To:'.$sep.'@speckledwood.org.uk',
            'Content-Type: multipart/alternative; boundary="-PHP-'.$sep.'"',
    //      'To: ' . $to,
            'From: Friends of Speckled Wood Management Trust <'.$myemail.'>',
            'Reply-To: Friends of Speckled Wood Management Trust <'.$myemail.'>',
            'MIME-Version: 1.0',
    //        'Date: ' . date('r', $_SERVER['REQUEST_TIME']),
            'Message-ID: <' . $_SERVER['REQUEST_TIME'] . md5($_SERVER['REQUEST_TIME']) . '@' . $_SERVER['SERVER_NAME'] . '>',
            'X-Mailer: PHP v' . phpversion(),
    //      'Return-Path: Friends of Speckled Wood Management Trust <'.$myemail.'>',
    //        'X-Originating-IP: ' . $_SERVER['SERVER_ADDR'],
        );
        $image="../assets/foswmt.jpg";
        if(!file_exists($image)) die("ERROR #000001: Fatal Error could not locate email attachment image {$image}");
        $attachment = file_get_contents($image);
        $encoded = base64_encode($attachment);
        $attached = chunk_split($encoded);

        $email_body = array
          (
            '---PHP-'.$sep.'',
            'Content-Type: multipart/alternative; boundary="-PHP-'.$sep.'"',
            ' ',
            ' ',
            '---PHP-'.$sep.'',
            'Content Type: text/plain; charset="iso-8859-2"',
    //      'Content-Disposition: inline',
            'Content-Transfer-Encoding: quoted-printable',
            ' ',
            $messageplain,
            ' ',
            ' ',
            '---PHP-'.$sep.'',
            'Content-Type: text/html; charset="iso-8859-2"',
    //      'Content-Disposition: inline',
            'Content-Transfer-Encoding: quoted-printable',
            ' ',
            '<html><body>',
            '<p><centre><img src="cid:PHP-CID-'.$sep.'" alt="foswmt group" height="200" width="200"></centre></p>',
            $messagehtml,
            '</body></html>',
            '---PHP-'.$sep.'--',
            ' ',
            '---PHP-'.$sep.'',
            'Content Type: image/jpeg;',
            'Content-Transfer-Encoding: base64',
            'Contect-ID: <PHP-CID-'.$sep.'>',
            'Content-Disposition: attachment; filename = "logo.jpg"',
            $attached,
            '---PHP-'.$sep.'--'

        );

        $email_subject = $pfirst. " ". $plast . " we wish you to make a pledge with urgent regard to Speckled Wood TQ834112";
        // $headers .= "Return-Path: http://www.speckledwood.org.uk/donate\r\n";
        $sent = mail($to,$email_subject,implode($crlf, $email_body),implode($crlf, $headers));

        //echo( "<br /><br />header: <br />" . $headers."body: <br />". $email_body .  "<br /><br />");
    }
    ?>

    <?php
                $count=0;
                $countemail=0;

                $conlivedata = mysql_pconnect("localhost","user","password");
                    if (!$conlivedata) {
                  echo "Failed to connect to MySQL: " . mysqli_connect_error();
                }
                $con = mysql_pconnect("instance41919.db.xeround.com:6326","user","password");
                if (!$con) {
                  echo "Failed to connect to MySQL: " . mysqli_connect_error();
                }
                mysql_select_db("csv_db", $con)or die("A MySQL error has occurred.Your Query: Error: (" . mysql_errno() . ") " . mysql_error());

                $result = mysql_query("SELECT * FROM `tbl_name` WHERE EmailAddr <> ' ' ORDER BY `EmailAddr`", $con) or die("<br/>A MySQL Query error has occurred.Your Query: Error: (" . mysql_errno() . ") " . mysql_error());

                $total = (mysql_result($result, 0));
                ob_end_flush();
                $i=0;

                while($row = mysql_fetch_array($result)) {
                    $Email = $row['EmailAddr'];
                    $i++;
                    if ($Email != NULL ){
                        mysql_select_db("foswood_db", $conlivedata) or die("<br/>A MySQL error has occurred Slecting Database.<br />Your Query: <br/> Error: (" . mysql_errno() . ") " . mysql_error());
                        $liveresult = mysql_query("SELECT COUNT(*) FROM pledges WHERE EmailAddr = '$Email'", $conlivedata) or die("<br/>A MySQL error has occurred.<br />Your Query: <br /> Error: (" . mysql_errno() . ") " . mysql_error());
                        if(mysql_result($liveresult, 0) ) {
                            $count +=1;
                        } else {
                            $countemail+= 1;
                            echo $row['first_name'] . " " . $row['last_name'] . "       at : " . $row['street_address']. "," . $row['street_address2']. "-" . $row['street_address']. "." . $row['postcode_address'];
                            SendEmail($row['EmailAddr'],$row['first_name'],$row['last_name'] ,$row['street_address'],$row['street_address2'],$row['street_address'],$row['postcode_address']);

                                    // Calculate the percentation
                            $percent = intval(($i/$total) * 100)."%";
                            // Javascript for updating the progress bar and information
                            echo '<script language="javascript">
                            document.getElementById("progress").innerHTML="<div style=\"width:'.$percent.';background-color:#880000;\">&nbsp;</div>";
                            document.getElementById("information").innerHTML="'.$i.' row(s) processed.";
                            </script>';

                            // This is for the buffer achieve the minimum size in order to flush data
                            echo str_repeat(' ',1024*64);

                            // Send output to browser immediately
                            flush();

                        }
                        mysql_select_db("csv_db", $con) or die("<br/>A MySQL error has occurred Slecting Database.<br />Your Query: <br /> Error: (" . mysql_errno() . ") " . mysql_error());
                    }
                    echo "<br />";
                }
                // Tell user that the process is completed
                echo '<script language="javascript">document.getElementById("information").innerHTML="Process completed"</script>';

                echo "<br/><br/><b/>Totals:  " .$countemail." users where emailed . ". $count . " users have pledged.</b/>";
                mysql_close($con);
                mysql_close($conlivedata);

    ?> 
```

### 电子邮件输出：

```
 x-store-info:J++/JTCzmObr++wNraA4Pa4f5Xd6uens1Lp3iK0Ye5aEjPdIeMl+dLztxnwvfAro8TnNo6oBhGA7L/DjzgZOx0ppu40FIoBOCmeUFoon2LHkqEz1HUPWZD8509hWmnOI6C5Vv2MwPthOB2arSXfcxQ==
    Authentication-Results: hotmail.com; spf=none (sender IP is 213.146.180.236) smtp.mailfrom=anonymous@plesk1.scl.co.uk; dkim=none header.d=gmail.com; x-hmca=none
    X-SID-PRA: blah@gmail.com
    X-AUTH-Result: NONE
    X-SID-Result: NONE
    X-Message-Status: n:n
    X-Message-Delivery: Vj0xLjE7dXM9MDtsPTE7YT0xO0Q9MTtHRD0xO1NDTD0w
    X-Message-Info: aKlYzGSc+Lm8gD7dwUXYSRNR5LLYBBvh97q7glDSvulIBZntxAmNOdzNstRoIcJdOm3yFA8mQDHaJB3blBVcKgwYxogtqVPN3HhKvyIhWpalwIvoeAaTyHiqoDqbM88C293BzBRm/nMwFkTrFlu4qMmHYqUBkcOD
    Received: from plesk1.scl.co.uk ([213.146.180.236]) by BAY0-MC3-F1.Bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.4900);
         Sun, 24 Mar 2013 11:37:33 -0700
    Received: (qmail 8872 invoked by uid 33); 24 Mar 2013 18:37:32 +0000
    Date: 24 Mar 2013 18:37:32 +0000
    To: blah@hotmail.co.uk
    Subject: Adam Britton we wish you to make a pledge with urgent regard to Speckled Wood TQ834112
    X-PHP-Originating-Script: 10323:EmailUsers2.php
    Content-Type: multipart/alternative; boundary="-PHP-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191"
    From: Blah <blah@gmail.com>
    Reply-To: Blah <blah@gmail.com>
    MIME-Version: 1.0
    Message-ID: <1364150249e01977f5edd650baa7b5e672a1d5bc96@www.speckledwood.org.uk>
    X-Mailer: PHP v5.3.2-1ubuntu4.10
    Return-Path: anonymous@plesk1.scl.co.uk
    X-OriginalArrivalTime: 24 Mar 2013 18:37:33.0432 (UTC) FILETIME=[A6013F80:01CE28BE]

    ---PHP-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191
    Content-Type: multipart/alternative; boundary="-PHP-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191"

    ---PHP-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191
    Content Type: text/plain; charset="iso-8859-2"
    Content-Transfer-Encoding: quoted-printable

    Test here is a test 

    ---PHP-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191
    Content-Type: text/html; charset="iso-8859-2"
    Content-Transfer-Encoding: quoted-printable

    <html><body>
    <p><centre><img src="cid:PHP-CID-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191" alt="foswmt group" height="200" width="200"></centre></p>
    <p> A test is here </p>
    </body></html>

    ---PHP-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191--
    ---PHP-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191
    Content Type: image/jpeg;
    Content-Transfer-Encoding: base64
    Contect-ID: <PHP-CID-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191>
    Content-Disposition: attachment; filename = "logo.jpg"
    /9j/4AAQSkZJRgABAgEASABIAAD/7RO4UGhvdG9zaG9wIDMuMAA4QklNA+0AAAAAABAASAAAAAEA
    AgBIAAAAAQACOEJJTQQNAAAAAAAEAAAAHjhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAA
    AAAAAAEAOEJJTQQKAAAAAAABAAA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9m
    ZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAAB
    AC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA////

    etc...
    ---PHP-12e6e3f21ec76200f42baff8c05e6cbbe0fbe191-- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:13:46.240

我不能告诉你你的代码有什么问题，但我的一般建议是使用像[SwiftMailer](http://swiftmailer.org/)这样的库。它消除了构建多部分和附件电子邮件的痛苦。

除此之外，首先需要做的是基本调试：一步步检查程序流程，输出变量内容，直到找到文本空白的原因。这会给你一个更具体的问题。

# node.js - 使用 node.js 和 msnodesql 发布 Web 角色会出现 sql 错误 IM002

> ID：15602568
> 
> 赞同：0
> 
> 时间：2013-03-24T18:54:18.133
> 
> 标签：node.js, azure-sql-database

我正在使用 Publish-AzureServiceProject 发布节点应用程序。与 sql server 无关的一切工作正常。但是，在运行查询时，我收到错误 IM002（“未找到数据源名称且未指定默认驱动程序”）

看起来生产环境中没有安装正确的驱动程序？毕竟我在本地运行服务时遇到了同样的问题，但是在我从[这里安装驱动程序后一切都解决了](http://www.microsoft.com/en-us/download/details.aspx?id=29065)

所以问题是，我是否也需要在生产环境中安装驱动程序，如果需要，如何安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T00:32:58.783

这确实是问题所在。我使用远程桌面登录到角色并安装了 SQL 本机客户端。

# visual-studio-2012 - Visual Studio 2012 搜索范围

> ID：15602570
> 
> 赞同：6
> 
> 时间：2013-03-24T18:54:19.813
> 
> 标签：visual-studio-2012

![在此处输入图像描述](../Images/80d222e919bf14207d099490af196666.png)

*Visual Studio 2012 快速查找对话框*

**在 Visual Studio 2012 中更改搜索范围是否有快捷方式或制作方法？**

重新设计了新的快速搜索对话框，通过 Tab 键进入搜索范围非常笨拙，因为初始键盘焦点位于第一个文本框中，并且范围下拉菜单移动得相对较远。

在 Visual Studio 2010 中，只需按一下 Tab 键就可以了。

![在此处输入图像描述](../Images/b6e116f1cc43ef1da0eced800f8b7250.png)

*Visual Studio 2012 快速查找对话框*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T18:57:05.130

总统先生，您可以随时使用`ctrl`++来`shift`调`F`出旧的搜索对话框。然后你就可以了`tab`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-20T12:23:27.657

在 Visual Studio 2015 和 2017 中，`Alt`+`L`将焦点移动到范围下拉列表。我还没有尝试过其他 VS 版本。

编辑：

此外，

`Alt`+`w`切换整个单词选项

`Alt`+`c`切换匹配大小写选项

`Alt`+`e`切换正则表达式选项

Enter 进行搜索。`F3`重复上一次搜索。

`CTrl + Enter`弹出搜索选项子菜单

这些对 VS2015 和 VS2017 有效

# android - 用于从移动设备打印的 CSS

> ID：15602571
> 
> 赞同：0
> 
> 时间：2013-03-24T18:54:21.770
> 
> 标签：android, html, css, mobile-website

我正在为 Android 构建一个应用程序，它将将网页打印到蓝牙打印机问题是我的 div 的尺寸和字体大小正在从屏幕分辨率变为另一个，从 10.1 选项卡到 4.7 英寸手机和 3.5

我尝试使用几乎所有的单位：pt、em、px...

现在的一种解决方案是制作特定于分辨率的表格，但这是唯一的方法！！！

# java - Java GUI 空白和空指针异常

> ID：15602579
> 
> 赞同：0
> 
> 时间：2013-03-24T18:54:58.607
> 
> 标签：java, swing, methods, nullpointerexception

我修复了这个问题，现在当我点击我的计算按钮时，我得到以下信息：

除了现在的计算按钮之外，这一切都有效，这是最重要的部分。预先感谢大家的帮助。

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at Radio$CalcButtonListener.actionPerformed(Radio.java:76)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;

    public class Radio extends JFrame 
    {

        private JPanel Panel;
        private JPanel buttonPanel;
        private JTextField base;
        private JTextField width;
        private JRadioButton squareArea;
        private JRadioButton parallelogramArea;
        private final int WINDOW_WIDTH = 550;
        private final int WINDOW_HEIGHT = 550;
        double pTotal;
        double sTotal;

        public Radio()
        {
            setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
            setTitle("Area Calculator");
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setVisible(true);
            buildPanel();
            add(Panel);

        }

        private void buildPanel() 
        {    
            Panel = new JPanel();
            JLabel messageLabel1 = new JLabel("Please enter the base: ");
            JTextField base = new JTextField(10);
            JLabel messageLabel2 = new JLabel("Please enter the width: ");
            JTextField width = new JTextField(10);
            JRadioButton squareArea = new JRadioButton("Choice 1", true);
            JRadioButton parallelogramArea = new JRadioButton("Choice 2");
            ButtonGroup group = new ButtonGroup();
            JButton calcButton = new JButton("Calculate");
            calcButton.setBackground(Color.BLUE);
            calcButton.setForeground(Color.PINK);
            calcButton.addActionListener(new CalcButtonListener());
            Panel.add(messageLabel1);
            Panel.add(base);
            Panel.add(messageLabel2);
            Panel.add(width);
            group.add(squareArea);
            group.add(parallelogramArea);
            Panel.add(squareArea);
            Panel.add(parallelogramArea);
            Panel.add(calcButton);
        }

        public static void main (String[] args)
        {

            Radio radio = new Radio();
            radio.buildPanel();
        }

        private class CalcButtonListener implements ActionListener
        {

            public void actionPerformed(ActionEvent e) 
            {

                if (parallelogramArea.isSelected());
                {
                    pTotal = Double.parseDouble(base.getText()) * Double.parseDouble(width.getText());
                    JOptionPane.showMessageDialog(null, "The Area is: " + pTotal);
                }

                if (squareArea.isSelected())
                {

                     sTotal = Double.parseDouble(base.getText()) * Double.parseDouble(width.getText());
                     JOptionPane.showMessageDialog(null, "The Area is: " + sTotal);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:58:08.763

我认为你`buttonPanel`是空的。但是你可以只调试你的代码行 - 逐行找出其中哪些是空的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:58:12.813

您不会`Panel`在任何地方实例化。在`buildPanel`您可以添加：

```
panel = new JPanel(); 
```

* * *

也`buttonPanel`未初始化：

```
buttonPanel = new JPanel(); 
```

然后需要将该面板添加到您的`JFrame`：

```
add(panel); 
```

请注意，Java 命名约定表明变量名以*小写*字母开头，这将使`Panel` `panel`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T18:58:27.110

您尚未创建 Panel 对象。

```
JPanel panel = new JPanel(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T19:04:26.253

您需要实例化 Panel 和 buttonPanel。您可以在构造函数中执行此操作。

```
 public Radio(){

        Panel = new JPanel();
        buttonPanel = new JPanel();
        setSize(WINDOW_WIDTH, WINDOW_HEIGHT);
        setTitle("Area Calculator");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        buildPanel();
        add(Panel);
        setVisible(true);

    } 
```

顺便说一句，在将可见性设置为 true 之前调用 buildPanel() 并添加面板。

# r - 按列名 R 合并

> ID：15602581
> 
> 赞同：2
> 
> 时间：2013-03-24T18:55:25.907
> 
> 标签：r, matrix, merge

我有

```
a <- matrix(c(1,3,4,2,2,6,3,1,6), nrow = 3, ncol=3, byrow=TRUE, dimnames = list(NULL, c("Apples", "Pears", "Oranges")))

  Pears Apples Oranges
1     1      3       4
2     2      2       6
3     3      1       6

b <- matrix(c(1,3,2,6,3,6), nrow = 3, ncol=2, byrow=TRUE, dimnames = list(NULL, c( "Pears", "Oranges")))

  Pears Oranges
1     1       4
2     2       6
3     3       6 
```

我想合并它们以获得这样的结果：

```
 Pears Apples Oranges
1     1      3       4
2     2      2       6
3     3      1       6
4     1     Na       4
5     2     Na       6
6     3     Na       6 
```

即，**按列名将它们组合在一起，在第二帧缺少值的情况下留下 Na/s，对于较大矩阵 a、较小矩阵 b 的一般情况**

rbind 不起作用， merge 做了一些奇怪的事情。我追求什么？我也可以使用内存效率最高的东西，因为这最终会被做很多次，有很多列名。

谢谢，

-N

编辑：当我最初询问时，我可能应该提到这一点，但我实际上想达到上面的确切效果，但有一些非常重要的警告：

我正在使用矩阵

第一个矩阵将始终包含比第二个矩阵更多的列名

我可能想从包 bigmemory 创建一个 big.matrix。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T19:13:28.360

这是一种更通用的方法，以防您有多个列`a`并且`b`需要添加：

```
b.toAdd <- setdiff (names(a), names(b))
if (length(b.toAdd))
  b[, b.toAdd] <- NA

a.toAdd <- setdiff (names(b), names(a))
if (length(a.toAdd))
  a[, a.toAdd] <- NA

rbind(a, b) 
```

## 更新：

刚刚注意到您关于需要内存效率的评论。在这种情况下，您可能想要使用，`data.table`因为使用`<-`会创建不必要的副本。
`data.table`istead 有一个`:=`效率明显更高的运算符。

```
library(data.table)
a <- data.table(a)
b <- data.table(b)

if (length(b.toAdd <- setdiff (names(a), names(b))))
    b[, c(b.toAdd) := NA]

if (length(a.toAdd <- setdiff (names(b), names(a))))
    a[, c(a.toAdd) := NA]

rbind(a, b, use.names=TRUE)

#    Pears Apples Oranges
# 1:     1      3       4
# 2:     2      2       6
# 3:     3      1       6
# 4:     1     NA       4
# 5:     2     NA       6
# 6:     3     NA       6 
```

* * *

**搜索 SO`[r] data.table benchmarks`以了解改进**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-24T19:07:48.843

你可以使用：

```
rbind(a, cbind(b, Apples=NA))
  Pears Apples Oranges
1     1      3       4
2     2      2       6
3     3      1       6
4     1     NA       4
5     2     NA       6
6     3     NA       6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T19:09:35.240

不太确定你在追求什么，但你可以与添加的列合并（类似于 jmsinger 的回答）：

```
merge(a, cbind(b, Apples=NA), all=TRUE)
##   Pears Apples Oranges
## 1     1      3       4
## 2     1     NA       4
## 3     2      2       6
## 4     2     NA       6
## 5     3      1       6
## 6     3     NA       6 
```

# html - 如何在另一个 div 中右对齐包含表单的 div？

> ID：15602584
> 
> 赞同：0
> 
> 时间：2013-03-24T18:55:27.407
> 
> 标签：html, css

这是我的标题。

![在此处输入图像描述](../Images/48df832f79af47bab819ca70ae5e1bea.png)

我的目标是将注销按钮移到最右边，而不会失去点击它们的能力。

现在，我尝试了相对位置和绝对位置，这将按钮向右移动，但按钮不再可点击。

*   添加行位置：相对；到#my-menus（使按钮无法点击）

我还尝试添加一个垫片，或者使我的注销按钮更大，但没有奏效。无论我做什么，宽度都被固定在 125 像素。（尽管这些似乎不是有效的解决方案......）

照原样，按钮是可点击的。

我究竟做错了什么？我更感兴趣的是为什么会发生这种情况，然后是如何解决它，因为我可以接受目前的结果。另外，如果我对所有 div 完全使用了错误的方法，而没有，请告诉我。我想学习。

这是html和css文件：

* * *

```
<body>
    <div id="header">
        <div id="title">
            <div>
                <img src="styles\monkey-head-pic-hi.png" alt="">
                RotoMonkey
            </div>
            <div id="userGreeting">
                <p>Welcome <%=session.getAttribute("name")%>!</p>
            </div>
        </div>
        <div id="my-menus">
            <div>
                <form method="get" action="homePageForm.jsp"> 
                    <input class="menuItem" type="submit" value="Home">
                </form>
            </div>
            <div>
                <form method="get" action="loginForm.jsp"> 
                    <input class="menuItem" type="submit" value="Members"> 
                </form>
            </div>
            <div>
                <form method="get" action="loginForm.jsp">
                    <input class="menuItem" type="submit" value="Player Stats">
                </form>
            </div>
            <div>
                <form method="get" action="loginForm.jsp">
                    <input class="menuItem" type="submit" value="Create League">
                </form>
            </div>
            <div>
                <form method="get" action="loginForm.jsp">
                    <input class="menuItem" type="submit" value="Join league">
                </form>
            </div>
            <div id="logout">       
                <form method="get" action="loginForm.jsp">
                    <input class="menuItem" type="submit" value="Logout">
                </form>
            </div>          
        </div>
    </div>
</body> 
```

* * *

```
#header
{
    width:100%;
}

#header div
{
    width:1000px;
}

#title
{ 
    background-color:white;
    height:75px;
    color:Green;
    font-size: 40px;
}

#title div
{ 
    float:left; 
    width:500px;
    height:75px;
}

img
{
    max-width: 100%;
    max-height: 100%;
    margin:5px;
    vertical-align: middle;
}

#userGreeting
{
    position:relative;
    font-size: medium;  
}
#userGreeting p
{
    position:absolute;
    bottom:0;
    right:0;
    margin: 0;
    padding: 0;
    margin-right: 20px;
    margin-bottom:5px;
}

#my-menus
{
    background-color:green;
    overflow:hidden;
    width:1000px;
    height:auto;
    z-index:-2;
}

#my-menus div
{
    display:inline-block;
    height:auto;
    text-align:center;
    border-right:thin solid white;
    width:125px;
}

/* #logout */
/* { */
/*  position:absolute; */
/*  right:0; */
/* } */

body {
    width: 1000px;
    margin: 50px auto;
    border-radius: 5px;
    box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.2), 
                inset 0px 1px 0px 0px rgba(250, 250, 250, 0.5);
}

input[type=submit] {
    border: green;
    background: transparent; 
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#64c8ef', endColorstr='#00a2e2',GradientType=0 );
    color: #fff;
    padding: 5px 5px;
    text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.3);
    z-index:-10;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:11:40.947

这就是你想要完成的吗？[小提琴](http://jsfiddle.net/PUYFt/)

我刚刚补充说：

```
#logout {
    float:right;
} 
```

问题是你所有的`div`元素都是`inline-block`内联的，而且它们一直在堆叠。您`position: relative`制作的按钮无法点击，因为`#my-menus`它已经被元素`z-index: -2`覆盖并且被`#header`元素覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T19:11:40.800

您可以在 css 中使用此代码来右对齐 div

```
div{float:right;} 
```

# html - 将图像的侧面裁剪为屏幕大小并居中对齐

> ID：15602585
> 
> 赞同：2
> 
> 时间：2013-03-24T18:55:34.890
> 
> 标签：html, css

我有一个沿着我的网站宽度运行的图像。它包含在宽度设置为 100% 的 div 中。图像本身的宽度为 2560 像素。

我希望图像与浏览器视图中的页面宽度相同，因为目前它使页面更长。

简单地将图像的宽度设置为 100% 会产生更小和不成比例的效果。

搜索表明可以通过将 设置`max-width`为 100% 来实现，但这只会切断图像的末端。

有没有办法保持中心对齐，即裁剪图像的两端使其始终保持居中？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:08:19.173

你应该使用`background-image`来设置它。

这将使您可以像这样轻松地将其居中：

```
body{
background: url("path/to/image") no-repeat fixed center top; 
} 
```

`center`- 使图像居中

`top`- 垂直调整图像

`no-repeat`- 确保背景不重复

`fixed`- 滚动时跟随

您可能不想要所有这些属性，您正在寻找的是中心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:04:00.460

我想你正在寻找的是：

[http://jsfiddle.net/promatik/hFsYv/](http://jsfiddle.net/promatik/hFsYv/)

**HTML：**

```
<div id="bg-div"></div> 
```

**CSS：**

```
#bg-div {
    position: fixed;
    width: 100%;
    height: 100%;
    background-repeat: no-repeat;
    background-attachment:fixed;
    background-position: center;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

这将把背景定位在 div 的中心，并裁剪它以最佳方式填充 div。

# sql-server-2008 - 使用 MAX 函数的 SQL 连接

> ID：15602588
> 
> 赞同：-1
> 
> 时间：2013-03-24T18:55:45.917
> 
> 标签：sql-server-2008

我在sql中创建了两个表......

1.产品

和

```
ProductId as Primary key,
ProductName,ProductPrice 
and ProductCategoryId as Foreign Key 
```

它指的是`primary key of ProductCategory table`.

2.产品类别

和

```
CategoryId as Primary Key and CategoryName. 
```

我想在每个类别中显示具有最高价格的产品.....

假设有两个类别..

```
1.Soap 
2.Shampoo. 
```

在产品表中有 4 行...

```
1.Dove Soap with price 42Rs
2.Dettol Soap with price 25Rs
3.Dove Shampoo with price 120Rs and
4.Sunsilk Shampoo with Price 140Rs 
```

然后输出应该像....

1.Dove肥皂，价格42，类别名称肥皂。2.Sunsilk洗发水，价格140，类别名称洗发水。

请使用连接操作回复此 sql 查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:08:25.590

尝试这个

```
;WITH MaxValues
AS
(
SELECT MAX(p.ProductPrice) MaxPrice, p.ProductCategoryId ProductCategoryId
FROM Product p 
GROUP BY p.ProductCategoryId
)
SELECT p.ProductName, m.MaxPrice, c.CategoryName
FROM MaxValues m JOIN Product p ON m.ProductCategoryId = p.ProductCategoryId
JOIN ProductCategory c ON p.ProductCategoryId = c.CategoryId
WHERE p.ProductPrice = m.MaxPrice 
```

# django - Django用实际的contact.name替换所有出现的[name]

> ID：15602589
> 
> 赞同：0
> 
> 时间：2013-03-24T18:55:46.927
> 
> 标签：django

我正在寻找正确的方向。当我循环所有联系人时，我想以某种方式解析“batch.content”（其中包含我的消息）。我想在文本中找到任何出现的 [name] 并替换为 contact.name。

```
 for e in Contact.objects.filter(contact_owner=batch.user, group=batch.group):
            msg = Message.objects.create(
                recipient_number=e.mobile,
                content=batch.content,
                sender=e.contact_owner,
                billee=batch.user
            ) 
```

我的问题是，如何解析字符串“batch.content”并替换所有出现的 [name]？使用我的代码的示例将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T18:58:42.147

```
batch.content.replace('[name]', contact.name) 
```

# c++ - 如何读取 IRC 数据包？

> ID：15602590
> 
> 赞同：0
> 
> 时间：2013-03-24T18:55:53.033
> 
> 标签：c++, tcp, irc, packet, pcap

我目前在 C++ 中使用 pcap 来读取 tcp 数据包。问题是我对如何读取数据包是否使用 IRC 协议以及如何读取从 IRC 客户端和服务器发送和发送到 IRC 客户端和服务器的命令感到困惑？例如，使用wireshark，我可以查看协议是否为IRC，并且可以查看所有给定的命令和参数。我正在尝试在 pcap 中做同样的事情。是否有用于读取 TCP 数据包部分的 IRC 特定标头结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:03:14.203

IRC 基于 rfc 2812，您可以在此处获取所有详细信息

[https://www.rfc-editor.org/rfc/rfc2812](https://www.rfc-editor.org/rfc/rfc2812)

# java - java QuickServer 对象处理程序

> ID：15602594
> 
> 赞同：0
> 
> 时间：2013-03-24T18:56:03.667
> 
> 标签：java, sockets, open-source, java-server

我最近遇到了一个用于 java 多线程服务器的开源库[http://www.quickserver.org/](http://www.quickserver.org/)。第一个使用 ClientCommandHandler 的示例 EchoServer 运行良好。但是它只适用于字符串。在我的特定应用程序中，我想使用一个特殊的自定义对象在服务器和客户端之间交换消息。

我尝试了以下方法：

```
package server;

import java.io.IOException;

import org.quickserver.net.AppException;
import org.quickserver.net.server.DataMode;
import org.quickserver.net.server.DataType;
import org.quickserver.net.server.QuickServer;

public class TestServer {
      public static void main(String s[])  {
        QuickServer server = new QuickServer();
        try {
            server.setDefaultDataMode(DataMode.OBJECT, DataType.IN);
            server.setDefaultDataMode(DataMode.OBJECT, DataType.OUT);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        server.setClientObjectHandler("server.ObjHandler");
        server.setPort(4123);
        server.setName("EchoServer v 1.0");
        try {
          server.startServer();
        } catch(AppException e){
          System.err.println("Error in server : "+e);
        }
      }
    } 
```

...并将其设置为对象处理程序...

```
package server;

import java.io.IOException;
import java.net.SocketTimeoutException;

import org.quickserver.net.server.ClientHandler;
import org.quickserver.net.server.ClientObjectHandler;

public class ObjHandler implements ClientObjectHandler {

    @Override
    public void handleObject(ClientHandler arg0, Object arg1)
            throws SocketTimeoutException, IOException {
        // TODO Auto-generated method stub

    }
} 
```

所以我试图做的只是用对象处理程序完全替换命令处理程序。我收到以下错误：

```
Loading QuickServer v2.0.0 RC1 [PID:2488]... Done
Mar 24, 2013 7:26:07 PM org.quickserver.net.server.QuickServer loadBusinessLogic
SEVERE: ClientCommandHandler AND ClientEventHandler was not set.
Mar 24, 2013 7:26:07 PM org.quickserver.net.server.QuickServer startServer
SEVERE: Exception: org.quickserver.net.AppException: ClientCommandHandler AND 
ClientEventHandler was not set.
org.quickserver.net.AppException: ClientCommandHandler AND ClientEventHandler was not set.
    at org.quickserver.net.server.QuickServer.loadBusinessLogic(QuickServer.java:3142)
    at org.quickserver.net.server.QuickServer.startServer(QuickServer.java:432)
    at server.TestServer.main(TestServer.java:24)
Error in server : org.quickserver.net.AppException: Exception :org.quickserver.net.AppException: ClientCommandHandler AND ClientEventHandler was not set. 
```

所以我的问题。是否可以在根本不定义命令处理程序的情况下用对象处理程序替换命令处理程序？如果不是，实现对象处理程序的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T07:22:55.797

它仍然需要CommandHandler。但在“GotConnected”方法中，您可以添加以下内容：

```
 public void gotConnected(ClientHandler handler) throws SocketTimeoutException,
        IOException {
    handler.setDataMode(DataMode.OBJECT, DataType.IN);
    handler.setDataMode(DataMode.OBJECT, DataType.OUT);     
} 
```

其余的传输将由您的 ObjectHandler 类完成。

# magento - 在没有示例数据的情况下安装 Magento 1.7.0.2 时出现 SQL 错误

> ID：15602597
> 
> 赞同：0
> 
> 时间：2013-03-24T18:56:35.307
> 
> 标签：magento, installation

在没有示例数据的情况下安装 magento 1.7.0.2 时出现以下错误

> 文件中的块引用错误：“C:\wamp\www\magentojs\app\code\core\Mage\SalesRule\sql\salesrule_setup\upgrade-1.6.0.0-1.6.0.1.php” - SQLSTATE[42000]：语法错误或访问冲突：1067“期间”的默认值无效

对此有已知的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T03:43:53.493

在 install-1.6.0.0.php 你有

```
->addColumn('period', Varien_Db_Ddl_Table::TYPE_DATE, null, array(
'nullable' => false,
), 'Period') 
```

提供一个默认值，这意味着将上面的代码替换为

```
->addColumn('period', Varien_Db_Ddl_Table::TYPE_DATE, null, array(
'nullable' => false,
'default' => '0000-00-00',
), 'Period') 
```

# .htaccess - .htaccess RewriteRule 不起作用

> ID：15602598
> 
> 赞同：0
> 
> 时间：2013-03-24T18:56:41.973
> 
> 标签：.htaccess

```
RewriteRule new/$ /search.php?category=1
RewriteRule new/\?(.+)$ /search.php?category=1&$1 
```

我正在尝试做这样的事情，如果访问以下地址链接，

```
http://onlineshop.com/new/
http://onlineshop.com/new/?price_max=30 
```

然后它会打开这个链接，

```
http://onlineshop.com/new/search.php?category=1
http://onlineshop.com/new/search.php?category=1&price_max=30 
```

不幸的是，它不是这样工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:03:17.923

A`RewriteRule`不会自然捕获查询字符串参数，您必须使用这种`.htaccess`：

```
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteRule ^new/$ /search.php?category=1&%1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:13:49.400

您可以**使用 QSA 标志**`/new`简单地从to重定向，Apache 将附加现有的查询字符串。像这样的东西会为你工作：`/search.php`

 **```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^new/?$ /search.php?category=1 [L,QSA,NC] 
```**

# xml - dtd 错误文件末尾的额外内容

> ID：15602599
> 
> 赞同：0
> 
> 时间：2013-03-24T18:56:52.493
> 
> 标签：xml, dtd

似乎无法修复我的代码。我收到此错误，指出文件末尾有额外内容

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Catalog [
<!ELEMENT Catalog (Movie+)>
<!ELEMENT Movie (Title,Year,Length,TopBilledActors)>
<!ELEMENT Title (#PCDATA)>
<!ELEMENT Year (#PCDATA)>
<!ELEMENT Length (#PCDATA)>
<!ELEMENT TopBilledActors (#PCDATA)>
<!ATTLIST Movie movieID ID #REQUIRED>
<!ATTLIST Movie genre (Drama|Fantasy|Action|Comedy) #REQUIRED>
<!ATTLIST Movie earningsrank CDATA #IMPLIED>
]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T12:56:36.607

Maybe you write a file.dtd! If i try to write this code into a DTD file I get this error (extra content at the end of the file):

test.dtd

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Catalog [
<!ELEMENT Catalog (Movie+)>
<!ELEMENT Movie (Title,Year,Length,TopBilledActors)>
<!ELEMENT Title (#PCDATA)>
<!ELEMENT Year (#PCDATA)>
<!ELEMENT Length (#PCDATA)>
<!ELEMENT TopBilledActors (#PCDATA)>
<!ATTLIST Movie movieID ID #REQUIRED>
<!ATTLIST Movie genre (Drama|Fantasy|Action|Comedy) #REQUIRED>
<!ATTLIST Movie earningsrank CDATA #IMPLIED>
]> 
```

But if i write a xml file it work fine (and nothing error):

test.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Catalog [
<!ELEMENT Catalog (Movie+)>
<!ELEMENT Movie (Title,Year,Length,TopBilledActors)>
<!ELEMENT Title (#PCDATA)>
<!ELEMENT Year (#PCDATA)>
<!ELEMENT Length (#PCDATA)>
<!ELEMENT TopBilledActors (#PCDATA)>
<!ATTLIST Movie movieID ID #REQUIRED>
<!ATTLIST Movie genre (Drama|Fantasy|Action|Comedy) #REQUIRED>
<!ATTLIST Movie earningsrank CDATA #IMPLIED>
]>
<Catalog>
    <Movie movieID="a123" genre="Drama">
    <Title></Title>
    <Year></Year>
    <Length></Length>
    <TopBilledActors></TopBilledActors>
</Movie></Catalog> 
```

# android - 带有缓存清单的PhoneGap android App中的错误消息“statement aborts at 10”

> ID：15602602
> 
> 赞同：0
> 
> 时间：2013-03-24T18:57:03.540
> 
> 标签：android, html, cordova, cache-manifest

我正在使用 PhoneGap 开发一个 Android 应用程序。该应用程序从互联网上的后端接收前端数据，并使用缓存清单使其成为离线应用程序。这已经完美运行了半年，但是现在，如果应用程序正在尝试更新，它会下载所有内容，但最后，我得到了错误

```
03-24 19:42:41.304: E/SQLiteLog(2951): (13) statement aborts at 10: [INSERT INTO CacheResourceData (data, path) VALUES (?, ?)] 
03-24 19:42:41.304: E/SQLiteLog(2951): (1) statement aborts at 2: [ROLLBACK] cannot rollback - no transaction is active 
```

在 LogCat 日志上。现在给任何人服药，这意味着什么，问题是什么，也许，我该如何解决？`AppCacheMaxSize`已经设置为，这`100MB`比应用程序真正需要的要多得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:52:17.847

听起来数据库中的数据太多了，无法处理。

错误 10 状态代码意味着`A lock for the transaction could not be obtained in a reasonable time.`（请参[​​阅 https://developer.mozilla.org/en-US/docs/IndexedDB/IDBDatabaseException](https://developer.mozilla.org/en-US/docs/IndexedDB/IDBDatabaseException)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T12:43:35.123

我通过增加 appCache 限制解决了这个问题。

将此代码放在`onCreate`方法末尾的 [appName].java 中。

```
if(android.os.Build.VERSION.SDK_INT >= 7) {
    //set custom cache size (20 MB), as the default seems to be to small (5 MB)
    //this is deprecated since API 18 but seems still to be needed
    super.appView.getSettings().setAppCacheMaxSize(1024*1024*20);
} 
```

不幸的是，这种方法自 18 版以来已被弃用。但目前仍需要让我的应用程序与 appCache 一起工作。来源： http: [//developer.android.com/reference/android/webkit/WebSettings.html#setAppCacheMaxSize(long)](http://developer.android.com/reference/android/webkit/WebSettings.html#setAppCacheMaxSize(long))

# intuit-partner-platform - 是否有任何 Intuit Anywhere SDK 使用通用数据结构？

> ID：15602604
> 
> 赞同：0
> 
> 时间：2013-03-24T18:57:06.537
> 
> 标签：intuit-partner-platform

所以我们都熟悉使用如下语法；
Intuit.Ipp.数据。**Qbo** .Bill 用于在线
和
Intuit.Ipp.Data。**Qbd** .Bill for desktop

我的应用程序可以同时与在线和桌面通信，我相信大多数人都会这样做，并且由于“Qbo”和“Qbd”，我发现自己编写了很多重复的代码。

所以我的问题是；是否有任何可用的 SDK 对在线和桌面使用通用的“数据”结构，因此您不必对所有内容进行两次编码？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:02:27.833

> 是否有任何可用的 SDK 对在线和桌面使用通用的“数据”结构，因此您不必对所有内容进行两次编码？

**现在，不，没有统一的 API。**

Intuit Anywhere v2 数据服务针对 QuickBooks Online 与针对 Windows 的 QuickBooks 具有单独的 API（如您所见），它们在实现上存在显着差异。

唯一的其他替代方案（SDK）也有两个相似但明显不同的实现。

好消息是 Intuit Anywhere/Intuit Partner Platform 数据服务的 v3*将*拥有统一的 API。Intuit 正在为此努力，应该很快就会推出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:09:03.717

Freddy，
v2 的服务和 SDK 对 QuickBooks Online 和 QuickBooks for Windows 具有单独的代码路径。服务和 sdk 的 v3 实现统一了 Desktop 和 Online，因此您编写的代码更少。

如果您有兴趣参与 v3 Beta，您可以在这里注册：http: [//ippblog.intuit.com/blog/2013/03/application-for-early-access-to-quickbooks-api-v3.html](http://ippblog.intuit.com/blog/2013/03/application-for-early-access-to-quickbooks-api-v3.html)

问候
贾里德

# c# - 在运行时以编程方式获取摘要注释

> ID：15602606
> 
> 赞同：65
> 
> 时间：2013-03-24T18:57:07.963
> 
> 标签：c#, asp.net, reflection, documentation

我正在寻找一种以编程方式获取 ASP.net 中方法的 Xml 注释的摘要部分的方法。

我查看了以前的相关帖子，它们没有提供在 Web 环境中这样做的方法。

我不能使用任何 3rd 方应用程序，并且由于 Web 环境，Visual Studio 插件也没有多大用处。

我发现最接近有效解决方案的是 JimBlackler 项目，但它只适用于 DLL。

自然，诸如“提供 .CS 文件，获取 XML 文档”之类的内容将是最佳选择。

* * *

## 现在的情况

我有一个网络服务并试图为它动态生成文档。

阅读方法和属性很容易，但是获取每种方法的摘要让我有点失望。

```
/// <summary>
/// This Is what I'm trying to read
/// </summary>
public class SomeClass()
{
    /// <summary>
    /// This Is what I'm trying to read
    /// </summary>
    public void SomeMethod()
    {
    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-12-26T19:49:22.833

**一种解决方法**- 将 Program.DLL/EXE 上的反射与 Program.XML 文件一起使用

如果您查看由 Visual Studio 生成的同级 .XML 文件，您将看到 /members/member 的层次结构相当平坦。您所要做的就是通过 MethodInfo 对象从您的 DLL 中获取每个方法。一旦你有了这个对象，你就转向 XML 并使用 XPATH 来获取包含这个方法的 XML 文档的成员。

成员前面有一封信。方法的 XML 文档前面有“M:”，类的前面有“T:”等。

加载同级 XML

```
string docuPath = dllPath.Substring(0, dllPath.LastIndexOf(".")) + ".XML";

if (File.Exists(docuPath))
{
  _docuDoc = new XmlDocument();
  _docuDoc.Load(docuPath);
} 
```

使用此 xpath 获取表示方法 XML 文档的成员

```
string path = "M:" + mi.DeclaringType.FullName + "." + mi.Name;

XmlNode xmlDocuOfMethod = _docuDoc.SelectSingleNode(
    "//member[starts-with(@name, '" + path + "')]"); 
```

现在扫描“///”的所有行的子节点有时///摘要包含额外的空白，如果这很麻烦，请使用它来删除

```
var cleanStr = Regex.Replace(row.InnerXml, @"\s+", " "); 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-24T19:12:37.663

XML 摘要不存储在 .NET 程序集中 - 作为构建的一部分（假设您使用 Visual Studio），它可以选择性地写入 XML 文件。

因此，无法通过在已编译的 .NET 程序集（.EXE 或 .DLL）上的反射来“提取”每个方法的 XML 摘要 - 因为根本无法提取数据。如果需要数据，则必须指示构建环境将 XML 文件作为构建过程的一部分输出，并在运行时解析这些 XML 文件以获取摘要信息。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-24T22:32:42.320

您可以使用该`System.ComponentModel.DataAnnotations.DisplayAttribute`属性“记录”您的方法，例如

```
[Display(Name = "Foo", Description = "Blah")]
void Foo()
{
} 
```

然后使用反射在运行时提取描述。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-01-02T15:54:04.403

@OleksandrIeremenko 在此线程上发布的已删除帖子链接到本文[https://jimblackler.net/blog/?p=49](https://jimblackler.net/blog/?p=49)，这是我解决方案的基础。

下面是对 Jim Blackler 的代码的修改，它对 MemberInfo 和 Type 对象进行了扩展方法，并添加了返回摘要文本或空字符串（如果不可用）的代码。

用法

```
var typeSummary = typeof([Type Name]).GetSummary();
var methodSummary = typeof([Type Name]).GetMethod("[Method Name]").GetSummary(); 
```

扩展类

```
/// <summary>
/// Utility class to provide documentation for various types where available with the assembly
/// </summary>
public static class DocumentationExtensions
{
    /// <summary>
    /// Provides the documentation comments for a specific method
    /// </summary>
    /// <param name="methodInfo">The MethodInfo (reflection data ) of the member to find documentation for</param>
    /// <returns>The XML fragment describing the method</returns>
    public static XmlElement GetDocumentation(this MethodInfo methodInfo)
    {
        // Calculate the parameter string as this is in the member name in the XML
        var parametersString = "";
        foreach (var parameterInfo in methodInfo.GetParameters())
        {
            if (parametersString.Length > 0)
            {
                parametersString += ",";
            }

            parametersString += parameterInfo.ParameterType.FullName;
        }

        //AL: 15.04.2008 ==> BUG-FIX remove “()” if parametersString is empty
        if (parametersString.Length > 0)
            return XmlFromName(methodInfo.DeclaringType, 'M', methodInfo.Name + "(" + parametersString + ")");
        else
            return XmlFromName(methodInfo.DeclaringType, 'M', methodInfo.Name);
    }

    /// <summary>
    /// Provides the documentation comments for a specific member
    /// </summary>
    /// <param name="memberInfo">The MemberInfo (reflection data) or the member to find documentation for</param>
    /// <returns>The XML fragment describing the member</returns>
    public static XmlElement GetDocumentation(this MemberInfo memberInfo)
    {
        // First character [0] of member type is prefix character in the name in the XML
        return XmlFromName(memberInfo.DeclaringType, memberInfo.MemberType.ToString()[0], memberInfo.Name);
    }
    /// <summary>
    /// Returns the Xml documenation summary comment for this member
    /// </summary>
    /// <param name="memberInfo"></param>
    /// <returns></returns>
    public static string GetSummary(this MemberInfo memberInfo)
    {
        var element = memberInfo.GetDocumentation();
        var summaryElm = element?.SelectSingleNode("summary");
        if (summaryElm == null) return "";
        return summaryElm.InnerText.Trim();
    }

    /// <summary>
    /// Provides the documentation comments for a specific type
    /// </summary>
    /// <param name="type">Type to find the documentation for</param>
    /// <returns>The XML fragment that describes the type</returns>
    public static XmlElement GetDocumentation(this Type type)
    {
        // Prefix in type names is T
        return XmlFromName(type, 'T', "");
    }

    /// <summary>
    /// Gets the summary portion of a type's documenation or returns an empty string if not available
    /// </summary>
    /// <param name="type"></param>
    /// <returns></returns>
    public static string GetSummary(this Type type)
    {
        var element = type.GetDocumentation();
        var summaryElm = element?.SelectSingleNode("summary");
        if (summaryElm == null) return "";
        return summaryElm.InnerText.Trim();
    }

    /// <summary>
    /// Obtains the XML Element that describes a reflection element by searching the 
    /// members for a member that has a name that describes the element.
    /// </summary>
    /// <param name="type">The type or parent type, used to fetch the assembly</param>
    /// <param name="prefix">The prefix as seen in the name attribute in the documentation XML</param>
    /// <param name="name">Where relevant, the full name qualifier for the element</param>
    /// <returns>The member that has a name that describes the specified reflection element</returns>
    private static XmlElement XmlFromName(this Type type, char prefix, string name)
    {
        string fullName;

        if (string.IsNullOrEmpty(name))
            fullName = prefix + ":" + type.FullName;
        else
            fullName = prefix + ":" + type.FullName + "." + name;

        var xmlDocument = XmlFromAssembly(type.Assembly);

        var matchedElement = xmlDocument["doc"]["members"].SelectSingleNode("member[@name='" + fullName + "']") as XmlElement;

        return matchedElement;
    }

    /// <summary>
    /// A cache used to remember Xml documentation for assemblies
    /// </summary>
    private static readonly Dictionary<Assembly, XmlDocument> Cache = new Dictionary<Assembly, XmlDocument>();

    /// <summary>
    /// A cache used to store failure exceptions for assembly lookups
    /// </summary>
    private static readonly Dictionary<Assembly, Exception> FailCache = new Dictionary<Assembly, Exception>();

    /// <summary>
    /// Obtains the documentation file for the specified assembly
    /// </summary>
    /// <param name="assembly">The assembly to find the XML document for</param>
    /// <returns>The XML document</returns>
    /// <remarks>This version uses a cache to preserve the assemblies, so that 
    /// the XML file is not loaded and parsed on every single lookup</remarks>
    public static XmlDocument XmlFromAssembly(this Assembly assembly)
    {
        if (FailCache.ContainsKey(assembly))
        {
            throw FailCache[assembly];
        }

        try
        {

            if (!Cache.ContainsKey(assembly))
            {
                // load the docuemnt into the cache
                Cache[assembly] = XmlFromAssemblyNonCached(assembly);
            }

            return Cache[assembly];
        }
        catch (Exception exception)
        {
            FailCache[assembly] = exception;
            throw;
        }
    }

    /// <summary>
    /// Loads and parses the documentation file for the specified assembly
    /// </summary>
    /// <param name="assembly">The assembly to find the XML document for</param>
    /// <returns>The XML document</returns>
    private static XmlDocument XmlFromAssemblyNonCached(Assembly assembly)
    {
        var assemblyFilename = assembly.Location;

        if (!string.IsNullOrEmpty(assemblyFilename))
        {
            StreamReader streamReader;

            try
            {
                streamReader = new StreamReader(Path.ChangeExtension(assemblyFilename, ".xml"));
            }
            catch (FileNotFoundException exception)
            {
                throw new Exception("XML documentation not present (make sure it is turned on in project properties when building)", exception);
            }

            var xmlDocument = new XmlDocument();
            xmlDocument.Load(streamReader);
            return xmlDocument;
        }
        else
        {
            throw new Exception("Could not ascertain assembly filename", null);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-01-20T14:59:55.087

您可以使用[Namotion.Reflection](https://github.com/RicoSuter/Namotion.Reflection) NuGet 包来获取这些信息：

```
string summary = typeof(Foo).GetXmlDocsSummary(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-10T02:54:41.110

您可以查看[https://github.com/NSwag/NSwag](https://github.com/NSwag/NSwag) - nuget NSwag.CodeGeneration 的源代码 - 它也得到摘要，用法

```
var generator = new WebApiAssemblyToSwaggerGenerator(settings);<br/>
var swaggerService = generator.GenerateForController("namespace.someController");<br/>
// string with comments <br/>
var swaggerJson = swaggerService.ToJson(); 
```

（对你的 dll 尝试 ILSPY 反编译器，你检查代码和注释）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-04T21:23:03.363

如果您有权访问您尝试获取注释的源代码，那么您可以使用[Roslyn 编译器平台](https://roslyn.codeplex.com/)来执行此操作。它基本上使您可以访问所有中间编译器元数据，并且您可以使用它做任何您想做的事情。

它比其他人的建议要复杂一些，但根据您的需求，可能是一种选择。

看起来[这篇文章](https://stackoverflow.com/questions/15763827/how-to-read-xml-documentation-comments-using-roslyn)有一个类似的代码示例。

# android - 在 ListView 中更改颜色

> ID：15602612
> 
> 赞同：0
> 
> 时间：2013-03-24T18:57:18.963
> 
> 标签：android

我正在尝试更改 ListView 中的颜色，因为我想使用白色背景。不触摸 ListView 它不显示任何文本。触摸时背景切换为黑色，并且文本可见，因为文本是白色的。如何更改 Textcolour 并避免触摸时背景改变其颜色？这是我的代码：

```
 public class LayoutNight extends Fragment {

        ListView myList;

        String[] listContent = {

                "Mo", 
                "Di", 
                "Mi",
                "Do",
                "Fr", 
                "Sa", 
                "So"

        };

        public static Fragment newInstance(Context context) {
            LayoutNight f = new LayoutNight();  

            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
            ViewGroup root = (ViewGroup) inflater.inflate(R.layout.layout_night, null);     

            myList = (ListView)root.findViewById(R.id.list);

            ArrayAdapter<String> adapter

            = new ArrayAdapter<String>(getActivity(),

                    android.R.layout.simple_list_item_multiple_choice,

                 listContent);

            myList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

            myList.setAdapter(adapter);
// That was a try, but it crashed ...

    //        TextView myListText = (TextView)root.findViewById(R.id.list);
    //        myListText.setTextColor(color.black);

            return root;
        }

    } 
```

**编辑**

我做了Raghunandan的建议，但背景没有改变。这是原封不动的截图

![原封不动](../Images/7090383e6559540d2236032cedec62eb.png)

这是滚动时的屏幕（***不幸的是黑色***） ![滚动](../Images/24b8ac3283b67c9738e909a8c59827d0.png)

这是选择选项的屏幕 ![选择选项](../Images/fe790a1dce595b702e1f92a1b4585e7c.png)

**编辑** 它现在就像在滚动时不改变背景一样工作（感谢Pragnani和Raghunandan），但它**不可点击**的。我怎样才能让它可点击？

```
 <ListView
android:id="@+id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight="1"
android:background="@drawable/listbkg"
android:drawSelectorOnTop="true"
android:cacheColorHint="@android:color/transparent">
</ListView> 
```

list_row.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5px"
        android:paddingBottom="5px"
        android:textSize="35sp"
        android:textColor="#000000"
        android:layout_gravity="center"
        android:maxHeight="75px"/> 
```

代码：

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    ViewGroup root = (ViewGroup) inflater.inflate(R.layout.layout_night, null);     

    myList = (ListView)root.findViewById(R.id.list);

    ArrayAdapter<String> adapter
    = new ArrayAdapter<String>(getActivity(),R.layout.list_row,listContent);

    myList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
    myList.setFocusable(true);
    myList.setClickable(true);
    myList.setAdapter(adapter);

    return root;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:26:23.303

我建议您使用自定义适配器。易于定制。

在您的 getview 中为您的自定义布局充气。

[http://developer.android.com/guide/topics/resources/drawable-resource.html](http://developer.android.com/guide/topics/resources/drawable-resource.html)。检查状态列表下的主题。

```
public View getView(final int arg0, View arg1, ViewGroup arg2) {
    final ViewHolder vh;
    vh= new ViewHolder();

    if(arg1==null )
        {
        arg1=mInflater.inflate(R.layout.customlayout, arg2,false);  
        }
    else
    {
     arg1.setTag(vh);
    }

    return arg1;
} 
```

自定义布局.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="horizontal"
 android:background="@drawable/listbkg" //set layout background
 android:cacheColorHint="#000000"
>
 // other ui elements. similarly you can set background for your other ui elements
 //android:background="@drawable/otherui"
 // define your own drawables when pressed and in normal state. 

</LinearLayout> 
```

可绘制文件夹中的 listbkg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_pressed="true" 
    android:drawable="@drawable/pressed" />
<item  android:state_focused="false" 
    android:drawable="@drawable/normal" /> 
```

可绘制文件夹中的pressed.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FF1A47"/>    
<stroke android:width="3dp"
        android:color="#0FECFF"/>
<padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
<corners android:bottomRightRadius="7dp"
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
</shape> 
```

可绘制文件夹中的 normal.xml

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
<solid android:color="#FFFFFF"/>    //can change color
<stroke android:width="3dp"         //border color  
        android:color="#0FECFF" /><!-- #330000FF #ffffffff -->
<gradient          //add gradient depending on your need else you can remove this
    android:startColor="#ffffffff"  
    android:endColor="#110000FF" 
    android:angle="90"/> 

<padding android:left="5dp"
         android:top="5dp"
         android:right="5dp"
         android:bottom="5dp"/> 
<corners android:bottomRightRadius="7dp"//for rounded corners
         android:bottomLeftRadius="7dp" 
         android:topLeftRadius="7dp"
         android:topRightRadius="7dp"/> 
</shape> 
```

我不确定它是否与上面的颜色相同。但是工作原理是一样的

![在此处输入图像描述](../Images/3503e349d9f107b66d1e0822122393eb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:13:41.633

我只需要将主题更改为*Theme.Light*，对不起，我是初学者...

现在是 ListView

```
 <ListView
android:id="@+id/list"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_weight="1"
android:background="@color/white"
android:drawSelectorOnTop="true"
android:cacheColorHint="@android:color/transparent">
</ListView> 
```

并遵循代码片段

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    ViewGroup root = (ViewGroup) inflater.inflate(R.layout.layout_night, null);     

    myList = (ListView)root.findViewById(R.id.list);

    ArrayAdapter<String> adapter
    = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_multiple_choice,listContent);

    myList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    View header = (View)inflater.inflate(R.layout.listview_header_row, null);

    myList.addHeaderView(header);        
    myList.setAdapter(adapter);

    return root;
} 
```

# java - 推送和弹出矩阵

> ID：15602615
> 
> 赞同：1
> 
> 时间：2013-03-24T18:57:37.003
> 
> 标签：java, opengl, lwjgl

所以我的 opengl 游戏中有几个不同的对象。如果我加载纹理或为顶点着色，我在游戏中的所有其他对象都会被赋予该纹理或它们的顶点被着色。所以，例如。我有一堆立方体，我将纹理“a”应用到。然后我有一个天空盒，我将纹理“b”应用到。如果我然后将两者都渲染出来，它们出于某种原因都具有纹理“b”。我调用`glPushMatrix()`并且`glPopMatrix()`在渲染立方体时，为什么它们具有天空盒的纹理？这是一些代码：

```
public void render() {
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glClearColor(0.0f, 0.0f, 0.0f, 0.0f);
    glLoadIdentity();

    glRotatef(input.xrot, 1.0f, 0, 0);
    glRotatef(input.yrot, 0, 1.0f, 0);

    glTranslatef(-input.xpos, -input.ypos - 19, -input.zpos - 5);

    box.render();
    chunk.render();
    BitMapFont.drawString("X: " + (int)-input.xpos + " Y: " + (int)-input.ypos + " Z: " + (int)-input.zpos, 10, 0);
} 
```

我的块类中的渲染方法：

```
public void render() {
    GL15.glBindBuffer(GL15.GL_ARRAY_BUFFER, vboV);
    glVertexPointer(vertSize, GL_FLOAT, 0, 0L);

    GL15.glBindBuffer(GL15.GL_TEXTURE_COORD_ARRAY_BUFFER_BINDING, vboT);
    glTexCoordPointer(3, GL_FLOAT, 0, 0L);

    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    glEnableClientState(GL_VERTEX_ARRAY);

    glPushMatrix();
    glDrawArrays(GL_QUADS, 0, vertSize * vertAmount * faceAmount * currentBlockCount);
    glPopMatrix();

    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_TEXTURE_COORD_ARRAY);
} 
```

然后是我的天空盒类：

```
public class SkyBox {

Texture tex;

int x, z, y, offSet;

public void bindTex() {
    tex.bind();
}

public SkyBox(int x, int z, int y) {
    this.x = x;
    this.z = z;
    this.y = y;
    this.offSet = 128;
    try {
        tex = TextureLoader.getTexture("PNG", new FileInputStream(new File("res/Blocks/air.png")));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void render() {

    glBegin(GL_QUADS);

    glTexCoord2f(0, 0);
    glVertex3f(x, z, y);
    glTexCoord2f(1, 0);
    glVertex3f(x + offSet, z, y);
    glTexCoord2f(1, 1);
    glVertex3f(x + offSet, z, y + offSet);
    glTexCoord2f(0, 1);
    glVertex3f(x, z, y + offSet);

    glTexCoord2f(1, 0);
    glVertex3f(x, z, y + offSet);
    glTexCoord2f(1, 0);
    glVertex3f(x + offSet, z, y + offSet);
    glTexCoord2f(1, 1);
    glVertex3f(x + offSet, z + offSet, y + offSet);
    glTexCoord2f(0, 1);
    glVertex3f(x, z + offSet, y + offSet);

    glTexCoord2f(0, 0);
    glVertex3f(x + offSet, z, y);
    glTexCoord2f(0, 1);
    glVertex3f(x + offSet, z + offSet, y);
    glTexCoord2f(1, 1);
    glVertex3f(x + offSet, z + offSet, y + offSet);
    glTexCoord2f(0, 1);
    glVertex3f(x + offSet, z, y + offSet);

    glTexCoord2f(0, 0);
    glVertex3f(x, z + offSet, y);
    glTexCoord2f(1, 0);
    glVertex3f(x, z, y);
    glTexCoord2f(1, 1);
    glVertex3f(x, z, y + offSet);
    glTexCoord2f(0, 1);
    glVertex3f(x, z + offSet, y + offSet);

    glTexCoord2f(0, 0);
    glVertex3f(x, z + offSet, y + offSet);
    glTexCoord2f(1, 0);
    glVertex3f(x + offSet, z + offSet, y + offSet);
    glTexCoord2f(1, 1);
    glVertex3f(x + offSet, z + offSet, y);
    glTexCoord2f(0, 1);
    glVertex3f(x, z + offSet, y);

    glTexCoord2f(0, 0);
    glVertex3f(x, z + offSet, y);
    glTexCoord2f(1, 0);
    glVertex3f(x + offSet, z + offSet, y);
    glTexCoord2f(1, 1);
    glVertex3f(x + offSet, z, y);
    glTexCoord2f(0, 1);
    glVertex3f(x, z, y);

    glEnd();
} 
```

所以真的，为什么一切都搞砸了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:49:21.517

推送和弹出活动矩阵仅此而已 - 它存储或检索矩阵。它不影响任何其他状态，例如纹理状态或其他属性。

在旧的 OpenGL API 中有推送和弹出某些渲染状态的功能（请参阅 参考资料`glPushAttrib()`），但这已从较新的版本中删除。

因此，您确实会被建议自己进行状态管理，因为这是当前编程模型（以及几乎任何其他渲染 API）中所期望的。还建议您停止使用您在此处依赖的其他不推荐使用的功能，例如一般的固定功能渲染管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:51:29.350

OpenGL 是一个状态机，这意味着正确的用法如下所示：

```
render() {
    setTexture(textId_1)
    glPushMatrix();
        // set transformations related to this object
        drawObject_1()
    glPopMatrix();

    setTexture(textId_2)
    glPushMatrix();
        // set transformations related to this object
        drawObject_2()
    glPopMatrix();
} 
```

如果您设置纹理（当您加载它时），那么所有对象都将是使用它的纹理。矩阵、材质等也是如此。当然，当我们谈论固定管道（OpenGL 1.5）时。在现代 OpenGL (3.+) 中，我们有更多选择。

`glPushMatrix/glPopMatrix`仅用于矩阵堆栈它可以*保存*矩阵机器人的状态不影响纹理、材料等。

# html - CSS 中的 % 是否相互流入？

> ID：15602619
> 
> 赞同：0
> 
> 时间：2013-03-24T18:57:56.367
> 
> 标签：html, css, liquid

我正在尝试将我的固定站点变成一个流动站点，并且我有一个关于 % 的工作原理的快速问题。

```
 <div class=wrap>
       <div class=box>
         <Div class=text>
       <div class=box>
    <div=class=wrap>

    .wrap{
     width: 100%;
     }

   .box{
   width: 50%
   }

   .text{
   width: 25%
   } 
```

现在给出这段代码会发生什么？包裹适合整个屏幕。该框将填充屏幕的 50%，但文本仅填充 50% 的 25%。它不会填充整个屏幕的 25%，它只会填充其包含的 div 的百分比。那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:01:18.633

这是因为`div`正在计算它的维度`parent`。

Div 有类`.Wrap`从其父级计算它的尺寸，即`body`这就是它占用整个身体宽度的原因。

看看[盒子模型](http://www.w3.org/TR/CSS2/box.html)

# c# - 对于保持性能的数组，C# 相当于 Delphi High() 和 Low() 函数？

> ID：15602626
> 
> 赞同：2
> 
> 时间：2013-03-24T18:58:25.420
> 
> 标签：c#, arrays, delphi, iteration, dimensions

在 Delphi 中有 Low() 和 High() 函数返回数组的最低和最高索引维度。这有助于消除迭代数组时容易出错*的循环*，该循环可能会成为潜在的 +1/-1 数组边界错误的牺牲品，例如在*for 循环*语句 中的终止条件中使用**<** **=**时。

 ***这是 Low/High 函数的示例（在 Delphi 中）：

```
for i := Low(ary) to High(ary) do 
```

现在我在 C# 中使用一个简单*的 for 循环*语句：

```
for (int i = 0; i < ary.Length; i++) 
```

我知道有 Array 方法**GetDimension(N)**但它有其自身的责任，因为我可能会因意外使用错误的维度索引而引入错误。我想我可以用枚举器做一些事情，但我担心与使用*for 循环*相比，扫描大型数组时会产生显着的性能成本。C# 中是否有等效于高/低的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-24T19:01:36.180

与内在函数`low(ary)`和`high(ary)`函数等效的 C# 分别是`0`和`ary.Length-1`。这是因为[C# 数组是从零开始的](http://msdn.microsoft.com/en-us/library/9b9dty7d.aspx#sectionToggle0)。我看不出为什么`Length`数组的属性应该具有与 Delphi 不同的性能特征`high()`。

在性能方面，Pascal`for`循环与 C 派生语言使用的循环之间的最大区别在于终止测试的评估。考虑一个经典的 Pascal`for`循环：

```
for i := 0 to GetCount()-1 do
  .... 
```

对于 Pascal`for`循环，`GetCount()`仅在循环开始时计算一次。

现在考虑 C 派生语言中的等价物：

```
for (int i=0; i<GetCount(); i++)
  .... 
```

在此循环中，`GetCount()`每次循环都会评估。因此，在像 C# 这样的语言中，您需要一个局部变量来避免一遍又一遍地调用该函数。

```
int N = GetCount();
for (int i=0; i<N; i++)
  .... 
```

在数组的情况下，如果优化器可以确定`ary.Length`在循环期间没有发生变异，那么编译器可以优化代码。我个人不知道 C# 优化器是否这样做，但请参阅评论以获取更多信息。

在开始重写循环以使用包含数组长度的局部变量之前，请检查它是否有任何区别。几乎可以肯定它不会。我在上面概述的 Pascal 和类 C for 循环之间的区别在语义方面可能比性能更重要。

* * *

我特别羡慕的语言是 D。这里可以使用`foreach`循环，将数组中的每一项呈现为引用，从而允许您修改数组的内容：

```
void IncArray(int[] array, int increment) {
    foreach (ref e; array) {
        e += increment;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-24T19:02:33.700

在 C# 中，下边界始终为零，因此 的等价物`Low(ary)`为`0`.

对于一维数组，等价于`High(ary)`is `ary.Length - 1`。（对于多维数组，无论如何您都需要多个循环。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-24T19:00:08.667

你可以只使用`foreach`语句吗？喜欢

```
foreach(int i in ary)
{
. . .
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-14T14:12:06.337

[边界（int Dimension）]

这些边界函数为任何数组的用户指定维度提供起点和终点。第二个维度将用 1 来标注，而不是 0，以此类推。

```
for (int i = ary.GetLowerBound(0); i <= ary.GetUpperBound(0); i++ )
{} 
```***

# mysql - 为多个更新查询创建存储过程

> ID：15602631
> 
> 赞同：0
> 
> 时间：2013-03-24T18:58:36.123
> 
> 标签：mysql

```
select id as ids from challenges where expire_date > today 
```

我需要循环她以获取多个 ID，例如（php 中的 foreach）

```
foreach (ids) 

    update challenges set status = 'expired' where id = ids

    update user_challenge set challenge_status = 'Expired' where challenge_status = 'Pending' and challenge_id = ids 
    update user_challenge set challenge_status = 'Failed' where challenge_status = 'Accepted' and challenge_id = ids 

end for each; 
```

任何人都可以创建存储过程或单个查询来执行此操作，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:09:18.607

您在 MySql 中的单个更新查询可能如下所示

```
UPDATE user_challenge u INNER JOIN
       challenges c ON u.challenge_id = c.id
   SET c.status = 'Expired',
       u.challenge_status = CASE WHEN u.challenge_status = 'Pending' THEN 'Expired' 
                                 WHEN u.challenge_status = 'Accepted' THEN 'Failed' END
 WHERE c.expire_date < CURDATE() 
```

这是**[SQLFiddle](http://sqlfiddle.com/#!2/8919e/1)**示例

我认为到期的条件应该是`expire_date < CURDATE()`（意味着到期日期应该小于今天的日期），这反映在查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:14:20.160

您可以声明一个游标，使用游标循环查询查询的结果

此语法适用于 T-SQL，但对于 MySQL 应该类似：

```
declare @id int
declare @cursor cursor;
set @cursor = cursor for select id as ids from challenges where expire_date > today
open @cursor
fetch next from @cursor into @id
while(@@FETCH_STATUS = 0)
begin
   update challenges set status = 'expired' where id = @id

    update user_challenge set challenge_status = 'Expired' where challenge_status = 'Pending' and challenge_id = @id
    update user_challenge set challenge_status = 'Failed' where challenge_status = 'Accepted' and challenge_id = @id 

  fetch next from @cursor into @id   
end
close @cursor
deallocate @cursor 
```

# windows-phone-7 - Windows Phone - ListPicker 将 SelectedItem 设置为 null

> ID：15602640
> 
> 赞同：0
> 
> 时间：2013-03-24T18:59:05.327
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, silverlight-toolkit

我在 Windows Phone 8 应用程序中有一个页面，用户可以在其中将项目链接到组 (n:1)。该组是通过 Toolkit ListPicker 控件选择的。ListPicker 下方是一个取消链接按钮，用于删除从项目到组的链接。

```
 <StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <toolkit:ListPicker x:Name="GorupList"
                            Header="Background" 
                            ExpansionMode="FullscreenOnly" 
                            ItemsSource="{Binding}" 
                            SelectionChanged="GroupList_SelectionChanged">
            <toolkit:ListPicker.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Name}" />
                </DataTemplate>
            </toolkit:ListPicker.ItemTemplate>
            <toolkit:ListPicker.FullModeItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="16 21 0 20">
                        <TextBlock Text="{Binding Name}"
                                   FontSize="43" 
                                   FontFamily="{StaticResource PhoneFontFamilyLight}"/>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.FullModeItemTemplate>
        </toolkit:ListPicker>
        <Button x:Name="UnlinkButton" Content="Unlink" Click="OnUnlink" />
    </StackPanel> 
```

如果用户从组中取消链接项目，我想将 ListPicker 的 SelectedItem 设置为 null（未选择组）。仅将 SelectedItem 设置为 null 或将 SelectedIndex 设置为 -1 不起作用（例外：设置有效值...）。

有人对这个问题有想法吗？

//编辑：我正在寻找一种解决方法，而不是编译我自己的 ListPicker 控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:43:36.690

加入一个初始字符串值怎么样`<System:String>Choose Item...</System:String>`，它也可以作为提示，然后你可以在代码中引用它，然后`GorupList.SelectedIndex = 0;`在选择时忽略你的代码？

```
 <StackPanel x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <toolkit:ListPicker x:Name="GorupList"
                        Header="Background" 
                        SelectionChanged="GroupList_SelectionChanged">
            <toolkit:ListPicker.FullModeItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal" Margin="16 21 0 20">
                        <TextBlock Text="{Binding Name}"
                               FontSize="43" 
                               FontFamily="{StaticResource PhoneFontFamilyLight}"/>
                    </StackPanel>
                </DataTemplate>
            </toolkit:ListPicker.FullModeItemTemplate>
            <System:String>Choose Item...</System:String>
        </toolkit:ListPicker>
        <Button x:Name="UnlinkButton" Content="Unlink" Click="OnUnlink" />
    </StackPanel> 
```

* * *

**非常正确：**你能抓住这个解决方案[PhoneApp5](http://dl.dropbox.com/u/4689971/PhoneApp5.zip)看看它是否更符合你的要求吗？然后你或我可以发布代码（我的原样或你的改进）。

# python - Python - MySql 查询 cidr 范围内的 IP 地址

> ID：15602645
> 
> 赞同：1
> 
> 时间：2013-03-24T18:59:25.787
> 
> 标签：python, mysql, ip-address

好的，我在这里需要一点点。我有一个 mysql 数据库，在数据库中，我有一个 ip 地址存储为 inet_aton 的表。我在表中有 ip cidr 范围。比如 192.168.0.0/24 或 /8 等。我正在使用 Python 查询数据库以查看数据库中是否有单个 /32 ip 地址。我正在尝试这样的代码：

```
def ip_in_networks(ip, networks):

    found_net_type = ''
    found_template = ''

    ip_as_int = unpack('!I', inet_aton(ip))[0]

    for (network, netmask, net_type, template) in networks:

        if (ip_as_int & netmask) == network:

            # we are, awesome
            found_net_type = net_type
            found_template = template
            break
def fetch_networks(r_conn):
    '''This returns a list of networks as [[network, netmask], ...]'''
    nets = []
    r_cur = r_conn.cursor()
    sql = 'SELECT n.network, n.netmask, l.lookup_value, l.template '
    sql += 'FROM network n, lookup l '
    sql += 'WHERE n.network_type_id = l.id'
    r_cur.execute(sql)
    for row in r_cur:
        nets.append([row[0], row[1], row[2], row[3]])
    return nets

if __name__ == '__main__':
 ''' some code removed'''

  "connect to the db"
  networks = fetch_networks(r_conn)
  ip = sys.argv[1]

  net_type, template = ip_in_networks(ip, networks)

  if net_type:
    '''If net_type which means found the ip address ini the db, do something, in this case 
       just log the found message'' 
```

我得到的错误是 Type Error Unpack Non 序列。

我试图坚持使用标准的 Python 2.7 库和 Mysql。

我确定我错过了一些简单的东西。如果需要，我也会完全更改我的代码。我必须有很多 IP 范围才能将它们从这个 IP 地址分解到那个 IP 地址，然后查看 IP 是否在那个范围内。

# php - 如何从玩家手中删除重复的扑克牌？

> ID：15602651
> 
> 赞同：2
> 
> 时间：2013-03-24T19:00:37.037
> 
> 标签：php, arrays, loops

我正在尝试将五张牌发给玩家并对其进行评分。我的计分程序似乎运行良好，但我不时遇到重复卡牌的问题。我尝试使用 while 循环来检查重复的卡片，但这似乎有点骇人听闻。我的代码如下。请记住，我绝对是新手，所以解决方案越简单越好！非常感谢。

```
// create suits array
$suits = array("996", "997", "998", "999");

// create faces array
$faces = array();
$faces[1] = "1";
$faces[2] = "2";
$faces[3] = "3";
$faces[4] = "4";
$faces[5] = "5";
$faces[6] = "6";
$faces[7] = "7";
$faces[8] = "8";
$faces[9] = "9";
$faces[10] = "10";
$faces[11] = "11";
$faces[12] = "12";
$faces[13] = "13";

// create player's hand 
$card = array();

for ($i = 0; $i < 5; $i++)
{   
    $face_value = shuffle($faces);
    $suit_value = shuffle($suits);
    $card[$i] = $faces[$face_value].$suits[$suit_value];

    $counter = 0;
    while ($counter < 100)
    {
        if (in_array($card[$i], $card))
        {
            $face_value = shuffle($faces);
            $suit_value = shuffle($suits);
            $card[$i] = $faces[$face_value].$suits[$suit_value];
        }
        $counter++;
    }

    print ("<img src=\"../images/4/$card[$i].gif\">");

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T19:10:07.520

简单地设置一个包含 52 个元素的数组可能更有效，每张卡片一个元素。

```
$cards = range(0,51);
shuffle($cards);
$hand = array();
for ($i = 0; $i < 5; $i++)
{
  $hand[$i] = $cards[$i];
} 
```

请注意，您可以`$i`简单地提取卡片的花色和等级，方法是

```
$suit = $hand[$i] % 4;
$rank = $hand[$i] / 4; 
```

这将防止重复。

编辑：西装和等级被颠倒了。他们现在应该是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:15:13.557

因为你说你喜欢它简单，你可以用 range() 创建你的数组。

为避免重复手牌，请在分配新手牌之前检查 $card 数组。

新代码如下所示：

```
// create suits array
$suits = range(996, 999);

// create faces array
$faces = range(0, 13);

// create player's hand  
$card = array();

while ( count($card) < 5 )
{   
    $face_value = shuffle($faces);
    $suit_value = shuffle($suits);
    $newcard = $faces[$face_value].$suits[$suit_value];

    if ( in_array($card, $newcard) ) {
        $card[] = $newcard;
        print ("<img src=\"../images/4/$newcard.gif\">");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:57:52.773

我肯定会创建一个包含所有 52 张卡片的套牌，如下所示：

```
// create suits array
$suits = range(996, 999);

// create entire deck
$deck = range(0, 51);

shuffle($deck);

// create player's hand
for ($i = 0; $i < 5; $i++) {
    $suit_value = $suits[$deck[$i] % 4];
    $face_value = floor($deck[$i] / 4) + 1;

    print ("<img src=\"../images/4/{$face_value}{$suit_value}.gif\">");
} 
```

# spring - Spring 3.1 - DefaultMessageListenerContainer - 如何识别 ErrorHandler 中的错误

> ID：15602654
> 
> 赞同：0
> 
> 时间：2013-03-24T19:00:46.037
> 
> 标签：spring, transactions, spring-jms, xa

Info :: 我有一个带有 XA 事务的 DefaultMessageListener 实现。我使用了 MessageListener 实现。

场景：：我的 XA 事务位于 DB 和 JMS Q Publish 之间。如果其中任何一个出现“数据错误”，我需要将源消息“移动”到不同的 Q 并继续处理其余消息。

问题:: 现在，如果我的 DB 事务因 DataIntegrity 错误（主键违规）而失败，那么 XA 事务将在 Container 处回滚（而不是在 MessageListener 实现中）。因此，原始消息回滚到 Q，消息侦听器无限期地被此消息卡住 - 接收和失败处理。

如何检查某些异常 - 并在容器中以不同方式处理它们，以便我可以继续处理其余消息。

银丝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:51:37.910

嗯，这就是 XA 事务的重点——要么全部提交，要么什么都不做。

如果您希望数据库事务与 Jms 事务没有任何关系，则需要

```
@Transactional(propagation=Propagation.REQUIRES_NEW) 
```

在侦听器上游的某些方法上。在侦听器中捕获并处理异常，JMS 事务将提交。

在这种情况下（除非涉及其他资源），您确实不需要 XA - 但您确实需要处理重复消息的（小）可能性 - 如果 DB 事务提交而 JMS 事务由于某种原因没有提交.

见[http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html](http://www.javaworld.com/javaworld/jw-01-2009/jw-01-spring-transactions.html)

# c# - 枚举属性不一致的可访问性

> ID：15602655
> 
> 赞同：3
> 
> 时间：2013-03-24T19:00:52.217
> 
> 标签：c#

我是 CSharp 的新手，不明白是什么问题。

```
public abstract class Player
{
protected Behaviour fBehaviour;
public Behaviour FBehaviour { get; set; } 
```

错误说错误 6 不一致的可访问性：字段类型 ... 比字段 ... 更难访问

我试过改变一切，但没有任何效果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T19:01:40.220

这意味着 Behavior 类不是公开的，但 Player 是并且正在尝试将其公开。

将行为更改为公开。

# css - 全局样式表

> ID：15602657
> 
> 赞同：0
> 
> 时间：2013-03-24T19:00:54.530
> 
> 标签：css, stylesheet

实现影响网站所有目录的全局样式表的最佳方法是什么？我知道可以通过 href="../style.css" 链接到上述目录中的样式表，但是必须有更好的方法来做到这一点，因为当你有多个级别时这会变得混乱一个网站。

提前致谢

# user-interface - 进入while循环时GUI出现Tkinter问题

> ID：15602660
> 
> 赞同：2
> 
> 时间：2013-03-24T19:01:12.570
> 
> 标签：user-interface, python-3.x, tkinter

我有一个简单的 GUI，它从另一个 python 文件运行各种脚本，一切正常，直到 GUI 运行一个包含 while 循环的函数，此时 GUI 似乎崩溃并变得不活动。有没有人对如何克服这个问题有任何想法，因为我相信这与正在更新的 GUI 有关，谢谢。下面是我的 GUI 的简化版本。

图形用户界面

```
#!/usr/bin/env python
# Python 3

from tkinter import *
from tkinter import ttk
from Entry import ConstrainedEntry
import tkinter.messagebox
import functions

AlarmCode = "2222"

root = Tk()
root.title("Simple Interface")
mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column=0, row=0, sticky=(N, W, E, S))
mainframe.columnconfigure(0, weight=1)
mainframe.rowconfigure(0, weight=1)

ttk.Button(mainframe, width=12,text="ButtonTest", 
           command=lambda: functions.test()).grid(
             column=5, row=5, sticky=SE)

for child in mainframe.winfo_children():
    child.grid_configure(padx=5, pady=5)

root.mainloop() 
```

功能

```
def test():
    period = 0
    while True:
        if (period) <=100:
            time.sleep(1)
            period +=1
            print(period)
        else:
            print("100 seconds has passed")
            break 
```

上面会发生的是，当循环运行时，应用程序会崩溃。如果在这段时间过去后我在 else 语句中插入一个中断，一切都会正常工作。我希望用户能够在循环中单击，因为此 GUI 将运行许多不同的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:17:50.437

不要`time.sleep`在与 Tkinter 代码相同的线程中使用：它会冻结 GUI，直到执行`test`完成。为避免这种情况，您应该使用[`after`](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/universal.html)小部件方法：

```
# GUI
ttk.Button(mainframe, width=12,text="ButtonTest", 
           command=lambda: functions.test(root))
           .grid(column=5, row=5, sticky=SE)

# functions
def test(root, period=0):
    if period <= 100:
        period += 1
        print(period)
        root.after(1000, lambda: test(root, period))
    else:
        print("100 seconds has passed") 
```

* * *

**更新：**

在您的评论中，您还添加了您的代码不会使用`time.sleep`，因此您的原始示例可能不是最合适的。在这种情况下，您可以创建一个新线程来运行您的*密集*代码。

请注意，我发布了`after`first 的替代方案，因为只有在完全必要时才应使用多线程 - 它增加了您的应用程序的开销，以及调试代码的更多困难。

```
from threading import Thread

ttk.Button(mainframe, width=12,text="ButtonTest", 
           command=lambda: Thread(target=functions.test).start())
           .grid(column=5, row=5, sticky=SE)

# functions
def test():
    for x in range(100):
        time.sleep(1) # Simulate intense task (not real code!)
        print(x)
    print("100 seconds has passed") 
```

# html - 使用 AWK 分割 HTML 文件

> ID：15602662
> 
> 赞同：0
> 
> 时间：2013-03-24T19:01:21.853
> 
> 标签：html, awk

我想知道是否可以使用 awk 将 HTML 文件拆分为单独的 .html 文件？我想寻找模式：

```
<div class="post"> 
```

当它发现这个为每个实例创建新文件时，我试图编译命令但不能让它工作？我的文件名为working.html，这是我从我构建的命令中得到的。

```
awk '/<div class="post">/{x="F"++i;}{print > x;}' working.html 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:13:22.410

看起来它正在爆炸，因为`x`它没有被初始化并且不能用作文件名，直到它第一次被设置在`<div>`一行上。

解决这个问题的一种方法是添加一个 BEGIN 模式来初始化它。

```
BEGIN {
  x = "F0"
}

/<div class="post">/ {
  x = "F" ++i
}

{ print > x } 
```

# jquery - 替换所有标签

> ID：15602665
> 
> 赞同：1
> 
> 时间：2013-03-24T19:01:42.370
> 
> 标签：jquery

我想**替换所有**这样的标签，但不仅仅是第一个类似的标签。

代码：

```
var s = "<p>Hello World!</p><p>By Mars</p>";
s = s.replace('<', '!!!111!!!').replace('</', '!!!222!!!').replace('>', '!!!333!!!');
alert(s); 
```

返回值：

```
!!!111!!!p!!!333!!!Hello World!!!!222!!!p><p>By Mars</p> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:06:16.150

要替换多次出现，请使用正则表达式作为第一个参数，以便您可以指定`g`全局标志：

```
s = s.replace(/<\//g, '!!!222!!!').replace(/</g, '!!!111!!!').replace(/>/g, '!!!333!!!'); 
```

注意一定要先更换`</`，`<`否则永远不会有`</`。

# facebook - 使用 Facebook OAuth 保护 Rest API 端点的可能方法

> ID：15602667
> 
> 赞同：23
> 
> 时间：2013-03-24T19:01:59.877
> 
> 标签：facebook, api, rest, oauth

我一直在阅读有关该主题的很多内容，但我发现的只是过时或部分答案，这对我并没有太大帮助，实际上只是让我更加困惑。我正在编写一个由 Web 应用程序（托管在与 API 相同的域上）和 Android 应用程序访问的 Rest API（Node+Express+MongoDB）。

我希望 API 只能由我的应用程序和授权用户访问。我还希望用户能够仅使用他们的 Facebook 帐户注册和登录，并且我需要能够访问一些基本信息，例如姓名、个人资料图片和电子邮件。

我想到的一个可能的情况是：

1.  用户使用 Facebook 登录 Web 应用程序，该应用程序被授予访问用户 Facebook 信息的权限并接收访问令牌。
2.  Web 应用程序要求 API 确认该用户确实在我们的系统上注册，发送电子邮件和 Facebook 收到的令牌。
3.  API 验证用户是否存在，将用户名、令牌和时间戳存储到 DB（或 Redis）中，然后返回到客户端应用程序。
4.  每次客户端应用程序访问 API 端点之一时，它都必须提供用户名和令牌，而不是其他信息。
5.  API 每次都会验证提供的用户名/令牌对是否与存储在数据库中的最新用户名/令牌对匹配（使用时间戳进行排序），并且自我们存储这些信息以来不超过 1 小时（再次使用时间戳）。如果是这种情况，API 将处理请求，否则将发出 401 Unauthorized 响应。

这有意义吗？这种方法是否存在我遗漏的任何宏观安全漏洞？我看到使用 MongoDB 存储这些信息的一个问题是集合很快就会因旧令牌而变得臃肿。从这个意义上说，我认为最好使用具有 1 小时过期策略的 Redis，以便 Redis 自动删除旧信息。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-24T20:01:09.137

我认为更好的解决方案是：

1.  通过 Facebook 登录
2.  将 Facebook AccessToken 传递给服务器（通过 SSL 用于 android 应用程序，对于 Web 应用程序，只需在 FB 登录后将其重定向到 API 端点）
3.  检查`fb_access_token`给定的，确保其有效。获取`user_id`，`email`并与现有用户交叉引用，看看它是新用户还是旧用户。
4.  现在，创建一个随机的、单独`api_access_token`的，您将其返回给 webapp 和 android 应用程序。如果您需要 Facebook 进行登录以外的任何操作，请将其存储`fb_access_token`并在您的数据库中将其与新的`api_access_token`和您的`user_id`.
5.  对于此后的每个呼叫，发送`api_access_token`以对其进行身份验证。如果您需要`fb_access_token`获取更多信息，可以通过从数据库中检索它来实现。

**总结**：只要有可能，避免通过`fb_access_token`. 如果`api_access_token`被入侵，您可以更好地控制查看攻击者是谁、他们在做什么等，而不是让他们掌握`fb_access_token`. 您还可以更好地控制设置过期日期、延长`fb_access_token`s 等

只要确保每当您通过 HTTP 传递任何类型的 access_token 时，都使用 SSL。

# c# - ToString 和 GetDisplayText 方法 C# 有什么区别

> ID：15602669
> 
> 赞同：-5
> 
> 时间：2013-03-24T19:02:10.243
> 
> 标签：c#, oop, abstract-class, multiple-inheritance

我正在处理一个带有抽象基类、3 个子类的作业，其中一个也是具有 2 个孙子类的抽象类。

我在想该`GetDisplayText()`方法复制了父类的内容，然后我只需要添加子类的附加参数（签名）。

如果我使用该`ToString()`方法，我将不得不使用孩子的附加参数（签名）再次对所有格式进行编码。

是的，我知道抽象类使用 virtual 如下：

```
public virtual string ToString() {}

public virtual string GetDisplayText() {} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:09:09.077

在不直接表示值的类型中（如 GUI 元素，MSDN 告诉我有一种`GetDisplayText()`方法），更常见的是用于`ToString()`提供适合调试的对象表示，而不是显示目的。（即对象的重要属性的文本转储。）所以我（疯狂地）猜测它们添加`GetDisplayText()`到应该具有纯文本 UI 表示的组件（例如，下拉列表中的项目）以让您区分关注点“我在 UI 中呈现什么？” 和“这个对象的内部状态是什么？”

# visual-c++ - 我的 2D 游戏的动画问题

> ID：15602679
> 
> 赞同：0
> 
> 时间：2013-03-24T19:03:21.517
> 
> 标签：visual-c++

```
void runGame(){
    readimagefile("PIX\\Landscape.jpg", 0, 0, 800, 800);
    while(1 == 1){
        moveCharacter();
        //moveMonster();
    }
}
void moveCharacter(){

    int move = 0;
    int size = imagesize(0, 0, 800, 800);
    void *background = malloc(size);
    getimage(0, 0, 800, 800, background);

    readimagefile("PIX\\Character\\down_still.gif",x9,y9,x9+50,y9+50);
    thunderClaw();
    //specialAttack();
    //thunderball();
    if(kbhit()){

    if(getch()== 'd'){
        move = 1;
        }
    if(getch()== 'a'){
        move =  3;
        }
    if(getch()== 'w'){
        move = 2;
        }
    if(getch()== 's'){
        move = 4;
        }
    }

    switch (move){

    case 1://left

        readimagefile("PIX\\Character\\left_r.gif",x9,y9,x9+50,y9+50);Sleep(15);
        x9 = x9 + 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\left_still.gif",x9,y9,x9+50,y9+50);Sleep(15);
        x9 = x9 + 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\left_l.gif",x9,y9,x9+50,y9+50);Sleep(15);
        x9 = x9 + 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\left_still.gif",x9,y9,x9+50,y9+50);Sleep(15);
        x9 = x9 + 5;
        putimage(0, 0, background, COPY_PUT);
        break;

    case 2://up

        readimagefile("PIX\\Character\\up_r.gif",x9,y9,x9+50,y9+50);Sleep(15);
        y9 = y9 - 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\up_still.gif",x9,y9,x9+50,y9+50);Sleep(15);
        y9 = y9 - 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\up_l.gif",x9,y9,x9+50,y9+50);Sleep(15);
        y9 = y9 - 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\up_still.gif",x9,y9,x9+50,y9+50);Sleep(15);
        y9 = y9 - 5;
        putimage(0, 0, background, COPY_PUT);
        break;

    case 3://right

        readimagefile("PIX\\Character\\right_r.gif",x9,y9,x9+50,y9+50);Sleep(15);
        x9 = x9 - 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\right_still.gif",x9,y9,x9+50,y9+50);Sleep(15);
        x9 = x9 - 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\right_l.gif",x9,y9,x9+50,y9+50);Sleep(15);
        x9 = x9 - 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\right_still.gif",x9,y9,x9+50,y9+50);Sleep(15);
        x9 = x9 - 5;
        putimage(0, 0, background, COPY_PUT);
        break;

    case 4://down

        readimagefile("PIX\\Character\\down_l.gif",x9,y9,x9+50,y9+50);Sleep(15);
        y9 = y9 + 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\down_still.gif",x9,y9,x9+50,y9+50);Sleep(15);
        y9 = y9 + 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\down_r.gif",x9,y9,x9+50,y9+50);Sleep(15);
        y9 = y9 + 5;
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Character\\down_still.gif",x9,y9,x9+50,y9+50);Sleep(15);
        y9 = y9 + 5;
        putimage(0, 0, background, COPY_PUT);
        break;

    default:
        readimagefile("PIX\\Character\\down_still.gif", x9, y9, x9+50, y9+50);
        putimage(0, 0, background, COPY_PUT);
    }
    }//end function

void thunderClaw(){
    int mx = mousex();
    int my = mousey();

    int size = imagesize(0, 0, 800, 800);
    void *background = malloc(size);
    getimage(0, 0, 800, 800, background);

    getmouseclick(WM_LBUTTONDOWN, mx, my);
    if(WM_LBUTTONDOWN){
        printf("Left mouse button was clicked!\n");
        #ifdef SOUNDfx
        PlaySound("SOUNDS\\Electricity_Shock_Sound_Effect.wav", NULL, SND_ASYNC);
        #endif
        readimagefile("PIX\\Thunderclaw\\thunderclaw00.gif", mx-25, my-25, mx+25, my+25);Sleep(80);
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Thunderclaw\\thunderclaw01.gif", mx-25, my-25, mx+25, my+25);Sleep(80);
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Thunderclaw\\thunderclaw0.gif", mx-25, my-25, mx+25, my+25);Sleep(80);
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Thunderclaw\\thunderclaw.gif", mx-25, my-25, mx+25, my+25);Sleep(80);
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Thunderclaw\\thunderclaw2.gif", mx-25, my-25, mx+25, my+25);Sleep(80);
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Thunderclaw\\thunderclaw3.gif", mx-25, my-25, mx+25, my+25);Sleep(80);
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Thunderclaw\\thunderclaw4.gif", mx-25, my-25, mx+25, my+25);Sleep(80);
        putimage(0, 0, background, COPY_PUT);
        readimagefile("PIX\\Thunderclaw\\thunderclaw5.gif", mx-25, my-25, mx+25, my+25);Sleep(80);
        putimage(0, 0, background, COPY_PUT);
    }
} 
```

所以这是我目前拥有的代码。我的问题是它一直认为鼠标左键不断被点击。因此，它不断地将动画放在左上角并减慢角色移动。我已经尝试了很多方法来阻止这种情况，但无法弄清楚。谷歌也没有帮助。我只是不明白它是如何认为我不断单击鼠标左键的。我相信这是因为 if(WM_LBUTTONDOWN) 语句。但即便如此，我也尝试过改变它，添加不同的规格，移动它，摆脱它，但没有什么能解决我的需要。它只是不断地认为左按钮被单击（即使我摆脱了 if() 语句它也这样做了！）。

谁能帮我解决这个问题？

谢谢！

PS 我在 Visual Studio 2012 和 graphics.h 库中。

```
void getmouseclick( int kind, int& x, int& y )
{
    WindowData *pWndData = BGI__GetWindowDataPtr( );
    POINTS where; // POINT (short) to tell where mouse event happened.

    // Check if mouse event is in range
    if ( !MouseKindInRange( kind ) )
        return;

    // Set position variables to mouse location, or to NO_CLICK if no event occured
    if ( MouseKindInRange( kind ) && pWndData->clicks[kind - WM_MOUSEFIRST].size( ) )
    {
        where = pWndData->clicks[kind - WM_MOUSEFIRST].front( );
        pWndData->clicks[kind - WM_MOUSEFIRST].pop( );
        x = where.x;
        y = where.y;
    }
    else
    {
        x = y = NO_CLICK;
    }
} 
```

这是您在代码中所指的`getmouseclick()`吗？这不是我写的东西哈哈只是我正在使用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:23:37.943

WM_LBUTTONDOWN 是一个 windows 常量，它被定义为

```
#define WM_LBUTTONDOWN                  0x0201 
```

所以

```
 if(WM_LBUTTONDOWN){ 
```

将始终评估为真。

你想要的可能是这样的

```
if (getmouseclick(WM_LBUTTONDOWN, mx, my) == WM_LBUTTONWDOWN) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T03:02:25.280

```
DWORD result = 0;
result = getmouseclick(WM_LBUTTONDOWN, mx, my);
    if(result == WM_LBUTTONDOWN){ // then left mouse button was clicked and do some actions
} 
```

# java - 我在使用 compareTo 时遇到问题

> ID：15602680
> 
> 赞同：0
> 
> 时间：2013-03-24T19:03:23.267
> 
> 标签：java, methods, compareto

好吧，我需要创建一个项目，其中有两个接口，它们都用于两个不相关的类。除了 compareTo 方法之外，我设法让其他所有东西都能正常工作。我制作的两个课程是汽车和马。我想要做的是比较从 Horse 到 Car 的 milesGoal 并返回 1、0 或 -1。

但是，当我尝试这样做时，出现错误“无法取消引用双精度”

我一直坚持这一点，试图找到不同的方法来处理这部分代码。我尝试在测试器类中使用 compareTo 而不是创建一个方法，但我得到了同样的错误，我需要将它变成一个方法。

这是马类：

```
public class Horse implements milesInterface , kilometersInterface{
private double currentMile;
private double currentKilo;
private double milesGoal;
private double kilosGoal;
private String horseBreed;

// CONSTRUCTORS
public Horse(){
    currentMile = 0;
    currentKilo = 0;
    milesGoal = 0;
    kilosGoal = 0;
    horseBreed = "Unspecified";
}
public Horse(double cm, double ck, double mg, double kg, String hb){
    currentMile = cm;
    currentKilo = ck;
    milesGoal = mg;
    kilosGoal = kg;
    horseBreed = hb;
}

// MILE METHODS
public double remainingMiles(){ // Finds the remaining miles
    return milesGoal-currentMile;
}
public void halfMile(){ // Divides the desired goal halfway (Miles)
    milesGoal = milesGoal/2;
} 
public void setMileGoal(double newMile){ // Allows you to set a new goal
    milesGoal = newMile;
}
public double getMileGoal(){
    return milesGoal;
}

// KILOMETER METHODS
public double remainingKilos(){ // Finds the remaining Kilos
return kilosGoal-currentKilo;
}
public void halfKilo(){ // Divides the desire goal halfway (Kilos)
    kilosGoal = kilosGoal/2;
}
public void setKiloGoal(){ // Allows you to set a new goal
    kilosGoal = milesGoal*1.6;
}
public void setCurrentKilo(){ // Allows you to set the current Kilo
    currentKilo = currentMile * 1.6;
}

// UNIQUE METHODS
public double getMilesStatus(){
    return currentMile;
}
public double getKilosStatus(){
    return currentKilo;
}
public String getHorseBreed(){
    return horseBreed;
}
public void convertToKilos(){ // Converts current miles to kilometers
    double kilos = currentMile * 1.6;
    System.out.println("The current miles to kilometers is: " + kilos + "km.");
}
public void convertToMiles(){ // Converts current kilometers to miles
    double miles = currentKilo * .6;
    System.out.println("The current kilometers to miles is: " + miles + "m.");
}
public void milesPerHour(double hours){ // Calculates the mph to the goal by a time
double answer = milesGoal / hours;
System.out.println("The mph needed to reach the desination in " + hours + " hours: " + answer);
}
 public void kilosPerHour(double hours){ // Calculates the kmph to the goal by a time
double answer = kilosGoal / hours;
System.out.println("The kilometers needed to reach the desination in " + hours + " hours: " + answer);
}
public int compareTo(Object Other){

    if(milesGoal > (Horse)milesGoal.Other)
        return 1;
    if(milesGoal < (Horse)milesGoal.Other)
        return 0;
        return -1;
    }
 } 
```

Car 类与 Horse 类几乎相同，我需要找到一种方法来比较它们的两个 milesGoal 以查看哪个更大。我尝试了多种方法，但似乎不起作用

这是我做的界面：

```
abstract interface milesInterface{
public double remainingMiles();
public void halfMile();
public void setMileGoal(double newMile);
public int compareTo(Object Other);
}
abstract interface kilometersInterface{
public double remainingKilos();
public void halfKilo();
public void setCurrentKilo();
public int compareTo(Object Other);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:08:20.287

首先，你在写`attribute.object`. 这就是失败的原因。`Other.milesGoal`是更好的选择。

另一个问题是铸造。你正在做的是试图投到`milesGoal.other`（`Horse`你想投`milesGoal`）

你应该使用

```
 if (milesGoal > ((Horse) other).milesGoal) 
```

此外，使用正确的大小写（变量小写，类/接口大写）和 setter 和 getter。

此外，您可能希望转换为接口，以便可以将这些方法与实现它的其他类一起使用

```
 if (milesGoal > ((MilesInterface) other).milesGoal) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:11:25.720

首先，`(Horse)milesGoal.Other`应该是`((Horse) Other).milesGoal`。

我建议`compareTo`使用一种与s 进行比较`Horse`的方法和一种与 s 进行比较的方法重载`Car`。然后你的代码看起来像

```
public int compareTo(Horse horse){
    if(milesGoal > horse.milesGoal)
        return 1;
    if(milesGoal < horse.milesGoal)
        return -1;
    return 0;
}

public int compareTo(Car car){
    if(milesGoal > car.milesGoal)
        return 1;
    if(milesGoal < car.milesGoal)
        return -1;
    return 0;
} 
```

# macos - 带有 perl 的添加错误

> ID：15602682
> 
> 赞同：-3
> 
> 时间：2013-03-24T19:03:26.610
> 
> 标签：macos, perl

我正在为一个小测试项目生成一些数据，并使用我的旧备用 perl。我发现当我将 0.1 添加到 0 到 10（我期望为 6.0）时，字符串输出变为“5.99999999999999”。当我从 5.9 开始时，当我到达 8.8 时，缺少相同的分数：8.79999999999998。

我使用 Mac OS 10.7.5 附带的 Perl v5.12.3 以及带有 macports (v5.12.4) 的版本对此进行了测试。我使用的是 2.2 ghz i7 15" macbook pro。

```
for (my $i=0; $i<10; $i+=.1) {
   print $i."\n";
} 
```

自从旧的 Pentium bug 以来我见过的最奇怪的事情，我似乎找不到任何关于这个的讨论。我错过了什么还是有什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-24T19:27:43.677

小数部分`0.1`不能以 2 为基数表示，就像分数 ⅓ 不能以 10 为基数表示（0.33333...）。如果您将 0 到 3 的数字相加，步长为 ⅓，精度为两位数，我们将得到`2.97`答案。这类似于将分数表示为浮点数的问题。

无论您的浮点数有多大（使用多少个十进制数字），这些问题都不会消失。要解决这些问题，请在内部使用适当的整数，并在您必须与其他代码/外部世界（如

```
for my $i (0 .. 100) {
  say $i/10;
} 
```

或`use bignum`。这将 perl 的数字替换为可以表示任意精度数字的重载对象：

```
use bignum;
for (my $i = 0; $ i<= 10; $i += 0.1) {
  say $i;
} 
```

# linux - rdiff-backup bash 脚本和 cron 麻烦

> ID：15602683
> 
> 赞同：2
> 
> 时间：2013-03-24T19:03:26.603
> 
> 标签：linux, bash, cron, crontab

我有这个非常简单的 bash 脚本：

```
#!/opt/bin/bash
/opt/bin/rdiff-backup --force --print-statistics myhost::/var/bkp /volume1/backups/sql 2>&1 > /var/log/rdiff-backup.log;
/opt/bin/rdiff-backup --force --print-statistics myhost::/var/www/vhosts /volume1/backups/vhosts 2>&1 >> /var/log/rdiff-backup.log;
/opt/bin/rdiff-backup --force --print-statistics myhost::/etc /volume1/backups/etc 2>&1 >> /var/log/rdiff-backup.log;
/opt/bin/rdiff-backup --force --print-statistics /volume1/homes /volume1/backups/homes 2>&1 >> /var/log/rdiff-backup.log;
cat /var/log/rdiff-backup.log | /opt/bin/nail -s "rdiff-backup log" me@email.com; 
```

如果我从命令行运行脚本，以这种方式：

```
nohup /path/to/my/scipt.sh & 
```

它工作正常，将每个 rdiff-backup 统计报告附加到 rdiff-backup.log 并将此文件发送到我的电子邮件地址，正如预期的那样。但是，如果我将脚本放在 crontab 中，该脚本只会生成一个 rdiff-backup 作业，通过电子邮件发送统计信息。我无法理解，因为脚本不能以相同的方式工作......

任何想法？

这是我的 cronjob 条目：

```
30 19 * * * /opt/bin/bash /volume1/backups/backup.sh 
```

通过 crontab 只有最后一个作业被正确执行，我认为因为这是唯一的一个本地备份。当我从命令行执行脚本时，我使用 root 用户，并且 root 用户的公钥在远程机器的 /root/./ssh/authorized_keys 中。crontab 文件的所有者也是 root 用户，我使用 root 帐户通过“crontab -e”创建了它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:47:11.680

首先，您需要确保 cron 中使用的脚本不输出任何内容，否则：

1.  cron 将假定存在错误
2.  如果有，您将看不到错误

一个解决方案是使用

```
30 19 * * * /opt/bin/bash /volume1/backups/backup.sh 2>&1 >> /var/log/rdiff-backup-cron.log; 
```

其次，您似乎在通过 cron 执行时丢失了 env 变量，请尝试将 env 设置添加到您的脚本中

```
#!/opt/bin/bash
. /root/.profile
/opt/bin/rdiff-backup --force --print-statistics myhost::/var/bkp /volume1/backups/sql 2>&1 > /var/log/rdiff-backup.log 
```

如果`/root/.profile`不存在，请尝试添加`. /root/.bashrc`或`/etc/profile`

我希望这有帮助。

# batch-file - 批处理文件 - 每 20 分钟后重新启动程序

> ID：15602687
> 
> 赞同：18
> 
> 时间：2013-03-24T19:03:58.983
> 
> 标签：batch-file

我想创建一个启动程序的批处理文件，20分钟后将关闭程序并重新启动它。

关于批处理文件，我唯一知道的是如何启动程序：

```
@echo off
Start [adress of application] 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-05-14T09:59:48.553

这有效：

```
@echo off                           //Turn off screen text messages
:loop                               //Set marker called loop, to return to
start "Wicked_Article_Creator" "C:\Wicked Article Creator\Wicked Article Creator.exe"  //Start program, with title and program path 
timeout /t 1200 >null               //Wait 20 minutes
taskkill /f /im "Image Name" >nul   //Image name, e.g. WickedArticleCreator.exe, can be found via Task Manager > Processes Tab > Image Name column (look for your program)
timeout /t 7 >null                  //Wait 7 seconds to give your prgram time to close fully - (optional)
goto loop                           //Return to loop marker 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-24T19:46:53.670

```
@echo off
:loop
start yourtarget.exe ...
timeout /t 1200 >null
taskkill /f /im yourtarget.exe >nul
goto loop 
```

应该做的工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-09T16:49:01.527

对于遇到这个老问题的任何人：您还可以 ping 到一个绝对不存在的地址，而不是 timeout.exe：

```
ping 999.199.991.91 -n 1 -w 60000 >NUL 
```

您可以将 60000 更改为您想要的任何延迟（以毫秒为单位）。

```
1 second = 1000

10 seconds = 10000

60 seconds = 60000 
```

等等..

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-04-02T11:03:45.253

```
@echo off                           
:loop                               
timeout /t 20 >null   ( Wait for 20 seconds before kill program)            
taskkill /F /IM terminal.exe  
timeout /t 3600 >null ( wait for 1hr before returning to loop or recycle the process)           
goto loop 
```

我使用另一个名为 mt4bar 的程序来监控我的应用程序，并在它们崩溃或关闭时重新启动它们

# perl - 使用 Perl 检测和显示操作系统

> ID：15602692
> 
> 赞同：2
> 
> 时间：2013-03-24T19:04:19.380
> 
> 标签：perl

我想使用 Perl 显示我的计算机的操作系统。我认为以下会做

```
#!/usr/bin/perl
use strict;
use warnings;

my $os = $^O;
print "$os\n"; 
```

但我得到的输出是

```
linux 
```

我希望输出显示为

```
Windows XP 
```

这个怎么做？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T19:10:23.677

使用[POSIX 模块为您提供的](https://metacpan.org/module/POSIX)**uname()**函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T21:36:13.100

所有 Perl 发行版都带有[Config](http://perldoc.perl.org/Config.html)模块。这个模块有点摇摇晃晃，因为它导入了 hash `%Config`，但它是一种访问各种 Perl 配置信息的简单方法。

```
use Config;  # This exports a %Config hash

print "My OS is $Config{osname}\n";
print "My OS version is $Config{osvers}\n";
print "My Architecture Family is $Config{archname}\n";

#
# Print out all of the keys, and see which one looks like one
# you can use. "ld" is actually a rather nice value
#
for my $key (sort keys %Config) {
    no warnings qw(uninitialized); # Some elements have undef values
    print qq($key: "$Config{$key}"\n);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T07:11:14.483

您是否正在寻找

```
use CGI                 qw( );
use HTTP::BrowserDetect qw( );

my $cgi = CGI->new();
print $cgi->header('text/plain');

my $bd = HTTP::BrowserDetect->new($cgi->user_agent());
print $bd->os_string(), "\n"; 
```

# c# - EMGU CV 中的直接和逆傅立叶变换

> ID：15602696
> 
> 赞同：1
> 
> 时间：2013-03-24T19:04:35.867
> 
> 标签：c#, transform, fft, emgucv, computer-vision

我正在对 emgu cv 使用傅里叶变换做一个小实验。我的目标是对图像进行傅立叶变换，然后再次进行傅立叶逆变换，并检查图像是否显示。从数学上讲，它应该。

这是我的代码，我认为它是正确的

```
Image<Gray, float> image = new Image<Gray, float>("c://box1.png");
IntPtr complexImage = CvInvoke.cvCreateImage(image.Size, Emgu.CV.CvEnum.IPL_DEPTH.IPL_DEPTH_32F, 2);

CvInvoke.cvSetZero(complexImage);  // Initialize all elements to Zero
CvInvoke.cvSetImageCOI(complexImage, 1);
CvInvoke.cvCopy(image, complexImage, IntPtr.Zero);
CvInvoke.cvSetImageCOI(complexImage, 0);

Matrix<float> dft = new Matrix<float>(image.Rows, image.Cols, 2);
CvInvoke.cvDFT(complexImage, dft, Emgu.CV.CvEnum.CV_DXT.CV_DXT_FORWARD, 0);

Matrix<float> idft = new Matrix<float>(dft.Rows, dft.Cols, 2);
CvInvoke.cvDFT(dft, idft, Emgu.CV.CvEnum.CV_DXT.CV_DXT_INVERSE, 0);

IntPtr complexImage2 = CvInvoke.cvCreateImage(idft.Size, Emgu.CV.CvEnum.IPL_DEPTH.IPL_DEPTH_8U, 2);

CvInvoke.cvShowImage("picture", idft);
System.Threading.Thread.Sleep(99999); // to wait and see the picture 
```

我有两个问题：

1-错误：出现一个错误说“OpenCV：源图像必须有1、3或4个通道”我相信它与IDFT有关，但我无法解决它

2-它仍然显示输出图像，但不幸的是，它不是输入的原始图像。所有显示的是纯灰色图像。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:08:18.763

尝试这个，

```
Image<Gray, System.Single> _image = new Image<Gray, System.Single>("c://box1.png");
Image<Gray, System.Single> DFTimage = new Image<Gray, System.Single>(_image.Size);
Image<Gray, System.Single> Original = new Image<Gray, System.Single>(_image.Size);
CvInvoke.cvDFT(_image.Ptr, DFTimage.Ptr,Emgu.CV.CvEnum.CV_DXT.CV_DXT_FORWARD, -1);
CvInvoke.cvDFT(DFTimage.Ptr, Original.Ptr,Emgu.CV.CvEnum.CV_DXT.CV_DXT_INVERSE, -1);
CvInvoke.cvShowImage("picture", Original); 
```

# java - JDBC 与 HBase？

> ID：15602697
> 
> 赞同：2
> 
> 时间：2013-03-24T19:05:03.517
> 
> 标签：java, jdbc, hadoop, hdfs

由于我想将数据存储在 HDFS 上，所以需要访问 HBase，那么如何使用 Java API 连接到 HBase。

请建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T02:45:10.157

HBase 有 Java API。看看[http://hbase.apache.org/apidocs/index.html](http://hbase.apache.org/apidocs/index.html)

两个重要的类是

1) HBaseAdmin
2) HTable

HBaseAdmin 是用于创建/删除/更改表的管理 API
HTable 是用于放置/获取/扫描记录的客户端 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T15:19:58.170

我写了一个简单的框架来操作hbase。 [https://github.com/zhang-xzhi/simplehbase/](https://github.com/zhang-xzhi/simplehbase/)

Simplehbase 是一个介于 java app 和 hbase 之间的轻量级 ORM 框架。它的主要特点如下：

*   数据类型映射：来回映射 java 类型到 hbase 的字节。
*   hbase 操作包装：将 hbase 的 put get 扫描操作变形为简单的 java 接口。
*   hbase查询语言：使用hbase过滤器，simplehbase可以使用类似sql的风格对hbase进行操作。
*   动态查询：和myibatis一样，simplehbase可以使用xml配置文件定义动态查询对hbase进行操作。
*   插入更新支持：在 checkAndPut 之上提供插入、更新。
*   多版本支持：提供对hbase的多版本操作的接口。
*   hbase 批量操作支持。
*   hbase 原生接口支持。
*   HTablePool 管理。
*   HTable 计数和总和。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T16:57:11.060

使用 HBase 作为源，使用 TableMapper 类并存储在 hdfs

# java - 为什么简单的代码会加载很多类？

> ID：15602698
> 
> 赞同：1
> 
> 时间：2013-03-24T19:05:13.680
> 
> 标签：java, classloader

这是一个非常简单的代码：

```
package test;
public class Test {
    public static void main(String[] args) {
        System.out.println("test");
    }
} 
```

我运行它：java -verbose:class Test，以下是输出。为什么要加载这么多类？Java加载类不是需要的吗？

```
[Opened C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.Object from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.io.Serializable from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.Comparable from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.CharSequence from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.String from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.reflect.GenericDeclaration from C:\Program        Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.reflect.Type from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.reflect.AnnotatedElement from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.Class from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.Cloneable from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.ClassLoader from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.System from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.Throwable from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.Error from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
...
test
[Loaded java.lang.Shutdown from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar]
[Loaded java.lang.Shutdown$Lock from C:\Program Files\Java\jdk1.7.0_11\jre\lib\rt.jar] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:07:44.233

在java中，一个类至少引用另一个类（称为Object）。JVM 识别这些引用（fe 扩展、返回类型、字段类型、实现）并加载引用的类。

在上面的例子中：

到 Java VM 在类未加载时加载它们

```
package test;
public class Test {
  public static void main(String[] args) {
    System.out.println("test");
  }
} 
```

你的类是指：系统、对象、类、字符串、反射包中的一些类等等。

您在上面列出的这些课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:12:33.510

类本身可以以传递的方式加载类。您的程序使用`System`该类，该类本身可能引用此类系统类，例如`java.io.Serializable`.

您列表中的类也恰好是非常常用的类。可能只是虚拟机正在强制加载它们，以避免延迟初始化。这些类必然会在任何重要的程序中使用。

# c# - 使用 .NET 为 Windows 应用商店应用上传文件

> ID：15602700
> 
> 赞同：1
> 
> 时间：2013-03-24T19:05:19.223
> 
> 标签：c#, .net, windows, windows-8, windows-store

既然我已经意识到我不能使用正常`.NET`来编写我的 Windows 应用商店应用程序，我正试图通过`.NET`Windows 应用商店应用程序的混乱。我最新的发现是这个`System.Net.WebClient`类不见了，我需要用它来上传文件。如果这门课在那里，我会做一些类似的事情：

```
webClient.UploadFile("http://my.website/upload.php?a=" + someParam, "POST", filepath); 
```

不幸的是，我不能在 .NET for windows store 中执行此操作。我将如何仅使用 .NET for Windows 商店来实现类似的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:10:44.860

我会尝试 HttpClient 类 - [http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx) - 它具有 Post 方法，如果您查看此答案，请在[此处输入链接描述](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)，它展示了如何为文件上传创建多部分数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:03:03.180

您首先需要获得对 a 的引用`StorageFile`。使用`FileOpenPicker`将是一种方式：

```
var filePicker = new FileOpenPicker();
filePicker.FileTypeFilter.Add(".txt");
var file = await filePicker.PickSingleFileAsync(); 
```

然后使用以下代码上传文件（我没有尝试过，因为我没有方便的上传页面，但它应该可以工作）：

```
using (var randomStream = (await file.OpenReadAsync()))
{
    using (var stream = randomStream.AsStream())
    {
        using (var content = new StreamContent(stream))
        {
            var httpClient = new HttpClient();
            await httpClient.PostAsync(uri, content);
        }
    }
} 
```

# c# - 为什么 C# 性能比 VB 慢

> ID：15602701
> 
> 赞同：3
> 
> 时间：2013-03-24T19:05:19.930
> 
> 标签：c#, vb.net

我有两个库，第一个是在 vb.net 中完成的原始库，第二个是在 c# 中完成的。

做同样的事情。

vb.net 比 c# 快大约 10%，这很奇怪

所以我发现这似乎是放缓的原因，通过查看`IL`两者的代码（我会说接近 99% 的`il`代码是相同的）；

1.  在c#中所有方法调用都有`hidebysig`但在vb.net中没有

    这可能是性能问题吗？

2.  在c#中，你必须在使用它之前初始化一个局部变量

    这在 c# 中不起作用

    ```
    void test()
    {
        int a;
        a += 1;
    } 
    ```

    这将

    ```
    void test()
    {
        int a = 0;
        a += 1;
    } 
    ```

    虽然这项工作在 vb.net

    ```
    Sub test()
       Dim a As Integer
       a += 1
    End Sub 
    ```

    这在 c# 中会导致 2 多条 IL 行，我敢肯定，这会导致性能问题

3.  在 vb.net 中，我似乎无法`il`使用代码`call`，它总是使用`callvirt`，而 c# 总是使用`call`

    这可能是性能问题吗？

4.  .maxstack 在 c# 中有时更大

    这可能是性能问题吗？

最后，我试图了解如何恢复 10% 的速度损失。到目前为止我一无所知

如果你想看这里，你可以自己反编译，我用的是ilspy；

[ZIP 文件，编译版本](http://pages.videotron.com/spirch/bench.zip)
[ChessEngine.dll](http://pages.videotron.com/spirch/bench/ChessEngine.dll)
[ChessEngineSharp.dll](http://pages.videotron.com/spirch/bench/ChessEngine.dll)
[ConsoleApplication1.exe](http://pages.videotron.com/spirch/bench/ChessEngine.dll)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-24T19:08:56.087

[`hidebysig`只控制重写方法中名称查找的工作方式。](https://stackoverflow.com/a/656336/1968)

> 这在 c# 中会导致 2 多条 IL 行，我敢肯定，这会导致性能问题

不，它没有。应该生成相同的 IL 或等效代码。在 VB 中初始化*是*强制性的，只是编译器会为您隐式执行，如果您不明确执行。

> 在 vb.net 中，我似乎无法获得使用 call 的 il 代码，它总是使用 callvirt 而 c# 总是使用 call

我很确定你弄错了。C#总是使用`callvirt`虚方法，VB`call`通过使用`MyClass.Method()`语法来支持。

事实上，如果您的基准测试显示 VB 快 10%，那么我怀疑您的基准测试有错误，仅此而已。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T19:54:03.377

我已经尝试运行它几次，但我系统上的时间并没有显示出任何特别的偏差。

我尝试运行“BenchVB”和“BenchC#”测试四次，结果如下：

```
 BenchVB, BenchC#
    Average Moves per Second
C#: 49,218,819    48,975,863    47,096,647    47,796,195
VB: 47,003,681    46,874,143    49,137,566    49,382,133 
```

有时 C# 更快，有时 VB 更快。看起来没有任何显着差异，至少在我的 PC 上（运行在 4GHz 的四核，Windows 7 x64）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T10:43:33.673

我要说我的问题似乎与硬件有关，在家里和工作中是白天和黑夜，唯一的区别是英特尔桌面 cpu（家庭）和英特尔移动 cpu（工作）。（在工作中，c# 比 vb 快...）

我希望在家里这个数字在 c#/vb 之间会更接近/相似

# php - 为什么数据不会存储在我的数据库中？

> ID：15602704
> 
> 赞同：0
> 
> 时间：2013-03-24T19:06:04.553
> 
> 标签：php, mysql, eclipse

对不起，我是 php 新手，所以请耐心等待。我正在创建一个用户界面，当我注册时它说我已经注册但它没有将数据存储到数据库中。有人可以帮帮我吗！

```
 <?PHP
$uname = "";
$pword = "";
$errorMessage = "";
$num_rows = 0;

function quote_smart($value, $handle) {

   if (get_magic_quotes_gpc()) {
       $value = stripslashes($value);
   }

   if (!is_numeric($value)) {
       $value = "'" . mysql_real_escape_string($value, $handle) . "'";
   }
   return $value;
}

if ($_SERVER['REQUEST_METHOD'] == 'POST'){

    $uname = $_POST['username'];
    $pword = $_POST['password'];

    $uname = htmlspecialchars($uname);
    $pword = htmlspecialchars($pword);

    $uLength = strlen($uname);
    $pLength = strlen($pword);

    if ($uLength >= 10 && $uLength <= 20) {
        $errorMessage = "";
    }
    else {
        $errorMessage = $errorMessage . "Username must be between 10 and 20 characters" . "<BR>";
    }

    if ($pLength >= 8 && $pLength <= 16) {
        $errorMessage = "";
    }
    else {
        $errorMessage = $errorMessage . "Password must be between 8 and 16 characters" . "<BR>";
    }

    if ($errorMessage == "") {

    $user_name = "root";
    $pass_word = "";
    $database = "user authentication";
    $server = "127.0.0.1";

    $db_handle = mysql_connect($server, $user_name, $pass_word);
    $db_found = mysql_select_db($database, $db_handle);

    if ($db_found) {

        $uname = quote_smart($uname, $db_handle);
        $pword = quote_smart($pword, $db_handle);

        $SQL = "SELECT * FROM login WHERE USERNAME = $uname";
        $result = mysql_query($SQL);
        $num_rows = mysql_num_rows($result);

        if ($num_rows > 0) {
            $errorMessage = "Username already taken";
        }

        else {

            $SQL = "INSERT INTO login (L1, L2) VALUES ($uname, md5($pword))";

            $result = mysql_query($SQL);

            mysql_close($db_handle);

        //=================================================================================
        //  START THE SESSION AND PUT SOMETHING INTO THE SESSION VARIABLE CALLED login
        //  SEND USER TO A DIFFERENT PAGE AFTER SIGN UP
        //=================================================================================

            session_start();
            $_SESSION['login'] = "1";

            header ("Location: page1.php");

        }

    }
    else {
        $errorMessage = "Database Not Found";
    }

    }

}

?>

    <html>
    <head>
    <title>Basic Login Script</title>

    </head>
    <body>

<FORM NAME ="form1" METHOD ="POST" ACTION ="signup.php">

Username: <INPUT TYPE = 'TEXT' Name ='username'  value="<?PHP print $uname;?>" maxlength="20">
Password: <INPUT TYPE = 'TEXT' Name ='password'  value="<?PHP print $pword;?>" maxlength="16">

<P>
<INPUT TYPE = "Submit" Name = "Submit1"  VALUE = "Register">

</FORM>
<P>

<?PHP print $errorMessage;?>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:49:15.927

[在此处输入链接描述](https://stackoverflow.com/questions/15602704/why-wont-the-data-be-stored-in-my-database/15602972#15602972)`$SQL = "INSERT INTO login (L1, L2) VALUES ($uname, md5($pword))";`

您没有将值插入到正确的字段中，它会出现。您将在`$uname`L1 和`md5($pword)`L2 中插入，但在上面的选择查询中，用户名的字段名称不同，我认为密码的字段名称相同。

`$SQL = "SELECT * FROM login WHERE USERNAME = $uname";`

最有可能的是，您的插入查询应该是这样的：

`$SQL = "INSERT INTO login (USERNAME, PASSWORD) VALUES ('{$uname}', MD5('{$pword}'))";`

我在用户名和密码周围添加了单引号，因为大概它们是字符串。此外，我在变量周围添加了花括号，以区分什么是 SQL 和什么是 PHP。

最后一件事，我会按照[Willem 的建议使用](http://php.net/pdo)[PDO进行检查](http://php.net/pdo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:32:25.310

您可能还想使用 PDO，然后您不必清理用户输入，因为 PDO 会为您处理这些。您可能希望创建一个包含所有连接详细信息的文件，如下所示：

```
 <?php

          define('DB_HOST', 'localhost');
          define('DB_NAME', 'user authentication');
          define('DB_USER', 'root');
          define('DB_PASS', '');
          define('DSN', 'mysql:host='. DB_HOST . ';dbname=' . DB_NAME);

    ?> 
```

然后，您可能想要创建一个类来连接到您的数据库，例如：

```
<?php

    class database{

    public function databaseConnect(){
            /*Creates a new instance of the PDO called $db.
             * NOTE: the use of DSN, DB_USER and so on.  These variable live in the dbsettings file.
            */
            $db = new PDO(DSN,DB_USER,DB_PASS);
            $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
            return $db;
        }
    }

?> 
```

然后您可能想要创建一个类来注册您的用户，例如：

```
<?php

    //Include the database class file to allow access to properties and methods within that class.
    require_once 'class.database.php';

    //echo 'I am database class file now included in the users class file. <br />';

    //This method will be user to check if the user enter the correct username password pair.
    class users{

        public function checkValidUser($username){
            $userExists = false;
            try {
                $db = database::databaseConnect();

                $stmt = $db->prepare('SELECT uname FROM table WHERE uname=:username');
                $stmt->bindParam(':uname', $username, PDO::PARAM_STR);
                $stmt->execute();

                if ($stmt->rowCount() == 1){
                    $userExists = true;
                }

                $db = null;

            } catch (PDOException $e) {
                $userExists = false;
            }
            return $userExists;
        }

        public function addUser($firstname, $lastname, $username,$password){
            $success = true;
            //Connect to the database
            try {
                $db = database::databaseConnect();
                //$db->databaseConnect();

                $stmt = $db->prepare('INSERT INTO table (FirstName, LastName, Username, Password) VALUES (:firstname, :lastname, :username, :password)');
                $stmt->bindParam(':firstname', $firstname, PDO::PARAM_STR);
                $stmt->bindParam(':lastname', $lastname, PDO::PARAM_STR);
                $stmt->bindParam(':username', $username, PDO::PARAM_STR);
                $stmt->bindParam(':password', $password, PDO::PARAM_STR);
                $success = $stmt->execute();

                if ($success){

                    $success = true;
                }

                $db = null;

            } catch (PDOException $e) {
                //echo 'There was an error adding a new user.  Please go back and try again.  If this problem persits please contact the administrator.';
                $success = false;
            }
            return $success;
        }

?> 
```

希望这会有所帮助。

# button - Mono for Android - 如何禁用主页按钮

> ID：15602707
> 
> 赞同：-2
> 
> 时间：2013-03-24T19:06:33.213
> 
> 标签：button, mono, xamarin.android

当我的活动正在运行时，我不想在单击主页按钮时返回主屏幕。

我找到了 android 的答案，但我无法将代码转换为单声道。

你能帮我吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T20:42:34.610

禁用主页按钮是一种反模式，在 Android 中通常不受欢迎。您也无法在 ICS 及更高版本中覆盖 Home 按钮本身的行为。但是，如果您正在开发 Kiosk 模式应用程序或 Home 启动器，则可以解决它。

您需要告诉 Android 您的应用程序是 Launcher/Home 应用程序。除了创建自定义家庭应用程序之外，没有办法拦截 HOME 按钮，除非通过固件修改。

# linux - 为 Linux 创建 DirectX 供应商驱动程序有多难？

> ID：15602708
> 
> 赞同：0
> 
> 时间：2013-03-24T19:06:50.653
> 
> 标签：linux, directx, drivers

正如在[这个线程](https://stackoverflow.com/questions/11121258/why-is-there-no-directx-api-for-linux)上看到的那样，能够在 Linux 上本地运行 DirectX 的缺失部分似乎是供应商驱动程序。

**供应商驱动程序到底是什么？**它们是连接特定模型的组件、系列还是其中任何一个的驱动程序？它们是用什么编码的？ASM 和 C 最有可能？

**某人（或团队）将如何为 Linux 创建这些驱动程序？**它将如何集成到 Linux 中？通常为 Windows 制作并使用 DirectX 的游戏或应用程序是否需要针对 Linux 进行任何调整？制作游戏的公司是否会为 Linux 构建他们的游戏，知道它们可以在不需要或只需要一些调整的情况下使用吗？

**制造这些驱动程序有多难？**需要多长时间？它需要任何特定的知识吗？

我知道这会产生很多问题，但我对此非常好奇，为什么没有大型团体认真研究过这个问题（即使必须有充分的理由）。

非常感谢您的回答！

编辑：这绝不是引发争论，例如，OpenGL 与 DirectX，或 Windows 与 Linux。通过阅读常见问题解答，我真的不明白为什么这个线程没有建设性，因为它要求的问题非常有针对性，应该可以快速回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:48:44.420

恕我直言，没有人真正费心处理 DirectX 的主要原因是基于这样一个事实，即已经有一个可用的图形库（Linux 的特殊情况下的台面）完全支持 DirectX 也可用的任何所需的图形操作。

与 DirectX 相比，DirectX 是一个基于所谓的知识产权归一个公司所有的规范，这个库使用的称为 openGL 的 API 是一个由硬件制造商联盟商定的开放标准。

与将它的使用限制在一个操作系统上的理念不同，它可能试图将其用户束缚在一个唯一的平台上，openGL 从一开始就旨在作为一个独立于平台的 API。

遵循这一原则，与 DirectX 仅在一个**平台**上可用相反， openGL 可在**任何**计算平台上使用，范围从基于 android 的系统、Mac 和许多其他 UNIXoid 系统（包括 Linux 甚至 Windows 机器）。

使用除 openGL 之外的任何其他 API 都会破坏这种平台独立性，这可能不会被视为一种进步，而是一种回归。

总而言之，支持 openGL 而不是 DirectX 的主要原因可能如下：

*   openGL 是一个开放标准，而 DirectX 是专有的

*   openGL 适用于任何平台 DirectX 仅适用于单一平台

*   OpenGL 也支持 DirectX 支持的任何操作

*   如果真的需要 DirectX 调用，可以由包装库提供，将操作向下推到 openGL，例如在 WINE 中完成

仅 DirectX 库实现的可用性根本无法使为 Windows 平台设计的任何二进制代码运行，因为整套系统库和基础设施仍然根本不可用。事实上，即使是在 Linux 上的 Windows ELF 上使用 PE/COFF 的二进制格式也是不同的。

提供包括所需系统库在内的整个兼容性层的努力已经在进行中。正如上面已经提到的，它的名称是 WINE。（见： http: [//www.winehq.org/](http://www.winehq.org/)）

我希望我给了你一些**很好的**理由，说明为什么没有人按照你的要求尝试（或将尝试）。

# drupal - 如果我的 (Drupal 7) 内容类型不需要标题，我该怎么办？

> ID：15602709
> 
> 赞同：1
> 
> 时间：2013-03-24T19:07:04.920
> 
> 标签：drupal, drupal-7

如果我的 (Drupal 7) 内容类型不需要标题，我该怎么办？

它们不是文章或博客全文或新闻文章等，它们是数据。没有标题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:29:19.460

我认为您不能完全从节点中删除标题，但您可以使用“自动节点标题”和“标题覆盖”模块将其隐藏并自动填充它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:51:02.820

You can't delete "title" field. This field is built in node module.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:28:33.167

小鸡这个，可能会帮助 [http://drupal.org/project/auto_nodetitle](http://drupal.org/project/auto_nodetitle)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T01:27:39.133

您可以创建一个新的实体类型。您的新实体类型不必有标题。看这里了解如何创建实体：[http ://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_entity_info/7](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_entity_info/7)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-26T17:54:33.107

在帖子标题中不要放置 <> 之间的内容。

# c - 如何在emacs的gdb模式下将参数传递给C程序

> ID：15602717
> 
> 赞同：0
> 
> 时间：2013-03-24T19:07:45.173
> 
> 标签：c, emacs, gdb

我在 emacs 中使用 gdb 模式运行一个小代码来计算字符串中的位数，但是当我输入字符串（使用键盘）时，gdb 什么也没做，只是在我点击“enter”按钮后永远等待。我也直接用 Unix 提示符尝试了 gdb，一切都很顺利。那么在 emacs 的 gdb 模式下将参数传递给程序有什么技巧吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T21:20:27.837

将参数传递给被调试程序的规范方法是在`gdb`运行命令之后添加它们。

例如：

`M-x``gdb``RET``echo``RET`

```
Current directory is ~/
GNU gdb (GDB) 7.3-debian
[...]
Reading symbols from /bin/echo...(no debugging symbols found)...done.
(gdb) run foo
Starting program: /bin/echo foo
foo
[Inferior 1 (process 10176) exited normally] 
```

# amazon-cloudsearch - 您如何在开发中替换 Amazon CloudSearch？

> ID：15602720
> 
> 赞同：3
> 
> 时间：2013-03-24T19:07:58.987
> 
> 标签：amazon-cloudsearch

在生产中，我的应用程序运行 MySQL + Amazon CloudSearch。在开发中，它只运行 MySQL，我对只为开发运行搜索域不感兴趣。

目前，在开发中，我在 MySQL 中运行文本搜索，这并不理想，因为我必须编写特定的环境代码。

我找到[了 Groonga CloudSearch](https://github.com/groonga/gcs)，它看起来很棒，但仍然非常年轻且不完整。

那么，在开发中替换 Amazon CloudSearch 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T13:42:23.173

我们只是添加了一个索引字段来对数据进行分类，例如

系统：开发或现场

然后，代码中的任何搜索都只是将 dev/live 传递给搜索查询，具体取决于它在哪个系统上运行。

您还可以为“域”添加索引，然后具有“www.mydomain.com”和“dev.mydomain.com”的值。然后在您的代码中进行搜索，只需传入文档来自的域以及它们应该可见的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:07:33.623

这是“这取决于你如何使用它”的答案之一。您是否有不想在开发中使用 AWS 云搜索的原因（费用除外）？您正在选择一个非常具体的 SAAS 产品，对于不从事该项目的任何人来说，它实际上都是一个黑匣子。

也就是说，一些可行的替代品（取决于所需的功能）是：

```
-Solr - lucene.apache.org/solr/

-Elasticsearch - elasticsearch.org

-Whoosh - bitbucket.org/mchaput/whoosh/

-Xapian - xapian.org

-Really anything that uses the Lucene - lucene.apache.org/core/ -full text search engine

-MongoDB -mongodb.org

-Memcached memcached.org

-Redis redis.io/ 
```

所以...是的...这完全取决于您堆栈中 CloudSearch 的上下文。您可以将其用作具有最少逻辑的键值存储，或者使用复杂的框架，例如

干草堆 - [https://github.com/pbs/haystack-cloudsearch](https://github.com/pbs/haystack-cloudsearch)

# php - 数据库更新后自动刷新 webapp 页面

> ID：15602724
> 
> 赞同：0
> 
> 时间：2013-03-24T19:08:13.543
> 
> 标签：php, mysql, ajax, refresh

我现在因这个问题而头疼了一段时间。我正在用 php 和 jQuery Mobile 构建一个 Web 应用程序，用于判断滑雪板比赛。

应用程序的流程：

1.  裁判员在跳跃后给骑手打分（范围）
2.  在主审提交范围后，有 X 位法官在他们的平板电脑上收到分数。
3.  评委们分别给出一个更新的分数并提交给db
4.  主审可以批准分数并将其存储在 db 中，或者他可以不批准分数并将其发送回分数所在的法官。
5.  在主审批准所有分数后，下一个骑手可以去，所有步骤重新开始

我的问题是在主审提交某些内容后，我找不到刷新评委页面的方法。裁判长也是如此，因为他还必须接受裁判的分数。

我希望这是足够的信息。

提前致谢

扬尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:22:21.810

嗨 Yannick 您可以使用刷新命令来更新页面或 ob_end_flush(); 这将使您刷新页面。

# google-chrome-extension - 如何从 JS 开发控制台访问用 Chrome 扩展编写的功能？

> ID：15602729
> 
> 赞同：2
> 
> 时间：2013-03-24T19:08:27.723
> 
> 标签：google-chrome-extension, google-chrome-devtools

我希望能够从 Chrome 中的 JS 控制台调用我在 Chrome 扩展程序中编写的函数，以便我可以轻松地测试它们并查看它们的输出如何随着页面的变化而变化。

但似乎我编写的功能不适用于 chrome JS 控制台。我不太了解 JS 或 chrome 扩展模型，但我需要以某种方式将扩展源注入到我正在使用扩展的页面正文中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T19:18:40.520

如果您正在谈论您在 a 中定义的功能`background page`，那么您需要转到您的扩展页面，选中开发人员模式框，然后单击`_generated_background_page.html`。在那里您可以找到您的背景页面代码。

如果您的意思是 a 中的函数`content script`，那么当您在控制台中时，请转到它所说的位置`<page context>`并将其更改为您的扩展名。然后，您将可以访问`content script`.

# cuda - 即使使用页面对齐的内存，cudaHostRegister 也会因“无效参数”错误而失败

> ID：15602730
> 
> 赞同：1
> 
> 时间：2013-03-24T19:08:41.943
> 
> 标签：cuda

我已经使用`posix_memalign`. 调用`posix_memalign`不会返回任何错误。但是，使用此指针作为参数`cudaHostRegister`会给我一个“无效参数”错误。可能是什么问题？

*   CUDA API 版本：4.0
*   gcc 版本：4.4.5
*   GPU计算能力：2.0

内存分配在应用程序代码中完成，并将指针传递给库例程。

应用程序代码片段：

```
if(posix_memalign((void **)&h_A, getpagesize(), n * n * sizeof(float))) {
  printf("Error allocating aligned memory for A\n");
  return 1;
} 
```

共享库代码片段：

```
if((ret = cudaSetDeviceFlags(cudaDeviceMapHost)) != cudaSuccess) {
  fprintf(stderr, "Error setting device flag: %s\n", 
          cudaGetErrorString(ret));
  return NULL;
}

if((ret = cudaHostRegister(h_A, n2 * sizeof(float), 
                          cudaHostRegisterMapped)) != cudaSuccess) {
  fprintf(stderr, "Error registering page-locked memory for A: %s\n", 
          cudaGetErrorString(ret));
  return NULL;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T10:21:54.780

我无法重现这一点。如果我将您提供的代码片段制作成最小的可执行文件：

```
#include <unistd.h>
#include <stdlib.h>
#include <malloc.h>
#include <stdio.h>

int main(void)
{
    const int n2 = 100 * 100;
    float *h_A;
    cudaError_t ret;

    if(posix_memalign((void **)&h_A, getpagesize(), n2 * sizeof(float))) {
        printf("Error allocating aligned memory for A\n");
        return -1;
    }

    if((ret = cudaSetDeviceFlags(cudaDeviceMapHost)) != cudaSuccess) {
        fprintf(stderr, "Error setting device flag: %s\n", 
                cudaGetErrorString(ret));
        return -1;
    }

    if((ret = cudaHostRegister(h_A, n2 * sizeof(float), 
                    cudaHostRegisterMapped)) != cudaSuccess) {
        fprintf(stderr, "Error registering page-locked memory for A: %s\n", 
                cudaGetErrorString(ret));
        return -1;
    }

    return 0;
} 
```

它在带有 304.54 驱动程序的 64 位 linux 主机上的 CUDA 4.2 和 CUDA 5.0 下编译和运行没有错误。因此，我会得出结论，要么您的 CUDA 安装损坏，要么您的代码在您没有向我们展示的地方出现问题。

也许你可以完全按照我发布的那样编译和运行这段代码，看看会发生什么。如果它有效，它可能有助于缩小这里可能出错的范围。

# java - 1.3 版不支持 java 泛型和注解（travis 集成）

> ID：15602738
> 
> 赞同：12
> 
> 时间：2013-03-24T19:09:00.460
> 
> 标签：java, maven, generics, annotations, travis-ci

我正在尝试将我的[github Java/PHP 项目](https://github.com/tkoomzaaskz/wealthy-laughing-duck)与[travis-ci](https://travis-ci.org)环境集成。这是我的特拉维斯配置：

```
language: java
jdk:
  - openjdk7
  - oraclejdk7
script: mvn test 
```

下面是 travis 打印的输出：

```
Using worker: bluebox-linux-1.worker.travis-ci.org:travis-linux-9
$ git clone --depth=50 --branch=master git://github.com/tkoomzaaskz/wealthy-laughing-duck.git tkoomzaaskz/wealthy-laughing-duck
Cloning into 'tkoomzaaskz/wealthy-laughing-duck'...
remote: Counting objects: 458, done.
remote: Compressing objects: 100% (263/263), done.
remote: Total 458 (delta 156), reused 390 (delta 96)
Receiving objects: 100% (458/458), 458.40 KiB, done.
Resolving deltas: 100% (156/156), done.
$ cd tkoomzaaskz/wealthy-laughing-duck
$ git checkout -qf 47d1ef528f19ad6d01288ac9a3d4c550a79b14f4
$ jdk_switcher use openjdk7
Switching to OpenJDK7 (java-1.7.0-openjdk-amd64), JAVA_HOME will be set to /usr/lib/jvm/java-7-openjdk-amd64
update-alternatives: error: no alternatives for apt.
update-alternatives: error: no alternatives for mozilla-javaplugin.so.
update-java-alternatives: plugin alternative does not exist: /usr/lib/jvm/java-7-openjdk-amd64/jre/lib/amd64/IcedTeaPlugin.so
$ java -version
java version "1.7.0_15"
OpenJDK Runtime Environment (IcedTea7 2.3.7) (7u15-2.3.7-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode)
$ javac -version
javac 1.7.0_15
$ mvn install --quiet -DskipTests=true
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.0.2:compile (default-compile) on project wealthy-laughing-duck: Compilation failure: Compilation failure:
[ERROR] /home/travis/build/tkoomzaaskz/wealthy-laughing-duck/src/main/java/com/blogspot/symfonyworld/wealthylaughingduck/dao/OutcomeDao.java:[19,8] error: generics are not supported in -source 1.3
[ERROR] 
[ERROR] (use -source 5 or higher to enable generics)
[ERROR] /home/travis/build/tkoomzaaskz/wealthy-laughing-duck/src/main/java/com/blogspot/symfonyworld/wealthylaughingduck/model/Income.java:[12,1] error: annotations are not supported in -source 1.3
[ERROR] 
[ERROR] (use -source 5 or higher to enable annotations)
[ERROR] /home/travis/build/tkoomzaaskz/wealthy-laughing-duck/src/main/java/com/blogspot/symfonyworld/wealthylaughingduck/model/User.java:[10,1] error: annotations are not supported in -source 1.3 
```

输出表明我使用的是太旧的 java 版本，无法使用注释和泛型。但这些并不是什么新鲜事，它们必须以某种方式得到支持（我猜）。我一直在查看 travis/java 文档，但没有找到关于 java 版本的选项（因此我尝试使用不同的 jdks）。谁能指出我应该在 travis 配置文件中添加什么？

* * *

编辑：

在@hertzsprung 之后，我运行`mvn help:effective-pom`并返回了以下输出（事实上，既`source`没有`target`定义注释也没有定义属性`maven-compiler-plugin`- 我该怎么办？）：

```
<!-- ====================================================================== -->
<!--                                                                        -->
<!-- Generated by Maven Help Plugin on 2013-03-24T08:15:13                  -->
<!-- See: http://maven.apache.org/plugins/maven-help-plugin/                -->
<!--                                                                        -->
<!-- ====================================================================== -->

<!-- ====================================================================== -->
<!--                                                                        -->
<!-- Effective POM for project                                              -->
<!-- 'com.blogspot.symfony-world:wealthy-laughing-duck:jar:1.0-SNAPSHOT'    -->
<!--                                                                        -->
<!-- ====================================================================== -->

<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.blogspot.symfony-world</groupId>
  <artifactId>wealthy-laughing-duck</artifactId>
  <version>1.0-SNAPSHOT</version>
  <name>wealthy-laughing-duck</name>
  <url>http://maven.apache.org</url>
  <build>
    <sourceDirectory>/var/www/github/wealthy-laughing-duck/src/main/java</sourceDirectory>
    <scriptSourceDirectory>src/main/scripts</scriptSourceDirectory>
    <testSourceDirectory>/var/www/github/wealthy-laughing-duck/src/test/java</testSourceDirectory>
    <outputDirectory>/var/www/github/wealthy-laughing-duck/target/classes</outputDirectory>
    <testOutputDirectory>/var/www/github/wealthy-laughing-duck/target/test-classes</testOutputDirectory>
    <resources>
      <resource>
        <mergeId>resource-0</mergeId>
        <directory>/var/www/github/wealthy-laughing-duck/src/main/resources</directory>
      </resource>
    </resources>
    <testResources>
      <testResource>
        <mergeId>resource-1</mergeId>
        <directory>/var/www/github/wealthy-laughing-duck/src/test/resources</directory>
      </testResource>
    </testResources>
    <directory>/var/www/github/wealthy-laughing-duck/target</directory>
    <finalName>wealthy-laughing-duck-1.0-SNAPSHOT</finalName>
    <pluginManagement>
      <plugins>
        <plugin>
          <artifactId>maven-antrun-plugin</artifactId>
          <version>1.6</version>
        </plugin>
        <plugin>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>2.2-beta-4</version>
        </plugin>
        <plugin>
          <artifactId>maven-clean-plugin</artifactId>
          <version>2.3</version>
        </plugin>
        <plugin>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>2.0.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>2.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.4</version>
        </plugin>
        <plugin>
          <artifactId>maven-ear-plugin</artifactId>
          <version>2.3.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-ejb-plugin</artifactId>
          <version>2.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.3</version>
        </plugin>
        <plugin>
          <artifactId>maven-jar-plugin</artifactId>
          <version>2.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-javadoc-plugin</artifactId>
          <version>2.6.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-plugin-plugin</artifactId>
          <version>2.8</version>
        </plugin>
        <plugin>
          <artifactId>maven-rar-plugin</artifactId>
          <version>2.2</version>
        </plugin>
        <plugin>
          <artifactId>maven-release-plugin</artifactId>
          <version>2.0-beta-8</version>
        </plugin>
        <plugin>
          <artifactId>maven-resources-plugin</artifactId>
          <version>2.3</version>
        </plugin>
        <plugin>
          <artifactId>maven-site-plugin</artifactId>
          <version>2.1</version>
        </plugin>
        <plugin>
          <artifactId>maven-source-plugin</artifactId>
          <version>2.0.4</version>
        </plugin>
        <plugin>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.4.3</version>
        </plugin>
        <plugin>
          <artifactId>maven-war-plugin</artifactId>
          <version>2.1-beta-1</version>
        </plugin>
      </plugins>
    </pluginManagement>
    <plugins>
      <plugin>
        <artifactId>maven-help-plugin</artifactId>
        <version>2.2</version>
      </plugin>
    </plugins>
  </build>
  <repositories>
    <repository>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Maven Repository Switchboard</name>
      <url>http://repo1.maven.org/maven2</url>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
      <releases>
        <updatePolicy>never</updatePolicy>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
      <id>central</id>
      <name>Maven Plugin Repository</name>
      <url>http://repo1.maven.org/maven2</url>
    </pluginRepository>
  </pluginRepositories>
  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.thrift</groupId>
      <artifactId>libthrift</artifactId>
      <version>0.9.0</version>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>1.7.3</version>
    </dependency>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-core</artifactId>
      <version>4.1.10.Final</version>
    </dependency>
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.24</version>
    </dependency>
  </dependencies>
  <reporting>
    <outputDirectory>/var/www/github/wealthy-laughing-duck/target/site</outputDirectory>
  </reporting>
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>
</project>

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 16 seconds
[INFO] Finished at: Sun Mar 24 20:15:13 CET 2013
[INFO] Final Memory: 11M/60M
[INFO] ------------------------------------------------------------------------ 
```

这是我的源`pom.xml`内容：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.blogspot.symfony-world</groupId>
    <artifactId>wealthy-laughing-duck</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <name>wealthy-laughing-duck</name>
    <url>http://maven.apache.org</url>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.thrift</groupId>
            <artifactId>libthrift</artifactId>
            <version>0.9.0</version>
        </dependency>
        <dependency>
            <artifactId>slf4j-api</artifactId>
            <groupId>org.slf4j</groupId>
            <type>jar</type>
            <version>1.7.3</version>
        </dependency>
        <dependency>
            <artifactId>hibernate-core</artifactId>
            <groupId>org.hibernate</groupId>
            <type>jar</type>
            <version>4.1.10.Final</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.24</version>
        </dependency>
    </dependencies>
</project> 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-24T19:41:02.077

请尝试在您的 pom.xml 中为您的 Maven 构建配置包含以下代码。我和你有同样的问题，这似乎对我有用：

```
<build>
    <pluginManagement>
         <plugins>
             <plugin>
                 <artifactId>maven-compiler-plugin</artifactId>
                 <version>2.3.2</version>
                 <configuration>
                     <source>1.6</source>
                     <target>1.6</target>
                     <compilerArgument></compilerArgument>
                 </configuration>
             </plugin>
         </plugins>
    </pluginManagement>
</build> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-23T18:28:54.867

看起来出于某种奇怪的原因，travis 使用源级别和目标 jvm 设置为 jdk 1.3。我认为他们应该保持 maven 默认值（即 1.5），因为这个错误让我感到意外，并且花了一些时间来修复它，因为我不想根据外部工具更改我的项目配置和行为。

如果你想避免修改你的 pom.xml（它不应该依赖于你的持续集成工具），你可以将 travis 配置为使用适当的源级别和目标 jvm 进行编译：

```
language: java
jdk:
  - oraclejdk7
  - openjdk7
install: mvn install -Dmaven.compiler.target=1.5 -Dmaven.compiler.source=1.5 -DskipTests=true -B
script: mvn test -Dmaven.compiler.target=1.5 -Dmaven.compiler.source=1.5 -B 
```

这将使用 1.5 源代码级别进行编译并生成针对 1.5 jvm 的字节码。如果要定位 1.7，可以指定 1.7 代替 1.5。

# android - Android：9-patch png 被视为普通 png

> ID：15602740
> 
> 赞同：0
> 
> 时间：2013-03-24T19:09:14.097
> 
> 标签：android, android-layout, background, png, nine-patch

我制作了这个 9-patch png 并将其添加到 res/drawable 文件夹中：

![在此处输入图像描述](../Images/b1992fc28acaa2a7469984b3df344831.png)

它在示例 eclipse 中工作得很好：

![在此处输入图像描述](../Images/3f4bc611937b2da4299a548120a1ab73.png)

但是在模拟器上看起来很乱：

![在此处输入图像描述](../Images/422e3289c5040fb7bfbf8edb395ad96c.png)

为什么会发生这种情况，我该如何解决？

编辑：我放置黑点的边框是白色的，不透明。不知道跟这个有没有关系...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T19:12:25.367

这可能是因为您设置的黑色像素有一个小错误。尝试重新剪切图片的边缘并重新添加黑色像素。

我也遇到过这个问题，这对我有帮助。

如果边框是白色的，那么这是你的问题，它必须是纯黑色或什么都没有。

**更新：**试试这张图片：

![在此处输入图像描述](../Images/89fe269d3d0fef1b0a616d87cc2dc77e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T20:13:55.597

Android SDK 包含一个 9-patch 编辑工具 (draw9patch.bat)，可以帮助您生成和/或验证 9-patch 图像。没有它，在定义边界时很容易出错。

一个像素的边框应该是透明的，除了定义图像各个部分的黑色像素，在缩放期间要进行不同的处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T19:14:35.847

看来你没有用 .9.png 保存你的图像

为了使其正常工作，请按照以下格式将图像保存在可绘制文件夹中

`yourimage.9.png`（不是您图像的 png 格式）

检查此参考[draw 9 补丁](http://developer.android.com/tools/help/draw9patch.html)

# html - 正则表达式 - 匹配 HTML 代码的多行块

> ID：15602747
> 
> 赞同：1
> 
> 时间：2013-03-24T19:09:37.153
> 
> 标签：html, regex, block, match, multiline

我的正则表达式有问题。我需要匹配 HTML 块。

示例块在这里：

```
<tr class="tr-list " data-id="XX">
    <td class="ip-img"><div class="gun-icon"></div><img src="https://example.com/images/stories/HCP/HCP_5.jpg"/></td>
    <td class="ip-name ip-sort">Hotel Complex Project</td>
    <td class="ip-price ip-sort">297.00</td>
    <td class="ip-earnings ip-sort">43</td>
    <td class="ip-shares ip-sort">86</td>
    <td class="ip-status {'sorter':'currency'}"><img
            src="/img/assets/arrow1.png" title="0.989990234375"/></td>
    <td class="ip-blank-right"></td>
</tr> 
```

这些 HTML 块中的每个块都应该单独匹配，然后我想从中提取其他数据（例如 ip-name、ip-price、ip-earnings..）。

但是我当前的正则表达式匹配所有内容，直到“（？=）”部分不再正确： [http ://regexhero.net/tester/?id=2b491d15-ee83-4dc7-8fe9-62e624945dcf](http://regexhero.net/tester/?id=2b491d15-ee83-4dc7-8fe9-62e624945dcf)

我需要更改什么才能使每个块都匹配？

问候！:)

PS.：希望我的意思可以理解...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T19:22:36.347

这应该得到所有 tr 行：

```
<tr class="tr-list[\s\S]+?</tr> 
```

这应该得到所有 tr 行与列的匹配组：

```
<tr class="tr-list[^<]*?<td class="ip-img">(.*?)</td>\s*<td class="ip-name.*?">(.*?)</td>\s*<td class="ip-price.*?">(.*?)</td>\s*<td class="ip-earnings.*?">(.*?)</td>\s*<td class="ip-shares.*?">(.*?)</td>\s*<td class="ip-status.*?">([\s\S]*?)</td>[\s\S]+?</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T03:22:54.797

此正则表达式将捕获一个非自封闭的整个 html 块：

```
var hmtlText="<div bar='baz'>foo</foo>";
var pattern = /<([\w]+)( (( +)?[\w]+=['"](\w+)?['"])?)+( )?(\/)?>((([\t\n\r\s]+)?)+(((.)+)?)+((\10)?)+)+?<\/(\1)>/igm;
console.log((pattern.test(htmlText) ? 'valid' : 'invalid') + ' html block'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-14T07:47:26.053

嵌套 html 将需要来自正则表达式匹配的嵌套数组它可以使用 jquery 完成或使用正则表达式手动生成树

# asp.net-mvc - ASP MVC 表外键配置

> ID：15602748
> 
> 赞同：0
> 
> 时间：2013-03-24T19:09:52.403
> 
> 标签：asp.net-mvc

```
public class Movies
{
    [Key]
    public int movieID { get; set; }

    public String Title { get; set; }

    public virtual Genres parentGenre { get; set; }
}

public class Genres
{
    public Genres()
    {
        this.movies = new HashSet<Movies>();
    }

    [Key]
    public int genreId { get; set; }

    public String genreName { get; set; }

    public ICollection<Movies> movies { get; set; }
} 
```

通过阅读 Genres 表，我可以在我的 addmovie 视图页面上成功创建一个 DropDownList。

但是当我尝试提交页面时，它指出“值'10'无效。” 这让我相信我正在尝试将一个 Int（来自下拉列表值）放入一个对象（来自“Genres parentGenre”）。

我是否将“流派 parentGenre”与“流派 ID”外键关系正确设置为它应该只需要“父流派”字段的“数字”，还是期望更多？

添加：

控制器：

```
 [HttpPost]
    public ActionResult Create(Movies movies)
    {
        if (ModelState.IsValid)
        {
            db.Movies.Add(movies);
            db.SaveChanges();
            return RedirectToAction("Index");  
        }
        IEnumerable<SelectListItem> items = db.Genres
            .Select(c => new SelectListItem
                            {
                                Value = SqlFunctions.StringConvert((double)c.genreId).Trim(),
                                Text = c.genreName
                            });
        ViewBag.genreId = items;
    } 
```

看法：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.parentGenre.genreName)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.parentGenre,(IEnumerable<SelectListItem>)ViewBag.genreId)
        @Html.ValidationMessageFor(model => model.parentGenre) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:28:45.600

代替您的评论，这是我的建议：

楷模：

```
public class Movie
    {
        [Key]
        public int MovieID { get; set; }

        public String Title { get; set; }

        public int GenreId { get; set; }

        public virtual Genre Genre { get; set; }
}

public class Genre
{
    public Genre()
    {
        this.movies = new HashSet<Movies>();
    }

    [Key]
    public int GenreId { get; set; }

    public String Name { get; set; }

    public ICollection<Movies> Movies { get; set; }
} 
```

控制器：

```
[HttpPost]
public ActionResult Create(Movie Movie)
{
    if (ModelState.IsValid)
    {
        db.Movies.Add(Movie);
        db.SaveChanges();
        return RedirectToAction("Index");  
    }
    IEnumerable<SelectListItem> items = db.Genres
        .Select(c => new SelectListItem
                        {
                            Value = SqlFunctions.StringConvert((double)c.GenreId).Trim(),
                            Text = c.Name
                        });
    ViewBag.genreId = items;
} 
```

看法：

```
<div class="editor-label">
    @Html.LabelFor(model => model.Genre.Name)
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.Genre.Id,(IEnumerable<SelectListItem>)ViewBag.genreId)
    @Html.ValidationMessageFor(model => model.Genre)
</div> 
```

如果我正在*阅读*您正确执行的操作，那应该可以。不过，我对 EF 做的不多，所以我不能 100% 确定。

# c# - C# 传递参数 - 动态事件订阅

> ID：15602749
> 
> 赞同：0
> 
> 时间：2013-03-24T19:09:58.043
> 
> 标签：c#, .net, events, delegates, observer-pattern

我的控制器中有以下内容，并希望将浮点类型的 x、y 和 z 传递给订阅者。但是，我在理解方面遇到了一些困难。我需要调整什么以允许我将浮点数 (x, y, z) 作为参数传递？谢谢你。

```
private void ProcessEvents()
{
    if(Input.GetMouseButtonDown(1))
    {
        // Data to be passed to subscribers
        float x = Input.mousePosition.x;
        float y = Input.mousePosition.y;
        float z = Input.mousePosition.z;

        var publisher  = new EventPublisher();
        var handler = new Handler();

        // Void delegate with one parameter
        string eventName = "RightClickEvent";
        var rightClickEvent = publisher.GetType().GetEvent(eventName);

        rightClickEvent.AddEventHandler(publisher, EventProxy.Create<int>(rightClickEvent, i=>Debug.LogError(i + "!")));

        publisher.PublishEvents();
    }
} 
```

其他来源：

```
public class ExampleEventArgs : EventArgs
{
    public int IntArg {get; set;}
} 
```

活动发布者：

```
public class EventPublisher
{
    public event EventHandler<ExampleEventArgs> RightClickEvent;

    /// <summary>
    /// Publishes the events.
    /// </summary>
    public void PublishEvents()
    {
        if(RightClickEvent != null) 
        {
            RightClickEvent(this, new ExampleEventArgs{IntArg = 5});
        }
    }
} 
```

处理程序：

```
public class Handler
{
    public void HandleEventWithArg(int arg) { Debug.LogError("Arg: " + string.Format("[{0}]", arg));    }
} 
```

事件代理：

```
static class EventProxy
{ 
    // Void delegate with one parameter
    static public Delegate Create<T>(EventInfo evt, Action<T> d)
    {
        var handlerType = evt.EventHandlerType;
        var eventParams = handlerType.GetMethod("Invoke").GetParameters();

        //lambda: (object x0, ExampleEventArgs x1) => d(x1.IntArg)
        var parameters = eventParams.Select(p=>Expression.Parameter(p.ParameterType,"x")).ToArray();
        var arg    = getArgExpression(parameters[1], typeof(T));
        var body   = Expression.Call(Expression.Constant(d),d.GetType().GetMethod("Invoke"), arg);
        var lambda = Expression.Lambda(body,parameters);
        return Delegate.CreateDelegate(handlerType, lambda.Compile(), "Invoke", false);
    }

    // Returns an expression that represents an argument to be passed to the delegate
    static Expression getArgExpression(ParameterExpression eventArgs, Type handlerArgType)
    {
        if(eventArgs.Type == typeof(ExampleEventArgs) && handlerArgType == typeof(int))
        {
            //"x1.IntArg"
            var memberInfo = eventArgs.Type.GetMember("IntArg")[0];
            return Expression.MakeMemberAccess(eventArgs,memberInfo);
        }
        throw new NotSupportedException(eventArgs + "->" + handlerArgType);
    }

    // Void delegates with no parameters
    static public Delegate Create(EventInfo evt, Action d)
    { 
        var handlerType = evt.EventHandlerType;
        var eventParams = handlerType.GetMethod("Invoke").GetParameters();

        //lambda: (object x0, EventArgs x1) => d()
        var parameters = eventParams.Select(p=>Expression.Parameter(p.ParameterType,"x"));
        var body = Expression.Call(Expression.Constant(d),d.GetType().GetMethod("Invoke"));
        var lambda = Expression.Lambda(body,parameters.ToArray());
        return Delegate.CreateDelegate(handlerType, lambda.Compile(), "Invoke", false);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:09:05.207

好的，所以我读到了你所说的关于以 MVC 风格的方式解耦应用程序模块的内容。我通常喜欢使用强类型代码，即使在使用反射时也是如此，但我对 MVC 比较陌生，不知道推荐的做法。你比我更了解你的要求，所以我只是编辑了 Nguyen 的解决方案，因为我相信他使用了一些未包含在文件中的扩展，并在此处发布了结果。所有功劳归于[Nguyen](http://www.buunguyen.net/blog/)。

```
namespace Dynamics
{
    public static class DynamicHandler
    {
        /// <summary>
        /// Invokes a static delegate using supplied parameters.
        /// </summary>
        /// <param name="targetType">The type where the delegate belongs to.</param>
        /// <param name="delegateName">The field name of the delegate.</param>
        /// <param name="parameters">The parameters used to invoke the delegate.</param>
        /// <returns>The return value of the invocation.</returns>
        public static object InvokeDelegate(this Type targetType, string delegateName, params object[] parameters)
        {
            return ((Delegate)targetType.GetField(delegateName).GetValue(null)).DynamicInvoke(parameters);
        }

        /// <summary>
        /// Invokes an instance delegate using supplied parameters.
        /// </summary>
        /// <param name="target">The object where the delegate belongs to.</param>
        /// <param name="delegateName">The field name of the delegate.</param>
        /// <param name="parameters">The parameters used to invoke the delegate.</param>
        /// <returns>The return value of the invocation.</returns>
        public static object InvokeDelegate(this object target, string delegateName, params object[] parameters)
        {
            return ((Delegate)target.GetType().GetField(delegateName).GetValue(target)).DynamicInvoke(parameters);
        }

        /// <summary>
        /// Adds a dynamic handler for a static delegate.
        /// </summary>
        /// <param name="targetType">The type where the delegate belongs to.</param>
        /// <param name="fieldName">The field name of the delegate.</param>
        /// <param name="func">The function which will be invoked whenever the delegate is invoked.</param>
        /// <returns>The return value of the invocation.</returns>
        public static Type AddHandler(this Type targetType, string fieldName,
            Func<object[], object> func)
        {
            return InternalAddHandler(targetType, fieldName, func, null, false);
        }

        /// <summary>
        /// Adds a dynamic handler for an instance delegate.
        /// </summary>
        /// <param name="target">The object where the delegate belongs to.</param>
        /// <param name="fieldName">The field name of the delegate.</param>
        /// <param name="func">The function which will be invoked whenever the delegate is invoked.</param>
        /// <returns>The return value of the invocation.</returns>
        public static Type AddHandler(this object target, string fieldName,
            Func<object[], object> func)
        {
            return InternalAddHandler(target.GetType(), fieldName, func, target, false);
        }

        /// <summary>
        /// Assigns a dynamic handler for a static delegate or event.
        /// </summary>
        /// <param name="targetType">The type where the delegate or event belongs to.</param>
        /// <param name="fieldName">The field name of the delegate or event.</param>
        /// <param name="func">The function which will be invoked whenever the delegate or event is fired.</param>
        /// <returns>The return value of the invocation.</returns>
        public static Type AssignHandler(this Type targetType, string fieldName,
            Func<object[], object> func)
        {
            return InternalAddHandler(targetType, fieldName, func, null, true);
        }

        /// <summary>
        /// Assigns a dynamic handler for a static delegate or event.
        /// </summary>
        /// <param name="target">The object where the delegate or event belongs to.</param>
        /// <param name="fieldName">The field name of the delegate or event.</param>
        /// <param name="func">The function which will be invoked whenever the delegate or event is fired.</param>
        /// <returns>The return value of the invocation.</returns>
        public static Type AssignHandler(this object target, string fieldName, Func<object[], object> func)
        {
            return InternalAddHandler(target.GetType(), fieldName, func, target, true);
        }

        private static Type InternalAddHandler(Type targetType, string fieldName,
            Func<object[], object> func, object target, bool assignHandler)
        {
            Type delegateType;
            var bindingFlags = BindingFlags.Public | BindingFlags.NonPublic |
                               (target == null ? BindingFlags.Static : BindingFlags.Instance);
            var eventInfo = targetType.GetEvent(fieldName, bindingFlags);
            if (eventInfo != null && assignHandler)
                throw new ArgumentException("Event can be assigned.  Use AddHandler() overloads instead.");

            if (eventInfo != null)
            {
                delegateType = eventInfo.EventHandlerType;
                var dynamicHandler = BuildDynamicHandler(delegateType, func);
                eventInfo.GetAddMethod(true).Invoke(target, new Object[] { dynamicHandler });
            }
            else
            {
                var fieldInfo = targetType.GetField(fieldName);
                                                    //,target == null ? BindingFlags.Static : BindingFlags.Instance);
                delegateType = fieldInfo.FieldType;
                var dynamicHandler = BuildDynamicHandler(delegateType, func);
                var field = assignHandler ? null : target == null
                                ? (Delegate)fieldInfo.GetValue(null)
                                : (Delegate)fieldInfo.GetValue(target);
                field = field == null
                            ? dynamicHandler
                            : Delegate.Combine(field, dynamicHandler);
                if (target != null)
                    target.GetType().GetField(fieldName).SetValue(target, field);
                else
                    targetType.GetField(fieldName).SetValue(null, field);
                    //(target ?? targetType).SetFieldValue(fieldName, field);
            }
            return delegateType;
        }

        /// <summary>
        /// Dynamically generates code for a method whose can be used to handle a delegate of type 
        /// <paramref name="delegateType"/>.  The generated method will forward the call to the
        /// supplied <paramref name="func"/>.
        /// </summary>
        /// <param name="delegateType">The delegate type whose dynamic handler is to be built.</param>
        /// <param name="func">The function which will be forwarded the call whenever the generated
        /// handler is invoked.</param>
        /// <returns></returns>
        public static Delegate BuildDynamicHandler(this Type delegateType, Func<object[], object> func)
        {
            var invokeMethod = delegateType.GetMethod("Invoke");
            var parameters = invokeMethod.GetParameters().Select(parm =>
                Expression.Parameter(parm.ParameterType, parm.Name)).ToArray();
            var instance = func.Target == null ? null : Expression.Constant(func.Target);
            var convertedParameters = parameters.Select(parm => Expression.Convert(parm, typeof(object))).Cast<Expression>().ToArray();
            var call = Expression.Call(instance, func.Method, Expression.NewArrayInit(typeof(object), convertedParameters));
            var body = invokeMethod.ReturnType == typeof(void)
                ? (Expression)call
                : Expression.Convert(call, invokeMethod.ReturnType);
            var expr = Expression.Lambda(delegateType, body, parameters);
            return expr.Compile();
        }
    }
} 
```

而且我还添加了一些代码来测试这些方法，当我分配回调委托时，我可以只使用简单的 lambda，但我宁愿使用“返回 true”定义，因为我设置了断点来检查函数是否被实际调用。

```
class TestClass 
{
    private void Test()
    {
        TestInstance();
        TestStatic();
    }

    private void TestInstance()
    {
        var eventClass = new EventClass();
        eventClass.InvokeDelegate("InstanceEventRaiseDelegate");
        eventClass.AddHandler("InstanceEvent", parameters =>
            {
                return true;
            });
        eventClass.AddHandler("InstanceEventRaiseDelegate", parameters =>
        {
            return true;
        });
        eventClass.InvokeDelegate("InstanceEventRaiseDelegate");

        eventClass.AssignHandler("InstanceEventRaiseDelegate", parameters =>
        {
            return true;
        });
        eventClass.InvokeDelegate("InstanceEventRaiseDelegate");
    }

    private void TestStatic()
    {
        typeof(EventClass).InvokeDelegate("StaticEventRaiseDelegate");
        typeof(EventClass).AddHandler("StaticEvent", parameters =>
        {
            return true;
        });
        typeof(EventClass).AddHandler("StaticEventRaiseDelegate", parameters =>
        {
            return true;
        });
        typeof(EventClass).InvokeDelegate("StaticEventRaiseDelegate");
        typeof(EventClass).AssignHandler("StaticEventRaiseDelegate", parameters =>
        {
            return true;
        });
        typeof(EventClass).InvokeDelegate("StaticEventRaiseDelegate");
    }

    public class EventClass
    {

        #region Instance

        public EventClass()
        {
            InstanceEventRaiseDelegate = OnInstanceEvent;
        }

        public Action InstanceEventRaiseDelegate;

        public event EventHandler InstanceEvent;

        public void OnInstanceEvent()
        {
            if (InstanceEvent != null)
                InstanceEvent(this, EventArgs.Empty);
        }

        #endregion

        #region Static

        static EventClass()
        {
            StaticEventRaiseDelegate = OnStaticEvent;
        }

        public static Action StaticEventRaiseDelegate;

        public static event EventHandler StaticEvent;

        public static void OnStaticEvent()
        {
            if (StaticEvent != null)
                StaticEvent(null, EventArgs.Empty);
        }

        #endregion
    }
} 
```

抱歉回复晚了，但您似乎可以在其他地方找到解决方案:)，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T20:31:30.723

我添加了一些代码来满足你的要求：

我将`getArgExpression`功能修改为此

```
// Returns a List of expressions that represent the arguments to be passed to the delegate
static IEnumerable<Expression> getArgExpression(ParameterExpression eventArgs, Type handlerArgType)
{
    if (eventArgs.Type == typeof(ExampleEventArgs) && handlerArgType == typeof(int))
    {
        //"x1.IntArg"
        var memberInfo = eventArgs.Type.GetMember("IntArg")[0];
        return new List<Expression> { Expression.MakeMemberAccess(eventArgs, memberInfo) };
    }
    if (eventArgs.Type == typeof(MousePositionEventArgs) && handlerArgType == typeof(float))
    {
        //"x1.X"
        var xMemberInfo = eventArgs.Type.GetMember("X")[0];
        //"x1.Y"
        var yMemberInfo = eventArgs.Type.GetMember("Y")[0];
        //"x1.Z"
        var zMemberInfo = eventArgs.Type.GetMember("Z")[0];
        return new List<Expression>
                   {
                       Expression.MakeMemberAccess(eventArgs, xMemberInfo),
                       Expression.MakeMemberAccess(eventArgs, yMemberInfo),
                       Expression.MakeMemberAccess(eventArgs, zMemberInfo),
                   };
    }
    throw new NotSupportedException(eventArgs + "->" + handlerArgType);
} 
```

调用函数保持不变，因为它有一个重载 for `IEnumerable<Expression>`。然后我添加了特定于您的 MousePosition 情况的 EventArgs

```
public class MousePositionEventArgs : EventArgs
{
    public float X { get; set; }
    public float Y { get; set; }
    public float Z { get; set; }
} 
```

此外，我在“EventProxy”中编写了一个新函数，它将处理具有 3 个相同类型参数的委托

```
// Void delegate with three parameters
static public Delegate Create<T>(EventInfo eventInformation, Action<T, T, T> lambdaDelegate)
{
    var handlerType = eventInformation.EventHandlerType;
    var eventParams = handlerType.GetMethod("Invoke").GetParameters();

    //lambda: (object x0, ExampleEventArgs x1) => d(x1.X,x1.Y,x1.Z)
    var parameters = eventParams.Select(p => Expression.Parameter(p.ParameterType, "x")).ToArray();
    var arg = getArgExpression(parameters[1], typeof(T));
    var body = Expression.Call(Expression.Constant(lambdaDelegate), lambdaDelegate.GetType().GetMethod("Invoke"), arg);
    var lambda = Expression.Lambda(body, parameters);
    return Delegate.CreateDelegate(handlerType, lambda.Compile(), "Invoke", false);
} 
```

现在我们可以使用以下代码轻松添加 MouseEvent 订阅

```
rightClickEvent.AddEventHandler(publisher, EventProxy.Create<float>(rightClickEvent, (t, u, v) => Console.Write(t + "x" + u + "x" + v + "!"))); 
```

在设计方面，这个解决方案并不是最好的，它使用了您展示的当前设计，但我对使用这种方法维护可扩展且易于遵循的架构持强烈的保留意见。我建议您创建一个适配器/转换器，它将从 EventArgs 类生成 lambda 参数，它们可以通过实现接口在 EventArgs 中轻松指定，这样 getArgExpression 将仅使用转换器生成适当的参数，而您可以摆脱很多 `if (Type == typeof(...))`。

我需要更多时间来制定该解决方案，但如果您真的感兴趣，我可以尝试将其写下来并发布。

# database-design - 在高度规范化的 SQL Server 数据库上使用 Microstrategy

> ID：15602750
> 
> 赞同：2
> 
> 时间：2013-03-24T19:10:00.403
> 
> 标签：database-design, ssas, olap, oltp, microstrategy

我对使用 Microstrategy 报告复杂的雪花 SQL Server 数据库相关的评论和见解感兴趣，该数据库由几个事务性规范化 (3NF) 表组成。

具体来说，在这样的环境中报告的最佳方法或挑战是什么？目前，有一些复杂的视图用作分析事实表，它们在几个事务表之间使用复杂的 SQL 连接。

事务表也有自己的维度，等等。这些视图似乎在 SSRS 中运行良好。但是，我读到 Microstrategy 并不适合针对如此复杂的数据库进行报告（不是因为工具的性能，而是因为在 Microstrategy 中构建这些指标时 SQL 的复杂性）。

在这样的环境中报告的最佳方法是什么？在当前数据仓库上构建 SSAS 多维数据集是个好主意吗？应该在数据库上进行报告，还是应该创建一个新的数据库或集市，专门供 Microstrategy 使用，只有基本报告的相关视图？

任何建议或意见表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-24T15:24:10.003

我不知道这是否仍然是一个活跃的线程，但这里有一些想法。

在我看来，事务数据库并不是报告 BI 的最佳选择。关系模型适用于日常报告和运营报告。

但是，一旦您决定生成 BI 报告，您就需要为您的数据仓库使用维度模型。我通过艰苦的经历学到了这一点。这不仅适用于 MicroStrategy，也适用于任何希望进行 BI 报告的软件产品。

这种说法有很多原因。我不会详述所有的原因。您最好的选择是获得 Kimbal 关于维度建模的任何优秀书籍。

我曾尝试使用几个不同的报告包，包括 MicroStrategy，而决定您的项目能否成功的最大决定因素是您的 BI Warehouse 是否具有良好的维度数据库设计。这当然意味着使用某种 ETL 过程将关系数据转换为维度数据。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-12T23:19:55.717

如果你知道你在 SQL 端做什么，并且知道 MSTR 生成的 SQL 需要如何改变以避免隐藏连接，那么你可以使用一个逻辑表，添加到相关的属性形式中，以影响生成的 SQL直接地。查找逻辑视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:58:54.100

多年前我使用过微观策略工具。我的评论可能不是最新的。在当时，它是对抗星型模式的完美 rolap 工具。它可以生成许多优化的 SQL 语句来提供结果集。但是它在第 3 范式 db 上运行不正常。

在第三种范式数据库中，我建议使用替代工具，例如可以处理任何类型数据库结构的业务对象。我已经在一个再保险 OLTP 系统之上看到了一个业务对象宇宙，该系统具有 5000 多个第 3 范式表/视图，并且运行良好。但是，当您开始使用第 3 范式时，很难为所有可能的查询提供正确的结果，而且与非规范化星型模式相比，它会慢很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T13:03:49.367

无论您使用哪种报告工具，如果您在后台有复杂的雪花连接，您都会遇到性能问题。这是因为每个运行报表的用户都会导致运行相同的 SQL - 一些工具有巧妙的缓存，但是当您有用户选择的提示时，这就会失败。

只要您的用户对此感到满意，SSAS 多维数据集就是一个不错的选择，但理想的方法是为您的数据（您可以将其称为迷你数据集市）设计用于您的报告的聚合表。

仅当您有足够的时间来刷新聚合表时，这才有效 - 如果您的用户需要实时数据，这并不是一个简单的选择，但是您可以安排聚合过程以设定的时间间隔运行。

这样做的真正美妙之处在于，您的聚合可以根据您的报告进行定制，并且您可以获得惊人的性能。

# css - Wordpress CSS - 两个布局问题

> ID：15602756
> 
> 赞同：0
> 
> 时间：2013-03-24T19:10:36.603
> 
> 标签：css, layout, scroll, background-color

1.  为什么我有横向滚动:-( [http://www.startingpointstables.com/riding-lessons/](http://www.startingpointstables.com/riding-lessons/)

和

1.  为什么主页上的缩略图在 FF 中的容器 div 下？ [http://www.startingpointstables.com](http://www.startingpointstables.com)

最后

1.  当您将浏览器的大小调整到 700 px 范围并且侧边栏下降到内容下方时……小部件 div 下方的“白框”在哪里？ [http://www.startingpointstables.com/riding-lessons/](http://www.startingpointstables.com/riding-lessons/)

:-( 为什么在自己的网站上工作比在别人的网站上工作更令人沮丧 1000 倍？我的事情进展顺利，我不知道我到底做了什么，但一切都变成了梨形。:-\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:19:40.357

尝试为您创建的 div 提供一些最小高度，如下所示 -

```
div{min-height:500px;} 
```

# android - SRC_IN xfermode 绘图操作的目标区域如何确定？

> ID：15602757
> 
> 赞同：1
> 
> 时间：2013-03-24T19:10:38.143
> 
> 标签：android, graphics, 2d

我正在编写一个涉及一些 2D 绘图操作的 Android 应用程序。我正在尝试使用 saveLayer 和 xfermode SRC_IN 来绘制 2 个图像的交集。如果我不旋转任何东西，它似乎工作正常，但如果我旋转其中一个图像，它似乎将旋转矩形之外的像素视为不透明（交叉点的一部分），或者更有可能，不绘图操作的一部分（不受放置在其顶部的透明像素的影响）。

下面是我正在谈论的图片。底部附近的“5”和“3”图像通过在“5”上使用 xfermode SRC_IN 绘制“3”图像（旋转）来“相交”。我已经在渐变背景上显示了所有三个图像，以帮助可视化透明度。

经过一番思考，我怀疑“3”的剪切矩形之外的区域没有被视为不透明，而只是不被视为绘图操作的一部分。有趣的是，如果我将该层标记为软件层而不是硬件层，则数字“5”会显示在背景中，而不仅仅是 3 的剪切矩形之外的部分。我不明白这一点。

受 SRC_IN 绘图操作影响的区域是如何确定的？（通常没关系，但 SRC_IN 的一个独特功能是它必须根据正在绘制的图像中透明的内容将不透明像素变为透明，因此绘制的整体大小很重要，即使它通常不会' t 是。）如何使 3 的绘制区域之外的像素被视为不属于交叉点的一部分？绘制 3 时是否需要放大活动的剪切矩形？

![绘制 5 和 3 的交点](../Images/c982773c8f9186bd1caa491edacca2bd.png)

# iphone - ExtAudioFileWriteAsync 返回的 kExtAudioFileError_AsyncWriteTooLarge(-66569) 是什么意思？

> ID：15602763
> 
> 赞同：3
> 
> 时间：2013-03-24T19:11:32.940
> 
> 标签：iphone, ios, ipad, core-audio

我找不到任何关于`OSStatus = -66569`返回的信息`ExtAudioFileWriteAsync`，除了它的枚举标签：`kExtAudioFileError_AsyncWriteTooLarge`。

现在我问的不是为什么会出现这个错误，而是它的真正含义是什么？因为我得到了这个状态，即使我尝试传递任何数量超过零的数据包......

例如：`ExtAudioFileWriteAsync(MyExtAudioFileRef, 1, &MyAudioBufferList);`

提前非常感谢！=)

# laravel - 设置 laravel 4

> ID：15602768
> 
> 赞同：0
> 
> 时间：2013-03-24T19:11:54.177
> 
> 标签：laravel, composer-php, laravel-4

我是 laravel 的新手，我正在尝试设置 Laravel 4，使用（有点过时）[http://net.tutsplus.com/tutorials/php/how-to-setup-laravel-4/](http://net.tutsplus.com/tutorials/php/how-to-setup-laravel-4/)

我在全球范围内设置了作曲家。当我运行时：

```
$ git clone git://github.com/laravel/framework.git l4
$ cd l4
$ composer install 
```

..all 似乎安装成功（我没有收到任何错误），但不存在应用程序目录：

```
drwxr-xr-x   3 dirkpostma  staff    102 Mar 24 19:54 build
-rw-r--r--   1 dirkpostma  staff   2794 Mar 24 19:54 composer.json
-rw-r--r--   1 dirkpostma  staff  33306 Mar 24 19:55 composer.lock
-rw-r--r--   1 dirkpostma  staff    847 Mar 24 19:54 phpunit.xml
-rw-r--r--   1 dirkpostma  staff   8677 Mar 24 19:54 readme.md
drwxr-xr-x   3 dirkpostma  staff    102 Mar 24 19:54 src
drwxr-xr-x  27 dirkpostma  staff    918 Mar 24 19:54 tests
drwxr-xr-x  13 dirkpostma  staff    442 Mar 24 19:55 vendor 
```

这个对吗..？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T07:02:08.677

您正在克隆错误的存储库。

```
git clone -b develop git://github.com/laravel/laravel.git myapp
cd myapp
curl -sS https://getcomposer.org/installer | php
composer.phar install 
```

读：

## -[安装和更新 Laravel 4](http://niallobrien.me/2013/03/installing-and-updating-laravel-4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T01:43:46.873

做这个：

```
git clone -o laravel -b develop https://github.com/laravel/laravel.git project-name

cd project-name

php composer.phar install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:29:14.970

回答我自己：

使用的 git URL 错误。您可以：

1.  遵循[这些说明](http://four.laravel.com/docs/installation)。这使用（我猜）每隔几天构建的 zip 存档。

2.  克隆 laravel 的开发分支，然后运行 ​​composer install：

    $ git clone -b 开发 git@github.com:laravel/laravel.git

    $作曲家安装

# java - 使用递归方法查找所有路径

> ID：15602769
> 
> 赞同：4
> 
> 时间：2013-03-24T19:12:20.367
> 
> 标签：java, recursion

我有一个问题，我正在尝试练习，我无法弄清楚如何为其编写递归算法。我有一个布局如下的文件：

```
4
(())
()((
(()(
)))) 
```

这个问题来自 USACO。[http://www.usaco.org/index.php?page=viewproblem2&cpid=189](http://www.usaco.org/index.php?page=viewproblem2&cpid=189)

问题陈述复制粘贴如下：

> 尽管 Bessie the cow 发现每一串平衡的括号在美学上都令人愉悦，但她特别喜欢她称之为“完美”平衡的字符串——由长度相同的 ('s 后跟 )'s 字符串组成。例如：
> 
> (((())))
> 
> 一天穿过谷仓时，Bessie 发现地面上有一个 N x N 的马蹄铁网格，每个马蹄铁的方向看起来像 ( 或 )。从这个网格的左上角开始，Bessie 想四处走动捡起马蹄铁，这样她捡起的绳子就完美平衡了。 **请帮助她计算她能得到的最长的完全平衡的弦的长度。**
> 
> 在每一步中，Bessie 都可以向上、向下、向左或向右移动。她只能移动到包含马蹄铁的网格位置，当她这样做时，她会拿起马蹄铁，这样她就不能再回到同一位置（因为它现在没有马蹄铁）。她首先拿起网格左上角的马蹄铁。Bessie 只捡起一系列形成完美平衡的弦的马蹄铁，因此她可能无法捡起网格中的所有马蹄铁。

我在试图弄清楚如何创建一个递归地找到最佳路径的算法时遇到了问题。谁能指出我正确的方向，或者有任何我可以看的例子来获得一个想法？我一直在搜索，但我发现的所有示例都是从一个点到另一个点，而不是在矩阵/数组中找到所有可能的路径。

```
package bessiehorseshoe;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class BessieHorseShoe {

    int answer = 0;
    int matrixSize = 0;

    public static void main(String[] args) throws IOException {
        BessieHorseShoe goBessieGo = new BessieHorseShoe();
    }

    BessieHorseShoe() throws IOException {
        int rowFilled = 0;
        int currentColumn = 0;
        int character = 0;

        BufferedReader inputFile = new BufferedReader(new FileReader("hshoe.in"));
        String inputLine = inputFile.readLine();
        matrixSize = Character.digit(inputLine.charAt(0), 10);
        System.out.println(matrixSize);

        char[][] pMatrix = new char[matrixSize][matrixSize];

        while ((character = inputFile.read()) != -1) {
            char c = (char) character;
            if (c == '(' || c == ')') {
                pMatrix[rowFilled][currentColumn] = c;
                System.out.print(pMatrix[rowFilled][currentColumn]);
                rowFilled++;
                if (rowFilled == matrixSize) {
                    currentColumn++;
                    rowFilled = 0;
                    System.out.println();
                }
            }
        }
        matchHorseShoes(pMatrix);
    }

    public int matchHorseShoes(char[][] pMatrix) {
        if (pMatrix[0][0] == ')') {
            System.out.println("Pattern starts with ')'. No possible path!");
            return 0;
        }
        System.out.println("Works");
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T01:09:33.223

以下算法将解决您的问题。您还可以使用 memoization 来加快运行时间。这个想法很简单：

*   开括号增加开括号的计数；
*   如果你用星号关闭，你必须继续关闭并增加右括号；
*   如果您正在关闭并且右括号的数量大于或等于打开的括号的数量，请停止并返回此值。

所有其余的代码都是语法糖。（从返回的访问项目列表中获得您想要的输出是微不足道的）。

```
import java.util.LinkedList;
import java.util.List;

public class USACO {

static class Path {

    public List<String> items;
    public int value;

    public Path() {
        this.items = new LinkedList<String>();
        this.value = 0;
    }

}

public static void main(final String[] args) {
    final int n = 5;
    final String[][] input = new String[n][n];
    // Create a random input of size n
    for (int y = 0; y < n; y++) {
        for (int x = 0; x < n; x++) {
            input[y][x] = Math.random() < 0.5 ? "(" : ")";
            System.out.print(input[y][x] + " ");
        }
        System.out.println();
    }
    final Path bestPath = longestPath(n, input, 0, 0, 0, 0, input[0][0] == "(");
    System.out.println("Max:" + bestPath.value + "\n" + bestPath.items);
}

public static Path longestPath(final int n, final String[][] input, final int x, final int y, int numberOpened, int numberClosed,
        final boolean wasOpening) {
    if (input == null) {
        return new Path();
    } else if (!wasOpening && (numberClosed >= numberOpened)) { // Reached a solution
        final Path path = new Path();
        path.value = numberOpened;
        path.items.add("(" + x + "," + y + ")");
        return path;
    } else if ((x < 0) || (y < 0) || (x >= n) || (y >= n)) { // Out of bound
        return new Path();
    } else if (input[y][x] == "") { // Already visited this item
        return new Path();
    } else {
        final String parenthese = input[y][x];
        // Increment the number of consecutive opened or closed visited
        if (parenthese.equals("(")) {
            numberOpened++;
        } else {
            numberClosed++;
        }
        input[y][x] = ""; // Mark as visited
        Path bestPath = new Path();
        bestPath.value = Integer.MIN_VALUE;
        // Explore the other items
        for (int dy = -1; dy <= 1; dy++) {
            for (int dx = -1; dx <= 1; dx++) {
                if (((dy == 0) || (dx == 0)) && (dy != dx)) { // go only up, down, left, right
                    final boolean opening = (parenthese == "(");
                    if (wasOpening || !opening) {
                        // Find the longest among all the near items
                        final Path possiblePath = longestPath(n, input, x + dx, y + dy, numberOpened, numberClosed, opening);
                        if (possiblePath.value > bestPath.value) {
                            bestPath = possiblePath;
                            bestPath.items.add("(" + x + "," + y + ")");
                        }
                    }
                }
            }
        }
        input[y][x] = parenthese; // mark as not visited
        return bestPath;
    }
} 
```

}

# task-parallel-library - 任务返回中心方法的用例

> ID：15602772
> 
> 赞同：2
> 
> 时间：2013-03-24T19:12:35.043
> 
> 标签：task-parallel-library, signalr

从 SignalR 集线器方法返回 Task 类型可以获得什么，这样做的用例是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T20:57:33.043

如果您在 Hub 方法内部执行异步操作，例如 DB 查询或 Web 请求，则使用[async/await 模式](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)而不是阻塞会更有效。SignalR 将等待`Task`从 Hub 方法返回的 s 完成，然后再将解包结果发送回调用客户端。SignalR 还将确保在返回`Task`完成之前不处置您的集线器。

如果您还没有使用 .NET 4.5，如果您不使用返回库，则可以使用`Task.ContinueWith`或创建自己的`Task`s 。`TaskCompletionSource``Task`

# linux - 如何使用自己的编程语言利用 VDSO 对象？

> ID：15602773
> 
> 赞同：9
> 
> 时间：2013-03-24T19:12:36.733
> 
> 标签：linux, system-calls, systems-programming

最近的 Linux 内核（至少在 amd64 上）提供了一个名为的魔术对象文件，该文件`linux-vdso.so.1`将系统调用接口抽象到内核，允许内核选择最佳调用约定。如果你用 C 编写代码，glibc 会自动使用这个对象。

现在，如果我想在不使用 glibc 的情况下编写程序，我该如何使用这个对象？它提供的接口是否记录在某处？调用约定呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T19:51:18.807

这取决于您的实现是否将*C*接口用于低级实用程序。

如果您的语言实现无需通过*C*包装器即可直接访问系统调用，则您不需要使用 VDSO（例如，您可以生成适当的`SYSENTER`机器指令来执行系统调用），但您可以决定使用 VDSO，然后利用其中。在这种情况下，您的语言甚至不需要遵循所有 ABI 约定，只需遵循内核的约定。（例如，您不需要 ABI 在寄存器上提供调用者安全调用安全区分，甚至可以避免使用任何堆栈）。

甚至没有使用的语言实现的一个例子`libc.so`是[Bones Scheme](http://www.call-with-current-continuation.org/bones/)。你可以找到其他几个。

我对 VDSO 的理解是，它是由内核提供的一种抽象，用于抽象出各种 x86 处理器系列之间在实现系统调用时的各种小差异（与用户空间 -> 内核转换相关）。如果您选择了特定的处理器目标，则不需要 VDSO，而且您总是可以避免使用它。

AFAIU，VDSO 是一个 ELF 共享对象，位于（在我的 Debian/AMD64 上，带有最近编译的 3.8.3 内核）中`ffffffffff600000-ffffffffff601000`；准确检查`cat /proc/self/maps`它的位置）。因此，您只需要了解 ELF 共享对象的组织结构并从中检索符号即可。看到[这个](http://blogs.igalia.com/aperez/2009/01/13/the-story-of-linux-gatevdsoso/)&[那个](http://www.trilithium.com/johan/2005/08/linux-gate/)链接。VDSO 使用 x86-64 ABI 规范中记录的 C 调用约定。

^(也就是说，如果您从进程空间中提取 VDSO 并将其写入磁盘文件，则结果是格式良好的 ELF 共享对象)

[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)是一种有据可查的格式。[x86-64 ABI 约定](http://en.wikipedia.org/wiki/X86_calling_conventions#System_V_AMD64_ABI)也是如此 （它精确定义了 C 调用约定，以及进程的映像如何启动。另请参见[execve(2)](http://man7.org/linux/man-pages/man2/execve.2.html)）手册页，当然还有内核文档，所以我不明白你有什么问题。我同意理解 ELF 需要时间（我 10 年前做过，但我的记忆已经生疏了）。另请阅读`<elf.h>`您机器上的头文件。

例如; 正在运行（在`zsh`64 位 Debian x86-64 下）

```
 % file $(which sash)
 /bin/sash: ELF 64-bit LSB executable, x86-64, version 1 (SYSV),
      statically linked, for GNU/Linux 2.6.26,
      BuildID[sha1]=0x0347fcc08fba2f811f58af99f26111d0f579a9f6, stripped

 % ldd $(which sash)
 not a dynamic executable

  % sash
  Stand-alone shell (version 3.7)
  > ps |grep sash
  21635 pts/3    00:00:00 sash
  > cat /proc/21635/maps
  00400000-004da000 r-xp 00000000 08:01 4985590                            /bin/sash
  006da000-006dc000 rw-p 000da000 08:01 4985590                            /bin/sash
  006dc000-006e1000 rw-p 00000000 00:00 0 
  017e3000-01806000 rw-p 00000000 00:00 0                                  [heap]
  7fe4950e5000-7fe4950e7000 rw-p 00000000 00:00 0 
  7fff3f130000-7fff3f151000 rw-p 00000000 00:00 0                          [stack]
  7fff3f173000-7fff3f175000 r-xp 00000000 00:00 0                          [vdso]
  ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall] 
```

另请参阅[此答案](https://stackoverflow.com/a/15471044/841108)。

您可能希望在运行时内部有一个能够简单解析 VDSO 的动态链接器的最小版本。您当然想了解进程启动的确切状态，尤其是`auxv`辅助向量的作用（我真的忘记了这些细节，但我记得它们很重要）。参见例如[这篇文章](http://lwn.net/Articles/519085/)

实际上，可靠地启动您的运行时可能比 VDSO 问题更难。

您可能还想阅读[linux 程序集 howto](http://asm.sourceforge.net/howto/Assembly-HOWTO.html)，它也解释了一些事情（但更多关于 x86 的内容比 x86-64 更多）

[顺便说一句， http](http://musl-libc.org/) : //musl-libc.org/ 的代码（这是一个替代 libc）更容易阅读和理解（你会很容易地了解他们如何进行动态链接、pthreads 等。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T20:55:14.177

我发现 Linux 内核树中的这些文件很有帮助：

*   [`Documentation/ABI/stable/vdso`](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/ABI/stable/vdso?id=v3.8)（什么是 vDSO 对象？）
*   [`Documentation/vDSO/parse_vdso.c`](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/vDSO/parse_vdso.c?id=v3.8)（vDSO 对象的参考解析器）

vDSO对象是一个虚拟的动态共享对象，在linux下总是映射到一个amd64进程的地址空间。它可用于实现快速系统调用。要访问 vDSO 对象中的函数，您需要

*   定位对象
*   从符号表中提取地址

这两件事都可以通过[CC0](http://creativecommons.org/about/cc0)许可的参考实现[parse_vdso.c](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/vDSO/parse_vdso.c?id=v3.8)来完成。

# java - 日期间隔应该更大

> ID：15602776
> 
> 赞同：4
> 
> 时间：2013-03-24T19:12:40.810
> 
> 标签：java

我有： startDate = 24.03.2013 21:01:20 endDate = 24.03.2013 21:01:40

我在我的代码中

```
Date d = new Date(endDate.getTime()-startDate.getTime) 
```

和 d = 01.01.1970 02:00:20

如果需要 2 小时，则间隔应该是 20 秒，但我得到 2 小时 20 秒。为什么会发生？该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T02:11:17.030

你正在做的是`new Date("difference between two dates")`在 1970 年 1 月 1 日获得时间。但是在您的语言环境中，01.01.1970 生效的时区偏移量是多少？我猜+02小时。

您还应该打印结果`new Date(0L)`并比较差异。或者确保在显示日期时将时区设置为 UTC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:36:11.100

我不知道你在那里做了什么，但我得到了正确的结果：

[http://ideone.com/dTbugh](http://ideone.com/dTbugh)

```
 DateFormat df = new SimpleDateFormat("dd.MM.yyyy HH:mm:ss");
    Date startDate = df.parse("24.03.2013 21:01:20");
    Date endDate = df.parse("24.03.2013 21:01:40");
    Date d = new Date(endDate.getTime()-startDate.getTime());
    System.out.print(d); 
```

输出：1970 年 1 月 1 日星期四 00:00:20 GMT

# php - 使用 ID 在 codeigniter 中动态加载视图

> ID：15602779
> 
> 赞同：0
> 
> 时间：2013-03-24T19:13:09.737
> 
> 标签：php, codeigniter

我正在开发一个项目，用户可以上传他用于前端 Web 开发的文件，并展示他所做的工作在浏览器中的外观。为此，我要求用户使用名为 test.html 的 html 文件上传项目。我为此目的使用了codeigniter。

我已经完成了上传过程并在表格中写入了信息，但是我被困在如何在文件完成上传后提供链接......即我有一个上传控制器，如下所示：

```
<?php class Main extends CI_Controller { 
  //{construct and all the parts} 
//upload function
function site_pages(){
 $this->load->view('header'); $this->load->view('nav'); $this->load->view('test.html');
      }
function do_upload(){
  .....code for file upload....
...update the database with the folder_id...
 } 
```

但是，完成此操作后，我需要向用户提供链接，即表单

```
 <a href="<?php echo base_url();?>/main/site_pages/folder_id/test.html" > 
```

我被困在如何以这种形式生成这个 id 以及如何在控制器的特定视图中加载 test.html 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T04:52:21.080

您可以为此目的构建一个控制器并使用该控制器来读取上传的 html 文件。读取文件后，您可以从控制器中输出它

您可以将文件名映射到一个 id 并使用此 id 来标识每个文件。您可以将 html 文件从 form.html 重命名为 2335332.html，然后使用此 id 作为参数从目录中读取文件。

这是读取文件的方法。

```
// segment 3 will have parameter passed: 2335332
$file_name=$this->uri->segment(3)."html";

// you should check in this point weather this file exists.

$this->load->helper(‘file’);

//read a file
$data = read_file('./path_to/to/'.$file_name.'.html');
// do javascript/php/other cleanup on $data 
```

此时你有html代码，你可以输出它

```
$this->output->set_output($data); 
```

但我应该警告你，你应该清理上传的 html 文件以获取可能的 javascript / php 代码，因为用户可能会破坏你的系统。

祝你好运。

**编辑**

我认为您可以解决这个问题，但只是为了让您知道，您向用户提供如下链接

```
<a href="<?php echo base_url();?>user/site_pages/2335332">Link to your page</a> 
```

假设您的代码位于控制器的 site_pages() 函数中：

# php - 从数组中删除搜索结果

> ID：15602780
> 
> 赞同：1
> 
> 时间：2013-03-24T19:13:09.983
> 
> 标签：php, arrays, multidimensional-array

我有一段 PHP 代码生成一组搜索结果（来自 Facebook API 搜索）。

是否可以包含一个超链接/按钮，单击该超链接/按钮会从数组中删除该项目并刷新以显示新数组？

我收集到我将使用 unset() 删除该项目。

这是我的代码：

```
foreach ($search['data'] as $key => $list) {
   echo "<li><dt>Name:</dt>" . "<dd>" . $list['name'] . "</dd>\n";

   $gender = $facebook->api('/'.$list['id']);
   echo "<dt>Gender:</dt>" . "<dd>".ucfirst($gender['gender'])."</dd>\n";
   echo "   <a href='fb2.php?fbid=" .$list['id']. "'><img src='https://graph.facebook.com/".$list['id']."/picture?type=normal' /></a>\n";
   echo "<a href='remove.php?id= ????? ";
   echo "</li>";
    } 
    echo"</ol>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:45:56.883

我知道你没有提到 Javascript 作为一个选项，但如果它只在前端，我会使用 jQuery，如下所示：

在 HTML 文件中：

```
<script url="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>

<ol id="facebook-tags">

<?php
    foreach ($search['data'] as $key => $list) {
        echo "<li><dt>Name:</dt>" . "<dd>" . $list['name'] . "</dd>\n";
        $gender = $facebook->api('/'.$list['id']);
        echo "<dt>Gender:</dt>" . "<dd>".ucfirst($gender['gender'])."</dd>\n";
        echo "   <a href='fb2.php?fbid=" .$list['id']. "'><img src='https://graph.facebook.com/".$list['id']."/picture?type=normal' /></a>\n";
        echo "<a class="remove">Remove</a>";
        echo "</li>";
    } 
?>

</ol>

<script>
    $('#facebook-tags').delegate('a.remove', 'click', function() {
        $(this).closest('li').remove();
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T19:55:00.180

chrislondon 为您提供了如何在客户端删除的建议。但是如果你想在 PHP 端删除一些，可以这样做：

```
foreach ($search[ 'data' ] as $key => $list ) {
    if( $_GET[ 'id' ] == $key ){
//use unset only if you store $search[ 'data' ] in session or some, to remove it totally from results
//        unset( $search[ 'data' ][ $key ] );
        continue;
    }

    echo "<li><dt>Name:</dt>" . "<dd>" . $list[ 'name' ] . "</dd>\n";

    $gender = $facebook -> api( '/' . $list[ 'id' ] );
    echo "<dt>Gender:</dt>" . "<dd>" . ucfirst( $gender[ 'gender' ] ) . "</dd>\n";
    echo "<a href='fb2.php?fbid=" . $list[ 'id' ] . "'>
        <img src='https://graph.facebook.com/" . $list[ 'id' ] . "/picture?type=normal' /></a>\n";
    echo "<a href='remove.php?id=$key ";
    echo "</li>";
}
echo"</ol>"; 
```

# inheritance - Coffeescript 继承和事件处理程序：为什么上下文发生了变化？

> ID：15602783
> 
> 赞同：0
> 
> 时间：2013-03-24T19:13:27.250
> 
> 标签：inheritance, coffeescript, event-handling

我有一个咖啡脚本类“OutlayForm”和一个子类“EditOutlayForm”。在超类中，事件处理程序 (convert_amount) 绑定到输入字段。当创建超类的对象时一切正常，但是当创建子类的对象并触发事件处理程序时，似乎上下文丢失了。

一个错误告诉我在 convert_amount @amount_field 是“未定义”，并且 console.log(this) 给了我输入字段而不是对象，尽管我使用了双箭头 (=>)

我的代码：

```
class window.OutlayForm
  ...

  init: (@wrapper) =>
    @bind_buttons()

  bind_buttons: =>
    @amount_field = @wrapper.find('input[name="outlay[amount]"]')
    @amount_field.on('keydown', @convert_amount)

  convert_amount: =>
    #some converting on @amount_field

class window.EditOutlayForm extends window.OutlayForm
  constructor: (@outlay) ->
    @super

  bind_buttons: =>
    super

  #ajax callback:
    @wrapper = $('<div class="edit_outlay_form"></div>')
    @outlay.before(@wrapper.append(data))
    @bind_buttons() 
```

有人知道我做错了什么吗？

编辑：

首先：我使用 Rails 3.2.12，带有 coffee-rails gem (3.2.2) 和 jquery-rails gem。

我找到了错误的根源，但无法解决我的问题。

[http://jsfiddle.net/fYDJD/7/](http://jsfiddle.net/fYDJD/7/)

如果我运行这个小提琴，控制台会向我显示“sub”，正如我所料。但是如果我在我的服务器上运行同样的代码，我会得到“超级”。我所做的一切都是为了打电话

```
new D 
```

在 $.ready() 函数中。错误是否有可能来自该错误，或​​者它肯定来自我的咖啡脚本版本？（我无法改变，因为它已经是最新的 rails gem）

# ios - 拖动底部子视图之一时平滑更新顶部子视图（iOS）

> ID：15602785
> 
> 赞同：1
> 
> 时间：2013-03-24T19:13:30.107
> 
> 标签：ios, ipad

我的 iPad 应用程序中有很多小的可拖动子视图。我还有一个具有清晰颜色背景的顶级非透明子视图。它有屏幕尺寸。用户交互被禁用。在拖动底部子视图之一时，我需要重绘该顶部子视图。我在那个顶部子视图上画了一些线。它们必须根据当前底部子视图位置重新绘制。我想实现平滑拖动，但目前我做不到。目前，我在底部子视图的 panMoved 中发送了很多 setNeedsDisplayInRect 到顶部视图。如何更好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:52:11.940

最好使用顶部子视图的 CALayer 进行绘图。它更有效。

# c - If-else 中的 C 语言中的奇怪语法错误

> ID：15602787
> 
> 赞同：6
> 
> 时间：2013-03-24T19:13:40.363
> 
> 标签：c, if-statement, syntax-error

我正在编写一个apache模块。在编程过程中，我正在打开一个文件，但在编译时出现错误。

```
32\. static int wqb_handler(request_rec* req){
33\. // Open and read our requested file
34\. const char* p_file = req->filename;
35\. 
36\. FILE* req_file;
37\. if((req_file = fopen(p_file,"r"))==NULL){
38\.    return HTTP_NOT_FOUND;
39\. }else{
40\.     fclose(req_file);
41\. }
42\. // Required variables
43\. const char* content_type_a = "text/html";
44.
45\. // Set Headers
46\. ap_set_content_type(req,content_type_a);
47\. if(req->header_only){
48\.    return OK;
49\. }
50\. 
51\. 
52\. return OK;
53\. } 
```

问题出在那个函数上，我正在检查那是问题所在，我认为问题在于 if-else 语句，代码是用 C 编写的，而不是用 C++ 编写的。

这些是错误：

```
C:/wqb/wqb1_apache2.c(43) : error C2143: syntax error : missing ';' in front of 'const'
C:/wqb/wqb1_apache2.c(46) : error C2065: 'content_type_a' : undeclarated identifier 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-24T19:16:34.217

如果这是 C，并且您不是在 C99 模式下编译（即使用 C89 编译器），请记住所有声明必须直接跟在块的开头之后。混合声明和代码是从 C++ 导入的 C99 功能。

看来您正在使用 C 模式下的 Micrososft Visual Studio 编译器进行编译。请注意，William H. Gates III 选择完全忽略 C99，并拒绝在第三个千年更新 C 实现。:-)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-24T19:45:53.493

*分享您的问题的解决方案。这将有助于其他人更快地理解它。*

提高您对*运算符*和*评论*的了解。

您在运算符中编写了太多不必要`{`的内容`}`。例如，您的代码：

```
for( i = 0; i < N; i++ )
{
   printf("Hello");
} 
```

更简单/清晰的代码：

```
for( i = 0; i < N; i++ )
   printf("Hello"); 
```

..................................................... …………………………………………………………………………………………………………

您的代码（原始代码）可能看起来如此（**它更易于阅读和理解**。）：

```
static int wqb_handler(request_rec* req)
{
    /* Open and read our requested file */
    const char* p_file = req -> filename;

    FILE* req_file;
    if((req_file = fopen(p_file,"r"))==NULL)
       return HTTP_NOT_FOUND;

    else
       fclose(req_file);

    /* Required variables */
    const char* content_type_a = "text/html";

    /* Set Headers */
    ap_set_content_type(req,content_type_a);

    if(req->header_only)
       return 0;

return OK;
} 
```

# bash - 计算 bash 数组中不以特定字符开头的元素

> ID：15602789
> 
> 赞同：0
> 
> 时间：2013-03-24T19:13:49.467
> 
> 标签：bash

我正在尝试编写一个bash脚本来计算数组中不以字符'-'开头的所有元素（它是计算参数而不是`words`数组中的选项的shell完成脚本的一部分）。与我正在尝试编写的 Python 等效的是：

```
len([word for word in words if not word.startswith("-")]) 
```

我编写了一些运行良好的代码，但由于我对 bash 脚本非常陌生，我确信可以进行一些改进，我想知道我是否错过了一些不涉及太多的更好的实现方法代码行，也许看起来更像 Python 实现？

这就是我所拥有的：

```
words=('a' 'b' '-c' 'd' '--foo' 'e')
argcount=0
for word in ${words[@]}
do
    if [[ $word =~ ^[^-].*$ ]] ; then
        ((argcount++))
    fi
done
echo $argcount 
```

欢迎任何改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:25:32.577

我会用

```
for word in "${words[@]}" 
```

即使某些参数包含空格，它也应该有效。此外，您可以使用普通模式匹配来代替正则表达式：

```
if [[ $word != -* ]] ; then 
```

除此之外，我什么也没看到。Bash 不如 Python 或 Perl 简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T20:14:10.850

您还可以使用`grep`为您计算行数：

```
$ words=('a' 'b' '-c' 'd' '--foo' 'e')
$ argcount=$( printf "%s\n" "${words[@]}" | grep -vc "^-" ) 
```

（假设任何单词 in`words`都不能包含嵌入的换行符，这似乎是一个足够安全的假设。）

如果您必须使用 pure `bash`，并且不想像 choroba 建议的那样使用模式，您可以否定正则表达式匹配的结果：

```
if ! [[ $word =~ ^- ]]; then
    (( argcount++ ))
fi 
```

# signalr - SignalR - 检测服务器端连接的传输方法

> ID：15602794
> 
> 赞同：17
> 
> 时间：2013-03-24T19:14:06.690
> 
> 标签：signalr

您能否在服务器端辨别给定 SignalR 连接使用哪种传输方法？（WebSockets、SSE、长轮询等？​​）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-24T20:39:35.693

在集线器内，您可以通过查看请求的查询字符串来检测正在使用的传输：

```
Context.QueryString["transport"] 
```

这将评估为“webSockets”、“serverSentEvents”、“foreverFrame”或“longPolling”。

理想情况下，您的代码不应依赖于正在使用的传输，因为 SignalR 为您抽象了它。但是，这对于日志记录等可能很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-11T08:28:47.670

对于 ASP.NET SignalR 2.0 版，您可以使用`$.connection.hub.transport.name`打印出传输的名称。它将评估为“serverSentEvents”和其他传输。

# jquery - jquery 1.7.1 与 jquery.min 冲突

> ID：15602801
> 
> 赞同：0
> 
> 时间：2013-03-24T19:14:45.740
> 
> 标签：jquery

嗨，我有两个脚本，一个新闻代码和评级新闻代码用户 jquery.min 和它自己的 js 来查询数据库。评级脚本需要 jquery.1.7.1 我尝试使用 noConflict 解决方案，但它不起作用，其中一个脚本无法加载。

我尝试使用不同版本的 jquery.1.3.1，它显示评级脚本并部分加载新闻，但新闻只滚动几行并停止。

新贴纸和评分代码

```
 {literal}
<script type="text/javascript">
    $(function () {
        $('#js-news').ticker({
            speed: 0.10,
            pauseOnItems: 2000,
            controls: false,
            fadeInSpeed: 600,
            titleText: 'Our Latest News'
        });
    });
</script>
<script type="text/javascript">

  jQuery(document).ready(function($) {
                //start plugin
                jQuery(".stars").rating({                                       
                    php : 'ratings/admin/manager.php',  
                    skin : 'ratings/skins/skin.png',        
                    debug : true                
                });                 
            });

        </script>   
{/literal} 
```

我也尝试过更新的版本，但这也没有任何建议

谢谢

米

# php - 文件路径的正则表达式

> ID：15602803
> 
> 赞同：2
> 
> 时间：2013-03-24T19:15:00.120
> 
> 标签：php, regex, validation

我正在尝试验证 php 中上传文件的路径，必须使用正则表达式而不是本机函数进行验证。

我得到的路径是：

```
C:\xampp\tmp\php33DB.tmp 
```

所以，当我用`/^[a-zA-Z0-9\-\_:\\]*\Z/`返回 false 测试这条路径时。（我认为这是因为路径有反斜杠`\`）

有一种方法可以仅使用正则表达式验证在 PHP 中上传的文件的 Linux 和 Windows 服务器的路径吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:33:25.993

```
$text = 'C:\xampp\tmp\php33DB.tmp';
preg_match("#^[a-zA-Z0-9_\\\\:.-]+#",$text,$out);
print_r($out); 
```

输出：

```
Array ( [0] => C:\xampp\tmp\php33DB.tmp ) 
```

但是，这个文件是PHP上传创建的临时文件，我认为不需要验证它，因为它是由服务器而不是客户端创建的，你可以检查上传文件的mime类型，如果文件上传则检查is_uploaded_file()通过 HTTP 发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:39:22.553

我建议改用这个函数：`file_exists`

所以在你的代码中你可以这样做：

```
if (file_exists($tmpFile)) {
    // ... do stuff
} 
```

# javascript - 我无法将对象属性作为函数

> ID：15602806
> 
> 赞同：1
> 
> 时间：2013-03-24T19:15:19.713
> 
> 标签：javascript, object, properties, nested

晕伙计们..我在这个网站上很新，所以任何帮助将不胜感激。如果我的问题已经存在于另一个主题中，请告诉我。我有以下问题..我创建了一个具有另一个对象的对象。子对象有一些属性。每当我迭代子对象以获取属性时，似乎所有属性都是字符串类型的。下面是我的代码：

```
 var obj = {}
    obj.x = function(){
        this.y = function(){

        }
    }

    for(var a in obj){
        alert(typeof(a) === "string"); //this will be true
        alert(a.hasOwnProperty("y")); //this will be false
    } 
```

我使用 chrome 来测试这个。不应该是 typeof(a) === "function" 是真的并且 a.hasOwnProperty("y") 也是真的吗？我在这里看不到我的错误。我很迷茫..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:20:58.327

`obj.x`是一个函数，如果你想将该函数用作对象的构造函数，请尝试

```
obj.x = new (function(){
    this.y = function(){

    }
})(); 
```

你的测试也是错误的，`a`只是一个字符串，所以它当然没有`y`属性。

```
for(var a in obj){
    alert(typeof(obj[a]) === "object");  
    alert(obj[a].hasOwnProperty("y"));  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:28:24.313

```
for(var a in obj){
        alert(typeof(a) === "string"); //this will be true
} 
```

javascript 中的 for...in 循环遍历对象的属性名称，而不是属性本身。所以`a`将返回每个属性的名称，这些属性始终是字符串

在您的示例中， obj 具有一个属性`x`，因此循环将运行一次，`a`等于`"x"`

如果要遍历对象的属性，可以这样做

```
for(var a in obj){
    var property = obj[a];
        alert(typeof( property) === "string"); //this will be false
} 
```

# php - 这个字符串的具体正则表达式是什么，PHP，转义引号

> ID：15602808
> 
> 赞同：0
> 
> 时间：2013-03-24T19:15:26.947
> 
> 标签：php, regex

包括字符串引号。

```
'test.test.test.test003232' 
```

到目前为止我拥有的 reg ex

```
^test.test.test.test[0-99999]$ 
```

如果我删除了字符串中的引号，则正则表达式有效，但我需要转义引号。我试过反斜杠

```
^\'test.test.test.test[0-99999]\'$ 
```

但它似乎没有用。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:22:01.980

您必须转义`.`，因为它将匹配任何字符。没有理由要 escape `'`，除非你在 PHP 中用引号将它包裹起来，而你没有提供。`[0-999999]`没有意义，我假设你想要 6 位数字。

还假设您正在使用`preg_match`，您需要分隔符。

它应该是：

```
/^'test\.test\.test\.test[0-9]{6}'$/ 
```

或者在 PHP 代码中：

```
$pattern = "/^'test\.test\.test\.test[0-9]{6}'$/"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:21:03.577

你的正则表达式是错误的，试试这个：

```
^\'test\.test\.test\.test([0-9]+)\'$ 
```

# signalr - SignalR - 一个连接可以同时属于多个组吗？

> ID：15602810
> 
> 赞同：0
> 
> 时间：2013-03-24T19:15:46.933
> 
> 标签：signalr

一个连接可以同时在多个组中吗？（即“chatRoom51”和“adminUsers”）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:40:39.117

是的。一个连接可以同时属于任意数量的组。

# php - 尝试使用 PHP 创建登录

> ID：15602812
> 
> 赞同：0
> 
> 时间：2013-03-24T19:15:55.697
> 
> 标签：php, sql, session, login

撇开 SQL 注入和其他安全问题不谈，我在尝试使以下代码工作时遇到了问题。我知道我很接近，但不知道该怎么做。目前我收到此错误消息：

“成功连接警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值在 C:\xampp\htdocs\proper\checklogin.php 第 30 行错误的用户名/密码中给出”

检查登录.php

```
 <?php
    session_start();

    // Connect to server and select databse.
    $conn= mysqli_connect("localhost", "root", "")
    or die ('No connection');
    print "Successful Connection";
    mysqli_select_db($conn , 'ssssg3') or die ('database will not open');

    // username and password sent from form
    $email=$_POST['email'];
    $password=$_POST['password'];

    $sql = "SELECT * FROM log_in_info where email=$email";

    $result=mysqli_query($conn, $sql);  

    $row=mysqli_fetch_array($result);

    if ($row['password'] == $password) {
    header('location:main1.php');
    } 
    else 
    {
    echo 'wrong username/password';
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:18:55.697

```
$sql = "SELECT * FROM log_in_info where email=$email"; 
```

这就是你的错误所在。尝试：

```
$sql = "SELECT * FROM log_in_info where email='$email'"; 
```

查询失败，因为您需要将文字放入“”。一定要检查返回值`mysqli_query`并`mysqli_error`用来确定实际的错误信息。

我建议做一些适当的错误检查（假设`$email`已正确转义）

```
$sql = "SELECT * FROM log_in_info where email='$email'";
if(!$sql) die(mysqli_error($conn)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:34:30.903

请注意，这不是错误消息。“未定义索引：密码”的意思是，您访问数组键的内容，不存在的内容。为了避免 id 你可以使用这样的（为你的代码）：

```
if (array_key_exists( 'password', $row ) and $row['password'] === $password) { 
```

# jquery-plugins - 如何突出显示无效部分 — twitter bootstrap/jquery/validate 插件

> ID：15602814
> 
> 赞同：4
> 
> 时间：2013-03-24T19:16:18.277
> 
> 标签：jquery-plugins, twitter-bootstrap, jquery-validate

我在 twitter bootstrap 中有一个表格：

```
<div class="form-div">
<form id="fvujq-form1" method="post" action="">
                    <div class="control-group name">
                    <fieldset>
                        <label>Name *</label>
                        <input type="text" name="name">
                    </fieldset>
                    </div>
                    <div class="control-group email">
                    <fieldset>
                        <label>E-Mail *</label>
                        <input type="text" name="email">
                    </fieldset>
                    </div>
                    <div class="control-group comment">
                    <fieldset>
                        <label>Your comment *</label>
                        <textarea name="comment"></textarea>
                    </fieldset>
                    </div>
              <button class="btn btn-primary">Submit</button> 
            </form>
        </div> 
```

这就是我使用 bassistance Validate 插件验证它的方式：

```
$(document).ready(function() {
        $("#fvujq-form1").validate({
            submitHandler:function(form) {
                SubmittingForm();
            },
            success: function(label) {
                 label.html("&#10004;").addClass("valid");
               },
            onfocusout: function(element) { $(element).valid(); },
            focusInvalid: false,
            highlight: function(element, errorClass, validClass) {
                 $('.form-div').find('.control-group' + element.id).addClass('error');
              },
              unhighlight: function(element, errorClass, validClass) {
                 $('.form-div').find('.control-group' + element.id).removeClass('error');
              },
            errorClass: "help-inline",
            errorElement: "strong" 
```

我想将 .error 添加到当前验证的 div 中，但是此代码将类添加到每个 .control-group 出现，而​​不仅仅是验证一个:(

谢谢 4 年的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T19:41:54.133

[JSFiddler 示例](http://jsfiddle.net/MgcDU/2890/)

这将在您离开每个字段时验证，或者当您点击提交按钮时，所有符合规则的字段都会出现错误。

HTML

```
<form action="" id="fvujq-form1" class="form-horizontal">
<fieldset>  
    <div class="control-group">
      <label class="control-label" for="name">Your Name</label>
      <div class="controls">
        <input type="text" class="input-xlarge" name="name" id="name">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="email">Email Address</label>
      <div class="controls">
        <input type="text" class="input-xlarge" name="email" id="email">
      </div>
    </div>
    <div class="control-group">
      <label class="control-label" for="comment">Comment</label>
      <div class="controls">
        <input type="text" class="input-xlarge" name="comment" id="comment">
      </div>
    </div>    
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Submit</button>

    </div>
  </fieldset>
</form> 
```

Javascript

```
$(document).ready(function(){

 $('#fvujq-form1').validate(
 {
  rules: {
    name: {
      minlength: 2,
      required: true
    },
    email: {
      required: true,
      email: true
    },
    comment: {
      minlength: 2,
      required: true
    },
  },
  highlight: function(element) {
    $(element).closest('.control-group').removeClass('success').addClass('error');
  },
  success: function(element) {
    element
    .text('OK!').addClass('valid')
    .closest('.control-group').removeClass('error').addClass('success');
  }
 });
}); 
```

# javascript - 如何将跨度附加到 如果存在子菜单

> ID：15602816
> 
> 赞同：3
> 
> 时间：2013-03-24T19:16:39.713
> 
> 标签：javascript, jquery, html, append

*我正在尝试构建响应式导航，并希望将 <span> 附加到所有包含*子菜单 <ul> 的顶级菜单项。出于某种原因，这只是将跨度附加到所有项目，有人可以建议为什么吗？

这是标记：

```
<nav class="nav">
    <ul class="nav-list">
        <li class="nav-item">
            <a href="#">Home</a>
            <ul class="nav-submenu">
                <li class="nav-submenu-item">
                    <a href="#">Submenu item 1</a>
                </li>
                <li class="nav-submenu-item">
                    <a href="#">Submenu item 2</a>
                </li>
                <li class="nav-submenu-item">
                    <a href="#">Submenu item 3</a>
                </li>
                <li class="nav-submenu-item">
                    <a href="#">Submenu item 4</a>
                </li>
            </ul>
        </li>
        <li class="nav-item">
            <a href="#">About</a>
        </li>
        <li class="nav-item">
            <a href="#">Services</a>
        </li>
        <li class="nav-item">
            <a href="#">Portfolio</a>
        </li>
        <li class="nav-item">
            <a href="#">Testimonials</a>
        </li>
        <li class="nav-item">
            <a href="#">Contact</a>
        </li>
    </ul>
</nav> 
```

所以你可以看到第一个项目有一个下拉菜单，我想动态地将一个 span 元素附加到每个包含子菜单的 <li> 中。

和脚本（jQuery）：

```
$.each($('.nav-item'), function (index, value) {
    if ($('.nav-item').children('ul').length > 0) {
        $(this).append($('<span class="nav-click"></span>'));
    }
}); 
```

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:28:42.587

实际上，这就是您所需要的：

```
$('.nav-item:has(ul)').append('<span class="nav-click" />'); 
```

`**[LIVE DEMO](http://jsbin.com/ucebus/2/edit)**`

使用`:has`or`.has()`会比所有这些`$.each`循环更有趣。类循环已经使用类作为选择器完成，原因返回您所需元素的集合，额外过滤`has`，全部在一行中。

[http://api.jquery.com/has-selector/](http://api.jquery.com/has-selector/)
[http://api.jquery.com/has/](http://api.jquery.com/has/)

如果您打算使用*多子级别*列表：

```
$('nav li:has(ul)').append('<span class="nav-click" />'); 
```

`**[LIVE DEMO](http://jsbin.com/ucebus/4/edit)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:18:32.613

尝试这个

```
$.each($('.nav-item'), function (index, value) {
    if ($(this).children('ul').length > 0) {
        $(this).append($('<span class="nav-click"></span>'));
    }
}); 
```

你在这一行有问题：

```
if ($('.nav-item').children('ul').length > 0) { 
```

这将始终选择首先`.nav-item`找到

您需要使用`this`，因为您正在循环遍历每个`.nav-item`

```
if ($(this).children('ul').length > 0) { 
```

# java - 如果语句不适用于两个 列表 [Java]

> ID：15602820
> 
> 赞同：0
> 
> 时间：2013-03-24T19:16:48.560
> 
> 标签：java, if-statement, arraylist

```
long temp;
for ( int i = 0; i < size; i++ )
{
    temp = ls.get(i);
    System.out.println("temp is:" + temp);
    for ( int j = 0; j < size; j++)
    {
            if ( i == j )
            {

            }
            else if ( ls.get(i) == ls.get(j) )
            {
                // If Duplicate, do stuff... Dunno what yet.
                System.out.println(ls.get(i)+" is the same as: " + ls.get(j) );
                //System.out.println("Duplicate");
            }

    }
} 
```

我有一个 Long 类型的列表，其中填充了几个 9 位数字，例如 900876012，我正在检查重复项，以便在导出到文件之前生成新数字并替换重复项。

首先，我检查数组中的位置是否相同，因为显然位置 1 的某些内容在位置 1 的同一个列表中是相同的，如果是，则忽略。

然后，我检查内容是否相同，但由于某种原因它不会评估为真，它以前是作为一个简单的“如果”本身做的。

作为参考，这里是数字，忽略“temp is”：

```
temp is:900876512
temp is:765867999
temp is:465979798
temp is:760098908
temp is:529086890
temp is:765867999
temp is:529086890
temp is:800003243
temp is:200900210
temp is:200900210
temp is:542087665
temp is:900876512
temp is:900876512
temp is:900876512
temp is:900876512 
```

以下是完整的方法供参考：

```
public static void CheckContents(BufferedReader inFileStreamName, File aFile, Scanner s ) throws DuplicateSerialNumberException
{
    System.out.println();
    List<Long> ls = new ArrayList<Long>();
    List<String> ls2 = new ArrayList<String>();

long SerialNum = 0;
int counter = 0;
int size = 0;
String StringBuffer;

while (s.hasNextLine())
{
    ls.add(s.nextLong());
    //System.out.println();
    StringBuffer = s.nextLine();
    ls2.add(StringBuffer);
    size = ls.size();
    //System.out.println(ls.size());
    SerialNum = ls.get(size-1);
    //System.out.println(ls.get(size-1));
    System.out.println("Serial # is: " + SerialNum);
    //System.out.println(SerialNum + ": " + StringBuffer);
    counter++;
}

long temp;
for ( int i = 0; i < size; i++ )
{
    temp = ls.get(i);
    System.out.println("temp is:" + temp);
    for ( int j = 0; j < size; j++)
    {
        if ( i == j )
        {

        }
        else if ( ls.get(i) == ls.get(j) )
        {
            // If Duplicate, do stuff... Dunno what yet.
            System.out.println(ls.get(i)+" is the same as: " + ls.get(j) );
            //System.out.println("Duplicate");
        }

    }
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:21:03.747

一个不错的。

在列表中，您不存储`float`（原始）而是`Float`对象。自动装箱使您对您透明。

并且`==`比较器不适用于对象（它会告诉您两个对象是否相同，但如果您有两个对象持有相同的值，则返回`false`）。

您可以使用

```
 if ( ls.get(j).equals(ls.get(i)) 
```

或（因为它是`List<Long>`）

```
 if ( ls.get(j).longValue() == ls.get(i).longValue()) 
```

甚至（感谢自动装箱）

```
 if ( ls.get(j).longValue() == ls.get(i)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:22:18.893

请试试

```
else if ( ls.get(i) != null && ls.get(i).equals(ls.get(j)) ) 
```

反而

# javascript - Javascript - 为什么我的数组循环不起作用？

> ID：15602822
> 
> 赞同：0
> 
> 时间：2013-03-24T19:17:03.183
> 
> 标签：javascript

我有一个对象列表（`data`），我正在这样做：

`for (var i = 0; data.length < i; i++) {...}`

但它不起作用。当我使用这个时：

`for (var i in data) {`

它可以工作，但是当只有一个对象时循环了三次，在这种情况下`i`是：（`0`正确），`indexOfObject`（wtf），`removeItem`（wtf）。

为什么我的第一个表达式不起作用？那两个奇怪的`i`值是什么？难道我做错了什么？

**编辑**：由于这件事有点复杂，我能做的最好的就是提供我的数据对象的屏幕截图：[screenshot](http://imgur.com/HgZ68Oq)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T19:20:21.713

检查你的`for`循环语句，循环（`data.length < i`）的条件是相反的，可能永远不会满足。

它应该是：

```
 for (var i = 0; i < data.length;  i++)
   {
      // Now write your code 
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:20:08.710

如果你真的有一个**数组**——

```
var a = ["hello", "world"]; 
```

或者

```
var a = new Array();
a[0] = "hello";
a[1] = "world"; 
```

那么你的第一个循环（带有索引变量）是正确的。您应该使用`in`样式`for`循环来迭代对象的属性，而使用索引样式来迭代数组的数字索引属性。

*编辑*——哎呀，好叫@Sachin——你的`for`循环测试是倒退的。

如果你有一个普通的对象并且你想遍历它的属性，但是跳过对象原型链上的属性，你可以这样做：

```
for (var name in obj) {
  if (obj.hasOwnProperty(name)) {
    var value = obj[name];
    // do stuff
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:24:43.197

我可以从上面给出的代码中看到，你在 for 循环中给出了错误的条件。首先，您将变量 i 初始化为 0，然后检查 data.length<0。任何长度值都可以小于零吗？

你可以像这样使用它：-

```
 for (var i = 0; i<data.length; i++) {...} 
```

试试吧。

# ios - 不完整的实现警告和构建错误

> ID：15602823
> 
> 赞同：-4
> 
> 时间：2013-03-24T19:17:03.310
> 
> 标签：ios, objective-c, xcode

我是 xcode 的新手。我尝试了一个小时，但我做不到。我该如何解决？我正在尝试做一个待办事项清单。相同的代码适用于其他视图控制器。我确实将代码复制粘贴到很长。我进行了更正，然后出现了这个错误。预先感谢您的帮助。

TodoMaster2ViewController.h

```
#import <UIKit/UIKit.h>
#import "TodoTask2.h"

@interface TodoMaster2ViewController : UITableViewController

- (IBAction)done2:(UIStoryboardSegue *)sender;
- (IBAction)cancel2:(UIStoryboardSegue *)sender;
- (IBAction)buttonEditClick2:(UIBarButtonItem *)sender;
- (void) tableView2: (UITableView *) tableView didSelectRowAtIndexPath: (NSIndexPath *) indexPath;

@end 
```

TodoMaster2ViewController.m

```
#import "TodoMaster2ViewController.h"
#import "TodoDetailViewController.h"
#import "TodoAdd2ViewController.h"

@interface TodoMaster2ViewController () {
    NSMutableArray *_objects2;
}
@end

@implementation TodoMaster2ViewController
- (void)awakeFromNib
{
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    /*
     self.navigationItem.leftBarButtonItem = self.editButtonItem;

     UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
     self.navigationItem.rightBarButtonItem = addButton;
     */
    UIApplication *app = [UIApplication sharedApplication];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationDidEnterBackground:) name:UIApplicationDidEnterBackgroundNotification object:app];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    // paths[0];
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"data.plist"];
    if ([fileManager fileExistsAtPath:plistPath] == YES)
    {
        NSMutableArray *readArray = [NSMutableArray arrayWithContentsOfFile:plistPath];
        _objects2 = [[NSMutableArray alloc] init];
        NSEnumerator *enumerator = [readArray objectEnumerator];
        NSString *str = [[NSString alloc] init];
        while ( str = [enumerator nextObject])
        {
            todoTask2 *tempTodo = [[todoTask2 alloc] init];
            tempTodo.taskName2 = str;
            str = [enumerator nextObject];
            tempTodo.checked2 = str;
            [_objects2 addObject:tempTodo];

        }
        [[self tableView] reloadData];
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
/*
 - (void)insertNewObject:(id)sender
 {
 if (!_objects) {
 _objects = [[NSMutableArray alloc] init];
 }
 [_objects insertObject:[NSDate date] atIndex:0];
 NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
 [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
 }
 */
#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _objects2.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    NSDate *object = _objects2[indexPath.row];
    cell.textLabel.text = [object description];
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects2 removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

/*
 // Override to support rearranging the table view.
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
 {
 }
 */

/*
 // Override to support conditional rearranging of the table view.
 - (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
 {
 // Return NO if you do not want the item to be re-orderable.
 return YES;
 }
 */

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSDate *object = _objects2[indexPath.row];
        [[segue destinationViewController] setDetailItem:object];
    }
}
#pragma mark yeni-task
- (IBAction)done:(UIStoryboardSegue *)segue;
{
    if ([[segue identifier] isEqualToString:@"DoneAdd"] ||
        [[segue identifier] isEqualToString:@"DoneKeyboard"]) {
        TodoAdd2ViewController *addController = [segue sourceViewController];
        if (![addController.textFieldTask2.text isEqualToString:@""]) {
            if (!_objects2) {
                _objects2 = [[NSMutableArray alloc] init];
            }
            todoTask2 *test = [[todoTask2 alloc] init];
            test.taskName2 = addController.textFieldTask2.text;
            if (addController.durum2.isOn) {
                test.checked2 = @"yes";
            } else {
                test.checked2 = @"no";
            }
            [KGStatusBar showSuccessWithStatus:@"Yeni Fikir Eklendi!"];
            //[_objects insertObject:[[NSMutableAttributedString alloc] initWithString:addController.textFieldTask.text] atIndex:_objects.count];
            [_objects2 insertObject:test atIndex:_objects2.count];
            [[self tableView] reloadData];
            addController.textFieldTask2.text = @"";
        }
        [self dismissViewControllerAnimated:YES completion:NULL];
        [self setEditing: NO animated: YES];
    }
}
#pragma mark task tamamlandı
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    todoTask2 *temp = [_objects2 objectAtIndex:[indexPath row]];
    if( [temp.checked2 isEqualToString:@"yes"] )
    {

        NSMutableAttributedString *tempString = [[NSMutableAttributedString alloc] initWithString:temp.taskName2];
        [tempString addAttribute:NSForegroundColorAttributeName value:[UIColor grayColor] range:NSMakeRange(0, [tempString length])];
        [tempString addAttribute:NSStrikethroughStyleAttributeName value:[NSNumber numberWithInt:NSUnderlineStyleSingle] range:NSMakeRange(0, [tempString length])];
        cell.imageView.image = [UIImage imageNamed:@"check.png"];
        [[cell textLabel] setAttributedText:tempString];
    }
    else
    {
        NSMutableAttributedString *tempString = [[NSMutableAttributedString alloc] initWithString:temp.taskName2];
        cell.imageView.image = [UIImage imageNamed:@"uncheck.png"];
        cell.accessoryType = UITableViewCellAccessoryNone;
        [[cell textLabel] setAttributedText:tempString];
    }
}
- (IBAction)cancel:(UIStoryboardSegue *)segue;
{
    if([[segue identifier] isEqualToString:@"CancelAdd"]) {
        TodoAdd2ViewController *addController = [segue sourceViewController];
        addController.textFieldTask2.text = @"";
        [self dismissViewControllerAnimated:YES completion:NULL];
    }
}

- (IBAction)buttonEditClick:(UIBarButtonItem *)sender {
    if (self.tableView.editing)
        [[self tableView] setEditing:NO animated:YES];
    else
        [[self tableView] setEditing:YES animated:YES];
}
- (void) tableView:(UITableView *) tableView didSelectRowAtIndexPath:(NSIndexPath *) indexPath
{
    todoTask2 *temp = [_objects2 objectAtIndex:[indexPath row]];
    if( [temp.checked2 isEqual: @"yes"] )
    {
        temp.checked2 = @"no";
        /*
         [[_objects objectAtIndex:[indexPath row]] addAttribute:NSForegroundColorAttributeName value:[UIColor blackColor] range:NSMakeRange(0, [[_objects objectAtIndex:[indexPath row]] length])];
         [[_objects objectAtIndex:[indexPath row]] addAttribute:NSStrikethroughStyleAttributeName value:[NSNumber numberWithInt:NSUnderlineStyleNone] range:NSMakeRange(0, [[_objects objectAtIndex:[indexPath row]] length])];
         [tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryNone;
         */
    }
    else
    {
        temp.checked2 = @"yes";
        /*
         [[_objects objectAtIndex:[indexPath row]] addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0, [[_objects objectAtIndex:[indexPath row]] length])];
         [[_objects objectAtIndex:[indexPath row]] addAttribute:NSStrikethroughStyleAttributeName value:[NSNumber numberWithInt:NSUnderlineStyleSingle] range:NSMakeRange(0, [[_objects objectAtIndex:[indexPath row]] length])];

         [tableView cellForRowAtIndexPath:indexPath].accessoryType = UITableViewCellAccessoryCheckmark;
         */
    }
    [[self tableView] reloadData];
    //[_objects setObject: atIndexedSubscript:[indexPath row]]
}

- (void)applicationDidEnterBackground:(NSNotification *)notification {
    NSLog(@"Entering Background");
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    // paths[0];
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:@"data.plist"];
    //NSArray  *keys = [[NSArray alloc] initWithObjects:@"task", nil];
    NSMutableArray *array = [[NSMutableArray alloc] init];
    NSEnumerator *enumerator = [_objects2 objectEnumerator];
    todoTask2 *tempTodo;
    while ( tempTodo = [enumerator nextObject])
    {
        [array addObject:tempTodo.taskName2];
        [array addObject:tempTodo.checked2];
    }
    [array writeToFile:plistPath atomically:YES];
}
@end 
```

非常遗憾。这是我的错误。 [http://d.pr/i/s40r](http://d.pr/i/s40r)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:29:51.567

不完整的实现通常意味着您已经在文件中声明了一些方法`.h`，但还没有在`.m`文件中编写所有实现。如果您认为您已经编写了这些实现，请检查两个文件中的方法签名是否完全相同。

另外，您声明`tableView2:didSelectRowAtIndexPath:`. 可能您在这里想要的只是声明委托方法`tableView:didSelectRowAtIndexPath:`（第 2 种）并检查哪个表视图在该方法中发送消息。可能是导致错误的方法，因为我在您的代码中看不到实现（我很快检查了，所以它实际上可能在那里）。

# security - JAAS - 恶意主体和主体创建

> ID：15602825
> 
> 赞同：0
> 
> 时间：2013-03-24T19:17:13.237
> 
> 标签：security, jaas

我是 JAAS 的新手，但我仍然无法得到一件事：如果恶意用户手动创建主题和主体怎么办？

如果用户篡改它，不应该对主题/委托人进行一些验证吗？我见过的教程都没有提到这一点。

看看这个例子（来自 jaasbook.com 的 ch02）：

```
SimpleCallbackHandler cb = new SimpleCallbackHandler(username,
    password);
LoginContext ctx = new LoginContext("chp02", cb);
ctx.login();
Subject subject = ctx.getSubject();
System.out.println("Logged in " + subject);
Subject.doAsPrivileged(subject, new PrivilegedAction() { ... 
```

如果我用这个代码替换这个代码：

```
Subject subject = new Subject();
Principal p = new SysAdminPrincipal(username);
subject.getPrincipals().add(p);
Subject.doAsPrivileged(subject, new PrivilegedAction() { ... 
```

它也同样有效（至少在这个示例代码中）。

我一定错过了一些明显的东西，否则使用 jaas 根本没有意义。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T14:32:51.257

区别在于可信代码和不可信代码。

如果您允许代码在您不信任的 JVM 中运行，那么您需要使用配置的策略来保护 JVM，并在启用 SecurityManager 的情况下运行。这类似于 Java Applet 环境。在这样的环境中，您通常会锁定部分代码库，以便只有来自受信任来源的代码，以及可选的加密签名，才能运行或调用代码的其他部分。

在 Java 安全性中，当进行权限检查时，会检查整个调用堆栈以确保允许堆栈的每个部分使用权限。

在这种情况下，您将启动一个将 Subject 与 AccessControlContext 相关联的 PrivilegedAction。如果您查看源代码，您会看到执行权限检查：

```
javax.security.auth.AuthPermission "doAs"; 
```

在默认的 Java 安全策略中，唯一可以执行此操作的代码是已安装的 Java 扩展，因此如果您想在自己的代码中执行此操作，并使用正在运行的 SecurityManager，您将需要手动设置此权限。

因此，Subject 类是不受保护的，因为除非它与 AccesssControlContext 关联，否则它没有任何影响。

AccesssControlContext 受 AuthPermission 保护。

AuthPermission 的设置受 JVM 启动时配置的 security Policy 和 SecurityManager 保护。

在这种情况下，如果您在没有 SecurityManager 的情况下运行，或者没有向任何代码库授予 AllPermission 的自定义策略，并且您允许运行不受信任的代码，那么您就会遇到很大的安全问题。

如果您想运行不受信任的代码并将主题分配给 AccessControlContexts，则保护执行此操作的代码将类似于以下策略文件：

```
grant codebase "file://home/me/myapp.jar" signedby "me" {
    javax.security.auth.AuthPermission "doAs";
} 
```

这可以保护只有您的代码库（包括调用堆栈）才能执行主题分配。

或者只是确保您信任部署到应用程序的代码……这是 99% 的部署方案，大多数应用程序在其宿主环境中受到保护，并且不允许执行远程代码。

# exchange-server - 从 PowerShell 向 Lotus Notes 用户发送电子邮件时 HTML 格式不正确

> ID：15602826
> 
> 赞同：0
> 
> 时间：2013-03-24T19:17:13.470
> 
> 标签：exchange-server, lotus-notes

我正在尝试从 Exchange 命令行管理程序 Exchange 2007 发送报告。当我将此报告发送到 Outlook 时，电子邮件的格式符合预期，但是当我将电子邮件发送到 Lotus 时，它会丢失 HTML 格式，例如 CSS、标题、表格和边框. 数据被保留，但格式不正确。

另一方面，当我在 Exchange 2010 中使用 Send-MailMessage 发送消息时，即使我将它发送给 Lotus Notes 用户，一切都很好。

为什么会出现这种差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T13:57:11.027

您将不得不进入 Notes 客户端，查看两条消息的 MIME 源，并使用一个好的 diff 程序比较它们。如果一个显示正确，而另一个显示不正确，就会存在差异，找出为什么会出现这些差异应该会给您一些线索，了解正在发生的事情会破坏消息。

（以上假设收件人设置为接收他邮箱中的 MIME 格式的邮件。如果实际上用户已设置为接收转换为 Notes 富文本格式的邮件，那么您将不得不去Domino 服务器而不是 Notes 客户端，并使用[SMTPSaveImportErors](http://www-01.ibm.com/support/docview.wss?uid=swg21095102)设置来捕获两条消息的 MIME 源。）

# java - Java中的电梯模拟器帮助

> ID：15602830
> 
> 赞同：1
> 
> 时间：2013-03-24T19:17:47.147
> 
> 标签：java, simulation

我无法用 Java 完成一个基本的电梯模拟器。到目前为止，我有一个选项可以让用户输入他们是想选择楼层、拉火警还是退出模拟。当他们选择选择楼层时，他们可以选择从 1 到 100 的任何楼层，除了 13。我不知道该怎么做是让模拟跟踪他们当前的楼层，以便他们可以下去。这是我到目前为止所拥有的：

```
public class Elevator {

    public Elevator() {}

    public void selectFloor() {
        Scanner scnr = new Scanner(System.in);
        int newFloor;

        System.out.println("Enter the floor you'd like to go to ==> ");
        newFloor = scnr.nextInt();
        if (newFloor > 100 || newFloor < 0 || newFloor == 13) {
            System.out.println("Invalid selection");
        }

        else if (newFloor <= 100 && newFloor > 0 && newFloor != 13) {
            for (int i = 1; i <= newFloor; i++)
                System.out.println("..." + i);
                System.out.println("Ding!");
        }
    }

    public void fireAlarm() {
        System.out.println("Danger, you must exit the building now!");
    }
} 
```

另外，为这个程序发布我的其他课程会有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:27:29.163

`Elevator`应该有一个`currentFloor`字段，如下所示：

```
private int currentFloor; 
```

然后，在 中`selectFloor`，您需要找到方向。此外，在 中`selectFloor`，`else if`是不必要的。

```
public class Elevator {
    private int currentFloor;

    public Elevator() {
        currentFloor = 0;
    }

    public void selectFloor() {
        Scanner scnr = new Scanner(System.in);
        int newFloor;

        System.out.println("Enter the floor you'd like to go to ==> ");
        newFloor = scnr.nextInt();
        if (newFloor > 100 || newFloor < 0 || newFloor == 13) {
            System.out.println("Invalid selection");
        }

        else {  // The if was not necessary
            int direction = 0;
            if(currentFloor < newFloor){
                direction = 1; // going up;
            } else if (currentFloor > newFloor) {
                direction = -1; //going down;
            } else {
                direction = 0; //going nowhere;
            }
            for (; currentFloor != newFloor; currentFloor += newFloor)
                System.out.println("..." + i);
                System.out.println("Ding!");
        }
    }

    public void fireAlarm() {
        System.out.println("Danger, you must exit the building now!");
    }
} 
```

注意：我还没有测试过这个，所以我不能确定它是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:24:33.013

通过直接在类开始标记下`Elevator`添加一个类变量，为您的对象提供一个类变量。`private int floor;`（在 Elevator 类构造函数之上。）此变量将直接绑定到包含它的 Elevator 对象。

这样，当您通过使用创建 Elevator 时，`new Elevator`您也将始终拥有一个 int 值来保持地板。要访问此值，请构建一个 getter 和 setter 方法。它们应该如下所示：

```
public void setFloor(int floor) {
    this.floor = floor;
}

public int getFloor() {
    return floor;
} 
```

然后可以调用这两个方法来设置楼层号并获取楼层号。为了跟踪，在您的`selectFloor`方法中，您需要使用 setFloor 并在做出有效选择后将楼层号传递给它。然后，您可以使用 getFloor 来确定它是上升还是下降。

`floor`在创建新的 Elevator 对象时让您的构造函数将变量设置为 1。只需将构造函数更改为如下所示：

```
public Elevator() {
    setFloor(1);
} 
```

希望这可以帮助！如果您对这些事情的工作方式有任何疑问，请告诉我，我会尽力提供更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:32:34.913

我刚刚插入了一个名为 backToBasement() 的新方法并将其绑定到您的 selectFloor() 方法中。希望它有帮助。

```
public void selectFloor() {
        Scanner scnr = new Scanner(System.in);
        int newFloor;

        System.out.println("Enter the floor you'd like to go to ==> ");
        newFloor = scnr.nextInt();
        if (newFloor > 100 || newFloor < 0 || newFloor == 13) {
            System.out.println("Invalid selection");
        }

        else if (newFloor <= 100 && newFloor > 0 && newFloor != 13) {
            for (int i = 1; i <= newFloor; i++)
                System.out.println("..." + i);
                System.out.println("Ding!");
                backToBasement(newFloor);
        }
    }

    public void fireAlarm() {
        System.out.println("Danger, you must exit the building now!");
    }

    public void backToBasement(int newFloor){
        for (int i=newFloor; i>0;i--){
             System.out.println("..." + i);
        }
        System.out.println("Ding!... Back to Ground Level");

    } 
```

# javascript - 使用 Knockout 映射插件在子数组的成员上定义计算的 observables

> ID：15602847
> 
> 赞同：1
> 
> 时间：2013-03-24T19:19:42.983
> 
> 标签：javascript, mvvm, knockout.js

我有以下内容：

```
// Child Array is Cards, trying to add computed observable for each child
var CardViewModel = function (data) {
    ko.mapping.fromJS(data, {}, this);
    this.editing = ko.observable(false); 
};

var mapping = {  
    'cards': {  // This never gets hit, UNLESS I remove the 'create' method below
        create: function (options) {
            debugger;
            return new CardViewModel(options.data);
        }
    },

    create: function(options) {
        var innerModel = ko.mapping.fromJS(options.data);
        innerModel.cardCount = ko.computed(function () {
            return innerModel.cards().length;
        });
        return innerModel;
    }
};

var SetViewModel = ko.mapping.fromJS(setData, mapping);
debugger;
ko.applyBindings(SetViewModel); 
```

但是，我无法使“卡片”绑定起作用-除非我删除“创建”方法，否则无法到达该代码。我正在尝试按照淘汰赛网站上的示例进行操作：

[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

他们为子对象定义这样做：

```
var mapping = {
    'children': {
        create: function(options) {
            return new myChildModel(options.data);
        }
    }
}
var viewModel = ko.mapping.fromJS(data, mapping); 
```

ChildModel 定义如下：

```
var myChildModel = function(data) {
    ko.mapping.fromJS(data, {}, this);

    this.nameLength = ko.computed(function() {
        return this.name().length;
    }, this);
} 
```

我在过去的一天里一直在做这件事，我一生都无法弄清楚为什么这不起作用。任何提示都会很棒。

编辑：这是我正在使用的小提琴。它仅在结果中显示 SIDE 1，因为此处无法识别“编辑”：

```
<div data-bind="visible: !$parent.editing()" class="span5 side-study-box"> 
```

[http://jsfiddle.net/PTSkR/1/](http://jsfiddle.net/PTSkR/1/)

这是我在运行 chrome 时遇到的错误：

> 未捕获的错误：无法解析绑定。消息：TypeError：对象没有方法“编辑”；绑定值：可见：!$parent.editing()

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:36:09.653

您已经覆盖了`create`视图模型的行为。映射插件不会为您调用属性的任何其他处理程序。由于您是从`create`方法内部进行映射，因此将您的`cards`处理程序移到那里。

```
var mapping = {  
    create: function(options) {
        var innerModel = ko.mapping.fromJS(options.data, {
            'cards': {
                create: function (options) {
                    debugger;
                    return new CardViewModel(options.data);
                }
            }
        });
        innerModel.cardCount = ko.computed(function () {
            return innerModel.cards().length;
        });
        return innerModel;
    }
}; 
```

[更新的小提琴](http://jsfiddle.net/PTSkR/7/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-24T19:34:47.523

你不需要有括号。我刚从

```
!$parent.editing() 

 to 

!$parent.editing 
```

[在此处](http://jsfiddle.net/PTSkR/6/)查看更新的小提琴

# python - 如何以节省内存的方式在python中拆分和解析大文本文件？

> ID：15602848
> 
> 赞同：1
> 
> 时间：2013-03-24T19:19:53.323
> 
> 标签：python, parsing, file-io, ascii

我有一个很大的文本文件要解析。主要模式如下：

```
step 1

[n1 lines of headers]

  3  3  2
 0.25    0.43   12.62    1.22    8.97
12.89   89.72   34.87   55.45   17.62
 4.25   16.78   98.01    1.16   32.26
 0.90    0.78   11.87
step 2

[n2 != n1 lines of headers]

  3  3  2
 0.25    0.43   12.62    1.22    8.97
12.89   89.72   34.87   55.45   17.62
 4.25   16.78   98.01    1.16   32.26
 0.90    0.78   11.87
step 3

[(n3 != n1) and (n3 !=n2) lines of headers]

  3  3  2
 0.25    0.43   12.62    1.22    8.97
12.89   89.72   34.87   55.45   17.62
 4.25   16.78   98.01    1.16   32.26
 0.90    0.78   11.87 
```

换句话说：

> 分隔符：步骤#
> 
> 已知长度的标头（行号，而不是字节）
> 
> 数据3维形状：nz、ny、nx
> 
> 数据：fortran 格式，原始数据集中约 10 个浮点数/行

我只想提取数据，将它们转换为浮点数，将其放入一个 numpy 数组中，然后将其 ndarray.reshape 为给定的形状。

我已经做了一些编程......主要思想是

1.  首先获取每个分隔符的偏移量（“步骤 X”）
2.  跳过 nX (n1, n2...) 行 + 1 以到达数据
3.  从那里一直读取字节到下一个分隔符。

一开始我想避免使用正则表达式，因为这些会大大减慢速度。完成第一步已经需要 3-4 分钟（浏览文件以获取每个部分的偏移量）。

问题是我基本上是使用`file.tell()`方法来获取分隔符位置：

```
[file.tell() - len(sep) for line in file if sep in line] 
```

问题有两个方面：

1.  对于较小的文件，`file.tell()`给出正确的分隔符位置，对于较长的文件，它没有。我怀疑`file.tell()`不应该在循环中使用，既不使用显式`file.readline()`也不使用隐式`for line in file`（我都尝试过）。我不知道，但结果就在那里：对于大文件，`[file.tell() for line in file if sep in line]`没有系统**地**给出分隔符后行的位置。
2.  len(sep) 没有给出正确的偏移校正以返回“分隔符”行的开头。`sep`是一个字符串（字节），包含文件的第一行（第一个分隔符）。

有谁知道我应该如何解析？

注意：我首先找到偏移量，因为我希望能够在文件中浏览：我可能只想要第 10 个数据集或第 50000 个数据集......

# 1-找到偏移量

```
sep = "step "
with open("myfile") as f_in:
    offsets = [fin.tell() for line in fin if sep in line] 
```

正如我所说，这适用于简单的示例，但不适用于大文件。

新测试：

```
sep = "step "
offsets = []
with open("myfile") as f_in:
    for line in f_in:
        if sep in line:
            print line
            offsets.append(f_in.tell()) 
```

打印的行对应于分隔符，这是毫无疑问的。但是获得的偏移量与`f_in.tell()`下一行不对应。我猜该文件缓冲在内存中，当我尝试`f_in.tell()`在隐式循环中使用时，我没有得到当前位置，而是缓冲区的结尾。这只是一个疯狂的猜测。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:59:08.017

我得到了答案：`for`在文件上循环，相处得不`tell()`太好。就像混合`for i in file`并`file.readline()`引发错误一样。

所以，使用`file.tell()`with `file.readline()`or `file.read()` *only*。

**永远不要使用**：

```
for line in file:
    [do stuff]
    offset = file.tell() 
```

这确实是一种耻辱，但事实就是如此。

# sql - 如何构造这些 SQL 查询，使它们成为完美的 SQL？

> ID：15602850
> 
> 赞同：-1
> 
> 时间：2013-03-24T19:19:55.400
> 
> 标签：sql, sql-server, sql-server-2008

我必须构造这些查询，使它们成为完美的 SQL。查询需要针对 SQL Server 数据库，我有一个 database `StoresDB`，一个 table `items_table`。

我需要检索

1.  此表中的项目总数

2.  价格高于或等于 10 英镑的商品数量 - 列名称为金额

3.  计算机类别中的项目列表 - 列名 ='comp_id' 按减少的数量排序。

对于上述请求，我尝试了以下操作：

1.  `SELECT COUNT(*) FROM items_table`

2.  `Select * from items_table where amount >= 10`

3.  `Select * from items_table where comp_id = ’electronics’ desc`

我对 SQL 很陌生，不确定我是否正确尝试过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:14:55.317

在编写此类查询时，了解一些事情可能是件好事：

一个）`SELECT COUNT(*) FROM items_table`

此查询编写正确。

b)`SELECT COUNT(*) FROM items_table WHERE amount >= 10`

`amount`查询是可以的，但是选择创建覆盖 WHERE 子句的索引，在这种情况下，最好在列上有非聚集索引

C）`SELECT * FROM items_table WHERE comp_id = 'electronics' ORDER BY price DESC`

在最后一个查询中，您会遇到在结果中搜索所有列的问题，`SELECT * ...`这在生产中被认为是不好的做法，因此您需要在 SELECT 列表中仅放入真正需要的列，而不是所有列。您还可以在 comp_id 列上创建非聚集索引，其中包含 SELECT 列表中的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:31:18.900

a) 看起来正确。

b) 您被要求进行计数，但正在查询列表。

```
 SELECT COUNT(*) FROM items_table WHERE price >= 10 
```

c) 这个看起来不错，但你缺少一个`ORDER BY`声明。

```
 SELECT * FROM items_table WHERE catID='electronics' ORDER BY price DESC 
```

# javascript - parsererror: SyntaxError: Unexpected token less than sign

> ID：15602851
> 
> 赞同：1
> 
> 时间：2013-03-24T19:20:02.117
> 
> 标签：javascript, ajax, coldfusion

我有以下 ColdFusion 功能：

```
component {
url._cf_nodebug=true;
url.returnformat = "json";
url.queryformat = "column";

remote function Read(StateID) {
    local.result = {};
    local.result.MSG = "";
    // local.result.QRY = QueryNew();
    local.svc = new query();
    local.svc.addParam(value=arguments.StateID,cfsqltype="cf_sql_integer");
    local.svc.setSQL("SELECT *
        FROM State WHERE StateID = ?");
    local.svc.setName = "qry";
    local.obj = local.svc.execute();
    local.result.QRY = local.obj.getResult();
    return local.result;
}
} 
```

当我从 test.cfm 测试它时，它可以正常工作：

```
<cfset qry = CreateObject("component","ajaxEnabled").Read(154)> 
```

所以我认为问题在于我如何将参数传递给 $.ajax 方法。当我调用它时，我得到： parsererror: SyntaxError: Unexpected token <

```
;(function($, window, undefined) {
    var document = window.document;
    $('#States').on('click','a',function() {
        var local = {};
        local.data = {};
        local.data.StateID = $(this).data('stateid');
        local.dataType = 'json';
        local.context = $(this)[0];
        local.Promise = $.ajax('ajaxEnabled.cfc',local);
        local.Promise.fail(function(A,B,C) {
            console.log(B + ': ' + C);
        });
    });
})(jQuery, window); 
```

我可以在控制台中看到 local.data.StateID = 153，这就是我想要的。

这是[该页面的链接](http://www.phillipsenn.com/Matrix/CRUD/jqm/ajaxEnabled/ajaxEnabled.cfm)。这[是 test.cfm 的链接](http://www.phillipsenn.com/Matrix/CRUD/jqm/ajaxEnabled/test.cfm)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:27:38.373

这个问题与您的 JavaScript 代码本身无关……它与您在服务器端所做的事情有关。如果您使用浏览器工具，您将看到以下响应：

```
<br> <br>
Unsupported Operation. Check application log for more details.
<br> <br> 
```

解析器错误是针对返回的数据，而不是您的代码。

这种情况下的 URL 是[http://www.phillipsenn.com/CFIDE/componentutils/cfcexplorer.cfc?method=getcfcinhtml&name=Matrix.CRUD.jqm.ajaxEnabled.ajaxEnabled&path=/Matrix/CRUD/jqm/ajaxEnabled/ajaxEnabled.cfc](http://www.phillipsenn.com/CFIDE/componentutils/cfcexplorer.cfc?method=getcfcinhtml&name=Matrix.CRUD.jqm.ajaxEnabled.ajaxEnabled&path=/Matrix/CRUD/jqm/ajaxEnabled/ajaxEnabled.cfc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T19:50:58.893

您在 AJAX 调用中指定了 CFC，但没有指定要调用的方法。因此 CF 将请求解释为查看该 CFC 的 API 文档的请求，这就是它返回给浏览器的内容。所以 AJAX 调用接收的是标记，而不是 JSON。

此外，将来：当您说您遇到错误并且您正在处理多个系统（例如：CF 和 JS）时，请确保说明哪个系统给您错误。这使我们不必猜测。

# asp.net - 重定向后 ASP.NET 会话丢失但仅使用 IE

> ID：15602852
> 
> 赞同：4
> 
> 时间：2013-03-24T19:20:06.250
> 
> 标签：asp.net, session, redirect, internet-explorer-9

**斜体字为原帖，以下修改为非斜体字**

*我正在使用 ASP.NET 4.0 用 C# 编写。我正在通过 SQL 查找验证用户凭据，如果有效，我将用户名存储在会话变量中，然后将用户重定向回主页。很简单。*

```
if (!db.isValidLogin(userName, passWord))
    {
        //invalid login, show it!
        //just some code to tell the user invalid credentials
    }
    else
    {
        //show login successful!
        //update some items on the screen
        Session["username"] = userName.ToUpper();
        Response.Redirect("/");
    } 
```

*这还没有结束 SSL，因为此时它是内部开发。当我使用 Chrome 版本“25.0.1364.172 m”时，我被正确重定向并“登录”。我的屏幕通过向我显示我的用户名并允许我访问身份验证允许的功能来代表这一点。当我使用具有相同服务器端代码和过程的（32 位）IE 9 版本“9.0.8112.16421”时......当我进行重定向时，我的会话变量“用户名”消失了。事实上，会话的项目计数为 0。在重定向之前设置会话变量并且它是正确的。我在 Windows Server 2008 R2 64 位机器和 Windows 7 64 位机器上得到了相同的结果。我正在使用一个同时托管 IIS 和 SQL 的服务器。我没有使用会话服务器。我已经追查过了... 代码完全按照需要运行，直到重定向。接收凭据，执行我的存储过程以验证...在重定向之前设置会话变量（我可以看到会话和变量并且值是正确的）..然后重定向...如前所述，使用 Chrome 可以正常工作根据需要...使用 IE，会话在重定向时丢失。我也尝试过，但没有成功： Response.Redirect("/", false); 所以我确信 IE 正在做的事情，可能是在客户端上设置 cookie，这会导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！接收凭据，执行我的存储过程以验证...在重定向之前设置会话变量（我可以看到会话和变量并且值是正确的）..然后重定向...如前所述，使用 Chrome 可以正常工作根据需要...使用 IE，会话在重定向时丢失。我也尝试过，但没有成功： Response.Redirect("/", false); 所以我确信 IE 正在做的事情，可能是在客户端上设置 cookie，这会导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！接收凭据，执行我的存储过程以验证...在重定向之前设置会话变量（我可以看到会话和变量并且值是正确的）..然后重定向...如前所述，使用 Chrome 可以正常工作根据需要...使用 IE，会话在重定向时丢失。我也尝试过，但没有成功： Response.Redirect("/", false); 所以我确信 IE 正在做的事情，可能是在客户端上设置 cookie，这会导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！在重定向之前设置会话变量（我可以看到会话和变量并且值是正确的）..然后重定向......并且如前所述，使用Chrome它可以完全按照需要工作......使用IE会话丢失重定向。我也尝试过，但没有成功： Response.Redirect("/", false); 所以我确信 IE 正在做的事情，可能是在客户端上设置 cookie，这会导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！在重定向之前设置会话变量（我可以看到会话和变量并且值是正确的）..然后重定向......并且如前所述，使用Chrome它可以完全按照需要工作......使用IE会话丢失重定向。我也尝试过，但没有成功： Response.Redirect("/", false); 所以我确信 IE 正在做的事情，可能是在客户端上设置 cookie，这会导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！并且如前所述，对于 Chrome，它可以完全按照需要工作......对于 IE，会话在重定向时丢失。我也尝试过，但没有成功： Response.Redirect("/", false); 所以我确信 IE 正在做的事情，可能是在客户端上设置 cookie，这会导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！并且如前所述，对于 Chrome，它可以完全按照需要工作......对于 IE，会话在重定向时丢失。我也尝试过，但没有成功： Response.Redirect("/", false); 所以我确信 IE 正在做的事情，可能是在客户端上设置 cookie，这会导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！这导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！这导致浏览器和服务器会话之间不匹配。我不应该做一个response.redirect吗？？？如果我执行 response.redirect，如何防止会话重置？再一次记住，当我使用 Chrome 时，这不会发生。令人沮丧...感谢您的帮助！*

**新信息**

在尝试关闭每个答案的 IE 缓存后......我决定将 sessionID 输出到浏览器，以便我可以看到它是什么。

这种行为比登录和重定向更直接......

在 IE 中，只需使用 F5 刷新浏览器即可在服务器上创建一个新会话。每次刷新我都会收到一个新的会话 ID。

使用 Chrome 进行测试，除非我调用 session.abandon、超时会话或关闭并重新启动浏览器，否则我不会获得新的会话 ID。

我只是在用户单击注销时调用 session.abandon ，但已注释掉该代码（以防万一）以确保我不会意外放弃它。

在实际页面刷新之间的某个地方，IE 正在将自己呈现给服务器以进行新会话...... ARGH。

例如：Chrome：登录前：myjuzrmccerk1t4eakcliq14 登录后：myjuzrmccerk1t4eakcliq14

IE：登录前：unyebuc2ikac12xnhpssy0em 登录后：unyebuc2ikac12xnhpssy0em

使用 F5 或 Ctrl-R 刷新： 一：ptjt42fjwzgdreyyyo3cmvrs 二：s1hd5aatl5yexeuc125aqhst 三：kbpflurcdcxubux3scmdm4k5

**更新 2**

我已将站点更改为使用“状态服务器”进行会话并启动了相应的服务......行为没有变化。

**回答**

由于我的代表很低……这不会让我再等 3 个小时来回答我自己的问题……但是就在这里……

我找到了解决办法……通过反复试验。

在我添加“cookieless=true”之前，会话状态中的 InProc 和 StateServer 都具有相同的结果

```
<sessionState mode="StateServer" cookieless="true" /> 
```

这会导致会话状态在 Chrome 和 IE（问题所在）中保持一致，并且我的会话 ID 在页面刷新之间不再更改。我无法确定为什么会发生这种情况，但它仍然是固定的。感谢 Mike 和 antinescience 的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:28:25.350

在我添加“cookieless=true”之前，会话状态中的 InProc 和 StateServer 都具有相同的结果

这会导致会话状态在 Chrome 和 IE（问题所在）中保持一致，并且我的会话 ID 在页面刷新之间不再更改。我无法确定为什么会发生这种情况，但它仍然是固定的。感谢 Mike 和 antinescience 的帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T20:57:02.480

还有[一些](http://forums.asp.net/t/1886298.aspx/1?Response%20Redirect%20not%20working%20right%20in%20IE9) [其他](http://forums.aspfree.com/asp-development-5/session-variables-response-redirect-internet-explorer-222169.html)报告表明，IE 的缓存机制（被广泛认为，嗯，不是很好）可能是罪魁祸首。您可以尝试将以下内容附加到您的页面：

```
// Stop Caching in IE
Response.Cache.SetCacheability(System.Web.HttpCacheability.NoCache);

// Stop Caching in Firefox
Response.Cache.SetNoStore(); 
```

……看看有没有效果？另一种选择是你可以这样做：

```
int randomNumber = new Random().Next(1, 1000);
Response.Redirect("/?nocache=" + randomNumber); 
```

...只是为了测试。哎呀，您也可以将日期作为数字输入以进行测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-07T08:47:45.203

几天以来我都遇到了同样的问题，最后我知道了每次刷新都更改会话的原因，首先在使用 Response.Redirect( URL ,false) 方法之后，我意识到我输入的 URL 是 AbspoluteURI 作为**“http :// ServerIP/File/Page.aspx"**，我用**AbsolutePath**方法代替" **~/File/Page.aspx** "，我的问题解决了！！IE 认为当您编写**AbsoluteURL** **而不是 AbsolutePath**时服务器已更改，我希望这会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-16T17:09:47.080

我也有这个问题，这个[SO 响应](https://stackoverflow.com/a/36475685/4375327)解决了我的问题。如果您的主机名有下划线（这似乎是无效的），IE 似乎会放弃会话（！）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-04T09:38:18.437

我在 IFrame 中托管的网页也遇到了同样的问题。故障排除显示 ASP.NET 会话 cookie 在此过程中丢失，并且仅在使用 Internet Explorer 时发生。当我在 IE 的单独选项卡中打开我的网页时，一切正常。

该问题是由 Internet Explorer 中的安全性引起的。除非有 P3P HTTP 标头，否则它不会保留 cookie。您可以通过转到 IE->查看->网页隐私报告...来查看被阻止的 URL，然后选择显示“受限网站”。

我通过在每个请求中添加一个虚拟 P3P 标头解决了这个问题。标题看起来像这样；

```
P3P:"Bogus P3P header because Internet Explorer requires one" 
```

这与 facebook.com 使用的方法相同。他们的 p3p 标头看起来像这样；

```
p3p:CP="Facebook does not have a P3P policy. Learn why here: http://(...)/p3p" 
```

另请参阅[Internet Explorer 中的 IFRAME 中被阻止/未保存的 Cookie](https://stackoverflow.com/questions/389456/cookie-blocked-not-saved-in-iframe-in-internet-explorer)

# ajax - servlet ajax 空指针异常

> ID：15602853
> 
> 赞同：0
> 
> 时间：2013-03-24T19:20:07.550
> 
> 标签：ajax, servlets, nullpointerexception

每当我尝试从我的 servlet 中的 ajax 参数中读取数据时，我都会收到一个空指针异常。继承人的ajax代码：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="java.sql.*;" %>
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script>
        function findNext(id,label){
            alert(id);
            alert(label);
            var xmlhttp=new XMLHttpRequest();
            xmlhttp.onreadystatechange=function(){
                if(xmlhttp.readyState===4 && xmlhttp.status===200)
                    {
                        var ret=xmlhttp.responseText;
                        var prob=ret.substring(0,ret.indexOf("///"));
                        var pdesc=ret.substring(3);
                        document.getElementById("prob").innerHTML=prob;
                        document.getElementById("pdesc").innerHTML=pdesc;                            
                    }                        
            };
            xmlhttp.open("POST","Servlet1",true);
            var sendstr="pid="+id+"&labelid="+label;
            xmlhttp.send(sendstr);
        }
    </script>
</head>
<body>
    <%
        Connection con;
        Statement s;
        ResultSet rs;
        String sql,pid=null,prob=null,pdesc=null,yesL=null,noL=null;

        try{
            Class.forName("com.mysql.jdbc.Driver");
            con=DriverManager.getConnection("jdbc:mysql://localhost:3306/cdt", "root", ".hack%//sign66");
            s=con.createStatement();

            sql="select * from cdt.problem where pid='1.01'";
            rs=s.executeQuery(sql);
            rs.next();

            pid=rs.getObject("pid").toString();
            prob=rs.getObject("problm").toString();
            pdesc=rs.getObject("pdesc").toString();
            yesL=rs.getObject("yesL").toString();
            noL=rs.getObject("noL").toString();

        }
        catch(Exception e){
            e.printStackTrace();
        }
    %>

    <!--STYLE THESE 2 <P> STATEMENTS-->
    <p id="prob"><%=prob%></p>
    <p id="pdesc"><%=pdesc%></p>
    <form>
           <input type="button" value="Yes" onclick="findNext(<%=pid%>,<%=yesL%>);"/>
           <input type="button" value="No" onclick="findNext(<%=pid%>,<%=noL%>);"/>
    </form>
</body>
</html> 
```

我传递给函数的变量可以通过警报很好地读取。

继承人的servlet代码：

```
package cdt1;

import cdt.FindNextLabelLocal;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.ejb.EJB;

public class Servlet1 extends HttpServlet {

Connection con;
Statement s;
ResultSet rs;    
@EJB private FindNextLabelLocal obj;

@Override
public void init(ServletConfig config) throws ServletException{
    try{
        Class.forName("com.mysql.jdbc.Driver");
        con=DriverManager.getConnection("jdbc:mysql://localhost:3306/cdt", "root", ".hack%//sign66");
        s=con.createStatement();

    }
    catch(Exception e){
        e.printStackTrace();
    }            
}

@SuppressWarnings("UnusedAssignment")
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        String pid,label,res;
        @SuppressWarnings("UnusedAssignment")
        float current,next;

        current=next = 0;
        pid=request.getParameter("pid").toString(); // pid of the question
        label=request.getParameter("labelid").toString(); //label of the next question or solution based on button press
        current=Float.parseFloat(pid);
        next=Float.parseFloat(label);

        res=obj.findNext(current,next).toString();
        out.write(res);

    }
    catch(Exception e){
        e.printStackTrace();
    }
    finally {            
        out.close();
    }
}

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    processRequest(request, response);
}

@Override
public String getServletInfo() {
    return "Short description";
}
} 
```

空异常发生在 cdt1.Servlet1.processRequest(Servlet1.java:66) 的 cdt1.Servlet1.doPost(Servlet1.java:124) 处的 java.lang.NullPointerException 第一个发生在我尝试读取 pid 值第二个时当 processRequest 被调用时。我在网上查找了很多资源，这些资源展示了如何使用 ajax 和 servlet，根据我读过的内容，我没有做错任何事情。如果有人能指出我正确的方向，那就太棒了。提前致谢。我正在使用带有 glassfish 3.1.2 的 netbeans 7.3，如果这会有所不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:50:55.853

解决了。使用 post 发送数据时需要设置 content-type http header。在 put 请求期间也需要

# drupal-7 - 如何在以编程方式保存到 drupal 7 之前更改文件？

> ID：15602856
> 
> 赞同：0
> 
> 时间：2013-03-24T19:20:10.493
> 
> 标签：drupal-7

我想在drupal上上传一个音频文件，然后修剪音频文件并将其保存在sites/default/files/audio/中。我知道如何修剪音频文件。现在我只想在文件上传而不保存时在drupal中设置我的音频修剪库。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:31:53.873

如果您了解 drupal 自定义编码，这可能会对您有所帮助.. [http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_presave/7](http://api.drupal.org/api/drupal/modules!node!node.api.php/function/hook_node_presave/7)

# python - 我如何有条件地重试并重新抓取 Scrapy 中的当前页面？

> ID：15602857
> 
> 赞同：3
> 
> 时间：2013-03-24T19:20:11.667
> 
> 标签：python, web-scraping, scrapy

我是 Scrapy 的新手，对 Python 并不太熟悉。我已经设置了一个刮板来从网站上刮取数据，但是虽然我正在使用代理，但如果同一个代理被使用太多次，那么我的请求会显示一个页面，告诉我我访问的页面太多太快了（HTTP 状态码 200）。

当我的爬虫看到页面的状态代码正常时，它没有找到所需的数据并转到下一页。

我可以确定这些页面何时通过 HtmlXPathSelector 显示，但我如何向 Scrapy 发出信号以重试该页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:29:20.590

Scrapy 带有一个内置的[`retry`中间件](https://docs.scrapy.org/en/0.18/topics/downloader-middleware.html#module-scrapy.contrib.downloadermiddleware.retry)。您可以对其进行子类化并覆盖该[`process_response`](https://docs.scrapy.org/en/0.18/topics/downloader-middleware.html#scrapy.contrib.downloadermiddleware.DownloaderMiddleware.process_response)方法以包含一个检查以查看告诉您您访问太多页面的页面是否显示得太快

# ruby-on-rails - 使用链式 where 时 ActiveRecord 不过滤

> ID：15602859
> 
> 赞同：0
> 
> 时间：2013-03-24T19:20:16.690
> 
> 标签：ruby-on-rails, activerecord

```
 # Get only non-empty reviews
  query = Review.where("content <> ''")

  # filter on status (unreviewed, reviewed, flagged, etc), if provided
  if (status)
    query.where("status = ?", status)
  end

  # Order rows
  query.order("created_on ASC")

  # iterate, this should fire the query
  reviews = query.each_with_object([]) do |review, a| 
```

我的问题是我的查询没有过滤“状态”。我已经检查了我的代码是否进入了 if 语句。我什至做到了：

```
 # Get only non-empty reviews
  query = Review.where("content <> ''")

  # filter on status (unreviewed, reviewed, flagged, etc), if provided
  query.where("status = ?", status) 
```

我确定我做错了什么，但我不知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:39:41.670

刚找到。每次都需要分配查询

```
 # Get only non-empty reviews
  query = Review.where("content <> ''")

  # filter on status (unreviewed, reviewed, flagged, etc), if provided
  query.where("status = ?", status) 
```

# xna - 在 XNA Windowsphone 中重新加载/重置 Texture2D

> ID：15602860
> 
> 赞同：0
> 
> 时间：2013-03-24T19:20:17.470
> 
> 标签：xna, windows-phone, reload, reset, texture2d

我正在使用 Texture2D.Setdata 操作 Texture2D 并更改其颜色。

但是我想在一段时间后再次重置 Texture2D，目前我在内存中拥有整个纹理数据，但现在我的应用程序中有 OutOfMemoryExceptions。

我试过这个：

```
Color[] bla = new Color[thetexture.Width * thetexture.Height];
this.Content.Load<Texture2D>(".\\textures\\mytexture").GetData(bla);
thetexture.SetData(bla); 
```

但它不会改变任何东西，纹理只是保持颜色。

我怎样才能重置纹理，让它看起来像刚加载的，但内存使用量很小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:43:24.383

`ContentManager`缓存对象。您的调用`Load`是返回可能与您的对象*相同*`thetexture`的对象（您已经修改的对象）。

您需要使用原始数据加载纹理的单独实例。你需要一个单独`ContentManager`的。可能已经被[定制](http://blogs.msdn.com/b/shawnhar/archive/2007/03/09/contentmanager-readasset.aspx)为从不缓存对象。

或者，创建一个`new Texture2D`对象并将原始数据复制到该对象中，然后再对其进行修改，而原始数据保持不变。

# javascript - 在更改组合框时在输入框中插入一个数组项

> ID：15602861
> 
> 赞同：0
> 
> 时间：2013-03-24T19:20:17.713
> 
> 标签：javascript

当组合框的选择发生变化时，我希望将特定的数组项设置为输入标记的值。

```
 <%@ page language="java" import="java.util.*;" pageEncoding="ISO-8859-1"%>

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
    <html>
        <head>
        </head>
    <script language="javascript">

    function check()
        {
            if(!validate())
                return false;
        }

    function validate()
        {
            if (document.form.amount.value <=0)
            {
                alert ("Please enter valid loan amount.");
                return false;
            }
            else
                return true;
        }

        var arr = new Array();
        arr[0] = new Array("-select-", "10.0","10.5", "12.0");

        function change(combo1) {
            document.getElementById("rate").style.visibility = "visible";
            var sel = document.getElementById("combo1");
        var val = document.getElementById("rate").value;
        for(var i = 0, j = sel.options.length; i < j; ++i) {
            if(sel.options[i].innerHTML == val) {
               sel.selectedIndex = i;
               break;
            }
        }
    }

}
    </script>
        <jsp:include page="include.jsp"></jsp:include>

        <body>
            <br>
            <form action="PaymentServlet.do" name="form" method="post"
                ONSUBMIT="return check()">
                <fieldset>
                    <legend>
                        <font style="font-family: sans-serif" size="4px" color="Megenta">Online Loan
                            Application Page</font>
                    </legend>
                    <br />

                    Loan Type
                    <select name="combo1" onchange="change(this);">
                        <option value="0">
                            -Select-
                        </option>
                        <option value="1">
                            Home Loan
                        </option>
                        <option value="2">
                            Education Loan
                        </option>
                        <option value="3">
                            Car Loan
                        </option>
                    </select>
                    <br />

                    Interest Rate(%)<input type="text" name="rate" style="visibility: hidden;">
                    <br />
                    Loan Amount
                    <input type="text" name="loanamount" />
                    <br />
                    <input type="submit" name="go" value="o Go o" />
                </fieldset>
            </form>
        </body>
    </html> 
```

根据贷款类型，我想从数组中选择相应的利率，并希望将此数组项用作 name="rate" 的输入标签的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:01:50.310

如果你的数组定义像

```
arr[0] = new Array("-select-", "10.0","10.5", "12.0"); 
```

然后

```
function change(combo1) {
    document.getElementById("rate").style.visibility = "visible";
    var rate = document.getElementById("rate");
    rate.value = arr[0][combo1.selectedIndex];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:29:40.223

要获取组合框的值，您需要执行以下操作：

```
var val = sel.options[sel.selectedIndex].value; 
```

`sel`是你的组合框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:41:28.827

您不能通过将`document.getElementById("elementid")`名称作为参数来使用。参数必须是`id`元素而不是名称。

实际上你不需要使用 document.getElementById 因为你`this`在 change 函数中作为参数返回。`this`指实际的元素。

所以你的更改功能应该是这样的，

```
function change(combo1) {
       document.getElementById("rate").style.visibility = "visible";
       document.getElementById("rate").value = arr[combo1.selectedIndex];
} 
```

您的数组定义也是错误的。对的来了，

 ~~~~```
var arr = new Array();
arr[0] = new Array("-select-", "10.0","10.5", "12.0"); 
```~~  ~~```
var arr = new Array("-select-", "10.0","10.5", "12.0"); 
```

最后别忘了为速率输入添加 id 属性，

```
<input type="text" id="rate" name="rate" style="visibility: hidden;"> 
```

这是完整的代码和一个[DEMO](http://jsfiddle.net/VfHP4/1/)

```
<script language="javascript">

function check()
    {
        if(!validate())
            return false;
    }

function validate()
    {
        if (document.form.amount.value <=0)
        {
            alert ("Please enter valid loan amount.");
            return false;
        }
        else
            return true;
    }

    var arr = new Array("-select-", "10.0","10.5", "12.0");

    function change(combo1) {
        document.getElementById("rate").style.visibility = "visible";
       document.getElementById("rate").value = arr[combo1.selectedIndex];
}

</script>
    <body>
        <br>
        <form action="PaymentServlet.do" name="form" method="post"
            ONSUBMIT="return check()">
            <fieldset>
                <legend>
                    <font style="font-family: sans-serif" size="4px" color="Megenta">Online Loan
                        Application Page</font>
                </legend>
                <br />

                Loan Type
                <select name="combo1" onchange="change(this);">
                    <option value="0">
                        -Select-
                    </option>
                    <option value="1">
                        Home Loan
                    </option>
                    <option value="2">
                        Education Loan
                    </option>
                    <option value="3">
                        Car Loan
                    </option>
                </select>
                <br />

                Interest Rate(%)<input type="text" id="rate" name="rate" style="visibility: hidden;">
                <br />
                Loan Amount
                <input type="text" name="loanamount" />
                <br />
                <input type="submit" name="go" value="o Go o" />
            </fieldset>
        </form>
    </body> 
```~~~~

# ide - 如何向 Eclipse 添加不同的编程语言（C++、C#、Java）

> ID：15602862
> 
> 赞同：8
> 
> 时间：2013-03-24T19:17:27.700
> 
> 标签：ide, eclipse

另一个完全初学者的问题。我刚刚学习了两门 Java 入门课程，我注意到 Eclipse 还可以支持其他语言的开发（我不知道）。有谁知道如何将其他语言添加到 Eclipse 以便我可以在 IDE 之间切换，或者我是否必须完全单独安装每种语言的 Eclipse？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T09:52:49.653

在 Eclipse 中，使用菜单帮助 -> 安装新软件。在组合框中选择“所有可用站点”，稍等片刻，然后您可以探索一些其他可用的插件和语言。

根据您的 Eclipse 版本，您可能还有一个菜单项 Help -> Eclipse Marketplace。那个更舒服，因为它允许您轻松浏览[Eclipse Marketplace](http://marketplace.eclipse.org/)中列出的所有插件。您还可以在浏览器中浏览市场，然后将有趣的插件从浏览器拖放到正在运行的 eclipse 中（如果您的 eclipse 版本足够新）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T03:20:53.930

Eclipse是一个插件框架......

您有两个选择——幸运的是，Eclipse 社区认为在一系列产品中生产 Eclipse 是合适的，这些产品将满足 99% 的人想要的 99%。这些发行版很不错。您安装它们并开始工作。然后，您可以根据需要扩展它们，但它们可以很好地、可靠地完成所有基础知识，开箱即用。用eclipse安装多个很容易，它们不会相互干扰，如果一个坏了，其余的都不受影响。

另一种选择是通过添加所需的插件来扩展框架。所以你从一个 Eclipse 发行版开始，下载并安装插件，直到牛回家。在完美的世界中，这将是完美的解决方案。这不是一个完美的世界......你还没有安装所有插件，Eclipse 突然崩溃......

出现问题是因为有时

*   插件有问题
*   插件彼此不兼容。
*   不同的插件依赖于另一个插件的不同版本（间接不兼容）。
*   插件不像其他工具那样工作
*   有太多的插件可供选择——你不需要的最多，而且你需要的插件可能很难找到。

向 Eclipse 添加多个（可能是 1 个）插件会使您面临这些问题。这不适合新手或没有参与修复 Eclipse 的工作的人。如果你有一个真正的理由，比如你的虐待狂，或者这是你的工作，或者你希望它成为你的工作，让 100 名开发人员的团队富有成效，那么插件很棒，否则，下载一个预装的，经过测试，可靠的发行版，并利用贡献者的出色工作。

# javascript - 我可以将元素拖到文档窗口之外，但不能拖到简单的 div 之外。为什么？

> ID：15602874
> 
> 赞同：0
> 
> 时间：2013-03-24T19:21:21.290
> 
> 标签：javascript, addeventlistener, mousemove

我试图通过捕获鼠标坐标并相应地移动东西来将东西拖出我的文档。目前我使用 document.addEventListener ，即使我将东西拖到窗口外也能很好地工作。功能正在增加，为了跟上复杂性，我宁愿使用 divs 和 div1.addEventListener 代替。

但是这种变化并不能让我把东西拖到我的 div 之外，更不用说我的窗口之外了。我说的是仅拖动（鼠标在 div 内向下，然后将鼠标拖出）。一旦我在 div 之外，它就会停下来。

我不明白发生了什么，我很久以前就尝试过它，我记得这是工作代码。

[在这里摆弄](http://jsfiddle.net/VC64T/)

```
window.onload = function()
{
    div1 = document.getElementById("div1");

    document.addEventListener('mousedown', function(evt){mouseDown(evt, this)}, false);
    document.addEventListener('mousemove', function(evt){mouseMove(evt, this)}, false);
    document.addEventListener('mouseup', function(evt){mouseUp(evt, this)}, false);

    // div1.addEventListener('mousedown', function(evt){mouseDown(evt, this)}, false);
    // div1.addEventListener('mousemove', function(evt){mouseMove(evt, this)}, false);
    // div1.addEventListener('mouseup', function(evt){mouseUp(evt, this)}, false);
}

function mouseMove(evt, caller)
{
}

function mouseDown(evt, caller)
{
}

function mouseUp(evt, caller)
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:33:06.673

由于 div 的坐标没有改变，所以当拖动超出其范围时，它会停止获取 mouseMove 事件。

# ios - 将文档子目录中的图像加载到 UICollectionViewCell

> ID：15602875
> 
> 赞同：1
> 
> 时间：2013-03-24T19:21:29.040
> 
> 标签：ios, objective-c, collectionview

我在“/Documents/saved/”目录中有几张 png 格式的图像。我将此目录加载到一个名为“contents”的数组中 当我使用 NSLog 查看该数组的内容时，我会看到图像以及 .DS_STORE 文件 我想要做的是将所有这些图像加载到 UICollectionView 单元格中。

我试过这个，

```
[[cell collectionImageView] setImage:
        [UIImage imageWithContentsOfFile:
              [contents objectAtIndex:indexPath.item]]]; 
```

collectionImageView 连接到 UICollectionViewCell 中的 UIImageView

但它似乎不起作用。编辑

```
 NSString *dataPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/DImage"];
NSArray *contents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:dataPath error:NULL]; 
```

NSLog(@"%@", 内容);

这给了我输出

```
2013-03-25 10:37:20.186 aUX[543:c07] (
".DS_Store",
"savedImage_0.png",
"savedImage_1.png",
"savedImage_2.png",
"savedImage_3.png",
"savedImage_4.png",
"savedImage_5.png"
) 
```

（我拖了一个名为 collectionImageView 的 UIImageView。）我需要在集合视图单元格中一一显示这些图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:44:36.583

目前尚不清楚您使用的是什么数据类型。也许打破你的单线可能有助于使情况更加清晰。此外，通过这种方式，您可以使用 NSLog 或在调试器中检查每个步骤。

```
NSString *fileName = [contents objectAtIndex:indexPath.item]; 
NSString *path = [filesDirectory stringByAppendingPathComponent:fileName];
UIImage *image = [UIImage imageWithContentsOfFile:path];
UIImageView *cellImageView =  cell.collectionImageView;
cellImageView.image = image; 
```

也许你的`contents`数组包含 NSURLs 而不是 NSStrings。这样你就可以知道了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-13T11:41:10.663

```
in ur cellForRowAtIndexPath
cell.collectionImage.image=[contents objectAtIndex:indexPath.row];
return cell; 
```

# android - android应用程序仍然保持注册加速度传感器

> ID：15602878
> 
> 赞同：1
> 
> 时间：2013-03-24T19:21:51.620
> 
> 标签：android, accelerometer, android-sensors, power-management

我的应用程序的加速度传感器有问题。一切正常并读取值等等......但传感器在完成活动后保持活动状态！使用像[GSam](https://play.google.com/store/apps/details?id=com.gsamlabs.bbm)这样的应用程序，我注意到我的应用程序仍在消耗！

我认为我正确地进行了注册和注销过程，实际上磁场和方向传感器未正确注册。

我怎样才能摆脱那个传感器？请帮忙！

请参阅下面的源代码（仅保留注册/注销的东西）：

```
 package com.acceler;

    import android.app.Activity;
    import android.os.Bundle;
    import android.os.Vibrator;
    import android.hardware.*;
    import android.app.Activity;
    import android.content.Context;
    import android.os.Bundle;
    import android.widget.TextView;
    import android.widget.Toast;
    import android.util.Log;
    import android.view.*;

    public class MainActivity extends Activity {

        SensorManager sensorManager;

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            sensorManager = (SensorManager)getSystemService(SENSOR_SERVICE);
            WindowManager mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);
            Display mDisplay = mWindowManager.getDefaultDisplay();

        } /* End onCreate activity */

        private SensorEventListener sensorEventListener = new SensorEventListener() {

            public void onAccuracyChanged(Sensor sensor, int accuracy) {

            }

            /* Get the Sensors */
            public void onSensorChanged(SensorEvent event) {

                  switch (event.sensor.getType()) {
                         case Sensor.TYPE_ACCELEROMETER:
                                  System.arraycopy(event.values, 0, mGravs, 0, 3);
                                  break;
                         case Sensor.TYPE_MAGNETIC_FIELD:
                                  System.arraycopy(event.values, 0, mGeoMags, 0, 3);
                                  break;
                         case Sensor.TYPE_ORIENTATION:
                                System.arraycopy(event.values, 0, mOldOreintation, 0, 3);
                          break;

                         default:
                                  return;
                }
                  if (mprefix == "  ***"){
                  // Get instance of Vibrator from current Context
                  Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);          
                    // Vibrate for 50 milliseconds
                  v.vibrate(50);
                  //Toast.makeText(getBaseContext(), "Sensor unreliable!", 500).show();

                  }

            }
        };

        private void stopit(){
            sensorManager.unregisterListener(sensorEventListener,sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER));
            sensorManager.unregisterListener(sensorEventListener,sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD));
            sensorManager.unregisterListener(sensorEventListener,sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION));

        }

        @Override
         protected void onResume() {
            super.onResume();
            sensorManager.registerListener(sensorEventListener, sensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_FASTEST);
            sensorManager.registerListener(sensorEventListener, sensorManager.getDefaultSensor(Sensor.TYPE_MAGNETIC_FIELD), SensorManager.SENSOR_DELAY_FASTEST);
            sensorManager.registerListener(sensorEventListener, sensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION), SensorManager.SENSOR_DELAY_UI);
         }

        protected void onPause() {
            super.onPause();

            stopit();
        }

        @Override
        protected void onDestroy() {
            // TODO Auto-generated method stub
            super.onDestroy();
            stopit();
        }

        @Override
        protected void onStop() {
            // TODO Auto-generated method stub
            super.onStop();
            stopit();
        }    

    } 
```

# php - 将 JS 变量传递给 PHP 包含文件的问题

> ID：15602883
> 
> 赞同：0
> 
> 时间：2013-03-24T19:22:30.230
> 
> 标签：php, javascript, html, include

我有一个 php 文件，我使用它来根据输入变量设置动态生成的页面。它从 index.html 页面开始，其中收集了一些变量，其中一些不是简单的字符串，而是复杂的 Google 地球对象。在提交该页面时，它会发布到另一个页面，您将被重定向到创建的文件。当我尝试在用于生成页面的 php 包含文件中使用该变量时，问题就来了. 这是我目前正在尝试的。

单击此按钮后，将设置变量 flyto1view。

```
 $("#flyto1").click(function(){          
    if (!flyto1view){
        flyto1view = ge.getView().copyAsLookAt(ge.ALTITUDE_RELATIVE_TO_GROUND);
            $("#flyto1view1").val(flyto1view)
    }
    else {
        ge.getView().setAbstractView(flyto1view);

    }
}); 
```

然后从这里我尝试将值设置为**隐藏**字段，但我不确定这种变量是否具有可以这样设置的值。发布后将此变量放在这里的最佳方法是什么

```
<? 
if (isset($_POST['submit']) && $_POST['submit']=="Submit" && !empty($_POST['address']))     {//if submit button clicked and name field is not empty 
$flyto1view1 = $_POST['flyto1']; 
$address = $_POST['address']; //the entered name 
$l = $address{0}; // the first letter of the name 

// Create the subdirectory: 
// this creates the subdirectory, $l, if it does not already exists 
// Note: this subdirectory is created in current directory that this php file is in. 
if(!file_exists($l))  
{  
mkdir($l);  
} 
// End create directory 

// Create the file: 
$fileName = dirname(__FILE__)."/$address.html"; // names the file $name 
$fh = fopen($fileName, 'w') or die("can't open file"); 
// The html code: 
// this will outpout: My name is (address) ! 
$str = "    
<?  php include ('template.php') ?>

"; 
fwrite($fh, $str); 
fclose($fh); 
// End create file 

echo "Congradualations!<br /> 
The file has been created. 
Go to it by clicking <a href=\"$address.html\">here</a>."; 
die(); 
 } 

// The form: 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:29:40.347

首先。从用户输入创建文件是非常危险的。也许这只是您的代码的摘要，但是`mkdir`从输入的第一个字母开始而不检查第一个字母实际上是一个字母而不是一个点、斜杠或其他字符不是一个好的做法。

无论如何，关于你的问题。我可能会使用 $_GET 变量传递给第二个文件。所以在你使用的第二个文件`<?php $_GET['foo'] ?>`和你做的第一个文件中：

```
echo "Congradualations!<br /> 
    The file has been created. 
    Go to it by clicking <a href=\"$address.html?foo=$flyto1view1\">here</a>."; 
```

您还可以将变量回显到模板中，如下所示：

```
$str = '
    <?php 
        $var = \'' . $flyto1view1 . '\';
        include (\'template.php\')
    ?>'; 
```

# javascript - 我的表单验证功能失败了什么？

> ID：15602885
> 
> 赞同：0
> 
> 时间：2013-03-24T19:22:33.517
> 
> 标签：javascript, html, forms, loops, validation

因此，我尝试制作一个循环遍历表单元素并检查元素长度的函数，如果是，则更改类，以便它们可以具有不同的样式。我假设的代码可以工作，并且我的控制台中没有任何错误，所以我无法确定到底出了什么问题。如果有人能告诉我为什么这不起作用或如何解决它，那就太棒了！谢谢！

```
function validate_form(){
 var form = document.forms['form_name']; //store form into a variable
 var validated = true; // store return value for onsubmit attribute
     for(i=0; i<form.elements.length; i++){
      if(form.elements[i].value.length){  // check if form elements are empty
           form.elements[i].className = "validate_failed";  // if elements are empty, add a class that will style them
           validated = false;
           return validated;
    } else{
        validated = true;
        return validated;
    }
    return validated;
}
return validated;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:40:46.233

尝试

```
function validate_form(){
  var form = document.forms['form_name']; //store form into a variable
  for(var i=0; i<form.elements.length; i++){
    if(form.elements[i].value.length===0){  // check if form elements are empty
      form.elements[i].className = "validate_failed";  // if elements are empty, add a class that will style them
      return false;
  }
  return true;
} 
```

假设

```
<form onsubmit="return validate_form()" ... 
```

或者让它不显眼

```
window.onload=function() {
  document.forms['form_name'].onsubmit=function() {
    for(var i=0; i<this.elements.length; i++){
      this.elements[i].className = "";
      if(this.elements[i].value.length===0){  // check if form elements are empty
        this.elements[i].className = "validate_failed";  // if elements are empty, add a class that will style them
        return false;
      }
      return true;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:26:56.320

因为您`validated`在循环的第一次运行期间返回，所以您只会检查表单的第一个元素。您只想设置`validated`，并在循环后返回它（或者在您第一次将其设置为 false 时返回，具体取决于您想要做什么）。

此外，就像乔评论的那样，您应该拥有`var i`而不是仅仅`i`这样，这`i`不是全球性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:42:52.073

以下代码适用于空元素

```
if(!form.elements[i].value.length){ 
```

或者

```
if(form.elements[i].value.length === 0){ 
```

# java - 使用 AOP 对函数参数进行断言

> ID：15602889
> 
> 赞同：0
> 
> 时间：2013-03-24T19:23:05.520
> 
> 标签：java, aop, guice

我们如何使用 Guice 库中的 AOP 对方法参数进行某些断言？

我为线性代数计算实现了一个 Vector 类。

```
class Vector{
    int n; // dimensions
    Vector sum(List<Float> v2){...}
    Vector sub(List<Float> v2){...}
    ...
} 
```

Vector 类中的方法通常采用 float 列表`v2`。`v2`在进行计算之前，如果与 vector 的维度不同，我想抛出一个异常`this`。

```
 if (v2.size() != n)
   throw new IllegalArgumentException(String.format("v2.size() should be %d, but is %d.", n, v2.size())); 
```

我可以为每个`v2`作为参数的方法复制相同的代码，但这很乏味。

有没有一种简单的方法可以使用 Guice 中的 AOP 功能来做同样的事情？就像是：

```
 Vector sum(@Dim(this.n) List<Float> v2){...} 
```

# wordpress - wordpress 中的 mod_rewrite

> ID：15602890
> 
> 赞同：0
> 
> 时间：2013-03-24T19:23:14.593
> 
> 标签：wordpress, apache, mod-rewrite, qtranslate

我有一个 url /nl/sunglasses，它是 qtranslate 的翻译页面。我想将其更改为 /zonnebrillen 。我不想在 wordpress 中更改它，因为“太阳镜”是由插件 wp-ecommerce 生成并硬编码的。我可以使用 mod_rewrite 以使 /nl/sunglasses 成为 /zonnebrillen。我怎样才能让wordpress“知道”显示相应的页面？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T07:45:58.027

这是我在让 WP 获取 URL 中的查询变量后修改的一些代码，包括“名称”作为查询变量。我包括常规 WP 安装发布的“原始”.htaccess 文件以显示上下文。我已经将重写分开以避免在 WP 更新或“某些管理功能”导致它发生变化时出现问题。PS我没有对此进行测试，但类似的代码适用于更复杂的页面重定向......所以试试吧。如果它不适合你，请告诉我，我会测试它。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^nl/sunglasses/ /zonnebrillen [NC,L]
</IfModule>
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

应与 WP 3.4+ 一起使用

# video - 如何嵌入此视频 - 连接失败应用程序拒绝连接 rtmp

> ID：15602891
> 
> 赞同：1
> 
> 时间：2013-03-24T19:23:16.287
> 
> 标签：video, rtmp

我花了 2 个多小时来嵌入这个视频，但我无法帮助我。

我尝试了我所知道的一切，但我没有成功。

任何帮助将不胜感激

```
http://up4free.com/stream.php?id=channel9 
```

# facebook - 检查用户是否是特定 facebook 组的成员

> ID：15602892
> 
> 赞同：3
> 
> 时间：2013-03-24T19:23:20.583
> 
> 标签：facebook, membership, facebook-oauth, facebook-group

您是否有一个示例，说明如何使用 php 确认尝试访问您的应用程序内容的人是特定 facebook 组的成员？我已经阅读了开发人员文档，它所做的只是让我更加困惑。我看过与此类似的帖子，但它们只向我展示了如何打印成员列表...

我需要知道如何获取列表并查看尝试访问该应用程序的用户是否是该组的成员，以便我可以 a：允许访问或 b：拒绝访问并将用户重定向到组页面，以便他们可以申请会员资格...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T19:41:43.693

是的，它非常简单，您只需要知道要执行此操作的组的 ID 并请求范围**user_groups**权限，这样您就可以查询用户拥有的组。

使用 PHP SDK，您可以这样做：

```
<?php
  // Remember to copy files from the SDK's src/ directory to a
  // directory in your application on the server, such as php-sdk/
  require_once('php-sdk/facebook.php');

  $config = array(
    'appId' => 'YOUR_APP_ID',
    'secret' => 'YOUR_APP_SECRET',
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();
if($user_id) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {

        $user_profile = $facebook->api('/me?fields=id,name,groups','GET');
        $user_belongs_to_group= FALSE;
        foreach($user_profile['groups']['data'] as $group){
          if($group['id']==YOUR_GROUP_ID)
           $user_belongs_to_group=TRUE;
        }
        if($user_belongs_to_group){
         //Alright! the user belongs to the group
        }
        else{
          //Oh snap you don't belong here, but you can if want to
        }

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl(); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   
    } else {

      // No user, print a link for the user to login
      $login_url = $facebook->getLoginUrl();
      echo 'Please <a href="' . $login_url . '">login.</a>';

        }

?> 
```

我从 facebook 获取的一些代码，您可以在此处查看查询组时返回的数据：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

按名称后的加号转到连接，选择组并按发送

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:41:57.210

您处于 catch-22 中，您将需要用户通过权限向他的组授予`user_groups`权限。

# html - 有哪些方法可以创建自定义 LabVIEW 控件？

> ID：15602898
> 
> 赞同：1
> 
> 时间：2013-03-24T19:23:54.963
> 
> 标签：html, silverlight, qt, webgl, labview

我正在寻找一种强大而有效的方法来创建任何类型的可想象的控件以用于 LabVIEW 项目。我很好奇你尝试了什么以及利弊是什么。我本人从未使用过 LabVIEW，但根据我对其他事物（C#、HTML5、Flash、Silverlight 等）的了解，有人请我为它编写控件。

在我看来，这种事情似乎已经或可以在 .NET、Flash、WebGL、Qt、Silverlight 以及其他一些中完成。理想情况下，我们不想编写任何代码两次，因此平台灵活性是一件好事，这使我倾向于使用 Web 解决方案。但是易于实现也很重要，我认为每次使用控件时，Web 解决方案都需要一些广泛的 Web 服务解析和编程。但我可能是错的。着眼未来也很重要。如果某件事在今天是一个很好的解决方案，但在 2 年内可能一文不值，那么提出它毫无意义。

（请注意，我并不是简单地询问如何更改（自定义）LabVIEW 控件的颜色，我也不对 xControls 作为最终解决方案感兴趣，因为它们显然不够强大。）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T21:42:10.620

我知道这可能无法回答您的问题，但如果您可以访问 LabVIEW，您可以分析[“军事”主题自定义控件套件](https://decibel.ni.com/content/docs/DOC-6325)，并查看[UI 兴趣组](https://decibel.ni.com/content/groups/ui)和[LabVIEW UI 提示和技巧](https://decibel.ni.com/content/groups/ui/blog/2010/04/29/creating-quality-uis-with-ni-labview--developer-days-2010-presentation)上的示例。这可能是您使用 LabVIEW 所能做的最好的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:54:56.053

.NET 可能是您最好的选择，LabVIEW 支持 .net 控件，因此您可以定义 UI 并重用您的 .net 代码。

我听说新的 LabVIEW 版本（2013 年 9 月到期）将使用 .NET 4 库作为默认库而不是当前的 2，因此您可能需要记住这一点。

如果我是您的公司，我不会轻易放弃 XControls（我可以理解这不是您的一杯茶）。

# sql - 使用子查询选择不工作

> ID：15602900
> 
> 赞同：0
> 
> 时间：2013-03-24T19:24:21.443
> 
> 标签：sql, sql-server, tsql

我不断收到此代码的错误。我没有使用 EXISTS。请帮助。

> 当不使用 EXISTS 引入子查询时，选择列表中只能指定一个表达式。

SQL：

```
 If ISDATE(@grpsearch) = 1
        SELECT     grp.GroupID,
                   vlanlist.InternetType, 
                   grp.GroupName, cast(grp.StartDateTime as date) as StartDate, 
                   convert(varchar,cast(grp.StartDateTime as time),100) as starttime,
                           (select case when datepart(hh,convert(datetime,grp.StartDateTime)) > 12 then datepart(hh,convert(datetime,grp.StartDateTime))-12
                            else case when datepart(hh,convert(datetime,grp.StartDateTime)) = 0 then '12' else datepart(hh,convert(datetime,grp.StartDateTime)) end end as starthour,
                            datepart(mi,convert(datetime,grp.StartDateTime)) as startmin, case when datepart(hh,convert(datetime,grp.StartDateTime)) >= 12 then 'PM' else 'AM' end as startperiod),
                    cast(grp.enddatetime as date) as EndDate, 
                    convert(varchar,cast(grp.EndDateTime as time),100) as EndTime, 

                    grp.UserInitials, 
                    grp.UserComments,
                    roomlist.RoomName, 
                    jacklist.JackNumber

FROM        a_Cisco.dbo.grp_internet as grp left outer join
            dbo.jacklist as jacklist ON grp.intJack = jacklist.intJack left outer join
            dbo.roomlist as roomlist ON grp.intRoom = roomlist.intROom left outer join
            dbo.vlanlist as vlanlist ON grp.VlanID =  vlanlist.VlanID

WHERE  (convert(varchar,cast(grp.StartDateTime as date),100)  = @grpsearch) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:41:25.583

问题是查询的这一部分：

```
 (select case when datepart(hh,convert(datetime,grp.StartDateTime)) > 12
                   then datepart(hh,convert(datetime,grp.StartDateTime))-12
                   else case when datepart(hh,convert(datetime,grp.StartDateTime)) = 0 
                             then '12' else datepart(hh,convert(datetime,grp.StartDateTime))
                        end
       end as starthour, 
```

首先，你根本不需要`select`。其次，您缺少右括号 ( `)`)。我会建议：

```
 (case when datepart(hh,convert(datetime,grp.StartDateTime)) > 12
            then datepart(hh,convert(datetime,grp.StartDateTime))-12
            else (case when datepart(hh,convert(datetime,grp.StartDateTime)) = 0 
                       then '12'
                       else datepart(hh,convert(datetime,grp.StartDateTime))
                  end)
       end) as starthour, 
```

# c# - 在您要测试的对象上模拟属性

> ID：15602903
> 
> 赞同：1
> 
> 时间：2013-03-24T19:24:34.647
> 
> 标签：c#, unit-testing, moq

我在一个类的实例上有一个属性，它本质上是对该类的其他属性求和。如何模拟“已知”属性但仍调用实例上的方法？这显然不起作用，但希望能解决我的问题：

```
public void TestSum()
{
    // Arrange
    var classToTestInstance = new ClassToTest();
    classToTestInstance.MyProp1 = new Mock().Returns(5); // MyProp1 is private set;
    classToTestInstance.MyProp2 = new Mock().Returns(3); // Same

    // There's not really an Act here...

    // Assert; Total is the actual property I want to test
    classToTestInstance.Total.Should().Be(8);

} 
```

我可以实例化一个实际的 ClassToTest 并执行将其置于正确状态以进行 Total 测试的函数，但我不只是在测试 Total 功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:29:38.793

> 我可以实例化一个实际的 ClassToTest 并执行将其置于正确状态以进行 Total 测试的函数，但我不只是在测试 Total 功能。

不，但是如果您觉得*需要*单独测试该功能，那么它可能不应该是同一个对象的一部分。

就我个人而言，我会这样做：让对象进入正确的状态，然后测试`Total`. 不要忘记，您可以对函数进行大量专用单元测试，这些函数也将用于使对象进入正确状态。

虽然肯定有一些模拟框架可以让您在测试原始`Total`行为时模拟这种行为，但我个人会避免模拟您尝试测试的同一个类 - 实际上我会避免过度使用模拟。它在正确的地方*很棒*，但是在使用真实的东西同样容易的地方（并且“真实的东西”是单独测试的）我会这样做。

# html - 浮动多个表

> ID：15602906
> 
> 赞同：2
> 
> 时间：2013-03-24T19:25:02.153
> 
> 标签：html, css, html-table, css-float

我在浮动我的桌子时有点卡住了。我总是在两张桌子之间留下一个我想删除的间隙。谁能解释我如何消除两个垂直表之间的间隙？

这是我所看到的和不正确的示例（差距）：

![在此处输入图像描述](../Images/bad8e0fef9efecc8a0a07d66764a4975.png)

HTML：

```
<head>
    <meta charset="UTF-8" />
    <link href="css/main.css" type="text/css" rel="stylesheet">
</head>

<body>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>Technical details</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">TV tuner integrated</td>
            <td class="spec-features-value">N</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Cooling type</td>
            <td class="spec-features-value">active</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Form factor</td>
            <td class="spec-features-value">ATX</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Number of processors installed</td>
            <td class="spec-features-value">1</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Fill rate</td>
            <td class="spec-features-value">28.8 billion texels/sec</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Graphics adapter family</td>
            <td class="spec-features-value">NVIDIA</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Maximum operating temperature</td>
            <td class="spec-features-value">98 °C</td>
        <tr>
    </tbody>
</table>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>Processor</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">Graphics processor</td>
            <td class="spec-features-value">GeForce GT 640</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Maximum resolution</td>
            <td class="spec-features-value">2560 x 1600 pixels</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Graphics processor family</td>
            <td class="spec-features-value">NVIDIA</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Processor clock speed</td>
            <td class="spec-features-value">901 MHz</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Shader clock</td>
            <td class="spec-features-value">1802 MHz</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Graphics adapter RAMDAC</td>
            <td class="spec-features-value">400 MHz</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Parallel processing technology support</td>
            <td class="spec-features-value">N</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Maximum analog resolution</td>
            <td class="spec-features-value">2048 x 1536 pixels</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Maximum digital resolution</td>
            <td class="spec-features-value">2560 x 1600 pixels</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Stream processors</td>
            <td class="spec-features-value">384</td>
        <tr>
    </tbody>
</table>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>Memory</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">Discrete graphics adapter memory</td>
            <td class="spec-features-value">2048 MB</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Graphics adapter memory type</td>
            <td class="spec-features-value">DDR3-SDRAM</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Memory bus</td>
            <td class="spec-features-value">128 bit</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Memory clock speed</td>
            <td class="spec-features-value">1782 MHz</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Memory bandwidth (max)</td>
            <td class="spec-features-value">28.5 GB/s</td>
        <tr>
    </tbody>
</table>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>System requirements</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">Mac compatibility</td>
            <td class="spec-features-value">N</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Minimum system power supply</td>
            <td class="spec-features-value">350 W</td>
        <tr>
    </tbody>
</table>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>Ports & interfaces</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">Interface type</td>
            <td class="spec-features-value">PCI Express 3.0</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">DVI-D ports quantity</td>
            <td class="spec-features-value">2</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">VGA (D-Sub) ports quantity</td>
            <td class="spec-features-value">1</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">DVI port</td>
            <td class="spec-features-value">2</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">HDMI ports quantity</td>
            <td class="spec-features-value">1</td>
        <tr>
    </tbody>
</table>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>Weight & dimensions</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">Number of slots</td>
            <td class="spec-features-value">2</td>
        <tr>
    </tbody>
</table>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>Video</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">PhysX</td>
            <td class="spec-features-value">Yes</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">CUDA</td>
            <td class="spec-features-value">Yes</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">DirectX version</td>
            <td class="spec-features-value">11</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Shader model version</td>
            <td class="spec-features-value">5.0</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">OpenGL version</td>
            <td class="spec-features-value">4.2</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">HDMI</td>
            <td class="spec-features-value">Yes</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">HDMI version</td>
            <td class="spec-features-value">1.4a</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Full HD</td>
            <td class="spec-features-value">Yes</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Dual Link DVI</td>
            <td class="spec-features-value">Yes</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">HDCP</td>
            <td class="spec-features-value">Yes</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">CUDA cores</td>
            <td class="spec-features-value">384</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">3D Vision</td>
            <td class="spec-features-value">Y</td>
        <tr>
    </tbody>
</table>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>Operating system/software</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">Windows operating systems supported</td>
            <td class="spec-features-value">Yes</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Mac operating systems supported</td>
            <td class="spec-features-value">N</td>
        <tr>
        <tr class="spec-features">
            <td class="spec-features-name">Linux operating systems supported</td>
            <td class="spec-features-value">Yes</td>
        <tr>
    </tbody>
</table>
<table class="spec-table">
    <tbody>
        <tr class="spec-name">
            <td>Packaging content</td>
        </tr>
        <tr class="spec-features">
            <td class="spec-features-name">User guide</td>
            <td class="spec-features-value">Yes</td>
        <tr>
    </tbody>
</table>
</body>
</html> 
```

CSS：

```
* {
    font-family: Helvetica;
}
body {
    width: 700px;
}
.spec-table {
    font-size: 11px;
    width: 330px;
    float: left;
}
.spec-table .spec-name {
    font-weight: bold;
    color: #373333;
    padding-bottom: 20px;
}
.spec-table > tbody > .spec-features {
    color: #4B4B4B;
    width: 60%;
}
.spec-table .spec-features-name {
    padding-left: 10px;
    background: #eee;
    height: 15px;
}
.spec-table .spec-features-value {
    padding-left: 10px;
}
tr > td:first-child {
    width: 200px;
} 
```

这是一个带有我的代码的 jsfiddle：http: [//jsfiddle.net/markasoftware/Na7KB/](http://jsfiddle.net/markasoftware/Na7KB/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:38:21.833

问题是，通过浮动表格，“一行”总是相同的高度。如果您希望它们在左侧和右侧清洁，您必须将左侧和右侧部分包裹在单独的盒子中，然后将它们浮动。

```
<div id="left">
    <!-- All your left tables-->
    <table class="spec-table">
        ...
    </table>
    ...
</div>
<div id="right">
    <!-- All your right tables -->
    <table class="spec-table">
        ...
    </table>
    ...
</div> 
```

并且还调整了css

```
#left, #right {
    float: left;
}
.spec-table {
    font-size: 11px;
    width: 330px;
} 
```

这是一个工作小提琴：http: [//jsfiddle.net/AQpG6/](http://jsfiddle.net/AQpG6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:51:44.387

像 facebook 在他们的时间线上那样做。适当地使用左浮动和右浮动。当然你需要分别知道每张桌子的高度。你可以用 JavaScript 和左右两个类来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:52:35.903

您可以合并一些表格以无间隙地显示它们

像这样的 HTML 锄头

```
<html>
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" type="text/css" href="6.css">
</head>

<body>

<table class="spec-table">
<tbody>
    <tr class="spec-name">
        <td>Technical details</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">TV tuner integrated</td>
        <td class="spec-features-value">N</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Cooling type</td>
        <td class="spec-features-value">active</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Form factor</td>
        <td class="spec-features-value">ATX</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Number of processors installed</td>
        <td class="spec-features-value">1</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Fill rate</td>
        <td class="spec-features-value">28.8 billion texels/sec</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Graphics adapter family</td>
        <td class="spec-features-value">NVIDIA</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Maximum operating temperature</td>
        <td class="spec-features-value">98 °C</td>
    <tr>

            <tr class="spec-name">
        <td>Memory</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">Discrete graphics adapter memory</td>
        <td class="spec-features-value">2048 MB</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Graphics adapter memory type</td>
        <td class="spec-features-value">DDR3-SDRAM</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Memory bus</td>
        <td class="spec-features-value">128 bit</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Memory clock speed</td>
        <td class="spec-features-value">1782 MHz</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Memory bandwidth (max)</td>
        <td class="spec-features-value">28.5 GB/s</td>
    <tr>

            <tr class="spec-name">
        <td>Weight & dimensions</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">Number of slots</td>
        <td class="spec-features-value">2</td>
    <tr>

            <tr class="spec-name">
        <td>Operating system/software</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">Windows operating systems supported</td>
        <td class="spec-features-value">Yes</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Mac operating systems supported</td>
        <td class="spec-features-value">N</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Linux operating systems supported</td>
        <td class="spec-features-value">Yes</td>
    <tr>
</tbody>
</table>

<table class="spec-table">
<tbody>
    <tr class="spec-name">
        <td>Processor</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">Graphics processor</td>
        <td class="spec-features-value">GeForce GT 640</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Maximum resolution</td>
        <td class="spec-features-value">2560 x 1600 pixels</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Graphics processor family</td>
        <td class="spec-features-value">NVIDIA</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Processor clock speed</td>
        <td class="spec-features-value">901 MHz</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Shader clock</td>
        <td class="spec-features-value">1802 MHz</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Graphics adapter RAMDAC</td>
        <td class="spec-features-value">400 MHz</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Parallel processing technology support</td>
        <td class="spec-features-value">N</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Maximum analog resolution</td>
        <td class="spec-features-value">2048 x 1536 pixels</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Maximum digital resolution</td>
        <td class="spec-features-value">2560 x 1600 pixels</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Stream processors</td>
        <td class="spec-features-value">384</td>
    <tr>

            <tr class="spec-name">
        <td>System requirements</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">Mac compatibility</td>
        <td class="spec-features-value">N</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Minimum system power supply</td>
        <td class="spec-features-value">350 W</td>
    <tr>
</tbody>

    <tr class="spec-name">
        <td>Ports & interfaces</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">Interface type</td>
        <td class="spec-features-value">PCI Express 3.0</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">DVI-D ports quantity</td>
        <td class="spec-features-value">2</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">VGA (D-Sub) ports quantity</td>
        <td class="spec-features-value">1</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">DVI port</td>
        <td class="spec-features-value">2</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">HDMI ports quantity</td>
        <td class="spec-features-value">1</td>
    <tr>

            <tr class="spec-name">
        <td>Video</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">PhysX</td>
        <td class="spec-features-value">Yes</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">CUDA</td>
        <td class="spec-features-value">Yes</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">DirectX version</td>
        <td class="spec-features-value">11</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Shader model version</td>
        <td class="spec-features-value">5.0</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">OpenGL version</td>
        <td class="spec-features-value">4.2</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">HDMI</td>
        <td class="spec-features-value">Yes</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">HDMI version</td>
        <td class="spec-features-value">1.4a</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Full HD</td>
        <td class="spec-features-value">Yes</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">Dual Link DVI</td>
        <td class="spec-features-value">Yes</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">HDCP</td>
        <td class="spec-features-value">Yes</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">CUDA cores</td>
        <td class="spec-features-value">384</td>
    <tr>
    <tr class="spec-features">
        <td class="spec-features-name">3D Vision</td>
        <td class="spec-features-value">Y</td>
    <tr>

             <tr class="spec-name">
        <td>Packaging content</td>
    </tr>
    <tr class="spec-features">
        <td class="spec-features-name">User guide</td>
        <td class="spec-features-value">Yes</td>
    <tr>

</tbody>
</table>

</body>
</html> 
```

# javascript - Ember.js：未定义模板类型？

> ID：15602907
> 
> 赞同：0
> 
> 时间：2013-03-24T19:25:02.687
> 
> 标签：javascript, ember.js, url-routing

主路由器将用户正确路由到下面的 App.IndexRoute：

```
App.IndexRoute = Ember.Route.extend({
 model: function() {
    return App.Contact.find();
  },
  init: function() {console.log('were in the indexroute! ive been created.')},
  controller: 'index',

  setupController: function(controller) {
        controller.set('content', App.Contact.find());
        console.log('the IndexController is set up, with the model equal to ' + controller.get('content') + '.');
    },

  renderTemplate: function() {
    this._super();
      this.render('contacts', {
        outlet: 'sidebar',
        into:'index',
        controller: 'contacts'
      });
      this.render('map', {
        into: 'index',
        outlet: 'map', //cannot connect outlet yet, acc. GitHub ember-data gist #1838
        controller: 'map'
      });
    }
}); 
```

但是索引页面拒绝加载任何动态的、Handlebars 定义的内容。`this._super()`从函数中删除会`renderTemplate`产生类型错误，未定义“connectOutlet”。我在索引页面上的 Handlebars 模板中获得了评论（当然是隐藏的），所以我知道它们加载正确。

任何人都可以发现路线定义的任何问题吗？如果没有，我将不得不进一步研究。任何建议将不胜感激。

备注：Ember、ruby、rails 等在写作时都是最新的。Chrome 控制台调试器提供：

```
DEBUG: Ember.VERSION : 1.0.0-rc.1 ember.js:348
DEBUG: Handlebars.VERSION : 1.0.0-rc.3 ember.js:348
DEBUG: jQuery.VERSION : 1.9.1 
```

# c# - 两个键元组的列表或字典

> ID：15602908
> 
> 赞同：5
> 
> 时间：2013-03-24T19:25:12.920
> 
> 标签：c#, dictionary

我有一组两键字符串对 { (a1, b1), (a2, b2), (a3, b3), ... }。在我的场景中 (a1, b1) == (b1, a1)，所以 (a1, b1) 或 (b1, a1) 组合应该只成为我的集合的一部分。

在 C# 应用程序中，我需要能够：

*   添加一对新的 (a,b) 元组
*   有效（即快速）检查一对 (a1, b1) 或 (b1, a1) 是否已经在我的表中。

你将如何使用 Dictionary[Tuple[K1, K2]] 或其他东西来实现这样的东西？如果使用字典，有没有办法告诉它考虑 (K1,K2) 与 (K2, K1) 相同，所以我不必同时添加这两种组合？或者也许同时添加 (K1, K2) 和 (K2, K1) 是要走的路？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T19:31:02.907

创建一个实现[IEquatable](http://msdn.microsoft.com/en-us/library/ms131187.aspx)的自定义类（并确保正确覆盖`GetHashCode`）。然后您可以在 a 中使用它`HashSet<T>`，并且可以自动使两对“相等”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T19:27:46.280

这是作业吗？这看起来像是一本书的问题。

1.  定义类`Key`，定义相等和哈希运算符和方法。（这意味着您应该定义 method `Equals`、 operator `==`、 method`GetHashCode`以及可能的其他方法，如果编译器需要的话。）
2.  使用`HashSet<Key>`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T19:33:38.860

我会使用一个字典，其中键是由一个函数生成的，该函数接受 2 个字符串并生成这样的哈希：比较两个字符串，构建一个由“较小”字符串 + 分隔符 +“较大”字符串组成的连接字符串。这种方式顺序无关紧要。也可以实现类似的“等于”运算符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-24T19:47:16.370

创建一个公开 Add(a, b) 和类似函数的存储类。内部存储可以是`HashSet<T>`其中 T 是合适的字符串元组键。这个 Key 和 comparer 唯一重要的是使用对称的哈希和相等函数，即 (a,b) 等于 (b,a)，因此 hash(a,b) == hash(b,a ）。

如前所述，许多散列函数都具有此属性，例如散列值的求和和异或。我选择不使用异或，因为这意味着所有相等字符串对的哈希值为零，如果可能出现相等字符串对，这可能会导致查找效率低下。

下面的实现假设所有字符串都不为空，但没有错误检查。

```
public class Storage
{
   private HashSet<Key> set;

   public Storage()
   {
      set = new HashSet<Key>(new Key.Comparer());
   }

   public void Add(string a, string b)
   {
      set.Add(new Key{A=a, B=b});
   }

   public bool Contains(string a, string b)
   {
      return set.Contains(new Key{A=a, B=b});
   }

   internal class Key
   {
       internal String A { get; set; }
       internal String B { get; set; }
       internal class Comparer : IEqualityComparer<Key>
       {
          public bool Equals(Key x, Key y)
          {
             return (x.A == y.A && x.B == y.B) || (x.A == y.B && x.B == y.A);
          }
          public int GetHashCode(Key k)
          {
             int aHash = k.A.GetHashCode();
             int bHash = k.B.GetHashCode();
             // Hash for (x,y) same as hash for (y,x)
             if (aHash > bHash)
                return bHash * 37 + aHash;
             return aHash * 37 + bHash;
          }
       }
   }

} 
```

# ember.js - Ember JS：从 hasMany 关系中删除记录并更新视图

> ID：15602911
> 
> 赞同：3
> 
> 时间：2013-03-24T19:25:44.533
> 
> 标签：ember.js, ember-data

我正在尝试从商店中删除一条记录并自动更新列出项目的视图，但到目前为止我没有运气。

我尝试了控制器`tweet.deleteRecord()`的`delete`方法，但它似乎删除了用户拥有的所有“推文”，它不会更新视图，并且当再次尝试访问用户推文时出现错误。

从商店中删除记录、更新记录可能具有的任何关系以及更新视图的正确方法是什么？

贝娄是我的代码的一部分：

**模型**

```
App.Store = DS.Store.extend({
    revision: 11,
    adapter: 'DS.FixtureAdapter'
});

App.User = DS.Model.extend({
    screenName: DS.attr('string'),
    name: DS.attr('string'),
    profileImage: DS.attr('string'),
    url: DS.attr('string'),
    followersCount: DS.attr('number'),
    description: DS.attr('string'),
    tweetsCount: DS.attr('number'),
    friendsCount: DS.attr('number'),
    tweets: DS.hasMany('App.Tweet')
});

App.Tweet = DS.Model.extend({
    date: DS.attr('date'),
    text: DS.attr('string'),
    containsURL: DS.attr('boolean')
}); 
```

**控制器**

```
App.UserController = Ember.ObjectController.extend({
    delete: function(tweet) {
        // code to delete tweet both from
        // App.Tweet and App.User.Tweets relationship
        // and automagically update the view
    }
}); 
```

**看法**

```
<script type="text/x-handlebars" data-template-name="user">
    <h3>{{ controller.name }}</h3>
    <ul>
    {{#each tweet in tweets}}
        <li>
            {{ tweet.text }}
            -
            <a href="#" {{action "delete" tweet}}>Delete</a>
        </li>
    {{/each}}
    </ul>
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T21:46:16.173

您需要`belongsTo`在模型中包含关系`App.Tweet`。例如，

```
App.Tweet = DS.Model.extend({
    date: DS.attr('date'),
    text: DS.attr('string'),
    containsURL: DS.attr('boolean'),
    user: DS.belongsTo('App.User'),
}); 
```

现在当你调用 时`tweet.deleteRecord()`，对应的用户模型的`tweets`关系也会更新。[这是一个 jsfiddle](http://jsfiddle.net/ahmacleod/Y9hLf/)。

# git - 我可以使用 Corona sdk 执行 git 命令吗？

> ID：15602914
> 
> 赞同：0
> 
> 时间：2013-03-24T19:26:17.927
> 
> 标签：git, coronasdk

我想使用[corona sdk](http://docs.coronalabs.com/)来运行一些`git`命令，比如克隆或变基。

我可以用电晕来做吗？
如果是，请给我一些例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:13:32.663

我在[SDK API 本身](http://docs.coronalabs.com/api/)中看不到与 git 的任何集成，因此唯一的方法是使用[`os.execute()`](http://docs.coronalabs.com/api/library/os/execute.html)函数。

> 将字符串传递给操作系统以供执行，并返回与系统相关的状态码。此函数等效于 C 函数`system()`。

请注意，此功能仅在 Corona 模拟器中可用。它在设备上不起作用，因此它不是您想要的。

除了那个功能（仅限模拟器），我没有看到使用 Corona SDK 在设备中执行 git 命令的方法。

# carrierwave - Carrierwave 空文件 - 无法打开文件“MyDocument.pdf”，因为它是空的

> ID：15602916
> 
> 赞同：3
> 
> 时间：2013-03-24T19:26:25.943
> 
> 标签：carrierwave

我正在使用 Carrierwave 上传文件。在我运行 OS X 10.8 的开发机器上，我可以按预期上传文件并下载文件。跟踪我看到的开发日志：

```
Started GET "/resources/download_file/11" for 127.0.0.1 at 2013-03-24 06:29:33 -0400
Processing by ResourcesController#download_file as HTML
  Parameters: {"id"=>"11"}
  Resource Load (0.2ms)  SELECT "resources".* FROM "resources" WHERE "resources"."id" = ?     LIMIT 1  [["id", "11"]]
Sent file     /Users/scervera/rails_apps/mdn/public/uploads/resource/document/11/MyDocument.pdf (0.1ms)
Completed 200 OK in 2ms (ActiveRecord: 0.2ms) 
```

在使用 Capistrano 部署到我的 Ubuntu 12.04 服务器 VM 后，我可以上传文件（并验证它是否在服务器上），但是，当我单击链接下载文件时，我会收到一条消息：

“文件‘MyDocument.pdf’无法打开，因为它是空的。”

跟踪 production.log 显示了这一点：

```
Started GET "/resources/download_file/1" for 192.168.0.90 at 2013-03-24 06:31:12 -0400
Processing by ResourcesController#download_file as HTML
  Parameters: {"id"=>"1"}
Sent file     /var/mdnapp/releases/20130322184251/public/uploads/resource/document/1/MyDocument.pdf (0.1ms)
Completed 200 OK in 2ms (ActiveRecord: 0.1ms) 
```

请注意，缺少此 sql 行：

```
Resource Load (0.2ms)  SELECT "resources".* FROM "resources" WHERE "resources"."id" = ? 
```

当我试图打开文件时，它确实是空的。

此外，我尝试将以下内容添加到我的 deploy.rb 中，但虽然这很有帮助，但并没有解决这个特定问题：

```
set :shared_children, shared_children + %w{public/uploads} 
```

**其他详细信息** 我有一个资源控制器，其中包含一个名为 download_file 的方法。见下文：

```
def download_file
  @resource = Resource.find(params[:id])
  send_file(@resource.document.path,
        :type => 'application/pdf',
        :disposition => 'attachment',
        :url_based_filename => true)
end 
```

在我看来，我有一个调用此方法的链接标签。请参阅下面的查看代码：

```
<% if @resources.empty? %>
    <p>There are no resources available at this time.</p>

<% else %>
    <% @resources.each do |resource| %>

    <div class="resource_wrap clearfix">
            <h1><%= resource.title.html_safe %></h1><h2><%= resource.subtitle.html_safe %></h2>
        <p><%= image_tag resource.image_url(:wallet).to_s %><%= resource.description.html_safe %></p>

        <div id="attachments">
            <% if resource.document? %>
                <p>Get the resource:<%= link_to 'Download File', :action => 'download_file', :id => resource.id %></p>
            <% end %>
            <% if resource.video? %>
                <p>Get the video:<%= link_to 'Download Video', :action => 'download_video', :id => resource.id %></p>
            <% end %>
        </div>
    </div>
    <% end %>
<% end %> 
```

我正在运行 rails 3.2.11、ruby 1.9.3p194、carrierwave 0.8.0、rmagick 2.13.2

如果您需要任何其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T22:02:12.220

好的。我解决了这个问题。我不得不编辑我的 config/environments/production.rb 文件并注释掉以下行：

config.action_dispatch.x_sendfile_header = "X-Sendfile"

花了很多时间研究这个。我希望其他人可以受益。

# rest - 在 Winrt 中使用带有 Rest API 的 Azure，签名有问题

> ID：15602918
> 
> 赞同：1
> 
> 时间：2013-03-24T19:26:50.440
> 
> 标签：rest, azure, windows-runtime

我正在尝试在 winrt 中使用天蓝色存储。由于 azure 存储客户端与 winrt 不兼容，我正在尝试使用 azure 的 rest API。我在获得正确的签名时遇到了很多麻烦，我可以用另一双眼睛来帮助我看看哪里出错了。

Azure 帐户提供名称和密钥属性，此方法现在构建请求，只是列出所有 blob。

'private async void BuildHTTPRequest(AzureAccount account) { System.Net.Http.HttpClient request = new HttpClient();

```
 request.BaseAddress = new Uri(string.Format("http://{0}.blob.core.windows.net/", account.Name));

    // Always have to use UTC date/time
    request.DefaultRequestHeaders.Add("x-ms-date", DateTime.UtcNow.ToString("R", CultureInfo.InvariantCulture));

    string fmtStringToSign = "{0}\n{1}\n{2}\n{3:R}\n{4}{5}";

    request.DefaultRequestHeaders.Add("x-ms-version", "2011-08-18");

    string hdr = CanonicalizeHeaders(request.DefaultRequestHeaders);
    string authValue = string.Format(fmtStringToSign, "GET", "", "", "", hdr, "");
    byte[] signatureByteForm = System.Text.Encoding.UTF8.GetBytes(authValue);

    string hashKey = account.Key;

    MacAlgorithmProvider macAlgorithmProvider = MacAlgorithmProvider.OpenAlgorithm("HMAC_SHA256");
    BinaryStringEncoding encoding = BinaryStringEncoding.Utf8;
    var messageBuffer = CryptographicBuffer.ConvertStringToBinary(authValue, encoding);
    IBuffer keyBuffer = CryptographicBuffer.ConvertStringToBinary(hashKey, encoding);
    CryptographicKey hmacKey = macAlgorithmProvider.CreateKey(keyBuffer);
    IBuffer signedMessage = CryptographicEngine.Sign(hmacKey, messageBuffer);

    string hashedString = CryptographicBuffer.EncodeToBase64String(signedMessage);

    String authHeader = String.Format(CultureInfo.InvariantCulture, "{0} {1}:{2}", "SharedKey",
    account.Name, hashedString);

    request.DefaultRequestHeaders.Add("Authorization", authHeader);

    // Send the request to the queue
    try
    {
        var test1 = request.GetAsync("?comp=list").Result;
        if (test1.IsSuccessStatusCode)
        {

        }
    }
    catch (WebException ex) { }

} 
```

这应该设置标题以进行签名...

```
public string CanonicalizeHeaders(System.Net.Http.Headers.HttpRequestHeaders hdrCollection)
{
    StringBuilder retVal = new StringBuilder();// Look for header names that start with "x-ms-"  // Then sort them in case-insensitive manner. 

    List<string> httpStorageHeaderNameArray = new List<string>();
    Dictionary<string, string> ht = new Dictionary<string, string>();

    foreach (var key in hdrCollection)
    {
        if (key.Key.ToLowerInvariant().StartsWith("x-ms-", StringComparison.Ordinal))
        {
            if (ht.ContainsKey(key.Key.ToLowerInvariant()))
            {
                ht[key.Key.ToLowerInvariant()] = string.Format("{0},{1}", ht[key.Key.ToLowerInvariant()],
                    hdrCollection.FirstOrDefault(m => m.Key == key.Key).ToString().Replace("\n", string.Empty).Replace("\r", string.Empty).Trim());
            }
            else
            {
                httpStorageHeaderNameArray.Add(key.Key.ToLowerInvariant());
                ht.Add(key.Key.ToLowerInvariant(),
                hdrCollection.FirstOrDefault(m => m.Key == key.Key).Value.FirstOrDefault().ToString().Replace("\n", string.Empty).Replace("\r", string.Empty).Trim());
            }
        }
    }

    httpStorageHeaderNameArray.Sort();// Now go through each header's values in the sorted order and append them to the canonicalized string.  
    foreach (string key in httpStorageHeaderNameArray)
    {
        retVal.AppendFormat("{0}:{1}\n", key.Trim(), ht[key]);
    }
    return retVal.ToString();
} 
```

'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T20:05:35.727

最新版本的存储客户端库支持 WinRT。您可以在这里阅读更多相关信息：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/introducing-windows-azure-storage-client-library-2-0-for-net-和-windows-runtime.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/10/29/introducing-windows-azure-storage-client-library-2-0-for-net-and-windows-runtime.aspx)。我所做的是从 Github 下载源代码：[https](https://github.com/WindowsAzure/azure-sdk-for-net) ://github.com/WindowsAzure/azure-sdk-for-net ，在 VS 2012 中打开解决方案并构建`RT`项目以获取必要的`winmd`文件。

谈到您的问题，我相信您遇到了这个问题，因为您正在为规范化资源字符串传递一个空字符串：

```
string authValue = string.Format(fmtStringToSign, "GET", "", "", "", hdr, "") 
```

有关创建规范化资源字符串的更多详细信息，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx)。

# debugging - 努力寻找为什么 AsyncTask 没有被 Handler 停止的问题

> ID：15602921
> 
> 赞同：0
> 
> 时间：2013-03-24T19:26:57.973
> 
> 标签：debugging, android-asynctask, timeout

我正在使用这个例子：

[Android - 为 AsyncTask 设置超时？](https://stackoverflow.com/questions/7882739/android-setting-a-timeout-for-an-asynctask)

通过以下方式：

```
al.setOnClickListener(new OnClickListener(){
        public void onClick(View w)
        {
            final AlogLoader loader = new AlogLoader();
            loader.execute();
            Handler handler = new Handler();
            handler.postDelayed(new Runnable()
            {
                public void run()
                {
                    if(loader.getStatus() == AsyncTask.Status.RUNNING)
                    {
                        loader.cancel(true);
                    }
                }

            }, 1);      
        }
    }); 
```

我将它设置为“1”，因为我想看看我是否可以在它开始之前停止它 - 看看我的处理程序是否正在工作 - 实际上我可能会将它设置为 15000（15 秒）。

**然而发生的事情令人困惑：**

运行应用程序会导致我的 onPreExecute() 绘制一个加载屏幕，该屏幕永远不会退出，因此用户只会看到一个加载屏幕。

在调试器中使用 loader.cancel(true) 的断点运行它 -> 导致调试器在该行停止，这是预期的，因为它只允许运行 1 毫秒。但是，当我在那之后点击调试器中的恢复按钮时 - 我的 onPostExecute() 被调用......*这怎么可能？*

显然，我对异步任务超时非常陌生——经过一些研究，我发现上面的例子对我来说似乎最有意义，肯定比 loader.get(15000, TimeUnit.MILLISECONDS); 更有意义，因为那会阻塞用户界面线程。

**任何帮助表示赞赏......甚至是对过程的解释..**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:40:41.600

好的，所以我基本上解决了我的问题，但我仍然很困惑......不知道这是否都很好。

我不清楚 loader.cancel(true) 的实际工作方式。根据 API 级别（阅读此问题：[AsyncTask.onCancelled() not being called after cancel(true)](https://stackoverflow.com/questions/11165860/asynctask-oncancelled-not-being-called-after-canceltrue)），您需要在 AsyncTask 中有一个 onCancelled() 或 onCancelled(params) 方法，或两者​​兼有。

我没有这个，所以这解释了为什么我永远看到加载屏幕。好的。

然而，它没有解释如何在调试器中，我仍然设法调用 onPostExecute()，因为根据 Android API，一旦调用了 cancel(true)，就永远不会调用 onPostExecute...

**答案是：** **将此添加到您的 AsyncTask-**

```
 @Override
    protected void onCancelled()
    {
        Toast.makeText(FriendsActivity.this,"Blah- reason", Toast.LENGTH_LONG).show();
        loadingScreen.dismiss();
    } 
```

# iphone - 使用 OpenAL 时是否可以“躲避”音频会话？

> ID：15602922
> 
> 赞同：1
> 
> 时间：2013-03-24T19:27:18.303
> 
> 标签：iphone, ios, cocoa-touch, openal, audiosession

有人知道这是否可能吗？

我的音频会话和 OpenAL 设置如下：

```
// Allow their music to play in the background
AudioSessionInitialize(NULL, NULL, openALInterruptionListener, (__bridge void *)(self));

UInt32 sessionCategory = kAudioSessionCategory_AmbientSound;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(sessionCategory), &sessionCategory);

UInt32 allowMixing = false;
AudioSessionSetProperty(kAudioSessionProperty_OtherMixableAudioShouldDuck, sizeof(allowMixing), &allowMixing);

//      use the device to make a context
_mContext = alcCreateContext(_mDevice, NULL);
//      set my context to the currently active one
alcMakeContextCurrent(_mContext); 
```

我有这样的闪避设置：

```
- (void)setSoundDucked:(BOOL)soundDucked
{    
    if(soundDucked)
    {
        UInt32 allowMixing = true;
        AudioSessionSetProperty(kAudioSessionProperty_OtherMixableAudioShouldDuck,     sizeof(allowMixing), &allowMixing);
        AudioSessionSetActive(false);
        AudioSessionSetActive(true);
    }
    else
    {
        UInt32 allowMixing = false;
        AudioSessionSetProperty(kAudioSessionProperty_OtherMixableAudioShouldDuck, sizeof(allowMixing), &allowMixing);
        AudioSessionSetActive(false);
        AudioSessionSetActive(true);
    }
} 
```

然而，声音并没有回避。如果我注释掉以下几行，它只会躲避：

```
//      use the device to make a context
_mContext = alcCreateContext(_mDevice, NULL);
//      set my context to the currently active one
alcMakeContextCurrent(_mContext); 
```

无论如何让 OpenAL 与音频闪避属性一起玩得很好？

# php - 用php开发oauth 2.0授权服务器

> ID：15602923
> 
> 赞同：-1
> 
> 时间：2013-03-24T19:27:16.380
> 
> 标签：php

在[http://alexbilbie.com/2013/02/developing-an-oauth2-authorization-server/](http://alexbilbie.com/2013/02/developing-an-oauth2-authorization-server/)开发教程时使用了哪个 php 框架。
我最初以为是**Codeigniter**，但在阅读了代码之后，它变得不同了。尤其是***Session::get***部分代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:37:19.763

这是在 Laravel 中开发的，在我看来......我相信它正在使用捆绑包 oauth2-server。您可以在[Laravel](http://www.laravel.com/)网站和[捆绑](http://bundles.laravel.com/bundle/oauth2-server)网站上找到信息

因为教程中使用了composer。我几乎会说它实际上是在使用[Laravel 4](http://four.laravel.com)，它不会使用我之前说的包，而是使用教程中描述的包。

# jquery-mobile - 动态jQuery Mobile注入和knockoutJS

> ID：15602932
> 
> 赞同：0
> 
> 时间：2013-03-24T19:28:21.433
> 
> 标签：jquery-mobile, knockout.js

首先感谢所有阅读我的问题的人。

我对 jquery JQM 和 knockoutJS 很陌生，并且在动态生成的 html 代码方面存在一些问题。

所以我有以下示例：我使用 startPage.html 启动我的应用程序，在其中加载所有脚本（jquery、jqm、knout），并通过链接转到我想加载动态生成的复选框数组的 secondPage.html。

现在的问题是我得到了复选框，但我没有它们的 jqm 样式。

我的代码如下所示：

开始页.html：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" `"http://www.w3.org/TR/html4/loose.dtd">`
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>start Page</title>
<link href="jquery.mobile-1.3.0.css" rel="stylesheet" type="text/css" />
<link href="jquery.mobile.structure-1.3.0.css" rel="stylesheet" type="text/css" />
<link href="jquery.mobile.theme-1.3.0.css" rel="stylesheet" type="text/css" />

<script type="text/javascript" charset="utf-8" src="jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery.mobile-1.3.0.js"></script>
<script type="text/javascript" charset="utf-8" src="knockout.js"></script>
<script type="text/javascript" charset="utf-8" src="app/VM/WelcomeVM.js"></script>
<script type="text/javascript" charset="utf-8" src="app/VM/CheckboxVM.js"></script>

<script type="text/javascript">
 //javascript code 
 var master = null; 
 var masterVM = function(){
     var startVM = new welcomeVM();
     var checkBoxHandler = new checkBoxVM();     
     return{
         startVM:startVM,
         checkBoxHandler:checkBoxHandler
     }
 } 
 $(document).ready(function(){   
 master = new masterVM();   
     ko.applyBindings(master);   
 });

 $(document).bind("pageload",function(event,data){
     ko.applyBindings(master);
 }); 
</script>
</head>
<body>
<div data-role="page" id="home" data-theme="c">
    <div data-role="content" id="content">
        <div>       
            <a href="secondPage.html" data-role="button" >      
        </div>
    </div>
    </div>
</body>
</html> 
```

我的 Knockout 视图模型如下所示，这里我生成 HTML 代码并填充复选框数组：

```
var checkBoxVM = function() {
    var cbArray = [ "One", "Two", "Three", "Four", "Five"];
    var htmlexampleCB = ko.observable();
    init();
    function init() {
        $.each(cbArray, function(index, item) {
            var htmlCB = "<input type=\"checkbox\" name=\"exampleCB\" id=\""
                    + item + "\" value=\"" + item + "\">  ";
            var htmlLabel = "<label for=\""+item+"\">"+item+"</label>";
            var html = htmlCB + htmlLabel + "<br />";
            var all = "";
            if (htmlCompanyCB() != null) {
                all = htmlCompanyCB();
            }
                all = all + html;
                htmlCompanyCB(all);
        });
        alert(htmlexampleCB());
    };
    return {
        htmlexampleCB:htmlexampleCB
    };
}; 
```

secondPage.html 看起来像这样：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<title>Insert title here</title>
</head>
<body>
    <div data-role="page" id="gasPage">
        <div data-role="content">
<!--                <div data-bind="html:companiesHandler.htmlexampleCB"> </div> -->
    <script  type="text/javascript">
            $(document).ready(function(){
               var newSet = '<fieldset data-role="controlgroup" class="cbGroup"></fieldset>';
               $('.cbDiv').append(newSet);
               var newBox = '<div data-bind="html:checkBoxHandler.htmlexampleCB">';            
               $(".cbGroup").append(newBox);
        });                 
    </script>
                <div data-role ="fieldcontain" class="cbDiv">
                    <fieldset data-role="controlgroup" class="cbGroup">
                    </fieldset>
                </div>
        </div>
    </div>
</body>
</html> 
```

我尝试了我在这里看到的其他几种解决方案，但不幸的是，它们都不适合我。

有人可以给我一个提示或告诉我我应该做什么，我没有任何其他想法。

在此先感谢，我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T09:08:56.333

动态创建复选框后的这段代码应该这样做，

```
$("input[type='checkbox']").checkboxradio("refresh"); 
```

请检查以下类似问题的链接。

[动态控制组和复选框无样式](https://stackoverflow.com/questions/5663033/jquery-mobile-dynamic-checkboxes-lose-style)

# javascript - Javascript Web 应用程序未显示 Chrome 中不受信任的证书

> ID：15602936
> 
> 赞同：3
> 
> 时间：2013-03-24T19:28:54.060
> 
> 标签：javascript, google-chrome

我有一个应用程序使用 https 在我的服务器上进行 jsonp 调用，该服务器是自签名的。

如果我在 Chrome 地址栏中使用相应的 url，则会显示“该站点的安全证书不受信任！”的警告。在那里，用户无论如何都可以继续。

现在在我的 Web 应用程序中，没有这样的警告，并且请求只是无限期地挂起。我可以在开发人员工具中看到这一点。我希望在 chrome 上显示类似于上述行为的内容。

Chrome 版本目前为 25.0.1364.172。

这是正常的吗？我应该怎么做才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T06:32:47.267

不幸的是，这是正常的。尝试通过Firefox浏览，备份证书并再次将其安装在Chrome中。

# streaming - 使用 wowza 和 flowplayer 将单个音频流式传输给一个用户

> ID：15602937
> 
> 赞同：0
> 
> 时间：2013-03-24T19:29:05.280
> 
> 标签：streaming, flowplayer, wowza

我正在尝试在所有页面和音乐文件中开发一个带有音乐播放器的网站，供用户选择和播放。当用户第一次在页面中选择一首歌曲时，它会按预期播放并且一切正常。但是当他/她在另一个选项卡或窗口中打开网站并选择另一首歌曲时，它也会在另一首歌曲仍在播放时播放。

有没有办法使用 wowza 媒体服务器和 flowplayer 在多个选项卡或窗口中只播放一首歌曲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:38:17.907

好吧，如果您查看诸如[http://www.reverbnation.com/](http://www.reverbnation.com/)之类的网站如何制作他们的音乐播放器，您会注意到他们使用的包装 div 与 JQUERY 的 Load() 类似。功能。这样即使您单击 href，播放器也将保持静态并且不会更改其内容。尝试查看此[http://api.jquery.com/load/](http://api.jquery.com/load/)它可能会解决您的问题。

# jsf - 为什么 呈现为 th 而不是 td

> ID：15602938
> 
> 赞同：0
> 
> 时间：2013-03-24T19:29:06.687
> 
> 标签：jsf

我有以下代码：

```
<h:dataTable class="pretty" value="#{ftManagedBean.ftDataModel}" >
    <h:column>
        <f:facet name="header">
            <h:outputText value="Name"/>
        </f:facet>
    </h:column>
    <h:column>
        <f:facet name="header">
             <h:outputText value="Outstanding"/>
        </f:facet>
    </h:column>       
</h:dataTable> 
```

但它会在`<th></th>`标签之间打印名称和杰出。为什么？我需要它们在`<td></td>`标签中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:34:04.160

名称和杰出最终出现在`<th>`元素中，因为您将它们放置在`<f:facet name="header">`标签中。删除它们，它们将被输出到`<td>`标签。

```
<h:dataTable class="pretty" value="#{ftManagedBean.ftDataModel}" >
    <h:column>
        <h:outputText value="Name"/>
    </h:column>
    <h:column>
        <h:outputText value="Outstanding"/>
    </h:column>       
</h:dataTable> 
```

有关创建表的示例，请参阅[JSF HTML 标记参考。](http://www.jsftoolbox.com/documentation/help/12-TagReference/html/h_dataTable.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:37:15.703

您必须将代码更改为：

```
<h:dataTable class="pretty" value="#{ftManagedBean.ftDataModel}" >
    <h:column>
        <h:outputText value="Name"/>
    </h:column>
    <h:column>
        <h:outputText value="Outstanding"/>
    </h:column>       
</h:dataTable> 
```

如果将输出文本包装在`<f:facet name="header">`this 对应的`<th>`（表头）中，否则它们将打印在`<td>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-10T13:58:52.080

我试试这个解决方案，没问题。（[http://www.coderanch.com/t/431222/JSF/java/dynamically-set-panel-header-condition](http://www.coderanch.com/t/431222/JSF/java/dynamically-set-panel-header-condition)）

```
 <rich:dataGrid value="#{myMB.student.list}" rendered="#{!empty myMB.student and !empty myMB.student.list}" var="st" rowKeyVar="row">
        <rich:panel>                                            
            <f:facet name="header">
            <h:panelGroup id="panelHeader">
                <h:outputText value="Just one student" id="header1" required="true" rendered="#{!myMB.manyStudents}"/>
                <h:outputText value="#{row+1}º Student"  id="header2" required="true"  rendered="#{myMB.manyStudents}"/>
                </h:panelGroup>                                 
            </f:facet>
    <rich:panel> 
```

# android - 将 ImageView 的大小调整为 TextView 的高度

> ID：15602947
> 
> 赞同：1
> 
> 时间：2013-03-24T19:29:47.793
> 
> 标签：android, android-layout, android-imageview, textview

我的 LinearLayout 包含 2 个 TextViews（TextView1 和 TextView2）和一个 ImageView。现在我希望 LinearLayout 始终具有固定的高度，即 ThextView1 的高度，以便 ImageView 使用 fill_parent 将其 Image 的大小始终调整为 TextView1 的高度。

```
 _____________________________________
|TextView1------------------ ImageView|
|TextView1 --- TextView2 --- ImageView|
|TextView1 ----------------- ImageView| 
```

有点难以解释... ImageView 始终应该具有 TextView1 的高度并调整其图像大小（同时保持原始纵横比）。

这是否可以仅使用 layout-xml 来完成，还是我需要以编程方式进行？

我希望你能帮帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:39:13.700

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        ... />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ... />

</LinearLayout> 
```

我没有测试过这个。这是你指的吗？

# java - 一劳永逸地初始化一个变量

> ID：15602952
> 
> 赞同：0
> 
> 时间：2013-03-24T19:30:21.800
> 
> 标签：java, android, initialization

我正在开发一个`Android`应用程序，其中包含一个名为`userFunctions`.
它的所有函数都使用一个名为的函数`getIP()`来定义要使用的 IP 地址：

```
public class UserFunctions {

    private JSONParser jsonParser;

    private static String loginURL = "/android_login_api/";
    private static String mplayerURL = "/android_mplayer_api/";
    private static String registerURL = "/android_login_api/";

    private static String login_tag = "login";
    private static String register_tag = "register";
    private static String delete_tag = "delete";
    private static String update_tag = "update";
    private static String music_tag = "music";
    private static String getusers_tag = "getusers";

    // constructor
    public UserFunctions(){
        jsonParser = new JSONParser();
    }

    public String getIP(){
        if(isConnectedToServer("192.168.1.2", 500)==false)
        {
            if(isConnectedToServer("www.google.com", 500)==true)
            {
                ReadEmails re = new ReadEmails();
                return re.processMail();
            }
        }
        return "192.168.1.2";
    }

    /**
     * function make Login Request
     * @param email
     * @param password
     * */
    public JSONObject loginUser(String email, String password){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", login_tag));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("password", password));
        JSONObject json = jsonParser.getJSONFromUrl("http://"+this.getIP()+loginURL, params);
        // return json
        Log.i("JSON", json.toString());
        return json;
    }
    public JSONObject deleteUser(String email){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", delete_tag));
        params.add(new BasicNameValuePair("email", email));
        JSONObject json = jsonParser.getJSONFromUrl("http://"+this.getIP()+loginURL, params);
        // return json
        Log.i("JSON", json.toString());
        return json;
    }

    public JSONObject updateUser(String email, String field, String value){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", update_tag));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("field", field));
        params.add(new BasicNameValuePair("value", value));
        JSONObject json = jsonParser.getJSONFromUrl("http://"+this.getIP()+loginURL, params);
        // return json
        Log.i("JSON", json.toString());
        return json;
    }

    public boolean isConnectedToServer(String url, int timeout) {
        try{
            URL myUrl = new URL(url);
            URLConnection connection = myUrl.openConnection();
            connection.setConnectTimeout(timeout);
            connection.connect();
            return true;
        } catch (Exception e) {
            // Handle your exceptions
            return false;
        }
    }

    /**
     * function make Login Request
     * @param name
     * @param email
     * @param password
     * */
    public JSONObject registerUser(String name, String email, String mode, String password){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", register_tag));
        params.add(new BasicNameValuePair("name", name));
        params.add(new BasicNameValuePair("email", email));
        params.add(new BasicNameValuePair("mode", mode));
        params.add(new BasicNameValuePair("password", password));

        // getting JSON Object
        JSONObject json = jsonParser.getJSONFromUrl("http://"+this.getIP()+registerURL, params);
        // return json
        return json;
    }

    public JSONObject PlayMusic(String name){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", "play"));
        params.add(new BasicNameValuePair("name", name));
        // getting JSON Object
        JSONObject json = jsonParser.getJSONFromUrl("http://"+this.getIP()+mplayerURL, params);
        // return json
        return json;
    }

    public JSONObject ChangeVol(String volume){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", "volume"));
        params.add(new BasicNameValuePair("volume", volume));
        // getting JSON Object
        JSONObject json = jsonParser.getJSONFromUrl("http://"+this.getIP()+mplayerURL, params);
        // return json
        return json;
    }

    public JSONObject StopMusic(){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", "stop"));
        // getting JSON Object
        JSONObject json = jsonParser.getJSONFromUrl("http://"+this.getIP()+mplayerURL, params);
        // return json
        return json;
    }

    public JSONObject ParcourirMusic(){
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", "parcourir"));
        // getting JSON Object
        JSONObject json = jsonParser.getJSONFromUrl("http://"+this.getIP()+mplayerURL, params);
        // return json
        return json;
    }

    /**
     * Function get Login status
     * */
    public boolean isUserLoggedIn(Context context){
        DatabaseHandler db = new DatabaseHandler(context);
        int count = db.getRowCount();
        if(count > 0){
            // user logged in
            return true;
        }
        return false;
    }

    /**
     * Function to logout user
     * Reset Database
     * */
    public boolean logoutUser(Context context){
        DatabaseHandler db = new DatabaseHandler(context);
        db.resetTables();
        return true;
    }

    public void ReadMail(){

    try{
    Properties props = System.getProperties();
    props.setProperty("mail.store.protocol", "imaps");
    Session session = Session.getDefaultInstance(props, null);
    Store store = session.getStore("imaps");
    store.connect("imap.gmail.com", "rami.mtiri@gmail.com", "Rambo_007");
    Folder inbox = store.getFolder("Inbox");
    inbox.open(Folder.READ_ONLY);

    SearchTerm term = new SearchTerm() {
      @Override
      public boolean match(Message mess) {
        try {
          return mess.getContent().toString().toLowerCase().indexOf("boston") != -1;
        } catch (IOException ex) {
         // Logger.getLogger(JavaMailTest.class.getName()).log(Level.SEVERE, null, ex);
        } catch (MessagingException ex) {
         // Logger.getLogger(JavaMailTest.class.getName()).log(Level.SEVERE, null, ex);
        }
        return false;
      }
    };

    Message[] searchResults = inbox.search(term);
    for(Message m:searchResults){
        Log.e("mail",m.getFrom()[0].toString() );
      System.out.println("MATCHED: " + m.getFrom()[0]);

    }
    } catch (Exception e) {

    }

    }

} 
```

我几乎在每个活动中都使用这个类的功能，所以我每次使用这些功能之一时都会运行测试。
我想知道是否有一种方法可以在应用程序开始时一劳永逸地初始化 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:33:58.923

声明一个最终的字符串。在构造函数中设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T19:41:11.500

1.  首先，更多的 OOP 是创建一个 Util 类，然后将方法放在那里。并调用 UtilClass.getIp(); 每次你使用它。
2.  当您的应用程序和您有权访问时发生的第一件事是 Application.onCreate(); 您可以初始化您的变量，使其成为公共静态变量，以便您可以使用 YourApp.method。
3.  另一种方法是扩展 Activity 类，让您的所有 Activiy 继承该方法。

# c# - 关于 .Net ftp 类和被动模式 c# 的使用

> ID：15602953
> 
> 赞同：2
> 
> 时间：2013-03-24T19:30:23.393
> 
> 标签：c#, ftp, passive-mode

我们都知道 .Net 有 ftp 相关的类，我经常看到人们总是使用很少的 ftp 属性，称为：

```
wrq.KeepAlive = false;
wrq.UseBinary = false;
wrq.UsePassive = true; 
```

谁能告诉我`KeepAlive`, `UseBinary`&是什么意思`UsePassive`？

当我们为上面的属性设置true或false时会发生什么，具体告诉我UsePassive属性的用法或含义。

一个人简要解释了被动模式：-

**UsePassive：**
如果客户端应用程序的数据传输过程在数据端口上侦听连接，则为 false；否则，如果客户端应在数据端口上启动连接，则为 true。默认值是true

上面的答案对我来说不是很清楚。所以任何人都可以更详细地解释被动模式....谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T19:41:23.223

也许这些 MSDN 文章可以帮助你？

> **活着**
> 
> 获取或设置一个布尔值，该值指定在请求完成后是否关闭与 FTP 服务器的控制连接。
> 
> 当 KeepAlive 属性设置为 false 时，当您调用 Close 方法时将关闭控件连接。
> 
> 在调用 GetRequestStream、BeginGetRequestStream、GetResponse 或 BeginGetResponse 方法后更改 KeepAlive 会导致 InvalidOperationException 异常。
> 
> [http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.keepalive.aspx](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.keepalive.aspx)

* * *

> **使用二进制**
> 
> 获取或设置一个布尔值，该值指定文件传输的数据类型。
> 
> 如果要发送二进制数据，例如图像，请将此属性设置为 true。如果要发送文本，请将属性设置为 false。指定 true 会导致 FtpWebRequest 向服务器发送“TYPE I”命令。指定 false 会导致 FtpWebRequest 向服务器发送“Type A”命令。FTP 服务器可以忽略这些命令。
> 
> 在调用 GetRequestStream、BeginGetRequestStream、GetResponse 或 BeginGetResponse 方法后更改 UseBinary 会导致 InvalidOperationException 异常。
> 
> [http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.usebinary.aspx](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.usebinary.aspx)

* * *

> **使用被动**
> 
> 获取或设置客户端应用程序的数据传输过程的行为。
> 
> 将 UsePassive 属性设置为 true 会将“PASV”命令发送到服务器。该命令请求服务器侦听数据端口并等待连接，而不是在收到传输命令后启动连接。
> 
> 有关使用 UsePassive 指定的行为的描述，请参阅 RFC 959，“文件传输协议”，第 3.2 节，“建立数据连接”和第 4.1.2 节，“传输参数命令”，网址为[http://www。 rfc-editor.org/](http://www.rfc-editor.org/)。
> 
> 在调用 GetRequestStream、BeginGetRequestStream、GetResponse 或 BeginGetResponse 方法后更改 UsePassive 会导致 InvalidOperationException 异常。
> 
> 如果 UsePassive 设置为 true，则 FTP 服务器可能不会发送文件的大小，并且下载进度可以始终为零。如果 UsePassive 设置为 false，防火墙可以发出警报并阻止文件下载。
> 
> [http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.usepassive.aspx](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.usepassive.aspx)

# node.js - 如何从 Redis 中弹出对象，因为它们是实时添加的？

> ID：15602956
> 
> 赞同：8
> 
> 时间：2013-03-24T19:30:43.617
> 
> 标签：node.js, redis

我想让一个 Node.js 进程运行，因为它正在检查 Redis 服务器是否有任何新的弹出。

另一个进程将偶尔进行推送，Node 进程将尝试弹出任何进来的内容。Node 进程将保持运行。

谁能指出我一个好的方向？

我试图弄清楚如何收听此类事件。当然，我可以弹出一次，但是如何让 Node 进程继续监听 Redis 服务器的任何添加？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-24T19:34:00.173

你会想要使用阻塞弹出：[http ://redis.io/commands/brpop](http://redis.io/commands/brpop)

```
function waitForPush () {
  client.brpop(['list','otherlist',0], function (listName, item) {
    // do stuff
    waitForPush();
  });
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-22T19:57:47.640

这似乎是 pub/sub 的一个很好的用例：[http ://redis.io/topics/pubsub](http://redis.io/topics/pubsub)

偶尔推送到 Redis 的 Node.js 进程也可以在每次推送某些内容时发布到通道。像这样：

```
var pushClient = redis.createClient();
//push something onto Redis
pushClient.publish("pubsub-channel", "Just pushed something onto Redis"); 
```

然后您的其他进程将订阅该频道。每次触发消息事件时，您都会弹出刚刚推送的内容：

```
var client = redis.createClient();
client.subscribe("pubsub-channel");
client.on("message", function(channel, message){
//pop off new item
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-13T18:26:16.687

带有 process.nextTick(...) 的递归函数的修改版本怎么样

```
function waitForPush () {
  client.brpop(['list','otherlist',0], function (listName, item) {
    // do stuff
    process.nextTick(waitForPush);
  });
} 
```

# java - 在 java 中受保护的成员从 diff 包访问

> ID：15602958
> 
> 赞同：0
> 
> 时间：2013-03-24T19:30:50.200
> 
> 标签：java, protected, access-specifier

在 Java 中，如何访问不同包中的受保护成员？

```
package p1
    class base      
        protected int x

package p2
    import p1.*
    class derived extends base
        int x

class subderived extends derived
     int x 
```

从`subderived`main 我想访问`x`的`p1.base`受保护规范我们只能使用继承，我们不能使用对访问的引用`base` `x`。要访问`derived` `x`我们可以使用`super.x`，但是从`subderived`，我们怎么访问`base.x`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T19:35:10.360

受保护的成员可以从直接派生和子派生类访问，无需任何限定符：而不是编写

```
base.x = 123; 
```

你可以写

```
x = 123; 
```

只要它在派生类的方法中，它就会编译得很好。但是，为了使其工作，您需要从派生类本身中删除具有相同名称的成员：否则，基成员是*隐藏*的，并且不能通过多于一级的继承层次结构通过正常语法访问语言，即不使用*反射*。

# javascript - IE10 中的 JavaScript 浏览器检测

> ID：15602962
> 
> 赞同：0
> 
> 时间：2013-03-24T19:31:29.200
> 
> 标签：javascript, internet-explorer-10

我正在更新我的网站设计，因为它在 IE10 中无法正常工作。

我正在使用条件注释和 JavaScript 的组合来处理 IE 版本检测，但是由于 IE10 已经放弃了前者并且我没有找到它忽略后者的原因，所以我在这里寻求帮助。我一直在读这个线程：

[在 JavaScript 中检测 IE 版本（v9 之前）](https://stackoverflow.com/questions/10964966/detect-ie-version-in-javascript)

但是我对 JavaScript 的了解并不遥远，所以我不确定我是否应该修改我的代码或废弃它并采用和更改该 URL 中提到的代码（如果是，我应该怎么做）。

我目前正在使用的代码：

```
<link rel="stylesheet" type="text/css" href="barebones.css">

  <!--[if lte IE 8]>
    <link rel="stylesheet" type="text/css" href="ie.css">
  <![endif]-->

  <!--[if gt IE 8]>
    <link rel="stylesheet" type="text/css" href="default.css">
  <![endif]-->

<script type="text/javascript">
    //<![CDATA[
    var appName = window.navigator.appName;
if (appName !== "Microsoft Internet Explorer")
document.write("<link rel=\"stylesheet\" type=\"text\/css\" href=\"default.css\" \/>");//]]>
</script> 
```

如果有帮助，我可以发布我的网站 URL，但我不希望人们认为我正在尝试获得更多的网站流量或其他东西。

我知道我目前使用的代码可以稍微改进一下，但我宁愿在大扫除之前让事情正常工作。

不止一台机器上的 IE10 似乎完全忽略了 JavaScript，我不知道为什么。IE9 处理得很好。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T16:53:58.690

处理此类问题时最好避免“浏览器检测”并使用“特征检测”

像[http://modernizr.com/](http://modernizr.com/)这样的库将帮助您测试浏览器兼容的特定功能，而不是围绕不同版本的浏览器进行破解。

话虽如此，IE10 往往是一个符合标准的浏览器。您可以访问[http://caniuse.com/](http://caniuse.com/)并查找各种 JavaScript 和 CSS 功能的图表，以及所有不同浏览器都支持哪些功能。

您会发现 IE10 遵守大量这些标准。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T18:57:50.933

尽管我喜欢上面的一些答案，但我知道有时对给定问题进行一系列可能的快速修复有时会产生重大影响。因此，这是我发现的另一种效果很好的解决方案：

```
<script language="javascript" type="text/javascript">
    if(Function('/*@cc_on return 10===document.documentMode@*/')()) document.documentElement.className+= ' ie10';
</script> 
```

然后为了实现特定于浏览器的 css 规则，在我添加的适当 css 文件中（例如）：

```
.ie10 div{new css rule}
.ie10 div{another new css rule} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T19:39:05.497

最近我采用了[css 浏览器选择器](http://rafael.adm.br/css_browser_selector/)作为解决方案。它是一个将特定 css 类附加到文档根目录的 js，因此您可以处理 css 内浏览器中的样式差异而无需 hack。虽然它很旧并且不支持 IE10，但正如其他人所说，IE10 是相当标准的。它可以处理 IE6、7 和 8（而且您似乎对这些浏览器采取了特殊措施），所以我猜它对您有用。

一般来说，您应该避免像这样的特定于浏览器的黑客攻击或检查，因为它们难以维护并且不能保证始终有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T13:08:04.517

由于 IE10 不识别条件注释并且您需要检测浏览器版本，因此我实现了一个函数来执行此操作：

```
 function getIEVersion() {
        if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) { 
        /*
         * sample user-Agent
         * "Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; WOW64; Trident/6.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)" 
         */
         //test for MSIE x.x;
         var ieversion = new Number(RegExp.$1); // capture x.x portion and store as a number
         return ieversion;
        }
    return -1;
    }

    alert(getIEVersion()); 
```

它返回 IE 版本号。（例如：10、9、7..）

# machine-learning - 用于为隐马尔可夫模型提供观察序列的矢量量化算法

> ID：15602963
> 
> 赞同：2
> 
> 时间：2013-03-24T19:31:31.643
> 
> 标签：machine-learning, cluster-analysis, gesture-recognition, hidden-markov-models

我目前正在构建一个手势识别应用程序。我正在从手部提取某些特征（例如[运动角度，宽度：长度比，...]）。这是我的特征向量。但显然，不能将这些向量作为隐马尔可夫模型的输入进行观察。

一般信息：手势由一组姿势组成。

因此，我找到了一篇建议我进行矢量量化的论文。我的目标是使用某种算法，从一侧输入特征向量，并获得一个整数或简单值（映射特定状态/姿势）。然后我会将这些符号集（映射完整的手势）提供给隐藏的马尔可夫模型（

一种算法是 K 均值聚类。不幸的是，例如，如果我想识别 X 数量的符号，并且我决定为每个符号创建一个集群，K 意味着创建最大的 X 个集群，因此这不能用于映射我拥有的每个状态/姿势.

因此，我认为我需要某种聚类算法，如果可能的话，可以对其进行监督，因此我规定这些特征向量集映射到姿势 A，而其他特征向量映射到姿势 B。

是否存在某种形式的监督聚类/分类算法，在其中我输入一组向量 [角度、宽度、高度] 并获得一个简单的符号，例如“A”？

以下是我刚刚生成的一些示例数据：

姿势A：[椭圆周围的角度，高：宽比]

*   0.802985 33.909615
*   0.722824 31.209663
*   0.734535 30.206722
*   0.68397 31.838253
*   0.713706 34.29641
*   0.688798 30.603661
*   0.721395 34.880161

姿势 B：[结构与姿势 A 相同]

*   0.474164 16.077467
    *   0.483104 14.526289
    *   0.478904 14.800572
    *   0.483134 14.523611
    *   0.480608 14.41159
    *   0.481552 15.563665
    *   0.497951 15.563585

# javascript - Javascript - 清除 div 中的所有内容

> ID：15602974
> 
> 赞同：3
> 
> 时间：2013-03-24T19:33:00.907
> 
> 标签：javascript, jquery

我有 div：

```
<div id="socialUserList">
//some content here, htmlTags, text, etc.
</div> 
```

现在，我希望删除该 div 中的所有内容。我正在尝试这个：

```
$("#socialUserList").innerHTML = ''; 
```

但由于某种原因，它不想工作。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T19:34:28.457

普通的 JavaScript 方法：

```
document.getElementById('socialUserList').innerHTML = ''; 
```

在 jQuery 中：

```
$('#socialUserList').html(''); 
```

* * *

*纯 JavaScript 和 jQuery 齐头并进，就像这样：*

从纯 JavaScript 到 jQuery：

```
var socialUserList = document.getElementById('socialUserList');
console.log($(socialUserList).html()); 
```

从 jQuery 到纯 JavaScript：

```
var socialUserList = $('#socialUserList');
console.log(socialUserList[0].innerHTML); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T19:33:56.097

你有没有尝试过：

```
jQuery('#socialUserList').empty(); 
```

注意：您可能也尝试过：

```
jQuery('@socialUserList')[0].innerHTML = ''; 
```

使用`[0]`将访问第一个匹配元素的 DOM 对象。

# ruby-on-rails-3 - Rails“子环境”——仍然是生产（或测试等）但不同

> ID：15602976
> 
> 赞同：0
> 
> 时间：2013-03-24T19:33:18.517
> 
> 标签：ruby-on-rails-3, architecture, development-environment, production-environment

我们应该如何最好地处理属于单个 Rails 应用程序的代码，但在几种不同的“模式”中使用？

我们有几个不同的应用程序案例，这些应用程序由相同的数据源（MySQL、MongoDB、SOLR）驱动，并在多种不同用途中共享核心逻辑、资产等。

背景/细节：

**HTML vs REST API** 一个常见的场景是我们有 HTML 和 REST 接口。这些差异是通过路由处理的（例如`/api/v1/user/new`vs `/user/new`）——它们提供相同的功能的细微差别。这对我来说似乎相当干净。

**多租户** 另一个常见的场景是应用程序是“多租户”的，主要由 URL 的子域决定，例如 partner1.example.com 和 partner2.example.com（或 API 客户的查询字符串参数）——每个具有许多不同的特征或属性。这由过滤器处理，该过滤器`ApplicationController`使用大量存储在一组特定于租户的数据库表中的数据，其中特定于租户的功能由方法封装。这对我来说似乎也相当干净。

**离线任务** 一种情况是，大量数据是通过大量连续运行的任务获取的：饲料加载器、抓取工具、爬虫和其他此类任务......你会发现的那种东西在搜索引擎中，这是我们所做工作的很大一部分。这些任务在空闲服务器实例上启动并定期运行……但只是`rake`应用程序的一部分。

这些任务在特征上与我们的前端代码不同——它们更新数据、运行计算、执行维护任务等等——一些任务运行数天（例如从外部 Web 服务更新 30M 文档）。最后，这些任务创建并保持我们前端应用程序使用的核心数据的最新状态。

这个对我来说似乎不太干净，特别是在某些情况下，这些任务正在运行并在我们的应用程序使用它们的同时进行数据更新，因此当我们偶尔需要推迟到前端应用程序时'处于峰值负载之下。

**应用程序的主要变体** 最后一种情况显然是错误的——我们已经对我们的应用程序进行了主要的定制——15% 或 20% 的不同，通过创建分支然后作为一个完全独立的应用程序运行，有时共享一些核心数据，但在其他时候使用它自己的一些数据。我们现在已经基本解决了这个问题，因为它当然是站不住脚的。

**好的，这里有个问题，对吧？**

因此，特别是对于离线任务，我觉得该应用程序确实需要在“模式”或“子环境”中启动。但是我们仍然有正常的开发、测试、qa、demo、pre_release、生产环境，它们有自己的隔离数据和其他配置参数。对于其中的每一个，我们都希望能够运行、开发、测试和部署应用程序的各种“模式”。

任何人都可以建议一个类似于标准 Rails 环境的声明性概念的适当架构吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T20:43:40.577

*   如果模式的数量不断增加：

    也许离线任务可以从主应用程序中分离出来，进入他们自己的应用程序（或者一个父抽象任务，实际任务从它继承并单独部署）。

*   如果模式的数量相对较少并且不会经常更改：

    您可以将每个模式的配置放入一个配置文件中，在逻辑上与其余代码分开。然后在部署期间，您将能够提供（环境、模式、主机集）的组合，并在使用相同代码库的*同时获得对环境的良好控制。*

# scala - 为什么 Scala REPL 显示 Map 表达式的元组类型？

> ID：15602983
> 
> 赞同：1
> 
> 时间：2013-03-24T19:33:46.907
> 
> 标签：scala, map, tuples, read-eval-print-loop

Scala REPL 为这两个表达式提供了相同的类型——（元组？——奇怪！）。然而`("a" ->1)`，这是一张我可以添加到地图但不能添加的地图`("a", 1)`。为什么 Scala REPL 显示 Map 表达式的元组类型类型？

```
scala> :t ("a" -> 1)
(String, Int)

scala> :t ("a",1)
(String, Int)

scala> val m = Map.empty[String, Int]
m: scala.collection.immutable.Map[String,Int] = Map()

scala> m + ("a",1)
<console>:9: error: type mismatch;
 found   : String("a")
 required: (String, ?)
          m + ("a",1)
           ^

scala> m + ("a" ->1)
res19: scala.collection.immutable.Map[String,Int] = Map(a -> 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T19:42:07.277

Scala 认为`a + (b,c)`意味着您尝试`+`使用两个参数调用该方法，这是一种真正的可能性，因为地图*确实*具有多参数添加方法，因此您可以执行以下操作

```
m + (("a" -> 1), ("b" -> 2)) 
```

解决方案很简单：只需添加一组额外的括号，因此很明显`(b,c)`实际上是一个元组作为单个参数传递。

```
m + (("a", 1)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T20:12:04.723

实际上，这样做的原因是 Predef: [http://www.scala-lang.org/api/current/index.html#scala.Predef$](http://www.scala-lang.org/api/current/index.html#scala.Predef%24)（在 Scala 中始终在范围内）包含从 Any 到的隐式转换ArrowAssoc（方法`implicit def any2ArrowAssoc[A](x: A): ArrowAssoc[A]`）

ArrowAssoc 包含方法 -> 将其转换为元组。

所以基本上你正在做`any2ArrowAssoc("a").->(1)`哪个返回（“a”，1）。

来自回复：

```
any2ArrowAssoc("a").->(1)
res1: (java.lang.String, Int) = (a,1) 
```

此外，您可以像这样处理不可变的哈希图：

```
val x = HashMap[Int,String](1 -> "One")
x: scala.collection.immutable.HashMap[Int,String] = Map((1,One))
val y = x ++ HashMap[Int,String](2 -> "Two")
y: scala.collection.immutable.Map[Int,String] = Map((1,One), (2,Two))
val z = x + (3 -> "Three")
z: scala.collection.immutable.HashMap[Int,String] = Map((1,One), (3,Three)) 
```

# vb.net - 使用 CallByName 访问子类或子属性

> ID：15602984
> 
> 赞同：2
> 
> 时间：2013-03-24T19:33:47.050
> 
> 标签：vb.net, callbyname

我可以使用**CallByName**访问类的子值（换句话说，我可以`Class.SubValue`使用它）。
但是当我想`Class.SUBCLASS.SubValue`使用 CallByName 时出现错误。
是否可以使用 CallByName （或使用 smtg else）来做到这一点？

这是一个典型的代码：

```
Class Class1
    Public someVariable as Long=123 'now "Class1" has "someVariable" 
End Class
Class Class2
    Public subClass as new Class1   'now "Class2" has a SUBCLASS "Class1" 
End Class

Sub Test()
    Dim c1 as New Class1, c2 as New Class2
        'This works fine, and I can get c1.someVariable. It's OK.
    a=CallByName(c1,"someVariable",CallType.Get)
        'But I get error here... and I can't get c2.subClass.someVariable
    b=CallByName(c2,"subClass.someVariable",CallType.Get)
End Sub 
```

**- 编辑：这是实际的问题。--**

我想将文件中的参数加载到表单的控件中，并且在文件中的参数是这样写的：
`<ControlName>.<Property>=<Value> | TextBox1.Text=SomeText | Button2.Left=1234`
当我使用时出现错误：
`CallByName(MyForm, "<ControlName>.<Property>", CallType.Set, "<Value>")`

如何解决我的问题（使用 CallByName 或 smtg else）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T12:56:34.120

我使用了这个简单的递归函数

```
 Function RecursiveGetValue(ByVal Name As String, ByVal Data As Object) As Object
If Name.Contains(".") = True Then
  RecursiveGetValue = RecursiveGetValue(Name.Substring(Name.IndexOf(".") + 1), CallByName(Data, Name.Split(".")(0), CallType.Get))
Else
  RecursiveGetValue = CallByName(Data, Name, CallType.Get)
End If 
```

结束功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-26T17:18:51.490

我正在做类似的事情。我希望能够在 SQL 列名中使用点表示法以递归方式填充对象层次结构。

```
Sub PopulateData(r As SqlDataReader)
    For i As Integer = 0 To r.FieldCount - 1
        If Len(r(i)) > 0 Then
            Try
                Dim ob As Object = Me
                Dim name As String = r.GetName(i)

                While InStr(name, ".") > 0
                    ob = CallByName(ob, Split(name, ".")(0), CallType.Get)
                    name = name.Substring(InStr(name, "."))
                End While

                CallByName(ob, name, CallType.Set, r(i))

            Catch ex As Exception
                Console.WriteLine("Missing property: {0}", r.GetName(i))

            End Try

        End If

    Next

End Sub 
```