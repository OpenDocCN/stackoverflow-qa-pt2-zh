# StackOverflow 问答 13951000-13951999

# excel - Excel中具有命名范围的动态超链接

> ID：13951001
> 
> 赞同：0
> 
> 时间：2012-12-19T11:07:11.420
> 
> 标签：excel, dynamic, hyperlink, named-ranges

我已经寻找了一个解决方案，我相信我想做的事情是可能的（或者可能不是），但我似乎无法让它发挥作用。

问题的概要如下。我在工作表数据的 A 列中有一些数据，A 列中的值不是唯一的。在工作表使用情况中，我在 A 列中有另一组数据，这是工作表数据中数据的唯一列表。我想在数据表中的单元格上创建一个超链接，并根据在数据表中单击的单元格的值将我带到使用表中的相应单元格的超链接。原则上，设置多个超链接很简单，但是当使用表中的数据重新排序时，超链接不会与它们一起重新排序，因此超链接指向错误的单元格。

在搜索互联网之后，似乎设置动态命名范围并超链接到所述命名范围将解决问题，因为命名范围将使用使用表中的值进行排序。我定义了一个新的命名范围，让我们称之为“matchRange”并对其应用以下引用：

```
=INDEX('Usage'!$A$3:$A$533,MATCH("1115",'Usage'!$A$3:$A$533,FALSE),1) 
```

我知道这是可行的，因为如果我在一个单元格中应用这个公式，它会返回 1115。现在，如果我转到数据表中的单元格并在包含 1115 的单元格上插入一个超链接，我在定义的名称中看不到“matchRange”名称插入超链接部分。所以我想我问我是否应该能够看到这个名字来附加超链接？如果我只是为一个单元格创建一个名称范围，那么我可以将一个超链接附加到我为它定义的名称上。

只是指出我不想为此在单元格中使用超链接公式。

希望这是有道理的，任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T10:57:25.703

在以下位置找到了解决此问题的方法：

[https://sites.google.com/site/e90e50fx/home/Excel-Hyperlink-to-a-dynamic-range](https://sites.google.com/site/e90e50fx/home/Excel-Hyperlink-to-a-dynamic-range)

# asp.net-mvc - 最佳实践：在 web api 控制器中处理错误和异常的方法？

> ID：13951005
> 
> 赞同：20
> 
> 时间：2012-12-19T11:07:31.970
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在做一个项目，并且我的所有客户端操作都严重依赖 web api，无论是帐户详细信息更新、添加新详细信息、修改所有内容都已使用 ASP.NET Web Api 和 Backbone.js 完成

**当前场景：**

在当前的方案中，我从我的 web api 控制器返回一个布尔值，以指示操作是否成功。

例子 ：

```
[ActionName("UpdateAccountDetails")]
public bool PostAccountDetails(SomeModel model)
{
    bool updateStatus = _customService.UpdateAccountDetails(model);
    return updateStatus;
} 
```

因此，在对此操作进行 ajax 调用后，我会检查响应的真/假并显示错误或成功消息。

**问题 ：**

现在发生的事情是我开始在我的操作中遇到异常，并且操作一直返回 false，并且显示了错误消息。但我找不到为什么？

所以我想知道是否有每个人都遵循的标准 api 响应结构？

我最初提出了这个想法，让每个 web api 操作都返回这个类

```
public class OperationStatus
{
    public bool Result { get; set; } // true/false
    public string Status { get; set; } // success/failure/warning
    public List<string> WarningMessages { get; set; }
    public List<string> ErrorMessages { get; set; }
    public string OtherDetails { get; set; }
} 
```

此更改将是一项重大更改，并且会耗费时间和资源，因此我认为最好对此有第二/第三/第四意见。

请对此提出一些想法。

**更新 ：**

在马克琼斯的一些[帮助](https://stackoverflow.com/users/1440706/mark-jones)[下](https://stackoverflow.com/a/13951599/1182982)，我想出了这个

```
[ActionName("UpdateAccountDetails")]
public HttpResponseMessage PostAccountDetails(SomeModel model)
{
    bool updateStatus;
    string errorMessage;
    try{
        updateStatus = _customService.UpdateAccountDetails(model);
        if(updateStatus)
        {
            return Request.CreateResponse(HttpStatusCode.OK);
        }
        return Request.CreateResponse(HttpStatusCode.InternalServerError);
    }
    catch(Exception exception)
    {
        errorMessage = exception.Message;
        return Request.CreateResponse(HttpStatusCode.InternalServerError, errorMessage);
    }

    return updateStatus;
} 
```

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T15:29:50.083

您应该避免在控制器的操作中使用 try/catch。

有很多方法可以处理您的问题。最简单和最干净的解决方案可能是使用 an`ActionFilter`来处理异常，类似于：

```
public class ExceptionAttribute : ExceptionFilterAttribute
{
    public override void OnException(HttpActionExecutedContext context)
    {
        Debug.WriteLine(context.Exception);

        throw new HttpResponseException(new HttpResponseMessage(HttpStatusCode.InternalServerError)
        {
            Content = new StringContent("An error occurred!"),
            ReasonPhrase = "Deadly Exception"
        });
    }
} 
```

然后你可以用 . 装饰你的动作`[ExceptionAttribute]`。当然，您可以扩展它以针对不同类型的异常（业务异常、数据异常、IO 异常等）表现出不同的行为，并基于此返回不同的状态码和反馈。

我建议你阅读Fredrik Normen的**一篇优秀文章-** *“ASP.NET Web API 异常处理”* [http://weblogs.asp.net/fredriknormen/archive/2012/06/11/asp-net-web-api-exception-处理.aspx](http://weblogs.asp.net/fredriknormen/archive/2012/06/11/asp-net-web-api-exception-handling.aspx)。

他对 Web API 的异常处理技术进行了很好的概述。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T14:17:39.337

我不会返回**HttpResponseMessage** ，而是保持 API 相同，并且在捕获异常时仅抛出**HttpResponseException 。**像这样的东西：

```
throw new HttpResponseException(
    new HttpResponseMessage(HttpStatusCode.InternalServerError) 
       { ReasonPhrase = errorMessage }); 
```

这样您就不会更改 API 的定义，它也可以与您的 GET 操作一起使用，您可以在其中返回一些必须序列化的对象。如果您使用 JQuery ajax 方法来发送请求，那么您的**错误**处理程序将捕获它，您可以检索**errorThrown**参数中的文本消息并相应地处理它。

# android - 如何在Android中创建背景不规则的按钮

> ID：13951007
> 
> 赞同：0
> 
> 时间：2012-12-19T11:07:32.570
> 
> 标签：android, android-layout, android-widget, imagebutton

我想创建一个精美的标题，其中包含一些背景不规则的按钮，如下所示：

![在此处输入图像描述](../Images/be30c98dc4f15ffbd142ca263ce32e29.png)

在上面的示例中，有 5 个按钮（更准确地说，是可点击区域）。他们每个人都有一个不规则的背景，他们适合在一起。我猜按钮的每个背景图像都是从菜单栏的原始照片中分割出来的。这里的每个按钮实际上都是一个复杂的布局。但是他们如何以背景完美融合的方式合并按钮呢？有什么技术可以做到这一点？
非常感谢您的任何回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:09:14.377

只需创建具有网格在一起的背景图像的按钮，然后将按钮彼此相邻放置，中间没有间隙。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:12:09.227

您可以对权重总和 = 100 的按钮使用线性布局（水平方向），然后将此权重平均分配给所有五个按钮。我认为这适用于你的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:15:30.720

分别创建 Button 布局在该布局中添加您的按钮 在您要在其中使用带有`<include />`标签的主布局中添加该布局

# c# - 在 mvc3 razor 中显示复选框

> ID：13951008
> 
> 赞同：0
> 
> 时间：2012-12-19T11:07:35.977
> 
> 标签：c#, .net, asp.net-mvc-3, razor

我正在创建 Mvc 3 razor databasefirst 应用程序。为此，我有 Tblskills 表和 TblEmployeeDetails。我想在创建页面的数据库中的复选框中显示技能。

**控制器**

```
public ActionResult Create() {            
    List<TblSkill> Skills =   EmployeeMVC.Infrastructure.HtmlHelpers.GetTblSkill().ToList();
    ViewBag.skill = new List<TblSkill>(HtmlHelpers.GetTblSkill());
    return View();
} 
```

**创建视图**

```
@{
       List<EmployeeMVC.Models.TblSkill> Skills = ViewBag.skill;
       for (int i = 0; i < Skills.Count; i++)
       {
           Response.Write("<td style='border: none;'>");
           Response.Write(string.Format("<input type='checkbox' id='skill{0}' name='skill'      value='{0}' {2}/><label for='skill{0}'>{1}</label><br/>",
           Skills[i].SkillsId, "&nbsp;" + Skills[i].Skills + "&nbsp;",
           (EmployeeMVC.Infrastructure.HtmlHelpers.GetTblSkill())
            ));
           Response.Write("</td>");
           if ((i + 1) % 3 == 0)
           {
               Response.Write("</tr><tr>");
           }
       }
                    } 
```

**并在 GetTblSkill 方法中**

```
 public static  IQueryable<TblSkill> GetTblSkill()
        {

            return (from x in db.TblSkills
                    select x);
        } 
```

我没有在开始页面中显示的技能字段中获得复选框

# actionscript-3 - 调整电影大小时，tilelist 滚动条消失

> ID：13951009
> 
> 赞同：1
> 
> 时间：2012-12-19T11:07:36.690
> 
> 标签：actionscript-3, flash-cs4

我有一个图像查看器电影，在 HTML 中它的大小以百分比宽度 = 80% 和高度 = 80% 定义。电影中有一个垂直的 TileList 和比电影中容纳的更多的缩略图。所以通常除了 Tilelist 之外还有一个滚动条。当我调整浏览器窗口的大小时，电影的大小调整好了，但滚动条消失了！这是电影中的一些代码：

```
 stage.addEventListener(Event.RESIZE, resizeHandler);
    stage.align = StageAlign.TOP_LEFT;
    stage.scaleMode = StageScaleMode.NO_SCALE;
    .
    .
    .
    function resizeHandler(e:Event):void {
        movieBackground.height = stage.stageHeight;
        movieBackground.width = stage.stageWidth;
        movieBackground.x = 0;
        movieBackground.y = 0;
        thumbs.columnWidth = stage.stageWidth / 6; 
        thumbs.rowHeight = stage.stageHeight / 6; 
        thumbs.columnCount = 1;
        thumbs.rowCount = (stage.stageHeight) / thumbs.rowHeight; 
        thumbClip.x = stage.stageWidth - thumbs.columnWidth;
        thumbClip.y = 0;
        resizeCurrentImage();
    } 
```

# apache - 阿帕奇山狮不工作

> ID：13951018
> 
> 赞同：0
> 
> 时间：2012-12-19T11:08:01.447
> 
> 标签：apache, osx-mountain-lion, httpd.conf

我已经在互联网上不停地搜索了三天以找到解决我的问题的方法，但没有任何效果。

我的 Apache 已加载，我的 httpd.conf 文件是默认的，而不是现在未注释的 PHP5 LoadModule，并且至少允许读取所有文件的权限。

我已经完全重新安装了 Mountain Lion，只使用 Time Machine 恢复了我的用户帐户。

以下是我的 httpd.conf 文件的一些重要部分（因为它们是默认的）：

```
ServerRoot "/usr"

#Listen 12.34.56.78:80
Listen 80

User _www
Group _www

#ServerName www.example.com:80

DocumentRoot "/Library/WebServer/Documents"

<Directory />
    Options FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
</Directory>

<Directory "/Library/WebServer/Documents">
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    Allow from all
</Directory> 
```

我的**UserName.conf**文件（**James.conf**）：

```
<Directory "/Users/James/Sites/">          
    Options Indexes MultiViews     
    AllowOverride AuthConfig Limit          
    Order allow,deny          
    Allow from all     
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:10:01.487

不幸的是，在完全重新安装了 Mountain Lion 之后，我仍然无法成功启动 Apache。我什至从 clickontyler.com/blog/2012/02/web-sharing-mountain-lion 下载了用于 Web 共享的系统偏好设置窗格，但这仍然不起作用。

唯一能让我在我的 Macbook Pro 上利用 Apache 服务器的方法是从[这里](http://www.apachefriends.org/en/xampp.html)下载 XAMPP 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T07:35:42.910

检查这个文件

```
/private/etc/apache2/extra/httpd-vhosts.conf* 
```

我注释掉了虚拟虚拟主机

我还在 httpd.conf 中犯了一个错字，当我修复它时，事情开始起作用了

# c# - Div 不会在更新面板中淡出

> ID：13951026
> 
> 赞同：1
> 
> 时间：2012-12-19T11:08:34.883
> 
> 标签：c#, javascript, jquery, asp.net, updatepanel

我正在使用更新面板，在其中我有一个 div，当转发器的项目命令被触发时，我会在其中显示一条消息。div 在开始时是可见的错误。

```
 <div id="divCommentsMsg" class="form_popup_Msg" visible="false" runat="server">
        <asp:Label ID="lblCommentsMsg" runat="server"></asp:Label>
  </div> 
```

它在中继器的 ItemCommand 上可见。为了淡出它，我使用：

```
 $("#ctl00_ContentPlaceHolder1_ctrlComments_divCommentsMsg").delay(3000).fadeOut(100); 
```

div 变得可见但不会淡出。我该怎么办 ？

**更新** 我正在 IE 9 中尝试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:11:39.337

试试这个：

```
$("#'<%=divCommentsMsg.ClientID %>'").delay(3000).fadeOut(100); 
```

用于在客户端`ClientID`获取元素的“真实” `id`。

或者使用 Ends with 选择器：

```
$("[id$='divCommentsMsg']").delay(3000).fadeOut(100); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:12:52.480

获取`ClientID`服务器控件

```
$("#'<%=divCommentsMsg.ClientID %>'").delay(3000).fadeOut(100); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T05:04:32.240

我在这个链接找到了一个完美的解决我的问题的方法：

[jQuery $(document).ready 和 UpdatePanels？](https://stackoverflow.com/a/256253/1398222)

这是因为更新面板在每次更新后重新绑定 jquery 对象。

# powershell - MSBuild - 构建后自动部署 Windows 服务

> ID：13951027
> 
> 赞同：2
> 
> 时间：2012-12-19T11:08:35.207
> 
> 标签：powershell, msbuild, windows-services, continuous-integration

好的，这就是我想做的-

我们有一个 Windows 服务，我们希望在每次成功的 CI 构建之后自动将该服务部署到测试环境 - 为此我们想到了以下方法 -

*   构建 Windows 服务项目（连同依赖项）
*   停止windows服务
*   将项目输出从输出文件夹复制到 Windows 服务文件路径
*   启动服务

但是，目前我在启动和停止 Windows 服务方面遇到了问题。

这是 MSBuild 片段 -

```
<!-- TODO: do this using Powershell instead of normal commandline so that it can be executed on remote machines as well -->
<Exec Command="Net Stop CreditProcessing" />
<!-- Exec Command="$(PowerShellExe) -NoProfile -Noninteractive -command &quot;&amp;{ Stop-Service CreditProcessing }&quot;" /-->

<!-- TODO: The destination needs to come from the env variable or rsp file? -->
<Copy 
    SourceFiles="@(WindowsServiceFilesToDeploy)" 
    DestinationFiles="@(WindowsServiceFilesToDeploy->'D:\WindowsServices\Credit Processing Service%(RecursiveDir)%(Filename)%(Extension)')" />  

<Exec Command="Net Start CreditProcessing" />   
<!--Exec Command="$(PowerShellExe) -NoProfile -Noninteractive -command Start-Service CreditProcessing" /--> 
```

我尝试使用直接命令行命令和 powershell 命令。

A）这是我尝试使用普通命令运行此构建时遇到的问题 - 服务需要一些时间来启动/停止，并且构建没有等待足够长的时间并报告错误并停止

“......服务无法启动”。“服务未报告错误”

或者有时在停下来的时候

“目前的服务无法控制。”

而如果我们立即检查服务，它将处于“启动”阶段，很快它将进入“启动”阶段。有什么方法可以让构建更有耐心吗？如果直接从命令提示符运行，该命令不会执行此操作。

B）如果我使用上面的 powershell 命令（目前在片段中注释），这就是我们面临的问题 -

它只是在构建日志中打开 powershell 提示符，然后什么也不做 ![在 powershell 处构建停止不会继续](../Images/ec8f1261225e81f3a72405aafadb0297.png)

你能帮助避免这些问题（至少其中一个）吗？我认为如果它工作正常，更推荐使用 powershell 路线，但我愿意接受建议。

还有几个问题——

*   我们想在远程机器上部署服务（因此停止并重新启动）（除了这个 CI 构建发生的地方）——无论如何这可以做到吗？

*   有没有办法添加检查服务是否已经在运行并且仅在它正在运行时才停止？如果它停止并且我们尝试再次停止，它将给出“服务未启动”错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:23:38.763

为什么不使用具有本机远程功能的[sc.exe呢？](http://support.microsoft.com/kb/251192/en-us)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:54:28.033

您的启动命令采用以下形式：

```
path\to\powershell.exe
-arg1 -arg2 
```

换行意味着 PowerShell 从不接收参数，因此不知道它必须执行`Start-Service`命令，也不知道您不希望它是交互式的。它可能只是在等你告诉它该做什么。

检查您的 $(PowerShell) 变量，因为它的末尾可能有一个换行符。

# javascript - 我网站中的 facebook 登录对话框

> ID：13951029
> 
> 赞同：0
> 
> 时间：2012-12-19T11:08:38.573
> 
> 标签：javascript, facebook, login, sdk

无需单击登录按钮即可出现登录对话框。

如何在不单击“登录”的情况下停止加载对话框

检查我的网站[http://wwwtechnologies.com/](http://wwwtechnologies.com/) 我在 fb 应用程序中给出了这个设置 应用程序域：wwwtechnologies.com 带有 Facebook 登录的网站：http://wwwtechnologies.com/

另一个问题：

如何获取该人的 Facebook 名称

```
<!-- FB LOGIN -->

<div id="fb-root"></div>
<script>
// Additional JS functions here
window.fbAsyncInit = function() {
FB.init({
appId      : 'xxxxxxxx', // App ID
//channelUrl : '//wwwtechnologies.com/channel.html', // Channel File
status     : true, // check login status
cookie     : true, // enable cookies to allow the server to access the session
xfbml      : true  // parse XFBML
});

FB.getLoginStatus(function(response) {
if (response.status === 'connected') {
// connected
} else if (response.status === 'not_authorized') {
// not_authorized
login();
} else {
// not_logged_in
login();
}
});
// Additional init code here

};

// Load the SDK Asynchronously
(function(d){
var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
if (d.getElementById(id)) {return;}
js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js";
ref.parentNode.insertBefore(js, ref);
}(document));

function login() {
FB.login(function(response) {
if (response.authResponse) {
testAPI();

window.location.href = "index.php";
// connected
} else {
// cancelled
}
});
}

function testAPI() {
console.log('Welcome!  Fetching your information.... ');
FB.api('/me', function(response) {
//var myname = '+response.name+';
//alert(myname);
console.log('Good to see you, ' + response.name + '.');
});
}
</script>

<!-- FB LOGIN --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:16:13.577

加载 JavaScript SDK 后立即调用该`window.fbAsyncInit`函数。在该函数中，您已经放置了您的`FB.getLoginStatus`逻辑。您要做的是在用户单击您的登录按钮时`FB.getLoginStatus`退出`window.fbAsyncInit`并触发它。

```
function doLogin(){
  FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
      // connected
    } else if (response.status === 'not_authorized') {
      // not_authorized
      login();
    } else {
      // not_logged_in
      login();
    }
  });
}

<button onclick="doLogin();">Login</button> 
```

# html - 在图像上设置叠加图像

> ID：13951030
> 
> 赞同：0
> 
> 时间：2012-12-19T11:08:42.897
> 
> 标签：html, css

我有一个半透明的图像，我想覆盖在图像上。我正在尝试遵循 HTML 和 CSS，但我无法获得图像的背景，它始终保留在图像后面。

在下面的代码中，我试图`.box`在`li`.

**HTML：**

```
<div class="box">
    <div class="x">
    <ul>
        <li>
            <img src="http://farm9.staticflickr.com/8341/8283881151_aa0735d1fc.jpg" />            
        </li>
    </ul>
    </div>
</div> 
```

**CSS：**

```
.box{
    background: red;
    position: relative;
    z-index: 2
}

li{
    position: relative;
    z-index: 1;
} 
```

[演示](http://jsfiddle.net/btysT/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:18:54.913

您需要将框设置在与图像相同的图层上。

这是一个例子：[小提琴](http://jsfiddle.net/ZNLPn/1/)

HTML：

```
 <div id="container">
     <div id="box"></div>
     <img src="http://upload.wikimedia.org/wikipedia/commons/c/ca/Triple-Spiral-4turns_green_transparent.png"
 width=200 id="overlay"></div> 
</div>​ 
```

CSS：

```
#container {
    position: relative;
}

#box {
    position: relative;
    display: block;
    width: 200px;
    height: 200px;
    background: red;
    z-index: 1;        
}

#overlay {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:12:18.273

问题是您的图像在框中。因此，提高盒子的 z-index 不会把它放在图像的顶部，因为盒子里面的所有东西都带有它。

要解决此问题，请将图像放在框外的单独 div 中，然后让您能够将框放在其顶部。

**更新：**这定义了两个 div。 `.box`将在`.x`.

```
.box{
    background: red;
    opacity: 0.4;
    position: absolute;
    height: 500px;
    width: 500px;
    z-index: 2
}

.x {
    position: absolute;
    z-index: 1;
} 
```

[Jsfiddle 示例](http://jsfiddle.net/BNznb/)。

# c# - 从 CSV 文件中获取错误的字符串网格

> ID：13951033
> 
> 赞同：1
> 
> 时间：2012-12-19T11:08:54.427
> 
> 标签：c#, .net, csv

这是我使用[此 URL上的 CsvFileReader 类从 CSV 文件中获取字符串网格的代码](http://www.codeproject.com/Articles/415732/Reading-and-Writing-CSV-Files-in-Csharp#_comments)

```
static void Main(string[] args)
{
  // Read sample data from CSV file
  ArrayList list = new ArrayList();
  List<string> U = new List<string>();
  U.Clear();
  list.Clear();
  using (CsvFileReader reader = new CsvFileReader(@"C:\\path_to_file\file.csv"))
  {
    CsvRow row = new CsvRow();
    while (reader.ReadRow(row))
    {
      U.Clear();
      foreach (string s in row)
      {
        //Console.Write(s);
        //Console.Write(" ");
        U.Add(s);
      }
      list.Add(U);
      //Console.WriteLine();
    }
  }

  Console.WriteLine(list);
  Console.ReadLine();
} 
```

但是我没有得到我想要的字符串网格。“列表”仅包含最后一个 csv 行的重复副本，该副本等于 CSV 文件中的行数，而不是我正在寻找的确切网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:22:15.673

我不知道字符串“grid”是什么意思，但我猜你的意思是's`List`将包含`List<string>`CSV 文件的每一行。

您的基本错误是`U`一遍又一遍地为内部循环使用相同的列表 ( )。[`List<T>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)是 C# 中的引用类型，因此您最终会一次又一次地添加完全相同的对象。

我还没有测试过代码，但是这些方面的东西应该可以工作。

```
static void Main(string[] args)
{
  // Read sample data from CSV file
  List<List<string>> list = new List<List<string>>();
  using (CsvFileReader reader = new CsvFileReader(@"C:\\path_to_file\file.csv"))
  {
    CsvRow row = new CsvRow();
    while (reader.ReadRow(row))
    {
      List<string> rowList = new List<string>();
      foreach (string s in row)
      {
        //Console.Write(s);
        //Console.Write(" ");
        rowList.Add(s);
      }
      list.Add(rowList);
      //Console.WriteLine();
    }
  }

  foreach (List<string> rowList in list)
  {
     foreach (string cellData in rowList)
     {
        Console.Write(cellData + "\t");
     }
     Console.WriteLine();
  }
  Console.ReadLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:25:29.223

我可以为您提供一个将制表符分隔的 csv 读取到数据表中的功能：将 excel 保存到制表符分隔的 csv 中，您可以阅读它。

```
 public static DataTable ParseCSV(string path)
    {
        var dt = new DataTable();
        using (var sr = new StreamReader(path, Encoding.UTF8))
        {
            string line;
            while ((line = sr.ReadLine()) != null)
            {
                string[] items = line.Split('\t');
                items[1] = ToUpperFirstLetter(items[1].ToLower());
                if (dt.Columns.Count == 0)
                {
                    // column names
                    foreach (string t in items)
                        dt.Columns.Add(new DataColumn(t.Trim(), typeof(string)));
                }
                else
                {
                    //data
                    dt.Rows.Add(items);
                }
            }
        }
        return dt;
    } 
```

用法：

```
 var dt = ParseCSV("c:\\data\\some.txt") 
```

# matlab - 如何在 GUI matlab 中创建输入文本框

> ID：13951037
> 
> 赞同：1
> 
> 时间：2012-12-19T11:09:02.357
> 
> 标签：matlab, user-interface

我需要为具有以下要求的特定代码制作 GUI：

1.它应该从目录中选择一个文本文件（浏览按钮）。
2.我们必须在文本框中输入一个数据（并且应该在它旁边写一个静态的这个文本：（输入（从上面的上下文数组）用逗号分隔的查询GO术语：）。 3.
我应该按下按钮 Find the RKC.
4\. RKC(s) 应该在 GUI 上显示为结果（在普通的 matlab 代码中，结果是 fprintf('RKC = { %s , %s }\n',pc, cc); 其中 pc 和 cc 是代码的结果。

我确实创建了自己的 GUI 代码，但存在一些问题：

1.在函数'RKCCallback'中，它不会从它上面的'GOCallback'函数中获取选定的文本文件。
2\. 我不知道如何在浏览按钮旁边创建静态文本框，我应该在上面写：（输入（从上面的上下文数组）查询 GO 用逗号分隔的术语：）。
3.我不知道如何制作一个输入框，我应该输入要运行的数据并找到RKC（在正常的matlab代码中它是：n = input（'输入（来自上面的上下文数组）查询用逗号分隔的 GO 术语：','s'); 。

```
The GUI code:

function My_GUI
    clear all
    close all
    clc

plotbutton=uicontrol('Style','pushbutton',...
    'Position',[400 300 100 30],...
    'String','Browse',...
    'Callback',@GoCallback);

function GoCallback(source,eventdata)

        [FileName,PathName]= uigetfile('*.txt','Browse')

 end

%set push button for parameter A
RKCbutton=uicontrol('Style','pushbutton',...
    'Position',[400 100 100 30],...
    'String','Find the RKC',...
    'Callback',@RKCCallback);

%Set main figure properties.
bgcolor=[0.8 0.8 0.8];
frac2main=figure('Visible','off',...
    'Position',[0 0 700 480],...
    'MenuBar','none',...
    'Name','Melanoma Detection',...
    'NumberTitle','off',...
    'Resize','off',...
    'Color',bgcolor);
'*.txt','Browse'
%set textRKC for result
textRKC=uicontrol('Parent', frac2main,...
    'Style','text',...
    'Position',[220 300 100 30],...
    'String','0',... 
    'FontWeight','demi',...
    'FontSize',11,...
    'Backgroundcolor',[1 1 1],...
    'Foregroundcolor',[0 0 1]);

function RKCCallback(source,eventdata)
          s={};
           fid = fopen('gos.txt'); 
    tline = fgetl(fid); 
        while ischar(tline) 
           s=[s;tline]; 
           tline = fgetl(fid); 
        end 

The rest of the code....
.
.
.
.
.
.

   set(textRKC,'string',pc,cc)  % the results which should shown
end 
```

fowlloing 是我希望我的 GUI 出现的图片（也应该有结果框，但我不知道如何在底部绘制它）

![在此处输入图像描述](../Images/c43832abf70f2533a052b979ee720c39.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:39:58.813

我建议您阅读有关[MATLAB 文件交换](http://www.mathworks.de/matlabcentral/fileexchange/24861-41-complete-gui-examples)的超级帖子。这将帮助您深入了解这些 GUI 背后的机制。

# xna - 基于 XNA tile 的边界框碰撞 - 靠墙滑动

> ID：13951041
> 
> 赞同：0
> 
> 时间：2012-12-19T11:09:13.100
> 
> 标签：xna, 2d, collision-detection, bounding-box

我正在使用 XNA 制作一个简单的基于 2d 瓷砖的 RPG 游戏。我制作了一个简单的平铺地图，其中包含一个平铺对象列表，每个平铺包含一个矩形。我对玩家的移动更新首先会在下一帧中创建一个代表玩家的矩形。然后它运行一个 foreach 循环来检查图块列表中的每个图块是否与玩家矩形相交。如果是这样，它会将 collided 布尔值设置为 true，并且还会记住玩家将与之碰撞的瓷砖。

如果玩家将发生碰撞，它会设置玩家位置，以便玩家触摸瓷砖而不是进入它。我遇到的问题是不可能靠着瓷砖墙“滑动”。例如，如果我同时向下和向左移动，一旦我击中瓷砖，如果继续向左移动，玩家就会被卡住。无论我如何移动，您有什么想法可以改进该方法以使其正确运行吗？

```
public void MovementUpdate(KeyboardState ks, GameTime time, List<Tile> tlist)
    {
        Direction = Vector2.Zero;
        Rectangle nextPosRec;

        if (ks.IsKeyDown(Keys.Right)){
            Direction.X = MOVE_RIGHT;
        }

        if (ks.IsKeyDown(Keys.Down))
        {
            Direction.Y = MOVE_DOWN;
        }

        if (ks.IsKeyDown(Keys.Up))
        {
            Direction.Y = MOVE_UP;
        }

        if (ks.IsKeyDown(Keys.Left)){
            Direction.X = MOVE_LEFT;
        }

        Vector2 nextPos = Position ;
        nextPos += Direction * Speed * (float)time.ElapsedGameTime.TotalSeconds;
        nextPosRec = new Rectangle((int)nextPos.X, (int)nextPos.Y, 32, 32);

        bool colide = false;
        Tile ctile = new Tile(playerTexture, Position, 0);

        foreach (Tile t in tlist)
        {
            if (t.tileRectangle.Intersects(nextPosRec))
            {
                colide = true;
                ctile = t;
            }
        }

        if (colide == false)
        {
            Position = nextPos;
        }
        else
        {
            if (Position.Y < ctile.tileRectangle.Top - 32)
            {
                //COLLIDE TOP
                Position.Y = ctile.tileRectangle.Top - 32;
            }

            if(Position.Y > ctile.tileRectangle.Bottom)
            {
                //COLLIDE BOTTOM
                Position.Y = ctile.tileRectangle.Bottom;
            }

            if (Position.X < ctile.tileRectangle.Left - 32)
            {
                //COLLIDE LEFT
                Position.X = ctile.tileRectangle.Left - 32;
            }

            if (Position.X > ctile.tileRectangle.Right)
            {
                //COLLIDE RIGHT
                Position.X = ctile.tileRectangle.Right;
            }

        }

    } 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:00:11.247

您的碰撞逻辑存在一些缺陷：

*   您忽略了多个碰撞并仅处理一个（与 碰撞`ctile`）
*   您的碰撞方向逻辑不正确，它检查是否存在交叉点但不检查瓷砖的哪个边界被越过，这就是粘连行为的来源

应该为每个相交的瓦片进行碰撞处理，而不仅仅是您现在正在做的最后一个。在您的碰撞处理中，您可以将对象移回它在 x 和 y 轴上与它碰撞的瓷砖中的穿透量。

如果你真的使用瓦片地图（瓦片网格），遍历所有瓦片是非常低效的。您可以只计算哪些图块与正在移动的对象相交。

# sharepoint-2010 - 如何按唯一 ID 获取 SharePoint 列表项

> ID：13951044
> 
> 赞同：5
> 
> 时间：2012-12-19T11:09:22.617
> 
> 标签：sharepoint-2010, get, uniqueidentifier, sharepoint-clientobject

如果我知道相关的列表 ID，是否可以通过唯一 ID 获取 SP 列表项（无需编写 Caml 请求）。

```
var item = list.GetItemById("CFA9E204-6509-424B-A246-0DE5295C42B2"); 
```

当我尝试使用此代码获取项目时，我收到一个错误：“输入字符串的格式不正确。”

GetItemById() 方法有什么问题？

如果它只理解整数 Id，为什么它有一个带有字符串参数的重载方法 GetItemById()？

**编辑**：

我使用 SharePoint 客户端对象模型，其中 List 实体没有 GetItemByUniqueId() 方法，但它具有 GetItemById() 方法，该方法接收字符串或整数 Id。

[MSDN 文档](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.client.list_members%28v=office.14%29.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:06:13.960

尝试这个：

`SPListItem item = list.GetItemByUniqueId(new Guid("CFA9E204-6509-424B-A246-0DE5295C42B2"));`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T12:00:49.657

是的，可以通过它的唯一标识符加载列表项。您可以使用 SPList.GetItemByUniqueId 方法

请参阅[GetItemByUniqueId 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.splist.getitembyuniqueid%28v=office.12%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-12T22:09:45.047

我可以用以下方法做到这一点，如果它看起来可行，需要你的建议

```
 CamlQuery cQuery = new CamlQuery();

            cQuery.ViewXml = string.Format(@"<View Scope='RecursiveAll'>
                                                      <Query>
                                                        <Where>
                                                          <Eq>
                                                            <FieldRef Name='UniqueId' />
                                                            <Value Type='Guid'>{0}</Value>
                                                          </Eq>
                                                        </Where>
                                                      </Query>
                                                    </View>", id);

            //ListItem item = listItem.GetItemById("293");

            ListItemCollection itemColl = listItem.GetItems(cQuery);

            sp.Context.Load(itemColl);

            sp.Context.ExecuteQuery();

            ListItem item = itemColl.FirstOrDefault(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-01T11:53:18.017

`spliste.Items[<uniqueId>]`应该管用。

例如：

```
Guid itemUniqueID = new Guid("bb49fd4e-c302-45ef-85dc-e12624423651");
SPListItem item = spliste.Items[itemUniqueID ]; 
```

如果要获取该项目的某个字段的内容：

```
string content = spliste.Items[<uniqeId>][<fieldGuidOrDisplayName>].ToString(); 
```

例如：

```
Guid itemUniqueID = new Guid("bb49fd4e-c302-45ef-85dc-e12624423651");
string content = spliste.Items[itemUniqueID ]["Title"].ToString(); 
```

# javascript - Rails 和 JavaScript 之间的数组

> ID：13951049
> 
> 赞同：2
> 
> 时间：2012-12-19T11:09:33.373
> 
> 标签：javascript, ruby-on-rails, ruby

我正在开发一个 ROR 应用程序，我需要从我的数据库中获取一个数组并在 JS 上使用它，所以我这样做了

```
var tab = <%= @users.collect{|item| item.names }%>; 
```

但是当我尝试使用 may Tab 我得到这个错误：

```
SyntaxError: syntax error   
var tab = [&quot;123456789&quot;, &quot;fDF125847&quot;, &quot;124578&q 
```

我认为我需要投射**& quot; 到“**但我不知道怎么做？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:35:45.463

代替

```
var tab = <%= @users.collect{|item| item.names }%>; 
```

你应该写

```
var tab = <%= @users.collect{|item| item.names }.to_json.html_safe %>; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:12:47.610

您应该为此使用 JSON。字里行间的东西

```
var tab = <%= @users.collect{|item| item.names }.to_json %>; 
```

或者，如果您的收藏没有`to_json`方法，您可以使用`ActiveSupport::JSON`及其`encode`方法。

**升级版**。另外我建议阅读[如何在 Rails 视图中安全地引导 JSON](http://jfire.io/blog/2012/04/30/how-to-securely-bootstrap-json-in-a-rails-view/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:37:05.123

```
var tab = <%= @users.collect{|item| item.names }.to_s.html_safe %>; 
```

# php - 从数据库中获取相似的经度和纬度

> ID：13951056
> 
> 赞同：7
> 
> 时间：2012-12-19T11:09:48.433
> 
> 标签：php, jquery, mysql, cordova, jquery-mobile

我正在使用 Phonegap 和 JQuery 创建一个移动应用程序。

该应用程序收集用户的经度和纬度并将它们存储在数据库中（使用 PHP 脚本 - Web 服务），并通过某种算法检测是否有流量。我需要的是从数据库中获取所有彼此靠近的经度和纬度值，例如在同一街道/200m 范围内。

假设您在数据库中有一个列表，其中 5 lon/lat 彼此靠近（在同一条街道 A 中），3 lon/lat 在某些街道 B 中彼此靠近，以及其他一些随机代表其他街道的用户. 谁能告诉我如何检测彼此接近的经度/纬度值？我将它们作为单独的值存储在 MySQL 数据库中的值，即一个字段用于经度，另一个用于纬度。

一旦我获得彼此靠近的经度/纬度，那么我需要找到街道 A 中的用户和街道 B 中的用户之间的中心点，以标记为交通拥堵（基于其他一些检测）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:12:26.107

您应该研究 Haversine 公式。请看下面：

```
SELECT id, (3959 * acos( cos( radians(37) ) * cos( radians( lat ) ) * cos( radians( lng ) - radians(-122) ) + sin( radians(37) ) * sin( radians( lat ) ) ) ) AS distance 
FROM markers 
HAVING distance < 25 
ORDER BY distance; 
```

这将返回输入长/纬度对 25 英里范围内的所有记录。

# c# - 如何使用 LINQ 从没有主键的表中插入/更新/删除记录

> ID：13951061
> 
> 赞同：3
> 
> 时间：2012-12-19T11:10:04.447
> 
> 标签：c#, .net, database, linq-to-sql

我正在使用 LINQ 连接到**第三方**数据库。

现在我必须在没有设置主键的表中插入一些记录，我得到了这个异常：

> *System.InvalidOperationException：无法对“表（the_table）”执行创建、更新或删除操作，因为它没有主键。*

我该如何解决这个问题？我应该用它`ExecuteCommand`来避免这个异常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:13:11.253

`ExecuteCommand`将为您提供更好的性能，因为您可以在一个查询中删除所有记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:01:58.977

在 EF 模型中使用唯一列作为 PK。

# c# - 将 (0/1) 字符串加载到位数组中

> ID：13951062
> 
> 赞同：8
> 
> 时间：2012-12-19T11:10:05.723
> 
> 标签：c#, string, bitarray

将像“10101011101010”这样的字符串直接加载到新的**位数组**中的最聪明的方法是什么？（**不是字节数组**）

（位应保持与列表中相同的顺序。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T11:12:34.123

你可以用 LINQ 做到这一点：

```
var res = new BitArray(str.Select(c => c == '1').ToArray()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T11:15:20.813

您可以`LINQ`在这种情况下使用，例如；

```
var yourbitarray = new BitArray(yourstring.Select(s => s == '1').ToArray()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:13:17.710

像这样的东西怎么样：

```
string bits = "101010101010";
byte[] bytes = bits.ToCharArray().Select(c => (byte)c == '0' ? 0 : 1).ToArray(); 
```

可能工作...

或者

```
byte[] bytes = bits.Select(c => (byte)c == '0' ? 0 : 1).ToArray(); 
```

# php - 在 php 中使用 xpath 和 dom 获取价值

> ID：13951065
> 
> 赞同：3
> 
> 时间：2012-12-19T11:10:18.740
> 
> 标签：php, html, dom, xpath

这是我要解析的html部分：

```
<center>
<table border="0" cellpadding="0" cellspacing="0"  >
<td>
Some text
<br>
<font color=brown>label0</font>Value0
<br>
<font color=brown>Label1</font>Value1.<br>
Some text
<br>

<font color=brown>Label2</font>Value2<br>
</td>
</table>

</center> 
```

我想得到 Value0 和 Value1。

如果我使用这个：

```
$index=$element->nodeValue; 
```

其中元素是对`.../font`我得到Label0,1,2的查询。但我想要价值。怎么做？如有必要，我还可以提供更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:14:53.903

尝试一下：

```
$index=$element->nextSibling->nodeValue; 
```

获取字体节点之后的节点的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:18:14.730

```
<center>
<table border="0" cellpadding="0" cellspacing="0"  >
<td>
Some text
<br>
<font color=brown>label0</font><span>Value0</span>
<br>
<font color=brown>Label1</font><span>Value1.</span><br>
Some text
<br>

<font color=brown>Label2</font>Value2<br>
</td>
</table>
</center> 
```

尝试像上面一样放置跨度，而不是查询跨度的字体查询...希望它会有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:16:33.060

试试这个：

```
$str = '<center>
<table border="0" cellpadding="0" cellspacing="0"  >
<td>
Some text
<br>
<font color=brown>label0</font>Value0
<br>
<font color=brown>Label1</font>Value1.<br>
Some text
<br>

<font color=brown>Label2</font>Value2<br>
</td>
</table>
</center>';

$dom = new DOMDocument();
$dom->loadHTML($str);
$dom->preserveWhiteSpace = false;
$dom->validateOnParse = true;

$xpath = new DOMXPath($dom);
$nodes = $xpath->query("//font");
foreach ($nodes as $node) {
    echo trim( $node->nextSibling->nodeValue ) . "\n";
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T11:14:27.350

```
$dom = new DOMDocument();
$xpath = new DOMXPath($dom);    
$xpath->loadHTML('link/to/html');
$fonts = $xpath->query('font');
foreach ($fonts as $font){
    echo $font->nextSibling->nodeValue;
} 
```

上面的脚本将回显`<font>`.

但是拜托，你为什么不使用`CSS`？

*   [http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)
*   [http://php.net/manual/en/simplexmlelement.xpath.php](http://php.net/manual/en/simplexmlelement.xpath.php)
*   [http://php.net/manual/en/class.domxpath.php](http://php.net/manual/en/class.domxpath.php)
*   [用于选择下一个兄弟的 Xpath](https://stackoverflow.com/questions/2092303/xpath-for-choosing-next-sibling)

# meteor - 在查询中使用数组时，Meteor.publish 不会更新客户端

> ID：13951068
> 
> 赞同：3
> 
> 时间：2012-12-19T11:10:33.003
> 
> 标签：meteor

考虑这段代码：

```
Meteor.publish("Children", function (id) {
  // Find all the items that are children of an item that I am sharing
  //
  var sharing = Items.find({$and : [{_id:id},{sharing:{$elemMatch: {user_id:this.userId}}}]}).fetch();
  var shared_children = [];
  sharing.forEach(function(share){
    share.children.forEach(function(child){
      shared_children.push(child.id);
    });
  });
  return Items.find({_id:{$in : shared_children}});
}); 
```

在我的 Meteor.publish 中，我动态生成一个 id 数组以在我的`.find`. 它适用于手动查询数据，但是当我向“共享”字段添加新元素时，只有我添加该字段的客户端显示更新。查看相同元素的其他客户端不会获得从服务器发送的更新值。他们只是用他们的 minimongo 数据库中已有的内容进行更新。服务器端[MongoDB](http://en.wikipedia.org/wiki/MongoDB)确实显示了新条目，但除了创建它的客户端之外，我无法在任何客户端上查询它。

问题是我`.find`使用了一个计算值数组，因此依赖系统没有再次调用我的发布事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T05:16:18.457

Meteor 的反应性运行在服务器端是一个常见的误解。相反，典型的模式是客户端发生变化，它有一个反应变量（例如 Session 对象）作为订阅的参数。订阅值的更改将导致使用新参数重新调用发布。

相反，如果您想在服务器端执行此操作，则需要设置一个观察者，如[按房间计数示例中所示](http://docs.meteor.com/#meteor_publish)

# java - FileOutputStream 无法写入文件或生成文件

> ID：13951071
> 
> 赞同：0
> 
> 时间：2012-12-19T11:10:37.407
> 
> 标签：java, byte, output, fileoutputstream

我需要一些帮助。
我正在尝试使用 FileOutputStream 将字节写入文件...
但是该文件没有作为我构建的 jar 文件出现在目录中。
或者，如果我以其他方式尝试，即使刷新文件，它也不会向文件中写入任何内容。

这是我当前的代码：

```
 File ModFile =new File(NameText.getText() + ".mod");
FileOutputStream writer = null;

String toProcess = CodesBox.getText();
int i = Integer.parseInt(CodesBox.getText());
byte codes = (byte) i;  

try {
    writer = new FileOutputStream(ModFile);
    writer.write(codes);

} catch (IOException ex) {
    Logger.getLogger(ModMakerGui.class.getName()).log(Level.SEVERE, null, ex);
}finally{
    try {
        writer.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:33:07.137

@junyi00 For me the file is created. And it shows as movie clip. I think the file should have been created for you too. Just try to see where it is created. Or check your classes `NameText` and `CodesBox` whether they are having any error somewhere. Check what is the file name generated.

# blackberry - BlackBerry RichTextField 单行

> ID：13951072
> 
> 赞同：0
> 
> 时间：2012-12-19T11:10:40.183
> 
> 标签：blackberry, textfield, blackberry-simulator

我想为我的 BB 应用程序制作一个自定义 ListField。我在其中取得了成功。我将在 listField 中绘制两个 RichTextField、一个 Image 和一个 RatingField。

现在的问题是我只想在 LIstField 中显示 RichTextField 的单行。因此，如果有超过一行，那么它应该只显示一个。

我想要它只是因为如果有超过一条线，我的 rattingField 就会重叠。

见下图：

![在此处输入图像描述](../Images/a03cde3a54b671de2a97ec3305f23864.png)

我正在使用下面的代码来创建它并设置值：

```
rows = new TableRowManager[dealArray.length()];

        rating2 = new RatingField( Bitmap.getBitmapResource( "yellow_star.png" )
                , Bitmap.getBitmapResource( "white_star.png" )
                , Bitmap.getBitmapResource( "yellow_star.png" )
                , Bitmap.getBitmapResource( "white_star.png" )
                , 8, 5, Field.FIELD_HCENTER );
        try{
            System.out.println("================== = = ==HERE IT IS COMES");

        for(int i=0;i<dealArray.length();i++){
            // create a table row manager
            rows[i] = new TableRowManager();
            // set the menu item name
            EncodedImage encoded_img=EncodedImage.getEncodedImageResource("no_photo.png");
            byte[] data=encoded_img.getData();
            Bitmap bitmap=Bitmap.createBitmapFromBytes(data, 0, data.length,1);//Here we get the Image;
            Bitmap scaleBitmap=new Bitmap(100,100);//Now we are scaling that image;
            bitmap.scaleInto(scaleBitmap, Bitmap.FILTER_LANCZOS);

            rows[i].add(new BitmapField(scaleBitmap));

            rows[i].add(new RichTextField(dealArray.getJSONObject(i).getString("DealName"), DrawStyle.ELLIPSIS));

            rows[i].add(new RichTextField(dealArray.getJSONObject(i).getString("DealDescription"), TextField.NO_NEWLINE));

            rows[i].add(new RatingField( Bitmap.getBitmapResource( "yellow_star.png" )
                    , Bitmap.getBitmapResource( "white_star.png" )
                    , Bitmap.getBitmapResource( "yellow_star.png" )
                    , Bitmap.getBitmapResource( "white_star.png" )
                    , Integer.parseInt(dealArray.getJSONObject(i).getString("DealTotalStamp"))
                    , Integer.parseInt(dealArray.getJSONObject(i).getString("StampCompletionOnDeal"))
                    , Field.FIELD_HCENTER ));
            // create a table row manager

        }
        }catch(Exception e){
            e.printStackTrace();
        }

       System.out.println("HELLOOOOoo oo ooo");

        vfm.addAll(rows); 
```

并在 drawListRow 中绘制它，我使用以下代码：

```
private class TableRowManager extends Manager{
            public TableRowManager(){
                super(0);
            }
            public void drawRow(Graphics g, int x, int y, int width, int height){
                // Arrange the cell fields within this row manager.
                layout(width, height);

                // Place this row manager within its enclosing list.
                setPosition(x, y);

                // Apply a translating/clipping transformation to the graphics
                // context so that this row paints in the right area.
               //g.pushRegion(getExtent());

                // Paint this manager's controlled fields.
                subpaint(g);

                g.setColor(0x00000000);
               // g.drawLine(0, 0, getPreferredWidth(), 0);

                // Restore the graphics context.
                g.popContext();
            }

            protected void sublayout(int width, int height) {
                // TODO Auto-generated method stub
                 int preferredWidth = getPreferredWidth();
                 int preferredHeight = getPreferredHeight();
                 // for deal image

                 //SBitmapField bmp = new BitmapField(Bitmap.getBitmapResource(""));
                 Field field = getField(0);
                 layoutChild(field, 100, 100);
                 setPositionChild(field, 5, 5);

                 // for deal name
                 field = getField(1);
                 layoutChild(field, preferredWidth - 100, 0);
                 setPositionChild(field, 110, 0);

                 // for deal Description
                 field = getField(2);
                 layoutChild(field, preferredWidth, 5);
                 setPositionChild(field,110 , 35);

                 // for Deal stamp
                 field = getField(3);
                 layoutChild(field, preferredWidth, 50);
                 setPositionChild(field, 110, 65);

                 setExtent(preferredWidth, 110);
            }
            public int getPreferredWidth()
            {
                return Graphics.getScreenWidth();
            }

            // The preferred height of a row is the "row height" as defined in the
            // enclosing list.
            public int getPreferredHeight()
            {
                return 30;
            }
        } 
```

现在，如果我想在单行中描述 RichTextField 怎么办？？

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:16:43.300

您需要使用RichTextField 的[**布局**](http://www.blackberry.com/developers/docs/4.2api/net/rim/device/api/ui/component/RichTextField.html#layout%28int,%20int%29)方法来设置**RichTextField**可用的空间量。

# single-sign-on - 网站上的 Disqus SSO 集成

> ID：13951076
> 
> 赞同：5
> 
> 时间：2012-12-19T11:10:50.280
> 
> 标签：single-sign-on, disqus

我们将在我们的网站中包含 Disqus 上的 SSO 功能。按照此处的 Disqus 文档[http://help.disqus.com/customer/portal/articles/526768](http://help.disqus.com/customer/portal/articles/526768)和此处的[http://help.disqus.com/customer/portal/articles/236206](http://help.disqus.com/customer/portal/articles/236206)

我们放置了登录按钮，一旦用户已经登录我们的网站，他就可以用他的个人昵称发表评论。

正如上面已经提到的，文章[http://content.disqus.com/docs/sso-button.png中的这张图片](http://content.disqus.com/docs/sso-button.png)

我们正确地看到了我们的按钮（作为 IGN 按钮），但我们想做的是删除下面的其他 4 个按钮（Facebook、Twitter、Google 和 Disqus），以允许我们的用户仅使用我们的系统登录。你认为有可能吗？[我在http://www.npr.com](http://www.npr.com)网站上看到了 Disqus 2012 小部件集成，他们对 SSO 的实现看起来就像我们想要的那样。

非常感谢您提前支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T01:57:26.900

要直接回答您的问题，无法删除其他登录选项。NPR 和 IGN 有一个其他站点无法使用的实现。也就是说，我们正在开发一项功能，以解决“仅限 SSO”的问题，以便我们甚至可以逐步停止使用此障碍。

# java - vaadin 生成的页面不显示任何组件

> ID：13951077
> 
> 赞同：0
> 
> 时间：2012-12-19T11:10:50.273
> 
> 标签：java, tomcat, servlets, vaadin

一般来说，我在 vaadin 框架上有一个问题。

我创建了一个类扩展 vaadin 应用程序（MyFirst），之后我使用 vaadin 可视化设计器（MyFormApp）创建了一个自定义组件。

我确实实例化了自定义组件 MyFormApp，并将其添加到 MyFirst 的主窗口中。

部署应用后，vaadin 生成的页面没有显示任何组件。

我的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.example.vaadin;

import com.vaadin.Application;
import com.vaadin.ui.*;

/**
*
* @author anis.bouchenafa
*/
public class MyFirst extends Application{

private Button newContact = new Button("Add contact");
private Button search = new Button("Search");
private Button share = new Button("Share");
private Button help = new Button("Help");
private HorizontalSplitPanel horizontalSplit = new HorizontalSplitPanel();
private TextField tf = new TextField();

@Override
public void init() {
    //buildMainLayout();

    MyFirstApp a = new MyFirstApp();
   Window w = new Window("aness conf");
   w.addComponent(a);
   setMainWindow(w);

}

} 
```

我的第二堂课是 MyFirstApp（自定义组件）：

```
package com.example.vaadin;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.ui.AbsoluteLayout;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.LoginForm;

public class MyFirstApp extends CustomComponent {

@AutoGenerated
private AbsoluteLayout mainLayout;
@AutoGenerated
private LoginForm loginForm_2;

/*- VaadinEditorProperties=        {"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

/**
 * The constructor should first build the main layout, set the
 * composition root and then do any custom initialization.
 *
 * The constructor will not be automatically regenerated by the
 * visual editor.
 */
public MyFirstApp() {
    buildMainLayout();
    setCompositionRoot(mainLayout);

    // TODO add user code here
}

@AutoGenerated
private AbsoluteLayout buildMainLayout() {
    // common part: create layout
    mainLayout = new AbsoluteLayout();
    mainLayout.setImmediate(false);
    mainLayout.setWidth("100%");
    mainLayout.setHeight("100%");

    // top-level component properties
    setWidth("100.0%");
    setHeight("100.0%");

    // loginForm_2
    loginForm_2 = new LoginForm();
    loginForm_2.setStyleName("v-loginform");
    loginForm_2.setImmediate(false);
    loginForm_2.setWidth("340px");
    loginForm_2.setHeight("-1px");
    mainLayout.addComponent(loginForm_2, "top:160.0px;left:200.0px;");

    return mainLayout;
}

} 
```

servlet 执行后，浏览器上没有任何显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-07T14:36:05.517

使用 AbsoluteLayout，您需要定义组件的显示位置，例如：

```
mainLayout = new AbsoluteLayout();
mainLayout.setWidth("400px");
mainLayout.setHeight("350px"); 
```

更多信息，请参考： [https ://vaadin.com/book/-/page/layout.absolutelayout.html](https://vaadin.com/book/-/page/layout.absolutelayout.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T14:22:51.787

好吧，您调用 buildMainLayout() 视觉上是空的。它只包含一个 AbsoluteLayout 和一个 LoginForm()，其中没有任何组件。这就像生成一个无边框的 HTML 表格而不添加任何文本。

你的组件我想你想添加

```
private Button newContact = new Button("Add contact");
private Button search = new Button("Search");
private Button share = new Button("Share");
private Button help = new Button("Help");
private HorizontalSplitPanel horizontalSplit = new HorizontalSplitPanel();
private TextField tf = new TextField(); 
```

应该

1.  在您的“MyFirstApp 类”中声明和初始化，并且
2.  通过 addComponent() 添加到您的布局中

详细的布局（和其他基础知识）也在《Vaadin 之书》中进行了解释：

**Vaadin 之书：** [https ://vaadin.com/book/-/page/intro.html](https://vaadin.com/book/-/page/intro.html)

**Vaadin 之书 - 布局：**布局：https://vaadin.com/book/-/page/layout.html

**Vaadin 布局示例：** [http ://demo.vaadin.com/sampler#Layouts](http://demo.vaadin.com/sampler#Layouts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T10:52:57.963

我在 Vaadin 7 中使用可视化编辑器时遇到了同样的问题。但是，如果将***Layout***属性从***AbsoluteLayout***更改为任何其他 Layout（即 GridLayout、Horizo​​ntalLayout 或 VerticalLayout）。组件显示。希望有帮助。

# .net - 应用程序在运行时复制日志文件时崩溃

> ID：13951087
> 
> 赞同：0
> 
> 时间：2012-12-19T11:11:12.753
> 
> 标签：.net, logging

我在 Visual Basic 中编写了一个小型应用程序（但我所描述的问题可能会出现在任何语言中）并且我的日志文件有问题。

如果我在应用程序运行时尝试复制我的应用程序日志文件（它一直在写入日志文件），应用程序就会崩溃。

看起来系统正在尝试访问应用程序正在使用的文件。

目前，当我想记录一条消息时，我正在打开文件（首先检查它是否存在，如果不存在则创建它），然后写入，最后关闭文件。

这实际上是代码：

```
Public Shared Sub WriteToLog(ByVal msg As String)
        Dim logID As Integer = 0
        Dim fileName As String = Application.StartupPath & "/log.log"
        'Check the file
        If My.Computer.FileSystem.FileExists(fileName) Then
            'Get ID of log entry
            Dim str As String = My.Computer.FileSystem.ReadAllText(fileName)
            Dim array() As String = Split(str, vbCrLf)
            logID = array.Length - 1
        Else
            'Create if it does not exist
            Dim fs As FileStream = New FileStream(fileName, FileMode.OpenOrCreate, FileAccess.ReadWrite)
            Dim s As StreamWriter = New StreamWriter(fs)
            'Write header:
            s.Write("LOGID;TIME;CLASSIFICATION;INFO" & vbCrLf)
            s.Close()
            fs.Close()
            logID = 1
        End If

        'Log it
        Dim fs1 As FileStream = New FileStream(fileName, FileMode.Append, FileAccess.Write)
        Dim s1 As StreamWriter = New StreamWriter(fs1)
        s1.Write(logID & ";" & DateTime.Now.ToString() & ";" & msg & vbCrLf)
        s1.Close()
        fs1.Close()

    End Sub 
```

我的疑问是：最好在应用程序运行时一直打开 lof 文件，否则会导致应用程序崩溃吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:17:52.183

相反，应用程序正在尝试访问该文件，而另一个程序正在使用它。

您需要在代码中进行错误处理，以便在无法打开文件时不会崩溃。在方法中的代码周围放置 a `Try...Catch`，并处理您捕获的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:20:38.017

我不认为保持日志打开应该是一个问题。有很多工具，比如 Textpad，它会在窗口出现时检查文件的状态，并给你一条消息，说文件被改变了，你想重新加载。

此问题可能特定于您用来打开日志文件的编辑器。

# objective-c - CCLabelTTF 没有出现

> ID：13951088
> 
> 赞同：1
> 
> 时间：2012-12-19T11:11:13.913
> 
> 标签：objective-c, ios, cocos2d-iphone

我正在使用`CCUIViewWrapper`Class 来添加`UIControl`Cocos2d。

这是我的代码，

```
UIView  *view=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];

view.backgroundColor=[UIColor greenColor];

 CCUIViewWrapper *Wrapper = [CCUIViewWrapper wrapperForUIView:view];

 [self addchild:Wrapper]; 
```

在我添加之后`CCLabelTTF`

```
CCLabelTTF * label=[CCLabelTTF labelWithString:@"Hi" fontName:@"Marker Felt" fontSize:32];
        label.position=ccp(160,280);
        [self addChild:label]; 
```

所以，我的问题是标签没有出现。我也在尝试更改 zOrder 并尝试更改`insertSubviewatIndex`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:37:00.553

如果你制作一个全屏 UIKit 视图，它将被绘制在 cocos2d 视图上。如果该视图不透明，您将看不到任何 cocos2d 视图。

通过使 cocos2d 视图透明（不透明 = NO），将 OpenGL 清除颜色设置为 alpha = 0 并将帧缓冲区更改为 32-Bit with alpha，您还可以添加绘制在 cocos2d 视图及其节点后面的 UIKit 视图。

**你不能同时在一些 cocos2d 节点前面和其他 cocos2d 节点后面有相同的 UIKit 视图。这根本不可能。例如，这个绘制顺序不能做：**

1.  cocos2d 节点（精灵、标签等）
2.  UIKit 视图（按钮、文本字段、表格视图等）
3.  cocos2d 节点（精灵、标签等）

您必须将 cocos2d 视图及其中的所有节点视为一个整体（z 顺序仅影响 cocos2d 节点相对于彼此的绘制方式）。cocos2d 视图可以完全位于 UIkit 视图的前面或后面。

# .net - ClickOnce 应用程序设置与管理员权限（Visual Studio、VB.NET）

> ID：13951089
> 
> 赞同：1
> 
> 时间：2012-12-19T11:11:14.190
> 
> 标签：.net, vb.net, clickonce, uac, administrator

在 Visual Studio (VB.NET) 中，启用应用程序 ClickOnce 设置和向我的应用程序添加管理员权限（使用应用程序 UAC 设置）有什么区别？

我知道我不能同时添加管理员权限并启用 clickonce 设置...当我启用 ClickOnce 时，UAC 权限必须是 As Invoker ... 那么，ClickOnce 安全设置是应用程序管理员权限的替代品吗？

不是一样的东西吗？

请给我详细解释。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:28:57.550

UAC 设置（`requestedExecutionLevel`app.manifest 中的设置）和 ClickOnce 是两种完全独立的技术。

[requestedExecutionLevel](http://www.codeproject.com/Articles/17968/Making-Your-Application-UAC-Aware)提供了一种机制来设置您的应用程序需要哪些权限才能使其按设计运行

[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx)允许您使用“一键式”发布您的应用程序以供最终用户安装。用户不一定需要管理员权限来安装您的应用程序 - *“ClickOnce 部署使非管理员用户能够安装并仅授予应用程序所需的代码访问安全权限”*

请注意，非管理员的最终用户可以安装您使用 clickOnce 部署的应用程序，但如果您将其设置为`requestedExecutionLevel`，`requireAdministrator`他们将无法运行它。

# magento - 如何更改列数 Magento

> ID：13951090
> 
> 赞同：5
> 
> 时间：2012-12-19T11:11:16.177
> 
> 标签：magento, magento-1.7

好的，这是一个似乎很容易解决的问题，但它让我望而却步......

我的 Magento Web 上有一些类别，每个类别都有一些产品。我希望它们显示为 4 列数，但它始终显示为 3 列数，如下所示：

![在此处输入图像描述](../Images/048c82b1bee35717a4bba6ff09df796b.png)

我试过这个：在**app/desing/frontend/default/mytheme/layout/catalog.xml**上，我修改了这段代码：

```
<!--
Category default layout
-->

<catalog_category_default translate="label">
    <label>Catalog Category (Non-Anchor)</label>
    <reference name="left">
        <block type="catalog/navigation" name="catalog.leftnav" after="currency" template="catalog/navigation/left.phtml"/>
    </reference>
    <reference name="content">
        <block type="catalog/category_view" name="category.products" template="catalog/category/view.phtml">
            <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
                    <block type="page/html_pager" name="product_list_toolbar_pager"/>
                    <!-- The following code shows how to set your own pager increments -->
                    <!--
                        <action method="setDefaultListPerPage"><limit>4</limit></action>
                        <action method="setDefaultGridPerPage"><limit>9</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>2</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>4</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>6</limit></action>
                        <action method="addPagerLimit"><mode>list</mode><limit>8</limit></action>
                        <action method="addPagerLimit" translate="label"><mode>list</mode><limit>all</limit><label>All</label></action>
                    -->
                </block>
                <action method="setColumnCount"><columns>4</columns></action>
                <action method="addColumnCountLayoutDepend"><layout>empty</layout><count>6</count></action>
                <action method="addColumnCountLayoutDepend"><layout>one_column</layout><count>5</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_left</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action>
                <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
                <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
            </block>
        </block>
    </reference>
</catalog_category_default> 
```

所以我应该将列数设置为 4，但它仍然显示 3 个产品......知道吗？

PS：使用 Magento 1.7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-17T06:56:24.057

在 list.phtml 文件下添加以下代码

```
$this->setData('column_count',4); 
```

以下

```
$_helper = $this->helper('catalog/output'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T13:22:28.450

尝试使用更新句柄操作来定义您当前的布局（有时主题使用默认列数而不是 layoutdepend）：只需在节点的开头添加行

```
<catalog_category_default translate="label">
    <update handle="page_two_columns_left" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T11:20:30.037

您还必须编辑 css 样式。例如：

```
.products-grid li.item {
   float: left;
   margin: 0 22px 0 0;
   padding: 0 0 29px;
   width: 200px;
} 
```

您必须尝试样式属性才能获得所需的结果。

并且不要忘记更改您的锚类别设置：

```
<catalog_category_layered translate="label">
       <label>Catalog Category (Anchor)</label>
       ...
                   <action method="setColumnCount"><count>4</count></action> 
```

最后删除你的magento缓存。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T11:31:15.640

我认为 List.php 中没有定义“setColumnCount”或者它的父类。所以你的方法行不通。如果您根据类别页面的特定布局调用“addColumnCountLayoutDepend”来设置列数会更好。

因此，如果您在类别页面上使用 2ColumnRight 布局，只需尝试下面的代码。

```
<action method="addColumnCountLayoutDepend"><layout>two_columns_right</layout><count>4</count></action> 
```

这将设置您的列表页面在 4 列中列出产品。您还需要进行一些 CSS 更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-16T22:34:49.660

尝试像这样更新catalog.xml：

```
 <block type="catalog/product_list" name="product_list" template="catalog/product/list.phtml">

 <action method="setData"><name>column_count</name><value>4</value></action>
... 
```

# .net - 检测 .NET 中的 Form.Icon 更改

> ID：13951091
> 
> 赞同：2
> 
> 时间：2012-12-19T11:11:20.667
> 
> 标签：.net, winforms, forms, icons

我试图检测窗体的图标属性何时被修改。目前我覆盖 WndProc 并处理 WM_SETICON 消息来执行此操作。

这是侵入性的，我更喜欢非侵入性的方法。我想我可以做一些好的旧 Win32 SetWindowLong 来指定一个新的 WndProc，但我听说 Forms 可以在更改属性时在幕后重新创建 Win32 窗口，如果这是真的，这可能很难处理。

我的第二个更重要的问题是在不可见窗口上设置 Icon 属性不会发送 WM_SETICON 消息（直到 Form 变得可见）。

对于如何实现这一点，我将不胜感激。遗憾的是 Form 类没有实现 INotifyPropertyChanged 接口......

/多什

# jquery - 如何在文本上使用 TinyMCE 函数而不实际选择该文本？

> ID：13951093
> 
> 赞同：5
> 
> 时间：2012-12-19T11:11:23.753
> 
> 标签：jquery, tinymce, caret

我的页面上有各种`<div>`s，单击时会转换为 TinyMCE 编辑器部分。因此，用户只需双击 div，然后使用 TinyMCE 编辑其中的文本。

我的问题是 - 是否可以在`<div>`没有实际选择文本的情况下在 a 上运行 TinyMCE 函数？我的意思是，我想实现以下用例：

1.  用户单击`<div>`.
2.  `<div>`在自身上激活 TinyMCE 会话。
3.  用户现在可以使用 TinyMCE 工具栏上的按钮来编辑 div 中的所有文本，而无需使用光标手动选择文本。否则，通常情况是用户必须选择一些文本，TinyMCE 工具只会编辑这些选定的文本。

这如何实现，它有多容易？

## 编辑

澄清：我的意思不仅仅是所有文本都应该由 TinyMCE 编辑器自动选择进行更改，而是我的意思是根本不选择，可以格式化吗？我的目标是让用户只能编辑使用 TinyMCE 的*格式*，`<div>`但不能更改文本本身。我实际上不希望用户能够选择任何文本，只需单击`<div>`，它应该会自动允许对包含的文本进行*格式化*由 TinyMCE 提供，但实际上并未更改其文本。但是如果你明白我的意思的话，文本区域不应该是用户“可选择的”。如果需要，它可以自行选择（根据下面@Thariama 的解决方案），但不能由用户选择。这可能吗？有点像只启用 TinyMCE 工具栏按钮但禁用文本编辑功能。据我了解，我不能使用`readonly`TinyMCE 的配置，它还会禁用带有所有格式选项（如文本突出显示、粗体、斜体等）的工具栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:45:26.750

在tinymce初始化后选择所有编辑器内容不是什么大问题。这可以使用setup配置参数轻松完成

```
tinyMCE.init({
   ...
   setup : function(ed) {
        ed.onInit.add(function(ed, evt) {

            ed.getBody().setAttribute('contenteditable', false);

            var range = ed.selection.dom.createRng();

            range.setStartBefore(ed.getBody().firstChild);
            range.setEndAfter(ed.getBody().lastChild);
            ed.selection.setRng(range);
        });
   }
}); 
```

[这](http://fiddle.tinymce.com/I3caab/1)是一个tinymce小提琴。

更新：

您正在寻找类似`$(ed.getBody()).attr('contenteditable','false');` 这样的东西，用户将无法选择甚至编辑编辑器内容，但 tinymce 按钮仍然可用（有所有后果）。您可以创建具有所需功能的自己的工具栏元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T14:23:13.537

我的答案是结合使用@Thariama 的设置代码：

```
tinyMCE.init({ ....
    setup : function(ed) {  
    ed.onInit.add(function(ed, evt) {

        ed.getBody().setAttribute('contenteditable', false);

        var range = ed.selection.dom.createRng();

        range.setStartBefore(ed.getBody().firstChild);
        range.setEndAfter(ed.getBody().lastChild);
        ed.selection.setRng(range);
    });
}
}); 
```

有一种方法可以禁用 textarea 中的按键，即如果我的 textarea 的 ID 为`TAID`，那么我添加了以下代码：

`$('#TAID_ifr').contents().find('html').bind('keypress', function(e){return false;});`

# php - 如何使用 PHP 对 AS400 进行屏幕抓取？

> ID：13951097
> 
> 赞同：3
> 
> 时间：2012-12-19T11:11:39.447
> 
> 标签：php, screen-scraping, ibm-midrange

有没有一种免费的方法可以使用 PHP 将屏幕抓取到 AS400？

我知道 Zend 解决方案，但它不是免费的。

**编辑**
好，我会详细说明。

我们有许多由一些程序员多年来编写的 AS400 应用程序。
现在我的老板希望能够在 AS400 之外使用他们的屏幕。
所以他告诉我用 c# 和 ehllapi 来做。
问题是我不是很丰富的编程经验大部分是使用 PHP 和 JS 而不是 c#。
我发现了一个关于使用 c# 进行屏幕抓取的单一指南，但没有详细说明，这对我来说似乎是一项几乎如果不是完全不可能的工作，除非我用我知道的语言来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:04:18.217

您真的需要屏幕抓取，还是可以只使用 PHP (PDO) 来使用 SQL 语句查看保存在 AS/400 上的数据？

我早期的一位 AS/400 客户认为他们想使用屏幕抓取来启用他们的一些应用程序的 Web。当我向他们展示他们的界面可以使用网络浏览器而不是绿屏时，他们很快改变了主意。他们最终放弃了屏幕抓取的想法，并聘请了一些创建 PHP 页面的 Web 开发人员来操作 AS/400 上的数据。

显然，有时简单（甚至复杂）的 SQL 语句不能满足您的需要——您仍然可以从 PHP 调用 AS/400 上的程序。查看Zend 免费提供的[PHP Toolkit for i5/OS 。](http://files.zend.com/help/Zend-Core-i5/zend-core-i5.htm#i5_php_api_toolkit.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T16:06:52.023

编写一个代理服务器，它位于您的中端机器和 TN5250 客户端之间。它是常规的 TCP/IP 套接字。您需要了解[TN5250](http://www.faqs.org/rfcs/rfc1205.html)的工作原理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T01:51:56.010

考虑将您的 RPG 应用程序调整为 RPG/OA 应用程序，而不是屏幕抓取本身。这比用 PHP 替换所有内容要简单得多*。*大多数 RPG/OA 解决方案都带有价格标签，而且您确实要求提供免费的解决方案。因此，请查看[OpenRPGUI](http://OpenRPGUI.com)，一个开源解决方案。[在这里](http://www.iprodeveloper.com/article/application-modernization/you-can-handle-rpg-oa-65986)阅读。

# wordpress - Joomla 到 Wordpress 迁移问题

> ID：13951101
> 
> 赞同：1
> 
> 时间：2012-12-19T11:12:02.680
> 
> 标签：wordpress, joomla, content-management-system, migrate

我已经有了模板，还没有完全迁移到 WordPress，我所有的文章都还在 Joomla 中。

我想完全从 WordPress 迁移过来，但目前在 WordPress 模板中设置菜单和子菜单时遇到问题。

也许重新迁移我所有的东西会更好。是否有任何免费的简单使用插件，或者您能建议我如何以编程方式执行它？

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:14:06.037

试试下面这些。如果您有任何问题，请告诉我。

[http://wordpress.org/extend/plugins/fg-joomla-to-wordpress/](http://wordpress.org/extend/plugins/fg-joomla-to-wordpress/)

[http://wordpress.org/extend/plugins/joomla-to-wordpress-migrator/](http://wordpress.org/extend/plugins/joomla-to-wordpress-migrator/)

# vim - 映射 在 Windows 上的 Vim 中

> ID：13951109
> 
> 赞同：3
> 
> 时间：2012-12-19T11:12:20.027
> 
> 标签：vim

我发现我无法将键盘输入键与标准 Enter 键不同地映射。我只在 Windows（XP 和 7）中观察到这一点，包括 Vim 7.3.540 的控制台和 GUI 版本，没有插件。

为了证明这一点，我尝试了以下地图：

*   `nnoremap <kEnter> :echo "kEnter"<CR>`-- 这不是由 Enter 或 keypad-Enter 触发的
*   `nnoremap <Enter> :echo "Enter"<CR>`-- 这由 Enter 和 keypad-Enter 触发

那么，是否可以在 Windows 中映射`<Enter>`和`<kEnter>`做不同的事情，或者我的尝试是徒劳的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:40:25.937

对我来说似乎是一个错误。似乎在 Linux 上运行良好。在 Windows 上，键盘回车键没有单独的虚拟键码 ( [MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx) )，但可以使用扫描码区分这两个键。Vim 可能不会这样做。

我正在查看我制作的这个 Autohotkey 脚本 ( [screenkey.ahk](https://github.com/mihaifm/screenkey.ahk) )，我可以看到它可以区分 Enter 和 NumpadEnter。

所以我只能推测这是 Vim 的 bug。

# php - 用于在 magento 中发送电子邮件的 SMTP pro

> ID：13951122
> 
> 赞同：-5
> 
> 时间：2012-12-19T11:12:47.483
> 
> 标签：php, magento, smtp, magento-1.7

我已经下载了 magento 的 SMTP pro 扩展，但不明白在我的 magento 根目录下放置这个文件夹的位置。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:34:56.553

您可以在管理面板中使用 Magento Connect 直接安装......在这里问一些问题之前先做一些谷歌。

# php - 在上传期间检测客户端超时（服务器端）

> ID：13951126
> 
> 赞同：1
> 
> 时间：2012-12-19T11:13:01.207
> 
> 标签：php, jquery, upload, timeout

在上传大文件的第一块时，我们将文件详细信息输入数据库。如果用户离开页面。发送 ajax 请求并删除该行。但是，如果他们的连接/电源中断，则无法发送任何请求，最终我们的数据库中会出现一个孤立条目。

现在我们检查最后一个文件部分的时间戳，任何在 10 分钟内没有上传块 (1MB) 的东西都会被删除。我们希望能够加快此过程，但如果我们缩短该时间，互联网连接速度较慢的用户可能会在等待上传时遇到文件/记录被删除的情况。

到目前为止，我们已经想到了 2 个解决方案，第一个是我们现在使用的，如上所述。第二种方法是每 X 秒向用户发送一个“保持活动状态”请求，如果服务器在 Y 秒内没有收到更新，则记录将被丢弃。

后者似乎工作得更快，但似乎效率很低。有没有人做过这样的事情？最好的方法是什么？

在 Ubuntu 上运行 Apache，我也在使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:23:11.397

当用户终止连接时（无论是通过导航离开还是关闭浏览器），apache 服务器将终止 PHP 进程（如果您的 PHP 中没有 ignore_user_abort()）。在[关闭功能](http://php.net/register_shutdown_function)中，您可以检查[连接状态](http://php.net/manual/bg/features.connection-handling.php)，如果是`aborted`或`timeout`，则删除文件。

# eclipse - ServletException、HttpServletResponse 和 HttpServletRequest 无法解析为一个类型

> ID：13951127
> 
> 赞同：14
> 
> 时间：2012-12-19T11:13:01.700
> 
> 标签：eclipse, servlets, jakarta-ee, compiler-errors

在 Eclipse 中创建 servlet 时出现错误，例如

> 此行有多个标记
> 
> *   ServletException 无法解析为类型
> *   HttpServletResponse 无法解析为类型
> *   HttpServletRequest 无法解析为类型

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-16T07:29:44.317

您可以执行以下操作：在您的类中导入 jar 文件：

`import javax.servlet.http.HttpServletResponse`

添加 Apache Tomcat 库，如下所示：

***项目 > 属性 > Java 构建路径 > 库 > 从库选项卡添加库 > 选择服务器运行时 > 下一步 > 选择 Apache Tomcat v 6.0 > 完成 > 确定***

同样首先，确保 Servlet jar 包含在 Eclipse 中的类路径中，如 PermGenError 所说。

我认为这将解决您的错误

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-19T11:15:14.043

两个可能的问题可能是

*   您要么忘记在类路径中包含 Servlet jar
*   你忘了在你的 Servlet 类中导入它

要在 Eclipse 的类路径中包含 Servlet jar，请下载最新的[Servlet Jar](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/)并使用 buildpath 选项进行配置。查看此[链接](https://stackoverflow.com/questions/3280353/how-to-import-a-jar-in-eclipse)以获取更多信息。

如果您已包含 jar，请确保已声明您的导入。

```
import javax.servlet.http.HttpServletResponse 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-05-24T17:15:34.363

在 Targeted Runtime 中选择 Tomcat 服务器

Project->Properties->Targeted Runtimes (选择你的 Tomcat 服务器)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-17T13:38:54.830

项目>属性> Java构建路径>库>从库选项卡添加库>选择服务器运行时>下一步>选择Apache Tomcat v 7.0>完成>确定

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-19T11:14:52.353

类是导入的吗？尝试按`CTRL`++`SHIFT`来`O`解决导入问题。如果这不起作用，您需要包含应用程序服务器运行时库。

1.  窗口 > 首选项
2.  服务器 > 运行时环境
3.  添加
4.  选择合适的环境，点击下一步
5.  指向安装目录并单击完成。

![在此处输入图像描述](../Images/ad34da65b2d33aa64eaf6ffef06e3aeb.png)

![在此处输入图像描述](../Images/eac95df0d168a331f77f821737c5faf9.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-24T07:48:12.957

如果您使用的是 Maven：

```
<dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>javax.servlet-api</artifactId>
        <version>3.0.1</version>
        <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-28T09:57:22.303

作为此问题的原因，某些代码已损坏或未定义。您可能会在 java 类中看到错误，例如“无法解析类型 javax.servlet.http.HttpSession。它是从所需的 .class 文件中间接引用的”。如前所述，您应该下载“ [javax.servlet.jar”](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/)。然后配置您的项目构建路径，将 javax.servlet.jar 添加为外部 jar。我希望它能解决问题。至少它对我有用。

# php - Magento Dashboard > 获取某个日期的总订单和总出货量

> ID：13951128
> 
> 赞同：2
> 
> 时间：2012-12-19T11:13:04.103
> 
> 标签：php, mysql, magento

我想向 magento 管理仪表板添加一些统计信息，请参见附图。我需要一个 php 脚本来计算特定日期特定状态的订单数量。

例如：统计日期为“今天”的所有状态为“处理中”的订单。

对于发货：计算“今天”日期的所有发货。

感谢所有的帮助！

![Magento 仪表板统计](../Images/7521b71759104f43e6d3cf26d518da27.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:04:21.937

将此类脚本集成到仪表板中需要一些 magento 知识，但您需要的统计数据当然是可能的。您可以从“sales/order_status_history”模型中获取状态历史信息，并从“sales/order”模型中获取当前订单信息。

顺便问一下，您是否检查过“报告”部分中是否提供了您需要的任何统计信息？

# java - 如何使用 Math.cos() & Math.sin()？

> ID：13951136
> 
> 赞同：13
> 
> 时间：2012-12-19T11:13:19.647
> 
> 标签：java, math

我正在使用`Math.cos`，`Math.sin`但它会给我带来意想不到的结果，如下所示：

```
 Angle   Sin      Cos
 354     0.8414  -0.5403
 352     0.1411   0.98998
 350    -0.958   -0.2836 
```

为什么我会得到这些结果？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-19T11:15:04.723

您是否尝试使用学位？请记住这一点，`sin`并`cos`期待弧度。

```
Math.cos(Math.toRadians(354)) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-19T11:15:13.790

`Math.cos`并`Math.sin`以[弧度表示角度](http://developer.android.com/reference/java/lang/Math.html#cos%28double%29)，而不是度数。所以你可以使用：

```
double angleInDegree = 354;
double angleInRadian = Math.toRadians(angleInDegree);
double cos = Math.cos(angleInRadian); // cos = 0.9945218953682733 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T11:16:00.450

```
public static double sin(double a)

Parameters:
a - an angle, in radians.
Returns:
the sine of the argument. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-21T03:25:44.250

您也可以使用它：

```
degrees *= Math.PI / 180;
Math.cos(degrees) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-22T21:18:51.247

没有一个答案符合我的需要。这是我所拥有的：

度数的窦（不辐射）。这是您如何将其转回度角的方式：

```
double angle = Math.toDegree(Math.asin(sinusInDegree)); 
```

说明：如果你有一个三角形的两条边，这是唯一对我有用的解决方案。您可以使用正常度数度量来计算所有内容，但您必须将其转换`Math.asin()`回度数以获得正确的结果。:)

# javascript - 从 CSS3 回退到 Javascript

> ID：13951148
> 
> 赞同：0
> 
> 时间：2012-12-19T11:14:10.717
> 
> 标签：javascript, html, css

我尝试使用的方法是这样的：

1.  一个脚本验证“CSS3”属性在用户浏览器中是否可用。（转换属性）
2.  如果不是，则 JavaScript 文件将作为后备下载（这将执行动画）

我的问题是：

如何将 JS 文件下载到用户浏览器中？这甚至可能吗？你还有什么建议的方法？

PS：这个领域真的很新，所以请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:20:02.103

为什么要稍后下载脚本？将脚本直接放在头部并将其包装在 if-else-clause 中，以便它什么都不做，如果 CSS3 可用...

否则，您可以更改 DOM 并在头部放置一个新脚本......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:00:08.777

这是一个非常简单的实现，它检查 css 转换支持，如果不存在，则加载外部 JS 文件：

**HTML**

```
 <!-- make sure you include <script> link to to modernizr.js in your <head> before this script -->
    <script>
      // if browser does not support transitions. If not, load in our polyfill
        Modernizr.load({
          test: Modernizr.csstransitions,
          nope: '/js/polyfill.js'
        });// END Modernizr.load
    </script> 
```

此外，这里是一个[polyfill 列表](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)，您可以使用它们在旧版浏览器中重现现代功能（但在此要小心，可能会对性能造成很大影响）。

希望有帮助！

# eclipse - 在 Azure 中部署的上下文文件

> ID：13951149
> 
> 赞同：1
> 
> 时间：2012-12-19T11:14:14.243
> 
> 标签：eclipse, azure

我的 grails 应用程序中有 3 个文件：appli.war、config.groovy 和 contextAppli.xml

contextAppli.xml 代码是：

```
<?xml version="1.0" encoding="UTF-8"?>

<Context 
    path="." 
    docBase="appli.war"
  reloadable="false">

  <Parameter
    name="configLocation"
    override="false"
    value="file:c:/tomcat/config.groovy"/>

</Context> 
```

但是当我在eclipse中用我的war做一个天蓝色的部署项目时，我无法指定config.groovy和contextAppli.xml的位置。所以我的部署不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:26:24.430

您应该使用 PowerShell 命令定义启动任务，以便在部署角色时将文件复制到您需要的位置。请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)

# gsm - 联系远程服务器并使用 ACR880 gprs 读卡器进行测试

> ID：13951151
> 
> 赞同：0
> 
> 时间：2012-12-19T11:14:16.757
> 
> 标签：gsm, smartcard, gprs, smartcard-reader, pcsc

我知道这不是在 stackoverflow 上提问的正确方法，但请尝试理解我。谢谢。

好的...我已按照 ACR 公司的建议订购了支持 GPRS 的 ACR880 读卡器，用于我想要的应用程序中，以便在无法访问互联网的地方联系远程服务器（欢迎对更好的读卡器提出任何建议）

所以我担心的是；我是否能够使用我的本地服务器测试此读卡器以开发我的后端服务，以供读卡器通过 GPRS 访问，或者我将需要电信公司/网络运营商托管的沙箱之类的东西。

请纠正我哪里错了，欢迎任何关于我需要知道的建议或建议......谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:31:27.010

基本上这是一个基于 ARM 的嵌入式 Linux 系统。因此，关于硬件，您几乎涵盖了。至少同样重要的是它附带了什么样的软件和连接选项。不幸的是，数据表没有具体说明这款多功能读卡器附带什么软件。

GPRS 是一种数据连接协议，它支持互联网协议（因此支持 TCP/IP 和可能的 HTTP(S)）。因此，对于数据传输，您可以使用任何正常的互联网连接。但是，您应该确保您的应用程序可以处理间歇性传输错误或传输丢失。这是你的应用程序无论如何都应该优雅地处理的事情，但遇到问题的机会显然更高。

我不明白您为什么需要沙箱，但您应该联系 ACR 以确保您可以开发您的特定应用程序。您可能需要一个开发工具包。

# java - SwingUtilities.invokeLater：问题

> ID：13951159
> 
> 赞同：2
> 
> 时间：2012-12-19T11:14:38.203
> 
> 标签：java, swing, swingutilities, invokelater

我一直不明白`SwingUtilities.invokeLater`，这就是我直到现在一直避免它的原因。但是让 Swing Thread 安全非常重要。好吧，请原谅，因为这是我第一次这样做。我试图在一些数据库查询后关闭窗口。所以，据我所知，任何更新都`UI`必须由 .`SwingUtilities.invokeLater`这是我的工作：

主要的：

```
public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
    public void run() {
    new forminsert().setVisible(true);
forminsert f=new forminsert();
    }
    });

    }
  public forminsert() {
    initComponents();
}

public class forminsert extends javax.swing.JFrame {    
private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jTextField1 = new javax.swing.JTextField();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jButton3 = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setUndecorated(true);

    jPanel1.setBackground(new java.awt.Color(0, 0, 0));
    jPanel1.setBorder(javax.swing.BorderFactory.createMatteBorder(3, 3, 3, 3, new java.awt.Color(0, 204, 204)));
              /////***REST CODE***/////           

} 
```

添加按钮上的侦听器

```
 private void jButton2ActionPerformed(java.awt.event.ActionEvent evt)               {                                         
 new Thread(new thread1()).start();

}                                        
public class thread1 implements Runnable
{

    public void run() {
     insert ins=new insert();
    ////code for inserting///     
    }
 } 
```

浏览按钮上的侦听器

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)                {                                         
    JFileChooser ss=new JFileChooser();
    ////Code to choose the file////
                 } 
```

这是问题，退出代码。

```
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {

forminsert f=new forminsert();f.call();
}

public  void call()
{
java.awt.EventQueue.invokeLater(new Runnable() {
    public void run() {
 jPanel1.setVisible(false);
getRootPane().setVisible(false);

    }
    }); 
```

屏幕： ![短屏幕](../Images/d406db520563b7767abd45372d6632f3.png)

请解释我哪里出错了，我不想使用`System.exit`，请原谅我问了太多问题。谢谢。

**更新：**

这是@trashgod 要求的示例**工作代码**

```
package faltur;

import java.io.File;
import javax.swing.JFileChooser;

public class insert extends javax.swing.JFrame {

/** Creates new form insert */
public insert() {
    initComponents();
}

@SuppressWarnings("unchecked")

 private void initComponents() {

    jPanel1 = new javax.swing.JPanel();
    jTextField1 = new javax.swing.JTextField();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setUndecorated(true);

    jPanel1.setForeground(new java.awt.Color(240, 240, 240));

    jButton1.setText("Browse..");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jButton2.setText("exit");
    jButton2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton2ActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addContainerGap()
                    .addComponent(jButton1)
                    .addGap(31, 31, 31)
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 185, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(jPanel1Layout.createSequentialGroup()
                    .addGap(153, 153, 153)
                    .addComponent(jButton2)))
            .addContainerGap(99, Short.MAX_VALUE))
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(jPanel1Layout.createSequentialGroup()
            .addGap(66, 66, 66)
            .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jButton1, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
            .addGap(87, 87, 87)
            .addComponent(jButton2)
            .addContainerGap(94, Short.MAX_VALUE))
    );

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE,   javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
    );

    pack();
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt)                {                                         
 JFileChooser ss=new JFileChooser();
 ss.showOpenDialog(jTextField1);

 File f=ss.getSelectedFile();

   path=f.toString();
    System.out.println(path);

}                                        

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
  insert in=new insert();
  in.exit();/////////////CALLS exit()/////////////////modify this//////
}

public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new insert().setVisible(true);
        }
    });
}
public void exit()////////////////////////MODIFY THIS///////////////////
{
jPanel1.getRootPane().setVisible(false);

}

private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JPanel jPanel1;
private javax.swing.JTextField jTextField1;

 public String path="";
} 
```

请运行并告诉如何修改`exit()`以关闭窗口。再次感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T11:30:16.027

因为您的框架的默认关闭操作是`EXIT_ON_CLOSE`，所以您可以通过 发送`WindowEvent.WINDOW_CLOSING`，如此[处](https://stackoverflow.com/a/7457102/230513)`dispatchEvent()`所示。给定一个，`JFrame f`

```
private static final String EXIT = "Exit";
private Action exit = new AbstractAction(EXIT) {

        @Override
        public void actionPerformed(ActionEvent e) {
            f.dispatchEvent(new WindowEvent(
                f, WindowEvent.WINDOW_CLOSING));
        }
    };
private JButton b = new JButton(exit); 
```

另请参阅[*如何使用操作*](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)并遵循常见的[编码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)。

附录：根据修改后的代码，这里是*退出*程序的一种方法。注意类名通常以大写字母开头，而实例名则小写。

```
private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {
    insert.dispatchEvent(new WindowEvent(
        insert, WindowEvent.WINDOW_CLOSING));
}

public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            insert = new Insert();
            insert.setVisible(true);
        }
    });
}

private static Insert insert;
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:35:55.510

很好用`foo.setVisible(false)`，我只是把它改成了`setVisible(false)`，它就起作用了。

# css - 复选框在 IE8 中不可见，但在 Firefox 中可见

> ID：13951160
> 
> 赞同：0
> 
> 时间：2012-12-19T11:14:38.240
> 
> 标签：css, checkbox, internet-explorer-8

我在[这个网站](http://goo.gl/TDiXD)的 Internet Explorer 8 中有一个非常奇怪的错误。在 IE8 中，复选框消失了。但是，它适用于其他浏览器，例如 Firefox 或 Chrome。在 Chrome 或 Firefox 中，可以看到“点击比较”文本旁边的复选框。但是在 Internet Explorer 中它是不可见的。

知道为什么会这样吗？我需要它是可见的，以便用户可以点击它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:54:37.157

如果您从中删除`float:left`它`compare_check regular-checkbox`开始在 IE8 中显示。

使用条件注释或`float:none\9`仅针对 IE8 破解它。

# linker - 未定义的引用 - 尽管链接器找到了 lib

> ID：13951166
> 
> 赞同：12
> 
> 时间：2012-12-19T11:14:56.213
> 
> 标签：linker, undefined-reference

我有一个简单的程序来测试 python 开发文件的可用性：

```
#include<Python.h>
int main(){Py_Initialize(); Py_Finalize(); } 
```

我将它（安装了 python 2.7）编译为`gcc -I/usr/include/python2.7 -lpython2.7 p.c`. 它在其他机器上运行良好，除了在 Ubuntu 12.04（精确）的大部分干净的 chroot 上我不断得到

```
/tmp/ccj8Mgjb.o: In function `main':
p.c:(.text+0x5): undefined reference to `Py_Initialize'
p.c:(.text+0xa): undefined reference to `Py_Finalize'
collect2: ld returned 1 exit status 
```

标头已安装，`/usr/lib/libpython2.7.so`存在，但链接器仍然失败。该符号在`.so`文件中列出，并且 gcc 正在读取正确的内容`libpython2.7.so`：

```
$ nm -D libpython2.7.so.1.0  | grep Py_Initialize
00000000000c9c20 T Py_Initialize
00000000000c9260 T Py_InitializeEx

$ strace -f gcc -I/usr/include/python2.7 -lpython2.7 /tmp/p.c 2>&1 |grep   libpython2.7 |grep open
[pid 10618] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/libpython2.7.so", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 10618] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/libpython2.7.a", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 10618] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libpython2.7.so", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 10618] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libpython2.7.a", O_RDONLY) = -1 ENOENT (No such file or directory)
[pid 10618] open("/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../../lib/libpython2.7.so", O_RDONLY) = 7 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-19T12:04:27.017

尝试：

```
gcc -I/usr/include/python2.7 p.c -lpython2.7 
```

`Py_Initialize`链接器在加载时还不知道这是一个必需的符号`libpython2.7.a`，所以它把它扔掉了。然后它到达 po 并抛出一个关于丢失符号的适合。以这种方式排序将使链接器在后续输入中查找丢失的符号。

见： http: [//gcc.gnu.org/onlinedocs/gcc/Link-Options.html](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)

> 在命令中编写此选项的位置有所不同；链接器按照指定的顺序搜索和处理库和目标文件。因此，`foo.o -lz bar.o' searches library`z' 在文件 foo.o 之后但在 bar.o 之前。如果 bar.o 引用了 `z' 中的函数，这些函数可能不会被加载。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-01-12T14:51:50.400

我也遇到了同样的链接问题。但就我而言，仅提供`-lpython`. 也`-L`需要。IE

```
g++ -I/usr/include/python3.5 hw.cpp -L/usr/lib/python3.5/config-3.5m-x86_64-linux-gnu -lpython3.5 
```

是的。订单很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-17T23:45:03.863

我遇到了同样的链接问题，我个人的问题是我的 32 位 mingw 编译器无法加载 64 位 python 库。我将我的 mingw 升级到 64 位并解决了我的问题。在这里留下一个便条，以防有人遇到同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-28T15:43:57.940

如果安装了 python 3.x，也许这个命令可以工作：

```
g++ hw.cpp `/usr/bin/python3-config --cflags` `/usr/python3-config --ldflags` 
```

顺便说一句，你应该检查你的 gcc 和 python 版本。

据我所知，如果 gcc 版本是 5.4 而 python 版本是 3.7，它就不起作用。（python 3.5 是工作）

运行`/usr/bin/python3-config --cflags`的时候，其实就是编译选项。

# java - 如何实现离线 GWT 地图

> ID：13951169
> 
> 赞同：1
> 
> 时间：2012-12-19T11:14:58.783
> 
> 标签：java, javascript, google-maps, gwt, offline

谁能帮我在 GWT 上创建离线地图，我听说过 OpenLayers 但我没有找到任何源代码，你对此有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:33:26.720

您将需要 Openlayers 的GWT [-Openlayers](https://bitbucket.org/gwtopenlayers/gwt-openlayers/overview) [Wrapper](http://openlayers.org/)。请注意，它是 0\. 版本，所以它并不完美，但它确实有效。

编辑：

您还需要一张离线地图，我用过这个。它并不完美，但却是我所知道的最好的免费软件。 [开放街图](http://www.openstreetmap.org/)

我这样做已经一年多了，我无法访问源代码，但我记得这对我有帮助。不需要 SmartGWT，其原理与纯 GWT 相同： [SmartGWT wrapper for OpenLayers](http://forums.smartclient.com/showthread.php?t=4368&highlight=openlayers)。实际上，使用纯 GWT 应该更容易。

# xml - xslt 高级日期日期时间转换

> ID：13951170
> 
> 赞同：0
> 
> 时间：2012-12-19T11:15:00.487
> 
> 标签：xml, date, xslt, datetime

我是 xslt 的新手，我无法为我的问题找到解决方案......

我必须创建一个允许从 DateTime 转换为 DateString 的 xslt，反之亦然。

从：

```
<dtStatus>2011-02-01T21:23:04Z</dtStatus> 
```

到：

```
<dtStatus>110201 21:23:04</dtStatus> 
```

如何创建 xsl 代码来进行这种转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:52:22.003

您可以使用字符串函数提取特定的字符串片段并将它们重新组合在一起：

[https://developer.mozilla.org/en-US/docs/XPath/Functions](https://developer.mozilla.org/en-US/docs/XPath/Functions)

例如，这样的事情应该以您想要的格式提取日期：

```
concat(substring(dtStatus, 3, 2), substring(dtStatus, 6, 2), substring(dtStatus, 8, 2)) 
```

# python - Python - 并行进程调用主进程函数

> ID：13951172
> 
> 赞同：1
> 
> 时间：2012-12-19T11:15:03.680
> 
> 标签：python, concurrency, multiprocessing

我在多处理方面遇到了一些麻烦。这是我的程序的基本方案：

*   主要流程
*   从主进程调用的并行进程
*   尝试从主进程调用函数的并行进程

    ```
    class MainProcess():
        def foo(self):
            # do something

        def main():
            p = ParallelProcess(self)
            p.start()

    class ParallelProcess(multiprocessing.Process):
        def __init__(self, mainProcess):
            multiprocessing.Process.__init__(self)
            self.mainProcess = mainProcess

        def run(self):
            self.mainProcess.foo() 
    ```

我的实际程序要复杂得多，但这个例子完美地解释了我的代码结构。我得到的错误与泡菜有关。据我了解，我收到此类错误，因为 mainProcess 不可选择。但是，除了上面显示的之外，我不知道要使用哪种其他模式或代码结构。任何帮助将不胜感激。

根据要求，确切的错误是：

```
 Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "C:\Program Files\PsychoPy2\lib\multiprocessing\forking.py", line 342, in main
    self = load(from_parent)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 1370, in load
    return Unpickler(file).load()
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 858, in load
    dispatch[key](self)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 880, in load_eof
    raise EOFError
EOFError
Traceback (most recent call last):
  File "C:\Users\user\workspace\Eyelink1.1\gcwindow_main.py", line 17, in <module>
    main()
  File "C:\Users\user\workspace\Eyelink1.1\gcwindow_main.py", line 9, in main
    wrapper.run() # start collecting data on a separate process
  File "C:\Users\user\workspace\Eyelink1.1\pylinkwrapper.py", line 149, in run
    exp.start()
  File "C:\Program Files\PsychoPy2\lib\multiprocessing\process.py", line 104, in start
    self._popen = Popen(self)
  File "C:\Program Files\PsychoPy2\lib\multiprocessing\forking.py", line 239, in __init__
    dump(process_obj, to_child, HIGHEST_PROTOCOL)
  File "C:\Program Files\PsychoPy2\lib\multiprocessing\forking.py", line 162, in dump
    ForkingPickler(file, protocol).dump(obj)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 224, in dump
    self.save(obj)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 725, in save_inst
    save(stuff)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 419, in save_reduce
    save(state)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 649, in save_dict
    self._batch_setitems(obj.iteritems())
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 681, in _batch_setitems
    save(v)
  File "C:\Program Files\PsychoPy2\lib\pickle.py", line 306, in save
    rv = reduce(self.proto)
ValueError: ctypes objects containing pointers cannot be pickled 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:23:03.940

要`pickle`用于您的课程，您需要定义`__getstate__`,`__setstate__`行为。[文档中的更多信息](http://docs.python.org/2/library/pickle.html#pickling-and-unpickling-normal-class-instances)。

但是（！）据我了解，这并不能解决您的实际问题。因为在这种情况下，您将获得`MainProcess`内部的新（反序列化）实例，`ParallelProcess`并且无法在父进程的上下文中调用函数。

# sql - SQL 查询导致 Microsoft Access 挂起

> ID：13951174
> 
> 赞同：0
> 
> 时间：2012-12-19T11:15:06.213
> 
> 标签：sql, ms-access, subquery

以下是我在 Microsoft Access 中的 sql。我想根据子查询选择数据。

可以单独运行子查询。它将在 30 秒内返回结果。但是当我运行以下所有 SQL 时，ms 访问没有响应。运行查询似乎很忙，但没有返回结果。

```
SELECT '2012/8'      AS [Period],
       monthno,
       [cluster],
       'Transfer in' AS Remark,
       Count(*)      AS [number],
       '4'           AS [sorting]
FROM   [2012],
       namesort
WHERE  monthno = 244
       AND ( div <> 'XXX'
              OR div IS NULL )
       AND hc = 1
       AND [2012].post = namesort.post
       AND monthno BETWEEN namesort.monthno_start AND namesort.monthno_end
       AND [2012].term <> 'Temporary'
       AND empid IN (SELECT empid
                     FROM   (SELECT empid,
                                    [cluster],
                                    Count(*) AS [empid no]
                             FROM   (SELECT empid,
                                            cluster
                                     FROM   [assignment]
                                            INNER JOIN yearmonth
                                                    ON [assignment].[year month]
                                                       =
                                                       yearmonth.[year month]
                                     WHERE  yearmonth.[monthno] = 243
                                            AND [assignment].hc = 1
                                            AND [assignment].term <> 'Temporary'
                                     UNION
                                     SELECT empid,
                                            [cluster]
                                     FROM   [2012]
                                     WHERE  monthno = 244
                                            AND [2012].term <> 'Temporary'
                                            AND ( div <> 'XXX'
                                                   OR div IS NULL )
                                            AND hc = 1)
                             GROUP  BY [empid],
                                       [cluster]
                             HAVING Count(*) = 1)
                     GROUP  BY empid
                     HAVING Count(*) > 1)
GROUP  BY monthno,
          [cluster] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:52:53.283

试试这个，在 MS Access 中，显式 JOIN 会快很多

```
SELECT '2012/8'      AS [Period],
       monthno,
       [cluster],
       'Transfer in' AS Remark,
       Count(*)      AS [number],
       '4'           AS [sorting]
FROM  ( [2012] 
INNER JOIN namesort 
ON [2012].post = namesort.post )
INNER JOIN
       (SELECT empid
                     FROM   (SELECT empid,
                                    [cluster],
                                    Count(*) AS [empid no]
                             FROM   (SELECT empid,
                                            cluster
                                     FROM   [assignment]
                                            INNER JOIN yearmonth
                                                    ON [assignment].[year month]
                                                       =
                                                       yearmonth.[year month]
                                     WHERE  yearmonth.[monthno] = 243
                                            AND [assignment].hc = 1
                                            AND [assignment].term <> 'Temporary'
                                     UNION
                                     SELECT empid,
                                            [cluster]
                                     FROM   [2012]
                                     WHERE  monthno = 244
                                            AND [2012].term <> 'Temporary'
                                            AND ( div <> 'XXX'
                                                   OR div IS NULL )
                                            AND hc = 1)
                             GROUP  BY [empid],
                                       [cluster]
                             HAVING Count(*) = 1)
                     GROUP  BY empid
                     HAVING Count(*) > 1) As Emps
ON [2012].EmpID = Emps.EmpID
WHERE  monthno = 244
       AND ( div <> 'XXX'
              OR div IS NULL )
       AND hc = 1

       AND monthno BETWEEN namesort.monthno_start AND namesort.monthno_end
       AND [2012].term <> 'Temporary'

GROUP  BY monthno,
          [cluster] 
```

# java - 如何查找 Java 类所属的 Jar

> ID：13951175
> 
> 赞同：11
> 
> 时间：2012-12-19T11:15:12.437
> 
> 标签：java

下载 JDK/JRE 时，我需要知道`TimedWindowEvent`类属于哪个 JAR。是否有任何*通用*方法可以使用 Eclipse 或任何其他工具搜索特定类所属的 Jar。现在，我必须在 WinRAR 中打开 jar 并检查每个 jar 以查找我正在搜索的类是否存在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T11:19:49.903

在eclipse中你可以使用`ctrl+shift+t`（这意味着你正在搜索目标）它会弹出一个窗口并输入你的类名。它将向您显示类名所属的 jar。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T11:16:52.870

您可以从在 JarFinder 上搜索类开始。

[http://www.findjar.com/](http://www.findjar.com/)

有时一个类在多个 JAR 中并不完美。但这可能有助于缩小搜索范围。

如果链接停止工作，可以使用您最喜欢的搜索引擎找到其他类似的服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T11:20:03.370

在 Eclipse 中，打开一些类，只需导入`TimedWindowEvent`类并按功能键`F3`或按`Ctrl+mouse click`Eclipse 将把它带到类来自的 jar 中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T11:19:21.963

如果您使用的是 Eclipse，请使用“Open Type”对话框 (ctrl-shift-T) 并搜索该类。

找到后，在对话框底部可以看到它所在的 jar 文件。

这仅在 jar 文件位于您的类路径中时才有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T11:22:25.610

在 Eclipse 中：

1.  按`Ctrl`+ `Shift`+`T`
2.  这将打开一个对话框。输入班级名称。
3.  然后它将搜索所有匹配的类文件
4.  在选择类文件时，在对话框的底部，它会显示包含该类的类路径中的 jar 文件。

# c++ - OpenCV YAML 解析布尔值

> ID：13951179
> 
> 赞同：4
> 
> 时间：2012-12-19T11:15:24.117
> 
> 标签：c++, opencv, yaml

我正在使用 opencv 读取和写入我的应用程序配置文件。我有一个我想存储在那里的布尔值。它保存为 int：

> 相机：自动增益：1

我尝试通过以下方式阅读它：

```
auto_gain=static_cast<bool>(static_cast<int>(camera["auto_gain"])); 
```

但我收到警告：

> 警告 C4800: 'int' : 强制值为 bool 'true' 或 'false' （性能警告）

在这种情况下解析 bool 的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:18:48.360

正如在[这个问题](https://stackoverflow.com/questions/1847860/why-is-there-a-performance-warning-on-cast-pointer-to-bool)中所讨论的，您应该使用：

```
auto_gain = static_cast<int>(camera["auto_gain"]) != 0; 
```

# file-io - 在 Erlang 中，我可以使用 ets:tab2list 而不包括嵌套元组的换行符吗？

> ID：13951181
> 
> 赞同：0
> 
> 时间：2012-12-19T11:15:37.803
> 
> 标签：file-io, erlang, ets

我正在创建一个 ets；

```
ets:new(myets,[duplicate_bag,public,named_table]). 
```

我正在输入以下格式的数据：

```
{120869,message,item1,item2,status1,success}
{120869,message,item1,item2,status1,fail}
{120869,action,message,{oldsetting,40},{newsetting,50}}
{93195,model_status} 
```

我想将这些中的每一个保存为文本文件中的单独行。我正在尝试以下方式：

```
Data = ets:tab2list(myets) 
```

这给出了：

```
[{120869,message,item1,item2,status1,success},
{120869,message,item1,item2,status1,fail},
{120869,action,message,
 {oldsetting,40},
 {newsetting,50}},
{93195,model_status}] 
```

然后我`io:format`用来保存到文件。

但是，我想知道是否有一种简单的方法可以保存`myets`到文本文件而不在第三个元组中放置换行符（嵌套元组以`oldsetting`and开头`newsetting`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T10:00:44.730

如果文件中有文件设备，则只需执行：

```
[io:format(File, "~p\n", [I]) || I <- Data]. 
```

但是如果你想存储非常大的表，这种方式内存效率不高。

为什么要存储这些数据？也许最好只使用dets？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:28:13.697

好吧，一个简单的打印功能应该可以解决问题：

```
print_list(List, File) ->
   lists:foreach(fun(X) -> io:write(File, X), io:nl(File) end, List). 
```

但是，如果您只想保存可以使用的 ets 表`to_dets/2`（并使用 打开它`from_dets/2`）。

# ios - 切换相机后音频/视频不同步

> ID：13951182
> 
> 赞同：8
> 
> 时间：2012-12-19T11:15:37.850
> 
> 标签：ios, xcode, avcapturesession

我正在尝试创建应用程序，在其中我可以在录制过程中从设备上的不同摄像机录制视频。例如。用户从前置摄像头按下“开始录制”按钮，5 秒录制后用户按下“切换摄像头”按钮，应用程序将视频源从前置摄像头更改为后置摄像头并继续录制。对于相机切换，我使用下一个代码：

```
NSError *error;
AVCaptureDeviceInput *newVideoInput;
AVCaptureDevicePosition currentCameraPosition = [[videoInput device] position];

if (currentCameraPosition == AVCaptureDevicePositionBack)
{
    currentCameraPosition = AVCaptureDevicePositionFront;
}
else
{
    currentCameraPosition = AVCaptureDevicePositionBack;
}

AVCaptureDevice *backFacingCamera = nil;
NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
for (AVCaptureDevice *device in devices) 
{
    if ([device position] == currentCameraPosition)
    {
        backFacingCamera = device;
    }
}
newVideoInput = [[AVCaptureDeviceInput alloc] initWithDevice:backFacingCamera error:&error];

if (newVideoInput != nil)
{
    [_captureSession beginConfiguration];

    [_captureSession removeInput:videoInput];
    if ([_captureSession canAddInput:newVideoInput])
    {
        [_captureSession addInput:newVideoInput];
        videoInput = newVideoInput;
    }
    else
    {
        [_captureSession addInput:videoInput];
    }
    //captureSession.sessionPreset = oriPreset;
    [_captureSession commitConfiguration];
}

_inputCamera = backFacingCamera; 
```

在此应用程序更改视频源并继续编写之后，但是...音频/视频不同步...有人可以解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-02-19T16:03:15.013

我遇到了同样的问题，尝试了很多东西，并想出了一个简单方便的解决方案，并且没有任何故障。

[![在此处输入图像描述](../Images/0fad15277d6e70c3fd8ef91db17b4659.png)](https://i.stack.imgur.com/IIc5Y.png)

问题是，正如@daij-djan 指出的那样，切换会话输入需要一点时间，并在输出中添加一些黑色帧，然后继续发送帧，就好像它从未停止过一样。据我所知，不可能知道有多少帧受到影响。会话时间码不受此延迟的影响，因此我们不能使用它来忽略某些视频帧。

[![在此处输入图像描述](../Images/c1ba664f9b3b0d575caf9520c98e4a07.png)](https://i.stack.imgur.com/N1O6L.png)

您可以每个摄像头输入一个会话（如果需要，一个用于音频）和一个视频输出，而不是一个会话具有多个摄像头输入。然后你只需要在会话之间切换这个输出。

[![在此处输入图像描述](../Images/959ef8b2b0f401196149e7bcc274107e.png)](https://i.stack.imgur.com/nkq0v.png)

结果，您将没有去同步化，也没有丑陋的黑客可做。在我的测试中，内存影响非常有限，我没有注意到任何性能影响。我的理论是会话在附加输出之前是不活动的。

开关输出可以这样完成：

```
fromSession.beginConfiguration()
fromSession.removeOutput(videoOutput)
fromSession.commitConfiguration()

toSession.beginConfiguration()
if toSession.canAddOutput(videoOutput) { toSession.addOutput(videoOutput) }
toSession.commitConfiguration() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:17:37.627

您需要停止录制，切换并重新开始。相机开关不是即时AFAIK

你不能录制成n个文件然后把它们拼接在一起吗？

尝试使用单独的 AVMutableComposition 轨道，然后为音频和视频设置一个可变组合。（请参阅[使用 AVMutableComposition 合并两个 m4v 电影文件 - 视频不会合并](https://stackoverflow.com/questions/10285007/merging-two-m4v-movie-files-using-avmutablecomposition-videos-will-not-merge)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T07:56:21.757

切换相机时，需要在委托方法中暂停缓冲区写入：

```
- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection 
```

你可以查看开源项目 PBJVision

# sql - 从表中检索信息

> ID：13951183
> 
> 赞同：0
> 
> 时间：2012-12-19T11:15:38.953
> 
> 标签：sql

我需要检索收入高于其部门平均工资的员工的信息……我们有名为 10、20、30、40、50……的部门，以此类推。在这里，我设法检索到我只需要一个部门的东西。(40) 我怎样才能为尽可能多的部门做到这一点？

这是我的查询：

```
SELECT  * FROM    EMPLOYEE where (Department_ID='40')and 
 (
 employee_salary > 
  (select avg(employee_salary) from EMPLOYEE  where  Department_ID='40')   
 ) 
```

`Datatable`： ![数据表](../Images/d61c3eb01cd5e7aa39008d42670b044c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:22:43.897

希望这会做，

```
 SELECT  emp.* FROM    EMPLOYEE emp where emp.employee_salary >
      (  select avg(employee_salary) from EMPLOYEE new1 
         where emp.Department_ID=new1.Department_ID 
         group by  Department_ID  
      ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:21:18.833

试试这个查询

```
select * from EMPLOYEE as e1
where e1.employee_salary > (select avg(employee_salary) 
                         from EMPLOYEE as e2 
                         where e1.department_id=e2.department_id
                         group by Department_id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:23:04.017

你可以试试这个：

```
 SELECT  *, avg(employee_salary) as average_salary 
FROM    EMPLOYEE 
where Department_ID='40' 
having average_salary<employee_salary 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:24:21.127

```
select e.* from employee as e inner join
    (select department_id, avg(employee_salary) as avg_salary
        from employee group by department_id) as f
on e.department_id = f.department_id
where e.employee_salary > f.avg_salary; 
```

# c++ - 在 C++ 中输出多字节字符串

> ID：13951188
> 
> 赞同：5
> 
> 时间：2012-12-19T11:16:04.083
> 
> 标签：c++, multibyte, wofstream

我对多字节字符字符串有疑问。我已将我的问题简化如下：

```
std::wstring str = L"multıbyte test string";
std::wofstream f;
f.open("F:\\dump.txt");
f << str;
f.close(); 
```

转储文件的内容是：“mult”

尽管我使用了 wstring 和 wofstream，为什么它会削减 str 的剩余部分？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:36:18.817

`wofstream`使用当前语言环境写出数据。默认语言环境可能不支持多字节字符。

请参阅问题：[无法将 std::wstring 写入 wofstream](https://stackoverflow.com/questions/5104329/unable-to-write-a-stdwstring-into-wofstream)

您可以通过以下方式输出完整的字符串：

```
std::locale::global(std::locale("")); 
```

但是，在编写之前，您不会在 Windows 上将字符作为 unicode 获取，因为它本身不支持 UTF-8 语言环境。

为此，您应该使用 将其转换为 std::string `WideCharToMultiByte`，并使用 regular 将其写出`ofstream`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:46:16.050

您将不得不为输出流注入一些语言环境，以获得一些合理`codecvt`的方面来`wchar_t`进行`char`转换。如果您有支持 C++11 的编译器或 Visual Studio 2010 及更高版本，则可以使用 UTF-8 facet ( [`codecvt_utf8`](http://en.cppreference.com/w/cpp/locale/codecvt_utf8))：

```
f.imbue(
    std::locale (         // using std::locale constructed from
        std::locale (),   // global locale
                          // and codecvt_utf8 facet
            new std::codecvt_utf8<char, 0x10FFFF,
                static_cast<std::codecvt_mode>(std::consume_header
                    | std::little_endian)>); 
```

还有[`codecvt_utf16`](http://en.cppreference.com/w/cpp/locale/codecvt_utf16).

# python - 选择具有多对多关系的查询

> ID：13951193
> 
> 赞同：3
> 
> 时间：2012-12-19T11:16:14.003
> 
> 标签：python, sql, sqlite, join, many-to-many

我有这个数据库结构

```
CREATE TABLE man (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT
);

CREATE TABLE work (
    work_id INTEGER PRIMARY KEY,
);

CREATE TABLE manWork {
    man_id INTEGER,
    work_id INTEGER,
    FOREIGN KEY(man_id) REFERENCES man(id),
    FOREIGN KEY(work_id) REFERENCES work(work_id)
}; 
```

如果我想获取所有男性的列表以及每个男性的所有与该男性相关的工作，那么 SELECT 将如何查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:19:39.017

```
SELECT
    m.name
    , w.*
FROM
    man m
         INNER JOIN manWork mw ON m.id = mw.man_id
         INNER JOIN work w ON mw.work_id = w.work_id 
```

从您的问题中不确定，但如果您想要所有男性，无论他们在 manWork 表中是否有记录，然后使用 LEFT JOIN 而不是 INNER JOIN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:18:26.860

[***`JOIN`***](http://en.wikipedia.org/wiki/Join_%28SQL%29)表格：

```
SELECT
  m.name,
  w.*
FROM manwork mw
INNER JOIN work w ON mw.work_id = w.work_id
INNER JOIN man  m ON mw.man_id  = m.id 
```

# tfs - 针对 TFSPreview.com 使用 TeamCity。有成功吗？

> ID：13951194
> 
> 赞同：3
> 
> 时间：2012-12-19T11:16:16.900
> 
> 标签：tfs, continuous-integration, teamcity, tfsbuild

我想使用 TeamCity 针对 TFSPreview.com 进行基本构建。

TFSPreview 服务使用 LiveID 作为凭据，据我所知，您需要使用[http://windows.microsoft.com/en-US/windows7/online-id将 TeamCity 构建服务器登录名与 liveID 相关联-提供者](http://windows.microsoft.com/en-US/windows7/online-id-providers) 。

谷歌搜索 TFSPreview 和 TeamCity 带来的回报很少。我能找到的关于这个主题的唯一 JetBrains 问题 ( [http://youtrack.jetbrains.com/issue/TW-20909](http://youtrack.jetbrains.com/issue/TW-20909) ) 仍然是开放的，并且是 8.0 的修复版本。

因此，为了可能节省我浪费的时间，**目前是否可以针对存储在 TFSPreview 中的代码运行 TeamCity (7.1) 构建？**

注意：我们不能使用 TFSPreview 自己的基于云的主机作为构建机器，因为我们使用了一些需要安装在构建机器上的 DevExpress 组件 - 不是使用 TFSPreview 的选项。很遗憾，否则这个过程已被证明非常简单（即使构建电子邮件的到达速度很慢）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T13:33:06.687

在您的 TFS 服务帐户中，您可以专门为这些场景设置服务帐户。

![在此处输入图像描述](../Images/e91a143e12f314d3c6ef90f44daa65bd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T09:35:34.060

感谢@jesse 的回答，我可以在管理配置 Teamcity 后确认此方法有效！（我使用的是最新版本的 TC - 8.0.3）

我已将此添加为一个完整的答案，因为我还无法确定要使用的 URL 和用户名格式。所以这里是对我有用的全部细节：

1.  首先在 TFS 中配置备用凭据（配置文件 -> 凭据 -> 启用备用凭据）

2.  然后在 TeamCity 中：

    *   使用以下 URL 格式：**https://{yournamehere}.visualstudio.com/DefaultCollection**
    *   对于用户名，请使用您在步骤 1 中设置的备用凭据名称。但将其置于以下格式“ **##LIVE##\usernamehere** ”（它实际上在框下方告诉您这一点，但我第一次不知何故错过了它！）

希望这对其他人有帮助！

# php - 动态创建我的应用程序的完整 URL

> ID：13951195
> 
> 赞同：3
> 
> 时间：2012-12-19T11:16:18.867
> 
> 标签：php

我可以使用我的应用程序根目录

```
 define("ROOT",dirname(__FILE__); 
```

但我需要动态获取我的应用程序所在位置的完整 URL。

我的驱动器上的示例位置可能位于：

```
 c:\htdocs\website_name\index.php 
```

那么我需要：

```
 http://localhost/website_name/ 
```

最好使用正确的协议（http 或 https）

我目前在我的配置文件中硬编码应用程序的位置，但已经看到它可以动态完成。

有任何想法吗？我假设使用类似 $_SERVER['SERVER_NAME'] 的东西可以给我名字，但我不知道如何让他的其余变量工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:30:19.233

SERVER_NAME 不会自动被告知反映实际的域名和路径。这通常在 apache/conf/extra 中的 VirtualHost 配置文件中定义。您需要结合 SERVER_PROTOCOL 和 SERVER_PORT 解析 HTTP_HOST 以获取真正的域名。

```
$domain =  $_SERVER['HTTP_HOST'];
$protocol = (strpos('https', strtolower($_SERVER['SERVER_PROTOCOL'])))
          ? 'https'
          : 'http';
$port = ($_SERVER['SERVER_PORT'] != 80 || $_SERVER['SERVER_PORT'] != 443 && $protocol != "https")
      ? ":".$_SERVER['SERVER_PORT']
      : "";

$path = sub_str(str_pos("index.php", $_SERVER['PHP_SELF']), -1,  $_SERVER['PHP_SELF']);

$done = $protocol . "://".$domain.$protocol.$path; 
```

代码未经测试，但应该向您展示流程。

编辑：至于您的路径名，您应该解析 PHP_SELF 变量，并删除从 index.php （或您的脚本文件名）开始的所有内容。

# r - 在R中的数据框中搜索行

> ID：13951197
> 
> 赞同：7
> 
> 时间：2012-12-19T11:16:22.240
> 
> 标签：r

我有一串数字不一定具有相同的长度，例如

`0,0,1,2,1,0,0,0`

`1,1,0,1`

`2,1,2,0,1,0`

我已将这些导入到 R 中的数据框中，例如上述三个字符串将给出以下三行（我将称之为`df`）：

![在此处输入图像描述](../Images/6235263bb78a95c4378abd5c73be9939.png)

我正在寻找一些函数来帮助我理解数据。作为一个起点 - 给定一个数字向量`x`- 我想要一个“过程”`P`来建立包含`x`作为子向量的行数，例如 if `x = c(2,1)`then `P(x) = 2`、 if `x = c(0,0,0)`then`P(x) = 1`和 if `x = c(1,3)`then `P(x) = 0`。我有更多类似的问题，但我希望我能够从这个问题中汲取逻辑并自己解决一些其他问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:54:56.910

编辑：正则表达式的方式是：

```
match.regex <- function(x,data){
  xs <- paste(x,collapse="_")
  dats <- apply(data,1,paste,collapse="_")
  sum(grepl(xs,dats))
}

> match.regex(c(1),dat)
[1] 3
> match.regex(c(0,0,0),dat)
[1] 1
> match.regex(c(1,2),dat)
[1] 2
> match.regex(5,dat)
[1] 0 
```

令人惊讶的是，这个方法比这里给出的其他方法快，并且是我下面的解决方案的两倍，无论是在小型数据集还是大型数据集上。正则表达式显然得到了优化：

```
> benchmark(matching(c(1,2),dat),match.regex(c(1,2),dat),replications=1000)
                       test replications elapsed relative 
2 match.regex(c(1, 2), dat)         1000    0.15      1.0 
1    matching(c(1, 2), dat)         1000    0.36      2.4 
```

* * *

一种可以立即为您提供数字并更加矢量化的方法如下：

```
matching.row <- function(x,row){
    nx <- length(x)
    sid <- which(x[1]==row)
    any(sapply(sid,function(i) all(row[seq(i,i+nx-1)]==x)))
}

matching <- function(x,data)
  sum(apply(data,1,function(i) matching.row(x,i)),na.rm=TRUE) 
```

在这里，您首先创建一个带有索引的矩阵，该索引将窗口移动到与您要匹配的向量长度相同的行上。然后对照向量检查这些窗口。每一行都遵循这种方法，返回 TRUE 的行的总和就是你想要的。

```
> matching(c(1),dat)
[1] 3
> matching(c(0,0,0),dat)
[1] 1
> matching(c(1,2),dat)
[1] 2
> matching(5,dat)
[1] 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T12:36:21.007

你需要`apply`一个函数来处理你的数据行：

```
apply(dat, MARGIN = 1, FUN = is.sub.array, x = c(2,1)) 
```

`dat`你的data.frame在哪里，并且`is.sub.array`是一个检查是否`x`包含在更大向量中的函数（实际上是你的data.frame的行）。

我不知道有任何可用的此类`is.sub.array`功能，所以我将如何编写它：

```
is.sub.array <- function(x, y) {
    j <- rep(TRUE, length(y))
    for (i in seq_along(x)) {
        if (i > 1) j <- c(FALSE, head(j, -1))
        j <- j & vapply(y, FUN = function(a,b) isTRUE(all.equal(a, b)),
                        FUN.VALUE = logical(1), b = x[i])
    }
    return(sum(j, na.rm = TRUE) > 0L)
} 
```

（ using 的优点`all.equal`是它可以用来比较`numeric`向量，这是正则表达式无法做到的。）

这里有一些例子：

```
apply(dat, 1, is.sub.array, x = c(1, 2))
# [1]  TRUE FALSE  TRUE
apply(dat, 1, is.sub.array, x = c(0, 0, 0))
# [1]  TRUE FALSE FALSE
apply(dat, 1, is.sub.array, x = as.numeric(c(NA, NA)))
# [1] FALSE  TRUE  TRUE 
```

**注意**：`all.equal`对您的数据类型很敏感，因此请小心使用`x`与您的数据类型相同（整数或数字）的 an。

# php - CGridView Yii 添加分页文本框

> ID：13951198
> 
> 赞同：0
> 
> 时间：2012-12-19T11:16:29.337
> 
> 标签：php, gridview, yii, pagination

我有一个使用 Yii 框架`CGridView`小部件创建的网格。
如何在网格视图中添加将用户输入作为页码的“转到页面”字段？

有没有自动化的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:46:13.627

我不认为有任何内置的方法。

我最初的想法是这应该很容易实现，但仅在客户端执行此操作可能非常困难。用于拉取页面的 JavaScript API 的方式并不多，也没有在客户端上构建链接的方式。当页面被提供时，这一切都在服务器上完成，所以这可能是这个功能必须去的地方。

也许您应该首先扩展 CLinkPager 以在初始页面渲染上输出所有可能的页码及其链接。然后它可以作为 JSON 存储在 CLinkPager 基本元素的数据属性中，并在页面中使用？

使用新 url 更新网格视图的实际客户端代码应该不会太难在某处硬塞，也许将分页按钮`href`属性之一换成您要加载的属性，然后替换前一个？

我认为除非您想进一步扩展 CLinkPager 以包含 JS API，否则它仍然会归结为 hack？

# c# - XSD:Pattern 和 C# Regex 之间有区别吗？

> ID：13951201
> 
> 赞同：6
> 
> 时间：2012-12-19T11:16:36.350
> 
> 标签：c#, regex, xsd

由于许多限制性原因，我无法真正深入了解我的项目。

本质上，我试图在序列化对象之前对其进行预验证，然后根据模式对其进行验证。架构对名称进行了验证，我知道这并不理想，最好不要验证名称 - 但我似乎无法为架构尝试执行的操作复制有效的正则表达式。

```
<xsd:simpleType name="CharsetD">
  <xsd:restriction base="xsd:string">
    <xsd:pattern value="[A-Za-z \-&apos;]*"/>
  </xsd:restriction>
</xsd:simpleType>

<xsd:element minOccurs="0" maxOccurs="2" name="Fore">
  <xsd:simpleType>
    <xsd:restriction base="CharsetD">
      <xsd:minLength value="1"/>
      <xsd:maxLength value="35"/>
      <xsd:pattern value="[A-Za-z].*"/>
    </xsd:restriction>
  <xsd:simpleType>
</xsd:element> 
```

我只是认为在上述情况下，我可以尝试使用`xsd:pattern`for `charset`。

我尝试使用`[A-Za-z \-&apos;]*`which 返回一个名称，例如`Luke2`valid，但模式验证表明它不是因为它包含一个数字。

我的问题是，如何在单个`c#`正则表达式中复制上述内容？此外，模式模式的运行方式与我使用它的方式相比有什么不同`.NET`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:02:07.100

我发现了这个问题，尽管我没有真正广泛使用过`XML Schema`

**区别**

该`CharsetD`类型不仅仅使用模式，因为仅此一项不足以验证带有数字的名称，所以当我尝试仅使用模式时 - 它允许使用数字。然而，类型上有一行限制数字，因此模式返回正则表达式没有的错误的原因。

```
<xsd:restriction base="xsd:string"> 
```

**解决方案**

我创建了一个不同的单个正则表达式来满足`string`我的架构中应用的限制。

```
^[\p{L} \.\-]+$ 
```

# mysql - 将查询保存在变量中然后添加 where 子句？

> ID：13951203
> 
> 赞同：0
> 
> 时间：2012-12-19T11:16:43.997
> 
> 标签：mysql, variables, subquery

我对这个查询有点问题。它工作得很好，但我是 DRY 的粉丝，这看起来很容易改进：

```
SELECT
    users.*,
    (
        SELECT user_information.value
        FROM users
        LEFT JOIN user_information
        ON user_information.userid = users.id
        WHERE user_information.name = 'account_name'
    ),
    (
        SELECT user_information.value
        FROM users
        LEFT JOIN user_information
        ON user_information.userid = users.id
        WHERE user_information.name = 'account_code'
    ),
    (
        SELECT user_information.value
        FROM users
        LEFT JOIN user_information
        ON user_information.userid = users.id
        WHERE user_information.name = 'account_id'
    ),
WHERE ... 
```

那个部分：

```
SELECT user_information.value
FROM users
LEFT JOIN user_information
ON user_information.userid = users.id 
```

在每个子查询中完全一样（将来会有大约 10 个子查询），但是 where 子句每次都会改变。是否可以将其保存在一个变量中，然后在mysql中附加不同的where子句时使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:20:56.953

您可以将`user_information`表加入查询并对结果进行分组：

```
SELECT   users.*,
         GROUP_CONCAT(IF(i.name = 'account_name', i.value, NULL)),
         GROUP_CONCAT(IF(i.name = 'account_code', i.value, NULL)),
         GROUP_CONCAT(IF(i.name = 'account_id'  , i.value, NULL))
FROM     users LEFT JOIN user_information AS i ON i.userid = users.id
WHERE    ...
GROUP BY users.id 
```

# android - 基于密度的谷歌播放过滤

> ID：13951208
> 
> 赞同：4
> 
> 时间：2012-12-19T11:16:56.973
> 
> 标签：android, google-play

我正在开发一个 android 游戏（基于 Canvas），它具有大量资源（*即拥有一个包含所有密度资源的单个 apk 是不可行的*）。所以我决定开发多个apk。

浏览了有关多种 apk 支持的 Google 资源，发现 Google Play 可以根据带有`<supports-screens/>`元素的屏幕尺寸（小、正常、大、超大）过滤 apk。并且对于过滤屏幕密度是可用的，但建议不要使用它。我的问题是如何根据设备密度或设备大小、密度组合过滤 apk？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:35:57.203

检查 support-screens AndroidManifest.xml 属性

[http://developer.android.com/guide/topics/manifest/supports-screens-element.html](http://developer.android.com/guide/topics/manifest/supports-screens-element.html)

```
 <supports-screens android:resizeable=["true"| "false"]
              android:smallScreens=["true" | "false"]
              android:normalScreens=["true" | "false"]
              android:largeScreens=["true" | "false"]
              android:xlargeScreens=["true" | "false"]
              android:anyDensity=["true" | "false"]
              android:requiresSmallestWidthDp="integer"
              android:compatibleWidthLimitDp="integer"
              android:largestWidthLimitDp="integer"/> 
```

# c++ - OpenCV 或 Boost 智能指针

> ID：13951210
> 
> 赞同：9
> 
> 时间：2012-12-19T11:17:06.533
> 
> 标签：c++, image-processing, boost, opencv, smart-pointers

我有一个扩展的图像处理项目，它的大部分功能都严重依赖于 OpenCV 库，尽管我也使用了一些增强功能。

我想开始使用智能指针来替换一些开始导致问题的原始指针。我的问题是使用哪种类型的智能指针，我的主要选择（我认为）是 OpenCV`cv::Ptr`或 boost 变体之一。

我意识到有[许多](https://stackoverflow.com/questions/569775/smart-pointers-boost-explained)[问题](https://stackoverflow.com/questions/13267908/what-is-the-difference-between-boost-smart-pointers-and-std-smart-pointers)可以解释每个提升指针之间的差异，但我希望有人可以解释如何`cv::Ptr`与它们进行比较并提出任何建议？

编辑 - 我从类似于 boost的[OpenCV 文档](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=ptr#Ptr)中注意到，本质区别是需要哪些库/包含文件？`Ptr``shared_ptr`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-30T05:32:08.797

对于我在 OpenCV 文档中看到的内容，这是一个引用计数的智能指针，本质上与`boost::shared_ptr`. 甚至它对引用计数使用原子操作。

我会根据可移植性和互操作性做出选择。

1.  您的系统是否会被移植到其他地方并且肯定依赖于 OpenCV 而不是依赖于 OpenCV `boost`？`cv::Ptr`然后，如果您可以避免提升并摆脱依赖，请坚持使用 OpenCV 。

2.  `boost::shared_ptr`与 OpenCV 的其余部分配合得很好吗？如果你有从 OpenCV 库返回 cv::Ptr 的东西，在这些情况下最好坚持使用 cv::Ptr，因为如果混合使用两种指针，引用计数将被错误处理，并且资源可能会过早地被破坏.

3.  你要坚持`boost`移植项目的任何地方吗？然后，坚持`boost::shared_ptr`什么时候可以做，它更标准，人们知道它并且会立即理解你的代码。更新：在 C++11 中，你有 std::shared_ptr，如果你能负担得起，这相当于没有依赖关系，所以你可以在这种情况下使用 std::shared_ptr 并摆脱 boost。

顺便说一句，有一种混合 boost 和 std 共享指针的技术，可以正确地保持引用并且可能对某人有用。看到这个问题，它也可能与混合其他类型的引用计数指针有关：[Conversion from boost::shared_ptr to std::shared_ptr?](https://stackoverflow.com/questions/6326757/conversion-from-boostshared-ptr-to-stdshared-ptr)

以我的经验，当您移植某些东西时，依赖项越少越好，或者某些平台的编译可能是地狱。因此，如果需要考虑指针与库的互操作性，请根据可移植性做出选择。

# facebook - 这些facebook页面有什么区别

> ID：13951211
> 
> 赞同：-1
> 
> 时间：2012-12-19T11:17:15.890
> 
> 标签：facebook, facebook-apps, facebook-page, facebook-canvas

在开发 facebook 应用程序时，该过程似乎涉及三个不同的页面。这是页面类型 A、B 和 C 的屏幕截图：

![三种不同类型的 Facebook 页面的屏幕截图](../Images/36754847d7a65bb605ef473f850953e6.png)

页面类型 B 似乎非常重要，因为它可以从 A 链接到，并且它允许 LIKE ......你如何创建页面 B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:22:10.760

*   屏幕 A 是 Facebook 页面
*   屏幕 B 是标签应用程序。（从页面内加载的应用程序）
*   屏幕 C 是画布应用程序。（应用程序与页面分开加载）

标签应用与页面的关系更紧密。签名请求中有一些数据直接连接到页面。最好的例子是当前用户是否喜欢（所谓的 fangate 就是这样实现的）。

创建不同应用类型的步骤： 创建应用时，有 2 个字段部分。页面标签 URL 和画布 URL。

如果需要像屏幕 B 这样的**选项卡应用程序**（它可以是选项卡应用程序和画布应用程序），您应该提供页面选项卡的 url 并另外使用正确的值转到此链接： [https ://www.facebook.com/dialog/pagetab ?app_id=YOUR_APP_ID&display=popup&next=YOUR_URL](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&display=popup&next=YOUR_URL)

在那里，您可以选择您希望您的应用程序在哪个页面上显示为收藏夹中的应用程序，然后您可以根据需要重新排序。

例如： [https ://www.facebook.com/dialog/pagetab?app_id=123672637&display=popup&next=http://myapp.myserver.com/](https://www.facebook.com/dialog/pagetab?app_id=123672637&display=popup&next=http://myapp.myserver.com/)

要在 Canvas URL 之外创建**画布应用程序**，您应该填写命名空间字段。

之后，您可以在[https://apps.facebook.com/my_chosen_namespace/上访问您的应用](https://apps.facebook.com/my_chosen_namespace/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:17:59.297

第二个和第三个是 facbook canvas 应用程序

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T11:20:30.140

您需要创建自定义选项卡。使用类似[https://apps.facebook.com/static_html_plus/](https://apps.facebook.com/static_html_plus/)

# iphone - 模拟指标。视网膜3.5全屏不工作

> ID：13951214
> 
> 赞同：1
> 
> 时间：2012-12-19T11:17:22.670
> 
> 标签：iphone, ios6, simulation, autolayout

如果我在视图控制器/模拟指标中设置视网膜 3.5 全屏，如果我在 iPhone（视网膜 3-5 英寸）中模拟，它可以正常工作，但如果我在 iPhone（视网膜 4 英寸）中尝试，则没有 2 个黑条顶部和底部，我的视野被拉长了，它填满了整个视网膜 4 英寸。自动布局开启！我没有在 Xcode 中修改任何内容。正因为如此，我重新安装了我的 macbook 和 xcode，但它仍然无法正常工作。

我想要什么：我不想要一个自动缩放应用程序，只有一个 3.5 英寸的应用程序，如果我在 iPhone 5 上运行这个应用程序，它仍然可以正常工作，顶部和底部有 2 个黑色条带，没有失真。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:27:34.163

你有一个 Default-568h@2x.png 图像作为 Retina 4 英寸设备的加载屏幕吗？如果是这样，请将其删除，您应该会发现您的应用程序仅作为 3.5 英寸应用程序运行。

# ruby - 水豚有没有其他触发方法？

> ID：13951230
> 
> 赞同：4
> 
> 时间：2012-12-19T11:18:48.097
> 
> 标签：ruby, capybara, mouseover

我尝试了以下代码：

```
page.find("#{element_name}").trigger(:mouseover) 
```

我收到错误：

```
Capybara::NotSupportedByDriverError (Capybara::NotSupportedByDriverError) 
```

我正在使用硒网络驱动程序。

根据以下 URL 触发未在 selenium web-driver 中实现： [Unable to trigger mouse event in Capybara test](https://stackoverflow.com/questions/6725048/problem-with-triggering-mouse-event-in-capybara-test)

是否有任何替代方法来执行鼠标悬停元素而不是在水豚中使用触发器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T10:45:12.177

`page.execute_script(some_javascript)`, 特别是`some_javascript = "$(selector).trigger(event)"`. 这将适用于所有支持 js 的驱动程序。请注意，它`page.evaluate_script(some_javascript)`也可以工作，但不能保证也不鼓励（`evaluate_script`仅在脚本返回原语时使用）。

我的意思是：执行你想要的（触发事件）的客户端脚本。

# svn - 是否可以在 Subversion 中查看与给定问题编号相关的特定文件的所有文件更改？

> ID：13951231
> 
> 赞同：1
> 
> 时间：2012-12-19T11:18:48.083
> 
> 标签：svn, version-control, tortoisesvn

例如，我有一个文件“Example.cs”，我想查看在修订版 800 和 1200 之间对此文件所做的所有更改。但是比较这两个修订版也会显示我不感兴趣的更改，因为我只想查看与在该文件上提交时输入的特定问题编号相关的代码更改。

有没有办法使用 Subversion/TortoiseSVN 查看这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T15:00:58.817

选择 Blame 时，输入您要比较的修订号，但在我的 TortioseSVN 版本上，底部有一个名为“使用文本查看器查看责备”的复选框。这将在您的本地文本查看器中打开责备文件。

列用空格分隔，因此您可以在 MS Excel 中轻松打开它并将数据分类到列中。

最后为每一列添加一个过滤器，在“修订”列上，您可以勾选所有要查看更改的修订

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:57:53.823

用于救援的 Bash 脚本：

```
#!/bin/bash

FILE=file
ISSUE="#12"

for rev in $(svn log ${FILE} | grep ^r[0-9] | sed 's/r\([0-9]*\)\ .*/\1/g')
do
  svn log -r${rev} | tail -n +3 | head -n -1 | grep "${ISSUE}" > /dev/null
  if [ $? -eq 0 ]; then
    svn diff ${FILE} -c${rev}
  fi
done 
```

上面的脚本搜索文件 FILE 的日志，存在于工作副本中，在提交消息中查找字符串 ISSUE 并将该修订的差异打印到命令行。

# java - Log4j 附加器大小

> ID：13951234
> 
> 赞同：0
> 
> 时间：2012-12-19T11:18:55.410
> 
> 标签：java, logging, log4j

我的 appender 大小在 log4j appneder 中设置为 MB，但是当我将其更改为 KB 时它不起作用。我可以在 KB 中设置 log4j appender 大小吗？

像

```
log4j.appender.processAppender.MaxFileSize=20KB 
```

如果是，那么是否需要添加另一个属性？我的文件看起来像：

```
log4j.rootLogger=DEBUG,FileAppender
log4j.logger.process=debug, processAppender
log4j.appender.processAppender=org.apache.log4j.RollingFileAppender 
log4j.appender.processAppender.File=D:/logs/process.log

log4j.appender.processAppender.Append=true
log4j.appender.processAppender.MaxFileSize=20KB
log4j.appender.processAppender.MaxBackupIndex=3
log4j.appender.processAppender.layout=org.apache.log4j.PatternLayout

log4j.appender.processAppender.layout.ConversionPattern=%d %-5p - %m%n 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:27:44.790

我用过下面的代码

```
 log4j.appender.file=org.apache.log4j.RollingFileAppender
    log4j.appender.file.File=AgentWorkstation.log

    log4j.appender.file.Append=true
    log4j.appender.A1.MaxFileSize=10KB

    log4j.appender.A2.MaxBackupIndex=3

    log4j.appender.file.layout=org.apache.log4j.PatternLayout
    log4j.appender.file.layout.ConversionPattern=%d{dd MMM yyyy HH:mm:ss,SSS}
    %-5p (%C{1}:%L) - %m\n 
```

它对我来说非常有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:25:45.470

> 设置输出文件在转存到备份文件之前允许达到的最大大小。在配置文件中，MaxFileSize 选项采用 0 - 2^63 范围内的长整数。您可以使用后缀“KB”、“MB”或“GB”指定值，以便将整数解释为分别以千字节、兆字节或千兆字节表示。例如，值“10KB”将被解释为 10240。

[参考](http://grepcode.com/file/repository.springsource.com/org.apache.log4j/com.springsource.org.apache.log4j/1.2.15/org/apache/log4j/RollingFileAppender.java#RollingFileAppender.setMaxFileSize%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:26:09.323

是的，您可以将 KB 设置为一个单位，并且您的配置似乎是正确的。这是来自[IBM 网页](http://publib.boulder.ibm.com/infocenter/ctm1/v9r4m1/index.jsp?topic=/com.ibm.swg.im.cognos.tm1_op.9.4.1.doc/tm1_op_id4494ConfiguringandEnablingLogging_N160682.html)的解释。

> 指定允许日志文件在磁盘上占用的最大文件大小。
> 
> 默认大小为 100 MB。
> 
> 使用以下格式：
> 
> log4j.appender.S1.MaxFileSize=SizeUnits
> 
> 在哪里：
> 
> 大小是文件大小的数值。单位可以是 KB、MB 或 GB。例如，要将日志文件大小限制为 10 MB，请输入以下内容：
> 
> log4j.appender.S1.MaxFileSize=10 MB
> 
> 如果 MaxBackupIndex 参数设置为 1 或更大，则日志记录过程会在日志文件达到 MaxFileSize 时自动创建备份文件。备份文件的总数由 MaxBackupIndex 选项决定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T03:53:27.857

您应该更改 Appender 下的 3 个属性。

```
 log4j.appender.CARBON_LOGFILE.Append=true
    log4j.appender.CARBON_LOGFILE.MaxFileSize=10MB
    log4j.appender.CARBON_LOGFILE.MaxBackupIndex=20 
```

# azure - 使用 Azure .NET 4.5、MVC4 的移动布局

> ID：13951236
> 
> 赞同：0
> 
> 时间：2012-12-19T11:19:18.923
> 
> 标签：azure, asp.net-mvc-4

我有一个 MVC 4 应用程序并添加了移动视图。除了 _Layout.Mobile.cshtml 之外，大多数设备都支持移动视图。当我在各种模拟器上本地运行时，移动布局被正确拾取，但是当我在 azure 上运行时，移动布局没有被拾取。但是，其他移动视图被正确拾取。

此链接讨论了类似的问题和 .NET 4.0 中的解决方法。

[在 asp.net mvc 4 中具有 ipad 桌面视图的移动显示模式](https://stackoverflow.com/questions/12254604/displaymode-for-mobile-with-desktop-view-for-ipad-in-asp-net-mvc-4)

这个问题在 .NET 4.5 中是否仍然存在？

当我尝试使用 .NET 4.5 应用解决方法时，我收到消息

```
Microsoft.AspNet.Mvc.FixedDisplayModes.1.0.0\lib\net40\Microsoft.Web.Mvc.FixedDisplayModes.dll could not be found in your workspace, or you do not have permission to access it. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:20:12.020

我们在 Azure 上的 ASP.NET 4.5 上运行 MVC4，没有解决方法/补丁，也没有问题。您可以在 www.drivetime-atlanta.com 上看到移动切换，_Layout.Mobile.cshtml 和 index.mobile.cshtml 都很好。

# ios - 使用 RestKit 0.20 进行对象映射

> ID：13951238
> 
> 赞同：1
> 
> 时间：2012-12-19T11:19:34.790
> 
> 标签：ios, json, restkit

我想使用 RestKit 0.20 反序列化以下 JSON 响应，但它失败并且腿被定义为`NSSet`并且总是返回`nil`。这段代码有什么问题？

```
{
"Flights": [{
    "Id": "1",
    "Price": 100,
    "Duration": 60,
    "RemainingSeats": 10,
    "Legs": [{
        "Airline": "Tukish Airlines",
        "FlightNumber": "A111",
        "TakeOffDate": "\/Date(1355915405327)\/",
        "TakeOffAirport": "AHL",
        "LandingDate": "\/Date(1356001805327)\/",
        "LandingAirport": "ERC",
        "Duration": 60,
        "TransportDuration": 0
    }]
}]
}

RKObjectMapping* legMapping = [RKObjectMapping mappingForClass:[Leg class]];
[legMapping addAttributeMappingsFromDictionary:@{
 @"Airline": @"airline",
 @"FlightNumber": @"flightNumber",
 @"TakeOffDate": @"takeOffDate",
 @"TakeOffAirport": @"takeOffAirport",
 @"LandingDate": @"landingDate",
 @"LandingAirport": @"landingAirport",
 @"Duration": @"duration",
 @"TransportDuration": @"transportDuration",
 }];

RKObjectMapping* flightMapping = [RKObjectMapping mappingForClass:[Flight class]];
[flightMapping addAttributeMappingsFromDictionary:@{
 @"Id": @"id",
 @"Price": @"price",     
 @"Duration": @"duration",     
 @"RemainingSeats": @"remainingSeats"
 }];

RKRelationshipMapping *flightLegsMapping = [RKRelationshipMapping relationshipMappingFromKeyPath:@"Legs" toKeyPath:@"legs" withMapping:legMapping];
[flightMapping addRelationshipMappingWithSourceKeyPath:@"legs" mapping:flightLegsMapping.mapping];

RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:flightMapping pathPattern:nil keyPath:@"Flights" statusCodes:RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful)];

NSString *isRoundTripString = isRoundTrip ? @"true" : @"false";

NSDateFormatter *gmtFormatter = [[NSDateFormatter alloc] init];
[gmtFormatter setDateFormat:@"yyyy-MM-dd"];
NSString *departureDateString = [gmtFormatter stringFromDate:departureDate];
NSString *returnDateString = [gmtFormatter stringFromDate:returnDate];

NSString *directFlightsOnlyString = directFlightsOnly ? @"true" : @"false";

NSString *urlString = [NSString stringWithFormat: @"http://parallels-win7:8132/flight/flights?isRoundTrip=%@&departureAirport=%@&arrivalAirport=%@&departureDate=%@&returnDate=%@&adultCount=%d&childCount=%d&babyCount=%d&oldPeopleCount=%d&studentCount=%d&directFlightsOnly=%@", isRoundTripString, departureAirport, arrivalAirport, departureDateString, returnDateString, adultCounts, childCount, babyCount, oldPeopleCount, studentCount, directFlightsOnlyString];

NSURL *url = [NSURL URLWithString: urlString];

NSURLRequest *request = [NSURLRequest requestWithURL:url];
RKObjectRequestOperation *objectRequestOperation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[ responseDescriptor ]];
[objectRequestOperation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    success(mappingResult.array);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    failure(error);
}];

[objectRequestOperation start]; 
```

`mappingResult.array`满了，但腿是空的。

# android - Android默认微调器列表选择颜色随机变化

> ID：13951246
> 
> 赞同：2
> 
> 时间：2012-12-19T11:20:13.513
> 
> 标签：android, android-listview, android-spinner, android-drawable

我正在尝试在 Android 中实现一个下拉列表。

这是`Spinner`我在 layout.xml 中使用的

```
 <Spinner
           android:scrollbars="vertical"
           android:id="@+id/spinner1"
           android:layout_width="125dp"
           android:layout_height="wrap_content"
           android:background="@android:color/transparent"
           android:prompt="@string/Category"

           /> 
```

在`MainActivity.java`，我正在使用以下代码，

```
spinner=(Spinner)findViewById(R.id.spinner1); 
ArrayAdapter<String> spinner_adapter= new ArrayAdapter<String>(this,R.layout.spinner_layout,category_items);
spinner_adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(year_adapter); 
```

这是我的**spinner_layout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
  <TextView xmlns:android="http://schemas.android.com/apk/res/android"
              android:id="@+id/spinnerTarget"
              android:layout_width="180dp"
              android:layout_height="40dp"
              android:textSize="18sp"         
              android:textColor="@drawable/selector_text_color"
              android:background="@drawable/selector_background"
              android:gravity="center"/> 
```

**选择器文本颜色.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >            
   <item android:state_pressed="true" android:color="#F8BB00"/>    
   <item android:state_focused="true" android:color="#F8BB00"/>        
   <item android:state_focused="false" android:color="#FFFFFF"/>
   <item android:state_pressed="false" android:color="#FFFFFF"/>
   <item android:color="#F8BB00"/>  
</selector> 
```

**选择器背景.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" android:padding="0dp"
    >
    <solid android:color="#3F4040"/>
    <corners 
    android:radius="8dp"
    />
</shape> 
```

但是，有时微调器列表项选择的颜色会发生变化。 ![在此处输入图像描述](../Images/f0fa09656296c8c00ac93fdbdd622804.png) ![在此处输入图像描述](../Images/1f211e4f47d14331d1cd47396f5528cc.png)

不知道什么时候能正常显示。随机选择颜色正在改变。有时选择显示为第一张图像，有时显示为第二张图像。

为什么会发生这种情况？如何解决这个问题？

# ruby-on-rails - 将另一个项目的 ID/变量添加到当前项目并添加到数据库

> ID：13951251
> 
> 赞同：1
> 
> 时间：2012-12-19T11:20:25.913
> 
> 标签：ruby-on-rails, database, variables

我正在创建一个带有 CMS 的网站，您可以在其中放置“类别”的“菜单卡”。我被困在将菜单卡的 ID 添加到类别数据库表中的过程中。

我认为可行的方式如下：

在数据库中的类别表

```
create_table "categories", :force => true do |t|
t.datetime "created_at",  :null => false
t.datetime "updated_at",  :null => false
t.string   "name"
t.integer  "menucard_id"
end 
```

在菜单卡索引中：

```
<%= link_to("menucard", { :action => 'show', :id => menucard.id}) %> 
```

这给了我一个这样的 URL：“http://localhost:3000/menucards/1”

这是菜单卡的显示：

```
<%= link_to("Categorie toevoegen", 
    {:controller => 'categories', 
        :action => 'new', 
        :menucard_id => '@current_menucard'}, 
        :class => 'btn btn-green') 
%> 
```

在 application_controller 我这样定义 current_menucard ：

```
def current_menucard
    current_menucard = Menucard.find(params[:id])
end 
```

如果我按使用类别中的链接到，则 URL 为“http://localhost:3000/categories/new?menucard_id=%40current_menucard”

我看到使用 :menucard_id => '@current_menucard' 并没有真正起作用。我被困在这部分。感谢您的帮助！

了解更多信息：

类别控制器：

```
<div class="form-area">
<%= form_for([@category], :url => { :action => 'create'}, :html => { :id => "js-editor-page"}) do |category| %>
    <label for="name">
        <h2>Naam</h2>
        <%= category.text_field :name, :class => "full", :placeholder => "Wat is de naam van deze categorie?" %>
    </label>
    <%= category.hidden_field :menucard_id, :value => current_menucard %>
</div><!-- .form-area -->
<aside class="form-actions">
    <%= category.submit "Opslaan", :class => "btn btn-green" %>
<% end %> 
```

**更新**

我用 MurifoX 的答案更新了我的代码。现在 menucard_id 仍未在数据库中更新。如您所见，我使用隐藏字段来传递 current_menucard 的值，但它给了我以下信息：

```
Couldn't find Menucard without an ID 
```

但后来在错误页面中，我确实得到了正确的参数：

```
Parameters:

{"menucard_id"=>"67"} 
```

为什么不更新了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:33:51.330

在您的应用程序控制器中，定义您正在使用该方法作为帮助程序

```
helper_method :current_menucard
def current_menucard
  mc = Menucard.find(params[:id])
  mc.id
end 
```

在您看来，使用返回给您的方法和整数

```
<%= link_to("Categorie toevoegen", 
 {:controller => 'categories', 
  :action => 'new', 
  :menucard_id => current_menucard}, 
  :class => 'btn btn-green') 
%> 
```

我相信这可能会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:48:04.430

更改：menucard_id

```
<%= link_to("Categorie toevoegen", 
{:controller => 'categories', 
    :action => 'new', 
    :menucard_id => '@current_menucard'}, 
    :class => 'btn btn-green') 
%> 
```

到::id

```
<%= link_to("Categorie toevoegen", 
{:controller => 'categories', 
    :action => 'new', 
    :id => '@current_menucard'}, 
    :class => 'btn btn-green') 
%> 
```

并在您的类别控制器新操作中添加这一行：

```
@menucard = Menucard.find(params[:id]) 
```

现在，您可以在新类别视图中使用 @menucard 变量并将值添加到隐藏字段中。这应该工作

# android - 小部件中的动画 .png 图像

> ID：13951252
> 
> 赞同：7
> 
> 时间：2012-12-19T11:20:28.770
> 
> 标签：android, android-widget, android-animation, android-imageview

## 问题描述

* * *

我正在为 Android 编写一个***简单的小部件应用程序***，在我的小部件 I 布局`ImageViewRefresh`中，我可以控制我设置的刷新图像图片（下面的绿色图像）。

## 问题

* * *

在某些时候，我按下`ImageViewRefresh` ***我的小部件中的一个按钮***，应用程序开始从 Internet 下载一些内容，而应用程序在后台下载数据我想做一些动画，比如旋转我的图像（下面的绿色图像）。我可以这样做吗？

## 研究

* * *

我已经阅读了一些关于图像动画的帖子，但我只能在应用程序中找到 .gif 图片的动画，这是一种旋转图像的方法，例如制作一些旋转的图像并更改它们或其他东西。

## 代码示例

这是我的图像中的一部分代码`layout`没有旋转。为什么 ？（我的图像是简单的 .png 图像）

```
<ProgressBar
        android:id="@+id/progressBarRefresh"
        android:layout_width="36dp"
        android:indeterminateDrawable="@drawable/arrow_refresh"
        android:layout_height="36dp"
        android:layout_alignTop="@+id/imageViewArrowNext"
        android:layout_marginRight="70dp"
        android:layout_toLeftOf="@+id/textViewAutherName"
        android:indeterminate="true" /> 
```

***我要旋转的图像。***

![旋转图像](../Images/974b3aadea4671cf2da13f9dc9632127.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:38:59.963

**编辑：**我会提前道歉，但我相信我的回答可能会误导问题：

*   经测试，系统不会自动旋转可绘制对象，但是您可以更改样式来执行此操作（老实说，我不记得了，这是 2 年前在 Eclair 上的），但是您可以尝试找到它。
*   下面的答案有效（因为它已经过测试）但不适用于自定义可绘制对象，它不会旋转它们。
*   对于自定义动画可绘制请参阅此处：[ProgressBar/ProgressDialog 的自定义可绘制](https://stackoverflow.com/questions/2819778/custom-drawable-for-progressbar-progressdialog)
*   但正如其中一条评论所提到的，应用程序小部件不应该运行动画[有没有办法在 Home Widget 上制作动画？](https://stackoverflow.com/questions/2565023/is-there-a-way-to-animate-on-a-home-widget)

* * *

原帖：

**不要尝试自己为小部件设置动画**

使用`ProgressBar`它是不确定的并用于`setIndeterminateDrawable(Drawable d);`设置要旋转的图像。（或者只留下看起来也很漂亮的本地人）

**编辑：** 这是代码的样子：

```
// in your widget update method:
View v = LayoutInflater.from(context).inflate(R.layout.widget, null);
ProgressBar pb = (ProgressBar) v.findViewById(R.id.progressBar1);
pb.setIndeterminateDrawable(R.drawable.widget_processing); 
```

这是类似这样的 XML 的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/RelativeLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView1"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imageView1"
    android:layout_alignLeft="@+id/textView1"
    android:text="Small Text"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<ProgressBar
    android:id="@+id/progressBar1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:indeterminate="true" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T11:33:30.220

在 Android 中为图像设置动画的最佳方式是使用 AnimationDrawable 系统。为此，您需要在您的可绘制文件夹之一中使用类似于下面的 xml。

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="true">
    <item android:drawable="@drawable/image1" android:duration="200" />
    <item android:drawable="@drawable/image2" android:duration="200" />
    <item android:drawable="@drawable/image3" android:duration="200" />
</animation-list> 
```

其中 image1、image2 和 image3 是资源中不同的可绘制对象，每个都代表图像的不同状态。

要创建图像，您只需使用 Gimp 或 Photoshop 打开图像，然后将其旋转几度并将其导出为新图像，然后重复。

或者，您可以使用以下代码来旋转 ImageView。首先在你的 res 文件夹下创建一个“anim”文件夹，然后添加一个 rotate.xml 文件，内容如下：

```
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:interpolator="@android:anim/linear_interpolator"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:duration="1000"
    android:startOffset="0"
/> 
```

然后像这样导入并启动动画：

```
Animation rotation = AnimationUtils.loadAnimation(this, R.anim.rotation);
rotation.setRepeatCount(Animation.INFINITE);
imageView.startAnimation(rotation); 
```

# backbone.js - 如何使用 Backbone.StateManager？

> ID：13951256
> 
> 赞同：4
> 
> 时间：2012-12-19T11:20:34.697
> 
> 标签：backbone.js, state-machine

我正在尝试探索 Backbone.StateManager 但在这方面找不到太多材料。我已经阅读[了文档](https://github.com/crashlytics/backbone.statemanager)，但没有使用它的简单示例。

我做了一个这样的例子

```
(function($) {

    var UserInputView  = Backbone.View.extend({
        states: {
            foo: {
                enter: function () {
                    alert('hi');
                    return console.log('enter bar');
                },
                exit: function () {
                    alert('hi');
                    return console.log('exit foo');
                },
                transitions: {
                    transitions: {
                        'onBeforeExitTo:anotherState': function () {
                            alert('hi');
                        },
                        'onExitTo:anotherState': function () {
                            alert('hi');
                        },
                        'onBeforeEnterFrom:anotherState': function () {
                            alert('hi');
                        },
                        'onEnterFrom:anotherState': function () {
                            alert('hi');
                        }
                    }
                }
            },
            bar: {
                enter: function () {
                    alert('hi');
                    return console.log('enter bar');
                },
                exit: function () {
                    alert('hi');
                    return console.log('exit bar');
                },

            }
        },
        initialize: function () {
            var statemanager;

            alert('intialized');
            console.log(this.states);
            statemanager = Backbone.StateManager.addStateManager(this.states);

            return statemanager;
        },
        render: function () {

            alert('render');
        }
    });
    var user = new UserInputView();

})(jQuery); 
```

在所有这些代码中，只有初始化功能起作用。其余代码不起作用。请指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:49:28.573

基本上，您的代码错过了状态更改和`Backbone.StateManager.addStateManager`. 如文档中所述，将[Backbone.StateManager 与对象一起使用](https://github.com/crashlytics/backbone.statemanager#using-with-objects)

> StateManager 提供了一种简单的方法，可以轻松地将 StateManager 添加到任何对象。`StateManager.addStateManager`接受一个目标对象和一组可选的选项，读取目标上定义的任何状态，并创建一个新的 StateManager。它还在 target 上设置了许多方法，包括`triggerState`、`getCurrentState`和对 StateManager 的引用`target.stateManager`。

这意味着目标`Backbone.StateManager.addStateManager`应该是您的对象实例，并且您可以开始更改状态`model.triggerState`。例如 ：

```
var UserInputView  = Backbone.View.extend({
    states: {
        // your states
    },
    initialize: function () {
        var statemanager;
        statemanager = Backbone.StateManager.addStateManager(this);
    }
});

var user = new UserInputView();
user.triggerState('foo'); 
```

基于您的代码的演示，用于[可视化一些状态操作](http://jsfiddle.net/nikoshr/39qXv/)

# iphone - xcode iphone模拟器视图小于情节提要

> ID：13951258
> 
> 赞同：6
> 
> 时间：2012-12-19T11:20:35.567
> 
> 标签：iphone, xcode, size, storyboard, simulator

我的故事板大小和 iPhone 模拟器上实际显示的大小有问题。有任何想法吗？

![截屏](../Images/053b960276169a05dda49cb2f86b95e5.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-01T19:07:31.877

这个问题有很多正确答案，但问题是你可以通过按一个按钮来做到这一点。我遇到了同样的问题，这就是我设法解决的方法：

![在此处输入图像描述](../Images/3e79a9d180d3402e1a1b0e793f330fb3.png)

![在此处输入图像描述](../Images/e8c5c8a06e08de21d046b7ab05e6b256.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T11:26:24.690

你的模拟器是正确的。无需调整它的大小。

你只需要按照这些步骤

```
 1\. go to nib/storyboard.
 2\. click on view
 3\. check menu on right side
 4\. go to 4th tab
 5\. Expand Simulated Metrics
 6\. Check Status bar is equal to Default
 7\. Top Bar & Bottom Bar are equal to None & None respectively. 
```

享受编程！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T11:25:01.697

问题是您的故事板使用的是 iPhone 5 屏幕尺寸。要将模拟器更改为使用 iPhone 5 模拟器，请转到模拟器并单击硬件 > 设备 > iPhone（视网膜 4 英寸）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T11:25:27.680

您的故事板视图适用于 iPhone 5，但您的模拟器是 iPhone 经典版。尝试将模拟器更改为 iPhone 5。如果您想为 iPhone 经典版使用此视图，请尝试更改两个按钮的自动调整大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T12:18:40.130

从文件检查器中取消选中**使用自动布局**

**1\. 去笔尖。**

**2.点击查看**

**3\. 转到第一个选项卡**

**4.取消选中使用自动布局**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-30T02:22:15.587

找出了如何将显示保持在常规尺寸的答案，而无需添加然后删除每个屏幕的条。我将不得不窃取早期答案的一部分：

1.  转到笔尖/故事板。
2.  点击查看
3.  检查右侧的菜单
4.  转到第 4 个选项卡
5.  展开模拟指标
6.  将“大小”值更改为“Retina 3.5 全屏”。

这使得情节提要布局与 iPhone 模拟器的大小相同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-05T18:30:33.570

对我来说，Xcode 似乎启动了 iOS Simulator，默认查看 iPhone 4 模型。也许有更好的方法在 Xcode 中设置它，但是在 iOS 模拟器应用程序中，您可以转到硬件 > 设备并选择您想要的屏幕尺寸。

# python - 如何将列表转换为所需的字典格式

> ID：13951261
> 
> 赞同：1
> 
> 时间：2012-12-19T11:20:41.963
> 
> 标签：python, dictionary, python-2.7

输入为 `a = "test1,test2,test3,test4,...etc"`

我想要如下输出：

```
b={"test1":"test1","test2":"test2","test3":"test3",..etc} 
```

请让我知道我该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:36:58.663

要在循环中创建字典，请使用字典理解。

假设您的`a`变量是具有逗号分隔值的字符串，则以下将起作用：

```
{v: v for v in a.split(',')} 
```

我们使用逗号分隔列表中的每个值作为结果字典的键和值。

dict 理解是在 Python 2.7 和 3.0 中添加的`{k: v ...}`，在早期的 python 版本中生成 2 值元组：

```
dict((v, v) for v in a.split(',')) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:17:20.860

Martijn Pieters[正确答案](https://stackoverflow.com/a/13952631/1125413)的补充：

dict 理解仅适用于 >= 2.7 的 Python 版本。对于早期版本的 Python，您可以创建 2 值元组并将它们传递给`dict()`函数：

```
dict((item, item) for item in a.split(',')) 
```

最后，还要提到这个选项，这将是很长的路要走：

```
d = {} # alternatively, d = dict()
for item in a.split(','):
    d[item] = item 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T15:30:51.750

另一种方式：

```
tmp = a.split(",")
b = dict(zip(tmp,tmp)) 
```

# image-processing - 模式识别图像处理

> ID：13951268
> 
> 赞同：1
> 
> 时间：2012-12-19T11:21:16.360
> 
> 标签：image-processing, pattern-recognition

我正在做一个关于自动电源管理的项目。我的想法是使用网络摄像头拍摄常规图像并确定房间是空的还是满的。

现在我的想法是，第一个图像将是一个空房间，并且会有一个软件将连续图像与此图像进行比较，并推断房间是否是空的。

我认为模式识别会很合适。该软件将匹配两个图像的模式（可能转换为二进制阈值图像，这正是我的想法）并相应地检测。

首先请告诉我它是否正确（如模式识别是正确的步骤）。其次，我想知道如何开始这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:04:20.917

If you just want to know if someone is in the room or no (i.e. **not** trying to count people), you can achieve this by just comparing frame pictures to see if there is a *significant* change, [see this question](https://stackoverflow.com/questions/603283/what-is-the-best-java-image-processing-library-approach) for many libraries that can help you getting started.

Generally, it is **much** easier to detect if someone in the room with a PIR sensor (aka motion detection sensor), you can get one from e-bay (less than $10) or local electronic store and a micro-controller such as Arduino and [here is a tutorial](http://playground.arduino.cc/Code/PIRsense) if you want to go with this method.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T14:17:22.137

运动检测算法在实际实现中主要存在两个问题：

*   相机运动（一般来说，不可能区分相机运动和物体运动）

*   压缩伪影（很难判断某物是移动了还是只是噪音）

由于在您的情况下只存在第二个问题，我推荐本文中提出的统计解决方案（“小波压缩视频中的移动对象检测”，Toreyin 等人，Elsevier）：

[http://yoksis.bilkent.edu.tr/doi_getpdf/articles/10.1016-j.image.2004.12.002.pdf](http://yoksis.bilkent.edu.tr/doi_getpdf/articles/10.1016-j.image.2004.12.002.pdf)

我已经实现了这个解决方案，如果相机静止不动，即使在非常嘈杂的视频上也能很好地工作。您甚至可以在不使用小波变换的情况下实现此范例，并将此解决方案仅应用于原始图像像素。

# iphone - 带有滚动的页面控制图像

> ID：13951272
> 
> 赞同：0
> 
> 时间：2012-12-19T11:21:39.190
> 
> 标签：iphone, ios, xcode, macos

我必须调用给定代码中的图像而不是颜色，我有四个图像要在这里调用，谁能告诉我如何调用给定代码中的图像...

.h 文件

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UIScrollViewDelegate>

@end 
```

.m 文件

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

// Do any additional setup after loading the view, typically from a nib.

    UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

    NSInteger numberOfViews = 3;

    for (int i = 0; i < numberOfViews; i++) 
    {
        CGFloat xOrigin = i * self.view.frame.size.width;

        UIView *awesomeView = [[UIView alloc] initWithFrame:CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height)];

        awesomeView.backgroundColor = [UIColor colorWithRed:0.5/i green:0.5 blue:0.5 alpha:1];

        [scroll addSubview:awesomeView];

        [awesomeView release];

    }

    scroll.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);

   //  scroll.pagingEnabled = YES;

    scroll.pagingEnabled = YES;

  //  scroll.contentSize = CGSizeMake(scrollView.frame.size.width * kNumberOfPages, scrollView.frame.size.height);

    scroll.showsHorizontalScrollIndicator = NO;

    scroll.showsVerticalScrollIndicator = NO;

    scroll.scrollsToTop = NO;

    //  self.pageControl.currentPage = 1;

    [self.view addSubview:scroll];

    [scroll release];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    // Dispose of any resources that can be recreated.
}

@end 
```

现在我需要使用编码而不是 xib 来使用带有图像的页面控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:28:46.597

您可以以编程方式添加页面控件

```
CGRect frame = //desired frame;
_pageControl = [[[PageControl alloc] initWithFrame:frame] autorelease];
_pageControl.numberOfPages = numberOfViews;
_pageControl.delegate = self;
[self.view addSubview:_pageControl];
[self.view bringSubviewToFront:_pageControl]; 
```

# android - 在没有互联网访问的情况下运行 Android 模拟器

> ID：13951273
> 
> 赞同：-7
> 
> 时间：2012-12-19T11:21:41.337
> 
> 标签：android, android-emulator

Android模拟器可以在没有互联网连接的情况下运行吗？

我想在通勤期间进行开发，并且无法访问互联网。请告知是否可以实现

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:23:53.653

是的你可以。不过，您应该先下载所有必需的库和帮助程序类。谷歌地图或谷歌云消息等当然不会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:24:32.470

Android Emulator 在没有任何 Internet 连接的情况下运行，除非您的应用需要访问 Internet 以获取数据。

# android - 广播意图停止后，媒体播放器不会停止播放音频文件

> ID：13951275
> 
> 赞同：2
> 
> 时间：2012-12-19T11:21:44.660
> 
> 标签：android, media-player, lifecycle, kill

我正在使用 Android MediaPlayer 类从正在运行的服务类播放 mp3 文件。如果用户停止查看五个活动中的任何一个，我想停止播放音乐播放器。

我尝试使用此处的代码向拥有 MediaPlayer 的服务发送广播意图。这样，当服务内部的广播接收器接收到这个意图时，它将调用 player.pause() 方法来停止播放音乐。

但是它不起作用。我在查看其中一项活动时启动了播放器，然后我离开了应用程序并查看了其他一些应用程序，例如 Android 日历应用程序。音乐不会停止并继续播放。

关于如何解决这个问题的任何想法？

```
 public class Monitor extends Application {

  @Override
   public void onCreate(){
   super.onCreate();

   if(activityVisible==false){
        Intent intent = new Intent();
        intent.setAction("com.sample.test");
        sendBroadcast(intent);
   }

   }

 public static boolean isActivityVisible() {
        return activityVisible;
      }  

      public static void activityResumed() {
        activityVisible = true;
      }

      public static void activityPaused() {
        activityVisible = false;

      }

      private static boolean activityVisible;

   } 
```

这是我在其他 5 项活动中的内容；

```
 @Override
  protected void onResume() {
    super.onResume();
    Monitior.activityResumed();
  }

  @Override
  protected void onPause() {
     super.onPause();
    Monitor.activityPaused();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:24:27.510

`onCreate``Application`创建每个活动时，不会调用类中的。这是你想要的吗？

因此，您的 Monitor 会将 更改`activityVisible`为 false，但是从您发布的代码中，没有任何事情发生在 this 上`boolean`。

一种解决方案是创建一个`MonitorActivity`并让您的所有活动扩展它。然后，`onCreate`您`MonitorActivity`将发送广播以启动服务并`onPause`停止服务。是的，这将在活动之间暂停，因此您可以在 3 秒内确定服务是否应该实际停止。

# javascript - jscrollPane 滚动条不会出现在初始加载

> ID：13951280
> 
> 赞同：1
> 
> 时间：2012-12-19T11:22:05.370
> 
> 标签：javascript, jquery, jscrollpane, jquery-jscrollpane

我正在使用 jscrollPane 来展示图像组合。最初加载时，滑块会消失。重新加载后，它出现。

[您可以通过访问here](http://www.opohills.com/portfolio/donwa.php)来复制效果 （第一次访问时，您会看到一组三张图像，下方没有滑块。当您重新加载时，您会看到所有内容都已加载）

我认为这可能是因为图像可能需要一些时间才能加载，但我不确定原因可能是什么。

您对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T09:56:03.927

问题出在我加载 jScrollpane 时。无论如何这是最佳实践，但请确保在标签末尾加载 jScrollepane，而不是标签

# winapi - 通过系统插件调用 CreateProcess

> ID：13951283
> 
> 赞同：0
> 
> 时间：2012-12-19T11:22:10.320
> 
> 标签：winapi, mingw, nsis

我没有设法`CreateProcess()`从安装程序成功调用。

虽然以下 C 代码（在 Win7 上使用 MinGW 编译）可以`notepad.exe`毫无问题地启动：

```
#include <windows.h>
#include <stdio.h>

int main(int argc, char *argv[]){

    BOOL result;
    STARTUPINFO startupInfo;
    PROCESS_INFORMATION processInformation;

    memset(&startupInfo,0, sizeof(STARTUPINFO));
    startupInfo.cb = sizeof(startupInfo);
    memset(&processInformation, 0, sizeof(PROCESS_INFORMATION));

    //these 2 values are used for NSIS
    printf("sizeof(startupInfo) = %d\n",sizeof(startupInfo));
    printf("sizeof(processInformation) = %d\n",sizeof(processInformation));

    result = CreateProcess(NULL, "NOTEPAD.exe", 
                          NULL,
                          NULL,
                          FALSE,
                          0,
                          NULL,
                          NULL,
                          &startupInfo,
                          &processInformation
                        );
    if(result == 0)
        printf("Could not create process, lasterr =  %ld\n", GetLastError());

} 
```

这个等效的 NSIS 脚本在 WinXp 和 Win7 上都失败了：

```
!include "TextFunc.nsh"
!include "logiclib.nsh"
outfile "process.exe"

!define DEBUG `System::Call kernel32::OutputDebugString(ts)`
Var cmd

Section

StrCpy $cmd "notepad.exe"
;System::Alloc 72           ;// $1 = struct STARTUPINFO
;Pop $1
System::Call "*(i 68, i 0, i 0, i 0, i 0, i 0, i 0, i 0, i 0, i 0, i 0, i 0, &i2 0, &i2 0, i 0, i 0, i 0, i 0) p.r1"        ;// StartUp.cb=sizeof(StartUp);

;System::Alloc 16           ;// $2 = struct PROCESS_INFORMATION
;Pop $2
System::Call "*(i 0, i 0, i 0, i 0) p.r2"

;System::Call "*$1(i 68)"       ;// StartUp.cb=sizeof(StartUp);
System::Call /NOUNLOAD 'kernel32::CreateProcess(i 0, t $cmd, i 0, i 0, i 0, i 0, i 0, i 0, i r1, i.r2)i.r0 ?e'
Pop $9
${debug} "$0 lasterr=$9"
StrCmp $0 "0" 0 Good
MessageBox MB_OK "CreateProcess failed"
${debug} "CreateProcess failed"
Goto Free
Good:
${debug} "get infos"
System::Call "*$2(i.r3,i.r4,i.r5,i.r6) ?!e"
${debug} "PHND=$3 PID=$5"
System::Call 'kernel32::CloseHandle(i $3)'
System::Call 'kernel32::CloseHandle(i $4)'
Free:
System::Free $1
System::Free $2

SectionEnd 
```

当我替换`System::Cal`for结构分配并`System::Alloc`改为使用时，没有崩溃但`CreateProcess`失败并`GetLastError`返回87（`ERROR_INVALID_PARAMETER`）

我缺少什么来解决这个问题`CreateProcess`？我不想使用内置`Exec`的，因为我想使用`CreateProcess`nsis 脚本无法访问的标志。

**编辑：**我得到我的错误：在对`CreateProcess`最后一个参数的调用中`i.r2`必须是`ir2`：内存块`PROCESS_INFORMATION`已经分配并且它的指针必须传递给`CreateProcess`，而`i.r2`忽略调用之前的值并且只在调用之后使用它。感谢安德斯的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:40:05.683

`p`如果您使用的是 NSIS 2.46，则不是有效类型，我相信您的 STARTUPINFO 大小错误。

```
Section 
System::Call '*(i,i,i,i)i.r0'
System::Alloc 72
pop $4
System::Call "*$4(i 72)"
StrCpy $1 '"explorer.exe" "$startmenu"'
System::Call 'kernel32::CreateProcess(i0,tr1,i0,i0,i0,i 0,i0,i0,ir4,ir0)i.r3'
DetailPrint RET=$3
System::Free $4
${If} $3 <> 0
    System::Call "*$0(i.r3,i.r4)"
    System::Call 'kernel32::CloseHandle(i $3)'
    System::Call 'kernel32::CloseHandle(i $4)'
${EndIf}
System::Free $0
SectionEnd 
```

# oracle - Oracle 11g sql%notfound 问题

> ID：13951287
> 
> 赞同：0
> 
> 时间：2012-12-19T11:22:14.920
> 
> 标签：oracle, oracle11g

我们已将 .database 从 oracle 8 迁移到 oracle 11g

在 update 语句之后的过程之一中，有一个 if 条件检查是否有任何行受到影响。如果是，那么它什么也不做，否则它会将数据插入表中

```
IF (SQL%NOTFOUND) THEN
        -- The record does not exist so try to insert the master customer data.
        insert_order_master_customer(p_host_country_id,
                  p_order_id,             p_accting_year,
                  p_master_cust_id,
                  p_master_cust_name     );
    END IF; 
```

但是这种情况在成功更新后不起作用，它正在评估 true 并且控制在 if 块内部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:34:14.093

不会在 11.2.0.2 上重现。

```
SQL> create table foo(id number);

Table created.

SQL> insert into foo values (1);

1 row created.

SQL> set serverout on
SQL> begin
  2    update foo set id = 2 where id = 1;
  3     IF (SQL%NOTFOUND) THEN
  4       dbms_output.put_line('not found!');
  5    elsif (SQL%NOTFOUND = false)
  6     then
  7       dbms_output.put_line('found!');
  8     end if;
  9  end;
 10  /
found! 
```

是在检查之前更新，即它之间没有其他东西吗？`dbms_output.put_line(sql%rowcount);`如果您在 IF 检查之前放置，还有什么输出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:27:05.993

```
exception when DATA_NOT_FOUND then

insert_order_master_customer(p_host_country_id,
                      p_order_id,             p_accting_year,
                      p_master_cust_id,
                      p_master_cust_name     ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T13:59:20.580

1.  使用 SQL%ROWCOUNT 计算受影响的行数。%NOTFOUND 仅适用于 Open-Fetch 游标。SQL%NOTFOUND 在 WHEN NO_DATA_FOUND 异常中为 TRUE。

2.  它是 NO_DATA_FOUND，而不是 DATA_NOT_FOUND

# php - PHP：将多维数组分配给会话

> ID：13951289
> 
> 赞同：0
> 
> 时间：2012-12-19T11:22:18.123
> 
> 标签：php, arrays, session

工作一个项目并在将多维数组分配给会话时遇到挑战。

项目信息：

公司应在网站上注册/预订课程，并且公司可以注册多个课程，并且对于每门课程，公司必须指定候选人的数量及其生物数据。

例子：

如果 XYZ 公司注册了课程 A、课程 B 和课程 C。并且为每门课程提供候选人信息如下：

```
<?php

 $all_reg_courses = array
  (
  $course_id => array(
    "candidate_no" => $cand_no,
  "all_candidates" => array(
 array
  (
  'cand_name' => 'Alex Holmes',
  'cand_email' => 'al@yah.com',
  'cand_sex' => 'Male',
  'cand_phone' => '070043635690',
  'cand_job' => 'IT'
  ),
 array
  (
  'cand_name' => 'Tilla Reel',
  'cand_email' => 'till@yah.com',
  'cand_sex' => 'Female',
  'cand_phone' => '0700833435690',
  'cand_job' => 'HR'
  ),
 array
  (
  'cand_name' => 'Bill Enya',
  'cand_email' => 'bill@yah.com',
  'cand_sex' => 'Male',
  'cand_phone' => '07008055435690',
  'cand_job' => 'Admin'
  )
  )
  ),
  $course_id => array(
    "candidate_no" => $cand_no,
  "all_candidates" => array(
 array
  (
  'cand_name' => 'Alan Pole',
  'cand_email' => 'al@yah.com',
  'cand_sex' => 'Male',
  'cand_phone' => '07009973635690',
  'cand_job' => 'IT'
  ),
 array
  (
  'cand_name' => 'Coleen Curtis',
  'cand_email' => 'cole@yah.com',
  'cand_sex' => 'Female',
  'cand_phone' => '5553435690',
  'cand_job' => 'HR'
  )
  )
  ),
    $course_id => array(
    "candidate_no" => $cand_no,
  "all_candidates" => array(
 array
  (
  'cand_name' => 'Tamia James',
  'cand_email' => 'tam@yah.com',
  'cand_sex' => 'Female',
  'cand_phone' => '7673435690',
  'cand_job' => 'HR'
  )
  )
  )
  );

?> 
```

为各种课程提供的这些数据和为每门课程提名的候选人将临时存储在一个会话中，如果“XYZ 公司”最终单击“最终提交按钮”，最终将发送到数据库中，否则会话中的所有数据将在特定时间后销毁（即课程预订车将被清空）

我一直在尝试将上面的示例多维数组分配到一个会话中，但这不仅仅是工作。

收到错误消息：无法使用字符串偏移量；

这是将数组附加到会话的代码：

```
<?php

session_name("cand_cart");
session_start();

$c_id = $_POST['c_id'];
//$cand_no = $_POST['cand_no'];

$_SESSION['cand_cart']['c_id']['cands'] = array();
$_SESSION['cand_cart']['c_id'] = array();
$_SESSION['cand_cart']['c_id']['cand_no'] = array();

$_SESSION['cand_cart']['c_id']['cand_no'] = $_POST['cand_no'];
$_SESSION['cand_cart']['c_id'] = $_POST['c_id'];

//$candidates = array();

foreach ($_POST['candidate'] as $i => $can)
{
    $candidates[$i] = array();

    foreach ($can as $key => $value)
    {
        //$candidates[$i][$key] = $value;
        $_SESSION['cand_cart']['c_id']['cands'][$i][$key] = $value;
    }
}

echo '<pre>';
//var_dump($candidates);
print_r($_SESSION['cand_cart']);
echo '</pre>';

echo "<br><br>";

?>

<table border="1" cellspacing="0" cellpadding="6">
    <thead>
        <th>#</th>
        <th>Name</th>
        <th>Phone</th>
        <th>Email</th>
        <th>Sex</th>
        <th>Position</th>
    </thead>
    <tbody>
<?php

foreach ($_SESSION['cand_cart'] as $i => $can)
{
    $c = (object) $can;
    $sn = $i + 1;
    echo '<tr><td>' . $sn . '</td><td>' . $c->name . '</td><td>' . $c->phone . '</td><td>' . $c->email . '</td><td>' . $c->sex . '</td><td>' . $c->pos . '</td></tr>';
}

?>
    </tbody>
</table> 
```

将不胜感激得到这方面的帮助.. 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:31:56.190

尝试更改这些行：

```
$_SESSION['cand_cart']['c_id']['cands'] = array();
$_SESSION['cand_cart']['c_id'] = array(); 
```

至

```
$_SESSION['cand_cart']['c_id'] = array();
$_SESSION['cand_cart']['c_id']['cands'] = array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:32:17.960

您正在覆盖整个数组，丢失了以前存储的信息

```
$_SESSION['cand_cart']['c_id']['cands'] = array();
$_SESSION['cand_cart']['c_id'] = array(); // here you overwrite the whole 'c_id' array and loose cands

$_SESSION['cand_cart']['c_id']['cand_no'] = $_POST['cand_no'];
$_SESSION['cand_cart']['c_id'] = $_POST['c_id']; // another overwite 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T11:32:54.143

在将数据存储到会话之前序列化和反序列化数据会容易得多。这似乎更轻量级，您不必专门设置每个值：

```
// Build up your data-Array from the submitted values stored in $_POST
$data = array();
foreach($_POST['candidate'] AS $i => $can)
{
     // Do your logic here, like you did before with the session
}

// Now serialize and store into session at once (= more performance)
$_SESSION['data'] = serialize($data); 
```

如果您想在下一个请求中使用数据，则必须对其进行反序列化：

```
$data = unserialize($_SESSION['data']); 
```

希望这可以帮助。

# c++ - 在 Visual C++ 项目中出现链接错误

> ID：13951293
> 
> 赞同：1
> 
> 时间：2012-12-19T11:22:29.240
> 
> 标签：c++, visual-c++, dll, msvcr90.dll, .lib

我的`visual c++`工作空间中有一个完全依赖于`.lib`（静态库）的项目。现在我想`dll`使用 Visual C++ 中的现有代码创建一个项目，但它显示以下`linking`错误：

```
Linking...
 msvcrt.lib(MSVCRT.dll) : error LNK2005: "public: virtual __thiscall exception::~exception(void)" (??1exception@@UAE@XZ) already defined in LIBCMTD.lib(stdexcpt.obj)
 msvcrt.lib(MSVCRT.dll) : error LNK2005: "public: __thiscall exception::exception(char const * const &)" (??0exception@@QAE@ABQBD@Z) already defined in LIBCMTD.lib(stdexcpt.obj)
 msvcrt.lib(MSVCRT.dll) : error LNK2005: _free already defined in LIBCMTD.lib(dbgheap.obj)
 msvcrt.lib(MSVCRT.dll) : error LNK2005: _malloc already defined in LIBCMTD.lib(dbgheap.obj)
 LINK : warning LNK4098: defaultlib "msvcrt.lib" conflicts with use of other libs; use   /NODEFAULTLIB:library
 Debug/finaliTest.dll : fatal error LNK1169: one or more multiply defined symbols found
 Error executing link.exe. 
```

我是这方面的新手`visual C++`。我应该如何处理？

*   代码`DllMain`：

    ```
    #include "stdafx.h"
    #include "IDT_DUKPT.h"
    unsigned char stringKSN[10];
    unsigned char m_nderivation_key[16];
    unsigned char m_ninitial_key[16];

     BOOL APIENTRY DllMain( HANDLE hModule, 
                    DWORD  ul_reason_for_call, 
                    LPVOID lpReserved
                 )
    {   
       return TRUE;
    }  

     void OnDecryption(){

       GetKey(stringKSN, m_nderivation_key, m_ninitial_key);   
       // Initialization of the method are written in `.lib` file.

       } 
    ```

在哪里`IDT_DUKPT.H`：

```
//IDT_DUKPT.h
#define _IDT_DUKPT_H_

// TDES Encryption
void TDES_Encryption(BYTE *Data, BYTE *Key, BYTE *InitalVector, int Length);

// TDES Decryption
void TDES(BYTE *Data, BYTE *Key, BYTE *InitalVector, int Length);

// Get the Initial Key
void GetKey(BYTE *KSN, BYTE *BDK, BYTE *InitialKey); 
```

我还把它放在`IDT_DUKPT.lib`我的项目文件夹中，并将`.lib`链接添加到项目设置中。

我的主要目标是创建一个`dll`，这样我就可以使用我的`java`代码中的方法`JNA`。

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:30:01.450

听起来您正在混合使用 C 运行时的不同选项编译的对象。是`IDT_DUKPT.lib`静态库（目标文件的集合，而不是单独 DLL 的导入库）？如果是这样，我猜一个是使用编译的，`/MTd`而另一个正在使用该`/MD`选项。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/abx4dbyh(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/abx4dbyh(v=vs.80).aspx)。

有几种方法可以解决此问题。最简单的可能是更改您的应用程序的编译器标志以使用`/MDd`或`/MTd`尚未使用的任何一个：

1.  在解决方案资源管理器中右键单击相关的 csproj，然后选择属性
2.  在出现的对话框中，展开 C/C++ 然后选择 Command Line
3.  在对话框右侧的选项框中，添加`/MTd`或`/MDd`
4.  为了完整起见，将配置更改为 Release 并添加`/MT`or`/MD`到其编译器选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:30:20.910

您是否尝试过创建新的 DLL，然后在层次结构中添加每个文件，每次添加后，编译？

请记住，当您添加一个 DLL 时，导出就出现了。您将无法直接添加。

# android - 如何为水平虚线之间存在的 EditText 框提供填充

> ID：13951294
> 
> 赞同：1
> 
> 时间：2012-12-19T11:22:31.697
> 
> 标签：android

如何为水平虚线之间存在的 EditText 框提供填充。![在此处输入图像描述](../Images/922b57469d74805abf8b6ef538aebf42.png)

在下图中，我输入的文本仅放置在图像的垂直线之后。但是我的文本是从虚线的开头输入的。

我使用了以下代码： [Android - 如何使edittext中的所有行都加下划线？](https://stackoverflow.com/questions/10361755/android-how-to-make-all-lines-in-an-edittext-underlined)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T05:41:51.770

好的，我明白了你的问题。为此使用`android:layout_marginLeft=""`标签。我一定会帮助你的。

# android - Android：使用默认播放器播放 .avi 视频文件

> ID：13951297
> 
> 赞同：2
> 
> 时间：2012-12-19T11:22:40.427
> 
> 标签：android, video

> **可能重复：**
> [播放视频的 Android 意图？](https://stackoverflow.com/questions/1572107/android-intent-for-playing-video)

如何使用默认播放器播放 .avi 视频文件。

```
Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);
File file = new File(arrGetVideoList.get(position));
intent.setDataAndType(Uri.fromFile(file), " video/*");
startActivity(intent); 
```

arrGetVideoList 是一个包含视频文件路径的数组列表。

谁能帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:36:19.630

这对我有用。

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW);
Uri data = Uri.parse(Environment.getExternalStorageDirectory()
    .getPath()
    + "/Test.avi");
intent.setDataAndType(data, "video/avi");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:27:03.493

您无法使用 Android 上的默认播放器播放 .avi 文件。

您可以查看[http://developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)以了解 Android 支持哪些格式

如果你真的需要播放除 Android 支持之外的其他格式，你应该看看 FFMpeg。

以下是一些关于 android 上的 JavaCV/ffmpeg 的有用链接：

[http://code.google.com/p/javacv/source/browse/src/main/java/com/googlecode/javacv/](http://code.google.com/p/javacv/source/browse/src/main/java/com/googlecode/javacv/) http://stackoverflow.com/questions/13770376/playing-a-video-with- javacv 和 ffmpeg

希望我能帮忙:)

# c# - 在 WPF 中克隆 TabItem 的最简单方法是什么？

> ID：13951303
> 
> 赞同：2
> 
> 时间：2012-12-19T11:23:05.843
> 
> 标签：c#, .net, wpf, tabcontrol, tabitem

我需要克隆选项卡的所有内容以反映 WPF TabItem 的当前状态，完全保留所有绑定。要求是每个选项卡都应使用自己的一组相同控件独立运行。到目前为止，我只设法创建了空白标签。MSDN 建议这是不可能的。对于 MS 来说，这似乎是非常基本的功能，所以这可能吗？

```
//    locate the TabControl that the tab will be added to
TabControl itemsTab = (TabControl) this.FindName("tabControl");

//    create and populate the new tab and add it to the tab control
TabItem newTab = new TabItem(); //This should instead clone an existing tab called "mainTab"
newTab.Content = detail;
newTab.Header = name;
itemsTab.Items.Add(newTab);

//    display the new tab to the user; if this line is missing
//    you get a blank tab
itemsTab.SelectedItem = newTab; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T13:12:31.237

```
 public MainWindow()
    {
        InitializeComponent();
        TabItem tab2 = TrycloneElement(tab1);
        if (tab2 != null)
            main.Items.Add(tab2);
    }

    public static T TrycloneElement<T>(T orig)
    {
        try
        {
            string s = XamlWriter.Save(orig);

            StringReader stringReader = new StringReader(s);

            XmlReader xmlReader = XmlTextReader.Create(stringReader, new XmlReaderSettings());
            XmlReaderSettings sx = new XmlReaderSettings();

            object x = XamlReader.Load(xmlReader);
            return (T)x;
        }
        catch
        {
            return (T)((object)null);
        }

    } 
```

XAML

```
 <TabControl Width="500" x:Name="main">
        <TabItem Header="AMTAB1" x:Name="tab1">
            <TextBlock Text="blalbla"></TextBlock></TabItem>
    </TabControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:58:53.573

为什么要克隆完整的标签页？

如果您有一个使用 MVVM 将您的 ui 与数据分离的数据视图模型 - 那么您可以克隆您的数据，这更容易且设计更简洁，并且您可以避免可视化树、父级等问题。

所以你的代码可能就像 new Maintab(){DataContext=MainData.Clone()}

# sql - 如何在ssis中添加两个时间值？

> ID：13951307
> 
> 赞同：1
> 
> 时间：2012-12-19T11:23:19.027
> 
> 标签：sql, sql-server-2008, ssis

这是我的场景

```
Value 1 : 15:55:10  (HH:MM:SS)
Value 2 : 05:15:55  (HH:MM:SS)

ADD = Value 1+ Value 2 
```

预期答案：21:11:05

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:24:53.567

看看[这个](http://msdn.microsoft.com/en-us/library/ms186819.aspx)。这解释了如何在 sql 中添加日期。

编辑：在弗莱姆的建议下，我提供了更多信息:)

您可以使用 DATEADD 和 DATEPART 函数将时间相加（假设您使用的是日期时间类型）。

```
value = DATEADD(hour,DATEPART(hour,Value1),Value2);
value = DATEADD(minute,DATEPART(minute,Value1),value);
value = DATEADD(second,DATEPART(second,Value1),value); 
```

这些可以相当简单地链接到查询中（即使代码不漂亮:)）

# mysql - Mysql Innodb 挂在表级锁上

> ID：13951308
> 
> 赞同：1
> 
> 时间：2012-12-19T11:23:19.407
> 
> 标签：mysql, locking, innodb

我有一个每秒 10,000 个查询的生产系统。我最近更新到 MySQL v5.5，现在面临一个问题：我的`InnoDB`表突然被锁定。

```
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 插入 PS（PREFERENCE、PROPERTY_TYPE、RES_COM、BEDROOM_NUM、BATHROOM_NUM、PRIC
更新 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | UPDATE property.PROFILE SET PASSWORD=AES_ENCRYPT(XXX) WHERE PROFILEID='4987835'
等待表级锁 | UPDATE property.PROFILE SET PASSWORD=AES_ENCRYPT(XXXX) WHERE PROFILEID='5405007'
等待表级锁 | 更新 PP 设置筛选 = 'N' 其中 PROFILEID='560353'
等待表级锁 | 更新 PP SET PASSWORD=AES_ENCRYPT(XXXX) 其中 PROFILEID='5405009'
等待表级锁 | 更新 PP SET PASSWORD=AES_ENCRYPT(XXXXX) 其中 PROFILEID='4987835'
等待表级锁 | 更新 PP SET PASSWORD=AES_ENCRYPT(XXXX) 其中 PROFILEID='540502'
等待表级锁 | 更新 PS SET 激活 = 'Y'，筛选 = 'N' 其中 SPID = '8252535'
等待表级锁 | 更新 PP SET MODIFY_DATE = now() WHERE PROFILEID = '3481803'

```

这里可能是什么问题？

下面的输出`SHOW VARIABLES LIKE '%innodb%';`：

```
+---------------------------------+---------------- ----------+
| 变量名 | 价值 |
+---------------------------------+---------------- ----------+
| 有_innodb | 是 |
| 忽略内置innodb | 关闭 |
| innodb_adaptive_flushing | 开 |
| innodb_adaptive_hash_index | 开 |
| innodb_additional_mem_pool_size | 134217728 |
| innodb_autoextend_increment | 8 |
| innodb_autoinc_lock_mode | 1 |
| innodb_buffer_pool_instances | 5 |
| innodb_buffer_pool_size | 3221225472 |
| innodb_change_buffering | 全部 |
| innodb_checksums | 开 |
| innodb_commit_concurrency | 50 |
| innodb_concurrency_tickets | 500 |
| innodb_data_file_path | ibdata1:100M:自动扩展 |
| innodb_data_home_dir | mysql5/数据/ |
| innodb_doublewrite | 开 |
| innodb_fast_shutdown | 1 |
| innodb_file_format | 羚羊 |
| innodb_file_format_check | 开 |
| innodb_file_format_max | 羚羊 |
| innodb_file_per_table | 开 |
| innodb_flush_log_at_trx_commit | 2 |
| innodb_flush_method | O_DIRECT |
| innodb_force_load_corrupted | 关闭 |
| innodb_force_recovery | 0 |
| innodb_io_capacity | 200 |
| innodb_large_prefix | 关闭 |
| innodb_lock_wait_timeout | 100 |
| innodb_locks_unsafe_for_binlog | 关闭 |
| innodb_log_buffer_size | 8388608 |
| innodb_log_file_size | 536870912 |
| innodb_log_files_in_group | 2 |
| innodb_log_group_home_dir | ./ |
| innodb_max_dirty_pages_pct | 75 |
| innodb_max_purge_lag | 0 |
| innodb_mirrored_log_groups | 1 |
| innodb_old_blocks_pct | 37 |
| innodb_old_blocks_time | 0 |
| innodb_open_files | 300 |
| innodb_purge_batch_size | 100 |
| innodb_purge_threads | 0 |
| innodb_random_read_ahead | 关闭 |
| innodb_read_ahead_threshold | 56 |
| innodb_read_io_threads | 4 |
| innodb_replication_delay | 0 |
| innodb_rollback_on_timeout | 关闭 |
| innodb_rollback_segments | 64 |
| innodb_spin_wait_delay | 6 |
| innodb_stats_method | nulls_equal |
| innodb_stats_on_metadata | 开 |
| innodb_stats_sample_pages | 8 |
| innodb_strict_mode | 关闭 |
| innodb_support_xa | 开 |
| innodb_sync_spin_loops | 30 |
| innodb_table_locks | 开 |
| innodb_thread_concurrency | 0 |
| innodb_thread_sleep_delay | 10000 |
| innodb_use_native_aio | 开 |
| innodb_use_sys_malloc | 开 |
| innodb_version | 1.1.8 |
| innodb_write_io_threads | 4 |
+---------------------------------+---------------- ----------+

```

# android - 由于失败的 Binder 事务，Appwidget 无法更新

> ID：13951310
> 
> 赞同：1
> 
> 时间：2012-12-19T11:23:34.500
> 
> 标签：android, android-widget, appwidgetprovider

当我第一次在屏幕上添加小部件时，它可以正常工作，然后当我单击小部件上的按钮进入活动并关闭它时。小部件停止更新并显示此错误

```
12-19 19:14:52.370: E/JavaBinder(14805): !!! FAILED BINDER TRANSACTION !!! 
```

这是我的代码：

```
Widget4x2.remoteViews.setProgressBar(R.id.widget_progressbar, 100, (int)(NowPlayingService.progress * 100), false);
AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(Widget4x2.context);
appWidgetManager.updateAppWidget(new ComponentName(Widget4x2.context,Widget4x2.class), Widget4x2.remoteViews); 
```

代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T02:16:11.413

我猜 Widget4x2.remoteViews 是一个静态变量。可能尚未分配静态变量，或者未正确启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-16T12:34:32.990

当您调用 setter (like `setProgressBar`) on 时`RemoteViews`，它不会直接对视图进行更改。相反，它存储这些 chages 的序列（称为操作）并将它们序列化以将它们发送到通知或小部件管理器。

当您使用静态变量来存储`RemoteViews`对象时，与 remoteViews 关联的操作列表会随着您更新而无限增长`remoteViews`。当序列化的大小达到 1Mb 时，这将停止`remoteViews`，这是 binder 事务的最大有效负载大小。

没有办法清除或删除操作列表，因此重新创建`RemoteViews`是一种解决方案。

# c - 这些功能之间有什么区别？

> ID：13951311
> 
> 赞同：0
> 
> 时间：2012-12-19T11:23:35.827
> 
> 标签：c, arrays, string, algorithm, char

我在 The C Answer Book 中找到了这段代码。

```
int readline(char s[], int lim) {
    int i,c,j=0;
    for(i=0; (c=getchar())!=EOF && c!='\n'; ++i) {
        if(i<lim-2) {
            s[j]=c;
            ++j;
        }
    }
    if(c=='\n') {
        s[j]=c;
        ++j;
        ++i;
    }
    s[j]='\0';
    return i;
} 
```

我写了我的版本：

```
int readline(char line[], int lim) {
    int c, i;
    for(i=0; (c=getchar())!=EOF && c!='\n'; ++i) {
        if(i<lim-2) {
            line[i]=c;
        }
    }
    if(c=='\n') {
        line[i]=c;
        ++i;
    }
    line[i]='\0';
    return  i;
} 
```

我只使用了一个变量 ' `i`' 作为计数器，但原始版本使用了两个变量 ' `i`' 和 ' `j`' 作为计数器。两者有什么区别？

请告诉我它们有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:26:25.143

该函数的第二个版本留下未初始化的部分，并且在初始循环继续超出缓冲区的情况下，有`line`可能将最终的 '\n'、'\0'写入缓冲区的末尾`line``i<lim-2`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T11:27:12.867

如果用户输入了多个`lim-2`字符，则第一个版本可以正常工作，第二个版本会写到末尾`line`：

```
if(c=='\n') {
    line[i]=c;  <<=== here
    ++i;
}
line[i]='\0';   <<=== and here 
```

这并不意味着您实际上需要两个变量。您可以使用一个，但您必须在循环后将其封顶。做任何你认为使代码更容易阅读的事情。

# java - 如何使用java在mysql的枚举类型列中插入两个以上的值？

> ID：13951316
> 
> 赞同：1
> 
> 时间：2012-12-19T11:23:55.997
> 
> 标签：java, spring, hibernate, jpa

在我的Java程序枚举中是这样的..

```
public enum WeekdayType {
    MONDAY(Calendar.MONDAY), TUESDAY(Calendar.TUESDAY), WEDNESDAY(
    Calendar.WEDNESDAY), THURSDAY(Calendar.THURSDAY), FRIDAY(
    Calendar.FRIDAY), SATURDAY(Calendar.SATURDAY), SUNDAY(
    Calendar.SUNDAY);

    private int day;

    private WeekdayType(int day) {
        this.day = day;
    }

    public int getDay() {
        return day;
    }
} 
```

我的 Hibernate bean 像这样定义`TimetableVO.java`

```
 @Column(name="REPEAT_DAYS")
@Enumerated(EnumType.STRING)
private WeekdayType repeatDays;// And Setter and Getters.... 
```

在我的服务课上，我正在这样做..

```
String totalDays="MONDAY,SUNDAY,FRIDAY,SATURDAY"
    public void createEvent(TimetableVO timetableVO) {
    WeekdayType weekday = null;
    for (String day : totalDays.split(",")) {
        weekday = WeekdayType.valueOf(day);
    }
    timetableVO.setRepeatDays(weekday);
......
......
......
entityManager.persist(timetableVO);     

    } 
```

但问题是在数据库列中仅添加最后一个值......这意味着它会覆盖以前的值

例如：以上字符串`SATURDAY`仅插入数据库，但我想插入所有值，如`MONDAY,SUNDAY,FRIDAY,SATURDAY`...给我建议..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:27:13.617

更改您的列类型

`private WeekdayType repeatDays;`

应该改成String类型

`private String repeatDays;`

将您的 csv 设置为此列。

其他选择是拥有

`private List<WeekdayType> repeatDays;` 带`@JoinTable`注释

这将创建另一个映射表。处理多对多关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:50:24.947

试图在单个列中保存更多值是关系数据库中的概念错误。一个解决方案可能是创建另一个表，并在您`TimeTable`的表和新创建的表之间创建关系。

第二种不太灵活的替代方法是，可以相对于一天创建 7 个不同的属性（以及 7 个不同的列），而无需创建新表，因此您可以：

```
 @Column(name="MONDAY")
 private boolean repeatOnMonday;

 @Column(name="TUESDAY")
 private boolean repeatOnTuesday;

 //... 
```

# c# - 嵌入音频文件以在 wpf 自定义控件模板中使用

> ID：13951317
> 
> 赞同：1
> 
> 时间：2012-12-19T11:24:03.467
> 
> 标签：c#, wpf, xaml, embedded-resource

我正在构建一个自定义控件库，它直接包含一些音频文件。它们应该嵌入到库中。

现在我想在自定义按钮按下时播放这样的音频文件：

```
 <ControlTemplate.Triggers>
                        <EventTrigger RoutedEvent="PreviewMouseDown">
                            <SoundPlayerAction Source="pack://application:,,,/CustomControlLibrary1;component/Audio/buttonPress.wav" />
                        </EventTrigger>
                        ... 
```

当我在项目中包含该库时，启动时发生错误：

```
Cannot locate resource 'audio/buttonPress.wav'. 
```

我将每个音频文件的 Build Action 设置为“Embedded Resource”，但仍然出现错误。

我一直在努力解决这个问题。我到底做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:57:59.750

构建动作必须是`Resource`，不是`Embedded Resource`。另请参阅[此答案](https://stackoverflow.com/a/145769/1136211)。

# html - 在 HTML 中定位文本的问题

> ID：13951318
> 
> 赞同：0
> 
> 时间：2012-12-19T11:24:07.633
> 
> 标签：html, css, positioning

我正在尝试在图像和项目符号之间放置一个段落。我认为我在 html 中有正确的布局，但由于某种原因，它只是没有正确显示。见下图：

![在此处输入图像描述](../Images/eb4bac7a01aca747039270ee214b83b8.png)

如您所见，这些段落出现在其他所有内容下，但这不是它在我的 html 中的显示方式。请参阅下面的代码：

HTML：

```
<div class="services">
        <div class="serviceHolder" style="opacity: 1;">
            <div class="serviceBox" id="service-plan">
                <div class="serviceIcon"><img src="images/icon-design.jpg" width="129" height="134" alt="design icon"></div>
                <div class="serviceCopy">
                    <h2>Plan</h2>
                    <ul class="serviceBullets">
                        <li><h3>Objectives</h3></li> 
                        <li><h3>Scope</h3></li>
                        <li><h3>Sitemap</h3></li>
                        <li><h3>Wireframes</h3></li>
                    </ul>   
                    <p>Lorem ipsum dolor sit amet, porta quis urna tempor vestibulum purus, vulputate condimentum arcu faucibus aliquam enim accumsan, a nulla nullam morbi bibendum eveniet tempus, parturient consequat sociis quis. Suscipit in vitae ornare lobortis sed, porta et minima odio neque maecenas cras, justo in. </p>
                    <p>Justo arcu lacus, quos pellentesque nam sit. Luctus mauris egestas, leo nisl porttitor urna scelerisque ut, mauris sodales sapien donec dolor, arcu a ante vestibulum lorem vitae quam</p>
                </div>
            </div>
        </div> 
```

CSS：

```
.services {
width: 100%; float: left; margin: 30px 0;
}

.services .serviceBox {
width: 898px; padding: 30px; border: 1px solid #43C0C2; background-color: white; float:     left; margin-bottom: 10px;
}

.services .serviceIcon {
float: left; margin: 0 30px 50px 0; width: 129px;
}

.serviceBullets {
float: right; font-weight: 100; width: 150px;
}

.serviceBullets li {
list-style-image: url(../images/bullet.gif); color: #43C0C2; margin-bottom: 10px;
}

.services h2 {
font-size: 40px; margin-bottom: 20px; color: #000000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:02:41.460

您是否试图让它成为图像 - 计划和段落 - 项目符号？

或者

IMAGE - 其他所有内容，以便图像列在左侧，其他所有内容都在右侧？

如果是前者。

尝试这个：

```
<div class="serviceHolder" style="opacity: 1;">
        <div class="serviceBox" id="service-plan">
            <div class="serviceIcon"><img src="images/icon-design.jpg" width="129" height="134" alt="design icon"></div>
            <div class="serviceCopy">
            <h2>Plan</h2>
                <p>Lorem ipsum dolor sit amet, porta quis urna tempor vestibulum purus, vulputate condimentum arcu faucibus aliquam enim accumsan, a nulla nullam morbi bibendum eveniet tempus, parturient consequat sociis quis. Suscipit in vitae ornare lobortis sed, porta et minima odio neque maecenas cras, justo in. </p>
                <p>Justo arcu lacus, quos pellentesque nam sit. Luctus mauris egestas, leo nisl porttitor urna scelerisque ut, mauris sodales sapien donec dolor, arcu a ante vestibulum lorem vitae quam</p>
             </div>
            <div class="serviceBullets">
                <ul>
                    <li><h3>Objectives</h3></li> 
                    <li><h3>Scope</h3></li>
                    <li><h3>Sitemap</h3></li>
                    <li><h3>Wireframes</h3></li>
                </ul>   
            </div>
        </div>
    </div> 
```

这样它就有自己的 div 和项目符号是分开的。

然后把它们全部浮起来。并定义它们的宽度。然后再添加一个 div，以清除浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:46:16.173

您只添加`Float:left`了`right Div`，您`left div`还需要使用以下代码更新您的

```
.serviceCopy
{
  float: left;
  width: 721px;
} 
```

同样在 2 div 之后，您需要再添加 1 个 div 以清除所有浮动

```
<div class="serviceIcon"></div>
<div class="serviceCopy"></div>
<div style="clear:both"></div> 
```

这样您的布局就不会中断。

# javascript - 文本鼠标悬停上的图像边框

> ID：13951319
> 
> 赞同：1
> 
> 时间：2012-12-19T11:24:07.343
> 
> 标签：javascript, jquery, html, css

我有三个彼此相邻的产品块。每个都有一个图像和下面的名称。当您将鼠标悬停在文本上时，我想要做什么，它会在图像底部显示一个边框。我为图像悬停设置了样式，当我将鼠标悬停在图像上时它可以工作，但当我将鼠标悬停在文本上时它不起作用。

[这是一个 jsfiddle](http://jsfiddle.net/dCNKm/2/)。

还有我的HTML：

```
<div class="container-product-row">
    <ul class="variations">
        <li>
            <a href="#"><img src="../images/designs/houses.jpg" alt="" width="180" height="130" /><h2>Cuff</h2></a>
        </li>
        <li>
             <a href="#"><img src="../images/designs/houses.jpg" alt="" width="180" height="130" /><h2>Dome</h2></a>
        </li>
        <li>
             <a href="#"><img src="../images/designs/houses.jpg" alt="" width="180" height="130" /><h2>Gladiator</h2></a>
        </li>
    </ul>  
</div> <!-- container product row -->​ 
```

CSS：

```
.container-product-row {
   margin-bottom:-20px;
}

.variations li {
    margin:10px; 
    width:183px
}

.variations li a, a:visited {
    display: block; 
    color:#000000; 
    text-decoration:none
}

.variations li a:hover { 
    color:#ff4baa;
}

.variations li a img {
    display: block; 
}

.variations li a img:hover {
    border-bottom:5px solid #ff4baa;
}

.variations {
    display: block;  
}

.variations > li {
    display: inline-block;
    vertical-align: top;
}

h2 {
    font-family: 'Arapey', serif; 
    font-weight:400; 
    font-size:12pt; 
    padding: 5px 10px 5px 5px;     
    font-style:italic; 
    font-weight:400
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:27:43.487

由于文本在 DOM 中的图像之后，因此您可以做到这一点的唯一方法是将 设置为`:hover`文本和图像的父级，`li`.

[你可以在这里看到演示](http://jsfiddle.net/dCNKm/3/)

或者，您可以重新排列 HTML，然后使用同级选择器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:27:16.647

更改为以下样式：

```
.variations li:hover a img {
    border-bottom: 5px solid #ff4baa;
} 
```

**演示：http:** [//jsfiddle.net/dCNKm/5/](http://jsfiddle.net/dCNKm/5/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T11:27:27.083

您不应该在特定元素上应用悬停样式，而是在父元素上应用悬停样式。所以这：

```
.variations li a img:hover { border-bottom:5px solid #ff4baa; } 
```

可以变成这样：

```
.variations li:hover a img { border-bottom:5px solid #ff4baa; } 
```

也考虑为文本重写它。

# java - Javamail / email commons：空消息给出奇怪的错误

> ID：13951322
> 
> 赞同：2
> 
> 时间：2012-12-19T11:24:18.357
> 
> 标签：java, jakarta-mail, apache-commons-email

我正在尝试通过 GMail（实际上是 Google Apps）发送电子邮件。这对于普通消息非常有效，但当然我必须测试极端情况。

现在我正在尝试发送没有正文的消息，但收到一条奇怪的错误消息。因为我想消除代码中的错误，所以我想知道我是否做错了什么，或者我正在使用的库中有错误。

```
HtmlEmail currentMessage = new HtmlEmail();
currentMessage.setSSL(true);
currentMessage.setSslSmtpPort(465);
currentMessage.setHostName("smtp.gmail.com");
currentMessage.setAuthentication("abc@gmail.com", "secret");

/** rs is a ResultSet from database **/

if(rs.getString("mailFrom") != null && !rs.getString("mailFrom").isEmpty())
    currentMessage.setFrom(rs.getString("mailFrom"));
else
    currentMessage.setFrom("abc@gmail.com");
currentMessage.setTo(this.convertRecipientStringToArray(rs.getString("mailTo")));
currentMessage.setCc(this.convertRecipientStringToArray(rs.getString("mailCC")));
currentMessage.setBcc(this.convertRecipientStringToArray(rs.getString("mailBC")));
currentMessage.setSubject(rs.getString("mailSubject"));
if(rs.getString("mailBody") != null && !rs.getString("mailBody").isEmpty())
    currentMessage.setTextMsg(rs.getString("mailBody"));
if(rs.getString("mailHtmlBody") != null && !rs.getString("mailHtmlBody").isEmpty())
    currentMessage.setHtmlMsg(rs.getString("mailHtmlBody"));
if(rs.getString("mailReplyTo") != null && !rs.getString("mailReplyTo").isEmpty())
    currentMessage.addReplyTo(rs.getString("mailReplyTo"));
else
    currentMessage.addReplyTo("def@gmail.com");
currentMessage.send(); 
```

此代码适用于“普通”电子邮件：具有有效的正文、主题、收件人等。

当数据库中的*mailBody* **和** *mailHtmlBody*都为*NULL*或为空时，我收到以下错误：

> 将电子邮件发送到以下服务器失败：smtp.gmail.com:25

完整的错误日志（自己的日志格式）/堆栈跟踪：

```
[CRITICAL] 2012-12-19 17:08:00 [CET] - Exception occurred in function com.mypackage.mymailobject.outgoing_sendMails: Sending the email to the following server failed : smtp.gmail.com:25

Stack trace:
org.apache.commons.mail.EmailException: Sending the email to the following server failed : smtp.gmail.com:25
    at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1242)
    at org.apache.commons.mail.Email.send(Email.java:1267)
    at com.mypackage.mymailobject.outgoing_sendMails(mymailobject.java:85)
    at com.mypackage.mymailobject.outgoing_do(mymailobject.java:69)
    at com.mypackage.Mailer.main(Mailer.java:132)
Caused by: javax.mail.MessagingException: IOException while sending message;
  nested exception is:
    java.io.IOException: javax.mail.MessagingException: Empty multipart: multipart/mixed; 
    boundary="----=_Part_0_916488860.1355933279096"
    at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1141)
    at javax.mail.Transport.send0(Transport.java:195)
    at javax.mail.Transport.send(Transport.java:124)
    at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1232)
    ... 4 more
Caused by: java.io.IOException: javax.mail.MessagingException: Empty multipart: multipart/mixed; 
    boundary="----=_Part_0_916488860.1355933279096"
    at com.sun.mail.handlers.multipart_mixed.writeTo(multipart_mixed.java:105)
    at javax.activation.ObjectDataContentHandler.writeTo(Unknown Source)
    at javax.activation.DataHandler.writeTo(Unknown Source)
    at javax.mail.internet.MimeBodyPart.writeTo(MimeBodyPart.java:1476)
    at javax.mail.internet.MimeMessage.writeTo(MimeMessage.java:1772)
    at com.sun.mail.smtp.SMTPTransport.sendMessage(SMTPTransport.java:1099)
    ... 7 more 
```

我现在有两个问题：

1.  是否可以发送没有正文的电子邮件？这是允许的吗？
2.  为什么错误消息的端口号是 25 而不是 465？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-04T06:53:38.840

MIME 规范不允许没有正文部分的多部分内容。[JavaMail API](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeMultipart.html)（我认为是 1.5 版）允许您将系统属性设置`mail.mime.multipart.allowempty`为`true`解决此问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T17:23:49.680

> 是否可以发送没有正文的电子邮件？这是允许的吗？

是的，RFC 5322 特别允许电子邮件消息有一个空的正文：

> “消息由标头字段组成，可选地后跟消息正文。”

这是BNF：

```
body            =   (*(*998text CRLF) *998text) / obs-body 
```

[https://www.rfc-editor.org/rfc/rfc5322#section-3.5](https://www.rfc-editor.org/rfc/rfc5322#section-3.5)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T17:21:25.600

尽管我找不到它的文档，但经验证明表明，Apache Commons Email HtmlEmail 对象中不允许空的正文部分。文本消息或 html 消息应设置为非空字符串。

端口 25 的错误消息是 Apache Commons 电子邮件代码中的错误，在打印 smtp 端口时未考虑 SSL。为此，已在[https://issues.apache.org/jira/browse/EMAIL-123提交了错误报告](https://issues.apache.org/jira/browse/EMAIL-123)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-01T18:36:08.090

我有完全相同的例外，但最终成为一个愚蠢的错误，我忘记将消息的正文添加到多部分消息中。因此错误！

```
BodyPart body = new MimeBodyPart();
body.setText(("Message Body"));
multipart.addBodyPart(body);   // ** here
message.setContent(multipart);
Transport.send(message); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-19T11:29:54.177

要使用 gmail 发送电子邮件，您还应该启用传输层安全性。

```
currentMessage.setTLS(true); 
```

# php - 如何在 html 注释之间运行 php 代码

> ID：13951323
> 
> 赞同：-3
> 
> 时间：2012-12-19T11:24:18.310
> 
> 标签：php, css, outlook, vml, email-templates

我正在设置一个电子邮件模板以在 MS Outlook 中工作（在背景图像上显示文本）。

这是通过 VML 完成的，现在的问题是，它在引号之间呈现数据，但我的内容是动态的，所以我需要一种方法来执行该 php 代码..这是我使用的代码 -

这是我需要展示我的动态内容的地方 -`<div>DYNAMIC PHP CONTENT</div>`

```
<!--[if gte vml 1]>
<v:image style='width: 602px; height: 282px; position: absolute; top: 0; left: 0; border: 0; z-index: 0;' src="images/template_header.jpg" />
    <v:rect style="position:absolute;top:40;margin-left:150px;width:300px;color:rgb(255,255,255);" fill="false" stroked='f'>
        <div>DYNAMIC PHP CONTENT</div>
    </v:rect>
<![endif]--> 
```

让我知道是否还有其他方法可以做到这一点:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:26:54.630

PHP 不知道也不关心 HTML 注释（除非您使用 DOM/HTML 解析器来解析 HTML）。它运行代码块内的任何代码，只是将代码块外的内容直接输出到 STDOUT，而不考虑它是什么。

只需将您的代码放在`<?php`和`?>`正常之间。评论不会阻止它执行。

# jquery - 为什么 jQuery 似乎不等待动画完成？

> ID：13951327
> 
> 赞同：2
> 
> 时间：2012-12-19T11:24:24.560
> 
> 标签：jquery, twitter-bootstrap

我想做的是：

1.  淡入进度条。
2.  淡入淡出完成后，将进度条设置为 100%。
3.  当进度条处于 100% 时，淡出进度条。
4.  淡出完成后，重置进度条。

我认为这段代码可以提供解决方案：

```
 $('#savebar').fadeIn('fast', function () {
        $('#savebar .bar').animate({width: '100%'}, "slow", function () {
            $('#savebar').fadeOut('fast', function () { 
                $('#savebar .bar').css({'width':'0%'});
            });
        });
    }); 
```

问题似乎是动画完成功能执行得太早。这是因为浏览器渲染进度条的速度不够快，还是我在这里遗漏了什么？

这是一个说明问题的 jsfiddle：http: [//jsfiddle.net/dub6P/](http://jsfiddle.net/dub6P/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:33:54.230

似乎fadeOut 发生得太快了。尝试在淡出之前添加延迟。IMO 的动画看起来相当不错：http: [//jsfiddle.net/dub6P/7/](http://jsfiddle.net/dub6P/7/)

```
$('#btn').click(function () {
    $('#savebar').fadeIn('fast', function () {
    $('#savebar .bar').animate({width: '100%'}, "slow", function () {
             $('#savebar').delay(1000).fadeOut('fast', function () { 
                 $('#savebar .bar').css({'width':'0%'});
             });
         });
     });    
 }); 
```

​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T11:30:50.227

减慢淡出功能，它似乎工作正常。

```
$('#btn').click(function () {
    $('#savebar').fadeIn('fast', function () {
        $('#savebar .bar').animate({width: '100%'}, "slow", function () {
            $('#savebar').fadeOut(1500, function () {
                $('#savebar .bar').css({'width':'0%'});
            });
        });
    });    
}); 
```

示例：http: [//jsfiddle.net/dub6P/5/](http://jsfiddle.net/dub6P/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:54:42.880

我认为让动画更快而淡出更慢将解决：

```
$('#btn').click(function () {
  $('#savebar').fadeIn('fast', function () {
     $('#savebar .bar').animate({width: '100%'}, 500, function () {// 500 ms used
         $('#savebar').fadeOut(1500, function () {                // 1500 ms used
             $('#savebar .bar').css({'width':'0%'});
         });
     });
  });    
}); 
```

小提琴：http: [//jsfiddle.net/dub6P/10/](http://jsfiddle.net/dub6P/10/)

# asp.net - 通过将 Linq 结果添加到数据表或数据集中来重用它

> ID：13951331
> 
> 赞同：0
> 
> 时间：2012-12-19T11:24:38.647
> 
> 标签：asp.net, linq

**strong text**感谢 Tim 在另一篇文章中为我提供了以下代码：[Join/merge two excel files in asp.net and display them in gridview](https://stackoverflow.com/questions/13929780/join-merge-two-excel-files-in-asp-net-and-display-them-in-gridview)。

我在这篇新文章中的问题是：如何重用或将 linq 结果添加到数据集或数据表中，以便我可以查询新表而不是两个单独的表？join 关键字使我可以连接两个表。现在我想使用这个连接表来运行其他查询。

我希望我的问题是有道理的。如果您需要更多信息，请告诉我。

```
DataSet ds = new DataSet("Stock");
using (var dbConnection = new OleDbConnection(connString))
using (var dbCommand = new OleDbCommand("SELECT * FROM [Sheet1$]", dbConnection))
using (var da = new OleDbDataAdapter(dbCommand))
{
    da.Fill(ds, "HWTypes");
}

using (var dbConnection = new OleDbConnection(stockConn))
using (var dbCommand = new OleDbCommand("SELECT * FROM [Stock_voorlopig$]", dbConnection))
using (var da = new OleDbDataAdapter(dbCommand))
{
    da.Fill(ds, "Stock");
}

var joined = from rType in ds.Tables["HWTypes"].AsEnumerable()
             join rStock in ds.Tables["Stock"].AsEnumerable()
             on rType.Field<string>("ProductID") equals rStock.Field<string>("Partno")
             select new
             {
                 ProductID = rType.Field<string>("ProductID")
                 // add the other columns you need here
             };

GridView1.DataSource = joined;
GridView1.DataBind(); 
```

**编辑1：**

我正在尝试做这样的事情：

```
private static DataTable JoinDataTablesWithLinq()
{

 //rest of the code from above
 return joined.CopyToDataTable();
} 
```

但我收到此错误：

```
The type 'AnonymousType#1' cannot be used as type parameter 'T' in the generic type or method 'System.Data.DataTableExtensions.CopyToDataTable<T>(System.Collections.Generic.IEnumerable<T>)'. There is no implicit reference conversion from 'AnonymousType#1' to 'System.Data.DataRow'. 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:13:06.890

> 我正在尝试做这样的事情：

```
private static DataTable JoinDataTablesWithLinq()
{

 //rest of the code from above
 return joined.CopyToDataTable();
} 
```

您不能创建`DataTable`“即时”。您选择了一个`IEnumerable<DataRow>`不需要使用的匿名类型[`CopyToDataTable`](http://msdn.microsoft.com/en-us/library/bb396189.aspx)。因此，您要么必须使用自定义类并填充 a`List<MyClass>`所需的所有属性来持久保存它，要么必须创建 a`DataTable`具有所有必要`DataColumns`的匿名类型并填充它。

你会发现这并不容易。不过，有一种动态方法。但这需要反思，因此它根本没有效率。

我们走吧……（摘自[我的其他答案](https://stackoverflow.com/a/9259348/284240)）

您可以构建自己的[CopyToDataTable](http://msdn.microsoft.com/en-us/library/bb396189.aspx)，它采用任何类型的 IEnumerable（不仅`DataRow`）并返回一个新的`DataTable`：

这是实现（在[MSDN](http://msdn.microsoft.com/en-us/library/bb669096.aspx#Y105)的帮助下）：

```
public class ObjectShredder<T> {
    private System.Reflection.FieldInfo[] _fi;
    private System.Reflection.PropertyInfo[] _pi;
    private System.Collections.Generic.Dictionary<string, int> _ordinalMap;
    private System.Type _type;

    // ObjectShredder constructor.
    public ObjectShredder() {
        _type = typeof(T);
        _fi = _type.GetFields();
        _pi = _type.GetProperties();
        _ordinalMap = new Dictionary<string, int>();
    }

    /// <summary>
    /// Loads a DataTable from a sequence of objects.
    /// </summary>
    /// <param name="source">The sequence of objects to load into the DataTable.</param>
    /// <param name="table">The input table. The schema of the table must match that 
    /// the type T.  If the table is null, a new table is created with a schema 
    /// created from the public properties and fields of the type T.</param>
    /// <param name="options">Specifies how values from the source sequence will be applied to 
    /// existing rows in the table.</param>
    /// <returns>A DataTable created from the source sequence.</returns>
    public DataTable Shred(IEnumerable<T> source, DataTable table, LoadOption? options) {
        // Load the table from the scalar sequence if T is a primitive type.
        if (typeof(T).IsPrimitive) {
            return ShredPrimitive(source, table, options);
        }

        // Create a new table if the input table is null.
        if (table == null) {
            table = new DataTable(typeof(T).Name);
        }

        // Initialize the ordinal map and extend the table schema based on type T.
        table = ExtendTable(table, typeof(T));

        // Enumerate the source sequence and load the object values into rows.
        table.BeginLoadData();
        using (IEnumerator<T> e = source.GetEnumerator()) {
            while (e.MoveNext()) {
                if (options != null) {
                    table.LoadDataRow(ShredObject(table, e.Current), (LoadOption)options);
                } else {
                    table.LoadDataRow(ShredObject(table, e.Current), true);
                }
            }
        }
        table.EndLoadData();

        // Return the table.
        return table;
    }

    public DataTable ShredPrimitive(IEnumerable<T> source, DataTable table, LoadOption? options) {
        // Create a new table if the input table is null.
        if (table == null) {
            table = new DataTable(typeof(T).Name);
        }

        if (!table.Columns.Contains("Value")) {
            table.Columns.Add("Value", typeof(T));
        }

        // Enumerate the source sequence and load the scalar values into rows.
        table.BeginLoadData();
        using (IEnumerator<T> e = source.GetEnumerator()) {
            Object[] values = new object[table.Columns.Count];
            while (e.MoveNext()) {
                values[table.Columns["Value"].Ordinal] = e.Current;

                if (options != null) {
                    table.LoadDataRow(values, (LoadOption)options);
                } else {
                    table.LoadDataRow(values, true);
                }
            }
        }
        table.EndLoadData();

        // Return the table.
        return table;
    }

    public object[] ShredObject(DataTable table, T instance) {

        FieldInfo[] fi = _fi;
        PropertyInfo[] pi = _pi;

        if (instance.GetType() != typeof(T)) {
            // If the instance is derived from T, extend the table schema
            // and get the properties and fields.
            ExtendTable(table, instance.GetType());
            fi = instance.GetType().GetFields();
            pi = instance.GetType().GetProperties();
        }

        // Add the property and field values of the instance to an array.
        Object[] values = new object[table.Columns.Count];
        foreach (FieldInfo f in fi) {
            values[_ordinalMap[f.Name]] = f.GetValue(instance);
        }

        foreach (PropertyInfo p in pi) {
            values[_ordinalMap[p.Name]] = p.GetValue(instance, null);
        }

        // Return the property and field values of the instance.
        return values;
    }

    public DataTable ExtendTable(DataTable table, Type type) {
        // Extend the table schema if the input table was null or if the value 
        // in the sequence is derived from type T.            
        foreach (FieldInfo f in type.GetFields()) {
            if (!_ordinalMap.ContainsKey(f.Name)) {
                // Add the field as a column in the table if it doesn't exist
                // already.
                DataColumn dc = table.Columns.Contains(f.Name) ? table.Columns[f.Name]
                    : table.Columns.Add(f.Name, f.FieldType);

                // Add the field to the ordinal map.
                _ordinalMap.Add(f.Name, dc.Ordinal);
            }
        }
        foreach (PropertyInfo p in type.GetProperties()) {
            if (!_ordinalMap.ContainsKey(p.Name)) {
                // Add the property as a column in the table if it doesn't exist
                // already.
                DataColumn dc = table.Columns.Contains(p.Name) ? table.Columns[p.Name]
                    : table.Columns.Add(p.Name, p.PropertyType);

                // Add the property to the ordinal map.
                _ordinalMap.Add(p.Name, dc.Ordinal);
            }
        }

        // Return the table.
        return table;
    }
} 
```

现在您可以添加这些扩展：

```
public static class CustomLINQtoDataSetMethods {
    public static DataTable CopyToDataTable<T>(this IEnumerable<T> source) {
        return new ObjectShredder<T>().Shred(source, null, null);
    }

    public static DataTable CopyToDataTable<T>(this IEnumerable<T> source,
                                                DataTable table, LoadOption? options) {
        return new ObjectShredder<T>().Shred(source, table, options);
    }  
} 
```

瞧！现在`CopyToDataTable`适用于任何类型的`IEnumerable<T>`:)

# javascript - 在 JavaScript 中调用函数

> ID：13951332
> 
> 赞同：0
> 
> 时间：2012-12-19T11:24:47.807
> 
> 标签：javascript, jquery, html, url, inject

由于 url JavaScript 应该被注入到 webview 中，有人可以告诉我如何在下面的代码中调用`addPoints()`函数内部的函数吗？`basic`

```
<html>
<head>
<style type="text/css">
    #example {
        width: 650px;
        height: 450px;
    }
</style>
</head>
 <body>
      <div id="example"></div>
      <div id="controls">
           <button>Blue</button>
           <button>Green</button>
           <button>Red</button>
    </div>
     <script type="text/javascript" src="js/chart-high/jquery-1.8.3.js">                 </script>  
     <script type="text/javascript" src="js/chart-flotr2/flotr2.min.js"></script>
     <script type="text/javascript">

        (function basic(container) {

            var
               _ = Flotr._,
                d1 = [[0, 3], [4, 8], [8, -8], [9, 16]],
                d2 = [],
                d3 = [],
                show = [true, true, true],
                i,
                graph;

            // Generate first data set
            for (i = 0; i < 14; i += 0.5) {
                d2.push([i, Math.sin(i)]);
            }

            for (i = 0; i < 14; i += 1) {
                var randomN3 = Math.floor(Math.random() * 201) - 100
                d3.push([i, randomN3]);
            }

            $('#controls').delegate('button', 'click', function(e) {
                var
                index = $(e.currentTarget).index();
                show[index] = !show[index];
                drawGraph();
            });

            function **addPoints(dd1, dd2, dd3)** {
                var
                data = [
                    {data: dd1},
                    {data: dd2},
                    {data: dd3}
                ];

                _.each(show, function(show, index) {
                    data[index].hide = !show;
                });

                // Draw Graph
                return Flotr.draw(container, data, {
                    xaxis: {
                        minorTickFreq: 4
                    },
                    grid: {
                        minorVerticalLines: true
                    }
                }); 
            }

            function drawGraph() {
                var
                data = [
                    {data: d1},
                    {data: d2},
                    {data: d3}
                ];

                _.each(show, function(show, index) {
                    data[index].hide = !show;
                });

                // Draw Graph
                return Flotr.draw(container, data, {
                    xaxis: {
                        minorTickFreq: 4
                    },
                    grid: {
                        minorVerticalLines: true
                    }
                });
            }

            drawGraph();

        })(document.getElementById("example"));
    </script>
</body> 
```

以及如何`addPaoints`在以下代码中调用函数？

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script type="text/javascript" src="js/chart-high/jquery-1.8.3.js"></script>
<script type="text/javascript" src="js/chart-high/jquery-1.8.3.js"></script>
<script type="text/javascript">
$(function() {
    var chart;
    $(document).ready(function() {

        chart = new Highcharts.Chart({

            chart : {
                renderTo : 'container',
                type : 'line'
            },
            title : {
                text : 'Trycksignaler',
                x : -20
            //center
            },
            yAxis : {
                title : {
                    text : 'CAN-värden'
                }
            },
            series : [ {
                name : 'B4',
                data : [ 7.0, 6.9 ]
            }, {
                name : 'B5',
                data : [ -0.2, 0.8 ]
            }, {
                name : 'Overload',
                data : [ -0.9, 0.6 ]
            } ]

        });
    });

    function **addPaoints**(valY0, valY1, valY2) {
        for (i = 0; i < valY0.length; i++) {
            chart.series[0].addPoint(valY0[i]);
            chart.series[1].addPoint(valY1[i]);
            chart.series[2].addPoint(valY2[i]);
        }
    }

});
</script>
<script src="js/chart-high/highstock.js"></script>
<script src="js/chart-high/modules/exporting.js"></script>
</head>
<body bgcolor="#030303">
<div id="container" style="height: 400px; width: 700px"></div>
<!--        <button id="button" >Add point</button> -->
​
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:32:16.890

`addPoints`在函数内部定义（因此作用于该函数）。

如果不修改它，就无法从定义它的函数外部调用它。

这通常是通过让`var basic_namespace = (function basic(container) {`该函数返回一个包含公共方法的对象来实现的：

```
return { "addPoints": addPoints }; 
```

此时您可以调用：

```
basic_namespace.addPoints() 
```

另请参见[模块模式](http://briancray.com/posts/javascript-module-pattern)。

# c# - 简单的尾递归函数和循环一样有效吗？

> ID：13951333
> 
> 赞同：20
> 
> 时间：2012-12-19T11:24:51.130
> 
> 标签：c#, clr

有时我发现自己在编写尾递归函数。我一直在寻找高低，我发现.NET框架中有尾递归，但我不确定在什么情况下我可以，在什么情况下我不能有效地使用尾递归。例如，我有一棵简单的树，我们称之为

```
public class Tree
{
  public Tree parent = null;

  public Tree(Tree parent)
  {
    this.parent = parent;
    this.children = new List<Tree>();
  }

  public List<Tree> children {get; private set;}

  public Tree root
  {
    get
    {
      return this.parent == null ? this : parent.root;
    }
  }
} 
```

对于根属性，编译器会发出一个循环吗？它会发出.tail吗？抖动会尊重 .tail 吗？不会发生任何幻想，算法会递归运行吗？最重要的是，我应该将其重写为迭代吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T11:31:13.113

C# 编译器永远不会发出`tail`前缀。

如果调用处于尾部位置，F# 会这样做。尾递归是否适用取决于您遍历树的顺序。

在您的代码中，尾部位置没有任何内容。原因是使用了三元运算符。如果代码被重写为使用`if`每个分支返回的语句，那么对的调用`parent.root`将位于尾部位置。

在优化方面，编译器（F# 或 IronScheme）通常会将尾递归调用转换为`while (true) { ... }`循环。这样做是因为它消除了尾调用和再次调用该方法的需要。

因此，如果允许 C# 发出尾调用（它不是），它可能会转换为：

```
public Tree root
{
  get
  {
    if (parent == null) return this;
    else return parent.root; // now in tail position
  }
} 
```

到（只是一个猜测）

```
public Tree root
{
  get
  {
    Tree temp = this;
    while (true)
    {
      if (temp.parent == null)
      {
         return temp;
      }
      temp = temp.parent;
    }
  }
} 
```

F# 和 IronScheme 都执行相同的转换。这称为`tail call elimination`(TCE)。是的，它会比 C# 版本稍微快一点。（我已经通过`fib`C#、F# 和 IronScheme 的微基准测试对此进行了测试）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:59:19.130

[其他答案](https://stackoverflow.com/questions/491376/why-doesnt-net-c-optimize-for-tail-call-recursion)也有类似的答案。

关于速度。尾递归优化与小函数的循环并没有真正的不同。当尾调用优化触发时，只需将“调用”指令（在 x86 上）替换为“jmp”。当执行相同的循环时，您将有相同的“jmp”指令进入下一个循环。您应该记住的一点是，整个函数体将是循环体，因此您应该尝试最小化递归函数的大小。

# jquery - 使用 jQuery 删除 html5 必需的属性

> ID：13951336
> 
> 赞同：84
> 
> 时间：2012-12-19T11:24:52.723
> 
> 标签：jquery, attributes

嗨，我想用 jquery 删除 'required=""' 属性。

```
<input 
   type="text" 
   id="edit-submitted-first-name" 
   name="submitted[first_name]" 
   value="" 
   size="30" 
   maxlength="128" 
   required=""
> 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-12-19T11:26:41.693

只是：

```
$('#edit-submitted-first-name').removeAttr('required');​​​​​ 
```

如果您有兴趣进一步阅读，请查看[此处](http://api.jquery.com/removeAttr/)。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2017-08-14T09:02:22.720

如果你想设置为`true`

```
$(document).ready(function(){
$('#edit-submitted-first-name').prop('required',true);
}); 
```

如果你想设置为`false`

```
$(document).ready(function(){
$('#edit-submitted-first-name').prop('required',false);
}); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-12-19T11:33:04.877

## 使用 Javascript：

```
document.querySelector('#edit-submitted-first-name').required = false; 
```

*   [更多信息在这里](https://developer.mozilla.org/en-US/docs/Learn/HTML/Forms/Form_validation#The_required_attribute)

* * *

## 使用 jQuery：

```
$('#edit-submitted-first-name').removeAttr('required'); 
```

*   [更多信息在这里](https://api.jquery.com/removeAttr/)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2019-08-13T13:39:58.430

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-15T08:27:50.150

尽管 ID 选择器是最简单的，但您也可以使用名称选择器，如下所示：

```
$('[name='submitted[first_name]']').removeAttr('required'); 
```

有关更多信息，请参阅：[https ://api.jquery.com/attribute-equals-selector/](https://api.jquery.com/attribute-equals-selector/)

# jquery - jQuery UI 对话框（模态），防止任何回发

> ID：13951338
> 
> 赞同：6
> 
> 时间：2012-12-19T11:24:58.990
> 
> 标签：jquery, asp.net, jquery-ui

如何在 jQuery UI 对话框中进行 ASP.NET 提交按钮回发？

实际上，我正在使用 UI 对话框模式，就像我们使用 Ajax 控件工具包的模式一样，来更新存储在 gridview 控件中的数据值。我可以做所有事情，但我无法使用 UI 模式触发回发。我对 jQuery 及其 UI 有点陌生，所以找不到一个好的解决方案。

对于 Ajax 工具包的 modal，我们曾经设置一个 trigger 属性，以便在有人单击其提交按钮时启用回发，但在这里这似乎是不可能的。以下是我的代码：

```
//------------Modal first----------------
<div id="editEventModal" title="Edit Event Details" style="display:none">
//-------Here are my controls with asp.net validators
 <asp:Button ID="btnEditEvent" runat="server" Text="Save" ValidationGroup="EditEvent"  />
</div>

//--------- JavaScript/jQuery method for calling popup
function invokeEditPopup(){
    $("#editEventModal").dialog({
        width: 700,
        modal: true
    });
}
//-- Please not that I have not used UI_Dialog's predefined `OK`, `Cancel` buttons as I need to validate my form with asp.net validators on submit button's `click` event. 
```

在 gridview 中，我在事件中添加了 javascript 事件`invokeEditPopup()`到按钮（将用于弹出对话框）`GridView_DataBound`。

如何使`btnEditEvent`对话框的回发，以便在服务器上执行所需的过程。

-----------------------有关更多信息------------------ 我尝试使用来自*[jQuery的想法带有 ASP.NET 按钮回发的 UI 对话框](https://stackoverflow.com/questions/757232)*。

在 JavaScript 中定义我的对话框下方，我尝试使用（当然单独）：

```
$("#editEventModal").parent().appendTo($("form"));

//--------And---------------
$(".ui-dialog").parent().appendTo($("form"));

//--------And---------------
$("#editEventModal").parent().prependTo($("form"));

//--------And---------------
$(".ui-dialog").parent().prependTo($("form")); 
```

但它不能正常工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T12:01:08.217

最后，我得到了答案： Stack Overflow question *[An ASP.NET button click event is not fire](https://stackoverflow.com/a/7673768/1584140)*。感谢 PirateKitten。

我需要做的只是在我用 JavaScript 创建的对话框下方添加以下内容，它就像魅力一样。

```
$("#editEventModal").parent().appendTo(jQuery("form:first")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-23T15:46:47.140

您还可以添加 CSS 修改以确保对话框不会停留在覆盖 div 后面。

```
$("#editEventModal").parent().appendTo(jQuery("form:first")).css({"z-index":"101"}); 
```

# python - Python：用于从“一天、一天、一天从小时到分钟”获取组的正则表达式

> ID：13951343
> 
> 赞同：-1
> 
> 时间：2012-12-19T11:25:26.853
> 
> 标签：python, regex, find

这是我的输入字符串

```
1\. Mon,Tue,Wed from 10AM to 12PM
2\. Mon from 10AM to 12PM
3\. Mon, Tue, Wed, Thu from 10AM to 12PM 
```

我希望我的小组成为

```
1\. ["Mon,Tue,Wed", "10AM","12pm"]
2\. ["Mon", "10AM", "12PM"]
3\. ["Mon, Tue, Wed, Thu", "10AM", "12PM"] 
```

这里第一组带有用逗号分隔的 3 个字母工作日，我不清楚如何找到 RegEx 以找到其中的第一组。

我试过了：

```
(^((mon|tue|wed|thu|fri|sat|sun|mo|tu|we|th|fr|sa|su|m|w|f),?){1,} # Weekday
\s*[from]*\s* # Seperator
(\d{1,2}(?:[:]\d{1,2})?)\s*([ap][.]?m.?) # Start hour
\s*[-,(to)]+\s* # Seperator
(\d{1,2}(?:[:]\d{1,2})?)\s*([ap][.]?m.?)) # Close hour 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:29:25.963

您在这里不需要正则表达式，只需使用关键字 'from' 和 'to' 进行拆分 -

例如，如果 s 是您的字符串 -

```
>>> s.split('from')[0]
'Mon,Tue,Wed '
>>> s.split('from')[1].split('to')
[' 10AM ', ' 12PM'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T11:29:39.177

旨在与`re.findall`. 在第 1、第 2 和第 3 个捕获组中捕获的结果。后面的添加基于您在评论中输入的正则表达式。

```
r'(?i)((?:sun|mon|tue|wed|thu|fri|sat)(?:\s*,\s*(?:sun|mon|tue|wed|thu|fri|sat))*)\s+from\s+(\d{1,2}(?::\d{1,2})?(?:[ap]m|[ap]\.m\.))(?:\s+to\s+|\s*[-,]\s*)(\d{1,2}(?::\d{1,2})?(?:[ap]m|[ap]\.m\.))' 
```

正则表达式分解：

*   不区分大小写

    ```
    (?i) 
    ```

*   一周中的日子列表。允许灵活的间距。不允许尾随或额外`,`：

    ```
    ((?:sun|mon|tue|wed|thu|fri|sat)(?:\s*,\s*(?:sun|mon|tue|wed|thu|fri|sat))*) 
    ```

*   前后必须至少有一个空格`from`。

    ```
    \s+from\s+ 
    ```

*   匹配数字后跟 AM/PM（可以是`am`or `a.m.`，但不是`a.m`or `am.`- 与 相同`pm`）。还允许可选地指定分钟。

    ```
    (\d{1,2}(?::\d{1,2})?\s*(?:[ap]m|[ap]\.m\.)) 
    ```

*   我放宽了`to`part 的条件： to 部分可以是`to`, or`-`或`,`. 之前和之后必须有空格`to`，但之前`-`/`,`成功不需要空格。

    ```
    (?:\s+to\s+|\s*[-,]\s*) 
    ```

*   和上面一样

    ```
    (\d{1,2}(?::\d{1,2})?\s*(?:[ap]m|[ap]\.m\.)) 
    ```

这种方法在将输入拆分为令牌的同时，也验证了令牌。

如果不需要验证，您可以按照`theharshest`建议使用拆分。我会先使用`re.split`并拆分`r'\s+from\s+'`，然后将第二个令牌拆分为`r'\s*(to|[-,])\s*'`.

# sql - sql查询中的无限循环

> ID：13951352
> 
> 赞同：0
> 
> 时间：2012-12-19T11:25:46.500
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在执行插入查询时，我得到了无限循环（我认为是这样）。它永远不会结束。以下是我的查询

```
ALTER proc [dbo].[InsertNomineeImage] 
@UserId int,
@ContestId int,
@ImagePath varchar(150),
@Name varchar(50),
@Description varchar(500)

As
BEGIN
    Begin TRY
        BEGIN TRAN

        Declare @Id as int

        insert into UserImages(UserId,ImagePath,Name,Description,IsActive) 
        values(@UserId,@ImagePath,@Name,@Description,'False')

        set @Id=SCOPE_IDENTITY();

        Insert into UserContestImages(UserId,ContestId,UserImage,ParticipationDate,IsActive) 
        values (@UserId,@ContestId,@Id,GETDATE(),'False')

        COMMIT TRAN

    END TRY
    BEGIN CATCH
        IF @@ERROR > 0
            ROLLBACK TRAN

    END CATCH

End 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:19:29.820

这是一个阻塞问题而不是循环的可能性很高。

运行时，打开 SSMS 并运行 SP_WHO2 ACTIVE。它会向您显示所有正在做某事的 spid - 您的将在那里。有一列'BlkBy' - 如果该列中有一个数字，则查询被阻塞（等待另一个进程完成并释放其锁定），这就是阻塞查询的会话数。调查那个会话在做什么，你就会得到答案。

# python - 在python中构建了一个带有变量值和固定值的字典

> ID：13951355
> 
> 赞同：0
> 
> 时间：2012-12-19T11:26:08.093
> 
> 标签：python, dictionary, while-loop

我有一个包含参数及其值的字典，我使用交互式程序从控制台检索这些参数及其值。

```
mydic = { 'n': Nvalue , 'p': Pvalue } 
```

我想固定一个值并通过一个步骤在最小值和最大值之间改变另一个值。例如，如果用户选择改变 p，他必须选择最小值和最大值以及步长。我必须尽可能地拥有 at 和 as 字典。

```
min = 0.2
max = 0.5
step = 0.2
n = 3 
```

结果，我将拥有：

```
mydic = { 'n': 3 , 'p': 0.2 }
mydic = { 'n': 3 , 'p': 0.4 } 
```

这是我写的代码。我没有设法更新字典以获得不同的可能性

```
if var_param == param["name"]:
   minimum = int(input("  Choose the min value of " + var_param + " : "))
   maximum = int(input("  Choose the max value of " + var_param + " : "))
   step = int(input("  Choose the step of the variation : "))

   i = minimum
   while i <= maximum :
       mydic.update({var_param: i+step})
       i= i + step

if var_param != param["name"]:
   mydic.update({param["name"]: int(input("Choose the value of "+ param["name"]+ " : "))})
print(mydic) 
```

我只有一本字典。我知道问题出在 while 循环中，但我不知道如何解决它以获取所有可能具有正确值的字典。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:53:38.450

您正在 while 循环中替换旧字典。您需要分配一个数组 [minimum, step, step, step, maximum] 作为 dict 键的值。

# sql - 在 VBA 中使用参数时 SQL Recordset 不返回任何值

> ID：13951357
> 
> 赞同：2
> 
> 时间：2012-12-19T11:26:19.887
> 
> 标签：sql, vba, excel-2010

我是这个论坛的新手，对 VBA 和 SQL 也很陌生，所以我不知道这个问题是否很好地描述了这个问题。我已经解决了几天的问题，但我无法找到解决方案。我想从 excel 的单元格中设置客户代码“k_kod”，但它不起作用。它什么也不返回。如果我直接在 SQL 语句中设置“k_kod = '275'”，它就可以正常工作。它也适用于例如“vg_kod”或“pa_datum”上的参数（？）。我还尝试了一个更简单的代码字符串，然后我设法让它与“k_kod”上的参数输入一起工作。但在那段代码中，它没有嵌套的 WHERE 子句。

是因为“k_kod”在两个“WHERE 子句”中吗？

这是代码：

```
Sub grunddata_salj()
Sheets("Summary").Select
Dim Conn1_res As ADODB.Connection
Dim Cmd1_res As ADODB.Command
Dim Param1_res As ADODB.Parameter
Dim Param2_res As ADODB.Parameter
Dim Rs1_res As ADODB.Recordset
On Error Resume Next

Set Conn1_res = New ADODB.Connection
Conn1_res.ConnectionString = "DSN=xxx AB;uid=;pwd=;"
Conn1_res.Open

Set Rs1_res = New ADODB.Recordset
Set Cmd1_res = New ADODB.Command

Cmd1_res.ActiveConnection = Conn1_res
Cmd1_res.CommandText = "SELECT art_artnr, pa_datum, pa_pris " & _
  "FROM m.prisandring as A, m.artikel, m.kundart, m.kund " & _
  "WHERE pa_datum = " & _
    "( " & _
        "SELECT max(pa_datum), FROM m.kund, m.prisandring AS B " & _
        "WHERE a.pa_id = b.pa_id " & _
        "AND pa_datum < '2012-01-01' " & _
        "AND pa_kl_id = kund.k_id " & _
        "AND k_kod = ? " & _
    ") " & _
  "AND artikel.art_id = pa_id " & _
  "AND pa_prislista = '-3' " & _
  "AND kundart.art_id = artikel.art_id " & _
  "AND kundart.k_id = kund.k_id " & _
  "AND pa_kl_id = kund.k_id " & _
  "AND vg_kod <> '1' " & _
  "AND k_kod = ? " & _
  "GROUP BY art_artnr, pa_datum, pa_pris " & _
  "ORDER BY art_artnr"

Set Param1_res = Cmd1_res.CreateParameter(, adInteger, adParamInput)
Param1_res.Value = "275"
Cmd1_res.Parameters.Append Param1_res
Set Param2_res = Cmd1_res.CreateParameter(, adInteger, adParamInput)
Param2_res.Value = "275"
Cmd1_res.Parameters.Append Param2_res

Set Rs1_res = Cmd1_res.Execute()
artno = Rs1_res("art_artnr")
p_date = Rs1_res("pa_datum")
p_price = Rs1_res("pa_pris")

Conn1_res.Close
Rs1_res.Close

End Sub 
```

我将非常感谢您对此提供的一些帮助。

# php - 测试在 PHPUnit 中不会调用任何方法（无论名称如何）？

> ID：13951358
> 
> 赞同：7
> 
> 时间：2012-12-19T11:26:22.010
> 
> 标签：php, unit-testing, phpunit

部分测试对象：

```
class AddOptionsProviderArgumentPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        if(!$container->hasDefinition('gremo_highcharts')) {
            return;
        }

        if(!$container->hasParameter('gremo_highcharts.options_provider')) {
            return;
        }

        // ...
    }
} 
```

我想断言：

*   `hasDefinition()`使用参数“gremo_highcharts”调用将返回`false`
*   方法`process()`返回，即不会调用其他方法

一种解决方案是断言后续调用`hasParameter()`：

```
public function testProcessWillReturnIfThereIsNoServiceDefinition()
{
    $container = $this->getMockedContainerBuilder();
    $pass = new AddOptionsProviderArgumentPass();

    $container->expects($this->once())
        ->method('hasDefinition')
        ->with($this->equalTo('gremo_highcharts'))
        ->will($this->returnValue(false));

    // Expects that hasParameter() is never invoked
    $container->expects($this->never())
        ->method('hasParameter');

    $pass->process($container);
} 
```

但这似乎不是一个优雅的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T21:09:12.713

表达`any method`你可以使用`$this->anything()`.

## 完整示例：

```
<?php

class fooTest extends PHPUnit_Framework_TestCase {
    public function testNeverCallNothing() {
        $mock = $this->getMock('mockMe');
        $mock->expects($this->never())->method($this->anything());
        //$mock->bar();
    }
}

class mockMe {
    public function bar() {}
} 
```

输出：

```
PHPUnit 3.7.10-4-ga0bccf3 by Sebastian Bergmann.

.

Time: 0 seconds, Memory: 6.50Mb

OK (1 test, 1 assertion) 
```

## 在方法调用中注释时

```
$mock->bar(); 
```

然后它输出：

```
PHPUnit 3.7.10-4-ga0bccf3 by Sebastian Bergmann.

F

Time: 0 seconds, Memory: 6.50Mb

There was 1 failure:

1) fooTest::testNeverCallNothing
mockMe::bar() was not expected to be called.

.../tests/neverCallMe/fooTest.php:9

FAILURES!
Tests: 1, Assertions: 0, Failures: 1. 
```

* * *

# 只允许一个方法调用，但不允许调用其他方法

这看起来有点难看，但也有效

```
<?php

class fooTest extends PHPUnit_Framework_TestCase {

    public function testNeverCallNothing() {
        $mock = $this->getMock('mockMe');
        $mock->expects($this->once())->method('foo');
        $mock->expects($this->never())->method(
            $this->logicalNot($this->matches('foo'))
        );
        $mock->foo();
        //$mock->bar();
    }

}

class mockMe {
    public function bar() {}
    public function foo() {}
} 
```

作品。在其他方法调用中进行评论时，它会像上面一样失败。

如果想要允许调用多个方法，它会变得更加冗长：

```
$this->logicalNot(
    $this->logicalOr(
        $this->matches('foo'),
        $this->matches('baz'),
        $this->matches('buz')
    )
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:29:48.623

是特例吗？如果是这样，您可以将第**一个返回**（为什么仍然返回 void？）更改为**抛出特定异常**。然后使用 PHPUnit 来验证是否确实捕获了该特定异常。

编辑：同样使用 Phake，您可以在测试结束时编写类似这样的内容：（类似于使用 PHPUnit Mock Objects 调用 ->never()）

```
Phake::verify($container, Phake::times(0))->hasParameter(); 
```

这在存根方法调用和验证方法（是否已存根）已被调用之间产生了区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T06:34:07.540

在测试此类方法时，请尝试查看全局。不要下降到`if`s和`return`s的水平，拿它更高。通过断言在 之后没有进行其他调用`return`，您真正测试的是 PHP 的本机语句，而不是您的方法的逻辑。就像你不信任`return`s。相信我的话，`return`在该方法中没有执行任何语句之后:)

相反，测试你的方法的逻辑！

**逻辑是什么？**

好吧，根据你的代码，你有这个类`AddOptionsProviderArgumentPass`和它的`process`方法。该`pocess`方法采用 a`ContainerBuilder`并以某种方式对其进行处理。因此，您需要测试的是该`process`方法是否能很好地完成它的工作。您`if`在方法中的 s 表示需要满足一些约束才能成功处理`ContainerBuilder`.

**您如何理解是否`process`成功？**

通过它的返回类型。

**如果它不返回任何东西怎么办？**

检查它的副作用。您对`ContainerBuilder`.

所以，这就是我的看法。

```
/**
 * @test
 */
public function shouldNotProcessWithoutHighcharts()
{
    // Arrange
    $container = $this->buildContainer();
    $container->removeDefinition('gremo_highcharts');
    $pass = new AddOptionsProviderArgumentPass();

    // Act
    $pass->process($container);

    // Assert
    $this->assertFalse($container->hasWhatYouNeedItToHaveAfterProcessing())
}

/**
 * @test
 */
public function shouldNotProcessWithoutHighchartsOptionsProvider()
{
    // Arrange
    $container = $this->buildContainer();
    $container->getParameterBag()->remove('gremo_highcharts.options_provider');
    $pass = new AddOptionsProviderArgumentPass();

    // Act
    $pass->process($container);

    // Assert
    $this->assertFalse($container->hasWhatYouNeedItToHaveAfterProcessing())
}

private function buildContainer()
{
    $container = new ContainerBuilder();
    $container->setParameter('gremo_highcharts.options_provider');
    $container->setDefinition('gremo_highcharts');
    return $container;
} 
```

**最后注**

不要依赖`if`s的顺序，它可以改变！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-03T13:54:55.273

也许创建 Phake 模拟并调用

```
Phake::verifyNoInteraction($mock); 
```

是解决这个问题的好方法。这是手册的链接：[https](https://phake.readthedocs.io/en/2.1/method-verification.html#verifying-no-interaction-with-a-mock-so-far) ://phake.readthedocs.io/en/2.1/method-verification.html#verifying-no-interaction-with-a-mock-so-far 。

# math - 如何使用 Kivy 渲染数学表达式？

> ID：13951363
> 
> 赞同：3
> 
> 时间：2012-12-19T11:26:28.207
> 
> 标签：math, rendering, calculator, kivy

我正在使用 Kivy 制作计算器，并想做一些类似于一些卡西欧计算器中的自然教科书显示的事情 (http://www.casio-intl.com/asia-mea/en/calc/scientific /ntd/)。还有另一个程序支持这种显示（http://algebrator.software.informer.com/）。

所以基本上用户输入表达式，表达式的输出应该类似于“自然教科书”显示。将其集成到我的 Kivy 程序中的最佳方法是什么？有没有我可以用来做这个的库？

我记得我的一个朋友在 Python 中使用 LaTeX 来显示这样的表达式，但我认为这些只是图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T20:29:51.263

由于 kivy 有一个 RST 渲染器，我在这个方向上挖了一点，但似乎只能回到乳胶，只是让事情变得更容易（也许）。[http://svn.python.org/projects/doctools/trunk/doc/ext/math.rst](http://svn.python.org/projects/doctools/trunk/doc/ext/math.rst)

# backbone.js - Backbone 中的部分模型编辑和验证

> ID：13951369
> 
> 赞同：2
> 
> 时间：2012-12-19T11:26:52.317
> 
> 标签：backbone.js

我正在寻求一些关于如何在 Backbone 中处理模型的部分编辑和验证的建议。

我有一个包含 20 多个属性的工资单模型。用户可以编辑工资单的一部分（例如加班属性），应用程序将显示一个模式对话框，用户可以更改与加班相关的四个属性。

用于编辑加班的模式对话框有一个相关的主干视图“OvertimeEditor”，其中包含视图逻辑。有 10 个这样的视图/模式对话框用于处理不同的属性。

编辑器视图不直接与模型交互，对此有一个中介。调解器在视图上调用一个参数化函数，该函数填充并显示模态对话框。当用户点击保存视图然后调用调解器上的参数化函数来更新模型属性。

我应该如何处理对话框中的验证？即我只想验证有问题的四个属性，而不是整个模型。

编辑器视图当前不使用模型。我应该创建仅用于编辑器视图的模型吗？例如PayslipOvertime 模型？或者我应该在视图中手动实现验证（听起来不对）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T17:42:41.720

我会考虑继续维护一组工资单模型，每个模型都包含一组具有“可编辑”成员的属性。这样可以避免分配额外的对象。

```
[
  {name: "Overtime", value:10, editable:true, required:true },
  {name: "hours", value:40, editable:false, required:false },
  ...
] 
```

如果我正确理解您的问题，我宁愿依靠这些可编辑或必需的属性进行验证，而不是创建其他模型。

# validation - BreezeJS 不会自动解析使用 KnockoutJS 绑定保存为字符串的数字

> ID：13951370
> 
> 赞同：2
> 
> 时间：2012-12-19T11:26:52.307
> 
> 标签：validation, knockout.js, breeze

我使用以下代码使用 Breezejs 查询我的数据库：

```
viewModel = {
    products = ko.observableArray([])
};

var manager = new entityModel.EntityManager('/api/Products');
manager.executeQuery(query)
       .then(function (data) {
           viewModel.products.removeAll();
           viewModel.products(data.results);
       }); 
```

但是，产品行包含使用该属性连接到我的页面的 Quantity 等数字`data-bind`属性。通过保存模型时`manager.saveChanges()`出现验证错误。这是因为 KnockoutJS 将编辑后的数字保存为字符串。

解决此问题的推荐方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:12:23.560

一种选择是创建一个 CustomBinding。

我将其用于小数：

```
ko.bindingHandlers.decimal = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        $(element).blur(function () {
            var value = valueAccessor();
            var valor = Globalize.parseFloat($(element).val());
            if (ko.isWriteableObservable(value)) {
                value(valor);
                ko.bindingHandlers.decimal.update(element, valueAccessor);
            }
        });
    },
    update: function (element, valueAccessor, allBindingsAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).val(Globalize.format(value, "n2"));
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T09:05:07.250

从breeze v 0.80.2 开始，现在支持此功能。（以及自定义类型强制的能力）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:38:59.540

这是个好问题。

目前，breeze 不会尝试类型强制，但是......

我们已经讨论过让 Breeze 自动尝试将 set 操作中使用的任何值强制转换为正在设置的属性的数据类型（如 brew 元数据中定义的那样）。这将发生在所有绑定库（即角度、主干等）以及淘汰赛中。

请随时将此添加到微风[用户语音](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions)中。我们非常重视这些意见。

# ios - 在 UIDeviceOrientationLandscapeLeft 和 UIDeviceOrientationLandscapeRight 中实现相同的页面转换

> ID：13951376
> 
> 赞同：0
> 
> 时间：2012-12-19T11:27:02.957
> 
> 标签：ios, uiinterfaceorientation, uiviewanimationtransition, page-curl, uideviceorientation

我在 iOS 6.0 sdk 中开发项目，它应该在 iOS4.3+ 设备上运行，在我的项目中，我使用页面卷曲来导航页面之间，但是 LandscapeLeft 中发生的页面卷曲与 Landscape Right 中的 Pagecurl 不同。
我希望在横向左侧发生的相同页面卷曲在横向右侧。
请查看链接以更好地理解。 [视频演示链接](http://www.youtube.com/watch?v=03Ck0cO4Mfk&feature=youtu.be)

我使用的代码如下所示

```
 -(IBAction)nextBtnTapped {

    UIDeviceOrientation deviceOrientation=[UIDevice currentDevice].orientation;

    page2 *Obj=[[page2 alloc]init];

    [UIView beginAnimations:nil context:NULL];

    [UIView setAnimationDuration:1];

    if (deviceOrientation==UIDeviceOrientationLandscapeLeft) 

        [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.navigationController.view cache:NO];

    else if(deviceOrientation==UIDeviceOrientationLandscapeRight) 

        [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self.navigationController.view cache:NO];

    [self.navigationController pushViewController:Obj animated:NO];

    [UIView commitAnimations];
}

-(IBAction)prevBtnTapped {

    UIDeviceOrientation deviceOrientation=[UIDevice currentDevice].orientation;

    [UIView beginAnimations:nil context:NULL];

    [UIView setAnimationDuration:0.8];

    if (deviceOrientation==UIDeviceOrientationLandscapeLeft) 

        [UIView setAnimationTransition:UIViewAnimationTransitionCurlDown forView:self.navigationController.view cache:NO];

    else if(deviceOrientation==UIDeviceOrientationLandscapeRight) 

        [UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.navigationController.view cache:NO];

    [self.navigationController popViewControllerAnimated:YES];

    [UIView commitAnimations];
} 
```

谁能告诉我我在这段代码中做错了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:40:01.090

`UIDeviceOrientationLandscapeLeft`页面卷曲被窃听。你不会让它正常工作。

# blackberry - 标签字段在字体设置期间变得笨拙

> ID：13951386
> 
> 赞同：0
> 
> 时间：2012-12-19T11:27:18.643
> 
> 标签：blackberry

我在模拟器上遇到黑莓 5 和 6 操作系统的问题 当我设置字体时标签字段变得笨拙，在黑莓 7 中运行良好

**这是我的示例代码**

```
 LabelField _lblTitle3 = 
      new LabelField(offerStatus, 
                     USE_ALL_WIDTH | Field.FIELD_VCENTER |
                     LabelField.ELLIPSIS | Field.NON_FOCUSABLE) {

       protected void drawFocus(Graphics graphics, boolean on) {
       };

       protected void paintBackground(Graphics graphics) {
           String offerStatus = _offerObj.getCategoryStatus();

           int color;
           if (offerStatus.equalsIgnoreCase("Saved"))
              color = Color.BLUE;
           else if (offerStatus.equalsIgnoreCase("Accepted!"))
              color = Color.GREEN;
           else
              color = Color.BLACK;

           if (_isFocus) {
               graphics.setColor(Color.WHITE);
           } else {
               graphics.setColor(color);
           }

           super.paint(graphics);
       };
   };

   Font myFont = Font.getDefault();
   FontFamily typeface = FontFamily.forName("Times New Roman");
   int fType = Font.BOLD
   int fSize = 12
   myFont = typeface.getFont(fType, fSize);
   _lblTitle3.setFont(myFont); 
```

图片如下

![查看字段重叠](../Images/5175161359266519773e719f92cedb78.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:45:59.180

**你想做什么？只是改变字体颜色？**

如果是这样，您可能不想覆盖`paintBackground()`.

在您的实现中`paintBackground()`，您正在调用`super.paint()`. 我不确定那会做什么，但如果那是错误的，我不会感到惊讶。

`paint()`并且`paintBackground()`是两个不同的东西。

如果您只想根据文本和焦点状态更改字体颜色，只需将该逻辑放在`paint()`方法中，然后不理`paintBackground()`会（不要覆盖它）。

此外，当您更改`Graphics`上下文时，要执行设置新颜色之类的操作，通常先存储旧颜色然后再重置它更安全。像这样的东西：

```
 protected void paint(Graphics graphics) {
            int oldColor = graphics.getColor();

            String offerStatus = _offerObj.getCategoryStatus();
            int color;
            if (offerStatus.equalsIgnoreCase("Saved"))
                color = Color.BLUE;
            else if (offerStatus.equalsIgnoreCase("Accepted!"))
                color = Color.GREEN;
            else
                color = Color.BLACK;

            if (_isFocus) {
                graphics.setColor(Color.WHITE);
            } else {
                graphics.setColor(color);
            }
            super.paint(graphics);

            graphics.setColor(oldColor);
        }; 
```

# javascript - 如何转换 VBS On error resume Next to java script

> ID：13951399
> 
> 赞同：1
> 
> 时间：2012-12-19T11:27:43.247
> 
> 标签：javascript, vbscript

```
On Error Resume Next
    frmDetail.Description<%=nLineCount%>.readonly = False
    frmDetail.DetailedDescription<%=nLineCount%>.readonly = False
On Error GoTo 0 
```

我有上面的vb脚本代码段。我需要将其转换为 java 脚本。我该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:37:55.850

```
// The direct translation:

try {
    frmDetail.Description<%=nLineCount%>.readonly = false;
} catch(err) {}

try {
    frmDetail.DetailedDescription<%=nLineCount%>.readonly = false;
} catch(err) {}

// The right way:

if (frmDetail)
{
    if (frmDetail.Description<%=nLineCount%>){
        frmDetail.Description<%=nLineCount%>.readonly = false;
    }
    if (frmDetail.DetailedDescription<%=nLineCount%>){
        frmDetail.DetailedDescription<%=nLineCount%>.readonly = false;
    }
} 
```

# android - 更新了启动器活动的应用程序更改导致崩溃

> ID：13951402
> 
> 赞同：0
> 
> 时间：2012-12-19T11:27:53.767
> 
> 标签：android

我已经通过更改启动器活动类更新了我的应用程序。用户报告有关其应用程序图标和快捷方式的问题不起作用。我想知道这是操作系统特定的问题吗？？？

错误他们得到“链接器不可用”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:32:53.320

是的，如果您更改了曾经是意图启动器的 Activity 的类名，或者将其从启动器中删除，那么人们当前的快捷方式将不起作用。

最简单的答案是告诉他们删除快捷方式并重新添加它。

长期解决方案是自己以编程方式执行此操作（我相信只有最新的 Android API）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:36:18.757

在清单文件中注册新的启动器类。

# php - 如果设置为 false，cUrl 继续发送标头信息

> ID：13951403
> 
> 赞同：1
> 
> 时间：2012-12-19T11:28:00.570
> 
> 标签：php, curl, header, http-headers, zend-framework2

使用 cUrl，我想在使用 SimpleXmlElement 之后获取一个 xml 文件来读取它。但是因为 cUrl 继续在响应中发送标头信息，所以我的 XML 文档无效。

我该怎么做才能留下 HTTP 标头信息？

我返回的部分数据：

```
string(8056) "HTTP/1.1 200 OK\r\nServer: Apache-Coyote/1.1\r\nContent-Type: text/xml\r\nDate: Wed, 19 Dec 2012 11:15:45 GMT\r\n\r\n
    <?xml version="1.0"?>\n 
```

我的代码（ZF2）

```
$request = new Request();
        $request->setUri($url);

        $adapter = new Curl();
        $client  = new Client();
        $client->setAdapter($adapter);

        $adapter->setOptions(array(
            'curloptions' => array(
                CURLOPT_HEADER => 0,
                CURLOPT_RETURNTRANSFER => 1,
                CURLOPT_CONNECTTIMEOUT => 4,
            )
        ));

        $response = $client->dispatch($request); 
```

提前致谢！

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:23:01.080

需要使用'$response->getBody();' ！这成功了。

$request = 新请求（）；$request->setUri($url);

```
 $adapter = new Curl();
    $client  = new Client();
    $client->setAdapter($adapter);

    $adapter->setOptions(array(
        'curloptions' => array(
            CURLOPT_RETURNTRANSFER => 1,
            CURLOPT_CONNECTTIMEOUT => 4,
        )
    ));

    $response = $client->send($request);
    $data = $response->getBody();

    return $data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:46:42.737

根据 PHP 手册，CURLOPT_HEADER 应该设置为 true 或 false。

**要删除标头输出，只需添加以下代码：**

```
CURLOPT_HEADER => false 
```

我不知道您使用的是什么 cURL 类，因为 PHP 中没有此类内置类。

**完整代码：**

```
$request = new Request();
$request->setUri($url);

$adapter = new Curl();
$client  = new Client();
$client->setAdapter($adapter);

$adapter->setOptions(array(
    'curloptions' => array(
        CURLOPT_HEADER => false,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_CONNECTTIMEOUT => 4
    )
));

$response = $client->dispatch($request); 
```

这对你有用吗？否则我会给你一个更新的答案。

# c# - ID 中的服务器标记错误

> ID：13951405
> 
> 赞同：0
> 
> 时间：2012-12-19T11:28:04.307
> 
> 标签：c#, asp.net

有人可以告诉我我哪里错了吗？

```
<asp:TextBox ID="txtComentario_<%# Eval('Id').ToString() %>" 
       TextMode="MultiLine" runat="server"></asp:TextBox> 
```

**错误**

`Parser Error Message: Make the server is not formed correctly.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:35:40.193

尝试以下

```
 <asp:TextBox ID='<%# Eval("Id","txtComentario_{0}") %>' TextMode="MultiLine" Text="" runat="server"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:38:34.560

控件的 ID 属性只能使用标签中的 ID 属性设置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:49:52.293

您应该使用`Bind`而不是`Eval`，该`Bind`方法通常与输入控件一起使用，例如`TextBox`.

试试看：-

```
<asp:TextBox ID='txtComentario_<%# Bind("Id") %>' TextMode="MultiLine" runat="server"></asp:TextBox> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:53:39.543

如果要向文本框添加额外信息，可以向其添加属性。

```
TextBox1.Attributes.Add("customAttribute", "value"); 
```

# java - mvn 声纳：声纳投掷错误

> ID：13951409
> 
> 赞同：1
> 
> 时间：2012-12-19T11:28:11.187
> 
> 标签：java, maven, maven-3, sonarqube

我正在为我的项目使用 SONAR。当我执行`mvn sonar:sonar`时，它会抛出

`java.lang.VerifyError: Instruction type does not match stack map in method`

这是在我将 JDK 更新到 1.7.0_09 并将 maven 更新到 3.0.4 之后。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:48:26.297

请在 maven 的 setting.xml 中配置服务器。

**更新**

在你`setting.xml`的 Maven 中添加

```
<profile>
   <id>sonar</id>
   <activation>
      <activeByDefault>true</activeByDefault>
   </activation>
   <properties>
      <sonar.jdbc.url>jdbc:postgresql://localhost/sonar</sonar.jdbc.url>
      <sonar.jdbc.driver>org.postgresql.Driver</sonar.jdbc.driver>
      <sonar.jdbc.username>user</sonar.jdbc.username>
      <sonar.jdbc.password>password</sonar.jdbc.password>
      <!-- SERVER ON A REMOTE HOST -->
      <sonar.host.url>http://localhost:9000</sonar.host.url>
   </properties>
</profile> 
```

# sql-server - 如何在没有 ON DELETE CASCADE 的情况下进行 DELETE（冲突 REFERENCE 约束）

> ID：13951410
> 
> 赞同：4
> 
> 时间：2012-12-19T11:28:12.177
> 
> 标签：sql-server, tsql, cascading-deletes

我有一个巨大的遗留数据库，其中一个表有多个外键指向另一个表，并且看不到一个级联，类似于下面的示例表：

```
create table Users (
    Id int primary key identity,
    Name varchar(max)
)

create table Products (
    Id int primary key identity,
    Name varchar(max),
    CreatedBy int foreign key references Users(Id),
    UpdatedBy int foreign key references Users(Id)
)

insert into Users values('Bar')
insert into Users values('Baz')
insert into Products values('Foo', 1, 2) 
```

我需要能够删除一些旧数据，但它当然会引发引用异常：

```
delete from Users where Name='Bar' 
```

> DELETE 语句与 REFERENCE 约束“FK__Products__Create__1AD3FDA4”冲突。冲突发生在数据库“Foo”、表“dbo.Products”、列“CreatedBy”中。

* * *

由于数据库的复杂性，我无法预先删除所有引用，因此我尝试以编程方式添加临时外键，并设置级联来解决它们。但是，对于这个具有多个指向另一个表的外键的特定表，这会导致`cycles or multiple cascade paths`第二个`UpdatedBy`更改：

```
alter table Products add foreign key (CreatedBy) references Users(Id) on delete cascade
alter table Products add foreign key (UpdatedBy) references Users(Id) on delete cascade 
```

> 在表“Products”上引入 FOREIGN KEY 约束“FK__Products__Update__1DB06A4F”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

* * *

我怎样才能`delete from Users where`在保持参照完整性的同时工作，无论是通过某种方式解决多个级联路径问题还是其他方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:57:50.760

我个人不会这样做（我会预先删除所有引用的数据并手动检查完整性）。请参阅：[可以使用 T-SQL 临时禁用外键约束吗？](https://stackoverflow.com/questions/159038/can-foreign-key-constraints-be-temporarily-disabled-using-t-sql)

引用：

```
-- disable all constraints
EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all" 
```

禁用约束后删除您的数据，但请记住之后再次打开它们！

```
-- enable all constraints
EXEC sp_msforeachtable @command1="print '?'", @command2="ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all" 
```

另请注意，存储过程`sp_msforeachtable`未记录在案，可能会在 SQL Server 的未来版本中消失。

如果您不想完全禁用约束（也许您有一个适用的表列表），那么只需禁用它们，如您在上面的代码中所见。

```
ALTER TABLE [Products] NOCHECK CONSTRAINT ALL
DELETE FROM [Users] where Name='Bar'
ALTER TABLE [Products] WITH CHECK CHECK CONSTRAINT ALL 
```

所有功劳归功于[克里斯托夫的回答](https://stackoverflow.com/a/161410/209668)。请投票！

# javascript - 如何通过 Javascript 清除 HTML 输入文本框

> ID：13951412
> 
> 赞同：1
> 
> 时间：2012-12-19T11:28:19.290
> 
> 标签：javascript

我正在使用相同的输入文本框来收集多个值。

收集第一个输入后，我将通过调用清除该字段

```
document.getElementById("textbox").value= ""; 
```

从表面上看，上面的代码片段似乎清除了文本框。但是当我通过单击其他地方来模糊文本框时，旧值会重新出现。

更多代码 >>>

我的 HTML >>

```
<input id="textbox" placeholder="Start"> 
```

Javascript >>

得到第一个输入后，我喜欢重置输入值>>>

```
document.getElementById("textbox").value= "";
document.getElementById("textbox").setAttribute("placeholder","End"); 
```

这就是我收集数据的方式 >>> 相同的文本框首先用于收集 Google 的“地点”，然后再收集一些用户输入的评论。除了收集数据， someFunction() 还尝试通过调用 .value="" 来清除文本框

```
google.maps.event.addListener(textbox, "place_changed", function() {
    someFunction();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:35:04.013

这是我在谷歌上快速搜索答案的东西；我认为您确实可以使用 onFocus() 玩一下：

```
<input type="text" value="Click here to clear text" onfocus="if(!this._haschanged){this.value=''};this._haschanged=true;"/> 
```

它可能还需要一些 onBlur 的使用。

还有一些其他的[指针](http://www.electrictoolbox.com/jquery-change-default-value-on-focus/)，如果你愿意的话，可以让你使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:35:49.147

看起来您的输入值存储在单独的变量中以用于其他一些操作。所以你也许应该检查你的代码并清除 thar 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T22:12:15.843

我已经实际实施并使用了上面我的朋友已经建议的这个解决方案：

```
document.getElementById("textbox").setAttribute("placeholder","End"); 
```

所以，这对我很有效。（使用上下文：“占位符”属性）

ICDT ..tc :)

# java - 集合引用的集合（可能是 ArrayList 或任何其他）并希望使用这些引用来创建集合

> ID：13951415
> 
> 赞同：0
> 
> 时间：2012-12-19T11:28:26.303
> 
> 标签：java, list, collections

我有集合引用的集合（可能是 ArrayList 或任何其他），我想使用这些引用并创建 collections.ie

```
ArrayList courseTitle;   //the collection references   
ArrayList<Courses> courses=new ArrayList<Course>(); 
//an arraylist to store those references 
```

现在我想使用这些参考并用它们创建集合。例如，如果我在课程中有参考“数学”或“科学”......那么我想创建名为“数学”或“数学列表”的集合。我我很困惑如何实现它。需要帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:36:36.990

创建具有不同属性的新课程，例如标题，作者等课程，

为所创建的特定类型的类实现一个 ArrayList。

例如。

```
Class CourseDetails{
      public String courseTitle;
      public String author;
       //getters and setters ....

} 
```

并在您正在实现该功能的类中创建一个如下所示的数组列表。

```
ArrayList<CourseDetails> arrayList = new ArrayList<CourseDetails>(); 
```

希望这在一定程度上有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:14:09.267

创建一个以数学和科学为子类的父类课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:02:08.730

您应该考虑使用类进行设计，而不是使用*Collection 的 Collection 。*

根据您的查询和评论，您希望结构如下，

*课程*对象

```
public class Course {
    String courseTitle;
    List<Book> books;
    List<Instructor> instructors;
} 
```

*课程中包含的*书籍类**

 *```
public class Book {
    String name;
    String author;
} 
```

*课程中包含的讲师*课程

```
public class Instructor {
    String name;
    String age;
    String experience;
} 
```

现在您可以创建如下所示的数学或科学课程

```
List<Course> maths =  new ArrayList<Course>
List<Course> science =  new ArrayList<Course> 
```*

# jsf-2 - 内部未调用 actionListener

> ID：13951416
> 
> 赞同：0
> 
> 时间：2012-12-19T11:28:31.667
> 
> 标签：jsf-2, primefaces, jstl, actionlistener, facescontext

我有以下代码，使用 jsf2.2，primefaces 3.2。我的要求是根据 updateFlag 更新项目。当我像下面的代码一样使用 c:if (xmlns:c="http://java.sun.com/jsp/jstl/core") 时，不会调用更新命令按钮的操作侦听器。但是如果我使用 < p:panel rendering="#{projectBean.updateFlag}" > 而不是 < c:if > 它可以工作。请帮助我理解它，我想我应该使用 c:if 但它不起作用。

```
<p:dialog widgetVar="projectUpdate" id="projectUpdatePanel" modal="false" >

                <p:panel>
                    <c:if test="#{projectBean.updateFlag == false}">
                            <h:outputText value="Project Title" />
                            <p:inputText disabled="true" value="#{projectBean.selectedProjectDo.projectTitle}" />
                            <p:commandButton value="Update" disabled="true" />
                            <p:commandButton value="Cancel" actionListener="#{projectBean.cancelUpdate}" />
                    </c:if>
                    <c:if test="#{projectBean.updateFlag == true}">                           
                            <h:outputText value="Project Title"/>
                            <p:inputText value="#{projectBean.selectedProjectDo.projectTitle}" />
                            <p:commandButton value="Update" actionListener="#{projectBean.updateProject}" />
                            <p:commandButton value="Cancel" actionListener="#{projectBean.cancelUpdate}" />
                    </c:if>
                </p:panel>

            </p:dialog> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:23:46.553

您最好按照以下方式使用它（在 disabled 属性上设置条件）

```
<p:panel>                     
    <h:outputText value="Project Title"/>
    <p:inputText disabled="#{not projectBean.updateFlag}" 
        value="#{projectBean.selectedProjectDo.projectTitle}" />
    <p:commandButton disabled="#{not projectBean.updateFlag}" value="Update" 
        actionListener="#{projectBean.updateProject}" />
    <p:commandButton value="Cancel" actionListener="#{projectBean.cancelUpdate}" />
</p:panel> 
```

一般来说：除非你真的需要它们，否则不要使用*JSTL*标签......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T13:35:35.447

这是一个非[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)代码的经典示例，这很糟糕。丹尼尔完美地展示了如何使它干燥，但他没有解释你的问题的原因。

根据问题症状，当`#{projectBean}`是视图范围的 bean 时会发生这种情况。视图范围的 bean 存储在 JSF 视图状态中。因此，视图范围的 bean 仅在恢复视图阶段之后可用。但是，JSTL 标记在恢复视图阶段运行，而视图范围的 bean 尚不可用。这会导致创建一个全新的视图范围 bean 实例，然后将其替换为存储在恢复的 JSF 视图状态中的真实视图范围 bean。JSTL 使用的全新且单独的视图范围 bean 将其所有属性设置为默认值，因此`updateFlag=false`将*始终*调用该块。

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

# c# - 纬度和经度的 Sql 十进制字段大小

> ID：13951417
> 
> 赞同：-2
> 
> 时间：2012-12-19T11:28:39.060
> 
> 标签：c#, .net, sql-server-2008, google-maps

我想在 SQl 服务器中保存经度和纬度。我有两个领域

```
Latitude (decimal(18,10)) 
Longitude (decimal(18,10)) 
```

两者的小数部分的最大值是多少。如果我取 10，它会在小数点后节省 10 点，当我在地图上填充该点时，我认为如果它不精确，它会产生影响。例如我有 76.992748 它将被保存为 76.9927480000 ，在这里我们得到额外的四个零，我认为它会在填充它时影响位置。

所以基本上我想知道小数部分的最大尺寸，所以可以设置小数的最大范围，并希望保存精确值而不是额外的零。请帮助我，我正在使用 c# 和 SQl Server。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:49:05.723

不确定这是否有帮助...看看 Sql Server 中的空间数据

[http://msdn.microsoft.com/en-us/library/bb933876(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb933876(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:08:10.040

如果要设置实际值意味着您将数据类型设为浮点数。为什么你给出小数点的最大值。以下博客有助于您分析。

[http://blog.sqlauthority.com/2007/08/29/sql-server-difference-and-explanation-among-decimal-float-and-numeric/](http://blog.sqlauthority.com/2007/08/29/sql-server-difference-and-explanation-among-decimal-float-and-numeric/)

# java - 为什么Java不能长时间切换原语？

> ID：13951419
> 
> 赞同：2
> 
> 时间：2012-12-19T11:28:41.980
> 
> 标签：java, switch-statement, long-integer

> **可能重复：**
> [为什么你的 switch 语句数据类型不能长，Java？](https://stackoverflow.com/questions/2676210/why-cant-your-switch-statement-data-type-be-long-java)

为什么这样的事情是不可能的？

```
private void importantFunction( long arg1 ) {

    switch (arg1){
    case 0:
         // do stuff
        break;
    case 1:
         // do other stuff
        break;
    default:
        //do default stuff
        break;
    }
} 
```

我理解长值的方式，它们和整数之间不应该有太大的区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:36:54.967

根据 Java 7，您可以使用字符串：[LINK TO ORACLE](http://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html)

所以基本上这将允许`String.valueOf(23423423L);`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T11:58:50.533

Java 可以有很多很多的特性。语言设计是实用性和复杂性之间的一系列连续权衡。加入太多特性，语言变得难以学习和实现。

显然，一个 long 可能只有几个可能的值，因此将其用作 switch 表达式是合理的，但这是不寻常的。主要是，当 int 的值太多时使用 long，而 switch 表达式的值太多。

一种解决方案是 Map ，它将您想要使用的 long 值映射到一小组 Integer 值：

```
import java.util.HashMap;
import java.util.Map;

public class Test {
  public static void main(String[] args) {
    final int ONE_CASE = 3;
    final int ANOTHER_CASE = 4;
    Map<Long, Integer> map = new HashMap<Long, Integer>();
    map.put((long) 1e10, ONE_CASE);
    map.put((long) 1e11, ANOTHER_CASE);
    long arg1 = (long) 1e11;
    switch (map.get(arg1)) {
    case 3:
      System.out.println("ONE_CASE");
      break;
    case 4:
      System.out.println("ANOTHER_CASE");
      break;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T11:35:15.100

[JVM 规范说：](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.10) Java 虚拟机的 tableswitch 和 lookupswitch 指令只对 int 数据进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:36:05.167

因为 Java 不希望您切换 long 可以包含的许多选项，所以他们将其限制为 ints

# javascript - 捕捉到道路结合不捕捉（GMaps v3）

> ID：13951420
> 
> 赞同：1
> 
> 时间：2012-12-19T11:28:45.353
> 
> 标签：javascript, google-maps

我的数据库中有一些位置（在本例中为 4），我试图在地图上显示它们。有什么比谷歌地图更好的方法，对吧？但是有一个问题。除了该位置之外，我的数据库中还保存了一个“is_snapped”，它决定了该位置是否与折线对齐。

现在我已经制作了一个函数，该函数正在为我的 Db 中的每个位置循环。给出必须放置在地图上的标记（Latlng 对象）和一个 0 或 1 的捕捉变量（1 表示已捕捉，0 表示未捕捉）。

好吧，这个函数的基础工作。它不会在不需要捕捉的地方捕捉，而是在必须捕捉的地方捕捉。然而; 如果它被捕捉，它会给我从 A 到 B 的两条线。一条线捕捉到道路，另一条线没有捕捉到道路。所以不知何故，一个重复的对象被推到我的“路径”数组中。但我似乎无法在我的功能中找到故障。

谁能检查一下这里出了什么问题？

提前致谢！

```
function createLines(marker, snap) {
    if (!service) {
        service = new google.maps.DirectionsService();
    }

    if (snap != 0 && snap != 1) {
        snap = 0;
    }

    if (path.length > 0 && snap != 1) {
        path.push(marker);
    }

    if (path.length == 0) {
        path.push(marker);
        poly = new google.maps.Polyline({ map: map });
        poly.setPath(path);
    } else {
        service.route({
            origin: path[path.length - 1],
            destination: marker,
            travelMode: google.maps.DirectionsTravelMode.WALKING
        }, function(result, status) {
            if (status == google.maps.DirectionsStatus.OK) {
                if(snap == 1) {
                    path = path.concat(result.routes[0].overview_path);
                }
                poly.setPath(path);
            }
        });
        distance = google.maps.geometry.spherical.computeLength(path);
    }
    return Math.round(distance);
} 
```

注意：地图是在此函数之前创建的，因此它存在并且它在正确的位置向我显示了标记。只是搞砸的折线:-)

为了了解正在发生的事情，我附上了 3 张图片，显示了组合的捕捉/未捕捉和分离，因此您可以看到它应该是怎样的，有点......

这是两个被捕捉的线都为非捕捉的地图（正如现在制作的代码） [http://www.envyum.nl/stupid_map.png](http://www.envyum.nl/stupid_map.png)

这是省略了捕捉部分的地图（路径 = path.concat .....） [http://www.envyum.nl/stupid_map_wo_snap.png](http://www.envyum.nl/stupid_map_wo_snap.png)

这是带有捕捉部分和未捕捉部分的地图（路径.push（标记）） [http://www.envyum.nl/stupid_map_w_snap.png](http://www.envyum.nl/stupid_map_w_snap.png)

对于那些感兴趣的，这是调用 createLines 函数的函数：

```
function drawMap(locations) {
    if(locations) {
        var markers = [];
        for (var i in locations) {
            loc = locations[i].latlng.split(', ');
            //Create a marker and give it a id(used later on to identify the correct inputfield)
            var markerPos = new google.maps.LatLng(loc[0], loc[1]);
            var mrkr = new google.maps.Marker({
                position: markerPos,
                map: map,
                clickable: true,
                id: locations[i].tripId
            });

            //Create the lines between te markers
            createLines(markerPos, locations[i].is_snapped);
        }
    }
} 
```

# java - JavaFX2 最终会取代 Swing 吗？

> ID：13951424
> 
> 赞同：3
> 
> 时间：2012-12-19T11:28:51.317
> 
> 标签：java, oracle, swing, user-interface, javafx-2

如果这个问题没有完全的意义，请原谅我，我不是 Java 图形用户界面方面的专家。

我很好奇甲骨文的计划是否会逐步淘汰 JavaFX2 的 Swing。从这个 Layman 的角度来看，尽管 JavaFX2 还处于起步阶段，但我发现使用它要容易和有效得多，而且使用 Swing 的时间并不那么愉快。此外，Oracle 似乎正在大力推动 JavaFX2，并计划在即将到来的更新中将其包含在标准库中。

那么是什么情况呢？我需要专家来告诉我！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:44:37.950

我也不是专家，但我认为 Swing 和 JavaFX 不是竞争对手的技术。Swing 主要是为典型的桌面应用程序（例如具有许多表单/对话框/等的办公应用程序）而设计的，而 JavaFX 更适合多媒体应用程序（例如动画、游戏）。当然，您也可以在 Swing/AWT 中编写游戏/动画，但 JavaFX 使很多事情变得更容易。我认为 JavaFX 最初的计划是成为 Flash 的某种 Java 替代品，而不是替代 Swing。我认为 Swing 不会因为现在被广泛采用而在不久的将来被抛弃。

# c++ - 空格很重要的另一种情况（也许？）

> ID：13951426
> 
> 赞同：10
> 
> 时间：2012-12-19T11:29:03.540
> 
> 标签：c++, syntax, c++11, whitespace, template-aliases

这是另一种情况，其中空格在 C++ 中很重要，还是编译器错误？以下代码在语法上是否正确？

```
#include <type_traits>

template <bool cond>
using EnableIf = typename std::enable_if<cond, int>::type;

template <int n, EnableIf<n == 1>=0>
void func()
{} 
```

英特尔 C++ Composer 无法编译它说：“类型说明符的无效组合”。但是在签名中添加单个空格，它编译得很好：

```
template <int n, EnableIf<n == 1> =0>
void func()
{} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-19T11:33:35.667

这是空格很重要的情况。编译器将匹配最大的符号，所以它匹配`>=`. 空格会导致它按照您的意图进行解析。

# ruby-on-rails - gabba gem 没有正确跟踪

> ID：13951427
> 
> 赞同：14
> 
> 时间：2012-12-19T11:29:08.030
> 
> 标签：ruby-on-rails, google-analytics, google-analytics-api, gabba

我使用 Google Analytics 来跟踪页面浏览量等，但上周晚些时候我希望在后端跟踪事件。

我发现了热巴。

我的 User 模型中有一个方法，如下所示：

```
def track_ga(event_name, cookiea, cookiez, event_category=nil)
    return unless Rails.env.production?

    gabba = Gabba::Gabba.new("UA-MYCODE-1", "mywebsite.com")
    gabba.identify_user(cookiea, cookiez)

    gabba.set_custom_var(1, 'User Email', self.email, Gabba::Gabba::VISITOR)
    gabba.set_custom_var(2, 'Private Code', private_code, Gabba::Gabba::VISITOR) if    private_code
    gabba.event(event_category || "Users", event_name, nil, nil)
end 
```

但是它无法正常工作，以下是 GA 中的结果：
[![](../Images/371ac045e521503b46510857531f838a.png)](https://dha4w82d62smt.cloudfront.net/items/3j113U2O0H2X0a0x343Y/Screen%20Shot%202012-12-19%20at%2010.27.01%20PM.png?X-CloudApp-Visitor-Id=695722fcc5cecec10f09e16181dbdf5f&v=97506ed5)

对我来说，这表明 cookie 没有正确关联，即它不知道它们以前访问过的位置（在跟踪此事件之前）。也许我误解了这份报告的性质，但假设我不是，我希望得到一些关于我哪里出错的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T18:35:00.370

看起来 analytics.js 代码最近发生了变化，可能是 gabba 出现了问题：

[https://github.com/hybridgroup/gabba/issues/25](https://github.com/hybridgroup/gabba/issues/25)

我使用 gabba 进行自定义事件以跟踪新用户注册的数量，它似乎工作正常，但可能会根据上述问题过度夸大我的 #hits 计数。

```
gabba = Gabba::Gabba.new("UA-blah", "mysite.com")
gabba.identify_user(cookies[:__utma])
gabba.event(kind, action, title, 0, true) 
```

# php - 在 Yii 控制台应用程序中获取基本 URL

> ID：13951429
> 
> 赞同：7
> 
> 时间：2012-12-19T11:29:13.993
> 
> 标签：php, yii, console-application, yii1.x

如何在 Yii`CConsoleApplication`应用程序中获取基本 URL？

我尝试`Yii::app()->request->getBaseUrl(true)`并最终出现以下错误。

> 未定义索引：SERVER_NAME (/var/www/yii/framework/web/CHttpRequest.php:279)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T19:04:42.613

控制台应用程序中没有请求对象。Web 应用程序中的请求对象是[CHttpRequest](http://www.yiiframework.com/doc/api/1.1/CHttpRequest)的实例，如果您在离线任务中生成 URL，则必须以其他方式配置 baseUrl，可能在配置中：

```
"request" => array(
    'hostInfo' => 'http://localhost',
    'baseUrl' => '/yii-project/index-test.php',
),

// OR

'request' => array(
    'hostInfo' => 'http://localhost',
    'baseUrl' => '/yii-project',
    'scriptUrl' => 'index-test.php',
), 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-10T06:43:46.617

对于 Yii2 高级模板，`params.php`如果您的控制台或普通应用程序目录中不存在该文件，请创建文件`config`并粘贴以下代码：

```
return [
   'frontendUrl' => 'http://yourdomain.com'
]; 
```

以便在控制台中通过以下方式访问它：

```
echo Yii::$app->params['frontendUrl']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-26T14:25:30.450

您必须在组件数组中添加 config/console.php

```
'request' => array(
    'hostInfo' => 'http://localhost',
    'baseUrl' => '',
    'scriptUrl' => '',
), 
```

并添加 urlManager 以便它将 index.php?r=site/action 从 url 中删除，您将拥有漂亮的 url

```
'urlManager' => array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    'rules' => array(
        '<controller:\w+>' => '<controller>/index',
        '<controller:\w+>/<id:\d+>' => '<controller>/view',
        '<controller:\w+>/<action:\w+>/<id:\d+>' => '<controller>/<action>',
        '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
    ),
), 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-19T11:39:53.460

请尝试以下方式获取基本 url 页面，

```
echo Yii::app()->getBaseUrl(true); 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-09-26T08:05:13.677

像这样获取主页网址：

[http://www.demo.local](http://www.demo.local)

```
echo Yii::app()->homeUrl; 
```

# webgl - Threejs 使用带有纹理的 3ds Max 对象

> ID：13951430
> 
> 赞同：0
> 
> 时间：2012-12-19T11:29:13.877
> 
> 标签：webgl, three.js, 3dsmax

我从 turbosquid 购买了 3d 场景格式的 3d 人类牙齿模型。我要做的就是从文件中提取个体牙齿并在threejs脚本中使用它们以在网页上显示它们。我所做的是从 3ds Max 中以 .obj 格式导出一颗牙齿，然后使用 threejs 提供的转换器将其转换为 json。虽然图像出现在页面上，但没有应用纹理。我是 3ds Max 和 Threejs 的新手，不知道我错过了什么。你能指导我吗？

**编辑：** 这是 Json 元数据

```
"metadata" :
{
    "formatVersion" : 3.1,
    "sourceFile"    : "toothz.obj",
    "generatedBy"   : "OBJConverter",
    "vertices"      : 1636,
    "faces"         : 1634,
    "normals"       : 1636,
    "colors"        : 0,
    "uvs"           : 1636,
    "materials"     : 1
},

"scale" : 1.000000,

"materials": [  {
"DbgColor" : 15658734,
"DbgIndex" : 0,
"DbgName" : "Teeth",
"colorAmbient" : [0.584314, 0.584314, 0.584314],
"colorDiffuse" : [0.584314, 0.584314, 0.584314],
"colorSpecular" : [0.538824, 0.538824, 0.538824],
"illumination" : 2,
"opticalDensity" : 1.5,
"specularCoef" : 70.0,
"transparency" : 1.0
}], 
```

**编辑：** 这是完整的代码

```
var scene = new THREE.Scene();

var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 1, 2000);

loader = new THREE.JSONLoader();
loader.load( "js/JsonModels/toothz.js", function( geometry, materials ) {
    materials[0].shading = THREE.SmoothShading;
    var material = new THREE.MeshFaceMaterial( materials );
    mesh = new THREE.Mesh( geometry, material );
    mesh.scale.set( 3, 3, 3 );
    mesh.position.y = 0;
    mesh.position.x = 0;
    scene.add( mesh );
} );

camera.position.z = 340;

//var ambient = new THREE.AmbientLight( 0x101030 );
//scene.add( ambient );

var directionalLight = new THREE.DirectionalLight( 0xffeedd );
directionalLight.position.set( 0, 0, 1 ).normalize();
scene.add( directionalLight );

var renderer = new THREE.WebGLRenderer();

renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

function render() {
     requestAnimationFrame(render);
    renderer.render(scene, camera); 
} 
render(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T15:38:34.547

请参阅 three.js[迁移](https://github.com/mrdoob/three.js/wiki/Migration)wiki。

几何不再有材料属性，加载器回调，以前只有一个`geometry`参数，现在也传递了第二个，`materials`.

编辑：你需要做这样的事情：

```
loader = new THREE.JSONLoader();
loader.load( "js/JsonModels/toothz.js", function( geometry, materials ) {
    materials[0].shading = THREE.SmoothShading;
    var material = new THREE.MeshFaceMaterial( materials );
    mesh = new THREE.Mesh( geometry, material );
    mesh.scale.set( 3, 3, 3 );
    mesh.position.y = 0;
    mesh.position.x = 0;
    scene.add( mesh );
} ); 
```

三.js r.53

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:04:50.500

在许多导出器中，纹理导出通常很棘手，因为 3d 程序材料和 three.js 材料之间并不总是有清晰的映射。此外，.obj 文件中根本没有定义任何材质，但需要单独的 .mtl。我不确定 a) .mtl 是否已导出并且 b) obj 转换器是否使用它，但无论如何，您的 JSON 缺少材质中的纹理定义。你有几个选择：

1.  试试[MAX exporter](https://github.com/mrdoob/three.js/blob/dev/utils/exporters/max/ThreeJSExporter.ms)，它应该允许将你的东西直接导出到 JSON，而不需要中间的 .obj 步骤。
2.  使用 OBJ 路由，您应该检查导出器中的所有相关选项是否已检查，生成一个 .mtl 文件，并且 obj 转换器会找到它。
3.  或者，手动将纹理添加到 JSON 中：（添加到文件部分`"mapDiffuse": "my_texture_filename.jpg"`的材质定义中`"materials"`）。
4.  您还可以在模型加载回调中将纹理添加到材质中。但是，这是一个很大的 hack，不推荐。

# liferay - Liferay 或 GateIn

> ID：13951431
> 
> 赞同：0
> 
> 时间：2012-12-19T11:29:16.760
> 
> 标签：liferay, gatein

现在我们的团队正面临着新的项目——创建新公司的内网门户。由于某些原因，我们正在考虑 Java 开源门户，并在 Liferay 和 GateIn 之间做出决定。

一个非常重要的要求如下：用户的门户表示必须依赖于客户计算机的国家/语言设置，这意味着不仅是 portlet 本地化，而且公司美国子公司的用户应该看到可能不同于法国用户的结构。是否可以在 Liferay 和 GateIn 中实现要求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-31T13:39:50.997

这可以通过不同级别的 Gatein 来实现：

*   站点：您可以声明在同一个门户实例上运行的多个站点（共享相同的用户群）。在这种情况下，您可以根据用户的国家/语言自动将用户重定向到不同的国家网站。

*   站点导航：Gatein 提供门户、组和用户导航。导航是在用户连接到门户时动态创建的。您只能拥有网站，导航将由用户动态创建（基于组和用户权限）。

*   页面（动态布局呈现）：GateIn 动态呈现每个页面。一个页面由多个包含 portlet 或小工具的容器组成。通过在每个容器上设置权限并使用连接用户的用户组或成员资格，可以有不同的页面布局。

当然，您也可以混合使用这 3 种方法来构建您的门户。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T04:33:21.923

这绝对可以通过 Liferay 来实现。请看一下[创建组织](http://www.liferay.com/community/wiki/-/wiki/Main/Working+with+Organizations+and+Locations)的概念。

我不确定这是否可以在 GateIn 中完成。但是，在选择这些门户之前，您可能需要记住许多其他事项。我试图在这里提及其中的几个。

`1.`检查您将选择在特定容器上运行的 Portal 服务器的稳定性。GateIn 最初是不稳定的。

`2.`如果需要，您可能必须覆盖几个文件（用于您的自定义）。GateIn 也使用 GTMPL 视图技术。看看你在这方面有多好。在这种情况下，Liferay 更容易（Liferay 不使用任何 GTMPL UI 框架）

`3.`除了开发基于位置的 Portal 之外，如果您还试图实现其他事情，例如完全基于 Ajax 的页面、良好的 UI 框架（如 JSF）等，那么请检查您选择的 Portal 服务器是否在支持 Ajax 的特定容器上运行， JSF（最新版本）

以上很少，列表可能会增加。但是，总而言之，我建议去 Liferay :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:52:36.403

Liferay 有很多 bug，社区也很糟糕。除非你支付抚养费。

GateIn 承诺很多，但仍然缺乏功能。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-04T01:46:18.383

您可以考虑使用[JBoss Juzu](http://juzuweb.org)和[Apache Struts](http://struts.apache.org/development/2.x/docs/portlet-plugin.html)来开发通用的 portlet，以消除任何门户供应商的锁定。

Struts 提供了国际化、本地化、时区的功能来实现我的项目。

我使用 struts2-portlet 插件来实现在多个门户上运行的报告 portlet。这是我的示例：code.google.com/p/jasperrocks/wiki/Features

# android - arrayadapter android的settype

> ID：13951434
> 
> 赞同：2
> 
> 时间：2012-12-19T11:29:24.080
> 
> 标签：android, spinner, typeface

这是我的代码如何设置我的微调器，我想在其项目上设置自定义字体我的类是扩展活动，我的部分代码是这样的

```
 Spinner supportSpinner = (Spinner) findViewById(R.id.supportSpinner);
  ArrayAdapter supportAdapter = new ArrayAdapter(this,
            android.R.layout.simple_spinner_item,supports);

  supportSpinner.setAdapter(supportAdapter); 
```

顺便说一句，支持是我的微调器的项目的字符串数组列表我想做这样的事情，但它不允许

```
 Typeface type = Typeface.createFromAsset(getAssets(), "comic.ttf");
     supportSpinner.setTypeface(type); 
```

如何更改我的微调器 textviews 字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T06:20:43.523

对于阵列适配器::

```
Typeface typeNormal = Typeface.createFromAsset(getAssets(), "roboto_lite.ttf");

timearray = new ArrayAdapter<String>(DetailsActivity.this,R.layout.floorrow,R.id.txt, flor){

                         public View getView(int pos, View convertView, android.view.ViewGroup parent) {

                                View v = convertView;
                                if(v== null){
                                    LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                                    v=vi.inflate(R.layout.floorrow, null);
                                }
                                TextView tv = (TextView)v.findViewById(R.id.txt);
                                tv.setText(flor.get(pos));
                                tv.setTypeface(typeNormal);

                                return v;

                         };

                     };

                    lv_building.setAdapter(timearray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:31:39.153

而不是使用

```
 android.R.layout.simple_spinner_item 
```

创建您自己的布局，然后您将使用您当前的代码

```
 Typeface type = Typeface.createFromAsset(getAssets(), "comic.ttf");
 supportSpinner.setTypeface(type); 
```

但将它设置在每个微调器项目的自定义布局中的文本视图上

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:32:24.897

而不是使用`android.R.layout.simple_spinner_item`创建自己的布局，在 XML 布局编辑器中，您可以选择所需的 TypeFace。无需编写任何代码。

# seo - google wmt：丢失了很多指向我们网站的链接

> ID：13951438
> 
> 赞同：-1
> 
> 时间：2012-12-19T11:29:41.073
> 
> 标签：seo, google-search, google-search-console

我最近在使用我的网站和 Google 时遇到了问题。我修复了一些问题（robots.txt 等）并通过 WMT 重新提交了我的主页和相关页面。效果很好。

但是从那以后（2天前）我失去了大部分指向我网站的链接！

我们有一个主要的附属公司，它有很多指向我们网站的链接，现在它们没有出现在 WMT“指向您网站的链接”中。

我们还没有收到关于“非自然链接”的警告邮件，来自其他站点的链接仍然有效（大部分链接到我们的主页，这是个问题）

关于如何解决这个问题或导致它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:33:12.270

这是两件事之一：

1.  您没有正确修复索引/排除问题，并且某些原因导致了该问题。再检查一遍。

2.  如果没有，请记住谷歌会根据他们的突发奇想和更新更改它显示的链接和不显示的链接。值得记住以下几点：

    *   仅仅因为 WMT 中报告了一个链接并不意味着它是一个好的链接。
    *   仅仅因为 WMT 中未报告链接并不意味着它是错误链接。
    *   链接总数只能作为趋势。网站报告链接的出现或消失在宏伟的计划中意义不大。
    *   附属链接通常不是谷歌最喜欢的传递价值。您的会员可能会受到 Google 的打击。

您的流量和职位是否受到影响？然后你正在寻找一个更重要的问题。如果不是，那只是谷歌就是谷歌。

# objective-c - UITableViewCell 中的 UIButton 子视图没有按预期隐藏

> ID：13951439
> 
> 赞同：0
> 
> 时间：2012-12-19T11:29:46.583
> 
> 标签：objective-c, ios, xcode

我最近的挫败感是我`UIButton`的每个子视图中的一个子视图，我想根据每个子句的特定子句。我的代码几乎如下：`UITableViewCell``UITableView``setHidden:``indexPath`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
...

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        [self initCell:cell forIndexPath:indexPath];
    }
    [self updateCell:cell forIndexPath:indexPath];
    return cell;
} 
```

init 和 update 方法如下：

```
- (void)initCell:(UITableViewCell *)cell forIndexPath:(NSIndexPath *)indexPath
{
    ...

    UIButton *btnMy = [UIButton buttonWithType:UIButtonTypeCustom];
    btnMy.tag = kButtonMyTag;
    [btnMy setFrame:CGRectMake(170, 45, 100, 30)];
    [btnMy setBackgroundImage:[UIImage imageNamed:@"btn_image"] forState:UIControlStateNormal];
    btnMy.adjustsImageWhenHighlighted = YES;
    [btnMy setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    btnMy.titleLabel.font = [UIFont fontWithName:@"MyFont" size:14];
    [btnMy addTarget:self action:@selector(btnMyPressed:) forControlEvents:UIControlEventTouchUpInside];
    [cell addSubview:btnMy];

    UIImageView *imgViewAccessory = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"table_accessory"]];
    cell.accessoryView = imgViewAccessory;
    [imgViewAccessory release];
}

- (void)updateCell:(UITableViewCell *)cell forIndexPath:(NSIndexPath *)indexPath
{
    UIButton *btnMy = (UIButton *)[cell viewWithTag:kButtonMyTag];

    MyObject *object = (MyObject *)[self.dataSource objectAtIndex:indexPath.row];

    if(object.meetsCondition) 
    {
        btnMy.hidden = NO;
    }
    else 
    {
        btnMy.hidden = YES;
    }
    ...
} 
```

令人沮丧的结果是，根据 updateCell 方法中的 if 子句，滚动按钮时随机显示和隐藏，而不是像预期的那样。任何帮助将非常感激。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:35:20.540

您应该制作自定义单元格并根据条件显示和隐藏按钮

```
-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSArray *nib;
    static NSString *cellIdentifier= @"cell";

    UITableViewCell *theCell = [self.tblView dequeueReusableCellWithIdentifier:cellIdentifier];

    if([theCell.contentView subviews]){
        for(UIView *view in [theCell.contentView subviews]){
            [view removeFromSuperview];
        }
    }

    if(theCell== nil)
    {
        nib  = [[NSBundle mainBundle] loadNibNamed:@"Your custom cell name" owner:self options:nil]; 
        theCell = [nib objectAtIndex:0];
        theCell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    UIButton *btn=(UIButton*)[theCell.contentView viewWithTag:101];
if(yourcondition)
//hide button
else
//show button
} 
```

这会做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:38:00.020

`CellForRowAtIndexPath`在您的Also中使用此代码。

```
 MyObject *object = (MyObject *)[self.dataSource objectAtIndex:indexPath.row];

    if(object.meetsCondition) {
        btnMy.hidden = NO;
    }
    else {
        btnMy.hidden = YES;
    } 
```

# model-view-controller - 是或否：MVC 中的模型是否应该包含应用程序逻辑？

> ID：13951445
> 
> 赞同：35
> 
> 时间：2012-12-19T11:30:05.303
> 
> 标签：model-view-controller, design-patterns

昨天我与我们的一位开发人员就 MVC 进行了一些讨论，更准确地说是关于模型组件在 MVC 中的作用。

在我看来，模型应该只包含属性而几乎没有功能，因此模型类中的方法尽可能少。

我的同事虽然认为模型可以而且应该具有更多功能并提供更多功能。

这是我们争论的一个例子。

**示例 1**

假设我们想创建一个博客。博客有文章和标签。每篇文章可以有多个标签，每个标签可以属于多篇文章。所以我们在这里有 am:n 关系。

在伪代码中，它可能看起来像这样：

```
class Article{
    public int id;
    public String title;
    public String content;
    public Tag[] tags;

    // Constructor
    public void Article(id, title, content, tags){
        this.id = id;
        this.title = title;
        this.content = content;
        this.tags = tags;
    }
}

class Tag{
    public int id;
    public String name;

    // Constructor
    public Tag(id, name){
        this.id = id;
        this.name = name;
    }
} 
```

现在，假设我们在这里工作的是松散耦合，这意味着我们可能有一个没有标签的 Article 实例，所以我们将使用 Ajax 调用（对我们的后端有一个包含所有信息的数据库）获取属于我们文章的标签。

棘手的部分来了。我相信通过 Ajax+JSON 获取后端数据应该是控制器的工作，它使用一个专用类来处理使用解析器的 ajax 请求：

```
class MyController{
    private void whatever(articleID){
        Article article = (Article) ContentParser.get(articleID, ContentType.ARTICLE);
        doSomethingWith(article);
    }
}

public abstract class ContentParser{
    public static Object get(int id, ContentType type){
        String json = AjaxUtil.getContent(id, type.toString()); // Asks the backend to get the article via JSON
        Article article = json2Article(json);

        // Just in case
        Tag[] tags = article.tags;
        if (tags == null || tags.length <= 0){
            json = AjaxUtil.getContent(article.id, ContentType.TAGS); // Gets all tags for this article from backend via ajax
            tags = json2Tags(json);
            article.tags = tags;
        }

        return article;
    }

    // Does funky magic and parses the JSON string. Then creates a new instance of Article
    public static Article json2Article(String json){
        /*
         ...
        */
        return new Article(id, title, content, tags);
    }

    // Does funky magic and parses the JSON string. Then creates a new instance of Tag
    public static Tag[] json2Tags(String json){
        /*
         ...
        */
        return tags;
    }

} 
```

**示例 2**

我的同事认为这与 MVC 的想法不同，他建议模型应该注意这一点：

```
class Blog{
    public int id;
    public String title;
    public Article[] articles;

    // Constructor
    public Blog(id, title, articles){
        this.id = id;
        this.title = title;
        this.articles = articles;
    }

    public void getArticles(){
        if (articles == null || articles.length <= 0){
            String json = AjaxUtil.getContent(id, ContentType.ARTICLE); // Gets all articles for this blog from backend via ajax
            articles = json2Articles(json);
        }
        return articles;
    }

    private Article[] json2Articles(String json){
        /*
         ...
        */
        return articles;
    }

}

class Article{
    public int id;
    public String title;
    public String content;
    public Tag[] tags;

    // Constructor
    public Article(id, title, content, tags){
        this.title = title;
        this.content = content;
        this.tags = tags;
    }

    public Tag[] getTags(){
        if (tags == null || tags.length <= 0){
            String json = AjaxUtil.getContent(id, ContentType.TAGS); // Gets all tags for this article from backend via ajax
            tags = json2Tags;
        }
        return tags;
    }

    // Does funky magic and parses the JSON string. Then creates a new instance of Tag
    private Tag[] json2Tags(String json){
        /*
         ...
        */
        return tags;
    }
} 
```

在你要做的模型之外：`blog.getArticles();`或者`article.getTags();`在不打扰 ajax 调用的情况下获取标签。

然而，尽管这可能很方便，但我相信这种方法与 MVC 不同，因为到最后，所有模型都将充满各种方法，这些方法可以做各种时髦的事情，而控制器和辅助类几乎什么都不做。

在我对 MVC 的理解中，模型应该只包含属性和内部最少的“辅助方法”。例如，模型“Article”可以提供方法 getNumOfTags()，但它不应该自己进行任何 Ajax 调用。

那么，哪种方法是正确的呢？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-19T12:07:44.680

一般来说，我也尽量让控制器在逻辑上保持简单。如果需要业务逻辑，它将上升到“服务层”类来处理它。这也节省了重复任何代码/逻辑，如果业务逻辑发生变化，这最终会使整个项目更易于维护。我只是将模型纯粹保留为实体对象。

我认为上面的答案很好地总结了它，很容易根据设计模式过度设计一个项目：选择适合你的任何东西，并且是最可维护/最有效的。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-19T19:20:01.320

您应该停止将 MVC 中的“模型”视为某些类。模型不是类或对象。模型是一个层（在现代 MVC 中，自概念出现以来已经发生了一些演变）。人们倾向于称之为“模型”的东西实际上是[领域对象](http://c2.com/cgi/wiki?DomainObject)（我将这种大规模的愚蠢归咎于 Rails）。

应用程序逻辑（领域逻辑结构和存储抽象之间的交互）应该是模型层的一部分。更准确地说：它应该在`Services`.

表示层（模型、视图、布局、模板）和模型层之间的交互应该只通过这些服务发生。

> [应用程序在控制器中没有位置。控制器是表示层的结构，它们负责处理用户输入。请不要将 deomain 对象暴露给它。]

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-19T11:46:05.430

正确的？任何一个。他们都编译，不是吗？

方便的技巧很好，为什么不使用它们呢？话虽如此，正如您所指出的，如果您将各种逻辑放入其中，您可能会得到臃肿的模型。但是，同样地，当控制器在每个动作中执行大量操作时，您可能会得到臃肿的控制器。如果有必要的话，有一些方法可以从中抽象出元素。

归根结底，所有设计模式都是指导方针。你不应该盲目地遵循任何规则，只是因为别人说了。做对你有用的事，你认为可以提供干净、可扩展的代码，并达到*你*认为可以成为好代码的任何指标。

话虽如此，对于真正的理想主义 MVC，我会说模型不应该有任何外部动作，它们是数据表示，仅此而已。但请随意不同意:-)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-19T12:08:17.450

您对模块的建议（内部没有任何业务逻辑）听起来更像是在谈论值对象。你们大学的建议听起来更像是域对象。

在我看来，将使用的概念取决于所使用的框架（这是实际的观点，下面是更哲学的观点）。如果使用框架，它通常会设置有关如何实现每个组件的规则。例如，我们可以查看不同的 MVC 框架。在 Flex 的[Cairngorm](https://lh3.ggpht.com/_0TJrDySldQA/TBkPTl3BdzI/AAAAAAAAACQ/MGOpJqedmtQ/s1600/cairngorm.gif)框架中，我们两者都有。VO（值对象）主要用于绑定到视图，而 DO（域对象）保存业务逻辑。如果我们查看 ASP.NET 的 MVC 实现，我们有一个模型，它至少包含数据 (VO)，但也包含一些验证（如果需要）。让我们看一个 UI MV* 框架 - 例如 Backbone.js。Backbone 的文档说：

> 模型是任何 JavaScript 应用程序的核心，包含交互式数据以及围绕它的大部分逻辑：转换、验证、计算属性和访问控制。

如果我们查看[Smalltalk](http://amix.dk/blog/post/19615)提供的传统 MVC，我们会看到：“模型：管理应用程序域的行为和数据”，因此我们在其中包含一些行为，而不仅仅是普通数据。

让我们实际考虑一下，如果模型中没有任何逻辑，我们可能应该将所有应用程序和业务逻辑放入控制器中。

现在让我们关注一个具体的例子。想象一下，我们有一个模型，它是一个 Graph。我们想找到其中两个节点之间的最短路径。一个很好的问题是把找到最短路径的算法放在哪里？这是一种业务逻辑，对吧？如果我们看看 MVC 的主要好处（代码重用、DRY 等），我们可以看到，如果我们想以最好的方式重用我们的模型，我们应该在其中实现最短路径。最短路径算法通常取决于图内部表示（或至少为了算法的最佳性能），但这种表示被封装到模型中，不幸的是我们不能重用矩阵表示和邻居列表的完整最短路径，所以它不是将其放入控制器中是个好主意。

因此，作为结论，我可以说这取决于您的需求（主要）。传统的 MVC 目的是在 UI（GoF 内部）中使用

> 模型/视图/控制器 (MVC) 三元组 [首先由 Krasner 和 Pope 在 >1988 年描述] 用于在 Smalltalk-80 中构建用户界面。

)

现在我们在不同的领域使用它 - 仅 UI，用于 Web 应用程序等。因此，它不能以纯粹的形式使用。但无论如何，在我看来，最好的关注点分离可以通过将业务逻辑隔离到模型中，将应用程序逻辑隔离到控制器中来实现。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-19T12:10:13.323

简而言之，我相信模型应该只是将发送到您的视图的数据。它有助于将 MVC 范式驱动到应用程序的其他方面。

如果您不想破坏 MVC 模式，您的数据应该全部作为业务模型返回到您的控制器并解压缩到您的 ViewModel 中。请求信息服务器端，然后发送所有内容。如果您需要发出 JSon 请求，那么这应该是 Rest Service 或对 Controller 的调用。拥有这些 getTags 和 getArticles 会变得非常混乱......如果您的视图现在决定调用哪个......我无法理解为什么您没有预先提供这些信息。使用静态方法是相同的方法，只是角度不同。

我发现最好让我的控制器操作调用一个注入服务，该服务会发挥作用，并使用 MVC Web 应用程序中的模型来返回信息。这使事情变得更整洁，并且进一步强调了关注点的分离。然后，您的控制器操作变得非常精简，并且清楚地知道它们在做什么。

我相信从将模型视为完全愚蠢的开始可能会对我从这段代码中看到的一些架构问题进行分类有很长的路要走。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-14T17:21:37.767

是的。它应该。你在谈论领域驱动设计。

[https://en.wikipedia.org/wiki/Domain-driven_design](https://en.wikipedia.org/wiki/Domain-driven_design)

如果您觉得，您没有这样做，那么您就是在进行贫血领域模型设计。那是一个反模式。

我阅读了 Martin Flower 的一篇关于贫血域设计有多糟糕的文章。[https://martinfowler.com/bliki/AnemicDomainModel.html](https://martinfowler.com/bliki/AnemicDomainModel.html)

# c# - 如何通过 WCF 公开实体的计算数据

> ID：13951453
> 
> 赞同：7
> 
> 时间：2012-12-19T11:30:20.973
> 
> 标签：c#, wcf, poco

我们正在客户端（表示）和服务器（数据/业务层）之间使用 WCF 开发 N 层架构应用程序。老实说，我找不到任何关于如何通过 WCF 公开有效计算数据的真实示例/信息。

为了描述我的问题，说我们有很多交易的 ATM 机。所以我们在 ATM 类和事务类之间存在 1-N 关系。ATM 类具有 Location、ModelNo、Description、InstallDate 等属性，交易记录具有 Amount、DateTime、CustomerInfo、TicketPaperLength、ElectricityUsed 等信息

通过 WCF 公开这些类不是问题。问题是我们有很多基于底层交易表的 ATM 计算字段。例如，客户端应用程序使用基于 ATM 计算数据的报告。ATM 的计算数据示例可能是：AverageTicketPaperLength、AverageAmount、DeviationAmount、AverageElectricity 等。这些计算数据有很多很多。计算应该在服务器而不是客户端进行。如果这些报告定义都已修复，那么问题就不会那么大了：我们可以为报告创建单独的服务/Poco。将计算放入业务层并根据需要填充 Poco。

我可以创建一个包含大约 500 个计算属性的 Poco，其中每个报告仅可能使用 10 个属性。但当然，我们不希望每次都为每个实体执行所有 500 次计算。

所以总的来说，我想知道如何通过例如 WCF 公开实体的计算数据。我看到的几乎所有解释实体框架、Poco 和 WCF 的示例都只处理实体的持久字段，这非常简单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T15:13:10.743

不要通过 WCF 公开实体，创建一些 DTO。

例如：

在 wcf 层 -

```
DtoInfoForReport1 GetInfoForReport1(long atmId) { ... call BL here... } 
DtoInfoForReport2 GetInfoForReport2(long atmId) { ... call BL here... } 
```

在数据层 -

```
AtmEntity
{
  long Id {get;set;}
  ... some properties ...
  HashSet<Transaction> AtmTransactions {get;set;}
} 
```

转移对象 -

```
DtoInfoForReport1
{
  long AtmId {get;set;}
  XXX SomeCalculatedValue {get;set;}
} 
```

在 BL -

```
DtoInfoForReport1 CreateInfoForReport1(long atmId)
{
  var atm = YYY.GetEntity<AtmEntity>(atmId);
  return new DtoInfoForReport1
  {
    AtmId = atmId,
    SomeCalculatedValue = DoSomeCalculationOverMyAtmWithItsTransactions(atm),
  };
} 
```

希望我的问题是正确的。否则评论。

**根据评论进行编辑：** 比我建议的 DTO 是这样的：

```
[DataContract]
public DtoRequestedCalculations
{
  [DataMember]
  public long AtmId {get;set;}

  [DataMember]
  public List<DtoRequestedCalculationEntry> Calculations {get;set;}
}

[DataContract]
public DtoRequestedCalculationEntry
{
  [DataMember]
  public string / long / Guid / XXX ParameterIdentifier {get;set;}

  [DataMember]
  public double/ DtoParameterCalculatedValueBase {get;set;}
} 
```

现在，如果您的计算值始终是两倍，那么它基本上就完成了。如果您的值可能是或不同的类型，您将需要一些基类 - DtoParameterCalculatedValueBase，它是这样的：

```
[DataContract]
[KnownType(typeof(DtoParameterDoubleCalculatedValue))]
[KnownType(typeof(DtoParameterXXXCalculatedValue))]
public DtoParameterCalculatedValueBase 
{
  ...whatever common part there may be or nth...
}

public DtoParameterDoubleCalculatedValue : DtoParameterCalculatedValueBase 
{
  [DataMember]
  public double Value {get;set;}
}

public DtoParameterXXXCalculatedValue : DtoParameterCalculatedValueBase 
{
  [DataMember]
  public XXX Value {get;set;}
} 
```

注意 KnownType 属性 - 它告诉 WCF 哪些类型可以代替基类。您必须为每个继承的类型提供此属性（或使用 DataContractResolver，这已经是另一回事了）。

比在 WCF 中：

```
DtoRequestedCalculations GetCalculatedValuesForAtm(long atmId, List<long / string/ Guid / XXX> valueIdentifiers); 
```

# java - 确定变量类型

> ID：13951454
> 
> 赞同：1
> 
> 时间：2012-12-19T11:30:21.877
> 
> 标签：java, groovy

如何使用 确定`Groovy`变量的类型`Java`？
例如我们有下面的`Groovy`代码：

```
a = new Integer(4);
b = a + 1;
a = "b = " + b; 
```

我们如何以编程方式分析它并确定line的`a`变量类型是？`b = a + 1;``java.lang.Integer`

作为`a`动态变量，我们无法从中获取其类型`Groovy AST`，因为`AST`不包含此类信息。

1.  更新：添加了更多细节
2.  更新：澄清的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:02:35.720

可以使用`StaticTypeCheckingVisitor`. [要查看更多详细信息，请点击此链接](http://groovy.329449.n5.nabble.com/Determine-type-of-Groovy-variable-using-Java-td5712228.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:36:37.227

在java中，您可以使用`instanceof`来确定对象的类型

# javascript - 在循环中使用带有嵌套 ajax 调用的 $.Deferred()

> ID：13951456
> 
> 赞同：31
> 
> 时间：2012-12-19T11:30:38.957
> 
> 标签：javascript, jquery, ajax, deferred

我花了太多时间寻找类似的问题并尝试解决方案，所以我希望有人有解决方案。

基本上，我希望在函数 a() 完成时收到通知。问题是该函数包含一个 ajax 调用和一个调用 b() 的循环，该循环又包含一个 ajax 调用。

用小提琴更新：http : [//jsfiddle.net/hsyj7/1/](http://jsfiddle.net/hsyj7/1/)

像这样：

```
// called by main()
function a() {
  return $.ajax("http://url1").pipe(function(data){
    for (var i = 0; i < 2; i++) {
      console.log('a called');
      b();
    }
  });
}

// called by a()
function b() {
  for (var i = 0; i < 2; i++) {
    $.ajax("http://url2", function(data){
      // do something
      console.log('b called');
    }
  }
}

function main(){
  $.when(a()).done(function(){
    console.log('all completed');
  });
} 
```

那么我想看到的是，可能在顶部同时调用 a() ：

```
a called
b called
b called
a called
b called
b called
all completed 
```

相反，我得到

```
a called
all completed
b called
b called 
```

或者它的一些变体。

我知道上面的代码在循环和 b() 中都缺少延迟功能。在我尝试过的一些变体中，从不调用 main() 中的 done() 处理程序。

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-19T11:43:38.480

是的，使用`Deferred`是这样做的方法：

```
function a() {
    var def = $.Deferred();

    $.ajax("http://url1").done(function(data){
        var requests = [];

        for (var i = 0; i < 2; i++) {
             requests.push(b());
        }

        $.when.apply($, requests).then(function() { def.resolve(); });
    });

    return def.promise();
}

// called by a()
function b() {
    var def = $.Deferred(),
        requests = [];

    for (var i = 0; i < 2; i++) {
        requests.push($.ajax("http://url2").done(function(data){
            // do something
            console.log('b called');
        });
    }

    $.when.apply($, requests).then(function() { def.resolve(); });

    return def.promise();
}

function main(){
    $.when(a()).done(function(){
        console.log('all completed');
    });
} 
```

//编辑：替换`.pipe`为`.done`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-13T08:43:26.950

这个问题可能很老，但是由于还没有正确的解决方案，所以我会在这里给出答案。它通过使用[`.then`](http://api.jquery.com/deferred.then/)(previsouly been `.pipe`) 正确链接承诺以实现请求的结果：

```
function a() {
  return $.ajax("http://url1").done(function(data){
    console.log('a called');
  }).then(function(){
    return $.when(b(), b()); // no loop for simplicity
  });
}
function b() {
  return $.ajax("http://url2").done(function(data){
    console.log('b called');
  });
}

function main(){
  a().done(function(){
    console.log('all completed');
  }, function() {
    console.log('an error occured!');
  });
} 
```

取决于嵌套/结构可能会更改的结果数据应该可用，但总体排序是正确的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T11:49:55.610

您可以使用位于更高上下文中的*Array将**Promise / Deferred*对象推送到其中。然后，您可以使用`jQuery.when`并列`Function.prototype.apply`将所有条目作为参数传递。

```
(function() {
    var promises = [ ],
        when = Function.prototype.apply.bind( jQuery.when, null );

    function a() {
         promises.push($.ajax("http://url1").pipe(function(data){
             for (var i = 0; i < 2; i++) {
                 console.log('a called');
                 b();
             }
         }));

         return promises;
    }

    function b() {
        for (var i = 0; i < 2; i++) {
            promises.push($.ajax("http://url2", function(data) {
                // do something
                console.log('b called');
            }));
        }
    }

    function main() {
        promises = [ ];

        when( a() ).done(function(){
            console.log('all completed');
        });
    }
}()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T11:40:20.207

我相信这可以通过回调来解决，但是小提琴真的可以帮助我检查你。

```
 // called by main()
 function a(callback) {
   //set this to the number of loops that is going to happen
   var number = 2;
   return $.ajax("http://url1", function(data){
     console.log('a called');
     for (var i = 0; i < number ; i++) {
       b();
       if(number===i){
           callback();
       }
     }
   }
 }

 function main(){
    a(function(){
       //Function or code you want to run on completion.. 
    });
 } 
```

如果这不起作用，请原谅我，但我认为这是正确的方向。

# asp.net - ASP.NET 中 Web 配置中无 cookie 的默认模式是什么？

> ID：13951457
> 
> 赞同：-1
> 
> 时间：2012-12-19T11:30:40.163
> 
> 标签：asp.net

什么是 ASP.NET 中 Web 配置中无 cookie 的默认模式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:32:51.487

默认是`false`，你可以在[**MSDN上找到**](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:35:42.860

默认值为假。要在您的应用程序中启用无 cookie 会话，请将其添加到 web.config 文件中：

```
<sessionState cookieless="true" /> 
```

实施 cookieless 会话只是将其设置为 true 的一种情况，但强烈建议重构您的应用程序以避免在会话状态中存储有价值的信息 - [http://msdn.microsoft.com/en-us/library/aa479314.aspx](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

# java - Java中的字符转换

> ID：13951459
> 
> 赞同：6
> 
> 时间：2012-12-19T11:30:43.477
> 
> 标签：java

我正在学习Java。我发现表达式通常必须转换为某种类型才能正确执行。例如，在算术评估期间，字节被提升为整数，因此以下表达式将引发错误：

```
byte b = 10;
int i;
i = b*b;  //ok, assigning an integer evaluation to an integer variable
b = b*b;  // throws error, coz assigning integer evaluation to byte variable 
```

现在，我知道将整数分配给字符变量是可以的：`char a; a = 88;`没问题。但是，如果我这样做：

```
char c2 = 'b', c3 = 'c';
c2 = c2 + c3; //throws error
c2 = (char)(c2 + c3); //works fine 
```

为什么它在不投射时会抛出错误？毕竟，右手边仍然是一个整数，所以将一个整数分配给一个字符变量应该可以正常工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T11:34:06.727

在`c2 + c3`中，两个操作数都被隐式扩展为`int`，所以加法的结果也是一个`int`。

**[JLS §15.18.2。数字类型的加法运算符（+ 和 -）](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.2)：**

> 对操作数执行二进制数字提升（第 5.6.2 节）。

**[JLS §5.6.2。二进制数字提升](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)：**

> 当运算符将二进制数值提升应用于一对操作数时，每个操作数都必须表示一个可转换为数值类型的值，以下规则按顺序适用：
> 
> **加宽原语转换（第 5.1.2 节）适用于转换以下规则指定的一个或两个操作数：**
> 
> *   如果任一操作数是 double 类型，则另一个操作数将转换为 double。
>     
>     
> *   否则，如果任一操作数的类型为浮点型，则另一个将转换为浮点型。
>     
>     
> *   否则，如果任一操作数是 long 类型，则另一个将转换为 long。
>     
>     
> *   **否则，两个操作数都转换为 int 类型。**

因此，您最终得到一个`int`. 将其分配给`char`变量需要显式转换。

你说：

> 由于整数值可以分配给字符变量...

只有*常量*整数表达式可以在`char`没有强制转换的情况下分配给变量。

**[JLS §5.2。作业转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.2)：**

> 此外，如果表达式是 byte、short、char 或 int 类型的常量表达式（第 15.28 节）：
> 
> *   如果变量的类型是 byte、short 或 char，并且常量表达式的值可以用变量的类型表示，则可以使用窄化原语转换。

此自动缩小转换不适用于此处。你需要一个明确的演员表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T11:34:08.163

将 int 分配给 char 不一定能正常工作。字符只有 16 位，整数是 32 位，因此可能存在溢出。

一般来说，如果分配不会发生溢出，Java 只允许在没有强制转换的情况下分配原始值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:36:19.107

```
char c2 = 'b', c3 = 'c';
c2 = c2 + c3; //throws error
c2 = (char)(c2 + c3); //works fine 
```

当你在做`c2+ c3`

添加这些字符的 ASCII 值，返回`int`结果。当您将`int`结果分配给`char` 它时会出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:35:57.633

将 int 88 分配给 char 有效，因为编译器可以确定该值。

编译器无法处理 c2 = c2 + c3 的情况。值 c2 + c3 必须在运行时计算。因此，编译器无法确定必须分配的实际 char 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T11:39:27.990

char 是 2 个字节，int 是 4 个字节。当你写 char c = 1; 这并不意味着 1 是 int，它只是 javac 的一个常量，javac 知道 1 适合 char。但是 c2 = c2 + c3; 是算术运算，javac 会将其解释为`(int)c2 + (int)c3`，这会产生 int 结果。int 不适合 char 因此 javac 警告您可能会丢失精度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T11:39:37.417

看看线程：

[Java中的整数算术与char和整数文字](https://stackoverflow.com/questions/3680625/integer-arithmetic-in-java-with-char-and-integer-literal)

原因似乎是“c2 = c2 + c3;” 编译器无法检查（它在运行时执行）而“char a; a = 88;” 由编译器直接完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T11:52:38.300

java中每种基本类型可以容纳多少值有一定的限制。分配算术运算的结果会在运行时产生不可预测的结果，JVM不确定char是否可以容纳，因此编译错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-19T11:45:07.130

进一步说明的示例：

```
char c1 = Character.MAX_VALUE;
char c2 = Character.MAX_VALUE;
char c3 = (char) (c1 + c2);
int  i3 = c1 + c2;

System.out.printf("After casting to char: %s, the int value: %s%n", (int) c3, i3); 
```

因此，通过强制转换，我们实际上得到了错误的数学结果。

# c# - 如何在 C# 中创建屏幕保护程序？

> ID：13951465
> 
> 赞同：-2
> 
> 时间：2012-12-19T11:31:18.480
> 
> 标签：c#, wpf

什么是屏保的扩展名

以及如何从 C# 设置屏幕保护程序？

我已经用谷歌搜索并找到[了这个](http://www.harding.edu/fmccown/screensaver/screensaver.html)问题

但我无法理解它！有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:33:26.500

这是最有用的链接： [http ://www.harding.edu/fmccown/screensaver/screensaver.html](http://www.harding.edu/fmccown/screensaver/screensaver.html)

这很简单，它是一个接受特殊参数的exe文件，供windows使用，可以配置和预览并显示为全屏

如文章中所述：

> **命令行参数**
> 
> 如简介中所述，屏幕保护程序接收命令行参数，通知它应该在哪个“模式”下运行。它可能以大写或小写形式传递三个参数：
> 
> /p - 在屏幕保护程序选择对话框中显示屏幕保护程序
> 
> /c - 显示屏幕保护程序配置对话框
> 
> /s - 全屏显示屏幕保护程序

# objective-c-blocks - 阻止不按我想要的方式执行，缺乏理解

> ID：13951468
> 
> 赞同：0
> 
> 时间：2012-12-19T11:31:23.087
> 
> 标签：objective-c-blocks, game-center

我正在尝试将 Game Center 实现到我的应用程序中，下面的代码正在报告分数。

我正在尝试完成一个解决方案，如果玩家未通过身份验证，它应该通过 scoreReporter 块将分数保存在 scoreDictionary 中。但是，当播放器未通过身份验证时，它永远不会遇到“If (error != nil)”语句。

事实上，它通过了整个街区。如果本地播放器通过身份验证，则执行该块。

这是我第一次详细研究游戏中心和街区，所以我有点迷失在这里。

我想要完成的是如上所述。

我使用 5.1 作为目标。

```
-(void)reportScore:(int64_t)score forCategory:(NSString*)category {

NSLog(@"reportScore: %lli", score);
NSLog(@"category: %@",category);

GKScore *scoreReporter = [[GKScore alloc] initWithCategory:category];
scoreReporter.value = score;

NSLog(@"scoreReporter: %@", scoreReporter);

[scoreReporter reportScoreWithCompletionHandler:^(NSError *error) {

    NSLog(@"Execute the scoreReporter the block");

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
    NSString *scoreFilePath = [NSString stringWithFormat:@"%@/scores.plist",[paths
                                                                             objectAtIndex:0]];
    NSMutableDictionary *scoreDictionary=[NSMutableDictionary
                                          dictionaryWithContentsOfFile:scoreFilePath];
    if (error != nil)
    {
        //There was an error so we need to save the score locally and resubmit later
        NSLog(@"Saving score for later");
        [scoreDictionary setValue:scoreReporter forKey:[NSDate date]];
        [scoreDictionary writeToFile:scoreFilePath atomically:YES];
    }
}];
} 
```

播放器未通过身份验证时的 NSLog 输出：

```
reportScore: 80
category: com.xxxxxx.yyyyyyyHighScore
scoreReporter: <GKScore: 0xab611b0>player:(null) rank:0 date:2012-12-19 11:18:04 +0000 value:80 formattedValue:(null) context:0x0 
```

播放器通过身份验证时的 NSLog 输出：

```
reportScore: 60
category: com.xxxxxx.yyyyyyyHighScore
scoreReporter: <GKScore: 0x964ce30>player:G:280817155 rank:0 date:2012-12-19 11:27:45 +0000 value:60 formattedValue:(null) context:0x0
Execute the scoreReporter the block 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:34:36.953

Game Center 编程指南说“大多数 Game Center 类仅在有经过身份验证的玩家时才起作用，并且这些类隐式引用本地玩家。例如，当您的游戏向排行榜报告分数时，它总是报告本地玩家的分数。当没有经过身份验证的玩家时，您的游戏必须禁用所有 Game Center 功能。”

可能发生的事情是 reportScoreWithCompletionHandler: 根本没有运行，所以它没有“完成”，所以它没有调用 completionHandler。在 reportScoreWithCompletionHandler 之前测试经过身份验证的玩家：GameKit 代码通常会多次出现以下 if/else：

```
if ( [GKLocalPlayer localPlayer].authenticated ) {
    ...
} else {
    ...
} 
```

# google-chrome - Chrome 扩展：background.js 每 X 分钟运行一次

> ID：13951476
> 
> 赞同：-1
> 
> 时间：2012-12-19T11:31:45.483
> 
> 标签：google-chrome, google-chrome-extension

我想编写一个每 X 秒运行一次的 background.js。如何设置**background.js**的时间间隔？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:41:24.717

在页面中包含你的 background.js 脚本文件，然后调用它包含的任何你希望使用[setInterval()使用的函数](http://www.w3schools.com/jsref/met_win_setinterval.asp "设置间隔")

```
setInterval(function()
{
myFunc()
},2000); 
```

最后的数字是毫秒间隔数，并将 myFunc() 替换为您要调用的函数的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:36:07.363

来自[github 页面](https://github.com/kmalakoff/background)：

```
queue = new Background.JobQueue(2000) 
```

在该队列中，您添加所需的所有作业，以毫秒为单位更改时间

提供更多信息（参见“更多代码”），我们可以为您提供更多帮助

# azure - 为什么我应该使用 LoadBalancerProbe 而不是订阅 RoleEnvironment.StatusCheck 事件？

> ID：13951477
> 
> 赞同：10
> 
> 时间：2012-12-19T11:31:48.790
> 
> 标签：azure, load-balancing

我正在摆弄 azure 提供的用于平衡多个 webrole 之间的负载的选项。

我找到了三种可能的方法来做到这一点。

第一个是什么都不做，让默认（循环）实现来完成这项工作。

第二种可能性是在 ServiceDefinitionFile 中定义一个自定义 LoadBalancerProbe，我尝试过但没有开始工作：据我了解，每次对角色执行状态检查时都会调用自定义 aspx 页面。根据 http 响应代码，角色将其状态更改为忙。- 但这永远不会发生。此外，我真的找不到任何定义自定义 LoadBalancingProbe 的示例。

因此，我寻找了另一种方法来做到这一点。

现在我订阅了 RoleEnvironment.StatusCheck 事件，它允许我实现一些逻辑，并根据结果将角色状态设置为忙碌和可用。

我的问题： 1) 假设自定义 LoadBalancerProbe 工作如 MSDN 中所述，订阅 StatusCheckEvent 和使用自定义探针有什么区别？

2) 为什么我的自定义负载均衡器探测不起作用？- 我现在只是在使用 azure 模拟器进行测试，并且我很清楚流量仍然会路由到 webrole 实例，尽管它们在模拟器中设置为忙。但我的自定义探针根本不会改变 webroleinstances 的状态。

这是非常基本的代码，据我所知，应该将 webrole instance_n_0 的状态设置为忙。

```
public class LoadBalanceController : Controller
{

    public ActionResult Index()
    {

        WebOperationContext woc = WebOperationContext.Current;
        if(RoleEnvironment.CurrentRoleInstance.Id.ToLower().Contains("_0"))
        {
            woc.OutgoingResponse.StatusCode = System.Net.HttpStatusCode.ServiceUnavailable;
        }else
        {
            woc.OutgoingResponse.StatusCode = System.Net.HttpStatusCode.OK;

        }           

        return View(); //not relevant
    } 
```

当调用自定义探针中定义的 healthcheck.aspx 时，我还配置了我的 servicedefinitionfile 并设置了一个路由以重定向到此控制器/操作。

```
<LoadBalancerProbes>
    <LoadBalancerProbe name="WebRoleBalancerProbeHttp" protocol="http" path="healthcheck.aspx" intervalInSeconds="5" timeoutInSeconds="100"/>
</LoadBalancerProbes>
...
<InputEndpoint name="EndpointWeb" protocol="http" port="80" loadBalancerProbe="WebRoleBalancerProbeHttp"/> 
```

路线：

```
 routes.MapRoute(
            name: "HealhCheck",
            url: "healthcheck.aspx",
            defaults: new { controller = "LoadBalance", action = "Index", id = UrlParameter.Optional }

        ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:11:48.677

不知道为什么自定义探测不起作用，但存在差异：运行状况检查事件可让您宣布实例是否可用，但在调用频率方面您没有任何灵活性。此外，您不能启动侦听自定义端口（或端口类型）的单独服务。

自定义探针具有更大的灵活性，因为您可以创建任何类型的端口侦听器来确定运行状况，甚至是单独的 exe。

对于虚拟机，这是运行状况探测的唯一方法，因为虚拟机不运行来宾代理，也不提供运行状况检查事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-15T03:03:10.553

在您的服务定义文件中，您已将探测标记为托管在 http 端点（而不是 HTTPS）上。

您的网络应用程序也是这种情况吗？它是否在 HTTP 而不是 HTTPS 上公开该端点？如果是，那么还要检查是否有任何自动重定向到 HTTPS 发生。

我认为您已经正确设置了所有内容。[这](https://vunvulearadu.blogspot.com/2014/05/load-balancer-probe-of-azure-custom.html)是一个帖子，其中包含一些示例代码和[来自 SO 的另一个问题](https://stackoverflow.com/questions/29801557/custom-loadbalaner-probing-for-https-endpoints-in-azure-cloudservices)，他们成功地设置了它（应该提供对 csdef 文件的一些见解）。

我同意 David Makogon 关于两者之间差异的观点。

# wordpress - 列出在 Wordpress 中的类别/标签中写过一定数量帖子的作者

> ID：13951478
> 
> 赞同：3
> 
> 时间：2012-12-19T11:31:54.390
> 
> 标签：wordpress, wordpress-theming

我正在努力获取类别页面上的作者列表。我需要列出在该类别中至少写过 5 篇文章的作者。

我在标签中也需要这样的东西。

知道如何在 wordpress 中执行此操作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-23T21:10:56.307

只有使用自定义 SQL 查询才有可能，所以这里有一个简单的函数，它应该返回一个数组，其中包含用户的用户 id，在当前术语存档中至少有 $n 个帖子，这意味着它应该在类别、标签和自定义分类中工作

```
function get_authors_with($num = 5){
    global $wpdb;
    $term_slug = get_query_var( 'term' );
    $taxonomyName = get_query_var( 'taxonomy' );
    $current_term = get_term_by( 'slug', $term_slug, $taxonomyName );
    $sub_q = $wpdb->prepare("SELECT * FROM $wpdb->posts
            INNER JOIN $wpdb->term_relationships ON ($wpdb->posts.ID = $wpdb->term_relationships.object_id)
            INNER JOIN $wpdb->term_taxonomy ON ($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
            WHERE ($wpdb->term_taxonomy.term_id = %s
            AND $wpdb->term_taxonomy.taxonomy = '%s'
            AND $wpdb->posts.post_type = 'post'
            AND $wpdb->posts.post_status = 'publish')",
        $current_term->term_id,
        $taxonomyName
    );
    $sql = $wpdb->prepare("SELECT $wpdb->posts.post_author, FROM (%s)
            GROUP BY $wpdb->posts.post_author
            HAVING count(*) > %s",
            $sub_q,
            $num
    );
    return $wpdb->get_results($sql);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:59:35.570

尝试这个。

```
function list_author_in_this_cat ($with) {
if (is_category()) {
    $current_category = get_query_var('cat');
    $args = array(
        'numberposts' => -1,
        'category' => $current_category,
        'orderby' => 'author',
        'order' => 'ASC'
    );
} else {
    $tag_id = get_query_var('tag_id');
    $args = array(
        'numberposts' => -1,
        'tag__in' =>  $tag_id,
        'orderby' => 'author',
        'order' => 'ASC'
    );
}
$cat_posts = get_posts($args);

$author_id_array = array();
$user_posts = array();
foreach( $cat_posts as $cat_post ):
    $user_posts[$cat_post->post_author][] = $cat_post->ID;
endforeach;

foreach( $user_posts as $key => $user_post ):   
    $user_post = array_unique($user_post);
    $count_user_posts[$key] = count($user_post);

    if ($count_user_posts[$key] >= $with) {
        $author_id_array[] = $key;
    }       
endforeach;

return $author_id_array; } 
```

在您的主题文件中，将此代码放置在您希望显示作者列表的任何位置：

```
if (is_category() || is_tag()) {

    $at_least = 5;  // at least 5 articles in current category or tags

    $author_array = list_author_in_this_cat ($at_least);
    foreach (array_slice($author_array, 0, 4) as $author) : // limit 4 results
        $name = get_userdata($author)->display_name;
        $link = get_userdata($author)->user_login;
        echo "<a href='/author/".$link."'>".$name."</a>\n";
    endforeach;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T09:57:24.533

我用查询发布方法做了一些简单的编码。，

```
<?php 
$cur_cat_id = get_cat_id(single_cat_title("",false));
$posts=query_posts("cat=$cur_cat_id&order=ASC");
foreach($posts as $post){
$number_of_posts = number_format_i18n(get_the_author_posts($post->post_author));
if($number_of_posts>5)
{
echo the_author_meta('user_nicename',$post->post_author)."(".number_format_i18n(get_the_author_posts($post->post_author)).")<br>";
}
}
?> 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-29T04:59:36.163

将以下代码添加到主题的 function.php

```
function get_authors_in_category ( $category_id, $min_posts ) {
    $posts = get_posts( array( 'numberposts' => 1000, 'category' => $category_id ) );
    $author_count = array();
    foreach ($posts as $post) {
    if( array_key_exists( get_the_author_meta( 'display_name', $post->post_author ), $author_count ) ) {
      $author_count[get_the_author_meta( 'display_name', $post->post_author )]++;
     } else { $author_count[get_the_author_meta( 'display_name', $post->post_author )] = 1; }
    }
    $authors = array();
    foreach ( $author_count as $author_name => $count ) {
    if ( $min_posts  <= $count ) {
    $authors[] = $author_name;
    }
    return $authors;
  } 
```

如您所见，此函数返回一个作者数组，这些作者在一个类别中拥有最少数量的帖子。必须传递类别 ID，这可以使用 wordpress 函数 get_cat_ID 获得。

您可以从主题中的任何位置调用此函数并根据需要显示作者。

注意：这比自定义 SQL 函数更占用资源。这个函数也可能有一些错误，我在这里输入并没有测试它。

# java - 找出哪个客户端正在进行 API 调用：Google 应用引擎

> ID：13951480
> 
> 赞同：0
> 
> 时间：2012-12-19T11:31:56.237
> 
> 标签：java, google-app-engine

目前我有一个使用谷歌应用引擎的服务器实现，并且服务器 API 正在 iPhone、Android 和 Web 客户端上使用。

谷歌应用引擎上是否有任何可用的本机函数可以确定哪个客户端类型（iphone/android/web）正在进行 API 调用？

我知道找出这些信息的一种方法是通过从客户端传递一个密钥，同时使 API 调用将自己标识为它的客户端类型。但我想避免跨 3 个客户端的这种实现。

此处附加的是源自 Android 客户端的服务器日志。

```
"GET /api/getAllFeeds?id=xxxx HTTP/1.1" 200 789 - "Dalvik/1.6.0 (Linux; U; Android 4.1.1; GT-I9300 Build/JRO03C)" "mytestapp.appspot.com" ms=10923 cpu_ms=6629 cpm_usd=0.000088 loading_request=1 instance=00c61b117c22d1aab5f2fc54eb72f57774552188" 
```

所以基本上服务器似乎知道发起呼叫者的类型。但我不确定如何从代码中检索它。

感谢您的帮助拉贾特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:02:11.243

调用者类型嵌入在 HTTP 请求的标头中，在字段下`User-Agent`。`getHeaders( "User-Agent" )`如果您的处理程序使用基本的 HttpServletRequest 类，您可以通过调用该方法获取该字段上的值的枚举。

如果您使用 Jersey 作为您的处理程序，您可以实现一个[ContainerRequestFilter](http://jersey.java.net/nonav/apidocs/1.1.2-ea/jersey/com/sun/jersey/spi/container/ContainerRequestFilter.html)，它可以将请求作为 ContainerRequest 拦截，并且您可以调用`getRequestHeaders()`来获取标头。

请注意，单个请求字段可能包含多个值。将标题视为多值映射。

# asp.net - 树视图条件格式

> ID：13951490
> 
> 赞同：2
> 
> 时间：2012-12-19T11:32:47.733
> 
> 标签：asp.net, vb.net, treeview, conditional-formatting

我有一个从这样的数据集中填充的树视图

```
Dim PrSet As New DataSet()
        If lblemail.Text.ToString().Equals("ali.saleem@shakarganj.com.pk") Then
            PrSet = PDataset("select distinct PEND,to_char(BPV_DTE,'DD MON YYYY') BPV_DTE,BPV_DTE BPV_DTE1,COUNT from chq_dir order by 3 desc")
        Else
            PrSet = PDataset("select distinct PEND,to_char(BPV_DTE,'DD MON YYYY') BPV_DTE,BPV_DTE BPV_DTE1,COUNT from chq_dte order by 3 desc")
        End If
        TreeView2.Nodes.Clear()
        For Each dr As DataRow In PrSet.Tables(0).Rows
            Dim tnParent As New TreeNode()
            tnParent.Text = dr("PEND").ToString()
            tnParent.Value = dr("BPV_DTE")
            tnParent.PopulateOnDemand = True
            tnParent.SelectAction = TreeNodeSelectAction.Select
            tnParent.ToolTip = tnParent.Text
            tnParent.Expand()
            TreeView2.Nodes.Add(tnParent)
            If dr("COUNT").ToString() = "0" Then
                TreeView2.Font.Bold= True
            End If
        Next dr 
```

有一些日期的列`COUNT`。`0`问题是我试图将树视图加粗，`COUNT`但`0`它不起作用任何人都可以给我一个明确的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:42:10.470

我已经像这样解决了我的问题

```
 If Not dr("COUNT") = 0 Then
 tnParent.Text = "<b>" & dr("PEND").ToString() & "</b>"
 End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:54:49.590

在将节点添加到树视图中的父节点之前应用样式`tnparent`并执行此操作，并且从您的代码中看起来您正在将字体更改为斜体而不是粗体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:56:18.607

我希望我已经收集了你这个问题的意思......

```
 For Each tn As TreeNode In treeView2.Nodes
     If tn.Text = "0" Then
          Dim index As Integer
          index = tn.Index
          treeView2.Nodes(index).NodeFont = New Font(treeView2.Font, FontStyle.Bold)
     End If
  Next 
```

# internet-explorer - 为什么 hta 脚本不能从 Internet Explorer 菜单项运行？

> ID：13951491
> 
> 赞同：1
> 
> 时间：2012-12-19T11:32:48.850
> 
> 标签：internet-explorer, customization, hta

我创建了这个 hta 文件：

```
<script type="text/javascript">
alert("alert!!!");
</script> 
```

并在 IE 中添加菜单项（如此处所述：http: [//msdn.microsoft.com/en-us/library/aa753591](http://msdn.microsoft.com/en-us/library/aa753591(v=vs.85).aspx) (v=vs.85).aspx ）来运行它。我在 ie 中看到我的菜单项，我的菜单项的注册表项中的脚本值指向我的 hta 文件。那么为什么当我按下菜单项时没有任何反应（我没有看到任何警报）。请帮我调试一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:04:23.723

我将文件扩展名从 hta 更改为 htm 并开始工作。)))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T15:24:51.170

实际上，在 MSDN 页面的末尾有一些 yecril 的说明。Yecril 说，它`document`不像通常那样可用。`document`应该通过 引用`external.menuArguments`，它实际上似乎代表当前`window`对象。

`alert()`是一种方法`window`，所以我想你的脚本应该是这样的：

```
<script type="text/javascript">
    var win = external.menuArguments;
    win.alert("alert!!!");
</script> 
```

* * *

（我知道这纯粹是猜测，应该是一个评论，但我发现这对于评论来说太宽泛了。）

# ruby-on-rails - 没有使用回形针和 aws-sdk gem 上传头像

> ID：13951495
> 
> 赞同：4
> 
> 时间：2012-12-19T11:32:53.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, paperclip

我的头像上传有问题。它曾经对我有用，但这次我必须是盲人。我正在使用回形针和 aws-sdk gem 并[按照此处所述设置所有内容。](https://github.com/thoughtbot/paperclip)

我已经用 2 个水桶对其进行了测试。一个是标准的`us-location`，一个是`eu-west-1`位置的。**两者都不起作用。**

这是我所有的相关代码：

### 配置/s3.yml

```
development:
  bucket: ***
  access_key_id: ***  
  secret_access_key: ***
test:
  bucket: ***
  access_key_id: ***  
  secret_access_key: ***
production:
  bucket: ***
  access_key_id: ***  
  secret_access_key: *** 
```

### 应用程序/模型/art.rb

```
class Art < ActiveRecord::Base
  attr_accessible :created_at, :description, :name, :avatar
  has_attached_file :avatar,
      :storage => :s3,
      :s3_credentials => "#{Rails.root}/config/s3.yml",
      :url => ':set_alias_url',
      :path => "/:style/:id/:filename.:extension",
          :bucket => '***'

end 
```

### 应用程序/控制器/arts_controller.rb

```
class ArtsController < ApplicationController 
...
def create
      @art = Art.new(params[:art])
      if @art.save
          flash[:notice] = "sucessfully saved upload" 
          redirect_to arts_path
      else 
          flash[:notice] = "error" 
          render "new"
      end

    ... 
```

### app/views/arts/new.html.erb

```
<h1>Arts#new</h1>
<p>Find me in app/views/arts/new.html.erb</p>
<%= form_for(@art, :url => arts_path, :html => { :multipart => true }) do |f| %>
    <%= f.label :name %> <br/>
    <%= f.text_field :name %> <br/>

    <%= f.label :description %> <br/>
    <%= f.text_field :description %> <br/>

    <%= f.label :avatar %> <br/>
    <%= f.file_field :avatar %> <br/>
    <%= f.submit %>
<% end %> 
```

我现在在网上搜索了 2 天，但找不到我的错误。这是来自服务器的响应：

```
POST "/arts/new" for 127.0.0.1 at 2012-12-19 12:11:39 +0100
    Processing by ArtsController#new as HTML
      Parameters: {"utf8"=>"✓", "authenticity_token"=>"ZyZFfSaTl9CQpL5kOXyt/rcoi+SCuNp5/deCYda83sE=", "art"=>{"name"=>"asdf", 
"description"=>"asdf", 
"avatar"=>#<ActionDispatch::Http::UploadedFile:0x0000000296e0b8 @original_filename="lakritz10.jpg", 
@content_type="image/jpeg", 
@headers="Content-Disposition: form-data; name=\"art[avatar]\"; filename=\"lakritz10.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/tmp/RackMultipart20121219-5804-1rnvkmj>>}, 
"commit"=>"Create Art 
```

那么任何人都可以帮我解决这个问题吗？

提前致谢。

编辑：似乎即使没有附件，也没有任何内容保存在数据库中。那是有线...

EDIT_SOLUTION：为了解决我的特定问题，我必须更改`routes.rb` 我之前假设的条目

```
match "arts/new", :to => "arts#new", :as => 'arts' 
```

会做的工作。此情况并非如此。我不得不将行更改为：

```
resources :arts 
```

因为我还不明白路线究竟是如何工作的，所以我无法解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T13:52:18.953

您的线路：

```
match "arts/new", :to => "arts#new", :as => 'arts' 
```

只创建到`new`动作的路线。它映射`arts_path`到`arts/new`哪个是您的表单的目标。您确实需要提交表单，该表单`arts#create`是资源为`POST`新对象自动执行的操作。

# xcode - 如何将自定义对象添加到 Xcode？

> ID：13951498
> 
> 赞同：1
> 
> 时间：2012-12-19T11:32:59.387
> 
> 标签：xcode

我想创建一个对象并在我的项目中使用它。我可以做到，但是在 xib 文件的对象面板下有一个显示这些值的弹出列表：

> Cocoa touch [控件、数据视图和...]
> 
> 自定义对象

自定义对象列表为空！有什么方法可以将我的对象添加到此列表中？这份清单究竟是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:53:36.753

这个列表确实是为了保存自定义对象模板。您可以创建这些自定义对象，然后将它们拉入列表以供以后重用。

但是，它似乎在 Xcode 的当前稳定版本（4.5.2）中不起作用。

您应该检查它是否适用于最新的开发者预览版。如果不是，您可能应该[提交一个错误](http://bugreport.apple.com)。

# android - 使用现有的 gmail 帐户并发送邮件

> ID：13951501
> 
> 赞同：3
> 
> 时间：2012-12-19T11:33:13.790
> 
> 标签：android

到目前为止，我已经浏览了各种论坛，发现我们必须获得令牌才能发送电子邮件。我尝试了各种方式，但无法向任何人发送邮件。任何人都可以通过发送与此相关的各种链接来帮助我。

这是我的 Mail.java 类

```
package com.mycomp.android.test;

import java.util.Properties;

import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
 import javax.mail.BodyPart;
import javax.mail.Message;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;

public class Mail extends javax.mail.Authenticator {

private Multipart attachements;

private String fromAddress = "";
private String accountEmail = "";
private String accountPassword = "";
private String smtpHost = "smtp.gmail.com";
private String smtpPort = "465"; // 465,587
private String toAddresses = "";
private String mailSubject = "";
private String mailBody = "";

public Mail() {
    attachements = new MimeMultipart();

}

public Mail(String user, String pass) {
    this();
    accountEmail = user;
    accountPassword = pass;
}

public boolean send() throws Exception {

    Properties props = new Properties();
    //props.put("mail.smtp.user", d_email);
    props.put("mail.smtp.host", smtpHost);
    props.put("mail.smtp.port", smtpPort);
    props.put("mail.smtp.starttls.enable", "true");
    props.put("mail.smtp.debug", "true");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.socketFactory.port", smtpPort);
    props.put("mail.smtp.socketFactory.class",
            "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.socketFactory.fallback", "false");

    try {
        Session session = Session.getInstance(props, this);
        session.setDebug(true);

        MimeMessage msg = new MimeMessage(session);
        // create the message part 
        MimeBodyPart messageBodyPart = new MimeBodyPart();
        //fill message
        messageBodyPart.setText(mailBody);
        // add to multipart
        attachements.addBodyPart(messageBodyPart);

        //msg.setText(mailBody);
        msg.setSubject(mailSubject);
        msg.setFrom(new InternetAddress(fromAddress));
        msg.addRecipients(Message.RecipientType.TO,
                InternetAddress.parse(toAddresses));
        msg.setContent(attachements);

        Transport transport = session.getTransport("smtps");
        transport.connect(smtpHost, 465, accountEmail, accountPassword);
        transport.sendMessage(msg, msg.getAllRecipients());
        transport.close();
        return true;
    } catch (Exception e) {
        return false;
    }
}

public void addAttachment(String filename) throws Exception {
    BodyPart messageBodyPart = new MimeBodyPart();
    DataSource source = new FileDataSource(filename);
    messageBodyPart.setDataHandler(new DataHandler(source));
//      messageBodyPart.setFileName("filename");
    attachements.addBodyPart(messageBodyPart);
}

@Override
public PasswordAuthentication getPasswordAuthentication() {
    return new PasswordAuthentication(accountEmail, accountPassword);
}

/**
 * Gets the fromAddress.
 * 
 * @return <tt> the fromAddress.</tt>
 */
public String getFromAddress() {
    return fromAddress;
}

/**
 * Sets the fromAddress.
 *
 * @param fromAddress <tt> the fromAddress to set.</tt>
 */
public void setFromAddress(String fromAddress) {
    this.fromAddress = fromAddress;
}

/**
 * Gets the toAddresses.
 * 
 * @return <tt> the toAddresses.</tt>
 */
public String getToAddresses() {
    return toAddresses;
}

/**
 * Sets the toAddresses.
 *
 * @param toAddresses <tt> the toAddresses to set.</tt>
 */
public void setToAddresses(String toAddresses) {
    this.toAddresses = toAddresses;
}

/**
 * Gets the mailSubject.
 * 
 * @return <tt> the mailSubject.</tt>
 */
public String getMailSubject() {
    return mailSubject;
}

/**
 * Sets the mailSubject.
 *
 * @param mailSubject <tt> the mailSubject to set.</tt>
 */
public void setMailSubject(String mailSubject) {
    this.mailSubject = mailSubject;
}

/**
 * Gets the mailBody.
 * 
 * @return <tt> the mailBody.</tt>
 */
public String getMailBody() {
    return mailBody;
}

/**
 * Sets the mailBody.
 *
 * @param mailBody <tt> the mailBody to set.</tt>
 */
public void setMailBody(String mailBody) {
    this.mailBody = mailBody;
}
} 
```

这是我的 MailSenderActivity.java 类

```
package com.mycomp.android.test;

        import java.io.ByteArrayOutputStream;
        import java.io.File;
        import java.io.FileNotFoundException;
        import java.io.FileOutputStream;
        import java.io.IOException;
        import java.util.regex.Pattern;

        import android.accounts.Account;
        import android.accounts.AccountManager;
        import android.app.Activity;
        import android.app.ProgressDialog;
        import android.graphics.Bitmap;
        import android.graphics.BitmapFactory;
        import android.os.AsyncTask;
        import android.os.Bundle;
        import android.os.StrictMode;
        import android.util.Log;
        import android.util.Patterns;
        import android.view.View;
        import android.widget.Button;
        import android.widget.Toast;

 public class MailSenderActivity extends Activity {
AccountManager am = AccountManager.get(this); // "this" references the current Context
 Pattern emailPattern = Patterns.EMAIL_ADDRESS;
Account[] accounts = am.getAccountsByType("com.google");

private static final String GMAIL_EMAIL_ID = "From Email Address";
private static final String GMAIL_ACCOUNT_PASSWORD = "password";
private static final String TO_ADDRESSES = "To Email Address";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);

    writeFile();

    final Button send = (Button) this.findViewById(R.id.send);
    send.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            new MailSenderActivity.MailSender().execute();
        }
    });

}

private File imageFile;

private boolean writeFile() {
    imageFile = new File(
            getApplicationContext().getFilesDir() + "/images/",
            "sample.png");

    String savePath = imageFile.getAbsolutePath();
    System.out.println("savePath :" + savePath + ":");

    FileOutputStream fileOutputStream = null;
    try {
        fileOutputStream = new FileOutputStream(savePath, false);
    } catch (FileNotFoundException ex) {
        String parentName = new File(savePath).getParent();
        if (parentName != null) {
            File parentDir = new File(parentName);
            if ((!(parentDir.exists())) && (parentDir.mkdirs()))
                try {
                    fileOutputStream = new FileOutputStream(savePath, false);
                } catch (FileNotFoundException e) {
                    e.printStackTrace();
                }

        }
    }

    // here i am using a png from drawable resources as attachment. You can use your own image byteArray while sending mail. 
    Bitmap bitmap = BitmapFactory.decodeResource(
            MailSenderActivity.this.getResources(), R.drawable.english);
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] imgBuffer = stream.toByteArray();

    boolean result = true;

    try {
        fileOutputStream.write(imgBuffer);
        fileOutputStream.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
        result = false;
    } catch (IOException e2) {
        e2.printStackTrace();
        result = false;
    } finally {
        if (fileOutputStream != null) {
            try {
                fileOutputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
                result = false;
            }
        }
    }

    return result;

}

class MailSender extends AsyncTask<Void, Integer, Integer> {

    ProgressDialog pd = null;

    /*
     * (non-Javadoc)
     * 
     * @see android.os.AsyncTask#onPreExecute()
     */
    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = new ProgressDialog(MailSenderActivity.this);
        pd.setTitle("Uploading...");
        pd.setMessage("Uploading image. Please wait...");
        pd.setCancelable(false);
        pd.show();

    }

    /*
     * (non-Javadoc)
     * 
     * @see android.os.AsyncTask#doInBackground(Params[])
     */
    @Override
    protected Integer doInBackground(Void... params) {

        Mail m = new Mail(GMAIL_EMAIL_ID, GMAIL_ACCOUNT_PASSWORD);

        String toAddresses = TO_ADDRESSES;
        m.setToAddresses(toAddresses);
        m.setFromAddress(GMAIL_EMAIL_ID);
        m.setMailSubject("This is an email sent using my Mail JavaMail wrapper from an Android device.");
        m.setMailBody("Email body.");

//          try {
//              ZipUtility.zipDirectory(new File("/mnt/sdcard/images"),
//                      new File("/mnt/sdcard/logs.zip"));
//          } catch (IOException e1) {
//              Log.e("MailApp", "Could not zip folder", e1);
//          }

        try {
            String path = imageFile.getAbsolutePath();
            System.out.println("sending path:" + path + ":");
            m.addAttachment(path);

            // m.addAttachment("/mnt/sdcard/logs.zip");

            if (m.send()) {
                System.out.println("Message sent");
                return 1;
            } else {
                return 2;
            }

        } catch (Exception e) {
            Log.e("MailApp", "Could not send email", e);
        }
        return 3;
    }

    /*
     * (non-Javadoc)
     * 
     * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
     */
    @Override
    protected void onPostExecute(Integer result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        pd.dismiss();

        if (result == 1)
            Toast.makeText(MailSenderActivity.this,
                    "Email was sent successfully.", Toast.LENGTH_LONG)
                    .show();
        else if (result == 2)
            Toast.makeText(MailSenderActivity.this, "Email was not sent.",
                    Toast.LENGTH_LONG).show();
        else if (result == 3)
            Toast.makeText(MailSenderActivity.this,
                    "There was a problem sending the email.",
                    Toast.LENGTH_LONG).show();

    }
}

} 
```

如果我手动设置 GMAIL_EMAIL_ID、GMAIL_ACCOUNT_PASSWORD 和 TO_ADDRESSES，我可以发送消息。但是我已经获得了默认的 GMAIL_EMAIL_ID 和 GMAIL_ACCOUNT_PASSWORD whisch 已经在移动应用程序中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:34:53.023

您可以使用它来发送带有附件的电子邮件：

```
public static void sendEmail(Context context, String emailTo, String emailCC, String subject, String emailText, String type, List<String> filePaths) {
    //need to "send multiple" to get more than one attachment
    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
    emailIntent.setType("image/png");
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{emailTo});
    emailIntent.putExtra(android.content.Intent.EXTRA_CC, new String[]{emailCC});
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailText);
    //has to be an ArrayList
    ArrayList<Uri> uris = new ArrayList<Uri>();
    //convert from paths to Android friendly Parcelable Uri's
    if(filePaths != null) {
        for (String file : filePaths) {
            File fileIn = new File(file);
            Uri u = Uri.fromFile(fileIn);
            uris.add(u);
        }
        emailIntent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
    }
    try {
        context.startActivity(Intent.createChooser(emailIntent, context.getString(R.string.send_email_using_message)));
    }catch (ActivityNotFoundException e) {
        new DigitalReplicaDialog(context, context.getResources().getString(R.string.email_not_configured_warning)).show();
    }
} 
```

# backbone.js - 模板未加载到backbone.js（TypeError：文本未定义）

> ID：13951503
> 
> 赞同：6
> 
> 时间：2012-12-19T11:33:17.007
> 
> 标签：backbone.js, underscore.js

我正在学习[backbone.js](http://backbonejs.org/)，而且还处于起步阶段。我想通过[下划线](http://underscorejs.org/#template)模板方法添加模板，但它不适合我。我搜索了这个错误，但自己无法修复。如果没有显示模板，我该如何前进。需要一些帮助的家伙。

这是代码（此代码来自 addyosmani 的书骨干基础）：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>testing</title>
</head>
<body>
<script src="scripts/jquery.js"></script>
<script src="scripts/underscore.js"></script>
<script src="scripts/backbone.js"></script>
<script>

    var TodoView = Backbone.View.extend({
    tagName: 'li',
    // Cache the template function for a single item.
    todoTpl: _.template( $('#item-template').html() ),

    events: {
    'dblclick label': 'edit',
    'keypress .edit': 'updateOnEnter',
    'blur .edit': 'close'
    },

    // Re-render the titles of the todo item.

    render: function() {
    this.$el.html( this.todoTpl( this.model.toJSON() ) );
    this.input = this.$('.edit');
    return this;
    },

    edit: function() {
    // executed when todo label is double clicked
    },

    close: function() {
    // executed when todo loses focus
    },

    updateOnEnter: function( e ) {
    // executed on each keypress when in todo edit mode,
    // but we'll wait for enter to get in action
    }

    });

    var todoView = new TodoView();
    // logs reference to a DOM element that cooresponds to the view instance
    console.log(todoView.el); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T11:47:06.283

如果模板是在您的脚本之后定义的，它将不起作用。

将您的入口点包装到

```
$(function(){
   var todoView = new TodoView();
}); 
```

所以你不会得到这种错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-21T10:18:46.937

我得到了同样的错误。确保页面上存在具有定义**id**的模板。在我的情况下，我为模板使用了错误的*id*，这是错误*"TypeError: n is undefined"*的原因。

# android - 跟踪多次调用的方法

> ID：13951505
> 
> 赞同：0
> 
> 时间：2012-12-19T11:33:21.930
> 
> 标签：android

我想跟踪一个被多次调用的方法，但`startMethodTracing`在第二次调用时会覆盖文件。我试图在程序结束时停止跟踪它，但是当调用 nem start tracking 时，它会自动停止早期跟踪。

好吧，我可以在 中开始跟踪`main`，但这是不可能的。有大量数据，因此跟踪缓冲区溢出（已设置`bufferSize`为可能的最大值）。

PS：只跟踪我想要的这个方法的调用也无济于事，因为这个上层方法也可以被多次调用，我也会遇到同样的问题，并且随着缓冲区溢出，继续向上不是一个选项。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:35:55.510

在类中创建一个布尔值，指示是否已经开始跟踪。如果有，那就不要再打电话`startMethodTracing()`了。如果没有，则将布尔值设置为 true 并开始跟踪。

# javascript - 锚标签的行为非常奇怪

> ID：13951507
> 
> 赞同：0
> 
> 时间：2012-12-19T11:33:22.787
> 
> 标签：javascript, html

我在网站上有一个锚标签，如下所示：

```
<a href="http://www.abc.com/..." class="abc-profileinsider-popup">
  <img src="..." />
</a> 
```

问题是它永远不会在单击时将页面重定向到 href。

每当我将类重命名为`abc-profileinsider-popup`X`X-profileinsider-popup`是除 之外的任何字符串时`abc`，它都会起作用。谁能说出这种行为背后的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:34:17.920

我认为您的代码中有一个事件处理程序可以防止默认行为，并且它专门附加到具有 `abc-profileinsider-popup`类的元素。

如果是这种情况，您应该找到类似的内容：

```
myAnchor
  .addEventListener("click", function (event) {
    event.preventDefault();
  }); 
```

我会在您的代码库中搜索字符串**abc-profileinsider-popup**的出现。

那是我写的一篇文章，以防您需要有关[W3C 事件模型](https://brunoscopelliti.com/about-events/)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:34:48.930

您在某处有一个 javascript 函数，该函数将事件附加到具有类的元素：`abc-profileinsider-popup`。

此函数必须返回 false 意味着链接不处理。尝试禁用 javascript 以确认这一点，该链接应该在禁用 Javascript 的情况下工作。

然后搜索代码，看看它在做什么:)

# android - SVG 图像在 android phonegap 项目的 div 内无法正确显示

> ID：13951508
> 
> 赞同：2
> 
> 时间：2012-12-19T11:33:22.727
> 
> 标签：android, cordova, svg

当我在 android phonegap 中将 svg 图像加载到具有特定宽度和高度的 div 中时，图像显示全屏覆盖所有其他 div 而不是在其指定的 div 中，并且无法继续进行。svg 是动态加载的，现在的示例代码段是

```
<div style="width:400px;height:400px" >
   <object width="100%" height="100%" data="test.svg" type="image/svg+xml"></object>
</div> 
```

相同的代码适用于 IOS，但在 android 中会出现问题。此外，有时它第一次加载完美，但由于动态加载而更改图像时，它再次显示全屏。我正在 Android ICS 中进行测试。有没有其他人面临同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:43:02.320

找到它，更新你的phonegap版本。svg 渲染在最新版本的科尔多瓦中很好：2.3.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:51:11.903

我认为问题出在android浏览器上。我也在努力，找不到任何合法的解决方案。

# javascript - 如何在我的表单中添加 SaveandContinueEdit 按钮？

> ID：13951515
> 
> 赞同：2
> 
> 时间：2012-12-19T11:33:42.103
> 
> 标签：javascript, forms, magento, adminhtml

我正在开发一个新的 Magento 扩展，在我的 Adminhtml 表单中我想添加按钮“saveAndContinueEdit”

我已将此代码添加到我的 Edit.php 文件中。

```
 $this->_addButton('saveandcontinue', array(
    'label'     => Mage::helper('adminhtml')->__('Save And Continue Edit'),
    'onclick'   => 'saveAndContinueEdit()',
    'class'     => 'save',
), -100); 
```

但是当我点击它时，我有这个 JavaScript 错误：

> 错误：ReferenceError：saveAndContinueEdit 未定义 Fichier 来源： [http://XXXX/magento/index.php/slider/adminhtml_config/new/key](http://X.X.X.X/magento/index.php/slider/adminhtml_config/new/key)

你能帮助我吗 ？
谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T11:48:35.990

在您的管理员块构造函数中放入这些行。

```
$this->_formScripts[] = " function saveAndContinueEdit(){
            editForm.submit($('edit_form').action+'back/edit/');
        }
    "; 
```

请记住，您还必须在 PHP 中为其编写功能。现在，在您的操作中，只需最后检查一下您是否以参数的形式返回 .. 将其重定向到引用页面。

# java - 如何在java中使用日光将日期格式从一个时区转换为另一种时区

> ID：13951523
> 
> 赞同：-5
> 
> 时间：2012-12-19T11:33:56.207
> 
> 标签：java, date, datetime, timezone, dst

> **可能重复：**
> [时区转换](https://stackoverflow.com/questions/6567923/timezone-conversion)

我想编写一个 java 代码，用于将日期格式从一个时区转换为另一个时区。我正在使用 Oracle 数据库。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:45:02.023

你想这样做

```
Date date = new Date();  

DateFormat formatter = new SimpleDateFormat("dd MMM yyyy HH:mm:ss z");  
formatter.setTimeZone(TimeZone.getTimeZone("CET"));  

// Prints the date in the CET timezone  
System.out.println(formatter.format(date));  

// Set the formatter to use a different timezone  
formatter.setTimeZone(TimeZone.getTimeZone("IST"));  

// Prints the date in the IST timezone  
System.out.println(formatter.format(date)); 
```

# javascript - Google Chart API - 总是必须为日期创建新的 Date() 对象？

> ID：13951531
> 
> 赞同：0
> 
> 时间：2012-12-19T11:34:16.190
> 
> 标签：javascript, google-visualization

在我的应用程序中，我通过 Python（通过 AJAX 调用）以以下格式从 SQL 实例返回一些值：

```
[['2012-11-18', 33, 2], ['2012-11-19', 162, 11], ['2012-11-20', 140, 13]] 
```

不幸的是，如果我希望 Google Chart API 将其识别为日期而不是字符串，我似乎需要`new Date(x)`在 Javascript 中使用对象创建。这总是必要的吗？我怎样才能以编程方式从我当前的输出中实现这一点，无论是在 Javascript 还是 Python 中？任何提示都会有所帮助！

下面不起作用

```
...
data.addColumn('date', 'Date');
data.addColumn('number', 'Pageviews');
data.addColumn('number', 'Unique Visitors');
data.addRows([['2012-11-18', 33, 2], ['2012-11-19', 162, 11], ['2012-11-20', 140, 13]]); 
... 
```

以下作品：

```
...
data.addColumn('date', 'Date');
data.addColumn('number', 'Pageviews');
data.addColumn('number', 'Unique Visitors');
data.addRows([[new Date('2012-11-18'), 33, 2], [new Date('2012-11-19'), 162, 11], [new Date('2012-11-20'), 140, 13]]); 
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:40:46.087

试试这个：

```
var dateArray = [['2012-11-18', 33, 2], ['2012-11-19', 162, 11], ['2012-11-20', 140, 13]];
for(var i = 0; i < dateArray.length; i++){
    dateArray[i][0] = new Date(dateArray[i][0]); // Set dateArray[i][0] to a `new Date()` with as value the string in `dateArray[i][0]`;
}
data.addRows(dateArray); 
```

这会将日期字符串设置为数组中的日期对象。

# c# - 非托管数组封送处理和大小作为指针

> ID：13951534
> 
> 赞同：1
> 
> 时间：2012-12-19T11:34:19.863
> 
> 标签：c#, .net, interop, unmanaged

我想从 C# 代码调用非托管 C 函数，调用本身工作正常，但是我需要对 C# 代码进行回调。我在 C++ 中有一个具有以下签名的函数：

```
SRes Read(void *p, void *buf, size_t *size); 
```

我写了一个相应的委托，看起来像这样：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
delegate int StreamRead(IntPtr ptr, [MarshalAs(UnmanagedType.LPArray, SizeParamIndex = 2)] byte[] buffer, ref int bytes); 
```

`System.AccessViolationException`不幸的是，应用程序在尝试执行回调时崩溃 ( )。参数看起来很合理，唯一可能想到的问题是数组的大小读取不正确。使用上面的封送规范，数组的大小将从`size`or中读取`*size`？如果是前者，那么如何将其更改为后者？如果这不是崩溃的原因，那么这里还有什么问题？还值得注意的是，删除`MarshalAs`属性后调用成功，但我的数组大小为 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:59:27.717

虽然我希望有更好的东西，但以下解决方法可以正常工作：

```
[UnmanagedFunctionPointer(CallingConvention.Cdecl)]
delegate int StreamRead(IntPtr ptr, byte* buffer, int* bytes); 
```

如果您知道如何使其与 byte[] 一起使用，请分享。

# java - 如何在 iReports 中向 reportElement 标签添加新属性？

> ID：13951536
> 
> 赞同：2
> 
> 时间：2012-12-19T11:34:36.943
> 
> 标签：java, jasper-reports

我正在尝试在我的报告中包含 css 类。是否可以将我自己的属性添加到 reportElement 标记，以便我可以包含我的 css 文件参考链接？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:46:37.120

您需要做的是向您想要引用的字段添加一个属性。要添加您需要添加的类名**`net.sf.jasperreports.export.html.class`**并包含您需要添加**`net.sf.jasperreports.export.html.id`**为属性的 id。例如，下面是一个设置两者的文本字段：

```
<textField>
    <reportElement uuid="2399e4ef-633c-4d17-b964-3e093ece1936" x="0" y="22" width="100" height="20">
        <property name="net.sf.jasperreports.export.html.class" value="TEST"/>
        <property name="net.sf.jasperreports.export.html.id" value="ID"/>
    </reportElement>
    <textElement markup="html"/>
    <textFieldExpression><![CDATA[($F{field1}]]></textFieldExpression>
</textField> 
```

在 iReport 中，您可以通过选择字段来添加这些内容，然后在属性窗口中单击 旁边的省略号按钮`Properties expressions`。 ![在此处输入图像描述](../Images/5405edc57c8bafacef05b690ffa28a78.png)

要在导出的报告中包含指向 css 文件的链接，您需要`JRHtmlExporterParameter.HTML_HEADER`在导出前设置参数的值。注意参数不是HTML意义上的header（head标签的内容），而是导出的HTML报表的header。这意味着它是在包含报告之前首先放置在导出报告中的内容。Jasper Reports 使用的默认值是：

```
<html>
<head>
  <title></title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <style type="text/css">
    a {text-decoration: none}
  </style>
</head>
<body text="#000000" link="#000000" alink="#000000" vlink="#000000">
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr><td width="50%">&nbsp;</td><td align="center"> 
```

因此，您需要修改它以包含指向您的样式表的链接，方法是添加：

```
<link rel="stylesheet" type="text/css" href="<cssfile you want to point to>" /> 
```

到适当的地方，我认为它在 head 标签内，但如果不移动到适当的区域。所以java代码最终看起来像：

```
JRHtmlExporter exporter = new JRHtmlExporter();
exporter.setParameter(JRExporterParameter.JASPER_PRINT, jasperPrint);
exporter.setParameter(JRHtmlExporterParameter.HTML_HEADER, 
    "<html>"+
    "<head>"+
    "  <title></title>"+
    "  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>"+
    "  <link rel=\"stylesheet\" type=\"text/css\" href=\"css/jasper.css\" />"+
    "  <style type="text/css">"+
    "    a {text-decoration: none}"+
    "  </style>"+
    "</head>"+
    "<body text="#000000" link="#000000" alink="#000000" vlink="#000000">"+
    "<table width="100%" cellpadding="0" cellspacing="0" border="0">"+
    "<tr><td width="50%">&nbsp;</td><td align="center">");
exporter.exportReport(); 
```

# mysql - 来自两个不同表的两个字段的Mysql总和

> ID：13951543
> 
> 赞同：0
> 
> 时间：2012-12-19T11:34:56.773
> 
> 标签：mysql

我想对来自不同表 acc 的两个字段求和`labour_master_id`。但是当我得到结果时，它显示出不同的结果。

这是我尝试过的

```
select  labours.labour_master_id, 
    sum(labours.amount_paid), 
    sum(labour_cashcredits.amount_paid) 
FROM labours 
left join labour_cashcredits 
    on labours.labour_master_id=labour_cashcredits.labour_master_id 
group by labours.labour_master_id 
```

它可能映射两次，因此显示错误的结果。

现在总和出现问题。

知道怎么做吗？

我在这个查询中有错误..请帮助

```
select  l.labour_master_id, l.amount_paid as payable, cc.amount_paid as paid
                FROM
                (
                  select labour_master_id, sum(amount_paid) amount_paid
                  from labours 
                  group by labour_master_id
                ) l
                left join
                (
                  select labour_master_id, sum(amount_paid) amount_paid
                  from labour_cashcredits 
                  group by labour_master_id
                ) cc
                                left join
                (
                  select name,id
                  from labour_masters
                ) lm
                    on l.labour_master_id=cc.labour_master_id 
on l.labour_master_id=lm.labour_masters.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:42:34.183

您可以尝试使用子查询在每个表中执行求和：

```
select  l.labour_master_id, 
    l.amount_paid, 
    cc.amount_paid
FROM
(
  select labour_master_id, sum(amount_paid) amount_paid
  from labours 
  group by labour_master_id
) l
left join
(
  select labour_master_id, sum(amount_paid) amount_paid
  from labour_cashcredits 
  group by labour_master_id
) cc
    on l.labour_master_id=cc.labour_master_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:39:29.887

用这个 -

```
 SELECT   labours.labour_master_id, SUM (labours.amount_paid),
     SUM (labour_cashcredits.amount_paid)
  FROM labours,labour_cashcredits
     where labours.labour_master_id = labour_cashcredits.labour_master_id
 GROUP BY labours.labour_master_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:42:50.347

希望这是你想要的

```
select  labours.labour_master_id, 
    sum(ifnull(labours.amount_paid,0))+
    sum(ifnull(labour_cashcredits.amount_paid),0) sum
FROM labours 
left join labour_cashcredits 
    on labours.labour_master_id=labour_cashcredits.labour_master_id 
group by labours.labour_master_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:43:13.013

尝试对第二个 SUM 使用子查询：

```
SELECT  labours.labour_master_id, SUM(labours.amount_paid), 
          ( SELECT SUM(amount_paid) FROM labour_cashcredits 
            WHERE labour_master_id = labours.labour_master_id 
            GROUP BY labour_master_id
           ) AS credit_amount_paid
FROM labours
LEFT JOIN labour_cashcredits ON labours.labour_master_id = labour_cashcredits.labour_master_id 
GROUP BY labours.labour_master_id 
```

# asp.net-mvc - ASP MVC4 和 Azure - 当我发布到 Azure 时，捆绑和缩小不再为我工作

> ID：13951558
> 
> 赞同：3
> 
> 时间：2012-12-19T11:35:42.860
> 
> 标签：asp.net-mvc, asp.net-mvc-3, azure

在我选择的 Windows Azure 发布设置中：

```
Environment: Production
Build Configuration: Release 
```

在我的 Web.Release.config 我有：

```
 <system.web>
    <compilation xdt:Transform="RemoveAttributes(debug)" /> 
```

我以前做过捆绑工作，但我没有做任何我知道的代码更改。但是现在当我发布到云端并查看网页时，似乎根本没有捆绑。所有的javascript和CSS都是一一下载的。

有什么我想念的吗？这曾经有效，现在似乎根本不起作用。

我是否需要明确设置以下内容：

```
<compilation debug="false" targetFramework="4.0"> 
```

或这个：

```
public static void RegisterBundles(BundleCollection bundles) {
   ...
   ...
   BundleTable.EnableOptimizations = true;
} 
```

请注意，当我添加上述行时，我收到一条消息：EnableOptimizations 是一个属性，但用作类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:42:00.773

在 Web 配置中将调试设置为 false

```
<compilation debug="false" targetFramework="4.0"> 
```

它应该按预期工作！

哦，还有一件事：

```
BundleTable.EnableOptimizations = true; 
```

覆盖 Web.Config 设置，因此如果将其设置为 true 并且 Web.Config 设置为调试，它应该也可以工作。

如果您想使用它，请检查您是否确实在正确的位置添加了 BundleTable...，如下所示：

```
 public static void RegisterBundles(BundleCollection bundles)
    {
        BundleTable.EnableOptimizations = true; 
```

**编辑：包括一个工作的 BundleConfig 以供参考**

```
using System.Web;
using System.Web.Optimization;

namespace YourNameSpace
{
    public class BundleConfig
    {
        // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
        public static void RegisterBundles(BundleCollection bundles)
        {

            bundles.Add(new ScriptBundle("~/bundles/wf").Include(
             "~/Scripts/jquery-{version}.js",
             "~/Scripts/jquery-ui-{version}.js",
             "~/Scripts/jquery.unobtrusive*",
             "~/Scripts/jquery.validate*",
             "~/Scripts/jquery.wf.overrides.js",
             "~/Scripts/popup.unobtrusive.js"));
            BundleTable.EnableOptimizations = true; 
        }

    }
 } 
```

# android - 在图表的 x 轴上设置字符串值？

> ID：13951564
> 
> 赞同：3
> 
> 时间：2012-12-19T11:35:49.390
> 
> 标签：android, graph

我有一个在 x 轴和 y 轴上都有浮点值的 lineGraph？我的问题是如何在 x 轴上设置字符串值，例如日期或月份名称。我正在使用 GraphView-3.0.jar 库。我的代码是

```
values_list.add(1.0);
values_list.add(5.0);
values_list.add(9.0);
values_list.add(12.0);
values_list.add(17.0);
values_list.add(1.0);
values_list.add(13.0);
values_list.add(23.0);
graphData = new GraphViewData[(values_list.size())];
double price_copy = 0;
for (int i = 0; i < values_list.size(); i++) {
    price_copy = values_list.get(i);
    graphData[i] = new GraphViewData(i, price_copy);

}
GraphView graphView;

graphView = new LineGraphView(this // context
        , "" );// graphView.addSeries(exampleSeries);// data
graphView.addSeries(new GraphViewSeries("values",
        new GraphViewStyle(Color.rgb(00, 00, 128), 3),
        graphData));

graphView.setShowLegend(true);
// set view port, start=2, size=40
graphView.setViewPort(0, 10);
graphView.setScalable(true);
graphView.setScrollable(true);

LinearLayout layout = (LinearLayout) findViewById(R.id.LNL_CHART);
layout.addView(graphView); 
```

我也不知道 AchartEngine，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:01:37.520

使用 chart 引擎库。你可以在谷歌上搜索。它帮助了我。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:44:28.840

只需使用标签格式化程序。您可以将 x-labels 作为字符串存储在数组中。

例如：

```
final String[] xLabels = new String[] {
  "foo", "bar", "third", "bla", "more"
};
GraphView graphView = new LineGraphView(this, "example") {
   @Override
   protected String formatLabel(double value, boolean isValueX) {
      if (isValueX) {
         return xLabels[(int) value];
      } else {
         // return y label as number
         return super.formatLabel(value, isValueX); // let the y-value be normal-formatted
      }
   }
}; 
```

# web-services - RESTEasy 客户端代理抢先式基本身份验证

> ID：13951574
> 
> 赞同：3
> 
> 时间：2012-12-19T11:36:16.557
> 
> 标签：web-services, http, rest, authentication, resteasy

我`RESTEasy Proxy Framework`用来打电话给我的休息服务。我想对代理框架使用抢先式身份验证。

那是我当前的代码：

```
public void callSomeService() throws Exception {

    RegisterBuiltin.register(ResteasyProviderFactory.getInstance());

    DefaultHttpClient client = new DefaultHttpClient();
    UsernamePasswordCredentials credentials = new UsernamePasswordCredentials(
            USERNAME, PASSWORD);
    AuthScope authscope = new AuthScope(AuthScope.ANY_HOST,
            AuthScope.ANY_PORT, AuthScope.ANY_REALM);
    client.getCredentialsProvider().setCredentials(authscope, credentials);
    ApacheHttpClient4Executor executer = new ApacheHttpClient4Executor(client);
    dummyResource = ProxyFactory.create(DummyResource.class,
            "http://localhost:8888/myapp/rest/", executer);

    // Do some calls here       
} 
```

当我监控应用程序的流量时，Rest-Service 会被调用两次：

1.  首先客户端收到 401 错误（未授权）
2.  在第二个请求中添加了授权标头，一切正常。

**我真正想做的是在第一个请求中已经添加了授权标头！我怎样才能做到这一点？**

我正在使用 RESTEasy 2.3.5！我还阅读了文档（[http://docs.jboss.org/resteasy/docs/2.3.5.Final/userguide/html_single/index.html#transport_layer](http://docs.jboss.org/resteasy/docs/2.3.5.Final/userguide/html_single/index.html#transport_layer)），其中给出了抢占式身份验证的示例，但实际上不起作用，因为这段代码：

```
BasicScheme basicAuth = new BasicScheme();
authCache.put("com.bluemonkeydiamond.sippycups", basicAuth); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T00:48:11.067

没错，文档中的示例无法编译。尝试用 HttpHost 的实例替换字符串“com.bluemonkeydiamond.sippycups”。HttpHost 类有几个构造函数，因此请务必查看 JavaDocs。最简单的构造函数接受一个字符串。例如，

```
BasicScheme basicAuth = new BasicScheme();
authCache.put(new HttpHost("com.bluemonkeydiamond.sippycups"), basicAuth); 
```

# android - 再次启动活动，位图大小超出 VM 预算

> ID：13951575
> 
> 赞同：0
> 
> 时间：2012-12-19T11:36:17.320
> 
> 标签：android

嗨，当我第一次启动 Activity**时它会正常工作，但是当我再次启动它时，我会得到位图大小超出 VM 预算**

我的代码在下面

```
public class TemplateList extends BaseActivity {

ImageUtil imgUtil;
private GridView gridView;
private LinearLayout layoutInflate;
private String Url;
public ArrayList<ArrayList<picitem>> data;
public ImageLoader1 imageLoader;
AlertMessages messages;

private ProgressDialog pd;
Thread thread = null;
private Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        if (pd != null)
            pd.dismiss();
        if (msg.what == 11) {
            try {
                fillList();
            } catch (Exception e) {
                Toast.makeText(TemplateList.this, "An error has occured", Toast.LENGTH_LONG).show();
            }
        } else if (msg.what == 0) {

        } else if (msg.what == 1) {

        } else if (msg.what == 25) {

        } else {
            messages.showNetworkAlert();
        }
    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.framegrid);

    btnHome = (Button) findViewById(R.id.btnHome);
    btnPostGard = (Button) findViewById(R.id.btnPostGard);
    btnDrake = (Button) findViewById(R.id.btnDrake);
    btnFacebook = (Button) findViewById(R.id.btnFacebook);

    gridView = (GridView) findViewById(R.id.gridFrame);

    btnHome.setBackgroundResource(R.drawable.home);
    btnPostGard.setBackgroundResource(R.drawable.postcardup);
    btnDrake.setBackgroundResource(R.drawable.drake);
    btnFacebook.setBackgroundResource(R.drawable.facebbook);

    imgUtil = new ImageUtil();
    messages = new AlertMessages(this);
    layoutInflate = (LinearLayout) findViewById(R.id.layoutinflate);

    imageLoader = new ImageLoader1(getApplicationContext(), Url);

    data = new ArrayList<ArrayList<picitem>>();
    fillData();
}

private void fillList() {
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    for (int i = 0; i < data.size(); i++) {

        View customView = inflater.inflate(R.layout.cutomviewhorizontal, null);
        LinearLayout layoutHorizontalScroll = (LinearLayout) customView.findViewById(R.id.customhoriview);
        TextView txtCategory = (TextView) customView.findViewById(R.id.txtCategoryInflate);
        System.out.println();
        txtCategory.setText(data.get(i).get(0).getCategoryName()+" Templete");
        ArrayList<picitem> items = data.get(i);         
        for (int j = 0; j < items.size(); j++) {
            View customView1 = inflater.inflate(R.layout.imginflate, null);
            final ImageView img = (ImageView) customView1.findViewById(R.id.imgCategoryInflate);
            img.setTag(items.get(j).getThumbImagePath().toString().trim());
            final String imagepathString=items.get(j).getImagePath().toString().trim();
            imageLoader.DisplayImage(items.get(j).getThumbImagePath().toString().trim(), this, img);

            img.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    Intent i = new Intent(TemplateList.this, PictureEditor.class);
                    Bundle b = new Bundle();
                    b.putString("Key", "2");
                    b.putString("Index", imagepathString);
                    i.putExtras(b);
                    v.getContext().startActivity(i);
                    finish();
                }
            });

            layoutHorizontalScroll.addView(customView1);
        }

        layoutInflate.addView(customView);
        }
}

private void fillData() {
    if (Utils.isOnline(TemplateList.this)) {

        pd = ProgressDialog.show(TemplateList.this, "", "Loading...", true, false);
        new Thread(new Runnable() {

            @Override
            public void run() {
                try {
                    Parsing p = new Parsing();
                    data = p.getList();
                    handler.sendEmptyMessage(11);
                } catch (Exception e) {
                    e.printStackTrace();
                    handler.sendEmptyMessage(0);
                }
            }
        }).start();
    } else {
        messages.showNetworkAlert();
    }
}

@Override
protected void onResume() {
    super.onResume();
    startClick();
} 
```

}

我的 Logcat 在下面

```
 12-19 16:30:52.069: E/AndroidRuntime(11442): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
   12-19 16:30:52.069: E/AndroidRuntime(11442):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
   12-19 16:30:52.069: E/AndroidRuntime(11442):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:470)
  12-19 16:30:52.069: E/AndroidRuntime(11442):  at com.redwood.ImageLoader1.decodeFile(ImageLoader1.java:145)
   12-19 16:30:52.069: E/AndroidRuntime(11442):     at com.redwood.ImageLoader1.getBitmap(ImageLoader1.java:103)
  12-19 16:30:52.069: E/AndroidRuntime(11442):  at com.redwood.ImageLoader1.access$0(ImageLoader1.java:96)
  12-19 16:30:52.069: E/AndroidRuntime(11442):  at com.redwood.ImageLoader1$PhotosLoader.run(ImageLoader1.java:200) 
```

# oracle - 如何在 Oracle 上生成版本 4（随机）UUID？

> ID：13951576
> 
> 赞同：22
> 
> 时间：2012-12-19T11:36:17.197
> 
> 标签：oracle, uuid

该博客解释说，`sys_guid()`每个系统的输出都不是随机的：

[http://feuerthoughts.blogspot.de/2006/02/watch-out-for-sequential-oracle-guids.html](http://feuerthoughts.blogspot.de/2006/02/watch-out-for-sequential-oracle-guids.html)

不幸的是，我不得不使用这样的系统。

如何确保获得随机的 UUID？有可能`sys_guid()`吗？如果不是如何可靠地在 Oracle 上获取随机 UUID？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-20T06:33:33.060

这是一个完整的示例，基于@Pablo Santa Cruz 的回答和您发布的代码。

我不确定您为什么收到错误消息。这可能是 SQL Developer 的问题。当您在 SQL*Plus 中运行它并添加一个函数时，一切正常：

```
 create or replace and compile
   java source named "RandomUUID"
   as
   public class RandomUUID
   {
      public static String create()
      {
              return java.util.UUID.randomUUID().toString();
      }
   }
   / 
```

> ```
> Java created. 
> ```

```
 CREATE OR REPLACE FUNCTION RandomUUID
   RETURN VARCHAR2
   AS LANGUAGE JAVA
   NAME 'RandomUUID.create() return java.lang.String';
   / 
```

> ```
> Function created. 
> ```

```
 select randomUUID() from dual; 
```

> ```
> RANDOMUUID()
> --------------------------------------------------------------
> 4d3c8bdd-5379-4aeb-bc56-fcb01eb7cc33 
> ```

* * *

但如果可能的话，我会坚持下去`SYS_GUID`。查看 My Oracle Support 上的 ID 1371805.1 - 此错误据说已在 11.2.0.3 中修复。

**编辑**

哪个更快取决于函数的使用方式。

看起来 Java 版本在 SQL 中使用时稍微快一些。但是，如果您要在 PL/SQL 上下文中使用此函数，则 PL/SQL 函数的速度大约是前者的两倍。（可能是因为它避免了在引擎之间切换的开销。）

这是一个简单的例子：

```
--Create simple table
create table test1(a number);
insert into test1 select level from dual connect by level <= 100000;
commit;

--SQL Context: Java function is slightly faster
--
--PL/SQL: 2.979, 2.979, 2.964 seconds
--Java: 2.48, 2.465, 2.481 seconds
select count(*)
from test1
--where to_char(a) > random_uuid() --PL/SQL
where to_char(a) > RandomUUID() --Java
;

--PL/SQL Context: PL/SQL function is about twice as fast
--
--PL/SQL: 0.234, 0.218, 0.234
--Java: 0.52, 0.515, 0.53
declare
    v_test1 raw(30);
    v_test2 varchar2(36);
begin
    for i in 1 .. 10000 loop
        --v_test1 := random_uuid; --PL/SQL
        v_test2 := RandomUUID; --Java
    end loop;
end;
/ 
```

* * *

版本 4 GUID 不是*完全*随机的。一些字节应该是固定的。我不确定为什么这样做，或者是否重要，但根据[https://www.cryptosys.net/pki/uuid-rfc4122.html](https://www.cryptosys.net/pki/uuid-rfc4122.html)：

> 生成版本 4 UUID 的过程如下：
> 
> ```
> Generate 16 random bytes (=128 bits)
> Adjust certain bits according to RFC 4122 section 4.4 as follows:
>     set the four most significant bits of the 7th byte to 0100'B, so the high nibble is "4"
>     set the two most significant bits of the 9th byte to 10'B, so the high nibble will be one of "8", "9", "A", or "B".
> Encode the adjusted bytes as 32 hexadecimal digits
> Add four hyphen "-" characters to obtain blocks of 8, 4, 4, 4 and 12 hex digits
> Output the resulting 36-character string "XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX" 
> ```

Java 版本中的值似乎符合标准。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-11-06T05:25:15.573

[https://stackoverflow.com/a/10899320/1194307](https://stackoverflow.com/a/10899320/1194307)

以下函数使用 sys_guid() 并将其转换为 uuid 格式：

```
create or replace function random_uuid return VARCHAR2 is
  v_uuid VARCHAR2(40);
begin
  select regexp_replace(rawtohex(sys_guid()), '([A-F0-9]{8})([A-F0-9]{4})([A-F0-9]{4})([A-F0-9]{4})([A-F0-9]{12})', '\1-\2-\3-\4-\5') into v_uuid from dual;
  return v_uuid;
end random_uuid; 
```

它不需要创建 dbms_crypto 包并授予它。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-12-19T16:27:29.907

我现在使用它作为解决方法：

```
创建或替换函数 random_uuid 返回 RAW 是
  v_uuid RAW(16);
开始
  v_uuid := sys.dbms_crypto.randombytes(16);
  返回 (utl_raw.overlay(utl_raw.bit_or(utl_raw.bit_and(utl_raw.substr(v_uuid, 7, 1), '0F'), '40'), v_uuid, 7));
结束random_uuid；

```

该功能需要`dbms_crypto`和`utl_raw`。两者都需要执行授权。

```
grant execute on sys.dbms_crypto to uuid_user; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-04-03T15:42:05.637

对我来说获得基于 Java 的函数的最简单和最短的方法是：

```
create or replace function random_uuid return varchar2 as
language java
name 'java.util.UUID.randomUUID() return String'; 
```

我无法完全理解为什么如果我添加它不会编译`.toString()`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-19T11:38:28.323

您可以编写一个 Java 过程并对其进行编译并在 Oracle 中运行它。在该过程中，您可以使用：

```
UUID uuid = UUID.randomUUID();
return uuid.toString(); 
```

产生期望的价值。

[这是](http://docs.oracle.com/cd/B19306_01/java.102/b14187/chfive.htm)一个关于如何在 Oracle 中编译 java 过程的链接。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-23T21:07:35.447

它可能不是唯一的，但会生成一个“类似 GUID”的随机字符串：

```
 FUNCTION RANDOM_GUID
    RETURN VARCHAR2 IS
    RNG    NUMBER;
    N      BINARY_INTEGER;
    CCS    VARCHAR2 (128);
    XSTR   VARCHAR2 (4000) := NULL;
  BEGIN
    CCS := '0123456789' || 'ABCDEF';
    RNG := 15;

    FOR I IN 1 .. 32 LOOP
      N := TRUNC (RNG * DBMS_RANDOM.VALUE) + 1;
      XSTR := XSTR || SUBSTR (CCS, N, 1);
    END LOOP;

    RETURN XSTR;
  END RANDOM_GUID; 
```

改编自 DBMS_RANDOM.STRING 的来源。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-08-02T17:13:22.723

根据 UUID Version 4 格式应该是 xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx。[@lonecat](https://stackoverflow.com/a/19804738/5585923)回答提供了这种格式，[@ceving](https://stackoverflow.com/a/13956771/5585923)回答也部分提供了版本 4 的要求。缺少的部分是格式 y，y 应该是 8、9、a 或 b 之一。

混合这些答案并修复 y 部分后，代码如下所示：

```
create or replace function fn_uuid return varchar2 is
  /* UUID Version 4 must be formatted as xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx where x is any hexadecimal character (lower case only) and y is one of 8, 9, a, or b.*/

  v_uuid_raw raw(16);
  v_uuid     varchar2(36);
  v_y        varchar2(1);
begin

  v_uuid_raw := sys.dbms_crypto.randombytes(16);
  v_uuid_raw := utl_raw.overlay(utl_raw.bit_or(utl_raw.bit_and(utl_raw.substr(v_uuid_raw, 7, 1), '0F'), '40'), v_uuid_raw, 7);

  v_y := case round(dbms_random.value(1, 4))
            when 1 then
             '8'
            when 2 then
             '9'
            when 3 then
             'a'
            when 4 then
             'b'
           end;

  v_uuid_raw := utl_raw.overlay(utl_raw.bit_or(utl_raw.bit_and(utl_raw.substr(v_uuid_raw, 9, 1), '0F'), v_y || '0'), v_uuid_raw, 9);
  v_uuid     := regexp_replace(lower(v_uuid_raw), '([a-f0-9]{8})([a-f0-9]{4})([a-f0-9]{4})([a-f0-9]{4})([a-f0-9]{12})', '\1-\2-\3-\4-\5');

  return v_uuid;
end fn_uuid; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-08-23T13:12:04.940

ceving 接受的答案与 RFC4122 不一致[：clock_seq_hi_and_reserved](https://www.rfc-editor.org/rfc/rfc4122#section-4.4)的两个最高有效位（位 6 和 7）应分别设置为零和一。这使得 uğur-yeşilyurt 格式 xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx 已经提到的 y 等于 8,9,a 或 b

我的解决方案使 RFC 变得空白：

```
create or replace function random_uuid return raw is
  /*
  Set the four most significant bits (bits 12 through 15) of the
      time_hi_and_version field to the 4-bit version number from
      Section 4.1.3.
  */
  v_time_hi_and_version raw(2) := utl_raw.bit_and(utl_raw.bit_or(dbms_crypto.randombytes(2), '4000'), '4FFF');
  /*
  Set the two most significant bits (bits 6 and 7) of the
      clock_seq_hi_and_reserved to zero and one, respectively.
  */
  v_clock_seq_hi_and_reserved raw(1) := utl_raw.bit_and(utl_raw.bit_or(dbms_crypto.randombytes(1), '80'), 'BF');
  /*
  Set all the other bits to randomly (or pseudo-randomly) chosen
      values.
  */
  v_time raw(6) := dbms_crypto.randombytes(6);
  v_clock_seq_low_and_node raw(7) := dbms_crypto.randombytes(7);
begin
  return v_time || v_time_hi_and_version || v_clock_seq_hi_and_reserved || v_clock_seq_low_and_node;
end random_uuid; 
```

编辑：

虽然第一次实现很容易理解，但效率相当低。下一个解决方案的速度要快 3 到 4 倍。

```
create or replace function random_uuid2 return raw is
  v_uuid raw(16) := dbms_crypto.randombytes(16);
begin
   v_uuid :=  utl_raw.bit_or(v_uuid, '00000000000040008000000000000000');
   v_uuid := utl_raw.bit_and(v_uuid, 'FFFFFFFFFFFF4FFFBFFFFFFFFFFFFFFF');
  return v_uuid;
end; 
```

该测试表明 random_uuid 大约需要 1 毫秒，而 random_uuid2 只需 250 微秒。第一个版本的连接消耗了太多时间；

```
declare
   dummy_uuid raw(16);
begin
   for i in 1 .. 20000 loop
      --dummy_uuid := random_uuid;
      dummy_uuid := random_uuid2;
   end loop;
end; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-08-25T08:01:35.817

我和我的一位朋友编写了一些纯 plsql 函数，它们生成 uuid 版本 4 并格式化任何类型的 GUID。也以两种方式编写的格式化程序。一个连接字符串，一个使用正则表达式格式化 uuid

```
CREATE OR REPLACE FUNCTION RANDOM_UUD_RAW
  RETURN RAW IS V_UUID RAW(16);
  BEGIN V_UUID := SYS.DBMS_CRYPTO.Randombytes(16);
    V_UUID := UTL_RAW.Overlay(UTL_RAW.Bit_or(UTL_RAW.Bit_and(UTL_RAW.Substr(V_UUID, 7, 1), '0F'), '40'), V_UUID, 7, 1);
    V_UUID := UTL_RAW.Overlay(UTL_RAW.Bit_or(UTL_RAW.Bit_and(UTL_RAW.Substr(V_UUID, 9, 1), '3F'), '80'), V_UUID, 9, 1);
    RETURN V_UUID;
  END RANDOM_UUD_RAW; --
CREATE OR REPLACE FUNCTION UUID_FORMATTER_CONCAT(V_UUID RAW)
  RETURN VARCHAR2 IS V_STR VARCHAR2(36);
  BEGIN V_STR := lower(SUBSTR(V_UUID, 1, 8) || '-' || SUBSTR(V_UUID, 9, 4) || '-' || SUBSTR(V_UUID, 13, 4) || '-' || SUBSTR(V_UUID, 17, 4) || '-' || SUBSTR(V_UUID, 21));
    RETURN V_STR;
  END UUID_FORMATTER_CONCAT; --
CREATE OR REPLACE FUNCTION UUID_FORMATTER_REGEX(V_UUID RAW)
  RETURN VARCHAR2 IS V_STR VARCHAR2(36);
  BEGIN V_STR := lower(regexp_replace(V_UUID, '(.{8})(.{4})(.{4})(.{4})(.{12})', '\1-\2-\3-\4-\5'));
    RETURN V_STR;
  END UUID_FORMATTER_REGEX; --
CREATE OR REPLACE FUNCTION RANDOM_UUID_STR
  RETURN VARCHAR2 AS BEGIN RETURN UUID_FORMATTER_CONCAT(RANDOM_UUD_RAW());
  END RANDOM_UUID_STR; --
CREATE OR REPLACE FUNCTION RANDOM_UUID_STR_REGEX
  RETURN VARCHAR2 AS BEGIN RETURN UUID_FORMATTER_REGEX(RANDOM_UUD_RAW());
  END RANDOM_UUID_STR_REGEX; 
```

# google-maps - 使用触摸屏 X 和 Y 单击地标

> ID：13951584
> 
> 赞同：3
> 
> 时间：2012-12-19T11:36:33.967
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-earth-plugin, google-maps-api-2

我正在使用 Google Maps API 并尝试从触摸屏驱动 GE 插件。对于给定的触摸，我会返回 X 和 Y，并且可以执行以下操作：

```
var targetElement = document.elementFromPoint(data.x, scaledY);
if (null != targetElement) {
   var event = $.Event ("click");
   $(targetElement).trigger (event);
} 
```

为屏幕上的按钮引发事件，但这不会单击 GE 插件中的地标。有没有一种简单的方法可以在这些标记上触发点击事件？

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:31:07.703

AFAIK 您不能手动为 Google Earth Api 中的任何对象引发任何事件，您只能为它们添加一个事件侦听器作为命名或匿名方法。

但是，您当然可以使用自定义方法模拟地标的默认点击行为（打开气球、飞到等）。

我以前做过这个，它只要求每个功能在插件中都有一个唯一的 ID（通过 api 或在 kml 中设置）。然后我用它作为基于它的 id 来定位特征的方法。

在您的示例中，假设`targetEvement`还可以设置相应的 ID，那么您可以使用这种技术来模拟这样的“点击”。

```
var targetElement = document.elementFromPoint(data.x, scaledY);
if (null != targetElement) {
   var event = $.Event ("click");
   $(targetElement).trigger (event);

   simulateClick(targetElement);
}

var simulateClick = function (element) {
  // presuming 'ge' references the plugin
  // we create a feature balloon based on the placemark
  var id = element.attr('id');
  var placemark = ge.getElementById(id); // corresponding placemark
  var balloon = ge.createFeatureBalloon();
  balloon.setFeature(placemark);
  ge.setBalloon(balloon);

  // Update the view in Google Earth to the placemark.
  // if no abstract view is defined you could also use the placemarks
  // latitude and longitude to construct a KmlCamera object.
  ge.getView().setAbstractView(placemark.getAbstractView());
} 
```

# json - 为什么 JSONArray 从 JSP 抛出 ClassNotFound 异常？

> ID：13951589
> 
> 赞同：1
> 
> 时间：2012-12-19T11:36:45.933
> 
> 标签：json, jsp, servlets, liferay, portlet

```
Map countryList = new HashMap();
String str = "http://10.10.10.25/TEPortalIntegration/CustomerPortalAppIntegrationService.svc/PaymentSchedule/PEPL/Unit336";
 try {
    URL url = new URL(str);

    URLConnection urlc = url.openConnection();

       BufferedReader bfr = new BufferedReader(new InputStreamReader(
                    urlc.getInputStream()));

    String line, des;
    double title;
    final StringBuilder builder = new StringBuilder(2048);

    while ((line = bfr.readLine()) != null) {
      builder.append(line);
    }

            // convert response to JSON array
    final JSONArray jsa = new JSONArray(builder.toString());

            // extract out data of interest
    for (int i = 0; i < jsa.length(); i++) {
        final JSONObject jo = (JSONObject) jsa.get(i);
        title = jo.getDouble("NetAmount");

        countryList.put(i, title);
    }
    System.out.println(countryList); /* Giving result if i run in Console*/
  } catch (Exception e) {
            // TODO: handle exception
        }
  renderRequest.setAttribute("out-string", countryList); 
```

上面的代码是从 java 客户端使用 JSON Web 服务。我可以从 Java 控制台应用程序访问它。但是当尝试使用 JSP 或 Liferay 时，它不起作用。在 JSP 中它给出 java.lang.NoClassDefFoundError: org/json/JSONArray。请帮我修复它。我是否需要向库中添加更多 jar 文件以使其在 JSP 中工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T12:04:52.080

您需要`JSONArray`按照以下目录结构在 Web 应用程序中添加包含类的 jar 文件：

```
Tomcat_HOME
  ->
   webapps
     ->
       YourWebAppName
         ->
            WEB-INF
               ->lib
                  ->Here goes your jar file 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T19:10:36.647

`json.org.JSONArray`您是否考虑过使用 Liferay 的 JSON API而不是使用？

您可以导入：

```
import com.liferay.portal.kernel.json.JSONArray;
import com.liferay.portal.kernel.json.JSONFactoryUtil;
import com.liferay.portal.kernel.json.JSONObject; 
```

他们会做类似的事情：

```
JSONObject jsonObject = JSONFactoryUtil.createJSONObject(myJSONObjectString);
JSONArray jsonArray = JSONFactoryUtil.createJSONArray(myJSONArrayString); 
```

这样就不需要额外的 JAR 了！

# c# - 从 Rectangle.Intersects() 获取碰撞细节

> ID：13951595
> 
> 赞同：3
> 
> 时间：2012-12-19T11:37:00.550
> 
> 标签：c#, xna, collision-detection, game-physics

我有一个 Breakout 游戏，在某个时候，我检测到球和桨之间的碰撞，如下所示：

```
// Ball class
rectangle.Intersects(paddle.Rectangle); 
```

有什么方法可以让我获得碰撞的确切坐标，或者关于它的任何细节，与当前`XNA API`？

我想过做一些基本的计算，比如比较每个物体在碰撞瞬间的精确坐标。它看起来像这样：

```
// Ball class
if((rectangle.X - paddle.Rectangle.X) < (paddle.Rectangle.Width / 2))
    // Collision happened on the left side
else
    // Collision happened on the right side 
```

但我不确定这是正确的方法。

你们对我可能必须使用的引擎有什么建议吗？甚至是使用这种方法的良好编码实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:53:05.697

我在[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.rectangle.intersect.aspx找到](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.rectangle.intersect.aspx)

有两种相似的静态方法（它们在返回值的方式上有所不同），结果给你的交集也是一个矩形。这应该足以做你想做的事。

# bash - 此 shell 脚本行与 awk 的含义

> ID：13951598
> 
> 赞同：6
> 
> 时间：2012-12-19T11:37:15.203
> 
> 标签：bash, shell, awk

我在 [linux 设备驱动程序] 一书中读到了这行脚本。它有什么作用？

```
major=$(awk "\\$2=  =\"$module\" {print \\$1}" /proc/devices) 
```

如上下文：

```
#!/bin/sh
module="scull"   
device="scull"  
mode="664"

# invoke insmod with all arguments we got  
# and use a pathname, as newer modutils don't look in . by default

/sbin/insmod ./$module.ko $* || exit 1

# remove stale nodes  
rm -f /dev/${device}[0-3]   

major=$(awk "\\$2=  =\"$module\" {print \\$1}" /proc/devices)

mknod /dev/${device}0 c $major 0
.... 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T12:20:07.193

写这个的更好的方法是：

```
major=$(awk -v mod=$module '$2==mod{print $1}' /proc/devices) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:54:06.860

我也读过这个，但那条线对我不起作用。我不得不将其修改为

```
major=$(awk "\$2 == \"$module\" {print \$1}" /proc/devices) 
```

第一部分`\$2 == \"$module\"`是模式。当满足此条件时，即第二列等于“scull”时，`print \$1`执行打印第一列的命令。该值存储在变量major 中。需要转义，`$`因为它们需要按原样传递给 awk。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:45:31.383

`/proc/devices`包含每个模块当前配置的字符设备和块设备。

在您的上下文中扩展一些变量，并修复等式中的语法错误，该命令如下所示：

```
awk '$2=="scull" {print $1}' /proc/devices 
```

这意味着“如果第二列的值为`scull`，则输出第一列”。

该命令在子shell 中运行`$(...)`——并且输出分配给变量`$major`。

目的的解释[在书中](http://www.makelinux.net/ldd3/chp-3-sect-2#chp-3-ITERM-4388)：

> 因此，加载已分配动态编号的模块的脚本可以使用诸如`awk`检索信息之类的工具编写`/proc/devices`，以便在`/dev`.

请注意，在[分布式示例](http://examples.oreilly.com/9780596005900/)中，中的行`scull_load`与 Vivek 的更正匹配。

# sql - Oracle DB上关于...的朋友的朋友的任务

> ID：13951602
> 
> 赞同：-1
> 
> 时间：2012-12-19T11:37:39.867
> 
> 标签：sql, oracle

有两个表：

*   人民表（m_id，m_name）；
*   链接表 (m_id, f_id)，其中两个字段都从第一个表链接到 m_id

我需要一个 Oracle 数据库查询，如果每个人与每个人的链接不超过：

1.  通过 3 个朋友
2.  通过 N 个朋友
3.  否则打印“不可能”

如果可能，请帮助我完成这项任务，或者至少告诉我在哪里寻找答案，我的意思是我之前必须阅读的内容，以及解决这项任务所必需的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:51:06.890

我不确定我的问题是否正确，但我想你需要这样的东西。

```
 select p.m_id,count(l.f_id),'Possible' col
    from people p,
    links l
    where p.m_id = l.m_id
    group by p.m_id
    having count(l.f_id) >= 3
    union
    select p.m_id,count(l.f_id),'Impossible' col
    from people p,
    links l
    where p.m_id = l.m_id
    group by p.m_id
    having count(l.f_id) < 3 
```

# asp.net - ASP.NET 捆绑 - 忽略第二个 JS 文件

> ID：13951604
> 
> 赞同：5
> 
> 时间：2012-12-19T11:37:52.453
> 
> 标签：asp.net, bundling-and-minification

我已经使用 ASP.NET 的捆绑和缩小功能设置了一个简单的测试。我有两个非常简单的 js 文件：

*~/JS/Site.js*

```
(function echo1() {
    alert("this is site.js");
})(); 
```

*~/JS/test.js*

```
(function echo2(value) {
    alert("and this is test.js");
})(); 
```

我创建了一个包，如下所示：

```
bundles.Add(new ScriptBundle("~/bundles/scripts/site-globals").Include(
    "~/JS/Site.js", 
    "~/JS/test.js")); 
```

并使用`@Scripts.Render("~/bundles/scripts/site-globals")`

* * *

当我在调试下（`<compilation debug="true" targetFramework="4.5" />`在 web.config 中）运行该站点时，我得到了预期的结果 - 两个警报框一个接一个地显示。

但是，当我运行 change to release ( `<compilation debug="false" targetFramework="4.5" />`) -**我只看到第一个警告框，并且发送到浏览器的组合 JS 文件完全忽略了 test.js 的内容。**

“合并和缩小”输出如下，错误地只包含来自 Site.js 的代码：

```
(function(){alert("this is site.js")})() 
```

任何关于为什么会发生这种情况的想法将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:51:11.880

我发现是什么导致了这个问题。如果任何 javascript 文件的最后一行有注释，它们将在**没有换行符的情况下组合在一起**，导致下一个文件的第一行被注释掉。

这是另一个关于堆栈溢出的问题的链接，它证明了这一点：[https ://stackoverflow.com/a/14223945/1145963](https://stackoverflow.com/a/14223945/1145963) [1](https://stackoverflow.com/a/14223945/1145963)

就我而言，我使用**Web Essentials Visual Studio 插件**来缩小我的 javascript 文件。它为每个 JS 文件创建一个 .js.map 文件，并且在每个 .min.js 文件的末尾都有这样的注释行，结果证明是导致问题的原因：

```
//@ sourceMappingURL=somefile.min.js.map 
```

由于我不需要映射文件，因此我使用以下方法关闭了此功能`Options -> Web Essentials -> Javascript -> Set Generate source maps (.map) to false`

希望这可以帮助任何发现此问题的人！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:52:27.120

Matt，您的捆绑代码看起来是正确的，您在发布模式下运行时是否在浏览器控制台中收到任何 js 错误？另外作为旁注，您是否知道您可以简单地定义 JS 文件的文件夹路径并且它们都将被包含在内？

# java - 如何获得最接近双倍的十分之一

> ID：13951605
> 
> 赞同：3
> 
> 时间：2012-12-19T11:37:52.333
> 
> 标签：java, math

我想在java中四舍五入双数，使其转换为最接近的十分之一，如下所示..

```
0.1--->0.1
0.3--->1
1----->1
1.5---->10
92---->100
4.0E8-->1.0E9
ETC

```

我该怎么做实际上我的意图是在图表上设置 Y 轴，如果最大值为 0.1，则 num_ 间距将设置为 0.01，如果为 0.3，则转换为 1，然后将 num_ 间距设置为 0.1，依此类推

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T11:49:29.873

试着把它翻译成你的语言，我用 Matlab 写的，但应该很明显

```
10^ceil(log10(x)) 
```

当然，这只有在`x`积极的情况下才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:53:28.280

你可以看看..

```
 double a = 120.1;
    double last_digit_rem = 10 - (a % 10);
    System.out.println(a+last_digit_rem); 
```

它也适用于负数......

# android - 从 android 联系人中检索名字和姓氏会导致 '1' 和 'null'

> ID：13951609
> 
> 赞同：4
> 
> 时间：2012-12-19T11:38:00.907
> 
> 标签：android, contactscontract

我正在使用以下代码从 android 联系人中检索名字和姓氏。DISPLAY_NAME 返回联系人的姓名，而名字和姓氏分别返回 1 和 null。以下是代码。

```
ContentResolver cr = getContentResolver();
Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,null, null, null);
if (cur.getCount() > 0) {
    while (cur.moveToNext()) {
        String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                Cursor pCur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,null,ContactsContract.CommonDataKinds.Phone.CONTACT_ID+ " = ?", new String[] { id }, null);
                while (pCur.moveToNext()) {
                    String phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                    String firstname = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME));
                    String lastname = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME));
                    System.out.println("firstname and lastname" + firstname+ " "+lastname);
                    phoneNo = phoneNo.replaceAll("\\D", "");
                    names.add(name);
                    phnno.add(phoneNo);
                }
                pCur.close();
            }
        }           
    } 
```

当我将 cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI 行更改为 cr.query(ContactsContract.Data.CONTENT_URI) 时，我得到的日志为

![在此处输入图像描述](../Images/7de50e90c298ad4487ec75b753dcf05d.png)

非常感谢您的建议。在此先感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T07:57:48.537

以下代码将帮助您获取名字和姓氏：

```
Uri contactUri = ContentUris.withAppendedId(Contacts.CONTENT_URI, contactId);
Uri dataUri = Uri.withAppendedPath(contactUri, Contacts.Data.CONTENT_DIRECTORY);
Cursor nameCursor = getActivity().getContentResolver().query(
        dataUri,
        null,
        Data.MIMETYPE+"=?",
        new String[]{ StructuredName.CONTENT_ITEM_TYPE },
        null);
           while (nameCursor.moveToNext())
            {

                String      firstName = nameCursor.getString(nameCursor.getColumnIndex(Data.DATA2));
                String  lastName = nameCursor.getString(nameCursor.getColumnIndex(Data.DATA3));

                Toast.makeText(getApplicationContext(), "First name"+firstName, Toast.LENGTH_LONG).show();
                Toast.makeText(getApplicationContext(), "Second name"+lastName, Toast.LENGTH_LONG).show();

                return new String [] {firstName , lastName};
            }

           nameCursor.close(); 
```

# winforms - 在 WinForms 中生成自定义打印二维码

> ID：13951610
> 
> 赞同：2
> 
> 时间：2012-12-19T11:38:03.580
> 
> 标签：winforms, c#-4.0

好吧，我试图用一些字符串打印一个定制的二维码。

我面临的问题是无法将字符串放置在正确的位置，简而言之无法自定义输出。 ![示例图像](../Images/dc257a81f3907b5c3602850494025954.png)

我得到的是混乱的。我可以创建模板并打印吗？

*自定义代码*

```
 CurrentY = 0;
                CurrentX = 0;
                InvSubTitleHeight = (int)(InvSubTitleFont.GetHeight(g));
                // Get Titles Length:
                int lenInvSubTitle1 = (int)g.MeasureString("Bill ID : " + billId, InvSubTitleFont).Width;
                int lenInvSubTitle2 = (int)g.MeasureString("Bill Amount : " + billAmt, InvSubTitleFont).Width;
                int lenInvSubTitle3 = (int)g.MeasureString("Date : " + DateTime.Now.ToString("dd/MM/yyyy"), InvSubTitleFont).Width;

                // Set Titles Left:
                int xInvSubTitle1 = CurrentX + lenInvSubTitle1 / 2;
                int xInvSubTitle2 = CurrentX + lenInvSubTitle2 / 2;
                int xInvSubTitle3 = CurrentX + lenInvSubTitle3 / 2;

                // Draw Invoice Head:
                if (billId != "")
                {
                    CurrentY = CurrentY + InvSubTitleHeight;
                    g.DrawString("Bill ID : " + billId, InvSubTitleFont, BlackBrush, 0, CurrentY);
                }
                if (billAmt != "")
                {
                    CurrentY = CurrentY + InvSubTitleHeight + 5;
                    g.DrawString("Bill Amount : " + billAmt, InvSubTitleFont, BlackBrush, 0, CurrentY);
                }

                CurrentY = CurrentY + InvSubTitleHeight + 5;

                g.DrawString("Date : " + DateTime.Now.ToString("dd/MM/yyyy"), InvSubTitleFont, BlackBrush, 0, CurrentY);

                CurrentY = CurrentY + InvSubTitleHeight + 15;

                var image = QRValidation.CreateImage(img);
                var p = new Point(0, CurrentY);
                g.SmoothingMode = SmoothingMode.HighQuality;
                g.DrawImage(image, p);
                CurrentY += image.Height + 20;

                //Add bottom Text

                g.DrawString("Scan the image above with your", InvSubTitleFont, BlackBrush, 0, CurrentY);
                CurrentY = CurrentY + InvSubTitleHeight + 2;
                g.DrawString("X app and earn reward", InvSubTitleFont, BlackBrush, 0, CurrentY);
                CurrentY = CurrentY + InvSubTitleHeight + 2;
                g.DrawString("points for your last purchase", InvSubTitleFont, BlackBrush, 0, CurrentY);
                CurrentY = CurrentY + InvSubTitleHeight + 25;
                g.DrawString("You can scan this QR Code only", new Font("Times New Roman", 10, FontStyle.Bold), BlackBrush, 0, CurrentY);
                CurrentY = CurrentY + InvSubTitleHeight + 3;
                g.DrawString("once.", new Font("Times New Roman", 10, FontStyle.Bold), BlackBrush, 90, CurrentY);
                // Draw line:
                CurrentY = CurrentY + InvSubTitleHeight + 25;
                var width = (int) g.MeasureString("Powered by X", InvSubTitleFont).Width;
                g.DrawLine(new Pen(Brushes.DarkCyan, 3), CurrentX, CurrentY, width+2, CurrentY);

                CurrentY = CurrentY + InvSubTitleHeight + 5;
                g.DrawString("Powered by X", InvSubTitleFont, BlackBrush, 0, CurrentY); 
```

# python - 如何让浏览器下载 Django CSV 文件响应

> ID：13951611
> 
> 赞同：2
> 
> 时间：2012-12-19T11:38:08.303
> 
> 标签：python, django, csv

我在[这里](https://docs.djangoproject.com/en/dev/howto/outputting-csv/)关注 Django 文档来创建一个 CSV 文件。在我的 urls.py 中，我有`url(r'^reports/csv_list_report/$', 'csv_list_report')`.

我希望用户在单击下载按钮时下载 CSV 文件。所以我在这里使用jQuery：

```
$('#download_button').click(function(){
    $.get('/reports/csv_list_report/');
}); 
```

我可以在萤火虫中看到响应，但浏览器没有下载文件。

这是我的看法：

```
def csv_list_report(request):
    response = HttpResponse(mimetype='text/csv')
    response['Content-Disposition'] = 'attachment; filename="reports.csv"'
    writer = csv.writer(response)
    writer.writerow(['First row', 'Foo', 'Bar', 'Baz'])
    writer.writerow(['Second row', 'A', 'B', 'C', '"Testing"', "Here's a quote"])

return response 
```

所以也许在 GET 之后我需要写一些东西来处理成功的响应？搜索了一下，有很多关于如何创建 CSV 文件的答案，但没有找到任何答案，包括需要做什么来处理响应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T11:45:04.380

您不能让浏览器通过 AJAX 下载文件（这是 jQuery 在您使用时所做的`$.get`）。您必须建立直接同步 HTTP 连接。

而不是`$.get`，试试这个：

```
location.replace('/reports/csv_list_report/'); 
```

**相关：** [通过js或查询强制下载](https://stackoverflow.com/questions/5192917/force-download-through-js-or-query)

# c# - 有用户 ID，需要发布用户名

> ID：13951625
> 
> 赞同：0
> 
> 时间：2012-12-19T11:39:32.177
> 
> 标签：c#, asp.net-mvc-3, view

在我的 Get/Index 视图中，我将发布到 holidayController 中的 Post/Index 方法。所以我通过 UserID 发布，如何使用它来访问用户名？

我试过了

```
 public ViewResult Index(int userID, string userName)
        {
            Person person = new Person();
            //this assigns person.Id to the user Id
            person.Id = userID;
            //i want to assign name of person to the string userName
             userName = person.name;
} 
```

这正在闪烁，person.name 不能为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:45:51.987

是否`string userName`填写？如果是这样，`person.Name = userName`如果它具有公共设置器，则可以使用。如果未填写字符串，您如何存储这些对象？如果您使用数据库，则可以使用您提供的 ID 在数据库中查找 Person 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:49:22.627

你只需要像这样初始化这个人的名字。

```
person.Name = userName 
```

但是我认为您有 Name cannot be null 异常，因为您 的 Person 类的 Name 属性上有一个**Require属性**

并且可能传递给操作的用户名是 NULL

再次阅读问题后**更新：**

您可以简单地将用户名保存到 TempData 或 Session 中，然后在需要此数据的操作中访问。

```
TempData["userName"] = person.Name; 
```

或者

```
Session["userName"] = person.Name; 
```

或者，如果您的视图需要该数据，您可以将其保存到 ViewBag 或 ViewData。

```
ViewBag.UserName = person.Name 
```

或者

```
ViewData["userName"] = person.Name 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T11:44:35.060

您可以在函数定义中 使用`ref`before 关键字：http: [//msdn.microsoft.com/en-gb/library/14akc2c7 (v=vs.80).aspx](http://msdn.microsoft.com/en-gb/library/14akc2c7(v=vs.80).aspx)`string userName`

# javascript - JavaScript、内存泄漏、垃圾收集。想找个简单的出路？

> ID：13951627
> 
> 赞同：3
> 
> 时间：2012-12-19T11:39:43.753
> 
> 标签：javascript, variables, garbage-collection

假设我有一个像这样的“神奇”功能......（将解释神奇）

```
var arr = ['hello','I','am','in','an','array'];  

(function() {
    var z = document.getElementById('z');
    //before edit: a = arr;

    //let's leak memory... for fun!
    z.onclick = function () {
        var something = ...; //something, the uglier the better :P
        //before edit: a.push(something);
        arr.push(something);
        something = null;  
    };

    //now lets say by doing so I 'magically' fix my memory leak
    //before edit: a = z = null;
    z = null; 
}()); 
```

但是，如果我要这样做呢...

```
//instead of a = z = null;
return null; 
```

**通过将 null 重新调整为我的自调用函数，是否会将所有局部变量（a、z）标记为垃圾收集，或者它们是否仍会在浏览器中具有引用并因此仍会占用内存？**

注意：我正在尝试考虑 ie7 等旧版浏览器。另外，我正在“尝试”自学 JavaScript，所以这可能没有太大意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:50:09.777

因为您已将闭包函数绑定到 onclick。在您释放 onclick 处理程序之前，将保留与“var a”关联的内存。

> 1.  即使您没有将 'var a' 设置为 null，与 'var a' 关联的内存也应该是无关紧要的，因为 'var a' 仅引用了全局对象 'arr'。
> 2.  将 'var z' 设置为 null 无效。
> 3.  如果您可以避免在闭包中使用“var a”，那么“var a”将被释放。
> 4.  当点击发生时，函数会出现运行时错误，因为 'var a' 为空。
> 5.  **从函数返回 null 对内存使用没有意义。**

# css - 2 列布局，100% 高度但不是 100% 宽度

> ID：13951632
> 
> 赞同：1
> 
> 时间：2012-12-19T11:39:53.847
> 
> 标签：css, multiple-columns

我的问题是我需要两列相同的高度但不是 100% 的宽度。整个东西居中，有一个全屏BG-Image。

我为著名的 100% 宽度的 2 列问题找到了很多解决方案，但如果宽度是固定的，则不是。

我知道[Matthew James Taylor 解决方案](http://matthewjamestaylor.com/blog/perfect-multi-column-liquid-layouts)，但它仅适用于 100% 宽度布局。

所以这是我从平面设计师那里得到的布局

```
 -------------------------------------------    
                  |sub menu|           content              |
                  |        |                                |
                  |        |                                |
                  |        |                                |
                  |        |                                |
                  |        |                                |
                  |        |                                |
                  |        |                                |
                  |        |                                |
                  ---------|--------------------------------|
                           |          footer                |
                           |--------------------------------| 
```

因此子菜单具有固定宽度，内容和页脚具有最大宽度。

有时子菜单更高，有时内容区域更高。无论如何，它们必须具有相同的高度（与背景）。

我得到的最接近的（绝对位置使工作）：

```
#main-holder {
position: relative;
max-width: 944px;
margin:0 auto;
text-align:left;
padding-top: 140px;
z-index: 10;
height: 100%;
overflow: hidden;
}

#cont-holder{
position: absolute;
display: block;
float: left;
max-width: 676px;
min-height: 100%;
margin-left: 134px;
background-color: #ffffff;
}

#content{
position: relative;
overflow: hidden;
margin-right: 10px;
}

#sub-holder{
position: relative;
background-color: none;
float: left;
width: 134px;
margin-right: -134px;
overflow: hidden;
}

#subs {
background: #000000;
padding:10px;
overflow: hidden;
clear: both;
height: 100%;
} 
```

这里是 HTML

```
<div id="main-holder">
    <div id="sub-holder">
         <div id="subs">
            sub menu
        </div>
    </div>
    <div id="cont-holder">
        <div id="content">
            content
        </div>
    </div>
    <footer></footer>
</div> 
```

当子菜单比内容长时效果很好。但是如果子菜单比它从内容中截断的要短。

很高兴得到任何帮助:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T08:12:36.497

你想要一些类似表格的布局：

```
.container {
    display: table;
    margin: 10px auto;
}
.row {
    display: table-row;
}
.row > div {
    display: table-cell;
} 
```

```
<div class="container">
    <div class="row">
        <div id="subs">subs</div>
        <div id="main">main</div>
    </div>
    <div class="row">
        <div id="spacer"></div>
        <div id="footer">footer</div>
    </div>
</div> 
```

查看演示：http: [//jsfiddle.net/AWJph/](http://jsfiddle.net/AWJph/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:41:02.367

这可能是您查看的一个很好的参考。

[http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm](http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm)

# jmeter - 分布式模式下的 JMeter 摘要报告

> ID：13951636
> 
> 赞同：3
> 
> 时间：2012-12-19T11:39:58.560
> 
> 标签：jmeter, performance-testing

我正在分布式模式下运行 Jmeter 性能测试（2 个从站 + 主站）。在我的测试脚本中，我配置了摘要报告，它应该将一些数据保存到 csv 文件中。此文件位置配置有固定名称“reports/summary.csv”值。

当我从主服务器成功连接到两个从服务器时，从服务器上完成测试，但没有数据返回到主目录“reports/summary.csv”。当我使用一个从属和主控运行设置时，主控正在收集这些数据。当我有 2 个奴隶时，可能会出现什么问题？可能名字冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T02:05:23.063

实际上，这个问题与“jmeter-server”进程无法使用 RMI 连接到 master 有关。这个网络问题导致我的 jmeter-server 在第二个节点上挂了十年，这阻止了主节点 jmeter 进程完成和最终确定上述摘要文件中的结果。

在我让它工作之后，重要的是要知道如果你在分布式环境中的测试计划中使用 SummaryReport 或 AggregateReport jMeter 组件，master 将负责从每个 slave 收集数据。

# c++ - 在 C++ 中处理 boost 线程竞争条件

> ID：13951638
> 
> 赞同：1
> 
> 时间：2012-12-19T11:40:04.817
> 
> 标签：c++, multithreading, boost

我的应用程序中有 6 个线程连续运行。场景是：

一个线程不断获取消息并插入消息队列。其他 4 个线程可以被认为是不断从队列中获取消息并处理它们的工作线程。另一个最终线程填充分析信息。

问题：

现在获取消息线程的睡眠持续时间是 100 毫秒。工作线程为 200 毫秒。当我运行这个应用程序时，消息获取线程正在控制并插入队列，从而增加了堆。工作线程没有机会处理消息并释放它们。最后导致内存不足。

如何管理这种情况，以便为消息获取线程和工作线程提供平等的机会。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:44:07.607

您需要向生产者线程添加背压。通常这将通过使用阻塞的消费者-生产者队列来完成。生产者将项目添加到队列中，消费者从队列中取出项目并处理它们。如果队列为空，消费者将阻塞，直到生产者向队列添加内容。如果队列已满，则生产者会阻塞，直到消费者从队列中获取项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T12:14:03.007

我经常使用的一种流控制系统是在启动时创建大量消息对象，并且不再创建。*对象存储在线程安全的阻塞“池队列”中并循环，由生产者/s从池中弹出，在其他阻塞队列上排队到消费者/s，然后在“消费”时推回池队列.

这限制了内存使用，提供了流量控制（如果池为空，生产者/s 将阻塞它，直到消息从消费者返回），并消除持续的 new/delete/malloc/free。不需要更复杂和更慢的有界队列，所有队列只需大到足以容纳（已知）最大数量的消息。

使用“经典”阻塞队列不需要任何 Sleep() 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:42:49.867

你想使用一个有界队列，当它满时会阻塞试图入队的线程，直到有更多空间可用。

您可以使用[tbb](http://threadingbuildingblocks.org/docs/help/reference/containers_overview/concurrent_bounded_queue_cls.htm)中的 concurrent_bounded_queue ，或者简单地使用初始化为最大队列大小的信号量，并在入队时递减并在出队时递增。boost::thread 本身不提供信号量，但您可以使用锁和条件变量来实现它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T13:23:42.703

你的问题有点模糊，所以我可以给你这些指导而不是代码：

1.  使用 Mutex 保护相互数据。在多线程[消费者生产者](http://en.wikipedia.org/wiki/Producer-consumer_problem)问题中，相互数据（程序中的消息）通常存在竞争条件。一个线程试图在互内存位置上写入，而另一个线程试图从同一位置读取。阅读器读取的消息可能已损坏，因为作者在阅读过程中对其进行了覆盖。您可以使用互斥锁锁定共同内存位置。每个线程都应该获取此锁，以便能够读取或修改相互数据。这样，消费者进程将绝对确定数据没有被修改。但是您应该注意，获取此锁可能会阻止生产者线程，因此您应该尽快释放锁。
2.  使用条件变量通知消费者线程。如果您不使用通知机制，则所有消费者线程都应主动检查将耗尽系统资源的数据生产。消费者线程应该很容易进入睡眠状态，因为他们知道生产者线程会在消息准备好时通知他们。

C++ 11 中的线程库拥有实现消费者生产者应用程序所需的一切。但是，如果您无法升级编译器，您也可以使用 boost 线程库。

# java - Java：Gson 和编码

> ID：13951640
> 
> 赞同：7
> 
> 时间：2012-12-19T11:40:11.933
> 
> 标签：java, json, encoding, gson

我在需要通过 Http Post Body 传递的 Gson 中使用变音符号 (ä,ü,ö)。

不幸的是，如果 Umlauts 没有以某种方式转换，我的 Web 应用程序将返回 null，而它们不是。

内容类型是“应用程序/json”

我如何告诉 Gson 正确编码元音变音（元音变音在值中，而不是键中）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-24T15:08:34.070

我在将变音符号传递给 JSON 中的 Web 服务时遇到了同样的问题。网络服务器无法正确解码这些字符。通过将 HttpClient 配置为 UTF 编码，问题消失了，这是我的工作代码：

```
HttpParams httpParams = new BasicHttpParams();
HttpProtocolParams.setContentCharset(httpParams, HTTP.UTF_8);
HttpProtocolParams.setHttpElementCharset(httpParams, HTTP.UTF_8);
HttpClient client = new DefaultHttpClient(httpParams);
HttpPost request = new HttpPost(serverURL);
StringEntity str = null;
String jsonString = gson.toJson(yourdata);
str = new StringEntity(jsonString, HTTP.UTF_8);
request.setEntity(str);
request.setHeader("Accept", "application/json");
request.setHeader("Content-type", "application/json");
client.execute(request); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:46:04.227

你可以尝试设置

```
charset=UTF-8 
```

强制编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:57:27.763

您可以在传递给 gson 之前将变音符号编码为十进制实体。从 json 你可以解码这些实体。

```
/* encode unicode characters in a given string */
    private static String getEncodedText(String text) {
        StringBuilder sb = new StringBuilder();

        for (int i = 0; i < text.length(); i++) {
            char ch = text.charAt(i);
            int codePoint = text.codePointAt(i);

            if (codePoint >= 0 && codePoint <= 126 
                    && (codePoint != 34 && codePoint != 39
                            && codePoint != 60 && codePoint != 62
                            && codePoint != 94 && codePoint != 96 && codePoint != '_')) {
                sb.append(ch);
                continue;
            }

            sb.append(convertToEntity(String.valueOf(codePoint)));
        }

        return sb.toString();
    }

    public static String convertToEntity(String decimalValue) {
        return "&#" + decimalValue+ ";";
    } 
```

# ruby-on-rails - 在 Rails 上部署 Neo4j

> ID：13951641
> 
> 赞同：3
> 
> 时间：2012-12-19T11:40:11.810
> 
> 标签：ruby-on-rails, neo4j

我一直在使用 gem neo4j 开发我的 rails 应用程序。当我运行服务器时，它会执行一个嵌入式 neo4j 服务器。

在生产中，可以使用这个嵌入式服务器吗？如何将我的 rails 应用程序与独立的 neo4j 服务器连接起来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T15:59:45.617

似乎您可以使用 gem [neography](https://github.com/maxdemarzi/neography)来实现这一点。只需使用您的独立服务器的 ip 进行设置，您就可以开始使用了。

# javascript - Require.js 加载谷歌地图和它的 Richmarker 扩展的问题

> ID：13951644
> 
> 赞同：3
> 
> 时间：2012-12-19T11:40:22.597
> 
> 标签：javascript, google-maps, requirejs, amd

我目前正在尝试使用 require.js 模块定义和依赖处理程序加载 Google 地图库及其扩展[RichMarker 。](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/richmarker/)

我已经声明了 Google Maps 模块和扩展的路径，如下所示：

```
"gmaps": "modules/google_maps",
"richmarker": "vendor/google/maps/richmarker.min" 
```

google_maps 模块看起来像

```
define('gmaps', ['async!http://maps.googleapis.com/maps/api/js?key=mykey&sensor=true'],
function(){
  return window.google.maps;
}); 
```

最后，使用谷歌地图库和高级标记扩展的模块定义如下：

```
define(['common', 'gmaps','jquery','jqueryui',  'bootstrap',"vendor/google/maps/clusterer.min", "tmp/clusteringData", "richmarker"],
function(common, gmaps){ 
```

然而，googlemap 正确地启动了加载，但我在控制台中收到有关 Richmarker 扩展的错误：

```
Uncaught ReferenceError: google is not defined richmarker.min.js:1
Uncaught ReferenceError: RichMarker is not defined google.init.js:267 
```

我在哪里做错了？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-10T11:47:23.740

我有同样的问题，`infobox.js`这完全取决于谷歌地图。

我做了什么：

1.  我已经定义了返回整个 google 对象（而不是单个属性）的模块`google`（而不是 ）`gmaps``maps`

    ```
    define('google', ['async!http://maps.googleapis.com/maps/api/js?key=mykey&sensor=true'],
      function() {
        return window.google;
      }); 
    ```

2.  我已经定义了RequireJS配置文件`infobox`之间的依赖关系：`google`

    ```
    paths: {
      google: 'ref/google',
      infobox: 'ref/infobox'
    },
    shim: {
      infobox: {
        deps: ['google']
      }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:36:21.343

不久前我回答了同样的问题：

[https://stackoverflow.com/a/13955963/1916258](https://stackoverflow.com/a/13955963/1916258)

我认为您需要“填充” google 对象。

```
require.config({
   baseUrl: 'js',
   paths: {
      gmaps: 'path/to/gmaps'
   },
   shim: {
      gmaps: {
         exports: 'google'
      }
   }
}); 
```

# asp-classic - “responsetxt”中的空 http 响应，状态为 200

> ID：13951646
> 
> 赞同：0
> 
> 时间：2012-12-19T11:40:40.503
> 
> 标签：asp-classic, xmlhttprequest

`request.asp`我页面中的以下代码：

```
<%
    url= "http://mydomainname.com/test.asp"
    dim http, pxml, http_response
    set http = createobject("MSXML2.ServerXMLHTTP")
    http.open "GET", url, 0
    http.setrequestheader "content-type", "text/xml; charset=utf-8"
    http.send ""
    response.write http.status
    response.write http.responseText
%> 
```

这是`test.asp`页面中的代码：

```
<%
    response.write "<response>test page<response>"
%> 
```

在输出`http.status`中是 200 但`http.responseText`为什么是空的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T11:04:13.463

test.asp 中应该写的第一行是：

```
<?xml version="1.0" encoding="UTF-8" ?> 
```

request.asp 中的第一行应该是：

```
<%response.ContentType="text/xml"%> 
```

另外，*查看*request.asp 的源代码，这样做你可能会看到 xml 树

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T10:22:20.000

我记得在 microsoft.com 上读过一些内容，如果返回的页面（在您的情况下为 test.asp）没有正确的内容类型，则 responseText 和 responseXML 为空。内容类型应该是“text/xml”或“application/xml”。

您可以通过添加查看发回的标头

```
Response.Write Replace(http.getAllResponseHeaders(), Chr(13) & Chr(10), "<br />") 
```

到你的代码。

# php - 如何 substr() 字符串到一定长度但直到最后一个空格？

> ID：13951652
> 
> 赞同：0
> 
> 时间：2012-12-19T11:41:00.460
> 
> 标签：php, substring

假设我们有一个字符串`patterns also provide us a common vocabulary to describe solutions`。

我们`substr()`这个字符串，所以我们有`patterns also provide us a common vocabulary to desc`。

如何将最后一个字符串剪切到`patterns also provide us a common vocabulary to`？

我的方法是：

```
$text = mb_substr($new['text'], 0, 100);

if(mb_substr($text, -1) != ' ') {

    $text_expl = explode(' ', $text);

    $text = implode(' ', array_splice($text_expl, 0, -1)) . ' ...';

} 
```

有更好的东西吗？

也许正则表达式或一些 PHP 内置函数可以做类似的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:50:04.140

这会找到最后一个空白并获取子字符串

```
$text = mb_substr($new['text'], 0, 100);
$i = mb_strrpos($text, ' ');
if ($i !== false)
    $text = mb_substr($text, 0, $i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:50:51.357

我会用这个：

```
if (preg_match('/^.{1,26}\b/s', $str, $match))
{
    echo $line=$match[0];
} 
```

这会以您想要的方式截断文本。此外，当您指定更多字符时，字符串中实际上有更多字符，它只会简单地将整个字符串返回给您。这也是想要的结果。

以下方法也有效，但当字符串中的字符少于您指定的字符时会出现错误。

```
// Needs more than 260 characters in $str
echo substr($str, 0, strpos($str, ' ', 260)); 
```

因此，既然您无论如何都需要将其包装在一个`if`语句中，以检查 的长度`$str`，我会选择第一个选项。

# typescript - 在 TypeScript 中扩展现有对象的属性，例如 Date

> ID：13951654
> 
> 赞同：9
> 
> 时间：2012-12-19T11:41:02.643
> 
> 标签：typescript

我需要在 Date中声明一个静态**MinValue属性。**我的 javascript 代码看起来像，

```
Date.MinValue = new Date("someDate"); 
```

我发现了类似的问题和答案但是，这只是添加一个函数而不是属性。而且这些功能也没有被定义为静态的。所以，这对我没有帮助。

参考链接，

1.  [在 TypeScript 中扩展数组](https://stackoverflow.com/questions/12802383/extending-array-in-typescript)
2.  [原型如何在打字稿上扩展？](https://stackoverflow.com/questions/12766117/how-does-prototype-extend-on-typescript)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T11:50:51.237

我不认为您可以扩展 Date 以获得额外的静态属性。您可以按如下方式扩展其原型：

```
interface Date {
    min: Date;
}

Date.prototype.min = new Date();

var x = new Date();
alert(x.min.toString()); 
```

要执行您真正想做的事情，您实际上必须对 lib.d.ts 进行更改：

```
declare var Date: {
    new (): Date;
    new (value: number): Date;
    new (value: string): Date;
    new (year: number, month: number, date?: number, hours?: number, minutes?: number, seconds?: number, ms?: number): Date;
    (): string;
    prototype: Date;
    parse(s: string): number;
    UTC(year: number, month: number, date?: number, hours?: number, minutes?: number, seconds?: number, ms?: number): number;
    now(): number;
    min: Date;
} 
```

并在纯 JS 中执行扩展，除了你的 TypeScript 生成的 JavaScript 之外还要加载。

```
 Date.min = new Date(); 
```

# android - 如何在 Titan android/iOS 中使用 web 服务在服务器上上传图像？

> ID：13951656
> 
> 赞同：2
> 
> 时间：2012-12-19T11:41:14.337
> 
> 标签：android, image, web-services, titanium, base64

我想将图像转换为 base64 格式，然后将其上传到服务器上，但 base64 字符串太大，以至于它在网络上给我错误，该参数未收到。任何想法使用下面的 web 服务将完整的字符串发送到服务器？这是我尝试过的以下服务。

```
var xhrAddclient = Titanium.Network.createHTTPClient();
    xhrAddclient.open('POST', webservice_url);
    xhrAddclient.send({
        method : "addclient",
        image : base64string,
    });

    xhrAddclient.setTimeout(10000);

    xhrAddclient.onerror = function() {
        showAlertBox('Service timed out. Please try again.');

    };

    xhrAddclient.onload = function() {
        showAlertBox("Client added successfully.");

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T14:32:42.457

在这里查看：[http ://www.smokycogs.com/blog/titanium-tutorial-how-to-upload-a-file-to-a-server/](http://www.smokycogs.com/blog/titanium-tutorial-how-to-upload-a-file-to-a-server/)

在这里：[https ://wiki.appcelerator.org/display/guides/File+Uploads+and+Downloads#FileUploadsandDownloads-Fileupload](https://wiki.appcelerator.org/display/guides/File+Uploads+and+Downloads#FileUploadsandDownloads-Fileupload)

要不就：

```
xhr.setRequestHeader("Content-type", "multipart/form-data");
xhr.send(file); 
```

# c# - 如何在字符串中跳过`\r \n`

> ID：13951658
> 
> 赞同：5
> 
> 时间：2012-12-19T11:41:17.353
> 
> 标签：c#

我正在开发一个简单的转换器，它将文本转换为另一种语言，

假设我有两个文本框，在第一个框中输入单词`Index`并按下转换按钮。我将用这个替代乌尔都语
的文本替换您的文本，但是如果您输入单词并给出一些空格或给出一些返回，我会遇到问题，然后我会像这样在 c# 中获取该文本框的文本，现在我该如何摆脱这个我总是想变得简单。 感谢您的回答，如果您有任何问题，请随时发表评论`فہرست``Index``index``Index \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n``Index`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T11:42:35.557

`Trim`如果新行仅位于开头的末尾，请尝试使用该方法：

```
input = input.Trim(); 
```

[`Replace`](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)如果要在字符串中的任何位置删除新行，可以使用,：

```
// Replace line break with spaces
input = input.Replace("\r\n", " ");
// (Optionally) Combine consecutive spaces to one space (probalby not most efficient but should work)
while (input.Contains("  ")) { input = input.Replace("  ", " "); } 
```

如果你想完全阻止换行，大多数`TextBox`控件都有一个类似`MultiLine`或类似的属性，当设置时，它会阻止输入多行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T11:43:19.943

这应该足以删除[Char.IsWhiteSpace](http://msdn.microsoft.com/en-us/library/system.char.iswhitespace.aspx)定义的空格（空格，换行符等）

```
string wordToTranslate = textBox1.Text.Trim(); 
```

但是，如果您的文本框包含多个单词，那么您应该使用不同的方法

```
string[] words = textBox1.Text.Split((char[]) null, StringSplitOptions.RemoveEmptyEntries);
foreach(string wordToTranslate in words)
    ExecTranslation(wordToTranslate); 
```

使用[Split](http://msdn.microsoft.com/en-us/library/ms131448.aspx) with char[] null 作为分隔符允许将每个空格标识为有效的单词分隔符

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T11:44:16.693

`input.Replace(Environment.NewLine, string.Empty).Replace(" ", string.Empty);`

用户`Replace`从字符串的“内部”中删除字符。`Trim`仅删除字符串开头和结尾的字符。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-19T11:45:31.897

将要忽略的所有字符添加到字符串中：

```
var cleanChars = text.Where(c => !"\n\r".Contains(c));
string cleanText = new string(cleanChars.ToArray()); 
```

之所以有效，是因为 string 实现了`IEnumerable<char>`.

# javascript - java脚本在刷新页面之前不起作用

> ID：13951659
> 
> 赞同：1
> 
> 时间：2012-12-19T11:41:23.107
> 
> 标签：javascript

我的要求是我的文本框不应该接受脚本标签（即 < 和 >）。当我第一次打开页面时，我的文本框不允许脚本标签（即 < 和 >）。

一段时间后，它只允许字母数字字符。当我刷新页面时，它工作正常。任何人都可以帮助这个。我怎样才能得到这个解决方案？或者有什么简单的方法。

**我的代码：**

`<input name="headerTextBoxs" id="headerTextBox" size="55" type="text" onKeypress="return keyRestricted(event)", onKeydown="return keyRestricted(event)" value="" />`

```
<script type="text/javascript">
    function keyRestricted(evt) {
        var theEvent = evt || window.event;
        var key = theEvent.keyCode || theEvent.which;

        var keychar = String.fromCharCode(key);
        //alert(keychar);
        var keycheck = /[a-zA-Z0-9]/;

        if ( (key == 60 || key == 62)) // not allowing script tags
        {

            if (!keycheck.test(keychar)) {
                theEvent.returnValue =false ; //for IE
                if (theEvent.preventDefault) theEvent.preventDefault(); //Firefox

            }
        }
    }

</script> 
```

**另一种方式：** 我的要求是相同的，不允许脚本标签（即<和>）。这里的问题是它在 Mozilla Firefox 中运行良好。但在 google cromo 和 IE 浏览器中，我的文本框不允许反向文本（即左箭头 (<-)）。只是我这样写。
**我的代码：**

`<input name="headerTextBoxs" id="headerTextBox" size="55" type="text" onkeyup = "this.value=this.value.replace(/[<>]/g,'');" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:03:59.673

这对我来说没问题。

```
<!DOCTYPE html>
<html>
    <head>
        <script>
            function keyRestricted(e) {
                e= e|| window.event;
                var key= e.keyCode || e.which;

                var keychar= String.fromCharCode(key);
                var keycheck = /[a-zA-Z0-9]/;

                if ((key == 60 || key == 62)){
                    if (!keycheck.test(keychar)) {
                        e.returnValue =false ;
                        if (e.preventDefault) e.preventDefault();
                    }
                }
            }
        </script>
    </head>
    <body>
        <input size="55" type="text" onKeypress="keyRestricted(event);" value="" />
    </body>
<html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:59:46.843

我会使用更改事件来执行此操作。

```
<input type="text" name="name" onchange="validate(this);"/>

function validate(input_element) {
    if( /(<|>)/.test( input_element.value ) ) {
        alert( "< and > are not allowed characters" );
    }
} 
```

这对性能的影响较小，如果需要，您也可以稍后使用验证功能。

演示[**在这里**](http://jsbin.com/unabad/1/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T12:01:41.047

`onkeyup`仅当您希望它或多或少响应时才尝试事件。

`onchage`当您将注意力集中在`<input>`.

# java - 来自外部软件的 Thunderbird 脚本

> ID：13951664
> 
> 赞同：0
> 
> 时间：2012-12-19T11:41:41.203
> 
> 标签：java, c, thunderbird

我正在尝试制作一个可以在 Thunderbird 中自动打开搜索框的软件。

例如，我有一个外部软件中的客户电子邮件地址列表。该软件应该能够调用 Thunderbird 并搜索该列表中每个客户的电子邮件。

基本上，我不知道从哪里开始，如果可能的话。我知道我可以为 Thunderbird 构建一个插件，但我需要从外部软件调用搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:03:24.187

Thunderbird 不支持脚本。

[http://kb.mozillazine.org/Calling_Thunderbird_from_other_programs](http://kb.mozillazine.org/Calling_Thunderbird_from_other_programs)

我认为您的选择是：

1.  创建一个扩展，它也许可以响应来自外部程序的调用（也许监听端口）
2.  直接读取雷鸟消息数据库。如果雷鸟实际上是打开的，我不确定这会有多稳定，但这可能是一种选择。
3.  如果你使用 IMAP 协议，你可以只搜索邮件服务器而不是去雷鸟。

# jquery - 使用 jQuery 向 ul 添加一些 li 元素

> ID：13951665
> 
> 赞同：0
> 
> 时间：2012-12-19T11:41:42.550
> 
> 标签：jquery, html, html-lists

我必须将一些 li 元素添加到 ul 列表中。每个 li 元素包含：

*   一个锚

*   一个 img 标签

问题是图像不显示。

JSFiddle：http: [//jsfiddle.net/michelejs/hxA9r/](http://jsfiddle.net/michelejs/hxA9r/)

```
function echoImages(json) {
    alert(json);
    var obj = $.parseJSON(json);
    var html = "";
    $.each(obj, function() {
        html += '<li id ="menu_travel-store" class="space ">' + '<a href="' + this['redirectURL'] + '">' + '<img src="' + this['imageURL'] + '" />' + this['description'] + '</a>' + '</li>';
    });
    alert(html);
    $("#cityOffers").append(html);
}​ 
```

我已经看到 Chrome 添加了这个 css 属性：

```
display: none !important;
visibility: hidden !important;
opacity: 0 !important;
background-position: 0px 0px; 
```

但是如果我使用开发人员工具删除它，图像仍然不会显示。

问题是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:58:55.903

解决了，问题是 AdBlock Chrome 扩展阻止图像加载.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:44:01.123

你使用了错误的 jQuery 函数使用

`$("#cityOffers").html(html);`

代替

`$("#cityOffers").append(html);`

html() 期望一个包含 HTML 代码的字符串，而 append() 期望一个 dom 对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:49:49.703

我在firefox中测试过，它可以工作。

我已经更好地构建了您的代码。

[http://jsfiddle.net/hxA9r/4/](http://jsfiddle.net/hxA9r/4/)

```
function echoImages(json) {
    alert(json);
    var obj = $.parseJSON(json);
    var html = "";
    $.each(obj, function () {
        html += '<li id ="menu_travel-store" class="space ">' + '<a href="' + this.redirectURL + '">' + '<img src="' + this.imageURL + '" />' + this.description + '</a>' + '</li>';
    });
    alert(html);
    $("#cityOffers").append(html);
}
$(document).ready(function () {
    data = '[{"id":"1","redirectURL":"http:\/\/www.judopassion.com\/affiliate\/images\/1.png","imageURL":"http:\/\/www.judopassion.com\/affiliate\/images\/1.png","title":"1","description":"1"},{"id":"3","redirectURL":"http:\/\/www.judopassion.com\/affiliate\/images\/3.png","imageURL":"http:\/\/www.judopassion.com\/affiliate\/images\/3.png","title":"3","description":"3"},{"id":"6","redirectURL":"http:\/\/www.judopassion.com\/affiliate\/images\/9.png","imageURL":"http:\/\/www.judopassion.com\/affiliate\/images\/9.png","title":"9","description":"9"},{"id":"2","redirectURL":"http:\/\/www.judopassion.com\/affiliate\/images\/2.png","imageURL":"http:\/\/www.judopassion.com\/affiliate\/images\/2.png","title":"2","description":"2"},{"id":"5","redirectURL":"http:\/\/www.judopassion.com\/affiliate\/images\/5.png","imageURL":"http:\/\/www.judopassion.com\/affiliate\/images\/5.png","title":"5","description":"5"},{"id":"4","redirectURL":"http:\/\/www.judopassion.com\/affiliate\/images\/4.png","imageURL":"http:\/\/www.judopassion.com\/affiliate\/images\/4.png","title":"4","description":"4"}]';
    echoImages(data);

});​ 
```

**编辑：**这听起来像是从主机访问图像的问题。我已经在多个新旧浏览器上进行了测试，并且运行良好。

# content-management-system - 如何限制一个用户或一组用户访问fatwire中的资产

> ID：13951667
> 
> 赞同：0
> 
> 时间：2012-12-19T11:41:50.347
> 
> 标签：content-management-system, fatwire

如何限制一个用户或一组用户访问 fatwire 中的资产
我想使用 fatwire 获得标准的 mvc 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:23:29.473

您可以向 flexasset 定义添加一个属性，以建立哪些用户（组更好）可以访问该资产。在您的模板中，在渲染之前，检查用户（组）是否具有访问权限，如果是，则渲染资产。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T00:02:28.520

Do you mean how to restrict users/groups from accessing assets in Fatwire authoring screen? We can achieve this through multiple ways such as site as the secure scope and assign users/groups to the sites. Users can only see assets available in the logged in site.

If you need users to collaborate within the same site, you can create a one-step workflow and add all sites to the workflow and assign certain users/groups to the workflow.

# objective-c - 禁用重新排列标签 iphone

> ID：13951672
> 
> 赞同：3
> 
> 时间：2012-12-19T11:42:16.803
> 
> 标签：objective-c, uitabbar, uitabbaritem

我有一个`UITabBarItem`六`UITabBarController`。

我想禁用`NavigationBar`自动生成标签号 5 的选项卡，它允许您根据需要重新排序选项卡。

有没有办法禁用这个功能？

额外的

我使用 customtabbar 但在 tab5 中出现了这个导航栏。tab6 对我来说必须是“隐藏的”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:21:51.373

有可定制的ViewControllers属性

来自文档：“更改 viewControllers 属性的值（直接或使用 setViewControllers:animated: 方法）也会更改此属性的值。当第一次分配给标签栏控制器时，默认情况下所有视图控制器都是可自定义的。”

所以调用`myTabBarController.customizableViewControllers = nil`删除自定义

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:59:10.237

看起来您正在使用`UITabBarController`.

您最多只能有 5 个标签栏项目，而无需调出附加项目来自定义栏项目。如果您不希望额外的选项卡允许自定义，那么您的第 6 个项目无论如何都将无法访问，因此只需删除最后一个选项卡使其成为 5 个项目。

来自[UITabBarController 文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006931-CH3-SW8)：

> 选项卡栏用于显示自定义项目的空间有限。如果将六个或更多自定义视图控制器添加到选项卡栏控制器，则选项卡栏控制器仅显示前四个项目以及选项卡栏上的标准更多项目。点击更多项目会弹出一个标准界面，用于选择剩余项目。

如果您不喜欢这个限制，请直接使用 UITabBar。涉及更多工作，因为您不会使用 UITabBarController 来为您管理选项卡的视图控制器。

# lua - 从最短到最长对单词数组/表进行排序

> ID：13951674
> 
> 赞同：2
> 
> 时间：2012-12-19T11:42:18.663
> 
> 标签：lua, coronasdk

Corona / Lua如何从最短到最长对字符串表进行排序

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T11:58:19.670

假设您的表是索引表而不是键控表

```
test = {'123','1234','1245','1','12'}
table.sort(test, function(a,b) return #a<#b end)
for i,v in ipairs(test) do
    print (i,v)
end 
```

这里重要的一行是

```
table.sort(test, function(a,b) return #a<#b end) 
```

单词将仅按长度排序，匹配长度内的顺序将是任意的。如果您想按其他标准排序，请扩展排序功能，例如`function(a,b) return #a<#b end`

# eclipse - 转到上一行访问的快捷方式？

> ID：13951676
> 
> 赞同：2
> 
> 时间：2012-12-19T11:42:25.400
> 
> 标签：eclipse, eclipse-plugin

`Go to Previous line visited`编辑器中是否有任何快捷方式。

谢谢 ，

坎南

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T11:52:16.397

我认为您正在寻找的是`Alt`+`Left`和`Alt`+`Right`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:45:08.853

Ctrl+Q 转到您的上次编辑位置（至少在 OS X 中）。

请参阅“导航”菜单。

# php - 使用具有特定模式的 preg_match_all

> ID：13951678
> 
> 赞同：1
> 
> 时间：2012-12-19T11:42:32.953
> 
> 标签：php, design-patterns, preg-match-all

我有一个很大的 HTML 文本要使用 PHP 脚本进行解析。我需要找到（并在屏幕上打印）以下文本：

```
<span style="color:COLOR">#</span> 
```

和

```
<span class="close">#</span> 
```

其中 COLOR 可以是“红色”、“绿色”或“蓝色”。

我写了三个循环，每个循环用于任何颜色，所以我现在的代码如下：

```
preg_match_all("'red\">#</span>(.*?)<span class=\"close\">#</span>'si", $text, $match);
foreach($match[1] as $val) {
     echo $val;
}
preg_match_all("'green\">#</span>(.*?)<span class=\"close\">#</span>'si", $text, $match);
foreach($match[1] as $val) {
     echo $val;
}
preg_match_all("'blue\">#</span>(.*?)<span class=\"close\">#</span>'si", $text, $match);
foreach($match[1] as $val) {
     echo $val;
} 
```

一切正常，但我有两个问题：

1.  通过这种方式，我找到了红色标签之间的所有文本部分，然后找到了绿色标签之间的所有文本部分，最后找到了蓝色标签之间的所有文本部分（但我想按照它们在文本中出现的确切顺序找到它们）。
2.  所有那些重复的代码……这让我心痛。

所以我需要找到一种方法来使用 OR 条件搜索文本的所有部分。

我当时写了这段代码：

```
$patterns = array(
    'green\">#<\/span>(.*?)<span class=\"close\">#<\/span>',
    'red\">#<\/span>(.*?)<span class=\"close\">#<\/span>',
    'blue\">#<\/span>(.*?)<span class=\"close\">#<\/span>'
);

$rule= '/(' .implode('|', $patterns) .')/i'; 

$text = 'Lorem ipsum dolor sit amet, <span style="color:red">#</span>consectetur adipiscing elit<span class="close">#</span>. 
Vestibulum ante lectus, <span style="color:green">#</span>pellentesque ac accumsan sit amet, posuere tempor<span class="close">#</span> ligula.';

preg_match_all($rule, $text, $match);
foreach($match[1] as $val) {
    echo "<pre>".$val."</pre><br />";
} 
```

我期望在屏幕上打印的内容：

```
consectetur adipiscing elit
pellentesque ac accumsan sit amet, posuere tempor 
```

我实际得到的：

```
red">#consectetur adipiscing elit#
green">#pellentesque ac accumsan sit amet, posuere tempor# 
```

所以，我显然在模式上做错了，但我找不到解决这个问题的方法。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:56:35.830

您可以为此使用[交替](http://php.net/manual/en/regexp.reference.alternation.php)

```
(?:red|green|blue)\">#</span>(.*?)<span class=\"close\">#</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:58:22.313

它必须是“红色”、“绿色”、“蓝色”吗？不能是“颜色：任何东西”吗？

```
 preg_match_all("'color:.+?\">#</span>(.*?)<span class=\"close\">#</span>'si", $text, $match); 
```

# ruby-on-rails - Rails has_many 有两个表（计数）

> ID：13951684
> 
> 赞同：0
> 
> 时间：2012-12-19T11:42:38.333
> 
> 标签：ruby-on-rails

我有一个关于连接的问题（并且 has_many 属于）......

我在数据库中有 3 个表。

**广告商**

*   ID
*   姓名

**类别**

与广告商相关联 (gem awesome_nested_set)

**评论**

*   ID
*   广告客户 ID
*   评论
*   推荐

我看不到广告商有多少评论，推荐了多少评论。

**广告商数据**

```
1 | abc 
```

**评论数据**

```
id | a_id | text    | rec
---+------+---------+-----
 1 | 1    | blabla  | 1
 2 | 1    | blablab | 1
 3 | 1    | blablac | 1
 4 | 1    | blablad | 0 
```

在这种情况下，有四个评论，其中三个是推荐的。

在我看来，我需要检索以下内容

商品分类**abapai**

广告商名称：**abc**

推荐了 3条**评论**

一共**4个**

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:47:55.707

在评论模型中，您可以使用`scope`方法来过滤推荐评论。像这样：

```
scope :recommended_comments, where("recommended = '1'") 
```

然后在 Advertiser 视图中，您可以像这样使用它（我猜测了一些属性名称）：

```
Listing Category <%= @advertiser.category.name %>    
Advertiser name: <%= @advertiser.name %>    
There are <%= @advertiser.comments.recommended_comments.count %> comments recommended    
a total of <%= @advertiser.comments.count %> 
```

# spring - 使用休眠插入字节数组代替blob

> ID：13951686
> 
> 赞同：1
> 
> 时间：2012-12-19T11:42:46.763
> 
> 标签：spring, hibernate, spring-mvc, blob

我的控制器中的代码

```
FileInsertion fileInsertion = new FileInsertion();
FileUpload fileUpload = new FileUpload();
fileUpload.setFilename((InputStream) new ByteArrayInputStream(byteArray));
    //byteArray is the file converted into a byte[]
fileInsertion.insertFile(fileUpload);

    //the following happens in a separate method
trns = session.beginTransaction();
session.save(fileUpload);
session.getTransaction().commit(); 
```

休眠映射文件

```
<hibernate-mapping>
    <class name="com.sort.process.FileUpload" table="fileupload">
        <meta attribute="class-description">
            This class contains the file upload detail. 
        </meta>
        <id name="Id" type="int" column="Id">
            <generator class="increment" />
        </id>

        <property name="filename">
            <column name="filename" />
        </property>
    </class>
</hibernate-mapping> 
```

我的目标是在 BLOB 对象的位置将文件插入到数据库表中。但是我得到了这个

```
Initial SessionFactory creation failed.org.hibernate.MappingException: Could not determine type for: java.io.InputStream, at table: fileupload, for columns: [org.hibernate.mapping.Column(filename)] 
```

我尝试了上述使用`ByteArrayInputStream`而不是`InputStream`，但徒劳无功。谁能让我知道我在代码中的错误是什么？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:42:35.417

直接在模型中使用 byte[] 应该可以。即，`fileUpload.setFilename(byteArray)`。

请记住，最好使用有意义的名称。有人可能希望`fileUpload.getFileName()`返回文件名，而不是原始数据。

# tridion - 尝试从 Tridion 2011 SP1 下载多媒体图像时不支持获取文件路径

> ID：13951691
> 
> 赞同：4
> 
> 时间：2012-12-19T11:42:55.683
> 
> 标签：tridion, tridion-2011

我收到“不支持给定路径的格式”。当我只是想从我的 SDL Tridion 2011 SP1 下载多媒体图像时，下面是我得到的路径，不知道“N:”等是如何出现的。

> D:\delete\Images\N:\dmc.FlipMedia.Clients.TestCMS\2009_WorkInProgress\creatives\05_May\Kids under 16 go free to UK\assets_graphics\jpg\Kids_go_free_385x306.jpg

**下面是代码：**

```
 public static void GetBinaryFromMultimediaComponent(string tcm, CoreServiceClient client, StreamDownloadServiceClient streamDownloadClient)
        {           

            ComponentData multimediaComponent = client.ReadItem(tcm) as ComponentData;

            // Generate you own file name, and file location
            string file = "D:\\delete\\Images\\" + multimediaComponent.BinaryContent.Filename;//Here I am getting above path

            // Write out the existing file from Tridion
            FileStream fs = File.Create(file);//Here getting the exception
            byte[] binaryContent = null;

            if (multimediaComponent.BinaryContent.FileSize != -1)
            {
                Stream tempStream = streamDownloadClient.DownloadBinaryContent(tcm);
                var memoryStream = new MemoryStream();
                tempStream.CopyTo(memoryStream);
                binaryContent = memoryStream.ToArray();
            }

            fs.Write(binaryContent, 0, binaryContent.Length);
            fs.Close();
        } 
```

请推荐！！

**编辑：**

我使用 Nuno Suggestions 获得了文件名，但是继续前进

```
 Stream tempStream = streamDownloadClient.DownloadBinaryContent(tcm); 
```

我遇到错误，对此有什么建议吗？

```
The content type multipart/related; type="application/xop+xml";start="";boundary="uuid:5f66d04b-76d3-4d3a-b8e3-b7b91e00ed32+id=2";start-info="text/xml" of the response message does not match the content type of the binding (text/xml; charset=utf-8). If using a custom encoder, be sure that the IsContentTypeSupported method is implemented properly. The first 595 bytes of the response were: ' --uuid:5f66d04b-76d3-4d3a-b8e3-b7b91e00ed32+id=2 Content-ID: Content-Transfer-Encoding: 8bit Content-Type: application/xop+xml;charset=utf-8;type="text/xml" '. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T12:02:05.130

正如您现在可能已经想到的那样，`string file = "D:\\delete\\Images\\" + multimediaComponent.BinaryContent.Filename;`将附加完整的文件名（包括路径）并因此生成错误的路径。

尝试使用类似的东西`string file = "D:\\delete\\Images\\" + Path.GetFilename(multimediaComponent.BinaryContent.Filename);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:43:11.817

这样做： -

```
Stream tempStream = streamDownloadClient.DownloadBinaryContent(tcmId);
MemoryStream memoryStream = new MemoryStream();
int b;
do
{
    b = tempStream.ReadByte();
    memoryStream.WriteByte((byte)b);
} while (b != -1);

binaryContent = memoryStream.ToArray();​ 
```

# windows - 任意 .cmd 脚本作为 Windows 7 / XP 中的屏幕保护程序

> ID：13951693
> 
> 赞同：0
> 
> 时间：2012-12-19T11:43:11.513
> 
> 标签：windows, opengl, jvm, cmd

我有一个用 Scala 编写的全屏 OpenGL 应用程序。它应该作为 .cmd 文件启动，该文件设置类路径（一些 .class 文件，其中一些是第三方库，并且可以选择在 .jars 中）并使用正确的参数运行 JVM。我想知道，有没有一种简单的方法可以将此 .cmd 文件用作 Windows 屏幕保护程序？（没有通常的屏幕保护程序预览和设置对话框，那里不需要它们）我想我需要在某处注册应用程序？它必须是什么文件类型有任何限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:28:57.243

您可以按照@Kevin 的建议安装屏幕保护程序，然后右键单击该文件并安装（前提是这是一个`.scr`文件）。或者您可以将文件直接复制到`C:\Windows`或有时复制到`C:\Windows\system32`.

但是，除非该文件是有效的屏幕保护程序，否则当您选择所需的屏幕保护程序时，它不会显示在屏幕保护程序列表中，所以我认为您不走运。

除非您创建了自己的屏幕保护程序，否则您可能能够从它所具有的事件之一启动该文件。

# java - AOP 是否仅限于会话和访问验证？

> ID：13951695
> 
> 赞同：0
> 
> 时间：2012-12-19T11:43:17.037
> 
> 标签：java, aop

我是 AOP 的新手，在某些时候它似乎可以用作某些操作的拦截器。

所以我想知道是否可以使用 AOP 检查会话（用户是否登录）和身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:53:42.333

是的，访问控制是可以使用 AOP 实现的一项功能。事实上，实现分散在代码中的特性是 AOP 的良好候选者，身份验证和授权就是典型的例子。

Laddad 的[AspectJ in action](http://ramnivas.com/ajia.html)是一个极好的资源，其中包括有关如何使用 AspectJ 实现访问控制的一章。

一般来说，人们可能会争辩说，非功能性需求通常是面向方面编程的良好候选者。

# c# - 在 C# 中使用 EHLAPI32 和 RUMBA 作为仿真供应商

> ID：13951698
> 
> 赞同：2
> 
> 时间：2012-12-19T11:43:32.597
> 
> 标签：c#, asp.net, .net, dll, mainframe

谁能给我介绍在 C# 中使用 EHLAPI32.dll 并以 RUMBA 作为仿真供应商。我必须从大型机中获取数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T15:52:12.867

以下指向 IBM EHLLAPI 文档的链接解释了如何向大型机或中型计算机发送和接收文件。

[IBM 标准 EHLLAPI、IBM 增强型 EHLLAPI 和 WinHLLAPI 编程简介](http://publib.boulder.ibm.com/infocenter/pcomhelp/v5r9/index.jsp?topic=/com.ibm.pcomm.doc/books/html/emulator_programming07.htm)

如果您仍然需要 C# 方面的帮助，有一些文章展示了如何在 C# 应用程序中使用 EHLLAPI。虽然我找不到专门发送和接收文件的文件，但下面的文章和代码展示了如何在 C# 中使用 EHLLAPI。

因此，您可以阅读以下 (CodeProject) 文章以了解如何在 C# 中使用 EHLLAPI，然后阅读 IBM 文档以了解您想要利用的特定 EHLLAPI 功能的语义。

[在 C# 中使用 EHLLAPI](http://www.codeproject.com/Articles/9615/Using-EHLLAPI-in-C)

顺便说一句，这一切都假设您正在发送/接收文件；数据源（例如 AS/400 数据库）中的数据。

如果您正在寻找后者，那么如果您正在做的是相当基本的事情并且您不需要很多高级功能（例如两阶段提交或 TPC），我可能会使用 ODBC。

# ubuntu - sudoers 是世界可写错误

> ID：13951700
> 
> 赞同：13
> 
> 时间：2012-12-19T11:43:40.150
> 
> 标签：ubuntu, neo4j, sudo

我更改了 Ubuntu 12.10 上的 /ect 文件权限，以便我可以编辑 bash.bashrc 以便 neo4j 可以看到 JVM 但现在当我尝试运行 neo4j 服务器时出现错误

我输入了下面的代码并设法编辑了 bash.bashrc 但现在我根本无法使用 sudo！

```
sudo chmod -R ugo+rw /ect

sudo -u neo4j /home/neo4j-community-1.8/bin/neo4j start
sudo: /etc/sudoers is world writable
sudo: no valid sudoers sources found, quitting
sudo: unable to initialize policy plugin 
```

我看了一个论坛，一个人说我需要重新安装ubuntu，我希望不是这样吗？请帮忙！！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-19T12:16:57.087

我想我已经使用此命令对其进行了整理

```
pkexec chmod 0440 /etc/sudoers 
```

我现在可以

```
sudo -s
root@ubuntu:~# 
```

这是一个足够好的解决问题的方法吗？

# apache - Zend 框架重写：/index 得到 404

> ID：13951701
> 
> 赞同：1
> 
> 时间：2012-12-19T11:43:48.850
> 
> 标签：apache, zend-framework, routes, http-status-code-404

我有简单的重写规则：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule !\.(js|ico|txt|gif|jpg|png|css)$ index.php 
```

规则在 Windows 服务器上运行良好。
在 linux (Ubuntu 12.10) 上，除了`/index`URL 之外，它们都可以工作。`/index/*`返回默认的 apache 404 页面。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:39:12.283

`Options -MultiViews`帮助。

问题描述：[http ://www.webmasterworld.com/apache/3161107.htm](http://www.webmasterworld.com/apache/3161107.htm)

# android - 安卓 4.x。通过 apk 部署本机库并从其他应用程序加载

> ID：13951702
> 
> 赞同：4
> 
> 时间：2012-12-19T11:43:49.693
> 
> 标签：android, shared-libraries, android-native-library

我有几个本机库，我想通过 apk 包部署它们（即将它们复制到 libs 文件夹或资源）。然后我需要安装单独的应用程序并使用以下方法加载这些库：

```
System.load(path_to_lib); 
```

可以通过哪种方式实现？据我了解，出于安全原因，我不能只使用 /data/data/libs_package/lib/native_lib.so 路径加载库。还有其他方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:58:49.517

请参阅android-ndk 讨论组中的[此线程。](https://groups.google.com/forum/?fromgroups=#!topic/android-ndk/B6KbQfHmbOk)

总而言之，谷歌的安卓开发者说：

> 如果这两个应用程序有一个共享的用户 ID，那么您可以使用要加载的共享库的完整路径显式调用 System.loadLibrary()。
> ...
> 但是请不要尝试这样做。你会给你的用户带来痛苦——无论是更新一个或另一个应用程序导致不兼容并让你崩溃，还是用户卸载另一个应用程序让你崩溃，等等。

另一位开发人员提出了以下解决方案：

> 所以我现在要做的（并且有效）是有一堆没有共享用户 ID 的包（它们由相同的密钥签名，但我认为这在这里并不重要）。核心应用程序从其他包的 .apk 中解压 .so （我已经有一个自定义解包器来解决一堆其他 Android 错误）。我将它们解压到核心包已知的位置，然后从那里 dlopen() 它们。

# vb.net - 异步操作已经完成

> ID：13951705
> 
> 赞同：2
> 
> 时间：2012-12-19T11:43:58.310
> 
> 标签：vb.net, service-broker, asynchronous

我有一个带有显示作业列表的 DataGridView 的 VB.net 应用程序，从 SQL 查询中检索到 DataTable，然后是 DataView，最后是 DataGridView.DataSource 的 BindingSource。我最近在设置中添加了 SqlNotificationRequest 功能，因此当用户 B 对列表中的作业执行操作时，用户 A 会立即更新。

我使用这篇 MSDN 文章 ( [http://msdn.microsoft.com/en-US/library/3ht3391b(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/3ht3391b%28v=vs.80%29.aspx) ) 作为我开发的基础，它工作正常。当用户想要更改显示作业的 SQL 查询的参数（例如显示的日期）时，就会出现问题。目前，我正在创建一个带有新通知的新 SqlCommand，但是在用户更改了几次日期（比如 30 次）但没有数据更改之后，当发生通知超时时，当回调处理程序尝试 EndExecuteReader 时，我收到上述错误。我的回调处理程序如下：

```
 Private Sub OnSalesReaderComplete(ByVal asynResult As IAsyncResult)
    ' You may not interact with the form and its contents
    ' from a different thread, and this callback procedure
    ' is all but guaranteed to be running from a different thread
    ' than the form. Therefore you cannot simply call code that 
    ' updates the UI.
    ' Instead, you must call the procedure from the form's thread.
    ' This code will use recursion to switch from the thread pool
    ' to the UI thread.
    If Me.InvokeRequired Then
        myStatus.addHistory("OnSalesReaderComplete - Background", "Sub")
        Dim switchThreads As New AsyncCallback(AddressOf Me.OnSalesReaderComplete)
        Dim args() As Object = {asynResult}
        Me.BeginInvoke(switchThreads, args)
        Exit Sub
    End If

    ' At this point, this code will run on the UI thread.
    Try
        myStatus.addHistory("OnSalesReaderComplete - UI", "Sub")
        Dim sourceText, rSalesId As String

        waitInProgressSales = False
        Trace.WriteLine(String.Format("Sales:asynResult.IsCompleted1: {0}", asynResult.IsCompleted.ToString), "SqlNotificationRequest")
        Trace.WriteLine(String.Format("Sales:asynResult.CompletedSynchronously: {0}", asynResult.CompletedSynchronously.ToString), "SqlNotificationRequest")
        Dim reader As SqlDataReader = DirectCast(asynResult.AsyncState, SqlCommand).EndExecuteReader(asynResult)
        Trace.WriteLine(String.Format("Sales:asynResult.IsCompleted2: {0}", asynResult.IsCompleted.ToString), "SqlNotificationRequest")
        Do While reader.Read
            ' Empty queue of messages.
            ' Application logic could parse
            ' the queue data to determine why things.
            'For i As Integer = 0 To reader.FieldCount - 1
            '    'Debug.WriteLine(reader(i).ToString())
            '    Console.WriteLine(reader(i).ToString)
            'Next

            Dim bytesQN As SqlBytes = reader.GetSqlBytes(reader.GetOrdinal("message_body"))
            Dim rdrXml As XmlReader = New XmlTextReader(bytesQN.Stream)
            Do While rdrXml.Read
                Select Case rdrXml.NodeType
                    Case XmlNodeType.Element
                        Select Case rdrXml.LocalName
                            Case "QueryNotification"
                                sourceText = rdrXml.GetAttribute("source")
                            Case "Message"
                                rSalesId = rdrXml.ReadElementContentAsString
                        End Select
                End Select
            Loop
        Loop

        reader.Close()

        ' The user can decide to request
        ' a new notification by
        ' checking the check box on the form.
        ' However, if the user has requested to 
        ' exit, we need to do that instead.
        If exitRequestedSales Then
            'Me.Close()
            commandSales.Notification = Nothing
        Else
            Select Case sourceText.ToLower
                Case "data"
                    Trace.WriteLine(String.Format("SalesId: {0}, data notification", rSalesId), "SqlNotificationRequest")
                    Call GetSalesData(True, action.REATTACH)
                Case "timeout"
                    'check timeout is for this user and relates to current wait thread
                    Select Case salesId = rSalesId
                        Case True
                            Trace.WriteLine(String.Format("SalesId: {0}, timeout - current", rSalesId), "SqlNotificationRequest")
                            Call GetSalesData(True, False)
                        Case False
                            Trace.WriteLine(String.Format("SalesId: {0}, timeout - old", rSalesId), "SqlNotificationRequest")
                            Me.ListenSales()
                    End Select
            End Select
        End If
    Catch ex As Exception
        Call errorHandling(ex, "OnSalesReaderComplete", "Sub")
    End Try
End Sub 
```

问题似乎在于，当通知是由于更新（“数据”）或超时是针对当前请求时，我只刷新数据并更新通知请求（使用 GetSalesData）。在其他通知上，应用程序调用 Me.ListenSales 创建 SQL 命令“WAITFOR (RECEIVE * FROM [QueueMessage])”并按照 MSDN 文章启动回调侦听器。如果我删除 Me.ListenSales 行，一旦收到不是由于数据或当前查询超时的通知，应用程序就会停止侦听通知。

我还在 MSDN 论坛（[http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/0f7a636d-0c9b-4b39-b341-6becf13873dc](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/0f7a636d-0c9b-4b39-b341-6becf13873dc)）上发布了相同的问题，因为我尝试了其他没有成功所以需要一些关于这是否可能以及如果可能如何如何的建议。

# sql - 带有过滤器的 oracle 条件 where 子句

> ID：13951711
> 
> 赞同：4
> 
> 时间：2012-12-19T11:44:11.457
> 
> 标签：sql, oracle, conditional, where-clause

我必须使用像下面这样的条件 where 子句，这个子句的工作版本是什么？

```
AND CASE WHEN b.kurum_turu = 1 
         THEN u.kod  in ('1125', '2975', '1127', '4460', '1128', '1126')  
    ELSE u.kod  in ('1125', '2975')                 
END 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T11:51:14.153

听起来你想要一个`WHERE`子句：

```
WHERE
(
  b.kurum_turu = 1
  AND u.kod  in ('1125', '2975', '1127', '4460', '1128', '1126')
)
OR
(
  u.kod  in ('1125', '2975') 
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:54:53.617

您可以将其重写为

```
...
WHERE
    (
        (b.kurum_turu = 1 AND u.kod in ('1125', '2975', '1127', '4460', '1128', '1126'))
        OR
        ((b.kurum_turu IS NULL OR b.kurum_turu != 1) AND u.kod in ('1125', '2975'))
    ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T11:57:37.967

我想这就是你需要的..

```
 where ...AND CASE WHEN b.kurum_turu = 1 
         and u.kod  in ('1125', '2975', '1127', '4460', '1128', '1126') then 1  
         when  u.kod  in ('1125', '2975') then 1
     else 0      
END=1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-05T13:48:10.063

我的方法是这样的：

```
 AND 1 = CASE
         WHEN  b.kurum_turu = 1 AND u.kod  in ('1125', '2975', '1127', '4460', '1128', '1126') THEN 1 ELSE 1 END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-21T17:57:32.243

通过使用转换字符串列表`CONNECT BY`以获得条件`IN`语句。

如果您有多个条件，则此解决方案很有用，因为您可以将`IN`子句编写为单个表达式，而无需任何其他 AND、OR 限制。

```
WHERE u.kod IN 
(
  SELECT rowdata FROM
  ( WITH DATA AS 
    (SELECT CASE WHEN b.kurum_turu = 1 THEN '1125, 2975, 1127, 4460, 1128, 1126' ELSE '1125, 2975' END rowdata FROM dual )
    SELECT trim(regexp_substr(rowdata, '[^,]+', 1, LEVEL)) rowdata FROM DATA CONNECT BY instr(rowdata, ',', 1, LEVEL - 1) > 0
  )
) 
```

这样做的缺点是逗号分隔值到数据行的转换有点复杂......但是您可以将这个复杂的部分提取到一个命名良好的函数中以隐藏这种复杂性。

# android - 我该如何处理android Fragment backstack？

> ID：13951714
> 
> 赞同：2
> 
> 时间：2012-12-19T11:44:24.617
> 
> 标签：android, android-fragments

我有四个片段ABC D.当我执行从A到B和B到C和C到D的跳转时。当我按下返回键时如何获得D到B的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:51:22.750

**片段D：**

在 FragmentD 中创建一个接口。

```
OnBackListener mback;
    public interface OnBackListener {
        public void onBackClicked();
}

@Override
    public void onAttach(Activity activity) {
        try {
            mback = (OnBackListener ) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                    + " must implement OnBackListener");
        }
        super.onAttach(activity);
    }

public void methodCall()
    {
      mback.onBackClicked()
    } 
```

然后

**家长活动**

实现我们在 FragmentD 中创建的 OnBackListener 接口。

```
 public class MyActivity extends FragmentActivity implements OnBackListener {

// overriding OnBackListener interface method
        @Override
            public void onBackClicked() {

                  //calling fragmentb
            }   

    //Backkey event
        @Override
        public void onBackPressed()
        {
            super.onBackPressed();
            fragmentd.methodCall();
        }

        } 
```

顺便说一下，你会得到fragmentD到fragmentB的结果。

# c# - 以当前登录用户身份运行

> ID：13951719
> 
> 赞同：3
> 
> 时间：2012-12-19T11:44:45.127
> 
> 标签：c#, process, runas

我有两个可执行文件。我的第一个是在管理权限下运行。我想用当前登录的用户启动另一个进程。我不知道当前登录用户的密码。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:51:34.667

您可以通过模拟登录用户来完成此操作。这是一个链接，它指定了执行此操作的 3 种方法（虽然细节不多）[在当前登录用户的权限下运行应用程序](http://www.codeproject.com/Articles/90713/Run-an-application-under-current-logon-user-s-priv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:05:14.247

首先，您需要知道谁已登录并且该用户有一个活动桌面，然后，获取该用户启动的进程句柄并从该进程中获取凭据。然后，您可以使用这些凭据开始流程

# c++ - 使用按位移位运算符进行奇怪的相等检查

> ID：13951720
> 
> 赞同：1
> 
> 时间：2012-12-19T11:44:58.857
> 
> 标签：c++, c, linux, operators, bit-manipulation

```
#include <stdio.h>

int foo(int a, int b)
{
        return ((a>>= b<<= a) ? 1 : 0);
}

void bar(int x, int y)
{
        printf("%d,%d: %s\n",x, y, (foo(x,y) ? "Equal" : "Not Equal"));
}

int main()
{
        bar(0,1);
        bar(4,4);
        bar(3,2);
        bar(9,9);
        bar(-2,-2);
        bar(-8,8);
        return 0;
} 
```

上述程序的输出是

```
0,1: Not Equal
4,4: Equal
3,2: Not Equal
9,9: Equal
-2,-2: Equal
-8,8: Equal 
```

你能帮我理解函数()中的**相等检查是如何工作的吗？**`foo`为什么当一个论点是肯定的而另一个是否定的时它会失败？function `foo`() 中的解决方法是什么可以正确显示所有情况下的结果，即所有否定和肯定参数？

**编辑**：从下面的答案中，其他值的结果是：

```
70,72: Equal
-2,-2: Equal
64,64: Equal
128,32: Equal
256,250: Not Equal
250,256: Equal
-250,-256: Equal 
```

请解释一下，为什么这种相等性检查适用于某些值集，而不适用于其他值集。里面发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T11:48:27.597

这不是一个相等检查（从结果中可以清楚地看到），它是一个赋值：

```
a = ( a >> ( b = b << a ) );  //results in UB for negatives 
```

相等检查很简单

```
a == b; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T11:51:16.877

> 为什么当一个论点是肯定的而另一个是否定的时它会失败？函数 foo() 中的解决方法是什么可以正确显示所有情况下的结果，即所有否定和肯定参数？

答案在于 C99 标准（ISO C99：6.5.7 位移位运算符）：

> /4。的结果`E1 << E2`是`E1`左移的`E2`位位置；空出的位用零填充。如果`E1`具有无符号类型，则结果的值为 ，以`E1 × 2E2`比结果类型中可表示的最大值大一为模减少。如果`E1`具有带符号类型和非负值，并且`E1 × 2E2`可以在结果类型中表示，那么这就是结果值；否则，行为未定义。

*未定义的行为*`foo(-2,-2)`也是如此。

 *> /5。结果`E1 >> E2`是`E1`右移的`E2`位位置。如果`E1`有无符号类型或`E1`有符号类型和非负值，则结果的值是 的商的整数部分`E1 / 2E2`。如果`E1`具有带符号类型和负值，则结果值是实现定义的。

*实现定义*`foo(-8,8)`也是如此。

 ** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T12:19:22.683

尝试更多的值：

```
1,0: Equal
0,0: Not Equal
1,1: Not Equal
2,2: Not Equal
3,3: Not Equal 
```

表明它根本不是平等检查。

该表达式具有未定义的行为，因为它对`a`. 如果我们假设您的编译器评估它就好像在左移之后有一个序列点，即

```
b <<= a;
a >>= b;
return a ? 1 : 0; 
```

那么很容易看出，除非`b`为零，否则它总是返回零，*除非*左移溢出，在这种情况下，行为再次未定义。**

# java - Wicket 从 Web 应用程序目录外的文件系统创建图像

> ID：13951722
> 
> 赞同：3
> 
> 时间：2012-12-19T11:45:00.967
> 
> 标签：java, wicket, wicket-1.5, resourcereference

我有一个存储库，在服务器的某处存储了许多图像。我希望能够使用存储在我的存储库中的图像之一创建一个动态图像对象。

我正在使用检票口 1.5.7。我在某处看到了这个例子

1) 创建了 FileResource 类：

```
public class FileResource extends WebResource { 
private static final long serialVersionUID = 1L; 

private File file; 

public FileResource(File file) { 
    this.file = file; 
} 

@Override 
public IResourceStream getResourceStream() { 
    return new FileResourceStream(file); 
} 
} 
```

2) 在 MyPage.java 中：

```
File imageFile = new File("local_path_to_image"); 
Image myImage = new Image("myImage", new FileResource(imageFile)); 
add(myImage); 
```

3) 在 MyPage.html 中：

```
<i-m-g wicket:id="myImage" /> 
```

但这不适用于我的情况，因为 WebResource 在我的 wicket 1.5 中不可用。

我还研究了检票口动作中的这个[链接](http://wicketinaction.com/2011/07/wicket-1-5-mounting-resources/)。但我是一个检票口比格纳，我不太了解。

我正在制作一个项目，其中用户在单击产品时会打开带有产品名称的模式窗口。我还想在面板内的模态窗口中包含产品图像。图像存储在我的服务器上的一个目录中。

任何帮助和建议表示赞赏！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:21:59.487

最后我确定了这个代码。我正在传递图像文件名并创建图像。

```
add(new NonCachingImage("imgPlc", new AbstractReadOnlyModel<DynamicImageResource>(){
          @Override public DynamicImageResource getObject() {
            DynamicImageResource dir = new DynamicImageResource() {
              @Override protected byte[] getImageData(Attributes attributes) {
                  StringValue name = parameters.get("name");
                  byte[] imageBytes = null;
                    if(name.isEmpty() == false)
                        imageBytes = getImageAsBytes(name.toString());

                    return imageBytes;
              }
            };
            dir.setFormat("image/png");
            return dir;
          }
        })); 
```

# android - Android：视图持有者上的 classCastException

> ID：13951726
> 
> 赞同：6
> 
> 时间：2012-12-19T11:45:08.170
> 
> 标签：android

我有一个适配器，我试图将联系人详细信息检索到列表视图中

```
public View getView(int position, View convertView, ViewGroup parent) { 

    View view = convertView; 
    final ViewHolder holder;
    if (view == null) { 
    view = inflater.inflate(R.layout.profile, null); 
    holder = new ViewHolder();
    holder.text = (TextView) view.findViewById(R.id.name);
    holder.textContNo = (TextView) view.findViewById(R.id.contactno);
    holder.textEmailId = (TextView) view.findViewById(R.id.emailId); 
    view.setTag(holder);
    } else
        holder = (ViewHolder) view.getTag();

    Profile contact = listCont.get(position); 
    holder.text.setText(contact.getName()); 

    QuickContactBadge photo = (QuickContactBadge ) view.findViewById(R.id.quickContactBadge1);  
    photo.setTag(contact.getMobileNo()); 
    new LoadImage(photo).execute(contact.getMobileNo()); 
```

我的日志中出现以下错误

```
FATAL EXCEPTION: main
12-19 17:07:27.080: E/AndroidRuntime(6988): java.lang.ClassCastException: org.appright.myneighborhood.data.Profile cannot be cast to org.appright.myneighborhood.adaptor.ProfileAdapter$ViewHolder
12-19 17:07:27.080: E/AndroidRuntime(6988):     at org.appright.myneighborhood.adaptor.ProfileAdapter.getView(ProfileAdapter.java:82)
12-19 17:07:27.080: E/AndroidRuntime(6988):     at android.widget.AbsListView.obtainView(AbsListView.java:1949)
12-19 17:07:27.080: E/AndroidRuntime(6988):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1228) 
```

在这条线附近得到classcastexception：holder = (ViewHolder) view.getTag(); 我做错了，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:00:42.080

我想所以返回类型 delcare ，

```
return view; 
```

# asp.net - 使用 C# 在 asp.net 中执行 SQL Server 2008 存储过程/游标时出错？

> ID：13951730
> 
> 赞同：0
> 
> 时间：2012-12-19T11:45:24.690
> 
> 标签：asp.net, sql-server-2008, stored-procedures, cursor

您好，这是我编写的第一个光标程序。

在成功影响我想要使用此过程执行的过程中的表行后，我很惊讶地看到错误。

我正在将菜单分配给帖子，当我从特定帖子中删除某些菜单时，我需要为属于该帖子的所有员工更新（添加/删除）菜单。下面的过程可以做所有事情，但我收到一个错误：

> *错误：数据库中已有一个名为“EmployeeMenuMst”的对象。*

执行后。

存储过程是：

```
ALTER PROCEDURE [sUpdateEmpMenuMst]
    (@EmployeePostID INT)
AS
BEGIN
    SET NOCOUNT ON;
    DECLARE @EMPID INT
    DECLARE @EMPMENUID INT

    BEGIN TRAN
    BEGIN TRY
    DECLARE EmployeeTable CURSOR FOR

    SELECT EmployeeID FROM EMPLOYEEMST WHERE EmployeePostID=@EmployeePostID

    OPEN EmployeeTable

    FETCH NEXT FROM EmployeeTable INTO @EMPID
    WHILE @@FETCH_STATUS = 0
    BEGIN
    DELETE FROM EmployeeMenuMst WHERE EmployeeID=@EMPID  

    FETCH NEXT FROM EmployeeTable INTO @EMPID
    END
    CLOSE EmployeeTable
    DEALLOCATE EmployeeTable

        SELECT   EmployeeMst.EmployeeID, EmployeePostMenuMst.MenuID, EmployeePostMenuMst.AccessLevelID,1 AS ISVISIBLE
        INTO EmployeeMenuMst
        FROM     EmployeePostMenuMst 
        INNER JOIN EmployeeMst 
        ON EmployeePostMenuMst.EmployeePostID = EmployeeMst.EmployeePostID
        WHERE EmployeeMst.EMPLOYEEPOSTID=@EmployeePostID ORDER BY EmployeeMst.EMPLOYEEID
        COMMIT TRAN
    END TRY

    BEGIN CATCH
        ROLLBACK TRAN
        IF @@TRANCOUNT > 0
        DECLARE @ErrMsg nvarchar(4000), @ErrSeverity INT
        SELECT @ErrMsg = ERROR_MESSAGE(),
        @ErrSeverity = ERROR_SEVERITY()
        RAISERROR(@ErrMsg, @ErrSeverity, 1)

    END CATCH

   END
GO 
```

在`aspx.cs`文件后面的代码中：

```
private void UpdateMenus()
    {
        SqlCommand cmd = new SqlCommand();
        SqlConnection con = new SqlConnection(conStr);
        try
        {
            con.Open();
            cmd.CommandText = "sUpdateEmpMenuMst";
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@EmployeePostID", Convert.ToInt32(Session["postID"]));
            cmd.Connection = con;
            int i = cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            con.Close();
        }
        finally
        {
            con.Close();
        }
    } 
```

错误`ExecuteNonQuery`在线。为什么它会引发错误 - 任何想法？

在得到错误行之后，我需要的方式成功地受到影响！

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:49:35.367

```
SELECT   EmployeeMst.EmployeeID, EmployeePostMenuMst.MenuID, EmployeePostMenuMst.AccessLevelID,1 AS ISVISIBLE
        INTO EmployeeMenuMst 
```

将尝试创建一个表 EmployeeMenuMst ans fill ist，也许您正在搜索

```
Insert into EmployeeMenuMst
SELECT   EmployeeMst.EmployeeID, EmployeePostMenuMst.MenuID, EmployeePostMenuMst.AccessLevelID,1 AS ISVISIBLE 
```

# qt - 存在的缺失 DLL 的运行时错误

> ID：13951731
> 
> 赞同：2
> 
> 时间：2012-12-19T11:45:25.237
> 
> 标签：qt, dll, pthreads

我正在使用 Qt Creator 编写一个工具，该工具可以构建但会立即崩溃并显示以下消息：

> “程序无法启动，因为您的计算机中缺少 pthreadVC2.dll。请尝试重新安装程序以解决此问题”。

当然，“pthreadVC2.dll”库并没有丢失（也没有损坏，因为它与其他项目一起使用），它位于 Qt pro 文件中指定的路径中：

```
# DeltaPlots.pro

TARGET = DeltaPlots
QT += core gui
CONFIG += console
greaterThan(QT_MAJOR_VERSION, 4): QT += widgets
TEMPLATE = app

win32 {
    INCLUDEPATH += S:\\3rdparty\\DFS.Infrastructure.ThreadingW \
                   S:\\3rdparty\\DFS.Infrastructure.File \
            "C:\\path\\to\\boost\\boost_1_51_0"

    win32-g++:LIBS += -L"S:\\lib\\" -lMyLib
    win32-g++:LIBS += -L"S:\\3rdparty\\DFS.Infrastructure.File\\" -lDFS.Infrastructure.FileSystem
    win32-g++:LIBS += -L"S:\\3rdparty\\DFS.Infrastructure.ThreadingW\\" -lDFS.Infrastructure.Threading -lpthreadVC2
}

SOURCES += MainWindow.cpp \
           entrypoint.cpp

HEADERS += MainWindow.h

FORMS   += MainWindow.ui

OTHER_FILES += ProjectList.txt \
               ImageList.txt 
```

平台：
Windows 7
MinGW
Qt 4.8.3
Qt Creator 2.6.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:04:53.443

[编辑：这个答案是指原始问题]

通常你会添加

```
LIBS += -LS:/3rdparty/DFS.Infrastructure.ThreadingW \
        -lpthreadVC2 
```

这会将您的库文件夹添加为库搜索路径（注意大写字母）`-L`和`pthreadVC2.lib`要链接的库（小写字母`-l`）。

您不需要将 .dll 添加到 LIBS 路径，因为 .dll 是在运行时加载的。

**但是：**这种方法仅在 .lib 与 .dll 位于同一文件夹中时才有效。我有点惊讶你在不同的地方有你的。

也许添加

```
LIBS += -LS:/3rdparty 
```

会工作，但我不确定。

无论如何，您需要将 .dll 与您的 .exe 一起部署以进行发布。

# java - 和

> ID：13951733
> 
> 赞同：3
> 
> 时间：2012-12-19T11:45:28.607
> 
> 标签：java, spring, annotations

在 Spring 3 中，我是否需要拥有`<context:annotation-config>`并`<context:component-scan>`定义才能启用 @PostConstruct？

*应用程序上下文.xml*

```
<context:component-scan base-package="net.test" />

........
...

<context:annotation-config /> 
```

我的 ManagedBean 中有一个 getLazyLoad 方法，我想对这个 bean 使用 @PostConstruct。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:51:37.840

`<context:annotation-config>`就足够了，之后您可以从 context.xml 和 @PostConstruct、@Autowired、@Resource 以及 Spring 支持的一些其他注释实例化您的 bean。注意如果你使用组件扫描注解配置模式默认启用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:51:47.490

在您的 bean 中没有任何与相关的类级别的注释`@Component`

```
<context:component-scan base-package="net.test" /> 
```

不需要。

`@PostConstruct`只合作`<context:annotation-config />`就足够了。

> 编辑1：

假设如果您的 bean 有任何以下注释

```
@Component, @Repository, @Service, or @Controller. 
```

然后`<context:component-scan />`将扫描指定包下的那些bean。

# r - 使用另一列作为索引填充数据框中的特定值

> ID：13951737
> 
> 赞同：1
> 
> 时间：2012-12-19T11:45:36.917
> 
> 标签：r, loops, conditional-statements, intervals

我有一个看起来像这样的数据框：

> ```
> species<-"ABC"
> ind<-rep(1:4,each=24)
> hour<-rep(seq(0,23,by=1),4)
> month<-rep(seq(1,12),8)
> depth<-runif(length(ind),1,50)
> df<-data.frame(species,ind,month,hour,depth) 
> ```

我想要的是使用月份列来指定每个季节的间隔，并从同一数据帧的新列中返回这些值。我一直在使用这个代码，这似乎工作正常，

> ```
> # Classify months into seasons
> 
> summer<-c(1,2,12)
> fall<-c(3,4,5)
> winter<-c(6,7,8)
> spring<-c(9,10,11)
> 
> # Create a new column with seasons
> 
> df$season<-NA
> for(i in 1:nrow(df)){
>   if(df$month[i]%in%summer){df$season[i]<-"1-summer"} else
>     if(df$month[i]%in%fall){df$season[i]<-"2-fall"} else
>       if(df$month[i]%in%winter){df$season[i]<-"3-winter"} else
>         if(df$month[i]%in%spring){df$season[i]<-"spring"} 
> ```
> 
> }

然而，这个循环已经在一个更大的循环内部，它具有更复杂和更大的数据库。所以我一直在寻找一种更快、更有效的方法。我使用循环而不是切割或子集原始数据框的原因是因为我使用的第一个循环是对个体动物进行分离和分析。结果数据框的长度因动物而异，我遇到的一个问题是并非所有动物都在所有月份都存在，所以当我试图在循环内为特定季节不存在的动物分配季节时，然后R给了我一个错误信息......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:06:07.510

```
seasons <- c("1-summer", "2-fall", "3-winter", "spring")
df$season2 <- factor(trunc(df$month %% 12 / 3) + 1, labels = seasons)
table(df$season, df$season2) 
```

如果您愿意，您可以转换`df$season2`为。`character`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:00:43.627

我只是为季节名称生成查找表并应用它：

```
> season.names <- rep("",12)
> season.names[summer] <- "1-summer"
> season.names[fall] <- "2-fall"
> season.names[winter] <- "3-winter"
> season.names[spring] <- "4-spring"
> season.names
 [1] "1-summer" "1-summer" "2-fall"   "2-fall"   "2-fall"   "3-winter" "3-winter"
 [8] "3-winter" "4-spring" "4-spring" "4-spring" "1-summer"
> df$season <- season.names[df$month]
> head(df)
  species ind month hour     depth   season
1     ABC   1     1    0 41.643471 1-summer
2     ABC   1     2    1 36.055533 1-summer
3     ABC   1     3    2  1.901639   2-fall
4     ABC   1     4    3  7.737539   2-fall
5     ABC   1     5    4 35.327364   2-fall
6     ABC   1     6    5  9.156978 3-winter 
```

# android - TabActivity可以在android中完成吗？

> ID：13951738
> 
> 赞同：2
> 
> 时间：2012-12-19T11:45:43.010
> 
> 标签：android, tabactivity

我有一个实现 TabActivity 的应用程序，但问题是当我单击后退按钮打开活动后，应用程序无法关闭，

我怎样才能完成这个 TabActivity ？

MainActivity.java

> 包 com.productdemo;

```
import android.app.TabActivity;
import android.content.Context;
import android.content.Intent;
import android.graphics.Color;
import android.graphics.drawable.StateListDrawable;
import android.os.Bundle;
import android.view.Gravity;
import android.view.Menu;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MainActivity extends TabActivity {

TabHost tabhost;
TabSpec dashboard, product, customers, order, settings;

public final static int DASHBOARD = 1;
public final static int PRODUCT = 2;
public final static int CUSTOMER = 3;
public final static int ORDER = 4;
public final static int SETTINGS = 5;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tabhost = getTabHost();

    TabHost.TabSpec spec;
    Intent intent;

    intent = new Intent().setClass(this, TabGroup1Activity.class);
    spec = tabhost.newTabSpec("Dashboard").setIndicator("Dashboard")
            .setContent(intent);
    tabhost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup2Activity.class);
    spec = tabhost.newTabSpec("Product").setIndicator("Product")
            .setContent(intent);
    tabhost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup3Activity.class);
    spec = tabhost.newTabSpec("Customer").setIndicator("Customer")
            .setContent(intent);
    tabhost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup4Activity.class);
    spec = tabhost.newTabSpec("Order").setIndicator("Order")
            .setContent(intent);
    tabhost.addTab(spec);

    intent = new Intent().setClass(this, TabGroup5Activity.class);
    spec = tabhost.newTabSpec("Settings").setIndicator("Settings")
            .setContent(intent);
    tabhost.addTab(spec);

    tabhost.setCurrentTab(1);

    int type = 0;
    if (getIntent().getExtras() != null) {
        if (getIntent().getExtras().containsKey("from")) {
            type = getIntent().getExtras().getInt("from");
            switch (type) {
            case DASHBOARD:
                tabhost.setCurrentTab(0);
            case PRODUCT:
                tabhost.setCurrentTab(1);
            case CUSTOMER:
                tabhost.setCurrentTab(2);
            case ORDER:
                tabhost.setCurrentTab(3);
            case SETTINGS:
                tabhost.setCurrentTab(4);
            default:
                tabhost.setCurrentTab(0);
            }
        }
    }
}

public void switchTabSpecial(int tab) {
    tabhost.setCurrentTab(tab);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private class MyView extends LinearLayout {
    ImageView iv;

    public MyView(Context c, int drawable, int drawableselec, String label) {
        super(c);

        iv = new ImageView(c);
        StateListDrawable listDrawable = new StateListDrawable();
        listDrawable.addState(SELECTED_STATE_SET, this.getResources()
                .getDrawable(drawable));
        listDrawable.addState(ENABLED_STATE_SET, this.getResources()
                .getDrawable(drawableselec));
        iv.setImageDrawable(listDrawable);
        iv.setBackgroundColor(Color.TRANSPARENT);
        iv.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT, (float) 0.0));
        iv.setPadding(0, 0, 0, 5);
        setGravity(Gravity.CENTER);

        addView(iv);
    }
}

@Override
public void onBackPressed() {
    this.finish();
}

} 
```

activity_main.xml

> ```
> <?xml version="1.0" encoding="utf-8"?>
> <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
> android:id="@android:id/tabhost"
> android:layout_width="match_parent"
> android:layout_height="match_parent" >
> <LinearLayout
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:orientation="vertical"
>     android:padding="0dp" >
>     <FrameLayout
>         android:id="@android:id/tabcontent"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:layout_weight="1"
>         android:padding="0dp" >
>     </FrameLayout>
>     <TabWidget
>         android:id="@android:id/tabs"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:layout_gravity="center"
>         android:layout_weight="0" />
>     <TabWidget
>         android:id="@+id/tabwidget"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:layout_gravity="center"
>         android:layout_weight="0" />
> </LinearLayout> 
> ```

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T04:36:09.467

我只是定义 TabGroupActivity 来管理活动的子父关系，

TabGroup1Activity.java

```
package com.tabgroupdemo;  

import android.content.Intent;
import android.os.Bundle;

public class TabGroup1Activity extends TabGroupActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    startChildActivity("OptionsActivity", new Intent(this, DetailActivity.class));
}
} 
```

DetailActivity.java

```
package com.tabgroupdemo;

import android.os.Bundle;

public class DetailActivity extends TabGroupActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.detail);

    // write your actual stuff here

}
} 
```

TabGroupActivity.java

```
package com.tabgroupdemo;

import java.util.ArrayList;

import android.app.Activity;
import android.app.ActivityGroup;
import android.app.LocalActivityManager;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Window;

/**
 * The purpose of this Activity is to manage the activities in a tab. Note:
 * Child Activities can handle Key Presses before they are seen here.
 * 
 * @author Eric Harlow
 */
public class TabGroupActivity extends ActivityGroup {

private ArrayList<String> mIdList;
String TAG = getClass().getSimpleName();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (mIdList == null)
        mIdList = new ArrayList<String>();
}

/**
 * This is called when a child activity of this one calls its finish method.
 * This implementation calls {@link LocalActivityManager#destroyActivity} on
 * the child activity and starts the previous activity. If the last child
 * activity just called finish(),this activity (the parent), calls finish to
 * finish the entire group.
 */
@Override
public void finishFromChild(Activity child) {

    Log.v(TAG, "finish from child , mIdList size = " + mIdList.size());
    LocalActivityManager manager = getLocalActivityManager();
    int index = mIdList.size() - 1;

    if (index < 1) {
        finish();
        return;
    }
    manager.destroyActivity(mIdList.get(index), true);
    mIdList.remove(index);
    index--;
    String lastId = mIdList.get(index);
    Intent lastIntent = manager.getActivity(lastId).getIntent();
    Window newWindow = manager.startActivity(lastId, lastIntent);
    setContentView(newWindow.getDecorView());
}

/**
 * Starts an Activity as a child Activity to this.
 * 
 * @param Id
 *            Unique identifier of the activity to be started.
 * @param intent
 *            The Intent describing the activity to be started.
 * @throws android.content.ActivityNotFoundException.
 */
public void startChildActivity(String Id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(Id,
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        mIdList.add(Id);
        setContentView(window.getDecorView());
    }
}

/**
 * The primary purpose is to prevent systems before
 * android.os.Build.VERSION_CODES.ECLAIR from calling their default
 * KeyEvent.KEYCODE_BACK during onKeyDown.
 */
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

/**
 * Overrides the default implementation for KeyEvent.KEYCODE_BACK so that
 * all systems call onBackPressed().
 */
@Override
public boolean onKeyUp(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        onBackPressed();
        return true;
    }
    return super.onKeyUp(keyCode, event);
}

/**
 * If a Child Activity handles KeyEvent.KEYCODE_BACK. Simply override and
 * add this method.
 */
public void onBackPressed() {
    int length = mIdList.size();
    if (length > 1) {
        Activity current = getLocalActivityManager().getActivity(
                mIdList.get(length - 1));
        current.finish();
    } else {
        finish();
    }
}
} 
```

在 TabGroupActivity.java 方法中，最后一行是 finish() 在 else 部分导致 TabActivity 完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T05:31:00.800

您可以使用以下代码..

```
intent = new Intent().setClass(this, TabGroup2Activity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

spec = tabhost.newTabSpec("Product").setIndicator("Product").setContent(intent);

tabhost.addTab(spec); 
```

此代码在每个选项卡意图对象的主要活动的 onCreate() 方法中使用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T21:21:18.083

我不确定为什么活动不会关闭，但你不应该需要

```
@Override
public void onBackPressed() {
    this.finish();
} 
```

因为当按下返回按钮时，Android 会自动完成一个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T10:09:21.393

**试试这个：**

```
@Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
                this.finish();
    } 
```

# sql - sql中是否有任何内置函数来实现以下操作

> ID：13951739
> 
> 赞同：0
> 
> 时间：2012-12-19T11:45:46.707
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有`table`这样的

```
column1 column2 column3
1   12  1
1   12  2
1   4   3
1   5   4
1   34  5
2   36  6
2   22  7
2   12  8
2   2   9
2   4   10
2   41  11
3   44  12
3   55  13
3   66  14
3   34  15 
```

我需要添加**额外的** `column`。之后该表应该是这样的

```
column1 column2 column3 column4
1   12  1   1
1   12  2   2
1   4   3   3
1   5   4   4
1   34  5   5
2   36  6   1
2   22  7   2
2   12  8   3
2   2   9   4
2   4   10  5
2   41  11  6
3   44  12  1
3   55  13  2
3   66  14  3
3   34  15  4 
```

根据`column1`值`column4`应该添加值。请帮助获得解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T11:48:10.093

是的，有一套内置的[**排名功能**](http://msdn.microsoft.com/en-us/library/ms189798.aspx)。

这是其中之一[`ROW_NUMBER() OVER(PARTITION BY ... ORDER BY ...`](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.100%29.aspx)：

```
SELECT *,
  ROW_NUMBER() OVER(PARTITION BY Column1 ORDER BY Column1) Column5
FROM table; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/2fd22/1)

# android - Eclipse ADT 插件无法更新到 21.0 版本

> ID：13951743
> 
> 赞同：1
> 
> 时间：2012-12-19T11:45:53.167
> 
> 标签：android, eclipse-adt

我已将 Android SDK 工具更新为 Android SDK 中的 21 版本。但是当我打开我的 Eclipse 时，它​​说要在 Eclipse 中更新 ADT 工具，因为 SDK 版本是 21.0。

所以我也尝试更新 eclipse 插件，但它没有更新，所以我现在无法编写代码。那么我应该怎么做才能更新 Eclipse 的 ADT 工具呢？

如果你有，我很感激你的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T11:53:24.383

当远程更新站点自动更新失败时，您可以尝试通过 zip 文件安装最新的 ADT。更多信息可在[安装 Eclipse 插件](http://developer.android.com/sdk/installing/installing-adt.html)> 故障排除安装中获得

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T17:14:08.690

转到[http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting](http://developer.android.com/sdk/installing/installing-adt.html#Troubleshooting) 下载最新版本的 ADT，当前 ADT-22.6.2.zip (*) 在 Eclipse > Help > Install new software.. . > 取消选中安装期间联系所有更新站点以查找所需的软件（底部，最后一个首选项），以避免安装过程中出现任何不必要的延迟。同一屏幕（顶部）单击添加 > 存档 > 选择下载的 ADT-XXXzip > 按照屏幕安装步骤进行操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-03T07:08:21.850

> 如果自动更新失败，请尝试以下..
> 
> [首先从http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)下载 ADT 插件 zip 文件 。
> 
> 然后从 Eclipse 中删除已安装的所有 ADT 插件（DDMS、Hierarchy、NatveDevelopment、Traceview、TraceforopenGLES）以避免冲突
> 
> 帮助->关于Eclipse->安装详情->已安装的软件
> 
> 卸载所有 ADT 插件并重新启动 eclipse

* * *

> 从帮助->安装新软件->添加选择 ADT 插件 zip 的存档

安装并重新启动 Eclipse

> 如果在安装过程中遇到问题，请以管理员身份运行模式重新启动 eclipse。

# c# - WPF - 如何通过绑定停止计时器

> ID：13951752
> 
> 赞同：1
> 
> 时间：2012-12-19T11:46:17.063
> 
> 标签：c#, wpf, xaml, c#-4.0

首先，感谢您抽出宝贵时间阅读这篇文章。

我有一个计时器类，它每 60 秒从我的 SQL 数据库中下载一次“产品”。即检查可能已被其他用户编辑的更新产品。

这是我的课程代码：

```
public class GetProducts : INotifyPropertyChanged
    {
        public GetProducts()
        {
            Timer updateProducts = new Timer();
            updateProducts.Interval = 60000; // 60 second updates
            updateProducts.Elapsed += timer_Elapsed;
            updateProducts.Start();
        }

        public ObservableCollection<Products> EnabledProducts
        {
            get
            {
                return ProductsDB.GetEnabledProducts();
            }
        }

        void timer_Elapsed(object sender, ElapsedEventArgs e)
        {

            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("EnabledProducts"));
        }

        public event PropertyChangedEventHandler PropertyChanged;

    } 
```

然后我将此绑定到我的 XAML (WPF) 控件的标记属性：

```
<Page.Resources>
    <!-- Products Timer -->
    <products_timer:GetProducts x:Key="getProducts_timer" />
</Page.Resources>

Tag="{Binding Source={StaticResource getProducts_timer}, Path=EnabledProducts, Mode=OneWay}" 
```

这真的很好用。我遇到的问题是，当控件所在的窗口或页面关闭时，无论如何计时器都会继续计时。

一旦页面/控件不再可用，任何人都可以提出一种停止自动收报机的方法吗？

再次感谢您的宝贵时间。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T12:02:57.320

首先保持对计时器的引用：

```
private Timer updateProducts;
public GetProducts()
{
    updateProducts = new Timer();
    ......
} 
```

例如，创建另一个方法，`StopUpdates`调用该方法时将停止计时器：

```
public void StopUpdates()
{
     updateProducts.Stop();
} 
```

现在在窗口的 OnUnloaded 事件中停止计时器：

```
private void MyPage_OnUnloaded(object sender, RoutedEventArgs e)
{
    var timer = this.Resources["getProducts_timer"] as GetProducts;
    if (timer != null)
        timer.StopUpdates();
} 
```

# wordpress - WPML 与 WordPress 3.5

> ID：13951754
> 
> 赞同：0
> 
> 时间：2012-12-19T11:46:33.970
> 
> 标签：wordpress

我有自己的 WordPress 网站，版本为 3.4x。

我在我的网站上使用了多语言的 WPML 插件（2.6.0 版）。在我将 WordPress 核心升级到最新版本 (3.5) 之前，它一直正常工作。

当我访问我的网站时，打开了 WP_DEBUG，主页只显示以下错误：

```
Notice: Undefined index: name in /home/domain.com/public_html/html/wp-includes/query.php on line 3569 
```

我尝试将 WPML 插件升级到最新版本（2.6.2），但错误仍然存​​在。

如果我停用了插件，那么我的网站就可以了，除了一些关于缺少 WPML 插件中定义的变量/常量的通知。

我联系了 WPML 插件的作者，但尚未收到任何回复。

谢谢，

诺亚特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:35:29.630

我已经联系了 WPML 插件的作者。

他发送了一个插件的测试版，问题就解决了。

希望这些信息对遇到这种情况的每个人都有用。

# regex - 正则表达式：仅匹配带数字的字母

> ID：13951756
> 
> 赞同：13
> 
> 时间：2012-12-19T11:46:40.807
> 
> 标签：regex

如何创建一个只匹配**带**数字的字母的正则表达式？

我试过类似的东西`(?>[A-z]+)([a-z0-9]+)`。

正则表达式应给出以下结果：

```
1234b --> true
1234 --> false
abcd --> false
abcd4 --> true 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T12:01:58.540

`(?:\d+[a-z]|[a-z]+\d)[a-z\d]*`

基本上，其中 1 和 a 是任意数字和任意字母，它匹配 1a 或 a1，由任意数量的字母数字字符包围。

编辑：现在更短，可能更快

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T11:50:45.407

其他答案不正确，将允许任何仅包含字母、数字或两者的字符串。我的表达式将明确排除仅由字母或数字组成的字符串。

```
[A-Za-z0-9]*([a-zA-Z]+[0-9]+|[0-9]+[a-zA-Z]+) 
```

任意数量的字母和数字，后跟至少一个字母后跟一个数字或至少一个数字后跟一个字母。

但是，可能有一种更简单的方法可以做到这一点。我的似乎很啰嗦。也许不是。有人愿意投吗？:P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:55:12.163

`^([a-Z]+[0-9]+|[0-9]+[a-Z]+)[a-Z0-9]*$`

和一个受 TimPietzcker 启发的更简单的版本：

`^([a-Z]+[0-9]|[0-9]+[a-Z])[a-Z0-9]*$`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:52:17.387

如果你不需要，不要让它成为一个正则表达式。使用两个必须匹配的正则表达式。在 Perl 中，它会是这样的

```
if ( /[a-zA-Z]/ && /\d/ ) 
```

# javascript - 鼠标悬停和鼠标悬停问题

> ID：13951761
> 
> 赞同：2
> 
> 时间：2012-12-19T11:47:06.100
> 
> 标签：javascript, jquery, mouseover, mouseout

所以我遇到了一个问题，因为我想从 DIV 背景中删除鼠标变成红色，这是可行的，但是当我将鼠标移动到 div 内的标题上时，它已经发生了这个鼠标事件！我该做什么？？

这是代码：http: [//jsfiddle.net/eluminium/t5YEC/1/](http://jsfiddle.net/eluminium/t5YEC/1/)

```
var $imoveis = $('.imoveis');
$imoveis.mouseover(function() {
    var index = $(this).index();
});

$imoveis.mouseout(function() {
    var index = $(this).index();
    $imoveis.eq(index).css({
        background: 'red'
    });
})​;​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:49:51.947

尝试绑定 mouseleave 事件

```
function imoveis(){
    var $imoveis = $('.imoveis');

    $imoveis.mouseover(function(){
        var index = $(this).index();
    });

    $imoveis.mouseleave(function(){
        var index = $(this).index();

        $imoveis.eq(index).css({
            background: 'red'
        });
     });
} 
```

[演示](http://jsfiddle.net/t5YEC/9/)

[文档](http://api.jquery.com/mouseleave/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:52:09.673

试试这个伙伴

```
 $(document).ready(function(){
          $('.imoveis').hover(function () {
              var index = $(this).index();
          }, function () {
            var index = $(this).index();
                $('.imoveis').eq(index).css({background: 'red'});

          });    
      }); 
```

在这里演示：http: [//jsfiddle.net/QZAXW/](http://jsfiddle.net/QZAXW/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:53:26.487

你可以这样做：

**Javascript**

```
$(document).ready(function() {

    $('.imoveis').on('mouseleave', function() {
        $(this).css({
            background: 'red'
        });
    });

}); 
```

**[演示](http://jsfiddle.net/t5YEC/10/)**

尽管使用一些 css 和这样的类来控制背景颜色可能会更好：

**CSS**

```
.imoveis.red {
    background: #cc0000;
} 
```

**Javascript**

```
$(document).ready(function() {

    $('.imoveis').on('mouseenter', function() {
        $(this).removeClass('red');
    });
    $('.imoveis').on('mouseleave', function() {
        $(this).addClass('red');
    });

}); 
```

**[演示](http://jsfiddle.net/t5YEC/12/)**

# opensocial - Apache Rave 0.1.8 演示问题：未显示社交小工具

> ID：13951763
> 
> 赞同：1
> 
> 时间：2012-12-19T11:47:08.717
> 
> 标签：opensocial, apache-shindig

我被要求研究 Apache Rave，以创建一个显示我们自己的小部件和一些免费社交小部件（新闻等）的门户。

[我安装了 JDK 1.6 并从http://rave.apache.org/downloads.html](http://rave.apache.org/downloads.html)下载了 Rave 0.1.8 二进制 zip 文件，但无法让它在 Windows 7 上运行。

我可以登录到门户网站（在 localhost:8080 上），但开放的社交小工具不会在 IE8 或 Firefox 10 中显示，并且所有用户都拒绝了 504 连接。我需要在某处配置代理吗？（我在通过代理连接到互联网的公司网络上。）。

我发现执行请求非常慢。

此外，在 IE8 中，当我尝试重命名“主”选项卡和/或更改其布局时，我收到一个与 youtube 小部件有关的 javascript 错误（Object expected ifr）。我删除了 youtube 小部件，但仍然收到错误消息。重命名和更改布局在 Firefox 中有效。

最后，我对此很陌生，并对所有架构感到困惑。我知道 tomcat 是 web 服务器，但我不知道 Rave 和 Shindig 和 Spring 是什么，也不知道 Maven，甚至是否需要 Maven（我安装它是因为 Rave 文档说，但我认为演示是自包含的） . 我很难找到任何可以清楚地解释一切的资源，Apache 文档在某些地方是矛盾的，而且似乎并不针对初学者。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:50:30.113

我将尝试在下面解决您的所有问题。需要注意的一件事是，Rave，与大多数 Apache 项目一样，都有一个由开发人员监控的用户列表。将来，您应该可以[很容易地](http://rave.apache.org/mailing-lists.html)在那里找到帮助。找出文档中的漏洞/问题在哪里对团队也很有帮助，以便可以为每个人改进。

马上要注意的一件事，演示二进制文件就是这样；演示。建议您在自己的 Tomcat 容器（可以在不同的主机上）中运行战争以进行生产部署。

如果您使用非透明代理，则需要按照以下步骤配置 JVM 以使用它：

1.  打开命令窗口
2.  导航到您提取 Rave 的目录
3.  执行`SET CATALINA_OPTS=-Dhttp.proxyHost=yourproxy.yourdomain.tld -Dhttp.proxyPort=yourproxyport -Dhttp.nonProxyHosts="localhost|127.0.0.1|yourdomain.tld"`
4.  通过执行启动 Rave`.\bin\startup.bat`

通常，我在 Linux 或 OSX 上运行演示，但我只是在 Windows 中运行它，发现您可能需要删除 .\temp* 才能再次运行它。

这应该设置代理并允许 Shindig 呈现小工具。

至于慢，演示门户使用的是基于文件的 h2 版本。这是一个非常慢的数据库，只能用于评估目的。Rave 可以配置为针对大多数其他 SQL 数据库运行，例如[MS SQL Server、MySQL 和 Oracle](http://rave.apache.org/documentation/configure-database.html)。

MongoDB 模块也应该在 0.19 发布之前就位。

至于重命名问题，我无法重现它。这可能与 OpenSocial Gadgets 未能呈现有关。

架构的一个简单解释是 Rave 是一个通用的小部件引擎，它被打包为一个战争 (portal.war)。这场战争委托给各种小部件提供者来呈现小部件。该项目直接支持的两个提供程序是通过 Apache Shindig 的 OpenSocial，Rave 对其进行了轻微定制并打包为单独的战争 (rave-shindig.war)，以及通过 Apache Wookie 在其原始战争 (wookie.war) 中的 W3C 小部件。这些战争中的每一个都在 Servlet 容器中运行，例如 Apache Tomcat。

Spring 是Rave 使用的主要[控制反转机制。](http://en.wikipedia.org/wiki/Inversion_of_control)Rave 项目在 rave-shindig 项目中还包含一个 Spring/Guice 桥，以简化使用 Rave 版本覆盖 Shindig bean，以便开发人员可以在门户网站和 Shindig 之间共享通用存储库定义。您可以开发实现各种 Rave 接口的 Spring bean，并通过创建自己的[应用程序上下文](http://rave.apache.org/documentation/custom-app-context.html)并将它们标记为主要来注入它们。

该项目建议下载 Maven，因为大多数 Rave 用户最终会定制它的某些方面。一些基本的定制方法可以在[文档](http://rave.apache.org/documentation/index.html)中找到；这需要改进。

希望这可以帮助。

# javascript - getJson 使用 jQuery 加载特定数据不起作用

> ID：13951767
> 
> 赞同：0
> 
> 时间：2012-12-19T11:47:18.737
> 
> 标签：javascript, jquery, json

我有这个简短的 json 文件：

```
{"daten":[
    {
        "url":"destille",
        "lang":"de",
        "ausblenden": {
            "parts":"farben, sonstiges, material"
        }
    },
    {
        "url":"schnaps",
        "lang":"de",
        "ausblenden": {
            "parts":"farben, sonstiges"
        }
    }
]} 
```

而且我只想加载列出数据的特定部分，例如“schnaps”部分。

```
 $.getJSON('data.json', function(data) {
        var output="<ul>";
        var uri = "schnaps";
        output+="<li>" + data.daten[uri].url + " " + data.daten[uri].ausblenden.parts+"</li>";

        output+="</ul>";
        document.getElementById("placeholder").innerHTML=output;
  }); 
```

我不知道如何得到这个。加载整个数据没问题……但只有一部分似乎很棘手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:51:05.353

如果您想获取其 url 参数值为“schnaps”的对象，您可以这样做：

```
$.getJSON('data.json', function(data) {
  var objects = data.daten.filter(function(v){return v.url=="schnaps"});
  if (objects.length==0) return; // no object has url schnaps
  var obj = objects[0]; 
  output+="<li>" + obj.url + ... + obj.ausblenden + ...
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:51:32.663

在这部分：

```
data.daten[uri].url 
```

`daten`指的是一个数组，并且`uri`（设置为“schnaps”）必须是该数组中的一个键，但它不是 - “schnaps”是该数组**内**`url`对象的属性。

 **您需要遍历或以其他方式过滤数组并获取其中包含`url === "schnaps"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:50:58.740

问题是你不能通过做来选择你想要的元素`data.daten["schnaps"]`。该数据位于 JSON 数组中，因此您应该改为执行此操作`data.daten[1].url`，这将检索您想要的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T11:50:38.373

In your `JSON` `daten`is an`array`但`schnaps`它不是它的索引。您应该使用数字对其进行索引。

您是否可以将数据转换为：

```
{
    "daten": {
        "destille": {
            "lang":"de",
            "ausblenden": {
                "parts":"farben, sonstiges, material"
            }
        },
        "schnaps": {
            "lang":"de",
            "ausblenden": {
                "parts":"farben, sonstiges"
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T11:50:43.263

您的数组不是关联的。你应该像这样迭代它：data.daten[0].url this，因为将字符串传递给索引不会让你到任何地方。您还可以尝试搜索其他数组搜索机制，这些机制可以通过字符串搜索为您提供所需的功能。**

# database - Magento 网站迁移秘诀 + SSL

> ID：13951772
> 
> 赞同：0
> 
> 时间：2012-12-19T11:47:35.443
> 
> 标签：database, magento, import

我使用下面总结的配方成功地将 Magento 站点从一个域导入到另一个域。它似乎有效，但我确定我是否遗漏了我以后可能会后悔的任何重要内容。

还有一个站点启用了无法关闭的 SSL 和代理服务器。需要哪些额外的步骤来调整这个配方来建立一个 SSL 站点（即：通过 sql 和/其他编辑 xml 文件更改 Magento 的“安全”和“不安全”部分？）

*   导入数据库mysql -u user -p -h localhost shop < /var/www/myshop/shopmsc_sql_dump.sql;

*   导入整个网站 - 所有文本文件到 /shop

*   重新指向 URLS
    UPDATE core_config_data SET value='http://www.shop.com/' WHERE path='web/unsecure/base_url' ; UPDATE core_config_data SET value='http://www.shopc.com/' WHERE path='web/secure/base_url';

*   清理 /var/cache 和 var/session

*   打开 Magento 缓存

*   修复 /app/etc/local.xml - 数据库的东西

    1

# android - 进度条运行时冻结后台活动

> ID：13951776
> 
> 赞同：0
> 
> 时间：2012-12-19T11:48:02.527
> 
> 标签：android

我的应用程序面临一个问题。实际上，有一个活动，我将图像发送到服务器。在 xml 布局文件中，我使用进度条视图。当图像加载到服务器时，进度条开始加载，当图像加载到服务器时关闭工作完成。一切正常。问题是当进度条处于运行状态时，后台活动仍然处于活动状态。我想在进度条处于运行状态时冻结后台活动。代码如下。

```
postPic.setOnClickListener(new View.OnClickListener() {

        @Override 
        public void onClick(View v){

        mProgressBar.setVisibility(View.VISIBLE);

                new Thread(){

                @Override
                public void run() {

                //here the code to post image to server 

                    handler.sendEmptyMessage(0);

                }

            }.start();
            }

        }

        private  Handler handler = new Handler() {
             @Override
             public void handleMessage(Message msg) {
                 try {

                     mProgressBar.setVisibility(View.GONE);

                        }

                      else  if(messagePostingItems.equalsIgnoreCase("Success")){

                        startActivity(new Intent(PostPhoto.this,PostPicDialog.class));

                     }
            };
    }); 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:54:31.663

最后我做到了。那些面临同样问题的人，我的解决方案一定会帮助他们。只需在您的活动类中创建 Dialog 类的对象。

```
Dialog mdialog=new Dialog(this);

    mdialog.requestWindowFeature(Window.FEATURE_NO_TITLE);

    mdialog.setContentView(R.layout.custom_progress_dialog);
    mdialog.getWindow ().setBackgroundDrawableResource (android.R.color.transparent);

    mdialog.show(); 
```

custom_progress_dialog 如下：-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

<ProgressBar
    android:id="@+id/pbCustomDialog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="visible" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T12:02:05.177

如果您想在做其他事情的同时“冻结”活动，则适当的模式是使用 AlertDialog。将进度条放在对话框上，每当操作完成时，关闭对话框。

但请记住，用户可以随时单击主页按钮，这会让您更加头疼。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-19T12:02:23.870

你不能。

“冻结后台活动”是 UI 线程，如果您尝试停止 UI 线程，您将导致 ANR（Activity Not Responding）并且用户可以选择强制关闭您的应用程序。

但是，如果您想停止您所说的“仍在移动”，那么您应该在 onClick 方法中执行此操作，同时显示对话框并关闭它。一个简单的解决方案是启动一个包含进度对话框和白色背景的新 Activity。然后活动生命周期为您完成大部分工作。

或者将您的 ProgressBar 放在一个对话框中，即[ProgressDialog](http://developer.android.com/reference/android/app/ProgressDialog.html)并将其显示给用户。这称为模态对话框。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T12:08:23.893

使用 AsyncTask..... 例如......

```
private class abc extends AsyncTask<Void, Void, String> {

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
                    //start the progress dialog
    }

    protected void onPostExecute(String s) {
        //dismiss the dialog
    }

    @Override
    protected String doInBackground(Void... params) {
        // TODO Auto-generated method stub
        //send image to server code
        return null;
    }
} 
```

然后在你的 onCreate() 方法调用中

```
new abc().execute(); 
```

# c# - dBase .DBF 空布尔值

> ID：13951777
> 
> 赞同：1
> 
> 时间：2012-12-19T11:48:07.187
> 
> 标签：c#, .net, odbc, connection-string, dbf

我有一个奇怪的问题：我的 dbf 文件的行带有空布尔字段。当我尝试从 dbf 文件中读取此行时，ODBC`true`为该字段返回，但我想要 get`null`或`false`.

我在两个操作系统中对此进行了测试：

*   在 Windows 7 64 位空布尔中选择返回我`false`
*   在 Windows 2008 Server 中，选择中的 null 布尔值返回我`true`

问题出在哪里？如何设置我的连接字符串以在所有系统中`false`或`null`当布尔字段具有`null`值时勒索返回？

我正在使用带有标准 ODBC 连接器的 .NET。我的连接字符串是：`"Driver={Driver do Microsoft dBase (*.dbf)};Data Source=C:\dest_dir"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:30:14.847

I would start by asking. Is is really a dBASE file or Visual FoxPro based (.dbf) file. If Foxpro, I would start with the VFP OleDB provider instead located [here...](http://www.microsoft.com/en-us/download/details.aspx?id=14839)

# android - 如何将项目添加到 SQLite 数据库？

> ID：13951781
> 
> 赞同：0
> 
> 时间：2012-12-19T11:48:13.960
> 
> 标签：android, sqlite, insert

我正在尝试制作我的第一个真正的应用程序，它会在一秒钟内变成地狱。首先，我试图通过制作一些教程来理解架构，但是不同的教程对数据库的说法不同，我有点困惑。我想向您说明我的实际位置：

**我的数据库助手：**

```
public class MySQLiteHelper extends SQLiteOpenHelper {

  public static final String TABLE_CATEGORIE = "categorie";
  public static final String TABLE_SONDAGGI = "sondaggi";
  public static final String TABLE_TESTORISPOSTE = "testo_risposte";
  public static final String TABLE_RISPOSTE = "risposte";    
  public static final String COLUMN_ID = "_id";
  public static final String COLUMN_NOME = "nome";
  public static final String COLUMN_PREF = "preferita"; 
  public static final String COLUMN_CATID = "catid";
  public static final String COLUMN_DOMANDA = "domanda";
  public static final String COLUMN_SONDID = "sondid";
  public static final String COLUMN_RISPOSTA = "risposta";
  public static final String COLUMN_RISID = "risid";
  public static final String COLUMN_SELEZIONATA = "selezionata";

  private static final String DATABASE_NAME = "democracy.db";
  private static final int DATABASE_VERSION = 2;

  // Database creation sql statement

  private static final String DATABASE_CREATE_CATEGORIE = "create table "
      + TABLE_CATEGORIE + "(" + COLUMN_ID
      + " integer primary key autoincrement, " + COLUMN_PREF
      + " integer null, " + COLUMN_NOME
      + " text not null);";

  private static final String DATABASE_CREATE_SONDAGGI = "create table "
          + TABLE_SONDAGGI + "(" + COLUMN_ID
          + " integer primary key autoincrement, " + COLUMN_CATID
          + " integer not null, "+ COLUMN_DOMANDA +" text not null);";

  private static final String DATABASE_CREATE_TESTORISPOSTE = "create table "
          + TABLE_TESTORISPOSTE + "(" + COLUMN_ID
          + " integer primary key autoincrement, " + COLUMN_SONDID
          + " integer not null, "+ COLUMN_SELEZIONATA
          + " integer, "+ COLUMN_RISPOSTA +" text not null);";

  public MySQLiteHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
  }

  @Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE_CATEGORIE);
    database.execSQL(DATABASE_CREATE_SONDAGGI);
    database.execSQL(DATABASE_CREATE_TESTORISPOSTE);

  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MySQLiteHelper.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_CATEGORIE);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_SONDAGGI);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_TESTORISPOSTE);

    onCreate(db);
  }

} 
```

**我得到的表类之一：**

```
public class categorie {
      private long id;
      private String nome;
      private long preferita;

      public long getId() {
        return id;
      }

      public void setId(long id) {
        this.id = id;
      }

      public String getNome() {
        return nome;
      }

      public void setNome(String nome) {
        this.nome = nome;
      }

      public long getPreferita() {
        return preferita;
    }

    public void setPreferita(long preferita) {
        this.preferita = preferita;
    }

    // Will be used by the ArrayAdapter in the ListView
      @Override
      public String toString() {
        return nome;
      }
    } 
```

**数据源：**

```
public class pollDataSource {
    // Database fields
      private SQLiteDatabase database;
      private MySQLiteHelper dbHelper;
      private String[] allCategorieColumns = { MySQLiteHelper.COLUMN_ID,
          MySQLiteHelper.COLUMN_PREF, MySQLiteHelper.COLUMN_NOME };   
      private String[] allSondaggiColumns = { MySQLiteHelper.COLUMN_ID,
              MySQLiteHelper.COLUMN_CATID, MySQLiteHelper.COLUMN_DOMANDA };   
      private String[] allRisposteColumns = { MySQLiteHelper.COLUMN_ID, 
              MySQLiteHelper.COLUMN_SONDID, MySQLiteHelper.COLUMN_RISPOSTA, 
              MySQLiteHelper.COLUMN_SELEZIONATA };

      public pollDataSource(Context context) {
            dbHelper = new MySQLiteHelper(context);
          }

      public void open() throws SQLException {
            database = dbHelper.getWritableDatabase();
          }

      public void close() {
            dbHelper.close();
          }

      public categorie createCategoria(String categoria) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_NOME, categoria);
            values.put(MySQLiteHelper.COLUMN_PREF, 0);
            long insertId = database.insert(MySQLiteHelper.TABLE_CATEGORIE, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            categorie newCategoria = cursorToCategorie(cursor);
            cursor.close();
            return newCategoria;
          } 

      public void deleteCategoria(categorie categoria) {
            long id = categoria.getId();
            System.out.println("Categoria cancellata, id: " + id);
            database.delete(MySQLiteHelper.TABLE_CATEGORIE, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          }

      public sondaggi createSondaggio(String domanda, int catid) {
            ContentValues values = new ContentValues();
            values.put(MySQLiteHelper.COLUMN_DOMANDA, domanda);
            values.put(MySQLiteHelper.COLUMN_CATID, catid);
            long insertId = database.insert(MySQLiteHelper.TABLE_SONDAGGI, null,
                values);
            Cursor cursor = database.query(MySQLiteHelper.TABLE_SONDAGGI,
                allSondaggiColumns, MySQLiteHelper.COLUMN_ID + " = " + insertId, null,
                null, null, null);
            cursor.moveToFirst();
            sondaggi newSondaggio = cursorToSondaggi(cursor);
            cursor.close();
            return newSondaggio;
          }

      public void deleteSondaggio(sondaggi sondaggio) {
            long id = sondaggio.getId();
            System.out.println("Sondaggio cancellato, id: " + id);
            database.delete(MySQLiteHelper.TABLE_SONDAGGI, MySQLiteHelper.COLUMN_ID
                + " = " + id, null);
          } 

      public Cursor getAllCategorie() {
            List<categorie> categorie = new ArrayList<categorie>();

            Cursor cursor = database.query(MySQLiteHelper.TABLE_CATEGORIE,
                allCategorieColumns, null, null, null, null, null);

            cursor.moveToFirst();
            while (!cursor.isAfterLast()) {
              categorie categoria = cursorToCategorie(cursor);
              categorie.add(categoria);
              cursor.moveToNext();
            }
            // Make sure to close the cursor
           // cursor.close();
            return cursor;
          }

      private categorie cursorToCategorie(Cursor cursor) {
          categorie categorie = new categorie();
          categorie.setId(cursor.getLong(0));
          categorie.setPreferita(cursor.getLong(1));
          categorie.setNome(cursor.getString(2));
            return categorie;
          }
      private sondaggi cursorToSondaggi(Cursor cursor) {
          sondaggi sondaggi = new sondaggi();
          sondaggi.setId(cursor.getLong(0));
          sondaggi.setDomanda(cursor.getString(1));
          sondaggi.setCatid(cursor.getLong(2));
          return sondaggi;
          }

} 
```

**最后，主要活动：**

```
public class MainActivity extends ListActivity {
     private pollDataSource datasource;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        datasource = new pollDataSource(this);
        datasource.open();

        Cursor values = datasource.getAllCategorie();

        String[] categorieColumns =
            {
                MySQLiteHelper.COLUMN_NOME   // Contract class constant containing the word column name

            };

            int[] mWordListItems = { R.id.categoria_label };

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(
                getApplicationContext(),               // The application's Context object
                R.layout.single_list_item,             // A layout in XML for one row in the ListView
                values,                                // The result from the query
                categorieColumns,                      // A string array of column names in the cursor
                mWordListItems,                        // An integer array of view IDs in the row layout
                0);                                    // Flags (usually none are needed)

    // Sets the adapter for the ListView
        setListAdapter(adapter);
    }

       // Will be called via the onClick attribute
      // of the buttons in main.xml

      public void onClick(View view) {

        switch (view.getId()) {
        case R.id.add:

          break;

        }

      }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

我实际上是在尝试了解在何处以及如何添加方法以将内容添加到我的类别表中...我想我应该创建一个“插入”方法，或者我不得不调用类别类并使用 setNome .. .但我真的很困惑......谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:56:04.097

你可以用很多不同的方式做到这一点。这是一个：

助手类：

```
 new Database(getWriteableDatabase()).save(someCategorie); 
```

SQL 常量：

```
public static final String TABLE_NAME = "Categorie"

public static final String SAVE = "INSERT INTO "+ TABLE_NAME +
            " VALUES (NULL, ?, ?);"; 
```

数据库类：

```
public Database(SQLiteDatabase database) {
        this.database = database;
    }

public void save(Categorie categorie) {
        SQLiteStatement statement = database.compileStatement(SAVE);

        statement.bindString(1, categorie.getSomething());
        statement.bindLong(2, categorie.getSomethingElse());

        statement.execute();

        statement.close();
    } 
```

这是另一个：

使用库[https://github.com/novoda/SQLiteProvider](https://github.com/novoda/SQLiteProvider)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:05:15.857

[这些](http://www.youtube.com/watch?v=S3Z4e7KgNdU&list=PL2F07DBCDCC01493A)是帮助我学习的教程，但您可能需要返回一两个视频。本质上，您可以将要插入的值添加到内容值中，这些值将类别名称作为第一个参数，将值作为第二个参数。

# android - Android NDK：无法使用任何示例/教程

> ID：13951782
> 
> 赞同：0
> 
> 时间：2012-12-19T11:48:14.720
> 
> 标签：android, android-ndk

好的，我知道网上有很多关于 Android NDK 的教程，但我还没有找到一个有效的。我总是遇到一些我找不到任何有效解决方案的问题——通常是在尝试运行 javah 来创建头文件时。

那么，有没有人有一个关于如何创建一个简单的测试项目的教程的链接，你可以在其中创建 ac 头文件和源文件，从主要活动（或任何其他 java 类）调用本机代码，你知道这些工作和不工作包含重要的过时信息？然后能够在我遇到问题时（不是如果）帮助我，而且这些说明根本不起作用？

只要有人可以帮助我找出我做错了什么，它可能是我尝试过但无法开始工作的一种。我通常从示例中复制所有内容，包括文件位置、包名等，但我还没有让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:55:23.677

检查这个

[http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/](http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/)

和

[http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/)

两者都对我有用。

您可以随时查看 ndk 附带的示例（http://developer.android.com/tools/sdk/ndk/index.html#Downloads）

# iphone - iPhone App Store 版本与模拟器版本不同：本地化

> ID：13951784
> 
> 赞同：1
> 
> 时间：2012-12-19T11:48:18.440
> 
> 标签：iphone, ios, xcode, localization

我向 App Store 提交了一个新应用程序。我的 de.lproj 目录中有一个 Localizable.strings 文件，我的 en.lproj 目录中有一个。德语文件设置为德语，英语文件设置为英语。

发布后，英文版完美运行，但在德文版中，字符串没有被替换。

在这种情况下有哪些典型的失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T07:43:13.430

在我的脑海中，我想到了三件事：

首先，就像 Clafou 提到的，您可能正在处理 XCode 陈旧资源错误。有时，当 XCode 构建应用程序包时，它有时会包含较旧的资源。因此，当您更改或添加资源时，Xcode 仍然不包含它们或包含旧版本。要验证这一点，ctrl+单击您提交的 .app 文件并查看是否包含 de.lproj 文件，并查看其内容（将其拖到 TextView 上）以查看它是否是最新的。如果你提交了一个.ipa文件，我想你可以用winrar之类的解压。并始终在构建之前单击“清理”。

其次，你是如何测试这个的？如果您打开该应用程序看到英语，然后将您的 iPhone 设置更改为德语，然后重新打开该应用程序，该应用程序可能仍会打开，然后语言不会改变。如果是这样，您应该首先“真正”关闭您的应用程序。双击主页按钮以获取打开的应用程序列表，点击并按住您的应用程序并将其从该列表中删除以强制关闭它。

最后，您说它与模拟器不同。在将应用程序发送到应用商店之前，您是否在真实设备上对其进行了测试？与真实设备相比，模拟器在某些方面的行为可能有所不同。在这种情况下可能无关紧要，但仍然......

# jakarta-ee - RestEasy Jettison JAXB/JSon 输出问题

> ID：13951788
> 
> 赞同：0
> 
> 时间：2012-12-19T11:48:26.987
> 
> 标签：jakarta-ee, jaxb, resteasy, jettison, badgerfish

我正在使用 JBoss AS 7 和 Resteasy 开发 Java EE webapp。我想使用 Jettison JAXB/JSon Provider 与 Rest Interface 进行通信。

作为演示，我实现了以下 JAXB 注释类：

```
@XmlRootElement(name = "test")
@XmlAccessorType(XmlAccessType.FIELD)
public class TestJson
{
    @XmlElement
    public int      id      = 1;

    @XmlElement
    public String   name    = "hello";

    public TestJson()
    {}

} 
```

为了获取对象，我实现了以下 Web 服务：

```
@BadgerFish
@GET
@Produces(MediaType.APPLICATION_JSON)
public TestJson getJSON()
{

    return new TestJson();

} 
```

现在，如果我执行 GET 请求，我会得到以下响应：

```
!!com.example.TestJson {id: 1, name: hello} 
```

我会期待

```
{"id":1, "name":"hello"} 
```

我在这里做错了吗？（解组 JSON 对象就像一个魅力）

感谢您的任何提示。

# arrays - 来自字符串数组的所有排列的最长运行序列

> ID：13951791
> 
> 赞同：5
> 
> 时间：2012-12-19T11:48:39.713
> 
> 标签：arrays, string, algorithm, data-structures, permutation

从最近对亚马逊的采访中，我发现了以下问题。我想不出一个有效的方法来解决它。
问题如下：
给定一个字符串数组，您需要在数组中字符串的所有可能排列中找到一个字符的最长运行序列。

**输入：**
ab
ba
aac
**输出：**
a,3

注意：从输入和输出集合来看，我认为各个字符串的排列是不用做的。

如果有人可以提供帮助，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:18:01.127

可爱的问题。如此多的极端案例。我猜这个面试问题的重点是看看你提出了多少极端案例。

我希望我没有错过任何一个。

字符序列可以通过两种方式解决这个问题：

1）它是一个内部字符序列（例如。`adddddddddddddddddb`）

2) 它是一个后缀、仅由该字符组成的整个字符串集合和一个前缀的连接。在这种情况下，任何字符串都不能使用超过一次，包括一个字符是同一字符串的后缀*和前缀的情况。*（为避免重复同质字符串，后缀和前缀必须严格；即不是整个字符串）。

案例 1 很简单。我们只需记住单个字符和序列长度，以及当前字符和序列长度。正如我们在字符串中读取的那样，如果当前字符/序列长度大于最大值，我们将替换最大值。我们不必担心它与案例 2 的计算冲突，因为它不会影响结果。

案例 2 的工作量更大。对于每个字符，我们需要保留一些数据。如果字母表很小，我们可以使用固定大小的数组，字母表中每个字符一个条目，或者我们可以使用字符哈希表。两者都是`O(1)`平均水平；由于我们要处理的字符数不能大于所有字符串中的字符总数，因此可以认为哈希表的大小要求为`O(N)`. （实际上，它受字母大小的限制，所以就像固定大小的数组一样，存储需求在技术上是有限制的，`O(1)`但在 Unicode 的情况下，例如，常数相当大。）

现在，我们需要什么数据？只是重复单个字符的字符串很容易；我们需要这些字符串的总长度。因此，每次我们找到这样的字符串时，我们都可以将其长度添加到每个字符数据中条目的总长度成员中。

对于（严格的）后缀和前缀，我们似乎只需要为每个后缀和前缀维护一个最大长度。但是，如果我们遇到一个字符串，其前缀和后缀序列是相同的字符，并且这两个序列都比我们之前处理过的序列长，该怎么办？我们不能将字符串同时用作后缀和前缀。幸运的是，有一个简单的答案：我们保留三个值：maximum_prefix、maximum_suffix、maximum_sum。如果我们在读取一个单词后更新表格，结果发现同一个字符既是前缀又是后缀，我们将三个值更新如下：

```
maximum_sum = max(maximum_sum, 
                  prefix_length + maximum_suffix,
                  suffix_length + maximum_prefix)
maximum_prefix = max(maximum_prefix, prefix_length)
maximum_suffix = max(maximum_suffix, suffix_length) 
```

请注意，如果 prefix_length 或 suffix_length 为 0，则上述伪代码可以正常工作（如果有点浪费）。

因此，每个字符总共有四个值：`homogenous_length, maximum_sum, maximum_prefix, maximum_suffix`. 在扫描结束时，我们需要找到`homogenous_length + maximum_sum`最大的字符；我们可以通过简单地扫描字符表来做到这一点。

总处理时间是`O(1)`每个字符（对于初始扫描），即`O(N)`（其中`N`是问题中的字符总数，加上`O(max(N, |A|))`字符表的最终扫描（`|A|`是字母表的大小）；换句话说，`O(N)`.空间要求如上所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:49:19.293

```
 #include <iostream>

using namespace std;

class alphabet
{
      string str;
      int chars[26];

public:
       alphabet()
       {
                 for(int i=0; i < 26 ; i++)
                         chars[i] = 0;

       }

       void initialize(string s)
       {
            str = s;
            for(int pos=0 ; pos < s.length(); pos++)
                         chars[s[pos]-'a']++;
       }

       int getCount(int i)
       {
           return chars[i];
       }
};

int main()
{
    int n=3;
    alphabet *arr = new alphabet[n];
    arr[0].initialize("varun");
    arr[1].initialize("ritl");
    arr[2].initialize("hello");
    int Max =0;
    char MaxChar = ' ';
    for(int i=0; i<n-1 ; i++)
    {
            for(int j=0; j<26; j++)
            {
                    int m = arr[i].getCount(j)+ arr[i+1].getCount(j);
                    if(m > Max)
                    {
                         Max = m;
                         MaxChar = char('a' + j);
                    }
            }
    }
    cout<<"Max Char = "<<MaxChar<<" "<<Max<<" times";
    system("pause");    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T16:42:49.717

在一次采访中，我本可以想出解决这个问题的基本机制，但我无法在白板上写出完整的、无错误的解决方案。调试器拐杖。

无论如何，这是我在 C# 中的解决方案。

1.) 我定义了集合。

```
var set = new List<string>() { "ab", "ba", "aac" }; 
```

2.）我组装了一个通用方法来递归组装所有排列。

```
private static List<List<T>> GetPermutations<T>(List<T> values)
{
    if (values.Count <= 1) return new List<List<T>>() { values };

    var results = new List<List<T>>();

    var perms = GetPermutations(values.Skip(1).ToList());

    foreach (var perm in perms)
    {
        foreach (int i in Enumerable.Range(0, perm.Count + 1))
        {
            List<T> list = new List<T>();

            list.AddRange(perm.Take(i));
            list.Add(values[0]);
            list.AddRange(perm.Skip(i));

            results.Add(list);
        }
    }

    return results;
} 
```

3.) 我找到了集合的所有排列。

```
var perms = GetPermutations<string>(set); 
```

4.) 我定义了一种在单个字符串中查找最长运行序列的方法。

```
private static string LongestRunningSequence(string s)
{
    if (string.IsNullOrEmpty(s)) return null;
    if (s.Length == 1) return s;

    var seq = new Dictionary<char, int>();

    char prev = s[0];
    int counter = 0;

    foreach (char cur in s)
    {
        if (cur == prev) // chars match
        {
            ++counter; // increment counter
        }
        else // chars don't match
        {
            prev = cur; // store new char
            counter = 1; // reset the counter
        }

        // store the higher number of characters in the sequence
        if (!seq.ContainsKey(prev)) seq.Add(prev, counter);
        else if (seq[prev] < counter) seq[cur] = counter;
    }

    char key = seq.Keys.First();
    foreach (var kvp in seq)
    {
        if (kvp.Value > seq[key]) key = kvp.Key;
    }

    return string.Join("", Enumerable.Range(0, seq[key]).Select(e => key));
} 
```

5.) 我定义了一个在字符串列表中找到最长运行序列的方法，利用了之前对单个字符串执行此操作的方法。

```
private static string LongestRunningSequence(List<string> strings)
{
    string longest = String.Empty;
    foreach (var str in strings)
    {
        var locallongest = LongestRunningSequence(str);
        if (locallongest.Length > longest.Length) longest = locallongest;
    }

    return longest;
} 
```

6.) 我将每个计算的排列表示为单个字符串的列表。

```
var strings = perms.Select(e => string.Join("", e)).ToList(); 
```

7.) 我将此列表传递给较早的方法，该方法在字符串列表中找到最长的运行序列。

```
LongestRunningSequence(strings); // returns aaa 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-07T07:36:21.590

第1步：需要维护4个长度为26的表--第一个跟踪字符串中最长前缀的长度--第二个跟踪字符串中最长后缀的长度--第三个跟踪完全由给定字符组成的字符串的总长度 --Fourth 跟踪中间最长的字符

第 2 步： -- 对 0 到 26 运行循环并添加 first[i]+second[i]+third[i] 并将它们存储在 sum[i] 中 --找到 sum[i] 和第四个表中的最大元素。--index 是字母（0 是 A），最大元素是长度

```
#include <stdio.h>
#include <string.h>
#include <ctype.h>

int pre[26],su[26],single[26],middle[26],sum[26];
int getlength(char str[][10])
{
int i,j,n=3,counter=0,max=-1,index;
char c,p;
for(j=0;j<n;j++)
{
 for(i=0;i<strlen(str[j]);i++)
{
 if(i==0) 
{
  c=str[j][i];
  counter++;
  continue;
  }
    else if(i==strlen(str[j])-1&&c == str[j][i])
  {
    counter =0;
    break;
   }
  else
  {
    if(c == str[j][i])
    counter++;
    else 
     break;
   }

  }
    if(pre[toupper(c)-65]<counter)
      pre[toupper(c)-65]=counter;
      counter=0;
  }
for(j=0;j<n;j++)
{
  for(i=strlen(str[j])-1;i>=0;i--)
  {
    if(i==strlen(str[j])-1)
    {
     c=str[j][i];
      counter++;
      continue;
     }
   else if(i==0&&c == str[j][i])
   {
     counter =0;
     break;
   }
   else
   {
     if(c == str[j][i])
     counter++;
   else
    break;
   }

} 
if(su[toupper(c)-65]<counter)
 su[toupper(c)-65]=counter;
 counter=0;
 }

for(j=0;j<n;j++)
{
for(i=strlen(str[j])-1;i>=0;i--)
  {
  if(i==strlen(str[j])-1)
  {
  c=str[j][i];
  counter++;
  continue;
  }
 else
{
 if(c == str[j][i])
 counter++;
 else
 {
counter=0;   
 break;
 }
}

 }
    if(single[toupper(c)-65]<counter)
      single[toupper(c)-65]=counter;
      counter=0;
}
counter=0;
for(j=0;j<n;j++)
{
  for(i=1;i<strlen(str[j])-1;i++)
{
if(i==1)
 {
   c=str[j][i];

   counter++;
 }
  else
 {
   if(c == str[j][i])
 {

   counter++;
  }
 else
 {
 if(middle[toupper(c)-65]<counter)
   middle[toupper(c)-65]=counter;
   counter=1;
   c=str[j][i];
  }

} 
}
 counter=0;
}

 for(i=0;i<26;i++)
{
  sum[i]=pre[i]+su[i]+single[i];
   if(sum[i]>max)
 {
   max=sum[i];
   index=i;
  }
}

for(i=0;i<26;i++)
{

if(middle[i]>max)
{
max=middle[i];
index=i;
}
  }
   printf("\n length %d index %d",max,index);

  }
void main()
{
char arr[3][10]={"bbbb","dccccccar","vaa"};
getlength(arr);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T11:55:27.757

您可以为此使用哈希图。最慢的算法是为每个字符串制作一个字符计数器的映射，然后找到最大值。

我也想知道更高级的算法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-19T21:23:22.330

这是我天真的 Ruby 实现。我将尝试解释我是如何推理和实施它的。

在 Ruby 中，字符串不是可枚举的，因此 Ruby 不能像 Python 那样直接枚举它。这样`str.chars.to_a`就解决了。它将字符串转换为字符数组。

我的计划是计算一个字符在每个字符串中出现的次数。`["ab", "ba", "ccc"]`会变成`[{"a"=>1, "b"=>1}, {"b"=>1, "a"=>1}, {"c"=>3}]`. 然后我会添加每对连续的哈希/字典的出现次数。在此示例中，它将导致`[{"a"=>2, "b"=>2}, {"b"=>1, "a"=>1, "c"=>3}]`. 这个哈希数组中的最大值将代表最长的运行序列。

问题是一遍又一遍地包含相同字符的字符串会使这个算法失效。我对此的解决方案是检查这些类型的字符串，然后如果该字符串包含任何此类字符，则将它们与以下字符串连接。这是在方法中实现`arr_of_chararr.each`的`max_running_sequence`。

成对加法是用`Hash#merge`一个块来实现的，除了数组中只有一个元素的特殊情况。

最后我扫描哈希数组的最大值。

```
class Sequence_tester
  def self.max_running_sequence(arr_of_chararr)
    reduced = []
    all_same_chars = []

    arr_of_chararr.each do |str|
      arr = str.chars.to_a
      if arr.all? {|c| c == arr.first}
        all_same_chars += arr
      else
        if !all_same_chars.empty?
          if arr.any? {|c| c == all_same_chars.first}
            arr += all_same_chars
          else
            reduced << count_char_occurrences(all_same_chars)
          end
        end
        reduced << count_char_occurrences(arr)
        all_same_chars.clear
      end
    end

    if !all_same_chars.empty?
      reduced << count_char_occurrences(all_same_chars)
    end

    max_seqs = reduced
    if reduced.length > 1
      max_seqs = reduced.each_cons(2).map do |pair|
        pair.first.merge(pair.last) {|key, oldval, newval| oldval + newval}
      end
    end

    longest_seq = max_seqs.map {|h| h.max_by {|kv| kv[1]} }.max_by {|a| a[1]}
  end

  def self.count_char_occurrences(arr)
    arr.each_with_object(Hash.new(0)) {|o, h| h[o] += 1}
  end
end

input = ["a", "b", "c"]
res = Sequence_tester.max_running_sequence(input)
puts "#{res.first},#{res.last}"
input = ["abc", "abb", "abc"]
res = Sequence_tester.max_running_sequence(input)
puts "#{res.first},#{res.last}"
input = ["ab", "ba", "ccc"]
res = Sequence_tester.max_running_sequence(input)
puts "#{res.first},#{res.last}"
input = ["ada", "dd", "dd", "eedd"]
res = Sequence_tester.max_running_sequence(input)
puts "#{res.first},#{res.last}" 
```

输出：
a,1
b,3
c,3
d,7

# asp.net - ASP.net 数据视图处于 outproc 会话状态

> ID：13951794
> 
> 赞同：1
> 
> 时间：2012-12-19T11:48:55.663
> 
> 标签：asp.net

在 asp.net 应用程序中，我们使用`InProc`会话状态，现在我们将其更改为`OutProc`（StateServer 或 SQLServer）。

在我们在会话中使用数据视图的页面中，它抛出错误“***无法序列化会话状态***。

在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。”，我不想更改所有文件。

如何解决错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:37:17.937

检查您放入会话中的所有对象，如果它们是可序列化对象或不是 MarshalByRef 对象。您的会话中至少有一个。如果您从会话中删除该项目，您将能够保存会话 OutProc。

# twig - 检查数组变量是否超过 x 值？

> ID：13951796
> 
> 赞同：1
> 
> 时间：2012-12-19T11:49:03.197
> 
> 标签：twig

我正在使用 twig 并想检查给定变量 xyz 是否有超过 x 个条目。这怎么可能？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T14:44:36.417

是的，长度过滤器是要走的路。

```
{% if xyz | length > x %}
   {% do something %}
{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:51:18.610

好的，我认为 xyz|length 会起作用。

# python - 鼻子中的 setup_module 和 setup_func

> ID：13951799
> 
> 赞同：1
> 
> 时间：2012-12-19T11:49:12.417
> 
> 标签：python, unit-testing, nose

我正在尝试用鼻子编写测试，但我需要一些关于模块和函数设置逻辑的帮助。

```
def setup_func():
    q_object = u'item'
    retry_in = 20

@with_setup(setup_func)
def test_set():
    assert q_object == u'item' 
```

当我运行鼻子测试时，我收到以下错误：

```
NameError: global name 'q_object' is not defined 
```

那么如何在我的测试函数中访问 q_object 呢？以及如何在特定测试类中从 setup_module() 访问对象？

我想出了 setup_module。

```
setup_module(module):
    module.item = u'item' 
```

比在模块中我简单地使用创建的对象 - 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-23T18:35:45.410

这段代码对我有用：

它融合了两全其美。用于保存范围和比默认 unittest2 框架更清晰的测试的类。

```
class TestSomething(object):

  def setup(self):
    self.q_object = u'item'

  def test_set(self):
    eq_(self.q_object, u'item') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:35:02.067

实际上，您正在尝试在测试中访问全局变量。因此，您的代码应该看起来像这样。

```
q_object = None

def setup_func():
    global q_object
    q_object = u'item'

@with_setup(setup_func)
def test_set():
    global q_object
    assert q_object == u'item' 
```

但是使用全局变量——真的不是一个好主意。尝试找到另一种可以避免它们的方法。

我认为测试课程非常适合您

```
class ExampleTest(unittest.TestCase):
    def setUp(self):
        self.q_object = u'item'

    def test_a(self):
        assert self.q_object == u'item' 
```

它仍然不完美（相同的全局变量解决方案），但至少包含在类中。

# pdf - 将 LibreOffice Calc Chart 导出为 PDF，没有边距和空白区域

> ID：13951800
> 
> 赞同：14
> 
> 时间：2012-12-19T11:49:18.660
> 
> 标签：pdf, graph, export, libreoffice

我的目标是以 PDF 格式导出 LibreOffice Calc 图表，以便以后与 LaTex 一起使用。

我做了一个 16 厘米宽和 9 厘米高的图形。我想获得一个没有边框和大量空白空间的 PDF。

所以我去了：文件->导出为PDF->**选择**...

但是，即使使用选择选项，我也会在 A4 页面的一小部分中得到一个带有边距和空白区域的图表......

![图片 1/3](../Images/bf0af42f56960cbf72724f8aa8373c5a.png)

![图片 2/3](../Images/84e02fae20222a170a50d269c1b20f2d.png)

![在此处输入图像描述](../Images/3f4eee7444cda74ed36ce16db22a1cd0.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T17:22:32.893

好问题，因为设置非常具有误导性。

据我所知，不可能像您希望的那样直接保存为 pdf。但是，有一些解决方法仍然可以让您在 LaTeX 文档中嵌入来自 Open/LibreOffice 的矢量图：

1.  选择并复制 (ctrl+c) 您的图表。
2.  打开 LibreOffice 绘图
3.  将 Calc 中的图表粘贴到 Draw 中
4.  选择图表，然后转到`File --> Export`，`EPS`从格式列表中选择，并确保选中该`selection`框：

![在此处输入图像描述](../Images/4881e9055023144b1b649fe4c4cfcc4c.png)

我没有尝试过其他格式，但是 EPS 应该可以很好地与您的 LaTeX 文档配合使用，或者您可以轻松地将 EPS 转换为 PDF 并插入它们。

这是尝试导出设置与 PDF（左 - 最终位于页面中心）和 EPS（右 - 仅导出图形）的并排比较。

![在此处输入图像描述](../Images/b6bf7a3f34587448edadebd2c231dc15.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-25T14:02:58.583

我遇到了同样的问题，在尝试了不同的方法后，我终于找到了一种简单而好方法。通过点击这个简单的命令行，只需使用**pdfcrop工具：**

```
 pdfcrop inputFile.pdf outputFile.pdf 
```

希望它会有所帮助！

# php - 作曲家包测试引导

> ID：13951804
> 
> 赞同：6
> 
> 时间：2012-12-19T11:49:25.483
> 
> 标签：php, composer-php, autoload, bootstrapping

我写了一个包，作为开发过程的一部分，我想在它上面运行单元测试。这基本上意味着我需要一个引导文件来为我的包注册自动加载器。

我查看的任何包都没有特定的引导文件，因此我不太了解开发人员如何测试他们自己的包。

这是我的目录结构

```
src
.CompanyName
..PackageName
...Class 1
...Class 2

tests
.Class1Test
.Class2Test

composer.json
phpunit.xml.dist 
```

现在，如果我`phpunit`在根目录中运行，我的所有测试都说`\\CompanyName\\PackageName\\Class1`没有找到。这是合法的，因为没有人将它们包括在内。所以问题是 -**我如何以及何时包含我的课程**。

* * *

查看[随机包](https://github.com/illuminate/cache/blob/master/phpunit.xml.dist)，我可以看到它们依赖`vendor/autoload.php`，但我没有这个供应商目录。我应该跑去`composer install`创建它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:55:39.530

嗯，我已经想到了答案。
Composer 提供了我可以使用的自己的自动加载器。

1.  运行`composer install`或`composer update`在项目根目录中。这将`vendor`使用作曲家`autoload.php`文件创建目录。
2.  将`vendor`目录添加`.gitignore`到`composer.lock`
3.  在`phpunit.xml.dist`指定作曲家的自动加载器作为引导文件

示例`phpunit.xml.dist`文件

```
<?xml version="1.0" encoding="UTF-8"?>

<phpunit backupGlobals="false"
         backupStaticAttributes="false"
         bootstrap="vendor/autoload.php"
         colors="true"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         processIsolation="false"
         stopOnFailure="false"
         syntaxCheck="false"
        >

    <testsuites>
        <testsuite name="Your package's test suit">
            <directory>./tests/</directory>
        </testsuite>
    </testsuites>

</phpunit> 
```

注意那里的引导条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:54:51.633

是的，你应该运行`composer update`。尝试没有害处，因为所有内容都放在 /vendor/ 中，您可以稍后将其删除。

# c# - TinyMCE 插入图像 - 单击时浏览按钮不执行任何操作

> ID：13951809
> 
> 赞同：0
> 
> 时间：2012-12-19T11:49:39.407
> 
> 标签：c#, javascript, tinymce

我正在使用 tinyMCE 编辑器，并且我在工具栏上包含了插入图像按钮，但是当我单击浏览按钮时没有任何反应！我刚刚收到此错误“TypeError：p 未定义”

这是 tinyMCE 的配置文件：

```
tinyMCE_GZ.init({
    // plugins: 'style,layer,table,save,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras',
    themes: 'simple,advanced,searchreplace',
    languages: 'en',
    disk_cache: true,
    debug: false
});

tinyMCE.init({
    // General options
    mode: "textareas",
    theme: "advanced",
    skin: "o2k7",
    plugins: "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
    // Theme options
    //theme_advanced_buttons1: "newdocument,template,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,justifyfull,|,fontselect,fontsizeselect,|,undo,redo,|,image,media,|,forecolor,backcolor,|,print",
    theme_advanced_buttons1: "bold,italic,underline,|,bullist,numlist,|,justifyleft,justifycenter,justifyright,justifyfull,|,fontselect,fontsizeselect,|,forecolor,|,image,media",
    theme_advanced_toolbar_location: "top",
    theme_advanced_toolbar_align: "left",
    theme_advanced_statusbar_location: "bottom",
    theme_advanced_resizing: true,

    file_browser_callback: "openBrowser",

    // Skin options
    skin: "o2k7",
    //skin_variant: "Blue",
    content_css: "../../Scripts/tiny_mce/themes/simple/skins/o2k7/content.css",

    // Drop lists for link/image/media/template dialogs
    template_external_list_url: "js/template_list.js",
    external_link_list_url: "js/link_list.js",
    external_image_list_url: "js/image_list.js",
    media_external_list_url: "js/media_list.js",

    // Replace values for the template plugin
    template_replace_values: {
        username: "Some User",
        staffid: "991234"
    },

    //To prevent having new paragraph each line
    force_br_newlines: true,
    force_p_newlines: false,
    forced_root_block: '', // Needed for 3.x

    setup: function (ed) {
        ed.onActivate.add(function (ed) {
            cursorRange = ed.selection.getRng();
        });

        ed.onKeyUp.add(function (ed, e) {
            //To Update cursor location when arrows, PgUp , PgDwn , Home & End keys are pressed
            if (e.keyCode >= 33 && e.keyCode <= 40) {
                cursorRange = ed.selection.getRng();
            }
        });

        ed.onInit.add(function (ed) {
            ed.focus();
            cursorRange = ed.selection.getRng();
        });

        ed.onActivate.add(function (ed) {
            ed.focus();
            cursorRange = ed.selection.getRng();
        });

        ed.onClick.add(function (ed, e) {
            cursorRange = ed.selection.getRng();
        });
    },

    theme_advanced_statusbar_location: "none"

}); 
```

我该如何启用它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:39:04.263

您使用的 tinymce 版本已经使用了五年多（！！！）并且已经过时了。它不适用于任何较新的浏览器。您将需要下载更新版本的 tinymce 并使用该版本。

# android - 禁用片段中的按钮

> ID：13951816
> 
> 赞同：0
> 
> 时间：2012-12-19T11:49:58.590
> 
> 标签：android, android-fragments, android-activity

我有三个片段。其中一个可以动态替换为另一个片段。如何禁用此“动态”片段中的按钮。禁用其他片段功能的按钮。当我编译我的应用程序时，我得到一个 java.lang.NullPointerException。

```
//主要活动公共类 MainActivity 扩展 Activity{

```
public static Button Button_1;
public static Button Button_2;

Block fragment;

...

public void onCreate(Bundle savedInstanceState) 
{
...
Button_1=(Button)findViewById(R.id.button1);
    Button_2=(Button)findViewById(R.id.button2);
...
fragment = (Block) getFragmentManager().findFragmentById(R.id.block_frag);
...
} 
```

...
}

```
public void onRadioButtonClicked(View view) {

switch(view.getId()) {
    ...
    case R.id.radioButton4:
    {

    Button_1.setEnabled(false);
    Button_2.setEnabled(false);
            fragment.Button_3.setEnabled(false);
            fragment.Button_4.setEnabled(false);

    break;
        }
        case R.id.radioButton5:
        {
    ... 
```

}

//block_frag:

公共类块扩展片段{

public Button Button_3;
public Button Button_4;

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    Button_3=(Button)getView().findViewById(R.id.button3);
    Button_4=(Button)getView().findViewById(R.id.button4); 
```

... }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:54:00.187

```
 @Override 
    public void onActivityCreated (Bundle savedInstanceState){
    super.onActivityCreated(savedInstanceState);
    Button_3=(Button)getActivity().findViewById(R.id.button3);
    } 
```

是的，它应该在片段内

# javascript - 带有 .find() 的正则表达式，没有结果

> ID：13951818
> 
> 赞同：7
> 
> 时间：2012-12-19T11:50:00.423
> 
> 标签：javascript, jquery, regex

我正在尝试更改页面上`id`的`name`属性。我正在使用的代码是这样的：

```
var img = new RegExp( 'id*="launch_pad_image_slide_\d"', g ) ;
$('.slider-data').each(function(){
    $(this).find(img).attr( 'id', 'random stuff' );
}); 
```

假设是`.find`函数应该拾取整个`id`内部：

```
id="launch_pad_image_slide_2" 
```

...但它不起作用。

5个小时就这样了，烧坏了。建议？基本上每次删除一个字段时，jQuery 都必须遍历它们并正确编号它们的`id`/`name`属性以避免双打。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T11:51:50.267

jQuery 选择器不支持正则表达式语法。但是，您可以使用[Attribute Starts With Selector](http://api.jquery.com/attribute-starts-with-selector/)：

```
$(this).find("[id^='launch_pad_image_slide_']").prop("id", "random stuff"); 
```

另一种方法是[`filter`](http://api.jquery.com/filter/)元素：

```
$(this).find("[id]").filter(function() {
    return /^launch_pad_image_slide_\d$/.test(this.id);
}).prop("id", "random stuff"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:54:06.407

尝试这个 ：

```
 $('img').each(function(){
           if ($(this).attr('id').indexOf("launch_pad_image_slide_") >= 0)
               $(this).attr('id',Math.random());
    }); 
```

# f# - 如何为一个 fslex 规则模式返回多个令牌？

> ID：13951822
> 
> 赞同：4
> 
> 时间：2012-12-19T11:50:10.730
> 
> 标签：f#, fslex

使用**fslex**我想为一个模式返回多个标记，但我看不到如何实现这一点。即使使用另一个返回多个令牌的规则函数也对我有用。

我正在尝试使用这样的东西：

```
let identifier = [ 'a'-'z' 'A'-'Z' ]+

// ...

rule tokenize = parse
// ...
| '.' identifier '(' { let value = lexeme lexbuf
                       match operations.TryFind(value) with
                      // TODO: here is the problem:
                      // I would like to return like [DOT; op; LPAREN]
                      | Some op -> op
                      | None    -> ID(value) }

| identifier         { ID (lexeme lexbuf) }
// ... 
```

我在这里要解决的问题是仅当介于和之间时才匹配预定义的标记（请参阅：`operations`地图）。否则，匹配项应作为.`identifier``.``(``ID`

我对 fslex 还很陌生，所以我很高兴看到正确方向的任何指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T14:22:13.287

好的，就是这样。

每个词法分析器规则（即`rule <name> = parse .. cases ..`）定义了一个函数`<name> : LexBuffer<char> -> 'a`，其中`'a`可以是**任何类型**。通常，您返回令牌（可能由 FsYacc 为您定义），因此您可以像这样解析文本：

```
let parse text =
    let lexbuf = LexBuffer<char>.FromString text
    Parser.start Lexer.tokenize lexbuf 
```

`Parser.start`类型的解析函数（来自您的 FsYacc 文件）在哪里`(LexBuffer<char> -> Token) -> LexBuffer<char> -> AST`（`Token`并且`AST`是您的类型，它们没有什么特别之处）。

在你的情况下，你想要`<name> : LexBuffer<char> -> 'a list`，所以你所要做的就是：

```
let parse' text =
    let lexbuf = LexBuffer<char>.FromString text
    let tokenize =
        let stack = ref []
        fun lexbuf ->
        while List.isEmpty !stack do
            stack := Lexer.tokenize lexbuf
        let (token :: stack') = !stack // can never get match failure,
                                        // else the while wouldn't have exited
        stack := stack'
        token
    Parser.start tokenize lexbuf 
```

这只是保存您的词法分析器提供的标记，并将它们一一提供给解析器（并根据需要生成更多标记）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T14:21:14.627

尝试保留语义分析，例如“...仅当标识符介于 . 和 (” 之间时，您的词法分析器 (fslex)，而不是将其保存为您的解析器 (fsyacc)。即，一种选择是让您的词法分析器不知道`operations`：

```
let identifier = [ 'a'-'z' 'A'-'Z' ]+    
// ...
rule tokenize = parse
// ...
| '.' { DOT }
| '(' { LPAREN }
| identifier { ID (lexeme lexbuf) }
// ... 
```

然后在 fsyacc 中使用如下规则解决问题：

```
| DOT ID LPAREN { match operations.TryFind($2) with
                  | Some op -> Ast.Op(op)
                  | None    -> Ast.Id($2) } 
```

更新以回应评论：

那么在你的词法分析器中可能有以下内容：

```
let identifier = [ 'a'-'z' 'A'-'Z' ]+   
let operations =
  [
    "op1", OP1
    "op2", OP2
    //...
  ] |> Map.ofList 

// ...
rule tokenize = parse
// ...
| '.' { DOT }
| '(' { LPAREN }
| identifier 
  { 
    let input = lexeme lexbuf
    match keywords |> Map.tryFind input with
    | Some(token) -> token
    | None -> ID(input) 
  }
// ... 
```

并在您的解析器中：

```
| DOT ID LPAREN { ... }
| DOT OP1 LPAREN { ... }
| DOT OP2 LPAREN { ... } 
```

因此，您在解析器中强制执行了`ID`s 和`operation`s 必须位于 a`DOT`和 a之间的规则，`LPAREN`同时保持您的词法分析器应有的简单（提供一个标记*流*，几乎没有强制执行相关标记的有效性的方式对彼此）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T15:58:48.637

（这是一个单独的答案）

对于这种特定情况，这可能会更好地解决您的问题：

```
...

rule tokenize = parse
...
| '.' { DOT }
| '(' { LPAREN }
| identifier { ID (lexeme lexbuf) }

... 
```

以及用法：

```
let parse'' text =
    let lexbuf = LexBuffer<char>.FromString text
    let rec tokenize =
        let stack = ref []
        fun lexbuf ->
        if List.isEmpty !stack then
            stack := [Lexer.tokenize lexbuf]
        let (token :: stack') = !stack // can never get match failure,
                                        // else the while wouldn't have exited
        stack := stack'
        // this match fixes the ID to an OP, if necessary
        // multiple matches (and not a unified large one),
              // else EOF may cause issues - this is quite important
        match token with
        | DOT ->
          match tokenize lexbuf with
          | ID id ->
            match tokenize lexbuf with
            | LPAREN ->
              let op = findOp id
              stack := op :: LPAREN :: !stack
            | t -> stack := ID id :: t :: !stack
          | t -> stack := t :: !stack
        | _ -> ()
        token
    Parser.start tokenize lexbuf 
```

如果 ID 被 DOT 和 LPAREN 包围，这将修复 ID 为操作，并且只有这样。

P.S.: I have 3 separate matches, because a unified match would require either using `Lazy<_>` values (which will make it even less readable), or will fail on a sequence of `[DOT; EOF]`, because it'd expect an additional third token.

# winapi - Windows 任务栏调用哪个 API 来设置其在 Windows 7 中的位置？

> ID：13951824
> 
> 赞同：0
> 
> 时间：2012-12-19T11:50:23.183
> 
> 标签：winapi, windows-7, operating-system, taskbar

我想知道系统调用哪个API来设置任务栏位置，特别是对于Windows 7。

在非 Windows 7 中，系统`GetMonitorinfo()`调用操作系统来设置任务栏位置。

Windows 7 中使用了什么功能？

# javascript - 转到 window.location.reload 之后的锚链接

> ID：13951826
> 
> 赞同：7
> 
> 时间：2012-12-19T11:50:26.963
> 
> 标签：javascript, anchor

我正在尝试更新哈希然后重新加载页面。

```
$('a[name="' + fragment + '"]').remove(); //don't jump before window reloads
window.location.hash = fragment;
window.location.reload(true); 
```

重新加载后窗口不会跳转到锚标记。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:19:26.787

如果您正在重新加载页面，这在 jQuery 中实现起来相当简单。只需`window.location.hash`在加载页面时检查属性。

```
$(document).ready( function( ) {
    if( window.location.hash ) { // just in case there is no hash
        $(document.body).animate({
            'scrollTop':   $( window.location.hash ).offset().top
        }, 2000);
    }
}); 
```

唯一需要注意的是，您的哈希值与您滚动到的元素的 id 匹配。

演示[**在这里**](http://jsbin.com/iretij/2#bar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:09:02.970

[MOZILLA 开发者网络](https://developer.mozilla.org/en-US/docs/DOM/window.location)建议使用`replace`：

```
function reloadPageWithHash() {
  var initialPage = window.location.pathname;
  window.location.replace('http://example.com/#' + initialPage);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T22:35:10.313

@Tim S. my intention is absolutely not to steal your thunder but your very low key comment above is in my opinion the optimal solution to this question as it is simple, clean and tests successfully across a variety of browsers. I am therefore creating an answer of it on your behalf:

```
window.location.href = url#anchor 
```

(where url can be the current page - or a different one as desired)

# dynamics-ax-2009 - Dynamics AX：在代码中禁用表单中的数据源，同时能够使用高级过滤器/排序选项

> ID：13951827
> 
> 赞同：6
> 
> 时间：2012-12-19T11:50:26.743
> 
> 标签：dynamics-ax-2009, axapta, ax

我已经修改了 InventTable 表单，因此用户可以根据默认订单设置设置表单上的“已停止”状态过滤项目。他们根据两个复选框的值获得“可购买”物品、“可出售”物品、所有物品或被阻止出售或购买的物品的列表。

我在代码中添加了 InventItemSalesSetup 和 InventItemPurchSetup 数据源，并在用户选中或取消选中复选框时启用或禁用它们。

除非禁用其中一个数据源，否则一切正常。然后“高级过滤器/排序”选项停止工作。我收到错误消息：“未启用数据源”。

错误来自 SysQueryForm 表单的方法“saveCueEnabled”。当它调用时：

```
if (!CueRun::canSaveQueryAsCue(this.args().caller()))
    return false; 
```

哪个电话：

```
static boolean canSaveQueryAsCue(QueryRun qr)
{
    int numOfDataSources, i;
    QueryBuildDataSource ds;
    Query q;
    Common cursor;
    ;

    if (!qr)
    return false;

    q = qr.query();
    if (!q)
        return false;

    numOfDataSources = q.dataSourceCount();
    for(i = 1; i <= numOfDataSources; i++)
    {
        ds = q.dataSourceNo(i);
        if(ds.dynalinkCount() > 0)
            return false;

        // Check if it is temp
        cursor = qr.getNo(i);
        if (cursor.dataSource() && cursor.isTmp())
            return false;
    }

    return true;
} 
```

当它获取查询中的数据源数量时，“dataSourceCount”方法还返回禁用数据源的计数，当它在循环中获取禁用数据源的 QueryBuildDataSource 时，您会得到一个空 DS 并且它崩溃时它检查它是否是一个临时表。

我已经解决了在“saveCueEnabled”代码上添加额外 if 的问题，但我想知道是否有一种方法可以启用/禁用数据源而不会出现此错误。

我希望我已经很好地解释了自己，谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T20:29:39.343

我能想出的唯一解决方案需要您修改 canSaveQueryAsQue()。

for 循环的此更新很简单，应该可以解决您的问题。

```
for(i = 1; i <= numOfDataSources; i++)
{
    ds = q.dataSourceNo(i);
    if(ds && ds.dynalinkCount() > 0)
        return false;

    // Check if it is temp
    cursor = qr.getNo(i);
    if (cursor.dataSource() && cursor.isTmp())
        return false;
} 
```

我没有测试过这段代码，但我在其他情况下使用过类似的代码。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T16:49:18.080

建议的编辑实际上不起作用，因为“ds”变量在测试时仍然是“真实的”。

以下似乎有效：

```
for(i = 1; i <= numOfDataSources; i++)
{
    ds = q.dataSourceNo(i);
    if(ds.enabled() && ds.dynalinkCount() > 0)
        return false;

    // Check if it is temp
    if(ds.enabled())
    {
        cursor = qr.getNo(i);
        if (cursor.dataSource() && cursor.isTmp())
            return false;
    }
} 
```

将“.enabled()”属性添加到测试允许代码根据请求跳过禁用的数据源。

# file-upload - Jenkins Parameterized Build 上传文件并保存原始文件名

> ID：13951833
> 
> 赞同：13
> 
> 时间：2012-12-19T11:50:47.767
> 
> 标签：file-upload, parameters, jenkins

如何在 Jenkins 参数化构建“文件参数”中以原始文件名保存上传的文件？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-23T13:46:50.133

您可以从与参数名称（文件位置字段）同名的参数中获取原始文件名。

例如，如果文件位置是，`my_file`那么您可以通过执行将其重命名为原始位置：

```
mv my_file ${my_file} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T17:43:39.253

*Jenkins 参数化构建*的“文件”参数在您的工作中始终使用*相同*的名称。

*我们可以通过指定两个*参数来绕过这个：

*   一个参数是*File*类型- 这将获取文件的内容。
*   其他参数是*字符串*类型- 这将获取文件的原始名称。

在我们的脚本中，我们通过第一个参数获取文件，
然后将其*重命名*为第二个。
（用户必须将相同的值*粘贴*到两个字段...）

**更新：**

正如[Nux](https://stackoverflow.com/users/333296/nux)（和[James Ruskin](https://stackoverflow.com/users/1112679/james-ruskin)）所提到的，这个问题[在 2011 年左右得到了解决](https://issues.jenkins-ci.org/browse/JENKINS-11326)，
因此您现在可以通过以下方式访问原始文件：

例如，如果您的 File-Parameter 名为***File1***，
那么您的脚本会获取该文件的**内容**`File1`
， 并且可以使用本地参数**访问原始文件**`${File1}`。

***我怀疑当脚本和用户不在同一个操作系统上时会变得很棘手，
即：用户在 Windows 中编写路径并且脚本在 Unix 上运行***

# android - 如何以编程方式确定 TextView 的高度？

> ID：13951836
> 
> 赞同：0
> 
> 时间：2012-12-19T11:50:51.627
> 
> 标签：android

我为一行列表视图创建了一个 xml。它只有一个 Textview。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="14sp"
    android:textColor="@color/white"
    android:text="A">
</TextView> 
```

我需要以编程方式确定这个 textview 的高度。如果我编码 textview.getTextSize(): 这只是返回文本的大小。

编辑：

我想在屏幕上呈现之前检索 textview 的高度。我的意思是，我想夸大这个：

```
LayoutInflater inflater=LayoutInflater.from(this);
View view=inflater.inflate(R.layout.row, null);
TextView row_textview=((TextView)view); 
```

然后计算“row_textview”实例的高度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T11:53:09.220

你试过了吗

[`textview.getHeight();`](http://developer.android.com/reference/android/view/View.html#getHeight%28%29)

> 返回视图的高度。

或这个

[`textview.getMaxHeight();`](http://developer.android.com/reference/android/widget/TextView.html#getMaxHeight%28%29)

> 此 TextView 的最大高度，以像素表示，如果最大高度以行数而不是使用 [setLines(int)](http://developer.android.com/reference/android/widget/TextView.html#setMaxLines%28int%29)设置，则为 -1 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:53:28.780

你检查过[这个](http://developer.android.com/reference/android/view/View.html#getHeight%28%29)和[这个](http://developer.android.com/reference/android/widget/TextView.html#getLineHeight%28%29)吗？

`txtview.getHeight();`

> 返回视图的高度，以像素为单位。

或者

```
txtview.getLineHeight(); 
```

> 返回一个标准线的高度（以像素为单位）。请注意，文本中的标记可能会导致个别行高于或低于此高度，并且布局可能包含额外的第一行或最后一行填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T07:33:34.377

我找不到这个问题的任何答案，所以我不接受到目前为止在这个线程上提供的任何答案。由于我试图在文本视图在屏幕上呈现之前计算它的高度，因此通过读取 xml 布局，这在 Android 中不受支持。在这种情况下，我们必须硬核高度度量，然后在运行时将此 dp 度量转换为像素。 [获取 TextView 的高度](https://stackoverflow.com/questions/4912687/android-get-the-height-of-the-textview) 此链接对于正在为此搜索答案的其他人可能很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:02:56.110

试试这个来获取 textView 的高度和宽度——

```
 textView.getMeasuredWidth();

 textView.getMeasuredHeight(); 
```

# javascript - IE 9 中不支持跨度的 JQuery 可排序句柄

> ID：13951840
> 
> 赞同：-1
> 
> 时间：2012-12-19T11:51:02.950
> 
> 标签：javascript, jquery, internet-explorer-9, jquery-ui-sortable

我的代码在 firefox chrome safari Opera 中完美运行，但跨度排序在 ie 9 中不起作用这是我的代码

```
$(function() {
    var lastRow = $("#<%=divChapters.ClientID%> tr:last").children("td:first").html();
                  $('#<%=divChapters.ClientID%> tbody').sortable({ opacity: 0.6,cursor: "move",handle: "span", update: function() {
                   var tableTdId = [];
                            $("table tbody tr:visible td:first-child").each(function(){
                                tableTdId.push($.trim($(this).text()));
                            });
                       var tableTdId = tableTdId.join(',');
                       var order = $('#<%=divChapters.ClientID%> tbody').sortable("serialize"); 
                       var App_Id = $("#<%= hfAppId.ClientID %>").val();
                       BlockUI();
                       CallServerMethod(tableTdId + "^" + lastRow + "^" +  App_Id +"_UpdateChapterOrder", "");                                                   
                  }                               
});

<td class="chapterDeletetd"> <div style="text-align: right; padding-right: 13px; margin-bottom: 10px; padding-left:32px;"> <span class="spanSortable">Drag drop chapter to change order <img class="spanSortableImage" src="../Images/cursor.png"> </span> </div></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:59:24.587

当我们使用 jquery_v1.7.2.js 和 jquery-ui-1.7.1.custom.min.js 时出现此错误要解决此问题，请使用最新版本的 jquery .js 文件

jquery-1.8.3.js

jquery-ui-1.9.2.custom.js

jquery-ui-1.9.2.custom.min.js

# android - 在Android中垂直滚动后Listview标题不可见

> ID：13951848
> 
> 赞同：1
> 
> 时间：2012-12-19T11:51:23.510
> 
> 标签：android, listview

我正在使用 Listview 并使用以下代码设置标题。

```
LayoutInflater inflater;
    inflater = LayoutInflater.from(this);
    listview = (ListView) findViewById(R.id.listview);
    ViewGroup header = (ViewGroup) inflater.inflate(R.layout.header,
            listview, false);
    listview.addHeaderView(header, null, false);
    listview.setAdapter(new ListAdapter(this)); 
```

设置了使用此代码标题，但是当我垂直滚动列表视图时，它将不可见。

编辑：

我也对 Listview 使用水平滚动。请帮我找到这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:52:49.603

与其将布局添加为 ListView Header，不如在 ListView 上方的 xml 中使用 [include 标签](http://developer.android.com/training/improving-layouts/reusing-layouts.html)，尽管 ListView 滚动，该标签仍将保持静态。

# coldfusion - CFDocument 和高位ASCII？

> ID：13951855
> 
> 赞同：4
> 
> 时间：2012-12-19T11:51:49.860
> 
> 标签：coldfusion, ascii, coldfusion-8, cfdocument, cfpdf

我有一个小脚本，用于创建 PDF`<cfdocument>`用于编写 PDF。它看起来像这样（最小化的代码）：

```
<cfdocument name="mypdf" format="pdf">
    &#9746;
</cfdocument> 
```

当我的数据包含高位 ASCII 字符（如`&#9744;`(☑)）时，我收到错误消息：

> 执行文档处理时发生异常。

详细的错误信息是：

> 这个异常的原因是：coldfusion.document.spi.DocumentExportException: Coldfusion.document.DocumentFontException: An exception occurred when reading the font file c:\windows\fonts\EUB_ *_* _.PFM 这个异常的原因是： java.awt.FontFormatException: 不支持的 sfnt C:\WINDOWS\TEMP+~JF42977.tmp..

这似乎是一个字体问题！更改 CSS 字体并不能解决问题。我需要检查默认系统字体...

哦，这不是`#`，我已经这样做了：`&##9744;`

我使用 ColdFusion 8。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:31:25.507

如果我这样做：

```
<cfscript>
x = "before_______ &##9744; __________after";
</cfscript>

<cfdocument format="pdf">
<cfoutput>#x#</cfoutput>
</cfdocument> 
```

我得到一个带有“之前**_ _****☐*****_____after** ”作为内容。***

 ***问题可能出在代码的其他地方。***

# devexpress - 如何从项目中完全删除 DevExpress？

> ID：13951857
> 
> 赞同：0
> 
> 时间：2012-12-19T11:51:49.067
> 
> 标签：devexpress

我错误地将 DevExpress 控件（复选框）放在我的 Winforms in VB 项目中，但后来我从项目中删除了它。

现在，当我将该项目复制到我同事的机器上时，当我尝试重建它时，它会说：

> *无法解决...在 licenses.licx...*

我该如何解决这个问题？这对我来说是非常重要的项目！

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:53:26.457

可能，您在项目资源中有 licences.licx 文件作为嵌入式资源。去掉它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:45:19.660

在 Properties 文件夹中有一个名为 licenses 的文件。

您应该找到以下行：

```
DevExpress.XtraEditors.CheckEdit, DevExpress.XtraEditors.v12.1, Version=12.1.7.0, Culture=neutral......... 
```

（它可能是不同的数字，但你明白了......）。

删除线并重建！

# ios6 - 如何在 iPhone 中启动会话以生成特定事件的会话开始数

> ID：13951860
> 
> 赞同：1
> 
> 时间：2012-12-19T11:51:58.317
> 
> 标签：ios6

我在 sqlite 数据库表 POOL_A、POOL_B 和池 A 中的 POOL_C 中有三个字段我开始第一个问题，池 B 和池 C 是空的我必须为特定概念代码（如 DC_C1）创建会话，并且还必须找到特定的会话完成意味着 SESSION_NUMBER FOR DC_C1，我正在发送算法以更了解问题

*   (IBAction)startButton:(id)sender {

    ConceptShoeViewController *show = [[ConceptShoeViewController alloc] initWithNibName:@"ConceptShoeViewController" bundle:nil]; [self.navigationController pushViewController：显示动画：YES]；

    [自选择池数据库];

    int countA=lA.count；NSLog(@"count a @%d",countA); NSLog(@"A的问题%@",lA);

    int countB=LB.count；NSLog(@"count b @%d",countB);

    int countC=lC.count; NSLog(@"count c @%d",countC);

# 会话创建上的编译指示标记算法............

```
NSArray *cookieJar = [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies];
for( NSHTTPCookie *cookie in cookieJar)
{
    if( [[cookie name] compare: @"SESSION_NUMBER"] == NSOrderedSame)
    {

    }
}

if (countA+countB <= 10)
{ 
```

# 杂注标记添加来自A和B的所有问题

```
 [mainArray addObjectsFromArray:lA];
} 
```

否则如果 (countB<10)

```
{
 if (countA<10)

{ 
```

# pragma mark 将 A 中的所有问题和 B 中的剩余问题相加

```
}
    else
    { 
```

# 杂注标记添加来自A的所有问题

```
 }
} 
```

别的 {

# java-me - J2me：Lwuit 显示尺寸 176x220

> ID：13951864
> 
> 赞同：2
> 
> 时间：2012-12-19T11:52:12.320
> 
> 标签：java-me, resize, lwuit

我使用 LWUIT 库为 J2ME 创建应用程序。

我检查了 240x320 显示尺寸的手机，它工作得很好，然后检查了 176x220 显示糟糕的主题。

我认为这发生在我在代码和主题中使用的 Margin Style 上。

如何创建 176x220 尺寸或大于 240x320 的项目？

我找到`Display.DENSITY_VERY_LOW`了，但是怎么用呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:04:14.877

您需要在设计器工具中以毫米而不是像素为单位指定边距。

# mysql - 删除互相引用的sql表

> ID：13951868
> 
> 赞同：1
> 
> 时间：2012-12-19T11:52:20.007
> 
> 标签：mysql, sql

我有两个表，每个都引用另一个（由 django ORM 创建）。每个表都引用另一个表。

现在我想编写一个删除所有表的脚本，但我没有这样做，因为我正在做外键违规

```
mysql> delete from table1
mysql> delete from table2 
```

我知道我可以忽略这些检查，但问题是这些检查是由 django 生成的，具有神秘的名称

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:56:04.247

你可以这样做 -

```
SET FOREIGN_KEY_CHECKS = 0;

DELETE FROM table1;
DELETE FROM table2;

SET FOREIGN_KEY_CHECKS = 1; 
```

文档：[foreign_key_checks](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_foreign_key_checks)。

# c++ - 将 QString 转换为 QString 的指针

> ID：13951874
> 
> 赞同：1
> 
> 时间：2012-12-19T11:52:45.563
> 
> 标签：c++, string, qt, pointers

因为我不是 C(++) 专家，所以我被编译器的一些顽固性所困扰，不想将一个，在这种情况下，QString 转换为一个 QString*。我有一个功能：

```
bool getNextMessage(int sId, QString *msg, QString *cmd) 
```

我在这里使用指针是因为我不能在 C 中返回多个变量（被破坏的 Perl 编码器；）），并且我想在一段时间内使用它（getNextMessage（...））{...} 样式循环。在那个函数里面有一些 SQL foo 和这个：

```
 msg = QString("");
 cmd = QString("");
 return false; 
```

编译器由此产生的所有内容是：

```
 cannot convert 'QString' to 'QString*' in assignment 
```

各位亲爱的朋友们能帮我解开这个谜吗？谢谢。:)

编辑：解决方案：现在使用引用，这要归功于 leemes 指向它们的指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:55:04.600

为此，您通常使用*引用*，而不是*指针*。对于 C++ 新手来说，很难理解有什么不同。一个简短的解释是“引用是更安全的指针”。

```
bool getNextMessage(int sId, QString &msg, QString &cmd) 
```

这样，您可以在不转换为指针的情况下调用该方法，并使用与处理普通变量相同的语法来使用引用，因此您用于设置字符串内容的代码很好。

如果你想坚持使用指针——或者，要了解如何使用指针——这就是你使用指针的方式：

```
*msg = QString(""); 
```

`*msg`dereferences `msg`，这意味着您正在使用指针*后面的对象。*对于函数调用，有`->`运算符。

打电话

```
msg = new QString(""); 
```

在语法上也是正确的，但不会做你期望它做的事情！这一行意味着您分配了一个新的 QString 对象并获得了这个新创建的对象的指针。然后，将此指针分配给`msg`. 这适用于函数中的以下代码。但是，您更改了`msg`自身（指针地址）而不是指向的内存`msg`。这意味着，调用者在这里不会注意到*任何东西*。调用者在函数调用后使用旧指针。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T11:56:29.677

尝试使用以下内容。

```
*msg = QString("");
*cmd = QString(""); 
```

确保您的指针已初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:54:38.280

那么 a`QString`不是 a `QString*`。也许您想取消引用指针并分配给它指向的对象：

```
*msg = QString(""); 
```

或者我希望以下是等价的：

```
*msg = ""; 
```

# wcf - 通过传递数据从 wcf 绑定 Jquery 中的下拉列表

> ID：13951878
> 
> 赞同：0
> 
> 时间：2012-12-19T11:53:00.143
> 
> 标签：wcf, jquery

我正在尝试通过将数据传递给 WCF 来绑定 JQuery 中的下拉列表。

jQuery代码是：

```
 function PopulateCity()
    {        
    var StateID = { 'stateId': $("[id$=ddlState]").val() };        
    var jsondata = JSON.stringify(StateID);        
    $('[id$=ddlCity]').empty().append('<option selected="selected" value="0">Loading...</option>');        
            $.ajax({
                type: "POST",
                url: 'http://localhost:49583/Service1.svc/PopulateCities',
                data: jsondata,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    BindCity(data,'ddlCity');
                },
                failure: function (response) {
                    alert(response);
                }
            });
    }

function BindCity(list, control) {    
         $.each(list, function (value, text) {            
            $("select[id$=" + control + "]").append($("<option></option>").val(this['Value']).html(this['Text']));
        });
 } 
```

WCF 代码是：

```
 [OperationContract]
    [WebInvoke(Method = "POST", ResponseFormat = WebMessageFormat.Json)]
    List<CityDetails> PopulateCities(int stateId); 
```

实现的接口是：

```
List<CityDetails> IService1.PopulateCities(int stateId) {

            List<CityDetails> arrCity = new List<CityDetails>();
            String strConnString = ConfigurationManager
                .ConnectionStrings["conString"].ConnectionString;
            //String strQuery = "select ID, CityName from Cities where CountryID=@CountryID";
            String strSP = "Car_GetSubMasterDetails";
            using (SqlConnection con = new SqlConnection(strConnString))
            {
                using (SqlCommand cmd = new SqlCommand())
                {
                    cmd.CommandType = CommandType.Text;
                    cmd.Parameters.AddWithValue("@MasterID", stateId);
                    cmd.Parameters.AddWithValue("@Key", "City");
                    cmd.Parameters.AddWithValue("@Culture", "en-US");
                    cmd.CommandText = strSP;
                    cmd.Connection = con;
                    con.Open();
                    SqlDataReader sdr = cmd.ExecuteReader();
                    while (sdr.Read())
                    {
                        arrCity.Add(new CityDetails() { Value = sdr["ID"].ToString(), Text = sdr["CityName_en_US"].ToString() });
                       // list.Add(new ListItem(
                       //sdr["CityName_en_US"].ToString(),
                       //sdr["ID"].ToString()
                       // ));
                    }
                    con.Close();
                    return arrCity;                    
                }
            }
        } 
```

我不明白我错在哪里。它既没有绑定下拉列表也没有显示任何错误。请帮助..提前致谢。

# opencv - OpenCV FREAK 对旋转/缩放不鲁棒

> ID：13951879
> 
> 赞同：3
> 
> 时间：2012-12-19T11:53:04.283
> 
> 标签：opencv, freak

我一直在处理 OpenCV FREAK 描述符，在使用两个类似的定向和缩放图像获得了非常棒的匹配结果后，我开始尝试使用缩放和旋转图像。

FREAK 应该是不变的规模/旋转，但我的结果是可怕的。我试图调整怪胎描述符参数：

```
new FREAK(true, true, 22, 5); //rotInvariant, scaleInvarian, scale, ocataves 
```

但我只是设法在旋转图像的较近部分获得了一些正确的匹配，它具有更高的分辨率。

有没有办法为旋转和不同比例的图像调整 FREAK？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T13:03:12.217

FREAK 本身不是旋转/比例不变的。它使用 AGAST 提供的旋转和缩放在 AGAST 关键点（这是 BRISK 论文关键点描述符的小名称）上进行了训练。因此，如果您想处于缩放/旋转不变性的最佳条件，则需要使用此检测器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T01:05:08.323

同意山水索。只想补充一点，opencv 允许您使用 BRISK 关键点检测。获取关键点并围绕这些关键点运行 FREAK。

# java - JAVA SWT/AWT Eclipse Mac OSX Java Cocoa CompatibilityMode 已启用

> ID：13951883
> 
> 赞同：14
> 
> 时间：2012-12-19T11:53:08.597
> 
> 标签：java, cocoa, swing, swt, awt

我正在开发一个相当复杂的`Java`应用程序混合`Swing`和`SWT`. 每当我启动应用程序时，这是控制台输出（并且应用程序不显示）：

```
2012-12-19 12:45:45.359 java[3442:f07] [Java CocoaComponent compatibility mode]: Enabled
2012-12-19 12:45:45.360 java[3442:f07] [Java CocoaComponent compatibility mode]: Setting timeout for SWT to 0.100000 
```

我遵循了许多指南和教程设置：

1.  `System.setProperty("com.apple.awt.CocoaComponent.CompatibilityMode", "false");`
2.  `-XstartOnSecondThread`
3.  `--launcher-on-secondThread`

现在我真的一点头绪都没有。使我的应用程序正常运行的唯一方法`Mac OSX`是`export the Eclipse project to a JAR executable`. 好吧，这很烦人。有人可以向我解释如何设置上面的这些属性吗？有什么魔术吗？

**编辑**：我正在使用：

```
OSX Mountain Lion 10.8.2 ,
Java 1.6u37 64bit,
SWT 4.2 cocoa x64,
Windows XP ,
Java 1.6u37 32bit,
SWT 4.2 32bit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:22:47.973

~~我曾多次遇到此问题，因为我在一家 Java 商店工作，每个人都使用 Eclipse，而且我是 OS X 用户。~~

修复有点奇怪。

您需要从“已安装的 JRE”首选项中删除当前的 JRE，然后再次添加。执行此操作时，请确保选择“标准 JVM”而*不是*“Mac OS X JVM”。

~~添加 JRE 有点烦人，所以在添加之前请记下“Location”路径字符串。您将它指向同一个地方，只需更改“类型”属性。~~

所以，我的回答是错误的。如果你只做 Swing/AWT 是相关的，但是在发布这个之后我不得不立即写一个 SWT_AWT boondoggle 并且我在我的 Mac 上遇到了同样的错误，即使使用上述设置。我怀疑这与 Swing/AWT 和 SWT 之间关于事件循环的差异有关（SWT = 自带，Swing = 由 JVM 提供）。我在 IntelliJ IDEA 12 中也遇到了错误，所以这不仅仅是 Eclipse 问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-14T00:47:33.393

当我使用 jar 生成图表时，我遇到了一个类似的问题。je jar 使用了似乎与 OSX 不兼容的 swt。如果您正在使用 swt 或使用 swt 导入了一个 jar，请尝试删除它并找到一个使用 awt 的等效项

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:55:58.620

我在我的 Macbook 中遇到了同样的问题，因为我可以看到您正在下载 Eclipse Indigo，这是您能做的最好的。Juno 有错误，而且速度很慢，因为它比以前的版本消耗更多的性能。我认为 Indigo 是最好的选择。我知道 Java 是可移植的和多平台的，但是在使用苹果设备之后，我发现与 Java 存在某种不兼容，我认为不是因为 Java，而是因为 iOS，这就是为什么对我来说我能做的最好的就是安装带有 Ubuntu 的虚拟机。因此，您可以尝试使用您喜欢的 Linux 发行版。

# java - 在二维数组中格式化双精度

> ID：13951886
> 
> 赞同：1
> 
> 时间：2012-12-19T11:53:17.350
> 
> 标签：java, formatting, multidimensional-array

我有一个从其他双打计算出来的二维双打数组。我希望对存储在 2D 数组中的双精度进行格式化，以便它们保留 4 个小数位。例如我有一个数组：

```
fragmentMases = [363.076328934]      [668.128613182]      [974.16124702]      [1303.232096646]
                [283.109998526]      [588.162282774]      [894.194916612]     [1223.265766238]
                [1398.2454009859998] [1053.1796367379998] [748.1273524899999] [442.0947186519999]
                [1285.22153196]      [940.1557677119999]  [635.103483464]     [329.070849626] 
```

但我希望它是：

```
fragmentMases = [363.0763]  [668.1286]  [974.1612] [1303.2320]
                [283.1099]  [588.1622]  [894.1949] [1223.2657]
                [1398.2454] [1053.1796] [748.1273] [442.0947]
                [1285.2215] [940.1557]  [635.1034] [329.0708] 
```

我做了一个我认为会做的函数，但它似乎没有将它保存在数组中：

```
public static void formatArray(double[][] array) {

    Formatter fmt = new Formatter();

    for(int i = 0; i < 4; i++){
        for(int y = 0; y < array.length; y++){
            String.valueOf(array).length();
                fmt.format("%.4f", array[i][y]);
        }
    }
} 
```

编辑

所以我运行以下命令：

```
formatArray(fragmentMasses); 
```

运行此之后，我打印出数组并且没有格式化任何双精度数。

谁能帮我让它工作并保存格式化的二维数组？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:24:51.650

您可以创建新数组并用它覆盖您的数组：

```
public static double[][] formatArray(double[][] array) {

    double[][] newArray = new double[array.length][array[0].length];
    for(int i = 0; i < array.length; i++){
        for(int y = 0; y < array[0].length; y++){
            newArray[i][y] = (double)Math.round(array[i][y] * 10000) / 10000;
        }
    }
    return newArray;
} 
```

或者您可以更改自己的数组：

```
 public static void formatArray(double[][] array) {
        for(int i = 0; i < array.length; i++){
            for(int y = 0; y < array[0].length; y++){
                array[i][y] = (double)Math.round(array[i][y] * 10000) / 10000;
            }
        }

    } 
```

# javascript - 在使用 Javascript 遍历单位圆时绘制正弦波

> ID：13951888
> 
> 赞同：5
> 
> 时间：2012-12-19T11:53:24.643
> 
> 标签：javascript, plot, interactive

我想在遍历单位圆时绘制正弦波。我想将它用于教育目的。我想要的情节类似于下面的情节：

![正弦波](../Images/861f3f5f1412215c02af24305df18050.png)

此外，我希望 x 轴的刻度标签涉及 π/2、π、3π/2、2π。它可能支持我想说的一些数学。

如何使用 Javascript 绘制这样的单位圆和相应的 xy 图？我应该使用哪个库？你能提供一个起点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T20:29:39.163

First, notice that with the points you are wanting something shown at some time `t`. That is, x and y are functions of time or parametric equations.

Ignoring scale factors, your circle would be

```
x(t) = cos(t)
y(t) = sin(t) 
```

and your wave would be

```
x(t) = t
y(t) = sin(t) 
```

Where `t` ranges from 0 to 2pi. Javascript supports trigonometric operations via the `Math` object.

The html5 canvas is a pixel based representation of what has previously been drawn on it or erased from it. That is, it doesn't remember any of the shapes that are drawn to it, either something is drawn and pixels get changed, or not.

One thing that's useful about the html5 canvas is that you can define a set of statements to draw some particular object, and then if you need to draw that object at some particular location, scale, and/or rotation or reflection, you can save the state of the canvas to a stack (provided by the API), set up the transform, draw the object, and revert from the stack to continue doing what else needs to be done.

One thing to remember is that (without transform) the canvas coordinate (0,0) starts up at the top left hand corner with the y coordinate increasing going *down*, whereas the Cartesian coordinate system has the y coordinate increasing going *up*.

To draw text labels, the canvas api does allow for drawing with fonts with multiple neat effects with any font loaded (say from some web font foundary) or on your system.

You mentioned that this was to be done for "educational purposes", but it isn't clear to me if those purposes are for students to learn about some mathematical concepts, or for you to learn some programming concepts. If it's for the latter, I fear giving you an example directly using html5 canvas might be a bit too much (it's often better to discover things on your own with aid only requested for when you get stuck) and using d3.js might be a bit overkill, unless, of course, you want to learn about d3.js. ~~I'd still recommend some practice at the fundamental manipulations of the html5 canvas first.~~ If it's for the former, well, utilizing d3.js might be quite fine. After all, it might be fun to play with something equivalent to Jason Davies [Animated Bézier Curves](http://www.jasondavies.com/animated-bezier/) related to sine waves and circles or something similar.

Edit: Oops, I somehow got into mind that d3 used canvas, but it's clearly more svg based now that I've rechecked at it. Html5 canvas "fundamentals" aren't necessarily related to d3.js, so I struck that line.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T20:30:37.550

# Drawing

There are two good ways to "draw" arbitrary shapes using javascript.

*   The first option is an HTML canvas element. Like an artists canvas, an html canvas provides a region in which you can draw arbitrary shapes, lines, etc. using javascript.
*   The second option is a SVG drawing. SVG is a language similar to HTML which allows you to define lines, shapes, etc. There are good libraries for drawing out SVG code using javascript (e.g. raphael.js)

So both options let you draw to the screen with javascript. I would recommend using SVG, as it gives you more ability to modify elements you have already drawn, attach event handlers to elements in your drawing, etc.

# Animation

Once you have the ability to draw, you need to animate your drawing. The short answer is you want to use `requestAnimationFrame` to tell the browser you would like to have a function called periodically to draw a frame of your animation. Each time that function is executed, you will update your drawing appropriately.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T23:17:28.293

这个由 Jason Davies 使用 D3 JS 和 SVG 完成的动画似乎是您所追求的完整示例： [http ://www.jasondavies.com/animated-trig/](http://www.jasondavies.com/animated-trig/)

# java - 轴更改soap：地址

> ID：13951895
> 
> 赞同：7
> 
> 时间：2012-12-19T11:53:37.523
> 
> 标签：java, axis

我有一个 Apache2 HTTP 服务器，该服务器可用于外部网络。对于我的网络服务，我在内部网络中有一个 Jboss 4。我在 Apache 上使用 DMZ 配置了 VirtualHosts，因此我可以通过 访问外部主机的服务`http://externalserver/services/SomeService?wsdl`，当请求到达 /services/* 时，我将请求重定向到`http://internalserver/services/SomeService?wsdl`ProxyPass。

这在 Intranet 上工作，但是当我尝试从外部主机使用我的 web 服务时，我的 wsdl 指的是内部主机。我有这样的事情：

```
<service name="SomeServiceService">
    <port binding="tns:SomeServiceBinding" name="SomeServicePort">
         <soap:address location="http://internalserver/services/SomeService"/>
    </port>
</service> 
```

我需要更改生成的 wsdl 中的位置属性，我该怎么做？

提前致谢。

编辑：

我可以更改主机和端口我编辑了 jboss-beans.xml，现在我有这样的东西：

```
<property name="webServiceHost">${jboss.bind.address}</property>
<property name="modifySOAPAddress">true</property>
<property name="webServiceSecurePort">8443</property>
<property name="webServicePort">8080</property> 
```

但这不会改变协议，我可以调用`http://myapp/Service?wsdl`或者`https://myapp/Service?wsdl`但在两个地址中都是http，我需要将其更改为https。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T18:34:39.040

根据[这篇文章](https://community.jboss.org/thread/205925)，您可以设置`soap:address`为`"https://REPLACE-ME`解决方法，或强制执行传输保证（这可能会破坏您的 Intranet 服务，除非您还将它部署在启用了 https 的服务器中或手动`CONFIDENTIAL`替换）。`soap:address`

# silverlight - 在foreach中重复linq到sql？

> ID：13951899
> 
> 赞同：1
> 
> 时间：2012-12-19T11:53:44.590
> 
> 标签：silverlight, linq-to-sql, search-engine

我正在使用 linq to sql 开发一个（快速而肮脏的）搜索引擎。我已经有一个字符串表，其中包含我想在每个条目的描述中搜索的每个单词。

在我的 linq to sql 进程结束时，我应该只获取包含表中**所有**单词的条目。这是我到目前为止的代码（**m1**是我的字符串表）：

```
var myUser = from u in dataBase.Profiles
             where u.Status == 2 // some primary selection
             select u;
foreach (string word in m1)
{
  myUser = from u in myUser
           where ((word != "") ? u.Description.Contains(word) : 1 == 1)
           select u;
}
myUser = from u in myUser
         orderby u.ModificationDate descending // finally, we order the list
         select u; 
```

此代码运行良好，但遗憾的是，它不会选择包含**两个**单词的条目，而是选择包含**至少一个单词**的所有条目。

你能明白为什么吗？我不 ： /

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:56:10.717

您正在[关闭循环变量](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

> 闭包关闭变量，而不是值。

尝试将字符串分配给局部变量：

```
foreach (string word2 in m1)
{
    string word = word2;
    myUser = from u in myUser
           where ((word != "") ? u.Description.Contains(word) : 1 == 1)
           select u;
} 
```

# .net - 从与 COM 互操作混合的 DLL 加载配置文件

> ID：13951902
> 
> 赞同：2
> 
> 时间：2012-12-19T11:53:55.907
> 
> 标签：.net, configuration, com-interop

在通过 COM 互操作使用程序集时，我无法在 .NET 中加载配置设置。

背景：我们在一些服务器上使用了大量的 VBScript 脚本来执行各种任务。通常，它们执行诸如发送电子邮件之类的功能。为了促进这一点，我想创建一个可从 VBScript 创建的 COM 对象，这将有助于其中一些常见的功能集。

因此，我正在尝试创建一个通过互操作公开一些 COM 接口的 .NET 程序集。我设法让这个工作，但后来想外部化（而不是硬编码）一些配置设置。

我正在使用这一行来检索配置：

```
ConfigurationManager.OpenExeConfiguration(this.GetType().Assembly.Location) 
```

当我从测试项目中对其进行测试并将其作为 .NET 项目进行引用时，这似乎可以正常工作，但如果我将其作为 COM 对象进行测试，则会失败。

失败的原因是在我的配置文件中，我有一个自定义部分：

```
<section name="CustomSection" type="COMObjects.CustomSection, COMObject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=e9e8071519bd2f04"/> 
```

但是，当它尝试加载自定义部分时，它无法加载程序集“COMObject”。对我来说，这是有道理的，因为我没有将程序集放在 GAC 中（我也不想），所以很难找到它。

有没有办法帮助 .NET 框架找到配置文件中引用的程序集，例如这种情况？

下面是绑定的 fuslogvw.exe 输出：

```
操作失败。
绑定结果：hr = 0x80070002。该系统找不到指定的文件。

从以下位置加载程序集管理器：C:\Windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll
在可执行文件 C:\Windows\SysWOW64\cscript.exe 下运行
--- 详细的错误日志如下。

=== 预绑定状态信息 ===
日志：用户 = 我的机器\我
日志：DisplayName = COMObject，版本=1.0.0.0，文化=中性，PublicKeyToken=e9e8071519bd2f03
 （完全指定）
日志：Appbase = file:///C:/Windows/SysWOW64/
日志：初始 PrivatePath = NULL
日志：动态基础 = NULL
日志：缓存基础 = NULL
日志：AppName = NULL
调用程序集：System.Configuration，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a。

LOG：此绑定在默认加载上下文中开始。
LOG：未找到应用程序配置文件。
日志：使用 C:\Windows\Microsoft.NET\Framework\v2.0.50727\config\machine.config 中的机器配置文件。
LOG：之前看到过相同的绑定，但由于 hr = 0x80070002 失败。
ERR：预下载检查期间发生不可恢复的错误（hr = 0x80070002）。

```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:06:44.797

> 在可执行文件 C:\Windows\SysWOW64\cscript.exe 下运行

此代码由 32 位版本的脚本解释器激活。CLR 查找程序集的位置受启动 EXE 位置的影响。它设置的值`AppBase`不可避免地指向 Windows 目录，因为那是存储 cscript.exe 的地方。它可以找到您的程序集的唯一方法是将其复制到 c:\Windows\SysWow64。这不是一个合理的做法，这个目录归操作系统所有。

私有路径可以通过 app.exe.config 文件`<probing>`元素进行配置。它是有限的，你只能选择 AppBase 的一个子目录。在 c:\Windows\SysWOW64 中创建子目录是不合理的做法。创建 script.exe.config 文件将影响cscript 执行的*所有脚本。*这不是一件合理的事情。

.NET 框架为此类程序集解析问题提供了一个非常合理的替代方案。你已经知道了，这是你不想做的事情。该程序集属于 GAC。

# c++ - 为什么我不能在方法中按名称引用类的实例？

> ID：13951903
> 
> 赞同：-7
> 
> 时间：2012-12-19T11:53:58.217
> 
> 标签：c++

```
class mail
{

void reg();
.
.
};

void mail::reg()
{

filout.write((char *)&obj,sizeof(obj)); // error occurring on compilation. undefined sysmbol obj

}

int main()
{

{  //local block

mail obj;
.
.
obj.reg();

} //end of local block

}// end of main 
```

我该如何纠正这个错误。当我调用 memeber 函数时，对象是否被破坏。我的理解是当定义它的块结束时 obj 被销毁

如何将 obj 写入 reg() 中的文件

谢谢

根据要求的完整代码：

```
#include<fstream.h>
#include<conio.h>
#include<string.h>
#include<process.h>
#include<stdio.h>

int user;           // to keep a track of no. of users

class mail
{
public:
    char un[25];             // user name
    char pd[25];             // passsword
    // no. of inbox messages
    int ino;                 // no. of sent messages
    int sno;
    char isbj[25][25];
    char ssbj[25][25];
    char imsg[25][50];
    char smsg[25][50];       // character array to store inbox and sent messages
    void reg();             // func to sign up
    void signin();
    mail()
    {}
    ~mail()
    {
        cout<<"DESTRUCTER AT WORK\N";
        getch();
    }         // menu available after sign in
};          // object for 10 users

void mail::reg()
{
    clrscr();
    cout<<"Enter user name ( enter unique name )\n";
    gets(un);
    cout<<"Enter password\n";
    gets(pd);
    ofstream filout;
    filout.open("email",ios::app||ios::binary);
    if(!filout)
    {
        cout<<"cannot open file\n";
    }
    else
    {
        ino=-1;
        sno=-1;

        filout.write((char *)&obj,sizeof(obj));
        filout.close();

    }

    cout<<"You are now registered. Plz login\n";
    getch();

}        // end of sign up or register func

void mail::signin()
{
    int f,i;
    char subj[25],message[50],usrnm[25];       // temporary varibles to store

start:
    clrscr();
    cout<<"1.compose \n2.inbox \n3.Sent\n4.logout";
    cout<<"\nEnter ur choice\n";

    int ch;
    cin>>ch;

    switch(ch)
    {

    case 1:
        cout<<"enter username\n";
        gets(usrnm);

        {            // beginning of local loop
            mail temp;

            ifstream filein;
            filein.open("email",ios::in|ios::binary);
            if(!filein)
            {
                cout<<"Unable to open file to read\n";
            }
            else
            {

                filein.read((char *)&temp,sizeof(temp));
                while(filein)
                {
                    if(strcmp(usrnm,temp.un)==0)
                    {

                        cout<<" User name valid\n";

                        f=1;

                        cout<<"Enter subject\n";
                        gets(subj);
                        cout<<"Enter message\n";
                        gets(message);
                        temp.ino++;
                        strcpy(temp.isbj[temp.ino],subj);

                        strcpy(temp.imsg[temp.ino],message);  // copying message to recepient inbox

                        sno++;
                        strcpy(ssbj[sno],subj);
                        strcpy(smsg[sno],message);  // copying messages to sender sent folder

                        cout<<"Your message has been sent successfully\n";
                        break;
                    }
                    else
                    {
                    }

                    filein.read((char *)&temp,sizeof(temp));
                }               // end of while

            }
            filein.close();

            mail temp1;

            long pos;
            fstream fio("email",ios::in|ios::out|ios::binary);
            pos=fio.tellg();
            fio.read((char*)&temp1,sizeof(temp1));

            while(fio)
            {

                if(strcmp(un,temp1.un)==0)
                {

                    fio.seekg(pos);

                    fio.write((char*)&obj,sizeof(obj));
                    break;
                }
                pos=fio.tellg();
                fio.read((char*)&temp1,sizeof(temp1));
            }
            fio.close();

            mail temp2;

            fio.open("email",ios::in|ios::out|ios::binary);
            pos=fio.tellg();
            fio.read((char*)&temp2,sizeof(temp2));

            while(fio)
            {

                if(strcmp(temp.un,temp2.un)==0)
                {

                    fio.seekg(pos);

                    fio.write((char*)&temp,sizeof(temp));
                    break;
                }
                pos=fio.tellg();
                fio.read((char*)&temp2,sizeof(temp2));
            }
            fio.close();

        } // end of block

        if(f==0)
            cout<<"invalid user. Please enter a valid user name\n";
        getch();
        break;

    case 2:
        if(ino<0)
            cout<<"There are no messages in your inbox\n";
        else
        {
            for(i=0;i<=ino;i++)
            {
                cout<<"\nMessage "<<i+1<<"\n";   // printing inbox messages

                puts(isbj[i]);

                puts(imsg[i]);

            }
        }
        getch();
        break;

    case 3:
        if(sno<0)
            cout<<"There are no sent messages\n";
        else
        {
            for(i=0;i<=sno;i++)
            {

                cout<<"\nMessage "<<i+1<<"\n";
                puts(ssbj[i]);
                puts(smsg[i]);

            }
        }
        getch();
        break;

    case 4:
        cout<<"Logout sucess\n";
        return;

    default : cout<<"wrong choice\n";

    } // end of switch

    goto start;

} // end of signin

void screen(void);
void signup(void);

void main()
{
    clrscr();
    char usrnm[25],pwd[25],s[25],c;
    int i;
m:

    clrscr();
    screen();
    gotoxy(30,4);
    c=getch();

    if(c=='i'||c=='I')               //if user opts to sign in
    {

        gotoxy(62,11);
        gets(usrnm);
        gotoxy(62,13);

        for(i=0;i< 25;i++)                   // getting password
        {
            if( i < 0)
                i=0;
            pwd[i]=getch();
            if(pwd[i]=='\b')
            { i-=2;
            cout<<"\b \b";
            continue;
            }

            if(pwd[i]=='\r')
                break;
            cout<<"*";
        }
        pwd[i]='\0';
        clrscr();

        int f;
        {                       // local block

            mail obj;

            ifstream filein;
            filein.open("email",ios::in|ios::binary);
            if(!filein)
            {
                cout<<"Unable to open file to read\n";
            }
            else
            {
                filein.seekg(0);

                filein.read((char *)&obj,sizeof(obj));
                while(filein)
                {
                    if(strcmp(usrnm,obj.un)==0)
                    {
                        f=1;
                        if(strcmp(pwd,obj.pd)==0)
                        {

                            obj.signin();
                            break;
                        }
                        else
                        {
                            cout<<"wrong password\n";
                            getch();

                            break;
                        }

                    } // end of if
                    else
                    {
                    }
                    filein.read((char *)&obj,sizeof(obj));
                }               // end of while

                filein.close();
            } // end of else

        }

        if(f==0)
            cout<<"Wrong username or password\n";
        getch();
        goto m;
    }
    else if(c=='s'||c=='S')       // user opts to sign up
    {
        signup();
        getch();
        goto m;
    }
    else if(c=='e'||c=='E')       // user choose to exit
        exit(0);
    else
    {
        clrscr();
        cout<<"you have entered a wrong key. please check and try again\n";

        getch();
        goto m;
    }

}  //end of main

void signup()                   // sign up function
{

    int t;
    clrscr();
    {
        mail obj;
        ifstream filin;
        filin.open("user.txt",ios::ate);
        if(!filin)
        {
            cout<<"cannot open file\n";
        }
        else
        {
            filin.seekg(0);
            filin>>t;
        }

        filin.close();

        user=t;
        ++user;                     // incrementing no. users

        ofstream filout;
        filout.open("user.txt",ios::out);
        if(!filout)
        {
            cout<<"cannot open file\n";
        }
        else
        {
            filout.seekp(0);
            filout<<user;
        }

        filin.close();

        obj.reg();

    }  // end of block

    return;

}       // end of sign up

void screen()                // function for login screen
{
    int i;
    for(i=0;i<80;i++)
        cout<<"*";
    cout<<" SuperMail                             New to SuperMial ? Create an Account     ";
    for(i=0;i<80;i++)
        cout<<"*";
    cout<<" Press S To Sign up                    Already have a account Press I to sign in";
    for(i=0;i<80;i++)
        cout<<"-";
    gotoxy(1,6);
    cout<<"\n\n\n\n Super mail is built on the idea that \n it can be more intuitive,efficient and \n useful and may be even fun:\n\n Lots of space\n\n Less spam";
    gotoxy(1,22);
    for(i=0;i<80;i++)
        cout<<"-";
    gotoxy(32,23);
    cout<<"PRESS E TO EXIT";
    gotoxy(1,24);
    for(i=0;i<80;i++)
        cout<<"-";
    gotoxy(50,10);
    cout<<"-------------------------------";
    gotoxy(50,11);
    cout<<"| USERNAME :                  |";
    gotoxy(50,12);
    cout<<"-------------------------------";
    gotoxy(50,13);
    cout<<"| PASSWORD :                  |";
    gotoxy(50,14);
    cout<<"-------------------------------";
} 
```

还有其他错误也谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:56:21.570

该对象没有被破坏，但名称`obj`在内部不可用`reg()`- 这正是您在内部命名对象的名称`main()`。

您可以通过 引用成员函数中的当前对象`*this`，但您也可以直接访问成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:57:23.720

您应该`obj`在`reg()`方法中使用`this`（例如this->data）指针作为`reg()`邮件类中的成员引用，它`obj`是一个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:58:30.367

Obj 只是变量的本地名称。当您在类函数中时，您可以使用 this 访问“obj”（这是类的当前实例）。关键字`this`是指向类实例的指针。你可以做：

```
this->foo();  //  called a smart pointer
//or
*this.foo();  //  deference the variable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T12:02:26.280

obj**只是一个变量名**。您不想在文件中写入 obj 。您想要的是在文件中**写入当前的类变量**。只需在方法中使用成员变量，因为它们将可用。
或者，如果您有类似这样的外部方法

```
无效写（邮件* a）
```

，那么你需要把它称为

```
写（这个）。
```

如果写入对象的方法是成员函数，如

```
无效邮件::写()
```

，然后简单地调用 write() 并且第一点适用于方法 write。

编辑： - 你不能这样做

```
filout.write((char *)&obj,sizeof(obj));
```

. 这将打印出一些乱码。而不是这个尝试打印单个变量的内容。

# php - AutoIncrement（重新排序）php数组值

> ID：13951910
> 
> 赞同：1
> 
> 时间：2012-12-19T11:54:17.953
> 
> 标签：php

有没有办法重新排序数组中的值？例如我有

```
 Array (
    "one" => 0,
     "tow" => 0,
     "three" => 0,
     "four" => 8,
     "apple" => 4,
     "pink" => 3,
   ); 
```

并将其转换为

```
 Array (
    "one" => 0,
     "tow" => 1,
     "three" => 2,
     "pink" => 3,
     "apple" => 4,
     "four" => 5,
   ); 
```

## 编辑：

请注意，“4”的值更大，应该更改为 5，“apple”和“pink”不应该更改

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T11:57:07.337

怎么这么简单...

```
$source  = array('one' => 0, 'tow' => 0, 'three' => 0, 'four' => 8, 'apple' => 4, 'pink' => 3);
asort($source);
$result  = array_flip(array_keys($source)); 
```

说明：`array_keys`将原始数组的所有键收集为另一个*索引*数组，并将`array_flip`这些索引转换为值。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:56:47.977

```
$i = 0;
foreach( $array as $key => $value )
{
    $array[$key] = $i;
    $i++
} 
```

应该这样做:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:57:54.033

您可能正在寻找[PHP asort()](http://php.net/manual/en/function.asort.php)。

# jquery - 向上滚动时jquery航点不起作用

> ID：13951911
> 
> 赞同：1
> 
> 时间：2012-12-19T11:54:27.210
> 
> 标签：jquery, parallax, jquery-waypoints

我使用 stellar.js 和航点创建了以下视差动画。我正在为图像而不是背景设置动画，并且在切换幻灯片时我也在淡入和淡出一些文本。这一切都在向下滚动时有效，但在从幻灯片 4 向上滚动时无效。

就好像在幻灯片移动之前上升航点时触发，所以当从幻灯片 4 到 3 时，它仍然认为 dataslide 是 4。所以我添加了一种方法来强制 dataslide 变量为 (dataslide-1) 有效对于导航，但即使 activeSlideNumber（因此我们在进入数据幻灯片之前来自的幻灯片）是正确的数字，activestip 类也不会从幻灯片 4 中删除，并且幻灯片 3 中的文本也不会淡入。

这是 HTML

```
<ul class="navigation">
    <li data-slide="1"><a href="#slide1">Slide 1</a></li>
    <li data-slide="2"><a href="#slide2">Slide 2</a></li>
    <li data-slide="3"><a href="#slide3">Slide 3</a></li>
    <li data-slide="4"><a href="#slide4">Slide 4</a></li>
        </ul>

        <div class="slide" id="slide1" data-slide="1">
            <div class="wrapper">

                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/1/home_1_1.png" data-stellar-ratio="1" data-stellar-vertical-offset="90" alt="" width="559" height="550">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/1/home_1_2.png" data-stellar-ratio="1.3" data-stellar-vertical-offset="120" alt="" width="329" height="330">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/1/home_1_3.png" data-stellar-ratio="1" data-stellar-vertical-offset="80" alt="" width="630" height="463">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/1/home_1_4.png" data-stellar-ratio="3.2" data-stellar-vertical-offset="80" alt="" width="572" height="578">

                <div class="strip">
                    <div class="stripOuter">
                        <div class="stripInner">
                            <div class="row">
                                <div class="span4 heading">
                                    <h2>openeyes electronic <br />patient records  software</h2>
                                </div>
                                <div class="text span8 offeset1" >
                                    <p>Slide 1 - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis arcu dui, ultricies vitae malesuada vehicula, ultricies eu diam. Sed justo tellus, sagittis ac aliquet sit amet, pretium id libero. In auctor, turpis vel fermentum interdum. </p>
                                </div><!--end of text-->
                            </div>
                            <h3><a class="button" data-slide="2">find out more</a></h3>
                        </div><!-- end of stripInner-->
                    </div><!-- end of stripOuter-->
                </div><!--end of strip-->

            </div>
        </div><!--End Slide 1-->

        <div class="slide" id="slide2" data-slide="2">

            <div class="wrapper">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/2/home_2_1.png" data-stellar-ratio="3" data-stellar-vertical-offset="0" alt="" width="499" height="503">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/2/home_2_2.png" data-stellar-ratio="1.2" data-stellar-vertical-offset="120" alt="" width="544" height="229">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/2/home_2_3.png" data-stellar-ratio="4" data-stellar-vertical-offset="0" alt="" width="222" height="222">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/2/home_2_4.png" data-stellar-ratio="1.7" data-stellar-vertical-offset="30" alt="" width="419" height="418">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/1/home_1_2.png" data-stellar-ratio="6" data-stellar-vertical-offset="10" alt="" width="329" height="330">

                <h2 class="slidetitle" data-stellar-ratio="1.2" data-stellar-vertical-offset="0">Collaboration</h2>
                <h3 class="slidetitle" data-stellar-ratio="1.2" data-stellar-vertical-offset="0">Collaboration</h3>

                <div class="strip">
                    <div class="stripOuter">
                        <div class="stripInner">
                            <div class="row">
                                <div class="span4 heading">
                                    <h2>openeyes electronic <br />patient records  software</h2>
                                </div>
                                <div class="text span8 offeset1" >
                                    <p>Slide 2 - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis arcu dui, ultricies vitae malesuada vehicula, ultricies eu diam. Sed justo tellus, sagittis ac aliquet sit amet, pretium id libero. In auctor, turpis vel fermentum interdum. </p>
                                </div><!--end of text-->
                            </div>
                            <h3><a class="button" data-slide="3">find out more</a></h3>
                        </div><!-- end of stripInner-->
                    </div><!-- end of stripOuter-->
                </div><!--end of strip-->

            </div>

        </div><!--End Slide 2-->

        <div class="slide" id="slide3" data-slide="3">

            <div class="wrapper">

                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/3/home_3_1.png"  alt="" width="893" height="540">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/3/home_3_2.png" data-stellar-ratio="1" data-stellar-vertical-offset="120" alt="" width="535" height="536">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/3/home_3_3.png" data-stellar-ratio="1.5" data-stellar-vertical-offset="80" alt="" width="244" height="242">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/3/home_3_4.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="80" alt="" width="266" height="265">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/3/home_3_5.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="80" alt="" width="468" height="462">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/3/home_3_6.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="80" alt="" width="644" height="350">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/4.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="60" alt="" width="144" height="136">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/4.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="60" alt="" width="144" height="136">

                <h2 class="slidetitle" data-stellar-ratio="1.2" data-stellar-vertical-offset="0">single portal</h2>

                <div class="strip">
                    <div class="stripOuter">
                        <div class="stripInner">
                            <div class="row">
                                <div class="span4 heading">
                                    <h2>openeyes electronic <br />patient records  software</h2>
                                </div>
                                <div class="text span8 offeset1" >
                                    <p>Slide 3 - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis arcu dui, ultricies vitae malesuada vehicula, ultricies eu diam. Sed justo tellus, sagittis ac aliquet sit amet, pretium id libero. In auctor, turpis vel fermentum interdum. </p>
                                </div><!--end of text-->
                            </div>
                            <h3><a class="button" data-slide="4">find out more</a></h3>
                        </div><!-- end of stripInner-->
                    </div><!-- end of stripOuter-->
                </div><!--end of strip-->

            </div>

        </div><!--End Slide 3-->

        <div class="slide" id="slide4" data-slide="4">

            <div class="wrapper">

                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/1.png" alt="" width="533" height="423">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/2.png" alt="" width="636" height="383">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/3.png" data-stellar-ratio="1.5" data-stellar-vertical-offset="80" alt="" width="455" height="455">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/4.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="80" alt="" width="144" height="136">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/4.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="80" alt="" width="144" height="136">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/5.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="80" alt="" width="267" height="246">
                <img src="<?php echo get_template_directory_uri(); ?>/images/homepage/4/6.png" data-stellar-ratio="2.7" data-stellar-vertical-offset="20" alt="" width="783" height="353">

                <h2 class="slidetitle" data-stellar-ratio="1.2" data-stellar-vertical-offset="0">unified data</h2>
                <h3 class="slidetitle" data-stellar-ratio="1.2" data-stellar-vertical-offset="0">unified data</h3>

                <div class="strip">
                    <div class="stripOuter">
                        <div class="stripInner">
                            <div class="row">
                                <div class="span4 heading">
                                    <h2>openeyes electronic <br />patient records  software</h2>
                                </div>
                                <div class="text span8 offeset1" >
                                    <p>Slide 4 - Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis arcu dui, ultricies vitae malesuada vehicula, ultricies eu diam. Sed justo tellus, sagittis ac aliquet sit amet, pretium id libero. In auctor, turpis vel fermentum interdum. </p>
                                </div><!--end of text-->
                            </div>
                        </div><!-- end of stripInner-->
                    </div><!-- end of stripOuter-->
                </div><!--end of strip-->

            </div>

        </div><!--End Slide 4--> 
```

和 JS

```
jQuery(document).ready(function ($) {

    //make the first nav item active
    $('.navigation li:nth-child(1)').addClass('active');

    function repositionandResizeElements() {

        //center strip and move it almost at bottom of the scree
        var windowWidth = $(window).innerWidth();

        //what's the height of the window?
        var windowHeight = window.innerHeight;
        //make all .wrappers of this height
        $('.slide').css('height',windowHeight);

        var first_slide_inner_height = $('.slide').innerHeight();
        var strip_top_position = first_slide_inner_height - (first_slide_inner_height * 24 /100);

        var wrapperWidth = $('#slide1 .wrapper').innerWidth;

        //let's move the strip to 14%less of the height of the slide
        $('.strip').css('top',strip_top_position);

        //let's reposition the strip in the horizontal centre
        if(windowWidth < 1200 && windowWidth >= 960) {
            //we take the full width of the screen, we take out the central div's width
            //and then divide it by 2, as the central div is centrally positioned!
            var wrapper_start = (windowWidth- 960)/2;
            $('.strip').css('left',wrapper_start+'px');
        }else{
            //we take the full width of the screen, we take out the central div's width
            //and then divide it by 2, as the central div is centrally positioned!
            wrapper_start = (windowWidth- 1170)/2;
            $('.strip').css({'left':wrapper_start+'px', 'width':'1170px'});
        }

        //let's move the navigation
        //we take the start of the strip, take out the height of the nav and half its size again
        var navigation_height = $('.navigation').innerHeight();
        var nav_top_position = strip_top_position - navigation_height;
        //the right position will be the

        $('.navigation').css({
            //top:mainpoistion.top+(navheight/2)+'px'
            top:nav_top_position+'px',
            right:wrapper_start+'px'
        });
    }

    repositionandResizeElements();

    $(window).resize(function() {
        repositionandResizeElements();
    });

    //left element from slide 4
    var leftElement = $('.slide[data-slide="4"] img:nth-child(1)');
    var leftElementWidth = '-'+leftElement.width()+'px';
    var leftElementLeftPosition = leftElement.position().left;

    //right element
    var rightElement = $('.slide[data-slide="4"] img:nth-child(2)');
    var rightElementWidth = rightElement.width()+'px';
    var rightElementTopPosition = rightElement.position().top;

    var yMiddleOfWrapper = $('.slide[data-slide="4"] .wrapper').innerHeight();

    //lets hide the main 2 elements in slide 4
    //$(rightElement).hide();
    leftElement.add(rightElement).hide();

    //hide all the strips except first one
    $('.strip').addClass('inactivestrip');
    $('#slide1 .strip').addClass('activestrip');

    //temporary fix to bug:It detects the dimensions of elements that have been set using CSS instead of from HTML attributes
    /*$('img[data-stellar-ratio]').each(function() {
        var $this = $(this);
        $this.css({
            width: $this.attr('width') + 'px',
            height: $this.attr('height') + 'px'
        });
    });*/

    //initialise Stellar.js
    $(window).stellar({
        // Set scrolling to be in either one or both directions
        horizontalScrolling: false,

        // Set the global alignment offsets
        horizontalOffset: 0,
        verticalOffset: 0
    });

    //Cache some variables
    var links = $('.navigation').find('li');
    slide = $('.slide');
    button = $('.button');
    mywindow = $(window);
    htmlbody = $('html,body');

    //find the position of the wrapper
    var slide1_position = $('#main').position();
    var slide1_position_top = slide1_position.top;

    //Setup waypoints plugin
    slide.waypoint(function (event, direction) {

        var activeSlideNumber = 1;

        //grab the current slide
        activeSlideNumber = $('.activestrip').parent().parent().data('slide');

        $('.slide[data-slide="' + activeSlideNumber + '"]').removeClass('activestrip');

        //cache the variable of the data-slide attribute associated with each slide
        dataslide = $(this).attr('data-slide');

        //if we are scrolling to slide 4
        if(dataslide == 4) {

            $(rightElement).css({
                'right':rightElementWidth,
                'top': (yMiddleOfWrapper/2) -(yMiddleOfWrapper * 10%100)
            });

            //let's hide elements out of the screen to bring them in afterwards
            $(leftElement).css('left',leftElementWidth);
            $(rightElement).css('width',0);
        }

        //If the user scrolls up change the navigation link that has the same data-slide attribute as the slide to active and
        //remove the active class from the previous navigation link
        if (direction === 'down') {
            $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').prev().removeClass('active');
        }
        // else If the user scrolls down change the navigation link that has the same data-slide attribute as the slide to active and
        //remove the active class from the next navigation link
        else {
            dataslide = ( dataslide -1 );
            $('.navigation li[data-slide="' + dataslide + '"]').addClass('active').next().removeClass('active');
        }
    });

    //waypoints doesnt detect the first slide when user scrolls back up to the top so we add this little bit of code, that removes the class
    //from navigation link slide 2 and adds it to navigation link slide 1.
    mywindow.scroll(function () {

        if (mywindow.scrollTop() == 0) {
            $('.navigation li').removeClass('active');
            $('.navigation li[data-slide="1"]').addClass('active');
            $('.slide .strip').removeClass('activestrip').addClass('inactivestrip');
            $('#slide1 .strip').addClass('activestrip');
        }
    });

    //Create a function that will be passed a slide number and then will scroll to that slide using jquerys animate. The Jquery
    //easing plugin is also used, so we passed in the easing method of 'easeInOutQuint' which is available throught the plugin.
    function goToByScroll(dataslide) {
        //hide active strip
        $('.activestrip .text, .activestrip .button').fadeOut(1000);

        var slideto = 0;

        if(dataslide > 1)
        {
            slideto = $('.slide[data-slide="' + dataslide + '"]').offset().top+2;
        }else if(dataslide == 4){
            slideto = $('.slide[data-slide="' + dataslide + '"]').offset().top+8;
        }
        htmlbody.animate({
            scrollTop: slideto
        },
            2000,
            'easeInOutQuint',
            function(){

                //make the first nav item active
                $('#slide1 .strip').removeClass('activestrip');

                //show current slide text
                $('.slide[data-slide="' + dataslide + '"] .strip .text, .slide[data-slide="' + dataslide + '"] .strip .button').fadeIn(1000);
                $('.slide[data-slide="' + dataslide + '"] .strip').removeClass('inactivestrip').addClass('activestrip');

                if(dataslide == 4)
                {
                    //then we want to bring the left item in slowly
                    $(leftElement).show();
                    $(rightElement).show();
                    $(leftElement).animate({
                        left:leftElementLeftPosition
                    },
                    1800,
                    function(){
                        $(rightElement).animate({
                            width:rightElementWidth,
                            right:leftElementLeftPosition,
                            top:rightElementTopPosition
                        },
                        1800);
                    });
                }
            }
        );
    }

    //When the user clicks on the navigation links, get the data-slide attribute value of the link and pass that variable to the goToByScroll function
    links.click(function (e) {
        e.preventDefault();
        dataslide = $(this).attr('data-slide');
        goToByScroll(dataslide);
    });

    //When the user clicks on the button, get the get the data-slide attribute value of the button and pass that variable to the goToByScroll function
    button.click(function (e) {
        e.preventDefault();
        dataslide = $(this).attr('data-slide');
        goToByScroll(dataslide);
    });
}); 
```

# android - startMethodTracing 最大缓冲区大小

> ID：13951913
> 
> 赞同：1
> 
> 时间：2012-12-19T11:54:33.057
> 
> 标签：android

什么定义了`startMethodTracing`允许的最大缓冲区大小？

我虽然这是设备的可用 RAM 量，但现在我在具有（通常）3.3GB 可用 RAM 的虚拟机上使用 android-x86 映像进行测试，但我无法将缓冲区大小设置为大于 1,125 GB（可以多一点但小于 1,25GB）。在具有 550MB 可用 RAM 的真实设备上，我可以使用 +-400MB 作为缓冲区大小。

# sql - 3个表之间的左外连接

> ID：13951918
> 
> 赞同：2
> 
> 时间：2012-12-19T11:54:47.050
> 
> 标签：sql, oracle, join

我有 3 张桌子。

1.  座位表
2.  当地雇员
3.  外籍员工。

在 Seat 和 Local 之间有一个共同的列 person_id，它告诉哪个人坐在哪个座位上。

在 Seat 和 Foreign 表之间以同样的方式，还有 person_id。

我能够在 Seat 和 Local ... 以及 Seat 和 Foreign 之间获取所需的数据，使用左外连接获取空座位的空座位和占用座位的 personid。

我的问题是，我可以获得一个包含两个表的查询映射座位表并获得一个综合报告吗？

现在使用的查询是：

```
select seat.apeh05_person_id_k
      ,seat.apeh18_seat_r seatNo
      , seat.apeh17_floor_k  seatFloor
      ,vendor.apeh15_cds_d cdsid
      , vendor.apeh15_first_n firstname
      , vendor.apeh15_last_n lastname
      ,vendor.apeh15_supervisor_cds_d ll6cdsid
      ,vendor.apeh15_ll5_cds_d ll5cdsid
      , vendor.apeh15_ll4_cds_d ll4cdsid 
 from iapeh18_seat seat ,
       IAPEH15_VENDOR_EMPLOYEE  vendor
 where seat.apeh05_person_id_k = vendor.apeh15_vendor_employee_k (+) 
 order by   seat.apeh05_person_id_k asc 
```

另一个查询是：

```
select seat.apeh05_person_id_k
      ,seat.apeh18_seat_r seatNo
      , seat.apeh17_floor_k  seatFloor
      ,local.apeh09_cds_d cdsid
      ,local.apeh09_first_n firstname
      , local.apeh09_last_n lastname
      ,local.apeh09_supervisor_cds_d ll6cdsid
      ,local.apeh09_ll5_cds_d ll5cdsid
      ,  local.apeh09_ll4_cds_d ll4cdsid 
 from iapeh18_seat seat 
        , IAPEH09_LOCAL_EMPLOYEE local
 where seat.apeh05_person_id_k = local.apeh05_candidate_k (+)
 order by seat.apeh05_person_id_k asc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:36:18.650

可能是 Remko Jansen 答案的更有效版本

```
select seat.apeh05_person_id_k person_id
      ,seat.apeh18_seat_r seatNo
      ,seat.apeh17_floor_k  seatFloor
      ,employee.apeh15_cds_d cdsid
      ,employee.apeh15_first_n firstname
      ,employee.apeh15_last_n lastname
      ,employee.apeh15_supervisor_cds_d ll6cdsid
      ,employee.apeh15_ll5_cds_d ll5cdsid
      ,employee.apeh15_ll4_cds_d ll4cdsid 
  from iapeh18_seat seat ,
    (select * from IAPEH15_VENDOR_EMPLOYEE  
      union all
     select * from IAPEH09_LOCAL_EMPLOYEE
    ) employee
   where seat.apeh05_person_id_k = employee.apeh05_candidate_k (+)
   order by apeh05_person_id_k 
```

起初联合并在那之后加入 - 省去执行不同行的麻烦（相当昂贵的操作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T12:08:06.540

你可以，像这样，但我不确定这是否是你想要的。如果本地和供应商在 apeh05_person_id_k 中都有一个 id 的人，你想发生什么？

此外，您通常需要外键约束，但现在这是不可能的，因为 seat.apeh05_person_id_k 可以包含两个表中的 id。

总而言之，我认为这是您要求的，但我认为您的设计存在缺陷。

```
select 
  seat.*, -- Omitted field list for readability
  nvl2(local.apeh05_candidate_k, local.WhateverField, vendor.WhateverField) as WhateverField,
  nvl2(local.apeh05_candidate_k, local.YetAnotherField, vendor.YetAnotherField) as YetAnotherField
from 
  iapeh18_seat seat
  LEFT JOIN IAPEH15_VENDOR_EMPLOYEE vendor
    ON seat.apeh05_person_id_k = vendor.apeh15_vendor_employee_k
  LEFT JOIN IAPEH09_LOCAL_EMPLOYEE local
    ON seat.apeh05_person_id_k = local.apeh05_candidate_k
order by   
  seat.apeh05_person_id_k asc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T12:17:54.917

由于两个查询都包含完全相同的列，您可以使用 UNION 语句将它们合并在一起，如下所示：

```
select seat.apeh05_person_id_k person_id
      ,seat.apeh18_seat_r seatNo
      ,seat.apeh17_floor_k  seatFloor
      ,vendor.apeh15_cds_d cdsid
      ,vendor.apeh15_first_n firstname
      ,vendor.apeh15_last_n lastname
      ,vendor.apeh15_supervisor_cds_d ll6cdsid
      ,vendor.apeh15_ll5_cds_d ll5cdsid
      ,vendor.apeh15_ll4_cds_d ll4cdsid 
  from iapeh18_seat seat ,
       IAPEH15_VENDOR_EMPLOYEE  vendor
 where seat.apeh05_person_id_k = vendor.apeh15_vendor_employee_k (+) 
UNION
select seat.apeh05_person_id_k person_id
      ,seat.apeh18_seat_r seatNo
      ,seat.apeh17_floor_k  seatFloor
      ,local.apeh09_cds_d cdsid
      ,local.apeh09_first_n firstname
      ,local.apeh09_last_n lastname
      ,local.apeh09_supervisor_cds_d ll6cdsid
      ,local.apeh09_ll5_cds_d ll5cdsid
      , local.apeh09_ll4_cds_d ll4cdsid 
 from iapeh18_seat seat 
        , IAPEH09_LOCAL_EMPLOYEE local
 where seat.apeh05_person_id_k = local.apeh05_candidate_k (+)
 order by person_id 
```

UNION 运算符返回出现在任一结果中的所有**不同行。**请参阅：[UNION [ALL]、INTERSECT、MINUS 运算符](http://docs.oracle.com/cd/B19306_01/server.102/b14200/queries004.htm)

# c# - C# 应用程序未运行，退出代码为 -1073740791 (0xc0000409)

> ID：13951924
> 
> 赞同：4
> 
> 时间：2012-12-19T11:55:04.973
> 
> 标签：c#, c++

我创建了一个 C# 应用程序，有 3 个项目：

1.  C# 项目 [启动]
2.  命令行项目
3.  本机 C++ 项目 [使用 VC90 编译器 (Visual Studio 2008)]

在这里，我在 C++ 项目中有一个简单的类，我正在从 CLI 项目中导出并调用这个类的一个非常简单的方法。

代码构建良好，但是一旦我尝试运行它，它就会退出并显示以下输出消息：

> 程序“[6088] VS2012_ConsoleApp.exe: Native”已退出，代码为 -1073740791 (0xc0000409)。程序“[6088] VS2012_ConsoleApp.exe: Managed (v4.0.30319)”已退出，代码为 -1073740791 (0xc0000409)。

如果我在堆中创建一个类对象，它工作正常。如果我创建静态对象实例，就会出现错误。

```
// WORKING CODE [Object creation on heap]   
    NativeClass* cls = new NativeClass();
    int returnVal = cls->Add(A, B);

// This code is not working
    NativeClass cls;
    int returnVal = cls.Add(A, B);
    return returnVal; 
```

# python - Django 复制粘贴的代码有效但没有输入

> ID：13951926
> 
> 赞同：1
> 
> 时间：2012-12-19T11:55:08.483
> 
> 标签：python, django

我是一个服用`djangobook tutorial`。我尝试自己输入整个代码，但在某些情况下，例如现在，我的代码并不正确，尽管复制粘贴的代码相同，但它运行良好。如何解决这个问题？

**我的代码（不工作）是：**

```
{% extends "base.html" %}
{$ block title %}The current time{% endblock %}
{% block content %}
<p>It is now {{ current_date }}.</p>
{% endblock %} 
```

**本教程提供的（工作代码）是：**

```
{% extends "base.html" %}
{% block title %}The current time{% endblock %}
{% block content %}
<p>It is now {{ current_date }}.</p>
{% endblock %} 
```

> 我得到：第 3 行错误无效的块标签：'endblock'

很抱歉，我刚刚看到我的错误并且代码不一样...感谢您的即时编辑...我猜stackoverflow真的可以挽救生命！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:57:32.490

您的代码中的第 2 行是错误的：

```
{$ block title %}The current time{% endblock %} 
```

应该

```
{% block title %}The current time{% endblock %} 
```

投资一个 IDE（例如 eclipse）总是一个好主意，它可以在发生此类错误时提供直接反馈并且它们将会发生！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:57:47.533

```
{$ block title %}The current time{% endblock %} 
```

用 % 改变美元符号，你就完成了

# mysql - 空值和非空值

> ID：13951929
> 
> 赞同：0
> 
> 时间：2012-12-19T11:55:11.417
> 
> 标签：mysql, sql, select, null

我想通过比较来获取老师的信息，`u.fld_id = ct.fld_teacher_id` 如果 ct.fld_teacher_id 为空，我将显示尚未分配。但是 ct.fld_teacher_id 为 null 的行在执行时不会出现。

这是我的查询。

```
 SELECT ct.fld_id as id, ct.fld_serial, ct.fld_city, ct.fld_venue_name, 
        ct.fld_start_time, ct.fld_end_time, 
        ct.fld_duration, ct.fld_available_seats, 
        ct.fld_course_price, ct.fld_status,
        c.fld_name, u.fld_first_name, u.fld_last_name,
        ct.fld_status, ct.fld_teacher_id, ct.fld_training_name,
        ct.fld_class, ct.fld_level, ct.fld_is_fixed, tt.fld_name as training_type_name
   FROM tbl_course_training as ct, tbl_users as u,
        tbl_courses as c, tbl_training_types as tt
   WHERE c.fld_id = ct.fld_course_id AND u.fld_id = ct.fld_teacher_id AND 
       ct.fld_teacher_id = 'NULL' AND tt.fld_id = ct.fld_training_type_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:39:39.077

在不知道结构的情况下，我无法整理您的查询。但是，我注意到的事情很少。

*   您不能将 null 值比较为`ct.fld_teacher_id = 'NULL'`（*null 不是字符串*）

    ```
    ct.fld_teacher_id is null -- Correct way 
    ```

*   如果您需要选择即使在`ct.fld_teacher_id is null`那时

    ```
    u.fld_id = isnull(ct.fld_teacher_id, u.fld_id) --or (sql-server) 
    u.fld_id = ct.fld_teacher_id or ct.fld_teacher_id is null --(my sql or sql-server)
    u.fld_id = COALESCE(ct.fld_teacher_id, u.fld_id)  --(my sql) 
    ```

*   还要避免连接表的旧方法，例如`From Table1 t1, Table2 t2`

    ```
    From Table1 t1 JOIN Table2 t2 On t1.Key = t2.Key --Correct way 
    ```

*   我想你需要在`Left Join`这里有几个。请[查看此链接](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)以了解 Sql Joins 的工作原理

# java - JCR-SQL2 查询通配符搜索不起作用。

> ID：13951933
> 
> 赞同：1
> 
> 时间：2012-12-19T11:55:27.033
> 
> 标签：java, jackrabbit, jcr, jcr-sql2

我想运行这个 JCR SQL2 查询：

```
SELECT * FROM [nt:base] WHERE path LIKE '/A/B/%' 
```

但运行查询后，我得到以下异常：

```
javax.jcr.query.InvalidQueryException: Query:
SELECT * FROM [nt:base] WHERE jcr:(*)path LIKE '/A/B/%'; expected: (, ., =, <>, <, >, <=, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:47:55.373

```
SELECT * FROM [nt:base] WHERE ISDESCENDANTNODE([/A/B/%]) 
```

[在这里](http://www.h2database.com/jcr/grammar.html)阅读更多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T11:09:39.590

我希望这将帮助您执行查询：

```
 javax.jcr.query.QueryManager queryManager;

            queryManager = jcrsession.getWorkspace().getQueryManager();
            String expression = "select * from [nt:folder] AS s WHERE ISCHILDNODE(s,'"+name+"')and CONTAINS(s.[edms:owner],'*"+userid+"*')  ORDER BY s.["+Config.EDMS_Sorting_Parameter+"] ASC";

            javax.jcr.query.Query query = queryManager.createQuery(expression, javax.jcr.query.Query.JCR_SQL2); 
```

# ant - 网络状态：本地主机（窗口）上的 NetConnection.Connect.Failed。

> ID：13951936
> 
> 赞同：3
> 
> 时间：2012-12-19T11:55:31.710
> 
> 标签：ant, java, red5

我已经下载了**JDK 1.7**、**ant**和**red5**。

在系统环境中设置以下路径：

1.  `JAVA_HONE=c:/programs/java_home`
2.  `ANT_HOME=c:/programs/ant_home`

ant、java、red5在同一个c:盘，启动red5服务。

Oflademo.war文件**被**复制到`red5/webapps`. 我在浏览器中检查了 URL，`localhost:5080`但没有结果。

我究竟做错了什么？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:11:57.723

```
 and red5 services are started 
```

是什么让你觉得它开始了？如果 localhost:5080 没有给出结果，实际上 red5 根本没有启动。

还需要您给我们red5版本，以及您正在使用的oflaDemo版本，可能这些版本不适合。

还要确保 red5 真的启动了，要调试*任何东西*，你总是应该检查 red5.log、error.log 和最终的 oflademo.log，如果有一个为这个 webapp 创建的。

塞巴斯蒂安

# php - 无法在 PHP 5.2.17 上激活 Xdebug

> ID：13951939
> 
> 赞同：5
> 
> 时间：2012-12-19T11:55:39.140
> 
> 标签：php, apache, xdebug

我正在运行 Apache 2.2.19 和 PHP 5.2.17。我想用Xdebug配置调试，所以我去xdebug.org下载了：php_xdebug-2.1.2-5.2-vc6-nts.dll（我有php VC6 x86版本）。我把它复制到`c:\Program Files (x86)\php\ext\php_xdebug-2.1.2-5.2-vc6-nts.dll`

编辑 PHP.ini（添加）：

```
[xdebug]
xdebug.remote_enable=1
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.remote_handler=dbgp
xdebug.remote_log = "c:\host\xdebug.log"
zend_extension_ts="c:\Program Files (x86)\php\ext\php_xdebug-2.1.2-5.2-vc6-nts.dll" 
```

但我仍然无法在 phpinfo() xdebug 信息中看到 - 所以它不起作用。Apache错误日志说：

```
Failed loading c:\Program Files (x86)\php\ext\php_xdebug-2.1.2-5.2-vc6-nts.dll
Cannot find module (IP-MIB): At line 0 in (none)
Cannot find module (IF-MIB): At line 0 in (none)
Cannot find module (TCP-MIB): At line 0 in (none)
Cannot find module (UDP-MIB): At line 0 in (none)
Cannot find module (SNMPv2-MIB): At line 0 in (none)
Cannot find module (SNMPv2-SMI): At line 0 in (none)
Cannot find module (UCD-SNMP-MIB): At line 0 in (none)
Cannot find module (UCD-DEMO-MIB): At line 0 in (none)
Cannot find module (SNMP-TARGET-MIB): At line 0 in (none)
Cannot find module (SNMP-VIEW-BASED-ACM-MIB): At line 0 in (none)
Cannot find module (SNMP-COMMUNITY-MIB): At line 0 in (none)
Cannot find module (UCD-DLMOD-MIB): At line 0 in (none)
Cannot find module (SNMP-FRAMEWORK-MIB): At line 0 in (none)
Cannot find module (SNMP-MPD-MIB): At line 0 in (none)
Cannot find module (SNMP-USER-BASED-SM-MIB): At line 0 in (none)
Cannot find module (SNMP-NOTIFICATION-MIB): At line 0 in (none)
Cannot find module (SNMPv2-TM): At line 0 in 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T11:59:39.687

您使用的是线程安全的还是非线程安全的 PHP？看起来您下载的 xdebug dll 是用于非线程安全的。我认为您可以使用 phpinfo() 找到这一点。这可能是问题的原因。

如果您使用的是线程安全 PHP，请尝试下载 xdebug 的线程安全版本。这可能会有所帮助。

你可以在这里下载：http: [//xdebug.org/files/php_xdebug-2.1.2-5.2-vc6.dll](http://xdebug.org/files/php_xdebug-2.1.2-5.2-vc6.dll)

# mysql - 具有不同列数的联合查询

> ID：13951940
> 
> 赞同：2
> 
> 时间：2012-12-19T11:55:49.770
> 
> 标签：mysql, select, union

这肯定是一个简单的问题，但我无法修复 MySQL 查询：我想在准备好的查询下运行

```
select id from table1 where c_id = :c_id 
union 
select id,name from table2 where c_id = :c_id and temp = :temp 
```

所以我在每个表选择的输出中有不同数量的列。这是它不起作用的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:57:32.237

您可以`SELECT`在第一个查询中使用文字值，如下所示：

```
SELECT id, 'no name' AS "name" FROM table1 WHERE c_id = :c_id
UNION ALL
SELECT id, name                FROM table2 WHERE c_id = :c_id 
                                             AND temp = :temp; 
```

# python - 对于 GAE 中的 SearchResults 对象，found_count 已弃用？

> ID：13951941
> 
> 赞同：1
> 
> 时间：2012-12-19T11:55:56.597
> 
> 标签：python, google-app-engine

来自 GAE Python 搜索 API 文档： [https ://developers.google.com/appengine/docs/python/search/queryoptionsclass?hl=en](https://developers.google.com/appengine/docs/python/search/queryoptionsclass?hl=en)

包含代码： `pages = results.found_count / page_size`

我正在尝试访问 SearchResults 对象的“found_count”属性，但在日志中出现以下错误：

`'SearchResults' object has no attribute 'found_count'`

此属性是否已弃用？我在 GAE 搜索 API 文档中的任何地方都没有看到其他对“found_count”的引用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:04:37.647

看起来它已被`number_found`文档中其他地方引用的属性所取代。文档不同步！

这有效：`results.number_found`

# windows-phone-7 - WP7 中的 BitmapCache 是什么？

> ID：13951942
> 
> 赞同：2
> 
> 时间：2012-12-19T11:55:57.113
> 
> 标签：windows-phone-7, listbox, bitmapcache

我已经读过[这个线程](https://stackoverflow.com/questions/4716473/bitmapcache-when-and-how-to-use)，但我不知道是什么`BitmapCache`。

根据[msdn](http://msdn.microsoft.com/en-us/library/ff967560%28v=VS.92%29.aspx)，

> 位图缓存允许在第一次渲染后将视觉元素存储为位图。缓存元素后，应用程序会绕过缓存可视元素的渲染阶段，而是显示存储的位图。

我`CacheMode="BitmapCache"`为我的`ListBox`. 我认为在第一次渲染之后，操作系统会将其视觉效果保存为位图，然后继续在每一帧中显示该位图，而无需再次渲染。我认为`ListBox`现在应该是静态的。但我仍然可以滚动`Listbox`.

我一定理解错了。请解释一下是什么`BitmapCache`？

如果它很好，为什么我们不`BitmapCache`为每个元素设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:06:49.977

> 我认为 ListBox 现在应该是静态的。但我仍然可以滚动列表框。

当您滚动列表框时，它会重新绘制其内容，从而更新缓存的表示。位图缓存对于某些转换很有用，例如翻译。在这些情况下，缓存表示具有许多优点：

1.  控件不必重绘其内容 => CPU 经济性
2.  由于视觉表示不再依赖于控件，因此可以直接由 GPU 处理

> 如果它很好，为什么我们不为每个元素设置 BitmapCache 呢？

BitmapCache 使用更多内存，并且似乎存在一些极端情况，它实际上会对性能产生负面影响（尽管我对这个主题的了解不足，无法列举它们）。了解是否应打开 BitmapCache 的一个好方法是将设置`EnableRedrawRegions`设置为 true。然后模拟器将显示哪些区域被重绘，您可以相应地设置 BitmapCache。

# node.js - 管道 apache 日志文件 - 到 nodejs

> ID：13951943
> 
> 赞同：2
> 
> 时间：2012-12-19T11:56:02.687
> 
> 标签：node.js, logging, apache2, apache

所以我想设置一个 nodejs 进程来监听和记录我的 Apache2 服务器的日志文件。我知道有一种方法可以将日志文件“管道”到脚本，但我似乎无法让它工作。

我创建了一个名为“noder”的文件，其中包含以下代码：

```
#!/usr/local/bin/node

var stdin  = process.stdin;
var fs     = require('fs');

stdin.resume();

stdin.on('data', function (chunk) {
     fs.writeFileSync('./output.log',chunk.toString());
}).on('end', function () {
     console.log('stdin:closed exiting');
}); 
```

它只是将标准输入写入文本文件。

我还将我的 httpd.conf 设置设置为以下内容：

```
CustomLog |/tmp/noder logstash_json 
```

*   仅供参考：logstash_json 只是我创建的一种自定义格式，它可以记录到普通文件。

我在 httpd.conf 文件中尝试了各种不同的格式，但似乎没有任何效果。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:17:25.073

经过更多的工作并将我的头绑在桌子上，我终于想通了：

CustomLog "|/usr/local/bin/node /nodelogger/noder" logstash_json

谢谢，

# java - Java：Spring/Quartz：基本教程代码不起作用

> ID：13951950
> 
> 赞同：8
> 
> 时间：2012-12-19T11:56:19.230
> 
> 标签：java, spring, spring-mvc, quartz-scheduler

我正在尝试使用 Spring 和 Quartz 的基本示例。这是我正在关注的教程：[http ://www.mkyong.com/spring/spring-quartz-scheduler-example/](http://www.mkyong.com/spring/spring-quartz-scheduler-example/)

我已尽我所能复制所有内容，但在输出窗口中看不到任何内容。

**spring-quartz.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean id="runMeTask" class="com.ksc.jobs.RunMeTask" />

    <!-- Spring Quartz -->
    <bean name="runMeJob" class="org.springframework.scheduling.quartz.JobDetailBean">
        <property name="jobClass" value="com.ksc.jobs.RunMeJob" />
        <property name="jobDataAsMap">
            <map>
                <entry key="runMeTask" value-ref="runMeTask" />
            </map>
        </property>

    </bean>

    <bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerBean">
        <property name="jobDetail" ref="runMeJob" />
        <property name="repeatInterval" value="5000" />
        <property name="startDelay" value="1000" />

    </bean>

    <bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
        <property name="jobDetails">
            <list>
                <ref bean="runMeJob" />
            </list>
        </property>

        <property name="triggers">
            <list>
                <ref bean="simpleTrigger" />
            </list>
        </property>
    </bean>

</beans> 
```

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <import resource="spring-quartz.xml"/>
</beans> 
```

**项目结构**

![在此处输入图像描述](../Images/a900ae83361b4e032e08b20f74cdefad.png)

**编辑**

我是否需要以某种方式手动启动工作？我在那个教程和其他教程中看到，他们通常在一个`main()`方法中开始一个石英工作。来自 .NET 背景，这对我来说有点奇怪，因为我只知道`main`桌面应用程序中的方法；不是网络应用程序。在 ASP.NET 中`Global.asax`，我们可以在 Web 应用程序启动时调用代码来运行。Java中有一些等价物吗？或者也许这根本不是问题？我只是在这里猜测。如果有人对如何解决这个问题有任何想法，甚至只是给我一个工作样本（甚至可以与上面的样本不同；我并不挑剔）......那么我将不胜感激。我只需要一个基本的工作示例，然后我可以根据我的要求进行修改。

**编辑 2**

这是 glassfish 服务器的输出，如果有帮助的话：

[注：由于本文正文长度过长，已删除。否则我将无法在下面发布编辑#3。]

**编辑 3**

取得了一些进展，但仍然没有工作。我已按照@shuttsy 的建议添加了 log4j 文件，这是 glassfish 的新输出：

```
Launching GlassFish on Felix platform
INFO: Running GlassFish Version: GlassFish Server Open Source Edition 3.1.2.2 (build 5)
INFO: Registered org.glassfish.ha.store.adapter.cache.ShoalBackingStoreProxy for persistence-type = replicated in BackingStoreFactoryRegistry
INFO: Grizzly Framework 1.9.50 started in: 0ms - bound to [0.0.0.0:3700]
INFO: Grizzly Framework 1.9.50 started in: 31ms - bound to [0.0.0.0:8080]
INFO: Grizzly Framework 1.9.50 started in: 15ms - bound to [0.0.0.0:8181]
INFO: Grizzly Framework 1.9.50 started in: 15ms - bound to [0.0.0.0:4848]
INFO: Grizzly Framework 1.9.50 started in: 0ms - bound to [0.0.0.0:7676]
INFO: The Admin Console is already installed, but not yet loaded.
INFO: GlassFish Server Open Source Edition 3.1.2.2 (5) startup time : Felix (1,750ms), startup services(771ms), total(2,521ms)
INFO: HV000001: Hibernate Validator 4.3.0.Final
INFO: JMX005: JMXStartupService had Started JMXConnector on JMXService URL service:jmx:rmi://Matt-Laptop:8686/jndi/rmi://Matt-Laptop:8686/jmxrmi
INFO: Grizzly Framework 1.9.50 started in: 0ms - bound to [0.0.0.0:8080]
INFO: Grizzly Framework 1.9.50 started in: 0ms - bound to [0.0.0.0:8181]
INFO: Created EjbThreadPoolExecutor with thread-core-pool-size 16 thread-max-pool-size 32 thread-keep-alive-seconds 60 thread-queue-capacity 2147483647 allow-core-thread-timeout false 
INFO: SEC1002: Security Manager is OFF.
INFO: SEC1010: Entering Security Startup Service
INFO: SEC1143: Loading policy provider com.sun.enterprise.security.provider.PolicyWrapper.
INFO: SEC1115: Realm [admin-realm] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.
INFO: SEC1115: Realm [file] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.
INFO: SEC1115: Realm [certificate] of classtype [com.sun.enterprise.security.auth.realm.certificate.CertificateRealm] successfully created.
INFO: SEC1011: Security Service(s) Started Successfully
INFO: WEB0169: Created HTTP listener [http-listener-1] on host/port [0.0.0.0:8080]
INFO: WEB0169: Created HTTP listener [http-listener-2] on host/port [0.0.0.0:8181]
INFO: WEB0169: Created HTTP listener [admin-listener] on host/port [0.0.0.0:4848]
INFO: WEB0171: Created virtual server [server]
INFO: WEB0171: Created virtual server [__asadmin]
INFO: WEB0172: Virtual server [server] loaded default web module []
SEVERE: Exception while visiting com/sun/gjc/spi/JdbcObjectsFactory.class of size 3615
java.lang.NullPointerException
    at org.glassfish.hk2.classmodel.reflect.impl.TypesImpl.getType(TypesImpl.java:78)
    at org.glassfish.hk2.classmodel.reflect.impl.ModelClassVisitor.visit(ModelClassVisitor.java:119)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.objectweb.asm.ClassReader.accept(Unknown Source)
    at org.glassfish.hk2.classmodel.reflect.Parser$5.on(Parser.java:363)
    at org.glassfish.hk2.classmodel.reflect.util.JarArchive.onSelectedEntries(JarArchive.java:125)
    at org.glassfish.hk2.classmodel.reflect.Parser.doJob(Parser.java:348)
    at org.glassfish.hk2.classmodel.reflect.Parser.access$300(Parser.java:70)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:307)
    at org.glassfish.hk2.classmodel.reflect.Parser$3.call(Parser.java:296)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

INFO: EclipseLink, version: Eclipse Persistence Services - 2.3.2.v20111125-r10461
INFO: file:/C:/Users/Matt/Documents/NetBeansProjects/KSC/build/web/WEB-INF/classes/_KSCPU login successful
WARNING: Multiple [2] JMX MBeanServer instances exist, we will use the server at index [0] : [com.sun.enterprise.v3.admin.DynamicInterceptor@28245558].
WARNING: JMX MBeanServer in use: [com.sun.enterprise.v3.admin.DynamicInterceptor@28245558] from index [0] 
WARNING: JMX MBeanServer in use: [com.sun.jmx.mbeanserver.JmxMBeanServer@3a683b33] from index [1] 
SEVERE: log4j:ERROR log4j called after unloading, see http://logging.apache.org/log4j/1.2/faq.html#unload.
SEVERE: java.lang.IllegalStateException: Class invariant violation
    at org.apache.log4j.LogManager.getLoggerRepository(LogManager.java:199)
    at org.apache.log4j.LogManager.getLogger(LogManager.java:228)
    at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:64)
    at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:253)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
    at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:272)
    at org.springframework.beans.TypeConverterDelegate.<clinit>(TypeConverterDelegate.java:53)
    at sun.misc.Unsafe.ensureClassInitialized(Native Method)
    at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:43)
    at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:140)
    at java.lang.reflect.Field.acquireFieldAccessor(Field.java:949)
    at java.lang.reflect.Field.getFieldAccessor(Field.java:930)
    at java.lang.reflect.Field.get(Field.java:372)
    at org.glassfish.web.loader.WebappClassLoader.clearReferences(WebappClassLoader.java:1833)
    at org.glassfish.web.loader.WebappClassLoader.stop(WebappClassLoader.java:1662)
    at org.glassfish.web.loader.WebappClassLoader.preDestroy(WebappClassLoader.java:1631)
    at org.glassfish.deployment.common.DeploymentContextImpl.getClassLoader(DeploymentContextImpl.java:236)
    at org.glassfish.deployment.common.DeploymentContextImpl.getClassLoader(DeploymentContextImpl.java:186)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:450)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)

SEVERE:     at org.apache.log4j.LogManager.getLoggerRepository(LogManager.java:199)
SEVERE:     at org.apache.log4j.LogManager.getLogger(LogManager.java:228)
SEVERE:     at org.slf4j.impl.Log4jLoggerFactory.getLogger(Log4jLoggerFactory.java:64)
SEVERE:     at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:253)
SEVERE:     at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:156)
SEVERE:     at org.apache.commons.logging.impl.SLF4JLogFactory.getInstance(SLF4JLogFactory.java:132)
SEVERE:     at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:272)
SEVERE:     at org.springframework.beans.TypeConverterDelegate.<clinit>(TypeConverterDelegate.java:53)
SEVERE:     at sun.misc.Unsafe.ensureClassInitialized(Native Method)
SEVERE:     at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:43)
SEVERE:     at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:140)
SEVERE:     at java.lang.reflect.Field.acquireFieldAccessor(Field.java:949)
SEVERE:     at java.lang.reflect.Field.getFieldAccessor(Field.java:930)
SEVERE:     at java.lang.reflect.Field.get(Field.java:372)
SEVERE:     at org.glassfish.web.loader.WebappClassLoader.clearReferences(WebappClassLoader.java:1833)
SEVERE:     at org.glassfish.web.loader.WebappClassLoader.stop(WebappClassLoader.java:1662)
SEVERE:     at org.glassfish.web.loader.WebappClassLoader.preDestroy(WebappClassLoader.java:1631)
SEVERE:     at org.glassfish.deployment.common.DeploymentContextImpl.getClassLoader(DeploymentContextImpl.java:236)
SEVERE:     at org.glassfish.deployment.common.DeploymentContextImpl.getClassLoader(DeploymentContextImpl.java:186)
SEVERE:     at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:450)
SEVERE:     at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
SEVERE:     at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
SEVERE:     at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
SEVERE:     at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
SEVERE:     at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
SEVERE:     at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
SEVERE:     at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
SEVERE:     at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
SEVERE:     at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
SEVERE:     at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
SEVERE:     at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
SEVERE:     at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
SEVERE:     at java.lang.Thread.run(Thread.java:722)
INFO: EJB5181:Portable JNDI names for EJB EventApplicationService: [java:global/KSC/EventApplicationService!com.ksc.services.EventApplicationService, java:global/KSC/EventApplicationService]
INFO: EJB5181:Portable JNDI names for EJB SiteSettingService: [java:global/KSC/SiteSettingService!com.ksc.services.SiteSettingService, java:global/KSC/SiteSettingService]
INFO: EJB5181:Portable JNDI names for EJB EventsService: [java:global/KSC/EventsService, java:global/KSC/EventsService!com.ksc.services.EventsService]
INFO: EJB5181:Portable JNDI names for EJB UserService: [java:global/KSC/UserService, java:global/KSC/UserService!com.ksc.services.UserService]
INFO: EJB5181:Portable JNDI names for EJB RoleService: [java:global/KSC/RoleService!com.ksc.services.RoleService, java:global/KSC/RoleService]
INFO: EJB5181:Portable JNDI names for EJB AnnouncementService: [java:global/KSC/AnnouncementService!com.ksc.services.AnnouncementService, java:global/KSC/AnnouncementService]
INFO: EJB5181:Portable JNDI names for EJB UserInRoleService: [java:global/KSC/UserInRoleService, java:global/KSC/UserInRoleService!com.ksc.services.UserInRoleService]
INFO: WELD-000900 1.1.8 (Final)
INFO: PWC1412: WebModule[null] ServletContext.log():No Spring WebApplicationInitializer types detected on classpath
INFO: PWC1412: WebModule[null] ServletContext.log():Initializing Spring root WebApplicationContext
SEVERE: log4j:WARN No appenders could be found for logger (org.springframework.web.context.ContextLoader).
SEVERE: log4j:WARN Please initialize the log4j system properly.
SEVERE: log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
INFO: PWC1412: WebModule[null] ServletContext.log():Initializing Spring FrameworkServlet 'dispatcher'
INFO: WEB0671: Loading application [KSC] at [/KSC]
INFO: KSC was successfully deployed in 10,070 milliseconds. 
```

所以，我们这里有一个关于 Quartz 的新错误（可能与我原来的问题有关，也可能无关）。似乎该错误与 JDBC 相关。我正在使用 sqljdbc4 驱动程序： http: [//www.microsoft.com/en-us/download/details.aspx? displaylang=en&id=11774](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T14:21:20.433

您的 glassfish 输出表明您的 log4j 配置不正确。你有 log4j.properties 文件吗？尝试添加一个基本内容为：

```
log4j.rootLogger=INFO,stdout

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%d %-5p - %m (%c)%n 
```

Spring 将记录加载的 xml 文件和创建的 bean，但由于 log4j 问题，您没有获得此信息。

注意：您可以使用更简单的 Spring xml 获得相同的结果（即每 5 秒触发一次任务）：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:task="http://www.springframework.org/schema/task"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd">

<bean id="runMeTask" class="com.mkyong.common.RunMeTask" />

<task:scheduled-tasks>
    <task:scheduled ref="runMeTask" method="printMe" cron="0/5 * * * * * " />
</task:scheduled-tasks> 
```

试试这个，你现在得到你的输出了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T08:11:17.393

最后我找到了一个可行的解决方案！！！

基本上，我把里面的所有东西都拿走了，`spring-quartz.xml`然后把它卡在了我的`dispatcher-servlet.xml`里面……现在它正在运行……可爱……

我仍然想知道为什么其他方式不起作用。我猜要么：

1.  该行：`<import resource="spring-quartz.xml"/>`没有工作..或：
2.  `applicationContext.xml`文件本身没有被加载..

我不是java专家，所以我不知道那个答案。如果有人有想法，请在此处发布。不管怎样，谢谢大家的尝试。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:32:08.397

是的，问题是 applicationContext.xml 文件没有加载。

在作为 Web 应用程序中，加载的默认配置文件是 -servlet.xml 文件。

通常，所有与 web 轮胎相关的 bean 都将在此配置文件中声明。

如果要加载单独的上下文文件，则需要在 web.xml 文件中指定它，例如：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml 
    </param-value>
</context-param>

<context-param>
    <param-name>contextClass</param-name>
    <param-value>
        org.springframework.web.context.support.XmlWebApplicationContext
    </param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

在您的情况下，您可以将其`<import resource="spring-quartz.xml"/>`移至`dispatcher-servlet.xml`或添加对`applicationContext.xml`文件的支持

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T13:13:33.607

> 我是否需要以某种方式手动启动工作？

不，您不需要手动启动它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T10:02:26.280

尝试改变

```
<import resource="spring-quartz.xml"/> 
```

到

```
<import resource="/WEB-INF/spring-quartz.xml"/> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-18T10:22:33.440

在 Spring 配置之前，服务器跟踪中会出现异常。问题来自被窃听的 Glassfish 版本 3.1.2.2：看这里，您会发现与您的问题相同的问题： [https](https://java.net/jira/browse/GLASSFISH-18609) : //java.net/jira/browse/GLASSFISH-18609 Glassfish 在启动时抛出 NullPointerException

另一个线索是地址[http://logging.apache.org/log4j/1.2/faq.html#unload](http://logging.apache.org/log4j/1.2/faq.html#unload) Apache log4j 团队正在讨论这个问题。他们建议：

*   将 org.apache.catalina.loader.WebappClassLoader.ENABLE_CLEAR_REFERENCES 系统属性设置为 false。
*   应用来自错误 40212 的补丁或升级到应用了该补丁的版本。
*   升级到 log4j 1.2.16 或更高版本以更好地防御类加载器攻击或在它发生时提供更好的诊断消息。

我认为您将不得不使用更新版本的 Glashfish 和 Log4j。

希望它会有所帮助

# c++ - 在 Python-C++-C-Fortran 2003 程序中链接英特尔的 MKL

> ID：13951953
> 
> 赞同：2
> 
> 时间：2012-12-19T11:56:22.873
> 
> 标签：c++, python, boost, fortran, intel-mkl

我正在尝试链接一个性质非常复杂的程序：

*   在 Linux Fedora 下开发和运行
*   用 fortran 2003 编写的主要代码在很大程度上依赖于 Intel 的 MKL 库和一小段 ANSI C 代码
*   它有 C++ 接口（使用 iso_c_binding）
*   通过 boost.python 从 python 访问 c++ 接口

在运行时我得到以下文本

```
MKL FATAL ERROR: Cannot load neither libmkl_avx.so nor libmkl_def.so 
```

之后程序停止。

我已经检查了两者`libmkl_avx.so`并且`libmkl_def.so`都在`$LD_LIBRARY_PATH`

最终链接通过以下方式完成：

```
g++ -g3 -shared -Wl,-soname,libFrrBoost_rt.so interfejs.o t83.o gen_random2.o 
-L/opt/intel/composerxe/mkl/lib/intel64 -lpython2.7 -lifport -lifcore -lboost_python     
-Wl,--start-group -lmkl_sequential -lmkl_intel_lp64 -lmkl_core  -Wl,--end-group 
-o libFrrBoost_rt.so 
```

libFrrBoost 是被链接的模块，那么

导入模块 libFrrBoost 的运行`python t83.py`（特别是链接器在准备二进制文件时不会抱怨）会导致错误。

试图谷歌。我发现的所有信息都与用 C/Fortran 编写的“常规程序”有关，其中包括英特尔的 MKL。我能够毫无问题地运行这类程序。我认为 Makefile 中链接行的 MKL 部分在这两种情况下都是等价的，但一定有一个隐藏的谜团。问题通常是错误的链接 - 我认为这不适用（这些库与英特尔手册中的完全一样 - 接口、线程和计算库非常标准）

使用的编译器：

ifort 12.1.0、icpc 12.1.0、python Python 2.7.1、icc 12.1.0（小 C 代码段也调用 MKL，但是）

**编辑（由于 Hirsto Iliev 的评论）**

我已经以这种方式运行了 strace `strace python t83.py`：; 结果是（在 grepping 之后`libmkl`：

```
open("/opt/intel/composer_xe_2011_sp1.7.256/mkl/lib/intel64/libmkl_avx.so", O_RDONLY) = 3
open("/usr/bin/libmkl_avx.so", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/opt/slurm-2.2.5/lib/libmkl_avx.so", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/opt/intel/composer_xe_2011_sp1.7.256/compiler/lib/intel64/libmkl_avx.so", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/opt/intel/composer_xe_2011_sp1.7.256/debugger/lib/intel64/libmkl_avx.so", O_RDONLY) = -1 ENOENT (No such file or directory)
open("/opt/intel/composer_xe_2011_sp1.7.256/mkl/lib/intel64/libmkl_avx.so", O_RDONLY) = 3 
```

我知道 open 的规范在[这里](http://www.gnu.org/software/libc/manual/html_node/Opening-and-Closing-Files.html)是特别的，因为 3,4 是肯定的，表明 open 找到了一个文件并为其分配了文件描述符。我已经验证该文件确实存在于那个地方。

这也是“好”的英特尔编译器目录：

```
czeslaw@stefan:~/prog/FoCpy3 $ which ifort
/opt/intel/composer_xe_2011_sp1.7.256/bin/intel64/ifort 
```

所以版本是一样的——显然这不是版本问题。

一切都是一样的`libmkl_def.so`。

**免责声明**：虽然我听起来对我写的东西很有信心，但我不是。每个句子都应该以“如果我没记错的话”开头。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-12T20:27:05.113

对我来说，[英特尔网站](http://software.intel.com/en-us/forums/topic/300857)上提出的解决方案效果很好

```
export LD_PRELOAD=/opt/intel/mkl/lib/intel64/libmkl_core.so:/opt/intel/mkl/lib/intel64/libmkl_sequential.so 
```

这似乎是某种错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T06:50:39.537

似乎解决方案是链接`-lmkl_rt`而不是`-lmkl_sequential -lmkl_intel_lp64 -lmkl_core`. 我不明白为什么一个人应该比另一个人更有优势。我很困惑，但这有效（到目前为止）。

**编辑** 英特尔人员声称这是 MKL 库错误。

# javascript - 骨干收集计数器

> ID：13951956
> 
> 赞同：6
> 
> 时间：2012-12-19T11:56:33.307
> 
> 标签：javascript, backbone.js

我有一个集合女巫可以在后端对集合进行分页，所以我在滚动上批量处理另一批项目。我知道服务器上的项目数。我正在寻找一种方法来扩展我的所有收藏`getCounter`。这个想法是最初设置服务器计数器，当用户从集合中添加或删除项目时，计数器会更新。什么是最好的方法？

我认为问题在于`add`当我从服务器获取新项目时也会触发该事件。否则我只能绑定到`add`和`remove`事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:13:04.910

您需要控制哪些添加和删除应该计算在内，哪些不计算在内。我想到了两个选择。

1.  将所有不应计入该`silent:true`选项的操作静音，并将您的计数器连接到`add`,`remove`和`reset` **events**。这将对集合的一般使用施加一些限制，因为您不能在所有情况下都使用它们的事件。

2.  覆盖`add`,`remove`和`reset` **方法**来接受一个额外的选项，它告诉你计数器是否应该更新。就像是：

    ```
    var PaginatedCollection = Backbone.Collection.extend({

        initialize: function() {
            this._counter = 0;
        },

        add: function(models, options) {
            if(options && options.count)
                this._counter += (_.isArray(models) ? models.length : 1);
            Backbone.Collection.prototype.add.apply(this, arguments);
        },

        remove: function(models, options) {
            if(options && options.count)
                this._counter -= (_.isArray(models) ? models.length : 1);
            Backbone.Collection.prototype.remove.apply(this, arguments);         
        },

        reset: function(models, options) {
            if(options && options.count)
                this._counter = (_.isArray(models) ? models.length : 0);
            Backbone.Collection.prototype.reset.apply(this, arguments)
        }
    }); 
    ```

    并传递`count:true`选项，当应计算添加或删除的项目时：

    ```
    var SomeCollection = PaginatedCollection.extend({ });

    var someCollection = new SomeCollection();
    someCollection.add(model, { count: true });
    someCollection.remove(model, { count: true }); 
    ```

（未经测试的代码示例）

# php - 以 PAGE- 而非 ADMIN 的身份发布到页面提要

> ID：13951961
> 
> 赞同：4
> 
> 时间：2012-12-19T11:56:48.833
> 
> 标签：php, facebook, post, admin, feed

我正在编写一个在页面提要上发布的应用程序。一切正常，它作为页面发布，但昨天它开始作为页面的管理员发布。今天又好了。

有什么我做错了还是小故障？万一这种情况再次发生，我希望能够处理这个问题。

我正在使用的 php 代码：

```
require_once('AppInfo.php');
require_once('sdk/src/facebook.php');

$page_access_token = $_POST['page_access_token'];
$page_id           = $_POST['page_id'];
$message           = $_POST['message'];
$link              = $_POST['link'];
$facebook          = new Facebook(array(
  'appId'  => AppInfo::appID(),
  'secret' => AppInfo::appSecret()
));

$post_id = $facebook->api(
  '/'.$page_id.'/feed', 
  "post", 
  array(
    'access_token' => $page_access_token, 
    'message'      => $message, 
    'link'         => $link
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T13:09:59.710

简短的回答：是的，你可以检查（不能阻止，因为那是在 FB 的手中），但我不建议尝试，它大量过度工程。您也可能对导致错误负责，请参见下文。

长答案：不幸的是（尽管根据你站在哪一边可能会很好）“快速行动并打破常规”（Facebook 的 Moto）确实会导致这些潜在问题。不过，Facebook 通常会很快发现任何错误。

虽然我可以看到您的担忧，但实际上您需要开始检查和验证是否要走这条路，最终您将拥有一个臃肿的应用程序，这可能会导致其自身出现问题。我会说你应该能够轻松入睡，因为知道有 99.9% 的可能性不会再次发生。

*我认为你*可以做的唯一一件事就是，在它碰巧登录到 Facebook 并以管理员身份使用该页面的那一天。我建议您尝试对此进行测试，因为我认为这很可能已经发生。

# php - 使用 jquery 分页中的复选框过滤结果

> ID：13951965
> 
> 赞同：2
> 
> 时间：2012-12-19T11:57:02.697
> 
> 标签：php, jquery, ajax

```
$(document).ready(function(){

  function loading_show(){
    $('#loading').html("<img src='imagesnew/searching.GIF'/>").fadeIn('fast');
  }

  function loading_hide(){
    $('#loading').fadeOut('fast');
  }   

  function loadData(page){

    loading_show();                    
    $.ajax
    ({
        type: "POST",
        url: "results.php",
        data: "page="+page+"&city="+city+"&checkin="+checkin+"&checkout="+checkout, 

        success: function(msg)
        {
            $("#ListingContainer").ajaxComplete(function(event, request, settings)
            {
                loading_hide();
                $("#ListingContainer").html(msg);
            });
        }
    });
  }

  loadData(1);  // For first time page load default results

  $('#ListingContainer .pagination li.active').live('click',function(){
    var page = $(this).attr('p');

    loadData(page);$('body,html').animate({scrollTop: 0}, 800);return false;

  });   

  $('#go_btn').live('click',function(){
    var page = parseInt($('.goto').val());
    var no_of_pages = parseInt($('.total').attr('a'));
    if(page != 0 && page <= no_of_pages){
        loadData(page);
    }else{
        alert('Enter a PAGE between 1 and '+no_of_pages);
        $('.goto').val("").focus();
        return false;
    }

  });
}); 
```

分页工作完美。在左侧，我有复选框来过滤结果，将查询发送到 results.php 文件。我怎样才能实现过滤？请帮助我，因为我是新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:00:45.067

要过滤选中/不选中的复选框，您必须进行如下检查，

```
if ($('#selected').is(':checked')) {
  //send the value in Ajax
} else {
  //dont send the value Ajax
} 
```

# python - 拟合单调曲线（最好在 python 中）

> ID：13951973
> 
> 赞同：5
> 
> 时间：2012-12-19T11:57:27.590
> 
> 标签：python, optimization, curve-fitting

我正在尝试将单调曲线拟合到一些几乎单调的数据。（X 值是单调的，Y 值应该是单调的，但噪声通常大于基础值从点到点的变化。）这是我目前正在做的总结：

```
def goodness_of_fit(Xfit):
    assert(is_sorted(Xfit))
    # ( Calculate the area between the fit line and the join-the-dots line from the data )

scipy.optimize.minimize(goodness_of_fit, x0=numpy.linspace(xmin, xmax)) 
```

我找不到让优化算法保持 Xfit 数组排序的方法 - 有人有什么建议吗？（数组的大小太大，无法创建 N-1 个单独的排序约束并使用约束优化函数。）如果最佳解决方案仅在那种语言。

（注意，我确实拟合了 X 值，而不是 Y 值 - 这是因为我最终想要绘制 dX/dY 曲线，并且不会像我从原始数据中绘制它那样放大到荒谬的值。但是，如果在固定 X 值上拟合 Y 值要容易得多，我可以这样做。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T12:50:18.597

如何从 Xfit 创建一个严格单调子集的新数组，然后将曲线拟合到该数组？就像是：

```
Xfit      = np.hstack(((-1,-1,0,1,1),np.arange(1,10),(-7,9,10,10)))
len_mono  = 0
Xfit_mono = zeros(Xfit.size)
Xfit_mono_ind = zeros(Xfit.size)
Xfit_mono[len_mono] = Xfit[0]

for(iX, x) in enumerate(Xfit):
    if iX > 0:
        if x > Xfit_mono[len_mono]:
            len_mono = len_mono + 1
            Xfit_mono[len_mono] = x
            Xfit_mono_ind[len_mono] = iX 
Xfit_mono_ind = Xfit_mono_ind[:len_mono+1]
Xfit_mono = Xfit_mono[:len_mono+1]
print(Xfit_mono_ind)
print(Xfit_mono) 
```

然后你可以在你的曲线拟合中使用 Xfit_mono，当你想选择相关的 y 值时，你可以使用 Xfit_mono_ind 的值作为 y 的索引。

更新替换：

```
if x > Xfit[iX-1]: 
```

和：

```
if x > Xfit_mono[len_mono]: 
```

对于弱增加的旧解决方案有效。但是，如果它一直在减少，旧的结果给出了错误的答案。此更新在这两种情况下都给出了预期的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:44:28.883

最后，我通过拟合连续 X 值之间的差异而不是值本身来做到这一点 - 然后我可以使用一个简单的零下限。

```
def fg(X):
    # return the objective function and its Jacobian

def adjusted_fg(X_diff):
    X = cumsum(X_diff)
    score, jac = fg(X)
    jac[1:] = np.diff(jac)
    return score, jac

X0_diff[1:] = [X0[0]] + np.diff(X0)
bounds = [(None, None)] + [(0, None) for i in range(len(X0)-1)]

scipy.optimize.minimize(adjusted_fg, X0_diff, method='L-BFGS-B', bounds=bounds) 
```

对于大 N，如果没有开始接近解决方案，这往往是不稳定的和/或陷入局部最小值，所以我将尝试先拟合较小的 N（例如 N/10），然后插值得到对于大 N 拟合，X0 更好。

（注意对于我的问题，我实际上想要严格的排序，所以我使用了一个正的下限而不是 0）

# python-2.7 - html页面不同类下打印数据的问题，一起使用美汤

> ID：13951978
> 
> 赞同：1
> 
> 时间：2012-12-19T11:57:31.573
> 
> 标签：python-2.7, web-scraping, beautifulsoup

我需要从网站上抓取设备的价格，网站上提到的价格有两种类型：

1.  单价例如 $99.99
2.  价格范围 “49.99 美元”至“99.99 美元”

在单个类别下提到了单个价格值，我能够提取这些值，但在 2 个类别中提到了价格范围，例如。

```
<div class="gridPrice">"$199.99" 
 <span class="multiDevicePrice-to">to</span> "$399.99" 
```

作为范围提到的价格用双引号括起来，而作为单值的价格没有任何引号。

我正在使用以下代码：

```
import csv
import urllib2
import sys  
from bs4 import BeautifulSoup
page = urllib2.urlopen('http://www.att.com/shop/wireless/devices/smartphones.html').read()
soup = BeautifulSoup(page)
soup.prettify()
for anchor1 in soup.findAll('div', {"class": "listGrid-price"},text=True):
    if anchor1.string:
        print unicode(anchor1.string).strip()
for anchor2 in soup.findAll('div', {"class": "gridPrice"},text=True):
    if anchor2.string:
        print unicode(anchor2.string).strip() 
```

在输出中我没有得到价格范围的值，我需要的是所有价格的列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:51:50.357

您可以使用该[`.stripped_strings`属性](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#strings-and-stripped-strings)来获取给定标签中所有（剥离的）文本值的可迭代：

```
for anchor1 in soup.findAll('div', {"class": "listGrid-price"}):
    textcontent = u' '.join(anchor1.stripped_strings)
    if textcontent:
        print textcontent 
```

您可能只需要选择其中的一两个值；`itertools.islice`可以在那里提供帮助：

```
from itertools import islice

for anchor1 in soup.findAll('div', {"class": "listGrid-price"}):
    textcontent = u' '.join(islice(anchor1.stripped_strings, 0, 3, 2))
    if textcontent:
        print textcontent 
```

The `islice` call only selects the first and third elements, which are the from and to prices in the grid.

# php - preg_match，无法获取电子邮件地址

> ID：13951986
> 
> 赞同：0
> 
> 时间：2012-12-19T11:57:52.993
> 
> 标签：php, preg-match

我需要从下面的 html 代码中检索电子邮件数据

```
<a href="mailto:contact@rovio.com" rel="nofollow">Email Developer</a> 
```

我已使用此代码获取电子邮件地址，但未能获取。

```
preg_match('@^(?:mailto:)?([^/]+)@i', $data, $matches);
$email = $matches[1];
echo $email; 
```

你能看出什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:31:45.230

What you just can do is

*   just strip mailto: from the href attribute
*   then filter the mail adress

* * *

```
$string = '<a href="mailto:contact@rovio.com" rel="nofollow">Email Developer</a>';
$parsing = new SimpleXmlElement($string);
$attrs = (array)$parsing->attributes();
$mail = str_replace('mailto:','',$attrs['href']);
if(filter_var($mail,FILTER_VALIATE_MAIL)){//if it is a good email
   //goooo
} 
```

# sql-server - 删除属于 sys 模式的存储过程

> ID：13951989
> 
> 赞同：0
> 
> 时间：2012-12-19T11:58:03.570
> 
> 标签：sql-server, stored-procedures, permissions, database-schema

我已经创建了存储过程：

```
dbo.stp_getDubletss 
```

不知何故，还创建了一个名为

```
sys.stp_getDubletss 
```

当我尝试放弃程序时

```
sys.stp_getDubletss 
```

我收到以下错误：

> 无法删除过程“sys.stp_getDobbeltmaerker”，因为它不存在或您没有权限。

我似乎无法授予我的用户删除该程序的权限。我难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:06:16.400

[创建存储过程](http://msdn.microsoft.com/en-us/library/ms345415.aspx)

> 需要数据库中的 CREATE PROCEDURE 权限和创建过程的模式的 ALTER 权限。

[删除存储过程](http://msdn.microsoft.com/en-us/library/ms345358.aspx)

> 需要过程所属架构的 ALTER 权限，或过程的 CONTROL 权限。

您是否使用相同的帐户进行创建和删除？

# java - 保存方法中的 entityName 参数是什么？

> ID：13951990
> 
> 赞同：2
> 
> 时间：2012-12-19T11:58:04.587
> 
> 标签：java, hibernate

我已经开始学习 Hibernate 并且有一个基本问题。

`save(String entityName, Object object)`和类`save(Object object)`有什么区别`org.hibernate.Session`。基本上我想知道`entityName`这个重载方法中的参数是什么。我试图查看 API，但没有从那里收集到太多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T08:43:53.097

它是用于匹配映射文件中相同实体名称的实体的逻辑名称。它默认为当前实体的类名，但如果您提供自己的值，则可以将同一个类与多个不同的映射文件一起使用。

参见[http://www.martinahrer.at/2008/04/09/55/](http://www.martinahrer.at/2008/04/09/55/) 和 [http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html) 和[http:// docs.jboss.org/hibernate/orm/3.3/reference/en/html/persistent-classes.html#persistent-classes-dynamicmodels](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/persistent-classes.html#persistent-classes-dynamicmodels) 和[http://docs.jboss.org/hibernate/orm/3.3/reference/en/ html/xml.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/xml.html)（在每种情况下搜索“实体名称”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:13:40.297

它是休眠对象标识符。不建议在 save() 方法中使用它。请参考[http://www.hibernate-training-guide.com/object-identifiers.html](http://www.hibernate-training-guide.com/object-identifiers.html)

# android - 如何使用我自己的键盘而不是默认键盘？

> ID：13951996
> 
> 赞同：3
> 
> 时间：2012-12-19T11:58:18.707
> 
> 标签：android

我根据 Google 为我创建的应用程序提供的示例键盘创建了自己的键盘。如何在我的应用程序中使用此键盘而不是默认键盘进行`EditText`输入？我需要能够隐藏默认键盘并改用我的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:58:47.623

您可以创建自己的类来扩展 EditText 并覆盖 onCheckIsTextEditor()：

```
public class CustomEditText extends EditText 
{
  public CustomEditText(Context context, AttributeSet attrs) { 
      super(context, attrs);     
  }      
  @Override      
  public boolean onCheckIsTextEditor() 
  {
      // Your code to use your own input method here.      
  }
} 
```