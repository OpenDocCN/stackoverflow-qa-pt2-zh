# StackOverflow 问答 13218000-13218999

# ipython - 在 ipython 笔记本中移动文件的方法是什么？

> ID：13218004
> 
> 赞同：3
> 
> 时间：2012-11-04T11:09:26.680
> 
> 标签：ipython

我在 ipython notebook 中写了一个文件，并将它作为 test.ipynb 保存在我的计算机中。当我将此文件传输到另一台计算机并尝试打开它时，什么也没出现。发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-09T23:18:59.280

你是如何启动笔记本的？当您将 .ipynb 文件保存到计算机上的特定目录时，如果从命令行启动，您需要从该目录启动 ipython 笔记本，以便拉入您保存的 .ipynb 文件。

示例：test.ipynb 文件保存到 \Desktop 目录。从命令行启动笔记本时，您需要：

```
cd Desktop
ipython notebook 
```

我知道如果您在浏览器会话产生时以这种方式启动，它将拉入您已保存为已创建笔记本的 .ipynb 文件。

[这也有效](http://ipython.org/ipython-doc/1/interactive/notebook.html#starting-the-notebook-server)

# javascript - Ruby on Rails - 如何在 application.js 中执行 require

> ID：13218006
> 
> 赞同：5
> 
> 时间：2012-11-04T11:09:52.720
> 
> 标签：javascript, jquery, ruby-on-rails, jquery-ui, require

我正在读一本关于“Ruby on Rails”的书。在“application.js”中，我们以以下方式和更具体的方式包含其他 JavaScript 库 - jQuery UI：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui 
```

由于这是普通的 JavaScript 文件（这里不是 ruby​​ 扩展，例如“html.erb”），应用程序如何知道执行 require 命令？这是什么 JavaScript 语法：

```
//= 
```

由于这是普通的 JavaScript 文件，为什么我们不使用“脚本”标签来包含 JavaScript 文件？

另外，我在[这里](http://ruby.about.com/od/rubyfeatures/a/require.htm)读到“require”方法将在 $LOAD_PATH 变量文件夹的定义中检查这个库。如何查看“jquery-ui”的存储位置？我问是因为在其他应用程序中，为了使用 jQuery UI，我不仅应该添加 JavaScript 文件，还应该添加库使用的 css 文件和图像 - 在这种情况下，我们只用单行执行此操作？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T11:35:09.710

### 这是什么 JavaScript 语法。

任何以 a 开头的`//`都是 Javascript 注释。

### 它如何处理它？

服务器端的 Sprockets 扫描 JS 文件以查找`directives`. `//=`是一个特殊的 Sprocket 指令。在本例中，当它遇到该指令时，它会要求[指令处理器](https://github.com/sstephenson/sprockets#the-directive-processor)处理该命令`require`。在没有 Sprockets 的情况下，该`//= require ..`行将是一个简单的 JS 注释。

### 红宝石`require`与链轮`require`

这是两个完全不同的东西。您链接到的是 Ruby 的要求。

### 为什么不使用脚本标签来加载 JS 文件。

通常，您希望连接所有应用程序 JS 文件，然后将它们缩小为 1 个主 JS 文件，然后包含该文件。我建议阅读有关这方面的 YSlow 最佳实践。

我还建议观看 Asset Pipline 上的 Railscast - [http://railscasts.com/episodes/279-understanding-the-asset-pipeline](http://railscasts.com/episodes/279-understanding-the-asset-pipeline)

干杯!

# port - 允许 CRM 2011 从外部服务器访问

> ID：13218007
> 
> 赞同：0
> 
> 时间：2012-11-04T11:10:23.220
> 
> 标签：port, crm

我在 vmware 的 5555 端口下设置了 CRM 2011。我可以在本地正常访问 CRM 系统。但是，当我尝试从主机访问时，出现 IE 无法显示网页错误。我可以访问 IIS 端口 80。我已将入站规则添加到我的 Windows Server 2008 R2 CRM 服务器上的 TCP 端口 5555。我还有什么需要做的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T12:39:53.353

您是否在使用诸如 no-ip、dyndns 之类的东西？您必须确保您的路由器已映射到将端口：5555 路由到您的服务器 IP，您的互联网是否使用静态 IP？

希望有帮助。

雷纳托

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-08T23:38:33.167

这是一篇旧帖子，但可能对某人有所帮助...您需要在您的 VPC (VMWare) 上允许端口 5555 转到防火墙设置并为此端口添加例外。完成后，您应该能够从外部访问 CRM。

以下是关于它的详细博客 [http://rokhri.com/blog/crm-how-to-access-crm-externally-installed-on-vpc/](http://rokhri.com/blog/crm-how-to-access-crm-externally-installed-on-vpc/)

# cron - Redhat openshift - Cron Runtime - cron执行多长时间是否有默认时间

> ID：13218013
> 
> 赞同：3
> 
> 时间：2012-11-04T11:10:41.147
> 
> 标签：cron, redhat, openshift

几分钟后，SIGTERM 取消了 Redhat openshift 上的 Cron。

cron 任务可以执行多长时间是否有默认超时？如果是，如何让长时间运行的任务正常工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T11:10:41.147

是的，在 Redhat openshift 上执行 cron 任务的顶级脚本显然有**5 分钟的默认超时。**

解决方案是使用“nohup”让长时间运行的任务正常工作。

例如：

文件 .openshift/cron/minutely/task1 -

```
nohup /path-to/some-other-script > $OPENSHIFT_LOG_DIR/logfile 2>&1 & 
```

# java - 使用 java 生成 int 数组的排列 -- 错误

> ID：13218019
> 
> 赞同：8
> 
> 时间：2012-11-04T11:11:40.527
> 
> 标签：java

我正在编写一个 JAVA 代码来生成整数数组的所有排列。虽然我得到了正确的排列数量，但排列本身并不正确。

在运行时我获得：

```
Input array Length
3
1
2
3
0Permutation is
1,  2,  3,  
##########################
1Permutation is
1,  3,  2,  
##########################
2Permutation is
3,  1,  2,  
##########################
3Permutation is
3,  2,  1,  
##########################
4Permutation is
1,  2,  3,  
##########################
5Permutation is
1,  3,  2,  
##########################
6  number of permutations obtained
BUILD SUCCESSFUL (total time: 3 seconds)

public class PermulteArray {

    public static int counter = 0;

    public static void Permute(int[] input, int startindex) {
        int size = input.length;

        if (size == startindex + 1) {
            System.out.println(counter + "Permutation is");
            for (int i = 0; i < size; i++) {
                System.out.print(input[i] + ",  ");
            }
            System.out.println();
            System.out.println("##########################");
            counter++;
        } else {
            for (int i = startindex; i < size; i++) {

                int temp = input[i];
                input[i] = input[startindex];
                input[startindex] = temp;
                Permute(input, startindex + 1);
            }
        }
    }

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        System.out.println("Input array Length");
        int arraylength = in.nextInt();
        int[] input = new int[arraylength];
        for (int i = 0; i < arraylength; i++) {
            input[i] = in.nextInt();
        }
        counter = 0;
        Permute(input, 0);
        System.out.println(counter + "  number of permutations obtained");
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T11:26:22.640

```
int temp=input[i];
input[i]=input[startindex];
input[startindex]=temp;
Permute(input, startindex+1); 
```

您在调用 Permute 之前已交换了一个元素，但之后您需要再次将其交换回来以在 for 循环的迭代中保持元素的位置一致。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-03-21T18:54:48.703

这是迄今为止我见过的最好的解决方案：

```
public static void main(String[] args) {
    int[] a = { 1, 2, 3, 4, 5, 6 };
    permute(0, a);
}

public static void permute(int start, int[] input) {
    if (start == input.length) {
        //System.out.println(input);
        for (int x : input) {
            System.out.print(x);
        }
        System.out.println("");
        return;
    }
    for (int i = start; i < input.length; i++) {
        // swapping
        int temp = input[i];
        input[i] = input[start];
        input[start] = temp;
        // swap(input[i], input[start]);

        permute(start + 1, input);
        // swap(input[i],input[start]);

        int temp2 = input[i];
        input[i] = input[start];
        input[start] = temp2;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-14T17:54:07.973

看一下这个

```
for (int i = startindex; i < input2.length; i++) {
            char[] input = input2.clone();
            char temp = input[i];
            input[i] = input[startindex];
            input[startindex] = temp;
            permute(input, startindex + 1);
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-14T17:57:14.627

```
public class PermuteArray {

    public static void permute(char[] input2, int startindex) {

        if (input2.length == startindex) {
             displayArray(input2);
        } else {
            for (int i = startindex; i < input2.length; i++) {
                char[] input = input2.clone();
                char temp = input[i];
                input[i] = input[startindex];
                input[startindex] = temp;
                permute(input, startindex + 1);
            }
        }
    }

    private static void displayArray(char[] input) {
        for (int i = 0; i < input.length; i++) {
            System.out.print(input[i] + ";  ");
        }
        System.out.println();
    }

    public static void main(String[] args) {
        char[] input = { 'a', 'b', 'c', 'd'};
        permute(input, 0);
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-28T23:32:00.123

```
//This will give correct output 

import java.util.Scanner;

public class PermulteArray {

    public static int counter = 0;

    public static void Permute(int[] input, int startindex) {
        int size = input.length;

        if (size == startindex + 1) {
            System.out.println(counter + "Permutation is");
            for (int i = 0; i < size; i++) {
                System.out.print(input[i] + ",  ");
            }
            System.out.println();
            System.out.println("##########################");
            counter++;
        } else {
            for (int i = startindex; i < size; i++) {

                int temp = input[i];
                input[i] = input[startindex];
                input[startindex] = temp;
                Permute(input, startindex + 1);
                temp = input[i];
                input[i] = input[startindex];
                input[startindex] = temp;
            }
        }
    }

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        System.out.println("Input array Length");
        int arraylength = in.nextInt();
        int[] input = new int[arraylength];
        for (int i = 0; i < arraylength; i++) {
            input[i] = in.nextInt();
        }
        counter = 0;
        Permute(input, 0);
        System.out.println(counter + "  number of permutations obtained");
    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-11T14:45:03.237

您可以使用递归调用解决此问题。

[https://github.com/Pratiyush/Master/blob/master/Algorithm%20Tutorial/src/arrays/Permutations.java](https://github.com/Pratiyush/Master/blob/master/Algorithm%20Tutorial/src/arrays/Permutations.java)

```
public void swap(int[] arr, int i, int j)
{
    int tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}

public void permute(int[] arr, int i)
{
    if (i == arr.length)
    {
        System.out.println(Arrays.toString(arr));
        return;
    }
    for (int j = i; j < arr.length; j++)
    {
        swap(arr, i, j); 
        permute(arr, i + 1);  // recurse call
        swap(arr, i, j);      // backtracking
    }
} 

public static void main(String[] args) {

    Permutations permutations = new Permutations();
    int[] arr = {1, 2, 3,4};
    permutations.permute(arr, 0);
} 
```

此外，其他方法可用于

1.  [http://www.programcreek.com/2013/02/leetcode-permutations-java/](http://www.programcreek.com/2013/02/leetcode-permutations-java/)
2.  [http://www.programcreek.com/2013/02/leetcode-permutations-ii-java/](http://www.programcreek.com/2013/02/leetcode-permutations-ii-java/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-08-27T16:29:02.437

我多次使用的解决方案（主要用于测试目的）如下。它基于众所周知的算法以按字典顺序生成排列（无递归）：

```
/**
 * Compute next (in lexicographic order) permutation and advance to it.
 *
 * Find greater index i for which a j exists, such that:
 * j > i and a[i] < a[j] (i.e. the 1st non-inversion).
 * For those j satisfying the above, we pick the greatest.
 * The next permutation is provided by swapping
 * items at i,j and reversing the range a[i+1..n]
 */
void advanceToNext() {
    // The array `current` is the permutation we start from
    // Find i when 1st non-inversion happens
    int i = n - 2;
    while (i >= 0 && current[i] >= current[i + 1])
        --i;

    if (i < 0) {
        // No next permutation exists (current is fully reversed)
        current = null;
        return;
    }

    // Find greater j for given i for 1st non-inversion
    int j = n - 1;
    while (current[j] <= current[i])
        --j;

    // Note: The range a[i+1..n] (after swap) is reverse sorted
    swap(current, i, j); // swap current[i] <-> current[j]
    reverse(current, i + 1, n); // reverse range [i+1..n]
} 
```

一个完整的解决方案（以类的形式）在这里： [https ://gist.github.com/drmalex07/345339117fef6ca47ca97add4175011f](https://gist.github.com/drmalex07/345339117fef6ca47ca97add4175011f)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-07T10:12:49.330

我对这个问题有简单的答案，你可以试试这个。

```
public class PermutationOfString {
    public static void main(String[] args) {
        permutation("123");
    }

    private static void permutation(String string) {
        printPermutation(string, "");
    }

    private static void printPermutation(String string, String permutation) {
        if (string.length() == 0) {
            System.out.println(permutation);
            return;
        }

        for (int i = 0; i < string.length(); i++) {
            char toAppendToPermutation = string.charAt(i);
            String remaining = string.substring(0, i) + string.substring(i + 1);

            printPermutation(remaining, permutation + toAppendToPermutation);
        }
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-24T18:53:43.193

```
import java.util.ArrayList;

public class RecursivePermGen {

    void permGen(int n, int m, ArrayList<Integer> cur) {
        if(m == 0) {
            System.out.println(cur);
            return;
        }
        for(int i = 1; i <= n; i++) {
            cur.add(0, i);
            permGen(n, m-1, cur);
            cur.remove(0);
        }

    }

    public static void main(String[] args) {
        RecursivePermGen pg = new RecursivePermGen();
        ArrayList<Integer> cur = new ArrayList<Integer>();

        pg.permGen(2, 2, cur);
    }
} 
```

# c# - 发送电子邮件而不存储或提示输入密码

> ID：13218022
> 
> 赞同：0
> 
> 时间：2012-11-04T11:12:09.403
> 
> 标签：c#, winforms, email

我正在为客户端构建一个 Winform C# 桌面应用程序。我打算在申请中包含一个联系表格，我的客户可以通过该表格与我联系。但是，我不想将密码保存在应用程序中或提示客户端输入密码。

知道我该怎么做。在同一方向上的任何有用的指示都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:27:39.723

我建议您使用服务（WCF 或任何其他技术，这并不重要）来发送通知。在这种情况下，您将能够在不更新客户端应用程序的情况下添加/修改它。而且您不需要在公共应用程序中存储敏感数据

# windows-phone-8 - Windows Phone 8 的可扩展列表视图？

> ID：13218042
> 
> 赞同：2
> 
> 时间：2012-11-04T11:14:06.687
> 
> 标签：windows-phone-8

在 Android 中有[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。Windows Phone 8 中是否有等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:37:42.503

哪有这回事。您可以从 Windows Phone Toolkit 中创建一个包含 ExpanderView 的 DataTemplate：[https](https://phone.codeplex.com/) ://phone.codeplex.com/以达到类似的效果。

# iis-6 - 列出 IIS 6 中所有虚拟目录的 DOS 命令

> ID：13218046
> 
> 赞同：2
> 
> 时间：2012-11-04T11:14:48.850
> 
> 标签：iis-6, cmd, virtual-directory, sites, adsutil.vbs

我正在寻找一个 DOS 命令来列出 Windows 2003 下 IIS 6 中的所有站点和虚拟目录。我知道有一些方法可以使用[Powershell / WMI](https://stackoverflow.com/questions/3575442/getting-all-virtual-directories-for-a-iis6-web-site-using-wmi)、[VBS](http://anyrest.wordpress.com/2010/02/10/how-to-list-all-websites-in-iis/)、[C#](https://stackoverflow.com/questions/3938467/list-all-virtual-directories-in-iis-5-6-and-7)等来做到这一点。但我想要的只是一个快速而肮脏的，从 DOS 轻松完成，无需在 Web 服务器上创建任何新文件。

编辑：在研究这个问题时，我设法想出了一个可以做到这一点的单线，但如果你有一个更优雅的解决方案符合上述标准，请建议一个替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T11:14:48.850

这是我想出的：

```
@FOR /F "delims=[]" %A IN ('@cscript //nologo %SystemDrive%\Inetpub\AdminScripts\adsutil.vbs ENUM /P /w3svc') DO @FOR /F delims^=^"^ tokens^=2 %B IN ('@cscript //nologo %SystemDrive%\Inetpub\AdminScripts\adsutil.vbs GET %A/ServerComment') DO @FOR /F delims^=^"^ tokens^=2 %C IN ('@cscript %SystemDrive%\Inetpub\AdminScripts\adsutil.vbs //nologo GET %A/Root/Path') DO @ECHO %A %B "%C" 
```

该命令输出一个虚拟目录 ID 列表，以及每个目录的“友好名称”和路径，例如：

```
/w3svc/1 Default Web Site "c:\inetpub\wwwroot"
/w3svc/1236224994 FunWidgets "C:\Inetpub\wwwroot\FunWidgets"
/w3svc/1359392326 JimSmith.com "C:\Inetpub\wwwroot\JimSmith"
/w3svc/1835917338 BouncyToys "C:\Inetpub\wwwroot\bouncytoys"
/w3svc/198968327 AvalonWest "C:\Inetpub\wwwroot\AvWest" 
```

如果要将输出通过管道传输到文本文件，首先确保它不存在，然后附加`>> filename.txt`到上面的命令。（例如`DEL sites.txt & ... >> sites.txt`：）

以下是公认的复杂命令如何工作的细分：

1.  `@`是每个语句的前缀，以避免回显语句本身，这会污染输出。

2.  `@FOR /F "delims=[]" %A IN ('@cscript //nologo %SystemDrive%\Inetpub\AdminScripts\adsutil.vbs ENUM /P /w3svc') DO`

    调用与 IIS6 一起安装的[AdsUtil.vbs](https://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/d3df4bc9-0954-459a-b5e6-7a8bc462960c.mspx?mfr=true)（并代表我们读取[元数据库）。](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/a0ea8e51-fb2a-4e80-9d5a-7fe3ae246570.mspx?mfr=true)

    *   该`ENUM /P /w3svc`参数告诉它从根节点开始输出所有站点和虚拟目录 ID 的列表。
    *   [nologo](http://msdn.microsoft.com/en-us/library/ms525006%28v=vs.90%29.aspx)开关抑制了通常的CScript 版权序言，仅呈现我们感兴趣的输出。双反斜杠用于转义斜杠字符，因为我们在字符串中。
    *   单引号部分的输出类似于以下内容：

        ```
        [/w3svc/1]
        [/w3svc/1236224994]
        [/w3svc/1359392326]
        [/w3svc/1835917338]
        [/w3svc/198968327]
        [/w3svc/AppPools]
        [/w3svc/Filters]
        [/w3svc/Info] 
        ```

    这被传递到`FOR /F`，它循环通过每一行。 `delims=[]`告诉 FOR 将方括号视为分隔符。之后的所有内容都`DO`将为每一行执行一次，`%A`变量设置为方括号之间的任何内容。（如果这是您要使用的批处理文件`%%A`）。

3.  `@FOR /F delims^=^"^ tokens^=2 %B IN ('@cscript //nologo %SystemDrive%\Inetpub\AdminScripts\adsutil.vbs //nologo GET %A/ServerComment') DO`

    第二个 FOR 块使用`GET`参数运行 AdsUtil，以检索给定站点/虚拟目录的 ServerComment 属性。这是在 IIS 中看到的人性化名称。不幸的是，输出解析起来有点棘手。例如，为了`/w3svc/1`你回来：

    ```
    ServerComment                   : (STRING) "Default Web Site" 
    ```

    careting[技巧](https://stackoverflow.com/a/13217838/589059)解析出引号之间的文本。

    请注意，我们不感兴趣的节点（AppPools、Filters 和 Info）没有 ServerComment 属性，并给出没有引号的结果，例如：

    ```
    The path requested could not be found.
    ErrNumber: -2147024893 (0x80070003)
    Error Trying To GET the Object (GetObject Failed): w3svc/Filters 
    ```

    因此，不会为它们调用命令行的其余部分。

4.  `@FOR /F delims^=^"^ tokens^=2 %C IN ('@cscript %SystemDrive%\Inetpub\AdminScripts\adsutil.vbs //nologo GET %A/Root/Path') DO @ECHO %A %B "%C"`

    这个最终的 FOR 检索物理路径，然后将所有三个解析信息输出到控制台。

# html - css id vs class，一些想法

> ID：13218054
> 
> 赞同：0
> 
> 时间：2012-11-04T11:16:04.340
> 
> 标签：html, css

我以为我了解 css 文档中的 id 与类。据我所知，html 文档中应该只有一个 id 元素实例和许多类元素。现在我正在查看 Microsoft 驱动的 Site.css 模板，该模板是在每个新的 mvc3 项目上生成的，我看到有 .page 元素而不是 #page ？我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:21:54.037

仅将 id 用于 javascript 并且仅将类用于 CSS 已变得很普遍。

这背后有很多原因：

*   使用JS选择ID非常快
*   ID比类具有更高的特异性
*   这是拆分 JS 和 CSS 的便捷方式

举个例子：

```
<a class='btn btn-primary' id='alert' href='#'>Click Me</a> 
```

将是一个典型的用途，其中`btn`和`btn-primary`类用于 CSS，但`alert`id 将用于 JS。

这意味着可以在不丢失 JS 链接的情况下重新设置链接的样式，并且可以在不更改样式的情况下更改其行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:22:38.070

使用类时更容易维护良好的级联。Id 是一种将样式链接到文档的非常具体的方式。此外，目前您可能只有一个元素，因此使用 id 似乎是可行的方法，但如果在不久的将来您要切换到两个元素怎么办。

[CSS 特异性](http://www.stuffandnonsense.co.uk/archives/css_specificity_wars.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T11:20:55.893

如果开发人员`#id`正在寻找将一些 javascript 应用于该元素，则通常会使用它，并且 ID 应该是唯一的，`.whatever`而您可以多次使用它的类也是如此。

如你所说

微软可能正在使用`.page`，因为它必须应用于多个事物，所以它根本不使用`#page`，它并没有真正产生影响，是的，但就具体而言，`#id`选择器的优先级高于`.class`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T11:24:49.953

完全不知道微软驱动的 Site.css 模板；但坦率地说，我不会从他们那里得到任何关于 CSS 的建议：他们的浏览器在采用与样式相关的国际标准方面一直是所有主要浏览器中最差的。

给定页面上的任何特定项目都应该只有一个 id；但几乎可以肯定不止一个仍然可以工作......至少用于样式（尝试使用脚本：p）。

见鬼，我刚刚把微软主页放到了w3c

> html 验证器：28 个错误，581 个警告

和 w3c CSS 验证器

> 我们发现了以下错误 (68)

尽管可以说许多 CSS 错误可能是由相当可接受的黑客生成的，这些黑客旨在解决设计不佳的浏览器中的问题……主要是微软的！

即便如此，我对这个 Microsoft 驱动的 Site.css 模板很感兴趣：您有机会发布链接吗？

作为附加说明：CSS 中的 ID 总是比 class 具有更高的优先级，无论顺序如何。

# c++ - Finding curvature from a noisy set of data points using 2d/3dsplines? (C++)

> ID：13218056
> 
> 赞同：22
> 
> 时间：2012-11-04T11:16:28.753
> 
> 标签：c++, algorithm, surface, bezier, spline

I am trying to extract the curvature of a pulse along its profile (see the picture below). The pulse is calculated on a grid of length and height: 150 x 100 cells by using Finite Differences, implemented in C++.

![Pulse profile with varying curvature](../Images/95f8e25b6c1be22df0c73f866f33e2e2.png)

I extracted all the points with the same value (contour/ level set) and marked them as the red continuous line in the picture below. The other colors are negligible.

![red line = dataset of points with the same value](../Images/311e056a27142c4b01a61c619cae9a2d.png)

Then I tried to find the curvature from this already noisy (due to grid discretization) contour line by the following means:

(moving average already applied)

**1) Curvature via Tangents**
![Curvature Approximation from two Points P and N](../Images/f1feeaedf6f63cbb06f68b5618d5567d.png)

The curvature of the line at point P is defined by:

![tangents of 2 points = curvature at one point](../Images/6f79233e8cfc80c77f6b9ebab6f98159.png)

So the curvature is the limes of angle delta over the arclength between P and N. Since my points have a certain distance between them, I could not approximate the limes enough, so that the curvature was not calculated correctly. I tested it with a circle, which naturally has a constant curvature. But I could not reproduce this (only 1 significant digit was correct).

**2) Second derivative of the line parametrized by arclength**

I calculated the first derivative of the line with respect to arclength, smoothed with a moving average and then took the derivative again (2nd derivative). But here I also got only 1 significant digit correct. Unfortunately taking a derivative multiplies the already inherent noise to larger levels.

**3) Approximating the line locally with a circle**

Since the reciprocal of the circle radius is the curvature I used the following approach:

![Approximating the curvature with a circle](../Images/e02ccbaebb3b92646785dcfd04aad43b.png)

This worked best so far (2 correct significant digits), but I need to refine even further. So my new idea is the following:

Instead of using the values at the discrete points to determine the curvature, I want to approximate the pulse profile with a 3 dimensional spline surface. Then I extract the level set of a certain value from it to gain a smooth line of points, which I can find a nice curvature from.

So far I could not find a C++ library which can generate such a Bezier spline surface. Could you maybe point me to any?

Also do you think this approach is worth giving a shot, or will I lose too much accuracy in my curvature?

Do you know of any other approach?

With very kind regards, Jan

edit: It seems I can not post pictures as a new user, so I removed all of them from my question, even though I find them important to explain my issue. Is there any way I can still show them?

edit2: ok, done :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:59:25.890

ALGLIB支持各种类型的插值[：](http://www.alglib.net/interpolation/)

> *   多项式插值
> *   有理插值
> *   样条插值
> *   最小二乘拟合（线性/非线性）
> *   双线性和双三次样条插值
> *   快速 RBF 插值/拟合

我不知道它是否满足您的所有要求。我个人还没有使用过这个库，但我相信三次样条插值可能是你正在寻找的（两次可微）。

为了防止对您的嘈杂输入点进行过度拟合，您应该应用某种平滑机制，例如，您可以尝试移动窗口平均/高斯/FIR 滤波器之类的东西是否适用。另请查看（三次）平滑样条线。

# azure - Windows Azure Virtual Machines Are They Worth It/Full Text Indexing

> ID：13218059
> 
> 赞同：1
> 
> 时间：2012-11-04T11:17:10.347
> 
> 标签：azure, azure-sql-database, azure-virtual-machine

We have a fairly large application running on a small web farm with Sql Server replication. Lately the sales team have become obsessed with wanting to sell the solution as a cloud based product as they think it sounds better.

We have begun migrating our dynamic media content to azure blob storage for images, videos, etc. but we cannot move to Azure with Sql Azure as it is as we use features such as FileStream and Full Text Indexing for searching documents. Also from what I can understand you cannot bring backups locally and run in Sql Server which is a fundamental part of our development process and bug fixing.

One suggestion is to move to the Virtual Machines that are in preview when they are released, I guess with all my research I am struggling to see if that is going to be of benefit to us over our current setup. I can see the advantages of blob storage for geo-replication as we have users in China, Mexico and India.

My question is is it worth going to a virtual machine in Windows Azure over our current setup, if it's not does anyone know any dates when Sql Azure will support fulltext indexing?

Many thanks for any thoughts/your own experiences with this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T14:01:04.553

我同意 Lucene 的建议，但是要回答你关于 SQL Server 和 Azure 的问题:)....

*   VM 上的 SQL Server 运行良好，现在它是 BYO-License 模型......所以请记住这一点。您可以调整所有内容，使用您需要的 SKU，设置 AlwaysOn (SQL 2012) 或集群等。按照您想要的方式格式化您的驱动器，设置处理器相关性等等等等 :)
*   查看上周的一些 IaaS BUILD 2012 视频：http: [//channel9.msdn.com](http://channel9.msdn.com)。Microsoft 正在认证 SQL Server 作为在 IaaS 平台上运行的软件的一部分。如果您对 IaaS 有所了解，您现在可以获得一些图库选项以从中选择起始图像......这将是一个有根据的猜测，期望那里有 SQL Server 2012 图像，并为您定价（微软可以这样做，因为他们拥有 SQL Server, Amazon/RackSpace 必须依赖开源）
*   I/O 现在可能是性能瓶颈...条带驱动器上的 IOP 大约是 15k SCSI 驱动器的 2 倍...他们将在未来改进这一点（再次有一些黑客可以让它更好地工作）。
*   Azure 在专用的专用虚拟机（高 I/O、高内存、高 CPU）方面有点赶上亚马逊。我从您的解决方案（搜索/FILESTREAM）中猜想您会想要高 I/O。亚马逊 AWS 现在有这个，并且专门存储在 SSD 等上。

我不确定全文搜索是否会出现在 SQL Azure（SQL Server 的 PaaS 版本）中。如果您有全文搜索，您可能会调整跟踪标志，需要与具有高 I/O 的 Blob 存储进行持续通信......将驱动器格式化为默认的 64kb 分配单元对于数据驱动器可能是可以的，但对于 FILESTREAM 等则不行.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T11:34:00.350

我认为他们正在 SQL Azure 上开发 FTS，但发布日期未知。您可以使用带有 SQL Azure 的 Lucene.NET 从您的数据库创建全文索引，您可以每 x 分钟（或几小时/天）使用数据库的内容简单地更新索引一次。

更多信息：[http ://social.technet.microsoft.com/wiki/contents/articles/2367.how-to-use-lucene-net-with-windows-azure-sql-database-en-us.aspx](http://social.technet.microsoft.com/wiki/contents/articles/2367.how-to-use-lucene-net-with-windows-azure-sql-database-en-us.aspx)

# php - What are reasons for Channel disconnected message error popup?

> ID：13218068
> 
> 赞同：1
> 
> 时间：2012-11-04T11:19:03.633
> 
> 标签：php, apache-flex

While I am testing my application, I find out every time I after update the data to the database. A annoying fault message is popup.

Which is said

> Channel disconnected before an acknowledgement was received

I check the database, test the php script, check the network monitor, even rewrite the service caller (dont know what its name)

```
<dataservice:DataService id="dataservice2" fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail  + '\n' + 'dataservice')" showBusyCursor="true"/> 
```

And even create a new application just to test that component. But, every things are working and the database had received correct data set and I still cannot Identity where that message is come form.

How can I find the source of this message???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:03:58.327

我发现了PHP脚本的错误原因。当我查看 PHP 错误日志文件时，我发现 Flex 没有显示变量引用错误，就像这样

```
PHP Strict Standards:  Only variables should be passed by reference in C:\xampp\htdocs\fypweee_admin\FYPadminSideV3-debug\services\StockproductService.php on line 238 
```

如果您使用 XAMPP，错误日志文件将位于`[your hard disk name]:\xampp\php\logs1`.

由于 php 脚本仍然神秘地将数据集发送到数据库，我想我会留下那个错误（暂时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T14:13:42.327

1.将文件夹放入您的项目中

```
 (i).flex-spreadsheet(folder)
   (ii).amfphp-spreadsheet(folder) 
```

2.然后打开文件

```
 for xamp=> \htdocs\projectname\flex-spreadsheet\properties\ApplicationSettings.properties

  for wamp=> \www\projectname\flex-spreadsheet\properties\ApplicationSettings.properties 
```

3.将第一行设为

```
serverpath=http://192.xxx.x.xxx/projectname/amfphp-spreadsheet/gateway.php
**or**
serverpath=localhost/projectname/amfphp-spreadsheet/gateway.php 
```

这对我有用。

# jquery - 检查元素是否完全滚动

> ID：13218069
> 
> 赞同：6
> 
> 时间：2012-11-04T11:19:07.287
> 
> 标签：jquery, web-applications, mouseevent

我有以下标记结构。

```
<div class="content-wrapper">
    <div class="content">...</div>
    <div class="content">...</div>
    <div class="content">...</div>
</div> 
```

现在，类`content-wrapper`被设置为只有`80%`页面总客户区的高度，并且在其主体不适合时`overflow-y`设置为具有滚动条。请注意，内部 div可以是任意次数。那么，问题是**如何检查是否****完全滚动？**`auto``content`**`content-wrapper`**

### 暗示：

想象一个动态加载的新闻提要，当容器完全滚动时，会自动获取新内容并将其附加到容器主体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-09-13T17:42:34.320

```
var isFullyScrolled = this.scrollTop + this.clientHeight >= this.scrollHeight; 
```

此外，对于一些分数的情况，我会从滚动高度中减去几个像素。

```
document.querySelector('section').addEventListener('scroll', function (e) {
  var isFullyScrolled = this.scrollTop + this.clientHeight >= this.scrollHeight;
  document.querySelector('output').textContent = isFullyScrolled;
});
```

```
html, body, section {
  height: 100%;
  margin: 0;
}

section {
  overflow: auto;
}

div {
  height: 40%;
}

div:nth-child(even) {
  background: silver;
}

output {
  position: absolute;
  left: 8px;
  top: 8px;
  color: red;
  font-family: monospace;
}
```

```
<section>
  <div></div>
  <div></div>
  <div></div>
  <div></div>
</section>
<output>Scroll</output>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:23:12.213

您可以尝试在最后添加一个没有内容的 div，只需给它一些高度。并检查该 div 是否在视口中。如果是，则表示您已到达卷轴的尽头。这是一个很棒的 jQuery 插件，用于检查元素是否在视图中。[http://remysharp.com/2009/01/26/element-in-view-event-plugin/](http://remysharp.com/2009/01/26/element-in-view-event-plugin/)

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-03T16:20:07.190

如果您想确定元素是否在其**宽度**（x 轴）上完全滚动，方法如下：

```
const scrolledElement = document.getElementById(ELEMENT_ID);
const isElementFullyScrolled = scrolledElement.scrollWidth - scrolledElement.scrollLeft === scrolledElement.clientWidth; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T11:26:23.247

您可以执行以下操作：

```
var top = $('.content-wrapper').scrollTop();
var height = $('.content-wrapper').height();
if(top==height) {
//load more data
} 
```

# capistrano - capistrano 部署 rails3.2 应用程序中的 bundle:install 命令在哪里？

> ID：13218073
> 
> 赞同：2
> 
> 时间：2012-11-04T11:19:29.093
> 
> 标签：capistrano, bundler, rbenv

我正在尝试在 prod 服务器上使用 capistrano 和 rbenv 部署 rails 3.2 应用程序。

Bundle 失败了，所以我想覆盖`bundle:install`回调钩子，但我在 capistrano gem 中找不到方法。

这是在哪里/哪个文件声明的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T13:12:10.100

它实际上在 Bundler 中。

*   它在这里连接到 Capistrano - [https://github.com/carlhuda/bundler/blob/master/lib/bundler/capistrano.rb#L9](https://github.com/carlhuda/bundler/blob/master/lib/bundler/capistrano.rb#L9)

*   安装任务在这里定义 -

[https://github.com/carlhuda/bundler/blob/master/lib/bundler/deployment.rb#L38](https://github.com/carlhuda/bundler/blob/master/lib/bundler/deployment.rb#L38)

鉴于此，您可以尝试找出问题所在。

干杯!

# mysql - 在 Ruby on Rails 中将数据插入数据库

> ID：13218075
> 
> 赞同：0
> 
> 时间：2012-11-04T11:19:54.240
> 
> 标签：mysql, ruby-on-rails

我有 2 个模型，主要模型和细节模型。在我的家庭控制器中，我想在数据库中插入 1.000.000 个条目，仅用于测试问题。

但这很慢，插入的速度很慢..有可能加快速度吗？

也许我的配置有问题？因为我想要，每次保存 Main 条目时，都应该创建相应的详细条目。

主模型如下所示：

```
class Main < ActiveRecord::Base
  has_one :detail, :dependent => :destroy
  before_create :build_a_detail

private
  def build_a_detail
       self.build_detail(:Bezeichnung => 'test', :Koordinaten => 10, :main_id => self.id)
  end
end 
```

详细模型如下所示：

```
class Detail < ActiveRecord::Base
  belongs_to :main
end 
```

家庭控制器：

```
def new
    for i in 0..1000000
      main = Main.new(:Category => 'Krankenhaus', :Latitude => 5, :Longitude => 6)
      main.save
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:36:12.943

问题是每次创建都会在数据库中执行一个插入查询，这会减慢应用程序的速度。您也可以使用 Rails 进行批量插入： [批量插入 RAILS](http://web.archive.org/web/20160310201301/https://www.coffeepowered.net/2009/01/23/mass-inserting-data-in-rails-without-killing-your-performance/)

# php - 基本 mysqli 选择

> ID：13218078
> 
> 赞同：1
> 
> 时间：2012-11-04T11:21:10.277
> 
> 标签：php, mysql, select, mysqli

我有一个选择语句，我想从表中获取所有行，但似乎有精神障碍 - 这应该是基本的东西，但似乎无法让它工作。

'postage_price' 表中只有两行 - 和两列：价格 | 参考

选择语句如下：

```
$get_postage="SELECT price FROM postage_price ORDER BY ref DESC";
$get_postage_result=mysqli_query($dbc, $get_postage) or die("Could not get postage");
while($post_row=mysqli_fetch_array($dbc, $get_postage_result))
{
$post1[]=$post_row;
} 
```

然后我试图回应结果：

```
echo $post1['0'];
echo $post1['1']; 
```

这没有显示任何内容。我的头痛也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:33:01.380

您拥有`$post1[]=$post_row;`并且`$post_row`本身就是一个数组。因此，您可以通过以下方式访问发布数据：`$post1[NUMBER][0]`其中`NUMBER`是 $post1 数组索引，并且`[0]`是 mysqli_fetch_array 返回的 $post_row 的 0 索引。

可能您想`$post1[]=$post_row[0];`在代码中使用以避免数组数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:47:12.373

```
while($post_row = mysqli_fetch_array($dbc, $get_postage_result))
{
    $post1[] = $post_row['price'];
} 
```

如您所见：`$post_row`在这一行中：`= mysqli_fetch_array($dbc, $get_postage_result)`是一个数组。您正在尝试将整个数组值保存到块中的另一个数组中。:)

**编辑**

```
while($post_row = mysqli_fetch_array($get_postage_result))
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T11:28:29.487

您将 1 和 0 作为字符串索引传递，这仅在您的数据库中有一个名为 0 或 1 的列时才有效。您需要将它们作为数字索引传递。

尝试：

```
print_r($post1[0]);
print_r($post1[1]); 
```

或者

```
print_r($post['price']);
print_r($post['ref']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T11:48:23.327

如果某些东西在 PHP 脚本中不起作用，您可以做的第一件事就是获得更多知识。你已经写了

```
echo $post1['0'];
echo $post1['1']; 
```

什么都不显示。仅当这些值为或空字符串`NULL`时才会出现这种情况。`FALSE`

所以下一步是要么`$post1`先调查

```
var_dump($post1); 
```

通过转储变量。

另一个步骤是在脚本之上启用错误显示和报告到最高级别，以便了解潜在问题在哪里：

```
ini_set('display_errors', 1); error_reporting(~0); 
```

你也可以使用 PHP 5.4（第一部分也适用于旧的当前 PHP 5.3，`foreach`但你可以`query()`返回一些有用的东西）并稍微简化你的脚本，如下所示：

```
class MyDB extends mysqli
{
    private $throwOnError = true; # That is the die() style you do.

    public function query($query, $resultmode = MYSQLI_STORE_RESULT) {
        $result = parent::query($query, $resultmode);
        if (!$result && $this->throwOnError) {
            throw new RuntimeException(sprintf('Query "%s" failed: (#%d) %s', $query, $this->errno, $this->error));
        }
        return $result;
    }
}

$connection = new MyDB('localhost', 'testuser', 'test', 'test');
$query      = 'SELECT `option` FROM config';
$result     = $connection->query($query);
foreach ($result as $row) {
    var_dump($row);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T11:54:17.733

在您的帮助下，我发现了错误 - 它在 mysqli_fetch_array 中，我有不需要的 $dbc。

```
$get_postage="SELECT price FROM postage_price ORDER BY ref DESC";
$get_postage_result=mysqli_query($dbc, $get_postage) or die("Could not get postage");
while($post_row=mysqli_fetch_array($get_postage_result))
{
$post1[]=$post_row['price'];
} 
```

代替：

```
$get_postage="SELECT price FROM postage_price ORDER BY ref DESC";
$get_postage_result=mysqli_query($dbc, $get_postage) or die("Could not get postage");
while($post_row=mysqli_fetch_array($dbc, $get_postage_result))
{
$post1[]=$post_row['price'];
} 
```

对我来说糟糕的一天:(

谢谢大家

# javascript - Rearrange a list of items in an array based on different patterns using Javascript

> ID：13218079
> 
> 赞同：1
> 
> 时间：2012-11-04T11:21:17.327
> 
> 标签：javascript

I recently wrote a similar question, but removed it because the question itself was not clear and sufficiently descriptive. So here goes:

I’m trying to rearrange a list of items in an array based on different patterns. For example, let’s say we have an array that looks like this:

```
var Items = ['l','w','m','m','w','h','l','w','m','m','w','h','l','w','h']; 
```

Now, I would like to rearrange the items to map any of these patterns:

```
var Patterns = ['l', 'ww', 'hh' , 'wmm', 'mmw', 'hmm', 'mmh', 'mmmm']; 
```

I don’t want to pick the items randomly, I would like to keep the chronological hierarchy of the items as close as possible, reading from left to right. Also, the pattern array is prioritized reading from left to right. ('l' is more important than 'ww' and so on.)

### I’ll try to describe the process, step by step:

If we use the above Items array, we would like to check the first item: Items[0] and compare it to the Patterns array.

So:

**Step 1.** Items[0] (l) matches Patterns[0] (**l**) perfectly, so stop searching for more pattern combination and save this and continue from here.

```
Output: l, … 
```

**Step 2.** Items[1] (w) matches Patterns[1] (**w** w) and Patterns[3] (**w** mm), continue searching since all pattern combinations that starts with or includes a 'w' is combined with another character.

**Step 3** *(continuing from Step 2)*. Items[1] (w) + Items[2] (m) matches Patterns[3] (**wm** m). Continue since Patterns[3] includes 3 characters (wmm)

**Step 4** *(continuing from Step 3)*. Items[1] (w) + Items[2] (m) + Items[3] (m) matches Patterns[3] (**wmm**). Close and save since it's a perfect match.

```
Output: l, w, m, m, … 
```

**Step 5.** Items[4] (w) matches Patterns[1] (**w** w) and Patterns[3] (**w** mm), continue searching since all pattern combinations that starts with or includes a 'w' is combined with another character.

**Step 6.** *(continuing from Step 5)*. Items[5] (h) does not match any pattern combinations starting with 'w' (previous step) so: grab and move the nearest 'w' which in this case is Items[7] and combine with Items[4] (previous step) since it's a match of Patterns[1] (**ww**) and Patterns[1] is more important (prioritized) than Patterns[3] because we read the array from left to right.

```
Output: l, w, m, m, w, w, … 
```

Continue...

* * *

There might be impossible to combine the last or the two characters from the Items array, not sure. Here is the complete output (if my counting is correct) of the above Items array after steping thru all combinations:

```
Output: l, w, m, m, w, w, h, h, l, m, m, w, l, w, h 
```

Do anyone know how this might be done using Javascript?

# kernel - 编写自己的内核有什么好处

> ID：13218091
> 
> 赞同：1
> 
> 时间：2012-11-04T11:22:57.177
> 
> 标签：kernel

我对操作系统编程很感兴趣。我想用空纸写自己的内核。我精通C语言和一点汇编。我打算购买Andrew tanenbaum的书：“操作系统设计与实现”并开始阅读它。每个人都告诉我这只是浪费时间，如果我放弃编写自己的内核的这种想法会很好。但我只是想知道幕后一切是如何运作的，学习编写自己的内核只是为了教育目的，我没有任何幻想，我的操作系统将是巨大的和可用的。

有没有比购买 AT OS Design and Implementation 来了解 OS 在幕后工作的方法？构建我自己的 linux 发行版就足够了吗？学习 linux 内核开发？或者学习 Windows Internals（Mark Russonovich 的优秀书籍）？为了了解一切是如何运作的。

事先谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T11:32:43.333

我认为你最好的机会是研究当前的 Linux 内核。它已经建立并被广泛使用。它是免费的，为什么不呢？编写自己的内核将花费大量时间，并且您会偶然发现其他人已经发现的东西。尽管创建自己的内核将是一个非常有趣的项目，但不要重新发明轮子。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T23:15:29.897

当然，学习现有的开源内核（例如 Linux）是有帮助的，但如果没有一些背景知识（例如 Tanenbaum 书或本地/在线大学的操作系统课程），您可能会完全迷失方向。我建议观看有关操作系统如何工作的讲座，在旁边阅读教科书，然后*才*开始查看源代码。

当您开始从现有内核读取代码时，请尝试找到一个爱好/学习的操作系统。大多数拥有良好操作系统课程的大学都有一个他们教的内核（有时他们已经删除了一些学生必须自己实现作为家庭作业练习的内核），或者你总是可以使用 Minix。如果您使用 Minix 来了解操作系统主题，那么使用 Minix2 等旧版本可能是个好主意 - 我读到新版本更“适合生产”/“初学者无法访问”。无论如何，请确保在代码之前阅读文档！

# javascript - How to load dynamic JS code in DOM structure?

> ID：13218096
> 
> 赞同：0
> 
> 时间：2012-11-04T11:23:47.570
> 
> 标签：javascript, jquery, html

I have an HTML with JS element that I need to load on runtime.

These are some example files to illustrate the functionality I'm looking for.

**File 1: index.html**

```
<div id="mydiv"> </div>
<script type="text/javascript">
   xmlhttp=new XMLHttpRequest();
   xmlhttp.open("GET","script.php",false);
   xmlhttp.send();
   var text=xmlhttp.responseText;
   var elem=document.getElementById("mydiv")
   elem.innerHTML=text
   func() 
</script> 
```

**File 2: script.php**

```
<script type="text/javascript">
   function func(){
       alert("func")
   }
</script> 
```

**ERROR returned by browser:**

> Inline script thread
> Uncaught exception: ReferenceError: Undefined variable: func Error thrown at line 20, column 0 in localhost/my_project/: func()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:27:23.417

`.innerHTML`不执行 html 中的脚本元素。

尝试这个：

```
xmlhttp=new XMLHttpRequest();
xmlhttp.open("GET","script.php",false);
xmlhttp.send();
var text=xmlhttp.responseText;

var root = document.createElement("div");
root.innerHTML = text;
var scripts = root.getElementsByTagName("script");

for( var i = 0; i < scripts.length; ++i ) {
    var code = scripts[i].innerText || scripts[i].textContent || scripts[i].innerHTML || "";
    eval(code);
}

func(); 
```

# html - 音频标签在 Firefox 和 Opera 中不起作用

> ID：13218097
> 
> 赞同：3
> 
> 时间：2012-11-04T11:24:15.617
> 
> 标签：html, firefox, audio, opera

我正在尝试创建自己的音频播放器。我已经在 Google Chrome 中检查过，一切正常。但是当我尝试在 Firefox 和 Opera（最新版本）中使用它时，它没有。例如我有：

```
<!DOCTYPE html>
<head>
</head>
<body>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <div id="play">click me</div>
    <audio class="tr_audio">
       <source src="ogg/track1.ogg" type="audio/ogg; codecs='vorbis'">
       <source src="track1.mp3" type="audio/mpeg; codecs='mp3'">
    </audio>
    <script>
        $("#play").click(function() {
            $("audio").get(0).play();
            alert($("audio").get(0));
        });
    </script>
</body> 
```

它在 Chrome 中运行良好，但在 Opera 和 Firefox 中不起作用。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:24:44.770

使用您的代码并在 Firefox 中对其进行测试清楚地表明问题出在编解码器上。以下行是从 Firefox 控制台日志中复制的：

> [10:20:19.068] 不支持“audio/ogg;codecs='vorbis'”的指定“type”属性。加载媒体资源 Example.ogg 失败。@http: [//example.com/](http://example.com/)
> 
> [10:20:19.068] 不支持“audio/mpeg；codecs='mp3'”的指定“type”属性。媒体资源 Example.mp3 加载失败。@http: [//example.com/](http://example.com/)

然后，`codecs`从属性中删除规范`type`使其可以在 Firefox、Safari 和 Opera 中使用。

```
<audio class="tr_audio">
   <source src="ogg/track1.ogg" type="audio/ogg">
   <source src="track1.mp3" type="audio/mpeg">
</audio> 
```

我希望它有所帮助。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:32:21.397

请注意，任何使用 Beta 版 FireFox 21 的人，如果您没有注意到 MP3 音频现在可以在`<audio>`标签中播放，而无需编辑浏览器的 about:config。现在我们只需要正确发布它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T09:57:43.367

Firefox 24.0 从 2013 年万圣节到 MP3 源的 firebug 1.12.4

```
<source src="media/SoundFile.mp3" type="audio/mpeg" />

[! Yellow Warning] Specified "type" attribute of "audio/mpeg" is not supported. Load of media resource media/SoundFile.mp3 failed. 
```

最初我尝试了各种编解码器条目，但它真的不喜欢它们。例如，在我删除编解码器声明之前，Ogg 也犯了类似的错误。所以这个想法没有帮助。

我想我只是记录了即使 MP3 自 Firefox 版本 21 起就被支持，但由于某种原因它仍然无法在这里工作。

嗯，我应该提到这是来自本地文件，所以可能与 Win7 上缺少的 MIME 类型有关，或者想到了什么。

**不用等了……现在我认为这是一个简单的许可问题。**

所以真的是糟糕的错误记录，它应该解释许可是否是问题。

# matlab - 一定区间内呈指数分布的随机数

> ID：13218100
> 
> 赞同：4
> 
> 时间：2012-11-04T11:24:43.213
> 
> 标签：matlab, math, probability

我想使用指数分布在某个区间内生成一个随机数。我的问题是，如果我使用 exprnd 我无法控制区间，我只能给出一个平均值，但这不适合我的需要。是否有其他功能或者我必须使用一些技巧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:45:25.203

这有帮助吗？（或者我误解了这个问题？）

```
%#Set the parameters
T = 2000; %#Number of observations to simulate
Mu = 0.5; %#Exponential distribution parameter
LB = 0; %#Lower bound on exponential distribution
UB = 1; %#Upper bound on exponential distribution

%#Validate the parameters
if LB < 0 || UB < 0; error('Bounds must be non-negative'); end
if Mu <= 0; error('Mu must be positive'); end

%#Determine LB and UB in terms of cumulative probabilities
LBProb = expcdf(LB, Mu);
UBProb = expcdf(UB, Mu);

%#Simulate uniform draws from the interval LBProb to UBProb
Draw = LBProb + (UBProb - LBProb) .* rand(T, 1);

%#Convert the uniform draws to exponential draws using the inverse cdf
X = expinv(Draw, Mu); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:45:41.813

支持指数分布`[0,+\infty)`。您可能希望`[0,1)`使用一些[可测量](http://en.wikipedia.org/wiki/Measurable_function)的可逆映射重新映射它`f`，因此这`Y = f(X)`是支持的随机变量`[0,1)`。

问题：你必须构建这样一个`f`.

我的建议是

```
 f(x) = 2/pi * arctan(x). 
```

该函数`arctan`映射`(-\infty,\infty)`到`(-pi/2,pi/2)`。因为您只考虑正样本（因为您`X`呈指数级增长），所以您将获得样本`[0,pi/2)`；因此，您必须重新调整`2/pi`. 此外，由于 is 的 MacLaurin 展开式`arctan`，`x+o(x)`您的样本与原点呈指数地完全接近。

现在，如果您从任何指数中采样（即使用可能的任何值`\lambda`- 最好是小的）并且您对样本进行评估`f`，您将获得随心所欲地集中的样本（即接近`0`和接近指数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T11:40:29.447

这里有一个建议：

从 lambda=1 的指数分布中采样，并拒绝超出预期区间的任何数字。如果您的区间是 [0,1]，那么您在该区间内获得一个数字的概率约为 0.63。这意味着在 10 个样本后获得“好”数字的概率为 99%。

另一种可能性是选择一个足够高的数 n，使得在 n 上采样某样东西的概率足够小。对于 lambda = 1，n=1000 就足够了。然后您只需从指数中采样并将其转换为您的随机样本 a+(ba)*(sample/n)

# mysql - 关系数据库中的 WebGraph 存储

> ID：13218102
> 
> 赞同：0
> 
> 时间：2012-11-04T11:24:50.330
> 
> 标签：mysql, sql, web-applications, graph-algorithm, pagerank

如何有效地将 WebGraph 存储在 MySQL 等关系数据库中，以便使用 PageRank 等算法？我想创建两个表：一个用于仅存储不同 URL 的 URL，另一个用于每个 url 存储其传出 URL 的传出链接表。对有效存储有任何想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:51:42.033

有一些特定的数据库是为此目的而创建的。看一眼

*   [http://neo4j.org/](http://neo4j.org/)
*   [https://launchpad.net/giraffedb](https://launchpad.net/giraffedb)

# c# - 新项目对话框中缺少 ASP.Net Web 应用程序

> ID：13218105
> 
> 赞同：0
> 
> 时间：2012-11-04T11:25:28.653
> 
> 标签：c#, visual-studio

我有 Vs-2005 IDE，其中**C#-Application的****ASP.Net Web 应用** 程序在可以设计新应用程序的新项目对话框中丢失或不可用。

 **不卸载并重新安装VS-2005的软件是否可以恢复？

注意：-**第一次使用时它就在那里，但是当我开始在 c# 中使用 windows 应用程序时，它就从新项目列表中消失了。不知道为什么？。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:46:24.220

需要更多信息，例如 IDE 的版本。您可能应该有一个 Visual C# 速成版，并且您可能必须安装一个 Visual Web Developer 2005 速成版来解决它。但这一切都是假设...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:49:09.393

在 Visual Studio 2005 中，您需要安装 SP1 才能拥有 ASP.NET Web 应用程序模板项目。**

# c++ - “从这里需要”错误声明列表列表

> ID：13218108
> 
> 赞同：2
> 
> 时间：2012-11-04T11:26:05.007
> 
> 标签：c++, templates, constructor, declaration

我正在尝试以这种方式声明列表列表：

```
List_vector<List_vector<int> > multilist; 
```

但是 Eclipse 强调了上述声明并给出了这个错误：

> 从这里需要

部分 List_vector 实现：

```
template<class T>
class List_vector: public Linear_list<T, int> {
public:
  typedef typename Linear_list<T, int>::value_type value_type;
  typedef typename Linear_list<T, int>::position position;

  List_vector();
  List_vector(int);
  List_vector(const List_vector<T>&);
  ~List_vector();
private:
    void change_dimension_(T*&, int, int);
    value_type* elements_;
    int length_; // the length of the list
    int array_dimension_; // array's dimension
}; 
```

编译器输出：

```
g++ -O3 -Wall -c -fmessage-length=0 -o multilista.o "..\\multilista.cpp" 
In file included from ..\multilista.cpp:1:0:
..\list_vector.h: In instantiation of 'List_vector<T>::~List_vector() [with T = List_vector<int>]':
..\multilista.cpp:16:32: required from here
..\list_vector.h:78:5: warning: deleting object of polymorphic class type List_vector<int>' which has non-virtual destructor might cause undefined behaviour [-Wdelete-non-virtual-dtor]
..\list_vector.h: In member function 'List_vector<T>::value_type List_vector<T>::read(List_vector<T>::position) const [with T = int; List_vector<T>::value_type = int; List_vector<T>::position = int]':
..\list_vector.h:136:1: warning: control reaches end of non-void function [-Wreturn-type]
..\list_vector.h: In member function 'List_vector<T>::value_type List_vector<T>::read(List_vector<T>::position) const [with T = List_vector<int>; List_vector<T>::value_type = List_vector<int>; List_vector<T>::position = int]':
..\list_vector.h:136:1: warning: control reaches end of non-void function [-Wreturn-type]
g++ -O3 -Wall -c -fmessage-length=0 -o tester.o "..\\tester.cpp" 
g++ -o Lista.exe tester.o multilista.o 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:38:49.513

```
In file included from ..\multilista.cpp:1:0:
..\list_vector.h: In instantiation of 'List_vector<T>::~List_vector() [with T = List_vector<int>]':
..\multilista.cpp:16:32:   required from here
..\list_vector.h:78:5: warning: deleting object of polymorphic class type 'List_vector<int>' which has non-virtual destructor might cause undefined behaviour [-Wdelete-non-virtual-dtor] 
```

如果您要从 派生`Linear_List`，您应该考虑将析构函数设为虚拟，就像它说的那样。这只是一个警告，只有你知道它是否真的需要（没有足够的代码粘贴来判断）。

```
..\list_vector.h: In member function 'List_vector<T>::value_type List_vector<T>::read(List_vector<T>::position) const [with T = int; List_vector<T>::value_type = int; List_vector<T>::position = int]':
..\list_vector.h:136:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

您还没有粘贴 的代码`List_vector::read`，但它似乎做错了什么：函数的每条路径都应该返回 a `List_vector::value_type`（除非它引发异常），但是您让控制权到达终点而不做任何事情。

```
..\list_vector.h: In member function 'List_vector<T>::value_type List_vector<T>::read(List_vector<T>::position) const [with T = List_vector<int>; List_vector<T>::value_type = List_vector<int>; List_vector<T>::position = int]':
..\list_vector.h:136:1: warning: control reaches end of non-void function [-Wreturn-type] 
```

# tortoisehg - 无法推送到 BitBucket - 现有连接被远程主机强行关闭

> ID：13218114
> 
> 赞同：6
> 
> 时间：2012-11-04T11:26:33.807
> 
> 标签：tortoisehg, bitbucket

我正在尝试将我的更改推送到我的 Bitbucket 的私有存储库。

推送过程最初开始，如下面的屏幕截图所示......

![在此处输入图像描述](../Images/096e89928ff141da0bdadf29d4177069.png)

但过了一段时间我收到以下消息：

![在此处输入图像描述](../Images/f83a23207ede58cc4f768e65dfe68710.png)

错误消息显示：

> URLError: [Errno 10054] 现有连接被远程主机强行关闭

我已经尝试了很长时间......我能够发送 19000+/24076KB，这是我记得的。

我是 Tortoise HG 的新手，这些错误总是阻止我从 SVN 迁移到 GIT/HG :`(

# angularjs - 带有 Ajax 功能的 Angular-UI Select2 的两种方式数据绑定

> ID：13218116
> 
> 赞同：5
> 
> 时间：2012-11-04T11:27:07.750
> 
> 标签：angularjs, jquery-select2, angular-ui

AngularJS + Angular-UI Select2 与 Ajax 功能的两种方式数据绑定。

我创建了一个指令来以通用方式实现 Select2 下拉 Ajax 行为：-（它需要很少的属性来获取 formatResult、调用 formatSelection 方法和 url）。

我的问题是如何在“编辑模式”中加载值，从下拉列表中选择的值是在格式选择方法中接收的，但是在加载屏幕时，我想从绑定的相同值加载下拉列表。例子：-

```
 <input type="hidden" for="part" class="bigdrop" style="width: 250px" formatresult="partFormatResult" formatselection="partFormatSelection" aurl="/api/Part" search-drop-down ui-select2="configPartSelect2" ng-model="product.SalesPart" data-placeholder="Select Part" ng-change="onPartSelect();" />

    Directive Code

    One23SRCApp.directive('searchDropDown', ['$http', function (http) {
        return function (scope, elm, attrs) {
            var raw = elm[0];
            var fetchFuncName = "fetch" + attrs["uiSelect2"];
            console.log("Directive load pat  " + scope[attrs["ngModel"]]);
            scope[fetchFuncName] = function (queryParams) {
                var result = http.get(queryParams.url, queryParams.data).success(queryParams.success);
                result.abort = function () {
                    return null;
                };
                return result;
            };

            scope[attrs["uiSelect2"]] = {
                minimumInputLength: 3,
              initSelection: scope[attrs["initselection"]],
                ajax: {
                    url: attrs["aurl"],
                    data: function (term, page) {
                            return { params: { isStockable: true, query: term, pageNo: page, pageSize: 20 } };
                    },
                    dataType: 'json',
                    quietMillis: 100,
                    transport: scope[fetchFuncName],
                    results: function (data, page) {
                        var more = (page * 20) <= data.length; // whether or not there are more results available
                        return { results: data, more: more };
                    }
                },
                formatResult: scope[attrs["formatresult"]],
                formatSelection: scope[attrs["formatselection"]],
                dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
            };

            return { bind: attrs["ngModel"] };
        };

    }]);

//inside controller-
after loading of data
   $("#partDD").select2("val", product.SalesPart);
//$scope.partInitSelection definition.
    $scope.partInitSelection = function (element, callback) {
        if (! $scope.PartList) {
            $scope.PartList = [$scope.product.SalesPart];
        } else {
            $scope.PartList.push($scope.product.SalesPart);
        }
        callback($scope.product.SalesPart);
    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:08:29.793

最后修复它：- 由于我将配置对象保存在范围[attrs["uiSelect2"]] 中，因此每次加载数据时我都会调用上述配置对象的 .ajax.data 方法。

```
scope[attrs["uiSelect2"]].ajax.results(product.SalesPart.text, 1); 
```

# ios - UITextView 自动补全自定义文本

> ID：13218120
> 
> 赞同：3
> 
> 时间：2012-11-04T11:27:41.797
> 
> 标签：ios, uitextview, autocompletetextview, uitextviewdelegate

当用户键入时，我`UITextView`想在其中建议一些单词（例如在弹出窗口中），以显示拼写错误的单词。

我在一个数组中有一些自定义词，应该用作建议

例如，如果用户开始输入“carpen”，我想建议“carpenter1”、“carpenter2”、“carpenter3”，以便用户可以选择 3 个建议中的任何一个或选择输入一个新的。

**`UITextChecker`**

有`completionsForPartialWordRange:inString:language:`什么我可以使用的吗？如果是这样，我怎样才能将数组传递给弹出窗口？

**问题：**

1.  我如何能够实现图像中显示的内容？
2.  让我知道是否有不同的方法

![在此处输入图像描述](../Images/68aa862721930253b00ac93250beeb6e.png)

# javascript - 随机数，淡入答案

> ID：13218121
> 
> 赞同：1
> 
> 时间：2012-11-04T11:28:01.543
> 
> 标签：javascript, html, animation

我*真的*是 JS 的新手，而不是任何想像力的开发人员！我已经设置了代码，可以从输入框和下拉列表中为我生成一个随机数。基本上从 x 开始，从 DDL 中选择一个最大数并计算其间的一个随机数。代码来自 CSS Tricks，我已经对其进行了调整以适合我并编写了 HTML 页面。

一切正常，但我想为答案设置动画。目前它刚刚出现，而且还不够优雅。我想要一些像淡入一样简单的东西。但是我尝试的所有功能都会导致计算停止工作并且没有数字出现，更不用说动画了。关于我的代码字符串中我需要动画去哪里的任何指导？

```
function IsNumeric(n){
return !isNaN(n);
} 

$(function(){

  $("#getit").click(function() {

      var numLow = $("#lownumber").val();
      var numHigh = $("#highnumber").val();

      var adjustedHigh = (parseFloat(numHigh) - parseFloat(numLow)) + 1;

      var numRand = Math.floor(Math.random()*adjustedHigh) + parseFloat(numLow);

      if ((IsNumeric(numLow)) && (IsNumeric(numHigh)) && (parseFloat(numLow) <= parseFloat(numHigh)) && (numLow != '') && (numHigh != '')) {
        $("#randomnumber").text(numRand);
      } else {
        $("#randomnumber").text("Erm...");
      }

      return false;
  });

  $("input[type=number]").each(function(){
      $(this).data("first-click", true);
  });

  $("input[type=number]").focus(function(){

      if ($(this).data("first-click")) {
        $(this).val("");
        $(this).data("first-click", false);
      }
  });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:38:51.753

来自 JS 控制台的错误消息：

```
SyntaxError: illegal character  

$(#randomnumber).fade("slow");
--^ 
```

对于选择器，您必须使用字符串：`$("#randomnumber").fade("slow");`

# ruby-on-rails - Activesupport titlecase() with bang (.titlecase!)？

> ID：13218123
> 
> 赞同：0
> 
> 时间：2012-11-04T11:28:20.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activesupport

我目前有一个带有客户名称的字符串，我将其命名为：

```
@customer_name = @customer_name.titlecase 
```

但这似乎有点啰嗦。当我尝试这样做时：

```
@customer_name.titlecase! 
```

我得到一个无方法错误。`titlecase!`存在吗？没有办法做到这一点似乎很奇怪，因为有一个`downcase!`，例如。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:42:31.420

您可以在[http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/String/Inflections.html#M000381](http://as.rubyonrails.org/classes/ActiveSupport/CoreExtensions/String/Inflections.html#M000381)上看到所有 titlecase 所做的就是这个（还要注意没有 bang 方法）

```
def titleize
  Inflector.titleize(self)
end 
```

所以，如果你想实现这是

```
class String
  def titleize!
    replace titleize
  end
end 
```

然后：

```
>> the_string = "oh hai"
=> "oh hai"
>> the_string.titleize!
=> "Oh Hai"
>> the_string
=> "Oh Hai" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:30:32.477

带或不带 bang 的小写字母是 Ruby 方法。标题大写不是。也许，这就是它没有bang版本的原因。Rails 开发人员可能没有费心去定义 bang 版本。

# telnet - 黑屏和错误 400 错误请求

> ID：13218126
> 
> 赞同：2
> 
> 时间：2012-11-04T11:28:36.540
> 
> 标签：telnet, apache

我正在尝试 telnet 进入 Web 服务器并发送多行请求消息。我必须在请求消息中包含`If-modified-since`. 我为Win7做了设置。

例如，当我`telnet edition.cnn.com 80`在命令提示符下键入时，它会打开一个黑色的空屏幕，我看不到我键入的任何内容。

然后我在黑屏上写了这行`GET pageName HTTP/1.0`，它返回`400 Bad Request Error`并说连接关闭。我该怎么办？我以获取页面名称为例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T11:56:18.447

如果您想使用例如 telnet 客户端手动获取网页，您必须记住 HTTP 请求标头的格式：

```
获取页面名称 HTTP/1.0
附加标题
附加标题

```

请注意，最后一行是空行。您可能还需要`HTTP/1.1`某些标题才有意义。请阅读 HTTP 规范以获取更多信息以及哪些标头是标准的。

* * *

“黑屏”只是在命令窗口中运行的 telnet 程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T11:35:04.500

400 是一个 HTTP 错误代码，意味着您确实成功地向服务器发送了一条消息，它只是无效的 HTTP（可能是一个简单的错字） 黑屏并且看不到您输入的内容是 telnet 的“正常”行为（至少我总是有那个）。

如果您使用像 Putty 这样的工具，您可以看到您输入的内容，因此更容易执行此类操作并发现您的拼写错误。请参阅此处的教程：[http ://www.hellboundhackers.org/articles/571-spoofing-http-requests-with-putty.html](http://www.hellboundhackers.org/articles/571-spoofing-http-requests-with-putty.html)

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T11:34:17.807

如果您需要与 Web 服务器进行基本交互之外的任何其他操作，我建议您使用专门为该工作制作的工具，例如[cURL](http://curl.haxx.se/)。它将允许您设置标题等。

```
curl -H "If-Modified-Since:04-Nov-2012 11:59:00 GMT" http://host.com/21838937.asp 
```

# javascript - Angular JS文本区域验证

> ID：13218130
> 
> 赞同：14
> 
> 时间：2012-11-04T11:29:51.693
> 
> 标签：javascript, angularjs

当文本区域中没有文本时，我有这个 AngularJS 代码试图在标签旁边显示两颗星。相同的代码适用于输入标签，但不适用于 textarea。

```
<div class="input-left">
    <label for="email">
        <span ng-show="contactform.email.$error.required" class="required">*</span>Email:
    </label>
    <input ng-model="email" type="text" name="email" id="email" required></br></br>
    <label for="budget">Budzet:</label>
    <input ng-model="budget" type="text" name="budget" id="budget">
</div>
<div class="clearboth">
    <label for="msg" class="left" >
        <span ng-show="contactform.msg.$error.required" class="required">**</span>Pitanja ili Komentari?
    </label>
    <textarea ng-model="msg" rows="8" cols="50" class="input-no-width rounded shaded left clearboth" id="msg" required></textarea>
</div> 
```

根据[AngularJS 文档](http://docs.angularjs.org/api/ng.directive%3atextarea)- textarea 的行为应该与输入相同。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-04T12:04:49.560

您对`<textarea>`标签的问题是它没有定义`name`属性。

AngularJS 使用该`name`属性来暴露验证错误。

你应该像这样定义你的文本区域：

```
<textarea ng-model="msg" name="msg" rows="8" cols="50"
          class="input-no-width rounded shaded left clearboth" id="msg" required>
</textarea> 
```

请注意，拥有`id`并且`ng-model`不足以正确处理验证消息。在 AngularJS 应用程序中，该`id`属性通常没有多大用处，可以省略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-25T01:30:26.407

对于表单验证**名称**非常重要。给它一个应该工作的名字。

```
<textarea ng-model="msg" 
          rows="8" 
          cols="50" 
          class="input-no-width rounded shaded left clearboth" 
          id="msg" 
          name="msg" 
          required>
</textarea> 
```

# php - 跨域 GET

> ID：13218134
> 
> 赞同：-2
> 
> 时间：2012-11-04T11:31:01.460
> 
> 标签：php, javascript, jquery, get

有人很高兴给我写了一个允许从跨域站点检索数据的脚本。PHP 看起来像这样：

```
<?php
if(isset($_GET['site'])){
  $f = fopen($_GET['site'], 'r');
  $html = '';
  while(strpos($html, 'position1_article_1') === FALSE)
    $html .= fread($f, 24000);
  fclose($f);
  echo $html;
}
?> 
```

保存为**proxy.php** Jquery 部分如下所示：

```
$(function(){

   var site = 'http://www.nu.nl';

   $.get('proxy.php', { site:site }, function(data){

      var href = $(data).find('.hdtitle').first().children(':first-child').prop('href');
      var url = href.split('/');
      href = href.replace(url[2], 'nu.nl');

      // Put the 'href' inside your div as a link
      $('#myDiv').html('<a href="' + href + '" target="_blank">' + href + '</a>');

   }, 'html');

}); 
```

问题是我无法弄清楚如何在身体或某些部分（如 h2、h3 等）中获得所有“a”。有人可以把它分解给我吗？例如; 为了获得页面中的所有href，我必须进行哪些更改？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-04T23:26:40.737

尝试这个 ：`header('Access-Control-Allow-Origin: *');`

并像这样使用它：

```
<?php
header('Access-Control-Allow-Origin: *');
if(isset($_GET['site'])){
  $f = fopen($_GET['site'], 'r');
  $html = '';
  while(strpos($html, 'position1_article_1') === FALSE)
    $html .= fread($f, 24000);
  fclose($f);
  echo $html;
}
?> 
```

享受 ！

# android - Android，Log 会降低应用程序速度吗？

> ID：13218137
> 
> 赞同：5
> 
> 时间：2012-11-04T11:31:40.340
> 
> 标签：android, logging, proguard

在我的应用程序中，我有很多行日志，例如 Log.i()、Log.e() 和 Log.d()。我通过我的应用程序广泛使用这些日志。

在我运行我的应用程序后，如果我将设备连接到 Eclipse，我可以看到数百行日志。我的问题是这种行为会降低应用程序速度吗？

==============

# **更新**

感谢弗兰克的建议。我将提议的代码添加到 proguard.cfg 中，然后导出新的 APK 文件。花了很多时间，但最终生成了新的 APK 文件。但是，当我在真实设备中对其进行测试时，我仍然可以看到日志。

这是我的 proguard.cfg：

```
# This is a configuration file for ProGuard.
# http://proguard.sourceforge.net/index.html#manual/usage.html

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize
-dontpreverify
# Note that if you want to enable optimization, you cannot just
# include optimization flags in your own project configuration file;
# instead you will need to point to the
# "proguard-android-optimize.txt" file instead of this one from your
# project.properties file.

-keepattributes *Annotation*
-keep public class com.google.vending.licensing.ILicensingService
-keep public class com.android.vending.licensing.ILicensingService

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembernames class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.**

# Hesam - Remove all logs
-assumenosideeffects class android.util.Log {
    public static int v(...);
    public static int d(...);
    public static int i(...);
    public static int w(...);
    public static int e(...);
}

#-libraryjars /libs/gcm.jar
#-libraryjars /libs/libGoogleAnalytics.jar
#-libraryjars /libs/twitter4j-core-android-2.2.6.jar
#-libraryjars /libs/universal-image-loader-1.5.4.jar

-dontwarn javax.management.**
-dontwarn java.lang.management.**
-dontwarn org.apache.**
-dontwarn org.slf4j.**
-dontwarn org.json.*

-keep class com.google.** { *; }
-keep class twitter4j.** { *; }
-keep class com.nostra13.** { *; } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T11:33:21.847

答案很明显，是的。

但是有一个解决方案，您可以要求 Proguard 删除您想要的任何级别的日志语句。像这样，您的用户不会受到他们无论如何都看不到的详细日志记录的影响。

将以下内容添加到您的 Proguard 配置中：

```
-assumenosideeffects class android.util.Log {
    public static *** d(...);
    public static *** v(...);
    public static *** i(...);
    public static *** w(...);
    public static *** e(...);
    public static *** wtf(...);
    } 
```

这将删除 LOG.d 和 LOG.v 语句，您可以随意扩展..

# functional-programming - 解释keep函数的含义

> ID：13218139
> 
> 赞同：0
> 
> 时间：2012-11-04T11:31:53.307
> 
> 标签：functional-programming

有人可以`keep`从简单的角度解释功能的含义和区别吗`map(array, fun)`

```
var array = [1, 2, 3, 4];
var even = function (x) { return x % 2 === 0; };

array.map(even); 
```

[闭包文档中的保持功能描述](http://clojuredocs.org/clojure_core/clojure.core/keep)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:34:55.987

从您链接的文档中查看此示例：

```
user> (keep #(if (odd? %) %) (range 10))
(1 3 5 7 9)
user> (map #(if (odd? %) %) (range 10))
(nil 1 nil 3 nil 5 nil 7 nil 9) 
```

如您所见，结果列表`keep`中不包含`nil`值 -包含`map`。

# wso2 - WSO2 Identity Server - XDAS Auditing

> ID：13218141
> 
> 赞同：1
> 
> 时间：2012-11-04T11:32:16.917
> 
> 标签：wso2, wso2is

The WSO2 Identity Server [features](http://wso2.com/products/identity-server/) list XDAS, but I can't find any more information on how WSO2 uses it.

*   Is there any documentation available about how the WSO2 Identity Server uses XDAS?
*   Does the Identity Server have an XDAS service API that it can offer auditing services for use by other (external) applications?
*   WSO2 offer a Centralized Auditing & Monitoring [solution](http://wso2.com/solutions/security-and-identity-gateway/centralized-auditing-and-monitoring/). How can I set this up for myself?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:41:56.783

We have done some work with XDAS in the WSO2 platform and the effort is on hold due to the less demand for XDAS.

You can find additional details from here : [http://mail.wso2.org/mailarchive/architecture/2011-February/004868.html](http://mail.wso2.org/mailarchive/architecture/2011-February/004868.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T12:26:49.250

I have checked out the whole WSO2 trunk and performed a `find` for files containing XDAS in their filename and a `grep` for files containing XDAS in their contents. Nothing was found.

My guess is that XDAS has not been implemented in the WSO2 platform.

# javascript - CORS 是否适用于 Xcode 中的 iOS 模拟器？

> ID：13218151
> 
> 赞同：-1
> 
> 时间：2012-11-04T11:33:35.437
> 
> 标签：javascript, ios, xcode, cordova

我有一个适用于 CORS 和 Safari 的应用程序。当我在 Xcode 中使用 iOS 6 模拟器对其进行测试时，它不会从我的 Web 服务中检索任何数据，但使用 Safari 会这样做。（我也在使用PhoneGap）

是因为我必须用 Xcode 设置一些特别的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:30:53.183

我在这里找到了答案：

[http://www.anujgakhar.com/2011/11/22/phonegap-gotcha-error-whitelist-rejection/](http://www.anujgakhar.com/2011/11/22/phonegap-gotcha-error-whitelist-rejection/)

解决方案：

```
In your PhoneGap.plist file, you need to add the allowed URLs to the ExternalHosts array. I added “*” as I did not want to add each individual URL separately to the list but that’s your choice. 
```

# iphone - 播放 png 序列

> ID：13218152
> 
> 赞同：0
> 
> 时间：2012-11-04T11:33:41.353
> 
> 标签：iphone, ios, cocos2d-iphone

我正在尝试使用以下代码在我的应用程序中播放一系列 PNG：

```
animatedSprite = [CCSprite spriteWithFile:@"Anim_1.png"];
animatedSprite.position = ccp( 512, 435 );
[self animatedSprite z:5];

NSArray *animFrames = [[NSArray alloc] initWithObjects:
                       [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"Anim_1.png"],
                       [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:@"Anim_2.png"], nil];

spriteAnim = [CCAnimation animationWithSpriteFrames:animFrames delay:1.0f/24.0f];

id animAction = [CCAnimate actionWithAnimation:spriteAnim];
[spriteAnim runAction:animAction]; 
```

'animatedSprite' 已正确添加，但动画不播放。我在这里想念什么？

我正在使用 Cocos2d 2.0、xcode 4.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:07:04.923

您应该在精灵上运行动作，而不是动画。

```
[animatedSprite runAction:animAction]; 
```

# c++ - 使用 C++ 的新标准

> ID：13218153
> 
> 赞同：0
> 
> 时间：2012-11-04T11:33:58.093
> 
> 标签：c++, compiler-construction, c++11, g++

网站[Interview Street](https://www.interviewstreet.com/)说他们使用“g++ 4.6.1, C++0x Mode”。据我所知，C++11 在正式发布之前被称为 C++0x。那么这是否意味着它们为 C++11 提供了不稳定或非官方的支持？

在“采访街”上编码时，我可以安全地使用 C++11 功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T11:38:08.760

我推荐 GCC 4.7 以获得更好的支持。但是你也可以在 4.6 中使用一些 C++11 特性。以下是他们的名单：

[http://gcc.gnu.org/gcc-4.6/cxx0x_status.html](http://gcc.gnu.org/gcc-4.6/cxx0x_status.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:39:16.733

c++0x 是 c++11 的同义词，所以你应该没问题。

但是有些功能您可以使用，而有些功能您不能使用。参考这里：

[http://gcc.gnu.org/gcc-4.6/cxx0x_status.html](http://gcc.gnu.org/gcc-4.6/cxx0x_status.html)

# html - 找不到如何调整网站元素的大小

> ID：13218166
> 
> 赞同：0
> 
> 时间：2012-11-04T11:35:46.887
> 
> 标签：html, css

我的网站有问题。我开始寻找网站以建立自己的网站。现在我卡住了，因为我找到了一个不错的菜单栏，但我不能自己写。所以，我决定从网站（[网站](http://livedemo00.template-help.com/wt_41180/index.html)）复制它。问题是，我找不到它在哪里，或者高度是如何定义的。无论我做什么，它总是 84px。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:59:26.440

首先，我开始寻找身高：84。但无处可寻。在菜单项的高度影响填充。

建议进一步使用萤火虫或蜻蜓或其他东西......

**超级鱼.css:15**

```
.menu > li > a {
...
padding: 30px 20px 36px;
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:56:20.067

好吧，这是标题的代码（您不只是喜欢标题标签吗？）

```
<header>
        <div class="header-pannel">
            <div class="inner-shadow">
                <div class="container_12 indent-bottom">
                    <div class="grid_12">
                        <!--======================== logo ============================-->
                        <h1><a href="index.html">Storex.</a></h1>
                        <!--=================== search form =====================-->
                        <form id="search-form" action="search.php" method="GET" accept-charset="utf-8">
                            <fieldset>
                                <label class="keywords">
                                    <input type="text" name="s" value="Search" onFocus="if(this.value =='Search' ) this.value=''" onBlur="if(this.value=='') this.value='Search'">
                                </label>
                                <a onClick="document.getElementById('search-form').submit()"></a>
                            </fieldset>
                        </form>
                        <div class="clear"></div>
                    </div>
                    <div class="clear"></div>
                </div>
                <!--======================== menu ============================-->
                <div class="border-top">
                    <div class="container_12">
                        <div class="grid_12">
                            <nav>
                                <ul class="menu responsive-menu">
                                    <li class="current"><a href="index.html">Home</a></li>
                                    <li><a href="index-1.html">Company</a>
                                        <ul>
                                            <li><a href="#">Welcome Message</a></li>
                                            <li><a href="#">Company Profile</a>
                                                <ul>
                                                    <li><a href="#">Our Capabilities</a></li>
                                                    <li><a href="#">Advantages</a></li>
                                                    <li><a href="#">Work Team</a></li>
                                                    <li><a href="#">Partnership</a></li>
                                                    <li class="last-item"><a href="#">Support</a></li>
                                                </ul>
                                            </li>
                                            <li><a href="#">Our History</a></li>
                                            <li class="last-item"><a href="#">Testimonials</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="index-2.html">Services</a></li>
                                    <li><a href="index-3.html">Solutions</a></li>
                                    <li><a href="index-4.html">Projects</a></li>
                                    <li class="last-item"><a href="index-5.html">Contacts</a></li>
                                </ul>
                                <div class="clear"></div>
                            </nav>
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>
            </div>
        </div>
    </header> 
```

所以这很忙。我建议在骨架.css 中查找大多数结构 css 元素。

我个人的建议：如果您是新手，请不要去查看其他网站。它们中的大多数都是垃圾（平均法则），即使它们看起来不错，代码有时也会很糟糕。它们不是与其他编码人员一起构建的，他们希望挑选和混合元素，它们主要是由构建网站的个人/团体/公司设计的，考虑到他们自己的易用性（尽管，看看制作的作品一些专业人士，我不知道他们如何设法维护他们的代码）。

我建议看一下框架。特别是免费分发的。[Twitter bootstrap](http://twitter.github.com/bootstrap/)就是一个很好的例子。在某些情况下，使用他人的代码也可能侵犯文案。

# ios - 无效签名：oauth_signature

> ID：13218169
> 
> 赞同：7
> 
> 时间：2012-11-04T11:35:56.203
> 
> 标签：ios, oauth, signature

我正在尝试生成 oauth_signature 以使用**Fatsecret API**，但出现无效签名错误 - 无法弄清楚原因。我尝试按照[此处](http://platform.fatsecret.com/api/Default.aspx?screen=rapiauth)提到的所有步骤（参见步骤 2）尽可能准确地生成签名值。他们说：

> *使用 [RFC2104] 定义的 HMAC-SHA1 签名算法对请求进行签名，其中 text 是 Signature Base String，key 是 Consumer Secret 和 Access Secret 的连接值，由 '&' 字符分隔（显示 '&'即使 Access Secret 为空，因为某些方法不需要访问令牌）。*
> 
> 计算出的摘要八位字节字符串，首先按照 [RFC2045] 进行 base64 编码，然后使用 [RFC3986] 百分比编码 (%xx) 机制进行转义，即 oauth_signature。

对于 base64 编码，我使用[了 QSStrings.h](https://github.com/mikeho/QSUtilities/blob/master/QSStrings.m)

我编码的步骤如下：

```
- (void)viewDidLoad
{
NSTimeInterval intervalFloat = [[NSDate date] timeIntervalSince1970];
int interval = (int) intervalFloat;
NSLog(@"time interval: %d",interval);

//for oauth_nonce random string
NSString *randomString = [self genRandString]; //see definition below
NSLog(@"%@",randomString);

NSString *requestString = [NSString stringWithFormat:@"POST&http%3A%2F%2Fplatform.fatsecret.com%2Frest%2Fserver.api&format%3Djson%26method%3Dprofile.create%26oauth_consumer_key%3Db753c99ccxxxxxx%26oauth_nonce%3D%@%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D%d%26oauth_version%3D1.0",randomString,interval];
NSString *secret = @"3959096c04xxxxxxxx&";

NSString *encodedStr = [self hmacsha1:requestString secret:secret]; //see definition below
NSLog(@"encodedStr: %@",encodedStr);

NSString *encodedString = [self urlEncodeValue:encodedStr]; //see definition below
NSLog(@"encodedString: %@",encodedString);

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://platform.fatsecret.com/rest/server.api?format=json&method=profile.create&oauth_consumer_key=b753c99ccxxxxxx&oauth_nonce=%@&oauth_signature=%@&oauth_signature_method=HMAC-SHA1&oauth_timestamp=%d&oauth_version=1.0",randomString, encodedString,interval]];

_request = [ASIFormDataRequest requestWithURL:url];
[_request setPostValue:@"json" forKey:@"format"];
[_request setPostValue:@"profile.create" forKey:@"method"];
[_request setPostValue:@"b753c99ccxxxxxx" forKey:@"oauth_consumer_key"];
[_request setPostValue:randomString forKey:@"oauth_nonce"];
[_request setPostValue:encodedString forKey:@"oauth_signature"];
[_request setPostValue:@"HMAC-SHA1" forKey:@"oauth_signature_method"];
[_request setPostValue:[NSNumber numberWithInt:interval] forKey:@"oauth_timestamp"];
[_request setPostValue:@"1.0" forKey:@"oauth_version"];

[_request setDelegate:self];
_request.timeOutSeconds = 60.0; 
[_request startAsynchronous];

} 
```

我在上面代码中使用的方法的定义如下：

```
- (NSString *)hmacsha1:(NSString *)data secret:(NSString *)key {

const char *cKey  = [key cStringUsingEncoding:NSASCIIStringEncoding];
const char *cData = [data cStringUsingEncoding:NSASCIIStringEncoding];

unsigned char cHMAC[CC_SHA1_DIGEST_LENGTH];

CCHmac(kCCHmacAlgSHA1, cKey, strlen(cKey), cData, strlen(cData), cHMAC);

NSData *HMAC = [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];

NSString *hash = [QSStrings encodeBase64WithData:HMAC];

NSLog(@"Hash: %@", hash);  

return hash;
}

NSString *letters = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

-(NSString *) genRandString {
//fixing length of 4 chars
NSMutableString *randomString = [NSMutableString stringWithCapacity: 4];

for (int i=0; i<4; i++) {
    [randomString appendFormat: @"%C", [letters characterAtIndex: arc4random() % [letters length]]];
}

return randomString;
}

- (NSString *)urlEncodeValue:(NSString *)str
{
NSMutableString * output = [NSMutableString string];
const unsigned char * source = (const unsigned char *)[str UTF8String];
int sourceLen = strlen((const char *)source);
for (int i = 0; i < sourceLen; ++i) {
    const unsigned char thisChar = source[i];
    if (thisChar == ' '){
        [output appendString:@"+"];
    } else if (thisChar == '.' || thisChar == '-' || thisChar == '_' || thisChar == '~' || 
               (thisChar >= 'a' && thisChar <= 'z') ||
               (thisChar >= 'A' && thisChar <= 'Z') ||
               (thisChar >= '0' && thisChar <= '9')) {
        [output appendFormat:@"%c", thisChar];
    } else {
        [output appendFormat:@"%%%02X", thisChar];
    }
}
return output;
} 
```

[您可以通过从此处](https://dl.dropbox.com/u/83882285/esha%20api%20testing.zip)下载我的项目来查看问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T22:59:49.267

Atlast 我自己找出了代码中的错误。近80%的问题已经解决。我在这个地方做错了：

```
NSString *requestString = [NSString stringWithFormat:@"POST&http%3A%2F%2Fplatform.fatsecret.com%2Frest%2Fserver.api&format%3Djson%26method%3Dprofile.create%26oauth_consumer_key%3Db753c99ccxxxxxx%26oauth_nonce%3D%@%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D%d%26oauth_version%3D1.0",randomString,interval]; 
```

在这里，我预编码了基本字符串。当我用某种格式初始化字符串时，它被`http%3A%2F%2F`认为是某种未知格式，用 0 替换它。所以我将整个代码替换为：

```
- (void)viewDidLoad
{
[super viewDidLoad];

//for timestamp
NSTimeInterval intervalFloat = [[NSDate date] timeIntervalSince1970];
int interval = (int) intervalFloat;
NSLog(@"time interval: %d",interval);

//for oauth_nonce random string
NSString *randomString = [self genRandString];
NSLog(@"%@",randomString);

NSString *actualString = [NSString stringWithFormat:@"format=json&method=profile.create&oauth_consumer_key=b753c99ccd8****&oauth_nonce=%@&oauth_signature_method=HMAC-SHA1&oauth_timestamp=%d&oauth_version=1.0",randomString,interval];

 NSString *firstEncode = [self urlEncodeValue:actualString];

NSLog(@"first encode: %@",firstEncode);

NSMutableString *requestString = [[NSMutableString alloc] initWithString:@"GET&http%3A%2F%2Fplatform.fatsecret.com%2Frest%2Fserver.api&"];
[requestString appendString:firstEncode];
NSLog(@"base str: %@",requestString);

NSString *secret = @"395********&";

NSString *encodedStr = [self hmacsha1:requestString secret:secret];
NSLog(@"encodedStr: %@",encodedStr);

NSString *encodedString = [self urlEncodeValue:encodedStr];
NSLog(@"encodedString: %@",encodedString);

NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://platform.fatsecret.com/rest/server.api?format=json&method=profile.create&oauth_consumer_key=b753c99cc*******&oauth_nonce=%@&oauth_signature=%@&oauth_signature_method=HMAC-SHA1&oauth_timestamp=%d&oauth_version=1.0",randomString, encodedString,interval]];
NSLog(@"url: %@",url);

_request = [ASIFormDataRequest requestWithURL:url];
[_request setPostValue:@"json" forKey:@"format"];
[_request setPostValue:@"profile.create" forKey:@"method"];
[_request setPostValue:@"b753c9*********" forKey:@"oauth_consumer_key"];
[_request setPostValue:randomString forKey:@"oauth_nonce"];
[_request setPostValue:encodedString forKey:@"oauth_signature"];
[_request setPostValue:@"HMAC-SHA1" forKey:@"oauth_signature_method"];
[_request setPostValue:[NSNumber numberWithInt:interval] forKey:@"oauth_timestamp"];
[_request setPostValue:@"1.0" forKey:@"oauth_version"];

[_request setRequestMethod:@"GET"];
[_request addRequestHeader:@"Content-Type" value:@"application/json"];
[_request setDelegate:self];
_request.timeOutSeconds = 60.0; 
[_request startAsynchronous];

} 
```

我希望这可以帮助别人。

# c++ - 如何使用延迟传播实现段树？

> ID：13218173
> 
> 赞同：5
> 
> 时间：2012-11-04T11:36:49.140
> 
> 标签：c++, algorithm, complexity-theory, segment-tree

我正在实现一个段树，以便能够快速回答数组 A 中的以下查询：

*   **查询 i, j：**范围 (i,j) 中所有元素的总和
*   **更新 i, j, k：**将 k 添加到 range(i,j) 中的所有元素

这是我的实现：

```
typedef long long intt;

const int max_num=100000,max_tree=4*max_num;
intt A[max_num],ST[max_tree];

void initialize(int node, int be, int en) {
  if(be==en) {
    ST[node]=ST[be];
  } else {
    initialize(2*node+1,be,(be+en)/2);
    initialize(2*node+2,(be+en)/2+1,en);

    ST[node]=ST[2*node+1]+ST[2*node+2];
  }
}

void upg(int node, int be, int en, int i, intt k) {
  if(be>i || en<i || be>en) return;
  if(be==en) {
    ST[node]+=k;
    return;
  }
  upg(2*node+1, be, (be+en)/2, i, k);
  upg(2*node+2, (be+en)/2+1, en, i, k);
  ST[node] = ST[2*node+1]+ST[2*node+2];
}

intt query(int node, int be, int en, int i, int j) {
  if(be>j || en<i) return -1;
  if(be>=i && en<=j) return ST[node];

  intt q1=query(2*node+1, be, (be+en)/2, i, j);
  intt q2=query(2*node+2, (be+en)/2+1, en, i, j);

  if(q1==-1) return q2;
  else if(q2==-1) return q1;
  else return q1+q2;
} 
```

查询函数非常快，其复杂度为 O(lg N)，其中 N 为 ji。更新函数在一般情况下也很快，但是当ji很大时，更新的复杂度是O(N lg N)，一点也不快。

我搜索了一下主题，发现如果我用惰性传播实现段树，查询和更新的复杂度都是 O(lg N)，渐近地比 O(N lg N) 快。

我还找到了另一个问题的链接，它有一个非常好的段树实现，它使用指针：[如何使用延迟传播实现段树？](https://stackoverflow.com/questions/11765838/how-to-implement-segment-trees-with-lazy-propagation). 所以，这是我的问题：有没有更简单的方法来实现惰性传播，不使用指针，但使用数组索引，并且没有`segment_tree`数据结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T02:15:15.077

这是我在玩弄这个数据结构和一些模板愚蠢的东西。

所有这些混乱的底部是访问两个平面数组，其中一个包含一个和树，另一个包含一个进位值树，以便以后向下传播。从概念上讲，它们形成一棵二叉树。

二叉树中节点的真实值是存储和树中的值，加上节点下的叶子数乘以从节点返回到根的所有进位树值的总和。

同时，树中每个节点的真值等于其下每个叶节点的真值。

我编写了一个函数来进行进位和求和，因为事实证明它们正在访问相同的节点。读有时会写。`increase`因此，您可以通过用零调用它来得到一个总和。

模板tomfoolery所做的就是计算节点在每棵树中的偏移量，以及左右子节点的位置。

虽然我确实使用了 a `struct`，但`struct`它是瞬态的——它只是一个包装器，其中包含一些预先计算的值围绕一个数组的偏移量。我确实存储了一个指向数组开头的指针，但是在这个程序中每个都`block_ptr`使用完全相同的值。`root`

对于调试，我有一些疯狂的 Assert() 和 Debug() 宏，以及递归 sum 函数调用的跟踪 nullary 函数（我用它来跟踪对其的调用总数）。再一次，为了避免全局状态而变得不必要的复杂。:)

```
#include <memory>
#include <iostream>

// note that you need more than 2^30 space to fit this
enum {max_tier = 30};

typedef long long intt;

#define Assert(x) (!(x)?(std::cout << "ASSERT FAILED: (" << #x << ")\n"):(void*)0)
#define DEBUG(x) 

template<size_t tier, size_t count=0>
struct block_ptr
{
  enum {array_size = 1+block_ptr<tier-1>::array_size * 2};
  enum {range_size = block_ptr<tier-1>::range_size * 2};
  intt* root;
  size_t offset;
  size_t logical_offset;
  explicit block_ptr( intt* start, size_t index, size_t logical_loc=0 ):root(start),offset(index), logical_offset(logical_loc) {}
  intt& operator()() const
  {
    return root[offset];
  }
  block_ptr<tier-1> left() const
  {
    return block_ptr<tier-1>(root, offset+1, logical_offset);
  }
  block_ptr<tier-1> right() const
  {
    return block_ptr<tier-1>(root, offset+1+block_ptr<tier-1>::array_size, logical_offset+block_ptr<tier-1>::range_size);
  }
  enum {is_leaf=false};
};

template<>
struct block_ptr<0>
{
  enum {array_size = 1};
  enum {range_size = 1};
  enum {is_leaf=true};
  intt* root;
  size_t offset;
  size_t logical_offset;

  explicit block_ptr( intt* start, size_t index, size_t logical_loc=0 ):root(start),offset(index), logical_offset(logical_loc)
  {}
  intt& operator()() const
  {
    return root[offset];
  }
  // exists only to make some of the below code easier:
  block_ptr<0> left() const { Assert(false); return *this; }
  block_ptr<0> right() const { Assert(false); return *this; }
};

template<size_t tier>
void propogate_carry( block_ptr<tier> values, block_ptr<tier> carry )
{
  if (carry() != 0)
  {
    values() += carry() * block_ptr<tier>::range_size;
    if (!block_ptr<tier>::is_leaf)
    {
      carry.left()() += carry();
      carry.right()() += carry();
    }
    carry() = 0;
  }
}

// sums the values from begin to end, but not including end!
// ie, the half-open interval [begin, end) in the tree
// if increase is non-zero, increases those values by that much
// before returning it
template<size_t tier, typename trace>
intt query_or_modify( block_ptr<tier> values, block_ptr<tier> carry, int begin, int end, int increase=0, trace const& tr = [](){} )
{
  tr();
  DEBUG(
  std::cout << begin << " " << end << " " << increase << "\n";
  if (increase)
  {
    std::cout << "Increasing " << end-begin << " elements by " << increase << " starting at " << begin+values.offset << "\n";
  }
  else
  {
    std::cout << "Totaling " << end-begin << " elements starting at " << begin+values.logical_offset << "\n";
  }
  )
  if (end <= begin)
    return 0;
  size_t mid = block_ptr<tier>::range_size / 2;
  DEBUG( std::cout << "[" << values.logical_offset << ";" << values.logical_offset+mid << ";" << values.logical_offset+block_ptr<tier>::range_size << "]\n"; )
  // exatch math first:
  bool bExact = (begin == 0 && end >= block_ptr<tier>::range_size);
  if (block_ptr<tier>::is_leaf)
  {
    Assert(bExact);
  }
  bExact = bExact || block_ptr<tier>::is_leaf; // leaves are always exact
  if (bExact)
  {
    carry()+=increase;
    intt retval =  (values()+carry()*block_ptr<tier>::range_size);
    DEBUG( std::cout << "Exact sum is " << retval << "\n"; )
    return retval;
  }
  // we don't have an exact match.  Apply the carry and pass it down to children:
  propogate_carry(values, carry);
  values() += increase * end-begin;
  // Now delegate to children:
  if (begin >= mid)
  {
    DEBUG( std::cout << "Right:"; )
    intt retval = query_or_modify( values.right(), carry.right(), begin-mid, end-mid, increase, tr );
    DEBUG( std::cout << "Right sum is " << retval << "\n"; )
    return retval;
  }
  else if (end <= mid)
  {
    DEBUG( std::cout << "Left:"; )
    intt retval = query_or_modify( values.left(), carry.left(), begin, end, increase, tr );
    DEBUG( std::cout << "Left sum is " << retval << "\n"; )
    return retval;
  }
  else
  {
    DEBUG( std::cout << "Left:"; )
    intt left = query_or_modify( values.left(), carry.left(), begin, mid, increase, tr );
    DEBUG( std::cout << "Right:"; )
    intt right = query_or_modify( values.right(), carry.right(), 0, end-mid, increase, tr );
    DEBUG( std::cout << "Right sum is " << left << " and left sum is " << right << "\n"; )
    return left+right;
  }
} 
```

这里有一些帮助类可以轻松创建给定大小的段树。但是请注意，您所需要的只是一个大小合适的数组，并且可以从指向元素 0 的指针构造一个 block_ptr，然后就可以开始了。

```
template<size_t tier>
struct segment_tree
{
  typedef block_ptr<tier> full_block_ptr;
  intt block[full_block_ptr::range_size];
  full_block_ptr root() { return full_block_ptr(&block[0],0); }
  void init()
  {
    std::fill_n( &block[0], size_t(full_block_ptr::range_size), 0 );
  }
};

template<size_t entries, size_t starting=0>
struct required_tier
{
  enum{ tier =
    block_ptr<starting>::array_size >= entries
    ?starting
    :required_tier<entries, starting+1>::tier
  };
  enum{ error =
    block_ptr<starting>::array_size >= entries
    ?false
    :required_tier<entries, starting+1>::error
  };
};

// max 2^30, to limit template generation.
template<size_t entries>
struct required_tier<entries, size_t(max_tier)>
{
  enum{ tier = 0 };
  enum{ error = true };
};

// really, these just exist to create an array of the correct size
typedef required_tier< 1000000 > how_big;

enum {tier = how_big::tier};

int main()
{
  segment_tree<tier> values;
  segment_tree<tier> increments;
  Assert(!how_big::error); // can be a static assert -- fails if the enum of max tier is too small for the number of entries you want
  values.init();
  increments.init();
  auto value_root = values.root();
  auto carry_root = increments.root();

  size_t count = 0;
  auto tracer = [&count](){count++;};
  intt zero = query_or_modify( value_root, carry_root, 0, 100000, 0, tracer );
  std::cout << "zero is " << zero << " in " << count << " steps\n";
  count = 0;
  Assert( zero == 0 );
  intt test2 = query_or_modify( value_root, carry_root, 0, 100, 10, tracer ); // increase everything from 0 to 100 by 10
  Assert(test2 == 1000);
  std::cout << "test2 is " << test2 << " in " << count << " steps \n";
  count = 0;
  intt test3 = query_or_modify( value_root, carry_root, 1, 1000, 0, tracer );
  Assert(test3 == 990);
  std::cout << "test3 is " << test3 << " in " << count << " steps\n";
  count = 0;
  intt test4 = query_or_modify( value_root, carry_root, 50, 5000, 87, tracer );
  Assert(test4 == 10*(100-50) + 87*(5000-50) );
  std::cout << "test4 is " << test4 << " in " << count << " steps\n";
  count = 0;
} 
```

虽然这不是您想要的答案，但它可能会使某人更容易编写它。写这个让我很开心。所以，希望对您有所帮助！

该代码在 Ideone.com 上使用 C++0x 编译器进行了测试和编译。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-04T15:33:41.307

延迟传播意味着仅在需要时更新。它是一种允许以渐近时间复杂度 O(logN) 执行范围更新的技术（这里的 N 是范围）。

假设您要更新范围 [0,15]，然后您更新节点 [0,15] 并在节点中设置一个标志，表示要更新它的子节点（使用标记值，以防标志不是用过的） 。

可能的压力测试案例：

0 1 100000

0 1 100000

0 1 100000 ...重复 Q 次（其中 Q = 99999），第 100000 个查询将是

1 1 100000

在这种情况下，大多数实现会坐下来翻转 100000 个硬币 99999 次，只是为了最终回答一个简单的查询并超时。

使用延迟传播，您只需将节点 [0,100000] 翻转 99999 次并设置/取消设置要更新其子节点的标志。当询问实际查询本身时，您开始遍历其子级并开始翻转它们，将标志向下推并取消设置父级标志。

哦，请确保您使用了正确的 I/O 例程（scanf 和 printf，而不是 cin 和 cout，如果它的 c++ 的话）希望这能让您了解延迟传播的含义。更多信息：[http ://www.spoj.pl/forum/viewtopic.php?f=27&t=8296](http://www.spoj.pl/forum/viewtopic.php?f=27&t=8296)

# javascript - CORS PUT：在 jQuery.ajax 中找不到

> ID：13218174
> 
> 赞同：0
> 
> 时间：2012-11-04T11:36:58.857
> 
> 标签：javascript, node.js, http, jquery, cors

我想将一些原始数据发送到我的子域：

```
$.ajax({
    url: "http://accounts.example.com:3000/me",
    type: "PUT",
    data: { wabo: "chabo" },
    dataType: "json",
    xhrFields: {
        withCredentials: true
    }
}); 
```

浏览器现在发送两个请求：

1.  accounts.example.com:3000/me 的选项以检查 CORS 标头是否有效
2.  PUT 发送数据

第一个失败，HTTP 404 Not Found。CORS 响应标头看起来有效：

```
HTTP/1.1 404 Not Found
X-Powered-By: Express
Access-Control-Allow-Origin: http://node.example.com:3000
Access-Control-Allow-Methods: HEAD, GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type, X-Requested-With, Origin, Accept
Access-Control-Allow-Credentials: true
Content-Type: text/plain
Set-Cookie: connect.sid=s%3Aru8njoU2ZAnoKL2W2w%2B0BHF7.%2Fe%2FQI5f6NKRWQvWlcYEkMG7HHSxxj0haFDBUID2g45A; Domain=.example.com; Path=/
Date: Sun, 04 Nov 2012 11:31:22 GMT
Connection: keep-alive
Transfer-Encoding: chunked 
```

在我的节点环境的 app.js 中，我有：

```
app.all('*', function(req, res, next) {
    res.header('Access-Control-Allow-Origin', 'http://node.example.com:3000');
    res.header('Access-Control-Allow-Methods', 'HEAD, GET, POST, PUT, DELETE, OPTIONS');
    res.header('Access-Control-Allow-Headers', 'Content-Type, X-Requested-With, Origin, Accept');
    res.header('Access-Control-Allow-Credentials', 'true');
    next();
}); 
```

和

```
var me = require('./me');
app.get('/me', loadUser, me.show);
app.put('/me', loadUser, me.update); 
```

从子域获取数据只是发送没有问题知道我忘记了什么吗？

问候，博多

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T11:51:33.577

试试这个：

```
app.all('*', function(req, res, next) {
    res.header('Access-Control-Allow-Origin', 'http://node.example.com:3000');
    res.header('Access-Control-Allow-Methods', 'HEAD, GET, POST, PUT, DELETE, OPTIONS');
    res.header('Access-Control-Allow-Headers', 'Content-Type, X-Requested-With, Origin, Accept');
    res.header('Access-Control-Allow-Credentials', 'true');

    if( req.method.toLowerCase() === "options" ) {
        res.send( 200 );
    }
    else {
        next();
    }
}); 
```

# symfony - 在 Symfony 2 中配置 Translation 组件以使用 gettext

> ID：13218175
> 
> 赞同：1
> 
> 时间：2012-11-04T11:37:00.003
> 
> 标签：symfony, internationalization, translation, gettext

Symfony 2 作为 2.1 版支持 gettext（MO 和 PO 文件）。

我有以下配置（`app/config/config.yml`）：

```
framework:
    translator:      { fallback: "en" }
    default_locale:  "fa_ir"
    ... 
```

如何配置以支持 mo 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:55:09.900

我发现没有任何配置我可以放在`messages.fa_ir.mo`bundle`Resources/translations`目录中，Symfony2 本身会找到它......

# php - Zend Gdata 中的 updateCell

> ID：13218177
> 
> 赞同：0
> 
> 时间：2012-11-04T11:37:02.353
> 
> 标签：php, zend-framework

我已加载 Zend Gdata 库并使用示例成功读取了我的 Google 电子表格中的行，但 updateCell 示例继续失败。

检查 updateCell 似乎不在库中。

有人遇到过这个问题吗？我正在使用 Zend Gdata-1.12.0

```
$row=1;
$col=1;
$inputValue=99;
$worksheetId="od6";
$googleDocs->updateCell ( 1, 1, 'test', $Key, $worksheetId);
$query = new Zend_Gdata_Spreadsheets_DocumentQuery();
$query->setSpreadsheetKey($key);
$feed = $spreadSheetService->getWorksheetFeed($query);
$updatedCell = updateCell($row,$col,$inputValue,$Key,$worksheetId); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T23:20:45.260

updateCell 方法是$spreadSheetService 的一部分，需要在调用updateCell 的前面加上$spreadSheetService->。

```
$updatedCell = $spreadSheetService->updateCell($row,$col,$inputValue,$Key,$worksheetId); 
```

# asp.net - 在单个文件中发布 asp.net webapplication

> ID：13218178
> 
> 赞同：2
> 
> 时间：2012-11-04T11:37:26.877
> 
> 标签：asp.net, publishing-site

我有一个用 C# 编写的 ASP.NET WebApplication（不是网站）。

我想为我的服务器中的 50 多个站点发布和部署此应用程序。我更愿意制作一些 dll 并将它们放在我服务器的 GAC 中，这样所有站点都将使用 GAC 中的 dll，然后我可以通过替换 GAC 中的一些 dll 来更新我的所有站点。

当我发布我的应用程序时，我得到了所有 .cs 文件的单个 dll，但所有 .aspx 文件仍然存在。我也想将 .aspx 文件合并到单个程序集。

有什么办法吗？或者我的情况有什么其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:53:42.477

当您转到发布设置时，如果您取消选中所有 cs 代码将合并到 app_web.dll 中，则可以选择“使站点可更新”。

您仍将拥有所有单独的 aspx 页面，因为这些页面定义了代码的入口点。据我所知，合并这些的唯一方法是将所有单独的 aspx 页面复制/粘贴到 default.aspx 中，然后将它们包装起来，`<asp:Panel ID="HomePage" Runat="Server" Visible="False">`然后根据 QueryString 设置在 Page_Load 中可见的右侧面板。您可以使用 URL 重写来获得不错的 URL。

根据您拥有的页面数量以及它们在代码中的大小，我自己可能不会这样做。但是，如果您发现只有 1 页的结果超过了其余部分，这在技术上是可行的。

*   下载 IIS 模块：[http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)
*   制定规则：[http ://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module)

也许另一种选择是将应用程序托管在子域上并在需要的地方进行 iframe。由于跨域问题，这可能是不可能的，具体取决于您的设置，但这将是一种“更清洁”的工作方式。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T05:46:15.280

在您的 Web 项目属性中：

打包/发布网络

检查 - 在发布之前预编译此应用程序

高级 - 将所有输出合并到一个程序集中

# android - 如何创建相同的文本消息限制的谷歌文档自定义对话框示例？

> ID：13218179
> 
> 赞同：0
> 
> 时间：2012-11-04T11:37:38.073
> 
> 标签：android, dialog, customdialog

我想创建与 Google 文档中完全相同的自定义对话框。

对话框是这样的：

![文档的文本限制对话框](../Images/7a65c894228051a5f8a4634ea38b4022.png)

我该怎么办？

我需要这个对话框，因为我希望用户可以选择一个整数来在我的应用程序中使用它。

请帮我。

我需要完全相同的对话框。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T13:57:14.983

它不是滚动列表。这是一个`NumberPicker`。你需要 API 11+ 来实现它。 [http://developer.android.com/reference/android/widget/NumberPicker.html](http://developer.android.com/reference/android/widget/NumberPicker.html)

# php - 哪一个更干净：在视图或模型上放置条件语句？

> ID：13218182
> 
> 赞同：0
> 
> 时间：2012-11-04T11:37:55.453
> 
> 标签：php, coding-style, yii

我是一名想要遵循 MVC 模式的 Yii 开发人员。

在我当前项目的一部分中，我必须检查一个特殊条件，并根据它的结果向用户显示一些东西的列表。我想确定用户是*admin*还是*guest*。

我这里有两种选择，一种是确定两种方法，一种用于*管理员*，另一种用于其他用户，并检查用户是否在视图中 是*管理员，如下所示：*

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id' => $tableName . "_grid",
    'dataProvider' => (Yii::app()->user->id == User::ADMIN) ? $model->search() : $model->getMyList(),
    'filter' => $model,
    'columns' => array(
.... 
```

或更改`getMineList`模型中的方法。由于这个事实，我不能把这个语句放在控制器中，哪个更好更干净？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:12:26.710

最好的方法是通过更改 getMineList 来执行模型中的逻辑，或者如 GBD 所述，将其实现到模型的搜索方法中

# android - 视口元标记适用于移动 safari，不适用于 android

> ID：13218184
> 
> 赞同：1
> 
> 时间：2012-11-04T11:38:12.687
> 
> 标签：android, ios, mobile, safari, viewport

我在我的 webapp 中使用以下行：

```
<meta name="viewport" content="width=720, maximum-scale=1, user-scalable=no" /> 
```

这在移动 safari 上运行得非常好 - 文档宽 720 像素，非常适合屏幕。但是，在 HTC One 上进行测试时，内容大约是屏幕宽度的 2.5 倍。

Android 应该支持 viewport 标签，那么为什么它会忽略它应该显示的像素宽度呢？

所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:54:22.187

答案取自[Android 文档](http://developer.android.com/guide/webapps/targeting.html)：

> 用户是否可以完全改变页面的比例（放大和缩小）。设置为 yes 以允许缩放，设置为 no 以禁止缩放。默认值为是。**如果将此设置为 no，则忽略最小比例和最大比例，因为无法进行缩放。**

在这种情况下，删除 user-scalable=no 看看会发生什么。这可能是您需要的修复程序。

# android - 无法加载联系人

> ID：13218191
> 
> 赞同：0
> 
> 时间：2012-11-04T11:39:21.027
> 
> 标签：android, load, contacts

我已经尝试了一些有助于从手机加载联系人的可用示例。它在模拟器上运行良好，但是当我在实时移动设备上尝试时它会崩溃。任何人都可以向我发送经过测试且运行良好的代码。然后我可以与我的代码进行比较。

一个失败的代码示例。

```
Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
if (phones.getCount() > 0)
{
    while (phones.moveToNext())
    {
            name=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

    }
phones.close(); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:47:38.783

首先，在清单文件中添加：

```
 <uses-permission android:name="android.permission.READ_CONTACTS"/> 
```

到您的 AndroidManifest.xml 文件，然后您可以像这样遍历您的手机联系人：

```
 Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null); 
      while (cursor.moveToNext()) { 
      String contactId = cursor.getString(cursor.getColumnIndex( 
       ContactsContract.Contacts._ID)); 
       String hasPhone =  cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER)); 
       if (Boolean.parseBoolean(hasPhone)) { 
     // You know it has a number so now query it like this
       Cursor phones = getContentResolver().query(    ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,   ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = "+ contactId, null, null); 
         while (phones.moveToNext()) { 
        String phoneNumber = phones.getString(phones.getColumnIndex( ContactsContract.CommonDataKinds.Phone.NUMBER));                 
         } 
      phones.close(); 
         }

        Cursor emails = getContentResolver().query(ContactsContract.CommonDataKinds.Email.CONTENT_URI, null,  ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = " + contactId, null, null); 
         while (emails.moveToNext()) { 
      // This would allow you get several email addresses 
       String emailAddress = emails.getString( 
        emails.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA)); 
        } 
        emails.close();
          }
       cursor.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:48:27.243

确定`phones`不是`null`。如果不`null`添加此行以将指针移动到第一个电话：

```
cursor.moveToFirst(); 
```

以下是代码片段作为示例，它应该如何工作：

```
Uri contactData = data.getData();
    //Cursor cursor =  managedQuery(contactData, null, null, null, null);
    Cursor cursor =  cr.query(contactData, null, null, null, null);
    cursor.moveToFirst();
    String name = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME));
    String id = cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts._ID));

    if (Integer.parseInt(cursor.getString(
            cursor.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
        Cursor pCur = cr.query(
                                ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                                null, 
                                ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                                new String[]{id},
                                null);

        while (pCur.moveToNext()) {
            String number = pCur.getString(pCur.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER));

            break; // ? we want only 1 value
        } 
        pCur.close();
    }

    cursor.close(); 
```

假设它会帮助你

# wcf - 参考更新后具有 CollectionDataContract 属性的部分类不部分

> ID：13218192
> 
> 赞同：1
> 
> 时间：2012-11-04T11:39:39.893
> 
> 标签：wcf, silverlight, class, partial

我有一个带有 wcf 服务的 Silverlight 应用程序。我像这样定义了一个部分类服务器端

```
[CollectionDataContract(Namespace = "http://test/datacontract")]
 public partial class ItemTypeObjectList : List<ItemTypeObject>, IWcfObject
 {
 } 
```

如果我在服务参考（客户端）上执行“更新服务参考”，则 Reference.cs 中不存在“部分”修饰符。在 Reference.cs 中它看起来像这样：

```
[System.Diagnostics.DebuggerStepThroughAttribute()]
 [System.CodeDom.Compiler.GeneratedCodeAttribute("System.Runtime.Serialization", "4.0.0.0")]
 [System.Runtime.Serialization.CollectionDataContractAttribute(Name="ItemTypeObjectList", Namespace="http://test/datacontract", ItemName="ItemTypeObject")]
 public class ItemTypeObjectList : System.Collections.Generic.List<Test.DataContract.ItemTypeObject> {
 } 
```

缺少“部分”-> 为什么？

非常感谢您的解决方案。

此致。伊万

# javascript - 单击以在 Javascript 中显示谷歌地图 - 不工作

> ID：13218194
> 
> 赞同：-1
> 
> 时间：2012-11-04T11:40:07.480
> 
> 标签：javascript, google-maps, google-maps-api-3

这是我工作的代码：http: [//jsfiddle.net/X9SkK/](http://jsfiddle.net/X9SkK/)

这是javascript：

```
function showmap() {
     var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
      }
}​ 
```

我想拥有它，以便当我单击按钮时地图会加载，但是由于某种原因它不起作用。我确信它很简单，但我无法确定它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:06:10.387

实际创建地图的代码被包装在一个名为 的函数中`initialize`，该函数未被调用。删除它，你会没事的：

```
function showmap() {
    var mapOptions = {
        zoom: 8,
        center: new google.maps.LatLng(-34.397, 150.644),
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
}​ 
```

此外，请务必`400px`为您的`#map_canvas`元素指定一个固定的高度（例如 ），否则它将在您的 jsFiddle 中不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:55:48.037

这是你可以做的：

```
<!-- Display Map -->
function showmap() {
     var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
      }
initialize();
} 
```

初始化（）；从未调用过负责创建地图的函数。您必须在 showmap 函数中调用它。

[演示](http://jsfiddle.net/refhat/pFNuJ/1/)

# javascript - MediaElement.js 和 Amazon S3

> ID：13218195
> 
> 赞同：3
> 
> 时间：2012-11-04T11:40:24.343
> 
> 标签：javascript, amazon-s3, html5-video, mediaelement.js

我在 Amazon S3 上的视频无法通过 MediaElement.js 播放。我得到一个带有“下载文件”链接的黑色视频播放器。这种行为在具有多种视频格式（MP4、MOV、OGG）的 Firefox 和 Chrome 上是一致的。

对于每个视频，mime 类型在 S3 上设置正确（即*不是* `application/octet-stream`）。当移动到我自己的服务器时，相同的视频可以通过 MediaElement.js 正常加载和播放。

`206 Partial Content`在 Firebug > Net 中，我看到从 S3 加载的每个视频返回的 GET 请求状态。我尝试将时间戳附加到 URL 以破坏缓存，但这不起作用。

我用谷歌搜索了很多，但空手而归。知道可能是什么问题吗？

更新：我使用 Video.js 得到了完全相同的结果，所以它显然不限于 MediaElement.js。

# python - 使用 LinearSVC 的模型大小

> ID：13218197
> 
> 赞同：2
> 
> 时间：2012-11-04T11:40:45.837
> 
> 标签：python, scikit-learn

我用 LinearSVC 训练了一个二元分类模型。我腌制了模型的持久性（`protocol=-1`），输出是一个巨大的文件（几 GB）。

我看不出有任何原因，应该只有几个浮点系数（大约为 ~10k = 字典大小），带有线性分类器。

我唯一的解释是，由于某种原因，模型在内部存储了支持向量。有什么办法可以删除它们以使模型大小再次合理？

# javascript - 类似于 c++ 中用于 javascript 的基于堆栈的对象

> ID：13218199
> 
> 赞同：5
> 
> 时间：2012-11-04T11:41:05.313
> 
> 标签：javascript, c++, scope, destructor, stack-based

在 javascript 中寻找一个结构，其工作方式类似于基于堆栈的析构函数或 c++ 中的本地对象，例如

```
#include <stdio.h>
class M {
public:
  int cnt;
  M()        {cnt=0;}
  void inc() {cnt++;}
  ~M()       {printf ("Count is %d\n", cnt);}
};
...
{M m;
 ...
 m.inc ();
 ...
 m.inc ();
} // here the destructor of m will printf "Count is 2"); 
```

所以这意味着我正在寻找一个在其范围结束时（当它“超出范围”时）执行操作的构造。它应该是健壮的，因为它不需要在作用域结束时进行特殊操作，就像 c++ 中的析构函数（用于包装 mutex-alloc 和释放）一样。

干杯，毫克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:48:11.373

如果作用域内的代码保证是同步的，你可以创建一个函数，之后调用析构函数。但是，它可能不像 C++ 那样灵活，语法也可能不像 C++ 那样简洁：

```
var M = function() {
  console.log("created");
  this.c = 0;
};

M.prototype.inc = function() {
  console.log("inc");
  this.c++;
};

M.prototype.destruct = function() {
  console.log("destructed", this.c);
};

var enterScope = function(item, func) {
  func(item);
  item.destruct();
}; 
```

您可以按如下方式使用它：

```
enterScope(new M, function(m) {
  m.inc();
  m.inc();
}); 
```

这将被记录：

```
created
inc
inc
destructed 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T11:48:35.757

遗憾的是，您将无法找到您正在寻找的内容，因为语言设计不会强制 ECMAScript 引擎（即 javascipt 解释器）的实现来满足您的要求。

当没有更多对超出范围的对象的引用时，*垃圾收集器*将（实际上它更多是“可能”）启动，但是您（作为开发人员）没有任何标准化的方式可以利用这。

有一些技巧（例如将对象的使用包装在一个获取对象本身的函数和一个“使用”回调函数中）以提供类似于`dtor`C++ 中的 's 的功能，但并非不采取任何“额外操作”。

# iphone - _NSZombie_GraphicPath 类在两者中都实现了？？和 ？？。将使用两者之一。哪个是未定义的

> ID：13218200
> 
> 赞同：1
> 
> 时间：2012-11-04T11:41:41.690
> 
> 标签：iphone, ios, cocoa-touch

我得到以下运行时输出：

“_NSZombie_GraphicPath 类在 ?? 和 ?? 中都实现了。将使用两者之一。哪个未定义。”

不知道如何解决这个问题。还有几个其他问题涵盖了这一点，但似乎涉及这些单元测试。以前有没有人遇到过这个问题，如果是这样，它是如何解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:48:23.493

这意味着两个图像和/或静态库导出类 GraphicPath。例如，一个可能是您的应用程序，另一个可能是单元测试。您链接到的库也可以导出该类。无论如何，您应该检查项目的编译阶段，*包括所有依赖*项，并确保 GraphicPath.m 只编译一次，然后删除所有其他阶段。另请注意，可以为同一目标编译两次文件。我希望您在禁用僵尸运行时也会看到日志警告。您还可以使用`nm`转储图像的符号名称。

# android - Android：如何制作设备主题

> ID：13218201
> 
> 赞同：2
> 
> 时间：2012-11-04T11:42:06.293
> 
> 标签：android, themes

也许我不知道如何搜索 - 我发现的所有内容都是关于更改应用程序主题。我想知道如何为 android 设备本身开发一个完整的主题？在市场上，您会发现许多主题 - 我如何也可以构建一个？

我不想使用第 3 方许可证（ThemeMaker 等）......谁有我的教程？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:01:55.193

您应该阅读 Android 开发者网站 -**样式和主题** [http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

样式是指定视图或窗口的外观和格式的属性集合。样式可以指定诸如高度、填充、字体颜色、字体大小、背景颜色等属性。样式在与指定布局的 XML 不同的 XML 资源中定义。

Android 中的样式与网页设计中的层叠样式表有着相似的理念——它们允许您将设计与内容分开。

**将主题应用于 Activity 或应用程序**

要为应用程序的所有活动设置主题，请打开`AndroidManifest.xml`文件并编辑`<application>`标签以包含带有样式名称的 android:theme 属性。例如：

```
<application android:theme="@style/CustomTheme"> 
```

如果您喜欢某个主题，但想对其进行调整，只需将该主题添加为自定义主题的父级即可。例如，您可以像这样修改传统的灯光主题以使用您自己的颜色：

```
<color name="custom_theme_color">#b0b0ff</color>
<style name="CustomTheme" parent="android:Theme.Light">
    <item name="android:windowBackground">@color/custom_theme_color</item>
    <item name="android:colorBackground">@color/custom_theme_color</item>
</style> 
```

# javascript - Windows 8 Metro 风格 javascript/html5 应用程序中的免费位图内存

> ID：13218204
> 
> 赞同：0
> 
> 时间：2012-11-04T11:42:42.710
> 
> 标签：javascript, html, windows-8, microsoft-metro

我正在为已经在 iOS 和 Android 中编写的客户端编写应用程序。在开始之前，我想就我预计会遇到的一些问题获得一些指示。我不确定 Surface 平板电脑的内存规格（目前该应用程序的主要目标），但我编写的应用程序加载了很多外部图形。如果我将其中一张图片放在 img/ 标签中，当 img/ 从舞台上移除（加载新的 PageControl）时，内存是如何处理的。有什么明确的我需要做的还是自动处理的（我在Android中没有很好的自动内存管理经验......）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:57:58.580

本文详细介绍了 Windows 8 应用程序中的内存管理：

[http://msdn.microsoft.com/en-us/magazine/jj651575.aspx](http://msdn.microsoft.com/en-us/magazine/jj651575.aspx)

# java - 从 Java 运行 TypeScript 编译器

> ID：13218205
> 
> 赞同：4
> 
> 时间：2012-11-04T11:43:27.900
> 
> 标签：java, javascript, node.js, typescript, tsc

我正在尝试从我的 Java 应用程序运行 TypeScript 编译器。首先，我想弄清楚是否可以在没有 Node.js 的情况下从命令行运行编译器：

```
$ jsc tsc.js 
```

但是这样我就不会得到任何错误，也不会得到帮助。

```
$ jsc tsc.js myscript.ts 
```

会让我无处可去。

直接从 java 运行 js 代码很容易（我希望以这种方式运行编译器），但是是否可以在没有 node.js 的情况下运行 TypeScript 编译器？

编辑：

我用犀牛证实了同样的行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T05:06:25.587

我有一个项目[Typescript4j](https://github.com/martypitt/typescript4j)正是这样做的。

它运行包装在 Rhino 中的 Typescript 编译器。

我在[Bakehouse](https://github.com/TheMangoFactory/bakehouse)和一个重要的 Typescript 应用程序中成功使用了它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T23:24:28.003

查看源代码，[tsc](https://typescript.codeplex.com/SourceControl/changeset/view/6dcef41a74f8#bin%2ftsc)命令调用一个 JS 脚本[tsc.js](https://typescript.codeplex.com/SourceControl/changeset/view/6dcef41a74f8#bin%2ftsc.js)，它有 2 个后端：Node.js 和 Windows Scripting Host。如果任何其他 JavaScript 服务器支持读取和写入文件系统（如带有 RingoJS 的 Rhino），它应该能够运行 TypeScript 编译器*tsc.js*。

此外，还有一个 TypeScript 编译器的分支，声称可以直接[在 Rhino 上运行](http://typescript.codeplex.com/SourceControl/network/forks/nobuoka/TypeScript/BrowseLatest?branch=tmp%2frun_on_rhino)。因此，您可以直接从 Java 调用 Rhino，而无需安装 node.js。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-25T04:33:43.967

您想要做的是`jsc node_modules/typescript/lib/tsc.js file1.ts`，但不幸的是，这不适用于与 node.js 不同的引擎。

什么会起作用（或至少在浏览器中起作用）是使用 TypeScript Compiler API，而不是尝试使用 CLI（你必须编程）。在浏览器中，您可以通过加载文件来执行此操作，然后您可以通过全局`node_modules/typescript/typescript.js`访问编译器 API（[https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API](https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API)`ts` ） 。在这里，您有一个如何使用编译器 API 将 ts 字符串转换为 js 的示例：[https ://typescript-api-playground.glitch.me/#example=Transpiling-a-single-file](https://typescript-api-playground.glitch.me/#example=Transpiling-a-single-file)

祝你好运

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-04T12:08:42.707

TypeScript 编译器是在 TypeScript 中实现的，可以在任何 JavaScript 主机中使用。

您可能需要指定 tsc.js 的完整路径

# linux - .htaccess 先检查 cookie，然后检查有效用户

> ID：13218206
> 
> 赞同：2
> 
> 时间：2012-11-04T11:44:28.887
> 
> 标签：linux, apache, .htaccess

我的 apache 服务器上有一个目录的 .htaccess 文件。目前这使用 mod_auth_mysql 进行用户验证以查看目录列表。但是，如果用户已经登录到我的应用程序（因此存在 cookie），我想跳过有效用户要求，从而消除多次登录。

**当前的 .htaccess**

```
AuthName "Please don't hack the server, cheers"
AuthBasicAuthoritative Off
AuthUserFile /dev/null
AuthMySQL On
AuthType Basic
Auth_MYSQL on
Auth_MySQL_Host localhost
Auth_MySQL_User username
Auth_MySQL_Password password
AuthMySQL_DB auth
AuthMySQL_Password_Table users
Auth_MySQL_Username_Field username
Auth_MySQL_Password_Field password
Auth_MySQL_Empty_Passwords Off
Auth_MySQL_Encryption_Types Plaintext
Auth_MySQL_Authoritative On
require user james 
```

**饼干检查**

```
RewriteEngine On
RewriteCond %{HTTP_COOKIE} !^cookiename=ok$
RewriteRule .* / [NC,L] 
```

如何正确组合这两者，首先检查 cookie 并在找到时允许通过，然后在未找到 cookie 时检查有效用户？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T17:06:13.593

您需要在这里做 2 件事，您可以使用该[`SetEnvIf`指令](http://httpd.apache.org/docs/2.2/mod/mod_setenvif.html#setenvif)创建一个环境变量并对照`Cookie`. 然后您需要告诉 mod_auth_mysql 允许*任何*一组要求满足身份验证。

首先是环境变量：

```
SetEnvIf Cookie cookiename=ok norequire_auth=yes 
```

这是一个与**Cookie:** HTTP 标头`cookiename=ok`匹配的正则表达式。然后：**`Satisfy`**

 **```
Order Deny,Allow
Satisfy Any

# your auth stuff:
AuthName "Please don't hack the server, cheers"
AuthBasicAuthoritative Off
AuthUserFile /dev/null
AuthMySQL On
AuthType Basic
Auth_MYSQL on
Auth_MySQL_Host localhost
Auth_MySQL_User username
Auth_MySQL_Password password
AuthMySQL_DB auth
AuthMySQL_Password_Table users
Auth_MySQL_Username_Field username
Auth_MySQL_Password_Field password
Auth_MySQL_Empty_Passwords Off
Auth_MySQL_Encryption_Types Plaintext
Auth_MySQL_Authoritative On
require user james

Allow from env=norequire_auth 
```

所以`Satisfy Any`我们允许的手段如果满足`require user james`或**满足**`Allow from env=norequire_auth`。如果没有满足，则需要满足两条线才能允许访问。

请注意，cookie 很容易被伪造，并且此系统不是保护您的页面的好方法。您至少需要检查 cookie 的值以获取会话 ID 或其他内容。**

# ios - 集合视图中单元格中的 UIButton 未在事件内部接收修饰

> ID：13218208
> 
> 赞同：25
> 
> 时间：2012-11-04T11:44:36.897
> 
> 标签：ios, uicollectionview, uiresponder

以下代码表达了我的问题：（它是自包含的，您可以使用空模板创建一个 Xcode 项目，替换 main.m 文件的内容，删除 AppDelegate.h/.m 文件并构建它）

```
//
//  main.m
//  CollectionViewProblem
//

#import <UIKit/UIKit.h>

@interface Cell : UICollectionViewCell

@property (nonatomic, strong) UIButton *button;
@property (nonatomic, strong) UILabel *label;

@end

@implementation Cell
 - (id)initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame])
    {
        self.label = [[UILabel alloc] initWithFrame:self.bounds];
        self.label.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
        self.label.backgroundColor = [UIColor greenColor];
        self.label.textAlignment = NSTextAlignmentCenter;

        self.button = [UIButton buttonWithType:UIButtonTypeInfoLight]; 
        self.button.frame = CGRectMake(-frame.size.width/4, -frame.size.width/4, frame.size.width/2, frame.size.width/2);
        self.button.backgroundColor = [UIColor redColor];
        [self.button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
        [self.contentView addSubview:self.label];
        [self.contentView addSubview:self.button];
    }
    return self;
}

// Overriding this because the button's rect is partially outside the parent-view's bounds:
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    if ([super pointInside:point withEvent:event])
    {
        NSLog(@"inside cell");
        return YES;
    }
    if ([self.button
         pointInside:[self convertPoint:point
                                 toView:self.button] withEvent:nil])
    {
        NSLog(@"inside button");
        return YES;
    }

    return NO;
}

- (void)buttonClicked:(UIButton *)sender
{
    NSLog(@"button clicked!");
}
@end

@interface ViewController : UICollectionViewController

@end

@implementation ViewController

// (1a) viewdidLoad:

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.collectionView registerClass:[Cell class] forCellWithReuseIdentifier:@"ID"];
}

// collection view data source methods ////////////////////////////////////

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return 100;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    Cell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"ID" forIndexPath:indexPath];
    cell.label.text = [NSString stringWithFormat:@"%d", indexPath.row];
    return cell;
}
///////////////////////////////////////////////////////////////////////////

// collection view delegate methods ////////////////////////////////////////

- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"cell #%d was selected", indexPath.row);
}
////////////////////////////////////////////////////////////////////////////
@end

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    UICollectionViewFlowLayout *layout = [[UICollectionViewFlowLayout alloc] init];
    ViewController *vc = [[ViewController alloc] initWithCollectionViewLayout:layout];

    layout.itemSize = CGSizeMake(128, 128);
    layout.minimumInteritemSpacing = 64;
    layout.minimumLineSpacing = 64;
    layout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    layout.sectionInset = UIEdgeInsetsMake(32, 32, 32, 32);

    self.window.rootViewController = vc;

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES;
}

@end

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

基本上我正在使用集合视图创建一个 Springboard 类型的 UI。我的**UICollectionViewCell**子类（**Cell**）有一个按钮，该按钮部分位于单元格的*contentView*（即其超级视图）边界之外。

问题是单击*contentView*边界之外的按钮的任何部分（基本上是按钮的 3/4）不会调用按钮操作。只有单击与*contentView*重叠的按钮部分时，才会调用按钮的操作方法。

我什至重写了**Cell**`-pointInside:withEvent:`中的方法，以便确认按钮中的触摸。但这对按钮点击问题没有帮助。

 **我猜这可能与**collectionView**如何处理触摸有关，但我不知道是什么。我知道**UICollectionView**是一个**UIScrollView**子类，我实际上已经测试过覆盖`-pointInside:withEvent:`包含部分重叠按钮的视图（将子视图制作为滚动视图）可以解决按钮单击问题，但它在这里不起作用。

有什么帮助吗？

** 补充：作为记录，我目前对该问题的解决方案包括在*contentView*中插入一个较小的子视图，从而使单元格具有其外观。删除按钮被添加到*contentView*中，使其矩形实际上位于 contentView 的范围内，但仅部分重叠单元格的可见部分（即插入子视图）。所以我得到了我想要的效果，并且按钮工作正常。但是我仍然对上面原始实现的问题感到好奇。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-07-08T08:06:53.680

问题似乎出在 hitTest/pointInside 上。我猜如果触摸是在单元格外部的按钮部分上，则单元格会从 pointInside 返回 NO ，因此该按钮未经过命中测试。要解决此问题，您必须在 UICollectionViewCell 子类上覆盖 pointInside 以将按钮考虑在内。如果触摸在按钮内部，您还需要覆盖 hitTest 以返回按钮。下面是示例实现，假设您的按钮位于 UICollectionViewCell 子类中名为 deleteButton 的属性中。

```
-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    UIView *view = [self.deleteButton hitTest:[self.deleteButton convertPoint:point fromView:self] withEvent:event];
    if (view == nil) {
        view = [super hitTest:point withEvent:event];
    }
    return view;
}

-(BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event {
    if ([super pointInside:point withEvent:event]) {
        return YES;
    }
    //Check to see if it is within the delete button
    return !self.deleteButton.hidden && [self.deleteButton pointInside:[self.deleteButton convertPoint:point fromView:self] withEvent:event];
} 
```

请注意，由于 hitTest 和 pointInside 期望该点位于接收器的坐标空间中，因此您必须记住在调用按钮上的这些方法之前转换该点。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-03T19:17:44.363

在 Interface Builder 中，您是否已将对象设置为 UICollectionViewCell？因为有一次我错误地设置了一个 UIView 并在为它分配了正确的 UICollectionViewCell 类之后......但是做这些事情（按钮，标签，ecc。）没有添加到 contentView 所以他们不会像他们那样响应......

所以，在 IB 中提醒在绘制界面时使用 UICollectionViewCell 对象 :)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-27T09:16:43.010

斯威夫特版本：

```
override func hitTest(point: CGPoint, withEvent event: UIEvent?) -> UIView? {

    //From higher z- order to lower except base view;

    for (var i = subviews.count-2; i >= 0 ; i--){
        let newPoint = subviews[i].convertPoint(point, fromView: self)
        let view = subviews[i].hitTest(newPoint, withEvent: event)
        if view != nil{
            return view
        }
    }

    return super.hitTest(point, withEvent: event)

} 
```

就是这样......对于所有子视图

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-04T20:52:40.210

我成功地接收到在子类 UICollectionViewCell.m 文件中创建的按钮的触摸；

```
- (id)initWithCoder:(NSCoder *)aDecoder
    {
    self = [super initWithCoder:aDecoder];
    if (self)
    {

    // Create button

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0, 0, 100, 100); // position in the parent view and set the size of the button
    [button setTitle:@"Title" forState:UIControlStateNormal];
    [button setImage:[UIImage imageNamed:@"animage.png"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(button:) forControlEvents:UIControlEventTouchUpInside];

    // add to contentView
    [self.contentView addSubview:button];
    }
    return self;
} 
```

在意识到 Storyboard 中添加的按钮不起作用后，我在代码中添加了按钮，不确定这是否在最新的 Xcode 中得到修复。

希望有帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-04-16T12:49:46.153

我看到原始答案的两个快速转换并不完全是快速转换。所以我只想给出`Swift 4`原始答案的转换，以便每个想要使用它的人都可以使用它。您只需将代码粘贴到您的`subclassed` `UICollectionViewCell`. 只需确保`closeButton`使用自己的按钮进行更改。

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
    var view = closeButton.hitTest(closeButton.convert(point, from: self), with: event)
    if view == nil {
        view = super.hitTest(point, with: event)
    }

    return view
}

override func point(inside point: CGPoint, with event: UIEvent?) -> Bool {
    if super.point(inside: point, with: event) {
        return true
    }

    return !closeButton.isHidden && closeButton.point(inside: closeButton.convert(point, from: self), with: event)
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-25T16:45:17.950

按照接受的答案要求，我们应该做一个`hitTest`以便在单元格内接收触摸。这是命中测试的 Swift 4 代码：

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {
  for i in (0..<subviews.count-1).reversed() {
    let newPoint = subviews[i].convert(point, from: self)
    if let view = subviews[i].hitTest(newPoint, with: event) {
        return view
    }
  }
  return super.hitTest(point, with: event)
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-28T09:20:18.013

我在尝试将删除按钮放置在 uicollectionview 单元格的边界之外时遇到了类似的问题，并且它没有接缝以响应点击事件。

我解决它的方法是在集合上放置一个 UITapGestureRecognizer 并且当点击发生时执行以下代码

```
//this works also on taps outside the cell bouns, im guessing by getting the closest cell to the point of click.

NSIndexPath* tappedCellPath = [self.collectionView indexPathForItemAtPoint:[tapRecognizer locationInView:self.collectionView]]; 

if(tappedCellPath) {
    UICollectionViewCell *tappedCell = [self.collectionView cellForItemAtIndexPath:tappedCellPath];
    CGPoint tapInCellPoint = [tapRecognizer locationInView:tappedCell];
    //if the tap was outside of the cell bounds then its in negative values and it means the delete button was tapped
    if (tapInCellPoint.x < 0) [self deleteCell:tappedCell]; 
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-15T07:23:05.607

在我看来，Honus 在这里给出了最好的答案。事实上，唯一一个对我有用的，所以我一直在回答其他类似的问题并以这种方式发送它们：

我花了几个小时在网上搜索我的 UIButton 在 UICollectionView 中不起作用的解决方案。让我发疯，直到我终于找到适合我的解决方案。而且我相信这也是正确的方法：破解命中测试。这是一个比修复 UICollectionView Button 问题更深入（双关语）的解决方案，因为它可以帮助您将点击事件发送到隐藏在阻止您的事件通过的其他视图下的任何按钮：

[集合视图中单元格中的 UIButton 未在事件内部接收修饰](https://stackoverflow.com/questions/13218208/uibutton-in-cell-in-collection-view-not-receiving-touch-up-inside-event)

由于那个 SO 答案是在 Objective C 中，我按照那里的线索找到了一个快速的解决方案：

[http://khanlou.com/2018/09/hacking-hit-tests/](http://khanlou.com/2018/09/hacking-hit-tests/)

--

当我禁用单元格上的用户交互或我尝试的任何其他各种答案时，没有任何效果。

我在上面发布的解决方案的美妙之处在于，您可以保留 addTarget 和选择器函数的习惯，因为它们很可能永远不会成为问题。您只需要重写一个函数来帮助触摸事件到达目的地。

为什么解决方案有效：

在最初的几个小时里，我认为我的 addTarget 调用没有正确注册手势。事实证明，目标注册良好。触摸事件根本没有到达我的按钮。

现实似乎来自我读过的任何数量的 SO 帖子和文章，UICollectionView 单元旨在容纳一个动作，而不是出于各种原因的多个动作。所以你*应该*只使用内置的选择动作。考虑到这一点，我相信绕过这个限制的*正确*方法是不要破解 UICollectionView 来禁用滚动或用户交互的某些方面。UICollectionView 只是在做它的工作。*正确的*方法是破解命中测试以在点击到达 UICollectionView 之前拦截点击并找出他们正在点击的项目。然后你只需向他们正在点击的按钮发送一个触摸事件，然后让你的正常工作完成工作。

* * *

我的最终解决方案（来自 khanlou.com 文章）是将 addTarget 声明和选择器函数放在我喜欢的任何位置（在单元格类或 cellForItemAt 覆盖中），并在覆盖 hitTest 函数的单元格类中。

在我的单元班中，我有：

```
@objc func didTapMyButton(sender:UIButton!) {
    print("Tapped it!")
} 
```

和

```
override func hitTest(_ point: CGPoint, with event: UIEvent?) -> UIView? {

    guard isUserInteractionEnabled else { return nil }

    guard !isHidden else { return nil }

    guard alpha >= 0.01 else { return nil }

    guard self.point(inside: point, with: event) else { return nil }

    // add one of these blocks for each button in our collection view cell we want to actually work
    if self.myButton.point(inside: convert(point, to: myButton), with: event) {
        return self.myButton
    }

    return super.hitTest(point, with: event)
} 
```

在我的单元格类初始化中，我有：

```
self.myButton.addTarget(self, action: #selector(didTapMyButton), for: .touchUpInside) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-29T16:33:58.320

我从这里[py4u.net找到了这个](https://www.py4u.net/discuss/1088386)

尝试了最底层的解决方案。（据我所知，所有的东西都是从这个页面收集的）

在我的情况下，该解决方案也有效。然后我只是检查了`User Interaction Enabled`复选标记是否已在 xib 的 Collection 视图中选中，在它的`contentView`. 你猜怎么着。contentView 的 UserInteraction 被禁用。

启用它解决了按钮的 touchUpInside 事件的问题，并且不需要覆盖`hitTest`方法。**

# android - 启动广播接收器

> ID：13218212
> 
> 赞同：1
> 
> 时间：2012-11-04T11:45:04.500
> 
> 标签：android

在这里，我试图阅读消息并为它敬酒我已经看到了各种示例，其中有一个单独的类扩展`BroadcastReceiver`但他们没有提到如何启动这个类（我们使用 startactivity() 还是其他东西）。我已经发布了我通过 O'Reilly 食谱中的链接下载的代码。我试过从 ddms 发短信，但它没有显示消息。感谢任何帮助，因为这是我第一次使用 BroadcastReceiver。

**邀请短信reciever.java**

```
package com.SMS;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.sax.StartElementListener;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.Toast;

public class invitationSMSreciever extends BroadcastReceiver {

    final String TAG = "BombDefusalApp";

    @Override
    public void onReceive(Context context, Intent intent) {
        Bundle bundle = intent.getExtras();
        SmsMessage[] msgs = null;
        String message = "";
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];
            for (int i = 0; i < msgs.length; i++) {
                msgs[i] = SmsMessage.createFromPdu((byte[]) pdus[i]);
                message = msgs[i].getMessageBody();
                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();
                if (msgs[i].getMessageBody().equalsIgnoreCase("Invite")) {
                    // Intent myIntent = new Intent(MainMenu.this,
                    // com.bombdefusal.ReceivedSMSActivity.class);
                    Intent myIntent = new Intent();
                    myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    myIntent.setAction("com.example.helloandroid.INVITE");
                    context.startActivity(myIntent);
                }
            }
        }
    }
} 
```

**主菜单**

```
package com.SMS;

import com.SMS.R;

import android.app.Activity;
import android.os.Bundle;

public class MainMenu extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

**收到短信活动**

```
package com.SMS;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.KeyEvent;

import com.SMS.R;

public class ReceivedSMSActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        startService(new Intent ("com.android.PLAY"));
        setContentView(R.layout.invite);
    }
    public boolean onKeyDown(int keyCode, KeyEvent service) {
        stopService(new Intent("com.bombdefusal.START_AUDIO_SERVICE"));
        finish();
        return true;
    }
} 
```

**显现**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.SMS" android:versionCode="1" android:versionName="1.0">
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MainMenu" android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.SMS" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.SMS.ReceivedSMSActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="com.example.helloandroid.INVITE"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>
        </activity>

        <receiver android:name="com.SMS.invitationSMSreciever"
                  android:enabled="true">
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED"/>
                <category android:name="android.intent.category.DEFAULT"/>
            </intent-filter>          
        </receiver>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:00:50.353

您有两种选择：

1.  在 AndroidManifest 文件中静态注册广播接收器。因此，它将被自动调用。
2.  `registerReceiver()`使用方法在代码中动态注册广播接收器。在这种情况下，此方法应与`unregisterReceiver()`您取消注册接收器的位置配对。

通常，如果广播接收器被实现为一个单独的类，那么它通常会在 AndroidManifest 文件中静态注册。我想在你的情况下，你应该只在你的文件中添加以下几行：

```
<receiver android:name=".invitationSMSreciever" android:exported="true" > 
  <intent-filter android:priority="1000"> 
    <action android:name="android.provider.Telephony.SMS_RECEIVED" />
  </intent-filter> 
</receiver> 
```

# python - Django 教程设置正确的路径变量

> ID：13218213
> 
> 赞同：0
> 
> 时间：2012-11-04T11:45:12.793
> 
> 标签：python, django, windows

我在使用教程时遇到问题，我被困在这里`django-admin.py startproject mysite` 在 shell 中出现错误`django-admin.py Command no found`

我相信我已经设置了正确的路径变量？这是我在 shell 中所做的：

首先我输入 `$ python`

从那里启动python，我得到了，`>>>` 所以我输入了`import django`，然后`django.get_version()`一切正常，我看到了`1.4.2`

接下来，我退出了 python 并尝试从教程中设置测试站点。

```
$ django-admin.py startproject mysite 
```

我犯了同样的错误。

```
django-admin.py Command no found 
```

我哪里错了？我还需要为 django 设置路径吗？

感谢您的帮助，我试图尽可能地进行描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:54:14.773

这听起来像你没有`django-admin.py`在你的路径。

[Django 安装陷阱](https://code.djangoproject.com/wiki/InstallationPitfalls)页面概述了解决该问题的指南：

> ### 症状
> 
> ```
> -bash: django-admin.py: command not found 
> ```
> 
> ### 可能的原因
> 
> 您的命令搜索 PATH 中没有 django-admin.py。
> 
> ### 解决方案
> 
> 将 /bin/django-admin.py 链接到 PATH 上的任何位置。
> 
> 请注意，大多数类 unix 系统上的 Python`/usr/local/lib/python2.X/site-packages/`用于 3rd-party 包：
> 
> ```
> sudo ln -s /usr/local/lib/python2.4/site-packages/django/bin/django-admin.py /usr/local/bin/django-admin.py 
> ```
> 
> 但是，Python 2.6`/usr/local/lib/python2.6/dist-packages/`用于 3rd-party 包：
> 
> ```
> sudo ln -s /usr/local/lib/python2.6/dist-packages/django/bin/django-admin.py /usr/local/bin/django-admin.py 
> ```
> 
> 在此之后，您可能会收到“权限被拒绝”消息。要将 django-admin.py 文件的权限更改为可执行，请执行以下操作：
> 
> ```
> sudo chmod +x /usr/local/bin/django-admin.py 
> ```
> 
> 如果您已安装 Python 2.6 并将其设为默认版本，则可能必须改用 django-admin-2.6.py startproject mysite。

`/usr/local/bin`请注意，如果不在您的路径中，这可能还不够。您可以在终端中轻松检查您的路径：

```
$ echo $PATH
/home/sebbe/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games 
```

如果`/usr/local/bin`不在您的路径中，您也需要添加它。有关如何执行此操作的说明，请参阅[将文件夹添加到 PATH 。](https://superuser.com/q/251038/5407)

# java - Java 中的 AJAX GET 请求

> ID：13218218
> 
> 赞同：0
> 
> 时间：2012-11-04T11:45:46.560
> 
> 标签：java, ajax, url, ajax-request

我正在尝试使用 java 在某些站点上发出 GET AJAX 请求。

我的代码如下：

```
 String cookie = getRandomString(16); //Getting a random 32-symbol string

    String url = "https://e-kassa.org/core/ajax/stations_search.php?"
            + "q=%D0%BE&limit=10&timestamp=1352028872503";
    HttpURLConnection conn = (HttpURLConnection) new URL(url).openConnection();

    conn.setRequestProperty("Cookie", "PHPSESSID=" + cookie);
    InputStream is = conn.getInputStream();

    int buffer;
    while((buffer = is.read()) != -1)
        System.out.print(buffer);

    is.close();
    conn.disconnect(); 
```

但问题是 InputStream 没有什么可以下载的。但如果我使用浏览器做同样的事情，我会得到一个响应，由以下格式的文本行组成：

> CITY_NAME|SOME_DIGITS

那么，谁能告诉我，我怎样才能以适当的方式提出这样的请求？

UPD：没有 cookie 我有相同的行为（在浏览器中一切都很好，但在 Java 中不是）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:55:23.647

你能试试：

```
BufferedReader rd = null;
        try {
            URL url = new URL("https://e-kassa.org/core/ajax/stations_search.php?"
            + "q=%D0%BE&limit=10&timestamp=1352028872503");
            URLConnection conn = url.openConnection();
            String cookie = (new RandomString(32)).nextString();
            conn.setRequestProperty("Cookie", "PHPSESSID=" + cookie);
            // Get the response
            rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            StringBuffer sb = new StringBuffer();
            String line;
            while ((line = rd.readLine()) != null) {
                sb.append(line);
            }
            System.out.println(sb.toString());
        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            if (rd != null) {
                try {
                    rd.close();
                } catch (IOException e) {
                }
            }
        } 
```

这是在我的项目中正常工作的代码的和平。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:56:32.220

试试下面的东西。

```
HttpURLConnection connection = null;
    try {
        String url = "https://e-kassa.org/core/ajax/stations_search.php?"
            + "q=%D0%BE&limit=10&timestamp=1352028872503";
        URL url = new URL(url);
        connection = (HttpURLConnection) url.openConnection();
        connection.setRequestProperty("Cookie", "PHPSESSID=" + cookie);
        connection.connect();
        connection.getInputStream();
        int buffer;
        while((buffer = is.read()) != -1)
           System.out.print(buffer);
    } catch (MalformedURLException e1) {
        e1.printStackTrace();
    } catch (IOException e1) {
        e1.printStackTrace();
    } finally {
        if(null != connection) { connection.disconnect(); }
    } 
```

# html - 将最后一个孩子的 li 和 margin 居中

> ID：13218219
> 
> 赞同：1
> 
> 时间：2012-11-04T11:45:57.617
> 
> 标签：html, css, html-lists

我正在尝试将 ul 和 li 居中。我认为问题是最后一个 li 的左边距。我尝试了两件事，但似乎没有影响。问题是什么 ？

CSS：

```
ul {
    position:relative;
    width: 640px;
    margin:40px auto;
    padding:0;
    list-style-type:none;
}

ul li {
    float:left;
    position:relative;
    width: 100px;
    padding: 0px;
    margin-right: 10px;
    background-color: #f2f2f2;
    display: block;
    height: 30px;
    line-height: 30px;
    text-align:center;
    font-family: verdana; 
    font-size:10px;
    color: #666
}

ul li:last-child { margin-right: 0px; }
/* ul li.last-item { margin-right: 0px; } */ 
```

HTML：

```
<ul>
  <li> first </li>
  <li> second </li>
  <li> third </li>
  <li> fourth </li>
  <li> fifth </li>
  <li> sixth </li>
</ul> 
```

我在这里生活：http: [//jsfiddle.net/a4aQN/](http://jsfiddle.net/a4aQN/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:51:53.187

这是执行此操作的正确 CSS：

```
ul {
    margin: 40px auto;
    list-style-type:none;
    text-align: center;
}

ul li {
    width: 100px;
    padding: 0px;
    margin-right: 10px;
    background-color: #f2f2f2;
    display: inline-block;
    height: 30px;
    line-height: 30px;
    font-family: verdana;
    font-size:10px;
    color: #666
} 
```

[更新了 jsFiddle](http://jsfiddle.net/a4aQN/1/)

基本上我穿上`text-align: center;`了你的`ul`. 你也有一些你不需要的东西，比如设置它的宽度和`float: left;`你`li`的 s。

# actionscript-3 - 在 flash builder 4.6 中动态创建、添加和 addEventListener 项

> ID：13218221
> 
> 赞同：1
> 
> 时间：2012-11-04T11:46:09.393
> 
> 标签：actionscript-3, apache-flex, for-loop, addeventlistener, flashbuilder4

我正在使用 Adob​​e Flash Builder 4.6 并尝试在as2`create`中动态创建的对象，我是通过以下方式进行的：`add``addEventListener`

```
for(i=0;i<10;i++){
    abc[i]doSomeThing;
} 
```

actionScript 3 中的情况如何？我搜索了很多，一无所获，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:55:34.490

你必须在 Flash 中使用 AS3.0

```
for(var i:int=0;i<10;i++){

  abc[i].addEventListener(MouseEvent.CLICK,doSomeThing);

}

 function doSomeThing(event:MouseEvent):void
{
   switch(event.target)
{
    case abc[0]:
    //statements for object 1;
    break;
    case abc[1]:
    //statements for object 2;
    break;
    '
    '
    '
    '
    '
    '
}
} 
```

# linux - Linux中的pthreads条件变量是如何实现的？

> ID：13218228
> 
> 赞同：2
> 
> 时间：2012-11-04T11:47:07.363
> 
> 标签：linux, linux-kernel, pthreads

我的意思是某种伪代码显示了如何使用内核原语（互斥体、等待队列等）实现条件变量操作（信号、等待）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:15:00.303

这个问题有些模糊：等待队列是内部Linux内核机制，它们不会导出到用户空间。用户空间条件变量由 libc 在 futex 之上实现。

Linux 内核中没有条件变量接口实现，但创建起来很容易，例如参见[http://www.geocities.ws/nikitadanilov/code/kcond.c 。](http://www.geocities.ws/nikitadanilov/code/kcond.c)

# c# - 改进此通用请求响应模式

> ID：13218230
> 
> 赞同：9
> 
> 时间：2012-11-04T11:47:13.467
> 
> 标签：c#, design-patterns

最近我似乎在处理很多请求/响应的东西，我想创建一些通用的东西。

我有以下内容，但我对创建多个 if 语句不满意，我想避免使用它们。

这个想法是这样的：

无论请求/响应如何处理它们。如何在我的通用请求处理程序中删除这些 if 语句？

代码

```
class Program
{
    private static void Main()
    {
        IRequestResponseFactory factory = new RequestResponseFactory();

        var customerRequest = new CustomerRequest { Name = "Joe", Surname = "Bloggs" };
        var customerResponse = factory.ProcessRequest<CustomerRequest, CustomerResponse>(customerRequest);

        var billRequest = new BillRequest() { Amount = 100m };
        var billResponse = factory.ProcessRequest<BillRequest, BillResponse>(billRequest);

        Console.WriteLine(billResponse.Success);
        Console.WriteLine(customerResponse.Success);
        Console.ReadKey();

    }
}

public class CustomerRequest : IRequestData<CustomerResponse>
{
    public string Name { get; set; }
    public string Surname { get; set; }
}

public class CustomerResponse
{
    public bool Success { get; set; }
}
public class BillRequest : IRequestData<BillResponse>
{
    public decimal Amount { get; set; }
}
public class BillResponse
{
    public bool Success { get; set; }
}
public interface IRequestData<TResponse>
{
}

public interface IRequestHandler<TRequest, TResponse> where TRequest : IRequestData<TResponse>
{
    TResponse ProcessRequest(TRequest request);
}

public interface IRequestResponseFactory
{
    TResponse ProcessRequest<TRequest, TResponse>(TRequest request) where TRequest : IRequestData<TResponse>;
}
class RequestResponseFactory : IRequestResponseFactory
{
    public TResponse ProcessRequest<TRequest, TResponse>(TRequest request) where TRequest : IRequestData<TResponse>
    {
        var handler = new GenericRequestHandler<TRequest, TResponse>();
        TResponse response = handler.ProcessRequest(request);
        return response;
    }
}
public class GenericRequestHandler<TRequest, TResponse> : IRequestHandler<TRequest, TResponse> where TRequest : IRequestData<TResponse>
{
    public TResponse ProcessRequest(TRequest request)
    {
        var response = default(TResponse);

        //How do I avoid this if statements????

        if (request is IRequestData<CustomerResponse>)
        {
            var tempResponse = new CustomerResponse { Success = true };
            response = (TResponse)Convert.ChangeType(tempResponse, typeof(TResponse));
            return response;
        }
        if (request is IRequestData<BillResponse>)
        {
            var tempResponse = new BillResponse { Success = false };
            response = (TResponse)Convert.ChangeType(tempResponse, typeof(TResponse));
            return response;
        }
        return response;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T15:10:30.367

您可以`GenericRequestHandler<TRequest, TResponse>`用专门`IRequestHandler`的 s 替换该类，并让工厂通过反射跟踪所有可用的此类处理程序。

具体来说，这些可能是处理程序：

```
public class CustomerRequestHandler : IRequestHandler<CustomerRequest, CustomerResponse>
{
    public CustomerResponse ProcessRequest(CustomerRequest request)
    {
        return new CustomerResponse { Success = true };
    }
}

public class BillRequestHandler : IRequestHandler<BillRequest, BillResponse>
{
    public BillResponse ProcessRequest(BillRequest request)
    {
        return new BillResponse { Success = false };
    }
} 
```

现在，工厂不再只是将调用转发给包含`if`丑陋的通用处理程序，而是执行以下操作：

*   通过扫描当前程序集（可能还有其他程序集）以查找实现的类型来初始化自身`IRequestHandler<TRequest, TResponse>`
*   将构建一个处理程序类型的字典，其中键是`TRequest`类型，值是处理程序类型
*   对于任何传入请求，它都会检查处理程序列表以查看是否可以处理该特定类型，并且：
    *   将工作委托给可用的处理程序
    *   如果找不到合适的处理程序，则抛出异常

这是工厂类的可能实现：

```
class RequestResponseFactory : IRequestResponseFactory
{
    private readonly Dictionary<Type, Type> _requestHandlerTypes;

    public RequestResponseFactory()
    {
        _requestHandlerTypes =
            typeof(RequestResponseFactory).Assembly.GetTypes()
                .Where(t => !t.IsAbstract)
                .Select(t => new
                {
                    HandlerType = t,
                    RequestType = GetHandledRequestType(t)
                })
                .Where(x => x.RequestType != null)
                .ToDictionary(
                    x => x.RequestType,
                    x => x.HandlerType
                );
    }

    private static Type GetHandledRequestType(Type type)
    {
        var handlerInterface = type.GetInterfaces()
            .FirstOrDefault(i =>
                i.IsGenericType &&
                i.GetGenericTypeDefinition() == typeof(IRequestHandler<,>));

        return handlerInterface == null ? null : handlerInterface.GetGenericArguments()[0];
    }

    public TResponse ProcessRequest<TRequest, TResponse>(TRequest request) where TRequest : IRequestData<TResponse>
    {
        if (!_requestHandlerTypes.ContainsKey(typeof(TRequest)))
            throw new ApplicationException("No handler registered for type: " + typeof(TRequest).FullName);

        var handlerType = _requestHandlerTypes[typeof(TRequest)];

        var handler = (IRequestHandler<TRequest, TResponse>)Activator.CreateInstance(handlerType);

        return handler.ProcessRequest(request);
    }
} 
```

**带有工作示例的完整程序可在[http://ideone.com/TxRnEi](http://ideone.com/TxRnEi)获得。**

输出与原始程序的输出相同，但现在程序允许您添加新类型的请求和新类型的处理程序，并且能够在运行时动态使用它们，而无需编写长`if`/`case`声明来指定何时应该使用它们。

# .net - 如何调用需要来自 PowerShell 脚本的双引号参数的控制台应用程序？

> ID：13218231
> 
> 赞同：0
> 
> 时间：2012-11-04T11:47:13.900
> 
> 标签：.net, powershell, console-application

我怎样才能在下面构造这个调用：

> C:> ExecuteFoo "2012-10-21 00:00:00" "2012-10-21 00:00:00"

从下面的 PowerShell 脚本：

```
param(
   [string] $ReportStart = (get-date -format "yyyy-MM-dd 00:00;00"),
   [string] $ReportEnd = (get-date -format "yyyy-MM-dd 23:59:59")
)
# ............ Some stuff here
$Process = [diagnostics.process]::Start("$cmdline", "$ReportStart, $ReportEnd") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T16:22:24.073

直接试试下面的代码

```
& $cmdline $ReportStart $ReportEnd 
```

或者如果需要逃生：

```
& $cmdline "`"$ReportStart`"" "`"$ReportEnd`"" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:13:35.483

您只需要使用转义引号``"`

# mysql - 查找字符串位置并加入另一个表的行

> ID：13218232
> 
> 赞同：0
> 
> 时间：2012-11-04T11:47:16.917
> 
> 标签：mysql, string, position, inner-join

关于获得 2 组表格，我有两个主要问题。

```
table : room_type
rt_id   rt_title
1       Type A
2       Type B
3       Type C
4       Type D
5       Type E 
```

这是另一张桌子。

表：rate_cost

```
id     rate hotel cost                      date
2999    7   1   4700-5400-6100-6600-7300    2012-11-01
3000    7   1   4700-5400-6100-6600-7300    2012-11-02
3001    7   1   4700-5400-6100-6600-7300    2012-11-03
3002    7   1   4700-5400-6100-6600-7300    2012-11-04
3003    7   1   4700-5400-6100-6600-7300    2012-11-05
3004    7   1   4700-5400-6100-6600-7300    2012-11-06
3005    7   1   4700-5400-6100-6600-7300    2012-11-07
3006    7   1   4700-5400-6100-6600-7300    2012-11-08
3007    7   1   4700-5400-6100-6600-7300    2012-11-09
3008    7   1   4700-5400-6100-6600-7300    2012-11-10
3009    7   1   4700-5400-6100-6600-7300    2012-11-11
3010    7   1   4700-5400-6100-6600-7300    2012-11-12
3011    7   1   4700-5400-6100-6600-7300    2012-11-13
3012    7   1   4700-5400-6100-6600-7300    2012-11-14
3013    7   1   4700-5400-6100-6600-7300    2012-11-15
3014    7   1   4700-5400-6100-6600-7300    2012-11-16
3015    7   1   4700-5400-6100-6600-7300    2012-11-17
3016    7   1   4700-5400-6100-6600-7300    2012-11-18
3017    7   1   4700-5400-6100-6600-7300    2012-11-19
3018    7   1   4700-5400-6100-6600-7300    2012-11-20
3019    7   1   4700-5400-6100-6600-7300    2012-11-21
3020    7   1   4700-5400-6100-6600-7300    2012-11-22
3021    7   1   4700-5400-6100-6600-7300    2012-11-23
3022    7   1   4700-5400-6100-6600-7300    2012-11-24
3023    7   1   4700-5400-6100-6600-7300    2012-11-25
3024    7   1   4700-5400-6100-6600-7300    2012-11-26
3025    7   1   4700-5400-6100-6600-7300    2012-11-27
3026    7   1   4700-5400-6100-6600-7300    2012-11-28
3027    7   1   4700-5400-6100-6600-7300    2012-11-29
3028    7   1   4700-5400-6100-6600-7300    2012-11-30
3028    8   2   4700-5400-6100-6600-7300    2012-11-01
3028    9   3   4700-5400-6100-6600-7300    2012-11-01 
```

每个破折号分隔的数字是每个房间类型按其位置的费率成本。例如，4700 是类型 A (rt_id=1) 的费率成本，5400 是类型 B... 7300 是类型 E(rt_id=5)。

现在我想创建一个如下的结果。

```
Day/Room type   Type A | Type B | Type C | Type D | Type E
1 Nov 2012      4700     5400     6100     6600     7300
2 Nov 2012      4700     5400     6100     6600     7300
3 Nov 2012      4700     5400     6100     6600     7300
4 Nov 2012      4700     5400     6100     6600     7300
...
30 Nov 2012     4700     5400     6100     6600     7300 
```

我使这些结果在 PHP 中工作，但它需要几秒钟才能完成。我试过自己做，但我缺乏 mySQL 知识。所以请赐教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:55:20.890

将字符串拆分为列：

```
select date,
       substring_index(cost, '-', 1) type_a,
       case when cost regexp '.*-' then
                 substring_index(substring_index(cost, '-', 2), '-', -1)
            else ''
       end type_b,
       case when cost regexp '.*-.*-' then
            substring_index(substring_index(cost, '-', 3), '-', -1)
            else ''
       end type_c,
       case when cost regexp '.*-.*-.*-' then
            substring_index(substring_index(cost, '-', 4), '-', -1)
            else ''
       end type_d,
       case when cost regexp '.*-.*-.*-.*-' then
            substring_index(substring_index(cost, '-', 5), '-', -1)
            else ''
       end type_e
from rate_cost; 
```

如果可以修改表格设计，最好创建多个列：

```
create table rate_cost (
    id int,
    rate int,
    hotel int,
    cost_type_a int,
    cost_type_b int,
    cost_type_c int,
    cost_type_d int,
    cost_type_e int,
    date date); 
```

# ruby - 在 Nokogiri 中的元素之间获取数据

> ID：13218239
> 
> 赞同：5
> 
> 时间：2012-11-04T11:48:02.360
> 
> 标签：ruby, xpath, nokogiri

我正在尝试获取 nokogiri 中两个元素之间的文本，并将数据与其前面元素中的文本配对。

```
html  = 
"<website>
    <maindeck>
        1<card>Blood Crypt</card>
        2<card>Temple Garden</card>
    </maindeck>
    <maindeck>
        3<card>Angel of Serenity</card>
        4<card>Forest</card>
    </maindeck>
</website>" 
```

我想以这样的数组结束

```
#=> [[1,"Blood Crypt"],[2,"Temple Garden"]] 
```

前面的示例提供了这个作为答案，但我不确定它的作用/如何使用它。

```
/*/div[1]/following-sibling::text()[1] 
```

原始链接：[在 nokogiri 中的两个元素之间抓取文本？](https://stackoverflow.com/questions/3911656/grabbing-text-between-two-elements-in-nokogiri)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T11:59:35.853

这有效：

```
doc = Nokogiri::HTML(html)
doc.xpath('//maindeck[1]/text()').map { |n| [n.text.to_i, n.next.text] }
#=> [[1, "Blood Crypt"], [2, "Temple Garden"]] 
```

# c# - 跟踪服务器上的会话和表单身份验证剩余过期时间

> ID：13218241
> 
> 赞同：5
> 
> 时间：2012-11-04T11:48:09.030
> 
> 标签：c#, asp.net, session

**背景：**

回到工作岗位，我正在开发一个 Web 表单应用程序，该应用程序使用默认的滑动到期 Session 和 FormsAuthentication 超时。我的任务是跟踪用户的不活动状态，并在需要时显示带有会话到期警告的模式窗口、计时器和一个刷新会话超时的按钮（它也会刷新表单身份验证超时）。按钮连接到母版页上的事件，主体为空，它现在可以完成工作。（我知道其他解决方案）。

**部分工作解决方案：**

我的方法是使用母版页**Page_PreRender**方法来获取 Session 和 FormsAuthentication 超时值，比较它们并将较小的（或任何）值传递给客户端的浏览器（以及其他必要的数据）。在浏览器中，我会在模态窗口中的某个特定时刻用计时器显示警告，这一切都会按预期工作......也就是说......当用户什么都不做时。

**问题：**

我们的应用程序有很多带有更新面板的页面。这些更新面板用于与存储在 Session 中的数据进行交互和操作。每当用户在其中一个更新面板中执行某些操作时，会话超时幻灯片（重新启动）。**我无法**在客户端（在现实世界中）跟踪这些事情，我需要一种方法来跟踪服务器上的会话过期。

**我不想做的事情**

我不想浏览每一个页面、每一个 gridview、每一个 imagebutton 等并绑定一些客户端事件来跟踪用户操作。如果可能的话，我想要更多……通用且可维护的解决方案。

**我的点子：**

我希望能够在到期之前跟踪/检查 Session 或 FormsAuthentication 剩余时间，或者在这些值已被重置时得到通知。这样我就可以在客户端上获得有关我应该显示带有警告的模式窗口的时间的初始数据，那时，我希望能够首先与服务器检查是否**时间**合适（大约）或者如果我应该在客户端更新我的 javascript 数据并延长显示警告窗口的时间，因为会话到期已更新......那么拦截和过滤用户请求呢？那会有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:56:41.790

您是否考虑过通过 SQL Server 进行会话状态？它允许您通过数据库管理会话，打开查询所需到期信息的选项。看看这个[链接](http://msdn.microsoft.com/en-us/library/ms178586%28v=vs.100%29.aspx)。或者这个[链接](http://support.microsoft.com/kb/317604)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T16:54:43.810

实现 IHttpModule，附加到适当的 HttpApplication 事件，并在其中做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T19:25:43.100

尽管它不能完全满足您的要求，但也许这个[Timeout 控件](https://github.com/kennethscott/ASP.NET-Session-Timeout-Control)至少可以提供一些灵感？

[*更新：博客](http://programmerramblings.blogspot.com/2011/07/aspnet-session-timeout-control-with.html)上有一些评论来自一个实现滑动到期控件的人以及他如何使其工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T21:06:08.890

首先感谢大家的建议。上周我设法解决了这个问题，只是没有时间早点发帖……坦率地说，我对其他解决方案很感兴趣。我会确保阅读您发布和建议的所有材料。谢谢你。

这是我所做的：

**在服务器端：**

我使用 cookie 来跟踪会话过期时间。我突然想到的一件事是，即使在异步请求上，Page 也会经历其整个生命周期。整个想法是使用 Master Page 的 Pre_Render 事件在每个请求上设置适当的**cookie**。

我使用的是 UTC 时间格式，并且正在计算可转换为 javascript 时间格式的毫秒数：

```
 var tmpDate = new DateTime(1970, 1, 1);
 var nowUtc = DateTime.UtcNow;
 var tmpSpan = new TimeSpan(nowUtc.Ticks - tmpDate.Ticks);
 return tmpSpan.TotalMilliseconds; 
```

有了这个，我有了计算所需的一切，当前时间，会话到期（Session.Timeout）时间和警告时间......从那里开始的基本数学。

**在客户端：**

首先，我将所有三个 cookie 都变红以开始跟踪并初始化两个单独的变量来跟踪当前服务器时间。它们都被初始化为当前服务器时间的第一个 cookie 读取的相同值。然后，我使用**setTimeout**函数每秒读取 cookie（当前服务器时间）（jQuery 插件）。我正在检查**以前**的cookie 读取的当前服务器时间和**最新的当前服务器时间**cookie 读取是相等的（单独的变量） - 这样我就知道是否有任何请求，如果有，我会读取 2 个其他 cookie 的警告时间和超时时间来更新内容并关闭警告对话框（如果它已打开） . 之后，我将使当前服务器时间变量相等，并在每次读取 cookie 后继续比较它们并仅更新其中一个。此外，在每次 setTimeout 通话中，我都会获得当前时间

```
new Date().getTime(); 
```

它返回在客户端计算机上测量的当前 UTC 时间。在任何情况下，我们都假设客户在他/她的机器上设置了有效的时钟。之后，我将当前时间与警告时间进行比较，如果当前时间比警告时间“大”并且比超时时间“小”，那么我们必须显示弹出窗口。如果当前时间比超时时间“大”，请单击在注销用户后面的母版页代码中调用方法的不可见按钮。即使用户在浏览器中打开了多个选项卡，这也很有效。一旦用户在一个选项卡中注销，尝试将他注销的所有其他页面（选项卡）也会被重定向到登录页面。如果用户单击确定按钮确认他/她的存在，则会触发母版页代码后面的空事件（单击隐藏的 asp 按钮）。这足以刷新会话。这将自动重新发送 cookie，一切都按预期进行。（假设您有滑动会话）。在警告窗口中很容易实现定时器。我已经为带有消息和 3 个跨度的模态窗口动态创建了 div。在每次 setTimeout 迭代中，我都设置了这样的计时器：

1.  从当前 javascript 时间计算小时、分钟、秒
2.  将结果放入变量
3.  如果结果小于 10，则在前面加上 0（零）
4.  按类定位适当的跨度（IE 8 中的 ID 存在问题，使用了唯一类）并将其文本属性设置为计算值 $(obj).text(calculatedValue)

**为了结束**

请确保，当您读取 cookie 以将它们解析为浮点数时，以确保这一点。我有兴趣看到在这种特殊情况下服务器推送技术的应用和 Web 套接字的使用，但我认为如果您要跟踪和计算服务器上每个客户端的会话过期时间，那将是一种矫枉过正的做法。我知道我已经要求在服务器上进行会话过期跟踪，这看起来像是在客户端上进行跟踪，但事实并非如此......这些 cookie 是我们跟踪所需要的，它们来自服务器，所以......就是这样.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-17T11:54:06.693

这是我的解决方案。

1.  确保**FormsAuthentication.CookieMode**设置为使用 cookie（默认情况下）。

2.  向 Session 对象添加新键并将其填充到每个页面请求中（母版页的事件，如 Page_Init、Page_Load 等），包括回发和回调。

    `Session["SessionUserLastPageRequestTime"] = MyApp.CommonUtils.GetServerDateTime();`

3.  创建一个 HttpHandler，它实现了 IReadOnlySessionState 接口。

    `public class SessionStateHandler : IHttpHandler, IReadOnlySessionState`

将 SessionStateHandler 处理程序放入允许匿名访问的文件夹中（或将其放入根文件夹）。

```
public void ProcessRequest(HttpContext context)
{
    string requestData, alertMessage;
    using (var reader = new StreamReader(context.Request.InputStream))
    {
        requestData = reader.ReadToEnd();
    }
    /* -1: unauthorized;
     * -2: authorized, but no information about last request time;
     * -3: more than half session timeout, or not needed to inform user about session expiration;
     * >=0: lesser than half session timeout or if needed to inform user. The number reflects the value of total amount of minutes to session expiration. 
     */
    int status = -1, idleTimeInMinutes = 0;
    if (context.User?.Identity == null
        || !context.User.Identity.IsAuthenticated
        || context.Session == null
        || context.Session["SessionUserLastPageRequestTime"] == null)
    {
        status = -1;
        alertMessage = "Session expired!";
    }
    else
    {
        DateTime now = MyApp.CommonUtils.GetServerDateTime();
        var userLastPageRequest = (DateTime?)context.Session["SessionUserLastPageRequestTime"];
        if (userLastPageRequest == null)
        {
            status = -2;
            alertMessage = null;
        }
        else
        {
            var halfTimeout = TimeSpan.FromMinutes(context.Session.Timeout / 2);
            TimeSpan idleTime = now.Subtract(userLastPageRequest.Value);
            idleTimeInMinutes = (int)idleTime.TotalMinutes;
            if (idleTime <= halfTimeout)
            {
                status = -3;
                alertMessage = null;
            }
            else
            {
                status = context.Session.Timeout - idleTimeInMinutes;
                /* Send time to session expiration only if 3 or lesser minutes remain */
                if (status > 3)
                    status = -3;
                /* If session expiration time's expanding (sliding expiration) has been done in some way */
                else if (status < 0)
                    status = 0;
                alertMessage = string.Format("Session Will Expire In {0} Minutes", status);
            }
        }
    }
    context.Response.Write(JsonConvert.SerializeObject(new { Status = status, Message = alertMessage }));
    /* Remove new cookie to prevent sliding of session expiration time */
    if (requestData == "TIMEOUT_REQUEST")
        context.Response.Cookies.Remove(FormsAuthentication.FormsCookieName); /* by fact FormsAuthentication.FormsCookieName equals to ".ASPXAUTH" */
} 
```

请注意，只有在会话开始后至少一半的会话超时时间过去后检测到请求，服务器才会滑动会话到期，例如，如果 Session.Timeout 设置为 30 分钟，则带有票证的新 cookie 将在第一次请求时发送给客户端以响应自会话开始 15 分钟后。因此，只要您想知道会话到期时间，而不是立即扩展它，那么您需要删除新的 ASP.NET 身份验证。来自响应的 cookie（查看 line `context.Response.Cookies.Remove(FormsAuthentication.FormsCookieName);`）。

5.  使用 setInterval 或 setTimer 从客户端创建连续请求

```
var stc_ContiniousRequestOfSessionState_IntervalId;

function stc_ContiniousRequestOfSessionState() {
	stc_ContiniousRequestOfSessionState_IntervalId = setInterval(stc_ContiniousRequestOfSessionState_OnInterval, 20000);
}
function stc_ContiniousRequestOfSessionState_OnInterval() {
	stc_RequestSessionStateFromHttpHandler("TIMEOUT_REQUEST");
}
function stc_RequestSessionStateFromHttpHandler(dataToSend) {
	var url = '<%: Page.ResolveClientUrl("~/handlers/SessionStateHandler.ashx") %>';
	$.ajax({
		type: "POST",
		url: url,
		contentType: "application/json",
		dataType: "json",
		data: dataToSend,
		success: function (result) {
			stc_sessionState = result.Status;
			if (stc_sessionState == -2 || stc_sessionState == -3) {
				hideSessionEndWarningMessage();
			}
			else if (stc_sessionState == -1) {
				sessionExpired = true;
				clearInterval(stc_ContiniousRequestOfSessionState_IntervalId);
				showSessionTimeoutWarningMessage(result.Message);
			}
			else if (stc_sessionState >= 0) {
				showSessionTimeoutWarningMessage(result.Message);
			}
		},
		error: function (result) {
			/* we can increase request frequency, re-send session request instantly  or do something else at this place */
		}
	});
}
```

6.  通过将 JS 函数添加到母版页上的启动脚本来在页面加载时运行 JS 函数。

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        if (Page.User.Identity.IsAuthenticated)
        {
            ScriptManager.RegisterStartupScript(this, this.GetType(), "test1", "continiousRequestOfSessionState();", true);
        }
    }
} 
```

# objective-c - 如何在字符串中表达其他类的选择器？

> ID：13218248
> 
> 赞同：1
> 
> 时间：2012-11-04T11:48:53.410
> 
> 标签：objective-c, xcode4.5

说我在一个`myClass.m`

我知道我可以做到：

```
SEL aSelector = @selector(methodName); 
```

例如，我可以稍后做`NSStringFromSelector(@selector(Bookmark))`。

在这里，methodName 是 myClass 的选择器。

假设我有一个类型为 myPropertyClass 的名为 myProperty 的属性，并且该类有一个选择器 myPropertymethodname

如果说我想使用字符串表达该选择器，我应该如何访问它。

基本上有时我们想使用 valueForKey 而不是直接访问访问器。但是，这很容易输入错误。我想改用 NSStringFromSelector

```
SEL aSelector = @selector(myPropertyClass.myPropertymethodname); 
```

不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:00:16.093

对于属性的默认命名 getter：

```
SEL aSelector = @selector(myPropertymethodname); 
```

对于属性的默认命名设置器：

```
SEL aSelector = @selector(setMyPropertymethodname:);
                          ^^^^                   ^ 
```

然后只需确保选择器/属性声明在您正在编译的文件中可见。

请注意，选择器的名称不能限定为特定类。

# .net - End Invoke 异常导致内存泄漏

> ID：13218249
> 
> 赞同：1
> 
> 时间：2012-11-04T11:49:04.653
> 
> 标签：.net, remoting

我正在使用 .Net Remoting 在两台服务器之间发送对象。在我使用 EndInvoke 的这种情况下，对象由“Begin Invoke”机制发送，但在 End Invoke 期间始终抛出以下异常：

```
System.Net.WebExceptionSystem.Net.WebException: Unable to connect to the remote server ---> System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond …
   at System.Net.Sockets.Socket.EndConnect(IAsyncResult asyncResult)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state, IAsyncResult asyncResult, Int32 timeout, Exception& exception)
   --- End of inner exception stack trace ---

Server stack trace: 
   at System.Net.HttpWebRequest.EndGetRequestStream(IAsyncResult asyncResult, TransportContext& context)
   at System.Net.HttpWebRequest.EndGetRequestStream(IAsyncResult asyncResult)
   at System.Runtime.Remoting.Channels.Http.HttpClientTransportSink.AsyncHttpClientRequestState.ProcessGetRequestStreamCompletion(IAsyncResult iar)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Core.Common.CLSAPI.EventArrivedHandler.EndInvoke(IAsyncResult result) 
```

几个小时后，我的应用程序由于“内存不足异常”而崩溃，并且从转储文件中我可以看到，我尝试发送的所有对象仍被其中一个远程对象引用，因此 GC 仍未收集。在 EndInvoke 中处理异常以避免内存泄漏的正确方法是什么？

我知道这个问题可能是由客户端的一些更改引起/修复的，但是对我来说了解我可以在服务器端进行哪些更改以确保我的服务器的稳健性很重要。

# android - 修改 android.server.BluetoothService.java 以更新配对设备的缓存 service_channel_no 以打开与其的多个连接（在多通道上）

> ID：13218252
> 
> 赞同：2
> 
> 时间：2012-11-04T11:49:40.193
> 
> 标签：android, browser, bluetooth, rfcomm

我被困在我的 Android 手机（三星 Galaxy）必须打开 2 个（或更多）连接到我的 PC（服务器）的地方，这是一个配对设备。为此，我在 PC 上使用 UUID 启动 SDP 服务器：00001101-0000-1000-8000-00805F9B34FB 和通道 2，在第一次连接后，我在 PC 上取消注册 SDP 服务并在通道 3 上再次注册（和相同的 UUID）并期望我的 android 手机“连接”到它以建立第二个蓝牙连接。第二个失败。

我发现的问题是，由于配对，“BluetoothSocket.connect”设备的通道编号和 UUID 是从缓存中提供服务的，并且没有被更新，所以我在服务器端的通道编号中的 SDP 发生了变化此处不可见，因为它仍在尝试连接到通道 2（旧通道）。

这个问题的解决方法（经过多次令人沮丧的尝试后发现）可能是通过在 getRemoteServiceChannel() 和 fetchRemoteUuids() 返回之前引入 updateDeviceServiceChannelCache(addr) 来更改 android.server.BluetoothService.java 文件，以便更新每个函数调用的通道号。

上述解决方案很可能是错误的，请原谅我。如果正确，请提出任何进一步的更改以及如何在 Eclipse 中使此更改永久化，或者在其他情况下（错误的解决方案），正确的方法。

注意：我有 android 2.3.5，来自设备的请求实际上来自我转发到 PC 的浏览器。我希望他们在不同的频道上。

谢谢。

# android - 如何从自定义 ListView 中获取所选项目？

> ID：13218253
> 
> 赞同：1
> 
> 时间：2012-11-04T11:49:41.770
> 
> 标签：android, listview

我有一个自定义 ListView，其中每一行都包含许多 TextView。当我单击 ListItem 时，`OnListItemClick()`不会调用。那么如何获得自定义列表视图的选择呢？

谢谢你的帮助！

**行的 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/priorityView"
        android:layout_width="20dip"
        android:layout_height="match_parent"
        android:background="#cccccc"
        android:layout_marginTop="2dip"
        android:layout_marginBottom="2dip" />

    <LinearLayout 
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:weightSum="1.0"
        >
        <TextView
        android:id="@+id/dateText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:paddingBottom="2dip"
        android:paddingLeft="5dip"
        android:paddingRight="5dip"
        android:paddingTop="2dip"
        android:text="@string/empty"
        android:textSize="20dip"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/monthText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:padding="5dip"
        android:text="@string/empty"
        android:textSize="10dip" >
    </TextView>

    </LinearLayout>

    <TextView
        android:id="@+id/timeText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:padding="5dip"
        android:text="@string/empty" >
    </TextView>

    <TextView
        android:id="@+id/titleText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:padding="5dip"
        android:text="@string/empty"
        android:textStyle="bold"
        android:layout_weight="1.0" >
    </TextView>

    <CheckBox
        android:id="@+id/selectedCheckbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:padding="5dip" >
    </CheckBox>

</LinearLayout> 
```

**列表视图的 XML：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true" >
    </ListView>

</RelativeLayout> 
```

**爪哇**

```
public class MainActivity extends ListActivity {

    private AppointmentsDB dbHelper;
    private Cursor cursor;
    private AppointmentsCursorAdapter cursorAdapter;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        dbHelper = new AppointmentsDB(this);

        StringBuilder selectQuery = new StringBuilder();
        selectQuery.append("SELECT "+AppointmentsDB.KEY_ID+",");
        selectQuery.append(AppointmentsDB.KEY_TITLE + ", ");
        selectQuery.append(AppointmentsDB.KEY_DESCRIPTION + ", ");
        selectQuery.append(AppointmentsDB.KEY_PRIORITY + ", ");
        selectQuery.append(AppointmentsDB.KEY_DATE_TIME + ", ");
        selectQuery.append(AppointmentsDB.KEY_DURATION + ", ");
        selectQuery.append(AppointmentsDB.KEY_ALARM_TIME + " FROM "
                + AppointmentsDB.DATABASE_TABLE + " ");
        selectQuery.append("ORDER BY " + AppointmentsDB.KEY_DATE_TIME + " ASC");

        cursor = dbHelper.openReadableDatabase().rawQuery(
                selectQuery.toString(), null);

        String[] columnNames = new String[] {  };
        int[] ids = new int[] { };

        cursorAdapter = new AppointmentsCursorAdapter(this,
                R.layout.row, cursor, columnNames, ids);
        this.setListAdapter(cursorAdapter);
    }

    // This class sets our customised layout for the ListView
    class AppointmentsCursorAdapter extends SimpleCursorAdapter {

        private int layout;
        private int[] colours;

        @SuppressWarnings("deprecation")
        public AppointmentsCursorAdapter(Context context, int layout, Cursor c,
                String[] from, int[] to) {
            super(context, layout, c, from, to);

            this.layout = layout;
            colours = new int[] {
                    context.getResources().getColor(R.color.light_gray),
                    context.getResources().getColor(R.color.green),
                    context.getResources().getColor(R.color.orange),
                    context.getResources().getColor(R.color.brick_red) };
        }

        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            LayoutInflater inflater = LayoutInflater.from(context);
            View view = inflater.inflate(layout, parent, false);

            TextView titleText = (TextView) view.findViewById(R.id.titleText);
            TextView priorityView = (TextView) view
                    .findViewById(R.id.priorityView);
            TextView dateText = (TextView) view.findViewById(R.id.dateText);
            TextView monthText = (TextView) view.findViewById(R.id.monthText);
            TextView timeText = (TextView) view.findViewById(R.id.timeText);

            String title = cursor.getString(cursor
                    .getColumnIndex(AppointmentsDB.KEY_TITLE));

            int priority = 0;
            String _priority = cursor.getString(cursor.getColumnIndex(AppointmentsDB.KEY_PRIORITY));
            if(_priority != null)
                priority = Integer.parseInt(_priority);

            long dateTime = Long.parseLong(cursor.getString(cursor
                    .getColumnIndex(AppointmentsDB.KEY_DATE_TIME)));

            Calendar calendar = new GregorianCalendar();
            calendar.setTimeInMillis(dateTime);

            SimpleDateFormat timeFormat = new SimpleDateFormat(
                    "dd,MMM,HH:mm aaa");
            String[] tokens = timeFormat.format(calendar.getTime()).split(",");
            dateText.setText(tokens[0]);
            monthText.setText(tokens[1]);
            timeText.setText(tokens[2]);

            titleText.setText(title);
            priorityView.setBackgroundColor(colours[priority]);

            return view;
        }

        @Override
        public void bindView(View view, Context context, Cursor cursor) {
            super.bindView(view, context, cursor);

            TextView titleText = (TextView) view.findViewById(R.id.titleText);
            TextView priorityView = (TextView) view
                    .findViewById(R.id.priorityView);
            TextView dateText = (TextView) view.findViewById(R.id.dateText);
            TextView monthText = (TextView) view.findViewById(R.id.monthText);
            TextView timeText = (TextView) view.findViewById(R.id.timeText);

            String title = cursor.getString(cursor
                    .getColumnIndex(AppointmentsDB.KEY_TITLE));
            int priority =0;
            String _priority = cursor.getString(cursor
                    .getColumnIndex(AppointmentsDB.KEY_PRIORITY));
            if(_priority != null)
                priority = Integer.parseInt(_priority);

            long dateTime = Long.parseLong(cursor.getString(cursor
                    .getColumnIndex(AppointmentsDB.KEY_DATE_TIME)));

            Calendar calendar = new GregorianCalendar();
            calendar.setTimeInMillis(dateTime);

            SimpleDateFormat timeFormat = new SimpleDateFormat(
                    "dd,MMM,HH:mm aaa");
            String[] tokens = timeFormat.format(calendar.getTime()).split(",");
            dateText.setText(tokens[0]);
            monthText.setText(tokens[1]);
            timeText.setText(tokens[2]);

            titleText.setText(title);
            priorityView.setBackgroundColor(colours[priority]);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:57:17.977

我找到了解决方案。

您必须为custom 中的每个小部件设置`android:focusable`属性，包括布局小部件。`false``ListView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T11:57:14.023

尝试使用`OnItemClick()`而不是`OnListItemClick()`,

这是`SimpleCursorAdapter`通过发送光标创建的自定义列表视图

```
 SimpleCursorAdapter yearadapter =
            new SimpleCursorAdapter(this, R.layout.listview, yearcursor, yearfrom, yearto);
        setListAdapter(yearadapter);
        amount.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {

                  //Your code when item get clicked
                 }
            }); 
```

它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:12:45.077

下面的代码将为您提供列表视图项：

```
 private ListView listView = (ListView) findviewbyid(.........);

       listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
            View v = v.getChildAt(arg2);//This will give the listview item

        }
    }); 
```

# php - 当key_value相同时拼接一个数组？

> ID：13218255
> 
> 赞同：0
> 
> 时间：2012-11-04T11:49:52.127
> 
> 标签：php, arrays, split, hashmap

我的排序数组需要拆分，以便每个创建的数组都具有与该值关联的所有数组。

```
Array (
    [NAME] => Array
    (
        [0] => Fooaz
        [1] => bzdsfdasfz
        [2] => Fooooooooo
    )

    [DESCRIPTION] => Array
    (
        [0] => Foo
        [1] => Foo
        [2] => Barrrr
    )
) 
```

例如，我想从那个数组中得到两个数组。一个包含：

```
[NAME]=>Array([0] => Fooooooooo), [DESCRIPTION]=>Array([0] => Barrrr): 
```

另一个包含剩余元素。

**这样做的有效方法是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:00:34.550

使用 array_pop()： [http ://codepad.org/GeP6OEtf](http://codepad.org/GeP6OEtf)

```
<?php

$arr=array(
"NAME"=>array('a','b','c','d'),
"DESC"=>array('A','B','C','D')
);

$newarr=array();
foreach ($arr as $key=>$value) {
    $newarr[$key]=array(array_pop($arr[$key]));
}
print_r($arr);
echo "\n-------------\n";
print_r($newarr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:21:56.823

您可以使用提取功能。

```
extract($array); 
```

这将自动为您提供两个数组。

[参考](http://php.net/manual/en/function.extract.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T12:25:58.000

```
$arr = Array (
    'NAME' => Array
    (
        0 => 'Fooaz',
        1 => 'bzdsfdasfz',
        2 => 'Fooooooooo'
    ),

    'DESCRIPTION' => Array
    (
        0 => 'Foo',
        1 => 'Foo',
        2 => 'Barrrr'
    )
);

$arr1 = array();
foreach ($arr as $key => $value) {
    $arr1[$key][] = array_pop($arr[$key]);
}

print_r($arr);
print_r($arr1); 
```

# java - 查找 2x2 数组的秩

> ID：13218257
> 
> 赞同：-5
> 
> 时间：2012-11-04T11:50:42.263
> 
> 标签：java, arrays, math, matrix, linear-algebra

我有一个 2d 数组，它扮演 2x2 矩阵的角色。我怎样才能找到该矩阵的等级。直到现在我有这个：

```
Scanner input=new Scanner(System.in);

int[][] A = new int[2][2];
int[][] B = new int[2][2];
int[][] C = new int[2][2];

System.out.println("Enter elements for matrix A : ");

for (int i=0 ; i < A.length ; i++)
{
    for  (int j=0 ; j < A[i].length ; j++)
    {
        A[i][j] = input.nextInt();
    }

    System.out.println("Matrix A: ");
    for (int i=0 ; i < A.length ; i++)
    {
        System.out.println();
        for(int j=0 ; j < A[i].length ; j++)
        {
            System.out.print(A[i][j]+" ");
        }
    }
} 
```

我怎样才能找到该矩阵（数组）的等级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T18:45:13.863

您可以通过将矩阵转换为行梯形来找到矩阵的秩。矩阵的行梯形形式将与矩阵具有相同的等级。行梯形矩阵的秩就是非零行的总数。在 2x2 的情况下，计算非常简单。有关更详细的说明，请参阅此链接

[http://en.wikipedia.org/wiki/Rank_%28linear_algebra%29#Computation](http://en.wikipedia.org/wiki/Rank_%28linear_algebra%29#Computation)

一种更快的简单粗略方法（因为您只有 2x2 矩阵）是简单地检测矩阵的一列是否是另一列的倍数。这可以通过测试（根据您选择的一些数值容差）来大致检测这些比率是否相等（使用矩阵表示法，而不是基于整数零的数组索引）

```
 A(1,1)/A(1,2) == A(2,1)/A(2,2) 
```

照常注意零除法。如果比率相等，则表明您的列是彼此的倍数，因此矩阵不是满秩（1 或 0 也是如此）。如果所有矩阵元素都为零，则秩为零。

如果这对您的需求来说过于粗糙，请使用上面链接中建议的高斯消除方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:13:58.410

@Sean Owen：排名也可能为 0。

# spring-security - 如何让 Spring Security 中的当前用户与 CAS 集成？

> ID：13218269
> 
> 赞同：2
> 
> 时间：2012-11-04T11:52:11.610
> 
> 标签：spring-security, cas

我已经使用 cas wiki 上的 Spring 安全教程将 CAS 集成到 Spring Security。现在我想获取当前用户，不知道如何！

我应该从 Spring security 还是 CAS 获得它？

`SecurityContextHolder.getContext().getAuthentication()`返回空值：|

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:01:00.980

如果 SecurityContextHolder.getContext().getAuthentication() 为 null 表示用户尚未通过身份验证。

关于 CAS 的一些提示

1.  确保您使用 SSL 与 CAS 通信，因此 CAS 必须托管在 SSL 端口（443 或 8443）上

2.  确保您的 Spring 应用程序托管在 SSL 端口上，以便 CAS 可以通过 SSL 服务器调用您的 Spring。

常见错误是 CAS 和 Spring 应用程序都不在 SSL 端口上。如果是这种情况，请从 www.startssl.com 获取免费 SSL 证书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:39:39.170

发现问题了！我打算使用自己的访问控制系统，所以我评论了负责检查用户角色以访问 URL 的过滤器。显然，如果我不拦截 URL，则无法通过该请求访问 Spring Security 的上下文（或者至少看起来像那样！我不是 Documents 的忠实粉丝，所以我尝试了代码，当我遇到异常时，我试着猜测原因！我真的应该停止这样做 :| 但无论如何，既然我拦截了 URL，SecurityContextHolder.getContext().getAuthentication() 不再返回 null :)

# sql - 使用特殊章程的 SQL 语句

> ID：13218271
> 
> 赞同：0
> 
> 时间：2012-11-04T11:52:33.323
> 
> 标签：sql, sql-server, insert, character

谁能帮我纠正以下陈述：

```
SET @cmd='BULK INSERT ' + @Database + '.dbo.' + @tmp + ' from ' + @Out + @tmp + '.csv 
WITH (FIELDTERMINATOR = , , ROWTERMINATOR = \n)' 
```

上述查询的输出是：

> 从 C:\SABA\GLCODE.csv 批量插入 MP2.dbo.GLCODE WITH (FIELDTERMINATOR = , , ROWTERMINATOR = \n)

我想以以下方式打印它：

> 从 C:\SABA\GLCODE.csv 批量插入 MP2.dbo.GLCODE WITH (FIELDTERMINATOR =',', ROWTERMINATOR = '\n')

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T11:59:48.250

尝试这个

```
SET @cmd='BULK INSERT ' + @Database + '.dbo.' + @tmp + ' from ' + @Out + @tmp + 
            '.csv WITH (FIELDTERMINATOR = '','' , ROWTERMINATOR = ''\n'')' 
```

只需使用`''`which 用作转义序列字符即可获得额外的`'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:36:55.810

```
SET @cmd='BULK INSERT ' + @Database + '.dbo.' + @tmp + ' from ''' + @Out + @tmp + '.csv'' WITH (FIELDTERMINATOR = '','', ROWTERMINATOR = ''\n'')' 
```

Yogi 建议的方法应该可行，但您还需要在文件名周围加上撇号。

# javascript - console.log 什么时候执行？

> ID：13218273
> 
> 赞同：6
> 
> 时间：2012-11-04T11:52:55.690
> 
> 标签：javascript, class, logging, console

我正在尝试使用console.log调试一些非常简单的Javascript，但它输出的变量值在console.log调用*之后*才会更改，此时变量是“类”成员（Chrome 22、Firefox 16）。

我期望发生的一个例子是这样的：

```
var a = 1;
console.log(a);
a += 20;

//console output says a is 1 
```

但如果变量是“类”成员：

```
var a = new myClass(1);
console.log(a);
a.x += 20;

//console output says a.x is 21 
```

如果控制台没有记录调用日志时存在的值，它最终决定何时记录该值，我该如何解决这个问题！？

fwiw 这里是整个代码：

```
function myClass() {
    myClass.myClass.apply(this, arguments);
    if (this.constructor === myClass) this.myClass.apply(this, arguments);
};
myClass.myClass = function () {};
myClass.prototype.myClass = function (x_) {
    if (x_ === undefined) x_ = 0;
    this.x = x_;
}

var a = new myClass(1);
console.log(a);
a.x += 20; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T11:54:03.827

立即，但是当您在控制台中手动扩展对象时会获取对象的*状态*- 而不是在记录时。

当您在控制台中展开它时，添加 20 的代码已经在很久以前（相对而言）执行了，它说`x: 21`

# inno-setup - Inno 设置“您选择的驱动器或 UNC 共享不存在或不可访问”，为什么？

> ID：13218274
> 
> 赞同：2
> 
> 时间：2012-11-04T11:52:56.757
> 
> 标签：inno-setup

我在 Inno Setup 中编写了一个应用程序来在用户 PC 上安装文件。当我在 Mac 上运行的 Parallels 中的 XP 上测试它时，该应用程序运行良好。但是当用户尝试在 Xp 和 7 中安装时，他们会进入向导并开始安装，然后收到以下消息：

> `Error. The drive or UNC share you selected does not exist or is not accessible`

我现在已经设法获取程序生成的日志文件：

```
2012-11-11 14:09:21.992   Log opened. (Time zone: UTC+00:00)

2012-11-11 14:09:21.992   Setup version: Inno Setup version 5.5.2 (a)

2012-11-11 14:09:21.992   Original Setup EXE: C:\Users\Ali\Documents\rninstaller.exe

2012-11-11 14:09:21.992   Setup command line: /SL5="$9049C,86159698,54272,C:\Users\Ali\Documents\rninstaller.exe" /SPAWNWND=$D049A /NOTIFYWND=$140476 /log="rnlog"

2012-11-11 14:09:21.992   Windows version: 6.1.7601 SP1  (NT platform: Yes)

2012-11-11 14:09:21.992   64-bit Windows: Yes

2012-11-11 14:09:21.992   Processor architecture: x64

2012-11-11 14:09:21.992   User privileges: Administrative

2012-11-11 14:09:21.992   64-bit install mode: No

2012-11-11 14:09:21.992   Created temporary directory: C:\Users\Ali\AppData\Local\Temp\is-MQ2FF.tmp

2012-11-11 14:09:28.201   RestartManager found an application using one of our files: ?O?O?O?I?O?O?O?I?O?O?O?O?O?O?O?O?O?O?O?O?O?O?O?O?O?O?O?ODO?O?O?O?O?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?I?O?O?O?O?O?O?O?O?O?I?I?i

2012-11-11 14:09:28.201   RestartManager found an application using one of our files: 

2012-11-11 14:09:28.201   RestartManager found an application using one of our files: 

2012-11-11 14:09:28.201   RestartManager found an application using one of our files: 

2012-11-11 14:09:28.201   RestartManager found an application using one of our files: 

2012-11-11 14:09:28.201   Can use RestartManager to avoid reboot? No (262758)

2012-11-11 14:09:28.201   Message box (OK):
                          The drive or UNC share you selected does not exist or is not accessible. Please select another.

2012-11-11 14:09:31.592   User chose OK.

2012-11-11 14:09:31.592   Deinitializing Setup.

2012-11-11 14:09:31.592   Log closed. 
```

我看不到这里发生了什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-06-25T12:13:32.883

由于不同的原因，我收到了这个错误。我的脚本没有任何硬编码路径，UNC 或其他。这是在 Windows 10 机器上。我已将应用程序安装在闪存驱动器上，但后来尝试在 PC 上安装另一个版本时，闪存驱动器不存在。安装失败，因为 Windows 无法卸载以前的版本，并且 Inno 安装程序正在尝试更新已安装的版本。要检查这一点，请打开控制面板并选择程序和功能。如果您的应用程序的某个版本已安装，请尝试将其卸载。如果失败，那么您的设置将给出 OP 记录的相同错误。

我希望这对遇到此问题的其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:37:10.850

正如对问题的评论所解决的那样，问题中的设置脚本具有硬编码`DefaultDirName`，其中包含客户端站点上不存在的服务器名称。这导致*“您选择的驱动器或 UNC 共享不存在或不可访问”*错误。这就是为什么[`DefaultDirName`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_defaultdirname)最常见的*“以目录常量为前缀”的*原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-26T13:45:08.837

对于在这篇文章中寻找“驱动程序或 UNC 共享不存在”问题的解决方案的任何其他人，我发现问题可以追溯到上次安装的剩余部分，特别是卸载可执行文件。

如果您不再拥有卸载可执行文件，并且 Windows 10“添加或删除程序”无法卸载（可能是由于缺少`uninst.exe`），您可以尝试进行一些注册表黑客以使其安装。

继续`Computer\HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Microsoft\Windows\CurrentVersion\Uninstall\`并扫描引用您的软件的卸载可执行文件的条目。把它弄死，整个钥匙。然后 - 尝试再次安装您的程序。

卸载密钥还有另一个位置：

*   `Computer\HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Uninstall\`
*   `Computer\HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`
*   `Computer\HKEY_USERS\.DEFAULT\Software\Microsoft\Windows\CurrentVersion\Uninstall`
*   `Computer\HKEY_USERS\S....\Software\Microsoft\Windows\CurrentVersion\Uninstall`

您可能还想在这些地方查找条目。

# c# - WPF控件能否轻松移植到Windows 8 RT平台？

> ID：13218276
> 
> 赞同：1
> 
> 时间：2012-11-04T11:53:51.950
> 
> 标签：c#, wpf, visual-studio, windows-8

由于 VS 无法在 Windows RT 上运行，我猜一些大师会制作一个，但出于自己的目的，是否可以使用或轻松移植 wpf 代码编辑器控件，如[http://www.codeproject.com/Articles/42490/Using-AvalonEdit Windows RT 上的-WPF-文本编辑器](http://www.codeproject.com/Articles/42490/Using-AvalonEdit-WPF-Text-Editor)？步骤是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:45:12.817

Vs2012 允许您远程调试到 RT 设备。所以没有真正的需要。

请参阅[http://timheuer.com/blog/archive/2012/10/26/remote-debugging-windows-store-apps-on-surface-arm-devices.aspx](http://timheuer.com/blog/archive/2012/10/26/remote-debugging-windows-store-apps-on-surface-arm-devices.aspx)

# mysql - 左连接返回重复行

> ID：13218281
> 
> 赞同：0
> 
> 时间：2012-11-04T11:54:23.070
> 
> 标签：mysql, join, left-join, jointable

**问题正在通过评论得到解决**

以下是 mysql 查询，我一直在尝试将表`notes`与其他两个表连接起来`user_facility`，`users`但是当我运行查询时，它会返回重复的行。我使用相同的方式加入我的一个类似查询，并且通过使用`Distinct`我的问题得到解决，但使用以下技巧并没有成功。请让我知道如何解决问题，如此不同的行被返回。

谢谢，

```
SELECT DISTINCT a,b,c
            FROM notes
            LEFT JOIN user_facility ON notes.fk_resident_id = user_facility.fk_user_id
            LEFT JOIN users ON notes.fk_resident_id = users.id where user_facility.fk_facility_id = 101 
```

# sql - sql ce 到 ms sql server 分页查询（适用于 razor 网页）

> ID：13218282
> 
> 赞同：1
> 
> 时间：2012-11-04T11:54:35.957
> 
> 标签：sql

最近我读了这篇文章 [http://www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-WebGrid](http://www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-WebGrid) 但我的问题是那篇文章使用 sql server ce 但我使用的是 MS sql server 而我想写这段代码：

```
sql = "Select Title, ISBN, Description, FirstName, LastName, Category From Books " + 
       "Inner Join Authors on Books.AuthorId = Authors.AuthorId " + 
       "Inner Join Categories on Books.CategoryId = Categories.CategoryId " +
       "Order By BookId OFFSET @0 ROWS FETCH NEXT @1 ROWS  ONLY;";

var result = db.Query(sql, offset, pageSize); 
```

现在对于“Order By BookId OFFSET @0 ROWS FETCH NEXT @1 ROWS ONLY;”的相同查询是什么？在 sql server 中，如果您知道另一篇文章以另一种方式执行此操作，那也很好，非常感谢你们

# javascript - 交换两个变量的值，优先顺序？

> ID：13218285
> 
> 赞同：0
> 
> 时间：2012-11-04T11:55:39.657
> 
> 标签：javascript, variable-assignment

```
var a = 1, b = 9;
a, b = b, a;
console.log(a,b)

1 9 
```

作业是否可能按从左到右的顺序进行？因此，“a”将取“b”的值，而“b”将取“a”的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:02:22.950

交换值应该非常简单：

```
var temp = b;
b = a;
a = temp; 
```

**编辑：**如果都是关于整数，即使没有额外的变量也可能发生交换：

```
b = b - a;
a = a + b;
b = a - b; 
```

# winforms - 如何创建圆形文本框？

> ID：13218288
> 
> 赞同：2
> 
> 时间：2012-11-04T11:55:56.013
> 
> 标签：winforms, textbox, geometry

我创建了一个小游戏 - WinForm 应用程序（Bingo 适合那些知道游戏的人），我需要一些帮助。我想知道如何创建一个圆形的文本框。而且我不想把边缘弄圆。我的目标是在此文本框中显示一个 2 位数字，代表当前出现的球。因为宾果球的形状，我想把它做成圆形。

这可以做到吗？或者你能给我一个不同的解决方案吗？

我添加了我当前对游戏的看法：

[球员画面](http://img138.imageshack.us/img138/8413/81894946.jpg)

多谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:22:48.080

您实际上不必有一个圆形标签/文本框。

获取您想要的大小/颜色的圆圈图片。将圆圈添加为图像控件，然后在其顶部添加带有数字的标签。

标签应具有透明的背景颜色。

# python - 将字符串转换为具有规范的列表

> ID：13218290
> 
> 赞同：2
> 
> 时间：2012-11-04T11:56:03.983
> 
> 标签：python, string, list

我想在 python 中从我的字符串中创建一个列表，它会告诉我一个字母在字符串中连续显示多少次。例如：

```
my_string= "google" 
```

我想创建一个如下所示的列表：

```
[['g', 1], ['o', 2], ['g', 1], ['l', 1], ['e', 1]] 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T12:04:04.337

您可以使用itertools[中的](http://docs.python.org/2/library/itertools.html)[groupby](http://docs.python.org/2/library/itertools.html#itertools.groupby)：

```
from itertools import groupby
my_string= "google"
[(c, len(list(i))) for c, i in groupby(my_string)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:01:32.987

您可以使用正则表达式和字典来查找和存储每个字母的最长字符串，如下所示

```
s = 'google'
nodubs = [s[0]] + [s[x] if s[x-1] != s[x] else '' for x in range(1,len(s))]
nodubs = ''.join(nodubs)
import re
dic = {}
for letter in set(s):
    matches = re.findall('%s+' % letter, s)
    longest = max([len(x) for x in matches])
    dic[letter] = longest

print [[n,dic[n]] for n in nodubs] 
```

结果：

```
[['g', 1], ['o', 2], ['g', 1], ['l', 1], ['e', 1]] 
```

# php - 使用 INSERT INTO $variable 使用 1 个表单插入到不同的表中

> ID：13218293
> 
> 赞同：0
> 
> 时间：2012-11-04T11:56:20.950
> 
> 标签：php, mysql, forms, variables, insert

很难问的问题，但基本上我有一个带有“标题”、“消息”和“图像”框的网络表单，它们都可以将其上传到 mysql 上的一个表中。

我想要做的是在我的表单中有另一个字段用于我希望它发布到的地方，我现在有 2 页和 2 个表格。表 Blog 和表 Blog_2 如果我将 insert.php 更改为 INSERT INTO Blog 或 Blog_2，它们都可以工作

但是我希望能够使用该字段和一个`$_POST[Blog]` 链接到表单中的字段的函数，它将有一个下拉框来选择 Blog 或 Blog_2

下面是我的代码。我已经尝试过了，但我似乎无法让它工作。如您所见，我创建了一个名为 $insert 的变量。

也许它只是一个语法问题，但我不是那么精通 PHP。

```
<?php
$con = mysql_connect("xxx","xxx","xxx");
mysql_select_db("databse") or die(mysql_error());

$insert = '$_POST[Blog]';

mysql_query("INSERT INTO $insert
(Date, Title, Message, Image) 
VALUES(now(), '$_POST[Title]' , '$_POST[Message]' , '$_POST[Image]' ) ")
or die(mysql_error()); 

echo "1 record added";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T11:59:10.737

尝试如下

```
$insert = mysql_real_escape_string($_POST['Blog']);

mysql_query("INSERT INTO ".$insert."
(Date, Title, Message, Image) 
VALUES(now(), '$_POST[Title]' , '$_POST[Message]' , '$_POST[Image]' ) ")
or die(mysql_error()); 
```

建议：

1.学会防止MySQL注入：[好链接](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

2.不推荐使用Mysql扩展来编写新代码。相反，应该使用 mysqli 或 PDO_MySQL 扩展。更多阅读：[PHP 手册](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:07:25.127

```
$insert = $_POST['Blog'];
function clean($text) {
 $text = str_replace("'", "\'", $text);
 return $text;
}
mysql_query("INSERT INTO ".$insert."
(`Date`, `Title`, `Message`, `Image`) 
VALUES(now(), '".clean($_POST['Title'])."' , '".clean($_POST['Message]'])."' , '".clean($_POST['Image]'])."' ) ")
or die(mysql_error()); 
```

# objective-c - 我只想改变位置

> ID：13218294
> 
> 赞同：0
> 
> 时间：2012-11-04T11:56:26.240
> 
> 标签：objective-c, cocos2d-iphone, objective-c++, box2d-iphone

我在 cocos2d 中用 box2d 移动我的身体。我只想改变位置。但是，不是角度（不是旋转）。它在移动过程中改变角度。当我用 SetTransform 方法设置时，每次都是相同的角度。

我在 youtube 上捕捉到我的问题： [http ://www.youtube.com/watch?v=IQAQtgplLmw&feature=youtu.be](http://www.youtube.com/watch?v=IQAQtgplLmw&feature=youtu.be)

**我的代码：**

```
body->SetTransform(myB2Vec2Position, body->GetAngle()); 
```

**在设置我的身体之前**

![在此处输入图像描述](../Images/8e3bc6f150704b1b494b0711a31d07e5.png)

** image2: 用 SetTransform 设置我的身体后 **

![在此处输入图像描述](../Images/83c9b2b7063037cd824c2e3f6874fe99.png)

**像 image2 ：它改变了移动时的角度当我使用 SetTransform 方法设置时，每次都使用相同的角度。**

![在此处输入图像描述](../Images/16bb95ad907dfe449492e671e7adf450.png)

* * *

```
 NSLog(@"MyAngleValue: %f",currentBody->GetAngle()); 
```

**每次**：MyAngleValue:0.000000。通常，我的身体每次都会改变角度。当我调用 SetTransform 方法时，角度是 0.000000。 **什么是问题？**

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:55:49.933

如果您根本不希望您的身体旋转（从不，无论如何），请将其动量设置为`INFINITY`。应该这样做（如果您不手动更改角度或角速度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:31:20.900

设置正文定义时，请尝试设置此参数：

```
bodyDef.fixedRotation = true; 
```

# c++ - 使用 SOCI 和 Qt = 如何编写一个好的 *.pro 文件？

> ID：13218297
> 
> 赞同：0
> 
> 时间：2012-11-04T11:56:34.913
> 
> 标签：c++, qt, soci

我想使用 Qt 和 SOCI 编写一个 GUI 应用程序。如何编写一个好的 *.pro 文件来编译一个没有错误的项目？我写了这个：

```
QT       += core gui

TARGET = example-project
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h

FORMS    += mainwindow.ui

INCLUDEPATH += /usr/local/include/soci\
                /usr/include/postgresql/
LIBS += -lsoci_core -lsoci_postgresql -ldl -lpq 
```

它有效，但我不知道它是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:15:16.167

您编写的 .pro 文件看起来不错，INCLUDEPATH`/usr/include/postgresql/`可能不需要尾部斜杠，但是，判断它是否会产生“无错误”的方法是尝试一下。INCLUDEPATH 定义将允许您使用这些目录中的标头，如下所示：

```
#include <header.h> 
```

代替：

```
#include "/usr/include/postgresql/header.h" 
```

该`LIBS+=`部分应仅包含 SOCI 中包含您在代码中引用的符号的库。如果您正在静态编译您的程序，它会将这些库捆绑到您的二进制文件中，从而增加其大小。

您可以使用 .pro 文件轻松添加许多功能，了解如何编写会很有帮助，例如，您可以通过添加以下行来为 Mac OS 程序添加应用程序图标：

```
ICON = Icon.icns 
```

查看[Qt 4.7 .pro 文件参考](http://doc.qt.digia.com/stable/qmake-project-files.html)。

您始终可以通过导航到源所在的目录（在终端中）并使用以下命令来使用自动生成的 .pro 文件：

```
qmake -project 
```

根据我的经验，自动生成的 .pro 文件通常是不完整的，但它为您提供了一个比较标准，有时还包含您可能会忘记的内容。

.pro 文件创作的最后一种方法来自[QtCreator IDE](http://qt.digia.com/Product/Developer-Tools/)。当您从项目中添加/减去它们时，它会自动从您的 pro 文件中添加和减去内容，在此环境中添加表单和资源特别简单。

# javascript - 如何将下拉列表和文本值传递给我的电子邮件？

> ID：13218298
> 
> 赞同：2
> 
> 时间：2012-11-04T11:56:54.963
> 
> 标签：javascript, html, email

我有一个带有 4 个文本框、1 个下拉列表和 1 个按钮的 HTML 页面，有人知道我如何通过 javascript 将这些值发送到我的电子邮件，这样当您单击 verstuur（发送）时，您将收到一条带有（消息）的 javascript 通知消息发送 或 请检查所有字段并重试。）

```
<form action="javascript:;" method="post" id="contact_form">
    <div class="row">
        <p>
            <label>Volledige Naam</label>
            <input type="text" name="name" class="text_field" />
        </p>
        <p>
            <label>E-mailadres</label>
            <input type="text" name="email" class="text_field" />
        </p>
    </div>
    <div class="row">
        <p>
            <label>Telefoonnummer</label>
            <input type="text" name="phone" class="text_field" />
        </p>
        <p>
            <label>Onderwerp</label>
                <select class="text_field" name="subject">
                <option>Selecteer een onderwerp</option>
                 <option value="afspraak">Afspraak Maken</option>
                 <option value="informatie">Informatie Opvragen</option>
                 <option value="klacht">Klacht</option>
                 <option value="overig">Overig</option>
            </select>
        </p>
    </div>
    <p>
        <label>Bericht</label>
        <textarea class="text_field" rows="10" cols="10" name="message"></textarea>
    </p>
    <input type="submit" class="button" value="Verstuur" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:19:06.183

您不能直接从 JavaScript 发送电子邮件。您需要使用某种服务器端技术（例如：PHP）来执行此操作。您可以通过 JS 向该脚本发出 AJAX 请求并发送您的邮件。

但是，您可以动态创建一个`mailto:`链接，以便浏览器可以打开用户的默认邮件应用程序表单，他可以将其发送到该表单。

# database - 用于 JavaScript 的数据库即服务

> ID：13218301
> 
> 赞同：2
> 
> 时间：2012-11-04T11:57:37.083
> 
> 标签：database, paas

我正在寻找一种数据库服务，它允许我存储和检索来自 javascript ajax 调用的数据。我在想这将是减少服务器负载的一个非常好的方法，我愿意为这样的服务付出高昂的代价。

所以我搜索了一下，没有找到令我满意的东西。我检查了[Heroku Postgres](https://postgres.heroku.com/)和[monohq](https://www.mongohq.com/home)，但我认为这不是我所需要的。

你知道这样的服务吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T19:54:48.127

[JayStack](http://jaystack.com)提供 JayStorm，它是一个用于 JavaScript 业务应用程序的**平台即服务。**与数据库即服务相比，它具有更多功能，并提供基于标准的通信协议和格式（REST、AJAX、OData、XML、JSON）来使用存储在**MongoDB**中的数据。推荐使用开源[JayData 库](http://jaydata.org)从 JavaScript 使用服务。

您可以从**JavaScript、.NET、Objective-C (iOS)、Java (Android)、LightSwitch**访问管理数据，并在 JavaScript 中实现**自定义服务器端业务逻辑**。该服务也可用于零代码场景（通过点击创建数据库并从 Office Excel 打开表格）。由于开放版是免费的，因此您无需任何财务投资即可评估服务或运行您的开源应用程序 :)

我会看看[JayStack](http://jaystack.com/blog)和[JayData](http://jaydata.org/blog) DEV 博客。

最酷的东西之一：离开开放版意味着能够在可扩展的专用虚拟服务器上创建新应用程序。

可以使用以下代码段从 JavaScript 查询您的端点：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="http://include.jaydata.org/datajs-1.0.3.js"></script>
    <script src="http://include.jaydata.org/jaydata.js"></script>
    <script src="http://include.jaydata.org/jaydataproviders/oDataProvider.js"></script>
    <script>
        $data.service('yourServiceUrl', function (contextFactory, contextType) {
            var context = contextFactory();
            //you can work with this OData context 
            context.Categories.toArray(function (items) {
                console.log(items);
            });
        });
    </script>
</head>
<body></body>
</html> 
```

有关系数据库作为服务提供者（Windows Azure 和[database.com](http://database.com)），但我还没有从 JavaScript 中尝试过这些。

免责声明：我是开发团队的成员，想分享技术细节。

# apache - web2py 火箭或 Apache

> ID：13218303
> 
> 赞同：0
> 
> 时间：2012-11-04T11:58:17.317
> 
> 标签：apache, web2py

Web2py 在主页中声明“包括快速多线程 Web 服务器”，我看到文字说 Rocket 服务器的性能与 Apache 一样好。Web2py 还声称将安全设置为高优先级。

那么为什么人们建议不要在生产中使用火箭呢？有什么缺点？如果答案是处理大量流量，这可能是什么？

（我正在考虑将 Django 应用程序切换到 web2py，如果对于小型应用程序我可以使用火箭服务器，它将简化初始转换。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:42:05.793

人们建议在生产中反对 Rocket 的主要原因是它几乎没有配置/自定义选项。使用 Apache 或 nginx 或其他任何东西，您将拥有无穷无尽的可插拔模块或内置功能，用于安全、缓存、重写、日志记录、调整、线程、错误处理......许多不同的功能。Rocket 更像是一个很好的、基本的 Web 服务器，只有其中的几个选项。

我们一直在开发环境中使用 Rocket 服务器——它在低负载、以功能为中心的环境中运行良好。但是，当我们到达安全和负载测试环境时，我们将其替换为 Apache，因为我们需要 Apache 提供的几种功能 / Rocket 没有。

火箭没有任何问题。在低负载的生产环境中可能会很好。如果您决定确实需要 Rocket 没有的选项，那么请更改您对 Web 服务器的选择。

# vb.net - ISA 端口与 Visual Basic 的通信

> ID：13218305
> 
> 赞同：2
> 
> 时间：2012-11-04T11:58:48.513
> 
> 标签：vb.net, driver, isa-bus

有没有机会我可以在 Visual Basic .Net for Windows XP 和更高版本的 ISA 卡上写一些东西？（我知道 Win XP 及更高版本有限制，所以你不能直接将数据写入端口）

我也做了一些研究，如果我了解情况，我只有两个选择：

1.  编写驱动程序（非常有问题的选项:)）或

2.  尝试在`kernel32`类似驱动程序中使用现有驱动程序到*串行/并行*端口。

如果没有任何其他选项，我必须如何修改“使用*串行/并行*端口”以将其用于 ISA 端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:26:16.667

现代版本的 Windows 不允许来自用户应用程序的直接端口 I/O。您的程序运行在 Ring 3，而不是 Ring 0。您需要某种驱动程序来代表您的应用程序执行端口 I/O。

首先要做的是联系显卡制造商，看看他们是否为您的主板制作了 Windows 驱动程序。

如果 Windows 驱动程序不可用，并且您只想进行基本的 reigster 读取和写入（无中断或 DMA），则可以下载一些可免费下载的库来执行端口 I/O。基本上，该库包含一个位于 Ring 0 中并为您执行 I/O 的虚拟“驱动程序”。我对**[WinIO](http://www.internals.com/)**最有经验。

WinIO 有一个 C/C++ API，没有 .Net/CLR。您将需要使用 P/Invoke 从托管代码中调用 WinIO 函数。

如果您四处搜索，您可能会发现一个类似于 WinIO 的工具包，它为托管代码提供 API。（编辑：这是我收藏的一个叫做[DirectIO](http://www.direct-io.com/)。）

WinIO 的最大问题是您仅限于基本的寄存器读/写。如果您需要中断或 DMA，那么您就不走运了。此时，您将需要编写一个“真正的”驱动程序。

对于外行来说，编写驱动程序可能是一项非常重要的任务（你会搞砸很多事情）。您需要先获取一份[Windows 驱动程序工具包](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)，并学习 Microsoft 的[内核模式驱动程序框架](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463279.aspx)。您还可以考虑购买[Jungo WinDriver](http://www.jungo.com/st/windriver_usb_pci_driver_development_software.html)的副本。WinDriver 是一种第三方工具，可大大简化驱动程序的开发，但对于一次性项目而言，它的成本相当高。

# c++ - 编译错误：...未在此范围内声明

> ID：13218306
> 
> 赞同：2
> 
> 时间：2012-11-04T11:58:52.447
> 
> 标签：c++, eigen

我是 C++ 编程的新手。我必须实现一个程序来计算矩阵的伪逆。正如 Eigen 教程所建议的，我编写了这样的代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <Core>
    #include <iostream>
    #include <Eigen/Dense>
    #include <Eigen/SVD>
    #include <Eigen/Eigen>
    using namespace Eigen;
    using namespace std;

    void pinv(MatrixXf& pinvmat)
     {
    ei_assert(m_isInitialized && "SVD is not initialized.");
   double  pinvtoler=1.e-6;                       // choose tolerance 
    SingularValuesType m_sigma_inv=m_sigma;
    for ( long i=0; i<m_workMatrix.cols(); ++i) {
    if ( m_sigma(i) > pinvtoler )
     m_sigma_inv(i)=1.0/m_sigma(i);
   else m_sigma_inv(i)=0;
   }
    pinvmat = (m_matV*m_sigma_inv.asDiagonal()*m_matU.transpose());

   }

    int main()
   {

    MatrixXf A(3,2);
    A<<1,2,3,4,5,6;
    pinv(A);
    cout << "pinv =" << endl << A << endl;
    return 0;
   } 
```

如果我尝试编译它，我会得到错误：

```
tut_eigen/pinv.cpp：在函数 'void pinv(Eigen::MatrixXf&)' 中：
tut_eigen/pinv.cpp:18:14: 错误: 'm_isInitialized' 未在此范围内声明
tut_eigen/pinv.cpp:18:58: 错误: 'ei_assert' 未在此范围内声明
tut_eigen/pinv.cpp:20:4：错误：未在此范围内声明“SingularValuesType”
tut_eigen/pinv.cpp:20:23: 错误: 预期';' 在“m_sigma_inv”之前
tut_eigen/pinv.cpp:21:22: 错误: 'm_workMatrix' 未在此范围内声明
tut_eigen/pinv.cpp:22:19: 错误: 'm_sigma' 未在此范围内声明
tut_eigen/pinv.cpp:23:19: 错误: 'm_sigma_inv' 未在此范围内声明
tut_eigen/pinv.cpp:24:22: 错误: 'm_sigma_inv' 未在此范围内声明
tut_eigen/pinv.cpp:26:15: 错误: 'm_matV' 未在此范围内声明
tut_eigen/pinv.cpp:26:22: 错误: 'm_sigma_inv' 未在此范围内声明
tut_eigen/pinv.cpp:26:47: 错误: 'm_matU' 未在此范围内声明

```

为什么？？它们没有在 SVD 文件中声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:49:13.863

我怀疑你在谈论这个[“教程”](http://eigen.tuxfamily.org/index.php?title=FAQ#Is_there_a_method_to_compute_the_.28Moore-Penrose.29_pseudo_inverse_.3F)，它不是一个教程，而是一个常见问题解答，假设你已经对这个库有所了解（如果你链接到你的信息源会很有帮助，顺便说一句）。

这说明您可以将`pinv()`方法添加到`SVD`“从外部”。我假设它们意味着您可以从派生类中派生`SVD`并提供该`pinv()`方法。只是在某处键入函数并不能为编译器提供必要的上下文来确定引用名称的位置。

# javascript - 如何让 div 元素重复其动画？

> ID：13218309
> 
> 赞同：0
> 
> 时间：2012-11-04T11:59:13.023
> 
> 标签：javascript, jquery, events

基本上，我有一个紫色的盒子。我想对其进行动画处理并使其向左移动 250 像素，然后我希望它向下移动 50 像素，然后向右移动，并重复该循环。这是我到目前为止所拥有的：

```
<!DOCTYPE html>
<html>
<body>

<div id="goodbox"  style="height:50px;width:40px;background-color:purple;position:absolute"> </div>

<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.0.js">
 </script>

<script>
 $(document).ready(function(){
 $("#goodbox").animate({left:"300px"},5000)
$("#goodbox").animate({bottom:"300px"},5000)
})
 </script>

 </body>
 </html> 
```

您会看到它向左移动后，它会移动到屏幕底部然后进行动画处理，但我希望它从停止的位置移动。所以基本上：向左移动 250px；向下移动 20px；向右移动 250 像素；向上移动 20px；然后重复

我该怎么做呢？让我们说我有另一个蓝色盒子。假设我给了这个盒子功能，所以如果我按下左键它会向左移动，右键向右移动。向下键向下和向上键向上。如果这两个盒子接触，我怎么能让紫色盒子停止移动。提前感谢任何愿意回答这个问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:13:00.610

您可以将动画代码封装在一个普通函数中，并在`complete`最后一次调用函数的回调中传递`animate`。看看[如何在 jQuery 中连续循环动画？](https://stackoverflow.com/questions/6767286/jquery-continuously-loop-animation)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:13:26.513

您可以在动画中使用相对定位。因此，您可以指定它移动您想要的 250 像素，而不是设置确切的左侧或底部。为此，您使用：

```
$('#goodbox').animate({'left': '-=250px'}, 5000); 
```

为了让它一个接一个地动画，你可以使用`animate()`方法的第三个参数来提供一个在动画完成后发生的回调。例如：

```
$('#goodbox').animate({'left': '-=250px'), 5000, function() {
    $('#goodbox').animate({'top: '+=20px'}, 5000, function() { ... });
}); 
```

然后让这个重复你可以使用`window.setInterval()`. 这允许您每 x 毫秒运行一段 javascript。因此，假设您有 4 个动画，每个动画持续 5 秒，您需要`setInterval()`每 20 秒运行一次。所以你会这样做：

```
window.setInterval(animations, 20000);

function animations() {
    // All your animation code here
} 
```

希望我已经为您提供了足够的信息来开始。

# android - 将字符串放入处理程序

> ID：13218310
> 
> 赞同：1
> 
> 时间：2012-11-04T11:59:20.840
> 
> 标签：android, string, bundle, handler, msg

我有一个小问题。我尝试给处理程序一个字符串。我试过 bundle.putString("key","String"); ，但是如果我尝试获取字符串，我得到了一个 nullpointerException。有人可以告诉我我做错了什么吗？

代码：

```
 Message msg = new Message();
 Bundle b = new Bundle();

 b.putString("note","4.25");
 b.putString("fach", "Math");
 Log.d("DEBUG ",b.getString("note")+"  "+fach); //--> Here isn't a nullPointerException
 msg.setData(b);
 handler.sendMessage(msg);

 private Handler handler = new Handler() {

       @Override
       public void handleMessage(Message msg) {
Bundle b = msg.getData();
    Log.d("DEBUG,HANDLER","note "+b.getString("note")+" fach"+b.getString("fach")); //Throws 2 times null

}
} 
```

希望您能够帮助我。对不起英语不好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:28:07.270

这不是很多代码，但我会尝试使用 Message.obtain() 而不是 new Message()。我不相信您在 handleMessage() 中收到的消息是您在 handler.sendMessage() 中发送的消息。sendMessage() 和 handleMessage() 都必须在同一个线程上调用，并且您必须确保没有将任何其他 Message 对象放入处理程序的 MessageQueue 中。

# git - 是否有任何 git 管理 GUI？

> ID：13218311
> 
> 赞同：4
> 
> 时间：2012-11-04T11:59:24.783
> 
> 标签：git, commit

我想编辑 git 历史记录：更改提交的作者（他们被错误标记的人）等。

是否有任何用于 git 的 GUI，不是专注于“拉和推”当前提交，而是专注于历史编辑？

PS我使用linux，所以linux客户端是首选，但我可以为它启动wine

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:06:54.567

您可以尝试其中一种：

*   [吉特可乐](http://git-cola.github.com/)
*   [吉特克](http://gitk.sourceforge.net/)
*   [傻笑](https://live.gnome.org/giggle)

如果您使用 Eclipse IDE，则有[EGit 插件](http://www.eclipse.org/egit/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:06:36.157

在`git Bash`类型中`gitk`。假设它是你需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T05:32:33.237

如果你可以在 Linux 上运行[mono](http://mono-project.com/)，那么我认为[GitExtensions](http://code.google.com/p/gitextensions/)是最好的选择。

GitExtensions 依赖于命令行 git。

GitExtensions 正在积极开发中，并具有许多花哨的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T05:35:05.980

如果你在 Linux 中使用[Monodevelop开发 C#，有一个基于](http://monodevelop.com/)[Ngit](https://github.com/mono/ngit)库的内置 git 插件。

Monodevelop 不调用命令行 git。

# maven - 无法禁用空 JAR 的生成（maven-jar-plugin）

> ID：13218313
> 
> 赞同：3
> 
> 时间：2012-11-04T11:59:26.410
> 
> 标签：maven, maven-jar-plugin

有时，我的 Talend Open Studio 组件有资源但没有 Java 源（它们是纯粹的元数据组件）。在这种情况下，我需要禁用 JAR 文件的生成。

我以这种方式配置了 maven-jar-plugin：

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.4</version>
        <configuration>
            <forceCreation>false</forceCreation>
            <skipIfEmpty>true</skipIfEmpty>
            <useDefaultManifestFile>false</useDefaultManifestFile>
        </configuration>
      </plugin> 
```

但我仍然得到 ${project.name}.jar 文件，其中包含 pom.properties、pom.cml、清单和一个仅包含“class {}”的空文件 App.class

虽然我可以使用以下方法禁用所有 Maven 内容的包含：

```
<archive>
<addMavenDescriptor>false</addMavenDescriptor>
</archive> 
```

我仍然得到一个包含清单文件的 JAR

是否有一些配置参数我配置错误？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T22:06:40.903

禁用创建 jars 的最有效方法是配置`maven-jar-plugin`如下：

```
<plugins>
    <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <version>2.3.1</version>
        <executions>
            <execution>
                <id>default-jar</id>
                <phase>none</phase>
            </execution>
        </executions>
    </plugin>
</plugins> 
```

它会将默认的 jar 创建放在`none`阶段中，它永远不会运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T14:33:59.207

我自己找到了解决方案，即使它只是一种解决方法。如果 /src/main/java 目录不存在，我使用 delete antrun 任务删除 JAR：

```
<!-- remove the empty JAR if not needed -->
<if>
    <not><available file="${basedir}/src/main/java" type="dir" /></not>
    <then>
    <delete file="${project.build.directory}/${project.name}-${project.version}.jar"/>
    </then>
</if> 
```

此任务需要 antcontrib 才能正常工作，并且，如果您打算使用 maven 进行发布，它就不起作用（但它可以用于仅元数据的组件，例如 Talend Open Studio 插件）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T23:19:07.953

您可以指示 maven-jar-plugin 不生成 META-INF/maven/* */pom。*文件，如[Maven Archiver Reference](http://maven.apache.org/shared/maven-archiver/index.html)中所述。

此外，您可以使用它的[skipIfEmpty](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#skipIfEmpty)选项。

以下代码结合了这两者*（只是为了让它们准备好复制粘贴）*：

```
...
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.4</version>
            <configuration>
                <skipIfEmpty>true</skipIfEmpty>
                <archive>
                    <addMavenDescriptor>false</addMavenDescriptor>
                </archive>
... 
```

这工作正常，但是当你这样做时`mvn install`，由于缺少项目工件而失败。类似的问题可能`mvn deploy`与发布有关，但我没有检查这些。

但是，如果您可以接受 antrun 的删除，那么该属性`skipIfEmpty`可能会很适合您，并且会更优雅一些。至少它不会引入新的执行及其依赖项等。

# vector - 初始化一个 4d 向量

> ID：13218318
> 
> 赞同：0
> 
> 时间：2012-11-04T11:59:52.243
> 
> 标签：vector, compiler-errors, initialization

我写了这段代码：

```
 #include<vector>
 using namespace std;
 int i;
 int j;
 cin>>i>>j;

vector<vector<vector<vector<double> > > > boy_max(i,vector<double>(i,vector<double>(j,vector<double>(j,0)))); 
```

在编译过程中出现以下错误：

```
prog.cpp: In function ‘int main()’:
prog.cpp:164: error: no matching function for call to ‘std::vector<double, std::allocator<double> >::vector(int&, std::vector<double, std::allocator<double> >)’
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_vector.h:247: note: candidates are: std::vector<_Tp, _Alloc>::vector(const std::vector<_Tp, _Alloc>&) [with _Tp = double, _Alloc = std::allocator<double>]
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_vector.h:234: note:                 std::vector<_Tp, _Alloc>::vector(size_t, const _Tp&, const _Alloc&) [with _Tp = double, _Alloc = std::allocator<double>]
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_vector.h:221: note:                 std::vector<_Tp, _Alloc>::vector(const _Alloc&) [with _Tp = double, _Alloc = std::allocator<double>]
/usr/lib/gcc/i686-pc-linux-gnu/4.3.4/include/g++-v4/bits/stl_vector.h:213: note:                 std::vector<_Tp, _Alloc>::vector() [with _Tp = double, _Alloc = std::allocator<double>] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:02:04.713

您的初始化行是错误的。它应该更像这样：

```
vector<vector<vector<vector<double> > > > boy_max(i,vector<vector<vector<double> > >(i,vector<vector<double> >(j,vector<double>(j,0)))); 
```

# jquery - 如何让我的幻灯片循环播放？

> ID：13218323
> 
> 赞同：1
> 
> 时间：2012-11-04T12:00:39.860
> 
> 标签：jquery, jquery-ui, jquery-slider

在最后一张幻灯片之后，我的幻灯片放映反转幻灯片顺序，从第一张幻灯片开始，我希望它循环播放.. 我不知道在此代码中要更改什么，我是初学者。如果有人回答我将非常感谢...

```
//direction settings
    if(opts.direction == 'right'){
        cur = maxi; //starting from last slide
        autoMove = opts.prev; //changing the auto-scroll direction
    $(opts.slides).children().each(function(e){ //inverting the slide order
            if(e = 0){
                var child = $(this).detach();
                $(opts.slides).prepend(child);
            }
    });
    } 
```

# jsf - 托管属性继承

> ID：13218329
> 
> 赞同：4
> 
> 时间：2012-11-04T12:01:01.060
> 
> 标签：jsf, inheritance, jsf-2

我的问题与此[问题](https://stackoverflow.com/questions/4901219/viewscope-constructor-called-twice-not-sure-why)类似。我有一个**BaseBean**，它目前只有一个属性，注释为`@ManagedProperty`.

但是，当我在命令按钮的操作方法中访问此*继承*的托管属性的 getter 时，它返回 null。我调试并确认基础 bean 构造函数被调用了两次 - 一次是在页面加载时，然后是在单击按钮时，如上述链接中所述。

我遵循了文章选择的答案以及这篇文章中提到的建议[，](https://stackoverflow.com/questions/11214146/calling-postconstruct-on-super-bean-and-extending-bean)但无济于事。

以下是我的代码：

```
public abstract class BaseBean
{
   @ManagedProperty(value = "#{serviceLocator}")
   private IServiceLocator serviceLocator;

   public IServiceLocator getServiceLocator() {
      return serviceLocator;
   }

   public void setServiceLocator(IServiceLocator serviceLocator) {
      this.serviceLocator = serviceLocator;
   }
} 
```

* * *

```
@ManagedBean
@ViewScoped
public class RegistrationBean extends BaseBean implements Serializable
{
   private static final long serialVersionUID = -6449858513581500971L;

   private String userID;
   private String password;
   private String firstName;
   private String lastName;
   private String email;
   private String addressLine1;
   private String addressLine2;
   private String city;
   private String state;
   private String pincode;

   private static final Logger LOGGER = LoggerFactory.getLogger(RegistrationBean.class);

   /* getter / setters */

   public String register() 
   {
      String nextPage = null;
      try {
         RegistrationDetails userDetails = ModelBuilder.populateRegistrationData(this);
         int registrationID = getServiceLocator().getUserService().registerUser(userDetails);
         LOGGER.info("Registered user successfully. Registration ID - {}", registrationID);
         nextPage = "success";
      }
      catch (RegistrationException e) {
         LOGGER.error(e.getMessage());
      }
      return nextPage;
   }

   public void checkUserExists() 
   {
      int regID = getServiceLocator().getUserService().findUser(getUserID());

      if(regID > 0) {
         FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_WARN, "User already exists !!", null);
         FacesContext.getCurrentInstance().addMessage(null, message);
      }
   }
} 
```

为什么要在表单提交时再次调用构造函数？？？：/

`checkUserExists()`即使在通过 ajax 对 userID 字段的 blur 事件调用的方法中，getter 也会返回 null 。

**编辑**：为 ServiceLocator 添加代码..

```
@ManagedBean
@ApplicationScoped
public class ServiceLocator implements IServiceLocator
{
   private static final String USER_SERVICE = "userService";
   private static final String MOVIE_SERVICE = "movieService";

   @PostConstruct
   public void init() {
      final ServletContext sc = FacesUtils.getServletContext();
      this.webAppContext = WebApplicationContextUtils.getRequiredWebApplicationContext(sc);
      this.userService = (IUserService) webAppContext.getBean(USER_SERVICE);
      this.movieService = (IMovieService) webAppContext.getBean(MOVIE_SERVICE);
   }

   private ApplicationContext webAppContext;

   private IUserService userService;

   private IMovieService movieService;

   @Override
   public IUserService getUserService() {
      return userService;
   }

   @Override
   public IMovieService getMovieService() {
      return movieService;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:27:58.767

AFAIK 您试图混合两个答案：一个用于`@RequestScoped`mbeans，另一个用于`@ViewScoped`mbeans。如果您看到您发布的第一个链接，BalusC 表示您不必`@ManagedProperty`在`@ViewScoped`mbeans 中拥有，如[ViewParam 与 @ManagedProperty(value = “#{param.id})”</a> 所示。](https://stackoverflow.com/q/4888942/1065197)

 [如果您无法`serviceLocator`通过视图参数传递，则必须找到另一种获取该值的方法（从会话中保存/检索它）。

另外，请检查 BalusC 的此信息，解释为什么`@ViewScoped`可以在每个请求上重新创建 mbean：

> 简而言之：当任何 UIComponent 使用绑定属性绑定到 bean 或在视图中使用 JSTL 或标签时，@ViewScoped 会中断。在这两种情况下，bean 的行为都类似于请求范围的。第一个在我看来是一个相当大的错误，第二个只是在 Facelets 中摆脱整个 JSTL 东西的额外借口。
> 
> 这与 JSF 2.0 问题 1492 有关。这是相关性的摘录：这是一个带有部分状态保存的鸡/蛋问题。在应用增量状态*之前*执行视图以填充视图，因此我们看到了您所描述的行为。在这一点上，我看不到解决此用例的明确方法。如果必须使用视图范围的绑定，解决方法是将 javax.faces.PARTIAL_STATE_SAVING 设置为 false。

从](https://stackoverflow.com/q/4888942/1065197) 

[](https://stackoverflow.com/q/4888942/1065197)
*   [@ViewScoped 的好处和缺陷](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)

* * *

根据您的评论和编辑，您可以`@ApplicationScoped`使用此处提供的代码访问 mbean：

*   [如何在jsf中获取应用程序范围变量？](https://stackoverflow.com/q/4862860/1065197)

这将是行：

```
FacesContext.getCurrentInstance().getExternalContext()
    .getApplicationMap().get("serviceLocator"); 
```

您必须使用该代码，因为显然`@ViewScoped`bean 不能接受`@ManagedProperty`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T17:21:15.410

未显示代码`ServiceLocator`，因此有许多未解决的问题可能有助于确定您的问题的答案。我会发表评论或提出问题，也许某些事情会触发“啊哈！” 为你：

*   验证它`ServiceLocator`实际上是用`@ManagedBean`.

*   请记住，您不能注入比目标 bean 范围（生命周期）更短的 bean。在这种情况下，如果`ServiceLocator`是，比如说，，`@RequestScoped`那么它不能被注入到你的`@ViewScoped`bean 中。

*   我们是否假设这`IServiceLocator`是某个托管 bean 实现的接口`ServiceLocator`？

*   `ServiceLocator`闻起来像 EJB；如果是，则`@EJB`用于注入 EJB。

# jquery-ui - Jquery UI datepicker 在 next().focus() 上关闭

> ID：13218331
> 
> 赞同：4
> 
> 时间：2012-11-04T12:01:14.600
> 
> 标签：jquery-ui, datepicker

我需要从日期选择器小部件中选择随后的两个日期，然后在选择第一个日期时我想关注第二个日期。我是这样设置的：

```
<input type="text" class="date" id="fromDate" name="fromDate"/>
<input type="text" class="date" id="toDate" name="toDate"/>

$("input.date").datepicker({
    onSelect: function(){
        $(this).next(".date").focus();
    }
}); 
```

但是当我选择第一个日期时，第二个日期打开然后关闭窗口......为什么？

我看到 onClose 事件有效，但如果没有选择第一个日期，我不想打开另一个日期......

请从小提琴尝试：http: [//jsfiddle.net/Ld98p/1/](http://jsfiddle.net/Ld98p/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:25:50.953

那很有意思。即使调用 datepicker 小部件的[show()](http://api.jqueryui.com/datepicker/#method-show)方法也会导致相同的行为。

看起来`onSelect`回调是在非常复杂的情况下调用的，事件方面的，并且`focus`不能依赖从回调本身触发或强制显示弹出窗口。

`focus`但是，从稍微延迟的函数触发似乎可以工作：

```
$("input.date").datepicker({
    onSelect: function() {
        window.setTimeout($.proxy(function() {
            $(this).next(".date").focus();
        }, this), 10);
    }
}); 
```

您可以在[更新的 fiddle](http://jsfiddle.net/Ld98p/5/)中对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-31T19:12:47.570

接受的答案对我不起作用，但以下变体确实有效：

```
$("input.date").datepicker({
    onSelect: function() {
        window.setTimeout($.proxy(function() {
            $('.date').datepicker('show');
        }, this), 10);
    }
}); 
```

# c++ - Eclipse 工作区磁盘大小不断增长

> ID：13218334
> 
> 赞同：0
> 
> 时间：2012-11-04T12:01:37.317
> 
> 标签：c++, windows, eclipse

我在 WINDOWS 上使用 Eclipse，有一个简单的 c++ 项目，并且工作区文件夹的大小越来越大。我有 30 MB 的工作空间大小，项目只有 100 KB 的源文件。

Eclipse 中有哪些设置会影响工作空间的大小。如何限制大小并加速 Eclipse？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:06:56.610

Eclipse 将所有设置保留在工作区中，例如您正在使用的字体。30 MB 不算多，处理一下吧。

阅读本文以加快速度[如何加快 Eclipse？](https://stackoverflow.com/questions/316265/tricks-to-speed-up-eclipse)

您也可以阅读此[http://www.eclipsezone.com/eclipse/forums/t61566.html](http://www.eclipsezone.com/eclipse/forums/t61566.html)

# java - 从 youtube 频道获取视频列表

> ID：13218343
> 
> 赞同：5
> 
> 时间：2012-11-04T12:03:20.890
> 
> 标签：java, youtube-api, youtube-channels

我正在使用这些 api [https://developers.google.com/youtube/](https://developers.google.com/youtube/) 并且我不知道如何在给定 youtube 频道地址的情况下获取包含相关信息的视频列表（至少单个视频 url 和标题）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2020-01-21T18:03:10.387

我知道这不再相关，但对于 2020 年的任何人来说，你需要一个 youtube v3 api 密钥

你可以使用的是

[https://www.googleapis.com/youtube/v3/search?key=[API_KEY]&channelId=[CHANNEL_ID]&part=snippet,id&order=date&maxResults=50](https://www.googleapis.com/youtube/v3/search?key=%5BAPI_KEY%5D&channelId=%5BCHANNEL_ID%5D&part=snippet,id&order=date&maxResults=50)

您可以删除片段，它不会提供所有视频的名称和其他信息。ID 给出了视频 id

向 URL 发送获取请求

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T07:49:26.777

这有点令人费解，但可以相对轻松地完成。诀窍在于知道频道实际上只是特定用户上传的视频列表。因此，如果您说您有一个 youtube 频道地址，则该地址采用以下形式：

```
http://www.youtube.com/user/[username] 
```

然后您可以使用用户上传的提要获取视频：

```
https://gdata.youtube.com/feeds/api/users/[username]/uploads 
```

作为旁注，如果您使用提要：

```
https://gdata.youtube.com/feeds/api/users/[username] 
```

您将获得有关用户的额外信息，包括一系列元素，这些元素为您提供各种提要链接（其中一个是我上面提到的上传提要），其中还包含视频数量等信息。

相反，如果您的频道 URL 采用以下形式：

```
https://www.youtube.com/channel/UC[userid] 
```

请注意，这种 URL 总是以 UC 开头，然后是一个长字符串。在这种情况下，只需删除 UC，然后访问此提要：

```
https://gdata.youtube.com/feeds/api/users/[userid]/uploads 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-24T15:48:26.270

如果 a) 频道有超过 50 个视频，或者 b) 希望 youtube 视频 id 格式为平面 txt 列表，则此方法特别有用：

1.  获取 Youtube API v3 密钥（参见[https://stackoverflow.com/a/65440324/2585501](https://stackoverflow.com/a/65440324/2585501)）
2.  获取频道的Youtube频道ID（见[https://stackoverflow.com/a/16326307/2585501](https://stackoverflow.com/a/16326307/2585501)）
3.  获取频道的 Uploads Playlist ID：（`https://www.googleapis.com/youtube/v3/channels?id={channel Id}&key={API key}&part=contentDetails`基于[https://www.youtube.com/watch?v=RjUlmco7v2M](https://www.youtube.com/watch?v=RjUlmco7v2M)）
4.  安装 youtube-dl（例如`pip3 install --upgrade youtube-dl`或`sudo apt-get install youtube-dl`）
5.  使用 youtube-dl 下载上传播放列表：（`youtube-dl -j --flat-playlist "https://<yourYoutubePlaylist>" | jq -r '.id' | sed 's_^_https://youtu.be/_' > videoList.txt`请参阅[https://superuser.com/questions/1341684/youtube-dl-how-download-only-the-playlist-not-the-files-therein](https://superuser.com/questions/1341684/youtube-dl-how-download-only-the-playlist-not-the-files-therein)）

# elasticsearch - 使用 Elasticsearch C# Mpdreamz/NEST 客户端在嵌套字段上的 Facet

> ID：13218346
> 
> 赞同：3
> 
> 时间：2012-11-04T12:03:48.810
> 
> 标签：elasticsearch, nest

如何使用 Mpdreamz/NEST Elasticsearch 客户端基于嵌套字段的属性列出构面？

我检查了 Nest 文档，但不清楚该怎么做。

这是我尝试过的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Nest;

namespace Demo
{
    class Program
    {
        public class Movie
        {
            public int Id { get; set; }
            public string Title { get; set; }
            public string Description { get; set; }
            [ElasticProperty(Index = FieldIndexOption.analyzed, Type = FieldType.nested)]
            public List<Genre> Genres { get; set; }
            public int Year { get; set; }
        }

        public class Genre
        {
            //        public int Id { get; set; }
            [ElasticProperty(Index = FieldIndexOption.analyzed)]
            public string GenreTitle { get; set; }
        }

        static void Main(string[] args)
        {
            var setting = new ConnectionSettings("localhost", 9200);
            setting.SetDefaultIndex("default_index");
            var client = new ElasticClient(setting);

            // delete previous index with documents
            client.DeleteIndex<Movie>();

            // put documents to the index
            var genres = new List<Genre>();
            for (var i = 0; i < 100; i++)
                genres.Add(new Genre { GenreTitle = string.Format("Genre {0}", i) });
            for (var i = 0; i < 1000; i++)
            {
                client.Index(new Movie
                {
                    Id = i,
                    Description = string.Format("Some movie description {0}", i),
                    Title = string.Format("Movie Title {0}", i),
                    Year = 1980 + (i % 10),
                    Genres = genres.OrderBy(x => Guid.NewGuid()).Take(10).ToList()
                });
            }

            // query with facet on nested field property genres.genreTitle
            var queryResults = client.Search<Movie>(x => x
                    .From(0)
                    .Size(10)
                    .MatchAll()
                    .FacetTerm(t => t
                        .OnField(f => f.Year)
                        .Size(30))
                    .FacetTerm(t => t
                        .Size(5)
                        .OnField(f => f.Genres.Select(f1 => f1.GenreTitle) )
                    )
            );

            var yearFacetItems = queryResults.FacetItems<FacetItem>(p => p.Year);
            foreach (var item in yearFacetItems)
            {
                var termItem = item as TermItem;
                Console.WriteLine(string.Format("{0} ({1})", termItem.Term, termItem.Count));
            }
            /* Returns:
            1989 (90)
            1988 (90)
            1986 (90)
            1984 (90)
            1983 (90)
            1981 (90)
            1980 (90)
            1987 (89)
            1982 (89)
            1985 (88)
            and it's fine! */

            var genresFacetItems = queryResults.FacetItems<FacetItem>(p => p.Genres.Select(f => f.GenreTitle));
            foreach (var item in genresFacetItems)
            {
                var termItem = item as TermItem;
                Console.WriteLine(string.Format("{0} ({1})", termItem.Term, termItem.Count));
            }
            /* Return soemthing:
            genre (842)
            98 (47)
            51 (30)
            24 (29)
            46 (28)
            and it's BAD! 
            I expect the Genre Title to be listed as 
            string, not as some strange integer */
        }
    }
} 
```

由于方面我得到：

*   流派 (842)
*   98 (47)
*   51 (30)
*   24 (29)
*   46 (28)

虽然我希望得到类似的东西：

*   类型 1 (842)
*   类型 2 (47)
*   类型 3 (30)
*   类型 4 (29)
*   类型 5 (28)

我做错了什么？在哪里检查在 Nest 中使用嵌套字段的正确方法以及它们上的构面？

谢谢你。

**更新 1：**

我发现它与标记器/分析器有关。如果流派名称没有空格或破折号 - 一切正常。我也试过未分析的索引属性

```
[ElasticProperty(Index = FieldIndexOption.not_analyzed)]
public string GenreTitle { get; set; } 
```

但这没有帮助

**更新 2：** 我在之前的索引删除之后添加了流畅的索引映射而不是注释，例如：

```
var settings = new IndexSettings();
            var typeMapping = new TypeMapping("movies");
            var type = new TypeMappingProperty
            {
                Type = "string",
                Index = "not_analyzed",
                Boost = 2.0
                // Many more options available
            };
            typeMapping.Properties = new Dictionary<string, TypeMappingProperty>();
            typeMapping.Properties.Add("genres.genreTitle", type);
            settings.Mappings.Add(typeMapping);
            client.CreateIndex("default_index", settings); 
```

现在不确定注释有什么问题。使用注释进行索引设置是否需要任何其他配置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-11T15:22:52.697

嗨，这里是 NEST 的作者，

如果您使用注释，则需要手动调用

```
var createIndex = client.CreateIndex("default_index", new IndexSettings { });
client.Map<Movie>(); 
```

在第一次调用索引之前。`Nest`不会在每个索引调用上应用映射，因为这会产生过多的开销。如果索引不存在并且不需要`CreateIndex`调用，则旧版本的 elasticsearch 只会创建索引。

由于您想对嵌套类型进行构面，因此必须传递`.Nested("genres")`给构面调用。

您看到的数字实际上是嵌套的 docid :)

这是我修改后的 program.cs 有效：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Nest;

namespace Demo
{
  class Program
  {
    public class Movie
    {
      public int Id { get; set; }
      public string Title { get; set; }
      public string Description { get; set; }
      [ElasticProperty(Type=FieldType.nested)]
      public List<Genre> Genres { get; set; }
      public int Year { get; set; }
    }

    public class Genre
    {
      //        public int Id { get; set; }
      [ElasticProperty(Index = FieldIndexOption.not_analyzed)]
      public string GenreTitle { get; set; }
    }

    static void Main(string[] args)
    {
      var setting = new ConnectionSettings("localhost", 9200);
      setting.SetDefaultIndex("default_index");
      var client = new ElasticClient(setting);

      // delete previous index with documents
      client.DeleteIndex<Movie>();

      var createIndexResult = client.CreateIndex("default_index", new IndexSettings { });
      var mapResult = client.Map<Movie>();

      // put documents to the index
      var genres = new List<Genre>();
      for (var i = 0; i < 100; i++)
        genres.Add(new Genre { GenreTitle = string.Format("Genre {0}", i) });
      for (var i = 0; i < 1000; i++)
      {
        client.Index(new Movie
        {
          Id = i,
          Description = string.Format("Some movie description {0}", i),
          Title = string.Format("Movie Title {0}", i),
          Year = 1980 + (i % 10),
          Genres = genres.OrderBy(x => Guid.NewGuid()).Take(10).ToList()
        });
      }

      // query with facet on nested field property genres.genreTitle
      var queryResults = client.Search<Movie>(x => x
              .From(0)
              .Size(10)
              .MatchAll()
              .FacetTerm(t => t
                  .OnField(f => f.Year)
                  .Size(30))
              .FacetTerm(t => t
                  .Size(5)
                  .OnField(f => f.Genres.Select(f1 => f1.GenreTitle))
                  .Nested("genres")
              )
      );

      var yearFacetItems = queryResults.FacetItems<FacetItem>(p => p.Year);
      foreach (var item in yearFacetItems)
      {
        var termItem = item as TermItem;
        Console.WriteLine(string.Format("{0} ({1})", termItem.Term, termItem.Count));
      }

      var genresFacetItems = queryResults.FacetItems<FacetItem>(p => p.Genres.Select(f => f.GenreTitle));
      foreach (var item in genresFacetItems)
      {
        var termItem = item as TermItem;
        Console.WriteLine(string.Format("{0} ({1})", termItem.Term, termItem.Count));
      }

    }
  }
} 
```

# java - Java XMLStreamReader，当文本包含START_ELEMENT时如何获取元素文本

> ID：13218352
> 
> 赞同：5
> 
> 时间：2012-11-04T12:04:24.427
> 
> 标签：java, xml, parsing, xml-parsing, xmlstreamreader

如果我有一个 XML 元素，例如：

```
<title>this is a title</title> 
```

使用 XMLStreamReader 很容易获得文本。`getElementText()`. 但是，如果我遇到这样的元素，我无法弄清楚如何获取文本：

```
<title>this is a <othertag>title with another</othertag> tag inside of it</title> 
```

我什至不确定这是否是有效的 XML，但它似乎通过了我尝试过的 W3C 验证器。根据[API docs](http://docs.oracle.com/javase/7/docs/api/javax/xml/stream/XMLStreamReader.html#getElementText%28%29)`getElementText()` ，如果您要在`START_ELEMENT`内部遇到另一个事件，则无法使用来获取文本。那么……你**能用**什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:29:14.767

使用[getText](http://docs.oracle.com/javase/7/docs/api/javax/xml/stream/XMLStreamReader.html#getText%28%29)

> getText() 以字符串形式返回解析事件的当前值，它返回 CHARACTERS 事件的字符串值，返回 COMMENT 的值，ENTITY_REFERENCE 的替换值，CDATA 部分的字符串值，字符串值对于 SPACE 事件，或 DTD 内部子集的字符串值。如果已解析 ENTITY_REFERENCE，则任何字符数据都将报告为 CHARACTERS 事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:37:55.460

我认为您需要`<title>`单独解析标签内的元素（`this is a`然后是`<othertag>...</...>`后面的部分`tag inside of it`

# objective-c - 以编程方式在 UIViewController 中的 UINavigationBar 中设置左右标签

> ID：13218353
> 
> 赞同：1
> 
> 时间：2012-11-04T12:04:28.670
> 
> 标签：objective-c, uiviewcontroller, uinavigationcontroller, uinavigationbar, xcode4.3

我正在尝试以编程方式在我的 UIViewController 实现中添加两个标签 - 一个在 UINavigationBar 的左侧，一个在右侧。但是当我运行我的程序时它没有出现。我有一个嵌入在 UINavigationController 中的 UIViewController。我正在使用以下代码：

```
- (void) setTheNavigationbarView{

    CGFloat originX = self.navigationItem.titleView.bounds.origin.x;
    CGFloat originY = self.navigationItem.titleView.bounds.origin.y;
    CGFloat sizeW = self.navigationItem.titleView.bounds.size.width;
    CGFloat sizeH = self.navigationItem.titleView.bounds.size.height;

    UIView * navigationbarView = [[UIView alloc] initWithFrame:CGRectMake(originX + 1, originY + 1, sizeW - 2, sizeH - 2)];
    navigationbarView.backgroundColor = [UIColor clearColor];

    UILabel *labelLeft = [[[UILabel alloc] initWithFrame:CGRectMake(0, 0, (sizeW - 2)/2, (sizeH - 2))] autorelease];
    labelLeft.backgroundColor = [UIColor clearColor];
    labelLeft.font = [UIFont boldSystemFontOfSize:16];
    labelLeft.adjustsFontSizeToFitWidth = NO;
    labelLeft.textAlignment = UITextAlignmentLeft;
    labelLeft.textColor = [UIColor blackColor];
    labelLeft.text = @"first line";
    labelLeft.highlightedTextColor = [UIColor blackColor];
    [navigationbarView addSubview:labelLeft];

    UILabel *labelRight = [[[UILabel alloc] initWithFrame:CGRectMake(((sizeW - 2)/2 + 1), 0, (sizeW - 2)/2, (sizeH - 2))] autorelease];
    labelRight.backgroundColor = [UIColor clearColor];
    labelRight.font = [UIFont boldSystemFontOfSize:16];
    labelRight.adjustsFontSizeToFitWidth = NO;
    labelRight.textAlignment = UITextAlignmentRight;
    labelRight.textColor = [UIColor blackColor];
    labelRight.text = @"second line";
    labelRight.highlightedTextColor = [UIColor blackColor];
    [navigationbarView addSubview:labelRight];

    // set the view as navigationba title view
    self.navigationItem.titleView = navigationbarView;
} 
```

我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:21:55.587

我测试您的代码及其对我的工作，我只会检查您的框架是否不大于您的 navigaitonController 的每个大小。

# c# - 查看 PDF 文件

> ID：13218354
> 
> 赞同：1
> 
> 时间：2012-11-04T12:04:30.710
> 
> 标签：c#, pdf

> **可能重复：**
> [如何使用 C# 呈现 pdf](https://stackoverflow.com/questions/518878/how-to-render-pdfs-using-c-sharp)

如何使用 c#.net 查看 PDF 文件？我只需要查看PDF文件，不必创建或修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:38:44.473

你可以试试这个。 [在 C# 中查看 PDF 文件](http://www.codeproject.com/Articles/37637/View-PDF-files-in-C-using-the-Xpdf-and-muPDF-libra)

它是 C# 并使用/包装了一个开源 C/C++ PDF 库。代码和编译后的二进制文件可以从谷歌下载。[这里！](http://code.google.com/p/pdfviewer-win32/downloads/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:32:56.690

一种快速简便的方法是使用`WebBrowser`控件（需要客户端安装 Adob​​e Reader）并将其导航到要显示的 PDF 文件。

只需使用： `webBrowser.Navigate("file:///" + url);`，您就可以显示 PDF 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T12:46:58.227

可能会帮助你。[请参阅不使用 Acrobat Reader 的用户控制](http://www.codeproject.com/Articles/41933/ASP-NET-PDF-Viewer-User-Control-Without-Acrobat-Re)

# mysql - MySQL查询：根据另一个表中的键检索一些行

> ID：13218355
> 
> 赞同：1
> 
> 时间：2012-11-04T12:04:48.953
> 
> 标签：mysql

我是 MySQL 的新手，所以我将使用一个示例来揭示我的问题......

我有两张桌子：

**表格1：**

```
+----+-----+-----+-----+-----+
| id | a1  | b1  | c1  | d1  |
+----+-----+-----+-----+-----+
|  1 | ... | ... | ... | ... |
|  2 | ... | ... | ... | ... |
|  3 | ... | ... | ... | ... |
|  4 | ... | ... | ... | ... |
|  5 | ... | ... | ... | ... |
|  6 | ... | ... | ... | ... |
+----+-----+-----+-----+-----+ 
```

**表2：**

```
+----+-----+-----+-----+---------------+
| id | a2  | b2  | c2  | table1_row_id |
+----+-----+-----+-----+---------------+
|  1 | ... | ... | ... | ...           |
|  2 | ... | ... | ... | 4             |
|  3 | ... | ... | ... | ...           |
+----+-----+-----+-----+---------------+ 
```

Table2 列`table1_row_id`是 table1 的键。

我应该使用哪种查询来检索`table2.table1_row_id`列中未引用的 table1 数据？

例如，对于上述表，查询应返回如下表：

```
+----+-----+-----+-----+-----+
| id | a1  | b1  | c1  | d1  |
+----+-----+-----+-----+-----+
|  1 | ... | ... | ... | ... |
|  2 | ... | ... | ... | ... |
|  3 | ... | ... | ... | ... |
|  5 | ... | ... | ... | ... |
|  6 | ... | ... | ... | ... |
+----+-----+-----+-----+-----+ 
```

可能这很简单，但我不知道我该怎么做......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:14:26.043

```
SELECT * 
FROM t1 
WHERE 
    `id` NOT IN (SELECT `table1_row_id` 
                 FROM t2 
                 WHERE
                     `table1_row_id` IS NOT NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:09:14.040

```
select t1.a1, t1.b1, t1.c1, t1.d1
from table1 t1
left join table2 t2 on t2.table1_row_id = t1.id
where t2.id is null 
```

# c# - 从查找表中获取特定值？

> ID：13218357
> 
> 赞同：3
> 
> 时间：2012-11-04T12:04:49.197
> 
> 标签：c#, winforms, datagridview, lookup, lookup-tables

这是查找类：

```
public class DistanceAngle
{
    public int distance;
    public int distanceAngle;
    public int valueOfBoth;

    public static void getDisatnceAngleLookup()
    {
        List<DistanceAngle> distanceAngles = new List<DistanceAngle>
                {
                   new DistanceAngle{distance = -5400, distanceAngle = -220, valueOfSideAngle = 320},
                   new DistanceAngle{distance = -5200, distanceAngle = -210, valueOfSideAngle =  290},
                   new DistanceAngle{distance = -5000, distanceAngle = -200, valueOfSideAngle = 200},                                      
                };

        //Distance as Key Value and look for distanceAngle
        Lookup<int, int> lookup = (Lookup<int, int>)distanceAngles.ToLookup((p => p.distance),
                                                                    p => p.distanceAngle);

        int count = lookup.Count;

        // Select a collection of distanceAngles by indexing directly into the Lookup.
        IEnumerable<int> cgroup = lookup[-5400];

        // Output the results.
        Console.WriteLine("\nPackages that have a key of 'C':");
        foreach (int str in cgroup)
            Console.WriteLine(str);
    }
} 
```

从界面上，如果用户`A = 6000 B = 400 C = -5400`通过`B-A`. 如果 C 值等于`distance = -5400`LookUp calss 中的值，则获取该值`distanceAngle = -220` 并从 1 到 5 个单元格填充到 datagrid 特定列。

如果 C 值等于`distance = -5400`并获取值`valueOfSideAngle = 320` 并填充到从 6 到 10 个单元格的数据网格特定列。

这样我可以获得列索引：`datagridview1.Columns["columnName"].Index;`

这是我正在执行计算的函数：

```
private void b_calculate_Click(object sender, EventArgs e)
    {

        int value1;
        int.TryParse(t_LongitudeRadTextBox.Text, NumberStyles.Any,
                         CultureInfo.InvariantCulture.NumberFormat, out value1);

        int value2;
        int.TryParse(t_LongSecondaryRadTextBox.Text, NumberStyles.Any,
                         CultureInfo.InvariantCulture.NumberFormat, out value2);

        var value3 = value2 - value1;

    } 
```

如何从查找表中获取等于`value3` 并填充到 datagridview 的值。任何帮助...！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:36:59.583

首先，您需要来自单个键的两个值（`side angle`和），这需要一些多维集合。任何具有多个值的键都会变得复杂，*只有在需要时才*应使用复杂的数据结构。让我们看看选项：`distance angle``distance`

 *1）你的方法：`Lookup<int, int>`

仅当您有更多具有相同键但不同值的**条目时，以这种方式查找才适用。**换句话说，如果您有：

```
List<DistanceAngle> distanceAngles = new List<DistanceAngle>
{
   new DistanceAngle{distance = -5400, distanceAngle = -220},
   new DistanceAngle{distance = -5400, distanceAngle = -210},
   new DistanceAngle{distance = -5000, distanceAngle = -200}
}; 
```

如果你这样做：

```
var lookup = (Lookup<int, int>)distanceAngles.ToLookup(p => p.distance, 
                                                       p => p.distanceAngle); 
```

您将获得 Count 2 的查找，这意味着键是 5400 和 5000，但键 5400 将有两个值。这些值将位于`IEnumberable<int>`. 因此，您在键 5400 的值集合中有两个值，但在`IEnumerable<int>`键 5000 的值集合中有一个值。这不是您真正要寻找的。

你需要的是类似`Collection<TKey, TValue1, TValue2>`.

2）`List<DistanceAngle>`：

我想说最好的选择是继续使用您拥有的列表并创建一个函数来获取距离`distance angle`和`side angle`距离。由于您在评论中说列表不会太大，您可以创建扩展方法左右，如下所示：

```
public static int GetDistanceAngle(this List<DistanceAngle> distanceAngles, 
                                   int distance)
{
    var d = distanceAngles.FirstOrDefault(d => d.distance == distance);
    if (d == null)
        return 0; //your value
    return d.distanceAngle;
}

public static int GetSideAngle(this List<DistanceAngle> distanceAngles, 
                               int distance)
{
    var d = distanceAngles.FirstOrDefault(d => d.distance == distance);
    if (d == null)
        return 0; //your preferred value
    return d.sideAngle;
} 
```

现在您可以致电：

```
private void b_calculate_Click(object sender, EventArgs e)
{
    int value1;
    int.TryParse(t_LongitudeRadTextBox.Text, NumberStyles.Any,
                     CultureInfo.InvariantCulture.NumberFormat, out value1);

    int value2;
    int.TryParse(t_LongSecondaryRadTextBox.Text, NumberStyles.Any,
                     CultureInfo.InvariantCulture.NumberFormat, out value2);

    var value3 = value2 - value1;

    var sideAngle = distanceAngles.GetSideAngle(value3);
    var distanceAngle = distanceAngles.GetDistanceAngle(value3);
    //etc
} 
```

3）如果您需要快速查找，您可以依靠 Dictionary（如果不会有重复）或 Lookup（如果有），但使用类似`Dictionary<int, Tuple<int, int>>`or的东西`Lookup<int, Tuple<int, int>>`会很麻烦。

4）你可以这样做：`Dictionary<int, DistanceAngle>`或`Lookup<int, DistanceAngle>`

（我将显示字典一，两者都是相同的）。

```
public static Dictionary<int, DistanceAngle> getDisatnceAngleLookup()
{
    List<DistanceAngle> distanceAngles = new List<DistanceAngle>
    {
       new DistanceAngle{distance = -5400, distanceAngle = -220, valueOfSideAngle = 320},
       new DistanceAngle{distance = -5200, distanceAngle = -210, valueOfSideAngle =  290},
       new DistanceAngle{distance = -5000, distanceAngle = -200, valueOfSideAngle = 200},                                      
    };

    //Distance as Key Value and look for distanceAngle
    return distanceAngles.ToDictionary(p => p.distance, p => p);
} 
```

}

现在按键访问很容易：

```
private void b_calculate_Click(object sender, EventArgs e)
{
    int value1;
    int.TryParse(t_LongitudeRadTextBox.Text, NumberStyles.Any,
                     CultureInfo.InvariantCulture.NumberFormat, out value1);

    int value2;
    int.TryParse(t_LongSecondaryRadTextBox.Text, NumberStyles.Any,
                     CultureInfo.InvariantCulture.NumberFormat, out value2);

    var value3 = value2 - value1;

    var sideAngle = distanceAngles[value3].sideAngle;
    var distanceAngle = distanceAngles[value3].distanceAngle;
    //etc
} 
```*

# validation - 无法在 Grails 2.0.4 上进行级联验证

> ID：13218358
> 
> 赞同：0
> 
> 时间：2012-11-04T12:04:57.593
> 
> 标签：validation, grails

我有以下域实体：

```
class Customer {

   // Customer properties...

   static belongsTo [user: User]
}

class User {

   // User properties...

} 
```

当我尝试验证`Customer`包含`User`错误实例的实例时，验证成功。在我的单元测试中：

```
Customer customer = new Customer()
// Set customer properties...

User user = new User()
// Set user properties that contain errors...

customer.user =  user

assertFalse user.validate()     // succeeds
assertFalse customer.validate() // fails! 
```

在运行时应用程序上也观察到相同的行为。我已在调试模式下运行我的应用程序并验证用户的错误属性为空。

我还尝试在我的客户实例上调用 validate(deepValidate:true) （根据文档，无论如何都是默认设置），但没有成功。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:07:18.867

我仍然不知道为什么 grails 默认情况下不会将验证级联到嵌套对象，或者至少为什么它在我的示例中不起作用。

但是，我发现以下解决方法对我有用。在父类中，我定义了以下验证器：

```
class Customer {

  static belongsTo = [user:User]

  static constraints {
    user: nullable: false, validator: {it?.validate()}
  }
} 
```

当在 Customer 实例上调用 validate() 时，关联的 User 也会被验证。

# c# - HttpWebRequest 中似乎没有使用 Cookie

> ID：13218359
> 
> 赞同：1
> 
> 时间：2012-11-04T12:04:59.523
> 
> 标签：c#, cookies, httpwebrequest

在我的问题[Can't login with HttpWebRequests](https://stackoverflow.com/questions/13217647/cant-login-with-httpwebrequests#comment18001304_13217647)之后，我成功登录了。我得到了*“谢谢你登录”*的页面，但在那之后我似乎没有登录。

对我来说，这看起来像是一个 cookie 问题。在萤火虫中，cookie 似乎是 HttpOnly 这可能是个问题吗？我怎样才能`HttpWebRequest`使用cookies？

这是我用来登录的代码：

```
string url = "http://www.warriorforum.com/login.php?do=login";

var bytes = Encoding.Default.GetBytes(@"vb_login_username=USERNAME&cookieuser=1&vb_login_password=&s=&securitytoken=guest&do=login&vb_login_md5password=d9350bad28eee253951d7c5211e50179&vb_login_md5password_utf=d9350bad28eee253951d7c5211e50179");
var container = new CookieContainer();

var request = (HttpWebRequest)(WebRequest.Create(url));
request.CookieContainer = container;
request.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; InfoPath.3)";
request.ContentLength = bytes.Length;
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.KeepAlive = true;
request.AllowAutoRedirect = true;
request.AllowWriteStreamBuffering = true;
request.CookieContainer = container;
using (var requestStream = request.GetRequestStream())
    requestStream.Write(bytes, 0, bytes.Length);

var requestResponse = request.GetResponse();
using (var responsStream = requestResponse.GetResponseStream())
    if (responsStream != null)
    {
        using (var responseReader = new StreamReader(responsStream))
        {
            var responseStreamReader = responseReader.ReadToEnd();
            richTextBox1.Text = responseStreamReader; //this is to read the page source after the request
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:59:02.310

The [`HttpWebRequest.CookieContainer`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.cookiecontainer.aspx)'s manual page says:

> The CookieContainer property provides an instance of the CookieContainer class that contains the cookies associated with this request.

You do:

```
var container = new CookieContainer(); 
```

So on every request, you begin with a new `CookieContainer` without any cookies. Make `container` a class member and only instantiate it once.

# python - 更改窗口时出现“致命的 Python 错误：（pygame 降落伞）分段错误”

> ID：13218362
> 
> 赞同：2
> 
> 时间：2012-11-04T12:05:20.900
> 
> 标签：python, windows, pygame

我目前正在学习 python 并尝试使用 pygame 库制作一个小游戏。我在 Windows Xp 上使用 python 3.2.3 和 pygame 1.9.2a。一切正常，除了一件事：如果我在游戏运行时进入另一个窗口，它会崩溃并且我在控制台中收到一条错误消息：

```
Fatal Python error: (pygame parachute) Segmentation Fault 
```

我从程序中取出的这段代码似乎导致了错误，但是我看不出它有什么问题：

```
import pygame
from pygame.locals import *

pygame.init()

fenetre = pygame.display.set_mode((800, 600))

go = 1

while go:
    for event in pygame.event.get():
        if event.type == QUIT:
            go = 0 
```

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T03:53:04.710

我知道线程很旧，但是当我连续调整 pygame 窗口的大小几秒钟时，我在 linux 中遇到了相同的错误“Fatal Python error: (pygame parachute) Segmentation Fault”。以防万一这对其他人有帮助，事实证明这是由于我在另一个线程中调用 pygame.display.set_mode(screen_size, 0) 调整窗口大小时在一个线程中对窗口表面进行 blitting 引起的。我通过在绘制窗口或调整窗口大小之前获取锁来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T22:25:31.123

我不知道你在最后一行之后是否有任何你没有输入的东西，但如果你没有，你应该用你的最后一行替换

```
pygame.quit()
sys.exit() 
```

作为替代方案，您可以将这两行放在`while`循环之外并保留您拥有的内容。别忘了`import sys`。

# c++ - 当我想删除它时，指针甚至不能设置为 NULL

> ID：13218366
> 
> 赞同：-3
> 
> 时间：2012-11-04T12:06:08.950
> 
> 标签：c++, pointers

void del 函数不能将 obj_slot 内部的类指针设置为 NULL；

```
class test_object {
public:
     char *name;
     int  id;

};

int  current_amount;
test_object  *obj_slot[512];

void add(test_object *obj)
{
  if(current_amount < 512)
  {
    obj->id = current_amount;
    obj_slot[current_amount]  = obj;
    current_amount ++;
  }
  else {
    std::cout<<"max exceeded";
  }

}

void printList(char *status){

  printf("%s\n",status);
  for(int i = 0 ; i <  current_amount ; i ++)
  {
     printf("list object id %i; string is %s,pointer:%p\n",obj_slot[i]->id,obj_slot[i]->name,obj_slot[i]);

  }

}
void del(test_object *obj)
{

  printList("before:");

  if(!obj)
    return;

    printf("deleting %s id %i,pointer %p\n",obj->name,obj->id,obj);

  for(int i =  obj->id ; i <  current_amount - 1 ; i ++)
  {

     obj_slot[i] = obj_slot[i + 1];

  }

   delete obj;
   obj = NULL;
   current_amount--;

   printList("after:");
} 
```

//这是测试程序：

```
 int main(int argc, char **argv) {
            std::cout << "Hello, world!" << std::endl;
            for(int i = 0 ; i < 5; i ++)
            {
               test_object *test  = new  test_object();
               char  a[500];
               sprintf(a,"random_test_%i",i);
               test->name = (char *)malloc(strlen(a) + 1);
               strcpy(test->name,a);
              add(test);
            }
            test_object *test  = new  test_object();
            test->name = "random_test";
           add(test);
           del(test); 
           printf("test pointer after delete is %p\n",test); 
            return 0;
        } 
```

我已将 del 函数中要删除的指针地址设置为 NULL；但控制台输出仍然是这样的：

之前：列出对象 id 0；字符串是random_test_0，指针：0x706010

列出对象 ID 1；字符串是random_test_1，指针：0x706050

列出对象 ID 2；字符串是random_test_2，指针：0x706090

列出对象 ID 3；字符串是random_test_3，指针：0x7060d0

列出对象 ID 4；字符串是random_test_4，指针：0x706110

列出对象 ID 5；字符串是随机测试，指针：0x706150

删除 random_test id 5，指针 0x706150

之后：列出对象 id 0；字符串是random_test_0，指针：0x706010

列出对象 ID 1；字符串是random_test_1，指针：0x706050

列出对象 ID 2；字符串是random_test_2，指针：0x706090

列出对象 ID 3；字符串是random_test_3，指针：0x7060d0

列出对象 ID 4；字符串是random_test_4，指针：0x706110

删除后的测试指针为0x706150

*** 正常退出 ***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:10:38.280

这是因为在`del`函数中，变量`obj`是*局部*变量，对它的所有更改在该函数之外都是不可见的。如果要修改它，则应将其作为参考传递：

```
void del(test_object *&obj)
{
    ...
} 
```

# rack - 使用 Rack::Auth::Basic 保护所有路由

> ID：13218369
> 
> 赞同：1
> 
> 时间：2012-11-04T12:06:28.310
> 
> 标签：rack, http-authentication

我有一个简单的管理应用程序，我希望它受基本 HTTP 身份验证的保护。这是我在 config.ru 中的内容。这行不通。我错过了什么？

```
use Rack::Auth::Basic do |user, pass|
  pass == ENV['ADMIN_PASS']
end

run Rack::URLMap.new(
  '/' => Rack::File.new('./public/index.html')
  '/resque' => Resque::Server.new,
  '/mongo' => Genghis::Server.new
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:44:44.787

Rack::Auth::Basic 需要一个管理员/密码数组，因此您可以执行以下操作：

```
use Rack::Auth::Basic, "Restricted Area" do |username, password|
    [username, password] == [ 'admin', ENV['ADMIN_PASS'] ]
end 
```

# asp.net-mvc - ASP.NET MVC 中的 Web.config 设置类

> ID：13218377
> 
> 赞同：1
> 
> 时间：2012-11-04T12:07:59.740
> 
> 标签：asp.net-mvc, dependency-injection, web-config

在 ASP.NET Web 窗体上，我曾经有一个名为的实用程序**静态类**`WebConfigSettings`，其中我从我的 Web.config 文件中读取了所有应用程序设置（例如`WebConfigSettings.DebugModeEnabled`）。
在 MVC 上这是一个不好的做法吗？我应该更喜欢使用非静态类并使用依赖注入将其注入我的控制器吗？如果是，我应该把财产放在控制器的哪里？我在[这篇文章](https://stackoverflow.com/questions/6119206/what-are-good-candidates-for-base-controller-class-in-asp-net-mvc)中读到我不应该使用基本控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:29:18.177

静态类的问题在于，您将控制器与 .NET 配置系统耦合在一起，这使得它们更难以单独进行单元测试。您可以拥有一个`IConfiguration`包含整个应用程序所需的必要属性的接口，以及从配置文件读取属性值的该接口的实现。现在剩下的就是配置你最喜欢的 DI 框架，将这个接口的正确实现注入到你的控制器构造函数中。在您的单元测试中，您将能够模拟此界面。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-04T12:49:49.700

这是我在 MVC 中使用的方法。我有一个具有多个属性的静态 AppSettings 类——它非常灵活，因为有些是从 Web.config、数据库/缓存中读取的，甚至是计算属性。

这可以在控制器之外使用——可能在模型或视图中。

# ruby-on-rails - 获取哈希的内容

> ID：13218378
> 
> 赞同：0
> 
> 时间：2012-11-04T12:08:16.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash, ruby-on-rails-3.1

```
{"test_url"=>"http://test.com/123.jpg"} 
```

是我的输出

```
<% @results.each do |t| %>
    <%= t.image.extract!("test_url") %>
<% end %> 
```

我怎样才能得到 test_url 的内容？所以[http://test.com/123.jpg](http://test.com/123.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:20:37.757

＃提炼！总是从哈希中删除并返回给定键的键/值对。

要删除并仅返回值：

```
<%= t.image.delete("test_url") %> 
```

或者，如果您只想获取值：

```
<%= t.image["test_url"] %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:22:01.993

```
<% @results.each do |t| %>
    <%= t.image["test_url"] %>
<% end %> 
```

# c# - 在填充 GridView 时将数据类型 varchar 转换为浮动时出错

> ID：13218379
> 
> 赞同：1
> 
> 时间：2012-11-04T12:08:15.953
> 
> 标签：c#, asp.net

我根据放入文本框中的数字数据并单击按钮，使用以下代码填充 GridView。但它给出了以下错误。将数据类型 varchar 转换为浮点数时出错。由于我的数据库列“matri_perct”的数据类型为“float”。

```
protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            con = new SqlConnection(ConfigurationManager.ConnectionStrings["SQL Connection String"].ConnectionString);con.Open();
        com = new SqlCommand("SELECT * FROM stdtable WHERE matri_perct >  @Percent", con);
        com.Parameters.AddWithValue("Percent", float.Parse(txtPercent.Text));
        com.ExecuteNonQuery();
            SqlDataAdapter dataadapter = new SqlDataAdapter();
            DataSet ds = new DataSet();
            dataadapter.Fill(ds, "Data");
            GridView1.DataSource = ds;
            GridView1.DataMember = "Data";
            con.Close();
        }
        catch (System.Exception err)
        {
            Label1.Text = err.Message.ToString();
        }
    } 
```

我的 GridView .aspx 代码声明为

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" AutoGenerateColumns="False" DataKeyNames="univ_regno" DataSourceID="" EnableModelValidation="True">
    <Columns>
        <asp:BoundField DataField="school" HeaderText="School" 
            SortExpression="school" />
        <asp:BoundField DataField="univ_regno" HeaderText="Univ R.No." ReadOnly="True" 
            SortExpression="univ_regno" />
        <asp:BoundField DataField="colge_rollno" HeaderText="Coll. R.No." 
            SortExpression="colge_rollno" />
        <asp:BoundField DataField="branch" HeaderText="Branch" 
            SortExpression="branch" />
        <asp:BoundField DataField="sem" HeaderText="Sem" SortExpression="sem" />
        <asp:BoundField DataField="name" HeaderText="Name" SortExpression="name" />
        <asp:BoundField DataField="f_name" HeaderText="F.Name" 
            SortExpression="f_name" />
        <asp:BoundField DataField="date_birth" HeaderText="DOB" 
            SortExpression="date_birth" />

        <asp:BoundField DataField="mob" HeaderText="Mobile" 
            SortExpression="mob" />
        <asp:BoundField DataField="email" HeaderText="E-mail" SortExpression="email" />
        <asp:BoundField DataField="matri_perct" HeaderText="Matric %" 
            SortExpression="matri_perct" />
        <asp:BoundField DataField="intermed_perct" HeaderText="Intermediate %" 
            SortExpression="intermed_perct" />
        <asp:BoundField DataField="grad_perct" HeaderText="UG %" 
            SortExpression="grad_perct" />
        <asp:BoundField DataField="post_grad_perct" HeaderText="PG %" 
            SortExpression="post_grad_perct" />
        <asp:BoundField DataField="other_perct" HeaderText="Other %" 
            SortExpression="other_perct" />
        <asp:BoundField DataField="no_backlogs" HeaderText="Backlogs" 
            SortExpression="no_backlogs" />
        <asp:BoundField DataField="Password" HeaderText="Password" 
            SortExpression="Password" />
    </Columns>
</asp:GridView>
  <asp:SqlDataSource ID="studentprofile" runat="server" 
        ConnectionString="<%$ ConnectionStrings:SQL Connection String %>" 

        SelectCommand="SELECT DISTINCT [school], [univ_regno], [colge_rollno], [branch], [sem], [name], [f_name], [date_birth], [cores_add], [mob], [email], [matri_perct], [intermed_perct], [grad_perct], [post_grad_perct], [other_perct], [no_backlogs], [Password] FROM [stdtable] ORDER BY [branch], [univ_regno]">
    </asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:14:42.747

首先，养成使用[参数](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)构造 SQL 语句的习惯，就像在 rene 的回答中一样，而不是通过连接。通过这种方式，您将避免很多问题（例如，SQL 注入攻击、带有转义字符的字符串会破坏 SQL 语句）。

其次，如果`matri_perct`是浮点数，正确的语法是：

```
com = new SqlCommand("SELECT * FROM stdtable WHERE matri_perct > " + 
    float.Parse(txtPercent.Text) + ", con); 
```

没有单引号或百分号。

正如我所说，**不要将其直接复制到您的生产代码中！**，而是将用户输入转换为参数。考虑如果[用户](http://xkcd.com/327/)输入会发生什么

```
0); DROP TABLE Students; -- 
```

进入你的文本框。

**编辑**

这段代码让我有点困惑：

```
com.ExecuteNonQuery();  // looks like you're running the SELECT statement then discarding the result
SqlDataAdapter dataadapter = new SqlDataAdapter();
DataSet ds = new DataSet();
dataadapter.Fill(ds, "Data");  // I don't see how this gets the data from your query, above.
GridView1.DataSource = ds;
GridView1.DataMember = "Data";  // see my change, below. 
```

这个怎么样（保持你的前三行不变）：

```
SqlDataReader reader = com.ExecuteReader();  // execute SELECT statement, store result in data reader
SqlDataAdapter adapter = new SqlDataAdapter();
adapter.Fill( reader );
GridView1.DataSource = adapter;
GridView1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:17:01.890

让 sqlclient 完成繁重的工作：

```
 com = new SqlCommand("SELECT * FROM stdtable WHERE matri_perct >  @percent", con);
    com.Parameters.AddWithValue("percent", float.Parse(txtPercent.Text));
    com.ExecuteNonQuery(); 
```

或者，如果您想更具体地了解[sqlparameter 类型](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)：

```
com = new SqlCommand("SELECT * FROM stdtable WHERE matri_perct >  @percent", con);
var percentParam = new SqlParameter("percent", SqlDbType.Float);
percentParam.Value = txtPercent.Text;
com.Parameters.Add(percentParam); 
```

最重要的是：始终使用参数（如 Bob 所指出的）而不是字符串连接，否则您会在此过程中遇到麻烦。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T15:00:28.917

我在@Bob Kaufman 和@rene 的帮助下解决了我的问题我的问题的完整解决方案如下：

```
protected void Button1_Click(object sender, EventArgs e)
{
    try
    {

        con = new SqlConnection(ConfigurationManager.ConnectionStrings["SQL Connection String"].ConnectionString);
        con.Open();
        com = new SqlCommand("SELECT * FROM stdtable WHERE matri_perct >  @Percent", con);
        com.Parameters.AddWithValue("@Percent", float.Parse(txtPercent.Text));
        SqlDataReader reader = com.ExecuteReader();  // execute SELECT statement, store result in data reader
        GridView1.DataSource = reader;
        GridView1.DataBind();
        con.Close();
         }
    catch (System.Exception err)
    {
        Label1.Text = err.Message.ToString();
    }
} 
```

然后我改变了 AllowPaging=false

有用 ;）

# java - 如何将信息从 JFrame 传输到实例化它的方法？

> ID：13218380
> 
> 赞同：0
> 
> 时间：2012-11-04T12:08:19.833
> 
> 标签：java, swing, scope, jframe, jdialog

我正在编写一个应用程序（生命游戏的实现）并希望它按如下方式工作：

1.  弹出一个 JFrame（不是 JDialog！），用户可以在其中选择一些设置。
2.  按此框架上的“开始”按钮将设置存储在某处，将其关闭，然后打开 Game of Life 框架。

实现这一目标的最佳方法是什么？

我目前的方法是从包含 main 方法的单独类控制应用程序，该方法应该存储设置并处理两个 JFrame 的显示/隐藏，但我遇到了一些问题：我想要“开始”的侦听器" - 设置框架中的按钮向主方法发出信号，表明该存储所选设置，隐藏此框架并显示 GoL 框架。但是，我不知道如何将此信息传达给主方法，因为我无法从“设置”框架内访问其类的范围。我确实可以从 main 方法访问“设置”框架，因此获取设置并关闭框架不是问题，问题是知道*何时*执行此操作。

```
//In the class "SettingsFrame"
startButton.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        //WHAT TO DO HERE?
    }
}); 
```

我有点初学者，所以我尝试的方法可能存在根本性错误。在不使用 JDialog 的情况下实现上述功能的最优雅的方法是什么？

（我环顾四周，发现这个答案[在 JFrames 之间传递值](https://stackoverflow.com/questions/7017063/passing-values-between-jframes/7017147#7017147)。但是，附加的示例使用了一个 JDialog，我猜它会自动向调用方法发出信号，表明它的“确定”按钮已被按下。我很想知道如何自己实现这一点）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:22:18.380

您需要从 main 方法注册一个回调到设置框架。当按下开始按钮时，动作监听器应该关闭窗口，并调用回调，传递在设置框架中输入的设置。然后回调方法将打开生命框架游戏。

# iphone - 模仿 UIView 的 UITableViewCell 选择行为

> ID：13218381
> 
> 赞同：2
> 
> 时间：2012-11-04T12:08:42.113
> 
> 标签：iphone, ios

我有一个分页 UIScrollView。滚动视图中的每个“页面”都是一个 UIView（显然），可以由其他子视图等组成。“页面”作为一个整体或页面内的某些子视图必须作为“可选区域” "，所以当用户“选择”这个区域时，应该触发一个事件（即委托事件）。

问题是这需要在逻辑上表现得像 UITableView/UITableViewCell 选择！所以一个简单的点击手势识别器不是我想要的。我需要能够识别/发送`UIControlEventTouchUpInisde`事件的东西。这显然使我想到了一种可能的解决方案，即子类化`UIControl`和处理/识别里面的东西`touchesEnded:withEvent`。但这意味着我的“可选”元素（即视图）必须是`UIControl`whih 的子类，就我的“页面”设计而言不再那么通用了！

那么这是我上面描述的最可行的方法还是有更通用的方法？我现在只对确定 UITableViewCell 之类的“选择”的逻辑行为感兴趣。在选择（和取消选择）时正确处理视觉部分应该是轻而易举的事。

任何帮助表示赞赏。提前谢谢你们！

# iphone - 使用 SDWebImage 为 imageview 加载图像，如何获取图像的宽度？

> ID：13218384
> 
> 赞同：0
> 
> 时间：2012-11-04T12:08:48.547
> 
> 标签：iphone, ios, sdwebimage

当我使用 setImageWithURL 加载在线图像时，我得到了 0.000000，但是当我加载本地图像时，我得到了正确的宽度。

```
NSURL * url1=[NSURL URLWithString:@"http://img.hb.aicdn.com/7f46b5eb65320f18f797a4a26ebe9ba328b547832f7b3-KYR0Xn_fw192"];
UIImageView * img2=[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 192,400)];
[img2 setImageWithURL:url1];
//[img2 setImage:[UIImage imageNamed:@"0.gif"]];
//load local image

[self.view addSubview:img2];
CGFloat height1=img2.image.size.width;
NSLog(@"%f",height1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:18:00.377

我知道这是一个非常古老的问题，但不久前我遇到了同样的问题，并认为我的回答可以帮助遇到同样问题的人。

要获取图像宽度，您应该使用 SDWebImageManager 独立下载图像。我很确定在他们的维基页面中有解释。

这是执行任务的示例代码：

```
-(UIImage *)downloadImageAsync:(NSString *)imageKey
{
    NSLog(@"image key : %@",imageKey);
    __block UIImage *returnedImage;
    SDWebImageManager *manager = [SDWebImageManager sharedManager];
    [manager downloadWithURL:[NSURL URLWithString:imageKey] options:0 progress:^(NSUInteger receivedSize, long long expectedSize){
        NSLog(@"received size %d expected size %lld", receivedSize, expectedSize);

    }completed:^(UIImage *image, NSError *error, SDImageCacheType cacheType,BOOL finished){
        if(image && finished) {
            returnedImage = image;
        }
    }];

    if(returnedImage == nil) {
        NSLog(@"Returned Image Nil");
    }
    return returnedImage;
} 
```

所以当 UIImage 完成下载后，你可以得到它的宽度和高度。希望这可以帮助。

干杯。

# android - 从 Dialog 类打开 url

> ID：13218386
> 
> 赞同：1
> 
> 时间：2012-11-04T12:08:50.180
> 
> 标签：android, nullpointerexception

我尝试从对话框类中打开一个 url。我使用以下代码进行了尝试，但得到了 NullPointerException。我怎样才能做到这一点？

我从我的活动中开始对话框：

```
AboutDialog about = new AboutDialog(this);
about.setTitle(R.string.Text_about);
about.show(); 
```

这是对话框类：

```
public class AboutDialog extends Dialog implements OnClickListener{
private Button button_ok;
.
.
.

}

public void onClick(View arg0) {
            myActivity activity = new myActivity();
            String url = "http://www.test.com";
            Intent i = new Intent(Intent.ACTION_VIEW);
            i.setData(Uri.parse(url));
            activity.startActivity(i); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:33:35.863

您正在 onCick 方法中创建一个新的 Activity。不应手动创建活动。它们是从系统设置的。我猜想活动设置不正确，这会导致 NullPointerException。

[您应该通过getContext](http://developer.android.com/reference/android/app/Dialog.html#getContext%28%29)获得有效的上下文。利用

```
getContext().startActivity(i); 
```

代替

```
activity.startActivity(i); 
```

# vectorization - _mm_broadcast_ss 是否比 _mm_set1_ps 快？

> ID：13218391
> 
> 赞同：8
> 
> 时间：2012-11-04T12:09:28.843
> 
> 标签：vectorization, avx

这是代码吗

```
float a = ...;
__m256 b = _mm_broadcast_ss(&a) 
```

总是比这段代码快

```
float a = ...;
_mm_set1_ps(a) 
```

?

如果`a`定义为`static const float a = ...`而不是`float a = ...`呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-10-27T21:10:26.600

_mm_broadcast_ss 具有架构强加的弱点，这些弱点在很大程度上被*mm* SSE API 隐藏。最重要的区别如下：

*   _mm_broadcast_ss 仅限于从内存中加载值。

这意味着如果您在源不在内存中的情况下显式使用 _mm_broadcast_ss，那么结果可能会比使用 _mm_set1_ps 的效率低。这种情况通常发生在加载立即值（常量）或使用最近计算的结果时。在这些情况下，编译器会将结果映射到寄存器。要将值用于广播，编译器必须将值转储回内存。或者，可以使用 pshufd 直接从寄存器中弹出。

_mm_set1_ps 是实现定义的，而不是映射到特定的底层 cpu 操作（指令）。这意味着它可能会使用几个 SSE 指令之一来执行 splat。启用了 AVX 支持的智能编译器绝对应该在适当的时候在内部使用 vbroadcastss，但这取决于编译器优化器的 AVX 实现状态。

如果您非常确信您是从内存加载的——例如迭代数据数组——那么直接使用广播就可以了。但如果有任何疑问，我建议坚持使用 _mm_set1_ps。

在 a 的特定情况下`static const float`，您绝对希望避免使用 _mm_broadcast_ss()。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-04T19:49:09.873

如果您以 AVX 指令集为目标，gcc 将使用 VBROADCASTSS 来实现 _mm_set1_ps 内在函数。然而，Clang 将使用两条指令（VMOVSS + VPSHUFD）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-04T13:31:54.537

mm_broadcast_ss 可能比 mm_set1_ps 快。前者转换为单条指令 (VBROADCASTSS)，而后者则使用多条指令进行仿真（可能是 MOVSS，然后是 shuffle）。但是，mm_broadcast_ss 需要 AVX 指令集，而 mm_set1_ps 只需要 SSE。

# php - PHP - 检查单词的拼写：如何安装/配置 aspell 库

> ID：13218392
> 
> 赞同：0
> 
> 时间：2012-11-04T12:09:29.330
> 
> 标签：php

在 Windows7 + WAMP-2.211 + PHP-5.3.0 我想安装**aspell**所以我去了[http://www.php.net/manual/en/pspell.installation.php](http://www.php.net/manual/en/pspell.installation.php)并下载了库但我不明白如何我可以安装/配置这个库以及如何使用吗？

我也试过了，只是启用**了 php_pspell**扩展并遵循[http://www.php.net/manual/en/function.pspell-check.php](http://www.php.net/manual/en/function.pspell-check.php)示例但是

> 致命错误：在第 2 行的 D:\wamp\www\spell\index.php 中调用未定义函数 pspell_new()

发生错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:54:05.407

如果你已经有 PEAR/PECL，你可以尝试安装 Enchant [http://pecl.php.net/package/enchant](http://pecl.php.net/package/enchant)（我自己没用过，抱歉）

# c++ - 如何获得 OpenGL 调用的智能感知？

> ID：13218393
> 
> 赞同：1
> 
> 时间：2012-11-04T12:09:51.413
> 
> 标签：c++, visual-studio-2010, opengl

我想在 Visual Studio 2010 中使用 C++ 进行类似的操作： [http ://www.opentk.com/node/689](http://www.opentk.com/node/689)

如果没有办法得到这个，是否至少有一个实时 API 浏览器？不断地将函数名称复制粘贴到[http://www.opengl.org/sdk/docs/man3/](http://www.opengl.org/sdk/docs/man3/)会很累。

# c# - 通过随机生成的线条分离纹理

> ID：13218394
> 
> 赞同：1
> 
> 时间：2012-11-04T12:10:03.957
> 
> 标签：c#, xna, textures

我有一个问题，目前我似乎无法找到一个比我目前的想法更有效的解决方案。

我正在用 XNA 制作一个小游戏，它将有一个随机生成的移动路径，但我不知道如何分离线条上方和下方的纹理，因为线条是随机生成的。我希望这张图片可以解释这个问题：

![在此处输入图像描述](../Images/2b4cb72d6ffb638ae85aee9f34981ed5.png)

所以这些行是随机添加的。我自己的想法是创建许多具有不同高度的矩形并将它们彼此相邻放置，但我认为这有点低效而且它也迫使我将线足够粗以使矩形可以更宽一点不仅仅是 1-2 像素，否则您可能会在线条附近看到一些“空”点。

如果有任何不清楚的地方，请随时提问，我会将其添加到问题中，但我认为我的问题应该足够清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:48:29.003

您可以**用透明像素****替换**不需要的像素：

 **```
//extract pixel data from texture
Texture2D topTexture = ...
Color[] topTextureData = new Color[topTexture.Width * topTexture.Height];
topTexture.GetData<Color>(topTextureData);

for(int x = 0; x < topTexture.Width; x++)
{
    //depending on how you represent lines, set transparent all the pixels at and below line
    //basically, for each x dimension, you find where the line is - you have to
    //write the method for getting this y, as I don't know how you represent lines
    int lineY = GetLineYAtThisX(x);

    //all the pixels at (and below) the line are set transparent
    for(int y = lineY; y < topTexture.Height; y++)
    {
        topTextureData[x + y * topTexture.Width] = Color.Transparent;
    }  
}

//save this data into another texture, so you don't ruin the original one.
Texture2D maskedTopTexture = new Texture2D(GraphicsDevice, topTexture.Width, topTexture.Height);
maskedTopTexture.SetData<Color>(topTextureData); 
```

您甚至不必为底部的一个这样做，只需在其上方绘制顶部的一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T14:06:24.527

这个问题的一个解决方案是创建一个遮罩纹理，它会遮盖所选区域之外的纹理。

[狂技能来袭！](http://i.stack.imgur.com/BfGke.png)

黑色区域不会被绘制。对其他纹理做相反的事情，你会得到你想要的。

我不确定如何使用 spritebatch，但您的问题的一般解决方案可能使用掩码。**

# asp.net - 通过电子邮件发送视频

> ID：13218396
> 
> 赞同：0
> 
> 时间：2012-11-04T12:10:41.790
> 
> 标签：asp.net, email, html-email

是否可以将视频作为 html 模板的一部分发送？

我的意思是我想将`<object />`标签添加到电子邮件正文，正如预期的那样它不起作用。

视频未显示。有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T05:21:40.853

视频仅适用于 Apple Mail - [http://www.campaignmonitor.com/resources/will-it-work/video/](http://www.campaignmonitor.com/resources/will-it-work/video/)

# autoit - 如何在编辑框中输出这个函数 [AutoIt Gui]

> ID：13218397
> 
> 赞同：0
> 
> 时间：2012-11-04T12:10:41.447
> 
> 标签：autoit

我发现这段代码可以检索 IP 的公共信息，但我希望将此输出写入到我的 Gui 的 EditBox 中。

如何做到这一点。

如果您在 SCITE 编辑器中运行，这是将信息放在 SCIITE 控制台中的代码。我想要的是单击一个按钮将信息放在我的 GUI 上的编辑框中。

```
 _RetrievePublicInfo()

Func _RetrievePublicInfo($iRefresh = 0)
    ConsoleWrite(@CRLF & "IP: " & BinaryToString(InetRead('http://api.externalip.net/ip/', $iRefresh), 4) & @CRLF & @CRLF & _
    "Hostname: " & BinaryToString(InetRead('http://api.externalip.net/hostname/', $iRefresh), 4) & @CRLF)
EndFunc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T19:31:05.967

为什么要在已经内置的情况下使用外部函数`AutoIt` `UDF`？

```
Use _GetIP()

#include <GUIConstantsEx.au3>
#include <GuiIPAddress.au3>
#include <Inet.au3>

Local $hgui, $hIPAddress

    $hgui = GUICreate("IP Address Control Clear Example", 150, 100)

    $hIPAddress = _GUICtrlIpAddress_Create($hgui, 10, 10)
    _GUICtrlIpAddress_Set($hIPAddress, "0.0.0.0")

    $Button = GUICtrlCreateButton("Get my IP!", 20, 50, 100)

    GUISetState(@SW_SHOW)

    ; Wait for user to close GUI
    Do 
     $msg = GUIGetMsg()
        Select
            Case $msg = $GUI_EVENT_CLOSE
                ExitLoop
            Case $msg =  $Button
                Local $PublicIP = _GetIP ()
                _GUICtrlIpAddress_ClearAddress( $hIPAddress)
                _GUICtrlIpAddress_Set($hIPAddress, $PublicIP)

        EndSelect 
    Until GUIGetMsg() = $GUI_EVENT_CLOSE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T00:36:00.593

```
#include <EditConstants.au3>
#include <GUIConstantsEx.au3>
#include <WindowsConstants.au3>

Func _RetrievePublicInfo($iRefresh = 0)
   GUICtrlSetData($Edit , @CRLF & "IP: " &    BinaryToString(InetRead('http://api.externalip.net/ip/', $iRefresh), 4) & @CRLF & @CRLF & _
"Hostname: " & BinaryToString(InetRead('http://api.externalip.net/hostname/', $iRefresh), 4) & @CRLF)
EndFunc

$hGUI = GUICreate("Test", 370, 240, 192, 124)
$Edit = GUICtrlCreateEdit("", 0, 0, 313, 193, BitOR($GUI_SS_DEFAULT_EDIT,$ES_READONLY))
$button = GUICtrlCreateButton("Get ip",310,180,50,30)

GUISetState(@SW_SHOW)

While 1
   $nMsg = GUIGetMsg()
   Switch $nMsg
  Case $button
    _RetrievePublicInfo()
      Case $GUI_EVENT_CLOSE
        Exit
      Case $Edit
   EndSwitch
WEnd 
```

# c# - 如何将编码的 Web 性能测试添加到 Visual Studio 2012 中的负载测试

> ID：13218401
> 
> 赞同：1
> 
> 时间：2012-11-04T12:11:22.320
> 
> 标签：c#, asp.net, web-services, testing, visual-studio-2012

我写了一个`webtest`调用带有查询字符串的网络服务。

我想创建一个负载测试，它将在每个请求（来自预定义的值池）上使用不同的查询字符串执行这个 webtest。

我没有设法用regualt`webtest`文件做到这一点（有人知道怎么做吗？）

所以我将其转换`webtest`为`coded WPT`.

我编辑了代码，它看起来像这样：

公共类 KnownCtidsTest : WebTest {

```
 public List<string> KnownCtids { get; set; }

    public KnownCtidsTest()
    {
        this.PreAuthenticate = true;

        KnownCtids = new List<string>()
        {
            "ctelad1", "ctelad2", "ctelad3"
        };
    }

    public override IEnumerator<WebTestRequest> GetRequestEnumerator()
    {
        WebTestRequest request1 = new WebTestRequest("http://clientservice.mam.qasite-services.com/settings");

        request1.Method = "POST";

        var random = new Random();

        int i = random.Next(0,KnownCtids.Count);

        var ctid = KnownCtids[i];

        request1.QueryStringParameters.Add("ctid", ctid, false, false);
        StringHttpBody request1Body = new StringHttpBody();
        request1Body.ContentType = "";
        request1Body.InsertByteOrderMark = false;
        request1Body.BodyString = "";
        request1.Body = request1Body;
        yield return request1;
        request1 = null;
    }
} 
```

现在，我尝试将此编码测试添加到负载测试（在 下`test mixture`），但它没有显示`coded test`唯一的`web test`.

我怎样才能在 loadtest 中运行我的自定义编码测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T16:52:58.543

我遇到了同样的问题，当我转向其他问题时，我想稍后再谈。自定义提取规则使它点击我做错了什么。在您尝试将编码的 Web 测试添加到负载测试或另一个 Web 性能测试之前，请编译项目。这将生成 UI 在生成列表时关闭的 dll。

# android - Intellij IDEA：SherlockActivity 的仪器测试中的 NoClassDefError，但从 Maven 命令行工作

> ID：13218407
> 
> 赞同：0
> 
> 时间：2012-11-04T12:12:36.123
> 
> 标签：android, intellij-idea, actionbarsherlock, android-testing

我正在尝试为`Activity`which extends设置一个仪器测试`SherlockActivity`，它编译（并运行）但失败并出现`NoClassDefError`异常：

```
junit.framework.AssertionFailedError: Exception in constructor: testPreconditions     (java.lang.NoClassDefFoundError: com.dgti.ds.activities.ChooseLocationActivity
at com.dgti.ds.test.activities.ChooseLocationActivityTest.<init>(ChooseLocationActivityTest.java:11)
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
at junit.runner.BaseTestRunner.getTest(BaseTestRunner.java:103)
at android.test.AndroidTestRunner.getTest(AndroidTestRunner.java:127)
at android.test.AndroidTestRunner.setTestClassName(AndroidTestRunner.java:55)
at android.test.suitebuilder.TestSuiteBuilder.addTestClassByName(TestSuiteBuilder.java:81)
at android.test.InstrumentationTestRunner.parseTestClass(InstrumentationTestRunner.java:418)
at android.test.InstrumentationTestRunner.parseTestClasses(InstrumentationTestRunner.java:399)
at android.test.InstrumentationTestRunner.onCreate(InstrumentationTestRunner.java:364)
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3246)
at android.app.ActivityThread.access$2200(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method)
)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448) 
```

我正在使用 Maven 并`ActionBarSherlock`作为测试项目的 pom.xml 中的依赖项：

```
<dependency>
  <groupId>com.actionbarsherlock</groupId>
  <artifactId>actionbarsherlock</artifactId>
  <version>4.2.0</version>
  <scope>provided</scope>
  <type>apklib</type>
</dependency> 
```

这是测试用例：

```
public class ChooseLocationActivityTest extends ActivityInstrumentationTestCase2<ChooseLocationActivity> {

    public ChooseLocationActivityTest() {
        this(ChooseLocationActivity.class);
    }

    public ChooseLocationActivityTest(Class<ChooseLocationActivity> activityClass) {
        super(activityClass);
    }

    public void setUp() throws Exception {

    }

    public void tearDown() throws Exception {

    }

    public void testPreconditions() throws Exception {

    }
} 
```

值得一提的是，如果我将活动更改为非 Sherlock 活动，我可以成功运行其他测试和这个测试。

**此外，从 maven 命令行构建和运行测试项目可以工作，并且测试正在模拟器上运行并通过！**

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T14:52:34.513

显然问题出在测试项目的依赖项列表中标记为“编译”的 ActioBarSherlock 依赖项。（在 pom.xml 中其设置为“提供”）

将其更改为“提供”解决了该问题。

# html - Fill a block element with left most floating child (float: right)

> ID：13218409
> 
> 赞同：0
> 
> 时间：2012-11-04T12:12:42.300
> 
> 标签：html, css, fill-parent

I need to fill a `<LI>` width element with his most left child (out of three childs). Those three childs are formated with `display: inline-block; float: right`.

what i achieved so far:

![enter image description here](../Images/ab309ca849d8480f51baee9d355d8f3e.png)

what i expected to achieve:

![enter image description here](../Images/dd1efa02a74ffa02843e88ce956010e9.png)

It's obviously that `width: 66%` don't help anyway. Also a 100% width will not work.

I found this [question](https://stackoverflow.com/questions/6527824/dithering-child-elements-dimensions-to-fill-a-parent-element) on stackoverflow, but I need something made in pure CSS, no JS, jQuery, etc. Also, using a table is not a solution for me.

If the HTML code can help in this matter:

```
<style type="text/css">
    div {
        width: 200px;
        border: 1px solid red;
    }
    ul {
        padding: 0px 0px 0px 20px;
        margin: 0px;
    }
    li {
        display: block;
        white-space: nowrap;
        list-style-type: none;
        display: block;
        height: 20px;
        padding: 0px;
        margin: 1px;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;

        border-color: #D5AB55 #C93 #C93 #D5AB55;
        background-color: #F3CE00;
    }

    .name {
        display: inline-block;
        float: right;
        height: 18px;
        width: 65%;
        margin: 0px;
        padding: 0px 2px;
        border: 1px solid grey;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
    }
    .save, .cancel {
        display: inline-block;
        float: right;
        height: 20px;
        width: 20px;
        margin: 0px 0px 0px 1px;
        padding: 0px;
        border: 1px solid grey;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        border-radius: 3px;
    }
    .save   { background: url(../images/confirm.png) no-repeat center center; }
    .cancel { background: url(../images/cancel.png) no-repeat center center; }
</style>

<div>
    <ul>
        <li>
            <input type="button" value="" class="cancel">
            <input type="button" value="" class="save">
            <input type="text" value="Big list item" class="name">
        </li>
        <ul>
            <li id="category_2" id_category="2">
                <input type="button" value="" class="cancel">
                <input type="button" value="" class="save">
                <input type="text" value="Medium list item" class="name">
            </li>
            <ul>
                <li>
                    <input type="button" value="" class="cancel">
                    <input type="button" value="" class="save">
                    <input type="text" value="1st small item" class="name">
                </li>
                <li>
                    <input type="button" value="" class="cancel">
                    <input type="button" value="" class="save">
                    <input type="text" value="2nd small item" class="name">
                </li>
                <li>
                    <input type="button" value="" class="cancel">
                    <input type="button" value="" class="save">
                    <input type="text" value="3rd small item" class="name">
                </li>
            </ul>
        </ul>
    </ul>
</div> 
```

Thanks for your time,

SYNCRo,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:24:04.430

Having corrected your invalid HTML (as noted in the comment to your question *no* element other than an `li` is a valid child of a `ul` or `ol`, *including* those elements themselves) to the following:

```
<div>
    <ul>
        <li class="items">
            <input type="button" value="" class="cancel" />
            <input type="button" value="" class="save" />
            <input type="text" value="Big list item" class="name" />
        </li>
        <li>
        <ul>
            <li id="category_2" id_category="2" class="items">
                <input type="button" value="" class="cancel" />
                <input type="button" value="" class="save" />
                <input type="text" value="Medium list item" class="name" />
            </li>
            <li>
            <ul>
                <li class="items">
                    <input type="button" value="" class="cancel" />
                    <input type="button" value="" class="save" />
                    <input type="text" value="1st small item" class="name" />
                </li>
                <li class="items">
                    <input type="button" value="" class="cancel" />
                    <input type="button" value="" class="save" />
                    <input type="text" value="2nd small item" class="name" />
                </li>
                <li class="items">
                    <input type="button" value="" class="cancel" />
                    <input type="button" value="" class="save" />
                    <input type="text" value="3rd small item" class="name" />
                </li>
            </ul>
            </li>
        </ul>
        </li>
    </ul>
</div> 
```

Note that I had to add a class to those `li` elements that contain children (since the previous, simple, `li` selector now matches the multiple elements in the hierarchy), in this case the class `items`, but adjust to taste.

The following CSS works, albeit only with a pretty up-to-date browser:

```
li {
    width: 80%;
    clear: both;
    float: right;
    margin: 0 0 0.2em 0;
}

li.items {
    background-color: #f90;
}

li .save, li .cancel {
    float: right;
    width: 20px;
    height: 20px;
}

input.name {
    width: -webkit-calc(100% - 45px);
    width: -moz-calc(100% - 45px);
    width: -o-calc(100% - 45px);
    width: -ms-calc(100% - 45px);
    width: calc(100% - 45px);
} 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/bzF93/).

This uses the CSS `calc()` function to determine the width of the `input` element as a calculation.

To be cross-browser compatible with the older browsers you could use, instead, absolute (for the `.save` and `.cancel` elements) and relative (for the `li` elements) positioning:

```
li {
    width: 80%;
    clear: both;
    float: right;
    margin: 0 0 0.2em 0;
    position: relative;
}

li.items {
    background-color: #f90;
    padding: 0 45px 0 0;
}

li .save, li .cancel {
    position: absolute;
    width: 20px;
    height: 20px;
}

.save {
    top: 0;
    right: 21px;
}

.cancel {
    top: 0;
    right: 0;
}

input.name {
    width: 100%;
} 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/bzF93/2/).

You'll note that the `padding` gets added to the width of the `li` elements, of course, so you may wish to add the `box-sizing` CSS property to compensate for that:

```
/* all other CSS remains untouched */
li {
    width: 80%;
    clear: both;
    float: right;
    margin: 0 0 0.2em 0;
    position: relative;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;
} 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/bzF93/3/).

References:

*   [CSS `box-sizing`](http://www.w3.org/TR/css3-ui/#box-sizing).
*   [CSS `calc()`](http://www.w3.org/TR/css3-values/#calc).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:42:28.660

try this: just add another class with other width

HTML:

```
<div>
<ul>
    <li>
        <input type="button" value="" class="cancel">
        <input type="button" value="" class="save">
        <input type="text" value="Big list item" class="name_big_list">
    </li>
    <ul>
        <li id="category_2" id_category="2">
            <input type="button" value="" class="cancel">
            <input type="button" value="" class="save">
            <input type="text" value="Medium list item" class="name_medium_list ">
        </li>
        <ul>
            <li>
                <input type="button" value="" class="cancel">
                <input type="button" value="" class="save">
                <input type="text" value="1st small item" class="name">
            </li>
            <li>
                <input type="button" value="" class="cancel">
                <input type="button" value="" class="save">
                <input type="text" value="2nd small item" class="name">
            </li>
            <li>
                <input type="button" value="" class="cancel">
                <input type="button" value="" class="save">
                <input type="text" value="3rd small item" class="name">
            </li>
        </ul>
    </ul>
</ul> 
```

​</p>

CSS:

```
 div {
    width: 200px;
    border: 1px solid red;
}
ul {
    padding: 0px 0px 0px 20px;
    margin: 0px;
}
li {
    display: block;
    white-space: nowrap;
    list-style-type: none;
    display: block;
    height: 20px;
    padding: 0px;
    margin: 1px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;

    border-color: #D5AB55 #C93 #C93 #D5AB55;
    background-color: #F3CE00;
}

.name, .name_big_list, .name_medium_list {
    display: inline-block;
    float: right;
    height: 18px;
    width: 65%;
    margin: 0px;
    padding: 0px 2px;
    border: 1px solid grey;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;
}
.name_big_list{
width: 73%
}
.name_medium_list{
width: 69%;
}
.save, .cancel {
    display: inline-block;
    float: right;
    height: 20px;
    width: 20px;
    margin: 0px 0px 0px 1px;
    padding: 0px;
    border: 1px solid grey;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px;
}
.save   { background: url(../images/confirm.png) no-repeat center center; }
.cancel { background: url(../images/cancel.png) no-repeat center center; }​ 
```

# listview - WinJS：嵌套列表视图

> ID：13218412
> 
> 赞同：1
> 
> 时间：2012-11-04T12:13:02.023
> 
> 标签：listview, winjs

我在 Windows 8 Metro 应用程序中遇到嵌套 ListViews 的问题。我得到错误：

```
Exception was thrown at line 5840, column 33 in 
ms-appx://microsoft.winjs.1.0/js/base.js 0x800a138f - JavaScript runtime error: 
Unable to get property 'dataSource' of undefined or null reference 
```

代码是：

```
<div id="color" data-win-control="WinJS.Binding.Template">
    <div>color</div>
</div>
<div id="row" data-win-control="WinJS.Binding.Template">
    <div>
        <div>row</div>
        <div 
            data-win-control="WinJS.UI.ListView"
            data-win-options="{ itemDataSource : colorsDataSource.dataSource, 
                    itemTemplate: select('#color')}">  
        </div>
    </div>
</div>
<div id="basicListView" 
    data-win-control="WinJS.UI.ListView"
    data-win-options="{ itemDataSource : Data.rowsDataSource.dataSource, 
            itemTemplate: select('#row')}">  
</div> 
```

有问题的行是：

```
data-win-options="{ itemDataSource : colorsDataSource.dataSource, 
                    itemTemplate: select('#color')}" 
```

问题是，在评估 data-win-options 时，colorsDataSource 不知何故无法访问 - 不知道为什么，因为数据结构 Data 是静态的，并且在 UI 甚至解析之前初始化（在 args.setPromise(WinJS .UI.processAll());)。

例如，当我尝试将**行**模板修改为此：

```
<div id="row" data-win-control="WinJS.Binding.Template">
    <div>
        <div>row</div>
        <div data-win-bind="innerText: colorsDataSource.dataSource" ></div>
    </div>
</div> 
```

它正确输出[object Object] ...

javascript 结构 Data 如下所示：

```
var rows = new WinJS.Binding.List([]);
model.rows.forEach(function (row) {
    rows.push({
       colorsDataSource : new WinJS.Binding.List(row.rowData.colors)
    });                
});
Data.rowsDataSource = rows; 
```

**编辑：** 嗯，我找到了原因（base.js中属性**data-win-options的处理）：**

```
var options;
var optionsAttribute = element.getAttribute("data-win-options");
if (optionsAttribute) {
    options = WinJS.UI.optionsParser(optionsAttribute, global, {
        select: createSelect(element)
    });
} 
```

这些选项是在**全局**上下文中评估的，这意味着无法获取当前处理的项目（在我的情况下是**行**项目）......

解决方法是创建自定义渲染器（整个自定义控件）。此处部分描述了[http://stephenwalther.com/archive/2012/05/23/metro-dynamically-switching-templates-with-a-winjs-listview.aspx](http://stephenwalther.com/archive/2012/05/23/metro-dynamically-switching-templates-with-a-winjs-listview.aspx) - 请参阅 itemTemplateFunction

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T18:46:34.983

嵌套列表视图基本上不起作用并且不受支持。不幸的是，你不会找到一个简单的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T22:35:12.100

正如 Chris Tavares 所说，不支持嵌套的 ListView。

但是，这不起作用的*更大原因是您需要了解如何在下一个控件上获取数据本身（暂时忽略它是一个列表视图）。*

您已尝试使用该`data-win-options`属性解决此问题，正如您正确指出的那样，该属性仅解析为全局名称空间。

有一个解决方法——使用数据绑定*。*

你在哪里：

```
<div data-win-control="WinJS.UI.ListView"
     data-win-options="{ itemDataSource : colorsDataSource.dataSource, 
     itemTemplate: select('#color')}">  
</div> 
```

删除`itemsDataSource`from `data-win-options`，并将其移至 data-win-bind：

```
<div  data-win-control="WinJS.UI.ListView"
      data-win-options="{ itemTemplate: select('#color')}"
      data-win-bind="winControl.itemDataSource: colorsDataSource.dataSource">  
</div> 
```

这假定 colorsDataSource 是正在呈现的项目的属性。例如你的行对象。

为了解决您的嵌套问题，看起来您的“父”列表视图可能会消失——只需根据您的数据源动态创建元素。

# dynamics-crm - Dynamics CRM 2013 中的差异指南

> ID：13218415
> 
> 赞同：-2
> 
> 时间：2012-11-04T12:13:36.903
> 
> 标签：dynamics-crm, dynamics-crm-2013

我已经查找了有关 Dynamics CRM 早期版本（iev4 和 v.2011）与即将推出的 2013 之间更改的一些指南。但我找不到任何指南。这是否意味着没有差异？（*讽刺！*）

当客户决定升级其系统时，作为参考是一件好事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:54:10.683

请参阅 [http://crm.dynamics.com/en-us/polaris](http://crm.dynamics.com/en-us/polaris)

看起来这是一个主要版本，尽管 MS 在将其称为 CRM 2013 时非常谨慎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:47:50.200

对于 Crm 4 到 2011，我建议阅读这篇 MSDN 文章：[Microsoft Dynamics CRM 2011 和 Microsoft Dynamics CRM Online 的新增功能](http://msdn.microsoft.com/en-us/library/gg309589.aspx)。

对于 2011 年的未来，我建议只使用 Google（因为它会不断变化），例如：mscrm，路线图，北极星，猎户座。

这是一篇很好的文章：[未来之星：来自拉斯维加斯的 Dynamics CRM 路线图新闻](http://niiranen.eu/crm/2012/10/future-stars-dynamics-crm-roadmap-news-from-las-vegas/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T08:17:54.203

在这个网站上有很多关于 Dynamics CRM 2013 变化的重要信息：http: [//dynamics.co.il](http://dynamics.co.il)

# android - 修改android sdk并反映eclipse中的变化

> ID：13218416
> 
> 赞同：1
> 
> 时间：2012-11-04T12:13:37.937
> 
> 标签：android, eclipse, sdk

关于我的[其他问题](https://stackoverflow.com/questions/13218252/modify-android-server-bluetoothservice-java-to-update-cached-service-channel-no)，我必须修改 android SDK - 特别是文件：/home/me/android-sdk-linux/sources/android-16/android/server/BluetoothService.java。我正在使用eclipse，更改后我应该如何重新加载sdk。

SDK 管理器显示一个不可编辑的目录路径，并且重新安装包会开始从 Web 下载。我怎样才能反映我自己的本地变化。

我只是一个初学者，忽略任何有问题的幼稚。

谢谢

# network-programming - 大流量下的用户空间饥饿

> ID：13218419
> 
> 赞同：0
> 
> 时间：2012-11-04T12:13:54.873
> 
> 标签：network-programming, linux-device-driver, embedded-linux

我正在 Linux 网关设备上实现用户空间嵌入式配置管理器应用程序和网络设备驱动程序。
我们遇到了以下问题：在 CPU 负载约为 100% 的 TCP 流量很大的情况下，管理器应用程序处于饥饿状态：它无法从用户空间向网络驱动程序发送管理命令 - 命令超时。要求是即使它导致吞吐量下降也能够发送命令。如何解决？
以下是我们系统的一些细节：内核 2.6.35，禁用抢占，网络驱动程序正在中断上下文中处理传入数据包

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:29:29.753

你有两个选择，好的和丑陋的（我还没有想过坏的）：1.将中断移动到线程 - [http://lwn.net/Articles/302043/](http://lwn.net/Articles/302043/) 2.中断起搏

# mysql - Mysql 在 WHERE 子句中返回具有零 (0) 列数据的行

> ID：13218431
> 
> 赞同：0
> 
> 时间：2012-11-04T12:16:05.137
> 
> 标签：mysql, field, where, zero, clause

我对我的表有一个简单的查询：

```
SELECT * from delivery_receipts WHERE siid=''; 
```

该表的唯一键是drid，（与此问题无关）..目标列（`siid`）是一个`int(11)`字段，非索引且非唯一...

无论如何，我的问题是，当我运行它时，mysql返回具有以下内容的所有行：

```
SELECT drid,siid from delivery_receipts WHERE siid='0' 
```

但当然，如果我用`siid`指定的搜索，只有`siid`匹配的行出现....

因此，在搜索“”时，我的表似乎在所有具有“0”的行上都返回了一个匹配项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:23:59.783

服务器正在解释 Select-Statement，因此需要将数据从 char 转换为 int。由于 int 的默认值，您提供的空字符将被转换为 0。

因此，如果您想获取所有没有值（NULL）的行，您必须这样做

```
SELECT * from delivery_receipts WHERE siid IS NULL; 
```

编辑

```
SELECT * from delivery_receipts WHERE ( siid = '$siid' and '$siid' <> '' ) OR ( '$siid' = '' AND siid IS NULL ); 
```

# android - 日历和 PagerAdapter - 无限次查看

> ID：13218434
> 
> 赞同：12
> 
> 时间：2012-11-04T12:16:27.353
> 
> 标签：android, calendar, android-viewpager, infinite

在我的活动中，我使用 ViewPager 向左/向右滑动并相应地显示月视图。我将月份和年份值传递`onCreate`给 PagerAdapter：

```
private static int NUM_AWESOME_VIEWS = 3;

viewPager = (ViewPager) v.findViewById(R.id.pager);
cAdapter = new CalendarPagerAdapter(this.getActivity().getApplicationContext(), date_value, fragmentManager, month, year);
viewPager.setAdapter(cAdapter);
viewPager.setOffscreenPageLimit(3); 
```

日历从 11 月开始，然后滚动到 1 月。我希望日历向前和向后显示无限的视图。

**寻呼机适配器：**

```
public CalendarPagerAdapter(Context context, int dv, FragmentManager fm, int month, int year){
    this.context = context;
    this.dv = dv;
    this.fm = fm;
    this.month = month;
    this.year = year;

}

public Object instantiateItem(View collection, int position) {
    Log.d("Object", "Instantiated");
    LayoutInflater inflater = (LayoutInflater) collection.getContext()
                     .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View v =  inflater.inflate(R.layout.simple_calendar_view, null);

    _calendar.set(Calendar.MONTH, month);
    _calendar.set(Calendar.YEAR, year);

    month = _calendar.get(Calendar.MONTH) + 1;
    year = _calendar.get(Calendar.YEAR);

    currentMonth = (Button) v.findViewById(R.id.currentMonth);
    currentMonth.setText(hijri.getMonthForInt(month-1).toUpperCase() + " " + year);

    calendarView = (GridView) v.findViewById(R.id.calendar);
    calendarWeek = (GridView) v.findViewById(R.id.calendarweek);

    calendarWeek.setAdapter(new CalendarWeekAdapter(context, firstDay));
    // Initialised
    adapter = new GridCellAdapter(calendarView, context, R.id.calendar_day_gridcell, month, year, 0, 0, 0);
    adapter.notifyDataSetChanged();
    calendarView.setAdapter(adapter);

    ((ViewPager) collection).addView(v, 0);

    return v;
} 
```

根据[Jon Willis 的代码](https://stackoverflow.com/questions/7440012/infinite-viewpager)，这是我想出的，但是当 viewpager 的位置为 0 或 2 时，页面变为空白，然后显示下个月 + 1（即，在我滚动 1 月后，页面闪烁并显示三月）。它滚动不流畅。我不知道该怎么做。

```
 viewPager.setOnPageChangeListener(new OnPageChangeListener() {
    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

    }

    @Override
    public void onPageScrollStateChanged(int state) {
            if (state == ViewPager.SCROLL_STATE_IDLE) 

                 Log.d("Calendar ViewPager", "Calendar ViewPager" + viewPager.getCurrentItem());

                    if (focusedPage == 0) {

                            _calendar.add(Calendar.MONTH, -1);
                            month = _calendar.get(Calendar.MONTH);
                            year = _calendar.get(Calendar.YEAR);

                            setGridCellAdapter(context, month, year);

                    } else if (focusedPage == 2) {

                           _calendar.add(Calendar.MONTH, +1);
                           month = _calendar.get(Calendar.MONTH);
                           year = _calendar.get(Calendar.YEAR);

                           setGridCellAdapter(context, month, year);

                    }

                    viewPager.setCurrentItem(1, false);
            }
    }

    @Override
    public void onPageSelected(int position) {
            focusedPage = position;
    }
});

public void setGridCellAdapter(Context ctx, int month, int year)
{
    cAdapter = new CalendarPagerAdapter(ctx, date_value, fragmentManager, month, year);
    Log.d("Object", "Re-instantiatted" + month + year);
    cAdapter.notifyDataSetChanged();
    viewPager.setAdapter(cAdapter);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:12:07.553

我已经实现了这一点，但通过将每个页面用作 3 个片段来实现这一点并不完美。当用户 swift 向右或向左时，它会回到中间并为每个片段更新新的数据源。

**在主要**

```
MonthViewContentFragment[] fragList = new MonthViewContentFragment[3];
fragList[0] = MonthViewContentFragment.newInstance(prevMonth);
fragList[1] = MonthViewContentFragment.newInstance(currentMonth);
fragList[2] = MonthViewContentFragment.newInstance(nextMonth);

ViewPager monthPage = (ViewPager) v.findViewById(R.id.monthview_content);
MonthPageAdapter monthPageAdapter = new MonthPageAdapter(getFragmentManager(), fragList);
monthPage.setAdapter(monthPageAdapter);
monthPage.setOnPageChangeListener(this);
monthPage.setCurrentItem(1, false); 
```

在`onPageScrollStateChanged`

```
if (state == ViewPager.SCROLL_STATE_IDLE) {

    if (focusPage < PAGE_CENTER) {
        currentMonth.add(Calendar.MONTH, -1);
    } else if (focusPage > PAGE_CENTER) {
        currentMonth.add(Calendar.MONTH, 1);    
    }
    monthPageAdapter.setCalendar(currentMonth);
    monthPage.setCurrentItem(1, false);
    updateTitle();
} 
```

在`onPageSelected`

```
public void onPageSelected(int position) {
        // TODO Auto-generated method stub
        focusPage = position;
} 
```

**在 MonthPageAdapter**

```
 MonthViewContentFragment[] fragList;    
    MonthViewContentFragment temp; 
    int fragNumber = 3;

    public MonthPageAdapter(FragmentManager fm, MonthViewContentFragment[] fragList) {
        super(fm);
        this.fragList = fragList;
    }

    @Override
    public int getItemPosition(Object object) {
        // TODO Auto-generated method stub
        return POSITION_NONE;
    }
    @Override
    public Fragment getItem(int position) {
        return fragList[position];      
    }

    @Override
    public int getCount() {
        return 3;
    }
    public void setCalendar(Calendar currentMonth) {

        Calendar prevMonth = Calendar.getInstance();
        prevMonth.setTime(currentMonth.getTime());
        prevMonth.add(Calendar.MONTH, -1);

        Calendar nextMonth = Calendar.getInstance();
        nextMonth.setTime(currentMonth.getTime());
        nextMonth.add(Calendar.MONTH, 1);
            //update all 3 fragments
        fragList[0].updateUI(prevMonth);
        fragList[1].updateUI(currentMonth);
        fragList[2].updateUI(nextMonth);
    } 
```

**在 MonthViewContentFragment 中**

```
 @Override
    public void updateUI(Calendar monthYear) {

        View v = getView();
        if (v == null)
            return;
        //setNewDataSource calcurate new List<String> date
        calendarViewAdapter.setNewDataSource(monthYear);
        calendarViewAdapter.notifyDataSetChanged();
    } 
```

这并不完美，因为当用户 swift 太快时。卷轴尚未变为空闲状态，然后`ViewPager`到达其末端。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T22:11:10.080

我不确定我是否理解这一点（从未使用过这个viewPager，一直使用另一个Horizo​​ntalViewSlider），但是对于你的onPageScrollStateChanged（），为什么你有一个focusedPage==0 和focusedPage==2 的特殊情况？

如果一月和三月没有什么特别的，也许可以删除 onPageScrollStateChanged() 中的所有内容？

我的猜测是闪烁是从您调用 setGridCellAdapter() 开始的，因为这将通过调用 notifyDataSetChanged 刷新页面。

# iphone - 为多对多关系覆盖核心数据设置器方法

> ID：13218435
> 
> 赞同：2
> 
> 时间：2012-11-04T12:16:39.193
> 
> 标签：iphone, ios, core-data, overriding, getter-setter

我为我的核心数据结构覆盖了许多设置器，以将大部分“业务逻辑”保留在数据库中。为核心数据中的一对多关系覆盖 setter 方法的最佳方法是什么？对于称为“事物”的关系，setter 函数似乎包括：

```
- (void)addThingsObject:(Thing *)value;
- (void)removeThingsObject:(Thing *)value;
- (void)addThings:(NSSet *)value;
- (void)removeThings:(NSSet *)value; 
```

我是否需要覆盖所有这四个功能？如何干净地做到这一点的最佳做法是什么？如果存在逆关系，我是否需要在设置器中执行任何操作以确保逆设置正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:38:59.853

看看[MoGenerator](https://github.com/rentzsch/mogenerator)。它为核心数据中的每个实体创建两个类，其中一个用于编写自定义代码来管理实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:39:18.107

根据我的经验，覆盖 xCode 为您创建的方法会限制您的可能性。**为您需要添加方法的每个类**创建一个类别并仅添加您感兴趣的方法更易于维护。例如，如果您想替换一个对象，请`replaceThingObject:(Thing*)obj1 withThingObject(Thing*)obj2`在该类别中添加一个方法。添加或删除也是如此，而不仅仅是替换。如果你不需要它们，仅仅为了跟进 xCode 生成的代码而实现它们会很疯狂......

# python - 如何在linux中使用python更改wifi接口的IP地址？

> ID：13218439
> 
> 赞同：1
> 
> 时间：2012-11-04T12:17:12.787
> 
> 标签：python, wifi

我想使用python更改wifi接口的IP地址。我该怎么做？你不必告诉我代码。只是指出我。我会追捕。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T12:22:19.567

最简单的方法是从 python执行[ifconfig](http://linux.die.net/man/8/ifconfig)`ip`并将接口选项传递给它，例如和`broadcast`地址等，例如：

```
from subprocess import call
call(["ifconfig", "eth0", "192.168.1.5", "netmask", "255.255.255.0", "broadcast", "192.168.2.255"]) 
```

编辑：还有一个解析配置文件的python包，你可以用它来设置接口选项，检查这个问题 [Is there any python package that can configure IP address of network interface?](https://stackoverflow.com/questions/1865920/is-there-any-python-package-that-could-configure-ip-address-of-network-interface)

# powershell - Teamcity 在测试报告 xml 导入后没有失败构建

> ID：13218440
> 
> 赞同：0
> 
> 时间：2012-11-04T12:17:16.637
> 
> 标签：powershell, gallio, teamcity-7.0

我有一个小型 powershell 任务，它使用 Gallio 运行我的所有单元测试，并且 teamcity 导入报告，但不会使构建步骤失败，也不会显示失败或通过的测试数量。

那么如何让 teamcity 根据报告中的测试使构建失败，以及如何让它显示状态中通过、忽略和失败的测试数量。

```
Add-PSSnapIn Gallio
$fileList = Get-ChildItem ./source/ -filter *.Unittests.dll -Recurse | where { $_.FullName -like "*\bin\*" } | %{$_.FullName}
Run-Gallio -Files $fileList -ReportTypes XML -ReportNameFormat unittests
Write-Output "##teamcity[importData type='nunit' path='./Reports/unittests.xml']" 
```

日志显示文件通过

```
[Step 2/2] NUnit report watcher
[12:39:11][NUnit report watcher] 1 report found for paths:
[12:39:11][NUnit report watcher] C:\TeamCity\buildAgent\work\416967dfd65045\Reports\unittests.xml
[12:39:11][NUnit report watcher] Successfully parsed 
```

我正在使用 teamcity 7.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:13:05.837

您需要确保 Powershell 以非零退出代码（例如 1）退出，以便 TeamCity 注意到非零代码并因错误而停止构建。

为此，请在脚本中添加如下内容：

```
 $host.SetShouldExit(1);
  exit 1; 
```

这将导致 Powershell 以错误代码 1 退出。

您可以编写脚本以捕获异常（例如测试失败），然后如上所示退出。这可以使用陷阱语句（powershell 1）或 try/catch（powershell 2 及更高版本）来完成。

# c++ - C++ Sytanx 关于类数组和新运算符的使用

> ID：13218449
> 
> 赞同：2
> 
> 时间：2012-11-04T12:19:37.200
> 
> 标签：c++, syntax, operator-keyword

我的问题是关于 Scott Meyer 的书“更有效的 C++ 35 种新方法......”中的代码快照

代码（参数名称已更改）

```
void * memory = operator new[] (10*sizeOf(MyClass));
MyClass * myArray = static_cast<MyClass*>(memory);
for(int i= 0; i<10; i++)
{
new (&myArray[i]) MyClass(params);
} 
```

我不熟悉这种语法。甚至运算符 new [] 和 new (&myArray[i]) ... 是否有任何资源可以阅读有关该语法的详细信息，它们是如何工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:30:15.793

```
void * memory = operator new[] (10*sizeOf(MyClass)); 
```

在这里，您分配 size`10*sizeOf(MyClass)`字节的内存。这是*未初始化*的原始内存。此内存中没有构造 C++ 对象。

```
new (&myArray[i]) MyClass(params); 
```

在这里，您使用*placement-new*在 指向的给定内存中构造一个对象`&myArray[i]`。

Placement-new 的典型语法是这样的：

```
X * x = new (pAllocatedMem) X(a,b,c); 
```

这意味着，您构造一个将 , 传递给构造函数的类型的`X`对象。该对象在 指向的内存中构造。`a``b``c``pAllocatedMem`

另请注意，您删除了使用placement-new构造的此类对象，例如：

```
x->~X(); //delete the constructed object. DONT USE : delete x; 
```

也就是说，您不必`delete x`删除此类对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:30:22.390

维基百科将回答您的问题。

第一个`new`是分配原始内存。

[http://en.wikipedia.org/wiki/New_(C%2B%2B)#void.2A_operator_new.28size_t_size.29](http://en.wikipedia.org/wiki/New_(C%2B%2B)#void.2A_operator_new.28size_t_size.29)

> 仅分配内存的 C++ 语言结构称为 void* operator new(size_t size)。它在分配阶段被 new 使用。它可以被每个类覆盖以定义特定于类的内存分配器。

* * *

第二个`new`称为安置新。

[http://en.wikipedia.org/wiki/Placement_new](http://en.wikipedia.org/wiki/Placement_new)

> 使用额外的 void * 参数的 operator new 和 operator delete 的放置重载用于默认放置，也称为指针放置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T13:01:54.817

要理解这一点，您首先需要了解简单明了的`new`工作原理。表达式的常用语法`new`类似于`new T`. 使用`new`表达式时，会发生以下情况：

1.  首先，它调用*分配函数*来获取对象的存储空间。分配函数只需返回一个指针，该指针指向某个已分配的存储空间，该存储空间足够大以适合所请求的对象。它仅此而已。它不会初始化对象。

2.  接下来，在分配的空间中初始化对象。

3.  返回指向已分配空间（以及现在已初始化的对象）的指针。

在 的情况下`new T`，分配函数被命名为`operator new`。分配数组时，如`new T[5]`，分配函数名为`operator new[]`。这些函数的默认定义在全局命名空间中提供。它们每个都采用一个类型的参数，`std::size_t`即所需的字节数。因此，当您这样做时`new T`，相应的调用是 to ，`operator new(sizeof(T))`而 for被调用。`new T[5]``operator new[](sizeof(T)*5)`

但是，可以将更多参数传递给分配函数。这称为*放置新*语法。要传递更多参数，您可以使用如下语法：`new (some, arguments, 3) T`，它将调用`operator new(sizeof(T), some, arguments, 3)`. 参数列表放在`new`和类型之间的括号中。

除了`operator new(std::size_t)`由实现提供的 simple 及其对应的数组之外，还有一些默认定义采用额外的 type 参数`void*`。也就是说，它们采用指向对象的指针。这些函数实际上并不分配任何空间，而只是返回您给它们的指针。因此，当您这样做时`new (some_pointer) T`，它首先调用`operator new(sizeof(T), some_pointer)`which`some_pointer`再次返回，然后初始化该空间中的对象。*这为您提供了一种在某些已分配*空间中初始化对象的方法。

所以现在我们有了这四个预定义的分配函数（事实上，还有一些其他的，你也可以自由定义自己的）：

```
// Normal allocation functions that allocate space of the given size
operator new(std::size_t)
operator new[](std::size_t)
// Placement allocation functions that just return the pointer they're given
operator new(std::size_t, void*)
operator new[](std::size_t, void*) 
```

* * *

因此，让我们看一下您提供的代码片段：

```
void * memory = operator new[] (10*sizeOf(MyClass));
MyClass * myArray = static_cast<MyClass*>(memory);
for(int i= 0; i<10; i++)
{
  new (&myArray[i]) MyClass(params);
} 
```

在第一行，我们`operator new[]`直接调用分配一些存储空间。多少存储空间？好吧，足以容纳 10 个类型的对象`MyClass`。此函数返回一个指向该分配存储的指针，并将其存储在`memory`.

在此之后，`void*`被强制转换为 a`MyClass*`以允许您以 size 的块索引分配的存储`sizeof(MyClass)`，即`myArray[0]`现在将指向第一个`MyClass` 和`myArray[1]`第二个。

现在我们遍历该数组，调用*placement new*，并使用每个未初始化`MyClass`大小的已分配存储位的地址。例如，在第一次迭代中，这将调用分配函数`operator new(sizeof(MyClass), &myArray[0])`，正如我们之前看到的，它什么都不做，只是返回你给它的指针。新表达式将通过`MyClass`在这个空间中初始化一个对象并返回指向它的指针来完成。

所以总而言之，代码分配了一些存储空间来容纳 10 个`MyClass`对象（但不初始化它们），然后循环遍历`MyClass`该存储空间中的每个 -size 空间，在每个对象中初始化一个对象。

这演示了如何在已经预分配的存储中初始化对象。您可以对新初始化的对象反复重用相同的存储。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T12:29:59.847

```
new (&myArray[i]) MyClass(params); 
```

是**放置`new`**运算符。它允许您在预分配的内存位置创建对象。

**18.4.1.3 安置表格**

> void* operator new(std::size_t size, void* ptr) throw();
> 
> 返回：ptr。
> 3 注释：故意不执行其他动作。
> 4 [示例：这对于在已知地址构造对象很有用：

```
void* place = operator new(sizeof(Something));

Something* p = new (place) Something();
—end example]

void* operator new[](std::size_t size, void* ptr) throw();

5 Returns: ptr.
6 Notes: Intentionally performs no other action. 
```

# java - 使用扫描仪读取文本，存储在数组中并使用每个循环 Java 输出大写

> ID：13218452
> 
> 赞同：1
> 
> 时间：2012-11-04T12:20:02.750
> 
> 标签：java, arrays, for-loop

我必须编写一个程序来读取用户（键盘扫描仪）的 10 个名称并将它们存储在一个数组中。然后循环遍历数组并以大写形式显示名称（使用 for each 循环将它们全部显示）。我该怎么做？目前我有：

```
import java.util.Scanner;

public class Names
{
    public static void main(String[] args) throws Exception
    {
        Scanner nameScan = new Scanner(System.in);
        String[] names = new String[10];
        String[] namesUpper = new String[10];

        System.out.print("Enter a name : ");
        names=nameScan.next(); 

        namesUpper=names.toUpperCase();
        System.out.println("Names in upper case: "+namesUpper);
    } 
} 
```

* * *

到目前为止，我有这个，但仍然没有工作。请问我哪里错了？谢谢

```
import java.util.Scanner;

    public class NamesReAD
    {
        public static void main(String[] args) throws Exception
        {
            Scanner nameScan = new Scanner(System.in);
            String[] names = new String[10];

            for (int i = 0 ; i < names.length ; i++) {
                System.out.print("Enter a name: ");
                names[i] = nameScan.nextLine().toUpperCase();
            }
            nameScan.close();
            System.out.println("Here is name"+names);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:53:06.647

```
for (int i = 0 ; i < names.length ; i++) {
    System.out.print("Enter a name: ");
    names[i] = nameScan.nextLine().toUpperCase();
} 
```

除了 .toUpperCase(); 之外，本节都可以使用。它不会将名称更改为大写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:49:23.173

You'll need a `for`-loop to traverse the array(s) and put the appropriate data at each index. For instance,

```
for (int i = 0 ; i < names.length ; i++) {
    System.out.print("Enter a name: ");
    names[i] = nameScan.nextLine();
} 
```

This will ask the user for a name 10 times, and will fill the `names` array with whatever the user inputs. Now, you don't really have to create a second array (`namesUpper`); you can just loop over `names` again and print `names[i].toUpperCase()` (or use a [`for`-each](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html) loop as you suggested, but the idea is the same).

* * *

As you have it now, these two lines won't compile:

```
names = nameScan.next(); 
namesUpper = names.toUpperCase(); 
```

since 1) `names` is an array and `nameScan.next()` returns a string and 2) `names` has no method called `toUpperCase`.

* * *

**EDIT**: Or, you could just store the names as upper-case when you add them to the `names` array:

```
for (int i = 0 ; i < names.length ; i++) {
    System.out.print("Enter a name: ");
    names[i] = nameScan.nextLine().toUpperCase();
} 
```

Then you wouldn't have to worry about anything when you print the contents of the array.

# apache-flex - Flex 使用 %5F 作为 HTTP 服务的下划线？

> ID：13218453
> 
> 赞同：0
> 
> 时间：2012-11-04T12:20:28.417
> 
> 标签：apache-flex, flash-builder, httpservice

我目前正在使用 Adob​​e Flex 4.6 开发移动应用程序，但在使用 HTTP 服务功能时遇到问题。我正在尝试使用如下所示的 HTTP 请求：

[http://api.somesite.co.uk/api/v1/data?api_key=00000aaaaa111111&area=伦敦](http://api.somesite.co.uk/api/v1/data?api_key=00000aaaaa111111&area=London)

我已经使用数据菜单导入了服务并使用需要的参数对其进行了测试，当我对服务运行测试时，它会很好地拉回数据并将其显示在“测试操作”视图中。

但是，当我将以下代码添加到我的视图中以测试应用程序时，它会返回 2032 错误：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:myservice="services.myservice.*"
        initialize="view1_initializeHandler(event)" title="list">
    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;
            import mx.rpc.events.FaultEvent;
            import mx.rpc.events.ResultEvent;

            import spark.events.IndexChangeEvent;

            protected function view1_initializeHandler(event:FlexEvent):void
            {
                // TODO Auto-generated method stub
                var api_key:String = "00000aaaaa111111"
                var area:String = "London";

                listResult.addEventListener(ResultEvent.RESULT, onResult);
                listResult.addEventListener(FaultEvent.FAULT, httpFault);
                listResult.token = service.list(api_key, area);

                trace(listResult.token);
            }

            public function httpFault(event:FaultEvent):void { 
                var faultstring:String = event.fault.faultDetail; 
                trace("The Fault is: " + faultstring); 
            } 

            protected function onResult (event:ResultEvent):void
            {

            }

            protected function list_changeHandler(event:IndexChangeEvent):void
            {

            }

            protected function list_creationCompleteHandler(event:FlexEvent):void
            {

            }

        ]]>
    </fx:Script>
    <fx:Declarations>
        <s:CallResponder id="listResult" result="data=listResult.lastResult"/>
        <myservice:MyService id="service"/>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:List id="list" left="0" right="0" top="0" bottom="85" fontSize="20" contentBackgroundColor="#272727"
            creationComplete="list_creationCompleteHandler(event)" change="list_changeHandler(event)">
        <s:AsyncListView list="{data}"/>
        <s:itemRenderer>
            <fx:Component>
                <s:IconItemRenderer
                    labelFunction="Name"
                    iconFunction="getImageURL"
                    iconHeight="80"
                    iconWidth="80">
                    <fx:Script>
                        <![CDATA[
                            import valueObjects.Item;

                            private function Name(item: Object):String
                            {
                                var item:Item = Item(item);
                                return listing.name;
                            }

                            private function getImageURL(item: Object):String
                            {
                                var item:Item = Item(item);
                                return listing.image_url;
                            }

                        ]]>
                    </fx:Script>
                </s:IconItemRenderer>
            </fx:Component>
        </s:itemRenderer>
    </s:List>

</s:View> 
```

使用上面的代码，我已经设法跟踪问题，即由于某些未知的愚蠢原因，当从视图运行代码时，发送的 url 是错误的，并且下划线被替换为 %5F，如下所示：

[http://api.somesite.co.uk/api/v1/data?area=London&api%5Fkey=00000aaaaa111111](http://api.somesite.co.uk/api/v1/data?area=London&api%5Fkey=00000aaaaa111111)

谁能帮我解决这个问题？

谢谢

**编辑**……

你好，

如果 URL 错误，我希望它在“测试操作”视图中运行它时会失败，但是它会返回预期的数据并且一切看起来都很好。只有当我尝试将它应用于我遇到问题的视图时，它才会替换传递的 api_key 的下划线。我正在使用的服务是 Zoopla 服务，网址如下：

[http://developer.zoopla.com/docs/Property_listings](http://developer.zoopla.com/docs/Property_listings)

如果你可以看看这个并告诉我，我正在传递 3 个参数：

1.  api_key
2.  列表状态
3.  区域

从调试数据中我可以看到下划线得到了更改，我已经采用了这个更改的 url 并尝试在另一个程序中运行它并且它失败了，但是当我只是将`api%5Fkey`部分更改为 api_key 并在另一个程序中再次运行它返回数据。所以我相信 api_key 下划线是问题所在，我不知道如何解决这个问题，或者为什么它在视图上不起作用但在测试视图中起作用？有任何想法吗？

**编辑 2** ...

我最近将代码更新为：

```
protected function list_creationCompleteHandler(event:FlexEvent):void
{   
    var params:Object = new Object();
    params.api_key = "MY_API_KEY";
    params.area = "London";
    params.listing_status = "rent";
    params.page_size = 100;
    srv.send(params);
}

<fx:Declarations>
    <s:HTTPService id="srv" url="http://api.zoopla.co.uk/api/v1/property_listings?"
                   method="GET" 
                   result="srv_resultHandler(event)" 
                   fault="srv_faultHandler(event)" useProxy="false"/>
</fx:Declarations> 
```

当我使用上面的代码时，我在下面得到了这个错误，看起来代码正在以某种方式更改 URL 并创建一个新的混乱的：-S

故障是：

```
Error: [IOErrorEvent type="ioError" bubbles=false cancelable=false eventPhase=2 text="Error #2032: Stream Error. URL: http://localhost:37813/api/v1/property_listings?&page%5Fsize=100&api%5Fkey=MY_API_KEY&area=London&listing%5Fstatus=rent?hostport=api.zoopla.co.uk&https=N&id=F91A1C6D-8E19-9F50-EAEF-05DA5601D98D" errorID=2032]. URL: http://api.zoopla.co.uk/api/v1/property_listings? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:40:32.637

好的，所以首先另一端的服务器应该处理显然不是这样的......

参数的编码是一个“特征”。为防止这种情况发生，请不要将 params 对象传递给 send 方法。相反，手动构建请求字符串，如下所示：

```
var :myurl:String = "http://api.zoopla.co.uk/whatever?api_key=123&listing_status=45";
service.url = myurl;
service.send(); 
```

# javascript - Javascript：获取目录的完整路径

> ID：13218454
> 
> 赞同：0
> 
> 时间：2012-11-04T12:20:30.017
> 
> 标签：javascript, wordpress, lightbox

我正在使用带有 WordPress 主题的灯箱。它在 lightbox.js 文件中定义了一些图像路径。例如

```
this.fileLoadingImage = '/images/lb-loading.gif'; 
```

因此，如果我将上述路径更改为以下路径以从主题目录中获取图像：

```
this.fileLoadingImage = 'wp-content/themes/mytheme/images/lb-loading.gif'; 
```

它仅适用于主页。但它不适用于其他页面。上述路径在其他页面上无效。那么如何动态获取图像目录的完整路径呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:25:00.843

如果您希望在所有页面上都可以看到图像，则必须使用绝对路径。尝试像这样添加`/`之前`wp-content`：

```
this.fileLoadingImage = '/wp-content/themes/mytheme/images/lb-loading.gif'; 
```

# java - 如何在 SimpleAdapter 中使用 setViewImage？

> ID：13218457
> 
> 赞同：1
> 
> 时间：2012-11-04T12:20:41.233
> 
> 标签：java, android, listview, hashmap, simpleadapter

我将使用来自网络的图像构建一个列表视图。我之前也问过另一个问题：[Android ListView with images from special hashmap](https://stackoverflow.com/questions/13209748/android-listview-with-images-from-special-hashmap)。但现在我尝试扩展 SimpleAdapter。我使用哈希图来放置数据。然后我使用一个新的“ImageAdapter”：

```
public class ImageAdapter extends SimpleAdapter {

         public ImageAdapter(Context context,
                    List<? extends Map<String, ?>> data, int resource, String[] from,
                    int[] to) {
                super(context, data, resource, from, to);
                // TODO Auto-generated constructor stub
            }

         @Override
            public void setViewImage(ImageView v, String value) {
                super.setViewImage(v, value);
                URL url;
                try {
                    url = new URL(value);
                    URLConnection conn = url.openConnection();
                    conn.connect();
                    InputStream is = conn.getInputStream();
                    Bitmap bm = BitmapFactory.decodeStream(is);
                    v.setImageBitmap(bm);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }

          } 
```

我的 list.xml：

```
[...]
<ImageView
            android:id="@+id/list_image"
            android:layout_width="50dip"
            android:layout_height="50dip" />
[...] 
```

没有错误 - 但图像视图是空白/白色！如何使用数据中定义的图像（作为字符串/ URL）填充图像视图：

```
ada = new ImageAdapter(getApplicationContext(), data, R.layout.list, new String[] {"imgurl", "title", "date", "ex", "id"}, new int[] {R.id.list_image, android.R.id.text1, android.R.id.text2, R.id.text3}); 
```

感谢您的帮助！我尝试了很多变化......但没有任何效果:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:15:59.743

我建议您阅读本[教程](http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/)。您将了解 BaseAdapter、ViewHolder 模式和正确的异步图像加载。

# python - 使用带有 statsmodels 的 OLS 模型预测值

> ID：13218461
> 
> 赞同：14
> 
> 时间：2012-11-04T12:21:07.227
> 
> 标签：python, pandas, linear-regression, statsmodels

我使用 OLS（多元线性回归）计算了一个模型。我将数据划分为训练和测试（各一半），然后我想预测第二半标签的值。

```
model = OLS(labels[:half], data[:half])
predictions = model.predict(data[half:]) 
```

问题是我得到了错误：文件“/usr/local/lib/python2.7/dist-packages/statsmodels-0.5.0-py2.7-linux-i686.egg/statsmodels/regression/linear_model.py” ，第 281 行，在预测返回 np.dot(exog, params) ValueError: 矩阵未对齐

我有以下数组形状： data.shape: (426, 215) labels.shape: (426,)

如果我将输入转换为 model.predict，我确实得到了一个结果，但形状为 (426,213)，所以我认为它也是错误的（我希望一个包含 213 个数字的向量作为标签预测）：

```
model.predict(data[half:].T) 
```

知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-04T13:23:20.407

对于 statsmodels >=0.4，如果我没记错的话

`model.predict`不知道参数，并在调用中需要它们，请参阅[http://statsmodels.sourceforge.net/stable/generated/statsmodels.regression.linear_model.OLS.predict.html](http://statsmodels.sourceforge.net/stable/generated/statsmodels.regression.linear_model.OLS.predict.html)

在您的情况下应该工作的是拟合模型，然后使用结果实例的 predict 方法。

```
model = OLS(labels[:half], data[:half])
results = model.fit()
predictions = results.predict(data[half:]) 
```

或更短

```
results = OLS(labels[:half], data[:half]).fit()
predictions = results.predict(data[half:]) 
```

[http://statsmodels.sourceforge.net/stable/generated/statsmodels.regression.linear_model.RegressionResults.predict.html](http://statsmodels.sourceforge.net/stable/generated/statsmodels.regression.linear_model.RegressionResults.predict.html) 缺少文档字符串

注意：这在开发版本中已更改（向后兼容），可以利用预测 [http://statsmodels.sourceforge.net/devel/generated/statsmodels.regression.linear_model.RegressionResults.predict 中的“公式”信息。 html](http://statsmodels.sourceforge.net/devel/generated/statsmodels.regression.linear_model.RegressionResults.predict.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2022-01-09T15:57:45.923

您还可以调用对象的[`get_prediction`](https://www.statsmodels.org/dev/generated/statsmodels.regression.linear_model.OLSResults.get_prediction.html)方法`Results`来获取预测及其误差估计和置信区间。例子：

```
import numpy as np
import statsmodels.api as sm

X = np.array([0, 1, 2, 3])
y = np.array([1, 2, 3.5, 4])
X = sm.add_constant(X)
model = sm.OLS(y, X)
results = model.fit() 
```

预测：

```
# Predict at x=2.5
X_test = np.array([1, 2.5])  # "1" refers to the intercept term
results.get_prediction(X_test).summary_frame(alpha=0.05)  # alpha = significance level for confidence interval 
```

给出：

```
 mean    mean_se mean_ci_lower   mean_ci_upper   obs_ci_lower    obs_ci_upper
0   3.675   0.198431    2.821219    4.528781    2.142416    5.207584 
```

其中`mean_ci`指的是*置信区间*，`obs_ci`指的是*预测区间*。

# jaxb - 编组时可选的 JAXB xml 属性

> ID：13218462
> 
> 赞同：4
> 
> 时间：2012-11-04T12:21:32.950
> 
> 标签：jaxb, xml-attribute

当我使用 JAXB 编组 java 对象时，我低于 xml 元素

```
<error line="12" column="" message="test" /> 
```

但我想要如下的xml

```
<error line="12" message="test" /> 
```

如果列值为空，那么我需要获取如上所示的 xml，否则我需要获取元素中的列属性。

有没有办法得到它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T13:58:36.893

`String`如果相应的字段/属性包含空值，则属性只会用空值编组`String`。如果值为 null，则不会编组该属性。

**根**

```
package forum13218462;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class Root {

    @XmlAttribute
    String attributeNull;

    @XmlAttribute
    String attributeEmpty;

    @XmlAttribute(required=true)
    String attributeNullRequired;

} 
```

**演示**

```
package forum13218462;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Root root = new Root();
        root.attributeNull = null;
        root.attributeEmpty = "";
        root.attributeNullRequired = null;

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root attributeEmpty=""/> 
```

# javascript - 在 Javascript 中调用另一个函数中定义的函数

> ID：13218472
> 
> 赞同：44
> 
> 时间：2012-11-04T12:22:31.110
> 
> 标签：javascript, function, scope

我在按钮单击时调用一个函数，如下所示：

```
<input type="button" onclick="outer();" value="ACTION">​

function outer() { 
    alert("hi");       
} 
```

它工作正常，我收到警报：

现在当我这样做时：

```
function outer() { 
    function inner() {
        alert("hi");
    }
} 
```

为什么我没有收到警报？

虽然内部函数在外部函数中有一个可用的范围。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2015-12-18T21:29:51.683

你可以把它变成一个模块，并通过在一个对象中返回它来公开你的内部函数。

```
function outer() { 
    function inner() {
        console.log("hi");
    }
    return {
        inner: inner
    };
}
var foo = outer();
foo.inner(); 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-11-04T12:23:47.137

正如您所指出的，范围界定是正确的。但是，您不会在`inner`任何地方调用该函数。

您可以执行以下任一操作：

```
function outer() { 

    // when you define it this way, the inner function will be accessible only from 
    // inside the outer function

    function inner() {
        alert("hi");
    }
    inner(); // call it
} 
```

或者

```
function outer() { 
    this.inner = function() {
        alert("hi");
    }
}

<input type="button" onclick="(new outer()).inner();" value="ACTION">​ 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-04T12:23:35.887

您没有调用函数`inner`，只是定义它。

```
function outer() { 
    function inner() {
        alert("hi");
    }

    inner(); //Call the inner function

} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-17T11:15:20.347

您也可以试试这个。在这里，您将返回“内部”函数并使用第二组括号进行调用。

```
function outer() {
  return (function inside(){
    console.log("Inside inside function");
  });
}
outer()(); 
```

或者

```
function outer2() {
    let inside = function inside(){
      console.log("Inside inside");
    };
    return inside;
  }
outer2()(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-02-23T08:20:42.090

同样，不是直接回答这个问题，而是通过网络搜索引导到这里。最终通过简单地将内部函数分配给全局变量来公开内部函数而不使用 return 等。

```
var fname;

function outer() {
    function inner() {
        console.log("hi");
    }
    fname = inner;
} 
```

现在只是

```
fname(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-17T19:27:02.017

如果你想用“外部”函数调用“内部”函数，你可以这样做：

```
function outer() { 
     function inner() {
          alert("hi");
     }
     return { inner };
} 
```

在“onclick”事件中，您可以像这样调用函数：

```
<input type="button" onclick="outer().inner();" value="ACTION">​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-08T05:58:13.633

你也可以只使用return：

```
 function outer() { 
    function inner() {
        alert("hi");
    }
return inner();

}
outer(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-08T05:51:15.690

```
function outer() { 

    function inner() {
        alert("hi");
    }
    inner();
} 
```

你应该试试这个

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-13T02:57:12.133

在 JavaScript 中

如果使用 ES6
`static`函数可以在一个`class`

如果使用 ES5
经过几天的使用，下面是我想出的，
它是最小的，也有很多方便：

```
function MathFunctions() {
    let thefo = {}; // the functions object

    thefo.sum = sum = (a, b) => {
        return a + b;
    };
    thefo.avg = avg = (a, b) => {            // name is repeated 2 times - minor inconvenience
        return sum(a, b) / 2;                // calls sum, another function without using 'this'
    };

    return thefo;                            // no need to go down & export here always for each new function - major convenience
}

// Usage
console.log(MathFunctions().sum(1, 2));
console.log(MathFunctions().avg(1, 2));
// OR
const mf = MathFunctions();
console.log(mf.sum(1, 2));
console.log(mf.avg(1, 2)); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-22T03:31:35.137

**试试这个解决方案**

```
const greet = (greeting) => {
    return function (name) {
        console.log(`${greeting} ${name}`);
    };
};

greet('Hi !')('JAHID'); 
```

[![在此处输入图像描述](../Images/31d77bf010728c3d663da237180d8d43.png)](https://i.stack.imgur.com/bAtWq.png)

# c - Unix 系统中的文件 read() 函数

> ID：13218477
> 
> 赞同：0
> 
> 时间：2012-11-04T12:23:46.403
> 
> 标签：c, file, unix

`read()`如果由于信号中断而失败，下面的代码将重新启动该功能。从中断的`read()`地方继续读取。因此，如果`read()`在读取字符之前被中断`EOF`，它将返回它读取的多少字节？

```
int r_read(int fd, void *buf, int size)
{
   while((retval=read(fd,buf,size))==-1 && errno ==EINTR);
   return retval;
} 
```

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:32:48.793

这就是为什么读取的字节数应该保持为一个总数，以避免中断问题。它对于非阻塞 I/O 也很有用。

```
{
    int ret = 0, nread;
    char *nbuf = (char *) buf;

    while ((nread = read(fd, nbuf, size)) != 0)
    {
        if (nread > 0)
            ret += nread, nbuf += nread, size -= nread;
        elif (errno != EINTR)
            break;
    }

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:31:28.207

如果`errno == EINTR`，则表示`read`它在根据`man`页面读取任何数据之前就被中断了。即从我的阅读来看，就流中的数据而言，就好像没有发生`read`状态。`EINTR`因此，您似乎可以简单地重试，而不必担心丢失任何字节。我觉得这有点令人惊讶，而且我还没有实际测试过，但这就是手册所说的。

以下是手册页中的实际文本：

> EINTR 在读取任何数据之前调用被信号中断；见信号（7）。

编辑：我现在对此进行了测试，我发现如果我中断了读取，`EINTR`只有在读取任何内容之前被中断时才会返回。否则，它将成功返回，读取的字节数少于请求的字节数。因此，要获得所需的字节数，您将需要重新启动的东西，正如另一个答案所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T15:20:29.097

没有这样的“EOF 字符”，存在文件结束条件，表示读取 0 字节。`read`只有在等待某事发生时被中断，即*在*底层资源产生任何数据之前，才会设置 EINTR 错误。

由于 EOF 通常会导致`read`停止等待并返回一个值，`read`因此不能被中断，如果这样做，它只会返回它所拥有的 - EOF 指示符。如果在*等待*`read`EOF时被中断（在底层资源宣布之前），它当然会返回 -1 并设置 EINTR。

# android - 看起来像带有图标的地图视图但实际上是背景图片的视图

> ID：13218481
> 
> 赞同：1
> 
> 时间：2012-11-04T12:24:02.173
> 
> 标签：android, view, background, android-mapview

我想要一个包含超过设备大小的图标的容器，以便用户可以拖动屏幕以查看看不见的图标，并可以单击图标执行进一步的操作。这在体验上应该与 MapView 类似，但我并不需要一张地图，只需要一张我自己的背景图片。实现这一点的最佳观点是什么？

谢谢，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T14:02:38.187

看看这个项目[https://github.com/catchthecows/AndroidImageMap](https://github.com/catchthecows/AndroidImageMap)

它应该是你需要的。

# sql-server - 在连接之前检查 SQL Server 是否存在

> ID：13218482
> 
> 赞同：0
> 
> 时间：2012-11-04T12:24:08.557
> 
> 标签：sql-server, sql-server-2005, sql-server-2008-r2

在尝试连接到服务器之前，我们需要检查所有域中是否存在 SQL 服务器。我们可以使用 SQLDataSourceEnumerator 遍历本地域上的服务器列表，但这需要几秒钟来加载并且它只获取本地域。我们正在使用 SQL Server 2005 和 2008 服务器以及 .Net 2010。如果服务器不存在，我们不想尝试连接并等待 30 秒或更长时间似乎是标准的超时。

任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:09:26.163

尝试以较小的超时时间进行连接。您可以在连接字符串中设置超时：

```
Connect Timeout=2; 
```

你不能比这更快地检查。如果远程端点上没有 SQL Server，则 TCP 连接不会收到响应并超时。因为没有（负面）响应，您无法判断是否根本没有服务器或只是一个非常慢的服务器。

因此，超时是确定是否有服务器正在侦听的最佳方法。

# java - 有没有办法在这段代码中添加ActionListener

> ID：13218483
> 
> 赞同：3
> 
> 时间：2012-11-04T12:24:13.607
> 
> 标签：java, swing, awt, jbutton, actionlistener

```
JPanel p = new JPanel();
    p.setLayout(new GridLayout(4, 4, 5, 5));
    String[] buttons = {
        "1", "2", "3", "/", "4",
        "5", "6", "*", "7", "8", "9", "-", "0", ".", "=", "+"
    };
    for (int i = 0; i < buttons.length; i++) {
            p.add(new JButton(buttons[i]));
   add(p); 
```

这段代码产生了一个很好的计算器布局是否有一种方法可以将ActionListener 添加到每个按钮，同时保持这个布局我的意思是不要像这样对每个按钮都这样做。

```
JButton button1 = new JButton("1");
     button1.addActionListener(new ActionListener() {
       public void actionPerformed(ActionEvent event) {
// interesting code for button1 goes here
      }
   }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:28:07.743

是的，而不是一个数组`String`，有一个[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)实例数组。每个这样`Action`的都有一个名字，也是一个`ActionListener`. [这里](https://stackoverflow.com/a/10491517/230513)引用了几个例子。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T12:30:54.637

您可以简单地以 的形式向循环中的`ActionListener`每个按钮添加一个：`for``AbstractAction`

```
for (int i = 0; i < buttons.length; i++) {
   JButton button = new JButton(buttons[i]);
   button.addActionListener(new MyAction());
   p.add(button);
} 
```

在哪里

```
class MyAction extends AbstractAction {
   @Override
   public void actionPerformed(ActionEvent event) {
   ...
   }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T12:29:50.250

根据我的经验，您可以创建按钮列表并循环运行以添加`ActionListener`：

```
List<JButton> buttonsList = new ArrayList<JButton>(buttons.length):

for (JButton currButton : buttonsList) {

       currButton.addActionListener(){
         ....
       }
   ....
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T15:00:39.560

我用这段代码做到了...

```
 String[] buttons = {
        "1", "2", "3", "/", "4",
        "5", "6", "*", "7", "8", "9", "-", "0", ".", "=", "+"
    };

    Action[] allActions = new Action[buttons.length];

    for ( i = 0; i < buttons.length; i++) {

        allActions[i] = new ButtonAction(buttons[i],i);

        JButton button = new JButton(allActions[i]);

           panel.add(button);

        } 
```

使用类 ButtonAction 如下

```
 public class ButtonAction extends AbstractAction 
  {
int i;
   public ButtonAction(String text, int i) {
    super(text);
    this.i = i;
    }
   public void actionPerformed(ActionEvent e) {
    /* you can put any action here. either make the action depend on array value or 
      the string text */
   System.out.println(i);

   }
 } 
```

# javascript - 防止主干事件触发

> ID：13218488
> 
> 赞同：0
> 
> 时间：2012-11-04T12:25:20.330
> 
> 标签：javascript, javascript-events, backbone.js

我有一个带有主干视图的基本表单，当我在顶部输入上按 enter 时，会触发 open 事件。如何确保打开事件仅在我按下浏览按钮时触发？

```
<form method="post">
    <div>
        <input type="text" />
    </div>
    <div id="myId">
        <input type="text" />
        <button class="browse">Browse...</button>
    </div>
    <input type="submit" value="Save" />
</form>

var MyView = Backbone.View.extend({

    events: {
        'click button.browse': 'open'
    },

    open: function(e) {
        alert('Open dialog');
    },

    initialize: function() {},

    render: function() {}
});

$(function() {
    var myView= new MyView({ el: $('#myId') });
});​

​ 
```

[jsFiddle在这里](http://jsfiddle.net/PJhED/38/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:28:27.290

您需要指定`type="button"`，否则默认为`submit`，并且在表单中的文本框输入上按 Enter 会触发提交...

[http://jsfiddle.net/PJhED/40/](http://jsfiddle.net/PJhED/40/)

```
 <button class="browse" type="button">Browse...</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:40:38.943

将其更改为`<button class="browse" type="button">Browse...</button>`

[http://jsfiddle.net/2Rt6p/1/](http://jsfiddle.net/2Rt6p/1/)

# ajax - Spring MVC 重新加载部分页面

> ID：13218491
> 
> 赞同：3
> 
> 时间：2012-11-04T12:25:50.063
> 
> 标签：ajax, spring, spring-mvc

我当前在 Spring 中的 MVC 应用程序是一个经典的应用程序 - 控制器返回视图名称以呈现，然后 *.jsp 文件呈现给浏览器。简单且防弹:)

我现在要做的是使用 AJAX 更新页面的某些部分。

页面的一部分应该由控制器中的方法处理，像“taskList”这样的东西会呈现带有任务列表的准备包含的html。

ajax 本身一切都很好而且很花哨 - 我只是在页面中创建保持 div 并使用来自该请求的 html 填充它。

现在的问题是：有没有办法将该 html 包含在服务器端的页面中？类似的东西（警告：伪代码:)）

```
<div id="taskListHolder">
    <someSpringtag:include 'taskList' />
</div> 
```

基本上我想在另一个控制器响应中包含 html。因此，在第一页加载的情况下，不需要 AJAX，并且在禁用 JS 时它也可以工作。

做这样的事情的最佳做法是什么？

谢谢！莱昂蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:21:14.370

尝试使用 Core JSTL 标签库：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<body>
<div id="taskListHolder">
<c:import url="http://your-link-to-ajax-list"/>
</div>
</body>
</html> 
```

# wordpress - WooCommerce，添加到购物车不起作用，并且购物车页面未显示

> ID：13218492
> 
> 赞同：1
> 
> 时间：2012-11-04T12:25:49.847
> 
> 标签：wordpress, woocommerce, cart

我对 WooCommerce 还很陌生，尽管前几天添加到购物车和购物车页面的显示效果很好。我现在发现转到我的购物车页面会显示一个空白页面。

有谁知道什么会导致这种类型的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:19:00.817

你的购物车页面网址怎么样？您是否已经在 wordpress 中设置了永久链接？

设置 > 固定链接设置 > 帖子名称

自动显示 /%postname%/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T11:09:17.143

将此代码添加到您的 function.php 中：

```
add_filter('auth_cookie_expiration', 'my_expiration_filter', 99, 3);
function my_expiration_filter($seconds, $user_id, $remember){
//if "remember me" is checked;
if ( $remember ) {
    //WP defaults to 2 weeks;
    $expiration = 14*24*60*60; //UPDATE HERE;
} else {
    //WP defaults to 48 hrs/2 days;
    $expiration = 2*24*60*60; //UPDATE HERE;
}

//http://en.wikipedia.org/wiki/Year_2038_problem
if ( PHP_INT_MAX - time() < $expiration ) {
    //Fix to a little bit earlier!
    $expiration =  PHP_INT_MAX - time() - 5;
}

return $expiration; 
```

}

# java - java中的assert有什么用

> ID：13218496
> 
> 赞同：2
> 
> 时间：2012-11-04T12:26:33.167
> 
> 标签：java, exception-handling, assert

> **可能重复：**
> [断言有什么作用？](https://stackoverflow.com/questions/3018683/what-does-assert-do)

*assert 在开发过程中测试程序员的假设，而不为异常编写异常处理程序*这就是我在搜索**assert**时得到的。

除此之外，人们还说，它是异常处理的替代品。*当您不想花时间编写异常处理代码时，断言就会出现。*但是，我没有得到工作和使用。任何人解释这个例子。

```
class AssertExample {

    public static void main(String[] args) {
        int x = 0;
        assert (x > 0) ? "assertion failed" : "assertion passed";
        System.out.println("finished");
    } } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:39:20.930

维基百科：

> 在计算机编程中，断言是放置在程序中的谓词（真假语句），以表明开发人员认为该谓词在该位置始终为真。断言的使用有助于程序员设计、开发和推理程序。

`-ea`您可以使用switch在运行时启用断言。断言也可以有选择地启用

```
java -ea:pl.maciejziarko.service.UserService 
```

关于断言的一些规则（来自 SCJP Sun Certified Programmer for Java 6 Study Guide）：

*   不要使用断言来验证公共方法的参数
*   使用断言来验证私有方法的参数
*   不要使用断言来验证命令行参数
*   使用断言来检查你知道永远不会发生的情况
*   不要使用可能导致副作用的断言表达式

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T12:54:11.047

`assert`不是*处理*异常的方法，而是*检测*异常的方法。（因此，您找到的描述对我来说似乎有点离题。）这基本上是一种说法：

> 这应该是真的。如果不是，则抛出错误。

您如何*处理*该错误是一个完全不同的问题。你可以在检测到它的函数中处理它，你可以在调用它的函数中处理它，你可以在应用程序级别的堆栈的最顶部处理它，等等。

请记住，*捕获*异常（这是正在使用的编程语言的构造）和*有意义地处理*异常（这是独立于所使用的语言的逻辑构造）之间存在显着差异。仅捕获您可以实际对其*进行*处理的异常。否则，让他们将堆栈冒泡到可以对他们做某事的其他代码。（但由于`assert`不会捕获错误，它会抛出错误，因此应该在您尝试使用它的确切位置使用它......可以*检测到*错误的点，即使它无法*处理*。）

看看你尝试使用`assert`，看起来你很接近。这不是真正正确的用法：

```
assert (x > 0) ? "assertion failed" : "assertion passed"; 
```

您将其`assert`视为布尔值。然后，使用`? :`运算符，您将关闭该布尔值以...好吧...实际上不做任何事情。只需将字符串 (`"assertion failed"`或`"assertion passed"`) 返回到对该字符串不执行任何操作的代码行。

关闭，但不完全。

它`assert`本身所做的不仅仅是检查一个条件。它通过抛出错误或允许代码路径继续来响应条件。它使用`:`运算符，但不作为`? :`运算符的一部分。所以我认为你想要做的是：

```
assert (x > 0) : "assertion failed"; 
```

这基本上是在说：

> x 应始终大于 0。如果不是，则说明有问题。停止做任何事情并引发错误。

这将引发一条`AssertionError`带有消息的消息`"assertion failed"`（当然，您希望将其替换为更有意义和有用的消息，包括有关正在检查的值的任何有用的运行时信息，以帮助您进行调试）。

然后，在其他地方，你会处理它`AssertionError`并以某种方式回应它。

使用`assert`与这样的东西非常相似，只是更短且更能表达其意图：

```
if (x <= 0) throw new CustomException("assertion failed"); 
```

正如你所看到的，`assert`它只是更干净一点：

*   使用特定关键字来提醒人们注意它检查条件的唯一目的是验证假设。An`if`可能正在这样做，或者它可能出于任何其他原因分叉一条新的代码路径。
*   引发特定错误，可以将其与其他错误分开。请注意我使用 a`CustomException`来做同样的事情，但`AssertionError`更常见/预期。
*   使用更少的代码。
*   演示真实条件，而不是相反或错误的条件。在大多数情况下，真实条件更容易阅读，并且更清楚地表达了代码的意图。
*   遵循惯例并且更惯用。
*   将代码与其他代码区分开来，以用于特定目的，向其他开发人员表明断言应该*只是*一个断言。（因此其他开发人员不应该将其修改为第二个代码路径，可能会给断言添加副作用。）
*   可以很容易地为正在运行的应用程序全局打开或关闭。Java 允许您在任何给定的运行时上下文中启用或禁用断言检查。这对于将断言作为横切关注点进行全局管理非常方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T12:34:17.083

Assert 用于在开发期间验证有关您的代码的假设。

它们往往被用作合同规定的一种穷人的设计。

例如，我使用它们来验证代码的前置/后置条件和不变量。

# c - 在 Windows 上创建线程数组

> ID：13218501
> 
> 赞同：0
> 
> 时间：2012-11-04T12:27:02.607
> 
> 标签：c, windows, multithreading

我正在尝试创建一个线程数组。在 Linux 中，我是这样做的：

```
pthread_t thr[MAXCONNECTIONS]; 
```

在 Windows 上，我找不到任何替代品。无论如何要创建一个数组或替代它的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:02:55.377

```
HANDLE threads[ThreadCount];

for (int i=0; i < ThreadCount; ++i)
{
   threads[i] = (HANDLE)_beginthreadex( NULL, 0, &ThreadFunc, NULL, 0, &threadID );
} 
```

I've left out some stuff but you get the jist. You have an array of HANDLE's instead of physical threads. You can then pass a HANDLE to various functions to do things on the thread.

```
WaitForSingleObject(threads[2], INFINITE ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:08:18.357

假设你想创建 10 个线程

包括这个：

```
#include <Windows.h>
#include <process.h> 
```

线程函数如下所示：

```
DWORD WINAPI thread_1(LPVOID lpParam){ /* do something */; return 0; } 
```

数组和线程创建：

```
HANDLE thr[10];
thr[0] = CreateThread(NULL, 0, thread_1, NULL, NULL, NULL);
... etc for 1..9
WaitForMultipleObjects(10, thr, TRUE, INFINITE); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T15:03:55.230

如果您有可能使用，更便携的解决方案是使用[Boost 线程](http://www.boost.org/doc/libs/1_43_0/doc/html/thread.html)`c++`数组（链接到[Boost](http://www.boost.org/)）。这将在 Linux 和 Windows 上使用相同的代码。

您还可以使用 's 数组`c++11` `std::thread`，它也是可移植的。我不确定，但我知道 Windows 的 std::thread 还不完整，所以你可能会更好地使用 Boost。

# java - 为什么 String.split("$") 不起作用？

> ID：13218504
> 
> 赞同：1
> 
> 时间：2012-11-04T12:27:33.063
> 
> 标签：java, string, split

`$` 我有三个部分的字符串，每个部分用符号分隔
例如，

```
String s = "abc$efg$xyz"; 
```

现在，当我使用这样的方法拆分它时`split`：

```
String values[] = s.split("$"); 
```

它`values`数组包含整个字符串作为单个元素。

但是当我使用这个时：

```
String values[]=s.split("\\$"); 
```

它完美地工作了我想要
的意思，现在`values`数组包含`abc`,`efg`和`xyz`分别在索引 0,1 和 2 上。

我想知道为什么第一个`split`不起作用，因为我`split`在拆分`a single white space`使用时使用了类似的`split(" ");`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T12:29:13.590

因为字符`$`是正则表达式中用于标记行尾的保留标记。这就是为什么你**必须**使用`\\`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-04T12:29:07.690

`String.split`接受一个正则表达式。

`$`在正则表达式中表示字符串的 nd，因此如果要匹配文字`$`字符，则需要对其进行转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T13:17:27.847

您的示例中显示的 $ 在正则表达式中表示 Java 中正则表达式中使用的字符串结尾

它用于

```
$   Checks if a line end follows 
```

因此你必须使用 \\

# python - 如何获取系统时区设置并将其传递给 pytz.timezone？

> ID：13218506
> 
> 赞同：71
> 
> 时间：2012-11-04T12:27:56.083
> 
> 标签：python, timezone, pytz

我们可以使用`time.tzname`获取本地时区名称，但该名称与`pytz.timezone`.

实际上，返回的名称`time.tzname`是模棱两可的。此方法`('CST', 'CST')`在我的系统中返回，但“CST”可以指示四个时区：

*   中央时区（北美） - 在北美的中央时区观察到
*   中国标准时间
*   中原标准时间 - “中原标准时间”一词现在在台湾很少使用
*   澳大利亚中部标准时间 (ACST)

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-06-28T13:26:26.900

[`tzlocal`模块](https://github.com/regebro/tzlocal)返回对应本地时区的pytz tzinfo的对象：

```
import time
from datetime import datetime

import pytz # $ pip install pytz
from tzlocal import get_localzone # $ pip install tzlocal

# get local timezone    
local_tz = get_localzone() 

# test it
# utc_now, now = datetime.utcnow(), datetime.now()
ts = time.time()
utc_now, now = datetime.utcfromtimestamp(ts), datetime.fromtimestamp(ts)

local_now = utc_now.replace(tzinfo=pytz.utc).astimezone(local_tz) # utc -> local
assert local_now.replace(tzinfo=None) == now 
```

即使在当地时间可能不明确的夏令时转换期间，它也可以工作。

`local_tz`即使当时当地时区的 UTC 偏移量不同，也适用于过去的日期。`dateutil.tz.tzlocal()`在这种情况下，基于 - 的解决方案会失败，例如在欧洲/莫斯科时区（2013 年的示例）：

```
>>> import os, time
>>> os.environ['TZ'] = 'Europe/Moscow'
>>> time.tzset()
>>> from datetime import datetime
>>> from dateutil.tz import tzlocal
>>> from tzlocal import get_localzone
>>> dateutil_tz = tzlocal()
>>> tzlocal_tz = get_localzone()
>>> datetime.fromtimestamp(0, dateutil_tz)                              
datetime.datetime(1970, 1, 1, 4, 0, tzinfo=tzlocal())
>>> datetime.fromtimestamp(0, tzlocal_tz)
datetime.datetime(1970, 1, 1, 3, 0, tzinfo=<DstTzInfo 'Europe/Moscow' MSK+3:00:00 STD>) 
```

dateutil 在 1970-01-01 返回**错误**的 UTC+4 偏移量，而不是正确的 UTC+3。

*对于那些在 2017 年遇到这种情况的人* `dateutil.tz.tzlocal()`来说仍然是破碎的。上面的例子现在可以工作了，因为莫斯科的当前 utf 偏移量是 UTC+3（偶然等于 1970 年的 utc 偏移量）。为了演示错误，我们可以选择 UTC 偏移量为 UTC+4 的日期：

```
>>> import os, time
>>> os.environ['TZ'] = 'Europe/Moscow'
>>> time.tzset()
>>> from datetime import datetime
>>> from dateutil.tz import tzlocal
>>> from tzlocal import get_localzone
>>> dateutil_tz = tzlocal()
>>> tzlocal_tz = get_localzone()
>>> ts = datetime(2014, 6,1).timestamp() # get date in 2014 when gmtoff=14400 in Moscow
>>> datetime.fromtimestamp(ts, dateutil_tz)
datetime.datetime(2014, 5, 31, 23, 0, tzinfo=tzlocal())
>>> datetime.fromtimestamp(ts, tzlocal_tz)
datetime.datetime(2014, 6, 1, 0, 0, tzinfo=<DstTzInfo 'Europe/Moscow' MSK+4:00:00 STD>) 
```

dateutil 在 2014 年 6 月 1 日返回**错误**的 UTC+3 偏移量，而不是正确的 UTC+4。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-11-04T12:30:29.720

使用[包](http://pypi.python.org/pypi/python-dateutil)中的[`tzlocal`函数](http://labix.org/python-dateutil#head-5fb12f4538c5a2fd83f87eea8e6c0ddd47f8b4b0)：[`python-dateutil`](http://pypi.python.org/pypi/python-dateutil)

```
from dateutil.tz import tzlocal

localtimezone = tzlocal() 
```

在内部，这是一个使用`time.timezone`and `time.altzone`（基于 切换`time.daylight`）的类，但从中创建了一个合适的时区对象。

您使用它*而不是*时`pytz`区。

另一种方法是从操作系统读取当前配置的时区，但这因操作系统而异。在 Mac OS X 上，您需要阅读以下输出`systemsetup -gettimezone`：

```
$ systemsetup -gettimezone
Time Zone: Europe/Copenhagen 
```

在 Debian 和 Ubuntu 系统上，您可以阅读`/etc/timezone`：

```
$ cat /etc/timezone
Europe/Oslo 
```

在 RedHat 和 direved 系统上，您需要从以下位置读取它`/etc/sysconfig/clock`：

```
$ grep ZONE /etc/sysconfig/clock
ZONE="Europe/Oslo" 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2018-10-02T10:20:13.067

从 Python 3.6 开始，您可以简单地运行`naive_datetime.astimezone()`并将系统时区添加到`naive_datetime`对象中。

> 如果不带参数调用（或使用 tz=None），则系统本地时区假定为目标时区。转换后的日期时间实例的 .tzinfo 属性将设置为时区实例，其区域名称和偏移量从操作系统获得。

[https://docs.python.org/3/library/datetime.html#datetime.datetime.astimezone](https://docs.python.org/3/library/datetime.html#datetime.datetime.astimezone)

例子：

```
>>> import datetime
>>> datetime.datetime.now().astimezone().isoformat(timespec='minutes')
'2018-10-02T13:09+03:00' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-11-04T13:35:07.207

解决这个问题的一个非常简单的方法：

```
import time

def localTzname():
    offsetHour = time.timezone / 3600
    return 'Etc/GMT%+d' % offsetHour 
```

**更新**：@MartijnPieters 说“这不适用于 DST / 夏季。” 那么这个版本呢？

```
import time

def localTzname():
    if time.daylight:
        offsetHour = time.altzone / 3600
    else:
        offsetHour = time.timezone / 3600
    return 'Etc/GMT%+d' % offsetHour 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-04T23:18:40.553

我不知道这对你是否有用，但我认为它回答了你更普遍的问题：

如果您的日期在不明确的时区中，例如`CST`，[simple-date](https://github.com/andrewcooke/simple-date)（仅限python 3.2+，抱歉）可以自动搜索，并允许您执行喜欢某些国家/地区之类的操作。

例如：

```
>>> SimpleDate('2013-07-04 18:53 CST')
Traceback [...
simpledate.AmbiguousTimezone: 3 distinct timezones found: <DstTzInfo 'Australia/Broken_Hill' CST+9:30:00 STD>; <DstTzInfo 'America/Regina' LMT-1 day, 17:01:00 STD>; <DstTzInfo 'Asia/Harbin' LMT+8:27:00 STD> (timezones=('CST',), datetime=datetime.datetime(2013, 7, 4, 18, 53), is_dst=False, country=None, unsafe=False)
>>> SimpleDate('2013-07-04 18:53 CST', country='CN')
SimpleDate('2013-07-04 18:53 CST')
>>> SimpleDate('2013-07-04 18:53 CST', country='CN').utc
SimpleDate('2013-07-04 10:53 UTC', tz='UTC') 
```

请注意如何通过指定国家/地区来充分缩小可能值的范围以允许转换为 UTC。

它是通过在 PyTZ 中搜索时区来实现的：

```
>>> SimpleDate('2013-07-04 18:53 CST', country='CN', debug=True)
...
PyTzFactory: Have country code CN
PyTzFactory: Country code CN has 5 timezones
PyTzFactory: Expanded country codes to 5 timezones
PyTzFactory: Expanding ('CST',)
PyTzFactory: Name lookup failed for CST
PyTzFactory: Found CST using Asia/Shanghai
PyTzFactory: Found CST using Asia/Harbin
PyTzFactory: Found CST using Asia/Chongqing
PyTzFactory: Found CST using Asia/Urumqi
PyTzFactory: Found CST using Asia/Kashgar
PyTzFactory: Expanded timezone to 5 timezones
PyTzFactory: New offset 8:00:00 for Asia/Shanghai
PyTzFactory: Known offset 8:00:00 for Asia/Harbin
PyTzFactory: Known offset 8:00:00 for Asia/Chongqing
PyTzFactory: Known offset 8:00:00 for Asia/Urumqi
PyTzFactory: Known offset 8:00:00 for Asia/Kashgar
PyTzFactory: Have 1 distinct timezone(s)
PyTzFactory: Found Asia/Shanghai
...
SimpleDate('2013-07-04 18:53 CST') 
```

最后，为了回答直接提出的问题，它还包装了 tzlocal，正如另一个答案中所述，如果您不提供时区，它会自动执行您期望的操作。例如，我住在智利，所以

```
>>> SimpleDate()
SimpleDate('2013-07-04 19:21:25.757222 CLT', tz='America/Santiago')
>>> SimpleDate().tzinfo
<DstTzInfo 'America/Santiago' CLT-1 day, 20:00:00 STD> 
```

给出我的语言环境的时区（不明确或不明确）。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2018-09-26T09:07:11.763

```
import pytz 
```

假设您在 OBJ 列表对象中有 utc DateTime 值列表。

```
tz=pytz.timezone('Asia/Singapore') 
```

在下面找到 url 以获取相应的时区位置字符串参数 [是否有 Pytz 时区列表？](https://stackoverflow.com/questions/13866926/is-there-a-list-of-pytz-timezones)

现在我们的 tz 是具有新加坡时间的对象

```
result=[]
for i in OBJ:
    i=i+tz.utcoffset(i)
    result.append(i) 
```

结果列表对象具有您各自时区的 DateTime 值

# mysql - Mysql没有返回所有结果

> ID：13218509
> 
> 赞同：0
> 
> 时间：2012-11-04T12:28:18.893
> 
> 标签：mysql, join

我正在尝试仅使用一个查询来获取一些数据。我需要获取一个商店，它可以有多个模块（或可能没有），对于每个模块，我需要在模块中存在一条记录。

我的问题是启用所有 shop_modules，除了第一个？如果不将其拆分为两个查询，这可能吗？

提前致谢

```
$sql = "
    SELECT 
      s.*, sm.config, m.internal_name 
    FROM shops s 
    LEFT JOIN shop_modules sm ON sm.shop_id = s.id 
    INNER JOIN modules m ON m.id = sm.module_id WHERE s.domain = ?";

$shop = $app['db']->fetchAssoc($sql, array($subdomain)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:09:24.690

我在另一个站点上找到了一个类似问题的答案：“*数据库查询产生一个结果集，它就像一个平面文件——它有行和列*”——例如，如果不拆分查询，我的要求是不可能的成两半！

# ruby-on-rails - 如何将 Aptana 设置为我的默认 BUNDLER_EDITOR？

> ID：13218511
> 
> 赞同：3
> 
> 时间：2012-11-04T12:28:34.040
> 
> 标签：ruby-on-rails, gem, editor, aptana

我尝试使用以下命令打开 gem：

```
$bundle open jquery-rails 
```

但它给了我以下错误：

```
To open a bundled gem, set $EDITOR or $BUNDLER_EDITOR 
```

所以，我在阅读时搜索了一下，我应该打开我的 .bashrc 文件并设置 BUNDLER_EDITOR 变量。我做了以下事情：

```
sudo gedit ~/.bashrc 
```

并在文件末尾输入了上面的行：

```
export BUNDLER_EDITOR=aptana 
```

在示例中，他们使用的是 vim，但由于我使用的是 aptana studio 3，所以我想使用它。

无论如何，它给了我以下错误：

> 无法运行“aptana /home/gotqn/.rvm/gems/ruby-1.9.3-p286/gems/jquery-rails-2.1.3”

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-27T16:16:14.987

I think you need to set `$EDITOR` or `$BUNDLER_EDITOR` in `.profile` file.

You can set it like this:

```
export BUNDLER_EDITOR=aptana 
```

Hope this works for you!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-12T10:51:22.960

试过这个，但它也不起作用：

```
export EDITOR="/Applications/Sublime.app" peterandersson@Macintosh:myapp(0)$ bundle open jquery-rails Could not run '/Applications/Sublime.app /Users/peterandersson/.rvm/gems/ruby-1.9.3-p429/gems/jquery-rails-3.0.1' 
```

但是，`export EDITOR=vimworks`但我宁愿使用 Sublime 而不是 vim：

此链接描述了如何将[Sublime](http://www.sublimetext.com/docs/2/osx_command_line.html)设置为默认值`$EDITOR`。

# php - 如何调用多个JS和多个CSS

> ID：13218518
> 
> 赞同：0
> 
> 时间：2012-11-04T12:29:44.847
> 
> 标签：php, javascript

我的问题是我想调用我所有的 JS 文件，如下面的示例所示。

```
<script src="https://cdn.automd.com/function/combo?t=js&f=settings.js:m,carpicker_plugin.js:m,jquery.backlabel.js:m,modals.js:m,function.js:m,common.js:m,clearfocus.js:m,ubox.js:m,jquery.lightbox_me-2.3.min.js,bubbletip.js:m,buttons.js:m,dropdown_account_switch.js:m&v=3.7.1"></script> 
```

同样，我想调用以下示例中给出的所有 CSS 文件。

```
<link rel="stylesheet" href="https://cdn.automd.com/function/combo?t=css&f=screen.css:m,style.css:m,containers.css:m,buttons.css:m,inputs.css:m,login.css:m,autocomplete.css:m,selectjob.css:m,header.css:m,grids.css:m,automated_quotes.css:m&v=3.7.1"/> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:50:56.933

The PHP tool [Minify](http://code.google.com/p/minify/) can be used to combine (and compress) resources.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:31:58.830

您不能在一个语句中同时包含 CSS 和 JS 文件。但是，您可以合并和缩小所有 JS 文件，并将生成的 JS 文件包含在一个请求中。同样，您可以合并您的 CSS 文件并将其包含在一个请求中。

* * *

如果您注意到脚本和链接标签中的 URL，您会看到这两个请求都由脚本**https://cdn.automd.com/function/combo**提供服务，该脚本采用以下 GET 参数：

`t`- 资源类型（JS 或 CSS），我相信他们会根据这个设置缓存头和内容类型

`f`- 要获取、组合和服务器的文件的逗号分隔列表。不确定`:m`每个文件的后缀是做什么的，我假设它是一个标志，指示文件是否应该被缩小。

# php - 数组到字符串 (php)

> ID：13218524
> 
> 赞同：0
> 
> 时间：2012-11-04T12:30:25.817
> 
> 标签：php, arrays, string

请帮我将数组转换为字符串。

数组看起来像这样：

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [red] => 255
                    [green] => 255
                    [blue] => 255
                    [alpha] => 127
                )

            [1] => Array
                (
                    [red] => 255
                    [green] => 255
                    [blue] => 255
                    [alpha] => 127
                )
             ...

        )

) 
```

我尝试使用内爆功能，但没有结果...

```
$string = implode(", ", $pxlCorArr); 
```

PS：对不起我的英语我来自乌克兰。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T12:41:17.643

大批：

```
$pxlCorArr = 
  array(
      array (
           array('red' => 255, 
                 'green' => 255,
                 'blue' => 255,
                 'alpha' => 127
           ),

           array('red' => 255,
                 'green' => 255,
                 'blue' => 255,
                 'alpha' => 127
           )
      )
  ); 
```

代码：

```
$output = '';
foreach ($pxlCorArr as $subArray) {
    if(is_array($subArray)) {
        foreach ($subArray as $subArray2) {
            if(is_array($subArray2)) {
                $output .= implode ('.', $subArray);
                $output .= ',';
            }
        }
    }
}
$output = rtrim($output, ','); 
```

输出：

> 255.255.255.127,255.255.255.127

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:51:34.610

那将是另一种可能性，作为一个函数，您将初始数组传递给该函数，该函数返回您需要的字符串：

```
function getRGBAlpha($pxlCorArr) {

    $rgbVals = array();
    foreach($pxlCorArr as $subArr) {
        if(is_array($subArr)) {
            foreach($subArr as $colValues) {
                $rgbVals[] = implode('.', $colValues);
            }
        }
    }

    return implode(',', $rgbVals);
} 
```

因此，您可以在代码中的某处执行以下操作，以获得所需的输出：

```
echo getRGBAlpha($pxlCorArr); 
```

应该输出：

```
255.255.255.127,255.255.255.127 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T13:03:29.267

```
Array
(
    [0] => Array
        (
            [0] => Array
                (
                    [red] => 255
                    [green] => 255
                    [blue] => 255
                    [alpha] => 127
                )

            [1] => Array
                (
                    [red] => 255
                    [green] => 255
                    [blue] => 255
                    [alpha] => 127
                )
             ...

        )

)

$string = '';
$array = $exists_array[0];
foreach ($array as $key => $value) {
$string .= $key." : ".$value."\n";
}
print $string; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T13:59:14.873

在 lambda 函数上使用 array_walk：

```
 $implodevals =  create_function('&$val', '$val = implode(".", $val);');
  array_walk($array, $implodevals);
  print rtrim(implode(", ", $array), ","); 
```

输入数组：

```
 $array = Array
    (
        0 => Array
            (
                "red" => 255,
                "green" => 255,
                "blue" => 255,
                "alpha" => 127
            ),

        1 => Array
            (
                "red" => 255,
                "green" => 255,
                "blue" => 255,
                "alpha" => 127,
            )

     ); 
```

# android - android ContactsContract.CommonDataKinds.GroupMembership 和 ICS

> ID：13218526
> 
> 赞同：2
> 
> 时间：2012-11-04T12:30:41.513
> 
> 标签：android, android-4.0-ice-cream-sandwich, group-membership

我需要查明某个特定联系人是否是给定组的成员。我一直在使用下面的代码，并证明它可以使用运行 Gingerbread 的手机工作。但是我一直试图在运行 Android 4.0.3 的 HTC One S 上运行它，但它失败了。API 规范有变化吗？我的代码如下。

```
public boolean checkGroupMembership(String groupID, String contactID, Context ctx) {
            ContentResolver groupContentResolver = ctx.getContentResolver();
                        String select = "contact_id=" + contactID + 
                    " AND " + GroupMembership.GROUP_ROW_ID + " = " + groupID +
                    " AND mimetype='vnd.android.cursor.item/group_membership'";

            Cursor contactGroupCursor =  
                    groupContentResolver.query(
                        Data.CONTENT_URI, 
                        new String[] { GroupMembership.CONTACT_ID,  GroupMembership.GROUP_ROW_ID, GroupMembership.IN_VISIBLE_GROUP }, 
                        select,
                        null, 
                        null);
            int records = contactGroupCursor.getCount();
            try {
            while(contactGroupCursor.moveToNext()){
                String ContactID = contactGroupCursor.getString(contactGroupCursor.getColumnIndexOrThrow(GroupMembership.CONTACT_ID));
                String groupRowId = contactGroupCursor.getString(contactGroupCursor.getColumnIndexOrThrow(GroupMembership.GROUP_ROW_ID));
                String InVisiblegroup = contactGroupCursor.getString(contactGroupCursor.getColumnIndexOrThrow(GroupMembership.IN_VISIBLE_GROUP));

                Log.d("DEBUG", "groupSourceId in checkGroupMembership: " + groupRowId + "  InVisiblegroup = " + InVisiblegroup);
                Log.d("DEBUG", "ContactID in checkGroupMembership: " + ContactID);          

                }       
            } 
            finally 
            {
                contactGroupCursor.close();
            }

            // see if the contact is in this group
            if (records > 0) {
                return true;
            }
            else {

            return false;
            }
        }

    } 
```

除了更改查询以纯粹找出联系人所属的组之外：

```
String select = "contact_id=" + contactID; 
```

导致以下调试输出。在某些情况下 groupRowID 看起来像一个组 ID，在其他情况下它是联系人号码或联系人姓名。请注意，我正在使用我的家庭固定电话呼叫测试，并且出现了这种情况。另外 - 我在手机上只定义了 10 个组，并且在输出中打印了 11、12 和 13 的 id ...可能是我遗漏了什么？我绝对知道我传入的 contact_id 是 Coworkers 组的成员（我手机上的 group_ID 为 5），但这从未在 ICS 中返回。我已经使用两部手机上的联系人管理器应用程序独立验证了 HOME 的组成员身份。

> 11-04 11:48:21.980：D/DEBUG(10145)：在 checkGroupMembership 中选择：contact_id=133 11-04 11:48:21.990：D/DEBUG(10145)：checkGroupMembership 中的记录数：13 11-04 11 ：48：22.000：D / DEBUG（10145）：checkGroupMembership中的groupRowId：null InVisiblegroup = 1 11-04 11：48：22.000：D / DEBUG（10145）：checkGroupMembership中的ContactID：133 11-04 11：48：22.000： D/DEBUG(10145): groupRowId in checkGroupMembership: InVisiblegroup = 1 11-04 11:48:22.000: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.000: D/DEBUG(10145) ：checkGroupMembership 中的 groupRowId：004-414-83326995 InVisiblegroup = 1 11-04 11:48:22.000：D/DEBUG(10145)：checkGroupMembership 中的 ContactID：133 11-04 11:48:22.000：D/DEBUG(10145)： checkGroupMembership 中的 groupRowId：014-833-26995 InVisiblegroup = 1 11-04 11:48:22.000：D/MYOB(10145)：CheckGroupMembership 中的 ContactID：133 11-04 11:48:22.030：D/MYOB（10145）：checkGroupMembership 中的 groupRowId：01483326995 InVisiblegroup = 1 11-04 11:48:22.030：D/DEBUG（10145）：checkGroupMembership 中的 ContactID：133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership: 10 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11: 48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership: 11 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D /DEBUG(10145): groupRowId in checkGroupMembership: 12 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145) ：checkGroupMembership 中的 groupRowId：13 InVisiblegroup = 1 11-04 11：48:22.030:D/DEBUG(10145):ContactID in checkGroupMembership:133 11-04 11:48:22.030:D/DEBUG(10145):groupRowId 在 checkGroupMembership:7 InVisiblegroup = 1 11-04 11:48:22.030:D /DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership: 8 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145) ：checkGroupMembership 中的 ContactID：133 11-04 11:48:22.030：D/DEBUG(10145)：checkGroupMembership 中的 groupRowId：9 InVisiblegroup = 1 11-04 11:48:22.030：D/DEBUG(10145)：checkGroupMembership 中的 ContactID： 133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership: HOME InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133D/DEBUG(10145): groupRowId in checkGroupMembership: 7 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145 ): groupRowId in checkGroupMembership: 8 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership : 9 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership: HOME InVisiblegroup = 1 11-04 11:48:22.030：D/DEBUG（10145）：检查组成员中的联系人 ID：133D/DEBUG(10145): groupRowId in checkGroupMembership: 7 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145 ): groupRowId in checkGroupMembership: 8 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership : 9 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership: HOME InVisiblegroup = 1 11-04 11:48:22.030：D/DEBUG（10145）：检查组成员中的联系人 ID：133D/DEBUG(10145): groupRowId in checkGroupMembership: 8 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145 ): groupRowId in checkGroupMembership: 9 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership : HOME InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133D/DEBUG(10145): groupRowId in checkGroupMembership: 8 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145 ): groupRowId in checkGroupMembership: 9 InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133 11-04 11:48:22.030: D/DEBUG(10145): groupRowId in checkGroupMembership : HOME InVisiblegroup = 1 11-04 11:48:22.030: D/DEBUG(10145): ContactID in checkGroupMembership: 133checkGroupMembership 中的 groupRowId：HOME InVisiblegroup = 1 11-04 11:48:22.030：D/DEBUG(10145)：checkGroupMembership 中的 ContactID：133checkGroupMembership 中的 groupRowId：HOME InVisiblegroup = 1 11-04 11:48:22.030：D/DEBUG(10145)：checkGroupMembership 中的 ContactID：133

PS 请有足够权限的人将“GroupMembership”作为标签添加到网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:20:00.647

Nothing's changed in group membership between Honeycomb and 4.0.3.

It would be easier to read all this if you used LogCat or even did a ListView and screenshot or something. It's hard to understand what your problem is. You can do a dump of ContactsContract.Groups to see what groups are defined for the database. Unless you're absolutely certain that both handsets have *exactly* the same data, you're gonna find differences. The only way to ensure they have exactly the same data is to wipe the contacts data off them and sync them both to a small test dataset.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:07:43.950

下图显示了 Gingerbread (Cyanogen) 和 ICS (HTC) 使用完全相同的代码生成的组的转储。正如您所看到的，它们在数据的呈现方式方面完全不同。出于某种原因，这些组在 ICS 中在某种程度上是重复的。所以问题是，如果我打算使用组 _ID 来执行查找，我该如何跨不同的版本进行管理。请注意，在 ICS 上的联系人应用程序中，每个组只出现一次，所以我怎么知道这是指哪个 ID？

![](../Images/6617385db65d355ed2219b6e6cba3442.png)

# exchangewebservices - EWS API FindItems 按 Id

> ID：13218529
> 
> 赞同：3
> 
> 时间：2012-11-04T12:31:00.063
> 
> 标签：exchangewebservices

我想通过 Id 获得一个项目。这是我的代码，但我不知道为什么它不起作用！

```
AlternateId ewsID = ExchangeServiceManagement.ConvertOWAid(
                exchangeService, letterRequestData.Id, letterRequestData.FromSender);

ItemView itemView = new ItemView(1);
            FindItemsResults<Item> findItemsResults = exchangeService.FindItems(WellKnownFolderName.Inbox, "id:" + ewsID, itemView);

internal static AlternateId ConvertOWAid(ExchangeService esb, String oiOWAID, String emEmailAddress)
        {
            AlternateId alternateId = new AlternateId();
            alternateId.Format = IdFormat.OwaId;
            alternateId.UniqueId = oiOWAID;
            alternateId.Mailbox = emEmailAddress;

            AlternateId resultAlternateId = (AlternateId)esb.ConvertId(alternateId, IdFormat.EwsId);

            return resultAlternateId;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:31:31.987

获取 EWS 托管 API 并遵循 msdn 上的“教程”：http: [//msdn.microsoft.com/en-us/library/exchange/dd633693 (v=exchg.80).aspx](http://msdn.microsoft.com/en-us/library/exchange/dd633693(v=exchg.80).aspx)

# c# - 为自定义 .dll API 起一个强名称

> ID：13218530
> 
> 赞同：0
> 
> 时间：2012-11-04T12:31:04.760
> 
> 标签：c#, api, dll

我一直在环顾四周，在任何地方都找不到直接的答案。差不多，我有一个在调试中运行良好的程序，我准备发布它。我有一个问题。我的朋友给了我一个自定义 API (.dll) 来使用，现在我在尝试发布时收到以下错误：

> 错误 1 ​​程序集生成失败 -- 引用的程序集“CustomAPI”没有强名称

简而言之，如何给它起一个“强名”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:38:17.920

如果您可以获得程序集的源代码，请参阅[这些说明](http://msdn.microsoft.com/en-us/library/ms247123%28v=vs.80%29.aspx)。否则，请阅读这篇[博文](http://buffered.io/posts/net-fu-signing-an-unsigned-assembly-without-delay-signing/)。

# php - 将base64图像从php查询传递到html5画布

> ID：13218532
> 
> 赞同：1
> 
> 时间：2012-11-04T12:31:07.647
> 
> 标签：php, javascript, html, canvas

我使用 PHP 中的查询从数据库中获取 base64 字符串。这个字符串代表一个图像。

我想在 html5 画布中显示此图像，但它不起作用。

该字符串存储在 $DBimage 中。然后我使用：

```
var complex = <?php echo ($DBimage); ?>;
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
image.src = "data:image/  png;base64, document.write(complex)";
ctx.drawImage(image, 0, 0);} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:33:10.330

base64 仍然是一个字符串，所以你需要引用它。另外，您在字符串中使用 document.write 吗？我假设你试图附加它。

```
var complex = "<?php echo $DBimage; ?>";
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
image.src = "data:image/png;base64," + complex;
ctx.drawImage(image, 0, 0);} 
```

**更新：**

`$DBImage`根据[this](http://www.bartf.nl/base64/)的外观，有换行符。这会导致 javascript 错误。（Javascript 中的字符串中不允许有新行），这应该可以解决它。

```
var complex = "<?php echo str_replace("\n", "", $DBimage); ?>";
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
image.src = "data:image/png;base64," + complex;
ctx.drawImage(image, 0, 0);} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:49:35.417

此代码有效

```
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var image = new Image();

image.src = "data:image/png;base64, /9j/4AAQSkZJRgAB...etc";
image.onload = function() {
ctx.drawImage(image, 0, 0);
} 
```

但

```
var complex = "<?php echo $DBimage; ?>";
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var image = new Image();

image.src = "data:image/png;base64, /9j/4AAQSkZJRgAB...etc";
image.onload = function() {
ctx.drawImage(image, 0, 0);
} 
```

不工作。因此，只有从 php 添加回声才能使画布不显示任何内容。

# javascript - 如何正确将touchstart事件转换为mousedown？

> ID：13218534
> 
> 赞同：3
> 
> 时间：2012-11-04T12:31:24.570
> 
> 标签：javascript, ios, touch

我有一个基于`mousedown`事件的工作代码。我想在事件代码开始时将`touchstart`事件转换为`mousedown`事件以保留现有代码。

如何正确转换`touchstart`事件`mousedown`？

`touchstart`带有事件的示例代码：

```
var top = event.touches[i].pageY; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:42:30.363

创建您自己的事件对象，然后`mousedown`使用该事件对象调用您为事件调用的函数。例如：  

```
var mousedownEventFunc = function (e){
   // use the event object however
   alert(e.pageX);
};

document.getElementById('selectorID').addEventListener('touchstart', function (e){
    mousedownEventFunc({
        pageX: e.touches[0].pageX,
        pageY: e.touches[0].pageY
    });
}, false); 
```

# jquery - 无法使用 jQuery 在浏览器缓存中加载图像

> ID：13218536
> 
> 赞同：-1
> 
> 时间：2012-11-04T12:31:46.693
> 
> 标签：jquery

我有一个小的 jQuery 程序，它实现了具有淡入淡出效果的图像幻灯片。当渲染图像并且必须显示下一个图像时，它首先在后台加载然后渲染。加载图像的代码如下：

```
 var img = $('<img/>'); 
    img.attr('src', imageUrl);

    img.load(function()
      {
        $(photo).attr('loaded' + mediaSize, true)
                .attr('width',              this.width)
                .attr('height',             this.height);
        renderPhoto(photo, mediaSize);
      }); 
```

在 renderPhoto() 中渲染照片的相关部分是：

```
 $("#image" + activeContainer).css({ "background-image" : "url(" + imageUrl + ")" }); 
```

还有一个控件可以跟踪加载的图像并且不会重新读取它们两次，假设之前已经加载，它们在浏览器缓存中。

一切正常，但缓存。每当渲染图像时（使用上面的最新代码行），它总是从服务器重新加载，破坏淡入效果。

服务器返回的标头似乎可以用于缓存：

```
% curl -o /tmp/x -v http://stoppingdown.net/media/stillimages/20100102-0072/1280/image.jpg
* About to connect() to stoppingdown.net port 80 (#0)
*   Trying 78.46.194.117...   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0connected
* Connected to stoppingdown.net (78.46.194.117) port 80 (#0)
> GET /media/stillimages/20100102-0072/1280/image.jpg HTTP/1.1
> User-Agent: curl/7.21.4 (universal-apple-darwin11.0) libcurl/7.21.4 OpenSSL/0.9.8r zlib/1.2.5
> Host: stoppingdown.net
> Accept: */*
> 
< HTTP/1.1 200 OK
< Date: Sun, 04 Nov 2012 11:52:08 GMT
< X-NorthernWind-Version: 1.1-ALPHA-19
< Content-Type: image/jpeg
< Content-Length: 2207579
< Last-Modified: Thu, 01 Nov 2012 00:08:11 CET
< ETag: "1351724891000"
< Expires: Sun, 11 Nov 2012 12:52:08 CET
< Server: Jetty(6.1.24)
< 
{ [data not shown] 
```

使用 Chrome 进行调试并查看资源窗格，我可以看到同一图像的多个条目，在每一轮重新加载（例如，在第一轮我看到 20031227-0085.jpg，当幻灯片开始第二个循环时，我看到两个20031227-0085.jpg，然后是三个，依此类推）。绝对资源没有加载到浏览器缓存中......我不明白为什么。

谢谢。

PS 完整代码可[在此处](https://bitbucket.org/tidalwave/bluette-src/src/810394e72951dea6eaacc8019a995c87273487c0/bluette/js/bluette.js?at=default)获得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T21:00:42.803

实际上，我发现我的 jQuery 代码确实可以正常工作。问题出在服务器上，它没有正确支持缓存（即使应该使用 304“未修改”，它也总是发回带有有效负载的 200 HTTP 状态）。修复服务器中的问题修复了所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T14:13:24.173

查看带有 jquery 的[示例](http://jsfiddle.net/oceog/p3hsf/)，如何预加载图像，而不在加载时显示它：

HTML：

```
​&lt;div>Here will be image</div>
<button>Click to load</button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS：

```
.images {
 width: 100px;
 height: 100px;
 border: 1px solid black; 
 transition: background 1s,width 1s,height 1s;
 -webkit-transition: background 1s,width 1s,height 1s;
 -mozilla-transition: background 1s,width 1s,height 1s;
 -o-transition: background 1s,width 1s,height 1s;
}​ 
```

JS：

```
var showimage = function(image) {
    var div = $('.images');
    div.empty();
    div.width(image.get(0).width);
    div.height(image.get(0).height);
    div.css({
        'background-image': "url(" + image.attr('src') + ")"
    });

}

var images = ['http://www.dragongoserver.net/images/dragonlogo_bl.jpg', 'http://www.dragongoserver.net/images/dragon_logo.jpg', 'http://cdn.last.fm/flatness/listen/radio_icon_medium.png']
$('button').click(function() {
    var image = $(new Image());
    image.attr('src', images[0]);
    images.push(images.shift());
    if (image.get(0).complete === true) {
        showimage(image);
    } else {
        image.load(function() {
            console.log('loading...');
            showimage(image);
        });
    }
});​ 
```

# google-apps-script - 使用 Google Apps Script HTMLService 进行双重 HTML 编码

> ID：13218538
> 
> 赞同：3
> 
> 时间：2012-11-04T12:31:53.107
> 
> 标签：google-apps-script

我正在使用 Google Apps Script Html Service 来呈现 HTML 页面。

问题是显示 HTML 实体而不是预期的特殊字符。例如：

```
Miss McCleod's renders to Miss McCleod&#39;s  
view source is: "text-align: center\"> Miss McCleod&amp;#39;s 
```

渲染工作正常

```
<code> <?=tune.tuneName?> </code> 
```

但不是：

```
<h1 style="text-align:center;"><?=tune.tuneName?> </h1> 
```

其中 tune.tuneName 是已从缓存中提取的对象的成员变量。该对象是从谷歌电子表格中填充的，并且在放入和获取缓存时使用了 Utilities.jsonStringify() 和 Utilities.jsonParse()。

HTML 模板脚本如下所示。

```
<h1 style="text-align:center;"><?=tune.tuneName?> </h1> 
<code> <?=tune.tuneName?> </code>

<div style="text-align:center;">    
  <? var imageUrl = getUrlForAttachmentFileName(tune.musicNotesImageFileName) ?>
  <img src="<?=imageUrl?>" alt="<?=tune.tuneName?>" align="center">
</div> 
```

以下代码用于实例化页面。

```
tuneRec = findTuneById(tuneId);  
var printHtmlTemplate = HtmlService.createTemplateFromFile('PrintPage');
printHtmlTemplate.tune = tuneRec;
return printHtmlTemplate.evaluate();

Miss McCleod&amp;#39;s implies that double encoding is taking place. 
```

任何关于如何解决上述问题的想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T16:09:07.643

如果您不想转义，请使用`<?!=`而不是。`<?=`

# ruby-on-rails-3 - Rails 抽象自定义销毁方法（或默认为模型错误添加异常）

> ID：13218540
> 
> 赞同：1
> 
> 时间：2012-11-04T12:32:01.980
> 
> 标签：ruby-on-rails-3, activerecord

当无法销毁特定​​模型时，我要做的是返回错误而不是异常。目前，它会引发`ActiveRecord::DeleteRestrictionError`，但不会返回到 flash 消息，也不会添加到模型的错误集合中。

我所做的是在我足智多谋的控制器中进行设置：

```
 def destroy
    begin
      resource.destroy
    rescue ActiveRecord::DeleteRestrictionError => e
      resource.errors.add(:base, e)
    end
  end 
```

我宁愿不在每个需要这种特殊行为的控制器中管理它。我该如何抽象它？我看不出覆盖 destroy 方法是个好主意`ActiveRecord::Base`，但也许不会有任何陷阱？

我正在使用inherited_resources gem，所以也许有办法通过扩展来回答这个问题？

我的另一个想法是扩展`ActiveRecord::Base`使用`ActiveSupport::Concern`（从这里：[Rails 扩展 ActiveRecord::Base](https://stackoverflow.com/questions/2328984/rails-extending-activerecordbase)），然后在模型到模型的基础上将销毁方法委托给自定义销毁。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:38:54.457

首先我要说我同意不覆盖 ActiveRecord::Base 方法如销毁的态度。为了干燥这种行为，你有几个选择，我将列出其中两个：

第一个 - 而不是在特定控制器中编写救援子句，您可以将其嵌入到您的 ApplicationController 中，这样行为将是应用程序范围的：

```
# ApplicationController.rb

rescue_from ActiveRecord::DeleteRestrictionError do |exception|
  resource.errors.add(:base, exception) if resource
end 
```

另一种选择是制作一个模块并将其包含在您希望具有此行为的不同控制器中：

```
module SafeDestroyer
  def safe_destroy(resource)
   begin
      resource.destroy
    rescue ActiveRecord::DeleteRestrictionError => e
      resource.errors.add(:base, e)
    end
  end
end

class MyController < ApplicationController
  include SafeDestroyer

  def destroy
    safe_destroy(resource)
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:09:11.347

我最终做的是从主资源控制器继承我的控制器，我发现它比讨论的其他选项更清洁和强大（在这里找到：[http ://roberto.peakhut.com/2010/09/27 /admin-controllers-with-inherited-resources/](http://roberto.peakhut.com/2010/09/27/admin-controllers-with-inherited-resources/)）。

```
// controllers/resources_controller.rb
class ResourcesController < ApplicationController
  load_and_authorize_resource
  inherit_resources

  def destroy
    begin
      resource.destroy
    rescue ActiveRecord::DeleteRestrictionError => e
      resource.errors.add(:base, e)
    end
  end
end 
```

然后，只需从该控制器而不是 ApplicationController 继承您的资源丰富的控制器：

```
// controllers/models_controller.rb
class ModelsController < ResourcesController

end 
```

希望对处于类似情况的人有所帮助。

# r - 如何从矩阵生成 R 中的等高线图

> ID：13218541
> 
> 赞同：0
> 
> 时间：2012-11-04T12:32:13.650
> 
> 标签：r, matrix, contour

我有一个文件，其中包含一个 nxn 数值矩阵，其标题行和列包含标签。

我想用 R (2.14.x) 生成值的等高线图，所以我像这样加载矩阵：

`mat <- as.matrix(read.table("myfile", row.names=1, sep=",", header=TRUE))`

然后尝试通过以下方式生成等高线图：

`contour(rownames(mat), colnames(mat), mat)`

但我得到了错误：

```
Error in r[i1] - r[-length(r):-(length(r) - lag + 1L)] : 
  non-numeric argument to binary operator 
```

产生问题的示例矩阵包含：

```
,1,2,3
1,827786,672544,622597
2,674201,651413,533766
3,626531,533179,489844 
```

出了什么问题，我该如何解决？我对 R 很陌生，所以我可能在这里做一些愚蠢的事情。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:36:15.590

哦。一定是在途中误读了一些文档 -`contour(mat)`工作正常。

我从[http://wiki.cbr.washington.edu/qerm/index.php/R/Contour_Plots](http://wiki.cbr.washington.edu/qerm/index.php/R/Contour_Plots)之类的文档中认为我需要拆分 x、y、z。

# java - 一个类可以在java中实例化为静态吗？

> ID：13218542
> 
> 赞同：6
> 
> 时间：2012-11-04T12:32:21.620
> 
> 标签：java

> **可能重复：**
> [Java：静态类？](https://stackoverflow.com/questions/1844355/java-static-class)

一个类可以在java中实例化为静态吗？

```
static class c1(){

} 
```

这可以做到吗？我对此感到困惑，并且对非静态内容的内存映射感到困惑。请帮忙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T12:56:13.133

类定义的意义`static`不在于该类是否可以实例化，而在于该类是否必须从外部类的非静态方法中实例化。

非静态内部类实例与创建它们的实例相关联——内部类实例中有一个指向创建实例的指针（这在许多方面都很有用）。静态内部类实例与创建实例无关。

（我在 JVM 内部工作了大约 10 年，但我仍然觉得这很混乱。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:43:41.153

> 可以用 java 中的 static 关键字实例化该类吗？例如：静态类 c1(){ }

您的术语不正确。“实例化一个类”是指创建一个类的实例；即*创建一个对象*。这是使用`new`操作完成的。您的示例实际上是关于*声明*一个类。

话虽如此，是的，您可以将类声明为`static`，但这只能用于嵌套类；即*在*另一个类中声明的类。

> 我对此感到困惑，并且内存映射与非静态的东西的请帮助

我不知道你在这里说什么。如果您在这一点上需要更多帮助，则需要更清楚地解释自己。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T12:56:36.993

static 与内存映射没有任何关系。这意味着没有与之关联的实例。

对于 a`static class`它意味着类的实例不与外部类实例相关联。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T12:57:35.793

它打破了范式。考虑一下：静态成员是每个实例都具有的共同成员，但是不清楚如何将共享的这种想法扩展到一个类？

您期望 static 关键字做什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T13:11:03.370

您可以拥有静态类，如下所示

```
class A
{
static class B   //static inner class
    {
     static void dis()
      {
      System.out.println("this is me");
      }
    }
}

class four extends A.B
{ 
    public static void main(String args[])
    {
    dis();

    }
} 
```

# php - 使用 CakePHP 模型进行客户端验证

> ID：13218543
> 
> 赞同：2
> 
> 时间：2012-11-04T12:32:22.677
> 
> 标签：php, cakephp, jquery-validate

在 ASP.NET MVC 中，他们通过 jQuery 验证插件使用客户端验证，但不是在客户端设置规则，而是使用模型中的规则。CakePHP 有这样的东西吗？如果没有 JS 和客户端但从模型中提取规则，您可以同时拥有服务器端。

我已经看过自己开发的东西。如果您访问此处： http: [//www.nerddinner.com/Account/LogOn](http://www.nerddinner.com/Account/LogOn)并尝试提交带有空字段的登录表单，您将看到针对 ASP.NET 的验证。如您所见，他们使用不显眼的插件来实现这一点，该插件使用数据属性形式的规则。

我猜如果存在验证规则，我可以做一些事情来附加表单助手来添加这些......我遇到的问题是我如何与模型交谈？例如，假设我有一条规则，说数据库中的电子邮件地址的字段需要是唯一的，我将如何实现这一点，因为它需要通过与服务器、模型和数据库交谈来了解它是否是唯一的。

任何示例都会很棒或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:49:31.733

[Here's](https://github.com/mcurry/js_validate) a plugin for what you need. But it's very old for CakePHP 1.2\. So you will have to update it for 2.x or use it as inspiration for your own 2.x compatible plugin.

# python - 选择排序“开关”代码

> ID：13218551
> 
> 赞同：1
> 
> 时间：2012-11-04T12:33:48.077
> 
> 标签：python, sorting

我不明白选择排序算法的一部分。在代码的后半部分（使用`temp`变量的地方，为什么是`L[i]`和`L[minIndx]`赋值？这些值本身不就不是吗？不能只给变量赋值吗？

```
def selSort(L):
    for i in range(len(L) - 1):
        minIndx = i
        minVal = L[i]
        j = i+1
        while j < len(L):
            if minVal > L[j]:
                minIndx = j
                minVal = L[j]
            j += 1
    # aren’t L[i] and L[minIndx] values? How can they be assigned to new values?
        if minIndx != i:
            temp = L[i]
            L[i] = L[minIndx]
            L[minIndx] = temp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:45:02.100

`L`是一个数组，它是一个包含许多索引元素的变量，每个索引元素就像另一个可以分配新值的变量。

所以`L[i]`和`L[minIndx]`都是可以分配新值的数组元素，这就是这里正在做的事情来移动元素以对它们进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T12:45:48.337

`L[0]`例如引用一个值或引用......如果你有一个数组`L=[10,20,30]`......`L[0]`引用这个值`10`，当你这样做时`L[0]`，结果将是引用索引的值 - `10`...当你这样做时`L[0] = 100`......这个索引值`0`将改为`100`. 你不能这样做`10 = 100`，因为`10`它是一个常量值，而不是一个变量，但是你可以这样做，`L[0] = 100`因为`L[0]`引用了数组中的一个地方。

# assembly - MASM 中斐波那契数列的输出不正确

> ID：13218552
> 
> 赞同：2
> 
> 时间：2012-11-04T12:34:03.683
> 
> 标签：assembly, x86, masm, irvine32

我一直在为分配工作编写此代码，似乎无法正确输出。谁能帮帮我？

注意：程序在 MASM 中编译

1.  我只被允许使用**reg-mem**和**reg-reg**架构命令。
2.  仅使用**MOV**、**ADD**、**DEC**、**JMP**或**Jcc**指令。
3.  仅使用**四个主要寄存器**，即**EAX**、**EBX**、**ECX**和**EDX**，以及**ESI**寄存器及其子寄存器进行算术/逻辑运算。
4.  除了字符串内存变量之外，不允许使用其他内存变量。

以下是代码：

```
INCLUDE Irvine32.inc
.data

string1 byte "Enter number to generate Fibonacci series: ",0
string2 byte "Fibonacci is ",0

.code
main PROC
call    DumpRegs;
mov     edx,offset string1;
call    writestring;
call    ReadInt;
mov     ecx,eax;
mov     eax,1;
call    DumpRegs;
dec     ecx;
mov     esi,eax;
JMP     Jumpzero;
mov edx, offset string2;    
call writeint           ;   Display the contents of eax register on the output device

Jumpzero:
add     eax,esi;
call    DumpRegs;
inc     esi;
dec     ecx
jnz     Jumpzero
exit
MAIN ENDP   
END main 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T16:08:56.740

```
; ...
call ReadInt
mov ecx,eax

mov eax,1
mov edx,eax
call writeint    ; Assuming EDX is incremented by writeint
_generate:
    call writeint
    add eax,edx
    mov edx,eax
loop _generate
; ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-19T14:52:38.670

斐波那契只需要记录两个数字。如果 XCHG 被允许，逻辑将是：

```
 swap(A, B)
    A += B 
```

如果不是，则交换需要一个临时变量：

```
 D = B
    B = A
    A = D
    A += B 
```

A 和 B 的初始值取决于您希望第一个输出是什么。例如，从 A = 1 (fib(-1)), B = -1 (fib(-2)) 开始，则将产生序列 0,1,1,2,3,5, ...。或者从 A = 0 (fib(0)), B = 1 (fib(-1)) 开始，产生序列 1,1,2,3,5, ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-19T14:30:25.947

哦，天哪，人们是根据欧文的东西来教学的吗？这解释了很多。

我认为您需要这样考虑：

你需要记住3个数字：

*   当前号码

*   以前的号码

*   当前和以前的总和

然后将当前移动到上一个，汇总到当前并继续。

所以如果你设置为 ebx=current value, edx=previous value, ecx= number of values to output

然后您可以使用中央循环，例如：

```
fib_loop:
    mov eax, ebx
    add eax, edx
    mov edx, ebx
    mov ebx, eax
    call writeint
    dec ecx
jnz fib_loop 
```

> 注意：我从您的评论中获取了 'writeint' proc 的行为，它仅在输出设备上显示 eax，并假设它不会与任何其他寄存器混淆。

# c++ - C++ 简单但棘手的递归

> ID：13218554
> 
> 赞同：1
> 
> 时间：2012-11-04T12:34:29.447
> 
> 标签：c++, recursion

很简单，我试图定义一个递归方法来返回向量的媒介。但是，我的代码不起作用，编译器没有抱怨，只是程序在调用函数时终止了。我试图一遍又一遍地查看代码。任何帮助将不胜感激：D

```
int minR(vector<int> vec, size_t start){
  if(start == vec.size()-1){return vec[start];}
  int temp = minR(vec, start++);
  return ((vec[start] < temp) ? vec[start] : temp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:37:46.863

在这一行

```
int temp = minR(vec, start++); 
```

你在打电话`minR(vec, start)`，而不是`minR(vec, start+1)`你想象的那样。这会导致无限递归，这就是您的程序停止的原因。

你应该打电话

```
int temp = minR(vec, start + 1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:37:46.940

```
 int temp = minR(vec, start++); 
```

应该是这样的：

```
 int temp = minR(vec, start + 1); 
```

后缀`++`增加值并“返回”前一个值，这实质上是调用具有相同值的函数`start`。

# android - 到处都找不到新的 Android 布局编辑器

> ID：13218556
> 
> 赞同：2
> 
> 时间：2012-11-04T12:34:47.437
> 
> 标签：android, eclipse, android-layout

我已阅读有关“打开方式”的所有提示，以便在 Eclipse 中获得新的布局编辑器。不幸的是，我在任何列表上都看不到布局编辑器，即使在首选项上也是如此。有一个传统的，但我想它不是正确的。

我曾经看过一次新的布局编辑器，但后来我想检查 xml 代码。之后，不再有布局编辑器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T12:48:54.030

`Right click`在 xml 布局文件上，然后选择`Open With | Android Common XML Editor`然后选择`Graphical Layout`选项卡。

# java - 一定时间的显示帧

> ID：13218563
> 
> 赞同：2
> 
> 时间：2012-11-04T12:36:30.220
> 
> 标签：java, splash-screen

我有 3 个类，main.class，login.class，然后是 splash-screen.class

我的启动画面中没有主屏幕，它只在 main.class 运行时运行，问题是我希望我的启动屏幕只出现 3 秒，然后它必须消失并显示登录 .class（它只是有控制登录）

我怎么做？

在我运行 main 的那一刻，spearscreen.class 和 login.class 都出现了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:15:51.273

使用摆动[计时器](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)：

*   显示启动画面
*   创建一个延迟 3 秒的 Timer，然后调用`setRepeats(false)`此计时器。它的 ActionListener 应该隐藏启动框架，并显示登录框架
*   启动计时器

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-04T13:21:50.460

下面显示的代码可能对您有用：

```
 public static void showSplash(int duration) {
                SplashScreen splash1 = SplashScreen.getSplashScreen();
                if(splash1==null){
                File file1=new File("splash.jpg");
                String imgfile1=file1.getAbsolutePath();

                JWindow splash = new JWindow();
                JPanel content = (JPanel)splash.getContentPane();

                int width = 655;
                int height = 442;
                Dimension screen = Toolkit.getDefaultToolkit().getScreenSize();
                int x = (screen.width-width)/2;
                int y = (screen.height-height)/2;
                splash.setBounds(x,y,width,height);

                JLabel label = new JLabel(new ImageIcon(imgfile1));
                content.add(label, BorderLayout.CENTER);
                splash.setVisible(true);
            // Wait a little while, maybe while loading resources
                try
                {
                    Thread.sleep(duration);
                } catch (Exception e) {}
                splash.setVisible(false);
                }
            } 
```

您可以在方法的第一行调用此`main()`方法。

# mysql - mysql myisam更新

> ID：13218566
> 
> 赞同：0
> 
> 时间：2012-11-04T12:36:47.833
> 
> 标签：mysql, database, innodb, myisam

我们将 MySQL 与 MyIsam 引擎一起使用，并且我们需要每天更新大量行（数百万行），而用户仍然可以访问数据库。

我们有来自美国、英国、印度、中国不同时区的用户。当用户首次注册时，数据是从第三方来源下载的。所有用户共享同一组表，但他们的数据不重叠，即没有用户将访问与另一个用户相同的行。

第三方系统会修改数据，以使我们的数据库保持最新，我们每晚下载用户数据的新快照。用户数据在相对于该用户时区的午夜更新。

由于所有用户共享同一张表，这意味着数据更新过程可以更新美国时区用户的数据，而英国用户正在积极浏览他们的数据。这就是问题所在。我们有数以百万计的数据要更新，但我们做不到。

请建议如何在不影响访问数据库的其他用户的情况下最好地更新用户的数据。数据库中存储的数据是数字，所有列都是整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:12:30.537

我看到两个解决方案：

*   更改为 InnoDB 数据库引擎 - 这将为您提供行级锁定而不是表级锁定。请注意插入通常较慢。
*   按地区划分你的桌子。根据您的情况，如果您的表格按区域划分，您将永远不会同时读取和写入任何表格。

# c++ - 如何在 Windows 上的 c++ 中获取系统 cpu/ram 使用情况

> ID：13218567
> 
> 赞同：10
> 
> 时间：2012-11-04T12:37:00.373
> 
> 标签：c++, windows, cpu, ram

我知道这个问题已经被问过很多次了。我环顾四周，但似乎找不到答案。

我确实找到了这段代码[How to get memory usage under Windows in C++](https://stackoverflow.com/questions/282194/how-to-get-memory-usage-under-windows-in-c#comment16868612_8500024)。但它不会编译，我看到的所有其他答案都是关于如何获得单个进程的 cpu/ram 使用率。

# java - ActivityUnitTestCase getActionBar() 返回 null

> ID：13218568
> 
> 赞同：6
> 
> 时间：2012-11-04T12:37:09.043
> 
> 标签：java, android, unit-testing

我的`FragmentActivity`电话：`getActionBar()``onCreate()`

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_new_expense);
    getActionBar().setDisplayHomeAsUpEnabled(true);
} 
```

当在模拟器或设备上正常运行应用程序时，这可以正常工作。但是，当我用 a 测试 Activity 时`ActivityUnitTestCase`，`getActionBar()`总是返回 null。

```
public class NewTransactionTest extends ActivityUnitTestCase<TransactionEditActivity> { 

    private RenamingDelegatingContext myContext;
    private DatabaseHelper myHelper;
    private RuntimeExceptionDao<Account,Long> myDao;
    private Account myBankAccount1;
    private Account myBankAccount2;
    private Account myCategory1;
    private Account myCategory2;
    private Budget myBudget;

    public NewTransactionTest() {
        super(TransactionEditActivity.class);
    }

    @Override
    protected void setUp() throws Exception {
        super.setUp();

        myContext = new RenamingDelegatingContext(getInstrumentation().getTargetContext(), "test");
        myContext.deleteDatabase(DatabaseHelper.DATABASE_NAME);
    }

    @UiThreadTest
    public void testPreConditions() throws Throwable {
        setActivityContext(myContext);
        final TransactionEditActivity activity = startActivity(new Intent(), null, null);
    } 
```

有谁知道为什么`getActionBar()`单元测试返回 null ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:07:28.547

这是设计的一部分。您是否尝试过使用 ActivityInstrumentationTestCase2 代替？不能保证它会起作用，但有更好的机会。ActivityInstrumentationTestCase2 中可供您使用的 Context 支持更多功能。

Android 中的真正单元测试很难做到。特别是对于活动，您应该允许自己“作弊”并进行功能测试。

# css - 我怎样才能掩盖一个 与另一个的边界 ?

> ID：13218569
> 
> 赞同：2
> 
> 时间：2012-11-04T12:37:12.023
> 
> 标签：css, z-index

我正在尝试将[GCLI](https://github.com/mozilla/gcli)的输入从页面底部移到顶部。但是，我不能让它看起来很正确。**为什么我不能让`.gcli-panel-connector`<div> 覆盖`.gcli-tt`<div> 的边框？**我认为这与z-index有关。

请比较这两个现场演示：

*   输入位于底部且边框被正确覆盖的[原始代码](https://dl.dropbox.com/u/508947/gcli/orig/index.html)
*   [输入位于顶部的更改代码](https://dl.dropbox.com/u/508947/gcli/top/index.html)，但未根据需要覆盖边框

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:20:16.167

`.gcli-panel-connector`添加：

```
position: relative;
z-index: 1;
top: 1px; 
```

请记住，这`z-index` [仅适用于定位元素](http://www.w3.org/TR/CSS21/visuren.html#z-index)。

# java - Java - JEditorPane 的 HTML5 替代品

> ID：13218572
> 
> 赞同：6
> 
> 时间：2012-11-04T12:37:38.830
> 
> 标签：java, html, browser, jeditorpane

我正在尝试为项目创建一个简单的 Web 浏览器，但我正在使用 JEditorPane 来呈现和显示 HTML。我听说 JEditorPane 不应该用作浏览器组件，因为它不支持 HTML3.2 以上的任何内容（即使那样也不能正确显示），但我似乎找不到 HTML5 的替代品。谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T12:40:41.050

您可以使用 JavaFX-2 [Webview](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)。来自 JavaFX-2[添加 HTML 内容](http://docs.oracle.com/javafx/2/webview/jfxpub-webview.htm)教程文档：

> 嵌入式浏览器组件基于 WebKit，一个开源的 Web 浏览器引擎。它支持级联样式表 (CSS)、JavaScript、文档对象模型 (DOM) 和 HTML5。

对于 javafx-2 与 swing 的集成，我建议您阅读[Swing 和 Javafx-2 互操作性](http://docs.oracle.com/javafx/2/swing/swing-fx-interoperability.htm#CHDIEEJE)文章。

我希望它有所帮助。干杯

# objective-c - 类方法的不完整实现 - 缺少什么？

> ID：13218586
> 
> 赞同：0
> 
> 时间：2012-11-04T12:39:06.247
> 
> 标签：objective-c, implementation, class-method

我已将我的一个实例方法更改为一个类方法，以便可以从另一个类访问它。该方法已成功调用，但我的代码有一个警告：

*   不完整的实现（在'@implementation myViewController'行）

我的课程代码如下所示：

```
//...

@implementation myViewController

#pragma mark - myMethod
+ (void)myMethod:(CustomUIView *)customView didSelectText:(NSString *)text
{
    //...
}

//... 
```

在我的类头文件中，我有以下内容：

```
#import "CustomUIView.h"

//...

@interface myViewController : CustomUIViewController <CustomUIViewDelegate>
{
    //...
}

//...

@end 
```

我想我必须在头文件的错误部分声明该方法，可能是由于该子句？或者我完全错过了其他东西。我已经很好地浏览了网络，[据我所知，我正在遵循协议](http://www.techotopia.com/index.php/Writing_Objective-C_Class_Methods)；也许我的设置有些特殊？

**编辑**：这是我的 CustomUIView 头文件中的协议：

```
@class CustomUIView;

@protocol CustomUIViewDelegate <NSObject>

+ (void)myMethod:(CustomUIView *)customView didSelectText:(NSString *)text;
//...
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:06:33.997

Your mistake is in the name of the method. Implementation is `didSelectText` and interface is `didSelectTerm`. (Text vs Term -> obviously should be the same) Also, you call `[[self class] otherMethod:text];` as a class method, which, if you look closely, is not.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T14:06:27.273

你的改变没有意义。

您可以从其他类访问实例方法——它们不必是类方法。类方法意味着它们是由类实现的方法，而不是类的实例。

其次，在您的新类方法中，您正在调用作为实例方法的方法（otherMethod:)，即由类的对象调用的方法。由于您在此处调用它`[[self Class] otherMethod:text]`是错误的，因为 [self Class] 用于调用类方法，而不是实例方法。您没有对要向其发送消息的类对象的有效引用。

加上：

你已经实现了一个方法：

```
+ (void)myMethod:(CustomUIView *)customView didSelectTerm:(NSString *)text; 
```

但是您的协议期望：

```
+ (void)termTextClickedOn:(TSAlertView *)customView didSelectTerm:(NSString *)term; 
```

您给实际参数的名称无关紧要，因此文本和术语的差异不计算在内，但方法名称，如用 Objective-C 编写的那样归结为：

```
+ myMethod:didSelectTerm: 
```

和

```
+ termTextClickedOn:didSelectTerm: 
```

Not only are the two names different, but the types of the first parameters are different as well, one takes a `CustomUIView *`, the other takes a `TSAlertView *`, which might work if one is a subclass of the other, but in any case, your method names are wrong.

# django - Django：有任何关于 PayPal 自适应支付的应用推荐吗？

> ID：13218587
> 
> 赞同：0
> 
> 时间：2012-11-04T12:39:13.383
> 
> 标签：django, paypal, paypal-adaptive-payments

正如标题所说，我正在寻找一个可以帮助我将 PayPay Adaptive Payments API 与 Django 网站集成的应用程序。

到目前为止，我已经检查过了

*   django-paypal ( [https://github.com/dcramer/django-paypal](https://github.com/dcramer/django-paypal) , 可能需要一些修改)
*   django-paypal-adaptive ( [https://github.com/gmcguire/django-paypal-adaptive](https://github.com/gmcguire/django-paypal-adaptive) )

不幸的是，两者似乎都有问题/不再维护，有什么替代方案的建议吗？您是如何集成它、自定义解决方案或采用这些应用程序之一并更新/修改它们的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:24:21.120

我从事过一些电子商务和*贝宝自适应支付类型的项目*。

而我们通常的做法是使用[https://github.com/dcramer/django-paypal](https://github.com/dcramer/django-paypal)并根据需要进行自定义。

如果您正在查看一个完整的电子商务网站，请试一试 satchless 和 django oscar。

*   [http://satchless.com/](http://satchless.com/)
*   [http://oscarcommerce.com](http://oscarcommerce.com)

我也经历了寻找好的图书馆的过程，但差不多就是这样。而且我认为它们足以作为构建您的自定义工作的起点。

# objective-c - 从模态视图中删除呈现视图

> ID：13218590
> 
> 赞同：0
> 
> 时间：2012-11-04T12:39:21.123
> 
> 标签：objective-c, ios, cocoa-touch, cocoa

我有这样的视图层次结构： MainView -> SubView (PresentingView) -> ModalViewc (UIViewController 的所有子类)

通过单击 ModalView 中的按钮，我想同时删除 ModalView 和 PresentingView，这样我就可以返回 MainView，然后它将显示 ModalViewX：

MainView -> ModalViewX（UIViewController 的所有子类）

```
[[self presentingViewController] removeFromParentViewController]; 
```

上面的代码只是关闭了 ModalView，但 PresentingView 仍然存在。

我的最终目标是让 ModalView 按钮在返回 MainView 之前执行一些结论性逻辑。单击按钮基本上会执行以下操作：

1.  结论逻辑
2.  删除 self(ModalView) 和 PresentingView （如果我可以为删除设置动画，则可以加分）
3.  告诉 MainView 呈现 ModalViewX（也许我必须以某种方式调用 ModalView -> viewDidUnload 方法中的第 3 步）

关于如何做到这一点的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:56:17.313

首先，将您的整个项目嵌入到 UINavigationController 中，并将其`MainViewController`作为 rootview。要从`MainViewController`到`SubViewController`这样做：

```
- (IBAction) theButtonClicked : (id) sender {
    SubViewController *vc = [self.storyboard instantiateViewControllerWithIdentifier:@"YourIdentifier"];
    [self.navigationController pushViewController:vc animated:YES];
} 
```

这将使您进入下一个 UIViewController。如果要传递信息，只需设置`vc setVariable:`.

要返回根视图，只需调用`[self.navigationController popToRootViewControllerAnimated:YES]`

另一种方法是使用 segues，`CTRL+drag`从按钮到下一个 UIViewController。然后应该在`- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`目标控制器所在的方法中设置要完成的逻辑`segue.destinationViewController`。

这样，您还可以通过将 seguestyle 设置为 custom 和 subclassing 来添加自定义动画`UISegue`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T13:20:15.043

对于第 1 步（即“结论逻辑”），使用目标-动作设计。具体来说，这意味着您将向对象添加一个方法，该方法将在特定事件发生时被调用。例如，这可以通过控制从情节提要拖到您的视图控制器中来完成。您选择的视图控制器是目标，您创建的方法是操作。更多细节在这里：[https](https://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html) ://developer.apple.com/library/mac/#documentation/General/Conceptual/Devpedia-CocoaApp/TargetAction.html 。

要控制视图控制器的流程，您有几个不同的选项。

对于模态视图控制器，将删除委托给呈现视图控制器是最佳实践。这意味着模态视图控制器有一个名为delegate 的属性，当模态视图控制器准备好被移除时（即模态视图控制器不会自行移除），该属性将收到一条消息。应该符合您创建的协议的委托可以处理任何相关的结束逻辑并调用dismissViewControllerAnimated，这将删除呈现的（模态）视图控制器。

或者，您可以使用故事板中的 segues 来管理流程，正如 Martol 所提到的。

有关这些管理视图控制器数据和流程的方法的更多详细信息，请查看：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ManagingDataFlowBetweenViewControllers/ManagingDataFlowBetweenViewControllers.html)

希望有帮助。

# perl - 模块::构建构建问题

> ID：13218592
> 
> 赞同：0
> 
> 时间：2012-11-04T12:39:39.413
> 
> 标签：perl, build, module-build

使用 `Module::build`.

我不知道如何重用它。帮我解决这个问题（我再次在`blib->lib`目录中得到了相同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:57:35.660

`Module::Build`从您的模块中收集文件和信息并创建一个 blib 文件夹，在其中暂存将在您使用`Build install`. 也就是说，该文件夹只是`Module::Build`（`ExtUtils::MakeMaker`和其他）存储应该在`make`和`make install`（或`Build`和`Build install`）调用之间安装的决赛的一种方式。`make test`在运行或运行期间也会使用这些文件`Build test`。

不确定这是否有帮助。

# couchdb - 根据 CouchDB 中的属性获取文档（使用 PHP 和 Cloudant）

> ID：13218593
> 
> 赞同：0
> 
> 时间：2012-11-04T12:40:10.790
> 
> 标签：couchdb, cloudant

是否可以根据文档的属性检索文档？

`users`如果电子邮件已经存在，我希望能够测试我的注册？但是，在我看来，您只能通过`_id`...检索文档

*我使用 Cloudant 作为使用 CouchDB 的云服务。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:43:12.697

您可以使用电子邮件地址作为文档的 id，因此无法添加具有相同电子邮件的其他文档。您还可以使用 CouchDB 的基本功能[view](http://guide.couchdb.org/draft/views.html)来检查电子邮件在插入之前是否存在。这两种方法都需要稍后[解决冲突](http://guide.couchdb.org/draft/conflicts.html)。如果是第一种情况，可能还有另一个 Couch 节点的文档冲突尚未被复制。在第二种情况下，两个用户可以将帐户添加到同一台服务器，但他们都将首先检查现有的电子邮件，然后都将添加他们的帐户。

添加视图需要添加计算视图定义所在的设计文档。您可以使用如下函数创建索引`map`：

```
function (doc) {
  if (!doc.email) return;
  emit(doc.email, doc);
} 
```

您可以使用以下方式[查询视图](http://wiki.apache.org/couchdb/HTTP_view_API)：

```
http://localhost:5984/YOUR_DTABASE/_design/YOUR_DESIGN_DOCUMENT/_view/YOUR_VIEW?key='e-mail@addre.ss' 
```

请注意，电子邮件比较并不像您想象的那么简单：

1.  DNS 域名（“@”之后）不区分大小写（用户名通常区分大小写）
2.  在典型的电子邮件系统中，您可以分配别名。
3.  一些电子邮件系统允许嵌入目标文件夹和更改电子邮件字符串但指向同一个邮箱的附加信息（例如 box+folder@domain.com）。
4.  Gmail 会忽略“.”，因此 First.Last@gmail.com 等于 FirstL.ast@gmail.com

# c++ - c++错误没有匹配函数

> ID：13218595
> 
> 赞同：3
> 
> 时间：2012-11-04T12:40:30.853
> 
> 标签：c++, vector, polymorphism

这是我的代码

```
#include <iostream>
#include <vector>
#include <memory>
#include <tr1/memory> 
using namespace std;

class Animal {
  public:
    string name;
    Animal (const std::string& givenName) : name(givenName) {

    }

  };

class Dog: public Animal {
  public:
    Dog (const std::string& givenName) : Animal (givenName) {

    }
    string speak ()
      { return "Woof, woof!"; }
  };

class Cat: public Animal {
  public:
    Cat (const std::string& givenName) : Animal (givenName) {
    }
    string speak ()
      { return "Meow..."; }
  };

int main() {
    vector<Animal> animals;
    Dog * skip = new Dog("Skip");
    animals.push_back( skip );
    animals.push_back( new Cat("Snowball") );

    for( int i = 0; i< animals.size(); ++i ) {
        cout << animals[i]->name << " says: " << animals[i]->speak() << endl;
    }

} 
```

这些是我的错误：

```
index.cpp: In function ‘int main()’:
index.cpp:36: error: no matching function for call to ‘std::vector<Animal, std::allocator<Animal> >::push_back(Dog*&)’
/usr/include/c++/4.2.1/bits/stl_vector.h:600: note: candidates are: void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = Animal, _Alloc = std::allocator<Animal>]
index.cpp:37: error: no matching function for call to ‘std::vector<Animal, std::allocator<Animal> >::push_back(Cat*)’
/usr/include/c++/4.2.1/bits/stl_vector.h:600: note: candidates are: void std::vector<_Tp, _Alloc>::push_back(const _Tp&) [with _Tp = Animal, _Alloc = std::allocator<Animal>]
index.cpp:40: error: base operand of ‘->’ has non-pointer type ‘Animal’
index.cpp:40: error: base operand of ‘->’ has non-pointer type ‘Animal’ 
```

我想做的事：

我只想使用一个动态数据结构来遍历可能的 Animal 对象列表。

我正在尝试在 C++ 语法中学习这种多态性概念。

我熟悉 Java 和 PHP，但对 C++ 则不太熟悉。

更新：

我已经添加了其中一个答案提到的更改。[http://pastebin.com/9anijwzQ](http://pastebin.com/9anijwzQ)

但是我收到有关 unique_ptr 的错误。我已经包含了内存。所以我不确定问题是什么。

[http://pastebin.com/wP6vEVn6](http://pastebin.com/wP6vEVn6)是错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:41:44.797

有两个问题。

首先，您的向量包含`Animal`对象，并且您试图用指向`Animal`派生类型的指针填充它。`Animal`并且`Animal*`不是同一类型，因此该操作通常不会编译。

二`Animal`是没有办法`speak()`。如果要将派生类型的 推`Animal`入向量中，则会得到[对象切片](http://en.wikipedia.org/wiki/Object_slicing)。你可以通过让你的向量持有智能指针来避免它`Animal`，例如`std::vector<std::unique_ptr<Animal>>`。但是你仍然需要给出`Animal`一个`speak()`虚拟方法。例如：

```
class Animal {   
 public:
  std::string name;
  Animal (const std::string& givenName) : name(givenName) {}
  virtual std::string speak () = 0;
  virtual ~Animal() {}
};

int main() {
  std::vector<std::unique_ptr<Animal>> animals;
  animals.push_back( std::unique_ptr<Animal>(new Dog("Skip")) );
  animals.push_back( std::unique_ptr<Animal>(new Cat("Snowball")) );
} 
```

我在哪里制作`Animal::speak()`了一个*纯虚拟方法*并给出`Animal`了一个虚拟析构函数。

查看[何时使用虚拟析构函数](https://stackoverflow.com/questions/461203/when-to-use-virtual-destructors)以及[何时应该使用纯方法](https://stackoverflow.com/questions/6843277/when-should-a-virtual-method-be-pure)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:43:30.203

你应该声明你的`vector`，`vector<Animal*>`好像你想推它`Animal*`一样`skip`。而且您确实需要其中的指针才能使用多态性。此外，您的基类动物还需要一个`speak()`方法 - 否则您不能在编译时只知道是`Animal`. 一旦进行了这些更改，它应该可以按预期工作。

# iphone - iOS - viewController 包含和自动旋转

> ID：13218599
> 
> 赞同：0
> 
> 时间：2012-11-04T12:40:59.260
> 
> 标签：iphone, ios, ipad, uiviewcontroller

我的应用程序支持两组 viewController，那些应该在纵向工作的和应该在横向工作的。

彼此呈现不同方向的视图控制器会导致错误的方向，所以有人建议我创建一个视图控制器包含主视图控制器（使所有方向都应该自动旋转）并从中添加两个视图控制器分支，一个用于纵向（使用 shouldAutorotate YES肖像）和一个用于风景（使用 shouldAutorotate YES 用于风景）。我的问题是：这行得通吗？我的意思是，每个分支上的每个 viewController 都会旋转到正确的方向吗？

另一个问题是：我的项目基于单视图 Xcode 模板。该模板创建一个 RootViewController 作为应用程序启动时显示的那个。我的问题是：为了使包含建议有效，我必须在容器 viewController 中转换这个 rootViewController，并且我必须将它拥有的所有代码移动到另一个视图控制器并在应用程序启动时呈现。我的意思是：

**我今天有什么**

*   应用程序运行并显示 rootViewController。让我们称之为 vCA。

如果我将 rootViewController 设置为容器 viewController 我将拥有这个

*   该应用程序运行并显示完全为空的 containerController，并且必须呈现旧的 vCA。

在我看来，这是一个愚蠢的解决方案，我的意思是，提供一个空的 containerController 并将调用 vCA？

我怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:11:00.593

您的问题有点令人困惑，因为您使用了“存在”一词，就像在模态 ViewController 中一样，但您还提到了会创建不同解决方案的包含。

这完全取决于您的应用程序。如果 ViewControllers 的一个分支只有纵向而另一个只有横向，那么使用包含可能会很困难，因为你在两者之间切换的那一刻。方向调用从父级传递给子级，但仅在发生旋转时才调用。因此，例如，您的手机处于纵向并且您正在查看纵向 VC，当您切换到横向 VC 时，它将以纵向显示，当您旋转设备时，方向调用将使其变为横向并防止它返回肖像。反过来也是一样。有一个技巧可以强制设备通过每个 ViewController 的所有方向回调，从而强制旋转，但我不确定它是否适用于每个 iOS 版本。您可以从其父视图（窗口）中删除 rootViewController 的视图并立即再次添加它，这将触发方向回调。因此，每次在子 ViewController 之间切换时，您都可以尝试这样做。

或者不使用包含，您可以使用纵向 VC 作为您的 rootViewController，创建横向 ViewController 并将其存储在某个位置，以便它保留在内存中。当您需要显示景观 ViewController 时，您可以在 rootViewController 上模态显示它。如果您的自动旋转方法设置正确，它将改变状态栏的方向并以正确的方向显示 VC。当您关闭它时，方向将恢复为纵向。

编辑：

我这里没有 Xcode，但我在记事本中快速输入了一些内容。这应该可以工作，它会强制设备切换方向，在这种情况下没有过渡。如果要使用动画，请查看 _landscapeVC 的 modalTransitionStyle 属性。

```
// In AppDelegate.h
PortraitViewController* _portraitVC;
LandscapeViewController* _landscapeVC;

// In AppDelegate.m
-(BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
    _portraitVC = [[PortraitViewController alloc] init];
    _landscapeVC = [[LandscapeViewController alloc] init];

    self.window.rootViewController = _portraitVC;
    [self.window makeKeyAndVisible];
}

-(void)showLandscape
{
    [_portraitVC presentViewController:_landscapeVC animated:NO completion:^{}];
    [UIApplication sharedApplication].statusBarOrientation = _landscapeVC.interfaceOrientation;
}

-(void)showPortrait
{
    [_landscapeVC dismissViewControllerAnimated:NO completion:^{}];
    [UIApplication sharedApplication].statusBarOrientation = UIInterfaceOrientationPortrait;
} 
```

# cordova - 没有日食的电话间隙

> ID：13218610
> 
> 赞同：5
> 
> 时间：2012-11-04T12:42:30.647
> 
> 标签：cordova, camera

是否可以在不使用 Eclipse 的情况下创建 Phonegap APP，而是使用 Notepad++，并且仍然可以访问智能手机的细节，如相机、加速度计、录音机等。?

我确实尝试创建所有需要的文件，例如 config.xml 和 index.html 等等。但我无法让相机工作，我还没有尝试过其他 API。我在 API （文档）下使用了 Phonegap 自己网站上的完整示例代码。

我发现的另一个问题是，如果不使用 Eclipse，我找不到任何关于 Phonegap 的好的网络教程。

我希望我的问题很清楚。我不是以英语为母语的人，所以很抱歉我选择的单词。

最好的祝福

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:26:56.417

`npm install -g cordova`会给你一个整洁的命令行界面。

另请参阅[https://npmjs.org/package/cordova](https://npmjs.org/package/cordova)

```
cordova create Baz
cd Baz
cordova platform add android
cordova build
cordova compile android # will install the .apk on your connected Android device 
```

只是不确定这在 Windows 中如何发挥作用，但 Node.js`npm`似乎可用，所以应该没问题。如果遇到问题，您可能想尝试 cygwin。（就个人而言，如果我必须在 Windows 上做一些严肃的事情，首先要安装它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:32:26.007

我只使用 Eclipse 来启动调试器并导出 apk 包。我直接使用 SublimeText 编辑项目文件。它就像一个魅力:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T17:51:23.480

是的，您可以通过使用 ant 从命令行构建项目或使用 build.phonegap.com 之类的服务轻松地做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T18:07:46.620

这取决于您所针对的平台。Phonegap 只是 HTML Web 容器上的原生 API 库包装器的 Javascript。您可以参考这篇文章以获得更清晰的理解：

[Phonegap 视觉解释](http://phonegap.com/2012/05/02/phonegap-explained-visually/)

对于 Android，您将需要 Eclipse 来编译应用程序并下载各种版本的 Android 模拟器（2.1、2.2、..、4.1）。对于 iOS，您将需要 xCode 来编译应用程序以及 iPhone/iPad 模拟器。PhoneGap (build.phonegap.com) 提供的构建服务通过在服务器中编译您的代码并返回二进制文件来简化此过程。

如果您使用 Google Chrome 测试 Phonegap 应用程序，请注意您只能模拟 UI 和 Web 服务。您将无法测试手机的特定功能，例如摄像头、加速度计，因为网络浏览器没有这些功能。

# ruby - 在 ruby 类的初始化中，@name 或 self.name 有什么区别？

> ID：13218613
> 
> 赞同：0
> 
> 时间：2012-11-04T12:42:56.967
> 
> 标签：ruby

我知道使用 self.name 是有意义的，但是在下面的代码中 @name 是什么意思？

```
class NewGame < Game
  attr_accessor :name
  def initialize(name, options={})
    super
    self.name = name
  end

  def add_game(name)
     @name = name
  end
end 
```

这还合法吗？我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:46:27.963

`@name`是一个实例变量，可以像类实例的私有成员一样访问。

`self.name`是对 self 对象的方法调用，如果没有明确定义，您将得到 NoMethodError。

我将继续解释，`attr_accessor :weight`在您的课堂上写作与以下内容相同：

```
def weight=(v)
  @weight = v
end

def weight
  @weight
end 
```

# visual-studio - VS 2012 无法编译 VC++ 项目

> ID：13218616
> 
> 赞同：2
> 
> 时间：2012-11-04T12:43:12.497
> 
> 标签：visual-studio, visual-c++, visual-studio-2012, msbuild

我有一个在 Visual Studio 2008 上创建的 MFC (Visual C++) 项目。该项目在 VS 2010 上编译得很好。

当我尝试用 VS 2012 编译项目时，会弹出一个消息框，上面写着：

```
The operation could not be completed 
```

我将平台工具集版本更改为 Visual Studio 2012，但仍然出现相同的错误。

当我尝试使用 MSBuild CLI 编译项目时，出现以下错误：

```
error MSB8008: Specified platform toolset (v110) is not installed or invalid. Please make sure that a supported PlatformToolset value is selected. 
```

**现在，这是有趣的部分：**

如果我将平台工具集版本更改回 VS 2010 - MSBuild CLI 编译它没有问题！

那么，为什么 VS 2012 不能发挥同样的作用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T07:22:51.937

当您使用 VS2012 打开 VS2008 或 VS2010 项目时，它会通知您更新到新平台，确保您已将它们更新到 VS2012，并且

1.  选择 v110（默认）

2.  检查“SDL 检查”，如果“是”，很多 VS2010 代码在 VS2012 中会出错。如果是这样，您需要更新您的代码，或将其更改为“否”

3.  重建（不建造）

# javascript - 将 SPAN 替换为 INPUT 时，JQuery Autocpomplete 不起作用

> ID：13218618
> 
> 赞同：3
> 
> 时间：2012-11-04T12:43:19.730
> 
> 标签：javascript, jquery, html, javascript-events

我有一个使用自动完成功能的输入字段。当我只这样做时，自动完成工作。但是：当用户单击它时，我想显示一个跨度并将其替换为输入框。不幸的是，自动完成功能中断。考虑以下代码：

```
$(function () {

    $('#my_span').live('click', function () {
        var input = $('<input />', {'type': 'text', 'id': 'my_input', 'name': 'my_input', 'value': $(this).html()});
        $(this).parent().append(input);
        $(this).remove();
        input.focus();
    }

    );

    $('#my_input').live('blur', function () {
        $(this).parent().append($('<span />' , {'id': 'my_span'}).html($(this).val()));
        $(this).remove();
    });
});

$("#my_input").autocomplete({
        source: function(req, resp) {
            $.getJSON("http://localhost/grootjeframework/testproject/json/find/partij/naam/" + encodeURIComponent(req.term), resp);
        },

        select: function(event,ui){
             //do Stuff
        }
    }); 
```

（编辑器将我的 HTML 跨度视为跨度元素；）所以我不能发布它。供您参考：它只是一个 ID 为“my_span”的正常跨度）

替换输入和跨度工作正常。没有替换脚本的自动完成功能也可以正常工作。但是，将两者结合起来，自动完成功能就会中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:37:37.327

'my_input' 仅在单击 'my_span' 时创建，因此当您在其上附加 'blur' 事件处理程序和自动完成插件时，它还不存在。

尝试做这样的事情：

```
$(function () {

$('#my_span').live('click', function () {
    var input = $('<input />', {'type': 'text', 'id': 'my_input', 'name': 'my_input', 'value': $(this).html()});

    input.live('blur', function () {
        $(this).parent().append($('<span />' , {'id': 'my_span'}).html($(this).val()));
        $(this).remove();
    });

    input.autocomplete({
        source: function(req, resp) {
            $.getJSON("http://localhost/grootjeframework/testproject/json/find/partij/naam/" + encodeURIComponent(req.term), resp);
        },

        select: function(event,ui){
             //do Stuff
        }
    }); 

    $(this).parent().append(input);
    $(this).remove();
    input.focus();
}); 
```

});

这样，您可以在元素创建后附加事件处理程序和自动完成。

莱昂蒂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:53:05.030

多亏了 Leonti，我才能完成我的任务。我在下面编辑了解决方案。从现在开始，在单击 JSON 项目列表中的项目后，输入框将在一个范围内发生变化。

```
$(function () {

    $('#my_span').live('click', function () {
        var input = $('<input />', {'type': 'text', 'id': 'my_input', 'name': 'my_input', 'value': $(this).html()});

        input.autocomplete({
            source: function(req, resp) {
                $.getJSON("http://localhost/grootjeframework/testproject/json/find/partij/naam/" + encodeURIComponent(req.term), resp);
            },

            select: function(event,ui){
                $("#id_partij_samengevoegd").attr("value", ui.item.id );
                $('#my_span').remove();
                input.parent().append($('<span />' , {'id': 'my_span'}).html(ui.item.value));
                input.remove();
            }
        });    

        $(this).parent().append(input);
        $(this).remove();
        input.focus();
    });

}); 
```

# javascript - 使用 jQuery POST 到外部服务器

> ID：13218621
> 
> 赞同：0
> 
> 时间：2012-11-04T12:43:33.640
> 
> 标签：javascript, jquery, ajax

我试图在我拥有的许多网站中为我的链接建立一个计数器。所以每次点击我在其他网站上的链接，我的数据库都会计算它们..

（每个网站都在另一台服务器中..）

我试图在我想让这发生的每个页面上在 Jquery 中构建一些脚本：

```
$(document).ready(function() {

    attach();
});

function attach() {

    var name;
    var classCounter = $('.counterStrike');

    classCounter.bind('click', function() {

        var name = $(this).attr('name');

        var url = "http://XXXXX.######.XX/XXX/XXXX/Handler/Handler.aspx";
        var op = "1";
        var fromLocation;

        $.post(url, {
            name: name,
            op: op
        }, function(result) {
            alert(1);
            $("#result").html(result);

        });

    });

} 
```

这在同一台服务器上运行良好，所以我想我有一些跨浏览器问题？对？有没有办法操纵它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:46:20.617

您可以使用 jsonp。它用于跨域请求

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-04T12:52:36.400

也许您可以在您身边添加例如新的 HttpHandler ，它将从您的服务器发布到远程并获取数据，

然后通过 ajax 发布到您的 httphandler 就像一种代理...

# c++ - 递归布局分配

> ID：13218626
> 
> 赞同：0
> 
> 时间：2012-11-04T12:44:05.910
> 
> 标签：c++, placement-new

是否可以进行递归布局分配？
如果我有这门课：

```
class A
{
private:
   int m_filed1;  
   char* m_field2;

public:
   A(int size)  
{  
  m_field1 = size;
  m_field2 = new char[size];
}

}; 
```

我想在特定的缓冲区上动态分配它，我希望 m_field2 将在该缓冲区上分配太多，我将在“A”中定义的每个对象也是如此。
可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:24:11.097

你需要做一些内存管理。首先，您需要将缓冲区处理程序传递给您的类构造函数。在构造函数中，您必须找到一个偏移量，您可以在其中存储动态分配的成员，最后您还需要对成员使用placement new。像这样的东西：

```
class A
{
private:
   int m_filed1;  
   char* m_field2;
   char* m_field3;
public:
   A(int size, char *buffer)  
{  
  m_field1 = size;
  m_field2 = new (buffer + sizeof(A)) char[size];
  m_field3 = new (buffer + sizeof(A) + sizeof(m_field2)) char[size];
  //...
}

}; 
```

调用者`A* objA = new (mybuffer) A(size, mybuffer);`

**编辑**：您可能会在不将缓冲区传递给构造函数的情况下逃脱（虽然不确定，可能取决于编译器，需要检查）：

```
class A
{
private:
   int m_filed1;  
   char* m_field2;
   char* m_field3;
public:
   A(int size)  
{  
  m_field1 = size;
  m_field2 = new ((char*)this + sizeof(A)) char[size];
  m_field3 = new ((char*)this + sizeof(A) + sizeof(m_field2)) char[size];
  //...
}

}; 
```

调用者`A* objA = new (mybuffer) A(size);`

# python - 带有 MinGW 的 Windows 上的 Python.h

> ID：13218627
> 
> 赞同：0
> 
> 时间：2012-11-04T12:44:37.747
> 
> 标签：python, c, header, libraries

在 C 代码中导入 Python.h 时遇到问题

```
No such file or directory 
```

我在 Windows 7 64 位上使用代码块 IDE MinGW 编译器

请问有人可以帮我安装python c库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-04T04:47:15.367

使用 WinPython 和 gcc：添加 -I"[WinPythonFolder]\[python-ver.amd64]\include

例如：

```
 gcc read_wfm_wrap.c -I"C:\Python\WinPython-64bit-3.6.3.0Qt5\python-3.6.3.amd64\include" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:01:41.043

open Project -> Build Options -> Search Directories and add path where python.h resides

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T19:00:28.757

在 code::blocks 中，只需转到 `Project`选项卡。然后你打开`Build Options`>`Search Directories' and click`添加`。

然后浏览到 python 安装的目录并选择`include`文件夹（或将文件夹复制粘贴`include`到项目文件夹并将该文件夹本身添加到列表中）。

选择不保留相对路径。

这绝对可以解决问题，并且应该对其他 IDE 使用类似的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-07T07:04:49.027

通常，`Python.h`它包含的所有头文件都位于`include`Python 安装目录的文件夹中。您可以将 Python 的 include 文件夹中的所有头文件复制`C:\Py\Anaconda3\include`到 gcc|cl 的 include 文件夹（我的看起来像这样，`C:\Program Files (x86)\CodeBlocks\MinGW\include`），或者只复制到头文件依赖关系被解决的地方。

# java - “比较法违反了它的总契约！” - 寻找小样本数据集

> ID：13218628
> 
> 赞同：1
> 
> 时间：2012-11-04T12:44:44.920
> 
> 标签：java, sorting

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T12:51:43.300

这意味着您的 Comparator 存在这样的错误`compareTo(a, b) != -compareTo(b, a)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T12:49:54.257

> 恕我直言，这闻起来更像是排序算法中的错误，而不是我们的比较器中的错误。

对我来说，这听起来像是根据输入集的大小使用了 2 种不同的排序算法。

虽然排序实现中存在错误并非不可能，但问题出在您的 Comparator 中的可能性要大得多......就像异常消息所说的那样。建议您将精力集中在代码上，而不是在库代码中寻找（可能不存在的）错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T13:01:22.290

正如 Stephen C 已经猜到的那样，这是使用两种不同排序方法的结果。

看代码`java.util.TimSort`：

```
static <T> void sort(T[] a, Comparator<? super T> c) {
    sort(a, 0, a.length, c);
}

static <T> void sort(T[] a, int lo, int hi, Comparator<? super T> c) {

    // ...

    // If array is small, do a "mini-TimSort" with no merges
    if (nRemaining < MIN_MERGE) {
        int initRunLen = countRunAndMakeAscending(a, lo, hi, c);
        binarySort(a, lo, hi, lo + initRunLen, c);
        return;
    }

    // ... 
```

MIN_MERGE 的值确实是 32，而抛出异常的方法只在其他情况下调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T13:37:42.993

错误**在**我们的比较器中（它违反了 A < B && B < C -> A < C），但我认为 TimSort**总是**会导致堆栈跟踪似乎是错误的。

# c# - 如何从后面的代码调用这个 javascript 函数

> ID：13218631
> 
> 赞同：0
> 
> 时间：2012-11-04T12:45:15.530
> 
> 标签：c#, javascript, jquery, asp.net

我将 javascript 创建的控件 (http://www.dariancabot.com/projects/jgauge_wip/) 放在我的页面上。

```
<div class="jgauge" ></div>

$(document).ready(function () {  
    var ctl; 
    ctl = new jGauge();   
    ctl.init();
)} 
```

假设我需要将几个参数传递给`init`. 就像...`ctl.init(a, b);`从后面的代码中，我怎样才能做到这一点？我尝试过这样的事情......

```
string script2 = String.Format("init('{0}','{1}')", param1, param2);

this.Page.ClientScript.RegisterStartupScript(this.GetType(), "initialize control", script2, true); 
```

但它不起作用。我有：

```
ReferenceError: init is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T12:55:42.800

init 是 jGauge 实例中的一个方法。所以你必须在调用这些数学之前实例化。试试下面的：

```
string script2 = String.Format("var ctl; ctl = new jGauge();  ctl.init('{0}','{1}');", param1, param2);
this.Page.ClientScript.RegisterStartupScript(this.GetType(), "initialize control", script2, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:31:02.123

另一种方法是使用公共变量，

你的脚本会是这样的：

```
$(document).ready(function () {  
    var ctl; 
    ctl = new jGauge();   
    ctl.init(<%=param1 %>, <%=param2 %>);
)} 
```

并且在后面的代码中有两个公共字符串

```
public string param1 = string.Empty;
public string param2 = string.Empty; 
```

在您`page_load`或任何其他事件中，您可以正常设置这两个变量的值，例如：

```
param1 = "100"; 
```

其余代码将按原样工作。

# matlab - 具有重叠高斯的 histfit Matlab

> ID：13218635
> 
> 赞同：2
> 
> 时间：2012-11-04T12:45:52.000
> 
> 标签：matlab

我有一个由两个重叠的高斯分布组合而成的分布，我想将高斯分布拟合到它的直方图上。我知道 Matlab 中的 histfit 可以完美地完成，但需要 1 高斯。histfit(data,bin,dist) 也适用于默认提供的其他类型的分布，但其中不包括二正态分布。

我怎样才能通过 histfit 进行这种两个正常的拟合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:29:30.300

你不能，改用 gmdistribution 。

例如 obj = gmdistribution.fit(data, 2)

将估计高斯混合分布中两个高斯的参数。

# javascript - 在下拉列表中搜索包含特定文本的项目

> ID：13218636
> 
> 赞同：0
> 
> 时间：2012-11-04T12:45:59.493
> 
> 标签：javascript

我想使用 JavaScript 对列表进行“包含”搜索。例如我有一个列表：

```
AM波兰
AM 认证。
增强现实

```

现在我有一个文本框，我已经完成了搜索（以开头），就像我输入“A”一样，所有记录都以 A 开头。

但是我想如果我输入“Pol”，那么应该显示“AM Polland”记录。

实际上我有一个很大的选择列表...上面我有一个文本框..我想根据我在该文本框中键入的字母进行搜索。但我想要包含搜索而不是开头。

我不知道该怎么做，我正在学习 JavaScript。请帮助一些代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T12:58:07.660

jQuery UI 中有一个[自动完成](http://jqueryui.com/autocomplete/)插件。你可以更好地利用它。

### 特征：

1.  默认功能
2.  口音折叠
3.  类别
4.  组合框
5.  自定义数据和显示
6.  多个值
7.  多个，远程
8.  远程 JSONP 数据源
9.  远程数据源
10.  带缓存的远程
11.  可滚动的结果
12.  XML 数据解析一次

### 简单示例：

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Autocomplete - Default functionality</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script>
</head>
<body>

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:57:00.717

我猜你当前的代码只是检查`substr`适当的长度。你需要的是一个正则表达式。

```
// first, a helper function to escape regex characters. Source: phpJS
function preg_quote(str) {
    return (str + '').replace(/[.\\+*?\[\^\]$(){}=!<>|:\-]/g, '\\$&');
}
// create the regex (assuming "input" is the variable containing the search string)
var regex = new RegExp(preg_quote(input)), i;
// now search for it (assuming "list" is the array of strings containing the data)
for( i in list) {
    if( list.hasOwnProperty(i)) {
        if( list[i].match(regex)) {
            // it's a match! do something with it
        }
    }
} 
```

# mysql - 我们怎么能不允许 mysql 中的枚举不为空？

> ID：13218639
> 
> 赞同：2
> 
> 时间：2012-11-04T12:46:03.613
> 
> 标签：mysql, database, enums

我在 mysql 中有一个枚举，我希望它除了变量之外什么都没有。当我向它传递一个奇怪的变量时，它不接受它，但最后一个变量被清除。我该怎么做？（对不起我的英语不好！）当一些不正确的 var 插入时，它实际上并没有插入，但最后一个 var 被清除了！我想保留它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:50:58.260

Try enabling strict mode:

```
sql-mode = STRICT_ALL_TABLES 
```

In your MySQL config.

[http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_strict_all_tables](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html#sqlmode_strict_all_tables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:04:29.600

我建议您将连接切换到[传统模式](http://dev.mysql.com/doc/refman/5.5/en/server-sql-mode.html#sqlmode_traditional)：

```
SET @@SESSION.sql_mode='TRADITIONAL'; 
```

除其他几件事外，这可以防止`ENUM`列接受无效值。

# python - Django 查询集计数

> ID：13218644
> 
> 赞同：2
> 
> 时间：2012-11-04T12:46:32.640
> 
> 标签：python, django, count, django-queryset

我的模型：

```
class Device(models.Model):
    build = models.CharField()
    name = models.CharField() 
```

如何构建我的查询集，以便获得具有不同构建的对象的数量。

例如，如果有两个构建“构建 1”和“构建 2”，我想要一个可以告诉我的输出

```
build 1 = 3
build 2 = 4 
```

编辑：尝试了以下方法：

```
Device.objects.values('build').annotate(count=Count('pk')) 
```

输出是：

```
[{'build': u'wed build'}, {'build': u'red build'}, ... ] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T12:58:14.497

```
from django.db.models import Count

Device.objects.values('build').annotate(count=Count('pk'))
# -> [{'build': '1', 'count': 3}, {'build': '2', 'count': 4}] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T14:04:01.767

一个简单的方法就是调用[`count`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#count)：

```
>>> Device.objects.filter(build='1').count()
3
>>> Device.objects.filter(build='2').count()
4 
```

# windows - 制作： 在 Windows 中找不到

> ID：13218646
> 
> 赞同：15
> 
> 时间：2012-11-04T12:46:59.977
> 
> 标签：windows, header, include, pthreads, cmake

我是 CMake 的新手。我在 Linux 上针对我正在制作的程序对其进行了测试。该程序使用（POSIX Threads lib），所以在我的 CMakeList 中，我添加了：

```
find_package(Threads) 
```

它适用于 Linux 发行版（Arch，Mint，Ubuntu，...），但现在，我正在 Windows32（Visual Studio 9 2008）中尝试它，并且在生成过程中收到此消息：

```
-- Looking for include file pthread.h - not found 
```

（当我编译输出项目文件时，确实没有找到 pthread.h ）。

在 Windows 上，将“C:\pthread”视为我的 pthread 目录，我在 path 中定义：

*   “C:\pthread\include”（著名的“pthread.h”所在的位置）
*   “C:\pthread\”（在 CMake 在某处寻找“包含”的情况下）

但我仍然得到同样的错误（即使在删除缓存之后）。我知道我可以在我的项目中“手动”添加 Pthread，或者在 CMakeList.txt 中定义一些常量，但我认为这不是 CMake 的原则：我可以在所有系统上使用相同的“CMakeList.txt”，对吗？那么我怎么能告诉 CMake “嘿！看起来在这里！Pthread 在这个目录中！”。也许Cmake没有在PATH中查找，而是在另一个环境变量中查找，但我没有找到此信息。

感谢您的阅读。

编辑：我不知道它是否有所作为，但我的项目是 C++ 项目（不是 C）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-04-05T15:17:44.667

我做了什么，我编辑了 cmake 文件：

```
option(CMAKE_USE_WIN32_THREADS_INIT "using WIN32 threads" ON) 
```

和

```
option(gtest_disable_pthreads "Disable uses of pthreads in gtest." ON) 
```

（我正在使用谷歌测试）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T12:51:30.930

As far as i know, Pthreads is not natively supported on windows platform. Unless you use some thing like

[win services for unix](http://en.wikipedia.org/wiki/Windows_Services_for_UNIX)

Windows only has win32 threads.

However, this is a project which provides pthreads on windows

[pthreads on win32](http://sourceware.org/pthreads-win32/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-19T12:33:59.827

显然**CMAKE_USE_WIN32_THREADS_INIT**在所有平台的上下文中都很有用。该变量是在调用 findPackage(Threads) 时生成或初始化的，理想情况下，它可以处理所有平台上的链接问题，以防线程库需要与可执行文件链接。基本上，它在平台 unix 等平台上生成适当的线程库名称，并且在不需要显式线程库进行链接的窗口等平台上为空。参考：CMake findThreads [https://cmake.org/cmake/help/v3.0/module/FindThreads.html?highlight=threads](https://cmake.org/cmake/help/v3.0/module/FindThreads.html?highlight=threads)

# c++ - 带矩阵存储偏移

> ID：13218647
> 
> 赞同：0
> 
> 时间：2012-11-04T12:47:07.570
> 
> 标签：c++, pointers, sparse-matrix

我试图了解如何存储带矩阵，我在“C++ 和面向对象的数值计算”一书中找到了一个示例，但我无法弄清楚**bda[i] += P;行的目的是什么** 这在尝试打印带状矩阵时也给我带来了问题。这里是：

```
int N = 5; //Matrix of NxN
int P = 1; //Left bandwidth
int R = 2; //Right bandwidth

//Matrix A
double A[5][5] = { { 1, 6, 10, 0, 0 },
        { 13, 2, 0, 11, 0 },
        { 0, 14, 3, 8, 12 },
        { 0, 0, 0, 4, 9 },
        { 0, 0, 0, 16, 5 } };

//Allocate memory for rows
double** bda = new double*[N];
for (int i = 0; i < N; i++) {
    bda[i] = new double[P + R + 1]; //Allocate memory for cols
    bda[i] += P; //What's the purpose of this?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:57:40.450

这用于存储矩阵的紧凑方式，该矩阵`P`在主对角线左侧具有非零对角线，`R`右侧具有非零对角线，所有其他元素均为零。`P+R+1`对于每一行，我们只为主对角线周围的元素分配空间。

这`bda[i] += P`条线`bda[i]`指向主对角线上的一个元素。这可以更方便地使用矩阵：`bda[i][0]`在每个 的主对角线上`i`，`bda[i][1]`在右边`bda[i][-1]`的第一个对角线上，在左边的第一个对角线上，等等。这允许您在主对角线上查找元素或靠近它，而不必`P`每次都添加。这是否有用取决于您如何使用矩阵。

请注意，如果您这样做，您将需要`P`从它`bda[i]`之前减去`delete[]`。

# c# - DDD 与 EF Code First - 如何将它们组合在一起？

> ID：13218650
> 
> 赞同：19
> 
> 时间：2012-11-04T12:47:23.420
> 
> 标签：c#, asp.net-mvc, ef-code-first, domain-driven-design, code-first

我正在学习 DDD 开发几天，我开始喜欢它。

我（我想我）了解 DDD 的原理，您的主要关注点是业务对象，您有聚合、聚合根、仅用于聚合根的存储库等。

我正在尝试创建一个简单的项目，将 DDD 开发与 Code First 方法结合起来。

我的问题是：（我正在使用 asp.net MVC）

1.  DDD 业务对象将不同于 Code First 对象？即使它们可能相同，例如我可以拥有一个`Product`包含所有规则和方法的业务对象，并且我可以拥有一个`Product`代码优先 (POCO) 对象，它只包含我需要保存在数据库中的属性。

2.  如果对问题 1 的回答是“真”，那么我如何通知`Product`POCO 对象来自业务对象的属性`Product`已更改并且我必须更新它？我正在使用“AutoMapper”或类似的东西？如果答案是“不”，我完全迷失了。

你能告诉我如何将这两者放在一起的最简单（CRUD）示例吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-28T01:58:03.430

**更新**我不再提倡使用“域对象”，而是提倡使用基于消息传递的域模型。有关示例，请参见[此处。](https://github.com/jkodroff/SeptaBus)

＃1的答案是*取决于*。在任何企业应用程序中，您都会在域中找到 2 个主要类别的东西：

**直 CRUD**

这里**不需要域对象，**因为对象的下一个状态不依赖于对象的先前状态。都是数据，没有行为。在这种情况下，可以在任何地方使用相同的类（即 EF POCO）：编辑、持久化、显示。

这方面的一个示例是在订单上保存帐单地址：

```
public class BillingAddress {
  public Guid OrderId;
  public string StreetLine1;
  // etc.
} 
```

另一方面，我们有...

**状态机**

您需要有**单独的对象用于域行为和状态持久性**（以及完成工作的存储库）。域对象上的公共接口应该几乎总是所有 void 方法并且没有公共 getter。订单状态就是一个例子：

```
public class Order { // this is the domain object  
  private Guid _id;
  private Status _status;

  // note the behavior here - we throw an exception if it's not a valid state transition
  public void Cancel() {  
    if (_status == Status.Shipped)
      throw new InvalidOperationException("Can't cancel order after shipping.")
    _status = Status.Cancelled;
  }

  // etc...
}

public class Data.Order { // this is the persistence (EF) class
  public Guid Id;
  public Status Status;
}

public interface IOrderRepository {
  // The implementation of this will:
  // 1\. Load the EF class if it exists or new it up with the ID if it doesn't
  // 2\. Map the domain class to the EF class
  // 3\. Save the EF class to the DbContext.
  void Save(Order order); 
} 
```

#2 的答案是 DbContext 将自动跟踪对 EF 类的更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T16:26:09.893

答案是否定的。EF 代码优先的优点之一是它非常适合 DDD，因为您必须手动创建业务对象，因此请务必使用您的 EF 模型来等效于 DDD 实体和值对象。无需增加额外的复杂性，我认为 DDD 不建议在任何地方这样做。

您甚至可以让您的实体实现 IEntity，并为对象赋值以实现 IValue，此外还可以遵循其他 DDD 模式（即存储库）来与数据库进行实际通信。更多这些想法你可以在 .NET 中找到这个非常好的示例应用程序，即使它不首先使用 EF 代码，它仍然非常有价值：[http ://code.google.com/p/ndddsample/](http://code.google.com/p/ndddsample/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T21:51:51.020

最近我做了类似的项目。我正在关注本教程：[链接](http://www.asp.net/mvc/tutorials/mvc-music-store) 我已经这样做了：我创建了空白解决方案，添加了项目：域、服务和 WebUI。

简单地说，在域中我已经放置了模型（例如，EF 代码的类，方法等）服务用于域与世界（WebUI，MobileUI，其他站点等）使用 asp.net webapi WebUi 实际上是 MVC应用程序（但模型在域中，所以它主要是 VC）

希望我有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T13:27:47.457

Pluralsight 课程：[企业中的实体框架](http://pluralsight.com/training/courses/TableOfContents?courseName=efarchitecture&highlight=julie-lerman_efarchitecture-m3-archrepo%2a5#efarchitecture-m3-archrepo)进入了与 EF Code First 相结合的领域驱动设计的确切场景。

对于第一名，我相信你可以做到这一点。这只是风格问题。对于第 2 点，视频中的讲师通过几种方式来说明这一点。一种方法是在修改值时在客户端设置的每个类上都有一个“状态”属性。然后 DbContext 知道要保留哪些更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-13T09:45:56.000

关于这个主题的迟到问题。阅读 Josh Kodroff 的回答证实了我对将存储库实施到例如实体框架 DAL 的想法。

您将域对象映射到 EF 持久性对象，并在保存时让 EF 处理它。检索时，您让 EF 从数据库中获取并将其映射到您的域对象（聚合根）并将其添加到您的集合中。

这是存储库实施的正确策略吗？

# wpf - SurfaceInkCanvas 和标签可视化

> ID：13218651
> 
> 赞同：0
> 
> 时间：2012-11-04T12:47:32.600
> 
> 标签：wpf, pixelsense

我有一个带有 SurfaceInkCanvas 的表面应用程序。现在，当标签在画布上时，我想做一些事情（例如更改颜色）。

问题是，SurfaceInkCanvas 捕获 VisualizationAdded 事件，并在画布上绘制点 - 而不是调用 TagVisualizer 的 VisualizationAdded 事件。

如果我更改项目的 Panel.Zorder，标记事件会被捕获，但我无法在画布上绘图。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:07:51.983

您必须将 SurfaceInkCanvas 添加为 TagVisualizer 的子元素：

```
<s:TagVisualizer>
    <s:TagVisualizer.Definitions>
        ... 
    </s:TagVisualizer.Definitions>

    <s:SurfaceInkCanvas />
</s:TagVisualizer> 
```

# android - 在 ViewPager 中的片段周围添加框架

> ID：13218654
> 
> 赞同：0
> 
> 时间：2012-11-04T12:48:40.610
> 
> 标签：android, android-fragments

我知道为了在活动之间滑动，我需要在[这个](https://stackoverflow.com/questions/11775757/android-swiping-between-activities)`FragmentPageAdapter`问题的答案中使用 as 。

但是，我试图在`Fragments`不移动的周围放置一个框架。像相框一样，它停留在屏幕边缘的位置，当您滑动时，框架停留在原位，而`Fragments`在彼此之间滑动。基本上，掩蔽效果。我该如何实施？

在我的 FragmentActivity 的 FragmentPagerAdapter 中，与所示的示例相比，我有一个不同的 Fragment，它是一个列表片段 (ArrayListFragment)。我这样使用通用片段：

```
public static class TestFragment extends Fragment{
        /**
         * Create a new instance of DetailsFragment, initialized to
         * show the text at 'index'.
         */
        public static TestFragment newInstance(int index) {
            TestFragment f = new TestFragment();

            // Supply index input as an argument.
            Bundle args = new Bundle();
            args.putInt("index", index);
            f.setArguments(args);

            return f;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            View v = inflater.inflate(R.layout.mytext, container, false);
            return v;
        }
    } 
```

mytext 布局非常简单：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:text="woohoo"
        android:gravity="center"></TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:23:19.160

实现该框架的一种简单方法是将`ViewPager`a`FrameLayout`或 a`RelativeLayout`与自定义`View`放在其上：

```
<FrameLayout>
    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <com.luksprog.ViewPagerOverlayFrame
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</FrameLayout> 
```

在该 custom`View`的`onDraw`方法中，您将绘制所需的框架。下面的代码将在 边缘附近绘制一个不可滑动的红框`ViewPager`：

```
public class ViewPagerOverlayFrame extends View {

    private Paint mPaint;   

    public ViewPagerOverlayFrame(Context context) {
        super(context);
        mPaint = new Paint();
        mPaint.setColor(Color.RED); 
            mPaint.setStrokeWidth(60.0f);       
    }

    public ViewPagerOverlayFrame(Context context, AttributeSet attrs) {
        super(context, attrs);
        mPaint = new Paint();
        mPaint.setColor(Color.RED);
        mPaint.setStrokeWidth(60.0f);       
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawLine(0, 0, getMeasuredWidth(), 0, mPaint);
        canvas.drawLine(getMeasuredWidth(), 0, getMeasuredWidth(),
                getMeasuredHeight(), mPaint);
        canvas.drawLine(getMeasuredWidth(), getMeasuredHeight(), 0,
                getMeasuredHeight(), mPaint);
        canvas.drawLine(0, getMeasuredHeight(), 0, 0, mPaint);
    }

} 
```

您可能希望向 中添加一些填充，`ViewPager`以便其内容不会被框架剪裁。

# c# - C# Thread Sync Monitor + ResetEvent

> ID：13218656
> 
> 赞同：2
> 
> 时间：2012-11-04T12:49:00.270
> 
> 标签：c#, multithreading

I have written a DirectSoundWrapper but I just can access the interfaces through MTA Threads. So I created a Thread that is working in background and executes actions in a queue. I've done something like this:

```
private void MTAQueue()
{
    lock (queueLockObj)
    {
        do
        {
            if (marshalThreadItems.Count > 0)
            {
                MarshalThreadItem item;
                item = marshalThreadItems.Dequeue();
                item.Action();
            }
            else
            {
                Monitor.Wait(queueLockObj);
            }
        } while (!disposing);
    }
} 
```

And I Execute an Action like this:

```
private void ExecuteMTAAction(Action action)
{
    if (IsMTAThread)
        action();
    else
    {
        lock (queueLockObj)
        {
            MarshalThreadItem item = new MarshalThreadItem();
            item.Action = action;
            marshalThreadItems.Enqueue(item);

            Monitor.Pulse(queueLockObj);
        }
    }
} 
```

But now I wanted to wait for the finishing the action is called. So I wanted to use a ManuelResetEvent:

```
private void ExecuteMTAAction(Action action)
{
    if (IsMTAThread)
        action();
    else
    {
        lock (queueLockObj)
        {
            MarshalThreadItem item = new MarshalThreadItem();
            item.Action = action;
            item.waitHandle = new ManualResetEvent(false); //setup
            marshalThreadItems.Enqueue(item);

            Monitor.Pulse(queueLockObj); //here the pulse does not pulse my backgrond thread anymore
            item.waitHandle.WaitOne(); //waiting
        }
    }
} 
```

And my background thread i just edit like this:

```
item.Action();
item.waitHandle.Set(); 
```

The problem is that the background thread does not get pulsed anymore and just keeps waiting (Monitor.Wait(queueLockObj)) and my mainthread that calls the action waits on the manuelresetevent...?

Why?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T21:27:19.717

您的代码中的问题是，在`Monitor.Wait(queueLockObj)`将退出并且线程可以处理项目之前，另一个线程（`ExecuteMTAAction`方法）必须调用`Monitor.Exit(queueLockObj)`，但是调用`item.waitHandle.WaitOne()`阻止了此调用-并且您有死锁。所以 - 你必须先`Monitor.Exit(queueLockObj)`打电话`item.waitHandle.WaitOne()`。这段代码可以正常工作：

```
private void ExecuteMTAAction(Action action)
{
    if (IsMTAThread)
        action();
    else
    {
        lock (queueLockObj)
        {
            MarshalThreadItem item = new MarshalThreadItem();
            item.Action = action;
            item.waitHandle = new ManualResetEvent(false); //setup
            marshalThreadItems.Enqueue(item);

            Monitor.Pulse(queueLockObj);
        }
            item.waitHandle.WaitOne(); //waiting           
    }
} 
```

# webserver - parallels plesk file permission

> ID：13218658
> 
> 赞同：3
> 
> 时间：2012-11-04T12:49:04.017
> 
> 标签：webserver, plesk, parallels

I,m trying to install a joomla site in parallels plesk panel via akeeba backup . Where I,m facing file permission issue.

```
An error occured

Could not open /var/www/vhosts/xyz.com/httpdocs/pearl_new/jquery.min.js for writing. 
```

As searched all over and also in Plesk forum . I found this is a very common problem. Some suggested installing mod_suphp can solve the problem. I tried but don't know is it successfully installed or not.

Then I have created a new service plan from where in hosting parameter I select `Run PHP as FastCGI`

After that I took my domain to that service plan. I thought it will solve the problem. But still getting same error. Can anyone help please ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T13:14:31.863

这是 linux 中的常见问题，用户有共享主机。

很简单。如果您已经选择了带有 FAST CGi 的 PHP 模块，请按照以下步骤操作： 打开文件管理器 新建文件夹“ABC” 单击右侧的“全部”以查看树上的所有文件。选择除“plesk-stats”之外的所有文件和文件夹 在路径文件类型/httpdocs/abc/ 中选择复制/移动按钮单击移动。

如果所有文件移动然后打开“abc”文件夹选择所有文件和文件夹。在路径字段类型 /httpdocs/ 中选择复制/移动按钮

这就是它解决的问题。

我为许多客户尝试了这些步骤。

我希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T18:50:06.663

在 ssh 命令行上尝试：

```
find /var/www/vhosts/xyz.com/httpdocs/ -type f -exec chmod 664 {} \;
find /var/www/vhosts/xyz.com/httpdocs/ -type d -exec chmod 775 {} \; 
```

这些将设置正确的权限，以便用户和组对文件 (f) 和目录 (d) 进行写入。您还需要确保 apache 位于 /etc/group 文件中的 psacln 和 psaserv 组中：这些行应如下所示：

```
psaserv:x:504:apache,psaftp,psaadm
psacln:x:505:apache 
```

然后你可以运行命令：

```
chown -R siteusername.psacln /var/www/vhosts/xyz.com/httpdocs/* 
```

其中“siteusername”是站点文件的用户名。

希望这可以帮助。

# c++ - .then 在 PPL 任务中构造的目的是什么？

> ID：13218659
> 
> 赞同：2
> 
> 时间：2012-11-04T12:49:18.613
> 
> 标签：c++, visual-c++, asynchronous, c++11, ppl

我很有趣 .then 在 PPL 中构造的目的是什么，我在哪里可以测试它？似乎 Visual Studio 2012 还不支持它（可能是一些未来的 CTP？）。它在标准 C++11 异步库中有等价物吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T13:33:00.203

目的是让您能够表达必须按顺序执行的异步任务。

例如，假设我在一个 GUI 应用程序中。当用户按下按钮时，我想异步启动一个任务以在线检索文件，然后对其进行处理以检索某种数据，然后使用此数据更新 GUI。在发生这种情况时，还有大量其他任务正在进行，主要是为了保持 GUI 响应。

这可以通过使用调用回调的回调来完成。与 lambdas 关联的 .then() 功能允许您在实例化它的位置编写所有回调内容（如果需要，您仍然可以使用单独的回调）。它也不保证每个单独任务的工作将由同一个线程完成，如果初始线程已经有太多工作要做，空闲线程就有可能窃取任务。

.then() 函数在 C++11 中不存在，但建议将其添加到 std::future 类（基本上是任务或任务结果的句柄）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T16:20:23.213

克莱姆已经做出了很好的回答，但我想我会举一个具体的例子。

`.then`将延续附加到任务，并且`.get`基本上是异步等效于同步的。

C++11 有`std::future`，相当于 a `concurrency::task`。`std::future`目前只有`.get`，[但有建议添加`.then`（和其他好东西）](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3428.pdf)。

```
std::async(calculate_answer(the_question_of_everything))
    .then([](std::future<int> f){ std::cout << f.get() << "\n"; }); 
```

上面的代码片段将创建一个异步任务（使用 启动`std::async`），然后附加一个延续，`std::future`一旦上述任务完成，该延续就会传递给已完成任务。这实际上为该任务返回了另一个`std::future`，*当前*的 C++11 标准会阻塞它的析构函数，[但是还有另一个建议让析构函数 unblocking](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3451.pdf)。因此，使用上面的代码，您可以创建一个即发即弃的任务，该任务会在计算出答案后立即打印出来。

阻塞等价物是：

```
auto f = std::async(calculate_answer(the_question_of_everything));
std::cout << f.get() << "\n"; 
```

此代码将阻塞，`f.get()`直到答案可用。

# sorting - Sort of Arraylist

> ID：13218663
> 
> 赞同：2
> 
> 时间：2012-11-04T12:49:34.560
> 
> 标签：sorting, arraylist

I have code:

```
 List<String> list = new ArrayList<String>();
    list.add("10.160.0.100;14/Nov/201107:22:38;/;-;");
    list.add("10.160.0.100;14/Nov/201108:54:31;/;-;");
    list.add("10.160.0.10;16/Nov/201112:56:38;/;-;");

    list.add("10.160.0.100");
    list.add("10.160.0.100");
    list.add("10.160.0.10");

    Collections.sort(list);
    for (String temp : list) {
        System.out.println(temp);
    } 
```

Output is:

> 10.160.0.10
> 
> 10.160.0.100
> 
> 10.160.0.100
> 
> 10.160.0.100;14/Nov/201107:22:38;/;-;
> 
> 10.160.0.100;14/Nov/201108:54:31;/;-;
> 
> 10.160.0.10;16/Nov/201112:56:38;/;-;

**Why ? I need this output:**

> 10.160.0.10
> 
> 10.160.0.100
> 
> 10.160.0.100
> 
> 10.160.0.10;16/Nov/201112:56:38;/;-;
> 
> 10.160.0.100;14/Nov/201107:22:38;/;-;
> 
> 10.160.0.100;14/Nov/201108:54:31;/;-;

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T12:51:53.190

Because in ASCII, the `;` character has a higher number than the `0` character.

![enter image description here](../Images/5cb9d4c6300a7872fcc40940c705e166.png)

# c++ - Setting up autocomplete to work with semantic

> ID：13218664
> 
> 赞同：2
> 
> 时间：2012-11-04T12:49:35.913
> 
> 标签：c++, emacs, autocomplete, cedet

I have a problem with auto-complete package in Emacs. Currently I have up and running cedet with proper autocompletion, but auto-complete package has some weird behaviour. It doesn't use semantic's (senator's?) database until I explicitly visit include file and make "C-u M-x bovinate". Then I can return to the source file and auto-complete's completion list will look exactly as the semantic's one.

Another point is if I edit my source file, for example, in c++-mode and try to "bovinate" header in c-mode, auto-complete won't get any additional points in it's completion list.

Any ideas how to get auto-complete work automatically?

My .emacs file is (Major parts of it were taken from [Alex Ott's article](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html))

```
(load "~/.emacs.d/cedet/cedet-devel-load.el")
(add-to-list 'semantic-default-submodes 'global-semanticdb-minor-mode)
(add-to-list 'semantic-default-submodes 'global-cedet-m3-minor-mode)
(add-to-list 'semantic-default-submodes 'global-semantic-mru-bookmark-mode)
(add-to-list 'semantic-default-submodes 'global-semantic-idle-local-symbol-highlight-mode)
(add-to-list 'semantic-default-submodes 'global-semantic-idle-scheduler-mode)
(add-to-list 'semantic-default-submodes 'global-semantic-idle-completions-mode)
(add-to-list 'semantic-default-submodes 'global-semantic-idle-summary-mode)
(add-to-list 'semantic-default-submodes 'global-semantic-decoration-mode)

(require 'semantic/ia)
(semantic-mode 1)

(require 'semantic/bovine/gcc)

(semantic-add-system-include "/usr/include/mpi/" 'c++-mode)

;; ;; Imenu integration
(defun my-semantic-hook ()
  (imenu-add-to-menubar "TAGS"))
(add-hook 'semantic-init-hooks 'my-semantic-hook)

;; Class suggest improvement
(defun my-c-mode-cedet-hook ()
 (local-set-key "." 'semantic-complete-self-insert)
 (local-set-key ">" 'semantic-complete-self-insert))
(add-hook 'c-mode-common-hook 'my-c-mode-cedet-hook)

;;;; Semantic and auto-config integration
(require 'auto-complete-config)
(ac-config-default)
(add-to-list 'ac-dictionary-directories "/home/zvord/.emacs.d/ac-dict")
(define-key ac-mode-map [(meta return)] 'auto-complete)

(defun my-cedet-hook ()
  (add-to-list 'ac-sources 'ac-source-semantic))
(add-hook 'c-mode-common-hook 'my-cedet-hook) 
```

From all I've read this should be enough to get auto-complete work, but it isn't.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:35:33.083

您的自动完成配置是否允许自动开始完成？您需要检查以下变量的值：`ac-auto-show-menu`- 等待多久显示可能完成的菜单（默认为 0.5 秒），以及`ac-auto-start`- 何时开始完成（您需要输入多少符号 - 原始值为 2）。

自动完成的完整配置可能如下所示（除了您在 中的设置`my-cedet-hook`）：

```
(require 'auto-complete-config)
(ac-config-default)
;; start after 3 characters were typed
(setq ac-auto-start 3)
;; show menu immediately...
(setq ac-auto-show-menu t)
;; explicit call to auto-complete
(define-key ac-mode-map [(meta return)] 'auto-complete) 
```

我使用类似的配置，它对我来说很好，显示语义数据的完成。您尝试对哪种语言使用名称补全？例如，对于 C++，有必要将条目添加到 spp-table 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T21:51:30.743

尝试改变：

> (defun my-cedet-hook () (add-to-list 'ac-sources 'ac-source-semantic))

进入：

> (defun my-cedet-hook () (add-to-list 'ac-sources 'ac-source-semantic-raw))

它应该工作。

# ios - 需要一个 UINavigationController 的解决方案，带有应用程序的后退按钮

> ID：13218678
> 
> 赞同：0
> 
> 时间：2012-11-04T12:52:28.617
> 
> 标签：ios, xcode, uiwebview, uinavigationcontroller

在我的应用程序中，我想有一种方法让用户访问一个网站，但不要离开我的应用程序。
我用 UIWebView 做到这一点。
我想经常`"Back to app"`在顶部的 NavigationBar 上有一个按钮。
Web 导航的其余部分（后退、前进）也应该在顶部，但会随着上下文出现和消失。

问题是我不知道如何让按钮出现在 UINavigationController 上。如何才能做到这一点？

我将 UIWebViewDelegate 设置为接收所有相关功能，但没有出现按钮。

**编辑**：我需要以编程方式解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:03:48.990

从 iOS 5 开始，在 上有`leftBarButtonItems`and `rightBarButtonItems`（注意复数）属性`UINavigationItem`，因此有一种方法可以拥有更多按钮。在我看来，这些只能以编程方式访问，但不能从 Interface Builder 访问。

如果可以的话，我的建议是不只是将 Web 视图添加为子视图，而是给它自己的 ViewController 并将其推送到导航控制器的堆栈上。这将免费为您提供后退按钮（毕竟这就是 UINavigationController 的设计目的）。它应该可以帮助您将 Web 浏览代码与应用程序中的其他内容分开。

注意：在您的情况下，您将`leftItemsSupplementBackButton`浏览器视图控制器的属性设置`navigationItem`为`YES`获取自动后退按钮（详细信息在文档中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:22:30.640

如果不采取一些技巧，您不能在 NavigationController 的导航栏上拥有两个以上的按钮。有两个属性`self.navigationItem.leftBarButtonItem`和`self.navigationItem.rightBarButtonItem`。如果没有，请添加自定义视图并将按钮放在那里。[此处](https://stackoverflow.com/questions/1803609/how-to-add-2-buttons-into-the-uinavigationbar-on-the-right-side-without-ib)显示了实现具有多个操作的多个按钮的好方法。

# matlab - matlab和矩阵尺寸

> ID：13218683
> 
> 赞同：-2
> 
> 时间：2012-11-04T12:53:28.007
> 
> 标签：matlab, math

Matlab 中的矩阵乘法又遇到了一个问题。我必须为给定函数绘制泰勒多项式。这个问题与我之前的问题相似（但这次，函数是`f: R^2 -> R^3`），我不知道如何制作矩阵以使其工作......

```
function example
   clf;
   M = 40; 
   N = 20; 

   % domain of f(x)
   x1 = linspace(0,2*pi,M).'*ones(1,N); 
   x2 = ones(M,1)*linspace(0,2*pi,N);

   [y1,y2,y3] = F(x1,x2); 
   mesh(y1,y2,y3,...
     'facecolor','w',...
     'edgecolor','k');
   axis equal; 
   axis vis3d; 
   axis manual; 
   hold on

   % point for our Taylor polynom
   xx1 = 3; 
   xx2 = 0.5; 
   [yy1,yy2,yy3] = F(xx1,xx2); 

   % plots one discrete point
   plot3(yy1,yy2,yy3,'ro'); 

   [y1,y2,y3] = T1(xx1,xx2,x1,x2); 
   mesh(y1,y2,y3,...
     'facecolor','w',...
     'edgecolor','g');

% given function
function [y1,y2,y3] = F(x1,x2)
   % constants
   R=2; r=1; 

   y1 = (R+r*cos(x2)).*cos(x1);
   y2 = (R+r*cos(x2)).*sin(x1);
   y3 = r*sin(x2);

function [y1,y2,y3] = T1(xx1,xx2,x1,x2)
   dy = [
     -(R + r*cos(xx2))*sin(xx1) -r*cos(xx1)*sin(xx2) 
      (R + r*cos(xx2))*cos(xx1) -r*sin(xx1)*sin(xx2) 
                              0  r*cos(xx2)          ];
   y = F(xx1, xx2) + dy.*[x1-xx1; x2-xx2];

function [y1,y2,y3] = T2(xx1,xx2,x1,x2)
% ? 
```

我知道我的代码充满了错误（我只需要修复我的 T1 函数）。`dy`表示雅可比矩阵（总推导`f(x)`- 我希望我做对了......）。我不确定Hessian矩阵的`T2`外观如何，希望我能弄清楚，我只是迷失在Matlab中......

**编辑**：我试图改进我的格式 - 这是我的雅可比矩阵

```
[-(R + r*cos(xx2))*sin(xx1), -r*cos(xx1)*sin(xx2)...
  (R + r*cos(xx2))*cos(xx1), -r*sin(xx1)*sin(xx2)...
  0,                          r*cos(xx2)]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T13:46:05.407

```
function [y1,y2,y3]=T1(xx1,xx2,x1,x2)
    R=2; r=1;
    %derivatives
    y1dx1 = -(R + r * cos(xx2)) * sin(xx1);
    y1dx2 = -r * cos(xx1) * sin(xx2);
    y2dx1 = (R + r * cos(xx2)) * cos(xx1);
    y2dx2 = -r * sin(xx1) * sin(xx2);
    y3dx1 = 0;
    y3dx2 = r * cos(xx2);
    %T1
    [f1, f2, f3] = F(xx1, xx2);
    y1 = f1 + y1dx1*(x1-xx1) + y1dx2*(x2-xx2);
    y2 = f2 + y2dx1*(x1-xx1) + y2dx2*(x2-xx2);
    y3 = f3 + y3dx1*(x1-xx1) + y3dx2*(x2-xx2); 
```

# sql-server - T-SQL 在选择时替换值

> ID：13218684
> 
> 赞同：4
> 
> 时间：2012-11-04T12:53:38.927
> 
> 标签：sql-server, tsql, select

我的表中有一个列 ( `SERVICE_ID`)，其中只能有 3 个值：0、1 和 2。

在 a 上`SELECT`，我想将这些值更改为英文单词以进行显示：

```
select client, SERVICE_ID
from customers 
```

目前显示：

```
| John     | 1
| Mike     | 0
| Jordan   | 1
| Oren     | 2 
```

我想更改查询以获取：

```
| John     | QA
| Mike     | development
| Jordan   | QA
| Oren     | management 
```

有什么方法可以只使用选择来做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T12:55:48.170

```
SELECT client,
       CASE SERVICE_ID
         WHEN 0 THEN 'development'
         WHEN 1 THEN 'QA'
         WHEN 2 THEN 'management'
       END AS SERVICE
FROM   customers 
```

虽然我有一个单独的表用于`Services`列`SERVICE_ID, Name`并加入该表以检索服务名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T12:59:09.207

```
CREATE TABLE `serviceID_lookup` (
    `serviceID` INT(10) NULL,
    `Description` VARCHAR(50) NULL
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB;

select c.client, sl.Description 
from customers c 
inner join serviceID_lookup sl on sl.serviceID = c.SERVICE_ID 
```

# java - 尝试通过java中的axis2访问Web服务时出现异常

> ID：13218686
> 
> 赞同：-2
> 
> 时间：2012-11-04T12:53:45.230
> 
> 标签：java, axis2

我正在尝试通过axis2生成Web服务客户端，但出现此错误：

> org.apache.axis.ConfigurationException：没有名为 Port 的服务可用

你能帮我解决这个错误，当这个错误发生时，为什么以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T08:59:10.290

问题标题和实际问题不同。您能否发布您如何尝试通过 ant 脚本或 wsdl2java 命令生成客户端，如果是，请粘贴 ant 内容或命令。

**wdl2java 例如：-**

%AXIS2_HOME%\bin\WSDL2Java -uri wsdlURL -p net.fmb.integrator.serviceprovider.unistream -d xmlbeans -s

**蚂蚁脚本：-**

```
 <target name="cleanWsdl2JavaOutDir" description="cleanWsdl2JavaOutDir">
        <echo message=".......Cleaning the Previous SRC directory........"/>
        <delete dir="${outputdir}"/>
        <mkdir dir="${outputdir}"/>
     </target>

 <echo message=".............Processing wsdl2java................."/>   
 <target name="wsdl2java" depends="cleanWsdl2JavaOutDir">
    <delete dir="output" />
    <java classname="org.apache.axis2.wsdl.WSDL2Java" fork="true">
        <classpath refid="axis.classpath"/>
        <arg value="-d"/>
        <arg value="xmlbeans"/>
        <arg value="-uri"/>
        <arg value="${wsdlFile}"/>
        <arg value="-ss"/>
        <arg value="-g"/>
        <arg value="-sd"/>
        <arg value="-o"/>
        <arg file="${outputdir}"/>
        <arg value="-p"/>
        <arg value="${outputpkg}"/>
    </java> 
 </target> 
```

# pdf - 为 iframe 设置自动高度

> ID：13218687
> 
> 赞同：1
> 
> 时间：2012-11-04T12:53:53.183
> 
> 标签：pdf, iframe, height

我有一个带有 pdf 文件的 iframe：

```
<iframe src="pdf/sample.pdf"></iframe> 
```

如何设置 iframe 与 pdf 文件高度相同，没有滚动条？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:58:45.210

如果要显示不带滚动条的 PDF，可以通过在 URL 中传递参数来实现。Adobe 在此处记录了这一点：http: [//www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf)

尝试这个：

```
<iframe src="pdf/sample.pdf#view=fit"></iframe> 
```

您没有完全设置 iframe 的高度以适合 PDF，但它可能是最强大的解决方案，因为它独立于浏览器并且不需要 JavaScript。

* * *

这是丹尼尔发表评论后的更新。

我创建了一个测试 HTML，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <title>Untitled Page</title>
</head>
<body>
   <iframe src="http://partners.adobe.com/public/developer/en/pdf/PDFReference.pdf#view=fit&toolbar=0&navpanes=0"
      width="300px" height="400px"></iframe>
</body>
</html> 
```

这是它在 Chrome 中的外观：

![在此处输入图像描述](../Images/cfe2fb98d2d0d2669fa523fc18e38c0c.png)

这正如预期的那样。

请注意，我还关闭了工具栏和导航窗格，以便为页面留出空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:46:27.807

您可以使用我在我的 Facebook 帖子[https://www.facebook.com/antimatterstudios/posts/10151007211674364中解释的方法简单地做到这一点](https://www.facebook.com/antimatterstudios/posts/10151007211674364)

你有一个 IFrame，你想自动设置它的高度，因为你在你的另一个网站上托管一个页面。

好吧，不幸的是，IFrame 无法获取您正在加载的内容的高度，除非您设置高度，否则它将显示默认高度或根本不显示高度。这很烦人。

我有适合你的解决方案，它只适用于最近的标准支持浏览器，但也适用于 IE8，所以对于大约 99% 的人来说，它是完美的。

唯一的问题是您需要在 iframe 中插入一个 javascript，如果您正在加载的内容属于您，这很容易，您只需打开您正在加载的内容并将 javascript 放入内容中即可。

在您的网站中，您需要一段可以“从 IFrame 接收消息”的 javascript，如下所示

```
jQuery(document).ready(function(){
    jQuery(window).bind("message",function(e){
        data = e.data || e.originalEvent.data;
        jQuery("iframe.newsletter_view").height(data.height);
    });
}); 
```

在您的 IFrame 内容中，将其添加到最底部，即使 javascript 不在标签内，也可以使用 PHP 或其他方式执行“$template.$javascript”之类的操作

```
<script type="text/javascript" src="jquery-1.7.1-min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    parent.postMessage({
        height:$(document.body).height()+50+"px"
    },"*");
});
</script> 
```

显然我正在使用 jquery，你不必这样做，它更容易而且可能你正在使用它，所以省去你的麻烦。

如果你这样做，当 iframe 加载时，它会向父窗口发送一个信号，它会根据内容的长度调整 iframe 的大小:)

我相信你可以弄清楚如何改变这些小东西，但这就是我正在使用的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-31T16:45:56.077

我的解决方案

```
$(document).ready(function(){
  var width = $(window).width();
  var height = $(window).height();

  $('#objFile').attr('style', 'width: ' + width + 'px; height: ' + height + 'px;');
}); 
```

```
<object data="myFile.pdf" type="application/pdf" id="objFile"></object> 
```

# c++ - 提升多线程和共享变量

> ID：13218688
> 
> 赞同：0
> 
> 时间：2012-11-04T12:53:59.797
> 
> 标签：c++, multithreading, variables, boost, shared

首先，如果这个问题已经在这里，我很抱歉，但我的谷歌技能似乎让我失望了。

基本上，我有一个可以随时检查任何传入消息的功能。还有一个全局变量应该存储此消息。（我把这个函数放在一个线程中）

我想使用以下方式检查传入的消息：

```
while (global_array[0] != '#') { } // all messages are padded with '#' 
```

可悲的是，这似乎不起作用。

我试着让这个 ' `global_array`' 不稳定，但它不会与我用于接收的 TCP 函数一起使用。

我真的只需要这个工作..请，任何帮助将不胜感激。

编辑：“似乎不起作用”->变量似乎没有改变，因为我陷入了这个循环

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:21:57.993

在线程之间进行通信时，您需要某种形式的同步。制作一个变量`volatile`并不是**表明**该变量在不同线程之间使用的一种手段。它所做的只是防止*编译器*优化对这个变量的访问，但除非你告诉它，否则 CPU 不会开始从缓存以外的任何地方读取任何内存的内容。也就是说，使用`volatile`只会让你的代码变慢（是的，我知道在某些平台上编译器实现者选择`volatile`与多线程原语挂钩，但这样做通常被认为是一个坏主意）。

出于您描述的目的，您希望使用*条件变量*来保护对共享数据的访问：

1.  读取线程锁定互斥锁，保护对您的并发访问，`global_array`并一直等待条件变量，直到有数据。
2.  写入线程锁定互斥体，将数据放入其中，解锁互斥体，并向条件变量发出信号。

我认为[Boost](http://boost.org/)有一个封装了类似功能的类，并且我确信用于在不同线程之间进行通信的队列代码已发布到 Stackoverflow。在 Google 上搜索“线程通信队列”会产生大量链接以获取灵感。

# sql - 原则 2：如何使用 sql 代码列扩展实体？

> ID：13218693
> 
> 赞同：3
> 
> 时间：2012-11-04T12:54:16.247
> 
> 标签：sql, doctrine-orm, native-sql, customcolumn

我有实体

```
mh\BTBundle\Entity\Post:
    type: entity
    table: post
    repositoryClass: mh\BTBundle\Repository\PostRepository
    fields:
        id:
            id: true
            type: integer
            unsigned: true
            nullable: false
            generator:
                strategy: IDENTITY
        title:
            type: string
            length: 255
            nullable: false
        content:
            type: text
            nullable: false
        isModered:
            type: boolean
            nullable: false
        isPublished:
            type: boolean
            nullable: false
        pubDate:
            type: datetime
            nullable: false 
```

现在在 1 分钟的 cron 调用脚本中设置 isPublished = true 如果 post 有 isModered = true 和 pubDate < :now。

```
$this->getEM()->createQueryBuilder()
            ->update('BTBundle:Post p')
            ->set('p.isPublished', 'true')
            ->where('p.pubDate < :date AND p.isModered = true')
            ->setParameter(':date', new \DateTime())
            ->getQuery()->execute(); 
```

但是我想定义自定义列 isPublished，如果 SQL ( `p.pubDate < CURDATE() AND p.isModered = 1`) 则返回 true。我怎样才能做到？

我想用

```
$posts = $this->getRepository('Post')->findBy(array(
            'user' => $user,
            'isPublished' => true,
        )); 
```

代替

```
$this->getEM()->createQueryBuilder()
                ->select('p')
                ->from('BTBundle:Post', 'p')
                ->where('p.isModered = true')
                ->andWhere('p.pubDate < :date')
                ->andWhere('p.user = :user')
                ->setParameter(':date', new \DateTime())
                ->setParameter(':user', $user)
                ->getQuery()->execute(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T13:47:11.520

最简单的方法是创建一个计算[列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)。所以像这样。

```
CREATE TABLE dbo.Example
(
    ExampleId int IDENTITY (1,1) NOT NULL,
    Value1 INT
    Value2 INT
    ComputedCol AS Value1 + Value2
); 
```

您可以在 AS 语句中使用任何有效的 SQL 逻辑。

# c# - 在嵌套的 Parallel.For 循环中使用 WriteLine 时出现 IndexOutofRangeException

> ID：13218700
> 
> 赞同：2
> 
> 时间：2012-11-04T12:56:03.403
> 
> 标签：c#, wpf, kinect-sdk

我正在尝试使用带有以下代码的嵌套 Parallel.For 循环将 kinect 深度数据写入文本文件。但是，它给出了`IndexOutofRangeException`.

如果使用简单的 for 循环，该代码可以完美运行，但它会挂起 UI，因为深度格式设置为`640x480`导致循环写入`307200 lines`文本文件中的`30fps`.

因此，我切换到并行。对于方案。如果我从嵌套循环中省略 writeLine 命令，则代码可以正常工作，这表明`IndexOutofRangeException`在 writeline 命令中出现了。我不知道如何解决这个问题。请指教。

有没有更好的解决方法来避免 UI 冻结？

谢谢。

```
using (DepthImageFrame depthImageframe = d.OpenDepthImageFrame())
            {
                if (depthImageframe == null)
                    return;
                depthImageframe.CopyPixelDataTo(depthPixelData);

                swDepth = new StreamWriter(@"E:\depthData.txt", false);
                int i = 0;

                Parallel.For(0, depthImageframe.Width, delegate(int x)
                {
                    Parallel.For(0, depthImageframe.Height, delegate(int y)
                    {
                        p[i] = sensor.MapDepthToSkeletonPoint(depthImageframe.Format,
                                x, y, depthPixelData[x + depthImageframe.Width * y]);
                        swDepth.WriteLine(i + "," + p[k].X + "," + p[k].Y + "," + p[k].Z);
                        i++;
                    });
                });            

                swDepth.Close();

            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T13:04:50.747

我认为问题不在于 IndexOutofRange。您看到 IndexOutofRangeException 只是因为 StreamWriter 的一些内部实现。主要问题是您从多个线程中使用 swDepth.WriteLine。这就解释了为什么您的代码适用于普通 fors，但无法使用并行 fors。

检查链接 [http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx](http://msdn.microsoft.com/en-us/library/system.io.streamwriter.aspx)。它说只有 StreamWriter 的静态成员是线程安全的。

要解决这个问题，只需更换

```
swDepth.WriteLine(i + "," + p[k].X + "," + p[k].Y + "," + p[k].Z); 
```

和

```
lock(someSyncObject)
    swDepth.WriteLine(i + "," + p[k].X + "," + p[k].Y + "," + p[k].Z); 
```

还要确保 sensor.MapDepthToSkeletonPoint 可以在多个线程中工作。

# java - 如何观察多个可观察线程

> ID：13218704
> 
> 赞同：1
> 
> 时间：2012-11-04T12:56:26.940
> 
> 标签：java, multithreading, observer-pattern, observable

我正在尝试在 java 中创建一个程序，其中线程是可观察的对象，窗口是观察者。我不明白的是如何在 update 方法上区分几个线程，它们都做同样的事情，以便我可以单独更新它们在窗口上的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:02:09.747

正如@PeterLawrey 在评论中所述，您可以使用[Thread](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#Thread%28java.lang.String%29)对象中的 name 参数设置一个唯一名称，然后查询您的 Threads 并查找哪个线程在做什么。构造函数如下：

```
public Thread(String name)
    Allocates a new Thread object. This constructor has the same effect as Thread (null, null, name).
Parameters:
    name - the name of the new thread 
```

但是，为了在执行后更容易地访问线程，并跟踪我建议使用[ThreadGroup](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html)对象。来自 api 文档：

> 一个线程组代表一组线程。此外，一个线程组还可以包括其他线程组。线程组形成一棵树，其中除了初始线程组之外的每个线程组都有一个父级。

因此，您可以使用方法[public int enumerate(Thread[] list, boolean recurse)](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html#enumerate%28java.lang.Thread%5b%5d%29)

哪一个

> 将此线程组中的每个活动线程复制到指定的数组中。如果 recurse 为真，则此方法递归枚举此线程组的所有子组，并且还包括对这些子组中每个活动线程的引用。如果数组太短而无法容纳所有线程，则会默默忽略多余的线程。

以及`getName()`组中的所有线程。我希望它有所帮助。干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:33:29.750

如果 name 不够，您可以考虑使用 a`ThreadStatic`来存储有关每个线程的其他信息：

```
class ThreadPosition {
   [ThreadStatic]
   private static int x;

   /**
   * Only call from thread.
   **/
   public static int getX()
   {
     return x;
   }
} 
```

# web-services - 使用 commons-httpclient 和 EWSJavaAPI 获取 nullPointerException

> ID：13218706
> 
> 赞同：5
> 
> 时间：2012-11-04T12:56:52.267
> 
> 标签：web-services, exchangewebservices, jtapi, ewsjavaapi, cisco-jtapi

我正在使用**EWS Java API 1.1.5** ，我正在尝试将服务绑定到收件箱文件夹，如下所示：

```
ExchangeService service = new ExchangeService();
        ExchangeCredentials credentials = new WebCredentials(email, password);
        service.setCredentials(credentials);
        service.setUrl(new java.net.URI("https://" + host
                + "/EWS/Exchange.asmx"));
Folder inbox = Folder.bind(service, WellKnownFolderName.Inbox); 
```

我从jsp页面调用上面的代码。

但我得到**NullPointerException**：

```
java.lang.NullPointerException
    at org.apache.commons.httpclient.HttpMethodBase.getStatusCode(HttpMethodBase.java:570)
    at microsoft.exchange.webservices.data.HttpClientWebRequest.getResponseCode(Unknown Source)
    at microsoft.exchange.webservices.data.ServiceRequestBase.validateAndEmitRequest(Unknown Source)
    at microsoft.exchange.webservices.data.SimpleServiceRequestBase.internalExecute(Unknown Source)
    at microsoft.exchange.webservices.data.MultiResponseServiceRequest.execute(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.bindToFolder(Unknown Source)
    at microsoft.exchange.webservices.data.ExchangeService.bindToFolder(Unknown Source)
    at microsoft.exchange.webservices.data.Folder.bind(Unknown Source)
    at microsoft.exchange.webservices.data.Folder.bind(Unknown Source)
    at com.xeno.phonesuite.web.Mail.Mail.readInbox(Mail.java:49)
    at org.apache.jsp.mail.inbox_jsp._jspService(inbox_jsp.java:79)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

我正在使用**commons-httpclient 3.1**。

从在 tomcat 7 上运行的 Web 项目运行代码时会发生此异常，但从桌面应用程序运行代码时它工作正常。

**更新：**

1- httpclient 异常前调试：

```
2012-11-07/16:37:32.425 [http-bio-8080-exec-2] DEBUG Set parameter http.auth.scheme-priority = [NTLM, Basic, Digest]
2012-11-07/16:37:32.425 [http-bio-8080-exec-2] DEBUG enter HttpState.setCredentials(AuthScope, Credentials)
2012-11-07/16:37:32.425 [http-bio-8080-exec-2] DEBUG Set parameter http.socket.timeout = 100000
2012-11-07/16:37:32.425 [http-bio-8080-exec-2] DEBUG Set parameter http.connection.timeout = 100000
2012-11-07/16:37:32.425 [http-bio-8080-exec-2] DEBUG enter PostMethod.clearRequestBody()
2012-11-07/16:37:32.425 [http-bio-8080-exec-2] DEBUG enter EntityEnclosingMethod.clearRequestBody() 
```

2-异常前**的 EWS 跟踪：**

```
<Trace Tag="EwsRequestHttpHeaders" Tid="33" Time="2012-11-07 15:14:24Z">
POST /EWS/Exchange.asmx HTTP/1.1
Content-type : text/xml; charset=utf-8
Accept-Encoding : gzip,deflate
Keep-Alive : 300
User-Agent : ExchangeServicesClient/0.0.0.0
Connection : Keep-Alive
Accept : text/xml

</Trace> 
```

并且它应该发送以下请求：

```
<Trace Tag="EwsRequest" Tid="1" Time="2012-11-07 15:18:19Z">
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:m="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:t="http://schemas.microsoft.com/exchange/services/2006/types"><soap:Header><t:RequestServerVersion Version="Exchange2010_SP1"></t:RequestServerVersion></soap:Header><soap:Body><m:FindItem Traversal="Shallow"><m:ItemShape><t:BaseShape>AllProperties</t:BaseShape></m:ItemShape><m:IndexedPageItemView MaxEntriesReturned="5" Offset="0" BasePoint="Beginning"></m:IndexedPageItemView><m:ParentFolderIds><t:DistinguishedFolderId Id="inbox"></t:DistinguishedFolderId></m:ParentFolderIds></m:FindItem></soap:Body></soap:Envelope>
</Trace> 
```

但它没有，而是抛出异常。

**UPDATE2：**忘了提到我正在使用 Cisco jtapi 6.1 库来处理 IP 电话，谷歌搜索后我发现最新版本的 jtapi 解决了以下问题：

```
CSCtz31973 : Ews request printed is Null in case of StreamingSubscriptionRequest 
```

我的理解是 EWS 请求为空（无法发送 microsoft webservices 请求），所以我将更新 jtapi 库并试一试。

请告知如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T12:08:15.460

**升级jaxws-rt**和**saaj-api**的 jar 后问题解决如下：

```
 <dependency>
        <groupId>com.sun.xml.ws</groupId>
        <artifactId>jaxws-rt</artifactId>
        <version>2.2.7</version>
    </dependency>

    <dependency>
        <groupId>javax.xml.soap</groupId>
        <artifactId>saaj-api</artifactId>
        <version>1.3.4</version>
    </dependency> 
```

# php - 过滤除字母和“-”之外的所有内容

> ID：13218708
> 
> 赞同：-3
> 
> 时间：2012-11-04T12:57:08.363
> 
> 标签：php, regex

我正在尝试编写一个函数来过滤从输入到只有字母和符号“-”的所有内容。我想要那个符号，因为输入包含名称，有人可能叫 Jean-Paul，这是我当前的代码：

```
if(!preg_match('/^\[a-zA-Z]+$/',$string)) {
 // Containing something other than a-z and A-Z
} 
```

`$string = 'Jean-Paul';`现在给出该字符串包含非法字符，但我该怎么做才能接受 " `-`" ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T12:58:52.030

```
if (!preg_match('/^[A-Z-]+$/i', $string)) {
 // Contains something other than A-Z (case-insensitive) or -
} 
```

如果 A`-`是字符类中的第一个或最后一个字符，则它被视为字符类中的文字破折号。

请注意，`"Jean-Rémy"`仍然会失败。您确定要将自己限制为 ASCII 字母吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T14:35:40.860

如果**“过滤器”**是指删除不需要的字符，则使用

```
$s = preg_replace("/[^a-z-]/i", "", $s); 
```

或者

```
$s = preg_replace("/[^a-z-]/i", "", iconv('UTF-8', 'ASCII//TRANSLIT//IGNORE', $s)); 
```

# cordova - 如何在我的 phonegap android 应用程序中实现 facebook 发送、twitter 分享、发送短信、发送电子邮件？

> ID：13218709
> 
> 赞同：1
> 
> 时间：2012-11-04T12:57:08.447
> 
> 标签：cordova, phonegap-plugins

当我使用基于 HTML 的 phonegap 框架时，我需要一个插件来实现它。当我在谷歌上搜索时，我得到了两次热烈的搜索。

1.  [http://tech.sarathdr.com/featured/android-phonegap-plugin-for-social-share-email-facebook-twitter-and-sms](http://tech.sarathdr.com/featured/android-phonegap-plugin-for-social-share-email-facebook-twitter-and-sms)

    一个。在上面的 twitter 功能没有实现。

    湾。上面facebook分享代码window.plugins.SendSms.social有错别字---->（应该是）window.plugins.ShareSocial.social

    C。由于它是为 phonegap 1.9 开发的，因此在 phonegap 2.1.0 版本中使用了一些不推荐使用的方法，

    ctx.startActivity() ----> cordova.getActivity().startActivity() this.ctx.startActivityForResult ----> this.cordova.startActivityForResult com.phonegap ----> org.apache.cordova

    我已经完成了上述所有更新，现在我的所有错误都消失了，但是当我点击按钮电子邮件、短信、Facebook 时仍然没有发生任何事情（我正确地实现了这些按钮的 javascript 点击事件）

    任何知道 java、phonegap 插件开发和 javascript 的人都可以，请为 2.1.0 发布示例代码实现相同的插件以显示它是如何工作的。我非常需要它尽快。

2.  [https://github.com/phonegap/phonegap-plugins/tree/master/Android/Share](https://github.com/phonegap/phonegap-plugins/tree/master/Android/Share)

    没有一个关于如何为我的目的使用这个插件的例子。即使是官方文档也无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:27:05.690

我已经为 Cordova 2 更新了相同的插件，请您尝试一下，如果您仍然有问题，请告诉我。[http://tech.sarathdr.com/featured/social-share-plugin-for-android-cordova-2-2-0-email-sms-facebook-twitter-share](http://tech.sarathdr.com/featured/social-share-plugin-for-android-cordova-2-2-0-email-sms-facebook-twitter-share)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T15:25:30.137

真的是一个很酷很实用的插件！我只需要进行两次编辑即可使其正常工作...首先：更改 window.SocialShare.sms 中的 window.plugins.ShareSocial.sms （适用于所有共享者）

二：修改social.js文件中SocialShare.sms中的SocialShare.prototype.sms

现在我有一个问题：你能给我任何建议来添加分享到 twitter 方法吗？

# wix - Visual Studio Express 版本的 Wix 项目模板？

> ID：13218710
> 
> 赞同：3
> 
> 时间：2012-11-04T12:57:22.030
> 
> 标签：wix, wix3.6

是否可以将 Wix 与 Express 版本一起使用？我对 2010/2012 版本感兴趣。我知道我可以从命令行使用烛光，但我对与 IDE 集成感兴趣

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:34:11.743

VS 的 Express 版本不允许使用必要的插件扩展 VS。所以你必须留在命令行。

作为VS的替代方案，您可以尝试WiXEdit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-27T19:53:22.430

实际上，如果目标是拥有一个免费的安装程序套件，那么 WiX 非常乐意安装到[Visual Studio Shell Integrated](https://msdn.microsoft.com/en-us/library/bb129445.aspx)中，它是免费提供的。WiX 的所有功能均可用。

唯一的限制是你必须打开一个不同的 Visual Studio 实例来构建你的安装程序，但我没有发现这有丝毫限制，事实上我很欣赏关注点的分离。

当然，现在另一种解决方案是简单地使用 VS 社区版。

# jquery - 我可以使用 jquery 验证引擎验证动态创建的表单吗？

> ID：13218711
> 
> 赞同：2
> 
> 时间：2012-11-04T12:57:23.423
> 
> 标签：jquery, ajax, jquery-validation-engine

问题是我要验证的表单位于通过 AJAX 加载的页面上。我试图在页面加载后调用验证引擎，但它似乎不起作用。是否可以使用此插件来验证此类表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-25T17:55:10.180

我遇到过同样的问题。验证引擎不适用于通过 AJAX 加载的表单。对我有用的是首先将验证引擎从所有表单中分离出来，然后重新附加：

```
$('form').validationEngine('detach');
$('#yourform').validationEngine(); 
```

具体来说，我通过 AJAX 在模式弹出窗口中加载表单。这是完整的代码，其中还包括一个关闭弹出窗口的函数：

```
$('<div>Loading...</div>')
.load(url, function() {
    $('form').validationEngine('detach');
    $('#yourform').validationEngine(); 
})
.dialog({
    modal: true,
    height:400,
    width:400,
    resizable: false,
    draggable: false,
    close: function(event, ui) {
        $(this).dialog('destroy').remove()
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:42:00.937

我同意@Stefan P. 的一些代码示例会有所帮助。但是，从[文档](https://github.com/posabsolute/jQuery-Validation-Engine#instantiation)看来，您可以简单地将以下内容添加到您的 AJAX 成功处理程序中：

```
$("#id-of-dynamically-loaded-form").validationEngine(); 
```

例如，如果您`$.load`用于执行 AJAX 请求，则可能如下所示：

```
$('#somewhere').load('someurl', function() {
  // Instantiate validation-engine
  $("#id-of-dynamically-loaded-form").validationEngine();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T07:34:08.300

我遇到了同样的问题，我刚刚通过获取请求获得了整个表单，而 jquery 验证引擎根本无法正常工作。我进行了很多搜索，最后我发现如果我们在单击按钮时验证表单，那么我们应该首先断开然后附加验证引擎，因为表单附带了多个事件，因此建议断开连接。例如，我得到了带有`id="Table1`“的表格，`save button`点击时我会这样做

```
$("#Table1").validationEngine('detach');
$("#Table1").validationEngine('attach');
$("#Table1").validationEngine('validate'); 
```

执行`$("#Table1").validationEngine('validate');`此行后，它将`true or false`在其返回值上为您提供一个布尔值，您可以`save or show errors`在表单上

# python - 属性命名，元组与多个名称

> ID：13218712
> 
> 赞同：0
> 
> 时间：2012-11-04T12:57:25.483
> 
> 标签：python, class, attributes, naming-conventions

我正在考虑我的类 api 的一部分，出现的一件事如下：我应该使用相等属性的元组/列表还是应该使用多个属性，例如，假设我有一个`Controller`可以读取多个温度计的类。

```
class Controller(object):
    def __init__(self):
        self.temperature1 = Thermometer()
        self.temperature3 = Thermometer()
        self.temperature2 = Thermometer()
        self.temperature4 = Thermometer() 
```

对比

```
class Controller(object):
    def __init__(self):
        self.temperature = tuple(Thermometer() for _ in range(4)) 
```

当我应该使用哪种风格时，是否有最佳实践？

（假设温度计的数量不会改变，否则选择带有列表的第二种样式会很明显。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T13:02:45.570

元组或列表，100%。`variable1`, `variable2`, etc... 是一个非常常见的反模式。

想想你以后如何编码——很可能你会想要对这些项目做类似的事情。在数据结构中，您可以遍历它们以执行操作，使用编号的变量名称，您必须手动完成。不仅如此，它还使添加更多值变得更容易，它使您的代码更通用，因此更可重用，并且意味着您可以轻松地在执行过程中添加新值。

为什么要假设数字不会改变？很多时候，这样的假设最终是错误的。无论如何，您已经可以看到，第二个示例举例说明了*不要重复自己*的习语，这是清晰、高效代码的核心。

即使您有更相关的名称，例如：`cpu_temperature`，，`hdd_temperature`我会说，如果您看到自己对它们执行相同的操作，您需要一个数据结构，而不是很多变量。在这种情况下，字典：

```
temperatures = {
    "cpu": ...,
    "hdd": ...,
    ...
} 
```

主要的是，通过将数据存储在数据结构中，您可以向软件提供有关您提供的分组的信息。如果你只是给他们变量名，你只是告诉程序员——如果他们被编号，那么你甚至没有真正告诉程序员他们是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:05:50.423

另一种选择是将它们存储为字典：

```
{1: temp1, 2: temp2} 
```

决定如何存储数据的最重要的事情是传递数据的*含义*，如果这些项目在稍微不同的上下文中本质上是相同的信息，那么它们应该被分组（根据数据类型）来传递——即它们应该是存储为元组或字典。

注意：如果您使用元组，然后插入更多数据，例如`temp0`在开头插入 a，那么您可能会在获取单个变量的情况下出现向后兼容性问题。（使用字典`temp[1]`将始终返回`temp1`。）

# php - 错误报告设置为 0 但仍显示错误

> ID：13218713
> 
> 赞同：0
> 
> 时间：2012-11-04T12:57:30.547
> 
> 标签：php, error-reporting

在我的应用程序中，我将 error_reporting 设置为 0，只是为了确保在我回显 error_reporting() 时设置了 i，它说它是 0。

如果我故意遗漏分号只是为了触发错误（在我将其设置为 0 的地方），它仍然会显示错误：

> 解析错误：语法错误，. 中的意外 T_VARIABLE . .

有谁知道为什么会这样？我正在使用 WAMP 在自己的机器上进行开发。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T12:58:46.470

由于它是一个解析错误，因此在它实际运行您的任何代码*之前*就会遇到它，因此它会显示出来。

您应该更改`php.ini`文件中的设置，因为这将在解析 PHP 文件之前进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:00:43.373

除非您实际上将 php.ini 文件中的 error_reporting 设置为 0，否则会显示解析错误

# php - PHP：对于每个锚标记

> ID：13218718
> 
> 赞同：0
> 
> 时间：2012-11-04T12:58:05.493
> 
> 标签：php, html, for-loop, anchor, each

我目前在我的网站上有一个名为“服务”的侧栏，我希望在其中填充诸如“Windows”、“Linux”、“Android”之类的类别。由于所有这些“类别”都存在于一个页面 (services.php) 中，我有一个想法来锚定它们中的每一个，这样我就可以创建一个快速链接列表 (services.php/#Windows, services.php/# Linux 等）。我想做的是使用 PHP 函数将我在`Services.php`页面上创建的所有锚点拉到侧边栏中，这样如果我编辑 services.php 和 include `<a id="tips">Other useful things</a>`，侧边栏会自动包含指向该锚点的链接. 有点像“对于此页面上的每个锚点，创建指向 thispage.php/#anchor-name 的链接”。

我希望这个问题比我的第一个问题更容易理解。我意识到我不是很清楚。

我知道我可以为此使用数据库表，但我希望它非常易于管理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T13:36:25.137

一个通用的答案：

例如，假设您有一个 id = anchors 的导航栏，锚点位于其中。

示例 HTML：

```
$html = '<html>(...)
<div id="anchors">
    <a href="anchor1.php">link number 1</a>
    <a href="anchor2.php">another link</a>
</div>
(...)
</html>'; 
```

* * *

示例函数：

```
function findAnchors($html)
{
    $links = array();
    $doc = new DOMDocument();
    $doc->loadHTML($html);
    $navbars = $doc->getElementsByTagName('div');
    foreach ($navbars as $navbar) {
        $id = $navbar->getAttribute('id');
        if ($id === "anchors") {
            $anchors = $navbar->getElementsByTagName('a');
            foreach ($anchors as $a) {
                $links[] = $doc->saveHTML($a);
            }
        }
    }
    return $links;
} 
```

这将返回一个包含所有链接的数组。

输出：

```
array
  0 => string '<a href="anchor1.php">link number 1</a>' (length=39)
  1 => string '<a href="anchor2.php">another link</a>' (length=38) 
```

* * *

根据 OP 评论编辑：

除非您以某种方式“标记”它们，否则它并非微不足道。一种方法是向每个锚点添加一个类，然后横穿整个文档。

例子：

HTML

```
$html = '<html>(...)
<a class="anchor" href="anchor1.php">link number 1</a>
(... stuff in here)
<a class="anchor" href="anchor2.php">another link</a>
(...)
</html>'; 
```

功能：

```
function findAnchors($html)
{
    $links = array();
    $doc = new DOMDocument();
    $doc->loadHTML($html);
    $aTags = $doc->getElementsByTagName('a');
    foreach ($aTags as $a) {
        $class = $a->getAttribute('class');
        if ($class === "anchor") {
            $links[] = $doc->saveHTML($a);
        }
    }
    return $links;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:07:48.827

如果你想要像 a`link`和 a `name`pair 这样的东西，是的，你将在[`foreach()`](http://php.net/manual/en/control-structures.foreach.php)这里使用函数。假设你有类似的东西：

```
$links = array(
    "index.html" => "Home",
    "about.html" => "About Us",
    "contact.html" => "Contact Us"
); 
```

您可以使用此代码来显示它：

```
foreach ($links as $link => $name) {
    echo "<a href=\"$link\">'$name'</a>";
} 
```

它以这种方式显示：

```
<a href="index.html">Home</a>
<a href="about.html">About Us</a>
<a href="contact.html">Contact Us</a> 
```

这是你想要的吗？

# c - pthread mutex lock/unlock in while(1)

> ID：13218720
> 
> 赞同：5
> 
> 时间：2012-11-04T12:58:10.530
> 
> 标签：c, pthreads, mutex

I'm trying to write very simple multi threading program just to get the catch of it but I fail to understand what exactly is wrong in one of the cases. So:

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>

char string[100];
pthread_t thr_id_rd;
pthread_t thr_id_wr;
pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t cond, cond1;
int read = 0;

void *thread_rd()
{
    pthread_mutex_lock(&lock);
    while (1) {
        pthread_cond_wait(&cond, &lock);
        printf("rd: entered: %s\n", string);
        pthread_cond_signal(&cond1);
    }
    pthread_mutex_unlock(&lock);
}

void *thread_wr()
{
    pthread_mutex_lock(&lock);
    while (1) {
        printf("wr: enter something: ");
        scanf("%s", string);
        pthread_cond_signal(&cond);
        pthread_cond_wait(&cond1, &lock);
    }
    pthread_mutex_unlock(&lock);
}

int main(int argc, char *argv[])
{
    pthread_create(&thr_id_rd, NULL, thread_rd, NULL);
    pthread_create(&thr_id_wr, NULL, thread_wr, NULL);

    pthread_join(thr_id_rd, NULL);
    pthread_join(thr_id_wr, NULL);

    return 0;
} 
```

The above seems to work correctly. But when I edit the two threads like this:

```
void *thread_rd()
{
    while (1) {
        pthread_mutex_lock(&lock);
        pthread_cond_wait(&cond, &lock);
        printf("rd: entered: %s\n", string);
        pthread_cond_signal(&cond1);
        pthread_mutex_unlock(&lock);
    }
}

void *thread_wr()
{
    while (1) {
        pthread_mutex_lock(&lock);
        printf("wr: enter something: ");
        scanf("%s", string);
        pthread_cond_signal(&cond);
        pthread_cond_wait(&cond1, &lock);
        pthread_mutex_unlock(&lock);
    }
} 
```

I'm getting undefined behavior - sometimes it's OK sometimes the program is stuck. According the man pages pthread_cond_wait *must* be called with mutex locked but there is no such restriction for _cond_signal (Question: What is the best practice?). So I decided to call it with mutex locked...

Obviously I'm complete newbie so please excuse my stupid question :( I'll be very grateful if someone can explain this to me...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T03:49:13.623

pthread 条件变量信号不是持久的。如果您在没有任何东西等待信号时发出信号，则信号将丢失。所以你可以看到这样的东西：

```
WR: Lock
WR: Read input
WR: Signal cond
WR: Wait for cond1 (implicitly unlocks)
RD: Lock
RD: Wait for cond (implicitly unlocks) 
```

在这一点上你有一个死锁 - 两个线程都在等待永远不会到来的信号。

使用 condvars 的通常模式是将标志（或其他一些持久性条件）与条件变量配对。然后，您可以执行如下循环：

```
while (!flag) pthread_cond_wait(&cond, &lock); 
```

要发出信号，您设置标志，然后向 condvar 发出信号以唤醒任何服务员。

在您的情况下，您实际上可以`string`用作您的标志 -`string == NULL`将唤醒条件与 . 配对`cond1`并`string != NULL`配对`cond`. 现在，如果您的阅读器线程较晚进入锁，它会看到这一点，`string != NULL`而不是等待 condvar。

# ruby - 隐式上下文和特征类

> ID：13218723
> 
> 赞同：0
> 
> 时间：2012-11-04T12:58:46.507
> 
> 标签：ruby, eigenclass

我最近发现了一篇关于 Ruby 中的隐式上下文的[有趣文章](http://yugui.jp/articles/846)，我发现这段经历非常开放。我知道 Ruby 不仅包含对`self`（*默认方法接收器*）的引用，还包含对*当前类*（也称为*默认定义*或``klass'`）的引用。

从文章中，假设`class`定义将当前类`self`和*当前类*都设置为正在定义的类应该是正确的；就我们考虑*普通*的方法定义（即不使用*点语法*来定义单例方法）而言，在方法定义的上下文中，用`def`,`self`指的是接收对象，并且*当前类*没有改变。

我认为不考虑*点语法*来定义是安全的原因是 Ruby 还提供了一种打开类的特征类的显式方法，而我感兴趣的是了解在打开特征类时如何管理这两个隐式上下文.

使用`def` 众所周知的语法打开一个特征类：

```
class << A
  p self

  def foo
    # ...
  end
end 
```

将 foo 定义为 的*单例方法*，`A`即其 eigenclass 的*实例方法*（be it `A'`）。这段代码也会打印`#<Class:A>`，所以说`<<`语法将当前类`self`和*当前类*都设置为正确`A'`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:18:17.017

是的，它实际上在 A' 的控制下打开了块。您也可以说它的工作原理类似于 A' 的 class_eval。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:41:10.453

其实你写的和写的完全一样：

```
class A
  class << self
    def foo
      #...
    end
  end
end 
```

class << self 语法表示后面会出现一个定义块，这将直接转到传递给 << 的对象的特征类。是的，我说的是对象，而不是类。试试这个（提供上面的类定义）：

```
a = A.new
class << a
  def foo2
  end
end
a.singleton_methods
b = A.new
b.singleton_methods 
```

这意味着，在这种情况下，您在对象 a 的 eigenclass 中定义方法 foo2。但这是对象本身的特征类，而不是类。因此，同一类的其他对象将不会共享此 foo2 定义。

那么这意味着什么？Ruby 是（或声称是）一种纯 OO 语言。一切都是对象。您定义的类的对象是对象。您定义的类也是一个对象。类的类型。它继承自 Object. 在 Ruby 中，所有对象都有一个 eigenclass。实际上，“类方法”的定义只是对其概念的一种解释。“类方法”并不是真正的类方法，而是在类的 eigenclass 中定义的方法。因此，当您调用“类方法”时，您确实是在调用对象方法。这个对象恰好是你定义的一个类。你如何定义特征类方法？正是 class << self 语法。在这种情况下，“自我”是您作为参数传递给类 << 的任何内容。

# objective-c - UIScrollView 内的 UIScrollView 时滚动

> ID：13218732
> 
> 赞同：4
> 
> 时间：2012-11-04T13:00:24.353
> 
> 标签：objective-c, ios, cocoa, uiscrollview, paging

我想在另一个 UIScrollView 的第一页中放置第二个 UIScrollView。要滚动到第一个 UIScrollView 的第 2 页，我现在必须在第二个 UIScrollView 下方的 oder 上方滑动。有没有办法在第二个 UIScrollView 的第 3 页上忽略右滑动，以便我可以滚动到第一个 UIScrollView 的第 2 页？希望你能理解我的问题：/

![UIScrollView 内的 UIScrollView](../Images/c505ead41729e53a69d58a884993a3e0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:34:29.357

有不同的方法。您可以实现滚动视图的委托方法`(void)scrollViewDidScroll:(UIScrollView *)sender`并`(void)scrollViewDidEndDecelerating:(UIScrollView *)sender`观察视图何时滚动。通过这个你可以跟踪第二个滚动视图的当前页面的索引。我还没有尝试过，但是这样的事情应该朝着正确的方向发展：

```
- (void)scrollViewDidScroll:(UIScrollView *)sender
{
    if (indexOfSecondScrollView == 3 && secondScrollView.contentOffSet.x >= 3*second_scroll_view_screen_width){
       firstScrollView.scrollEnabled == YES;
        //move firstScrollView doing something like this:
        [self.scrollView scrollRectToVisible:CGRectMake(x,y,width,height) animated:YES];
    }
    else{
       firstScrollView.scrollEnabled = NO;
    }
} 
```

# c# - 如何在zedgraph中设置自动调整字体大小

> ID：13218736
> 
> 赞同：2
> 
> 时间：2012-11-04T13:00:54.553
> 
> 标签：c#, zedgraph

我在我的 c# 项目中使用 ZedGraph。

我的 X 轴有文本标签（用于条形图），但`XAxis.Scale.IsPreventLabelOverlap = true`缺少每隔一个标签的默认设置。当我将其更改为`false`显示`XAxis.Scale.MajorStep = 1`每个标签时，但字体大小保持不变，并且标签重叠。

有没有办法改变标签的字体大小？或者最好将其切换为 autosize ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:18:57.580

我不想让你知道，但据我所知，你不能直接更改轴标签字体大小。您可以更改轴标题字体大小，但不能更改标签本身。您可以更改它们是否自动调整大小以及自动调整大小的比例，这似乎是您想要的，最终可能会对您有所帮助。[这](http://zedgraph.dariowiz.com/index08a1.html?title=How_does_the_font_and_chart_element_scaling_logic_work%3F)是我正在寻找的资源。

将该`PaneBase.IsFontsScaled`属性设置为true，然后您可以使用该`PaneBase.ScaleFactor()`方法更改比例因子。浏览我链接的资源，我认为您将能够完成它。我没有安装 ZedGraph，所以我无法测试它，但我相信它会是这样的。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-28T20:26:07.667

我的解决方案是；

curve.Label.FontSpec = zg1.GraphPane.Legend.FontSpec.Clone();

曲线.Label.FontSpec.Size = 6;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T06:20:52.800

这个问题我早就忘记了。我找到了自己的解决方案，但不是那么干净。我已经`PaneBase.CalcScaleFactor()`通过更改`return scaleFactor;`为类似`return scaleFactor * 0.75f;`. 现在它可以正常工作了。

# perl - mod_perl and multiple virtual hosts

> ID：13218737
> 
> 赞同：2
> 
> 时间：2012-11-04T13:00:56.973
> 
> 标签：perl, apache, mod-perl2

We have this situation: - Apache running mod_perl - Multiple virtual hosts with own directories - Each virtual module has the same name for perl modules (development hosts, module differ a little bit, but have the same names) - Apache2::Reload for each virtual host to reload module on change

But apache throws 500 error on every 1/3 requests for the page reload and without specific error in the log, only warnings about "redefined functions".

Maybe there are some requirements to run the same module names but different paths and distinct them?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:03:26.550

这是它的完成方式：

```
NameVirtualHost 192.168.0.140

<VirtualHost 192.168.0.140>
     PerlOptions +Parent
     PerlSwitches -Mlib=/path/to/application
     DocumentRoot /path/to/application
     ServerName name.domain.com
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:42:06.190

不，您不能“运行相同的模块名称但使用不同的路径”。Perl 只是不能那样工作。如果您想拥有多个环境，请将它们分开。`-f *configfilename*`您可以在各种端口上运行许多具有不同配置（请参阅选项）的 Apache 实例。然后在主服务器的每个vhost中，反向代理到后端服务器对应的端口。

# pdf - Is it possible to configure OpenERP or my browser to open PDFs automatically?

> ID：13218739
> 
> 赞同：1
> 
> 时间：2012-11-04T13:01:29.713
> 
> 标签：pdf, browser, openerp

Every OpenERP web report ask me if I want to keep the PDF. Of course I must keep it to view it. I end up with lots of PDF files that I have to clean up. I would like to configure OpenERP or my browser to automatically create and manage the temp PDF files.

My research shows me great confusion in the industry about security flaws in PDF files causing browser plugins that profess to being "PDF Viewers" to come and go. I have yet to find any method, procedure, plugin, add-on or magic incantation that views PDFs without me managing the file.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:44:57.690

如果您使用的是 firefox 和 linux ，为什么不打开 firefox 并转到

编辑 -> 首选项 -> 应用程序 ->

搜索“pdf”并在“操作”字段中选择“使用（默认）”。

这样，pdf 将存储在“/tmp”文件夹中并从那里打开。您不必费心管理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-15T20:18:48.213

以干净的方式不可能，您需要一个将 openerp 报告的行为修改为内联的模块。有两种选择：

*   [https://github.com/buke/openerp-web-pdf-preview-print](https://github.com/buke/openerp-web-pdf-preview-print) - 我认为这是最好的选择，因为它一直有效，需要注意的是它会像弹出窗口一样启动一个单独的窗口（然后你需要接受弹出窗口）。
*   [https://www.openerp.com/apps/web_pdf_viewer](https://www.openerp.com/apps/web_pdf_viewer) - 这太棒了，因为它在 openerp 的工作区域中显示了 pdf（无需打开新选项卡或新窗口），但目前不起作用一直以来，有些报告只是下载而不是显示（我不知道为什么）。

BR

安德烈斯卡勒

www.trescloud.com

# javascript - Convert complex JavaScript object to dot notation object

> ID：13218745
> 
> 赞同：19
> 
> 时间：2012-11-04T13:02:14.840
> 
> 标签：javascript, syntax

I have an object like

```
{ "status": "success", "auth": { "code": "23123213", "name": "qwerty asdfgh" } } 
```

I want to convert it to dot notation (one level) version like:

```
{ "status": "success", "auth.code": "23123213", "auth.name": "qwerty asdfgh" } 
```

Currently I am converting the object by hand using fields but I think there should be a better and more generic way to do this. Is there any?

Note: There are some examples showing the opposite way, but i couldn't find the exact method.

Note 2: I want it for to use with my serverside controller action binding.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-04T13:16:06.137

您可以递归地将属性添加到新对象，然后转换为 JSON：

```
var res = {};
(function recurse(obj, current) {
  for(var key in obj) {
    var value = obj[key];
    var newKey = (current ? current + "." + key : key);  // joined key with dot
    if(value && typeof value === "object") {
      recurse(value, newKey);  // it's a nested object, so do it again
    } else {
      res[newKey] = value;  // it's not an object, so set the property
    }
  }
})(obj);
var result = JSON.stringify(res);  // convert result to JSON 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-02T21:21:39.200

`undefined`这是您获得第一个前缀时的修复/破解。（我做过）

```
var dotize = dotize || {};

dotize.parse = function(jsonobj, prefix) {
  var newobj = {};
  function recurse(o, p) {
    for (var f in o)
    {
      var pre = (p === undefined ? '' : p + ".");
      if (o[f] && typeof o[f] === "object"){
        newobj = recurse(o[f], pre + f);
      } else {
        newobj[pre + f] = o[f];
      }
    }
    return newobj;
  }
  return recurse(jsonobj, prefix);
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-18T18:23:00.360

您可以使用 NPM[点对象](https://www.npmjs.com/package/dot-object)( [Github](https://github.com/rhalff/dot-object) ) 将对象转换为点符号，反之亦然。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T13:24:36.343

我写了另一个带有前缀功能的函数。我无法运行您的代码，但我得到了答案。谢谢

[https://github.com/vardars/dotize](https://github.com/vardars/dotize)

```
var dotize = dotize || {};

dotize.convert = function(jsonobj, prefix) {
    var newobj = {};

    function recurse(o, p, isArrayItem) {
        for (var f in o) {
            if (o[f] && typeof o[f] === "object") {
                if (Array.isArray(o[f]))
                    newobj = recurse(o[f], (p ? p + "." : "") + f, true); // array
                else {
                    if (isArrayItem)
                        newobj = recurse(o[f], (p ? p : "") + "[" + f + "]"); // array item object
                    else
                        newobj = recurse(o[f], (p ? p + "." : "") + f); // object
                }
            } else {
                if (isArrayItem)
                    newobj[p + "[" + f + "]"] = o[f]; // array item primitive
                else
                    newobj[p + "." + f] = o[f]; // primitive
            }
        }
        return newobj;
    }

    return recurse(jsonobj, prefix);
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-12T13:01:54.477

```
const sourceObj = { "status": "success", "auth": { "code": "23123213", "name": "qwerty asdfgh" } }
;

const { auth, ...newObj } = sourceObj;

const resultObj = {
  ...newObj,
  ..._.mapKeys(auth, (val, key) => `auth.${key}`)
}

// function approach
const dotizeField = (obj, key) => {
  const { ...newObj } = sourceObj;

  delete newObj[key];

  return {
    ...newObj,
    ..._.mapKeys(obj[key], (val, subKey) => `${key}.${subKey}`)
  }
}

const resultObj2 = dotizeField(sourceObj, 'auth');

console.log(sourceObj, resultObj, resultObj2);
```

```
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.20/lodash.min.js"></script>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-29T11:11:52.540

按照@pimvdb 所做的（他提交的一个紧凑而有效的解决方案），我添加了一些修改，让我拥有一个可以轻松导出的功能：

```
 function changeObjectToDotNotationFormat(inputObject, current, prefinalObject) {
      const result = prefinalObject ? prefinalObject : {}; // This allows us to use the most recent result object in the recursive call
      for (let key in inputObject) {
        let value = inputObject[key];
        let newKey = current ? `${current}.${key}` : key;
        if (value && typeof value === "object") {
          changeObjectToDotNotationFormat(value, newKey, result);
        } else {
          result[newKey] = value;
        }
      }
      return result;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-11T12:36:55.363

我认为这会更优雅......

```
const toDotNot = (input, parentKey) => Object.keys(input || {}).reduce((acc, key) => {
  const value = input[key];
  const outputKey = parentKey ? `${parentKey}.${key}` : `${key}`;

  // NOTE: remove `&& (!Array.isArray(value) || value.length)` to exclude empty arrays from the output
  if (value && typeof value === 'object' && (!Array.isArray(value) || value.length)) return ({ ...acc, ...toDotNot(value, outputKey) });

  return ({ ...acc, [outputKey]: value });
}, {});

const input = {a: {b: 'c', e: {f: ['g', null, {g: 'h'}]}}, d: []};
const output = toDotNot(input);

console.log(output); 
```

结果是：

```
// output:
{
    "a.b": "c",
    "a.e.f.0": "g",
    "a.e.f.1": null,
    "a.e.f.2.g": "h",
    "d": []
} 
```

# shared-memory - mmap() 处理常规文件和 mmap() 处理 POSIX 共享内存文件有什么区别？

> ID：13218748
> 
> 赞同：2
> 
> 时间：2012-11-04T13:02:39.207
> 
> 标签：shared-memory, mmap

我想使用 mmap() 在进程之间共享内存。mmap() 可以应用于常规文件或 POSIX 共享内存文件 (shm_open)。但是有什么区别呢？区别肯定不在于是否访问磁盘：

*   经常和最近访问的常规文件存在于文件系统缓存/缓冲区中，因此它们的内容已经在内存中。
*   即使将 mmap() 与 shm_open() 一起使用，当系统处于高内存压力下时，该内存区域也可能被换出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:17:45.983

一个区别是，尽管共享内存可能会写入磁盘，但它永远不会*永久*写入磁盘。如果您创建一个普通文件，那么它会在重新启动后持续存在。如果您创建共享内存对象，则不会。在这方面，它的行为非常像一个临时文件。

另一个区别是“[未指定名称是否出现在文件系统中，并且对于将路径名作为参数的其他函数可见](http://pubs.opengroup.org/onlinepubs/009604499/functions/shm_open.html)”。因此，尽管共享内存对象具有类似文件的路径，但它实际上不需要出现在文件系统中。

实际上，这两个区别都与文件系统的解耦有关。文件和共享内存对象都是可以读取和写入的字节包，但文件的不同之处在于它们保存在文件系统中。

# jquery - Grunt qunit fails but browser version works just fine

> ID：13218749
> 
> 赞同：0
> 
> 时间：2012-11-04T13:02:41.310
> 
> 标签：jquery, qunit, gruntjs

I'm using latest versions of grunt, qunit with the folowing test:

```
 module('jQuery#FilteringTool', {

    setup: function() {
      this.elems = $('#qunit-fixture').children();
      $(this.elems).FilteringTool();
    }
  });

  asyncTest('load remote content', function(){
    var $this = this;
    window.setTimeout( function(){
      ok( $('#qunit-fixture .carouselItem').length > 0, "items are in place" );
      start();
    }, 50 );

  }); 
```

The plugin `FilterinTool` works fine, running tests in the browser works fine but running tests whithin grunt will fail. I'm fairly new to TDD world, and i don't understand what the hell i'm doing wrong?

Tested code is this:

```
(function( $, document ){
  var FilteringTool = {
    init: function( el, o ){
      var $this = this;
      $this.el = $( el );
      $this.ajaxUrl = $(el).data('ajax-url');
      $this.loadItems();
    } // init

    ,loadItems: function(params){
      var $this = this;
      $.getJSON( $this.ajaxUrl, $.proxy( $this.populateFields, $this ) );
    }//loadItems

    ,populateFields: function( data ){
      var $this = this;
      $('.filtered-items', $this.el).append( data.html );
    }//populateFields
  };

  $.fn.FilteringTool = function() {
    return this.each(function(){
      var obj = Object.create( FilteringTool );
      obj.init( this );
    });
  };
})( jQuery, document ); 
```

and fixtures:

```
 <div id="qunit-fixture">
    <div class="carouselWrapper loading" data-ajax-url="../../../fixtures/wines-carousel.ajax.php">
      <div class="carousel">
        <div class="filtered-items"></div>
      </div><!-- /.carousel -->
    </div><!-- /.carouselWrapper -->
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-19T00:47:40.173

I'm having a similar issue running using jQuery. When I view my test page in the browser, I get no errors, jQuery loads fine and is used in tested code and tests.

When running through Grunt/PhantomJS, i get an error saying jQuery can't be found.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:30:30.610

问题是我试图从本地加载一个 php 文件。我笨 :) 修复了`data-ajax-url`.

# websphere - WebSphere wsadmin jython - 提示输入密码

> ID：13218757
> 
> 赞同：3
> 
> 时间：2012-11-04T13:03:48.257
> 
> 标签：websphere, jython, wsadmin

我正在寻找一种提示输入密码的方法（即没有输入回显）。我在 WebSphere 的 7.0.0.19 wsadmin 中使用 jython。

我一直在寻找它 - 使用 import getpass 或 import termios 似乎是可能的（但我得到“没有名为...的模块”异常）。

有什么办法提示输入密码吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:40:15.600

您可以使用以下代码。它基本上使用 Java 的 console() 如果存在（请注意，控制台[可能不会一直存在](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)），否则使用 raw_input() 和密码屏蔽逻辑。

```
# if console is not available (ex: when invoked from a shell script or another java process)
# we need to fall back to use raw_input, but we should mask the password if we use it
import sys, thread, time, threading
from java.lang import String
def getPass(stream=None):
    console = java.lang.System.console()
    if console is None:
        global p_stopMasking
        if not stream:
            stream = sys.stderr
        try:
            p_stopMasking = 0
            threading.Thread(target=_doMasking,args=(stream,)).start()
            password = raw_input()
            p_stopMasking = 1
        except Exception, e:
            p_stopMasking = 1
            print "Error Occured"
            print e
            exit()
    else:
        password = console.readPassword()
    return String.valueOf(password)

def _doMasking(stream):
    while not p_stopMasking:
        stream.write("\010*")
        #stream.write("\n")
        stream.flush()
        time.sleep(0.01)

def populateCredentials():
    global username
    global password
    print 'Enter username:'
    username = raw_input();
    print 'Enter password:'
    password = getPass(sys.stdout);

# start main
print 'start program...'
p_stopMasking= 1
username     = None
password     = None
populateCredentials()
print 'username is : ' + username
print 'password is  : ' + password 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T19:49:56.710

以下内容也对我有用：

```
raw_input("")
myPass = raw_input("Please enter a password: ") 
```

这并不完美，因为它不会掩盖密码，但它确实有效。出于某种原因，如果您没有指定第一个“raw_input”调用，则脚本不会阻塞第二个调用。

# javascript - Javascript 在 If 语句中错误地执行 MVC 代码

> ID：13218759
> 
> 赞同：7
> 
> 时间：2012-11-04T13:04:02.540
> 
> 标签：javascript, asp.net-mvc, internet-explorer-10

我对以下代码感到有些困惑。它在 Windows 7 上的 VS2010 中运行良好，现在我已经将硬件升级到 Windows 8 和 VS 2012，但它没有。

我的 MVC 应用程序中有以下 JavaScript 代码：

```
<script language="javascript" type="text/javascript">
var today;

if("@Model.Birthday.HasValue"){
    var today = new Date("@Model.Birthday.Value.Year", "@Model.Birthday.Value.Month" - 1, "@Model.Birthday.Value.Day");
}else{
    today = new Date();
} 
```

该模型是从具有如下属性的 ViewModel 中提取的：

```
 public System.DateTime? Birthday
    {
        get { return user.Birthday; }
        set { user.Birthday = value; }
    } 
```

在该行中抛出异常：

```
var today = new Date("@Model.Birthday.Value.Year", "@Model.Birthday.Value.Month" - 1, "@Model.Birthday.Value.Day"); 
```

它返回“Nullable object must have value”，如果它跳转到该行来执行它应该。但是，我的 if 语句返回错误。如果我删除该行并放入一个警报语句，它永远不会执行该行或显示警报，因为生日属性为空。JS 执行 MVC 代码的方式似乎发生了一些变化，它似乎评估了整个代码块，而不管 if 语句如何。我也尝试了以下方法，但无济于事：

*   在 Chrome for W8 中测试
*   在 try / catch 块中测试。有趣的是，它没有捕获异常（我猜 JS 不会捕获 .NET 异常）
*   通过明确声明 @Model.Birthday.HasValue == true 进行测试
*   通过将其更改为 @Model.Birthday.Value != null 进行测试
*   在调试模式下在发布模式下测试

这应该很简单 - 测试一个值是否为 null，如果不是，则从 .NET 属性创建一个 JS Date 对象，如果是，则创建一个新的 JS Date 对象，但由于某种原因，它想要评估并执行该行，即使 HasValue 为假。

真是难住了。有没有人见过这样的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T17:17:09.083

我可以看到这里发生的一些事情会影响您呈现正确数据的能力。

首先，MVC 变量在服务器端进行处理。您当前的实现总是尝试为`@Model.Birthday.Value`您的 Javascript 中的属性呈现一个值以生成 HTML。无论您当前示例中的属性是 true 还是 false，都会发生这种情况，因为它依赖客户端 Javascript 来执行条件而不是 Razor。以下是您问题的完整工作示例。

**查看模型**

```
namespace MvcApplication1.Models
{
    public class TestViewModel
    {
        public DateTime? NullDate { get; set; }

        public DateTime? DateWithValue { get; set; }
    }
} 
```

**控制器**

```
public ActionResult Index()
        {
            return View(new TestViewModel{DateWithValue = DateTime.Now, 
NullDate = null});
            } 
```

**看法**

```
@model MvcApplication1.Models.TestViewModel
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<script type="text/javascript">
    var today;
    var anotherDay;

    @{if(Model.NullDate.HasValue)
    {
        @: alert('Null date had a value!');
        @: today = new Date('@Model.NullDate.Value.Year', parseInt('@Model.DateWithValue.Value.Month') - 1, '@Model.NullDate.Value.Day');
    }else
      {
        @: alert('Null date did not have a value');
        @: today = new Date();
    }}

    @{if (Model.DateWithValue.HasValue)
      {
        @: alert('DateWithValue had a value!');
            @: anotherDay = new Date('@Model.DateWithValue.Value.Year', parseInt('@Model.DateWithValue.Value.Month') - 1, '@Model.DateWithValue.Value.Day');
          @: alert(anotherDay);
      }
      else
      {
          @: alert('DateWithValue date did not have a value');
        @: anotherDay = new Date();
    }}
</script> 
```

现在很明显，代码在 Javascript 部分中重复，以表明它适用于同一控制器操作中的 Null 和 Non-null 值。

正如您在视图中看到的，我们确保使用 Razor 语法检查模型，使用 Javascript 设置实际的客户端变量。另外，我想知道您的“- 1”是否正常工作。为了在本例中进行减法运算，我必须将该值从 Javascript 转换为 Int，但这是一个小细节。

作为参考，这是 VS2012 上的 MVC 4 项目，Windows 8 Professional 使用 Chrome 测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T17:33:45.680

简而言之解决方案：

我测试了您的代码，可以说，您的硬件/软件更新没有问题。我在 Win 7 上运行 VS 2010。解决方案可能是更改代码，例如以这种方式

```
<script language="javascript" type="text/javascript">

            @{ // C# server side part to get the dateParameters
                var dateParameters = string.Empty;
                if (Model.Birthday.HasValue)
                {
                    dateParameters = "" + @Model.Birthday.Value.Year
                                 + ", " + (@Model.Birthday.Value.Month - 1)
                                 + ", " + @Model.Birthday.Value.Day;
                }
            }
            // JS client side, later working with just created dateParameters 
            var today = new Date(@dateParameters);
            alert(today);
    </script> 
```

* * *

详细解释：

为了找到答案，让我们拆分上面的代码片段在做什么。它*只是*呈现 HTML 代码。让我们一步一步看

### 一、有值

**@Model.Birthday = 新日期(2012,11,4)**

1) Razor 正在发送到响应流字符串，直到第一个**@**运算符

```
<script language="javascript" type="text/javascript">
var today;

if(" 
```

2) 此处 Razor 将这部分 @Model.Birthday.HasValue 评估为布尔值并将其转换为字符串，因此代码的下一部分将是

```
True 
```

3) 附加下一个直接字符串

```
"){
    var today = new Date(" 
```

4) 评估@Model.Birthday.Value.Year 并注入其字符串值

```
2012 
```

5) 6) 7) ... 以此类推最终发送到 Response 的结果是：

```
<script language="javascript" type="text/javascript">
    var today;

    if ("True"){
        var today = new Date("2012", "11" - 1, "4");
    } else{
        today = new Date();
    }
</script> 
```

### 二、生日为 NULL

如果 @Model.Birthday = **null**第一步 1)、2) 和 3) 相同：

```
<script language="javascript" type="text/javascript">
    var today;

    if ("True"){
        var today = new Date(" 
```

4) **Exception *Nullable 对象必须有值***

最后，还有一个地方我们得到了 Nullable 异常。

**@Model.Birthday.Value.Year**

被称为 while

**@Model.Birthday == null**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T13:21:29.423

问题是您混淆了客户端代码和服务器端代码。javascript 在客户端运行，但只有在完成所有服务器端代码之后。

因此，@Model.Birthday.HasValue、@Model.Birthday.Value.Year 等都将在服务器端进行评估，然后再靠近浏览器。javascript 代码（因此在这种情况下是 if 语句）永远不会到达浏览器，因为异常发生在服务器端，试图在 null 对象上评估 Model.Birthday.Value.Year。

您需要移动条件服务器端，例如

```
@if(Model.Birthday.HasValue){
    @:today = new Date(@(Model.Birthday.Value.Year), @(Model.Birthday.Value.Month) - 1, @(Model.Birthday.Value.Day));
} else {
    @:today = new Date();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-21T06:33:08.687

**多行代码**

```
@if ( Model.SomeProp == true)
{
  <text>
    <Your java script Multi-line  code>
  </text>
} 
```

**单行代码**

```
@if ( Model.SomeProp == true)
{  
    @:<Your java script single-line code>  
} 
```

# objective-c - 为什么立即调用完成块？

> ID：13218761
> 
> 赞同：1
> 
> 时间：2012-11-04T13:04:48.130
> 
> 标签：objective-c, xcode4.5

```
-(void) movePinsToDestinations:(NSArray *)destination withCompletion: (void (^)())block
{
    ...
    [UIView animateWithDuration:animationTime animations:^{
        //[self.ReloadBut setTitle:@"Animating " forState:UIControlStateNormal];
        for (BGAddressAnnotation * anExistingAnnotation in existingAnnotations) {
            if (anExistingAnnotation.destination) {
                anExistingAnnotation.coordinate = anExistingAnnotation.destination.coordinate;
            }
            else
            {
                anExistingAnnotation.myView.alpha = 0;
            }
        }
    } completion:^(BOOL finished){
        NSAssert(finished, @"Not Finished?");
        for (BGAddressAnnotation * existingAnnotation in existingAnnotations) {
            if ([existingAnnotation.destination.myBiz isEqual: existingAnnotation.myBiz]) {
                existingAnnotation.arrayOfBusinesses = existingAnnotation.destination.arrayOfBusinesses;
                existingAnnotation.myView.alpha=1;
            }
            else
            {
                [self.theMapView removeAnnotation:existingAnnotation];
            }
        }
//        PO([[self class] PrintAllAnnotations: [self annotationExceptUser]]);
//        PO([[self class] PrintAllAnnotations: destination]);
        PO(@"Reach Completion Block");
        if (block)
        {
            block();
        }
        else
        {
            //[self.ReloadBut setTitle:@"Animating Finish" forState:UIControlStateNormal];
        }
    }];
} 
```

结果：

```
2012-11-04 20:00:05.800 @"Start Animating": Start Animating
2012-11-04 20:00:05.805 @"Reach Completion Block": Reach Completion Block 
```

我将动画设置为运行 10 秒，但在 5 毫秒内调用完成块。有什么可能做到这一点？

在某些背景下，该函数被调用了两次，并且完成块应该调用另一个动画。第二个动画确实在 10 秒内完成。指定完成块会立即调用它还是什么？

所以我正在有效地做

```
[self movePinsToDestinations:self.myCache.annotationsInterMediateState withCompletion:^{
    [self movePinsToDestinations:self.myCache.annotationsWeShouldbeDisplaying withCompletion:^{
    }];
}]; 
```

更新：

出于好奇，我多次嵌套动画。

```
[self movePinsToDestinations:self.myCache.annotationsInterMediateState withCompletion:^{
    [self movePinsToDestinations:self.myCache.annotationsWeShouldbeDisplaying withCompletion:^{
        [self movePinsToDestinations:emptyAnnotations withCompletion:^{
            [self movePinsToDestinations:startOff withCompletion:^{
                [self movePinsToDestinations:self.myCache.annotationsInterMediateState withCompletion:^{
                    [self movePinsToDestinations:self.myCache.annotationsWeShouldbeDisplaying withCompletion:^{

                    }];
                }];
            }];
        }];
    }];
}]; 
```

结果如下：

```
21:51.9 Start Animating: Start Animating
21:51.9 (animationTime): 10
21:51.9 Reach Completion Block: Reach Completion Block
21:51.9 Start Animating: Start Animating
21:51.9 (animationTime): 10
21:51.9 Reach Completion Block: Reach Completion Block
21:51.9 Start Animating: Start Animating
21:51.9 (animationTime): 10
22:01.9 Reach Completion Block: Reach Completion Block
22:01.9 Start Animating: Start Animating
22:01.9 (animationTime): 10
22:01.9 Reach Completion Block: Reach Completion Block
22:01.9 Start Animating: Start Animating
22:01.9 (animationTime): 10
22:01.9 Reach Completion Block: Reach Completion Block
22:01.9 Start Animating: Start Animating
22:01.9 (animationTime): 10
22:01.9 Reach Completion Block: Reach Completion Block 
```

因此，其中一个动画已正确完成，并且在开始动画后 10 秒调用了该块。

可能会立即调用该块，因为在 viewDidAddAnnotation 中正在调用另一个动画，但是不太可能是这种情况，因为可以同时调用许多不同的动画。

大多数动画仍然只运行几毫秒。有些跑了 3 秒。不应运行其他动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:43:01.433

> 可能会立即调用该块，因为在 viewDidAddAnnotation 中正在调用另一个动画

这几乎肯定是原因。您可以运行多个动画，但是如果作用于同一对象的两个动画重叠，则第一个动画会中断（默认跳到末尾，但您可以设置一个选项从原来的位置恢复）。注释掉您的第二个动画以确认。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T15:15:05.667

这实际上是一个特点。当没有动画时，动画立即结束。我想知道是否有一个选项可以改变它。

有时这是一件好事。问题是，虽然现有动画中没有任何动画，但添加的动画需要独立的动画。最终结果是添加的 pinview 的动画与现有 pinView 的动画不同步

例如 `self.ReloadBut.alpha = (float) random()/RAND_MAX;`，解决问题。

我想知道是否有更优雅的方式可以在 didAddAnnotationViews 上执行整个动画。或者，如果我知道添加了一些新引脚，我可以让隐藏视图四处移动。

能够在现有引脚的同时为新添加的引脚设置动画是一件好事。我会考虑一下。

# ios - 选择前预加载 tableview 数据

> ID：13218766
> 
> 赞同：1
> 
> 时间：2012-11-04T13:05:47.783
> 
> 标签：ios, uitabbarcontroller, tableview, preload

我有一个带有 5 个标签栏项目的标签栏应用程序。我的标签栏“项目 1”有一个从基于服务器的属性列表填充的表格视图。

现在，默认情况下，应用程序使用标签栏“项目 0”启动，但是当我为表格视图（“项目 1”）选择标签栏时，在从服务器检索数据时需要几秒钟来填充。

有没有一种方法可以在启动应用程序时为 tableview 预加载所需的数据，这样在选择标签栏 tableview（“项目 1”）时不会有延迟？

PS：我知道我可以在应用程序委托中将默认选项卡栏项目更改为“项目 1”，这确实解决了问题，因为在填充表格视图之前显示初始屏幕，但我真的希望选项卡栏“项目 0”作为默认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:14:51.760

您可以在应用程序委托的`didFinishLaunchingWithOptions:`方法中开始异步下载数据，然后在表格视图的数据源中使用结果。

# android - 使用 proguard 删除日志调用

> ID：13218772
> 
> 赞同：44
> 
> 时间：2012-11-04T13:06:59.810
> 
> 标签：android, proguard

我正在尝试使用 proguard 删除所有日志：我在 proguard-project.txt 中输入了以下行：

```
-assumenosideeffects class android.util.Log { *; } 
```

我的 project.properties 看起来像这样：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

尽管如此，日志继续显示在我的应用程序中。我在这里到底做错了什么？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-11T00:51:24.240

你不应该指定'*'通配符，因为它包括像'Object#wait()'这样的方法。更好地明确列出方法：

```
-assumenosideeffects class android.util.Log {
    public static boolean isLoggable(java.lang.String, int);
    public static int v(...);
    public static int i(...);
    public static int w(...);
    public static int d(...);
    public static int e(...);
} 
```

此选项仅在未禁用优化时才相关，例如在`proguard-android.txt`. 您必须指定`proguard-android-optimize.txt`：

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android-optimize.txt:proguard-project.txt 
```

或使用当代的[Android Gradle 插件](https://developer.android.com/studio/build/shrink-code.html)

```
buildTypes {
    releaseSomeBuildType {
        ...
        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'your-proguard-file.pro'
    }
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-09-30T05:48:36.540

已经很晚了，我遇到了同样的问题。我正在使用 Android Studio 1.3，这就是我所做的。

1.  在发布版本中添加要剥离的日志方法`proguard-android-optimize.txt`：

    ```
    -assumenosideeffects class android.util.Log {
        public static boolean isLoggable(java.lang.String, int);
        public static int d(...);
        public static int w(...);
        public static int v(...);
        public static int i(...);
    } 
    ```

2.  在您的 build.gradle (Module: app) 中，将 proguard-android-optimize.txt 设置为默认的 proguard 文件，而不是 proguard-android.txt：

    ```
    buildTypes {
        release {
            minifyEnabled true
            debuggable false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt')
        }
    } 
    ```

这是因为在`proguard-android.txt`优化中默认情况下使用标志关闭

```
-dontoptimize
-dontpreverify 
```

这对我有用，希望对其他人有帮助。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-04T13:10:58.143

你需要这样做：

```
-assumenosideeffects class android.util.Log {
public static int d(...);
public static int v(...);
public static int i(...);
public static int w(...);
public static int e(...);
public static int wtf(...);
    } 
```

并扩展您正在使用的所有日志方法。

# struts2 - 表单提交时动态数据重新加载到struts2 jquery网格

> ID：13218775
> 
> 赞同：1
> 
> 时间：2012-11-04T13:07:20.573
> 
> 标签：struts2, struts2-jquery, jqgrid

我有一个在页面加载时加载数据的网格。我还有一个在提交时正确调用操作的表单，但它不会在我的网格上加载新数据。

列表在我的网格模型中正确获取并正确设置来自我的 Action 类，但是在返回 SUCCESS 时，它只是以这种形式返回数据（见下面的输出）......

```
{"authFirstname":null,"authLastname":null,"bookDetailsobj":null,"bookTitile":null,"get":{"authFirstname":null,"authLastname":null,"bookTitile":null,"coverId":null,"createdDate":null,"createrId":null,"description":null,"editionId":null,"editionYear":null,"id":null,"img1":null,"img2":null,"isbn":null,"languageId":null,"locationId":null,"price":null,"publisherName":null,"quantity":null,"remarks":null,"subjectId":null,"updateId":null,"updatedDate":null,"videoUrl":null},"gridModel":[{"authFirstname":"234234","authLastname":"2323423","bookTitile":"23324234234","coverId":"soft cover","description":"243234","editionId":"General Edition","editionYear":"234234","id":42,"img1":"","img2":"","isbn":"324234","languageId":"English","locationId":"as","price":2.34234E7,"publisherName":"234234","quantity":234234,"remarks":"","subjectId":"General Fiction","videoUrl":""},{"authFirstname":"2423","authLastname":"23423","bookTitile":"asdfsdaf","coverId":"soft cover","description":"","editionId":"General Edition","editionYear":"2","id":39,"img1":"","img2":"","isbn":"2","languageId":"English","locationId":"as","price":234.0,"publisherName":"2","quantity":2,"remarks":"","subjectId":"General Fiction","videoUrl":""},{"authFirstname":"3","authLastname":"3","bookTitile":"232","coverId":"soft cover","description":"","editionId":"General"} 
```

我的jsp代码：

```
 <sjg:grid
                id="getLogs"
                dataType="json"
                href="%{getCurrentDateLogs}"
                gridModel="listOfLogs"
                onSelectRowTopics="rowselect"
                loadonce="true"
                reloadTopics="reloadGrid"
                formIds="form2"
            >
            <sjg:gridColumn name="userid" index="userid" title="User ID" sortable="true" align="center"/>
            <sjg:gridColumn name="username" index="username" title="Username" sortable="true"/>
            <sjg:gridColumn name="logaction" index="logaction" width="600" title="Action" sortable="true"/>
            <sjg:gridColumn name="date" index="date" title="Date" sortable="true" sorttype="date" align="center"/>
            <sjg:gridColumn name="time" index="time" title="Time" sortable="true" sorttype="time" align="center"/>
         </sjg:grid>

         <s:form action="getLogsByDates" id="form2"  theme="simple" cssClass="yform">
            <table class="">
                <tr><td>from:</td>
                    <td><sj:datepicker value="yesterday" id="from" name="startDate" displayFormat="dd/mm/yy" label="from" /></td>
                </tr>
                <tr><td>to:</td>
                    <td><sj:datepicker value="today" id="to" name="endDate" displayFormat="dd/mm/yy" label="to" /></td>
                </tr>
                <tr><td colspan="2">
                <sj:submit
                    value="Search"
                    button="true"
                        onClickTopics="reloadGrid"
                    indicator="indicator"
                    />
                </td></tr>
            </table>
         </s:form> 
```

struts.xml

```
 <action name="getLogsByDates" class="v.esoft.actions.bookdetails.BookdetailsAction" >
            <result name="success"  type="json"/>
            <result name="login" type="redirect"> /index.jsp </result>
   </action> 
```

** 我不知道为什么我的输出没有显示在我的 jquery 网格中。请帮我**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T17:27:13.177

我想这就是你需要的：

1.  不要使用 sj:submit 标记，而是使用带有指向 GridReloadTopics 的 onClickTopics 的 sj:a 标记。

2.  然后当单击 sj:a 时，网格会重新加载，将表单提交给网格的 href 属性中定义的动作。

3.  此操作必须生成将填充网格的 JSON。

您尚未在问题中显示操作“getCurrentDateLogs”。所以这是必须返回填充网格的 json 结果的操作。

此外，您必须考虑网格数据如何受到表单字段的影响，所以很容易

1.  网格将所有表单字段提交给 href 中提到的操作，因此您必须为该操作的每个表单字段设置一个 getter 和 setter。

2.  除了其他正常的网格属性，现在您将收到其他表单属性，这些属性基于您将填充 gridModel 的值。

如果您仍然不明白，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:02:46.773

我在提交表单后找到了两个网格，一个是旧的，第二个是我的搜索网格，它还包括整个页面

```
<sj:a  href="%{form}" targets="result" indicator="indicator" button="true" buttonIcon="ui-icon-refresh"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T14:10:55.363

这种方式行不通。尝试做以下事情：

1.  使一个动作返回一个页面，而不是 json

    ```
    <result name="success">page_with_the_grid.jsp</result> 
    ```

2.  在页面上`page_with_the_grid.jsp`，使用`s:url`标记来映射您的 json 结果：

    ```
    <s:url var="jsonUrl" action="jsonAction"/> 
    ```

3.  在您的`sj:grid`, 用于`href="%{jsonUrl}"`将您的数据填充到网格中。

如果您直接调用返回的操作`JSON`，您肯定会得到一个 json 结果，这是您的“奇怪”输出。

# c# - 我可以在运行时编辑资源文件吗

> ID：13218777
> 
> 赞同：5
> 
> 时间：2012-11-04T13:07:26.607
> 
> 标签：c#, asp.net, .net, wcf

我有一个 WCF 服务，它使用 JSON 响应。我需要创建一个可以在生产服务器上编辑的语言文件。如果我需要回收应用程序池，没问题。

我正要使用资源文件，但我担心最终用户无法编辑它。我不需要务实地编辑它，最终用户将通过在记事本中打开文件来编辑它，而无需重新编译应用程序。

你有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T13:16:46.053

是的，您可以使用[ResXResourceWriter](http://msdn.microsoft.com/en-us/library/system.resources.resxresourcewriter.aspx)类。

如果您还需要生成 Designer.cs 文件，请参阅此问题[Programmatically generate Designer.cs for resx file (ResXResourceWriter/ResXResourceReader)](https://stackoverflow.com/questions/3729255/programmatically-generate-designer-cs-for-resx-file-resxresourcewriter-resxreso)

如果您需要修改现有的 resx 文件，请参阅此问题[Modifying .resx file in c#](https://stackoverflow.com/questions/676312/modifying-resx-file-in-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T02:39:46.603

根据 MSDN，您可以在运行时添加新资源：

> 部署应用程序后，您可以逐步为新文化添加资源。由于后续开发特定文化资源可能需要大量时间，因此您可以先发布主应用程序，然后再交付特定文化资源。

[http://msdn.microsoft.com/en-us/library/sb6a8618%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/sb6a8618%28v=vs.110%29.aspx)

我认为编辑当前资源也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T13:24:59.537

您的用户应该能够毫无问题地编辑文件，资源文件是可以在记事本或任何文本编辑器中打开的 XML 文件，他们甚至可以在 Excel 中打开它并获得可以轻松编辑的多个列。

这将需要回收您的应用程序池，但您对此持开放态度。

[编辑] 如果您的资源文件被标记为内容，您不需要像我之前提到的那样重新编译，但是您的应用程序池将被回收以获取更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T12:21:39.230

我不确定，但似乎用户无法在运行时使用记事本编辑资源文件，并且应用程序应该重建以使更改生效。

使用用户范围设置文件可以完成这项工作。

# iphone - iOS - rootViewController 在哪里加载？

> ID：13218788
> 
> 赞同：0
> 
> 时间：2012-11-04T13:09:09.060
> 
> 标签：iphone, ios, ipad

我使用 Xcode 模板上的单一视图选项创建了一个空白项目。

加载此项目时，会加载 rootViewController 类，但我在应用程序的委托上没有看到任何加载 rootViewController 的行。

由于我通常不使用界面生成器并且我以编程方式创建我的控制器，所以我问：rootViewController 加载在哪里以及如何更改应用程序以加载另一个 viewController？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:12:37.233

它是从主界面构建器文件中加载的。查看您的项目设置，了解加载的界面构建器文件，然后检查它将加载的根控制器。

iOS 加载您的应用程序 -> 然后在该应用程序的设置中指定的 Interface Builder (NIB) 文件 -> 笔尖加载一堆视图/视图控制器等

我希望你找到它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:15:12.260

可能在您的 MainWindow.xib 中，您定义了要加载的第一个控制器，在您的情况下它是`rootViewController`.

`didFinishLaunchingWithOptions:`. 在启动应用程序时，这个方法总是被认为是第一个被调用的。尝试在这里检查。主 NIB 文件在 Info.plist 中设置（位于目标设置中），以便在调用应用程序委托时已经加载了一个 NIB。

# objective-c - UIAppearance 和 UINavigationBar 控制器

> ID：13218795
> 
> 赞同：1
> 
> 时间：2012-11-04T13:10:25.717
> 
> 标签：objective-c, ios, uinavigationcontroller, uiappearance

我的 UIBarButtonItems 和 UINavigationBar 有背景图像。我正在尝试使用 UIAppearance 来自定义所有这些：

```
 [[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navbar.png"] forBarMetrics:UIBarMetricsDefault];
    [[UIBarButtonItem appearance] setBackgroundImage:[UIImage imageNamed:@"navbar_btn.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

它工作得很好。唯一的问题是 UINavigationBar 上的默认后退按钮仍然使用标准的 iOS 背景颜色/图像。当我在 [UINavigationBar 外观] 上设置 TintColor 时，它会改变颜色，但这只需要一个 UIColor。

是否可以设置默认导航返回按钮图像（无需手动更改每个视图控制器）或将图像转换为 UIColor？

谢谢！

更新：答案如下

显然 UIBarButtonItem 具有用于后退按钮自定义的单独功能。我必须为基于 navbar_btn.png 的后退按钮创建另一个图像并使用以下方法设置它：

```
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T13:34:59.760

显然 UIBarButtonItem 具有用于后退按钮自定义的单独功能。我必须为基于 navbar_btn.png 的后退按钮创建另一个图像并使用以下方法设置它：

```
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

# c++ - 在基于瓷砖的游戏中将碰撞处理放在哪里？

> ID：13218798
> 
> 赞同：0
> 
> 时间：2012-11-04T13:10:39.620
> 
> 标签：c++

我目前正在开发一个 c++ 控制台游戏。该游戏由一个带有 2D 瓷砖阵列的棋盘类组成。

我还为玩家、箭头和物品提供了游戏棋子类。

我需要能够处理玩家/箭头/物品之间的每一次碰撞，我想知道两种可能的解决方案。

1）在每个图块上保存一个列表，该列表包含当前在该图块上的所有游戏块，并在图块上放置一个 enterTile(gamePiece piece) 并将逻辑放在那里。

2) 有一个外部“CollisionDetector”类，它将扫描所有瓷砖/碎片以进行碰撞并在那里处理它们。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:24:44.143

我会创建一个看起来像这样的函数：

```
void Object::OnCollision(Object collision_with); // "Object" is a generic type 
                                                 // of an object in the game 
```

该函数将处理碰撞。为了找到碰撞，每当一个对象进入一个瓦片（enterTile）时，您可以在该瓦片中搜索其中包含的对象，并调用它们的 OnCollision 函数。这当然意味着将板上的项目保留为各自磁贴中的一些列表。

所以我基本上建议你的第一个解决方案。

另请注意，如果您的电路板太大，则可能需要更多时间才能完成所有操作。因此，如果它相当大，请考虑您提出的第二个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:27:16.103

在我的 iOS 游戏中（不是基于图块的，但我认为可能存在一些重叠）我在游戏循环中有一个收集检测器类，用于检查演员是否即将发生碰撞。如果它们是每个actor，则在resolveCollisionWith(actor) 方法中传递另一个actor。这样，每个参与者都可以决定如何响应与另一个参与者的碰撞，并且 CollisionDetector 类不必知道各个参与者及其行为。

# python - Django、uWSGI、gevent 循环 - 如何开始工作 - 无法加载应用程序 0 (mountpoint='')

> ID：13218799
> 
> 赞同：1
> 
> 时间：2012-11-04T13:10:54.317
> 
> 标签：python, django, uwsgi

这是我使用 uWSGI 启动 django 的方法。

```
command = /usr/local/bin/uwsgi --loop gevent --socket 127.0.0.1:8070 --processes 2 --pp =/home/ubuntu/workspace/htFrontEnd/htdjango --wsgi-file =/home/ubuntu/workspace/htFrontEnd/htdjango/wsgi.py -b 32768 --master --async 20 --enable-threads --listen 2048 
```

这是我在日志中得到的错误......

wsgi.phy 的位置正确：/home/ubuntu/workspace/htFrontEnd/htdjango/wsgi.py

```
your memory page size is 4096 bytes
detected max file descriptor number: 1024
async fd table size: 1024
allocated 20800 bytes (20 KB) for 20 cores per worker.
lock engine: pthread robust mutexes
uwsgi socket 0 bound to TCP address 127.0.0.1:8070 fd 3
Python version: 2.7.3 (default, Aug  1 2012, 05:25:23)  [GCC 4.6.3]
Python main interpreter initialized at 0xab4ef0
python threads support enabled
your server socket listen backlog is limited to 2048 connections
*** Operational MODE: preforking+async ***
added =/home/ubuntu/workspace/htFrontEnd/htdjango to pythonpath.
failed to open python file =/home/ubuntu/workspace/htFrontEnd/htdjango/wsgi.py
unable to load app 0 (mountpoint='') (callable not found or import error)
*** no app loaded. going in full dynamic mode ***
*** uWSGI is running in multiple interpreter mode ***
spawned uWSGI master process (pid: 1935)
spawned uWSGI worker 1 (pid: 2037, cores: 20)
spawned uWSGI worker 2 (pid: 2038, cores: 20)
*** running gevent loop engine [addr:0x44f950] ***
timeout. skip request. 
```

这是我的 wsgi.py 文件。

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "htdjango.settings")
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:23:58.447

这是一个错字：

从 =/home/ubuntu/workspace/htFrontEnd/htdjango/wsgi.py 和 =/home/ubuntu/workspace/htFrontEnd/htdjango 中删除 =（等号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T14:27:15.577

我注意到这已经发生了——`added =/home/ubuntu/workspace/htFrontEnd/htdjango to pythonpath.`但可以肯定的是，你能否在文件中再添加一行`wsgi.py`——

```
`sys.path.append('/home/ubuntu/workspace/htFrontEnd/htdjango')` 
```

当您再次尝试运行它时，让我知道您的标准输出中是否有任何其他变化。

`application = get_wsgi_application()`当这个错误消息告诉我们 uwsgi 找不到我们的 django 应用程序时，肯定有问题。

您是否有机会使用 virtualenv？而你的 django 库本身就在 virtualenv 中？

# vhdl - 架构内定义的类型是否会在架构外被知晓？

> ID：13218800
> 
> 赞同：1
> 
> 时间：2012-11-04T13:10:57.213
> 
> 标签：vhdl

我有一个状态机，它使用一个本身就是状态机的组件。为了实现状态机，我使用了一种新类型：

```
type state_machine is
    (
    st_idle,
    st_cycle_1,
    ...
    st_cycle_17 
    ); 
```

这是在内部状态机的架构内部定义的。我是否还可以定义一个类型，该类型`state_machine`将在外部组件的体系结构中具有其他状态而不会发生冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:52:12.990

是的你可以。架构内的类型定义是本地定义，在该特定架构之外无法看到。
因此，可以在所有体系结构中一遍又一遍地使用相同的类型名称，例如 FSM 类型。这是否合理是另一个问题，一般无法回答。我个人更喜欢为 FSM 使用自我记录的名称，因为这对于查看您的代码的其他人（以及几周后的我自己）会很有帮助；对于小型 FSM 或者如果模块中只有一个 FSM（其本身有据可查），这不是什么大问题。

然而，架构中的类型定义可能与导入库的类型定义发生冲突。顺便提一下。

# django - Nginx + Django + Phpmyadmin 配置

> ID：13218802
> 
> 赞同：3
> 
> 时间：2012-11-04T13:11:01.840
> 
> 标签：django, nginx, phpmyadmin

我已将服务器迁移到 amazon ec2，并尝试在那里设置以下环境：

Nginx 在前端提供静态内容，传递给 django 获取动态内容。我也想在这个设置中使用 phpmyadmin。

我不是服务器管理员，所以我只是按照一些教程来让 nginx 和 django 启动并运行。但是我已经工作了两天，试图将 phpmyadmin 挂接到此设置，但无济于事。我现在正在发送我当前的服务器配置，如何在这里为 phpmyadmin 提供服务？

```
server {
    listen   80;
    server_name localhost;

    access_log /opt/django/logs/nginx/vc_access.log;
    error_log  /opt/django/logs/nginx/vc_error.log;

    # no security problem here, since / is always passed to upstream
    root /opt/django/;
    # serve directly - analogous for static/staticfiles
    location /media/ {
        # if asset versioning is used
        if ($query_string) {
            expires max;
        }
    }
    location /admin/media/ {
        # this changes depending on your python version
        root /path/to/test/lib/python2.7/site-packages/django/contrib;
    }
    location /static/ {
        # if asset versioning is used
        if ($query_string) {
            expires max;
        }
    }
    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://localhost:8000/;
    }
    # what to serve if upstream is not available or crashes
    error_page 500 502 503 504 /media/50x.html;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:06:36.647

这个问题应该属于[http://serverfault.com](http://serverfault.com)

尽管如此，您应该做的第一件事是为您的 phpmyadmin 配置一个单独的子域，以便于管理。

因此，将有两个应用程序使用 nginx 作为反向代理运行，一个 nginx`server`用于您的上述 django 应用程序，另一个`server`（也称为虚拟主机）用于您的 phpmyadmin，其配置类似于：-

```
server {
         server_name     phpmyadmin.<domain.tld>;
         access_log      /srv/http/<domain>/logs/phpmyadmin.access.log;
         error_log       /srv/http/<domain.tld>/logs/phpmyadmin.error.log;

         location / {
                 root    /srv/http/<domain.tld>/public_html/phpmyadmin;
                 index   index.html index.htm index.php;
         }

         location ~ \.php$ {
                 root            /srv/http/<domain.tld>/public_html/phpmyadmin;
                 fastcgi_pass    unix:/var/run/php-fpm/php-fpm.sock;
                 fastcgi_index   index.php;
                 fastcgi_param   SCRIPT_FILENAME  /srv/http/<domain.tld>/public_html/phpmyadmin/$fastcgi_script_name;
                 include         fastcgi_params;
         }
 } 
```

您的每个`server`配置都可以通过配置指向不同的域名`server_name`。在这个例子中，`server_name phpmyadmin.<domain.tld>;`

这是取自[http://wiki.nginx.org/ServerBlockExample的示例](http://wiki.nginx.org/ServerBlockExample)

```
http {
  index index.html;

  server {
    server_name www.domain1.com;
    access_log logs/domain1.access.log main;

    root /var/www/domain1.com/htdocs;
  }

  server {
    server_name www.domain2.com;
    access_log  logs/domain2.access.log main;

    root /var/www/domain2.com/htdocs;
  }
} 
```

如您所见，`server`大`http`括号内有两个声明。的每个声明都`server`应该包含您对 django 的配置和另一个用于 phpmyadmin 的配置。

2 个“虚拟主机”（“服务器”实例）由 nginx 处理。

# c++ - 创建多维数组的最佳方法是什么？

> ID：13218804
> 
> 赞同：1
> 
> 时间：2012-11-04T13:11:01.950
> 
> 标签：c++, arrays, stl, vector

我对 STL 容器有一个非常基本的疑问。我的要求是我想以多维数组的形式存储双精度值。我将直接对它们执行各种代数运算，即

```
myvector[4] = myvector[3] - 2 * myvector[2]; 
```

为此，我正在使用 for 循环和使用 [] 运算符进行迭代。我没有使用 STL 迭代器。[我在这里](http://www.cplusplus.com/forum/articles/7459/)找到了 2 种基本方法。我更喜欢速度而不是内存效率。由于我经常访问这些变量，我认为向量对我来说会很慢。那么你对这件事有什么拙见呢？我知道答案将基于您以前的经验，这就是我问这个问题的原因。如果这个问题太基本而无法在这里讨论，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T13:31:10.753

您提供的链接列出了 2 种创建“真实”二维数组的方法。一般来说，二维数组效率不高，因为它们需要大量分配。相反，您可以使用伪造的二维数组：

```
// Array of length L and width W
type* array1 = new type[L * W]; // raw pointers
std::vector<type> array2(L * W); // STL Vector

// Accessing a value. You have to use a convention for indices, and follow it.
// Here the convention is: lines are contiguous (index = x + y * W)
type value = array[x + y * W]; // raw pointer array & vector 
```

这是一个简单的基准测试（仅限 Windows，除非您更改计时器部分）：

```
#include <vector>
#include <ctime>
#include <iostream>
#include <stdlib.h>

#include <Windows.h>
typedef LARGE_INTEGER clock_int;

void start_timer(clock_int& v)
{
    QueryPerformanceCounter(&v);
}

void end_timer(clock_int v, const char* str)
{
    clock_int e;
    QueryPerformanceCounter(&e);
    clock_int freq;
    QueryPerformanceFrequency(&freq);
    std::cout << str << 1000.0 * ((double)(e.QuadPart-v.QuadPart) / freq.QuadPart) << " ms\n";
}

void test_2d_vector(unsigned int w, unsigned int h)
{
    std::vector<std::vector<double> > a;
    a.resize(h);
    for(unsigned int t = 0; t < h; t++)
        a[t].resize(w);

    clock_int clock;
    start_timer(clock);
    // Benchmark random write access
    for(unsigned int t = 0; t < w * h; t++)
        a[rand() % h][rand() % w] = 0.0f;
    end_timer(clock,"[2D] Random write (STL) : ");

    start_timer(clock);
    // Benchmark contiguous write access
    for(unsigned int y = 0; y < h; y++)
        for(unsigned int x = 0; x < w; x++)
            a[y][x] = 0.0f;
    end_timer(clock,"[2D] Contiguous write (STL) : ");
}

void test_2d_raw(unsigned int w, unsigned int h)
{
    double** a = new double*[h];
    for(unsigned int t = 0; t < h; t++)
        a[t] = new double[w];

    clock_int clock;
    start_timer(clock);
    // Benchmark random write access
    for(unsigned int t = 0; t < w * h; t++)
        a[rand() % h][rand() % w] = 0.0f;
    end_timer(clock,"[2D] Random write (RAW) : ");

    start_timer(clock);
    // Benchmark contiguous write access
    for(unsigned int y = 0; y < h; y++)
        for(unsigned int x = 0; x < w; x++)
            a[y][x] = 0.0f;
    end_timer(clock,"[2D] Contiguous write (RAW) : ");
}

void test_1d_raw(unsigned int w, unsigned int h)
{
    double* a = new double[h * w];

    clock_int clock;
    start_timer(clock);
    // Benchmark random write access
    for(unsigned int t = 0; t < w * h; t++)
        a[(rand() % h) * w + (rand() % w)] = 0.0f;
    end_timer(clock,"[1D] Random write (RAW) : ");

    start_timer(clock);
    // Benchmark contiguous write access
    for(unsigned int y = 0; y < h; y++)
        for(unsigned int x = 0; x < w; x++)
            a[x + y * w] = 0.0f;
    end_timer(clock,"[1D] Contiguous write (RAW) : ");
}

void test_1d_vector(unsigned int w, unsigned int h)
{
    std::vector<double> a(h * w);

    clock_int clock;
    start_timer(clock);
    // Benchmark random write access
    for(unsigned int t = 0; t < w * h; t++)
        a[(rand() % h) * w + (rand() % w)] = 0.0f;
    end_timer(clock,"[1D] Random write (STL) : ");

    start_timer(clock);
    // Benchmark contiguous write access
    for(unsigned int y = 0; y < h; y++)
        for(unsigned int x = 0; x < w; x++)
            a[x + y * w] = 0.0f;
    end_timer(clock,"[1D] Contiguous write (STL) : ");
}

int main()
{
    int w=1000,h=1000;
    test_2d_vector(w,h);
    test_2d_raw(w,h);
    test_1d_vector(w,h);
    test_1d_raw(w,h);
    system("pause");
    return 0;
} 
```

使用 msvc2010 编译，发布 /Ox /Ot，它为我输出（Win7 x64，Intel Core i7 2600K）：

```
[2D] Random write (STL) : 32.3436 ms
[2D] Contiguous write (STL) : 0.480035 ms
[2D] Random write (RAW) : 32.3477 ms
[2D] Contiguous write (RAW) : 0.688771 ms
[1D] Random write (STL) : 32.1296 ms
[1D] Contiguous write (STL) : 0.23534 ms
[1D] Random write (RAW) : 32.883 ms
[1D] Contiguous write (RAW) : 0.220138 ms 
```

可以看到 STL 等价于原始指针。但是一维比二维快得多。

# nginx - 重写 request_uri 失败

> ID：13218806
> 
> 赞同：-1
> 
> 时间：2012-11-04T13:11:07.723
> 
> 标签：nginx, php

我有 nginx + php-fpm，当我尝试访问“/rest/proccess”时，我想要 $_SEVER['REQUEST_URI'] == '/process'。所以我刚刚为 nginx 创建了这样的配置：

```
location /rest/ {
    root   /var/www/php;

    rewrite ^/rest/(.*)$ /$1 break;

    fastcgi_pass  unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root/index.php;
    include        fastcgi_params;
} 
```

但它不起作用，在 php 中我有 $_SEVER['REQUEST_URI'] == '/rest/process'。

我做错了什么？

谢谢

UPD：似乎重写规则只重写了 $document_uri，而不是 $request_uri，所以 $_SEVER['REQUEST_URI'] == '/rest/process' 和 $_SEVER['DOCUMENT_URI'] == '/process'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:37:53.887

我认为您需要将重写更改为：

```
rewrite ^/rest/(.+)$ $scheme://$host/$1; 
```

# c# - webtest 仅从数据源中获取第一项

> ID：13218807
> 
> 赞同：0
> 
> 时间：2012-11-04T13:11:09.533
> 
> 标签：c#, asp.net, web-services, testing, visual-studio-2012

我`webtest`在vs2012中创建

我希望它使用查询字符串调用 Web 服务。

我想从值池（又名数据源）中为查询字符串分配新值

我跟着这个教程

[http://perftesting.codeplex.com/wikipage?title=How%20To:%20Use%20Data%20Binding%20in%20Load%20Tests%20in%20Microsoft%20Visual%20Studio%20Team%20System](http://perftesting.codeplex.com/wikipage?title=How%20To:%20Use%20Data%20Binding%20in%20Load%20Tests%20in%20Microsoft%20Visual%20Studio%20Team%20System)

并创建了一个 csv 数据源并将其附加到`id`查询字符串参数。

但是，所有生成的请求仅使用数据源中的第一项。

（我创建了一个 for 循环）

![在此处输入图像描述](../Images/e4570b4919af6e92f1c902f4557fc2b3.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:53:53.683

右键单击`loop`项目选择：`advance data cursors`

# java - 阻止 Eclipse 在其他透视图中打开选项卡

> ID：13218808
> 
> 赞同：0
> 
> 时间：2012-11-04T13:11:29.530
> 
> 标签：java, eclipse

我最近创建了一个新的视角，“Java 历史”，专门用于浏览本地历史、还原更改等。

我的问题是，每当我为给定文件选择历史修订（即历史选项卡->双击修订）时，Eclipse 都会在我的主要 Java 开发透视图和我的 Java 历史透视图中为该修订打开一个选项卡，这会污染我的开发看法。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:32:33.640

这是无法更改的正常行为：修订版在**编辑器区域**中打开，其内容始终独立于透视图。

# java - 为什么这个java初始化会出错？

> ID：13218813
> 
> 赞同：0
> 
> 时间：2012-11-04T13:12:38.887
> 
> 标签：java

我试图在循环中初始化数组 C，但它给出了错误：
C 是类 ipdata 的数组，我已经声明了它并试图在循环中初始化它。

```
import java.io.*;
import java.util.*;
public class cluster_anlysis {
    class ipdata{

        float a,b;
        int cluster;

        ipdata()
        {
            a=0;
        }
    }
    public float modc(float a){
            if(a<0.0)
                a=-a;
            return a;
    }
    public static void main(String[] args) {
        cluster_anlysis obj=new cluster_anlysis();
    ipdata C[] = new ipdata[50];
    float mean1,mean2,mean3;
    int i,j,n1=0,n2=0,n3=0,flag=0;
    float ina=0.0f;
    float inb=0.0f;

    //BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    Scanner scan =new Scanner(System.in);
    System.out.println("pls enter no of data: ");
    Integer no = scan.nextInt();
    System.out.println("\nnow enter the x and y values");
    for(i=0;i<no;i++)
    {
        ina=scan.nextFloat();
        inb=scan.nextFloat();
        System.out.println(ina);
        C[i]= new ipdata();          // this line is giving error

        C[i].a=ina;
        C[i].b=inb;
        C[i].cluster=0;
    }

    }

} 
```

可能是什么问题呢 ？它说：无法访问 cluster_anlysis 类型的封闭实例。必须使用 cluster_anlysis 类型的封闭实例来限定分配（例如，xnew A()，其中 x 是 cluster_anlysis 的实例）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T13:16:33.783

您使用*外部类实例*从外部类的*静态方法创建**内部类*的实例。

 **```
c[i]= new cluster_anlysis().new ipdata(); 
```

因为您已经在 main 方法的第一行中创建了 cluster_anlysis 实例。

```
cluster_anlysis obj = new Cluster_anlysis(); 
```

你可以简单地做。

```
c[i]= obj.new ipdata(); 
```

阅读[Java中的内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

但是，如果您想从*外部类的非静态方法**创建内部类实例*，则不需要 Outer Class 的实例。

 *```
 public class OuterClass {
       public void method(){
           InnerClass inner = new InnerClass();
       }
       class InnerClass{
         }
    } 
```

并遵循@ARS 和@JB Nizet 在他们的解决方案中发布的类名约定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T13:20:31.113

看来您是从 Java 开始的。我建议暂时避免弄乱内部类。在自己的文件中定义每个 Java 类，一切都会变得更简单。

还可以了解 Java 命名约定：

*   类以大写字母开头，并且是 CamelCased: `ClusterAnalysis`, `IpData`。它们不应包含下划线。
*   变量以小写字母开头，并且是驼峰式：`c`。它们不应包含下划线。

[一旦您对基础知识更加熟悉，请在 Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)中了解内部类和静态内部类。但是内部类不应该被滥用。基本规则是每个文件有一个类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T13:20:10.303

我认为最好的办法是声明`ipdata`为**`static`**; 这将消除错误。在这种情况下，应该不需要为了实例化`cluster_analysis`而实例化，而且实际上应该是.`ipdata``ipdata``static`

* * *

哦，按照惯例，您可能要考虑使用名称`IpData`，`ClusterAnalysis`而不是 - 类名通常以大写字母开头并且是“CamelCased”，正如另一个答案也指出的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T13:25:27.557

使用外部类Instance调用内部类构造函数

像

```
c[i]=new cluster_analysis().new ipdata(); 
```***

# ruby-on-rails - Ruby on Rails 有很多关系表

> ID：13218814
> 
> 赞同：0
> 
> 时间：2012-11-04T13:12:45.080
> 
> 标签：ruby-on-rails, ruby, activerecord, relational-database

我有一个表**rb**有很多**接口**，然后每个接口都有很多**interface_graph_data**。现在我的 rb 接口 has_many 关系似乎工作正常，我唯一的问题是接口 interface_graph_data 关系。这是我的模型。

```
class Rb < ActiveRecord::Base
    validates_presence_of :name
    validates_presence_of :ip
    validates_uniqueness_of :ip
    validates_presence_of :username
    validates_presence_of :password

    has_many :interfaces
    has_many :interfacegraphdata, :through => :interfaces
end 
```

```
class Interface < ActiveRecord::Base
    has_many :interfacegraphdata
end 
```

```
class InterfaceGraphData < ActiveRecord::Base
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:35:00.837

关系的名称应该是`interface_graph_dates`

**upd**：你也错过了

```
class InterfaceGraphData < ActiveRecord::Base
  belongs_to :rb
  belongs_to :interface
end 
```

[http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)

# c - 定义指向结构的指针使我没有在此范围内声明错误

> ID：13218817
> 
> 赞同：0
> 
> 时间：2012-11-04T13:13:32.760
> 
> 标签：c

所以我定义了一个结构

```
struct PAIR{
    int a;
    int b;
    int dist;
}; 
```

然后在一个函数中我尝试定义 Pair * vec; 它给了我

```
optim.cpp:97:4: error: ‘Pair’ was not declared in this scope
optim.cpp:97:10: error: ‘vec’ was not declared in this scope 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T14:01:11.047

C 区分大小写，因此您应该使用 PAIR 而不是 Pair。

我不确定你使用的是哪个编译器，gcc 还是 g++？如果您使用 g++（因为您显示的文件是 optim.cpp），我认为您只需将 Pair 更正为 PAIR 即可解决您的问题。如果您使用 gcc，那么您应该将**结构**前缀添加到结构中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:15:00.433

c 区分大小写。PAIR 和 Pair 是不一样的。

此外，struct PAIR 不是自动 typedef。

您需要将变量/指针声明为

```
struct PAIR * instance; 
```

或者你需要先 typedef 它像

```
typedef struct PAIR
{
     // variables;
} Pair; // note the typedef name appears at the end. 
```

现在你可以这样做

```
Pair var; 
```

在 c++ 中，类型自动是 typedef，但在 c 中不是

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T13:15:06.353

尝试：

```
struct PAIR *ve; 
```

反而。

# android - 从另一个 apk 动态加载资源（布局）

> ID：13218819
> 
> 赞同：5
> 
> 时间：2012-11-04T13:13:52.020
> 
> 标签：android, layout, dynamic, resources

我设法拉出布局，并将其添加到我的取景器中，但是，它在那里加载为空白。

代码是，

```
Resources packageResources;
Context packageContext;
try
{   
    packageResources = pm.getResourcesForApplication(packageName);
    packageContext = this.createPackageContext(packageName,     Context.CONTEXT_INCLUDE_CODE + Context.CONTEXT_IGNORE_SECURITY);                
 }
 catch(NameNotFoundException excep)
 {
     // the package does not exist. move on to see if another exists.
 }

 Class layoutClass;
 try
 {
       // using reflection to get the layout class inside the R class of the package
       layoutClass = packageContext.getClassLoader().loadClass(packageName + ".R$layout");
 }
 catch (ClassNotFoundException excep1)
 {
     // Less chances that class won't be there.
 }

 for( Field layoutID : layoutClass.getFields() )
 {
    try
    {
        int id = layoutID.getInt(layoutClass);
        XmlResourceParser xmlResourceLayout = packageResources.getLayout(id);

        View v = new View(this, Xml.asAttributeSet(xmlResourceLayout));

        this.viewFlipper.addView(v);                 
    }
    catch (Exception excep)
   {
    continue;
   }
} 
```

我没有收到任何错误，我进行了调试和检查。布局 ID 正确。但是，在我看来Flipper 只是空白。我找不到任何警告或错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T17:56:57.230

终于明白了……其实很简单！！！！

这是我所做的...

1.  在目标 apk 中，只有资源和布局，没有应用程序或活动代码。我创建了一个类，

    ```
    public final class ViewExtractor
    {
        private static final int NUMBER_OF_LAYOUTS = 5;

        public static View[] getAllViews(Context context)
        {
            View[] result = new View[ViewExtractor.NUMBER_OF_LAYOUTS];

            result[0] = View.inflate(context, R.layout.layout_0, null);
            result[1] = View.inflate(context, R.layout.layout_1, null);
            result[2] = View.inflate(context, R.layout.layout_2, null);
            result[3] = View.inflate(context, R.layout.layout_3, null);
            result[4] = View.inflate(context, R.layout.layout_4, null);

            return result;
        }
     } 
    ```

然后在我当前的应用程序中，我修改了我之前的代码。一旦包被验证存在，修改就会发生。

```
 // If the package exists then get the resources within it.
        // Use the method in the class to get the views.
        Class<?> viewExtractor;
        try
        {
            viewExtractor = packageContext.getClassLoader().loadClass(packageName + ".ViewExtractor");
        }
        catch (ClassNotFoundException excep)
        {
            continue;
        }

        View[] resultViews;
        try
        {
            Method m = viewExtractor.getDeclaredMethod("getAllViews", Context.class);

            resultViews= (View[])m.invoke(null, new Object[]{packageContext});

            for( View v : resultViews)
            {
                this.viewFlipper.addView(v);
            }
        }
        catch (Exception excep)
        {
            excep.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T13:23:41.750

您不是在夸大布局。您正在创建一个空`View`并将其添加到您的`ViewFlipper`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-18T08:22:43.653

我目前正在这样做。它仅在知道应该提供布局层次结构的 .apk 中的活动或片段的包名称时才有效（我称之为外部上下文）。并且您需要知道要膨胀的布局的名称（例如 R.layout.mylayout -> "mylayout"）

```
Context c = createPackageContext(foreignPackageName,
    Context.CONTEXT_INCLUDE_CODE|Context.CONTEXT_IGNORE_SECURITY); //create foreign context
int resId = c.getResources.getIdentifier(mylayoutName,"layout",foreignPackageName); 
LayoutInflater myInflater = LayoutInflater.from(c); //Inflater for foreign context
View myLayout = myInflater.inflate(resId,null,false); //do not attach to a root view 
```

# c# - 程序启动后更新可移动驱动器列表

> ID：13218820
> 
> 赞同：2
> 
> 时间：2012-11-04T13:14:14.907
> 
> 标签：c#, filesystems, usb-drive

我正在用 C# 编写一个程序，我从这个站点得到了很多提示。但现在我面临一个我无法解决的问题。

我希望程序将文件从 Internet 下载到 USB 设备。必须在组合框中选择此 USB 设备。我用于此的代码是：

```
var drives = from drive in DriveInfo.GetDrives() //search removable drives
             where drive.DriveType == DriveType.Removable
             select drive;

dropdowndrive.DataSource = drives.ToList(); //add removable drives to combobox 
```

它有效，但仅当我在启动程序之前插入 USB 驱动器时。启动程序后如何显示已插入的可移动设备？

# php - 如何使用 PHP 在指定的 URL 上显示图像

> ID：13218821
> 
> 赞同：-2
> 
> 时间：2012-11-04T13:14:29.983
> 
> 标签：php, image, show

我想使用 php 在指定的 URL 显示不同的图像。因此，如果页面名称`www.website.com/?file=page_1`显示`image_1.png`在主页中。

我无法在 php 代码中找到如何执行此操作，或者不知道在哪里寻找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:26:19.487

看起来您正试图在您的网站上显示远程内容。**这样做的风险**很小，如果网站出现故障，您的网站也会受到影响。

```
$GLOBALS['images'] = array();

// Fetch the page content
$ch = curl_init("http://www.example.com/");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 0);
$pageContent = curl_exec($ch);
curl_close($ch);

function splitByRegex($match)
{
  $GLOBALS['images'] = $match[1];
}

// Strip the images from the content
preg_replace_callback(
    '/\<img.*src\=\"(.*\.(?:png)|(?:jpg)|(?:gif))\"\>/ig',
    'splitByRegex'
    $pageContent
);

echo '<pre>' . print_r($GLOBALS['images'], true) . '</pre>'; 
```

关于这一点，我认为您应该阅读以下内容：

*   [cURL](http://www.php.net/manual/en/curl.examples-basic.php)获取页面内容
*   用于解释内容的正则表达式：
    *   用于解释获取的内容的[PCRE函数](http://www.php.net/manual/en/ref.pcre.php)
    *   [正则表达式](http://www.regular-expressions.info/reference.html)告诉 PRCE 函数要查找什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:18:21.833

我假设您是 PHP 的初学者。您正在尝试做的是称为 HTTP GET 参数。你确定是`?file=page_1`不是`?file=image_1`？

要得到它，你需要这样做：

```
<img src="image_<?php echo (strpos("page_", $_GET["file"] === 0)) ? str_replace("page_", "", $_GET["file"]) : ""; ?>.png" alt="Image" /> 
```

如果这是您的错误，并且是`?file=image_1`，那么您可以简单地使用以下代码：

```
<img src="<?php echo (strpos("image_", $_GET["file"] === 0)) ? $_GET["file"] : ""; ?>.png" alt="Image" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T13:22:32.283

```
$images = array(1 => "image1.jpg", 2 => "image2.jpg");

if (isset($images[$_GET["page"]])){
    print $images[$_GET["page"]];
} 
```

# c - 如何用 C 编写 DLL 文件？

> ID：13218824
> 
> 赞同：24
> 
> 时间：2012-11-04T13:14:47.200
> 
> 标签：c, dll

如何在[C中编写](http://en.wikipedia.org/wiki/C_%28programming_language%29)[DLL 文件](http://en.wikipedia.org/wiki/Dynamic-link_library)？

我在网上看，但我总是得到*[C++](http://en.wikipedia.org/wiki/C++)*的教程，而不是 C。我想用 C 编写我的第一个 DLL 文件。我该怎么做？一个简短的例子是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-04T14:56:54.357

# python - Django QuerySet 最佳实践

> ID：13218826
> 
> 赞同：1
> 
> 时间：2012-11-04T13:14:54.840
> 
> 标签：python, django, django-models

有没有更好的方法来做到这一点

```
us = User.objects.filter(id=someid)
if us.exists():
   u = us[0] 
```

正如我在 sql 日志中看到的，us.exists() 将执行一个 sql 查询，然后 u = us[0] 将执行另一个查询。所以我们必须做 2 次查询才能完成任务。我只是想寻求一种更好的方法来做到这一点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T13:26:03.860

假设`id`是唯一的，您可能应该请求宽恕，而不是许可：

```
try:
    u = User.objects.get(id=someid)
except User.DoesNotExist:
    # do whatever you should do if user does not exist 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T13:59:26.670

`.get()`不使用 django 查询集缓存。因此，如果您真的想使用和重用查询集，更好的方法是捕获`IndexError`：

```
us = User.objects.filter(id=someid)
try:
   u = us[0]
except IndexError:
    #item does not exist. 
```

# algorithm - 决定在斐波那契编码游戏中，第一步玩家是否获胜。有算法吗？

> ID：13218827
> 
> 赞同：0
> 
> 时间：2012-11-04T13:14:56.653
> 
> 标签：algorithm, fibonacci

有一个这样定义的斐波那契代码：

```
C(0) = 0
C(1) = 1
C(2) = 01
C(3) = 101
C(4) = 01101
C(5) = 10101101
.
.
. 
```

有一个使用这种编码系统的游戏，还有一个棋盘（例如 1101101）。在这个游戏中，玩家轮流（从右到左）将斐波内奇的代码移出棋盘。玩家输了，如果他不能再移除任何东西（棋盘变空，现在轮到玩家了）。

有没有办法制定一个算法，决定一个玩家（即做第一步）是否总是（总是意味着独立于另一个玩家的移动网络）获胜。

示例：

**板**：1101101

**Player1** - 1st move (01) // 可能的移动 (01, 1, 101, 01101)

**董事会**：11011

**Player2** - 2nd move (1) // 可能的移动 (1)

**董事会**：1101

**Player1** - 3rd move (01) // 可能的移动 (1, 01, 101)

**董事会**：11

**Player2** - 第 4 步 (1) // 可能的移动 (1)

**板**：1

**Player1** - 第 5 步 (1) // 可能的移动 (1)

**董事会**：

**Player2** - 第 6 步 (-) // 可能的移动（无）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:17:46.847

看看你的系列的长度，我会说只是蛮力......

编写和跟踪所有动作不应该太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T15:53:38.837

设`n`为初始棋盘的长度，设 为初始棋盘`board[i]`中的`i`第-个符号（从左侧开始，从 1 开始的索引），以及`board[i..j]`初始棋盘在索引`i`和`j`包含值之间的段。

`i`如果轮到的玩家`board[1..i]`可以强制获胜，我们称其为获胜长度，如果每个可能的移动都`board[1..i]`为其他玩家留下获胜长度，则称为失败长度。

0 是失败的长度（根本不可能移动），1 是获胜的长度（删除唯一剩余的符号立即获胜）。

每个长度要么是赢要么是输：如果任何可能的移动为其他玩家留下了一个失败的长度，我们可以通过选择该移动来强制获胜，否则根据定义它是一个失败的长度。

我们可以找出我们是否可以强制获胜，如果是这种情况，我们可以通过记录每个长度是否失败（标记为`-1`）或获胜策略将是什么（一个非负整数`k`，例如从剩余棋盘的末端移除`C[k]`会为对手留下损失的长度；这`k`通常不是唯一的，任何都可以）。

伪代码（C-ish）：

```
int moves[n+1];
// initialise all lengths to losing
for(i = 0; i <= n; ++i) {
    moves[i] = -1;
}
moves[1] = board[i]; // win by removing the last symbol
for(i = 2; i <= n; ++i) {
    if (board[i] == 0) {
        // no choice, the only code ending with a 0 is C[0]
        moves[i] = moves[i-1] < 0 ? 0 : -1;
    } else {
        k = 1;
        while(C[k] is_suffix_of board[1..i]) {
            if (moves[i - fib(k)] < 0) {
                // found a winning move
                moves[i] = k;
                break;
             }
             ++k;
        }
        // we either found a winning move and noted it, or leave the position as losing
    }
} 
```

`moves[n]`告诉我们第一个玩家是否可以强制获胜，如果可以，如何。

与纯蛮力相比的优势在于它节省了大量的重新计算，因为除了前几个状态之外的所有状态都可以通过多种方式到达。

检查是最昂贵的操作，通过注意它是and的连接顺序`C[k] is_suffix_of board[1..i]`可以有所改进，所以当你知道它是 的后缀时，你只需要检查是否是 的后缀。`C[k+1]``C[k-1]``C[k]``C[k]``board[1..i]``C[k-1]``board[1..(i-fib(k))]`

# mercurial - Mercurial - 谁制作了这个克隆？

> ID：13218831
> 
> 赞同：0
> 
> 时间：2012-11-04T13:15:11.657
> 
> 标签：mercurial

是否有可能知道创建新存储库（克隆）的用户是谁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T14:53:56.817

从来没听说过。克隆是只读操作，没有对 repo 的写入访问权限，克隆版本上也不会发生写入。可能有 Mercurial 之外的方法，例如文件权限设置或 bash 历史记录。

# php - 混合POST和GET时表单操作中的查询字符串？

> ID：13218839
> 
> 赞同：2
> 
> 时间：2012-11-04T13:16:09.573
> 
> 标签：php, post, get, action

所以我有一个个人资料页面：`profile.php?pin=xx`，我使用 GET 方法来确定要显示的个人资料。我将测试是否`$_SESSION['pin'] == $_GET['pin']`，如果是，请提供编辑配置文件的选项。

我不想编写一个完整的脚本并将用户引导到另一个页面。所以为了可用性，并保持服务器整洁，所以我并不总是猜测哪个脚本做什么，我想混合使用 POST 和 GET。我做了一些研究，这似乎是合法的，但是如何？

```
<form method="post" action="profile.php?pin=xx">
<form method="post" action="<? echo $_SERVER['PHP_SELF']; ?>"> 
```

这就是我能想到的所有东西，而不会真正让代码变得混乱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T13:22:43.920

如果您将操作属性保留为空，它将是相同的 URI，包括 GET 参数（URI 的查询信息部分）：

```
<form method="post" action=""> 
```

也许这就是你要找的东西？有关标签和属性的参考，请参阅[HTML`<form>`标签](https://developer.mozilla.org/en-US/docs/HTML/Element/form)。

如果您想了解它是如何工作的：这是一个所谓的*相对 URI*。它解析为文档的*基本 URI*。由于*相对 URI*为空，因此将完全接管*基本 URI 。*

# php - 代码点火器图像更新

> ID：13218842
> 
> 赞同：2
> 
> 时间：2012-11-04T13:16:25.753
> 
> 标签：php, codeigniter

我遇到了图片上传器的问题。我已经创建了工作正常的图像上传器，但我还需要编辑它们。当我添加需要的图像时，数据库列会正确更新，但如果我不更改图像并保持原样，我会收到错误*“列'图像'不能为空”*

这是更新部分的代码：

```
else if ($type == 'update')
{

    if($this->input->post('image')) {
        $fdata = $this->savenew();
        $data['image'] = $fdata['upload_data']['file_name'];

    } else {
         $data['image'] = $this->input->post('current_image');

    }

    $return = $this->add_radio_model->update($id, $data);
} 
```

对不起，如果我不是很明确

编辑：

```
 private function savenew(){                

     $config['upload_path'] = './assets/'; //Make SURE that you chmod this directory to 777!
     $config['allowed_types'] = 'gif|jpg|png';
     $config['max_size']    = '0'; // 0 = no limit on file size (this also depends on your PHP configuration)
     $config['remove_spaces']=TRUE; //Remove spaces from the file name

     $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload('image'))
    {
            $data['error']= array('error' => $this->upload->display_errors());
            log_message('error',$data['error']);
            }
            else
                {
                $data = array('upload_data' => $this->upload->data());

                }
        return $data;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T14:29:13.363

根据我们的评论线程，您需要在这里更改您的代码

```
else if ($type == 'update')
{
    if($this->input->post('image')) {
        $fdata = $this->savenew();
        // first always set current image  
        $data['image'] = $this->input->post('current_image');
        // second check if new image added if yes, then update otherwise keep original image as it is
        if(isset($fdata['upload_data'])){
           $data['image'] = $fdata['upload_data']['file_name'];
        }
    }
    $return = $this->add_radio_model->update($id, $data);
} 
```

对于第二个问题：`A PHP Error was encountered Severity: Notice Message: Array to string conversion Filename: libraries/Log.php Line Number: 99`

改变：

```
$data['error']= array('error' => $this->upload->display_errors());
log_message('error',$data['error']); 
```

到

```
log_message('error',(string) $this->upload->display_errors()); 
```

# c# - 添加参数后的SQL语句

> ID：13218843
> 
> 赞同：3
> 
> 时间：2012-11-04T13:16:28.397
> 
> 标签：c#, sql, parameters

参数替换后是否可以看到sql语句？

```
using(SqlCommand cmdInsert = new SqlCommand("INSERT INTO Table(Value_fkey) VALUES(@ValueKey)", Database.Connection))
{
    cmdInsert.Parameters.AddWithValue("@ValueKey", ValueKey);
    System.Convert.ToInt32(cmdInsert.ExecuteScalar());
} 
```

我希望它记录我的 sql 语句，而不是通过 SQL Server，但我不介意它是在调用语句之前还是之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:54:02.267

这似乎是最简单的方法：

```
public void OutputSQLToTextFile(SqlCommand sqlCommand)
{
        string query = sqlCommand.CommandText;
        foreach (SqlParameter p in sqlCommand.Parameters)
        {
            query = query.Replace(p.ParameterName, p.Value.ToString());
        }
        OutputToTextFile(query);
    } 
```

# windows-8 - Visual Studio Express 在构建时崩溃 (F5)

> ID：13218846
> 
> 赞同：1
> 
> 时间：2012-11-04T13:17:11.953
> 
> 标签：windows-8, visual-studio-2012

从字面上看，在这里完成初学者问题。

我对开发 Windows 8 应用程序很感兴趣，所以我刚刚下载了开发工具并按照此处的入门指南安装了它们：[第 1 部分 - 创建一个“Hello, world”应用程序](http://msdn.microsoft.com/en-us/library/windows/apps/hh986964.aspx)。

我完全按照说明操作，但是当我尝试运行应用程序时，第 2 步不起作用。我按 F5，然后在输出模块中说部署成功，但应用程序没有按照教程中的说明运行。我离开了 10 分钟，但整个 Visual Studio 程序没有响应，所以我在任务管理器中结束了任务。

该应用程序确实已添加到 Windows 8 开始屏幕，我可以从那里运行它。

然后我再次打开程序并再次尝试 F5，这次输出模块再次指示“部署开始..”但随后程序再次崩溃。

我错过了什么或做错了什么？我真的没有改变任何一行代码。

取消构建也不起作用。

感谢您的任何帮助！

更新：如果令人困惑，我在标题中使用“构建”，因为这是教程中的术语，我注意到菜单下的 F5 实际上标题为“调试”，而“构建”是 F7，我不确定如果教程有错误，无论哪种方式都不会影响我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:03:16.737

一个简单的重新启动设法解决了这个问题，但我仍然不知道是什么原因造成的！

# google-apps-script - 如何将 Google Apps 脚本添加到使用 API 创建的电子表格中？

> ID：13218847
> 
> 赞同：7
> 
> 时间：2012-11-04T13:17:17.683
> 
> 标签：google-apps-script, google-sheets, google-docs-api, google-sheets-api

在阅读了很多关于 Google 电子表格 API 的内容后，我得出的结论是格式化（例如合并单元格、更改字体等）**只能**通过 Apps 脚本使用。

由于我们需要在后端使用 Java 以编程方式创建和填充电子表格，我想我也需要这样做；

*   将新工作表链接到触发加载 *或*
*   创建一个为我创建电子表格的 Apps 脚本。

有谁知道？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T13:59:31.183

如果您只想“创建”电子表格，则无需在打开电子表格时加载脚本。开发一个运行一次并为您创建电子表格的脚本可能更容易。

另一个提示是拥有一个模板文件，您可以复制该模板文件，其中大部分格式（如果不是全部）已经存在。可能只是与新电子表格将拥有的真实数据相关的小事情。

**编辑**以回答标题中的问题。

不，您不能以编程方式将脚本添加到现有电子表格，只能手动添加。您可以做的是预先设置一个包含脚本的模板电子表格，然后通过复制此模板来创建新的电子表格。

（回答评论）

您可以以编程方式*运行*脚本，但**不能上传**。要运行脚本，您可以将其部署为 web 应用程序并使用 http get 或 post 调用其 url（将调用它的`doGet`or`doPost`函数，您必须已声明）。此外，您可以将此脚本设置为在任何电子表格表单的表单提交上运行，并且只需向该表单提交一组答案。最后（我现在能想到的）你可以将脚本作为库添加到另一个 Apps 脚本中并直接调用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-10T21:07:31.487

**（2016 年 8 月）**除了手动之外，无法以编程方式链接 Google 表格和 Apps 脚本代码。根据您似乎想要的内容（“使用 Java 以编程方式创建和填充电子表格”），您现在可以在**没有**Apps 脚本的情况下执行此操作。

TL;DR：以上，@ [Henrique](https://stackoverflow.com/users/222901/henrique-abreu)已经回答了多个问题，甚至是没有被问到的问题！好消息是，今天，我们有更多的答案代表您正在寻找的替代可能解决方案。

1.  现在可以使用[导入/导出系统](https://developers.google.com/apps-script/import-export)以编程方式“上传”应用程序脚本代码，例如使用 Eclipse，因为您是 Java 开发人员（[2013 年公告](https://developers.googleblog.com/2013/10/total-eclipse-of-apps-script.html)）。
2.  我同意 Henrique 的建议，即如果您创建电子表格模板，即 Excel 文件，您可以使用[Google Drive API](http://developers.google.com/drive/web)以编程方式导入/创建具有所有所需格式的相同 Google 表格。
3.  “格式化（例如合并单元格、更改字体等）”现在可以在 Apps 脚本之外完成，因为有一个 [“新的”Google Sheets API v4](http://googleappsdeveloper.blogspot.com/2016/05/apps-dev-sheets-api.html)（不是[GData](http://developers.google.com/gdata/docs/directory)）。

为了使用新的 API，您需要获取[适用于 Java 的 Google APIs 客户端库](http://developers.google.com/api-client-library/java)并使用最新的[Sheets API](http://developers.google.com/sheets)，它比任何以前的 API 都更加强大和灵活。这是一个帮助您入门的[代码示例。](http://developers.google.com/sheets/quickstart/java)如果您对 Python 没有“过敏”，我还制作[了一个视频](http://googleappsdeveloper.blogspot.com/2016/06/introducing-google-sheets-api-v4.html)，其中包含一个*不同*的、稍长的示例来介绍新的 API，并通过您可以从中学习[的博](http://wescpy.blogspot.com/2016/06/using-new-google-sheets-api.html)文深入了解*其*代码。

请注意，v4 API 允许您创建电子表格和工作表、上传和下载数据，以及在一般意义上以编程方式访问工作表，就像您使用用户界面一样（创建冻结行、执行单元格格式化、调整行大小/列、添加数据透视表、创建图表等），但要执行文件级访问，例如上传和下载、导入和导出（与上传和下载相同，但转换为/从 Google Apps 格式），您将使用 Drive取而代之的是 API。

# sql - SQL : 更新 ID；根据日期

> ID：13218851
> 
> 赞同：0
> 
> 时间：2012-11-04T13:18:00.877
> 
> 标签：sql, sql-server

我有下面的表格。

![在此处输入图像描述](../Images/e1cf6433ac34798091070ce0cfb9f812.png)

我喜欢按日期*更新* `ID`，然后按用户更新。

### 例如

![在此处输入图像描述](../Images/04b9533a7651e12ccca6de789bafe3a1.png)

### 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:31:32.947

您可以使用`Common Table Expression`它，并从原始表中加入它，例如：

```
WITH newID
AS
(
  SELECT [User], [DATE],
          ROW_NUMBER() OVER (PARTITION BY bb.[User]
                            ORDER BY DATE ASC) RN
  FROM table1 bb
)
UPDATE a
  SET a.ID = b.RN
FROM table1 a INNER JOIN
      newID b ON a.[User] = b.[User] AND
              a.[Date] = b.[Date] 
```

*   [***SQL Fiddle Demo（记录略有不同）***](http://sqlfiddle.com/#!3/7fab3/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:39:16.093

[SQL小提琴](http://sqlfiddle.com/#!3/e9af3/1)

**MS SQL Server 2008 架构设置**：

```
create table YourTable
(
  MYUser char(3),
  Date date,
  ID int
)

insert into YourTable(MYUser, Date) values
('U55', '2012-10-05'),
('U55', '2012-10-10'),
('U22', '2012-10-06'),
('U55', '2012-10-01'),
('U55', '2012-10-07'),
('U22', '2012-10-04'),
('U55', '2012-10-09'),
('U22', '2012-10-02'),
('U22', '2012-10-03'),
('U55', '2012-10-08') 
```

**查询 1**：

```
update T 
set ID = rn
from
  (
    select ID,
           row_number() over(partition by MYUser order by Date) as rn
    from YourTable
  ) as T

select *
from YourTable 
```

**[结果](http://sqlfiddle.com/#!3/e9af3/1/0)**：

```
| MYUSER |       DATE | ID |
----------------------------
|    U55 | 2012-10-05 |  2 |
|    U55 | 2012-10-10 |  6 |
|    U22 | 2012-10-06 |  4 |
|    U55 | 2012-10-01 |  1 |
|    U55 | 2012-10-07 |  3 |
|    U22 | 2012-10-04 |  3 |
|    U55 | 2012-10-09 |  5 |
|    U22 | 2012-10-02 |  1 |
|    U22 | 2012-10-03 |  2 |
|    U55 | 2012-10-08 |  4 | 
```

# html - input type="file": 提供打开本地文件或服务器文件的选项

> ID：13218856
> 
> 赞同：2
> 
> 时间：2012-11-04T13:18:35.253
> 
> 标签：html, file, input

我有一个网站要求用户从他的 PC 打开一个输入文件。这个输入文件包含很多信息。打开输入文件后，用户可以点击按钮，网站会在输入文件中搜索显示相应的信息。

创建输入文件有点复杂。因此，我想提供使用服务器上的示例文件测试网站的可能性。因此用户可以在创建自己的输入文件之前测试网站。

我在服务器上有一个示例输入文件。

**如何让用户选择打开本地输入文件以及来自服务器的示例文件？**

我现在使用（仅限本地文件）：

```
Select your file:<input type="file" id="fileinput" /> 
```

**评论**

如果用户可以通过像这样的按钮打开示例文件，我也可以`<Open example file>.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:39:09.890

当你说使用输入类型=“文件”时，没有这种方式在服务器端读取文件，如果你正在编写B/S应用程序，任何文件读取过程都需要在服务器端完成。

如果您希望用户有一些选择来读取服务器文件（在您的服务器端），只需添加一个下拉/复选框列表/单选按钮列表，让每个选择都反映到服务器端的一个特定文件，然后阅读它在服务器端取决于选择哪一个。

输入 type="file" 也只是将整个文件发布到服务器端的发布操作，您可以将其存储在服务器端临时文件夹中并解析它或直接从内存中读取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:34:38.093

您可以使用单选按钮：

```
<fieldset>
    <legend> input file <legend>
    <div>
        <label> <input type="radio" name="input_source" value="server"> Defaults </label>
    </div>
    <div>
        <label> <input type="radio" name="input_source" value="upload"> From file </label>
    </div>
    <div>
        <label> <input type="file" name="input_file"> Upload an input file </label>
    </div>
</fieldset> 
```

* * *

或者，如果没有上传文件，只需使用服务器上的文件。

```
<label> <input type="file" name="input_file"> Upload an input file (leave blank for defaults) </label> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T13:36:10.393

`<input type="file">`仅用于上传文件。你不能用它浏览服务器文件。

您可以使用几个可用的 Web 文件浏览器脚本之一，或者编写您自己的脚本来创建该功能，但这不是 HTML 中原生可用的东西。

[我可以通过 asp.net MVC 2.0 中的简单 <input type="file"> 控件浏览存储在远程服务器上的文件吗](https://stackoverflow.com/q/7804507/1796939)- 这个问题的答案中提供了一些示例，这与您的非常接近。

# javascript - Lightbox 2.51 - 如何将关闭按钮和图像编号移到顶部？

> ID：13218860
> 
> 赞同：3
> 
> 时间：2012-11-04T13:18:49.677
> 
> 标签：javascript, jquery, lightbox2

我正在使用 Lightbox 2.51，但找不到将带有关闭按钮和当前图像编号等的 lb-dataContainer 移动到顶部的解决方案

![在此处输入图像描述](../Images/82a5b67961afa8e082201b6aa77d12c2.png)

我只找到旧版本的解决方案。

代码可以在这里找到：http: [//lokeshdhakar.com/projects/lightbox2/releases/lightbox2.51.zip](http://lokeshdhakar.com/projects/lightbox2/releases/lightbox2.51.zip)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T14:05:59.763

解决方案是用数据容器更改外部容器：

```
Lightbox.prototype.build = function() {
  var $lightbox,
    _this = this;

  $("<div>", {id: 'lightboxOverlay'}).after
    (
          $('<div/>', {id: 'lightbox'}
          ).append(

          $('<div/>', {
            "class": 'lb-dataContainer'
          }).append($('<div/>', {
            "class": 'lb-data'
          }).append($('<div/>', {
            "class": 'lb-details'
          }).append($('<span/>', {
            "class": 'lb-caption'
          }), $('<span/>', {
            "class": 'lb-number'
          })), $('<div/>', {
            "class": 'lb-closeContainer'
          }).append($('<a/>', {
            "class": 'lb-close'
          }).append($('<img/>', {
            src: this.options.fileCloseImage
        })))
 )),

          $('<div/>', {"class": 'lb-outerContainer'}).append
          ( $('<div/>', {
                "class": 'lb-container'
              }).append($('<img/>', {
                "class": 'lb-image'
              }), $('<div/>', {
                "class": 'lb-nav'
              }).append($('<a/>', {
                "class": 'lb-prev'
              }), $('<a/>', {
                "class": 'lb-next'
              })), $('<div/>', {
                "class": 'lb-loader'
              }).append($('<a/>', {
                "class": 'lb-cancel'
              }).append($('<img/>', {
                src: this.options.fileLoadingImage
              }))))
          )

)
    ).appendTo($('body'));
  $('#lightboxOverlay').hide().on('click', function(e) {
    _this.end();
    return false;
  }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-11-15T21:55:49.643

这是几年后的事了，但如果你想要迄今为止最简单的方法，只需使用以下 4 行 CSS：

```
#lightbox {
  display: flex;
  flex-direction: column-reverse;    
} 
```

flexbox 会将容器上的显示顺序翻转为与 DOM 相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:52:19.307

我的回答有点抽象，但我希望这能有所帮助，并对我糟糕的英语感到抱歉:)

您必须在 lb-outerContainer 上方创建一个 div 找到这一行，我认为它在第 85 行。代码：

```
Lightbox.prototype.build = function() {
var $lightbox,
_this = this;
$("<div>", {
id: 'lightboxOverlay'
}).after
(
$('<div/>', {
id: 'lightbox'
}).append($('<div/>', {             //this is the div you have to append...
"class": 'lb-dataContainer'     
}).append($('<a/>', {
"class": 'lb-close',
"href":'#'
}).append($('<img/>', {
src: this.options.fileCloseImage
}))))
.append(
$('<div/>', {
"class": 'lb-outerContainer'    //this is the container
}).append($('<div/>', {
"class": 'lb-container'
}).append($('<img/>', {
"class": 'lb-image'
}), $('<div/>', {
"class": 'lb-nav'
}).append($('<a/>', {
"class": 'lb-prev'
}), $('<a/>', {
"class": 'lb-next'
})), $('<div/>', {
"class": 'lb-loader'
}).append($('<a/>', {
"class": 'lb-cancel'
}).append($('<img/>', {
src: this.options.fileLoadingImage
}))) 
```

然后把它放在你的CSS上

```
.lb-close{
float:right;
} 
```

这将使您的浮动到左上角。看看你就知道了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-16T15:58:48.853

这是编辑 lightbox-2.6.min.js 文件的简单方法：

在 lightbox-2.6.min.js 文件中搜索以下代码，

从：

```
<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'>    <div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div> 
```

将以上替换为：

```
<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-19T16:43:41.900

对于任何需要它的人来说，代码仅将关闭按钮移动到右上角，将标题留在底部。网络上的标准用户界面。

使用以下代码在 lightbox.js 文件中构建灯箱：

```
Lightbox.prototype.build = function() {
  var $lightbox,
    _this = this;
  $("<div>", {
    id: 'lightboxOverlay'
  }).after($('<div/>', {
    id: 'lightbox'
  }).append($('<div/>', {
      "class": 'lb-outerContainer'
  }).append($('<div/>', {
      "class": 'lb-closeContainer'
  }).append($('<a/>', {
      "class": 'lb-close'
  }).append($('<img/>', {
      src: this.options.fileCloseImage
  })), $('<div/>', {
    "class": 'lb-container'
  }).append($('<img/>', {
    "class": 'lb-image'
  }), $('<div/>', {
    "class": 'lb-nav'
  }).append($('<a/>', {
    "class": 'lb-prev'
  }), $('<a/>', {
    "class": 'lb-next'
  })), $('<div/>', {
    "class": 'lb-loader'
  }).append($('<a/>', {
    "class": 'lb-cancel'
  }).append($('<img/>', {
    src: this.options.fileLoadingImage
  }))))), $('<div/>', {
    "class": 'lb-dataContainer'
  }).append($('<div/>', {
    "class": 'lb-data'
  }).append($('<div/>', {
    "class": 'lb-details'
  }).append($('<span/>', {
    "class": 'lb-caption'
  }), $('<span/>', {
    "class": 'lb-number'
  }))))))).appendTo($('body')); 
```

这是我的关闭按钮的CSS：

```
.lb-closeContainer .lb-close {
float:right;
margin-top:-10px;
display:block;
outline-style:none;
text-decoration:none;
width:22px;
height:23px;
background:url(../images/layout/lightbox/close.png) no-repeat;
background-position: 0 0; 
_background-image:none;
_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../images/layout     
/lightbox/close.png', sizingMethod='scale');
}

.lb-closeContainer .lb-close:hover {
background:url(../images/layout/lightbox/close.png) no-repeat;
background-position: 0 100%;
_background-image:none;
_filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../images/layout
/lightbox/close.png', sizingMethod='scale');    
} 
```

# python - 在python中列出重复的数据连接

> ID：13218865
> 
> 赞同：1
> 
> 时间：2012-11-04T13:19:54.063
> 
> 标签：python, list, python-2.7

我是 python 的新手，在获取此输出时面临问题

```
 a = [('textVerify', 'AH', 'SELECT SERVICES'), ('textVerify', 'F7', 'test1>'),('audioVerify', '091;0'), ('imageVerify', 'duck.gif'),('imageVerify', 'egg.gif')] 
```

我想创建一个新列表，该列表应包含所有第 0 个唯一元素，例如

```
 audioVerify,imageVerify,textVerify 
```

所以预期的结果是

```
 ['textVerify',(('AH', 'SELECT SERVICES'), ('F7', 'test1>'))  'audioVerify', ('091;0'),  ('imageVerify', ('duck.gif','egg.gif')] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T13:24:33.890

你最好使用 a [`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> for item in a:
...     d[item[0]].append(item[1:])
...
>>> d
defaultdict(<class 'list'>, {'textVerify': [('AH', 'SELECT SERVICES'), 
('F7', 'est1>')], 'imageVerify': [('duck.gif',), ('egg.gif',)], 
'audioVerify': [('091;0',)]}) 
```

现在您可以按名称/索引访问其元素：

```
>>> d['textVerify']
[('AH', 'SELECT SERVICES'), ('F7', 'test1>')]
>>> d['textVerify'][0][0]
'AH' 
```

如果您需要保留字典键的顺序，您可以使用[`OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict), 连同`.setdefault()`方法，如 Ashwini Chaudhary 所述：

```
>>> d = OrderedDict()
>>> for x in a:
...     d.setdefault(x[0],[]).append(x[1:])
...
>>> d
OrderedDict([('textVerify', [('AH', 'SELECT SERVICES'), ('F7', 'test1>')]), 
('audioVerify', [('091;0',)]), ('imageVerify', [('duck.gif',), ('egg.gif',)])]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T13:28:37.393

使用，这至少`dict.setdefault()`比小型列表要快一些。：`defaultdict()`

```
>>> a
[('textVerify', 'AH', 'SELECT SERVICES'), ('textVerify', 'F7', 'test1>'), ('audioVerify', '091;0'), ('imageVerify', 'duck.gif'), ('imageVerify', 'egg.gif')]
>>> d={}
>>> for x in a:
...     d.setdefault(x[0],[]).append(x[1:])
... 
>>> d
{'audioVerify': [('091;0',)], 'textVerify': [('AH', 'SELECT SERVICES'), ('F7', 'test1>')], 'imageVerify': [('duck.gif',), ('egg.gif',)]}

>>> d["audioVerify"]
[('091;0',)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T13:26:45.507

```
>>> from collections import defaultdict
>>> d = defaultdict(list)
>>> _ = [d[i[0]].append(i[1:]) for i in a]
>>> d['textVerify']
[('AH', 'SELECT SERVICES'), ('F7', 'test1>')] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T16:48:10.337

```
a = [('textVerify', 'AH', 'SELECT SERVICES'), ('textVerify', 'F7', 'test1>'),('audioVerify', '091;0'), ('imageVerify', 'duck.gif'),('imageVerify', 'egg.gif')]

c=set(i[0] for i in a)
d=dict()
for i in c:
        m=[]
        for v in a:
                if v[0]==i:
                        m.extend(list(v[1:]))
        if len(m) !=0:
                d[i]=m

print(d) 
```

# c# - Asp.Net 静态对象的可用性

> ID：13218867
> 
> 赞同：0
> 
> 时间：2012-11-04T13:20:01.643
> 
> 标签：c#, asp.net, object, static, pool

我有一个应用程序使用太大且复杂的静态类，因此无法使用标准的 Asp.net 会话。更多 telho 问题与我的应用程序的稳定性有关，因为当池因 estarna dll 中的错误而关闭时，所有静态变量都会被释放。

我想知道是否有一个设置为每个“客户端”打开一个池。因此，如果一个用户没有摔倒，就会撞到其他人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:45:32.863

如果您有一个静态类，那么应用程序池中只有一个该类。如果这个类对每个用户都有不同的东西，它不应该是静态的。如果该类仅包含与特定会话无关的一般信息，并且您不想使其成为实例类，那么请确保在静态类的构造函数中没有抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:52:24.363

除了 YetAnotherSoftwareDeveloper 的回答之外，应用程序池还用于提供一种机制，该机制可用于出于稳定性和安全原因隔离应用程序，而不是隔离单个客户端会话。

如果您有一个不稳定的应用程序，您可以通过将其隔离在自己的应用程序池中来防止它对其他应用程序产生不利影响。这不会对有问题的应用程序提供任何稳定效果，但会防止它使同一服务器上的其他应用程序崩溃。

# cassandra - Cassandra Composite Columns - 如何选择 CompositeTypes？

> ID：13218868
> 
> 赞同：3
> 
> 时间：2012-11-04T13:20:07.053
> 
> 标签：cassandra, cql3

我试图了解创建复合列时使用的类型。

我正在使用 CQL3（通过 cqlsh）创建 CF，然后使用 CLI 发出描述命令。列中的类型按以下顺序排序： ...CompositeType(Type1,Type2,...) 不是我所期望的。

我正在使用 Cassandra 1.1.6。

```
CREATE TABLE CompKeyTest1 (
             KeyA int,
             KeyB int,
             KeyC int,
             MyData varchar,
             PRIMARY KEY (KeyA, KeyB, KeyC)
           ); 
```

返回的 CompositeType 是

```
CompositeType(Int32,Int32,UTF8) 
```

不应该是（Int32，Int32，Int32）吗？

```
CREATE TABLE CompKeyTest2 (
             KeyA int,
             KeyB varchar,
             KeyC int,
             MyData varchar,
             PRIMARY KEY (KeyA, KeyB, KeyC)
           ); 
```

返回的 CompositeType 是

```
CompositeType(UTF8,Int32,UTF8) 
```

为什么和我定义表格时使用的类型不一样？我可能在类型分配中遗漏了一些基本的东西......

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T16:11:22.350

复合列名由主键 2...n的*值*和正在保存的非主键列的*名称组成。*

（因此，如果您有 5 个非键字段，那么您将有五个这样的列，并且它们的列名将仅在最后一个组合值中有所不同，该值将是非键字段名称。）

因此，在这两个示例中，复合列由KeyB、KeyC的*值*和要存储的列的*名称*`"MyData"`组成（在这两种情况下都是 ）。这就是为什么你看到那些`CompositeTypes`被退回的原因。

（顺便说一句，主键中的第一个键是分区键，它的值仅用作行键（如果您熟悉 Cassandra）。它不用作任何复合列名称的一部分.)

# sql - 通用数据库设计 - 我可以引用其他表中的字段名称吗

> ID：13218873
> 
> 赞同：4
> 
> 时间：2012-11-04T13:20:36.840
> 
> 标签：sql, database, oracle, database-design, audit

我有一个可以更新各种字段的表。让我们调用它`table1`并假设它具有以下字段：

```
user VARCHAR2
first_name VARCHAR2
last_name VARCHAR2 
```

我的问题：我想跟踪对这些字段的编辑。我有一个允许更新这些字段的应用程序，但我想跟踪*何时*编辑字段、*谁*编辑了该字段以及编辑了*哪个*字段——*这*是我需要帮助的地方。

我可以有一个历史表：

```
date_edited DATE
who_edited VARCHAR2
field_name_edited VARCHAR2 
```

如果字段名称发生了变化怎么办？...这意味着`field_name_edited`它将引用一个不存在的字段。这似乎是一种愚蠢的做法。

必须有一些常见的方法来做这种事情吗？

非常感谢。

**编辑**

我正在使用 Oracle DB - 查看新的问题标签。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T14:49:28.393

> “一定有一些常见的方法来做这种事情？”

不是真的，因为你的方法是一种常见但被误导的方法。由于以下几个原因，无法在列级别跟踪更改：

1.  当更新涉及多个列（为每个更新的行插入多个审计记录）时，它会变得很昂贵。
2.  很难在给定的时间点组装一个连贯的记录状态图（程序复杂，启动成本更高）。
3.  没有优雅的方法来测试给定列是否已更改。
4.  存储列值很麻烦（实现通常通过将它们转换为字符串来处理不同的数据类型）。

（您建议的表格没有处理最后一点，我认为这是一个疏忽：不跟踪更改值的审计跟踪几乎没有价值）。

那么，常见的解决方案是什么？行级历史表。使用将整个记录插入日志表的触发器（连同 DATE_EDITED 和 WHO_EDITED 等元数据列）。这些触发器可以很容易地从数据字典中生成。

确实，这种方法使发现在任何给定事务中编辑了哪些列变得更加困难。然而：

1.  很难但并非不可能做到这一点。它可以在 SQL 中实现（使用分析 LAG 或其他东西），但实际上人类非常擅长在没有帮助的情况下发现变化。
2.  这样做的成本是由审计子系统承担的，在现实生活中——不管要求怎么说——它不会被太多使用，而且肯定比应用程序的核心部分少得多。因此，最好将处理成本转移到审计子系统上，而不是让日志记录变得昂贵。

而且，正如我所说，行级日志在生成审计记录和检索它们方面的成本都低于列级。

* * *

在您的评论中，您链接到有关 Oracle 的[Total Recall 产品](http://www.oracle.com/technetwork/issue-archive/2008/08-jul/o48totalrecall-092147.html)的文章。这实际上是一个非常优雅的解决方案，它对主系统的影响非常小，并且可以很容易地恢复我们表的历史状态。问题是，在 12c 之前，企业版需要额外收费，这使得它变得昂贵。（事实上​​，它现在是[Advanced Compression 选项](http://docs.oracle.com/cd/E11882_01/license.112/e10594/options.htm#CJACCDBA)的一部分，而不是单独的产品）。在 12c 中，Basic Flashback Data Archive（Total Recall 的新名称）[在所有版本中都可用](http://docs.oracle.com/database/121/DBLIC/editions.htm#DBLIC116)，但我们仍然需要购买 Advanced Compression Option 来压缩日志表。

* * *

> “您建议 [存储] 行编辑，从而存储冗余数据。”

是的。这些天存储通常很便宜。存储冗余数据的成本通常是为高效写入和检索记录而付出的好代价。

> “您仍然需要复制原始列的文字名称”

Journalling 为每个数据表使用一个审计表；审计表与实时表的结构相匹配，还有一些额外的列来保存与事务相关的元数据。我们希望审计列与其类似的数据列具有相同的名称。（做任何其他事情都是愚蠢的，尤其是因为我们可以从数据字典中为审计表生成 DDL。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:47:09.193

**免责声明**：*这是我几年前用于类似情况的方法。那时我不太喜欢我们必须做的所有连接和触发器。如果有人有更好的方法，请发布！*

据我了解，如果您认为字段名称可能会更改，您应该有一个主数据表来跟踪字段信息。您需要一个用于主数据的历史记录表和一个用于实际用户表的历史记录表。就像上面的一张海报所说，当其中一个表被修改时，您可以使用触发器写入正确的历史表。

```
table editable_fields

id
field_name
created/modified_by/date 
```

示例条目 = {(1, user), (2, first_name), (3, last_name)}

* * *

```
table user

id
field1_value
field2_value
field3_value
created/modified_by/date 
```

样本条目 = {(1, johnsmith, John, Smith), (2, janedoe, Jane, Doe)}

* * *

```
table user_fields_mapping

id
-- FKs to editable_fields.id
field1_editable_id
field2_editable_id
field3_editable_id 
```

样本条目 = {(1, 1, 2, 3), (2, 1, 2, 3), (3, 1, 2, 3)}

# inno-setup - 如果某个日期已过期，如何停止 Inno-Setup 安装程序？

> ID：13218874
> 
> 赞同：1
> 
> 时间：2012-11-04T13:20:40.190
> 
> 标签：inno-setup

请让我知道如何在安装过程中检查当前日期。

我必须在安装程序脚本中嵌入某个日期，然后如果当前日期（取自 Windows 主机）大于硬编码（嵌入）日期，则通知用户并停止安装过程

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-14T10:05:31.823

使用 Inno 的内置日期例程*GetDateTimeString*的替代解决方案。

```
[Code] 

const MY_EXPIRY_DATE_STR = '20131112'; //Date format: yyyymmdd

function InitializeSetup(): Boolean;
begin
  //If current date exceeds MY_EXPIRY_DATE_STR then return false and exit Installer.
  result := CompareStr(GetDateTimeString('yyyymmdd', #0,#0), MY_EXPIRY_DATE_STR) <= 0;

  if not result then
    MsgBox('This Software is freshware and the best-before date has been exceeded. The Program will not install.', mbError, MB_OK);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:46:00.203

您必须使用 Windows API 获取系统日期/时间，例如使用[GetLocalTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724338%28v=vs.85%29.aspx)函数，并将其与安装程序中某处的硬编码日期进行比较，例如在初始化期间，正如我在此示例中为您所做的那样：

{语言：帕斯卡}

```
[Code]
type
  TSystemTime = record
    wYear: Word;
    wMonth: Word;
    wDayOfWeek: Word;
    wDay: Word;
    wHour: Word;
    wMinute: Word;
    wSecond: Word;
    wMilliseconds: Word;
  end;

procedure GetLocalTime(var lpSystemTime: TSystemTime);  external 'GetLocalTime@kernel32.dll';

function DateToInt(ATime: TSystemTime): Cardinal;
begin
  //Converts dates to a integer with the format YYYYMMDD, 
  //which is easy to understand and directly comparable
  Result := ATime.wYear * 10000 + aTime.wMonth * 100 + aTime.wDay;
end;

function InitializeSetup(): Boolean;
var
  LocTime: TSystemTime;
begin
  GetLocalTime(LocTime);
  if DateToInt(LocTime) > 20121001 then //(10/1/2012)
  begin
    Result := False;
    MsgBox('Now it''s forbidden to install this program', mbError, MB_OK);
  end
  else
  begin
    Result := True;
  end;
end; 
```

# php - 可变单元高度 fpdf

> ID：13218875
> 
> 赞同：0
> 
> 时间：2012-11-04T13:21:27.133
> 
> 标签：php, pdf, fpdf

我正在创建一个带有用于开票的表格的 pdf 生成页面，我使用的是 FPDF。

我正在尝试将每行的单元格高度更改为根据第一列的高度而变化，`$column_item_name`. 这样做的原因是我可以将项目描述添加到与名称相同的字段中，并且不会丢弃其余的行。

我想我理解这个概念。单元格的GetY，设置为变量，使用变量作为高度，但是我似乎缺少一些东西，因为还没有设法让它工作。不幸的是，我不得不回滚，所以没有我尝试过的副本。

表的当前代码：

```
//First create each Field Name
//Gray color filling each Field Name box
$pdf->SetFillColor(232,232,232);
//Bold Font for Field Name
$pdf->SetFont('Arial','B',11);
$pdf->SetY($Y_Fields_Name_position);
$pdf->SetX(10);
$pdf->Cell(100,6,'Description',1,0,'L',1);
$pdf->SetX(110);
$pdf->Cell(30,6,'Rate',1,0,'L',1);
$pdf->SetX(140);
$pdf->Cell(30,6,'Quantity',1,0,'R',1);
$pdf->SetX(170);
$pdf->Cell(30,6,'Price',1,0,'R',1);
$pdf->Ln();

//Now show the 4 columns
$pdf->SetFont('Arial','',10);
$pdf->SetY($Y_Table_Position);
$pdf->SetX(10);
$pdf->MultiCell(100,6,$column_item_name,1);
$pdf->SetY($Y_Table_Position);
$pdf->SetX(110);
$pdf->MultiCell(30,6,$column_unit_price,1,'R');
$pdf->SetY($Y_Table_Position);
$pdf->SetX(140);
$pdf->MultiCell(30,6,$column_quantity,1,'R');
$pdf->SetY($Y_Table_Position);
$pdf->SetX(170);
$pdf->MultiCell(30,6,$column_total_price,1,'R');
$pdf->SetX(140);
$pdf->MultiCell(30,6,'Total (exc VAT)',1,'R');
$pdf->SetY($Y_Table_Position + ($number_of_products * 6));
$pdf->SetX(170);
$pdf->MultiCell(30,6,'£ '.$total,1,'R');
$pdf->SetX(140);
$pdf->MultiCell(30,6,$vat3,1,'R');
$pdf->SetY($Y_Table_Position + (($number_of_products + 1) * 6));
$pdf->SetX(170);
$pdf->MultiCell(30,6,'£ '.$vat2,1,'R');
$pdf->SetX(140);
$pdf->MultiCell(30,6,'Total (inc VAT)',1,'R');
$pdf->SetY($Y_Table_Position + (($number_of_products + 2) * 6));
$pdf->SetX(170);
$pdf->MultiCell(30,6,'£ '.$total_inc_vat,1,'R'); 
```

任何建议将不胜感激。

亲切的问候，

n00bstacker

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-01-01T22:25:53.323

fpdf.org 网站上有几个脚本可以处理表格中的可变高度行。我在我的~~免费~~（不再免费）书中收集了标题为“表格”一章的主要方法：

[http://basepath.com/PDFbook](http://basepath.com/PDFbook)

如果您希望第一列建立行高，而不是最高列，那是我在那里提供的 RowX 函数的一个简单变体。

# twitter-bootstrap - 如何使用 LESS 隐藏 Bootstrap 的 nav 和 nav-pills 类

> ID：13218876
> 
> 赞同：0
> 
> 时间：2012-11-04T13:21:26.797
> 
> 标签：twitter-bootstrap, less

我在尝试在 Bootstrap 中隐藏某些类时遇到了问题——这个给我带来了一些最大的麻烦。在这里，我想隐藏 nav 和 nav-pills 类的使用，但是如果我删除它们并使用 LESS 将它们嵌入到 .pills > ul 中并相应地调整我的所有代码，药丸本身将不会呈现，这让我感到困惑. 在花了几个小时试图与之抗争之后，我不情愿地将这些类嵌入到文档中，但我仍然希望将它们删除。

这是 HTML/PHP：

```
 <section class="pills" id="mus-art">
            <ul class="nav nav-pills">
                <li class="active"><a href="">Artist1</a></li>
                <li><a href="">Artist2</a></li>
                <li><a href="">Artist3</a></li>
                <li><a href="">Artist4</a></li>
                <li><a href="">Artist5</a></li>
                <li><a href="">Artist6</a></li>
                <li><a href="">Artist7</a></li>
                <li><a href="">Artist8</a></li>
                <li><a href="">Artist9</a></li>
                <li><a href="">Artist10</a></li>
                <li><a href="">Artist11</a></li>
                <li><a href="">Artist12</a></li>
                <li><a href="">Artist13</a></li>
                <li><a href="">Artist14</a></li>
            </ul>
        </section>
        <section id="contributor-info1">
                <?php include $_SERVER['DOCUMENT_ROOT']."/locationoffile"; ?>
        </section> 
```

我的 LESS 文件中没有任何会干扰任何药片渲染的内容。我还使用了一些 jQuery，但仅用于更改当它被单击时获得活动类的药丸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T16:43:33.273

您没有列出您调整的所有规则，但药丸不仅仅是由`ul.nav.nav-pills`选择器设置的。真正的药丸是`<a>`元素，它们的风格是由它们的`.nav-pills`祖先决定的。例如 ：

```
.nav-pills > li > a
/* OR */
.nav-pills > .active > a:hover 
```

如果您不想使用`.nav-pills`该类，则必须重新定义所有这些规则，直接暗示设置此类的元素或在其选择器中使用此类的任何规则。

* * *

但是恕我直言，隐藏这些类对最终用户没有兴趣，唯一的兴趣是对其他开发人员或机器人隐藏框架的使用——除非你遇到与这些类的冲突，在这种情况下你应该提出这个问题直接地。

# asp.net - Windows Server 显示设置未按应有的方式显示

> ID：13218878
> 
> 赞同：0
> 
> 时间：2012-11-04T13:21:35.247
> 
> 标签：asp.net, iis, windows-server-2008

在我的 Windows Server 2008 R2 服务器上，我设置了：

“区域和语言”->“格式”->“丹麦语（丹麦”）

当我看到这里的设置时，当我点击“其他设置”时，它似乎是正确的。但是，在我的应用程序中，设置不正确。在这里，我的输出仍然是美国的。

例如，这两种情况我遇到了问题：

*   Datetime.ToString() 给出 11/4/2012 1:18:38 PM 而不是 04/11/2012 13:18:38 。
*   当我输入带有 50,00 的双精度时，它被忽略并设置为 5000。使用点时，它可以工作。它应该是小数

当然我可以在应用程序中专门设置它，但我想知道为什么当我将格式设置为丹麦语时它默认设置为英语。

我还设置了以下内容：

*   位置 = “丹麦”
*   默认输入语言 = “丹麦语”

我如何解决它？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T18:19:41.663

ASP.NET 在不同的用户帐户下运行，因此您需要复制区域设置。

在*区域和语言*控制面板的*管理*选项卡上，您应该有一个*复制设置...*按钮。这会将设置从您的帐户复制到欢迎屏幕、系统帐户和新用户帐户。

要检查的另一件事是文件中的`<globalization>`部分`web.config`- 您可能会从用户的浏览器中获取文化设置。

# javascript - 图像更改循环不起作用

> ID：13218884
> 
> 赞同：0
> 
> 时间：2012-11-04T13:22:01.827
> 
> 标签：javascript, html

我编写了一个 JavaScript，它应该每三秒更改一次标题图像。出于某种原因，当我打开我的页面时没有任何反应。

谁能看到我做错了什么？

HTML：

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="styles.css">
        <script src="changeImage.js"></script>
        <title>Mikael Mattsson</title>
    </head>
    <body>
        <div class="header">
            <img id="headerImg" src="images/header-image.png" alt="Header image" width="100%" hight="100%">
        </div>
    </body>
</html> 
```

JavaScript：

```
var images = [];
images[0] = "images/header-image.png";
images[1] = "images/header-image2.png";
var x = 0;
function imageChanger(){
    var img = document.getElementById("headerImg");
    img.src = images[x];
    x++;
    if (x > images.length){
        x = 0;
    }

    setTimeout("imageChanger()", 3000);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:26:36.683

1.  `x > images.length`应该是`x >= images.length`。
2.  `setTimeout("imageChanger()", 3000);`必须改为`setTimeout(imageChanger, 3000);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:25:14.640

您调用`setTimeout`函数内部但从不调用该函数。因此永远不会设置超时，因此不会通过超时调用该函数。

我建议在您的情况下使用`setInterval`上述方法`setTimeout`，因为您希望重复执行该功能。你也可以改进你增加的方式`x`。

```
var x = 0;
function imageChanger() {
    var img = document.getElementById("headerImg");
    x = (x + 1) % images.length; // Make sure x is never larger than images.length
    img.src = images[x];
}

// Start calling the function after a delay of 3000ms
setInterval(imageChanger, 3000);​​​​ 
```

我还建议使用比`x`计数器变量更好的名称，但这取决于您！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T13:26:35.973

你很近。你需要改变两件事。

首先，您需要至少调用一次 imageChanger 函数来启动代码。在脚本的末尾，添加：

```
imageChanger(); 
```

您的代码可能会从那里开始工作。但是，不应将字符串传递给 setTimeout()，而应传递对函数本身的引用：

```
setTimeout(imageChanger, 3000); 
```

你应该准备好了。如果您有问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T13:28:25.327

消除

```
setTimeout("imageChanger()", 3000); 
```

并添加

```
window.onload=function() {

  setInterval(imageChanger, 3000);
} 
```

函数外

正如所指出的，将 > 更改为 >=

# php - xsltProcessor setParameter : 发送未定义数量的参数

> ID：13218885
> 
> 赞同：2
> 
> 时间：2012-11-04T13:22:07.333
> 
> 标签：php, xslt, parameters

我有一个 XSL 文件。

我有一个名为 XSLTProcessor 的 PHP 文件`$bob`。

我想向我的 xsl 转换发送一些参数。

所以，我把它写在我的 PHP 文件中；例如 ：

```
$bob->setParameter('', 'message', 'hi'); 
```

在我的 XSL 文件中，为了获取参数，我编写了以下示例：

```
<xsl:param name="message" /> 
```

如果我想在我的 XSL 中显示这个参数，我会这样做：

```
<xsl:value-of select="$message" /> 
```

问题来了。

我必须向我的 XSL 发送未定义数量的参数，但我不知道该怎么做。我尝试了几种解决方案，但它们不相关。例如，我想向我的 XSL 发送 3 条消息，并且我希望我的 XSL 使用它们来生成如下代码：

```
<messages>
    <message>Hi</message>
    <message>it's bob</message>
    <message>How are you ?</message>
</messages> 
```

你有我的解决方案吗？这将是非常好的。对不起，如果我的英语有错误。谢谢你，祝你有美好的一天。

**如被问及，这是我拥有和想要拥有的东西**：

**（以下分开）**

这是我的原始 XML 的简化版本，名为 posts.xml ：

```
<posts>
    <post id="post1" >
        <titre>Hey</titre>
        <motscles>
            <motcle>Batman</motcle>
            <motcle>Cats</motcle>
        </motscles>
    </posts>
</posts> 
```

这是我想在 final 中拥有的 XML：

```
<posts>
    <post id="post1" >
        <titre>Hey</titre>
        <motscles>
            <motcle>Batman</motcle>
            <motcle>Cats</motcle>
        </motscles>
    </posts>
    <post id="post2" >
        <titre>Toto</titre>
        <motscles>
            <motcle>Superman</motcle>
            <motcle>Dogs</motcle>
            <motcle>Cake</motcle>
        </motscles>
    </posts>
</posts> 
```

我通过 HTML 表单获得了帖子的信息（标题，motscles）。所以我的 php 文件获取信息，并将其发送到我的 XSL 文件：

```
// initialize xml and xsl
$xml = new DOMDocument();
$xml->load('posts.xml');
$xsl = new DOMDocument();
$xsl->load('addpost.xsl');

// Initialize the XSLTProcessor
$addPost  = new XSLTProcessor();
$addPost->importStylesheet($xsl);

// Define parameters
$addPost->setParameter('', 'titre', $_POST['titre']);

// Get the modified xml
$xml = $addPost->transformToDoc($xml);

// Save the modified xml
$xml->save('posts.xml'); 
```

这是我的 XSL 的简化版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output 
        method="xml"
        indent="yes" 
        encoding="UTF-8"
        />

    <xsl:param name="titre" />
    <xsl:param name="motscles" />

    <xsl:template match="posts" >
        <xsl:copy>

            <xsl:apply-templates select="@*" />
            <xsl:apply-templates select="@*|node()"/>

            <xsl:call-template name="post" />
        </xsl:copy>
    </xsl:template>

    <!-- Template de post -->
    <xsl:template name="post" >
        <post id="{$id}" >
            <titre><xsl:value-of select="$titre" /></titre>
            <motscles>
            </motscles>
        </post>
    </xsl:template>

    <!-- Copier les nodes et attributs récursivement -->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*" />
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
   </xsl:template>  

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:42:41.237

**我只需要*一个*参数，即一个 XML 文档**。我会在调用转换之前创建这个 XML 文档。

**与发送单个管道分隔的字符串相比，这具有一些明确的好处**：

1.  每个参数都在其自己的元素中，这可以通过 XSLT 中的单独模板进行匹配。

2.  不需要对管道分隔的字符串进行递归处理，也不需要扩展函数。

3.  更具可扩展性和可扩展性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:47:56.903

为您的消息确定一个分隔符（即确保不会出现在消息中的字符），然后传入一个字符串，消息由该字符分隔，例如，如果您选择`|`pass in `$bob->setParameter('', 'message', "Hi|It's Bob|How are you?");`，然后在您的 XSLT 代码中与 libxslt 一起使用，例如

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0"
  xmlns:str="http://exslt.org/strings"  
  exclude-result-prefixes="str">

<xsl:param name="message"/>

<xsl:variable name="msgs-rtf">
  <messages>
    <xsl:for-each select="str:tokenize($message, '|')">
       <message>
         <xsl:value-of select="."/>
       </message>
    </xsl:for-each>
  </messages>
</xsl:variable>

<xsl:template match="/">
  <xsl:copy-of select="$msgs-rtf"/>
</xsl:template>

</xsl:stylesheet> 
```

据我所知，`str:tokenize`PHP 5 用于 XSLT 的 libxslt 支持扩展功能，因此您应该能够使用它。或者您需要编写一个在 XSLT 本身中进行标记化的模板

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T13:47:20.870

PHP中的连接怎么样？

```
$bob->setParameter("", "message", "Hi:it's bob:How are you ?"); 
```

XSLT 代码中的标记化：

```
<messages>
<xsl:for-each select="tokenize($message,':')">
<message>
<xsl:value-of select="." />
</message>
</xsl:for-each>
</messages> 
```

# java - Eclipse 插件开发：获取项目信息

> ID：13218888
> 
> 赞同：0
> 
> 时间：2012-11-04T13:22:34.737
> 
> 标签：java, eclipse, api, eclipse-plugin

我是 Eclipse 插件开发的新手：我需要检索用户选择的 java 项目的一些信息，例如：

*   班级数
*   每个类的方法
*   每个类的实例变量
*   每个类的LOC数

我的插件必须将 java 项目显示为图形并计算一些指标......但我不熟悉 Eclipse API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:48:04.737

在 Javadoc 中搜索 IProject、IContainer、IFolder、IFile 和 IWorkspaceRoot 类。这些课程共同协作，为您提供所需的大部分信息。

在 org.eclipse.jdt.core 插件中查看 ASTParser，它可以获取一些 Java 源代码并返回一个解析树，您可以在其中找到所有方法、变量等。

# sql - SQL Server：非数字字符串上的 +（一元）运算符

> ID：13218892
> 
> 赞同：4
> 
> 时间：2012-11-04T13:23:30.350
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2012

我很惊讶！以下声明在以下情况下有效`SQL SERVER`：

```
SELECT  +'ABCDEF' 
```

是否已`SQL Server`定义为字符串类型`+`的运算符？`Unary`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T13:25:57.057

这是我自己对这个问题的回答（另请参阅最后的更新）：

不，字符串表达式上没有定义这样的一元运算符。这可能是一个错误。

解释：

给定的语句是有效的，它会生成以下结果：

```
(No column name) 
----------------
ABCDEF
(1 row(s) affected) 
```

这相当于在`SELECT`不使用`+`符号的情况下执行语句：

```
SELECT  'ABCDEF' 
```

编译时没有给出任何错误，实际上是成功执行，给人的印象`+`是`Unary`对给定字符串的操作。但是，在官方`T-SQL`文档中，并没有提到这样的操作符。实际上，在标题为“[字符串运算符](http://msdn.microsoft.com/en-us/library/ms190301.aspx)”的部分中，`+`出现了两个字符串操作，它们是`+ (String Concatenation)`和`+= (String Concatenation)`; 但也不是`Unary`手术。此外，在标题为“[一元运算符](http://msdn.microsoft.com/en-us/library/ms188400.aspx)”的部分中，已经介绍了三个运算符，其中只有一个是`+ (Positive)`运算符。然而，对于这唯一一个似乎相关的，很快就会清楚的是，这个运算符也与非数字字符串值无关，因为它的解释`+ (Positive)`运算符明确指出此运算符仅适用于数值：“[返回数值表达式的值（一元运算符）](http://msdn.microsoft.com/en-us/library/ms174362.aspx) ”。

也许，这个运算符可以成功地接受那些被成功评估为数字的字符串值，例如这里使用的那个：

```
SELECT  +'12345'+1 
```

执行上述语句时，它会在输出中生成一个数字，该数字是作为数字评估的给定字符串和添加到它的数字值的总和，这在`1`这里但显然可以是任何其他数量：

```
(No column name) 
----------------
12346
(1 row(s) affected) 
```

但是，我怀疑这种解释是否正确，因为它引发了以下问题：

首先，如果我们接受这种解释是正确的，那么我们可以得出结论，这样的表达式`+'12345'`被评估为数字。如果是这样，那么为什么这些数字会出现在字符串相关的函数中，例如`DATALENGTH`，`LEN`等。您可以看到这样的语句：

```
 SELECT  DATALENGTH(+'12345') 
```

是非常有效的，结果如下：

```
 (No column name) 
----------------
5
(1 row(s) affected) 
```

这意味着`+'12345'`被评估为字符串而不是数字。这怎么解释？

其次，while 语句与`-`运算符类似，例如：

```
 `SELECT  -'ABCDE'` 
```

甚至这个：

```
`SELECT  -'12345'` 
```

产生以下错误：

```
Invalid operator for data type. Operator equals minus, type equals varchar. 
```

`+`为什么，当运算符被错误地与非数字字符串值一起使用时，它不应该在类似情况下产生错误吗？

因此，这两个问题使我无法接受这样的解释，即这是在`+ (unary)`数值文档中引入的同一运算符。由于在其他任何地方都没有提到它，因此它可能是故意添加到语言中的。可能是一个错误。

当我们看到没有为诸如以下语句生成错误时，问题看起来更加严重：

```
SELECT ++++++++'ABCDE' 
```

我不知道是否有任何其他编程语言可以接受这些陈述。但是如果有的话，很高兴知道他们使用`+ (unary)`应用于字符串的运算符的目的是什么。我无法想象任何用途！

**更新**

这里它说这是早期版本中的一个错误，但由于向后兼容性，它不会被修复：

[经过一番调查，这种行为是设计使然，因为 + 是一元运算符。因此解析器接受 "+ ，并且在这种情况下简单地忽略了 '+'。更改此行为具有很多向后兼容性的含义，因此我们不打算更改它并且该修复程序将为应用程序代码引入不必要的更改。](https://connect.microsoft.com/SQLServer/feedback/details/718176/concatenation-operator-not-working-properly)

# django - 在不知道输入名称和数量的情况下使用 request.POST

> ID：13218894
> 
> 赞同：4
> 
> 时间：2012-11-04T13:23:58.840
> 
> 标签：django, django-forms, django-templates, django-views

有没有办法知道 request.POST 中输入的名称和值？我知道我可以通过知道它们的名称来访问输入的值，如下所示：

```
name = request.POST['inputName'] 
```

但是如果我不知道有多少输入以及它们的名称，我该怎么办？有没有办法遍历request.POST？（我用 xsl 创建我的 html，因为我是通过解析 xml 文件来创建 html，所以输入的数量和 nmame 是可变的。所以我必须使用这种方式）非常感谢您的帮助:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T13:32:47.423

Python 字典的默认迭代器返回键 - 这意味着当您遍历字典时，它将返回每个键。由于`request.POST`是“dict like”对象，因此它可以工作：

```
for i in request.POST:
   print 'I have been passed the following keys: ',i 
```

你也可以这样做：

```
print 'The total number of keys in my POST request: ', len(request.POST.keys()) 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-04T13:28:07.020

尝试只为他们服务。例子：

```
foreach(request.POST as item){
 print item;
} 
```

# python - 如何以有效的方式格式化类内部方法的输出？

> ID：13218896
> 
> 赞同：2
> 
> 时间：2012-11-04T13:24:22.770
> 
> 标签：python

我想写一个里面有很多东西的类。现在我想**为输出提供某些选项以以不理想的格式显示数据**。在我的示例中，类中的函数应将输出（以前的字典）格式化为列表。但我真的不知道该怎么做......

这是我的尝试：

```
class TestClass(object):
    def __init__(self):
        pass

    def return_values_as_list(self,otherfunction):
        data_as_list=[ i for i in otherfunction.values()]
        return data_as_list

    def get_data1_from_db(self):
        self.data= {'1_testkey':'1_testvalue',"1_testkey2":"1_testvalue2"}

    def get_data2_from_db(self):
        self.data= {'2_testkey':'2_testvalue',"2_testkey2":"2_testvalue2"}
        return self.data 
```

我最后想要的是

> ['1_testvalue','1_testvalue2']

当实例化如下所示：

```
testcase = TestClass()
testcase.get_data1_from_db.return_values_as_list() 
```

有什么帮助吗？我也想到了钩子……但我真的不知道该怎么做……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T13:26:20.923

```
def return_values_as_list(self,otherfunction):
    data_as_list= otherfunction().values()
    return data_as_list 
```

你快到了 - 你只需要调用函数（添加括号）

实例化：

```
testcase.return_values_as_list(testcase.get_data1_from_db) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T14:20:03.583

我认为你的类`get...`方法应该是[属性](http://docs.python.org/2/library/functions.html?highlight=property#property)属性。

```
class TestClass(object):
    def __init__(self):
        pass

    @property
    def get_data1_from_db(self):
        data= {'1_testkey':'1_testvalue',"1_testkey2":"1_testvalue2"}
        return data.values()

    @property
    def get_data2_from_db(self):
        data= {'2_testkey':'2_testvalue',"2_testkey2":"2_testvalue2"}
        return data.values()

testcase = TestClass()
print testcase.get_data1_from_db  # ['1_testvalue', '1_testvalue2']
print testcase.get_data2_from_db  # ['2_testvalue', '2_testvalue2'] 
```

# java - 有什么理由不使用 resource.getInputStream() 吗？

> ID：13218898
> 
> 赞同：1
> 
> 时间：2012-11-04T13:24:31.800
> 
> 标签：java, spring, file-io

像这样创建一个 是否有利`FileInputStream`：

```
InputStream fileInputStream = new FileInputStream(resource.getFile()); 
```

而不是使用`InputStream`由资源创建的，如下所示：

```
InputStream resourceInputStream = resource.getInputStream(); 
```

资源是一个`org.springframework.core.io.Resource`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:29:14.650

资源并不总是来自文件。它可能来自网络资源或由类加载器动态生成。如果你这样做，你可能在 99% 的情况下都很好，但在特定的意外情况下你可能会遇到麻烦。

作为一般规则，最好不要对任何事情的具体实施做出假设。

通过使用`resource.getFile()`您假设资源来自文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:37:56.210

如果您只需要输入流，那么没有理由不使用它。重点`getFile`是通过打开文件以外的方式访问文件`FileInputStream`，例如读取属性、移动、删除、通过 NIO 而不是经典 IO 打开文件等。

# php - xml_parse 退出页面。没有错误

> ID：13218905
> 
> 赞同：0
> 
> 时间：2012-11-04T13:25:11.580
> 
> 标签：php, xml, xml-parsing

最近几天我正在更新一个脚本以使用 Joomla 2.5。它几乎完成了，但有一件事我还没有解决。这是一个奇怪的。

该脚本有一个解析附属 XML 的 cron。为此，它使用 PHP 函数 xml_parse，如下所示：

```
if (!($fp = @$file_function($url, 'rb'))) {
   $this->error("Cannot open {$url}");
   return;
}

while (($data = fread($fp, 8192))) {
   if ( defined ('LIBXML_BUG') ) {
     # fix voor LIBXML BUG
     $data=str_replace("&","XMLLIBHACK",$data);
    }
    if (!xml_parse($this->parser, $data, feof($fp))) {

                    printf('XML error in %s at line %d column %d',
            $url,
                    xml_get_current_line_number($this->parser),
                    xml_get_current_column_number($this->parser));
            unset ($this->items);
     } 
}
xml_parser_free( $this->parser ); 
```

如前所述，问题在于 xml_parse 函数。在这一行，整个页面/脚本停止工作，只返回写在这一行之上的内容。当 error_reporting 为 E_ALL 且 display_errors 为 On 时，它不会返回任何错误。故意创建错误时，我看到了错误，因此 error_reporting 正在工作。parser($this->parser) 是在另一个文件中创建的。已加载（var_dumped $this->parser）。

创建 $this->parser 的代码（我相信这个类叫做 MagpieRSS）：

```
function create_parser($out_enc, $in_enc, $detect) {
        if ( substr(phpversion(),0,1) == 5) {
            $parser = $this->php5_create_parser($in_enc, $detect);
        }
        else {
            $parser = $this->php4_create_parser($in_enc, $detect);
        }
        if ($out_enc) {
            $this->encoding = $out_enc;
            xml_parser_set_option($parser, XML_OPTION_TARGET_ENCODING, $out_enc);
        }

        return $parser;
    }

    /**
    * Instantiate an XML parser under PHP5
    *
    * PHP5 will do a fine job of detecting input encoding
    * if passed an empty string as the encoding. 
    *
    * All hail libxml2!
    *
    */
    function php5_create_parser($in_enc, $detect) {
        // by default php5 does a fine job of detecting input encodings
        if(!$detect && $in_enc) {
            return xml_parser_create($in_enc);
        }
        else {
            return xml_parser_create('');
        }
    }

    /**
    * Instaniate an XML parser under PHP4
    *
    * Unfortunately PHP4's support for character encodings
    * and especially XML and character encodings sucks.  As
    * force to UTF-8 use admin settings to change this
    */
    function php4_create_parser($in_enc, $detect) {
        if ( $detect ) {
            $in_enc = 'UTF-8';
        }

       return xml_parser_create($in_enc);

    } 
```

我没有解决这个问题的想法。我尝试了不同的编码（ISO、UTF-8 等），检查了 $data 但一切似乎都是文件。

可以在此处找到示例 XML 文件：http: [//pastebin.com/wT1pVZLQ](http://pastebin.com/wT1pVZLQ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T02:31:54.047

我建议您使用`SimpleXMLElement`哪个更灵活.. 您需要做的只是循环获取您想要的元素。

**使用您的 XML 的示例**

```
header('Content-Type: text/html; charset=utf-8');
$sxe = simplexml_load_file("log.xml", "SimpleXMLElement");

echo "<pre>";
foreach ( $sxe->dataHeader as $element ) {
    foreach ( $element as $key => $value )
        echo $key, " = ", $value, PHP_EOL;
}

echo PHP_EOL;
foreach ( $sxe->data as $record ) {
    foreach ( $record as $key => $element ) {
        foreach ( $element as $key => $value )
            echo $key, " = ", $value, PHP_EOL;
    }
} 
```

输出

```
exportType = stream
exportId = 256106
rows = 1
lastChecked = 2012-11-04 14:03:06.26
lastUpdated = 2012-11-04 00:03:02.822
parserLocale = nl_NL
streamCurrency = EUR
name = befit2day.nl
description = 

recordHash = 1124208770
url = http://clicks.m4n.nl/_c?aid=14375&adid=695437&_df=true&turl=http%3A%2F%2Fbefit2day.nl%2F
title = Universeel krachtstation
description = Géén verzendkosten Verwachte levertijd 5 werkdagen Universeel krachtstation In hoogte verstelbare haltersteunen Rugleuning in 6 standen te verstellen Biceps curl steun in 3 standen te verstellen Been curl in 3 standen te verstellen (te belasten tot 60 kg) Geschikt voor halterschijven met stang opening van 20 - 31 mm Ook te gebruiken voor weighted crunches (met behulp van de kabel), tot 60 kg Ook te gebruiken voor dips Maximaal belastbaar tot 280 kg (inclusief gebruikersgewicht) Bankdrukken tot 180 kg Totaal gewicht 40 kg Geleverd exclusief halterstangen en gewichten Afmetingen krachtstation (L x B x H): 180 cm x 106 cm x 90-110 cm Afmetingen rugleuning (L x B x H): 68 cm x 28 cm x 4 cm Afmetingen curl steun (L x B x H): 28 cm x 44,5 cm x 4 cm Met aan de onderzijde gummi bekleding voor bescherming van de vloer
offerid = 
image = http://befit2day.nl/img/products/11749/103/universeel-krachtstation.jpg
price = 149.90
category = dagaanbieding
subcategory = 
stock = 1
timetoship = 
ean = 
price_shipping = 0.00
price_old = 299.90
vendor = 
category_path = 
publisher = befit2day.nl
column0 = dagaanbieding
time = 0:00
logo = http://befit2day.nl/themes/store_4/images/logo.jpg
merchantID = 20420 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T16:08:43.857

检查您的日志以查看解析器正在抛出什么，和/或尝试 ini_set('display_errors', 1);

您可能在文件中得到一个与您尝试过的编码不兼容的字符，或者它无法识别 xml 文件的格式正确。

如果是编码问题，请先替换字符（如果只有一个或两个），然后将其解析为 xml，或者找到完全支持您的 xml 文件的编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T15:26:56.663

```
tail -f /var/log/apache2/error.log 
```

刷新网站并注意“Segmentation Fault”。当一切都神奇地停止响应时，通常会出现这种情况。

# php - 如何使用谷歌地图 API 计算和显示特定地点的风向？

> ID：13218910
> 
> 赞同：0
> 
> 时间：2012-11-04T13:25:45.703
> 
> 标签：php, javascript, api, google-maps, google-maps-api-3

我想找到一个地方的风向，并在人们使用 Google Map API 点击它时将其显示在信息窗口上。如何真正找到方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:55:42.580

使用 Wea​​ther [Underground](http://www.wunderground.com/weather/api/)的 api 。它提供风向。

# c# - 我可以在 Windows 窗体应用程序中使用 HTML Agility Pack 吗？

> ID：13218914
> 
> 赞同：2
> 
> 时间：2012-11-04T13:26:12.937
> 
> 标签：c#, winforms, html-agility-pack

这是我第一次用 HAP 做我的工作，但是我发现`HtmlDocument`class 有问题，我不能使用它，因为 intellisense 告诉我它是模棱两可的引用，这是图片： ![在此处输入图像描述](../Images/9d1afadbd831da9d4f5ff6425a2bf881.png)

我已经导入了需要它的库这个代码，`using HTML_Agility; using HtmlAgilityPack;`我还添加了对其 DLL 文件的引用，但它对我没有多大帮助。您知道为什么会发生这种情况以及如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T13:39:58.613

还有一个`System.Windows.Forms.HtmlDocument`类。

尝试明确限定您的类名而不是使用`using`语句，或者使用`using`诸如`using HAPDocument = HtmlAgilityPack.HtmlDocument;`（然后在源代码中使用`HAPDocument`而不是）等语句重命名类。`HtmlDocument`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T13:40:00.123

为了避免模棱两可的参考写这样的：

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument(); 
```

# java - 禁止后台“Android”移动互联网

> ID：13218917
> 
> 赞同：0
> 
> 时间：2012-11-04T13:26:34.930
> 
> 标签：java, android

> **可能重复：**
> [如何在 Android 上禁用移动数据](https://stackoverflow.com/questions/3644144/how-to-disable-mobile-data-on-android)

对不起我的英语，我使用翻译。在android菜单中，您可以在后台关闭移动数据。我怎样才能使用代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T13:30:43.113

作为程序员，您应对程序的行为负责，因此，如果您不希望程序在后台使用数据：

*   测试它。
*   在后台时，请勿拨打电话。

# jboss - 我应该怎么做才能连接到远程 jms 队列？

> ID：13218925
> 
> 赞同：1
> 
> 时间：2012-11-04T13:27:15.480
> 
> 标签：jboss, jms, jndi

我在本地主机上有工作的**JBoss AS 7（7.1.1 最终版）**服务器，带有一些队列。

我想在桌面应用程序中连接到该队列。

所以我写了这样的东西：

```
Hashtable env = new Hashtable();
env.put(Context.PROVIDER_URL, "remote://localhost:4447");
env.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
env.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");
InitialContext initialContext = new InitialContext(env);
ConnectionFactory connectionFactory = (ConnectionFactory) 
initialContext.lookup("RemoteConnectionFactory"); // <- there is it fail 
```

但这会导致此异常：

> 线程“主”javax.naming.CommunicationException 中的异常：无法获得与这些 url 中的任何一个的连接：remote://localhost:4447 并且发现失败并出现错误：javax.naming.CommunicationException：接收超时 [根异常是 java。 net.SocketTimeoutException：接收超时] [根异常是 javax.naming.CommunicationException：无法连接到远程服务器：1099 [根异常是 javax.naming.ServiceUnavailableException：无法连接到远程服务器：1099 [根异常是 java。 net.UnknownHostException: 远程]]]

当然，我在类路径中有**jbosscall-client.jar 。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:36:05.790

您需要将`remote`in`PROVIDER_URL`替换为`jnp`类似于

```
### JBossNS properties
java.naming.factory.initial=org.jnp.interfaces.NamingContextFactory
java.naming.provider.url=jnp://localhost:1099
java.naming.factory.url.pkgs=org.jboss.naming:org.jnp.interfaces 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:35:33.760

```
Properties properties = new Properties();
properties.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");
properties.put(Context.PROVIDER_URL, "remote://localhost:4447");
properties.put(Context.SECURITY_PRINCIPAL, "hlib");
properties.put(Context.SECURITY_CREDENTIALS, "password1");
InitialContext context = new InitialContext(properties);
ConnectionFactory factory = (ConnectionFactory) context.lookup("jms/RemoteConnectionFactory"); 
```

如果为 jboss 添加了“应用程序用户”，则此代码运行良好。

# c# - Java中的条件模板？

> ID：13218927
> 
> 赞同：0
> 
> 时间：2012-11-04T13:27:24.813
> 
> 标签：c#, java

在 C# 中，我可以这样做：

```
public class QuadTree<T> where T : IHasRect 
```

有没有办法在 Java 中做类似的事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T13:29:41.843

如果`where T : IHasRect`表示这`T`是必须实现`IHasRect`接口的类型，则 Java 等价物是

```
public class QuadTree<T extends HasRect> 
```

阅读[泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/bounded.html)以获取更多信息。

# windows - 如何在 Windows 8 中制作混合应用程序？

> ID：13218928
> 
> 赞同：3
> 
> 时间：2012-11-04T13:27:30.037
> 
> 标签：windows, google-chrome, windows-8, windows-runtime

谷歌浏览器如何制作一个混合应用程序（即一个可以在桌面上运行，一个可以在现代 UI 之外运行，并且可以切换）？他们调用了哪些新的 Windows API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:31:21.380

唯一可以“混合”的应用程序是浏览器。请参阅[此处](http://go.microsoft.com/fwlink/p/?linkid=243079)（链接到有关启用浏览器桌面和 Metro 的 Microsoft 白皮书链接）。

# jquery - jQuery Mobile a href 没有导航到 div

> ID：13218930
> 
> 赞同：0
> 
> 时间：2012-11-04T13:27:47.440
> 
> 标签：jquery, html, jquery-mobile, hyperlink, href

嗨，我对 jQuery 很陌生，我正在制作一个 jQuery 移动网站

我已经使用 data-role 来定义每个 div 的角色。我有我的导航栏，我想链接到位于“主要内容”div 下方的 div。在我的主站点上，我可以完美地导航到下面的 div。但是，当我尝试导航到主站点上的以下 div 时，我无处可去。超链接似乎不起作用。

使用 jQuery mobile 时，是否有不同的方法可以链接到同一页面上的下面的 div，因为我知道它适用于我的普通网站？

提前感谢您的任何意见。

这是我的代码：

```
<div id="header" data-role="header" data-theme="c">
    <div data-role="navbar" data-theme="c" > <!--Start Nav Div -->
        <ul>
        <li><a data-icon="home" data-rel="dialog"  href="indexmobile.php">Home</a></li>
        <li><a  data-icon="arrow-d" data-rel="dialog" href="#aboutme">About</a></li>
        <li><a  data-icon="grid" data-rel="dialog" href="#portfolio">Portfolio</a></li>
        <li><a data-icon="gear" data-rel="dialog" href="#contactform">Contact</a></li>
        </ul>
        </div> <!-- End Nav Div -->
    </div> <!-- End Header Div -->

    <div id="maincontent" data-role="content"> <!-- Main Content Div -->
    </div> <!-- End Main Content -->
     <div id="portfolio"> <!-- Start Portfolio Div -->

            </div> <!--- End Portfolio Div -->

        <div id="aboutme"> <!--- About Me Div Start -->

        </div> <!--- End About Me Div --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T11:19:33.270

要实现您需要的到 div 的锚链接，您只需将其添加到您的链接中：

```
data-ajax="false" 
```

这基本上告诉框架不要使用 ajax，它会提示浏览器按照最初的意图处理“#aboutme”锚点——识别要显示的页面的一部分。

使用这种技术，您仍然可以在同一页面上拥有大量可滚动内容，并且仍然可以使用导航栏或页脚或您拥有的内容链接到它。

接受的答案并没有真正解决您的问题 - 它告诉您创建一个多页文档，从而绕过问题，因为您不会拥有您可能首先需要的可滚动内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T17:19:52.077

你的每个人都`<div>`应该是不同的`data-role="page"`。

阅读JQueryMobile 文档中[的多页文档中的链接部分。](http://jquerymobile.com/demos/1.2.0/docs/pages/page-links.html)

# c# - 15 秒后停止运行代码

> ID：13218933
> 
> 赞同：4
> 
> 时间：2012-11-04T13:28:17.707
> 
> 标签：c#, datetime

我正在尝试编写一些东西以在运行 15 秒后停止运行代码。

我不想`While`使用循环或任何类型的循环，而是想使用 IF-ELSE 条件，因为它可以让我在代码中更轻松。

我想在 15 秒后停止执行的代码部分是 FOR 循环本身。让我们以下面的代码为例：

```
for (int i = 1; i < 100000; i++)
{
    Console.WriteLine("This is test no. "+ i+ "\n");
} 
```

运行 15 秒后如何停止此循环？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-04T13:31:37.910

您可以在具有当前日期和时间的循环之前分配 DateTime 变量，然后在每个循环迭代中简单地检查 15 秒是否已经过去：

```
DateTime start = DateTime.Now;
for (int i = 1; i < 100000; i++)
{
    if ((DateTime.Now - start).TotalSeconds >= 15)
        break;
    Console.WriteLine("This is test no. "+ i+ "\n");
} 
```

更新：虽然上述方法通常会起作用，但它不是防弹的，并且可能在某些边缘情况下失败（正如 Servy[在评论中指出的](https://stackoverflow.com/questions/13218933/stop-running-the-code-after-15-seconds/13218959#comment18006572_13218959)那样），导致无限循环。更好的做法是使用`Stopwatch`该类，它是*System.Diagnostics*命名空间的一部分：

```
Stopwatch watch = new Stopwatch();
watch.Start();
for (int i = 1; i < 100000; i++)
{
    if (watch.Elapsed.TotalMilliseconds >= 500)
        break;
    Console.WriteLine("This is test no. " + i + "\n");
}
watch.Stop(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T07:00:14.527

[我从我的旧帖子中](https://stackoverflow.com/questions/13220294/stop-the-code-after-a-time-period/13220449#13220449)发布我的答案，因为它在这里更相关，

我认为您需要测量时间并在特定时间说“15秒”后停止代码，`StopWatch`课程可以帮助您。

```
// Create new stopwatch instance
Stopwatch stopwatch = new Stopwatch();
// start stopwatch
stopwatch.Start();
// Stop the stopwatch
stopwatch.Stop();
// Write result
Console.WriteLine("Time elapsed: {0}",stopwatch.Elapsed);
// you can check for Elapsed property when its greater than 15 seconds 
//then stop the code 
```

Elapsed 属性[返回 TimeSpan](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.elapsed.aspx)实例，你会做这样的事情。

```
TimeSpan timeGone = stopwatch.Elapsed; 
```

为了适应您的情况，您可以执行以下操作

```
Stopwatch stopwatch = new Stopwatch();
TimeSpan timeGone;
// Use TimeSpan constructor to specify:
// ... Days, hours, minutes, seconds, milliseconds.
// ... The TimeSpan returned has those values.
TimeSpan RequiredTimeLine = new TimeSpan(0, 0, 0, 15, 0);//set to 15 sec

While ( timeGone.Seconds < RequiredTimeLine.Seconds )
{
    stopwatch.Start();
    Start();
    timeGone = stopwatch.Elapsed;
}
Stop();//your method which will stop listening 
```

**一些有用的链接**
[MSDN 秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-07T16:19:30.883

更好的是，您可以使用以下代码，这将有助于提高性能。

```
System.Threading.Thread.Sleep(TimeSpan.FromSeconds(2)); 
```

# android - Android 服务在 Android 2.3.3 中退出

> ID：13218937
> 
> 赞同：0
> 
> 时间：2012-11-04T13:28:41.283
> 
> 标签：android, service

我有 Android 服务每 9 分钟运行一次并发送电子邮件，但经过一些周期后它会退出。这个应用程序也安装在我的 Android froyo 中，但它现在已经运行了两个多月了。我可以在 logcat 中看到服务退出的日志，但我的问题是我不明白它是什么意思。有人可以帮我解决这个问题? 谢谢！！任何帮助，将不胜感激...

这是我的源代码： [https ://gist.github.com/77a40ac93cd311acb56c](https://gist.github.com/77a40ac93cd311acb56c)

Logcat 日志：

[https://gist.github.com/dd3ab385d79253fac632](https://gist.github.com/dd3ab385d79253fac632)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:06:01.450

使用背后的要点`AlarmManager`是，您的服务只需要在实际工作时在内存中，并且可以在`AlarmManager`事件之间消失。您已经设法不这样做，因此您的代码将无法可靠地工作。

如果您想“每 9 分钟发送一次电子邮件”，您应该：

1.  将 移动`BroadcastReceiver`为公共 Java 类，通过`<receiver>`元素在清单中注册，并删除`registerReceiver()`/`unregisterReceiver()`东西。

2.  将您的服务切换为`IntentService`，因此您可以获得一个后台线程（您的工作需要它，但您当前的代码缺少），因此当没有更多工作要做时，该服务可以自动关闭。

3.  添加您需要的逻辑，`WakeLock`因为您使用的是`_WAKEUP`-style 警报。[如果您愿意，可以通过切换到my`WakefulIntentService`](https://github.com/commonsguy/cwac-wakeful)来组合此步骤和前面的步骤。

4.  处理用户重新启动设备的情况，如果您希望警报在重新启动后继续，例如通过`ACTION_BOOT_COMPLETED` `BroadcastReceiver`.

# objective-c - 使用 contentsOfDirectoryAtPath 搜索可见文件并将它们存储在 Objective-C NSArray

> ID：13218938
> 
> 赞同：0
> 
> 时间：2012-11-04T13:28:53.533
> 
> 标签：objective-c, file, nsarray, finder

> **可能重复：**
> [使用 obj-c 忽略隐藏文件和目录](https://stackoverflow.com/questions/8053820/ignore-hidden-files-and-directories-with-obj-c)

我正在将文件夹的内容加载到数组中：

```
 NSString *asWindowName = [_errMessage stringValue] ; 
    //which returns the correct folder path '/Users/ronny/Desktop/FLVs'

    NSError *error = nil;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSArray *atFilesOriginal   = [fileManager
                           contentsOfDirectoryAtPath:asWindowName
                           error:&error]; 
```

这就是我得到的：

```
".DS_Store",
".flv",
"File-170184.mp4",
"File-758f10cee9011a66f91dd8e01c6b5427.mp4",
"File2.webloc",
"File-c71e8.mp4",
"File-.webloc" 
```

我想知道是否有可能只获得可见文件。

有什么线索吗？蒂亚，罗纳德

# php - 使用 ksoap 调用 PHP SOAP Web 服务的 Android 失败：'procedure'CheckLogin' not found

> ID：13218942
> 
> 赞同：1
> 
> 时间：2012-11-04T13:29:27.737
> 
> 标签：php, android, web-services, wsdl, ksoap2

我正在尝试调用 PHP SOAP 网络服务。我知道我的 web 服务功能正确，因为我在 WPF 项目中成功使用了它。我还在使用相同的 web 服务在 android 中构建一个应用程序。

可以在此处找到 WSDL 文件：[http ://www.wegotcha.nl/servicehandler/service.wsdl](http://www.wegotcha.nl/servicehandler/service.wsdl)

这是我在 android 应用程序中的代码：

```
String SOAP_ACTION = "http://www.wegotcha.nl/servicehandler/CheckLogin";
        String NAMESPACE = "http://www.wegotcha.nl/servicehandler";
        String METHOD_NAME = "CheckLogin";
        String URL = "http://www.wegotcha.nl/servicehandler/servicehandler.php";
        String resultData = "";

        SoapSerializationEnvelope soapEnv = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        SoapObject UserCredentials = new SoapObject("Types", "UserCredentials6");
        UserCredentials.addProperty("mail", params[0]);
        UserCredentials.addProperty("password", md5(params[1]));

        request.addSoapObject(UserCredentials);
        soapEnv.setOutputSoapObject(request);

        HttpTransportSE http = new HttpTransportSE(URL);
        http.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"utf-8\"?>");
        http.debug = true;

        try {
            http.call(SOAP_ACTION, soapEnv);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        }

        SoapObject results = null;
        results = (SoapObject)soapEnv.bodyOut;

        if(results != null)
            resultData = results.getProperty(0).toString();

        return resultData; 
```

使用提琴手我得到以下信息： Android 请求：

```
<?xml version="1.0" encoding="utf-8"?>
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/"><v:Header />
<v:Body>
<n0:CheckLogin id="o0" c:root="1" xmlns:n0="http://www.wegotcha.nl/servicehandler">
<n1:UserCredentials6 i:type="n1:UserCredentials6" xmlns:n1="Types">
    <mail i:type="d:string">myemail</mail>
    <password i:type="d:string">myhashedpass</password>
</n1:UserCredentials6>
</n0:CheckLogin>
</v:Body>
</v:Envelope> 
```

得到以下响应：

```
 Procedure 'CheckLogin' not present 
```

我的 WPF 应用程序生成的请求看起来完全不同：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
<s:Body xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<UserCredentials6 xmlns="Types">
    <mail>mymail</mail>
    <password>mypassword</password>
</UserCredentials6>
</s:Body>
</s:Envelope> 
```

在谷歌搜索我的屁股后，我无法自己解决这个问题。我的 Java 代码中可能有一些奇怪的东西，因为从那以后我改变了很多。我希望你们能帮助我，谢谢。

编辑：

我的网络服务是文档/文字编码风格，在做了一些研究后我发现我应该能够使用`SoepEnvelope`而不是`SoapSerializationEnvelope`虽然当我替换它时，我在尝试缓存块之前得到一个错误，导致我的应用程序崩溃。

错误：

11-04 16:23:26.786: E/AndroidRuntime(26447): 由: java.lang.ClassCastException: org.ksoap2.serialization.SoapObject 无法转换为 org.kxml2.kdom.Node

这是由这些行引起的：

```
request.addSoapObject(UserCredentials);
soapEnv.setOutputSoapObject(request); 
```

不过，这可能是一个解决方案，我该怎么做呢？除了这个很棒的教程之外，我没有发现关于使用 SoapEnvelope 而不是 SoapSerializationEnvelope 的任何信息：

[http://ksoap.objectweb.org/project/mailingLists/ksoap/msg00849.html](http://ksoap.objectweb.org/project/mailingLists/ksoap/msg00849.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:49:48.983

刚刚发生了一些奇怪的事情。我只是删除了 a 行（我做了数千次）调整了其余部分，因为我遇到了一些新错误并且我得到了以下代码：

```
String SOAP_ACTION = "http://www.wegotcha.nl/servicehandler/CheckLogin";
String NAMESPACE = "http://www.wegotcha.nl/servicehandler";
String METHOD_NAME = "CheckLogin";
String URL = "http://www.wegotcha.nl/servicehandler/servicehandler.php";
String resultData = "";

SoapSerializationEnvelope soapEnv = new SoapSerializationEnvelope(SoapEnvelope.VER11);

SoapObject UserCredentials = new SoapObject("Types", "UserCredentials6");
UserCredentials.addProperty("mail", params[0]);
UserCredentials.addProperty("password", md5(params[1]));

// changed these lines
// request.addSoapObject(UserCredentials);
// soapEnv.setOutputSoapObject(request);
// into:
soapEnv.setOutputSoapObject(UserCredentials);

HttpTransportSE http = new HttpTransportSE(URL);
http.debug = true;

// little tweak here        
String results = null;
try {
    http.call(SOAP_ACTION, soapEnv);
    //another tweak here
results = soapEnv.bodyIn.toString();
} catch (IOException e) {
    e.printStackTrace();
} catch (XmlPullParserException e) {
    e.printStackTrace();
}

if(results != null)
    resultData = results;

return resultData; 
```

现在我可以正确登录了 :) 它们不是非常实用的解决方法，因为这是唯一可以让我回复“是”或“否”的地方。想想复杂类型的数组等。但那是另一回事了。

# wordpress - Wordpress Gantry - 如何将主体分成 2 部分？

> ID：13218946
> 
> 赞同：0
> 
> 时间：2012-11-04T13:30:15.947
> 
> 标签：wordpress

用于wordpress问题的龙门：

我爱上了 Gantry - wordpress 主题，它非常流畅且可配置。我不使用它作为博客的基础，而是一个简单的网页。

但是有一个我想不通的问题，我可以配置所有元素，如标题、徽标、导航等，并将它们拼凑成几个元素。

但是内容（页面）将始终显示为中间的一个全宽元素，我真正想做的是将主体拆分为 2 个“表格”，而内容仅显示在 ex. 一个400像素宽的盒子，然后有一张图片显示的公关。页面在剩余的 est. 右侧 300 像素。

在龙门设置菜单中，我可以进入并调整“主体”，但它似乎根本不适用于内容，无论我将其设置为什么并且不知道如何能够将元素添加到其中，因为“主体”不是您可以配置的小部件。

希望有人可以提供帮助 - 非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T03:23:16.813

您无法将主要组件拆分为两个位置，但是您可以使用侧边栏，或者您可以使用主体顶部和主体底部位置，最后两个位置可以拆分为 3 个完全相同的位置......我的最好的建议是您使用侧边栏.. 然后您可以在主题设置中管理哪些宽度和位置。

# jquery - 如何删除“图像 1/15”但在 FancyBox 画廊中保留标题

> ID：13218949
> 
> 赞同：0
> 
> 时间：2012-11-04T13:30:47.983
> 
> 标签：jquery, wordpress, plugins, fancybox

我在 WP Village 主题中使用 FancyBox 画廊。

目前，我有`title`并且`image 1/15`......我需要保留`title`并删除“ `image 1/15`”......知道吗？？？？

一些帮助将不胜感激！！！！

提前致谢

和风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T06:49:22.320

使用下面的代码..只需在注释行代码中删除隐藏图像 1 of 1...

```
afterLoad : function() {
    //this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');

    // **Solutions**

    this.group.length + (this.title ? ' - ' + this.title : '');
} 
```

# c++ - 如何将矩阵旋转 90 度？

> ID：13218951
> 
> 赞同：3
> 
> 时间：2012-11-04T13:30:51.400
> 
> 标签：c++

> **可能重复：**
> [如何旋转二维数组？](https://stackoverflow.com/questions/42519/how-do-you-rotate-a-two-dimensional-array)

C++ 初学者，需要旋转 90 度，我已经尝试在此处的其他帖子的帮助下进行操作，但没有运气。对不起英语

```
 # define D 9

int Ta [D][D];
short i, j;
short c=1;

for ( i=0; i < D ; i++)  {
    for ( j = 0 ;  j < D; j++)

    if ((j>i) && (j<D-i-1))  Ta[i][j]=c++; 
    else if((j>D-i-1) && (j<i)) Ta[i][j]=c++;
        else Ta[i][j]=0;  

}

for ( i = 0; i < D; i++) {
    for ( j= 0; j < D; j++) {
        printf("%3d",Ta[i][j]);
    }
    printf("\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:04:31.337

答案是：感谢 Adam Liss

```
int r[D][D];

for (i=0; i<D; ++i) {
    for (j=0; j<D; ++j) {
        r[i][j] = t[D-j-1][i];
    }
} 
```

# actionscript-3 - 使用 as3 更改屏幕分辨率

> ID：13218952
> 
> 赞同：0
> 
> 时间：2012-11-04T13:30:55.653
> 
> 标签：actionscript-3, screen-resolution

我不确定它是否可能，但有没有办法使用 as3 更改屏幕分辨率？就像您在全屏模式下运行 swf 一样，它显示在 1024 x 768 屏幕上，而不是电脑的实际分辨率。（我的意思是一旦它处于全屏模式）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T15:09:12.327

尝试

```
stage.fullScreenSourceRect = new Rectangle(0, 0, someWidth, someHeight);
stage.displayState = StageDisplayState.FULL_SCREEN; 
```

# c# - 类型推断是在类的范围内推断，但不是方法，尽管它们是一样的？

> ID：13218954
> 
> 赞同：2
> 
> 时间：2012-11-04T13:31:10.117
> 
> 标签：c#, c#-4.0, type-inference, generic-constraints

好吧，我一定是把标题弄错了。更多的代码，更少的文字：

```
public class Manager<T> where T : Control, new()
{
    void Manage()
    {
        Do(t => IsVisible(t));
    }

    bool IsVisible(T t)
    {
        return t.Visible;
    }

    S Do<S>(Func<T, S> operation)
    {
        return operation(new T());
    }
} 
```

编译器很高兴`Do`. 它可以很容易地推断出`T`类型。现在让我们说我有这个：

```
public static class Util
{
    static void Manage()
    {
        Do(t => IsVisible(t)); //wiggly line here
    }

    static bool IsVisible<T>(T t) where T : Control
    {
        return t.Visible;
    }

    static S Do<S, T>(Func<T, S> operation) where T : Control, new()
    {
        return operation(new T());
    }
} 
```

编译器希望现在显式键入类型。这是我的想法：

*在第一个类`T`中，很容易从`IsVisible`具有`T`重载并且`T`在整个`Manager`类中都知道的方法中推断出来，没什么大不了的。但在第二种情况下`T`，它被指定为方法的通用约束，可能更难推断。行。*

但这也不起作用：

```
public static class Util
{
    static void Manage()
    {
        Do(t => IsVisible(t)); //still wiggly line
    }

    static bool IsVisible(Control t)
    {
        return t.Visible;
    }

    static S Do<S, T>(Func<T, S> operation) where T : Control, new()
    {
        return operation(new T());
    }
} 
```

1.  为什么编译器`T`在最后一种情况下不推断？

2.  更重要的是，最后一个案例与第一个案例有何不同？在第一种情况下，编译器必须从`IsVisible`方法中推断出它，然后一直返回以检查`T`包含 的类中的内容，而在最后一种情况下，它在方法`IsVisible`中很容易获得。`IsVisible`所以我认为第三种情况比第一种更容易。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T13:48:27.383

（第一种情况）

> 编译器对 Do 很满意。它可以很容易地推断出 T 型。

这根本不是推断`T`。`T`是类的类型参数：

```
public class Manager<T> where T : Control, new() 
```

（第二种情况）

> 编译器希望现在显式键入类型。

我假设您的意思是在管理代码中：

```
Do(t => IsVisible(t)) 
```

没错。你认为*这里*的类型`T`应该是什么？您希望编译器如何推断它？

（第三种情况，方法是`IsVisible(Control t)`）

> 为什么编译器在最后一种情况下不推断 T ？

它不能仅从参数中做到这一点。听起来您希望它能够计算出 lambda 表达式的主体可以工作的每种类型……而类型推断根本就不能那样工作。您可以轻松地为编译器提供足够的信息：

```
 Do((Control t) => IsVisible(t)); 
```

> 更重要的是，最后一个案例与第一个案例有何不同？

在第一种情况下，`T`不是`Do`方法的类型参数。编译器*只*需要推断`S`，它可以从 lambda 表达式的返回类型中完成。它不需要对 执行任何推断`T`，因为这已经“已知”。（它仍然是通用的，但它不是需要*为该方法调用*推断的东西。）首先`T`在构造实例时需要提供类型`Manager`，因此它有效地推动了该决定。

有关类型推断的所有详细信息，请参阅 C# 4 规范的第 7.5.2 节（或 C# 3 或 C# 5 规范中的等效部分）。不过我建议先喝一杯浓咖啡:)

# javascript - 表单不断收到提交事件而不按提交按钮

> ID：13218972
> 
> 赞同：0
> 
> 时间：2012-11-04T13:33:34.103
> 
> 标签：javascript, jquery

我正在尝试制作一个表单，因此当用户单击按钮时它将提交，但问题是即使我没有按下提交按钮，它也会继续运行。这是我的代码

```
$(function () {
var url, container, form,
    View = {
        init: function () {
            container   = $('.container');
            form        = $('.search#form');
            console.log(form);
            View.loadViews();
            $(document).on('submit', '#form', View.findView());
        },
        findView: function () {
            console.log('helllo');
            return false;
        },
        loadViews: function (view) {
            $(container).load('search.html');
        }
    };
View.init();
}); 
```

在上面的代码中，该行`$(document).on('submit', '#form', View.findView());`一直调用 findView() 方法，而我想在用户单击提交按钮时调用它。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T13:34:39.467

当您使用 绑定它时`$(document).on('submit', '#form', View.findView());`，您实际上是在调用函数并尝试将提交事件绑定到函数返回的内容，这是不正确的。既然`findView()`是返回`false`，这就相当于说`$(document).on('submit', '#form', false);`

您需要`View.findView()`像下面这样绑定：

```
$(document).on('submit', '#form', View.findView); // note, no () at the end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T13:35:02.757

你应该传递函数的引用而不是函数的返回值。

`$(document).on('submit', '#form', View.findView);`

# git - Git (DVCS) 最佳实践

> ID：13218973
> 
> 赞同：0
> 
> 时间：2012-11-02T21:56:03.510
> 
> 标签：git, github, dvcs, branch

我是 Github 的新手，最近分叉了某人的项目以进行我自己的更改。现在虽然我知道在新分支中创建每个新功能或错误修复是最佳实践。到目前为止，我只是在 Master 中进行编辑。

如何从我的 Master 创建一个新分支，然后再次用上游代码存储库替换我编辑的 master？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:10:57.543

假设上游回购是`origin`......

```
git branch some_feature
git reset origin/master 
```

现在您的分支是远程 master 分支所在的位置，并且您的代码在分支上`some_feature`。

# mysql - 错误 mysql：得到一个大于“max_allowed_pa cket”字节的数据包

> ID：13218975
> 
> 赞同：7
> 
> 时间：2012-11-04T13:33:56.393
> 
> 标签：mysql, mysqldump, mysql-error-1064

对于导入 mysql 数据库，给我这个错误：

```
$ `mysql -u user -p password zxc_db < zxc.sql`
ERROR 1153 (08S01) at line 96: Got a packet bigger than 'max_allowed_packet' bytes 
```

请给我一个最好的解决方案来解决它？坦克。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-04T13:41:08.920

最好的解决方案是“更改 mysql.cnf”debian：/etc/mysql/mysql.cnf 将此行 ==> 更改`max_allowed_packet = 16M` 为：`max_allowed_packet = 128M`

或将 --max_allowed_pa​​cket=128M 添加到您的 mysqldump 命令中。

```
mysql --max_allowed_packet=128M -u user -ppass database < database.sql 
```

# wpf - button isEnabled = true 在没有鼠标点击的情况下不起作用 WPF MVVM

> ID：13218977
> 
> 赞同：3
> 
> 时间：2012-11-04T13:34:30.917
> 
> 标签：wpf, user-interface, mvvm

我有基于 MVVM 模式的 wpf 应用程序。我有烦人的问题，我不知道该如何解决。

我的应用程序是向导应用程序，当用户按下“下一步”时，我正在另一个线程（后台工作人员）中开始一些进展，当 bgWorker 启动时，他设置`CanMoveNext = false`绑定到 Next 按钮 isEnabled 属性，当 bgworker 完成时，他设置回 CanMoveNext =真的;

当`CanMoveNext`获取`IsEnabled = false`UI 时立即显示它，但在 isEnabled 属性设置回 true 后，UI 会在鼠标单击或键盘按键后刷新。

在我`m changing the property I`使用`OnPropertyChanged()`方法之后，我什至尝试使用 `CommandManager.InvalidateRequerySuggested();`，但没有鼠标点击它仍然无法刷新。

我怎么解决这个问题？

这是我的代码：

```
 public override bool CanMoveNext
        {
            get
            {
                return canMoveNext;
            }
            set
            {
                canMoveNext = value;
                OnPropertyChanged("CanMoveNext");
            }
        }

    public void StartProgress()
            {

                CanMoveNext = false;
                InitBGworkers(out bgStartPersonalWorker);
    bgStartPersonalWorker.RunWorkerAsync();
    }

        void bgStartPersonalWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            DoStuff();
        }

        void bgStartPersonalWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
                {
     CanMoveNext = true;
//Even  CommandManager.InvalidateRequerySuggested(); doen`t help
                } 
```

//来自 XAML 的代码

```
<Button Content="{Binding ButtonNextCaption}" IsEnabled="{Binding CanMoveNext, UpdateSourceTrigger=PropertyChanged}" Command="{Binding Path=NavigateNextCommand}" Margin="5,0,5,0" Width="100" Height="40" FontSize="14" FontWeight="Bold"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T14:57:47.253

我想如何解决它：

```
 Application.Current.Dispatcher.BeginInvoke(new ThreadStart(() =>
            {
                CommandManager.InvalidateRequerySuggested();

            })); 
```

# android - Android：将按钮放在文本下方而不是在同一行

> ID：13218982
> 
> 赞同：2
> 
> 时间：2012-11-04T13:34:39.223
> 
> 标签：android, xml, android-layout

我正在制作一个简单的 Android 应用程序。

这是 XML 代码：

```
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Score: "
    tools:context=".Adder" />
<TextView
    android:id="@+id/score"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="0"
    tools:context=".Adder" />
<Button
    android:id="@+id/one"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:text="1"
    android:textSize="20dp" />

<Button
android:id="@+id/two"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:text="2"
android:textSize="20dp" /> 
```

这是给出的输出： http: [//flic.kr/p/dqwmT9](http://flic.kr/p/dqwmT9)

但是，我希望按钮出现在“分数：0”下方

我尝试了一些东西，它们给出了输出： http: [//flic.kr/p/dqwbxD](http://flic.kr/p/dqwbxD)

我能做些什么来解决这个问题？

注意：我提供了链接，因为我没有足够的声誉来上传照片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T13:42:49.517

试试这个。实际上，您可以复制并粘贴它。更改属性，您就可以开始了。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/txtScoreLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="5dp"
        android:layout_marginTop="5dp"
        android:text="Score" />

    <TextView
        android:id="@+id/txtScore"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/txtScoreLabel"
        android:layout_marginLeft="5dp"
        android:layout_toRightOf="@+id/txtScoreLabel"
        android:text="0" />

    <Button
        android:id="@+id/one"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/txtScoreLabel"
        android:layout_below="@+id/txtScoreLabel"
        android:text="Button One" />

    <Button
        android:id="@+id/two"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/one"
        android:layout_marginLeft="5dp"
        android:layout_toRightOf="@+id/one"
        android:text="Button Two" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:42:55.123

您想使用`RelativeLayout`然后为显示“分数”的 TextView 分配一个 ID：

```
<TextView
    android:id="@+id/score_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Score: "
    tools:context=".Adder" /> 
```

然后，您根据以下内容为按钮分配位置：

```
<Button
    android:id="@+id/one"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:layout_below="@id/score_text"
    android:text="1"
    android:textSize="20dp" />
<Button
    android:id="@+id/one"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:layout_below="@id/score_text"
    android:layout_toRightOf="@id/one"
    android:text="2"
    android:textSize="20dp" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T16:02:51.003

只需使用相对布局而不是线性布局。

```
<Button
android:id="@+id/one"
android:layout_width="50dp"
android:layout_height="wrap_content"
android:layout_below="@id/score_text"
android:text="1"
android:textSize="20dp" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-04T13:38:33.980

你必须设置

```
android:orientation="vertical" 
```

到父布局（如果它是 a `LinearLayout`）。如果您的父 Layout 是`RealativeLayout`您必须设置的

```
android:below="id of the view above" 
```

到你想要在下面的按钮`TextView`。

编辑（因为您的 ParentLayout 是 a `LinearLayout`）：

```
 <LinearLayout
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:orientation="vertical"
    >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="Score: "
        tools:context=".Adder" />
    <TextView
        android:id="@+id/score"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="0"
        tools:context=".Adder" />
    <LinearLayout
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:orientation="horizontal"
    >

    <Button
        android:id="@+id/one"
        android:layout_width="50dp"
        android:layout_height="wrap_content"
        android:text="1"
        android:textSize="20dp" />

    <Button
    android:id="@+id/two"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:text="2"
    android:textSize="20dp" />
    />

/> 
```

# iphone - 将动画精灵面旋转到对象

> ID：13218993
> 
> 赞同：1
> 
> 时间：2012-11-04T13:35:53.880
> 
> 标签：iphone, ios, cocos2d-iphone, sprite

我有我的动画精灵：

```
 #import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface Raider : CCSprite
{
    NSUInteger baseX;
    NSUInteger baseY;
    BOOL takeItem;
    CCAction *_walkAction;
    CCAction *_moveAction;
    CCAnimation *walkAnim;
}

@property (nonatomic) NSUInteger baseX;
@property (nonatomic) NSUInteger baseY;
@property (nonatomic) BOOL takeItem;
- (id) initRaider:(NSUInteger)x andY: (NSUInteger)y;
- (void) setTaken;
@property (nonatomic, retain) CCAction *walkAction;
@property (nonatomic, retain) CCAction *moveAction;
@property (nonatomic, retain) CCAnimation *animation;

-(void)stopAnim;
-(void)startAnim;

@end 
```

还有攻略.m

```
#import "Raider.h"

@implementation Raider
@synthesize baseX;
@synthesize baseY;
@synthesize takeItem;
@synthesize moveAction = _moveAction;
@synthesize walkAction = _walkAction;
@synthesize animation = walkAnim;

- (id) initRaider:(NSUInteger)x andY: (NSUInteger)y
{
    [self initWithFile:@"10001.png"];
    self.walkAction = nil;
    self.animation = nil;
    self.position = ccp(x,y);
    baseX = x;
    baseY = y;
    takeItem = NO;

    [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"pirate.plist"];
    NSMutableArray *walkAnimFrames = [NSMutableArray array];
    for(int i = 1; i <= 9; ++i)
    {
        [walkAnimFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:
                                   [NSString stringWithFormat:@"1000%d.png", i]]];
    }
    self.animation = [CCAnimation animationWithFrames:walkAnimFrames delay:0.1f];
    self.walkAction = [CCRepeatForever actionWithAction: [CCAnimate actionWithAnimation:walkAnim restoreOriginalFrame:NO]];
    [self runAction:_walkAction];
    return self;
}

- (void) setTaken
{
    [self setTexture:[[CCTextureCache sharedTextureCache] addImage:@"raiderItem.png"]];
}

-(void)stopAnim
{
    [self pauseSchedulerAndActions];
}

-(void)startAnim
{
    [self resumeSchedulerAndActions];

}

@end 
```

在我的场景中，我在中心有一个物体。我需要将所有对象面向中心旋转，然后我们将它们到达中心旋转它们回到生成点。那么，如何将动画精灵旋转到任何其他精灵的中心？您可以看到屏幕截图现在的样子： ![在此处输入图像描述](../Images/0371614f27bb72fef5d31aeee79ec618.png)

# facebook - FB 分享此链接不获取帖子描述和拇指

> ID：13218999
> 
> 赞同：0
> 
> 时间：2012-11-04T13:36:39.977
> 
> 标签：facebook, wordpress, sharethis

在 wordpress 网站上，我正在使用 sharethis 插件...

[http://support.sharethis.com/customer/portal/articles/446440-wordpress-integration](http://support.sharethis.com/customer/portal/articles/446440-wordpress-integration)

FB Share Link Button 不获取并在 facebook 上显示帖子描述和图像的地方。

任何想法/提示可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:32:18.500

请将此函数添加到您的functions.php 文件中。

```
function wpc_fb_opengraph() {
$wpc_image_url = wp_get_attachment_image_src( get_post_thumbnail_id(), 'large');
?>
<meta property="og:title" content="<?php the_title(); ?>" />
<meta property="og:url" content="<?php the_permalink(); ?>" />
<meta property="og:site_name" content="<?php bloginfo('name'); ?>" />
<meta property="og:description" content="<?php echo strip_tags(get_the_excerpt($post->ID)); ?>" />
<meta property="fb:app_id" content="APP ID HERE">
<meta property="fb:admins" content="YOUR FB USER ID (OR USERNAME) HERE"/>
<meta property="og:image" content="<?php echo $wpc_image_url[0] ?>"/>
<?php }

add_action('wp_head', 'wpc_fb_opengraph'); 
```

注意：如果您的网页还没有任何 facebook 应用程序，则不必使用此行。

```
<meta property="fb:app_id" content="APP ID HERE">
<meta property="fb:admins" content="YOUR FB USER ID (OR USERNAME) HERE"/> 
```

快乐的WordPress..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T13:39:05.847

如果您还没有，您可能想尝试实现 Open Graph Meta Tags - 如果无法自动解析，它将向 Facebook 的服务器提示您想要显示的内容。

这里的信息：http: [//davidwalsh.name/facebook-meta-tags](http://davidwalsh.name/facebook-meta-tags)