# StackOverflow 问答 13971000-13971999

# mysql - Mysql统计一段时间内的行数

> ID：13971001
> 
> 赞同：0
> 
> 时间：2012-12-20T11:16:44.910
> 
> 标签：mysql, select, period

假设我有一个看起来像的用户表

```
userID int(4) unsigned not null auto_increment,
name varchar(50) not null,
date_start int(10) unsigned not null,
date_stop int(10) unsigned not null 
```

我想统计每月所有活跃的用户（在 date_start 和 date_stop 之间，这些是 unix_timestamps()）。

所以结果应该是这样的：

```
2012/01    55
2012/02    58
2012/03    51 
```

我会说这样的话，但显然我错过了一些东西：

```
SELECT 
    DATE_FORMAT(???, '%Y/%m'), 
    COUNT(userID) 
FROM users 
WHERE 
    ??? BETWEEN date_start AND date_stop 
GROUP BY DATE_FORMAT(???, '%Y%m'); 
```

...只是为了澄清，对我有用的是：

```
SELECT m.yearMonth, COUNT(u.userID) 
FROM users u 
LEFT JOIN months m ON m.yearMonth BETWEEN DATE_FORMAT(FROM_UNIXTIME(u.date_start), '%Y%m') AND DATE_FORMAT(FROM_UNIXTIME(u.date_stop), '%Y%m') 
GROUP BY m.yearMonth; 
```

使用以 yyyymm 形式存储“所有”年/月的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:37:12.657

首先，您应该有一个表格，其中包含`yyyyMM`格式的年、月详细信息。然后，您需要将该表与用户表连接起来，其中 yyyyMM 部分`date_start`小于月份表中的值且`date_end`大于或等于月份表中的值。

这将计算一个活跃超过一个月的用户，每月一次，我认为这是您所期望的。

```
CREATE TABLE months(yearMonth INT);
INSERT INTO months VALUES(201201);
INSERT INTO months VALUES(201202);
INSERT INTO months VALUES(201203);
....

SELECT m.yearMonth, COUNT(*) 
FROM 
    months m, users u
WHERE
    m.yearMonth >= CONVERT(INT, 
                        CONVERT(VARCHAR(4), DATEPART(yy, date_start) + 
                        CONVERT(VARCHAR(2), DATEPART(mm, date_start)
                      )
AND m.yearMonth <= CONVERT(INT, 
                        CONVERT(VARCHAR(4), DATEPART(yy, date_end) + 
                        CONVERT(VARCHAR(2), DATEPART(mm, date_end)
                      ) 
```

注意：这是 SQL Server，但我猜你应该能够获得 CONVERT/DATEPART 函数的 MySQL 对应项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:27:10.147

尝试类似的东西

```
 SELECT DATE_FORMAT(???, '%Y/%m') , userID 
     FROM users 
     WHERE ??? BETWEEN '2012/01' AND '2012/05' 
     GROUP BY DATE_FORMAT(???, '%Y%m'); 
```

你是对的只是不要使用`count(userID)`

**编辑：**

您的数据库中缺少一列。应该是`last_active_date`这样，当用户登录时，它将更新此日期，`last_active_date`并且您知道他在该日期处于活动状态。

现在在你的 sql 中，你不知道他们是活跃的还是他们什么时候登录的？如果您将拥有此列，它将与您的 sql 中的一样

```
 WHERE last_active_date BETWEEN '2012/01' AND '2012/05' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:01:55.707

您可以为此创建表和触发器。在添加 active_user 的地方，您必须增加表中的值。关于用户退出减量。在此步骤之后，用户的计数将是表中的当前值。

这样可以节省您的时间（因为“介于”不是大表的精简操作（并且如果您在字段 date_start 上没有索引））。

# jquery - mac上firefox中的一个jquery选择选项元素错误

> ID：13971002
> 
> 赞同：2
> 
> 时间：2012-12-20T11:16:50.340
> 
> 标签：jquery, firefox

我有这个选择元素，它在更改时发送一个 ajax 调用并做一些事情，选择元素在 firefox、google chrome 和 IE（windows）上工作正常，但在 mac 上的 firefox 中不起作用，没有任何反应，我做了不知道为什么。如果有人可以指导我完成此操作，或者这是一个常见的错误，请提前感谢您。准备好我所做的文件

```
$("#r_one").next().attr({
        'for': "r_one",
    'className' : "myClass" 
    });
   var r_one = $("label[for='r_one']").contents();
$('#mySelect').change(function(){
      r_one[r_one.length-1].nodeValue = "myLabel";
    }); 
```

还有其他代码行，例如通过 ajax 和 shwo & hide 验证表单

# php - PHP服务器端帖子

> ID：13971003
> 
> 赞同：2
> 
> 时间：2012-12-20T11:16:52.717
> 
> 标签：php, payment-gateway

我正在尝试让服务器端 POST 在 PHP 中工作。我正在尝试将交易数据发送到支付网关，但我不断收到以下错误：

> 消息：：`fopen(https://secure.ogone.com/ncol/test/orderstandard.asp)`打开流失败：HTTP 请求失败！HTTP/1.1 411 长度要求

代码：

```
$opts = array(
    'http' => array(
        'Content-Type: text/html; charset=utf-8',
        'method' => "POST",
        'header' => "Accept-language: en\r\n" .
        "Cookie: foo=bar\r\n"
     )
);

$context = stream_context_create($opts);

$fp = fopen('https://secure.ogone.com/ncol/test/orderstandard.asp', 'r', false, $context);
fpassthru($fp);
fclose($fp); 
```

尝试了一些在网上找到的解决方案 - 主要是在黑暗中拍摄，所以到目前为止还没有运气！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:32:16.873

只需添加内容长度。一旦你真正开始发送内容，你就需要计算它的长度。

```
$data = "";
$opts = array(
    'http' => array(
        'Content-Type: text/html; charset=utf-8',
        'method' => "POST",
        'header' => "Accept-language: en\r\n" .
        "Cookie: foo=bar\r\n" .
        'Content-length: '. strlen($data) . "\r\n",
        'content' => $data
     )
);

$context = stream_context_create($opts);

$fp = fopen('https://secure.ogone.com/ncol/test/orderstandard.asp', 'r', false, $context);
fpassthru($fp);
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:33:30.740

指定`content`选项，您的代码应该可以工作。无需指定`Content-length`，PHP 会为您计算：

```
$opts = array(
    "http" => array(
        "method" => "POST",
        "header" =>
            "Content-type: application/x-www-form-urlencoded\r\n" .
            "Cookie: foo=bar",
        "content" => http_build_query(array(
            "foo" => "bar",
            "bla" => "baz"
        ))
    )
); 
```

笔记：

*   在上面的示例中，`Content-length: 15`即使没有明确指定，服务器也会收到标头。
*   POST 数据的内容类型通常是`application/x-www-form-urlencoded`.

# c# - 如何在 C# .NET 中解析 Json

> ID：13971006
> 
> 赞同：0
> 
> 时间：2012-12-20T11:17:06.140
> 
> 标签：c#, .net, json, visual-studio-2010

我在 C# 中工作。我想在我的应用程序中解析 JSON。但不知道如何解析 Json。我在谷歌上搜索了很多但找不到足够的材料。我的 JSon 是..

```
[{"id":"267","name":"Macmillan Nursing Service","telephone":"01595 743347",
"addr1":"Gilbert Bain Hospital","town":"Shetland","postcode":"ZE1 0TB",
"lat":"60.1505513","lng":"-1.1546642","distance":"3278.42778426762"},

{"id":"355","name":"Orkney Macmillan House","telephone":"01856 888249",
"addr1":"Balfour Hosptial","town":"","postcode":"KW15 1BH","lat":"58.9767143",
"lng":"-2.9649377","distance":"3421.52913012431"},

{"id":"57",
"name":"Community Macmillan Nurse","telephone":"01779 482568",
"addr1":"Peterhead Health    Centre","town":"Peterhead",
"postcode":"AB422XA","lat":"57.5034159","lng":"-1.7939854",
"distance":"3425.64696427705"},

{"id":"287","name":"Macmillan
Service","telephone":"01955 880397","addr1":"Caithness
General Hospital","town":"Wick","postcode":"KW1 5NS","lat":"58.4415",
"lng":"-3.09651","distance":"3452.34795736445"},

{"id":"288","name":"Macmillan Service",
"telephone":"01888 564015","addr1":"The Health Centre","town":"Banff","postcode":"AB45  
1HY","lat":"57.6686963","lng":"-2.5256111","distance":"3457.45181828202"}] 
```

我被困在这项工作中，请帮助我..

任何帮助都会很棒。或者关于如何解析 Json 的一点线索也足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:21:22.680

使用出色的[Json.net](http://james.newtonking.com/projects/json-net.aspx)库。

> 特征
> 
> ```
> Flexible JSON serializer for converting between .NET objects and JSON
> LINQ to JSON for manually reading and writing JSON
> High performance, faster than .NET's built-in JSON serializers
> Write indented, easy to read JSON
> Convert JSON to and from XML
> Supports .NET 2, .NET 3.5, .NET 4, Silverlight and Windows Phone 
> ```
> 
> 当您正在读取或写入的 JSON 映射到 .NET 类时，序列化程序是一个不错的选择。
> 
> LINQ to JSON 适用于您只对从 JSON 获取值感兴趣、没有要序列化或反序列化到的类、或者 JSON 与您的类完全不同并且您需要从您的类中手动读取和写入的情况对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:28:39.160

似乎您需要将 JSON 字符串反序列化为对象。您可以创建一个代表对象的类，然后将 json 反序列化为它。

就像是

```
class Information
{
   int id;
   string name;
   string telephone;
   // etc
} 
```

然后用这样的东西反序列化

```
JavaScriptSerializer json_serializer = new JavaScriptSerializer();
// Using List<T> as the JSON is organised like an array
List<Information> info = (List<Information >)json_serializer.DeserializeObject(JSONFeed); 
```

`JSONFeed`网站上的 json 字符串在哪里。

有关更深入的方法，请参阅 -[代码项目教程](http://www.codeproject.com/Tips/79435/Deserialize-JSON-with-C)

# ios - 在后台截屏 (iOS) - 提高性能

> ID：13971013
> 
> 赞同：3
> 
> 时间：2012-12-20T11:17:36.750
> 
> 标签：ios, ios5, ios4, screenshot, iphone-privateapi

这个问题是以下内容的扩展：[从 iOS 应用程序截屏 - 模拟显示记录器（内部查询）](https://stackoverflow.com/questions/13833816/taking-screenshots-from-ios-app-emulating-display-recorder-query-on-the-inter)
有 2 种方法，我遇到了从后台截屏 -

1.  [从 ios 表面创建图像并保存它](https://stackoverflow.com/questions/13872728/creating-an-image-out-of-the-ios-surface-and-saving-it)- 它以非常快的速度捕获（大约 0.2-0.3 秒/ 12-15 个屏幕截图），但是遇到了一些问题，在这里讨论：[释放 IOSurface](https://stackoverflow.com/questions/13952313/releasing-an-iosurface)

2.  以下代码使用 createScreenIOSurface API 执行相同的工作：

    IOSurfaceRef 表面 = [UIWindow createScreenIOSurface]; UIImage *surfaceImage = [[UIImage alloc] _initWithIOSurface:surfaceorientation:UIImageOrientationUp]; CFR 释放（表面）；UIImageSaveToPhotosAlbum(surfaceImage, self, nil, nil);

但是，捕获率很差，大约 0.5-0.7 秒/屏幕截图。

那么，是否有解决方法 1 中面临的问题的方法？
有没有办法提高方法 2 的性能？

# java - java.lang.NullPointerException 错误消息当我尝试用数据库数据填充 java swing 中的表时

> ID：13971016
> 
> 赞同：0
> 
> 时间：2012-12-20T11:17:50.047
> 
> 标签：java, sql, swing

我试图用我的数据库表中的数据填充 java swing 中的 jTable。这是我设置连接的代码。

```
 package DBController.database;

    import java.sql.*;

    public class DBController {
private Connection con;

public void setUp(String dsn) {
    try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");          
    } catch (Exception e) {
        System.out.println("Load driver error");
    }
    try {

        String s = "jdbc:odbc:" + dsn;
        con = DriverManager.getConnection(s, "", "");
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public ResultSet readRequest(String dbQuery) {
    ResultSet rs = null;
    try {
        Statement stmt = con.createStatement();
        rs = stmt.executeQuery(dbQuery);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return rs;
}

public int updateRequest(String dbQuery) {
    int count = 0;
    try {
        Statement stmt = con.createStatement();
        count = stmt.executeUpdate(dbQuery);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return count;
}

public void terminate() {
    try {
        con.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

}

这是我尝试为 sql 语句编写的代码。

```
 public boolean retrieveDiscussion() {
    boolean success = false;
    ResultSet rs = null;
    DBController db = new DBController();
    db.setUp("IT Innovation Project");
    String dbQuery = "SELECT * FROM forumTopics WHERE topic_description = '" + description
            + "' and topic_category = '" + category
            + "' and topic_title = '" + title 
            + "' and topic_by = '" + postedBy + "'";
    rs = db.readRequest(dbQuery);
    db.terminate();
    return success;
} 
```

这是我在用户界面中的表格的代码。

```
 public static void main(String[] args) throws Exception {
    // The Connection is obtained

    eForumTopics topics = new eForumTopics();
    topics.retrieveDiscussion();

    // It creates and displays the table
    JTable table = new JTable(buildTableModel(null));
    JOptionPane.showMessageDialog(null, new JScrollPane(table));

    // Closes the Connection
}
public static DefaultTableModel buildTableModel(ResultSet rs)
throws SQLException {

    ResultSetMetaData metaData = rs.getMetaData();

    // names of columns
    Vector<String> columnNames = new Vector<String>();
    int columnCount = metaData.getColumnCount();
    for (int column = 1; column <= columnCount; column++) {
        columnNames.add(metaData.getColumnName(column));
    }

    // data of the table
    Vector<Vector<Object>> data = new Vector<Vector<Object>>();
    while (rs.next()) {
        Vector<Object> vector = new Vector<Object>();
        for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
            vector.add(rs.getObject(columnIndex));
        }
        data.add(vector);
    }

    return new DefaultTableModel(data, columnNames);

    } 
```

但是，当我尝试运行该应用程序时，它给了我

```
 java.lang.NullPointerException 
```

错误信息。那我该怎么办？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:28:30.760

看起来bug是

```
JTable table = new JTable(buildTableModel(null)); 
```

# configuration - 使用注入类构造的 Guice 模块绑定对象

> ID：13971025
> 
> 赞同：1
> 
> 时间：2012-12-20T11:18:44.037
> 
> 标签：configuration, dependency-injection, guice

我是 Guice 的新手，所以如果这是一个愚蠢的问题，请原谅，但我觉得这很令人沮丧。

在我的模块中，我构造了一个对象，它是我无法控制的框架的成员。然后我绑定该实例，以便以后可以使用 injector.getInstance(FrameworkClass.class); 访问它。

当我构造该对象时，我想使用我自己的对象之一，该对象本身被注释为由构造函数注入。

IE

```
public class MyClass { 
    OtherClass dependency;

    @Inject
    Public MyClass(OtherClass dependency) {
       ....
    }
}

public class AModule extends AbstractModule {

    protected void configure() {
        MyClass frameworkDependency = ???
        FrameworkClass fc = new FrameworkClass(frameworkDependency);
        bind(FrameworkClass.class).toInstance(fc);
    }
} 
```

在此示例中，OtherClass 只是一个没有注释的简单类，但有一个默认的空构造函数，因此据我所知，Guice 应该只新建一个并将其提供给 MyClass 构造函数。

我的问题是如何在我的模块中访问 MyClass 的新实例，以便我可以将它提供给框架类？

以前我通过 Field Injection 注入了我自己的类，所以它看起来像这样：

```
public class MyClass { 

    @Inject
    OtherClass dependency;      
}

public class AModule extends AbstractModule {

    protected void configure() {
        MyClass frameworkDependency = new MyClass();
        requestInjection(frameworkDependency);
        FrameworkClass fc = new FrameworkClass(frameworkDependency);
        bind(FrameworkClass.class).toInstance(fc);
    }
} 
```

如果可能的话，我宁愿将 MyClass 作为构造函数注入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T02:02:12.070

如果您使用一种`@Provides`方法，就像您的答案一样，每个参数都将通过注入器解析 - 包括使用绑定注释的依赖项，并包括类型参数`Provider<MyClass>`而不仅仅是 MyClass。注入`Provider`s 是在一个类中检索依赖项的多个实例的最佳方法。

```
@Provides FrameworkClass provideFrameworkClass(
    Dependency1 dep1, Provider<Dependency2> dep2Provider) {
  return new FrameworkClass(dep1, dep2Provider.get(), dep2Provider.get());
} 
```

如果您的所有绑定都可以通过 Guice 找到，那么您可以或多或少地`@Inject`使用[`toConstructor`绑定](http://code.google.com/p/google-guice/wiki/ToConstructorBindings)在外部标记构造函数。请注意，Guice 文档实际上更喜欢这种`@Provides`技术而不是这种技术，因为反射性地获取构造函数本质上比依赖编译器更脆弱。不过，如果您的参数列表很长，这可能是一个不错的选择。

最后，如果您的 @Provides 方法足够大（或具有足够复杂的逻辑）以值得拥有自己的类，您总是可以创建自己的实现`Provider<FrameworkClass>`--complete 使用尽可能多的`@Inject`离子 -- 并实现创建手动（通过`bind(FrameworkClass.class).toProvider(FrameworkClassProvider.class)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:09:28.767

所以我找到了我自己的问题的答案（以最简单的形式）：

通过将框架对象的配置移动到提供方法中，我可以将 MyClass 对象作为参数传递给方法，并且 Guice 在该参数的实例化中处理，ala：

```
@Provides
@Singleton
FrameworkClass provideFrameworkClass(MyClass dependency) {
    return new FrameworkClass(frameworkDependency);
} 
```

但这引出了一个问题，在更复杂的情况下会发生什么，如果我的框架没有采用单个依赖项，但其中有 n 个（比如说它是一个执行一系列操作的调度程序），我不能只扩展我的 provideFrameworkClass 方法取 n+ 个参数？

# java - 将 View 类对象作为参数传递给按钮调用的方法（视图视图）

> ID：13971026
> 
> 赞同：10
> 
> 时间：2012-12-20T11:18:44.320
> 
> 标签：java, android, xml

我正在尝试为 Android 创建一个应用程序，我按照本教程[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

有一部分

```
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
    // Do something in response to button
} 
```

然后我按照本教程进行操作，一切正常，直到我删除参数`View view`

我的问题是为什么每次我删除它，所以函数就是：

```
/** Called when the user clicks the Send button */
public void sendMessage() {
    // Do something in response to button
} 
```

我运行该应用程序，它强制关闭。

谁能启发我？谢谢你

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T11:27:42.460

如果您仔细查看 XML，您会在按钮上看到以下属性：

```
android:onClick="sendMessage" 
```

这个属性意味着当按钮被点击时，消息

```
public void sendMessage(View view) 
```

被调用。这是因为接口中`onClick`的方法`OnClickListener`需要一个 type 的参数`View`。当您删除参数时，android 仍会尝试调用方法`sendMessage(View view)`，但该方法不再存在，因此您会得到强制关闭。

参数`view`是单击的实际视图（在您的情况下为按钮）。有了这个，您可以分配多个按钮来调用相同的方法，并在方法内检查单击了哪个按钮。

如果您想要没有参数的方法，那么您应该在代码中而不是在 XML 中分配它。将您的 XML 更改为

```
<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/button_send"
    android:id="@+id/send_button" /> 
```

（请注意，`android:onClick`现在已删除并`android:id`添加了属性。）然后在您的`onCreate`方法中的活动中，您将添加以下行：

```
this.findViewById(R.id.send_button).setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        sendMessage();
    }
} 
```

如您所见，要编写的代码要多得多，但如果您需要，它确实为您提供了更大的灵活性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T11:25:36.090

方法（通常称为`onClick(View view)`）方法接受一个参数（与之关联的视图）。有关该功能的更多信息，请参阅[http://developer.android.com/reference/android/view/View.OnClickListener.html](http://developer.android.com/reference/android/view/View.OnClickListener.html)。如果您不使用该参数，您将不会期望它起作用，对吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T11:28:58.713

当你把这种东西放在你的 xml 中时：

```
android:onClick="sendMessage" 
```

android 框架将在您的按钮上添加一个 OnClickListener。这个“自动”生成的 OnclickListener 将尝试使用一个 View 类型的参数调用名为“sendMessage”的方法。

如果此方法不存在，它只会崩溃。

# c# - 跳过断点

> ID：13971027
> 
> 赞同：1
> 
> 时间：2012-12-20T11:18:49.950
> 
> 标签：c#, asp.net, debugging, visual-web-developer-2010

我的 Visual Web Developer Express 2010 项目已经开始跳过断点，无论我把它们放在哪里。例如，断点位于`[*]`：

```
public string login(string username, string password)
{     
   [*] string getCredentialsText = "SELECT [Password], [ID], eraseDevice FROM DeviceUsers WHERE userName = '" + username + "'"; 
```

我已经尝试过这里的建议： [为什么我的 C# 调试器会跳过断点？](https://stackoverflow.com/questions/1199088/why-does-my-c-sharp-debugger-skip-breakpoints)

这里： [http ://forums.asp.net/t/1181935.aspx/1?Breakpoints+not+working](http://forums.asp.net/t/1181935.aspx/1?Breakpoints+not+working)

在这里： [http ://www.mojoportal.com/Forums/Thread.aspx?pageid=5&t=10666~-1](http://www.mojoportal.com/Forums/Thread.aspx?pageid=5&t=10666~-1)

但仍然没有喜悦。

有人有其他想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:24:06.090

我只能想到简单的答案：

*   带有断点的项目是否标记为启动项目？（右键单击-> 设置为启动项目）
*   您是否在解决方案配置下拉菜单中选择了“调试”？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:11:07.550

我最近遇到了这个问题。我发现 Visual Web Developer 不会编译具有已分配但从未使用过的变量的代码，就像它不会编译空方法一样。尝试为它分配另一个变量或在某处使用它并查看断点是否命中。对于那里的解决方案寻求者来说，这只是另一种可能的解决方案。

# rest - 如何使用 WebAPI 保持 REST API 的持久登录会话

> ID：13971031
> 
> 赞同：1
> 
> 时间：2012-12-20T11:19:07.003
> 
> 标签：rest, authentication, asp.net-web-api

我需要能够为与 ASP.NET WebAPI REST 服务通信的移动应用程序提供持久的登录会话。

目前，连接是通过 SSL 进行的，并且用户凭据被传递给 WebAPI 进行身份验证。然后，服务器会使用在会话期间使用的 Api 令牌进行响应。

这一切正常，但我需要让用户能够在登录屏幕上单击“保持登录”复选框。

我最初的想法是简单地将 Api 密钥存储在本地存储中，当返回站点时，在本地存储中查找 Api 密钥并恢复与服务器的通信。只有在注销或取消选中“让我保持登录”复选框时才会清除它。

这有多安全？实现这种系统的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:13:05.440

我为 web api 做了一个会话令牌实现。博客文章说“实验性” - 但是很多人正在使用它并且没有问题，所以也许值得一试。

[http://leastprivilege.com/2012/06/19/session-token-support-for-asp-net-web-api/](http://leastprivilege.com/2012/06/19/session-token-support-for-asp-net-web-api/)

# magento - Magento：如何仅更改标记集合的默认目录列表模式？

> ID：13971037
> 
> 赞同：0
> 
> 时间：2012-12-20T11:19:33.240
> 
> 标签：magento, magento-1.5

1.5 商店使用目录列表模式“网格（默认）/列表”，但我需要使用“列表（默认）/网格”标记显示*的项目集合。

最好仅为特定标签 ID 启用不同的列表模式，但**即使在显示任何标签 ID 时启用此功能，我也可以认为任务已完成。**

> 为了清楚起见，我指的是通过目录视图 `/tag/product/list/tagId/#/ URL`

实现这一目标的最简单方法是什么？我正在使用第三方主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:34:28.903

对于标记的产品列表页面，模板文件是catalog/product/list.phtml，所以首先将catalog/product/list.phtml 复制为catalog/product/list_tagged.phtml。

现在编辑您的 list_tagged.phtml 并在“$_helper = $this->helper('catalog/output');”下方插入以下代码行 36号线左右。

```
$this->getChild('toolbar')->setCurrentMode('list');
// this will set your default mode to list mode 
```

现在您需要编辑您的 tag.xml 布局文件并为产品列表块设置模板文件 list_tagged.phtml。

希望这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:34:43.760

在您的 list.phtml 中，您可以通过以下方式检查您是否在标签页上

```
 if(Mage::registry('current_tag')) 
```

或检查控制器名称

```
<?php Mage::app()->getFrontController()->getRequest()->getControllerName(); ?> 
```

# typo3 - TYPO3 2级菜单生成

> ID：13971040
> 
> 赞同：0
> 
> 时间：2012-12-20T11:19:43.777
> 
> 标签：typo3, typoscript

所以我有这样的页面设置

```
Page(uid=63)
    subpage1
         subpage1-item1
         subpage1-item2
    supgage2
         subpage2-item1
         subpage2-item2 
```

我有以下打字稿：

```
lib.hotelrooms = HMENU
lib.hotelrooms.wrap = <a href="#">Indoor</a><ul> | </ul>
lib.hotelrooms {
    special = directory
    special.value = 63
    1 = TMENU
    1 {
        NO.doNotLinkIt = 1
        NO.wrapItemAndSub = <li><a href="#">|</a></li>           
    }
   2 < .1
   2.wrap = <ul class="level_2">|</ul>

} 
```

我得到的输出类似于

```
<ul>
    <li>
      Subpage1
       <ul>
           <li>subpage1-item1</li>
            <li>subpage1-item2</li>
       </ul>
     </li>

     <li>
      Subpage2
     </li>
</ul> 
```

代替：

```
<ul>
    <li>
      Subpage1
       <ul>
           <li>subpage1-item1</li>
           <li>subpage1-item2</li>
       </ul>
     </li>

     <li>
      Subpage2
        <ul>
           <li>subpage2-item1</li>
           <li>subpage2-item2</li>
       </ul>
     </li>
</ul> 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:08:51.707

默认情况下，TYPO3 只扩展当前页面的子页面。要展开所有子页面，请设置

```
1 {
  expAll = 1
} 
```

# java - Wicket 从文件系统创建图像

> ID：13971043
> 
> 赞同：0
> 
> 时间：2012-12-20T11:20:06.607
> 
> 标签：java, image, wicket

我正在制作一个项目，其中用户在单击产品时会打开带有产品名称的模式窗口。我还想在面板内的模态窗口中包含产品图像。图像存储在我的服务器上的一个目录中。

我指的是这个链接

我的面板 html 代码看起来像这样[http://wicketinaction.com/2011/07/wicket-1-5-mounting-resources/](http://wicketinaction.com/2011/07/wicket-1-5-mounting-resources/)

ItemOrderPanel.html

```
 <div>
            <li><a wicket:id="link"></a></li>
        </div> 
```

ItemOrderPanel.java

```
 final ResourceReference imageResourceReference = new ImageResourceReference();
    String imageName = itm.getProductImage();
    final PageParameters parameters = new PageParameters();
    parameters.set("name", imageName);
    CharSequence urlForImage = getRequestCycle().urlFor(imageResourceReference,parameters);
    ExternalLink link = new ExternalLink("link", urlForImage.toString());
    link.setBody(Model.of(imageName));
    add(link); 
```

在 WicketApplication.java 中

```
mountResource("/orderPage/{name}",new ImageResourceReference()); 
```

我对 WicketApplication.java 中的这一行表示怀疑。

我已经创建了这样的资源文件

ImageResourceReference.java

```
public class ImageResourceReference extends ResourceReference{

public ImageResourceReference(){
    super(ImageResourceReference.class,"imagesDemo");
}

@Override
public IResource getResource() {
    return new ImageResource();
}

private static class ImageResource extends DynamicImageResource{

    private static final long serialVersionUID = 1L;

    @Override
    protected byte[] getImageData(Attributes attributes) {
        PageParameters parameters = attributes.getParameters();
        StringValue name = parameters.get("name");

                    byte[] imageBytes = null;
        if(name.isEmpty() == false)
            imageBytes = getImageAsBytes(name.toString());

        return imageBytes;
    }

    private byte[] getImageAsBytes(String label){
        BufferedImage image = new BufferedImage(800, 600, BufferedImage.TYPE_INT_RGB);
        Graphics2D g = (Graphics2D) image.getGraphics();
        g.setColor(Color.BLACK);
        g.setBackground(Color.WHITE);
        g.clearRect(0, 0, image.getWidth(), image.getHeight());
        //g.setFont(new Font("SansSerif", Font.PLAIN, 48));
        g.drawString(label, 50, 50);
        g.dispose();

        Iterator<ImageWriter> writers = ImageIO.getImageWritersByFormatName("jpeg");
        ImageWriter writer = writers.next();
        if (writer == null) {
            throw new RuntimeException("JPG not supported?!");
        }

        final ByteArrayOutputStream out = new ByteArrayOutputStream();

        byte[] imageBytes = null;
        try {

            ImageOutputStream imageOut = ImageIO.createImageOutputStream(out);
            writer.setOutput(imageOut);
            writer.write(image);
            imageOut.close();
            imageBytes = out.toByteArray();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return imageBytes;

    }

    @Override
    public boolean equals(Object that){
        return that instanceof ImageResource;
    }

} 
```

}

但是当我调试代码时，我发现控制权没有进入返回字节的内部**ImageResource 类。**

我想在我的面板上显示图像图片。我的面板上显示的链接是我存储在本地系统数据库中的链接。

任何帮助和建议表示赞赏！提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T04:49:13.407

最后我在 ItemOrderPanel.java 中确定了这段代码

```
add(new NonCachingImage("img", new AbstractReadOnlyModel<DynamicImageResource>(){
          @Override public DynamicImageResource getObject() {
            DynamicImageResource dir = new DynamicImageResource() {
              @Override protected byte[] getImageData(Attributes attributes) {
                  StringValue name = parameters.get("name");
                  byte[] imageBytes = null;
                    if(name.isEmpty() == false)
                        imageBytes = getImageAsBytes(name.toString());

                    return imageBytes;
              }
            };
            dir.setFormat("image/png");
            return dir;
          }
        }));

private byte[] getImageAsBytes(String label){
    byte[] imageBytes = null;
    try {
            ByteArrayOutputStream outStream = new ByteArrayOutputStream();
            InputStream inStream  = new FileInputStream(new File(label));
            copy(inStream, outStream);
            inStream.close();
            outStream.close();
            return outStream.toByteArray();

        } catch (IOException e) {
            e.printStackTrace();
          } 
     return imageBytes;

}

private void copy(InputStream source, OutputStream destination)
        throws IOException
    {

        // Transfer bytes from source to destination
            byte[] buf = new byte[1024];
            int len;
            while ((len = source.read(buf)) > 0) {
                destination.write(buf, 0, len);
            }
            source.close();
            destination.close();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:26:43.977

使用 DynamicImageResource 并以字节为单位获取图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-24T02:01:41.433

我认为问题在于您创建了两个不同的 ImageResourceReference 实例（我认为这也是原始文章中的一个问题）。所以我会在您的 ItemOrderPanel.java 中执行以下操作：

```
WebApplication.get().
        getResourceReferenceRegistry().
        getResourceReference(
            ImageResourceReference.class,
            "imagesDemo",
            null,
            null,
            null,
            true,
            false) 
```

还要确保您没有使用非常通用的 URL 映射任何其他资源或页面，例如可能比“orderPage”具有更高优先级的“/”。根据下面的Wiki页面：

> *首先询问具有较大 IRequestMapper.getCompatibilityScore(Request) 的映射器。*

查看此页面以获取详细信息： [请求映射在 Wicket 中的工作原理](https://cwiki.apache.org/WICKET/request-mapping.html)

那么它应该可以正常工作！;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T15:10:02.253

[https://cwiki.apache.org/WICKET/uploaddownload.html](https://cwiki.apache.org/WICKET/uploaddownload.html)

你可以在这里找到一些信息。

# java - 关于多态行为

> ID：13971046
> 
> 赞同：4
> 
> 时间：2012-12-20T11:20:12.600
> 
> 标签：java, polymorphism, overriding

Java 中的多态表示可以通过覆盖子类方法来实现的多种形式。关于允许传入泛型值的泛型，例如`ArrayList<Object>`. 那是多态性概念的一部分吗？干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:23:23.750

泛型和多态是两个不同的东西。

泛型主要用于指定预期的类型。您可以使用通配符来定义一系列类型。例如`<? extends List>`可以适用于任何类型的 List ( `LinkedList`, `ArrayList`)

多态性是一个对象可以有多种类型的概念。所以一个对象可以是List的一个实例，也可以是一个实例`ArrayList`。

例如，想象三个类

```
public class Animal

public class Dog extends Animal

public class Cat extends Animal 
```

如果您有 的实例`Dog`，则该对象既是 又`Dog`是`Animal`。

显然，这两者很好地结合在一起，就好像您定义了一个`ArrayList<Object>`然后您可以将任何添加`Object`到该列表中（这是 Java 中的任何类）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T11:26:07.570

java中的多态可以通过java中的两种方式来实现。

1.  静态（重载 - 编译时）
2.  动态（覆盖 - 运行时）

关于你的问题

是的，它可以通过覆盖子类中的方法来完成。您可以在重载和覆盖中的参数中使用泛型对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T11:22:16.100

多态性不能应用于泛型类型。虽然`String`extends `Object`，`ArrayList<Object>`但不能用来指代`ArrayList<String>`

```
Object obj = new String(); // OK
ArrayList<Object> list = new  ArrayList<String>(); // Not OK 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T11:43:18.530

使用 Object 进行多态性在 Java 中被认为是一种不好的模式。它不会给你接口会给你的保证和类型安全。

```
List<Object> animals = new ArrayList<Object>();
animals.add(new Sheep());
animals.add(new Cat());
// This will throw us an error! (ClassCastException)
Cat cat = (Cat) animals.get(0) 
```

上面演示的错误无法在编译时捕获，只会在运行时发生错误时抛出。如果我们创建了一个 Animal 接口，我们可以完全避免这个错误。

```
interface Animal {
     //other methods you need to hide through polymorphism
     void sound();
}
List<Animal> animals = new ArrayList<Animal>();
// Sheep and Cat implement the Animal interface
animals.add(new Sheep());
animals.add(new Cat());
// No error
Animal animal = animals.get(0)
// This will through a COMPILE TIME error
Cat cat = animal.get(1); 
```

这显示了一种尝试实现多态性的更好方法，我们创建了一种更安全的方法，可以在编译时而不是在运行时进行检查。尽量避免使用 Object ，可能有更好的界面可以设计或使用以满足您的需要。

# qt - 服务器 QTcpSocket “中断”太快，客户端没有收到所有数据，知道为什么吗？

> ID：13971048
> 
> 赞同：3
> 
> 时间：2012-12-20T11:20:15.220
> 
> 标签：qt, tcp, client-server

我编写了一个客户端/服务器 TCP/IP 程序，它运行良好，直到服务器生成一个更大的文件。那时它坏了，不是一直坏，但经常足以让它成为一个真正的问题。我只用 TCP/IP 编写了一个小版本，它重现了我觉得非常令人印象深刻的问题。

我尝试了各种方法来解决问题，但我不太确定下一步该做什么！

```
/*
 * Test showing that at times a socket close() + exit(0) prevents all the
 * data from reaching the client.
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <QCoreApplication>
#include <QByteArray>
#include <QFile>
#include <QTcpSocket>
#include <QTcpServer>
#include <QHostAddress>
#include <sys/types.h>
#include <sys/wait.h>
#include <sys/socket.h>

void
client()
{
    QHostAddress a("192.168.2.1");
    int port = 4004;
    QTcpSocket socket;
    socket.connectToHost(a, port);
    if(socket.waitForConnected())
    {
        // if we get here then we can just copy the output of the child to Apache2
        // the wait will flush all the writes as necessary
        if(!socket.waitForReadyRead())
        {
            fprintf(stderr, "error: waitForReadyRead() timed out.\n");
            exit(1);
        }
        // buffer somewhere to check the output validity
        FILE *f = fopen("/tmp/out.html", "w");
        if(f == NULL)
        {
            fprintf(stderr, "error: could not create /tmp/out.html file.\n");
            exit(1);
        }
        for(;;)
        {
            char buf[64 * 1024];
            qint64 r(socket.read(buf, sizeof(buf)));
            if(r > 0)
            {
                fwrite(buf, r, 1, f);
            }
            else if(r == -1)
            {
                fprintf(stderr, "error: an error occured while read()'ing from the socket.\n");
                break;
            }
            else if(r == 0)
            {
                // no more data (since our socket is blocking this really
                // only happens when no more data is available)
                break;
            }
        }
        fclose(f);
        return;
    }
    fprintf(stderr, "error: client could not connect to server.\n");
    exit(1);
}

void
server()
{
    QTcpServer s;
    QHostAddress a("0.0.0.0");
    if(!s.listen(a, 4004))
    {
        fprintf(stderr, "error: server is not able to listen, port 4004 not available?\n");
        exit(1);
    }
    pid_t pid(0);
    for(;;)
    {
        if(pid > 0)
        {
            int status;
            if(waitpid(pid, &status, WNOHANG) == pid)
            {
                pid = 0;
            }
        }
        s.waitForNewConnection(-1);
        if(pid > 0)
        {
            int status;
            if(waitpid(pid, &status, 0) == pid)
            {
                pid = 0;
            }
        }
        QTcpSocket *socket(s.nextPendingConnection());
        pid = fork();
        if(pid == 0)
        {
            // this makes it work a bit better but we still have the
            // early disconnection
            int optval(1);
            socklen_t optlen(sizeof(optval));
            if(setsockopt(socket->socketDescriptor(), SOL_SOCKET, SO_KEEPALIVE, &optval, optlen) < 0) {
                fprintf(stderr, "warning: could not mark the new connection with keepalive flag.\n");
            }

            // we are the child, write in the socket and close it
            QFile f("example.html");
            f.open(QIODevice::ReadOnly);
            QByteArray buffer(f.readAll());
            f.close();
            socket->write(buffer);
            // the sleep makes it slow, but it doesn't make any difference
            //sleep(2);
            socket->flush();
            // extra sleep/flush don't make any difference
            //sleep(1);
            //socket->flush();
            //sleep(1);
            //socket->flush();
            // the read doesn't seem to fix anything
            socket->waitForReadyRead();
            socket->disconnectFromHost();
            delete socket;
            exit(0);
        }
        else {
            if(pid == -1) {
                fprintf(stderr, "error: could not create child process to handle the socket.\n");
            }
            socket->close();
        }
    }
}

int
main(int argc, char *argv[])
{
    if(argc == 1)
    {
        client();
    }
    else if(strcmp(argv[1], "-s") == 0)
    {
        server();
    }
    else
    {
        printf("Usage: %s [-s]\n", argv[0]);
        exit(1);
    }

    exit(0);
} 
```

我使用 CMakeLists.txt 文件来编译服务器和客户端。编译后，我们有一个可执行文件：tcp-bug。以 -s 作为服务器启动它。然后在没有 -s 的不同控制台中启动相同的可执行文件。我编写了一个 shell 脚本来重复测试，因为它通常不会在第一次发生，尽管它通常少于 20 次命中。

有我的 CMakeLists.txt 文件：

```
cmake_minimum_required(VERSION 2.8)
project(tcp-bug)
find_package(Qt4 4.8.1 REQUIRED QtCore QtNetwork)
include(${QT_USE_FILE})
include_directories(${QT_INCLUDES})
add_definitions(${QT_DEFINITIONS})
add_executable(tcp-bug tcp-bug.cpp)
target_link_libraries(tcp-bug ${QT_LIBRARIES})
set(CPACK_PACKAGE_NAME "tcp-bug")
set(CPACK_SOURCE_IGNORE_FILES ".swp$;/BUILD/")
include(CPack) 
```

还有我的shell脚本：

```
#!/bin/sh

for g in a b c d e f g h i j k l m n o p q r s t u v w x y z
do
    for f in 1 2 3 4 5 6 7 8 9 10
    do
        BUILD/tcp-bug
        if [ `stat -c %s /tmp/out.html` -ne 41812 ]
        then
            echo "Error occured! Iteration: $g - $f"
            ls -l /tmp/out.html
            exit 1
        fi
    done
done 
```

请注意，该脚本需要 .tar.gz 中的 41,812 字节文件（您也可以创建自己的 example.html 文件，服务器读取并发送给客户端）：

[http://linux.m2osw.com/break-tcpip-simple-clientserver-implementation-qt](http://linux.m2osw.com/breaking-tcpip-simple-clientserver-implementation-qt)

# c++ - “按字节”与“以字节为单位”

> ID：13971052
> 
> 赞同：0
> 
> 时间：2012-12-20T11:20:30.263
> 
> 标签：c++, coding-style, comments

```
template<class CharType>
struct StringWithLength
{
    size_t    length;
    CharType* str_buf;
}; 
```

我想对字段长度添加一些评论。我有两个选择：

```
#1\. "The field length is the size of str_buf by the byte" 
    (Consider "The worker is paid by the hour")

#2\. "The field length is the size of str_buf in bytes" 
```

从以英语为母语的人的角度来看，哪个更自然？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T11:23:32.653

我也不会用。我会说这样的话：

> 该`length`字段的值是缓冲区的大小，以字节为单位。

字段本身并不像计算机中的*所有*数据一样“以字节表示”。它是以字节为单位的缓冲区大小（或文本大小，或其他）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:22:00.457

我不是以英语为母语的人，但是我说英语已经 10 多年了，并且在一个说英语的国家生活了那么长时间，所以我想说，根据我的经验，它会是更自然的 #2。

# c# - 如何识别在 C# WPF 应用程序中动态检查了哪个动态复选框？

> ID：13971053
> 
> 赞同：1
> 
> 时间：2012-12-20T11:20:37.100
> 
> 标签：c#, wpf, checkbox, wpf-controls

在我的 WPF 应用程序中，我`Checkbox`动态显示了一些。`Name`和这些来自数据库中的表`Content`。`Checkbox`

```
...
StackPanel innerStack = new StackPanel();
        List<Course> courses = ldc.Courses.ToList();
        var count = courses.Count();
        var b = ldc.Books.Single(x=>x.BookID==1);
        foreach (var c in courses)
        {
            CheckBox cb = new CheckBox();
            cb.Name = c.CourseID.ToString();
            cb.Content = c.CourseID.ToString();
            var x = from bc in ldc.CourseAndBooks
                    where bc.BookID == b.BookID
                    select bc.CourseID;
            if (x.Contains(c.CourseID))
            {
                cb.IsChecked = true;
            }

            cb.AddHandler(CheckBox.CheckedEvent, new RoutedEventHandler(course_Checked));
            cb.AddHandler(CheckBox.UncheckedEvent, new RoutedEventHandler(course_Unchecked));
            innerStack.Children.Add(cb);
        }
        Grid.SetColumn(innerStack,0);
        Grid.SetRow(innerStack,0);
        Grid.SetColumnSpan(innerStack,1);
        Grid.SetRowSpan(innerStack,1);
        grid.Children.Add(innerStack);
        ... 
```

我也添加了`Checked`事件`Unchecked`来操作数据库中的选中项目。

```
 private void course_Checked(object sender, RoutedEventArgs e)
    { 
        MessageBox.Show("checked"); // it works
        // How to identify cb.Name here to perform some database query?
    }
    private void course_Unchecked(object sender, RoutedEventArgs e)
    {
        MessageBox.Show("Unchecked"); // it works
        // How to identify cb.Name here to perform some database query?
    } 
```

那么，如何`Checkbox`在 Checked/Unchecked` 事件方法中获取选中/未选中名称的名称。有什么建议吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:23:18.217

相当确定您可以将发件人转换为 CheckBox，这将是您要查找的内容。

# spring - SpringIntegration：服务激活器不调用方法

> ID：13971054
> 
> 赞同：2
> 
> 时间：2012-12-20T11:20:42.527
> 
> 标签：spring, spring-integration

我想从 RabbitMQ 队列中读取消息 > 使用服务激活器来调用服务。

相关的配置部分是：

```
<int-amqp:inbound-channel-adapter channel="fromRabbit"                                           queue-names="si.test.queue" mapped-request-headers="whatever" 
                                  connection-factory="connectionFactory" />
<int:service-activator input-channel="fromRabbit" output-channel="whatever"
               ref="msgService" method="checkMsg"/>

<bean id="msgService" class="com.whatever.MsgService"/> 
```

MsgService 类是：

```
public class MsgService{
//Does not work!
public void checkMsg( @Payload String s) {
    System.out.println("The Payload is: " +s);      
     }

} 
```

但我收到以下错误消息：
... 原因：java.lang.IllegalArgumentException：***[class org.springframework.integration.service.MessageExaminer] 类型的目标对象没有符合条件的消息处理方法。***

我在这里做错了什么？

但是，如果我只是将其用作 ServiceMsg 类中的一种方法 - 那行得通：

```
public void seeMessage(String m)
    {
        System.out.println(m);
    } 
```

我的目标是在 Service-Activator 方法中获取消息本身、有效负载和标头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T05:12:05.427

如果您想通过 SpEL 正确获取消息，您可以使用

```
#root 
```

一个例子是

```
 <int:channel id="quick.channel"/>

    <int:service-activator input-channel="quick.channel" 
        expression="@quickService.process(#root)"/> 
```

这将允许您访问服务中的消息

```
 public void process(Message<?> msg) {
        //do something with it
    } 
```

注意：这使您的服务代码与 Spring Integration 紧密耦合 - 您确定要这样做吗？如果您需要头部和有效负载的组合，为什么不将它们作为单独的参数传递给服务，从而将服务与 Spring Integration 消息对象解耦？

喜欢

```
<int:service-activator input-channel="quick.channel" 
expression="@quickService.process(headers['headerValue'],payload)"/> 
```

服务将是

```
public void process(String headerValue,Object payload) {
    //use them together
} 
```

# xml - 使用 eclipse 从 XSD 文件生成示例 xml

> ID：13971055
> 
> 赞同：1
> 
> 时间：2012-12-20T11:20:42.887
> 
> 标签：xml, eclipse, xsd

我搜索了论坛，发现很少有解决方案，但不是我想要的。

我有一个 XSD 文件（A.XSD），它导入 2 个其他 xsd（B.XSD 和 C.XSD）。当我尝试从 exlipse 为 A.XSD 生成示例 xml 时，我得到“不存在 rrot 元素，因为提供的架构没有全局元素”。但是其中一个导入的 xsd (B.XSD) 具有全局元素。我该怎么办，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:40:01.557

尝试为 B.XSD 生成 XML 并选择必须使用其生成 XML 的 rootElement（如果您有多个全局元素定义）。

如果 B.XSD 没有导入 A.XSD，那么没有任何 rootElement 但使用 B.XSD 的 A.XSD 有什么用？

# android - Android two listview in a view

> ID：13971058
> 
> 赞同：0
> 
> 时间：2012-12-20T11:20:51.947
> 
> 标签：android, listview, android-activity

Two listviews which are showing different data in layout XML file and there is the code:

```
 <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/detaillistview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:headerDividersEnabled="false" >
        </ListView>

        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/divider" />

        <ListView
            android:id="@+id/reviewlistview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:headerDividersEnabled="false" >
        </ListView>
    </LinearLayout> 
```

But when the top listview is full of the screen I will never see the bottom one. Any idea to fix this? Thank you in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:23:48.020

Keep the `LinearLayout` in a `ScrollView`. Thats it.

I have used the same format as shown below:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/widget0"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/lblHeading"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:gravity="center"
    android:textColor="#ffffffff"
    android:textSize="20sp"
    android:textStyle="bold" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/lblBody"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:textColor="#ffffffff"
            android:textSize="18sp" />

        <EditText
            android:id="@+id/txtText"
            android:layout_width="fill_parent"
            android:layout_height="170dp"
            android:layout_weight="1"
            android:autoText="true"
            android:gravity="left"
            android:scrollbars="vertical"
            android:textSize="16sp" >

            <requestFocus />
        </EditText>

        <Button
            android:id="@+id/btnButton"
            android:layout_width="100dp"
            android:layout_height="50dp"
            android:layout_gravity="center_horizontal"
            android:gravity="center"
            android:textSize="18dp"
            android:textStyle="bold" />

        <Button
            android:id="@+id/btnReturn"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:layout_weight="1"
            android:gravity="center"
            android:textSize="18dp"
            android:textStyle="bold" />
    </LinearLayout>
</ScrollView>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:28:22.460

if You want to show them in screen you should use **weight** , but you need scroll you should wrap linearlayout with ScrollView, try code below,

```
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <ListView
            android:id="@+id/detaillistview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:headerDividersEnabled="false" >

        </ListView>

        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/divider" />

        <ListView
            android:id="@+id/reviewlistview"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="false"
            android:headerDividersEnabled="false" >

        </ListView>
    </LinearLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:05:35.130

There are Two ways to show two Listview in One Layout.They are as follows

1)First if you want to show with out scrolling the view.In this case you need to mention the height of the listview.

2)In this case you need to take a ScrollView in that you need to take a layout inside that you need to declare two listviews.As follows...

```
<ScrollView
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/scrollView1"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:background="#ffffff"
   android:fillViewport="true" >

<RelativeLayout
   android:id="@+id/relativelayout1"
   android:layout_width="match_parent"
   android:layout_height="wrap_content" >

<ListView
   android:id="@+id/listView1"
   android:layout_width="match_parent"
   android:layout_height="wrap_content" />
<ImageView
   android:id="@+id/imageView"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:src="@drawable/divider" />
<ListView
   android:id="@+id/listView2"
   android:layout_width="match_parent"
   android:layout_height="wrap_content" />
</RelativeLayout>
</ScrollView> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T05:07:47.243

```
public class SeparatedListAdapter extends BaseAdapter
{

public final Map<String, Adapter> sections = new LinkedHashMap<String, Adapter>();
public final ArrayAdapter<String> headers;
public final static int TYPE_SECTION_HEADER = 0;

public SeparatedListAdapter(Context context)
{
    headers = new ArrayAdapter<String>(context, R.layout.list_header);
}

public void addSection(String section, Adapter adapter)
{
    this.headers.add(section);
    this.sections.put(section, adapter);
}

public Object getItem(int position)
{
    for (Object section : this.sections.keySet())
    {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        // check if position inside this section
        if (position == 0)
            return section;
        if (position < size)
            return adapter.getItem(position - 1);

        // otherwise jump into next section
        position -= size;
    }
    return null;
}

public int getCount()
{
    // total together all sections, plus one for each section header
    int total = 0;
    for (Adapter adapter : this.sections.values())
        total += adapter.getCount() + 1;
    return total;
}

public int getViewTypeCount()
{
    // assume that headers count as one, then total all sections
    int total = 1;
    for (Adapter adapter : this.sections.values())
        total += adapter.getViewTypeCount();
    return total;
}

public int getItemViewType(int position)
{
    int type = 1;
    for (Object section : this.sections.keySet())
    {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        // check if position inside this section
        if (position == 0)
            return TYPE_SECTION_HEADER;
        if (position < size)
            return type + adapter.getItemViewType(position - 1);

        // otherwise jump into next section
        position -= size;
        type += adapter.getViewTypeCount();
    }
    return -1;
}

public boolean areAllItemsSelectable()
{
    return false;
}

public boolean isEnabled(int position)
{
    return (getItemViewType(position) != TYPE_SECTION_HEADER);
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{

    int sectionnum = 0;
    for (Object section : this.sections.keySet())
    {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        // check if position inside this section
        if (position == 0)
            return headers.getView(sectionnum, convertView, parent);
        if (position < size)
            return adapter.getView(position - 1, convertView, parent);

        // otherwise jump into next section
        position -= size;
        sectionnum++;
    }
    return null;
}

@Override
public long getItemId(int position)
{
    return position;
} 
```

}

I use this to put two different kinds of data in one listview using sections!

# android - 在 Android 应用程序中使用 Google Gdata Spreadsheet 3.0 API 的 Google 帐户身份验证

> ID：13971060
> 
> 赞同：2
> 
> 时间：2012-12-20T11:20:54.890
> 
> 标签：android, authentication, spreadsheet

我正在开发一个与我个人帐户中的 Google 电子表格通信的 Android 应用程序。使用 Android Google API 级别 10 和以下库：

```
android-support-v4.jar;
gdata-client-1.0.jar;
gdata-client-meta-1.0.jar;
gdata-core-1.0.jar;
gdata-spreadsheet-3.0.jar;
gdata-spreadsheet-meta-3.0.jar;
google-api-client-1.12.0-beta.jar;
google-api-client-android-1.12.0-beta.jar;
google-http-client-1.12.0-beta.jar;
google-http-client-android-1.12.0-beta.jar;
google-oauth-client-1.12.0-beta.jar;
gson-2.1.jar;
guava-13.0.1.jar;
jackson-core-asl-1.9.9.jar;
jsr305-1.3.9.jar;
protobuf-java-2.4.1.jar. 
```

要向/从 Google 电子表格发送/接收数据（使用 Google Gdata Spreadsheet 3.0 API），我需要使用以下代码在身份验证阶段返回的对象 SpreadsheetService：

```
/**
* Authentication to the account  
* @return
* @throws AuthenticationException
*/
public static SpreadsheetService authenticate(final String username, final String password) throws AuthenticationException {
    SpreadsheetService service = new SpreadsheetService("v1");
    service.setProtocolVersion(SpreadsheetService.Versions.V3);
    service.setUserCredentials(email, password);
    return service;
} 
```

但是，此过程需要用户名和密码。我需要在没有明确传递用户名和密码的情况下进行 Google 身份验证。

Android 环境提供了一个 Account 对象，该对象来自存储在设备上的帐户数据。

如何使用 Account 对象进行身份验证并获取 SpreadsheetService 对象？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-03T08:32:35.853

嗨，我知道我回答这个答案为时已晚，但我相信其他人会从中获得帮助，您可以执行以下操作：

```
 private void chooseAccount() {
            Intent intent = AccountManager.newChooseAccountIntent(null, null,
                    new String[] { "com.google" }, false, null, null, null, null);
            startActivityForResult(intent, ACCOUNT_CODE);
        }

        String accessToken= "";
        String accountName = "";
                @Override
                    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
               if (resultCode == RESULT_OK) {
                        if (requestCode == AUTHORIZATION_CODE) {
                            requestToken();
                        } else if (requestCode == ACCOUNT_CODE) {
                            accountName = data
                                    .getStringExtra(AccountManager.KEY_ACCOUNT_NAME);

                            // invalidate old tokens which might be cached. we want a fresh
                            // one, which is guaranteed to work. Invalidate token based on your needs and the way your code is arranged.
                            invalidateToken();

                            requestToken();
                        }
                    }
                    }

        private void invalidateToken() {
                AccountManager accountManager = AccountManager.get(this);
    if(accessToken!= null && !accessToken.equals(""){
    accountManager.invalidateAuthToken("com.google",
                        accessToken);
    }

            }

        private void requestToken() {
String SCOPE1 = "https://spreadsheets.google.com/feeds";
String SCOPE2 = "https://docs.google.com/feeds";
                Account userAccount = null;

                for (Account account : accountManager.getAccountsByType("com.google")) {
                    if (account.name.equals(accountName)) {
                        userAccount = account;

                        break;
                    }
                }

                accountManager.getAuthToken(userAccount, "oauth2:" + SCOPE1 + " " + SCOPE2, null, this,
                        new OnTokenAcquired(), null);
            }
                private class OnTokenAcquired implements AccountManagerCallback<Bundle> {

                    @Override
                    public void run(AccountManagerFuture<Bundle> result) {
                        try {
                            Bundle bundle = result.getResult();

                            Intent launch = (Intent) bundle.get(AccountManager.KEY_INTENT);
                            if (launch != null) {
                                startActivityForResult(launch, AUTHORIZATION_CODE);
                            } else {
                                accessToken= bundle
                                        .getString(AccountManager.KEY_AUTHTOKEN);
                            }
                        } catch (Exception e) {
                            throw new RuntimeException(e);
                        }
                    }
                }

private void getSpreadSheetServiceInstance(){
 spreadsheetService = new SpreadsheetService(applicationName);
         spreadsheetService.setProtocolVersion(SpreadsheetService.Versions.V3);
spreadsheetService.setAuthSubToken(accessToken);
} 
```

获取此实例后，请遵循此处的代码片段：[Google SpreadSheets Api](https://developers.google.com/google-apps/spreadsheets/?csw=1)。不要忘记在 Google Developer 的控制台注册项目并启用 Drive 和 Google Plus Api，生成 Client 和 Api 密钥，设置同意屏幕。

对于 android studio，可以通过 build.gradle 在 dependencies 部分添加以下库：

```
compile 'com.google.gdata:core:1.47.1'    
compile 'com.google.android.gms:play-services-drive:7.5.0'
compile 'com.google.android.gms:play-services-plus:7.5.0' 
```

最后是非常重要的 AndroidManifest 文件：

```
 <uses-permission android:name="android.permission.MANAGE_ACCOUNTS" />
        <!-- To retrieve the account name (email) as part of sign-in: -->
        <uses-permission android:name="android.permission.GET_ACCOUNTS" />
        <!-- To access Google+ Apis -->
        <uses-permission android:name="android.permission.INTERNET" />
        <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
        <uses-permission android:name="android.permission.AUTHENTICATE_ACCOUNTS" />
        <!-- To retrieve OAuth 2.0 tokens or invalidate tokens to disconnect a user. -->
        <uses-permission android:name="android.permission.USE_CREDENTIALS" />
        <!-- To read Google play services -->
        <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

<meta-data
            android:name="com.google.android.gms.version"
            android:value="@integer/google_play_services_version" /> 
```

# c# - XNA游戏工作室最简单的精灵动画

> ID：13971064
> 
> 赞同：0
> 
> 时间：2012-12-20T11:21:09.623
> 
> 标签：c#, xna-4.0

好的，所以我想为我的“英雄”= 矩形精灵制作动画想要的是每当我向右或向左移动时，我的 Hero Sprite 图像更改为面向右侧的图像，面向左侧的图像，我不知道该怎么做。如果有人可以发布一个简单的算法来做到这一点，我将非常感激谢谢。

基本上我用左/右箭头向右/向左移动，所以当我按下右箭头时，我希望我的英雄图像替换为从我选择的图像，如果我按下左箭头，则相同

如果您需要更多信息来帮助我问我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:25:02.687

制作一个精灵类，在其中实现动画（最好使用精灵表），当按下左箭头时：`PlayerSprite = PlayerSpriteLeft`当按下右箭头时，以另一种方式进行。

面向对象编程在这一点上非常方便，所以好好利用它吧！

制作一个`Sprite`公开方法`Draw(SpriteBatch sBatch)`、`Update(float time)`属性`Interval`和`NumberOfFrames`/或类似内容的类。

要有创意！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:23:27.137

[Microsoft 网站](http://xbox.create.msdn.com/en-US/education/catalog/sample/platformer)上的平台游戏示例是一个很好的起点。它有一个 Sprite 动画类，您可以从中学习。

# zend-framework2 - 使用 Zend\XMLRpc\Client 时无法解析分块响应

> ID：13971066
> 
> 赞同：0
> 
> 时间：2012-12-20T11:21:18.027
> 
> 标签：zend-framework2, openx, zend-xmlrpc

升级 zf 2.0.4 => 2.0.6 后出现错误

```
Zend\Http\Exception\RuntimeException

File:

D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\Http\Response.php:449

Message:

Error parsing body - doesn't seem to be a chunked message

Stack trace:

#0 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\Http\Response.php(303): Zend\Http\Response->decodeChunkedBody('???????????????...')
#1 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\XmlRpc\Client.php(245): Zend\Http\Response->getBody()
#2 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\XmlRpc\Client.php(318): Zend\XmlRpc\Client->doRequest(Object(Zend\XmlRpc\Request))
#3 D:\xampp\htdocs\htm\base\module\Zone\src\Zone\Controller\AdminController.php(132): Zend\XmlRpc\Client->call('ox.agencyZoneSt...', Array)
#4 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\Mvc\Controller\AbstractActionController.php(90): Zone\Controller\AdminController->manageAction()
#5 [internal function]: Zend\Mvc\Controller\AbstractActionController->onDispatch(Object(Zend\Mvc\MvcEvent))
#6 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php(464): call_user_func(Array, Object(Zend\Mvc\MvcEvent))
#7 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php(208): Zend\EventManager\EventManager->triggerListeners('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
#8 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\Mvc\Controller\AbstractController.php(107): Zend\EventManager\EventManager->trigger('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
#9 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\Mvc\DispatchListener.php(113): Zend\Mvc\Controller\AbstractController->dispatch(Object(Zend\Http\PhpEnvironment\Request), Object(Zend\Http\PhpEnvironment\Response))
#10 [internal function]: Zend\Mvc\DispatchListener->onDispatch(Object(Zend\Mvc\MvcEvent))
#11 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php(464): call_user_func(Array, Object(Zend\Mvc\MvcEvent))
#12 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\EventManager\EventManager.php(208): Zend\EventManager\EventManager->triggerListeners('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
#13 D:\xampp\htdocs\htm\base\vendor\zendframework\zendframework\library\Zend\Mvc\Application.php(297): Zend\EventManager\EventManager->trigger('dispatch', Object(Zend\Mvc\MvcEvent), Object(Closure))
#14 D:\xampp\htdocs\htm\base\public\index.php(15): Zend\Mvc\Application->run()
#15 {main} 
```

我发现它来自我的`Zend\XMLRpc\Client`电话

```
$httpClient = new \Zend\Http\Client();
$oxClient = new \Zend\XmlRpc\Client('http://xxx.com/www/api/v2/xmlrpc/',$httpClient);
$oxSession = $this->oxClient->call('ox.logon',$oxLogin); 
$zone_list = $this->oxClient->call('ox.agencyZoneStatistics',array($oxSession,$agency_id)); 
```

我调用 OpenX API 系统。在第一次通话`logon`时成功，但第二次失败？？！我认为我的问题点`decodeChunkedBody`在于`Zend\Http\Response.php`. 它无法理解来自 OpenX 的分块响应

```
protected function decodeChunkedBody($body)
{
    $decBody = '';

    while (trim($body)) {
        if (! preg_match("/^([\da-fA-F]+)[^\r\n]*\r\n/sm", $body, $m)) {
            throw new Exception\RuntimeException(
                "Error parsing body - doesn't seem to be a chunked message"
            );
        }

        $length   = hexdec(trim($m[1]));
        $cut      = strlen($m[0]);
        $decBody .= substr($body, $cut, $length);
        $body     = substr($body, $cut + $length + 2);
    }

    return $decBody;
} 
```

我卡在这里。第一个旧库（2.0.4）运行良好，我升级它是因为需要使用 zfcuser、zfcbase。但是新的库（2.0.6）在第二次调用（以及任何`logon`方法除外）中出现了这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:13:50.823

不久前，我在使用 XML-RPC 访问 OpenX API 时遇到了问题，但事实证明解决方案很简单： [http ://www.openxrest.com/xml-rpc2-returns-empty-decoded-result/](http://www.openxrest.com/xml-rpc2-returns-empty-decoded-result/)

此外，您应该打开调试模式。请参阅此链接以了解如何打开它： [http ://devzone.zend.com/97/xml_rpc-client/#Heading9](http://devzone.zend.com/97/xml_rpc-client/#Heading9)

# java - com.google.gwt.user.client.rpc.InvocationException：来自 ContactUsSubmissionService_Proxy.submitContactUs

> ID：13971068
> 
> 赞同：0
> 
> 时间：2012-12-20T11:21:20.983
> 
> 标签：java, gwt, gwt-rpc

`Window.alert(caught.toString());``ContactUs`当我在我的 gwt 应用程序中使用 rpc 时，in 会提醒这个异常。谁能告诉我为什么会这样？

Java类如下：-

*ContactUs.java* :-

```
package com.businesstool.home.client;

import com.google.gwt.core.client.GWT;
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.uibinder.client.UiBinder;
import com.google.gwt.uibinder.client.UiField;
import com.google.gwt.uibinder.client.UiHandler;
import com.google.gwt.user.client.Window;
import com.google.gwt.user.client.rpc.AsyncCallback;
import com.google.gwt.user.client.rpc.ServiceDefTarget;
import com.google.gwt.user.client.ui.Button;
import com.google.gwt.user.client.ui.Composite;
import com.google.gwt.user.client.ui.HasText;
import com.google.gwt.user.client.ui.RootPanel;
import com.google.gwt.user.client.ui.Widget;
import com.google.gwt.user.client.ui.TextBox;
import com.google.gwt.user.client.ui.TextArea;
import com.google.gwt.user.client.ui.Hyperlink;
import com.google.gwt.event.logical.shared.AttachEvent;

public class ContactUs extends Composite implements HasText {

    private static ContactUsUiBinder uiBinder = GWT
            .create(ContactUsUiBinder.class);
    @UiField TextBox fullName;
    @UiField TextBox emailId;
    @UiField TextBox subject;
    @UiField TextArea message;
    @UiField Button postUs;
    @UiField Hyperlink home;

    interface ContactUsUiBinder extends UiBinder<Widget, ContactUs> {
    }

    public ContactUs() {
        initWidget(uiBinder.createAndBindUi(this));
    }

    @Override
    public String getText() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void setText(String text) {
        // TODO Auto-generated method stub

    }

    @UiHandler("postUs")
    void onPostUsClick(ClickEvent event) {
        ContactUsBean contactUsBean=new ContactUsBean();
        contactUsBean.setFullName(fullName.getText());
        contactUsBean.setEmail(emailId.getText());
        contactUsBean.setSubject(subject.getText());
        contactUsBean.setMessage(message.getText());

        if(contactUsBean.getFullName()==null || contactUsBean.getFullName().isEmpty()) {
            Window.alert("Please fill First Name/Company Name");
        } else if(contactUsBean.getEmail()==null || contactUsBean.getEmail().isEmpty()) {
            Window.alert("Please fill contact email");
        } else if(contactUsBean.getSubject()==null || contactUsBean.getSubject().isEmpty()) {
            Window.alert("Please fill a subject");
        } else if(contactUsBean.getMessage()==null || contactUsBean.getMessage().isEmpty()) {
            Window.alert("Please fill your message");
        } else {
            ContactUsSubmissionServiceAsync contactUsSubmissionServiceAsync=ContactUsSubmissionService.Util.getInstance();
            AsyncCallback<String> asyncCallback=new AsyncCallback<String>() {

                @Override
                public void onSuccess(String result) {
                    Window.alert(result);
                    fullName.setText("");
                    emailId.setText("");
                    subject.setText("");
                    message.setText("");
                }

                @Override
                public void onFailure(Throwable caught) {
                    Window.alert(caught.toString());
                }
            };
            ServiceDefTarget serviceDefTarget=(ServiceDefTarget) contactUsSubmissionServiceAsync;
            String moduleRelativeURL=GWT.getModuleBaseURL()+"ContactUsSubmissionService";
            serviceDefTarget.setServiceEntryPoint(moduleRelativeURL);
//          contactUsSubmissionServiceAsync.submitContactUs(fName, email, subj, msg, asyncCallback);
            contactUsSubmissionServiceAsync.submitContactUs(contactUsBean, asyncCallback);

        }

    }

    @UiHandler("home")
    void onHomeAttachOrDetach(AttachEvent event) {
    }

    @UiHandler("home")
    void onHomeClick(ClickEvent event) {
        RootPanel rootPanel=RootPanel.get();
        rootPanel.remove(0);
        rootPanel.add(new IndexPage());
    }
} 
```

*ContactUsSubmissionService.java* :-

```
package com.businesstool.home.client;

import com.google.gwt.core.client.GWT;
import com.google.gwt.user.client.rpc.RemoteService;
import com.google.gwt.user.client.rpc.RemoteServiceRelativePath;

@RemoteServiceRelativePath("ContactUsSubmissionService")
public interface ContactUsSubmissionService extends RemoteService {
    /**
     * Utility class for simplifying access to the instance of async service.
     */ 
    public static class Util {
        private static ContactUsSubmissionServiceAsync instance;
        public static ContactUsSubmissionServiceAsync getInstance(){
            if (instance == null) {
                instance = GWT.create(ContactUsSubmissionService.class);
            }
            return instance;
        }
    }

    public abstract String submitContactUs(ContactUsBean contactUsBean);

} 
```

*ContactUsSubmissionServiceAsync.java* :-

```
package com.businesstool.home.client;

import com.google.gwt.user.client.rpc.AsyncCallback;

public interface ContactUsSubmissionServiceAsync {

    public abstract void submitContactUs(ContactUsBean contactUsBean,
            AsyncCallback<String> callback);

} 
```

*ContactUsSubmissionServiceImpl.java* :-

```
package com.businesstool.home.server;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import vsrd.web.mail.SendMail;
import vsrd.web.mail.Validator;
import com.businesstool.home.client.ContactUsBean;
import com.businesstool.home.client.ContactUsSubmissionService;

import com.google.gwt.user.server.rpc.RemoteServiceServlet;

public class ContactUsSubmissionServiceImpl extends RemoteServiceServlet
        implements ContactUsSubmissionService {
    /**
     * 
     */
    private static final long serialVersionUID = -6319962734395453042L;

    @Override
    public void service(final HttpServletRequest request,
            HttpServletResponse response) {

    }

    @Override
    public String submitContactUs(ContactUsBean contactUsBean) {
        String fullName = contactUsBean.getFullName();
        String email = contactUsBean.getEmail();
        String subject = contactUsBean.getSubject();
        String message = contactUsBean.getMessage();

        String output = "Successfully sent your message to the admistrator.\nThanks";

        Validator validator = new Validator();

        if (fullName == null || fullName.trim().isEmpty()) {
            output = "Invalid full name, failed posting message";
        } else if (email == null || email.trim().isEmpty()) {
            output = "Invalid Email Id, failed posting message";
        } else if (subject == null || subject.trim().isEmpty()) {
            output = "Invalid subject, failed posting message";
        } else if (message == null || message.trim().isEmpty()) {
            output = "Invalid message, failed posting message";
        } else if (!validator.isValidEmail(email)) {
            output = "Invalid email id, failed posting message";
        } else {
            message += "\n" + "Full name : " + fullName + "\nEMail Id : "
                    + email;
            SendMail sendMail = new SendMail();
            String mailStatus = sendMail.sendMail("visruthcv@gmail.com",
                    "xxx@gmail.com", "Mr.XXX", email, subject,
                    message);

            if (mailStatus == null) {
                String mailStatus2 = sendMail
                        .sendMail(
                                "xxx@gmail.com",
                                email,
                                fullName,
                                "xxx@gmail.com",
                                "Confirmation mail from http://xxx.appspot.com",
                                "Thank you for your valuable message\n\n\nThanks & Regards\nAdministrator");
                if (mailStatus2 == null) {
                    output += ", we have sent a confirmation message to your email.";
                } else {
                    output += ",\n we have received your mail \nbut we failed to send a confirmation mail to "
                            + email + " \nplease give the correct email id.";
                }

            } else {
                output = "Posting failed";
            }
        }

        return output;
    }

} 
```

*ContactUsBean.java* :-

```
package com.businesstool.home.client;

import java.io.Serializable;

public class ContactUsBean implements Serializable {
    /**
     * 
     */
    private static final long serialVersionUID = -2345125743115814903L;

    private String fullName;
    private String email;
    private String subject;
    private String message;

//getter setter methods.....

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T11:35:08.857

我通过`public void service(final HttpServletRequest request, HttpServletResponse response)`从*ContactUsSubmissionServiceImpl.java*中删除被覆盖的方法解决了这个问题。该问题`super.service(request, response)`未被调用，因此它无法处理任何传入请求。

# java - 如何自动检查具有不同名称和不同值的所有复选框？

> ID：13971070
> 
> 赞同：2
> 
> 时间：2012-12-20T11:21:24.743
> 
> 标签：java, javascript

假设我有一个包含复选框的 JSP 页面：

```
<input type="checkbox" name=check<%=i%> value=<%= rs.getString("VDB") %>> 
```

这里的值`i`取决于从数据库中检索到的值的数量。

我需要一个按钮来检查所有复选框。

**如果所有复选框的名称相同（例如：chk），**我知道如何检查所有复选框：

```
<SCRIPT LANGUAGE="JavaScript">
function Check(chk) {
    if (document.vendorform.Check_All.value == "Check All") {
        for (i = 0; i < chk.length; i++)
        chk[i].checked = true;
        document.vendorform.Check_All.value = "UnCheck All";
    } else {    
        for (i = 0; i < chk.length; i++)
        chk[i].checked = false;
        document.vendorform.Check_All.value = "Check All";
    }
} 
</script> 
```

仅对 JavaScript 有任何帮助，因为我不知道 JSTL、jQuery 或 EL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:25:21.627

jquery怎么样

```
$(document).ready(function(){    
$("input[type=checkbox]").each(function(){
     $(this).prop('checked', true);
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:26:56.950

对于纯 javascript，请查看以下链接，看看是否有帮助：

[检查所有复选框](http://3dmdesign.com/development/javascript-check-all-checkboxes)

它提出以下建议：

```
function check_all_in_document(doc)
{
   var c = new Array();
   c = doc.getElementsByTagName('input');

   for (var i = 0; i < c.length; i++)
   {
       if (c[i].type == 'checkbox')
       {
           c[i].checked = true;
       }
   }
} 
```

对于 jQuery，您只需要使用`:checkbox selector`可以在此处找到的更多信息：

[jQuery 复选框选择器](http://api.jquery.com/checkbox-selector/)

# jquery - 绑定 jQuery 函数以显示图像（通过 Stellar.js）

> ID：13971074
> 
> 赞同：0
> 
> 时间：2012-12-20T11:21:36.020
> 
> 标签：jquery, css, function, jquery-plugins, bind

我正在尝试使用 Bootstrap（响应式）和 Stellar.js 来创建一个不错的视差布局。我遇到的问题是（根据 Stellar.js 文档）**图像/div 必须具有定义的高度**以避免图像弹出和弹出的问题（根据[https://github.com/markdalgleish/ stellar.js/issues/7](https://github.com/markdalgleish/stellar.js/issues/7)）。

由于我使用的是响应式布局，因此必须动态设置高度定义（以便图像在较小的视口上显示时不会失真）。

此外，Stellar.js 将元素设置为*display: none*直到它出现，因此无法在页面加载时简单地检查图像的大小。因此，**一旦 Stellar.js 将其修改为*display: 块*，我需要找到一种方法来识别图像的高度，以便我可以将函数绑定到此事件**

任何建议将不胜感激！我可以在必要时提供更多信息。

**额外细节：**

这是我正在使用的 HTML 元素的示例。值得注意的是，高度参考仍然需要应用于图像，即使 Stellar 插件在其父 div 上运行。

```
<div class="span6">
  <div  data-stellar-ratio="1.7" data-stellar-vertical-offset="-700">
    <img src="img/portfolio/web/hero.png" alt="Website design and development service">
  </div>
</div> 
```

以下是我尝试对建议进行的 Stellar.js 插件的更新：

```
hideElement: function($elem) {

    var sImg = $elem.children('img'),
        imgHeight = sImg.height();

    sImg.css({ height: imgHeight });
    $elem.hide();
} 
```

唉，这仍然会导致应用了“高度：0px”的图像，这表明计算是在图像加载之前或隐藏之后发生的！我不明白为什么会这样。

# javascript - Jaydata Planet 示例抛出 DefaultError: DEFAULT ERROR CALLBACK

> ID：13971076
> 
> 赞同：1
> 
> 时间：2012-12-20T11:21:45.837
> 
> 标签：javascript, jaydata

我正在尝试运行 JayData 的行星示例，但是当我尝试在浏览器上加载 html 文件时，它给我的萤火虫错误说：

> 默认错误：默认错误回调！

我在 jaydata.js(1.2.5) 内部检查了抛出错误的行，它出现在函数 Guard.raise 中，它检查智能感知对象是否未定义。我尝试搜索它的声明但不能，你能帮我解决这个问题吗？我在哪里可以得到这个智能感知对象？

谢谢，阿贾克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:01:08.127

这个例子使用 sqlite 来存储数据。它适用于 chrome，因为 chrome 确实支持 sqlite，但它不适用于例如 firefox。你尝试了哪个浏览器？我们有一个名为“本地”的虚拟提供商，它隐藏了不同浏览器支持的不同存储。我们只需要将 sqlite 更改为本地，它就可以在所有浏览器中运行...

# xslt - 用户 xsl:call-template 的值为 xsl:param

> ID：13971077
> 
> 赞同：1
> 
> 时间：2012-12-20T11:21:46.553
> 
> 标签：xslt, xslt-1.0

我正在开发一些实用程序`xslt`模板，我想制作一个模板，您可以在其中根据参数调用另一个模板。

我想要达到的目标：

```
<xsl:template name="OuterTemplate.AlternatingRow">
    <xsl:param name="Position" />
    <xsl:param name="CallTemplate" />
    <xsl:if test="$Position mod 2 = 0">
        <xsl:if test="$CallTemplate != ''">
            <xsl:call-template name="$CallTemplate"></xsl:call-template>
        </xsl:if>
    </xsl:if>
</xsl:template> 
```

但我不断收到错误，因为这`<xsl:call-template name="$CallTemplate"></xsl:call-template>`是不允许的操作。

这甚至可能吗？谷歌搜索时找不到太多关于此的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T14:30:57.103

**虽然 Ian Roberts 接受的答案是正确的，但在 XSLT 1.0 和 XSLT 2.0 中可以模拟将“函数”（模板）作为参数传递给另一个函数**。

这已在 FXSL 库中完成，用于使用 XSLT（1.0 和 2.0）进行函数式编程。

您可以在此处阅读有关 FXSL 的基本主要思想的更多信息（对于 XSLT 2.0）：**[http ://conferences.idealliance.org/extreme/html/2006/Novatatchev01/EML2006Novaatchev01.html](http://conferences.idealliance.org/extreme/html/2006/Novatchev01/EML2006Novatchev01.html)**

对于这里的 XSLT 1.0：http: **[//conferences.idealliance.org/extreme/html/2003/Novaatchev01/EML2003Novaatchev01.html](http://conferences.idealliance.org/extreme/html/2003/Novatchev01/EML2003Novatchev01.html)**

这个想法是，我们将一个节点（比如 ）作为参数传递，而不是模板名称，该节点`$pFun`由实现所需功能的模板唯一匹配。然后在被调用的模板中，以下调用“作为参数传递”模板：

```
<xsl:apply-templates select="$pFun">
 <!-- Any necessary <xsl:with-param> here -->
</xsl:apply-templates> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T11:34:24.143

根据 XSLT 规范， 的`name`属性`<xsl:call-template>`必须是文字 qname，不能是变量引用等表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:27:14.517

XSLT 的动态发送机制是 xsl:apply-templates，您可以在 Dimitre Novatchev 的 FXSL 库中找到构建此功能的巧妙方法。

# c# - 在 C# 中，有没有办法告诉 Regex.Replace 做了多少替换？

> ID：13971085
> 
> 赞同：4
> 
> 时间：2012-12-20T11:22:19.753
> 
> 标签：c#, .net, regex

> **可能重复：**
> [计数正则表达式替换（C#）](https://stackoverflow.com/questions/4994225/count-regex-replaces-c)

有没有办法知道一个`Regex.Replace(...)`电话做了多少次替换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:25:10.380

您可以使用[Regex.Replace Method (String, String, MatchEvaluator)](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)重载并使用您的自定义建立计数`MatchEvaluator`。

你总是可以这样做：

```
int count = 0;
string newStr = Regex.Replace(origStr, regexStr, m => { count++; return "replacement"; }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T11:26:26.527

你[可以做](http://msdn.microsoft.com/en-us/library/b9712a7w.aspx)

```
Regex.Matches(...).Count; 
```

第一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:27:21.300

您可以使用[此版本](http://msdn.microsoft.com/en-us/library/ht1sxswy.aspx)的`Regex.Replace`方法：

```
public string Replace(
    string input,
    MatchEvaluator evaluator
)

public static string evaluator(Match match)
{
    // handle matches count here
} 
```

# optimization - 加速 x64 汇编器 ADD 循环

> ID：13971088
> 
> 赞同：11
> 
> 时间：2012-12-20T11:22:29.190
> 
> 标签：optimization, assembly, x86-64, bignum, arbitrary-precision

我正在研究非常长的整数（大约 100,000 个十进制数字）的乘法运算。作为我图书馆的一部分，我要添加两个长数字。

分析表明，我的代码在 add() 和 sub() 例程中运行的时间高达 25%，因此它们尽可能快很重要。但我还没有看到很大的潜力。也许你可以给我一些帮助、建议、见解或想法。我会测试它们并回复你。

到目前为止，我的 add 例程做了一些设置，然后使用了 8 次展开循环：

```
mov rax, QWORD PTR [rdx+r11*8-64]
mov r10, QWORD PTR [r8+r11*8-64]
adc rax, r10
mov QWORD PTR [rcx+r11*8-64], rax 
```

接下来还有 7 个具有不同偏移量的块，然后循环。

我之前尝试从内存中加载值，但这没有帮助。我想这是因为良好的预取。我使用 Intel i7-3770 Ivy Bridge 4 核 CPU。但我想编写适用于任何现代 CPU 的代码。

**编辑**：我做了一些计时：它在大约 2.25 个周期/字中增加了 1k 个字。如果我移除 ADC，那么只剩下 MOV，它仍然需要大约 1.95 个周期/字。所以主要的瓶颈似乎是内存访问。一个库的`memcpy()`工作周期约为 0.65 个周期/字，但只有一个输入，而不是两个。不过，我猜，由于它使用了 SSE 寄存器，它的速度要快得多。

一些问题：

*   使用“加载、加载、添加、存储”结构有用还是“加载、添加到内存”有帮助？到目前为止，我的测试没有显示出任何优势。
*   像往常一样，SSE(2,3,4) 没有帮助？
*   寻址（缩放索引加基数加偏移量）影响严重吗？我可以`ADD r11, 8`改用。
*   循环展开怎么样？我读到展开对 Sandy Bridge 架构不利（Agner Fog [http://www.agner.org/optimize/](http://www.agner.org/optimize/)）。是首选还是避免？
*   **（编辑）**我可以使用 SSE 寄存器从内存中以更大的块加载和存储字，并有效地与通用寄存器和 SSE 寄存器交换字吗？

我非常感谢任何评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:29:20.293

我很确定 memcpy 更快，因为它不依赖于在执行下一个操作之前获取的数据。

如果您可以安排您的代码，使其执行以下操作：

```
mov rax, QWORD PTR [rdx+r11*8-64]
mov rbx, QWORD PTR [rdx+r11*8-56]
mov r10, QWORD PTR [r8+r11*8-64]
mov r12, QWORD PTR [r8+r11*8-56]
adc rax, r10
adc rbx, r12
mov QWORD PTR [rcx+r11*8-64], rax
mov QWORD PTR [rcx+r11*8-56], rbx 
```

我不能 100% 确定 -56 的偏移量是否适合您的代码，但这个概念是“正确的”。

我还会考虑缓存命中/缓存冲突。例如，如果您有三个数据块[看起来确实如此]，请确保它们未与缓存中的相同偏移量对齐。一个不好的例子是，如果您从缓存中的同一位置以缓存大小的倍数分配所有块。过度分配并确保您的不同数据块偏移至少 512 字节[因此分配 4K 超大，并四舍五入到 4K 边界起始地址，然后将 512 添加到第二个缓冲区，将 1024 添加到第三个缓冲区]

如果您的数据足够大（大于 L2 缓存），您可能需要使用 MOVNT 来获取/存储您的数据。这将避免读入缓存 - 这仅在您拥有非常大的数据时才有用，下一次读取只会导致您可能认为“有用”的其他内容被踢出缓存，而您不会得到无论如何，在您将其从缓存中踢出之前回到它 - 因此将值存储在缓存中实际上并没有帮助......

编辑：使用 SSE 或类似方法无济于事，如此处所述： [长整数例程可以从 SSE 中受益吗？](https://stackoverflow.com/questions/8866973/can-long-integer-routines-benefit-from-sse)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:07:46.103

最困难的依赖是每个内存块之间的进位传播；我会尝试首先设计一种处理方法。

以下片段模拟进位传播，但具有不使用进位标志的“好处”。*这*可以为三个或四个单独的线程并行化，每个线程产生一个半数，相隔约 25000 个十进制数字（或 10000 个字节）。那么那些只影响一个字节、字、双字等的进位的概率将渐近地达到零。

```
 long long carry=0;
 for (int i=0;i<N;i++) {
     carry += (long long)*a++ + (long long)*b++;
     *c++ = carry; carry>>=32;
 } 
```

根据我的分析，使用 xmm 的无进位加法大约需要 550 毫秒（1e9 个字），模拟进位大约需要 1020 毫秒，4 路并行版本需要大约 820 毫秒（没有任何汇编程序优化）。

架构优化可能包括使用冗余数字系统，其中进位不必一直传播，并且可以无限期地推迟对进位的评估。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:18:18.060

尝试先预取数据（您可以尝试先将更多数据块读取到 x64 寄存器然后进行计算），检查数据在内存中是否正确对齐，将循环代码放在与 16 对齐的标签处，尝试删除 SIB 寻址

您还可以尝试将代码缩短为：

```
mov rax, QWORD PTR [rdx+r11*8-64]
adc rax, QWORD PTR [r8+r11*8-64]
mov QWORD PTR [rcx+r11*8-64], rax 
```

# java - JScrollPane 内的 JTable：禁用滚动条的最佳高度

> ID：13971089
> 
> 赞同：2
> 
> 时间：2012-12-20T11:22:31.010
> 
> 标签：java, swing, jtable, size, jscrollpane

我正在使用以下代码在`JTable`内部创建`JScrollPane`以显示列标题

[JTable 不会显示列标题](https://stackoverflow.com/questions/2320812/jtable-wont-show-column-headers)

```
String[] columnNames = {"header1", "header2", "header2", "header3"};
Object[][] data = new Object[num][4];
//feed values into data using for

JTable chart = new JTable(data, columnNames);
chart.setShowVerticalLines(false);
chart.setEnabled(false);
chart.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);

JScrollPane sp = new JScrollPane(chart);
sp.setPreferredSize(new Dimension(width, chart.getHeight() + 5));
panel.add(sp); 
```

问题是我需要计算一个**高度**，`JScrollPane`以便整体`JTable`可见并且`JScrollBar`s 不会出现。我怎样才能做到这一点？

`num`从 2 变为 4，如果是 4，则出现滚动条。 `width`是固定的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T14:19:10.137

基本方法是

*   JTable is-a Scrollable 不幸的是它在计算 prefScrollable 方面做得不太好，所以你必须自己做
*   要么使用一个布局管理器，它在他们的首选项（fi FlowLayout）中布置所有内容，要么在 JTable 中实现最大值（如果你使用像 BoxLayout 这样的调整大小但尊重最大值的管理器）
*   JScrollPane 是一个validationRoot，因此重新验证必须发生在scrollPane 的父级上

就像是：

```
final JTable table = new JTable(10, 5) {

    @Override
    public Dimension getPreferredScrollableViewportSize() {
        Dimension dim = super.getPreferredScrollableViewportSize();
        // here we return the pref height
        dim.height = getPreferredSize().height;
        return dim;
    }

};
final JComponent content = new JPanel();
content.add(new JScrollPane(table));
Action add = new AbstractAction("add row") {

    @Override
    public void actionPerformed(ActionEvent e) {
        ((DefaultTableModel) table.getModel()).addRow(new Object[]{});
        content.revalidate();
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:45:35.793

将我的评论转换为答案，疯狂，疯狂，真的很疯狂，一切都可能使简单的事情复杂化，假设每行都有相同的大小，columnmodel 的长方法，扩展方法，必须添加列渲染器/编辑器， ETC..

![在此处输入图像描述](../Images/451778c93afb2179302b3adf21978576.png)

```
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.ListSelectionModel;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableColumnModel;
import javax.swing.table.TableColumn;

public class TablePreferredSize {

    private String[] head = {"One", "Two", "Three", "Four", "Five", "Six"};
    private String[][] data = new String[25][6];
    private JTable table = new JTable(data, head);
    private DefaultTableColumnModel columnModel = new DefaultTableColumnModel();
    private TableColumn column = new TableColumn();
    private int rowHeight = 23;
    private int rowWidth = 0;

    public TablePreferredSize() {
        table.setRowHeight(23);
        table.setIntercellSpacing(new Dimension(1, 1));
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        column = new TableColumn();
        column.setModelIndex(0);
        column.setHeaderValue("One");
        column.setPreferredWidth(250);
        columnModel.addColumn(column);
        rowWidth += column.getPreferredWidth();
        column = new TableColumn();
        column.setModelIndex(1);
        column.setHeaderValue("Two");
        column.setPreferredWidth(120);
        columnModel.addColumn(column);
        rowWidth += column.getPreferredWidth();
        column = new TableColumn();
        column.setModelIndex(2);
        column.setHeaderValue("Three");
        column.setPreferredWidth(80);
        columnModel.addColumn(column);
        rowWidth += column.getPreferredWidth();
        column = new TableColumn();
        column.setModelIndex(3);
        column.setHeaderValue("Four");
        column.setPreferredWidth(120);
        columnModel.addColumn(column);
        column = new TableColumn();
        column.setModelIndex(4);
        column.setHeaderValue("Five");
        column.setPreferredWidth(70);
        columnModel.addColumn(column);
        column = new TableColumn();
        column.setModelIndex(5);
        column.setHeaderValue("Six");
        column.setPreferredWidth(30);
        columnModel.addColumn(column);
        table.setColumnModel(columnModel);
        table.setPreferredScrollableViewportSize(new Dimension(rowWidth, 12 * rowHeight));
        JScrollPane scrollPane = new JScrollPane(table);
        JFrame frame = new JFrame("Table PreferredSize");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(scrollPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TablePreferredSize t = new TablePreferredSize();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:31:16.557

如果你打电话怎么办？

```
sp.getColumnHeader().getHeight() 
```

# c - 从文本文件复制列

> ID：13971091
> 
> 赞同：-1
> 
> 时间：2012-12-20T11:22:32.963
> 
> 标签：c

我有一个看起来像这样的文本文件：

```
Flooding refers to all water that overflows a node, whether it ponds or not.
  --------------------------------------------------------------------------
                                                             Total   Maximum
                                 Maximum   Time of Max       Flood    Ponded
                        Hours       Rate    Occurrence      Volume     Depth
  Node                 Flooded       CMS   days hr:min    10^6 ltr    Meters
  --------------------------------------------------------------------------
   1064                  0.15     0.000      0  00 00       0.000      0.35
   1065                  0.25     0.078      0  00 09       0.049      0.41
   1130                  0.25     0.626      0  00 00       0.106      0.90
   1155                  0.24     0.098      0  00 07       0.073      0.61
   1173                  0.25     0.106      0  00 15       0.022      0.76 
```

我想复制数字列（无文本），以便生成的文件如下所示：

```
 1064                  0.15     0.000      0  00 00       0.000      0.35
   1065                  0.25     0.078      0  00 09       0.049      0.41
   1130                  0.25     0.626      0  00 00       0.106      0.90
   1155                  0.24     0.098      0  00 07       0.073      0.61
   1173                  0.25     0.106      0  00 15       0.022      0.76 
```

到目前为止，我已经设法在 C 中执行此代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

void main()
{
FILE *fs,*ft;
int ch;
int c;
fs=fopen("node.txt","r");
if (fs=NULL)
{
    puts("cannot open source file");
    exit(0);
}
ft=fopen("new_node.txt","w");
do
{
   ch=fgetc(fs);
   if (ch=EOF)
   break;
   else
   {
    if (ch>0)
    fputc(ch,ft);
   }
     ch++;
}
  while(1);
  fclose(fs);
  fclose(ft);
  return 0;
} 
```

问题是没有任何结果。任何人都可以在这方面提供帮助并提供工作代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:40:32.177

您的数据显然是面向行的；一次读/写一个字符是*没有意义的。*

使用`fgets()`. 检查线路，确定它是否是您要保留的线路。如果是这样，请使用`fputs()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:24:07.570

`if (fs=NULL)`分配`NULL`给`fs`而不是比较它们。用于`==`测试是否相等，即`if (fs==NULL)`

这同样适用`if (ch=EOF)`于您的代码的后面部分。

请注意，启用警告的编译可能会在条件表达式中指出此分配。

这些更改将允许您复制源文件的全部内容。查看是否只想复制以空格/数字开头的行`isspace`。`isdigit`unwind 的使用建议`fgets`会使这变得更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T17:26:33.457

实际上，您的问题很简单：您只是没有使用正确的工具。事实上，在 bash 中（默认安装在大多数 Linux 发行版和 Mac OS X 上。对于 Windows，安装[cygwin](http://cygwin.com/ "赛格温")或[mingw](http://www.mingw.org/ "明威")），这就是工作：

```
tail -n +8 copying_columns.data 
```

实际上，这从第 8 行开始打印文件，有效地跳过了您的标题。awk 提供了一个更通用的解决方案：

```
awk 'x >= 2 {print}; /---/ {++x}' copying_columns.data 
```

也就是说，如果我们遇到两行或多行包含`---`. 在 perl 中，这可以给出：

```
perl -ne 'if ($x >= 2) {print $_;} if (/---/){++$x;} 
```

或者，如果我们将 perl 脚本放入它自己的文件中，则`copying_columns.perl`：

```
#!/usr/bin/perl
use strict;
use warnings;
my $x = 0;
while (<>){
    if ($x >= 2){
        print $_;
    } 
    if (/---/){
        ++$x;
    }
} 
```

运行

```
 perl copying_columns.perl copying_columns.data 
```

作为奖励，这是一个 Python 版本：

```
#!/usr/bin/python
import sys
for f in [open(fname, 'rb') for fname in sys.argv[1:]] or [sys.stdin]:
    x = 0
    for line in f:
        if x >= 2:
            print(line.rstrip('\r\n'))
        if line.find('---') >= 0:
            x += 1
    f.close() 
```

运行

```
python copying_columns.py copying_columns.data 
```

此版本具有重置输入文件之间的计数器的额外优势。

最后，这是我的两分钱：学习（至少:)）其中一种工具：它们非常高效，尤其是对于[数据操作](http://www.drbunsen.org/explorations-in-unix.html "unix 上的探索性数据分析")。

# spring - 在 Spring aop + cglib 中配置代理 bean

> ID：13971094
> 
> 赞同：1
> 
> 时间：2012-12-20T11:22:37.880
> 
> 标签：spring, aop, spring-aop, cglib

我们有一个使用 spring-aop 和 cglib 库的 Spring 3.1 Web 应用程序。春天.xml：

```
<context:annotation-config/>
<aop:aspectj-autoproxy proxy-target-class="true"/> 
```

这意味着将使用 cglib 为每个 bean 创建一个代理。

现在我们需要使用带有 com.mchange.v2.c3p0.ComboPooledDataSource 的 db 连接池 bean：

```
<bean id="connectionPool" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
<!-- here are some properties -->
</bean> 
```

问题是 ComboPooledDataSource 类被标记为 final。而且 cglib 不能代理 final 类。

如何标记“connectionPool”bean 不被代理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T18:57:02.747

基本上，您应该使用不需要代理的排除模式。

[请参阅链接了解更多详情：-](http://docs.spring.io/spring/docs/2.0.x/reference/aop.html)

# iphone - MPMoviePlayerController : 播放器仅在 iOS6 中永久隐藏播放器控件

> ID：13971095
> 
> 赞同：6
> 
> 时间：2012-12-20T11:22:38.073
> 
> 标签：iphone, ios, ios5, mpmovieplayercontroller

MPMoviePlayerController 播放器在按下完成按钮后永久隐藏播放器控件。

我有一个带有moviePlayer.controlStyle = MPMovieControlStyleEmbedded的嵌入式播放器，当用户在moviePlayerDidEnterFullscreen通知中点击全屏模式时，我正在制作[moviePlayer setFullscreen：NO]；并将播放器视频转换为横向模式

```
moviePlayer.view.transform = CGAffineTransformMakeRotation(degreesToRadians(-90)); 
```

和设置

```
moviePlayer.controlStyle =  MPMovieControlStyleFullscreen; 
```

然后，当我点击完成按钮并在 moviePlayBackDidFinish 中，我将视图转换回纵向模式并将 controlStyle 设置为 Embedded。到目前为止，它工作正常。之后该视频将暂停，当我点击播放按钮时，它开始播放，播放器将停留一段时间并永久隐藏。点击视频后，播放器将不再可见。我尝试在延迟后将播放器控件设置为嵌入。但没有任何工作。请帮助解决这个问题。

此问题仅在 iOS 6 以下版本中出现

**代码**

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayBackDidFinish:)
                                             name:MPMoviePlayerPlaybackDidFinishNotification
                                           object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(moviePlayerDidEnterFullscreen:)
                                             name:MPMoviePlayerDidEnterFullscreenNotification
                                           object:nil];

if (mpVideoPlayerController)
{
    [mpVideoPlayerController.moviePlayer pause];
    [mpVideoPlayerController.moviePlayer stop];
}

mpVideoPlayerController = nil;
mpVideoPlayerController = [[VideoPlayerViewController alloc] initWithContentURL: theURL];

mpVideoPlayerController.moviePlayer.movieSourceType = liveStreaming ? MPMovieSourceTypeStreaming : MPMovieSourceTypeUnknown;

if ([mpVideoPlayerController.moviePlayer respondsToSelector:@selector(setAllowsAirPlay:)]) {
    mpVideoPlayerController.moviePlayer.allowsAirPlay = YES;
}

[[mpVideoPlayerController.moviePlayer view] setFrame:viewInsetRect];
mpVideoPlayerController.moviePlayer.controlStyle = MPMovieControlStyleEmbedded;
mpVideoPlayerController.moviePlayer.scalingMode = MPMovieScalingModeAspectFit;
[viewController.view addSubview: [mpVideoPlayerController.moviePlayer view]];
[mpVideoPlayerController.moviePlayer play];
}

-(void) moviePlayerDidEnterFullscreen :(NSNotification*)notification {
    [mpVideoPlayerController.moviePlayer setFullscreen:NO];
    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    [self performSelector:@selector(setControlStyleFullscreen) withObject:nil afterDelay:0.2];
    [UIView animateWithDuration:0.3
                     animations:^{
                         mpVideoPlayerController.moviePlayer.view.transform = CGAffineTransformIdentity;
                         mpVideoPlayerController.moviePlayer.view.transform = CGAffineTransformMakeRotation(degreesToRadians(-90));
                         CGRect frame=[[UIScreen mainScreen] applicationFrame];
                         frame.origin.y=-20;
                         mpVideoPlayerController.moviePlayer.view.frame = frame;//CGRectMake(0.0, 0.0, 480.0, 300.0);
                     } completion:^(BOOL finished) {

                     }];

}

- (void) setControlStyleFullscreen 
         mpVideoPlayerController.moviePlayer.controlStyle =  MPMovieControlStyleFullscreen;

- (void) setControlStyleEmbedded 

        mpVideoPlayerController.moviePlayer.controlStyle =  MPMovieControlStyleEmbedded;

- moviePlayBackDidFinish:

    NSLog(@"moviePlayBackDidFinish:");

    [self rotateToInterfaceOrientation:UIInterfaceOrientationPortrait frameForView:(viewController).videoContentView.frame];

    [[UIApplication sharedApplication] setStatusBarHidden:NO];

    [self performSelector:@selector(setControlStyleEmbedded) withObject:nil afterDelay:0.2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:02:07.900

您的代码有点错误并触发了这些`MPMoviePlayerController`错误。

*   多余的 setFullscreen 因为我们已经全屏了。
*   多余的 setControlStyle，因为我们已经在控制风格全屏

一般来说，您永远不应该在 MPMoviePlayerController 上强制执行已经完成的事情。

```
- (void)moviePlayerDidEnterFullscreen :(NSNotification*)notification 
{
    //
    //remove both lines from this notification handler
    //
    [mpVideoPlayerController.moviePlayer setFullscreen:NO];
    [self performSelector:@selector(setControlStyleFullscreen) withObject:nil afterDelay:0.2];
    [...]
} 
```

您也可以通过检查当前模式来扩展您的 setControlStyleFullscreen / Embedded 实现。这可能看起来很奇怪，但它确实有很大帮助。

```
- (void)setControlStyleEmbedded
{
    if (mpVideoPlayerController.moviePlayer.controlStyle != MPMovieControlStyleEmbedded)
    {
        mpVideoPlayerController.moviePlayer.controlStyle = MPMovieControlStyleEmbedded;
    }
}

- (void)setControlStyleFullscreen
{
    if (mpVideoPlayerController.moviePlayer.controlStyle != MPMovieControlStyleFullscreen)
    {
        mpVideoPlayerController.moviePlayer.controlStyle = MPMovieControlStyleFullscreen;
    }
} 
```

# search - gnus：在多个新闻组中查找来自用户的最近消息

> ID：13971096
> 
> 赞同：1
> 
> 时间：2012-12-20T11:22:38.840
> 
> 标签：search, gnus

使用 gnus，查找用户在多个新闻组中发布的最新（例如 10 条）消息的最佳方法是什么？

我订阅了近 100 个新闻组，有时我*知道*用户 X 最近发布了一个主题：但我找不到该帖子！

想法？

# php - 将数据存储到配置文件

> ID：13971097
> 
> 赞同：3
> 
> 时间：2012-12-20T11:22:43.267
> 
> 标签：php, codeigniter

我在尝试将数据存储到配置文件中时遇到了一些问题`Codeigniter`

**问题**

会话数据变得太大，似乎超过了 cookie 最大大小的 4kb。结果，例如 flashdata 停止工作。

**为什么会发生**

似乎配置变量被添加到以下对象内的会话中 4 次：

*   `CI_Hooks`对象（应关闭）
*   `CI_Utf8`目的
*   `MY_Router`对象（用于在 URL中`'_'`替换）`'-'`
*   `CI_URI`目的

有趣的是，即使在配置文件中关闭了该功能，也会存在 hooks 对象： `$config['enable_hooks'] = FALSE;`

**问题**

1 - 你如何存储配置数据而不在会话中成倍增加？
2 - 另外，为什么钩子对象在配置中被禁用时似乎被启用？

**其他详情**

*   CI_VERSION 2.1.3
*   会话库是自动加载的
*   会话存储在数据库中
*   会话 cookie 已加密
*   配置文件加载在使用它们的页面中，主要在构造函数内部
*   配置数据不是很大，如果不相乘的话，非常适合 4kb

`Session data ( print_r($this->session) ) : [hooks] => CI_Hooks Object ( [enabled] => [hooks] => Array ( ) [in_progress] => ) [config] => CI_Config Object ( [config] => Array...`

提前感谢您的帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:36:20.810

如果您在 CI 会话（实际上是 cookie）方面遇到问题，我建议您使用不同的会话库。

[这个使用原生 PHP 会话](https://github.com/EllisLab/CodeIgniter/wiki/Native-session)，所以你不会遇到 4kb 限制的问题，或者如果你真的想保持 CI 会话，那么使用数据库函数来存储值。

# java - 设置属性时出现 NullPointerException？

> ID：13971099
> 
> 赞同：8
> 
> 时间：2012-12-20T11:22:54.723
> 
> 标签：java, jsp, servlets

例如，我有一个将属性设置为 HttpServletRequest 的 servlet 代码：

```
request.setAttribute("someValue", someValue());
        RequestDispatcher rd = getServletContext().getRequestDispatcher("/SomeJsp.jsp");
        rd.forward(this.request, this.response);
        return; 
```

如何确保上面的代码是线程安全的？

这是我得到的堆栈跟踪：

```
java.lang.NullPointerException
    at org.apache.catalina.connector.Request.notifyAttributeAssigned(Request.java:1552)
    at org.apache.catalina.connector.Request.access$000(Request.java:105)
    at org.apache.catalina.connector.Request$3.set(Request.java:3342)
    at org.apache.catalina.connector.Request.setAttribute(Request.java:1504)
    at org.apache.catalina.connector.RequestFacade.setAttribute(RequestFacade.java:541)
    at org.apache.catalina.core.ApplicationHttpRequest.setAttribute(ApplicationHttpRequest.java:281)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:286)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.mycompany.myapp.servlet.SomeServlet.doRequest(SomeServlet.java:103)
    at com.mycompany.myapp.servlet.SomeServlet.doGet(SomeServlet.java:159) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T11:57:32.243

```
rd.forward(this.request, this.response); 
```

这（双关语）表明您已将`request`和`response`作为类的实例变量。您的具体问题反过来表明该类本身的实例不是线程安全的。

假设它实际上是 servlet 本身，那么您就有了问题的原因。Servlet 根本不是线程安全的。在 webapp 启动期间只创建了一个实例，然后在应用程序范围内的*所有*请求中共享。

您**永远**不应将请求或会话范围的数据分配为 servlet 的实例变量。它只会在同时发生另一个 HTTP 请求时被覆盖。正如您自己遇到的那样，这将使您的代码线程不安全。

这里有一些代码说明了这一点：

```
public class MyServlet extends HttpServlet {

    private Object thisIsNOTThreadSafe;

    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        Object thisIsThreadSafe;

        thisIsNOTThreadSafe = request.getParameter("foo"); // BAD!! Shared among all requests!
        thisIsThreadSafe = request.getParameter("foo"); // OK, this is thread safe.
    } 
} 
```

将 HTTP 请求本身分配为 servlet 的实例变量实际上是一个巨大的错误。当用户 Y 在处理用户 X 的请求的同时触发另一个请求时，用户 X 将立即获得用户 Y 的`request`和`response`对象。这绝对是线程不安全的。导致 NPE 是因为`request`此时对用户 Y 的处理“完成”并因此被释放/销毁。

### 也可以看看：

*   [servlet 是如何工作的？实例化、会话、共享变量和多线程](https://stackoverflow.com/questions/3106452/how-do-servlets-work-instantiation-session-variables-and-multithreading)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:35:51.233

根据定义，请求是线程安全的（与 Session 和 ServletContext 不同）。

关于例外：您使用的是什么 Tomcat 版本？这看起来像一个 Tomcat 错误。

作为方法返回类型的类是否`someValue()`实现`HttpAttributeBindingListener`？而且，`someValue()`方法可以返回`null`吗？如果两者都是，那么`NullPointerException`很明显。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:32:19.623

不使用此运算符

```
 RequestDispatcher rd = getServletContext().getRequestDispatcher("/SomeJsp.jsp");
    rd.forward(request, response);
    return; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T11:36:40.680

我不确定这与线程安全有什么关系。

您得到的异常是 NullPointerException，看起来 Tomcat 正在尝试调用空对象上的方法。

在 Java Web 应用程序中，每个请求都有自己的 HttpServletRequest 实例，因此您可以设置请求的属性并确信它仅适用于该用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T06:20:04.807

如果你在 tomcat 中查看请求接口的实现，它看起来像下面的代码。

```
public void setAttribute(String name, Object value) {

    // Name cannot be null
    if (name == null)
        throw new IllegalArgumentException
            (sm.getString("coyoteRequest.setAttribute.namenull"));

    // Null value is the same as removeAttribute()
    if (value == null) {
        removeAttribute(name);
        return;
    }

    if (name.equals(Globals.DISPATCHER_TYPE_ATTR)) {
        internalDispatcherType = (DispatcherType)value;
        return;
    } else if (name.equals(Globals.DISPATCHER_REQUEST_PATH_ATTR)) {
        requestDispatcherPath = value;
        return;
    } 
```

可以清楚地看到，如果 key 为 null，那么它会抛出**IllegalArgumentException**，但如果 value 为**null**，那么它只是从存储库中删除该 key 和旧的关联对象。但是如果它们都不是**空**的，它会将对象与该键相关联并将它们添加到存储库中。

这似乎是一个临时或 tomcat 问题。

有关实现的更多信息，请参阅下面的链接 [Source code of Request Implementation by tomcat](http://grepcode.com/file_/repo1.maven.org/maven2/org.apache.tomcat/tomcat-catalina/7.0.0/org/apache/catalina/connector/Request.java/?v=source)

# java - 包含 ArrayList 失败

> ID：13971102
> 
> 赞同：1
> 
> 时间：2012-12-20T11:23:08.627
> 
> 标签：java, contains

以下是我编写的一个大库的一部分，所以我只显示一小段代码。如果需要更多，请告诉我。

我正在制作一个工具，我可以在其中选择贝塞尔曲线的锚点。奇怪的是，例如，我选择了一个锚。然后我可以按住 shift 进行切换选择，其中未选中的锚点被选中，选中的锚点未被选中。我选择了同一个锚。然后在第一行代码中检查它是否在 ArrayList lastAnchorSelection 中。它是一部分，但由于某种原因它仍在继续。然后它报告最后一个选择的大小，即 1。然后我将对象从 arrayList 中取出并针对 v 进行测试，它打印出来是真的。

那么第一行如何导致错误，而第四行结果为真呢？

```
if (lastAnchorSelection.contains(v) == false) {
  System.out.println("lastAnchorSelection.size(): "+lastAnchorSelection.size());
  CVector test = lastAnchorSelection.get(0);
  System.out.println(test == v);
  System.out.println("C"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:25:44.810

`Collection.contains`是根据`equals()`方法指定的。的实现`equals()`应该遵循一些规则（参见 Object 类 javadoc），其中第一个是

*   它是自反的：对于任何非空引用值`x`，`x.equals(x)`都应该返回`true`。

但看起来 的类`v`有一个违反此规则的不兼容`equals()`实现。

要么是线程问题，要么是线程问题，并且其他一些线程正在添加`v`到`contains()`test 和`get(0)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:25:18.463

第一行用于`equals()`比较，第二行用于比较引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:30:42.807

来自[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#contains%28java.lang.Object%29)

> 如果此列表包含指定元素，则返回 true。更正式地说，当且仅当此列表包含至少一个元素 e 满足 (o==null ? e==null : o.equals(e)) 时，才返回 true。

在你的情况下，这将是`v.equals(test)`. 当这返回 false 时，`contains(v)`也返回 false。

第 4 行比较`v == test`，这是一个不同的比较`v.equals(test)`。

`v == test`比较 和 的`v`引用`test`。当`v`和`test`引用同一个对象时， this 返回 true。而`v.equals(test)`调用方法`equals`，它可能会根据其实现返回任何东西（甚至是错误的）。

# javascript - 如何动态设置div标签的高度？

> ID：13971107
> 
> 赞同：2
> 
> 时间：2012-12-20T11:23:24.370
> 
> 标签：javascript, jquery, html

我正在使用 ASP.NET 和 C#。我需要根据屏幕分辨率更改 div 标签的高度。这是我尝试过的。

```
function setHeight() {
        var footer = document.getElementById('footerSection').offsetHeight;
        var h = document.documentElement.offsetHeight - footer;
        document.getElementById('rightContent').style.height = h+"px";    
}; 
```

我从这样的body标签的onload中调用这个脚本。

```
<body onload="setHeight();"> 
```

它正在工作，但是这个高度在渲染完成后分配给那个 div。因此，首先它会显示根据内部内容分配的高度，在几分之一秒后，高度会更改为我分配的高度。

那么是否可以在渲染之前或加载到窗口之前设置高度？实际上我不希望用户看到高度变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:27:50.243

如何动态地将内容添加到 div，以便页面加载，然后在内容显示的同时设置高度？

或者，最初给 div 一个 display:none;

```
<div id="rightContent" style="display:none"> 
```

然后在 setHeight() 中，添加：

```
document.getElementById('rightContent').style.display = "block"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:31:57.783

您可以使用 jquery dom 就绪处理程序实现此目的：

首先在顶部添加一个 jquery 插件*（最新的 1.8.2 ir 1.8.3）*

```
<script src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script> 
```

那么这个：

```
<script>
function setHeight() {
    var footer = document.getElementById('footerSection').offsetHeight;
    var h = document.documentElement.offsetHeight - footer;
    document.getElementById('rightContent').style.height = h+"px";    
}

$(function(){
   setHeight();
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:32:12.290

当您使用 jQuery 标记您的问题时，您可以更改代码以使用 jQuery 的 DOM 就绪处理程序，该处理程序应该停止 FOUC（无样式内容的 Flash）。

试试这个：

```
<script type="text/javascript">
    function setHeight() {
        var footerTop = $('#footerSection').offset().top;
        var h = $(document).height() - footerTop;
        $('#rightContent').height(h);
    };

    $(function() {
        setHeight();
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:30:20.523

您*可以*`<div>`通过在样式表中设置它来设置页面呈现之前的高度。

但是，您的代码会查看文档和页脚的高度，以计算`<div>`应该是什么高度。在呈现页面之前，您不知道文档或页脚有多高。

您可以尝试使用[jQuery 的 ready 事件](http://api.jquery.com/ready/)来使您的函数更早地触发。它可能足够快以避免用户看到`<div>`变化的高度。

# php - yii 验证错误仅显示在视图文件中

> ID：13971112
> 
> 赞同：0
> 
> 时间：2012-12-20T11:23:35.383
> 
> 标签：php, yii

我正在使用 yii 1.1.12。我的一个注册表单没有显示任何错误，验证工作正常，但唯一的问题是错误消息以样式显示`display:none;`，因此它不可见，如下所示。任何帮助都非常可观。

**模型**

* * *

```
<?php

/**
 * This is the model class for table "users".
 *
 * The followings are the available columns in table 'users':
 * @property integer $id
 * @property string $user_name
 * @property string $password
 * @property string $email
 * @property string $premium_expiry_date
 * @property integer $active
 */
class Users extends CActiveRecord
{
    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return Users the static model class
     */
        public $name;
        public $date;
        public $month;
        public $year;
        public $gender;
        public $religion;
        public $caste;
        public $mobile;

    public static function model($className=__CLASS__)
    {
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        return 'users';
    }

    /**
     * @return array validation rules for model attributes.
     */
    public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
                        return array(
            array('user_name, password, email, premium_expiry_date, active', 'required','on'=>array('registration')),
                        array(', password, email, premium_expiry_date, active', 'required','on'=>array('registration')),
            array('active', 'numerical', 'integerOnly'=>true),
            array('user_name, email', 'length', 'max'=>50),
            array('password', 'length', 'max'=>100),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('name, date, month, year, gender, religion, caste, mobile, email, password', 'required','on'=>array('reg_home')),
                        array('email', 'unique'),
                        array('date', 'length', 'max'=>2,'on'=>array('reg_home')),
                        array('email', 'email'),
                        array('email', 'length', 'max'=>50,'on'=>array('reg_home')),
                        array('name', 'length', 'max'=>30,'on'=>array('reg_home')),
                        array('month', 'length', 'max'=>20,'on'=>array('reg_home')),
                        array('year', 'length', 'max'=>4,'on'=>array('reg_home')),
                        array('gender', 'length', 'max'=>6,'on'=>array('reg_home')),
                        array('religion', 'length', 'max'=>4,'on'=>array('reg_home')),
                        array('id, user_name, password, email, premium_expiry_date, name, date, month, year, gender, religion, caste, mobile, active', 'safe', 'on'=>'search'),
        );
    }

    /**
     * @return array relational rules.
     */
    public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
        );
    }

    /**
     * @return array customized attribute labels (name=>label)
     */
    public function attributeLabels()
    {
        return array(
            'id' => 'ID',
            'user_name' => 'User Name',
            'password' => 'Login Password',
            'email' => 'Email',
            'premium_expiry_date' => 'Premium Expiry Date',
            'active' => 'Active',
        );
    }

    /**
     * Retrieves a list of models based on the current search/filter conditions.
     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
     */
    public function search()
    {
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id);
        $criteria->compare('user_name',$this->user_name,true);
        $criteria->compare('password',$this->password,true);
        $criteria->compare('email',$this->email,true);
        $criteria->compare('premium_expiry_date',$this->premium_expiry_date,true);
        $criteria->compare('active',$this->active);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
} 
```

**控制器**

* * *

```
public function actionIndex()
    {

            $model=new Users('reg_home');
            if(isset($_POST['Users']))
            {

                $model->attributes=$_POST['Users'];
                $model->validate();
                   // print_r($model->getErrors());
                if($model->save())
                {
                   /* echo 'done';
                    exit;*/
                }
                else
                {
                    /*print_r($model->getErrors()); exit;
                    echo '!!!!!!!!!!!';
                    exit;*/
                }
                ////print_r($model->validators); exit;  
                //print_r($model->attributes);
            }
            //$model->validate();
           // $ww=new Users
            $pages_model=new Pages;
            $welcome_content=$pages_model->find('page_heading=:page_heading',array(':page_heading'=>'Home'));
            $welcome_content=$welcome_content['page_content'];            //echo $welcome_content;exit;
            $db_cretiria=new CDbCriteria(array('condition'=>'success_couple=:success_couple','params'=>array(':success_couple'=>1),'order'=>'id DESC','limit'=>2));
            //print_r(count($db_cretiria)); exit;
            $gallery_modle=new Gallery;
            $success_couple=$gallery_modle->findAll($db_cretiria);
            foreach($success_couple as $val)
            {
                $success_couple_array[$val['id']]=$val['image_new_name'];
            }

            $religion_model=new Religion;
            $religion=$religion_model->findAll();
            foreach($religion as $val)
            {
                $religion_array[$val['id']]=$val['religion'];
            }
            $this->layout='matrimony';
            //print_r($model->getErrors()); exit;
            $this->render('index',array('welcome_content'=>$welcome_content,'success_couple_array'=>$success_couple_array,'model'=>$model,'religion_array'=>$religion_array));           

    } 
```

**看法：**

* * *

```
<script type="text/javascript" src="<?php echo Yii::app()->getBaseUrl(true); ?>/js/common_front.js"></script>
<section id="gallery">
        <div class="gal-slide">
           <div class="slider-wrapper theme-default">
            <div id="slider" class="nivoSlider">
            <img src="<?php echo Yii::app()->getBaseUrl(true); ?>/images/slide-1.png" width="562" height="350" alt="slide">
            <img src="<?php echo Yii::app()->getBaseUrl(true); ?>/images/slide-2.png" width="562" height="350" alt="slide">
            </div>        
            </div>
        </div>
        <div class="gal-form">
    <div id="tabs">
                <ul>
                  <li><a href="#tab-1">Register</a></li>
                  <li><a href="#tab-2">Search</a></li>
                </ul>

    <div id="tab-1">
      <?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'reg-form-reg-form',
    'enableAjaxValidation'=>false,

));
     // print_r($model->getErrors()); 
     // print_r($form->error($model,'name'));exit;
      //echo $form->errorSummary($model); exit;
      ?>
        <table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td><?php echo $form->labelEx($model,'name'); ?>
        </td>
    <td width="10">&nbsp;</td>
    <td>
        <?php echo $form->textField($model,'name'); ?>
    <?php echo $form->error($model,'name'); ?>
   </td>
  </tr>
  <tr>
    <td>Date Of Birth *</td>
    <td>&nbsp;</td>
    <td>
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="84">
                <?php for($i=1;$i<=31;$i++){$date[$i]=$i;} ?>
                <?php echo $form->dropDownList($model,'date',$date); ?>
        <?php echo $form->error($model,'date'); ?>

        </td>
        <td width="84">

        <?php 
                $month=array('January'=>'January','February'=>'February','March'=>'March','April'=>'April','May'=>'May','June'=>'June','July'=>'July','August'=>'August','September'=>'September','October'=>'October','November'=>'November','December'=>'December');
                echo $form->dropDownList($model,'month',$month); ?>
        <?php echo $form->error($model,'month'); ?></td>
        <td>    <?php
                $last_year=date('Y')-18;
                $last_year_last=$last_year-85;
                $year_range=range($last_year,$last_year_last);
                foreach($year_range as $val) // atleast 18 age
                {
                    $year_val[$val]=$val;
                }
                echo $form->dropDownList($model,'year',$year_val);
         echo $form->error($model,'year'); ?></td>
      </tr>
    </table>
    </td>
  </tr>
  <tr>
    <td>Gender *</td>
    <td>&nbsp;</td>
    <td><label>
      <input type="radio" name="Users[gender]" id="male" value="male">
      Male
      <input type="radio" name="Users[gender]" id="male2" value="female"> 
      Female
</label></td>
  </tr>
  <tr>
    <td><?php echo $form->labelEx($model,'religion'); ?>
        </td>
    <td>&nbsp;</td>
    <td><?php echo $form->dropDownList($model,'religion',$religion_array,array('class'=>'selet', 'onClick'=>"javascript:list_caste(this);")); ?>
        <?php echo $form->error($model,'religion'); ?></td>
  </tr>
  <tr>
    <td><?php echo $form->labelEx($model,'caste'); ?></td>
    <td>&nbsp;</td>
    <td><?php echo $form->dropDownList($model,'caste',array(''=>'select religion'),array('class'=>'selet',)); ?>
        <?php echo $form->error($model,'caste'); ?>
    </select></td>
  </tr>
  <tr>
    <td><?php echo $form->labelEx($model,'mobile'); ?></td>
    <td>&nbsp;</td>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td><select name="date6" id="date6"><option value="+91">+91</option>
        </select></td>
        <td><?php echo $form->textField($model,'mobile',array('class'=>'mobile')); ?>
        <?php echo $form->error($model,'mobile'); ?></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td><?php echo $form->labelEx($model,'email'); ?></td>
    <td>&nbsp;</td>
    <td><?php echo $form->textField($model,'email'); ?>
    <?php echo $form->error($model,'email'); ?></td>
  </tr>
  <tr>
    <td><?php echo $form->labelEx($model,'password'); ?></td>
    <td>&nbsp;</td>
    <td><?php echo $form->passwordField($model,'password'); ?></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><label>
          <?php echo CHtml::submitButton('Register Free',array('class'=>'subt')); ?>

    </label></td>
  </tr>
</table>
       <?php $this->endWidget(); ?> 

    </div>

    <div id="tab-2">
<form action="search.php" method="get">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
    <td>Looking For</td>
    <td width="10">&nbsp;</td>
    <td>
        <select class="selet" name="listbox" id="listbox">
          <option>Bride</option>
          <option>Groom</option>
        </select>
    </td>
  </tr>
  <tr>
    <td>Age</td>
    <td>&nbsp;</td>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="112"><select name="listbox2" id="listbox2">
          <option>select</option>
          <option>18</option>
        </select></td>
        <td width="57">To</td>
        <td><select name="listbox3" id="listbox3">
          <option>Select</option>
          <option>22</option>
        </select></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td>Height(CM)</td>
    <td>&nbsp;</td>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td width="112"><select name="listbox4" id="listbox4">
          <option>select</option>
          <option>18</option>
        </select></td>
        <td width="57">To</td>
        <td><select name="listbox4" id="listbox5">
          <option>Select</option>
          <option>22</option>
        </select></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td>With Photo</td>
    <td>&nbsp;</td>
    <td><table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td><label>
          <input type="checkbox" name="tick" id="tick" />
        </label></td>
        <td><label>
          <input class="subt"  type="submit" name="button" id="button" value="Search" />
        </label></td>
      </tr>
    </table></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>Member id</td>
    <td>&nbsp;</td>
    <td><label>
      <input type="text" name="textfield" id="textfield" />
    </label></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><input class="subt" type="submit" name="button2" id="button2" value="Search" /></td>
  </tr>
</table>

</form>
    </div> 
  </div>
        </div>
     </section> 
     <section id="content">
        <div class="left">
            <div class="text">
                    <?php echo $welcome_content; ?>
                </div>

            <div class="premia">
            <h2>Premium Display</h2>
                <ul>
                <li>
                <img src="<?php echo Yii::app()->getBaseUrl(true); ?>/images/pre.png" width="130" height="79" alt="groum">
                <span> <span class="name">Sasi </span><span class="yer">25yrs</span></span><span class="id">Profile ID : MI-230001 </span>
                </li>
                <li><img src="<?php echo Yii::app()->getBaseUrl(true); ?>/images/pre.png" width="130" height="79" alt="groum"><span> <span class="name">Sasi </span><span class="yer">25yrs</span></span>
                  <span class="id">Profile ID : MI-230001 </span></li>
                <li><img src="<?php echo Yii::app()->getBaseUrl(true); ?>/images/pre.png" width="130" height="79" alt="groum"><span> <span class="name">Sasi </span><span class="yer">25yrs</span></span>
                  <span class="id">Profile ID : MI-230001 </span></li>
                <li><img src="<?php echo Yii::app()->getBaseUrl(true); ?>/images/pre.png" width="130" height="79" alt="groum"><span> <span class="name">Sasi </span><span class="yer">25yrs</span></span>
                  <span class="id">Profile ID : MI-230001 </span></li>
                <div class="clear"></div>
                </ul>
            </div>
        </div>
        <div class="right">
          <div class="sucouple">
            <h3>Success Couples</h3>
              <ul>
                      <?php
                      $base= Yii::app()->getBaseUrl(true);
                      //print_r($success_couple_array);
                      foreach($success_couple_array as $val)
                      {

                          echo "<li><img src=\"$base/gallery/thumb/$val\" width=\"199\" height=\"124\" alt=\"couples\"></li>";
                      }
                      ?>

              </ul>
            </div>
        </div>
        <div class="clear"></div>
     </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T13:25:07.443

如果 yiiactiveform 无法识别自定义字段 id，它会使用默认字段 id，这会导致显示：无。

在这种情况下，您应该添加一个 inputID：

```
$form->error($model,'fieldname',array('inputID'=>'custom-id-fieldname')); 
```

# bash - 如何使用 sed 将路径字符串上的“/”替换为“\/”？

> ID：13971113
> 
> 赞同：5
> 
> 时间：2012-12-20T11:23:36.383
> 
> 标签：bash, shell, sed, sh

我试过这个：

```
PATH="/user/dj/a/mydir"
PATH_FORMAT=`echo "${PATH}" | sed 's/\//\\\//'` 
```

但它只替换第一个“/”。我希望得到的 PATH_FORMAT 值为：

```
"\/user\/dj\/a\/mydir" 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T11:26:54.190

`g`在您的替代命令中添加一个标志：

```
echo "${PATH}" | sed 's/\//\\//g' 
```

或者更具可读性，根据评论中的*Jonathan Wakely*：

```
echo "${PATH}" | sed 's:/:\\/:g' 
```

要实现您在问题中描述的内容，您还需要一个反斜杠：

```
echo /user/dj/a/mydir | sed 's:/:\\\/:g' 
```

输出：

```
\/user\/dj\/a\/mydir 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-13T12:12:21.043

如果您正在运行 shell 脚本，请使用 Bash 的参数扩展：

```
MYPATH="/user/dj/a/mydir"
PATH_FORMAT=${MYPATH////\\/} 
```

替换由替换*所有*模式的语法`${parameter}`扩展。可以是正则表达式。在你的情况下，是：。替换为：。`${parameter//pattern/string}`*`parameter``pattern``pattern``/``string``\\/`*

 *此外，**避免在变量中存储一些东西`PATH`**，因为它可能被系统使用——除非你想修改系统的路径变量。

引用[gnu.org](https://www.gnu.org/software/bash/manual/html_node/Shell-Parameter-Expansion.html)的参数扩展手册：

> **${参数/模式/字符串}**
> 
> 该模式被扩展以产生一个模式，就像在文件名扩展中一样。参数被扩展，模式与其值的最长匹配被替换为字符串。根据下面描述的规则执行匹配（请参阅模式匹配）。**如果 pattern 以 开头`/`，则所有匹配的 pattern 都被替换为 string。**通常只替换第一场比赛。如果模式以 开头`#`，它必须匹配参数扩展值的开头。如果模式以`%`，它必须在参数扩展值的末尾匹配。如果 string 为 null，则删除 pattern 的匹配项，并且可以省略 / 后面的 pattern。如果启用了 nocasematch shell 选项（参见 Shopt Builtin 中 shopt 的描述），则执行匹配时不考虑字母字符的大小写。如果 parameter 是`@`or `*`，则依次对每个位置参数应用替换操作，展开是结果列表。`@`如果 parameter 是一个以or为下标的数组变量`*`，则替换操作依次应用于数组的每个成员，展开是结果列表。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-31T18:38:34.160

```
sed "s%/%\\\\\\/%g" 
```

. 就如此容易*

# c++ - C++ 寻找给定位置的 std::string::iterator

> ID：13971114
> 
> 赞同：3
> 
> 时间：2012-12-20T11:23:38.630
> 
> 标签：c++, string, iterator, seek

是否有可能`std::string::iterator`安全地寻求一个给定的位置？

std::string::iterator 有一个偏移访问运算符（operator []），但它存在于某些人定义为未定义行为的类别中，例如`it + 3`.

[cplusplus.com 参考](http://www.cplusplus.com/reference/iterator/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:35:12.020

> std::string::iterator 有一个偏移访问运算符（operator []），但它存在于某些人定义为未定义行为的类别中，比如 it + 3。

我不明白这个说法。没有这样的类别。`std::basic_string<>::iterator`是一个随机访问迭代器，因此您可以通过在其中添加或减去偏移量来寻找（这与您链接到的文档一致）：

```
auto new_it = it + offset; 
```

未定义的是越过`end()`相关容器的迭代器，或在其开始之前。也就是说，以下是未定义的行为：

```
std::string str = "hi";
auto it1 = str.begin() + 2; // OK.
assert(it1 == str.end());
auto it2 = str.begin() + 3; // UB!
// At this point we cannot assert anything about it2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:33:19.967

我不知道你从哪里得到`operator[]`UB的想法`std::string::iterator`。它被定义为一个随机访问迭代器，它`i[n]`支持`i + n`.

根据其他地方的评论，您似乎是在绝对定位之后（从您的问题的措辞中不是很清楚）。你不能从一个你不知道位置的迭代器做到这一点，但是你可以通过相对于由返回的迭代器进行偏移来实现相同的效果`begin()`，即：`str.begin()[3]`或`str.begin() + 3`。如果您手边没有原始琴弦，那您就完蛋了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:33:57.327

标准迭代器的指定方式是它们不需要引用它们迭代的容器（或其他序列）；这意味着无法仅使用迭代器进行“绝对搜索”。您需要从字符串中获取一个新的迭代器，检查自己是否在范围内；就像是：

```
std::string::iterator seek(std::string & s, size_t i) {
    return s.length() <= i ? s.end() : s.begin() + i;
} 
```

`operator[]`只要您保持在范围内，随机访问迭代器和字符串的算术就已经定义明确。仅当您超出范围时，行为才不确定。

# jpql - JPQL NEW 运算符与本机查询？

> ID：13971125
> 
> 赞同：2
> 
> 时间：2012-12-20T11:24:11.207
> 
> 标签：jpql

我可以使用`NEW`JPQL 运算符将查询结果映射到里面`DTO`吗？

我测试了这段代码：

```
Query query = em.createNativeQuery("SELECT NEW com.sim.dtos.entities.FreeLocation(t1.galaxie, t1.ss, t1.position) FROM ...");

List<FreeLocation> l = query.getResultList(); 
```

但我有例外：

> [#|2012-12-20T12:9:21.203+0100|警告|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=79;_ThreadName=Thread-2;| StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet 抛出异常 org.postgresql.util.PSQLException: ERREUR: erreur de syntaxe sur ou près de « 。» 职位：15

那么我可以将`NEW`运算符与本机查询一起使用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:22:14.883

根据定义，本机查询是 SQL 查询。它必须包含特定数据库的有效 SQL。

查询将返回 a ，并且迭代列表并为每个数组`List<Object[]>`创建一个新实例应该是微不足道的。`FreeLocation``Object[]`

# c++ - C++/WRL 项目未知命名空间 Windows::Storage

> ID：13971132
> 
> 赞同：0
> 
> 时间：2012-12-20T11:24:48.197
> 
> 标签：c++, stream, wrl

在我的 Windows Store 应用程序中，我使用 C++ 组件来使用 Sink Writer。我为此创建了一个 C++/WRL 项目，该项目具有一个接受流作为参数的函数，以便接收器写入器写入。该参数的类型是 Windows::Storage::Streams::FileRandomAccessStream。现在它给出的错误是命名空间 Windows::Storage 未知，当我包含头文件 windows.storage.h 时，错误是“使用未定义类型'ABI::Windows::Storage::Streams: :FileRandomAccessStream'"。

有谁知道问题是什么以及如何解决？

提前致谢！

罗纳德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T19:23:21.087

运行时类是 Windows 运行时类型系统的逻辑概念。在 Windows 运行时 ABI 层编程时（例如使用 WRL），您不能使用运行时类等逻辑功能；只有通过语言预测（如 C++/CX）才能使用这些功能。

相反，ABI 层的编程很像 COM 编程：只有接口。您只能`FileRandomAccessStream`通过类型实现的接口之一（例如`IRandomAccessStream`）引用对象。

# web-services - 提供官方电影艺术和屏幕截图的 Web 服务

> ID：13971134
> 
> 赞同：1
> 
> 时间：2012-12-20T11:24:50.817
> 
> 标签：web-services

有没有提供官方电影艺术或电影截图的网络服务？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:35:32.660

作为免责声明，我不确定与以下任一 API 相关的成本，并且我不隶属于任何一个集团/组织/公司。

烂番茄似乎提供了一个可以获取电影海报的 API：http:
[//developer.rottentomatoes.com/docs](http://developer.rottentomatoes.com/docs)

电影数据库 API 也可能是一个选项；看起来它可以获取 ID 的海报和背景（也可以在 API 中搜索）：
[http ://docs.themoviedb.apiary.io/#get-%2F3%2Fmovie%2F%7Bid%7D %2F 图像](http://docs.themoviedb.apiary.io/#get-%2F3%2Fmovie%2F%7Bid%7D%2Fimages)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:15:55.823

您始终可以使用 Netflix oData 服务：http: [//developer.netflix.com/docs/oData_Catalog](http://developer.netflix.com/docs/oData_Catalog)

# svn - TortoiseSVN 樱桃采摘

> ID：13971138
> 
> 赞同：26
> 
> 时间：2012-12-20T11:25:01.550
> 
> 标签：svn, version-control, tortoisesvn, cherry-pick

我即将将主干中的某些修订合并到发布分支中。我已经用mergeinfo检查了有多少修订有资格被合并，那是42个。虽然检查每个修订日志并决定是否应该合并绝对是可能的，而且并不难。然后，我会使用 TortoiseSVN 检查日志并使用命令行`svn merge -c rev1,rev2`功能或`-r`当然是范围。

我想知道 TortoiseSVN 是否有一个工具可以让这种挑选工作变得更容易。我用谷歌搜索了它，但发现只有 TortoiseGit 可能有它。

也欢迎任何其他使此过程更容易（和更快）的方法！

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-20T12:07:19.033

我对 TortoiseGit 一无所知，但 TortoiseSVN 有相当不错的“合并”对话。在“要合并的修订范围”部分中，选择“显示日志”并根据需要选择尽可能多的修订：

![TortoiseSVN 合并](../Images/eac1cd5ac3a406e71f9fa2018d352ece.png)

此外，已经合并的修订将显示为灰色：

![灰显的修订](../Images/420fe328493a1df302d33c6b24eb7850.png)

# objective-c - 从后台返回时显示启动画面

> ID：13971142
> 
> 赞同：0
> 
> 时间：2012-12-20T11:25:09.617
> 
> 标签：objective-c, xcode

嗨，当我的应用程序从后台返回时，是否可以合法地显示启动画面。如果是的话..我必须在这段代码中插入什么？谢谢

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:56:05.093

在我的几个应用程序中我需要同样的东西 - 只需将 UIImageView 添加到窗口。并在应用程序进入后台时显示它并在延迟后将其淡出:)

有关更多详细信息，请参阅此答案： [https ://stackoverflow.com/a/10967054/894671](https://stackoverflow.com/a/10967054/894671)

# php - 页面更改时视频流继续

> ID：13971144
> 
> 赞同：0
> 
> 时间：2012-12-20T11:25:10.333
> 
> 标签：php, html, video

我正在开发一个 php 和 html 的项目，因为我必须在网站的标题上放一个视频。当我更改页面时，视频应继续流式传输，并且地址栏中的链接也应更改。
有谁知道如何实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:31:39.113

既然你用 php 标记了这个问题：我认为它不可能只用 PHP 来做到这一点。您将需要 JS 来通过 Ajax 在页面中加载您需要的内容，而无需刷新站点。如果不刷新网站，视频将继续播放，一切都应该没问题。只需使用 JS/Ajax 加载所需的特定内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:44:44.240

您面临两个问题。1 正在更改地址栏，2 正在继续电影所在的位置。

选项 1：当您更改地址栏时，页面将重新加载。唯一的例外是书签 (#code)，它可以在不重新加载页面的情况下更改。你可以用它`document.location.hash`来改变它。您还可以检查[jquery 历史](http://www.google.be/search?q=jquery+history+plugin) 插件以获取 jquery 平台的历史插件，以结合使用 ajax。

这允许您使用后退/前进按钮并将 url 发送给其他人。请记住，这确实需要一些编码工作才能使其正常工作。

这对用户来说确实看起来更好，因为视频将继续播放，就像没有其他任何变化一样。

选项 2：使用 javascript`onunload`事件获取正在播放的视频的当前位置。然后页面将像往常一样重新加载到新页面，然后使用`onload`事件或 jquery 将视频向前移动到最后播放位置。

这对于用户来说看起来更少，因为视频将停止，页面将刷新，视频将在开始时显示停止，视频将需要重新加载，然后它可以向前跳。

所以总而言之。第一个是最好的方法，但需要更多的努力，然后我可以在一个遮阳篷中解释。第二个更容易实现。

# javascript - Node & Redis：Redis 客户端

> ID：13971145
> 
> 赞同：15
> 
> 时间：2012-12-20T11:25:13.123
> 
> 标签：javascript, performance, api, node.js, redis

假设您在 Redis 中有**多个**要从中插入和/或删除数据的数据库。你有这样的流程；

*   将数据插入**DB #1**
*   在第一次插入的**回调**之后做一些事情并将数据插入**DB #2**
*   在第二次插入的**回调**之后再次做一些事情，最后将数据插入到**DB #3**

我使用了一个名为**redisClient**的变量，它基本上被创建为；

```
redisClient = redis.createClient(); 
```

在选择新数据库时，我使用带有额外预警回调的 select 命令，所以我的 select 命令就像**；**

```
redisClient.select(1, function(err) {
  //Some programming logic (Insertion, deletion and stuff)
  redisClient.select(2, function(err) {
    //Do some additional programming logic (Insertion, deletion and stuff)
  }
}); 
```

然而，事情变得不断混合。我想指出 redisClient 变量只分配了一次，然后在整个应用程序中使用。现在我想知道，为我在 Redis**中的每个数据库使用单独的 redisClients有多合理。**所以它会像;

```
redisClientForDB1 = redis.createClient();
redisClientForDB2 = redis.createClient();
redisClientForDB3 = redis.createClient(); 
```

我想知道这是否合理，或者对于**每秒接收 4K 请求**并即将进入生产模式的应用程序来说，这是否是正确的方法。该模型可能面临哪些**问题？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T19:12:26.330

正如[Carl Zulauf 所说](/questions/13971145/node-redis-redis-clients/14127737#14006599)，最好打开 3 个不同的连接（每个 DB 一个）：

```
redisClient = {
  DB1: redis.createClient(),
  DB2: redis.createClient(),
  DB3: redis.createClient()
}; 
```

最好在服务器初始化期间打开所有连接：

```
async.parallel([
  DB1.select.bind(DB1, 1),
  DB2.select.bind(DB2, 2),
  DB3.select.bind(DB3, 3)
], next); 
```

因此，在您创建`redisClient`对象并对其进行初始化之后，您可以使用它来处理您的所有 redis 操作。

如果您以这种方式使用 redis，节点将为每个节点进程打开 3 个（且仅 3 个）连接。

* * *

**注意**将它们全部放在一个节点模块中也是一个好主意：

```
module.exports = {
  DB1: redis.createClient(),
  DB2: redis.createClient(),
  DB3: redis.createClient(),
  init: function(next) {
    var select = redis.RedisClient.prototype.select;
    require('async').parallel([
      select.bind(this.DB1, 1),
      select.bind(this.DB2, 2),
      select.bind(this.DB3, 3)
    ], next);
  }
}; 
```

然后，您将能够通过调用`init`一次函数来初始化所有 redis 连接（因为节点缓存`require`调用）：

```
require('./lib/my_redis').init(function(err) {
  if (err) throw err;
  server.listen();
}); 
```

然后何时`require('./lib/my_redis').DB1.set('key','val')`将在您的任何模块中调用`DB1`将已经初始化。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-22T21:10:18.140

对 3 个不同的数据库使用 3 个连接是正确的方法。打开其他连接会产生开销，但开销非常小。

对于数百个打开的连接，开销将开始成为问题。我不确定您将运行多少个应用程序实例，但猜测每个进程只有 3 个连接，您不会得到任何接近有问题的数字。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-10T14:01:36.223

如果 Google 将您带到这里，请帮自己一个忙：不要使用多个数据库支持。使用命名空间键或多个 redis 实例。

我在自己在异步环境中与多个数据库支持作斗争之后这么说。不知不觉中，我访问了 Freenode 上的#redis，并被 Redis 的作者 Salvatore Sanfilippo 提到了以下声明：

> 我认为 Redis 多数据库错误是我在 Redis 设计中最糟糕的决定......我希望在某些时候我们可以完全放弃对多数据库的支持，但我认为这可能为时已晚，因为有很多人依赖这个功能适合他们的工作。
> 
> [https://groups.google.com/d/msg/redis-db/vS5wX8X4Cjg/8ounBXitG4sJ](https://groups.google.com/d/msg/redis-db/vS5wX8X4Cjg/8ounBXitG4sJ)

在依赖作者最后悔的功能*之前*，您真的要三思而后行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T16:14:24.000

除了为 3 个不同的数据库设置 3 个不同的连接之外，您还可以`MULTI/EXEC`为此使用 block：

```
redisClient.multi().select(1).set("my_key_in_db_1","myval").exec() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T06:14:47.617

为每个数据库使用一个实例是正确的方法。但是，如果您需要重用或限制昂贵的资源（例如数据库连接），那么数据库连接池可能是一个不错的选择。假设我们选择了[generic-pool](https://github.com/coopernurse/node-pool)（node.js 的通用池化解决方案），您可以这样编写代码：

```
// Step 1 - Create pool using a factory object
var mysql= require('mysql'),
    generic_pool = require('generic-pool');

var pool = generic_pool.Pool({
    name: 'mysql pool 1',
    min: 1,
    max: 50,
    idleTimeoutMillis : 30000,
    create   : function(callback) {
        var Client = mysql.Client;
        var c = new Client();
        c.user     = 'myusername';
        c.password = 'mypassword';
        c.database = 'mydb';
        c.connect();

        callback(null, c);
    },
    destroy  : function(client) { client.end(); }
});

// Step 2 - Use the pool in your code to acquire/release resources
pool.acquire(function(err, client) {
    if (err) {
        // handle error
        return res.end("CONNECTION error: " + err);
    }
    client.query("select * from foo", [], function() {
        // return object back to pool
        pool.release(client);
    });
}); 
```

# google-apps-script - 重新加载页面谷歌应用脚 本

> ID：13971146
> 
> 赞同：0
> 
> 时间：2012-12-20T11:25:15.167
> 
> 标签：google-apps-script, google-sheets

如何使用谷歌应用脚​​本重新加载谷歌网站中的页面？我有一个创建表单的函数和另一个函数 doPost 来收集表单中提交的数据并将其写入电子表格。电子表格嵌入在同一页面中，我希望重新加载页面以更新电子表格中的视图。

我试图在 Site Services 和 Ui Services 中找到一些功能或服务。

这是代码

```
function doGet(e) {
var appRegistro = UiApp.createApplication().setTitle('Registre seu Atendimento!').setHeight(500);
var form = appRegistro.createFormPanel();
var flow = appRegistro.createFlowPanel();
var date=new Date();

//Construção do Menu
flow.add(appRegistro.createLabel("Data"));
  flow.add(appRegistro.createTextBox().setName("Data").setValue(date).setReadOnly(true).setText(Utilities.formatDate(date, "GMT -02:00", "dd/MM/yyyy HH:mm:ss")));
flow.add(appRegistro.createLabel("Ticket ID"));
flow.add(appRegistro.createTextBox().setName("TicketID"));
flow.add(appRegistro.createLabel("Ticket Type"));
flow.add(appRegistro.createListBox().setName("TicketType").addItem("TicketType1").addItem("ticketType2").addItem("TicketType3").addItem("TicketType4"));
flow.add(appRegistro.createLabel("Demandado por"));
flow.add(appRegistro.createListBox().setName("DemandedBy").addItem("DemandedBy1").addItem("DemandedBy1"));
flow.add(appRegistro.createLabel("Nome do Analista"));
flow.add(appRegistro.createListBox().setName("Analyst").addItem("Analyst1").addItem("Analyst1").addItem("Analyst1"));
flow.add(appRegistro.createLabel("Status"));
flow.add(appRegistro.createListBox().setName("Status").addItem("Resolvido").addItem("Em Tratamento"));
flow.add(appRegistro.createLabel("Descrição"));
flow.add(appRegistro.createTextArea().setName("Description").setSize(400, 100));
flow.add(appRegistro.createSubmitButton("Salvar"));
form.add(flow);
appRegistro.add(form);
return appRegistro;
 }

function doPost(e) {
var app=UiApp.createApplication();
var ss = SpreadsheetApp.openById("0AsXUq-Wd26qMdGFodkNqdERSc3NYaHhUQlRFeFNFQlE");
  var DataValue = e.parameter.Data;
  var TicketIDValue = e.parameter.TicketID;
  var TicketTypeValue = e.parameter.TicketType;
  var DemandedByValue = e.parameter.DemandedBy;
  var AnalystValue = e.parameter.Analyst;
  var StatusValue = e.parameter.Status;
  var DescriptionValue = e.parameter.Description;
  ss.getActiveSheet().appendRow([DataValue,TicketIDValue,TicketTypeValue,DemandedByValue,AnalystValue,StatusValue,DescriptionValue]).sort(1,false);
  return app;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:16:39.883

无法使用 Google Apps 脚本，因为 Apps 脚本无法与浏览器对象交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:18:35.447

我认为由于安全限制，您要完成的工作是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T15:27:27.953

其他回答者表示，我没有对电子表格做太多工作，但也许你可以解决这些限制。

*   您能否在电子表格中编写脚本以刷新自身以轮询新数据？
*   Or could you move the form to be part of the Spreadsheet? Perhaps a button on the Spreadsheet could launch the form as a UiApp?

# jquery - jQuery LazyLoad 在滚动之前不加载图像

> ID：13971151
> 
> 赞同：15
> 
> 时间：2012-12-20T11:25:22.987
> 
> 标签：jquery, lazy-loading

jQuery LazyLoad 不会在打开页面的可见部分加载图像，直到我滚动页面甚至 1px。

当我滚动页面时一切正常

**更新：**

咖啡脚本

```
jQuery ->
   $("img.lazy").show().lazyload()
   $(window).resize() 
```

但`$(window).resize()`只有当我在页面加载后从浏览器的控制台输入它时才有帮助

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-10-30T16:57:28.953

```
$("img.lazy").lazyload({
             threshold : 50
         }); 
```

并添加：

```
$(window).load(function(){
     $("html,body").trigger("scroll");
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-18T04:58:34.910

我为时已晚，但如果您仍然面临此问题，请在所需事件上使用纯 JavaScript setTimeout() 和 window.scrollBy() 组合。我在单击时解决了它，因为我必须在选项卡式窗格下显示图像，其中只有第一个加载的选项卡在页面加载时显示图像，但其余选项卡在单击时不显示，直到用户滚动一点。我的代码如下：

```
function myFunction() {
  setTimeout(function() {
    window.scrollBy(0, 100)
  }, 1000);;
}
```

```
<style>
  div {
    background-color: #FF9900;
    height: 999px;
    width: 100%;
  }
</style>

<a href="#" onClick="myFunction()">Click me to scroll after 1000 milliseconds</a>
<div></div>
```

此示例在单击 url 1000 毫秒后将页面向下滚动 100px。最好在 400 毫秒后使用 1px 滚动以使其不被注意/无缝。希望这可以帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-27T11:36:36.390

您的图像必须设置宽度和高度。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T12:54:37.890

尝试这个....

```
$(function() {
    $("img.lazy").show().lazyload()
    window.onload = function() {
        $(window).resize()
    };
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-14T06:32:10.317

这就是为我解决这个问题的方法：

```
$("html,body").on('scroll', function(){ 
    $(window).resize() 
}); 
```

它真的很简单，它只是在 body 和 html 标签的滚动事件上创建一个 window.resize 。班。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-13T13:59:45.967

当前版本的 Lazyload 在窗口加载事件时触发初始更新。因此，如果您稍后动态加载图像 - 您需要一个额外的事件（例如滚动）来触发更新周期。这是我在滚动后才显示图像的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-17T16:28:19.633

当您初始化延迟加载时，您可以告诉它要触发哪些事件（默认情况下它设置为“滚动”）。我建议在该列表中添加一个自定义事件，并在对您有意义时触发它：

```
$('.lazy').lazyload({
    event: 'scroll whenever-i-want'
});

// whenever you want to trigger your event (after ajax load, on dom ready, etc...)
$(document).trigger('whenever-i-want'); 
```

这保留了默认滚动功能，但也允许您按需触发延迟加载。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-09T09:42:21.230

每当我过滤某些东西时，我都会通过查询来获取我的图像`$.post()`，因此我需要在每次重新加载时运行整个东西

```
$.post( "queries.php", { var1:var1, var2:var2, .. }, function(response){
  for( var i=0; i<response.length; i++ ) { $("#container").append(response[i]); }
  $("img.lazy").lazyload();
  $(window).resize();
}, "json"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-28T10:43:23.367

正如在这个[SO question](https://stackoverflow.com/questions/13535597/lazyload-images-not-appearing-until-after-a-scroll)中发现的那样，将 skip_invisible 设置为 false 为我解决了这个问题

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-19T10:27:58.680

```
$(document).ready(function () {
$("img.lazy").lazyload({
<br/>placeholder: rooturl + "Themes/images/imgloading.gif",<br/>
                 effect: "fadeIn",<br/>
                 skip_invisible: false<br/>
                 });<br/>
        });<br/>

$(document).ready(function() {<br/>
       $(window).load(function() {<br/>
             update();<br/>
         }); <br/>
  });<br/> 
```

使用这个延迟加载脚本[https://github.com/tuupola/jquery_lazyload/blob/master/jquery.lazyload.js#L130](https://github.com/tuupola/jquery_lazyload/blob/master/jquery.lazyload.js#L130)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-19T09:30:17.060

对于具有多个按 z-index 排序的图像的滑块，lazyload 选项`failure_limit`会派上用场。

有关此选项的更多详细信息，请参见[此处](http://www.appelsiini.net/projects/lazyload#when-images-are-not-sequential)

# tomcat - tomcat 中的原生库

> ID：13971153
> 
> 赞同：0
> 
> 时间：2012-12-20T11:25:38.023
> 
> 标签：tomcat, gdal

我对本机库有疑问：`ogrjni.dll`.

我把这个目录添加到 PATH 变量中`ogrjni.dll`。`tomcat/shared/lib`但得到错误：

```
java.lang.NoClassDefFoundError: Could not initialize class org.geotools.data.ogr.OGRDataStore
test.Read.getKadnum(Read.java:56) 
```

和

```
java.lang.UnsatisfiedLinkError: org.gdal.ogr.ogrJNI.GetDriverCount()I
org.gdal.ogr.ogrJNI.GetDriverCount(Native Method)
org.gdal.ogr.ogr.GetDriverCount(ogr.java:98)
org.geotools.data.ogr.OGRDataStore.<clinit>(OGRDataStore.java:169)
test.Read.getKadnum(Read.java:56) 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:58:52.173

您需要设置`java.library.path`包括放置`.dll`文件的位置。

请注意，您`.dll`还必须具有与您的 JVM 相同的体系结构……也就是说，它们必须是 32 位或 64 位，而不是各一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-17T11:37:18.623

今天我用tomcat调用cplex时遇到了类似的问题。只需在您的 servlet 中添加以下代码。

```
System.load(".../tomcat/shared/lib/ogrjni.dll"); 
```

在我的 servlet 中是：

```
System.load("D:/Program Files/IBM/ILOG/CPLEX_Studio125/cplex/bin/x64_win64/cplex125.dll"); 
```

# c++ - 如何在 C++ 中连接到 SQL Server

> ID：13971156
> 
> 赞同：3
> 
> 时间：2012-12-20T11:25:42.720
> 
> 标签：c++, sql-server-2008, odbc

我正在尝试`SQL Server 2008`与`ODBC`驱动程序连接，我已经四处搜索但没有找到太多。此外，我尝试了[使用 ODBC 连接到 SQL SERVER 2008](https://stackoverflow.com/questions/5345110/using-odbc-to-connect-to-sql-server-2008)的源代码，但收到了以下消息：

```
[Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified 
```

我正在使用这个连接字符串：

```
DRIVER={Sql Client};
SERVER=WIN-QNPAH3SE4CK\SQLSRV,1433;
DATABASE=dummy;
UID=sa;
PWD=sasasasa;
Trusted_Connection=no; 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:39:51.427

在您的连接字符串中，将**{SQL Client}**替换为 { **SQL Server}**

编辑：这就是为什么发布代码总是很重要的原因......

你不能这样做： **(SQLWCHAR*)** "DRIVER={SQL Server};SERVER=WIN-QNPAH3SE4CK\SQLSRV,1433;DATABASE=dummy;UID=sa;PWD=sasasasa;Trusted_Connection=no;"

将其切换为如下内容： (SQLWCHAR*) **TEXT** ("DRIVER={SQL Server};SERVER=WIN-QNPAH3SE4CK\SQLSRV,1433;DATABASE=dummy;UID=sa;PWD=sasasasa;Trusted_Connection=no;")

# c# - 在运行时使用文本文件填充 Gridview

> ID：13971165
> 
> 赞同：3
> 
> 时间：2012-12-20T11:26:29.180
> 
> 标签：c#, asp.net, datatable

对你们中的许多人来说，这似乎是一个简单的问题，但我想要做的是在阅读文本文件后，我正在使用`StreamReader`（ASP.net 和 C#）在点击事件上读取文本文件，我将每一行与' ,' 分隔符，然后我将它的每个部分存储在`Datatable's`列中，然后将数据表绑定到我的 gridview，我的问题是我已经编写了代码，但是我得到了这样的空 gridview

![在此处输入图像描述](../Images/8e11039382a53c876f52434ac48b7f1f.png)
我从设计师创建的 Gridviews 列标题`autogeneratecolumns="false"`

我的代码是

```
protected void readfile_Click(object sender, EventArgs e)
{
    string line;
    DataTable dt = new DataTable();
    using (StreamReader sr = new StreamReader(@"D:\Temp\fileread\readtext.txt"))
    {
        while ((line = sr.ReadLine()) != null)
        {
            string[] parts = line.Split(',');
            dt.Rows.Add();
            for (int i = 0; i < parts.Length; i++)
            {
                dt.Columns.Add();
                dt.Rows[0][i] = parts[i];
                MyGridView.DataSource = dt;
                MyGridView.DataBind();
            }
        }
        sr.Close();
    } 
```

我的文本文件有数据

```
1,1,4,2,"#",Description1
5,5,4,2,"#",Description2
3,3,6,3,"#",Description3
2,2,4,2,"#",Description4
4,5,4,2,"#",Description5 
```

希望你明白我想问的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:48:00.707

像这样的东西怎么样：

```
 protected void readfile_Click(object sender, EventArgs e)
    {
        DataTable table = new DataTable();
        table.Columns.Add("Row No.");
        table.Columns.Add("Col No.");
        table.Columns.Add("Width");
        table.Columns.Add("Height");
        table.Columns.Add("Image URL");
        table.Columns.Add("Description");

        using (StreamReader sr = new StreamReader(@"D:\Temp\fileread\readtext.txt"))
        {
            while (!sr.EndOfStream)
            {
                string[] parts = sr.ReadLine().Split(',');
                table.Rows.Add(parts[0], parts[1], parts[2], parts[3], parts[4], parts[5]);
            }
        }
        MyGridView.DataSource = table;
        MyGridView.DataBind();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:35:37.250

1.  您应该通过[添加`DataColumn`](http://msdn.microsoft.com/en-us/library/55b10992.aspx)外部`for`-loop 来移动代码
2.  您应该创建新的`DataRow`using[`DataTable.NewRow`](http://msdn.microsoft.com/en-us/library/system.data.datatable.newrow.aspx)方法
3.  您应该只调用一次数据绑定方法，并且在循环之后。

你的代码应该是这样的：

```
DataTable dt = new DataTable();
dt.Columns.Add("Row No", typeof(Int32));
dt.Columns.Add("Col No", typeof(Int32));
dt.Columns.Add("Width", typeof(Int32));
dt.Columns.Add("Height", typeof(Int32));
dt.Columns.Add("ImageUrl", typeof(String));
dt.Columns.Add("Description", typeof(String));

using (StreamReader sr = new StreamReader(@"D:\Temp\fileread\readtext.txt"))
{
    while ((line = sr.ReadLine()) != null)
    {
        string[] parts = line.Split(',');
        var row = dt.NewRow();
        for (int i = 0; i < parts.Length; i++)
        {
            row[i] = parts[i];
        }
        // important thing!
        dt.Rows.Add(row);
    }
    sr.Close();
}
MyGridView.DataSource = dt;
MyGridView.DataBind(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:36:10.533

使用下面的代码将列添加到数据表

```
DataTable dt = new DataTable();
dt.Columns.Add("Row No", typeof(Int32));
dt.Columns.Add("Col No", typeof(Int32));
dt.Columns.Add("Width", typeof(Int32));
dt.Columns.Add("Height", typeof(Int32));
dt.Columns.Add("ImageUrl", typeof(String));
dt.Columns.Add("Description", typeof(String)); 
```

在填充数据表中的所有行后，在while循环之后绑定数据表（dt）

```
using (StreamReader sr = new StreamReader(@"D:\Temp\fileread\readtext.txt"))
{
    while ((line = sr.ReadLine()) != null)
    {
        string[] parts = line.Split(',');
        var dr = dt.NewRow(); //use newrow to create new row
        for (int i = 0; i < parts.Length; i++)
        {
            dr[i] = parts[i];
        }

        dt.Rows.Add(dr); //add row to datatable now
    }
    sr.Close();
}
//bind datatable to Gridview after we load file into dt
MyGridView.DataSource = dt;
MyGridView.DataBind(); 
```

# iis - IIS 7 多个网站在一个 IP 地址中

> ID：13971167
> 
> 赞同：0
> 
> 时间：2012-12-20T11:26:40.307
> 
> 标签：iis, iis-7, web, windows-server-2008

我使用 IIS 7，当我创建新网站时，我不会使用一个 IP 地址。但我有一个。我想要这个http/ipadress/mywebsite 怎么办呢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:10:56.150

抱歉，如果有更好的方法来展示这一点，但这已经在这里得到了回答......

[IIS7 上的多个站点在相同的 URL 和端口下但在不同的目录中](https://stackoverflow.com/questions/6297632/multiple-sites-on-iis7-under-the-same-url-and-port-but-on-different-directories)

# c++ - C++ 引用是否占用任何内存？

> ID：13971168
> 
> 赞同：3
> 
> 时间：2012-12-20T11:26:41.003
> 
> 标签：c++, reference

> **可能重复：**
> [C++ 中引用变量的大小](https://stackoverflow.com/questions/13964690/size-of-reference-variable-in-c)

C++ 引用会消耗任何内存吗？如果不是，它们如何作为参数传递给函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T11:28:52.813

有时他们会，有时他们不会。当他们需要时（例如用作数据成员时），他们会这样做。

例如，他们不需要：

```
int a = 1;
int &b = a; 
```

现在，编译器可以`b`纯粹将`a`. 这里从来不需要为`b`这里分配内存，因为引用不是对象。

另一个可能感兴趣的案例：

```
int some_function_call(); // function returns by value
const int &c = some_function_call(); 
```

在这种情况下`c`，是对作为调用返回值的临时对象的引用。临时的生命被扩展到 的范围`c`，所以从这个意义上说，你可以说它`c`消耗了一块 int 大小的内存。但是编译器需要分配更多的东西并没有什么特别的原因。您可能会看到与您编写的代码相同的代码`const int c = some_function_call();`，它还创建了一个`int`具有相同生命周期和相同名称的对象`c`。

至于将它们作为参数传递 - 这取决于调用约定参数是否占用内存。一些参数可能会在寄存器中传递。然后，取决于被调用者代码，该寄存器是否在函数执行期间最终溢出到堆栈中的某个地方。但是，是的，当作为参数传递并且函数调用未内联时，引用参数必须占据“某些东西”，因为调用者必须以某种方式让被调用者知道引用所指对象的地址（“引用对象”）。

只要您不获取指针的地址，就可以对指针说所有相同的事情。但在指针的情况下，它是编译器主动进行的优化。在引用的情况下，它们在标准中明确定义为别名，并且在编译器不能将引用纯粹视为条目的情况下，指针（或无论如何地址）恰好是实现这一点的明显手段在其编译时名称查找表中。唯一的本质区别是标准描述的抽象机器中发生的事情——在实现和优化之后，它很可能等同于同一件事。

# java - 无法使用 JavaMail 读取 Outlook 邮件，而 Gmail 可以工作

> ID：13971169
> 
> 赞同：0
> 
> 时间：2012-12-20T11:26:43.467
> 
> 标签：java, email, outlook, gmail, jakarta-mail

基本上，我编写了一个从收件箱中读取电子邮件的应用程序。我一直使用从 Gmail 发送的电子邮件来测试该应用程序。但是现在当我尝试阅读从 Outlook 发送的电子邮件时，我没有收到任何内容。

我记录了两封电子邮件的内容类型： Gmail 返回：`multipart/alternative; boundary=047d7b342bf2b6847f04d11df78a` Outlook 返回：`text/html; charset=iso-8859-1` **注意：这些是相同的电子邮件，只是从不同的邮件客户端发送的。**

来自 Gmail 的邮件将是 Multipart 的一个实例。而 Outlook 电子邮件将是 String 的一个实例。

我的代码：

检查消息是多部分的实例还是字符串的方法。

```
public void getContent(Message msg) throws IOException, Exception {

    Object contt = msg.getContent();
    System.out.println("Contenttype: " + msg.getContentType());

    if (contt instanceof Multipart) {
        checkDisposition = true;
        handleMultipart((Multipart) contt);
    } else if (contt instanceof String) {   
       handlePart((Part) msg);
    }
    prepareEmail(mpMessage);
} 
```

如果消息是多部分的，则将调用此方法：

```
public void handleMultipart(Multipart multipart)
        throws MessagingException, IOException, Exception {
    mpMessage = getText(multipart.getBodyPart(0));

    for (int z = 1, n = multipart.getCount(); z < n; z++) {
        handlePart(multipart.getBodyPart(z));

    }
} 
```

如果消息不是，这将直接调用：

```
public void handlePart(Part part)
        throws MessagingException, IOException, Exception {

    Object con = messageCopy.getContent();

    String disposition = part.getDisposition();
    String contentType = part.getContentType();

    if (checkDisposition) {

        if (disposition == null) {

            System.out.println("Disposition is null");

        } else if (disposition.equalsIgnoreCase(Part.ATTACHMENT)) {
            System.out.println("Attachment: " + part.getFileName()
                    + " : " + contentType);
            input = part.getInputStream();
            bytes = IOUtils.toByteArray(input);
        } else if (disposition.equalsIgnoreCase(Part.INLINE)) {
            System.out.println("Inline: "
                    + part.getFileName()
                    + " : " + contentType);
        } else {
            System.out.println("Other: " + disposition);
        }
    }else{
        mpMessage = part.getContent().toString(); //returns nothing

        System.out.println("mpMessage handlePart "+mpMessage); //returns nothing
        System.out.println("mpMessage handlePart "+part.getLineCount()); //returns 0
        System.out.println("mpMessage handlePart "+part.getContentType()); //returns text/html chartset=iso-8859-1
        System.out.println("mpMessage handlePart "+part.getSize()); // returns 22334
        part.writeTo(System.out); //See below

    } 
```

}

从部件返回文本的方法：

```
private String getText(Part p) throws
        MessagingException, IOException {

    System.out.println("getText contentType "+p.getContentType());

//This part gets called if trying to read an Outlook mail, its not clear for me how to  retrieve the text from the part. Since `p.getContent()` returns nothing
    if (p.isMimeType("text/*")) {
        String s = (String) p.getContent();
        System.out.println();
        return String.valueOf(s);
    }

    if (p.isMimeType("multipart/alternative")) {
        Multipart mp = (Multipart) p.getContent();
        String text = null;
        for (int i = 0; i < mp.getCount(); i++) {
            Part bp = mp.getBodyPart(i);
            if (bp.isMimeType("text/plain")) {
                String s = getText(bp);
                if (s != null) {
                    return s;
                }
            }
        }
        return text;
    }
    return null;
} 
```

`part.writeTo(System.out)`返回：

收到：来自 AMSPRD0710HT005.eurprd07.prod.outlook.com 服务器 (TLS) id 00000；2012 年 12 月 20 日星期四 09:28:23 +0000 收到：来自 AMSPRD0710MB354.eurprd07.prod.outlook.com ([00.000.0000]) 由 AMSPRD0710HT005.eurprd07.prod.outlook.com ([00.000.0000]) 与 mapi编号 14.16.0245.002；2012 年 12 月 20 日星期四 09:28:05 +0000 从：测试到：支持主题：Verwerkingsverslag Kenmerk：0824496 主题：Verwerkingsverslag Kenmerk：0824496 主题索引：Ac3elFC2qYsSo+SOT2ii4HnbCCqgVw== 日期：2012 年 12 月 20 日星期四 10： 28:05 +0100 消息 ID：...

等等。

消息本身的内容作为 HTML 代码返回，而不仅仅是普通文本。

如何从 Outlook 电子邮件中检索纯文本，而不是 HTML 代码？或者如何在handlePart 中检索零件的内容？

任何帮助表示赞赏，

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:54:09.010

您似乎假设 Outlook 将纯文本与 HTML 版本一起发送，但事实并非如此。您从 Outlook 记录的电子邮件的 MIME 类型是`text/html`，这表明它只是一个 HTML 格式的文档。另一方面，Gmail 版本发送了 的文档`multipart/alternative`，这可能表明同一文档中有电子邮件的多个版本（纯文本和 HTML——我相信这是 Gmail 的默认行为）。因此，如果您获得的是 HTML 编码版本，您将获得电子邮件的“文本”，就像它发送时一样。

不要求使用纯文本版本或任何其他格式发送电子邮件。您可以确保邮件客户端以您的消费程序可以处理的格式发送电子邮件，或者更改消费程序以处理正在发送的格式。

除了上述之外，您可能还需要重新考虑这一行：

```
mpMessage = getText(multipart.getBodyPart(0)); 
```

这似乎假设多部分消息的第一部分将是纯文本文档和消息的文本。这可能是一个糟糕的假设。

* * *

因此，假设您实际上已收到带有 HTML 内容的邮件消息，则`getContent()`不应返回`null`或为空字符串。它应该根据`InputStream`文档[返回`MimeBodyPart#getContent()`](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/MimeBodyPart.html#getContent%28%29)一个. 阅读`InputStream`应该使您能够生成带有 HTML 标记的字符串。

由于您似乎并不关心 HTML，而只关心内容，因此只需使用 Java HTML 解析库（例如[Jsoup](http://jsoup.org) ）就可以大大简化该过程。基本上，您可以通过更改为以下内容将其集成到您当前的代码`getText()`中：

```
private String getText(Part p) throws MessagingException, IOException {
    System.out.println("getText contentType "+p.getContentType());
    if (p.isMimeType("text/plain")) {
        String s = (String) p.getContent();
        System.out.println(s);
        return s;
    } else if (p.isMimeType("text/html")) {
        // the last two parameters of this may need to be modified
        String s = Jsoup.parse(p.getInputStream(), null, null).text();
        System.out.println(s);
        return s;
    } else if (p.isMimeType("multipart/alternative")) {
        Multipart mp = (Multipart) p.getContent();
        String text = "";
        for (int i = 0; i < mp.getCount(); i++) {
            Part bp = mp.getBodyPart(i);
            if (bp.isMimeType("text/*")) {
                String s = getText(bp);
                if (s != null) {
                    text += s;
                }
            }
        }
        return text;
    }
    return null;
} 
```

请注意，这假设电子邮件足够小，可以完全在内存中读取和解析。

# iphone - UITable 查看单元格按钮问题

> ID：13971171
> 
> 赞同：0
> 
> 时间：2012-12-20T11:26:53.763
> 
> 标签：iphone, ios, uitableview

我有自定义表格视图单元格，其中有两个 UIButton 和一个名为 edit 和 cancel 的文本字段以及一个 textField。当我同时单击编辑时，TextFeild 交互已启用并且取消按钮图像应该更改。它对我来说很好用！！

但是当我单击编辑按钮时，另一个单元格取消 bitton 图像 id 自动更改！我知道发生这种情况是因为我正在重复使用电池！但我无法找到解决方案......

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    simpleTableIdentifier = @"MenuNameCell";
    cell = (MenuNameCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (!cell) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MenuNameCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
        NSLog(@"---------new cell agin");          
    }
    else
    {
        for (UIView *view in [cell.contentView subviews])
                [view removeFromSuperview];
        NSLog(@"---------older use");
       // _checkButton = (UIButton *)[cell.contentView viewWithTag:indexPath.row];
       // _cancelButton = (UIButton *)[cell.contentView viewWithTag:indexPath.row];
    }

    // Creating Label Menu Name
    _nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 11, 82, 21)];
    _nameLabel.backgroundColor = [UIColor clearColor];
    _nameLabel.text =  [_hotel._orderedMenus objectAtIndex:indexPath.row];

    // Creating Label Menu Cost
    _amountMenu   = [[UILabel alloc] initWithFrame:CGRectMake(167, 13, 44, 21)];
    _amountMenu.backgroundColor = [UIColor clearColor];
    _amountMenu.text  = [[_hotel._menuPrices objectAtIndex:indexPath.row] stringValue];

    // Creating Text Field For Order Quantity
    _textFieldQuantity = [[UITextField alloc] initWithFrame:CGRectMake(125,14,42,21)];
    _textFieldQuantity.userInteractionEnabled = NO;
    _textFieldQuantity.text = [[_hotel._selectedQuantity objectAtIndex:indexPath.row] stringValue];

    // Creating Button For Check Order
    _checkButton  = [UIButton buttonWithType:UIButtonTypeCustom];
    [_checkButton setFrame:CGRectMake(232, 13, 25, 28)];
    [_checkButton setBackgroundImage:[UIImage imageNamed:@"edit.png"]forState:UIControlStateNormal];
    [_checkButton addTarget:self action:@selector(editQuantity:) forControlEvents:UIControlEventTouchUpInside];
    [_checkButton setTag:indexPath.row];

    // Creating Button For CANCEL Order
    _cancelButton  = [UIButton buttonWithType:UIButtonTypeCustom];
    [_cancelButton setFrame:CGRectMake(265, 13, 25, 28)];
    [_cancelButton setBackgroundImage:[UIImage imageNamed:@"cancel.png"] forState:UIControlStateNormal];
    [_cancelButton addTarget:self  action:@selector(cancelOreder:) forControlEvents:UIControlEventTouchUpInside];
    [_cancelButton setTag:indexPath.row];

    // Adding All To Call Content View
    [cell.contentView addSubview:_nameLabel];
    [cell.contentView addSubview:_amountMenu];
    [cell.contentView addSubview:_textFieldQuantity];
    [cell.contentView addSubview:_checkButton];
    [cell.contentView addSubview:_cancelButton];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:23:24.940

使用以下代码直接创建新单元格而不重用旧单元格。

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier]; 
```

代替

```
cell = (MenuNameCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:02:55.527

伙计，我不认为这是因为无论如何都要重用单元格，如果您认为那么请帮我一个忙，只需将您的所有代码都保留在 if 中；但是，虽然您必须检查您的点击事件中是否有任何改变您 ID 的内容。

还有一件事通常是我们为此目的使用标签的习惯，但是我们手里有苹果提供的东西来解决这样的事情，那就是协会。在这里，您应该尝试：-

> * **objc_setAssociatedObject***

通过它，您始终可以参考您的单元格或您与之关联的任何内容。只是谷歌，一目了然，我只是在下面粘贴一个代码检查它：（但你需要根据你的要求工作）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(tableView != popTbl)
    {
        NSString *CellIdentifier = @"CellIdentifier";
        cell = (CustomizeConditionVC *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil)
        {
            NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomizeConditionVC" owner:self options:nil];
            cell = [nib objectAtIndex:0];
        } 
        cell.lbl.text = [objArr objectAtIndex:indexPath.row];
        [cell.lbl setBackgroundColor:[UIColor clearColor]];
        cell.lbl.font = [UIFont fontWithName:@"Arial" size:(17.0)]; 
        cell.lbl.font = [UIFont boldSystemFontOfSize:17];
        cell.lbl.textColor = [UIColor colorWithRed:0.12 green:0.27 blue:0.34 alpha:1.0]; 
        cell.lbl.autoresizingMask = NO;
        NSString* lblStringLen = NULL;
        lblStringLen = [objArr objectAtIndex:0];
        unsigned int kFactor = -1;
        kFactor = cell.lbl.frame.size.width/[lblStringLen length];
        CGRect rect = cell.lbl.frame;
        rect.size.width = kFactor * [[objArr objectAtIndex:indexPath.row] length];
        [cell.lbl setFrame:rect];
        [cell.txtField setBackgroundColor:[UIColor clearColor]];
        cell.txtField.font = [UIFont fontWithName:@"Arial" size:(17.0)];    
        cell.txtField.textColor = [UIColor colorWithRed:0.50 green:0.50 blue:0.50 alpha:1.0]; 

        CGRect rectTxtField = [cell.txtField frame];
        rectTxtField.size.height = 27;
        [cell.txtField setFrame:rectTxtField];
        [cell.txtField setDelegate:self];
        [cell.txtField setTag:indexPath.row];

        [cell.txtView setBackgroundColor:[UIColor clearColor]];
        [cell.txtView setBackgroundColor:[UIColor colorWithRed:0.9 green:0.9 blue:0.9 alpha:1.0]];
        cell.txtView.font = [UIFont fontWithName:@"Arial" size:(17.0)]; 
        cell.txtView.textColor = [UIColor colorWithRed:0.50 green:0.50 blue:0.50 alpha:1.0]; 
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        [cell.btn1 setTag:1];
        [cell.btn2 setTag:2];
        [cell.btn3 setTag:3];
        [cell.btn1 addTarget:self action:@selector(ButtonAtCellControl:) forControlEvents:UIControlEventTouchUpInside];
        [cell.btn2 addTarget:self action:@selector(ButtonAtCellControl:) forControlEvents:UIControlEventTouchUpInside];
        [cell.btn3 addTarget:self action:@selector(ButtonAtCellControl:) forControlEvents:UIControlEventTouchUpInside];

        [cell.btnClearence addTarget:self action:@selector(ButtonAtCellControl:) forControlEvents:UIControlEventTouchUpInside];
        [cell.btnMaintenance addTarget:self action:@selector(ButtonAtCellControl:) forControlEvents:UIControlEventTouchUpInside];
        [cell.btnClearence setHidden:YES];
        [cell.btnMaintenance setHidden:YES];

//        //////////////
        objCell = cell;
//        //////////////
        int getVersionFromCategory = [[self ExtractTheFirstCharBeforePeriodOfDevice] intValue];

       // cell.btn1 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn1.frame];

        switch (indexPath.row) 
        {
            case 2:
            case 4:
                cell.txtView = [UITextView SetTheBorderProperties:cell.txtView];
                [cell.txtView setHidden:NO];
                [cell.txtView setDelegate:self];
                [cell.txtField setHidden:YES];
                [cell.smallBtn setHidden:YES];
                [cell.largeBtn setHidden:YES];
                [cell.txtView setFrame:CGRectMake(cell.lbl.frame.origin.x+13, cell.lbl.frame.origin.y + cell.lbl.frame.size.height + 3, 295-39, (121-(cell.lbl.frame.origin.y + cell.lbl.frame.size.height +3)+89))];
                [cell.btn1 setHidden:YES];
                [cell.btn2 setHidden:YES];
                [cell.btn3 setHidden:YES];
                if(indexPath.row == 4)
                {
                    [cell.txtView setHidden:YES];
                    [cell.btnClearence setHidden:NO];
                    [cell.btnMaintenance setHidden:NO];
                } 
                 break;
            case 3:
                [cell.btn1 setHidden:NO];
                prototype1 = btn1 = cell.btn1;
                /////////New Entry on Date:Nov.07...
                prototype2 = cell.btn2;
                prototype3 = cell.btn3;
                ////////
                [cell.btn2 setHidden:NO];
                [cell.btn3 setHidden:NO];
                [cell.btn1 setFrame:CGRectMake(cell.txtField.frame.origin.x, cell.txtField.frame.origin.y, cell.txtField.frame.size.width/3, cell.txtField.frame.size.height)];
                [cell.btn2 setFrame:CGRectMake(5+cell.txtField.frame.origin.x+cell.txtField.frame.size.width/3+5, cell.txtField.frame.origin.y, cell.txtField.frame.size.width/3, cell.txtField.frame.size.height)];
                [cell.btn3 setFrame:CGRectMake(15 + cell.txtField.frame.origin.x+2*(cell.txtField.frame.size.width/3)+5, cell.txtField.frame.origin.y, cell.txtField.frame.size.width/3, cell.txtField.frame.size.height)];
                [cell.txtField setHidden:YES];
                [cell.smallBtn setHidden:YES];
                [cell.largeBtn setHidden:YES];

//                UIAlertView *alert = [[UIAlertView alloc]
//                                      initWithTitle:@"Hover display.." message:[NSString stringWithFormat:@"%d",cell.btn1.frame.size.width] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
//                [alert show];
//                [alert release];
                break;
            default:
                [cell.btn1 setHidden:YES];
                [cell.btn2 setHidden:YES];
                [cell.btn3 setHidden:YES];
                [cell.txtView setHidden:YES];
                [cell.txtView setDelegate:nil];
                [cell.smallBtn addTarget:self action:@selector(DepictingPopUp:) forControlEvents:UIControlEventTouchUpInside];
                [cell.largeBtn addTarget:self action:@selector(DepictingPopUp:) forControlEvents:UIControlEventTouchUpInside];
                objc_setAssociatedObject(cell.smallBtn,SMALL_BTN_REF,indexPath,OBJC_ASSOCIATION_RETAIN);
                objc_setAssociatedObject(cell.largeBtn,SMALL_BTN_REF_1,indexPath,OBJC_ASSOCIATION_RETAIN);
                objc_setAssociatedObject(cell.largeBtn, LARGE_BTN_REF, cell.txtField, OBJC_ASSOCIATION_RETAIN);
                objc_setAssociatedObject(cell.smallBtn, CELL_TO_CELL_REF, cell.txtField, OBJC_ASSOCIATION_RETAIN);
                break;
        }

//        int getVersionFromCategory = [[self ExtractTheFirstCharBeforePeriodOfDevice] intValue];
//        if(getVersionFromCategory > 3)
//        {
//            cell.btn1 = [UIButton MButton3DLook:cell.btn1 AndButtonTitle:@"gdf"];
//            cell.btn2 = [UIButton MButton3DLook:cell.btn2 AndButtonTitle:@"gdf"];
//            cell.btn3 = [UIButton MButton3DLook:cell.btn3 AndButtonTitle:@"gdf"];
//        }
//        cell.btn1 = [UIButton MButton3DLook:cell.btn1 AndButtonTitle:@"gdf"];
//        cell.btn2 = [UIButton MButton3DLook:cell.btn2 AndButtonTitle:@"gdf"];
//        cell.btn3 = [UIButton MButton3DLook:cell.btn3 AndButtonTitle:@"gdf"];

        if([[NSUserDefaults standardUserDefaults] boolForKey:@"PreviewCase"])
        {
            switch (indexPath.row) 
            {
                case 0:
                    cell.txtField.text = [(NSMutableDictionary*)getTheConditionListVC objectForKey:@"qty"];
                    break;
                case 1:
                    //cell.txtField.text = [(NSMutableDictionary*)getTheConditionListVC objectForKey:@"extraCol"];
                    cell.txtField.text = [(NSMutableDictionary*)getTheConditionListVC objectForKey:@"condition"];
                    break;
                case 2:
                    cell.txtField.text = [(NSMutableDictionary*)getTheConditionListVC objectForKey:@"furtherNote"];
                    cell.txtView.text = [(NSMutableDictionary*)getTheConditionListVC objectForKey:@"furtherNote"];
                    break;
                case 3://liability//+(UIButton*)MButton3DLookForSelected:(UIButton*)_rectForButton AndButtonTitle:(NSString*)_btnTitle
                {
                    UIAlertView *alert = [[UIAlertView alloc]
                                          initWithTitle:@"Hover display.." message:[(NSMutableDictionary*)getTheConditionListVC objectForKey:@"liability"] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
                    //[alert show];
                    [alert release];
                    if(getVersionFromCategory > 3)
                    {
                        switch ([[(NSMutableDictionary*)getTheConditionListVC objectForKey:@"liability"] intValue]) {
                            case 1:
                            //case 0:
                                cell.btn1 = [UIButton MButton3DLookForSelected:cell.btn1 AndButtonTitle:@"gdf"];
                                cell.btn2 = [UIButton MButton3DLook:cell.btn2 AndButtonTitle:@"gdf"];
                                cell.btn3 = [UIButton MButton3DLook:cell.btn3 AndButtonTitle:@"gdf"];
                                break;
                            case 2:
                                cell.btn1 = [UIButton MButton3DLook:cell.btn1 AndButtonTitle:@"gdf"];
                                cell.btn2 = [UIButton MButton3DLookForSelected:cell.btn2 AndButtonTitle:@"gdf"];
                                cell.btn3 = [UIButton MButton3DLook:cell.btn3 AndButtonTitle:@"gdf"];
                                break;
                            case 3:
                                cell.btn1 = [UIButton MButton3DLook:cell.btn1 AndButtonTitle:@"gdf"];
                                cell.btn2 = [UIButton MButton3DLook:cell.btn2 AndButtonTitle:@"gdf"];
                                cell.btn3 = [UIButton MButton3DLookForSelected:cell.btn3 AndButtonTitle:@"gdf"];
                                break;
                            default:
                                break;
                        }

                    }
//                    else
//                    {
//                        switch ([[(NSMutableDictionary*)getTheConditionListVC objectForKey:@"liability"] intValue]) {
//                            case 1:
//                                //case 0:
//                                cell.btn1 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn1.frame];
//                                cell.btn2 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn2.frame];
//                                cell.btn3 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn3.frame];
//                                break;
//                            case 2:
//                                cell.btn1 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn1.frame];
//                                cell.btn2 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn2.frame];
//                                cell.btn3 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn3.frame];
//                                break;
//                            case 3:
//                                cell.btn1 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn1.frame];
//                                cell.btn2 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn2.frame];
//                                cell.btn3 = [[MCustomizeButtonRect alloc] initWithFrame:cell.btn3.frame];
//                                break;
//                            default:
//                                break;
//                        }
//                    }
                }
                    break;
                case 4:
                    if([[(NSMutableDictionary*)getTheConditionListVC objectForKey:@"extraCol"] intValue] == 4)
                    {
                        //////////////
                        objCell = cell;
                        //////////////

                        [[(CustomizeConditionVC*)objCell btnClearence] setImage:[UIImage imageNamed:@"brush_selected.png"] forState:UIControlStateNormal];
                        [[(CustomizeConditionVC*)objCell btnMaintenance] setImage:[UIImage imageNamed:@"cross.png"] forState:UIControlStateNormal];
                    }
                    else 
                    if([[(NSMutableDictionary*)getTheConditionListVC objectForKey:@"extraCol"] intValue] == 5)
                    {
                        //////////////
                        objCell = cell;
                        //////////////

                        [[(CustomizeConditionVC*)objCell btnClearence] setImage:[UIImage imageNamed:@"brush.png"] forState:UIControlStateNormal];
                        [[(CustomizeConditionVC*)objCell btnMaintenance] setImage:[UIImage imageNamed:@"cross_selected.png"] forState:UIControlStateNormal];
                    }   
                    break;
                default:
                    break;
            }
        }
        else {
            //int getVersionFromCategory = [[self ExtractTheFirstCharBeforePeriodOfDevice] intValue];
            if(getVersionFromCategory > 3)
            {
                cell.btn1 = [UIButton MButton3DLook:cell.btn1 AndButtonTitle:@"gdf"];
                cell.btn2 = [UIButton MButton3DLook:cell.btn2 AndButtonTitle:@"gdf"];
                cell.btn3 = [UIButton MButton3DLook:cell.btn3 AndButtonTitle:@"gdf"];
            }
            else
            {
//                [cell.btn1 setFrame:CGRectMake(cell.txtField.frame.origin.x, cell.txtField.frame.origin.y, cell.txtField.frame.size.width/3, cell.txtField.frame.size.height)];
//                [cell.btn2 setFrame:CGRectMake(5+cell.txtField.frame.origin.x+cell.txtField.frame.size.width/3+5, cell.txtField.frame.origin.y, cell.txtField.frame.size.width/3, cell.txtField.frame.size.height)];
//                [cell.btn3 setFrame:CGRectMake(15 + cell.txtField.frame.origin.x+2*(cell.txtField.frame.size.width/3)+5, cell.txtField.frame.origin.y, cell.txtField.frame.size.width/3, cell.txtField.frame.size.height)];
//                [cell.txtField setHidden:YES];
//                [cell.smallBtn setHidden:YES];
//                [cell.largeBtn setHidden:YES];
                //MCustomizeButtonRect

           /*     
                cell.btn1 = [[MCustomizeButtonRect alloc] initWithFrame:prototype1.frame];
                cell.btn2 = [[MCustomizeButtonRect alloc] initWithFrame:prototype2.frame];
                cell.btn3 = [[MCustomizeButtonRect alloc] initWithFrame:prototype3.frame];

            */    

//                UIAlertView *alert = [[UIAlertView alloc]
//                                      initWithTitle:@"Hover display.." message:[NSString stringWithFormat:@"%d",cell.btn1.frame.size.width] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
//                [alert show];
//                [alert release];

            }
        }
//        prototype1 = cell.btn1;
//        prototype2 = cell.btn2;
//        prototype3 = cell.btn3;
        return cell;
    }
    else 
    {
        static NSString *CellIdentifier = @"Cell"; 
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectMake(50,50, 201, 47) 
                                           reuseIdentifier:CellIdentifier] autorelease]; 
        cell.textLabel.text = @"N/A";
        NSString* dropMenusString = NULL;
        dropMenusString = [[tempOfArr objectAtIndex:indexPath.row] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        if ([dropMenusString length] > 0) 
            cell.textLabel.text = dropMenusString;
        //cell.textLabel.text = [[tempOfArr objectAtIndex:indexPath.row] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
        return cell;
    }
}

Now, access your association as :-

    -(void)DepictingPopUp:(id)sender
    {
        [popTbl isHidden]?[popTbl setHidden:NO]:[popTbl setHidden:YES];
        [popTbl setHidden:NO];
        NSIndexPath* iPath =  nil;
        iPath = objc_getAssociatedObject(sender, SMALL_BTN_REF);
        NSIndexPath* iPathNew = nil;
        iPathNew = objc_getAssociatedObject(sender, SMALL_BTN_REF_1);
        (iPath)?(associateIndex = iPath.row):(associateIndex = iPathNew.row);
        UITextField* tempField = nil;
        tempField = objc_getAssociatedObject(sender, LARGE_BTN_REF);
        UITextField* tempMField = nil;
        tempMField = objc_getAssociatedObject(sender, CELL_TO_CELL_REF);
        if(tempField)
        {
            tempTxtField = tempField;
            tempMField = nil;
        }
        else
        {
            tempTxtField = tempMField;
            tempField = nil;
        }
        [popTbl setFrame:[(NatolliAppDelegate*)[[UIApplication sharedApplication] delegate] GetTheCordinateFromTextFieldDynamically:tempTxtField WithButton:sender isAssociativeRefAvailable:YES IfAvailableThenIndex:associateIndex]];
        [popTbl isHidden]?[popTbl setHidden:NO]:[popTbl setHidden:YES];
        [popTbl setHidden:NO];

        switch (iPath.row || iPathNew.row)
        {
            case 0:
                tempOfArr = quantArr;
                [popTbl reloadData];
                break;
            case 1:
                tempOfArr = conditionArr;
                [popTbl reloadData];
                break;
            default:
                break;
        }
    } 
```

请注意，您需要根据您的要求进行空调工作，因为由于我的忙碌，我只是粘贴了我的一个代码。

如有任何疑问，请回复我。

# java - 传递字符串值时，JAX-WS 方法的 Decimal 字段为 NULL

> ID：13971179
> 
> 赞同：5
> 
> 时间：2012-12-20T11:27:12.187
> 
> 标签：java, soap, jax-ws, decimal, bigdecimal

我有 Jaxws Soap 网络服务。我的**“myMethod”**方法有一个十进制类型字段。

这是我的网络服务界面：

```
@WebService(name = "myWs", targetNamespace = "someNamespace")
@Local 
public interface myWsPortType {     
    @WebMethod  
    @RequestWrapper(localName = "myMethod", className = "com.example.MyMethodRequest")  
    public Result myMethod(@WebParam(name = "parameters", mode = Mode.IN) MyMethodParameters parameters); 
} 
```

这是参数类

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType()
public class MyMethodParameters implements java.io.Serializable {
    @FieldValidation(maxLength = 12)
    @XmlElement(name = "myField", required = false)
    private java.math.BigDecimal myField;
} 
```

**当我在myField**传递正确类型的数据时，一切正常。

但是，问题是当我调用**myMethod**并将 String 值（而不是 Decimal）作为参数传递时，不会引发异常并且**myField**的值为**null**

这是肥皂请求示例

```
<soapenv:Envelope>
   <soapenv:Header/>
   <soapenv:Body>
      <iss:myMethod>
         <parameters>
            <myField>test</myField>
         </parameters>
      </iss:myMethod>
   </soapenv:Body>
</soapenv:Envelope> 
```

当传递不正确的数据类型时，如何让我的 ws 抛出异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:29:36.750

看起来 XSD Schema 生成得很好，您缺少的是[SchemaValidation](http://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/developer/SchemaValidation.html)注释来告诉 JAX-WS 使用模式验证请求和响应。

只需添加`@SchemaValidation`到您的服务：

```
@WebService(name = "myWs", targetNamespace = "someNamespace")
@SchemaValidation
@Local 
public interface myWsPortType { ... } 
```

# objective-c - 使用 onEnter 方法 cocos2d

> ID：13971188
> 
> 赞同：2
> 
> 时间：2012-12-20T11:27:41.297
> 
> 标签：objective-c, cocos2d-iphone, ios6

我正在开发一个游戏。并在我的游戏中使用音频。对于音频，我导入 SimpleAudioEngine 框架。我在 onEnter 方法中设置了音频，其他声明和编码在 init 方法中。在 onEnter 方法中添加音频后，我的屏幕菜单按钮不起作用。在添加之前，一切正常。我不明白我的代码有什么问题。

这是我在 onEnter 方法中的代码。

```
- (void)onEnter{
    backgroundMusic=[SimpleAudioEngine sharedEngine];
    [backgroundMusic playBackgroundMusic:@"sonic_title_music.mp3" loop:YES];
    }
- (void)onExit{
[backgroundMusic stopBackgroundMusic];} 
```

这是我的初始化方法：

```
- (id)init{
self = [super init];
if (self) {
    controller = (AppController *)[[UIApplication sharedApplication] delegate];
    CGSize size=[[CCDirector sharedDirector]winSize];
    [CCMenuItemFont setFontName:@"Marion"];
    [CCMenuItemFont setFontSize:30];
    CCMenuItem *newGame=[CCMenuItemFont itemWithString:@"New Game" target:self selector:@selector(newGame)];
    CCMenuItem *modes=[CCMenuItemFont itemWithString:@"Modes" target:self selector:@selector(modes)];
    CCMenuItem *help=[CCMenuItemFont itemWithString:@"Help" target:self selector:@selector(help)];
    CCMenuItem *setting=[CCMenuItemFont itemWithString:@"Setting" target:self selector:@selector(setting)];
    menu=[CCMenu menuWithItems:newGame,modes,setting,help, nil];
    [menu alignItemsVerticallyWithPadding:10];
    CCLOG(@"width== %f",size.width);
    if(size.width==320)
        menu.position=ccp(size.width/2, size.height/2);
    else
        menu.position=ccp(size.width/2, size.height/2);
    [self addChild:menu];
}
return self; 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T13:13:15.370

您必须调用 [super onEnter]：

```
-(void) onEnter
{
    [super onEnter];

    backgroundMusic=[SimpleAudioEngine sharedEngine];
    [backgroundMusic playBackgroundMusic:@"sonic_title_music.mp3" loop:YES];
} 
```

覆盖任何 on* CCNode 方法时需要调用超级实现。

# c# - 使用 XMLreader 读取子节点

> ID：13971190
> 
> 赞同：0
> 
> 时间：2012-12-20T11:27:47.017
> 
> 标签：c#

我有这个 XML 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <cteProc xmlns="http://www.portalfiscal.inf.br/cte" versao="1.04">
   <CTe>
   <emit>
       <xFant>DOW</xFant>
       <CNPJ>456789</CNPJ>
   </emit>
   <rem>
      <CNPJ>777777</CNPJ>
      <nCFOP>7101</nCFOP>
   </rem>
   </CTe>
   <protCTe versao="1.04">
   </cteProc> 
```

要读取这个文件，我使用这个 C# 片段：

```
 string 
    XmlTextReader reader = new XmlTextReader(@"C:\Conhecimento\158_v01.04-rocCTe.xml");
        XmlNodeType type;
        while (reader.Read())
        {
            type = reader.NodeType;
            if (type == XmlNodeType.Element)
            {
                if (reader.Name == "xFant")
                {  reader.Read(); XFant = reader.Value; textBox1.Text = XFant;} 

            if (reader.Name == "nCFOP")
                {  reader.Read(); nCFOP = reader.Value; textBox2.Text = nCFOP;} 
            }
        } 
```

该代码运行良好，但在子节点的情况下不起作用`<CNPJ>`；它只读取第一个。如何编写此代码来读取后代？我尝试过类似的东西`rem.CNPJ`。

从其他问题中，我看到了这段代码：

字符串 CNPJ2,CNPJ3;

```
 XNamespace ns = "http://www.portalfiscal.inf.br/cte";
        var todas = from ide in XElement.Load(@"C:\136_v01.04.xml").Descendants(ns + "ide")

                    select new { CNPJ1 = (string)ide.Element(ns + "CNPJ") };

        var emit  = from ide1 in XElement.Load(@"C:\136_v01.04.xml").Descendants(ns + "emit")

                    select new { CNPJ2 = (string)ide1.Element(ns + "CNPJ") }; 
```

但是如何将“todas”分配给像 int CNPJ 这样的单个变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:14:29.213

如果您使用 XDocument 读取您的 xml

```
XDocument XMLDoc = XDocument.Load([path to xml file]); 
```

你有一个`Descendants(XName)`你可以用来获取你所追求的节点。

```
XElement element = XMLDoc.Descendants("CNPJ").FirstOrDefault(); 
```

# ios - MKNetworking 冻结操作

> ID：13971192
> 
> 赞同：1
> 
> 时间：2012-12-20T11:27:53.237
> 
> 标签：ios, mknetworkkit

我正在使用 MKNetworkKit。我已成功添加包并上传到服务器。但是我无法激活冻结的操作。我已添加该行

```
[self.flOperation setFreezable:YES]; 
```

套件需要。然后我从我的设备手动禁用了网络。当再次激活时，该套件永远不会尝试再次将文件发送到服务器。

以前有人经历过吗？我使用来自 github 的最新版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T15:34:18.783

您的请求类型是什么？GET 操作不可冻结，如果您的操作是“GET”操作，MKNetworkKit 会忽略您对 setFreezable 的调用。

这是 MKNetWorkOperation.m 的摘录

```
- (void)setFreezable:(BOOL)flag
{
    // get method cannot be frozen.
    // No point in freezing a method that doesn't change server state.
    if([self.request.HTTPMethod isEqualToString:@"GET"] && flag) return;
    _freezable = flag;

    if(_freezable && self.uniqueId == nil)
    self.uniqueId = [NSString uniqueString];
} 
```

# android - 修改framework.jar中的java代码

> ID：13971195
> 
> 赞同：5
> 
> 时间：2012-12-20T11:28:04.603
> 
> 标签：android

我手机上的股票 rom 与 MVNO（移动虚拟网络运营商）存在问题。基本上这意味着我的数据连接仅在漫游时有效。这是一个已经在几个 rom 上修复的已知问题（但不是我的）。

为了解决这个问题，我想修改 framework.jar 文件（`/system/framework/framework.jar`）的源代码，更具体的文件：`/com/android/internal/telephony/gsm/GsmServiceStateTracker.java`

首先，我将列出我所采取的步骤，以向您展示我目前陷入的困境：我已经完全去除了我的股票 rom，包括 /system/framework/ 和 /system/app 中的 JAR 文件和 APK 文件

*   我已经下载了 deodexed framework.jar 文件并从中提取了 classes.dex 文件
*   我已经使用 baksmali 反编译了 classes.dex 文件，最终得到了几个 *.class 文件
*   [我已使用dex2jar](http://code.google.com/p/dex2jar/)将这些 *.class 文件转换为 .jar 文件
*   我已经使用[jdqui](http://java.decompiler.free.fr/?q=jdgui)解压打开了这个 jar 文件，最终得到了几个 *.java 文件

这就是我卡住的地方，我需要弄清楚如何编辑我想要的 java 文件，并再次得到一个可以上传到手机的工作 framework.jar。

我这样做是错误的吗？还有其他方法可以解决我的问题吗？我希望能得到有这方面经验的人的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T09:51:59.330

我还采用相同的方法来获取与网络相关的参数，例如；BAND, BCCH 等。将framework.jar 反编译后得到*.class 文件后，您可以使用Java DCompiler 或JDclipse 将.class 文件转换为.java 文件。现在根据您的要求修改java文件。

我修改了 RIL.java，但我坚持重新打包。我无法将 RIL.java 转换为 RIL.class。它有很多依赖/导入框架的隐藏文件。参考： http: [//www.mailinglistarchive.com/html/android-platform@googlegroups.com/2010-02/msg00325.html](http://www.mailinglistarchive.com/html/android-platform@googlegroups.com/2010-02/msg00325.html)

Android 绅士们，如果我们走错路了，请多指教……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-22T23:55:35.260

如果您想进行修改，您将**不想**在 Java 级别进行修改。您可以反编译成 Java 以大致了解发生了什么，但您需要直接修改 Smali。

修改 Smali 后，您可以使用以下命令进行重建：

```
smali -o classes.dex frameworkSmaliDirectory 
```

然后，将更新的 classes.dex 添加回 framework.jar。在 Linux 上，这很简单：

```
zip framework.jar classes.dex 
```

最后，重新挂载 /system 读写，并将更新的 framework.jar 推送到设备：

```
adb shell mount -o rw,remount /system
adb push framework.jar /system/framework/ 
```

现在交叉手指，希望你没有破坏任何东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:56:39.917

你可以试试apktool。这是一个[例子](http://forum.xda-developers.com/showthread.php?t=1357056)，让我们查看问答“我如何自己手动制作补丁？”

# ios5 - 带有 AVFoundation 的视频

> ID：13971196
> 
> 赞同：0
> 
> 时间：2012-12-20T11:28:06.437
> 
> 标签：ios5, avfoundation

我正在尝试让视频与 AVFoundation 一起使用。目前我只有一个代码，它应该从相机获取输入并将其显示在屏幕上的 UIImage 上。但是，我只是得到一个白屏。

```
-(CIContext*)context{
    if(!_context){
        _context = [CIContext contextWithOptions:nil];
    }
    return _context;
}

-(void)captureOutput:(AVCaptureOutput *)captureOutput didDropSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection{
    CVPixelBufferRef pb = CMSampleBufferGetImageBuffer(sampleBuffer);
    CIImage *ciImage = [CIImage imageWithCVPixelBuffer:pb];

    CGImageRef ref = [self.context createCGImage:ciImage fromRect:ciImage.extent];
    self.imageView.image = [UIImage imageWithCGImage:ref scale:1.0 orientation:UIImageOrientationRight];
CGImageRelease(ref);
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
     self.session = [[AVCaptureSession alloc] init];

     //the resolution of the capturing session
     self.session.sessionPreset = AVCaptureSessionPreset352x288;

     self.videoDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
     self.videoInput = [AVCaptureDeviceInput deviceInputWithDevice:
                   self.videoDevice error:nil];

     self.frameOutput = [[AVCaptureVideoDataOutput alloc] init];

     self.frameOutput.videoSettings = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA] forKey:(id)kCVPixelBufferPixelFormatTypeKey];

     [self.session addInput:self.videoInput];
     [self.session addOutput:self.frameOutput];
     [self.frameOutput setSampleBufferDelegate:self queue:dispatch_get_main_queue()];

     [self.session startRunning];

 } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T21:33:17.843

您注册的委托方法是：

`-(void)captureOutput:(AVCaptureOutput *)captureOutput didDropSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection`

您应该注册的委托方法是：

`- (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection`

# .net - .net 3.5 在运行时修改DataSet查询

> ID：13971218
> 
> 赞同：0
> 
> 时间：2012-12-20T11:29:16.487
> 
> 标签：.net, sql, oracle, .net-3.5, dataset

我敢肯定以前有人问过这样的问题，但我似乎无法准确找到我需要的东西。假设我在我的 VS 2010 .NET 3.5 项目中添加了一个 DataSet 组件 - 它可以正常执行和填充，并且非常易于使用。但是，如果我想在运行时对其查询进行小修改（基于各种用户输入）怎么办？

我知道我可以使用参数来做到这一点，但是如果对查询的修改具有更多的结构特征，比如省略参数等怎​​么办？

在生成的代码中，我看到它公开了 CommandCollection 属性，但它受到保护，因此我不能从数据集外部使用它 - 除非:) 我创建了一个从生成的适配器对象继承的虚拟类并通过以下方式公开公开 CommandCollection 属性力（这就是我所做的）-但这不是有点尴尬吗？

你知道更好的技术吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:56:15.800

所以由于没有人回答，我发布了我在这里使用的解决方法（继承类）。前言：当你将一个 DataSet 类从 VS 2010 工具箱拖到设计视图中的表单（例如 MainForm）时，会生成三件事：

*   一个数据集（包含表和数据实例）
*   一个 DataAdapter（描述如何填充上述数据集）
*   一个 BindingSource（将上面的 DataSet 绑定到 Form 上的控件）

上面生成的类的定义以及所需的查询等最终存储在一个 XSD 文件中，并且在每次构建期间，这些类的代码都是从 XSD 生成的。

```
 // MyTableAdapter is a VS2010 AUTOGENERATED class
  // (generated during DataSet wizard)
  // thankfully, MyTableAdapter exposes protected CommandCollection attribute
  class MyAdapter : MyTableAdapter
  {
      public System.Data.OracleClient.OracleCommand[] Commands
      {
          get { return CommandCollection; }
      }
  }

  class MainForm : Form
  {
      private void btnQuery_Click(object sender, EventArgs e)
      {
          // create new OracleCommand to substitute the SelectCommand in autogenerated adapter
          using (OracleCommand cmd = new OracleCommand())
          {
              MyAdapter m = new MyAdapter(); // dummy instance used just to retrieve saved query
              if (m.Commands.Length > 0)
              {
                   cmd.Connection = mainDbConnection;
                   cmd.CommandText = m.Commands[0].CommandText.Replace('someText', 'someOtherText'); // do whatever changes to the query
                   cmd.CommandType = CommandType.Text;
                   cmd.Parameters.Add(...); // optionally, if needed

                   //myTableAdapter is a Designer generated instance of MyTableAdapter
                   //but I can substitute its SelectCommand with something else
                   myTableAdapter.Adapter.SelectCommand = cmd;
                   myTableAdapter.Adapter.Fill(this.myDataSet.MyTable);
              }
          }
      }
  } 
```

# ios - restkit 0.20 - (void) objectLoader didLoadObjects & 其他旧方法

> ID：13971221
> 
> 赞同：2
> 
> 时间：2012-12-20T11:29:29.913
> 
> 标签：ios, xcode, restkit

我对restkit 0.20有点困惑，我知道他们添加了AFNetworking，所以他们重写了很多方法。
现在我正在寻找与 objektLoaders 几乎相同的方法，例如我想使用：

```
1.
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects {}
2.
- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error{}
3.
- (void)objectLoaderDidFinishLoading:(RKObjectLoader *)objectLoader{} 
```

有人会这么好心并给我一个正确方法的提示吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:56:35.060

查看他们关于迁移到 0.20.0的[wiki 页面](https://github.com/RestKit/RestKit/wiki/Upgrading-from-v0.10.x-to-v0.20.0)

该页面中与该问题相关的示例似乎是：

这

```
[ [RKObjectManager sharedManager] loadObjectsAtResourcePath:@"/examples" usingBlock:^(RKObjectLoader *loader) {
    loader.onDidLoadObjects = ^(NSArray *objects) {
        NSLog(@"It Worked: %@", objects);
    };
    loader.onDidFailWithError = ^(NSError *error) {
        NSLog(@"It Failed: %@", error);
    };
}]; 
```

变成

```
[RKObjectManager.sharedManager getObjectsAtPath:path parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult)
{
    NSLog(@"It Worked: %@", [mappingResult array]);
    // Or if you're only expecting a single object:
    NSLog(@"It Worked: %@", [mappingResult firstObject]);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"It Failed: %@", error);
}]; 
```

# android - 如何使edittext后面的背景可滚动

> ID：13971222
> 
> 赞同：0
> 
> 时间：2012-12-20T11:29:31.887
> 
> 标签：android, android-edittext

我正在使用带有图像的 Edittext。但它不可滚动，因为我继续放置文本，文本的开头对我不可见.. 我想知道如何使它可滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:34:29.547

在 EditText XML 标签中试试这个：

```
android:scrollHorizontally="true" 
```

如果您想要垂直滚动，请在您的 EditText XML 标记中定义：

```
android:scrollbars = "vertical" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:35:33.487

使用此代码：

```
edText.setScroller(new Scroller(myContext)); 
edText.setMaxLines(1); 
edText.setVerticalScrollBarEnabled(true); 
edText.setMovementMethod(new ScrollingMovementMethod()); 
```

# wcf - 通过 MonoDroid 应用程序使用 WCF websockets 服务

> ID：13971223
> 
> 赞同：0
> 
> 时间：2012-12-20T11:29:34.553
> 
> 标签：wcf, websocket, xamarin.android

我尝试使用 Mono For Android 应用程序使用 WCF 服务。服务有一个通过 websocket 绑定到 SOAP 的端点。而 websockets 是个问题：MonoDroid 中没有 websockets 的实现。

我将 WebReference 添加到已生成的项目空代理类。我尝试重做为 Windows 8 成功生成的代理类，但没有 DuplexClientBase 实现。我创建了只通过 WebSocket4Net.MonoDroid websockets 实现发出请求的自定义实现。

我可以与纯文本消息进行通信，但我确实需要生成和解析 SOAP 消息的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:23:33.667

您可以尝试使用其他一些协议。例如，通过 HTTP 或自定义 XML 的协议缓冲区。

# c# - System.ArgumentException：为 System.Linq.Expressions 方法中的 lambda 声明提供的参数数量不正确

> ID：13971229
> 
> 赞同：2
> 
> 时间：2012-12-20T11:30:08.423
> 
> 标签：c#, .net, linq, linq-to-sql, expression-trees

伙计们，我正在尝试使用 System.Linq.Expressions 构建表达式树，但出现此错误：

> 错误：System.ArgumentException：为 System.Linq.Expressions.Expression.ValidateLambdaArgs（Type delegateType，Expression& body，ReadOnlyCollection `1 parameters) at System.Linq.Expressions.Expression.Lambda[TDelegate](Expression body, String name, Boolean tailCall, IEnumerable`1 参数）在 System.Linq.Expressions.Expression.Lambda[TDelegate]（Expression）的 lambda 声明提供的参数数量不正确body, Boolean tailCall, IEnumerable`1 parameters) at System.Linq.Expressions.Expression.Lambda[TDelegate](Expression body, ParameterExpression[] parameters) at Gedi.Controllers.OperacaoController.opBuscaFile(FormCollection form) in c:\Users\ Guilherme\Documents\Visual Studio 2012\Projects\Gedi\Gedi\Controllers\OperacaoController.cs：第 338 行

**编码：**

```
IQueryable<String> queryableData = AllIndexValues.AsQueryable<string>();

//docTypeId == idTipo
ParameterExpression pe1 = Expression.Parameter(typeof(int), "docTypeId");
Expression right = Expression.Constant(idTipo);
Expression e1 = Expression.Equal(pe1, right);

//idIndice == 16
ParameterExpression pe2 = Expression.Parameter(typeof(int), "idIndice");
right = Expression.Constant(16, typeof(int));
Expression e2 = Expression.Equal(pe2, right);

//docTypeId == idTipo AND idIndice == 16
Expression predicateBody = Expression.And(e1,e2);

//queryableData.Where(docTypeId => (docTypeId ==  idTipo) AND idIndice => (idIndice ==  16)) 
MethodCallExpression whereCallExpression = Expression.Call(typeof(Queryable), "Where", new Type[] { queryableData.ElementType }, queryableData.Expression, Expression.Lambda<Func<string, bool>>(predicateBody, new ParameterExpression[] { pe1, pe2 }));

IQueryable<string> results = queryableData.Provider.CreateQuery<string (whereCallExpression);

return Content(""+results); 
```

我已经从这里改编了这段代码[http://msdn.microsoft.com/en-us/library/vstudio/bb882637.aspx](http://msdn.microsoft.com/en-us/library/vstudio/bb882637.aspx)

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:35:59.373

这是最初的问题，我认为：

```
Expression.Lambda<Func<string, bool>>(predicateBody,
                                      new ParameterExpression[] { pe1, pe2 })) 
```

A`Func<string, bool>`只需要 a`string`并返回 a `bool`。所以它只有一个参数。你通过了*两个* `ParameterExpressions`。此外，它们*都是* `int`参数......看不到字符串！

所以你可以使用：

```
Expression.Lambda<Func<int, int, bool>>(predicateBody,
                                        new ParameterExpression[] { pe1, pe2 })) 
```

...但我的猜测是，如果您想要一个`Where`条款，那对您没有帮助...

鉴于此评论：

```
//queryableData.Where(docTypeId => (docTypeId ==  idTipo) AND idIndice => (idIndice ==  16)) 
```

...听起来您甚至在我们到达表达式树之前就感到困惑。你不能像这样组合两个 lambda 表达式。

*如果您不需要*构建表达式树，我强烈建议您弄清楚您的代码会是什么样子，然后对其进行转换。什么是元素类型`queryableData`？每个谓词测试只会得到一个值 - 那将是 a`docTypeId`还是 an `idIndice`？

# regex - 删除所有内容，包括两个单词之间的换行符

> ID：13971233
> 
> 赞同：0
> 
> 时间：2012-12-20T11:30:25.453
> 
> 标签：regex, string, python-2.7

我有以下示例

```
a = 'cloth <type> length \n
    short \n
    width \n
    </type> close' 
```

要将 a 更改为以下内容：

```
b = 'cloth close' 
```

我用表达式尝试了 re.sub `re.DOTALL`，但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:36:33.083

您可以用空格替换`\n`，用空格分隔并取列表的第一个广告最后一个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T11:26:15.627

如果你想删除**类型**标签之间的内容，你可以试试这个：

```
b = a.gsub(/<type>[\w\s\t\n]+<\/type>/, '').gsub(/\s\s/, ' ') 
```

它适用于红宝石

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T00:03:27.240

我假设您只想要列表的第一个和最后一个元素，并且以下工作：

```
a = '''cloth <type> length \n
    short \n
    width \n
    </type> close'''
a_split = a.split()                        #Splits on whitespace into tokens
b = [a_split[0], a_split[len(a_split)-1]]  #Take the first and last token 
```

# emacs - 如何显示覆盖/隐藏的键绑定？

> ID：13971235
> 
> 赞同：13
> 
> 时间：2012-12-20T11:30:32.790
> 
> 标签：emacs

在 emacs 中，如何显示当前缓冲区的阴影/覆盖键绑定？它们在运行时不会出现`describe-bindings`( `C-h b`)。

换句话说：如何查看缓冲区中活动的模式是否具有冲突的键绑定？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T21:08:20.400

只需致电`describe-mode`：`C-h``m`

大多数模式文档字符串将显示它们的键映射，并且用于在此处列出它们的方法还会告诉您绑定是否被隐藏。

它不会告诉你它被什么遮蔽了，但是用`C-h``c`or来检查当然是微不足道的`C-h``k`。

例如：

```
key             binding
---             -------
[...]
C-M-q           indent-sexp
  (that binding is currently shadowed by another mode) 
```

该文本由在调用该函数`substitute-command-keys`时处理模式文档字符串的函数生成`documentation`。

例如：

```
(substitute-command-keys "\\{lisp-interaction-mode-map}") 
```

以下功能也很有用：

```
(key-binding KEY &optional ACCEPT-DEFAULT NO-REMAP POSITION) ;; dominant binding
(global-key-binding KEYS &optional ACCEPT-DEFAULT)
(local-key-binding KEYS &optional ACCEPT-DEFAULT)
(minor-mode-key-binding KEY &optional ACCEPT-DEFAULT) ;; discover keymap(s) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:11:14.953

为了它，我这样做了：

```
(define-key c++-mode-map "\C-c\C-s" 'kaw-sort-projects) 
```

然后做了 Ch b （查看绑定）。并得到了这个输出：

```
Major Mode Bindings:
key             binding
---             -------

C-c C-q     c-indent-defun
C-c C-s     kaw-sort-projects
C-c C-u     c-up-conditional
C-c C-w     subword-mode 
```

所以它似乎确实出现了。

这是你的意思吗？

创建了这个函数，当你定义一个键时，它会为你提供以前的值

```
(defun define-key-warn (map key fxn)
  "Bind a key and give info message if already bound"
  (setq old-fxn (lookup-key map key))
  (if old-fxn
      (message "INFO: key %s was defined as %s" key old-fxn))

  (define-key map key fxn)
) 
```

# python - Sqlalchemy 嵌套查询返回错误数据

> ID：13971240
> 
> 赞同：0
> 
> 时间：2012-12-20T11:30:49.087
> 
> 标签：python, sql, postgresql, sqlalchemy, nested

我有这个 SQL 表达式：

```
SELECT count(*), date_trunc('day', data)
from (
select max(hc.acesso) as data 
from historico_comunicacao hc
join cliente c on (c.id = hc.id_cliente)
group by c.id
having max(hc.acesso) between ('2012-11-30') and ('2012-12-07 23:59:59')
order by max(hc.acesso) desc
) as x

GROUP BY 2
ORDER BY 2 DESC; 
```

**所以，我在 SqlAlchemy 中这样做了：**

```
nestedQuery = session.query(func.max(MapComunicacao.acesso).label('data'))\
.join(MapCliente)\
.group_by(MapCliente.id)\
.having(func.max(MapComunicacao.acesso).between(dataini, dataFinal))\
.order_by(desc(func.max(MapComunicacao.acesso)))

query = session.query(
    func.count(nestedQuery.subquery().columns.data),
        extract('day', nestedQuery.subquery().columns.data)
)\
.group_by('anon_3.data')

result = query.all() 
```

没有发生错误，但返回的数据对我来说是错误的。

我有两个表：Cliente (Customer) 和 Historico_Acesso (Access_History)。我想知道的是最后一次与我的数据库交谈的客户总数，按日期分组。

像这样：

总日期

19; “2012-12-07 00:00:00+00”

16; “2012-12-06 00:00:00+00”

20; “2012-12-05 00:00:00+00”

06; “2012-12-04 00:00:00+00”

06; “2012-12-03 00:00:00+00”

01; “2012-12-02 00:00:00+00”

04; “2012-12-01 00:00:00+00”

09; “2012-11-30 00:00:00+00”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:13:33.270

Wild guess: try to extract `nestedQuery.subquery()` into a variable, so that it's called only once.

If that doesn't work, SQLAlchemy will gladly print the generated SQL for you with `print query`. You can then compare with your handcrafted SQL query.

# git - 获取之前的代码 git merge

> ID：13971241
> 
> 赞同：1
> 
> 时间：2012-12-20T11:30:52.780
> 
> 标签：git, github, merge

我不明白 Git 究竟是如何工作的。

我有一个分支，`branch1`使用以下代码：

```
<?php
$this = array(
    "aa" => 1
); 
```

和另一个分支，`branch2`，具有：

```
<?php
$this = array(
    "aa" => 1,
    "bb" => 2
); 
```

当我做：

```
git checkout branch1
git merge branch2 
```

我没有冲突，我有确切的 branch1 代码，我想要 branch2 代码。

```
Master - - - \ - - - - - - - - - - -Branch1
              \
               \- - - - Branch2 
```

编辑：

我认为有一些自动冲突解决方案我想避免它

# javascript - Android仅在空格后自动完成？

> ID：13971243
> 
> 赞同：16
> 
> 时间：2012-12-20T11:31:02.520
> 
> 标签：javascript, android, html, cordova, autocomplete

我有一个用 Html5 构建并用 PhoneGap for Android 包装的应用程序

我有一个自动完成输入

在计算机上自动完成输入**效果很好**！

在 SmartPhone 中，自动完成功能仅在您在 Input 上腾出**空间后才起作用**

（如果先写数字 -**有效**！如果字母 -**只在空格后有效**）

**为什么？**

JS代码：

```
//Run in document.ready
function AutoComplete() {
    List = $.map(data.XXX, function (item) {
                return {
                    label: item.X,
                    value: item.XX
                };

            });
    $("#MyInput").autocomplete({
                source: List,
                link: '#',
                target: $('#MyList'),
                minLength: 1
            });

   } 
```

HTML：

输入：

```
 <input id="MyInput" type="text" 
                placeholder="XXX"  /> 
```

名单：

```
 <ul id="MyList" data-role="listview" data-inset="true"> </ul> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:34:09.373

尝试将 autocomplete="off" 添加到输入标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T09:24:28.027

我不确定，但给予后尝试

```
 minlength :0 
```

并在按键时执行自动完成

可能这会给你输出。

看看这些链接也

1.  [链接1](https://github.com/commadelimited/autoComplete.js)
2.  [链接2](http://www.raymondcamden.com/index.cfm/2012/3/27/Example-of-Autocomplete-in-jQuery-Mobile)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-06T12:28:39.330

输入中的'oninput'事件，运行以下函数：

```
function RefreshAutoComplete(elm) {
    elm.keyup();
    elm.focus();
} 
```

我手动运行自动完成，它可以工作

谢谢大家的帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-03T17:01:28.303

我认为这个链接解决了你的问题，展示了如何[让 jQueryUi 自动完成与 jQueryMobile 一起工作](https://stackoverflow.com/a/7936266/1853864)

这个答案允许您在 jQueryMobile 解决方案上使用 jQuery 的自动完成功能。

# javascript - 在 Ajax 事件之后调用其余的 javascript

> ID：13971245
> 
> 赞同：1
> 
> 时间：2012-12-20T11:31:13.583
> 
> 标签：javascript, ajax

你好

我正在尝试为输入字段执行自动完成功能。

*伪代码*

```
<input type="text"/>

<script>
 var ref,resp;//Global Variables

$('input').live('keyup',function(){
   /* Get the input offset, so that list container can be palced at the bottom of the input once get the values through Ajax call */

  ajaxCall();

 /***
  Here I want to write a code to create a div and place the values with in the div and show at the respective input field.
 ***/

});

function ajaxCall(){
var ref  = new XMLHttpRequest();
  ref.open();
  ref.readStateChange = function(){
    if(ref.readyState == 4 && ref.status ==200)
       resp = ref.responseText();
  }
  ref.send();
}

</script> 
```

我在这里遇到的问题是，一旦 ajax readyState 为 4 并检索值，应该执行 ajax 调用之后的代码部分。

但是，当 readyState 为 1（在其他状态之后未调用它）时，该代码正在执行，其中未从数据库中检索到值。这让我无法显示列表。

***注意***：我知道下面的部分可以放在 ajaxCall 中，但它包含一些可以在该位置设置的变量....

我的问题有意义吗？如果是这样，有人可以让我知道解决方案吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:35:21.083

您必须在 AJAX 回调期间调用依赖于 AJAX 调用结果的函数。就是这样：

```
function ajaxCall(callback) {
    var ref = new XMLHttpRequest();
    ref.open();
    ref.readStateChange = function() {
        if (ref.readyState === 4 && ref.status === 200) {
             resp = ref.responseText();
             callback.call(null, ref.responseText); // invoke the callback here
        }
    }
    ref.send();
} 
```

接着：

```
ajaxCall(function(resp) {
    // handle "resp" here
}); 
```

也就是说，请不要重新发明轮子。您最终会得到难以维护且无法跨浏览器移植的代码。有很多库可以让这样的 AJAX 代码变得轻而易举。我使用 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:33:47.123

您希望在完成 ajax 调用后运行的代码应该放在代码的 onSuccess() 或 onComplete() 方法中。

```
ajaxCall(function(resp) {

    /***
      Here I want to write a code to create a div and place the values with in the div and show at the respective input field.
     ***/
}); 
```

IE。这部分代码必须在 onComplete() 方法中，它将 ajax 调用返回的数据作为参数。

# c# - 如何获取列表中每个游戏对象的距离、碰撞和方向？

> ID：13971249
> 
> 赞同：1
> 
> 时间：2012-12-20T11:31:16.910
> 
> 标签：c#, unity3d, distance, collision, game-physics

所以，我有一个包含游戏对象的列表，我非常不确定如何获得每个对象的距离、碰撞和方向。使用 SphereCast 来满足我的需求是合适的，因为我知道只有类函数才能为我做这件事。我编写了代码来完成任务，但它只为列表中的 1 个游戏对象获取数据，在所有这些对象中，我希望从列表中的所有游戏对象中获取数据。有什么想法可以更改代码或方法吗？

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class example : MonoBehaviour {

    RaycastHit hit;

    Vector3 direction;

    public static  List<float> sphereCast = new List<float>();

    void Update() {
        CharacterController charCtrl = GetComponent<CharacterController>();
        foreach(GameObject g in xmlreaderUnityObject.unityGameObjectsToCDP)
        {
            Vector3 p1 = g.transform.position;
            if (Physics.SphereCast(p1, charCtrl.height / 2, g.transform.forward, out hit,1))    
            { 
                float distance = 0;
                float angleBetween = 0;
                float contact = 0; 
                if(hit.collider.enabled)
                {
                    direction = hit.transform.position - p1;
                    angleBetween = Vector3.Angle(g.transform.forward, direction);
                    contact = 1;
                    distance =  hit.distance;
                }
                print("Distance: "+ distance + " Collision: " + contact + " Direction: " + angleBetween + " hit point: "
                        +hit.point + " player position: " + p1);

                sphereCast.Add(contact);
                sphereCast.Add(distance);
                sphereCast.Add(angleBetween);
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T03:06:22.087

原因是它只击中了一个 GameObject。我已经设置了一个场景，它会显示它击中的所有游戏对象 + 发送它的游戏对象。 [项目示例](https://www.dropbox.com/sh/v7d9ksm5v1xcdqg/qFk44cmt_s/New%20Unity%20Project%206)

# javascript - Knockout.js 和 Sammy.js 错误行为

> ID：13971253
> 
> 赞同：2
> 
> 时间：2012-12-20T11:31:40.820
> 
> 标签：javascript, knockout.js, sammy.js

我正在为我的网站开发管理面板，并决定用淘汰赛和萨米来做。但是我面临路由问题。我有两页：

```
http://localhost/admin/element and http://localhost/admin/category. 
```

在我的元素页面上，我有以下 Sammy 配置：

```
Sammy(function() {
            this.get('#:currentpage', function() {
                self.reloadPage(this.params.currentpage);
            });

            this.get('', function() {
                this.app.runRoute('get', '#1');
            });
        }).run(); 
```

一切都很完美，但是如果我尝试转到另一个页面（通过通常的链接，例如[Edit Categories](/Admin/Category)），我只会到达同一页面上的空路线，所以我无法通过链接转到另一个页面。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T15:28:42.323

不要在 Sammy 配置中使用 ''。尝试使用 '/' 作为根页面或使用 '/admin/element' 作为您的元素。

```
var Router = function() {
    var sammy = new Sammy.Application(function() {

            this.get('#:currentpage', function(context) {
                alert(context.params.currentpage);
            });

            this.get('/admin/element', function () {
                this.app.runRoute('get', '#1');
            });

        }),
        run = function() {
            sammy.run();
        };

    return {
        run: run
    };
};

$(function() {
    var r = new Router();
    r.run();
}); 
```

PS：示例使用 Sammy 0.7.1 版本。在 0.6.3 版本中还有另一种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T03:15:03.280

如果您有一个操作链接并且想要点击进入另一个页面，这将有效

```
`<li>@Html.ActionLink("Admin Action Link Test", "Admin", "Home")</li>
this.get('/Home/Admin', function ()
                {
                    location.assign("/Home/Admin");
                });` 
```

或者您可以使用哈希来执行此操作

```
<li><a href="#/Home/About">About Full Path</a></li>  
this.get('#/Home/About', function ()
                {                       
                    location.assign("/Home/About");                   
                }); 
```

# javascript - 使用greasemonkey编辑html

> ID：13971254
> 
> 赞同：0
> 
> 时间：2012-12-20T11:31:45.833
> 
> 标签：javascript, greasemonkey

我在 html 文档中有此文本

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="" id="movie" align="middle" height="371" width="495">
    <param name="movie" value="/play/skins/flash/22753/a.swf?
    movid=blfgbd&amp;clid=22753&amp;autoplay=true&amp;noad=&amp;
    did=1000806817&amp;&amp;cache_buster=634916059503671812&amp;session_id=806817&amp;
    break_number=0&amp;user_id=-1&amp;VAST=2&amp;is_hiro=true">
    <param name=... 
```

我想将最后一个 true 更改为 false is_hiro=true->is_hiro=false 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:35:38.670

这应该有效：

```
// Get the <param> tag.
var param = document.getElementById('movie').children[0];
// Replace the content of the param's value.
param.value = param.value.replace('is_hiro=true', 'is_hiro=false'); 
```

请注意，这假设您的参数是对象的第一个孩子。
如果情况并非总是如此，最好给参数 a `id`：

```
<param name="movie"
    id="myParameter"
    value="/play/skins/flash/22753/a.swf?
        movid=blfgbd&amp;clid=22753&amp;autoplay=true&amp;noad=&amp;
        did=1000806817&amp;&amp;cache_buster=634916059503671812&amp;
        session_id=806817&amp; break_number=0&amp;user_id=-1&amp;
        VAST=2&amp;is_hiro=true"> 
```

```
var param = document.getElementById('myParameter'); // Get the <param> tag.
param.value = param.value.replace('is_hiro=true', 'is_hiro=false'); 
```

# node.js - 如何在 node.js 中异步使用 setTimeout

> ID：13971255
> 
> 赞同：5
> 
> 时间：2012-12-20T11:31:48.980
> 
> 标签：node.js

我是 node.js 的新手，我尝试使用 setTimeout 来模拟长连接并希望它异步运行。

```
var http = require('http');

http.createServer(function (request, response) {
    console.log('New request @ ' + request.url);
    (function (response) {
         setTimeout(function () {
             console.log('Time is up');
             response.writeHead(200, {"Content-Type": "text/plain"});
             response.end('Hello World\n');
         }, 3000);
     })(response);
}).listen(8124);

console.log('Server running at http://127.0.0.1:8124/'); 
```

但是，上面的代码执行起来就像一个同步单线程应用程序，每 3 秒只能处理一个请求。

我认为 node.js 中的所有内容都应该异步执行。那么，这里有什么问题呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T11:54:24.363

是异步的`SetTimeout`，中间不需要那个匿名函数，写这个就行了。

```
var http = require('http');

http.createServer(function (request, response) {
  console.log('New request @ ' + request.url);
  setTimeout(function () {
    console.log('Time is up');
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.end('Hello World\n');
  }, 3000);
}).listen(8124);

console.log('Server running at http://127.0.0.1:8124/'); 
```

如果您产生 10 个并发请求，则总补偿时间将在 3 秒左右，这意味着它是异步的。您可以使用 ab 工具进行检查，或者如果您对节点进行编程，可能更容易安装[http-perf](https://github.com/zanchin/node-http-perf)。并运行`nperf -c 10 -n 10 http://127.0.0.1:8124`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:37:42.903

你需要在一个新进程中运行你的睡眠。有一个模块可以帮助您（[https://github.com/cramforce/node-worker](https://github.com/cramforce/node-worker)），或者您可以查看有关 spawn 的普通 api 文档。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-01-26T23:18:49.323

var async,
__slice = [].slice;

异步 = 要求（“异步”）；

async.setTimeOut = function() {
    var arg, args, 回调, 延迟, runWithTimeOut;
    回调 = 参数 [0]，延迟 = 参数 [1]，参数 = 参数 [2]，参数 = 4 <= 参数长度？__slice.call(参数, 3) : [];
    runWithTimeOut = function() {
        return setTimeout(callback, delay, arg, args);
    };

    返回 async.parallel([runWithTimeOut]);
};

# sql-server - 存储过程：将列值作为逗号分隔值返回

> ID：13971264
> 
> 赞同：0
> 
> 时间：2012-12-20T11:32:27.497
> 
> 标签：sql-server, stored-procedures

> **可能重复：**
> [将多行转换为一行，以逗号作为分隔符](https://stackoverflow.com/questions/887628/convert-multiple-rows-into-one-with-comma-as-separator)

所以我有这个模型，[我的数据库模型的图片](http://picpaste.com/model-1OEkgOhr.png)

我想创建一个存储过程，给定一个 calendarEvent id，它以逗号分隔的字符串返回所有参与它的域用户的用户名。

我可以通过连接轻松地以表格形式获取受影响的用户名，但我该如何展平该表格？

# iphone - 我在 json 中发送字典，它有两个数组和多个值，但我得到响应访问被拒绝

> ID：13971265
> 
> 赞同：2
> 
> 时间：2012-12-20T11:32:27.587
> 
> 标签：iphone, objective-c, ios, cocoa-touch, nsmutablearray

我正在发送两个数组和多个值抛出 json 但是当我发送这个时我得到成功代码 200 并且它的响应显示访问被拒绝请任何人给我正确的方法来解决它**

```
-(void)SaveColumnConnection
{

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURLURLWithString:@"http://xxxyyyzzzz.php"]];
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:oneRowColumn,@"oneRowCols",memberTid,@"table_title_id",totalRowStr,@"totRow",rowandColumn,@"tempColName",tableOptIdArray ,@"tempOptid",companyId,@"companyid",@"savecolumniphone",@"tag",nil];
NSLog(@"dict %@",dict);
SBJSON *parser =[[SBJSON alloc] init];
NSString *jsonString = [parser stringWithObject:dict];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[jsonString dataUsingEncoding:NSUTF8StringEncoding]];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue]  completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    NSHTTPURLResponse *HTTPResponse = (NSHTTPURLResponse *)response;
    NSInteger statusCode = [HTTPResponse statusCode];
    if (statusCode==200) {
        //Request goes in success
        NSString *str = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSLog(@"Json for post array ----------%@",str);
    }
    else{
        ///request is get failed
        NSLog(@"Error Description %@",[error localizedDescription]);
    }
}];
[request release];
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:47:27.130

也想查看您的 php 代码..无论如何请检查以下示例是否对您有帮助...这里我没有发送任何字典值，请根据您的要求调整代码:)

```
NSString *jsonRequest = @"{\"username\":\"user\",\"password\":\"pwd\"}";
NSLog(@"Request: %@", jsonRequest);

NSURL *url = [NSURL URLWithString:@"http://xxxyyyzzzz.php"];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: requestData];

[NSURLConnection connectionWithRequest:[request autorelease] delegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:05:42.270

试试这个代码

```
NSDictionary *dict = [NSDictionary
                          dictionaryWithObjectsAndKeys:oneRowColumn,@"oneRowCols",memberTid,@"table_title_id",totalRowStr,@"totRow",rowandColumn,@"tempColName",tableOptIdArray ,@"tempOptid",companyId,@"companyid",@"savecolumniphone",@"tag",nil];
    NSString *jsonRequest = [dict JSONRepresentation];

    NSURL *url = [NSURL URLWithString:@"http://xxxyyyzzzz.php"];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url
                                                           cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

    NSData *requestData = [NSData dataWithBytes:[jsonRequest UTF8String] length:[jsonRequest length]];

    [request setHTTPMethod:@"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
    [request setHTTPBody: requestData];

    connection = [[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

# html - 使用边距自动居中对齐在 IE7 中不起作用

> ID：13971266
> 
> 赞同：1
> 
> 时间：2012-12-20T11:32:35.437
> 
> 标签：html, css, internet-explorer-7

我有一个页脚菜单，它应该在屏幕上水平居中，里面的元素然后在页脚容器中水平居中（见下图）。这在除 IE7（这是我们希望支持的最低版本的 IE）之外的所有浏览器中都可以正常工作。我不明白为什么这不起作用。我已经在这个小提琴中复制了代码，但是小提琴似乎也没有正确对齐它（所以如果需要，我可以提供指向该站点的链接）：

[http://jsfiddle.net/jezzpin/tz5Ym/](http://jsfiddle.net/jezzipin/tz5Ym/)

有没有人知道为什么这在 IE7 中不起作用？我需要执行 IE7 特定的 hack 吗？

在其他人陈述明显之前：

*   是的，我已经在使用 margin:auto 作为水平边距。
*   是的，我已经声明了我的 Doctype

    ```
    jme1988 
    ```

正确显示： ![正确显示](../Images/3f1125b02591f47c49cc4558f07a8df7.png)

IE7 显示： ![IE7 显示](../Images/f47c65d50de1fac08103742f566a9c46.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:37:43.500

你愿意在你的代码中使用 CSS hacks 吗？如果是这样，您可以使用每个浏览器的 CSS 实现中的已知错误来定位特定的 IE 版本。请参阅[有关该主题的 NetTuts 帖子](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-how-to-target-ie6-ie7-and-ie8-uniquely-with-4-characters/)。

例如：

```
body {  
  color: red; /* all browsers, of course */  
  color : green\9; /* IE8 and below */  
  *color : yellow; /* IE7 and below */  
  _color : orange; /* IE6 */  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:23:21.377

填充似乎不适用于非块元素，所以我不得不使用：

```
display: block; 
```

强制 IE7 接受样式。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T12:10:17.117

当您想要居中的元素使用绝对宽度时，使用以下是旧 Internet Explorer 的解决方法：

```
div.center{
  width:1024px;
  left:50%;
  margin-left:-512px;
} 
```

另外：您是否声明了您的文档类型？

# java - 如何动态地将字符串值传递给另一个类中的textview？

> ID：13971269
> 
> 赞同：2
> 
> 时间：2012-12-20T11:32:49.853
> 
> 标签：java, android

我的代码：

根据格雷厄姆的评论进行编辑

PaintView.java

```
public class PaintView extends View {

private Bitmap mBitmap;
private Canvas mCanvas;
private Path mPath;
private Paint mPaint;
private static final int TOUCH_TOLERANCE_DP = 20;
private static final int BACKGROUND = 0xFFDDDDDD;
private List<Point> mPoints = new ArrayList<Point>();
private int mLastPointIndex = 0;
private int marks = 0;
private int mTouchTolerance;
private boolean isPathStarted = false;

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawColor(BACKGROUND);
    canvas.drawBitmap(mBitmap, 0, 0, null);
    canvas.drawPath(mPath, mPaint);

    // TODO remove if you dont want points to be drawn
    for (Point point : mPoints) {
        canvas.drawPoint(point.x, point.y, mPaint);
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up(x, y);
            invalidate();
            break;
    }
    return true;
}

private void touch_start(float x, float y) {

    if (checkPoint(x, y, mLastPointIndex)) {
        mPath.reset();
        // user starts from given point so path can beis started
        isPathStarted = true;
    } else {
        // user starts move from point which doen's belongs to mPinst list
        isPathStarted = false;
    }

}

//ADDED WITH LAST EDIT
private void touch_move(float x, float y) {
    // draw line with finger move
    if (isPathStarted) {
        mPath.reset();
        Point p = mPoints.get(mLastPointIndex);
        mPath.moveTo(p.x, p.y);
        if (checkPoint(x, y, mLastPointIndex + 1)) {
            p = mPoints.get(mLastPointIndex + 1);
            mPath.lineTo(p.x, p.y);
            mCanvas.drawPath(mPath, mPaint);
            mPath.reset();
            ++mLastPointIndex;
            marks++;
            update();
        } else {
            mPath.lineTo(x, y);
        }
    }
}

private void update() {
    // TODO Auto-generated method stub
    String newMarks  = "";
    newMarks = Integer.toString(marks);
    Log.e("Marks", ":" + newMarks);
}

/**
 * Draws line.
 */
private void touch_up(float x, float y) {
    mPath.reset();
    marks--;
    update();
    if (checkPoint(x, y, mLastPointIndex + 1) && isPathStarted) {
        // move finished at valid point so draw whole line

        // start point
        Point p = mPoints.get(mLastPointIndex);
        mPath.moveTo(p.x, p.y);
        // end point
        p = mPoints.get(mLastPointIndex + 1);
        mPath.lineTo(p.x, p.y);
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
        // increment point index
        ++mLastPointIndex;
        isPathStarted = false;
    }

}
} 
```

MainActivity.java

```
public class MainActivity extends Activity {

    TextView textView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        textView = (TextView)findViewById(R.id.marks_id);
        //update();
    }

    /*private void update() {
        // TODO Auto-generated method stub
        String newMarks  = "";
        newMarks = Integer.toString(marks);
        TextView textView = (TextView)findViewById(R.id.marks_id);
        textView.setText(newMarks);
    }*/

} 
```

我想从 PaintView.java 中获取标记的值并将该值分配给 MainActivity.java 中的 textView。这是一个菜鸟问题，但请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:13:12.790

你可以使用观察者模式来做到这一点，

**观察者活动.java**

这是你的观察者 有不止一个观察者

```
public class ObserverActivity extends Activity  implements Observer{
    com.talha.examples.PaintView paint1;
    private ActivityHolder paintHolder = ActivityHolder.getInstance();
    EditText editText1;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_paintview);        
        paint1= (com.talha.examples.PaintView)findViewById(R.id.paint1);
        editText1= (EditText)findViewById(R.id.editText1);
        paintHolder.registerObserver(this);

    }

    @Override
    public void updateNewValue(String str) {        
        editText1.setText(str);
    }
} 
```

**Observer.java** 你所有的观察者都必须实现这个

```
public interface Observer {
    public void updateNewValue(String str); 
} 
```

**主题.java**

```
public interface Subject {
    public void registerObserver(Observer o);
    public void removeObserver(Observer o);
    public void notifyObserver();
} 
```

**ActivityHolder.java**

此类将使用单例将观察者保存在列表中，然后您可以调用所有观察者来通知数据已更改

```
 import java.util.ArrayList;

public class ActivityHolder implements Subject {
    private static ActivityHolder uniqueActivityHolder;
    private ArrayList observers;
    private String newValue; 

    private ActivityHolder() {
        observers = new ArrayList();
    }

    public static synchronized ActivityHolder getInstance() {
        if (uniqueActivityHolder == null) {
            uniqueActivityHolder = new ActivityHolder();
        }
        return uniqueActivityHolder;
    }

    public void registerObserver(Observer o) {
        observers.add(o);
    }

    public void removeObserver(Observer o) {
        int i = observers.indexOf(o);
        if (i >= 0) {
            observers.remove(i);
        }

    }

    public void notifyObserver() {
        for (int i = 0; i < observers.size(); i++) {
            Observer observer = (Observer) observers.get(i);
            observer.updateNewValue(newValue);
        }
    }

    public void valueChanged() {
        notifyObserver();
    }

    public void setNewValue(String _NewValue) {
        this.newValue = _NewValue;
        valueChanged();
    }
} 
```

**PaintView.java**

绘制视图数据获取保存观察者列表的 ActivityHolder 唯一实例，然后它将通知代码下面的所有观察者

> for (int i = 0; i <observers.size(); i++) { 观察者观察者 = (Observer) 观察者.get(i); 观察者.updateNewValue(newValue); }

```
import java.util.ArrayList;
import java.util.List;
import android.content.Context;
import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.graphics.Point;
import android.util.AttributeSet;
import android.util.Log;
import android.util.TypedValue;
import android.view.MotionEvent;
import android.view.View;

public class PaintView extends View{

    private Bitmap mBitmap;
    private Canvas mCanvas;
    private Path mPath;
    private Paint mPaint;
    private static final int TOUCH_TOLERANCE_DP = 20;
    private static final int BACKGROUND = 0xFFDDDDDD;
    private List<Point> mPoints = new ArrayList<Point>();
    private int mLastPointIndex = 0;
    private int marks = 0;
    private int mTouchTolerance;
    private boolean isPathStarted = false;
    private ActivityHolder paintHolder = ActivityHolder.getInstance();

    public PaintView(Context context) {
        super(context);
        mCanvas = new Canvas();
        mPath = new Path();
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(Color.BLACK);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);
        mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);        

        // TODO just test points
        Point p1 = new Point(133, 123);
        Point p2 = new Point(149, 136);
        Point p3 = new Point(182, 137);
        Point p4 = new Point(206, 118);
        Point p5 = new Point(208, 87);
        Point p6 = new Point(187, 71);
        Point p7 = new Point(144, 78);
        Point p8 = new Point(124, 101);
        Point p9 = new Point(113, 128);
        Point p10 = new Point(112, 157);
        Point p11 = new Point(119, 188);
        Point p12 = new Point(134, 209);
        Point p13 = new Point(162, 228);
        Point p14 = new Point(194, 238);
        Point p15 = new Point(232, 240);
        Point p16 = new Point(263, 237);
        Point p17 = new Point(289, 224);
        Point p18 = new Point(315, 204);
        Point p19 = new Point(332, 174);
        Point p20 = new Point(339, 128);
        Point p21 = new Point(329, 95);
        Point p22 = new Point(304, 73);
        Point p23 = new Point(280, 69);
        Point p24 = new Point(254, 87);
        Point p25 = new Point(248, 116);
        Point p26 = new Point(259, 143);
        Point p27 = new Point(278, 153);
        Point p28 = new Point(241, 157);
        Point p29 = new Point(192, 160);
        Point p30 = new Point(150, 159);
        mPoints.add(p1);
        mPoints.add(p2);
        mPoints.add(p3);
        mPoints.add(p4);
        mPoints.add(p5);
        mPoints.add(p6);
        mPoints.add(p7);
        mPoints.add(p8);
        mPoints.add(p9);
        mPoints.add(p10);
        mPoints.add(p11);
        mPoints.add(p12);
        mPoints.add(p13);
        mPoints.add(p14);
        mPoints.add(p15);
        mPoints.add(p16);
        mPoints.add(p17);
        mPoints.add(p18);
        mPoints.add(p19);
        mPoints.add(p20);
        mPoints.add(p21);
        mPoints.add(p22);
        mPoints.add(p23);
        mPoints.add(p24);
        mPoints.add(p25);
        mPoints.add(p26);
        mPoints.add(p27);
        mPoints.add(p28);
        mPoints.add(p29);
        mPoints.add(p30);
    }

    public PaintView(Context context, AttributeSet attrs) {
        super(context, attrs);
        mCanvas = new Canvas();
        mPath = new Path();
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(Color.BLACK);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);
        mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);

        // TODO just test points
        Point p1 = new Point(133, 123);
        Point p2 = new Point(149, 136);
        Point p3 = new Point(182, 137);
        Point p4 = new Point(206, 118);
        Point p5 = new Point(208, 87);
        Point p6 = new Point(187, 71);
        Point p7 = new Point(144, 78);
        Point p8 = new Point(124, 101);
        Point p9 = new Point(113, 128);
        Point p10 = new Point(112, 157);
        Point p11 = new Point(119, 188);
        Point p12 = new Point(134, 209);
        Point p13 = new Point(162, 228);
        Point p14 = new Point(194, 238);
        Point p15 = new Point(232, 240);
        Point p16 = new Point(263, 237);
        Point p17 = new Point(289, 224);
        Point p18 = new Point(315, 204);
        Point p19 = new Point(332, 174);
        Point p20 = new Point(339, 128);
        Point p21 = new Point(329, 95);
        Point p22 = new Point(304, 73);
        Point p23 = new Point(280, 69);
        Point p24 = new Point(254, 87);
        Point p25 = new Point(248, 116);
        Point p26 = new Point(259, 143);
        Point p27 = new Point(278, 153);
        Point p28 = new Point(241, 157);
        Point p29 = new Point(192, 160);
        Point p30 = new Point(150, 159);
        mPoints.add(p1);
        mPoints.add(p2);
        mPoints.add(p3);
        mPoints.add(p4);
        mPoints.add(p5);
        mPoints.add(p6);
        mPoints.add(p7);
        mPoints.add(p8);
        mPoints.add(p9);
        mPoints.add(p10);
        mPoints.add(p11);
        mPoints.add(p12);
        mPoints.add(p13);
        mPoints.add(p14);
        mPoints.add(p15);
        mPoints.add(p16);
        mPoints.add(p17);
        mPoints.add(p18);
        mPoints.add(p19);
        mPoints.add(p20);
        mPoints.add(p21);
        mPoints.add(p22);
        mPoints.add(p23);
        mPoints.add(p24);
        mPoints.add(p25);
        mPoints.add(p26);
        mPoints.add(p27);
        mPoints.add(p28);
        mPoints.add(p29);
        mPoints.add(p30);
    }

    public PaintView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        mCanvas = new Canvas();
        mPath = new Path();
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(Color.BLACK);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);
        mTouchTolerance = dp2px(TOUCH_TOLERANCE_DP);
    }

    protected void onSizeChanged(int width, int height, int oldWidth,
            int oldHeight) {
        super.onSizeChanged(width, height, oldWidth, oldHeight);
        clear();

    }

    protected void onDraw(Canvas canvas) {
        canvas.drawColor(BACKGROUND);
        canvas.drawBitmap(mBitmap, 0, 0, null);
        canvas.drawPath(mPath, mPaint);

        // TODO remove if you dont want points to be drawn
        for (Point point : mPoints) {
            canvas.drawPoint(point.x, point.y, mPaint);
        }
    }

    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            invalidate();
            break;
        case MotionEvent.ACTION_UP:
            touch_up(x, y);
            invalidate();
            break;
        }
        return true;
    }

    private void touch_start(float x, float y) {

        if (checkPoint(x, y, mLastPointIndex)) {
            mPath.reset();
            // user starts from given point so path can beis started
            isPathStarted = true;
        } else {
            // user starts move from point which doen's belongs to mPinst list
            isPathStarted = false;
        }

    }

    // ADDED WITH LAST EDIT
    private void touch_move(float x, float y) {
        // draw line with finger move
        if (isPathStarted) {
            mPath.reset();
            Point p = mPoints.get(mLastPointIndex);
            mPath.moveTo(p.x, p.y);
            if (checkPoint(x, y, mLastPointIndex + 1)) {
                p = mPoints.get(mLastPointIndex + 1);
                mPath.lineTo(p.x, p.y);
                mCanvas.drawPath(mPath, mPaint);
                mPath.reset();
                ++mLastPointIndex;
                marks++;
                update();
            } else {
                mPath.lineTo(x, y);
            }
        }
    }

    private void update() {
        // TODO Auto-generated method stub
        String newMarks = "";
    newMarks = Integer.toString(marks);

            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
            // when you set the new value all your observers will be notified
            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

        paintHolder.setNewValue(newMarks);

            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
            // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

        Log.e("Marks", ":" + newMarks);
    }

    /**
     * Draws line.
     */
    private void touch_up(float x, float y) {
        mPath.reset();
        marks--;
        update();
        if (checkPoint(x, y, mLastPointIndex + 1) && isPathStarted) {
            // move finished at valid point so draw whole line

            // start point
            Point p = mPoints.get(mLastPointIndex);
            mPath.moveTo(p.x, p.y);
            // end point
            p = mPoints.get(mLastPointIndex + 1);
            mPath.lineTo(p.x, p.y);
            mCanvas.drawPath(mPath, mPaint);
            mPath.reset();
            // increment point index
            ++mLastPointIndex;
            isPathStarted = false;
        }

    }

    /**
     * Sets paint
     * 
     * @param paint
     */
    public void setPaint(Paint paint) {
        this.mPaint = paint;
    }

    /**
     * Returns image as bitmap
     * 
     * @return
     */
    public Bitmap getBitmap() {
        return mBitmap;
    }

    /**
     * Clears canvas
     */
    public void clear() {
        mBitmap = Bitmap.createBitmap(getWidth(), getHeight(),
                Bitmap.Config.ARGB_8888);
        mBitmap.eraseColor(BACKGROUND);
        mCanvas.setBitmap(mBitmap);
        invalidate();
    }

    /**
     * Checks if user touch point with some tolerance
     */
    private boolean checkPoint(float x, float y, int pointIndex) {
        if (pointIndex == mPoints.size()) {
            // out of bounds
            return false;
        }
        Point point = mPoints.get(pointIndex);
        if (x > (point.x - mTouchTolerance) && x < (point.x + mTouchTolerance)) {
            if (y > (point.y - mTouchTolerance)
                    && y < (point.y + mTouchTolerance)) {
                return true;
            }
        }
        return false;
    }

    public List<Point> getPoints() {
        return mPoints;
    }

    public void setPoints(List<Point> points) {
        this.mPoints = points;
    }

    private int dp2px(int dp) {
        Resources r = getContext().getResources();
        float px = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, dp,
                r.getDisplayMetrics());
        return (int) px;
    }

} 
```

# safari - 在 iOS 6 上的 Safari 上使用 JS 客户端 API 库进行授权时，有没有办法支持多个 Google 帐户？

> ID：13971272
> 
> 赞同：5
> 
> 时间：2012-12-20T11:33:05.543
> 
> 标签：safari, ios6, google-drive-api, google-api-client

在我们的网站[http://www.draw.io/](http://www.draw.io/)右上角有一个 Google Drive 集成按钮，它使用[JS API 客户端库](http://code.google.com/p/google-api-javascript-client/wiki/GettingStarted)进行授权。这在任何地方都可以正常工作，除了 iOS 6 上的 Safari。当点击它时，一个新的标签会短暂地弹起然后消失。从我们的日志中调用了[我们的授权](https://github.com/jgraph/draw.io/blob/master/war/js/diagramly/GoogleDrive.js#L81)调用，但[我们的回调函数](https://github.com/jgraph/draw.io/blob/master/war/js/diagramly/GoogleDrive.js#L110)永远不会到达。

我们按照[这个线程](https://stackoverflow.com/questions/13366254/is-it-possible-to-be-able-to-correctly-select-any-available-google-account-to-us)中的提示来获得合理水平的多帐户处理工作，并且它在我们测试过的所有其他环境中都能正常工作，包括 iOS 5。如果我们在[gapi.auth.authorize 调用](http://code.google.com/p/google-api-javascript-client/wiki/ReferenceDocs)中将 immediate 参数设置为 true由于避免了弹出窗口，因此登录适用于 iOS 6。但是，这仅适用于拥有单个 Google 帐户的用户，如果他们有多个帐户，则始终使用其默认帐户。

如果您在阅读此问题时主站点没有显示此行为，则可能是我们已对其进行了修补以检测 iOS 6 上的 Safari 并将立即标志设置为 true。这解决了部分问题，因此 iOS 6 上的用户完全可以将 Drive 与我们的应用程序*一起*使用，但我们仍然需要支持多个帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T20:21:42.890

今天再次测试，这在 iOS 5、6 和 7 上都能正常工作。

# spring - 在保留默认值的同时注册自定义转换服务？

> ID：13971279
> 
> 赞同：7
> 
> 时间：2012-12-20T11:33:21.877
> 
> 标签：spring, spring-mvc

在 spring-mvc 3.2.RELEASE 项目中，我想使用 org.springframework.data.repository.support.DomainClassConverter 轻松让我注入实体。

使用此配置时效果很好：

```
<beans:bean id="conversionService" class="org.springframework.context.support.ConversionServiceFactoryBean" />

<beans:bean id="conversionService"
    class="org.springframework.core.convert.support.DefaultConversionService" /> 

<beans:bean
    class="org.springframework.data.repository.support.DomainClassConverter">
    <beans:constructor-arg ref="conversionService" />
</beans:bean>

<annotation-driven conversion-service="conversionService" /> 
```

但是随后 Spring 没有加载用于处理 Joda 时间类型的格式化程序，并且我得到“无法将 java.lang.String 类型的属性值转换为所需的属性类型 org.joda.time.LocalDate”

仅使用

```
<annotation-driven/> 
```

Joda 转换有效，但实体注入无效。

你如何把它连接起来，这样两者都可以工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-03T17:31:30.123

不确定这是否回答了问题，但我遇到了类似的问题，这就是我解决它的方法。

[我使用文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/validation.html)实现了自定义转换器和转换服务

```
<bean id="conversionService"
  class="org.springframework.context.support.ConversionServiceFactoryBean">
    <property name="converters">
        <list>
            <bean class="example.MyCustomConverter"/>
        </list>
    </property>
</bean> 
```

结果是@NA 所描述的 - 这失去了默认的 joda 时间支持，并且不相关控制器中的以下定义不再有效

```
@PathVariable(value="day") @DateTimeFormat(pattern=DATE_FORMAT) LocalDate date 
```

解决方案不是使用`org.springframework.context.support.ConversionServiceFactoryBean`，而是我开始使用`org.springframework.format.support.FormattingConversionServiceFactoryBean`。

# java - 除了 javafx.beans.property 提供的机制之外，我是否应该在非 gui 应用程序逻辑中使用其他东西？

> ID：13971283
> 
> 赞同：4
> 
> 时间：2012-12-20T11:33:38.543
> 
> 标签：java, properties, javafx-2, observable, changelistener

过去，我不止一次实现了类似于 JavaFX 提供的属性和侦听器。

由于我总是更喜欢使用广泛支持的包而不是我自己发明的东西，所以我很想在我的下一个项目中使用 JavaFX 属性，但在此之前，我想得到以下问题的答案。

在与 GUI 无关但会受益于更改侦听器以监视和控制系统状态的软件中，我是否仍应选择 JavaFX 提供的属性机制，还是有其他可用的东西对我有用？...还是我还需要自己实现这个机制？

问候，弗雷德里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-08T18:36:22.800

在商业产品上使用非 UI 相关逻辑的 javaFX 属性大约一年后，这是我的两分钱：

混合 UI 相关属性和业务逻辑相关属性可能不是一个好主意。

如果两种类型都不必相互交互，它会很好用。但是，当您开始将 UI 元素绑定到业务逻辑属性时，就会出现问题。原因是您通常会在专用线程中运行业务逻辑代码，如果此线程更新属于绑定一部分的属性，您将收到以下异常：

> java.lang.IllegalStateException：不在 FX 应用程序线程上；

简单的解决方法是移动更改属性值的代码块

> Platform.runLater(...)

调用...但是您在业务逻辑代码中有一些依赖于 javaFX 框架的代码。因此，如果您在 Swing 应用程序中重复使用此代码，或者只是想通过 JUnit 测试对其进行测试，您也会在此处遇到错误：

> java.lang.IllegalStateException：工具包未初始化

由于您使用的是需要初始化 JavaFX 工具包的 Platform.runLater()，因此在单元测试或 swing/javaee 应用程序中并非如此。

总而言之，可以对非 UI 代码使用 javafx 属性，但它可能会产生不小的副作用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:44:42.487

JavaFX 属性机制应该可以工作。它们是为支持 JavaFX GUI 而编写的，但对于非 gui 逻辑也应该可以正常工作——尽管我认为到目前为止还没有广泛用于该目的。我无法与其他竞争框架谈论哪个可以更好地满足您的需求。

* * *

当您看到 JavaFX 中用于属性支持的类的数量时，这可能有点令人生畏，但它们往往可以很好地结合在一起，并且存在许多类来屏蔽对象/原始阻抗不匹配。遗憾的是，这些功能没有更好的语言支持。使用 IDE 和自动完成功能进行编程非常有效，因此您无需输入太多内容。侦听器折叠成 jdk8 lambda 表达式，因此它们最终可以非常简洁。

绑定和侦听器框架是允许 JavaFX 控件如此容易地适应和利用的一部分——它们为系统的每个项目提供了更改通知的挂钩。

[JavaDoc](http://docs.oracle.com/javafx/2/api/overview-summary.html)可用。[不幸的是，关于绑定](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm)和[集合](http://docs.oracle.com/javafx/2/collections/jfxpub-collections.htm)的官方文档在彻底描述如何使用它的功能集方面没有做到图书馆公正。有一篇关于将[JavaFX 属性与 POJO 结合](http://ugate.wordpress.com/2012/06/06/javafx-pojo-bindings/)使用的有用文章。

JavaFX 的 bean、绑定和属性支持的源代码尚未公开（尽管计划在接下来的几个月内公开）。

* * *

使用高于 jdk7u6 的 Java 版本并确保`jfxrt.jar`分发中的文件位于您的类路径中，以便您选择 JavaFX 类。如果您不使用任何 GUI 组件，则无需`Application`在程序中扩展 JavaFX 类。

* * *

要考虑的相关非 GUI 包是：

`javafx.beans` 包 javafx.beans 包含定义最通用的可观察性形式的接口。

`javafx.beans.binding` 绑定的特征

`javafx.beans.property`包 javafx.beans.property 定义了只读属性和可写属性，以及一些实现。

`javafx.beans.property.adapter` （使标准 pojo bean 适应 JavaFX 属性）。

`javafx.beans.value` 包 javafx.beans.value 包含两个基本接口 ObservableValue 和 WritableValue 及其所有子接口。

`javafx.animation` 为易于使用的基于过渡的动画（与时间相关的非 gui 部分）提供一组类。

`javafx.collections` 包含基本的 JavaFX 集合和集合实用程序

`javafx.util.converter`此包适用于 JavaFX 的标准字符串转换器。

# blackberry - Fields added multipletimes Blackberry

> ID：13971286
> 
> 赞同：0
> 
> 时间：2012-12-20T11:33:45.863
> 
> 标签：blackberry, tabs

I am implementing tabs. I have five tabs. For each tab i am calling screen in following way. In displayTab1() function i am calling another class, It is easily loading MyScreen class but problem is for first time it is showing me same fields two times and whenever i click on this tab same fields are added continously. I have used delete(tabArea);

```
 public VerticalFieldManager displayTab1() 
     {  MyScreen loadingScreen = new MyScreen(); 
       tab1Manager.add(loadingScreen); 
         return tab1Manager;
      } 
```

Please let me know where i am doing wrong ![This is view when tabs appears for second time after then when i navigate between tabs buttons are added continously. For first time button are shown two times](../Images/f8445c23477721fe23031e786a9a0925.png)

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:47:55.760

I solved this, In onFocusChanged() i first deleted the whole fields of tab1 by using tabManager1.deleteAll() and after that i added.

# c++ - 仍在与多维数组作斗争

> ID：13971291
> 
> 赞同：-5
> 
> 时间：2012-12-20T11:34:00.553
> 
> 标签：c++, multidimensional-array

我之前提出了两个关于多维数组的问题，我非常感谢那些帮助过我的人。现在我的代码中仍然存在一个未修复的错误，如下所示：

```
#include "Algorithm.h"

template<int size>
void strassen_matrix_multiplication(int (*A)[size], int (*B)[size], int (*C)[size]){
  int n = size / 2;

  int A11[n][n];
  int P1[n][n];
  int S1[n][n];
  strassen_matrix_multiplication(S1, A11, P1);
} 
```

现在我得到一个编译错误，第 5 行说：

> 没有对函数“strassen_matrix_multiplication”的匹配调用

那么我该如何解决呢？我已经多次修改了我的代码，但徒劳无功。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:46:58.413

您的代码存在很多问题，其中之一是无限递归，因为您没有捕捉到`size`1 或 0 的基本情况。

我创建了一些模板特化来解决这种无限递归。

然后传递你的二维数组，你必须将它们作为二维数组传递，因为二维数组`int[N][N]`不能转换为指针数组`int*[]`。

下面是代码，它[编译](http://stacked-crooked.com/view?id=6ebb23506b0cca3fe76e411e6b44c9f4)时只有一些关于未使用参数的警告。

```
#include<iostream>

// Header file

#include <fstream>
#include <ostream>
#include <string>

template<int size> struct strassen
{
static void strassen_matrix_multiplication(int A[size][size], int B[size][size], int C[size][size]){
  const int n = size / 2; //make this a compile time constant

  int A11[n][n] = {};
  int P1[n][n] = {};
  int S1[n][n] = {};
  strassen<n>::strassen_matrix_multiplication(S1, A11, P1);
}
};

template<> struct strassen<1>  {
static void strassen_matrix_multiplication(int A[1][1], int B[1][1], int C[1][1]){}
};

template<> struct strassen<0>  {
static void strassen_matrix_multiplication(){}
};

int main()
{
    int arr[3][3];
    strassen<3>::strassen_matrix_multiplication(arr, arr, arr);
} 
```

# c# - 从 .net 客户端访问 ssl 服务器（Web 服务）

> ID：13971292
> 
> 赞同：3
> 
> 时间：2012-12-20T11:34:04.003
> 
> 标签：c#, web-services, ssl, keystore, truststore

我正在尝试从 .net 客户端（c#）访问 ssl 服务器（Web 服务）。我可以访问可以连接到服务器的 java 客户端代码。源代码中包含 3 个文件（saPubKey.jks、WebServices.pfx 和 trustStore），我认为 java 示例中只使用了 3 个文件中的 2 个。

```
private void setSSLConnection(WSBindingProvider bp){
    KeyStore ks = KeyStore.getInstance("pkcs12");
    ks.load(this.getClass().getClassLoader().getResourceAsStream("WebServices.pfx"), "password".toCharArray());

    KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
    kmf.init(ks, "password".toCharArray());

    SSLContext sslContext = SSLContext.getInstance("TLS");
    KeyStore ts = KeyStore.getInstance("JKS");
    ts.load(this.getClass().getClassLoader().getResourceAsStream("trustStore"), "pass".toCharArray());

    TrustManagerFactory tmf = TrustManagerFactory.getInstance("SunX509");
    tmf.init(ts);
    sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);

    bp.getRequestContext().put(JAXWSProperties.SSL_SOCKET_FACTORY, sslContext.getSocketFactory());

} 
```

我为 c# 客户端提供的代码是这样的

```
var clientCertificate = new X509Certificate2(@"C:\WebServices.pfx", "password");
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("https://blablabla.org:700/fws/ftrs");
req.ClientCertificates.Add(clientCertificate);
req.Headers.Add("SOAPAction", "\"https://blablabla.org:700/fws/ftrs/Rgdvice\"");
req.ContentType = "text/xml;charset=\"utf-8\"";
req.Accept = "text/xml";
req.Method = "POST";
using (Stream stm = req.GetRequestStream())
{
   using (StreamWriter stmw = new StreamWriter(stm))
   {
      stmw.Write(soap);
   }
}
WebResponse response = req.GetResponse(); //(500) Internal Server Error.
Stream responseStream = response.GetResponseStream(); 
```

方法 req.GetResponse() 抛出“(500) 内部服务器错误”。在没有添加客户端证书的情况下，我得到：“发送时发生意外错误。” 我也尝试了这行代码，但没有成功：

```
ServicePointManager.ServerCertificateValidationCallback = ((sender, certificate, chain, sslPolicyErrors) => true); 
```

我是 ssl 和证书的新手，真的需要帮助从 c# 访问 ssl 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T00:26:08.920

这可能不相关，但请确保 Web 服务不在 app_code 文件夹中。

# jquery - 点击添加类，然后重新计算总类

> ID：13971293
> 
> 赞同：0
> 
> 时间：2012-12-20T11:34:08.297
> 
> 标签：jquery, class, size, alert, slice

我在 slideimg div 中有元素，我添加了一个类。

我想`slideright`在单击时为没有类的元素提供类，然后再用类重新计算元素`slideright`。

```
<div id="slideimg">
<img src="images/portfolio/1.jpg" alt="image1" />
<img src="images/portfolio/2.jpg" alt="image2" />
<img src="images/portfolio/3.jpg" alt="image3" />
<img src="images/portfolio/4.jpg" alt="image4" />
</div> 
```

```
var slideimg = $('#slideimg');
//add classes to images
slideimg.children().eq(0).addClass('slidecontent');
slideimg.children().slice(1, 4).addClass('slideright');

var slideright = $('.slideright');
var slidecontent = $('.slidecontent');
var totalrightimg = slideright.size();

slidecontent.click(function(){
$(this).addClass('slideright').removeClass('slidecontent');
totalrightimg = slideright.size();
alert(totalrightimg);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:39:21.023

我只是将html更改为：

```
<div>here</div>
<div class="right"></div>
<div class="right"></div>
<div class="right"></div> 
```

签出这个小提琴：

[http://jsfiddle.net/arvind07/ZJSqY/](http://jsfiddle.net/arvind07/ZJSqY/) 你的代码工作正常......告诉我你怎么能点击空的 div 容器？

# mercurial - 如何从某个变更集中获取影响某个文件夹中文件的所有 mercurial 变更集的日志？

> ID：13971294
> 
> 赞同：1
> 
> 时间：2012-12-20T11:34:17.067
> 
> 标签：mercurial

我已经`$HG_NODE`引用了我希望开始的变更集：

```
[vcs@Quake /tmp/test/advanced]$ hg log -r $HG_NODE: --template '{node|short}:{files}\n'
c5eefea063fd:1.txt backup.cmd notes.txt
370f9ef91471:1.txt backup.cmd notes.txt
5eac12f79df6:advanced/Program.cs advanced/a advanced/b advanced/notes.txt lab6/scratch2/Fiobonacci.sln lab6/scratch2/Program.cs lab6/scratch2/xxx lab6/scratch2/yyy
4be96f43f327:advanced/1.txt
c724950dd2a6:advanced/Fiobonacci.csproj advanced/aaa.kuku 
```

现在，我还有一个目录，我特别感兴趣。因此，我希望从影响此目录中文件的起始变更集获取所有变更集。

首先，我尝试检查是否可以为特定文件获取它：

```
[vcs@Quake /tmp/test/advanced]$ hg log -r "$HG_NODE: and file('path:advanced/1.txt')" --template '{node|short}\n'
4be96f43f327 
```

然后，对于该目录中的所有文件。但我似乎遗漏了一些东西：

```
[vcs@Quake /tmp/test/advanced]$ hg log -r "$HG_NODE: and file('path:advanced/**')" --template '{node|short}\n'
[vcs@Quake /tmp/test/advanced]$ hg log -r "$HG_NODE: and file('set:advanced/**')" --template '{node|short}\n'
abort: fileset expression with no context
[vcs@Quake /tmp/test/advanced]$ hg log -r "$HG_NODE: and file('glob:advanced/**')" --template '{node|short}\n'
[vcs@Quake /tmp/test/advanced]$ hg log -r "$HG_NODE: and file('advanced/**')" --template '{node|short}\n'
[vcs@Quake /tmp/test/advanced]$ hg log -r "$HG_NODE: and file('re:^advanced/.*')" --template '{node|short}\n'
5eac12f79df6
4be96f43f327
c724950dd2a6 
```

只有`re:`前缀对我有用，但这也应该适用`glob:`。

我怎样才能使它与`glob:`and一起工作`**`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:10:27.467

玩了一会儿，我想是因为你已经在`advanced`目录中了。尝试以下选项之一（假设是这种情况）：

1) 仅指定要匹配此目录中的文件：

```
$ hg log -r "$HG_NODE: and file('glob:**')" --template '{node|short}\n'
5eac12f79df6
4be96f43f327
c724950dd2a6 
```

2）转到父目录：

```
$ cd ..
$ hg log -r "$HG_NODE: and file('glob:advanced/**')" --template '{node|short}\n'
5eac12f79df6
4be96f43f327
c724950dd2a6 
```

3）使用`path`选项，但不指定`/**`：

```
$ hg log -r "$HG_NODE: and file('path:advanced')" --template '{node|short}\n'
5eac12f79df6
4be96f43f327
c724950dd2a6 
```

这些选项似乎都适用于我的小型测试仓库。

# android - 如何连接到 android 中的特定 Wifi 连接？

> ID：13971295
> 
> 赞同：1
> 
> 时间：2012-12-20T11:34:18.420
> 
> 标签：android, android-wifi, wifimanager

我想从可用的 wifi 网络启用/禁用特定的 wifi 连接。我参考了这个 url：[如何以编程方式连接到 android 中的特定 wifi 网络](https://stackoverflow.com/questions/8818290/how-to-connect-to-a-specific-wifi-network-in-android-programmatically)。但`WifiManager.addNetwork(WifiConfiguration)`总是返回-1。

在尝试连接到特定wifi之前是否需要禁用当前wifi？

为什么这个连接总是失败？

如何使用 ssid 连接和启用/禁用特定的 wifi 网络？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:56:01.930

基本上， addNetwork 将在两种情况下返回 -1 ：

*   wifi配置为空
*   尝试添加网络时出现远程异常（好的......不是很有帮助）

您可以查看的一件事是 wifiConfiguration.disableReason 字段的值（在尝试连接之后）。

以下是该字段的允许值：

```
public static final int DISABLED_UNKNOWN_REASON                         = 0;
public static final int DISABLED_DNS_FAILURE                            = 1;
public static final int DISABLED_DHCP_FAILURE                           = 2;
public static final int DISABLED_AUTH_FAILURE                           = 3; 
```

# c - 如何接受 Tab 作为来自 STDIN 的输入以自动填充文本

> ID：13971298
> 
> 赞同：0
> 
> 时间：2012-12-20T11:34:24.337
> 
> 标签：c

在使用 C 的 STDIN 一段时间后按下 Tab 键时，如何自动填充文本？

输入看起来像，

```
C:\>autofil.exe Hello
C:\>autofil.exe Hello.  ( When I enter a period, it should autofil Hello after the period)
C:\>autofil.exe Hello.World  *World is autofilled when period was entered. 
```

第二个要求是如果我在

```
C:\>autofil.exe Hello.World  (And when i press Tab key, `World` should print with other suggestions, as `Friend`, and if I press Tab again, print `Matt`, and scroll so on when tab is pressed... ) 
```

嗯，这是我的要求。选项卡完成以自动填充文本。另外，想知道如何从 STDIN 读取 Tab 键。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:27:45.813

您可以使用[Readline GNU library For Windows](http://gnuwin32.sourceforge.net/packages/readline.htm)，非常容易使用，另一种方法是使用[PDcurses](http://gnuwin32.sourceforge.net/packages/pdcurses.htm) / [Ncurses](http://gnuwin32.sourceforge.net/packages/ncurses.htm)（几乎相同）并手动完成（处理控制台行为等）。

如果您使用 readline，完成自动完成就像这样做一样简单：

```
rl_bind_key('\t', rl_complete);
char *input = readline("C:\>"); 
```

如果你使用 Ncurses/PDcurses，你将不得不做更多的工作:)

*   首先保存实际的控制台参数。
*   然后你用 noecho() 关闭输入的回声。
*   您将不得不处理输入并解析参数以调用程序。
*   此外，您必须在 dirs（当前和 PATH 变量上的那些）中搜索与您当前输入匹配的内容。

在结束程序之前再次设置保存的控制台参数。

[Ncurses How-To](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)是一个简单明了的指南。

[Posix curses 定义](http://pubs.opengroup.org/onlinepubs/7908799/xcurses/curses.h.html)包含函数和键定义。

# php - 使用 SimpleXML 编写 XML 文件时如何使用命名空间

> ID：13971300
> 
> 赞同：6
> 
> 时间：2012-12-20T11:34:31.990
> 
> 标签：php, simplexml, xml-namespaces

我正在用 PHP 中的 SimpleXML 编写 Google 产品 RSS 提要。我的产品来自数据库并可以很好地创建 RSS 文件，但是在涉及名称空间时遇到了问题。

我在 Google 上搜索并搜索了 Stack Overflow，发现了数十篇关于如何解析包含命名空间的 XML 提要的帖子，但我的问题实际上是使用命名空间*创作*XML 文件。

文件*应该*如下所示：

```
<?xml version="1.0" encoding="UTF-8" ?>
<rss version ="2.0" xmlns:g="http://base.google.com/ns/1.0">
    <!-- content -->
</rss> 
```

这是我的代码：

```
<?php

$xml = new SimpleXMLElement('<rss></rss>');
$xml->addAttribute('version', '2.0');

$xml->addChild('channel');
$xml->channel->addChild('title', 'Removed');
$xml->channel->addChild('description', 'Removed');
$xml->channel->addChild('link', 'Removed');

foreach ($products as $product) {
    $item = $xml->channel->addChild('item');
    $item->addChild('title', htmlspecialchars($product['title']));
    $item->addChild('description', htmlspecialchars($product['title']));
    $item->addChild('link', $product['url']);
    $item->addChild('id', $product['product_id']);
    $item->addChild('price', $product['price_latest']);
    $item->addChild('brand', $product['range']);
    $item->addChild('condition', 'new');
    $item->addChild('image_link', $product['image']);
} 
```

如何引入`g`命名空间，既是`xmlns`根元素中的声明，又是每个元素中、、和`rss`的前缀？`id``price``brand``condition``image_link``item`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-27T09:53:51.113

这*可以*使用 SimpleXMLElement 接口来完成。恕我直言，这是最狡猾的命令，但它现在有效。

关键是它目前的工作方式如下*，*但可能无法继续工作。因此，我绝不会推荐 @DaveRandom 接受的答案。相反，我在这里包含这个答案，以便将来其他人可以阅读这个并节省一些时间来搜索 SimpleXMLElement 的方法，而只需使用 DaveRandom 的基于 DOM 的方法 :-)

您可以“欺骗”解析器以阻止它从`g:`元素名称中删除名称空间前缀，方法是在您的真实前缀之前放置一个“垃圾”前缀，例如`"blah:g:condition"`.

我已经看到此答案的变体用于属性前缀，但不适用于元素前缀。这些似乎都建议使用`"xmlns:yourPrefix:yourAttribute"`和传递完全限定的名称空间作为第三个参数，实际上（至少，根据我自己的个人测试）该`xmlns:`部分几乎可以是冒号之前的任何内容（包括空格！）`:`，但是在第一个冒号之前必须有*一些东西*`":g:condition"`，即不起作用。除非您实际创建一个声明命名空间和前缀的节点，否则呈现的 XML 将是无效的（即，您侵入元素的命名空间前缀将没有声明）。

因此，根据您的原始代码，您将执行以下操作。还要注意在根节点声明中显式添加命名空间（虽然这可能可以通过 API 完成 - 但为什么要麻烦呢？）。

```
$xml = new SimpleXMLElement('<rss xmlns:g="http://base.google.com/ns/1.0" />'); // May as well chuck the google ns in the root element declaration here, while we're at it, rather than adding it via a separate attribute.
$xml->addAttribute('version', '2.0'); 
// $xml->addAttribute('hack:xmlns:g','http://base.google.com/ns/1.0'); //Or could do this instead...

$xml->addChild('channel');
$xml->channel->addChild('title', 'Removed');
$xml->channel->addChild('description', 'Removed');
$xml->channel->addChild('link', 'Removed');

foreach ($products as $product) {
    $item = $xml->channel->addChild('item');
    $item->addChild('title', htmlspecialchars($product['title']));
    $item->addChild('description', htmlspecialchars($product['title']));
    $item->addChild('link', $product['url']);
    $item->addChild('hack:g:id', $product['product_id']);
    $item->addChild('hack:g:price', $product['price_latest']);
    $item->addChild('hack:g:brand', $product['range']);
    $item->addChild('hack:g:condition', 'new');
    $item->addChild('hack:g:image_link', $product['image']);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T12:10:54.197

以下是如何使用[DOM](http://php.net/manual/en/book.dom.php)执行此操作的示例：

```
<?php

    $nsUrl = 'http://base.google.com/ns/1.0';

    $doc = new DOMDocument('1.0', 'UTF-8');

    $rootNode = $doc->appendChild($doc->createElement('rss'));
    $rootNode->setAttribute('version', '2.0');
    $rootNode->setAttributeNS('http://www.w3.org/2000/xmlns/', 'xmlns:g', $nsUrl);

    $channelNode = $rootNode->appendChild($doc->createElement('channel'));
    $channelNode->appendChild($doc->createElement('title', 'Removed'));
    $channelNode->appendChild($doc->createElement('description', 'Removed'));
    $channelNode->appendChild($doc->createElement('link', 'Removed'));

    foreach ($products as $product) {
        $itemNode = $channelNode->appendChild($doc->createElement('item'));
        $itemNode->appendChild($doc->createElement('title'))->appendChild($doc->createTextNode($product['title']));
        $itemNode->appendChild($doc->createElement('description'))->appendChild($doc->createTextNode($product['title']));
        $itemNode->appendChild($doc->createElement('link'))->appendChild($doc->createTextNode($product['url']));
        $itemNode->appendChild($doc->createElement('g:id'))->appendChild($doc->createTextNode($product['product_id']));
        $itemNode->appendChild($doc->createElement('g:price'))->appendChild($doc->createTextNode($product['price_latest']));
        $itemNode->appendChild($doc->createElement('g:brand'))->appendChild($doc->createTextNode($product['range']));
        $itemNode->appendChild($doc->createElement('g:condition'))->appendChild($doc->createTextNode('new'));
        $itemNode->appendChild($doc->createElement('g:image_link'))->appendChild($doc->createTextNode($product['image']));
    }

    echo $doc->saveXML(); 
```

[看到它工作](http://codepad.viper-7.com/5ruybP)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-30T23:17:14.553

这可以通过将命名空间声明添加到根元素创建以及将命名空间添加到`addChild`函数来完成。

对原代码的修改：

```
$products[] = array(
  "title" => "Foobar",
  "description" => "Foo",
  "url" => "https://f.oo.bar",
  "product_id" => "00001",
  "price_latest" => "$3.50",
  "range" => "Foo",
  "image" => "https://f.oo.bar/image.tiff",
);

$xml = new SimpleXMLElement('<rss xmlns:g="http://base.google.com/ns/1.0"/>');
$xml->addAttribute('version', '2.0');

$xml->addChild('channel');
$xml->channel->addChild('title', 'Removed');
$xml->channel->addChild('description', 'Removed');
$xml->channel->addChild('link', 'Removed');

foreach ($products as $product) {
    $item = $xml->channel->addChild('item');
    $item->addChild('title', htmlspecialchars($product['title']));
    $item->addChild('description', htmlspecialchars($product['title']));
    $item->addChild('link', $product['url']);
    $item->addChild('id', $product['product_id'], "http://base.google.com/ns/1.0");
    $item->addChild('price', $product['price_latest'], "http://base.google.com/ns/1.0");
    $item->addChild('brand', $product['range'], "http://base.google.com/ns/1.0");
    $item->addChild('condition', 'new', "http://base.google.com/ns/1.0");
    $item->addChild('image_link', $product['image'], "http://base.google.com/ns/1.0");
}

print_r($xml->asXML()); 
```

将产生响应：

```
<?xml version="1.0"?>
<rss xmlns:g="http://base.google.com/ns/1.0" version="2.0">
  <channel>
    <title>Removed</title>
    <description>Removed</description>
    <link>Removed</link>
    <item>
      <title>Foobar</title>
      <description>Foobar</description><link/>
      <g:id>00001</g:id>
      <g:price>$3.50</g:price>
      <g:brand>Foo</g:brand>
      <g:condition>new</g:condition>
      <g:image_link>https://f.oo.bar/image.tiff</g:image_link>
    </item>
  </channel>
</rss> 
```

# twitter-bootstrap - 无法使用带有下拉菜单的 twitter bootstrap nav 获得 angularjs ng-click 以在锚点上工作

> ID：13971302
> 
> 赞同：7
> 
> 时间：2012-12-20T11:34:33.457
> 
> 标签：twitter-bootstrap, angularjs

我的目标是有一个菜单，用户可以在其中单击下拉菜单以注销。

我是 angularjs 和 twitter 引导程序的新手。

例子：

```
<div ng-app="myApp" ng-controller="MainCtrl" class="navbar navbar-static-top">
<div class="navbar-inner">
    <div class="container">
        <a class="brand" href="#">My Brand</a>
        <ul class="nav" ng-show="isLoggedIn">
            <li class="dropdown active">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">{{username}}<b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a ng-click"logout()" href="">Logout</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div> 
```

​</p>

我在这里有一个例子：http: [//jsfiddle.net/A4Gyu/1/](http://jsfiddle.net/A4Gyu/1/)

这很简单，但我已经搜索并没有找到一个简单的解决方案。在这种情况下我应该使用 angular-ui 吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-20T11:55:59.890

你忘记了'='。同时删除 href 属性：

```
<li><a ng-click="logout()">Logout</a></li> 
```

在您的控制器中，您需要定义注销功能：

```
$scope.logout = function() {
    // do sth
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-21T12:23:29.127

这个来自 Angular 文档站点的示例只是执行 href，甚至没有将其分配给空字符串：

```
<a href ng-click="logout($index, uid)">X</a> 
```

[https://docs.angularjs.org/api/ng/directive/select](https://docs.angularjs.org/api/ng/directive/select)

# bash - 在 Bash 脚本中使用“或”操作时没有得到想要的输出

> ID：13971304
> 
> 赞同：1
> 
> 时间：2012-12-20T11:34:43.643
> 
> 标签：bash, string-comparison

我的操作系统：Fedora 13 版（Goddard）

'test' 下有 5 个目录

```
[root@localhost lab]# ls test
dir1  dir2  dir3  dir4  dir5 
```

**脚本1**

```
#!/bin/bash
#below line for listing all directories under '/home/arun/lab/test'
ls -Al --time-style=long-iso /home/arun/lab/test | grep '^d' | awk '{print $8}' | while read line
do
#Need to skip few directoirs
if [ "$line" == "dir1" -o "$line" == "dir2" ]; then
continue
fi
#will take some actions here..as of now just echo only
echo $line
done 
```

**Script2** [仅修改更改 == 为 != ]

```
#!/bin/bash
#below line for listing all directories under '/home/arun/lab/test'
ls -Al --time-style=long-iso /home/arun/lab/test | grep '^d' | awk '{print $8}' | while read line
do
#Need to skip few directoirs
if [ "$line" != "dir1" -o "$line" != "dir2" ]; then
continue
fi
#will take some actions here..as of now just echo only
echo $line
done 
```

脚本 1 给出预期的 o/p

```
[root@localhost lab]# ./test.sh 
dir3
dir4
dir5 
```

**问题是：** 对于脚本 2，我期望低于 o/p。但是运行时没有o / p [空白]..请帮助我。

```
[root@localhost lab]# ./test.sh 
dir1
dir2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:43:31.320

对于第二个脚本，您需要`-a`("and") 而不是`-o`("or")。思考逻辑：每个可能的字符串都不等于两者中的至少一个，但是当它不等于*其中任何一个*时，您想跳过，也就是说，当它不等于“dir1”*并且*也不等于时到“dir2”。

# javascript - 向 JSON 字符串添加新属性

> ID：13971305
> 
> 赞同：0
> 
> 时间：2012-12-20T11:34:44.007
> 
> 标签：javascript, json

我能做的是用新的属性扩展我的 JSON 对象。

例如

```
 var jsonText = {
            "Repeats": 1,
            "Trials": 4,
            "GroupName": "Mobile phones",
            "targets": [
                    {
                        "name": "Apple",
                    },
                    {
                        "name": "Samsung",
                    }
                ]} 
```

我想要结束的是包含一个新项目，因此扩展对象，使其看起来像这样。

```
 var jsonText = {
            "NewItem" : NewValue,
            "Repeats": 1,
            "Trials": 4,
            "GroupName": "Mobile phones",
            "targets": [
                    {
                        "name": "Apple",
                    },
                    {
                        "name": "Samsung",
                    }
                ]} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:37:11.710

您有一个 JavaScript 对象文字，而不是 JSON 字符串。你可以像普通的对象字面量一样与之交互：

```
jsonText.NewItem = "NewValue"; 
```

如果您确实有一个 JSON 字符串，您可以首先将其解析为 JavaScript 对象，然后以相同的方式处理它，然后将其序列化回 JSON 字符串。例如：

```
var jsonText = '{ "Repeats": 1, "Trials": 4 }',
    actualObj = JSON.parse(jsonText);
actualObj.newItem = "New Value";
jsonText = JSON.stringify(actualObj); 
```

# c# - C# 在某些 SOAP 请求上返回 null

> ID：13971306
> 
> 赞同：10
> 
> 时间：2012-12-20T11:34:53.313
> 
> 标签：c#, soap

一段时间以来，我们一直在与 SOAP 相关的问题作斗争。我们有一个基于 SOAP 的 API，可以从多种语言（PHP、Ruby 等）调用。然而，C# 在某些情况下似乎会窒息。

不幸的是，我们不清楚它为什么会死。我们不是 C# 人员，但我们确实请了一个外部的 C# 人员来查看问题。而且，他们也是一脸懵逼！

wdsl 可以在这里看到：[http](http://sandbox.knowledgetree.com/ktwebservice/webservice.php?wsdl) ://sandbox.knowledgetree.com/ktwebservice/webservice.php?wsdl （是的，它很大）。

在 C# 中，会话创建和其他几个调用都可以正常工作。但是，get_folder_contents 调用失败。调用执行，提琴手显示返回的有效 XML。但是，C# 的返回值为 null。

每个 Fiddler 的请求如下：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
        <s:Body s:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <s:get_folder_contents>
                <session_id xsi:type="xsd:string">or8llmjj5rm7co9h5p2k762s77</session_id>
                <folder_id xsi:type="xsd:int">99</folder_id>
                <depth xsi:type="xsd:int">1</depth>
                <what xsi:type="xsd:string">DFS</what>
            </s:get_folder_contents>
        </s:Body>
</s:Envelope> 
```

（我在提琴手日志中添加了空格和换行符）。

每个 Fiddler 的响应（但再次格式化为 clairty）如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns4="urn:KnowledgeTree" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
        <SOAP-ENV:Body>
            <SOAP-ENV:get_folder_contentsResponse>
                <item xsi:type="ns4:kt_folder_contents">
                    <status_code xsi:type="xsd:int">0</status_code>
                    <message xsi:type="xsd:string"></message>
                    <folder_id xsi:type="xsd:int">99</folder_id>
                    <folder_name xsi:type="xsd:string">Nic</folder_name>
                    <full_path xsi:type="xsd:string">Nic</full_path>
                    <items xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="ns4:kt_folder_item[0]" xsi:nil="true"/>
                </item>
            </SOAP-ENV:get_folder_contentsResponse>
        </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

我们用来测试的（粗略的）C# 应用程序如下：

```
public partial class Form1 : Form
{
    private string _sessionId;

    private KnowledgeTreePortClient _webService;

    public Form1()
    {
        InitializeComponent();

        _webService = new KnowledgeTreePortClient();

        _webService.loginCompleted += new EventHandler<loginCompletedEventArgs>(WebLoginCompleted);
        _webService.loginAsync("username", "secret_password", "nil", "c-sharp-test");
    }

    private void WebLoginCompleted(object sender, loginCompletedEventArgs e)
    {
        _sessionId = e.Result.message;

        _webService.get_folder_contentsCompleted += GetFolderComplete;
        _webService.get_folder_contentsAsync(_sessionId, 99,1, "DFS");
    }

    private void GetFolderComplete(object sender, get_folder_contentsCompletedEventArgs e)
    {

    }
} 
```

我更愿意从客户端（C#）端解决这个问题。但是，任何关于我们做错了什么的指导将不胜感激！

仁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T16:40:54.687

我试过了，得到了同样的反应。

我解决它并获得您正在寻找的响应的方法是添加一个网络参考。为此，请右键单击项目的引用文件夹，选择添加服务服务引用，单击底部的 Web 引用按钮，然后从那里继续。

该方法生成的代理类的行为与您预期的一样。

![在此处输入图像描述](../Images/9709b1ee3217d7226609723c8a435eb8.png)

至于为什么服务参考不起作用，我仍在研究....

**编辑：**

因此，我检查了针对 WSDL 的响应 Xml，我无法发现任何名称空间不匹配。我发现了几篇文章，详细介绍了如何将子元素（如数组）解析为 null，这主要是因为命名空间不匹配 - 但在你的情况下，整个`kt_folder_contents`值是公牛的，据我所知，`urn:KnowledgeTree`生成的命名空间（）包装是正确的。

我希望其他人可以解决此问题-否则，如果 Web Reference 生成的代理对您有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:39:30.573

Not sure whether this makes a difference in view of the comments regarding true root cause but I have found that C#/VS interprets the entire return value as null when there is an array within the SOAP response that contains a xsi:nil="true"/> value as in:

items xsi:type="SOAP-ENC:Array" SOAP-ENC:arrayType="ns4:kt_folder_item[0]" xsi:nil="true"/>

I am trying to consume the webservice in a WINFORMS application and responses without this array value seem to work fine but the two that show null return values in their response object both have the nil="true" for an array that is part of the object. Don't know if it's merely coincidence but appears to be related to comment on profile (WS-I BP1) compliance?

Alan

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-25T13:59:19.263

我遇到了这个问题，@QuintonBernhardt 建议的 Web Reference 代理解决方法对我有用。只想提一下如何在最近的 Visual Studio 版本（2017+）中添加 Web 引用：在常规添加服务引用对话框中，选择“高级”

[![add_service_reference](../Images/8f615b5fe8a8aeb6243baae6d45fadd4.png)](https://i.stack.imgur.com/5BKVY.png)

然后在兼容性部分选择“添加 Web 参考” [![服务参考设置](../Images/5c947f1bd089704b8b53bb5bc15713fb.png)](https://i.stack.imgur.com/ElbV3.png)

# sql-server-2008 - 执行 SQL Server 存储过程后如何将输出拆分为行？

> ID：13971308
> 
> 赞同：0
> 
> 时间：2012-12-20T11:34:55.627
> 
> 标签：sql-server-2008, stored-procedures

我现在正在用 SQL 编写脚本，以便可以在 Powershell 中执行输出以生成报告。代码是这样的。

```
declare @from datetime, @to datetime
select @from=GETDATE(), @to=GETDATE()+1

SELECT ---$shape500.text='+'"'+'Assignation de Barrières-' + DATENAME(WEEKDAY,@from)+','+DATENAME(MONTH,@from)+' '+DATENAME(DAY,@from)+','+DATENAME(YEAR,@from)+'"'
+'$shape'+cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+
'=$page.DrawRectangle'+'('+CAST(X1 as varchar)+','+CAST(Y1 as varchar)+','+CAST(X2 as varchar)+','+CAST(Y2 as varchar)+')'
+'$shape'+ cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.'+'linestyle="Gantt"'
+'$shape'+ cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.'+'textstyle="Gantt"'+case when left(arrival, 2)='AC' THEN 'Red' ELSE '' END+ CASE WHEN LEFT(Departure, 2)='AC' THEN 'Red' ELSE '' END +' '+' '
---+'$shape'+ cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.FillStyle="Gantt"'+CASE WHEN CHARINDEX()
+'$shape'+ cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.Text="'+case when LEN(arrival)<>0 THEN Arrival ELSE '###' END +'/'+ [ACType Iata]+'/'+ CASE WHEN LEN(Departure)<>0 THEN Departure ELSE '###' END +'"'
+'$shape'+ cast(100+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'=$page.DrawLine('+cast(X1 -0.5 as varchar)+','+cast(Y1 -0.03 as varchar)+','+cast(X1 +0.5 as varchar)+','+cast(Y1 -0.03 as varchar)+ ')'
+'$shape'+ cast(100+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.Text="'+CONVERT(char(5), [Allocation Start Datetime], 108)+'"'
+'$shape'+ cast(100+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.TextStyle="Times"'
+'$shape'+ cast(100+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.LineStyle="Times"'
+'$shape'+ cast(200+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'=$page.DrawLine('+cast(X2 -0.1 as varchar)+','+cast(Y1 -0.03 as varchar)+','+cast(X1 +0.1 as varchar)+','+cast(Y1 -0.03 as varchar)+ ')'
+'$shape'+ cast(200+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.Text="'+CONVERT(char(5), [Allocation End Datetime], 108)+'"'
+'$shape'+ cast(200+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.TextStyle="Times"'
+'$shape'+ cast(200+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'.LineStyle="Times"'
+'$shape'+ cast(300+ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar)+'=$page.DrawLine('+cast(X1 as varchar)+','+cast(Y2 as varchar)+','

FROM GanttReports(default,default) 
```

`GanttReport`是一个存储过程。输出将在一个大字符串中生成所有内容，例如

> $shape1=$page.DrawRectangle(42.666660,6.78,58.083330,7.025)$shape1.linestyle="甘特图"$shape1.textstyle="甘特图" $shape1.Text="QK8718/DH1/QK8749"$shape101=$page. DrawLine(42.166660,6.75,43.166660,6.75)$shape101.Text="16:21"$shape101.TextStyle="Times"$shape101.LineStyle="Times"$shape201=$page.DrawLine(57.983330,6.75,42.766660, 6.75)$shape201.Text="17:30"$shape201.TextStyle="Times"$shape201.LineStyle="Times"$shape301=$page.DrawLine(42.666660,7.025)

但是我想要的是在单独的行中。你可以说使用'$shape'作为分隔符来分割它吗？

我知道我可以在论坛中搜索时创建拆分功能，但是不知道在这种情况下如何使用它。我是 SQL Server 的新手，如果有人可以提供帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T06:33:53.547

您需要将 GanttReports 的结果存储在 varchar 类型的变量中

喜欢

Decalre @str varchar(max)

**选择 @str** = '$shape'+cast(ROW_NUMBER()OVER(ORDER BY (SELECT 0)) as varchar) FROM GanttReports(default,default)

**然后使用 split 函数返回一个表集。为了使用下面的拆分函数，我使用了 dbo.seq 表，该表填充了从 1 到 1000 的数字，它用于以行的形式返回你的结果。**

IF OBJECT_ID('dbo.GetNums') 不是 NULL 删除函数 dbo.GetNums; GO CREATE FUNCTION dbo.GetNums(@n AS BIGINT) 返回表作为返回 L0 AS(SELECT 1 AS c UNION ALL SELECT 1), L1 AS(SELECT 1 AS c FROM L0 AS A CROSS JOIN L0 AS B), L2 AS （从 L1 中选择 1 AS c 作为交叉连接 L1 作为 B），L3 AS（从 L2 中选择 1 作为 c 作为交叉连接 L2 作为 B），L4 AS（从 L3 中选择 1 作为 c 作为交叉连接 L3 作为 B ), L5 AS(SELECT 1 AS c FROM L4 AS A CROSS JOIN L4 AS B), Nums AS(SELECT ROW_NUMBER() OVER(ORDER BY (SELECT NULL)) AS n FROM L5) SELECT n FROM Nums WHERE n <= @ n;

去

创建表 dbo.seq (nbr bigint) 去

插入 seq Select * from dbo.GetNums(1001)

**创建函数 [dbo].[fn_Delimitter]** (@string nvarchar(MAX), @delimiter varchar(100)) 返回表作为返回 ( select str = rtrim(ltrim(substring(@delimiter + @string + @delimiter, nbr + len (@delimiter), charindex(@delimiter, @delimiter + @string + @delimiter, nbr + len(@delimiter)) - nbr - len(@delimiter)))) 来自 seq 其中 nbr <= len(@delimiter + @字符串 + @delimiter) - len(@delimiter) 和子字符串 (@delimiter + @string + @delimiter, nbr, len(@delimiter)) = @delimiter)

声明@str varchar(max)

选择@str = '$shape1=$page.DrawRectangle(42.666660,6.78,58.083330,7.025)$shape1.linestyle="Gantt"$shape1.textstyle="Gantt" $shape1.Text="QK8718/DH1/QK8749"$ shape101=$page.DrawLine(42.166660,6.75,43.166660,6.75)$shape101.Text="16:21"$shape101.TextStyle="Times"$shape101.LineStyle="Times"$shape201=$page.DrawLine(57.983330 ,6.75,42.766660,6.75)$shape201.Text="17:30"$shape201.TextStyle="Times"$shape201.LineStyle="Times"$shape301=$page.DrawLine(42.666660,7.025)'

**从 dbo.fn_Delimitter 中选择 ***

去

# sql - oracle 数据库：创建一个检查重复数据的 PL/SQL 过程

> ID：13971309
> 
> 赞同：0
> 
> 时间：2012-12-20T11:34:56.420
> 
> 标签：sql, oracle, stored-procedures, data-integrity

我想创建一个 PL/produces 来检查数据库中的开始日期和结束日期。这是我的数据

```
HAS_CONTRACT        DATE_FROM     DATE_TO       DURATION
---------------------------------------- --------- --------- -----------------------------
Simon Palm           20-AUG-01      19-AUG-02         0
Simon Palm          20-SEP-02       19-AUG-03         0
Flut            10-JUN-99       09-SEP-02         0
John Cliff          10-MAR-03       10-APR-04         0 
```

如果用户尝试输入具有相同 date_from 和 date_to 的人，则不应允许，因此会出现异常错误。这是我做了多远，但我确信程序不应该是这样。有什么帮助吗？

```
CREATE PROCEDURE insertTuple(
x contractinfo.date_from%Type,
y contractinfo.date_to%Type)
AS
BEGIN
  IF x!=y THEN 
     INSERT INTO contractInfo VALUES(x,y);
END;
/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:50:35.977

执行此操作的正确方法是使用数据库约束。

```
alter table contractors add constraint contractor_date_uk unique
    (has_contract, start_date, end_date); 
```

这是标准方式，它是可扩展的，在多用户环境中工作，并且无法被厚脸皮的开发人员规避。

当然，确保从日期中删除时间元素很重要。这可以在触发器中完成，也可以通过索引强制执行（可以由约束使用：

```
create unique index contractor_date_uidx 
   on   contractors(has_contract, trunc(start_date), trunc(end_date)); 
```

* * *

请注意，我在支票中包括了承包商人员 - 您的问题在这一点上并不清楚。如果您真的一次只想要一个有效的承包商，那么只需从唯一性规范中删除 HAS_CONTRACT 。

另一件事是，这不允许重叠。您发布的数据具有重叠的日期范围，所以我认为这没关系。如果您想避免重叠的日期范围，请编辑您的问题，这样说；但请注意，逻辑变得粗糙。

# python - 在 csv 的第一列写入输出

> ID：13971322
> 
> 赞同：0
> 
> 时间：2012-12-20T11:35:23.773
> 
> 标签：python, csv

我有一系列数字：

> 6577

我想在 .csv 文件中看到它们，如下所示：

```
6  
5  
7 
```

我试过使用文件写入器，但它会在第一行写入所有数字。

序列是字符串..

```
s = ['6','5','7','7','6']
item_length = len(s)

with open('test.csv', 'wb') as test_file:
    file_writer = csv.writer(test_file)
    for i in range(item_length):
        file_writer.writerow([x[i] for x in s]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:48:59.033

如果您希望将每个列表项写成一行，您可以尝试：

```
s = ['6','5','7','7','6']
item_length = len(s)

with open('test.csv', 'wb') as test_file:
    file_writer = csv.writer(test_file)
    for item in s:
        file_writer.writerow(item) 
```

此外，只需写出一列，这可能就足够了：

```
s = ['6','5','7','7','6']
with open('test.csv', 'wb') as test_file:
   test_file.write("\n".join(s) + "\n") 
```

# java - 在 Java 中设置多种格式的系统剪贴板

> ID：13971323
> 
> 赞同：1
> 
> 时间：2012-12-20T11:35:24.743
> 
> 标签：java, xml, excel, csv, clipboard

我知道，如何使用一种格式的数据（如文本或图像数据）设置系统剪贴板。但我想将多种格式的数据写入系统剪贴板。在我的应用程序中，我想以 CSV 文本和 XML 格式（Excel 方言）编写表格的内容。问题是，每次调用

```
Toolkit.getDefaultToolkit().getSystemClipboard()
.setContents(new StringSelection(text), this) 
```

替换以前的剪贴板内容。

有没有技巧，如何在Java中设置多种格式的系统剪贴板？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-20T11:39:08.380

您可以执行以下操作：

*   获取 CSV 文本并存储在`str1`

*   获取 XML 文本并存储在`str2`

*   连接：`String txt = str1 + str2`

现在，使用您的代码：

```
Toolkit.getDefaultToolkit().getSystemClipboard().setContents(new StringSelection(text), this) 
```

# email - 我们应该使用 SPF (TXT) 和 SPF（99 型）还是只使用其中一种？

> ID：13971324
> 
> 赞同：4
> 
> 时间：2012-12-20T11:35:28.337
> 
> 标签：email, dns, spf

我想知道，现在我们的软管供应商是否支持 SPF（99 型）、天气或不也使用这种类型的记录以及已经存在的 SPF (TXT) 记录。

1.  设置两个记录有什么缺点吗？
2.  类型 99 的格式应该相同吗？例如“v=spf1 a mx ip4:xx.xxx.xxx.xxx ~all”

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-25T08:51:33.983

根据最新的提议标准 ( [RFC 7208](https://www.rfc-editor.org/rfc/rfc7208#section-3.1) )，您应该只使用 TXT 记录：

> 3.1。DNS 资源记录

SPF 记录必须仅作为 DNS TXT（类型 16）资源记录 (RR) [RFC1035] 发布。记录的字符内容被编码为 [US-ASCII]。SPF 的实验阶段支持使用替代 DNS RR 类型，但已停止使用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T12:02:37.803

更新：正如 Matt 和 Xavier 所写（下） - RFC 4408 已被[RFC 7208](https://www.rfc-editor.org/rfc/rfc7208#section-3.1)淘汰，它说：

> SPF 记录必须作为 DNS TXT（类型 16）资源记录 (RR) 发布

关于原始问题： SPF TXT 记录就​​足够了。

* * *

2012 年 12 月 20 日发布：

SPF（类型 99）dns 资源记录将是 SPF-TXT 条目的后继。根据[此](http://www.openspf.org/Community/SPFv3-SPF-RR-exclusive)使用两者。使用带有 v=spf3 的 SPF-RR 和带有 v=spf1 的 SPF-TXT。

> 建议维护以 v=spf1 开头的向后兼容的 TXT RR

和

> 如果新软件没有找到 SPF RR，则应该查找 TXT RR，并且可以接受 v=spf1 以实现向后兼容性。

和

> 管理员不得创建以 v=spf3 开头的 TXT 类型的 RR。

# html - 在 html5 画布中实现 html

> ID：13971325
> 
> 赞同：0
> 
> 时间：2012-12-20T11:35:32.033
> 
> 标签：html, user-interface, canvas

我正在构建一个网络用户界面。它是完全动态的，并且不断移动。
使用 Jquery 的`ajax()`.
该界面最初是使用 Raphael 库在 html5 SVG 中构建的。它太慢了。
我考虑过使用画布库（如 paper.js/Caat.js/etc...）但我无法在画布内实现 html 代码（如`<foreign object>`SVG 中的标签）
我不能只在上方放置一个浮动 div画布，因为内容内容正在移动。
任何想法我该如何解决这个问题？如何在 html5 画布中实现 html 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:28:47.733

查看[html2canvas](https://github.com/niklasvh/html2canvas)，它在 Canvas 中呈现 DOM。

> 我正在构建一个网络用户界面。

我将尝试为我们俩省去麻烦，并让您知道**在 Canvas 中构建整个 UI 是一个非常糟糕的主意。**我建议不要这样做。沉重。画布规范也是如此。[正如规范所说：](https://developers.whatwg.org/the-canvas-element.html#the-canvas-element)

> 作者应避免使用 canvas 元素实现文本编辑控件。这样做有很多缺点：
> 
> *   必须重新实现插入符号的鼠标放置。
> *   插入符号的键盘移动必须重新实现（可能跨行，用于多行文本输入）。
> *   必须实现文本字段的滚动（水平滚动用于长行，垂直滚动用于多行输入）。
> *   必须重新实现诸如复制和粘贴之类的本机功能。
> *   必须重新实现拼写检查等原生功能。
> *   必须重新实现拖放等原生功能。
> *   必须重新实现页面范围的文本搜索等原生功能。
> *   必须重新实现特定于用户的本机功能，例如自定义文本服务。这几乎是不可能的，因为每个用户可能安装了不同的服务，并且可能存在无限多的此类服务。
> *   双向文本编辑必须重新实现。
> *   对于多行文本编辑，必须为所有相关语言实现换行。
> *   必须重新实现文本选择。
> *   必须重新实现双向文本选择的拖动。
> *   必须重新实现平台原生键盘快捷键。
> *   必须重新实现平台原生输入法编辑器 (IME)。
> *   撤消和重做功能必须重新实现。
> *   必须重新实现可访问性功能，例如插入符号或选择之后的放大。

在 Canvas 中实现这些东西是一场*噩梦*。对于您和您的用户。

# eclipse - 找不到部署程序集 Eclipse Juno

> ID：13971331
> 
> 赞同：2
> 
> 时间：2012-12-20T11:35:38.140
> 
> 标签：eclipse, eclipse-juno

我正在尝试设置“项目属性中的 Web 部署程序集”。

我想将“jtds-1.3.0.jar”添加到项目中。但是我在项目的属性下找不到“部署程序集”选项。

请建议我如何做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:40:31.647

这意味着：

*   您的 Eclipse 发行版不包含 WTP（您下载了哪个 Eclipse 发行版？确保您下载了包含 WTP 的发行版，例如“JavaEE 开发人员的 Eclipse”）。
*   您的项目未定义为动态 Web 项目。检查项目方面；如果您在那里没有看到“动态 Web 模块”，那么这可以解释您的问题。您很可能必须重新创建您的项目。

# xamarin.ios - MT5202 本机链接失败架构 armv7 的未定义符号：

> ID：13971333
> 
> 赞同：0
> 
> 时间：2012-12-20T11:35:46.513
> 
> 标签：xamarin.ios

我已经有这个问题好几天了，一直无法在这方面取得任何进展。我有一个本机 Obj-C 库，我正在尝试使用 MonoTouch 绑定项目进行绑定。绑定 Dll 已创建，但是当我将其导入应用程序并尝试编译时，我得到一个

```
MT5202 本机链接失败错误。
```

读取构建输出显示我正在编译的 iOS 版本的符号丢失。

```
架构 armv7 的未定义符号：
```

构建输出显示了许多链接问题（仅显示了几个）

```
  “_CVPixelBufferGetPixelFormatType”，引用自：
      -[DecodePickerController captureOutput:didOutputSampleBuffer:fromConnection:] 在 libQuickMarkSDK.a(DecodePickerController.o)
      -[QMImageUtil saveToAlbum:] 在 libQuickMarkSDK.a(QMImageUtil.o)
  “_CVPixelBufferGetPlaneCount”，引用自：
      +[QMImageUtil imageBufferSave:f:] 在 libQuickMarkSDK.a(QMImageUtil.o)
      +[QMImageUtil imageBuffer:zoom:w:h:f:] 在 libQuickMarkSDK.a(QMImageUtil.o)
  “_CVPixelBufferGetWidth”，引用自：
      -[DecodePickerController captureOutput:didOutputSampleBuffer:fromConnection:] 在 libQuickMarkSDK.a(DecodePickerController.o)
      -[QMImageUtil saveToAlbum:] 在 libQuickMarkSDK.a(QMImageUtil.o)
  “_CVPixelBufferGetWidthOfPlane”，引用自：
      +[QMImageUtil imageBufferSave:f:] 在 libQuickMarkSDK.a(QMImageUtil.o)
  “_CVPixelBufferLockBaseAddress”，引用自：
      -[DecodePickerController captureOutput:didOutputSampleBuffer:fromConnection:] 在 libQuickMarkSDK.a(DecodePickerController.o)
  “_OBJC_CLASS_$_AVCaptureDevice”，引用自：
      libQuickMarkSDK.a(QuickMarkCameraUtil.o) 中的 objc-class-ref
  “_OBJC_CLASS_$_AVCaptureDeviceInput”，引用自：
      libQuickMarkSDK.a(QuickMarkCameraUtil.o) 中的 objc-class-ref
```

首先，我认为这只是绑定错误。所以我重建了绑定。没有喜悦。因此，为了测试一个理论，我尝试使用 github 上提供的 RedLaser 单声道绑定。这也提供了相同的错误。（如果 -unsafe 从生成文件中删除）。

我需要绑定的库的 linkwith 语句是

```
程序集：LinkWith ("libQuickMarkSDK.a", LinkTarget.ArmV7, ForceLoad = true, Frameworks = "AVFoundation CFNetwork CoreMedia CoreVideo libz.1.2.5.dylib MobileCoreServices QuartzCore Foundation SystemConfiguration")]
```

并且正在使用的 Monotouch 添加标志是

```
-cxx
```

我已经阅读了很多其他问题，但没有任何帮助解决这个问题，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:06:44.993

您没有说明任何版本号（iOS、Xcode、MonoTouch ...），因此很难给出具体/确定的答案。

当您将项目更新到已删除对 ARMv6 的支持的 iOS6 / Xcode 4.5 时，可能会发生这种情况。如果您的本机库仅包含 ARMv6，那么它们（本机库，而不是绑定项目）将需要为 ARMv7 重新编译（因为现在是必需的）。

要检查这一点，请尝试执行（包括您的本机库的完整路径）：

```
file libQuickMarkSDK.a 
```

这应该告诉您本机库支持的架构。这些需要与`LinkTarget`您在绑定项目中提供的内容相匹配（否则您将从本机链接器收到错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T16:49:50.663

你在他最后的评论中尝试过 poupou 的建议吗？为 iPhone 编译时遇到了同样的错误，但为模拟器编译时没有。我发现它是 LinkWith 部分中缺少的一些框架。为了弄清楚缺少哪些框架，我用谷歌搜索了（例如）`CVPixelBufferGetWidthOfPlane Framework`。

这个答案的功劳归于 cheeesus：[MonoTouch Build: ld: symbol(s) not found for architecture armv7](https://stackoverflow.com/questions/11104969/monotouch-build-ld-symbols-not-found-for-architecture-armv7)

# c# - 反序列化 XMLDocument 对象的特定节点

> ID：13971334
> 
> 赞同：0
> 
> 时间：2012-12-20T11:35:48.447
> 
> 标签：c#

我有下面的一段代码，它接受一个 XMLDocument 对象和代码下面提到的格式的 xml。我想读取边界框中存在的 4 个标签的值：

南纬等

```
 public static void readXML(XmlDocument document)
    {

        if (document == null)
        {
            throw new ArgumentNullException("document");
        }

        XmlNode specificNode = document.SelectSingleNode("/Response/ResourceSets/ResourceSet/Resources/Location/BoundingBox");

        if (specificNode != null)
        {
            XmlNodeReader specificNodeReader = new XmlNodeReader(specificNode);

            while (specificNodeReader.Read())
            {
                Console.WriteLine(specificNodeReader.Value);
            }
        }
     } 
```

xml 看起来像这样：

```
 <?xml version="1.0" encoding="utf-8" ?> 
- <Response xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/search/local/ws/rest/v1">
  <Copyright>Copyright © 2012 Microsoft and its suppliers. All rights reserved. This API cannot be accessed and the content and any results may not be used, reproduced or transmitted in any manner without express written permission from Microsoft Corporation.</Copyright> 
  <BrandLogoUri>http://dev.virtualearth.net/Branding/logo_powered_by.png</BrandLogoUri> 
  <StatusCode>200</StatusCode> 
  <StatusDescription>OK</StatusDescription> 
  <AuthenticationResultCode>ValidCredentials</AuthenticationResultCode> 
  <TraceId>f651e16fe1204e12b848084d73f5148d|SINM001008|02.00.83.1900|SINMSNVM001115, SINMSNVM001124</TraceId> 
- <ResourceSets>
- <ResourceSet>
  <EstimatedTotal>1</EstimatedTotal> 
- <Resources>
- <Location>
  <Name><Some Name</Name> 
- <Point>
  <Latitude>47.640570402145386</Latitude> 
  <Longitude>-122.12937377393246</Longitude> 
  </Point>
- <BoundingBox>
  <SouthLatitude>47.636707684574709</SouthLatitude> 
  <WestLongitude>-122.13701709146854</WestLongitude> 
  <NorthLatitude>47.644433119716062</NorthLatitude> 
  <EastLongitude>-122.12173045639638</EastLongitude> 
  </BoundingBox>
  <EntityType>Address</EntityType> 

  </Location>
  </Resources>
  </ResourceSet>
  </ResourceSets>
  </Response> 
```

有人可以指出，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:50:19.367

因为您的实际`xml`有一个命名空间，所以您需要将它包含在`Xpath`您使用的任何查询中。由于您已经在 中加载了 xml `XmlDocument`，因此您不需要`XmlReader`

```
XmlNamespaceManager nsm = new XmlNamespaceManager(document.NameTable);
nsm.AddNamespace("ms", "http://schemas.microsoft.com/search/local/ws/rest/v1");
XmlNode boundingBoxNode = document.SelectSingleNode("/ms:Response/ms:ResourceSets/ms:ResourceSet/ms:Resources/ms:Location/ms:BoundingBox", nsm);

if (boundingBoxNode != null)
{
    Console.WriteLine(boundingBoxNode.SelectSingleNode("ms:SouthLatitude", nsm).InnerText);
    Console.WriteLine(boundingBoxNode.SelectSingleNode("ms:NorthLatitude", nsm).InnerText);
    Console.WriteLine(boundingBoxNode.SelectSingleNode("ms:EastLongitude", nsm).InnerText);
    Console.WriteLine(boundingBoxNode.SelectSingleNode("ms:WestLongitude", nsm).InnerText);
} 
```

您也可以在 Linq to Xml 中执行此操作：

```
XNamespace ns = "http://schemas.microsoft.com/search/local/ws/rest/v1";

var boundingBox = document
                .Descendants(ns + "Response")
                .Descendants(ns + "ResourceSets")
                .Descendants(ns + "ResourceSet")
                .Descendants(ns + "Resources")
                .Descendants(ns + "Location")
                .Descendants(ns + "BoundingBox");

if (boundingBox != null)
{
    Console.WriteLine(boundingBox.Descendants(ns + "SouthLatitude").First().Value);
    Console.WriteLine(boundingBox.Descendants(ns + "NorthLatitude").First().Value);
    Console.WriteLine(boundingBox.Descendants(ns + "EastLongitude").First().Value);
    Console.WriteLine(boundingBox.Descendants(ns + "WestLongitude").First().Value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T15:44:42.967

```
 XmlNode specificNode = document.SelectSingleNode("/Response/ResourceSets/ResourceSet/Resources/Location/BoundingBox");
        if (specificNode != null)
        {
            foreach (XmlNode child in specificNode.ChildNodes)
            {
                Console.WriteLine(child.InnerText);
            }
        } 
```

应该做的伎俩。当然，很多功劳归功于 Henk Holterman 在他之前的回答中。

# javascript - 具有有效 W3C 但没有图库的漂亮照片

> ID：13971335
> 
> 赞同：0
> 
> 时间：2012-12-20T11:35:50.103
> 
> 标签：javascript, jquery, lightbox, prettyphoto

我正在使用标头中的当前代码使 PrettyPhoto 对 W3C 有效。

```
 jQuery(document).ready(function() {
     jQuery("a[data-gal^='prettyPhoto']").prettyPhoto({
     social_tools:false 
     });
 }); 
```

未经修改的代码并由 prettyPhoto 文档推荐

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto();
});
</script> 
```

使用页面代码如下。

```
<li><a href="http://cdn.domain.com/1.jpg" data-gal="prettyPhoto[pp_gal]"><img class="lazy" src="http://cdn.domain.com/grey.gif" data-original="http://cdn.domain.com/1.jpg" alt=""></a></li>
<li><a href="http://cdn.domain.com/2.jpg" data-gal="prettyPhoto[pp_gal]"><img class="lazy" src="http://cdn.domain.com/grey.gif" data-original="http://cdn.domain.com/2.jpg" alt=""></a></li> 
```

PS。它在拇指上使用 LazyLoad，但也可以正常工作。

这些图像在**prettyPhoto**的灯箱中工作，但它们没有在画廊中打开（没有下一个，上一个等，我认为它没有检测到使用相同标签的其他图像），我怀疑它与 [pp_gal] 和我编写的代码是为了让它在 data-gal 而不是 rel= 上工作。

我怀疑这对于 jQuery 大师来说是一个简单的解决方法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:49:30.873

由于您的数据属性的值是`prettyPhoto[pp_gal]`而不是简单`prettyPhoto`的，我们可以推断该`prettyPhoto`插件在那里查找所需的信息以执行您想要的操作。

您需要进入源代码`prettyPhoto`并使其查看`data-gal`而不是`rel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T16:20:11.453

经过调查，prettyPhoto 最近似乎改进了他们的代码，并且采用这种更改是直截了当的，因为他们现在 Hook 'REL' 属性并更改一个值可以解决所有问题。呜呜呜！

Believe 是一个如何使 prettyPhoto W3C 有效的示例。在线 8 你有这个

```
(function($){$.prettyPhoto={version:'3.1.4'};$.fn.prettyPhoto=function(pp_settings){pp_settings=jQuery.extend({hook:'data-gal',animation_speed:'fast',ajaxcallback:function(){},slideshow:5000,autoplay_slideshow:false,opacity:0.80,show_title:true,allow_resize:true,allow_expand:true,default_width:500,default_height:344,counter_separator_label:'/',theme:'pp_default',horizontal_padding:20,hideflash:false,wmode:'opaque',autoplay:true,modal:false,deeplinking:true,overlay_gallery:true,overlay_gallery_max:30,keyboard_shortcuts:true,changepicturecallback:function(){},callback:function(){},ie6_fallback:true,markup:'<div class="pp_pic_holder"> 
```

寻找这个

```
jQuery.extend({hook:'rel' 
```

并更改为

```
jQuery.extend({hook:'data-gal' 
```

或者，您可以下载我编辑的版本，它是最新版本，可以在此处找到[jquery.prettyPhoto-3.1.4-W3C.js](http://www.bybe.net/downloads/jquery.prettyPhoto-3.1.4-W3C.js)

# asp.net-mvc-4 - 如何在 MVC 4 中指定自定义验证属性的执行顺序？

> ID：13971342
> 
> 赞同：1
> 
> 时间：2012-12-20T11:36:07.440
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我在属性级别和类级别有多个自定义验证属性。我只是想知道如何设置ValidationAttributes的执行顺序。因为我检查“必填字段”的验证属性之一永远不会被调用？

```
public class PhoneNumberFormatAttribute : ValidationAttribute
{
 .......
 return new ValidationResult("Invalid Phone Number);
 .......
} 
```

* * *

```
public class RequiredFieldsAttribute : ValidationAttribute
{
.........
return new ValidationResult("Field Required");
..........
} 
```

* * *

```
[RequiredFields]
public class MessageRequest
{
   [PhoneNumberFormat]
   public string PhoneNo { get; set; }
} 
```

如果我从 PhoneNumberFormatAttribute 收到模型状态错误，则不会调用 RequiredFieldAttribute。

# java - 在现有字符串的开头连接一个新字符串

> ID：13971343
> 
> 赞同：-2
> 
> 时间：2012-12-20T11:36:09.087
> 
> 标签：java, string-concatenation

我想将新字符串连接到现有字符串的开头，例如，当前字符串 =“”，并且我希望始终将新字符串连接到旧字符串的开头：

```
 String msg="Java One",temp;
 for(int i=msg.length()-2;i>0;i--){ 
```

在这里，我在结束后从 msg 的末尾开始循环 temp 应该包含“Java One”，但按此顺序

```
 e
 ne
 one
 a one
 va one 
} 
```

等等

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:39:44.303

您可以使用[`String#substring(int,int)`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int,%20int%29)在每次迭代中获取不同的子字符串。

```
for(int i=msg.length()-1;i>=0;i--){
    System.out.println(msg.substring(i,msg.length()));
} 
```

当然，您可以存储每个生成的子字符串并使用它做您想做的事情。

请注意，这种方法可能更有效，因为尽管`String`会创建新对象，但很可能`char[]`对所有这些对象都使用相同的底层对象。

* * *

另请注意，我们是从`msg.length()-1`（而不是 -2，作为问题中的原始代码）和 while `i >= 0`（而不是`i > 0`，如在原始问题中）进行迭代

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:42:08.753

> 我想始终将新字符串连接到旧字符串的开头

这很简单，但效率不高：

```
String oldString = "";
for (...) {
    // Prepare your new string
    String newString = ... ;
    // Add the new string at the beginning of the old string
    oldString = newString + oldString;
} 
```

# android - 使用 BroadcastReceiver 关闭活动

> ID：13971348
> 
> 赞同：3
> 
> 时间：2012-12-20T11:36:31.880
> 
> 标签：android, broadcastreceiver

我有一个活动 Main.java 在我的应用程序中打开，我想使用广播接收器关闭活动，如何关闭活动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:49:00.880

首先，您的 Main.java 需要注册为接收器。你可以在 Main.java 的 onResume() 中注册它：

```
@Override
public void onResume() {
    registerReceiver(broadcastReceiver, new IntentFilter(BroadcasterClassName.NAME_OF_ACTION));
} 
```

然后处理广播并完成您的活动：

```
private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(BroadcasterClassName.NAME_OF_ACTION)) {
            finish();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:49:05.927

您可以向实现 Handler.Callback 的活动发送消息，并在那里处理它以关闭活动。

快速示例：

```
class Act1 extends Activity implements Handler.Callback {
 public static final int CLOSE_ACTIVITY = 54212;
 public boolean handleMessage(Message msg) {
   if(msg.what == CLOSE_ACTIVITY) {
    finish();
   }
 }
} 
```

然后，由于您 BroadcastReceiver 在大多数情况下在主线程上运行。只需通过 Handler 发送消息。

```
new Handler().sendMessage(MessageFactory.createShutdownMsg()). 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T11:41:31.973

你可以这样做：在你的主要有：

```
private static Main mInstance;

onCreate()
{
   ...
   mInstance = this;
}

public static boolean closeActivity()
{
   if (mInstance != null)
   {
      mInstance.finish();
      return true;
   }
   return false;
} 
```

但是，这意味着任何时候都只存在一个 Main。我认为你可以通过在清单中添加 android:noHistory="true" 或类似的东西来实现这一点。

# python - 在比赛中配对人

> ID：13971356
> 
> 赞同：0
> 
> 时间：2012-12-20T11:36:59.270
> 
> 标签：python, combinations, itertools

假设有一场比赛，其中有五个男孩和五个女孩：

```
boys = ["Boy1", "Boy2", "Boy3", "Boy4", "Boy5"]
girls = ["Girl1", "Girl2", "Girl3", "Girl4", "Girl5"] 
```

每个男孩都被吸引到一个女孩，他们玩游戏。`itertools`产生所有对的所有组合的 Pythonic 方式（可能涉及？）是什么？

例如，组合可以是：

```
combination1 = [("Boy1", "Girl1"), ("Boy2", "Girl2"), 
                ("Boy3", "Girl3"), ("Boy4", "Girl4"), ("Boy5", "Girl5")] 
```

所以 Boy1 与 Girl1 对战，以此类推。如果 Boy1 与 Girl1 打成平局，则没有其他女孩可以与他对战。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:48:45.350

```
from itertools import product

l1 = ["boy1","boy2","boy3"]
l2 = ["girl1","girl2","girl3"]

print list(product(l1,l2)) 
```

输出是：

```
[('boy1', 'girl1'), ('boy1', 'girl2'), ('boy1', 'girl3'), 
 ('boy2', 'girl1'), ('boy2', 'girl2'), ('boy2', 'girl3'), 
 ('boy3', 'girl1'), ('boy3', 'girl2'), ('boy3', 'girl3')] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:40:19.463

这应该可以解决问题：

洗牌提供了某种形式的随机性，男孩和女孩相互配对

```
In [115]: boys = ["Boy1", "Boy2", "Boy3", "Boy4", "Boy5"]

In [116]: girls = ["Girl1", "Girl2", "Girl3", "Girl4", "Girl5"]

In [117]: random.shuffle(girls)

In [118]: girls
Out[118]: ['Girl5', 'Girl4', 'Girl3', 'Girl1', 'Girl2']

In [119]: for i in itertools.izip(boys, girls):
   .....:     print i
   .....:     
('Boy1', 'Girl5')
('Boy2', 'Girl4')
('Boy3', 'Girl3')
('Boy4', 'Girl1')
('Boy5', 'Girl2') 
```

**编辑**：如果您想要所有可能的配对，请查看：

```
In [126]: boys
Out[126]: ['Boy1', 'Boy2', 'Boy3', 'Boy4', 'Boy5']

In [127]: girls
Out[127]: ['Girl1', 'Girl2', 'Girl3', 'Girl4', 'Girl5']

In [128]: [girls[i:]+girls[:i] for i in xrange(len(girls))]
Out[128]: 
[['Girl1', 'Girl2', 'Girl3', 'Girl4', 'Girl5'],
 ['Girl2', 'Girl3', 'Girl4', 'Girl5', 'Girl1'],
 ['Girl3', 'Girl4', 'Girl5', 'Girl1', 'Girl2'],
 ['Girl4', 'Girl5', 'Girl1', 'Girl2', 'Girl3'],
 ['Girl5', 'Girl1', 'Girl2', 'Girl3', 'Girl4']]

In [129]: for combo in (itertools.izip(boys, g) for g in ( girls[i:]+girls[:i] for i in xrange(len(girls)) )):
   .....:    for pair in combo:
   .....:        print pair,
   .....:    print ''
   .....:     
('Boy1', 'Girl1') ('Boy2', 'Girl2') ('Boy3', 'Girl3') ('Boy4', 'Girl4') ('Boy5', 'Girl5') 
('Boy1', 'Girl2') ('Boy2', 'Girl3') ('Boy3', 'Girl4') ('Boy4', 'Girl5') ('Boy5', 'Girl1') 
('Boy1', 'Girl3') ('Boy2', 'Girl4') ('Boy3', 'Girl5') ('Boy4', 'Girl1') ('Boy5', 'Girl2') 
('Boy1', 'Girl4') ('Boy2', 'Girl5') ('Boy3', 'Girl1') ('Boy4', 'Girl2') ('Boy5', 'Girl3') 
('Boy1', 'Girl5') ('Boy2', 'Girl1') ('Boy3', 'Girl2') ('Boy4', 'Girl3') ('Boy5', 'Girl4') 
```

**编辑 2**（修复编辑 1）：

```
>>> perms = itertools.permutations(girls)
>>> len([tuple(p) for p in (itertools.product(boys, g) for g in perms)])
120
>>> perms = itertools.permutations(girls)
>>> len(set(tuple(p) for p in (itertools.product(boys, g) for g in perms)))
120 
```

我不得不去，`len`因为有 120 种可能的配对，我不想把帖子弄得乱七八糟。这就是为什么有`len(...)`和`len(set(...))`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T11:42:43.223

另一个想法：

```
>>> zip(boys, random.sample(girls, len(girls)))
[('Boy1', 'Girl3'), ('Boy2', 'Girl2'), ('Boy3', 'Girl4'), ('Boy4', 'Girl1'), 
 ('Boy5', 'Girl5')] 
```

# python - sqlalchemy 序列化程序合并

> ID：13971357
> 
> 赞同：1
> 
> 时间：2012-12-20T11:37:00.453
> 
> 标签：python, database, serialization, sqlalchemy

我通过网络将 sqlalchemy 对象发送到另一台机器。首先我将它序列化为一个字符串，然后加密并发送。我用以下方式序列化它：

```
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker, scoped_session
from sqlalchemy.ext.serializer import loads, dumps
engine = create_engine(connection_str)
S = scoped_session(sessionmaker(bind=engine, expire_on_commit=False))
session = S()

data = session(MyObj).all()
serialized = pickle.dumps([dumps(d) for d in data])

crypted = crypt(serialized) #encrypting the serialized data
send(machine, crypted)      #sending encripted data to 'machine' 
```

在另一台机器上：

```
encrypted = get_data()
serialized = decrypt(encrypted)
data = [loads(d, Base.metadata, S) for d in pickle.loads(serialized)]

for d in data:
    session.merge(d)
session.commit() 
```

但它抛出：`(IntegrityError) node_type.id may not be NULL u'INSERT INTO myobj (col1, col2) VALUES (?, ?)' (None, None)`

当我尝试打印时`data`它会抛出：`DetachedInstanceError Instance <MyObj at 0x24e0c70> is not bound to a Session; attribute refresh operation cannot proceed` 或：`ObjectDeletedError`

问题是什么？

此处： [如何从 SqlAlchemy 创建和恢复备份？](https://stackoverflow.com/questions/2786664/how-to-create-and-restore-a-backup-from-sqlalchemy)被告知那`session.merge()`会很好，但它对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:08:52.837

来自[sqlalchemy.ext.serializer](http://sqlalchemy.readthedocs.org/en/rel_0_8/core/serializer.html?highlight=serializer#sqlalchemy.ext.serializer)的文档：

> “序列化程序模块仅适用于查询结构。用户定义类的 [...] 实例不需要它”

对于这个用例，也许尝试只使用 pickle 而不是 sqlalchemy.ext.serializer 。

# javascript - 如何动态创建

> ID：13971360
> 
> 赞同：-2
> 
> 时间：2012-12-20T11:37:01.093
> 
> 标签：javascript, jquery, json

```
 ![i am showing you an image.
    i want to create this type by using of jquery but i am not getting exactly what i want please help me. ,I have following HTML code which I want to create dynamically by using jQuery AJAX request. My response is in JSON format.
i am showing you an image.
    i want to create this type by using of jquery but i am not getting exactly what i want please help me. ,I have following HTML code which I want to create dynamically by using jQuery AJAX request. My response is in JSON format. 
i am showing you an image.
    i want to create this type by using of jquery but i am not getting exactly what i want please help me. ,I have following HTML code which I want to create dynamically by using jQuery AJAX request. My response is in JSON format. 
```

我给你看一张图片。我想通过使用 jquery 创建这种类型，但我没有得到我想要的，请帮助我。，我有以下 HTML 代码，我想使用 jQuery AJAX 请求动态创建这些代码。我的回复是 JSON 格式。我给你看一张图片。我想通过使用 jquery 创建这种类型，但我没有得到我想要的，请帮助我。，我有以下 HTML 代码，我想使用 jQuery AJAX 请求动态创建这些代码。我的回复是 JSON 格式。我给你看一张图片。我想通过使用 jquery 创建这种类型，但我没有得到我想要的，请帮助我。，我有以下 HTML 代码，我想使用 jQuery AJAX 请求动态创建这些代码。我的回复是 JSON 格式。

```
 <fieldset data-role="controlgroup" data-type="vertical">
            <legend>Select Locations</legend>
            <input id="checkbox2" name="" type="checkbox"
            />
            <label for="checkbox2">ICU Unit
                <div class="location_detail"> <span class="left">6 Messages</span>
                </div>
            </label>
            <input id="checkbox3" name="" type="checkbox" />
            <label for="checkbox3">CCU Unit
                <div class="location_detail"> <span class="left">6 Messages</span>
                </div>
            </label>
            <input id="checkbox4" name="" type="checkbox" />
            <label for="checkbox4">EU Unit
                <div class="location_detail"> <span class="left">6 Messages</span>
                </div>
            </label>
        </fieldset>

    JSON data looks like this:

        {
            __type="PatientInfo:#DAAB",
            DeptId=14,
            DeptName="GENERAL",
            more...
        }
        1Object{
            __type="PatientInfo:#DAAB",
            DeptId=14,
            DeptName="GENERAL",
            more...
        }
        2Object{
            __type="PatientInfo:#DAAB",
            DeptId=14,
            DeptName="GENERAL",
            more...
        }

    first record looks like this:

        {
            __type:"PatientInfo:#DAAB",
            AcknowledgeComment:null,
            AcknowledgedBy:null,
            DeptId:14,
            DeptName:"GENERAL",
            DeptPhoneNumber:"1234567894",
            ForwardBy:null,
            ForwardComment:null,
            HasECHO:false,
            HasLabReports:false,
            HasLabResults:false,
            HasMR:false,
            HospPhoneNumber:"1234512345",
            IsAlreadyLabSubscribed:false,
            IsEscalatedMessage:false,
            IsEscalationPossible:false,
            IsMessageAcknowledgedBySomeOne:false,
            IsMessageEscalatedBySystem:false,
            IsPrimaryReceiver:true,
            Message:"- ABNORMAL ECG -",
            MessageGenerationDate:"12/20/2012 08:20:24 AM",
            MessageID:768,
            MessageLevel:2,
            MessageStatus:"SENT TO MOBILE",
            MessageStatusID:3,
            MessageType:"EKG",
            PatientFirstName:" 03 ",
            PatientID:"TestPID9480",
            PatientLastName:"Test",
            PatientMiddleInitial:"",
            PatientNamePrefix:"",
            PatientNameSuffix:"",
            RowNumber:1,
            Sender:"Mvisum,",
            SenderId:1,
            Severity:"Level2",
            Subject:"ECG attached for patient - Test, 03 ",
            TotalPatientCount:3,
            UnitId:16,
            UnitName:"Emergency",
            UnitPhoneNumber:"9999999999"
        }

      \[1\]: http://i.stack.imgur.com/Hgnz2.png][1] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:00:47.147

假设您的对象是一个包含对象的数组，如下所示：

```
var data = [
    {
        __type: "PatientInfo:#DAAB",
        DeptId: 14,
        DeptName: "GENERAL"
        //Etc
    }, {
        __type: "PatientInfo:#DAAB",
        DeptId: 14,
        DeptName: "GENERAL"
    } //Etc
]; 
```

你有一些这样的 HTML：

```
<fieldset data-role="controlgroup" data-type="vertical" id="fields">
    <legend>Select Locations</legend>
</fieldset> 
```

然后这将起作用：

```
var fields = document.getElementById('fields');
for(var i = 0; i < data.length; i++){
    var input = document.createElement('input');
    var label = document.createElement('label');
    var div =  document.createElement('div');
    var span =  document.createElement('span');

    input.setAttribute('id','checkbox'+(i+1));
    input.setAttribute('type','checkbox');
    label.setAttribute('for','checkbox'+(i+1));
    div.setAttribute('class','location_detail');
    span.setAttribute('class','left');

    fields.appendChild(input);
    fields.appendChild(label);
    label.appendChild(document.createTextNode(data[i].DeptId));
    label.appendChild(div);
    div.appendChild(span);
    span.appendChild(document.createTextNode(data[i].__type));
} 
```

**[工作样本](http://jsbin.com/unodab/2/edit)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:12:12.370

```
<fieldset data-role="controlgroup" data-type="vertical" id="fs">
    <legend>Select Locations</legend>

</fieldset> 
```

和jQuery

```
$.getJSON(url, null, function (data) {
        var $fs = $("#fs");
        $.each(data, function (index, obj) {
            var cbid = "checkbox" + index;
            var $cb = $('<input id="' + cbid + '" name="" type="checkbox" style="float:left;display:inline;"/>');
            var $label = $('<label for="' + cbid + '">').append(obj.DeptName);
            var $div = $('<div class="location_detail">');
            var $span = $("<span class='left'>" + obj.DeptId + "</span>");
            $cb.appendTo($fs);
            $label.appendTo($fs);
            $div.appendTo($label);
            $span.appendTo($div);
        });
    }); 
```

更新：

用于更改对象顺序的小提琴：

[http://jsfiddle.net/8WbtF/2/](http://jsfiddle.net/8WbtF/2/)

使用 display:block 将所有复选框和标签包装到一个 div 中，以使排列更容易。

# wcf - ASP.NET 客户端应用程序服务身份验证和 WCF

> ID：13971365
> 
> 赞同：0
> 
> 时间：2012-12-20T11:37:17.490
> 
> 标签：wcf, .net-4.0, forms-authentication, asp.net-4.0

我有一个 WPF 应用程序，它使用客户端应用程序服务来允许针对使用表单身份验证和 SqlMembershipProvider/SqlProfileProvider/SqlRoleProvider 的相关 Web 应用程序进行身份验证（用户名/密码登录）。这一切都有效，我可以可靠地验证用户/密码组合。

WPF 应用程序还调用许多 WCF 服务，这些服务由用于 CAS 身份验证的同一 Web 应用程序公开。我现在希望能够将身份验证详细信息（来自客户端应用程序服务）传递到 WCF 服务，以便我可以识别在这些服务中经过身份验证的用户。如果没有进行身份验证，我还需要能够防止使用 WCF 服务。

我发现了几个 .NET 3.5 示例，其中对 .asmx Web 服务使用 CAS 身份验证，或者针对不使用 ClientBase 并内置身份验证工具的 WCF 数据服务提供身份验证，但我找不到任何纯 WCF 示例. 任何人都可以向我指出可以实现这种情况的指令吗？我在这个项目中使用 .NET 4.0。

我也发现[了这个 stackoverflow 问题](https://stackoverflow.com/questions/2961277/how-to-use-client-application-services-with-wcf)，但是对于 .asmx Web 服务而不是 WCF 再次回答了这个问题。

我得到的最接近的方法是创建一个`OperationContextScope`，然后将 cookie 标头从`ClientFormsIdentity`对象复制到一个`HttpRequestMessageProperty`并将其添加到`OutgoingMessageProperties`当前的`OperationContext`. 然后我在`OperationContextScope`. 问题是，当我访问 WCF 服务时，我仍然看不到任何类似于身份验证的东西，因为我可以识别原始用户。这种方法取自各种示例，但我显然在 WCF 结束时遗漏了一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:30:57.580

我认为您需要切换到 Microsoft 现在让人们用于 WCF 服务的 Web API。查看[通过 Web API 使用表单身份验证](https://stackoverflow.com/questions/10325841/using-forms-authentication-with-web-api)和[http://aamirposwal.blogspot.com/2012/05/aspnet-web-api-custom-authorize-and.html](http://aamirposwal.blogspot.com/2012/05/aspnet-web-api-custom-authorize-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T13:58:04.750

找到了。

在我的绑定中，我指定了 allowCookies="true"。

根据[Wiktor Zychla](http://netpl.blogspot.co.uk/2011/11/managing-cookies-in-wcf-client.html)的说法，“将 BasicHttpBinding 上的 AllowCookies 属性设置为 true 会打开自动 cookie 管理”——这意味着在代码中设置 cookie 的任何尝试都将被忽略，这就是我正在做的事情。

# jquery - 在 ruby on rails 中使用 jQuery 绑定下拉菜单

> ID：13971366
> 
> 赞同：2
> 
> 时间：2012-12-20T11:37:22.453
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我在 html.erb 文件中有以下表格

users.html.erb

```
 <% form_tag (:action =>:abc_action)do%>
                            <%= label_tag(:user,"Select User") %><br/>
                             <%=collection_select("user",id",@result,"uid","uid",:prompt=>"--Select User--")%><br/>
    <%= collection_select("subject", "id",@res,"id", "id",:prompt=>"--Select Subject--")%><br/>

   <%= submit_tag 'Submit',:id => 'btn'%>
                    <%end %> 
```

我想根据第一个下拉列表的选定值更改第二个下拉列表的内容。

为此，我在第一个下拉列表的更改事件上调用 jQuery 方法。控制器工作正常，控制器返回的值为数组类型。

我的 jQuery 代码是....

```
jQuery(document).ready(function() {
jQuery("#edetail_id").change(function() {
    jQuery.get('/requests/find_val/?emid=' + jQuery("#user_id").val(),function(data)
   {

          jQuery("#subject_id").html(data);
   }); 
 });
}); 
```

我的控制器是 Users_controller.rb

```
 def find_val
 @acc = user.find(:all, :conditions => ["uid = ?", params[:emid] ])
     @res = Array.new
                            for result in @acc
                                    @res << result.ndid
                            end

          render :text => @res

 end 
```

请任何人帮助我..我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:50:29.457

我不得不猜测一下，但我认为这会将您推向正确的方向。我真的不喜欢这种事情的 rails select helpers。您可能只是在 erb 循环中进行常规 html 选择

```
<% form_tag (:action =>:abc_action)do%>
     <%= label_tag(:user,"Select User") %><br/>
     <%=collection_select("user","id", @result,"uid","uid",:prompt=>"--Select User--")%>
     <div id="result_holder">
      <%= collection_select("subject", "id",@res,"id", "id",:prompt=>"--Select",    
     :html=> {:id => "result"})%>
     </div>
    <br/>
     <%= submit_tag 'Submit',:id => 'btn'%>
   <%end %> 
```

jQuery

```
jQuery(document).ready(function(){
jQuery("#edetail_id").change(function() {
    var id =  jQuery("#user_id").val()
    jQuery.get('/requests/find_val/' + id)
}); 
```

路线.rb

```
match "/users/find_val/:id" => "users#find_val", :as => :todo_select 
```

我猜您希望所选用户的主题

```
def find_val
 @subjects = User.find(params[:id]).subjects
end 
```

意见/用户/find_val.js

$("#result_holder").empty().append("<%=j( collection_select("subject", "id",@subjects,"id", "id",:prompt=>"--选择主题--")%>")

# java - 有没有类似于 Mockito 中的 Junit Setup Method 的东西

> ID：13971367
> 
> 赞同：8
> 
> 时间：2012-12-20T11:37:31.707
> 
> 标签：java, junit, mocking, mockito

我有以下情况

```
 interface DAO
 {
      String a();
      String b();
      String c();

 } 
```

我创建了这个 DAO 接口的模拟，并将它提供给一个叫做 DAOProcess 的东西。在 DAOProcess 中，我有各种方法调用 DAO 方法 a、b 和 c。

现在每次我需要对 DAOProcess 中的方法进行单元测试时，我都会编写`when(mockDAO.a()).thenReturn("test")`.

无论如何我可以将这些`when(mockDAO.a()).thenReturn("test")`共同点转移到所有测试用例中吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T11:46:17.663

如果您的测试用例都在一个类中，您可以使用带有注释的方法`@Before`，例如：

```
...
private DAO mockDAO;

@Before 
public void setUp() {
    mockDAO = mock(DAO.class);
    when(mockDAO.a()).thenReturn("test");
    ...etc...
}    
... 
```

或者，如果您需要许多测试类的行为，您可以编写一个实用程序类来设置 Mock 实例的行为，例如：

```
public class MockDAOPrototype {
    public DAO getMockWithDefaultBehaviour() {
        final DAO mockDAO = mock(DAO.class);
        when(mockDAO.a()).thenReturn("test");
        ...etc...

        return mockDAO;
    }
} 
```

然后调用`MockDAOPrototype.getMockWithDefaultBehaviour()`你的`setUp`方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T11:42:51.947

您可以创建一个 AbstractTestCase 类，该类`abstract`由您需要此模拟的所有测试用例扩展。在那个抽象测试用例中，您将拥有以下语句。

```
 @Ignore // just in case your runner thinks this is a JUnit test.
 public abstract class AbstractTestCase
 {
      @Mock
      private DAO mockDAO;

      @Before
      private void setupMocks()
      {
           when(mockDAO.a()).thenReturn("test")
           ....
      }
 } 
```

在您的具体测试用例类中，您会

```
 public class MyConcreteTestCase extends AbstractTestCase
 {
      @InjectMocks
      @Autowired
      private DAOProcess daoProcess;

      ....
 } 
```

# javascript - 如何禁用 iPad 浏览器中的后退按钮

> ID：13971371
> 
> 赞同：0
> 
> 时间：2012-12-20T11:37:46.127
> 
> 标签：javascript, ios, ipad

下面是我在 iPad 浏览器中检测和停止浏览器后退按钮的代码。

```
$(window).bind("pagehide", function(e) { 
}) 
```

如何阻止页面在 iPad 浏览器中单击浏览器的后退按钮时返回？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T21:29:09.280

您可以使用在`onbeforeunload`用户离开您的页面时触发的事件，无论是通过点击后退按钮、输入新 URL 还是关闭浏览器。

这是一个例子：

```
window.onbeforeunload = function(){
    return 'You are leaving!?';
} 
```

这是 Chrome 上的结果：

![在此处输入图像描述](../Images/77a1c83a67b2d59601fd3f31d11ef25a.png)

这个事件在不同的浏览器之间似乎不一致，因为有些不支持它，有些会执行你传递给它的任何函数，有些会拒绝这个函数，如果它没有返回一个字符串放入确认框中。

正如评论者亚历克斯韦恩所说，请三思而后行。它确实会对您的网站或 web 应用程序产生负面影响，以改变后退按钮的本机行为。

# c - 字符数组初始化产生分段错误

> ID：13971372
> 
> 赞同：1
> 
> 时间：2012-12-20T11:37:50.120
> 
> 标签：c, arrays, segmentation-fault

以下代码在编译期间产生分段错误：

*(gdb) 运行
启动程序：/home/anna/Desktop/a.out
程序收到信号 SIGSEGV，分段错误。
/lib/i386-linux-gnu/libc.so.6 中的 strtok() 中的 0xb7e97845* 

```
#include <string.h>
#include <stdio.h>

main () {
char * sentence = "This is a sentence.";
char * words[200] ;
words[0] = strtok(sentence," ");
} 
```

更改第 5 行后，没有抛出错误。

```
#include <string.h>
#include <stdio.h>

main () {
char  sentence[] = "This is a sentence.";
char * words[200] ;
words[0] = strtok(sentence," ");
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T11:39:29.433

```
char * sentence = "This is a sentence."; 
```

`sentence`是指向字符串文字*“这是一个句子”的指针。*存储在只读存储器中，您不应对其进行修改。
以任何方式修改字符串文字都会导致**未定义的行为**，在您的情况下，它会表现为分段错误。

**好读：**
[char a[] = ?string?; 之间有什么区别？和 char *p = ?string?;?](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:02:08.503

阅读（BUGS部分）的`man`页面，`strtok`

*   这些函数修改它们的第一个参数。
*   这些函数不能用于常量字符串。

并且`char *sentence = "This is a sentence";`在只读上下文中分配，因此被视为常量。

# c++ - 单独列表中的两个精灵碰撞

> ID：13971374
> 
> 赞同：2
> 
> 时间：2012-12-20T11:37:51.987
> 
> 标签：c++, collision-detection, sfml

我现在尝试在 SFML 中编写一个自上而下的射击游戏，但遇到了问题。我对 C++ 和一般编程很陌生，所以请原谅凌乱的代码和/或过于复杂的解决方案。

我有两个`std::list`s，一个包含随机生成的敌人，另一个包含我发射的子弹。当子弹击中敌人时，他们都应该被清除，但它不起作用。

这是我的代码的问题部分：

```
for(MonsterIt = MonsterList.begin(); MonsterIt != MonsterList.end(); MonsterIt++)
{

    //Here would be Monster-Movement

    //Collision Monster-Player (MonsterIt = iterator of MonsterList)
    if ((MonsterIt -> getPosition().x + 25) >= PlayerX - 25 && 
        (MonsterIt -> getPosition().x - 25) <= PlayerX + 25 &&
        (MonsterIt -> getPosition().y + 25) >= PlayerY - 25 && 
        (MonsterIt -> getPosition().y - 25) <= PlayerY + 25   )
    {
        MonsterList.erase(MonsterIt);
        break;              
    }

        window.draw(*MonsterIt);
} 
```

这就是我在 Monster 和 Player 之间进行碰撞的方式。效果很好，所以我对 Monsters 和 Lasers 进行了同样的尝试：

```
for(LaserIt = LaserList.begin(); LaserIt != LaserList.end(); LaserIt++)
{

    //Here would be "Laser-Movement"

    //Collision-Laser                               // Doesn't work
    if ((MonsterIt -> getPosition().x + 25) >=      //
        (LaserIt   -> getPosition().x - 7) &&       //
        (MonsterIt -> getPosition().x - 25) <=      //
        (LaserIt   -> getPosition().x + 7) &&       //
        (MonsterIt -> getPosition().y + 25) >=      //
        (LaserIt   -> getPosition().y - 7) &&       //
        (MonsterIt -> getPosition().y - 25) <=      //
        (LaserIt   -> getPosition().x + 7))         //
    {                                               //
        MonsterList.erase(MonsterIt);               //
                                                    //
        LaserList.erase(LaserIt);                   //
                                                    //
        break;                                      //
    }                                               //  

    window.draw(*LaserIt);
} 
```

当我输入我标记的代码部分（右侧带有 // ）时，我在拍摄时立即调试时收到“列表迭代器不可取消引用”错误。当我删掉所说的代码时，它运行良好（我可以射击，走进怪物并且它们消失等等）。因此，我猜我的其余代码正在运行。

那么，不同列表的迭代器之间是否可能发生冲突？如果是这样，我该怎么做？

如果您需要更多信息或代码，请询问。我会很高兴你的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:14:57.943

您使用的迭代器无效。

您的问题有几种解决方案。第一：

```
for(MonsterIt = MonsterList.begin(); MonsterIt != MonsterList.end(); MonsterIt++)
{
    //Here would be Monster-Movement

    //Collision Monster-Player (MonsterIt = iterator of MonsterList)

    // Collision with laser, inside the loop for monsters
    for(LaserIt = LaserList.begin(); LaserIt != LaserList.end(); LaserIt++)
    {
    }

    window.draw(*MonsterIt);
} 
```

这个解决方案并不是真正的 C++ish。使用 OOP，您可以拥有更清晰的代码：

```
class Player
{
    public:
        int X, Y; // for code simplicity on SO.
};
// ...

Player player;
for(MonsterIt = MonsterList.begin(); MonsterIt != MonsterList.end(); MonsterIt++)
{
    MonsterIt->update(player,LaserList);
    if(!MonsterIt->isAlive())
    {
        // Remove monster from list *without* break
    }
} 
```

然后，`Monster`是一个像下面这样的类：class Monster { bool alive; public: bool isAlive() const { 活着返回；}

```
 bool collideWithPlayer(Player p) const
        {
            // Returns whether it collide with player
            // ...
        }

        bool collideWithLaser(Laser l) const
        {
            // Returns whether it collide with one laser
            // ...
        }

        bool collideWithLasers(LaserList l) const
        {
            for(LaserIt = LaserList.begin(); LaserIt != LaserList.end(); LaserIt++)
                if(collideWithLaser(*LaserIt))
                    return true;
            return false;
        }

        void update(Player p, LaserList l)
        {
            if(collideWithPlayer(p) || collideWithLasers(l))
                alive = false;
            else
                window.draw(this);
        }
}; 
```

# spring - java.lang.OutOfMemoryError: 带有 tomcat7 windows 服务的 PermGen 空间

> ID：13971380
> 
> 赞同：4
> 
> 时间：2012-12-20T11:38:16.103
> 
> 标签：spring, jakarta-ee, tomcat, tomcat7

我在**windows server 2008 R2上运行****tomcat 7.0.33** （我将 tomcat 安装为 windows 服务）

 ***   **JDK版本：** `jdk1.6.0_25 64-bit`
*   **Tomcat 选项：**

    1.  **Java虚拟机：（** `C:\Program Files\Java\jre6\bin\server\jvm.dll` 顺便说一句，我在jre中没有客户端文件夹）
    2.  **初始内存池：** 1000 MB
    3.  **最大内存池：** 2000 MB

        当我检查服务器状态时，我可以看到服务器正在使用我配置的内存。

    4.  **环境变量（系统变量）配置：**

        *   **JAVA_HOME：** `C:\Program Files\Java\jdk1.6.0_25`
        *   **小路：** `...;%JAVA_HOME%\bin;....`

我还需要添加**CATALINA_HOME**和**JAVA_OPTS**系统变量吗？

**问题：**我有两个 Web 应用程序**APP1**，* *APP2* * 当我分别部署每个应用程序时，我可以发现内存用于

**APP1** = 198 MB **APP2** = 104 MB

有关应用程序的信息：

**APP1,APP2** : Spring Maven 应用程序，在库中包含其他小型 Maven Spring 应用程序。

APP1：包含 Web 服务，APP2 使用它们。

如果我尝试将它们都部署在同一个 tomcat 实例上，我总是会得到

```
java.lang.OutOfMemoryError: PermGen space 
```

请告知可能导致此问题的原因。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T08:16:25.700

除了设置初始和最大内存池之外，解决方案是添加`-XX:MaxPermSize=1000m`到 java 选项卡中的 java 选项。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-20T12:03:58.703

您可能需要为您的 Tomcat 实例设置/增加 MaxPermSize 设置。请注意，MAVEN_OPTS 与 Tomcat 无关，这些是 Maven 命令行进程 (mvn) 的选项。您的应用程序是“maven”应用程序这一事实在运行时没有任何意义，因为 Maven 不参与应用程序的**运行**，只涉及它的**构建**。

在`\bin`您的tomcat 安装文件夹中，应该有一个名为“tomcat7.exe”的应用程序。您可以使用它来更新您的 tomcat 服务的设置。

尝试类似的东西

> tomcat7.exe //美国//[你的 tomcat 服务的名称] --JvmOptions=-Xmx2g -Xms1g -XX:MaxPermSize=512m

编辑：上面的语句应该在一行，而不是两行...

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-22T15:38:55.560

我遇到了一个类似的问题，因为当 Tomcat 独立运行时，我们的应用程序在 Tomcat 上运行没有问题，并且在将 Tomcat 作为服务运行时，我们不断出现 permgen 内存不足异常。

我找到了一个类似于 Pap 的解决方案。您需要通过运行 bin/tomcat7w.exe //ES//name_of_service 来访问 Tomcat 服务配置 GUI。在那里，您可以转到 Java 选项卡并直接设置相应的 Java 属性 - 例如 `-XX:MaxPermSize=1000m`

这是一篇博客文章，它帮助我解释了在作为服务运行时 Tomcat 忽略了所有 Tomcat 设置。 [http://www.12robots.com/index.cfm/2010/10/8/Giving-more-memory-to-the-Tomcat-Service-in-Windows](http://www.12robots.com/index.cfm/2010/10/8/Giving-more-memory-to-the-Tomcat-Service-in-Windows)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-20T12:52:58.787

您需要增加 PermGen 空间。在您的参数中添加类似`-XX:MaxPermSize=128m`的内容（如果您愿意，可以保留更多的 perm gen 空间）。和设置用于堆`-Xmx`，`-Xms`而在这里您将用完单独管理的[PermGen 空间。](http://www.integratingstuff.com/2011/07/24/understanding-and-avoiding-the-java-permgen-space-error/)**

# android - 我无法更新我的 android 应用程序中的任何更改

> ID：13971385
> 
> 赞同：0
> 
> 时间：2012-12-20T11:38:29.393
> 
> 标签：android, updating

我正在 Android 中开发一个应用程序，但是每当我尝试更新我的应用程序时（删除旧应用程序的文件并从我的电脑上传新文件）。替换文件并重新安装我的应用程序后，我在手机上看不到任何更改。它与旧版本一样，没有应用任何更改。顺便提一句。我更改了清单文件中的 versionCode 和 versionName ，我的应用程序还没有在 GooglePlay 商店中，仅在我的 PC 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:41:09.243

尝试清理项目**Project --> clean**。从设备中删除旧项目，然后在清理后安装新项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:41:06.373

如果您使用`Eclipse`的是`IDE`.

# asp.net-web-api - asp.net Web API 中的 CreateResponse 方法

> ID：13971390
> 
> 赞同：14
> 
> 时间：2012-12-20T11:38:44.580
> 
> 标签：asp.net-web-api

调用此方法：

```
public HttpResponseMessage PostProduct(Product item)
{
    item = repository.Add(item);
    var response = this.Request.CreateResponse<Product>CreateResponse(HttpStatusCode.Created, item);

    string uri = Url.RouteUrl("DefaultApi", new { id = item.Id });
    response.Headers.Location = new Uri(uri);
    return response;
} 
```

导致编译时错误：

```
'System.Web.HttpRequestBase' does not contain a definition for 'CreateResponse' and the
            best extension method overload 'System.Net.Http.HttpRequestMessageExtensions.CreateResponse<T>
(System.Net.Http.HttpRequestMessage, System.Net.HttpStatusCode, T)' has some invalid arguments. 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-20T11:59:59.973

的运行时类型`item`可能不是`Product`. 你应该能够做到这一点：

```
var response = Request.CreateResponse(HttpStatusCode.Created, item); 
```

即使`item`是 的一个实例`Product`，泛型`<Product>`参数也是多余且不必要的。如果您使用 ReSharper，它会告诉您“（通用）类型参数规范是多余的”。

**更新**

`Controller`您的课程是否从or延伸`ApiController`？错误应该是`'System.Net.Http.HttpRequestMessage' does not contain a definition for...`，不是`'System.Web.HttpRequestBase' does not contain a definition for...`。

WebApi 控制器应该从 扩展`ApiController`，而不是`Controller`. 在 MVC 控制器中，`this.Request`指向`System.Web.HttpRequestBase`. 在 WebAPI 控制器中，`this.Request`指向`System.Net.Http.HttpRequestMessage`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-08-21T14:15:49.207

CreateResponse 是命名空间中定义的扩展方法`System.Net.Http`。确保在项目中添加对`System.Net.Http`和的引用，`System.Net.Http.Formatting`并添加正确的 using 指令：

**C＃：**
`using System.Net.Http;`

**VB：**
`Import System.Net.Http`

# javascript - 淘汰赛js根据文本框值更改div宽度

> ID：13971391
> 
> 赞同：1
> 
> 时间：2012-12-20T11:38:45.827
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

我是淘汰 js 的新手，需要帮助。我想，当我在文本框中添加数字时，应该调整到像素的大小。

以下是代码：

```
 <html> 
        <head> 
            <style type="text/css"> 
                #myDiv { 
                        border:solid 1px #f00; 
                } 
                #myOtherDiv { 
                        border:solid 1px #00f; 
                        width: 150px; 
                } 
            </style> 
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
            <script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/2.1.0/knockout-min.js"></script>
            <script type="text/javascript">
                $(document).ready(function(){

                     var viewModel = { 
                            myWidth: ko.observable( '250px'), 
                            anotherDiv: ko.observable('KO is working') 
                        }; 
                        ko.applyBindings(viewModel); 
                });
            </script>
        </head> 
            <body>
                    <div id="myDiv" data-bind="style: { width: myWidth }">
                       Some Text 
                    </div> 
                    <div id="myOtherDiv"> 
                            Some More Text 
                    </div> 
                    <div data-bind="text: anotherDiv"></div> 
                    Enter size<input type = text />
            </body> 
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:55:09.360

您必须使用此链接来进行 knockout-2.2.0.js 的工作

```
 <script src="http://knockoutjs.com/downloads/knockout-2.2.0.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:48:19.887

您应该将输入字段绑定到`myWidth`属性：

```
Enter size <input type = text data-bind="value: myWidth"/> 
```

淘汰赛的链接也坏了，试试这个：[http ://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.0.js](http://ajax.aspnetcdn.com/ajax/knockout/knockout-2.2.0.js)

这是一个工作小提琴：http: [//jsfiddle.net/wAYqY/](http://jsfiddle.net/wAYqY/)

# android - 设备处于唤醒状态时列表项消失

> ID：13971396
> 
> 赞同：0
> 
> 时间：2012-12-20T11:39:12.240
> 
> 标签：android, android-listview, android-lifecycle

自 1 周以来，我一直遇到一个问题。我制作了一个自定义列表视图。单击按钮将项目添加到列表视图中。所有项目都正常显示在列表视图中。但是10秒后，当设备灯关闭并滑动屏幕时，里面的项目就`ListView`消失了。我在 xml 中的列表视图：

```
<ListView
    android:id="@+id/lvEditItem"
    android:layout_width="fill_parent"
    android:layout_height="100dip"
    android:overScrollMode="never"
    android:layout_below="@+id/tvSelectToEdit"
    android:cacheColorHint="@android:color/transparent"
    android:paddingRight="10dip"
    android:scrollbars="none" >
</ListView> 
```

我的活动文件是：-

```
ListView mView;
mView=(ListView)findViewById(R.id.lvEditItem);
mView.setDivider(null);
mView.setOnItemClickListener(new OnItemClickListener() {

private View lastSelectedView = null;

public void clearSelection()
{
    if(lastSelectedView != null)
       lastSelectedView.setBackgroundDrawable(getResources().getDrawable(android.R.color.transparent));
}

@Override
public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
   clearSelection();
   lastSelectedView = view;
   view.setBackgroundResource(R.color.lightGreen);

   String items=arrayList.get(position).toString();
   String s[]=items.split("~");

   System.out.println("value of Array>>>>>>>=="+s.length);

   tvGender.setVisibility(View.VISIBLE);

   tvCategory.setVisibility(View.VISIBLE);

   tvSubCategory.setVisibility(View.VISIBLE);

   tvStyle.setVisibility(View.VISIBLE);

   tvSize.setVisibility(View.VISIBLE);

   tvColor.setVisibility(View.VISIBLE);

   tvGender.setText(s[0]);
   GenderData.gender=s[0];
   tvGender.setTypeface(face);

   tvCategory.setText(s[1]);
   CategoryData.category=s[1];
   tvCategory.setTypeface(face);

   tvSubCategory.setText(s[2]);
   SubCategoryData.subCategory=s[2];
   tvSubCategory.setTypeface(face);

   brand.setText(s[3]);

   tvStyle.setText(s[4]);
   StyleData.style=s[4];
   tvStyle.setTypeface(face);

   tvSize.setText(s[5]);
   SizeData.size=s[5];
   tvSize.setTypeface(face);

   tvColor.setText(s[6]);
   ColorData.color=s[6];
   tvColor.setTypeface(face);

   String as=s[7].replace("$", "");
   price.setText(as);

   originalRetailer.setText(s[8]);

   originalLink.setText(s[9]);
}); 
```

我的适配器类是：-

```
public class CustomEditListAdapter extends BaseAdapter{

private LayoutInflater mInflater;
ArrayList<String> mArrayList;
ArrayList<String> mshowItemsOnListView;
Typeface face;
public CustomEditListAdapter(Context context,ArrayList<String> mArrayList,ArrayList<String> mshowItemsOnListView ) {
    mInflater = LayoutInflater.from(context);
    this.mArrayList=mArrayList;
    this.mshowItemsOnListView=mshowItemsOnListView;
    face=Typeface.createFromAsset(context.getAssets(), "tahoma.ttf");
     System.out.println("Final ArrayList which has to be post>>>"+mArrayList.toString());
}

@Override
public int getCount() {
   return ConcatData.mSet.size();
}

@Override
public Object getItem(int arg0) {
   return mshowItemsOnListView.get(arg0);
}

@Override
public long getItemId(int position) {
   return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
   ViewHolder holder;

   if (convertView == null) {
      convertView = mInflater.inflate(R.layout.custom_select_item_view, null);
      holder = new ViewHolder();
      holder.txtName = (TextView) convertView.findViewById(R.id.textView1);
      holder.txtName.setTypeface(face);

      convertView.setTag(holder);
   }
   else {
      holder = (ViewHolder) convertView.getTag();
   }

   // holder.txtName.setText(mArrayList.get(position));
   holder.txtName.setText(mshowItemsOnListView.get(position));
   return convertView;
}

static class ViewHolder {
   TextView txtName;
}
} 
```

custom_select_item_view.xml 是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

 <ImageView 
         android:id="@+id/ivArrow"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/list_arrow_my_item_box"
         android:layout_alignParentLeft="true"
         android:layout_alignTop="@+id/textView1"
         android:padding="5dip"
         /> 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:50:14.557

这可能是由于活动生命周期，请参阅[Android 活动生命周期 - 所有这些方法的用途是什么？](https://stackoverflow.com/questions/8515936/android-activity-life-cycle-what-are-all-these-methods-for)了解更多信息。

简而言之，如果您的应用程序被挂起或暂停，当应用程序再次恢复时，其资源将被粉碎并重建。

在此过程中，您添加的项目列表将被销毁并重建。在重建添加的项目时，也需要（明确地）恢复！因此，请让他们将项目信息存储在“安全”位置，以便您能够使用此存储的信息重建列表项目。

有关如何执行此操作的更多信息，请查看有关[保存持久状态](http://developer.android.com/reference/android/app/Activity.html#SavingPersistentState)的 Android 文档。

# wordpress - 最近的帖子更改标题日期

> ID：13971399
> 
> 赞同：0
> 
> 时间：2012-12-20T11:39:23.440
> 
> 标签：wordpress, date, posts

当您单击日历并发布帖子时，我正在尝试更改日期。

目前标题为 Y,m,d（2012 年 12 月 20 日），我想将其更改为 l，F j，Y 为（2012 年 12 月 20 日，星期四）。

我操作哪个 PHP Wordpress 文件来进行此更改？

干杯

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:11:38.537

请做一件事，只需在functions.php中用下面的函数替换函数twentyeleven_posted_on（）希望它会给你你需要的日期格式。

```
function twentyeleven_posted_on() {
    printf( __( '<span class="sep">Posted on </span><a href="%1$s" title="%2$s" rel="bookmark"><time class="entry-date" datetime="%3$s">%4$s</time></a><span class="by-author"> <span class="sep"> by </span> <span class="author vcard"><a class="url fn n" href="%5$s" title="%6$s" rel="author">%7$s</a></span></span>', 'twentyeleven' ),
        esc_url( get_permalink() ),
        esc_attr( get_the_time() ),
        esc_attr( get_the_date( 'l, F j, Y' ) ),
        esc_html( get_the_date() ),
        esc_url( get_author_posts_url( get_the_author_meta( 'ID' ) ) ),
        esc_attr( sprintf( __( 'View all posts by %s', 'twentyeleven' ), get_the_author() ) ),
        get_the_author()
    );
} 
```

# ember.js - 如何将 CollectionView 与 connectOutlets 结合使用？

> ID：13971405
> 
> 赞同：4
> 
> 时间：2012-12-20T11:39:34.917
> 
> 标签：ember.js

目前我正在尝试在我的路由器和 ConnectOutlets 中使用 CollectionView。我很好，如果我正在使用集合视图助手，但这与我的其他实现形成对比，在这些实现中我总是利用 connectOutlets。

我基本上尝试的是：

```
connectOutlets : function(router){
  console.log("calling connectOutlets");
  router.get("applicationController").connectOutlet({
    viewClass : App.ItemsView,
    controller : App.itemController,
    context : content
  })
}

App.ItemsView = Ember.CollectionView.extend({
  itemViewClass : App.ItemView,
}); 
```

App.ItemsView 是我的 CollectionView 的子类。App.itemController 是我手动实例化的 ArrayController。你可以在这里看到完整的小提琴：http: [//jsfiddle.net/mavilein/qS3aN/12/](http://jsfiddle.net/mavilein/qS3aN/12/)

但实际上这不起作用。我没有看到正在渲染的项目。使用集合助手它可以正常工作，但是在视图中设置绑定对我来说太静态了。 **CollectionView 是否不适合与 connectOutlets 一起使用？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T14:20:00.307

看起来你可以做到这一点，但需要在以下位置进行两个小调整`ItemsView`：

```
App.ItemsView = Ember.CollectionView.extend({
   contentBinding: 'controller',
   itemViewClass : 'App.ItemView',
}); 
```

*   由于 CollectionView 依赖于其内容属性，因此您必须将其绑定到其控制器属性。（此属性在 connectOutlet 时连接）

*   正如您`App.ItemView`在 after中定义的那样`ItemsView`，您需要将其称为字符串，以便让 Ember.js 在 ItemsView 实例创建期间查找它。

小提琴：http: [//jsfiddle.net/qS3aN/29/](http://jsfiddle.net/qS3aN/29/)

# java - 如果类 X 中的静态初始化器调用 Y 中的方法，但 Y 的静态初始化器调用 X 中的方法来设置其静态值怎么办？

> ID：13971407
> 
> 赞同：0
> 
> 时间：2012-12-20T11:39:38.710
> 
> 标签：java, static-initialization

这个问题在 JAVA PROGRAMMING LANAGUAGE 书中提出并解释。但我不清楚解释。

**有人可以更清楚地解释吗？**

书中的解释是::

在编译期间无法可靠地检测到这种循环静态初始化，因为在编译 X 时可能不会编写 Y 的代码。如果发生循环，则 X 的静态初始化程序将仅执行到调用 Y 的方法的位置。当 Y 反过来调用 X 方法时，该方法将与尚未执行的其余静态初始化程序一起运行。X 中任何未执行初始化程序的静态字段仍将具有其默认值（false、'/u0000'、零或 null，具体取决于它们的类型）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:41:55.767

很简单：如果一个线程已经在初始化一个类X，当它因为另一个原因需要初始化类X时（例如，因为类Y使用了它的某些东西），那么它就会跳过它。所有静态变量都有其默认值。

有关正在发生的事情的*准确描述，请参阅*[Java 语言规范，第 12.4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.2)。尤其：

> 如果 C 的 Class 对象指示当前线程正在对 C 进行初始化，那么这一定是对初始化的递归请求。释放LC并正常完成。

# java - 在 Java 中过滤/排序海量数据

> ID：13971408
> 
> 赞同：1
> 
> 时间：2012-12-20T11:39:42.927
> 
> 标签：java, sorting, filtering, in-memory-database

先简单介绍一下剧情。数据库是 Sybase。有一些 2-3 k 存储过程。存储过程可能会返回大量数据（大约百万条记录）。将有一个服务（servlet / spring 控制器）调用所需的过程并将数据以 xml 格式刷新回客户端。

我需要应用过滤（在多列和多个条件上）/排序（基于一些动态标准），我已经完成了。

问题是，由于数据量很大，在内存中进行所有过滤/排序并不好。我想到了以下选项。

**选项 1：** 一旦我得到 ResultSet 对象，请阅读一些 X 号。记录，过滤它，将其存储在某个文件中，重复此过程直到读取所有数据。然后只需读取文件并将数据刷新到客户端。

我需要弄清楚如何对文件中的数据进行排序以及如何将对象存储在文件中，以便快速过滤/排序。

**选项 2：** 查找一些 Java API，它获取数据、过滤数据并根据给定标准对其进行排序，然后将其作为流返回

**选项 3：** 使用内存数据库，如 hsqldb、h2database，但我认为这会产生开销而不是帮助。我需要先插入数据然后查询数据，这也将反过来使用文件系统。

注意我不想修改存储过程，所以在数据库中进行过滤/排序的选项不是一个选项，或者如果没有其他方法，可能是最后一个选项。

此外，如果有帮助，我从 ResultSet 读取的每条记录都将其存储在 Map 中，键是列名，此 Map 存储在 List 中，我在其上应用过滤和排序。

您认为哪个选项有利于内存占用、可扩展性、性能方面或任何其他适合此场景的选项？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:30:19.230

我会推荐您的**选项 3**，但它不需要是内存数据库；您可以改用适当的数据库。任何其他选项都只是对分类大量数据的一般问题的更具体的解决方案。毕竟，这正是数据库的用途，而且它做得很好。

如果您真的认为您的选项 3 不是一个好的解决方案，那么您可以实施**排序/合并**解决方案。像你已经做的那样收集你`Map`的 s，但是当你达到记录的限制（比如 10,000 条）时，对它们进行排序，将它们写入磁盘并从内存中清除它们。

数据完成后，您现在可以打开您编写的所有文件并对其执行合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:45:11.560

hadoop 适用于您的问题吗？

您应该过滤数据库本身的数据。您可以编写将执行所有其他过程、组合数据或过滤它们的聚合过程。但是最好的选择是修改 2-3 千个存储过程，以便它们只返回所需的数据。

# java - 发生 EOFException 时返回是否安全

> ID：13971414
> 
> 赞同：2
> 
> 时间：2012-12-20T11:39:57.463
> 
> 标签：java, inputstream

当我复制`Inputstream`到 时`OutputStream`，有时会出现`EOFException`.

`EOFException`从数据输入流可能使用的文档到流结束的信号。

那么这是否意味着`EOFException`发生 a 时返回是安全的？

```
public static void copy(InputStream in, OutputStream out) throws IOException {

byte[] buff = new byte[BUF_SIZE];
int n = -1;

try {
  while ((n = in.read(buff)) >= 0) {
    out.write(buff, 0, n);
  }
} catch (EOFException eof) {
  // reach EOF , return
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:50:14.343

不能在 InputStream.read(byte[]) 中抛出 EOFException，它的 API 说“如果第一个字节由于文件末尾以外的任何原因无法读取......”就会抛出 IOException。

EOFException 用于其他目的，例如。如果输入流在读取所有字节之前到达末尾，java.io.DataInputStream.readFully(byte[] b) 可能会抛出 EOFException。

但是，无论如何，EOFException 表示发生了错误，您不应该忽略它并像什么都没发生一样返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:47:10.673

如果您从 中正确读取`InputStream`，则不会引发此异常。当没有更多数据时，预计会到达文件末尾。最后一次调用`read`将返回`-1`，所有以后的调用都`read`将抛出异常。捕获异常时返回值是安全的，但您应该完全避免该错误。这样的事情应该做：

```
public static void copy(InputStream in, OutputStream out) throws IOException {

  byte[] buff = new byte[BUF_SIZE];
  int n = -1;

  try {
    while ((n = in.read(buff)) != -1) { //See the JavaDoc
      out.write(buff, 0, n);
  }
  catch (IOException eof) {
     e.printStackTrace(); //So you know if something happens...
  }
} 
```

顺便说一句，该`read`方法抛出一个`IOException`，而不是`EOFException`......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:53:36.837

`InputStream.read(byte[])`只会尝试填充尽可能多的字节，如果它达到 EOF `byte[]`，它将返回。`-1`所以`EOFException`不会被正常抛出。`EOFException`因意外情况而抛出。所以理想情况下你应该抛出这个异常而不是捕获它，因为这意味着逻辑本身有问题。

您应该使用`InputStream.read(byte[]) == -1`来检查 EOF。使用异常来确定是否到达流的末尾不是一个好主意，因为异常是昂贵的。

# java - OO 语言中的面向对象特性

> ID：13971416
> 
> 赞同：-4
> 
> 时间：2012-12-20T11:40:01.223
> 
> 标签：java, oop

这些是面向对象的概念：

*   遗产
*   多态性
*   抽象
*   封装

现在，您能说每种 OO 编程语言都实现了所有这些技术吗？或者，否则，所有 OO 语言中的共同点是什么？例如，比较 Java 和 javascript。这不是一个愚蠢的问题。例如，某些语言（例如 Java）在 Scala 允许时不允许多重继承。所以，Java 就像不完整的 OO 语言。我只是想知道是否说每种 OO 语言例如是多态的是否完全正确。干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:07:07.600

简单的回答：不。

这是一篇很好的文章，它指出了..如何定义“真正的”OO语言..无法完成。

> 面向对象和计算机语言之间存在着不同的关系：OO 的支持、OO 的普遍使用和 OO 的实施。再次，我建议您做一些明确的努力：例如“Java 支持 OO，但不是到处使用它”、“SmallTalk 到处都使用 OO，即使是整数”、“Java 通过让你将所有代码放入方法来强制执行 OO”等 [来源](http://c2.com/cgi/wiki?ObjectOrientedProgrammingLanguage)

其中一些 OOP 概念是在大多数语言之后创建的，并且在那里有更高版本.. 对它们有不同级别的支持。

这实际上取决于语言的主要原则，应该支持或要求女巫概念。

[具有面向对象特性的语言](http://en.wikipedia.org/wiki/List_of_object-oriented_programming_languages)（超过 50 种）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:03:02.297

首先，我绝对不同意

> ...例如 Java，当 Scala 允许时不允许多重继承。所以，Java 就像不完整的 OO 语言。

如果您要根据另一种语言的功能来判断 OO 是一种语言，那么我想您会发现没有“完整的” OO 语言。我认为您应该做的是跟踪 OO 根源并检查给定语言在多大程度上遵循该范式。一个非常好的读物是 Alan Kay 的[Smalltalk 的早期历史](http://stephane.ducasse.free.fr/FreeBooks/SmalltalkHistoryHOPL.pdf)，他解释了范式的基础知识。基于此，您以后可以划分纯 OO 语言，其中一切都被建模为对象（例如 Smalltalk 或 Self）和混合语言，虽然支持 OO 概念，但不完全遵守范式（例如 PHP）。此外，有纯 OO 语言，既有基于类的也有基于[原型的](http://en.wikipedia.org/wiki/Prototype-based_programming)，因此，例如是否具有多重继承并不能定义语言是否是 OO。

高温高压

# android - Android 集成测试：Robotium 还是 UIAutomator？

> ID：13971417
> 
> 赞同：14
> 
> 时间：2012-12-20T11:40:05.797
> 
> 标签：android, ui-automation, robotium, android-testing

我想为 Android 应用程序设置集成测试，我想知道什么更好：[Robotium](http://code.google.com/p/robotium/)或最近引入[的 uiautomator](http://developer.android.com/tools/testing/testing_ui.html)。

我以前有使用 Robotium 的经验，这个框架非常适合集成测试。但最近推出的 uiautomator 看起来也不错。

目前我看到 uiautomator 有几个限制：

*   没有xml测试报告
*   不兼容（仅适用于 4.1+）
*   没有 Eclipse 支持，这意味着很多控制台工作

另一方面，该工具允许您摆脱被测应用程序沙箱，并且它是独立于包的，因此可以一起测试多个应用程序。

我也知道用 Maven、Robotium 和一些像 Jenkins 这样的 CI 进行设置相当容易，但我不确定使用 uiautomator 是否那么容易。

我想问一下uiautomator还有其他陷阱吗？还是目前最好坚持使用 Robotium？

# sql - SQL server - 高级分组

> ID：13971420
> 
> 赞同：5
> 
> 时间：2012-12-20T11:40:13.847
> 
> 标签：sql, sql-server, sql-server-2008-r2

我的桌子上有如下采购合同：

```
+------+-----------+------------+---------+------------+-----------+
| type | text      | date       | company | supplierID | name      |
+ -----+-----------+------------+---------+------------+-----------+
| 0    | None      | 2004-03-29 | 310     | 227234     | HRC INFRA |
| 0    | None      | 2007-09-30 | 310     | 227234     | HRC INFRA |
| 0    | None      | 2010-11-29 | 310     | 227234     | HRC INFRA |
| 2    | Strategic | 2011-01-01 | 310     | 227234     | HRC INFRA |
| 0    | None      | 2012-04-10 | 310     | 227234     | HRC INFRA |
+------+-----------+------------+---------+------------+-----------+ 
```

在此示例中，合同的前三行是相同的。所以我只想要第一个。type = 2 的行是与给定供应商的采购合同的更改。我也想选择该行。在最后一行，合约变回 0，所以我也想选择该行。

基本上我想选择第一行和合同类型更改的行。所以结果应该是这样的：

```
+------+-----------+------------+---------+------------+-----------+
| type | text      | date       | company | supplierID | name      |
+ -----+-----------+------------+---------+------------+-----------+
| 0    | None      | 2004-03-29 | 310     | 227234     | HRC INFRA |
| 2    | Strategic | 2011-01-01 | 310     | 227234     | HRC INFRA |
| 0    | None      | 2012-04-10 | 310     | 227234     | HRC INFRA |
+------+-----------+------------+---------+------------+-----------+ 
```

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:21:03.337

```
;WITH cte AS
 (
  SELECT ROW_NUMBER() OVER (ORDER BY date) AS Id,
         type, text, date, company, supplierId, name
  FROM your_table
  )
  SELECT c1.type, c1.text, c1.date, c1.company,
         c1.supplierId, c1.name
  FROM cte c1 LEFT JOIN cte c2 ON c1.id = c2.id + 1
  WHERE c2.text IS NULL OR c1.text != c2.text 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/4506f/1/0)上的演示[](http://sqlfiddle.com/#!3/4506f/1/0)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:55:01.467

我面前没有 SQL 服务器来测试它，所以我现在不打算尝试实际的解决方案，但仅供参考，您需要的东西很少：

1) 一种确保记录正确排序的方法。我在这里看不到任何类型的 id，这意味着您无法保证它们会按该顺序出现。我想有一个，所以只要确保你按它订购

2）无论索引是什么，您都需要在表上对其自身进行外部联接，但不是“table1.index = table2.index”，而是看起来像“table1.index = table2.index + 1”。如果您的索引不是连续的，那么它会使以这种方式加入它们比这更复杂。

3）在 where 子句中，您将指定类似的内容

```
where table1.type <> table2.type 
```

这将使您最容易到达那里。不过，这不会获得第一条记录，因为在第一条记录之前没有记录可以比较，因此您需要添加 OR 来弥补这一点。而且我假设该类型没有 NULL 值。

抱歉，我无法为实际实施提供更多帮助，但也许其他人会尽快处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:01:16.510

可能是你想要的。假设您没有类型 < 0。

```
SELECT * 
FROM [TABLE] as ot where ot.type <> 
(select top 1 coalesce(it.type, -1) from [TABLE] as it where it.date < ot.date order by it.date desc) 
```

另外，请不要记下布兰登的注意事项，因为我没有看到 PK，所以订购了舒尔表。**

# javascript - Html元素在生产中消失

> ID：13971421
> 
> 赞同：0
> 
> 时间：2012-12-20T11:40:16.263
> 
> 标签：javascript, html, analytics

我正在一个网站上工作，当用户注册时，我们在页面中插入一段 html，例如

```
<span data-log-in-status="complete-sign-up" data-log-in-type="email" id="log_in_status" style="display:none;"></span> 
```

然后我们有一个页面加载事件，它找到这个元素，并将这个信息推送到谷歌分析。在开发中我可以在页面源中看到这个元素，但是在生产中，这个元素是无处可寻的......

话虽如此 - 在两种环境中都会触发分析完成注册事件！

但是，我真的很想了解发生了什么-就像元素出现在页面中（分析事件会触发正确的数据）但随后消失了...我唯一能想到的是，如果一段 javascript 不知何故删除此元素，或者如果浏览器将其删除。

这是网络上发生的事情的屏幕截图：

![在此处输入图像描述](../Images/a0b33a2c0016ce9c82c291590fb8e0ce.png)

这是获取此数据并将其推送到分析的 javascript 代码：

```
$(document).ready(function () {
    var status, loginStatus;
    loginStatus = $('#log_in_status');

    if(loginStatus) {
        login_type = $(loginStatus[0]).attr('data-log-in-type');
        status = $(loginStatus[0]).attr('data-log-in-status');

        pushGAEvent(status, login_type, null, null);
        if(status === 'complete-sign-up') {
              goog_report_conversion(); //adwords
        }
    } 
}); 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:35:40.300

无论天气如何，您的代码都将始终触发，因为即使是空的 jQuery 对象也会评估为 true。

尝试：

```
if (loginStatus.length > 0) 
```

代替：

```
if (loginStatus) 
```

# java - 使用 JavaParser 解析变量的正确方法是什么？

> ID：13971424
> 
> 赞同：8
> 
> 时间：2012-12-20T11:40:21.053
> 
> 标签：java, javaparser

使用 JavaParser，我可以使用以下方法获取我的方法和字段的列表：

```
//List of all methods
System.out.println("Methods: " + this.toString());
List<TypeDeclaration> types = n.getTypes();
for (TypeDeclaration type : types)
{
    List<BodyDeclaration> members = type.getMembers();
    for (BodyDeclaration member : members)
    {
        if (member instanceof MethodDeclaration)
        {
            MethodDeclaration method = (MethodDeclaration) member;
            System.out.println("Methods: " + method.getName());
        }
    }
}

//List all field variables.
System.out.println("Field Variables: " + this.toString());
List<TypeDeclaration> f_vars = n.getTypes();
for (TypeDeclaration type : f_vars)
{
    List<BodyDeclaration> members = type.getMembers();
    for (BodyDeclaration member : members)
    {
        if (member instanceof FieldDeclaration)
        {
            FieldDeclaration myType = (FieldDeclaration) member;
            List <VariableDeclarator> myFields = myType.getVariables();
            System.out.println("Fields: " + myType.getType() + ":" + myFields.toString());
        }
    }
} 
```

但我不知道如何获取我的变量列表。我只是想要一个来自 java 源的所有变量的列表，而不管范围如何。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T19:25:22.817

解决方案是创建一个扩展 VoidVisitorAdapter 并覆盖 visit() 方法的访问者类。代码如下：

```
@Override
public void visit(VariableDeclarationExpr n, Object arg)
{      
    List <VariableDeclarator> myVars = n.getVars();
        for (VariableDeclarator vars: myVars){
            System.out.println("Variable Name: "+vars.getId().getName());
            }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-28T19:44:16.137

请注意，根据您的解决方案，可以使用以下代码完成原始字段列表：

```
@Override
public void visit(FieldDeclaration n, Object arg) {
    System.out.println(n);
    super.visit(n, arg);
} 
```

如果您在访问者适配器中覆盖多个访问方法，请不要忘记调用 super.visit。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-24T01:59:13.337

在职的：

在类的`visit(FieldDeclaration n, Object arg)`方法中`VoidVisitorAdapter`，可以使用以下方法来提取变量。

它将给出变量的确切名称，无论是否初始化。

```
String newstr;
List<VariableDeclarator> list = n.getVariables();
//as getVariables() returns a list we need to implement that way 
for (VariableDeclarator var : list) {

    String item = var.toString();

    if (item.contains("=")) {

        if (item != null && item.length() > 0) {

            int index = item.lastIndexOf("=");
            newstr = item.substring(0, index);
            newstr = newstr.trim();
            variablename = newstr;`
            //variablename is the name of the desired variable.
        }
    } 
} 
```

# google-drive-api - 从网络服务器上传 Google Drive

> ID：13971436
> 
> 赞同：1
> 
> 时间：2012-12-20T11:41:09.150
> 
> 标签：google-drive-api

我正在尝试创建一个在网络服务器上运行的服务，并且可以将文件上传到 Google Drive，以便人们可以使用 Google 桌面应用程序将文件同步到本地驱动器。

所以我尝试了 Drive API，但它需要一个网络浏览器来进行身份验证。这是一种可能性，但我不知道以编程方式获取访问令牌。即使我有访问令牌，我也不知道它是否永远有效。它似乎有一个过期日期？我不希望服务突然不起作用，因为令牌已过期。

比我了解了服务帐户，终于让它工作了，但它似乎有自己的空间，我只能使用服务帐户访问。我不知道如何将文件从服务帐户共享到普通帐户，因为人们需要在本地同步它。

因此，a 找到了一个关于用户模拟的视频，其中他展示了一个关于授予服务帐户访问权限以模拟另一个用户的页面。但我不知道在哪里可以找到这个页面。查看： http: [//support.google.com/a/bin/answer.py](http://support.google.com/a/bin/answer.py?hl=en&answer=162106&topic=2759255&ctx=topic) ?hl=en&answer=162106&topic=2759255&ctx=topic 它说它在高级工具>管理第三方OAuth客户端访问（在身份验证部分下）。但是身份验证部分在哪里？我需要创建一个 Google 应用程序来执行此操作吗？

问题是：如何在没有任何用户干预的情况下以编程方式将文件上传到 Google Drive，以便它们可以在本地与驱动器桌面应用程序同步。

# c++ - 每个结构只允许一个没有大小的数组？

> ID：13971439
> 
> 赞同：5
> 
> 时间：2012-12-20T11:41:12.910
> 
> 标签：c++, arrays, visual-studio-2010

我正在编写一个结构来描述我需要的常量值，并注意到一些奇怪的东西。

```
namespace res{
    namespace font{
        struct Structure{
            struct Glyph{
                int x, y, width, height, easement, advance;
            };
            int glyphCount;
            unsigned char asciiMap[];   // <-- always generates an error
            Glyph glyphData[];          // <-- never generates an error
        };
        const Structure system = {95, 
                              {
                                 // mapping data
                              }, 
                              {
                                 // glyph spacing data
                              }
        }; // system constructor
    } // namespace font
} // namespace res 
```

的最后两个成员`Structure`，即未调整大小的数组，如果它们本身不停止编译器。但是如果它们*都*包含在结构的定义中，则会导致错误，说“类型不完整”

如果我给第一个数组一个大小，这不再是一个问题。在这种情况下这不是问题，但我仍然很好奇......

我的问题是，为什么我的结构中可以有一个大小不一的数组，但有两个会导致问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:51:29.737

在标准 C++ 中，您根本不能这样做，尽管一些编译器支持它作为扩展。

在 C 中， a 的每个成员都`struct`需要在`struct`. 这意味着*最后一个*成员的大小可能未知；但它之后什么都不会发生，所以没有办法拥有超过一个大小未知的成员。

如果您确实在 C++ 中利用了您的编译器对这种 hack 的非标准支持，那么请注意，如果其中的任何成员`struct`不重要，事情可能会出现可怕的错误。一个对象只能通过分配一块原始内存并将其重新解释为这种类型来“创建”最后一个非空数组；如果你这样做，将不会调用任何构造函数或析构函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T11:46:52.193

您正在使用[*非标准的 microsoft 扩展*](http://msdn.microsoft.com/en-us/library/b6fae073.aspx)。C11（注意：C，而不是 C++）允许结构中的最后一个数组没有大小（阅读：*最多*一个数组）：

> Microsoft 扩展允许 C 或 C++ 结构或类的最后一个成员是可变大小的数组。这些被称为未调整大小的数组。结构末尾的无大小数组允许您附加可变大小的字符串或其他数组，从而避免指针取消引用的运行时执行成本。
> 
> ```
> // unsized_arrays_in_structures1.cpp
> // compile with: /c
> struct PERSON {
>    unsigned number;
>    char name[];   // Unsized array
> }; 
> ```
> 
> 如果对这个结构应用 sizeof 运算符，则认为结束数组大小为 0。这个结构的大小为 2 个字节，即无符号成员的大小。要获取 PERSON 类型变量的真实大小，您需要单独获取数组大小。
> 
> 结构的大小与数组的大小相加，得到要分配的总大小。分配完毕后，将数组复制到结构体的数组成员中，如下图：

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T11:48:33.390

编译器需要能够决定结构中每个成员的偏移量。这就是为什么您不允许在未调整大小的数组之后放置*任何其他成员的原因。*由此可见，一个结构中不能有两个未调整大小的数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T11:48:47.817

它是[Microsoft 的扩展](http://msdn.microsoft.com/en-us/library/b6fae073.aspx)，并且`sizeof(structure) == sizeof(structure_without_variable_size_array)`.

我猜他们使用初始化程序来查找数组的大小。如果您有两个可变大小的数组，则找不到它（相当于找到一个只有 1 个方程的 2-unknown 系统的唯一解......）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T11:58:19.450

`struct`至少在 C++ 中，不允许在 , 句点中使用没有维度的数组。在 C 中，*最后一个*成员（并且只有最后一个）可以在没有维度的情况下声明，并且某些编译器在 C++ 中允许将此作为​​扩展，但您不应该指望它（在严格模式下，他们至少应该抱怨关于它）。如果最后一个元素的维度为 0（也是扩展，需要在严格模式下进行诊断），则其他编译器已经实现了相同的语义。

将不完整数组类型限制为最后一个元素的原因很简单：任何后续元素的偏移量是多少？即使它是最后一个元素，对结果结构的使用也有限制：例如，它不能是另一个结构或数组的成员，并且 `sizeof`忽略最后一个元素。

# eclipse - Eclipse 项目不记得方面 - 影响内容辅助

> ID：13971445
> 
> 赞同：0
> 
> 时间：2012-12-20T11:41:32.363
> 
> 标签：eclipse, jsf, primefaces

Eclipse 版本：3.7.1（靛蓝）

我正在尝试为 JSF 和 Primefaces 提供内容帮助。

为此，我右键单击我的项目 > 属性 > 项目构面

我看到了 Project Facets 屏幕。我选择：

*   动态网页模块 2.5
*   爪哇 6
*   Java 服务器端 2.0

然后提示我提供进一步的配置。我选择 src 文件夹作为构建路径的一部分，并提供一个 JSF 实现库，该库提供以下依赖项：

*   jsf-api-2.0.3
*   jsf-impl-2.0.3
*   primefaces-3.4

然后我单击确定返回到 Project Facets 屏幕。

我单击“应用”将新的 Facet 配置应用到我的 Web 项目。**蜱然后消失。**

我单击 OK 关闭 Project Facets 屏幕。

当我返回此屏幕**时，滴答声消失了**。

我相当确定这就是我对 Primefaces 和 JSF 的上下文辅助在 xhtml 页面中不起作用的原因。任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:27:53.470

事实证明，这是因为一位同事已将项目的 .classpath 和 .project 文件签入到 SCM 工具中，该工具保留/锁定了文件（在我的例子中，ClearCase）。

Eclipse 没有报告锁定，因此没有解释为什么单击“应用”时刻度会丢失。

我希望这可以帮助别人！

# perl - 如何在不使用 tmp 文件的情况下在 perl 中编辑 txt 文件中的一行

> ID：13971449
> 
> 赞同：2
> 
> 时间：2012-12-20T11:41:45.280
> 
> 标签：perl, file, edit

> **可能重复：**
> [需要 perl 就地编辑不在命令行上的文件](https://stackoverflow.com/questions/6063835/need-perl-inplace-editing-of-files-not-on-command-line)

我已经有一个可以编辑我的日志文件的工作脚本，但我使用的是一个临时文件，我的脚本是这样工作的：

```
Open my $in , '<' , $file;
Open my $out , '>' , $file."tmp";

while ( <in> ){
  print $out $_;
  last if $. == 50;
}

$line = "testing";
print $out $line;

while ( <in> ){
  print $out $_;
}

#Clear tmp file
close $out;
unlink $file;
rename "$file.new", $file; 
```

我想在不创建 tmp 文件的情况下编辑我的文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T11:47:00.500

读取所有行，然后修改要修改的行，然后将它们全部写回原始文件。您可以选择使用[File::Slurp](https://metacpan.org/module/File%3a%3aSlurp)之类的模块作为单行方法来读取和写入所有行。

例如：

```
use File::Slurp;
my @lines = read_file("yourfile.txt");
$lines[$line_number_to_modify] = "whatever\n";
write_file("yourfile.txt", @lines); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T12:09:56.903

使用就地编辑魔法：

```
#!/usr/bin/env perl
use autodie;
use strict;
use warnings qw(all);

my $file = 'test';

# setup the inplace operation
@ARGV = ($file);
# keep backup at "$file.bak"
$^I = '.bak';

# inplace editing takes over STDIN/STDOUT
while (<>){
    print;
    if ($. == 50) {
        my $line = "testing\n";
        print $line;
    }
} 
```

# html - 页面上的多个 form_fors 导致 _method 属性出现问题

> ID：13971450
> 
> 赞同：2
> 
> 时间：2012-12-20T11:41:51.140
> 
> 标签：html, ruby-on-rails, haml, rails-routing, form-for

*改写*

我有2个模型。应用程序和对话。一个应用包含多个对话

```
resources :apps do
    resources :conversations
end 
```

我有一个单一的视图，上面有 2 个表单，使用标签的表单。第一种形式用于更新应用模型。另一个用于创建或更新对话。

我遇到的问题是，当我使用 form_for 标记时，生成的 html 不会生成 _method 输入。

EG 对话表。

```
<form accept-charset="UTF-8" action="/apps/50c87614e976a31149000009/conversations" class="new_conversation ng-pristine ng-valid" id="new_conversation" method="post">

 <div style="margin:0;padding:0;display:inline">
<input name="utf8" type="hidden" value="✓">
<input name="authenticity_token" type="hidden" value="RqwwgBb737uuwg3PgRS+z0qlOP1aDqWe+2hrEeU0KHk=">
</div> 
```

申请表

```
<form accept-charset="UTF-8" action="/apps/50c87614e976a31149000009" class="edit_app ng-pristine ng-valid" enctype="multipart/form-data" id="edit_app_50c87614e976a31149000009" method="post">
<div style="margin:0;padding:0;display:inline">
<input name="utf8" type="hidden" value="✓">
<input name="_method" type="hidden" value="put">
<input name="authenticity_token" type="hidden" value="RqwwgBb737uuwg3PgRS+z0qlOP1aDqWe+2hrEeU0KHk="></div> 
```

* * *

现在让我们只关注对话模型，因为这是有问题的模型。

从上面的 html 中，您会期望 Conversation 表单应该发送一个 post 请求。不幸的是，当它被 rails 应用程序接收时，它被视为 puts 请求。

查看 form_for 的文档，我知道 form_for 应该设置一个名为 _method 的隐藏输入字段。

如果您查看 Conversation 表单并将其与 App 表单进行比较，您可以看到该会话没有 _method 属性。我无法确定这是为什么。

有没有人知道为什么这被忽略了？或者为什么当我提交对话表单时，发送的是 put 而不是 post？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:09:23.017

Rails 实现了一个 HTTP put as post 表单，其中包含一个名为的隐藏输入`_method`，其值为`put`. 您应该会看到表单中隐藏的输入被作为 PUT 请求处理。

`form_for`当它为其创建表单的对象已经存在时，将生成一个放置表单。

# python - 从 Python 创建 tar 未按预期工作

> ID：13971457
> 
> 赞同：1
> 
> 时间：2012-12-20T11:41:59.713
> 
> 标签：python, archive, tar

我正在尝试从存储在名为 archive_list 的 Python 列表中的一堆文件中创建一个 tar 存档。在此代码运行时，archive_files 包含要归档的文件列表及其完整路径。

```
tarname = tar_path + "/" + client_id + "_" + dt.datetime.now().strftime("%Y%m%d_%H%M%S") + ".tar.gz"
tar = tarfile.open (tarname, "w:gz")
for name in archive_list:
  print "Adding %s" % (name)
  tar.add(name)
tar.close 
```

当我运行它时，它会创建一个存档，但它是不可读的。我四处搜索，但看不出这段代码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:43:50.213

一个问题是您在 之后缺少括号`close`：

```
tar.close()
         ^^ 
```

# android - 从服务器检索数据作为android中的xml时，仅在真实设备中出错

> ID：13971458
> 
> 赞同：-1
> 
> 时间：2012-12-20T11:42:00.387
> 
> 标签：android, xmlhttprequest

我目前正在编写一个程序来从服务器获取数据作为 xml 文件并将其存储在一个简单的数据库中并在谷歌地图上显示位置

我为 android 2.2 开发了该应用程序，并在模拟器中使用 android ICS 对其进行了测试。它按我的预期工作，但是当我在运行 android 4.04 的 android 设备上尝试时，应用程序卡住了

如果您知道为什么会发生这种情况，请帮助我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:33:05.137

这个问题有两个解决方案，但我建议您使用第一个解决方案，因为第二个解决方案仅用于隐藏问题。

1）不要在主 UIThread 中编写网络调用，为此使用异步任务。

2) 在 setContentView(R.layout.activity_main); 之后将以下代码写入 MainActivity 文件；

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并将下面的 import 语句放入您的 java 文件中。

```
import android.os.StrictMode; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T05:41:27.007

@arcastro、@Stephan Celis、@Egor 和 @Mohan 非常感谢您的帮助。你所有的想法对我帮助很大。我添加了一个单独的线程来连接到网络并下载数据@Egor 你的问题让我意识到我做错了什么

谢谢你们

对于遇到相同问题的开发人员，我确实听说过我是如何做到的

在您的班级中放置在“updateHandler”代码下方

```
 private Handler updateHandler = new Handler()
   {
       @Override
       public void handleMessage(Message msg)
       {
           if (msg.what == -999)
           {
            Log.d("recieve data","from http://jayanga.esplprojects.com/xx/data.xml to update");
                     DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                     String xml = XML.getXML("http://jayanga.esplprojects.com/xx/data.xml");

                     Document doc = XML.XMLfromString(xml);
                    int numResults = XML.numResults(doc);

                     if((numResults <= 0)){
                            Toast.makeText(getApplicationContext(), "SORRY No data were found", Toast.LENGTH_LONG).show();  
                            finish();
                     }//if((numResults <= 0))

                     NodeList nodes = doc.getElementsByTagName("result");

                     for (int i = 0; i < nodes.getLength(); i++) {                          

                            Element e = (Element)nodes.item(i);
                        //  String s = "...."+XML.getValue(e, "name");
                            // Inserting Contacts
                            Log.d("Insert: ", "Inserting ..");
                            db.addContact(new Details(XML.getValue(e, "name"),Double.parseDouble( XML.getValue(e, "latitude"))
                                    , Double.parseDouble(XML.getValue(e, "longitude")),XML.getValue(e, "contact") ));

                     }// for (int i = 0; i < nodes.getLength(); i++)
                     db.close();
                     Toast.makeText(getApplicationContext(), "Database Successfully Updated", Toast.LENGTH_LONG).show();
                     displayLocations();
           }
       }
   }; 
```

然后从要运行线程的位置调用 updateHandler

```
int get_update_data = -999;
            Message theMessage = updateHandler .obtainMessage(get_update_data);
            updateHandler.sendMessage(theMessage);//Sends the message to the UI handler. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-20T12:39:04.090

从android 2.3版本严格模式开发，它不会允许来自服务器的xml文件等数据，然后你可以添加一些代码。

```
 if (android.os.Build.VERSION.SDK_INT > 8) {

                           StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                                           .permitAll().build();
                           StrictMode.setThreadPolicy(policy);

                   }

if you can add the above code then you can check in 4.0 version mobile, it will work happy. 
```

# java - com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException：连接太多

> ID：13971460
> 
> 赞同：4
> 
> 时间：2012-12-20T11:42:09.697
> 
> 标签：java, jsp, jdbc

我的简单网络应用程序在浏览网站时有时会崩溃，我从日志中得到的错误消息如下所示。我完全不知道是什么原因造成的，并且非常感谢任何能引导我走向正确方向的提示。

```
HTTP Status 500 - org.hibernate.exception.JDBCConnectionException: Cannot open connection 
```

类型异常报告

```
message org.hibernate.exception.JDBCConnectionException: Cannot open connection

description The server encountered an internal error that prevented it from fulfilling this request.

exception
org.apache.jasper.JasperException: org.hibernate.exception.JDBCConnectionException: Cannot open connection
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:470)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

根本原因

```
org.hibernate.exception.JDBCConnectionException: Cannot open connection
    org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:97)
    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:52)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:449)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
    org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1573)
    org.hibernate.loader.Loader.doQuery(Loader.java:696)
    org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
    org.hibernate.loader.Loader.doList(Loader.java:2228)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2125)
    org.hibernate.loader.Loader.list(Loader.java:2120)
    org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:118)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1596)
    org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:306)
    com.html.XmlSetting.getListOfhtml_connect(XmlSetting.java:55)
    com.html.XmlSetting.removeXml(XmlSetting.java:121)
    com.html.MarginSetting.removeXml(MarginSetting.java:291)
    org.apache.jsp.check_jsp._jspService(check_jsp.java:183)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

根本原因

```
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Too many connections
    sun.reflect.GeneratedConstructorAccessor153.newInstance(Unknown Source)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    com.mysql.jdbc.Util.getInstance(Util.java:381)
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:985)
    com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957)
    com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3376)
    com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3308)
    com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:894)
    com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3808)
    com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1256)
    com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2032)
    com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:729)
    com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:46)
    sun.reflect.GeneratedConstructorAccessor145.newInstance(Unknown Source)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    com.mysql.jdbc.Util.handleNewInstance(Util.java:406)
    com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:302)
    com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:283)
    java.sql.DriverManager.getConnection(DriverManager.java:620)
    java.sql.DriverManager.getConnection(DriverManager.java:169)
    org.hibernate.connection.DriverManagerConnectionProvider.getConnection(DriverManagerConnectionProvider.java:133)
    org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)
    org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)
    org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
    org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1573)
    org.hibernate.loader.Loader.doQuery(Loader.java:696)
    org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:259)
    org.hibernate.loader.Loader.doList(Loader.java:2228)
    org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2125)
    org.hibernate.loader.Loader.list(Loader.java:2120)
    org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:118)
    org.hibernate.impl.SessionImpl.list(SessionImpl.java:1596)
    org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:306)
    com.html.XmlSetting.getListOfhtml_connect(XmlSetting.java:55)
    com.html.XmlSetting.removeXml(XmlSetting.java:121)
    com.html.MarginSetting.removeXml(MarginSetting.java:291)
    org.apache.jsp.check_jsp._jspService(check_jsp.java:183)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:728) 
```

我正在使用 Apache Tomcat 7

**休眠.cfg.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>

        <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/htmlcleaner</property>
        <property name="hibernate.connection.password">root</property>
        <property name="hibernate.connection.username">root</property>

        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="hibernate.connection.zeroDateTimeBehavior">convertToNull</property>

        <property name="connection.pool_size">1000</property>

       <!--  <property name="show_sql">true</property> -->
        <mapping class="com.model.html_connect"/>

    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:47:09.020

它清楚地看到休眠无法创建或打开与数据库的连接，可能有很多原因

1.  使用会话后您未在程序中关闭会话
2.  连接池很小，访问池的线程太多。

请粘贴您的配置和异常点程序

添加

```
<property name="hibernate.connection.release_mode">on_close</property> 
```

属性并调用 session.close(); 在你的方法结束时

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:49:34.967

造成这种情况的可能原因是您的 Web 应用程序可能正在泄漏连接或连接池大小非常小，因此当前正在使用所有打开的连接并且无法获取新连接。

我不确定 Tomcat 但在 JBoss 中，我们通常指的是数据源文件，您可以将连接池大小设置为

```
 <max-pool-size>80</max-pool-size> 
```

您甚至可以登录到 Tomcat 的管理控制台，并在遇到此异常时检查实际使用了多少连接。管理控制台将为您提供有史以来创建的最大连接对象以及与连接池相关的各种其他信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T11:55:38.043

看起来您正在大量泄漏连接。当你完成它们时，你是否正在关闭你的休眠会话？

您也可以尝试使用`hibernate.connection.release_mode`，默认情况下，它设置为 auto ，它会在您关闭会话时释放连接。但是，您也可以在此处使用`after_transaction`或选项`after_statement`（当它将释放两个 :P 中的每一个的连接时，它是不言自明的）。

尽管如此，您确实需要找出泄漏的位置:)

# c# - SQL Server 的连接字符串

> ID：13971461
> 
> 赞同：1
> 
> 时间：2012-12-20T11:42:10.277
> 
> 标签：c#, sql, sql-server, ado.net

我的电脑上安装了 xampp。我正在尝试使用 ADO.Net 访问数据。我正在使用的连接字符串如下所示：

```
string connectionString = "Server = localhost; Database = magento; User Id = magento; Password = abcd;";
SqlConnection con = new SqlConnection(connectionString);
string cmdString = "SELECT date_added,title,description,url FROM adminnotification_inbox";
SqlDataAdapter da = new SqlDataAdapter(cmdString, con);
ds = new DataSet();
da.Fill(ds,"prog");
dt = ds.Tables["prog"];
currRec = -1;
totalRec = dt.Rows.Count;
button3.Enabled = true; 
```

我可以在 phpmyadmin 中使用上述用户名和密码登录，但无法使用上述连接字符串访问数据库。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:46:51.853

MySQL 有自己的 ADO.NET 连接器： http: [//dev.mysql.com/downloads/connector/net/6.6.html#downloads](http://dev.mysql.com/downloads/connector/net/6.6.html#downloads)

如果你使用它，你可以创建一个 MySqlConnection：[http ://dev.mysql.com/doc/refman/5.5/en/connector-net-tutorials-intro.html](http://dev.mysql.com/doc/refman/5.5/en/connector-net-tutorials-intro.html)

基本的 SqlConnection 用于 Microsoft 自己的 SQL Server 产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T00:43:21.033

14 年 9 月 22 日 - 如果您不这样做，希望其他人能看到：

我相信你的连接字符串中需要一个驱动程序。“MySQL ODBC 3.51 Driver”是 Window 的驱动程序名称。

string connectionString ="Driver={MySQL ODBC 3.51 Driver}; SERVER= .... 好的，把剩下的连接字符串放在这里。

注意：这是使用 MS Access VBA 连接到 MySQL 数据库的字符串：

担

# php - 在 PHP 中将代码拆分为头文件/源文件

> ID：13971467
> 
> 赞同：2
> 
> 时间：2012-12-20T11:42:35.643
> 
> 标签：php

在 C++ 中，每个类都有一个`.h`文件和一个`.cpp`文件，这在 PHP 中可能吗？

我想要这个的原因是，当我将我的类文件给另一个人使用它时，我不希望他查看我的源代码，

我只希望他在不查看源代码的情况下使用课程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:44:30.540

不，PHP 没有等效的头文件。您可能想要[http://www.ioncube.com](http://www.ioncube.com)或[http://www.zend.com/en/products/guard/](http://www.zend.com/en/products/guard/)之类的东西。

不过，在走这条路之前，请先问问自己*为什么*要这样做。

# asp.net - ASP.NET 网站中的深度优先嵌套路由

> ID：13971468
> 
> 赞同：4
> 
> 时间：2012-12-20T11:42:36.790
> 
> 标签：asp.net, routing, depth-first-search

我一直在探索[`System.Web.Routing`](http://msdn.microsoft.com/en-us/library/system.web.routing.aspx)命名空间，使用约束等，但我看不到实现这一点的方法。

我正在使用 WebPages/Razor 框架开发 ASP.NET 网站（*非 WAP、非 MVC ）。*

我正在尝试实现一种“嵌套路由”形式，其中路由可以包含仅在父匹配时才尝试的子路由；每个孩子都试图匹配 URI 的“剩余部分”。一个“深度优先”的路线匹配搜索，如果你愿意的话。

```
routes.Add(new ParentRoute("{foo}/{*remainder}", new[] {
    new ParentRoute("{bar}/{*remainder}", new[] {
        new Route("{baz}"),
        new Route("{zip}"),
    }),
    new ParentRoute("{qux}/{*remainder}", new[] {
        new Route("{baz}"),
        new Route("{zip}"),
    }),
)); 
```

为简洁起见，我排除了必要的约束/处理程序（*以及其他参数*）。

在任何情况下，通过树向下的每一步都将匹配`{*remainder}`URI 的尾部。如果一个分支失败，它会向上移动到下一个，本质上是测试类似的东西：

```
foo
  foo/bar
    foo/bar/baz
    foo/bar/zip
  foo/qux
    foo/qux/baz
    foo/qux/zip 
```

现在，我当然不是在问“请写代码”，而是在正确方向上的一种姿态。

为了开始实现这样的功能，我想在哪里查看 API？我可以找到无数关于编写路由、约束等的教程和信息，但在扩展路由引擎方面却找不到。

* * *

**附录**
^(我将继续添加为认股权证)

1.  请注意，我知道从这样的“路由树”生成 URL 会很复杂；这不是我打算实施的事情。

2.  ~~我刚刚意识到一种迭代路线生成就足够了；所以我想我会尽快将其作为可能的答案发布。~~不，它不会。边缘情况太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:57:27.920

我有以下代码，但有一点我不确定你想如何处理它：你知道最多有多少孩子可以拥有一条路线吗？

在 Global.asax 中：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.Add(new Route("test/{path}", new RouteValueDictionary { { "path", string.Empty } }, new TestingRouteHandler()));
    } 
```

TestingRoutHandler 类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Web.Routing;
using System.Web;
using System.Web.UI;
using System.Web.Compilation;

namespace WebApplication1
{
    class TestingRouteHandler : IRouteHandler
    {
        public IHttpHandler GetHttpHandler(RequestContext requestContext)
        {
            //This is where you should treat the request, test if the file exists and if not, use the parent part of the url
            string aspxFileName = string.Format("~/{0}.aspx", requestContext.HttpContext.Request.Url.PathAndQuery.Replace("/", string.Empty));

            return (IHttpHandler)BuildManager.CreateInstanceFromVirtualPath(aspxFileName, typeof(Page)) as Page;
        }
    }
} 
```

# python - Python - 跨 WAN 链接查询/控制多个主机？

> ID：13971471
> 
> 赞同：0
> 
> 时间：2012-12-20T11:42:46.237
> 
> 标签：python, twisted, celery, tornado

我们在多个国家（日本、香港、新加坡等）设有多个数据中心。

我们在每个位置的多台主机上运行应用程序 - 总共可能大约 50-100 台主机。

我正在编写一个 Python 脚本，该脚本查询每个应用程序的状态，向它们发送各种触发器，并在运行时从它们中检索其他内容。可以想象，该脚本可以查询中央服务器，然后中央服务器将请求发送到每个主机上运行的代理。

要求之一是脚本尽可能响应 - 例如，如果我查询所有位置的所有主机上的应用程序状态，我希望在 1-3 秒内得到结果，而不是 20-30 秒。

因此，按顺序查询每个主机会太慢，特别是考虑到我们需要进行的 WAN 跃点。

我们可以假设对每个主机本身的查询是相当微不足道的（例如进程是否正在运行）。

我对并发编程或异步编程相当陌生，所以在这里会重视任何输入。解决这个问题的“最佳”方法是什么？

*   使用多线程或多进程方法 - 例如为每个主机生成一个新线程，将它们全部发送出去，然后等待回复？
*   使用 asyncore、twisted、tornado - 任何适合此处的评论？（我的印象是 asyncore 并不那么受欢迎。Tornado 尝试起来可能很有趣，但不确定如何在这里使用它？）
*   使用某种消息队列（例如 Kombu/RabbitMQ）？
*   不知何故用芹菜？对于我们想要的响应时间，它是否足够响应？（例如，上述情况不到 3 秒）。

干杯，维克多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:56:06.223

# 使用[`gevent`](http://www.gevent.org/intro.html#installation).

## 如何？

```
from gevent import monkey; monkey.patch_socket() # So anything socket-based now works asynchronously. 
#This should be the first line of you code!
import gevent

def query_server(server_ip):
    # do_something with server_ip and sockets

server_ips = [....]
jobs = [gevent.spawn(query_server, server_ip) for server_ip in server_ips]
gevent.joinall(jobs)
print [job.result for job in jobs] 
```

## 何苦？

*   您的所有代码都将在**单个进程和单个线程中**运行。这意味着您不必为锁、信号量和消息传递而烦恼。
*   您的任务似乎主要是网络绑定的。Gevent 将**允许您异步执行网络绑定工作**，这意味着您的代码不会忙于等待网络连接，而是让操作系统在收到数据时通知它。
*   这是个人喜好，但我认为这`gevent`是**你想做一次性工作时最容易使用的异步库**。（例如，您不必开始`reactor`a-la `twisted`）。

## 它会起作用吗？

响应时间将是您最慢的服务器的响应时间。
如果使用`gevent`不这样做，那么你将不得不修复你的网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:53:30.470

使用[`multiprocessing.Pool`](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)，尤其是`map()`or`map_async()`成员。

编写一个接受单个参数的函数（例如主机名，或主机名和其他数据的列表/元组。让该函数查询主机并返回相关数据。

现在计算输入变量（主机名）的列表，并使用`multiprocessing.Pool.map()`或`multiprocessing.Pool.map_async()`并行执行函数。该`async`变体将更快地开始返回数据，但您可以在回调中执行的工作量是有限的。

这将自动使用与您的机器一样多的内核来并行处理这些功能。

但是，如果存在网络延迟，python 程序对此无能为力。

# jpa - 将实体映射到表时如何实现过滤器？

> ID：13971473
> 
> 赞同：0
> 
> 时间：2012-12-20T11:42:48.787
> 
> 标签：jpa, entity, filtering

正如本文档中提到的

> [http://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics#Filters](http://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics#Filters)

如何实现过滤数据？这与继承无关。我想根据某些条件将我的对象映射限制为仅行的子集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:46:04.603

对此没有标准的 JPA 支持。

如果您使用的是 EclipseLink，您可以使用@AdditionalCriteria 或@Multitenent，

看，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_additionalcriteria.htm#additionalcriteria](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_additionalcriteria.htm#additionalcriteria)

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_multitenant.htm#BABIEJGD](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_multitenant.htm#BABIEJGD)

您还可以在数据库中使用视图。

# eclipse - 记录在 CVS 中提交了什么的用户详细信息，即使用户不想输入评论

> ID：13971476
> 
> 赞同：0
> 
> 时间：2012-12-20T11:43:02.287
> 
> 标签：eclipse, repository, cvs

我们使用 CVS 进行版本控制以及提交和获取项目中的更改。我们经常面临以下问题：- CVS 集成在 Eclipse 中。

> 1.  由于团队很大，人们经常提交并且不写评论来说明谁实际提交了它。当有人更改代码并且该人的身份未知时，这会产生很大的问题。

是否有任何方法可以捕获在 CVS 中提交任何内容的用户的详细信息，无论他是否愿意。这样，即使有人在没有通知任何人的情况下更改了存储库中的任何内容，也可以找出该人所做的更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:48:49.443

CVS 记录与每个提交关联的用户 ID。设置用户/密码是 CVS 管理员的任务。多种身份验证方案是可能的（例如针对底层操作系统进行身份验证，或针对文件进行身份验证），但归根结底，用户必须“登录”到 CVS 存储库才能使用它。

因此，只要您的 CVS 管理员设置了适当的身份验证，每个用户都将拥有自己的用户 ID 和密码来登录 CVS。

尝试`cvs log`对文件执行，您将看到修订号列表以及所有提交者的详细信息。

如果您的 CVS 存储库*没有*设置正确的身份验证，那么在某种程度上，您就是在自找麻烦。通过允许人们在没有正确识别自己的情况下提交代码，您放弃了......识别提交者的可能性。

如果您想检查您的 CVS 服务器是如何安全配置的，请尝试查看您自己是如何访问您的 CVS 服务器的。首先查看`CVSROOT`环境变量（如果您从命令行工作），或者 - 如果您通过 IDE 工作 - 查看 CVS 连接的设置。我很难相信您*可以*连接到组织中的 CVS 服务器，而无需真正知道*如何*操作。

# php - AJAX POST：回显发布的锚标记值

> ID：13971478
> 
> 赞同：1
> 
> 时间：2012-12-20T11:43:14.347
> 
> 标签：php, jquery

HTML/jQuery:

```
<a href=# id="friends">Friends</a>
<script type="text/javascript">
    $(document).ready(function() {
        $('a#friends').click(function() { 
            $.ajax({
                type: "POST",
                url: "data.php",
                data:  $('#friends').html(),
                success: function(data) {
                    $('#questions').html(data);
                },
                dataType: "HTML"
            });
        });
    });
</script> 
```

数据.php：

```
<?php
    echo $_POST['#friends'];
?> 
```

如何`POST`在锚标记中返回这个 id 值？该变量正在传递给 PHP，因为我可以提醒它，但问题是让它回来。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:45:27.717

您需要在 AJAX 请求中指定要发送的值的名称。尝试这个：

```
$.ajax({
    type: "POST",
    url: "data.php",
    data:  { 'friends': $('#friends').html() }, // Note the value is sent in an object with a key of 'friends'
    success: function(data) {
        $('#questions').html(data);
    },
    dataType: "HTML"
}); 
```

```
<?php
    echo $_POST['friends']; // retrieve the 'friends' value
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:45:57.467

您如何将数据传递给 PHP，

请使用以下代码，

```
<a href=# id="friends">Friends</a>
<script type="text/javascript">

    $(document).ready(function() {
    $('a#friends').click(function() { 
        $.ajax({
            type: "POST",
            url: "data.php",
            data:  {'friends' : $('#friends').html()},
            success: function(data) {
                $('#questions').html(data);
                },
            dataType: "HTML"
        });
    });

</script>

<?php
   echo $_POST['friends'];
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:46:04.613

将朋友值传递给 data.php 的语法错误

尝试这个

```
$(document).ready(function() {
    $('a#friends').click(function() { 
        $.ajax({
            type: "POST",
            url: "data.php",
            data: "friends="+$('#friends').html(),
            success: function(data) {
                $('#questions').html(data);
                },
            dataType: "HTML"
        });
    });

<?php

echo $_POST['friends'];

?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T11:46:34.493

首先你不能以这种方式向ajax页面发送数据

```
data:  $('#friends').html(), 
```

更合适的方式是

```
data : {'key1':'val1', 'key2':'val2'} 
```

然后在php页面上，你可以用这种方式检索这些值

```
$key1 = $_POST['key1']; // will contain 'val1'
$key2= $_POST['key2']; // will contain 'val2' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T11:54:44.097

或者你可以使用

```
<a href=# id="friends">Friends</a>
<script type="text/javascript">
    $(document).ready(function() {
        $('a#friends').click(function() { 
            $.post("data.php",{
                friends: $("#friends").html()
            },function(data){
                $("#questions").html($.trim(data)); // trim to be sure
            });
        });
    });
</script> 
```

在php中：

```
<?php
   echo $_POST['friends'];
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T12:03:09.127

在数据字段中传递数据变量。有关更多信息，请参见下面的示例

```
$(document).ready(function() {
    $('a#friends').click(function() { 
        alert("");
        $.ajax({
            type: "POST",
            url: "data.php",
            data:  "#friends="+$('#friends').html(),
            success: function(data) {
                alert(data);
                $('#questions').html(data);
                },
            dataType: "HTML"
        });
    });
    }); 
```

# ubuntu-12.04 - Errno::ENOENT：没有这样的文件或目录 - /~/.vmc/target

> ID：13971479
> 
> 赞同：0
> 
> 时间：2012-12-20T11:43:16.697
> 
> 标签：ubuntu-12.04, cloud-foundry

我已经在我的**Ubuntu 12.04中安装了****cloudfoundry**和**ruby​​ 1.9.3**。我还创建了一个带有**VM**的隧道。但是当运行这个命令时，我会遇到这个错误： ******`vmc target api.vcap.me``http://api.vcap.me... FAILED CFoundry::TargetRefused: target refused connection (Connection refused - connect(2)) For more information, see ~/.vmc/crash`******

 ******此外，当我运行命令时：`vmc target`我收到此错误： `Errno::ENOENT: No such file or directory - /home/sellami/.vmc/target`

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T15:48:35.687

尝试设置目标 URL，例如执行命令：

```
prompt$vmc target http://api.cloudfoundry.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T15:25:38.677

我建议您向 Google Group vcap-dev 咨询任何相关问题。[https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev)******

# java - 用于摇摆/awt 组件的 fest-swing 和包装器

> ID：13971481
> 
> 赞同：1
> 
> 时间：2012-12-20T11:43:18.320
> 
> 标签：java, swing, gui-testing, fest, gui-test-framework

我想用[fest-swing](http://fest.easytesting.org/)测试 GUI 客户端，但是......基于自定义层的客户端，它包装了 Swing 组件。问题是我的自定义 gui 组件不继承自 swing 组件，而是由它们组合而成（图层的作者更喜欢[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)）。

所以现在我可以使用 fest-swing 编写测试，测试启动客户端，但我无法引用任何框架、组件、对话框、窗口，因为我的 ui 组件不是标准 swing/awt 组件的子类。我被困在这里。我现在正在阅读[fest-swing 代码](https://github.com/alexruiz/fest-swing-1.x)，似乎我不能在我的情况下使用这个库，因为 fest-swing 使用泛化和子类型（继承）:(

你们中有人遇到过这个问题吗？有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:47:01.663

您是否阅读过有关为您的 onw GUI 组件[创建新 Fixture 的文档文章？](http://docs.codehaus.org/display/FEST/Extending+FEST-Swing)

引用文章第 2 章：

如果自定义 GUI 组件没有扩展任何 JDK Swig 组件，或者如果您更喜欢从头开始创建 FEST 夹具，请阅读以下内容：扩展[ComponentFixture](http://fest.easytesting.org/swing/apidocs/org/fest/swing/fixture/ComponentFixture.html)。此类提供用于测试的 GUI 组件和机器人的所有必要连接。它还提供了一些非常基本的功能和方便的方法。

我没有尝试过，但这应该可以帮助您解决问题。

# java-me - 在 J2ME 中，是否可以使用 Yes & NO 命令来操作 Alert 对话框？

> ID：13971487
> 
> 赞同：1
> 
> 时间：2012-12-20T11:43:32.517
> 
> 标签：java-me, midp, lcdui

我在我的 J2ME 应用程序中创建了一个警报对话框，以在用户按下退出按钮终止应用程序时提醒用户，并要求用户确认以使用是和否命令退出应用程序。

当用户按下是按钮应用程序将终止，当用户按下否按钮应用程序将返回其主窗体。为此，我从头开始开发了一个代码，如下所示：

```
public class CustomAlert extends MIDlet implements CommandListener  
{
    Alert ExitAlrt;
    Display d;
    Command MainListSelect, Exit, YesCmdAlrt, NoCmdAlrt;
    List MainList;

public CustomAlert()
{
            d = Display.getDisplay(this);

            //Initialization of commands
    MainListSelect = new Command("Select", Command.SCREEN, 1);
    Exit = new Command("Exit", Command.STOP, 2);

    //Initialization of lists
    MainList = new List("Menu", List.IMPLICIT);

            //Adding command to lists
    MainList.addCommand(MainListSelect);
    MainList.addCommand(Exit);
    MainList.setCommandListener(this);

           //Appending the content of lists
    MainList.append("Settings",null);          
    }
    protected void startApp()
    {   
            MainList.setSelectedIndex(0, true);
            d.setCurrent(MainList);
    }
    protected void pauseApp() { }
    protected void destroyApp(boolean unconditional){}

    //This method handle commands which operate list that is Select & Exit
    public void commandAction(Command cmd,Displayable dispable)         
    {
       if(cmd == MainListSelect)
       {
         int slctindx = MainList.getSelectedIndex();
         if(slctindx == 0)
         {}
        else if(slctindx == 1)
        {} 
    }
    if(cmd == Exit)
    {
        ExitAlrt = new Alert("Application Alert","Are you sure you want to exit?",null, AlertType.WARNING);
        YesCmdAlrt = new Command("Yes", Command.EXIT,1);
        ExitAlrt.addCommand(YesCmdAlrt); 
        NoCmdAlrt = new Command("No", Command.SCREEN,2);
        ExitAlrt.addCommand(NoCmdAlrt);
        d.setCurrent(ExitAlrt);
    }
}

//This Code handle Commands present on Alert dialog box. 
public void commandAction(Command cmd)  /
{
        ExitAlrt.setCommandListener(this);
        if(cmd == NoCmdAlrt)
        {
            d.setCurrent(MainList);
        }
        else if(cmd == YesCmdAlrt)
        {   
            destroyApp(true);
            notifyDestroyed();
        }
  }
} 
```

在上面的代码问题中，当我单击退出按钮时，会出现警报框，当我按是按钮终止应用程序时，它会再次在应用程序的主列表中重定向到我。我在代码中做了很多放置，但问题仍然存在。

什么是解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:00:37.503

`ExitAlert`在发布的代码片段中缺少命令侦听器，因为您没有调用`setcommandListener`它。结果，不是预期的退出，而是发生默认命令操作，即简单地关闭警报，如[API javadocs](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/Alert.html#commands)中所述：

> 如果用户调用命令并且存在默认侦听器，则默认侦听器会忽略命令并实现自动提前行为。

请注意，您可能认为`ExitAlrt.setCommandListener(this)`inside`commandAction(Command cmd)`方法可以为您解决问题，但事实并非如此，因为在创建`ExitAlrt`实例和显示实例之间不会调用此方法。

* * *

`ExitAlrt`要获得所需的行为，请在调用之前实现并设置适当的命令侦听器`setCurrent`。

```
 // ...
    if(cmd == Exit)
    {
        System.out.println("Exit command invoked"); // log message for debugging
        Alert ExitAlrt = new Alert("Application Alert",
                "Are you sure you want to exit?", null, AlertType.WARNING);
        ExitAlrt.addCommand(new Command("Yes", Command.EXIT, 1)); 
        ExitAlrt.addCommand(new Command("No", Command.SCREEN, 2));
        // --> set command listener for ExitAlrt prior to invoking setCurrent
        ExitAlrt.setCommandListener(new CommandListener() {
            public void commandAction(Command c, Displayable d) {
                System.out.println("command: [" + c.getCommandLabel()
                        + "] at screen: [" + d.getTitle() + "]"); // for debugging
                if (c.getCommandType() != Command.EXIT) {
                    System.out.println("Exit cancelled"); // for debugging
                    d.setCurrent(MainList);
                    return;
                }
                System.out.println("Exit confirmed"); // for debugging
                destroyApp(true);
                notifyDestroyed();
            }
        });
        d.setCurrent(ExitAlrt);
    }
    // ... 
```

为简单起见，上面的代码片段`System.out.println`用于记录。如果需要，请参阅[另一个 SO 问题](https://stackoverflow.com/a/13932314/839601)以获取有关如何以更实际的方式完成此操作的解释和示例。

# db2 - 当所有字段都重复时，如何删除db2中的重复行？

> ID：13971488
> 
> 赞同：0
> 
> 时间：2012-12-20T11:43:38.967
> 
> 标签：db2, duplicates

我有一张桌子：

```
 A
 1
 1
 1
 2 
```

我想变成

```
 A
 1
 2 
```

我怎么可能做到？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:19:16.180

应该可以通过使用 ROW_NUMBER [OLAP 函数](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0011043.html)对重复项进行编号来直接删除：

```
DELETE FROM (
    SELECT A, ROW_NUMBER() OVER (PARTITION BY A) AS RN
    FROM my_table
)
WHERE RN > 1 
```

在编写上述内容时，我依赖于[这个讨论。](http://www.experts-exchange.com/Database/DB2/Q_26333301.html)

# python - PyQt：如何创建自定义滚动区域？

> ID：13971489
> 
> 赞同：1
> 
> 时间：2012-12-20T11:43:45.843
> 
> 标签：python, qt, user-interface, pyqt

我对 GUI 编程和 Qt 本身还是很陌生，尽管在 HTML、CSS 和 JS（用于 UI 设计）方面有很多经验。

我什至很难理解使用 Qt 设计自定义数据显示元素的基础知识。

*   如何创建一个包含自定义矩形数据显示元素的可滚动区域？我只想要一个带有背景图像的滚动区域，并且我希望它填充相同数据查看项的一个或多个副本，该副本具有 2 个标签（如 twitter）、一个背景图像和一些按钮。

我已经做了几天的研究，但找不到任何例子。

*   我应该使用 Qt Designer 设计一个“小部件”吗？那么我如何将该 .ui 作为小部件加载并操作其上的标签？

![例子](../Images/f1b992517e5c487a6584b05557f1c8e3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T10:45:00.667

为了将来参考，“非常自定义”的方法如下：

创建一个 QScrollArea。在其中放置一个小部件（例如 QWidget）为 QScrollArea 的小部件创建一个布局，这将是一个滚动。

根据需要设置 QScrollArea 和里面的 Widget 样式。

将自定义小部件放置在布局内。

为 QScrollArea 设置自动滚动等，以便它可以根据需要调整大小和显示元素。

# ios - 在 IOS 6.0 或 iPhone 中上传时自动旋转拍摄的照片

> ID：13971491
> 
> 赞同：19
> 
> 时间：2012-12-20T11:43:59.700
> 
> 标签：ios, image, file-upload, form-submit

我有一个使用它的 HTML 文件控件，我正在尝试在服务器上上传文件。

*   点击文件控制
*   它将自动打开文件/相机选择对话框。
*   我选择相机
*   我拍了照片并保存
*   现在提交表格
*   Capture 照片成功保存在服务器上，但旋转了 90 度。

**此问题仅适用于 iPhone 或 IOS。**

```
<input id="image" name="image" type="file" accept="image/*" capture style="width: 58px" /> 
```

请告诉我，如果从相机拍摄，如何停止图像的自动旋转。

谢谢， 伊姆达杜森

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-20T14:55:10.770

这可能与图像中的 EXIF/TIFF 元标记有关。

这些标签之一指示图像的方向。您上传到服务器的某些照片（例如从 iPhone 上传）可能有这些标签，而其他照片（来自不同的来源/工作流程）可能没有。服务器可能会或可能不会保留这些标签，并且可能会或可能不会读取标签以尝试正确定位图像。同样，网络浏览器可能会也可能不会关注这些标签。如果你上传包含标签的图片，结果肯定是不可预知的。

找出这是否是问题的一个好方法是从服务器下载一个“问题”图像和一个“好”图像，然后比较它们。在预览中打开它们并检查检查器的第二个选项卡。任何元信息都将显示在那里。查看一张图片是否有方向信息，而另一张没有。如果两者都没有显示元信息，那么很可能服务器将其全部剥离而不使用它，您可以忘记这个答案。

此外，您应该在不同的浏览器中进行比较。一些浏览器会读取此方向信息并相应地旋转图像，而其他浏览器则不会。

例如，我的一张 iPhone 以纵向模式拍摄的照片具有以下元标记：

*   像素高度：2,448
*   像素宽度：3,264
*   方向：6（逆时针旋转 90°）

本机位图方向是*横向*。
“方向”元标记指示图像读取软件旋转到*纵向*以进行显示。

（某些）图像软件使用元标记将图像“正确”旋转为纵向，但被其他将图像显示为横向的软件忽略。

这种情况令人困惑，并且对此没有既定标准（标签只是一个提示），因此在为在线出版物准备图像时，最安全的做法是去掉这些标签，然后在上传之前将图像物理旋转到正确的 BITMAP 方向. 如果您正在编写应用程序的服务器端，则可以在服务器上执行此操作。但是，以正确的*BITMAP*方向将图像传送到 Web 浏览器至关重要，并且没有方向元标记。

为什么是这样？因为即使在今天，不同的浏览器也对元标记采取不同的方法。

我刚才提到的 iPhone 图片显示如下：
Google Chrome 24**纵向**
Safari 6 **纵向**
Firefox 17**横向**
Opera 12**横向**

不是一个伟大的事态！

# c# - 删除后如何将面板正确放入表单中？

> ID：13971492
> 
> 赞同：0
> 
> 时间：2012-12-20T11:44:00.260
> 
> 标签：c#, winforms

我希望这是一个简单的任务，但我需要一些帮助。

```
 SomeForm f = new SomeForm();

  if (someStatement) // relocate pnlRight onto new form f
        {
            this.Controls.Remove(pnlRight);
            f.Controls.Add(pnlRight);

            pnlRight.Location = new Point(0, 0); // I want to place pnlRight at (0, 0) on the new form f
            this.pnlRight.Visible = false;
            f.Show();
        }
  else // hide form and relocate pnlRight onto main form
        {
            this.pnlRight.Location = new Point(pnlLeft.Location.X + pnlLeft.Width + 10, pnlLeft.Location.Y);
            this.Controls.Add(pnlRight);
            this.pnlRight.Visible = true;

            frmSettings.Hide();
        } 
```

所以 - 我有一个带有两个面板的主窗体：pnlLeft 和 pnlRight。单击按钮时（此处如果 someStatement 为真）pnlRight 应重新定位在新创建的表单上。完美运行。但是：如果我再次将 pnlRight 重新定位到主窗体上，它不会放在我想要的位置，而是放在 pnlLeft 上方的 (0, 0) 处。怎么了？我检查了两个面板的属性，看不到任何赔率。也许有人对我有暗示，

最佳丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:50:50.130

如果表单中有 2 个面板，则需要按照要显示它们的顺序设置两个面板的停靠属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:13:09.247

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.location.aspx)

特别是，“获取或设置控件左上角相对于其容器左上角的坐标。”

您在重新添加到表单**后**尝试设置其位置？

# java - Java在打开文件时实时写入文件

> ID：13971495
> 
> 赞同：-3
> 
> 时间：2012-12-20T11:44:15.127
> 
> 标签：java, file, runtime, real-time, outputstream

我想在打开文件时将数据写入文件，但它不起作用。Calendar getTime 效果很好，System.out.println() 证明了这一点。请问，有什么想法，怎么了...？

主类：

```
 public static void main(String[] args) throws IOException {
        // TODO code application logic here
        CurrentTime ct = new CurrentTime();
    } 
```

当前时间类：

```
public class CurrentTime {

    public OutputStream output;
    public InputStream input;
    public Process npp;

    CurrentTime() throws IOException
    {
        Timer t = new Timer();
        npp =  Runtime.getRuntime().exec("notepad");
        output = npp.getOutputStream();        

        TimerTask task = new TimerTask() {
            @Override
            public void run()
            {                 
                String dateStr = Calendar.getInstance(new Locale("ua", "UA")).getTime().toString();
                System.out.println(dateStr);

                try {
                    output.write(dateStr.getBytes());
                    output.flush();                          
                } catch (IOException ex) {                    
                    Logger.getLogger(CurrentTime.class.getName()).log(Level.SEVERE, null, ex);
                }                
            }
        };
        t.schedule(task, 1000, 2000);

    }
} 
```

也许这段代码完全错误，np。就这样，我想从任何一方发现这一刻，这根本不可能吗？

**更新**：这不再是实际的了，只是为了说明一下，当时我试图直接对文本编辑器实施某种`tailing`操作，现在我明白这个想法是多么不正常......当然必须使用完全其他的方式来实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:54:36.110

你做错了 - 这是不可能的。`notepad`在运行时绝对会忽略它的输入（就像大多数 GUI 程序一样）。如果您想显示一个文本框并在其中写入文本，只需使用 Swing/SWT/...

如果您只想写入文件，只需新建一个`PrintWriter`并使用它来写入文件：[http ://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:02:29.720

有趣的：

让我们以简单的方式处理这个问题。

```
1\. Save a file test.txt somewhere. 
2\. Open that file and keep it opened 
```

在 Java 中写入此文件（标准代码）

```
FileWriter fw = new FileWriter(new FileOutputStream(new File("c:/test.txt")));
fw.write("ABC") 
```

现在再次转到记事本文件。我通常使用 Textpad 它会自动刷新（通过警报），因为我们在后台更改了它（在您的情况下通过 Java）。

我希望这会澄清一点。

为了避免尝试过度使用通用记事本 exe 并不能保证您将写入哪个文件。我不确定 Windows 是如何处理它的，因为您可以一次打开 3 个不同的文件，并且您希望哪个文件拥有您的数据用java写的？？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:53:55.960

您不应该尝试通过记事本书写。查看[PrintWriter](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)。

# javascript - 在 Chrome 扩展程序中执行使用 AJAX 检索的 javascript

> ID：13971497
> 
> 赞同：1
> 
> 时间：2012-12-20T11:44:24.453
> 
> 标签：javascript, google-chrome-extension

我正在编写一个 chrome 扩展，将 div 注入带有内容脚本的网站。内容脚本向我在 manifest.json 文件中清除的网站发出 AJAX 请求，并将数据插入到带有 innerHTML 的 div 中。AJAX 请求返回的部分内容是需要执行的 javascript。内容脚本中的 AJAX 请求工作正常。

当我从常规网站发出相同的 AJAX 请求时，返回的 javascript 执行得很好，但是当我从内容脚本发出 AJAX 请求时，它不会执行。控制台中不显示任何错误。如果可能的话，我不想重新加载网站。

我认为这是一个安全“功能”而不是错误。如何关闭或规避这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:00:53.600

首先，Rob W 所说的非常重要，如果您还不知道，对内容脚本运行的不同环境的良好解释很有用。

你可能想看看[这个](http://developer.chrome.com/extensions/content_scripts.html#pi)。这不是您要寻找的 100%，但主要部分就在那里。基本上从你的背景页面（如果你还没有创建一个），你使用 chrome.tabs.executeScript() 来执行你下载的脚本。这在真实页面上下文而不是“内容脚本”上下文中运行 javascript。您现在需要的只是将该脚本（以字符串形式）获取到后台页面，并确定要在其上执行它的 tabId（来自发件人选项卡）

您可以使用[chrome.extension.sendMessage](http://developer.chrome.com/extensions/extension.html#method-sendMessage)将其发送到后台页面，并在 background.js 中使用[chrome.extension.onMessage](http://developer.chrome.com/extensions/extension.html#event-onMessage)接收带有您的脚本的消息。从那里使用 sender 参数获取 tabId (sender.tab.id)，并构建您的 executeScript 调用。

另一个有用的提示是，默认情况下，chrome 中的页面脚本（动态 javascript 执行）不会以任何设置的方式显示在 chrome 调试器中，但您可以将类似这样的内容附加到 javascript 的字符串中： `"\n//@ sourceURL=/myFolder/myDynamicJavascript.js"`

这将使该脚本始终显示 chrome 调试器的“/myFolder/myDynamicJavascript.js”路径，允许您在插入的 js 代码中设置断点。这是救命稻草。

# c# - Windows Phone 8 设备能否用于测试使用 WP SDK 7.1 构建的应用程序

> ID：13971500
> 
> 赞同：3
> 
> 时间：2012-12-20T11:44:29.813
> 
> 标签：c#, .net, visual-studio, windows-phone-8

简短的故事是：我的笔记本电脑有一个处理器，没有运行新的 Windows Phone 8 SDK 所需的虚拟化和二级地址转换功能。

但是，我可以使用 windows phone 7.1 sdk，但为了测试我的应用程序，我将使用 windows phone 8 设备。

是否可以在连接的 WP8 设备上部署和测试我的应用程序，尽管我使用的是早于 WP8 操作系统的 7.1 SDK？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:22:58.387

我认为不可能在 WP8 设备上使用 WP7.1 SDK 部署应用程序，但是，即使您没有启用 SLAT，您也可以安装 Visual Studio 2012 + Windows Phone 8 SDK（如果您有 Windows 8 x64）中央处理器。Windows Phone 8 SDK 可以工作，只是你不能启动 WP8 模拟器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T13:54:51.563

No you cannot, The .xap packing mechanism in Windows phone 7.1 and 8 are different so you cannot deploy this xap using deployment tool. But, if we are using windows 8 + wp8 dev tools you can debug the application that developed on 7.1\. In future after the launch of wp 7.8 ms may provide a solution for this. for now there is no other alternative is available in front of you

# android - 如何使用两个线程升级android中的gridview，xml布局中只有一个gridview

> ID：13971502
> 
> 赞同：1
> 
> 时间：2012-12-20T11:44:33.897
> 
> 标签：android, sqlite

我在从 sqlite 显示的 gridview 中有项目。现在使用另一个线程我从 json webservice 获取数据并将数据存储在 sqlite 现在我想在同一个网格视图中显示更新的项目以及现有项目。 .

```
 private void displayUpdate(String Bid) {

             Log.w("Update cALL","Executing Update");
            System.out.println("aeqw cursor that in display table value"+getid(Bid).getCount());
            Cursor cursorx =getid(Bid);

            int p=Integer.parseInt(Bid);
            System.err.println("Recieving Bid to displayUpdate method"+p);
            if (getid(Bid) != null)
            {
                while(cursorx.moveToFirst())
                {

                    Log.e("Entering Loop", "WHILE EXECUTING");
                    String temp_id1 = cursorx.getString(0);
                    System.err.println("Name related to Bid to displayUpdate method"+temp_id1);
                    final String temp_name1 = cursorx.getString(1);
                    System.err.println("Name related to Bid to displayUpdate method"+temp_name1);
                    String temp_author1=cursorx.getString(2);
                    String temp_desc1=cursorx.getString(3);
                    byte[] temp_image1 = cursorx.getBlob(4);
                    String temp_rating1 = cursorx.getString(5);
                    String temp_price1 = cursorx.getString(6);
                    String temp_update1=cursorx.getString(7);
                    System.err.println("Name related to Bid to displayUpdate method"+temp_name1);
                    mapIdUp.add(temp_id1);
                    mapNameUp.add(temp_name1);
                    mapAuthorUp.add(temp_author1);
                    mapDescUp.add(temp_desc1);
                    mapRatingUp.add(temp_rating1);
                    mapPriceUp.add(temp_price1);
                    mapUp.add(temp_image1);
                    mapUpdatedUp.add(temp_update1);
                        Log.e("temp_id from the sqlite", temp_id1);
                        Log.i(temp_name1, temp_name1);
                        Log.i(temp_desc1, temp_desc1);
                        Log.i(temp_rating1, temp_rating1);
                        Log.e(temp_update1,temp_update1);
                        String[] captionArray1 = (String[]) mapNameUp.toArray(new String[mapNameUp.size()]);
                    ItemsAdapter itemsAdapter1 = new ItemsAdapter(
                            Bookicon.this, R.layout.item,captionArray1);

                    gridView1=(GridView)findViewById(R.id.list);
                    gridView1.setAdapter(itemsAdapter1);
                    itemsAdapter1.notifyDataSetChanged();
                    gridView1.setOnItemClickListener(new OnItemClickListener() {
                        public void onItemClick(AdapterView<?> parent, View v, int position, long id)
                        {
                            Intent i = new Intent(getApplicationContext(), DetailsActivity.class);

                            i.putExtra("id", position);

                            startActivity(i);
                        }
                    });
                    break;
                }       
            }   

            } 
```

在第二个线程中调用此方法以显示更新的书籍..

这个方法在哪里用于显示sqlite表中的所有项目

```
 private void getDataAndPopulate() 
    {

         Log.w("hello","zyuk,");

        Cursor cursor = getEvents("bcuk_book");

        while (cursor.moveToNext())
        {
             String temp_id = cursor.getString(0);
             final String temp_name = cursor.getString(1);
             String temp_author=cursor.getString(2);
             String temp_desc=cursor.getString(3);
             byte[] temp_image = cursor.getBlob(4);
             String temp_rating = cursor.getString(5);
             String temp_price = cursor.getString(6);
             String temp_update=cursor.getString(7);
             mapId.add(temp_id);
             mapName.add(temp_name);
             mapAuthor.add(temp_author);
             mapDesc.add(temp_desc);
             mapRating.add(temp_rating);
             mapPrice.add(temp_price);
             map.add(temp_image);
             mapUpdated.add(temp_update);
                Log.e("temp_id from the sqlite", temp_id);
                Log.i(temp_name, temp_name);
                Log.i(temp_desc, temp_desc);
                Log.i(temp_rating, temp_rating);
                Log.e(temp_update,temp_update);
                String[] captionArray = (String[]) mapName.toArray(new String[mapName.size()]);
                ItemsAdapter itemsAdapter = new ItemsAdapter(
                        Bookicon.this, R.layout.item,captionArray);
                gridView=(GridView)findViewById(R.id.list);
                gridView.setAdapter(itemsAdapter);
                gridView.setOnItemClickListener(new OnItemClickListener() {
                    public void onItemClick(AdapterView<?> parent, View v, int position, long id)
                    {

                        Intent i = new Intent(getApplicationContext(), DetailsActivity.class);

                        i.putExtra("id", position);

                        startActivity(i);
                    }
                });

        }   
        } 
```

问题是我无法显示更新的内容，而它正在显示已存储的项目..

如果让我们假设当我用 6 即一条记录更新新项目时有 1、2、3、4、5 之类的项目，它正在显示第一项，即 1。如果更新 2 条记录，那么它只显示前两条记录。

如何解决这个问题

# qt - 如何检测焦点是否从 QWidget 内部的小部件转移到外部？

> ID：13971506
> 
> 赞同：1
> 
> 时间：2012-12-20T11:44:55.577
> 
> 标签：qt, events, widget, focus

我正在使用带有 PySide 的 Qt 在 Python 中编程，并且我在名为 editor.py 的文件中定义了自定义 QWidget，该文件使用 Qt 设计器中的提升方法插入到 windowUi.py 的我的 ui 中。

在 editor.py 中定义的自定义 QWidget 类除了使用 Elixir 编辑 sqlite3 数据库中的项目并导入 ui 文件（editor.ui）外，并没有做太多事情。在 editor.ui 中有几个 QLineEdits 和 QDateTime 小部件。

此小部件最初隐藏在主窗口中，并在需要时显示。到目前为止一切顺利，但问题是我无法在不需要时隐藏它。我决定当用户单击主窗口中不是导入的编辑器小部件的任何其他位置时不需要该小部件，即焦点从 QWidget 转移。

我看了这个问题：[QWidget focusOutEvent not received](https://stackoverflow.com/questions/5512630/qwidget-focusoutevent-not-recieved)并意识到 QWidget 真的没有得到焦点。

如果我在其上调用 setFocusPolicy(StrongFocus) ，那么当且仅当用户单击 QWidget 背景（而不是其中的任何小部件）然后单击外部时，我才能使其隐藏。

那么问题是，我怎样才能做到这一点，当用户点击这个小部件之外，将焦点从它内部的任何 QLineEdit 或 QDateTime 转移到其他东西时，QWidget 然后隐藏自己？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:06:03.760

不做`QApplication:::focusChanged ( QWidget * old, QWidget * now )`你需要的吗？您可以检查是否`QWidget *now`是您的 QLineEdits/QDateTime 之一（通过 上升`QObject::parent`）
只需在显示之前连接到此信号并在隐藏后断开连接。

# ios - 模态视图控制器关闭后，任何推送的控制器都不会调用 viewDidAppear

> ID：13971514
> 
> 赞同：0
> 
> 时间：2012-12-20T11:45:41.110
> 
> 标签：ios, cocoa-touch, xamarin.ios

我用

```
this.PresentViewController(...); 
```

显示模态视图控制器另一个控制器。然后在我调用的模态视图控制器内关闭按钮操作

```
this.DismissViewController(...); 
```

问题在于该应用程序停止在我的 NavigationController 内的每个其他控制器中调用 viewDidAppear 方法，直到我重新初始化它。实际上问题只出现在 iPhone (iOS 5/6) 上。

关闭模态视图后如何使应用程序栩栩如生？

# javascript - 在 html5 应用程序显示之前放置图标

> ID：13971515
> 
> 赞同：1
> 
> 时间：2012-12-20T11:45:52.520
> 
> 标签：javascript, android, html, cordova, smartphone

> **可能重复：**
> [phonegap - Android 应用程序的启动画面](https://stackoverflow.com/questions/8156841/phonegap-splash-screen-for-android-app)

我有一个用 Html5 构建并用 PhoneGap for Android 包装的应用程序

在智能手机中显示应用程序之前有黑屏

而不是黑屏我想放一个图标。

我该怎么做？

如果有办法在 JS 而不是在 PhoneGap 中做到这一点，那就更好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:56:33.583

你说的是闪屏。Phonegap 支持闪屏，而且很容易实现。

首先，您添加启动画面插件：

```
<plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/> 
```

然后在`onCreate`您的主 java 文件（扩展 DroidGap 的文件）的方法中，添加以下行：

```
super.setIntegerProperty("splashscreen", R.drawable.splash); 
```

然后在javascript`deviceready`事件中，你可以隐藏它：

```
navigator.splashscreen.hide(); 
```

查看[API 文档](http://docs.phonegap.com/en/edge/cordova_splashscreen_splashscreen.md.html#Splashscreen)

# android - 显示具有不同字体的数据项的 Spinner

> ID：13971516
> 
> 赞同：3
> 
> 时间：2012-12-20T11:45:53.893
> 
> 标签：android

在我的应用程序中，我正在显示一个包含不同字体样式的微调器，例如，如果字体名称是美国 DNealian，那么它也应该使用相同的字体显示。我知道如何通过 view.setTypeface(tf) 设置特定视图的字体，但我使用数组 arr_fonts 来填充 ArrayList，而 ArrayList 将填充微调器的适配器。下面是我正在使用的代码片段。

-> 用于填充 ArrayList 的字符串数组

```
private String arr_fonts[] = {"US: D'Nealian", "US: D'Nealian Cursive", "US: Zaner-Bloser", "US: Zaner-Bloser Cursive",
            "Aus: NSW/ACT", "Aus: NSW/ACT Cursive", "Aus: Qld Beginners", "Aus: Qld Cursive", "Aus: SA Beginners", "Aus: SA Cursive",
            "Aus: Tas Beginners", "Aus: Tas Cursive", "Aus: Vic/NT/WA", "Aus: Vic/NT/WA Cursive", "WA Sassoon", "WA Sassoon Infant",
            "NZ Beginners","UK Beginners", "UK Cursive", "Century Gothic (HWT)"}; 
```

-> Arraylist 用于填充适配器

```
ARRLIST_FONTS = new ArrayList<String>(Arrays.asList(arr_fonts)); 
```

私人无效 set_font_name_Adapter() {

```
 sp_fonts = (Spinner)findViewById(R.id.spFont);

     font_name_Adapter= new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,ARRLIST_FONTS)
              {
            public View getView(int position, View convertView,ViewGroup parent) {
                    View v = super.getView(position, convertView, parent);
                    ((TextView) v).setTextSize(12);
                    ((TextView) v).setTextColor(Color.WHITE);
                    return v;
          } 
```

};

```
 font_name_Adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        sp_fonts.setAdapter(font_name_Adapter);

        sp_fonts.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {

                font = ARRLIST_FONTS.get(arg2);

                }

                System.out.println("Selected item is ................."+font);

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });

} 
```

我有所有字体名称的 .ttf。但我不知道如何单独更改微调器中每个项目的字体。

任何人都可以建议任何东西或任何链接或好的教程。

谢谢。

![在此处输入图像描述](../Images/5f23c9ae2b06b1267ff024286b3240ec.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:09:35.323

尝试为微调器中的所有 TextView 设置自定义字体：

```
Typeface typeface;
font_name_Adapter= new ArrayAdapter<String>
                (this,android.R.layout.simple_spinner_item,ARRLIST_FONTS)
       {
            public View getView(int position, View convertView,ViewGroup parent) {
               View v = super.getView(position, convertView, parent);
               ((TextView) v).setTextSize(12);
               ((TextView) v).setTextColor(Color.WHITE);

                if(position<=ARRLIST_FONTS.size()){
                 typeface = 
                  Typeface.createFromAsset(Your_Current_Activity.this.getAssets(),
                               "fonts/yourfontname.ttf"); 
                     ((TextView) v).setTypeface(typeface);
                   }

                    return v;
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T06:03:38.850

首先，在您的 res/layout 目录中创建一个名为“my_spinner_style.xml”的新 XML 文件，并放入类似以下内容的内容：

```
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:textSize="9pt"
android:singleLine="True"
android:id="@+id/spinnerTarget"
android:textColor="#000000"
android:gravity="center"/> 
```

然后在您的代码中，使用如下内容：

```
Spinner mySpinner = (Spinner) findViewById(R.id.my_spinner);
mySpinnerArrayAdapter = new MyCustomArrayAdapter(this, R.layout.my_spinner_style); mySpinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

通常您会为第二行创建一个新的 ArrayAdapter，但在这种情况下，您需要创建一个自定义 ArrayAdapter 并覆盖从我们的自定义微调器样式中获取 TextView 的方法。

因此，您需要为您的自定义 ArrayAdapter 输入代码，如下所示： private class MyArrayAdapter extends ArrayAdapter {

公共MyArrayAdapter（上下文上下文，int textViewResourceId）{超级（上下文，textViewResourceId）；}

```
public TextView getView(int position, View convertView, ViewGroup parent) {
TextView v = (TextView) super.getView(position, convertView, parent);
v.setTypeface(myFont);
return v;
}

public TextView getDropDownView(int position, View convertView, ViewGroup parent) {
TextView v = (TextView) super.getView(position, convertView, parent);
v.setTypeface(myFont);
return v;
}

} 
```

您要使用的字体需要位于 assets/fonts 目录中，您可以像这样访问它：

```
Typeface myFont = Typeface.createFromAsset(getAssets(), "fonts/myfont.ttf"); 
```

# ruby-on-rails - Capybara-webkit 抛出找不到变量：$

> ID：13971517
> 
> 赞同：5
> 
> 时间：2012-12-20T11:45:55.083
> 
> 标签：ruby-on-rails, capybara-webkit, wysihtml5

我正在尝试用Capybara [-webkit填充](https://github.com/thoughtbot/capybara-webkit)[wysihmlt5](https://github.com/xing/wysihtml5)文本区域（不确定是否有其他方法）：

```
Capybara.default_driver = :webkit
page.execute_script %Q{ $('#wysihtml5-textarea').data("wysihtml5").editor.setValue('Lorem ipsum') } 
```

但我得到这个错误：

```
undefined|0|ReferenceError: Can't find variable: $
FQFont::setPixelSize: Pixel size <= 0 (0)

Failure/Error: page.execute_script %Q{ $('#wysihtml5-textarea').data("wysihtml5").editor.setValue('Lorem ipsum') }
     Capybara::Driver::Webkit::WebkitInvalidResponseError:
       Javascript failed to execute 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T20:34:31.697

如果这是您使用 jQuery 的唯一目的，您可以尝试

```
document.getElementById('wysihtml5-textarea'); 
```

# bash - linux centos中文件内容未删除

> ID：13971520
> 
> 赞同：0
> 
> 时间：2012-12-20T11:45:56.943
> 
> 标签：bash, centos

我使用此命令运行程序

`command 2> sample.txt`

现在该文件不断增长，命令将在 5-6 天内退出，我相信文件大小不会以 GB 为单位

我试过这个

`echo "" > sample.txt`但这对它没有任何影响，并且文件大小正在增长。

我正在考虑在 1 小时后设置 cron 作业以清空其内容

我怎样才能清空文件的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:36:12.673

尝试以下命令，这会将控制台输出写入文件。（您的控制台也将打印消息）。

```
command | tee -a file.log 
```

你可以清空内容

```
> file.log 
```

# java - 整数等于方法

> ID：13971523
> 
> 赞同：1
> 
> 时间：2012-12-20T11:46:09.687
> 
> 标签：java, hashcode

通常，当您有一个对象时，如果两个哈希码相似，则对象 Equals 方法等于另一个相同类型的对象。

Integer 通过比较哈希码以相同的方式工作还是以不同的方式工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T11:49:23.890

如果您检查 Integer.java 包装类的源代码，您会发现 equals 方法已被覆盖，以检查两个 Integer 对象是否具有相同的 int 值。

```
public boolean equals(Object obj) {
       if (obj instanceof Integer) {
           return value == ((Integer)obj).intValue();
       }
       return false;
} 
```

所以你可以说JDK比较对象内的整数值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T11:48:55.913

具有相同哈希码的两个对象不必是`equals()`.

两个对象`equals()`必须具有相同的哈希码。

这基本上意味着您可能有（偶尔的）哈希码冲突。

该`Integer` `equals()`方法只是将`int`它包装的值与另一个`Integer`值进行比较`int`。哈希码不会进入其中。

请注意，`equals()`and`hashcode`聚合并不是严格*要求*的，但许多使用 internal 的 JDK 类都依赖它`Hashtable`，例如各种`java.util.Hashxxx`类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T11:48:46.450

整数 equals() 方法像`==`运算符一样比较 int 值，请参见下面的`Integer.equals()`方法代码。

```
public boolean equals(Object obj) {
   if (obj instanceof Integer) {
      return value == ((Integer)obj).intValue();
   }
   return false;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T11:49:09.243

为什么它对你很重要？

`Integer#equals`检查两个 int 值是否相等，而不仅仅是引用。所以实际的`Integer`对象可能不同（不同的引用），但是是等价的。

# nant - IIS 7.0 / windows server 2008 上的 IIS 虚拟目录创建失败

> ID：13971528
> 
> 赞同：0
> 
> 时间：2012-12-20T11:46:27.997
> 
> 标签：nant, nantcontrib

当我尝试使用`NAnt`构建脚本在远程服务器中创建虚拟目录时，它无法创建并显示以下错误消息：

```
The webservice at 'remote_machine' does not exist or is not reachable 
```

远程服务器的操作系统是**Windows server 2008**。在这里我使用了`NAnt 0.92`and `natcontrib 0.92`。

任何建议，将不胜感激。

EDiT：它适用于本地机器，但不适用于远程机器。任何建议请。

代码部分：

```
<property name="serverName" value="MyServer"/>
<property name="currentDeployName" value="Research"/>      
<property name="deployDir" value="\\${serverName}\wwwroot\${currentDeployName}"/>
<property name="currentDir" value="${deployDir}"/>  
<property name="DeployWebDir" value="${sourceDir}\Deployment\Deployment.Web"/>  
<property name="webrootDir" value="C:\Inetpub\wwwroot"/> 

<deliisdir iisserver="${serverName}" vdirname="${currentDeployName}" />        
<mkdir dir="${deployDir}" />     
<copy todir="${deployDir}" overwrite="true">
  <fileset basedir="${DeployWebDir}">
    <include name="**\*" />
  </fileset>
</copy>   
<mkiisdir iisserver="${serverName}" dirpath="${webrootDir}\${currentDeployName}"
           vdirname="${currentDeployName}"/> 
```

# c# - GDI 更新图形问题

> ID：13971531
> 
> 赞同：-1
> 
> 时间：2012-12-20T11:46:47.607
> 
> 标签：c#, gdi

我试图在谷歌上搜索这个，但似乎没有找到任何可以帮助我的相关内容。我的问题是，我有一个**面板**，我在其中绘制了一个**立方体**，我添加了一个带有 3 个单选按钮和 4 个普通按钮的组框（这些按钮可以旋转**立方体**）为了测试，我在**面板**上添加了另一个按钮，但是不在组框中。问题是这样的，当我按下任何按钮时，它不会更新立方体的旋转，只有当我将鼠标移动到测试按钮上时（在它上面）如果我尝试将按钮移动到组框之外，那么一切正常，但如果它们留在组框内，它们将不起作用。

有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:46:41.143

闪烁是因为面板首先重绘了他的背景，然后引发了`Paint`事件。为避免这种情况，您必须创建一个自定义控件并在`OnPaintBackground`受保护的方法中进行绘图。这似乎是矫枉过正。或者您可以写入位图并将其放入`BackgroundImage`属性中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:29:26.583

我可以建议不要重新绘制面板，而是创建一个`Bitmap`用于绘制（旋转）立方体并使用 a`PictureBox`来显示它的面板？`PictureBox`可以和`Panel`一起在里面`GroupBox`。

# android - Android - Android 标签和页面布局

> ID：13971538
> 
> 赞同：1
> 
> 时间：2012-12-20T11:46:58.310
> 
> 标签：android, android-layout, android-viewpager

我想构建一个可以从底部按钮访问的具有 3 个不同视图的视图。其中一个视图具有可以滑动的类似选项卡的视图。它看起来像这样：

```
 ________________________________
    |     Tab 1    |      Tab 2      |
    |______________|_________________|
    |                                |
    |                                |
    |                                |
    |                                |
    |                                |
    |         View Pager             |
    |                                |
    |                                |
    |                                |
    |                                |
    |                                |
    |                                |
    |________________________________|
    |         |             |        |
    |    1    |       2     |    3   |
    |_________|_____________|________| 
```

我打算在中间使用片段从视图 1、2、3（按钮）切换视图我正在尝试使用视图寻呼机我仍然不确定如何设计视图寻呼机？我将展示一个带有 6 个网格的视图，它将包含图像并且可以单击。首先，我打算像这个问题一样做 - > [ViewPager with Fragment reload at first and last page](https://stackoverflow.com/questions/13945520/viewpager-with-fragment-reload-at-first-and-last-page)但第一页仍然存在错误，如果我试图始终动态添加页面，恐怕它' ll 导致内存不足的问题。你们怎么看？还有其他解决方案吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:09:34.970

请参阅本教程并对代码很有帮助，

[http://developer.android.com/reference/android/support/v4/view/ViewPager.html](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)

# node.js - 节点js + express + session

> ID：13971540
> 
> 赞同：2
> 
> 时间：2012-12-20T11:47:07.833
> 
> 标签：node.js, session, login, express

我想知道如何在有人登录后创建会话。我想要一个创建会话的函数，一个检查会话是否处于活动状态（如果有人登录）的函数以及关闭它的方法。

我搜索了很多，但似乎没有任何效果，可能是我的错误。到目前为止，这是我的代码。

```
 var   express   = require('express')
    , exp       = express()
    , fs        = require('fs')
    , pub       = 'public/'
    , port      = 80
    , log       = fs.createWriteStream('./web.log', {flags: 'w'});;

exp.configure(function(){
    exp.use(express.static(__dirname + '/' + pub));
    exp.use(express.logger({stream: log})); 
    exp.use(express.bodyParser());
    exp.use(express.cookieParser());
    exp.use(express.session({secret:'sea-anemone'}));
});

exp.get('/', function(req, res){
    res.sendfile(pub + 'index.html');
});

exp.post('/', function(req, res){
    var u = req.param('username', null);
    var p = req.param('password', null);
    If (u == "admin" && p == "pass"){
        /* call function to create session */
    }
});

console.log("Server started")
exp.listen(port); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:19:54.363

您可以在 Express.js 中使用 cookie 会话。[这个要点应该可以帮助您入门。](https://gist.github.com/1491756)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:11:52.640

您是否考虑过使用[Passport](http://passportjs.org/)或[EveryAuth](https://github.com/bnoguchi/everyauth)而不是编写自己的身份验证/会话代码？

# c++ - 在循环中使用枚举和值一致性

> ID：13971544
> 
> 赞同：4
> 
> 时间：2012-12-20T11:47:21.513
> 
> 标签：c++, c++11, enums

我非常喜欢 C++ 的强类型特性，我最喜欢的是在处理有限的数据集时使用枚举。

但是枚举缺少一些有用的特性，例如运算符：

```
enum class Hex : int
{
    n00, n01, n02, n03,
    n04, n05, n06, n07,
    n08, n09, n10, n11,
    n12, n13, n14, n15
};

for (Hex h = Hex::n0; h <= Hex::n15; ++h) // Oops! no 'operator ++'
{ /* ... */ } 
```

很容易摆脱在同一范围内创建自由运算符的缺乏运算符：

```
Hex &operator ++(Hex &h)
{
    int r = static_cast<int>(Hex);
    h = static_cast<Hex>(r + 1);
    return h;
}

for (Hex h = Hex::n0; h <= Hex::n15; ++h) // Now the '++h' works!
{
    std::cout << std::dec << int(h) << ": "
              << std::hex << int(h) << '\n';
} 
```

但是这种方法比解决方案更令人讨厌，因为它可以打破枚举的值限制：应用`++h`while `h`equals to`Hex::n15`会将 h 设置为值 16，这超出了`Hex`值的范围，而`h`仍然是类型`Hex`！，这个问题在其他枚举中更为明显：

```
enum class Prime : int
{
    n00 = 2,   n01 = 3,   n02 = 5,   n03 = 7,
    n04 = 11,  n05 = 13,  n06 = 17,  n07 = 19,
    n08 = 23,  n09 = 29,  n10 = 31,  n11 = 37,
    n12 = 41,  n13 = 43,  n14 = 47,  n15 = 53
};

Prime &operator ++(Prime &p)
{
    // How to implement this?! will I need a lookup table?
    return p;
} 
```

这个问题对我来说是一个惊喜。我打赌将不正确的值存储到枚举值中会引发异常。所以，现在我想知道是否有一种优雅的方式来处理这个枚举的弱点，我想要实现的目标是：

*   找到一种在循环中使用枚举值的舒适方式。
*   确保操作之间的枚举数据一致性。

附加问题：

*   当枚举数据获得的值超出其可能值时，是否有理由不引发异常？
*   有一种方法可以推断与枚举类关联的类型？、枚举中的`int`类型`Hex`和`Prime`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:29:50.147

正如您所注意到的，`enum`在 C++ 中*不是*枚举类型，而是更复杂（或更混合）的东西。当你定义一个 `enum`时，你实际上定义了两件事：

1.  具有足以包含一个或所有枚举值的合法范围的整数类型。（技术上：范围是`2^n - 1`，其中`n`是保持最大值所需的位数。）

2.  一系列具有新定义类型的命名常量。

（如果您明确指定基础类型，我不确定范围会发生什么。）

例如，给定您`enum Prime`的 合法值将是 range 中的所有整数`[0...64)`，即使所有这些值都没有名称。（至少如果你没有明确说它应该是一个`int`.）

*可以在没有* 初始化器的情况下为枚举实现迭代器；我有一个生成必要代码的程序。但它通过将值保持在一个整数类型中来工作，该类型足够大以包含最大值加一。如果您尝试增加超出末尾，我的机器将`++`在这样的枚举上 生成实现。`assert`（请注意，您的第一个示例需要`h`在最后一个值之外迭代一个：我对各种运算符的实现不允许这样做，这就是我使用迭代器的原因。）

至于为什么 C++ 支持扩展范围：`enum`常用于定义位掩码：

```
enum X
{
    a = 0x01,
    b = 0x02,
    c = 0x04,
    all = a | b | c,
    none = 0
};

X operator|( X lhs, X rhs )
{
    return X((int)lhs | (int)rhs);
}
//  similarly, &, |= and &=, and maybe ~ 
```

有人可能会争辩说，这种用法最好由一个类来处理，但`enum`for 它的使用无处不在。

（FWIW：如果任何枚举值具有明确定义的值，我的代码生成器将不会生成`++`,和迭代器，并且除非所有值都具有明确定义的值，否则不会生成等。）`--``|``&`

至于为什么在转换合法范围之外的某些值（例如 100，for ，以上）时没有错误，这`X`完全符合从 C 继承的一般哲学：快比正确更好。进行额外的范围检查将需要额外的运行时成本。

最后关于你的最后一个例子：我不认为这是对`enum`. 这里正确的解决方案是 `int[]`. 虽然 C++`enum`是一个混合品种，但我只会将它用作真正的枚举类型，或用于位掩码（并且仅用于位掩码，因为它是如此广泛建立的习语）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:01:49.690

您可以使用`switch`：

```
class Invalid {};
Prime& operator ++(Prime& p)
{
    switch(p)
    {
        case n00: return n01;
        case n01: return n02;
        case n02: return n03;
        case n03: return n04;
        case n04: return n05;
        case n05: return n06;
        case n06: return n07;
        case n07: return n08;
        case n08: return n09;
        case n09: return n10;
        case n10: return n11;
        case n11: return n12;
        case n12: return n13;
        case n13: return n14;
        case n14: return n15;
        // Here: 2 choices: loop or throw (which is the only way to signal an error here)
        case n15: default: throw Invalid();
    }
} 
```

但请注意，这*不是*枚举的正确用法。我个人觉得这很容易出错。如果你想枚举整数，你可以使用一个整数数组来做到这一点，或者对于素数的情况，一个函数（在数学意义上：）`int nextPrime(int)`。

# imacros - iMacros ondialog 条件语句

> ID：13971549
> 
> 赞同：1
> 
> 时间：2012-12-20T11:47:45.033
> 
> 标签：imacros

我正在尝试`iMacros`向我发送电子邮件，如果登录后我得到一个对话框。在这种情况下，它警告我应该在密码过期之前更新我的密码。

我想要一些可用于发送电子邮件的**php输出。**我目前能够得到`getLastExtract`，但返回的数组中没有任何内容以任何方式提及对话框。

这是到目前为止的脚本：

```
CODE: SET !REPLAYSPEED FAST
TAB T=1     
TAB CLOSEALLOTHERS     
URL GOTO=[URL]   
SET !EXTRACTDIALOG YES  
TAG POS=1 TYPE=INPUT:TEXT FORM=NAME:adminLogin ATTR=ID:username CONTENT=[username] 
SET !ENCRYPTION NO
ONDIALOG POS=1 BUTTON=NO
TAG POS=1 TYPE=INPUT:PASSWORD FORM=NAME:adminLogin ATTR=ID:password CONTENT=[password] 
TAG POS=1 TYPE=INPUT:SUBMIT FORM=NAME:adminLogin ATTR=VALUE:Login 
```

# c++ - 在发布/调试模式下，Haar 级联的不同结果

> ID：13971552
> 
> 赞同：13
> 
> 时间：2012-12-20T11:48:07.540
> 
> 标签：c++, opencv, release-mode, debug-mode

我正在使用从[MIT 汽车数据集](http://cbcl.mit.edu/software-datasets/CarData.html)训练的 Haar 级联分类器来检测 OpenCV 中的车辆（使用 OpenCV 提供的实用程序进行训练）。这在调试模式下编译时工作得相当好，但在发布模式下编译时，级联根本不会进行任何检测。在下面的测试图像上运行以下代码会在调试模式下进行检测，但在发布模式下不会进行检测（此行为在我的数据序列中的所有图像中继续存在）。

您能否建议为什么会发生这种情况，更重要的是，在发布模式下运行时我可以做些什么来获得检测？

**[级联文件](http://db.tt/cnpuh8r3)**

**代码**

```
cv::Mat testImage = cv::imread("testImage.png",0);
cv::equalizeHist(testImage, testImage);

cv::CascadeClassifier vehicleCascade;
vehicleCascade.load("cars3.xml");

// Detect vehicles
std::vector<cv::Rect> cars;
vehicleCascade.detectMultiScale(
    testImage,                  // Input image
    cars,                   // Output bounding boxes
    1.1,                    // scale factor - how much image size is reduced at each scale
    5,                      // min neighbours - how many neighbours required to maintain rect
    0|CV_HAAR_SCALE_IMAGE,  // Not used
    cv::Size(30,30),        // Min poss object size
    cv::Size()              // Max poss object size
    );

std::cout << "Found " << cars.size() << " objects.\n";

for (int i=0; i<cars.size(); ++i)
    cv::rectangle(testImage, cars.at(i), CV_RGB(255,0,0), 3);

cv::namedWindow("Haar cascade");
cv::imshow("Haar cascade", testImage);
cv::waitKey(0);
cv::imwrite("output.png", testImage); 
```

**测试图像**

![测试图像](../Images/a533eb285f14988998449d9aee522b38.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T04:34:26.150

1.  这很奇怪，但对我来说，您的代码在两种模式下都可以正常工作。我在 Windows 7 32 位上使用 Visual Studio 2010。这是我的项目 - [https://www.dropbox.com/s/5kubn5tlu7k6ziy/opencvhw.rar](https://www.dropbox.com/s/5kubn5tlu7k6ziy/opencvhw.rar)，因此您可以检查可执行文件（发布和调试目录）。如果您使用的是 Visual Studio 并想自己构建它，则必须更改库的路径并包含两种模式的目录（包含目录路径相同，库目录路径不同）。（项目 -> ... 属性 -> 配置属性 -> vc++ 目录）

2.  一般来说，我会建议仔细检查项目配置。犯小错误真的很容易，这会导致非常奇怪的行为。有时最好的选择是再次从头开始配置所有内容。

3.  OpenCV 有非常奇怪的错误 - 这不是什么新鲜事 :) 例如，我在调试时不能使用一些编解码器 - 如果我在调试模式下运行程序，但没有调试一切都很好，但是如果我尝试调试 - 从文件中读取的每一帧是空的（但它的大小是正确的）。您可能刚刚遇到了一些类似的事情。尝试将图像转换为不同的格式（我认为 bmp 是测试的最佳选择 - 它应该始终可以在没有任何其他库的情况下工作）。

4.  另请注意，您已上传 jpg 文件，因此我必须自己重命名和转换它 - 可能在转换过程中此文件中的某些内容已更改，因此我们不会在完全相同的文件上测试您的代码 - 将您的 png 文件上传到保管箱，所以我可以测试它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:02:37.223

请参阅此[帖子](https://stackoverflow.com/questions/8859770/simple-opencv-command-works-in-debug-mode-but-not-release-mode)：此类错误可能是由于在发布模式下链接到 opencv 的调试库引起的。

# php - 使用 PHP从包含的 rss 中提取数据

> ID：13971566
> 
> 赞同：3
> 
> 时间：2012-12-20T11:48:53.237
> 
> 标签：php, xml, rss, cdata

这是我从 rss 提要中获得的描述项目：

```
 <description><![CDATA[ <img src="http://images.24ur.com/media/images/210/Nov2012/61090877.jpg" alt="24ur.com"/>
        Na sedeĹžu Evropske nogometne zveze v Nyonu so izĹžrebali pare osmine finala Lige prvakov. BrĹžkone bo najbolj vroÄe v Madridu, kjer se bo zasedba Reala uvodoma udarila z Manchester Unitedom, povratni dvoboj pa bosta velikana evropskega nogometa odigrala v Manchestru.]]></description> 
```

它包含无法用 xml 解析器解析的 CDATA 标记。如果我

```
echo $test->description; 
```

我在浏览器中看到了 img，但我无法访问脚本中的 src。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:51:09.493

您不能将 CDATA 部分中的 XML 作为 XML 访问。
您需要使用正则表达式对其进行解析以获取`src`.
或者将其作为另一个 XML 打开。

测试和工作：

```
$h = '<img src="http://images.24ur.com/media/images/210/Nov2012/61090877.jpg" alt="24ur.com"/>';

preg_match("/http:\/\/(.*?)[^\"']+/", $h, $matches);
var_dump($matches[0]); 
```

输出：

```
string(60) "http://images.24ur.com/media/images/210/Nov2012/61090877.jpg" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T11:51:21.503

描述包含单个文本节点（其数据是一段 HTML）。它不包含任何 XML 元素。

如果要从 HTML 中提取数据，则需要先通过 HTML 解析器将文本节点的数据传递。

# html - div 可见但被忽略

> ID：13971570
> 
> 赞同：2
> 
> 时间：2012-12-20T11:49:03.557
> 
> 标签：html, css

我在显示一些信息的缩略图顶部有一个 div。在缩略图上，我想做拖放事件，但我不能这样做，因为顶部的 div 隐藏了选择。可以使 div 可见但不干扰拖放选择。我希望你能理解我的问题。我没有代码，因为什么都没做！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:51:31.453

您可以通过添加 .css 的 CSS 属性使元素对鼠标交互透明`pointer-events:none`。因此，例如，如果您的 div 有 ID `overlay`，您可以使用：

```
#overlay{
    pointer-events:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:53:26.397

如果您可以为将焦点设置为缩略图的信息 div 创建一个 onclick 事件，那么您将能够使用拖放...

# codeigniter - codeigniter email->send 被发送两次

> ID：13971582
> 
> 赞同：0
> 
> 时间：2012-12-20T11:49:55.897
> 
> 标签：codeigniter, email

我正在将 codeigniter 2 与 tank_auth 库一起使用。在名为 user_model 的模型中，它有一个函数 (_send_email()) 来发送电子邮件：

```
function _send_email($type, $email, &$data)
{
    $this->load->library('email');
    $this->config->set_item('language', 'dutch'); 

    $this->email->set_newline("\r\n");
    $this->email->from($this->config->item('webmaster_email', 'tank_auth'), $this->config->item('website_name', 'tank_auth'));
    //$this->email->reply_to($this->config->item('webmaster_email', 'tank_auth'), $this->config->item('website_name', 'tank_auth'));
    $this->email->to($email);
    $this->email->subject(sprintf($this->lang->line('auth_subject_'.$type), $this->config->item('website_name', 'tank_auth')));
    $this->email->message($this->load->view('email/'.$type.'-html', $data, TRUE));
    $this->email->set_alt_message($this->load->view('email/'.$type.'-txt', $data, TRUE));

    if($this->email->send()){
        echo "sendit";
    }
} 
```

我尝试从这样的控制器调用此函数：

```
public function email($value='')
{
    $this->lang->load('tank_auth', 'dutch');
    $this->load->model('user_model');
    $data = array("site_name" => "site name");
    $this->user_model->_send_email('bestelling_geplaatst', "my_email@hotmail.com",$data); // send 
} 
```

**问题是电子邮件被发送两次到电子邮件地址**

遇到此问题的任何人都知道在哪里寻找解决方案（或问题）

**更多信息：**

我正在尝试在我的控制器中创建一个方法，就像这里的使用指南中的示例一样：[https ://www.codeigniter.com/user_guide/libraries/email.html](https://www.codeigniter.com/user_guide/libraries/email.html)

```
 $this->load->library('email');

$this->email->from('your@example.com', 'Your Name');
$this->email->to('someone@example.com'); 
$this->email->cc('another@another-example.com'); 
$this->email->bcc('them@their-example.com'); 

$this->email->subject('Email Test');
$this->email->message('Testing the email class.');  

$this->email->send(); 
```

**此方法还会发送两次电子邮件！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:56:33.523

**原因**是我有 Google Chrome 的插件 Firebug Lite。在我停用此页面后，该页面仅请求一次！在这里找到遮阳篷： [https ://stackoverflow.com/a/10580841/1108772](https://stackoverflow.com/a/10580841/1108772)

感谢大家的回复和所有的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:59:43.867

**删除此代码**

```
if($this->email->send())
{
    echo "sendit";
} 
```

从

```
function _send_email($type, $email, &$data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:22:45.983

首先，这是错误的做法。仅使用模型函数与数据库交互。发送邮件的功能应该在控制器中。

# service - 我无法在 AS 5.0.1 中编辑 mushup 服务

> ID：13971584
> 
> 赞同：1
> 
> 时间：2012-12-20T11:50:02.823
> 
> 标签：service, edit, mashup

我无法像这样在 AS 5.0.1 中编辑 mushup 服务，即使平台提供的示例（如 admin/RESTSample）也显示消息“发生错误”

# objective-c - 使用 UIViewController 调用多个 ViewController

> ID：13971585
> 
> 赞同：2
> 
> 时间：2012-12-20T11:50:06.277
> 
> 标签：objective-c, ios, cocoa-touch

在我的项目中，我有 10 个单元格的 tableView。并且在`didSelectRowAtIndexPath`所有单元格中都有多个 ViewController （文件）所以，我`didSelectRowAtIndexPath`看起来像

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if(indexPath.row == 0) {

            CallViewController *viewc = [[CallViewController alloc] initWithNibName:@"CallViewController" bundle:nil];
            [self.navigationController pushViewController:viewc animated:YES];
        }else if(indexPath.row == 1) {
            BirthdayViewController *viewc = [[BirthdayViewController alloc] initWithNibName:@"BirthdayViewController" bundle:nil];
            [self.navigationController pushViewController:viewc animated:YES];
        } 
```

所以我不希望这些条件我希望我的代码是干净的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:00:02.657

我建议你有一个包含`Class`你的类的对象的数组，然后创建对象并像这样推送

```
//view did load

mutableArr = [[NSMutableArray alloc] init];
[mutableArr addObject:[CallViewController class]];
[mutableArr addObject:[BirthdayViewController class]];
....
.... 
```

然后在你的

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   if (indexPath.row < [mutableArr count]) {
       Class *obj = [mutableArr objectAtIndex:indexPath.row];
       UIViewController *controller = [[objc alloc] initWithNibName:NSStringFromClass(obj) bundle:nil];
       [self.navigationController pushViewController:controller animated:YES];
   }
} 
```

* * *

或者，如果这看起来更奇怪，那么你可以这样做

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   UIViewController *controller = nil;
   switch(indexPath.row) {
       case 0:
          controller = [[CallViewController alloc] initWithNibName:@"CallViewController" bundle:nil];
          break;
       case 1;
          controller = [[BirthdayViewController alloc] initWithNibName:@"BirthdayViewController " bundle:nil];
          break;
   }
    [self.navigationController pushViewController:controller animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:59:28.710

你的 tableview 底层数据模型是什么？如果您可以添加其他属性作为 ViewController 类名称，您可以执行类似的操作

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
NSDictionary *row = [rowData objectAtIndex:indexPath.row];
Class viewControllerClass =
    NSClassFromString([row objectForKey:@"viewControllerClassName"]);

//Default VC init looks for nib file named as VC afaik, if not, you could
    //add another attribute with init selector name
UIViewController *viewController =
    [[viewControllerClass alloc] init];
[self.navigationController pushViewController:viewController animated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:04:22.610

你可以这样做：

将所有类添加到 NSArray，并通过 indexPath.row 选择正确的类。

```
- (void)tableView:(UITableView *)tableView
didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
      NSArray * conrollersClasses =@[[CallViewController class],[BirthdayViewController class]];
      UIViewController *controller = [[conrollersClasses[indexPath.row] alloc] init];
      [[self navigationController] controller animated:YES];

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T11:59:44.327

您可以创建对应于文件名的字符串数组并使用 NSClassFromString 函数来分配视图控制器

```
NSArray *viewControllers = [NSArray arrayWithObjects:@"VC1", @"VC2", @"VC3", nil];
id viewController = [[NSClassFromString([viewControllers objectAtIndex:indexPath.row]) alloc] initWithNibName:[viewControllers objectAtIndex:indexPath.row] bundle:nil];
[[self navigationController] pushViewController:viewController animated:YES];
[viewController release]; 
```

# sql - 如何在 Teradata 中使用单个插入语句插入多条记录？

> ID：13971587
> 
> 赞同：1
> 
> 时间：2012-12-20T11:50:12.607
> 
> 标签：sql, teradata

在 teradata 中，我们可以在查询中使用单个插入语句插入多条记录吗？如果是，如何？

假设我正在尝试做类似的事情：

```
insert test_rank (storeid,prodid,sales) values (1,'A',1000) ( 2,'B',2000) ,(3,'C',3000); 
```

但这在 teradata 中无法在一条语句中插入所有 3 条记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-06T09:30:53.177

```
INSERT INTO test_rank (storeid, prodid, sales)
SELECT * 
FROM (SELECT * 
      FROM (SELECT 0 storeid, 
                   1 prodid, 
                   2 sales) T1 
      UNION ALL 
      SELECT * 
      FROM (SELECT 3 storeid, 
                   4 prodid, 
                   5 sales) T2
      UNION ALL 
      SELECT * 
      FROM (SELECT 6 storeid, 
                   7 prodid, 
                   8 sales) T3
      ...
)T; 
```

谢谢，罗伯！你的建议帮助了我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T07:27:02.213

如果您正在处理小数据，您可以尝试将值放在文本文件中，然后使用 Teradata SQLA 导入它们。

创建一个包含您的输入的文本文件，由制表符分隔（如果制表符在您的版本中不起作用，请使用逗号）：

```
1   A   1000
2   B   2000
3   C   3000 
```

然后在 SQLA 上选择导入模式，文件 -> 导入数据，然后运行以下语句：

```
insert into YourTable values (?, ?, ?); 
```

确保事先使用正确的数据类型创建表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T14:34:09.047

我不确定这会有多实用，但从技术上讲，以下是可能的：

```
INSERT INTO MyTable
SELECT *
  FROM 
( SELECT 1 AS StoreID
       , 'A' AS ProdID
       , 1000 AS SALES
  UNION
  SELECT 2 
       , 'B'
       , 2000
  SELECT 3
       , 'C'
       , 3000
) DT1
; 
```

其次，如果您使用的是 BTEQ，那么您可以查看 USING 命令结合平面文件重复单个 INSERT 语句来加载表。但是此时，如果您正在以合理的音量执行任何操作，那么您不妨根据卷来利用适当的加载实用程序（MultiLoad 或 FastLoad）来完成此任务。

**编辑 - 2015-12-10**

除非首先将 UNION 中的每个 SELECT 放在派生表中，否则上面的 SQL 将不会运行。有关正确语法，请参阅下面来自 Anatoly 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-21T15:49:53.640

有时**用数据**创建表而不是尝试进行复杂的动态插入很有用。

```
CREATE TABLE  db.Inc_Config  AS (
SELECT
c.calendar_date,
null  as  Sent_To,
CURRENT_TIMESTAMP as  Sent_Date,
date '2016-01-01' as  Inc_Start_Date,
date '2016-02-29' as  Inc_End_Date
FROM  sys_calendar.CALENDAR c  
WHERE 
c.calendar_date BETWEEN date '2016-01-01' AND date '2016-02-29' 
) WITH data; 
```

# kendo-ui - 定义在网格中更改了哪个字段

> ID：13971591
> 
> 赞同：5
> 
> 时间：2012-12-20T11:50:14.757
> 
> 标签：kendo-ui

是否可以在 kendo UI 网格上识别在行编辑时更改了哪个字段？

现在我将整行发送到已更改的服务器。我想将请求发送到服务器，以包含一个包含已编辑字段名称的变量。

1.  是剑道支持的东西还是
2.  有解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:06:02.677

开箱即用不支持此功能。然而，网格 API 应该允许实现这一点。检查[编辑](http://docs.kendoui.com/api/web/grid#edit)和[保存](http://docs.kendoui.com/api/web/grid#save)事件。在那里，您可以[收听](http://docs.kendoui.com/api/framework/model#bind)当前正在编辑的模型实例的更改[。](http://docs.kendoui.com/api/framework/model#change-event)这是一个简单的例子：

```
$("#grid").kendoGrid({
   edit: function(e) {
     e.model.unbind("change", model_change).bind("change", model_change);
   }
});

function model_change(e) {
  var model = this;
  var field = e.field;
  // store somewhere the field and model
} 
```

# html - 调试/检查网页的打印版本

> ID：13971594
> 
> 赞同：3
> 
> 时间：2012-12-20T11:50:26.070
> 
> 标签：html, css, printing

我正在研究一个大型网站的一小部分。我在使用`<css media="print">`. 我想知道是否有一种方法可以在浏览器中显示页面的打印版本，以便我可以检查它并找到错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T11:54:47.160

如果您将样式表设置为“screen”，而将另一个样式表设置为“print”，则可以暂时将“print”设置为“screen”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:33:09.543

扩展 Web 开发人员 ( [http://chrispederick.com/work/web-developer/](http://chrispederick.com/work/web-developer/) ) 具有显示打印样式功能，可以帮助您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T11:57:39.290

我认为您必须创建另一个针对打印机优化的页面（打印机友好页面），然后添加`$(document).ready(function() { window.print(); });` 然后将“打印”按钮的链接更改为这个新文件。

# asp.net - 为什么在使用当前同步上下文启动任务时未设置 ASP.NET HttpContext.Current

> ID：13971595
> 
> 赞同：21
> 
> 时间：2012-12-20T11:50:28.290
> 
> 标签：asp.net, .net, asynchronous, task-parallel-library

我正在玩弄 .NET 的异步功能，但遇到了一个我无法真正解释的情况。在同步 ASP.NET MVC 控制器中执行以下代码时

```
var t = Task.Factory.StartNew(()=>{
        var ctx = System.Web.HttpContext.Current;
        //ctx == null here
},
    CancellationToken.None,
    TaskCreationOptions.None,
    TaskScheduler.FromCurrentSynchronizationContext()
);

t.Wait(); 
```

`ctx`在`null`委托内。`TaskScheduler.FromCurrentSynchronizationContext()`现在据我了解，使用任务调度程序时应该恢复上下文。那么为什么不在这里呢？（顺便说一句，我可以看到委托在同一个线程上同步执行）。

此外，从[msdn](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28SYSTEM.THREADING.TASKS.TASKSCHEDULER.FROMCURRENTSYNCHRONIZATIONCONTEXT%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-CSHARP%29&rd=true "微软")， a 的`TaskScheduler.FromCurrentSynchronizationContext()`行为应如下所示：

> 所有排队到返回调度程序的 Task 实例都将通过在该上下文中调用 Post 方法来执行。

但是，当我使用此代码时：

```
var wh = new AutoResetEvent(false);

SynchronizationContext.Current.Post(s=> {
    var ctx = System.Web.HttpContext.Current;
    //ctx is set here
    wh.Set();
    return;
},null);

wh.WaitOne(); 
```

上下文实际上是设置的。

我知道这个例子有点做作，但我真的很想了解会发生什么来增加我对 .NET 上的异步编程的理解。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T05:23:01.830

***您的观察似乎是正确的，这有点令人费解。*** 您将调度程序指定为“TaskScheduler.FromCurrentSynchronizationContext()”。这将关联一个新的“SynchronizationContextTaskScheduler”。现在，如果您查看它使用的此类： ![在此处输入图像描述](../Images/1ce4e8c920bd0e276b2ac27c0f1876c7.png)

> 因此，如果任务调度程序可以访问相同的“同步上下文”并且应该引用“LegacyAspNetSychronizationContext”。*因此，显然 HttpContext.current 不应该为空。*

在第二种情况下，当您使用 SychronizationContext（请参阅：[MSDN 文章](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)）时，线程的上下文与任务共享：

> “SynchronizationContext 的另一个方面是每个线程都有一个‘当前’上下文。线程的上下文不一定是唯一的；它的上下文实例可以与其他线程共享。”

SynchronizationContext.Current 在这种情况下由 LegacyAspNetSychronizationContext 提供，内部有对 HttpApplication 的引用。

当 Post 方法必须调用注册的回调时，它会调用 HttpApplication.OnThreadEnter，这最终导致将当前线程的上下文设置为 HttpCurrent.Context：

![在此处输入图像描述](../Images/b41ee9276c59d50509e3b8c816a08dd3.png)

此处引用的所有类都在框架中定义为内部类，这使得进一步调查变得有点困难。

PS：说明两个 SynchornizationContext 对象实际上都指向“LegacyAspNetSynchronizationContext”： ![在此处输入图像描述](../Images/e3ff5a27bba550b1479d39441b57a65b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T10:08:43.623

前段时间我在谷歌上搜索 HTTPContext 信息。我发现了这个：

[http://odetocode.com/articles/112.aspx](http://odetocode.com/articles/112.aspx)

它是关于线程和 HTTPContext 的。有很好的解释：

> CallContext 提供了与线程本地存储极为相似的服务（除了 CallContext 可以在远程调用期间执行一些额外的魔法）。线程本地存储是一个概念，其中应用程序域中的每个逻辑线程都有一个唯一的数据槽来保存特定于自身的数据。线程不共享数据，并且一个线程不能将数据本地修改到不同的线程。ASP.NET 在选择一个线程来执行传入请求后，会将对当前请求上下文的引用存储在线程的本地存储中。现在，无论线程在执行时去哪里（业务对象、数据访问对象），上下文都在附近并且很容易检索。
> 
> 了解上述内容后，我们可以说明以下内容：如果在处理请求时，执行移动到不同的线程（通过 QueueUserWorkItem 或异步委托，作为两个示例），HttpContext.Current 将不知道如何检索当前上下文，并且将返回空值。您可能认为解决该问题的一种方法是将引用传递给工作线程

因此，您必须通过某个变量创建对 HTTPContext.Current 的引用，并且该变量将从您将在代码中创建的其他线程中寻址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T10:54:04.367

你的结果很奇怪——你确定没有其他事情发生吗？

* * *

您的第一个示例（ with `Task`）仅适用，因为`Task.Wait()`可以“内联”运行任务主体。

如果你在任务 lambda 中放置一个断点并查看调用堆栈，你会看到 lambda 是从方法内部调用的`Task.Wait()`——没有并发。由于任务是通过正常的同步方法调用执行的，`HttpContext.Current`因此必须返回与控制器方法中其他任何地方相同的值。

* * *

您的第二个示例（ with `SynchronizationContext.Post`）将死锁，并且您的 lambda 将永远不会运行。

这是因为您使用的是`AutoResetEvent`，它对您的`Post`. 调用`WaitOne()`将阻塞线程，直到`AutoResetEvent`is `Set`。同时，`SynchronizationContext`等待线程空闲以便运行 lambda。

由于线程被阻塞在 中`WaitOne`，因此发布的 lambda 将永远不会执行，这意味着`AutoResetEvent`永远不会设置 ，这意味着`WaitOne`永远不会满足。这是一个僵局。

# java - JasperReport 设置参数

> ID：13971598
> 
> 赞同：0
> 
> 时间：2012-12-20T11:50:36.260
> 
> 标签：java, xml, jasper-reports

我对 JasperReport 有一些问题。我通过 iReport 生成了一个 *.jrxml 文件。在那里我定义了一些领域。现在我想在我的 Java 应用程序中设置这些字段，但它没有用。

我的代码看起来像

```
JasperReport report;
    JasperPrint print;

    HashMap<String, Object> parameters = new HashMap<String, Object>();

    parameters.put("logoPath", "\\logo.jpg");
    parameters.put("companyName", "Company Name");

    try {
        report = JasperCompileManager
                .compileReport("JRXML\\Template.jrxml");

        for (JRField field : report.getFields()) {
            System.out.println(field.getName() + "|"
                    + field.getValueClassName());
        }

        print = JasperFillManager.fillReport(report, parameters,
                new JREmptyDataSource());
        JasperExportManager.exportReportToPdfFile(print,
                "\\temp\\Example.pdf");

        JasperViewer.viewReport(print);

    } catch (Exception e) {
        // TODO Auto-generated catch block
        Logger.getLogger(Example1.class.getName()).log(Level.ALL,
                e.getLocalizedMessage());

        e.printStackTrace();
    } 
```

这些字段在 *.jrxml 文件中给出。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:07:24.627

您将参数与字段混淆。参数定义为`<parameter name="companyName" class="java.lang.String" isForPrompting="false">`，而字段定义为`<field name="companyName" class="java.lang.String"/>`。将公司名称转换为 jrxml 中的参数，它应该可以工作。

从[本](http://fecplanner.com/jasperreports/docs/tutorial/index.html)教程

> **参数**
> 
> 参数是传递给报表填充操作的对象引用。它们对于将通常无法在其数据源中找到的数据传递给报表引擎非常有用。
> 
> **字段**
> 
> 报告字段表示将数据从数据源映射到报告生成例程的唯一方法。当报表的数据源为 ResultSet 时，所有字段必须映射到 ResultSet 对象中的对应列。也就是说，它们必须与它们映射的列具有相同的名称和兼容的类型。

**原始答案：**

为 logo.jpg 使用 FileResolver，Jasper 将使用它来解析文件位置。

```
FileResolver fileResolver = new FileResolver() {
@Override
public File resolveFile(String fileName) {
 URI uri = null;
 try {
uri = new URI(this.getClass().getResource("/" + fileName).getPath());
 } catch (URISyntaxException e) {
 }
return new File(uri.getPath());
}
};

HashMap<String, Object> parameters = new HashMap<String, Object>();

parameters.put("logoPath", "\\logo.jpg");
parameters.put("companyName", "Company Name");
parameters.put("REPORT_FILE_RESOLVER", fileResolver);
...
print = JasperFillManager.fillReport(report, parameters,
new JREmptyDataSource()); 
```

# android - Android应用需要在手机开机后自动重启

> ID：13971601
> 
> 赞同：4
> 
> 时间：2012-12-20T11:50:43.633
> 
> 标签：android

我需要在手机重启和开机后自动启动我的应用程序一次。

[我在启动时](http://www.androidsnippets.com/autostart-an-application-at-bootup)使用了 AutoStart an Application 提供的代码，现在我的 android 应用程序在手机重启（重启）后自动启动。

现在，考虑到我没有重新启动手机，而是使用了**手机关机（关闭手机）**选项。手机开机后，我的应用程序没有按预期自动启动。你能解释一下我错过了什么吗？

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<receiver android:enabled="true" android:name=".BootUpReceiver" android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>

public class BootUpReceiver extends BroadcastReceiver
{
    private static SharedPreferences aSharedSettings;

    @Override
    public void onReceive(Context context, Intent intent) 
    {
        aSharedSettings = context.getSharedPreferences("MYPreferences", Context.MODE_PRIVATE);
        boolean isUserLoggedIn = aSharedSettings.getBoolean(kEY.AUTHENTICATED, false); 
        if(isUserLoggedIn) 
        {
Intent aServiceIntent = new Intent(context, HomeView.class);
                aServiceIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                context.startActivity(aServiceIntent); 
}

    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:01:15.837

如果您在重新启动手机之前至少手动启动一次应用程序，而不是“强制关闭”它，它是否按预期工作？

看一下：

[Android：在 ICS 和 Gingerbread 上的 android.intent.action.BOOT_COMPLETED](https://stackoverflow.com/questions/11775243/android-android-intent-action-boot-completed-on-ics-and-gingerbread)

[启动完成回归确认](http://commonsware.com/blog/2011/07/13/boot-completed-regression-confirmed.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:01:46.260

尝试添加

```
<category android:name="android.intent.category.LAUNCHER" /> 
```

代替

```
<category android:name="android.intent.category.DEFAULT" />. 
```

并检查 isUserLoggedIn 的值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T12:00:35.730

您可以尝试几件事。

首先检查您的应用程序是否设置为此，确保应用程序在本地存储上`installLocation`。安装到 sdcard 的应用程序将不会收到意图。`AndroidManifest.xml``android:installLocation="internalOnly"``BOOT_COMPLETE`

另外我会删除`<category android:name="android.intent.category.DEFAULT" />`它是没有必要的。

您可以尝试的最后一件事是使用完整的包名：

```
 <receiver android:enabled="true" 
              android:name="com.myapp.receivers.BootUpReceiver" 
              android:permission="android.permission.RECEIVE_BOOT_COMPLETED" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T12:04:12.013

您开始应用程序的活动名称，在您的标签中添加此行.....并让我知道它是否有效

```
 <category android:name="android.intent.category.HomeView" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T11:58:53.243

您使用的是 HTC 设备吗？如果是这样，您可能启用了一项称为“快速启动”的功能

有关详细信息，请参阅此链接。

[检测是否启用了 HTC “快速启动”](https://stackoverflow.com/questions/8658862/detect-if-htc-fast-boot-is-enabled)

# java - Datanucleus JDO Mongodb - 地图值中抽象的子级未持久化

> ID：13971606
> 
> 赞同：4
> 
> 时间：2012-12-20T11:51:19.990
> 
> 标签：java, mongodb, jdo, datanucleus

我正在使用 Datanucleus/JDO 将对象持久保存在 MongoDB 数据库中。我尝试持久化一个包含 Map 的对象，该对象的值类型是一个抽象类。

当我尝试持久化该对象的实例时，抽象类的字段被持久化，但子类的字段不被持久化。

下面是一些代码作为示例。

**动物园.java**

```
 @PersistenceCapable
    public class Zoo {

            @Persistent
            private String fieldZoo;
            @Persistent
            private Map<String, Animal> mapStringAnimal;

            // etc... basic constructor...
    } 
```

**动物.java**

```
 @PersistenceCapable(embeddedOnly = "true")
    public abstract class Animal {

            @Persistent
            private String  fieldAnimal;

    } 
```

**狗.java**

```
 @PersistenceCapable(embeddedOnly = "true")
    public class Dog extends Animal {

            @Persistent
            private String  fieldDog;

    } 
```

**测试.java**

```
 public static void main(String[] args) {
            Map<String, Animal> mapStringAnimal = new HashMap<String, Animal>();
            Dog dog = new Dog("valueFieldAnimal", "valueFieldDog");
            mapStringAnimal.put("dogKey", dog);
            Zoo zoo = new Zoo("valueFieldZoo", mapStringAnimal);

            Properties properties = new Properties();
            properties.setProperty("javax.jdo.PersistenceManagerFactoryClass", "org.datanucleus.api.jdo.JDOPersistenceManagerFactory");
            properties.setProperty("javax.jdo.option.ConnectionURL", "mongodb:/dbtest");
            properties.setProperty("javax.jdo.option.Mapping", "mongodb");
            properties.setProperty("datanucleus.autoCreateSchema", "true");
            PersistenceManagerFactory pmf = JDOHelper.getPersistenceManagerFactory(properties);
            PersistenceManager pm = pmf.getPersistenceManager();

            pm.makePersistent(zoo);
            pm.close();
    } 
```

当我查看 MongoDB 时：

```
 > db.Zoo.find().pretty();

    {
            "_id" : ObjectId("50d2f5f7e4b0cae285990b2d"),
            "fieldZoo" : "valueFieldZoo",
            "mapStringAnimal" : [
                    {
                            "key" : "dogKey",
                            "value" : {
                                    "fieldAnimal" : "valueFieldAnimal"
                            }
                    }
            ]
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:36:00.650

是的，但 DataNucleus 不支持嵌入的**继承**Map 键/值。它确实支持嵌入的继承 Collection 元素（尚未发布的 JDO3.1 的一部分），但不支持 Maps。显然，代码是开源的，任何人都可以潜入并贡献它（当然，一旦你为“动物”添加了一个鉴别器）。

# unit-testing - mvc上的单元测试actionfilter

> ID：13971609
> 
> 赞同：2
> 
> 时间：2012-12-20T11:51:26.177
> 
> 标签：unit-testing, action-filter

我正在尝试为 actionfilter 编写单元测试。我写了一些代码，但我不知道它是否正确。我的操作结果代码如下：

```
 public override void OnActionExecuting(ActionExecutingContext filterContext)
 {
   if (!HttpContext.Current.User.Identity.IsAuthenticated)
   {
      HttpContext.Current.Response.Redirect("/kullanicigiris");
   }
 } 
```

我将此操作结果添加到某些控制器的顶部。

```
[AuthenticationFilter]
public class HomeController : Controller 
```

我写了一个这样的测试代码：

```
 [TestMethod]
    public void TestActionFilter()
    {
        const string expectedViewName = "Create";
        const string username = "deneme";
     //   MockRepository mock=new MockRepository();
        AccountController v=new AccountController();
        var context = new Mock<HttpContextBase>();
       var request = new Mock<HttpRequestBase>();
        context.SetupGet(p => p.User.Identity.Name).Returns(username);
        context.SetupGet(p => p.Request.IsAuthenticated).Returns(false);

        context.VerifyAll();

    }
} 
```

我写这个是为了成功。我也会为失败再写一篇。这是一种真正的方法吗？

# css - 通过css在div下面添加图片？

> ID：13971614
> 
> 赞同：0
> 
> 时间：2012-12-20T11:51:56.350
> 
> 标签：css, image, html

我打算在 div 下方添加一张图片。它会在导航栏 (div) 下方，添加一些漂亮的阴影效果 (img)。看起来像这样：

```
<div>...</div>
<img> 
```

到目前为止，它只是在 html 代码中，但我想保留 html 代码，因为它是一个经常更新的主题。所以我只想改变CSS。

有没有办法在不改变 HTML 代码的情况下，只使用 CSS 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:54:24.443

您不能通过 css 更改图像元素的来源...您可以使用 CSS tho 创建阴影：

```
 -webkit-box-shadow: 0 8px 6px -6px black;
   -moz-box-shadow: 0 8px 6px -6px black;
        box-shadow: 0 8px 6px -6px black; 
```

或者您可以通过 javascript 或从 codehind 更改图像

javascript: `$(element).src = "path to new image";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:21:29.433

两个建议：

1.  将阴影图像作为 1px x Xpx 重复背景图像添加到导航 DIV 的底部。所以它将位于导航 DIV 中。只需在 NAV DIV 的底部添加一些填充以适应它，例如

导航 { padding-bottom:6px; 背景：url（images/nav-bg.png）重复-x 0底部；}

（上面的代码假定您有一个高度为 6 像素、宽度可能为 1 像素的背景图像（但这取决于您），并且显然必须将路径调整为您的实际图像所在的位置。

1.  不要在 NAV DIV 下添加 IMAGE，而是添加另一个 DIV，然后再次通过 CSS 向该 DIV 添加 1px x Xpx 阴影图像。

# c++ - 为什么调用隐式类型转换构造函数后直接是析构函数？

> ID：13971615
> 
> 赞同：0
> 
> 时间：2012-12-20T11:51:58.317
> 
> 标签：c++, gcc, implicit-conversion

给出以下函数：

```
osal_allocator* SharedMemoryManager::allocator();I 
```

`osal_allocator`包含函数指针的“c”结构在哪里。

以及提供以下构造函数的包装类：

```
Allocator::Allocator( osal_allocator* ); 
```

一个函数进行以下调用：

```
001 SomeFunc( SharedMemoryManager* shm )
002 {
003    Allocator myAllocator = shm.allocator();
004
005    myAllocator.doSomething();
006
007    // stuff
008 } 
```

代码失败并带有`SIG SEGV`. 原因是在调用其构造函数后立即调用`003`析构函数。`myAllocator`这意味着`myAllocator`在线无效`005`，因为它已被销毁。

（注意：没有调用默认构造函数，也没有任何赋值运算符）。

如果行`003`更改为：

```
003    Allocator myAllocator( shm.allocator ); 
```

该函数按预期工作，`myAllocators`直到超出范围才调用 ' 的析构函数。

不幸的是，我无法通过一个简单的示例重现此问题。

我在用 ：

```
g++ (GCC) 4.4.6 20110731 (Red Hat 4.4.6-3) 
```

使用以下选项：

```
c++ -MD -D__LINUX__  -g -ansi -Wall -Wextra -Wformat -Wno-format-security -Woverloaded-virtual -Iinc 
```

**为什么编译器会为第一个示例生成析构函数调用**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T11:54:49.060

`Allocator myAllocator = shm.allocator();`是复制初始化，涉及转换构造函数（来自 a `osal_allocator*`）和复制构造函数（来自临时`Allocator`）的调用。被调用的析构函数是临时`Allocator`对象的析构函数。

崩溃可能是由于缺少复制构造函数，或者`Allocator`.

您声称将初始化更改为

```
Allocator myAllocator( shm.allocator ); 
```

有效 - 这是因为不涉及复制 - 直接调用转换构造函数，不创建临时对象。

[阅读“三法则”。](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)

基本上，如果一个类需要析构函数、复制构造函数或复制赋值运算符（通常是类管理资源的情况），则它需要**所有这三个**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:00:12.360

有了这条线

```
Allocator myAllocator = shm.allocator(); 
```

您正在执行以下操作：

1.  构造一个新的`Allocator`临时对象
2.  `Allocator`调用rhs 是临时的复制构造函数
3.  销毁点1创建的临时对象

有两种可能的操作是您不考虑的并且可能会导致 SIG SEV：复制构造函数和析构函数。

# bash - 为什么我的 cron 工作不起作用？

> ID：13971617
> 
> 赞同：0
> 
> 时间：2012-12-20T11:52:23.030
> 
> 标签：bash, shell, ssh, cron, scp

我有一个 cron 作业，我通过`crontab -e`它从服务器备份某个文件并将其保存到我的家庭驱动器并带有时间戳。我一直执行它来测试它，但它似乎不起作用？

```
 * * * * * /home/arran/hourly.bash > /home/arran 
```

一定有什么我错过了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:06:53.777

您正在将命令的输出重定向到一个目录，该目录将失败。改为重定向到文件：

```
* * * * * /home/arran/hourly.bash > /home/arran/hourly.log 
```

# ckan - 尝试将文件上传到 CKAN 时出错：“无法获取存储上传凭据。上传无法继续”

> ID：13971622
> 
> 赞同：4
> 
> 时间：2012-12-20T11:52:36.423
> 
> 标签：ckan

尝试将文件上传到 CKAN 中的数据集时，我在 Web 界面中收到此错误：

```
Failed to get credentials for storage upload. Upload cannot proceed 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T11:52:36.423

此错误通常是由于 CKAN 的 FileStore 未正确设置或 FileStore 的依赖项未正确安装引起的。请参阅 CKAN 的[FileStore 和 File Uploads](http://docs.ckan.org/en/latest/filestore.html)文档。

确保：

*   你已经`pairtree`安装在你的 CKAN virtualenv ( `pip install pairtree`)

*   你已经`argparse`安装在你的 CKAN virtualenv ( `pip install argparse`)

*   您在CKAN ini 文件的部分中正确设置了`ofs.impl`和`ofs.storage_dir`选项，例如：`[app:main]`

    ```
    ofs.impl = pairtree
    ofs.storage_dir = /mnt/datalocale 
    ```

*   确保您的`ofs.storage_dir`目录存在。在 shell 中运行此命令：`mkdir -p /path/to/your/ofs/storage/dir`.

*   确保运行 CKAN 的操作系统用户（例如用户`www-data`，如果您在 Ubuntu 上使用 Apache 运行 CKAN）对`ofs.storage_dir`. 例如，如果您在 Ubuntu 上使用 Apache 运行 CKAN，请在终端中运行以下命令：

    ```
    sudo chown www-data /path/to/your/ofs/storage_dir
    sudo chmod u+rwx /path/to/your/ofs/storage_dir
    sudo service apache2 restart 
    ```

如果以上所有方法都失败了，那么请使用[StackOverflow 上的 CKAN 标签](https://stackoverflow.com/questions/tagged/ckan)或[ckan-dev 邮件列表](http://lists.okfn.org/mailman/listinfo/ckan-dev)寻求帮助。发布时，包括以下内容很有用：

*   您使用的是什么操作系统
*   您使用的是什么版本的 CKAN
*   您是如何部署 CKAN 的（包安装或源代码安装？Apache 网络服务器或粘贴开发安装？）
*   您的 CKAN ini 文件（已删除任何敏感细节）
*   您从 CKAN 获得的任何错误，无论是来自您正在运行的终端，`paster serve ...`还是如果您使用 Apache 运行 CKAN，来自日志文件（例如`/var/log/apache2/YOURSITE.error.log`. 如果你能给我们一个完整的 Python 回溯，这通常是最有用的。
*   `pip freeze`在 CKAN virtualenv 中运行时的命令输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T21:58:23.390

如果较旧的答案不起作用，那么您可能没有另一个选项来检查，特别是如果您没有在根 url (/) 上运行 CKAN，是否`ckan.api_url`是正确设置。此配置不会自动设置`ckan.site_url`（它应该是），如果 CKAN 安装在子路径上，例如 /ckan/，则从 Javascript 进行的任何 API 调用都将失败。要尝试的其他配置是设置`ckan.api_url`为与`ckan.site_url`.

# jquery - 在 iOS 移动设备上查看时页脚随内容滚动

> ID：13971626
> 
> 赞同：1
> 
> 时间：2012-12-20T11:53:10.823
> 
> 标签：jquery, ios, css, footer, sticky-footer

我有一个 wordpress 网站，它使用粘性页脚和一些 jquery 来隐藏和显示微小的导航栏。

当您在 iphone 上查看网站[http://iqonline.eu](http://iqonline.eu)时，当您滚动页脚时，会跟随页面上的内容，然后跳回底部。有谁知道如何解决此问题，使其保留在页面底部？适用于所有浏览器和 Android 设备，仅适用于 iOS。

用于隐藏和显示各种元素的 jQuery 代码。

```
//showing and hiding the whole footer 
$(document).ready(function() {
    $("#clickme").click(function(event) {
        event.preventDefault() 
        $("#footer").fadeToggle(300);
        $('#menu, #menu2, #menu3, #menu4, #tiny_menu').hide(300);
        $(this).html(($('#clickme').text() == 'Show') ? 'Hide' : 'Show');
        $(this).toggleClass("active");
        $(this).attr("title", ($(this).hasClass("active")?"Show":"Hide") + " the menu");
      });
    });

//toggle the tiny menu to show menu items
jQuery(document).ready(function() { 
  jQuery("#tiny_menu").hide();
  jQuery("#menu-button").click(function(event)
  {
    event.preventDefault()
    jQuery(this).next("#tiny_menu").slideToggle(300);
  });
}); 
```

小菜单CSS

```
.tiny_menu_bar {
    display:none;
    width:524px;
    position: fixed!important;
    bottom: 0px!important;
    z-index: 2;
    height: 30px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    box-sizing: border-box;
    -ms-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    background: #e2e2e2; /* Old browsers */
    background: -moz-linear-gradient(top, #e2e2e2 0%, #dbdbdb 50%, #d1d1d1 51%, #fefefe 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#e2e2e2), color-stop(50%,#dbdbdb), color-stop(51%,#d1d1d1), color-stop(100%,#fefefe)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #e2e2e2 0%,#dbdbdb 50%,#d1d1d1 51%,#fefefe 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #e2e2e2 0%,#dbdbdb 50%,#d1d1d1 51%,#fefefe 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #e2e2e2 0%,#dbdbdb 50%,#d1d1d1 51%,#fefefe 100%); /* IE10+ */
    background: linear-gradient(to bottom, #e2e2e2 0%,#dbdbdb 50%,#d1d1d1 51%,#fefefe 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e2e2e2', endColorstr='#fefefe',GradientType=0 ); /* IE6-9 */
} 
```

如果有人需要更多代码，请大喊。

# xaml - 停止 ScrollView 滚动超出内容范围

> ID：13971627
> 
> 赞同：1
> 
> 时间：2012-12-20T11:53:14.840
> 
> 标签：xaml, windows-8, winrt-xaml

我有一个分组`GridView`，里面有一些明确大小的数据绑定控件。

有`GridView`a`VariableSizedWrapGrid`作为`ItemPanelTemplate`类型。

如您所见，`ScrollView`卷轴远远超出了内容。

任何帮助表示赞赏，下面是 XAML。

![ScrollView 超出内容区域](../Images/201f0fbbcf3d8059b54b50205e8b484e.png)

```
<GridView Grid.Row="2" ItemsSource="{Binding Source={StaticResource contentSetListViewSource}}" ItemTemplate="{StaticResource DashboardContentSetItem}" SelectedIndex="-1" SelectionMode="Multiple" Padding="0,0,0,15" VerticalAlignment="Center"  Margin="20 0" HorizontalAlignment="Left">
    <GridView.GroupStyle>
        <GroupStyle>                        
            <GroupStyle.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Key}" Margin="0 10" Style="{StaticResource GroupHeaderTextStyle}"/>
                </DataTemplate>
            </GroupStyle.HeaderTemplate>
            <GroupStyle.Panel>
                <ItemsPanelTemplate>
                    <VariableSizedWrapGrid/>
                </ItemsPanelTemplate>
            </GroupStyle.Panel>
        </GroupStyle>
    </GridView.GroupStyle>                
</GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:49:41.437

`GridView`默认情况下使用一个`ItemsPanelTemplate`由包含一个的边框组成`WrapGrid`。

所以我瞄准了错误的面板，这是我使用的修复：

```
<GridView.ItemsPanel>
    <ItemsPanelTemplate>
        <StackPanel Orientation="Horizontal" />
    </ItemsPanelTemplate>
</GridView.ItemsPanel> 
```

**原因**是 WrapGrid 不是可变大小的，它固定为最大集合的大小，第二个分组（1 个项目）的大小与第一个（5 个项目）的大小相同，这就是它扩展到内容之外的原因。

# database-design - 表级别和外键之间的关系

> ID：13971628
> 
> 赞同：0
> 
> 时间：2012-12-20T11:53:21.270
> 
> 标签：database-design, relational-database

我需要有关数据库中以下结构的帮助。

这些是桌子

1.  价位表
2.  可选组
3.  产品组
4.  产品

现在我需要整理这些东西，让我们从最后一个表格文章开始。

文章属于一个产品，那么该产品属于一个产品组，那么该产品组属于一个OptionalGroup，而OptionalGroup 属于一个PriceList。

而今天的关系看起来是这样的。

*   表：价目表
*   表：OptionalGroup 具有 PriceListId 的 ForeignKey
*   表：ProductGroup 具有到 OptionalGroup 的 ForeignKey
*   表：产品具有 ProductGroup 的 ForeignKey

样本数据：

```
>  Pricelist: 81
   >  OptionalGroup: Shoes
       > ProductGroup: Shoelace
       >   Product: Shoelace 1
       >   Product: Shoelace 2 
```

我应该如何设计这个？

这样，为了得到一个产品，我现在需要 pricelist, optionalgroup, productgroup 然后我就可以得到产品。因为 pricelist 有自己的 OptionalGroup，它也可以有相同的 optionalgroup 名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:21:12.857

> 我应该如何设计这个？

您已经这样做了；) 您的数据模型似乎符合您所描述的要求。

不过，在不从根本上改变基本思想的情况下，有一些可能的变化。例如...

![在此处输入图像描述](../Images/c66a55ff6edcc8b618de323a8f590e28.png)

...使用[识别](https://stackoverflow.com/a/13295288/533120)关系将父 PK“迁移”到子 PK，因此您可以（例如）`PriceListId`直接从`Product`表中获取，而不用`ProductGroup`和`OptionalGroup`表连接，但代价是“更胖”的子 FK。

具有非识别关系的设计是否比此处显示的设计更好是工程权衡的问题。两者都有优点和缺点，您的任务是*为您的特定情况*选择一个优点更多、缺点更少的选项。

* * *

此外，如果表中没有`(other fields)`，`PriceList`并且您永远不能有一个空的价目表（或者根本不区分空的价目表和不存在的价目表），您可以完全省略该表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:10:14.257

这个设计会做，

```
table name PriceList
ProductID--> PK
Price
table name OptionalGroup
GroupID--> PK
ProductID--> FK
GroupName
table name ProductGroup
ProductGroupID--> PK
ProductGroupName
GroupID--> FK
table name Product
ProductName
ProductGroupID-->FK 
```

# node.js - 通过 node.js 将文档插入到 mongodb 数据库的集合中

> ID：13971634
> 
> 赞同：0
> 
> 时间：2012-12-20T11:53:48.000
> 
> 标签：node.js, mongodb, insert, node-mongodb-native

我有一个使用 node.js、express 和串行端口编写的小型 Web 服务器，它会不断地监听通过 USB 连接到 mac 的温度传感器。代码如下：

```
var serialport = require("serialport"),       // include the serialport library
    SerialPort  = serialport.SerialPort,      // make a local instance of serial
    app = require('express')(),           // start Express framework
    server = require('http').createServer(app),   // start an HTTP server
    io = require('socket.io').listen(server);   // filter the server using socket.io

var mongo = require('mongodb');

var Server = mongo.Server,
    Db = mongo.Db,
    BSON = mongo.BSONPure;

var server = new Server('localhost', 27017, {auto_reconnect: true});
db = new Db('sensordatabase', server);

db.open(function(err, db) {
  if(!err) {
    console.log("Connected to 'sensordatabase' database");
    db.collection('tempsensor', {safe:true}, function(err, collection) {
      if (err) {
        console.log("The 'values' collection doesn't exist. Creating it with sample data...");
      }
    });
  }
});

var serialData = {};                // object to hold what goes out to the client
server.listen(8080);                // listen for incoming requests on the server
console.log("Listening for new clients on port 8080");

// open the serial port. Change the name to the name of your port, just like in Processing and Arduino:
var myPort = new SerialPort("/dev/cu.usbmodem5d11", { 
// look for return and newline at the end of each data packet:
  parser: serialport.parsers.readline("\r\n") 
});

// respond to web GET requests with the index.html page:
app.get('/', function (request, response) {
  myPort.on('data', function (data) {
    // set the value property of scores to the serial string:
    serialData.value = data;
    response.send(data);
    // for debugging, you should see this in Terminal:
    console.log(data);
  });
}); 
```

从上面的代码可以看出，我的传感器值存储在“数据”中。

现在我想将此数据保存到我的 tempsensor 集合中，该集合具有以下格式：

```
{
    "Physicalentity": "Temperature",
    "Unit": "Celsius",
    "value": "",
    "time": "",
    "date": ""
  }, 
```

我的问题是：

1：如何使用node.js的mongodb驱动程序将“数据”保存在值对象中？2：如何添加数据自动添加的时间？

我知道有一个调用`new Date()`日期的函数，是否有类似的时间函数？

我真的很感激任何帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:06:21.850

请记住 - 这不是学习教程的地方，这是人们遇到与他们的学习能力无关的技术或软件问题的地方。为了改善这一点，请阅读使用 mongodb 和整体使用 node.js 的示例。

**以下是有关您的情况的一些详细信息，以指导您：**

在 myPort.on('data') 的回调函数中，您可以访问您的数据，这是您必须将数据保存到数据库的确切位置。

同时，当您初始化数据库连接和集合时，您需要获取集合的句柄以便之后在应用程序中使用它。在 db.collection('tempsensor') 的回调函数中，您有对象集合 - 这是执行 mongodb 函数以处理该集合中的数据所需要的。

因此，将此变量保存在共享范围内的某处（可以是全局变量或集合数组）。

然后在收到数据的回调中，使用此集合并传递 Serdar Dogruyol 建议的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:47:19.690

```
> db.c.insert({'date': new Date(), 'time_hours': new Date().getHours(), 'time_mi
n': new Date().getMinutes()})
Inserted 1 record(s) in 31ms
> db.c.find({})
{ "_id" : ObjectId("50d30884059dc377c6ff66ec"), "date" : ISODate("2012-12-20T12:
45:56.493Z"), "time_hours" : 16, "time_min" : 45 }
Fetched 1 record(s) in 0ms
> 
```

使用 Mongo 外壳。这意味着您可以在任何 mongo 驱动程序中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:00:22.250

您可以执行类似的操作将文档插入您的集合中。

```
db.collection('tempsensor',{safe:true}, function(err, collection) {

collection.insert({
"Physicalentity": "Temperature",
"Unit": "Celsius",
"value": "",
"time": "",
"date": ""
}, function(err, doc) {
  if(err){
     console.log("Error on document insert");
  }else{
     //Document saved succesfuly
     }
  });
}); 
```

# html - 根据浏览器宽度使用子主题

> ID：13971637
> 
> 赞同：1
> 
> 时间：2012-12-20T11:54:06.417
> 
> 标签：html, css, wordpress, responsive-design

是否可以根据浏览器宽度使用不同的子主题？

我意识到有 CSS 媒体查询来更改样式表，但我想知道宽度为 420 像素的手机是否可以加载页面，并且 header.php 看到了这一点并将其指向不同的头文件。

如果这是不可能的，或者如果它非常困难，那么我需要找到一种方法让它根据该宽度指向特定的 WordPress 页面（就像它在 WordPress 中一样）。

简而言之，通过我设置的方式，我只是想避免 CSS 媒体查询。

如果这是简单或过于复杂的事情，我提前道歉。我在编程方面有点绿色。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:05:04.790

CSS 媒体查询只是根据浏览器宽度（我确定你知道）改变 CSS 的一种方式，在你的情况下，我会使用 CSS 媒体查询，但如果你认为我不知道要设置什么规则等，那么也许这个参考将帮助

```
http://css-tricks.com/snippets/css/media-queries-for-standard-devices/ 
```

CSS 媒体查询并不复杂，它们只是针对不同屏幕宽度的样式表

# sas - 您如何在 SAS for KNN 中使用 Proc Discrim 处理死锁？

> ID：13971640
> 
> 赞同：0
> 
> 时间：2012-12-20T11:54:10.853
> 
> 标签：sas, knn

我有一个运行 KNN 分析的 proc discrim 语句。当我设置 k = 1 时，它会为所有内容分配一个类别（如预期的那样）。但是当 k > 1 时，它会留下一些未分配的观察结果（将类别设置为其他）。

我假设这是对两个或更多类别的死锁投票的结果。我知道有一些方法可以解决这个问题，要么随机选择一张陷入僵局的选票作为答案，要么将最近的陷入僵局的选票作为答案。

此功能在 proc discrim 中可用吗？你如何告诉它如何处理死锁？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:13:06.540

当最近邻居的数量为两个或更多时，您将观察分配给“其他”类的假设是由于分配给两个或更多指定类的相同概率是正确的。您可以通过指定 PROC DISCRIM 语句选项 OUT=SASdsn 来查看这一点，以编写一个 SAS 输出数据集，说明该过程对输入观察的分类程度。该输出数据集包含分配给每个指定类别的概率。例如，使用 iris 数据集的两个最近邻 (K=2) 会产生五个观察值，该过程将其分类为不明确的，分配到 Versicolor 或 Virginica 类的概率为 0.50。从输出数据集中，您可以选择这些模糊分类的观察值，并在随后的 DATA 步骤中将它们随机分配给这些类别。或者，您可以将用于对这些模棱两可的观察值进行分类的变量值与每个类别的这些值的平均值进行比较，可能通过计算平方距离 +/- 由每个值的标准差标准化并分配观察到“最接近”的班级。

# javascript - 调整窗口大小时更改图像宽度和高度

> ID：13971641
> 
> 赞同：0
> 
> 时间：2012-12-20T11:54:14.243
> 
> 标签：javascript, jquery

我想在 jquery 中调整窗口大小时更改图像的宽度和高度，我有一个示例站点，但该代码对我来说很难。

示例站点是[http://xctravels.com/](http://xctravels.com/) 在这里我们可以看到窗口调整大小时图像宽度和高度的动态变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:03:59.427

这是一个如何执行此操作的示例：http: [//jsfiddle.net/uEzNj/4/](http://jsfiddle.net/uEzNj/4/)

**JavaScript**

```
var lastSize = { width: $(window).width(), height: $(window).height() };
$(window).resize(function (e) {
    var win = $(window);
    $('img').each(function (i, img) {
        img = $(img);
        var w = img.width(),
            h = img.height();
        img.width(w + win.width() - lastSize.width);
        img.height(w + win.height() - lastSize.height);        
    });
    lastSize = { width: win.width(), height: win.height() };
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:56:46.063

您可以使用 window.resize 事件

```
window.onresize = function(event) {
//Your code
} 
```

例子：

```
<body>
    <script>
        window.onresize=function(){
        if ($("#imageresize").width()>200 && $("#imageresize").height()>200){
            $("#imageresize").width($("#imageresize").width()-parseInt(10));
            $("#imageresize").height($("#imageresize").height()-parseInt(10));
        }
        }
    </script>
    <img src="yourimage.jpg" width="800" height="400" id="imageresize"/>
</body> 
```

上面的例子只是在调整窗口大小时调整图像大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:00:46.370

jQuery 版本的 resize 是这样的：

```
 $(window).resize(function() {
    $('body').prepend('<div>' + $(window).width() + '</div>');
 }); 
```

更多信息在这里：[http ://api.jquery.com/resize/](http://api.jquery.com/resize/)

# c# - 从 javascript 到 C# MVC 的劫持 POST 中的空消息

> ID：13971642
> 
> 赞同：1
> 
> 时间：2012-12-20T11:54:20.717
> 
> 标签：c#, javascript, model-view-controller, post

我试图将自己连接到一个较小的网站，我是其中的成员。它有某种基于 xml 的聊天板，我对其进行解析和统计等。现在我希望能够使用他们自己的发布选项发布简短的摘要，这里由 JavaScript 处理（cb 是聊天板编号）：

```
function CB_Post() {
    jQuery.ajaxSetup({ contentType: "application/x-www-form-urlencoded;charset=utf-8" });
    //alert($("#message").val());
    //$("#fm").serialize()
    $.post("do.aspx?do=add", { message: $("#message").val(), cb: $("#cb").val() }, function (data) {
        if (data == '') {
            document.getElementById("message").value = '';
            FC('message', iMaxChar);
        } else {
            alert(data);
        }
    }, "text"); 
```

到目前为止，我的实现是：

```
public void PostData(string text)
{
    var data = new NameValueCollection();
    data.Add("message", (@text+@"\n"));
    data.Add("cb", "0");
    client.Headers["contentType"] = "application/x-www-form-urlencoded;charset=utf-8";
    var result = client.UploadValues("/cb/do.aspx?do=add", data);            
} 
```

这有效并且消息被发送，但它最终在聊天室中成为一个空字符串，即使我只是发送`"hey"`。我在这里缺少某种格式或编码/解码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:28:41.297

好吧，您会认为会有一些安全措施阻止您这样发布，所以这可能是问题所在。

但是我怀疑 do.aspx 期望的是 JSON 数据而不是 NameValueCollection 对象。

如果你看[一下这篇文章](https://stackoverflow.com/questions/7003740/how-to-convert-namevaluecollection-to-json-string)，似乎推荐的路线是使用 a`Dictionary<string, string>()`然后用`JavaScriptSerializer().serialize`.

# python - 使用 python-requests 模块更新 Session 中的 Cookie

> ID：13971649
> 
> 赞同：5
> 
> 时间：2012-12-20T11:54:30.713
> 
> 标签：python, oauth-2.0, session-cookies, python-requests, http-request

我正在使用*python-requests*模块来处理 oAuth 请求和响应。我想在对象中设置接收到的*access_token*（响应内容为*dict*）`requests.session.cookies`。

如何使用从服务器收到的响应更新现有的会话 cookie？

**[编辑]**

```
self.session = requests.session(auth=self.auth_params)
resp = self.session.post(url, data=data, headers=self.headers)
content = resp.content 
```

我想做类似的事情：

```
requests.utils.dict_from_cookiejar(self.session.cookies).update(content) 
```

在这里，`requests.utils.dict_from_cookiejar(self.session.cookies)`返回带有一个会话密钥的*dict 。*现在，我想更新收到的响应内容`self.session.cookies`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:03:40.123

`requests`可以为你做到这一点，只要你告诉它`requests`你所做的一切都是相同的`session`：

```
>>> import requests
>>> s = requests.session()
>>> s.get('https://www.google.com')
<Response [200]>
>>> s.cookies
<<class 'requests.cookies.RequestsCookieJar'>[Cookie(version=0, name='NID'... 
```

`s.get`使用或`s.post` **将重新使用和更新**服务器发送回客户端的 cookie 的后续请求。

* * *

要将您自己的 Cookie 添加到**单个请求**中，您只需通过 cookies 参数添加它。

```
>>> s.get('https://www.google.com', cookies = {'cookieKey':'cookieValue'}) 
```

除非服务器为提供的 cookie 发回一个新值，否则会话将**不会保留**提供的 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T12:33:57.047

这段代码对我有用。希望它可以帮助别人。

我想用从发布请求接收到的响应值更新 session.cookies 变量。因此，可以在另一个 post/get 请求中使用相同的请求值。

在这里，我做了什么：

1) 更新请求模块到 1.0.3 版本。

2) 创建了 2 个函数

```
 session = requests.session() 
   def set_SC(cookie_val):
            for k,v in cookie_dict.iteritems():
                if not isinstance(v, str):
                    cookie_dict[k] =  str(v) 
            requests.utils.add_dict_to_cookiejar(session.cookies,
                                                 cookie_val)

    def get_SC():
            return requests.utils.dict_from_cookiejar(session.cookies)

    In another function:
    setSC(response.content) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-11T18:06:14.403

为了自己向`requests`模块提供 cookie，您可以将 cookie 参数**用于单个请求**，并给它一个 cookie jar 或包含 cookie 的类似对象的对象。

```
>>> import requests
>>> requests.get('https://www.example.com', cookies {'cookieKey':'cookieValue'}) 
```

但是**，如果您想保留提供的 cookie**而不必每次都设置 cookie 参数，您可以使用请求会话，您也可以将其传递给其他函数，以便它们可以使用和更新相同的 cookie：

```
>>> session = requests.session()
>>> session.cookies.set('cookieKey', 'cookieName')
# In order to avoid cookie collisions
# and to only send cookies to the domain / path they belong to
# you have to provide these detail via additional parameters
>>> session.cookies.set('cookieKey', 'cookieName', path='/', domain='www.example.com') 
```

# elasticsearch - Elasticsearch：单数和复数结果

> ID：13971655
> 
> 赞同：4
> 
> 时间：2012-12-20T11:54:57.203
> 
> 标签：elasticsearch, stemming

我们`minimal_english`在映射中使用了词干过滤器。这是为了确保只有单数和复数是可搜索的，而不是相似的词。例如。`Test`并且在输入术语时`Tests` **应该是**可搜索的`Test`- 但`Tester`, `Testers`,`Testing` **不应该是**. 在尝试使用以下 RESTful API 进行搜索时，`multi_field`属性类型是可搜索的，但`nested`属性类型是不可搜索的：

```
curl -X GET "http://10.113.124.136:9400/libtester/_search?pretty=true" -d '{
  "query": {
    "query_string": {
      "query": " DescriptionDescription ",
      "fields": [
        "abc"
      ]
    }
  }
}' 
```

映射如下所示：

```
{
  "properties": {
    "abc": {
      "type": "multi_field",
      "fields": {
        "c_asset_id": {
          "type": "string",
          "index": "analyzed",
          "include_in_all": true,
          "analyzer": "basic_english"
        },
        "untouched": {
          "type": "string",
          "index": "analyzed",
          "include_in_all": false,
          "analyzer": "string_lowercase"
        }
      }
    },
    "xyz": {
      "type": "nested",
      "properties": {
        "c_viewpoint": {
          "type": "multi_field",
          "fields": {
            "c_viewpoint": {
              "type": "string",
              "index": "analyzed",
              "include_in_all": true,
              "analyzer": "basic_english"
            },
            "untouched": {
              "type": "string",
              "index": "analyzed",
              "include_in_all": false,
              "analyzer": "string_lowercase"
            }
          }
        }
      }
    },
    ...
  }
} 
```

这是否与嵌套类型的映射有关 - xyz，它们不能从与 multi_field 类型相同的 API 中搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:09:47.453

您可以搜索嵌套属性，它只需要稍微不同的语法。您必须指定路径，然后为您正在搜索的每个属性显式使用该路径。

本教程[很好地概述了嵌套文档的工作原理](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)。

# java - 如何避免pdfbox附加单独的单词

> ID：13971656
> 
> 赞同：4
> 
> 时间：2012-12-20T11:54:58.573
> 
> 标签：java, pdfbox

我正在制作一个允许使用 apache Solr 搜索 pdf 的应用程序。我无法在 pdf 中找到某些术语。

我注意到列中的单词被附加了。

例子

```
 Column1 | Column2
 stack   | overflow 
```

在这里，PdftextStripper 有时会给我 stackoverflow 作为提取的文本。这会导致 solr 中的错误标记化，从而阻止您找到该术语。（是的，我知道我可以使用通配符，但这在短语查询中不起作用）

我一直在查看来源以了解导致问题的原因。但似乎 writePage 方法必须猜测空格。我无法真正改变它，因为它看起来很复杂。

**是否有任何其他解决方案可以从带有列的 pdf 中获得良好的文本提取？**

*   也许某种转换其他程序。
*   也许是 pdfbox 的补丁。
*   是的，我见过类似的问题，但他们主要处理提取的顺序（在我的情况下这并不重要）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:03:41.970

我在用 PDFbox 提取文本时遇到了同样的问题。我通过获取每个字符的位置信息解决了这个问题。我取了每个字符的 x 位置和 y 位置。并实现了一个简单的逻辑来区分单词。在此之前，我的单词分隔符只是“”（空格）。我又加了一个逻辑，如果两个字符的 X 位置的差异超过某个值（这个值是你的选择。）并且它在同一行，那就是相同的 y 坐标（不同的 y 坐标肯定意味着新词），我把它们当作一个新词。通过这个逻辑，我能够解决表格内容、新行等问题。

此[链接](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/util/TextPosition.html)将帮助您使用 PDFbox 从 pdf 中获取字符的位置。

# .net - 在 .NET 中测试有效的 JSON

> ID：13971663
> 
> 赞同：0
> 
> 时间：2012-12-20T11:55:20.457
> 
> 标签：.net, ajax, json, ashx

.NET 中有没有一种方法可以测试我要发送回客户端的 JSON 字符串是否有效？我正在使用一个接受一堆表单变量并返回由客户端解释的 JSON 块的 ASHX 处理程序。JSON 中的一个参数包含一个 html 块，尽管编码有时会被字符损坏，从而导致客户端出现 JSON 错误。我想在它发生之前抓住它并将详细信息通过电子邮件发送给系统管理员。

**附加信息：**

*目标框架 4.0*

*.ajax 用于发送和读取响应的 JQuery 方法。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:02:05.507

好吧，一个想法是在将其发送到客户端之前尝试反序列化服务器端（使用您选择的 JSON 框架，无论是[Newtonsoft.Json](http://james.newtonking.com/pages/json-net.aspx)还是[JsonFx ）。](https://github.com/jsonfx/jsonfx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:01:45.777

我会使用[Json.NET](http://james.newtonking.com/projects/json-net.aspx)`JObject.Parse(json)`并在 try/catch 块中有类似的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:02:28.097

您可以尝试使用[DataContractJsonSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.json.datacontractjsonserializer.aspx)类对其进行反序列化。

# django - django-selectable LookupAlreadyRegistered 错误

> ID：13971668
> 
> 赞同：0
> 
> 时间：2012-12-20T11:55:41.137
> 
> 标签：django, autocomplete

我正在尝试 django-selectable 此处文档中给出的“水果”示例 - [https://django-selectable.readthedocs.org/en/version-0.6.2/quick-start.html#defining-a-lookup](https://django-selectable.readthedocs.org/en/version-0.6.2/quick-start.html#defining-a-lookup)

得到 LookupAlreadyRegistered 错误，关于这个错误有一个小注释，但我不知道如何解决这个问题。我知道它与 import 语句有关，我使用的是 django-1.3

如果需要，我会提供更多信息，但我只是使用与示例中相同的代码。

好心的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:06:22.650

检查您发布的链接中的注释：

> 您应该只注册一次查找。尝试多次注册同一个查找类将导致 LookupAlreadyRegistered 错误。与 LookupAlreadyRegistered 错误相关的常见问题与项目中不一致的导入路径有关。在 Django 1.4 之前，默认的 manage.py 允许使用和不使用项目名称进行导入（即从 myproject.myapp 导入查找或从 myapp 导入查找）。这会导致 lookup.py 文件被导入两次，并且注册代码执行两次。值得庆幸的是，这不再是 Django 1.4 中的默认设置。保持导入一致以包含项目名称（当您的应用程序包含在项目目录中时）将避免这些错误。

# php - 将表单数据插入 MySQL 数据库

> ID：13971669
> 
> 赞同：-1
> 
> 时间：2012-12-20T11:55:42.033
> 
> 标签：php, mysql, forms

嗨，伙计们，我在将表单数据添加到数据库时遇到问题。由于某种原因，没有插入数据。这是我的代码：

```
<?php include_once 'secure/connect.php'; ?>
<?php 
$name = "Your Name";
$email = "Your Best Email";
$msg_to_user = "";
if ($_POST['name'] != ""){
    //Be sure to filter this data to deter SQL injection
    $name =  $_POST['name'];
    $name = stripslashes($name);
    $name = strip_tags($name);

    $email = $_POST['email'];
    $email = stripslashes($email);
    $email = strip_tags($email);

    $sql = mysql_query("SELECT * FROM newsletter WHERE email='$email'");
    $numRows = mysql_num_rows($sql);
    if(!$email){
        $msg_to_user = '<h4><font color="FF0000">Please Type an email address ' . $name . '</font></h4>';
    } else if ($numRows > 0) {
        $msg_to_user = '<h4><font color="FF0000">' . $email . ' is already in our system</font></h4>';
    } else {
        $sql_insert = mysql_query("INSERT INTO newsletter (name, email, dateTime) VALUES ('$name', '$email', now())") or die (mysql_error());
        $msg_to_user = '<h4><font color="0066FF">Thanks' . $name . ', You have been added successfully</font></h4>';
        $name = "";
        $email = "";
    }
}
?> 
```

我的 html 表单如下所示：

```
<div class="topForm">
<H3 style="text-align:center">SIGN UP FOR OUR NEWSLETTER</H3>
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<input type="text" name="name" value="<?php echo $name; ?>"/>
<input type="text" name="email" value="<?php echo $email; ?>"/><br/>
<input name="mySubmitBtn" type="submit"  value="SUBMIT">
<?php echo $msg_to_user; ?>
</form>
</div> 
```

非常感谢所有菲利普

这就是我现在所拥有的，没有任何工作仍然有效......

```
<?php 
$name = "Your Name";
$email = "Your Best Email";
$msg_to_user = "";
if ($_POST['name'] != ""){

    include_once 'secure/connect.php';

    //Be sure to filter this data to deter SQL injection
    $name =  $_POST['name'];
    $name = stripslashes($name);
    $name = strip_tags($name);

    $email = $_POST['email'];
    $email = stripslashes($email);
    $email = strip_tags($email);

    $sql = mysql_query("SELECT * FROM newsletter WHERE email='$email'");
    $numRows = mysql_num_rows($sql);
    if(!$email){
        $msg_to_user = '<h4><font color="FF0000">Please Type an email address ' . $name . '</font></h4>';
    } else if ($numRows > 0) {
        $msg_to_user = '<h4><font color="FF0000">' . $email . ' is already in our system</font></h4>';
    } else {
        $sql_insert = mysql_query("INSERT INTO newsletter (name, email) VALUES ('".$name."', '".$email."')") or die (mysql_error());
        $msg_to_user = '<h4><font color="0066FF">Thanks' . $name . ', You have been added successfully</font></h4>';
        $name = "";
        $email = "";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:22:37.560

你必须改变`now()`你的代码。并使用以下代码。

```
$time = time()  ;
$sql_insert = mysql_query("INSERT INTO newsletter (name, email, dateTime) VALUES ('".$name."', '".$email."', '".$time."' )") or die (mysql_error()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:02:16.883

不考虑其他错误或不一致。另请注意，您应该使用 mysqli 或 pdo。但是php使用`time()`

```
$sql_insert = mysql_query("
                           INSERT INTO newsletter 
                           (name, email, dateTime) 
                           VALUES 
                           ('$name', '$email', ".time().")
                         "); 
```

或者如果你想要一个日期时间而不是时间戳，你可以使用这个`date()`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:06:59.353

1.  确保您已连接到数据库！看看怎么`echo mysql_error();`说

2.  如果提交了表单，则捕获值，然后进行清理

3.  插入查询

ps：看看下面是做什么的：

```
if(isset($_POST['name']) ...

echo mysql_insert_id();

time() not now() 
```

查看`id`插入的新数据

如果您按照这些步骤操作并且已连接到数据库，您的代码应该可以工作

# html - 调整浏览器和菜单栏的大小隐藏在标题内

> ID：13971673
> 
> 赞同：0
> 
> 时间：2012-12-20T11:55:44.377
> 
> 标签：html, css

当我重新调整浏览器的大小时，我的菜单栏隐藏在标题中.. 不明白在 CSS 文件中确切更改值的内容...
我不是一个好的 CSS 编码器，只是对它有一点了解.. 在这里是网站：`http://dfgdsgdgdg.com/` 我什至尝试将值从像素更改为百分比，但仍然不明白...... **下面是我在其中更改值的文件：**

```
http://dgdgfg.com/wp-content/themes/emporium/styles/green.css
http://ghdgfhdhgfgh.com/wp-content/themes/emporium/style.css
http://dgfhdghgh.com/wp-content/themes/emporium/css/layout.css?ver=3.5 
```

有人可以调查并解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:07:46.173

style.css 中第 248 行的更改

```
 img, embed, object, video {   
         max-width: 25%;
         height: auto;
      } 
```

或者

```
 <div class="col-1 description" style="height: 25px;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:04:25.273

给你的顶部一个高度，你就准备好了。

```
section.top{
  height:100px;
} 
```

# html - 屏幕分辨率过大时DIV溢出

> ID：13971674
> 
> 赞同：6
> 
> 时间：2012-12-20T11:55:47.233
> 
> 标签：html, css

> **可能重复：**
> [100% 宽度的 bg 图像未在水平滚动时延伸](https://stackoverflow.com/questions/3042979/100-width-bg-images-not-extending-on-horizontal-scroll)

我已经为这个问题苦苦挣扎了很长一段时间。我正在为旅行社构建一个非常基本的 Web 应用程序，但为了提供一些布局，我们决定制作一个带有 2 个彩色子横幅的横幅。问题是，如果我的分辨率是 1366x768 (px)。如果 CSS 正确，横幅自然会适合屏幕分辨率。确实如此，2 个彩色横幅填充到 1366 像素。

有; 但是表格比屏幕分辨率大，所以一旦我向右滚动，我看到我的彩色子横幅根本没有继续，只是纯白色。有什么方法可以让彩色横幅在屏幕边缘之后继续？

我已经为您包含了 HTML 和 CSS 代码：

**HTML**

```
<div class="banner">
  <span>- ETTA (Electronic Transactions for Travel Agents)</span>

  <div class="orangeBanner" />
  <div class="blueBanner" />
</div> 
```

**CSS**

```
.banner img {
    vertical-align: middle;
}

.banner span {
    font-size: 30px;
}

.banner .orangeBanner {
    height: 30px;
    width: 100%;
    line-height: 30px;
    padding-left: 8px;

    font-variant: small-caps;
    background-color: #f18b02;
}

.banner .blueBanner {
    /*Layout*/
    display:inline-block;
    height: 30px;
    width: 100%;
    line-height: 30px;
    padding-left: 8px;
    margin-bottom: 5px;

    /*Style*/
    font-variant:small-caps;
    color: #ABD5DF;
    background-color: #009DE0;
} 
```

非常感谢你的帮助！

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:18:16.503

正如 Andy 所说，`<div>`元素不会自动关闭，因此您应该正确地为它们添加关闭标签。

如果溢出表是一个问题，只需设置一个最大宽度就可以解决这个问题。

例如

```
table {
    max-width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:28:55.883

你得到的评论有一些非常有用的信息。另一个快速修复如下，`<div class="banner">`总是占据 100% 的宽度，而不是左右滚动。

```
.banner  {
    width:100%;
    position:fixed;
    left:0;
} 
```

然而，它可能会弄乱一些相对定位的元素。

# python - 从元素/节点中提取 HTML

> ID：13971678
> 
> 赞同：2
> 
> 时间：2012-12-20T11:55:55.240
> 
> 标签：python, xpath, scrapy

假设有一个html字符串...

```
<div class="content">
   This is some test <b>this is bold </b> this is great list of text.
</div>
<div class="content">
   <ul>
      <li>Item 1</li>
      <li>Item 2</li>
      <li>Item 3</li>
   </ul>
</div> 
```

现在我想使用 Scrapy 将这两个元素的内容刮到一个变量中。

```
def parse(self, response):
   hxs = HtmlXPathSelector(response)

   # this returns all nested elements/nodes except text
   contents = product.select('//div[@class="content"]/*').extract()

   # this returns all nested text except elements/nodes
   contents = product.select('//div[@class="content"]/text()').extract() 
```

如何获取两个元素/节点的整个嵌套 HTML 作为变量中的字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T02:37:29.457

您可以这样做`/node()`- 请参阅[https://stackoverflow.com/a/10899531/85461](https://stackoverflow.com/a/10899531/85461)以回答类似问题。

```
# Returns all child nodes - text as well as elements.
contents = product.select('//div[@class="content"]/node()').extract() 
```

请注意，这`extract()`将返回一个列表，您可以以通常的方式将其连接起来以恢复 HTML：

```
html = "\n".join(contents) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:07:39.720

如果速度不重要，您可以使用 BeautifulSoup [http://www.crummy.com/software/BeautifulSoup/bs4/doc/轻松完成](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

```
from BeautifulSoup import BeautifulSoup
soup = BeautifulSoup(response)
contents = soup.findAll("div", {"class":"content"})
for content in contents:
    print content # this is div html 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-09T17:57:30.810

以下xpath

```
//div[@class="content"]/text()|//div[@class="content"]/b/text()|//div[@class="content"]/ul/li 
```

给出结果，因为您只需要存储两个元素的数据，

```
contents=product.select('//div[@class="content"]/text()|//div[@class="content"]/b/text()|//div[@class="content"]/ul/li').extract() 
```

现在，内容有两个元素的数据

# entity-framework - 具有多个一对多关系的表

> ID：13971686
> 
> 赞同：0
> 
> 时间：2012-12-20T11:56:28.480
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我有一个 EF 代码优先模型，其中一个表与其他表具有多个一对多关系：

```
public class Note
{
  [Key]
  public Guid Id { get; set; }
  public string NoteText { get; set; }
  public string Author { get; set; }
  public DateTime? CreationDate { get; set; }
}

public class Foo
{
  public Foo()
  {
    Notes = new HashSet<Note>();
  }

  [Key]
  public Guid Id { get; set; }
  public virtual ICollection<Note> Notes { get; set; }
  // other properties ommited...
}

public class Bar
{
  public Bar()
  {
    Notes = new HashSet<Note>();
  }

  [Key]
  public Guid Id { get; set; }
  public virtual ICollection<Note> Notes { get; set; }
  // other properties ommited...
} 
```

如您所见，两者`Foo`都有`Bar`自己的 列表`Notes`，但 a`Note`属于 a`Foo` **或**a `Bar`。

在为迁移搭建脚手架时，EF在表中创建了一个外键`Foo`，我认为这是不正确的。相反，我希望在 and 和 and 之间创建一个链接表。`Bar``Notes``Foo``Notes``Bar``Notes`

有没有办法自动做到这一点？还是我必须在我的代码优先实现中手动创建这些类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:19:17.973

这已经在[另一个帖子](https://stackoverflow.com/questions/4251794/how-to-have-many-to-many-association-in-entity-framework-code-first)中得到了回答！但是为了节省您在谷歌上搜索的时间，您将获得一个一对多的关联，这是正确的。您希望代码中存在多对多关系，因此您需要做的是：

在你的笔记课上：

```
public class Note
{
  [Key]
  public Guid Id { get; set; }
  public string NoteText { get; set; }
  public string Author { get; set; }
  public DateTime? CreationDate { get; set; }
  public DateTime? CreationDate { get; set; }
  public virtual ICollection<Foo> Foos { get; set; }
  public virtual ICollection<Bar> Bars { get; set; }
} 
```

希望这可以帮助

# php - 如何显示用户的位置，如在 facebook 中？

> ID：13971689
> 
> 赞同：5
> 
> 时间：2012-12-20T11:56:41.417
> 
> 标签：php, html, tracker

我在很多地方搜索过，但我找不到这个答案。

问题是我想在网页中显示用户当前位置，就像文本一样，而不使用地图并指向它。

我看到很多地方都使用地图来实现，有什么办法吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:58:19.100

您可以使用 HTML5 地理定位功能：[http ://html5demos.com/geo](http://html5demos.com/geo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:03:12.480

HTML5 Geolocation 已经被提及，但我建议您使用[PHP Geo IP Location](http://php.net/manual/en/book.geoip.php)作为备用 - 即使用户不允许 HTML5 位置请求或使用浏览器，它也会从 IP 地址派生一个粗略的位置，这不会支持它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:05:22.300

在您的网页中使用 JavaScript 获取客户端 IP。然后使用 IP 到位置转换 Web 服务将客户端的 IP 地址映射到物理位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T12:02:45.730

尝试谷歌地图 api (v3) 地理编码的东西： [https ://developers.google.com/maps/documentation/javascript/geocoding#GeocodingAddressTypes](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingAddressTypes)

有可能简单地写下当前位置（如街道或城市）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-23T08:06:58.157

我不确定这是否是您正在寻找的，但实现起来非常简单。希望这对你有用。一切顺利！ [http://gonga.in/simple-location-tracker-script/](http://gonga.in/simple-location-tracker-script/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T12:11:54.003

只有通过纬度和经度值，您才能找到可以在程序中使用以下链接的位置。此链接将返回一个包含详细信息的 xml 文件，您可以解析并获取位置名称。希望对您有所帮助

[http://api.geonames.org/findNearbyPlaceName?lat=47.3&lng=9&username=demo](http://api.geonames.org/findNearbyPlaceName?lat=47.3&lng=9&username=demo)

并检查一下这篇文章

[使用php、API自动获取经纬度](https://stackoverflow.com/questions/8633574/get-latitude-and-longitude-automatically-using-php-api)

首先，您需要理想地使用纬度和经度为每个热点提供地理位置。您可以使用 Google Geocoding API 来检查每条记录并存储纬度/经度。

# c - 指针操作

> ID：13971691
> 
> 赞同：3
> 
> 时间：2012-12-20T11:56:53.570
> 
> 标签：c, pointers

```
#include <stdio.h>

int main()
{
    char a[] = "hello";
    char *ptr = a;
    printf ("%c\n",*ptr++);//it prints character 'h'.
    printf ("%c\n",*ptr);//it prints character 'e'.
    return 0;
} 
```

据我了解：在上面的代码中，在`*ptr++`表达式中，两者`*`和`++`具有相同的优先级，并且操作将从右到左进行，这意味着指针将首先递增，然后将发生延迟。所以它应该`'e'`在第一`printf`条语句中打印字符。但事实并非如此。

所以我的问题是：如果它没有在第一个语句`*ptr++`中取消引用该位置，它将在哪里存储增量值（in, ）？`printf`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T11:58:33.210

`ptr++`表示“增量`ptr`，但返回预增量值”。

因此，尽管增量首先发生，但取消引用的是*原始*的非增量指针。

相反，如果您的优先推理是正确的，则应该按预期`*++ptr`打印。意思是“增加并返回增加后的值”。`e``++ptr``ptr`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:59:46.537

无论发生什么都是正确的。

在执行 *ptr ++ 时，它只需要 *ptr 值并执行操作，因为它是一个后增量，如果你使用 ++ *ptr 它会首先打印 e 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:01:03.180

p++ 是后增量，而 ++p 是前增量。p++ 给出 p 的值，然后递增 p 的内容，而 ++p 递增 p 的内容，然后返回 p 的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:03:41.627

它将存储在指针 ptr 本身中。这就像让 ptr 指向它曾经指向的下一个字节：

```
ptr = ptr + 1; 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-20T12:00:11.507

是的，每次使用后指针都会自动递增。

# objective-c - 如果我从从字节缓冲区获取的字符串的开头对其进行子串化，则 NSString intValue 返回 0

> ID：13971698
> 
> 赞同：3
> 
> 时间：2012-12-20T11:57:20.850
> 
> 标签：objective-c, ios

```
NSString *counter = [[NSString alloc] initWithBytes:buffer+1 length:11 encoding:NSUTF8StringEncoding]; //@"003{of}004"
NSString *c1Str = [counter substringToIndex:4];
NSString *c2Str = [counter substringFromIndex:8];

int c1Int = [c1Str intValue];
int c2Int = [c2Str intValue];

NSLog(@"c1Str=%@; c2Str=%@; c1Int=%i; c2Int=%i", c1Str, c2Str, c1Int, c2Int);

//The output is
//c1Str=003; c2Str=004; c1Int=0; c2Int=4 
```

所以我得到 c1Int 的 0（零），而 c2Int 很好。绝对相同的结果是如果我使用：

```
NSArray *counterValues = [counter componentsSeparatedByString:@"{of}"];
int c1Int = [[counterValues objectAtIndex:0] intValue];
int c2Int = [[[counterValues objectAtIndex:1] intValue]; 
```

我从从 NSInputStream 读取的字节缓冲区中获取计数器。将 *counter 直接定义为 @"003{of}004" 可以正常工作。

为什么会这样？*c1Str 中有什么特别之处以至于 intValue 将其视为零？我该如何对抗它？

谢谢

**编辑：** 这个问题对我来说不再是实际的了。但它可能对其他人有用。我无法按照设定的方式理解和解决我的任务。我不得不重新思考并改变我的工作流程。

我想详细说明问题的根源。我通过网络传输 png 文件并在 ios 上接收数据。这个想法是发送一个从文件中读取的字节数组，并附加前导特殊标签以通知文件即将到来以及计数器是什么。

所以发送的结构如下：[6][003{of}004][文件数据包]，其中“[”和“]”括号仅供您理解结构。

正如我提到的，数据来自 NSInputStream，我可以捕获 [6]，我可以捕获 [003{of}004]，我可以捕获其余数据。NSLog 清楚地显示了它。但是计数器字符串确实很奇怪，我会说字符串开头的东西很奇怪。

首先，是的，如果我尝试通过对它们进行子串化来检索这些部分，那么我必须使用奇怪的索引。

无论我使用什么方法来检索 003 和 004，intValue 都会返回 0，而 004 总是按预期正确处理！

如果有人可以解释为什么会发生这种情况（理想情况下是一个可行的解决方案），那绝对是有用的，非常感谢。

非常感谢所有回复的人。

PS我通过将计数器作为字符串单独发送来解决此问题，并在开头附加了不同的通知标签。因为我现在不需要固定长度的计数器，所以我的值只是数字：3{of}4 或 121{of}784 等（没有前导零）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:17:54.243

你有错误的输出，如果你的字符串是 @"003{of}004" 你必须使用另一个索引！

```
NSString *c1Str = [counter substringToIndex:3];
NSString *c2Str = [counter substringFromIndex:7]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:13:26.797

我不知道为什么你的`c1Str`打印`003`在日志中。

改变

```
[counter substringToIndex:4]; 
```

至

```
[counter substringToIndex:3]; 
```

如果你的`counter`字符串是`003{of}004`

# c# - 退出我的 wp7 游戏后图形损坏

> ID：13971703
> 
> 赞同：3
> 
> 时间：2012-12-20T11:57:50.340
> 
> 标签：c#, windows-phone-7, xna

我正在为 wp7 在 xna 中制作视频游戏，但我遇到了一个奇怪的问题。

事实证明，每当我的游戏失去焦点时，例如：

*   从我的游戏中打开网络浏览器
*   游戏中的开放市场
*   关闭游戏

当发生这种情况时，屏幕会充满图形伪像，并且除非您返回游戏，否则设备将无法使用。

我发现，如果您一直按下后退按钮，直到显示“后台应用程序”，它就会再次正常工作。但是如果这个问题仍然存在，我的游戏将无法通过 QA。

我试图评论我的游戏的更新和绘制方法，但它仍然发生！:S

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:31:37.057

好吧，我修好了。

事实证明，在自定义纹理类中，（我不知道为什么）有代码可以创建具有自定义大小的 Texture2D 对象。它运行良好（游戏运行完美），但是设备不喜欢某些东西并且它损坏了后缓冲区。

我所做的是删除该代码并始终以原始大小实例化纹理。现在它工作得很好，没有发现任何文物：D

# php - 使用 zend 表单添加额外元素

> ID：13971704
> 
> 赞同：2
> 
> 时间：2012-12-20T11:57:51.500
> 
> 标签：php, zend-framework

这是我的代码

```
    私人 $elementDecorators = 数组（
        '查看助手',
        '错误'，
        数组（数组（'数据' => 'HtmlTag'），数组（'标签' => 'td'）），
        数组('标签', 数组('tag' => 'td','class'=>'blue-color','placement'=>'prepend')),
        数组（数组（'行' => 'HtmlTag'），数组（'标签' => 'tr'）），

    );
     公共函数初始化（）
     {
      $username = new Zend_Form_Element_Text('username',array(
            '装饰器' =>$this->elementDecorators,
            '标签' =>'用户名',
            '必需' => 真，
            'span' =>array('class'=>'validation','id'=>'unameInfo'),

        ));
    }

       $this->addElements(数组(
                        $用户名
        ));
        $this->setDecorators(数组(
           '表单元素',
            数组（'HtmlTag'，
                数组（'tag'=>'table', 'width' => '100%'）
                ),
               '形式'
        ));

```

为上述代码创建的表单如下

```
 <tr>
       <td id="username-label"><label for="username" class="blue-color required">Username</label></td>
       <td><input type="text" name="username" id="username" value="" span="Array"></td>
   </tr> 
```

我想关注html

```
<tr>
           <td id="username-label"><label for="username" class="blue-color required">Username</label></td>
           <td>
               <input type="text" name="username" id="username" value="" span="Array">
               <span class="validation" id="userinfo"></span>
           </td>
</tr> 
```

如何在上面的 zend 表单代码中添加 span 标签？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:06:44.940

您可以使用[AnyMarkup](http://www.zfsnippets.com/snippets/view/id/62)装饰器。

```
$username  = new Zend_Form_Element_Text('username',array(
     'decorators'    => array(
        'ViewHelper',
         array('AnyMarkup', array('markup' => 'your-markup-here', 'placement' => 'append')),
        'Errors',
        array(array('data' => 'HtmlTag'), array('tag' => 'td')),
        array('Label', array('tag' => 'td','class'=>'blue-color','placement'=>'prepend')),
        array(array('row' => 'HtmlTag'), array('tag' => 'tr')),
     ),
    'label'    => 'Username',
    'required' => true,
    'span'     => array('class'=>'validation','id'=>'unameInfo'), 
    // actually, this last 'span' entry strikes me as odd
)); 
```

要使用短格式（如上）将装饰器添加到元素而不是创建实例，您需要使用元素注册装饰器的路径/前缀，例如：

```
$username->addPrefixPath('My_Decorator_', APPLICATION_PATH . '/../library/My/Decorator', Zend_Form_Element::DECORATOR); 
```

您可以使用以下命令将该前缀/路径添加到所有（当前定​​义的）元素：

```
$form->addElementPrefixPath($prefix, $path) 
```

方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:16:04.323

尝试如下，

```
...
     $submit = new Zend_Form_Element_Submit('submit', array(
                    'label' => 'Submit Button',
                    'class' => 'form-submit',
                    'decorators' => array(
                        'ViewHelper',
                    ),
                ));

        //$submit->removeDecorator('Label');
        $this->addElement($submit);

        $reset = new Zend_Form_Element_Reset('reset', array(
                    'label' => 'Reset Button',
                    'class' => 'form-reset',
                    'decorators' => array(
                        'ViewHelper',
                    ),
                ));
        //$submit->removeDecorator('Label');
        $this->addElement($reset);

        $this->addDisplayGroup(array('submit', 'reset',), 'submitButtons', array(
            'order' => 10,
            'decorators' => array(
                'FormElements',
                array(
                    array('data' => 'HtmlTag'),
                    array('tag' => 'td','class'=>'move_td')
                ),
                array(
                    array('row' => 'HtmlTag', 'class' => 'element'),
                    array('tag' => 'tr')
                )
            ),
        ));
... 
```

这将生成如下代码，

```
...
<td class="move_td">

<input type="submit" class="form-submit" value="Submit Button" id="submit" name="submit">

<input type="reset" class="form-reset" value="Reset Button" id="reset" name="reset">
</td>
... 
```

**更新**

使用下面的代码生成跨度

```
$this->addElement(
        'hidden',
        'dummy',
        array(
            'required' => false,
            'ignore' => true,
            'autoInsertNotEmptyValidator' => false,
            'decorators' => array(
                array(
                    'HtmlTag', array(
                        'tag'  => 'span',
                        'id'   => 'span-id',
                        'class' => 'span-class'
                    )
                )
            )
        )
    );
    $this->dummy->clearValidators(); 
```

现在您需要使用 addDisplayGroup 函数对 html 元素进行分组。

# powershell - Exchange 管理 Shell 捕获启用邮箱错误

> ID：13971708
> 
> 赞同：0
> 
> 时间：2012-12-20T11:58:03.690
> 
> 标签：powershell, exchange-server-2010, emc

我有创建用户帐户并为这些帐户建立电子邮件地址的脚本。所有“创建命令”都被一个 try/catch 块包围，以捕获错误并将消息添加到输出日志。这工作正常......除了启用邮箱命令

```
try { 
    Enable-Maibox (.. parameters ...) 
}
catch {
    $errorsEncountered = $true
    Write-Output "Error establishing e-mail address for $($UserData.username)"
} 
```

当 enable-mailbox 命令失败时...跳过捕获部分。为什么是这样？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:42:53.307

未捕获非终止错误。使用“-ErrorAction Stop”使错误终止错误。

```
Enable-Maibox (.. parameters ...) -ErrorAction Stop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T20:43:25.387

我可能是错的，但“Enable-Maibox”看起来拼写错误。

# haskell - 有没有一种叫做“半单子”或“反单子”的东西？

> ID：13971711
> 
> 赞同：21
> 
> 时间：2012-12-20T11:58:19.457
> 
> 标签：haskell, monads, category-theory

好吧，我正在研究 Haskell Monads。当我阅读维基百科[分类理论](http://en.wikibooks.org/wiki/Haskell/Category_theory)文章时，我发现单子态射的签名看起来很像逻辑中的重言式，但你需要转换`M a`为`~~A`，这里`~`是逻辑否定。

```
return :: a -> M a -- Map to tautology A => ~~A, double negation introduction
(>>=) :: M a -> (a -> M b) -> M b -- Map to tautology ~~A => (A => ~~B) => ~~B 
```

其他操作也是重言式：

```
fmap :: (a -> b) -> M a -> M b -- Map to (A => B) -> (~~A => ~~B)
join :: M (M a) -> M a -- Map to ~~(~~A) => ~~A 
```

也可以理解为，根据普通函数式语言的[Curry-Howard](http://en.wikibooks.org/wiki/Haskell/The_Curry-Howard_isomorphism)对应是直觉逻辑，而不是经典逻辑，所以不能指望像重言式一样`~~A => A`可以有对应。

但我在想别的东西。为什么单子只能与双重否定有关？单一否定的对应关系是什么？这使我得到以下类定义：

```
class Nomad n where
    rfmap :: (a -> b) -> n b -> n a
    dneg :: a -> n (n a)

return :: Nomad n => a -> n (n a)
return = dneg
(>>=) :: Nomad n => n (n a) -> (a -> n (n b)) -> n (n b)
x >>= f = rfmap dneg $ rfmap (rfmap f) x 
```

这里我定义了一个叫做“Nomad”的概念，它支持两种操作（都与直觉逻辑中的一个逻辑公理有关）。请注意，“rfmap”这个名称意味着它的签名类似于 functor 的`fmap`，但结果中`a`和的顺序`b`相反。现在我可以用它们重新定义 Monad 操作，用 replace `M a`to `n (n a)`。

那么现在让我们进入问题部分。Monad是范畴论的一个概念，这似乎意味着我的“Nomad”也是一个范畴论的概念。那是什么？有用吗？该课题是否有论文或研究成果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T13:32:24.020

双重否定是一个*特殊*的单子

```
data Void --no constructor because it is uninhabited

newtype DN a = DN {runDN :: (a -> Void) -> Void}

instance Monad DN where
   return x = DN $ \f -> f x
   m >>= k  = DN $ \c -> runDN m (\a -> runDN (k a) c)) 
```

实际上，这是一个更一般的单子的例子

```
type DN = Cont Void
newtype Cont r a = Cont {runCont :: (a -> r) -> r} 
```

这是继续传递的单子。

像“monad”这样的概念不仅由签名定义，还由一些法律定义。所以，这里有一个问题，你的建筑的法律应该是什么？

```
(a -> b) -> f b -> f a 
```

是范畴论中众所周知的一种方法的签名，即**逆变函子**。它基本上遵循与函子相同的定律（保留（共）组成和同一性）。实际上，逆变函子正是相反范畴的函子。由于我们对应该是内函子的“haskell 函子”感兴趣，我们可以看到“haskell 逆变函子”是函子`Hask -> Hask_Op`。

另一方面，怎么办

```
a -> f (f a) 
```

这应该有什么法律？我有一个建议。在范畴论中，可以在 Functor 之间进行映射。`F, G`给定两个从类别`C`到类别的函子，从到`D`的*自然变换*是 中的态射`F``G``D`

```
forall a. F a -> G a 
```

遵守某些相干定律。您可以使用自然变换做很多事情，包括使用它们来定义“函子类别”。但是，经典的笑话（由于 Mac Lane）是发明范畴来谈论函子，发明函子来谈论自然变换，发明自然变换来谈论*附属词*。

如果存在两个自然变换，则函子`F : D -> C`和函子`G : C -> D`形成从`C`到的附属物`D`

```
unit : Id -> G . F
counit : F . G -> Id 
```

这种附加的想法是理解单子的常用方法。每个附加词都以一种完全自然的方式产生一个单子。也就是说，由于这两个函子的组合是一个内函子，并且你有类似于返回的东西（单元），你所需要的只是连接。但这很容易，join 只是一个功能`G . F . G . F -> G . F`，您只需在“中间”使用 counit 即可。

那么，有了这一切，你在寻找什么？好

```
dneg :: a -> n (n a) 
```

看起来与`unit`逆变函子与自身的附属物完全一样。因此，您的`Nomad`类型很可能（当然，如果您使用它来构造 monad 是正确的）与“自伴随的逆变函子”完全相同。搜索自伴随函子将带您回到双重否定和连续传递……这正是我们开始的地方！

* * *

编辑：几乎可以肯定上面的一些箭头是向后的。不过，基本的想法是正确的。您可以使用以下引文自己解决：

关于范畴论的最好的书可能是，

*   Steve Awodey，*范畴论*
*   Sanders Mac Lane，*工作数学家的分类*

尽管存在许多更平易近人的介绍性书籍，包括 Benjamin Pierces 为计算机科学家编写的关于范畴论的书。

在线视频讲座

*   [来自俄勒冈州编程语言暑期学校](http://www.cs.uoregon.edu/Activities/summerschool/summer12/curriculum.html)的 Steve Awodey 的范畴论讲座
*   youtube 上的 Catsters 简短讲座，[索引在这里](https://www.scss.tcd.ie/Edsko.de.Vries/ct/catsters/linear.php)，特别注意关于附件的视频

许多论文探讨了延续单子的附加角，例如

*   Hayo Thielecke，*连续语义和自伴随*

搜索词“self adjoint”、“continuation”和“monad”都很好。此外，许多博主也写过关于这些问题的文章。如果你用谷歌搜索“monads 来自哪里”，你会得到有用的结果，比如来自 n 类别咖啡馆的这个，或者[来自](http://golem.ph.utexas.edu/category/2012/09/where_do_monads_come_from.html)sigfpe 的[这个。](http://blog.sigfpe.com/2009/12/where-do-monads-come-from.html)还有 Sjoerd Vissche与 Comonad 阅读器 的[链接。](http://comonad.com/reader/2011/monads-from-comonads/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-20T12:29:08.087

那将是一个自伴逆变函子。`rfmap`提供逆变函子部分，`dneg`是附加的单位和单位。

`Op r`是一个例子，它创建了延续单子。有关某些代码，请参阅[http://hackage.haskell.org/package/adjunctions](http://hackage.haskell.org/package/adjunctions)中的逆变模块。

您应该阅读[http://comonad.com/reader/2011/monads-from-comonads/](http://comonad.com/reader/2011/monads-from-comonads/)，这是相关且非常有趣的。

# c++ - 单元测试 - 设置私有成员以获得所需的对象状态

> ID：13971717
> 
> 赞同：9
> 
> 时间：2012-12-20T11:58:41.460
> 
> 标签：c++, unit-testing

我正在迈出单元测试的第一步，并且遇到了封装问题。我的类有一些不应该对客户端可见的私有成员变量，但是为了让我将对象置于我想要测试它的状态，我需要设置这些私有变量。

假设我有这样的代码：

```
Class Foo {

public:
  int action() ;  
private:
  int state ;

} ;

int Foo::action()
{
  if(this->state == 1)
    return 1 ;
  else
    return 0 ;
} 
```

所以现在我想测试`Foo::action()`，但我需要能够设置`Foo::state`能够在不同场景下检查功能。一种解决方案是测试代码中的邪恶“ `define private public`”。但是还有什么更优雅的吗？我想强调这`Foo::state`是一个不应该被客户端访问的变量，所以我不想声明任何公共设置器。

编辑：

我现在认为扩展我想在测试代码中测试的类并在派生类中包含设置器是可行的，前提是我将私有变量更改为受保护的。但这是一个“仅一代”的解决方案，仍然感觉像是一种黑客行为，而不是一种正确的方法。

编辑2：

在阅读了我得到的答案和评论后（特别感谢 Lieven 和 ap。）我相信我现在尝试测试的实际课程（不是我提供的简单示例）做得太多了，我的问题的答案正在发生变化将它的一些逻辑放到另一个类中，供大佬使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:04:16.930

只有两种可能性*（除了重构）*

1.  **使用公共接口**设置状态。
2.  **如果您无法通过公共接口将其设置为，则**该状态是多余的。****

 **选项 2 是不言自明的，很可能不适用于您的案例，因此您只能通过类的公共接口设置状态。

正如您已经提到的，这是可能的，但需要大量代码才能达到正确的状态。这本身可能表明您的课程目前正在做很多事情，是时候将您的课程的一部分重构为更小的、可测试的类了。

从不[测试私有方法](http://lostechies.com/chadmyers/2008/11/21/do-not-test-private-methods/)

> 如果您发现需要测试私有方法，那么您做错了其他事情。可以这么说，存在“上游”问题。由于此过程中先前的一些其他错误，您已经遇到了这个问题。尝试准确地隔离那是什么，然后将其删除，而不是弯曲您的测试以在测试中走上一条痛苦的脆弱之路。

和[单元测试私有成员](http://blog.developers.ba/post/2009/04/12/unit-testing-private-methods-yes-or-no.aspx)

> 我建议不要对私有方法进行单元测试。由于它们是私有的，它们可以在每次发布之间以任何可以想象（或不可想象？）的方式进行更改。如果给定的私有方法对类的操作非常重要，以至于您认为它值得测试用例，那么可能是时候将其重构为受保护或公共方法了

一个常见的引用是

> 你不应该碰你的私处

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:44:28.413

如果您的测试类名为 MyTestClass，则将 MyTestClass 添加为类 Foo 中的朋友，以便能够访问其私有成员变量。

```
Class Foo {
public:
    int action();  
private:
    int state;

    friend class MyTestClass;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:46:27.567

您应该有一些`public`ly（或“ `protected`ly”）可访问机制来更改私有变量的值`state`。为简单起见，假设它是一个方法`Foo::setState(int inState)`。在单元测试中使用它来改变状态，从而测试`Foo::action()`方法。这确保了任何未来的实现更改都不会影响单元测试（除非“API”`Foo::setState()`更改 - 在这种情况下，当然，您必须更改单元测试）。

如果您*没有*这样的更改机制`state`，则意味着最终用户或调用代码也无法更改它，因此，您不需要对其进行测试（也许这会变得`state`多余，但我不知道）。

如果私有变量通过其他代码“间接”更改，您将不得不在单元测试中执行相同的代码。您始终可以将外部可见的任何方法追溯到外部提供给代码的输入。基本上，关键是在单元测试中，您必须向代码提供与“真实”场景中相同的输入，然后测试它是否按应有的方式响应。

正如下面评论中所讨论的，如果从输入到被测试代码的“路径”*太长*，则代码/测试可能必须分成更小的模块或中间点。为了详细说明，将代码流视为：

```
Input -> A -> B -> C -> Output
// A, B, C are intermediate execution points which are not "publicly accessible". 
```

在上述情况下，你所能做的就是

> 给定`Input`，检查是否`Output`正确。

相反，最好将中间`A`, `B`,`C`至少暴露给单元测试，这样您现在可以将测试分解为：

> 给定`Input`，检查是否`A`正确。
> 
> 给定`A`，检查是否`B`正确。
> 
> 给定`B`，检查是否`C`正确。
> 
> 给定`C`，检查是否`Output`正确。

正如您可以想象的那样，如果测试失败，则更容易找出失败的原因，从而修复它。**

# sql - EXTRACTVALUE - XMLType 查询延迟

> ID：13971718
> 
> 赞同：1
> 
> 时间：2012-12-20T11:58:45.483
> 
> 标签：sql, oracle, plsql, oracle10g

我有两个具有相同解释的查询：

```
1) select * from cfm_t_dmp;

2) SELECT CATEGORY_ID,
   STATUS,
   USERNAME,
   VALID_FROM,
   EXTRACTVALUE (
      XMLType (data_definition),
      '/customer/type/permissions/text()'),
   EXTRACTVALUE (
      XMLType (data_definition),
      '/bundle/configuration/permissions/text()'),
   AB_LOCK
FROM cfm_t_dmp 
```

查询 1) 执行得非常快，查询 2) 经过几分钟的处理后我看不到结果。

主要区别是提取值，我之前执行了查询 2)，它很快。

我可以以任何方式调整 2) 查询还是这是数据库问题？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:43:03.007

您的第二个查询速度较慢，因为 Oracle 必须在这些 XPath 上搜索您的 XML 类型。如果您有大量数据，或者如果 XML 内容很大，那么这是很多额外的工作，并且会减慢查询速度。

为了加快速度：如果 XPath 不会改变，并且 XML 数据不会改变，您可以添加一个包含`EXTRACTVALUE`表达式结果的额外列。查询该数据会更快，因为您的查询不需要调用`EXTRACTVALUE`（因为它只会读取新列中的数据），但这需要您在插入或更新时预先填充它。

显然也可以在 Oracle 中对 XML 数据进行索引，尽管我自己从未尝试过：http: [//docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb_indexing.htm](http://docs.oracle.com/cd/B28359_01/appdev.111/b28369/xdb_indexing.htm)虽然因为你不是在这些 xpaths 的值上测试条件，我不确定索引是否会有所帮助。

# mysql - mysql时差查询

> ID：13971720
> 
> 赞同：1
> 
> 时间：2012-12-20T11:58:53.143
> 
> 标签：mysql, sql, database

我有一个查询，我必须以分钟为单位计算时差，但我也需要秒。那么，我可以在以下查询中使用 6.10 表示 6 分 10 秒吗？或者有什么替代方法可以说明这一点吗？

询问：

```
select distinct(users) , avisitedDate from visitSearchEngine vs
WHERE vs.users!=' ' 
AND vs.status='0' 
AND vs.hitType='googleIdentified'
AND vs.avisitedDate>'2012-12-06' 
AND ((TIME_TO_SEC(TIMEDIFF(NOW(),vs.avisitedDate)))/60)>=5
AND ((TIME_TO_SEC(TIMEDIFF(NOW(),vs.avisitedDate)))/60)<6.10 
```

请给我建议！

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:05:17.990

```
select distinct(users) , avisitedDate from visitSearchEngine vs
WHERE vs.users!=' ' 
AND vs.status='0' 
AND vs.hitType='googleIdentified'
AND vs.avisitedDate>'2012-12-06' 
AND TIMEDIFF(NOW(),vs.avisitedDate) >= '00:05:00'
AND TIMEDIFF(NOW(),vs.avisitedDate) < '00:06:10' 
```

# eclipse - 如何在 RAD 7.5 中创建 EAR 文件

> ID：13971721
> 
> 赞同：1
> 
> 时间：2012-12-20T11:58:58.963
> 
> 标签：eclipse, jakarta-ee, websphere, rad, ear

我已经从 CVS 存储库中签出了一个动态 Web 项目。但是，没有要签入的 EAR 文件。现在如何为项目创建一个 EAR 文件以在 WAS 6 中部署？

我也可以在不创建 .ear 文件的情况下在 RAD 中运行我的项目吗？我是 Java EE 项目的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:17:42.243

为了能够导出 EAR，您可以添加一个新的**Enterprise Application 项目**（New > Enterprise Application project）并选择您的 Web 项目作为**Java EE 模块依赖**项。

通过这种方式，您可以导出一个 EAR 文件，该文件将包含一个从您的 Web 项目构建的 WAR 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:18:59.840

如果您运行创建新企业应用程序的向导（文件-> 新建），其中一个选项是在创建时将工作区中的现有 Web 项目添加到应用程序中。然后您可以将企业应用程序导出为准备部署到 WebSphere Application Server 中的 EAR 文件，或者，如果您已经设置了测试环境，您可以将它拖放到 Servers 视图中的服务器上。要测试您的 Web 应用程序，请右键单击它并选择 Run->Run on Server。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:34:12.260

尝试导入为项目而不是 EAR 文件

# php - 如何在 phpmyadmin 中上传大的 .sql mb 文件

> ID：13971723
> 
> 赞同：4
> 
> 时间：2012-12-20T11:59:13.687
> 
> 标签：php, phpmyadmin

我如何在我使用**WAMP**服务器上上传**140mb**文件。当我导入文件时，我的浏览器挂起并且什么都不会发生，我还尝试增加文件中的时间限制。`phpmyadmin``local server`**`php.ini`**

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:04:31.950

你试过压缩吗？如果它是您要导入的表或数据库，则在转储文件时有一个压缩选项。您必须选择：自定义 - 显示所有可能的选项并选择一种可以节省大量时间和空间的压缩方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T13:22:23.620

尝试压缩或创建脚本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:11:00.167

在您的`.htaccess`文件中，您将添加以下代码：

```
    php_value upload_max_filesize 80M
    php_value post_max_size 80M
    php_value max_execution_time 300
    php_value max_input_time 300

```

希望这两个链接可以解决您的问题

[堆栈溢出线程](https://stackoverflow.com/questions/4061589/phpmyadmin-file-too-large-error-when-trying-to-import-sql)

[第二个链接](https://www.interspire.com/support/kb/questions/851/Overcoming+file+size+limits+when+uploading+SQL+files+to+phpMyAdmin)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-14T09:07:54.013

您可以使用 source 命令导入大文件，但只能通过 shell 脚本或 Putty

源 DATABASE_FILENAME.SQL

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T12:09:48.517

如果`compression`和设置限制`php.ini`没有解决你的问题。尝试分块上传。将您的文件拆分`.sql file`为多个文件并分别导入每个文件。**

# xpath - Xpath，选择一个后备节点

> ID：13971725
> 
> 赞同：2
> 
> 时间：2012-12-20T11:59:26.863
> 
> 标签：xpath

我有一些看起来像这样的 XML：

```
<container>
  <type>01</type>
  <text>one</text>
</container>
<container>
  <type>02</type>
  <text>two</text>
</container> 
```

**编辑**s的顺序`container`不固定。

我正在使用 xPath（通过 ruby​​ 的 nokogiri）从该文档中选择文本。我希望能够从`text`02中获取，但如果不存在，`container`则从01 中获取。`type``text``container``type`

我可以

```
/container/type[text() = "02" or text() = "01"]/parent::container 
```

这将使我得到两个元素，然后我可以使用一些红宝石来排序并取正确的元素（因为这将首先返回 01 元素），但这感觉很笨拙。

我已经搜索了stackoverflow，没有任何明显的东西可以让我使用简单的xpath对元素输出进行排序，但是有没有办法命令xpath获取一个元素，但如果它不存在则回退到另一个？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T16:03:48.933

不确定您是否会喜欢它，但它可以满足您的需求：

```
concat(substring(//container[type/text() = '02']/text,1,string-length(//container[type/text()='02'])*boolean(//container[type/text()='02']/text())),substring(//container[type/text() = '01']/text,1,string-length(//container[type/text()='01'])*number(boolean(//container[type/text()='01']/text())and not(boolean(//container[type/text()='02']/text()))))) 
```

我会在一秒钟内分解它...

* * *

好的，所以这部分：

连接（

```
substring(//container[type/text() = '02']/text,1,string-length(//container[type/text()='02'])*boolean(//container[type/text()='02']/text())), 
```

`<text>`如果存在，则从 type=2 获取。

这部分：

```
substring(//container[type/text() = '01']/text,1,string-length(//container[type/text()='01']) 
```

从type `<text>`=1 中获取，只有在 type=2 不存在时才返回它：

```
*number(boolean(//container[type/text()='01']/text())and not(boolean(//container[type/text()='02']/text()))))) 
```

希望这有助于清除它，我知道您正在寻找一些干净的东西，但是对于您想要使用 XPath 的东西，它有点混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:49:59.187

如果顺序是固定的，您可以选择两者，然后取最后一个。如果文档中只有 02，则为 02，如果文档中之前有 01，则为 02...

```
 (/container/type[text() = "02" or text() = "01"]/parent::container)[last()] 
```

或者更短，因为节点的值是它的文本，而比较只是寻找匹配的对：

```
 (/container[type = ("01", "02")])[last()] 
```

（至少在 XPath 2 中有效，不确定在 XPath 1 中是否相同）

-

编辑：

其实这很容易。可以检查一下`//container[type = "02"]`，如果有02型的容器，那么就可以取所有的02型的容器和所有的01型的容器，如果没有02型的容器，导致：

```
 //container[type = "02" or (type = "01" and not(//container[type = "02"]))] 
```

它的速度很慢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-19T10:37:50.083

```
(//container/type[.='02'], //container/type[.='01'])[1]/.. 
```

外括号从带有 text value 的 type 元素构造一个序列`02`，然后是带有 text value 的类型`01`。运算符省略任何未定义的`,`值，因此如果缺少一个，则序列仅包含另一个，如果两者都缺少，则为空序列。

`[1]`从该序列中选择第一个项目

`/..`是 的缩写语法，在这种情况下`parent::node()`相当于你的。`parent::container`

您可能希望这会起作用：

```
//container/(type[.='02'],type[.='01'])[1]/.. 
```

但是（至少在撒克逊）这给了你*两个*容器；或这个：

```
(//container/(type[.='02'],type[.='01']))[1]/.. 
```

但这给了你`01`容器，因为括号的结果是*文档顺序*中的两个节点。

# c# - c# 更简洁的初始化 int 数组的方法

> ID：13971730
> 
> 赞同：4
> 
> 时间：2012-12-20T11:59:31.590
> 
> 标签：c#, .net, arrays, linq, initialization

拥有以下代码是否有更精简的方法将数组从 1 初始化为变量指定的数字？

```
int nums=5;
int[] array= new int[nums];

for(int i=0;i<num;i++)
{
   array[i] = i;
} 
```

也许使用 linq 或一些 array.function？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:02:19.410

```
int[] array = Enumerable.Range(0, nums).ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:03:39.077

使用[`Enumerable.Range()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)方法代替。不要忘记添加[`System.Linq`](http://msdn.microsoft.com/en-us/library/system.linq.aspx)命名空间。但这可能会花费一点点高内存。你可以使用喜欢;

```
int[] array = Enumerable.Range(0, nums).ToArray(); 
```

> 生成指定范围内的整数序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:03:52.780

使用[Enumerable.Range](http://www.dotnetperls.com/enumerable-range)

```
int[] array = Enumerable.Range(0, nums).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-14T15:34:48.753

也许我在这里遗漏了一些东西，但这是我所知道的最好的方法：

`int[] data = new int [] { 383, 484, 392, 975, 321 };`

来自[MSDN](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/arrays/single-dimensional-arrays)

更简单：

`int[] data = { 383, 484, 392, 975, 321 };`

# c# - 获取在列表中出现两次的对象列表

> ID：13971735
> 
> 赞同：11
> 
> 时间：2012-12-20T11:59:45.107
> 
> 标签：c#, duplicates

我有一个`List<CustomPoint> points;`包含近百万个对象。从这个列表中，我想获得恰好出现两次的对象列表。最快的方法是什么？我也会对非 Linq 选项感兴趣，因为我可能也必须在 C++ 中执行此操作。

```
public class CustomPoint
{
    public double X { get; set; }
    public double Y { get; set; }

    public CustomPoint(double x, double y)
    {
        this.X = x;
        this.Y = y;
    }
}

public class PointComparer : IEqualityComparer<CustomPoint>
{
    public bool Equals(CustomPoint x, CustomPoint y)
    {
        return ((x.X == y.X) && (y.Y == x.Y));
    }

    public int GetHashCode(CustomPoint obj)
    {
        int hash = 0;
        hash ^= obj.X.GetHashCode();
        hash ^= obj.Y.GetHashCode();
        return hash;
    }
} 
```

基于[这个](https://stackoverflow.com/a/4578903/1246550)答案，我试过了，

```
list.GroupBy(x => x).Where(x => x.Count() = 2).Select(x => x.Key).ToList(); 
```

但这在新列表中给出了零个对象。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T12:02:00.673

您应该在类本身而不是在 PointComparer 中实现 Equals 和 GetHashCode

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T12:01:40.283

要使您的代码正常工作，您需要将您的实例`PointComparer`作为第二个参数传递给`GroupBy`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T12:26:21.000

这种方法对我有用：

```
public class PointCount
{
    public CustomPoint Point { get; set; }
    public int Count { get; set; }
}

private static IEnumerable<CustomPoint> GetPointsByCount(Dictionary<int, PointCount> pointcount, int count)
{
    return pointcount
                    .Where(p => p.Value.Count == count)
                    .Select(p => p.Value.Point);
}

private static Dictionary<int, PointCount> GetPointCount(List<CustomPoint> pointList)
{
    var allPoints = new Dictionary<int, PointCount>();

    foreach (var point in pointList)
    {
        int hash = point.GetHashCode();

        if (allPoints.ContainsKey(hash))
        {
            allPoints[hash].Count++;
        }
        else
        {
            allPoints.Add(hash, new PointCount { Point = point, Count = 1 });
        }
    }

    return allPoints;
} 
```

像这样调用：

```
static void Main(string[] args)
{
    List<CustomPoint> list1 = CreateCustomPointList();

    var doubles = GetPointsByCount(GetPointCount(list1), 2);

    Console.WriteLine("Doubles:");
    foreach (var point in doubles)
    {
        Console.WriteLine("X: {0}, Y: {1}", point.X, point.Y);
    }
}

private static List<CustomPoint> CreateCustomPointList()
{
    var result = new List<CustomPoint>();

    for (int i = 0; i < 5; i++)
    {
        for (int j = 0; j < 5; j++)
        {
            result.Add(new CustomPoint(i, j));
        }
    }

    result.Add(new CustomPoint(1, 3));
    result.Add(new CustomPoint(3, 3));
    result.Add(new CustomPoint(0, 2));

    return result;
} 
```

`CustomPoint`执行：

```
public class CustomPoint
{
    public double X { get; set; }
    public double Y { get; set; }

    public CustomPoint(double x, double y)
    {
        this.X = x;
        this.Y = y;
    }

    public override bool Equals(object obj)
    {
        var other = obj as CustomPoint;

        if (other == null)
        {
            return base.Equals(obj);
        }

        return ((this.X == other.X) && (this.Y == other.Y));
    }

    public override int GetHashCode()
    {
        int hash = 23;
        hash = hash * 31 + this.X.GetHashCode();
        hash = hash * 31 + this.Y.GetHashCode();
        return hash;
    }
} 
```

它打印：

```
Doubles:
X: 0, Y: 2
X: 1, Y: 3
X: 3, Y: 3 
```

正如您在 中看到的，我为每个唯一（通过哈希）`GetPointCount()`创建一个字典。`CustomPoint`然后我插入一个`PointCount`对象，其中包含对从 1`CustomPoint`开始的a 的引用`Count`，每次遇到相同的点时，`Count`都会增加。

最后在`GetPointsByCount`我返回`CustomPoint`字典 where 中的 s `PointCount.Count == count`，在你的情况下是 2。

另请注意，我更新了该`GetHashCode()`方法，因为您的方法对点 (1,2) 和 (2,1) 返回相同。如果您确实需要，请随时恢复您自己的散列方法。不过，您将不得不测试散列函数，因为很难将两个数字唯一地散列为一个。这取决于使用的数字范围，因此您应该实现一个适合您自己需求的哈希函数。

# captcha - 重新验证码的小部件按钮重新加载整个页面

> ID：13971737
> 
> 赞同：2
> 
> 时间：2012-12-20T11:59:53.973
> 
> 标签：captcha, recaptcha

我已经实现了 Google 的重新验证码并在 Chrome 中完美运行（AJAX API）。IE是问题...

我有：**localhost://myapp/index.html**和*Forgot your password*的链接。单击此链接时，将调用 jQuery 单击处理程序。处理程序函数更改 div 的内容，并调用**Recaptcha.create(...)**小部件正确显示并在 Chrome 中按预期工作，但在 IE 中，如果我单击重新加载图标或声音按钮，它会重新加载整个页面。

如果我手动调用 Recaptcha.reload() 它重新加载没有任何问题？！

我拥有的 HTML 是：

```
<div id="recaptcha" style="width:120px"></div>

[...]

<script type="text/javascript" src="https://www.google.com/recaptcha/api/js/recaptcha_ajax.js"></script>

[...]

//In a jquery click handler I call
Recaptcha.create("6LxxxxxxxxxxxxxxxxxxxxxxIrpV5RO8P",
                    "recaptcha",
                    {
                        theme:'white',
                        callback: Recaptcha.focus_response_field
                    }
            ); 
```

到目前为止一切都很好......验证码在所有浏览器中都能很好地加载。在 IE8 和 9 中，当我单击重新加载和 mp3 版本的小部件按钮时，整个页面都会重新加载

我尝试将*http*更改为*https*，反之亦然，但仍然没有任何运气......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T23:56:13.757

当`Recaptcha.create();`被调用时，谷歌的 re-captcha RELOAD 和 IMAGE/TEXT 按钮的代码看起来像这样：

```
 <a href="javascript:Recaptcha.reload();"> 
```

而且我不知道为什么当按下按钮时页面会在我的 IE 应用程序中重新加载，并且在 Google 提供的[演示](http://www.google.com/recaptcha/demo/ajax)中它会发送异步请求...

由于我无法更改*href*属性中的 javascript，我不得不在 jQuery中添加一个*onclick处理程序*`$(document).ready();`

我的解决方案是这样的：

```
$("#recaptcha).on("click", "id_of_the_reload_button", function(e){
    e.preventDEfault();
    Recaptcha.reload();
}); 
```

我基本上阻止了谷歌提供的锚点的自然行为，并自己调用了 reload() 函数。我从来没有发现是什么导致我的页面首先重新加载

# jquery - load() 回调在加载完成之前返回

> ID：13971743
> 
> 赞同：3
> 
> 时间：2012-12-20T12:00:11.090
> 
> 标签：jquery, callback, load

在我的页面上，我有以下文档准备功能：

```
$(document).ready(function(){
    $('a').click(function(){
       var toLoad = $(this).attr('href')+' #newdiv';        
       $('#mydiv').html('<p><img src="images/ajax-loader.gif" /></p>');
       $('#mydiv').load(toLoad, afterLoad());       

       function afterLoad() {
          alert('test');
       }         
       return false;        
    });
}); 
```

当一个链接被点击时，`#newdiv`来自目标链接的内容被加载到`#mydiv`当前页面上。在加载之前，我将当前内容替换为`#mydiv`动画 gif。加载完成后，动画 gif 消失，新内容进入其中。所有这一切都完美无缺。

但是，加载完成后，我想执行一个名为`afterLoad`. 目前，我只添加了一个`alert`. 奇怪的是，当仍然显示动画 gif 时，会出现警告框，所以当新内容仍在加载时。`afterLoad`当新内容已经到位时，是否还有另一种执行方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:04:29.377

改成：

```
$('a').click(function(){
    var toLoad = $(this).attr('href')+' #newdiv';        
    $('#mydiv').html('<p><img src="images/ajax-loader.gif" /></p>');
    $('#mydiv').load(toLoad, afterLoad);
 });
function afterLoad() {
   alert('test');
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:04:33.710

您需要将要在回调中运行的函数作为参考传递。尝试这个：

```
$('#mydiv').load(toLoad, afterLoad);  // Note the removal of () 
```

# php - 当我使用 count_all codeigniter 以外的其他方法时无法分页

> ID：13971745
> 
> 赞同：2
> 
> 时间：2012-12-20T12:00:14.750
> 
> 标签：php, codeigniter, count, pagination

我使用连接查询来获取数据，当从连接的表中删除一些数据时，它会产生分页问题

控制器代码

```
function index($msg='',$offset = 0)
{
        $data = array('title'=>'Towns','message'=>'', 'link_add'=>site_url('manage/town/add'), 'edit_link'=>site_url('manage/town/edit'), 'tbl'=>'towns' );
        $uri_segment = 4;
        $offset = $this->uri->segment($uri_segment);
        // load data
        $value=('towns.Id,towns.Name as TownName,city.Name as CityName,city.Status,towns.Status,towns.TaxAmount');
        $data['list_records'] = $this->admin_model->get_joinlist($data['tbl'],$value,'city','city.Id = towns.cityId','left outer','towns.Id','asc',array('towns.Status !='=>'Delete','city.Status'=>'Enable'),$this->limit, $offset)->result();
        if($msg=='m')$data['message'] = 'New Town has been added successfully!';
        // generate pagination
        $this->load->library('pagination');
        $config['base_url'] = site_url('manage/town/index/');
        $this->total = $this->admin_model->**count_all**($data['tbl'],array('Status !='=>'Delete'));
        $config['total_rows'] = $this->total;
        $config['per_page'] = $this->limit;
        $config['uri_segment'] = $uri_segment;
        $this->pagination->initialize($config);
        $data['pagination'] = $this->pagination->create_links();
        $data['j'] = 0 + $offset;
        $data['total_rows']= $this->total;
        // load view
        $this->load->view('manage/includes/header', $data);
        $this->load->view('manage/town', $data);
        $this->load->view('manage/includes/footer');
}

         <?php 
```

类 Admin_model 扩展 CI_Model {

```
//listing with join
public function get_joinlist($table,$value,$table2,$condi,$join_type,$order_by,$order,$where,$limit, $offset)
{
    $this->db->select($value);
    $this->db->join($table2,$condi,$join_type);
    $this->db->order_by($order_by,$order);
    $this->db->where($where);
    return $query= $this->db->get($table, $limit, $offset);
}

//For pagination
function count_all($table,$where)
{   
   return $this->db->where($where)
   ->count_all_results($table);
}
function num_rows($table)
{   
   return $this->db->affected_rows($table);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:43:56.777

做这样的事情：

```
 public function get_joinlist($table,$value,$table2,$condi,$join_type,$order_by,$order,$where,$limit, $offset)
{
    $this->db->start_cache();
    $this->db->select($value);
    $this->db->join($table2,$condi,$join_type);
    $this->db->order_by($order_by,$order);
    $this->db->where($where);
    $this->db->stop_cache();

    $query['num_rows']=$this->db->get($table)->num_rows();
    $query['results']=$this->db->get($table, $limit, $offset);
    $this->db->flush_cache();
    return $query;
} 
```

这样，您的模型将返回一个数组，其中包含连接的总行数以及受偏移量和限制行数限制的结果

# windows-phone-7 - 从另一台计算机打开 WP7 .XAP 文件时遇到问题

> ID：13971746
> 
> 赞同：0
> 
> 时间：2012-12-20T12:00:18.090
> 
> 标签：windows-phone-7, windows-phone, windows-phone-8

我正在尝试在另一台计算机上打开从我的计算机创建的 .xap 文件，但遇到了问题。我收到一条错误消息，指出包无效或损坏。当我使用我的计算机时，.xap 文件可以正常打开，没有任何问题。

我如何解决这个问题，因为我并不总是随身携带电脑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:10:33.190

尝试将 .xap 扩展名更改为 .zip 扩展名。或者右键单击并使用 7zip/winrar 或其他支持 .zip 格式的程序打开。如果这仍然不起作用，则文件可能已损坏，您必须再次复制它。

# linq-to-sql - 已尝试附加或添加一个不是新的实体，可能是从另一个 DataContext 加载的。不支持

> ID：13971749
> 
> 赞同：0
> 
> 时间：2012-12-20T12:00:27.680
> 
> 标签：linq-to-sql, asp.net-mvc-2

运行代码时，我在插入时收到以下错误

```
An attempt has been made to Attach or Add an entity that is not new, perhaps having been loaded from another DataContext.  This is not supported. 
```

我的代码

```
using (PostDBDataContext dataContext = new PostDBDataContext())
{
    if (posttypeedit.posttypemeta != null)
    {
        foreach (var posttypemeta in posttypeedit.posttypemeta)
        {
            PostTypeMeta _postmeta = new PostTypeMeta();
            _postmeta.vcr_MetaKey = posttypemeta.Metatexts;
            _postmeta.vcr_MetaValue = posttypemeta.Datatypes;
            _postmeta.int_ModifiedBy = Authorization.UserID;
            _postmeta.dtm_ModifiedDate = System.DateTime.Now;
            psttyp.PostTypeMetas.Add(_postmeta);
        }
    }
    dataContext.PostTypes.InsertOnSubmit(psttyp);                
    dataContext.SubmitChanges();  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:18:32.833

你正在插入`psttyp`

```
InsertOnSubmit(psttyp); 
```

但是 ptsstyp 不是新的，所以你不能再次插入它，

如果您的意图只是**将**PostTYpeMeta 添加到您现有的 psttyp 中，您可以删除

```
dataContext.PostTypes.InsertOnSubmit(psttyp); 
```

完全地。

# html - 如何使用 java 从 embed type=application/pdf 获取原始 pdf

> ID：13971750
> 
> 赞同：1
> 
> 时间：2012-12-20T12:00:30.533
> 
> 标签：html, pdf, download, embed, jsoup

我正在使用[Jsoup](http://jsoup.org/)解析一些 HTML 以获取一些 PDF 网址。

PDF 显示在如下`<embed>`标签中：

```
<html>
<body marginwidth="0" marginheight="0" style="background-color: rgb(38,38,38)">
<embed width="100%" height="100%" name="plugin" src="http://www.domain.com/apdf_id.pdf?tp=&amp;arnumber=1253069&amp;isnumber=28038" type="application/pdf">
</body>
</html> 
```

如何从该页面获取 PDF URL，以便将其下载到本地计算机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:35:33.250

只需选择`<embed type="application/pdf">`元素并将其`src`属性作为绝对 URL。

```
String pdfURL = document.select("embed[type=application/pdf").first().absUrl("src"); 
```

您也可以专门选择`<embed name="plugin">`。

```
String pdfURL = document.select("embed[name=plugin").first().absUrl("src"); 
```

然后你可以用`java.net.URL`它来获得它的味道`InputStream`。

```
InputStream input = new URL(pdfURL).openStream(); 
```

最后只需将其写入任意方式`OutputStream`，例如`FileOutputStream`通常的方式。

### 也可以看看：

*   [使用 java.net.URLConnection 触发和处理 HTTP 请求](https://stackoverflow.com/questions/2793150/how-to-use-java-net-urlconnection-to-fire-and-handle-http-requests/2793153#2793153)

# jquery - 如何使 JQuery-AJAX 请求同步

> ID：13971769
> 
> 赞同：24
> 
> 时间：2012-12-20T12:01:35.260
> 
> 标签：jquery, ajax, synchronous

如何使 ajax 请求同步？

我有一个需要提交的表格。但只有在用户输入正确密码时才需要提交。

这是表单代码：

```
<form name="form" action="insert.php" method="post" onSubmit="return ajaxSubmit(this);" > 
```

用于发送和检查密码的 jquery 代码是这样的：

```
var ajaxSubmit = function(formE1) {

    var password = $.trim($('#employee_password').val());

    $.ajax({
        type: "POST",
        async: "false",
        url: "checkpass.php",
        data: "password="+password,
        success: function(html) {
            var arr=$.parseJSON(html);
            if(arr == "Successful") {
                return true;
            } else {
                return false;
            }
        }
    });
} 
```

但是，无论 ajax 请求返回的值如何，表单总是提交。我已经检查了其他所有内容。当输入正确的密码时，arr 的值会显示为“成功”，反之亦然。

我如何使这个请求同步？据我调试，请求是异步的，所以表单在请求完成之前被提交。

checkpass.php 的代码

```
<?php 
require("includes/apptop.php");
require("classes/class_employee.php");
require("classes/class_employee_attendance.php");

$employee_password=$_POST['password']; 

$m=new employee();
$m->setbyid_employee(1);
$arr=$m->editdisplay_employee();

if($arr['employee_password'] == $employee_password)
{
$res="Successful";  
}
else
{
$res="Password not match";  
}

echo $res;
?> 
```

**更新：已找到解决方案。**

正如 Olaf Dietshche 所指出的： 的返回值`ajaxSubmit`不是`success: function(){...}`. `ajaxSubmit`根本不返回任何值，这等价于`undefined`，而后者的计算结果为`true`。

这就是为什么表单总是被提交并且与是否同步发送请求无关的原因。

所以，我在成功后将一个变量设置为`1`内部成功函数。并在成功函数之外检查它的值，如果它`1`在成功函数之外，那么我写了`return true ... else return false`. 这奏效了。

**更新的工作代码：**

```
var ajaxsubmit=function(forme1) {
    var password = $.trim($('#employee_password').val());
    var test="0";

    $.ajax({
        type: "POST",
        url: "checkpass.php",
        async: false,
        data: "password="+password,
        success: function(html) {
            if(html == "Successful") {
                test="1";
            } else {
                alert("Password incorrect. Please enter correct password.");
                test="0";
            }
        }
    });

    if(test=="1") {
        return true;
    } else if(test=="0") {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-20T12:04:59.020

来自[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

> **async** Boolean
> 默认值：true
> 默认情况下，所有请求都是异步发送的（即默认设置为 true）。如果您需要同步请求，请将此选项设置为 false。

因此，在您的请求中，您必须`async: false`代替`async: "false"`.

**更新**：

的返回值`ajaxSubmit`不是*的*返回值`success: function(){...}`。`ajaxSubmit`根本不返回任何值，这等价于`undefined`，而后者又计算为真。

这*就是*为什么表单总是被提交并且与是否同步发送请求无关的原因。

如果您只想提交表单，当响应为 时`"Successful"`，您必须返回`false`from`ajaxSubmit`然后在`success`函数中提交表单，正如@halilb 已经建议的那样。

这些方面的东西应该起作用

```
function ajaxSubmit() {
    var password = $.trim($('#employee_password').val());
    $.ajax({
        type: "POST",
        url: "checkpass.php",
        data: "password="+password,
        success: function(response) {
            if(response == "Successful")
            {
                $('form').removeAttr('onsubmit'); // prevent endless loop
                $('form').submit();
            }
        }
    });

    return false;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-12-14T14:07:13.383

它就像下面的一样简单，就像一个魅力。

我的解决方案完美回答了您的问题：How to make JQuery-AJAX request synchronous

**在 ajax 调用之前将 ajax 设置为同步，然后在 ajax 调用之后将其重置：**

```
$.ajaxSetup({async: false});

$ajax({ajax call....});

$.ajaxSetup({async: true}); 
```

在您的情况下，它看起来像这样：

```
$.ajaxSetup({async: false});

$.ajax({
        type: "POST",
        async: "false",
        url: "checkpass.php",
        data: "password="+password,
        success: function(html) {
            var arr=$.parseJSON(html);
            if(arr == "Successful") {
                return true;
            } else {
                return false;
            }
        }
    });

$.ajaxSetup({async: true}); 
```

我希望它有帮助:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T12:21:49.780

您可以阻止提交按钮的默认操作，而不是添加 onSubmit 事件。

因此，在以下 html 中：

```
<form name="form" action="insert.php" method="post">
    <input type='submit' />
</form>​ 
```

首先，防止提交按钮动作。然后异步调用ajax，密码正确时提交表单。

```
$('input[type=submit]').click(function(e) {
    e.preventDefault(); //prevent form submit when button is clicked

    var password = $.trim($('#employee_password').val());

     $.ajax({
        type: "POST",
        url: "checkpass.php",
        data: "password="+password,
        success: function(html) {
            var arr=$.parseJSON(html);
            var $form = $('form');
            if(arr == "Successful")
            {    
                $form.submit(); //submit the form if the password is correct
            }
        }
    });
});​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T12:36:33.363

我将 dataType 添加为 json 并将响应作为 json：

**PHP**

```
echo json_encode(array('success'=>$res)); //send the response as json **use this instead of echo $res in your php file** 
```

**JavaScript**

```
 var ajaxSubmit = function(formE1) {

        var password = $.trim($('#employee_password').val());    
        $.ajax({
            type: "POST",
            async: "false",
            url: "checkpass.php",
            data: "password="+password,
            dataType:'json',  //added this so the response is in json
            success: function(result) {
                var arr=result.success;
                if(arr == "Successful")
                {    return true;
                }
                else
                {    return false;
                }
            }
        });

  return false
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-30T06:45:51.063

下面是一个工作示例。添加`async:false`.

```
const response = $.ajax({
                    type:"POST",
                    dataType:"json",
                    async:false, 
                    url:"your-url",
                    data:{"data":"data"}                        
                });                   
 console.log("response: ", response); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-20T12:10:31.593

试试这个

解决方案是，使用这样的回调

```
$(function() {

    var jForm = $('form[name=form]');
    var jPWField = $('#employee_password');

    function getCheckedState() {
        return jForm.data('checked_state');
    };

    function setChecked(s) {
        jForm.data('checked_state', s);
    };

    jPWField.change(function() {
        //reset checked thing
        setChecked(null);
    }).trigger('change');

    jForm.submit(function(){
        switch(getCheckedState()) {
            case 'valid':
                return true;
            case 'invalid':
                //invalid, don submit
                return false;
            default:
                //make your check
                var password = $.trim(jPWField.val());

                $.ajax({
                    type: "POST",
                    async: "false",
                    url: "checkpass.php",
                    data: {
                        "password": $.trim(jPWField.val);
                    }
                    success: function(html) {
                        var arr=$.parseJSON(html);
                        setChecked(arr == "Successful" ? 'valid': 'invalid');
                        //submit again
                        jForm.submit();
                    }
                    });
                return false;
        }

    });
 }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T12:19:12.213

你可以试试这个，

```
var ajaxSubmit = function(formE1) {

            var password = $.trim($('#employee_password').val());

             $.ajax({
                type: "POST",
                async: "false",
                url: "checkpass.php",
                data: "password="+password,
                success: function(html) {
                    var arr=$.parseJSON(html);
                    if(arr == "Successful")
                    { 
                         **$("form[name='form']").submit();**
                        return true;
                    }
                    else
                    {    return false;
                    }
                }
            });
              **return false;**
        } 
```

# xcode - 参数列表太长错误

> ID：13971776
> 
> 赞同：0
> 
> 时间：2012-12-20T12:01:49.940
> 
> 标签：xcode, ios6

我正在努力在 xcode 上创建新应用程序。

我得到了那个错误

> 参数列表太长：递归标头扩展在 /Applications/Microsoft Office 2011/Office/Office First Run/MUD/Outlook 脚本菜单项/从 Message.scptd/Contents/Resources/Scripts 创建注释失败。

有什么想法解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:03:55.740

您的标题搜索路径中有什么？看起来你让编译器在整个磁盘上递归搜索你的头文件（`/**`）。

# objective-c - 将 NSInteger 转换为 Float，反之亦然

> ID：13971777
> 
> 赞同：0
> 
> 时间：2012-12-20T12:01:52.730
> 
> 标签：objective-c, ios, ios5, nsinteger

我有基本的怀疑。我必须转换`float minutes =( (10.09/60 ) % 60);` 但错误是`invalid to binary expression(double to double)`。我怎样才能使这个计算变得容易..我首先 `float minutes =( (10.09/60 )` 尝试将分钟转换为 NSInterger 以解决模块（％）操作..

但我该怎么做……或者建议其他解决方案来获得这个计算..

`float minutes =( (10.09/60 ) % 60);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:09:52.103

要使用`%`，您必须使用`int`. 所以：`(int)(10.09)%60`应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:14:57.640

% 运算符不适用于浮点值。你必须使用一个函数来计算你想要的。这是它的基本伪代码：

B % A = B - (地板(B / A) * A)

还有一些库函数可以在 math.h 或 tgmath.h 中为您执行此操作

此外，您可以使用： fmod() 或 fmodf() 来自 .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:10:10.003

您可以根据需要使用以下操作

浮动 myFloat = 3.333

```
 //for nearest small integer:
int result = (int)ceilf(myFloat );

 //for nearest big integer:
int result = (int)roundf(myFloat );

 //for nearest integer:
int result = (int)floor(myFloat); 
```

//对于一个整数值 int result = (int) (myFloat);

# javascript - 如何在 YUI3 中实现动画滚动？

> ID：13971779
> 
> 赞同：0
> 
> 时间：2012-12-20T12:01:59.703
> 
> 标签：javascript, yui3

我无法使用 YUI3 创建动画滚动。

它应该与 iOS 惯性滚动兼容，我想以编程方式触发动画滚动。但是由于缺少文档，我找不到 YUI3 的正确语法。

1）以下代码有效：

```
 scrollArea._node.scrollLeft = 200; //the element is scrolled!
   // so the variable is defined correctly and CSS also works! 
```

2）以下代码也有效（如果我使用绝对定位来模拟滚动）：

```
 animation = new Y.Anim({
            node: content,
            to: {
                left: -200
            }
        });
        animation.run(); 
```

3）但以下没有：

```
 animation = new Y.Anim({
            node: scrollArea,
            scroll: {
                to: {
                    scrollLeft: 200
                }
            }
        });
        animation.run(); 
```

4）这是标记的样子：

```
<div class="scroll-area"> <!-- scrollArea, overflow: scroll -->
    <ul class="content"> <!-- content -->
        <li></li><li></li><li></li>
    </ul>
</div> 
```

我希望这仅仅是语法问题。 [到这里，YUI2 的问题就解决了](http://developer.yahoo.com/yui/examples/animation/scroll.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T14:49:43.947

在第三个示例中，问题似乎是您将`scroll`其用作 Anim 构造函数的属性，这对于 YUI2 的 Scroll 实用程序的工作方式是有效的，但[YUI3 的 Anim](http://yuilibrary.com/yui/docs/anim/)比这更强大。

你在第二次尝试时很接近。这是修改后的代码：

```
 animation = new Y.Anim({
        node: scrollArea,
        to: {
            scrollLeft: 200
        }
    });
    animation.run(); 
```

我已将该`scrollLeft`字段移动到[to 属性](http://yuilibrary.com/yui/docs/api/classes/Anim.html#attr_to)中，并将节点更改为`scrollArea`而不是`content`. 如果您打算经常执行这种动画滚动操作，那么我建议您创建一个重用单个 Anim 对象的包装函数。此[示例](http://yuilibrary.com/yui/docs/anim/anim-xy.html)可能对您演示此类重用有用。祝你好运。

# ruby-on-rails - Ruby 注释中的含义是什么？

> ID：13971784
> 
> 赞同：6
> 
> 时间：2012-12-20T12:02:09.210
> 
> 标签：ruby-on-rails, ruby

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T12:04:55.417

是的，我的错误，对不起

这是特殊 RDoc 系统的一部分。

```
Non-verbatim text can be marked up:
italic: word or <em>text</em>
bold:   word or <b>text</b>
typewriter: word or <tt>text</tt> 
```

[在此处](http://rdoc.sourceforge.net/doc/)阅读有关它的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:10:58.047

我自己在[Rails 文档指南](http://guides.rubyonrails.org/api_documentation_guidelines.html)中找到了它。

> 使用一对`+...+`for 固定宽度字体仅适用于单词；即：任何匹配的东西`\A\w+\z`。对于其他任何用途`<tt>...</tt>`，特别是符号、设置器、内联代码段等：

# c++ - 如何使用 Qt 保存 cookie？

> ID：13971787
> 
> 赞同：4
> 
> 时间：2012-12-20T12:02:18.410
> 
> 标签：c++, qt, cookies, qnetworkaccessmanager

我正在尝试将我的应用程序生成的 cookie 保存到磁盘位置，例如`C:\Users\Username\AppData\Local\MyCompany\MyApp`. 我已经实现了一个 webview，并且已经完成了对我简单浏览器的编码，最后要做的是保存 cookie。

我可以 qDebug() 从 webapp 获得的 cookie，它们显示 cookie 的格式正确，但我 a) 不确定从那里去哪里， b) 不能 100% 确定如何创建 cookiejar 类的子类？

下面我在 MainWindow 构造函数中创建我的 cookiejar 对象

```
view = new QWebView(this);
jar = new QNetworkCookieJar;
view->page()->networkAccessManager()->setCookieJar(jar); 
```

在我的回复完成槽中，我可以看到回复中包含的 cookie，我尝试保存它，但没有任何反应，也没有收到任何运行时错误。在这方面没有很多东西，并且已经看到一些帖子，其中的指令是创建一个子类 QNetworkCookieJar，但之前没有在 Qt/C++ 中创建一个子类。

有没有一种简单的方法来存储 cookie，我不是在寻找任何花哨的东西。cookie 只是确保在登录页面上勾选了一些复选框。

```
// SLOT that accepts the read data from the webpage
void MainWindow::slotReplyFinished(QNetworkReply *reply){

    if(reply->isFinished()){
        QVariant variantCookies = reply->header(QNetworkRequest::SetCookieHeader);
        QList<QNetworkCookie> cookies = qvariant_cast<QList<QNetworkCookie> >(variantCookies);
        qDebug() << "Cookies reply: " << cookies;
        QNetworkCookie cookie; //Create a cookie

        jar = new QNetworkCookieJar;
        //view->page()->networkAccessManager()->setCookieJar(jar);
        jar->setCookiesFromUrl(cookies, reply->request().url());
        //qDebug() << "Saved cookies: " << jar->getAllCookies();
    }

    qDebug() << "Network reply: " << reply->errorString() << reply->error() << reply->request().url();
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:20:37.220

您将需要继承 QNetworkCookieJar 并且在该类中您应该实现自己的持久存储。

```
class MyNetworkCookieJar : public QNetworkCookieJar {

public: 

bool saveCookiesToDisk() {
// .. my implementation
return true; // if i did
}

bool loadCookiesFromDisk() {
// .. load from disk
return false; // if unable to.
}
} 
```

Qt 项目中的示例应用程序实现了一个持久的 cookie 存储，它可能是一个很好的起点：http: [//qt.gitorious.org/qt/qt/trees/4.8/demos/browser](http://qt.gitorious.org/qt/qt/trees/4.8/demos/browser)

查看 cookiejar.h 和 cookiejar.cpp

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-01T11:09:53.023

qt 示例的基础， http: [//qt.gitorious.org/qt/qt/trees/4.8/demos/browser](http://qt.gitorious.org/qt/qt/trees/4.8/demos/browser)，我编写了这个类，为我保存和使用一个 cookie。也许它也对你有帮助。请注意，它只保存一个 cookie 而不是 cookie 列表。

```
#include "cookiejar.h"

CookieJar::CookieJar(QObject *parent)
    : QNetworkCookieJar(parent)
    , m_loaded(false)
{
}

void CookieJar::load()
{
    if (m_loaded)
        return;

    QSettings settings;
    settings.beginGroup(QLatin1String("cookies"));
    QList<QNetworkCookie> savedCookies = QNetworkCookie::parseCookies(settings.value("cookies").toByteArray());

    for (int j = 0; j < savedCookies.count(); j++)
        insertCookie(savedCookies.at(j));

    m_loaded = true;
    emit cookiesChanged();
}

void CookieJar::save()
{
    if (!m_loaded)
        return;

    QList<QNetworkCookie> cookies = allCookies();

    QSettings settings;
    settings.beginGroup(QLatin1String("cookies"));
    settings.setValue("cookies", cookies[0].toRawForm());
}

QList<QNetworkCookie> CookieJar::cookiesForUrl(const QUrl &url) const
{
    // This function is called by the default QNetworkAccessManager::createRequest(),
    // which adds the cookies returned by this function to the request being sent.

    CookieJar *that = const_cast<CookieJar*>(this);
    if (!m_loaded)
        that->load();

    return QNetworkCookieJar::cookiesForUrl(url);
}

bool CookieJar::setCookiesFromUrl(const QList<QNetworkCookie> &cookieList, const QUrl &url)
{
    if (!m_loaded)
        load();

    QNetworkCookieJar::setCookiesFromUrl(cookieList, url);
    save();     //Save cookie permanently in setting file.
    emit cookiesChanged();
    return true;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-08T14:42:24.490

@Musa 的回答很好，但它只保存了一个 cookie。我建议使用来自旧 qmlviewer 的 Qt 实现：http://code.qt.io/cgit/qt/qt.git/tree/tools/qml/qmlruntime.cpp?h=4.7# [n438](http://code.qt.io/cgit/qt/qt.git/tree/tools/qml/qmlruntime.cpp?h=4.7#n438)

这是代码：

```
class PersistentCookieJar : public QNetworkCookieJar {
public:
    PersistentCookieJar(QObject *parent) : QNetworkCookieJar(parent) { load(); }
    ~PersistentCookieJar() { save(); }

    virtual QList<QNetworkCookie> cookiesForUrl(const QUrl &url) const
    {
        QMutexLocker lock(&mutex);
        return QNetworkCookieJar::cookiesForUrl(url);
    }

    virtual bool setCookiesFromUrl(const QList<QNetworkCookie> &cookieList, const QUrl &url)
    {
        QMutexLocker lock(&mutex);
        return QNetworkCookieJar::setCookiesFromUrl(cookieList, url);
    }

private:
    void save()
    {
        QMutexLocker lock(&mutex);
        QList<QNetworkCookie> list = allCookies();
        QByteArray data;
        foreach (QNetworkCookie cookie, list) {
            if (!cookie.isSessionCookie()) {
                data.append(cookie.toRawForm());
                data.append("\n");
            }
        }
        QSettings settings;
        settings.setValue("Cookies",data);
    }

    void load()
    {
        QMutexLocker lock(&mutex);
        QSettings settings;
        QByteArray data = settings.value("Cookies").toByteArray();
        setAllCookies(QNetworkCookie::parseCookies(data));
    }

    mutable QMutex mutex;
}; 
```

# java - 使用 setText 在 jLabel 上设置文本被延迟

> ID：13971791
> 
> 赞同：0
> 
> 时间：2012-12-20T12:02:36.523
> 
> 标签：java, swing, netbeans, jlabel

我正在使用 Netbeans IDE 使用 Java Swing 构建一个小型测试工具。

我正在尝试更新一个标签，该标签在某种程度上没有得到“重新粉刷”/“刷新”。我查看了一些关于 SO 的类似问题，但无法解决我的问题。

```
private void excelFileChooserActionPerformed(java.awt.event.ActionEvent evt)
{
    if(!JFileChooser.CANCEL_SELECTION.equals(evt.getActionCommand()))
    {
        String selectedFile = excelFileChooser.getSelectedFile().getAbsolutePath();
        loaderLabel.setText("Please Wait..");
        try {
            //This is sort of a blocking call, i.e. DB calls will be made (in the same thread. It takes about 2-3 seconds)
            processFile(selectedFile);
            loaderLabel.setText("Done..");
            missingTransactionsPanel.setVisible(true);
        }
        catch(Exception e) {
            System.out.println(e.getMessage());
            loaderLabel.setText("Failed..");
        }
    }
} 
```

`loaderLabel`是 a`JLabel`并且使用的布局是`AbsoluteLayout`.

所以，我的问题是**“请稍候......”**从未显示。尽管调用该方法`processFile`大约需要 2-3 秒，但从未显示**“请稍候...” 。**但是，会显示**“完成...”/“失败...”**。

如果我在调用 之前添加`popup`( ) ，则会显示**“请稍候..”**。我无法清楚地理解为什么会这样。`JOptionPane``processFile`

 **在进行繁重的方法调用之前，我应该遵循“良好做法”吗？我需要调用显式重绘/刷新/重新验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:15:46.983

你需要打电话

```
 processFile(selectedFile); 
```

在另一个线程中（不在 AWT 线程中）。为此，您可以执行以下操作：

```
Thread t = new Thread(){
   public void run(){
       processFile(selectedFile);
       // now you need to refresh the UI... it must be done in the UI thread
       // to do so use "SwingUtilities.invokeLater"
       SwingUtilities.invokeLater(new Runnable(){
          public void run(){
              loaderLabel.setText("Done..");
              missingTransactionsPanel.setVisible(true);
          }
          }
       )
   }
};
t.start(); 
```

请注意，我很长时间没有使用 swing，所以这段代码可能存在一些语法问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:04:45.370

您是否尝试过使用 SwingUtilities.invokeLater() 向 EDT 发送呼叫？

[http://www.javamex.com/tutorials/threads/invokelater.shtml](http://www.javamex.com/tutorials/threads/invokelater.shtml)**

# matlab - Matlab中的标签和图例

> ID：13971794
> 
> 赞同：4
> 
> 时间：2012-12-20T12:02:40.767
> 
> 标签：matlab

我通过数字的标签和图例遇到以下问题。

请看数字。

1-图例要长调整。我怎样才能使它们变小（传奇线）

2- xlabeltrick 的下部被裁剪。

3- 看不到 Xlabel（基准）。

![块引用](../Images/cb0aff2ab9c1e8afd6ed8aba29d81f0a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:46:36.520

用于[`legendflex`](http://www.mathworks.com/matlabcentral/fileexchange/31092)图例和[`subaxis`](http://www.mathworks.com/matlabcentral/fileexchange/3696-subaxis-subplot)轴窗口（它允许您操作边距、间距和填充）。例如，您可以`subaxis`这样使用：

```
subaxis(1, 1, 1,'mb', .2, 'pb', .1) 
```

将底部边距设置为 0.2，底部填充设置为 0.1。我相信更大的填充会扩大你需要的空间。

`legendflex`允许您调整符号列的水平长度。

# mysql - 使用表名未知的列值从表中检索某些字段

> ID：13971798
> 
> 赞同：0
> 
> 时间：2012-12-20T12:02:52.510
> 
> 标签：mysql, sql

我正在尝试从用户那里动态获取产品的成本和商品编号。所以我不知道产品在什么桌子下。

```
SELECT cost,itemno FROM inde.columns WHERE column_name ='previousItems'; 
```

`inde`架构名称在哪里，`previousitem`是我在 jsp 中从用户动态获取的产品名称。
我收到错误消息，因为 sql 语法错误。以下是错误消息

> javax.servlet.ServletException: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException:
> 你的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ')' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:09:33.830

用这个替换你的查询

```
 SELECT cost,itemno FROM inde WHERE column_name ='previousItems'; 
```

this if`inde`是表的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:48:12.587

您可以使用以下查询按列名搜索未知表：

```
 SELECT DISTINCT TABLE_NAME 
    FROM INFORMATION_SCHEMA.COLUMNS
    WHERE COLUMN_NAME IN ('COLOM_NAME_TO_SEARCH')
    AND TABLE_SCHEMA='YOUR_DATABASE_NAME'; 
```

# java - Future.get() 不返回

> ID：13971801
> 
> 赞同：0
> 
> 时间：2012-12-20T12:03:01.580
> 
> 标签：java, multithreading, concurrency

我有以下代码：

```
public class Test {
   List<Future> future = new ArrayList<Future>();

   public static void main(String args[]) throws Exception {

     Adapter b1 = new Adapter();
     final ExecutorService threadPool = Executors.newCachedThreadPool();

      for(//iterate for number of files) {  
         while(data exists in file) {
            //Call a function to process and update values in db 
            future.add(threadPool.submit(new Xyz(b1)));
            //read next set of data in file;
         }
       }

      try {
         for(Future f: future) { 
            f.get(); 
         }
      }
      catch(Exception e) {
         throw e;
      }    
   }
}

class Xyz implements Runnable {
   private Adapter a1;

   public Xyz(Adapter al) {
      this.a1=a1;
   }

   @Override
   public void run() {
      try { 
         a1.abc();
      } catch (Exception e) {
          throw new RuntimeException(e);
      } 
   }
} 
```

当文件数为 1 时（for 循环运行 1 次），代码运行良好。

但是，当文件数量增加时，代码永远不会从`future.get()`方法返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:30:57.793

> 只是出于好奇..我需要在某处关闭执行程序吗？

是的，这很可能是问题所在。每个都`Future.get()`将阻塞，直到相应的任务完成，然后一旦所有任务完成，您的`main`线程将退出。但是您的 java 进程*不会*退出，因为线程池线程在后台仍然处于活动状态。完成后，您应该关闭执行程序，这很可能是您`main`方法中的最后一件事。

我还注意到，您提交的许多任务都包装了*同一个* `Adapter`实例并且都调用了它的`abc()`方法——检查当在多个线程中同时调用时，那里没有任何东西会死锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:02:47.437

您的`Callable::call`/`Runable::run`不返回。否则对应的future不会阻塞。

额外的 executor.shutdown 或`future.cancel`将`InterruptedException`停止处理您提交的对象的线程，但是否捕获它取决于您。您有责任让您提交的作业停止。

当您向 a 提交数千个 Callables/Runnables 时`CachedExecutor`，它可能会产生如此多的线程，以至于您的机器变得如此缓慢，以至于您认为它需要永远。但你会注意到这一点。

在处理未定义数量的可并行化任务时，我建议使用`FixedThreadPool`没有更多线程的 cpu 内核。

编辑：因此，当您设置断点`a1.abc();`并向前迈进时，您可能会发现它永远不会返回。

# android - 这是使用异步任务加载器在列表片段中打开/关闭数据库资源的正确位置

> ID：13971802
> 
> 赞同：2
> 
> 时间：2012-12-20T12:03:01.420
> 
> 标签：android, android-fragments, android-sqlite, android-loadermanager

在实现 LoaderManager.LoaderCallbacks 的 ListFragment 中打开和关闭数据库资源的最佳位置是哪个？

我有一个实现的列表片段`LoaderManager.LoaderCallbacks<Cursor>`。现在我初始化加载器`onActivityCreated`并`onCreateLoader`返回一个加载器（MyLoader）。MyLoader 类打开数据库资源。然后将 Cursor 对象返回到 `onLoadFinished`. 在这里我可以在哪里关闭我打开的数据库，因为在光标返回到 onLoadFinished 之前我们无法关闭数据库。

很多人说，在Activity onResume 中打开数据库资源，在onPause 中关闭是最好的。但是如果我使用AsynctaskLoaders 如何关闭数据库资源呢？

我收到以下错误，

```
close() was never explicitly called on database 'mydb' 
android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1849) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:07:14.203

在完成对数据库`close`的操作后，您必须这样做。`Cursor`尝试对所有活动使用 common `SQLiteOpenHelper`（看看[这个](http://developer.android.com/intl/ja/reference/android/database/sqlite/SQLiteOpenHelper.html)），而不是在 every 中调用数据库打开/关闭`Activity`。

# datagrid - Rebol 网格控制

> ID：13971807
> 
> 赞同：3
> 
> 时间：2012-12-20T12:03:12.047
> 
> 标签：datagrid, rebol

我正在寻找 Rebol 中的网格控件的等效项，以显示一些表格数据。

我遇到了这个脚本：[face-grid.r](http://www.codeconscious.com/rebsite/rebol-library/face-grid.r)

...及其相关演示：[face-grid-demo.r](http://www.codeconscious.com/rebsite/face-grid-demo.r)

这似乎是一个很好的开始。有谁知道这个网格是否有一些活动和/或更新版本，或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:52:17.453

取决于你到底需要什么。Brett 的数据网格有点基础。例如，它本身不处理滚动条。

Henrik 做了一个包含大量功能的列表视图。也许它可以成为您的选择： [list-view](http://www.hmkdesign.dk/project.rsp?id=list-view&page=info)。

但同一作者 的*VID 扩展套件*中也有不同的列表样式部分。[这](http://www.hmkdesign.dk/project.rsp?id=vid-ext-kit&page=docs&section=user&name=vid-extension-kit-lists.txt)是列表文档。

全部用于 Rebol2。

# bash - 使用大括号参数列表多次执行命令

> ID：13971808
> 
> 赞同：12
> 
> 时间：2012-12-20T12:03:12.797
> 
> 标签：bash, shell, command-line, command-line-arguments, brace-expansion

当我需要使用不同的参数多次运行命令时，我使用了这种方法（没有完全理解它）：

```
touch {a,b,c} 
```

这相当于：

```
touch a
touch b
touch c 
```

我认为同样可以通过以下循环来完成：

```
for file in {a,b,c}; do touch $file; done 
```

但是，我偶然发现了一个不起作用的情况：

```
pear channel-discover {"pear.phpunit.de","pear.symfony-project.com"} 
```

我有几个问题：

1.  第一个示例中发生的事情的名称是什么？到底发生了什么？
2.  将这种方法用于简单的事情而不是 for-in 循环会更好吗？
3.  为什么 pear 命令不能这样工作？命令脚本是否应该实现一些技术来处理这些参数，还是由 shell 负责？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T12:19:28.383

这称为[Brace Expansion](http://wiki.bash-hackers.org/syntax/expansion/brace)，它扩展为给定字符串的空格分隔列表。

所以`touch {a,b,c}`相当于

```
touch a b c 
```

虽然`touch {a,b,c}x`相当于：

```
touch ax bx cx 
```

您`pear`的命令本质上将按以下方式运行：

```
pear channel-discover pear.phpunit.de pear.symfony-project.com 
```

这可能不是您所期望的。如果您希望对每个字符串运行一次命令，请使用 for 循环（它回答您的第二个问题），或使用大括号扩展和 xargs 的组合。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T12:19:44.747

问题是出乎你的意料，大*括号*展开

```
touch {a,b,c} 
```

相当于

```
touch a b c   # NOT 3 separate invocations. 
```

（`echo {a,b,c}`用于验证）。似乎`pear channel-discover`不接受*两个*参数。您可能会看到相同的错误

```
pear channel-discover pear.phpunit.de pear.symfony-project.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-09T14:29:11.883

好吧，你有两个选择：

```
for i in "pear.phpunit.de" "pear.symfony-project.com"
do
  pear channel-discover "$i"
done 
```

或单线（但调用`xargs`而不是使用 bash 内部）：

```
echo "pear.phpunit.de" "pear.symfony-project.com" | xargs -n1 pear channel-discover 
```

前者当然更容易被人阅读，时间效率基本相同。

# android - 接收推送通知时唤醒锁定。有没有简单的方法？

> ID：13971809
> 
> 赞同：1
> 
> 时间：2012-12-20T12:03:21.127
> 
> 标签：android, push-notification, wakelock, android-wake-lock

我遵循了 android-hive 的推送通知指南。我已经完成了自己的应用程序并实现了接收推送所需的东西。
它工作得很好，我得到了推送和一条消息，但事情是，我希望屏幕在我得到推送时亮起。即使在最初的 androidhive-code 唤醒锁对我来说也不起作用。当我收到新的推送通知时，必须有一些简单的方法来唤醒屏幕，对吗？

非常感谢您的帮助！

# perl - 将文件的所有单独段落放在单独的行中

> ID：13971812
> 
> 赞同：5
> 
> 时间：2012-12-20T12:03:23.960
> 
> 标签：perl, sed, text-manipulation

我有一个包含序列数据的文件，其中每个新段落（由两个空行分隔）都包含一个新序列：

```
#example

ASDHJDJJDMFFMF
AKAKJSJSJSL---
SMSM-....SKSKK
....SK

SKJHDDSNLDJSCC
AK..SJSJSL--HG
AHSM---..SKSKK
-.-GHH 
```

我想得到一个看起来像这样的文件：

```
ASDHJDJJDMFFMFAKAKJSJSJSL---SMSM-....SKSKK....SK
SKJHDDSNLDJSCCAK..SJSJSL--HGAHSM---..SKSKK-.-GHH 
```

每个序列的长度相同（如果有帮助的话）。

我还希望对存储在不同目录中的多个文件执行此操作。

我刚试过

```
sed -e '/./{H;$!d;}' -e 'x;/regex/!d' ./text.txt 
```

但是这只是删除了整个文件：S

任何帮助都将不胜感激 - 不必在 sed 中，如果你知道如何在 perl 或其他东西中做到这一点，那也很棒。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T13:49:25.667

您需要做的就是将每个字段由换行符分隔的空行分隔记录 (RS) 文件转换为每个字段不分隔 (OFS) 的换行符分隔记录文件。只需设置适当的 awk 变量并重新编译记录：

```
$ awk '{$1=$1}1' RS= OFS= file
ASDHJDJJDMFFMFAKAKJSJSJSL---SMSM-....SKSKK....SK
SKJHDDSNLDJSCCAK..SJSJSL--HGAHSM---..SKSKK-.-GHH 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:22:39.577

```
awk '
    /^[[:space:]]*$/ {if (line) print line; line=""; next}
    {line=line $0}
    END {if (line) print line}
' 
```

```
perl -00 -pe 's/\n//g; $_.="\n"' 
```

对于多个文件：

```
# adjust your glob pattern to suit, 
# don't be shy to ask for assistance
for file in */*.txt; do
    newfile="/some/directory/$(basename "$file")"
    perl -00 -pe 's/\n//g; $_.="\n"' "$file" > "$newfile"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:57:38.660

如果您愿意，可以使用 Perl 单线：

```
perl -nle 'BEGIN{$/=""};s/\n//g;print $_' file 
```

该`$/`变量等价于`awk`'s`RS`变量。当设置为空字符串 ( `""`) 时，它会导致两个或多个空行被视为一个空行。这就是所谓的“段落式”阅读。对于读取的每条记录，都会删除所有换行符。开关在`-l`每个输出字符串的末尾添加一个换行符，从而给出所需的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:06:28.847

只需尝试找到那些双换行符： \n 或 \r 并首先用特殊符号替换那些 :$: 然后用空字符串替换每个换行符以将整个文件放在一行中。接下来，用简单的换行符替换您的特殊符号:)

# django - Django CSRF 验证失败。请求中止

> ID：13971827
> 
> 赞同：1
> 
> 时间：2012-12-20T12:04:21.563
> 
> 标签：django, django-forms, django-views, csrf, django-csrf

我有一个模型：

```
class Tour(models.Model):

    owner_id = models.ForeignKey(User)
    name = models.CharField(max_length=50)
    location = models.ManyToManyField(Location)
    subscribers = models.ManyToManyField(User, related_name="sub")
    tour_date = models.DateField(null=True)
    description = models.CharField(max_length=300, null=True) 
```

以及包含此表单的模板：

```
 <form method="post" action="/mytours/">
 {% csrf_token %}
 <input name="name" value="{{ name }}" class="pull-left" type="text" placeholder="Type the tour name... "></br>
 <input name="tour_date" value="{{ tour_date }}" type="text" id="datepicker" placeholder="Pick a tour date..."/>
  <button class="btn" data-dismiss="modal" aria-hidden="true">Cancel</button>
  <button type="submit" class="btn btn-primary">Save</button>
</form> 
```

在我看来，我正在尝试将表格中填写的内容添加到我的数据库中：

```
if request.method == 'POST':
        location = Location.objects.get(id=1)
        name = request.POST.get('name', '')
        tour_date = request.POST.get('tour_date', '')
        tour = Tour()
        tour.owner_id = user.pk
        tour.name = name
        tour.tour_date = tour_date
        tour.location = location
        tour.save()
        c = {'name':name, 'tour_date':tour_date, 'tour':tour}
        c.update(csrf(request))
        return render_to_response("myTours.html", c) 
```

我是 django 的新手，我不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T13:30:38.780

您误解了如何处理 CSRF 令牌。您在 POST 上创建它，但重点是为 GET 请求上表单的原始显示创建它。它在 POST 上由中间件检查，因此您无需在此处添加它。

您应该使用`render`surfeurX 推荐的调用，但首先显示表单的调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:23:25.487

当我在 django 中实现表单时，我所做的是编写一个表单类并在视图中创建它的一个实例。然后将实例传递给模板。

```
# form class eg. in models.py
from django import forms

class TourForm(forms.Form):
    name = forms.CharField(max_length=50)

# in the view
if request.method == 'POST':
    form = TourForm(request.POST)
    if form.is_valid():
        # do your stuff here with form data
else:
    form = TourForm() # An unbound form

return render(request, 'myTours.html', {
    'form': form,
}) 
```

在您的模板中，您可以像这样显示生成的表单：

```
<form action="/mytours/" method="post">{% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Save" class="btn btn-primary" />
</form> 
```

有关更多信息，请查看官方[django 表单文档](https://docs.djangoproject.com/en/dev/topics/forms/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:18:08.513

你如何渲染你的模板？？？我认为您的 csrf_token 不会打印任何隐藏的输入，请在模板上下文中添加“请求”，例如：

```
return render(request, "template.html", {"var": var}) 
```

[https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#render)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T12:17:40.323

您可能需要添加`django.middleware.csrf.CsrfViewMiddleware`到 MIDDLEWARE_CLASSES 并将 RequestContext 添加到您的响应中：

```
return render_to_response("myTours.html", c, context_instance=RequestContext(request)) 
```

[https://docs.djangoproject.com/en/1.3/ref/contrib/csrf/](https://docs.djangoproject.com/en/1.3/ref/contrib/csrf/)

# c++ - 多态设计，模板作为抽象类

> ID：13971833
> 
> 赞同：2
> 
> 时间：2012-12-20T12:04:35.213
> 
> 标签：c++, templates, polymorphism, factory

当您有一个类型取决于某些约束的成员时，您如何设计多态性。

说我有这个：

```
template<typename T>
class Base
{
public:
  Base() = default;
  virtual ~Base() = default;
  T member;
};

class DerivedA : public Base<int>
{
public:
  DerivedA() {member = 5;}
};

class DerivedB : public Base<float>
{
public:
  DerivedB() = default;
}; 
```

我希望能够根据不同的参数创建一个新的派生对象，即：

```
Base *b;
if (something)
    b = new DerivedA();
else
    b = new DerivedB(); 
```

显然我不能这样做，因为我需要为`b`.

**这是糟糕的设计吗？你怎么处理这个？**

我可以写一个小包装：

```
class Wrapper() {};

template<typename T>
class Base : public Wrapper
{
// ...
};

Wrapper a, b;
a = new DerivedA;
b = new DerivedB; 
```

但是我将无法直接访问or`member`中声明的其他方法。我需要强制转换 : ，使多态性变得无用。`Base``Derived``reinterpret_cast<DerivedA*>(a)->member`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:20:12.813

包装设计应该正是您正在寻找的。问题是c++是静态类型的，所以你不能在不指定其类型的情况下声明成员。避免这种情况的常用方法是设计一个支持您想要的所有功能的基类，并在派生类中实现特定行为，就像您所做的那样。

问题可能是您的类不支持您需要的所有功能。尽量避免直接使用 member 并将其用法包装到虚拟方法中。在派生类中重新实现这些方法。

如果这仍然不是一个选项，请考虑提取成员的方法。也许是具有适当转换的虚拟 getter 和 setter。

作为最后的手段，考虑 boost::variant、boost::any。但实际上它们是使用类似于您的包装器的技术实现的。所以你得到了包装器的包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:02:41.740

好吧，如果“访问”取决于模板参数`T`（例如阅读`Base.member`），那么您必须以*某种方式*提供它。转换为派生类之一是一种方法，但您不需要`reinterpret_cast`. 您需要开始使用指针/引用，以避免中断并让*可替代性*正常工作：

```
Wrapper *a, *b;
a = new DerivedA;
b = new DerivedB;

int a_member = static_cast<DerivedA*>(a)->member;
float b_member = static_cast<DerivedB*>(b)->member; 
```

如果你添加一个虚拟方法来`Wrapper`使其具有多态性，你也可以进行动态转换：

```
DerivedB* b_derived = dynamic_cast<DerivedB*>(b);
if (b_derived != nullptr) {
    float b_member = b_derived->member;
    // ...
} 
```

# java - 在 Tapestry 布局中处理事件

> ID：13971839
> 
> 赞同：0
> 
> 时间：2012-12-20T12:04:52.937
> 
> 标签：java, events, layout, tapestry

我的挂毯项目有问题。

每次我加载一个页面时，如果在相关页面中定义，它就会触发 onActivate 方法。但我不知道如何在我的布局模板中捕获该事件。

如果我在 layout.java 中定义一个变量，例如：

```
@Property
String a = "foo"; 
```

我在模板（layout.tml）中选择该变量值：

```
<p>${a}</p> 
```

好的，这将在使用该布局的所有页面的 HTML 中打印“foo”，但是如果我想在每次页面重新加载时更改该值，例如在 layout.java 中定义 onActivate。

```
void onActivate(){
    a="bar";
} 
```

此方法不会在 layout.java 中触发，仅在定义时在子页面中触发。（在子页面中，我包含了 Nathan Q 所说的布局）如何刷新变量值？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T12:39:18.210

在这种情况下，我猜布局是一个组件。只有页面具有激活上下文，这就是不触发 onActivate() 的原因。

我不知道您的确切用例，但是：

* * *

如果它是特定于页面的变量，那么您只需将参数传递给您的布局组件。

**布局.java**

```
@Parameter
@Property
private String a; 
```

**一些页面.tml**

```
<html t:a="someString" t:type="Layout" ... /> 
```

**SomePage.java**

```
@Property
private String someString;

...

void onActivate() {
   someString = "something specific for this page";
} 
```

* * *

***或者***

如果需要在每次渲染时设置此变量并且它不是特定于页面的值，则可以只使用 Layout 组件的 SetupRender 事件。

```
void setupRender() {
   a = ...;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T10:15:05.903

好的，我找到了一种方法来刷新我的属性值。这很简单：

我没有在 onActivate 方法中声明属性并更新该值，而是在 layout.java 中声明了一个公共方法来获取该值并在那里进行更新更改。

```
private String a = "foo";

public String getA(){

    a = "bar";
    return a;
} 
```

这样，我可以在每次页面加载时对 a 变量进行任何更改。

# unity3d - 在 Blender 中导入 .fbx 字符

> ID：13971851
> 
> 赞同：2
> 
> 时间：2012-12-20T12:05:46.117
> 
> 标签：unity3d, blender, blender-2.61

我是搅拌机的新手。我已经学习了搅拌机的一些基本功能。如何制作简单的形状以及如何制作动画。现在我有一个 .fbx 格式的角色，但它没有动画。我想在 Blender 中为它制作动画，以便我可以在 Unity 中使用它......但我不知道如何在 Blender 中导入 .fbx 文件。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:44:46.630

如果 .fbx 选项没有出现在 Blender 中，您可能需要启用导入器。转到**文件 > 用户首选项 > 导入-导出**并启用（最右边的勾号）**导入-导出：Autodesk FBX 格式**

![Blender Autodesk FBX 导入-导出启用](../Images/f69d99e10a30b61cff2311f0835ab3d3.png)

# asp.net-mvc-3 - Html.Action 和 OutputCache 的问题

> ID：13971853
> 
> 赞同：1
> 
> 时间：2012-12-20T12:05:49.800
> 
> 标签：asp.net-mvc-3, outputcache

`Html.Action`在视图中使用以显示启用了 CacheControl 的操作的结果时遇到问题。

**代码**

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*"]
public class CachedController : Controller
{
    public ViewResult CachedAction()
    {
        var model = GetFromDB();
        return PartialView(model);  
    }
} 
```

* * *

在 SomeView.cshtml 文件中，如果我有代码

```
@Html.Action("CachedAction", "Cached") 
```

我收到一个 Http 500 错误，并且 SomeView.cshtml 的 html 被发送到包含在*pre*标记中的浏览器，例如：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Title</title>
    </head>
    <body>
        <pre>
            // HTML for someView.cshtml here
        </pre>
    </body>
</html> 
```

任何人都知道这里的问题是什么？

**注意：** 如果我删除 OutputCacheAttribute 并且看到正确呈现的视图，代码将按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:16:54.277

目前，您正在整个控制器上设置缓存而不是操作。

尝试移动它，使您的代码变成这样：

```
public class CachedController : Controller
{
     [OutputCache(NoStore = true, Duration = 0, VaryByParam = "*"]
     public ViewResult CachedAction()
     {
          var model = GetFromDB();
          return PartialView(model);  
     }
} 
```

除非那当然是你的意图，但你的问题并不清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T04:49:25.130

我解决了我的问题。我使用 OutputCache 属性来指定不应缓存此控制器中的操作的输出，而只有少数操作有此要求，我天真地将其应用于控制器上的所有操作。

我通过从控制器中删除缓存并使用 OutputCache 属性装饰所需的操作来解决此问题。如果 ASP.NET MVC 代码具有缓存的 Html.Action，则它呈现页面的方式也存在问题。我希望部分不会被加载。但是在这个页面中，整个页面都没有加载。

我意识到这个问题很大程度上与上下文有关。我借鉴了很多建议作为这篇文章的评论和答案。我也不希望将我自己的答案标记为已接受。因此，如果你们中的某个人整合了一些调试此问题的技巧并更新了您的答案，我会将其标记为已接受。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:13:34.283

尝试直接在动作上方使用属性，而不是在控制器定义上方。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-03-17T21:11:55.663

而不是使用

```
@Html.Action("CachedAction", "Cached") 
```

试试下面

```
@Html.Partial("CachedAction") 
```

# php - CakePHP v2 模型局部变量

> ID：13971856
> 
> 赞同：1
> 
> 时间：2012-12-20T12:06:03.590
> 
> 标签：php, cakephp, cakephp-2.0

我正在努力从 v1.3 迁移到 CakePHP v2。

在我的旧 1.3 模型中，我有一些局部变量，它们由 loadData() 函数设置，然后我可以使用 get 函数检索。

在 v2 中，我得到：

```
Indirect modification of overloaded property [...] has no effect 
```

我已经搜索过，但它与数据/请求->数据更改无关。

关于如何设置这些局部变量的任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:30:29.627

您确定您更新了您尝试将值分配给 $this->data 数组的任何代码到 $this->request->data 吗？

在 2.0 中，您不能再手动分配 $this->data['newthing']['here']

它必须是 $this->request->data['newthing']['here'] 或 unset $this->request->data['currentthing']['here'] 等等

[https://groups.google.com/forum/?fromgroups=#!topic/cake-php/Sa-2m95CezM](https://groups.google.com/forum/?fromgroups=#!topic/cake-php/Sa-2m95CezM)

然而，正如其他人所说，如果你有时间，一些代码会很好。谢谢。

# c++ - 在 C++ 中保存指向迭代器的指针是否安全？

> ID：13971857
> 
> 赞同：7
> 
> 时间：2012-12-20T12:06:05.377
> 
> 标签：c++, pointers, iterator

我将首先问这个问题，然后是动机，最后是一个按预期编译和执行的说明性代码示例。

### 问题

如果我可以保证迭代器在我需要使用它的持续时间内不会失效，那么持有指向迭代器的指针（例如指向 a 的指针`list<int>::iterator`）是否安全。

### 动机

我有多个容器，我需要从一个容器中的项目直接交叉引用到另一个容器中的相应项目，依此类推。一个容器中的项目可能并不总是在另一个容器中具有相应的项目。

因此，我的想法是将指向迭代器的指针存储在容器#1 中存储的元素中，以此类推。为什么？因为一旦有了迭代器，我不仅可以访问容器 #2 中的元素，而且如果需要，我还可以擦除容器 #2 中的元素等。

如果容器#2 中有对应的元素，我将在容器#1 的元素中存储一个指向迭代器的指针。否则，此指针将设置为 NULL。现在我可以快速检查指向迭代器的指针是否为 NULL，容器 #2 中没有对应的元素，如果非 NULL，我可以继续访问它。

那么，以这种方式存储指向迭代器的指针是否安全？

### 代码示例

```
#include <iostream>
#include <list>

using namespace std;

typedef list<int> MyContainer;
typedef MyContainer::iterator MyIterator;
typdef MyIterator * PMyIterator;

void useIter(PMyIterator pIter)
{
    if (pIter == NULL)
    {
    cout << "NULL" << endl;
    }
    else
    {
    cout << "Value: " << *(*pIter) << endl;
    }
}

int main()
{
    MyContainer myList;

    myList.push_back(1);
    myList.push_back(2);

    PMyIterator pIter = NULL;

    // Verify for NULL
    useIter(pIter);

    // Get an iterator
    MyIterator it = myList.begin();

    // Get a pointer to the iterator
    pIter = & it;

    // Use the pointer
    useIter (pIter);
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T12:10:06.493

迭代器通常*由 value*处理。例如，`begin()`and`end()`将返回一个类型的实例`iterator`（对于给定的迭代器类型），而不是每次都`iterator&`返回一个值的*副本。*

您当然可以为此副本获取地址，但您不能期望对`begin()`或`end()`将返回具有相同地址的对象的新调用，并且该地址仅在您自己持有迭代器对象时才有效。

```
std::vector<int> x { 1, 2, 3 };

// This is fine:
auto it = x.begin();
auto* pi = &it;

// This is not (dangling pointer):
auto* pi2 = &x.begin(); 
```

维护指向迭代器的指针几乎没有意义：迭代器*已经*是数据的轻量级句柄。进一步的间接性通常是设计不佳的标志。特别是在您的示例中，指针毫无意义。只需传递一个普通的迭代器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:09:38.283

迭代器的问题在于容器上有很多使它们无效的操作（这取决于所讨论的容器）。当您将迭代器保存到属于另一个类的容器时，您永远不知道何时会发生此类操作，也没有简单的方法可以发现迭代器现在无效。

此外，直接删除属于另一个类的容器中的元素是违反封装原则的。当您想删除另一个类的数据时，最好调用该类的公共方法，然后删除数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:09:49.910

是的，这是安全的，只要您可以确保迭代器不会失效并且不会超出范围。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T12:15:53.530

听起来很吓人。迭代器是一个对象，如果它离开范围，你的指针是无效的。如果您擦除容器 #2 中的对象，所有迭代器都可能变得无效（取决于容器），因此您的指针变得无用。

为什么不存储迭代器本身？对于容器 #1 中不引用任何内容的元素，存储 container2.end()。只要迭代器不失效，这很好。如果是，则需要重新生成映射。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T12:29:34.280

是的，可以像处理其他类型一样处理指向迭代器的指针，但在您的示例中，这不是必需的，因为您可以简单地将原始迭代器作为引用传递。

一般来说，存储迭代器不是一个好主意，因为当您修改容器时，迭代器可能会变得无效。更好地存储容器并根据需要创建迭代器。

# jquery - jQuery 错误：消息：语法错误，无法识别的表达式：#

> ID：13971861
> 
> 赞同：1
> 
> 时间：2012-12-20T12:06:22.690
> 
> 标签：jquery

这是我尝试运行下面的[jQuery](http://en.wikipedia.org/wiki/JQuery)代码时遇到的错误：

> 消息：语法错误，无法识别的表达式：#
> 
> URI：/..///jquery-1.7.2.min.js
> 
> jquery-1.7.2.min.js

但是，当 JavaScript 关闭时它可以正常工作。问题可能是什么？

### jQuery代码

```
function setUpArticleToolsList() {
    $("#articleToolsList").before("<span id='articleToolsButton' class='button article-tools tool-tip tt-top' title='View Chapter Tools' data-tool-tip='View Chapter Tools'><span>Chapter Tools</span></span>");
    $("#articleToolsList").append("<li><span id='closeTools' class='close' title='close tools'><span>close</span></span></li>");
    var titleHeight = $(".article-title").height();
    $("#articleToolsList").hide();

    $("#articleToolsButton").show();
    $("#articleToolsButton").click(function(){
        $(this).hide();
        if (titleHeight < 95) { //Only animate to 95 pixels depth if smaller.
            $(".article-title").animate({
                height: 95}, function(){
                $("#articleToolsList").show();
            });
        }
        else {
            $("#articleToolsList").show();
        }
    });
    $("#closeTools").click(function(){
        $("#articleToolsButton").show();
        $("#articleToolsList").hide();
        if (titleHeight < 95) {
            $(".article-title").animate({
                height: titleHeight});
        }
    }); 
```

# opengl - 使用现代 OpenGL 上下文是否合理？

> ID：13971862
> 
> 赞同：2
> 
> 时间：2012-12-20T12:06:23.543
> 
> 标签：opengl, opengl-3

最近我使用了一些需要现代 OpenGL 上下文的功能（特别是 ARB_debug_output 需要通过 wglCreateContextAttribs 使用 WGL_CONTEXT_DEBUG_BIT_ARB 创建上下文）并遇到了一些影响（glew 无法收集现代上下文的扩展，我遇到了一些将新上下文集成到 wx 小部件中的影响）。所以出现了明显的问题：

*   **使用现代opengl上下文是否合理？**
*   **是否有许多功能无法通过扩展与旧上下文一起使用？**
*   **现代语境更快吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:07:17.240

以下只是我在使用 OpenGL 3.3*核心配置文件*上下文一段时间后的考虑：

* * *

**使用现代opengl上下文是否合理？**

这取决于。有许多库和中间件仍然不支持*wglCreateContextAttribs*等，但有些是开放的/足够小的，您可以访问代码并更改您需要的内容。

我个人认为没有“弃用”功能是一件幸事，因为人们可以专注于我们这个时代多汁的 gpu 硬件功能。

如果您正在编写一种中间件，您必须在其中支持大多数 OpenGL 功能，那么使用“现代”上下文不仅仅是一种祝福：它是一种救命稻草。

* * *

**是否有许多功能无法通过扩展与旧上下文一起使用？**

几乎没有，只要硬件相同。然而，扩展的数量如此之多，以至于可能有很多极端情况。

* * *

**现代语境是否更快**

当然不能再慢了。

# php - 无法在codeigniter下的视图中打印数据库中的值

> ID：13971863
> 
> 赞同：2
> 
> 时间：2012-12-20T12:06:23.683
> 
> 标签：php, codeigniter, codeigniter-2, variable-assignment

这是我的模型：

```
function get_name() {
    $this->db->select('first_name');
    $this->db->where('email', $this->session->userdata('email'));
    $query = $this->db->get('users');

    if($query->num_rows() == 1) {
        return true;
    }
} 
```

这是我的控制器方法：

```
function show_name() {
    $this->load->model('users_model');
    $this->users_model->get_name();
    } 
```

以及将名称传递给查看的方法：

```
function profile(){
    $data['first_name'] = $this->show_name();
    $this->load->view('members/template', $data);
} 
```

**我在视图中什么都没有，我检查了我的查询，它工作正常。有什么我想念的吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:08:39.233

您需要更新您的代码。您需要`first_name`从函数返回`get_name`

```
function get_name() {
        $this->db->select('first_name');
        $this->db->where('email', $this->session->userdata('email'));
        $query = $this->db->get('users');

        if($query->num_rows() == 1) {
            return $query->row()->first_name;
        }
    } 
```

您还需要`return`从函数中获取值`show_name`

```
function show_name() {
    $this->load->model('users_model');
    return $this->users_model->get_name();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:30:22.053

像这样控制器更改您的代码

```
function profile(){
    $this->load->model('users_model');
    $name = $this->users_model->get_name();
    if ($name){
      $data['first_name'] = $name;
      $this->load->view('members/template', $data);
    }else{
      ehco "No User Exist";
      exit;
    }
} 
```

模型

```
function get_name() {
        $return =false;
        $this->db->select('first_name');
        $this->db->where('email', $this->session->userdata('email'));
        $query = $this->db->get('users');

        if($query->num_rows() == 1) {
            $return = $query->row()->first_name;
        }
        return $return ;
    } 
```

# iphone - 在 iPhone 中允许定位服务

> ID：13971865
> 
> 赞同：1
> 
> 时间：2012-12-20T12:06:27.123
> 
> 标签：iphone, objective-c, ios, xcode, cllocationmanager

我正在制作一个我想要用户位置的应用程序。我正在使用此代码-

```
locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self; 
```

如果用户不允许那里的位置，那么下次当用户打开应用程序时，我将使用此代码来允许用户的位置 -

```
 if([CLLocationManager locationServicesEnabled] && 
       [CLLocationManager authorizationStatus] != kCLAuthorizationStatusDenied)
    {
        NSLog(@"enable");
    }
    else {
        NSLog(@"disable");
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs:root=LOCATION_SERVICES"]];
    } 
```

但这在 iOS SDK 5.1 中不起作用。所以我希望每次当应用程序进入前台时，如果位置服务被禁用，那么如何弹出允许位置服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T12:18:49.733

设置应用程序 URL 方案不再可用，您只需要向用户呈现一个`UIAlertView`或呈现一个`UIViewController`模态，告诉用户为您的应用打开位置服务。

您不能真正强制允许位置对话框，它只是第一次弹出。

# android - 如何在 Android 中为图像视图添加边框？

> ID：13971874
> 
> 赞同：2
> 
> 时间：2012-12-20T12:06:38.213
> 
> 标签：android, background, imageview

`imageview`在我的新 android 应用程序中，我需要使用 .9.png 之类的东西给边框。

边框大小应该根据我给定的图像而改变，`imageview`如果可能的话，我需要给一个背景图像，`imageview`因为我要将透明的 png 图像应用到`imageview`.

我应该为此创建一个新的自定义视图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:50:09.383

我认为您应该创建一个自定义视图。做一个以背景为边框的 LinearLayout，并使 ImageView 在 LinearLayout 内居中。使用 9-patch 获得正确的拉伸并创建内容区域以显示边框（在 android SDK/Tools 中使用 draw9patch）。

例子：

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/border">

    <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            />
    </LinearLayout> 
```

然后 9-patch 你的边框（在这个例子中是border.9.png）。您可以与内容区域进行相同的拉伸。

# android - 为什么我的 GridView 只显示一列？

> ID：13971876
> 
> 赞同：2
> 
> 时间：2012-12-20T12:06:51.670
> 
> 标签：android, gridview

我不明白为什么无论我做什么，我的网格视图中都只有一列......令人沮丧。

活动的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="match_parent" 
          android:orientation="vertical">

  <GridView
      android:id="@+id/gridView_album"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:numColumns="2"
      android:verticalSpacing="10dp"
      android:horizontalSpacing="10dp"
      android:stretchMode="columnWidth"
      android:gravity="center" />

</LinearLayout> 
```

对于网格视图中的每个项目（这在我的适配器中被夸大了）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:orientation="vertical" >

  <LinearLayout
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginLeft="5dp"
      android:layout_marginRight="5dp"
      android:orientation="vertical" >

    <TextView
        android:id="@+id/textView_albumTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="album title" />

  </LinearLayout>

  <ImageView
      android:id="@+id/imageView1"
      android:layout_width="105dp"
      android:layout_height="100dp"
      android:src="@drawable/abs__ab_share_pack_holo_light" />

  <LinearLayout
      android:layout_width="wrap_content"
      android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="20dp"
        android:layout_height="20dp"
    android:layout_marginLeft="5dp"
    android:layout_marginTop="5dp"      
        android:src="@drawable/abs__ab_solid_light_holo" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="20dp"
        android:layout_height="20dp"
    android:layout_marginLeft="5dp"
    android:layout_marginTop="5dp"      
        android:src="@drawable/abs__ab_solid_light_holo" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="20dp"
        android:layout_height="20dp"
    android:layout_marginLeft="5dp"
    android:layout_marginTop="5dp"      
        android:src="@drawable/abs__ab_solid_light_holo" />

    <ImageView
        android:id="@+id/imageView5"
        android:layout_width="20dp"
        android:layout_height="20dp"
    android:layout_marginLeft="5dp"
    android:layout_marginTop="5dp"      
        android:src="@drawable/abs__ab_solid_light_holo" />

  </LinearLayout>

</LinearLayout> 
```

和我的适配器的 getView

```
 @Override
        public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;

        JsonAlbum jsonAlbum = (JsonAlbum) getItem(position);
        ArrayList<JsonAlbumImage> jsonAlbumImageArray = jsonAlbum.album_image_list;

        if (v == null) {
            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.album_list_row, null);

        }

        TextView textView_albumTitle = (TextView) v.findViewById(R.id.textView_albumTitle);
        textView_albumTitle.setText(jsonAlbum.title);

        ImageView imageView1 = (ImageView)v.findViewById(R.id.imageView1);
        ImageView imageView2 = (ImageView)v.findViewById(R.id.imageView2);
        ImageView imageView3 = (ImageView)v.findViewById(R.id.imageView3);
        ImageView imageView4 = (ImageView)v.findViewById(R.id.imageView4);
        ImageView imageView5 = (ImageView)v.findViewById(R.id.imageView5);

        ArrayList<ImageView> imageViewList = new ArrayList<ImageView>();
        imageViewList.add(imageView1);
        imageViewList.add(imageView2);
        imageViewList.add(imageView3);
        imageViewList.add(imageView4);
        imageViewList.add(imageView5);

        int imageCount = Math.min( imageViewList.size(), jsonAlbumImageArray.size());
        for(int i=0; i < imageCount; ++i)
        {
            ImageView imageView = imageViewList.get(i);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            JsonAlbumImage jsonAlbumImage = jsonAlbumImageArray.get(i);
            imageLoader.displayImage(jsonAlbumImage.url_image, imageView, options);
        }

        Log.i("debug", "width: "+ Integer.toString(v.getWidth()));
        return v;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:21:10.717

嗨这是我的`Gridview`代码

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridView1"
    android:numColumns="2"
    android:gravity="center"
    android:columnWidth="100dp"
    android:stretchMode="columnWidth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" > 
```

我的图像视图代码：

```
<ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="150px"
        android:layout_height="150px"
        android:layout_marginRight="50px"
        android:src="@drawable/ic_launcher" >
    </ImageView> 
```

我得到 2 列..让你试试这个属性..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:16:54.560

也许您的图像太宽而无法在屏幕上的两列中显示？

顺便说一句，每次创建视图都非常昂贵（内存） - 看看 ViewHolder 模式。

# c# - 如何获取另一个 xaml 中使用的数据上下文

> ID：13971878
> 
> 赞同：1
> 
> 时间：2012-12-20T12:06:56.633
> 
> 标签：c#, wpf, user-controls, datacontext

我有一个测试应用程序，它包含两个`Windows`和一个`UserControl`.

我想`Window`使用相同的方法在每个中插入控件`DataContext`：

MainWindow.xaml：

```
<Window x:Class="WpfApplication2.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:view="clr-namespace:WpfApplication2.View"
    xmlns:viewModel="clr-namespace:WpfApplication2.ViewModel"
    Title="MainWindow" Height="350" Width="525">

<Window.DataContext>
    <viewModel:ControlColorViewModel x:Name="dataContext1"/>
</Window.DataContext>

<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="0.2*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <Button Grid.Column="0" Width="64" Height="64" Command="{Binding     
     Path=PressedButton}">Press</Button>

    <view:ControlColor Grid.Column="1" />

    </Grid>
</Window> 
```

ControlColor.xaml：

```
<UserControl x:Class="WpfApplication2.View.ControlColor"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:viewModel="clr-namespace:WpfApplication2.ViewModel"
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">

<Grid Background="{Binding Path=BackgroundColor}">

</Grid>
</UserControl> 
```

ControlColorViewModel.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Media;
using System.Windows.Input;

namespace WpfApplication2.ViewModel
{
class ControlColorViewModel : ViewModelBase
{
    private Brush backgroundColor;
    public Brush BackgroundColor
    {
        get { return this.backgroundColor; }
        set
        {
            if (this.backgroundColor != value)
            {
                this.backgroundColor = value;
                OnPropertyChanged("BackgroundColor");
            }
        }
    }

    public ICommand PressedButton { get { return new RelayCommand(param =>    
    this.SetPressedButton()); } }

    public ControlColorViewModel()
    {
    }

    private void SetPressedButton()
    {
        BackgroundColor = Brushes.Orange;
    }
  }
} 
```

Window2.xaml：

```
<Window x:Class="WpfApplication2.Window2"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:view="clr-namespace:WpfApplication2.View"
    Title="Window2" Height="300" Width="300">
<Grid>

    <view:ControlColor />

</Grid>
</Window> 
```

当按下按钮时，MainWindow 中的 ContentControl 中的背景变为橙色，我希望插入 Window2 中的 ContentControl 也一样。使用相同的数据上下文。

我怎样才能获得在 MainWindow 中使用的相同数据上下文？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:17:49.397

There are a lot of ways. The easy is to have a common, shared model property (CommonModel) and send it to every ViewModels. Next step is to use EventAggregator, but to my mind it's too complicated for you..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:11:00.647

您可以使用称为[Dependency Injection](http://msdn.microsoft.com/en-us/magazine/cc163739.aspx)的东西来让您的控件使用相同的 DataContext。

Basically, you need to take it out of the XAML and 'find/resolve' your shared ControlColorViewModel in the constructor for your controls.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:17:16.117

I'm a little new to WPF (having more of a WinForms background), but if I understand correctly you could define your dataContext1 in the App file resources and then they both could reference it.

# arrays - 来自本地对象数组的 JQGrid 数据

> ID：13971879
> 
> 赞同：0
> 
> 时间：2012-12-20T12:06:58.167
> 
> 标签：arrays, object, jqgrid, local

我根据用户的选择创建了一个本地对象集合。动态数组应加载到 jqGrid。动态创建数组后，我尝试重新加载，但没有任何反应。这是代码 -

```
$(document).ready(function () {

         var arrobj = [];           

         var JSONString = []; //[{"DOId":"0","DONo":"Please select","DealerCode":"0","Week":"0","Item":"0","Qty":"11","Date":"11"}]

         $("#<%=btnAdd.ClientID%>").click(function () {
             //Get values
             //Date
             var dlDt = $("#<%=tbRchngDt.ClientID%>").val();
             //Qty
             var dlQty = $("#<%=tbQty.ClientID%>").val();
             //item
             var dlItem = $("#<%=ddlItem.ClientID%>").val();
             //DO No
             var dlDOId = $("#<%=ddlDO.ClientID%>").val();
             var dlDO = $("#<%=ddlDO.ClientID%> option:selected").text();
             //Week
             var dlWeek = $("#<%=ddlWeek.ClientID%>").val();
             //Dealer
             var dlDealer = $("#<%=ddlDealer.ClientID%>").val();

             DistributionDtl = new Object();
             DistributionDtl.DOId = dlDOId;
             DistributionDtl.DONo = dlDO;
             DistributionDtl.DealerCode = dlDealer;
             DistributionDtl.Week = dlWeek;
             DistributionDtl.Item = dlItem;
             DistributionDtl.Qty = dlQty;
             DistributionDtl.Date = dlDt;

             //alert(DistributionDtl);
             arrobj.push(DistributionDtl);
             JSONString = JSON.stringify(arrobj);
             //alert(JSONString);
             $("#list").jqGrid('setGridParam',
             { datatype: "local",
                 data: JSONString
             }).trigger("reloadGrid");

         });
         jQuery("#list").jqGrid({ data: JSONString,
             datatype: "local",
             height: 150,
             width: 600,
             rowNum: 10,
             rowList: [10, 20, 30],
             colNames: ['DOID', 'Item', 'Qty', 'Date'],
             colModel: [{ name: 'DOId', index: 'DOId', width: 60, sorttype: "int" },
                                { name: 'Item', index: 'Item', width: 120 },
                                 { name: 'Qty', index: 'Qty', width: 80 },
                                  { name: 'Date', index: 'Date', width: 120}],
             pager: "#pager",
             viewrecords: true,
             caption: "Contacts"
         });

     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:13:51.683

您应该使用以下任何方法将本地数据添加到 jqgrid：

*   addJSONData - 数据为 json
*   addRowData - 逐行添加，然后触发重新加载网格以重新计算分页 - 数据应该是一个 javascript 对象

文档可以在[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods)找到。**编辑**：根据文档，您可以直接在“数据”参数中设置本地数据，但它应该是一个数组而不是 json 字符串，并且您`JSONString`的问题中没有内容，因此问题可能来自于此。

# javascript - 在javascript中使用带有对象的数组将对象序列化为JSON

> ID：13971887
> 
> 赞同：1
> 
> 时间：2012-12-20T12:07:30.490
> 
> 标签：javascript, arrays, json, object

我有一个这样的对象：

```
obj = {"arr1" : [], "arr2" : ['z1', 'z2', 'z3'], "arr3" : []};
obj['arr2']['z2'] = 'z8'; 
```

它有嵌套数组，每个值可以是一个有或没有数组的对象，等等。

如何为此获取 JSON？JSON.stringify 会丢失 'z8' 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:15:09.690

在 JSON 中（按标准），你有[数组、对象、值和字符串](http://www.json.org/)，数组不像 JavaScript 中的对象。JSON 只是一种数据交换格式，你没有像 JavaScript 那样的基本原型，其中几乎所有东西都是对象并具有属性。

所以，如果你想拥有一个属性`z3`，`z2`你必须创建`z2`一个对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:14:43.503

arr2 是一个数组。你不能像地图一样使用它。

```
var obj = {"arr1" : [], "arr2" : ['z1', {'z2':'z3'}], "arr3" : []};
obj['arr2'][1]["z2"] = 'z8';
alert(JSON.stringify(obj));​ 
```

[小提琴](http://jsfiddle.net/8JYNB/)

# mysql - 具有多个连接的 MySQL 查询

> ID：13971889
> 
> 赞同：0
> 
> 时间：2012-12-20T12:07:35.210
> 
> 标签：mysql, sql

我有下表，并尝试检索至少一列（lay、blk、pri、ani）应该具有“1863”的数据，但结果不理想。

在这里，我发布表格以供参考。

```
DROP TABLE IF EXISTS my_table; 
CREATE TABLE my_table
(id INT NOT NULL AUTO_INCREMENT UNIQUE,
Shot VARCHAR(4),
lay VARCHAR(15) NOT NULL,
lay_status VARCHAR(15) NOT NULL,
blk VARCHAR(10) NOT NULL,
blk_status VARCHAR(15) NOT NULL,
pri VARCHAR(10) NOT NULL,
pri_status VARCHAR(15) NOT NULL,
ani VARCHAR(10) NOT NULL,
ani_status VARCHAR(15) NOT NULL
);

INSERT INTO my_table VALUES
(1,'SH01','1863','yes','1863','yes','P4645','yes','P4557','yes'),
(2,'SH02','1863','yes','P4645','no','P4557','yes','1863','no'),
(3,'SH03','P4645','yes','P4557','yes','1863','yes','1863','yes'),
(4,'SH04','1863','no','P4645','no','P4557','yes','1863','yes'),
(5,'SH05','1863','yes','1863','yes','P4645','yes','P4557','yes'),
(6,'SH06','P4557','yes','P4645','yes','P4645','yes','P4557','yes');

SELECT * FROM my_table;
+----+------+-------+------------+-------+------------+-------+------------+-------+------------+
| id | Shot | lay   | lay_status | blk   | blk_status | pri   | pri_status | ani   | ani_status |
+----+------+-------+------------+-------+------------+-------+------------+-------+------------+
|  1 | SH01 | 1863  | yes        | 1863  | yes        | P4645 | yes        | P4557 | yes        |
|  2 | SH02 | 1863  | yes        | P4645 | no         | P4557 | yes        | 1863  | no         |
|  3 | SH03 | P4645 | yes        | P4557 | yes        | 1863  | yes        | 1863  | yes        |
|  4 | SH04 | 1863  | no         | P4645 | no         | P4557 | yes        | 1863  | yes        |
|  5 | SH05 | 1863  | yes        | 1863  | yes        | P4645 | yes        | P4557 | yes        |
|  6 | SH06 | P4557 | yes        | P4645 | yes        | P4645 | yes        | P4557 | yes        |
+----+------+-------+------------+-------+------------+-------+------------+-------+------------+
6 rows in set (0.00 sec) 
```

我创建了一个查询，其结果如下

```
SELECT 
    x.Shot,
    IFNULL(J1.Stage,'NA') as Stage1,
    IFNULL(J1.status,'NA') as Status,
    IFNULL(J2.Stage,'NA') as Stage2,
    IFNULL(J2.status,'NA') as Status,
    IFNULL(J3.Stage,'NA') as Stage3,
    IFNULL(J3.status,'NA') as Status,
    IFNULL(J4.Stage,'NA') as Stage4,
    IFNULL(J4.status,'NA') as Status
FROM
    (SELECT 
        Shot
    FROM
        my_table) x
    LEFT JOIN (SELECT 
        Shot,
        lay as Artist,
        lay_status as status,
        'lay' as Stage

    FROM
        my_table where lay = '1863') J1 ON J1.Shot = x.Shot
    LEFT JOIN (SELECT 
        Shot,
        blk as Artist,
        blk_status as status,
        'blk' as Stage

    FROM
        my_table where blk = '1863') J2 ON J2.Shot = x.Shot
    LEFT JOIN (SELECT 
        Shot,
        pri as Artist,
        pri_status as status,
        'pri' as Stage

    FROM
        my_table where pri = '1863') J3 ON J3.Shot = x.Shot
    LEFT JOIN (SELECT 
        Shot,
        ani as Artist,
        ani_status as status,
        'ani' as Stage

    FROM
        my_table where ani = '1863') J4 ON J4.Shot = x.Shot 
```

**上述查询的结果是**

```
+------+--------+--------+--------+--------+--------+--------+--------+--------+
| Shot | Stage1 | Status | Stage2 | Status | Stage3 | Status | Stage4 | Status |
+------+--------+--------+--------+--------+--------+--------+--------+--------+
| SH01 | lay    | yes    | blk    | yes    | NA     | NA     | NA     | NA     |
| SH02 | lay    | yes    | NA     | NA     | NA     | NA     | ani    | no     |
| SH03 | NA     | NA     | NA     | NA     | pri    | yes    | ani    | yes    |
| SH04 | lay    | no     | NA     | NA     | NA     | NA     | ani    | yes    |
| SH05 | lay    | yes    | blk    | yes    | NA     | na     | NA     | NA     |
| SH06 | NA     | NA     | NA     | NA     | NA     | NA     | NA     | NA     |
+------+--------+--------+--------+--------+--------+--------+--------+--------+ 
```

但是我需要检索其中至少一个lay，blk，pri，ani中的一个具有'1863'的记录，但是上面的查询返回了带有SH06的记录，其中非字段（lay，blk，pri，ani）有'1863'

**所需的结果如下**

```
+------+--------+--------+--------+--------+--------+--------+--------+--------+
| Shot | Stage1 | Status | Stage2 | Status | Stage3 | Status | Stage4 | Status |
+------+--------+--------+--------+--------+--------+--------+--------+--------+
| SH01 | lay    | yes    | blk    | yes    | NA     | NA     | NA     | NA     |
| SH02 | lay    | yes    | NA     | NA     | NA     | NA     | ani    | no     |
| SH03 | NA     | NA     | NA     | NA     | pri    | yes    | ani    | yes    |
| SH04 | lay    | no     | NA     | NA     | NA     | NA     | ani    | yes    |
| SH05 | lay    | yes    | blk    | yes    | NA     | NA     | NA     | NA     |
+------+--------+--------+--------+--------+--------+--------+--------+--------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:37:53.330

试试这个，虽然我认为您对状态 3 的预期结果可能是错误的：

```
SELECT
  Shot,
  CASE lay WHEN 1863 THEN 'lay' ELSE 'NA' END AS 'Stage1',
  CASE WHEN lay=1863 THEN lay_status ELSE 'NA' END AS 'Status-lay',
  CASE blk WHEN 1863 THEN 'blk' ELSE 'NA' END AS 'Stage2',
  CASE WHEN blk=1863 THEN blk_status ELSE 'NA' END AS 'Status-blk',
  CASE pri WHEN 1863 THEN 'pri' ELSE 'NA' END AS 'Stage3',
  CASE WHEN pri=1863 THEN pri_status ELSE 'NA' END AS 'Status-pri',
  CASE ani WHEN 1863 THEN 'ani' ELSE 'NA' END AS 'Stage4',
  CASE WHEN ani=1863 THEN ani_status ELSE 'NA' END AS 'Status-ani'
FROM
  my_table
WHERE
  lay = 1863
OR
  blk = 1863
OR
  pri = 1863
OR
  ani = 1863 
```

这给出了以下结果：

```
| SHOT | STAGE1 | STATUS-LAY | STAGE2 | STATUS-BLK | STAGE3 | STATUS-PRI | STAGE4 | STATUS-ANI |
------------------------------------------------------------------------------------------------
| SH01 |    lay |        yes |    blk |        yes |     NA |         NA |     NA |         NA |
| SH02 |    lay |        yes |     NA |         NA |     NA |         NA |    ani |         no |
| SH03 |     NA |         NA |     NA |         NA |    pri |        yes |    ani |        yes |
| SH04 |    lay |         no |     NA |         NA |     NA |         NA |    ani |        yes |
| SH05 |    lay |        yes |    blk |        yes |     NA |         NA |     NA |         NA | 
```

[http://sqlfiddle.com/#!2/ef7d9/31/0](http://sqlfiddle.com/#!2/ef7d9/31/0)

# java - 在 Linux 上安装 BlackBerry Java sdk

> ID：13971892
> 
> 赞同：1
> 
> 时间：2012-12-20T12:07:39.510
> 
> 标签：java, linux, blackberry, blackberry-eclipse-plugin

我是黑莓开发的新手。我已经使用“blackberry native c/c++ sdk”进行黑莓应用程序开发，但现在我想用 java 语言开发应用程序。谁能告诉我如何为 Linux 32 位获取“BlackBerry Java sdk”的过程？

# ruby - Mongomap排序

> ID：13971896
> 
> 赞同：0
> 
> 时间：2012-12-20T12:08:00.473
> 
> 标签：ruby, mongodb, mongomapper

我对 mongomapper + 排序感到困惑。

我有一个测试博客，其中包含如下帖子的数据：

[http://www.mongodb.org/display/DOCS/Schema+Design](http://www.mongodb.org/display/DOCS/Schema+Design)

现在，我想只显示每个博客条目按时间升序排序的评论。

如果我使用 where，我会得到 Plucky，当我使用 all() 时，我会得到 Array...这是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:48:18.803

您链接到的答案是在内存中对结果集进行排序，这很昂贵，并且如果您的评论多于一批可以显示的评论，则可能会导致错误。

对此进行排序的正确方法是在查询中使用 plucky 的 sort() 方法，按 created_at，降序（最新的优先）：

```
post.comments.sort(:created_at).each {|comment| do_awesome_stuff(comment) } 
```

（假设您有一个拥有多个评论的 Post 模型，并且您在评论中使用了内置 created_at 字段。

Mongomapper 使用类似于 ActiveRecord 范围的链接查询/过滤器模型，这就是为什么 where() 和 sort() 一样返回可链接的 Plucky 查询的原因。然后，您可以将其转换为结果数组或链接更多排序/过滤器。您还可以直接在 plucky 查询上使用像 each() 这样的枚举器。

上面示例中的代码正在执行以下链式调用：

1.  返回一个过滤此帖子对象的所有评论的勇敢查询
2.  更新该查询以对 created_at 返回的评论进行降序排序
3.  从数据库中获取一组结果，并通过 each() 将它们提供给您的代码

# mysql - mysql查询 - 无法绕过它

> ID：13971897
> 
> 赞同：1
> 
> 时间：2012-12-20T12:08:08.707
> 
> 标签：mysql, select

我有这个跟踪文件下载的小 PHP 脚本，目前我正在使用以下查询获取结果：

```
SELECT file, COUNT(file) AS downloads 
FROM downloads 
WHERE file LIKE 'pfx_%' 
GROUP BY file
ORDER BY downloads DESC 
```

对于每个新下载，我都会创建一个新行，将文件名保存在一列中。这带回了类似的东西

```
文件名01 | 1200
文件名02 | 100
文件名03 | 256
...
文件名0x | 932

```

我现在遇到的问题是某些文件具有 Filename01_1.0 和 Filename01_1.1、Filename01_1.2 等版本

是否可以获取这些版本并将它们计为一个文件名？

我希望这是有道理的:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T12:13:28.780

你可以这样做：

```
GROUB BY SUBSTRING_INDEX(file, '.', 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:13:12.677

该[`SUBSTRING_INDEX()`功能](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)是您的朋友：

```
SELECT SUBSTRING_INDEX(file, '_', 1) as file, COUNT(*) AS downloads 
FROM downloads 
WHERE file LIKE 'pfx_%' 
GROUP BY file
ORDER BY downloads DESC 
```

# java - 从用户代理中提取手机名称

> ID：13971902
> 
> 赞同：4
> 
> 时间：2012-12-20T12:08:41.650
> 
> 标签：java, jsp, servlets, user-agent

我想知道我们如何`handset name`从`user-agent`字符串中提取。

例如，我的用户代理字符串是 `Mozilla/5.0 (Symbian/3; Series60/5.2 Nokia500/000.094; Profile/MIDP-2.1 Configuration/CLDC-1.1 ) AppleWebKit/533.4 (KHTML, LIKE Gecko) NokiaBrowser/7.3.1.35 Mobile Safari/533.4 3gpp-gba`，那么我必须将结果提取为`Nokia500`.

由于手机 id 的索引与每个用户代理不同，我无法找到它，我怎样才能得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:14:13.017

您可以使用[user-agent-utils](http://code.google.com/p/user-agent-utils/)来解析`user-agent`字符串并从中获取您想要的任何内容。

# java - 如何获取所有 Facebook 好友即将到来的生日列表

> ID：13971903
> 
> 赞同：1
> 
> 时间：2012-12-20T12:08:44.703
> 
> 标签：java, android, facebook, facebook-graph-api, android-emulator

我制作了一个程序，在其中我得到所有 facebook 朋友的列表，因为他们的生日就像 1 月到 12 月的形式一样，所以在这里我得到了我所有过去的 facebook 朋友的生日，现在我只想显示所有即将到来的生日列表。

**MyLocalDB.java**

```
public class MyLocalDB {
private static final String DATABASE_NAME = "bdrem";
private static final String TABLE_FRIEND = "friend";
private static final String TABLE_FRIEND_TEMP = "friend_temp";
private static final String TABLE_SETTINGS = "settings";
private static final int DATABASE_VERSION = 4;

public static final String KEY_ID = "friendID";
public static final int ID_COLUMN = 0;
// The name and column index of each column in friend's table
public static final String KEY_FBID = "facebookID";
public static final int FBID_COLUMN = 1;
public static final String KEY_NAME = "name";
public static final int NAME_COLUMN = 2;
public static final String KEY_BIRTHDAY = "birthday";
public static final int BIRTHDAY_COLUMN = 3;
public static final String KEY_PIC = "picture";
public static final int PIC_COLUMN = 4;
public static final String KEY_BDAYMESSAGE = "message";
public static final int BDAYMESSAGE_COLUMN = 5;
public static final String KEY_AUTOPOST = "autopost";
public static final int AUTOPOST_COLUMN = 6;

// The name and column index of each column in setting's table
public static final String KEY_SETTINGS_ID = "settingsId";
public static final String KEY_SETTINGS_VALUE = "settingsValue";
public static final int SETTINGS_KEY_COLUMN = 0;
public static final int SETTINGS_VALUE_COLUMN = 1;

private static final String SETTINGS_CREATE = "create table "
        + TABLE_SETTINGS + " ( " + KEY_SETTINGS_ID + " varchar(255), "
        + KEY_SETTINGS_VALUE + " varchar(255)" + " );";

private static final String FRIENDS_CREATE = "create table " + TABLE_FRIEND
        + " (" + KEY_ID + " integer primary key autoincrement, " + KEY_FBID
        + " int, " + KEY_NAME + " varchar(50)," + KEY_BIRTHDAY
        + " varchar(25), " + KEY_PIC + " varchar(255)," + KEY_BDAYMESSAGE
        + " varchar(255), " + KEY_AUTOPOST + " varchar(10)" + " );";

private static final String FRIENDS_TEMP_CREATE = "create table "
        + TABLE_FRIEND_TEMP + " (" + KEY_ID
        + " integer primary key autoincrement, " + KEY_FBID + " int, "
        + KEY_NAME + " varchar(50)," + KEY_BIRTHDAY + " varchar(25), "
        + KEY_PIC + " varchar(255)," + KEY_BDAYMESSAGE + " varchar(255), "
        + KEY_AUTOPOST + " varchar(10)" + " );";

private SQLiteDatabase localDB;
// private final Context context;
private LocalDBHelper dbHelper;

public MyLocalDB(Context context) {
    // this.context = context;
    this.dbHelper = new LocalDBHelper(context, DATABASE_NAME, null,
            DATABASE_VERSION);
}

public void open() throws SQLException {
    localDB = dbHelper.getWritableDatabase();
}

private static class LocalDBHelper extends SQLiteOpenHelper {

    public LocalDBHelper(Context context, String name,
            CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.d(TAG, "DB create");
        db.execSQL(FRIENDS_CREATE);
        db.execSQL(SETTINGS_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.d(TAG, "Upgrading from " + oldVersion + " to " + newVersion
                + ", which may destroy all the old data.");

        // Drop the old table
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_FRIEND);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_FRIEND_TEMP);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_SETTINGS);

        // Create a new one
        onCreate(db);
    }
}

// Local storage should have one table for key-value pair
public String getSettings(String settingsKey) {
    String settingsValue = "";
    try {
        Cursor settings = localDB.query(true, TABLE_SETTINGS, null,
                KEY_SETTINGS_ID + " = ?", new String[] { settingsKey },
                null, null, null, null);
        if ((settings.getCount() == 0) || !settings.moveToNext()) {
            return "";
        }
        settingsValue = settings.getString(SETTINGS_VALUE_COLUMN);
    } catch (SQLiteException ex) {
        Log.d(TAG, ex.getMessage());
    }
    Log.v(TAG, "setting: " + settingsValue);
    return settingsValue;
}

public void setSettings(String key, String value) {
    Log.d(TAG, key + ", " + value);
    try {
        localDB.execSQL("delete from " + TABLE_SETTINGS + " where "
                + KEY_SETTINGS_ID + " = '" + key + "';");
        localDB.execSQL("insert into " + TABLE_SETTINGS + " values ('"
                + key + "', '" + value + "');");
    } catch (SQLiteException ex) {
        Log.d(TAG, ex.getMessage());
    }
}

public List<MyFriend> getAllFriends() {

    return getFriendsFilteredBy(null);
}

public MyFriend getFriendByFbID(String facebookId) {

    Cursor friendResults = localDB.query(false, TABLE_FRIEND, null,
            KEY_FBID + "=" + facebookId, null, null, null, null, null);

    if ((friendResults.getCount() == 0) || !friendResults.moveToNext()) {  //First
        return null;
    }

    MyFriend friend = new MyFriend();
    friend.setBdayMessage(friendResults.getString(BDAYMESSAGE_COLUMN));
    friend.setAutoPost(Boolean.valueOf(friendResults
            .getString(AUTOPOST_COLUMN)));
    return friend;
}

public List<MyFriend> getFriendsFilteredBy(Filter filterBy) {
    List<MyFriend> friends = new ArrayList<MyFriend>();
    String[] resultColumns = new String[] { KEY_ID, KEY_FBID, KEY_NAME,
            KEY_BIRTHDAY, KEY_PIC, KEY_BDAYMESSAGE, KEY_AUTOPOST };

    String selection = null;
    String[] selectionArgs = null;
    String orderBy = KEY_BIRTHDAY;

    if (filterBy != null) {
        switch (filterBy) {
        case MONTH:
            selection = KEY_BIRTHDAY + " LIKE ?";
            selectionArgs = new String[1];
            selectionArgs[0] = MyUtils.getCurrentMonth() + "%";
            orderBy = KEY_BIRTHDAY;
            Log.v(TAG, "localdb.month- " + selectionArgs[0]);
            break;
        case WEEK:
            selection = KEY_BIRTHDAY + " >= ? and " + KEY_BIRTHDAY
                    + " <= ?";
            selectionArgs = new String[2];
            selectionArgs[0] = MyUtils.getCurrentMonth() + "/"
                    + MyUtils.getCurrentWeekDays()[0];
            selectionArgs[1] = MyUtils.getCurrentMonth() + "/"
                    + MyUtils.getCurrentWeekDays()[1];
            orderBy = KEY_BIRTHDAY;
            Log.v(TAG, "localdb.week- " + selectionArgs[0] + ","
                    + selectionArgs[1]);
            break;
        case DAY:
            selection = KEY_BIRTHDAY + " LIKE ?";
            selectionArgs = new String[1];
            selectionArgs[0] = MyUtils.getCurrentMonth() + "/"
                    + MyUtils.getCurrentWeekDays()[0] + "%";
            selectionArgs[0] = "12/23%";
            Log.v(TAG, "localdb.day- " + selectionArgs[0]);
            break;
        default:
            break;
        }
    }
    /*
     * TESTING else{ selection = "name LIKE ?"; selectionArgs = new
     * String[1]; selectionArgs[0] = "%aad%"; }
     */

    Cursor allRows = localDB.query(false, TABLE_FRIEND, resultColumns,
            selection, selectionArgs, null, null, orderBy, null);

    if (allRows.moveToNext()) {
        do {
            String fbId = allRows.getString(FBID_COLUMN);
            String name = allRows.getString(NAME_COLUMN);
            String birthday = allRows.getString(BIRTHDAY_COLUMN);
            String picture = allRows.getString(PIC_COLUMN);
            String message = allRows.getString(BDAYMESSAGE_COLUMN);
            boolean isAutoPost = allRows.getString(AUTOPOST_COLUMN).equals(
                    "false") ? false : true;
            MyFriend friend = new MyFriend(fbId, name, birthday, picture,
                    message, isAutoPost);
            friends.add(friend);
        } while (allRows.moveToNext()); //Next
    }
    return friends;
}

public Report syncFriends(List<MyFriend> friends) {
    Log.v(TAG, "mylocaldb.syncfriends Sync started!" + friends.size());
    localDB.execSQL("DROP TABLE IF EXISTS " + TABLE_FRIEND_TEMP);
    localDB.execSQL(FRIENDS_TEMP_CREATE);

    for (MyFriend friend : friends) {
        insertFriend(friend, TABLE_FRIEND_TEMP);
    }

    localDB.execSQL("update " + TABLE_FRIEND_TEMP
            + " set message = (select message from " + TABLE_FRIEND
            + " where " + TABLE_FRIEND + ".facebookID = "
            + TABLE_FRIEND_TEMP + ".facebookID)");

    localDB.execSQL("update " + TABLE_FRIEND_TEMP
            + " set message = ' ' where message is null;");

    localDB.execSQL("update " + TABLE_FRIEND_TEMP
            + " set autopost = (select autopost from " + TABLE_FRIEND
            + " where " + TABLE_FRIEND + ".facebookID = "
            + TABLE_FRIEND_TEMP + ".facebookID)");

    localDB.execSQL("update " + TABLE_FRIEND_TEMP
            + " set autopost = 'false' where autopost is null;");

    localDB.execSQL("DROP TABLE IF EXISTS " + TABLE_FRIEND);
    localDB.execSQL("ALTER TABLE " + TABLE_FRIEND_TEMP + " RENAME to "
            + TABLE_FRIEND);

    friends.clear();
    friends = getAllFriends();

    Log.v(TAG, "mylocaldb.syncfriends Sync finished." + friends.size());
    return new Report(true, "Friends Synced");
}

public Report storeFriends(List<MyFriend> friends) {
    int count = 0;
    for (MyFriend friend : friends) {
        if (storeFriend(friend).isSuccess == true) {
            count++;
        }
    }

    if (count == friends.size()) {
        return new Report(true, count + " friends stored.");
    } else {
        return new Report(false, "Only " + count + " friends stored.");
    }
}

public Report storeFriend(MyFriend friend) {
    Cursor friendResults = localDB.query(false, TABLE_FRIEND, new String[] {
            KEY_ID, KEY_FBID }, KEY_FBID + "=" + friend.getFbID(), null,
            null, null, null, null);
    Report report = null;
    // If friend doesn't exist, insert it
    if ((friendResults.getCount() == 0) || !friendResults.moveToNext()) {
        report = insertFriend(friend);
        return report;
    }
    // If friend exists, update it
    else {
        long rowId = friendResults.getLong(ID_COLUMN);
        String message = friend.getBdayMessage();
        boolean isAutoPost = friend.isAutoPost();
        report = saveMessage(rowId, message, isAutoPost);
        report = updateFriend(rowId, friend);
        return report;
    }
}

// Insert friend in database

public Report insertFriend(MyFriend friend) {
    return insertFriend(friend, TABLE_FRIEND);
}

public Report insertFriend(MyFriend friend, String tableName) {
    ContentValues newFriend = new ContentValues();
    newFriend.put(KEY_FBID, friend.getFbID());
    newFriend.put(KEY_NAME, friend.getName());
    newFriend.put(KEY_BIRTHDAY, friend.getBday());
    newFriend.put(KEY_PIC, friend.getPic());
    newFriend.put(KEY_BDAYMESSAGE, friend.getBdayMessage());
    boolean isAutoPost = friend.isAutoPost();
    if (isAutoPost) {
        newFriend.put(KEY_AUTOPOST, "true");
    } else
        newFriend.put(KEY_AUTOPOST, "false");

    try {
        localDB.insert(tableName, null, newFriend);
    } catch (SQLiteException ex) {
        return new Report(false, ex.getMessage());
    }

    return new Report(true, "Friend inserted successfully!");
}

// Update friend in database
public Report updateFriend(long rowId, MyFriend friend) {

    ContentValues updatedFriend = new ContentValues();

    updatedFriend.put(KEY_FBID, friend.getFbID());
    updatedFriend.put(KEY_NAME, friend.getName());
    updatedFriend.put(KEY_BIRTHDAY, friend.getBday());
    updatedFriend.put(KEY_PIC, friend.getPic());
    updatedFriend.put(KEY_BDAYMESSAGE, friend.getBdayMessage());
    boolean isAutoPost = friend.isAutoPost();
    if (isAutoPost) {
        updatedFriend.put(KEY_AUTOPOST, "true");
    } else
        updatedFriend.put(KEY_AUTOPOST, "false");

    try {
        String where = KEY_ID + "=" + rowId;
        localDB.update(TABLE_FRIEND, updatedFriend, where, null);
    } catch (SQLiteException ex) {
        return new Report(false, ex.getMessage());
    }
    return new Report(true, "Friend is updated successfully!");
}

public Report saveMessage(long rowId, String message, boolean isAutoPost) {

    ContentValues updatedFriend = new ContentValues();
    updatedFriend.put(KEY_BDAYMESSAGE, message);

    if (isAutoPost) {
        updatedFriend.put(KEY_AUTOPOST, "true");
    } else
        updatedFriend.put(KEY_AUTOPOST, "false");

    try {
        String where = KEY_ID + "=" + rowId;
        localDB.update(TABLE_FRIEND, updatedFriend, where, null);
    } catch (SQLiteException ex) {
        return new Report(false, ex.getMessage());
    }
    return new Report(true, "Friend is updated successfully!");
}

public Report saveMessageByFbID(String ID, String message,
        boolean isAutoPost) {

    ContentValues updatedFriend = new ContentValues();
    updatedFriend.put(KEY_BDAYMESSAGE, message);
    updatedFriend.put(KEY_AUTOPOST, isAutoPost ? "true" : "false");

    try {
        String where = KEY_FBID + " = ?";
        localDB.update(TABLE_FRIEND, updatedFriend, where,
                new String[] { ID });
    } catch (SQLiteException ex) {
        return new Report(false, ex.getMessage());
    }
    return new Report(true, "Friend is updated successfully!");
}

public Report removeFriend(long rowId) {

    String where = KEY_ID + "=" + rowId;
    try {
        localDB.delete(TABLE_FRIEND, where, null);
    } catch (SQLiteException ex) {
        return new Report(false, ex.getMessage());
    }
    return new Report(false, "Friend is removed successfully!");
}

public void close() {
    localDB.close();
}
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T13:42:33.070

这里没有什么难的。使用图形 API：

1.  **获取**您的用户的出生日期：`/YOUR_ID?fields=friends.fields(birthday)`。
2.  **使用每个人的出生日期和月份对日期进行**排序。****
***   获取当前日期并**显示**以下出生日期。**

# java - 仅发布更改的组件

> ID：13971909
> 
> 赞同：0
> 
> 时间：2012-12-20T12:08:59.187
> 
> 标签：java, maven, release

我们有 Java 项目，我们应该只交付已更改的工件，但同时拥有包含未更改组件的最新发布版本和此版本中已更改组件的产品。我们使用 Maven 3 进行构建。

让我们看看我们是否有产品 1.1-SNAPSHOT（意味着它正在开发中），其中 6 个组件都有自己的发布版本。

现在如果将具有如下结构：

```
- c1 - 1.0-SNAPSHOT
  |- m1 - 2.0-SNAPSHOT
  |- m2 - 3.0-SNAPSHOT
- c2 - 4.0-SNAPSHOT
  |- m3 - 5.0-SNAPSHOT
  |- m4 - 6.0-SNAPSHOT 
```

其中 c 是父组件，m 是模块。版本是随机拍摄的。可能存在一些依赖关系，例如 m4 依赖于 m2。

假设我们已经更新了 m2 模块并且我们想要发布它。我们怎么做？仅手动启动 m2 和 m4 模块的发布过程？什么标签问题也出现了？我想它应该是包含新版本的整个产品，用于标记刚刚发布的模块和未更新模块的源版本。

接下来我们想要创建产品发布包，它将是 1.1 版本，其中包括 m1（可以是 0.99）和 m3（可以是 4.99）的最新发布版本，可以从产品的 1.0 版本中获取他们没有改变。m2（它将是 3.0）和 m4（它将是 6.0）的新发布版本也应该是 1.1 包的一部分。怎么做？

我看到的唯一解决方案是使用 maven-version-plugin，但它需要在此过程中进行多次 hack 开发。

我们的想法是构建最少的版本，并且刚刚发布了已更改的模块。

什么 Maven 可以自动提供这个？Maven-release-plugin 在这个级别没有帮助。刚刚更改的组件如何发布？我开始想也许我们不需要使用 SNAPSHOT 来支持这种意识形态。

谢谢你。

# mysql - 附加来自具有相同字段的两个 sql 查询的结果

> ID：13971911
> 
> 赞同：1
> 
> 时间：2012-12-20T12:09:07.347
> 
> 标签：mysql, sql, database, rdbms

我有两个 sql 查询，它们给出具有相同属性的结果集...我想组合这两个结果集...我的第一个查询给出

```
order_id     frequency
-------------------------
1             5
3             7
10            2
12            3 
```

第二个查询给出

```
order_id     frequency
-------------------------
1             3
10            2
12            8 
```

## 我最终想要的结果是

```
order_id     frequency
-------------------------
1             5
3             7
10            2
12            3
1             3
10            2
12            8 
```

这里 union 不起作用，就好像有两个相同的元组，例如 pair 10 2 它应该出现两次。

## 请提出一些mysql查询；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:17:16.043

你需要**[联合所有](http://dev.mysql.com/doc/refman/5.0/en/union.html)**

*`Union`目标列表中必须有相同数量的表达式*

```
Select order_id, frequency from Table_A
Union All
Select order_id, frequency from Table_B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T12:10:35.817

你试过 UNION ALL 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T12:10:44.157

利用

```
UNION ALL 
```

以避免删除重复。

# wordpress - 如何在 Appfog 中下载整个网站内容？

> ID：13971915
> 
> 赞同：1
> 
> 时间：2012-12-20T12:09:21.770
> 
> 标签：wordpress, paas, appfog

我在appfog中创建了一个wordpress应用程序，但是Appfog中的“下载源代码”功能不允许我下载整个网站内容，例如`wp-content/uploads/`不能包含下的文件。appfog回复中的支持如下：

> 当您执行“af pull”命令时，这将拉取应用程序的最后一个暂存或推送副本，而不是拉取服务器上的实时内容。我们确实建议用户上传和静态媒体内容，尤其是对于 Wordpress，使用像 Amazon S3 这样的 CDN 来存储这些文件。这样您就可以通过 CDN 直接访问它们，它们远离应用程序提供服务以获得更好的性能，并且在使用临时文件系统重新启动应用程序时它们不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:33:22.443

你是对的，如果没有应用程序内暴露文件系统的工具，你不能批量下载文件系统或从 AppFog 上传。[使用 WP2Cloud 等 WP 插件和AppFog](http://wordpress.org/extend/plugins/wp2cloud-wordpress-to-cloud/)托管的应用程序将 Wordpress 上传内容存储在 S3 存储桶中会更好。Amazon S3 是一种快速、持久且廉价的云文件存储，强烈推荐用于 WP 上传。

有关将 S3 与 AppFog 结合使用的更多信息：http: [//blog.appfog.com/how-to-use-amazon-s3-for-persistent-file-storage-on-appfog/](http://blog.appfog.com/how-to-use-amazon-s3-for-persistent-file-storage-on-appfog/)

# php - mysql的选择查询中的不同不起作用

> ID：13971916
> 
> 赞同：0
> 
> 时间：2012-12-20T12:09:28.313
> 
> 标签：php, mysql, database, select, distinct

我 在这样的**mysql 数据库**的选择查询中使用**distinct**

 **```
$query=mysql_real_escape_string($_GET['query']);
$query_for_result=mysql_query("SELECT DISTINCT *
FROM vendor
LEFT JOIN branches ON branches.vendor_id = vendor.vendor_id
WHERE
(vendor.name LIKE '%".$query."%'
OR vendor.description LIKE '%".$query."%'
OR branches.city LIKE '%".$query."%')");
$qrow=mysql_fetch_array($query_for_result);
if(empty($qrow)){
   while($qrow=mysql_fetch_array($query_for_result)){

          Some Code to display result 
<?php
   }
    mysql_close();
}
    ?> 
```

问题是这样的，它多次显示每个结果，它显示每个结果与它喜欢的城市从分支表一样多，（意味着：如果供应商表中的结果在分支表中有 5 个城市，它将显示 5 次）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:12:09.760

这是工作。您返回的是两个表中的所有列值。因此，如果供应商有 5 个城市，则有 5 个不同的结果：

```
Vendor   City
A        London
A        New York
B        London
C        London 
```

这些行都不相同，因此，它们是查询的不同结果。

假设您想要不同的供应商列表，那么您需要这样做：

```
SELECT DISTINCT vendor.*
FROM vendor
LEFT JOIN branches ON branches.vendor_id = vendor.vendor_id
WHERE
(vendor.name LIKE '%".$query."%'
OR vendor.description LIKE '%".$query."%'
OR branches.city LIKE '%".$query."%')"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:14:06.300

工作 - 但您的`DISTINCT`期望被误导了：`SELECT DISTINCT`只会从结果集中删除**完全相同**的元组，并且由于您请求`*`这意味着来自所有表的所有字段，您会得到元组，这些元组在连接表中有所不同。

您可以通过减少返回的列来解决此问题：命名它们或仅使用`vendor.*`**

# apache-flex - 在数据网格中滚动时选择移动

> ID：13971921
> 
> 赞同：1
> 
> 时间：2012-12-20T12:09:35.270
> 
> 标签：apache-flex, flex3

我是 flex 和这个论坛的新手。我有一个数据网格，它在 itemrenderer 的 mx:VBox 中显示图像，现在我需要允许用户多选 VBox 。但是当我选择一些项目时，更改 VBox 的背景颜色并滚动网格它会自动选择一些随机项目并设置相同的背景颜色。我知道 flex 重用项目渲染器，我在[这里读到了](http://www.adobe.com/devnet/flex/articles/itemrenderers_pt1.html)

但我怎样才能阻止我只选择项目。下面是我的代码

```
<mx:DataGrid  id="dgPhoto" 
                              variableRowHeight="true" 
                              dataProvider="{StyleItemsArray}" 
                              verticalGridLineColor="white" 
                              verticalGridLines="true" 
                              showHeaders="false" 
                              width="100%" 
                              height="100%"
                              allowMultipleSelection="true"
                              >
                    <mx:columns>
                        <mx:DataGridColumn width="250" headerText="Preview" dataField="img">
                            <mx:itemRenderer>
                                <mx:Component>
                                    <mx:VBox height="215" horizontalAlign="center" click="this.setStyle('backgroundColor', 'white')">
                                        <mx:Script>
                                            <![CDATA[

                                            ]]>
                                        </mx:Script>

                                        <mx:HBox horizontalAlign="center" horizontalGap="0">
                                            <mx:Image brokenImageBorderSkin="{null}" brokenImageSkin="@Embed(source='../img/errorIcon231.png')" id="image1" width="180" source="{data.source}" horizontalAlign="right"></mx:Image>
                                            <mx:VBox horizontalAlign="center" verticalGap="2">                                      
                                                <mx:Button click="{btnZoom_clickHandler(event, data.sourceHRES, data.label, data.IDMSFile)}" toolTip="Zoom" id="btnZoom" icon="@Embed(source='../img/zoom.png')" fillColors="#BB3030"/>
                                                <mx:Button click="{btnDownload_clickHandler(event, data.IDMSFile)}" toolTip="Place this style" id="btnDownload" icon="@Embed(source='../img/Download.png')" fillColors="#BB3030"/>

                                            </mx:VBox>
                                        </mx:HBox>
                                    </mx:VBox>
                                </mx:Component>                         
                            </mx:itemRenderer>
                        </mx:DataGridColumn>
                    </mx:columns>
                </mx:DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:27:10.423

您应在传递给每个 itemrenderer 的“数据”项中存储和处理您选择/未选择的状态。

或者您可以从 itemrenderer 引用网格并检查当前数据是否在选定项目中。

或者您可以扩展标准网格 itemrenderer，而不是使用 Box 和覆盖在选择/取消选择项目时调用的方法。

但是有没有特别需要使用那个旧的、有缺陷的、僵硬的 mx 数据网格而不是 spark one？您真的需要自定义选择指示而不是标准选择颜色的样式吗？

# linux - 从文件中提取多个模式并为每个模式输出前 5 个匹配项

> ID：13971925
> 
> 赞同：6
> 
> 时间：2012-12-20T12:09:39.437
> 
> 标签：linux, bash, grep

我有一个关于模式匹配的问题。我有一个包含多个模式的文件，比如 pattern.txt

轨迹
3039v1rpkm6.85轨迹3041v1rpkm6.84 轨迹
3042v1rpkm6.84

而要搜索的测试文件是 file.txt -

```
Locus3039v1rpkm6.85 gi|350401309|ref|XM_003486067.1|    0   10  85  328 253 8e-12   78.8
Locus3039v1rpkm6.85 gi|350401301|ref|XM_003486066.1|    0   10  85  566 491 8e-12   78.8
Locus3039v1rpkm6.85 gi|350401298|ref|XM_003486065.1|    0   10  85  500 425 8e-12   78.8
Locus3039v1rpkm6.85 gi|340723355|ref|XM_003400008.1|    0   10  106 566 470 3e-11   77.0
Locus3039v1rpkm6.85 gi|340723353|ref|XM_003400007.1|    0   10  106 496 400 3e-11   77.0
Locus3039v1rpkm6.85 gi|359323056|ref|XM_003639939.1|    0   27  104 322 245 9e-05   55.4
Locus3039v1rpkm6.85 gi|359323055|ref|XM_543849.4|   0   27  104 241 164 9e-05   55.4
Locus3039v1rpkm6.85 gi|354503991|ref|XM_003514015.1|    0   27  103 335 259 0.004   50.0
Locus3039v1rpkm6.85 gi|341599927|emb|AM412059.2|    1   63  100 1645525 1645489 6.8 39.2
Locus3039v1rpkm6.85 gi|340003223|emb|HE572590.1|    1   63  100 1671652 1671616 6.8 39.2
Locus3041v1rpkm6.84 gi|337757426|emb|FQ859181.1|    1   61  114 2772617 2772667 0.60    42.8
Locus3041v1rpkm6.84 gi|159889572|gb|CP000875.1|     0   5   40  1185295 1185330 0.60    42.8
Locus3041v1rpkm6.84 gi|158107272|gb|CP000820.1|     0   2   34  5594193 5594161 0.60    42.8
Locus3041v1rpkm6.84 gi|156844486|ref|XM_001645256.1|    83  140 793 850 0.60    42.8
Locus3041v1rpkm6.84 gi|339305108|gb|CP001503.2|     0   58  94  3006529 3006565 2.1 41.0
Locus3041v1rpkm6.84 gi|247533203|gb|CP001607.1|     0   1   40  1268073 1268034 2.1 41.0
Locus3041v1rpkm6.84 gi|367050653|ref|XM_003655658.1|    0   75  103 843 871 7.3 39.2
Locus3041v1rpkm6.84 gi|347002178|gb|CP003012.1|     0   75  103 2986236 2986208 7.3 39.2
Locus3043v1rpkm6.84 gi|332015867|gb|HQ658110.1|     0   9   31  4151    4129    0.49    42.8
Locus3043v1rpkm6.84 gi|254946573|gb|CP001619.1|     1   9   43  4243052 4243019 0.49    42.8
Locus3043v1rpkm6.84 gi|329755665|gb|JF715057.1|     0   11  42  110968  110937  1.7 41.0
Locus3043v1rpkm6.84 gi|9937515|gb|AF294752.1|   0   48  79  2081    2050    1.7 41.0 
```

我想匹配前 5 个命中的每个模式，然后移动到第一个 5 个的下一个模式，依此类推。

我试过

```
 grep -i -m 5 -f pattern.txt file.txt > out.txt
 grep -i -f pattern.txt -m 5 file.txt > out.txt 
```

但我只获得第一个模式和结局的前 5 名。我哪里错了？是否有执行此所需功能的参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T12:22:08.720

试试这个：

```
for pat in $(cat pattern.txt); do grep -i -m 5 $pat file.txt; done > out.txt 
```

意思是

1.  对于 中的每个模式`pattern.txt`，grep 前 5 个匹配的记录。
2.  将结果附加到 out.txt

**编辑**

正如@dogbane 在他的评论中提到的，这是一个[UUOC](http://partmaps.org/era/unix/award.html#uucaletter)。这是我改进的答案：

```
for pat in $(< pattern.txt); do grep -i -m 5 $pat file.txt; done > out.txt 
```

也看看[这个](https://stackoverflow.com/a/11710573/504646)答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T12:19:22.447

每次使用时，您都会`>`用新输出覆盖文件，`>>`而是使用您将能够追加到文件：

```
$ yourcommand >> file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:36:34.820

这是使用`awk`. 它也应该很快，因为`file.txt`只读取一次：

```
awk 'BEGIN { IGNORECASE=1 } FNR==NR { a[$0]++; next } { for (i in a) if ($0 ~ i && a[i] <= 5) { print; a[i]++ } }' patterns.txt file.txt 
```

结果：

```
Locus3039v1rpkm6.85 gi|350401309|ref|XM_003486067.1|    0   10  85  328 253 8e-12   78.8
Locus3039v1rpkm6.85 gi|350401301|ref|XM_003486066.1|    0   10  85  566 491 8e-12   78.8
Locus3039v1rpkm6.85 gi|350401298|ref|XM_003486065.1|    0   10  85  500 425 8e-12   78.8
Locus3039v1rpkm6.85 gi|340723355|ref|XM_003400008.1|    0   10  106 566 470 3e-11   77.0
Locus3039v1rpkm6.85 gi|340723353|ref|XM_003400007.1|    0   10  106 496 400 3e-11   77.0
Locus3041v1rpkm6.84 gi|337757426|emb|FQ859181.1|    1   61  114 2772617 2772667 0.60    42.8
Locus3041v1rpkm6.84 gi|159889572|gb|CP000875.1|     0   5   40  1185295 1185330 0.60    42.8
Locus3041v1rpkm6.84 gi|158107272|gb|CP000820.1|     0   2   34  5594193 5594161 0.60    42.8
Locus3041v1rpkm6.84 gi|156844486|ref|XM_001645256.1|    83  140 793 850 0.60    42.8
Locus3041v1rpkm6.84 gi|339305108|gb|CP001503.2|     0   58  94  3006529 3006565 2.1 41.0 
```

# jquery - jQuery 如何在 if() 语句中的 .scroll() 中使用 .scrollTo()？

> ID：13971926
> 
> 赞同：0
> 
> 时间：2012-12-20T12:09:41.783
> 
> 标签：jquery

如何在处理程序中使用`.scrollTo()`with`if()`语句`.scroll()`？

到目前为止，这是我的代码：

```
scrollToPage = function() {
    $(document).scrollTo($('.page'), 750, { easing: 'easeInOutCubic' });
}

$(window).scroll(function() {
    if ($(this).scrollTop() >= ($(this).height()-107)) {
        $('.page').addClass('page-top');
        $('header').css({position: 'fixed'});
    }
    else {
        scrollToPage();      //  This part doesn't work
    }
}); 
```

所以基本上，`if`滚动到达某个点（windowHeight-107），实际的内容页面位于窗口的顶部，并且标题将固定定位。

但是`else`（当内容页面不在顶部时），我希望它自动滚动到它。

但是，每次我想进一步或向后滚动时，它都会在第一次之后再次滚动到它。它似乎卡住了。

这里到底发生了什么，我该如何解决这个问题？

任何人？

# iphone - 如何在 youtube 以外的 webView 中加载视频

> ID：13971927
> 
> 赞同：0
> 
> 时间：2012-12-20T12:09:42.977
> 
> 标签：iphone, ios, xcode, video, webview

我正在尝试在我的 webview 中从网络加载一个视频，这个视频不是来自 youtube 我不知道如何加载它除了这段代码之外任何人都可以帮助我

```
- (void)embedYouTube:(NSString*)url frame:(CGRect)frame
{
    NSString* embedHTML = @"<html><head> <style type=\"text/css\">body {background-color: transparent;color: white;}</style></head><body style=\"margin:0\"><embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" width=\"%0.0f\" height=\"%0.0f\"></embed></body></html>";
    NSString* html = [NSString stringWithFormat:embedHTML, url, frame.size.width, frame.size.height];

  //  UIWebView *webView =[[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    [vebview loadHTMLString:html baseURL:nil];
    [self.view addSubview:vebview];
}
- (void)viewDidLoad
{
    [self embedYouTube:@"http://player.vimeo.com/video/32983838" frame:CGRectMake(0, 0, 320, 449)];
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:36:52.993

您可以使用 MPMoviePlayerController 控件播放视频。

`<MediaPlayer/MediaPlayer.h>`将框架导入应用程序。

.h 文件

```
#import <MediaPlayer/MediaPlayer.h>

MPMoviePlayerController *moviePlayerController; 
```

.m 文件

```
-(void)startVideo:(NSString*)fileURL
{
   UIWebView *w = [[UIWebView alloc] init];
   w.frame = CGRectMake(10, 0, 300, 340);
   w.backgroundColor = [UIColor clearColor];

   moviePlayerController = nil;
   CGRect rect = CGRectMake(10, 0, 300, 400);

   moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
   [moviePlayerController.view setFrame:rect];
   moviePlayerController.fullscreen = YES;

   [moviePlayerController play];

   [w addSubview:moviePlayerController.view];
} 
```

在这里，我使用了动态 web-view inside view。您可以直接通过 XIB 使用它。

希望对您有所帮助。

谢谢。

# sql-server-2008 - 使用 Pentaho 显示数据

> ID：13971935
> 
> 赞同：1
> 
> 时间：2012-12-20T12:09:59.643
> 
> 标签：sql-server-2008, pentaho, navision, dynamics-nav

我的公司可能想使用 Pentaho 在仪表板上显示来自 Navision 的多个客户端的数据。用 Pentaho 而不是 .net 和 Navision Web 服务来做这件事会不会做更多的工作？我们还需要在仪表板上配置 AD。

这是否可能比使用 .net 和 Web 服务更快。Pentaho 是否可以通过 web 服务或仅通过 mssql db 获取数据？

非常感谢

PS：我知道这是一个模糊的问题，但我找不到任何有价值的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:27:25.420

Pentaho 可以通过 web 服务获取数据，但只能通过 ETL 工具。因此，您仍然希望将它存储在 pentaho 可以在某处访问的数据库中。虽然; 如果您真的想要，您实际上可以进行直接输入报告/仪表板的转换。（如果需要，结果也可以缓存）

pentaho 仪表板框架非常好，在 Webdetails 中搜索“Ctools”，它有一些很棒的演示可以帮助您入门。

# python - Python试图迭代多维列表的一个元素

> ID：13971941
> 
> 赞同：1
> 
> 时间：2012-12-20T12:10:14.470
> 
> 标签：python, arrays

我搜索了高低，但正在努力使用以下代码。在底部的 for 循环中，我需要遍历多维列表的第一个元素中的名称。我对 Python 很陌生，所以请原谅我的无知。

```
for file in files: # loop thru each recording
  file_with_path = recording_fullpath + "/" + file  #construct full file path
  file_mtime = modification_date(file_with_path)  # obtain file mod date
  if file_mtime >= start_date and file_mtime <= end_date:
#print file + " is within the time range " + str(file_mtime)
archive_list[count].append (file_with_path)
archive_list[count].append (recording_subdir) # append filename with path to list
archive_list.append([])
count =+ 1

tarname = tar_path + "/" + client_id + "_" + dt.datetime.now().strftime("%Y%m%d_%H%M%S") + ".tar.gz"
print tarname
tar = tarfile.open (tarname, "w:gz")
for name in archive_list[][]:
  print "Adding %s" % (name)
  tar.add(name, arcname=client_id)
tar.close() 
```

当我只使用单个元素数组但无法计算出包含第二列的语法时，此代码有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:13:32.470

```
tarname = tar_path + "/" + client_id + "_" + dt.datetime.now().strftime("%Y%m%d_%H%M%S") + ".tar.gz"
print tarname
tar = tarfile.open (tarname, "w:gz")
for name, dir in archive_list:
  print "Adding %s" % (name)
  tar.add(name, arcname=client_id)
tar.close() 
```

这将遍历列表，将每个包含两个元素的子列表解压缩为两个变量，`name`并且`dir`.

# ios6 - 使用自动布局强制 UIImageView 大小

> ID：13971950
> 
> 赞同：4
> 
> 时间：2012-12-20T12:10:52.447
> 
> 标签：ios6, autolayout

我正在开发一个仅针对 iOS 6 的应用程序，并且我将 nib 文件用于 UI（不是情节提要）。

我在视图控制器中有一个视图，其中包含 UIImageView 作为子视图。我需要 Retina 3.5 和 Retina 4 屏幕上的图像尺寸为 320x320。

我开始在 IB 中使用 Retina 4 Full Screen 的大小设计视图。我已将 UIImageView 放在我的视图上并将其大小设置为 320x320。然后我将图像视图的高度固定为等于 320 的约束。此时，约束更改为用户约束（即，它是蓝色而不是紫色）。

影响图像视图的其他约束是：

*   尾随空格：Superview 为 0
*   前导空格：Superview 为 0
*   顶部空间到：Superview 为 0

所以没有底部空间：Superview约束已定义。

现在，如果我将视图的大小（在模拟指标中）切换到 Retina 3.5 全屏，就会出现问题。

当我这样做时，图像视图的高度约束变为紫色和 232。

我不知道如何解决这个问题。我希望高度保持在 320。我认为这会受到底部空间的影响：约束，但鉴于没有任何定义，为什么图像视图的高度会发生变化？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T08:28:11.250

刚刚创建了一个测试项目来重新创建您的场景。我没有任何困难。有关模拟指标视网膜 3.5" 和视网膜 4"，请参阅下面的屏幕截图。

顺便说一句，我知道这不是答案，但它确实允许我包含屏幕抓取。

如您所见，图像大小在 Xcode 中保持在 320 x 320。它在模拟器上也可以正常工作。顶部、前导和尾随约束为零。没有指定底部约束。

让我觉得你一定有别的事情发生了？你能张贴你的Xcode窗口吗？

![在此处输入图像描述](../Images/643e6fc1f20e40239873e0a121c08a78.png)

![在此处输入图像描述](../Images/f3044849e236a3232ef4094c65b6c30b.png)

# google-app-engine - 没有错误和空白的浏览器屏幕？

> ID：13971955
> 
> 赞同：0
> 
> 时间：2012-12-20T12:11:01.187
> 
> 标签：google-app-engine, python-2.7

我有一个非常简单的 *.py 文件：

```
import webapp2

from google.appengine.api import users

class MainPage(webapp2.RequestHandler):
    def get(self):
       user = users.get_current_user()

       if user:
           self.response.headers['Content-Type'] = 'text/plain'
           self.response.out.write('Hello, ' + user.nickname())
       else:
           self.redirect(users.create_login_url(self.request.uri))

app = webapp2.WSGIApplication([('/', MainPage)],
                          debug=True) 
```

当我在本地运行它并单击“谷歌应用引擎启动器”上的浏览时，我在浏览器中看到一个空白屏幕，没有错误消息或任何东西。

同一文件中的此代码正在运行：

```
print 'Content-Type: text/plain'
print ''
print 'Hello, world!' 
```

知道为什么吗？谢谢！汤姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:34:01.790

除了缺少导入之外，此代码没有任何问题：

```
import webapp2 
```

它运行并显示：

> 你好，test@example.com

您还应该忘记`Print`在应用程序引擎中使用。它不是很有用。正如您在示例代码中所做的那样，将您的输出发送到响应中，或者使用[logging](http://docs.python.org/2/library/logging.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:37:01.570

尝试

```
# -*- coding: utf-8 -*-
from google.appengine.ext import webapp
from google.appengine.ext.webapp.util import run_wsgi_app
from google.appengine.ext import deferred
from google.appengine.api import users

class MainPage(webapp.RequestHandler):
    def get(self, *args, **kwargs):
        user = users.get_current_user()
        if user:
            self.response.headers['Content-Type'] = 'text/plain'
            self.response.out.write('Hello, ' + user.nickname())
        else:
            self.redirect(users.create_login_url(self.request.uri))

application = webapp.WSGIApplication([
  (r'/(.*)', MainPage),
], debug=True)

def main():
  run_wsgi_app(application)

if __name__ == '__main__':
  main() 
```

使用 app.yaml 之类的

```
application: test
version: 1
runtime: python27
api_version: 1
threadsafe: True

handlers:
- url: /.*
  script: test.application 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T12:52:34.907

您可能在连接 Google 登录 URL 时遇到问题，请尝试输入 response.write 以防用户不存在。

```
if user:
    ...
else:
    self.response.out.write('Hello, ' + user.nickname()) 
```

# c++ - OpenMAX 和 NDK：我可以从哪里获得表面？

> ID：13971966
> 
> 赞同：5
> 
> 时间：2012-12-20T12:11:59.167
> 
> 标签：c++, android-ndk, openmax

我正在编写一个显示视频的应用程序。该应用程序是使用 Android NDK 和 JNI 编写的。

我想使用 OpenMAX。在 OpenMAX 示例中，它从 Java 中检索表面，但我在哪里可以获得要渲染的表面？我只能通过 applicationContext 获得 nativeWindow。

例子：

```
void Java_com_example_nativemedia_NativeMedia_setSurface(JNIEnv *env, jclass clazz, jobject surface)                
{   
    theNativeWindow = ANativeWindow_fromSurface(env, surface);  
} 
```

但我没有表面。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:53:20.317

表面是从 SurfaceHolder 中检索的，该 SurfaceHolder 作为参数传入 SurfaceHolder.Callback 中的方法[，](http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html)即`surfaceChanged`或`surfaceCreated`。

查找`setSurface`Java 调用 JNI 函数的位置：

[wilhelm\tests\native-media\src\com\example\nativemedia\NativeMedia.java](https://android.googlesource.com/platform/frameworks/wilhelm/+/738e761c42f146b655fa01707b82be25c2200d63/tests/native-media/src/com/example/nativemedia/NativeMedia.java)

# objective-c - 合并和排序字典中包含的数组中的对象

> ID：13971972
> 
> 赞同：3
> 
> 时间：2012-12-20T12:12:22.873
> 
> 标签：objective-c, ios4, nsmutablearray

我从服务器获取这种数据数组**（它动态变化）：**

```
layers =     (
            {
        maximum = 4;
        minimum = 3;
        name = "layer 1";
    },
            {
        maximum = 19;
        minimum = 8;
        name = "layer 1";
    },
            {
        maximum = 1;
        minimum = 1;
        name = "layer 38";
    },
            {
        maximum = 4;
        minimum = 1;
        name = "layer 3";
    },
            {
        maximum = 24;
        minimum = 15;
        name = "layer 3";
    }
); 
```

在这种情况下，我在 1 个数组中有 5 个对象。每个对象都有名称、最小值和最大值。

**代码应该有一个从最小值到最大值统计的循环。例如，如果最小值为 10，最大值为 13，则值应为：10,11,12,13。**

我想将具有相同名称的对象放在一起，成为 1 个对象。正如我所说，**这些数据是动态变化的。**它可以有任何随机数据，但如果有相同的对象，它们将一个接一个地放置，就像这里的“第 1 层”对象和“第 3 层”对象一样。

我想要的最终结果是这样的：

```
{
    name = "layer 1";
    values =         (
        3,
        4,
        8,
        9,
        10,
        11,
        12,
        13,
        14,
        15,
        16,
        17,
        18,
        19
    );
},
    {
    name = "layer 38";
    values =         (
        1,
        1
    );
},
    {
    name = "layer 3";
    values =         (
        1,
        2,
        3,
        4,
        15,
        16,
        17,
        18,
        19,
        20,
        21,
        22,
        23,
        24
    );
} 
```

我试图运行的代码是：

```
 layers = [[NSMutableArray alloc]init];

         NSMutableArray *layer = [[NSMutableArray alloc]init];
        NSMutableDictionary *dic = [[NSMutableDictionary alloc]init];
        [layers addObject:[mivne_shichva objectAtIndex:0]];  
                   for (int i=0; i<mivne_shichva.count; i++) {
         //   NSLog(@"i=%d",i)         
                if ([[[mivne_shichva objectAtIndex:i]valueForKey:@"name"]isEqualToString:[[layers objectAtIndex:i] valueForKey:@"name"]]) {

                    NSLog(@"EQUALS");
                   layer = [[NSMutableArray alloc]init];                          
                    int minimum = [[[mivne_shichva objectAtIndex:i]valueForKey:@"minimum"]intValue];
                    int maximum = [[[mivne_shichva objectAtIndex:i]valueForKey:@"maximum"]intValue];
                    for (int x = minimum; x<=maximum; x++) {

                        [layer addObject:[NSString stringWithFormat:@"%d",x]];
                        NSLog(@"%@",layer);

                 // dic = [[NSMutableDictionary alloc]init];
                    [dic setValue:[[mivne_shichva objectAtIndex:i]valueForKey:@"name"] forKey:@"name"];
                    [dic setValue:layer forKey:@"values"];
                    [layers addObject:dic];                              

                    }  
                }else {

                 layer = [[NSMutableArray alloc]init];  
                    int minimum = [[[mivne_shichva objectAtIndex:i]valueForKey:@"minimum"]intValue];
                    int maximum = [[[mivne_shichva objectAtIndex:i]valueForKey:@"maximum"]intValue];
                    for (int x = minimum; x<=maximum; x++) {

                       [layer addObject:[NSString stringWithFormat:@"%d",x]];
                        NSLog(@"%@",layer);

                    }

                  NSMutableDictionary *dic = [[NSMutableDictionary alloc]init];  
                    [dic setValue:[[mivne_shichva objectAtIndex:i]valueForKey:@"name"] forKey:@"name"];
                        [dic setValue:layer forKey:@"values"];

                        [layers addObject:dic];  

                    NSLog(@"NOT EQUALS");
                }

        } 
```

但我不明白如何使它工作......

提前感谢任何代码和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:43:09.800

您的 sortedArrayDict 包含`key`为 Layer#，以及`value`基于相同层的排序和合并值的数组。

图层类：

```
@interface Layer : NSObject

@property(strong) NSString *name;
@property(assign) NSInteger minimum;
@property(assign) NSInteger maximum;

@end 
```

* * *

```
#import "AppDelegate.h"
#import "Layer.h"

@implementation AppDelegate

- (id)init
{
    self = [super init];
    if (self) {

        _finalDictionary=[NSMutableDictionary new];

        Layer *layer1=[Layer new];
        layer1.name=@"Layer 1";
        layer1.minimum=3;
        layer1.maximum=4;

        Layer *layer2=[Layer new];
        layer2.name=@"Layer 1";
        layer2.minimum=8;
        layer2.maximum=19;

        Layer *layer3=[Layer new];
        layer3.name=@"Layer 38";
        layer3.minimum=1;
        layer3.maximum=1;

        Layer *layer4=[Layer new];
        layer4.name=@"Layer 1";
        layer4.minimum=2;
        layer4.maximum=4;

        Layer *layer5=[Layer new];
        layer5.name=@"Layer 3";
        layer5.minimum=24;
        layer5.maximum=15;

        _initialArray=[[NSMutableArray alloc]initWithObjects:layer1,layer2,layer3,layer4,layer5, nil];

    }
    return self;
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{

    for (Layer *layer in _initialArray) {
        if ([_finalDictionary objectForKey:layer.name]) {
            //append array
            NSMutableArray *array=[_finalDictionary objectForKey:layer.name];
            [array addObject:[NSNumber numberWithInteger:[layer minimum]]];
            [array addObject:[NSNumber numberWithInteger:[layer maximum]] ];
        }
        else{
            //add new key
            NSMutableArray *array=[NSMutableArray new];
            [array addObject:[NSNumber numberWithInteger:[layer minimum]]];
            [array addObject:[NSNumber numberWithInteger:[layer maximum]] ];
            [_finalDictionary setObject:array forKey:layer.name];
        }
    }

    //sorting
    for (int i=0; i<_finalDictionary.count; i++){
        NSString *dict=[[_finalDictionary allKeys] objectAtIndex:i];
        NSArray *arrayToSort=[_finalDictionary objectForKey:dict];
        NSArray *sortedArray=[arrayToSort sortedArrayUsingSelector:@selector(compare:)];
        [_finalDictionary setObject:sortedArray forKey:dict];
    }

    //printing
    for (NSDictionary *dict in _finalDictionary) {
        NSLog(@"Label: %@",dict);
        for (Layer *layer in [_finalDictionary objectForKey:dict]) {
            NSLog(@"Value: %@",layer);
        }
    }
} 
```

输出：

```
2012-12-20 18:45:32.344 MergeArray[1357:403] Label: Layer 1
2012-12-20 18:45:32.346 MergeArray[1357:403] Value: 2
2012-12-20 18:45:32.347 MergeArray[1357:403] Value: 3
2012-12-20 18:45:32.347 MergeArray[1357:403] Value: 4
2012-12-20 18:45:32.348 MergeArray[1357:403] Value: 4
2012-12-20 18:45:32.349 MergeArray[1357:403] Value: 8
2012-12-20 18:45:32.349 MergeArray[1357:403] Value: 19
2012-12-20 18:45:32.350 MergeArray[1357:403] Label: Layer 38
2012-12-20 18:45:32.350 MergeArray[1357:403] Value: 1
2012-12-20 18:45:32.351 MergeArray[1357:403] Value: 1
2012-12-20 18:45:32.352 MergeArray[1357:403] Label: Layer 3
2012-12-20 18:45:32.360 MergeArray[1357:403] Value: 15
2012-12-20 18:45:32.362 MergeArray[1357:403] Value: 24 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:01:47.543

```
//array 'layers' of sample data
NSArray* layers = @[ @[@19,@8,@"layer 1"] , @[@4,@3,@"layer 1"] , @[@1,@1,@"layer 38"] , @[@4,@1,@"layer 3"] , @[@24,@15,@"layer 3"] ] ;

NSMutableDictionary* results = [NSMutableDictionary new] ;
for ( NSArray* layer in layers ) {
    int layerMaximum = [layer[0] intValue] ;
    int layerMinimum = [layer[1] intValue] ;
    NSString* layerName = layer[2] ;

    NSMutableArray* layerValues = [results objectForKey:layerName] ;
    if ( ! layerValues ) {
        layerValues = [NSMutableArray new] ;
    }

    for ( int i = layerMinimum ; i <= layerMaximum ; i++ ) {
        NSNumber* value = [NSNumber numberWithInt:i] ;
        if ( ! [layerValues containsObject:value] ) {
            [layerValues addObject:value] ;
        }
    }
    if ( layerMinimum == layerMaximum ) {
        [layerValues addObject:[NSNumber numberWithInt:layerMaximum] ] ;
    }
    [results setObject:layerValues forKey:layerName] ;
}

for ( NSString* layerName in results.allKeys ) {
    NSMutableArray* values = [results objectForKey:layerName] ;
    NSSortDescriptor* sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"intValue" ascending:YES] ;
    [values sortUsingDescriptors: @[sortDescriptor] ] ;
    [results setObject:values forKey:layerName] ;
} 
```

# c++ - “5”有什么问题？纸上的一切都很好

> ID：13971973
> 
> 赞同：0
> 
> 时间：2012-12-20T12:12:30.603
> 
> 标签：c++, math

这是我们应该用 C++ 解决的问题：

```
GCD ( 2m , 2n )         =  2 * GCD( m , n )
GCD ( 2m , 2n+1 )       = GCD ( m , 2n+1 )
GCD ( 2m+1,  2n+1 ) = GCD ( n-m , 2m+1 )  (m<n)
GCD ( m , m )       = m 
```

这是我写的函数：

```
int GCD(int n1, int n2)
{
    bool n1Zoj, n2Zoj;
    n1Zoj = (n1%2 == 0);
    n2Zoj = (n2%2 == 0);

    if(n1Zoj && n2Zoj)
        return 2 * GCD(n1/2, n2/2);

    if(n1Zoj && !n2Zoj)
        return GCD(n1/2, n2);

    if(!n1Zoj && !n2Zoj)
        return GCD((n2-n1)/2, n1);

    if(n1 == n2)
        return n1;
} 
```

（*“Zoj”在我的语言（波斯语）中的意思是“偶数”）

当我将 5 作为第二个参数传递时，程序崩溃并打印此消息：

```
Segmentation fault (core dumped) 
```

退出代码是`139`。我在使用 g++ 作为编译器的 ubuntu 12.04 上使用 Code::Blocks。

更新：程序崩溃 5,10,15,20,25,...

更新：我认为正确的函数形式是：

```
int GCD(int n1, int n2)
{
    if (n1 > n2)
        std::swap(n1, n2);

    //std::cout<<"GCD is called with params: "<<n1<<" & "<<n2<<std::endl;
    bool n1Zoj, n2Zoj;

    n1Zoj = (n1%2 == 0);
    n2Zoj = (n2%2 == 0);

    if(n1 == n2)
        return n1;

    if(n1Zoj && n2Zoj)
        return 2 * GCD(n1/2, n2/2);

    if(n1Zoj && !n2Zoj)
        return GCD(n1/2, n2);

    if(!n1Zoj && n2Zoj)
        return GCD(n2/2, n1);

    if(!n1Zoj && !n2Zoj)
        return GCD((n2-n1)/2, n1);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T12:14:28.357

当`(n1Zoj && n2Zoj)`评估为真时，你会做什么？你打电话

```
return 2 * GCD(n1, n2); 
```

**它使用完全相同的参数**调用函数，导致无限递归、堆栈溢出和堆栈溢出（分段错误）。

Protip - 学习调试 - 我无法强调这是多么**重要**。

# .net - .NET PDF 库，允许页面到页面的文本流

> ID：13971977
> 
> 赞同：0
> 
> 时间：2012-12-20T12:12:43.427
> 
> 标签：.net, pdf

我正在研究用于 .NET 的各种 PDF 生成库，这些库将允许我将多列文本从一页流到另一页。在查看了许多产品信息表之后，我似乎无法找到一个这样做的。

我有点想通过.NET 将过程自动化，并将 XML 导入 InDesign 模板，但我更喜欢使用 .NET 库而不是不得不使用 InDesign COM 对象。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:22:30.780

看看 PdfSharp。我已经用过几次了，它总是能满足我的要求。它是免费的，可通过 NuGet 获得

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T12:14:46.733

Aspose for .Net - 据说这是一个商业图书馆，而且成本略高。

# function - PDO 变量的范围

> ID：13971978
> 
> 赞同：0
> 
> 时间：2012-12-20T12:12:47.063
> 
> 标签：function, pdo, scope

这可能相当简单，但我不知道如何。现在，我正在使用 PDO 来访问 MySQL。我在脚本顶部创建了一个到数据库的连接，例如 `$db=new PDO("mysql:host=localhost; dbname=xyz",'usnm','pswd')` 现在当我调用一个函数时，它说该变量`$db`是未定义的。我已将该函数放在脚本`required`顶部的外部脚本中。现在我的问题是，PDO 变量的范围是什么？它是否扩展到脚本内部调用的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:15:38.003

这与“PDO 变量”的范围无关，它只是一般的变量。在 PHP 中，如果没有一点额外的工作，您将无法访问整个应用程序中的任何变量。请参阅[变量范围文档](http://php.net/manual/en/language.variables.scope.php)。

您可以注入数据库变量，例如：

```
function something($db){
} 
```

然后将数据库变量传递给函数，或者你可以这样做：

```
function something(){
  global $db;
} 
```

# c++ - 警告 LNK4254：“ATL”部分（50000040）合并到具有不同属性的“.rdata”（40000040）中

> ID：13971980
> 
> 赞同：2
> 
> 时间：2012-12-20T12:12:51.003
> 
> 标签：c++, linker, warnings, atl

我的项目多次收到此警告：

```
warning LNK4254: section 'ATL' (50000040) merged into '.rdata' (40000040) with different attributes 
```

我正在使用 Visual Studio 2010 Professional Edition 编译器，2010 版本的编译器，但是 VC++ **2005**库。

这似乎是原因。如果我使用 2010 库或 2005 编译器，问题就会消失，而无需更改代码。但是，如果可能的话，我想同时使用 2005 库和 2010 编译器。

有谁知道如何解决这个问题，或者这些警告是否绝对可以安全地忽略/禁用？

谢谢你。

编辑：问题似乎是由 atlbase.h 中的更改引起的：

2005 年：

```
#if defined(_M_IA64) || defined(_M_IX86) || defined (_M_AMD64)

#pragma section("ATL$__a", read, shared)
#pragma section("ATL$__z", read, shared)
#pragma section("ATL$__m", read, shared)
extern "C"
{
__declspec(selectany) __declspec(allocate("ATL$__a")) _ATL_OBJMAP_ENTRY* __pobjMapEntryFirst = NULL;
__declspec(selectany) __declspec(allocate("ATL$__z")) _ATL_OBJMAP_ENTRY* __pobjMapEntryLast = NULL;
}

#if !defined(_M_IA64)
#pragma comment(linker, "/merge:ATL=.rdata")
#endif

#else

extern "C"
{
__declspec(selectany) _ATL_OBJMAP_ENTRY* __pobjMapEntryFirst = NULL;
__declspec(selectany) _ATL_OBJMAP_ENTRY* __pobjMapEntryLast = NULL;
}

#endif  // defined(_M_IA64) || defined(_M_IX86) 
```

2010年：

```
#pragma section("ATL$__a", read)
#pragma section("ATL$__z", read)
#pragma section("ATL$__m", read)
extern "C"
{
__declspec(selectany) __declspec(allocate("ATL$__a")) _ATL_OBJMAP_ENTRY* __pobjMapEntryFirst = NULL;
__declspec(selectany) __declspec(allocate("ATL$__z")) _ATL_OBJMAP_ENTRY* __pobjMapEntryLast = NULL;
}

#if !defined(_M_IA64)
#pragma comment(linker, "/merge:ATL=.rdata")
#endif 
```

但我不知道如何使用这些知识来解决我的问题:(

# r - 在 R 中导入多个文件时自动命名对象

> ID：13971982
> 
> 赞同：4
> 
> 时间：2012-12-20T12:13:02.600
> 
> 标签：r, object

所以，我下载了一个包含 900 个 txt 文件的数据集，每个生物样本一个。我想要做的是将所有这些数据合并到 R 中的一个数据矩阵中。

```
txt_files = list.files()

# read txt files into a list 
for (i in length(txt_files)){
  x <- read.table(file=txt_files[i], sep="\t", header=TRUE, row.name=1)
} 
```

所有文件都在一个文件夹中，因此我使用`list.files()`查询所有文件名。然后我想将每个表读入一个单独的 R 对象（在这种情况下称为 x ）。问题是我想用实际文件的名称而不是 x 来命名每个对象。

我尝试了几件事并尝试搜索互联网，但尚未找到解决方案。我确实发现的一件事是使用 lapply 将它们全部导入数据列表。

```
data_list = lapply(txt_files, read.table, sep = "\t") 
```

但是，我认为这不适合我，因为在此之后数据矩阵不再可用。我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T12:22:20.470

命名连接的（尤其是顺序的）事物通常是一件坏事。接下来你要做的是循环这些东西，这意味着通过将位粘贴在一起来构造名称。一团糟。

尽可能将事物存储在列表中。你已经做到了。我创建了一些 CSV 文件：

```
> txt_files=c("f1.txt","f2.txt","f3.txt","f4.txt","f5.txt")
> data_list = lapply(txt_files, read.table, sep = ",")
> data_list[[1]]
  V1 V2 V3
1  1  2  3
> data_list[[3]]
  V1 V2 V3
1  1  2  3
2  5  4  3
3  1  2  3 
```

所以现在我可以遍历它们`for(i in 1:length(txt_files))`并获取文件的名称，`txt_files[i]`依此类推：

```
> for(i in 1:length(txt_files)){
+ cat("File is ",txt_files[i],"\n")
+ print(summary(data_list[[i]]))
+ }

File is  f1.txt 
       V1          V2          V3   
 Min.   :1   Min.   :2   Min.   :3  
 1st Qu.:1   1st Qu.:2   1st Qu.:3  
 Median :1   Median :2   Median :3  
 Mean   :1   Mean   :2   Mean   :3  
 3rd Qu.:1   3rd Qu.:2   3rd Qu.:3  
 Max.   :1   Max.   :2   Max.   :3  
File is  f2.txt 
       V1          V2          V3   
 Min.   :1   Min.   :2   Min.   :3  
 1st Qu.:1   1st Qu.:2   1st Qu.:3  
 Median :1   Median :2   Median :3  
 Mean   :1   Mean   :2   Mean   :3  
 3rd Qu.:1   3rd Qu.:2   3rd Qu.:3  
 Max.   :1   Max.   :2   Max.   :3  
 ... 
```

[ETC]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:17:23.403

你可以这样做：

```
names(data_list) <- txt_files 
```

也许：

```
names(data_list) <- basename(txt_files) 
```

或者也许使用`sapply`而不是`lapply`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T12:30:08.003

在没有看到您的数据的情况下，`assign`可能会通过以下方式应用：

```
txt_files = list.files()

# read txt files into a list 
for (i in length(txt_files)){
  x <- read.table(file=txt_files[i], sep="\t", header=TRUE, row.name=1)
  assign(paste(txt_files[i], "name", sep="."), x)
} 
```

您也可以使用`get`回调每个创建的对象：

```
x <- get(paste(txt_files[i], "name", sep=".")) 
```

# python - 如何在 zsh 中使用通过 easy_install 安装的软件包？

> ID：13971997
> 
> 赞同：1
> 
> 时间：2012-12-20T12:13:38.030
> 
> 标签：python, macos, pip, zsh, easy-install

我使用 OS X (Mountain Lion) 和 ZSH。我可以使用 easy_install 来安装一些 python 包，但是如果我想在我的 ZSH 中使用该命令，我会得到这样的结果：

> zsh：找不到命令：virtualenv

我是否忘记在我的 $PATH 中包含任何内容？希望你能帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:38:24.510

感谢@Evert 我必须添加`/usr/local/share/python`到我的提示`$PATH`，现在一切正常。

# json - 在 yii 中如何以所需格式发送 json

> ID：13971999
> 
> 赞同：0
> 
> 时间：2012-12-20T12:13:43.393
> 
> 标签：json, yii, output

我在 Yii 框架中工作。我有以下功能-

```
public function actionGetPublicPoll()
{
    $model=new poll();
    $polltype=Poll::model()->findAllByAttributes(array("pollTypeId"=>1));
    foreach ($polltype as $poll)
    {   
        if($poll->isActive==1 && $poll->isPublished==0)
        {
            echo "pollId is=".$poll->pollId;
            $Id=$poll->pollId;
            $option=Polloption::model()->findAllByAttributes(array("pollId"=>$poll->pollId));

            foreach ($option as $option1)
            {
                echo $option1->optionId."</br>";
                echo $option1->option;
                $optionList[]=$option1->option;
            }
        } 
    }
    echo CJSON::encode(array("PollId"=>$Id,"Question"=>$poll->pollQuestion,"options"=>$optionList));
} 
```

所以我正在发送`pollQuestion`及其`json`格式选项。从上面，我得到的输出为-

```
{"PollId":"3","Question":"Which is the biggest district in india ","options":["sachin tendulakar","Yuwraj singh","Rohit sharma","Mahendrasing dhoni"]} 
```

但我想要 json 格式：

```
{"PollId":"3","Question":"Which is the biggest district in india ","options":["option":"sachin tendulakar","option":"Yuwraj singh","option":"Rohit sharma","option":"Mahendrasing dhoni"]} 
```

那么我需要修改什么？请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:43:12.150

改变

`$optionList[]=$option1->option`;

到

`$optionList[]=array('option'=>$option1->option);`

...................................

```
foreach ($option as $option1)
{
                echo $option1->optionId."</br>";
                echo $option1->option;
                $optionList[]=array('option'=>$option1->option);
} 
```

……………………………………………………………………………………

你会`JSON`得到

```
{"PollId":"3","Question":"Which is the biggest district in india ",
"options":[{"option":"sachin tendulakar"},{"option":"Yuwraj singh"},{"option":"Rohit sharma"},{"option":"Mahendrasing dhoni"}]} 
```