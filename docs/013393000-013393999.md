# StackOverflow 问答 13393000-13393999

# php - php soap 服务器在 wsdl 模式下忽略标头

> ID：13393000
> 
> 赞同：2
> 
> 时间：2012-11-15T07:16:37.127
> 
> 标签：php, soap, https, wsdl

我在另一台服务器上有一个 SOAP 服务器 Web 服务和一个 SOAP 客户端来测试我的 Web 服务。

在 wsdl-mode 中，SOAP 服务器忽略 header 和 header 函数，从而忽略客户端身份验证细节。意味着客户端不进行身份验证。SOAP 服务器位于 https 域上。

SOAP 服务器和客户端在非 wsdl 模式下完美运行。

谁能告诉我我做错了什么？

这是我的 SOAP 客户端：

```
 $params = 'LHAFDS89';

    ini_set('soap.wsdl_cache_enabled',0);
    ini_set('soap.wsdl_cache',0);
    ini_set('soap.wsdl_cache_ttl',0);

    $client = new SoapClient('https://www.example.com/webservices/example.wsdl', array('trace'=>true));

    $authentication['key'] = "n/KLASDF9ASDF9832JDAFJ234=";

    $auth_key = $authentication['key'];
    $auth_mode = 't';

    $auth = new SOAPAuth($auth_key,$auth_mode);

    $header[] = new SoapHeader("urn:www.example.com",'authenticateClient',$auth,0);
    $client->__setSoapHeaders($header);

    try
    {
        $result = $client->soapFunction($params);
    }
    catch (SoapFault $e) 
    {
        echo "<script>alert('".$e->faultcode.'\n\n'.$e->faultstring."');</script>";
    }

    echo $result['message'];

class SOAPAuth 
{
    public $key;
    public $mode;

public function __construct($key, $mode) 
    {
      $this->key = $key;
      $this->mode = $mode;
    }
} 
```

SOAP 服务器：

```
class ExampleClass {

    protected $user_is_valid;
    protected $mode;

    public function __construct()
    {
        $this->user_is_valid = false;
        $this->mode = '';
    }

    public function authenticateClient($header){
        if (isset($header->key) && isset($header->mode)){
            $authentication['key'] = $header->key;
            $this->mode = $header->mode;
            if($authentication['key']== 'n/KLASDF9ASDF9832JDAFJ234=')
            {
                $this->user_is_valid = true;
            }
        }
    } 

    public function soapFunction($params)
    {
        if($this->user_is_valid == true){

                $result['message'] = "User is valid."
                return $result; 

        } else {
            throw new SoapFault("Authorization:", "Failed!"); 
        }
    }
}

ini_set('soap.wsdl_cache_enabled',0);
ini_set('soap.wsdl_cache',0);
ini_set('soap.wsdl_cache_ttl',0);

$example_class = new ExampleClass();
$server = new SoapServer("example.wsdl");

$server->setObject($example_class);
$server->handle(); 
```

WSDL：

```
<?xml version="1.0" encoding="utf-8"?>

<definitions name="Example"
   targetNamespace="urn:Example"
   xmlns:typens="urn:Example"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema"
   xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
   xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/"
   xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
   xmlns="http://schemas.xmlsoap.org/wsdl/">

   <message name='header'>
     <part name='key' type='xsd:string'/>
     <part name='mode' type='xsd:string'/>
   </message>

   <message name='soapFunction_request'>
     <part name='params' type='xsd:string'/>
   </message>       
   <message name='soapFunction_response'>
     <part name='result' type='xsd:string[]'/>
   </message>

   <portType name='soapFunctionPortType'>
     <operation name='soapFunction'>
       <input message='tns:soapFunction_request'/>
       <output message='tns:soapFunction_response'/>
     </operation>
    </portType>

    <binding name='soapFunctionBinding' type='tns:soapFunctionPortType'>
    <soap:binding style='rpc'
         transport='http://schemas.xmlsoap.org/soap/http'/>
     <operation name='soapFunction'>
     <soap:operation soapAction='urn:soapFunction'/>
     <input>
        <soap:header message="header" part="key"/>
        <soap:header message="header" part="mode"/>
        <soap:body use='encoded' namespace='urn:soapFunction'
            encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
     </input>
     <output>
        <soap:body use='encoded' namespace='urn:soapFunction'
            encodingStyle='http://schemas.xmlsoap.org/soap/encoding/'/>
     </output>
     </operation>
      </binding>

      <service name='soapFunctionService'>
     <port name='soapFunctionServicePort' binding='soapFunctionBinding'>
      <soap:address location='https://www.example.com/webservices/soapServer.php'/>
     </port>
      </service>
</definitions> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:07:09.223

我找到了解决我的问题的方法。这不完全是我的想法，但它确实有效。

我让 SOAP 客户端以 wsdl 模式连接到我的 SOAP 服务器，并让 SOAP 服务器以非 wsdl 模式响应。

由于某种原因，以这种方式工作时不会忽略标头，客户端会正确进行身份验证，并且会根据 wsdl 检查客户端的输入是否有效。

# php - PHP 线程脚本中止

> ID：13393008
> 
> 赞同：0
> 
> 时间：2012-11-15T07:17:37.607
> 
> 标签：php, multithreading, excel, thread-abort

我在我的服务器（一个线程）上每 1 小时运行一次 php 脚本。这个线程正在做的是，用户可以上传带有数据的excel文件，线程将excel文件中的数据与数据库中的数据进行比较并做一些事情（如果找到的行不存在，则在数据库中插入一些不相关的内容）。要读取 excel 文件，我调用：

```
$data = new Spreadsheet_Excel_Reader();
$data->read($file); 
```

用户可以上传更多 xls 文件，在名为：File_1.xls、File_2.xls、File_3.xls 的服务器上我读取第一个文件获取所有数据进行所有比较进行所有插入这可能需要一段时间有时超过 6000 excel中的行。我注意到，如果线程运行时间很长，例如他可以插入文件 1 和文件 2，并且文件是一个大的，比如 6000+ 行，我会在我的错误日志中得到一个 Abort。我认为这是excel读者的错。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:06:46.790

据我了解，您的服务器没有足够的内存 (RAM) 来保存多个文件指针和大数组数据。增加服务器的内存或尝试不同的算法从 XLS 读取数据以进行比较插入。

# c# - 连接丢失时如何将实体框架连接重新连接到数据库

> ID：13393009
> 
> 赞同：3
> 
> 时间：2012-11-15T07:17:39.547
> 
> 标签：c#, .net, sql, entity-framework, mvvm

我正在`MVVM`使用 Entity Framework 进行项目`5.0`。

我连接到托管数据库，有时实体框架会失去与数据库的连接。

当连接丢失时，重新连接到数据库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:23:54.040

在保存更改期间连接断开时，您只会得到异常。整个保存在由于异常而未提交的事务中完成，并且 EF 不会将其当前更改集标记为已完成。当发生特定异常时，您可以简单地尝试再次保存更改 - EF 将尝试打开新连接并执行相同的事务

* * *

例如：好吧，也许是这样的：

```
public virtual void SubmitChanges()
{
    if (DataContext != null)
    {               
        try
        {
             DataContext.SubmitChanges();
        }
        catch (Exception whenILostMyConnection)
        {
             SubmitChanges(); //recall the sumbitChanges
        }
    }             
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T10:32:38.597

您可以在 Windows Azure 源代码中看到答案。Azure CRUD 操作通常会将它们放入循环中，这些循环会多次尝试执行相同的操作，从而导致某些特定异常。但是您必须非常小心，在大多数情况下，重试处理会导致您的应用程序变慢。

# php - 基思伍兹倒数计时器 DATETIME 格式 Jquery

> ID：13393013
> 
> 赞同：0
> 
> 时间：2012-11-15T07:17:53.743
> 
> 标签：php, jquery, mysql, countdown

我已经玩这个太久了，我想我最好寻求一些帮助，因为我真的需要继续前进:) 我对 jquery 很陌生

我有显示 Keith Wood 的倒数计时器，但时间不对，未来日期是 3 天后，但我得到 217224 天。日期是 mysql DATETIME 即；2012-11-15 07:00:30

[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

我只需要显示天、小时、分钟、秒，但是，如果我删除 Y，m 什么都不会显示。这是我的代码，如果有任何帮助，我会非常高兴！

```
$(function () {
    var austDay = new Date(<?php
    $time = strtotime($row['auto_accept']);
    echo date('Y', $time);
    echo date('m', $time);
    echo date('d', $time-1);
    echo date('H', $time);
    echo date('i', $time);
    echo date('s', $time);?>);
    $('#countdown').countdown({until: austDay, format: 'dHMS'});
}); 
```

好的，我似乎可以使用：

```
$(function () {
var austDay = new Date(<?php
    $endtime = strtotime($row['auto_accept']);
    echo date('Y,m,', $endtime);
    echo (date('j', $endtime)-30);
    echo date(',h,i,s', $endtime);
?>);

$('#countdown').countdown({until: austDay, format: 'dHMS'});
}); 
```

正如Tomalak所说，我只需要更好地优化代码，我会查看手册;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:20:45.910

首先，阅读如何使用 PHP 的日期函数并弄清楚如何一次性获取日期。这将花费您不超过 10 或 15 分钟的时间，并且会快速向您展示为什么您不需要调用 date 这么多次（并在未来节省您的时间，并在下面向您展示我是如何做到的）。

其次，最好使用 Ajax 调用将值从 PHP 获取到 Javascript。下面的方法有效，但它很丑。

你的PHP：

```
$timeToConvert = strtotime($row['auto_accept'] . ' -1 day'); 
```

你的 JS：

```
var austDay = new Date(<?php echo $timeToConvert * 1000 ?>);
$('#countdown').countdown({until: austDay}); 
```

这应该是你所需要的（我没有测试这个来确定，但它看起来很简单，所以我希望这将适用于你正在使用的插件。）

# android - 如何根 Galaxy ace gt 5830 姜饼 2.3.6

> ID：13393017
> 
> 赞同：-4
> 
> 时间：2012-11-15T07:18:18.650
> 
> 标签：android, galaxy, samsung-mobile

我已经安装了 Clockwork-Mod Recovery (CWM) v5，并且我使用该 upd_1.zip 来 root 我的 Galaxy ace，但它没有，任何人都知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:30:42.683

做了一个快速的谷歌搜索，认为这可以帮助你： [http ://androidadvices.com/root-samsung-galaxy-ace-gt-s5830-gingerbread-firmware/](http://androidadvices.com/root-samsung-galaxy-ace-gt-s5830-gingerbread-firmware/)

我建议阅读全文，但如果您想跳到生根，只需跳到第 3 部分：[http](http://androidadvices.com/root-samsung-galaxy-ace-gt-s5830-gingerbread-firmware/3/) ://androidadvices.com/root-samsung-galaxy-ace-gt-s5830-gingerbread-firmware/3/ 。

许多 rom 在 rom 属性中设置了 root 权限，这也会使您的设备获得 root 权限，这意味着 rom 实际上会为您提供 root 权限。

# css - CSS让一个层越过另一个层

> ID：13393019
> 
> 赞同：0
> 
> 时间：2012-11-15T07:18:31.340
> 
> 标签：css, html

我在这里有这个网站[http://willruppelglass.com/Categories.php?action=view](http://willruppelglass.com/Categories.php?action=view)

如您所见，图像被切断

我需要 div`contentTextWill`过去`rightSideBar`这可能吗？

这是我的代码

```
<div class="contentWrapper">
<div class="leftSideBar">
<img class="img-side top" src="images/leftSideTop.jpg" width="169" height="90" border="0" />
<img class="img-side bottom" src="images/leftSideBottom.jpg" width="169" height="90" border="0" />
</div><!--leftSideBar-->

<div class="content" id="content">
<div class="topContent">

<div class="contentTextWill">
</div><!---This Div needs to go over... --->

<div class="bottomContent">
</div><!--bottomContent-->
</div><!--content-->

<div class="rightSideBar">
<img class="img-side top" src="images/rightSideTop.jpg" width="169" height="90" border="0" />
<img class="img-side bottom" src="images/rightSideBottom.jpg" width="169" height="90" border="0" />
</div><!--rightSideBar--> <!---Over this div --->

</div><!--contentWrapper--> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:32:33.720

在 DOM`.rightSideBar`上方移动：`.content`

```
<div class="contentWrapper">
<div class="leftSideBar">
<img class="img-side top" src="images/leftSideTop.jpg" width="169" height="90" border="0" />
<img class="img-side bottom" src="images/leftSideBottom.jpg" width="169" height="90" border="0" />
</div><!--leftSideBar-->

<div class="rightSideBar">
<img class="img-side top" src="images/rightSideTop.jpg" width="169" height="90" border="0" />
<img class="img-side bottom" src="images/rightSideBottom.jpg" width="169" height="90" border="0" />
</div><!--rightSideBar--> <!--- Over this div, not any more --->

<div class="content" id="content">
<div class="topContent">

<div class="contentTextWill">
</div><!---This Div needs to go over... --->

<div class="bottomContent">
</div><!--bottomContent-->
</div><!--content-->

</div><!--contentWrapper--> 
```

# c# - 在 System.Collections.Hashtable 中搜索一个词

> ID：13393027
> 
> 赞同：-1
> 
> 时间：2012-11-15T07:19:23.497
> 
> 标签：c#, .net

我在 .net 项目中有一个问题。我正在使用 System.Collections.Hashtable 来存储值并添加键值，例如

“在段落之间放回”

我想在该键值上搜索单词“between”。

现在我正在使用

```
//Declare hash table
System.Collections.Hashtable _Index;

//add values to hashtable
_Index.Add("putreturnsbetweenparagraphs",theword );

//search section
string searchWord="between";
            if (_Index.ContainsKey(searchWord))
            {    
               //code
            } 
```

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:22:51.030

首先，除非您*真的*在使用 .NET 1.1，否则您应该考虑使用 using`Dictionary<TKey, TValue>`而不是非通用`Hashtable`.

除此之外，直接的键/值映射不会对您有太大帮助。基本上，您要么需要以某种方式更改数据结构，要么遍历集合中的*所有键，并检查其中**是否*包含目标字符串。您实际上将映射视为一系列键/值对 - 散列给出的快速查找无关紧要，因为它仅在执行相等查找时才有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:26:23.523

```
string value = (string)_Index.Cast<System.Collections.DictionaryEntry>()
                             .First(x => (x.Key as string).Contains(searchWord))
                             .Value; 
```

# javascript - 只允许字符或空格的正则表达式

> ID：13393032
> 
> 赞同：5
> 
> 时间：2012-11-15T07:19:34.887
> 
> 标签：javascript, jquery, regex

我需要正则表达式方面的帮助。我需要一个 jquery 中的表达式，它只允许两个单词之间的字符或空格。不允许双倍空格

我正在使用这个

```
/^[a-zA-Z]+(-_ [a-zA-Z]+)*/ 
```

但它不起作用。

**示例** 空间你好 - 不允许

你好空间 - 不允许

你好空间空间你好 - 不允许

空间你好空间 - 不允许

hello1234 - 不允许

你好空间 1234 - 不允许

* * *

你好世界允许

你好允许

你好，你是怎么被允许的

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T07:26:14.833

你可以用这个

```
/^([a-zA-Z]+\s)*[a-zA-Z]+$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:29:47.853

我看到你已经有一个接受的答案，但这里有另一个更简洁的选择：

```
/^\w+( \w+)*$/ 
```

以一个单词开头，然后是任意数量的单词，前面有一个空格。

请注意，这也接受单词中的数字。我不知道这是否是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-04T18:43:13.220

好吧，这个正则表达式对我有用 ([A-Za-z] *( )* [A-Za-z]+)

# .net - 坚持为 Solid Edge 编写此控制台应用程序

> ID：13393038
> 
> 赞同：1
> 
> 时间：2012-11-15T07:20:05.560
> 
> 标签：.net, vb.net, cad

我正在尝试为 3D CAD 程序 Solid Edge 制作一个 Visual Basic 控制台应用程序，在这个控制台应用程序中，我希望 Visual Basic 在其中制作曲线。我想用 4 次方程制作这些曲线。用于方程的数据存储在一个空格分隔的文本文件中。在文本文件中有几行不同的数据，每一行用于制作 4 次方程。现在，我尝试制作程序，但它在制作曲线时卡住了，控制台只是保持黑色并且不会关闭。该程序确实与该程序建立了连接并打开了一个 3D 建模环境。

有谁知道我在我的代码中做错了什么，或者我应该做什么？我正在使用visual basic 2003标准。我不是程序员，但我尝试用它来自动化 3D CAD 程序中的东西。

这是我的代码：

```
Imports System.IO
Imports System.Runtime.InteropServices
Module Module1
    Sub Main()

        Dim strFileName As String = "U:\pompen.prn"
        Dim objFS As New FileStream(strFileName, FileMode.Open, FileAccess.Read)
        Dim objSR As New StreamReader(objFS)

        Dim objApp As SolidEdgeFramework.Application = Nothing
        Dim objDocuments As SolidEdgeFramework.Documents = Nothing
        Dim objPart As SolidEdgePart.PartDocument = Nothing
        Dim objProfileSets As SolidEdgePart.ProfileSets = Nothing
        Dim objProfileSet As SolidEdgePart.ProfileSet = Nothing
        Dim objProfiles As SolidEdgePart.Profiles = Nothing
        Dim objProfile As SolidEdgePart.Profile = Nothing
        Dim objRefplanes As SolidEdgePart.RefPlanes = Nothing
        Dim objdraft2d As SolidEdgeDraft.CoordinateSystem2d = Nothing
        Dim objBSpline As SolidEdgeFrameworkSupport.BSplineCurve2d = Nothing
        Dim objBSplines As SolidEdgeFrameworkSupport.BSplineCurves2d = Nothing
        Dim objLines2d As SolidEdgeFrameworkSupport.Lines2d = Nothing
        Dim objLine2d As SolidEdgeFrameworkSupport.Line2d = Nothing
        Dim objsketch As SolidEdgePart.Sketch = Nothing

        Dim strEmpRecord As String
        Dim type As String
        Dim N1 As Double
        Dim QT As Double
        Dim DW1 As Decimal
        Dim EQ As Decimal
        Dim EH As Decimal
        Dim DWL As Decimal
        Dim DHL As Decimal
        Dim C1 As Decimal
        Dim C2 As Decimal
        Dim C3 As Decimal
        Dim C4 As Decimal
        Dim C5 As Decimal
        Dim QFACTOR As Decimal

        Do While objSR.Peek <> -1
            ' read the current record (line) into the variable strEmpRecord
            strEmpRecord = objSR.ReadLine
            Try
                ' break up the record into separate variables
                type = strEmpRecord.Substring(0, 20)
                N1 = CDbl(strEmpRecord.Substring(20, 10))
                QT = CDbl(strEmpRecord.Substring(30, 10))
                DW1 = CDec(strEmpRecord.Substring(40, 10))
                EQ = CDec(strEmpRecord.Substring(50, 10))
                EH = CDec(strEmpRecord.Substring(60, 10))
                DHL = CDec(strEmpRecord.Substring(70, 10))
                DWL = CDec(strEmpRecord.Substring(80, 10))
                C1 = CDec(strEmpRecord.Substring(90, 20))
                C2 = CDec(strEmpRecord.Substring(110, 20))
                C3 = CDec(strEmpRecord.Substring(130, 20))
                C4 = CDec(strEmpRecord.Substring(150, 20))
                C5 = CDec(strEmpRecord.Substring(170, 20))
                QFACTOR = CDec(strEmpRecord.Substring(190, 10))
            Catch ex As System.InvalidCastException
            End Try

            'connect to a Solid Edge file.
            ' Connect to a running instance of Solid Edge 
            objApp = Marshal.GetActiveObject("SolidEdge.Application")
            ' Get a reference to the documents collection 
            objDocuments = objApp.Documents
            ' Create a new part document 
            objPart = objDocuments.Add("SolidEdge.PartDocument")
            ' Get a reference to the profile sets collection 
            objProfileSets = objPart.ProfileSets
            ' Add a new profile set 
            objProfileSet = objProfileSets.Add()
            ' Get a reference to the profiles collection 
            objProfiles = objProfileSet.Profiles
            ' Get a reference to the ref planes collection 
            objRefplanes = objPart.RefPlanes
            'open a new sketch
            objsketch = objPart.Sketches.Add
            ' Add a new profile 
            objProfile = objProfiles.Add(objRefplanes.Item(3))
            'Gat a reference to spline curve collection
            objBSplines = objProfile.BSplineCurves2d
            ' Get a reference to the lines2d collection 
            objLines2d = objProfile.Lines2d

            Try
                'Draw the curves with 4th degree equation, DMax
                Dim q As Decimal = (QT * 0.2)
                Dim h As Decimal = (((q ^ 4) * C1) + ((q ^ 3) * C2) + ((q ^ 2) * C3) + (q * C4) + C5)
                Do
                    q = (q + 0.5)
                Loop Until q <= (QT * QFACTOR)
                objBSpline = objBSplines.objsr.AddByPoints(q, h)

                'Draw the curves with 4th degree equation, DMin
                Dim qx As Decimal = ((DWL / DW1) ^ EQ)
                Dim hx As Decimal = ((DWL / DW1) ^ EH)
                Dim qa As Decimal = (qx * q)
                Dim ha As Decimal = (hx * (((q ^ 4) * C1) + ((q ^ 3) * C2) + ((q ^ 2) * C3) + (q * C4) + C5))
                Do
                    qa = (qa + 0.5)
                Loop Until qa = (qx * (QT * QFACTOR))
                objBSpline = objBSplines.objsr.addbypoints(qa, ha)

                'make connection lines
                objLine2d = objLines2d.AddBy2Points((qx * (QT * QFACTOR)), (QFACTOR * (hx * (((q ^ 4) * C1) + ((q ^ 3) * C2) + ((q ^ 2) * C3) + (q * C4) + C5))), (QT * QFACTOR), (QFACTOR * (((q ^ 4) * C1) + ((q ^ 3) * C2) + ((q ^ 2) * C3) + (q * C4) + C5)))

                ' Close the profile 
                objProfile.End( _
                    SolidEdgePart.ProfileValidationType.igProfileClosed)

            Catch ex As Exception

            Finally
                If Not (objLine2d Is Nothing) Then
                    Marshal.ReleaseComObject(objLine2d)
                    objLine2d = Nothing
                End If
                If Not (objLines2d Is Nothing) Then
                    Marshal.ReleaseComObject(objLines2d)
                    objLines2d = Nothing
                End If
                If Not (objBSpline Is Nothing) Then
                    Marshal.ReleaseComObject(objBSpline)
                    objBSpline = Nothing
                End If
                If Not (objRefplanes Is Nothing) Then
                    Marshal.ReleaseComObject(objRefplanes)
                    objRefplanes = Nothing
                End If
                If Not (objProfile Is Nothing) Then
                    Marshal.ReleaseComObject(objProfile)
                    objProfile = Nothing
                End If
                If Not (objProfiles Is Nothing) Then
                    Marshal.ReleaseComObject(objProfiles)
                    objProfiles = Nothing
                End If
                If Not (objProfileSet Is Nothing) Then
                    Marshal.ReleaseComObject(objProfileSet)
                    objProfileSet = Nothing
                End If
                If Not (objProfileSets Is Nothing) Then
                    Marshal.ReleaseComObject(objProfileSets)
                    objProfileSets = Nothing
                End If
                If Not (objPart Is Nothing) Then
                    Marshal.ReleaseComObject(objPart)
                    objPart = Nothing
                End If
                If Not (objDocuments Is Nothing) Then
                    Marshal.ReleaseComObject(objDocuments)
                    objDocuments = Nothing
                End If
                If Not (objsketch Is Nothing) Then
                    Marshal.ReleaseComObject(objsketch)
                    objsketch = Nothing
                End If
                If Not (objApp Is Nothing) Then
                    Marshal.ReleaseComObject(objApp)
                    objApp = Nothing
                End If
            End Try
        Loop

        objSR.Close()
        Console.WriteLine("")
        Console.WriteLine("Press Enter to close this window.")
        Console.ReadLine()

    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:42:50.210

我猜你应该把这段代码移到你的循环之外，即。之前`Do While objSR.Peek <> -1`。在循环中，它将为文件中的每一行执行所有这些操作。我认为您只想做一次这些事情。

```
 'connect to a Solid Edge file.
        ' Connect to a running instance of Solid Edge 
        objApp = Marshal.GetActiveObject("SolidEdge.Application")
        ' Get a reference to the documents collection 
        objDocuments = objApp.Documents
        ' Create a new part document 
        objPart = objDocuments.Add("SolidEdge.PartDocument")
        ' Get a reference to the profile sets collection 
        objProfileSets = objPart.ProfileSets
        ' Add a new profile set 
        objProfileSet = objProfileSets.Add()
        ' Get a reference to the profiles collection 
        objProfiles = objProfileSet.Profiles
        ' Get a reference to the ref planes collection 
        objRefplanes = objPart.RefPlanes
        'open a new sketch
        objsketch = objPart.Sketches.Add
        ' Add a new profile 
        objProfile = objProfiles.Add(objRefplanes.Item(3))
        'Gat a reference to spline curve collection
        objBSplines = objProfile.BSplineCurves2d
        ' Get a reference to the lines2d collection 
        objLines2d = objProfile.Lines2d 
```

然后你可能不得不把它移到你的循环之后，

```
 ' Close the profile 
            objProfile.End( _
                SolidEdgePart.ProfileValidationType.igProfileClosed) 
```

只是提示，您应该删除此行

```
 Catch ex As Exception 
```

如果你有一个空`catch`块，你只会对自己隐藏任何错误。

# java - 哪个是创建工厂类的更好方法

> ID：13393047
> 
> 赞同：0
> 
> 时间：2012-11-15T07:20:26.283
> 
> 标签：java, design-patterns

我已经创建了工厂类，我想知道哪个是更好的实现方式。选项1

```
public class Factory {

    private IProperty prop;
    public IDoc doc;

    public Factory(int version) {
        switch (version) {
            case '1':   
                prop = new Prop();
                doc = new Docu();
        ...
            case '2':
            prop = new Prop1();
            doc = new Docu1();
        ...
        }
    }

    public IProperty getProperty() {
        return this.prop;
    }

    public IDoc getDoc() {
        return this.doc;
    }
} 
```

我的问题是是否要这样做，即使用接口类型定义成员并打开构造函数，或者每个 get 方法都在构造函数上使用 switch 语句，所以在构造函数中我只会获取版本并保存它在类成员上，而不是例如使用 like

```
public IProperty getProperty() {
switch (version) {
  case '1':
    prop = new Prop();
  case '2':
    prop = new Prop1();
... 
```

那么更好的方法是什么，或任何其他想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T07:45:33.377

最干净的方法是将您所做的事情公开为两个独立的工厂，如果它们有任何可共享的内容，则为它们提供一个共同的抽象基础或可重用的策略参数。一种工厂类型应该只创建一种类型的特定对象（比如只有塑料工具）。工厂公共配置通常只包含创建对象所需的属性（供应商的联系人、专利）或正在创建的对象的静态属性（比如说塑料的类型），而不是对象的类型/类别。

此外，在您的示例#1 中存储长寿命对象的东西可能应该称为“上下文”，而不是“工厂”。

下面的代码示例。

```
public interface IFactory {
  IDoc createDoc();
  IProp createProp();
}

public class Type1Factory implements IFactory {
  @Override public IDoc createDoc() { return new Doc1(); }
  @Override public IProp createProp() { return new Prop1(); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:25:52.270

您的第二种方式总是更好，因为您的`get*`方法的每个调用者都会收到一个新的对象实例。如果您在构造函数中创建这两个对象，您将不得不处理对象共享问题（如果您在不同的线程中使用这些对象，则更是如此）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:26:07.890

在您的第一个版本中创建工厂的想法比第二个版本好得多。

理想情况下，它不应该是工厂类的构造函数，而是静态方法。

```
public class Factory 
{
    public static IProperty getPropertyObject(char version)
    {
        switch (version)
        {
            case '1':
               return new Prop();

            case '2'
               return new Prop1();
        }
    }

    public static IDoc getDocObject(char version)
    {
        switch (version)
        {
            case '1':
               return new Doc();

            case '2'
               return new Doc1();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T07:33:05.333

这取决于你的情况。

第一个选项表明您的`IProperty`和`IDoc`有不同的版本，但对于一个版本的每个版本，您都有另一个对应的版本。

而第二种选择表明这些版本可以相互独立。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T07:36:30.687

*   首先，理想情况下，您`Factory`应该拥有`static references` 而不是`non-static`一个。它应该有一个`static method`创建*/获取* 适当的实例。

*   其次，最好有*两个不同类型的工厂*。

*   第三，我将您的方法命名为`createProperty`，而不是 `getPropertyObject`，因为该方法没有返回已经创建的实例，而是它正在创建的实例。

当然，`getPropertyObject('1')`, 似乎它正在`property`从持久性存储中获取该版本的 a ，这不是它正在做的事情。它是基于版本创建一个实例。

（**注意： -**的名称`static factory methods`很重要。它们是优势之一，它们超过了`constructors`。因为有了`name`，你可以猜出它到底是`factory method`做什么的）

话虽如此，我会说，`2nd option`所有这些变化都会更好。让`createProperty`方法决定，它想如何创建`instance`.

所以，我会像这样修改你的代码： -

```
public class PropertyFactory {
    private static IProperty prop;

    public static createProperty(char version) {

        switch (version) {
            case '1':
                prop = new Prop();
                break;  // Don't forget a `break` here.
            case '2':
               prop = new Prop1();
               break;

            default:  // do have a default case
               prop = null;
        } 
        return prop;
    }
} 
```

同样，您可以创建一个`DocumentFactory`来创建一个`document object`. 命名方法： -`createDocument(char version)`

# silverlight-4.0 - 数据未绑定到 silverlight 中的 RadBarChart

> ID：13393049
> 
> 赞同：2
> 
> 时间：2012-11-15T07:20:41.397
> 
> 标签：silverlight-4.0, telerik, rad-controls, radchart

我正在silverlight 中创建RadBarChart。

如果我在同一个类中硬编码`Yvalue`和`XCategory`值，则图表显示正确的数据。

下面是我`Initializecomponent()`在 Sample.cs 类中的方法之后调用的方法。

```
public void FillSampleChartData()
    {
        DataSeries dataSeries = new DataSeries();
        dataSeries.Definition = new BarSeriesDefinition();

        dataSeries.Add(new DataPoint() { YValue = 1127.13, XCategory = "Victor" });
        dataSeries.Add(new DataPoint() { YValue = 1123.80, XCategory = "Kishore" });
        dataSeries.Add(new DataPoint() { YValue = 9948.94, XCategory = "Vincent" });

        RadChartSales.DefaultView.ChartArea.DataSeries.Add(dataSeries);
   } 
```

我怀疑我是否从其他类调用相同的方法...条形图未显示任何数据。让我知道为什么图表不显示数据。

```
//This is my original method

public void FillSampleChartData(IList collection)
 {                              
        int listcount = collection.Count;
        int count = -1;

        double[] myArray1 = new double[listcount];
        string[] myArray2 = new string[listcount];

        foreach (BizFramework.Web.Model.SalesBySalesPersonSummary_Result dtvws in collection)
        {
            count++;
            myArray1[count] = Convert.ToDouble(dtvws.Amount);
            myArray2[count] = dtvws.Salesperson;

        }
        DataSeries dataSeries = new DataSeries();
        dataSeries.Definition = new BarSeriesDefinition();

    if (myArray1.Count() > 0)
        {
            for (int i = 0; i < myArray1.Count(); i++)
            {

             dataSeries.Add(new DataPoint() { YValue = myArray1[i], XCategory = myArray2[i] });
            }

            RadChartSales.DefaultView.ChartArea.DataSeries.Add(dataSeries);
        }
    } 
```

# in-app-purchase - 如何获取已发布应用程序的产品列表供用户购买（InAppPurchase - android）

> ID：13393051
> 
> 赞同：1
> 
> 时间：2012-11-15T07:21:05.807
> 
> 标签：in-app-purchase

我想在我的应用程序中从 google play 获取已发布应用程序的产品列表，以便用户可以在 google play 上获取更新的产品列表并可以购买。

我正在开发一个应用程序，在该应用程序中我必须实现 google play 提供的 IAP-InAppPurchase 服务。我编译了一个示例代码，它工作正常。现在我想知道如何在我的谷歌播放应用程序下获取产品列表（为申请人中的用户购买产品列表）。当用户去购买时，他们应该在应用程序中查看更新的产品列表，就像在此应用程序下的 google play 上的产品列表一样。

每次用户购买任何产品时，是否可以从应用程序中的 google play 获取更新的产品列表？

如果可能的话，提供那段代码。

请帮助我或提出任何选择。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-04T05:47:51.653

我认为不可能获得发布应用程序的产品列表。但您可以获得该产品列表的更新价格或详细信息。为此，您需要将产品 ID 存储在本地，然后您可以使用查询库存获取更新的产品详细信息。

# asp.net - IIS 7 网址缩短器

> ID：13393053
> 
> 赞同：1
> 
> 时间：2012-11-15T07:21:11.480
> 
> 标签：asp.net, iis-7

在我们开始之前，我知道 URL 重写和重定向，但这并不是我真正想要的。

是否有适用于 IIS7 的应用程序或扩展程序允许缩短 URL，例如[This one here](http://is.gd/)？

我在[这里](http://www.404techsupport.com/2010/06/host-your-own-url-shortener-with-shorty-yourls-or-others/)看到了一个 PHP 版本，但我认为这不是一个容易可靠的解决方案。

任何帮助或建议将不胜感激。

PS：我在创建自己的之前问这个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:04:24.963

检查这些：

*   [Shrinkr](http://shrinkr.codeplex.com/) - 一个 URL 缩短服务，它展示了开发现实 Web 应用程序的一些最佳实践
*   [Jobping Url Shortener](http://jpurlshortener.codeplex.com/) - 功能齐全的“基本”网址缩短网站

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:24:49.690

[在sourceforge.net](http://shorturl-dotnet.sourceforge.net/)上查看这个，它不完全一样，但它会为你工作......

# javascript - windows 8 拆分应用自定义

> ID：13393056
> 
> 赞同：1
> 
> 时间：2012-11-15T07:21:37.700
> 
> 标签：javascript, html

正如我们所知，Windows 8 拆分应用程序显示图块，所以我想显示图像，并且在每个图块上，每个图像都应该不同。

这是我在标签所在的 default.html 页面上所做的

```
<div class="item">
<img alt="some text" data-win-bind="source: imagePath">
<div class="item-overlay">
                <h4 class="item-title" data-win-bind="textContent: title"></h4>
                <h6 class="item-subtitle win-type-ellipsis" data-win-bind="textContent: subtitle"></h6>
            </div>
        </div>
    </div> 
```

这是data.js文件的代码

```
var sampleGroups = [
            { key: "group1", title: "Group Title: 1", subtitle: "Group Subtitle: 1", **imagePath:"path of image file 1",** backgroundImage: darkGray, description: groupDescription },
            { key: "group2", title: "Group Title: 2", subtitle: "Group Subtitle: 2", **imagePath:"path of image file 2",** backgroundImage: lightGray, description: groupDescription },
            { key: "group3", title: "Group Title: 3", subtitle: "Group Subtitle: 3",**imagePath:"path of image file 3",** backgroundImage: mediumGray, description: groupDescription },
            { key: "group4", title: "Group Title: 4", subtitle: "Group Subtitle: 4",imagePath:"path of image file 4", backgroundImage: lightGray, description: groupDescription },
            { key: "group5", title: "Group Title: 5", subtitle: "Group Subtitle: 5", imagePath:"path of image file 5", backgroundImage: mediumGray, description: groupDescription },
            { key: "group6", title: "Group Title: 6", subtitle: "Group Subtitle: 6", **imagePath:"path of image file 6",** backgroundImage: darkGray, description: groupDescription }
        ]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T18:11:31.740

这是解决方案（感谢 Usman ur Rehman 先生）

打开 data.js 并根据下面给出的代码更改代码

> 函数 generateSampleData() { var itemContent = "
> 
> Curabitur 类 aliquam vestibulum nam curae maecenas sed...";

```
 // These three strings encode placeholder images. You will want to set the
    // backgroundImage property in your real data to be URLs to images.
    var darkGray =  "images/1.png";
    var lightGray = "images/1.png";
    var mediumGray = "images/1.png";

    // Each of these sample groups must have a unique key to be displayed
    // separately.
    var sampleGroups = [
        { key: "group1", title: "Group Title: 1", subtitle: "Group Subtitle: 1", backgroundImage: darkGray, description: groupDescription },
        { key: "group2", title: "Group Title: 2", subtitle: "Group Subtitle: 2", backgroundImage: lightGray, description: groupDescription },
        { key: "group3", title: "Group Title: 3", subtitle: "Group Subtitle: 3", backgroundImage: mediumGray, description: groupDescription }, ..... 
```

# android - 如何在 android 中实现垂直的、中心锁定的列表视图？

> ID：13393070
> 
> 赞同：2
> 
> 时间：2012-11-15T07:22:51.283
> 
> 标签：android, listview, user-interface, custom-controls

我正在尝试完成以下操作（在我的 Android 应用程序上）：

1.  我想要有视图的垂直列表（每个都将主要包含文本视图）。
2.  我希望该列表居中锁定，这意味着将始终有一个选定的项目位于我列表的中心。
3.  我希望选定的项目将被标记（基本上，我希望在列表的中心有一个标记，它将选择它下面的每个项目。

简而言之，我想实现类似的效果，例如画廊小部件，但是是垂直的并且带有不是图像的项目。

更新：这是一张图片： ![列表草图](../Images/7a8b2ccff002e00c7ab678d500e6abd4.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T07:39:49.123

我不知道如何通过listview实现，但我发现有人写了一个像你说的那样的控件；如下图；

每个项目都是一个视图，您可以设置一个列表和高度，它可能是您想要的。源代码：[http ://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)

![在此处输入图像描述](../Images/03836bea56f1b35cbf83a5cb82343c54.png)

# c# - 移动的故事板菜单留下了无法访问的区域

> ID：13393075
> 
> 赞同：0
> 
> 时间：2012-11-15T07:23:23.700
> 
> 标签：c#, wpf, xaml

快把我逼疯了。我在 XAML 中有一个居中的菜单，我将其缩小并移动到一侧以使用整个屏幕区域。这一切都有效，但菜单所在的区域，即中心现在无法访问，它不会响应点击等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:36:56.150

检查 XAML 并确保您的菜单上没有放置透明控件。

# php - 如何在while循环中根据计数为div提供背景颜色，差异为3

> ID：13393076
> 
> 赞同：0
> 
> 时间：2012-11-15T07:23:27.453
> 
> 标签：php, javascript, jquery, css

我在 while 循环中有一个带有几个框的 div。我想给两个可选的 div 背景颜色。对于前 3 个盒子，我必须给出第一种颜色。然后对于接下来的 3 个盒子，我要给出下一种颜色，然后再对于接下来的 3 个盒子，我要给出第一种颜色，依此类推。

显然，我想从第一个开始交替地为 3 个盒子交替提供两种颜色。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:28:42.747

```
 var count=0;
 $("div").each(function (i) {
         count++;
        if (count%3) {
          this.style.color = "blue";
        } else {
          this.style.color = "black";
        }
      }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:41:16.850

```
var count=0;
if(count%2==0) {
 echo"<div style="background:white;">";
}
else {
echo"<div style="background:pink;">";
}
echo"</div>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:58:25.137

期望的结果是：

```
<div class="white">...
<div class="white">...
<div class="white">...
<div class="blue">...
<div class="blue">...
<div class="blue">...
<div class="white">... 
```

这意味着您的代码应该是：

```
for ($count = 0 ; $count < 20; $count++) {
    $color = ($count / 3) % 2 ? "blue" : "white";
    echo "<div class='$color'>", "SOMETHING", "</div>";
} 
```

您所做的就是将“除以 3”分组，然后确定该组是偶数还是奇数。

`style="background-color:$color"`注意：您可以根据需要和 CSS 信息轻松使用 a 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T07:58:53.420

我不认为他喜欢这是 JS，因为他的标签是 PHP

这是你想要的;

```
<div>
<?php
   $numberofResults = '5';   
   for ($i=1; $i<=$numberofResults; $i++){
         if($i % 2 == 0) $style='style="background-color:black"';
         else $style='style="background-color:white"';

         echo '<box'.$i.' ' . $style . '>';
         echo '</box'.$i.'>';
         echo "\n";
   }
?>
</div> 
```

这将产生；

```
<div>
    <box1 style="background-color:white"></box1>
    <box2 style="background-color:black"></box2>
    <box3 style="background-color:white"></box3>
    <box4 style="background-color:black"></box4>
    <box5 style="background-color:white"></box5>
</div> 
```

# android - 使安卓应用程序可下载

> ID：13393079
> 
> 赞同：0
> 
> 时间：2012-11-15T07:23:51.727
> 
> 标签：android, download, installation

总而言之，有没有办法通过网页链接直接安装 android 应用程序。

例如，我有一个名为 www.mypage.com 的网页，其中包含一些链接，每个链接都指向一个名为“Myapp.apk”的应用程序。我希望用户只需单击此链接即可下载并直接安装它。

我已经在网上看到过，有人建议我使用一些 FileManager，但这对我来说不是最好的解决方案。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:39:05.260

不，没有办法做到这一点。这是为了安全 - 否则你会让每个网站都在人们身上秘密安装应用程序。您可以下载 apk，然后使用文件管理器进行安装，但您无法通过浏览器一次性下载和安装。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T07:45:57.517

不，你不能这样做。如果有可能，那么 GOOGLE PLAY 有什么用。您可以做的是将其转发到您在 Google Play 上的应用页面。

# git - Django 压缩器、git 和生产

> ID：13393087
> 
> 赞同：2
> 
> 时间：2012-11-15T07:24:32.697
> 
> 标签：git, django-compressor

我使用 amazon s3 存储静态文件，使用 django-compressor 压缩 js 和 css 文件`COMPRESS_OFFLINE = True`。

要部署到我的生产服务器，我首先运行`python manage.py compress`，它将压缩文件上传到 Amazon s3，然后执行 git push 到我的存储库。在生产服务器上，我从这个 repo 中提取，我总是遇到生成的 css 和 js 文件之间的同步问题。

我搜索了可能性并注意到压缩器实际上查看了压缩文件的修改时间。当我检查我的应用程序的静态文件夹（不是 S3 文件）中的静态文件之间的修改日期时，我注意到它们是不同的，我相信原因是 git 更改了已更改文件的修改日期。

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T19:37:58.907

检查您的服务器 Git 存储库（您要拉到的）是否没有

*   任何`.gitattributes` [内容过滤器驱动程序](http://git-scm.com/book/ch7-2.html#Keyword-Expansion)（会自动修改这些文件的内容），
*   任何本地或全局设置，例如`core.autocrlf`，会修改 eol（行尾）样式。

# asp.net-mvc - 没有 html 值的 Razor 属性

> ID：13393090
> 
> 赞同：4
> 
> 时间：2012-11-15T07:24:45.570
> 
> 标签：asp.net-mvc, razor

我的文本框现在看起来像这样，

```
 @Html.TextBox("Something", "", new
       {                           
          type = "text",
          min = 1,
          max = 60,
          data_validation_integer_regex = @ValidationPatterns.Integer,
          data_validation_integer_message = @ValidationPatterns.IntegerMessage,
          data_bind = "value: observables.Something"
        }) 
```

呈现为

```
 <input data-bind="value: observables.Something" 
          data-validation-integer-message="Some message" 
          data-validation-integer-regex="^[1-9]\d*$" 
          id="Something" 
          max="60" 
          min="1" 
          name="Something" 
          type="text" 
          value=""> 
```

我们使用的验证库[jqBootstrapValidation](https://github.com/ReactiveRaven/jqBootstrapValidation)

我想让我的一些字段成为必需的，以及使用这个库的方法，我需要像这样向输入字段添加一个标签

`<input id="Something" ... required >`

Razor 不允许我这样做，因为它似乎需要这种格式的所有参数

`property="something"`或者`property=100`

如果我想让我的字段成为必填项，我唯一的选择是恢复标准 html 标记吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T07:31:01.290

如果您使用带有空字符串 ( `required=""`) 的属性，则 Razor 会将其呈现为无值属性。那是，

```
@Html.TextBox("name", "value", new { attr="something", required="" }) 
```

呈现为：

```
<input type='text' name='name' id='id' value='value' attr='something' required /> 
```

# django - 过滤不带 list_filter 的查询集

> ID：13393093
> 
> 赞同：0
> 
> 时间：2012-11-15T07:25:03.247
> 
> 标签：django, django-models, django-admin

我的模型看起来像：

```
class address_fetcher(models.Model):
    county__info = models.ForeignKey(County_Info)
    billable_api_count = models.IntegerField(verbose_name = 'Billable API', null = True, blank = True)
    is_dryrun = models.BooleanField(verbose_name = 'Dry Run')
......
......

class County_Info(models.Model):
    county = models.ForeignKey(County)
    start = models.IntegerField()
    .....
    .....

class County(models.Model):

    name = models.CharField(max_length = 255, blank = True)
    key  = models.CharField(max_length = 5, blank = True)

    .....
    .....
    ..... 
```

我必须按县名过滤“address_fetcher”模型（在“县”模型中）但“县”表有 20489 重新编码。所以我不能使用list_filter。因为它将在文件管理器中加载大数据。它还减慢了页面加载速度。

我的问题很简单，

我如何在不使用 list_filter 的情况下过滤它？如果我在没有 list_filter '...?county_info__county__name=nameofcounty' 的情况下附加 url，则抛出异常。但是我添加了 list_filter 然后它不会抛出异常。

所以有人可以帮助我解决这个问题吗？

我添加了 CHINE 视图页面的屏幕打印![我添加了 CHINE 视图页面的屏幕打印](../Images/86bf83ddf94a24a3cc65053ab0d96049.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:34:53.657

尝试：

```
Address_Fetcher.objects.filter(county_info__county__name = "yourcountyname") 
```

# c# - LINQ - 选择列以“ABCD”开头的行数

> ID：13393094
> 
> 赞同：0
> 
> 时间：2012-11-15T07:25:09.213
> 
> 标签：c#, linq

我有一个表“订单”，其中有一列“订单号”。如何选择 OrderNumber 的前四个字符等于某个字符序列的行数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:26:04.087

> 如何选择行数

使用[Enumerable.Count 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.count.aspx)

> OrderNumber 的前四个字符在哪里等于某个字符序列？

使用[String.StartsWith 方法（字符串）](http://msdn.microsoft.com/en-us/library/baketfxw.aspx)

```
var resultCount = yourContext.Orders.Count(r=> r.OrderNumber.StartsWith("ABCD")); 
```

# android - Twitter重定向oauth权限拒绝错误

> ID：13393095
> 
> 赞同：0
> 
> 时间：2012-11-15T07:25:13.447
> 
> 标签：android, android-twitter

当 Twitter 开始从浏览器重定向回我的应用程序时，浏览器将关闭并产生以下错误：

```
E/AndroidRuntime(11074): java.lang.SecurityException: Permission Denial: starting Intent { act=android.intent.action.VIEW cat=[android.intent.category.BROWSABLE] dat=twitter-oauth-law://callback?oauth_token=lCW9243XEnyB4wmxw7Mf6iiDn3jBaWUeUaZuv416g&oauth_verifier=V55nJV1Cxk0nZIlsV3n9JfJHZoD575S7gbd23H0L48 cmp=com.barrioofcodes.sad/.Accounts (has extras) } from ProcessRecord{40eeed80 11074:com.android.browser/u0a10026} (pid=11074, uid=10026) not exported from uid 10047 
```

这是我清单上的活动：

```
<activity
            android:name=".Accounts"
            android:theme="@android:style/Theme.NoTitleBar"
            android:exported="false"
            android:label="@string/title_activity_main">
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="twitter-oauth-law" android:host="callback" />
            </intent-filter>
        </activity> 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T14:40:48.473

从改变

```
android:exported="false" 
```

至

```
android:exported="true" 
```

一旦浏览器成为外部应用程序，它就无权访问您的活动。

# iphone - 在 Xib 中设计一个 UIView

> ID：13393096
> 
> 赞同：0
> 
> 时间：2012-11-15T07:25:38.983
> 
> 标签：iphone, ios, cocoa-touch, uiview, xib

抱歉，图片看起来太大了。我的问题很简单。请看下面的图片

![在此处输入图像描述](../Images/272767284bce1456cb629bec81bef1a8.png)

如果我改变相机方向，它会是这样的......

![在此处输入图像描述](../Images/572ad57339222cb285d198094cf06698.png)

因此，如果我在按钮下方有任何控件，它将被隐藏，所以我想我需要在此处为​​横向滚动视图并将其隐藏为纵向，如果是这种情况，我是否需要为我的所有视图添加滚动视图应用。

感谢您的帮助

# javascript - d3.js 在时间序列尺度上绘制图表

> ID：13393097
> 
> 赞同：1
> 
> 时间：2012-11-15T07:25:49.993
> 
> 标签：javascript, d3.js

我的数据格式为 d [ Object, Object,.... ]，其中每个对象的格式为 {count:5 time:1352961975 }，其中 time 是 Unix Timestamp。我想根据时间和计数值来绘制它。计数值绘制在 y 轴上，时间将绘制在 x 轴上，分别为 12:30 AM、1 AM、1:30 AM ...。到当前时间。
像这样

```
 var midnight_time = new Date();
  midnight_time.setHours(0,0,0,0);

  x = d3.time.scale()
  .range([0,width])
  .domain([ new Date(midnight_time),new Date()]);

  y = d3.scale.linear()
  .domain([0,ymax]) //by using ajax not shown here getting the value of ymax                     
  .range([height, 0]);

 line = d3.svg.line()
.x(function(d) { return x(d.count); })
.y(function(d) { return y(d.time); });

svg = d3.select("#viz").append("svg")
.attr("width", width + margin.left + margin.right)
.attr("height", height + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

  svg.append("defs").append("clipPath")
   .attr("id", "clip")
   .append("rect")
   .attr("width", width)
  .attr("height", height);

 svg.append("g")
   .attr("class", "x axis")
   .attr("transform", "translate(0," + height + ")")
   .call(d3.svg.axis().scale(x).orient("bottom")
   .ticks(d3.time.minutes,tick_count));

 svg.append("g")
   .attr("class", "y axis")
   .call(d3.svg.axis().scale(y).orient("left"));

  d3.select(".x.axis")
     .append("text")
      .text("the time span")
   .attr("transform", "translate(360,30)");

  d3.select(".y.axis")
    .append("text")
    .text("Maximum number of active users")
    .attr("transform", "rotate (-90, -35, 0) translate(-210)");

 path = svg.append("g")
   .attr("clip-path", "url(#clip)")
   .append("path")
   .data([data])
   .attr("class", "line")
   .attr("d", line); 
```

我想我没有正确应用时间格式。我需要将 Unix 时间戳转换为 AM 或 PM 格式的正确时间，然后相应地调用图形绘图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T11:37:59.467

UNIX 时间戳没有 AM 或 PM 的概念，您想使用格式化程序来处理它。d3 提供了用于创建时间格式化程序的函数，它可以让您指定它以完全按照您的意愿出现（请参阅[本文档](https://github.com/mbostock/d3/wiki/Time-Formatting)）。然后，您可以使用该方法将该格式化程序传递给轴`tickFormat`。

我认为格式化字符串`%I:%M %p`会给你你想要的格式。您可以将其应用于以下内容：

```
d3.svg.axis().scale(y).orient("left").tickFormat(d3.time.format("%I:%M %p")) 
```

# asp.net - asp.net：MaxHttpCollectionKeys (web.config) 是否有最大值？

> ID：13393109
> 
> 赞同：1
> 
> 时间：2012-11-15T07:26:43.220
> 
> 标签：asp.net, web-config

我需要`MaxHttpCollectionKeys`经常增加，因为我有一个非常大的应用程序正在发送许多密钥。

所以我问自己，是否有一个最大值，我不必“每天”都改变它？

例如像这样的东西

```
<appSettings>
  <add key="aspnet:MaxHttpCollectionKeys" value="-1" />
</appSettings> 
```

其中 -1 代表“最大值”。

还是我必须在那里放高价值`20000`？

Ps：目前我有`8000`我需要得到更多。

# knockout.js - Knockout.js - 过滤具有多个条件的计算

> ID：13393112
> 
> 赞同：1
> 
> 时间：2012-11-15T07:26:52.067
> 
> 标签：knockout.js

尝试过滤具有多个条件的计算。我见过很多例子，return 语句嵌套了多个条件，但我真的不明白它们为什么起作用。我在这里的示例可能不是嵌套返回语句的候选者，但我不确定如何执行它。

```
//ko.utils.arrayFilter - filter the items using the filter text
viewModel.filteredItems = ko.computed(function() {
    var filter = this.filter().toLowerCase();
    if (!filter) {
        return this.items();
    } else {
        return ko.utils.arrayFilter(this.items(), function(item) {
            return (item.fullName().toLowerCase().indexOf(filter) > -1);
        });
    }

    //*** THIS LOGIC WORKS BY ITSELF BUT NOT COMBINED WITH THE ABOVE LOGIC ***
    //var t = this.selectedTag();
    //if (t == "all") return this.items();
    //return ko.utils.arrayFilter(this.items(), function(item) {
    //    return item.tag == t;
    //});

}, viewModel); 
```

这是小提琴中的完整示例：http: [//jsfiddle.net/boyus/qTb5Q/12/](http://jsfiddle.net/boyus/qTb5Q/12/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:54:29.340

我认为您计算的逻辑有点不正确，并且您没有在数据绑定中正确设置选定的标签。

查看[http://jsfiddle.net/qTb5Q/14/](http://jsfiddle.net/qTb5Q/14/)以获得有效的解决方案。

这是更改后的计算函数：

```
 viewModel.filteredItems = ko.computed(function() {
      var filter = this.filter().toLowerCase();
      if (!filter) {
        var t = this.selectedTag().toLowerCase();
        if (!t || t == "all") return this.items();
        return ko.utils.arrayFilter(this.items(), function(item) {
            return item.tag().toLowerCase() == t;
        });
      } else {
          return ko.utils.arrayFilter(this.items(), function(item) {
              return (item.fullName().toLowerCase().indexOf(filter) > -1);
          });
      }
  }, viewModel); 
```

# java - sqlite中更新语句的返回值

> ID：13393114
> 
> 赞同：1
> 
> 时间：2012-11-15T07:27:03.660
> 
> 标签：java, sqlite, sql-update

通过java调用时，sql lite中的更新语句返回什么样的值？它是布尔值吗？

我正在尝试更新几行并想获取它是否正常工作或抛出异常。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:31:03.573

试试这个：

1）您执行更新查询的方法：

```
public boolean updateTable()
{

boolean isSuccessFul = false;
// Prepare the statements and the connections

try
{
// Execute the update

isSuccessFul = true;
}
catch(Exception e)
{
// Handle it
}
finally
{
 return isSuccessFul;
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:32:02.770

如果你用 iOS 运行这句话，你会得到修改的行数，我认为在 Java 中会类似

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-12T07:36:54.433

**int executeUpdate() 抛出 SQLExceptionSQLException**

执行此 PreparedStatement 对象中的 SQL 语句，该语句必须是 SQL 数据操作语言 (DML) 语句，例如 INSERT、UPDATE 或 DELETE；或不返回任何内容的 SQL 语句，例如 DDL 语句。
**返回：**
(1) **SQL 数据操作语言 (DML) 语句的行计数**或 (2) 0 用于不返回任何内容的 SQL 语句
**抛出：**
SQLException - 如果发生数据库访问错误；此方法在已关闭的 PreparedStatement 或 SQL 语句返回 ResultSet 对象上调用 SQLTimeoutException - 当驱动程序确定已超过 setQueryTimeout 方法指定的超时值并至少尝试取消当前正在运行的语句时

# c# - 不知道如何将我的项目添加到列表

> ID：13393115
> 
> 赞同：0
> 
> 时间：2012-11-15T07:27:07.430
> 
> 标签：c#

我有这个代码：

```
public List<UserTrainingModules> GetTrainingModulesForUser(int userId)
{
  List<UserTrainingModules> trainingModules = new List<UserTrainingModules>();

  var modules = UserRepository.GetTrainingModulesForUser(userId);
  trainingModules.Add(modules); //not correct error is "invalid arguments"
  return trainingModules;
} 
```

我的类型 UserTrainingModules：

```
 public class UserTrainingModules
  {
    public virtual int userTrainingModuleId { get; set; }
    public virtual string title { get; set; }
  } 
```

我的方法 GetTrainingModulesForUser：

```
 public List<UserTrainingModules> GetTrainingModulesForUser(int userId)
{
  using (SqlConnection conn = new SqlConnection(ZincModelContainer.CONNECTIONSTRING))
  {
    using (SqlCommand cmd = conn.CreateCommand())
    {
      conn.Open();
      cmd.CommandType = System.Data.CommandType.StoredProcedure;
      cmd.CommandText = "[Zinc].[GetTrainingModulesForUser]";

      SqlParameter param = new SqlParameter("@UserId", System.Data.SqlDbType.Int);
      param.Value = userId;
      cmd.Parameters.Add(param);

      using (SqlDataAdapter adapter = new SqlDataAdapter(cmd))
      {
        DataTable dt = new DataTable();
        adapter.Fill(dt);

        ICollection<UserTrainingModules> moduleDetail = new List<UserTrainingModules>(); //not sure what i must have here
        foreach (DataRow row in dt.Rows)
        {
          var moduleId = Convert.ToInt32(row["TrainingModuleArtifactScormModules_TrainingModuleArtifactId"]);  //this line not correct
          var title = row["Title"];  //not correct either
          moduleDetail.Add(moduleId,title);  //error is no overload method "add" takes 2 arguments
        }

        return moduleDetail;
      }
    }
  }
} 
```

有人可以告诉我我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:31:17.920

尝试这个：

```
.AddRange 
```

你的论点似乎是一个可枚举的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:33:48.633

代替：

```
moduleDetail.Add(moduleId,title); 
```

至：

```
moduleDetail.Add(new UserTrainingModules {userTrainingModuleId  = moduleId, title = title}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:35:19.377

```
public List<UserTrainingModules> GetTrainingModulesForUser(int userId)
{
  return UserRepository.GetTrainingModulesForUser(userId);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T07:46:59.380

像这样使用 AddRange

```
public List<UserTrainingModules> GetTrainingModulesForUser(int userId)
    {
      List<UserTrainingModules> trainingModules = new List<UserTrainingModules>();

      var modules = UserRepository.GetTrainingModulesForUser(userId);
      trainingModules.AddRange(modules); // It would work fine
      return trainingModules;
    } 
```

# sharepoint - Sharepoint 2010：无法查看网站集管理

> ID：13393116
> 
> 赞同：1
> 
> 时间：2012-11-15T07:27:37.007
> 
> 标签：sharepoint, sharepoint-2010

我是 sharepoint 的新手，无法让“站点集合管理”部分显示在“站点操作 -> 站点设置”下。

我在另一个网站上读到，我需要以网站集管理员身份登录。由于我还不是管理员，因此我登录了 Sharepoint 管理中心 -> 网站集 -> 更改网站集管理员。从这里开始，我将自己设置为辅助网站集管理员。到目前为止，一切都很好。

接下来，我使用我的用户帐户重新登录到 sharepoint，我假设现在拥有网站集的权限，但是当我返回网站设置时，我仍然看不到“网站集管理员”

我当前的权限被列为“完全控制，设计”。

知道为什么我看不到这个部分吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:29:53.123

The **Site collection administrators** link will not appear under *Users and Permissions* unless you are at the Site Collection Top Level Site.

You can verify where you are by going to *Site Actions* > **Site Settings**. If under the *Site Collection Administration* section, it says *Go to top level site settings* you are not at the Top Level Site. Click this link to get the top level site.

# vba - Visual Basic 指针

> ID：13393118
> 
> 赞同：0
> 
> 时间：2012-11-15T07:27:48.837
> 
> 标签：vba, pointers

你能给我一个关于如何制作指针并使用它们来操纵它们指向的值的例子吗？你能在 Visual Basic 中给我一个字符串和一个数字示例吗？您能给我发送更多信息和指针参考的链接（最好是 MSDN）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:42:41.503

可以使用各种技术模拟指针，但 VB 中不支持本机指针。在此处查看更多信息：[Vb.net 指针](https://stackoverflow.com/questions/759474/vb-net-pointers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:49:18.783

VBA 不是 C 系列语言（显然），所以正如 Icepack 所说，指针并不是真正原生支持的。你可以看看以下文章：

[http://support.microsoft.com/kb/199​​824](http://support.microsoft.com/kb/199824)

（虽然那是针对 VB 而不是 VBA；我自己在 VB6 中使用了其中的一些函数，但不是 VBA，所以我不能保证任何或全部都可以工作）并且为了完整起见获取函数的地址：

[http://msdn.microsoft.com/en-us/library/office/aa165194%28v=office.10%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa165194%28v=office.10%29.aspx)

# android - 如何在软键盘中显示空格键并在用户单击空格键时执行一些操作

> ID：13393121
> 
> 赞同：3
> 
> 时间：2012-11-15T07:28:13.950
> 
> 标签：android, android-edittext

我有一个编辑文本。在那个edittext中，用户输入了一些文本。当用户点击空格键时，我需要执行一些操作。我该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:49:15.787

要在用户按下空格键时执行某些操作，请使用以下命令 -

```
if((event.getAction()==KeyEvent.ACTION_DOWN)&&(key == KeyEvent.KEYCODE_SPACE)){
//put your code for whatever you what to do when the user presses space here
   }
} 
```

[在 EditText 中截取空格键的问题](https://stackoverflow.com/questions/11302483/problems-intercepting-space-key-in-edittext)

如果你有多个edittexts，在上面的代码中

```
if (edittext.hasFocus()){
    //do something for particular edit text
} 
```

我想我知道为什么您的 edittext 不起作用。当edittext被聚焦（选中）时，按键会绕过您的活动并直接进入edittext。要解决此问题，您需要将其`onKeyListener`移入`onKeyListener`您的编辑文本中。

请尝试以下代码

```
edittext.setOnKeyListener(new OnKeyListener() {           
        @Override
        public boolean onKey(View v, int key, KeyEvent event) {
            if (event.getAction()==KeyEvent.ACTION_DOWN && key == KeyEvent.KEYCODE_ENTER) {
                //operation that you want on key press
                return true;
            }
            return false;
        }
    }); 
```

希望这个有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:08:32.670

我认为它更好地`TextWatcher`用于 EditText。你可以用这种方式实现

```
 EditText et = (EditText)findViewById(R.id.ed1);

    et.addTextChangedListener(new TextWatcher()
    {
        public void afterTextChanged(Editable s)
        {
              // Abstract Method of TextWatcher Interface.
        }
        public void beforeTextChanged(CharSequence s,
                int start, int count, int after)
        {
            // Abstract Method of TextWatcher Interface.
        }
        public void onTextChanged(CharSequence s,
                int start, int before, int count)
        {
            System.out.println(s);
            if(s.toString().equals(" "))
            {
                Toast.makeText(getApplicationContext(), "Space is clicked", Toast.LENGTH_LONG).show();
            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-20T12:33:49.753

当用户单击空格按钮定义您自己的操作时，试试这对您肯定有用...

```
youredittext.setOnKeyListener(new View.OnKeyListener() {
            public boolean onKey(View v, int keyCode, KeyEvent event) {

                // If the event is a key-down event on the "enter" button
                if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
                    (keyCode == KeyEvent.KEYCODE_SPACE)) {
                  // Perform action on key press

                  Toast.makeText(getApplicationContext(), youredittext.getText(), Toast.LENGTH_SHORT).show();
                  return true;
                }
                return false;
            }
        }); 
```

# jquery - 使用没有 tbody 的 jQuery 创建表

> ID：13393125
> 
> 赞同：3
> 
> 时间：2012-11-15T07:28:28.897
> 
> 标签：jquery

如何在 jQuery 中创建表而不通过 jQuery 将 tbody 添加到我的代码中？见[http://jsfiddle.net/r7BFq/](http://jsfiddle.net/r7BFq/)

```
$('table').html('<tr><td>A</td><td>B</td></tr>');
$('pre').text($('table').html());​ 
```

结果是

```
<tbody><tr><td>A</td><td>B</td></tr></tbody> 
```

我不想要那个。我想：

```
<tr><td>A</td><td>B</td></tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:36:51.633

为什么要尝试删除`tbody`. 您的浏览器正在尝试添加有效 html 的部分，您丢失了。这不是很好吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:39:59.070

**请试试这个演示** [http://jsfiddle.net/d8zVX/](http://jsfiddle.net/d8zVX/)

*引用*@undefined bruv：`Actually browser creates the tbody element not jQuery`

进一步阅读：

[为什么浏览器仍然在 HTML5 中注入 <tbody>？](https://stackoverflow.com/questions/7490364/why-do-browsers-still-inject-tbody-in-html5)

**引用**

> 由于历史原因，某些元素甚至具有超出其内容模型给出的限制的额外限制。
> 
> 一个 table 元素不能包含 tr 元素，即使根据本规范中描述的内容模型，这些元素在技术上是允许在 table 元素中的。（如果将 tr 元素放在标记中的表格内，它实际上将暗示它之前的 tbody 开始标记。）

这将满足需要`:)`

**代码**

```
$('table').html('<tr><td>A</td><td>B</td></tr>');
var hulk = $('table').html().replace(/<\/?tbody>/g, '');;
$('pre').text(hulk);​ 
```

**工作图像**

![在此处输入图像描述](../Images/4aad09349daab925849cc319d0cf8e5b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:44:03.887

这很完美：

HTML：

```
<div id="table_sample"></div> 
```

查询：

```
$('#table_sample').html('<tr><td>A</td><td>B</td></tr>');
$('#table_sample').text($('#table_sample').html()); 
```

# dynamics-crm-2011 - 饼图中的调色板颜色

> ID：13393126
> 
> 赞同：0
> 
> 时间：2012-11-15T07:28:31.740
> 
> 标签：dynamics-crm-2011, crm, mschart, dynamics-crm-4

我们正在使用 2011 CRM 开箱即用的饼图。我们的饼图将显示 4 个部分，每个部分应以特定颜色显示。

喜欢黄色的section1

第 2 节绿色

橙色的第 3 部分

第 4 节红色。

我们已将这些颜色放入 CRM 图表 xml 的自定义调色板颜色中。

现在我们的问题是section1没有数据时；第 2 节显示为黄色，第 3 节显示为绿色，第 4 节显示为橙色

当第 1 节和第 2 节没有数据时；第 3 节显示为黄色，第 4 节显示为绿色

当 section1 section2 和 section3 没有数据时；第 4 节显示为黄色。

如何纠正这个问题。我们可以在 2011 CRM 图表中纠正这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:44:23.207

您可以输入空数据点吗？如果没有数据，请放置空数据点并立即显示它们。我这就是我克服这个问题的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:32:11.387

我不认为这将是可能的控制。

[CRM SDK 确认](http://msdn.microsoft.com/en-us/library/gg327901.aspx)图表使用Microsoft [Chart Controls](http://msdn.microsoft.com/en-us/library/dd456632%28VS.100%29.aspx)，具体来说，在描述图表的两段 XML 中，“表示描述 XML”会影响图表的外观。

SDK 继续说：

> XML 是 Microsoft Chart Controls 中 Chart 类的序列化

[Chart 类](http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.series.palette.aspx)具有图表使用的 Palette 属性，该属性在 CRM 中在节点中指定（`Chart`请参阅[示例图表](http://msdn.microsoft.com/en-us/library/gg309515.aspx#PieChart)）。在任何情况下，饼图的 Chart 类对这个调色板的使用如下：

> 图表控件调色板中使用的第一个可用颜色。每个数据点一种颜色。

注意“第一个可用的颜色”[原文如此]。图表控件 SDK 注释不包含任何关于覆盖此行为的信息。即使他们这样做了，您也需要将其（以某种方式）从 .Net 托管代码属性和分配转换为 CRM 的相同对象的 XML 序列化。

* * *

最后的想法-您可以尝试使用该[`Points`集合](http://msdn.microsoft.com/en-us/library/system.web.ui.datavisualization.charting.series.points.aspx)来强制每个数据点采用特定的颜色。我在您的演示文稿 XML 中考虑这样的事情，但这确实是我的猜测：

```
<Chart Palette="None" PaletteCustomColors="97,142,206; 209,98,96; 168,203,104; 142,116,178; 93,186,215; 255,155,83; 148,172,215; 217,148,147; 189,213,151; 173,158,196; 145,201,221; 255,180,138">
  <Series>
    <Series ShadowOffset="0" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="PieLabelStyle=Inside, PieDrawingStyle=Default" ChartType="pie">
      <SmartLabelStyle Enabled="True" />
        <Points>
          <DataPoint Color="97,142,206"/>
          <DataPoint Color="209,98,96"/>
          <DataPoint Color="168,203,104"/>
          <DataPoint Color="142,116,178"/>
        </Points>
    </Series>
  </Series> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T21:18:05.347

此博客文章解决了该特定问题 [http://crmchartguy.wordpress.com/2013/02/24/specify-exact-colors-for-each-priority-in-the-microsoft-dynamics-crm-2011-case-chart /](http://crmchartguy.wordpress.com/2013/02/24/specify-exact-colors-for-each-priority-in-the-microsoft-dynamics-crm-2011-case-chart/)

同样的方法也适用于饼图。

# mysql - SQL - 选择关联记录

> ID：13393130
> 
> 赞同：2
> 
> 时间：2012-11-15T07:28:50.677
> 
> 标签：mysql, sql, select, conditional-statements

我有下表称为跟踪：

```
ID_path -- step_start -- step_end -- time  
  1         A             B      10  
  1         B             C      20  
  1         C             D      30  
  2         A             C      100  
  3         D             C      20  
  3         A             N      300 
```

我在 Mysql 中寻找可以提取路径 AC 的累积值的单个查询，因此它本身和所有步骤都进入：[AC] + [AB] + [BC]。

> 从跟踪中选择 sum(time) where (step_start = 'A' or step_end = 'C') and ID_path = ID_path

我认为这个查询考虑到 step 的值不能同时在 start 和 end 但我不知道如何表达最后一个条件 (ID_path = ID_path) 以便仅提取具有相同 id_path 的记录。是否有特定的 SQL 函数？

感谢您的任何帮助/mysql 编码指南/建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:35:31.457

你可以这样做：

```
Select ID_path,sum(time)
from tracking 
where (step_start = 'A' or step_end = 'C')
group by ID_path 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/25478/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:35:59.813

我不确定你在问什么，但我怀疑是这样的：

```
SELECT id_path, sum(time) total
WHERE step_start = 'A' OR step_end = 'C'
GROUP BY id_path 
```

# asp.net - 何时使用后面的代码以编程方式调用 Javascript

> ID：13393132
> 
> 赞同：0
> 
> 时间：2012-11-15T07:29:03.637
> 
> 标签：asp.net, .net

在哪种情况下，我们需要使用后面的代码以编程方式调用 Javascript？我知道 RegisterStartupScript 和 RegisterClientScriptBlock 方法以及它们之间的区别。但是，我想知道我可以在我的应用程序中使用它们的目的是什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:49:09.477

无论您使用什么，都不能从后面的代码中调用 JS。您只能在客户端加载页面时启动脚本。这相当于添加...

方法背后的所有代码只是包装器，可帮助您动态添加一些 javascript，从而允许根据某些条件构建脚本。另一种方法是添加所有必要的代码并仅使用当前需要的部分，这将导致更多的流量和加载延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:42:56.637

您可能希望使用`RegisterStartupScript`并`RegisterClientScriptBlock`在页面上动态呈现一些 javascript，并在页面加载时根据服务器上已知的某些条件在页面被呈现时执行它。

例如，您可能想要显示一些通知，因为某个事件发生了。

您可以用不同的方式解决相同的问题，即。AJAX 长轮询。请记住，`RegisterStartupScript`很久`RegisterClientScriptBlock`以前，当更现代的技术解决方案没有被广泛使用时，它是为 ASP.NET Web 表单“发明”的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T11:01:21.677

在很多情况下，我们可以从后面的代码中使用 javascript，例如 strScript = "" & _ "window.opener.FillStaff)"()

上面的代码可以用来填充服务器端任何点击事件的父页面的控件。

# android - 从其他类调用主函数

> ID：13393135
> 
> 赞同：1
> 
> 时间：2012-11-15T07:29:49.470
> 
> 标签：android, class, global-variables, toast

我遇到了这个问题，我挣扎了几个小时，我认为这需要几分钟。
我尝试了很多东西，比如使用线程等，但我认为这可以更容易完成。

这是我的解压类（Unzipper）：

```
 import java.io.BufferedInputStream;
    import java.io.BufferedOutputStream;
    import java.io.File;
    import java.io.FileOutputStream;
    import java.io.IOException;
    import java.util.Enumeration;
    import java.util.Observable;
    import java.util.zip.ZipEntry;
    import java.util.zip.ZipFile;

    import org.apache.commons.io.IOUtils;

    import android.os.AsyncTask;
    import android.os.Environment;
    import android.util.Log;

    public class Decompress extends Observable {

        static final String TAG = "UnZip";
        int counter;
        private String mFileName, mFilePath, mDestinationPath;

        public Decompress (String fileName, String filePath, String destinationPath) {
            mFileName = "bigflow";
            mFilePath = Environment.getExternalStorageDirectory().toString();
            mDestinationPath = Environment.getExternalStorageDirectory() + "/bigflow/";

        }

        public String getFileName () {
            return mFileName;
        }

        public String getFilePath() {
            return mFilePath;
        }

        public String getDestinationPath () {
            return mDestinationPath;
        }

        public void unzip () {
            System.out.println("unzipping...");
            String fullPath = mFilePath + "/" + mFileName + ".zip";
            Log.d(TAG, "unzipping " + mFileName + " to " + mDestinationPath);
            new UnZipTask().execute(fullPath, mDestinationPath);

        }

        private class UnZipTask extends AsyncTask<String, Void, Boolean> {

            @SuppressWarnings("rawtypes")
            @Override
            protected Boolean doInBackground(String... params) {
                String filePath = params[0];
                String destinationPath = params[1];

                File archive = new File(filePath);
                try {
                    ZipFile zipfile = new ZipFile(archive);
                    for (Enumeration e = zipfile.entries(); e.hasMoreElements();) {
                        ZipEntry entry = (ZipEntry) e.nextElement();
                        unzipEntry(zipfile, entry, destinationPath);
                    }
                } catch (Exception e) {
                    Log.e(TAG, "Error while extracting file " + archive, e);
                    return false;
                }

                return true;
            }

            @Override
            protected void onPostExecute(Boolean result) {
                setChanged();
                notifyObservers();
            }

            private void unzipEntry(ZipFile zipfile, ZipEntry entry,
                    String outputDir) throws IOException {

                if (entry.isDirectory()) {
                    createDir(new File(outputDir, entry.getName()));
                    return;
                }

                File outputFile = new File(outputDir, entry.getName());
                if (!outputFile.getParentFile().exists()) {
                    createDir(outputFile.getParentFile());
                }

                Log.v(TAG, "Extracting: " + entry);
                BufferedInputStream inputStream = new BufferedInputStream(zipfile.getInputStream(entry));
                BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(outputFile));

                try {
                    IOUtils.copy(inputStream, outputStream);
                } finally {
                    outputStream.close();
                    inputStream.close();
------------------->   counter++; <--------------------------------
                }

               } 

            private void createDir(File dir) {
                if (dir.exists()) {
                    return;
                }
                Log.v(TAG, "Creating dir " + dir.getName());
                if (!dir.mkdirs()) {
                    throw new RuntimeException("Can not create dir " + dir);
                }
            }

        }
    } 
```

在`counter++;`我想检查它是否在 387（或其他）上之后，我想显示一条消息。但是我不能在这个类中这样做，它需要在主类中完成。
但不知何故，我无法让它发生。
如果`counter`== 387 我的程序是否有可能返回`MainActivity()`并调用函数？

```
public class MainActivity extends Activity {
} 
```

我知道如何制作吐司等，但它不适用于解压缩类。
当计数器为某个数字时，欢迎任何解决方案显示消息。

我希望你们知道我的意思，否则说出来，总是可以提供更多信息。

试过这个： `Toast.makeText(getBaseContext(),"test", Toast.LENGTH_SHORT).show();`
getBaseContext 未定义，因为解压缩类不是 Activity。

日志猫：

```
11-15 09:20:50.315: E/UnZip(6495): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
11-15 09:20:50.315: E/UnZip(6495):  at android.os.Handler.<init>(Handler.java:121)
11-15 09:20:50.315: E/UnZip(6495):  at android.widget.Toast$TN.<init>(Toast.java:317)
11-15 09:20:50.315: E/UnZip(6495):  at android.widget.Toast.<init>(Toast.java:91)
11-15 09:20:50.315: E/UnZip(6495):  at android.widget.Toast.makeText(Toast.java:233)
11-15 09:20:50.315: E/UnZip(6495):  at com.bigflow.dark_legacy.MainActivity$1.message(MainActivity.java:45)
11-15 09:20:50.315: E/UnZip(6495):  at com.bigflow.dark_legacy.Decompress$UnZipTask.unzipEntry(Decompress.java:109)
11-15 09:20:50.315: E/UnZip(6495):  at com.bigflow.dark_legacy.Decompress$UnZipTask.doInBackground(Decompress.java:70)
11-15 09:20:50.315: E/UnZip(6495):  at com.bigflow.dark_legacy.Decompress$UnZipTask.doInBackground(Decompress.java:1)
11-15 09:20:50.315: E/UnZip(6495):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
11-15 09:20:50.315: E/UnZip(6495):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-15 09:20:50.315: E/UnZip(6495):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-15 09:20:50.315: E/UnZip(6495):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
11-15 09:20:50.315: E/UnZip(6495):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
11-15 09:20:50.315: E/UnZip(6495):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:40:20.817

**更新**：我的意思是，当您说您无法从 Decompress 发出 Toast 消息（有点懒得阅读所有内容）时，我是相信您的话，但是尝试将您的活动上下文作为参数发送，然后在中调用 Toast `onPostUpdate`.

在这种情况下，您最好的选择是在构造函数中也发送一个侦听器作为参数。因此，在您调用的 Activity 中的任何位置`Decompress`：

**主要活动**

```
public class MainActivity extends Activity {
/*Stuff and more stuff*/
    new Decompress (String fileName, String filePath, String destinationPath, 
    new MyListener(){
        public void message() { 
            Toast.makeText(MainActivity.this, "Your message", Toast.LENGTH_SHORT).show()
        }
    });
} 
```

**解压类**：

```
public class Decompress extends Observable {

static final String TAG = "UnZip";
int counter;
private String mFileName, mFilePath, mDestinationPath;
MyListener listen;

public Decompress (String fileName, String filePath, String destinationPath, MyListener listener) {
    mFileName = "bigflow";
    mFilePath = Environment.getExternalStorageDirectory().toString();
    mDestinationPath = Environment.getExternalStorageDirectory() + "/bigflow/";
    listen = listener;
}
//...... 
```

当然，在某处定义的实际接口

```
public interface MyListener{
    void message();
} 
```

哦，差点忘了

```
finally {
         outputStream.close();
         inputStream.close();
         counter++;
         if(counter == 387) listen.message();
         } 
```

不确定这是否是您想要的方式，或者在该部分中，但您明白了。

干杯!

# html - 单击链接时页面变为空白

> ID：13393137
> 
> 赞同：1
> 
> 时间：2012-11-15T07:30:00.780
> 
> 标签：html, firefox, google-chrome

当我在 Firefox 中打开我的网站并单击链接时，侧边栏和菜单等静态内容始终存在，它们不会闪烁或其他东西。只有其余的内容发生变化。

另一方面，在 Chrome 中，当我点击一个链接时，整个页面会变白几毫秒，然后整个页面就会出现。

有没有办法（javascript、css等）强制chrome做同样的firefox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:38:45.717

作为参考，这称为页面刷新。有几种方法可以防止页面刷新，您选择的方法将取决于您的场景和网站的大小。

其中一种方法是使用 jQuery。你将你的内容写在一个不同的、隐藏的容器中（即`<div style="display:none" />`在同一个页面中并使用 jQuery 来切换内容。

演示 [http://unwrongest.com/projects/tabify/](http://unwrongest.com/projects/tabify/)

# java - 在新的 Android 应用程序中使用大型参考项目

> ID：13393142
> 
> 赞同：1
> 
> 时间：2012-11-15T07:30:42.527
> 
> 标签：java, android, windows, eclipse

我正在尝试将现有的（且相对较大的）java 应用程序移植到 Android。该应用程序当前使用 AWT/Swing 作为其 GUI，我知道我必须替换它，但我的问题是：我可以将现有应用程序导出到 jar 中，并在我的 Android 应用程序中使用它作为参考吗？我的目标是使用该程序仍在积极开发的后端。

我已经尝试通过将 .jar 添加到 libs 目录/构建路径以及将 Eclipse 项目添加到构建路径但没有成功来做到这一点。每次我尝试部署它时，都会遇到 GC 问题和`NoClassDefFound`错误，最终导致 Eclipse 工作台耗尽内存并崩溃。

原始应用程序是使用 MVC 设计模式编写的，我希望包含模型和控制器，并且只是替换视图。解决这个问题的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:35:56.460

如果应用程序架构良好，我会去掉 View 组件，只保留控制器和模型类。然后它应该在标准 JDK 上编译（如在 MVC 中，C 和 M 不应该依赖于 V）。

完成后，创建一个新的空 Android 项目，将其标记为 Android 库，并将源代码放入 src 文件夹。

项目应该被编译，你应该能够看到哪些类丢失并需要一些移植。

如果您的项目在外部类上使用反射，请尝试查看使用了哪些类并检查它们是否属于 Android SDK。

如果您使用的是外部 jar，请确保这些 jar 也与 Android 兼容。

# perl - 如何包含一个包含所有必需 Perl 模块名称的文件？

> ID：13393144
> 
> 赞同：6
> 
> 时间：2012-11-15T07:30:57.407
> 
> 标签：perl, perl-module

perl 脚本包含脚本开头的所有模块名称。

前任：

```
use strict;
use XML::Parser;
use XML::Simple;
use DBI;
use DBD::DB2::Constants;
use POSIX qw( strftime );
use Storable qw(dclone);
use Data::Dumper;
use Carp; 
```

如何将所有模块名称保存在另一个文件中并将该文件包含在主 perl 脚本中？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T07:38:12.760

您可以使用

```
BEGIN { do 'filename.pl' or die $@ } 
```

见[做](http://p3rl.org/do)。确保包含`1;`在文件的底部。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T07:40:10.037

创建自己的模块。但是，如果您在此模块中制作包，则这些`strftime`等将被导入另一个命名空间。你可以做一些小技巧来做这个微笑：

我的模块.pm：

```
use strict;
use XML::Parser;
use XML::Simple;
use DBI;
use DBD::DB2::Constants;
use POSIX qw( strftime );
use Storable qw(dclone);
use Data::Dumper;
use Carp; 
```

请注意，此 .pm 中没有`package`关键字。你的脚本：

```
use MyModules; 
```

将此 .pm 放入与脚本相同的目录或在运行时添加模块搜索路径：

```
use lib '/my_modules_dir/';
use MyModules; 
```

不推荐使用**do**和**require**命令，因为它们不会在脚本启动时检查语法。当然，您可以将它们放入 BEGIN 块中，但我认为它很棘手，通常`BEGIN{ require ..}`与`use`

UPD：**ikegami**注意到当您从许多模块中使用它时它无法正常工作。不管问题启动器的信息（他想从主脚本中使用它），我都会从许多模块中添加如何使用它的信息，这样我的朋友会感觉更好。添加到 MyModules.pm 的末尾：

```
delete $INC{'MyModules.pm'};
1; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T12:28:06.983

您可能会查看[Toolkit](https://metacpan.org/module/Toolkit)模块。

# file - 打开 .sdx 文件

> ID：13393152
> 
> 赞同：1
> 
> 时间：2012-11-15T07:31:40.387
> 
> 标签：file, visual-studio-2010, download, dreamspark

我在下载 SDX 文件时遇到了很多困难。我正在尝试从向学生免费提供 Visual Studio 2012 的网站 (DreamSpark) 下载 Visual Studio 2012。我设法下载了安装包（SDM 文件）。每当我下载 SDX 文件时，它都会说它需要知道应该使用什么程序来打开它。我已经尝试了一切，包括 Apple QuickTime Player。在其当前格式下，我无法按照网站上的说明打开它以开始下载文件。

以前遇到过这种情况的人的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-03T17:23:51.713

在 Windows 中，您需要从 DreamSpark 安装软件下载管理器 (SDM)。这是通过登录您的 DreamSpark 帐户并直接从 DreamSpark 下载来完成的。安装后，它将与 .SDX 文件扩展名相关联，并且能够根据需要打开文件。我知道，因为我自己作为 DreamSpark 用户，以前也这样做过。

在 Linux 中 - [编辑] 在 Linux 中，您使用 Linux-SDM-Downloader，它可从 github 存储库获得：[https](https://github.com/RadekSimkanic/Linux-SDM-Downloader) ://github.com/RadekSimkanic/Linux-SDM-Downloader 。根据我个人的使用，它会打开 sdx 文件并允许您从 DreamSpark 下载文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-29T20:55:02.657

如果您没有先下载 Manager 程序

这将解决您遇到的 SDM 问题，然后我将尝试为您下载的软件重新启动安装程序，在您的情况下是 Visual Studio 2012，因为它将选择 SDX 文件

如果它询问什么程序尝试点击浏览或在现代系统上，例如 Windows 10 的 8.1 10，它会说在这台 PC 上寻找另一个应用程序，基本上是一样的

尝试查找将包含 SDN 安装程序的文件夹

然后，如果您设法找到它，请尝试重新启动 Visual Studio 2012 安装程序，如果它运行，请稍等片刻

那么一切顺利，您应该可以很好地设置 2012 Visual Studio 并永远享受它

# php - Composer中的自定义包安装路径？

> ID：13393153
> 
> 赞同：7
> 
> 时间：2012-11-15T07:31:49.043
> 
> 标签：php, symfony, composer-php

是否可以在 Composer 中指定我们自己的包安装到与`vendor/`. 我知道我可以指定一个安装*所有*软件包的文件夹，但这不是我想要的。我希望第三方包最终出现在`vendor/`我们自己的`src/`文件夹中。

这可能吗？如果这很重要，我们正在使用 Symfony 2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T07:51:11.897

您可能应该制作自己的安装程序：http: [//getcomposer.org/doc/faqs/how-do-i-install-a-package-to-a-custom-path-for-my-framework.md](http://getcomposer.org/doc/faqs/how-do-i-install-a-package-to-a-custom-path-for-my-framework.md)并使用自己的`installer-paths`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-05T20:47:27.740

我已经实现了这个作曲家插件来将包安装到用户（自定义）定义的文件夹中，你可以将它包含在你的 composer.json 中，按照示例并告诉我你是否有更多问题 :)

[https://github.com/mnsami/composer-custom-directory-installer](https://github.com/mnsami/composer-custom-directory-installer)

# 作曲家自定义目录安装程序

作曲家插件，用于在文件夹中默认作曲家默认安装路径之外的自定义目录中安装不同类型的作曲家包`vendor`。

这不是另一个`composer-installer`支持非作曲家包类型的库，即`application`..等。这只是为了增加在供应商文件夹之外安装作曲家包的灵活性。这个包只支持`composer`包类型，

[https://getcomposer.org/doc/04-schema.md#type](https://getcomposer.org/doc/04-schema.md#type)

> 包的类型。它默认为库。
> 
> 包类型用于自定义安装逻辑。如果你有一个包需要一些特殊的逻辑，你可以定义一个自定义类型。这可能是一个 symfony-bundle、一个 wordpress-plugin 或一个typo3-module。这些类型都特定于某些项目，它们需要提供能够安装该类型包的安装程序。

## 如何使用

*   将作曲家插件包含到您的`composer.json` `require`部分中::

```
"require":{
    "php": ">=5.3",
    "mnsami/composer-custom-directory-installer": "1.1.*",
    "monolog/monolog": "*"
  } 
```

*   在该`extra`部分中定义要安装的包的自定义目录::

```
 "extra":{
    "installer-paths":{
      "./monolog/": ["monolog/monolog"]
    } 
```

通过添加该`installer-paths`部分，您告诉作曲家将`monolog`软件包安装`monolog`在根目录的文件夹中。

*   作为一项新增功能，我们在定义您的下载目录时增加了更多的灵活性，例如`composer/installers`，换句话说，您可以在您的部分中使用`{$vendor}`和之类的变量：`{$name}``installer-path`

```
"extra": {
    "installer-paths": {
        "./customlibs/{$vendor}/db/{$name}": ["doctrine/orm"]
    }
} 
```

以上将设法将`doctrine/orm`包安装在项目的根文件夹中，在`customlibs`.

## 笔记

`type: project`此安装程序不支持Composer ，因为具有类型的包`project`仅适用于与应用程序外壳（如`symfony/framework-standard-edition`）一起使用，其他包需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T14:54:40.533

如果仍然有问题，请考虑测试我的库（基于[mina.nsami](https://stackoverflow.com/users/3277020/mina-nsami "米娜夏美")的插件）：

[https://github.com/ideaconnect/composer-custom-directory](https://github.com/ideaconnect/composer-custom-directory)

允许自定义路径：

```
"extra":{
    "installer-paths":{
      "./monolog/": ["monolog/monolog"]
} 
```

甚至动态名称替换：

```
"extra": {
    "installer-paths": {
        "./packages/{$name}": ["sourcepackage/package_A","sourcepackage/package_B","sourcepackage/package_B"]
    }
}, 
```

并带有标志链，它允许在运行时简单地操作变量：

当前支持的标志是：

```
F - capitalizes first letter.
P - changes all entries of a _ or - followed by a character to only that character, capitalized. 
```

# scala - 为什么哈希映射上的这种相等性失败了？

> ID：13393154
> 
> 赞同：0
> 
> 时间：2012-11-15T07:31:51.090
> 
> 标签：scala

我正在测试一些关于哈希映射相等性的代码，我覆盖了`hashCode`,`equals`以及`canEqual`for super 和 subclass ，但是为什么它一直在抛出匹配错误？

测试代码如下：

```
object ObjEqualExam {

  case class TestClassKey(s: String, i:Int)  {
    def str = s
    def in = i

    override def equals (other : Any) = other match {
      case that : TestClassKey => (that canEqual this ) && (this.str == that.str) && (this.in == that.in)
    }
    override def hashCode = 41* (41 + in) + in
    override def canEqual(other : Any) = other.isInstanceOf[TestClassKey]
  }

  case class SubTestClassKey(ss: String, ii: Int, b : Boolean) extends TestClassKey(ss,ii){
    def bool = b
    override def equals (other : Any) = other match {
      case that : SubTestClassKey => 
        (that canEqual this ) && (this.str == that.str) && (this.in == that.in) && (this.b == that.b)
    }
    override def hashCode = 41* (41 + in) * in
    override def canEqual(other : Any) = other.isInstanceOf[SubTestClassKey] 
  }
  def main(args: Array[String]): Unit = {

    val map = Map.empty[TestClassKey, Int]
     val ins = new TestClassKey("1", 1)
     val map2 = map ++ List((ins->100), (new TestClassKey("2", 2)->200), (new SubTestClassKey("3", 3, true) -> 300))
     val map22 = Map.empty
     val ins22 = new TestClassKey("1", 1)
     val map222 = map ++ List((ins->100), (new TestClassKey("2", 2)->200), (new SubTestClassKey("3", 3, true) -> 300))
        println(map2 == map222) 

  }

} 
```

错误是这样的：

```
Exception in thread "main" scala.MatchError: TestClassKey(1,1) (of class org.tests.ObjEqualExam$TestClassKey)
    at org.tests.ObjEqualExam$SubTestClassKey.equals(ObjEqualExam.scala:18)
    at scala.collection.immutable.Map$Map2.updated(Map.scala:131)
    at scala.collection.immutable.Map$Map2.$plus(Map.scala:134)
    at scala.collection.immutable.MapLike$$anonfun$$plus$plus$1.apply(MapLike.scala:87)
    at scala.collection.immutable.MapLike$$anonfun$$plus$plus$1.apply(MapLike.scala:87)
    at scala.collection.LinearSeqOptimized$class.foldLeft(LinearSeqOptimized.scala:111)
    at scala.collection.immutable.List.foldLeft(List.scala:76)
    at scala.collection.TraversableOnce$class.$div$colon(TraversableOnce.scala:137)
    at scala.collection.immutable.List.$div$colon(List.scala:76)
    at scala.collection.immutable.MapLike$class.$plus$plus(MapLike.scala:87)
    at scala.collection.immutable.Map$EmptyMap$.$plus$plus(Map.scala:88)
    at org.tests.ObjEqualExam$.main(ObjEqualExam.scala:29)
    at org.tests.ObjEqualExam.main(ObjEqualExam.scala) 
```

（是因为一些协变或逆变还是什么？我很困惑......）

# c# - 如何从.net中的网络服务器连接数据库？

> ID：13393157
> 
> 赞同：1
> 
> 时间：2012-11-15T07:32:12.317
> 
> 标签：c#, .net, mysql

我们有用于托管网络服务的网络服务器。用于数据库的数据库（MySQL）服务器。两者都不在局域网中。我们可以在没有局域网的情况下从网络服务器连接数据库吗？

如果可以的话流程是怎样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:55:11.987

> 两者都不在局域网中

如果网络服务器和数据库服务器不在同一个局域网中，那么您必须与您的 IT 部门交谈并要求他们在它们之间进行适当的[路由](http://en.wikipedia.org/wiki/Routing)，并配置[防火墙](http://en.wikipedia.org/wiki/Firewall_pinhole)以让您的数据库流量通过。如果这不是一个选项，但在第三个 LAN 中有一台服务器可以从两台服务器访问，那么您可以在这第三台机器上安装[端口转发器。](http://en.wikipedia.org/wiki/Port_forwarding)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:55:55.913

您可以通过 IP 地址访问服务器：

> MySqlConnection cnn = new MySqlConnection("server=192.168.100.15;database=databasename;uid=xxxx;pwd=xxxx");

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T07:56:09.510

有两件事要检查。

**[编辑] PHP 代码如下，没有意识到您使用的是 .NET。**

首先，您在连接数据库时使用的是什么数据库主机字符串？如果您将`'localhost'`其用作数据库主机，它将无法工作，因为在与 Web 服务器相同的计算机上没有数据库。您的主机设置需要包含正确的 IP 地址/端口：

```
define('myDbHost', '192.168.5.1:5000'); // something like that

// or, when creating the connection (I am presuming you're using PHP)
$mysqli = new mysqli("192.168.5.1:5000", "user", "password", "database"); 
```

第二个问题是确保此地址/端口组合对您的 Web 服务器可见。您必须能够创建一个从 Web 服务器到数据库服务器上的端口号的套接字。这更像是一个系统管理员问题。

# c# - LINQ - C# - 使用 lambda - 从集合中获取一组数据

> ID：13393166
> 
> 赞同：5
> 
> 时间：2012-11-15T07:33:05.107
> 
> 标签：c#, linq

我有一个类似于 Point 的结构 TimePoint，除了 x 值是日期时间、这些时间点的可观察集合以及采用日期时间并返回双精度值的方法。

我想检索从该集合中的日期时间返回的双精度值的最大值和最小值。

我是 linq 的新手，无法弄清楚我必须传递可观察集合来实现这一点的查询。

这是我想要得到的：

```
double minDouble = 0;
double maxDouble = 0;

foreach(TimePoint item in obsColl)
{
    var doubleVal = ConvertToDouble(item.X); //Here x is a datetime
    if(minDouble > doubleVal)
        minDouble = doubleVal;
    if(maxDouble < doubleVal)
        maxDouble = doubleVal;
} 
```

如何使用 LINQ 实现这一目标？或者 LINQ 不适合这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T07:34:55.617

您可以为此使用`Max`和：`Min`

```
double minDouble = obsColl.Min(item => ConvertToDouble(item.X));
double maxDouble = obsColl.Max(item => ConvertToDouble(item.X)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T07:44:07.413

您可以查看此示例[101 LINQ Samples](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http%3A%2F%2Fcode.msdn.microsoft.com%2F101-LINQ-Samples-3fb9811b&ei=S6KkUKLHErDD0AWQhICQCA&usg=AFQjCNE8mRSbV9y7YZ-Uhiwvtx-rS4CP5A)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T07:39:19.070

效率更高

```
 double minDouble =ConvertToDouble( obsColl.Min(item => item.X));
    double maxDouble = ConvertToDouble(obsColl.Max(item => item.X)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:05:02.433

使用流利的断言包

```
 [Microsoft.VisualStudio.TestTools.UnitTesting.TestMethod]
    public void MyTestMethod()
    {
        var list = new List<double>() { 1, 3, 5, 2, 9, 4 };

        var minmax = from l in list
                     group l by 1 into g
                     select new
                     {
                         min = g.Min(),
                         max = g.Max()
                     };

        minmax.First().min.Should().Be(1);
        minmax.First().max.Should().Be(9);
    } 
```

现在**group l by 1 into g**是一个 hack，因为 linq 不允许没有组的聚合，但它还不错

# java - 在另一个框架中单击按钮时更新框架上 JPanel 的内容

> ID：13393167
> 
> 赞同：5
> 
> 时间：2012-11-15T07:33:09.710
> 
> 标签：java, swing, netbeans, jframe, jpanel

我创建了一个框架 x1，它有一个面板 p1。加载 x1 时，复选框会动态添加到 p1。添加到 p1 的复选框的数量取决于数据库表 (t1) 中满足特定条件的数据值的数量。

帧 x1 上有一个按钮 b1。单击 b1 时，会显示另一个框架 x2，其中可以修改数据库表 t1 的数据值。x2 中的“更新”按钮更新 t1 以反映对其数据值所做的更改。

修改后，当 x2 关闭时，我希望帧 x1 中的面板 p1 自动更新以反映对数据库所做的更改，即满足标准的数据值的数量在 x2 中的 t1 修改后可能已经改变，因此，数量要在 p1 上显示的复选框的数量也可能已更改。

如何从 x2 刷新和重新加载 x1 中面板 p1 的组件。

想知道是否有人可以帮助我解决问题。在此先感谢您，并对问题中的大量文字感到抱歉。

```
 In x2:

       private void UPDATEActionPerformed(java.awt.event.ActionEvent evt)
         {
        //x1 is an object of ParentFrame

        ParentFrame f1=new ParentFrame();
              f1.fillPanel();
              //fillpanel()fills p1 with checkboxes after running validate() and repaint() on it

             } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T07:44:13.680

> 单击b1时，显示另一个框架x2，其中可以修改数据库表t1的数据值

*   改用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html) _

> 添加到 p1 的复选框的数量取决于数据库表 (t1) 中满足特定条件的数据值的数量。

确保从 JPanel 中删除当前内容，然后

```
p1.revalidate();
p1.repaint(); 
```

*   将有效，不要重新创建 的新实例`JPanel`，然后您必须将此 Objcet 添加到，`JFrame`然后必须调用`validate()`& （现在我希望您不要扩展此容器:-)`repaint()``JFrame`

> 修改后，当 x2 关闭时，我希望框架 x1 中的面板 p1 自动更新以反映对数据库所做的更改，即满足标准的数据值的数量在 x2 中的 t1 修改后可能已经改变，因此，数量要在 p1 上显示的复选框的数量也可能已更改。

*   改用[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html) _

*   不要创建两个或更多`JFrames`，`JDialog`而是使用，

*   仅创建`JDialog`（`setDefaultCloseOperation(JDialog.CLOSE...)`）一个实例，将此容器重用于父级的另一个操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T07:36:11.963

通常，当您希望对 UI 的更改真正正确可见时，您会调用 a `validate()`，然后调用 a 。`repaint()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-08T05:36:21.050

您应该将帧 f1 传递给帧 f2

```
JFrame Frame;
public f1(JFrame f){
    frame=f;
} 
```

然后，写一个close方法

```
int closeFrame(){
    f.fillPanel();
    f.show();
    return JFrame.HIDE_ON_CLOSE;
} 
```

设置帧 f2 的默认关闭操作

```
public f1(JFrame f){
    frame=f;
    this.setDefaultCloseOperation(closeFrame());
} 
```

希望没事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-08T14:14:18.547

那么你可以做的一件事是在按钮的 ActionListener 中你可以执行这些操作：

```
//jp is a JPanel
//remove the current JPanel
frame.remove(jp);

//do the changes you want to do
//set sizes and border as before 
//again add the panel

frame.add(jp);
frame.revalidate();
frame.repaint(); 
```

# vb.net - 圆内控制线

> ID：13393168
> 
> 赞同：0
> 
> 时间：2012-11-15T07:33:10.600
> 
> 标签：vb.net, winforms

我想做的事：

假设我用鼠标按住这条线**：**

![在此处输入图像描述](../Images/1a7f338f3e2cf584876928b86cd05787.png)

当我移动线时，线没有超出圆圈范围。

我不想做的事情：

![在此处输入图像描述](../Images/8a5575eff6c4ee3bd9fe9d3d54c9d4c8.png)

如您所见，这条线超出了圆圈范围。

**当**我用鼠标握住他时，我想画线并让他保持在我的圈子内。

我怎么能做类似图片1的事情？

这是代码：

```
Dim g As Graphics
Private Sub Form1_MouseMove(ByVal sender As Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles Me.MouseMove
    Dim pt As New Drawing.Point
    pt.X = e.X
    pt.Y = e.Y
    g = Me.CreateGraphics
    Dim myPen = New Pen(Color.Red)
    myPen.Width = 1
    g.Clear(Color.White)
    g.DrawLine(myPen, 100, 100, pt.X, pt.Y)

End Sub 
```

# c# - 仅将数据集的更改行添加到数据库表

> ID：13393172
> 
> 赞同：0
> 
> 时间：2012-11-15T07:33:19.663
> 
> 标签：c#, sql, winforms

在我的项目中，我想使用 C# 更新数据库表。Database表的数据也在DataSet中。每当我更改 DataSet 行值然后单击按钮时，数据库表都应该更新。

目前，我正在删除所有数据库表（DELETE 查询），然后再次向其中添加 DataSet 数据（INSERT 查询）。这真是太可怕了。（我后来意识到这一点）

如何将 DataSet 的行添加到已更改的数据库表中？我不知道从哪里开始。我尝试给出查询“插入”，它使数据库表中的数据加倍。或者还有其他方法吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:39:16.623

你的意思是这样的吗？

```
protected void Page_Load(object sender, EventArgs e)
 {
  DataTable dtDocOperations = new DataTable();
  dtDocOperations.Columns.Add("ButtonRole");
  dtDocOperations.Columns.Add("OperattionCode");
  dtDocOperations.Rows.Add(new Object[] { "MR", "V" });
  dtDocOperations.Rows.Add(new Object[] { "MR", "A" });
  dtDocOperations.Rows.Add(new Object[] { "MR", "R" });
  Session["DocOperattions"] = dtDocOperations;
  dtDocOperations.AcceptChanges(); // once AcceptChanges called then you can get the modified rows

  dtDocOperations.Rows[0]["ButtonRole"] = "mr1";
  DataTable dt = dtDocOperations.GetChanges(DataRowState.Modified);
 } 
```

和

```
dtDocOperations.AcceptChanges(); 
```

和

```
 DataTable dt = dtDocOperations.GetChanges(DataRowState.Modified); 
```

您可以使用修改后的行填充数据表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:41:23.140

查看 DataSet.AcceptChanges() 方法。

这是msdn文章的详细信息

[http://msdn.microsoft.com/en-us/library/system.data.dataset.acceptchanges.aspx](http://msdn.microsoft.com/en-us/library/system.data.dataset.acceptchanges.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:42:44.670

需要注意的几点：
1\. 您可能希望使用 ORM： [Entity Framework](http://msdn.microsoft.com/en-us/data/ef.aspx)、[NHibernate](http://nhforge.org/)、[Dapper](http://code.google.com/p/dapper-dot-net/)是一些需要考虑的解决方案。
2\. 如果您使用 Gridview 或其他一些控件，它们通常可以自动处理这种情况以进行简单的数据绑定。
3.您可以随时手动对每个主键运行查询以检查ID是否存在。如果是则运行更新，如果不是，则运行插入。

# java - 用于 Java 的灵活的低级 http 库？

> ID：13393173
> 
> 赞同：1
> 
> 时间：2012-11-15T07:33:29.900
> 
> 标签：java, http, apache-httpclient-4.x, squid, purge

我试图清除[squid](http://www.squid-cache.org/)上的缓存，为了做到这一点，我需要执行奇怪的 http 请求。

请求应如下所示：

```
PURGE www.cached:port/params HTTP/1.1 
```

其中`www.cached:port/params`代表我想从缓存中删除的值。

所以，这里是有趣的事情——应该打开到 squid 服务器的连接，而不是`www.cached:port/params`.

因此，整个序列将是：

1.  打开与 squid 服务器的连接。
2.  通过`PURGE`请求。
3.  读取结果。
4.  关

我试过apache httpclient。我可以重写请求方法以使其发送`PURGE`，但库总是打开与它在 http 请求中传递的同一主机的连接（打开连接`www.cached`，执行 a `PURGE` `www.cached`），它对我不起作用。

我可以通过使用纯套接字来做到这一点，但是找到一个可以正常工作的库会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:31:28.733

首先，我看不出为什么不能用 Apache HttpClient 来完成。您是否将客户端配置为使用“http.route.default-proxy”参数通过代理执行请求？

无论如何，如果您不介意使用较低的组件，这就是使用 Apache HttpCore（阻塞）可以完成的相同操作

```
 HttpProcessor httpproc = new ImmutableHttpProcessor(new HttpRequestInterceptor[] {
            new RequestContent(),
            new RequestTargetHost(),
            new RequestConnControl(),
            new RequestUserAgent()});

    HttpRequestExecutor httpexecutor = new HttpRequestExecutor();
    ConnectionReuseStrategy connStrategy = new DefaultConnectionReuseStrategy();

    HttpContext context = new BasicHttpContext();
    HttpHost target = new HttpHost("www.cached", port);
    HttpHost proxy = new HttpHost("squid", 8080);

    HttpParams params = new BasicHttpParams();
    HttpRequest request = new BasicHttpRequest("PURGE", "www.cached:port/params");

    DefaultHttpClientConnection conn = new DefaultHttpClientConnection();
    try {
        if (!conn.isOpen()) {
            Socket socket = new Socket(proxy.getHostName(), proxy.getPort());
            conn.bind(socket, params);
        }
        context.setAttribute(ExecutionContext.HTTP_CONNECTION, conn);
        context.setAttribute(ExecutionContext.HTTP_TARGET_HOST, target);

        httpexecutor.preProcess(request, httpproc, context);
        HttpResponse response = httpexecutor.execute(request, conn, context);
        httpexecutor.postProcess(response, httpproc, context);

        // do something useful with the response

        if (!connStrategy.keepAlive(response, context)) {
            conn.close();
        } else {
            // Connection could be kept alive
        }
    } finally {
        conn.close();
    }
} 
```

我相信其他 HTTP 库也是如此

# qt - 在 Qt 中创建旋转进度条

> ID：13393174
> 
> 赞同：4
> 
> 时间：2012-11-15T07:33:33.593
> 
> 标签：qt, qml

在 Qt 中创建旋转进度条，我想显示进度条，就像加载时出现的进度条一样。请查找图片![在此处输入图像描述](../Images/f399f13303d9765d12953525b6003e40.png)

我的代码是这样的

```
 QProgressBar *pgbar = new QProgressBar();
    pgbar->resize(500,25);
    pgbar->setOrientation(Qt::Horizontal);
    pgbar->setRange(0,99);
    pgbar->setValue(10);
    pgbar->show();
    installOnDevice(destinationSavePath);
    pgbar->hide(); 
```

这里`installOnDevice(destinationSavePath);`需要时间来处理。目前我正在展示`Processbar`，我不想展示`processbar`。我不能用一些显示`loading image`（旋转）或类似的东西来代替吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T10:02:30.597

查看[Twitter 移动](http://qt-project.org/doc/qt-4.8/demos-declarative-twitter.html)示例应用程序。在文件[demos/declarative/twitter/qml/twitter/TwitterCore/Loading.qml](http://qt-project.org/doc/qt-4.8/demos-declarative-twitter-qml-twitter-twittercore-loading-qml.html)中，QML 中有一个您想要实现的确切目标的实现：

```
import QtQuick 1.0

Image {
    id: loading
    source: "images/loading.png"
    NumberAnimation on rotation {
         from: 0
         to: 360
         running: loading.visible == true
         loops: Animation.Infinite
         duration: 900
     }
} 
```

* * *

## 更新 1（反映新发布的代码）：

仅在基于 Qt Widgets 的应用程序中使用 QML 作为旋转负载指示器对我来说似乎有点过分了。我将 a[`QMovie`](http://qt-project.org/doc/qt-4.8/qmovie.html)与 a 结合使用[`QLabel`](http://qt-project.org/doc/qt-4.8/qlabel.html)来显示包含微调器的动画 GIF 图像：

```
QMovie* spinnerMovie = new QMovie(":/spinner.gif");
QLabel *spinnerLabel = new QLabel(this);
spinnerLabel->setMovie(spinnerMovie);
spinnerMovie->start(); 
```

您还应该查看[Qt 资源系统](http://qt-project.org/doc/qt-4.8/resources.html)的文档，以了解如何将图像与您的应用程序捆绑在一起以及如何加载它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:32:31.753

为了更改光标，您必须使用[setCursor](http://doc.qt.digia.com/qt/qwidget.html#cursor-prop)函数或[setOverrideCursor](http://doc.qt.digia.com/qt/qapplication.html#setOverrideCursor)才能将其应用于应用程序。您可以使用[QPixmap](http://doc.qt.digia.com/qt/qcursor.html#QCursor-4)作为构造函数参数来构造您想要的任何游标。

为了实现动画效果，您需要一个[QTimer](http://doc.qt.digia.com/qt/qtimer.html)。在每个计时器事件中，您都必须更改光标的像素图以提供动画的感觉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T03:59:16.853

尝试使用纯 C++ 实现的 Qml Busy Indicator：http: [//qt-project.org/wiki/Busy-Indicator-for-QML](http://qt-project.org/wiki/Busy-Indicator-for-QML)

# sugarcrm - 在 SugarCRM SOAP API 中，如何获取机会状态枚举的所有可能值？

> ID：13393178
> 
> 赞同：1
> 
> 时间：2012-11-15T07:33:50.597
> 
> 标签：sugarcrm

是否有 API 调用来获取机会状态/舞台名称枚举的所有可能值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:07:41.210

这是通过 REST 完成的代码，它也应该几乎直接转换为 SOAP。

```
$parameters = array(
    'session' => $sessionId,
    'module_name' => 'Opportunities',
    );
$json = json_encode($parameters);
$postArgs = array(
                'method' => 'get_module_fields',
                'input_type' => 'JSON',
                'response_type' => 'JSON',
                'rest_data' => $json
                );
curl_setopt($curl, CURLOPT_POSTFIELDS, $postArgs);

// Make the REST call, returning the result
$response = curl_exec($curl);
if (!$response) {
    die("Connection Failure.\n");
}

// Convert the result from JSON format to a PHP array
$result = json_decode($response);
if ( !is_object($result) ) {
    die("Error handling result.\n");
}
if ( !isset($result->module_name) ) {
    die("Error: {$result->name} - {$result->description}\n.");
}

var_dump($result->module_fields->sales_stage->options);
exit; 
```

# configuration - 使用 NLog 记录到可用驱动器？

> ID：13393180
> 
> 赞同：4
> 
> 时间：2012-11-15T07:34:05.720
> 
> 标签：configuration, nlog

如果 d: 存在，是否可以将 NLog 配置为将日志写入 d:\logs，如果 d: 不存在，则改为登录到 c:\logs？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:53:25.527

我认为您可以结合使用自定义 LayoutRenderer 和 XML 配置来做到这一点。在 XML 配置中，您可以使用 LayoutRenderers 来指定文件名。例如：

```
<target name="logfile" xsi:type="File" fileName="${basedir}/${shortdate}.log" /> 
```

FileTarget 对象将根据`${basedir}`和`${shortdate}`布局渲染器的值创建一个文件。

您可以轻松编写自定义 LayoutRenderer，也许将其称为“FindAvailableDrive”，并像这样配置它：

```
<target name="logfile" xsi:type="File" fileName="${FindAvailableDrive}/logs/${shortdate}.log" /> 
```

FindAvailableDrive LayoutRender 可以以驱动器号开头，例如“C:”​​，然后更改直到找到有效的驱动器。为了更进一步，FindAvailableDrive 可以采用一个或多个参数来帮助定义如何搜索有效驱动器：

```
<target name="logfile" xsi:type="File" fileName="${FindAvailableDrive:Drives=DC}/logs/${shortdate}.log" /> 
```

在这种情况下，FindAvailableDrive 将检查驱动器 D，然后检查驱动器 C。

这是一个示例（未经测试），说明如何编写这样的 LayoutRenderer（请注意，这是基于我针对 NLog 1.0 编写的现有 LayoutRender，因此其中一些对于 NLog 2.0 可能不是必需的（或有效的））：

```
 [LayoutRenderer("FindAvailableDrive")]
  class FindAvailableDriveLayoutRenderer : LayoutRenderer
  {
    private string validDrive;

    [DefaultParameter]
    public string DriveCandidates { get; set; }

    protected override void Append(StringBuilder builder, LogEventInfo logEvent)
    {
      builder.Append(FindValidDrive());
    }

    protected override int GetEstimatedBufferSize(LogEventInfo logEvent)
    {
      return 2;
    }

    private string FindValidDrive()
    {
      if (!String.IsNullOrEmpty(validDrive)) return validDrive;

      if (String.IsNullOrEmpty(DriveCandidates))
      {
        if (Directory.Exists("C:"))
          validDrive = "C:";
        else
        if (Directory.Exists("D:"))
          validDrive = "D:";
        //And so on if you want to continue to check for valid drives.
        return validDrive;
      }

      validDrive = DriveCandidates.Select(c => string.Format("{0}:", c).Where(d => Directory.Exists(d)).FirstOrDefault();

      //What to do if no drives exists?

      return validDrive;
    }
  } 
```

[您可以在此处](https://stackoverflow.com/questions/4091606/most-useful-nlog-configurations/4098047#4098047)查看我对另一个问题的回答，了解有关如何在 NLog 中编写和使用自定义 LayoutRenderer 的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:06:12.700

是的，这是可能的，但不是在 xml 配置中：做这样的事情，你的程序被加载：vb.net 代码：

```
 Dim mt As NLog.Targets.FileTarget= Nothing
    For Each Target In LogManager.Configuration.AllTargets
        If Target.Name Like "YourTargetNameIntheXML" Then
            mt = DirectCast(Target, NLog.Targets.FileTarget)
        End If
    Next

if isnothing(mt)=false then
        mt.FileName="YourPath"
Check here if the drive exists, if not, change the path to your liking.
End If 
```

您可能需要重新加载配置：Logger.Factory.Configuration.Reload()

也许这行不通，您可以尝试在代码中构建一个新的文件目标并将其添加到 nlog。以下是 Memorytarget 的示例：

```
Dim ThisLog As New MemoryTarget

ThisLog.Name = "PPTXLOG"
ThisLog.Layout = "${threadid} | ${time} | ${level:uppercase=true} | ${logger} | ${message} | ${exception}"

Logger.Factory.Configuration.AddTarget("PPTXLOG", ThisLog)
'the Logrule is needed to "route" the logs to your new target

    Dim LogRule As New LoggingRule("*", LogLevel, ThisLog)

    Logger.Factory.Configuration.LoggingRules.Add(LogRule)
    Logger.Factory.Configuration.Reload() 
```

# pdf - PDF报告验证自动化

> ID：13393182
> 
> 赞同：1
> 
> 时间：2012-11-15T07:34:31.890
> 
> 标签：pdf, automation

在我们的团队中，我们需要验证从应用程序生成的 pdf 报告。这些报告因客户而异。

是否有任何自动化工具可以在没有任何人工干预的情况下比较这些报告？

我们想根据预期的输出内容来验证 pdf 文档中的每个元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:47:21.587

基本上，如果您对在 pdf 文件上声明文本感兴趣，请尝试搜索一些 API 或开源库以将 PDF 转换为文本。

一旦将它们转换为文本，就很容易检查它的内容或进行文件比较。

另一种方法是将实际的 PDF 文件与预期的 PDF 文件进行比较。同样，您可以利用一些开源库来比较两个 PDF 文件并判断内容是否匹配。

比较 pdf 文件的另一种方法是比较两个 PDF 文件的校验和。如果相同，则表示实际 PDF 文件与预期的 PDF 文件匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T10:24:15.800

试试 Verifaya Studio，它支持 PDF 自动化，它是免费的，可以从[http://studio.verifaya.com下载](http://studio.verifaya.com)

# health-monitoring - 这是针对健康课程的，我还没有找到答案

> ID：13393183
> 
> 赞同：-1
> 
> 时间：2012-11-15T07:34:47.257
> 
> 标签：health-monitoring

在锻炼中训练所有主要肌肉群时，应该遵循什么样的锻炼顺序？

A. 小团体之前的大肌肉群 B. 单关节之前的多关节练习 C. 重量更重的多次重复 D. a 和 b

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:42:30.703

我通常从一些 HTML 开始，然后是 jQuery，最后以 C# 和 SQL 结束。

# github - Github 代币不工作？

> ID：13393188
> 
> 赞同：2
> 
> 时间：2012-11-15T07:34:57.543
> 
> 标签：github

我创建了一个像这里描述的令牌 - [https://help.github.com/articles/git-over-http-using-oauth-token](https://help.github.com/articles/git-over-http-using-oauth-token)。这没关系。

但是当我想在文档中使用它时：

```
git clone https://mytoken@github.com/mylogin/myrepo.git 
```

我得到：

```
fatal: https://mytoken@github.com/mylogin/myrepo.git/info/refs not found: did you run git update-server-info on the server? 
```

我有一种感觉，我从 Github 文档中尝试的所有内容都不起作用:(我做错了什么或者文档已经过时或者没有描述一些应该很常见以至于我应该已经知道的步骤？:)

我正在使用私有存储库，而不是公共存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T19:13:20.170

问题是我在范围部分使用我的存储库名称而不是单词 repo 创建了令牌。

# python - 以编程方式将文件添加到 Django ImageField

> ID：13393191
> 
> 赞同：5
> 
> 时间：2012-11-15T07:35:20.093
> 
> 标签：python, django, urllib2

我正在尝试从 URL 下载图像文件，然后将该图像分配给 Django ImageField。我已经按照这里的例子[和](https://stackoverflow.com/questions/1308386/programmatically-saving-image-to-django-imagefield?lq=1)[这里](

我的模型，在相关部分，如下所示：

```
class Entity(models.Model):

     logo = models.ImageField(upload_to=_getLogoPath,null=True) 
```

_getLogoPath 回调非常简单：

```
def _getLogoPath(self,filename):
    path = "logos/" + self.full_name
    return path 
```

作为自定义 django-admin 命令的一部分，获取和保存图像文件的代码也很简单，我计划将其作为定期安排的 cron 作业运行：

```
...
img_url = "http://path.to.file/img.jpg"
img = urllib2.urlopen(img)
entity.logo.save(img_filename,img,True)
... 
```

当我运行这个时，我得到这个错误：

```
AttributeError: addinfourl instance has no attribute 'chunks' 
```

我也尝试添加`read()`到图像中，但导致了类似的错误。我也尝试将图像写入临时文件，然后尝试上传，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T08:28:44.617

如果您[阅读文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.FileField)，您会看到第二个参数`entity.logo.save`需要是`django.core.files.File`

因此，要检索图像然后使用图像字段保存​​它，您需要执行以下操作。

```
from django.core.files import File

response = urllib2.urlopen("http://path.to.file/img.jpg")
with open('tmp_img', 'wb') as f:
    f.write(response.read())

with open('tmp_img', 'r') as f:
    image_file = File(f) 
    entity.logo.save(img_filename, img_file, True)
os.remove('tmp_img') 
```

您从调用返回的对象`urlopen`不是图像本身。它的`read`方法将返回二进制图像数据。

# proxy - LDAP 服务器 (OpenLDAP 2.4.23) 搜索查询挂起/永不停止

> ID：13393194
> 
> 赞同：1
> 
> 时间：2012-11-15T07:35:33.357
> 
> 标签：proxy, active-directory, freeze, openldap

我一直在寻找答案将近两个星期，但没有找到解决方案。我在 VPC 网络内的亚马逊 EC2 linux 机器上有一个 OpenLDAP slapd 服务。我使用它作为我们的 Active Directory 的代理。我不确定配置是否正常 - 我不是网络/ldap 专家。

每次我对代理运行 ldapsearch 时，ldapsearch 都会返回结果，但**没有**结束摘要，例如：

> 搜索结果
> search: 2
> result: 0 Success
> numResponses: 2
> numEntries: 1

只有最后一个属性被写入输出......它无休止地挂起，所以我无法将新命令放到提示符下。日志随着以下条目不断增长：

> 11 月 14 日 15:53:55 ip-10-0-0-121 slapd[21936]：守护进程：epoll:listen=7 active_threads=1 tvp=zero Nov 14 15:53:55 ip-10-0-0-121 slapd[21936]：守护进程：epoll：listen=8 active_threads=1 tvp=zero Nov 14 15:53:55 ip-10-0-0-121 slapd[21936]：守护进程：epoll：listen=9 active_threads=1 tvp = 零 11 月 14 日 15:53:56 ip-10-0-0-121 slapd[21936]：守护进程：epoll：listen=7 active_threads=1 tvp=0 11 月 14 日 15:53:56 ip-10-0-0 -121 slapd[21936]：守护进程：epoll：listen=8 active_threads=1 tvp=zero Nov 14 15:53:56 ip-10-0-0-121 slapd[21936]：守护进程：epoll：listen=9 active_threads= 1 tvp=011 月 14 日 15:53:57 ip-10-0-0-121 slapd[21936]：守护进程：epoll：listen=7 active_threads=1 tvp=011 月 14 日 15:53:57 ip-10-0 -0-121 slapd[21936]：守护进程：epoll：listen=8 active_threads=1 tvp=zero Nov 14 15:53:57 ip-10-0-0-121 slapd[21936]：守护进程：epoll：listen=9 active_threads=1 tvp=zero Nov 14 15:53:58 ip-10-0-0-121 slapd[21936]：守护进程：epoll：listen=7 active_threads=1 tvp=zero Nov 14 15:53:58 ip-10-0-0-121 slapd[21936]：守护进程：epoll：listen=8 active_threads=1 tvp=zero Nov 14 15:53:58 ip-10-0-0-121 slapd[21936]：守护进程： epoll：listen=9 active_threads=1 tvp=zero

我的 slapd.d 配置文件是：

**cn=config.ldif**

> dn: cn=config
> objectClass: olcGlobal
> cn: config
> olcConfigFile: /etc/openldap/slapd.conf.bak
> olcConfigDir: /etc/openldap/slapd.d
> olcAllows: bind_v2
> olcArgsFile: /var/run/openldap/slapd.args
> olcAttributeOptions: lang-
> olcAuthzPolicy: none
> olcConcurrency: 0
> olcConnMaxPending: 100
> olcConnMaxPendingAuth: 1000
> olcGentleHUP: FALSE
> olcIdleTimeout: 5
> olcLogLevel: -1
> olcIndexSubstrIfMaxLen: 4
> olcIndexSubstrIfMinLen: 2
> olcIndexSubstrAnyLen: 4
> olcIndexSubstrAnyStep: 2
> olcIndexIntLen: 4
> olcLocalSSF: 71
> olcPidFile: /var/run/openldap/slapd.pid
> olcReadOnly: FALSE
> olcReverseLookup: FALSE
> olcSaslSecProps: noplain,noanonymous
> olcSockbufMaxIncoming: 262143
> olcSockbufMaxIncomingAuth: 16777215
> olcThreads: 16
> olcTLSCACertificatePath: /etc/openldap/certs
> olcTLSCertificateFile: "OpenLDAP Server"
> olcTLSCertificateKeyFile: /etc /openldap/certs/password
> olcTLSVerifyClient：从不
> olcToolThreads：1
> olcWriteTimeout：0

**olcDatabase={0}config.ldif**

> dn: olcDatabase={0}config
> objectClass: olcDatabaseConfig
> olcDatabase: {0}config
> olcAccess: {0}to * by dn.base="gidNumber=0+uidNumber=0,cn=peercred,cn=external,cn=auth"由 * 管理
> olcAddContentAcl: TRUE
> olcLastMod: TRUE
> olcMaxDerefDepth: 15
> olcReadOnly: FALSE
> olcRootDN: cn=config
> olcSyncUseSubentry: FALSE
> olcMonitoring: FALSE
> structureObjectClass: olcDatabaseConfig

**olcDatabase={1}ldap.ldif**

> dn: olcDatabase={1}ldap
> objectClass: olcDatabaseConfig
> objectClass: olcLDAPConfig olcModuleload: back_ldap.la
> olcDatabase: {1}ldap
> olcSuffix: dc=domain,dc=com
> olcAccess: {0}to * by * read
> olcAccess: {1}to * by * read
> olcReadOnly: TRUE
> olcRootDN: uid=admin,dc=domain,dc=com
> olcRootPW: secret
> olcSizeLimit: 500
> olcDbURI: ldap://10.192.0.10
> olcDbRebindAsUser: TRUE
> olcIdleTimeout: 5
> olcDbACLBind: bindmethod=simple timeout=5 network -timeout=5 binddn="CN=user,OU=Users,DC=domain,DC=com" credentials="secret"

并创建默认的**olcDatabase={-1}frontend.ldif**。

我找到了与数据库索引问题相关的答案，但由于我没有在代理中使用数据库，所以这不是问题。直接通过ldapsearch查询AD也不挂。

任何想法为什么它会挂起？

# windows - 使用命令行完成后关闭程序

> ID：13393197
> 
> 赞同：3
> 
> 时间：2012-11-15T07:35:54.333
> 
> 标签：windows, batch-file, cmd

我有一个打开`.exe`程序的批处理文件。该程序是`fileuploader.exe`.

当上传过程使用命令行完成时，有没有办法关闭这个程序？

因为程序生成一个输出文件，我需要这个输出来进行另一个命令行操作。

我试过这个：

```
start fileuploader.exe filetoupload  
:loop  
taskkill /im fileuploader.exe   
goto loop 
```

当程序正在运行并`taskkill`发送关闭程序的请求时，它会显示以下消息：

> 正在上传您要退出吗？

循环执行此操作，直到上传完成并`taskkill`关闭 Fileuploader。但我不喜欢这个解决方案。

有没有办法`taskkill`在一定时间后执行？例如每 2 分钟一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:46:01.570

> 有没有办法在一定时间后执行taskkill？（例如每 2 分钟一次？）

您可以使用 ping 命令创建延迟。使用所需的超时值 (ms) ping 无法到达的地址一次。此示例将在每个 taskkill 之前等待 2 分钟。

```
start fileuploader.exe filetoupload  
:loop  
ping 1.1.1.1 -n 1 -w 120000 >NUL
taskkill /im fileuploader.exe   
goto loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:42:27.567

此外，还有这种方法，它可以在窗口标题中为您提供倒计时：

```
@ECHO off
TITLE Initial title
SET TITLETEXT=Countdown the uploader
:: start of script
start fileuploader.exe filetoupload  
:loop  
CALL sleepMe 120
taskkill /im fileuploader.exe   
goto loop
:: rest of script
GOTO :END
:: Function
:sleepMe ARG
ECHO Pausing...
FOR /l %%a in (%~1,-1,1) do (TITLE %TITLETEXT% -- time left %%as&PING.exe -n 2 -w 1 127.0.0.1>nul)
EXIT /B 0
:END
pause 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T14:12:29.313

如果 File&Image Uploader 在[这里](http://z-o-o-m.eu/)，那么它可能会[在下一个版本](http://forum.z-o-o-m.eu/index.php/topic,3878.msg13797.html#msg13797)中实现，否则`ping`最好的解决方案是没有额外的工具。

在许多计算机上，您会`sleep.exe`从 Windows 资源工具包或 Powershell 脚本中找到嵌入的`Start-Sleep`

高温高压

# ruby-on-rails - 在 ec2 上设置 rails 应用程序的基本安装

> ID：13393198
> 
> 赞同：2
> 
> 时间：2012-11-15T07:35:55.950
> 
> 标签：ruby-on-rails, amazon-ec2, installation

我正在使用 ec2 的微型实例来学习和测试我的 rails 应用程序，因为我过去从未使用过 ec2。我创建了帐户并能够 ssh。所以当我做 $pwd /home/ubuntu

现在做了一个 scp 并导入了项目。我无法通过 web 访问 ec2 实例。我在网上浏览了一下，发现端口应该是开放的。

```
 ~$ netstat -anp | grep LISTEN
        (No info could be read for "-p": geteuid()=1000 but you should be root.)
        tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      -               
        tcp        0      0 127.0.0.1:3306          0.0.0.0:*               LISTEN      -               
        tcp        0      0 127.0.0.1:6379          0.0.0.0:*               LISTEN      -               
        tcp6       0      0 :::22                   :::*                    LISTEN      -               
        unix  2      [ ACC ]     STREAM     LISTENING     7958     -                   /var/run/acpid.socket
        unix  2      [ ACC ]     STREAM     LISTENING     7726     -                   /var/run/dbus/system_bus_socket
        unix  2      [ ACC ]     STREAM     LISTENING     6185     -                   @/com/ubuntu/upstart
        unix  2      [ ACC ]     STREAM     LISTENING     40164    -                   /var/run/mysqld/mysqld.sock
        unix  2      [ ACC ]     SEQPACKET  LISTENING     6374     -                   /run/udev/control 
```

$netstat -ln | grep 8080 没有反应

当我做

```
 $curl -v xx.xxx.xx.xxx
        * About to connect() to xx.xxx.xx.xxx port 80 (#0)
        *   Trying xx.xxx.xx.xxx...
        * Connection refused
        * couldn't connect to host
        * Closing connection #0
        curl: (7) couldn't connect to host 
```

还有什么其他的基本安装要做。正如我所见，需要安装 apache，但会寻求更清晰的解决方案。

编辑： Ruby、rails、rvm 已安装并且示例应用程序正在运行..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:57:33.730

您必须在 AWS 管理控制台中为您的实例配置一个安全组才能打开端口 80。这是一个基本教程：[http ://cloud.lib.wfu.edu/blog/tech/2010/09/28/managing- amazon-ec2-servers 上的防火墙规则/](http://cloud.lib.wfu.edu/blog/tech/2010/09/28/managing-firewall-rules-on-amazon-ec2-servers/)

还要确保 Webrick 在端口 80 上运行，默认为 8080 或 3000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T12:26:37.953

我只需要在端口 80 上启动 Thin/webrick。使用

```
 rvmsudo thin start -p 80 -d 
```

所以现在服务器已经启动了。

# java - 如何修复 Java 7 Files.write 错误？

> ID：13393212
> 
> 赞同：3
> 
> 时间：2012-11-15T07:37:16.020
> 
> 标签：java, file-io, java-7, java.nio.file

我的代码写入文件，写入文件时出现拒绝访问错误。

```
Files.write(path, myString.getBytes()); 
```

例外是休耕

```
FAILED to write to file.
java.nio.file.AccessDeniedException: 
    at sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:83)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:97)
    at sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:102)
    at sun.nio.fs.WindowsFileSystemProvider.newByteChannel(WindowsFileSystemProvider.java:229)
    at java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:430)
    at java.nio.file.Files.newOutputStream(Files.java:170)
    at java.nio.file.Files.write(Files.java:3058) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:11:26.630

抱歉，这不是一个完整的答案，但它不适合对该问题的评论。我希望它有所帮助。

来自[https://superuser.com/questions/342276/cannot-save-in-hard-disk-drive-c](https://superuser.com/questions/342276/cannot-save-in-hard-disk-drive-c)

> 从 Windows XP 开始，没有管理员权限就无法写入系统分区的根目录。但是，出于安全原因，Windows Vista 和 Windows 7 默认情况下即使以管理员身份登录也不会授予管理员权限，除非明确提升到此权限级别，这可能需要您单击[UAC 提示符](http://en.wikipedia.org/wiki/User_Account_Control)。

由于您没有尝试写入 的根目录`C:\`，因此我认为这不是权限问题，因此可能另一个应用程序已锁定该文件。您是否`.txt`在另一个应用程序（例如记事本）中打开了该文件？

检查打开[文件句柄](http://en.wikipedia.org/wiki/File_handle)的一种方法是使用[**Process Explorer**](http://technet.microsoft.com/en-gb/sysinternals/bb896653.aspx)。您可以使用`Ctrl`+`F`并搜索文件的完整路径或名称，Process Explorer 将列出所有具有该文件的打开句柄的进程。`Ctrl`您可以使用+查看任何应用程序的所有句柄`H`，甚至可以从此处关闭句柄。注意：如果您在关闭句柄时获得拒绝访问权限，请选择*文件 → 显示所有进程的详细信息*，然后重试。

# jquery - claviska/jquery-selectBox 如何显示默认值？

> ID：13393213
> 
> 赞同：0
> 
> 时间：2012-11-15T07:37:21.100
> 
> 标签：jquery

我使用 claviska jquery 选择框 [https://github.com/claviska/jquery-selectBox](https://github.com/claviska/jquery-selectBox)

以下是代码

```
<div class="section">
    <label>Location</label>
    <div>
        <select class="small selectBox" id="GeoLocation"style="display: none; padding: 6px;">
            <option value="1">London</option>
            <option value="2">Madrid</option>
            <option value="3">Paris</option>
            <option value="4">New York</option>
        </select>
    </div>
</div> 
```

当列表是静态的时我没有问题，它会适当地显示列表框。我的问题是，如何使用从服务器端获取的信息在选择框中设置默认值。

默认情况下，我将“伦敦”作为默认值。

我在 JS `var id=2`（马德里）中的支持，我如何设置选择框以显示“马德里”作为默认值？

如何在 JQuery 中构建列表？

遵循正在生成的 HTML 是默认的（选择伦敦）

```
<div>
    <select class="small selectBox" id="GeoLocation" style="display: none; padding: 6px;">
        <option value="1">London</option>
        <option value="2">Madrid</option>
        <option value="3">Paris</option>
        <option value="4">New York</option>
    </select>
    <a class="selectBox small selectBox-dropdown" style="width: 62px; display: inline-block;" title="" tabindex="0">
        <span class="selectBox-label" style="width: 35px;">London</span>
        <span class="selectBox-arrow"></span></a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:39:41.020

你可以试试这个方法

```
var id=2;
// Select the option with the corresponding value..
// capture the text or html inside it

var city = $('#GeoLocation option[value="'+ id+ '"]').text();​

// Set the text to the text in select    
$('.selectBox-label').text(city); 
```

**[小提琴](http://jsfiddle.net/sushanth009/74Vf2/1/)**

# ios - 是否可以让我的 iOS 应用程序的组件一直运行？

> ID：13393214
> 
> 赞同：1
> 
> 时间：2012-11-15T07:37:30.820
> 
> 标签：ios, service, messaging

我必须在我的应用程序中实现一个使用 XMPP 的消息传递系统。即使用户退出了应用程序，消息传递系统也应该正在运行。我正在看的是类似于 facebook iOS 应用程序显示新通知的方式。

即使应用程序没有运行，是否可以让我的应用程序的某个组件在后台运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:50:37.043

只有少数应用程序可以真正在后台运行。引用 iOS App 编程指南：

> *   在后台向用户播放有声内容的应用程序，例如音乐播放器应用程序
> *   让用户随时了解其位置的应用程序，例如导航应用程序
> *   支持互联网协议语音 (VoIP) 的应用程序
> *   需要下载和处理新内容的报亭应用
> *   从外部配件接收定期更新的应用程序

您的应用程序两者都不是，因此您唯一的选择是使用 Apple 推送通知服务，就像 Facebook 客户端应用程序一样。

# sql - PL/SQL-更新员工工资，加薪金额错误

> ID：13393215
> 
> 赞同：1
> 
> 时间：2012-11-15T07:37:30.687
> 
> 标签：sql, database, plsql, updating

我需要更新部门 40 和 70 员工的工资。部门 40 的所有员工将增加 10%，而部门 70 的员工将增加 15%。

我有 1 名来自 70 部门的员工，他的薪水为 10000，因此他的工资将增加 15%。我预计他的工资会变成 11500，但它变成了 13225。我不明白为什么。部门 40 的员工加薪是正确的，只有部门 70 的员工是错误的。

这是 pl/sql 块..

```
SET serveroutput ON
DECLARE

  CURSOR cur_emp
  IS
    SELECT * FROM employees WHERE department_id = 40 OR department_id = 70;
  rec_emp cur_emp%rowtype;
BEGIN
  OPEN cur_emp;
  LOOP
    FETCH cur_emp INTO rec_emp;
    IF rec_emp.department_id = 40 THEN
      UPDATE employees
      SET salary                = salary + (salary * 0.1)
      WHERE employee_id         = rec_emp.employee_id;
    elsif rec_emp.department_id = 70 THEN
      UPDATE employees
      SET salary        = salary + (salary * 0.15)
      WHERE employee_id = rec_emp.employee_id;
    END IF;
    EXIT
  WHEN cur_emp%notfound;
  END LOOP;
  CLOSE cur_emp;
END;
/ 
```

谁能帮我找出这个问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T07:41:09.227

不需要存储过程：

```
update employees
   set salary = case 
                  when department_id = 40 then salary * 1.10
                  when department_id = 70 then salary * 1.15
                  else salary -- not strictly necessary. just to make sure.
                end
where department_id in (40,70); 
```

如果您坚持以缓慢的方式（PL/SQL 中的循环）使用 an`UPDATE ... WHERE CURRENT OF`可能会比“无关”更新更快。

您的代码的真正问题是您离开循环“为时已晚”。即使游标在获取后没有返回任何内容，您仍然会进行更新。您应该将IF 子句和更新放在`EXIT WHEN ...` **前面。**

```
DECLARE

  CURSOR cur_emp
  IS
    SELECT * FROM employees WHERE department_id = 40 OR department_id = 70;
  rec_emp cur_emp%rowtype;
BEGIN
  OPEN cur_emp;
  LOOP
    FETCH cur_emp INTO rec_emp;

    EXIT WHEN cur_emp%notfound; -- **** leave the loop right here, BEFORE doing the update *****

    IF rec_emp.department_id = 40 THEN
      UPDATE employees
      SET salary                = salary + (salary * 0.1)
      WHERE employee_id         = rec_emp.employee_id;
    elsif rec_emp.department_id = 70 THEN
      UPDATE employees
      SET salary        = salary + (salary * 0.15)
      WHERE employee_id = rec_emp.employee_id;
    END IF;

  END LOOP;
  CLOSE cur_emp;
END;
/ 
```

一种更有效的方法是使用可更新的游标：

```
DECLARE

  CURSOR cur_emp
  IS
    SELECT department_id, salary 
    FROM employees 
    WHERE department_id in (40,70)
    FOR UPDATE OF salary;

  rec_emp cur_emp%rowtype;
  new_sal number(12,2);
BEGIN
  OPEN cur_emp;
  LOOP
    FETCH cur_emp INTO rec_emp;

    EXIT WHEN cur_emp%NOTFOUND;

    IF rec_emp.department_id = 40 THEN
      new_sal := rec_emp.salary * 1.10;
    elsif rec_emp.department_id = 70 THEN
      new_sal := rec_emp.salary * 1.15;
    END IF;

    UPDATE employees
       SET salary  = new_sal
    WHERE CURRENT OF cur_emp;

  END LOOP;
  CLOSE cur_emp;
END;
/ 
```

使用 the`WHERE CURRENT OF`实际上会更清楚地显示您的错误，因为`invalid rowid`如果您在更新`exit` *后放置 the ，循环将失败。*

# oracle - 反透视表脚本错误

> ID：13393225
> 
> 赞同：3
> 
> 时间：2012-11-15T07:38:39.947
> 
> 标签：oracle, unpivot

我有一个名为 rp_resolution_master 的表。

```
CREATE TABLE "REQUEST_PORTAL"."RP_RESOLUTION_MASTER" 
   ( "RM_ID" NUMBER, 
    "SR_ID" NUMBER, 
    "REQUEST_STATUS" VARCHAR2(200 BYTE), 
    "COMMENTS" VARCHAR2(4000 BYTE), 
    "UPDATED_ON" DATE, 
    "UPDATED_BY" VARCHAR2(500 BYTE), 
    "INTERNAL_COMMUNICATION" VARCHAR2(1 BYTE) DEFAULT 'N'
   ); 
```

我正在对此进行非透视查询。

```
 SELECT *
   From Rp_Resolution_Master
Unpivot INCLUDE NULLS ( 
          value For measures In ( rm_id, request_status, Comments
                                , updated_by, internal_communication)
                      ) 
 where sr_id = 1004707 
   And Updated_On = ( Select Max(Updated_On) 
                        From Rp_Resolution_Master 
                       Where Sr_Id = 1004707); 
```

但我得到一个错误

> ORA-01790: 表达式必须与对应的表达式 01790 具有相同的数据类型。 00000 - “表达式必须与对应的表达式具有相同的数据类型” *原因：
> *操作：行错误：3 列：51

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:15:26.007

问题是您正在尝试`UNPIVOT`使用不同数据类型的列。未透视的所有值必须相同，类似于使用`UNION`or`UNION ALL`查询时，列中的每个值必须具有相同的数据类型。

由于`RM_ID`列是 a`number`而其他列是`varchar2`那么您需要使用子查询来执行列`cast()`的a `RM_ID`：

```
select *
from 
(
  SELECT cast(rm_id as varchar2(200)) rm_id,
    request_status,
    Comments,
    updated_by,
    internal_communication,
    Updated_On,
    sr_id
  From Rp_Resolution_Master
)
Unpivot INCLUDE NULLS ( 
          value For measures In ( rm_id, request_status, Comments
                                , updated_by, internal_communication)
                      ) 
where sr_id = 1004707 
  And Updated_On = ( Select Max(Updated_On) 
                     From Rp_Resolution_Master 
                     Where Sr_Id = 1004707); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!4/493a4/4) of the syntax working

# bash - 比较日志文件中的 2 个日期

> ID：13393233
> 
> 赞同：1
> 
> 时间：2012-11-15T07:39:26.263
> 
> 标签：bash, sed, awk

我有以下长文件

```
2012-01-30 12:41:06,214 app10 device INFO [2012-01-30 12:40:46,214] info1 info2 info3 ... 
```

这是来自远程离线设备，这意味着如果设备的时间（第二次）设置不正确，它指向未来。如果第二次指向未来，我想将其更改为第一次。如果这是相同的或过去的，我想保持原样。只有日期很重要，时间根本不需要。第二次之后，我们有几个数据，有时我们想保留不同数量的列。

例子：

```
2012-01-30 12:41:06,214 app10 device INFO [2013-01-30 12:40:46,214] info1 info2 info3 ... 
```

应该

```
2012-01-30 app10 device INFO 2012-01-30 info1 info2 info3 ... 
```

我们想从脚本运行它，所以我更喜欢 bash、sed、awk 或 perl 解决方案。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:35:52.880

```
awk -F '[[:space:][]+' '
    $6 > $1 {$6 = $1} 
    {
        for (i=7; i<NF; i++) {$i = $(i+1)}; NF--   # delete time field 7
        for (i=2; i<NF; i++) {$i = $(i+1)}; NF--   # delete time field 2
        print
    } 
' <<< "2012-01-30 12:41:06,214 app10 device INFO [2222-33-44 12:40:46,214] info1 info2 info3 ..." 
```

输出

```
2012-01-30 app10 device INFO 2012-01-30 info1 info2 info3 ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:41:58.723

好吧，这可能对您有用，但它会在第二个日期/时间之前添加一个额外的空间，我将其留给您弄清楚如何删除它：

```
awk 'BEGIN { FS="[ \\[]" } 
{ if ( gensub("-","","g",$1) < gensub("-","","g",$7) ) { $7 = $1 }
  $7 = "[" $7
  print
}' INPUTFILE 
```

你可以[在这里@Ideone.com 看到它的实际效果](http://ideone.com/X48ZHX)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:56:19.403

另一个 gnu awk 替代方案。如果第二个日期没有改变，这个保持原来的行不变：

```
awk -F '[][ \t]+' '$6>$1 {$6=$1; $2=$7=""; gsub(OFS"+", OFS);} 1' file 
```

# android - KXmlParser 中的 OutOfMemoryError

> ID：13393235
> 
> 赞同：0
> 
> 时间：2012-11-15T07:39:31.667
> 
> 标签：android, kxml2

我从服务器获取数据为：

```
HttpTransportSE androidhttpTranport = new HttpTransportSE(URL, ContantSystem.TimeOut);
androidhttpTranport.call(SOAP_ACTIONS, envelope);
Object responseBody = responseBody = envelope.getResponse(); 
```

我的应用程序显示异常：

```
11-07 19:54:41.283: E/AndroidRuntime(10620): FATAL EXCEPTION: Thread-1851
11-07 19:54:41.283: E/AndroidRuntime(10620): java.lang.OutOfMemoryError
11-07 19:54:41.283: E/AndroidRuntime(10620):    at java.lang.String.<init>(String.java:432)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at java.lang.AbstractStringBuilder.toString(AbstractStringBuilder.java:642)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at java.lang.StringBuilder.toString(StringBuilder.java:663)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.kxml2.io.KXmlParser.readValue(KXmlParser.java:1419)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.kxml2.io.KXmlParser.next(KXmlParser.java:390)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.kxml2.io.KXmlParser.next(KXmlParser.java:310)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.kxml2.io.KXmlParser.nextText(KXmlParser.java:2056)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.DM.readInstance(DM.java:34)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.readInstance(SoapSerializationEnvelope.java:462)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:420)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:289)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:422)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:149)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:137)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:195)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at jp.osaka.APPLIActivity.getMarterDB(APPLIActivity.java:408)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at jp.osaka.APPLIActivity.access$0(APPLIActivity.java:390)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at jp.osaka.APPLIActivity$myrunable.run(APPLIActivity.java:369)
11-07 19:54:41.283: E/AndroidRuntime(10620):    at java.lang.Thread.run(Thread.java:856) 
```

我的数据约为 2.4MB。（5.000.000 个字符）。我的设备内存有限制吗？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:43:32.830

内存限制是针对整个应用程序的，而不是仅针对 http 的。因此，您在应用程序的其他地方使用了大量内存，或者您的手机整体内存不足。很可能它是您的应用程序。在您的应用程序上运行 hprof 并查看您是否泄漏了引用。信不信由你，大型 Java 程序中的内存管理与 C++ 中的工作量一样多，而且 Android 的框架很容易泄漏大量传递给它的对象，例如活动。

# cairo - 使用 Cairo 绘制杂乱纹理

> ID：13393245
> 
> 赞同：0
> 
> 时间：2012-11-15T07:40:19.147
> 
> 标签：cairo, gtk3, clutter, cogl

我有一组用于绘图的对象，并且一直使用 Cairo。我决定切换到带有 Cogl 的 Clutter 进行绘图，但 Cogl 似乎在某种程度上受限于 2D。到目前为止，我已经无法设置线条的虚线图案以及线条宽度。我读过两件事，你可以在 Cogl 中使用原始 GL 调用，你可以使用 ClutterCairoTexture。不幸的是，我找不到任何关于在 cogl_begin_gl/cogl_end_gl 中使用 GL 调用的文档，而且显然已弃用 ClutterCairoTexture。

了解如何使用具有 Clutter 纹理的 Cairo 上下文，或者现在如何在 Cogl 中完成 2D 绘图将非常有用。我真的不明白为什么你不能在 Cogl 中改变线宽，但它似乎不在我读过的任何文档中。如果必须，我可以处理破折号模式，但如果我可以继续在 Actor/Texture 中使用 Cairo，或者如果 Cogl 有办法做到这一点，那肯定会更好。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T08:30:16.563

原来答案是继续使用 Cairo，但创建一个 ClutterCanvas 并将其添加到您正在绘制的任何 ClutterActor 中。之后，您只需将一个函数连接到将 CairoContext 作为参数的绘图信号。

# javascript - 将鼠标悬停在任何“a”链接上时，jQuery图像悬停/浮动在光标旁边？

> ID：13393247
> 
> 赞同：1
> 
> 时间：2012-11-15T07:40:22.230
> 
> 标签：javascript, jquery, html, image, hover

嗨，我有这篇[文章的代码示例。](https://stackoverflow.com/questions/9478796/hover-image-and-show-it-next-to-the-cursor)我想要的是当光标经过超链接或任何类型的“a”链接时显示在光标旁边的 png 图像。

这是原文：

```
var $img = $('img');
$img.hide();
$('div').mousemove(function(e) {
  $img.stop(1, 1).fadeIn();
  $('img').offset({
    top: e.pageY - $img.outerHeight(),
    left: e.pageX - $img.outerWidth()
});
}).mouseleave(function() {
$img.fadeOut();
}); 
```

HTML：

```
<div>
<img src="http://i574.photobucket.com/albums/ss184/wsganewsletter/Other/Icon-Mega.png"    
/>
</div> 
```

这是我尝试修改的版本而不使用 HTML 并且仅通过 jQuery 加载图像：S

```
*var img = $("../Cursor.png");
$img.hide();
$('a').mousemove(function(e) {
  $img.stop(1, 1).fadeIn();
  $('img').offset({
    top: e.pageY - $img.outerHeight(),
    left: e.pageX - ($img.outerWidth()/2)
});
}).mouseleave(function() {
$img.fadeOut();
});? 
```

我敢肯定这是一个相对容易的解决方法，我仍然倾向于，请你帮帮我。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:58:47.483

这正是您所需要的。

```
<script type="text/javascript">
    $(document).ready(function() {
        var $img = $("#cursor");
        $img.hide();
        $('a').mousemove(function(e) {
            $img.stop(1, 1).fadeIn();
            $img.offset({
                top: e.pageY - $img.outerHeight(),
                left: e.pageX - ($img.outerWidth()/2)
            });
        }).mouseleave(function() {
            $img.fadeOut();
        });
    });
</script>

<img id="cursor" src="http://i574.photobucket.com/albums/ss184/wsganewsletter/Other/Icon-Mega.png" style="position: absolute">
<a href="#">hover me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:44:40.810

您需要像这样设置一个 img 标签：

```
var img = $('<img src="../Cursor.png"/>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:44:44.540

你必须构造 DOM 元素 - 比如：

```
var img = $("<img id='myimg' src='../Cursor.png' />"); 
```

# solr - Solr/Lucene fieldCache OutOfMemory 错误排序动态字段

> ID：13393248
> 
> 赞同：6
> 
> 时间：2012-11-15T07:40:26.323
> 
> 标签：solr, lucene, out-of-memory

我们有一个大约 250`TrieIntField`秒的 Solr 核心（声明为`dynamicField`）。我们的 Solr 索引中有大约 1400 万个文档，许多文档在其中许多领域都具有一定的价值。我们需要在一段时间内对所有这 250 个字段进行排序。

我们面临的问题是底层的 lucene`fieldCache`很快就会被填满。我们有一个 4 GB 的盒子，索引大小为 18 GB。在对这些动态字段中的 40 或 45 个进行排序后，内存消耗约为 90%，并且我们开始出现 OutOfMemory 错误。

目前，如果消耗的总内存超过 80%，我们每分钟都会运行一个 cron 作业来重新启动 tomcat。

根据我的阅读，我了解到限制可排序 Solr 字段上不同值的数量会缩小`fieldCache`空间。这些可排序字段中的值可以是 0 到 33000 之间的任何整数，并且分布非常广泛。我们考虑了一些扩展解决方案，但是处理整个问题的最佳方法是什么？

更新：我们想而不是排序，如果我们确实提升它不会去 fieldCache。因此，而不是发出类似的查询

`select?q=name:alba&sort=relevance_11 desc`

我们尝试了

`select?q={!boost relevance_11}name:alba`

但不幸的是，提升也填充了字段缓存:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:16:46.677

我认为你有两个选择：

1) 增加内存。
2）强制 Solr 通过指定不使用字段缓存`facet.method=enum`，[根据文档](https://wiki.apache.org/solr/SimpleFacetParameters#facet.method)。

还有一个讨论相同问题的[solr-user 邮件列表线程。](http://lucene.472066.n3.nabble.com/Lucene-FieldCache-Out-of-memory-exception-td3950298.html)

除非您的索引很大，否则我会选择选项 1)。这些天 RAM 很便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:52:58.133

我们有一种方法可以通过保留单个排序字段来重新设​​计模式。我们拥有的动态字段就像`relevance_CLASSID`. 当前模式具有唯一键`NODEID`和多值字段`CLASSID`- 相关性分数适用于这些类 ID。如果我们改为为每个 nodeId 每个 classId 保留一个文档，即新模式将具有`NODEID:CLASSID`唯一键并在具有相同 的文档中存储一些冗余信息`NODEID`，那么我们可以对单个字段进行排序`relevance`并在 CLASSID 上进行过滤查询。

# asp.net - joomla 与 asp.net 的集成

> ID：13393250
> 
> 赞同：0
> 
> 时间：2012-11-15T07:40:31.620
> 
> 标签：asp.net, joomla

我有一个使用 Joomla 2.5 的网站。
我有另一个由 asp.net 和 c# 编写的应用程序。我需要在 Joomla 网站上注册的用户可以使用相同的用户名和密码登录到 asp.net 应用程序。
我需要当用户想要登录到 asp.net 应用程序时，我的应用程序连接到 Joomla 数据库（用户表）并检查他们的用户名和密码。
我不知道我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-07T15:51:25.513

也许您可以使用[调用 CAS 解决方案的 Central Authentication Service 来](http://en.wikipedia.org/wiki/Central_Authentication_Service)解决此问题。

Joomla 有一些 CAS 插件，并且有很多文章解释如何在 C# ASP .NET 中使用 CAS。

这个 Joomla 插件可能会有所帮助。[外部登录](http://extensions.joomla.org/extensions/access-a-security/authentication-external/5366)。

但我的大问题是当任何人登录 Joomla 站点时，我想自动登录 ASP.NET 站点，但我不知道我该怎么解决这个问题。有关更多详细信息，您可以查看[如何将 Joomla 登录会话从一个 joomla 网站共享到一个 ASP.Net MVC 网站](https://stackoverflow.com/questions/27319451/how-to-share-joomla-login-session-from-one-joomla-website-to-one-asp-net-mvc-web)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:29:32.217

[http://www.geekgumbo.com/2010/07/02/use-joomla-login-credentials-outside-of-joomla/](http://www.geekgumbo.com/2010/07/02/use-joomla-login-credentials-outside-of-joomla/)

该网站有一个使用以下内容的登录脚本：

```
//Change these to your Joomla details
$dbhostname = 'localhost';
$dbusername = 'root';
$dbpassword = 'password';
$dbdatabase = 'joomla15';

// Get these from your form...
$username_for_check = 'admin';
$password_for_check = 'admin';

$joomla_user;
$joomla_pass;
$joomla_salt;

$mysqli = new mysqli($dbhostname,$dbusername,$dbpassword,$dbdatabase);

if ($result = $mysqli->query('SELECT j.username,j.password FROM joomla15.jos_users j WHERE j.username="'.$username_for_check.'" LIMIT 1;')) {

  if ($result->num_rows == 0){
      echo 'Username does not exist.';
  }else{
    while ($row = $result->fetch_object()) {
      $joomla_user = $row->username;

      $pass_array = explode(':',$row->password);
      $joomla_pass = $pass_array[0];
      $joomla_salt = $pass_array[1];
    }

    if($joomla_pass == md5($password_for_check.$joomla_salt)){
      echo 'Username and password combination validated.';
    }else{
      echo 'Invalid password for username.';
    }
  }
} else {
  echo 'LOGIN VALIDATION: MySQL Error - '.$mysqli->error;
}

$mysqli->close(); 
```

# c++ - vtd-xml c++编译安装报错

> ID：13393251
> 
> 赞同：3
> 
> 时间：2012-11-15T07:40:40.767
> 
> 标签：c++, c, xml-parsing, vtd-xml

有人用过vtd-xml lib的c++版本吗？

最近我想用 c++ 或 c 解析（需要遍历）xml 文件，并认为[vtd-xml](http://vtd-xml.sourceforge.net/)是一个完美的解决方案，但是在编译 mingw 时会输出很多警告和错误。

我查看了这些错误并发现了一些“常识错误”。你知道这个 vtd-xml 库的 c++ 版本是否可靠吗？或者一些适合 xml 解析的替代库（快速和低内存消耗）？我下载的版本是ver2.11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T17:30:51.033

您遇到什么样的编译错误？

对于另一个问题：我们将 c++ 库用于我们的原型（带有 VS2012 和 Linux 的 Windows），它的表现非常好。

# salesforce - 在 Java 中创建 Web 服务以在 Salesforce 中接收出站消息

> ID：13393253
> 
> 赞同：0
> 
> 时间：2012-11-15T07:40:45.673
> 
> 标签：salesforce, salesforce-service-cloud

如何在 java 或 .net 中创建 web 服务以接收来自 salesforce 的出站消息并仅打印记录的 ID？你的帮助请。

# sorting - 选择排序程序集 x86 [Nasm]：值 j 的奇怪增量

> ID：13393254
> 
> 赞同：1
> 
> 时间：2012-11-15T07:41:04.537
> 
> 标签：sorting, assembly, x86, nasm, selection-sort

我在使用这种选择排序时遇到了问题，问题是当 vecnums[j] 小于 (<) vecnums[min] 时，我必须将 j 放入 min 然后将 j 增加 1，然后当我加载 j 时SI, j 不再是它必须的值（使用调试器我发现它应该是 0102，它应该是 0002）。我不知道为什么会这样，如果有人可以帮助我，我将非常感激:)

如果我没有很好地表达自己，我深表歉意，请不要怀疑任何你不明白的地方。

谢谢你的时间！

Vecnums 是一个数字数组（2 字节大小），我将其加载为：5,-11,3,-4,10,1005,0,5,-1,23,-34,85,-30,-82 ,1

```
i       resb        1
j       resb        1
min     resb        1
        db      0
vecnums     times 60 db 0
nlog        resb        1  ;for the example is 15

ssort:      
        mov     byte[i],0
        mov     ch,0
        mov     cl,[nlog]
        sub     cl,1
cicloi:     
        mov     ah,0
        mov     al,[i]
        mov     [min],al ; min=i

        push        cx
        mov     cl,[i]
        add     cl,1
        mov     byte[j],cl
        mov     cl,[nlog]   
        sub     cl,[j]
cicloj:
        mov     si,[j]
        imul        si,2
        mov     ax,word[vecnums+si]
        mov     si,[min]
        imul        si,2
        mov     dx,word[vecnums+si]
        cmp     ax,dx   ;ax=vecnums[j] dx=vecnums[min]
        jnl     noMenor
        mov     ah,0    ;vecnums[j] < vecnums[min]
        mov     al,[j]
        mov     [min],al ; min=j
noMenor:                                     ; vecnums[j] > vecnums[min]
        inc     byte[j]
        loop        cicloj
        mov     si,[j]
        imul        si,2
        mov     ax,word[vecnums+si]
        mov     si,[min]
        imul        si,2
        mov     dx,word[vecnums+si]
        mov     si,[j]
        imul        si,2
        mov     word[vecnums+si],dx
        mov     si,[min]
        imul        si,2
        mov     word[vecnums+si],ax
        inc     byte[i]
        pop     cx
        loop        salto
        jmp     finrut
salto:      jmp     cicloi   ;the reason for this is that the jump is too long to do it with loop (couldn't assemble if I do it directly with loop)
finrut:
    ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:50:26.063

您的`j`变量是字节大小的（同样适用于`i`和`min`）。但是，当您说`mov si, [j]`要加载 2 个字节时，因此高字节将来自以下变量（`min`如果是`j`）。您应该修复负载，例如使用`movzx si, byte [j]`

旁注：通常的做法是使用移位来乘以 2 的幂。

# svn - svn 日志和 svn:externals 的责备

> ID：13393259
> 
> 赞同：2
> 
> 时间：2012-11-15T07:41:50.660
> 
> 标签：svn, version-control

我在 Linux 提示符下同时使用 TortoiseSVN 和 svn clinet。

在我们的项目中，我有一个带有 svn:external 属性的目录。我正在尝试挖掘 svn 历史以查看更改的人员和时间。我找不到查看目录属性日志或责备/注释目录 svn 属性的方法？

如何做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:08:19.197

试试这个命令：

```
$ svn log -v --diff --depth=empty $dir 
```

在包含`svn:externals`您感兴趣的属性的目录上。您将看到如下输出：

```
r154474 | dweintraub | 2012-11-14 09:50:20 -0500 (Wed, 14 Nov 2012) | 1 line
Changed paths:
   M /branches/ivy/TC-Common-All

Some utterly useless comment

Index: .
===================================================================
--- .   (revision 154473)
+++ .   (revision 154474)

Property changes on: .
___________________________________________________________________
Modified: svn:externals
## -1 +1 ##
-^/trunk/ivy.dir ivy.dir
+^/branches/ivy/ivy.dir ivy.dir 
```

# jquery - jquerymobile 复选框

> ID：13393263
> 
> 赞同：-1
> 
> 时间：2012-11-15T07:42:15.730
> 
> 标签：jquery, checkbox

我试图用 jquery 取消选中 jquerymobile 复选框。当一个人点击一个按钮时，我试图取消选中它。

这是我复选框：

```
<input id='_inputcb_Q801' name='_inputcb_Q801' type='checkbox'>
<label id='_inputcb_Q801L' for='_inputcb_Q801'>Text</label> 
```

我已经尝试过这些选项。

```
function uncheckCB(){
$('#_inputcb_Q801').prop('checked',false).checkboxradio('refresh');
$('#_inputcb_q801').not(:checked);
$('input[type=\"checkbox\"]:first').attr('checked', false).checkboxradio('refresh');
$('input[name=_inputcb_Q801]').attr('checked',false);
$('input[name=_inputcb_Q801]').prop('checked', false);
} 
```

该功能是一个按钮的点击。

以上选项均无效。任何人都知道另一种取消选中 jquerymobile 复选框的方法。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:47:46.967

这有效：

```
$("#btn")
    .click( 
        function(){
           $('input[name=_inputcb_Q801]').prop('checked',false);
        }); 
```

可能它对您不起作用，因为您有 javascript 错误。尝试在浏览器中检查您的代码。在此处查看实际操作：http: [//jsfiddle.net/eH7Fn/2/](http://jsfiddle.net/eH7Fn/2/)
另 请阅读[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

**编辑：**
您提供的 jsfiddle ( [http://jsfiddle.net/pjottard/97uMb/](http://jsfiddle.net/pjottard/97uMb/) ) 不起作用有几个原因：
1.您使用 mootools 作为库，但您需要选择 Jquery
2\. 您没有t 定义函数：priceCounterCB()；
3.您没有`href`为您的链接提供可点击的属性。您需要添加`href="#"`到您的链接或更好地使用按钮。
工作示例：http: [//jsfiddle.net/97uMb/1/](http://jsfiddle.net/97uMb/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T10:02:51.317

找到了解决方案，我把它贴在下面可能对某人有帮助：

```
 $('#_bQ801').click(function(){
        $.mobile.changePage('#Question_09_01', 'slide', false, false);
        $('#_inputcb_Q901').attr('checked', false);
        $('#_inputcb_Q901').checkboxradio('refresh');} 
```

# android - getRuntime().freeMemory() 可用但 VM 仍然不允许我们分配 31961088 字节

> ID：13393264
> 
> 赞同：0
> 
> 时间：2012-11-15T07:42:15.757
> 
> 标签：android, memory

我写了一个函数来防止调用`Bitmap.createBitmap()`，如果它会抛出一个`OutOfMemoryError: bitmap size exceeds VM budget`，但我并不总是工作，我该如何纠正它？这是一个返回 true 而不是 false 的示例：

```
if(isSufficientRAM(width*height)){
    Bitmap bmp=Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    ...
}

public static boolean isSufficientRAM(int length){
    int minRamAfter=1024*1024; //1048576 bytes (always leave at least 1MB free)
    long imgSize=length*4; //this is 31961088 bytes in this case, as it is a 3264 x 2448 argb image
    long freeRAM = Runtime.getRuntime().freeMemory(); //this was 34415992 bytes when I run it   
    boolean hasRAM=freeRAM>imgSize+minRamAfter; //this is true as freeMemory() shows enough RAM available
    return hasRAM;
} 
```

当我运行它时，该函数将返回 true，并且 Bitmap.createBitmap() 给出以下错误。我的 isSufficientRAM() 函数中缺少什么？

```
11-15 09:01:47.965: minRamAfter=1048576
11-15 09:01:47.965: imgSize=31961088
11-15 09:01:47.970: freeRAM=34415992
11-15 09:01:48.020: hasRAM=true
11-15 09:01:48.060: D/dalvikvm(2538): GC_EXTERNAL_ALLOC freed 79K, 92% free 3850K/44679K, external 2343K/3018K, paused 37ms
11-15 09:01:48.080: E/dalvikvm-heap(2538): 31961088-byte external allocation too large for this process.
11-15 09:01:48.115: E/GraphicsJNI(2538): VM won't let us allocate 31961088 bytes
11-15 09:01:48.115: D/dalvikvm(2538): GC_FOR_MALLOC freed 0K, 92% free 3850K/44679K, external 2343K/3018K, paused 22ms
11-15 09:01:48.115: W/dalvikvm(2538): threadid=12: thread exiting with uncaught exception (group=0x4001e578)
11-15 09:01:48.115: E/AndroidRuntime(2538): FATAL EXCEPTION: Test thread name
11-15 09:01:48.115: E/AndroidRuntime(2538): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
11-15 09:01:48.115: E/AndroidRuntime(2538):     at android.graphics.Bitmap.nativeCreate(Native Method)
11-15 09:01:48.115: E/AndroidRuntime(2538):     at android.graphics.Bitmap.createBitmap(Bitmap.java:477) 
```

# android - 从网页获取文本

> ID：13393272
> 
> 赞同：0
> 
> 时间：2012-11-15T07:42:54.210
> 
> 标签：android

我想从网络上获取文本，我编写了代码，使用 indexOf 和 subString，但它不起作用。

```
int index = response_str.indexOf("Remote IP Address:");
index += "Remote IP Address:".length();
index += "</div><br /><div id=\"value1\">".length();
int end = response_str.indexOf("</div><br /><br />", index);
String strIP = response_str.substring(index, end);      
Log.d("","Hello" + strIP  ); 
```

这是示例文本，我想得到**49.156.53.152**

```
<body>
<div id="title">Remote IP Address:</div><br /><div id="value1">**49.156.53.152**</div><br /><br />
<div id="title">UserAgent:</div><br /><div id="value2">Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11</div><br /><br />
<!-- Everyone of CCorp employees, Good luck ! --><br />
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:46:52.907

您必须使用带有 Java 的 Javascript 接口对象来从 Html 网页中获取所有数据。

```
final WebView webview = (WebView) findViewById(R.id.browser);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.addJavascriptInterface(new MyJavaScriptInterface(this), "HtmlViewer");

    webview.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            webview.loadUrl("javascript:window.HtmlViewer.showHTML" +
                    "('<head>'+document.getElementsByTagName('html')[0].innerHTML+'</head>');");
        }
    });

    webview.loadUrl("http://android-in-action.com/index.php?post/" +
            "Common-errors-and-bugs-and-how-to-solve-avoid-them");
}

class MyJavaScriptInterface {

    private Context ctx;

    MyJavaScriptInterface(Context ctx) {
        this.ctx = ctx;
    }

    public void showHTML(String html) {
        new AlertDialog.Builder(ctx).setTitle("HTML").setMessage(html)
                .setPositiveButton(android.R.string.ok, null).setCancelable(false).create().show();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:51:20.263

您可以将 html 页面转换为 sting。并使用正则表达式/字符串操作来获取需要的数据

```
try {
                if(!url_text.getText().toString().trim().equalsIgnoreCase("")){
                    textView.setText("");
                    HttpClient client = new DefaultHttpClient();
                    HttpGet request = new HttpGet(url_text.getText().toString());
                    // Get the response
                    ResponseHandler<String> responseHandler = new BasicResponseHandler();
                    String response_str = client.execute(request, responseHandler);
                    textView.setText(response_str);
                }else{
                    Toast.makeText(getApplicationContext(), "URL String empty.", Toast.LENGTH_LONG).show();
                }
            }
            catch (Exception e) {
                System.out.println("Some error occured.");
                textView.setText(e.getMessage());
            } 
```

也许最简单的方法是使用 sting.split 函数

```
String[] separated = response_str.split("**");
separated[0]; // part before the **
separated[1]; // your needed ip string
separated[2]; // part after the second ** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:44:34.057

你应该尝试使用它。

```
 myString = String.subString("<div id=\"value1\">", YOUR_ORIGINAL_STRING.len);
    String required = myString.endsWith("</div>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T08:40:46.807

你可以使用[JSoup](http://jsoup.org/)。

```
Document doc = Jsoup.connect(URL_TO_HTML_PAGE).get();
Elements newsHeadlines = doc.getElementsByAttribute("value1");
String ip = newsHeadlines[0].text().split("**")[1]; 
```

最后一行是基于 Greezer 的帖子。我个人会将其替换为与所有可能的 IP 地址匹配的简单正则表达式模式。

就像是：

`\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b`

# geolocation - 我需要maxmind数据库的国家、地区、城市映射

> ID：13393277
> 
> 赞同：3
> 
> 时间：2012-11-15T07:43:25.003
> 
> 标签：geolocation, maxmind

我正在使用 maxmind API 来获取用户的位置；但问题是，虽然它们提供了国家和城市的关系，但它们似乎没有提供地区和城市的关系。

那么任何使用过maxmind数据库的人，能否请您提供一下城市、地区和国家之间的关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T11:00:00.613

我想你正在寻找这个[你需要的映射点击这里](http://dev.maxmind.com/static/maxmind-region-codes.csv)

# c#-4.0 - Griffin.Container / Griffin.Decoupled：容器本身的注册

> ID：13393279
> 
> 赞同：0
> 
> 时间：2012-11-15T07:43:43.007
> 
> 标签：c#-4.0, domain-driven-design

我目前看一下`Griffin.Decoupled`和`Griffin.Container`库。在我的 ASP.MVC4 应用程序中，我想`IocQueryDispatcher`在第一步中使用。

我的问题是注册， `registrar.RegisterType<IQueryDispatcher, IocQueryDispatcher>` 因为它`IocQueryDispatcher`有`IServiceLocator`依赖关系。

ASP.MVC 应用程序中的当前注册看起来像

```
protected static void Register(ContainerRegistrar registrar)
{
    registrar.RegisterType<IQueryDispatcher, IocQueryDispatcher>();
    // this dont works because the _container is null
    registrar.RegisterInstance<IServiceLocator>(_container);
}

public static void Configure()
{
    var registrar = new ContainerRegistrar();
    registrar.RegisterApiControllers(Assembly.GetExecutingAssembly());
    registrar.RegisterControllers(Assembly.GetExecutingAssembly());

    var builder = new ContainerBuilder();
    Register(registrar);
    // this method creates a new container
    _container = registrar.Build();

    GlobalConfiguration.Configuration.DependencyResolver = new GriffinWebApiDependencyResolver(_container);
    DependencyResolver.SetResolver(new GriffinDependencyResolver(_container));
} 
```

IServiceLocator / 容器本身应该如何注册？（容器应注册为单例）

在分析了图书馆之后，我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:53:44.687

您必须在 Griffin.Decoupled 和 Griffin.Container 之间安装适配器：

```
install-package griffin.decoupled.container 
```

然后只需将注册行替换为：

```
registrar.DispatchQueries(); 
```

Samples can be found here: [https://github.com/jgauffin/Samples/tree/master/Griffin.Decoupled](https://github.com/jgauffin/Samples/tree/master/Griffin.Decoupled)

# ruby-on-rails - 在日志中看到 count_column 和 subquery_for_count。他们的意思是什么？

> ID：13393280
> 
> 赞同：2
> 
> 时间：2012-11-15T07:43:47.147
> 
> 标签：ruby-on-rails

我正在优化我的 rails 应用程序（postgres）中的一些查询，在一些查询中我正在加载一堆 Activerecord 对象并检查任何？在他们身上，我在我的日志文件中看到这样的查询

```
SELECT COUNT(count_column) FROM (SELECT 1 AS count_column FROM "questions" WHERE "questions"."deleted_at" IS NULL AND "questions"."place_id" = 1 AND "questions"."publish_state" = 'published' LIMIT 6) subquery_for_count 
```

我想知道这是为什么。我认为 Rails 只会计算内存中的项目，而不是发出数据库调用来获取这个数字？

# for-loop - 用于 jdk 1.6 或 1.7 的 Junit 测试类是否可用

> ID：13393286
> 
> 赞同：0
> 
> 时间：2012-11-15T07:44:07.193
> 
> 标签：for-loop, junit, java, codebase

有没有办法获得用于测试 jdk1.6 代码库的 junit 测试类。

JDK 附带 src.zip，同样我可以得到 test.zip，其中包含所有 jdk 类的所有测试用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:48:27.907

您需要的是[Java Technology Compatibility Kit](http://jcp.org/en/resources/tdk)（简称 TCK）。

# c# - Visual Studio 2010 运行糟糕 - 找不到解决方案

> ID：13393287
> 
> 赞同：1
> 
> 时间：2012-11-15T07:44:12.497
> 
> 标签：c#, visual-studio-2010

我的 Visual Studio 2010 Professional 有问题 - 我正在处理一个项目，VS 中的所有内容都运行缓慢（可能除了 IntelliSense）。我知道启动时间通常很糟糕，我可以忍受。

但是构建一个中等规模的解决方案（7 个项目，几百个文件）需要 3 到甚至 10 分钟......在构建解决方案之后 VS 说它已经准备好了，但我必须等待本地主机响应长达 5 分钟。 ..总共最多15分钟！为了简短起见：

*   打开所有东西后，我仍然有至少 1Gb 的可用 RAM（总共 4 个）和只有 20-25% 的处理器使用率
*   我已经卸载了所有插件
*   该项目在我队友的计算机上构建并运行良好
*   当我使用我的计算机和虚拟桌面在服务器上工作时，该项目可以运行并且构建得更好
*   我的电脑工作正常
*   我刚刚完成了 VS 的痛苦重新安装（在删除 VS 后清理它的剩菜 - 或者我认为）

编辑：清理我的解决方案后，我的构建时间很快！:) 另外，我发现我的处理器存在某种问题，直到现在才出现在进程管理器中......无论如何，我认为我的问题已经以某种方式解决了......谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:10:18.057

尝试在安全模式下运行 VS

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe /SafeMode

此开关可防止在 Visual Studio 启动时加载所有第三方 VSPackage，从而确保稳定执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:00:38.920

试试[Jetbrains 的 Visual Studio Memory Wrapper](http://confluence.jetbrains.net/display/ReSharper/OutOfMemoryException+Fix)。它对我的 Visual Studio 2010 性能有很大帮助，但它可能不适用于您的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:49:38.077

事实上，Visual Studio 2010（devenv.exe 进程）会消耗大量内存。

有时当我想快速开发一个小项目或只是制作一个快速脚本时，我会使用 Visual Studio 2008，因为以前版本的资源消耗很明显。

我建议您卸载所有 Visual Studio 2010 扩展（如果您有），如果您当前使用的解决方案是很久以前创建的，则为您的项目集合创建一个新的解决方案。

你也可以试试VS2012。谈论资源消耗变得更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T07:52:47.383

尝试在调试之间停止 ASP.NET 开发服务器的所有实例。我的工作站似乎在不同端口上有 20 个实例的硬限制。当我输入这个时，我有 5 个恶意实例正在运行，谁知道呢。我手动关闭它们，我再次拥有扭曲能力。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T08:01:24.893

如果你什么都没做，而你的 CPU 使用率为 20-25%，那么你的电脑有问题。一台除了运行 Windows 什么都不做的现代 PC 应该使用 3-4%。

# asp.net - 如何在 Visual Studio 2005 中为 Web 应用程序配置转换

> ID：13393296
> 
> 赞同：1
> 
> 时间：2012-11-15T07:45:05.960
> 
> 标签：asp.net, config

我们如何在 Visual Studio 2005 中为 Web 应用程序创建配置转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:51:41.973

web.config 转换是 Visual Studio 2010 中的一项新功能。它们在 VS2005 中不存在。

# android - Android - 从共享首选项中删除键值对

> ID：13393300
> 
> 赞同：2
> 
> 时间：2012-11-15T07:45:23.180
> 
> 标签：android, sharedpreferences

我有一个列表视图，这些视图将从共享首选项中加载。当用户单击删除时，它应该从列表和粉碎首选项中删除。我的问题是，特定项目没有从共享首选项中删除，为此我在下面的代码中使用，

```
SharedPreferences settings = getSharedPreferences(
OptionsActivity.PREFS_NAME, 0);
int deviceSize = settings.getInt("deviceSize", 0);
SharedPreferences.Editor editor = settings.edit();
String deviceName = items.get(index);
editor.remove(deviceName + String.valueOf(items.get(index)));
editor.remove("deviceName" + String.valueOf(index));
int deviceid = settings.getInt("deviceId"+String.valueOf(items.get(index)),0);
editor.remove("deviceId" + String.valueOf(deviceid));
editor.putInt("deviceSize", deviceSize - 1);
editor.commit(); 
```

通过此代码，只有 deviceSize-1 正在工作，因此它似乎已从列表中删除，但当我看到共享首选项文件时，它不是。我的共享首选项文件如下，

```
 <?xml version='1.0' encoding='utf-8' standalone='yes' ?>
   <map>
   <string name="deviceName1">APPLE</string>//delete when click on delete
   <int name="deviceId1" value="0" /> //delete when click on delete
   <int name="deviceSize" value="1" /> //decrease by one when item deleted
   </map> 
```

当用户单击删除时，我想删除这 3 行表单首选项文件。如何删除整行？列表仅显示名称（APPLE）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T07:50:51.940

线上有错误：

```
editor.remove("deviceId" + String.valueOf(deviceid)); 
```

它应该是

```
editor.remove("deviceId" + String.valueOf(index)); 
```

也许您还想删除 deviceSize 键：

```
editor.remove("deviceSize"); 
```

在提交之前。

你的代码不是很清楚。使其更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T19:20:42.240

你可以试试：

```
settings.edit().remove("deviceId" + String.valueOf(deviceid)).apply(); 
```

# java - 从 JavaFX 2.0 中的 TableView 读取选择

> ID：13393301
> 
> 赞同：10
> 
> 时间：2012-11-15T07:45:31.277
> 
> 标签：java, javafx-2, javafx

我正在尝试从 JavaFX 2.0 中的 TableView 中获取选择。发生的事情是我需要获取您在 tableview 中选择的行的值我希望有人可以帮助我

就像放在桌子上一样

我的意思是我想获取您选择的数据，如果有任何方法可以处理事件以自动获取选定的行

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T21:02:21.483

你需要[ChangeListener](http://docs.oracle.com/javafx/2/api/javafx/beans/value/ChangeListener.html)和[Clipboard](http://docs.oracle.com/javafx/2/api/javafx/scene/input/Clipboard.html)来完成你的任务:)

示例代码：

```
Clipboard clipboard = Clipboard.getSystemClipboard(); 
  // add listner to your tableview selecteditemproperty   
userTable.getSelectionModel().selectedItemProperty().addListener( new ChangeListener() {
              // this method will be called whenever user selected row
            @override
             public void chnaged(ObservableValue observale, Object oldValue,Object newValue) {
               UserClass selectedUser = (UserClass)newValue;
             ClipboardContent content = new ClipboardContent();
                 // make sure you override toString in UserClass
             content.putString(selectedUser.toString()); 
             clipboard.setContent(content); 
            }
            }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T08:38:21.473

如果我理解正确，您想检索当前在 TableView 中选择的单元格的行号。

为此，请请求 TableView 的 SelectionModel：

```
 // tv is of type TableView
    TableView.TableViewSelectionModel selectionModel = tv.getSelectionModel();
    ObservableList selectedCells = selectionModel.getSelectedCells();
    TablePosition tablePosition = (TablePosition) selectedCells.get(0);
    int row = tablePosition.getRow(); // yields the row that the currently selected cell is in 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T19:16:09.367

我仍然不清楚您要做什么...

但是，获取选定的行：

```
final Countries selectedCountry = tblCountries.getSelectionModel().getSelectedItem(); 
```

如果需要另一个窗格变得可见或另一个窗口显示只需将事件处理程序添加到 onclicked 属性等？

是这个意思吗？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-26T09:22:27.437

```
 tableview.getSelectionModel().selectedItemProperty().addListener(new ChangeListener() {
    @Override
    public void changed(ObservableValue observableValue, Object oldValue, Object newValue) {
        //Check whether item is selected and set value of selected item to Label
        if(tableview.getSelectionModel().getSelectedItem() != null) 
        {    
           TableViewSelectionModel selectionModel = tableview.getSelectionModel();
           ObservableList selectedCells = selectionModel.getSelectedCells();
           TablePosition tablePosition = (TablePosition) selectedCells.get(0);
           Object val = tablePosition.getTableColumn().getCellData(newValue);
           System.out.println("Selected Value" + val);
         }
         }
     }); 
```

使用此代码，您可以从 JAVAFX TABLEVIEW Cell 中获取选定的值。

谢谢..

# java - 在Java中不使用replace函数替换字符

> ID：13393303
> 
> 赞同：0
> 
> 时间：2012-11-15T07:45:37.230
> 
> 标签：java

我想`"<(><<)>"`用“<”替换，但在我的情况下它没有替换。

```
public class Test2 {

public static void main(String[] args)
    {
        String s1 = "<(><<)>script>";

       if( s1.contains("<(><<)>"))
       {
        s1.replaceAll("<(><<)>","<");
         }

    System.out.println("completeText"+s1);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:46:37.757

那是因为

*   的第一个参数`replaceAll`是正则表达式，这意味着您必须转义一些字符。
*   您必须取回结果（字符串是不可变的，因此`replaceAll`不会更改您传递的字符串而是构建一个新字符串）

利用

```
 s1 = s1.replaceAll("<\\(><<\\)>","<"); 
```

另请注意，您不必测试`if( s1.contains("<(><<)>"))`：这增加了一个无用的条件并且`replaceAll`速度足够快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:50:06.950

`String.replaceAll`方法将第一个参数作为`Regex`. 所以，你需要转义你的`(`, 并且`)`在`Regex`.

或者，您可以使用`Pattern.quote`方法为您转义特殊字符。此外，您需要将`return value`of`replaceAll`方法存储在您的`string s1`. 由于`Strings`在 Java 中是不可变的，因此您调用的 String 类的任何方法都返回一个`modified string`. 您需要使用返回值，否则您将看不到任何更改。

因此，您需要将代码修改为：-

```
s1 = s1.replaceAll(java.util.regex.Pattern.quote("<(><<)>"),"<"); 
```

如果它存在于字符串中，这将自动替换您`pattern`的，否则返回未修改的字符串。

# ios - 如何从 navigationController(viewControllers/stack) 弹回指定 viewController？

> ID：13393308
> 
> 赞同：2
> 
> 时间：2012-11-15T07:45:52.753
> 
> 标签：ios, uinavigationcontroller, viewcontroller

我创建了一个带有串行视图（A、B、C、D、...）的应用程序，我需要将 D 弹回 B。有人可能会说为什么不使用：

```
[self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:1] animated:YES]; 
```

但是，这不是一个好的解决方案。因为这个方法需要你获取我们的“B”所在的索引。

**问题**：如何在 viewControllers 中获取“B”的索引？

中的格式`UIViewControllers`应为：
“< A: 0x6e70710 >”、“< C: 0x6e30370 >”、“< B: 0x6988a70 >”、“< D: 0x6ea8950 >”、“< E: 0x6eaaad0 >”

我已经尝试并未能使用`rangeOfString`并`hasPrefix`获取“B”视图的索引。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-15T07:50:09.027

在这里，我想知道 NavigationController 通过`Concept Of Stack`.ie管理 ViewController。`LAST COME FIRST OUT`这里有两种相同的方法。

1）在这里，您可以进行迭代以获得所需的 ViewController，如下所示

```
 for (id controller in [self.navigationController viewControllers])
   {
   if ([controller isKindOfClass:[BViewController class]])
  {
    [self.navigationController popToViewController:controller animated:YES];
    break;
  }
  } 
```

2）这里有`A,B,C,D`控制器。意味着`B`将在第三位，所以你能做什么

您可以将索引硬连线如下

```
 [self.navigationController popToViewController:[[self.navigationController viewControllers] objectAtIndex:2] animated:YES]; 
```

我希望它对你有帮助。。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-15T07:48:46.877

您可能可以执行以下操作：

```
for (UIViewController *controller in [self.navigationController viewControllers])
{
    if ([controller isKindOfClass:[B class]])
    {
        [self.navigationController popToViewController:controller animated:YES];
        break;
    }
} 
```

* * *

**更新：**

在 iOS 6 中，您可以只使用 unwind segues，它会为您处理所有这些。只需转到您的 B 类，定义一个展开操作（通过`IBAction`返回类型和`UIStoryboardSegue`参数的组合来识别），例如：

```
- (IBAction)done:(UIStoryboardSegue *)segue
{
    // do any clean up you want
} 
```

然后，B 提供的任何控制器都可以创建一个展开转场，例如，`control`从按钮拖动到场景停靠栏中的退出图标。您可以选择让您正在展开的控制器执行预期`prepareForSegue`的操作（在 B 的展开操作之前调用）。

# session - 如何测试我的会话？

> ID：13393311
> 
> 赞同：-1
> 
> 时间：2012-11-15T07:46:33.203
> 
> 标签：session, session-cookies, session-timeout

我的网站是用 PHP 构建的。我想知道如何测试会话是否中断或是否容易受到任何安全攻击。有没有可用的工具或者我必须手动完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:58:15.413

你能提供更多信息吗？

会话存储在您的服务器中，您可以远程查看/销毁会话

但在编程中，您可以使用检查所有会话

```
 foreach ($_SESSION as $key=>$val)
    echo $key." ".$val; 
```

对于安全问题

为了确保您的会话安全，需要做几件事：

```
1.Use SSL when authenticating users or performing sensitive operations.

2.Regenerate the session id whenever the security level changes (such as logging in). You can even regenerate the session id every request if you wish.

3.Have sessions time out

4.Don't use register globals

5.Store authentication details on the server. That is, don't send details such as username in the cookie.

6.Check the $_SERVER['HTTP_USER_AGENT']. This adds a small barrier to session hijacking.

7.You can also check the IP address. But this causes problems for users that have changing IP address due to load balancing on multiple internet connections etc (which is the case in our environment here).

8.Lock down access to the sessions on the file system or use custom session handling
For sensitive operations consider requiring logged in users to provide their authenication details again 
```

# ruby-on-rails-3 - 使用 assets_s3 通过 Heroku 将资产部署到 S3

> ID：13393314
> 
> 赞同：1
> 
> 时间：2012-11-15T07:46:49.240
> 
> 标签：ruby-on-rails-3, heroku, amazon-s3, assets, fog

我按照[Heroku 的指南](https://devcenter.heroku.com/articles/cdn-asset-host-rails31) 添加环境变量并添加

```
config.action_controller.asset_host = "https://#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com" 
```

到环境/production.rb

我看到资产已上传到我的 s3 存储桶，我可以访问它们。

但在我的网站上，我看不到任何使用asset_path 标签的资产，如css

```
background-image: url("<%= asset_path "image.jpg" %>"); 
```

当我查看源代码时，我看到一个指向这样的文件的链接：

```
url("https://.s3.amazonaws.com/assets/image.jpg") 
```

这很奇怪，因为 css 和 js 可以工作（使用 FOG_DIRECTORY 变量）。那么为什么在这里跳过 FOG_DIRECTORY env 就好像它不存在一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:57:48.190

通过做解决

```
config.asset_host = "https://#{ENV['FOG_DIRECTORY']}.s3.amazonaws.com" 
```

并使用

```
heroku labs:enable user-env-compile 
```

# vb.net - 在 VS2010 VB 项目中找不到“目标框架”选项

> ID：13393319
> 
> 赞同：1
> 
> 时间：2012-11-15T07:47:09.777
> 
> 标签：vb.net, visual-studio-2010, target-framework

我创建了一个新的 VB.NET Windows 窗体应用程序。

在 VS2010 中，我单击项目设置，然后看到常规选项卡“应用程序”、“构建”、“构建事件”等。

但在“应用程序”选项卡下，没有名为“目标框架”的选项，如下图所示：

[![在此处输入图像描述](../Images/7bccab6e7340dc30c997697f860318d3.png)](https://i.stack.imgur.com/YSCzr.png)

它根本不适合我。相反，选项“应用程序类型”显示在该位置。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T08:26:09.157

您的屏幕截图显示了 C# 项目存在该选项的位置。对于 VB 项目，您可以按照此处的 MSDN 说明进行操作：

*   [如何：以特定 .NET Framework 版本或配置文件为目标](http://msdn.microsoft.com/en-us/library/bb398202(v=vs.100).aspx)

基本上：

*   编译选项卡 -> 高级编译选项...

![在此处输入图像描述](../Images/7e0b09ea1dadb492e22ff1398996093f.png)

# asp.net-mvc - Kendo.Mvc.dll 部署问题

> ID：13393320
> 
> 赞同：1
> 
> 时间：2012-11-15T07:47:16.500
> 
> 标签：asp.net-mvc, deployment, kendo-ui

我遇到了 Kendo.Mvc.dll 的问题，我有一个 MVC 4 应用程序，它使用 Kendo DataSourceRequest 对象以 excel 格式导出网格。当我使用 Visual Studio 运行该应用程序时，它运行良好。但是当我在 IIS 7.5 中发布它时，它给了我一个内部服务器错误。当我评论使用 Kendo.Mvc.dll 的代码并重新发布它时，应用程序再次正常工作。对此的任何帮助将不胜感激。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-15T07:54:28.787

您还需要部署 Kendo.Mvc.dll。

1.  在您的 ASP.NET MVC 项目中转到参考
2.  点击 Kendo.Mvc
3.  在属性窗口中将“本地副本”更改为 true
4.  重新部署您的应用
5.  验证 Kendo.Mvc.dll 现在是否在您的 /bin 目录中
6.  你完成了:)

# java - 如何在php和java webservice之间进行交互

> ID：13393321
> 
> 赞同：0
> 
> 时间：2012-11-15T07:47:17.570
> 
> 标签：java, php, webservice-client

我尝试使用 java 和 netbeans 创建 Restful Web 服务。我已经运行了“测试 RESTful Web 服务”，一切正常。但我想使用 php 或 codeigniter 访问我制作的 web 服务，如何检索内容或放置内容。我有这个问题。我在我的控制器中尝试过这样的尝试。

```
 file_get_contents('http://localhost:8080/akunKu/resources/db.akun.akkelompokakun'); 
```

是的，它显示内容，但我应该把参数放在哪里。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:11:59.673

使用 cURL 扩展名.. 通常在所有专业网络主机上都可用。

或者使用 NuSphere 的 NuSoap 类 (http://www.nusphere.com/php_script/nusoap.htm)

我相信第二个更容易。

# python-2.7 - 两个相同的字符变成大写而不是只有一个 python

> ID：13393323
> 
> 赞同：1
> 
> 时间：2012-11-15T07:47:29.150
> 
> 标签：python-2.7

我试图通过大写数组中的每个字符来操作一个单词，但是当涉及到一个具有两个相同字符的单词时，它会使它们都大写而不是一个。不是一个只想学习 python 的程序员。预先感谢！

```
answer = raw_input("What is your word? ")
x = 0
answerWord = ''.join(answer)
while (x < len(answer)):
    if (answerWord[x] != answerWord[x].upper()):
        letter = answerWord.replace(answer[x], answer[x].upper())
    print letter
    x = x + 1

What is your word? boot
Boot
bOOt
bOOt
booT

What is your word? crazy
Crazy
cRazy
crAzy
craZy
crazY 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:53:39.970

`answerWord.replace('X', 'Y')`将替换字符串中的所有*实例*。因此，程序的第 6 行采用了整个单词，并将当前正在考虑的字母的所有实例替换为等效的大写字母。`X``Y``answerWord`

从您的变量名称看来，您希望变量`letter`是单个字母，而不是整个单词。也许您的意思是第 6 行的内容如下：

```
letter = answer[x].upper() 
```

玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:12:42.910

```
for i in range(len(answer)):
    print answer[0:i]+answer[i].upper()+answer[i+1:] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:34:27.907

```
answer = raw_input("What is your word? ")

for char in range(len(answer)):
    letter = answer[0:char] + answer[char].upper() + answer[char+1:]
    print letter 
```

那应该做的事情，它将每个字母一个一个地更改为大写，然后打印它们。此外，在您的示例中，如果您使用一个已经包含大写字母的单词（例如“Peanuts”），则会引发错误，因为“if”句子不是 True，因此`letter`是未定义的。

如果您希望大写字母变为小写，而小写字母变为大写等，请使用以下命令：

```
answer = raw_input("What is your word? ")

for char in range(len(answer)):
    if answer[char] == answer[char].lower():
        letter = answer[0:char] + answer[char].upper() + answer[char+1:]
    else:
        letter = answer[0:char] + answer[char].lower() + answer[char+1:]
    print letter 
```

另请注意，如果您不打算将其`letter`用于打印以外的任何内容，则只需将两个字母定义都替换为简单的打印，然后将其`print letter`完全删除。

```
if answer[char] == answer[char].lower():
    print answer[0:char] + answer[char].upper() + answer[char+1:]
else:
    print answer[0:char] + answer[char].lower() + answer[char+1:] 
```

# android - 如何通过电子邮件共享多个图像

> ID：13393326
> 
> 赞同：1
> 
> 时间：2012-11-15T07:48:01.783
> 
> 标签：android

我使用图像下载器将一些图像从互联网显示到我的列表视图。图像使用哈希码存储在 sd 卡中。我如何通过电子邮件共享这些图像。在默认的 Gmail 客户端显示我已附加图像。但实际上主要我看不到任何附件。只有电子邮件正文可用。这是我使用的代码

活动

```
public class MainActivity extends Activity {
    public static final String arrGroupelements[] = { "http://api.androidhive.info/music/images/adele.png",
        "http://api.androidhive.info/music/images/eminem.png", "http://api.androidhive.info/music/images/mj.png"

};
    ListView lv;
    Button btn;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Intializeviews();
        ImgAdapter adapter = new ImgAdapter(MainActivity.this, arrGroupelements);
        lv.setAdapter(adapter);

        setListenersForViews();
    }

    private void setListenersForViews() {
    btn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(arrGroupelements.length>0)
            {

                Intent mailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);

                mailIntent.putExtra(android.content.Intent.EXTRA_EMAIL,new String[]{""});
                mailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Hows the pic");
                ArrayList<Uri> uris = new ArrayList<Uri>();

                String mailText =  "";

            for(int i=0;i<arrGroupelements.length;i++)
            {

                String ImagePath = arrGroupelements[i].toString();

                StringBuilder builder = new StringBuilder();

                String sampleFile= Download(ImagePath);

                mailText = mailText+"i shared "+ImagePath;  
                try
                {
                     ContentValues values = new ContentValues(7);
                     values.put(Images.Media.TITLE, sampleFile);
                     values.put(Images.Media.DISPLAY_NAME, ImagePath);
                     values.put(Images.Media.DATE_TAKEN, new Date().getTime());
                     values.put(Images.Media.MIME_TYPE, "image/jpeg");
                     values.put(Images.ImageColumns.BUCKET_ID, sampleFile.hashCode());
                     values.put(Images.ImageColumns.BUCKET_DISPLAY_NAME, sampleFile);
                     values.put("_data", sampleFile);
                     ContentResolver contentResolver = getApplicationContext().getContentResolver();
                     Uri uri = contentResolver.insert(Images.Media.EXTERNAL_CONTENT_URI, values);
                     uris.add(uri);
                }
                catch (Exception e) 
                {

                }

            }
            Bundle bundle = new Bundle();
            mailIntent.putExtra(Intent.EXTRA_TEXT, mailText);

            mailIntent.putParcelableArrayListExtra(android.content.Intent.EXTRA_STREAM, uris);
            mailIntent.setType("multipart/mixed");

                startActivityForResult(Intent.createChooser(mailIntent, "Choose client"),500);
            }

        }

        private String Download(String url) {

            String filename = String.valueOf(url.hashCode());

            File f = new File(android.os.Environment.getExternalStorageDirectory().getAbsolutePath() +File.separator +"data/test/images/", filename+".png");
            if(f.isFile())
            {
            return android.os.Environment.getExternalStorageDirectory().getAbsolutePath() +File.separator +"data/test/images/"+File.separator+ filename+".png";
            }
            return "";

        }

    });

    }

    private void Intializeviews() {
         lv=(ListView)findViewById(R.id.lv);
         btn=(Button)findViewById(R.id.btn);
    }

} 
```

图像适配器

```
public class ImgAdapter extends ArrayAdapter<String> {

    private final Activity context;
    private final String[] names;
    ImageDownloader downloader;

    public ImgAdapter(Activity context, String[] names) {

        super(context, R.layout.lvrow, names);
        this.context = context;
        this.names = names;
        Log.e("size of names is ", String.valueOf(names.length));
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = context.getLayoutInflater();
        View rowView = inflater.inflate(R.layout.lvrow, null, true);
        ImageView img = (ImageView) rowView.findViewById(R.id.img);

        String url = names[position].toString();

        downloader = new ImageDownloader();

        downloader.download(url, img);

        return rowView;

    }

} 
```

图像下载器

```
public class ImageDownloader {

    Map<String,Bitmap> imageCache;

    public ImageDownloader(){
        imageCache = new HashMap<String, Bitmap>();

    }

    //download function
    public void download(String url, ImageView imageView) {
         if (cancelPotentialDownload(url, imageView)&&url!=null) {

             //Caching code right here
             String filename = String.valueOf(url.hashCode());
             File f = new File(getCacheDirectory(imageView.getContext()), filename);

              // Is the bitmap in our memory cache?
             Bitmap bitmap = null;

              bitmap = (Bitmap)imageCache.get(f.getPath());
                BitmapFactory.Options bfOptions=new BitmapFactory.Options();
                bfOptions.inDither=false;                     //Disable Dithering mode
                bfOptions.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
                bfOptions.inInputShareable=true;              //Which kind of reference will be used to recover the Bitmap data after being clear, when it will be used in the future
                bfOptions.inTempStorage=new byte[32 * 1024]; 
                FileInputStream fs=null;

              if(bitmap == null){

                  //bitmap = BitmapFactory.decodeFile(f.getPath(),options);
                  try {
                      fs = new FileInputStream(f);
                        if(fs!=null) bitmap=BitmapFactory.decodeFileDescriptor(fs.getFD(), null, bfOptions);
                    } catch (IOException e) {
                        //TODO do something intelligent
                        e.printStackTrace();
                    } finally{ 
                        if(fs!=null) {
                            try {
                                fs.close();
                            } catch (IOException e) {
                                // TODO Auto-generated catch block
                                e.printStackTrace();
                            }
                        }
                    }

                  if(bitmap != null){
                      imageCache.put(f.getPath(), bitmap);
                  }

              }
              //No? download it
              if(bitmap == null){
                  BitmapDownloaderTask task = new BitmapDownloaderTask(imageView);
                  DownloadedDrawable downloadedDrawable = new DownloadedDrawable(task);
                  imageView.setImageDrawable(downloadedDrawable);
                  task.execute(url);
              }else{
                  //Yes? set the image
                  imageView.setImageBitmap(bitmap);
              }
         }
    }

    //cancel a download (internal only)
    private static boolean cancelPotentialDownload(String url, ImageView imageView) {
        BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);

        if (bitmapDownloaderTask != null) {
            String bitmapUrl = bitmapDownloaderTask.url;
            if ((bitmapUrl == null) || (!bitmapUrl.equals(url))) {
                bitmapDownloaderTask.cancel(true);
            } else {
                // The same URL is already being downloaded.
                return false;
            }
        }
        return true;
    }

    //gets an existing download if one exists for the imageview
    private static BitmapDownloaderTask getBitmapDownloaderTask(ImageView imageView) {
        if (imageView != null) {
            Drawable drawable = imageView.getDrawable();
            if (drawable instanceof DownloadedDrawable) {
                DownloadedDrawable downloadedDrawable = (DownloadedDrawable)drawable;
                return downloadedDrawable.getBitmapDownloaderTask();
            }
        }
        return null;
    }

    //our caching functions
    // Find the dir to save cached images
    public static File getCacheDirectory(Context context){
        String sdState = android.os.Environment.getExternalStorageState();
        File cacheDir;

        if (sdState.equals(android.os.Environment.MEDIA_MOUNTED)) {
            File sdDir = android.os.Environment.getExternalStorageDirectory();  

            //TODO : Change your diretcory here
            cacheDir = new File(sdDir,"data/test/images");
        }
        else
            cacheDir = context.getCacheDir();

        if(!cacheDir.exists())
            cacheDir.mkdirs();
            return cacheDir;
    }

    private void writeFile(Bitmap bmp, File f) {
          FileOutputStream out = null;

          try {
            out = new FileOutputStream(f);
            bmp.compress(Bitmap.CompressFormat.PNG, 80, out);
          } catch (Exception e) {
            e.printStackTrace();
          }
          finally { 
            try { if (out != null ) out.close(); }
            catch(Exception ex) {} 
          }
    }
    ///////////////////////

    //download asynctask
    public class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap> {
        private String url;
        private final WeakReference<ImageView> imageViewReference;

        public BitmapDownloaderTask(ImageView imageView) {
            imageViewReference = new WeakReference<ImageView>(imageView);
        }

        @Override
        // Actual download method, run in the task thread
        protected Bitmap doInBackground(String... params) {
             // params comes from the execute() call: params[0] is the url.
             url = (String)params[0];
             return downloadBitmap(params[0]);
        }

        @Override
        // Once the image is downloaded, associates it to the imageView
        protected void onPostExecute(Bitmap bitmap) {
            if (isCancelled()) {
                bitmap = null;
            }

            if (imageViewReference != null) {
                ImageView imageView = imageViewReference.get();
                BitmapDownloaderTask bitmapDownloaderTask = getBitmapDownloaderTask(imageView);
                // Change bitmap only if this process is still associated with it
                if (this == bitmapDownloaderTask) {
                    imageView.setImageBitmap(bitmap);

                    //cache the image

                    String filename = String.valueOf(url.hashCode());
                    File f = new File(getCacheDirectory(imageView.getContext()), filename);

                    imageCache.put(f.getPath(), bitmap);

                    writeFile(bitmap, f);
                }
            }
        }

    }

    static class DownloadedDrawable extends ColorDrawable {
        private final WeakReference<BitmapDownloaderTask> bitmapDownloaderTaskReference;

        public DownloadedDrawable(BitmapDownloaderTask bitmapDownloaderTask) {
            super(Color.BLACK);
            bitmapDownloaderTaskReference =
                new WeakReference<BitmapDownloaderTask>(bitmapDownloaderTask);
        }

        public BitmapDownloaderTask getBitmapDownloaderTask() {
            return bitmapDownloaderTaskReference.get();
        }
    }

    //the actual download code
    static Bitmap downloadBitmap(String url) {
        HttpParams params = new BasicHttpParams();
        params.setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
        HttpClient client = new DefaultHttpClient(params);
        final HttpGet getRequest = new HttpGet(url);

        try {
            HttpResponse response = client.execute(getRequest);
            final int statusCode = response.getStatusLine().getStatusCode();
            if (statusCode != HttpStatus.SC_OK) { 
                Log.w("ImageDownloader", "Error " + statusCode + " while retrieving bitmap from " + url); 
                return null;
            }

            final HttpEntity entity = response.getEntity();
            if (entity != null) {
                InputStream inputStream = null;
                try {
                    inputStream = entity.getContent(); 
                    final Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
                    return bitmap;
                } finally {
                    if (inputStream != null) {
                        inputStream.close();  
                    }
                    entity.consumeContent();
                }
            }
        } catch (Exception e) {
            // Could provide a more explicit error message for IOException or IllegalStateException
            getRequest.abort();
            Log.w("ImageDownloader", "Error while retrieving bitmap from " + url + e.toString());
        } finally {
            if (client != null) {
                //client.close();
            }
        }
        return null;
    }
} 
```

活动主

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Email Share" />

    <ListView
        android:id="@+id/lv"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent" >
    </ListView>

</LinearLayout> 
```

lvrow

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@android:color/darker_gray"
     >
    <ImageView 
        android:id="@+id/img"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:background="@drawable/ic_launcher"
        />

</LinearLayout> 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.multipleemailattachment"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_SETTINGS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:01:59.730

根据这个线程：[Android multiple email attachments using Intent](https://stackoverflow.com/questions/2264622/android-multiple-email-attachments-using-intent)，你的意图 mimetype 是错误的。它应该是 ：

```
 emailIntent.setType("text/plain"); 
```

# android - 在android中使用库项目时的问题

> ID：13393327
> 
> 赞同：0
> 
> 时间：2012-11-15T07:48:11.150
> 
> 标签：android, android-library

我开发了一个项目。它工作正常。所以我想将此项目用作其他项目的库。所以我创建了这个项目作为一个库。后来我创建了新的应用程序并将这个库项目添加到我的新应用程序项目中。然后我运行应用程序。突然，活动堆栈中的前一个屏幕自动完成。我不明白为什么会这样。任何人有这个问题的想法，请建议我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:00:02.137

即使它是作为库项目添加的。
您仍然需要在新项目 AndroidManifest.xml 中添加您正在调用/使用的活动（来自库项目）

虽然我必须说，您应该考虑显示您的 logcat 和调用代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:06:16.140

您是否设置了对您项目的引用？右键单击您的 project-properties-android-islibrary 标记它并添加

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T06:12:40.470

机器人：noHistory =“真”。因为这个属性。堆栈历史被删除。通过删除此属性，它可以正常工作

# mysql - 如何通过查询在mysql中并排获取由逗号（，）分隔的列中的所有枚举字段

> ID：13393328
> 
> 赞同：1
> 
> 时间：2012-11-15T07:48:15.287
> 
> 标签：mysql

在 mysql 中，当我使用 group by 运行查询时，我需要在列中并排获取枚举字段，如下所示。

有如下表

```
mysql> describe tabex;
+---------+----------------------------+------+-----+---------+----------------+
| Field   | Type                       | Null | Key | Default | Extra          |
+---------+----------------------------+------+-----+---------+----------------+
| id      | int(11)                    | NO   | PRI | NULL    | auto_increment |
| personid| int(11)                    | YES  |     | NULL    |                |
| color   | enum('red','blue','white') | YES  |     | NULL    |                |
+---------+----------------------------+------+-----+---------+----------------+ 
```

有不同的衬衫，personid 列描述了那个人的 id，color 表示他的衬衫的颜色。

表中数据如下

```
mysql> select * from tabex;
+----+----------+-------+
| id | personid | color |
+----+----------+-------+
|  1 |        1 | red   |
|  2 |        1 | white |
|  3 |        2 | blue  |
|  4 |        2 | red   |
+----+----------+-------+
4 rows in set (0.00 sec) 
```

当我运行查询时，我得到这样的结果

```
mysql> select personid , color from tabex group by personid;
+----------+-------+
| personid | color |
+----------+-------+
|        1 | red   |
|        2 | blue  |
+----------+-------+ 
```

但我想要下面的结果

```
+----------+-------------+               
|personid  |   color     |               
+----------+-------------+               
|1         |   red,white |               
|2         |   blue,red  |               
|          |             |               
+----------+-------------+ 
```

如何通过使用 group by 和聚合（如果有枚举）来获得上述结果。

就是在这里，我想获得枚举字段的结果，就像我们将通过使用 count 或 sum 函数和 group by 获得的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:58:42.873

`GROUP_CONCAT()`聚合函数可以满足您的要求：

```
SELECT personid, GROUP_CONCAT(color) colors
FROM tabex
GROUP BY personid 
```

这适用于任何类型的字段，而不仅仅是 ENUM。

# java - java中只允许两个或多个连字符的正则表达式？

> ID：13393331
> 
> 赞同：0
> 
> 时间：2012-11-15T07:48:40.847
> 
> 标签：java

java中只允许两个或多个连字符的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:59:18.973

是这样的：

```
String regexp = "--+"; 
```

这是如何使用它：

```
 Pattern p = Pattern.compile(regexpr);

    System.out.println(p.matcher("fsdfsa").matches()); //false
    System.out.println(p.matcher("-").matches()); //false
    System.out.println(p.matcher("--").matches()); //true
    System.out.println(p.matcher("-----").matches()); //true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:56:41.927

这明确用于连字符，而不是破折号，也不是减号。请参阅[Unicode 连字符](http://en.wikipedia.org/wiki/Hyphen#Unicode)。

```
String pattern = "[\u2010]{2,}"; 
```

您可以将所有想要允许的不同连字符添加到方括号中。以下量词表示，2 次或更多次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:56:25.693

正则表达式`\--+`将完成这项工作。

# symfony - 如何链接到 Symfony2 的上传文件？

> ID：13393335
> 
> 赞同：0
> 
> 时间：2012-11-15T07:49:01.727
> 
> 标签：symfony

我在 web/uploads/scripts 中上传了我的文件。

如何在 twig 中创建链接以使文件可下载？

我检查了路径（）和资产（），但它没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:08:41.843

您可以使用它`asset('web/uploades/script/watheveryouwant.pdf')`来创建指向该资源的链接。[在文档](http://symfony.com/doc/current/book/templating.html#including-stylesheets-and-javascripts-in-twig)中了解有关该`asset()`功能的更多信息。

# javascript - 自动完成结构化数据

> ID：13393336
> 
> 赞同：1
> 
> 时间：2012-11-15T07:49:03.323
> 
> 标签：javascript, data-structures, autocomplete

我有结构化数据，其中包含各种类型的数据。为了简单起见，假设我有这样的事情：

```
{
  person : [
    { 
      name : 'paul',
      title : 'prof',
      profession : 'teacher',
      start: '2010-10-10'
    },
    { 
      name : 'joe',
      title : 'dr',
      profession : 'scientist',
      start: '2000-01-01'
    }
  ]
  book : [
    {
       title : 'the cat in the hat'
    }
  ] 
} 
```

我想在 javascript 中有一个自动完成框，让我可以选择这些结构化元素的名称，以便在输入的字母下返回以下结果：

```
't' : {'person.title', 'book.title'}
'p' : {'person', 'person.profession'} 
```

对我来说重要的是该人可能知道树中任何变量的名称。因此，如果他们输入顶级变量的名称，我只想显示一个且没有一个是子元素，但如果他们输入子元素的名称，我想要该子元素的完整路径显示。如果他们输入顶级变量（“人”），我不想显示所有子元素，只显示始终以同一组字母开头的子元素。

与普通的自动完成相比，目前是否有任何库可以做到这一点（提供一种对结构化数据进行自动完成的方法）？

**澄清**：我想我需要的是能够告诉自动完成库一个输入和输出映射以使用，这样输入“p”最终会点击输入“人”和“职业”并因此返回“person”和“person.profession”，输入“t”会命中“person.title”的“title”和“book.title”的“title”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:56:24.430

看看自动完成 jQuery-ui 功能：http: [//jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

您需要使用该`source`参数。只需阅读 api 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:40:49.070

刚刚编写了一个递归对象的函数，以检索完整路径属性名称作为数组，例如*person.title*。然后可以将数组与[jQueryUI 自动完成](http://jqueryui.com/autocomplete/)功能一起使用。请查看小提琴以确认这是您想要的。

**[在这里](http://jsfiddle.net/bruno/3KsNx/8/)**提琴

```
var retrieveUniqueProps = ( function ( ) {

    var result = [];
    var added = {};

    isArray = function( o ) { 
        return Object.prototype.toString.call( o ) === "[object Array]";
    };

    isObject = function( o ) { return typeof o === "object"; };

    return function ( obj, parentPath ) {

        if( isArray( obj ) ) {

            for( var i = 0; i < obj.length; i++ ) {

                if( isArray( obj[i] ) || isObject( obj[i] ) ){ 
                    retrieveUniqueProps( obj[i], parentPath ); 
                }
            }

        } else if ( isObject( obj ) ) {

            for( var a in obj ) {

                if( obj.hasOwnProperty( a ) ) {

                    var fullpath = parentPath ? parentPath + "." + a : a;
                    if( !added[ fullpath ] ) {
                        result.push( fullpath );
                        added[ fullpath ] = true;
                    }

                    if( isArray( obj[a] ) || isObject( obj[a] ) ){ 
                        retrieveUniqueProps( obj[a], parentPath ? parentPath + "." + a : a ); 
                    }
                }
            }
        }

        return result;
    };

}());

var uniquePropertyNames = retrieveUniqueProps( o, "" ); 
```

**更新** 我已经修改了自动完成的源选项，以根据您的要求过滤掉结果。最后一个词必须与您在输入中输入的内容相匹配。查看更新版本的小提琴。

```
 $("#props").autocomplete({
    source: function(request, response) {

                // The term the user searched for;
                var term = request.term;

                // Extract matching items:
                var matches = $.grep(uniquePropertyNames, function(item, index) {
                // Build your regex here:
                var subArray = item.split( "." );

                if( subArray[subArray.length - 1].indexOf( term ) !== 0 ) return false;
                return true;
            });

            // let autocomplete know the results:
            response(matches);        
        }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T08:21:52.643

您可以使用该`Object.getOwnProperty`方法读取对象的所有键并对结果运行自动完成。

这里有一些讨论 -[如何在 JavaScript / jQuery 中获取对象的属性？](https://stackoverflow.com/questions/4079274/how-to-get-an-objects-properties-in-javascript-jquery?lq=1)

# c# - 如果调用代码消失，存储过程数据会怎样

> ID：13393338
> 
> 赞同：0
> 
> 时间：2012-11-15T07:49:12.007
> 
> 标签：c#, sql, sql-server, vb.net, stored-procedures

如果我的 Vb.net 或 c# Web 应用程序调用了一个将数据返回到网页的存储过程，但在存储过程过程中浏览器将关闭。

由于调用它的代码不再存在，存储过程返回的数据会发生什么情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:54:58.333

如果您有 Vb.Net 或 C# Web 应用程序，则代码不在浏览器“内部”。**浏览器只是客户端。**

**服务器端运行代码**。

**SP 将完成**，即使您在其中有任何事务，并且 SP 本身没有错误，它将被提交。

请求已从客户端发送到服务器，因此将对其进行处理。

要查看它，我建议您使用 IIS 并附加到 Visual Studio 的进程选项。如果您关闭客户端，您可以看到发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:54:38.287

那要看...

您是否在服务器代码中检查[HttpResponse.IsClientConnected](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.isclientconnected.aspx) 以定期检查客户端连接是否仍然存在？（当您将大量数据流式传输到客户端时，这很有用）。但是，如果它只是一个非分块/分页数据获取存储过程调用，那将无济于事。

如果没有，服务器端代码将简单地运行到完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T07:57:49.173

数据将返回，但没有人收到。

最终结果将是您的 sp 中是否存在 DML 查询。

# php - Node.js aes128 加密/解密端口到 PHP

> ID：13393339
> 
> 赞同：1
> 
> 时间：2012-11-15T07:49:14.207
> 
> 标签：php, node.js, encryption, openssl, aes

因此，在 node.js 中，我有一个使用 aes128 且不通过 IV 的加密方案。一个例子如下

```
 var cipher = require('crypto').createCipher('aes128','password');
 cipher.update('test','utf8','base64')+cipher.final('base64'); 
```

哪个输出`CjZ3R/tW8jiyLvg+/TE6bA==`。问题是即使我尝试了一堆实现和变体，我也无法在 PHP 中重现这一点。

然后当我尝试通过 openssl 运行它时，我运行以下命令：

```
 echo "test" | openssl enc -e -aes128 -a -k password 
```

它输出 U2FsdGVkX19Ccfv3SWvuzuZWeov9GDuwx1RMK2HWa/s= 也不匹配。我也尝试过使用`-md`所有可能的选项，但也不匹配（它们甚至不是相同的块大小）。在 PHP 中运行时，我尝试过对键/非散列进行散列，使用填充，在输入上使用计算的填充，其中填充字符是所需的填充字符数（在网上看到一些东西说这是 nodejs 使用的）。我已经尝试将 IV 设置为密码和空字节，但我仍然无法匹配。

这里有什么建议/想法吗？

编辑：

所以我刚刚在 php 中发现了函数 openssl_encrypt 并通过它尝试了相同的测试，并再次得到了完全不同的输出（这个现在与 node.js 采用完全相同的 args 并且据说它们都使用 openssl）：

```
 openssl_encrypt ( "test" , 'aes128' , "password") 
```

哪个输出（已经在base64中）`JleA91MvYHdEdnj3KYHmog==`至少现在在块数上匹配但仍然不是相同的密文。

我还应该提到，是的，将 IV 传递给 nodejs 是一种选择，可能会解决差异，但是 php 中的这个方案将替换 nodejs 中已经存在的旧方案，因此它必须能够解密已经创建的密文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T20:08:47.233

所以我想出了解决方案。浏览了node.js的c++源码后发现key和iv是使用openssl函数EVP_BytesToKey生成的。在搜索了这个函数的实现之后，我发现这个堆栈溢出帖子[在 Cocoa 中加密数据，在 PHP 中解码（反之亦然）](https://stackoverflow.com/questions/321061/encrypting-data-in-cocoa-decoding-in-php-and-vice-versa)，其中包含这个函数的一个版本。修改它并添加openssl版本用等于填充所需字节数的ascii字符填充数据的事实，我想出了以下完全匹配nodejs加密方案的函数：

```
function aes128Encrypt($key, $data) {
    $padding = 16 - (strlen($data) % 16);
    $data .= str_repeat(chr($padding), $padding);

    $keySize   = 16;
    $ivSize    = 16;

    $rawKey = $key;
    $genKeyData = '';
    do
    {
        $genKeyData = $genKeyData.md5( $genKeyData.$rawKey, true );
    } while( strlen( $genKeyData ) < ($keySize + $ivSize) );

    $generatedKey = substr( $genKeyData, 0, $keySize );
    $generatedIV  = substr( $genKeyData, $keySize, $ivSize );

    print($generatedIV);
    print($generatedKey);

    return mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $generatedKey, $data, MCRYPT_MODE_CBC, $generatedIV);
} 
```

与 node.js 函数完全匹配：

```
 function aes128Encrypt(key,data) {
      var cipher = require('crypto').createCipher('aes128',key);
      return cipher.update(data,'utf8','binary')+cipher.final('binary');
 } 
```

# ruby-on-rails - Rails/Unicorn 部署：创建 Unix 套接字的原因是什么？

> ID：13393343
> 
> 赞同：3
> 
> 时间：2012-11-15T07:49:20.267
> 
> 标签：ruby-on-rails, unicorn, upstart, foreman

我正在使用 Capistrano/Unicorn/Foreman/Upstart 部署 Rails 2.3 // Spree 应用程序。

我无法弄清楚的部分是如何让 /myapp/shared/sockets/unicorn.sock 由工头/新贵进程管理自动创建（至少我认为 unix 套接字应该来自他们）。

什么负责创建 unix 套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:21:56.340

假设您的配置是 nginx + unicorn 。您可能知道，在配置目录中您应该创建一个名为 unicorn.rb 的文件。在这个文件中有一个描述如何处理非静态请求，像这样：

```
upstream unicapd {
  server unix:/tmp/capd.sock fail_timeout=0;
} 
```

我对上游的命名与教程中所述不同，这使我能够在同一主机上托管许多不同的应用程序。

然后，在 Nginx 配置的 vhosts 目录中放置类似这样的内容（假设您的主机文件是“vhosts/myconf.conf”：

```
location @unicorn1 {
proxy_pass http://unicapd;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header Host $http_host;
proxy_redirect off;
   } 
```

在这里，您会看到 nginx 的说明，以从名为“http://unicapd”的地方提供非静态请求，这与您的 unicorn.rb 配置文件有关。此配置由文件触发，该文件位于您的 init.d（如果您正在运行 Debian）目录中。

摘要：当您说 bundle exec unicorn --restart 时，您的 init.d 中的脚本会触发代码，形成一个“特殊”文件 /tmp/capd.sock ，它为您的 Rails 应用程序提供动态内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T18:58:32.780

在 unicorn 的配置中配置的 unix-socket 的路径：
`...
listen "/home/user/app/shared/sockets/unicorn.sock", :backlog => 64
...`

然后在 nginx.conf 中：

```
 location / {
            try_files $uri @unicorn;
            proxy_cache cache;
            proxy_cache_valid 10m;
    }        
    location @unicorn {
            proxy_set_header  Client-Ip $remote_addr;
            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header  Host $host;
            proxy_pass  http://unix:/home/user/apps/shared/sockets/unicorn.sock;
    } 
```

当应用程序启动时，独角兽在设置的路径中创建套接字文件（用户必须对该路径具有写权限）

# java - 如何使客户端使用新的 Java 小程序加载新的 html 页面

> ID：13393344
> 
> 赞同：0
> 
> 时间：2012-11-15T07:49:21.057
> 
> 标签：java, html, apache, google-chrome, windows-xp-embedded

如何使客户端的浏览器使用新的 Java 小程序加载新版本的 html 页面？

我们在现场更新了一个系统，但是当客户端连接到 Web 服务器时，仍然显示旧的 Java 小程序（来自缓存）。

如何强制（最好从服务器端）客户端加载新版本，而不是从它的缓存中加载新版本？

旧系统（升级前）：

*   老linux版本（10年以上）
*   旧的 apache 网络服务器（超过 10 年）
*   旧的java小程序（单独的类文件）（大约2岁）
*   网络服务器根目录中的旧 index.html（大约 2 岁）

新系统（升级后）：

*   与旧系统相同的 IP 地址和端口
*   windows xp 嵌入式
*   apache/2.2.21 (win32) 网络服务器
*   jar 文件中的新 Java 小程序（与旧版本不同的类名）
*   网络服务器根目录中的新 index.html

用户在 Windows XP 机器上使用 Chrome

当用户在 Firefox 中加载页面时，新的 java 小程序显示出来并且可以完美运行。（他从来没有在 Firefox 中加载过旧的 java 小程序）

[编辑]

将 looper 中的行添加到我的 httpd.conf 并没有导致任何错误，但我不确定它是否有效......

我似乎无法重现我的客户端的缓存问题：当我在小程序中更改某些内容并从另一台计算机再次加载它时，没有任何变化，但是当我在几分钟后重新加载时，它确实显示新版本 .. 没有或没有那些带有 CacheDisable 的额外行

当我在 httpd.conf 中搜索“缓存”时，我发现的只是：

```
#LoadModule cache_module modules/mod_cache.so
#LoadModule disk_cache_module modules/mod_disk_cache.so
#LoadModule file_cache_module modules/mod_file_cache.so
#LoadModule mem_cache_module modules/mod_mem_cache.so 
```

所以似乎没有启用缓存？

当我自己添加带有 CacheDisable 的行（没有 IfModule）时，Apache 不想启动，所以它可能会损坏 httpd.conf ？

[编辑2]

由于服务器操作系统、web服务器、java类名以及除index.html之外的所有文件名都与旧版本不同，因此问题的原因一定是缓存的index.html。我将 FrancescoMM 的回答中的元标记添加到我的 index.html 中，希望这能防止未来版本出现问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:34:38.913

除非您放置允许小程序根据服务器指令使自己无效的功能，否则您必须从客户端进行重置。根据提供的信息，应该清除浏览器上的缓存。每个浏览器都有一种清除缓存的方法。我不相信有比这更短的方法。

每个系统在首次部署时都会变成遗留系统。计划升级总是一个好主意。至少，任何进行服务器通信的小程序都应该向服务器报告其版本号，使服务器能够拒绝服务、开始升级、通知用户或任何其他适当的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:00:15.010

如果 java 类不同，那么索引文件就是缓存中的那个。它也可能是客户端代理缓存，因此对服务器进行操作没有结果。

最快的解决方案是向客户端发送一个新的 url：

```
http://www.site.com/index.html?random_param=1234
http://www.site.com/?random=1234
http://www.site.com/?1234
http://www.site.com/?new 
```

甚至只是

```
http://www.site.com/? 
```

应该足够了。

**编辑**

此外，您是否尝试将所有 pragma no cache 和到期日期元标记添加到 HTML 页面？这应该告诉客户端代理重新加载页面。

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
<META HTTP-EQUIV="EXPIRES" CONTENT="Mon, 22 Jul 2002 11:12:01 GMT"> 
```

请注意，EXPIRES 故意设置为旧日期。这一次可能不能解决你的问题，好像新索引没有加载，没有人（服务器、代理、客户端）会看到新标签，但会确保下次每次加载页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:25:43.663

只需在 httpd.conf 中强制 Apache 中的 no-cache 即可。

来自 apache 文档：

```
<IfModule mod_cache.c>
    CacheDisable /local_files
</IfModule> 
```

您可以指定小程序文件的完整路径，而不是禁用所有本地文件的缓存。

# iphone - iOS Google Drive sdk 集成和权限

> ID：13393345
> 
> 赞同：2
> 
> 时间：2012-11-15T07:49:25.737
> 
> 标签：iphone, ios, google-drive-api, google-api-objc-client

实际上我按照这个链接[google drive sdk for develoeprs](https://developers.google.com/drive/examples/objectivec)

我配置了他们在上面链接中提到的所有东西。但我面临的问题是示例应用程序 DrEdit 在登录后没有在 ios 模拟器上列出文本文件，并且在我授予“允许访问”权限后，即使我的谷歌驱动器中有一些文本文件。我在这里做了什么？我的另一个疑问是为什么 DocuDign Ink ios 应用程序权限和 DrEdit 应用程序权限之间存在差异。请在此处查看屏幕截图，我附上了一张我从模拟器中从 DrEdit 中获取的截图，另一张从我的 iPad 上的 DocuSign Ink ios 应用程序中获取。![DrEdit Google Drive sdk 许可页面](../Images/6331eb788eae0f051906552c5b87cadd.png) ![DocuSign Ink Google Drive SDK 许可页面](../Images/c33dc03c1f560a8c7467ec4346acc5d3.png) **笔记：** DrEdit 应用程序显示权限：“查看和管理您使用此应用程序打开或创建的 Google Drive 文件”。但我希望看到这样的权限：“查看和管理您在 Google Drive 中的任何文档和文件”。我如何以及在哪里可以更改权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T00:30:34.003

DrEdit 使用有限的`drive.file`范围，只允许它访问它创建的文件或用户用它打开的文件。

相反，DocuSign 请求`drive`允许应用管理所有用户的云端硬盘文件的完整范围。

强烈建议在可能的情况下请求限制范围。有关所有可用范围的更多详细信息，请查看 Google Drive SDK 文档：

[https://developers.google.com/drive/scopes](https://developers.google.com/drive/scopes)

# java - 无法接收来自 Apache James 的电子邮件

> ID：13393347
> 
> 赞同：0
> 
> 时间：2012-11-15T07:49:32.837
> 
> 标签：java, email, jakarta-mail, james

我开发了一个 webmail 来链接 apache james，它可以工作。但是有些用户无法收到来自 james 的电子邮件。我设置`mailSession.setDebug(true)`和跟踪两个用户的日志（sa 可以接收，另一个不能）。区别如下：

能成功接收邮件的用户（用户sa）：

```
[2012-11-15 14:24:12] com.csc.mail.jsh.mail.core.ReceiveMail : [INFO ]  - trying to receive emails from james server...
C: STAT
S: +OK 2 2584
C: NOOP
S: +OK
C: TOP 1 0
S: +OK Message follows
... 
```

其他用户接收失败（用户 chai）：

```
[2012-11-15 14:22:01] com.csc.mail.jsh.mail.core.ReceiveMail : [INFO ]  - trying to receive emails from james server...
C: STAT
S: -ERR
C: QUIT
S: +OK Apache James POP3 Server signing off.
[2012-11-15 14:22:03] com.csc.mail.jsh.mail.core.ReceiveMail : [ERROR]  - Folder open failed：javax.mail.MessagingException: Open failed;
nested exception is:
    java.io.IOException: STAT command failed: null
    at com.sun.mail.pop3.POP3Folder.open(POP3Folder.java:228)
    at com.csc.mail.jsh.mail.core.ReceiveMail.receive(ReceiveMail.java:82)
    at com.csc.mail.jsh.mail.core.ReceiveMail.run(ReceiveMail.java:222)
    at java.lang.Thread.run(Thread.java:619)
Caused by: java.io.IOException: STAT command failed: null
    at com.sun.mail.pop3.Protocol.stat(Protocol.java:366)
    at com.sun.mail.pop3.POP3Folder.open(POP3Folder.java:203)
    ... 3 more 
```

我的接收代码：

```
Session mailSession = Session.getInstance(System.getProperties(), null);
mailSession.setDebug(true);
Store store = null;
Folder folder = null; //javax.mail.Folder
try {
    store = mailSession.getStore("pop3");
    store.connect(Property.getPop3(), userName, password);
    logger.info("trying to receive emails from james server...");
    folder = store.getFolder("INBOX");
    try {
        if (!folder.isOpen()) {
            folder.open(Folder.READ_WRITE); //the point of throwing the exception
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    //receive email from james server.
} catch (Exception e) {
    logger.error("Email Receive Error!" + StackTraceStr.st2str(e));
    try {
        folder.close(true);
    } catch (Exception e2) {
    }
} finally {
    try {
        store.close();
    } catch (Exception cloex) {
    }
} 
```

我在[这里](https://stackoverflow.com/questions/13357204/open-javamail-folder-failed/13358889#13358889)发了一个帖子。感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:20:46.923

我不知道你为什么为此开始另一个线程......

你的服务器有问题。检查服务器日志。它使 STAT 命令失败，但没有报告失败的任何原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:02:47.867

我与 Apache James 有过接触，终于找到了答案。你可以在这里找到它：[STAT 命令偶尔失败](http://www.mail-archive.com/server-user@james.apache.org/msg14115.html)。在页面的末尾，已列出该线程。

# ejb - 包含使用 javax.annotation.* 的 Jar

> ID：13393350
> 
> 赞同：2
> 
> 时间：2012-11-15T07:49:46.953
> 
> 标签：ejb, glassfish-3, jdeveloper

我有点困惑。我需要在 jDeveloper 11.1.1.6.0 中编译一个项目。项目的服务器端部署在 Glassfish 服务器上。在项目创建者的机器上，一切编译都没有任何问题。

使用项目，我从和其他一些（例如从休眠目录）`properties -> Libraries and Classpath`添加了诸如`gf-client.jar`安全性等库。`$glassfish_home/glassfish/modules``hibernate3.jar`

当我尝试编译项目时，我收到以下错误：

> 包 javax.annotation.security 不存在

和

> 包 javax.persistence 不存在。

我想我想念一些要包括的罐子。我试图找到包含哪些罐子（来自 Glassfish 或来自 JDK）`javax.annotation.*`，`javax.persistence.*`但我找不到。

如果您有任何想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:19:26.497

所以我找到了问题的根源。该应用程序由 2 个项目组成，其中只有一个（问题中提到）使用 EJB。我不确定它是否应该是这样，但我尝试将 ejb 文件添加到另一个项目。之后`clean all`，`rebuild all`它对我来说就像一个魅力。我希望这将有助于将来的某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-27T19:18:49.463

我遇到了同样的问题，并且能够通过向 Maven pom.xml 文件添加几个依赖项来解决它。 [有关更多详细信息，请参阅此答案](https://stackoverflow.com/a/41350852/1565374)。

# java - StringBuffer 替换方法不起作用

> ID：13393351
> 
> 赞同：1
> 
> 时间：2012-11-15T07:49:47.953
> 
> 标签：java, replace, stringbuffer

我想用我的 java 程序读取同一文件夹中的文本文件。我有一个 readFile() 用于逐行读取文件的内容。然后 setName() 将替换部分内容。我编译程序并运行没有错误。但是文件的内容根本没有改变。

谢谢

```
public StringBuffer readFile(){ //read file line by line
        URL url = getClass().getResource("test.txt");
        File f = new File(url.getPath());
        StringBuffer sb = new StringBuffer();
        String textinLine;

        try {
            FileInputStream fs = new FileInputStream(f);
            InputStreamReader in = new InputStreamReader(fs);
            BufferedReader br = new BufferedReader(in);

         while (true){
                textinLine = br.readLine();
                if (textinLine == null) break;
                sb.append(textinLine);
            }
            fs.close();
            in.close();
            br.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return sb;

    }

    public void setName(String newName){
        StringBuffer sb = readFile();       
        int pos = sb.indexOf("UserName=");
        sb.replace(pos, pos+newName.length(), newName);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:51:17.383

您必须写回文件以使其更改，但您不会更改 StringBuffer 的内容，您只是在读取它。更改内容后，您需要将新内容写入文件，例如：

```
try{
        FileWriter fwriter = new FileWriter(YourFile);
        BufferedWriter bwriter = new BufferedWriter(fwriter);
        bwriter.write(sb.toString());
        bwriter.close();
     }
    catch (Exception e){
          e.printStackTrace();
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:54:08.953

您不会更改文件的内容，而是更改 StringBuffer 的内容。如果您`System.out.println(sb.ToString())`在方法之前和之后查看您的 StringBuffer ( ) `sb.replace`，您将看到在哪里*进行*了更改

# android - ScheduledThreadPoolExcecutor 中的 RejectedExecutionException

> ID：13393353
> 
> 赞同：0
> 
> 时间：2012-11-15T07:50:07.017
> 
> 标签：android, multithreading

我在盯着 ScheduledThreadPoolExecutor 时遇到异常。我用它每分钟轮询一次服务器。

```
01-11 18:45:50.243: E/AndroidRuntime(2427): Caused by: java.util.concurrent.RejectedExecutionException: pool=0/2147483647, queue=0 
```

我的代码

```
stpe.scheduleWithFixedDelay(new Runnable() {  
        public void run() {  

            //Start Polling:
            Calendar cal = Calendar.getInstance();
            cal.getTime();
            SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
            System.out.println( sdf.format(cal.getTime()) );
            Log.d("Polling", sdf.format(cal.getTime()) + " Polling for devices");

            HttpUtil httpUtil = new HttpUtil(mContext);
            httpUtil.setJNAPCode(R.string.action_devices);
            httpUtil.executeJNAPAction(true);

        }  
    },0, 60,TimeUnit.SECONDS); 
```

这在创建活动时调用。每次我开始活动时，我都会收到此异常，即它在下次崩溃后加载时工作。

在完成活动之前，我使用**stpe.shutdownNow()**将其关闭。但是，当下次在加载应用程序后创建此活动时，我得到了异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:56:23.837

一旦执行器关闭，您将无法提交新任务。您可以存储该`scheduleAtFixedRate`方法返回的未来并在离开活动之前取消它，同时保持执行器运行。当活动恢复时重新安排任务。

或者：在离开活动时关闭执行器，并在活动恢复时**创建**一个新的。

# linux - 远程登录本地主机

> ID：13393356
> 
> 赞同：5
> 
> 时间：2012-11-15T07:50:23.880
> 
> 标签：linux, telnet

嗨，我正在尝试了解 ssh 和 telnet 等网络命令。不幸的是，除了我自己的系统之外，我没有任何其他系统，所以我只使用 localhost 进行测试。当我尝试在本地进行 telnet 时，我可以在本地进行 ssh，但出现此错误

我正在尝试的命令是 telnet localhost，我没有输入任何端口号。

正在尝试 127.0.0.1...

telnet：连接到地址 127.0.0.1：连接被拒绝

正在尝试 fe80::1 ...

telnet：连接到地址 fe80::1：连接被拒绝

telnet：无法连接到远程主机

如果我能够在本地进行 ssh，那么也应该适用于 telnet 对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T07:53:38.567

显然，您的机器上没有本地运行的 telnet 服务器。

要查看 telnet 命令的工作原理，您可以执行以下操作：

> 远程登录 debra.dgbt.doc.ca
> 
> 远程登录 example.com 80

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:58:15.647

安装 Telnet 服务器：

> 控制面板/打开/关闭 Windows 功能 --> Telnet 服务器

对于 ssh，您可以安装`freeSShd`一个免费的 ssh 守护进程

# git - 编辑git笔记时，以#开头的行消失？

> ID：13393361
> 
> 赞同：0
> 
> 时间：2012-11-15T07:51:03.210
> 
> 标签：git

如果我使用`git notes --ref=$REF edit $COMMIT`，原始消息是：

注释（xxx）：

```
#NEW

path/to/file1: your message

path/to/file2: your message

#TEST

path/to/file3: your message 
```

然后消息变成

注释（xxx）：

```
path/to/file1: your message

path/to/file2: your message

path/to/file3: your message 
```

如何避免这种情况？我想保留“#”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:23:16.073

如果你`builtin/notes.c`在 Git 中看一下，你会看到`stripspace(&(msg->buf), 1);`它[调用了一个 editor](https://github.com/git/git/blob/master/builtin/notes.c#L165)，但`stripspace(&(msg->buf), 0);`如果消息是[在命令行上](https://github.com/git/git/blob/master/builtin/notes.c#L232)或[通过文件](https://github.com/git/git/blob/master/builtin/notes.c#L246)传递的。[`stripspace(..., 1);`](https://github.com/git/git/blob/master/builtin/stripspace.c#L21)表示“跳过评论”，这会导致它也删除评论（以 开头的行`#`），而`stripspace(..., 0)`表示“不要跳过评论”，因此它们将被包括在内。

因此，在行首创建包含 a 的注释的最佳方法似乎是在命令行上`#`传递注释或从文件中读取注释。`-m 'note contents'``-F filename`

这适用于 git.git 中最新版本的代码；我已经用 1.8.0 进行了测试。

# java - getItemList() 中的错误

> ID：13393363
> 
> 赞同：0
> 
> 时间：2012-11-15T07:51:12.087
> 
> 标签：java, android, web-services, parsing, rest

为了获取网站的内容并显示在android应用程序中，首先必须执行哪个任务，是Webservices，Http Response？我已经按照stackoverflow人员中给出的许多教程和链接进行操作，但仍然无法完成我的任务，所以最后按照链接[Need a simple tutorial for android/webservice work?](https://stackoverflow.com/questions/7520243/need-a-simple-tutorial-for-android-web-service-work) ，在 FirstActivity 类的 xml.getItemList() 中出现错误。xml文件是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:android1="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android1:id="@+id/listView1"
    android1:layout_width="match_parent"
    android1:layout_height="wrap_content" >
</ListView> 
```

MainActivity 代码是：

```
 package com.webservices;

public class FirstActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_first);

          FetchList fl = new FetchList();
           fl.execute();
           }
   //Always better to use async task for these purposes
    public class FetchList extends asyncTask<Void,Void,Byte>{

        protected String doinbackground(string... urls){
             // this was explained in first step
              Response res = new Response("http://www.google.com");
              String response = res.getResponse();
              XMLParser xml = new XMLParser(response);
               ArrayList<item> itemList = xml.getItemList();
               xml.parse();
          };

        public void execute() {
            // TODO Auto-generated method stub
                }
         }
Response class is:
public class Response {
String get_url, response;
Activity activity;

public Response(String url){
    this.get_url = url;

}

public String getResponse(){
     InputStream in = null;        
      byte[] data = new byte[1000];
        try {
              URL url = new URL(get_url);   
              URLConnection conn = url.openConnection();
              conn.connect();
            /*  conn.*/
              in = conn.getInputStream();
              Log.d("Buffer Size +++++++++++++", ""+in.toString().length());
              BufferedReader rd = new BufferedReader(new InputStreamReader(in),in.toString().length());
              String line;
              StringBuilder sb =  new StringBuilder();
              while ((line = rd.readLine()) != null) {
                    sb.append(line);
              }
              rd.close();
              response = sb.toString();

             in.read(data);
          Log.d("INPUT STREAM PROFILE RESPONSE",response);
            in.close();
        } catch (IOException e1) {
            Log.d("CONNECTION  ERROR", "+++++++++++++++++++++++++++");
            // TODO Auto-generated catch block

            e1.printStackTrace();
        }
        return response;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:56:56.977

你的问题不是很清楚。为什么要通过 xml 解析器解析 google 索引页面？

你想做：

```
 protected String doinbackground(string... urls){
    HttpUrlConnection conn = new URL( urls[0] ).openConnection();
    BufferedReader reader = new BufferedReader( conn.getInputStream() );
    String s = reader.readFully();    
}; 
```

或类似的东西（带有异常处理）。

我建议您不要使用 AsyncTask 进行联网。看看[RoboSpice](http://goo.gl/jxNin)，它更适合网络请求。

# c# - 使用多个文件创建内存存档

> ID：13393364
> 
> 赞同：1
> 
> 时间：2012-11-15T07:51:12.507
> 
> 标签：c#, asp.net, asp.net-mvc-3, pdf, sharpziplib

> **可能重复：**
> [使用 System.IO.Packaging 生成 ZIP 文件](https://stackoverflow.com/questions/6386113/using-system-io-packaging-to-generate-a-zip-file)

我有一个控制器，可以在其中创建多个 PDF 文件。

我需要做的是，foreach pdf 我在控制器中创建，将其添加到临时存储在内存中的 zip 存档中（因为我不能使用本地资源），然后在我的浏览器中提供 zip 存档作为下载（asp页）。

如何做到这一点？

# objective-c - 创建“全局方法”

> ID：13393368
> 
> 赞同：1
> 
> 时间：2012-11-15T07:51:39.743
> 
> 标签：objective-c

> **可能重复：**
> [如何在 Objective-C 中创建全局函数](https://stackoverflow.com/questions/7294176/how-to-create-global-functions-in-objective-c)

我很好奇在 Objective C 中创建任何类都可以使用的全局实用程序方法通常是如何完成的。

我能想到的简单且唯一的解决方案是简单地创建一个类，即称其为 GlobalMethods，然后创建一堆类方法，这样就可以在没有实例化此类的情况下使用它们。

这是一个明智而有效的方法吗？关于方法的类型，它们可能是任何东西，例如我使用的自定义数学公式等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T07:59:58.203

我使用这种确切的方法来提供`CocoaUtil`提供各种应用程序服务的全局类。

但是，您可以简单地定义执行 Objective-C 事情的全局 C 函数；例如：

实用程序.h：

```
extern NSString *helloWorld(int i); 
```

实用程序：

```
NSString *helloWorld(int i)
{
    return [NSString stringWithFormat:@"Hello World %d", i];
} 
```

但是，我使用 Objective-C 类方法，因为它提供了更好的“命名空间”支持，比如 C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:06:59.927

有几种常见的方法可以使某些代码在全球范围内可用。以下是一些来自 Apple 公共 API 的示例：

*   在新类上创建类方法。这是你建议的。例子：`NSPropertyListSerialization`, `NSJSONSerialization`.

*   在一些适当的现有类上创建类方法。示例：UIKit 使用类别将类方法添加到`NSValue`，例如`valueWithCGRect:`和`valueWithCGPoint:`。

*   创建一个理解一组相关消息的单例。例子：`[UIApplication sharedApplication]`, `[NSFileManager defaultManager]`.

*   创建普通的旧 C 函数。示例：`UIImagePNGRepresentation`、`UIRectFill`、`NSLog`、`NSStringFromCGPoint`和 pantload 更多。

*   如果代码特别对某个对象进行操作，请使用类别在该对象的类中添加一个方法。示例：`UIKit`添加`sizeWithFont:`、`drawAtPoint:withFont:`和相关方法以`NSString`使用类别。

# sql - 条件 where 子句 SQLServer

> ID：13393372
> 
> 赞同：0
> 
> 时间：2012-11-15T07:51:54.107
> 
> 标签：sql, sql-server, where

我正在使用 SQLServer 2008 并遇到了这个问题。我有一个功能，用户可以从菜单中选择多个日期。他们还可以选择勾选“选择所有日期”复选框。

如果他们选中复选框，我的查询应该只返回给定日期的结果。因此执行一个 WHERE 子句。如果他们没有选择复选框但选择了一个或多个日期；查询应使用 where 子句执行。

我有 2 个参数。-SelectedDates(例如'2012-11-15','2012-11-15') -AllDates ('X' or '')

通常查询应该是这样的：

```
SELECT * FROM x
WHERE x.date in ([Param.1]) 
```

所以我的问题是：如果不需要 WHERE 子句，我该如何调整查询。

仅供参考：[Param.1] 符号用于我工作的环境中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:04:24.010

很简单，使用 OR 子句，如果选中了 alldates，它将返回所有日期的数据，如下所示：

```
SELECT * FROM x
WHERE x.date in ([Param.1]) OR ([Param.2]) = 'X' 
```

如果选中 Param.2 ('X')，它将忽略第一个条件的结果，因为您使用的是 OR 子句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:02:24.963

如果您的所有日期都存在于控件中，则检查全部还可以生成日期，因此您仍然可以使用 WHERE IN ('date1',....'dateN')

你也有这个选择

```
WHERE x.Date IN (.....) OR AllDates = 'X' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T07:57:51.753

这`AllDates`是第二个参数，当用户选中所有日期的复选框时

```
IF(AllDates is not null)
SELECT * FROM x
ELSE
SELECT * FROM x
WHERE x.date in ([Param.1]) 
```

# android - 在 SD 卡中创建文件失败

> ID：13393373
> 
> 赞同：0
> 
> 时间：2012-11-15T07:52:12.847
> 
> 标签：android, sd-card

我将下载文件写入 SD 卡程序。但我不知道为什么创建文件失败。Logcat 打印这样的信息：

```
11-15 01:22:14.369: I/System.out(385): /mnt/sdcard/
11-15 01:22:16.413: I/System.out(385): file------->/mnt/sdcard/test/1.mp3
11-15 01:22:16.419: I/System.out(385): createSDFile 
```

它捕捉到错误：

```
11-15 00:21:29.248: W/dalvikvm(352): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-15 00:21:29.259: E/AndroidRuntime(352): FATAL EXCEPTION: main
11-15 00:21:29.259: E/AndroidRuntime(352): java.lang.NullPointerException
11-15 00:21:29.259: E/AndroidRuntime(352): at java.io.FileOutputStream.<init>(FileOutputStream.java:97)
11-15 00:21:29.259: E/AndroidRuntime(352): at java.io.FileOutputStream.<init>(FileOutputStream.java:69)
11-15 00:21:29.259: E/AndroidRuntime(352): at com.example.Utils.FileUtils.write2SDFromInputStream(FileUtils.java:60)
11-15 00:21:29.259: E/AndroidRuntime(352): at com.example.Utils.HttpDownload.downloadFile(HttpDownload.java:70) 
```

由于信息，文件已正确创建。我使用 fileExplorer 检查 /mnt/sdcard/，但找不到错误。路径中的“/”有问题吗？网络连接权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

sdcard中创建或删除文件的权限

```
<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"></uses-permission> 
```

调用下载方法：`hdl.downloadFile("http://169.254.57.236/test/1.mp3","test/","1.mp3");`

文件下载类

```
package com.example.Utils;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.os.Environment;
import android.util.Log;

public class FileUtils {
private String SDPATH;

public FileUtils(){
SDPATH = Environment.getExternalStorageDirectory()+"/";
}

//create directory on SD card
public File createSDDir(String dirName){
File dir = new File(SDPATH+dirName);
dir.mkdirs();
return dir;
}

//cteate file on SD card：
public File createSDFile(String dirAndFilename) throws IOException{
File file = new File(SDPATH+dirAndFilename);
file.createNewFile();
return file;
} 

//check the file in SD card is exited or not
public boolean isFileExist(String fileName){
File file = new File(SDPATH + fileName);
return file.exists();
}

//put InputStream data into SD card
public File write2SDFromInputStream(String path,String fileName,InputStream in){
File file = null;
OutputStream out = null;

try {
createSDDir(path);
try{
file = createSDFile(path+fileName);
}

catch(Exception e){
System.out.println("createSDFile failed");
}

out = new FileOutputStream(file); 
byte buf[] = new byte[1024*5];
int ch = 0;
while((ch = in.read(buf))!=-1){
out.write(buf);
out.flush();
}

} catch (IOException e) {

System.out.println("SD write failed！");
e.printStackTrace();
}finally{

if(out!=null)
try {
out.close();
} catch (IOException e) {
e.printStackTrace();
System.out.println("SD Write inflow closed failure！");
}
}

return file;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:58:30.137

检查是否添加清单权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:07:35.087

尝试使用 mkdirs()

```
 File sdCardDirectory = Environment
                    .getExternalStorageDirectory();
            new File(sdCardDirectory + "/XXX/Wallpapers/").mkdirs();
            File image = new File(sdCardDirectory
                    + "/XXX/Wallpapers/Sample" + numberOfImages + ".JPG"); 
```

并在清单中使用权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:01:32.617

没有代码，这几乎是不可能的。但是您是否已经创建了文件？

```
File f;
f=new File(Environment.getExternalStorageDirectory() + "/whatever_dic");
f.createFile(); 
```

# hibernate - NHibernate Projections.SqlProjection 和 Projections.SqlFunction 可以跨数据库移植吗？

> ID：13393374
> 
> 赞同：1
> 
> 时间：2012-11-15T07:52:20.193
> 
> 标签：hibernate, nhibernate, hibernate-criteria

我有一些预测（*Projections.SqlProjection*）的 CriteriaAPI 查询。*Projections.SqlProjection*方法中的第一个参数是 sql 字符串。我想更改查询以使其可跨数据库移植。*Projections.SqlProjection*方法中的 sql 字符串参数应该怎么做？我应该将sql重写为hql吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:53:29.477

如果提供的 sql 是 ANSI SQL，并且目标数据库支持使用的语法，则它已经是可移植的。当使用数据库特定功能时，您需要重写它。这可能很难，因为使用原生 SQL 是有原因的。原作者有可能只是不知道hibernate中有一个很好的解决方案。

# vb.net - 将字符串与类名进行比较

> ID：13393381
> 
> 赞同：1
> 
> 时间：2012-11-15T07:53:00.550
> 
> 标签：vb.net

我有一个小问题：我有一个方法可以解析传入字符串的某些值，如果找到一个值，就会实例化一个新类。类名与解析的字符串相同。目前，我的代码如下所示：

```
Public Class Test1
End Class

Public Class Important
End Class

Public Class DoWork
Public Sub DoWork(incoming as String)
Select case incoming
case "Test1"
dim myobj as new Test1
Case "Important"
dim myobj as new Important
End Select
End Sub
End Class 
```

我不喜欢像“Test1”这样的字符串文字——我可以将它们存储在一个常量中，但如果类名改变，它们也必须改变。有没有办法用类的名称替换文字？我知道 me.gettype 会为实例化对象生成结果，但是对于一个类的简单名称，此时它还不是对象呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:13:19.517

如果您的字符串格式正确，您可以使用[Type.GetType(string)](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-6)方法来检索类型。然后，如果您在该类型上有默认构造函数，则可以使用[Activator](http://msdn.microsoft.com/en-us/library/system.activator.aspx)类创建实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:10:21.997

Rafal 的回答很好，如果你被当前的情况困住了，传入的字符串参数。但它仍然有点脆弱。如果传入的参数发生变化怎么办？如果你想重构你的代码，将一些类移动到不同的命名空间或程序集中怎么办？如果这些字符串发生了变化——您现在是否必须重命名您的类并重新编译？您现在没有明确看到魔术字符串，但它们仍然存在。

所以问问自己——这些字符串是从哪里来的？它们是由您的代码在内部生成的吗？如果是这样，您可能希望生成与要实例化的类相对应的 Enum 值，而不是字符串。如果它们是映射到类的外部字符串，请考虑使用映射 String->Type 的显式映射（例如在配置文件中）。它有点麻烦，但更灵活。

# c# - 需要修复：- ObjectDataSource 'odsShiftDetails' 不支持更新，除非指定了 UpdateMethod

> ID：13393384
> 
> 赞同：0
> 
> 时间：2012-11-15T07:53:07.917
> 
> 标签：c#, asp.net, sql-server-2008, ajaxcontroltoolkit

```
<asp:Panel ID="pnlGrdShift" runat="server" ScrollBars="Auto" Width="900px" Height="520px" CssClass="srcColor">
            <cc1:GridView  ID="gvShift" runat="server" AutoGenerateColumns="False" AllowSorting="True"
               CssClass="grid"
               OnDataBound="gvShift_DataBound" 
               DataSourceID="odsShiftDetails" 
               AllowPaging="True" 
               ShowFooter="false"
               onrowcancelingedit="gvShift_RowCancelingEdit" 
               onrowcommand="gvShift_RowCommand" 
               onrowdeleting="gvShift_RowDeleting" 
               onrowediting="gvShift_RowEditing" 
               onrowupdating="gvShift_RowUpdating" 
               OnSelectedIndexChanged="gvShift_SelectedIndexChanged" 
               OnRowDataBound="gvShift_RowDataBound">        
                <AlternatingRowStyle CssClass="altrowstyle"  />
                <HeaderStyle CssClass="headerstyle" />
                <RowStyle CssClass="rowstyle" Wrap="false"  />
                <EmptyDataRowStyle BackColor="#edf5ff" Height="300px" VerticalAlign="Middle" HorizontalAlign="Center" />
                <EmptyDataTemplate >
                    No Records Found
                </EmptyDataTemplate> 
                <Columns>
                    <asp:TemplateField HeaderText="E Code" SortExpression="userecode" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                        <ItemTemplate>
                            <asp:Label ID="lblUserECode" runat="server" Text='<%#Eval("userecode") %>' CssClass="GridContent" />                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:Label ID="lblEditUserECode" runat="server" Text='<%#Eval("userecode") %>' style="width:50px;" CssClass="GridContent" />                    
                        </EditItemTemplate>
                    </asp:TemplateField>                       

                    <asp:TemplateField HeaderText="User Name" SortExpression="username" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                        <ItemTemplate>
                            <asp:Label ID="lblUserName" runat="server" Text='<%#Eval("username") %>' CssClass="GridContent" />                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:Label ID="lblEditUserName" runat="server" Text='<%#Eval("username") %>' style="width:100px;" CssClass="GridContent"/>                    
                        </EditItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Shift Start Time" SortExpression="ShiftStartTime" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                         <ItemTemplate>
                            <asp:Label ID="lblShiftStartTime" runat="server" Text='<%#Eval("ShiftStartTime") %>'  CssClass="GridContent"/>                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="ddlShiftStartTime" runat="server" Text='<%#Eval("ShiftStartTime") %>' style="width:65px;" CssClass="GridContent" />
                            <asp:RegularExpressionValidator ID="RegularExpValidatorddlShiftStartTime" runat="server" ControlToValidate="ddlShiftStartTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />                            

                        </EditItemTemplate>                            
                    </asp:TemplateField>  

                    <asp:TemplateField HeaderText="Shift End Time" SortExpression="ShiftEndTime" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                        <ItemTemplate>
                            <asp:Label ID="lblShiftEndTime" runat="server" Text='<%#Eval("ShiftEndTime") %>' CssClass="GridContent" />                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="ddlShiftEndTime" runat="server" Text='<%#Eval("ShiftEndTime") %>' style="width:65px;" CssClass="GridContent"  />
                            <asp:RegularExpressionValidator ID="RegularExpValidatorddlShiftEndTime" runat="server" ControlToValidate="ddlShiftEndTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />                            

                        </EditItemTemplate>                            
                    </asp:TemplateField>
                        <%--<asp:BoundField DataField="ShiftEndTIme" HeaderText="Shift End Time" SortExpression="ShiftEndTIme"/>--%>
                    <asp:TemplateField HeaderText="Saturday Shift Start Time" SortExpression="WeekendShiftStartTime" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                        <ItemTemplate>
                            <asp:Label ID="lblWeekendShiftStartTime" runat="server" Text='<%#Eval("WeekendShiftStartTime") %>' CssClass="GridContent" />                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="ddlWeekendShiftStartTime" runat="server" Text='<%#Eval("WeekendShiftStartTime") %>' style="width:65px;" CssClass="GridContent" />  
                            <asp:RegularExpressionValidator ID="RegularExpValidatorddlWeekendShiftStartTime" runat="server" ControlToValidate="ddlWeekendShiftStartTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />                          

                        </EditItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Saturday Shift End Time" SortExpression="weekendshiftendtime" HeaderStyle-Font-Bold="true" HeaderStyle-Font-Names="Calibre" HeaderStyle-ForeColor="White">
                    <ItemTemplate>
                            <asp:Label ID="lblWeekendShiftEndTime" runat="server" Text='<%#Eval("weekendshiftendtime") %>' CssClass="GridContent"/>                    
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="ddlWeekendShiftEndTime" runat="server" Text='<%#Eval("weekendshiftendtime") %>' style="width:65px;" CssClass="GridContent" /> 
                            <asp:RegularExpressionValidator ID="RegularExpValidatorddlWeekendShiftEndTime" runat="server" ControlToValidate="ddlWeekendShiftEndTime" ValidationExpression="^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$" ErrorMessage="*" Font-Bold="true" ForeColor="Red" ToolTip="Must be in HH:MM" />                           

                        </EditItemTemplate>                           
                    </asp:TemplateField>

                    <asp:TemplateField  ShowHeader="False" > 
                        <EditItemTemplate> 
                          <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" CommandName="Update" Text="Update" ForeColor="White"></asp:LinkButton> 
                          <asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" ForeColor="White"></asp:LinkButton> 
                        </EditItemTemplate> 
                        <ItemTemplate> 
                          <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" CommandName="Edit" Text="Edit" ForeColor="White"></asp:LinkButton> 
                        </ItemTemplate> 
                </asp:TemplateField>                    
           </Columns>
                <PagerTemplate >
                     <table width="100%" >
                        <tr>
                            <td style="text-align:  left">
                                Page Size: 
                                    <asp:DropDownList ID="ddPageSize" runat="server" EnableViewState="true" OnSelectedIndexChanged="ddPageSize_SelectedIndexChanged" AutoPostBack="true" style="width:50px;">
                                    <asp:ListItem Text="10" ></asp:ListItem>
                                    <asp:ListItem Text="20" ></asp:ListItem>
                                    <asp:ListItem Text="30" ></asp:ListItem>
                                    <asp:ListItem Text="40" ></asp:ListItem>
                                    <asp:ListItem Text="50" ></asp:ListItem>
                                </asp:DropDownList>
                            </td>
                            <td style="text-align: right">
                                <asp:Label ID="lblPageCount" runat="server"></asp:Label>
                            </td>
                        </tr>
                    </table>
                </PagerTemplate>
                </cc1:GridView>      
         </asp:Panel></td></tr>
                </table>
                                                       <div style="margin-top:5px" class="PagerGrid">
                <asp:DataPager  ID="pager" runat="server" PagedControlID="gvShift">
                    <Fields>                                            
                        <asp:NextPreviousPagerField FirstPageText="&lt;&lt;" LastPageText="&gt;&gt;" 
                            NextPageText="&gt;"  PreviousPageText="&lt;" ShowFirstPageButton="True"
                            ShowNextPageButton="False" ButtonCssClass="datapager"  />
                        <asp:NumericPagerField ButtonCount="10"  NumericButtonCssClass="datapager" CurrentPageLabelCssClass="datapager"   />
                        <asp:NextPreviousPagerField LastPageText="&gt;&gt;" NextPageText="&gt;" 
                            ShowLastPageButton="True" ShowPreviousPageButton="False" ButtonCssClass="datapager" />
                    </Fields>
                </asp:DataPager>
            </div>
            <br />
            <asp:ObjectDataSource ID="odsShiftDetails" runat="server" 
                SelectMethod="GetShiftInfoSortedPage" TypeName="EQ.DAL.ShiftInfoDB"
                EnablePaging="True" SelectCountMethod="GetShiftInfoCount" 
                SortParameterName="sortExpression">
                <SelectParameters>
                    <asp:ControlParameter  ControlID="hfSearchCriteria"  Name="searchCriteria" Direction="Input"  />
                </SelectParameters>                                            
            </asp:ObjectDataSource> 
```

行更新背后的代码是：-

```
protected void gvShift_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        try
        {
            TextBox txtShiftStartTime = (TextBox)gvShift.Rows[e.RowIndex].FindControl("ddlShiftStartTime");
            TextBox txtShiftEndTime = (TextBox)gvShift.Rows[e.RowIndex].FindControl("ddlShiftEndTime");
            TextBox txtWeekendShiftStartTime = (TextBox)gvShift.Rows[e.RowIndex].FindControl("ddlWeekendShiftStartTime");
            TextBox txtWeekendShiftEndTime = (TextBox)gvShift.Rows[e.RowIndex].FindControl("ddlWeekendShiftEndTime");
            Label lblUserecode = (Label)gvShift.Rows[e.RowIndex].FindControl("lblEditUserECode");

            string userecode = lblUserecode.Text.ToString();
            string _ShiftStart = txtShiftStartTime.Text.ToString();
            string _ShiftEnd = txtShiftEndTime.Text.ToString();
            string _WeekendShiftStart = txtWeekendShiftStartTime.Text.ToString();
            string _WeekendShiftend = txtWeekendShiftEndTime.Text.ToString();

            EmployeeQuotientCL.Entities.ConfigurationVariables _configVariables = new ConfigurationVariables();
            string databaseConnectionString = _configVariables.ConnectionString;
            SqlConnection sqlConnection = null;
            if (((databaseConnectionString + string.Empty) != string.Empty))
            {
                DBConnect dbConnect = new DBConnect(_configVariables.ConnectionString);
                sqlConnection = dbConnect.SQLConnection;
                SqlCommand cmd = new SqlCommand();
                cmd.Connection = sqlConnection;
                cmd.CommandText = "UPDATE UserInfo SET ShiftStartTime ='" + _ShiftStart + "',ShiftEndTime='" + _ShiftEnd.ToString() + "',Weekendshiftstarttime='" + _WeekendShiftStart.ToString() + "',Weekendshiftendtime='" + _WeekendShiftend.ToString() + "'   WHERE UserECode=" + userecode.ToString();
                sqlConnection.Open();
                cmd.ExecuteNonQuery();
                gvShift.DataSource = null;
                gvShift.DataBind();
                sqlConnection.Close();
            }
        }
        catch (Exception ex)
        {
        }
    } 
```

在更新网格中的行时，我收到以下错误消息。

> Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerServerErrorException：>ObjectDataSource 'odsShiftDetails' 不支持更新，除非 UpdateMethod 已指定。

指导我如何解决此错误。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:29:11.723

您需要将更新方法添加到您的gridview。看这个教程：[Gridview ObjectdataSource](http://www.codeproject.com/Articles/16754/Gridview-ObjectDataSource-Making-life-easy)

# c - 使用 C 从 .DAT 文件中读取 char* 类型时出错

> ID：13393388
> 
> 赞同：1
> 
> 时间：2012-11-15T07:53:31.817
> 
> 标签：c, fread

因此，出于某种原因，我需要通过将新文件附加到旧数据的末尾来创建一个外部文件 (.DAT) 来存储数据。

```
#include <stdio.h>
#include <stdlib.h>

int main () {
    typedef struct {
        char *Name;
        int Index;
    } DataFile;

    static FILE *file;
    size_t result;
    DataFile *DataTable;

    file = fopen("database.DAT","ab");
    DataTable = (DataFile *) malloc (sizeof(DataFile));
    DataTable[0].Name = "somefile.txt";
    DataTable[0].Index = 7;
    printf("%s %d \n",DataTable[0].Name,DataTable[0].Index);
    result = fwrite(DataTable,sizeof(DataFile),1,file);
    fclose(file);
    free(DataTable);
    return 0;
} 
```

运行上面的代码后，我检查数据是否存储正确。所以，我在下面做这个代码。

```
#include <stdio.h>
#include <stdlib.h>

int main () {
    typedef struct {
        char *Name;
        int Index;
    } DataFile;

    static FILE *file;
    size_t result;
    long size;
    int i;
    DataFile *DataTable;

    file = fopen("database.DAT","rb");
    if (file == NULL) printf("Error1");

    // Determine the size of file
    fseek(file,0,SEEK_END);
    size = ftell(file);
    rewind(file);

    DataTable = (DataFile *) malloc ((size/sizeof(DataFile)) * sizeof(DataFile));
    if (DataTable == NULL) printf("Error2");

    result = fread(DataTable,sizeof(DataFile),size/sizeof(DataFile),file);
    fclose(file);

    for (i=0; i<result; i++) {
        printf("%s %d \n",DataTable[i].Name,DataTable[i].Index);
    }
    free(DataTable);
    return 0;
} 
```

但是，它给出了输出

```
somefile.txt 7 
```

从第一个代码块和

```
Error1 7 
```

从第二个代码块。我注意到问题不是因为打开 .DAT 文件或为 DataTable 分配内存时失败。此外，从 .DAT 文件读取时，它适用于 int 类型（索引），但不适用于 char* 类型（名称）。我不知道如何解决这个 char*-type-reading 问题（以及 'error1' 的来源）。（甚至谷歌都没有给我答案。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:01:46.907

您的结构`DataFile`存储一个指针和一个整数。当您将其写入文件时，您将一些程序特定的指针写入一个字符串和一个整数。

从它读取时，您只需用指针和整数重新填充结构，这意味着这`DataFile.Name`将是指向可能未初始化的内存段的指针。但是由于您创建了指向第一个硬编码字符串`"filename.txt"`（`Error1`)

您真正想要做的是在文件中写入真正的字符串。

一个简单的解决方案，如果你想保持孔*写入结构*的事情是创建一个数组而不是一个指针

```
typedef struct {
        char Name[512];
        int Index;
    } DataFile; 
```

然后初始化你的数据

```
strncpy(DataTable[0].Name, "somefile.txt", sizeof(DataTable[0].Name) - 1); // just to make sure you dont overflow your array size
DataTable[0].Name[sizeof(DataTable[0].Name) - 1] = '\0'; 
```

并以您的方式重新审核您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:00:57.080

A`char*`只是一个指针，即包含字符串的字符数组的地址。您不会将字符串本身写入文件。读取文件后，由于相同的字符串不再位于相同地址的内存中，应用程序将失败。

您还必须想出一种方法来将字符串本身保存到文件中。可能是先写他们的长度，然后写他们的内容。读取时，您可以使用长度信息动态分配内存，然后读入该内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:00:42.360

在您的编写代码中，您没有为`char *Name`. 当您执行`DataTable[0].Name = "somefile.txt"`指令时，您实际上并没有将 复制`"somefile.txt"`到 指向的内存中`Name`，它实际上是分配一个`Name`指向常量字符串的值（此外，由于字符串是右值，它会变成悬空指针，即没有内存要通过）。您的文件读取代码也是如此。你需要：

1.  为您的`Name`.
2.  使用或类似方法将字符串复制`memcpy`到分配的存储中。

# browser - Selenium 是否需要最大化浏览器窗口？

> ID：13393392
> 
> 赞同：0
> 
> 时间：2012-11-15T07:53:50.640
> 
> 标签：browser, selenium

我自己没有使用过 Selenium，但我想知道在测试执行期间是否需要最大化浏览器窗口？我使用了一些其他工具，如果窗口太小，鼠标指针找不到正确的 HTML 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:43:34.343

1.  当您要对该元素执行任何操作时，Selenium 2.0 (WebDriver) 会自动尝试将元素滚动到视图中。如果它不能滚动它会抛出一个异常。所以，不要让你的窗口太小，但没有必要最大化它。保持“中等大小”。

2.  由于上述原因，您可能希望最大化浏览器窗口以避免过度滚动，这可能会导致页面上发生一些不必要的事件。

3.  如果 Selenium (WebDriver) 放置得太靠近视口边界（半可见），有时 Selenium (WebDriver) 无法单击该元素。在这种情况下，您可以尝试调整窗口大小以使该元素完全可见或完全不可见（以激活自动滚动）。

4.  如果您使用启用了“本机事件”的 Selenium (WebDriver)，则最好在测试执行期间将浏览器窗口保持在前台和焦点上。不管它是最大化还是“中等大小”——只是不要最小化它！

    如果您对“综合事件”感到满意——您的测试有很多机会在前台成功运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:00:22.403

不，因为 Selenium 使用 DOM 结构而不是操作系统（鼠标、窗口和其他东西）来操作。您实际上可以在测试期间最小化您的窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:01:02.243

也许没有最大化，但可能最好在设定的最小和最大尺寸下进行测试。

一个想法是在运行测试之前让 selenium 为您调整窗口大小......快速搜索给了我这个：[https ://makandracards.com/makandra/9773-how-to-start-selenium-browser-with -自定义窗口大小](https://makandracards.com/makandra/9773-how-to-start-selenium-browser-with-custom-window-size)

# php - 如何在 Eclipse IDE 中隐藏所有 javadoc (phpdoc) 块？

> ID：13393393
> 
> 赞同：1
> 
> 时间：2012-11-15T07:54:00.630
> 
> 标签：php, eclipse, javadoc, zend-studio, phpdoc

我想隐藏所有 phpdoc 信息。当我单击“-”时，如下图所示，我可以隐藏，但我必须为每个 phpdoc 块执行此操作。有没有办法隐藏所有 phpdoc 信息。

![在此处输入图像描述](../Images/0397bbf4aec69f640dc74462fa501309.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:02:35.127

您可以通过转到
**Window --> Preferences**
Go to **Java --> Editor --> Folding**
选择默认隐藏注释来隐藏它。您可能需要将**Java**更改为您的语言 (php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T07:59:12.187

如果您转到“窗口”菜单和首选项，如果我没记错的话，在您使用的语言的编辑器下有一些折叠选项。检查那里，你应该能够折叠或隐藏评论。

# extjs - 失去对文本字段的关注

> ID：13393394
> 
> 赞同：2
> 
> 时间：2012-11-15T07:54:05.263
> 
> 标签：extjs

我正在使用 extjs 3.0

我有一个像

在文本字段中输入任何数据并按回车键时，我必须根据文本字段的值显示一个网格，用户继续在文本字段中输入数据。但是一旦创建了网格，我就会根据文本字段的值通过将值设置为基本参数来重新加载存储。在第一次显示网格焦点时，文本字段会丢失，一旦网格可见，光标就会聚焦在文本字段上。

我在文本字段上使用焦点方法，但它不起作用......

帮助我提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:07:20.513

您可以通过以下方式推迟焦点：

```
field.focus(500) //This is 500 milliseconds 
```

# python - 可以将 Python 整数存储在 12 个字节以内吗？

> ID：13393395
> 
> 赞同：5
> 
> 时间：2012-11-15T07:54:06.270
> 
> 标签：python, int

是否可以让 Python 对 int 使用少于 12 个字节的字节？

```
>>> x=int()
>>> x
0
>>> sys.getsizeof(x)
12 
```

我不是计算机专家，但 12 字节不是过多吗？

我要存储的最小 int 是 0，最大的 int 是 147097614，所以我真的不需要超过 4 个字节。

（我可能在这里误解了一些东西，因为我在网上的任何地方都找不到答案。请记住这一点。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T07:57:55.997

在 python 中，`int`s 和其他所有东西一样是对象。正因为如此，有一点额外的开销与您正在使用具有一些关联元数据的对象这一事实相关。

如果您要使用*大量*整数，并且将它们布置在类似数组的结构中是有意义的，那么您应该研究`numpy`. 对于数组对象跟踪的各种元数据， Numpy`ndarray`对象会有一些与它们相关的开销，但实际数据存储为您指定的数据类型（例如`numpy.int32`，对于 4 字节整数）。

因此，如果您有：

```
import numpy as np
a = np.zeros(5000,dtype=np.int32) 
```

该数组仅占`4*5000 = 20000`用您的内存字节数

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T07:59:42.747

整数对象的大小包括维护其他对象信息及其值的开销。附加信息可以包括对象类型、引用计数和其他特定于实现的细节。

如果您存储许多整数并希望优化所花费的空间，请使用[`array`模块](http://docs.python.org/2/library/array.html)，特别是使用`array.array('i')`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-15T07:59:53.730

python 中的整数是对象，因此存储起来有额外的开销。

[您可以在此处](http://www.laurentluce.com/posts/python-integer-objects-implementation/)阅读有关它的更多信息

cpython 中的整数类型存储在如下结构中：

```
typedef struct {
  PyObject_HEAD
  long ob_ival;
} PyIntObject; 
```

`PyObject_HEAD`是一个扩展为*引用计数*和*指向类型 object*的指针的宏。

所以你可以看到：

*   `long ob_ival`- 4 个字节长。
*   `Py_ssize_t ob_refcnt`- 我假设这里的 size_t 是 4 个字节。
*   `PyTypeObject *ob_type`- 是一个指针，所以还有 4 个字节。

总共12个字节！

# java - 我们可以用 void 返回类型编写 struts dispatchAction 方法吗？

> ID：13393396
> 
> 赞同：2
> 
> 时间：2012-11-15T07:54:06.230
> 
> 标签：java, struts, struts-1

我想使用 Struts DispacthAction 方法执行一些操作，但是，我不想转发任何 jsp；

我可以用 void 编写调度方法吗？前任：

```
 public void perform(ActionMapping actionMapping, ActionForm actionForm,    HttpServletRequest request,HttpServletResponse response) 
    throws Exception {
    System.out.println();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T18:07:49.360

**您的方法必须返回一个`ActionForward`，而不是`void`。**这是 Struts 中执行方法的约定，您必须遵守约定，否则您的代码将无法工作。

可能会返回`null`而不是`ActionForward`对象，但这很棘手，因为请求调度程序只会返回。响应的当前内容将被发送到客户端，如果您不自己管理响应，您可能会得到一个空白页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T07:59:06.047

如文档中所述，您的方法必须具有返回类型**“ActionForward”**而不是 void。
我不明白您为什么不想将您的回复转发到任何其他页面。
如果你想将你的响应转发到另一个动作，你可以通过简单地在 struts-config.xml 的转发标签中提供动作路径来做到这一点，比如

```
<forward name="success" path="/doAction.do"> 
```

# c# - LINQ 实体框架值不能为空。参数名称：字符串

> ID：13393398
> 
> 赞同：1
> 
> 时间：2012-11-15T07:54:11.503
> 
> 标签：c#, asp.net-mvc, linq, entity-framework

我正在尝试从我的 Entity 数据模型将视图模型对象的集合返回到我的视图并得到以下错误：

> **值不能为空。参数名称：字符串** *描述：当前网络请求执行过程中发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。*

```
Exception Details: System.ArgumentNullException: Value cannot be null.
Parameter name: String

    Source Error:

Line 22:         {
Line 23:             IEnumerable<CollegeContactViewModel> contacts = db.CollegeContacts.Where(cc => cc.CollegeContactID >0).AsEnumerable().ToList()
Line 24:                 .Select(c => new CollegeContactViewModel()
Line 25:                 {
Line 26:                     Id          = c.CollegeContactID, 
```

**这是我的索引操作**

```
public ActionResult Index()
        {
            IEnumerable<CollegeContactViewModel> contacts = db.CollegeContacts.AsEnumerable().ToList()
                .Select(c => new CollegeContactViewModel()
                {
                    Id          = c.CollegeContactID,
                    Status      = c.CollegeContStatus,
                    Center      = c.CollegeContCenter,
                    Salutation  = c.CollegeContSalutation,
                    FirstName   = c.CollegeContFname,
                    LastName    = c.CollegeContLname,
                    Position    = c.CollegeContPosition,
                    Department  = c.CollegeContDept,
                    Institution = c.CollegeContInstitution,
                    Address = new Address()
                    {
                        AddressLine1 = c.CollegeContAdd1,
                        AddressLine2 = c.CollegeContAdd2,
                        City         = c.CollegeContCity,
                        State        = c.CollegeContSt,
                        PostalCode   = c.CollegeContZip
                    },
                    Email                = c.CollegeContEmail,
                    Phone                = c.CollegeContPhone,
                    Opt                  = c.CollegeContOpt,
                    ContactDate          = c.CollegeContDate,
                    OnMailingList        = c.CollegeContMailListSingle,
                    NumberOfCatalogsSent = int.Parse(c.NumCatalogsSent),
                    DateSent             = c.Datesent.ToString(),
                    DateEntered          = c.DateEntered.ToString(),
                    Reception            = c.Reception,
                    Partner              = c.Partner,
                    Website              = c.SAwebsite,
                    Poster               = c.CollegeContPoster
                });
            return View(contacts.ToList());
        } 
```

**学院联系视图模型**

```
public class CollegeContactViewModel
    {
        public int Id { get; set; }
        public string Status { get; set; }
        public string Center { get; set; }
        public string Salutation { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public string Position { get; set; }
        public string Department { get; set; }
        public string Institution { get; set; }
        public Address Address { get; set; }
        public string Email { get; set; }
        public string Phone { get; set; }
        public string Opt { get; set; }
        public string ContactDate { get; set; }
        public bool? OnMailingList { get; set; }
        public int NumberOfCatalogsSent { get; set; }
        public string DateSent { get; set; }
        public string DateEntered { get; set; }
        public string Reception { get; set; }
        public string Partner { get; set; }
        public string Website { get; set; }
        public string Poster { get; set; }
    } 
```

我的数据库中的另一个实体有完全相同类型的代码，它工作得很好。此外，除主键外，所有字段都允许为空，因此不可能。我还单步执行了代码并且 Id 正在被填充。

有人可以告诉我为什么我不断收到这个例外吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T07:58:13.930

扫描您的代码以查找字符串参数，这看起来最有可能（仅？）候选：

```
NumberOfCatalogsSent = int.Parse(c.NumCatalogsSent), 
```

如果`c.NumCatalogsSent`为空，那就是你会得到的错误。

* * *

我会尝试这个（EF v4**可以**翻译 null-coalescing 运算符）：

```
NumberOfCatalogsSent = int.Parse(c.NumCatalogsSent ?? "0"), 
```

# c# - 与 C# 的 TBXML 等效的数据类型

> ID：13393403
> 
> 赞同：0
> 
> 时间：2012-11-15T07:54:41.130
> 
> 标签：c#, tbxml

是否有任何类似的数据类型可以用来在 C# 中保存数据，就像在 TBXML Objective C 中保存数据一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:56:47.877

谷歌搜索`TBXML`显示了一个 XML 解析器。如果是这种情况，C# 确实在`System.Xml`命名空间中具有 XML 解析功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T07:57:02.790

您可以使用 XmlSerializer 存储（实际上）任何数据类型，请参阅[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

您可以使用属性属性指定是否要存储对象的属性，否则序列化程序将使用反射来存储整个对象。

有关体面的教程，请参阅[http://www.codeproject.com/Articles/14064/Using-the-XmlSerializer-Attributes](http://www.codeproject.com/Articles/14064/Using-the-XmlSerializer-Attributes)

# objective-c - 类别提供动态加载？

> ID：13393405
> 
> 赞同：2
> 
> 时间：2012-11-15T07:54:54.570
> 
> 标签：objective-c

我正在查看有关 C++ 与 Objective C 的差异的[页面](http://support.apple.com/kb/TA45902?viewlocale=en_US)，它指出：

> Objective C 的动态特性允许在运行时扩展现有的类。Objective C 允许您定义类别、相关的扩展集到您已经创建的对象。例如，在将基于文本的应用程序转换为图形应用程序时，您的对象需要绘制自己的代码可以编译为一个类别，并仅在需要时在运行时加载。这可以节省内存并允许您保持原始对象不变。

现在我熟悉类别并使用它们，但我不明白它们如何导致动态加载。如果您`import`是 Category 文件，它是否不会与它扩展的类一起编译，无论何时使用该类都会占用内存，无论您是否使用 Category 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:40:12.773

您可以在运行时加载包/插件/框架。这是引用引用的 Objective-c 的动态特性。它不特定于类别。

但是，如果您加载的（已编译）代码在现有类中包含类别，则扩展将像它们一直存在一样工作。即一个类在编译时不是“冻结”的，加载一个包/插件/框架是在运行时向现有类添加新方法的一种方法。

与其他一些基于 C 的编译语言相比，这使得实现插件架构或仅在需要时加载代码以使应用程序启动时间更快/减少内存占用相对容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:57:18.077

如果您与包含类别的静态库链接，则链接器会将所有类别代码复制到您的可执行文件中。如果您与共享库链接，则共享库的整个代码段将映射到您的进程的地址空间，但它是延迟分页的，因此您实际上可能不会从磁盘中读取所有类别代码，除非您全部使用它。

但我认为这并不是该页面真正在谈论的内容。

### 链接时库

首先，让我们谈谈您告诉链接器链接您的应用程序的库。

考虑`NSString`。该类`NSString`在 Foundation 框架中定义，该框架充满了通用类，这些类在具有 GUI 的程序和没有 GUI 的程序中很有用。因此`NSString`，Foundation 中定义的类不包含任何用于将字符串绘制到图形上下文中的代码，因为该代码（通常）在非 GUI 应用程序中是无用的。

AppKit 框架（在 OS X 上）管理一个 GUI。在 GUI 中能够将字符串绘制到图形上下文中很有用，因此 AppKit 包含[一个类别，`NSString`](http://developer.apple.com/library/mac/#documentation/cocoa/reference/ApplicationKit/Classes/NSString_AppKitAdditions/Reference/Reference.html#//apple_ref/doc/uid/TP40004121)用于添加绘制字符串的方法，例如`drawAtPoint:withAttributes:`. UIKit（在 iOS 上）做同样的事情（但方法有点不同）。

因此，如果您在 OS X 上编写程序并使用 Foundation 但不使用 AppKit，您的进程将不会加载 AppKit`NSString`类别，并且您不会为`NSString`.

对于像 AppKit 这样的共享库，在现代硬件上的价格是微不足道的。

现在，您可以使用自己的库做同样的事情，您可以将其设为静态。假设您创建了一个“TwitterModel”库来与 Twitter 交谈。它充满了模拟你在 Twitter 上找到的东西的类，比如帐户和推文。但是您不包含用于管理 GUI 以显示推文的代码。

相反，您创建了另一个库“TwitterGUI”，它（除了定义更多类）使用类别将方法添加到“TwitterModel”库中的模型类。

如果您编写一个链接到 TwitterGUI 和 TwitterModel 的程序，可执行文件将包含来自这两个库的所有 Objective-C 代码。但是，如果您编写一个仅命令行程序（无 GUI）并且仅将其与 TwitterModel 链接，则该程序将不包含任何与 GUI 相关的代码。哦，储蓄！

### 运行时库

现在让我们考虑您没有告诉链接器链接您的应用程序的共享库。

您可以在运行时使用 API`dlopen`或`-[NSBundle load]`. 如果库包含类别，这些类别将添加到您正在运行的程序中的类中。

因此，您可以通过尝试以编程方式加载库来使您的应用程序有选择地使用共享库（如果用户系统上存在共享库）。如果成功，您可以调用您知道库定义的任何类别方法。（当然，您可以使用库提供的类，如果有的话。）如果您无法加载库，请小心避免从库中调用任何这些类别方法。

但是，通常情况下，我们使用动态加载 API 来加载插件，并且插件提供了一些类，这些类是基类的子类，或者符合我们专门为要实现的插件定义的协议。我们只需要获取该类的名称，然后我们创建它的一个实例并将我们在基类或协议中定义的消息发送给它。

# android - gles20.glCopyTexImage2D 在android中工作吗

> ID：13393409
> 
> 赞同：0
> 
> 时间：2012-11-15T07:55:22.987
> 
> 标签：android, opengl-es-2.0

我是opengl的新手，所以我使用android4.1中的示例代码“HelloEffect”来做一些测试。我使用下面的函数进行渲染。如果在renderTexture结束时没有调用“glCopyTexImage2D”函数，那么我可以正确地重新渲染纹理，但是如果使用glCopyTexImage2D函数，那么我第二次调用renderTexture，GLToolbox.checkGlError(“glViewport”)会抛出异常。

```
 public void renderTexture(int texId, int savetexture) {
    if(savetexture == 2)
        texId = mCaptureTexture[0];

    GLES20.glBindFramebuffer(GLES20.GL_FRAMEBUFFER, 0);
    GLES20.glViewport(0, 0, mViewWidth, mViewHeight);
    GLToolbox.checkGlError("glViewport");

    // Disable blending
    GLES20.glDisable(GLES20.GL_BLEND);

    // Set the vertex attributes
    GLES20.glVertexAttribPointer(mTexCoordHandle, 2, GLES20.GL_FLOAT, false,
            0, mTexVertices);
    GLES20.glEnableVertexAttribArray(mTexCoordHandle);
    GLES20.glVertexAttribPointer(mPosCoordHandle, 2, GLES20.GL_FLOAT, false,
            0, mPosVertices);
    GLES20.glEnableVertexAttribArray(mPosCoordHandle);
    GLToolbox.checkGlError("vertex attribute setup");

    // Set the input texture
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);
    GLToolbox.checkGlError("glActiveTexture");
    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, texId);
    GLToolbox.checkGlError("glBindTexture");
    GLES20.glUniform1i(mTexSamplerHandle, 0);
    GLES20.glUniform1i(mEffectTypeHandle, 1);

    // Draw
    GLES20.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);
    GLES20.glDrawArrays(GLES20.GL_TRIANGLE_STRIP, 0, 4);

     if(savetexture == 1)
        GLES20.glCopyTexImage2D(mCaptureTexture[0], 0, GLES20.GL_RGBA, 0, 0, mTexWidth, mTexHeight, 0); 
    return;
}    

//main workflow

renderTexture(srctexture, 0);
renderTexture(srctexture, 0);
//+above steps is work normal.

renderTexture(srctexture, 1);
renderTexture(srctexture, 2);
//in above steps, when call  renderTexture(srctexture, 2)   
//gLToolbox.checkGlError ("glViewport")will throw exception 
```

我这样做的目的是保留帧缓冲区颜色缓冲区的副本，因为我已经对 texId 纹理进行了一些后处​​理工作，因此如果我不必再次进行后处理工作将节省时间. 我想知道我是否省略了上面的一些关键步骤，或者 opengl es 2.0 不适合这项工作最好的祝愿！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:19:19.143

您的用法和解释`checkGLError`可能不正确：OpenGL错误报告是**有状态**的，*错误标志在您实际检查之前不会重置*。

最有可能的是，这条线

```
GLES20.glCopyTexImage2D(...); 
```

是设置错误标志的那个。您只是在下一次调用`glViewPort`.

...

关于实际问题：如果您可以发布确切的错误消息，我们可以就该行的问题提供进一步的帮助。看起来您的参数指定不正确，它可能应该类似于

```
GLES20.glBindTexture( GLES20.GL_TEXTURE_2D, mCaptureTexture[0] );
GLES20.glCopyTexImage2D( GLES20.GL_TEXTURE_2D, ... ); 
```

# java - Jboss 4.2 未在 win 7 64 位上启动

> ID：13393410
> 
> 赞同：0
> 
> 时间：2012-11-15T07:55:25.457
> 
> 标签：java, eclipse, jboss, application-server, jboss-4.2.x

我有 JBoss-4.2.3.GA，即使我将启动时间和停止时间增加到 500 秒，它也无法在给定时间内启动。

后来我尝试使用其他版本的 JBOSS 4.2，但它也没有启动。

很久以前（在其他一些系统中）我在 Windows 7 64 位中遇到了类似的问题，为此我更改了 XX:MaxPermSize 解决了这个问题。但这在这里没有帮助。

我正在使用 eclipse indigo Version: Indigo Service Release 2 Build id: 20120216-1857 来启动服务器。

启动服务器后的控制台说：

```
13:05:08,325 INFO  [Server] Starting JBoss (MX MicroKernel)...
13:05:08,325 INFO  [Server] Release ID: JBoss [Trinity] 4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)
13:05:08,327 INFO  [Server] Home Dir: C:\jboss-4.2.3.GA
13:05:08,327 INFO  [Server] Home URL: file:/C:/jboss-4.2.3.GA/
13:05:08,327 INFO  [Server] Patch URL: null
13:05:08,327 INFO  [Server] Server Name: default
13:05:08,328 INFO  [Server] Server Home Dir: C:\jboss-4.2.3.GA\server\default
13:05:08,328 INFO  [Server] Server Home URL: file:/C:/jboss-4.2.3.GA/server/default/
13:05:08,328 INFO  [Server] Server Log Dir: C:\jboss-4.2.3.GA\server\default\log
13:05:08,328 INFO  [Server] Server Temp Dir: C:\jboss-4.2.3.GA\server\default\tmp
13:05:08,328 INFO  [Server] Root Deployment Filename: jboss-service.xml
13:05:08,492 INFO  [ServerInfo] Java version: 1.6.0_35,Sun Microsystems Inc.
13:05:08,492 INFO  [ServerInfo] Java VM: Java HotSpot(TM) 64-Bit Server VM 20.10-b01,Sun Microsystems Inc.
13:05:08,493 INFO  [ServerInfo] OS-System: Windows 7 6.1,amd64
13:05:08,728 INFO  [Server] Core system initialized
13:05:09,745 INFO  [WebService] Using RMI server codebase: http://127.0.0.1:8083/
13:05:09,746 INFO  [Log4jService$URLWatchTimerTask] Configuring from URL: resource:jboss-log4j.xml
13:05:09,969 INFO  [TransactionManagerService] JBossTS Transaction Service (JTA version) - JBoss Inc.
13:05:09,969 INFO  [TransactionManagerService] Setting up property manager MBean and JMX layer
13:05:10,077 INFO  [TransactionManagerService] Starting recovery manager
13:05:10,117 INFO  [TransactionManagerService] Recovery manager started
13:05:10,117 INFO  [TransactionManagerService] Binding TransactionManager JNDI Reference
13:05:11,387 INFO  [EJB3Deployer] Starting java:comp multiplexer
13:05:12,542 INFO  [NativeServerConfig] JBoss Web Services - Native
13:05:12,542 INFO  [NativeServerConfig] jbossws-3.0.1-native-2.0.4.GA (build=200803312044)
13:05:13,070 INFO  [Embedded] Catalina naming disabled
13:05:13,149 INFO  [AprLifecycleListener] The Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre6\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;c:\Program Files (x86)\Intel\iCLS Client\;c:\Program Files\Intel\iCLS Client\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Windows Live\Shared.;C:\Program Files\Java\jdk1.6.0_35\bin;C:\Program Files\TortoiseSVN\bin;.
13:05:13,182 INFO  [Http11Protocol] Initializing Coyote HTTP/1.1 on http-127.0.0.1-8080
13:05:13,183 INFO  [AjpProtocol] Initializing Coyote AJP/1.3 on ajp-127.0.0.1-8009
13:05:13,183 INFO  [Catalina] Initialization processed in 113 ms
13:05:13,183 INFO  [StandardService] Starting service jboss.web
13:05:13,185 INFO  [StandardEngine] Starting Servlet Engine: JBossWeb/2.0.1.GA
13:05:13,215 INFO  [Catalina] Server startup in 31 ms
13:05:13,280 INFO  [TomcatDeployer] deploy, ctxPath=/, warUrl=.../deploy/jboss-web.deployer/ROOT.war/
13:05:13,602 INFO  [TomcatDeployer] deploy, ctxPath=/invoker, warUrl=.../deploy/http-invoker.sar/invoker.war/
13:05:13,714 INFO  [TomcatDeployer] deploy, ctxPath=/jbossws, warUrl=.../deploy/jbossws.sar/jbossws-context.war/
13:05:13,819 INFO  [TomcatDeployer] deploy, ctxPath=/jbossmq-httpil, warUrl=.../deploy/jms/jbossmq-httpil.sar/jbossmq-httpil.war/
13:05:14,231 INFO  [TomcatDeployer] deploy, ctxPath=/web-console, warUrl=.../deploy/management/console-mgr.sar/web-console.war/
13:05:14,510 INFO  [MailService] Mail Service bound to java:/Mail
13:05:14,589 INFO  [RARDeployment] Required license terms exist, view META-INF/ra.xml in .../deploy/jboss-ha-local-jdbc.rar
13:05:14,607 INFO  [RARDeployment] Required license terms exist, view META-INF/ra.xml in .../deploy/jboss-ha-xa-jdbc.rar
13:05:14,625 INFO  [RARDeployment] Required license terms exist, view META-INF/ra.xml in .../deploy/jboss-local-jdbc.rar
13:05:14,642 INFO  [RARDeployment] Required license terms exist, view META-INF/ra.xml in .../deploy/jboss-xa-jdbc.rar
13:05:14,673 INFO  [RARDeployment] Required license terms exist, view META-INF/ra.xml in .../deploy/jms/jms-ra.rar
13:05:14,692 INFO  [RARDeployment] Required license terms exist, view META-INF/ra.xml in .../deploy/mail-ra.rar
13:05:14,722 INFO  [RARDeployment] Required license terms exist, view META-INF/ra.xml in .../deploy/quartz-ra.rar
13:05:14,730 INFO  [QuartzResourceAdapter] start quartz!!!
13:05:14,768 INFO  [SimpleThreadPool] Job execution threads will use class loader of thread: main
13:05:14,784 INFO  [QuartzScheduler] Quartz Scheduler v.1.5.2 created.
13:05:14,785 INFO  [RAMJobStore] RAMJobStore initialized.
13:05:14,785 INFO  [StdSchedulerFactory] Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
13:05:14,785 INFO  [StdSchedulerFactory] Quartz scheduler version: 1.5.2
13:05:14,785 INFO  [QuartzScheduler] Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
13:05:15,309 INFO  [ConnectionFactoryBindingService] Bound ConnectionManager 'jboss.jca:service=DataSourceBinding,name=DefaultDS' to JNDI name 'java:DefaultDS'
13:05:15,444 INFO  [A] Bound to JNDI name: queue/A
13:05:15,445 INFO  [B] Bound to JNDI name: queue/B
13:05:15,446 INFO  [C] Bound to JNDI name: queue/C
13:05:15,447 INFO  [D] Bound to JNDI name: queue/D
13:05:15,448 INFO  [ex] Bound to JNDI name: queue/ex
13:05:15,457 INFO  [testTopic] Bound to JNDI name: topic/testTopic
13:05:15,458 INFO  [securedTopic] Bound to JNDI name: topic/securedTopic
13:05:15,459 INFO  [testDurableTopic] Bound to JNDI name: topic/testDurableTopic
13:05:15,461 INFO  [testQueue] Bound to JNDI name: queue/testQueue
13:05:15,479 INFO  [UILServerILService] JBossMQ UIL service available at : /127.0.0.1:8093
13:05:15,494 INFO  [DLQ] Bound to JNDI name: queue/DLQ
13:05:15,549 INFO  [ConnectionFactoryBindingService] Bound ConnectionManager 'jboss.jca:service=ConnectionFactoryBinding,name=JmsXA' to JNDI name 'java:JmsXA'
13:05:15,567 INFO  [TomcatDeployer] deploy, ctxPath=/jmx-console, warUrl=.../deploy/jmx-console.war/
13:05:15,688 INFO  [Http11Protocol] Starting Coyote HTTP/1.1 on http-127.0.0.1-8080
13:05:15,706 INFO  [AjpProtocol] Starting Coyote AJP/1.3 on ajp-127.0.0.1-8009
13:05:15,717 INFO  [Server] JBoss (MX MicroKernel) [4.2.3.GA (build: SVNTag=JBoss_4_2_3_GA date=200807181439)] Started in 7s:388ms 
```

它说开始了，但还没有完全开始。

我的服务器概述如下：

![服务器配置](../Images/f5033ac4c70074af3477c33553c35d7c.png)

我在 500 秒内收到与以下相同的错误，但我正在附加 10 秒的快照。

![日食消息](../Images/5681bcdeb4d6e9fbcb46c63d9ba88429.png)

我在 Jboss 的 bin 文件夹中附加了 run.bat、run.conf 文件的内容：

**运行.bat**

```
@echo off
rem -------------------------------------------------------------------------
rem JBoss Bootstrap Script for Win32
rem -------------------------------------------------------------------------

rem $Id: run.bat 73584 2008-05-22 12:09:26Z dimitris@jboss.org $

@if not "%ECHO%" == ""  echo %ECHO%
@if "%OS%" == "Windows_NT"  setlocal

set DIRNAME=.\
if "%OS%" == "Windows_NT" set DIRNAME=%~dp0%
set PROGNAME=run.bat
if "%OS%" == "Windows_NT" set PROGNAME=%~nx0%

pushd %DIRNAME%..
set JBOSS_HOME=%CD%
popd

REM Add bin/native to the PATH if present
if exist "%JBOSS_HOME%\bin\native" set PATH=%JBOSS_HOME%\bin\native;%PATH%
if exist "%JBOSS_HOME%\bin\native" set JAVA_OPTS=%JAVA_OPTS% -Djava.library.path="%PATH%"

rem Find run.jar, or we can't continue

set RUNJAR=%JBOSS_HOME%\bin\run.jar
if exist "%RUNJAR%" goto FOUND_RUN_JAR
echo Could not locate %RUNJAR%. Please check that you are in the
echo bin directory when running this script.
goto END

:FOUND_RUN_JAR

if not "%JAVA_HOME%" == "" goto ADD_TOOLS

set JAVA=java

echo JAVA_HOME is not set.  Unexpected results may occur.
echo Set JAVA_HOME to the directory of your local JDK to avoid this message.
goto SKIP_TOOLS

:ADD_TOOLS

set JAVA=%JAVA_HOME%\bin\java

rem A full JDK with toos.jar is not required anymore since jboss web packages
rem the eclipse jdt compiler and javassist has its own internal compiler.
if not exist "%JAVA_HOME%\lib\tools.jar" goto SKIP_TOOLS

rem If exists, point to the JDK javac compiler in case the user wants to
rem later override the eclipse jdt compiler for compiling JSP pages.
set JAVAC_JAR=%JAVA_HOME%\lib\tools.jar

:SKIP_TOOLS

rem If JBOSS_CLASSPATH or JAVAC_JAR is empty, don't include it, as this will 
rem result in including the local directory in the classpath, which makes
rem error tracking harder.
if not "%JAVAC_JAR%" == "" set RUNJAR=%JAVAC_JAR%;%RUNJAR%
if "%JBOSS_CLASSPATH%" == "" set RUN_CLASSPATH=%RUNJAR%
if "%RUN_CLASSPATH%" == "" set RUN_CLASSPATH=%JBOSS_CLASSPATH%;%RUNJAR%

set JBOSS_CLASSPATH=%RUN_CLASSPATH%

rem Setup JBoss specific properties
set JAVA_OPTS=%JAVA_OPTS% -Dprogram.name=%PROGNAME%

rem Add -server to the JVM options, if supported
"%JAVA%" -server -version 2>&1 | findstr /I hotspot > nul
if not errorlevel == 1 (set JAVA_OPTS=%JAVA_OPTS% -server)

rem JVM memory allocation pool parameters. Modify as appropriate.
set JAVA_OPTS=%JAVA_OPTS% -Xms128m -Xmx512m -XX:PermSize=256m -XX:MaxPermSize=512m

rem With Sun JVMs reduce the RMI GCs to once per hour
set JAVA_OPTS=%JAVA_OPTS% -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000

rem JPDA options. Uncomment and modify as appropriate to enable remote debugging.
rem set JAVA_OPTS=-Xdebug -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=y %JAVA_OPTS%

rem Setup the java endorsed dirs
set JBOSS_ENDORSED_DIRS=%JBOSS_HOME%\lib\endorsed

echo ===============================================================================
echo.
echo   JBoss Bootstrap Environment
echo.
echo   JBOSS_HOME: %JBOSS_HOME%
echo.
echo   JAVA: %JAVA%
echo.
echo   JAVA_OPTS: %JAVA_OPTS%
echo.
echo   CLASSPATH: %JBOSS_CLASSPATH%
echo.
echo ===============================================================================
echo.

:RESTART
"%JAVA%" %JAVA_OPTS% ^
   -Djava.endorsed.dirs="%JBOSS_ENDORSED_DIRS%" ^
   -classpath "%JBOSS_CLASSPATH%" ^
   org.jboss.Main %*

if ERRORLEVEL 10 goto RESTART

:END
if "%NOPAUSE%" == "" pause

:END_NO_PAUSE 
```

**运行.conf**

```
## -*- shell-script -*- ######################################################
##                                                                          ##
##  JBoss Bootstrap Script Configuration                                    ##
##                                                                          ##
##############################################################################

### $Id: run.conf 62747 2007-05-02 17:43:36Z dimitris@jboss.org $

#
# This file is optional; it may be removed if not needed.
#

#
# Specify the maximum file descriptor limit, use "max" or "maximum" to use
# the default, as queried by the system.
#
# Defaults to "maximum"
#
#MAX_FD="maximum"

#
# Specify the profiler configuration file to load.
#
# Default is to not load profiler configuration file.
#
#PROFILER=""

#
# Specify the location of the Java home directory.  If set then $JAVA will
# be defined to $JAVA_HOME/bin/java, else $JAVA will be "java".
#
#JAVA_HOME="/opt/java/jdk"

#
# Specify the exact Java VM executable to use.
#
#JAVA=""

#
# Specify options to pass to the Java VM.
#
if [ "x$JAVA_OPTS" = "x" ]; then
   JAVA_OPTS="-Xms128m -Xmx512m -XX:PermSize=256m -XX:MaxPermSize=512m -Dsun.rmi.dgc.client.gcInterval=3600000 -Dsun.rmi.dgc.server.gcInterval=3600000"
fi

# Sample JPDA settings for remote socket debuging
#JAVA_OPTS="$JAVA_OPTS -Xrunjdwp:transport=dt_socket,address=8787,server=y,suspend=n"

# Sample JPDA settings for shared memory debugging 
#JAVA_OPTS="$JAVA_OPTS -Xrunjdwp:transport=dt_shmem,server=y,suspend=n,address=jboss" 
```

请帮我解决这个问题，以便我可以开始在我的服务器上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:33:52.453

查看日志中的行：

13:05:13,182 INFO [Http11Protocol] 在 http-127.0.0.1-8080 上初始化 Coyote HTTP/1.1。

上面说http监听的是8080端口（不是8090端口），所以应该通过地址localhost:8080来访问。

你在哪里配置了http端口？您不应该直接更改服务的端口，而是使用 JBoss 服务绑定集，记住 JBoss 开放了多个端口，因此为避免端口冲突，您应该全部更改它们。

检查：[https ://community.jboss.org/wiki/ConfiguringMultipleJBossInstancesOnOneMachine](https://community.jboss.org/wiki/ConfiguringMultipleJBossInstancesOnOneMachine)

更新：您发布的 Eclipse 屏幕不会更改 JBoss 的端口，Elcipse 使用它来了解 Jboss http 正在侦听的位置，因此您并没有真正更改 JBoss 中的端口。

另一方面，端口问题的一部分，如果你从 Eclipse 启动 JBoss 服务器，你必须增加 Eclipse 等待 JBoss 启动的时间（如果 JBoss 花费的时间超过“[服务器超时延迟](https://stackoverflow.com/questions/298312/starting-jboss-from-eclipse)”属性的Eclipse 中的服务器，它将返回错误）。

# php - while循环内的div背景

> ID：13393411
> 
> 赞同：0
> 
> 时间：2012-11-15T07:55:27.867
> 
> 标签：php

当使用 (count/2) 在 div 中赋予背景颜色时，它适用于替代框。但我想给前三个盒子相同颜色的 div 背景，然后为接下来的三个盒子 diff 颜色，然后再为接下来的三个盒子提供第一种颜色，然后为接下来的三个盒子提供第二种颜色。

替代颜色应适用于三个盒子一次。请澄清这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:00:53.010

您可以使用模数

```
var c;
if (count % 6 < 3)
  // color one
  c = '#fff';
else
  // color two
  c = '#ccc'; 
```

或作为单线

```
var c = count % 6 < 3 ? '#fff' : '#ccc'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:06:52.243

尝试类似的东西

```
k=0, Color=Red

while()
{
    if(k == 3)
    {
      k=0;
     if(Color == Red) Color=Green
     else Color = Red

    }
    else
   {
     k++;
   }
} 
```

# spring - @Service 中的 @Autowire SqlSessionFactoryBean 给出 null

> ID：13393415
> 
> 赞同：0
> 
> 时间：2012-11-15T07:56:15.190
> 
> 标签：spring, mybatis, autowired

我拼命地尝试在我的一个带注释的服务类中使用@Autowire mybatis SqlSessionFactoryBean。正如预期的那样，ApplicationContext.xml 中没有服务类的 bean 定义，因为它被注释，而 SqlSessionFactoryBean bean 定义被呈现。

```
@Service(value = "MyService")
public class MyService
{
    @Autowired
    private SqlSessionFactoryBean sqlSessionFactoryBean;

    // extra code
} 
```

'MyService' 和 'SqlSessionFactoryBean' 类均由 spring 实例化，但针对服务类中的 sqlSessionFactoryBean 变量设置了 null。

# python-2.7 - 无法在 python 2.7 中创建 virtualenv

> ID：13393421
> 
> 赞同：0
> 
> 时间：2012-11-15T07:56:35.790
> 
> 标签：python-2.7, virtualenv

我正在尝试使用以下命令创建一个 virtualenv：

```
$ virtualenv env --distribute 
```

我收到以下消息：

```
...Installing pip...done.
Traceback (most recent call last):
  File "/usr/local/bin/virtualenv", line 8, in <module>
    load_entry_point('virtualenv==1.8.2', 'console_scripts', 'virtualenv')()
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1054, in create_environment
    install_pip(py_executable, search_dirs=search_dirs, never_download=never_download)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 655, in install_pip
    filter_stdout=_filter_setup)
  File "/Library/Python/2.7/site-packages/virtualenv.py", line 1020, in call_subprocess
    % (cmd_desc, proc.returncode))
OSError: Command /Users/nigelra/Thero...blog/venv/bin/python -x /Users/nigelra/Thero...env/bin/easy_install /Library/Python/2.7/...ort/pip-1.2.1.tar.gz failed with error code 2 
```

我不是特别擅长阅读 OSX 错误消息。有人愿意借他们的知识来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:37:57.797

对于其他未来的人来说，`error code 2`这就是我处理它的方式。我从来没有弄清楚哪个问题可以解决（有很多问题），但我可以概述我清理计算机所采取的步骤。

1.  我按照本指南“正确”设置了我的 Python 环境[http://docs.python-guide.org/en/latest/starting/install/osx/](http://docs.python-guide.org/en/latest/starting/install/osx/)
2.  当我这样做时，我遇到了很多错误`$ brew doctor`
3.  我以谷歌为向导，费力地摆脱了所有警告和错误。
4.  许多文件夹权限必须更改。

最终，在重新安装了大部分内容后，我能够设置一个 virtualenv。

希望这对遇到与我相同的混乱的人有所帮助。

# php - mysql按分数/点对用户进行排名

> ID：13393422
> 
> 赞同：0
> 
> 时间：2012-11-15T07:56:36.327
> 
> 标签：php, mysql, sql, select

对于按分数排名的普通用户来说，下面的查询很酷，但我需要一个具有相同排名结果的查询，以获取表中相同的分数

```
SET @rank = 0;
SELECT * FROM (
    SELECT @rank:=@rank + 1 AS rank,score, user_id FROM site_crossword_members ORDER BY score DESC 
) as tmp; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:06:22.627

您确定您给定的查询甚至可以正常工作吗？我记得`ORDER BY`要在 之后完成`SELECT`，从而使您的等级排序`ID ASC`或相似。

```
SELECT user_id, 
    CASE WHEN @score != score THEN @rank := @rank + 1 ELSE @rank END AS rank,
    @score := score AS dummy_value
FROM (  SELECT score, user_id
        FROM site_crossword_members, 
            (SELECT @rank := 0, @score := NULL) AS vars
        ORDER BY score DESC) AS h 
```

**缩短版：**

```
SELECT user_id, 
    @rank := @rank + (@score != score) AS rank,
    @score := score AS dummy_value
FROM (  SELECT score, user_id
        FROM site_crossword_members, 
            (SELECT @rank := 0, @score := NULL) AS vars
        ORDER BY score DESC) AS h 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:06:42.980

试试这个查询（带变量的版本） -

```
SET @rank = 0;
SET @score = NULL;

SELECT
  rank, score, user_id
FROM (
  SELECT
    score,
    user_id,
    IF(@score = score, @rank := @rank + 1, @rank := 1) AS rank,
    @score := score
  FROM site_crossword_members
  ORDER BY score DESC
) t; 
```

# login - 无法从 phpmyadmin 访问 mysql

> ID：13393426
> 
> 赞同：1
> 
> 时间：2012-11-15T07:56:51.690
> 
> 标签：login, phpmyadmin, mysql-error-1045

我正在使用专用的 OVH 服务器，在安装了所有需要的东西（mysql、apache、php 等）之后，我已经安装了 phpmyadmin（也尝试了 adminer），但它无法访问数据库。

每次我尝试登录时都会收到 #1045 错误

```
Access denied for user 'root'@'localhost' (using password: YES) 
```

麻烦的是，在运行安装时，phpmyadmin 要求我为 phpadmin 用户定义一个密码，而这个用户现在是唯一允许连接的用户，即使是 root 也不能​​。

创建的 phpmyadmin 用户没有权限，因此无法创建数据库等。我想允许任何定义的用户登录到 phpmyadmin。

我使用的 auth_type 是“cookie”。

PS：当我在命令行上登录时，一切都很好。

**编辑：**好的，我使用的密码似乎阻止了我登录到 phpmyadmin UI（不允许的字符？）我使用了像**> < ° ( )**这样的字符，所以我更改了密码，一切正常。

有人可以确认某些字符会阻止 phpmyadmin 登录吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T07:59:22.957

检查phpMyAdmin的配置文件，看看里面的密码是否正确。

或者，如果您的 root 没有密码（假设这是一个测试数据库），请删除 phpMyAdmin 的配置文件中存在的密码。

# ruby-on-rails - routes.rb 中的 rails::offline 为 Rails:Module (NoMethodError) 抛出未定义的方法“offline”

> ID：13393430
> 
> 赞同：1
> 
> 时间：2012-11-15T07:57:04.563
> 
> 标签：ruby-on-rails

我正在尝试按照以下 URL 中的离线应用程序 Railcast 为我的 Rails 应用程序启用离线模式

[http://railscasts.com/episodes/247-offline-apps-part-1](http://railscasts.com/episodes/247-offline-apps-part-1)

对我的应用进行了以下更改

*   添加 gem 'rack-offline' 到 gemfile
*   添加 match "/application.manifest" => Rails::offline 到 routes.rb
*   将 HTML 标记更新到 application.html.erb
*   添加 ENV["RAILS_ASSET_ID"] = "" 到 application.rb

尝试启动 rails 服务器时会引发以下错误

Rails 的未定义方法“离线”：模块（NoMethodError）

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:10:08.227

语法应该是：

```
Rails::Offline 
```

# python - 在 pyparsing 中引发自定义异常

> ID：13393432
> 
> 赞同：4
> 
> 时间：2012-11-15T07:57:14.780
> 
> 标签：python, pyparsing

我已将这些定义为我在 pyparsing 中的语法的一部分

```
argument = oneOf(valid_arguments)
function_name = oneOf(valid_functions)
function_call = Group(function_name + LPAR + argument + RPAR) 
```

其中`valid_argument`和`valid_function`是分别包含有效参数名称和函数名称的字符串列表。

现在我想生成自定义异常，以防列名不是 valid_arguments 的一部分并且 function_name 不是函数名之一。我怎么能用 pyparsing 做到这一点？

例子：

```
arguments = ["abc", "bcd", "efg"]
function_names = ['avg', 'min', 'max'] 
```

如果我解析`avg(xyz)`，我应该提出`InvalidArgumentError`，如果我解析`sum(abc)`我想提出`InvalidFunctionError`我在一个名为 exceptions.py 的单独模块中定义的两者

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T03:06:50.857

您可以在解析操作中引发任何类型的异常，但要让异常一直报告给您的调用代码，请让您的异常类派生自 ParseFatalException。这是您请求的特殊异常类型的示例。

```
from pyparsing import *

class InvalidArgumentException(ParseFatalException):
    def __init__(self, s, loc, msg):
        super(InvalidArgumentException, self).__init__(
                s, loc, "invalid argument '%s'" % msg)

class InvalidFunctionException(ParseFatalException): 
    def __init__(self, s, loc, msg):
        super(InvalidFunctionException, self).__init__(
                s, loc, "invalid function '%s'" % msg)

def error(exceptionClass):
    def raise_exception(s,l,t):
        raise exceptionClass(s,l,t[0])
    return Word(alphas,alphanums).setParseAction(raise_exception)

LPAR,RPAR = map(Suppress, "()")
valid_arguments = ['abc', 'bcd', 'efg']
valid_functions = ['avg', 'min', 'max']
argument = oneOf(valid_arguments) | error(InvalidArgumentException)
function_name = oneOf(valid_functions)  | error(InvalidFunctionException)
# add some results names to make it easier to get at the parsed data
function_call = Group(function_name('fname') + LPAR + argument('arg') + RPAR)

tests = """\
    avg(abc)
    sum(abc)
    avg(xyz)
    """.splitlines()
for test in tests:
    if not test.strip(): continue
    try:
        print test.strip()
        result = function_call.parseString(test)
    except ParseBaseException as pe:
        print pe
    else:
        print result[0].dump()
    print 
```

印刷：

```
avg(abc)
['avg', 'abc']
- arg: abc
- fname: avg

sum(abc)
invalid function 'sum' (at char 4), (line:1, col:5)

avg(xyz)
invalid argument 'xyz' (at char 8), (line:1, col:9) 
```

# c - c标准功能全面优化

> ID：13393433
> 
> 赞同：0
> 
> 时间：2012-11-15T07:57:17.833
> 
> 标签：c, optimization

```
c89
gcc (GCC) 4.7.2 
```

你好，

我正在查看一些字符串函数，因为我需要在一个句子中搜索不同的单词。

我只是想知道 c 标准功能是否已完全优化。

例如这些函数： `memchr`, `strstr`, `strspn`, `strchr`, 等

就高性能而言，这是我所需要的。有更好的吗？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T07:59:00.650

您几乎肯定会发现标准库函数已经尽可能地进行了优化，并且它们可能会超过您用 C 编写的任何代码。

请注意，这是针对一般情况的。如果您可以对函数施加一些限制，或者您对数据本身拥有一些额外的信息，您可能能够让您的代码运行得更快，因为您拥有该限制或信息的优势.

例如，我编写了 C 代码，`malloc`因为`malloc`我知道应用程序永远不会要求超过 256 个字节，所以我只为每个请求提供 256 个字节。是的，这是对内存的浪费，但它允许在一般情况下提高速度。

但是，对于一般情况，你最好坚持使用提供的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T07:59:41.577

全面优化？优化什么？

是的，stdlib 的 C 函数编写得非常高效，并且经过多年的测试/调试，所以你绝对不应该担心其中的大多数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:29:35.700

假设您总是将数据对齐到 16 字节边界并每次分配大约 16 字节左右，那么加速大多数 stdlib 例程绝对是可能的。

但假设例如。strlen 事先不知道，或者只读取一个字节太多会导致分段错误，我不会打扰。

# ios - 添加了自动空格

> ID：13393435
> 
> 赞同：0
> 
> 时间：2012-11-15T07:57:26.193
> 
> 标签：ios, uitableview

您好，我有 UItableview，但在空间的每一行期间会自动添加。例如 abc aaa vvv ttt bbb 然后最后一个条目再次从头开始。提前任何帮助谢谢！

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    if(tableView == tableAttendeeList)
    {
    static    NSString *cellName=@"AttendeeCell";

        UITableViewCell *tvc = [tableView dequeueReusableCellWithIdentifier:cellName];
        NSLog(@"%@",tvc.textLabel.text);
        NSLog(@"%i",indexPath.row);
        if (tvc == nil) {
            tvc=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellName]autorelease];
            HMAttendee* attdee = [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers objectAtIndex:indexPath.row];  
            NSLog(@"%@",attdee.strName);

            tvc.textLabel.text = attdee.strName;

        return tvc;    
        }
        HMAttendee* attdee = [[HMMainManager getSharedInstance].currentMeeting.arrMeetingUsers objectAtIndex:indexPath.row];  
        tvc.textLabel.text=attdee.strName;
        return tvc;

    }//end if 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:56:53.327

ki找到了解决方案。thx 任何方式我只是改变缩进 lvl

```
tvc.indentationLevel = 0;
tvc.indentationWidth = 0; 
```

# oracle - ORA-12560:TNS:协议适配器错误

> ID：13393440
> 
> 赞同：0
> 
> 时间：2012-11-15T07:57:49.990
> 
> 标签：oracle

> **可能重复：**
> [ORA-12560：TNS：协议适配器错误](https://stackoverflow.com/questions/6894558/ora-12560-tnsprotocol-adaptor-error)

当我尝试登录数据库时，出现此错误。

> ORA-12560:TNS:协议适配器错误

有人可以指导我吗？

我正在使用 Windows 7，Oracle 11.2.0.2.0。

# kendo-ui - Kendo UI - 如何在编辑时使特定字段只读，同时在剑道网格中创建可编辑？

> ID：13393443
> 
> 赞同：9
> 
> 时间：2012-11-15T07:57:55.963
> 
> 标签：kendo-ui

我有一个关于如何在 kendo UI 中实现 readonly on edit 的问题。详细解释见下文

我有以下字段：

名字（创建时可编辑）（编辑时可编辑）
姓氏（创建时可编辑）（编辑时可编辑）
用户名（创建时可编辑）（编辑时只读）
电子邮件（创建时可编辑）（编辑时可编辑）
电话号码（创建时可编辑） （编辑时可编辑）
PreWin2KUserName（创建时不可编辑）（编辑时只读）

使用 Kendo UI 网格参考链接 [http: //demos.kendoui.c​​om/web/grid/editing-inline.html](http://demos.kendoui.com/web/grid/editing-inline.html)

加上这个来实现 [http://www.kendoui.c​​om/forums/ui/grid/ making-column-as-readonly-on-update-and-editable-on-insert-in-grid.aspx](http://www.kendoui.com/forums/ui/grid/making-column-as-readonly-on-update-and-editable-on-insert-in-grid.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T23:45:17.797

您可以使用网格的[编辑事件](http://docs.kendoui.com/api/web/grid#events-edit)。如果模型不是新模型，即用户正在编辑（而不是创建）记录，则您将只读属性附加到所需的输入元素。

```
$('#yourGrid').kendoGrid({
     // ...
     edit: function(e) {
         if (!e.model.isNew()){
             // make sure the UserName id selector is correct in your code
             // (it should be, for a regular text input)
             $('#UserName').attr('readonly', 'readonly');
         }
     }
}) 
```

# c++ - gnuplot 和 c++ 和管道

> ID：13393444
> 
> 赞同：0
> 
> 时间：2012-11-15T07:58:02.223
> 
> 标签：c++, visual-studio-2010, charts, plot, gnuplot

我对这一切都很陌生。这是我的问题。

根据“FILE *p = _popen”，我从VS2010 c ++打开了一个管道到gnuolot，这似乎在我最终出现图表时起作用。

我有一个无限循环，它被管道打开后的“轻弹开关”破坏，并将命令发送到 int _tmain(int argc, _TCHAR* argv[]) {} 结构中的“gnuplot”

似乎这个循环以某种方式阻止了 gnuplot 中图形的生成，因为它仅在我故意打破无限循环或可能“占用”所有处理器时间时出现。

我的主要最终目标是打开一个到 gnuplot 的管道，然后在 gnuplot 中实时从我的 c++ 程序中绘制一个变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:30:36.477

问题是 stdio 默认缓冲输出到管道。解决方案是：

1.  `fflush`当您想将数据强制传输到管道时调用。

2.  `fflush`每次输出操作后调用。

3.  `setbuf`打开管道后调用，禁用缓冲。

4.  `pclose`当你完成发送到管道时调用，所有缓冲的数据都将被刷新。

# android - 移动搜索栏时，Android 视频视图未在暂停状态下播放

> ID：13393445
> 
> 赞同：2
> 
> 时间：2012-11-15T07:58:08.393
> 
> 标签：android, android-videoview, seekbar

我正在努力解决我要播放视频文件的问题。我已经使用视频视图来播放实现的搜索栏的视频，以根据用户要求搜索到不同的位置。

播放视频时，我的搜索栏工作正常。它寻求各自的位置。但是在暂停状态下，我没有得到相同的结果。

这是我的搜索栏

```
seekBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onStartTrackingTouch(SeekBar seekBar) {

            }

            @Override
            public void onProgressChanged(SeekBar seekBar, int progress,
                    boolean fromUser) {

                if (fromUser) {
                    // this is when actually seekbar has been seeked to a new
                    // position
                    video_view.seekTo(progress);
                }
            }
        }); 
```

# android - 将字符串以“@”开头放在android资源中

> ID：13393451
> 
> 赞同：1
> 
> 时间：2012-11-15T07:58:20.887
> 
> 标签：android, string, resources

我需要在android资源中添加以“@”开头的字符串，但会出错：

> 未指定资源类型（在“str1”处，值为“@%s test”）。

我的字符串是：

```
<string name="str1" formatted="false">@%s test</string> 
```

我必须如何编码“@”以将其放置在字符串资源中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T08:00:14.117

我很确定你可以逃脱它`\@`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:03:00.210

你应该`@`用`\`. 此外，您应该使用它们的位置引用参数：

```
<string name="str1" formatted="false">\@%1$s test</string> 
```

# c# - 序列化关系而不是对象

> ID：13393462
> 
> 赞同：1
> 
> 时间：2012-11-15T07:59:06.930
> 
> 标签：c#, xml-serialization

> **可能重复：**
> [.net XML 序列化 - 存储引用而不是对象副本](https://stackoverflow.com/questions/1617528/net-xml-serialization-storing-reference-instead-of-object-copy)

我正在为游戏创建攻击计划器，并具有以下类：

```
public class AttackTypes : ObservableCollection<AttackType> { }

public class AttackType
{
    public AttackTypeEnum Type { get; set; }
    public Units units { get; set; }
    public string Name { get; set; }

    public AttackType()
    {
        units = new Units();
    }
}

public class AttackPatterns : ObservableCollection<AttackPattern> { }

public class AttackPattern
{
    public string Name { get; set; }
    SerializableDictionary<AttackType, int> Count { get; set; }

    public AttackPattern(AttackTypes types)
    {
        Count = new SerializableDictionary<AttackType, int>();

        foreach (AttackType item in types) { Count.Add(item, 0); }
    }
} 
```

AttackType 保存有关我要发送的单位的信息。用户可以创建 5 到 10 种不同的类型。AttackPattern 用于对不同的 AttackType 进行分组。基本上，该模式具有对完整 AttackType 列表的引用，并将每个 AttackType 作为模式一部分的频率保存在字典中。当 AttackType 的单位发生变化时，这些变化也会在模式中可见。

现在我想将整个内容保存到光盘并在下次启动程序时加载它。到目前为止，我一直在使用 XML 序列化。我必须解决问题。第一：引用的整个结构寿命。正如我之前所说：当我更新 AttackType 时，我还需要查看模式的变化。但是当我将其转储到 XML 时，这些联系就丢失了。第二：我序列化 AttackTypes 对象。有关单位的所有详细信息都在那里。当我序列化一个模式时，AttackTypes 的整个列表（包括单位）被再次保存。再次为下一个模式。再次为下一个模式...

有任何想法吗？

# c# - 我应该使用枚举还是只在需要它们内部值的地方使用单独的常量

> ID：13393470
> 
> 赞同：1
> 
> 时间：2012-11-15T07:59:54.897
> 
> 标签：c#, enums, constants

让我用医生来解释我的问题。现在医生有不同的专业领域，例如神经科医生=0，肿瘤科医生=1，心脏病科医生=2，妇科医生=3 等。假设我有一种方法，将这些专业之一作为整数并将其用作存储的参数数据库中的过程：

```
DisplaySkills(int speciality)
{
   //create a connection to a database, refer to a stored procedure in the database;
   //send "speciality" as an argument to that stored procedure
} 
```

现在，在这里我有点进退两难，我是否应该在枚举中包含这些专业或单独声明它们。乍一看，我觉得我应该使用枚举，因为这只是“一个事物可以是多个事物之一”的情况，但另一方面事实证明，如果我使用枚举，那么我将不得不将其转换为得到它的内在价值。这是一个例子：

```
enum Speciality
{
  Neurologist=0,
  Oncologist=1,
  Cardiologist=2,
  Gynecologist=3
}
.............
Speciality spec=Speciality.Oncologist;
.............
DisplaySkills(int(spec)); 
```

我不知道，也许必须强制转换枚举是一种完全正常的做法，并且被程序员广泛使用，但我认为它会影响性能（无论是否明显）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:04:15.667

我会使用`DisplaySkills`接受枚举作为参数的方法。仅在调用存储过程时进行强制转换。

因为当看到时`DisplaySkills(int speciality)`，与某些枚举中声明的专业没有联系。也许我应该这样使用它？

```
DisplaySkills(500); 
```

另一方面：

```
DisplaySkills(Speciality.Neurologist); 
```

它告诉我所有可能的参数值。此外，我会将名称更改为`DisplaySkillsOf(Speciality.Cardiologist)`- 看起来更像是英文句子。我添加了[保护条件](http://martinfowler.com/refactoring/catalog/replaceNestedConditionalWithGuardClauses.html)`Speciality`来检查枚举中包含的传递值。否则有人可以这样做

```
DisplaySkills((Speciality)500); 
```

并且仅在此方法中，您在创建参数时将传递的枚举转换为 int（看起来您正在使用 ADO.NET）

```
cmd.Parameters.Add(new SqlParameter("@Speciality", (int)spec)); 
```

* * *

关于为您的方法创建守卫的另一个提示。您可以使用[通用枚举包装器](https://stackoverflow.com/a/13248913/470005)来检查是否传递了适当的值

```
if (!Enum<Speciality>.IsDefined(spec))
     throw new ArgumentException("spec"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:02:12.410

> 我应该使用枚举还是只在需要它们内部值的地方使用单独的常量

在您的情况下，我将选择`enum`常量字段。

> 也许必须强制执行枚举是一种完全正常的做法。

是的。这是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:03:00.453

我建议你使用 enum 而不是静态常量类，因为它是`Type safe`.
经验法则：如果您只有 Int + 字符串值，请使用枚举。如果您有更多字段，请使用静态类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T08:03:53.517

如果您担心铸造，那么让我告诉您这里不需要您可以使用它

```
int value = Speciality.Cardiologist.GetHashCode(); 
```

# android - 如何获得像-0400这样的时区值

> ID：13393473
> 
> 赞同：-1
> 
> 时间：2012-11-15T08:00:01.060
> 
> 标签：android, timezone

我想像这样在我的休息服务中传递日期值

```
"ActionTime":"\/Date(928164000000-0400)\/ 
```

我的问题是如何获得这个变量的`date`时间`zone`值。`ActionTime`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:21:14.097

```
Calendar cal = Calendar.getInstance();
TimeZone tz = cal.getTimeZone();
Log.d("Time zone","="+tz.getDisplayName()); 
```

或者你也可以使用这个

```
Timezone.getDefault() 
```

====================================

```
String s = "2013-01-01 12:00:00";
DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
df.setTimeZone(TimeZone.getTimeZone("CST"));
Date timestamp = null;
try {
    timestamp = df.parse(s);
    df.setTimeZone(TimeZone.getDefault());
    System.out.println(df.format(timestamp));
} catch (ParseException e) {
    e.printStackTrace();
} 
```

=============== 您应该能够根据 TimeZone getOffset() 值计算差异，[请参阅此](http://developer.android.com/reference/java/util/TimeZone.html#getOffset%28long)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T12:15:09.127

这就是我的做法：

```
Date dt = new Date();
        int z = dt.getTimezoneOffset();

        String date = "/Date(" + dt.getTime() + z+")/"; 
```

感谢所有的帮助，但我有一些更简单的方法。

# module - Joomla 2.5 向组件添加插件

> ID：13393478
> 
> 赞同：0
> 
> 时间：2012-11-15T08:00:30.543
> 
> 标签：module, joomla2.5

我一直在研究一个组件，但我明白了，为了提高效率，我应该为其添加一个插件以覆盖核心，但我的问题是：

如果可能的话，如何简单地将它添加到我创建的以前的组件中，而不需要让用户安装两个组件？

Joomla 2.5 是否理解我在组件中放置了一个插件，或者我如何才能理解有人将插件放入组件中？

任何帮助，将不胜感激 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:43:24.010

据我了解，您仍然需要从组件独立构建插件。

如果您可以更准确地了解您正在尝试做的事情，您可能会获得更多建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T14:20:23.797

您可以将组件和插件一起打包为 xml 文件中的“包”。有关更多信息，请参阅[此](http://docs.joomla.org/Package)Joomla 文档页面。像 Akeeba subs、jDump 和许多其他著名的 Joomla 组件之类的东西都使用这种方法！

# oracle - ORACLE APEX 表单中的 SYSDATE

> ID：13393481
> 
> 赞同：1
> 
> 时间：2012-11-15T08:00:45.287
> 
> 标签：oracle, oracle11g, oracle-apex

我正在使用 APEX 表单。这里我有表 A，其中包含 Date 列。默认情况下，这里的日期选择器是。我想将日期选择器更改为“SYSDATE”，即在表单上显示 sysdate 不要选择它。请帮助我出去

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:24:32.327

在您要将 sysdate 设置为默认值的项目中

选择`PL/SQL Expression`和为价值给

```
to_char(sysdate,'DD-MON-YYYY') 
```

因此，您将 sysdate 作为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:26:33.223

要将 sysdate 设置为默认日期，只需打开日期设置，将默认值类型更改为 PL/SQL 表达式和值

给 (to_char(sysdate,'DD-MON-YYYY')) 它将起作用。

您还可以从表单编辑页面更改日期选择。

# asp.net-mvc - 如何防止在 Orchard 中显示验证摘要？

> ID：13393484
> 
> 赞同：0
> 
> 时间：2012-11-15T08:00:56.213
> 
> 标签：asp.net-mvc, orchardcms

我正在设计一个模块，我计划在其中使用 jQuey 实现自定义验证。我遇到了一个名为的问题，该问题`Validation Summary`将显示在每个内容类型**编辑器**页面的顶部。现在我正在寻找摆脱它的方法。感谢任何帮助我的人。最好的问候。

**编辑：**

实际上我的问题不在于显示验证summery。我原来的问题如下：

我有一个名为 Estate 的 ContentType，其中包含`1-EstatePart` `2-AddressPart` `3-PersonalInfoPart`。当用户注册新的 Estate 时，当用户注册（并登录）时，用户信息已经存在于数据库中，因此不应显示 PersonalInfo 部分。在 PersonalInfopart 视图中我决定根据标志显示或不显示信息（与传递给视图的模型相关联）。但是当我在任何情况下提交表单时，PersonalInfoPart 驱动程序都会尝试验证部件（对用户来说是隐藏的）并显示验证消息我的第一个问题是与这个问题有多大关系。

**编辑2：我尝试过的：**

我试图为模型的 ShouldDisplay 属性呈现隐藏字段，并且在驱动程序中我试图从 part.but PersonalInfoPart 中检索 ShouldDisplay 值包含空属性。

我的代码

```
protected override DriverResult Editor(PersonalInfoPart part, IUpdateModel updater, dynamic shapeHelper)
    {
        if (part.ShouldDisplay) //ShouldDisplay is always false (and other properties is null)
            updater.TryUpdateModel(part, Prefix, null, null);
        return Editor(part, shapeHelper);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T08:37:41.313

另一种选择可能是使用 CSS 简单地隐藏该部分。

# installation - 如何在 Win7 和 Win8 中制作一个包含安装工具程序且未指定 .Net 框架的 msi 安装程序

> ID：13393485
> 
> 赞同：0
> 
> 时间：2012-11-15T08:00:59.167
> 
> 标签：installation, windows-installer, clickonce

我正在为安装程序工作，我将安装程序环境设置如下：

1.  安装程序项目是使用 VS2010 .Net framework 4.0 构建的
2.  它包含一个在 .Net 框架 4.0 中构建的程序集文件
3.  .Net 框架版本属性在启动条件中设置为“任何”。
4.  从 Installer 派生的安装实用程序程序集是使用 .Net 框架 4.0 构建的。

我在 Win7 中测试安装程序，但 .Net frameworks 4.0 是必不可少的。然后，我想将程序安装到 Win8，抛出一个描述为“InstallUtilLib.dll，未知错误”的异常，然后安装程序回滚。

我想制作一个安装程序，可以安装 Win7 或 Win8 并且没有指定 .Net 框架版本。我应该为这个场景做些什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:37:51.657

重构安装程序类自定义操作以使用 Windows Installer XML (WiX) 部署工具基础 (DTF)。它是托管代码自定义操作的黄金标准，并且具有支持 CLR 指定支持的运行时和激活策略的能力的 CustomAction.Config (XML)。

更多信息可以在以下位置找到：

[部署工具基金会加入 WiX 工具集](http://robmensching.com/blog/posts/2008/5/16/Deployment-Tools-Foundation-joins-the-WiX-toolset)

[部署工具基础 (DTF) 托管的自定义操作](http://blog.iswix.com/2008/05/deployment-tools-foundation-dtf-managed.html)

[WiX 和 DTF：简介](http://blog.torresdal.net/2008/09/03/)

# android - 使用自定义对话框匹配密码

> ID：13393487
> 
> 赞同：2
> 
> 时间：2012-11-15T08:01:05.177
> 
> 标签：android, dialog

我想使用自定义对话框进行 Pin 身份验证。这是我的代码：

```
public void fetchUI()
{
    add=(Button)findViewById(R.id.pinButton);

    add.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

            final AlertDialog.Builder alert = new AlertDialog.Builder(MainActivity.this);
            final EditText input = new EditText(MainActivity.this);
            input.setTransformationMethod(PasswordTransformationMethod.getInstance());
            alert.setView(input);
            alert.setTitle("Type Your PIN");
            alert.setIcon(R.drawable.ic_launcher);
            alert.setMessage("Please Type Your PIN  below to Authenticate");

            alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {

                }
            });

            alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int whichButton) {
                    dialog.cancel();
                }
            });

           alert.show();
        }
    });
} 
```

现在我想这样做：如果我使用正确的 PIN 单击“确定”，则会出现一个对话框。否则，如果我单击确定，它不会消失。我怎样才能做到这一点？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T08:06:37.237

```
 final String CORRECT_PIN = "123123"; // Should come from somewhere else than a local variable
    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            if (CORRECT_PIN.equals(input.getText().toString()) {
                dialog.dismiss();
            } else {
                input.setError(getString(R.string.error_incorrect_pin));
            }    
        }
    }); 
```

* * *

**编辑**：上面的代码给出了处理验证的正确方法。但是，为了防止在单击按钮后对话框消失，您需要在自定义对话框按钮中包含自己的按钮。

其他可能性：仅当引脚正确时才启用 OK 按钮。您需要在 EditText 上添加文本更改侦听器，并在 onTextChange 方法中执行以下操作：

```
input.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {               
        alert.getButton(AlertDialog.BUTTON_POSITIVE).setEnabled(CORRECT_PIN.equals(input.getText().toString());
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    @Override
    public void afterTextChanged(Editable s) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:14:44.357

单击 PositiveButton 或 NegativeButton 时，AlertDialog 总是会关闭。

您要做的是将您自己的“确定”和“取消”按钮添加到 AlertDialog 的视图中，并在这些按钮上设置侦听器。所以，而不是只是打电话...

```
alert.setView(input); 
```

...您还想添加按钮。像这样的东西：

```
LinearLayout ll = new LinearLayout(context);
ll.addView(input);
ll.addView(okButtonYouInstansiatedYourself);
ll.addView(cancelButtonYouInstansiatedYourself);
alert.setView(ll);

okButtonYouInstansiatedYourself.b.setOnClickListener(...);
cancelButtonYouInstansiatedYourself.b.setOnClickListener(...); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T14:08:50.877

由于各种相关问题，我更改了与对话框相同的方法

我对这件事的解决方案是

> 使用 2 个活动

*   1 位家长
*   2个孩子

从父母那里调用孩子并根据您的要求完成工作，但在清单文件中将这些东西添加到您的孩子活动中，您的活动将像对话框一样

> android:theme="@android:style/Theme.Dialog"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T08:10:48.103

您可以将 onShowListener 添加到 AlertDialog ，然后您可以在其中覆盖按钮的 onClickListener 。

```
final AlertDialog d = new AlertDialog.Builder(context)
        .setView(v)
        .setTitle(R.string.my_title)
        .setPositiveButton(android.R.string.ok,
                new Dialog.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface d, int which) {
                        //Do nothing here. We override the onclick
                    }
                })
        .setNegativeButton(android.R.string.cancel, null)
        .create();

d.setOnShowListener(new DialogInterface.OnShowListener() {

    @Override
    public void onShow(DialogInterface dialog) {

        Button b = d.getButton(AlertDialog.BUTTON_POSITIVE);
        b.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // TODO Do something

                //Dismiss once everything is OK.
                d.dismiss();
            }
        });
    }
}); 
```

来源：[如何防止单击按钮时关闭对话框](https://stackoverflow.com/questions/2620444/android-how-to-prevent-dialog-closed-or-remain-dialog-when-button-is-clicked)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T08:07:03.383

```
alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
            String val = input.getText().toString();  /// this is your input editbox value

            }
        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-24T04:50:31.477

您可以使用 SharedPreference 来保存用户名和密码。您还可以通过 SharedPreference 检查您的密码和用户名。

# java - 在 Java 中返回多个值

> ID：13393490
> 
> 赞同：9
> 
> 时间：2012-11-15T08:01:33.113
> 
> 标签：java, function, return

我用 Java 写了一个函数，我希望这个函数返回多个值。除了使用数组和结构，有没有办法返回多个值？

我的代码：

```
String query40 = "SELECT Good_Name,Quantity,Price from Tbl1 where Good_ID="+x;
Cursor c = db.rawQuery(query, null);
if (c!= null && c.moveToFirst()) 
{
  GoodNameShow = c.getString(0);
  QuantityShow = c.getLong(1);
  GoodUnitPriceShow = c.getLong(2);
  return GoodNameShow,QuantityShow ,GoodUnitPriceShow ;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-15T08:04:22.033

在 Java 中，当您希望函数返回多个值时，您必须

*   将这些值嵌入到您返回的对象中
*   或更改传递给您的函数的对象

在您的情况下，您显然需要定义一个`Show`可以具有字段的类`name`，`quantity`并且`price`：

```
public class Show {
    private String name;
    private int price;
    // add other fields, constructor and accessors
} 
```

然后将您的功能更改为

```
 public  Show  test(){
      ...
      return new Show(GoodNameShow,QuantityShow ,GoodUnitPriceShow) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-27T14:24:15.047

我遇到过几次（甚至在 java 库本身中）的一种快速而丑陋的方法是返回你的值`Object[]`，然后使用强制转换解包。例如

```
public Object[] myfunc() {
  String name = "...";
  Integer quantity = 5
  Float price = 3.14
  return new Object[] { name, quantity, price }; 
```

然后，它是这样使用的：

```
Object[] output = myfunc();
String name = (String) output[0];
Integer quantity = (Integer) output[1];
Float price = (Float) price[2]; 
```

将值嵌入到专用对象中要干净得多，但我还是把它留在这里。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-13T11:27:19.857

我已经开发了一种非常基本的方法来处理这种情况。

我在字符串中使用了**分隔符的逻辑。**

例如如果你需要在同一个函数中返回 1\. int 值 2\. double 值 3\. String 值

您可以使用**分隔符字符串**

**例如“,.”**这种字符串一般不会出现在任何地方。

您可以返回一个由此分隔符分隔的所有值组成的字符串 **"< int value >,.,< double value >,.,< String value >"**

并转换为使用 **String.split(separtor)[index]调用函数的等效类型**

请参阅以下代码进行解释 -

使用的分隔符 =",.,"

```
public class TestMultipleReturns{

 public static void main(String args[]){

   String result =  getMultipleValues();
   int intval = Integer.parseInt(result.split(",.,")[0]);
   double doubleval = Double.parseDouble(result.split(",.,")[1]);     
    String strval = result.split(",.,")[2];
 }

 public static String getMultipleValues(){

   int intval = 231;//some int value      
   double doubleval = 3.14;//some double val
   String strval = "hello";//some String val

   return(intval+",.,"+doubleval+",.,"+strval);

 }
} 
```

当您不想只为函数返回增加类的数量时，这种方法可以用作快捷方式

采取哪种方法取决于具体情况。

# ruby-on-rails - rails nokogiri 没有这样的文件或目录

> ID：13393491
> 
> 赞同：16
> 
> 时间：2012-11-15T08:01:34.123
> 
> 标签：ruby-on-rails, ruby, nokogiri

宝石文件

```
...
gem 'nokogiri'
... 
```

在控制器中

```
doc = Nokogiri::HTML(open('http://google.com')) 
```

我得到了一个错误

```
Errno::ENOENT in SiteController#scrap
No such file or directory - http://google.com
app/controllers/site_controller.rb:6:in `initialize'
app/controllers/site_controller.rb:6:in `open'
app/controllers/site_controller.rb:6:in `scrap' 
```

我尝试删除 Gemfile.lock 并再次执行“捆绑安装”，但这并没有解决我的问题。

导轨 2.3.8

红宝石 1.9.3p194

我究竟做错了什么？在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-15T08:03:17.397

如果您`require 'open-uri'`想将 URL 传递给`open()`. 此外，您需要在打开文件后阅读该文件：

```
require 'open-uri'
doc = Nokogiri::HTML(open('http://google.com').read) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-26T11:58:45.503

在我的情况下（使用 brew 安装 ruby​​），我执行这些步骤来制作`open()`作品

```
require 'open-uri'

# to get a TempFile object
URI.open("http://www.google.com")

# to get string of html
URI.open("http://www.google.com").read 
```

我从[https://ruby-doc.org/stdlib-2.6.3/libdoc/open-uri/rdoc/OpenURI.html的文档中得到了这个](https://ruby-doc.org/stdlib-2.6.3/libdoc/open-uri/rdoc/OpenURI.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-13T09:56:11.430

我试图将 http 作为模型中的文件访问。

```
For instance :
web_doc = Nokogiri::HTML(open("https://www.abokifx.com/", :ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE))
ERROR which was thrown 

Errno::ENOENT: No such file or directory @ rb_sysopen - https://www.abokifx.com/
    from (irb):10:in `initialize'
    from (irb):10:in `open'
    from (irb):10 
```

由于 open 无法将 https URL 作为文件读取。OpenURI 是一个易于使用的 Net::HTTP、Net::HTTPS 和 Net::FTP 包装器。可以像打开文件一样打开 http、https 或 ftp URL，因此您需要`require 'open-uri'`.

在添加`require 'open-uri'`Nokogiri 时，它能够抓取该网站。

# php - facebook服务器端登录导致空白页面

> ID：13393493
> 
> 赞同：0
> 
> 时间：2012-11-15T08:01:38.473
> 
> 标签：php, facebook

我最近在 facebook 上做了一个测试应用程序，该应用程序是一个网站应用程序，我只需要用户登录，这样我就可以使用 php sdk 从应用程序内访问用户信息，当我第一次测试它时，登录过程完美无缺，问题是，当我到达测试页面时，它完全是空白的，而我希望它回显：HELLO NAME，其中“NAME”是我的名字，这是代码，我不会发布应用程序 ID、秘密等，因为这些肯定有效，因为登录过程很好：

```
 $app_id = "xxxxxxxxxxxx";
   $app_secret = "xxxxxxxxxxxxxxxxxxxxxx";
   $my_url = "http://www.anithro.com/anithroproject/login.php/";
    session_start();
    $code = $_REQUEST["code"];

   if(empty($code)) {
 // Redirect to Login Dialog
   $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
 $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
   . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
   . $_SESSION['state'] . "&scope=user_birthday,read_stream";

 echo("<script> top.location.href='" . $dialog_url . "'</script>");
   if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
 // state variable matches
   $token_url = "https://graph.facebook.com/oauth/access_token?"
   . "client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url)
   . "&client_secret=" . $app_secret . "&code=" . $code;

 $response = file_get_contents($token_url);
 $params = null;
 parse_str($response, $params);
 $_SESSION['access_token'] = $params['access_token'];
 $graph_url = "https://graph.facebook.com/me?access_token=" 
   . $_SESSION['access_token'];

 $user = json_decode(file_get_contents($graph_url));
 echo("Hello " . $user->name);
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
     }
   } 
```

我已经完全按照代码进行操作，为什么我不能访问用户变量？提前谢谢。你可以尝试访问我给出的 url 看看，它只是空白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:22:34.437

如果已通过身份验证，您是否测试了您正在使用的 access_token？您可以将其用于调试工具：[https ://developers.facebook.com/tools/](https://developers.facebook.com/tools/)

你也可以试试这个链接：[https](https://github.com/facebook/facebook-php-sdk) ://github.com/facebook/facebook-php-sdk 这里的 PHP SDK 使用一个类来获取登录用户的基本信息。检查示例文件夹。

# java - 你能为我举一个这个正则表达式的例子吗？

> ID：13393500
> 
> 赞同：0
> 
> 时间：2012-11-15T08:02:22.053
> 
> 标签：java, regex

正则表达式是 `(\\w+).*>(.{23}) ([^\\[]+)\\[([^\\]]+)]: (.+)`

```
Pattern pattern = Pattern.compile("(\\w+).*>(.{23}) ([^\\[]+)\\[([^\\]]+)]: (.+)")
String s = "xxxxxx";   //this is what I want
Matcher matcher =  pattern.matcher(s);
System.out.println(matcher.find());   // I hope "true" 
```

也许不适合在这里寻求帮助。但我不是正则表达式专家，我需要快速知道结果。

我降低了复杂性并尝试了一些方案。

*   `abbb>(ccccccccccccccccccccddddddddddcc)` 可以`(\\w+).*>(.{23})`
*   `(\\a)` 可以`([^\\[]+)`

但如果我把它们结合起来。

`abbb>(ccccccccccccccccccccddddddddddcc) (\\a)` 不行`(\\w+).*>(.{23}) ([^\\[]+)`

所以我很困惑，尤其是 `([^\\[]+)\\[([^\\]]+)]: (.+)` 部分。谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:02:30.420

你的问题很不清楚，但如果你需要字符串来匹配你的正则表达式，我为你做了一些：

```
匹配： true，字符串： word-0>kiOgNnuGfalhTfkqxtsCyhN f[RxQrH]：tqtmY
匹配： true，字符串： word-1>wlnJomNExhCLHjrmsyLsKhh g[fXSsPYD]：BbzUM
匹配： true，字符串： word-2>pdTepooJdeDgnODUAJMMPtB Pf[d]： aqmYx
匹配： true，字符串： word-3>jMNDTuvCBufSEAxuzPDmyFG xt[T[RJjQEpJ]：bdlLS
匹配： true，字符串： word-4>kHwqbjwNrSqhGeutzxtqiEy f[SmjJVt]：dWwlU
匹配： true，字符串： word-5>UreUxUwpIyHqPXqVlALIlmr vuJScq[ QFIpLCplW]：UuL0K
匹配： true，字符串： word-6>dojPDeXqAfsHvGjOfvyZOtR aq[ImRqDn]:eyqlr
匹配： true，字符串： word-7>ViljtcHRPzMjktFzqwDcprB le[U]：yfohG
匹配： true，字符串： word-8>sjtQoCTupFbYqzhxcnrPbMh hhR[gufba]：DmREu
匹配： true，字符串： word-9>ZauFhTHuvuXcqlymybjYHzj yv[FAaupu]： ZtrqL

```

所有这些都匹配`"(\\w+).*>(.{23}) ([^\\[]+)\\[([^\\]]+)]: (.+)"`，并且该列表是由我快速编写的一些代码生成的：

```
// generate some strings....
for (String string : full) {
    Pattern pattern = Pattern.compile("(\\w+).*>(.{23}) ([^\\[]+)\\[([^\\]]+)]: (.+)");
    Matcher matcher =  pattern.matcher(string);
    System.out.println("matches:" + matcher.find() + ", string:" + string);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:10:59.497

```
([^\[]+) is what ever exept '[' one or more times
\[([^\]]+)]: (\.+) '[' what ever except ']' one or more times ']' : a space and
one ore more dots 
```

与此匹配的示例是 'oo[pp]: ...'

括号代表组。

# c++ - 具有相同函数名称的段错误。为什么？怎么修？

> ID：13393502
> 
> 赞同：1
> 
> 时间：2012-11-15T08:02:31.757
> 
> 标签：c++, segmentation-fault

我知道通过更改三角函数名称我摆脱了段错误。但是，我并不完全清楚为什么。我的猜测是我在我的实现中得到了递归调用。有人可以在这里给出严格的解释吗？

此外，我愿意保持这种方式，因此我想知道应该添加/修改什么以保持我的函数名称不变。

PS：我知道这是一个愚蠢的问题，只是从这里开始 c++，所以请多多包涵。:)

代码：

```
#include <iostream>
#include <string>
#include <cmath>

#define _USE_MATH_DEFINES

using namespace std;

/*
   Represents a calculator with various functions.
*/
class Calc {
public:
    //arithmetic functions
    static double sum(double a, double b){ return a+b; };
    static double subtract(double a, double b){ return a-b;};
    static double multiply(double a, double b){ return a*b; };
    static double divide(double a, double b){ if (b == 0) return b; return a/b; };
    static double avg(double a, double b){ return (a+b)/2; };

    //trigonometric funcitons
    static double sin(double x){ return sin(M_PI*x); };
    static double cos(double x){ return cos(M_PI*x); };
    static double tan(double x){ return tan(M_PI*x); };
};

void getValue(double *a){
    cout << "Please, enter a value: " << endl;
        cin >> (*a);
}

void getValues(double *a, double *b){
    cout << "Please, enter two values: " << endl;
        cin >> (*a) >> (*b);
}

bool getCommand(string *cmd){
    cout << "Please, enter a command (+,-,*,/,avg, sin, cos, tan, exit): ";
    cin >> (*cmd);
    if ( (*cmd) == "exit"){
        return false;
    } else {
        return true;
    }
}

int main (){
    string cmd;
    double a,b;

    while (getCommand(&cmd)){
        if (cmd == "sin" || cmd == "cos" || cmd == "tan"){
            getValue(&a);
            if (cmd == "sin"){
                cout << "Sine: " << Calc::sin(a) << endl;
            } else if (cmd == "cos"){
                cout << "Cosine: " << Calc::cos(a) << endl;
            } else if (cmd == "tan"){
                cout << "Tangent: " << Calc::tan(a) << endl;
            }
        } else {
            getValues(&a,&b);
            if (cmd == "+"){
                cout << "Summation: " << Calc::sum(a,b) << endl;
            } else if (cmd == "-"){
                cout << "Subtracttion: " << Calc::subtract(a,b) << endl;
            } else if (cmd == "*"){
                cout << "Multiplication: " << Calc::multiply(a,b) << endl;
            } else if (cmd == "/"){
                cout << "Division: " << Calc::divide(a,b) << endl;
            } else if (cmd == "avg"){
                cout << "Average: " << Calc::avg(a,b) << endl;
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T08:06:35.287

你明白了，递归调用。我想你想要

`static double sin(double x){ return ::sin(M_PI*x); };`

使用范围解析运算符`::`将使您的 sin 函数调用全局 sin 函数，而不是递归调用您的函数。

顺便说一句，如果您尝试将度数转换为弧度，那么您实际上需要

`static double sin(double x){ return ::sin((M_PI/180.0)*x); };`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:07:20.873

1）你应该`#define _USE_MATH_DEFINES` **在**你之前`#include <cmath>`。

2）您的`Calc`函数确实包含无限递归（它们正在调用自己）。您需要按如下方式更改它们：

```
static double sin(double x){ return std::sin(M_PI*x); } 
```

也就是说，对调用进行限定以`sin()`明确您要调用全局调用。

# entity-framework - LINQ 实体数据读取器不支持枚举

> ID：13393503
> 
> 赞同：5
> 
> 时间：2012-11-15T08:02:32.473
> 
> 标签：entity-framework, enums, sqlbulkcopy

我必须批量插入很多实体，所以我认为最好的方法是使用[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)该类。但是，该类对`DataReader`实例进行操作，而我的代码与 IEnumerable 一起使用，其中 T 是我的实体类。要将我的 IEnumerable 转换为 DataReader，我找到了以下代码：[LINQ Entity Data Reader](http://archive.msdn.microsoft.com/LinqEntityDataReader)。

此代码工作正常，但有一个问题：我的实体类型上的枚举属性未包含在数据读取器中（因此未正确插入）。如何识别枚举类型属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:02:32.473

我发现这是由于该`IsScalarType`方法没有考虑枚举。`IsScalarType`这可以通过如下修改方法轻松解决：

```
private static bool IsScalarType(Type t)
{
    // The || t.IsEnum part is new and makes sure that enums are recognized
    return scalarTypes.Contains(t) || t.IsEnum;
} 
```

在此修改后，枚举类型也将被识别。

# security - 在 WAN 中跟踪设备 IP 的好方法是什么？

> ID：13393509
> 
> 赞同：0
> 
> 时间：2012-11-15T08:02:52.760
> 
> 标签：security, ip, wan

我对如何继续解决这个问题有一个想法。但我只是不太确定这是否完全正确，我希望您能就此提出意见。

我正在建造一个需要远程通信的房子。

现在，2010年的时候已经发生了，房子被分配的IP是一个地址，但就在最近，它变成了另一个地址。我完全意识到这可能会再次发生。检索新 IP 地址是一项耗时的工作，因此我想要一种自动化的方式来始终跟踪房屋，即使 IP 不时更改。

目前，注册静态 IP 是不可能的。

所以这就是我想做的事情：

*   有一个 servlet（可能用 Ruby、Python 或 JavaScript 编写，用于 Node.js）向我们拥有自己的域名的服务器发出 HTTPS 请求
*   服务器也运行着一个 servlet，它监听请求
*   它收到的任何请求，它将跟踪请求的 IP 地址
*   当然，该请求将具有一个安全令牌，以确保该请求确实来自该房屋。

现在，我完全意识到可能存在安全漏洞。也许，我的解决方案也很糟糕，而且还有更好的方法，所以我需要你的人对此的意见。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:11:36.173

它会根据您希望将更改反映在哪里而略有不同，但在许多情况下，人们使用（免费供个人使用）服务，例如 DynDNS 或 No-IP，这些服务带有所谓的“更新客户端”，它们执行你描述的任务。

因此，例如，假设您使用 No-IP 注册；您将拥有一个诸如“myhouse.no-ip.com”之类的地址，该地址会自动与他们的更新客户端保持同步。

# c# - 根据 C# 中的约定创建文件夹结构的最佳方法是什么

> ID：13393510
> 
> 赞同：4
> 
> 时间：2012-11-15T08:02:54.310
> 
> 标签：c#

我的 C# 应用程序处理多个用户项目。这些项目是特定于应用程序的（我不是在谈论开发项目）。项目文件存储在特定的文件夹结构中。这样的结构可以是：

*   项目A
    *   进口
    *   出口
        *   产品
        *   文档
    *   顾客信息
    *   项目描述.xml

添加新项目时，我需要根据特定约定/架构自动创建默认文件夹结构（目录和文件）。

最好的方法是：

1.  定义这样的约定/模式

2.  创建结构

在 C# 中？有没有框架？我需要使用工厂方法手动构建它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:15:50.413

General suggestions about structuring .NET projects:

*   [How to setup a .NET Development Tree](http://mikebroberts.files.wordpress.com/2007/01/howtosetupadotnetdevelopmenttree.pdf) by Mike Roberts
*   [How do you organize your code?](http://www.hanselman.com/blog/howdoyouorganizeyourcode.aspx) by Scott Hanselman

Once you have a well-structured project template, then you can make copies of it, and use these copies to start user projects.

A better approach would be to put the template project under version control, and check it out on developer machines. Use a [DVCS](http://www.ericsink.com/vcbe/): developers could clone the template project to start user projects, and template modifications could be distributed by pulling changes from the template project repo to the user project repos.

A .NET development tree generator: [Tree Surgeon](http://treesurgeon.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:48:46.970

[我还建议阅读 Microsoft 的.NET Framework Guidelines and Best Practices](http://msdn.microsoft.com/en-us/library/ms184412.aspx)中的“类库设计”链接。文件夹结构不是在项目模板中设置的唯一内容。您可以自定义 AssemblyInfo.cs 文件、启用/设置 CodeAnalysis、添加 CodeAnalysis 自定义词典、启用/设置 CodeContracts、添加对常用程序集的引用等。

确定项目的主要结构后，您必须创建一个 VS 项目模板供您的团队使用。

查看MZ-Tools 站点中的[“关于 Visual Studio .NET 可扩展性的资源” 。](http://www.mztools.com/resources_vsnet_addins.aspx)在那里你会找到 VS SDK、文档和文章的下载部分的链接。

另请注意，VS SDK 允许您添加自定义向导以供您的模板使用。这是一个非常强大的功能，可以帮助您创建丰富的项目/项目模板。

# visual-studio-2010 - 尝试验证共享点站点或部署解决方案时出错

> ID：13393516
> 
> 赞同：0
> 
> 时间：2012-11-15T08:03:25.123
> 
> 标签：visual-studio-2010, sharepoint, sharepoint-2010

我将我的 Windows 7 机器设置为在其上运行 sharepoint 2010，经过一番努力后，我设法让它工作，但每次我创建一个新的 webpart 并验证它或尝试部署解决方案时，我都会得到以下信息错误：

```
*Cannot connect to the SharePoint site: http://[mysite]. Make Sure that the Site URL is valide, that the SharePoint site is running on the local computer, and that the current user has the necessary permission to access the site.

Additional information:

"An attempt was made to load a program with an incorrect format.
(Exception from HRESULT: 0x8007000B)"* 
```

我检查了一下，我的用户是站点管理员、农场管理员，并且该站点正在我的本地计算机上运行！我已经为此苦苦挣扎了 2 天，请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:26:31.037

据我所知，SharePoint 2010 环境始终是 64 位的。确保您尝试部署的解决方案*未*编译为 32 位。

请参阅：[sharepoint 64 位上的 32 位二进制文​​件，尝试加载格式不正确的程序](https://stackoverflow.com/questions/2132982/32bit-binaries-on-sharepoint-64bit-an-attempt-was-made-to-load-a-program-with-a)。

# iphone - 文件存在但无法打开？

> ID：13393519
> 
> 赞同：-2
> 
> 时间：2012-11-15T08:03:57.960
> 
> 标签：iphone, ios

保存我使用过的机制：

```
 NSMutableData *data = [[NSMutableData alloc] init];
    NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:self forKey:@"Save"];
    [archiver finishEncoding];
    [data writeToFile:filePath atomically:YES];
    [archiver release];
    [data release]; 
```

我用过

```
[[NSFileManager defaultManager] fileExistsAtPath:savePath];

[[NSFileManager defaultManager] contentsOfDirectoryAtPath:[SynchronizedData createPath] error:&error] 
```

检查我的文件是否存在。他们确认文件存在。

但是我无法使用相同的目录路径加载文件

```
 //NSData *encodedData = [[NSFileManager defaultManager] contentsAtPath:[SynchronizedData createPath]];

    NSData *encodedData = [[[NSData alloc] initWithContentsOfFile:tempFilePath] autorelease];

    if (encodedData == nil) {
        NSLog(@"Save cannot open while loading!");
        return nil;
    } 
```

上面的encodedData，都返回nil。（自动释放不是问题，我已经检查过了）

有什么想法有什么问题吗？

[我在上一个帖子](https://stackoverflow.com/questions/1354007/error-while-checking-if-a-file-exists/1354049#1354049)中发现了类似的情况，我再次尝试保留我的 tempFilePath，没关系，问题仍然存在。

* * *

我以比上述更简单的机制完成了保存。

从目录中获取 NSData 的问题仍未解决。也许是由于@paxdiablo 提到的读取权限。

因此我使用“Documents”文件夹而不是“Library”。NSData 打开没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:06:10.273

文件可以存在但仍不可读。您可能应该首先检查该文件的权限。

此外，使用该[`initWithContentsOfFile:options:error:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)变体来获取错误信息——这应该会告诉你是否有问题。

并且，根据您看到的评论：

> 可可错误 257

看来权限是问题所在。如果您查看[Foundation 常量](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)，您会看到：

> NSFileReadNoPermissionError = 257

意味着您无权读取该文件。

# javascript - 删除样式的所有属性

> ID：13393526
> 
> 赞同：0
> 
> 时间：2012-11-15T08:04:27.603
> 
> 标签：javascript, jquery, html, css

```
<div><a id="link" style="position:fixed !important;
    bottom:0px !important;
    right:0px !important;
    color:#000000 !important;font:10pt Arial !important">press me</a>
</div> 
```

为了将该 div 块更改为

```
<div><a id="link" style="position:fixed !important;
    bottom:0px !important;
    left:100px !important;
    color:#000 !important;font:10pt Arial !important">press me</a>
</div> 
```

（只有左边的属性不同），我试试这个

1.  删除样式的所有属性`($'#link').RemoveAttr('style');`
2.  我想添加样式的属性，但似乎没有这样的 AddAttr 存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T08:07:23.617

您可以使用 .attr('style', '') 删除，以及 .attr('style', '...'); 设置样式。

但最好将 css 样式设置为两个不同的类并使用 .addClass() 和 .removeClass() 代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:07:27.913

该`.css()`方法与上面的内联样式有关，而不是与`.attr()`方法有关，因此，如果`left`您只想更改属性，请尝试：

```
$('#link').css({ 'right' :  'auto', 'left' : '100px' }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:22:01.040

使用内联样式是一种**不好的做法**..您还需要避免使用**!important** ..

使用类而不是内联样式..

看起来更干净

**HTML**

```
<div>
    <a id="link" class="link right" >press me</a>
</div>​ 
```

**CSS**

```
.link
{
    position:fixed !important;
    bottom:0px !important;
    color:#000000 !important;
    font:10pt Arial !important;
}
.right
{
    right:0px !important;
}

.left
{
    left:100px !important;
} 
```

**Javascript**

然后你可以使用`.addClass()`and`.removeClass()`来完成这些事情..

```
$('#link').on('click', function() {
    $(this).removeClass('right').addClass('left');
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/3BTc2/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:06:50.793

你可以一个一个地这样做：

```
 $('#elementID').css('property','value'); 
```

或者您可以在您的 css 文件中编写一些样式属性，例如：

```
 .tobeadded{
   positon:relative;
   ...
    ...
  } 
```

然后您可以将此类添加到该元素：

```
 $('#elementID').addClass('tobeadded'); 
```

# entity-framework-4 - 如何将 ForeignKey 属性实现到接口

> ID：13393527
> 
> 赞同：0
> 
> 时间：2012-11-15T08:04:30.000
> 
> 标签：entity-framework-4, attributes

ForeignKeyAttribute 在接口上不起作用？

```
public class Client: CompanyForeignKeyMapper
{
     public int Client;
}

public class CompanyForeignKeyMapper
{
     [ForeignKeyAttribute("Company")]
     int ClientId;
} 
```

此代码工作正常。但是当我将 CompanyForeignKeyMapper 类更改为接口时

```
public interface ICompanyForeignKeyMapper

public class Client: ICompanyForeingKeyMapper --> changed to interface 
```

该属性似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T19:00:45.230

当您在第二个示例中声明 Client 类时，它不再继承自 CompanyForeignKeyMapper 类，因此它将没有 ClientId 字段。如果您希望它从 CompanyForeignKeyMapper 继承并实现 ICompanyForeingKeyMapper 接口，请像这样声明它：

```
public class Client: CompanyForeignKeyMapper, ICompanyForeingKeyMapper 
```

或者，您可以将 ClientId 定义为接口的字段，在这种情况下，客户端类必须实现它并可以向其中添加自己的 ForeignKeyAttribute：

```
public interface ICompanyForeignKeyMapper
{
    int ClientId;
}

public class Client: ICompanyForeignKeyMapper
{
    [ForeignKeyAttribute("Company")]
    int ClientId;
} 
```

# lucene - 从 Lucene 4.0 索引中获取最常用的词

> ID：13393531
> 
> 赞同：1
> 
> 时间：2012-11-15T08:05:28.090
> 
> 标签：lucene

我对 Lucene 很陌生。我有一个 Lucene 4.0 索引，我想计算第 n 个最常用的词来创建一个停用词列表。我发现在以前版本的 Lucene 中处理此问题的帖子，例如[从 Lucene 索引中获取最高频率术语，](https://stackoverflow.com/questions/2821903/get-highest-frequency-terms-from-lucene-index)但似乎 reader.terms() 在 4.0 中已被弃用。

我如何使用 Lucene 4.0 实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:09:50.867

您可能想查看由 Lucene 贡献者之一 Mike McCandless 撰写的[Lucene 4.0 文章中的新索引统计信息。](http://blog.mikemccandless.com/2012/03/new-index-statistics-in-lucene-40.html)您正在寻找的可能是`TermsEnum.totalTermFreq()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T17:04:58.070

这是使用`HighFreqTerms`lucene-misc 包的示例。

请注意，`HighFreqTerms.TotalTermFreqComparator`如果您想按术语频率排名，您可以使用：

```
DocFreqComparator cmp = new HighFreqTerms.DocFreqComparator();
TermStats[] highFreqTerms = HighFreqTerms.getHighFreqTerms(reader, n, "text", cmp);

List<String> terms = new ArrayList<>(highFreqTerms.length);
for (TermStats ts : highFreqTerms) {
    terms.add(ts.termtext.utf8ToString());
} 
```

# selenium - Zend_Test_PHPUnit 与 Selenium

> ID：13393535
> 
> 赞同：0
> 
> 时间：2012-11-15T08:06:09.290
> 
> 标签：selenium, phpunit, integration-testing, zend-test

我以前使用 Zend_Test_PHPUnit 进行集成测试，它很棒。我可以配置一个请求对象并触发它，然后针对结果运行断言，包括使用 CSS 选择器。

Selenium 与此相比如何？这两个选项之间有什么重叠？

我意识到 Selenium 会给我特定于浏览器的测试，但是还有其他优点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:02:16.060

一大优势是您也在测试 javascript，包括 ajax 调用。网页可能是相当复杂的一段代码，并且并不总是足以测试纯 html，您需要检查样式是如何应用的，页面是如何呈现的。

[在这种情况下，Selenium 测试我宁愿调用功能测试，或者如果您喜欢使用Selenium IDE](http://seleniumhq.org/projects/ide/)进行黑盒测试，测试可以由非开发人员记录，但知道应用程序应该如何工作。

缺点是测试可能需要更长的时间才能运行。

# iphone - UIActivityTypeMessage 未显示

> ID：13393538
> 
> 赞同：0
> 
> 时间：2012-11-15T08:06:13.870
> 
> 标签：iphone, xcode, ios6, message

我最近添加了一个 UIActivityTypeViewController，根据文档，它通过 Message 功能包括 SMS。但是，创建此消息时似乎没有出现消息，我可以获得所有其他默认值并排除我想要的。我是否必须创建自定义 UIActivity 才能包含消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T00:11:03.173

除非您在方法的参数中`UIActivityMessage`包含字符串，否则不会显示。不幸的是，您无法使用.`ActivityItems``UIActivityViewController` `initWithActivityItems:applicationActivities:``UIActivityMessage`

# javascript - JavaScript 本地化

> ID：13393540
> 
> 赞同：0
> 
> 时间：2012-11-15T08:06:15.757
> 
> 标签：javascript, html, localization

我想在我的应用程序中本地化字符串（使用目标 JavaScript 和 html5 构建）。我遇到了-外部.js文件的MVC JavaScript本地化，[http:](http://www.no-margin-for-errors.com/blog/2010/12/01/javascript-string-localization-done-right/) //www.no-margin-for-errors.com/blog/2010/12/01/javascript-string-localization-done-right/等但是最好的方法是什么？

我的是一个巨大的应用程序，经常更改字符串。所以我正在寻找一个稳定、易于适应的解决方案。

请建议！

谢谢斯内哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-02T09:28:03.657

我认为Mozilla 的[L20n](http://l20n.org/)非常棒！

# php - preg_match 在数字字符串中搜索 alpha 字符时返回 1

> ID：13393541
> 
> 赞同：0
> 
> 时间：2012-11-15T08:06:15.743
> 
> 标签：php, regex, preg-match

我有以下代码片段，但我不知道为什么这样的正则表达式匹配：

```
<?php

$string = "0123456789";

if(preg_match('/[a-zA-Z]*/', $string) === 1) {
    echo "match";

}

else {
    echo "not match";

}

?> 
```

当脚本运行时，它总是返回“match”。我希望它打印出“不匹配”，因为 $string 变量中没有字母字符。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:09:05.203

```
if(preg_match('/[a-zA-Z]/', $string) === 1) {
    echo "match";
}
else {
    echo "not match"; 
```

`*`表示 0 或更多，因此它匹配字符串开头的 0 个字母。你想匹配 1，所以去掉`*`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:09:17.440

它匹配，因为您使用`*`量词。如果您使用，它将不匹配：

```
/[a-zA-Z]+/ 
```

这是因为`/[a-zA-Z]*/`也将匹配 0 次出现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T08:10:51.767

尝试这个

```
/^[A-z]+$/ 
```

[Az] 将匹配所有字母（小写和大写）。

^ 和 $ 将确保只匹配这些字母。

# android - Android 延迟处理点击事件

> ID：13393546
> 
> 赞同：1
> 
> 时间：2012-11-15T08:06:35.327
> 
> 标签：android, button, onclick, delay, onclicklistener

我正在 Android 中编写一个相当简单的应用程序，大部分代码都在处理漂亮的动画以使其看起来不错。

我的问题是有时单击一个按钮，但只有在单击另一个按钮后才调用来自 onClick 侦听器的相关 onClick() 。

它表明Android正在“缓冲”事件并分组处理它们，而不是在它们生成时处理它们。

有没有人遇到过这个问题，或者可以提出解决方案？

我不确定它是否重要，但我通常使用匿名对象作为我的听众，这对我来说更有意义。

```
 score.setVisibility(VISIBLE);
    score.setClickable(true);
    score.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            soundEffect.soundForId(SoundEffect.DELETE_SOUND);
            player.setToRmove(true);

                            //Toggle trash button to replace the score button and
                            // identify for the user that this player is due to be deleted
            score.setVisibility(GONE);
            score.setClickable(false);
            trashButton.setVisibility(VISIBLE);
            trashButton.setClickable(true);
            trashButton.invalidate();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:56:36.157

我不知道这种事件的“分组”。当然，事件是从队列中处理的，正如 Simon 建议的那样，您可能在某些时候在 UI 线程上做的太多而您阻塞了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:10:44.770

我曾经在一个项目中遇到过同样的问题。我正在播放大约 2-3 秒长的射击声音，但如果有人经常点击它，它会将事件分组。我通过在每次按下拍摄按钮后将其禁用 2 秒来解决该问题。希望它可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:20:08.377

从逻辑上思考这个问题。以下哪种情况的可能性更大？

Android 有一些代码可以监控 UI 生成事件的速度。如果它发现您生成它们的速度足够快，它就会开始将它们批处理在一起。问题。快是什么意思？需要做哪些假设？我为什么要写这么疯狂的代码？

或者

由于您的匿名内部类的实例是在引发事件时创建的，并且这些实例在单个线程上执行，您的主 UI 线程，Android 将执行这些实例的消息放置到线程的消息队列中。问题？

如果您的主线程上运行的代码不是微不足道的并且通常与更新 UI 无关，那么请使用另一个线程（例如 AsyncTask）来执行代码。对于需要 2-3 秒的事情，你绝对应该这样做。

# c# - 从类中调用连接字符串

> ID：13393549
> 
> 赞同：1
> 
> 时间：2012-11-15T08:06:43.640
> 
> 标签：c#, visual-studio

所以我现在真的很生气。（仍然是菜鸟）我正在尝试使用我在“登录”表单上的“通用”类中创建的连接字符串，以便我可以调用“hhrcv_logon_validation”程序。

我的问题是如何？

我到处搜索，是的，我确实得到了例子，但我需要有人为我更好地解释它们吗？也许还有一些示例代码。

我知道我必须为连接字符串创建类并使用该连接字符串来调用 proc？我对吗？

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using CoreLab.Oracle;

namespace WMS
{
    class Common
    {
        static void connect()
        {
            // Connect
            string constr = "User ID=Password;" +
            "Password=Username;" +
            "Host="ServerName";" +
            "Pooling=true;" +
            "Min Pool Size=0;" +
            "Max Pool Size=100;" +
            "Connection Lifetime=0";
            OracleConnection con = new OracleConnection(constr);
            con.Open();
     }
} 
```

请帮忙！？

* * *

所以下面是我对你的示例代码所做的：

```
namespace WMS
{
class Common
{
    public static string ConnectionString
    {
        get
        {
            return ConnectionString;
        }
        set
        {
            ConnectionString = "User ID=username;" +
            "Password=password;" +
            "Host=hostname;" +
            "Pooling=true;" +
            "Min Pool Size=0;" +
            "Max Pool Size=100;" +
            "Connection Lifetime=0";
        }
    }

    public static OracleConnection OpenConnection()
    {
        OracleConnection con = new OracleConnection(ConnectionString);
        con.Open();
        return con;
    }
 }
} 
```

这行得通吗？

然后我将如何从表单中访问它？有了这个：

```
<using(var conn = Common.OpenConnection()) {
 // use it
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:13:45.460

`constr`并且`con`范围仅限于本示例中的**方法。**如果您希望它们在此之外可用，则需要在*field*中存储一些东西。例如，也许是这样的：

```
class Common
{
    private string connectionString;
    public static string ConnectionString {
        get { return connectionString; }
        set { connectionString = value; }
    }
    public static DbConnection OpenConnection()
    {
        OracleConnection con = new OracleConnection(ConnectionString);
        con.Open();
        return con;
    }
} 
```

因此，您将在应用程序早期的某个时间点配置连接字符串：

```
Common.ConnectionString = ... // TODO 
```

然后当您需要数据访问时：

```
using(var conn = Common.OpenConnection()) {
     // use it
} 
```

我还应该指出，`static`状态并不总是做事的最佳方式。它会起作用，但它会在以后给你更少的选择。

# c - 编译时出现Libev错误

> ID：13393550
> 
> 赞同：0
> 
> 时间：2012-11-15T08:06:47.010
> 
> 标签：c, syntax-error, static-libraries, libev

我正在尝试使用 gcc -g -Wall -Wextra -DNDEBUG -pedantic -ansi 标志编译代码并使用 libev 库。我在eclipse中收到以下错误：

```
Description Resource    Path    Location    Type
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘void’  Project     line 827, external location: /usr/include/ev.h  C/C++ Problem
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘void’  Project     line 820, external location: /usr/include/ev.h  C/C++ Problem
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘void’  Project     line 821, external location: /usr/include/ev.h  C/C++ Problem
make: *** [src/Object/MySockets/MySockets.o] Error 1    Project         C/C++ Problem
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘struct’    Project     line 551, external location: /usr/include/ev.h  C/C++ Problem
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘int’   Project     line 559, external location: /usr/include/ev.h  C/C++ Problem
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘unsigned’  Project     line 825, external location: /usr/include/ev.h  C/C++ Problem
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘unsigned’  Project     line 826, external location: /usr/include/ev.h  C/C++ Problem
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘void’  Project     line 822, external location: /usr/include/ev.h  C/C++ Problem
expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘void’  Project     line 823, external location: /usr/include/ev.h  C/C++ Problem 
```

我已经在 ubuntu 中安装了 libev-dev 包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:16:45.660

您的`-ansi`标志会导致编译器仅接受 C89 代码，并且只会在标准头文件（glibc/gcc）中启用 C89 功能。

libev 不是为由严格的 c89 编译器编译而设计的，它至少需要一个 posix（或者可能是 win32）系统——而且很可能它也使用了一些 c99 特性。

# objective-c - Sqlite3 内存管理

> ID：13393564
> 
> 赞同：3
> 
> 时间：2012-11-15T08:07:41.410
> 
> 标签：objective-c, sqlite, ios5

有时我在我的应用程序中遇到这种错误：

```
(3551,0xb0103000) malloc: *** error for object 0xd27ce60: Non-aligned pointer being freed (2)
*** set a breakpoint in malloc_error_break to debug
(3551,0xb0353000) malloc: *** error for object 0x65676170: Non-aligned pointer being freed (2)
*** set a breakpoint in malloc_error_break to debug
(3551,0xb0103000) malloc: *** error for object 0xd27cd40: Non-aligned pointer being freed (2)
*** set a breakpoint in malloc_error_break to debug
(3551,0xb0353000) malloc: *** error for object 0x40640000: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
(3551,0xb0103000) malloc: *** error for object 0xd27cc20: Non-aligned pointer being freed (2) 
```

当我尝试将新信息插入 sqlite 时会发生这种情况：

```
 if ( sqlite3_exec(databaseHandle, [insertStatement UTF8String], NULL, NULL, &error) == SQLITE_OK)//exception
    {
        return YES;
    }
    else{
    { 
```

databaseHandle 对象是静态的，我在应用程序启动时打开数据库：

```
sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK) 
```

也许我错过了什么？

```
NSString *insertStatement = [NSString stringWithFormat:@"INSERT INTO INFORMATION (INFO) VALUES (\"%@\")",info]; 
```

# c# - How do you get the index of a number in a linked list?

> ID：13393565
> 
> 赞同：5
> 
> 时间：2012-11-15T08:07:55.393
> 
> 标签：c#, c#-4.0, c#-3.0, c#-2.0

I have a linked list constructed as follows:

```
LinkedList<int> linked = new LinkedList<int>();
var array = new int[] { 23, 55, 64, 65 };
foreach (var item in array)
{
    linked.AddLast(item);
} 
```

How do I find the index of the number 64?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T08:21:03.973

The only way is to check element by element and increase a counter (by "only way", I am saying that other methods like LINQ need to do the same thing internally).

A hand-written extension method would look something like this:

```
public static class LinkedListExt
{
    public static int IndexOf<T>(this LinkedList<T> list, T item)
    {
        var count = 0;
        for (var node = list.First; node != null; node = node.Next, count++)
        {
            if (item.Equals(node.Value))
                return count;
        }
        return -1;
    }
} 
```

But it can easily be done using LINQ as [@L.B wrote](https://stackoverflow.com/a/13393641/69809) (yielding the same time complexity).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T12:42:11.293

Here is an alternate LINQ implementation that avoids creating anonymous objects and returns -1 if the item is not in the list:

```
int index = linked.Select((n, i) => n == 64 ? (int?)i : null).
            FirstOrDefault(n => n != null) ?? -1; 
```

It converts the sequence of numbers to a sequence containing the index of a match or `null` otherwise. It takes the first of these if there is one, otherwise converts the default `int?` to `-1`.

**Edit:**

Here is a better (simpler and more performant) alternative:

```
int i = linked.TakeWhile(n => n != 64).Count(); 
```

`i` will either be equal to the index, or equal to `linked.Count` if the value `64` was not found.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T08:13:55.850

```
int index = linked.Select((item, inx) => new { item, inx })
                  .First(x=> x.item == 64).inx; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T08:15:28.917

I think you should make your own function to parse the list and check. The "Find" function returns only the first occurrence and,for you, it is possible to have 2 or more occurrences of 64 in the list.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-22T17:24:24.163

You can make one up. :) I found this question trying to figure out how to qsort a linked list. And it hit me since I'm sorting structs anyway all I have to do is give each one a unique identifier. Which will probably be the sequence in which they're created. Just add an int field called seq or idx to each node. Change your ints to structs with the ints inside and attach another int field that's your improvised index. Traversing the list will be cumbersome. But you bind the original ints to indexes.

If you don't expect the data to move around you could build an array of pointers to elements of your linked list. Start at the beginning, use the pointer to next, keep doing that and count how many hops. Then allocate your array, start at the beginning of the list again and record in your array the addresses of the next pointers. But someone or something (another thread?) could screw it up by moving or adding or removing an element. The list would continue to work but the array would need to be scrapped and redone. Could be relatively fast, but how to detect the change reliably?

Circular? Just use modulo so to move forward idx = (idx + 1) % N where N is the total count of fields. For normal C anyway, I don't know what C#'s limitations are.

# lisp - 方案如果配对以空格字符结尾，结果将在两个元素之间有一个点

> ID：13393566
> 
> 赞同：0
> 
> 时间：2012-11-15T08:07:57.437
> 
> 标签：lisp, scheme, sicp

如果对以空格字符结尾，为什么结果值包含一个点（。）？这个点（。）是什么意思？

```
(cons 1 2 )
;Value 2: (1 . 2)

(car (cons 1 2 ))
;Value: 1

(cdr (cons 1 2 ))
;Value: 2 
```

这似乎很愚蠢，因为 pair 只包含两个元素。

我只想知道为什么第一个表达式会在结果中回显一个点！

```
(cadr (cons 1 2 ))
;The object 2, passed as an argument to safe-car, is not a pair.
;To continue, call RESTART with an option number:
; (RESTART 1) => Return to read-eval-print level 1. 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T08:14:05.880

CONS 构造一对。一对二的东西。它写为`(firstthing . secondthing)`。

如果第二件事是一个空列表，则写为`(firstthing)`。它与 相同`(firstthing . ())`。

由于`cons`构造了一个 cons，结果`(cons 1 2)`是`(1 . 2)`。

`(cadr (cons 1 2))`是一个错误。它是`(car (cdr (cons 1 2))`。`(cdr (cons 1 2)`是`2`。现在`(car 2)`错了。你不能坐的*车*。是一个数字，而不是一个缺点。`2``2`

如果要创建一个由 cons 单元格或空列表组成的列表，请使用函数`list`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:12:29.007

点不是结果的“元素”，它是 Scheme 存储列表的方式，即作为连接对。

例如，列表

```
(1 2 3) 
```

以这种形式记忆：

```
(1 . (2 . (3 . ()))) 
```

# vim - 仅查看少于/长于 ... 字符的行

> ID：13393567
> 
> 赞同：1
> 
> 时间：2012-11-15T08:08:06.500
> 
> 标签：vim, command, character, lines

我正在使用 Sed 脚本仅查看少于或长于 .. 字符的行。
该脚本不能同时使用两者（当我想查看少于 pe 80 个字符和超过 70 个字符的行时）。

有谁知道 Vim 中是否有一个简单的解决方案来只查看这些行并清空（而不是删除）所有其他行

pe
a) 仅查看少于 75 个字符的
行 b) 仅查看长于 80 个字符的行
b) 仅查看少于 75 个字符且长于 65 个字符的行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:14:32.960

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:28:28.793

与 ZyX 的答案类似，这会折叠不包含 65~75 个字符的行。

```
:set foldmethod=expr foldexpr=getline(v:lnum)!~'\\v^.{65,75}$' foldlevel=0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:12:34.027

[http://www.catonmat.net/blog/sed-one-liners-explained-part-two/](http://www.catonmat.net/blog/sed-one-liners-explained-part-two/)有命令行版本（61 和 62 ...）

# javascript - Jquery-ui datepicker 仅在文本框第二次聚焦后出现

> ID：13393569
> 
> 赞同：1
> 
> 时间：2012-11-15T08:08:18.443
> 
> 标签：javascript, ruby-on-rails-3, jquery-ui, coffeescript, jquery-ui-datepicker

出于某种原因，当我加载部分并单击文本框以调出日期选择器时，我必须单击文本框，然后在日期选择器出现之前单击文本框。任何人都可以看到任何错误或如何修复它，以便在第一次单击文本框时出现日期选择器？我正在使用 ruby​​ 1.9.3 和 rails 3.2.8

users.js.coffeescript

```
$("form[data-update-target]").live "ajax:success", (evt, data) ->
  target = $(this).data("update-target")
  $("#" + target).html data

$("#update-container").on 'click', '#event_start_at_date', (evt) ->
  $("#event_start_at_date").datepicker({ dateFormat: "yy-mm-dd" })

$("#update-container").on 'click', '#event_end_at_date', (evt) ->
  $("#event_end_at_date").datepicker({ dateFormat: "yy-mm-dd" }) 
```

_event partial 文本框所在

```
<%= form_for(@event) do |f| %>
  <div class="field">
  <%= f.label 'start date' %>*
  <%= f.text_field :start_at_date, :class => 'start_at_date', :size => 10, :maxlength => 10 %> 
  <%= f.text_field :start_at_time, :size => 5, :maxlength => 5 %>
</div>
<div class="field">
  <%= f.label 'end_date' %>*
  <%= f.text_field :end_at_date, :class => 'end_at_date', :size => 10, :maxlength => 10 %> 
  <%= f.text_field :end_at_time, :size => 5, :maxlength => 5 %>
</div>
<% end %> 
```

用户新页面 new.html.erb

```
<%= form_tag({:controller => 'users', :action => 'preview'}, :remote => true, :'data-update-target' => 'update-container') do %>
  <%= radio_button_tag(:page_type, 'event', false, :class => 'submit') %>
  <%= label_tag(:page_type, "Event") %>
  <br/>
<% end %>
<div id="update-container">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:23:27.540

打电话

```
$("#event_start_at_date").datepicker({ dateFormat: "yy-mm-dd" }) 
```

不打开日期选择器，它只是将日期选择器绑定到该元素，这意味着它将对点击做出反应并打开日期选择器。

您应该在加载 DOM 时将日期选择器绑定到元素，而不是在单击处理程序中。

# performance - 如果 Flash 的 System.totalMemory 是水平的，那是否确实证明没有内存泄漏？

> ID：13393571
> 
> 赞同：1
> 
> 时间：2012-11-15T08:08:23.717
> 
> 标签：performance, actionscript-3, flash, apache-flex, animation

**我的基本问题：** System.totalMemory 可以不报告内存泄漏吗？

* * *

**更新**：虽然我的性能问题的根源从未得到完全验证，但它可能与 GPU/CPU 问题有关（正如@divillysausages 假设的那样），我无法在目标系统上轻松测量。在提出这个问题的当天，一个奇怪而经典的怪异错误似乎已经解决了。出于本问答的目的，我认为可以肯定地说 System.totalMemory 被准确报告。

* * *

**背景：**我正在开发 3 个全屏 Adob​​e Air 3 应用程序。这三个应用程序和三个 VLC 播放器在多屏 Windows 7 机器上不断运行。每个 AIR 应用程序都在六个 1080p 屏幕之一上全屏显示。AIR 应用程序使用 Robotlegs 1.5.2（带有 Lazy Mediation）、AS3 Signals（带有 Relaxed Signals）和我自己的实现共享方面的样板外壳：记录器、加载器、基本 UI、调度服务、配置解析器。我一直在有条不紊地对外壳进行压力测试，它看起来不错。所有三个应用程序都定期加载数据（大约 5 分钟）并更新它们的视图和自动压力测试显示加载器和解析器即使在受到更新的影响时也是内存安全的。初始化后创建的对象很少，

**问题：**在目标系统上运行几个小时后，动画重模块的渲染速率会受到影响。

这个问题显然是分层的，但我有点恼火，因为我一直在使用 Flash Builder Profilier 和 Mr Doobs Stats 工具进行分析，内存使用情况在分析期间似乎稳定得很好（即使 FB Profilier 对字符串做了一些奇怪的事情：[请参阅我关于 FB Profiler 中字符串的其他问题](https://stackoverflow.com/questions/13392384/why-does-flash-builder-4-6-profiler-seem-to-leak-strings-whereas-debug-mode-gc)）。动画繁重的应用程序启动时，它很快就达到了内存使用水平，并且动画性能仍然不错，然后我在几个小时后检查，动画断断续续，不规则，应用程序 UI 缓慢且无响应。其他两个应用程序（以低帧速率运行，没有动画）看起来相当不错，分别消耗相同和更多的内存。重新启动动画应用程序可解决此问题。

**更多上下文：**

*   动画繁重的应用程序将 stage.frameRate 调节在 15 到 40 之间，这取决于它是否正在制作动画 - 最初我认为恒定的帧速率会有所帮助，但后来我遇到了确保所有数据解析都发生在动画之前的麻烦开始防止动画想要在某种数据处理洪流中开始的竞争条件......我正在考虑使用恒定帧，但它似乎是一个远景

*   使用 Greensock 的 TweenMax 制作动画，最初发现我堵塞了内存泄漏（我自己的错误实现的一个案例）——目前 TimelineMax 和 TweenLite 实例是我不断创建和销毁的一件事，它们似乎 GC 就好了

*   很少创建新对象（基本上是没有事件侦听器且其值经常被覆盖的值对象）——没有循环创建/销毁显示对象

*   尽可能使用信号和回调而不是事件

*   通过尽可能多地共享和重用 Timer 对象并更多地使用它们来计时秒数，从而最大限度地减少 Timer 实例 (5-6)

*   使用 renderMode "auto" [Adob​​e AIR：主窗口属性](http://help.adobe.com/en_US/air/build/WS2d929364fa0b81374fa5df4f129dca62884-8000.html#WS2d929364fa0b81374fa5df4f129dca62884-7ffc)— 不确定我是否应该更改它以部署到 Windows 7 机器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:07:54.863

断断续续的动画听起来像是帧率，或者 cpu/gpu 被阻塞，所以你的渲染会受到影响——即使你的内存很好，也会发生这种情况。

尝试通过单片眼镜运行您的应用程序，您将能够看到图形性能以及后台发生的情况：[https ://prerelease.adobe.com/callout/?callid=59A4F95D908A4D2FB9F302729FD0D87F](https://prerelease.adobe.com/callout/?callid=59A4F95D908A4D2FB9F302729FD0D87F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:03:05.323

我在工作中构建了一个类似的应用程序。它作为本机可执行文件 24/7 运行，并加载 Twitter 数据和图像。我没有使用框架，但我认为这并不重要。

实际上，我发现与您相反，我的应用程序可以在 Windows 上完美运行，并开始在 OSX 上卡顿。

您是否在您的显示机器上运行测试，而不仅仅是您的开发计算机？我做了一个简单的 RAM 计算器，只有在点击电影时才可见。过去，当我在生产环境中进行调试时，这对我有帮助。

# c# - 插入触发器 SQL 之前

> ID：13393573
> 
> 赞同：3
> 
> 时间：2012-11-15T08:08:31.937
> 
> 标签：c#, asp.net, sql, triggers, insert

我有两个相同的表，`I_Subject`并且`I_Temp_Subject`我想将表复制到`Temp_Subject`表`Subject`中。`I_Temp_Subject`由简单用户`I_Subject`使用并由管理员使用。管理员可以直接将新记录插入`I_Subject`并验证`I_Temp_Subject`.

两个表 ID 都设置为自动递增。复制SQL命令如下：

```
INSERT INTO I_SUBJECT(ID,CATEGORY_ID,USER_NAME,SERIAL_NUMBER,ICON)
SELECT ID,CATEGORY_ID,USER_NAME,SERIAL_NUMBER,ICON FROM I_TEMP_SUBJECT 
```

如果我这样做，则会发生以下错误：

```
System.Data.SqlClient.SqlException: Cannot insert explicit value for identity
column in table 'I_SUBJECT' when IDENTITY_INSERT is set to OFF. 
```

如果我在上面的语句中没有包含 ID，那么一切都可以，除了 ID 不相同。

所以我想包含一个插入前触发器来检查插入是否具有空 ID，然后自动递增（当管理员直接插入时），否则如果插入的 ID ！= null 然后从`I_Temp_Subject`（当管理员验证时）复制 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:12:12.043

由于备份表是直接副本，因此我会关闭该表的自动增量，以便两者始终保持同步。如果那不是选项，请打开身份插入，尽管我认为这是不必要的。

```
SET IDENTITY_INSERT dbo.<tablename> ON
<your insert statements>
SET IDENTITY_INSERT dbo.<tablename> OFF 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:46:37.203

您可以使用以下语句关闭自动增量

```
SET IDENTITY_INSERT dbo.<tablename>  ON
 write your insert statement here 
```

然后将身份插入关闭为 SET IDENTITY_INSERT dbo。离开

IE

```
 SET IDENTITY_INSERT dbo.I_SUBJECT  ON
    INSERT INTO I_SUBJECT(ID,CATEGORY_ID,USER_NAME,SERIAL_NUMBER,ICON)
    SELECT ID,CATEGORY_ID,USER_NAME,SERIAL_NUMBER,ICON FROM I_TEMP_SUBJECT
    SET IDENTITY_INSERT dbo.I_SUBJECT OFF 
```

# ios - 模态视图控制器在旋转时占据整页

> ID：13393575
> 
> 赞同：1
> 
> 时间：2012-11-15T08:08:38.670
> 
> 标签：ios, view, controller, modal-dialog

我的应用程序需要一个接一个地打开两个模态视图控制器（我有登录视图，如果输入错误，错误消息会显示在第二个模态视图控制器中。它按预期工作，但我在旋转设备时遇到问题，由于某种未知的原因，第一个模态视图控制器占据了整个页面，并且大部分屏幕变成了白色。

我用来打开模态 UIViewController 的代码如下

```
 LogonController * logonControler =[[self storyboard] instantiateViewControllerWithIdentifier:@"LogonController"];

        logonControler.modalPresentationStyle = UIModalPresentationFormSheet;
        logonControler.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

        [self  presentModalViewController:self.logonController animated:YES];

        logonControler.view.superview.backgroundColor=[UIColor clearColor];
        logonControler.view.superview.frame = CGRectMake(0, 0, 400, 200);

        CGPoint center = [DesktopSplitViewController sharedInstance].view.center;

        if (![UIApplication isPortrait]) {
            center=CGPointMake(center.y, center.x);
        }
        center.y=center.y-100;

        logonControler.view.superview.center = center; 
```

第二个模态视图控制器以相同的方式从 logonControler 打开，只是使用不同的 UIViewController 实现。

我被困在这两天以上，任何想法都会受到赞赏。

[我在这里](https://stackoverflow.com/questions/12599621/ios-6-incorrect-modal-view-size-after-rotation)发现了完全相同的问题，但没有任何重播。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:28:55.690

对于第二个视图控制器，将模态表示样式设置为 UIModalPresentationCurrentContext

# javascript - 更改表单提交验证上的 asp 控件的背景颜色失败

> ID：13393576
> 
> 赞同：1
> 
> 时间：2012-11-15T08:08:41.250
> 
> 标签：javascript, asp.net, css, validation

在网页上，我有 3 个下拉控件和几个带有必填字段验证器的文本框。

我想突出显示未指定值的控件。可以设置边框颜色或背景颜色。

我怎样才能做到这一点？我只希望它在页面提交上。

请帮忙！

具有两行的代码示例，其中包含两个控件和一个提交按钮

```
 <tr>
                            <td bgcolor="#ffffff" width="500px">
                                &nbsp;
                                <asp:Label ID="lblcategory" runat="server" Text="Category of Incident" Width="250px"></asp:Label>
                                <asp:DropDownList ID="ddlincident" runat="server" Width="200px" ValidationGroup="validatePortal"
                                    CssClass="select">
                                </asp:DropDownList>
                            </td>
                            <td style="vertical-align: top; width: 10px">
                                <asp:Label ID="Label8" Text="*" ForeColor="Red" runat="server"></asp:Label>
                                <asp:RequiredFieldValidator ID="rfvddlincident" runat="server" ControlToValidate="ddlincident"
                                    ValidationGroup="validatePortal" Display="None" ForeColor="Red" InitialValue="0"
                                    SetFocusOnError="true"></asp:RequiredFieldValidator>
                            </td>
                            <td style="vertical-align: top">
                                <asp:Label ID="Label2" runat="server" CssClass="instructiontext"></asp:Label>
                            </td>
                        </tr>
                        <tr>
                            <td bgcolor="#ffffff" width="500px">
                                &nbsp;
                                <asp:Label ID="lblplace" runat="server" Text="Where Did the Incident Take Place"
                                    Width="250px"> </asp:Label>
                                <asp:TextBox ID="txtplace" MaxLength="50" runat="server" Width="200px" CssClass="textbox"></asp:TextBox>
                            </td>
                            <td style="vertical-align: top; width: 10px">
                                <asp:Label ID="Label9" Text="*" ForeColor="Red" runat="server" Style="vertical-align: top"></asp:Label>
                                <asp:RequiredFieldValidator ID="txttxtplace" runat="server" ControlToValidate="txtplace"
                                    ValidationGroup="validatePortal" Display="None" ForeColor="Red" SetFocusOnError="true"></asp:RequiredFieldValidator>
                            </td>
                            <td style="vertical-align: top">
                                <asp:Label ID="Label3" runat="server" CssClass="instructiontext"></asp:Label>
                            </td>
                        </tr>

                    <asp:Button ID="Button2" runat="server" Text="Next" ValidationGroup="validatePortal"
                        OnClick="next_clicked" CssClass="hoverbuttonblue" UseSubmitBehavior="false" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:16:57.723

方法是重写`WebFOrm_OnSubmit`在 ASP.NET 验证工作时调用的函数。

做这个

第 1 步：将其添加到样式表中的某个位置（为有错误的文本框创建新样式规则）

```
.errorMessage{border: 1px solid #f00; background-color: #0ff;} 
```

第 2 步：将以下脚本放在表单标记之后。（覆盖在这里）

```
function WebForm_OnSubmit() {
    var retValue = true;
    if (ValidatorOnSubmit && !ValidatorOnSubmit()) {
        for (var i = 0; i < Page_Validators.length; i++) {
            var validator = Page_Validators[i];
            document.getElementById(validator.controltovalidate).className = validator.isvalid ? "" : "errorMessage";
            if (!validator.isvalid)
                retValue = false;
        }
    }
    return retValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:35:51.707

使用RequiredFieldValidator，您不能添加您的自定义代码。您将不得不使用自定义验证。这是一个关于如何使用自定义验证的好链接。
[未调用下拉列表的自定义验证器（显然）](https://stackoverflow.com/questions/6535443/customvalidator-for-dropdownlist-not-being-invoked-apparently)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:40:40.900

有两种方法可以做到这一点：

1种方式：

要实现此功能，您需要编写自定义 java 脚本函数来验证控制。如果验证为假，则更改控件的背景颜色，否则请保持原样。

2方式：使用自定义验证器进行验证，如果验证为假，则更改控件背景颜色。但这是客户端验证的服务器端验证，您必须使用 java 脚本函数进行验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T09:00:02.373

[asp net 客户端验证的验证事件](https://stackoverflow.com/questions/7382849/validation-event-for-asp-net-client-side-validation)

看看上面的链接。这就是您可以在客户端捕获验证的方式。那就是jQuery。但是你可以用普通的 JS 做同样的事情。处理程序将如何实际分配给您的表单取决于您。我在上面链接的问题是用jQuery完成的。但是你可以使用纯 JS：[https ://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

```
var form = document.getElementById("our_form_id");
if (el.addEventListener) {
  form.addEventListener('submit', highlightFields, false); 
} else if (el.attachEvent)  {
  form.attachEvent('onsubmit', highlightFields);
}
function highlightFields() {
            if (typeof Page_Validators != 'undefined') {                
                for(var i = 0; i < Page_Validators.length; i++){
                    if (!Page_Validators[i].isvalid) {
                       document.getElementById(Page_Validators[i].controltovalidate).style.border = "solid 1px red";
                    }
                }

            }
        } 
```

我的一个项目中有类似的代码，它工作正常。这是客户端`Page_Validators` 上所有控件的列表，其中也包含它所属元素的 id。`<asp:....Validator``Page_Validators[i].controltovalidate`

# banner - 是否允许在 h1 上使用 role="banner"？

> ID：13393578
> 
> 赞同：2
> 
> 时间：2012-11-15T08:08:45.487
> 
> 标签：banner, wai-aria

以下标记从验证器中收到错误：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Bla Bla Bla</title>
</head>
<body>

    <h1 role="banner">Bla Bla Bla</h1>

    <section role="main">
        <h1>Bla Bla Bla</h1>
        <p>Bla Bla Bla</p>
    </section>

    <p role="contentinfo"><small>Bla Bla Bla</small></p>

</body>
</html> 
```

错误是：**错误：此时元素 h1 上不允许属性角色。**

这是否意味着`role="banner"`必须在`header`元素上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:12:04.953

ARIA 角色可以分配给*任何*HTML 元素。来自[WAI-ARIA 文档](http://www.w3.org/TR/html5/wai-aria.html#aria-role-attribute)：

> 3.2.7.1 ARIA 角色属性
> 
> 每个 HTML 元素都可以指定一个 ARIA 角色属性。

* * *

但是，对于可以将某些元素作为角色赋予的内容有各种限制，主要是为了防止隐式语义使您进入显式语义的混乱状态。

如果您查看与上面链接的 W3C HTML5 规范中的表格，您将在“隐式 ARIA 语义”下看到`h1`没有`hgroup`祖先的 a 必须具有`heading`or角色`tab`，如果设置的话。

这就是您收到验证错误的原因。

您还将从那些`head`具有强烈本机语义的表中看到`no role`，这意味着您也不能设置它 - 它必须设置为`presentation`。我不确定这是否是您的意思，因为您`header`的样本中没有元素。

如果您*确实*有一个`header`元素，那么是的，您可以将其角色设置为`banner`- 事实上，这就是您可以将其设置为的所有内容（如果您完全设置了它）。我在上面链接到的那些表格也涵盖了这一点。

您也可以*尝试*将`h1`内部 a放入`section`一个`banner`角色 - 这将是我第一次尝试解决此问题。

# android - 在运行时动态更改 Android Spinner 的文本大小

> ID：13393582
> 
> 赞同：2
> 
> 时间：2012-11-15T08:09:04.383
> 
> 标签：android, dynamic, runtime, spinner, android-spinner

我正在尝试在程序中动态设置微调器的文本大小。我正在使用下面的代码。文本大小发生变化，但由于某种原因，微调器始终在索引 0 处显示项目，即使数据库具有不同的值，并且我正在使用 setSelection 方法来更新基于数据库的选择。下面是我的代码。难道我做错了什么？

```
 mAutoBackup = (Spinner) findViewById(R.id.auto_backup);
    final CharSequence [] autoBackupValues = getResources().getStringArray(R.array.auto_backup_options); 
    // Create an ArrayAdapter using the string array and a default spinner layout
    ArrayAdapter<CharSequence> adapter = new ArrayAdapter<CharSequence>(this,
            R.layout.spinner_header, autoBackupValues){
        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = super.getView(position, convertView, parent);
            if (v instanceof TextView)
                ((TextView) v).setTextSize(TypedValue.COMPLEX_UNIT_PX, normalTextSize);
            return v;
        }
        @Override
        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {
            View v = super.getDropDownView(position, convertView, parent);
            if (v instanceof TextView)
                ((TextView) v).setTextSize(TypedValue.COMPLEX_UNIT_PX, normalTextSize);
            return v;
        }
    };
    // Specify the layout to use when the list of choices appears
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    mAutoBackup.setAdapter(adapter);

<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/spinner_header"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:gravity="left"
   android:textSize="22sp"
   android:textColor="@android:color/black" >
</TextView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:24:32.707

我发现了这个问题。由于代码流程中的错误，在微调器上设置值后，我再次调用上面显示的代码，该代码创建适配器并将其设置为微调器。修复了这个流程，世界是绿色的......

# java - 从类创建对象

> ID：13393585
> 
> 赞同：-1
> 
> 时间：2012-11-15T08:09:16.413
> 
> 标签：java

最终，我需要能够在我的代码中做到这一点：

```
User result = goo.getEntity("users", "id1").getAs(User.class); 
```

但是，在上面的代码中，我需要明确地将结果转换为`getEntity`to `User`，方法是什么，以便返回类型`getAs`将是任何 .class 放入方法中。

这是底层的伪代码：

```
public class EntityType {
    Map json = null;
    public EntityType(Map json){
        this.json = json;
    }
    public Class<?> getAs(Class<?> clazz){
        // create clazz object from json map 
    }
}

public EntityType getEntity(String kind, String id){
    Map json = getFromServer(kind, id);
    EntityType entity = new EntityType(json);
    return entity;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T08:11:54.597

它应该是

```
public <T> T getAs(Class<T> clazz) { 
```

注意：您将返回分配为`User result =`，返回类型应该是`T`而不是`Class<T>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:12:01.687

```
public class EntityType {
    Map json = null;
    public EntityType(Map json){
        this.json = json;
    }
    public <T extends EntityType> T getAs(Class<T> clazz){
        if(clazz.isInstance(this)) {
          return (T) this;
        }
        return null;
    }
} 
```

# css - 跨浏览器 CSS 缩放的完整样式

> ID：13393588
> 
> 赞同：22
> 
> 时间：2012-11-15T08:09:55.810
> 
> 标签：css, cross-browser, zooming

我发现很难获得完全跨浏览器 CSS 缩放属性..我只有这些

```
zoom: 2;
-moz-transform: scale(2); 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-15T08:10:42.593

这些对于跨浏览器来说就足够了...

[**演示**](http://jsfiddle.net/X4XYf/214/)

> 注意：正如[@martin](https://stackoverflow.com/questions/13393588/complete-styles-for-cross-browser-css-zoom/13393595#comment23603586_13393595)指出的那样，*这可能无法按预期工作*，并不意味着这会失败，Chrome 只是使其比其他浏览器大 2 倍，因为它也尊重`zoom`属性。所以它使它变大了2倍......

```
zoom: 2; /* IE */
-moz-transform: scale(2); /* Firefox */
-moz-transform-origin: 0 0;
-o-transform: scale(2); /* Opera */
-o-transform-origin: 0 0;
-webkit-transform: scale(2); /* Safari And Chrome */
-webkit-transform-origin: 0 0;
transform: scale(2); /* Standard Property */
transform-origin: 0 0;  /* Standard Property */ 
```

HTML

```
<div class="zoom">BlahBlah</div> 
```

CSS

```
.zoom {
    zoom: 2;
    -moz-transform: scale(2);
    -moz-transform-origin: 0 0;
    -o-transform: scale(2);
    -o-transform-origin: 0 0;
    -webkit-transform: scale(2);
    -webkit-transform-origin: 0 0;
    transform: scale(2); /* Standard Property */
    transform-origin: 0 0;  /* Standard Property */
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-10T13:22:45.373

这是一个仅 css 的解决方案

```
.csszoom{
        -ms-transform: scale(1.5); /* IE 9 */
        -ms-transform-origin: 0 0;
        -moz-transform: scale(1.5); /* Firefox */
        -moz-transform-origin: 0 0;
        -o-transform: scale(1.5); /* Opera */
        -o-transform-origin: 0 0;
        -webkit-transform: scale(1.5); /* Safari And Chrome */
        -webkit-transform-origin: 0 0;
        transform: scale(1.5); /* Standard Property */
        transform-origin: 0 0;  /* Standard Property */
}
.ie8 .csszoom{
        zoom:1.5;
} 
```

将 HTML 标记更改为

```
<!--[if lte IE 8]> <html class="ie8"> <![endif]--> 
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-02T11:38:08.080

如果脚本是可行的，那么您可以通过使用面向未来的特征检测来避免多个受支持的缩放属性的冲突和浏览器嗅探。
**注意：**为了方便起见，我在这里使用 jQuery，但没有它也可以编写。

## CSS：

```
.zoom {
    -moz-transform-origin: 0 0;
    -o-transform-origin: 0 0;
    -webkit-transform-origin: 0 0;
} 
```

## HTML：

```
<div class="mySelectorClass">Foobar</div> 
```

## 脚本（一次性初始化）

```
var strPropZoom = "zoom";
var blnPropZoomUseScale = false;

$(function() {
    var jqBody = $("body");

    // Determine the supported 'zoom' method
    switch (true) {
        case Boolean(jqBody.css("zoom"))              : break;
        case Boolean(jqBody.css("-moz-transform"))    : strPropNameZoom = "-moz-transform";    blnPropZoomUseScale = true; break;
        case Boolean(jqBody.css("-o-transform"))      : strPropNameZoom = "-o-transform";      blnPropZoomUseScale = true; break;
        case Boolean(jqBody.css("-webkit-transform")) : strPropNameZoom = "-webkit-transform"; blnPropZoomUseScale = true; break;
    }
}) 
```

然后，当需要缩放时，只需调用：

```
var intZoom = 2.5; // NB: This could be calculated depending on window dimensions
$(".mySelectorClass")
    .css(
        strPropZoom
        ,(blnPropZoomUseScale ? "scale(" + intZoom + ")" : intZoom)
    )
    .addClass("zoom"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T01:20:32.730

针对@martin 的上述评论（他是正确的），我使用javascript（包括一些jQuery）和@Mr. 外星人的CSS。毫无疑问，还有其他方法可以实现这一点 - 也许更简单，但是，以下 js 和 css 组合对我有用：

> > **css**

```
.zoom{
   -moz-transform: scale(2); /* Firefox */
   -moz-transform-origin: 0 0;
   -o-transform: scale(2); /* Opera */
   -o-transform-origin: 0 0;
   zoom:2 /*IE*/;
 }
//Notice the absence of any Webkit Transforms 
```

> > **javascript**

```
(function($){
    var version=false,
    isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0,
    isOpera=!!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0,
    isChrome=!!window.chrome && !isOpera;
    if(isChrome){
        version=(window.navigator.appVersion.match(/Chrome\/(\d+)\./)!==null) ?
        parseInt(window.navigator.appVersion.match(/Chrome\/(\d+)\./)[1], 10) :
        0;
        version=(version >= 10) ? true : false;
        // Don't know what version they switched it.  Figured that this was a good guess
    }
    // I added the extra ternary check in there because when testing in Chrome,
    // if I switched the user agent in the overrides section, it kept failing with 
    // null value for version.

    if(isSafari || version){
    $('.zoom').css('-webkit-transform','scale(2)');
    $('.zoom').css('-webkit-transform-origin','0 0');
        // If Scaling based upon different resolutions, a check could be included here
        // for window size, and the css could be adjusted accordingly.
    }
}(jQuery)) 
```

浏览器检测代码来自[这里](https://stackoverflow.com/questions/9847580/how-to-detect-safari-chrome-ie-firefox-and-opera-browser)，Chrome 版本检测片段来自[这篇文章](https://stackoverflow.com/questions/4900436/detect-version-of-chrome-installed)。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2015-04-08T20:31:06.657

好像今天的答案是

```
.zoom {
     zoom: 2; /* Chrome */
     transform: scale(2); /* FF, neglected by Chrome */
     transform-origin: 0;
} 
```

这是一个关键。;-)

# jquery - 翻转时古怪的 jQuery

> ID：13393589
> 
> 赞同：1
> 
> 时间：2012-11-15T08:10:07.003
> 
> 标签：jquery

[我的开发人员无法在此页面](http://www.branard.com)上创建平稳有效的过渡。请翻转徽标“Clockrun”，并注意文本在完全可见后如何变化（尤其是在 Chrome 中），以及在滚动和滚动徽标时翻转效果是多么古怪。

这是正在使用的 jQuery。有没有更好的方法可以让过渡更顺畅地淡入淡出？

```
jQuery(document).ready(function(){

        jQuery(".super_featured_desc").css("opacity",0);
        jQuery(".super_featured_logo").each(function(){
          jQuery(this).hover(
              function () {
                jQuery(this).children(".super_featured_desc").css("display","block");
                jQuery(this).children(".super_featured_desc").animate({"opacity": 1}, 400);
              },
              function () {
                jQuery(this).children(".super_featured_desc").css("display","none");
                jQuery(this).children(".super_featured_desc").animate({"opacity": 0}, 400);
              }
          )
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:14:34.910

请尝试使用停止：

`.stop(true, true)` 接口：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

或在这里查看`effects` [http://docs.jquery.com/Effects](http://docs.jquery.com/Effects)您可以添加显示`slow`效果。

如果您可以轻弹我的jsfiddle，我可以为您制作，希望这会有所帮助`:)`

**代码**

```
jQuery(document).ready(function(){

        jQuery(".super_featured_desc").css("opacity",0);
        jQuery(".super_featured_logo").each(function(){
          jQuery(this).hover(
              function () {
                jQuery(this).children(".super_featured_desc").css("display","block");
                jQuery(this).children(".super_featured_desc").stop(true, true) .animate({"opacity": 1}, 400);
              },
              function () {
                jQuery(this).children(".super_featured_desc").css("display","none");
                jQuery(this).children(".super_featured_desc").stop(true, true) .animate({"opacity": 0}, 400);
              }
          )
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:25:27.880

`mouseout`要在鼠标悬停动画上使用回调并在此处插入您的渐变，请实现渐变`jQuery(this).children(".super_featured_desc").css("display","none");`：

```
 jQuery(document).ready(function(){

            jQuery(".super_featured_desc").css("opacity",0);
            jQuery(".super_featured_logo").each(function(){
              jQuery(this).hover(
                  function () {
                    jQuery(this).children(".super_featured_desc").css("display","block");
                    jQuery(this).children(".super_featured_desc").stop(true, true) .animate({"opacity": 1}, 400);
                  },
                  function () {
                    jQuery(this).children(".super_featured_desc").stop(true, true) .animate({"opacity": 0}, 400, function(){
    jQuery(this).css("display","none");
    });
                  }
              )
            });
        }); 
```

# apache-pig - 通过与其他文件比较过滤猪中的tsv文件

> ID：13393593
> 
> 赞同：0
> 
> 时间：2012-11-15T08:10:29.787
> 
> 标签：apache-pig

我有一个巨大的文件，每行有两列，由制表符分隔。

我有另一个文件，其中包含一个值列表，每行一个。

现在我想过滤第一个文件，这样我就得到了第二个文件中存在第一列的所有行。

如何在猪中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:08:27.103

您可以使用内部联接：

```
A = LOAD 'file1' USING PigStorage('\t') AS (f1:int, f2:int);
B = LOAD 'file2' USING PigStorage(',') AS (f3:int);

C = JOIN A BY f1, B BY f3;
DUMP C; 
```

# c# - WPF：隐藏使用 GridviewColumn 定义的 Listview 项

> ID：13393600
> 
> 赞同：1
> 
> 时间：2012-11-15T08:10:55.963
> 
> 标签：c#, wpf, xaml

我正在创建一个应用程序来显示未运行的 Windows 服务列表。问题是这些服务应该反映发生的任何变化，即如果服务启动，则应该从显示的列表中删除该服务。

我使用了 ListView，代码如下：

```
<Window.Resources>
    <ObjectDataProvider ObjectType="{x:Type local:NotifiableServiceController}"
    MethodName="GetServices" x:Key="ManageServices">
    </ObjectDataProvider>
</Window.Resources>

<Grid>
    <ListView Name="lstViewServices" Width="Auto" ItemsSource="{Binding Source={StaticResource ManageServices}}"
                SelectionMode="Single">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="SoftOne Services" DisplayMemberBinding="{Binding Path=DisplayName}" />
                <GridViewColumn Header="Status">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=Status}">
                            </TextBlock>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
            </GridView>
        </ListView.View>
    </ListView>
</Grid> 
```

以及获取服务列表的功能：

```
public static ObservableCollection<NotifiableServiceController> GetServices()
        {
            ObservableCollection<NotifiableServiceController> oaServices = new ObservableCollection<NotifiableServiceController>();

            //Retrieving the services starting with "SQL"
            foreach (ServiceController sc in ServiceController.GetServices().Where(p => p.DisplayName.StartsWith("SQL")))
            {
                oaServices.Add(new NotifiableServiceController(sc));
            }

            return oaServices;
        } 
```

`NotifiableServiceController`正在按时间间隔更新以刷新关联 Windows 服务的状态。但只有第一次检索到的服务（来自`GetServices()`函数）会被刷新。

到目前为止一切都很好。**我只需要在 Listview 中显示停止的进程**，我认为这可以使用 XAML 中的样式或触发器来完成吗？如果是，如何？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:38:47.893

我认为您应该使用**ListCollectioView**，并使用**Filter**属性对其进行过滤。首先，您必须加载所有服务，然后您可以使用**Timer.Elapsed**事件每 N 秒更新一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:04:07.033

解决方案是向 ListView 添加样式并以 ListViewItem 为目标，如下所示：

```
<ListView.Resources>
    <Style TargetType="ListViewItem">
        <Style.Triggers>
            <DataTrigger Binding="{Binding Status}" Value="Running">
                <Setter Property="ListBoxItem.Visibility" Value="Hidden" />
                <Setter Property="Height" Value="0" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</ListView.Resources> 
```

根据服务`Status`，我可以设置 ListViewItem 的可见性和高度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:37:34.993

只需从`ObservableCollection<NotifiableServiceController>`您绑定的对象中删除正在运行的服务，`ListView`并在服务停止时将其添加回来。如果您想保留**所有**服务的集合，请为此创建一个额外的集合。

# c# - C#正则表达式替换问号

> ID：13393602
> 
> 赞同：2
> 
> 时间：2012-11-15T08:11:01.953
> 
> 标签：c#, regex

如果后跟数字，我想`?`用文本替换问号字符。`Rs``?`

这是我尝试过的。但不工作。

```
 string str = "DFg sdfsdaf ?145 dfgsdf ?fg";
 str = str.Replace(@"\\?", "Rs");
 Console.WriteLine(str); 
```

**期望的输出：**

```
DFg sdfsdaf Rs145 dfgsdf ?fg 
```

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:23:18.413

也试试这样：

```
System.Text.RegularExpressions.Regex.Replace(str,@"\?(?=\d+)","Rs"); 
```

我会推荐[这个](http://www.regular-expressions.info/lookaround.html)阅读。上面的模式查找`?`并检查它是否跟随`digit`一个或多个时间，然后替换`?`为`Rs`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T08:18:51.163

试试这个：

```
Regex.Replace(str, @"\?(\d)", @"Rs$1") 
```

它将匹配一个文字问号后跟一个数字，并将其替换为`Rs`后跟该数字。后跟非数字的问号保持不变。

例子：

```
var str = "DFg sdfsdaf ?145 dfgsdf ?fg";
Console.Out.WriteLine(Regex.Replace(str, @"\?(\d)", @"Rs$1")); 
```

输出：

```
DFg sdfsdaf Rs145 dfgsdf ?fg 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:14:59.697

试试这个正则表达式

```
\\?((?:\d+)) 
```

使用正则表达式来处理这个： -

```
 Regex oRegex = new Regex(@"\?((?:\d+))");
  str = oRegex.Replace(str, "Rs$1"); 
```

# arrays - 如何在vb.net的CheckedListBox中将选中的项目存储在数组中

> ID：13393603
> 
> 赞同：1
> 
> 时间：2012-11-15T08:11:01.313
> 
> 标签：arrays, vb.net, checkedlistbox

我将所有选中的项目存储在一个字符串中，这对我来说非常有效，但我想将所有选中的项目及其名称存储在一个数组中。

```
 Dim i As Integer

 Dim ListItems As String

        ListItems = "Checked Items:" & ControlChars.CrLf

        For i = 0 To (ChkListForPrint.Items.Count - 1)
            If ChkListForPrint.GetItemChecked(i) = True Then
                ListItems = ListItems & "Item " & (i + 1).ToString & " = " & ChkListForPrint.Items(i)("Name").ToString & ControlChars.CrLf
            End If
        Next 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:53:28.370

如果你需要`CheckedItems`那么你为什么要使用`Items`呢？我建议使用`CheckedItems`.

我已经对您的代码进行了一些修改，这样的内容会对您有所帮助：

```
Dim collection As New List(Of String)()        ' collection to store check items
Dim ListItems As String = "Checked Items: "    ' A prefix for any item

For i As Integer = 0 To (ChkListForPrint.CheckedItems.Count - 1)  ' iterate on checked items
    collection.Add(ListItems & "Item " & (ChkListForPrint.Items.IndexOf(ChkListForPrint.CheckedItems(i)) + 1).ToString & " = " & ChkListForPrint.GetItemText(ChkListForPrint.CheckedItems(i)).ToString)  ' Add to collection
Next 
```

这里：

1.  `ChkListForPrint.Items.IndexOf(ChkListForPrint.CheckedItems(i))` 将获得检查项目的索引。

2.  `ChkListForPrint.GetItemText(ChkListForPrint.CheckedItems(i))`将显示项目的文本。

所以会生成如下输出：（假设列表中有 4 个项目，其中 2 和 3 项目被选中）

```
Checked Items: Item 2 = Apple
Checked Items: Item 3 = Banana 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:19:22.293

这应该这样做。

```
Dim ListItems as New List(Of String)
For i = 0 To (ChkListForPrint.Items.Count - 1)
    If ChkListForPrint.GetItemChecked(i) = True Then
       ListItems.Add(ChkListForPrint.Items(i)("Name").ToString)
    End If
Next 
```

# codeigniter - PostgreSQL 序列的下一个值？

> ID：13393604
> 
> 赞同：35
> 
> 时间：2012-11-15T08:11:09.603
> 
> 标签：codeigniter, postgresql, sequence, postgresql-9.1, nextval

我正在为我的 Codeigniter 网站使用 PostgreSQL。我正在使用杂货店杂货进行添加、编辑和删除操作。在进行编辑或添加时，我想根据内容的 id 动态重命名上传的文件。我可以使用杂货杂货的`callback_after_upload`功能来做到这一点。

在添加新内容时，我想要内容的下一个 id。我尝试使用`nextval()`函数，但序列随之增加。如何在不使用`nextval()`函数的情况下获取序列的最后一个值？

还是有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-15T08:59:58.750

### `RETURNING`

这可以通过*单次往返*数据库来实现：

```
INSERT INTO tbl(filename)
VALUES ('my_filename')
RETURNING tbl_id; 
```

`tbl_id`通常是[**`serial`**or **`IDENTITY`**(Postgres 10 or later) column](https://stackoverflow.com/a/9875517/939860)。[更多在手册中](https://www.postgresql.org/docs/current/sql-insert.html)。

### 显式获取值

如果`filename`需要包含`tbl_id`（冗余），您仍然可以使用单个查询。

使用[**`lastval()`**](https://www.postgresql.org/docs/current/functions-sequence.html)或更具体的[**`currval()`**](https://www.postgresql.org/docs/current/functions-sequence.html)：

```
INSERT INTO tbl (filename)
VALUES ('my_filename' || currval('tbl_tbl_id_seq')   -- or lastval()
RETURNING tbl_id; 
```

看：

*   [同一 INSERT 期间另一列中序列列的参考值](https://stackoverflow.com/questions/12433075/reference-value-of-serial-column-in-another-column-during-same-insert/12433446#12433446)

如果在此过程中可能会推进多个序列（甚至通过触发器或其他副作用），那么*肯定*的方法是使用`currval('tbl_tbl_id_seq')`.

### 序列名称

我的示例中的*字符串文字* `'tbl_tbl_id_seq'`应该是序列的*实际*名称并被强制转换为`regclass`，如果在当前[`search_path`](https://stackoverflow.com/a/9067777/939860).

`tbl_tbl_id_seq``tbl`是为具有序列列的表自动生成的默认值`tbl_id`。但没有任何保证。如果这样定义，列默认值可以从*任何*序列中获取值。如果在创建表时使用默认名称，Postgres 会根据一个简单的算法选择下一个空闲名称。

如果您不***知道***列的序列名称`serial`，请使用专用函数[**`pg_get_serial_sequence()`**](https://www.postgresql.org/docs/current/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE)。可以即时完成：

```
INSERT INTO tbl (filename)
VALUES ('my_filename' || currval(pg_get_serial_sequence('tbl', 'tbl_id'))
RETURNING tbl_id; 
```

*db<>fiddle [here](https://dbfiddle.uk/?rdbms=postgres_12&fiddle=c853c6e9ee1124aae357ce9e503191e5)*
[旧[sqlfiddle](http://www.sqlfiddle.com/#!15/7a179/3)]

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-11-15T08:15:58.277

使用该`currval()`函数访问先前获得的序列值。

但这只会在之前`nextval()`调用**过**的情况下返回一个值。

绝对没有办法“偷看”序列的下一个值而不实际获得它。

但你的问题不清楚。如果`nextval()`在插入之前调用，则可以在插入中使用该值。或者更好的是，`currval()`在您的插入语句中使用：

```
select nextval('my_sequence') ...

... do some stuff with the obtained value

insert into my_table(id, filename)
values (currval('my_sequence'), 'some_valid_filename'); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-11-04T16:06:40.580

我偶然发现了这个问题 b/c 我试图按表查找下一个序列值。这没有回答我的问题，但这就是它的完成方式，它可以帮助那些不是按名称而是按表查找序列值的人：

```
SELECT nextval(pg_get_serial_sequence('<your_table>', 'id')) AS new_id; 
```

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-19T19:17:48.580

如果您不在会话中，您只需 nextval('you_sequence_name') 就可以了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-06T15:15:49.383

要从字面上回答您的问题，以下是如何在不增加序列的情况下获取下一个值：

```
SELECT
 CASE WHEN is_called THEN
   last_value + 1
 ELSE
   last_value
 END
FROM sequence_name 
```

显然，在实践中使用此代码并不是一个好主意。**不能保证下一行真的有这个 ID。**但是，出于调试目的，在不增加序列的情况下知道序列的值可能会很有趣，这就是您可以做到的方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T08:18:56.570

即使可以以某种方式做到这一点，这也是一个糟糕的主意，因为有可能获得一个序列，然后被另一个记录使用！

一个更好的主意是保存记录，然后检索序列。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-14T14:24:56.633

我试过了，效果很好

```
@Entity
public class Shipwreck {
  @Id
  @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "seq")
  @Basic(optional = false)
  @SequenceGenerator(name = "seq", sequenceName = "shipwreck_seq", allocationSize = 1)
  Long id; 
```

……

```
CREATE SEQUENCE public.shipwreck_seq
    INCREMENT 1
    START 110
    MINVALUE 1
    MAXVALUE 9223372036854775807
    CACHE 1; 
```

# c# - 图像查看器 C# 下一个按钮

> ID：13393606
> 
> 赞同：1
> 
> 时间：2012-11-15T08:11:22.753
> 
> 标签：c#, image

嗨，我正在用 C# 做一个简单的图像查看器。它有 3 个按钮，第一个按钮包含“打开”，最后两个按钮是“返回和下一步”和图片框。我使用 OpenFileDialog 完成了打开按钮 这是我在 OpenFiledialog 中的代码：

```
 private void openButton_Click(object sender, EventArgs e)
    {
        OpenFileDialog openFileDialog = new OpenFileDialog();
        openFileDialog.Filter = "JPEG|*.jpg|Bitmaps|*.bmp";

        if(openFileDialog.ShowDialog()== DialogResult.OK)
        {
            pictureBox1.Image = Bitmap.FromFile(openFileDialog.FileName);
        }
    } 
```

现在这是我不知道在“下一步和返回”按钮中可以使用什么代码的问题。我知道它在循环。需要你们帮忙谢谢。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:24:56.673

您需要某种文件枚举。一种方法是允许用户在`OpenFileDialog.Multiselect`属性中选择多个文件。`OpenFileDialog`公开一个包含所有选定文件名的属性 Files。

```
class MyPictureViewer
{
   protected string[] pFileNames;
   protected int pCurrentImage = -1;

   private void openButton_Click(object sender, EventArgs e)
   {
        OpenFileDialog openFileDialog = new OpenFileDialog();
        openFileDialog.Filter = "JPEG|*.jpg|Bitmaps|*.bmp";

        if(openFileDialog.ShowDialog()== DialogResult.OK)
        {
            pFileNames = openFileDialog.FileNames;
            pCurrentImage=0;
            ShowCurrentImage();
        }
   }

   protected void ShowCurrentImage()
   {
      if(pCurrentImage >= 0 && pCurrentImage < pFileNames.Length-1)
      {
          pictureBox1.Image = Bitmap.FromFile(pFileNames[pCurrentImage]);
      }
   }
} 
```

您可以为 next 和 previos 的单击事件实现事件处理程序，或者检查边框（因此一旦到达最后一个图像，您就不会超出它）或循环（如果用户在最后一个图像上单击 Next，则跳转到第一个)

```
void btnNextImage_Click(object sender, EventArgs e)
    {
        ++pCurrentImage;
        //check if this was last image in list
        if(pCurrentImage >= pFileNames.Length)
            pCurrentImage = pFileNames.Length == 0? -1 : 0;//if this was last image, go to first image
        ShowCurrentImage();
    }

void btnPrevImage_Click(object sender, EventArgs e)
    {
        --pCurrentImage;
        //check if this was first image in list
        if (pCurrentImage < 0)
            pCurrentImage = pFileNames.Length == 0 ? -1 : pFileNames.Length -1;//if this was first image, go to last image
        ShowCurrentImage();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T09:22:19.293

这是有效的用户控制代码。您需要创建新的窗口窗体应用程序，创建名为 MyPictureViewer 的用户控件。向该控件添加图片框和 3 个按钮。将下面的代码粘贴到此用户控件代码隐藏中，挂钩单击事件，并将此控件添加到主窗体。希望这可以帮助

```
public partial class MyPictureViewer : UserControl
{
    protected string[] pFileNames;
    protected int pCurrentImage = -1;

    public MyPictureViewer()
    {
        InitializeComponent();
    }

    void btnPrevImage_Click(object sender, EventArgs e)
    {
        if (pFileNames.Length > 0)
        {
            pCurrentImage = pCurrentImage == 0 ? pFileNames.Length - 1 : --pCurrentImage;
            ShowCurrentImage();
        }
    }

    void btnNextImage_Click(object sender, EventArgs e)
    {
        if (pFileNames.Length > 0)
        {
            pCurrentImage = pCurrentImage == pFileNames.Length - 1 ? 0 : ++pCurrentImage;
            ShowCurrentImage();
        }
    }

    private void openButton_Click(object sender, EventArgs e)
    {
        OpenFileDialog openFileDialog = new OpenFileDialog();
        openFileDialog.Multiselect = true;
        openFileDialog.Filter = "JPEG|*.jpg|Bitmaps|*.bmp";

        if (openFileDialog.ShowDialog() == DialogResult.OK)
        {
            pFileNames = openFileDialog.FileNames;
            pCurrentImage = 0;
            ShowCurrentImage();
        }
    }

    protected void ShowCurrentImage()
    {
        if (pCurrentImage >= 0 && pCurrentImage <= pFileNames.Length - 1)
        {
            pictureBox1.Image = Bitmap.FromFile(pFileNames[pCurrentImage]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-12T10:12:53.097

```
Here what I did for "btnPrevImage" is some how easier:

*// this button is forward button* 

private void btnForward_Click(object sender, EventArgs e)
    {
        if(currentIndex!=imageList1.Images.Count-1 && imageList1.Images.Count > 0)
        {
            pictureBox1.Image = imageList1.Images[currentIndex++];
        }

    }

*// this button is for Previews button*  

private void btnPrevImage_Click(object sender, EventArgs e)
    {
        if (currentIndex!=0)
        {
            pictureBox1.Image = imageList1.Images[--currentIndex];
        }

do not forget to declare currentIndex. 
```

# php - php中php字符串的最后一个字符

> ID：13393608
> 
> 赞同：1
> 
> 时间：2012-11-15T08:11:35.247
> 
> 标签：php

在 C 中，字符串的最后一个字符总是 '\0' PHP 也一样吗？如果不是，那么 PHP 中字符串的最后一个字符是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:23:12.827

PHP 中的字符串是二进制安全的，这意味着它们也可以包含`\0`。因此，没有可以使用的终止字符。

相反，字符串的长度单独存储在 PHP 的[内部变量表示](http://docstore.mik.ua/orelly/webprog/php/ch14_06.htm)中。这也使字符串长度计算更快。

> 我有一个 csv 文件，其中包含一些数据库数据。现在我必须将每一行数据转换为 sql 格式。csv文件中的数据如下：“abc,abc,1243,abc”我必须让它们像这样“'abc','abc',123,'abc'”。

首先，您应该`fgetcsv()`为此使用；它将整行（或某些情况下的行）变成一个数组。

我猜你想将这些值存储到数据库中；你可以使用这个：

```
if ($arr = fgetcsv($f)) {
    $stmt = $db->prepare('INSERT INTO tablename VALUES (?, ?, ?, ?)');
    $stmt->execute($arr);
} 
```

这假设您的 CSV 中的每一行都有四个项目；为了使其更通用，您可以使用长度`$arr`来构造要在查询中添加的占位符的数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:15:34.393

要遍历字符串中的字符，请编写：

```
for (i = 0; i < strlen($string); i++) {
    $char = substr($string, $i, 1);
    // Do stuff with $char
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-31T13:45:33.697

**我认为它应该工作**

```
 $lastChar = substr($string, -1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:16:56.847

```
for( $i = 0, $len = strlen( $string ); $i < $len; $i++ )
{
    $char = $string[ $i ];
    // do something with $char
} 
```

...是一种方法。

另一种方法是简单地使用 PHP 函数[`str_split()`](http://php.net/manual/en/function.str-split.php)（它创建字符串的单个字符的数组（除非您将第二个参数传递给它，`$split_length`其长度与默认值不同））：

```
foreach( str_split( $string ) as $char )
{
    // do something with $char
} 
```

... ETC。

编辑：

作为您对问题的评论的附录；用于[`fgetcsv()`](http://php.net/manual/en/function.fgetcsv.php)解析 csv 文件。

# unit-testing - 如何使用 hsqdb 模拟数据库中断？

> ID：13393610
> 
> 赞同：1
> 
> 时间：2012-11-15T08:11:37.997
> 
> 标签：unit-testing, testing, hsqldb

我正在使用 HSQLDB 进行单元测试。有没有一种很好的方法来模拟各种数据库问题，如约束违规、ORM 层异常或彻底的数据库中断，同时使用 HSQLDB 而不显式模拟 ORM 层？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:40:43.063

看起来这很难做到，因为内存数据库并没有真正变得断开连接或类似。不过，您的情况有几个选择：

*   要伪造违反约束，请执行一些破坏约束的操作。例如，对于唯一约束，预先添加一个重复行，对于外键约束，当被测系统不期望它时删除引用的外行，等等。

*   ORM 层异常很棘手。对数据库做一些疯狂的事情可能是在这里得到一些反应的最简单的方法（例如删除所有表），但我认为你将很难重现许多可能的问题。

*   使用内存数据库并不能真正直接伪造数据库中断，因为它确实总是可以访问的。解决方案是进入被测系统和数据库之间的层，并断开那里的连接，这是可能的。我目前正在使用 Spring 和 JDBC 模板在 Java 项目上执行此操作，并且我正在分别模拟 DB 超时和中断：

```
DriverManagerDataSource dataSource = 
              ((DriverManagerDataSource)jdbcTemplate.getDataSource());

// 192.0.2.1 is in the TEST-NET range, guaranteed 
// to never exist, so this always times out

dataSource.setUrl("jdbc:hsqldb:http://192.0.2.1/testdb");

// Subsequent operations then timeout 
```

和

```
// Port 9 is reserved for 'discard', so is almost certainly unconnectable 
// and very very unlikely to ever actually return valid data even if not.

dataSource.setUrl("jdbc:hsqldb:http://localhost:9/testdb");

// Subsequent operations immediately fail to connect 
```

请注意，这两个都会中断新的连接，据我所知，没有办法中断所有当前打开的连接。如果你能得到一个参考，close()ing 它应该非常接近模拟飞行中的断开连接。

此外，正如布塔所指出的，这是一个集成测试，而不是单元测试。除了进行这些集成测试之外，您可能还希望在此处对与数据库通信的代码进行单元测试，并为此完全模拟您的数据库接口（例如，您的 JDBC 模板）。这实际上使很多事情变得更容易，尤其是模拟特定的异常场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:21:26.857

对于中断，您可以尝试不启动数据库。对于所有其他事情，我更喜欢模拟 ORM 层。

顺便说一句：当使用 HSQLDB 时，它实际上不再是单元测试了。它更像是一个集成测试。

# delphi - 如何获取字体文件图标？

> ID：13393621
> 
> 赞同：0
> 
> 时间：2012-11-15T08:12:33.940
> 
> 标签：delphi, winapi, icons

我可以像这样获得字体文件夹图标：

```
var
sfi : SHFILEINFO;
begin
  SHGetFileInfo('C:\Windows\Fonts\Arial' , 0 , sfi , SizeOf(sfi) , SHGFI_ICON);
  Image1.Picture.Icon.Handle := sfi.hIcon;
end; 
```

但像这样失败：

```
var
sfi : SHFILEINFO;
begin
  SHGetFileInfo('C:\Windows\Fonts\ARIALN.TTF' , 0 , sfi , SizeOf(sfi) , SHGFI_ICON);  
  Image1.Picture.Icon.Handle := sfi.hIcon;
end; 
```

似乎无法获取字体文件的图标但可以获取字体文件夹，我想知道如何获取字体文件图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T12:23:03.773

我的猜测是您想要与字体文件*的文件类型相关联*的图标（例如，TTF）。然后你可以要求这个。例如，

```
var
  sfi: SHFILEINFO;
begin
  SHGetFileInfo('C:\SomeFileThatNeedNotEvenExist.ttf',
    0, sfi, SizeOf(sfi), SHGFI_USEFILEATTRIBUTES or SHGFI_ICON);
  Image1.Picture.Icon.Handle := sfi.hIcon; 
```

将为您提供与 TTF 文件关联的图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T07:45:56.643

使用 Windows Shell 获取字体文件图标：

**代码 ：**

```
var
  psfDeskTop : IShellFolder;
  psfFont : IShellFolder;
  pEnumList : IEnumIdList;
  pidFont : PItemIdList;
  pidChild : PItemIdList;
  FontPath : array[0..MAX_PATH - 1] of Char;
  IconFile : array[0..MAX_PATH - 1] of Char;
  pchEaten, dwAttributes, ItemsFetched : ULONG;
  ExtractIcon : IExtractIcon;
  IconIndex : Integer;
  Flags : DWORD;
  Icon : TIcon;
  LH, SH : HICon;
begin
  FillChar(FontPath, sizeof(FontPath), #0);
  //get C:\Windows\Fonts
  SHGetSpecialFolderPath(0, FontPath, CSIDL_FONTS, False);
  SHGetDesktopFolder(psfDeskTop);
  psfDeskTop.ParseDisplayName(0, nil, FontPath, pchEaten, pidFont,
    dwAttributes);
  //get font folder's interface
  psfDeskTop.BindToObject(pidFont, nil, IID_IShellFolder, psfFont);
  //Enumerate
  psfFont.EnumObjects(0, SHCONTF_FOLDERS or SHCONTF_NONFOLDERS or
    SHCONTF_INCLUDEHIDDEN, pEnumList);
  ItemsFetched := 0;

  while pEnumList.Next(1, pidChild, ItemsFetched) = NO_ERROR do
  begin

    psfFont.GetUIObjectOf(0, 1, pidChild, IID_IExtractIconW, nil,
      Pointer(ExtractIcon));

    Flags := 0;
    LH := 0;
    SH := 0;

    if Assigned(ExtractIcon) then
    begin
      IconIndex := 0;
      Icon := TIcon.Create;
      ExtractIcon.GetIconLocation(0, @IconFile, MAX_PATH, IconIndex,
        Flags);
      if (IconIndex < 0) or ((Flags and GIL_NOTFILENAME) = 0) then
        ExtractIconEx(@IconFile, IconIndex, LH, SH, 1)
      else
        ExtractIcon.Extract(@IconFile, IconIndex, LH, SH, MakeLong(32,
          16));

      //get font file icon's handle LS for large icon , SH for small icon
      //do something u want 

    end;

  end;

end; 
```

# jakarta-ee - Java EE Web 应用程序的搜索功能

> ID：13393624
> 
> 赞同：1
> 
> 时间：2012-11-15T08:12:52.560
> 
> 标签：jakarta-ee, search

我想在使用 Java EE 开发的 Web 应用程序中添加一个搜索功能（其工作方式与此 stackoverflow 网站的搜索功能的搜索功能相同）。

是否适合使用 Nutch 搜索引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:00:31.863

您在发布问题之前搜索过网络吗？

最明确的选择是[Apache Lucene](http://lucene.apache.org/core/)。它是一种广泛使用的基于文本的索引和搜索工具，具有您可能想要的几乎所有功能。它完全基于 Java，可以很好地与您的 Java EE 环境集成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:08:18.793

您的 Web 应用程序可以使用 Apache Nutch（用于抓取）和 Apache Solr 来提供此搜索功能来搜索抓取的页面。如果您的 Web 服务需要提供高效和快速的搜索，那么 Nutch 应该在 Hadoop 集群中运行，而不是在单台机器上运行。希望这些信息有所帮助。如果您需要更多信息，请告诉我。

# php - mysql的左外连接问题

> ID：13393626
> 
> 赞同：0
> 
> 时间：2012-11-15T08:13:14.633
> 
> 标签：php, mysql

我在下面有这段代码，我首先从表用户中选择所有 id，然后从优惠券表中选择并找到属于该用户的总积分，然后我还从零售商那里选择属于该用户的所有积分桌子。然后我计算这些总和之间的差值。

但是出了点问题，我得到了完全不同的观点。

```
$query4 = 'SELECT u.*, sum(c.points) as total_sum1, sum(r.basket_value) as total_sum 
           FROM users u 
           left outer join coupon c on u.user_id=c.user_id
           left outer join retailer r on u.user_id=r.user_id 
           group by user_id';
$result4 = mysql_query($query4) or die(mysql_error());

$total1=0;
$total=0;
$total2=0;
while($row = mysql_fetch_array($result4)) {
    $total1 += $row['total_sum1'];
    $total += $row['total_sum'];
    echo "<table>";
    echo "<tr>";
    echo "<td>";
    echo  $total2=$total-$total1;
    echo "</td>";
    echo "<td>";

    echo "</td>";
    echo "</tr>";
    echo "</table>";
} 
```

输出样本：

```
total points remaining    |   user_id
0                             9839467227
0                             9853125067
0                             9937770769
0                             9974837329
222060                        A101
0                             A102
0                             A103
0                             A104 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:29:10.700

我猜你的问题是：

```
 $total1 += $row['total_sum1'];
    $total += $row['total_sum']; 
```

`$total1`并`$total`为所有用户附加所有记录。我认为应该是：

```
 $total1 = $row['total_sum1'];
    $total = $row['total_sum']; 
```

试试这个：

```
 SELECT u.*, SUM(c.ts) AS total_sum1, SUM(r.bv) AS total_sum 
FROM users u 
LEFT JOIN 
 (SELECT user_id ,SUM(points) AS ts FROM coupon GROUP BY user_id) c 
 ON u.user_id=c.user_id 
LEFT JOIN 
 (SELECT user_id ,SUM(basket_value) AS bv FROM retailer GROUP BY user_id) r 
ON u.user_id=r.user_id 
GROUP BY u.user_id; 
```

# java - 从更新语句返回 ResultSet？

> ID：13393634
> 
> 赞同：1
> 
> 时间：2012-11-15T08:13:36.100
> 
> 标签：java, sql-server, jdbc, resultset, jtds

我试图返回我更新的受影响行的 id。我想知道，为什么我没有从这里得到一个 ResultSet （只有主键可以），即使我设置了`Statement.RETURN_GENERATED_KEYS`？我使用最新的 jTDS 驱动程序 1.3.0 连接到 Microsoft SQL Server。

```
 try
    {
        PreparedStatement pst = SQL.getConnection().prepareStatement(qry, Statement.RETURN_GENERATED_KEYS);

        pst.setString(1, someValue);
        pst.setString(2, someOtherValue);

        int affectedRows = pst.executeUpdate(); 
        System.out.println(affectedRows); //to make sure whether the query updated anything

        ResultSet rs = pst.getGeneratedKeys();

        if (rs.next())
        {
            System.out.println(rs.getInt(1));
        }
    } catch (Exception e) {
        e.printStacktTrace();
    } 
```

这里有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:39:19.940

一种解决方法是创建一个存储过程并使用 CallableStatement 方法调用它。不要问我为什么这行得通，而不是相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T19:47:03.390

在 SQL Server 2008 及更高版本中，您可以在 INSERT 或 UPDATE 语句中使用[OUTPUT 子句](https://docs.microsoft.com/en-us/sql/t-sql/queries/output-clause-transact-sql)。有关示例，请参[见此答案。](https://stackoverflow.com/a/44553298/2144390)

# logic - 使 IF 条件条件更好的更好逻辑是什么？

> ID：13393642
> 
> 赞同：0
> 
> 时间：2012-11-15T08:14:01.950
> 
> 标签：logic

我有两个随机出现的值，我需要编写一个条件来设置一个布尔值。

```
if(a == 1 && b == 1) then set both true
if(a == 1 && b == 0) then a as true and b as false
if(a == 0 && b == 1) then b as true and a as false
if(a == 0 && b == 0) then set both false 
```

这个条件很好我的问题是我们有更好的方法/逻辑吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:17:06.807

这就像直接分配布尔测试一样简单：

```
a = (a==1)
b = (b==1) 
```

# audio - 网络音频调度改为立即播放

> ID：13393643
> 
> 赞同：0
> 
> 时间：2012-11-15T08:14:05.380
> 
> 标签：audio, html5-audio, web-audio-api

我正在尝试以由节奏设置的方式从 Web Audio 播放音符，就像[Google Chromium Shiny Drum Machine](http://chromium.googlecode.com/svn/trunk/samples/audio/shiny-drum-machine.html)示例一样。音符随后向下播放，每行包含两个八度音符（要演示，[请转到此处](http://www.rioleo.org/piano)并在选择音符之前单击粘滞，然后单击开始）

![在此处输入图像描述](../Images/5a29ac565af1cae9b21dc14d30729308.png)

我有一个开始按钮：

```
$("#start").click(function () {
    noteTime = 0.0;
    startTime = audioCtx.currentTime + 0.005;
    schedule();
}); 
```

调度功能：

函数 schedule() { var currentTime = audioCtx.currentTime;

```
currentTime -= startTime;

while (noteTime < currentTime + 0.200) {
    var contextPlayTime = noteTime + startTime;

    for (var i = 0; i < theArray.length; i++) {
        if ($("." + rhythmIndex + ".bar" + i).hasClass("selected")) {
            $("." + rhythmIndex + ".bar" + i).effect("highlight", {}, 10);
            playSound($("." + rhythmIndex + ".bar" + i).attr("freq"), 400, contextPlayTime);
        }
    }
    advanceNote();
}

timeoutId = setTimeout("schedule()", 0); 
```

}

以及选择下一个演奏音符的高级音符功能：

```
function advanceNote() {
    // Advance time by a 16th note...
    var secondsPerBeat = 60.0 / $("#tempo").slider("option", "value");

    rhythmIndex++;

    if (rhythmIndex == loopLength) {
        rhythmIndex = 0;
    }

    noteTime = secondsPerBeat;
} 
```

最后是我的声音播放器：

```
function playSound(x, y, quick, noteTime) {
    if (soundBuffer) {
        var sound = audioCtx.createBufferSource();
        var gain = audioCtx.createGainNode();
        sound.buffer = soundBuffer;
        sound.playbackRate.value = x / canvas.width * 2;
        sound.connect(gain);
        gain.connect(audioCtx.destination);

        var volume = 0.5;
        gain.gain.value = volume;

        if (quick) {
            sound.noteGrainOn(0., .2, .4);
        } else {
            sound.noteOn(noteTime);
        }
    }
} 
```

问题是，一旦您按下开始，它就会同时播放每个音符，而不考虑时间或速度。当声音每秒都在继续播放时，这一切最终都会使浏览器超载，我不知道可能出了什么问题。这里有什么问题？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:20:45.300

没关系！解决方法是 noteTime 是增量的，所以`noteTime = secondsPerBeat`应该是`noteTime += secondsPerBeat`；

# vsto - Remove VSTO 2010 manually

> ID：13393653
> 
> 赞同：1
> 
> 时间：2012-11-15T08:14:37.560
> 
> 标签：vsto

When I try to remove VSTO 2010 from my computer, it looks like it removed it, but after the deinstallation there is still the entry in "Programs and Features". When I try it again the normal install-routine is called.

I have to reinstall it because I can't build any Word-AddIns and I have to debug one because of a bug.

How do I fix this?

# file - Hard disk files can only be read in linux

> ID：13393655
> 
> 赞同：0
> 
> 时间：2012-11-15T08:14:42.087
> 
> 标签：file, system

I tried deleting a folder(about 2gig) from a portable hard disk/drive in windows unsuccessfully, i then removed the hard disk and connected to a Fedora 14 environment and deleted it successfully. Now when i connect the same hard disk to a windows machine i can't see the files. however everything appears in linux, what should i do to fix this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:22:23.860

听起来硬盘驱动器格式错误。这取决于您运行的 Windows 版本，但所有最新的 Windows 都需要 NTFS 硬盘驱动器。如果您将它作为外部连接，那么它也适用于 FAT 格式。

你知道硬盘是什么格式的吗？我需要更多信息，例如您要对驱动器做什么以及如何连接它？

# php - How to format PHPDoc comment for complex return values

> ID：13393658
> 
> 赞同：0
> 
> 时间：2012-11-15T08:15:06.257
> 
> 标签：php, comments, phpdoc

I have a function which returns something like the following structure:

```
array('form' => $form, 'options' => $options) 
```

How to correctly format this return value in function comment?

My guess is:

```
@return array('form' => CForm, 'options' => array) ... comment ... 
```

Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:27:55.217

当您必须返回一个奇怪的数组时，只需简单易懂地记录它。

这就是我将如何做到的。随意使用`@return array`，而不是`mixed[]`：

```
<?php
/**
 * Method to do something
 *
 * @param Some_User_Class $user
 * @param string $blockUserId
 * @throws Some_Model_Relations_ErrorException
 * @return mixed[] see example
 * @example The returned array consists of this
 *  and that and might have foo and bar.
 *  so this makes me feel like the code should be refactored.
 */
public function unblockUser(Some_User_Class $user, $unblockUserId) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:37:21.587

也许有点矫枉过正，但您*可以*返回具有特定接口的对象，而不是常规数组。就像是：

```
/**
 * @return ReturnObject
 */
public function yourMethod()
{
    return new ReturnObjectImpl( $theForm, $theOptions );
}

interface ReturnObject
{
    public function getCForm();
    public function getOptions();
}

class ReturnObjectImpl
    implements ReturnObject
{
    protected $_form;
    protected $_options;

    public function __construct( CForm $form, array $options )
    {
        $this->_form = $form;
        $this->_options = $options;
    }

    public function getCForm()
    {
        return $this->_form;
    }

    public function getOptions()
    {
        return $this->_options;
    }
} 
```

# php - 使用时间发布表单

> ID：13393659
> 
> 赞同：1
> 
> 时间：2012-11-15T08:15:07.740
> 
> 标签：php, javascript, mysql

我正在尝试制作一个使用时间发布的表格。我设法计算了时间。我想输入一个特定的时间来发布等。12:00。是否可以？

```
<html>
<head>

</head>
<body>
   <span id="remain"></span>
   <form action="3.php" method="post" id="form1" name="form1">
     <input type="text" name="id">
     <input type="submit" name="Go" value="submit">
   </form>

<script type="text/javascript">
  window.onload=counter;
  function counter() {
     seconds = 150;
     countDown();
  } 

  function countDown(){
     document.getElementById("remain").innerHTML=seconds;
     setTimeout("countDown()",1000);
     if(seconds == 0) {
        document.form1.submit();
     }else {
        seconds--;      
     }
   }    
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:23:59.123

这是通过查找当前时间完成的，然后将当前时间与您要发布表格的设置时间进行比较

**查找当前时间**

```
var currentTime = new Date ( );
var currentHours = currentTime.getHours ( );
var timeOfDay = ( currentHours < 12 ) ? "AM" : "PM";
currentHours = ( currentHours > 12 ) ? currentHours - 12 : currentHours;
currentHours = ( currentHours == 0 ) ? 12 : currentHours; 
```

使用上面的代码，您可以找到当前时间，然后与特定时间进行比较。如果两个时间相等，则运行该函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:30:08.023

我认为您可以使用此代码。这不完全是你问的方式，但这就是想法

```
 <html>
<head>

</head>
<body>
<span id="remain"></span>
<form action="test1.asp" method="post" id="form1" name="form1">
<input type="text" name="id">
<input type="submit" name="Go" value="submit">
</form>
<script type="text/javascript">
window.onload=counter;
function counter()
{
    var currentTime = new Date ( );

  var currentHours = currentTime.getHours ( );
  var currentMinutes = currentTime.getMinutes ( );
  var currentSeconds = currentTime.getSeconds ( );
hours=currentHours
minutes=currentMinutes
seconds = currentSeconds;

countDown();
}   

function countDown(){

document.getElementById("remain").innerHTML=hours+':'+minutes+':'+seconds;
setTimeout("countDown()",1000);
    if(hours == 12)
        {
            document.form1.submit();
        }else {
        seconds--;      
        }
}

</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:32:13.783

将您的功能 countDown 更改为此。首先获取当前时间，然后将剩余秒数计算为当前时间并将其设置为以秒为单位的超时时间

```
function countDown(){

 //current time in seconds
 var d = new Date();
 var n = d.getTime();

 //find the remaining seconds from a day
 var remainingSec = n % (60 * 60 * 24);

 //find current hours set and convert to seconds
 var timeOfDay = ( currentHours < 12 ) ? "AM" : "PM";
 currentHours = ( currentHours > 12 ) ? currentHours - 12 : currentHours;
 currentHours = ( currentHours == 0 ) ? 12 : currentHours;
 var currentSec = currentHours * 60 * 60;

 //set timeout time
 var timeoutTime = remainingSec - currentSec;

 if(timeoutTime > 0) {
  setTimeout(function(){
   document.form1.submit();
  },timeoutTime * 1000);
 } else {
  console.log("Sorry the time is back in the past.");
 }

} 
```

# google-app-engine - How does High Replication Datastore implement consistent reads

> ID：13393667
> 
> 赞同：0
> 
> 时间：2012-11-15T08:15:43.823
> 
> 标签：google-app-engine, google-cloud-datastore, distributed-system, consistency

I watched the video in the link below to understand how the High Replication Datastore works. Writes are synchronously replicated to a majority of the replicas and the remaining replicas receive the update asynchronously. The video says that reads are consistent. That even if a read hits a datacenter with stale data the datacenter will catch up with new updates. But how does it know whether or not it has stale data. Presumably it doesn't query every replica on each read?

[http://www.google.com/events/io/2011/sessions/more-9s-please-under-the-covers-of-the-high-replication-datastore.html](http://www.google.com/events/io/2011/sessions/more-9s-please-under-the-covers-of-the-high-replication-datastore.html)

# vbscript - 在 Powerpoint 2010 中将方程转换为图像的宏

> ID：13393669
> 
> 赞同：1
> 
> 时间：2012-11-15T08:15:49.983
> 
> 标签：vbscript, powerpoint, powerpoint-2010

我正在尝试准备一个宏，它将 PowerPoint2010 演示文稿中的所有方程式转换为图像，同时保留位置和动画效果/顺序。

根据[此处](https://stackoverflow.com/questions/13057432/convert-all-worksheet-objects-to-images-in-powerpoint)提供的提示（感谢 Steve Rindsberg），我修改了脚本如下：

```
 Sub ConvertAllShapesToPic()
    Dim oSl As Slide
    Dim oSh As Shape

    On Error Resume Next

    For Each oSl In ActivePresentation.Slides
        For Each oSh In oSl.Shapes
            ' modify the following depending on what you want to
            ' convert
            Select Case oSh.Type
                Case msoTextBox, msoEmbeddedOLEObject, msoLinkedOLEObject
                    ConvertShapeToPic oSh
                Case Else
            End Select
        Next
    Next

NormalExit:
    Exit Sub

ErrorHandler:
    Resume Next

End Sub

Sub ConvertShapeToPic(ByRef oSh As Shape)
    Dim oNewSh As Shape
    Dim oSl As Slide

    Set oSl = oSh.Parent
    oSh.Copy
    Set oNewSh = oSl.Shapes.PasteSpecial(ppPasteEnhancedMetafile)(1)
    oSh.PickupAnimation
    oNewSh.ApplyAnimation
    With oNewSh
        .Left = oSh.Left
        .Top = oSh.Top
        Do
            .ZOrder (msoSendBackward)
        Loop Until .ZOrderPosition = .ZOrderPosition
        .AnimationSettings.AnimationOrder = oSh.AnimationSettings.AnimationOrder
    End With
    oSh.Delete

NormalExit:
    Exit Sub

ErrorHandler:
    Resume Next

End Sub 
```

此脚本的问题：

1.  所有方程都没有转换成图像。
2.  一些没有公式的文本框正在失去其内部动画效果（例如在单击时显示第二个项目符号文本）。

我准备这个脚本的原因是因为当我将 PowerPoint 2010 转换为 Articulate 演示文稿时，由于 Articulate 09 不完全支持 PPT2010 方程，所以方程没有得到正确呈现。

我有 100 多份 PPT，几乎所有幻灯片上都有方程式。如果没有编程方法，唯一的选择是手动转换所有方程并重新应用动画效果！

感谢您提供的任何帮助:-)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:10:16.137

至于第一个问题，我的不好：

为了这：

```
For Each oSl In ActivePresentation.Slides
        For Each oSh In oSl.Shapes
            ' modify the following depending on what you want to
            ' convert
            Select Case oSh.Type
                Case msoTextBox, msoEmbeddedOLEObject, msoLinkedOLEObject
                    ConvertShapeToPic oSh
                Case Else
            End Select
        Next
Next 
```

代替：

```
Dim x as long 

For x = ActivePresentation.Slides.Count to 1 Step -1
        Set oSl = ActivePresentation.Slides(x)
        For Each oSh In oSl.Shapes
            ' modify the following depending on what you want to
            ' convert
            Select Case oSh.Type
                Case msoTextBox, msoEmbeddedOLEObject, msoLinkedOLEObject
                    ConvertShapeToPic oSh
                Case Else
            End Select
        Next
Next 
```

当我最初写这篇文章时，我可能只测试了每张幻灯片有一个方程式的幻灯片。当您单步执行一个集合并可能删除成员时，您需要向后单步执行，否则在您删除成员时索引会变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T15:44:24.977

```
Sub Test()
    Dim oSh As Shape

    For Each oSh In ActivePresentation.Slides(1).Shapes
        DoSomethingToEachShape oSh
    Next

End Sub

Sub DoSomethingToEachShape(oSh As Shape)
    Dim x As Long
    If oSh.Type = msoGroup Then
        For x = 1 To oSh.GroupItems.Count
            DoSomethingToEachShape oSh.GroupItems(x)
        Next
    Else
        Debug.Print oSh.Name
    End If
End Sub 
```

# common-lisp - 如何将宏存储在 Common Lisp [sbcl] 中的变量中？

> ID：13393673
> 
> 赞同：2
> 
> 时间：2012-11-15T08:16:02.740
> 
> 标签：common-lisp

我对宏和函数之间的区别感到困惑；鉴于第 1 部分成功，具体为什么第 2 部分会在下面失败。

```
(defun foo () "foo")
(setf a 3) ;; sets the symbol value cell to 3
(setf a #'foo) ;; PART ONE
(funcall a) ;; returns foo

(defmacro bar () "bar")
(setf b #'bar) ;; Error the macro name bar was found as an argument to function PART TWO 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T12:38:21.803

宏不是函数。因此，您无法从宏名称中获取函数对象。您可以应用函数，但不能应用宏。

宏需要源代码并生成新的源代码。

Common Lisp 以这样一种方式定义，即可以在编译时，运行时之前完成。在一般情况下，Common Lisp 不支持运行时宏扩展。Common Lisp 这样做是为了使代码在运行之前可以完全编译。定义 Common Lisp 的目标之一是将其定义为一种允许高效执行大型 Lisp 程序的语言。运行时代码生成仅在受控方式下有用 - 否则可能会在运行时发生一类全新的执行错误。允许一般运行时代码操作的宏机制被认为是不可取的。

在较旧的 Lisp 方言中，有所谓的*FEXPR*的想法，它类似于宏，可以在运行时调用，并且可以在运行时操作源代码。为 Common Lisp 删除了此功能。有关这方面的背景，请参阅Kent Pitman[的 Lisp 中的特殊形式。](http://www.nhplace.com/kent/Papers/Special-Forms.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T00:14:50.433

( [`#`sharpsign)](http://www.lispworks.com/documentation/HyperSpec/Body/02_dh.htm)是一个标准宏字符，它是一个调度宏字符。它应该与另一个角色组成。( [`#'`sharpsign single-quote)](http://www.lispworks.com/documentation/HyperSpec/Body/02_dhb.htm)组合后面需要一个函数名或 lambda 表达式，并且它扩展为`(function expression)`.

因此，`#'foo`在读取时扩展为`(function foo)`. 如果`foo`是一个函数，[`function`](http://www.lispworks.com/documentation/HyperSpec/Body/s_fn.htm)将对它进行评估。在词法范围内，它可能是`foo`由 a[`flet`或`labels`](http://www.lispworks.com/documentation/HyperSpec/Body/s_flet_.htm)绑定的 f 。如果没有这样的词法定义，它将尝试从符号的函数中获取全局函数定义。

现在，在表示宏`(function bar)`时发出错误信号，无论是词法的还是全局的。但是，您可以使用来获取全局宏的宏功能。如果存在，它是两个参数的函数：表单和环境。`bar`[`macrolet`](http://www.lispworks.com/documentation/HyperSpec/Body/s_flet_.htm)[`defmacro`](http://www.lispworks.com/documentation/HyperSpec/Body/m_defmac.htm)[`(macro-function 'bar)`](http://www.lispworks.com/documentation/HyperSpec/Body/f_macro_.htm)`bar`

除非您要将`bar`'s 宏功能应用于表单，否则它可能不是您想要的。让我们考虑应用 的宏功能`and`：它不会进行逻辑布尔运算，它可能会将给定的形式扩展为`if`.

但是，如果这是您想要的，请记住它`macro-function`还有第二个可选参数，即环境。`defmacro`您可能会在 a或 a中获得一个环境作为参数[`define-setf-expander`](http://www.lispworks.com/documentation/HyperSpec/Body/m_defi_3.htm)。在后者中，通常需要它以便[`get-setf-expansion`](http://www.lispworks.com/documentation/HyperSpec/Body/f_get_se.htm)在扩展子表单时考虑词汇环境。

试试这个：

```
(funcall (macro-function 'and) '(and form1 form2 form3) nil) 
```

* * *

练习：实现你自己的[`macroexpand-1`和`macroexpand`](http://www.lispworks.com/documentation/HyperSpec/Body/f_mexp_.htm).

练习：实现 a `macroexpand-all`， a`macroexpand`递归到子表单中，识别 Common Lisp 的特殊运算符。

注意：不要走得太远`macroexpand-all`，它需要一个代码walker，它是特定于实现的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:18:36.753

这样做的原因是宏不是函数，因此您不能将它们作为函数引用（`#'foo`是 的简写`(function foo)`，它获取符号的相应函数对象`foo`），您也不能`funcall`。

部分解决方案是将宏包装在一个函数`(setf b (lambda () (bar)))`中，同样可以`funcall`。`&rest`但是，如果您期望/`&body`宏中有参数，它将不起作用。在这种情况下，没有通用的方法可以实现您想要的。所以你需要重新考虑你的方法。问题是：你为什么要尝试`funcall`宏？也许，一个普通的功能会为你的情况做？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-16T10:08:41.113

它可能有助于将宏作为“编译器插件”。现在，将编译器的一部分存储在变量中是否有意义？不（甚至在 Lisp 中也没有）。

# .net - 如何停止运行定时器？

> ID：13393675
> 
> 赞同：0
> 
> 时间：2012-11-15T08:16:09.447
> 
> 标签：.net, multithreading, timer

如果我创建并启动了一个`System.Threading.Timer`：

```
Dim tcb As TimerCallback = New TimerCallback(AddressOf timerRoutine)
Dim t As Timer = New Timer(tcb, Nothing, DueTime, Period) 
```

我该如何阻止它？

`System.Timers.Timer`使用 a和 call会更容易`Timer.Stop()`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:20:30.247

`Change`您可以通过使用 Timeout.Infinite调用计时器上的方法来停止它：请参阅[http://msdn.microsoft.com/en-us/library/yz1c7148(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/yz1c7148%28v=vs.80%29.aspx)

```
t.Change(Timeout.Infinite, Timeout.Infinite) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:02:24.140

一个选项是`t.Dispose()`，它将处理`Timer`并因此停止它。

如果`Dispose`按如下方式调用，它应该等待 10 秒以等待所有排队的计时器回调完成，然后再处理对象：

```
Dim waitHnd As WaitHandle = New AutoResetEvent(False)
t.Dispose(waitHnd)
waitHnd.WaitOne(10000) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:24:14.153

您可以使用 Change 方法来做到这一点。看看下面的注释：

[http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

# mysql - 代码末尾的 MySQLTrigger 语法错误

> ID：13393676
> 
> 赞同：1
> 
> 时间：2012-11-15T08:16:15.530
> 
> 标签：mysql, sql, syntax, triggers

我不明白为什么这个 SQL 不起作用。我基本上是在尝试为 TEXT 数据类型分配默认值，因为它不支持默认值。

```
DELIMITER /
CREATE TRIGGER ifEventDesciptionNull
BEFORE INSERT ON Event
FOR EACH ROW
BEGIN
IF NEW.description = NULL THEN
    SET NEW.description = 'No description available.';
END/
DELIMITER ; 
```

我在“”附近的第 7 行（这不包括分隔符 switcharoo）处收到有关语法的错误。如果返回的错误指出了什么，我确信我不需要寻求帮助。同样，它在 Oracle 中是无效的，它创建它时会出现编译错误，并且不允许将任何内容添加到表中。

先感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:19:50.607

比较时`NULL`，使用`IS NULL`not`= NULL`

```
DELIMITER //
CREATE TRIGGER ifEventDesciptionNull
BEFORE INSERT ON Event
FOR EACH ROW
BEGIN
    IF NEW.description IS NULL THEN
        SET NEW.description = 'No description available.';
    END IF;    -- << add this also
END//
DELIMITER ; 
```

# actionscript-3 - mx:TextArea 改变部分文字颜色

> ID：13393684
> 
> 赞同：0
> 
> 时间：2012-11-15T08:16:56.697
> 
> 标签：actionscript-3, apache-flex, datagrid, flash-builder, flashbuilder4

我有一个带有 textArea 的项目渲染器。

```
 <?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                          xmlns:s="library://ns.adobe.com/flex/spark" 
                          xmlns:mx="library://ns.adobe.com/flex/mx" 
                          focusEnabled="true">

    <fx:Script>
        <![CDATA[
            import mx.controls.DataGrid;
            import mx.controls.dataGridClasses.DataGridColumn;
            import mx.controls.listClasses.BaseListData;
            import mx.core.UITextField;
            public var htmlModif:String;

            /*  protected function lblData_changeHandler(event:Event):void
             {
                 htmlModif=lblData.htmlText;
                 dataGridListData.label = htmlModif;

             } */

            override public function validateProperties():void
            {
                super.validateProperties();
                if (listData)
                {
                    var dg:DataGrid = DataGrid(listData.owner);

                    var column:DataGridColumn = dg.columns[listData.columnIndex];

                    var htmlText:UITextField = lblData.htmlText as UITextField;

                }

            }
        ]]>
    </fx:Script>

    <mx:TextArea id="lblData" top="0" left="0" right="0" bottom="0" 
                 htmlText="{dataGridListData.label}" 
                 wordWrap="true"
                 editable="true"
                 creationComplete="htmlModif=lblData.htmlText"
                 change="htmlModif=lblData.htmlText"/>
</s:MXDataGridItemRenderer> 
```

更改后，我将 htmlModif 放在 arraycollection 上以保存新值。

在某些情况下，我喜欢更改部分文本的颜色或样式。如果更改与样式有关（粗体，斜体......），它适用于所有文本

```
DP_LISTEREDVCLI[ligneIndexEdit].scRub2="<b>"+DP_LISTEREDVCLI[ligneIndexEdit].scRub2+"</b> 
```

但是，如果更改与颜色有关，我将不起作用：

DP_LISTEREDVCLI[ligneIndexEdit].scRub2=""+DP_LISTEREDVCLI[ligneIndexEdit].scRub2+"";

我认为这种干扰是因为在这种情况下，新值是这样的：

```
<FONT COLOR='#FFAE10'> <TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Arial" SIZE="12" COLOR="#0C1E37" LETTERSPACING="0" KERNING="0">mais pas de disparition</FONT></P></TEXTFORMAT></FONT> 
```

那么，你能帮我解决这个问题吗？

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:57:00.453

试试这个，我附上了输出的屏幕截图， ![在此处输入图像描述](../Images/d2de077e8d9335e03d4bbbae9ae25a9f.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application
    xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[
            import mx.collections.*;
            private var DGArray:Array = [
                {Artist:'Pavement 1 ', label:'Slanted and Enchanted', Price:11.99},
                {Artist:'Pavement 2 ', label:'without color <FONT COLOR="#FF00FF"> <TEXTFORMAT LEADING="2"><P ALIGN="LEFT"><FONT FACE="Arial" SIZE="12" COLOR="#FF00FF" LETTERSPACING="0" KERNING="0">Slanted and Enchanted</FONT></P></TEXTFORMAT></FONT>', Price:15.99}];

        ]]>
    </fx:Script>

    <mx:DataGrid id="myGrid" width="100%" height="100%" 
                 dataProvider="{DGArray}" itemRenderer="IR" >

    </mx:DataGrid>
</s:Application> 
```

Itemrenderer 代码，

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                          xmlns:s="library://ns.adobe.com/flex/spark" 
                          xmlns:mx="library://ns.adobe.com/flex/mx" 
                          focusEnabled="true">

    <fx:Script>
        <![CDATA[
            import mx.controls.DataGrid;
            import mx.controls.dataGridClasses.DataGridColumn;
            import mx.controls.listClasses.BaseListData;
            import mx.core.UITextField;
            public var htmlModif:String;

            /*  protected function lblData_changeHandler(event:Event):void
            {
            htmlModif=lblData.htmlText;
            dataGridListData.label = htmlModif;

            } */

            override public function validateProperties():void
            {
                super.validateProperties();
                if (listData)
                {
                    var dg:DataGrid = DataGrid(listData.owner);

                    var column:DataGridColumn = dg.columns[listData.columnIndex];

                    var htmlText:UITextField = lblData.htmlText as UITextField;

                }

            }
        ]]>
    </fx:Script>

    <mx:TextArea id="lblData" top="0" left="0" right="0" bottom="0" 
                 htmlText="{dataGridListData.label}" 
                 wordWrap="true"
                 editable="true"
                 creationComplete="htmlModif=lblData.htmlText"
                 change="htmlModif=lblData.htmlText"/>
</s:MXDataGridItemRenderer> 
```

# java - JQuery 帖子在 Jetty 上不起作用

> ID：13393687
> 
> 赞同：1
> 
> 时间：2012-11-15T08:17:15.137
> 
> 标签：java, jquery, post, jetty

重新安装 Jetty 后，我在通过 JQuery 库发布数据时遇到问题。当我尝试使用 $.post 函数发布数据时，服务器返回 500 内部错误。在码头日志中我有这样的错误：

```
2012-11-15 12:05:22.031:WARN::/post
java.lang.NoSuchMethodError: org.mortbay.util.UrlEncoded.decodeTo(Ljava/io/InputStream;Lorg/mortbay/util/MultiMap;Ljava/lang/String;I)V
        at org.mortbay.jetty.Request.extractParameters(Request.java:1566)
        at org.mortbay.jetty.Request.getParameter(Request.java:859)
        at org.apache.jsp.post_jsp._jspService(org.apache.jsp.post_jsp:44)
        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:109)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:389)
        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:486)
        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:380)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:401)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:766)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:450)
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:199)
        at org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:945)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:756)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:410)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

我试图将具有该类的库添加到我的项目（和 jetty/lib/ext 文件夹），但再次出现错误。也许我需要正确的版本？这个错误是什么意思？没有具有正确参数的方法 decodeTo(InputStream, MultiMap, String, Integer (???我的意思是整数？)。所以任何帮助都会被应用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:03:03.390

看起来 jetty/lib 目录中的库有问题。我们从以前的安装中复制了它（很久以前我们使用 Glassfish）。现在问题解决了-我下载了jetty hightitude v.6.1（从这里：[http](http://dist.codehaus.org/jetty/jetty-hightide-6.1/) ://dist.codehaus.org/jetty/jetty-hightide-6.1/ ）（就像我自己的jetty版本）并从中替换lib文件夹。我认为问题出在 jsp 库上。

# youtube-api - YouTube API 中的 FavoriteCount 变为零 (0)

> ID：13393690
> 
> 赞同：2
> 
> 时间：2012-11-15T08:17:49.707
> 
> 标签：youtube-api, favorites

我正在使用 YouTube API 调用如下来检索视频的 FavoriteCount：-

[http://gdata.youtube.com/feeds/api/videos?q=@VideoId&v=2&author=@authorname](http://gdata.youtube.com/feeds/api/videos?q=@VideoId&v=2&author=@authorname)

@VideoId - 传递 VideoId 和 @authorname - 传递作者姓名。

我正在解析来自统计节点的 FavoriteCount 的上述 API 调用的响应。

在 2 个月前，我正确地获得了 FavoriteCount 值。例如 - 1、4 等。

但是，从上个月开始，我观察到所有视频 - 从上面的 API 调用中将 FavoriteCount 值设为零。任何人都知道这个问题或任何解决方案来为 YouTube 视频检索正确的 FavoriteCount 吗？

# java - Android FragmentManager BackStackRecord.run 抛出 NullPointerException

> ID：13393693
> 
> 赞同：65
> 
> 时间：2012-11-15T08:18:04.667
> 
> 标签：java, android, android-fragments, fragmentmanager

使用 Fragments 时，有时会出现以下异常：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:591)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
    at android.os.Handler.handleCallback(Handler.java:615)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:4745)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
    at dalvik.system.NativeStart.main(Native Method) 
```

当`run()`of`BackStackRecord`被调用`execPendingTransactions()`时，当它试图从管理器中删除一个片段时，就会发生异常。

```
case OP_REMOVE: {
  Fragment f = op.fragment;
  f.mNextAnim = op.exitAnim; <----
  mManager.removeFragment(f, mTransition, mTransitionStyle);
}
break; 
```

我似乎无法弄清楚究竟是什么原因造成的？我认为这与删除碎片时没有正确清理碎片的后台有关。

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-11-15T10:03:21.170

回答我自己的问题：

**当您调用`FragmentTransaction.remove(null);`和`FragmentTransaction.commit();`**

**编辑：而且，就像 Twice Circled 和 shinyuX 在评论中指出的那样；调用`show(null)`or `add(null)`, `attach(null)`and`detach(null)`方法时，可能还有`hide(null)`**

调用后`commit()`，事务将在 FragmentManager 中排队。因此，当您显式调用 之后正在处理操作时`FragmentManager.executePendingTransactions()`，或者当 FragmentManager 队列线程调用它时，它会抛出一个`NullPointerException`.

就我而言，我在全局对象中维护片段状态。在那里我检查了片段是否显示，然后删除了可见的片段。但是因为我启动了一个新的 FragmentActivity，所以这些状态在不可见时仍然设置为 true。所以这是一个设计错误。

除了修复设计错误之外，解决方案很简单：在删除片段之前检查是否`FragmentManager.findFragmentByTag()`返回。`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T08:51:08.623

它发生的一个原因是调用

```
getSupportFragmentManager().beginTransaction().remove(fragment) 
```

而`fragment`为空

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-12T18:25:06.033

我不使用标签来创建片段（它们就像 TabBar 容器一样工作）。

因此，它在更改 Tab 时有效，但如果我按下后退按钮，我会遇到同样的错误。

在 onDestroyView 方法中，我找到了 FragmentManager#findFragmentById 的片段实例，但是 FragmentManager#findFragmentByTag 返回 null，当然。

```
class MyFragment extends ListFragment {

@Override
public void onDestroyView() {
    super.onDestroyView();

    if (this.mapFragment != null
            && getFragmentManager().findFragmentById(
                    this.mapFragment.getId()) != null) {

        getFragmentManager().beginTransaction().remove(this.mapFragment)
                .commit();
        this.mapFragment = null;
    }

}
} 
```

# javascript - 打字稿中是否有诸如 C#“使用”之类的功能？

> ID：13393696
> 
> 赞同：2
> 
> 时间：2012-11-15T08:18:22.513
> 
> 标签：javascript, typescript

有没有一种方法可以更轻松地在下面的打字稿代码中调用我的警报。这是我的警报编码的地方：

```
module Admin.Shared.Alerts {
    export class alerts {
        static mvcOnFailure(message: string) {
            dialog.alertWin("Internal Application Error", message);
        }
    }

} 
```

这是我称之为的一个小片段示例：

```
module Admin.MyAccount.Access {
    export function ajaxDone(data: string, textStatus: string, jqXHR: JQueryXHR) {       
        Admin.Shared.Alerts.alerts.mvcOnFailure("x");
    }

} 
```

问题是有这么长的字符串来调用警报。有什么方法可以让我在 C# 中执行类似“使用”的操作，而不必指定“Admin.Shared.Alerts”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:37:50.720

肯定有。我不会推荐它，但你正在寻找的是`with`声明：

```
module Admin.MyAccount.Access {
    export function ajaxDone(data: string, textStatus: string, jqXHR: JQueryXHR) {       
        with (Admin.Shared.Alerts) {
            alerts.mvcOnFailure("x");
        }
    }
} 
```

**注意：**我宁愿使用@Richard 在他对您的问题的评论中提供的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:11:08.417

在这方面，我有两个建议给你。首先是你重新考虑你的模块结构。一旦您看到诸如“Common”、“Shared”或“Core”之类的命名空间，它就会告诉您存在问题，因为这些不是描述内部代码可能执行的操作的词。好名字是“消息”、“警报”、“付款”——你可以马上告诉你会在那里找到什么样的东西。

所以建议 1 是删除“共享”命名空间。

```
module Admin.Alerts { 
```

如果您正在构建大型 TypeScript 程序，您可能需要遵循 CommonJS 应用程序中常用的模块模式。您使用简单的模块名称，但将它们嵌套在文件夹中：

*.\Admin\Alerts.ts*

```
module Alerts { 
```

您将使用导入模块

```
import alerts = module('.\Admin\Alerts.ts'); 
```

然后在你的代码中使用它的`alerts`名字。

在 Web 应用程序中，您将使用模块加载器，例如 requires.js 来为您处理所有加载，因此不会有太多额外的工作，并且您会告诉编译器使用标志为您创建代码。 ..

```
tsc --module commonjs Alerts.ts 
```

# batch-file - 如何捕获标准错误，例如“系统找不到指定的驱动器”。或“系统找不到指定的路径。” 在批处理脚本中

> ID：13393697
> 
> 赞同：1
> 
> 时间：2012-11-15T08:18:21.890
> 
> 标签：batch-file, standard-error

我正在尝试开发一个 Windows 批处理程序，如果出现类似`The system cannot find the drive specified.`或错误`The system cannot find the path specified.`，则可以检查“fld_chk.out”文件并可能发生循环。

但是 cd A:\rr\Br>fld_chk.out 没有捕获这些错误。

如何捕捉那里的标准错误？

我的代码是这样的： -

```
cd A:\rr\Br>fld_chk.out
cd B:\yy\dd>>fld_chk.out
find /c "The system cannot find" *.out>fld_count_check_1.out
find /c "0" fld_count_check_1.out>fld_count_check_2.out
FOR /F "TOKENS=1* DELIMS=:" %%B IN (fld_count_check_2.out) DO SET b=%%C
set _count=%b%
IF %_count% EQU 2 goto Success
IF not %_count% EQU 2 goto notSuccess
:Success
echo folder found
:notSuccess
echo folder not found 
```

在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:43:21.753

`cd`执行此操作的方法是在执行命令后检查 %ERRORLEVEL% 值：

```
cd A:\rr\Br 2> NUL
if %errorlevel% equ 0 (
   echo folder found
) else (
   echo folder not found
) 
```

如果值为 0，CD 被正确执行并且当前目录被改变；否则 (errorlevel==1) 驱动器或目录不存在。

部分是为了`2> NUL`避免错误消息出现在屏幕上。

# .net - 用于密码的 Rfc2898DeriveBytes 与 Sha2 哈希生成

> ID：13393698
> 
> 赞同：3
> 
> 时间：2012-11-15T08:18:29.037
> 
> 标签：.net, security, passwords

我最近知道使用 SHA256 为加盐密码生成密码哈希。在阅读了一些关于加盐密码和安全性的内容后，我看到了 .NET 中`rfc2898derivebytes`的`passwordderivebytes`类。使用`rfc2898derivebytes`类比通常的散列方法（生成盐，生成盐密码，都存储在数据库中）有什么优势吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T10:38:12.710

在现代硬件上可以极快地生成标准哈希，例如 SHA256。

这通常被认为是一件好事，但也有一个缺点：试图破解您密码的坏人也可以极快地生成这些哈希值，这意味着他们可以使用蛮力相对容易地发现您的密码。

[bcrypt](http://en.wikipedia.org/wiki/Bcrypt)和[PBKDF2](http://en.wikipedia.org/wiki/PBKDF2) (aka [`Rfc2898DeriveBytes`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx))等密钥派生算法比标准哈希算法*慢得多。*他们在内部使用标准哈希算法——在这种情况下为 SHA1——`Rfc2898DeriveBytes`但他们迭代数千次以生成派生密钥。

因此，尽管您的机器需要做更多的工作来使用迭代密钥派生算法生成“哈希”，但试图破解您密码的坏人也必须做更多的工作。这是一件好事。

该类`Rfc2898DeriveBytes`允许您[指定要使用的迭代次数](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.iterationcount.aspx)（我认为默认值为 1,000）。您使用的迭代次数越多，攻击者就越难使用暴力破解您的密码。

# solrnet - 我们如何更改标准查询处理程序

> ID：13393700
> 
> 赞同：1
> 
> 时间：2012-11-15T08:18:49.620
> 
> 标签：solrnet

我正在使用 solrnet 我创建了一个新的处理程序，并希望将标准查询处理程序“select”更改为“new”，而不使用任何额外的参数，如“qt”或 defType。

**目前** “http://localhost:8080/solr/select?q= *:* ”

**想要** “http://localhost:8080/solr/new?q= *:* ”

请告诉我这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T12:50:43.677

[SolrNet Google Groups](https://groups.google.com/forum/?fromgroups=#!forum/solrnet)中 SolrQueryExecutor中[更改处理程序端点的](https://groups.google.com/forum/?fromgroups=#!searchin/solrnet/handler/solrnet/Kqxn68pU0uo/uG50WSxu_swJ)帖子指出，为了做到这一点，您需要按照所述修改 SolrQueryExecutor：

> **问题：**在我们的 Solr 实例上，我们已将搜索端点从“/select”更改为“/search”。我在 SolrQueryExecuter 中看到有一个 Handler 属性，它只返回“/select”的 DefaultHandler。有没有办法改变它以使用我的端点？
> 
> **答：**没错，您需要在 SolrQueryExecuter 中更改该属性。你如何做到这一点取决于你的 IoC 容器。例如，使用内置容器，您将 Remove() IsolrQueryExecuter 并添加您自己的具有更改的处理程序属性。这是一件非常罕见的事情，通常我只是将不同的请求处理程序设置为不是端点而是作为常规名称，然后您可以使用 qt 参数来选择一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T01:43:07.913

如果您只想调用不同的请求处理程序，您可以获取 IsolrQueryExecuter 的实例并相应地设置处理程序。无需用具体的装饰器替换内置的 SolrQueryExecuter。

```
Startup.Init<T>(new SolrConnection("http://localhost:8080/solr")),

var executor = ServiceLocator.Current.GetInstance<ISolrQueryExecuter<T>>() as SolrQueryExecuter<T>;
executor.Handler = "/new"; 
```

顺便说一句，您的网址似乎缺少集合的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-10-29T18:17:44.993

使用最新版本的 SolrNet（我将它与 .net 4.6 一起使用）。在 QueryOptions 中定义一个新的 RequestHandlerParameters，如下所示：

```
using CommonServiceLocator;
using SolrNet;
using SolrNet.Commands.Parameters;

Startup.Init<MwDoc>("http://localhost:8983/solr/mycore");
var solr = ServiceLocator.Current.GetInstance<ISolrOperations<MyClass>>();

QueryOptions options = new QueryOptions()
            {
                RequestHandler = new RequestHandlerParameters("/new"),
                // define your other Options here
            };
solr.Query("keyword to search", options); 
```

# sql - sql 如何获取一个数字并显示它 1 of 2, 2 of 2

> ID：13393711
> 
> 赞同：-2
> 
> 时间：2012-11-15T08:19:36.770
> 
> 标签：sql, oracle

在这方面找不到任何东西，或者如果有人可以指导我解决已经提出的问题，那就太好了。

表客户

```
ORDER,      QTY_ORDER  
A1234 ,        5 
```

选择输出

```
ORDER,          QTY_ORDER  
A1234,            1 OF 5  
A1234,            2 OF 5  
A1234,            3 OF 5  
A1234,            4 OF 5  
A1234,            5 OF 5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:29:04.207

第一：`ORDER`用作列名是一个**糟糕**的主意。

（我`order_id`改为使用列名，以使事情变得更容易）

```
with order_rows as (
   select distinct c.order_id, level as lvl, c.qty_order
   from customer c
   connect by level <= c.qty_order
)
select r.order_id, to_char(r.lvl)||' of '||r.qty_order
from order_rows r
order by order_id, lvl; 
```

但这不会非常有效。

SQLFiddle 演示：[http ://sqlfiddle.com/#!4/3cdc1/2](http://sqlfiddle.com/#!4/3cdc1/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:45:31.443

这是适用于任意数量订单的 MS SQL Server 解决方案。我假设 QTY_ORDER 最多 2 个字符。如果需要更多，请增加尺寸`char(2)` 以满足您的需要。

```
声明@counter int; 声明@order varchar(10); 声明@qty int;
声明 @sql nvarchar(max);

选择 @sql = '';
从客户中选择@order = MIN([ORDER])；
而@order 不为空
开始
    SET @counter = 1;
    SELECT @qty = QTY_ORDER FROM Customer WHERE [ORDER] = @order;
    而@counter @order;
结尾

选择 @sql = SUBSTRING(@sql,1, LEN(@sql) - 6);
执行 sp_executesql @sql;

```

输出：

```
订单 QTY_ORDER
----- ---------
A1234 1 的 5
A1234 2 的 5
A1234 3 的 5
A1234 4 的 5
A1234 5 的 5

```

编辑：嗯。没有看到 Oracle 标签。我的错。

# c++ - 使用 Boost 将数据存储到 xml 线程安全的智能解决方案

> ID：13393714
> 
> 赞同：8
> 
> 时间：2012-11-15T08:19:40.623
> 
> 标签：c++, xml, boost, thread-safety

**问题：**

我正在使用**Boost**开发服务器，并且有一个 xml 文件，主线程在初始化时从该文件中加载一些数据。

在执行期间，可能会发生一些更改，应将其存储在 xml 文件中。为此，在名为 Database 的类中实现了函数 store()：

```
Database::store()
{
   boost::mutex::scoped_lock lock(_databaseMutex);  
   //xml file wirting   
} 
```

如果我想存储与*创建类数据库*的主线程不同的*另一个线程*的更改（例如，套接字连接），xml 将失败，因为它似乎是线程不安全的。

 ***可能的解决方案：**

我的想法是在服务器（主线程）中创建一个循环，等待来自其他线程的通知，如下所示：

```
void loopQueue()
{
    boost::mutex::scoped_lock lock(_queueMutex);        // close the lock       
    while(true)
    {
        while (_queuedActions.empty())
        {
            _updateAvailable.wait(lock);
        }           
        getDatabase(param)->store();        //stores database   
        _queuedActions.pop();
    }
} 
```

这样 xml 写入不会崩溃。

**问题**：

*   对于此类问题是否有更有效或更好的解决方案，或者这是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:12:07.137

这一切都取决于主线程在做什么以及程序是如何设计和实现的。

您提出的解决方案可以正常工作，但它只占用一个线程来处理对 xml 文件的写入。

你熟悉`boost::asio`吗？

在任何服务器中，我都会使用`boost::asio`单个线程或线程池调用`ioservice::run`. 对 xml 文件的更新“发布”到 asio 事件循环，并由其线程池中的任何工作线程（即调用 ioserive::run 的线程）分派/执行。这意味着您的系统使用更少的线程，并且它使用的线程能够执行大量异步操作。

注意：`boost::asio::post`用于在 asio 事件循环中调用一个函数，这允许您控制/序列化对 xml 文件的访问

看： [`boost::asio`](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio.html) [`boost::asio::post`](http://www.boost.org/doc/libs/1_42_0/doc/html/boost_asio/reference/io_service/post.html)*

# mysql - 为什么用 varbinary 而不是 varchar

> ID：13393718
> 
> 赞同：31
> 
> 时间：2012-11-15T08:20:14.613
> 
> 标签：mysql, sql, sql-server, database, database-design

请看一下这张表：

[http://www.mediawiki.org/wiki/Manual:Logging_table](http://www.mediawiki.org/wiki/Manual:Logging_table)

如您所见，维基百科使用 varbinary 而不是 varchar ：

```
| log_type      | **varbinary**(32)       | NO   | MUL |                |
| log_action    | **varbinary**(32)       | NO   |     |                |
| log_timestamp | **binary**(14)          | NO   | MUL | 19700101000000 |
| log_user      | int(10) unsigned        | NO   | MUL | 0              |  
| log_user_text | **varbinary**(255)      |      |     |                | 
```

所有这些信息都是文本，那么为什么将它们保存为二进制呢？

他们对所有桌子都这样做。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-15T12:20:01.033

[Mediawiki 在2011 年初](https://phabricator.wikimedia.org/rSVN80547)从 varchar 更改为 varbinary ：

> 对 varchar 的战争。将所有出现的 varchar(N) 和 varchar(N) 二进制更改为 varbinary(N)。varchars 在具有某些配置的 MySQL 数据库上导致问题（“无效的排序规则组合”错误），最明显的是默认的 MySQL 配置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T08:55:23.057

在 MSSQL 中：

我认为最大的区别仅在于`nvarchar`和之间`varbinary`。

因为`nvarchar`每个字符存储 2 个字节而不是 1 个字节。

`varchar`与`varbinary`：来自 MSDN：

> 存储大小是输入数据的实际长度 + 2 个字节”。
> 
> 这里的区别是通过 varbinary*输入的数据长度可以是 0 字节。*

这是一个小例子：

```
CREATE TABLE Test (textData varchar(255), binaryData varbinary(255))

INSERT INTO Test 
VALUES('This is an example.', CONVERT(varbinary(255),'This is an example.',0))
INSERT INTO Test 
VALUES('ÜŰÚÁÉÍä', CONVERT(varbinary(255),'ÜŰÚÁÉÍä',0)) 
```

您可以在这里使用的是[DATALENGTH](http://msdn.microsoft.com/en-us/library/ms173486.aspx)函数：

```
SELECT datalength(TextData), datalength(binaryData) FROM test 
```

结果是 19 - 19 和 7 - 7

所以在大小上它们是相同的，但还有另一个区别。如果您检查列规范，您会看到 varbinary（当然）没有排序规则和字符集，因此它可以帮助轻松使用来自不同类型编码和字符集的值。

```
SELECT 
  *
FROM   
  INFORMATION_SCHEMA.COLUMNS 
WHERE   
  TABLE_NAME = 'Test' 
ORDER BY 
  ORDINAL_POSITION ASC; 
```

# ruby - Ruby - 如何使用 open-uri 获取文件的名称？

> ID：13393725
> 
> 赞同：8
> 
> 时间：2012-11-15T08:21:22.300
> 
> 标签：ruby, http, url, uri, open-uri

我想通过这种方式下载音乐文件：

```
require 'open-uri'

source_url = "http://soundcloud.com/stereo-foo/cohete-amigo/download"

attachment_file = "test.wav"

open(attachment_file, "wb") do |file|  
  file.print open(source_url).read
end 
```

在该示例中，我想将“Test.wav”更改为真实文件名（例如 JDownloader 程序）。

**编辑**：我不是指临时文件，我指的是存储在网络中的文件，比如 Jdownloader 得到：“Cohete Amigo - Stereo Foo.wav”

谢谢你的阅读

更新：

我试过这个来存储名称：

```
attachment_file = File.basename(open(source_url)) 
```

我认为这没有意义，但我不知道该怎么做，对不起。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-15T09:05:01.013

文件名存储在名为`Content-Disposition`. 然而，解码这个字段可能有点棘手。例如，请参阅此处的一些讨论：

[如何在 HTTP 中对 Content-Disposition 标头的文件名参数进行编码？](https://stackoverflow.com/questions/93551/how-to-encode-the-filename-parameter-of-content-disposition-header-in-http)

因为您可以通过返回类`open-uri`的访问器访问所有头字段：[`meta`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI/Meta.html)`File`

```
f = open('http://soundcloud.com/stereo-foo/cohete-amigo/download')
f.meta['content-disposition']
=> "attachment;filename=\"Stereo Foo - Cohete Amigo.wav\"" 
```

所以为了解码类似的东西，你可以这样做：

```
cd = f.meta['content-disposition'].
filename = cd.match(/filename=(\"?)(.+)\1/)[2]
=> "Stereo Foo - Cohete Amigo.wav" 
```

它适用于您的特定情况，如果引号`"`不存在，它也适用。但是在像 UTF-8 文件名这样更复杂的内容处理情况下，您可能会遇到一些麻烦。但不确定 UTF-8 的使用频率，甚至 soundcloud 是否曾经使用过 UTF-8。所以也许你不需要担心（未经证实或测试）。

您还可以使用更高级的网络爬虫框架，例如[`Mechanize`](http://mechanize.rubyforge.org/Mechanize/File.html)，并相信它会为您进行解码：

```
require 'mechanize'

agent = Mechanize.new
file = agent.get('http://soundcloud.com/stereo-foo/cohete-amigo/download')
file.filename
=> "Stereo_Foo_-_Cohete_Amigo.wav" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T14:08:10.393

`File.basename(open(source_url))`不起作用，因为`open(source_url)`返回某种 I/O 句柄，而不是`File.basename`期望的字符串。

```
File.basename(source_url) 
```

将有更好的工作机会，除非 URL 使用某种`path/to/service/with/parameters/in/line/like/this`类型编码。

不过，Ruby 的 URI 库有一些有用的工具可以提供帮助。就像是：

```
File.basename(URI.parse(source_url).path) 
```

将是一个起点。例如：

```
require 'uri'

File.basename(URI.parse('http://www.example.com/path/to/file/index.html').path
# => "index.html" 
```

和：

```
File.basename(URI.parse('http://www.example.com/path/to/file/index.html?foo=bar').path)
# => "index.html" 
```

* * *

> 你知道我是否也可以检索文件大小以及如何？

在本地测试 HTTP 内容的一个好方法是从命令行运行[`gem server`](http://docs.rubygems.org/read/chapter/18)，然后让 gems 启动一个小型 Web 服务器来获取它的文档：

```
require 'open-uri'

html_doc = open('http://0.0.0.0:8808/') do |io|
  puts io.size
  io.read
end

puts html_doc.size

# => 114350
# => 114350 
```

当您通过 OpenURI 的命令使用块时[`open`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI/OpenRead.html#method-i-open)，它使您可以访问块变量中有关连接的大量信息，该变量是[`Tempfile`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/tempfile/rdoc/Tempfile.html)类的一个实例。因此，您可以使用`size`.

这对于小文件来说是可以的，但是如果您要拉入一个大文件，您可能需要使用 Net::HTTP 进行调查以发送[`head`](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-i-head)请求，其中*可能*包括大小。我说*可能*，因为有时服务器不知道会返回多少，在动态内容的情况下，或者内容被 CGI 或不费心说的子服务返回的情况下。

使用“head”请求的优点是服务器不返回整个内容，只返回标头。因此，在过去，我使用`head`, 来提出请求，以查看是否可以获得所需的数据。如果没有，我将被迫使用正常的`get`.

# ruby-on-rails-3 - Rails 应用程序中的 Rack::Deflater 和 gzip

> ID：13393729
> 
> 赞同：0
> 
> 时间：2012-11-15T08:21:32.177
> 
> 标签：ruby-on-rails-3, gzip, rack, deflate

我添加`use Rack::Deflater`到 config.ru 以尝试提供 gzip 压缩的 css 和 js。

但是当我加载页面时，我仍然看到提供了 css 和 js 而不是 css.gz

我应该看到 css.gz 还是 js.gz？还是我错过了什么

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T13:59:52.917

这是正确的行为。检查您的 HTTP 标头以查看 gzip 压缩是否确实有效：

```
curl -I -H "Accept-Encoding: gzip,deflate" <url> 
```

`Content-Encoding: gzip`如果启用了 gzip 压缩，这应该返回类似的东西。

您还可以使用小写字母来查看压缩输出`-i`。除了 curl，您还可以使用 WebKit 开发人员工具（或类似的工具）来检查这一点。

# java - 嵌入式 Java SE 服务器中的 Xsd 位置

> ID：13393731
> 
> 赞同：0
> 
> 时间：2012-11-15T08:21:43.470
> 
> 标签：java, soap, jetty, jax-ws, embedded-jetty

我将 Java SE 6 中的内置服务器用于 SOAP 服务。我有一个带有 XSD 的 WSDL。

我的代码：

```
Endpoint.publish ("http://localhost:9999/event-ws/wsdl", new SoapImpl ()); 
```

但是当我在 SOAP UI 中打开这个 WSDL 时，它说找不到 XSD ( `localhost:9999/event-ws/test.xsd`)：服务器返回 404。

XSD 和 WSDL 一起在一个文件夹中。

### 编辑1：

来自本地文件的 wsdl：

```
<wsdl:types>
<xsd:schema targetNamespace="http://localhost/extern/">
  <xsd:import schemaLocation="test.xsd"
    namespace="http://localhost/extern/event" />
  <xsd:element name="getAccountChangeTaskEvents">
    .... 
```

我使用 wsimport 从 wsdl（和 xsd）生成了一个接口并编写了实现。

### 编辑2：

来自浏览器的 wsdl：

```
<wsdl:types>
<xsd:schema targetNamespace="http://localhost/extern/">
<xsd:import schemaLocation="test.xsd" namespace="http://localhost/extern/event"/>
<xsd:element name="getAccountChangeTaskEvents">
<xsd:complexType>
   .... 
```

### 编辑3

但是 Web 服务已成功部署，我可以使用它。

# python - 无法让python替换正则表达式工作

> ID：13393732
> 
> 赞同：0
> 
> 时间：2012-11-15T08:21:43.880
> 
> 标签：python, regex, replace

无法使代码正常工作，以下代码应替换 = 之后和之前的内容

用户=“/静默测试=de”；

```
#!/usr/bin/python
import re
import fileinput

langids = ["de","uk","us","dk"]

for lang in langids:
 for line in fileinput.FileInput("C:\Users\HS\Desktop\sps_r2850\Test.txt",inplace=1):
    if re.match(".*user = \"[a-zA-Z/_= ]*\";.*", line):
        line = ("user = \"/silent test=_%s\";\n" % lang)
    print line, 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:31:08.257

使用更改语言`re.sub`：

```
import re

# no value set (or any doesn't matter)
line='user = "/silent test=";'

# values to insert 
langids = ["de","uk","us","dk"]

for lang in langids: 
     print re.sub('(.*=)(.*)(".*)',r'\1'+lang+r'\3',line)

# output
>>> user = "/silent test=de";
>>> user = "/silent test=uk";
>>> user = "/silent test=us";
>>> user = "/silent test=dk"; 
```

# python - 多维数组的行列式

> ID：13393733
> 
> 赞同：11
> 
> 时间：2012-11-15T08:21:47.447
> 
> 标签：python, numpy, multidimensional-array

我正在尝试计算 numpy 数组 M 的行列式，其中 np.shape(M) = (N, L, L) 类似于：

```
import numpy as np

M = np.random.rand(1000*10*10).reshape(1000, 10, 10)
dm = np.zeros(1000)
for _ in xrange(len(dm)):
    dm[_] = np.linalg.det(M[_]) 
```

有没有不循环的方法？“N”比“L”大几个数量级。我想到了类似的东西：

```
np.apply_over_axes(np.linalg.det(M), axis=0) 
```

有没有更快的方法来做我想做的事？我猜循环开销是一个性能瓶颈，因为小矩阵的行列式是一个相对便宜的操作（或者我错了吗？）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T12:54:15.013

您需要修改`np.linalg.det`以获得速度。这个想法是`det()`一个 Python 函数，它首先进行大量检查，然后调用 fortran 例程，并进行一些数组计算以获得结果。

这是来自 numpy 的代码：

```
def slogdet(a):
    a = asarray(a)
    _assertRank2(a)
    _assertSquareness(a)
    t, result_t = _commonType(a)
    a = _fastCopyAndTranspose(t, a)
    a = _to_native_byte_order(a)
    n = a.shape[0]
    if isComplexType(t):
        lapack_routine = lapack_lite.zgetrf
    else:
        lapack_routine = lapack_lite.dgetrf
    pivots = zeros((n,), fortran_int)
    results = lapack_routine(n, n, a, n, pivots, 0)
    info = results['info']
    if (info < 0):
        raise TypeError, "Illegal input to Fortran routine"
    elif (info > 0):
        return (t(0.0), _realType(t)(-Inf))
    sign = 1\. - 2\. * (add.reduce(pivots != arange(1, n + 1)) % 2)
    d = diagonal(a)
    absd = absolute(d)
    sign *= multiply.reduce(d / absd)
    log(absd, absd)
    logdet = add.reduce(absd, axis=-1)
    return sign, logdet

def det(a):
    sign, logdet = slogdet(a)
    return sign * exp(logdet) 
```

为了加速这个函数，你可以省略检查（保持输入正确成为你的责任），并将 fortran 结果收集到一个数组中，并在没有 for 循环的情况下对所有小数组进行最终计算。

这是我的结果：

```
import numpy as np
from numpy.core import intc
from numpy.linalg import lapack_lite

N = 1000
M = np.random.rand(N*10*10).reshape(N, 10, 10)

def dets(a):
    length = a.shape[0]
    dm = np.zeros(length)
    for i in xrange(length):
        dm[i] = np.linalg.det(M[i])
    return dm

def dets_fast(a):
    m = a.shape[0]
    n = a.shape[1]
    lapack_routine = lapack_lite.dgetrf
    pivots = np.zeros((m, n), intc)
    flags = np.arange(1, n + 1).reshape(1, -1)
    for i in xrange(m):
        tmp = a[i]
        lapack_routine(n, n, tmp, n, pivots[i], 0)
    sign = 1\. - 2\. * (np.add.reduce(pivots != flags, axis=1) % 2)
    idx = np.arange(n)
    d = a[:, idx, idx]
    absd = np.absolute(d)
    sign *= np.multiply.reduce(d / absd, axis=1)
    np.log(absd, absd)
    logdet = np.add.reduce(absd, axis=-1)
    return sign * np.exp(logdet)

print np.allclose(dets(M), dets_fast(M.copy())) 
```

速度是：

```
timeit dets(M)
10 loops, best of 3: 159 ms per loop

timeit dets_fast(M)
100 loops, best of 3: 10.7 ms per loop 
```

因此，通过这样做，您可以将速度提高 15 倍。这是一个没有任何编译代码的好结果。

**注意：我省略了 fortran 例程的错误检查。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T12:22:56.660

我无法让 apply_over_axes 工作，因为我认为这是一个 3D 数组。无论如何，分析代码表明程序在循环中花费的时间很少，

```
import cProfile
import pstats
N=10000
M = np.random.rand(N*10*10).reshape(N, 10, 10)
def f(M):
    dm = np.zeros(N)
    for _ in xrange(len(dm)):
        dm[_] = np.linalg.det(M[_])
    return dm
cProfile.run('f(M)','foo')
p = pstats.Stats('foo')
res = p.sort_stats('cumulative').print_stats(10) 
```

结果是“0.955 秒”的运行时间，在 linalg.py:1642(det) 中花费了 0.930 秒的累积时间。

如果我对 2x2 矩阵执行相同的测试，我会得到 0.844 秒的总时间，以及 linalg.py:1642(det) 中的 0.821 秒，尽管矩阵很小。然后，似乎该`det()`函数对小矩阵有很大的开销。

使用 30x30 进行操作，总时间为 1.198 秒，时间`det()`为 1.172。

对于 70x70，总时间为 3.122，时间为 3.094，`det()`循环中的时间不到 1%。

看来无论如何，优化python循环都不值得。

# javascript - Javascript 开关盒？

> ID：13393749
> 
> 赞同：0
> 
> 时间：2012-11-15T08:23:16.403
> 
> 标签：javascript, switch-statement

我有以下代码：

```
function SetStartDateIfNull(date, range_id) {
if (date || isEmpty(date)) {
    switch (range_id) {
        case 0:
            date = date.getDate() - 1;
            break;
        case 1:
            date = date.getDate() - 30;
            break;
        case 2:
            date = date.getMonth() - 6;
            break;
        case 3:
            date = date.getYear() - 1;
            break;
        case 4:
            date = date.getYear() - 15;
            break;
    } //end switch
} //end if
return date;
} //end SetStartDateIfNull 
```

如果日期为空，我的意图是设置日期。我调试了代码。“如果”语句正在工作。如果日期为空，则整个 if 块。但它跳过了开关块。在调试中，`range_id = 0;`为什么`date = "";`它会跳过所有开关块？

更新

此代码正在运行。

```
function SetEndDateIfNull(date) {
    if (date || isEmpty(date)) {
        date = new Date();
    }
    return date;
} //end SetDateIfNull 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:32:44.540

很奇怪的代码。getDate、getMonth 和 getYear 方法返回整数值；但是对于使用此方法运行的日期必须是对象。我认为您的代码进入 switch 然后生成错误或异常，因为 date 为 NULL 并且不能调用任何方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:33:48.907

在您的函数中，您正在检查日期是否为空，但在您的情况下，您试图从未定义的变量中获取日期。

```
function SetStartDateIfNull(date, range_id) {
    if (!date || isEmpty(date)) {
        var date = new Date();//date is undefined
        switch (range_id) {
            case 0:
                date = date.getDate() - 1;
                break;
            case 1:
                date = date.getDate() - 30;
                break;
            case 2:
                date = date.getMonth() - 6;
                break;
            case 3:
                date = date.getYear() - 1;
                break;
            case 4:
                date = date.getYear() - 15;
                break;
        } //end switch 
      } //end if
    return date;
    } //end SetStartDateIfNull 
```

## [工作演示](http://jsfiddle.net/q42mp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:28:25.850

看看这条线

```
if (!date || isEmpty(date)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:27:54.370

如果日期为空，您的条件将评估为假。如果日期为空，则`if (date)`返回。`false`不知道你错过了什么。你想做：

```
if (!date || isEmpty(date)) { 
```

# javascript - 使用 jquery 更改 's 中的值

> ID：13393751
> 
> 赞同：-2
> 
> 时间：2012-11-15T08:23:23.453
> 
> 标签：javascript, jquery

我有一个值表。JQuery 是否可以通过单击货币链接来更改具有汇率的单元格中的值？这个静态示例表

```
<table border="1">
    <tr>
      <td class="currency">100</td>
      <td class="currency">200</td>
      <td class="current">now in USD</td>
    </tr>
    <tr>
      <td class="currency">150</td>
      <td class="currency">230</td>
    </tr>
    <tr>
      <td class="currency">400</td>
      <td class="currency">200</td>
    </tr>
    <tr>
      <td class="currency">550</td>
      <td class="currency">2920</td>
    </tr>
  </table>

  <a href="#" class="USD">USD</a>
  <a href="#" class="EUR">EUR</a> 
```

请看[jsfiddle](http://jsfiddle.net/halofourteen/PjPYV/2/)。换句话说，通过点击货币价值必须根据汇率重新计算它们。在我关于 jsfiddle 的示例中，我想了解如何简单地更改值（例如`usd=1` `eur=1.3`）谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:31:49.320

首先，您需要存储原始美元值，以便您可以将它们用作所有汇率的基础。一个`data-x`属性是完美的。

```
$('.currency').each(function() {
    $(this).data('usd-value', $(this).text());
}); 
```

然后，您可以简单地将这个值乘以您需要的任何汇率，再次存储在`data`链接本身的属性中。试试这个：

```
<a href="#" class="exchange USD" data-exchangerate="1">USD</a>
<a href="#" class="exchange EUR" data-exchangerate="1.3">EUR</a>
<a href="#" class="exchange GBP" data-exchangerate="0.63">GBP</a> 
```

```
$(".exchange").click(function() {
    var rate = $(this).data('exchangerate');
    $('.currency').each(function() {
        $(this).text(parseFloat($(this).data('usd-value') * rate));
    });
}); 
```

[**示例小提琴**](http://jsfiddle.net/PjPYV/7/)

请注意，我还添加`GBP`只是为了显示此方法的可扩展性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:40:06.923

你也可以这样做：-

```
var flag = false;
$('.USD').click(function() {
    if (flag)
    {
        $('.currency').each(function() {
            $(this).text(parseFloat($(this).text() / 1.3));
        });
        flag = false;
        $('.current').text("Now in USD");
        $('.EUR').removeAttr("disabled");
    }
});
$('.EUR').click(function() {
    flag = true;
    $('.currency').each(function() {
        $(this).text(parseFloat($(this).text() * 1.3));
    });
    $('.current').text("Now in EUR");
    $(this).attr("disabled", "disabled");
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/PjPYV/14/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:31:23.090

您可以按类选择它们并修改它们：

```
$('.currency').each(function(){
    var eurMultiplier = 1.3;
    var currentValue = parseInt($(this).html());
    var newValue = currentValue * eurMultiplier;
    $(this).html(newValue);
}); 
```

这段代码未经测试，但应该给你一个关于如何做的提示。

# view - 大写查看列数据 - CRM2011

> ID：13393754
> 
> 赞同：0
> 
> 时间：2012-11-15T08:23:37.753
> 
> 标签：view, entity, dynamics-crm-2011

我正在尝试在 crm2011 中自定义实体的视图。该视图包含一个名为 的列`Subject`。要求是我必须自定义此视图，以便主题数据应以大写形式显示。可能吗？如果是这样，请给我一些有用的链接，因为我在这里没有线索。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T13:51:28.310

如果`Subject`始终可以大写，您可以将一些简单的 JavaScript 添加到将其内容大写的字段的更新事件中。

当然，您需要一些方法来遍历并利用已经存在的所有内容。（通过使用 XRM SDK 的命令行应用程序轻松完成）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:06:10.027

这并不是 CRM 开箱即用的支持，但我可以想到两种方法来做到这一点：

1.  创建另一个字段，其中包含主题的副本，但始终为大写，让插件或工作流活动维护它。然后只需在您的视图中显示该列，而不是原始主题列。
2.  您可能能够为检索多条消息添加一个插件，这将在有人查看视图时被触发，然后您可以更改结果（例如主题列的大写） - 我自己没有这样做但是我被告知这是可能的。

# windows-8 - 键盘重复延迟意外打开

> ID：13393757
> 
> 赞同：0
> 
> 时间：2012-11-15T08:23:53.280
> 
> 标签：windows-8, keyboard, delay, keylistener, key-bindings

我对java比较陌生，我正在制作一个涉及用箭头键移动对象的游戏（你按住的时间越长，它走得越快）。

以下是这些动作的代码（我正在使用 keylistener）：

```
public void keyPressed(KeyEvent e) {

    int c = e.getKeyCode();

        if(c == KeyEvent.VK_A||c == KeyEvent.VK_LEFT){
            PacMan.velX -= PacMan.speed;
            PacMan.move = true;
            //PacMan.velY = 0;
            System.out.println("LEFT");
        }
        if(c == KeyEvent.VK_D||c == KeyEvent.VK_RIGHT){
            PacMan.velX += PacMan.speed;
            PacMan.move = true;
            //PacMan.velY = 0;
            System.out.println("RIGHT");
        }
        if(c == KeyEvent.VK_W||c == KeyEvent.VK_UP){
            PacMan.velY -= PacMan.speed;
            PacMan.move = true;
            //PacMan.velX = 0;
            System.out.println("UP");
        }
        if(c == KeyEvent.VK_S||c == KeyEvent.VK_DOWN){
            PacMan.velY += PacMan.speed;
            PacMan.move = true;
            //PacMan.velX = 0;
            System.out.println("DOWN");
        }
        if(c == KeyEvent.VK_ESCAPE){
            if(Main.pause == false){Main.pause = true;Main.move = true;}
            else if (Main.pause == true){Main.pause = false;Main.move = false;}
            System.out.println("Pause");
        }
        if(c == KeyEvent.VK_R){
            Levels.setLevel();
        }
        if(c == KeyEvent.VK_E){
            if(nextLevel){nextLevel = false;
            Levels.setLevel();}
        }

        Main.start = true;  

} 
```

这工作得很好，直到我移到 Windows 8（从 windows xp）。现在每当我按住箭头键时，键盘重复延迟率就会打开。因此，对象将移动 1 步然后暂停，然后开始其他步骤（就像在文本字段中键入时按住字母一样）。

我想为这个游戏关闭键盘重复延迟，我不知道该怎么做。此外，我希望能够一次持有多个钥匙（所以它可以对角线）。

我试图理解 KeyBindings 但在这样做时遇到了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:05:33.743

我不知道如何从代码中更改键盘重复延迟，但您可以做的一件事是在 keydown 事件上开始处理（增加或降低速度）并在 keyupevent 上停止它。这样你就不会依赖键盘速率延迟。

你可以看看 - [http://www.gamedev.net/topic/91523-chang-the-typematic-rate-delay/](http://www.gamedev.net/topic/91523-changing-the-typematic-rate-delay/)

有点不同的问题，但相同的解决方案。

# php - 无法为 MVC 项目重写 url

> ID：13393761
> 
> 赞同：0
> 
> 时间：2012-11-15T08:24:04.113
> 
> 标签：php, apache, .htaccess, url-rewriting

我被困在这里我试过谷歌搜索但找不到解决方案

```
Options +FollowSymLinks
RewriteEngine On

RewriteRule ^index\.php|style.css|img\.png$ - [L]
   # RewriteRule .* index.php [L]
    RewriteRule ^(.*)$ index.php?params=$1 [NC] 
```

当我点击 url`http://localhost/moviestock/home/index` `print_r($_GET)`然后我得到这个输出`Array ( )`，这意味着`$_GET == array()`但我想要 $_GET 这样`$_GET == array('controler'=> 'home', 'action' => 'index' )` 的它类似于`http://localhost/moviestock/index.php?controler=home&action=index`请给我任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:07:03.700

在您的 htaccess 中尝试这些行：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !\.(css|js|png)$
RewriteRule moviestock/([^/])+/([^/])+/?$ moviestock/index.php?controler=$1&action=$2 
```

# c# - 具有参数化单元测试的 .NET 测试框架，每个组合显示红色/绿色？

> ID：13393765
> 
> 赞同：5
> 
> 时间：2012-11-15T08:24:21.903
> 
> 标签：c#, unit-testing, nunit, xunit.net, parameterized-unit-test

[当您有 X 单元测试 * Y 配置时，参数化单元测试](http://en.wikipedia.org/wiki/Unit_testing#Parameterized_Unit_Testing_.28PUT.29)非常有用。

我有**3 个**单元测试，每个测试都必须在**5 个**特定情况下运行。
我使用 xUnit.net 的`Theory`/ `PropertyData` [feature](http://www.tomdupont.net/2012/04/xunit-theory-data-driven-unit-test.html)，效果很好。

**问题：**在 Test Runner UI 中，每个单元测试都有一个绿色/红色符号，表示**3**。
这使得评估进度变得困难：符号为红色，直到所有配置都完美运行。
我想要**15 个**符号，每个单元测试 * 配置一个，以了解哪个特定组合出错了。

xunit.net[尚未实现](http://xunit.codeplex.com/workitem/9789)显示**15 个**符号的功能。

我愿意切换到另一个测试框架只是为了获得这个功能。
**问题：**是否有任何 .NET 测试框架具有此功能？
任何类型的报告都可以（GUI、HTML 等）

![在此处输入图像描述](../Images/0b27f61a92ab6e997899ac2f27dbae67.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T08:28:58.727

您可以使用NUnit 的[`TestCaseAttribute`](http://nunit.org/index.php?p=testCase&r=2.5)or[`TestCaseSourceAttribute`](http://nunit.org/index.php?p=testCaseSource&r=2.5)来指定不同的测试参数。每个测试用例将在测试运行器中显示为单独的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:46:38.610

NUnit 控制台会告诉你哪个测试用例失败了。例子：

```
[TestCase("ABK")]
[TestCase("bgba")]
[TestCase("CBVS")]
[TestCase("DSBH")]
[TestCase("E")]
[TestCase("FJMC")]
[TestCase("HBTV2")]
[TestCase("JFFC1")]
[TestCase("K")]
[TestCase("LBHG")]
[TestCase("MJCM")]
[TestCase("PHJL")]
[TestCase("R")]
[TestCase("TDPP")]
[TestCase("UGV")]
[TestCase("VXHC")]
[TestCase("YFD")]
public void Given_a_main_supplier_categorie_then_it_should_return_a_collection_of_RM_categories(string supplierCategory)
{
     // test code here
     // ....           
} 
```

请参阅随附的屏幕截图。此外，Resharper 对单元测试有很大的支持。

![NUnit 控制台](../Images/def6994590293d6b081931cf79ca8724.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T21:41:24.593

很确定 TeamCity 会分别从 xUnit.net 渲染它们。我认为 TeamBuild 工具在它们进入报告数据时也应该选择它们。

xUnit.net GUI 和控制台运行程序识别*失败*案例的参数。

有什么特别的原因让您觉得展示经过的个别案例有好处吗？（即您是否试图获得可读的报告？）

# python - 包含分号的 POST 在分号后被截断

> ID：13393768
> 
> 赞同：8
> 
> 时间：2012-11-15T08:24:35.397
> 
> 标签：python, google-app-engine, python-2.7, webapp2

如果我有一个 POST 参数

```
d={"data": "<span>hello</span>"} 
```

这是一个 JSON 字符串，它工作正常，并且 request.POST.get('d') 包含完整的字符串。但是，如果我将其更改为

```
d = {"data": "<span>hel;lo</span>"}
print (request.POST.get('d')) #prints '{"data": "<span>hel' 
```

由于某种原因，分号后的任何内容都被切断了。我可以确认这不是 Javascript 这样做的，因为我曾经使用完全相同的 javascript 代码发布到能够检索数据的 PHP API。自从转向 Python 和 webapp2 以来，我遇到了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:51:05.957

运行你的字符串通过`encodeURIComponent()`. 然后对截断的组件进行编码。之后在检索需要解码的数据时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:50:31.293

这取决于`Content-Type`请求的类型。如果内容类型是，`application/x-www-form-urlencoded`那么您需要对参数进行 urlencode。有关详细说明，请参阅第一个答案：[application/x-www-form-urlencoded 或 multipart/form-data?](https://stackoverflow.com/questions/4007969/application-x-www-form-urlencoded-or-multipart-form-data)

# javascript - bb10 webworks : 打电话

> ID：13393771
> 
> 赞同：1
> 
> 时间：2012-11-15T08:25:20.687
> 
> 标签：javascript, html, blackberry-webworks, blackberry-10

从**webworks** (HTML5) 应用程序，使用**BB10**平台，我想**拨打一个电话号码**。

谷歌搜索产生了这些：

*   [https://developer.blackberry.com/html5/api/blackberry.phone.Phone.Call.html](https://developer.blackberry.com/html5/api/blackberry.phone.Phone.Call.html)
*   [https://developer.blackberry.com/html5/api/blackberry.invoke.PhoneArguments.html](https://developer.blackberry.com/html5/api/blackberry.invoke.PhoneArguments.html)

它们不是很有帮助，因为它们基本上是空白的。（它们似乎是存根文章）。

如何做到这一点？

谢谢！

* * *

# 编辑

我在 SO 上发现了另一个关于打开浏览器的问题： [WebWorks: Open Web Browser?](https://stackoverflow.com/questions/6003341/webworks-open-web-browser)

...并且以类似的方式，该文档也似乎是一篇存根文章：

*   [https://developer.blackberry.com/html5/apis/blackberry.invoke.browserarguments.html](https://developer.blackberry.com/html5/apis/blackberry.invoke.browserarguments.html)

如果这种打开浏览器的方法确实有效：

```
var args = new blackberry.invoke.BrowserArguments('http://www.blackberry.com');
blackberry.invoke.invoke(blackberry.invoke.APP_BROWSER, args); 
```

...然后以相同的模式调用 PhoneArguments 应该值得一试：

```
var args = new blackberry.invoke.PhoneArguments (ARG_1, ARG_2, ...);
blackberry.invoke.invoke(blackberry.invoke.APP_XYZ, args); 
```

`ARG_*`但是，我猜不出`APP_XYZ`应该是什么——有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T14:21:42.597

您找到的 API 是 WebWorks API，但专为较旧的 BlackBerry OS（BlackBerry 5、6 和 7）设计。它基于 Java 平台，遗憾的是还不兼容 BlackBerry 10。“电话”API 尚未移植到 BlackBerry 10（为此还为时过早），但支持“电话”方案。当用户单击这些类型的超链接时，系统会提示他们拨打电话。所以你可以有效地创建一个这样的按钮：

```
<a href="tel:555-555-5555">
   <div class="button">This is a button</div>
</a> 
```

这是一个您可以测试的实时示例：

[http://blackberry.github.com/WebWorks-Samples/kitchenSink/html/browser/schemes.html](http://blackberry.github.com/WebWorks-Samples/kitchenSink/html/browser/schemes.html)

**编辑：**

很高兴纠正自己，发现这也可以通过新的调用框架在 BlackBerry 10 上实现：

```
blackberry.invoke.invoke({
   uri: "tel:5555555555"
}, onInvokeSuccess, onInvokeError); 
```

更多关于调用这里：

[https://github.com/blackberry/BB10-WebWorks-Samples/tree/master/invoke](https://github.com/blackberry/BB10-WebWorks-Samples/tree/master/invoke)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:27:49.153

尝试使用 HTML：您也可以使用`<a href="tel:55519112">call</a>`我认为

# c# - 从 C++ 到 C# 的困难编组 DirectX 结构数组

> ID：13393772
> 
> 赞同：7
> 
> 时间：2012-11-15T08:25:22.707
> 
> 标签：c#, c++, marshalling, unmarshalling, sharpdx

**目标**：将 C++（指向？）的结构数组元帅到 C#。

**C++：** [创建顶点声明（）](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174365%28v=vs.85%29.aspx)

```
 HRESULT CreateVertexDeclaration(
     [in]           const D3DVERTEXELEMENT9 *pVertexElements,
     [out, retval]  IDirect3DVertexDeclaration9 **ppDecl
   ); 
```

**C＃：**

我用[它](http://sharpdx.org/documentation/api/t-sharpdx-direct3d9-vertexelement)来定义`D3DVERTEXELEMENT9`结构。SharpDX 是[*直接从 DirectX SDK C++ 标头生成*](http://sharpdx.org/about/)的托管 DirectX 库，因此它应该与 COM 互操作非常兼容。实际上，我已经有 10 个其他钩子完美地工作，但这是第一个带有指向结构数组的指针。

以防 SharpDX 的结构定义不起作用，我也尝试用我自己的定义替换它：

```
[StructLayout(LayoutKind.Sequential, Pack = 1)]
    public class D3DVERTEXELEMENT9
    {
        public short Stream;
        public short Offset;
        public DeclarationType Type;      // Enum
        public DeclarationMethod Method;  // Enum
        public DeclarationUsage Usage;    // Enum
        public byte UsageIndex;
    } 
```

我尝试了以下 C# 方法签名：

注意：`IntPtr devicePointer`作为第一个参数应该不是问题。我有其他 10 个可以成功工作的钩子。

注意：这些是 Direct3D API 挂钩。因此，我的程序正在传递我需要从非托管 C++ 环境编组到托管 C# 环境的数据。

**1：**

`CreateVertexDeclaration(IntPtr devicePointer, D3DVERTEXELEMENT9[] vertexElements, out IntPtr vertexDeclaration)`

结果：数组只有一个元素，但它的值是默认值（没有意义）。这意味着 , `short Stream`, `short Offset`, `Type`, `Method`,`Usage`和`UsageIndex`都是 0（枚举取它们的第一个值）。

**2：**

`CreateVertexDeclaration(IntPtr devicePointer, ref D3DVERTEXELEMENT9[] vertexElements, out IntPtr vertexDeclaration)`

结果：数组本身为空。

**3：**

`CreateVertexDeclaration(IntPtr devicePointer, [In, Out] D3DVERTEXELEMENT9[] vertexElements, out IntPtr vertexDeclaration)`

同 1。没有好处。

**4：**

`CreateVertexDeclaration(IntPtr devicePointer, D3DVERTEXELEMENT9 vertexElements, out IntPtr vertexDeclaration)`

与 1 相同，不会改变任何内容。我得到一个默认结构。如果我打电话也是一样`new D3DVERTEXELEMENT9()`。

**5：**

`CreateVertexDeclaration(IntPtr devicePointer, ref D3DVERTEXELEMENT9 vertexElements, out IntPtr vertexDeclaration)`

我忘记了结果，但它没有工作。我认为它实际上使钩子崩溃了。

**6：**

`CreateVertexDeclaration(IntPtr devicePointer, IntPtr vertexElements, out IntPtr vertexDeclaration)`

我认为这 #6 或 #1/#2 应该是正确的。我可能搞砸了这种方法的实现？

我尝试使用此代码：

```
var vertex = (D3DVERTEXELEMENT9)Marshal.PtrToStructure(vertexElements, typeof(D3DVERTEXELEMENT9)); 
```

但它不起作用！它与#1 相同。我的编组指针结构是一个默认结构，就像我调用`new D3DVERTEXELEMENT9()`.

**7：**

`CreateVertexDeclaration(IntPtr devicePointer, ref IntPtr vertexElements, out IntPtr vertexDeclaration)`

空或零；无效。

* * *

对于方法 #6（使用 IntPtr），我尝试在 Visual Studio 中查看内存区域。接下来的 50 个字节左右都是零。50 个零的字段中可能有一个`2`字节。但从提供给该方法的 IntPtr 开始，几乎是 49 个字节的零。

这不是问题吗？这是否意味着提供的指针已经不正确？所以我认为这意味着我有错误的方法签名。问题是我一直在尝试各种可能的组合，它们要么使程序崩溃，要么给我一个默认数组，就像我调用`new D3DVERTEXELEMENT9()`.

**`pVertexElements`问题：将结构数组从 C++正确编组到 C# 的解决方案是什么，为什么我当前的签名不正确？**

附加说明：在 C++ 中，此特定数组的长度通过[后缀 D3DDECL_END](http://bobobobo.wordpress.com/2009/07/03/usage-field-contains-value-that-is-not-a-member-of-d3ddeclusage/)来定义。我不知道如果没有某种传递的长度参数，我应该如何在 C# 中获取相应的数组长度。

* * *

**其他工作挂钩：**

**C++：**

```
BeginScene(LPDIRECT3DDEVICE9 pDevice)
BeginStateBlock(LPDIRECT3DDEVICE9 pDevice)
Clear(LPDIRECT3DDEVICE9 pDevice, DWORD Count,CONST D3DRECT* pRects,DWORD Flags,D3DCOLOR Color,float Z,DWORD Stencil)
ColorFill(LPDIRECT3DDEVICE9 pDevice, IDirect3DSurface9* pSurface,CONST RECT* pRect,D3DCOLOR color)
CreateAdditionalSwapChain(LPDIRECT3DDEVICE9 pDevice, D3DPRESENT_PARAMETERS* pPresentationParameters,IDirect3DSwapChain9** pSwapChain)
CreateCubeTexture(LPDIRECT3DDEVICE9 pDevice, UINT EdgeLength,UINT Levels,DWORD Usage,D3DFORMAT Format,D3DPOOL Pool,IDirect3DCubeTexture9** ppCubeTexture,HANDLE* pSharedHandle) 
```

...

**C＃：**

注意：我为所有这些代表使用 SharpDX 枚举和结构，它们工作正常。它们也都以`IntPtr devicePointer`.

```
BeginSceneDelegate(IntPtr devicePointer);
BeginStateBlocKDelegate(IntPtr devicePointer);
ClearDelegate(IntPtr devicePointer, int count, IntPtr rects, ClearFlags flags, ColorBGRA color, float z, int stencil);
ColorFillDelegate(IntPtr devicePointer, IntPtr surface, IntPtr rect, ColorBGRA color);
CreateAdditionalSwapChainDelegate(IntPtr devicePointer, [In, Out] PresentParameters presentParameters, out SwapChain swapChain);
CreateCubeTextureDelegate(IntPtr devicePointer, int edgeLength, int levels, Usage usage, Format format, Pool pool, out IntPtr cubeTexture, IntPtr sharedHandle);
... 
```

其他钩子传递参数的日志：

```
DLL injection suceeded.
Setting up Direct3D 9 hooks...
Activating Direct3D 9 hooks...
CreateDepthStencilSurface(IntPtr devicePointer: 147414976, Int32 width: 1346, Int32 height: 827, Format format: D24S8, MultisampleType multiSampleType: None, Int32 multiSampleQuality: 0, Boolean discard: False, IntPtr& surface: (out), IntPtr sharedHandle: 0)
CreateDepthStencilSurface(IntPtr devicePointer: 147414976, Int32 width: 1346, Int32 height: 827, Format format: D24S8, MultisampleType multiSampleType: None, Int32 multiSampleQuality: 0, Boolean discard: False, IntPtr& surface: (out), IntPtr sharedHandle: 0)
Clear(IntPtr devicePointer: 147414976, Int32 count: 0, IntPtr rects: (Empty), ClearFlags flags: Target, ColorBGRA color: A:0 R:0 G:0 B:0, Single z: 1, Int32 stencil: 0)
Clear(IntPtr devicePointer: 147414976, Int32 count: 0, IntPtr rects: (Empty), ClearFlags flags: Target, ColorBGRA color: A:0 R:0 G:0 B:0, Single z: 1, Int32 stencil: 0)
BeginScene(IntPtr devicePointer: 147414976)
Clear(IntPtr devicePointer: 147414976, Int32 count: 0, IntPtr rects: (Empty), ClearFlags flags: Target, ColorBGRA color: A:0 R:0 G:0 B:0, Single z: 1, Int32 stencil: 0)
Clear(IntPtr devicePointer: 147414976, Int32 count: 0, IntPtr rects: (Empty), ClearFlags flags: Target, ColorBGRA color: A:0 R:0 G:0 B:0, Single z: 1, Int32 stencil: 0)
Clear(IntPtr devicePointer: 147414976, Int32 count: 0, IntPtr rects: (Empty), ClearFlags flags: ZBuffer, ColorBGRA color: A:0 R:0 G:0 B:0, Single z: 1, Int32 stencil: 0)
BeginScene(IntPtr devicePointer: 147414976) 
```

与此最相似的方法签名`CreateVertexDeclaration()`似乎是`Clear()`. 这是我的实现`Clear()`：

```
private Result Clear(IntPtr devicePointer, int count, IntPtr rects, ClearFlags flags, ColorBGRA color, float z, int stencil)
        {
            try
            {
                var structSize = Marshal.SizeOf(typeof (Rectangle));
                var structs = new Rectangle[count];
                for (int i = 0; i < count; i++)
                {
                    structs[i] = (Rectangle) Marshal.PtrToStructure(rects, typeof (Rectangle));
                }
                // Seems to work fine, not sure why it doesn't work for CreateVertexDeclaration

                var rectangles = structs;
                Log.LogMethodSignatureTypesAndValues(devicePointer, count, rectangles.PrintTypesNamesValues(), flags,
                                                     color, z, stencil);
                GetOrCreateDevice(devicePointer);
                if (rectangles.Length == 0)
                    Device.Clear(flags, color, z, stencil);
                else
                    Device.Clear(flags, color, z, stencil, rectangles);
            }
            catch (Exception ex)
            {
                Log.Warn(ex.ToString());
            }

            return Result.Ok;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T00:53:46.223

首先，SharpDX 中的声明使用 Pack = 2（而不是 Pack = 1）：

```
    [StructLayout(LayoutKind.Sequential, Pack = 2)]
    公共部分结构顶点元素{  
     ...
    }

```

此外，如果您想确定 marshal，请尽可能使用 unsafe，而不是 Marshal.StructureToPtr 或任何其他 marshal 方法（当结构直接映射到 C# 等效项时）。您将避免 Marshal 性能问题，并且您将确定内存布局（假设该结构已在 c# 中正确声明）

```
public unsafe static void CreateVertexDeclaration(IntPtr devicePointer, IntPtr vertexElementsPtr, out IntPtr vertexDeclaration)
{
    var vertexElements = (VertexElement*)vertexElementsPtr;

    // 访问所有 VertexElement（最后一个元素由 d3d9types.h 中的 Cmacro D3DDECL_END() 指定）
    ...
}

```

# java - 无效的记住我令牌（系列/令牌）不匹配。暗示先前的 cookie 盗窃攻击

> ID：13393774
> 
> 赞同：4
> 
> 时间：2012-11-15T08:25:39.127
> 
> 标签：java, spring, security, spring-security, remember-me

```
org.springframework.security.web.authentication.rememberme.CookieTheftException: Invalid remember-me token (Series/token) mismatch. Implies previous cookie theft attack.
    at org.springframework.security.web.authentication.rememberme.PersistentTokenBasedRememberMeServices.processAutoLoginCookie(PersistentTokenBasedRememberMeServices.java:102)
    at org.springframework.security.web.authentication.rememberme.AbstractRememberMeServices.autoLogin(AbstractRememberMeServices.java:115) 
```

我注意到的是该`processAutoLoginCookie`方法被调用了两次。方法本身的行为似乎是正确的，例如，更新数据库中的令牌和更新客户端中的 cookie。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:22:37.577

在等待有人发布这个问题的答案时，我想到了一个更好的解决方案。默认情况下，PersistentTokenBasedRememberMeServices.processAutoLoginCookie() 会为每个请求更新令牌。我对此的解决方案是覆盖 processAutoLoginCookie() 的行为并删除 cookie 部分的更新。这解决了 cookietheft 异常，但这会给攻击者打开一个安全漏洞，因为 cookie 不会针对每个请求进行更新。如果攻击者能够窃取 cookie，他就可以使用该 cookie 访问受保护的站点。为了防止这种情况发生，我正在考虑添加一个 IP 地址作为 cookie 的一部分，如果 cookie 来自会话的所有者，则验证每个请求。我还没有实现 IP 验证，但对我来说这是解决这个问题的更好方法。

我希望这也对你们中的一些人有同样的问题有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-16T06:13:26.763

修改您的 web.xml，在错误页面部分，为 org.springframework.security.web.authentication.rememberme.CookieTheftException 添加位置（例如 /signin）

# java - 应用程序引擎 Java：对两个数组求和 - 如何提高性能？

> ID：13393779
> 
> 赞同：2
> 
> 时间：2012-11-15T08:26:16.807
> 
> 标签：java, arrays, performance, google-app-engine

我在 App Engine java 中有一个函数，我在其中比较存储在 int 数组中的两个模式。

下面是代码：

```
public static int patternMatch(int [] pattern1, int [] pattern2, int range) {

    int max = range * pattern1.length;

    int match = (pattern1.length - pattern2.length) * range;

    for(int i = 0; i < pattern2.length; i++) {
        match += Math.abs(pattern1[i] - pattern2[i]);
    }

    return (max - match) * 100 / max;
} 
```

关于开发服务器和应用引擎上的部署之间的此功能的性能，我面临着非常奇怪的问题，如下所示：

1.  此函数在循环中调用，目的是寻找最佳匹配。
2.  单次迭代的性能至关重要，因为有很多迭代。
3.  如果我在这段代码中没有任何逻辑并直接返回任何整数，我的整个代码平均需要 100 毫秒才能完成。
4.  上面的代码需要 200 - 600 毫秒之间的任何时间。
5.  在开发服务器上，如果我替换“int match = (pattern1.length - pattern2.length) * range;” 通过“int match = Math.abs(pattern1.length - pattern2.length) * range;”，不知何故，性能提高了，仅将时间缩短到 200 - 300 ms。对部署服务器没有影响。
6.  如果我删除“Math.abs”，性能会提高，使平均值达到 150 毫秒。
7.  我尝试用位运算替换 Math.abs 以得出绝对值。我在开发服务器上看到了巨大的性能提升约 160 毫秒。在部署服务器上，它使事情变得更糟约 700 毫秒。

我想在这里了解的是： 1\. 开发服务器（Windows 7/eclipse/JDK6）和部署服务器在性能调整方面的表现为何以及有何不同？2\. 有没有更好的匹配算法？

我很难过。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:23:38.600

这是一个很好的问题。我能想到的一个问题是，一旦部署就无法保证您运行的硬件。在不同的运行中，您可能会在更快/更慢的服务器上运行。我怀疑要对其进行很好的测试，您会希望您的各种代码示例在同一个请求处理程序中运行，以便您知道它们在同一个实例上运行。

# c++ - xprintf 不使用标准输出。它如何仍然在屏幕上打印？

> ID：13393780
> 
> 赞同：3
> 
> 时间：2012-11-15T08:26:29.763
> 
> 标签：c++, c, printf, stdout

对于`C++`工作中的项目，我使用`GLPK`（用 编写的 Gnu 线性编程工具包`C`）。当我在控制台应用程序中使用某些程序时，会从`GLPK`.

现在，在我将所有内容打包到 GUI 中之后，我想使用以前显示的文本。所以我将标准输出和标准错误重定向到文件。（我检查了它`printf("Hallo World");`在我的应用程序中可以正常工作）。

问题是文本形式`GLPK`没有出现在文件中。经过一些研究，我发现使用了该语句`xprintf(...)`。（老实说，我不知道有什么`xprintf`作用以及有什么区别`printf`。）

有人可以解释一下：

1.  在没有标准输出的情况下如何在屏幕上打印文本。
2.  如何将自动生成的输出输出到文件或流或我可以处理的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:21:11.567

> 1.  在没有标准输出的情况下如何在屏幕上打印文本。

您的平均值是默认情况下*恰好*连接到终端`stdout`的输出流。你可以用它做任何可以用流做的事情，包括它到一个文件中。*`reopen()`*

 *就像您可以`fopen()`用来创建另一个写入文件的流一样，您也可以使用它来创建另一个写入终端（`/dev/tty`在 Linux 中）的流。写入该流的输出将出现在您的终端上，尽管没有通过标准输出。

stdout 只是一个方便的默认值，绝不是访问终端的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T10:32:46.340

GLPK 内部使用的`xprintf`（别名`glp_printf`）在正常情况下写入`stdout`（对于最新的 GLPK 版本 4.47）。

有几种方法可以改变 的行为`glp_printf`：

*   使用禁用输出`glp_term_out(GLP_OFF)`
*   使用该函数安装一个钩子，该`glp_term_hook`函数可以将输出重定向到钩子想要的任何地方
*   将输出的副本写入文本文件 - 这可以使用`glp_open_tee`函数进行设置

如果您没有使用上述任何方法，并且仍然无法重定向`stdout`输出，那么您重定向输出的方式可能有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T09:12:18.623

默认情况下，stdout 是缓冲的，因此文本只会在每个新行之后刷新。您的某个库甚至 xprintf 本身可能会改变标准输出的行为。基本上，如果输出不以换行符结尾，则不能保证看到以前的 printf() 输出。

尝试使用：

```
fflush (stdout); 
```

在 xprintf 之后。

fflush 在 stdio.h 中

通常 xprintf 是非分配 printf。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T10:28:10.517

在 GLPK 中，`xprintf`是`_glp_lib_xprintf`（定义在 中`glplib.h`）的宏别名。

`xprintf()`实施于`glplib04.c`. 默认情况下，它会输出到`stdout`（通过`xputc()`同一源文件中的函数）。有多种配置选项可以改变`xputc()`.

您可能想设置一个断点`_glp_lib_xprintf()`并逐步查看发生了什么。*

# r - Lévy 指标实施

> ID：13393782
> 
> 赞同：3
> 
> 时间：2012-11-15T08:26:49.453
> 
> 标签：r, statistics, metric

我想（在 R 中）实现对两条曲线之间的 Lévy 距离的评估。给定两个累积分布，正式定义如下（另见[Wikipedia](http://en.wikipedia.org/wiki/L%C3%A9vy_metric)）：

![图像](../Images/4255dfb0f32eb7d2b9d967fa9836701c.png)

本质上是试图找到可以在两条曲线之间绘制的最大正方形。
我正在处理两个累积值，它们是具有相同域的阶跃函数，因此实现应该比一般情况更容易。
提前致谢。

有没有实现这个指标的库，或者类似的东西。如果没有，您能否建议一些从头开始的提示？

# c# - C# 服务编程问题与启动

> ID：13393786
> 
> 赞同：1
> 
> 时间：2012-11-15T08:27:31.137
> 
> 标签：c#, service

我已经编写了一个服务，并在代码中使用 C# 和适当的服务方法等来启动服务，它作为服务构建和安装，服务启动正常，但是我没有看到正在运行的进程，我也没有'看不到它正在写入它应该作为输出文件写入的日志。我确实注意到，如果我蛮力并自己单击 exe，它会自动启动，但显然这不是预期的行为。任何想法为什么会发生这种情况？我使用 installutil 安装它并以几种方式启动它（services.msc，net start），但它们都没有真正起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:06:59.550

您是否查看过 Windows 事件日志以查看是否收到表明服务已启动的消息？里面有没有错误？如果它说它已启动，并且没有任何错误，则您的服务可能启动正常，但未能执行您想要的操作。

考虑写入事件日志，而不是写入日志文件 - 这是服务的首选行为。Log4Net 可以帮助解决这个问题，但自己编写并不难。

编写服务也很有用，这样它也可以从命令行启动，用于调试目的。同样，您不必完成所有工作，TopShelf 可以提供帮助。

# c# - 互联网上的企业数据

> ID：13393790
> 
> 赞同：2
> 
> 时间：2012-11-15T08:28:01.517
> 
> 标签：c#, .net, security, web-applications

我们的企业项目正在扩大。在其他要求中，来自不同（不受信任）林的用户应该获得访问权限。旧版本的应用程序仅跨越我们的森林。最初，它被实现为 Sharepoint 内部网应用程序。

现在我想知道是否可以考虑将互联网应用程序作为一种选择？我不知道将公司数据放在互联网上是否是个好主意？可以安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:53:12.140

您无法 100% 保护网络上的任何内容。当然，你可以实施 SSL 和各种技术来让它变得更难一些，但是黑客可以进入银行账户，可以渗透大型野兽，如 Playstation 网络、Steam 网络等，所以我非常怀疑你会比他们做得更好。

如果您将某些内容放在网络上，则必须为这种情况做好准备，在某些时候您的数据可能会被盗。如果您那里有关键数据，并且您真的不想与他人共享，那么最好将它们保存在本地。如果您有一些想要分享的数据，请将它们放在网络上。但我会选择不把所有东西都放在互联网上，那是纯粹的自杀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:57:49.253

使用[虚拟专用网络 (VPN)](http://en.wikipedia.org/wiki/Virtual_private_network)从公司网络外部访问 Intranet 应用程序。

# c# - 如何获取自动生成的 ID？

> ID：13393795
> 
> 赞同：0
> 
> 时间：2012-11-15T08:28:16.233
> 
> 标签：c#, sql, database, linq, linq-to-sql

```
System
Language:C#
Database:SQL
IDE:C# Express 2010 
```

我有一个用户对象/类和数据库表。用户有多个地址，我已经定义了地址表，如何添加地址并将其提交到数据库

我为用户创建了一个添加函数（见下文）用户类包含一个列表地址

**用户类**

```
int id
string name
List<Address> adresses 
```

**表用户**

```
id
name
addresses 
```

**表地址**

```
id 
address
user_id (FK) 
```

我在 User 类中有 Add 函数来添加用户对象，我删除了处理代码以使其在 SO 上更清晰。

**我的问题是，如何获取刚刚添加的用户的 id 并将地址添加到数据库中。以及如何在地址表上定义 FK**

```
 class User {

    public static bool Add(User user, UserOptions option = UserOptions.System)
    {
        //Instantiate the  DataClassesDataContext
        var db = DBContext.Create();

        //Make Sure User does not exist
        //returns true if no existing user
        if (Users.validateForAdd(user))
        {
           //Now add
           db.Users.InsertOnSubmit(user);

           //I assume I would get the id of the user just added but not sure how I do that

           db.SubmitChanges();
           return true;
        }

        //Failed to add
        return false;
    } 
```

# 最终解决方案

只是想我会从以下答案和评论中发布最终解决方案。

```
//
// Creating and setting the Objects
//
User user = new User(name="john doe");
EntitySet < Address >  adressList = new EntitySet<Address>();

adressList.Add(new Address("Residential Home");
adressList.Add(new Address("Holiday Home...");

user.address = adressList;

//
//Persisting to the DB
//
var db = new DataContext();
db.Results.InsertOnSubmit(result);
db.SubmitChanges(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:48:44.507

您可以对上述方法 Add 进行一项更改。您可以返回 int 类型，而不是返回 bool。

```
public static int Add(User user, UserOptions option = UserOptions.System)
 //Make Sure User does not exist
 //returns true if no existing user
 if (Users.validateForAdd(user))
 {
    ....
    ....
    //Instead of returning true you can return user.id
    return user.id;
 }
    //Instead of returning false you can return default value -1
    return -1;

} 
```

因此，您可以通过调用 User 类的 Add 方法获取新添加的用户的 id，您可以使用该 id 为用户创建地址列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T12:32:23.960

> 我的问题是，如何获取刚刚添加的用户的 id 并将地址添加到数据库中。

关键是你**不需要它**。在 Linq-2-sql 中，您无需分配具有 id 的外键字段，而是将实体分配给彼此。

所以而不是做

```
somerelated_table.fk_user_id = user.id 
```

你做

```
somerelated_table.user = user 
```

当您调用 SubmitChanges 时，Linq-2-sql 将处理 user.id 的正确分配。另外，作为奖励，这一切都将在一次交易中完成。这就是 linq-2-sql 的美妙之处。

# c - 如何检查双数的分母是否为奇数？

> ID：13393796
> 
> 赞同：0
> 
> 时间：2012-11-15T08:28:20.360
> 
> 标签：c, double, pow

我得到 2 个双数 -`basic`和 `pow`，我必须计算`basic^power`。我的问题是有些情况应该抛出错误 - 比如如果`pow`是一个像奇数/偶数这样的分数并且基本是一个负数 - 例如`basic=(-2)`和`pow=0.75=(3\4)`所以它应该是`(-2)^3=-8`然后`root 4 of -8`意味着错误。那么我怎样才能检测到这种情况呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:40:55.267

从手册页`pow()`：

> pow(x, y) 返回一个 NaN 并引发有限 x < 0 和有限非整数 y 的“无效”浮点异常。

所以检查一下。

# android - 定位视图

> ID：13393802
> 
> 赞同：0
> 
> 时间：2012-11-15T08:28:53.197
> 
> 标签：android, android-layout, subclass

我已经对 View 进行了子类化以创建自定义控件。下面是我尝试设置 x、y、宽度和高度的代码。

但我无法设置 x 和 y 以在屏幕上定位视图。

```
 public class MyAdvertisement extends View{

        public MyAdvertisement(){
            super(null);
            System.out.println("This first");
            this.setBackgroundColor(android.graphics.Color.RED);
            this.setMinimumWidth(500);
            this.setMinimumHeight(100);
        }

        public MyAdvertisement(Context context){
            super(context);
            this.setBackgroundColor(android.graphics.Color.YELLOW);
            this.setMinimumWidth(500);
            this.setMinimumHeight(100);
        }

        public MyAdvertisement(Context context, AttributeSet attrs){
            super(context, attrs);
            this.setBackgroundColor(android.graphics.Color.YELLOW);
            this.setMinimumWidth(500);
            this.setMinimumHeight(50);
            LayoutParams layoutParams=new LayoutParams(500,50);
            layoutParams.setMargins(0, 400,0,0);
            this.setLayoutParams(new LinearLayout.LayoutParams(layoutParams));

        }

        public MyAdvertisement(Context context, AttributeSet attrs, int defStyle){
            super(context, attrs, defStyle);
            this.setBackgroundColor(android.graphics.Color.GREEN);
            this.setMinimumWidth(500);
            this.setMinimumHeight(100);

        }

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    />
    <view
        class="com.rciicustomclass.MyAdvertisement"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/myb"
        android:tag="tag"
         />
</LinearLayout> 
```

我想将视图定位在屏幕底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:34:20.917

我推荐使用RelativeLayout：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <"com.rciicustomclass.MyAdvertisement"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" />

</RelativeLayout> 
```

此外，还有很多其他标签可以定位您的视图，例如居中、alignParentLeft、centerVertical、centerHorizo​​ntal 等。
也可以将它们相对放置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:34:38.763

`android:layout_alignParentBottom="true"`您应该在自定义视图上使用 RelativeLayout 。您可以直接将您的类名作为 XML 元素的名称：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <com.rciicustomclass.MyAdvertisement
        android:id="@+id/myb"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:tag="tag" />

</RelativeLayout> 
```

# google-maps - Ember.js + Google 地图公司地图应用程序具有多个自定义标记

> ID：13393804
> 
> 赞同：2
> 
> 时间：2012-11-15T08:28:57.113
> 
> 标签：google-maps, ember.js

因此，如果最初的问题是 tl;dr，我想我真正需要知道的只是如何转向：

```
App.CompaniesController = Em.ArrayController.extend({
    content: [
        App.Company.create({ markerText: "Bondi Bar", lat: -33.890542, lng: 151.274856, number: 4, iconUrl: "http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red04.png", isOpen: true}),
        App.Company.create({ markerText: "Coogee Beach Grill", lat: -33.923036, lng: 151.259052, number: 5, iconUrl: "http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red05.png", isOpen: false}),
        App.Company.create({ markerText: "Maroubra Smoke Shop", lat: -33.950198, lng: 151.259302, number: 1, iconUrl: "http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red01.png", isOpen: true}),
  ],

  open: function() {
    return this.get('content').filterProperty('isOpen', true);
  }.property('content.@each')

}); 
```

成一个简单的数组：

```
var locations = [
    ['Bondi Bar', -33.890542, 151.274856, 4, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red04.png'],
    ['Maroubra Smoke Shop', -33.950198, 151.259302, 1, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red01.png']]; 
```

或修改：

```
for (var i = 0; i < locations.length; i++) {
    createMarker(new google.maps.LatLng(locations[i][1], locations[i][2]),locations[i][0], locations[i][3], locations[i][4]);
} 
```

迭代 CompaniesController.open 以为每个项目创建一个新的地图标记。

* * *

**原始问题**

我正在尝试在 ember 应用程序中创建一个简单的状态，该状态仅显示谷歌地图上给定区域中当前开放的公司，基于控制器上的 Company.isOpen 过滤计算属性。我想在地图上为每个公司设置自定义标记，点击后显示公司名称和营业时间。

我查看了[https://github.com/samwich/ember-map-demo](https://github.com/samwich/ember-map-demo)（ember + g-maps 演示，当您单击地图时，会添加一个新标记）和[http://jsfiddle.net/kjy112 /pra3K/](http://jsfiddle.net/kjy112/pra3K/)（具有多个位置的 g-maps 演示和来自数组的自定义可点击标记）我知道答案正盯着我看，但我现在很烂。

我在这里有一个 jsfiddle - [http://jsfiddle.net/PVbvK/7/](http://jsfiddle.net/PVbvK/7/) - 我有点卡住了。

首先，我设置了基础知识：

```
App.Router = Ember.Router.extend({
    enableLogging: true,
    root: Ember.Route.extend({
        event: Ember.Route.extend({
            route: '/',
            connectOutlets: function (router) {

                router.get('applicationController').connectOutlet('companies');
            }
        })
    })
  });

App.Company = Em.Object.extend({
    markerText: null,
    lat: null,
    lng: null,
    number: null,
    iconUrl: null,
    isOpen: null

  });

App.CompaniesController = Em.ArrayController.extend({
    content: [
        App.Company.create({ markerText: "Bondi Bar", lat: -33.890542, lng: 151.274856, number: 4, iconUrl: "http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red04.png", isOpen: true}),
        App.Company.create({ markerText: "Coogee Beach Grill", lat: -33.923036, lng: 151.259052, number: 5, iconUrl: "http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red05.png", isOpen: false}),
        App.Company.create({ markerText: "Maroubra Smoke Shop", lat: -33.950198, lng: 151.259302, number: 1, iconUrl: "http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red01.png", isOpen: true}),
  ],

  open: function() {
    return this.get('content').filterProperty('isOpen', true);
  }.property('content.@each')

}); 
```

然后我超级草率地在 CompaniesView 的 didInsertElement 中扔了很多以前的演示来让小提琴工作：

```
App.CompaniesView = Ember.View.extend({
  templateName: 'companies',
  map: null,
  didInsertElement: function () {

    var map = null;
    var markerArray = []; //create a global array to store markers
    var locations = [
    ['Bondi Beach', -33.890542, 151.274856, 4, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red04.png'],
    ['Coogee Beach', -33.923036, 151.259052, 5, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red05.png'],
    ['Cronulla Beach', -34.028249, 151.157507, 3, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red03.png'],
    ['Manly Beach', -33.80010128657071, 151.28747820854187, 2, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red02.png'],
    ['Maroubra Beach', -33.950198, 151.259302, 1, 'http://www.kjftw.com/sandbox/gmap/images/icons/numeric/red01.png']];

    var myOptions = {
        zoom: 10,
        center: new google.maps.LatLng(-33.923036, 151.259052),
        mapTypeControl: true,
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        },
        navigationControl: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(this.$().get(0), myOptions);

    this.set('map', map); //save for future updations
    this.$().css({ width: "600px", height: "600px" });

    for (var i = 0; i < locations.length; i++) {
    createMarker(new google.maps.LatLng(locations[i][1], locations[i][2]),locations[i][0], locations[i][3], locations[i][4]);
    }

    var infowindow = new google.maps.InfoWindow({
        size: new google.maps.Size(150, 50)
    });

    function createMarker(latlng, myTitle, myNum, myIcon) {
        var contentString = myTitle;
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            icon: myIcon,
            zIndex: Math.round(latlng.lat() * -100000) << 5,
            title: myTitle
        });

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(contentString);
            infowindow.open(map, marker);
        });

        markerArray.push(marker); //push local var marker into global array
    }

  }
}); 
```

又快又脏，但我现在是个傻瓜……

那么如何获取 CompaniesController.open 的内容以在谷歌地图上创建自定义标记？如果有人可以伸出援助之手，将不胜感激，干杯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-16T20:57:23.520

这只是从视图中使用你的 controller.open 属性的问题，所以主要是：

```
var locations = this.get('controller.open');
locations.forEach(function(location){
        createMarker(
            new google.maps.LatLng(location.get('lat'), location.get('lng')),
            location.get('markerText'), 
            location.get('number'),
            location.get('iconUrl'));        
}, this); 
```

在这里完成 jsfiddle：http: [//jsfiddle.net/PVbvK/9/](http://jsfiddle.net/PVbvK/9/)

# svn - Subversion (SVN) - 用大文件更新本地目录

> ID：13393807
> 
> 赞同：1
> 
> 时间：2012-11-15T08:29:05.570
> 
> 标签：svn

我想为大量用户管理对大文件（超过 1 GB）的版本控制。他们都在同一个共享环境中工作，我们负担不起他们每个人都“svn 更新”这些大文件作为他们的本地副本。编辑：用户需要经常使用这些大文件。

任何人都可以建议：1.处理此类问题的最佳做法是什么？2\. 有没有办法让用户“svn update”只链接到存储库中的大文件？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:48:52.860

假设您提到的 subversion 存储库名为 repoA，这些大文件存储在一个目录中，路径为`repoA/dirA`.

由于不允许用户更改这些大文件，因此将这些文件移动到不同的 repo 中是合乎逻辑的，例如`repoB/dirA`.

然后你可以签`repoB/dirA`出到你的*共享环境*，比如说`/path/to/repoB/dirA`。

在 repoA 中，只需删除`repoA/dirA`它并将其替换为指向路径的符号链接`/path/to/repoB/dirA`（如果您愿意，也可以使用相对路径）。

由于所有用户都将在同一台机器上签出自己的副本`repoA/dirA`，因此符号链接将是有效的。

# c# - 无法从队列 IBM MQ 7.0 中获取少量消息

> ID：13393815
> 
> 赞同：0
> 
> 时间：2012-11-15T08:29:54.083
> 
> 标签：c#, ibm-mq

我使用 IBM MQ 7.0 来获取和放置消息。我无法从一个队列中获取所有消息。我能够收到少数消息，但很少有人无法获得。我的应用程序试图获得 5 次，我得到错误，原因代码 = 2009 和完成代码 = 2。它发生得非常频繁，我不确定为什么它只发生在少数消息中。如果我再次将这些消息重新处理到队列中，那么它会再次工作。其他队列在同一台服务器上工作正常，只有两个队列出现此错误。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:37:35.300

`2009`是“连接断开”。*在此之前*，您需要查看五次失败（某种描述的 MQGET）的完成代码和原因代码。

一旦你知道了这一点，确定你的问题将是一件简单得多的事情。鉴于您通常从 MQ 获得的良好错误代码，它可能会非常明显:-)

如果您遇到的*第一个*`2009`错误是，IBM 有一篇关于您可能想要查看的最常见原因[的文章。](http://www-01.ibm.com/support/docview.wss?uid=swg21472342)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:00:00.853

该修复仅适用于 WMQ 客户端 v7.0.1.0。您使用的是那个 EXACT 版本吗？其次，根据 APAR，“大于约 32000 字节的消息”。那么您的消息是否大于 32000 字节？

RC of 2009 通常意味着您的频道名称错误。频道名称区分大小写。例如，JAVA.CHL 与 java.chl 不同，也与 Java.Chl 不同。

如果您通过 runmqsc 将通道定义为：

```
define channel(java.chl) CHLTYPE(SVRCONN) TRPTYPE(TCP) 
```

因为您没有在通道名称周围使用引号，所以 MQ 在定义通道名称（即 JAVA.CHL）时会将其大写。因此，最好始终使用 MQ 大写名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T17:46:07.210

升级到 7.0.1.8 后，我的问题得到了解决。

# javascript - 使用 JavaScript / jQuery 提交表单后调用函数

> ID：13393817
> 
> 赞同：6
> 
> 时间：2012-11-15T08:30:01.113
> 
> 标签：javascript, jquery, forms

我想在提交表单后调用一个函数，我看到我们可以在 jQuery 中执行此操作，`.submit(handler function())`但方法描述说，处理程序方法将在提交表单之前执行。我怎样才能真正做到这一点？我应该`setTimeout`在提交表单后使用还是有其他解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T08:34:57.123

```
$("#myFormId").on('submit', function(e) {
    e.preventDefault();
    $.ajax({
        type: $(this).prop('method'),
        url : $(this).prop('action'),
        data: $(this).serialize()
    }).done(function() {
        doYourStuff();
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:34:48.607

您可以使用插件[http://www.malsup.com/jquery/form/#ajaxSubmit并在回调方法](http://www.malsup.com/jquery/form/#ajaxSubmit)**成功**时执行您需要的任何操作

 **```
$(document).ready(function() { 
var options = { 
    target:        '#output2',   // target element(s) to be updated with server response 

    success:       function() {
                   // callback code here
                    }

}; 

// bind to the form's submit event 
$('#myForm2').submit(function() { 
    $(this).ajaxSubmit(options); 

    return false; 
}); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:54:43.333

流动：

1.  window.sessionStorage['submit'] 最初是一个空字符串。
2.  在文本框中键入内容并单击提交按钮后，文本框中的值将保存到 window.sessionStorage['submit']。这意味着 window.sessionStorage['submit'] 不再为空。它包含一个值。
3.  提交表单后页面刷新。
4.  onload 函数将检查 window.sessionStorage['submit'] 中是否有任何内容。如果它不为空，则表示该表单是由用户提交的。然后它再次将 window.sessionStorage['submit'] 重置为空字符串。

它使用所有主要浏览器都支持的会话存储。

```
<html>
<body onload="checkSubmitStatus()">
<form name="text" action="">
<input type="text" id="txtId">
<input type="submit" value="submit" onclick="storeInSession()"/>
</form>

<script type="text/javascript">
function storeInSession(){
    window.sessionStorage['submit'] = document.getElementById('txtId').value;
}

function checkSubmitStatus(){
    if(window.sessionStorage['submit']){
        alert('The form was submitted by '+ window.sessionStorage['submit']);
        window.sessionStorage['submit'] = '';
    }
}
</script>
</body> 
```**

# java - JFileChooser 在 Linux 下不是模态的

> ID：13393821
> 
> 赞同：1
> 
> 时间：2012-11-15T08:30:12.533
> 
> 标签：java, swing, awt, jfilechooser, mixing

我使用 Red Hat 6.3 和 JRE 1.7。

从小程序中打开文件选择器时，它不是模态的。当单击不是文件选择器区域的某个位置时，它会移动到小程序后面并且小程序被冻结，直到您最小化浏览器以关闭它。

一般来说，我在模态对话框中遇到了同样的问题。但是在那里我找到了一种解决方法：[1](https://stackoverflow.com/questions/12635531/model-dialog-opened-from-applet-is-placed-behind-applet-when-changing-browser-ta)。

有没有办法在 Linux 下解决这个问题，或者是否有没有出现这个问题的 Java 版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T01:56:09.317

> Linux下有没有办法解决这个问题

将小程序转换为框架并（假设可以解决问题）使用[Java Web Start 启动](https://stackoverflow.com/tags/java-web-start/info)框架。

但只是检查一下，您在[这个小程序](http://pscode.org/gifanim/#applet)中看到相同的行为吗？它是沙盒的，不使用它`JFileChooser`，但是如果您尝试打开或保存文件，它应该在模式对话框中弹出一个 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:37:18.600

> 当单击不是文件选择器区域的某个位置时，它会移动到小程序后面并且小程序被冻结，直到您最小化浏览器以关闭它。

*   那么结果是正确`JFileChooser`的是Linux下的模态

*   `Swing JComponents``lightweight`然后（导致）他们一直在做`heavyweight AWT Components`

*   必须更改`Applet`为`JApplet`，所有`Components`内部都更改为`JComponents`

*   更多关于[混合重量级和轻量级组件](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)

# php - WP-Commerce 改变从选择到输入的变化？

> ID：13393828
> 
> 赞同：0
> 
> 时间：2012-11-15T08:31:16.650
> 
> 标签：php, html, wordpress, e-commerce

我目前正在尝试让电子商务网站看起来像的大小变化

[http://www.culturekings.com.au/shoppingcart/products/Music-Merch-Inc-%252d-Nwa-Tank-%252d-Black.html](http://www.culturekings.com.au/shoppingcart/products/Music-Merch-Inc-%252d-Nwa-Tank-%252d-Black.html)

我正在使用 WP Commerce，默认情况下，大小变化进入选择字段

```
 <select class="wpsc_select_variation" name="variation[<?php echo wpsc_vargrp_id(); ?>]" id="<?php echo wpsc_vargrp_form_id(); ?>">
                            <?php while (wpsc_have_variations()) : wpsc_the_variation(); ?>
                                <option value="<?php echo wpsc_the_variation_id(); ?>" <?php echo wpsc_the_variation_out_of_stock(); ?>><?php echo wpsc_the_variation_name(); ?></option>
                            <?php endwhile; ?>
                            </select> 
```

我试图将它们从选项字段中删除，但它似乎无法正常工作，我怎样才能在不破坏电子商务功能的情况下做到这一点？

我试图把它改成这个

```
 <label>
                                <input class="sizeBtn" type="radio" value="<?php echo wpsc_the_variation_id(); ?>" name="<?php echo wpsc_the_variation_name(); ?>">
                                <?php echo wpsc_the_variation_name(); ?>
                                <?php //echo wpsc_the_variation_out_of_stock(); ?>
                                </label> 
```

该网站是[http://ownc.co.nz/shop/t-shirts/simply-dope/](http://ownc.co.nz/shop/t-shirts/simply-dope/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:43:34.083

如果你这样尝试怎么样：

```
<?php while (wpsc_have_variations()) : wpsc_the_variation();
    if ( 0 == wpsc_the_variation_id() ) { // That is usually a label and not an actual variation
        continue;
    } ?>
    <label>
        <input class="sizeBtn" type="radio" value="<?php echo wpsc_the_variation_id(); ?>" name="variation[<?php echo wpsc_vargrp_id(); ?>]" <?php echo wpsc_the_variation_out_of_stock(); ?> />
        <?php echo wpsc_the_variation_name(); ?>
    </label>
<?php endwhile; ?> 
```

我猜您正在执行循环，但您只是在第二个代码片段中跳过了它，所以唯一看起来不正确的是输入的名称。

请尝试此代码，删除原始代码（生成选择的代码），然后重试。

# blogger - 在 tw:counturl addthis 插件中处理 <

> ID：13393829
> 
> 赞同：2
> 
> 时间：2012-11-15T08:31:18.507
> 
> 标签：blogger, addthis, blogspot

我有一个 addthis 插件，用于在我的 blogspot 博客中显示推文总数。我以这种方式使用它如果我提到 tw:counturl="my_specific_blogger_url" > 它会显示推文的确切数量。但问题是在这种情况下我只能使用一个链接。要检索我使用的特定博客页面 url `<data:blog.url/>`。但是，如果我以下列方式在 tw:counturl 中使用它：

`tw:counturl="<data:blog.url/>"`它显示为错误，因为 tw:counturl 无法处理“<”标签。有解决办法吗。

错误如下`The value of attribute "tw:counturl" associated with an element type "null" must not contain the '<' character.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T03:23:18.493

好的，我找到了答案。您必须添加一个 javascript 代码来处理它。

```
var tweet_button = document.getElementById(&#39;addthis_button_tweet&#39;);
tweet_button.setAttribute(&#39;tw:counturl&#39;, <data:blog.url/>); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T14:36:36.290

这应该可以，您只需要在 tw:counturl 之前添加“expr”。我能够通过以下方式在我的 Blogger 网站上运行它：

```
<a class='addthis_button_tweet' expr:tw:counturl='data:blog.url'/> 
```

这需要输入到模板本身模板 -> 编辑 HTML -> 继续。

我希望这对你有用。

# vb.net - 如何在 Visual Basic 中编写多个“或”？

> ID：13393834
> 
> 赞同：2
> 
> 时间：2012-11-15T08:31:59.237
> 
> 标签：vb.net, textbox, logic

我听说 VB 会同时与多个逻辑运算符混淆，所以我被困在这里。我有 3 个文本框，我想检查它们是否为空。

这个简单的 If 不起作用：

```
If txt1.Text = "" Or txt2.Text = "" Or txt3.Text = "" Then -Something- 
```

但是，如果我只将其中两个进行比较，它就会起作用。

感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T08:35:00.103

上面的代码应该可以工作，但使用 String.IsNullOrEmpty 检查 null 或空字符串更优雅：

```
 If String.IsNullOrEmpty(txt1.Text) Or _
   String.IsNullOrEmpty(txt2.Text) Or _
   String.IsNullOrEmpty(txt3.Text) Then
        'Do something
    End If 
```

PD：如果你使用多个“OR”，所有的条件都会被检查。

如果您使用 OrElse，它将按顺序检查条件，当一个条件不成立时，将不检查下一个条件语句

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T08:35:31.273

对于或它不混淆。以上工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:43:50.143

您的代码有效。如果您希望省略检查的其余部分，您可以使用 OrElse

```
 If txt1.Text = "" OrElse txt2.Text = "" OrElse txt3.Text = "" Then 

  End If 
```

或更好

```
 If String.IsNullOrEmpty(txt1.Text) OrElse String.IsNullOrEmpty(txt2.Text) OrElse String.IsNullOrEmpty(txt3.Text) Then 

  End If 
```

# java - 仅运行相应源代码已更改的单元测试？

> ID：13393838
> 
> 赞同：15
> 
> 时间：2012-11-15T08:32:17.320
> 
> 标签：java, junit, jenkins, regression

我正在我们的 Jenkins CI 服务器中运行单元测试和 Selenium 测试。众所周知，在大型项目中运行测试需要很长时间。

是否有 Java 工具/框架只能触发相应源代码已更改的测试？这是因为并非每次对 SCM 的提交都会影响源代码的所有区域......

我使用 Cobertura 进行代码覆盖，使用 Surefire 进行报告。

编辑：我找到了 Atlassian Clover，但我正在寻找免费的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T10:01:46.120

> 我正在我们的 Jenkins CI 服务器中运行单元测试和 Selenium 测试。众所周知，在大型项目中运行测试需要很长时间。

这是我要解决的问题。将您的项目拆分为多个逻辑单元（例如持久层、服务层、Web 层）并单独测试它们。这样你只需要在 web 层发生变化并且每个工件的构建时间变短时运行 Selenium 测试

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-09T08:20:49.803

通常，如果不运行它，您无法可靠地推断出哪些代码被哪个测试覆盖，即使您确实运行了测试，执行路径也可能因运行而异。我怀疑像这样的完美分析相当于[Halting Problem](http://en.wikipedia.org/wiki/Halting_problem)。

但是，您可以使用先前测试运行的覆盖率或测试用例文件中的导入来推断哪些测试可能会执行更改的代码。

最后，您确实想运行整个测试套件，但是，您是对的，在更改的代码上运行测试更重要，因为 1\. 开发人员知道他们早先搞砸了 2\. 如果您经历了很多更改，它会使感觉首先测试最新版本并转到较早的版本只是为了平分问题。

谷歌著名地声称`*`他们被黑的代码库在提交时运行单元测试，`**`并且他们调整了测试框架以确定首先运行哪些测试。我不知道他们的更改是否公开。

`*`会议演示的视频通话，我不记得确切的名称或链接

`**`严格在提交之后，如果测试开始失败则自动回滚

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T09:26:59.650

您可以尝试[JUnit Max](http://junitmax.com/)或[Infinitest](http://infinitest.github.io/)，但它们都是基于 IDE 的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T10:05:18.800

就个人而言，我认为您以错误的方式看待这个问题。更好的方法是根据功能和时间将您的 Junit 测试分解为单独的包。

对于像这样的项目，我为每次提交运行健全性测试，但这些测试非常有限，涵盖了最基本的功能，然后在此之上运行每晚测试以涵盖更多内容（看到没有人在晚上工作，它给出了一个测试那天代码的 12 小时窗口）。

如果您的整个测试套件都需要它（但如果需要，我会感到惊讶），那么您可以运行周末测试套件。

仅测试更改的类会假设这些类不会影响项目的任何其他部分，这可能会导致错误，除非您进行全面测试，否则您不会发现错误，或者您只是碰巧改变了受影响的区域.

我知道这在技术上并不能回答您的问题，而是需要考虑的问题。

# qt - 如何使 QString 以固定精度转换数字？

> ID：13393845
> 
> 赞同：0
> 
> 时间：2012-11-15T08:32:35.620
> 
> 标签：qt, figure, qstring

我`tr("%1").arg(2.00000, 0, 'f', 2);`用来格式化数字。它被格式化为“2.00”，但“.00”不是我想要的，我希望把它剪掉。

所以我试过`.arg(2.00000, 0, 'g', 2);`了，'.00'被剪掉了。

但在其他一些情况下，“g”模式使用“e”模式并将其格式化为“2.5e+02”......

我希望这个数字只是在“f”模式下格式化，如果有的话，可以剪掉“.00”的尾巴。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:23:25.990

推荐您阅读[这里](http://qt-project.org/doc/qt-4.8/qstring.html#argument-formats)和[这里](http://qt-project.org/doc/qt-4.8/qstring.html)。

# xml - XSD 架构目标命名空间

> ID：13393846
> 
> 赞同：2
> 
> 时间：2012-11-15T08:32:41.217
> 
> 标签：xml, namespaces, schema, gml, ogc

我正在尝试设置一个新的 gml Feature 模式，但是我认为我误解了命名空间的某些内容。这是我的架构：

```
<xs:schema targetNamespace="http://localhost/dar" xmlns:gml="http://www.opengis.net/gml" xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns="http://localhost/dar">
<xs:import namespace="http://www.opengis.net/gml" schemaLocation="http://schemas.opengis.net/gml/3.1.1/base/gml.xsd" />
<xs:element name="Region" substitutionGroup="gml:_Feature">
    <xs:complexType>
        <xs:complexContent>
            <xs:extension base="gml:AbstractFeatureType">
                <xs:sequence>
                    <xs:element name="regionId" type="xs:string" />
                    <xs:element name="regionName" type="xs:string" />
                    <xs:element ref="gml:Polygon" />
                </xs:sequence>
            </xs:extension>
        </xs:complexContent>
    </xs:complexType>
</xs:element> 
```

这是我的测试 xml 文档：

```
<wfs:FeatureCollection xmlns="http://localhost/dar" xmlns:wfs="http://www.opengis.net/wfs"
xmlns:gml="http://www.opengis.net/gml" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://localhost/dar http://localhost/dar/DariusFeatures.xsd
http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd">
<gml:boundedBy>
    <gml:Envelope srsName="http://www.opengis.net/gml/srs/epsg.xml#63266405">
        <gml:lowerCorner>10 10</gml:lowerCorner>
        <gml:upperCorner>20 20</gml:upperCorner>
    </gml:Envelope>
</gml:boundedBy>
<gml:featureMember>
    <Region>
        <regionId>region432762</regionId>
        <regionName>Southern Block</regionName>
        <gml:Polygon>
            <gml:exterior>
                <gml:LinearRing>
                    <gml:coordinates>38.324,21.754 38.424,21.754 38.424,21.854 38.324,21.854 38.324,21.754 </gml:coordinates>
                </gml:LinearRing>
            </gml:exterior>
        </gml:Polygon>
    </Region>
</gml:featureMember> 
```

现在架构在 Eclipse 中验证良好，但是当我尝试验证 xml 文档时，Eclipse 告诉我架构文件的目标命名空间是“null”？

可以看出，我已经将架构部署在`localhost`. 谁能看到我在哪里搞砸了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:46:37.353

尝试将以下行添加到您的 xml 架构中：

```
<xs:import namespace="http://www.opengis.net/wfs" schemaLocation="http://schemas.opengis.net/wfs/1.1.0/wfs.xsd" /> 
```

鉴于该行（以及 xs:schema 中的 elementFormDefault="qualified"，正如 Ian 所说），xml 应该验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:33:52.177

短版：您需要添加`elementFormDefault="qualified"`到您的`xs:schema`元素。

更长的版本：默认情况下，只有架构中的顶级元素声明进入目标命名空间，嵌套在复杂类型中的元素不会声明到命名空间中。因此，当前编写的模式期望`regionName`并且`regionId`不在命名空间中，但您的 XML 文档在`http://localhost/dar`命名空间中有它们。这`elementFormDefault`导致嵌套的“本地”元素也采用目标名称空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T08:13:47.560

好吧，已经好几天了，验证问题仍然是个谜。作为一种解决方法，我发现在 [http://schemas.opengis.net/wfs/2.0/wfs.xsd](http://schemas.opengis.net/wfs/2.0/wfs.xsd)上有一个更新版本的 OGC 的 Web 功能服务， 它使用 gml 3.2 而不是 gml 3.1.1

在使用这种新格式的小改动后，一切都很好！

# mysql - MySQL在不同列的同一行中连接两个表

> ID：13393851
> 
> 赞同：2
> 
> 时间：2012-11-15T08:33:00.950
> 
> 标签：mysql, inner-join, between

我将加入两个具有相同目的地但不同来源值的表。我敢肯定我不善于用语言解释。但希望你能通过下面的代码得到我想要的东西：

**MySQL**

```
SELECT 
option_places_db.plc_en AS from_en, 
option_places_db.plc_th AS to_en, 
concat( time_start_hr, ':', time_start_min ) AS time1, 
concat( time_end_hr, ':', time_end_min ) AS time2, 
price_adult, 
price_child
FROM `time_table_boat`
INNER JOIN option_places_db ON time_table_boat.org = option_places_db.plc_id
ORDER BY time_table_boat.org ASC 
```

**时间表船** ![在此处输入图像描述](../Images/359d0e93b33c8d1595ce2e9fcb652023.png)

**option_places_db**

![在此处输入图像描述](../Images/0cf1ebf00765339e8efac8ef1551b9eb.png)

根据time_table_boat 表。我预计 ：

```
from_en    to_en     time1    time2    price_adult    price_child
Aonang     Phi Phi   09:00    11:00    450            350
Phi Phi    Aonang    15:30    17:00    450            350 
```

但是从运行 mySQL 开始，它变成了这样： ![在此处输入图像描述](../Images/bb7342402f5b51c8f9952eaaaf89d70b.png)

'to_en' 列与应有的 time_table_boat.des=option_places_db (=3) 不匹配。我试图添加更多的内部连接行，但它出现了相同目标表名称的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:40:36.757

试试这个

```
SELECT 
    org_places.plc_en AS from_en, 
    des_places.plc_en AS to_en, 
    CONCAT( time_start_hr, ':', time_start_min ) AS time1, 
    CONCAT( time_end_hr, ':', time_end_min ) AS time2, 
    price_adult, 
    price_child
FROM `time_table_boat`
INNER JOIN 
    option_places_db AS org_places ON time_table_boat.org = org_places.plc_id
INNER JOIN 
    option_places_db AS des_places ON time_table_boat.des = des_places.plc_id
ORDER BY time_table_boat.org ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:42:15.700

试试这个 ：

```
SELECT
placeOrg.plc_en AS from_en, 
placeDes.plc_th AS to_en, 
concat( time_start_hr, ':', time_start_min ) AS time1, 
concat( time_end_hr, ':', time_end_min ) AS time2, 
price_adult, 
price_child
FROM `time_table_boat`
INNER JOIN option_places_db AS placeOrg ON time_table_boat.org = placeOrg.plc_id
INNER JOIN option_places_db AS placeDes ON time_table_boat.des= placeDes.plc_id
ORDER BY time_table_boat.org ASC 
```

您需要表 option_places_db 中的两个不同名称，因此您需要将其加入两次。第一次检索源名称，第二次检索目的地名称。您可以看到您使用同一个表作为起点和终点，您只需将它们链接两次，然后给它一个临时名称以区分您得到的响应。

编辑：更正了查询

# android - Android NDK r8b 下编译 STXXL

> ID：13393852
> 
> 赞同：9
> 
> 时间：2012-11-15T08:33:10.407
> 
> 标签：android, c++, stl, android-ndk, stxxl

我正在尝试在 Android NDK r8b 下编译 STXXL（顺便说一句，我在较新的 r8c 下也有同样的问题）。

我正在使用 gnustl_static 进行编译。

我需要 C++11 支持所以最初我尝试设置

```
LOCAL_CPPFLAGS := -std=c++11 
```

但这引发了关于 uint64_t 的错误。

所以我将标志更改为

```
LOCAL_CPPFLAGS :=-std=gnu++11 
```

这有点帮助，但是当它开始编译时，我得到一个与 gnu stl 相关的错误。

```
Users/Gozzeh/android-ndk-r8b/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin/arm-linux-androideabi-g++ -MMD -MP -MF ./obj/local/armeabi/objs/stxxl/STXXL/algo/copy_and_sort_file.o.d -fpic -ffunction-sections -funwind-tables -fstack-protector -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__  -march=armv5te -mtune=xscale -msoft-float -fno-exceptions -fno-rtti -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -I/Users/Gozzeh/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include -I/Users/Gozzeh/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi/include -Ijni -DANDROID  -Wa,--noexecstack -fexceptions -frtti -Dnullptr=0 -D_ANDROID -std=gnu++11 -Ijni/STXXL/include -fexceptions  -O2 -DNDEBUG -g   -I/Users/Gozzeh/android-ndk-r8b/platforms/android-8/arch-arm/usr/include -c  jni/STXXL/algo/copy_and_sort_file.cpp -o ./obj/local/armeabi/objs/stxxl/STXXL/algo/copy_and_sort_file.o 
In file included from /Users/Gozzeh/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/set:60:0,
                 from jni/STXXL/include/stxxl/bits/io/simdisk_file.h:33,
                 from jni/STXXL/include/stxxl/bits/io/io.h:20,
                 from jni/STXXL/include/stxxl/io:13,
                 from jni/STXXL/algo/copy_and_sort_file.cpp:18:
/Users/Gozzeh/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_tree.h: In member function 'std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_(std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_Const_Base_ptr, std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_Const_Base_ptr, const _Val&)':
/Users/Gozzeh/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include/bits/stl_tree.h:1011:39: error: '_Arg' was not declared in this scope 
```

我还收到与此 _Arg 参数相关的更多错误。

因此，查看第一个函数如下所示：

```
template<typename _Key, typename _Val, typename _KeyOfValue,
           typename _Compare, typename _Alloc>
#ifdef __GXX_EXPERIMENTAL_CXX0X__
    template<typename _Arg>
#endif
    typename _Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator
    _Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::
#ifdef __GXX_EXPERIMENTAL_CXX0X__
    _M_insert_(_Const_Base_ptr __x, _Const_Base_ptr __p, _Arg&& __v)
#else
    _M_insert_(_Const_Base_ptr __x, _Const_Base_ptr __p, const _Val& __v)
#endif
    {
      bool __insert_left = (__x != 0 || __p == _M_end()
                || _M_impl._M_key_compare(_KeyOfValue()(__v), 
                              _S_key(__p)));

      // This line is the error location.
      _Link_type __z = _M_create_node(_GLIBCXX_FORWARD(_Arg, __v)); 

      _Rb_tree_insert_and_rebalance(__insert_left, __z,
                    const_cast<_Base_ptr>(__p),  
                    this->_M_impl._M_header);
      ++_M_impl._M_node_count;
      return iterator(__z);
    } 
```

我真的不明白问题出在哪里。gnu++11 没有定义`__GXX_EXPERIMENTAL_CXX0X__`吗？或者问题是它没有在某个地方正确使用？我很困惑是什么导致了这个问题？我在 iphone 的 clang 下使用 gnu++11 编译了 STXXL，但我猜 iphone 可能使用了不同的 STL 实现。有没有人对我如何解决这个问题有任何想法？

如果您需要任何进一步的信息，请询问！

***编辑：***所以这里的评论之一是我的 application.mk

```
APP_PLATFORM := android-8 
APP_STL      := gnustl_static
APP_GNUSTL_FORCE_CPP_FEATURES := exceptions rtti 
APP_OPTIM    := release APP_ABI      := all 
```

这是我的 android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
rwildcard       = $(wildcard $1$2) $(foreach d,$(wildcard $1*),$(call rwildcard,$d/,$2))

LOCAL_MODULE    := stxxl
LOCAL_CPP_FEATURES += exceptions
FILE_LIST       := $(call rwildcard, $(LOCAL_PATH)/STXXL/,*.cpp)
LOCAL_SRC_FILES := $(FILE_LIST:$(LOCAL_PATH)/%=%)
LOCAL_CPPFLAGS  := -Dnullptr=0 -D_ANDROID -D__STDC_INT64__ -std=gnu++11 -I$(LOCAL_PATH)/STXXL/include
include $(BUILD_SHARED_LIBRARY) 
```

***编辑：***有趣的是，我只是尝试在我发布的 stl_tree.h 函数中`#error temp`的块内`#ifdef __GXX_EXPERIMENTAL_CXX0X__`编译器不会在那部分抛出错误......所以定义永远不会被设置，这大概是我的问题的原因。我还专门添加了一个`-D__GXX_EXPERIMENTAL_CXX0X__`，但这没有任何区别（它好像它被取消定义了）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-21T14:39:36.953

我认为您的构建方法过于乐观。我对 STXXL 一无所知，但任何不平凡的项目在他们自己的 make 文件中都有很多细节，所以通过抛出你自己的 Android.mk 并尝试包含所有可能的源代码文件来构建不应该工作。

如果您想使用 ndk-build，您应该仔细研究该项目并了解其详细信息并将其合并到您新的 Android.mk 文件中。例如，如果您检查`external`Android 存储库下的目录（[在 github 中它们被列为几个子项目](https://github.com/android)），您可以看到许多开源项目以及它们是如何引入 Android 构建系统的。

在冗长而无聊的信息之后，我建议使用 NDK 作为一个独立的工具链。你可以阅读这个`$NDK/docs/STANDALONE-TOOLCHAIN.html`。简而言之，我能够通过以下命令将 STLXX 编译为静态库（我的 ndk 安装在 ~/bin 中）

> > NDK=~/bin/android-ndk-r8c PTHREAD_FLAG= COMPILER="$NDK/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-g++ --sysroot=$NDK /platforms/android-14/arch-arm -I$NDK/sources/cxx-stl/gnu-libstdc++/4.6/include -I$NDK/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi/include -L$NDK/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi/ -lgnustl_shared" make library_g++

起初构建因文件中的问题而失败`./io/ufs_file_base.cpp`。Android / Bionic 不支持一些过时的用途`S_IREAD`。`S_IWRITE`请参阅[错误报告](http://code.google.com/p/android/issues/detail?id=19710)和[参考](http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/Permission-Bits.html)。

您应该如下更新第 88 行

```
const int perms = S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP; 
```

然后

```
<same build command again> 
```

现在你应该`libstxxl.a`下`lib`。我不知道这是否真的有效，但由于这是一个构建问题，我希望它能回答或给你一些指导。

最后一点是关于 ARM EABI。正如您在指定目录中看到的那样，上面的命令使用，如果适用于您的目标`armeabi`，您可能希望使用`armeabi-v7a`它，因为它较新。从您的错误消息中，我可以看到特定版本的目标是`xscale`，如果这不是故意的，那么让自己熟悉 ARM 架构/产品系列可能是个好主意。

# logging - 在 jboss-7 日志记录中是否可以有多个具有相同类别的处理程序？

> ID：13393854
> 
> 赞同：1
> 
> 时间：2012-11-15T08:33:28.797
> 
> 标签：logging, jboss7.x

我在standalone.xml 文件中为具有相同名称的类别定义了两个处理程序，如下所示

```
<logger category="ab.cd" use-parent-handlers="false">
            <level name="DEBUG" />
            <handlers>
                <handler name="abDebug" />
            </handlers>
        </logger>
<logger category="ab.cd" use-parent-handlers="true">
                <level name="WARN" />
                <handlers>
                    <handler name="abWarning" />
                </handlers>
            </logger> 
```

但是当我尝试运行 jboss 7 时出现异常

```
 14:28:08,090 ERROR [org.jboss.as.server] JBAS015956: Caught exception during boot: org.jboss.as.controller.persistence.ConfigurationPersistenceException: JBAS014676: Failed to parse configuration
    at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:141) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.ServerService.boot(ServerService.java:266) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:155) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_09]
Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[143,4]
Message: JBAS014664: An element of this type named 'ab.cd' has already been declared
    at org.jboss.as.controller.parsing.ParseUtils.duplicateNamedElement(ParseUtils.java:235) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.logging.LoggingSubsystemParser.parseLoggerElement(LoggingSubsystemParser.java:229)
    at org.jboss.as.logging.LoggingSubsystemParser.readElement(LoggingSubsystemParser.java:149)
    at org.jboss.as.logging.LoggingSubsystemParser.readElement(LoggingSubsystemParser.java:113)
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
    at org.jboss.staxmapper.XMLExtendedStreamReaderImpl.handleAny(XMLExtendedStreamReaderImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
    at org.jboss.as.server.parsing.StandaloneXml.parseServerProfile(StandaloneXml.java:894) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.parsing.StandaloneXml.readServerElement_1_1(StandaloneXml.java:330) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:127) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:100) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
    at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:133) [jboss-as-controller-7.1.1.Final.jar:7.1.1.Final]
    ... 3 more 
```

所以，我想知道这可能有两个相同类别的记录器吗？如果不是，那么在这种情况下如何将数据发送到两个不同的处理程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:35:51.547

您不能定义两个具有相同类别的记录器。记录器如何知道它应该使用哪个级别？您最好使用一个没有设置级别的记录器，并使用处理程序来设置您想要记录的级别。

类似于以下内容：

```
<file-handler name="abDebug" auto-flush="true">
    <level name="DEBUG"/>
    <file relative-to="jboss.server.log.dir" path="abDebug.log"/>
    <append value="true"/>
</file-handler>
<file-handler name="abWarning" auto-flush="true">
    <level name="WARN"/>
    <file relative-to="jboss.server.log.dir" path="abWarning.log"/>
    <append value="true"/>
</file-handler>

<logger category="ab.cd">
    <handlers>
        <handler name="abDebug" />
        <handler name="abWarning" />
    </handlers>
</logger> 
```

# list - 删除重复的解决方案

> ID：13393856
> 
> 赞同：2
> 
> 时间：2012-11-15T08:33:32.807
> 
> 标签：list, prolog, prolog-cut

我的代码以下列方式逐项合并两个列表列表：

```
mergeL([[a,b],[c,d]], [[1,2],[3,4]], Result). Result = [[a,b,1,2],[c,d,3,4]] 
```

这是我使用的代码：

```
mergeL([],[],[]).
mergeL(List, [], List).
mergeL([], List, List).
mergeL([X|Rest],[Y|Rest2], [XY|Res2]) :-
   mergeL(Rest, Rest2, Res2),
   append(X,Y,XY). 
```

这似乎可行，但如果我用两个相同大小的列表调用它，我会得到三个重复的结果。示例（两个列表都只包含一个元素）：

```
?- mergeL([[a,b]],[[1,2,3]],Q).
Q = [[a, b, 1, 2, 3]] ;
Q = [[a, b, 1, 2, 3]] ;
Q = [[a, b, 1, 2, 3]]. 
```

有没有一种干净的方法可以使这个输出只有一个解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T10:31:51.057

已经有 3 个 SO-answers，但我不能同意一个！他们都是不正确的。

## 如何消除冗余解决方案

考虑您定义中的三个事实：

```
合并L（[]，[]，[]）。
合并（列表，[]，列表）。
合并（[]，列表，列表）。

```

他们都成功了，`mergeL([],[],[])`这就是你裁员的根源。第二个和第三个事实是`List`一个非空列表。因此，让我们将其添加到定义中：

```
合并L（[]，[]，[]）。
合并（列表，[]，列表）：- 列表 = [_|_]。
合并（[]，列表，列表）：- 列表 = [_|_]。

```

这消除了冗余解决方案。无需削减以删除多余的解决方案。[但是，其他 SO-answer](https://stackoverflow.com/a/13393974/1234721)中引入的削减可能会隐藏解决方案。对于查询`mergeL(Xs,YS,Zs)`，剪切版本只有一种解决方案，但应该有无限多。

## 如何消除剩余的选择点

尽管如此，使用削减还是有一些意义的：他们能够删除一个选择点。但是这样的切割需要像这样适当地保护：

```
合并L（Xs，Ys，Zs）：-
   ( Xs == [], Ys == [] -> !
   ; Zs == [] -> ！
   ; 真的
   ),
   Xs = []，Ys = []，Zs = []。
...

```

我不确定这是否值得付出努力......实现可能会更有效地提供这一点。有关此的更多详细信息，请参见 [this](https://stackoverflow.com/a/13311382/772868)和[this](https://stackoverflow.com/a/12710995/772868)。

## 尾递归

对您来说更有趣的可能是最后一条规则的更改。它应该改为：

```
合并L（[X|Rest]，[Y|Rest2]，[XY|Res2]）：-
   附加（X，Y，XY），
   合并L（休息，休息2，休息2）。

```

这避免了本地堆栈空间的临时分配。所以这绝对是一个优化。但是不会损害谓词的逻辑阅读的优化。

在我的 2009 年 32 位笔记本电脑（几乎是蒸汽驱动的）和 SWI 6.3.3-40-g064f37b 上：

原始版本：

```
?- N 是 2^20，长度（L，N），maplist（=（[]），L），时间（mergeL（L，L，J））。
% 2,097,206 次推理，5.232 CPU 在 5.250 秒内（100% CPU，400851 唇）

```

尾递归版本：

```
?- N 是 2^20，长度（L，N），maplist（=（[]），L），时间（mergeL（L，L，J））。
% 2,097,152 推理，0.525 CPU 在 0.526 秒内（100% CPU，3997337 唇）

```

Th-那是 10 倍。

现在有更长的列表：尾递归版本：

```
?- N 是 2^22，长度（L，N），maplist（=（[]），L），时间（mergeL（L，L，J））。
% 8,388,608 推理，4.228 CPU 在 4.237 秒内（100% CPU，1984272 唇）

```

*与*原始顺序相比：

```
?- N 是 2^22，长度（L，N），maplist（=（[]），L），时间（mergeL（L，L，J））。
% 1,765,930 次推理，1.029 CPU 在 1.033 秒内（100% CPU，1716119 唇）
错误：超出本地堆栈

```

所以只执行了 1.7Mi 来填满本地堆栈。这主要是空间问题！如果您的内存比我多，只需增加`N is 2^22`！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:42:57.947

您可以添加削减：

```
mergeL([],[],[]) :- !.
mergeL(List, [], List):- !.
mergeL([], List, List):- !.
mergeL([X|Rest],[Y|Rest2], [XY|Res2]) :-
   mergeL(Rest, Rest2, Res2),
   append(X,Y,XY). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:43:20.690

第一个列表为空的查询，即 ?-merge([], *,* )，将匹配第一个和第三个子句。同样，第二个列表为空的查询将匹配第一个和第二个子句。这就是为什么您获得选择点并因此重复解决方案的原因。

如果您在第一个子句的正文中放置一个切口，您应该没问题：

```
merge([],[],[]) :- !. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T08:43:48.647

我会做出最后的选择：

```
mergeL([X|Rest],[Y|Rest2], [XY|Res2]) :-
    mergeL(Rest, Rest2, Res2), !, append(X,Y,XY). 
```

@twinterer 答案也有效！

# ios - 使用 Instruments 工具中的分配

> ID：13393857
> 
> 赞同：1
> 
> 时间：2012-11-15T08:33:32.650
> 
> 标签：ios, xcode, cocoa-touch, xcode4.5, xcode-instruments

我正在使用 Instruments 工具来查找我的应用程序中的泄漏。在我的应用程序中检查泄漏时，我也可以看到分配选项卡。

到目前为止，我从未在工具工具中使用过该分配选项卡。我刚刚检查了它可能是什么，我能够看到#All Allocations * 字段。其中显示了应用程序使用的总字节数。我很震惊地看到尺寸不断增加。

我应该只担心内存泄漏而不是分配吗？#All 分配意味着当前应用程序大小或整体应用程序大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:39:14.117

分配对于显示您的应用程序内存占用很有用。如果您呈现一个 modalViewController 并关闭它（然后重复它），并且您看到您的应用程序活动字节不断增加，那么就有问题了。内存泄漏很有用，可以查看已分配的内存并且您丢失了对它的引用。使用 ARC 会有所帮助，但您仍然可能会出现内存泄漏（例如循环引用）。分配还可以帮助您了解内存在哪里分配而从未释放。例如`NSArray`，一堆你没有使用但你仍然活着的对象。对于您的问题：

1）你应该担心两者。

2）**实时字节**显示您当前的应用程序大小（虚拟内存）。**总体应用程序大小**，正是它所说的：“所选时间范围内的分配总数”。

你也可以检查[这个](https://stackoverflow.com/questions/2154219/instruments-objectalloc-explanation-of-live-bytes-overall-bytes)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:23:26.610

All Allocations 行在 Live Bytes 列下显示堆的当前大小，以及在 Total Bytes 列下分配的堆字节总数。如果分配 1 MB，则两列都将增加 1 MB。如果您随后释放该兆字节，Live Bytes 将减少 1 MB，但 Total Bytes 不会改变。

Live Bytes 对于检测废弃或泄漏的内存很有用。

总体字节数通常不是很有用。当您遇到性能问题并想查看它是否是由于过度分配流失时，您可能会使用它。

# webgl - HTMl5 webgL 与 AUTOCAD 的集成

> ID：13393858
> 
> 赞同：2
> 
> 时间：2012-11-15T08:33:36.413
> 
> 标签：webgl, autocad

我想知道是否可以将事件从浏览器传递到渲染的 3d AUTOCAD 对象。我能够在浏览器上渲染 3d 对象，并且能够进行旋转、缩放操作。那么是否可以将命令从浏览器传递到 AUTOCAD。

请向我提供您的宝贵意见。

最好的问候， Sajesh Nambiar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-22T10:30:23.663

以下指南将帮助您从 AutoCAD 绘图中获得交互式 3D 体验，并使用 WebGL 技术在线发布/查看它：

[https://www.youtube.com/watch?v=t4RCYBMn-8I](https://www.youtube.com/watch?v=t4RCYBMn-8I)

将完全解决您的情况。

# css - position: static 是否与 position: relative 相同，但没有指定其他属性？

> ID：13393859
> 
> 赞同：2
> 
> 时间：2012-11-15T08:33:37.797
> 
> 标签：css, position, css-position

是否`position:static`等同于`position: relative`没有指定 top、bottom、right 或 left 属性？

我认为这是因为一个元素`postion: absolute`相对于第一个没有`postion: static`. 用 来创建一个元素似乎是任意的，如果没有使用其他属性`position: relative`，它的行为将与 a 相同。`position: static`想我可能会遗漏一些关于`static`vs的东西`relative`。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T08:52:47.473

不使用`position: relative`任何定位的使用`position: static`与元素本身的工作方式相同，但对于具有`position: absolute`.

绝对定位的元素是相对于它的包含块放置的，包含块是最近的父元素，其`position`设置不是`static`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T08:38:33.353

答案是**否定**的，两者都不一样

`position: static;`仅表示默认位置，`top, right, bottom, left`除非你使用，否则你不能使用`position: relative, absolute or fixed`，你需要使用边距，此外，`position: relative;`当子元素被定位`absolute`时，所有元素都可以浮动在`position: relative;`div 内，如果你保持它是静态的，他们将退出文档...

看看例子

[Demo1](http://jsfiddle.net/xgAME/)（保持 div 静态并使用 top,left 无效）

[Demo2](http://jsfiddle.net/sBSPK/)（使其`position: relative;`确实影响顶部，左侧）

[Demo3](http://jsfiddle.net/xgAME/2/)（保持父div静态，子定位后会流出`absolute`）

[Demo4](http://jsfiddle.net/xgAME/3/)（定位的子 div`absolute`将测量其父 div 定位的顶部、右侧、底部、左侧`relative`）

这 1 是简短且非常简单但功能强大的[**教程视频**](http://css-tricks.com/video-screencasts/110-quick-overview-of-css-position-values/)，以清除您的疑虑

还有一篇关于[CSS 定位的短文](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)

# iphone - IBAction 按钮向 ip camera 发送命令以旋转。该命令是一个带有用户名密码和 CGI 命令的 html 链接，但它重定向到 safari

> ID：13393864
> 
> 赞同：1
> 
> 时间：2012-11-15T08:33:52.897
> 
> 标签：iphone, xcode, redirect, cgi

我正在尝试在 xcode 中为我的 iphone 制作一个应用程序来控制我的 ip 摄像头，所以我已经设置了一个带有 webview 的控制器，它加载了一个指向我的 ip cam 的 html 链接。我还设置了一些 IBActions 链接到一些按钮，试图在按下按钮（右、左上、下）时控制相机的移动。每个链接到按钮的 IBAction 看起来像

```
-(IBAction)camMoveUp
{
[[UIApplication sharedApplication] 
openURL:[NSURL URLWithString:@"http://192.168.1.2/decoder_control.cgicommand=0&user=myusername&pwd=mypassword"]]
} 
```

此操作在发送到互联网/路由器时会触发我的相机向上移动。它可以工作，但每次我点击一个按钮时，它都会重定向到 safari 并在屏幕上显示一条消息“ok”。相机会移动到被定向到的位置，但是我如何在每次按下按钮时都不会被重定向到 Safari 的情况下实现这一点？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T10:02:23.997

```
-(IBAction)camMoveUp
        {
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://192.168.1.2/decoder_control.cgicommand=0&user=myusername&pwd=mypassword"]];

// Perform request and get JSON as a NSData object

    NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

    NSLog(@"response=%@",response );
} 
```

或者，您可以在您的视图中使用 webView 并打开 URL

```
 -(IBAction)camMoveUp
    {

//Create Webview Programatically 
    CGRect webFrame = CGRectMake(0.0,100.0, 320.0,360.0);
    UIWebView *webView = [[UIWebView alloc] initWithFrame:webFrame];
    [webView setBackgroundColor:[UIColor Whitecolor]];
[self.view addsubview:webview];
//Load The URL to Open
    NSString *urlAddress = @"http://192.168.1.2/decoder_control.cgicommand=0&user=myusername&pwd=mypassword";
    NSURL *url = [NSURL URLWithString:urlAddress];
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
webview.delegate=self;
    [webView loadRequest:requestObj];

} 
```

如果你想在页面加载后做一些活动，那么你可以使用 webview 委托函数。检查[这里](http://www.icodeblog.com/2008/12/19/iphone-coding-learning-about-uiwebviews-by-creating-a-web-browser/)是 WebView 的完整教程。

# linux - SQLite WAL 性能改进

> ID：13393866
> 
> 赞同：7
> 
> 时间：2012-11-15T08:34:06.803
> 
> 标签：linux, sqlite

我有一个在嵌入式 linux 上运行的应用程序。我有一个预先构建的数据库，其中包含一些表，每个表都有很多行（数千）和 52 列。我提前构建了数据库，因为我担心如果我将在运行时执行“插入”，我会产生磁盘碎片，所以我首先构建一个带有大量垃圾“插入”的数据库，并在运行时我使用“更新”。

我每 3 秒向数据库写入大量数据，为了加快写入过程，我在 SQLite 中使用 WAL 模式。虽然，我有性能问题。似乎每当一个检查点发生时，它花费的时间太长，处理器无法在不到 3 秒的时间内完成。为了改进这一点，我创建了一个线程，在大约 10 次写入调用之后，它从主线程接收消息队列，而不是检查点。

所以现在，情况似乎好转了，但 WAL 文件越来越大......我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T09:32:53.953

为避免碎片化并消除预插入数据的需要，您应该使用`sqlite3_file_control()`SQLITE_FCNTL_CHUNK_SIZE[来](http://www.sqlite.org/c3ref/c_fcntl_chunk_size.html#sqlitefcntlchunksize)设置块大小。以大块（比如一次 1MB）分配数据库文件空间，应该可以减少文件系统碎片并提高性能。Mozilla 项目目前在 Firefox/Thunderbird 中[使用此设置并取得了](http://hg.mozilla.org/mozilla-central/rev/1065142ddb2c)[巨大成功](https://bugzilla.mozilla.org/show_bug.cgi?id=581606)。

关于WAL。如果您经常写入大量数据，则应考虑将写入包装到更大的事务中。通常，每个 INSERT 都是自动提交的，SQLite 必须等到数据真正刷新到磁盘或闪存——这显然非常慢。如果您将多个写入包装到一个事务中，SQLite 不必担心每一行，并且可以一次刷新多行，很可能是单个闪存写入 - 这要快得多。因此，如果可以，请尝试将至少几百个写入包装到一个事务中。

根据我的经验，Flash 上的 WAL 并不能很好地工作，我发现坚持旧的日志模式更有益。例如，Android 4 的 SQLite 数据库不使用 WAL 模式，这可能是有原因的。正如您所注意到的，WAL 在某些情况下有无限增长的趋势（但是，如果很少提交事务也会发生这种情况 - 所以一定要偶尔这样做）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:14:37.883

在 WAL 模式下，SQLite 将任何更改的页面写入`-wal`文件。只有在检查点期间，这些页面才会写回数据库文件。

`-wal`只有在没有任何并发​​阅读器时才能截断文件。

[`sqlite3_wal_checkpoint_v2`](http://www.sqlite.org/c3ref/wal_checkpoint_v2.html)您可以尝试通过调用with`SQLITE_CHECKPOINT_RESTART`或execution 来显式清除 WAL 文件[`PRAGMA wal_checkpoint(RESTART)`](http://www.sqlite.org/pragma.html#pragma_wal_checkpoint)，但如果有任何并发​​读取器，这将失败。

# jquery - Jquery Ajax，如何获取源页面的特定元素

> ID：13393869
> 
> 赞同：0
> 
> 时间：2012-11-15T08:34:21.453
> 
> 标签：jquery, ajax

尝试通过简单的代码示例学习 Ajax - jQuery 我有这两个 html 文件：index.html 和 source.html.the inex.html 为：

```
enter code here
<!DOCTYPE html>
 <html>
 <head>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
 <script>
  $(document).ready(function() {
   $('button').click(function(){
   $.get('source.html', function(data) {
   $('.result').html(data);
   });
  });
 });
 </script>
 <title>Main Page</title>
 </head>
 <body>
 <button>Load Page</button>
 <div class="result"></div>
 </body>
 </html> 
```

和 source.html 为：

```
enter code here
<!DOCTYPE html>
<html>
<head>
<title>Source Page</title>
</head>
<body>
<div class="test1">Hello Ajax!</div>
<div class="test2"> Again Hello Ajax!</div>
<div class="test1">WoW Ajax!</div>
 <p> The html() method sets or returns the content(innerHTML) of the selected... </p>
 </body>
</html> 
```

现在我的问题是如何获取特定元素而不是获取索引页面中的所有元素？例如，我如何过滤请求对象以获取所有具有“test1”类的 div 或仅获取

从页面来源。我也不太明白“数据”参数是什么意思

```
enter code here
$.get('source.html', function(data) {
$('.result').html(data); 
```

你能告诉我这是什么意思吗？

来自控制台的数据：

```
<!DOCTYPE html>
<html>
<head>
<title>Main Page</title>
</head>
<body>
<div class="test">Hello world!</div>
<div class="test1">Hello Ajax!</div>
<div class="test2"> Again Hello Ajax!</div>
<div class="test1">WoW Ajax!</div>
<p> The html() method sets or returns the content (innerHTML) of the selected   elements.When this method is used to return content, it returns the content of the FIRST   matched element. When this method is used to set content, it overwrites the content of ALL matched elements.</p>
 </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:40:22.257

在得到你的ajax调用的响应后，你可以通过以下方式找到元素：

```
$.get('source.html', function(data) {
   test1_elements = $(data).find('.test1')
}); 
```

`test1_elements``test1`现在将包含来自 source.html的所有具有类的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:41:35.423

您可以通过它们的 id 或类来获取特定元素：

```
var $byids= $('#id');
var $byclass= $('.class'); 
```

函数中的 data 参数包含整个响应数据，即 source.html 显示的内容。

您可以使用

```
var $div= $(data).find('#divid'); 
```

从数据中选择东西。

更新：您有 2 个 test1 元素。下面将获取每个的html，并将其拼接在一起。最后一行显示文档中所有具有“test”类的元素的摘要。

```
$.get('source.html', function(data) {
    var $test1_elements = $(data).find('.test1');
    var summary= '';
    $test1_elements.each({function(){ summary+= $(this).html(); });
    $('.test').html(summary);
}); 
```

# amazon-rds - 没有自动备份的 Amazon RDS 每日快照

> ID：13393878
> 
> 赞同：1
> 
> 时间：2012-11-15T08:35:10.610
> 
> 标签：amazon-rds

我们已经设置了 Amazon RDS。性能比以前的共享系统慢一点，但它让我们对用户有更多的控制。

我们如何在没有时间点特征的情况下获得自动的每日快照（例如在规定的窗口期间）？我们不需要后者，它显然会影响 25% 的性能。但是，每晚获得一个自动快照商店会很有用。

将保留期更改为 0，这确实加快了一切速度，但担心它一夜之间没有做任何 snapshop。我知道手动快照的可能性，但更喜欢预定的快照。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T09:45:58.430

> 我们如何在没有时间点特征的情况下获得自动的每日快照（例如在规定的窗口期间）？

您不能，它们在当前设计中捆绑在一起，即没有选项可以仅禁用时间点恢复。

原因可能是，只要您使用其中一种复制选项，例如*Multi-AZ 部署*和/或*Read Replicas* ，无论如何都需要为此功能提供便利的二进制日志。这些确实需要用于时间点恢复的完全相同的二进制日志，这就是为什么一旦启用它们就不能将保留期设置为 0，请参见例如ModifyDBInstance [Action的参数](http://docs.amazonwebservices.com/AmazonRDS/latest/APIReference/API_ModifyDBInstance.html)*BackupRetentionPeriod*：

> 约束：
> 
> *   必须是 0 到 8 之间的值 *[同时 35 顺便说一句。请参阅[Amazon RDS 增加备份保留期]](http://aws.amazon.com/about-aws/whats-new/2012/03/19/amazon-rds-increases-backup-retention-period/)*[](http://aws.amazon.com/about-aws/whats-new/2012/03/19/amazon-rds-increases-backup-retention-period/)
> *   如果数据库实例是具有只读副本的主实例或数据库实例是只读副本，则不能设置为 0

因此，您需要为[CreateDBSnapshot Action](http://docs.amazonwebservices.com/AmazonRDS/latest/APIReference/API_CreateDBSnapshot.html)使用自定义自动化解决方案。

# javascript - 用于在 html 中传递当前日期的 Javascript ClassName

> ID：13393880
> 
> 赞同：0
> 
> 时间：2012-11-15T08:35:26.907
> 
> 标签：javascript, html

我有这段代码，它可以与 GetElementsbyId 一起使用，但我该怎么做才能拥有 GetElementsByClassName，这样我就可以将它传递到代码中的多个位置，这是我的代码；

[http://jsfiddle.net/C6Qgf/](http://jsfiddle.net/C6Qgf/)

这是js

```
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
document.write(month + "/" + day + "/" + year)
document.getElementsByClassName("time").innerHTML=(month + "/" + day + "/" + year);​ 
```

我希望能够在我的 HtmL 页面中使用当前日期而不是 On 位置。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:38:11.430

您正在检索一个数组，因此您需要循环遍历它。另外，不要使用它，`document.write`因为它会替换文档内容。

您还错过了所有分号，这可能会在某些情况下导致意外结果，因此请记住始终添加它们。

这是更新的示例：

```
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();
var cls = document.getElementsByClassName('time');

for (var i = 0; i < cls.length; i++) {
    cls[i].innerHTML = (month + "/" + day + "/" + year);​​​​
} 
```

**小提琴**：http: [//jsfiddle.net/C6Qgf/1/](http://jsfiddle.net/C6Qgf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:39:36.067

你在你的问题中加了标签`jQuery`，我假设你使用`jQuery`

**使用 jQuery**，你可以做到，

```
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()

$(".time").text(month + "/" + day + "/" + year);​​​​ 
```

**演示：http:** [//jsfiddle.net/C6Qgf/3/](http://jsfiddle.net/C6Qgf/3/)

**注意：**如果您使用的是原生 JavaScript，请记住`document.getElementsByClassName`不适用于 IE。有一个解决方法可以解决，请参见下面的代码。

**使用原生 JS**（有 IE 支持）

```
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
//document.write(month + "/" + day + "/" + year)
var obj = getElementsByClassName("time");
for(var i=0; i<obj.length; i++){
    obj[i].innerHTML=(month + "/" + day + "/" + year);
}

//For IE Fix
function getElementsByClassName(className) {
    if (document.getElementsByClassName){
      return document.getElementsByClassName(className);
    }else{
        return document.querySelectorAll('.' + className);
    }
} 
```

**演示：http:** [//jsfiddle.net/C6Qgf/6/](http://jsfiddle.net/C6Qgf/6/)

# android - 应用程序被强制关闭

> ID：13393882
> 
> 赞同：0
> 
> 时间：2012-11-15T08:35:32.603
> 
> 标签：android

我正在创建一个需要自定义布局的应用程序。但是在运行我的应用程序后，它会简单地关闭。如果可能的话，任何人都可以提出原因和解决方案

提前感谢

这是我的主要活动

```
public class MainActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }  
} 
```

这是我的自定义布局类

```
public class Odo extends View {
    private Paint p;
    private RectF rect;
    public Odo(Context context) {
        super(context);
        Log.e("odo", "constructor");
        init();
        // TODO Auto-generated constructor stub
    }
    public void init() {
        Log.e("odo", "inside init()");
        rect = new RectF();
        p = new Paint(Paint.ANTI_ALIAS_FLAG);
        p.setColor(Color.GREEN);

    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        // TODO Auto-generated method stub
        super.onSizeChanged(w, h, oldw, oldh);
        Log.e("odo", "inside onSizeChange");
        rect.set(0, 0, w, h);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        Log.e("odo", "inside onDraw");
        super.onDraw(canvas);

        canvas.drawRect(rect, p);

    }
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // TODO Auto-generated method stub
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        Log.e("odo", "inside onMeasure");
    }
} 
```

这是我的 XML 文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <com.example.odo.Odo
        android:id="@+id/odom"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
         />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:44:19.770

在您的自定义视图中，您需要覆盖带有`AttributeSet`参数的构造函数，以便在 XML 布局中使用它：

只需更换

```
public Odo(Context context) {
    super(context);
    Log.e("odo", "constructor");
    init();
    // TODO Auto-generated constructor stub
} 
```

经过

```
public Odo(Context context, AttributeSet attrs) {
    super(context, attrs);
    Log.e("odo", "constructor");
    init();
    // TODO Auto-generated constructor stub
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:44:53.793

我相信您需要提供默认构造函数来获取`AttributeSet`和/或`int`样式参考。例如：

```
public class Odo extends View {
    private Paint p;
    private RectF rect;

    public Odo(Context context) {
        super(context);
        Log.e("odo", "constructor");
        init();
        // TODO Auto-generated constructor stub
    }

    public Odo (Context context, AttributeSet attrs) {
        super(context, attrs);
        Log.e("odo", "constructor");
        init();
    }

    public Odo (Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        Log.e("odo", "constructor");
        init();
    }

    public void init() {
        Log.e("odo", "inside init()");
        rect = new RectF();
        p = new Paint(Paint.ANTI_ALIAS_FLAG);
        p.setColor(Color.GREEN);

    }

//.....  and so on

} 
```

# c# - Ninject Web 应用程序：所有绑定都应该是 InRequestScope()？

> ID：13393883
> 
> 赞同：4
> 
> 时间：2012-11-15T08:35:32.847
> 
> 标签：c#, asp.net, asp.net-mvc, ninject

我有一个用 asp.net mvc 制作的 Web 应用程序，我正在使用 Ninject 来绑定接口。

现在，我有这个：

```
// Db Context
kernel.Bind<DbContext>().To<DbEntities>().InRequestScope();

// Repositories - which are using instance of DbEntities
kernel.Bind<ICustomerRepository>().To<CustomerRepository>();
kernel.Bind<IProductRepository>().To<ProductRepository>();

// Services - which are using instances of Repositories
kernel.Bind<ICustomerService>().To<CustomerService>();
kernel.Bind<IProductService>().To<ProductService>(); 
```

我将 DbContext 绑定到 RequestScope 中的 DbEntities，因为我想在同一个 Web 请求中使用相同的 DbContext。之后它应该处理它。

但是其他绑定应该如何？默认情况下它们是怎样的？

例如`IProductRepository`，它有一个实例`DbContext`（每个请求一个），也应该是`InRequestScope()`？

`IProductService`有一个实例`IProductRepository`

绑定应该如何适合 Web 应用程序？（而且我不会超载服务器的内存）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:42:15.150

对于 MVC 应用程序，您的配置是可以的。如果您将存储库绑定在默认瞬态范围或请求范围内，则不会有太大区别。正如@Mark 在瞬态范围中所述，您的依赖项将作为有界对象的新实例注入，但在事务范围内，它们将在每个请求中创建一次。如果您想（例如）在您的存储库上做一些每个请求的缓存，我更喜欢更多的请求范围并推荐它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T09:33:42.660

您可以将存储库保持原样。默认范围是这样的，即每当需要`IProductRepository`创建新实例时。

# c# - 如何创建正确的正则表达式

> ID：13393884
> 
> 赞同：-2
> 
> 时间：2012-11-15T08:35:47.277
> 
> 标签：c#, java, php, regex

我是这个函数的新手，但我认为这正是我对特定字段验证所需要的。如何只允许以下字符在 a 上带有空格或回车`textarea`：

```
Allowed chars: 
numbers: 0 to 9
alpha: R L F Y
chars: , - (comma and dash) 
```

我还需要它，以便验证字段可以以数字或字母开头，但不能以逗号 ( `,`) 或破折号 ( `-`) 开头。

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:42:10.040

这可能有效：

```
/^\s*[RFLY0-9][RFLY0-9,\-\s]*$/ 
```

显然，取决于您使用的未指定的正则表达式解析器。

**编辑：** 添加空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:46:32.353

```
/^[0-9RLFY][0-9RLFY,\-\s]$/ 
```

应该做的伎俩。根据您想要的空白类型，替换`\s`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T08:50:20.080

看看这个模式：

```
^[0-9RLFY]([0-9RLFY\-\,]*)|\s*$ 
```

`?i`根据需要使用修饰符使其不区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:41:38.190

尝试这个：

```
/[0-9RLFY\-\,]/ 
```

您可以在括号中添加其他字符，并可以在末尾添加“i”修饰符以表示“忽略大小写”

# memory - 如何分配 IO 内存和 IRQ

> ID：13393885
> 
> 赞同：2
> 
> 时间：2012-11-15T08:35:46.573
> 
> 标签：memory, interrupt

我需要为 Linux 内核提供内存和 IRQ 资源以启动 CAN 控制器。不知道如何获得它们。

下面是我需要填写的结构。我以这个结构为例，这是用于运行时时钟的，但我需要用于 CAN 控制器。两者都在同一块板上，RT 时钟（和所有其他设备）有常量，但我的 CAN 芯片没有。查看主题芯片驱动程序的代码（sp_probe() 函数）时，我发现它需要相同类型的资源。

```
struct resource tegra_rtc_resources[] = {
    [0] = {
        .start = ???,
        .end = ???,
        .flags = IORESOURCE_MEM,
    },
    [1] = {
       .start = ???,
        .end = ???,
        .flags = IORESOURCE_IRQ,
    },
}; 
```

所有“平台”设备都通过系统函数 platform_add_devices() 从“板驱动程序”添加资源。问题是它初始化了我板上的所有设备（UART、RTC、I2C、NAND 等），而不是 CAN 芯片。添加设备后，可以将此信息传递给设备驱动程序。CAN 芯片驱动程序本身存在于内核代码中。

# .net - Visual Studio DebuggerVisualizer 中的 StackOverflowException

> ID：13393888
> 
> 赞同：2
> 
> 时间：2012-11-15T08:35:52.720
> 
> 标签：.net, visual-studio-2012, stack-overflow, debuggervisualizer

我正在开发 Visual Studio 调试器可视化工具。它工作得很好，但后来（出乎意料地）它坏了。我不知道为什么会这样，因为我没有改变任何重要的东西。

所以现在我明白了`An unhandled exception of type 'System.StackOverflowException' occurred in mscorlib.dll`

这是我的代码：

```
var visualizerHost = new VisualizerDevelopmentHost(objectToVisualize, typeof(DebuggerSide));
visualizerHost.ShowVisualizer(); 
```

这是`visualizerHost.ShowVisualizer()`调用后的堆栈跟踪：

```
System.RuntimeTypeHandle.GetTypeByName(string name, bool throwOnError, bool ignoreCase, bool reflectionOnly, ref System.Threading.StackCrawlMark stackMark, System.IntPtr pPrivHostBinder, bool loadTypeFromPartialName) + 0x99 bytes   
System.RuntimeTypeHandle.GetTypeByName(string name, bool throwOnError, bool ignoreCase, bool reflectionOnly, ref System.Threading.StackCrawlMark stackMark, bool loadTypeFromPartialName) + 0x25 bytes  
System.Runtime.Remoting.RemotingServices.LoadClrTypeWithPartialBindFallback(string typeName, bool partialFallback) + 0x3b bytes 
System.Runtime.Remoting.RemotingServices.InternalGetTypeFromQualifiedTypeName(string qualifiedTypeName, bool partialFallback) + 0x4c bytes  
System.Runtime.Remoting.RemotingServices.GetType(object tp) + 0xce bytes    
System.Runtime.Serialization.SerializationInfo.AddValue(string name, object value) + 0x1d bytes 
System.Runtime.Remoting.Messaging.LogicalCallContext.GetObjectData(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext context) + 0x145 bytes    
System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize(object obj, System.Runtime.Serialization.ISurrogateSelector surrogateSelector, System.Runtime.Serialization.StreamingContext context, System.Runtime.Serialization.Formatters.Binary.SerObjectInfoInit serObjectInfoInit, System.Runtime.Serialization.IFormatterConverter converter, System.Runtime.Serialization.Formatters.Binary.ObjectWriter objectWriter, System.Runtime.Serialization.SerializationBinder binder) + 0x31b bytes 
System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.Serialize(object obj, System.Runtime.Serialization.ISurrogateSelector surrogateSelector, System.Runtime.Serialization.StreamingContext context, System.Runtime.Serialization.Formatters.Binary.SerObjectInfoInit serObjectInfoInit, System.Runtime.Serialization.IFormatterConverter converter, System.Runtime.Serialization.Formatters.Binary.ObjectWriter objectWriter, System.Runtime.Serialization.SerializationBinder binder) + 0x10e bytes 
System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(object graph, System.Runtime.Remoting.Messaging.Header[] inHeaders, System.Runtime.Serialization.Formatters.Binary.__BinaryWriter serWriter, bool fCheck) + 0x32e bytes   
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(System.IO.Stream serializationStream, object graph, System.Runtime.Remoting.Messaging.Header[] headers, bool fCheck) + 0x142 bytes 
System.Runtime.Remoting.Messaging.SmuggledMethodCallMessage.SmuggledMethodCallMessage(System.Runtime.Remoting.Messaging.IMethodCallMessage mcm) + 0x460 bytes   
System.Runtime.Remoting.Channels.CrossAppDomainSink.SyncProcessMessage(System.Runtime.Remoting.Messaging.IMessage reqMsg = {System.Runtime.Remoting.Messaging.Message}) + 0x11d bytes   
System.Runtime.Remoting.Proxies.RemotingProxy.CallProcessMessage(System.Runtime.Remoting.Messaging.IMessageSink ms, System.Runtime.Remoting.Messaging.IMessage reqMsg, System.Runtime.Remoting.Contexts.ArrayWithSize proxySinks, System.Threading.Thread currentThread, System.Runtime.Remoting.Contexts.Context currentContext, bool bSkippingContextChain) + 0x8c bytes  
System.Runtime.Remoting.Proxies.RemotingProxy.InternalInvoke(System.Runtime.Remoting.Messaging.IMethodCallMessage reqMcmMsg, bool useDispatchMessage, int callType) + 0x22c bytes   
System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(ref System.Runtime.Remoting.Proxies.MessageData msgData, int type) + 0x1f4 bytes    
Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.ManagedShim.DelegatedHost.HostResolver.ResolveRemoteAssembly(string fullAssemblyName = "nunit.core, Version=2.6.2.12296, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77") + 0x99 bytes 
Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.ManagedShim.DelegatedHost.HostResolver.ResolveName(string fullAssemblyName = "nunit.core, Version=2.6.2.12296, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77", bool noVersion = false, bool cacheOnly = false) + 0x94 bytes   
Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.AbstractAssemblyResolver.ResolveName(string fullAssemblyName = "nunit.core, Version=2.6.2.12296, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77", bool cacheOnly = false) + 0x53 bytes 
Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.AbstractAssemblyResolver.ResolveName(string fullAssemblyname = "nunit.core, Version=2.6.2.12296, Culture=neutral, PublicKeyToken=96d09a1eb7f44a77") + 0x6e bytes 
Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.AbstractAssemblyResolver.ResolveHandler(object source = {System.AppDomain}, System.ResolveEventArgs resolveArgs = {System.ResolveEventArgs}) + 0x58 bytes    
System.AppDomain.OnAssemblyResolveEvent(System.Reflection.RuntimeAssembly assembly, string assemblyFullName) + 0xbc bytes   
[Native to Managed Transition]  
[Managed to Native Transition]  
System.RuntimeTypeHandle.GetTypeByName(string name, bool throwOnError, bool ignoreCase, bool reflectionOnly, ref System.Threading.StackCrawlMark stackMark, System.IntPtr pPrivHostBinder, bool loadTypeFromPartialName) + 0x99 bytes   
System.RuntimeTypeHandle.GetTypeByName(string name, bool throwOnError, bool ignoreCase, bool reflectionOnly, ref System.Threading.StackCrawlMark stackMark, bool loadTypeFromPartialName) + 0x25 bytes  
System.Runtime.Remoting.RemotingServices.LoadClrTypeWithPartialBindFallback(string typeName, bool partialFallback) + 0x3b bytes 
System.Runtime.Remoting.RemotingServices.InternalGetTypeFromQualifiedTypeName(string qualifiedTypeName, bool partialFallback) + 0x4c bytes  
System.Runtime.Remoting.RemotingServices.GetType(object tp) + 0xce bytes    
System.Runtime.Serialization.SerializationInfo.AddValue(string name, object value) + 0x1d bytes 
System.Runtime.Remoting.Messaging.LogicalCallContext.GetObjectData(System.Runtime.Serialization.SerializationInfo info, System.Runtime.Serialization.StreamingContext context) + 0x145 bytes    
System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.InitSerialize(object obj, System.Runtime.Serialization.ISurrogateSelector surrogateSelector, System.Runtime.Serialization.StreamingContext context, System.Runtime.Serialization.Formatters.Binary.SerObjectInfoInit serObjectInfoInit, System.Runtime.Serialization.IFormatterConverter converter, System.Runtime.Serialization.Formatters.Binary.ObjectWriter objectWriter, System.Runtime.Serialization.SerializationBinder binder) + 0x31b bytes 
System.Runtime.Serialization.Formatters.Binary.WriteObjectInfo.Serialize(object obj, System.Runtime.Serialization.ISurrogateSelector surrogateSelector, System.Runtime.Serialization.StreamingContext context, System.Runtime.Serialization.Formatters.Binary.SerObjectInfoInit serObjectInfoInit, System.Runtime.Serialization.IFormatterConverter converter, System.Runtime.Serialization.Formatters.Binary.ObjectWriter objectWriter, System.Runtime.Serialization.SerializationBinder binder) + 0x10e bytes 
System.Runtime.Serialization.Formatters.Binary.ObjectWriter.Serialize(object graph, System.Runtime.Remoting.Messaging.Header[] inHeaders, System.Runtime.Serialization.Formatters.Binary.__BinaryWriter serWriter, bool fCheck) + 0x32e bytes   
System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize(System.IO.Stream serializationStream, object graph, System.Runtime.Remoting.Messaging.Header[] headers, bool fCheck) + 0x142 bytes 
System.Runtime.Remoting.Messaging.SmuggledMethodCallMessage.SmuggledMethodCallMessage(System.Runtime.Remoting.Messaging.IMethodCallMessage mcm) + 0x460 bytes   
System.Runtime.Remoting.Channels.CrossAppDomainSink.SyncProcessMessage(System.Runtime.Remoting.Messaging.IMessage reqMsg = {System.Runtime.Remoting.Messaging.Message}) + 0x11d bytes   
System.Runtime.Remoting.Proxies.RemotingProxy.CallProcessMessage(System.Runtime.Remoting.Messaging.IMessageSink ms, System.Runtime.Remoting.Messaging.IMessage reqMsg, System.Runtime.Remoting.Contexts.ArrayWithSize proxySinks, System.Threading.Thread currentThread, System.Runtime.Remoting.Contexts.Context currentContext, bool bSkippingContextChain) + 0x8c bytes  
System.Runtime.Remoting.Proxies.RemotingProxy.InternalInvoke(System.Runtime.Remoting.Messaging.IMethodCallMessage reqMcmMsg, bool useDispatchMessage, int callType) + 0x22c bytes   
System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(ref System.Runtime.Remoting.Proxies.MessageData msgData, int type) + 0x1f4 bytes    
Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.ManagedShim.DelegatedHost.CreateViewer(System.IntPtr hwnd = 65552, Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.ManagedShim.HostServicesHelper hsh = {System.Runtime.Remoting.Proxies.__TransparentProxy}, Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.ManagedShim.SafeProxyWrapper proxy = {System.Runtime.Remoting.Proxies.__TransparentProxy}) + 0x198 bytes 
[Appdomain Transition]  
Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.ManagedShim.Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.IManagedViewerHost.CreateViewer(System.IntPtr hwnd = 65552, object hostServicesParam = null, Microsoft.VisualStudio.DebuggerVisualizers.DebugViewerShim.IPropertyProxyEESide proxy = {Microsoft.VisualStudio.DebuggerVisualizers.VisualizerDevelopmentHost.EEProxyImpl}) + 0x4df bytes    
Microsoft.VisualStudio.DebuggerVisualizers.VisualizerDevelopmentHost.EEProxyImpl.ShowVisualizer(System.IntPtr parentWindow = 65552) + 0x6c bytes    
Microsoft.VisualStudio.DebuggerVisualizers.VisualizerDevelopmentHost.ShowVisualizer(System.IntPtr parentHandle = 65552) + 0x77 bytes    
Microsoft.VisualStudio.DebuggerVisualizers.VisualizerDevelopmentHost.ShowVisualizer() + 0x41 bytes 
```

`[Native to Managed Transition]`连续不断地重复造成的阻塞`StackOverflowException`。

有人对这个问题有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:53:43.353

您以某种方式创建了一个递归循环，但我在您发布的代码中看不到它

# javascript - 在光标所在的 TinyMCE 编辑器中插入文本

> ID：13393892
> 
> 赞同：43
> 
> 时间：2012-11-15T08:36:11.533
> 
> 标签：javascript, jquery, tinymce, cursor-position

我一直在尝试将文本插入到 TinyMCE 编辑器的焦点段落元素 ( `<p>`) 中光标所在的位置，但没有成功！！

```
var elem = tinyMCE.activeEditor.dom.get('tinymce');
var child = elem.firstChild;
while (child) {
    if (child.focused) {
        $(child).insertAtCaret("some text");
    }
    child = child.nextSibling;
} 
```

如果有人对如何解决这个问题有任何想法，我将非常感激。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-11-15T08:38:40.470

你应该使用命令`mceInsertContent`。请参阅[TinyMCE 文档](http://www.tinymce.com/wiki.php/TinyMCE3x:Command_identifiers)。

```
tinymce.activeEditor.execCommand('mceInsertContent', false, "some text"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-05-02T20:15:15.803

上面的答案很好，但值得指出的是，这可以用来插入任何 HTML。

例如：

```
tinymce.activeEditor.execCommand('mceInsertContent', false, " <b>bolded text</b> "); 
```

将在当前光标位置插入粗体文本。

其他一些有趣的观察：

**mceInsertRawHTML**也可以，但在我的 tinyMCE 版本中倾向于将光标放在当前行的开头，但是 ymmv。

**mceReplaceContent**也可以，但在我的情况下，当光标位于当前内容的末尾时效果不佳。

同样，请参阅[文档](http://www.tinymce.com/wiki.php/TinyMCE3x%3aCommand_identifiers)以获取更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-12T22:49:19.713

如果使用弹出窗口，您可以使用：

```
tinyMCEPopup.editor.execCommand('mceInsertLink', false, 'some content goes here'); 
```

// mceInsertLink 在当前光标或插入符号位置插入内容。// 如果编辑器不在焦点上，插入将在编辑器的第一行内容处。

如果要插入 HTML 标记和 javascript 变量，可以使用，例如：

```
<script type='text/javascript'>

    var my_var= "some value";
    var my_var_two = 99;

    tinyMCEPopup.editor.execCommand('mceInsertLink', false, 
                    '<span >[' + my_var + ', ' + my_var_two + ']</span>');       
    tinyMCEPopup.close(); // too close the popup window

</script> 
```

如果你在一个 PHP 文件中，你可以使用相同的策略，只是使用 PHP 而不是 JavaScript，例如：

```
<script type='text/javascript'>
    tinyMCEPopup.editor.execCommand('mceInsertContent', false, 
               '<span >[' + <?php echo $my_php_var; ?> +']</span>'); 
</script> 
```

您还可以将 PHP 变量（假设您在 .php 文件中）分配给 Javascript 变量并在编辑器内容插入中使用它们，例如：

```
<script type='text/javascript'>

    var my_var= "<?php echo $my_php_var; ?>";
    var my_var_two = "<?php echo $my_php_var_two_or_a_function_call; ?>";

    tinyMCEPopup.editor.execCommand('mceInsertLink', false, 
                     '<span >[' + my_var + ', ' + my_var_two + ']</span>');       
    tinyMCEPopup.close(); // too close the popup window

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-03T17:52:54.400

如果您的页面上有多个编辑器，我想在这里再添加一件事，而您也可以这样做。

```
tinyMCE.get('idOfEditor').execCommand('mceInsertContent', true, 'your text goes here') 
```

# c++ - 在 RELEASE 配置中使用向量 push_back 时 C++ 代码崩溃

> ID：13393901
> 
> 赞同：-1
> 
> 时间：2012-11-15T08:37:33.640
> 
> 标签：c++, vector, crash, release-mode, push-back

当我在 Visual Studio 2008 的发布配置中构建解决方案时，我在使用 c++ 向量时遇到问题。代码在调试配置中运行良好。我在网上搜索并没有找到解决我遇到的问题的解决方案。

这是我的代码的解释。我已经定义了一个类如下。此类存储平面的一些参数，包括其在空间中的位置等。

```
class PIVPlaneConfig{

public:
int update(){                       

    // Create the frame list for the PIV plane.
    for ( int   i = ListStart ;
                i <= ListEnd;
                i = i + ListStep){  
        FramesList.push_back(i);            
    }

    return 0;
};  

~PIVPlaneConfig(){
    DirRaw          = "";
    DirProcessed    = "";
    FnamePreVel     = "";

    // Reset frames list
    FramesList.clear();
};

std::string DirRaw;
std::string DirProcessed;
std::string FnamePreVel;
double pivScaleFactor;
double pivUnitFactorXY;
double pivUnitFactorVxVy;
Point2D planeOriginLocal;
Point3D planeOriginGlobal;
Point3D planeNormal;

bool CS;
int OutOfPlaneVelocity;

// Image Processing Configuration.
std::string FnamePreRawImage;
std::string FnameMaskImage;
int ElemShape;
int ElemShapeCols;
int ElemShapeRows;
Point2D ElemShapeAnchor;     
int pivResolutionHorizontal;
int pivResolutionVertical;

// File listing.
int ListStart;
int ListStep;
int ListEnd;
std::vector < int > FramesList;
int nPlanes;

}; 
```

我有一个函数可以配置 12 个不同的 PlaneConfigs：

```
int PlaneConfigInit( int FileIndexStart, int FileIndexStep, int FileIndexEnd, vector < PIVPlaneConfig >& Planes ) 
```

每个 PlaneConfig 将在函数 PlaneConfigInit 中进行如下初始化。为简单起见，我只带了PLANE01的初始化。

```
double CatiaScalingFactor = 3.8 / 84.839;

PIVPlaneConfig Plane;   

// PLANE01
pivPlane.DirRaw = "Y:\\Rectangular\\Sagittal_01_001";
pivPlane.DirProcessed = "Y:\\Rectangular\\Sagittal_01_001\\Processed";
pivPlane.FnamePreVel = "Sagittal_01_";
pivPlane.FnamePreRawImage = "Sagittal_01_";
pivPlane.OutOfPlaneVelocity = FR3D_MISSING_OUT_OF_PLANE_W;

//  File list.
pivPlane.ListStart = FileIndexStart;
pivPlane.ListStep = FileIndexStep;
pivPlane.ListEnd = FileIndexEnd;

pivPlane.planeOriginLocal.x = 0;
pivPlane.planeOriginLocal.y = 0;

pivPlane.planeOriginGlobal.x = -39.206  * CatiaScalingFactor;
pivPlane.planeOriginGlobal.y = 100.0    * CatiaScalingFactor;
pivPlane.planeOriginGlobal.z = -52.316  * CatiaScalingFactor;

//  Plane unit normal vector.
pivPlane.planeNormal.x = 0;
pivPlane.planeNormal.y = 0;
pivPlane.planeNormal.z = 1.0;   

pivPlane.CS = FR3D_CS_RECT;
pivPlane.update();  
pivPlanes.push_back( pivPlane );    
pivPlane.~PIVPlaneConfig(); 
```

我完全将上面的代码用于第二个平面并继续执行此操作，直到所有 12 个平面（PLANE01、PLANE02、...、PLANE12）都在函数 PlaneConfigInit 中初始化。这在调试中非常有效，但在发布时无效。PLANE01 的初始化是在没有崩溃的情况下完成的，但是当涉及到 PLANE02 时，它会在我使用 push_back() 函数的类的 update() 函数处崩溃。

我希望我已经很好地解释了我的问题。如果需要更多信息，请告诉我。

如果有任何帮助，我将不胜感激。

艾哈迈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:45:20.500

仅在发布模式下发生的崩溃几乎总是由于未初始化的内存。

调用 PLANE02 的函数时，FileIndexStart、FileIndexStep 和 FilIndexEnd 设置为什么？另外，你能检查一下在崩溃之前实际调用了多少次 push_back 吗？（例如通过使用`std::cout<<(i - ListStart)<<std::endl;`内部循环）

# regex - 在 superboxselect extjs 中使用正则表达式搜索

> ID：13393904
> 
> 赞同：0
> 
> 时间：2012-11-15T08:37:43.810
> 
> 标签：regex, extjs, extjs4

我需要配置 extjs4 的 superboxselect 组件并使其使用正则表达式进行搜索。有谁知道我应该覆盖哪个函数，或者 extjs 是否已经有一个支持这个的函数或属性？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:22:39.477

我不完全理解你的问题，但 ExtJS 支持[正则表达式](http://docs.sencha.com/ext-js/4-1/#!/api/RegExp)。
您可以使用 RegExp 搜索字符串，如下所示：

```
var regex = /in/g; //or new RegExp("in","g");
var result = regex.exec("this is the string to search in");
console.log(result[1]); 
```

从文档：

> 如果匹配成功，则 exec 方法返回一个数组并更新正则表达式对象的属性。返回的数组将匹配的文本作为第一项，然后是每个匹配的包含捕获的文本的捕获括号的一项。如果匹配失败，则 exec 方法返回 null。

# c# - EmguCV 从哪里使用 tesseract？

> ID：13393906
> 
> 赞同：0
> 
> 时间：2012-11-15T08:37:56.360
> 
> 标签：c#, dllimport, emgucv

在 Emgu.CV.OCR 示例项目中，有一个 class `Tesseract`，它是 Tesseract-OCR 引擎的包装器。在 Tesseract.cs 中，有如下声明：

```
[DllImport(CvInvoke.EXTERN_LIBRARY, CallingConvention = CvInvoke.CvCallingConvention)]
private static extern IntPtr TessBaseAPICreate(); 
```

CvInvoke.EXTERN_LIBRARY 指向 cvextern.dll。

我在 DependencyWalker 中打开了 cvextern.dll，发现任何地方都没有任何 Tesseract 函数，只有 OpenCV 函数。

我确定我遗漏了一些明显的东西，但是这里使用的实际函数定义在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-21T08:00:42.860

如果我在 DependencyWalker 中打开并在左侧窗格中`cvextern.dll`单击，我可以在列表中看到 Tesseract 函数。`CVEXTERN.DLL`您将不得不向下滚动该列表的大部分内容，但我可以找到：

```
TessBaseAPICreate
TessBaseAPIExtractResult
TessBaseAPIGetUTF8Text
TessBaseAPIInit
TessBaseAPIRecognizeImage
TessBaseAPIRelease
TessBaseAPISetVariable 
```

为了进一步证明，我下载了 Emgu 的源代码（[此处](http://file.emgu.com/wiki/index.php/Download_And_Installation)的说明），Tesseract 库包含在 \Emgu.CV.Extern\tesseract 中。

上述方法的实现在\Emgu.CV.Extern\tesseract\tesseract.cpp。本质上，他们使用`EmguTesseract`继承自`tesseract::TessBaseAPI`.

# windows - 麻烦在 Windows 7 上安装 phpunit，wamp 服务器

> ID：13393907
> 
> 赞同：2
> 
> 时间：2012-11-15T08:38:02.683
> 
> 标签：windows, installation, phpunit, pear

我尝试在 Windows 7 上安装 phpunit，但我遇到了这样的问题：

```
C:\wamp\bin\php\php5.3.13>pear channel-discover components.ez.no
Adding Channel "components.ez.no" succeeded
Discovery of channel "components.ez.no" succeeded

C:\wamp\bin\php\php5.3.13>pear channel-discover pear.phpunit.de
Channel "pear.phpunit.de" is already initialized

C:\wamp\bin\php\php5.3.13>pear channel-discover pear.symfony.com
Channel "pear.symfony.com" is already initialized

C:\wamp\bin\php\php5.3.13>pear install --alldeps phpunit/PHPUnit
downloading PHPUnit-3.7.9.tgz ...
Starting to download PHPUnit-3.7.9.tgz (116,997 bytes)
.........................done: 116,997 bytes
Could not delete pear\phpunit, cannot rename pear\.tmpphpunit
ERROR: commit failed 
```

我不知道发生了什么，我已经搜索了几个小时但找不到解决方案。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T01:23:05.110

之前没有看到这个错误，但它似乎是一个权限问题。

尝试使用管理员权限运行 cmd 提示符并使用

```
pear install --force --alldeps phpunit/PHPUnit 
```

以防由于缓存问题而出现其他任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:26:50.347

您需要以管理员身份打开命令行窗口。

请参阅此处的说明。 [http://beagile.biz/php-pear-package-install-issues-on-windows/](http://beagile.biz/php-pear-package-install-issues-on-windows/)

# apache - 压缩/压缩 xsl 文件

> ID：13393908
> 
> 赞同：0
> 
> 时间：2012-11-15T08:38:10.580
> 
> 标签：apache, zip, gzip

我有一个大小约为 12kb 的 xsl 文件，我想压缩它。有没有办法压缩xsl文件

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html"/>
<xsl:template match="/page1">
    <form name="form1" style="margin:0px;padding:0px" action="action.php" method="post" onsubmit="return checkData();">
        <xsl:variable name="name" select="op1 />        
        <xsl:variable name="name" select="op2 />
    </form>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:56:01.020

这取决于您的服务器。在 Apache 上，您需要在 httpd.conf 文件中激活 mod_gzip。谷歌搜索 mod_gzip 将提供大量启用它的指南。

如果您无法编辑您的根 Apache 配置，则有两种选择。如果 XML 文件是静态的，请手动压缩它，将文件命名为 foo.xsl.gz，如果尚未激活，请在该目录`MultiViews`的文件中打开。`.htaccess`如果 XML 文件不是静态的，或者您甚至无法使用 .htaccess，最后的办法是将 XML 文件更改为 PHP 脚本，然后将您的 ob_* 命令包裹在代码周围以输出 XML。

# cocoa-touch - UIImage 上传到休息服务器的方向会改变吗？

> ID：13393909
> 
> 赞同：0
> 
> 时间：2012-11-15T08:38:10.850
> 
> 标签：cocoa-touch, file-upload, uiimage, image-upload

相机拍照，上传到api成功，但图像方向会向左转。

```
NSData *data = [[[NSMutableData alloc] initWithData:imageData] autorelease];
NSString *path = [[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"file"];
BOOL _B = [data writeToFile:path atomically:YES];

if (!_B) {
    NSLog(@"write to file error!");
    return;
}
[request addFile:path forKey:@"photofile"]; 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:40:20.247

好的，我解决了这个问题。

```
- (UIImage *)fixOrientation:(UIImage *)aImage {

// No-op if the orientation is already correct
if (aImage.imageOrientation == UIImageOrientationUp) 
    return aImage;

// We need to calculate the proper transformation to make the image upright.
// We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
CGAffineTransform transform = CGAffineTransformIdentity;

switch (aImage.imageOrientation) {
    case UIImageOrientationDown:
    case UIImageOrientationDownMirrored:
        transform = CGAffineTransformTranslate(transform, aImage.size.width, aImage.size.height);
        transform = CGAffineTransformRotate(transform, M_PI);
        break;

    case UIImageOrientationLeft:
    case UIImageOrientationLeftMirrored:
        transform = CGAffineTransformTranslate(transform, aImage.size.width, 0);
        transform = CGAffineTransformRotate(transform, M_PI_2);
        break;

    case UIImageOrientationRight:
    case UIImageOrientationRightMirrored:
        transform = CGAffineTransformTranslate(transform, 0, aImage.size.height);
        transform = CGAffineTransformRotate(transform, -M_PI_2);
        break;
    default:
        break;
}

switch (aImage.imageOrientation) {
    case UIImageOrientationUpMirrored:
    case UIImageOrientationDownMirrored:
        transform = CGAffineTransformTranslate(transform, aImage.size.width, 0);
        transform = CGAffineTransformScale(transform, -1, 1);
        break;

    case UIImageOrientationLeftMirrored:
    case UIImageOrientationRightMirrored:
        transform = CGAffineTransformTranslate(transform, aImage.size.height, 0);
        transform = CGAffineTransformScale(transform, -1, 1);
        break;
    default:
        break;
}

// Now we draw the underlying CGImage into a new context, applying the transform
// calculated above.
CGContextRef ctx = CGBitmapContextCreate(NULL, aImage.size.width, aImage.size.height,
                                         CGImageGetBitsPerComponent(aImage.CGImage), 0,
                                         CGImageGetColorSpace(aImage.CGImage),
                                         CGImageGetBitmapInfo(aImage.CGImage));
CGContextConcatCTM(ctx, transform);
switch (aImage.imageOrientation) {
    case UIImageOrientationLeft:
    case UIImageOrientationLeftMirrored:
    case UIImageOrientationRight:
    case UIImageOrientationRightMirrored:
        // Grr...
        CGContextDrawImage(ctx, CGRectMake(0,0,aImage.size.height,aImage.size.width), aImage.CGImage);
        break;

    default:
        CGContextDrawImage(ctx, CGRectMake(0,0,aImage.size.width,aImage.size.height), aImage.CGImage);
        break;
}

// And now we just create a new UIImage from the drawing context
CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
UIImage *img = [UIImage imageWithCGImage:cgimg];
CGContextRelease(ctx);
CGImageRelease(cgimg);
return img; 
```

}

# xna - XNA 中的随机纹理

> ID：13393911
> 
> 赞同：4
> 
> 时间：2012-11-15T08:38:13.870
> 
> 标签：xna, textures

好的，所以我正在开发这款游戏，我是 XNA 的新手（我正在使用 4.0），我想要做的是每次生成敌人时都有不同的纹理。

所以我有这些图像“image1.png”、“image2.png”等等。我希望它在每次生成新敌人时使用不同的纹理，到目前为止它只在游戏运行时加载随机图像，所以问题必须是随机方法不会为每个生成更新而是在开始时设置的游戏。我在网上搜索了很多并尝试了我虽然可以工作但没有希望的解决方案......所以这是我的代码

在`LoadContent()`我有这个代码：

```
Random textureRandom = new Random();
            int skinRandom = textureRandom.Next(1, 4);
            string lamp = string.Concat("image", skinRandom.ToString());
            enemyTex = Content.Load<Texture2D>(lamp) as Texture2D; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:35:05.537

如果我没记错的话，Game.LoadContent() 方法在初始化 (Game.Initialize()) 以加载游戏资源时只调用一次。您可以强制游戏重新加载这些资源，但由于您不想重新加载所有资源，我建议在 LoadContent() 方法中加载您需要的所有图像，如下所示：

```
List<Texture2D> texturePool = new List<Texture2D>();
Random rng = new Random();

protected override void LoadContent()
{
    for(int i = 0; i < 4; i++)
        texturePool.Add(Content.Load<Texture2D>("image" + i.ToString()));
} 
```

然后在敌人生成之前，您可以通过从加载的池中选择一个来更改使用的纹理。

```
enemyTex = texturePool[rng.NextInt(texturePool.Count)]; 
```

也许您可以将标题更改为“XNA 中的随机纹理”或类似的名称，因为您希望在每次生成而不是每次绘制时都更改纹理，并且该技术可以应用于更多情况。

# css - 如何强制悬停状态 div 的 z-index 使其出现在同位素元素上方？

> ID：13393913
> 
> 赞同：0
> 
> 时间：2012-11-15T08:38:22.887
> 
> 标签：css, z-index, jquery-isotope

我试图让悬停状态 div 出现在同位素元素（图像缩略图）上方。

我已经设法让它高于其他 div，但不是这个特定的 div。

jsfiddle 准确地显示了我在哪里，下面的 jquery 是我为悬停效果运行的脚本。

我正在使用 isotope.min.js 文件的修改版本来删除一些添加到容器中的相对定位。

**jsfiddle**

[http://jsfiddle.net/rwone/nvtCW/](http://jsfiddle.net/rwone/nvtCW/)

**脚本**

```
$(".magic").hover(
function () {
console.log($(this).position().top);
$(this).find('.hidden_db_data_div')
.css({'left':$(this).position().left+40 + "px" + "!important", 'top':'-50px'}).fadeIn(500);

},
function() { 
$(this)
.find('.hidden_db_data_div')
.fadeOut(100);
}                
); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:52:48.797

啊，z-index 的魔力。当你有时间时，最终去阅读它们。所有这些虚假的工作方式真的很有趣。

我理解正确，您的问题是非悬停框位于悬停时出现的框上方，是吗？

长话短说，将悬停的周围元素放在更高的 z-index 中。

```
$(".magic").hover(
  function () {
    $(this)
      .css('z-index', '999') // This Line - Gives the element a high z-index
      .find('.hidden_db_data_div') 
      .css({'left':$(this).position().left+40 + "px" + "!important",'top':'-50px'}).fadeIn(500);
  },
  function() { 
    $(this)
      .css('z-index', '') // And this line - Gets rid of the inline z-index again.
      .find('.hidden_db_data_div')
      .fadeOut()
  }                
); 
```

编辑：哦，当我在做的时候，有工作的 JSFiddle：http: [//jsfiddle.net/nvtCW/10/](http://jsfiddle.net/nvtCW/10/)

# hudson - Hudson + 获取构建状态

> ID：13393914
> 
> 赞同：1
> 
> 时间：2012-11-15T08:38:28.090
> 
> 标签：hudson, hudson-api

我有一份与 hudson 和 Ant 合作的工作“A”。如果当前构建状态为失败，我需要在 3 小时后再次运行构建“A”。如果当前构建状态为 Success，则无需执行任何操作。

有什么办法可以自动化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:20:50.957

你可以使用一个[参数化的触发器插件](http://wiki.hudson-ci.org/display/HUDSON/Parameterized+Trigger+Plugin)，你可以在其中触发两次通常的工作：

*   一个按需
*   仅当第一个实例失败时。

![扳机](../Images/550f744d9a4d3aeb4068b4121c557b9b.png)

# tfs - 如何在 TFS 中为组的特定用户提供签出和签入访问权限

> ID：13393915
> 
> 赞同：0
> 
> 时间：2012-11-15T08:38:29.650
> 
> 标签：tfs, permissions, active-directory, user-permissions

有一些组，比如说贡献者，我想只给该组中的特定个人提供签出访问权限。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T10:47:10.003

根据他们的定义，组代表具有相同权限的用户的“容器”。

您将需要从组中删除用户（或禁用组继承）并显式分配他或在具有您需要分配的权限的新组中分配他。

# python - 在 python 中使用 smtplib 将 django FileField 内容作为电子邮件附件发送？

> ID：13393917
> 
> 赞同：1
> 
> 时间：2012-11-15T08:38:39.330
> 
> 标签：python, django, email, smtplib, filefield

我想发送带有各种附件的电子邮件。这些附件作为 FileField 存储在 django 模型中。我设法创建邮件并发送附件，但附件是空的，而我希望它包含 FileField 内容。谢谢你的帮助！

```
def sendEmailHtml(fromaddr, toaddrs, body, subject, attachmentFiles=[]):
    """ Sends HTML email using hardcoded server parameters

    attachmentFiles is a list of FileFields
    """
    # Create message container - the correct MIME type is multipart/alternative.
    msg = MIMEMultipart('alternative')
    msg['From'] = fromaddr
    msg['To'] = toaddrs
    msg['Subject'] = subject
    # Create the body of the message
    html = """\
    <html>
      <head></head>
      <body>
        """+body+"""
      </body>
    </html>
    """
    # Record the MIME types of the parts 
    part1 = MIMEText(html, 'html')
    # Attach parts into message container.
    # According to RFC 2046, the last part of a multipart message, in this case
    # the HTML message, is best and preferred.
    msg.attach(part1)
    # add attachments
    for file in attachmentFiles:       
        part = MIMEBase('application', 'octet-stream')
        part.set_payload(unicode(file.read(), 'utf-8'))
        Encoders.encode_base64(part)
        part.add_header('Content-Disposition', 'attachment', 
               filename=file.name)
        msg.attach(part)        

    # Send the message via local SMTP server.
    username = 'example@gmail.com'
    password = 'examplepwd'
    server = smtplib.SMTP('smtp.gmail.com:587')
    server.starttls()
    server.login(username,password)
    server.sendmail(fromaddr, toaddrs, msg.as_string())
    server.quit() 
```

我想以下几行是错误的，所以我尝试了许多不同的版本，暂时没有成功。您的帮助将不胜感激。

```
 part = MIMEBase('application', 'octet-stream')
        part.set_payload(unicode(file.read(), 'utf-8'))
        Encoders.encode_base64(part) 
```

编辑：我不明白为什么 file.read() 返回空内容...如果有人可以解释，那就太好了。无论如何，这是一个更正的函数，它有效：

```
def sendEmailHtml(fromaddr, toaddrs, body, subject, attachmentFiles=[]):
    """ Sends HTML email using hardcoded server parameters

    attachmentFiles is a list of FileFields
    """
    # Create message container - the correct MIME type is multipart/alternative for alternative
    # formats of the same content. It's related otherwise (e.g., attachments).
    msg = MIMEMultipart('related')
    msg['From'] = fromaddr
    msg['To'] = toaddrs
    msg['Subject'] = subject
    # Create the body of the message (a plain-text and an HTML version).
    # Note: email readers do not support CSS... We have to put everything in line
    html = """\
    <html>
      <head></head>
      <body>
        """+body+"""
      </body>
    </html>
    """
    # Record the MIME types of both parts - text/plain and text/html.
    part1 = MIMEText(html, 'html')
    # Attach parts into message container.
    # According to RFC 2046, the last part of a multipart message, in this case
    # the HTML message, is best and preferred.
    msg.attach(part1)
    # add attachments
    # for debugging
    debug = False
    if debug:
        # force the presence of a single attachment
        if (len(attachmentFiles)!=1):            
            raise NameError("The number of attachments must be exactly 1, not more, not less.")
        else:
            # print the value of every possible way to obtain the content
            content = "[1] "+unicode(attachmentFiles[0].read(), 'utf-8')
            content += "[2] "+attachmentFiles[0].read()
            content += "[3] "+str(attachmentFiles[0])
            content += "[4] "+open(str(attachmentFiles[0]),'r').read()            
            if (len(content)==0):
                raise NameError("The file to be attached is empty !")
            else:
                # print the content
                raise NameError("Everything ok: content="+content)
                pass
    # end of debugging code
    for file in attachmentFiles:
        format, enc = mimetypes.guess_type(file.name)
        main, sub = format.split('/')
        part = MIMEBase(main, sub)       
        #part = MIMEBase('application', 'octet-stream')
        part.set_payload(open(str(file),'r').read())
        #Encoders.encode_base64(part)
        Encoders.encode_quopri(part)
        part.add_header('Content-Disposition', 'attachment', 
               filename=file.name)
        msg.attach(part)        

    # Send the message via local SMTP server.
    username = 'example@gmail.com'
    password = 'thepassword'
    server = smtplib.SMTP('smtp.gmail.com:587')
    server.starttls()
    server.login(username,password)
    server.sendmail(fromaddr, toaddrs, msg.as_string())
    server.quit() 
```

注意：我忘记了打开后的关闭指令。

# python - 我该如何解析？

> ID：13393919
> 
> 赞同：0
> 
> 时间：2012-11-15T08:38:46.117
> 
> 标签：python

**MUC20** 17615 NP_689886.2 **MET** 01280 NP_001120972.1 体外；体内；酵母 2-杂交 15314156

**SMURF2** 06901 **NP_073576.1 TFPI2** 08962 NP_006519.1 酵母 2-杂交 15231748

**ERBB2** 01281 NP_004439.2 **ERBB2** 01281 NP_004439.2 体外；体内 10372802,1706616,12354693,11500516

**ACPP** 01378 NP_001127666.1 **ERBB2** 01281 NP_004439.2 体外；体内 11067847,10851066,9705354

**PIK3R1** 01381 NP_852664.1 **ERBB2** 01281 NP_004439.2 体内 1351056,16843263

PLCG1 01398 NP_002651.2 ERBB2 01281 NP_004439.2 体内 1676673,1683701

……

请帮助我。我的数据看起来像这样。我只想使用 python 解析蛋白质的配对名称（粗体）。成对的名字应该像下面这样存储。例如，MUC20 10 MET。和 SMURF2 10 TFPI2。在名称之间，应插入数字 10。

MUC20 10 满足

SMURF2 10 TFPI2

ERBB2 10 ERBB2

ACPP 10 ERBB2

我怎样才能像上面那样解析？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:40:56.407

你能用空格分割然后取第 0 个和第 3 个元素并在它们之间插入“10”吗？

例如：

```
def parseString(origString):
    splitString = origString.split(' ')
    return splitString[0] + ' 10 ' + splitString[3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:43:40.637

这是（至少）三个问题：

1.  解析，即识别输入文件中感兴趣的信息，将其与您不感兴趣的内容分开。也许可以查看这部分的[正则表达式。](http://docs.python.org/2/library/re.html)
2.  将解析出的信息存储在合适的结构中。一个普通的 Python 列表就足够了。
3.  使用存储的信息生成其他一些新的“报告”，您可以在其中插入`10`s。只需遍历 (2) 中的列表，这是微不足道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:06:30.593

您可能不需要正则表达式来解决此问题，但如果您想使用它们，请尝试：

```
import re

pattern = re.compile('^(\w+)\D\d+\D\w+\D\d\D(\w+)')
groups = pattern.search(your_string).groups()
print groups[0] + ' 10 ' + groups[1] 
```

# objective-c - NSButtonCell 子类中未调用 imageRectForBounds

> ID：13393922
> 
> 赞同：5
> 
> 时间：2012-11-15T08:39:01.310
> 
> 标签：objective-c, macos, cocoa, nsbutton, nsbuttoncell

我需要创建一个带有图像和标题的 NSButton，但我不喜欢 cocoa 中的任何标准定位方法。

我决定子类化按钮单元并覆盖`-imageRectForBounds:`and`-titleRectForBounds:`来提供我的自定义位置。问题是该`-titleRectForBounds:`方法被正常调用，但`-imageRectForBounds:`不是。

按钮中的图像正常显示，因此单元格必须有一个框架来绘制我只是不知道它从哪里得到的图像。

代码真的很简单。目前我唯一做的就是继承 NSButtonCell 并覆盖这两个方法。然后在 IB 中，我选择一个 NSButton 并将其单元格类更改为我的自定义按钮单元格。

这是代码：

```
#import "JSButtonCell.h"

@implementation JSButtonCell

- (NSRect)titleRectForBounds:(NSRect)theRect
{
    NSLog(@"Bounds for title");
    NSLog(@"%@",NSStringFromRect(theRect));
    NSRect titleRect = [super titleRectForBounds:theRect];
    NSLog(@"Title rect");
    NSLog(@"%@",NSStringFromRect(titleRect));
    return titleRect;
}

- (NSRect)imageRectForBounds:(NSRect)theRect
{
    NSLog(@"Bounds for image");
    NSLog(@"%@",NSStringFromRect(theRect));
    NSRect imageRect = [super imageRectForBounds:theRect];
    NSLog(@"Image rect");
    NSLog(@"%@",NSStringFromRect(imageRect));
    imageRect.origin.y -= 20;
    return imageRect;
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-14T11:03:37.197

据我所知，几乎没有调试，默认`NSButtonCell`实现不会调用`drawImage:withFrame:inView:`. 为什么？我在论坛和 Apple 文档中都找不到答案（如果有人解释 - 我会很高兴 :)。我通过简单地覆盖`drawImage:withFrame:inView:`和调用来解决这个问题`imageRectForBounds:`：

```
- (void)drawImage:(NSImage *)image withFrame:(NSRect)frame inView:(NSView *)controlView
{
    [super drawImage:image withFrame:[self imageRectForBounds:frame] inView:controlView];
} 
```

# oracle - 如何插入到变量-1的表中

> ID：13393923
> 
> 赞同：0
> 
> 时间：2012-11-15T08:39:01.503
> 
> 标签：oracle, variables, insert, to-date, to-char

我在尝试通过从另一个表格中选择日期作为条件来插入表格时遇到问题。日期将从另一个表而不是 Oracle 中检索，因为应用程序存储自己的系统日期（即今天可以是 10 年后的未来 - 20201124）。然后，日期的条件是 ASOF = TODAY-1 并且 DATE 在 TODAY 和 TODAY +1 之间。

这是我试图做的：

```
declare
   v_TODAY number;
begin 
   select TODAY into v_TODAY from LOCATION;
   execute immediate 'truncate table table_EOD';
   execute immediate 'insert into table_EOD (key1, key2, ASOF, IDATE)
   select key1, key2, ASOF, IDATE 
      from table
      where ASOF = to_char(to_date(v_TODAY)-1) 
      and DATE between v_TODAY and to_char(to_date(v_TODAY)+1)';
end;
/ 
```

我收到的错误是：

```
Error report:
ORA-00904: "V_TODAY": invalid identifier
ORA-06512: at line 6
00904\. 00000 -  "%s: invalid identifier" 
```

你能告诉我有什么问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:49:18.743

您遇到的错误是正确的，它不是[EXECUTE IMMEDIATE](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/dynamic.htm#BHCEBBAI)语句`v_today`范围内的有效标识符。您应该改用[绑定变量](http://docs.oracle.com/cd/E11882_01/server.112/e25789/glossary.htm#CNCPT44447)：

```
declare
   v_TODAY number;
begin 
   select TODAY into v_TODAY from LOCATION;
   execute immediate 'truncate table table_EOD';
   execute immediate 'insert into table_EOD (key1, key2, ASOF, IDATE)
   select key1, key2, ASOF, IDATE 
      from table
      where ASOF = to_char(to_date(:1)-1) 
      and DATE between :1 and to_char(to_date(:1)+1)'
     using v_today, v_today, v_today;
end;
/ 
```

还有两点。首先，如果您在 LOCATION 中有不止一行，那么您`select into ...`将无法正常工作。这是因为`v_today`只能保存一个值。将引发异常 TOO_MANY_ROWS；您将选择太多行！

其次，不需要第二个 EXECUTE IMMEDIATE。如果您引用的对象在编译块之前不存在，或者您正在动态生成 SQL，您只需在执行立即执行 DML。

您仍然需要执行`truncate`内部和 EXECUTE IMMEDIATE 语句，因为这是 DDL。这将为您留下以下内容：

```
declare
   v_TODAY number;
begin 

   select TODAY into v_TODAY from LOCATION; -- Still wrong!
   execute immediate 'truncate table table_EOD';

   insert into table_EOD (key1, key2, ASOF, IDATE)
   select key1, key2, ASOF, IDATE 
     from table
    where ASOF = to_char(to_date(v_TODAY)-1) 
      and DATE between v_TODAY and to_char(to_date(v_TODAY)+1);
end;
/ 
```

* * *

好的，从您的评论中，我刚刚意识到您实际上希望*今天*不是某个随机日期，并且您在 LOCATION 中使用*数字*作为*日期*，这是导致错误的原因。为什么不直接使用 Oracle 的 [ `sysdate`] 作为今天的日期？

```
declare
   v_TODAY date := sysdate;
begin 

   execute immediate 'truncate table table_EOD';

   insert into table_EOD (key1, key2, ASOF, IDATE)
   select key1, key2, ASOF, IDATE 
     from table
    where ASOF = trunc(sysdate) - 1
      and DATE between trunc(v_TODAY) and trunc(v_TODAY) + 1;
end;
/ 
```

如果您想使用自己的日期，则必须想办法在 LOCATION中放置*日期而不是数字。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:52:07.207

这里不需要 PL/SQL 或动态 SQL。

这样的事情应该这样做：

```
truncate table table_eod;

insert into table table_eod (key1, key2, asof, idate)
with today_data as (
   select today as v_today
   from location
)
select t.key1, t.key2, t.ASOF, t.IDATE 
from table t
  join today_data td on t.ASOF = to_char(to_date(td.v_TODAY)-1) 
      and DATE between td.v_TODAY and to_char(to_date(td.v_TODAY)+1); 
```

我不确定如果表格`LOCATION`包含多于一行，这是否能正常工作。

# asp.net-mvc - ASP.net MVC 3 不会下载生成的文件

> ID：13393924
> 
> 赞同：1
> 
> 时间：2012-11-15T08:39:03.463
> 
> 标签：asp.net-mvc, asp.net-mvc-3, actionresult, fileresult

这是来自我的控制器的代码片段......这一切都从我的索引开始。

```
 public ActionResult Index(...){
       //some code here
       return GenerateReport(...);
    } 
```

到目前为止...exporter.GenerateReport() 返回生成的excel文件的正确路径...

```
public ActionResult GenerateReport(...){
      string pathOfGeneratedFile = exporter.GenerateReport(...);
      return DownloadFile(pathOfGeneratedFile, "application/vnd.ms-excel");
}

public FileResult DownloadFile(string filePath, string contentType = "application/octet-stream"){
         return File(filePath, contentType, Path.GetFileName(filePath)); 
} 
```

一路上实际上没有发生任何错误/异常......但我期待文件一旦生成就可以下载......我手动打开使用 OpenXMl 生成的文件，它确实打开并存储了所有信息那里...

这是我的视图...我对按钮的值进行了一些解析以反映 GenerateReport 用户操作...这将提交给 Index 操作，如果单击生成按钮，它将确定用户操作...

```
<input class="btn btn-primary pull-right" type="submit" value="Generate Report" name="userAction"/> 
```

编辑：我认为我也使用了这个......

```
@using (Ajax.BeginForm(new AjaxOptions { HttpMethod = "Get", UpdateTargetId = "recordList", InsertionMode = InsertionMode.Replace })) 
```

顺便说一句，一旦所有操作完成......我可以在我的视图中看到一个垃圾值。我只想下载文件。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T09:01:57.010

您无法下载文件的原因是您正在使用 AJAX 异步请求。AJAX 响应不能包含文件下载。你可以在你的控制器中尝试这样的事情：

```
public ActionResult Index(...) {
    var fileName = GenerateReport();

    // store the file name somewhere on the server - do NOT pass it through the URL.
    this.TempData["DownloadFileName"] = fileName;
    this.TempData["DownloadContentType"] = "application/vnd.ms-excel";
    this.TempData.Keep("DownloadFileName");
    this.TempData.Keep("DownloadContentType");

    return new JavaScriptResult() { Script = "document.location = \"" + this.Url.Action("Download") + "\";" };
}

public ActionResult Download() {
    return File((string)this.TempData["DownloadFileName"], (string)this.TempData["DownloadContentType"], Path.GetFileName(filePath)); 
} 
```

因此，您的 AJAX 请求将导致重定向（不能使用 RedirectToAction，因为这将导致浏览器在 AJAX 请求内重定向）。然后，此重定向将指示浏览器以经典请求下载文件。

# c# - C#按钮可见淡入淡出

> ID：13393925
> 
> 赞同：0
> 
> 时间：2012-11-15T08:39:07.097
> 
> 标签：c#, winforms, button

我有一个带有 4 个按钮的表单。我想做以下几点：所有按钮都应该有相同的预动作。如果您按下任何一个按钮，就会使其他按钮消失，但不仅仅是`button1.Visible = false`. 我希望它们**消失**。

那可能吗？可以帮忙放吗？我在表单中发现了这一点，但无法找到按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:43:34.950

在 Windows 窗体中，您可以使用线程睡眠淡化更改不透明度的窗体，但窗体按钮没有该属性。此外，Windows 窗体不是为动画和令人惊叹的视觉效果而设计的，所以我猜你会更喜欢 WPF 来执行这些任务

检查这个：

[使用 .NET 和 C# 淡入表单](http://www.codeproject.com/Articles/10076/Fade-in-forms-using-NET-and-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T08:45:32.060

与一些开发信息类似的问题，它还建议您像 Jason 建议的那样考虑 WPF。

[C# 窗体上的滑动和淡入淡出控件](https://stackoverflow.com/questions/2917918/sliding-fading-controls-on-a-c-sharp-form)

# css-selectors - Selenium IDE 中的 css 定位器生成器没有获得第一个 ID

> ID：13393927
> 
> 赞同：0
> 
> 时间：2012-11-15T08:39:20.403
> 
> 标签：css-selectors, selenium-ide

假设我有一些 html，例如：

```
<div id="container1" class="wrap">
    <div class="somestyle">first content
    </div>
</div>
<div id="container2" class="wrap">
    <div class="somestyle">second content
    </div>
</div>
   .
   .
   .
<div id="containern" class="wrap">
    <div class="somestyle">nth content
    </div>
</div> 
```

在顶部使用 Selenium IDE、ID 和 CSS 定位器构建器记录测试，如果我单击“第一个内容”，我会得到如下信息：

```
css=div.somestyle 
```

另一方面，如果我从第二个开始点击任何其他内容，我会得到（我想要的）：

```
css=#container2 > div.somestyle,
   .
   .
   .
css=#containern > div.somestyle 
```

唯一的例外是第一个元素。

这是为什么？它是一个错误吗？我怎样才能避免，而不必重写整个 HTML 结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:15:27.243

由于所有三个容器的类都是相同的，因此要识别它的记录是这样的。不是但是。例如。如果您有三个具有相同名称的复选框，那么它将记录

```
click  | name=vehicle
click  | xpath=(//input[@name='vehicle'])[2]
click  | xpath=(//input[@name='vehicle'])[3] 
```

在您的代码中，所有容器的类都是相同的。

因此，识别容器 IDE 代码将像您提到的那样显示。首先它将直接显示，将被视为第一个条目。

```
css=div.somestyle 
```

下一个条目会像

```
css=#container2 > div.somestyle,
   .
   .
   .
css=#containern > div.somestyle 
```

# c++ - 交换两个类实例的最安全方法

> ID：13393928
> 
> 赞同：1
> 
> 时间：2012-11-15T08:39:20.990
> 
> 标签：c++, swap

用于`swap`交换两个类实例，有时可能会抛出错误。

```
#include <iostream>
#include <string>
using namespace std;

#include <cstring>
class Buffer {
public:
    Buffer(const string& s): buffer(s) {}
    string buffer;
};

template<class _Tx>
void SWAP(_Tx& a, _Tx& b) {
    size_t size = sizeof(_Tx);
    char buffer[size];
    memcpy(buffer, &a, size);
    memcpy(&a, &b, size);
    memcpy(&b, buffer, size);
}

int main() {
    Buffer a("This is a"), b("This is b");
    swap(a,b);
    cout << a.buffer << endl;

    SWAP(a,b);
    cout << b.buffer << endl;
    return 0;
} 
```

`std::swap`会做这样的事情：

```
template<class _Tx>
void swap(_Tx &a, _Tx &b) {
    _Tx t = a;
    a = b;
    b = t;
} 
```

`_Tx t = a;`将调用 的复制构造函数`_Tx`，`Buffer::Buffer(Buffer &e)`在这种情况下。此方法尝试分配一些内存，这可能会导致一些错误。

我尝试使用另一种方法而不是`std::swap`：

```
template<class _Tx>
void SWAP(_Tx& a, _Tx& b) {
    char buffer[sizeof(_Tx)];
    memcpy(buffer, &a, sizeof(_Tx));
    memcpy(&a, &b, sizeof(_Tx));
    memcpy(&b, buffer, sizeof(_Tx));
} 
```

这是一种安全的方式吗？？？

**使用 c++0x更新** `std::swap`可能是安全的。这是比较：[c99](http://ideone.com/Jo6vOH) vs. [c++0x](http://ideone.com/PJX2BL)

* * *

**REF** [what-is-the-copy-and-swap-idiom](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom) *感谢Donal Fellows的提醒*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:42:53.250

问题在于动态分配的指针`buffer`，你为什么不`std::string`改用

复制构造函数签名是：

```
Buffer(const Buffer &e) 
```

现在你交换对象：

```
int main(int agrc, char* argv[])
{
  Buffer a("This is a"), b("This is b");
  std::swap(a,b);
} 
```

std::swap 代码应该比你的 SWAP 代码快

```
template<class _Ty> inline
void swap(_Ty& _Left, _Ty& _Right)
{   // exchange values stored at _Left and _Right
  _Ty _Tmp = _Move(_Left);
  _Left = _Move(_Right);
  _Right = _Move(_Tmp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:48:11.887

它适用于这个特定的 Buffer 对象，但如果你将它与另一个类一起使用，它可能根本不安全。这是赋值运算符和/或类的复制构造函数的作用，以使其安全。

# python - Python写入和读取txt文件

> ID：13393932
> 
> 赞同：0
> 
> 时间：2012-11-15T08:39:39.723
> 
> 标签：python

```
def replace():
    import tkinter.filedialog
    drawfilename = tkinter.filedialog.askopenfilename()
    list1= int(open(drawfilename,'w'))
    del list1[-3:]

    input_list = input("Enter three numbers separated by commas: ")
    list2 = input_list.split(',')
    list2 = [int(x.strip())for x in list2]

    list1[0:0] = list2
    list1.write(list1)
    list1.close()

    import tkinter.filedialog
    drawfilename = tkinter.filedialog.askopenfilename()
    list1= open(drawfilename,'r')
    line = list1.readlines()
    list1.close() 
```

我想打开一个`.txt`包含 的文件`1,2,3,4,5,6,7,8,9`，删除最后三个值，然后要求用户输入三个数字并将它们添加到列表的开头（示例输入`12,13,14`给出`12,13,14, 1,2,3,4,5,6`）。然后我想用这个新列表覆盖原始列表。当用户再次打开例程时，我希望 list1 成为新的 list1。在 stackflow 的帮助下，我得到了新的 list1，但在打开和重写文本文件时遇到了困难。未声明 global list1 的错误会停止例程的进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:46:10.980

您对如何使用文件感到非常困惑。

首先，你为什么要这样做`int(open(filename, "w"))`？要打开文件进行写入，只需使用：

```
outfile = open(filename, "w") 
```

然后文件不支持项目分配，所以这样做`fileobject[key]`没有意义。另请注意，打开文件`"w"` *会删除*以前的内容！所以如果你想修改文件的内容，你应该`"r+"`使用`"w"`. 然后，您必须读取文件并解析其内容。在您的情况下，最好先读取内容，然后创建一个新文件来写入新内容。

要将数字列表写入文件，请执行以下操作：

```
outfile.write(','.join(str(number) for number in list2)) 
```

`str(number)`将整数“转换”为其字符串表示形式。使用逗号作为分隔符连接*iterable*`','.join(iterable)`中的元素并将*字符串*写入文件。*`outfile.write(string)`*

 **此外，将导入放在函数之外（可能在文件的开头），每次使用模块时都不需要重复它。

完整的代码可以是：

```
import tkinter.filedialog

def replace():
    drawfilename = tkinter.filedialog.askopenfilename() 
    # read the contents of the file
    with open(drawfilename, "r") as infile:
        numbers = [int(number) for number in infile.read().split(',')]
        del numbers[-3:]
    # with automatically closes the file after del numbers[-3:]

    input_list = input("Enter three numbers separated by commas: ")
    # you do not have to strip the spaces. int already ignores them
    new_numbers = [int(num) for num in input_list.split(',')]
    numbers = new_numbers + numbers
    #drawfilename = tkinter.filedialog.askopenfilename()  if you want to reask the path
    # delete the old file and write the new content
    with open(drawfilename, "w") as outfile:
        outfile.write(','.join(str(number) for number in numbers)) 
```

更新：如果你想处理多个序列，你可以这样做：

```
import tkinter.filedialog

def replace():
    drawfilename = tkinter.filedialog.askopenfilename() 
    with open(drawfilename, "r") as infile:
        sequences = infile.read().split(None, 2)[:-1]
        # split(None, 2) splits on any whitespace and splits at most 2 times
        # which means that it returns a list of 3 elements:
        # the two sequences and the remaining line not splitted.
        # sequences = infile.read().split() if you want to "parse" all the line

    input_sequences = []
    for sequence in sequences:
        numbers = [int(number) for number in sequence.split(',')]
        del numbers[-3:]

        input_list = input("Enter three numbers separated by commas: ")
        input_sequences.append([int(num) for num in input_list.split(',')])

    #drawfilename = tkinter.filedialog.askopenfilename()  if you want to reask the path
    with open(drawfilename, "w") as outfile:
        out_sequences = []
        for sequence, in_sequence in zip(sequences, input_sequences):
            out_sequences.append(','.join(str(num) for num in (in_sequence + sequence)))
        outfile.write(' '.join(out_sequences)) 
```

这应该适用于任意数量的序列。请注意，如果您在某处有额外的空间，您将得到错误的结果。如果可能的话，我会将这些序列放在不同的行上。**

# knockout.js - 如何在淘汰赛中将子集合绑定到不同的复选框列表

> ID：13393935
> 
> 赞同：0
> 
> 时间：2012-11-15T08:40:05.470
> 
> 标签：knockout.js, knockout-2.0

我有一个问题，我不知道如何解决。

我有这个页面，其中包含一个项目。每个项目都有成员，每个成员可以有一个或多个角色。我想展示某种“选择列表”，其中所有分配的角色都被“选中”，并且可以在更新模型以反映这些更改的同时从每个成员中添加或删除角色。

我创建了一个简单的[http://jsfiddle.net/vinblad/PhQRr/1/](http://jsfiddle.net/vinblad/PhQRr/1/)来演示我得到了什么，但正如我所说，我不知道如何解决这个问题，所以任何帮助都会很棒！

这是视图模型代码：

```
var viewModel = new function() {
   var self = this;
   self.project = ko.observable();
   self.roles = ko.observable();
};

viewModel.load = function() {
   var data = {"project":{"members":[{"member":{"name":"Vinblad
   Anders","id":13,"isDeleted":false},"roles":[{"name":"Editor","id":1,
   "isDeleted":false},{"name":"Admin","id":2,"isDeleted":false}],"id":1},{"member":
   {"name":"Gramer Mikael","id":14,"isDeleted":false},"roles": 
   [{"name":"Reader","id":1,"isDeleted":false}],"id":2}],"name":"Project 
   XYZ","number":338,"id":1},"roles":[{"name":"Admin","id":1,"isDeleted":false},  {
   "name":"Editor","id":2,"isDeleted":false}, {
   "name":"Reader","id":3,"isDeleted":false}]}
   viewModel.loadView(data);
};
viewModel.loadView = function(data) {
    viewModel.project(data.project);
    viewModel.roles(data.roles);
    ko.applyBindings(viewModel);    
};

viewModel.load(); 
```

*在这个示例中，数据是硬编码的，实际上数据来自 web 服务，我使用了 knockoutjs.mapping 插件。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T11:32:54.283

我没有看到问题，它甚至不像你所说的那样递归，如果项目的孩子有一个项目作为成员，那么它将是递归的。

创建 4 个 ViewModel 一个 EditProjectMembersViewModel，它有一个 ProjectViewModel 数组，它有一个 MemberViewModel 数组，它有一个 RoleViewModel 数组

[或者只是使用映射插件http://jsfiddle.net/Ed8Fv/](http://jsfiddle.net/Ed8Fv/)中自动生成的 Viewmodels

```
ko.applyBindings(ko.mapping.fromJS(data)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T13:18:48.503

我发布了一个非常基本的示例，说明如何[使用 knockout 创建复选框列表](http://www.ecofic.com/about/blog/create-a-checkBox-list-with-knockout)。我的示例无法像您提到的那样动态添加角色。但是，您应该能够使用 observableArray 来做到这一点。

# ios - 闪烁的 UIImageView

> ID：13393943
> 
> 赞同：3
> 
> 时间：2012-11-15T08:40:30.643
> 
> 标签：ios, ipad, uiimageview, flicker, redraw

我创建了一个带有主视图的信息亭应用程序和一个带有图像轮播的模式视图作为屏幕保护程序。每当触摸屏幕时，此模态视图就会向下滑动。

如果设备在应用程序运行的情况下长时间（一夜之间）单独放置，当屏幕保护模式动画消失时，屏幕会出现重绘问题。看起来操作系统在主屏幕的背景图像所在的位置没有任何东西可以绘制。主屏幕上的控件和文本按应有的方式绘制，只有背景图像被模态隐藏动画的伪影替换。这发生在两台设备（iPad 2 3G 16GB）上。这只发生在应用程序运行了很长时间的情况下，屏幕是否打开并不重要。有问题的背景 UIImageView 是一个普通的 UIImageView，除了“图像”之外没有任何属性发生变化。

它看起来像这样（客户端徽标和一些文字模糊）：[http ://tinypic.com/view.php?pic=2qx47bt&s=6](http://tinypic.com/view.php?pic=2qx47bt&s=6)

关于什么可能是错误的以及如何解决它的任何想法？

编辑：这是隐藏屏幕保护程序的代码。非常标准，没有恶作剧。

```
- (void)hideScreenSaver {
    dispatch_async(dispatch_get_main_queue(), ^{
        if (![[[self mainViewController] presentedViewController] isKindOfClass:[UINavigationController class]]) {
            [[self mainViewController] dismissModalViewControllerAnimated:TRUE];
        }
    });
} 
```

屏幕保护程序视图控制器是在 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 中创建的（在主线程中）

```
[[GMAppManager sharedManager] setScreenSaverViewController:[[AAScreenSaverViewController alloc] initWithNibName:@"AAScreenSaverViewController" bundle:nil]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:47:59.797

当你说

> 有问题的背景 UIImageView 是一个普通的 UIImageView，除了“图像”之外没有任何属性发生变化。

你能确保你`UIImageView`先清除它，然后再更改`Image`

我相信你一定知道。但是，以防万一，您可以尝试一下吗：

`youeImageView.image = nil`然后设置其他图像？

通过查看您提供的图像，恕我直言，原因似乎不是别的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T05:08:21.120

`我绝对遇到过这个问题，因为它只是 uikit 资源的泄漏。运行构建并分析和修复泄漏。还要在所有的 dealloc 上设置断点，并确保它们被调用。如果即使对类的一部分的单个引用被保留而不被释放，也不会调用 dealloc。还要检查您传递参数的所有对象：self。如果使用 self 的对象未释放，这些对 self 的引用也将阻止 dealloc。如果循环很紧，自动释放池将不会耗尽。尝试使用显式发布。委托需要分配而不是保留。

发布更多错误和问题，我来看看。你有一个很酷的项目。

# c# - 概念检查器：Farseer 中的碰撞情况

> ID：13393945
> 
> 赞同：4
> 
> 时间：2012-11-15T08:40:40.120
> 
> 标签：c#, xna, farseer

我使用 Farseer 已经有一段时间了，正在做一个物理教学平台项目。我脑子里有几个关于引擎的问题在很长一段时间内都没有得到解答，其中许多是关于引擎的碰撞处理。

许多人似乎无法理解引擎的工作原理，部分原因是 Farseer 缺乏适当的 API。**对于那些知道的人来说，确认**以下概念并**杀死**任何错误的概念可能是一个好主意。

## 概念 0：两个阶段

Farseer中的碰撞分为两个阶段：

1.  宽相碰撞
2.  精确碰撞（请更正我对术语的使用，如果有另一个更正式的名称......）

## 概念 1：Broadphase

Farseer 使用广泛的相位碰撞，将在场景中发现潜在的碰撞。所述宽相碰撞测试由...

1.  使用四叉树，可以在包“Farseer.Collision”中找到。

2.  “Farseer.Dynamics.World”类引用了“Farseer.Collision.QuadTreeBroadphase”。

3.  “Farseer.Collision.QuadTreeBroadphase”引用了“Farseer.Collision.QuadTree”。

4.  还进行了进一步的边界框测试。

5.  如果我们发现需要知道哪对固定装置有可能发生碰撞，我们可以这样做......

    ```
    /* Game.Initialize */
    public override void Initialize() {
        OtherIrrelevantInitCode();
        _world.OnBroadphaseCollision += BroadphaseHandler;
        base.Initialize();
    }
    public void BroadphaseHandler(ref FixtureProxy fp1, ref FixtureProxy fp2) {
        // code to read about fp1 and fp2
    } 
    ```

但是之后...

**小问题1**

有哪些常见情况有助于我们了解哪些设备对可能发生碰撞？

## 概念二：事件的意义

定义两个关键字：

1.  接触：两个物体接触。数组 Manifold.Points**不是空**的。
2.  碰撞：两个物体**第一次**接触。

**BeforeCollision**表示两个对象**没有碰撞**也**没有接触**。

**OnCollision**表示两个对象正在**碰撞**，但**触摸**不会触发此事件。

**AfterCollision**意味着两个物体**正在碰撞**，但现在它们**只是接触**。

**OnSeparation**表示两个对象**正在接触**，但现在它们不是。

## 概念 3：使用事件

宽相碰撞测试和精确碰撞测试**始终**进行。

**通过在事件OnCollision**中返回 false或使用 IgnoreCollision 方法可以禁用精确碰撞。

我不止一次听到人们说“让 OnCollision 为空并返回 true”。这到底是什么意思？使用事件意味着我们希望在上述事件发生时应用额外的效果（例如杀死敌人、得分、播放声音等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T11:17:38.663

**此答案适用于 Farseer Physics 3.3.1**（当前稳定版本，在撰写本文时）

* * *

**Broad-phase**只是一种性能优化。它可以快速确定*可能*发生碰撞的物体，*因此不能*碰撞的物体不会进行更昂贵的窄相碰撞检测运行。

* * *

以我的经验，Farseer 中的**事件**没有设计得尽可能好。我发现我不得不为自己的游戏修改它们——但幸运的是，这段代码实际上并不难阅读和修改。此外，文档在某些地方也不准确。

## 以下是 Farseer Physics 中事件的*实际*作用：

**`BeforeCollision`**当广泛阶段注册一个新的*潜在*碰撞时发生，在它`Contact`为两个固定装置创建一个对象之前。您可以通过在事件处理程序中`Contact`返回来阻止创建。`false`

a 的存在`Contact`并不一定意味着这两个夹具*实际上*是接触的——只是广泛阶段成功了。A`Contact`可以触摸/不触摸，并且可以启用/禁用（它们开始时启用和不触摸）。

**`OnCollision`**当`Contact`从不接触变为接触时发生。您可以通过返回 false 来禁用联系人。奇怪的是，如果您返回 true，您可以重新启用另一个事件处理程序在该步骤中禁用的联系人（这是我为自己的游戏更改的内容之一）。

只有启用的触摸接触对物理模拟有任何影响。

**`OnSeparation`**是相反的`OnCollision`：当接触从接触变为不接触时触发。无法在此处禁用/启用联系人。

**`AfterCollision`**在该帧上的物理模拟中涉及的每一个都被调用`Contact`（所以：那些被启用、触摸而不是在一个睡着的岛上）。它在物理模拟步骤之后调用，但在清理之前 - 最值得注意的是之前`Body.Force`和`Body.Torque`被清理（对于声音效果等很方便）。

* * *

通常你只是使用这些事件来触发你的效果——粒子、声音、游戏机制，比如摧毁物体，等等。在这种情况下，您订阅您想要的任何一个，做任何您喜欢的事情，然后返回 true （不禁用/覆盖联系人）。

如果您想弄乱物理引擎或禁用联系人（尤其是当您意外地使用另一个事件处理程序重新启用它们时，正如我之前提到的），它会变得更加复杂。如果 Farseer 的内置事件对您不起作用，那么进入它的代码并添加您自己的代码是完全合理的。在这个高级级别，实际上有必要从源代码构建，这样您就可以准确地检查到底发生了什么。

# php - Symfony2 + OneToMany + 必须保存数据？

> ID：13393950
> 
> 赞同：0
> 
> 时间：2012-11-15T08:41:02.443
> 
> 标签：php, symfony, doctrine-orm, one-to-many

我有两个实体：

KTH :

```
namespace Nauka\OneBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
* Nauka\OneBundle\Entity\Kth
*
* @ORM\Table(name="kth")
* @ORM\Entity
*/
class Kth
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $imie
 *
 * @ORM\Column(name="imie", type="string", length=30)
 */
private $imie;

/**
 * @var string $nazwisko
 *
 * @ORM\Column(name="nazwisko", type="string", length=30)
 */
private $nazwisko;

/**
 *
 * @var integer $adres
 * @ORM\OneToMany(targetEntity="Adres", mappedBy="kth")
 */
private $adres;

public function __construct() {
    $this->adres = new ArrayCollection();
}

public function __toString() {
    return $this->nazwisko;
}
======= SET & GET functions ======= 
```

ADRES 命名空间 Nauka\OneBundle\Entity；

```
use Doctrine\ORM\Mapping as ORM;

/**
 * Nauka\OneBundle\Entity\Adres
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Adres
{
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string $ulica
 *
 * @ORM\Column(name="ulica", type="string", length=30)
 */
private $ulica;

/**
 * @var string $dom
 *
 * @ORM\Column(name="dom", type="string", length=5)
 */
private $dom;

/**
 *
 * @var type 
 * @ORM\ManyToOne(targetEntity="Kth", inversedBy="adres");
 */
private $kth;

public function __toString() {
    return $this->ulica;
}
=======SET & GET functions =========== 
```

第 K 种形式 - KthType()

```
class KthType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
$builder
        ->add('imie')
        ->add('nazwisko')
            ->add('adres','collection',array(
                'type' => new AdresType(),
                'allow_add' => true,
                'allow_delete' => true
            ))
    ;
} 
```

Adresy 形式 - AdresType()

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
$builder
->add('ulica')
->add('dom');
} 
```

控制器中的操作：

```
public function testAction(Request $request)
{

  $adres = new Adres();
  $kth = new Kth();

  $kth->getAdres()->add($adres);
  $formularz = $this->createForm(new KthType(), $kth);

  if($request->isMethod('POST'))
    {
      $formularz->bindRequest($request);
      $query = $this->getDoctrine()->getEntityManager();
      $query->persist($formularz);
      $query->flush();
      return new Response('Done');
     } 

    return $this->render("NaukaOneBundle:Main:widok1.html.twig",array(
       'formularz' => $formularz->createView()
   )); 
} 
```

当我尝试使用 Kth 形式向数据库添加一些东西时 - symfony 给我：

```
The class 'Symfony\Component\Form\Form' was not found in the chain configured namespaces Nauka\OneBundle\Entity
500 Internal Server Error - MappingException 
```

那么有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T21:22:55.323

我认为您必须保留表单的数据，而不是表单..

```
if($request->isMethod('POST'))
{
  $formularz->bindRequest($request);
  $query = $this->getDoctrine()->getEntityManager();
  $query->persist($formularz**->getData()**);
  $query->flush();
  return new Response('Done');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:32:19.857

在你的情况下，你不能持久化`Form`实例`$formularz`。

您打算做的实际上是持久化由`$kth`变量引用的实体。

`if`将控制器操作中的块替换为：

```
if ($request->isMethod('POST') && $formularz->bindRequest($request)->isValid()) {
    $em = $this->getDoctrine()->getEntityManager();
    $em->persist($kth);
    $em->flush();

    return new Response('Done');
} 
```

# android - android TextView 的 HTML 所见即所得

> ID：13393951
> 
> 赞同：0
> 
> 时间：2012-11-15T08:41:04.147
> 
> 标签：android, textview, wysiwyg

Android TextView 中支持的 HTML 元素是否存在所见即所得。我正在为 Android 应用程序创建基于浏览器的管理，但找不到 WYSIWYG 来创建将在 TextView 元素中发布并支持 HTML 标签的内容。如果有其他选择，请分享一些想法。

# html - mysql按复选框数组数据排序

> ID：13393958
> 
> 赞同：1
> 
> 时间：2012-11-15T08:42:11.003
> 
> 标签：html, mysql, checkbox

* * *

大家好，我有一个关于mysql查询的快速问题。

我正在尝试进行选择，但我不确定它是否可以完成 - 或者我是否做对了。

我有一个表，其中包含一个名为 ListeningMethod 的字段，其中包含来自逗号分隔数组值的值，这些值是从 html 复选框插入的。有 5 个可能的条目，该字段可以包含所有复选框值，也可以没有复选框值。

样本数据将与此类似：

```
NOLISTEN,RADIO,INTERNET,SATELLITE,MOBILE 
```

我想做的是对数据进行排序，但要按计数来做。所以，如果“RADIO”出现 10 次，“MOBILE”出现 5 次，“SATELLITE”出现 3 次，间隔超过 10 条记录，那么搜索 100 条记录，它应该能够显示和排序那些提到的结果，“顺序by”设置为顶部最常见的聆听方法。

我试过试一试，但不太顺利。

有什么想法吗？谢谢。

```
SELECT 
ListeningMethod, 
ListeningMethod REGEXP ("NOLISTEN") as ViewNOLISTEN,
ListeningMethod REGEXP ("RADIO") as ViewRADIO,
ListeningMethod REGEXP ("INTERNET") as ViewINTERNET,
ListeningMethod REGEXP ("SATELLITE") as ViewSATELLITE,
ListeningMethod REGEXP ("MOBILE") as ViewMOBILE
FROM VAT 
```

我尝试添加更多，例如“COUNT（ViewRadio）CountRadio”，但它说该列不存在，所以我有点迷茫。

示例插入语句：

```
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('NOLISTEN,RADIO,INTERNET,MOBILE');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('INTERNET');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO'); 
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('NOLISTEN');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('INTERNET');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('INTERNET');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('RADIO');
INSERT INTO `VAT` (`ListeningMethod`) VALUES ('MOBILE');
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T09:44:15.487

**您可以按照Barmar**在评论中的建议使用分隔表，其他（不）明智的做法是，您可以使用如下所示的 union 创建一个临时表：（如果您对**union**和**sub-query**没有问题）：

```
SELECT * FROM
(
    SELECT "NOLISTEN" AS "ListeningMethod", COUNT(ListeningMethod) as "AMOUNT" FROM VAT WHERE ListeningMethod LIKE "%NOLISTEN%"
    UNION
    SELECT "Radio" AS "ListeningMethod", COUNT(ListeningMethod) as "AMOUNT" FROM VAT WHERE ListeningMethod LIKE "%RADIO%"
    UNION
    SELECT "INTERNET" AS "ListeningMethod", COUNT(ListeningMethod) as "AMOUNT" FROM VAT WHERE ListeningMethod LIKE "%INTERNET%"
    UNION
    SELECT "SATELLITE" AS "ListeningMethod", COUNT(ListeningMethod) as "AMOUNT" FROM VAT WHERE ListeningMethod LIKE "%SATELLITE%"
    UNION
    SELECT "MOBILE" AS "ListeningMethod", COUNT(ListeningMethod) as "AMOUNT" FROM VAT WHERE ListeningMethod LIKE "%MOBILE%"
) AS VAT2 ORDER BY AMOUNT DESC; 
```

# php - PHP noob：是否可以在没有警告的情况下测试未定义变量的相等性？

> ID：13393961
> 
> 赞同：1
> 
> 时间：2012-11-15T08:42:15.450
> 
> 标签：php, undefined, equality

对不起，如果这是一个恼人的问题（我来自红宝石背景，我是 PHP 新手）。

我觉得你不能这样做有点奇怪：

```
 if($defined_array['undefined_index'] == 'a string') {
     do_something();
 } 
```

没有受到警告的猛烈抨击。

1.  在这种特殊情况下，如果变量不存在，您怎么会收到警告？对于松散类型的语言，这是一种奇怪的相等实现。只得到一个`false`. 是因为口译员的限制吗？这背后的技术原因是什么？我只是好奇。
2.  是否有任何功能、构造、习语或任何我不知道的东西可以避免我每 4 行左右执行一次：

    ```
    if(isset($defined_array['undefined_index']) && $defined_array['undefined_index'] == 'a string') {
         do_something();
    } 
    ```

    我知道我可以声明我打算使用的每一个数组键，但是如果 PHP 每次都打算给你一巴掌，那么在使用它们之前不被迫声明变量有什么意义呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:16:34.963

警告的原因是出于代码安全原因。虽然数组键不存在的原因可能是因为在此实例中未提供它，但也可能在设置或检索元素时出现拼写错误。如果没有警告，此类编码错误将更难被发现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:57:16.703

不，不是用同样的表情。但是，您可以创建自己的比较函数或使用（绝对可怕）错误抑制运算符 @。虽然错误抑制总是一个坏主意，但我建议您改为解决问题。

1：自带功能：

```
function setAndEq($a, $b){
    if(isset($a, $b))
        return $a === $b;
    else
        return false;
}

if(setAndEq($array['undefined_index'], "hello")) {
    // hello
} 
```

2：错误抑制：

```
if(@strcmp($array['undefined_index'], "hello") === 0) {

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T09:15:42.640

关于 1：当变量不存在时，您应该始终收到警告。这表明您没有正确编写代码。当未设置的变量（或数组键）评估为 FALSE 时，这将是错误的。我想问题不在于技术原因是什么——这只是常识。

关于 2：不。只需使用`empty()`or`isset()`并使用严格类型检查.. pe`if ($x === FALSE)`而不是`if ($x == NULL)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T08:52:19.703

您可以通过设置适当的错误级别来使警告静音，但这并不是一个好主意。我个人使用一个小功能来简化打字：

```
/**
 * nullsafe
 *
 * returns values from array like objects
 *
 * Usage:
 *    nullsafe($array, 'key'); - returns the $array['key'] if it is set
 *    nullsafe($array, 'key', 'foo'); - returns the $array['key'] if it is set, 'foo' otherwise
 *    nullsage($array, array('level0', 'level1')); returns $array['level0']['level1'] if it is set, null otherwise
 *
 * returns value indexed by $key from the $from, or the $default if its not present
 * if the key is an array then it will descend it into the $from like $from[$key[0]][$key[1]][$key[2]]...
 *
 * @param mixed $from
 * @param mixed $key
 * @param mixed $default
 * @return mixed
 */
function nullsafe($from, $key, $default = null) {
    if (!is_array($key)) {
        if (isset($from[$key])) {
            return $from[$key];
        }
    } else {
        foreach ($key as $k) {
            if (!isset($from[$k])) {
                return $default;
            } else {
                $from = $from[$k];
            }
        }
        return $from;
    }
    return $default;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T08:48:03.230

这取决于，首先你可以关闭你的error_reporting，但我不建议你这样做。

当您对同一个数组键进行多次检查时，您也可以尝试以下操作：

```
if (isset($defined_array['undefined_index'])) :
switch ($defined_array['undefined_index']) :
    case 'a string' :
        do_something();
    break;
    case 'b string' :
        do_anotherthing();
    break;    
endswitch;
endif; 
```

在这种情况下，您不必担心每一行的所有警告。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T08:47:08.687

**编辑**：结合[isset](http://www.php.net/manual/en/function.isset.php)和[错误控制运算符](http://www.php.net/manual/en/language.operators.errorcontrol.php)，您可以声明一个始终返回变量值或未`null`设置的函数：

```
$ php -a
Interactive shell

php > function getvalue($var) {
php { return isset($var) ? $var: null;
php { }
php > $testarray['key1'] = "hello";
php > if ($myvar = @getvalue($testarray['key1'])) echo "var: " . $myvar;
var: hello
php > if ($myvar = @getvalue($testarray['key2'])) echo "var: " . $myvar;
php > 
```

请注意，您无法区分不存在的变量或存在但其值为 的变量`null`。

# grails - Grails，比较两个对象？

> ID：13393964
> 
> 赞同：2
> 
> 时间：2012-11-15T08:42:33.393
> 
> 标签：grails, groovy

我有一个客户对象。

```
class Client{
String firstName
String lastName
String middleName
} 
```

然后我有一个母亲不能等于父亲的形式。哪个验证器更适合比较客户端？甚至有区别吗？我都试过了，它们都有效，但我不太确定这是否只是巧合。我也可能是错的。如何对两个对象进行比较？有什么建议吗？

`val.id == obj.father.id`或者`val == obj.father`

```
class Form{
Client mother
Client father

static constraints = {
mother (nullable:true, validator: { val, obj ->
            if(mother equals father){
                return ["invalid.motherCannotBeEqualFather.label"]  
            }
        })
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T18:06:24.017

`val == obj.father`

将导致`val.equals(obj.father)`, 因为 Groovy 重载 ==。默认行为是简单地检查引用相等性，这可能很危险。Hibernate 将尝试确保平等（参见 Fabiano 的链接），但它可能不可靠。

`val.id == obj.father.id`

将确保这两个对象代表与您的域对象关联的数据库表中的不同条目。当您保存一个新的域对象时，Grails 会为该对象分配一个在其域中唯一的 ID。默认情况下，这是通过在代表您的对象的 DB 表中递增的 id 来完成的。

如果执行此验证时已将母亲和父亲保存到数据库中，则它可能是一个有用的相等性检查。

如果您只是试图阻止表单上的 firstName、lastName 和 middleName 相同（看起来有点像），那么此验证仅在您将这些字段的唯一性约束定义为客户端域中的组时才有效，例如`firstName(unique: ['lastName', 'middleName'])`。

考虑只定义一个明确确保您正在寻找的唯一性的验证器。

# facebook - 如何获取用户的唯一性

> ID：13393967
> 
> 赞同：2
> 
> 时间：2012-11-15T08:42:46.283
> 
> 标签：facebook

我正在制作 Facebook 照片画廊投票应用程序，我发现我有很多作弊者。他们从许多帐户和许多不同的 IP 地址投票（也有许多来自同一 IP 的投票）。但投票之间的联系是显而易见的，因为时间安排——一个接一个的 2 到 30 秒。

我需要一些技术来获取用户唯一信息，例如浏览器 ID，或操作系统序列号或类似的东西。IP不是一种选择。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:46:18.953

Facebook 有一个**经过验证**的选项 AFAIK。如果用户不是经过验证的 facebook 用户，您可以将投票视为假投票并忽略它。

facebook 用户必须将他/她的电话号码注册到 facebook 才能成为经过验证的用户。这（几乎）保证了用户是真实的人而不是假帐户。

# iphone - 关闭窗口时应用程序崩溃

> ID：13393968
> 
> 赞同：1
> 
> 时间：2012-11-15T08:42:48.687
> 
> 标签：iphone, ios, ipad, titanium

我正在使用 Titanium 版本 2.1.3.GA 来构建 iOS 应用程序。目标 iOS 6.0

基本上，当用户单击任务时，他们可以对其进行编辑。然后保存它。一旦我保存它，我就会关闭编辑窗口，`me.win.close();`但是，一旦它到达那条线......它在我的调试器中崩溃，除了“应用程序已退出模拟器”。

我对此进行了评论以确保就是这样。如果我强迫他们使用取消按钮，它也会做同样的事情，因为它是一样的`me.win.close();`

这不是唯一打开的窗口，所以我知道不是我关闭了根窗口。

我不知道为什么会这样，任何帮助将不胜感激。

编辑 - 这是取消方法

```
this.btnCancelOnClicked = function() {
    me.clientData = null;
    me.win.close();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T11:58:31.420

这是一个与您的非常相似的示例应用程序。试试这个

```
var wndHome = Ti.UI.createWindow({
     backgroundColor : 'white'
});

var tableView = Ti.UI.createTableView({
 top : 0
});

var tabledata = [];
for(var i = 0 ; i < 10; i++){
 var row = Ti.UI.createTableViewRow({
  title : 'Didn\'t clicked yet'
 });
 tabledata.push(row);
}
tableView.data = tabledata;
wndHome.add(tableView);
wndHome.open();

tableView.addEventListener('click', function(e){
 var title;
 var wndNewWindow = Ti.UI.createWindow({
  backgroundColor : '#999966'
 });

 var textbox = Ti.UI.createTextField({
  top : '20%',
  width : '75%',
  height : '55',
  borderColor : 'white',
  borderRadius : 10,
  color   : 'red',
  backgroundColor : 'white',
  hintText : 'Type your message'
 });
 var btnWrite = Ti.UI.createButton({
  title : 'Save',
  top   : '40%',
  width : 'auto'
 });

 wndNewWindow.add(textbox);
 wndNewWindow.add(btnWrite);
 wndNewWindow.open();
 btnWrite.addEventListener('click', function(){
  title = textbox.value;
  wndNewWindow.close();
 });
 wndNewWindow.addEventListener('close', function(){
  e.rowData.title = title;
 });
}); 
```

# html - 如何禁用图像？使其不可点击

> ID：13393973
> 
> 赞同：1
> 
> 时间：2012-11-15T08:43:04.493
> 
> 标签：html, css

如何使*img*不可点击？我想在上面画点东西，但是当我做*mousedown*时，*mousemove*图像会追随我的鼠标。这有可能让它留在原地吗？我知道我可以将它创建为*div*中的背景，但现在我想在 img 中尝试。谢谢。

由于我的语言，图像使其更清晰： [屏幕](https://dl.dropbox.com/u/6421191/move.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T08:45:02.420

您可能可以通过将其放入您的 css 来解决您的问题：

```
#myImage {
-moz-user-select: none;
-khtml-user-select: none;
-webkit-user-select: none;
user-select: none;
} 
```

编辑（带有OP的评论）：

一个更完整的解决方案是

```
#myImage {
-moz-user-select: none;
-khtml-user-select: none;
-webkit-user-select: none;
user-select: none;
-moz-user-drag: none;
-khtml-user-drag: none;
-webkit-user-drag: none;
user-drag: none;
} 
```

（根据我的经验，两者都需要避免糟糕的用户体验）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T08:48:26.350

您可以使用与图像块保持相同位置的另一个 div，您必须将其 z-index 设置为略高于您的图像。例如，

```
<div id="main">
   <img src="01.jpg" alt="..." />
   <div id="draw">&nbsp;</div>
</div> 
```

你的 CSS：

```
#main {
  position: relative;
  width: 300px;
  height: 300px;
  overflow: hidden;
}

#main img {
  position: absolute;
  bottom: 0;
  z-index: -1;
}

#main #draw {
  width: 300px;
  height: 300px;
  position: absolute;
  bottom: 0;
  z-index: 99;
} 
```

# wpf - Infragistics XamDatagrid 绑定问题

> ID：13393979
> 
> 赞同：1
> 
> 时间：2012-11-15T08:43:43.733
> 
> 标签：wpf, data-binding, mvvm, infragistics, xamdatagrid

我有一个 MVVM C#​​/WPF 应用程序。我想将 XamDataGrid 绑定到我的一个视图模型，以便用户可以定义他们想要的结果结构 - 将什么列映射到什么变量。
我的核心拥有这样的字典 - `Dictionary<string, string>`，我想将它包装在一个`ObservableCollection`并绑定到这个，而不是将数据复制到一个`DataTable`. 问题是，我不能以这种方式添加行（视图似乎已锁定以进行添加）并且未保存更改。我的代码：

```
 <igDP:XamDataGrid
        Grid.Row="1" Grid.Column="0"
        Name="resultStructure"
        DataSource="{Binding VariablesDictionary, Mode=TwoWay}"
        GroupByAreaLocation="None">
        <igDP:XamDataGrid.FieldLayoutSettings>
            <igDP:FieldLayoutSettings 
                AllowFieldMoving="WithinLogicalRow"
                AllowAddNew="True" 
                AllowDelete="True" 
                AddNewRecordLocation="OnBottomFixed" />
        </igDP:XamDataGrid.FieldLayoutSettings>
    </igDP:XamDataGrid> 
```

视图模型（相关部分）：

```
private ObservableCollection<DictionaryEntry> variablesDictionary;
        public ObservableCollection<DictionaryEntry> VariablesDictionary
        {
            get { return variablesDictionary; }
            set
            {
                variablesDictionary = value;
                OnPropertyChanged(()=>VariablesDictionary);
            }
        } 
```

...

```
List<DictionaryEntry> vars = resultStructureModel.Variables.Select(x => new DictionaryEntry {Key = x.Key, Value = x.Value}).ToList();
            VariablesDictionary = new ObservableCollection<DictionaryEntry>(vars); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:19:34.273

对于添加行，XamDataGrid 使用[IEditableCollectionView](http://msdn.microsoft.com/en-us/library/system.componentmodel.ieditablecollectionview.aspx) .CanAddnew 或 IBindingList.AllowNew。

如果您将[ListCollectionView](http://msdn.microsoft.com/en-us/library/system.windows.data.listcollectionview.aspx)用于网格的 DataSource，那么您可以添加新行。

要将 ListCollectionView 与 ObservableCollection 一起使用，请将 ObservableCollection 传递给 ListCollectionView，然后使用 CollectionView 绑定到网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T06:18:20.883

最终起作用的是使用`BindingList`. `ObservableCollection`不会让您添加行，但`BindingList`确实提供了我需要的一切。

# c++ - C++ 关于 ifstream.ignore()

> ID：13393981
> 
> 赞同：1
> 
> 时间：2012-11-15T08:43:45.913
> 
> 标签：c++

我想到了一些问题，并会尝试在这里问..

下面是一个运算符重载

```
ifstream& operator>>(ifstream &input, Map2D &map2d)
{
    int x1,x2,y1,y2;

    //get x1 first
    input.ignore(2);
    input>>x1;

    //get y1
    input.ignore();
    input>>y1;

    //get x2
    input.ignore(4);
    input>>x2;

    //get y2
    input.ignore();
    input>>y2;
    input.ignore();
} 
```

这是我的文本文件

```
Map2D, [5, 7], [3, 8] 
```

我想到的问题是，x2 因为我的分隔符是逗号，为什么 x2 是忽略（4）而不是忽略（2），我尝试忽略（2）并且数字搞砸了。但忽略（4）是正确的1。

当只有空格和 [ 时，为什么它是 (4)

```
x2 refer to value 3 
```

谢谢！！用于解释

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T08:46:30.090

您正在跳过四个不同字符的“]、[”。

当您读取 y1 时，您仍处于流中 y1 的位置。这个位置在右括号“]”的结尾之前，然后您必须阅读逗号、空格和下一个括号“[”。

# hibernate - Hibernate criteria.list() 设置会话脏

> ID：13393982
> 
> 赞同：1
> 
> 时间：2012-11-15T08:43:47.710
> 
> 标签：hibernate, criteria, hibernate-criteria

我对条件 API 有以下查询：

1.

```
ICriteria criteria = _session.CreateCriteria<Country>();
criteria.Add(Restrictions.Like("Code", "%C%"));
IList<Country> countryList = criteria.List<Country>(); 
```

2.

```
ICriteria criteria = _session.CreateCriteria<Facility>();
criteria.Add(Restrictions.Like("Visible", true));
IList<Facility> facilityList = criteria.List<Facility>(); 
```

在第二个查询之后，我的会话变脏了，而在第一个查询之后它没有。我的`Country`实体只有简单的属性，`Facility`也有多对一和一对多。

你能告诉我为什么会话变脏了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-25T15:19:26.493

假设您的第二个查询返回一个`Facility`对象`f1`，它的[EntityKey](https://docs.jboss.org/hibernate/core/3.3/api/org/hibernate/engine/EntityKey.html)是`k1`。它变脏的原因是：在第二次查询之前，同样`Session`已经持有一个`Facility`对象`f2`，并且它的[EntityKey](https://docs.jboss.org/hibernate/core/3.3/api/org/hibernate/engine/EntityKey.html)与`k1`！`f1`虽然和之间有一些属性不同`f2`。在第二次查询期间，执行查询使 Session 进行脏检查，因此 Session 被视为“脏”。

如何调试这个？您可以在第二次查询***之前***输出当前 Session 持有的所有对象（例如`Set<EntityKey> set = session.getStatistics().getEntityKeys();`，参考[Hibernate session.contains(Class clazz, Serializable id)](https://stackoverflow.com/questions/7473828/hibernate-session-contains-class-clazz-serializable-id)，@TheReincarnator 的答案），我认为您应该至少找到一个`Facility`。然后你可以调试`Facility`第二个查询是否相同（它应该不同！）。

# javascript - 内容自动高度调整取决于页面高度

> ID：13393987
> 
> 赞同：0
> 
> 时间：2012-11-15T08:43:53.600
> 
> 标签：javascript, jquery, css, jquery-mobile

我遇到了问题，我需要内容的高度以像素为单位（以便谷歌地图正确显示）。但是我不知道我的网站将在哪些设备上使用（手机、智能手机）以及屏幕分辨率是多少。我有一个想法如何实现这一点，但由于我使用的是 jquery mobile，所以我不知道该怎么做。这个想法很简单：获取页面高度，然后`content.height = page.height-(footer.height+header.height)`

这是我的html代码：

```
<html>
<body style="margin:0">
    <div data-role="page" class="page-nearme">
        <div data-role="header" data-id="navbar" data-position="fixed" data-tap-toggle="false"></div>
        <!-- /header -->
        <div data-role="content">
            <div id="search-panel">
                <input id="target" type="search" placeholder="Search Box">
            </div>
            <div id="map_canvas" style=""></div>
            </div>
            <!-- tabbar -->
            <div data-role="footer" data-id="main_footer" data-position="fixed" data-fullscreen="true" data-visible-on-page-show="false" id="fxedfooter" data-tap-toggle="false" onclick="showfooter">
                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li><a id="menu-item-home" data-icon="custom" href="index.html">&nbsp;</a></li>
                        <li><a id="menu-item-near-me" data-icon="custom" href="near-me.html" class="ui-btn-active ui-state-persist">&nbsp;</a></li>
                        <li><a id="menu-item-rewards" data-icon="custom" href="rewards.html">&nbsp;</a></li>
                        <li><a id="menu-item-invite" data-icon="custom" href="invite.html">&nbsp;</a></li>
                        <li><a id="menu-item-profile" data-icon="custom" href="profile.html">&nbsp;</a></li>
                    </ul>
                </div>
                <!-- /navbar -->
            </div>
        </div>
    </body>

</html> 
```

PS 我在[jQuery 移动页面高度](https://stackoverflow.com/questions/8929786/jquery-mobile-page-height?rq=1)中尝试了不起作用的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T08:53:47.547

你有没有尝试过这样的事情：

```
$('div[data-role="content"]').height(window.innerHeight - ($('div[data-role="header"]').height() + $('div[data-role="footer"]').height())); 
```

# java - JMF 同步视频音频

> ID：13393988
> 
> 赞同：3
> 
> 时间：2012-11-15T08:44:12.220
> 
> 标签：java, audio, video, sync, jmf

我目前正在使用 JMF 录制视频（网络摄像头）和音频（麦克风）。我没有遇到任何编码问题。但是在输出方面我有一个问题。视频和音频完全不同步。在音频之后的视频帧开始之间有 1 秒的时间延迟。

以前有人遇到过这个问题吗？

下面是我用来捕捉视频的代码。

```
 MediaLocator videoMediaLocator = captureVideoDevice.getLocator();
    DataSource videoDataSource = null;
    try {
        videoDataSource = javax.media.Manager.createDataSource(videoMediaLocator);
    } catch (IOException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoDataSourceException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    MediaLocator audioMediaLocator = captureAudioDevice.getLocator();
    DataSource audioDataSource = null;
    try {
        audioDataSource = javax.media.Manager.createDataSource(audioMediaLocator);
    } catch (IOException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoDataSourceException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    DataSource mixedDataSource = null;
    DataSource dArray[] = new DataSource[2];

    dArray[0] = videoDataSource;
    dArray[1] = audioDataSource;
    try {
        mixedDataSource = javax.media.Manager.createMergingDataSource(dArray);
    } catch (IncompatibleSourceException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    FileTypeDescriptor outputType = new FileTypeDescriptor(FileTypeDescriptor.QUICKTIME);
    Format outputFormat[] = new Format[2];
    VideoFormat videoFormat = new VideoFormat(VideoFormat.MJPG);
    outputFormat[0] = videoFormat;
    outputFormat[1] = new AudioFormat(AudioFormat.IMA4, 44100, 16, 1);
    ProcessorModel processorModel = new ProcessorModel(mixedDataSource, outputFormat, outputType);
    Processor processor = null;
    try {
        processor = Manager.createRealizedProcessor(processorModel);
    } catch (IOException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoProcessorException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    } catch (CannotRealizeException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    DataSource source = processor.getDataOutput();
    TrackControl [] tracks = processor.getTrackControls();
    Format format = tracks[0].getFormat(); 
    float frameRate = ((VideoFormat)format).getFrameRate();
    MediaLocator dest = new MediaLocator("file:c:\\test.mov");

    DataSink dataSink = null;
    try {
        dataSink = Manager.createDataSink(source, dest);
    } catch (NoDataSinkException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        dataSink.open();
    } catch (IOException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    } catch (SecurityException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        dataSink.start();
    } catch (IOException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    processor.start();
    System.out.println("starting capturing ...");
    try { Thread.currentThread().sleep(30000); } catch (InterruptedException ie) {} 
    System.out.println("... capturing done");

    processor.stop();
    processor.close();
    dataSink.close(); 
```

# javascript - jQuery无法从文本框中获取值

> ID：13393989
> 
> 赞同：1
> 
> 时间：2012-11-15T08:44:13.777
> 
> 标签：javascript, jquery, asp.net

我正在尝试从文本框中获取一个值，以便我可以使用 jQuery 旋转图像

```
<script src="Scripts/jQueryRotate.2.2.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function () {
   var angle = $("input:TextBox1").val();
    $("#needle").rotate(angle);
    alert(angle);
});
</script> 
```

我正在填充文本框，如下所示

```
<script runat="server">
protected void Page_Load(object sender, EventArgs e)
  { 
     WeatherLibrary.WeatherData wLib = new WeatherLibrary.WeatherData();
     double dataLatest;
     string sensorName;
     sensorName = "umtAdjWinDir";
     double dir = wLib.GetLatestData(sensorName).Value;
     dir = Math.Round(dir, 0);
     TextBox1.Text = dir.ToString();

   }
</script> 
```

TextBox1 是文本框的 id

```
 <asp:TextBox ID="TextBox1" runat="server" ReadOnly="True"></asp:TextBox> 
```

我给出的警报说`undefined`，图像永远不会旋转。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:49:26.963

尝试

```
var angle = $("#TextBox1").val(); 
```

或者

```
var angle = $("#<%= TextBox1.ClientID %>").val(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T08:47:23.613

如果 TextBox1 是输入元素的 id，您可以使用`var angle = $("#TextBox1").val();`它从文本框获取值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T08:48:09.550

尝试使用：

```
 var angle = $('#<%=TextBox1.ClientID%>').val(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T08:47:10.940

尝试

```
var angle = $("input#TextBox1").val(); 
```

假设您有一个 id="TextBox1" 的输入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T08:49:48.663

我认为不确定这可能是母版页或用户控制的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T08:50:06.637

```
<script src="Scripts/jQueryRotate.2.2.js" type="text/javascript"></script>
<script type="text/javascript">

    $(document).ready(function () {

       var angle = $("#TextBox1").val();
        $("#needle").rotate(angle);
        alert(angle);

    });
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-15T08:50:47.227

应该是

```
var angle = $("input[id*='TextBox1']").val();  // For ID

var angle = $("input.TextBox1").val();  // For class

var angle = $("[id*='TextBox1']").val();  // For ID this is sufficient 
```

需要使用`attribute ends with $`或者`attribute contains selector *`如果您正在使用带有属性的**ASP.NET**控件`runat="server"`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-15T09:18:59.170

$("#TextBox1").val() 此代码将帮助您获取文本框值..

# asp.net-mvc - ASP.NET MVC：如何在自定义 html 中包含 PartialView？

> ID：13393995
> 
> 赞同：0
> 
> 时间：2012-11-15T08:44:57.950
> 
> 标签：asp.net-mvc, templates

我的自定义站点 CMS 中有 TinyMCE 编辑器，并将 HTML 内容存储在 SQL DB 中。

然后我在 cshtml RazorView 中渲染它：

```
@MvcHtmlString.Create(Model.Content) 
```

如何在 TinyMCE 的 html 内容中包含 PartialView？

就像是：

```
...content html...
<div>[[ViewName]]</div>
...content html... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T09:11:49.717

可以使用以下命令将部分视图包含在 HTML 页面中

`<% Html.RenderPartial("~/Views/Folder/ViewName.ascx");%>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:39:15.627

您可以执行部分​​视图并将生成的 html 设置为 TinyMCE 的内容。

```
private string ProduceViewResult(string viewName, object model)
{
  ViewData.Model = model;

  using (var sw = new StringWriter())
  {
    var viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
    var viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
    viewResult.View.Render(viewContext, sw);
    viewResult.ViewEngine.ReleaseView(ControllerContext, viewResult.View);
    return sw.ToString();
  }
} 
```

**用法**

```
var partialViewHtml = ProduceViewResult("PartialViewName", myModel); 
```