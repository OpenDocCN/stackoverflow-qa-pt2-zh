# StackOverflow 问答 13907000-13907999

# python - 使用python使用一个sql表中的名称在另一个表中查找数据，然后将名称和数据组合成一个html表

> ID：13907005
> 
> 赞同：0
> 
> 时间：2012-12-17T00:49:33.553
> 
> 标签：python, html, sqlite, iteration

我有一个使用以下代码从 sqlite 数据库中提取的唯一名称列表：

```
connection = sqlite3.connect('database.sqlite')
connection.text_factory = str
c = connection.cursor()
c.execute ('SELECT Name FROM Table WHERE Description LIKE ?', [term])
my_object = []
for name in c:
    my_object.append(name)
return my_object 
```

我想使用这个唯一名称列表来查看同一数据库中的另一个表并提取四个值。即 - 'SELECT value1, value2, value3, value4 FROM Table2 WHERE Name LIKE ***_* __** ' 其中空白将是我列表中的每个值。这是我真正需要帮助的部分

然后我想用第一列中的名称和后续值中的所有相应值制作一个 HTML 表（我知道 HTML，但不知道如何使用 python 将所有这些放在一起）。如果我可以单独提取每个值，我想我可以使用 zip 将它们组合并循环遍历表格，但我希望尽可能少地执行此操作。

我希望我很清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:54:59.880

您可以修改您的 SQL，以便提取类似于某个描述的名称，然后从 table2 中为那些匹配的名称输出值。

```
select name, value1, value2, value3, value4
from table2
where name in (
    select name
    from table1
    where description like ?
) 
```

# cython - 如何使用 cython 定义文件（pxd）而不使其成为扩展名？

> ID：13907010
> 
> 赞同：2
> 
> 时间：2012-12-17T00:50:40.933
> 
> 标签：cython, distutils

创建 pxd 定义文件的最简单方法是什么，它只是收集通过 pyx 文件复制的 cdef，而不创建新的扩展名？

我的情况如下：我想在 pxd 文件 (hp/src/common.pxd) 中收集一些外部 cdef。我还添加了一些非外部 cdef，其实现在 common.pyx 中。

在另一个 pyx 文件（hp/src/_lib.pyx）中，我把它变成了一个扩展，我从 common 中导入了一些东西。

在 setup.py 文件中，我创建了以下扩展：

```
Extension('hp._lib', 
          ['hp/src/_lib.pyx'],
          language='c++'), 
```

通过这样做，不会创建 common.cpp 文件，因此看起来依赖项不会自动处理。这是第一个问题。

然后，手动运行 'cython --cplus common.pyx' 在目录 hp/src 中正确创建一个 common.cpp 文件，如果我将 'hp/src/common.cpp' 添加到扩展源列表中，命令python setup.py 毫无怨言地安装了所有东西，但是，导入模块 hp 会触发 ImportError: No module named common... from _lib.cpp... 我被困在这里。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T15:40:06.280

您可以使用该`include`语句包含来自另一个文件的材料。

请参阅此处的文档：

[http://docs.cython.org/src/userguide/language_basics.html#the-include-statement](http://docs.cython.org/src/userguide/language_basics.html#the-include-statement)

如果您有外部定义`common.pxd`和实现，`commond.pyx`则需要将它们都包括在内。例如，在`_lib.pyx`：

```
include "common.pxd"
include "common.pyx" 
```

然后，这些文件的内容将被编译到您的`_lib`模块中，就好像它们当时以文本形式包含在其中一样。即`common.c`不会生成文件，而是包含在`_lib.c`.

`.c`在决定是否需要重新生成模块文件时，Cython 编译器无法识别对包含的更改，因此请记住在重新编译之前将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-07T07:48:38.757

如果您将 .pyx 和 .pxd 文件的结构与 .py 文件完全相同，那么您的运气会好得多。这包括在您的`setup.py`文件中为 common.pyx 创建一个扩展。您可能想尝试使用[cythonize](http://docs.cython.org/src/reference/compilation.html#compiling-with-distutils)来处理依赖项。

# javascript - 使用javascript更改iframe的src不显示新页面

> ID：13907013
> 
> 赞同：1
> 
> 时间：2012-12-17T00:50:52.210
> 
> 标签：javascript, asp.net, vb.net, iframe

在我的 asp.net 应用程序中，我有一个包含两个 iframe 的页面，并且在此 iframe 中显示的主页面包含一个按钮。当这个按钮被点击时，它会调用一个 javascript 函数，该函数包含 URL 的一部分，并在父窗口中调用一个 javascript 函数。当父函数被命中时，它应该将 iframe 的 src 更改为不同的页面 - 这不会发生。主 iframe 的 ID 为 ContentIframe，侧面的 iframe 的 ID 为 LeftIframe。当它被击中时 - 左侧 iframe src 被更改为空，这是因为左侧显示不显示以前存在的内容。发生更改内容框架的 iframe src 的调用，甚至加载代码隐藏（我可以通过在后面代码中的页面加载中放置跟踪点来判断） - 但页面永远不会显示在 iframe 中，我们单击的带有原始按钮的上一页仍在显示。有谁知道为什么会发生这种情况？这是我的代码

按钮

```
<asp:Button ID="btnEditClient" onclientclick="editClient();" runat="server" Text="Edit Client Info" /> 
```

editClient javascript 函数

```
function editClient() {
var location = window.location.href;
var idindex = location.indexOf("clientid");
idindex = idindex + 9;
var id = location.slice(idindex, location.length);
window.parent.redir('client', id); 
```

}

redir父javascript函数

```
function redir(type, id) {
    if (type = 'client') {
        document.getElementById('ContentIframe').src = "NewCustomer.aspx?clientid=" + id;
        document.getElementById('LeftIframe').src = "";

    }
} 
```

如果我要在上面的 LeftIframe src 更改下方添加以下行

```
document.getElementById('ContentIframe').disabled = true; 
```

ContentIframe 根本不会显示。同样如上所述，NewCustomer.aspx 页面的页面加载被命中，我可以通过使用断点来判断。再次感谢！

编辑 - 在调用更改 src 之后，查看开发人员工具，这是 iframe 中的表单，仍然说前面的页面项目 - 不确定这是否有帮助 - 也许 method=post 可能与这个？

```
<form id="form1" action="NewClientSummary.aspx?clientid=13" method="post"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:53:41.300

问题是`<asp:Button>`呈现为*提交按钮*。这意味着单击它将提交表单，并且框架中的表单可能会被定向到同一页面。（默认动作）

要么使用普通按钮：

```
<button type="button" id="btnEditClient" onclick="editClient();">Edit Client Info</button> 
```

或者，如果您需要它在服务器端，只需通过返回 false 来取消按钮的默认操作：

```
<asp:Button ID="btnEditClient" onclientclick="editClient(); return false;" runat="server" Text="Edit Client Info" /> 
```

# php - 等待所有 DOM 操作用 jQuery 完成？

> ID：13907015
> 
> 赞同：1
> 
> 时间：2012-12-17T00:51:26.377
> 
> 标签：php, javascript, jquery, mysql

我对如何完成某事有点进退两难。我正在使用一个名为 isotope 的插件编写一个具有砖石布局的投资组合。它基本上是 pinterest 风格的布局。我还将有过滤器，这些过滤器会自动从数据库中获取正确的内容并使用小胡子模板将其插入。现在我遇到的问题是如何在运行同位素中继输出功能之前等待所有 dom 插入完成。因为如果我过早运行它，元素将无法正确定位。我不想做一个 setTimeout() 函数，因为我不确定数据库请求需要多长时间，我不想让用户等待太久。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:32:10.007

您可以在 insert 函数的回调中调用 relayOut 方法。

```
$('#container').isotope( 'insert', /*items*/ ,function(){
  $('#container').isotope( 'reLayout', callback );
} ); 
```

或者您可以将所有方法作为链

```
$('#container').isotope( 'insert', /*items*/).isotope( 'reLayout', callback ); 
```

如果您使用 ajax 调用您的内容，您可以在 jquery ajax 的成功回调的最后一行调用您的 relayOut。所以每个 DOM 操作都是在调用 relayOut 方法之前完成的。

同位素插件的回调和链接方法参考[http://isotope.metafizzy.co/docs/methods.html](http://isotope.metafizzy.co/docs/methods.html)。对于 jquery ajax，请通过[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:23:10.957

查看 jQuery [Deferred.done()](http://api.jquery.com/deferred.done/)

以下是该网站的示例：

```
<!DOCTYPE html>
<html>
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

 <button>Go</button>
 <p>Ready...</p>

<script>
/* 3 functions to call when the Deferred object is resolved */
function fn1() {
  $("p").append(" 1 ");
}
function fn2() {
  $("p").append(" 2 ");
}
function fn3(n) {
  $("p").append(n + " 3 " + n);
}

/* create a deferred object */
var dfd = $.Deferred();

/* add handlers to be called when dfd is resolved */
dfd
/* .done() can take any number of functions or arrays of functions */
.done( [fn1, fn2], fn3, [fn2, fn1] )
/* we can chain done methods, too */
.done(function(n) {
  $("p").append(n + " we're done.");
});

/* resolve the Deferred object when the button is clicked */
$("button").bind("click", function() {
  dfd.resolve("and");
});
</script>

</body>
</html> 
```

网站上也有一个演示。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-17T01:17:10.017

您当前是否在 $(document).ready(function() 中运行该函数？也许您可以在 $(window).load(function() 中尝试它。

# javascript - 请求中的 Javascript、BackboneJS、oData 单引号

> ID：13907019
> 
> 赞同：2
> 
> 时间：2012-12-17T00:51:35.783
> 
> 标签：javascript, backbone.js, odata, internet-explorer-10

我正在使用 BackboneJS，我有一个从启用 oData 的 WebAPI 获取数据的集合。在获取数据时，我使用 oData $filter 传入了一些额外的参数。

它看起来有点像这样：

```
collection.fetch({
   data: $.param({ '$filter': 'Filter1 eq ' + filter.get('filter1') + 
                   ' and Filter2 eq ' + filter.get('filter2') }),
   //some more stuff...
}) 
```

我基本上是在运行一个向导并在此过程中建立这个过滤器模型。来自此过滤器模型的每个值要么是字符串值，要么是空字符串。我已经覆盖了过滤器模型上的 get 方法，以确保从中获得正确的值。请注意，如果字符串值不为空，则在字符串值周围添加单引号，如果为空，则返回包含单词“null”的字符串值。

```
var Filter = Backbone.Model.extend({        
    get: function (attributes, options) {
        var value = Backbone.Model.prototype.get.call(this, attributes, options);
        if (value == '') return 'null';
        else return "'" + value + "'";
    }
}); 
```

假设我的模型如下所示：

```
{filter1: 'filter1', filter2: 'filter2'} 
```

现在，如果我在 Chrome 和 Firefox 中获取集合，生成的请求将如下所示：

```
replacedapiurl?%24filter=Filter1+eq+%27filter1%27+and+Filter2+eq+%27filter2%27 
```

这非常好，它在 Firefox 和 Chrome 中都很好用。我遇到的问题是在 IE10 中这不起作用。由于某种原因，生成的请求如下所示：

```
replacedapiurl?%24filter=Filter1+eq+'+filter1+'+and+Filter1+eq+'+filter1+' 
```

当我将它设置为 IE9 模式时，它也是如此。当我将它设置为 IE8 模式时，它突然开始工作。

现在我尝试使用 EncodeURI()、EncodeURIComponent()、escape() 并在单引号前添加 '\'，无论是在我重写的 get 方法中还是在 $.param 位中。但没有任何效果。添加 '\' 没有任何作用，所有编码都是对添加的 '+' 符号进行编码，如下所示：

```
replacedapiurl?%24filter=Filter1+eq+'%2520filter1%2520'+and+Filter1+eq+'%2520filter1%2520' 
```

这也不是我所追求的。

有谁知道为什么会这样？为什么具有这种行为的 IE 浏览器版本之间存在差异？我该如何解决？我需要将单引号转换为“%27”，最好无需编写任何浏览器特定代码。

编辑：我刚刚有人在 IE9 上进行检查，效果很好，所以只有在使用 IE10 时——以及在 IE9 模式下使用 IE10 时——它才不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:22:51.867

好的，我认为这超出了我的范围，但最后它不是，我自己修复了它。以防万一将来它可能对任何人有所帮助，我将解释为什么会发生这种情况。

过滤器对象中的值来自“选择”，“选择”在主干视图内，并且选择填充有许多“选项”视图。出于某种原因，我为我的选项视图设置了一个模板，如下所示：

```
<script type="text/template" id="option-template">
<%=value%>
</script> 
```

上面 HTML 中的换行符使得“选项”在“选择”内呈现，并在值的两侧添加了额外的空间。**现在我尝试过的所有其他浏览器和 IE10 之间的区别似乎在于，在 IE10 中，我的选项视图中的那些空格不会被 jQuery 的 val() 修剪，而在所有其他浏览器中，它们在读取值时会被修剪带有 val() 的“选择”。**这导致额外的空格在值的两侧变成了一个“+”号，就像 URL 中的所有其他空格一样，**这**就是问题所在！单引号本身不需要转换为 %27，它应该可以工作，[这是我从这个问题的答案中得到的](https://stackoverflow.com/questions/5884469/firefox-strange-single-quotes-conversion-in-urls)。

如果我像这样在一行中编写模板，我就不会遇到问题：

```
<script type="text/template" id="option-template"><%=value%></script> 
```

无论如何，我只是一起摆脱了模板并将我的选项视图更改为：

```
var optionView = Backbone.View.extend({
    tagName: "option",
    render: function () {
        this.$el.html(this.model.get('value'));
    }
}); 
```

这解决了所有问题，选项周围不再有多余的空格。

我想吸取的教训是，当您使用 jQuery 读取选择框值时，IE10 不会删除值周围的空格，如下所示：

```
var value = $('#id').val(); 
```

在任何其他浏览器中，如果选项周围有空格，如“value”，它们将自动被修剪，value 将为“value”，在 IE10 中，情况并非如此，value 将为“value”。

# c# - 何时分配只读变量？

> ID：13907022
> 
> 赞同：0
> 
> 时间：2012-12-17T00:52:05.540
> 
> 标签：c#

在线测试有这个问题：

只读变量的特点：

1.  它是在编译时分配的
2.  声明和初始化是分开的
3.  它是在运行时分配的
4.  所有这些

测试给出的答案为 4。我得到 2 和 3，但不确定 1。这是否是 1 的答案可能出现的示例：

```
private readonly int readonlyExample = 10; 
```

注意：对于上面的示例，我通常会使用 const

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-17T18:41:45.113

如果您为只读变量分配了一个值，那么您就是绑定变量，那么这就是编译时间。例如：

```
readonlt int xyz=10; // then this is compile time 
```

如果您从任何将执行并返回值的函数中分配值，那么它将是运行时。例如：

```
readonly int xyz=objClass.getSum();  // Then it is runtime. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:02:23.240

这些可能的答案有点令人困惑（在我看来）。

实际发生的是 C# 编译器实际上发出了如下内容：

```
private readonly int readOnlyExample;

public YourClassConstructor()
{
    this.readOnlyExample = 10;
} 
```

鉴于此，#2 似乎是一个可能的选择。声明和赋值是分开的。（他们甚至是什么意思是可以争夺的）

3 也可能是正确的，因为该值必须存在于内存中的*某个地方*。它不是编译时间常数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:43:25.340

建议的答案 (4) 不正确。因为，选项 1) 不正确！！

只读字段不必是编译时值。考虑以下代码，即使分配给只读字段的值不是编译时已知值，它也能很好地编译！！

```
 public class ValidatingReadonlyField
{
    private readonly UnKnownClass _readonlyField = new UnKnownClass();
}
public class UnKnownClass
{
    private object _someValue;

    public UnKnownClass()
    {
        _someValue = GetMeSomeThing();
    }

    private static object GetMeSomeThing()
    {
        throw new InvalidOperationException("Can you call me at Compile Time!!!");
    }
} 
```

编辑：根据@Renae 评论更新：

@Renae：答案 1 不正确！因为，上面的示例解释了在编译时*未*分配只读变量的情况。因此，否定语句 1。如果您想进一步否定，请尝试将 readonly 替换为“const”，编译将告诉您它只能具有编译时间值（这不是 readonly 的先决条件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-04T23:46:40.240

关键字 readonly 具有可以在运行时更改或分配的值

# php - 构建一个简单的数组

> ID：13907023
> 
> 赞同：0
> 
> 时间：2012-12-17T00:52:23.700
> 
> 标签：php, arrays

我有一个看起来像这样的数组。想象一下，主数组中还有 10 个其他键，例如“Divertissement”（这只是主数组的一个分支）。

```
 array (size=8)
 'Divertissement' => 
    array (size=3)
  'Cosmic Top' => 
    array (size=3)
      'Cat' => string '7' (length=1)
      'Prix' => string '2.99' (length=4)
      'Desc' => string 'SOME TEXT'
  'Episodes' => 
    array (size=3)
      'Cat' => string '7' (length=1)
      'Prix' => string '3.99' (length=4)
      'Desc' => string 'SOME TEXT"
  'Rocket Deal' => 
    array (size=3)
      'Cat' => string '7' (length=1)
      'Prix' => string '0.99' (length=4)
      'Desc' => string SOME TEXT" 
```

我试图创建一个新数组来删除每个分支的第一级数组，但没有成功。所以它只会删除“Divertissement”，并直接从 Cosmic Top、Episode、Rocket Deal 作为第一级数组开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:57:33.247

只需将每个顶级条目合并到一个新数组中：

```
$newArray = array();

foreach($yourArray as $item)
{

    $newArray = array_merge($newArray, $item);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T00:54:20.543

只需弹出它：

```
$array = array_pop($array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T01:10:33.080

您可以将数组键值分配给一个新数组：

```
$newArray = $currentArray['Divertissement']; 
```

# java - 编辑文本空数据时的错误处理

> ID：13907028
> 
> 赞同：0
> 
> 时间：2012-12-17T00:52:48.427
> 
> 标签：java, android, xml

我只是想询问一下用于 android 应用程序中的 edittext 的代码。如果我在布局中的edittext 为空，当用户单击下一部分的按钮时，将弹出或出现对话框，提醒用户需要填写edittext。这是对我的编辑文本的一种错误处理。我只需要一个对我理解有用的示例代码。但在我需要的时候，它有多个用户需要填写的编辑文本。因此，所有的edittext都将清空，它将出现一个对话框和需要用户填写edittext的警报。需要专业知识帮助进行展示或为我提供示例代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:19:45.193

```
 EditText firstname = (EditText) findViewById(R.id.first_name);
               String name = firstname.getText.toString();

               if(name.length()<0){
               //your error alertbox;
               } 
```

我会给你一个工作的起点。这是你需要的东西的一部分。上面的代码将检查您的编辑框是否为空。您需要做的是查看警报框。发布您尝试过的任何内容和您的发现。如果您有任何不明白的地方，请随时在此处发布并询问。

这是创建警报框的示例。

[http://android-developing.blogspot.com/2011/02/how-to-create-alert-boxes.html](http://android-developing.blogspot.com/2011/02/how-to-create-alert-boxes.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T05:23:00.577

请使用下面的代码比较edittext值，它将解决您的问题。

对于一个编辑文本：-

```
EditText mEdttxt1 = (EditText) findViewById(R.id.first_name);

if(mEdttxt1.getText().toString().equals("") || mEdttxt1.getText().toString().equals(" ")){
    mError="Please Enter First Name";
    mErrorAlertDialog();
} 

public void mErrorAlertDialog() {
    AlertDialog.Builder mAlertDialog = new AlertDialog.Builder(getParent());
    mAlertDialog.setTitle("Dipak Keshariya");

    mAlertDialog.setMessage(mError);
    mAlertDialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            // TODO Auto-generated method stub

        }
    });
    mAlertDialog.show();
} 
```

对于所有 Edittext，逐个传递值而不是 mEdttxt1 并尝试它会解决您的问题。

# cakephp - CakePhp 对象错误

> ID：13907035
> 
> 赞同：0
> 
> 时间：2012-12-17T00:53:48.343
> 
> 标签：cakephp

我上传了一个关于制作的CakePHP 应用程序。它正在我和我朋友的本地主机上运行。在生产中尝试访问不同的控制器时出现以下错误：

**错误：调用非对象上的成员函数 find()
文件：/app/Controller/GroupsController.php
行：10**

```
<?php
class GroupsController extends AppController {

var $name = 'Groups';
var $displayField = 'name';
var $helpers = array('Paginator', 'Html', 'Form');

function index() {
    $groups = $this->Group->find('all');
    $members = $this->Group->GroupMember->find('all', array('order' => array('GroupMember.date_checked DESC'))); //Line 10!
    $owners = $this->Group->GroupContact->find('all', array('conditions' => array('GroupContact.owner' => 1)));
    $this->set(compact('groups', 'members', 'owners')); 
} 
```

看起来它无法将 GroupMember 读取为对象。

**模型 - groupMember.php**

```
<?php
class GroupMember extends AppModel{
var $name = 'GroupMember';
var $belongsTo = array(
    'Group' => array(
        'className' => 'Group',
        'foreignKey' => 'group_id'
    )
);
}
?> 
```

**模型 - group.php**

```
<?php
class Group extends AppModel{
var $name = 'Group';
var $hasMany = array(
    'GroupMember' => array(
        'className' => 'GroupMember',
        'foreignKey' => 'id',
    )
);
}
?> 
```

您可以在[http://www.thesupergroupproject.com/groups上查看错误](http://www.thesupergroupproject.com/groups)

再次 - 该项目正在我的本地主机和我朋友的本地主机上运行。什么可能导致错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:23:35.190

型号名称应为`CamelCase`. 我怀疑您使用的是 Windows 或其他操作系统`case insensitive`，而您的产品是 Linux，即`case sensitive`

此外，当使用 2.x 时，模型中不需要 $name 属性，这是为了 PHP4.x 支持，它已被删除。

您与的关系`'foreignKey' => 'id'`似乎不正确，GroupMember 应该与该`group_id`领域相关。

# git - 从 master 分支构建到 gh-pages 分支

> ID：13907038
> 
> 赞同：7
> 
> 时间：2012-12-17T00:54:06.353
> 
> 标签：git, github, github-pages

我想做的事：我正在使用 github。我有两个分支。母版和 gh 页。我的主分支上有一个 unity3d 项目。当我运行它时，它会生成一个网页。我想在 gh-pages 分支上显示网页的内容。

我认为这意味着我必须在我的存储库的两个分支之间共享一个文件夹。这似乎几乎是不可能的。

有正确的方法吗？我目前的解决方案是制作两个 github 项目并从第一个构建到第二个。然后，我查看第二个 gh-page。这似乎很……无关紧要。我应该能够用一个项目来完成这一切。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T17:34:28.883

您可以在第一个存储库的工作目录结构中*再次克隆您的存储库。*所以在本地，你有这个文件夹结构：

```
project
|- .git/
|- .gitignore
|- (other project related files)
|- deploy/
   |- .git/
   |- (deployed files) 
```

`project`和都是`deploy`您项目的克隆存储库；`deploy`是否已`gh-pages`检查分支。外部`.gitignore`显然列出了`deploy/`，因此该文件夹被项目忽略。

现在，在部署时，您将所有文件发布到部署文件夹中，然后 cd 进入其中，执行`git add .`, `git commit`，`git push`然后部署生成的文件。

显然，这不会为您提供 master 和 gh-pages 分支之间的实际关系，但两者将完全独立地存在于同一个存储库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-06T17:23:21.300

这类似于 Jekyll 工作流程。假设将 unity3d 内容生成到名为`foo`. 添加`foo`到`.gitignore`然后执行此操作

```
git checkout master
<run unity3d>
git checkout gh-pages
git rm -qr .
cp -r foo/. .
rm -r foo
git add
git commit 
```

[例子](http://github.com/svnpenn/a/blob/master/scripts/jekyll-publish.sh)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-22T08:13:10.260

查看非常棒的[gh-pages](https://github.com/tschaub/gh-pages) npm 模块。只需几行代码，例如：

```
var ghpages = require('gh-pages');
var path = require('path');
ghpages.publish(path.join(__dirname, 'dist'), function(err) { ... }); 
```

您将创建 gh-pages 分支，并将其推送到 github！

更详细地，来自文档：

> 调用此函数将创建当前存储库的临时克隆，`gh-pages`如果不存在则创建一个分支，复制基本路径中的所有文件，或仅那些与可选`src`配置中的模式匹配的文件，提交所有更改并推送到`origin`遥控器。

它是超级可配置的，对我来说就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T00:44:13.637

我想“轻松”地将我的 doxygen 文档从 master 推送到 gh-pages。

我读了类似的解决方案，我的眼睛呆滞了。

我的解决方案是：

1.  源分支：将文件列为 .gitignore 的“临时目录”
2.  将分支更改为 gh-pages（保留 .gitignore 列出的目录）
3.  gh-pages 分支：rsync 从临时目录到正确目录
4.  gh-pages 分支：'git add -u' 正确的位置目录
5.  gh-pages 分支：'git commit'

这仍然需要手动运行更新和提交，如果您仅从特定版本发布到网站，这可能是一件好事。

示例（主要是评论）在：[https ://github.com/nekenyu/libBsdSockets/blob/gh-pages/update_doc.sh](https://github.com/nekenyu/libBsdSockets/blob/gh-pages/update_doc.sh)

# mysql - Mysql最大行数

> ID：13907039
> 
> 赞同：2
> 
> 时间：2012-12-17T00:54:08.233
> 
> 标签：mysql, database

我希望创建一个基本上只有几个表的数据库，但可能有数百万行。

假设该网站是一个图像共享网站。我将有一个带有单个主键的表和大约 5 个字段（id、view_order、user_id、image_file、date_uploaded）。

我将有第二张表来计算选票（id、image_id、time_voted）

很简单。

MySQL 能否轻松处理第一个表可能有 1-20 亿行，而第二个表可能有 100 亿行的数据库？

我不需要做任何搜索，只需简单的计票，并根据第一张桌子上图像的 id 查找图像。

我不是数据库专家，所以请原谅我的术语。

提前致谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T01:01:46.317

在 32 位系统上，使用 unsigned int 可以拥有大约 40 亿条记录。使用 big int 和/或 64 位系统，它几乎是无限的。Facebook 使用 MySQL 作为他们的后端，问题不在于记录的数量，而在于性能。MySQL 可以处理数亿行并且具有非常好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:09:53.543

更多信息供您消化！

[MySQL 数据库表中的最大记录数](https://stackoverflow.com/questions/2716232/maximum-number-of-records-in-a-mysql-database-table)

谢谢，海军

# .net - https网站的优缺点？

> ID：13907041
> 
> 赞同：3
> 
> 时间：2012-12-17T00:54:26.767
> 
> 标签：.net, security, http, https, owasp

我正在研究在完整的 https 中创建一个新站点的可能性，而不是在 https 中仅包含它的一部分，例如登录。这是基于最近的[OWASP 报告中提供的指南](https://asafaweb.com/OWASP%20Top%2010%20for%20.NET%20developers.pdf)

我正在寻找这种方法的优缺点？是的，我获得了安全感，但这样做会失去什么？所有的反馈都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:20:18.053

完整的 https 有两个缺点。

1.  加密的（非常轻微的）性能影响
2.  无法从缓存代理中受益

对于现代系统，加密和会话设置的性能影响在今天确实不是问题。性能不再是不使用 https 的借口。

Http 代理无法缓存 https 页面或资产，这可以看作是好事或坏事。如果你依赖缓存来提高性能，那就不好了，它主要会影响页面资产，如脚本、css 和图像。不过，客户端缓存应该仍然有效。

完全 https 提供的更高的安全性、身份验证和客户信心远远超过了这些缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:22:00.797

金钱和速度。

您需要购买安全证书，如果您正在运行子域，则需要购买通配符安全证书（可能非常昂贵）。

与非 SSL (http) 相比，您的网站在 SSL (https) 上会更慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T01:22:45.303

优点很明显： - 连接是安全的（这意味着机密且具有完整性）

中立： - https 不提供真实性（您仍然需要实现一些东西） - 所有更高级别也应该受到保护（如果连接是安全的，这并不意味着整个协议是安全的）

缺点： - 性能可能较慢 - 由于性能较慢，可用性可能会出现问题（我相信 DDoS https 网站更容易）。

# ruby-on-rails - 未定义的方法“create_translation_table！”

> ID：13907042
> 
> 赞同：9
> 
> 时间：2012-12-17T00:54:28.680
> 
> 标签：ruby-on-rails, globalize3

我有一个新的 Rails 引擎，我想使用 globalize3。我在我的 lib//engine.rb 中做到了这一点：

```
require 'globalize3'

module SimpleCms
  class Engine < ::Rails::Engine
  end
end 
```

现在，我尝试创建这样的迁移：

```
class CreatePages < ActiveRecord::Migration
  def up
    create_table :pages do |t|
      t.string :path
      t.timestamps
    end
    Page.create_translation_table! title: :string, body: :body
  end

  def down
    drop_table :pages
    Page.drop_translation_table!
  end
end 
```

我有这个错误：

```
undefined method `create_translation_table!' for #<Class:0x00000001d5ca18> 
```

我认为文件 'lib/globalize/active_record/migration.rb' 没有加载。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-01T16:30:05.583

You have to add

```
translates :attributename 
```

to your Engine model file before you run the migration. (Replace :attributename with the attribute you want to have translated). That fixed it for me.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T09:58:11.450

尝试这个

```
SimpleCms::Page.create_translation_table! title: :string, body: :body 
```

但是外键会变成`simplecms_page_id`，我手动改回`page_id`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-08T19:19:50.043

就我而言，`globilize`gem 无法正常工作，因为`traco`gem 也在 Gemfile 中。删除`traco`修复了错误。所以我想只允许使用一种翻译宝石

# jquery - 使用jquery获取json对象中的元素个数

> ID：13907048
> 
> 赞同：6
> 
> 时间：2012-12-17T00:55:45.383
> 
> 标签：jquery, json

> **可能重复：**
> [在 jquery 中查找数组的长度（大小）](https://stackoverflow.com/questions/5317298/find-length-size-of-an-array-in-jquery)

我有一个从 php 文件返回的 json 对象，如下所示：-

```
{"food":[
    {
        "name"       :"Belgian Waffles",
        "price"      :"$5.95",
        "description":"two of our famous Belgian Waffles with plenty of real maple syrup",
        "calories"   :"650"
    },
    {
        "name"       :"Strawberry Belgian Waffles",
        "price"      :"$7.95",
        "description":"light Belgian waffles covered with strawberries and whipped cream",
        "calories"   :"900"
    },
    {
        "name"       :"Berry-Berry Belgian Waffles",
        "price"      :"$8.95",
        "description":"light Belgian waffles covered with an assortment of fresh berries and whipped cream",
        "calories"   :"900"
    }
]} 
```

这实质上是从对象返回三个食物元素。如果 json 数据是动态的并且使用 jquery 未知，我如何计算返回的元素总数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T00:59:04.340

假设您已经解析了 JSON（或者 jQuery 已经为您完成了解析，如果您使用它的 Ajax 函数，它将解析）并且您将结果对象放在变量中，只需执行以下操作：

```
var data = /* your parsed JSON here */
var numberOfElements = data.food.length; 
```

（注意：[没有 JSON 对象之类的东西](http://benalman.com/news/2010/03/theres-no-such-thing-as-a-json/)：在解析 JSON 之前它是一个*字符串；*解析它之后它是一个*对象。*）

编辑：在评论中您说您不知道该属性被调用`food`- 如果您*确实*知道将有一个属性并且该属性将是一个数组，您可以这样做：

```
var data = /* your object */
var propName;
var numberOfElements;
for (propName in data);
numberOfElements = propName ? data[propName].length : 0; 
```

如果您*不*知道只有一个属性，那么您的要求就太模糊了：如果可能有多个属性，您要检查哪一个的长度？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T00:59:19.790

```
var json = '{"food":[{"name":"Belgian Waffles","price":"$5.95","description":"two of our famous Belgian Waffles with plenty of real maple syrup","calories":"650"},{"name":"Strawberry Belgian Waffles","price":"$7.95","description":"light Belgian waffles covered with strawberries and whipped cream","calories":"900"},{"name":"Berry-Berry Belgian Waffles","price":"$8.95","description":"light Belgian waffles covered with an assortment of fresh berries and whipped cream","calories":"900"}]}';

var obj = JSON.parse(json);

alert(obj.food.length);​ 
```

演示：http: [//jsfiddle.net/XhG6L/](http://jsfiddle.net/XhG6L/)

请注意，IE8 及以下版本不支持 JSON，但有可用的 polyfill。

另外，作为另一个说明，jQuery 在这里没有做这项工作——这只是普通的旧 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T01:12:52.770

> 如果 json 数据是动态的并且使用 jquery 未知，我如何计算返回的元素总数？

您可以使用长度属性来获取计数。应在食品项目上调用此属性。由于 food 返回了三个项目，您可以使用`data.food.length;` data 是全局对象。

还要确保您的[JSON 是有效](http://jsonlint.com/)的。虽然它似乎有效，但看起来有手动换行符，在这种情况下它将失败：

# mdx - icCube 架构刷新时间

> ID：13907050
> 
> 赞同：3
> 
> 时间：2012-12-17T00:56:05.130
> 
> 标签：mdx, olap, iccube

我正在使用 icCube Web 报告，我想显示多维数据集的刷新时间，但找不到如何操作。我想有一种方法可以使用专用的 MDX 语句，但在文档中找不到任何参考。知道怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T01:08:37.160

MDX 函数[SchemaRefreshTime](http://www.iccube.com/support/documentation/mdx/SchemaRefreshTime.php)为您提供此信息。因此，您可以使用带有“Plain MDX”请求的“Simple Table”小部件：

```
with 
  member [Measures].[Schema Refresh Time] as SchemaRefreshTime(), 
         FORMAT_STRING = "j:HH'h'mm"

select [Measures].[Schema Refresh Time] on 0 from [Sales] 
```

FORMAT_STRING 使用 Java[简单日期格式](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。

# mysql - 一起或单独声明索引，有什么区别？

> ID：13907051
> 
> 赞同：11
> 
> 时间：2012-12-17T00:56:07.507
> 
> 标签：mysql, indexing

我在处理 mysql 中的大量数据集时遇到了问题，我正在探索许多不同的索引方式。如果我一起声明多个索引，谁能告诉我有什么区别

```
ALTER TABLE `db`.`test` ADD INDEX `someindex` (field1, field2, field3); 
```

而不是单独声明它们？

```
ALTER TABLE `db`.`test` ADD INDEX `f1` (field1), ADD INDEX `f2` (field2); 
```

为什么要一起或单独声明它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T01:55:26.623

我教 MySQL 培训课程，在讨论多列索引时，我使用电话簿的类比。电话簿基本上是姓氏索引，然后是名字。所以排序顺序取决于哪个“列”在前。搜索分为几类：

1.  如果您查找姓氏为 Smith 的人，您可以轻松找到他们，因为这本书是按姓氏排序的。
2.  如果您查找名字是约翰的人，电话簿没有帮助，因为约翰分散在整本书中。你必须扫描整个电话簿才能找到它们。
3.  如果您查找具有特定姓氏 Smith 和特定名字 John 的人，这本书会有所帮助，因为您会发现 Smiths 排序在一起，并且在该 Smiths 组中，Johns 也是按排序顺序找到的。

如果您的电话簿按名字排序，然后按姓氏排序，那么在上述情况#2 和#3 中，电话簿的排序将帮助您，但在情况#1 中没有帮助。

这就解释了查找精确值的情况，但是如果您按值范围查找呢？假设您想查找名字为 John 且姓氏以“S”开头的所有人（Smith、Saunders、Staunton、Sherman 等）。Johns 在每个姓氏中按 J 排序，但如果您想要所有姓氏以 S 开头的所有 Johns，则不会将 Johns 分组在一起。它们又分散了，所以你最终不得不扫描所有姓氏以“S”开头的名字。然而，如果电话簿是按名字然后按姓氏组织的，那么您会发现所有 Johns 在一起，然后在 Johns 中，所有 S 姓氏将组合在一起。

因此，多列索引中的列顺序绝对很重要。一种类型的查询可能需要索引的特定列顺序。如果您有多种类型的查询，您可能需要多个索引来帮助它们，列的顺序不同。

有关更多详细信息和示例，请参阅我的演示文稿[如何设计索引，真的](http://www.slideshare.net/billkarwin/how-to-design-indexes-really)。或者观看我的[视频](https://www.youtube.com/watch?v=ELR7-RdU9XU)演示。

* * *

为了阐明何时使用单列索引与多列索引，请考虑您是否使用电话簿通过姓氏和名字的组合来查找人员。例如“莎拉·史密斯”。

如果您有两个电话簿，一个按姓氏组织，另一个按名字组织，您可以在姓氏簿中搜索“Smith”，在名字簿中搜索“Sarah”，然后以某种方式找到两者的交集结果。MySQL 有时会尝试使用[索引合并算法](https://dev.mysql.com/doc/refman/8.0/en/index-merge-optimization.html)来做到这一点。

最好搜索一个索引，如果它同时按姓氏和名字排序，就像真正的电话簿一样。然后搜索找到书的子集“Smiths”，并且在该子集中，它可以有效地搜索“Sarahs”，因为该子集按名字排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T01:13:35.143

数据库通常每个查询只能使用一个索引，因此假设所有三列都在您的“where”子句中，您将需要单个复合索引。

但是，复合索引只能从左到右部分使用，因此如果您有另一个查询，例如仅 field1，则仍将使用复合索引。但是，对于在“where”子句中只有 field2 的查询，不能使用该索引，您将需要一个仅在 field2 上的索引，或者一个复合索引，但以 field2 开头。

这在 [MySQL 文档] 中有详细说明

# java - 如何将项目数组添加到 JavaFX 表视图

> ID：13907052
> 
> 赞同：2
> 
> 时间：2012-12-17T00:56:11.213
> 
> 标签：java, javafx

以下是我的代码。items 数组有 12 个元素。我想将它添加到表格视图中。但它会将最后一项添加到表中 12 次。我怎样才能解决这个问题。谢谢。

```
@Override
public void initialize(URL url, ResourceBundle rb) {

    col1.setCellValueFactory(new PropertyValueFactory<View, String>("name"));
    col2.setCellValueFactory(new PropertyValueFactory<View, String>("qty"));
    col3.setCellValueFactory(new PropertyValueFactory<View, String>("price"));

    ObservableList data = FXCollections.observableArrayList();
    View view = new View();
    table.setItems(data);

    for(Item item : items){
        view.name.set(item.getItem());
        view.price.set(String.valueOf(item.getPrice()));
        view.qty.set(String.valueOf(item.getAmount()));
        data.add(view);
    }

    lblTotalpr.setText(String.valueOf(ttl));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:58:35.103

```
View view = new View() 
```

将此行放入 for 循环 :)

# math - 寻找向量

> ID：13907053
> 
> 赞同：1
> 
> 时间：2012-12-17T00:56:16.870
> 
> 标签：math, opengl, algebra

给定一个向量 V = (x, y, z)，我如何找到与 V 组成一个轴的 2 个向量？换句话说，其中一个垂直并位于同一平面内，另一个垂直于这两个向量。

我需要这个在 OpenGL 中实现一个不错的相机管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:18:24.523

这个问题对于 StackOverFlow 来说确实是题外话，但我有一点时间。您要求形成正交向量的三元组，其中两个与给定向量正交。最简单的方法是使用 QR 分解。

我将在 MATLAB 中进行，它可以很好地处理线性代数。从任意列向量 v 开始。

```
v = [1 2 3]'
v =

     1
     2
     3 
```

该数组一列的 QR 分解只产生矩阵 Q 和 R。我们只需要 Q。

```
[Q,R] = qr(v); 
```

Q 的列为您提供所需的内容。

```
Q =

  -0.267261241912424   -0.534522483824849   -0.801783725737273
  -0.534522483824849    0.774541920588438   -0.338187119117343
  -0.801783725737273   -0.338187119117343    0.492719321323986 
```

看到第一列只是 v，缩放为“单位”向量。如果您不喜欢所产生的方向，我们也可以在一组轴上任意乘以 -1。该矩阵的第二列和第三列是与给定向量正交的单位向量。

当然，这不是您可能完成的唯一方法。例如，可以选择任意两个其他随机向量，然后使用 Gram-Schmidt 正交化三个向量的集合。这是一个有效的方案，只要随机机会在您开始时没有产生一些线性相关集的向量。因此，该算法有可能失败，尽管极不可能。

另一种方案实际上只使用了一对叉积。因此，给定一些向量 v1：

1.  随机选择 v2。

2.  使用叉积，设置 v3=cross(v1,v2)。如果向量 v3 的范数为零，则返回步骤 1，因为这意味着向量 v1 和 v2 是共线的。

3.  设置 v2 = 交叉（v1，v3）。

这个算法很简单，它确实与 Gram-Schmidt 正交化有一些相似之处，但编写起来相当简单。您需要小心第 2 步中的测试，因为测试一个数字是否正好为零并不是一个好主意。您可能还希望在计算向量时缩放向量以具有单位范数，因为这将解决一些数值问题。

最后，我仍然更喜欢使用 QR 分解，因为它很简单，不需要对“零”进行测试，因此不需要明确的容差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:12:39.090

只给你一个向量，你可以找到无数个垂直于它的向量。特别是这组向量形成了一个平面，您的给定向量垂直于该平面。

给定一些与第一个向量不共线的向量，您可以通过应用[Gram-Schmidt 正交化](https://en.wikipedia.org/wiki/Gram%E2%80%93Schmidt_process)来找到垂直（=正交）向量。让你的第一个向量是**↑v**，并且**↑u**是一些向量，所以 ↑u =/= l ↑v，然后是垂直的 ↑u_ = ↑u - ↑v ( ↑u · ↑v)

# c++ - 二分查找的逻辑

> ID：13907055
> 
> 赞同：3
> 
> 时间：2012-12-17T00:56:21.717
> 
> 标签：c++, c, binary-search

我在一本数据结构书籍中阅读了二进制搜索的伪代码，然后我开始编写代码。我写的代码是：

```
#include <iostream.h>
#include <conio.h>
template <class T>

int BSearch(T x[], const int n, T item)
    {
    int loc, first = 0, found = 0, last = n-1;
        while(first <= last && !found)
        {
            loc = (first + last)/2;
            if(item < x[loc])
                last = loc - 1;
            else if(item > x[loc])
                first = loc + 1;
            else
                found = 1;
         }
      return found;
   }

int main()
    {
    const int n =5;
      int x[n],item;
      cout << "Pls enter " <<n<<" number(s): ";

      for(int i = 0; i < n;i++)
        cin >> x[i];
      cout << "Pls enter the item to Search: ";
        cin >> item;
      if(BSearch(x,n,item))
        cout << "\n\t Item Exist";
      else
        cout << "\n\t Item NOT Exist";

      getch();
      return 0;
   } 
```

没有任何错误，但存在逻辑错误。它只是从 BSearch 函数返回 0 值，我只是收到此消息“项目不存在”。我的虫子在哪里？！我没找到。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T01:01:56.527

二进制搜索仅适用于有序列表。但是您没有对从中获得的列表进行排序`std::cin`，因此您从二进制搜索中得到错误的结果。

要解决此问题，您要么必须将输入限制为预排序列表，要么必须在执行二分搜索之前对列表进行初始排序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T01:23:14.507

我试过你的代码，它似乎工作正常。您必须记住，您输入的数字必须从小到大排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:56:21.787

二进制搜索涉及通过将范围划分为其原始大小的一半来将搜索范围缩小到一半。二进制搜索对排序数组进行操作。它将这个范围中间的元素与要搜索的值进行比较，如果值小于中间值，则在从第一个元素到中间的范围内查找该值，否则新的搜索范围变为中间到最后一个元素。这个过程一直持续到找到所需的元素或下限变得大于上限。二分搜索的效率在平均和最坏情况下为 O(log2n)，在最佳情况下为 O(1)。下面给出了执行二进制搜索的“C”程序：

```
/* Binary Search */
#include <stdio.h>

#define MAX 10

int main(){
int arr[MAX],i,n,val;
int lb,ub,mid;
printf(“nEnter total numbers?”);
scanf(“%d”,&n);
for(i=0;i<n;i++){
printf(“nEnter number?”);
scanf(“%d”,&arr[i]);
}
printf(“nEnter the value to search?”);
scanf(“%d”,&val);
lb=0;ub=n-1;
while(lb<=ub){
mid=(lb+ub)/2;
if(val<arr[mid])
ub = mid-1;
else if(val>arr[mid])
lb = mid+1;
else {
printf(“nNumber found…!”);
return;
}
}
printf(“nNumber not found…!”);
} 
```

# python - 列表列表 + 循环

> ID：13907058
> 
> 赞同：0
> 
> 时间：2012-12-17T00:57:11.627
> 
> 标签：python, list, function, loops

我有一个这样的列表列表：

```
list = [[year1-month1,int1,float1],[year1-month1,int2,float2],[year1-month2,int3,float3].... 
```

我需要定义一个通过它返回结果的函数，如下所示：

```
newList = [[((int1*float1)+(int2*float2))/(float1+float2),year-month1],... 
```

我的问题是，超过 2000 个子列表的第一项是年月格式的日期，其余的是天数，我需要获取月平均值。我尝试了几件事，但无法让它工作。我会很感激一些建议。

我尝试过的是：

```
 def avPrice(mylist):
        month=[]
        i = 0
        for i in mylist:
            if mylist[i][0] not in month:
                month = mylist[i][0],mylist[i][1]*mylist[i][2],mylist[i][2]
            else:
                month = month[0],month[1]+(mylist[i][1]*mylist[line][2]),month[2]+mylist[i][2]
                i = i + 1
            return month
        monthAvPrice.append(month) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:35:52.603

使用 itertools.groupby() 将一个月的条目组合在一起，并使用 reduce() 将数字相加。例如：

```
import itertools
ddat= [['2012-01', 1, 5.4], ['2012-01', 2, 8.1], ['2012-01', 3, 10.8],
['2012-01', 4, 13.5], ['2012-02', 1, 8.1], ['2012-02', 2,10.8],
['2012-02', 3, 13.5], ['2012-02', 4, 16.2], ['2012-03', 1, 10.8],
['2012-03', 2, 13.5], ['2012-03', 3, 16.2], ['2012-03', 4, 18.9],
['2012-04', 1, 13.5], ['2012-04', 2, 16.2], ['2012-04', 3,18.9]]

[[w[0], reduce(lambda x, y: x+y[1]*y[2], list(w[1]), 0)] for w in itertools.groupby(ddat, key=lambda x:x[0])] 
```

生产

```
[['2012-01', 108.0],
 ['2012-02', 135.0],
 ['2012-03', 162.0],
 ['2012-04', 102.6]] 
```

*编辑：*上面只得到所需值的分子。下面显示的代码计算分子和分母。作为演示代码，它会生成一个包含值及其比率的列表。

`for`请注意以下代码中的明显额外内容。（即
`... for w,v in [[w, list(v)] for w,v in itertools ...`
第三行代码中的部分。）额外的层`for`用于将可迭代的副本制作`v`为列表。也就是说，因为`v`itertools.groupby() 返回的是一个可迭代的而不是一个实际的列表，所以`numer_sum(v)`会用尽`v`，所以`denom_sum(v)`会得到一个值 0。另一种方法是使用 itertools.tee；但另一个问题[的答案](https://stackoverflow.com/a/3267069/837847)说这种`list`方法可能更快。第三种可能性是将`numer_sum`和组合`denom_sum`成一个返回元组的函数，并添加一个外部`for`来计算比率。

```
def numer_sum(w): return reduce(lambda x,y: x+y[1]*y[2], w, 0)
def denom_sum(w): return reduce(lambda x,y: x+y[2], w, 0)
[[w, round(denom_sum(v),3), numer_sum(v), numer_sum(v)/denom_sum(v)] for w,v in [[w, list(v)] for w,v in itertools.groupby(ddat, key=lambda x:x[0])]] 
```

生产

```
[['2012-01', 37.8, 108.0, 2.857142857142857],
 ['2012-02', 48.6, 135.0, 2.777777777777778],
 ['2012-03', 59.4, 162.0, 2.7272727272727275],
 ['2012-04', 48.6, 102.6, 2.111111111111111]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:31:52.697

这就是我想出的。

```
def appendDateNumbers(d, item):
    def sumItem(date, integer, floating, *junk):
        if date in d:
            d[date]+=integer*floating
        else:
            d[date]=integer*floating
        return d
    return sumItem(*item)

def _averageListWith(dn, datesList):
    def averageItem(i):
        return (i, dn[i]/datesList.count(i))
    return dict(map(averageItem, dn.keys()))

def averageLst(lst):
    return _averageListWith(reduce(appendDateNumbers, lst, {}), 
                            map(lambda x: x[0], lst))

print averageLst([["12-12", 1, 1.0],["12-12", 2, 2.2],["13-1", 3, 3.3]]) 
```

averageLst() 函数应该为您提供加或减舍入误差。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T01:28:15.217

我知道可能有更好的方法，但是您是否尝试过使用 for 循环？

```
def monthly_average(list):
    newList=[]
    for i in range(len(list)/2):
        avg=((list[i][1]*list[i][2])+(list[i+1][1]+list[i+1][2]))
        avg=avg/(list[i][2]+list[i+1][2])
        newList.append(avg)
        newList.append(list[i][0])
    return newList 
```

假设您每个月都有两个子列表，那应该可以工作。如果您有更多，那么您可能必须添加一个函数来检查其“第零”索引等于某个字符串的所有子列表。例如：

```
newList=[]
tempList=[]
for i in list:
    if i[0]=='year1-month1':
        tempList.append(i)
while len(tempList)>1:
    tempList=monthly_average(tempList) 
```

然后每个月重复一次，更改字符串值。

同样，它可能不是最有效的方法，但它确实有效。

# java - 关于java，String.replaceAll

> ID：13907059
> 
> 赞同：0
> 
> 时间：2012-12-17T00:57:15.417
> 
> 标签：java, string, replaceall

我一直在尝试解决这个问题，我对 replaceAll 方法做了一些研究，它似乎使用了正则表达式。但我从未听说过任何包含“。”的正则表达式。特点。这是我一直在使用的代码：

```
System.out.println(parsed[1]);
myStatus = parsed[1].replaceAll("...", " ");
System.out.println("new: " + myStatus);
status.setText(myStatus); 
```

输出结果为：

旧...新字符串：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:05:35.893

如果要替换文字字符串`"..."`（三个点），可以：

*   use `replace("...", " ")`，**不**使用正则表达式
*   use `replaceAll("\\.{3}", " ")`，这是您在正则表达式中指定文字点的方式

除非您*需要*使用`replaceAll()`（因为您调用的某些实现使用它），否则请使用`replace()`

### 编辑：

谢谢[路易斯](https://stackoverflow.com/users/869736/louis-wasserman) `\\.{3}` *比*（ doh `\\.\\.\\.`！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:05:54.433

您的通话实际上是在将任意 3 个字符组替换为空格。因此，字符串`"old...string"`将变为 4 个空格。您需要转义点或定义[字符类](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html) [量词](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)，因为它们是[预定义的字符](http://docs.oracle.com/javase/tutorial/essential/regex/pre_char_classes.html)。

就像是

```
myStatus = parsed[1].replaceAll("[.]{3}", " "); 
```

**注意：您可以**[在此处](http://www.regexplanet.com/advanced/java/index.html)测试您的 Java 正则表达式。

# asp.net-mvc-2 - 如何在 MVC 2.0 成员资格中包含安全提示答案

> ID：13907062
> 
> 赞同：0
> 
> 时间：2012-12-17T00:57:20.603
> 
> 标签：asp.net-mvc-2, asp.net-membership, registration, membership-provider

我为 MVC 2.0 创建了一个新的 Web 应用程序项目，并自动添加了文件夹和文件，包括注册页面。

缺少秘密问题和答案字段/文本框，虽然我可以将它们添加到注册页面，但我不确定如何提交它们以在注册过程中进行验证。

在注册过程中包含此信息的正确方法是什么？

IE。新注册人必须同时提供问题和答案才能创建新的个人资料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:39:32.117

通过内置的智能感知功能使用编辑器时，我已经自动解决了这个问题，该功能显示了 revalavent 函数调用中可能出现的所有可用覆盖。

```
Dim createStatus As MembershipCreateStatus = MembershipService.CreateUser(Model.UserName, Model.Email, Model.Password, Model.SecretQuestion, Model.Answer) 
```

# java - 使用 PHP 脚本在 Java 中创建树结构

> ID：13907076
> 
> 赞同：0
> 
> 时间：2012-12-17T01:00:21.763
> 
> 标签：java, php, spring, hibernate, tree

`children`我有一个使用树结构的 js 应用程序，其中节点的子节点作为数组存储在它的属性中。数据从 MySQL 数据库中读取，树结构构建在 php 后端。然后一切都作为 JSON 发送：

```
[
    {
        id: 1,
        children: [
            {
                id: 11
            },
            {
                id: 12
            }
        ]
    },
    {
        id: 2
    },
    {
        id: 3
    }
] 
```

这是我正在使用的 PHP 脚本。它可以分为4个阶段：

*   首先，我通过它们的 id 创建一个关联的节点数组
*   然后我创建另一个数组，只取第一级的节点（没有定义 parentId）
*   接下来我递归遍历第一个数组检查 id 和 parentId 并构建我的树
*   最后我将输出关联数组重写为索引数组

这是整个来源：

```
q = 'SELECT * FROM tasks';
$r = mysql_query($q);
$tasks = array();

//1.
while ($e = mysql_fetch_assoc($r)){
    $tasks[$e['Id']] = $e;
}

$sortedArray = array();

//2\. get first level with no parent
foreach($tasks as $k => $v){
    if($v['parentId'] == 'null'){
        $sortedArray[$k] = $v;
        unset($tasks[$k]);
    }
}

//3\. calls findChildren for first level nodes
function getChildren(array & $a1, array & $a2){
    foreach($a1 as $k => $v){
        findChildren($v, $a2, $k);      
    }
}

//recursive method checking if record's parent is already in the `sortedArray`.
//if yes, it's added to parent's `children` array. Otherwise it tries to
//find the parent in the node`s `children` array
function findChildren($rec1, array & $a2, $key){

    foreach($a2 as $k => $v){
        if($rec1['parentId'] == $v['Id']){
            $a2[$k]['children'][$rec1['Id']] = $rec1;
            unset($tasks[$key]);
        } else {
            if (isset($v['children'])){
                findChildren($rec1, $a2[$k]['children'], $key);
            }
        }
    }
}

//4\. after `findChildren` `sortedArray` is an associative array, which
//is not valid for JSON
function makeIndexed(array & $arr, array & $par = null){
    if(is_null($par)){
        $arr = array_values($arr);
    } else {
        $par['children'] = array_values($arr);
    }

    for($i=0; $i<count($arr); $i++) {   
        $temp = @$arr[$i]['children'];
        if(isset($temp)) {
            makeIndexed($arr[$i]['children'], $arr[$i]);
        }       
    }
}

getChildren($tasks, $sortedArray);

makeIndexed($sortedArray);

echo json_encode($sortedArray); 
```

现在我的目标是在 Java 后端重新创建这种行为。现在，我只是从 Hibernate 查询中获得了一个包含所有事件的平面列表结构：

```
public static Map<String,Object> getEvents() {

    DetachedCriteria criteria = DetachedCriteria.forClass(Event.class);

    return mapOk(hibernateTemplate.findByCriteria(criteria));
}

public static Map<String,Object> mapOK(List<Event> events){

    Map<String,Object> modelMap = new HashMap<String,Object>(2);
    modelMap.put("data", events);
    modelMap.put("success", true);

    return modelMap;
} 
```

如何解决这个问题？自从我上次使用 Java 以来已经有一段时间了，而且我从未将它用于 Web 编程，所以我不确定从哪里开始以及应该采用什么方法。也许这可以以某种方式自动化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:17:40.000

不知道为什么有人-1'ed我的问题，但这是我想出的：

```
import java.io.IOException;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.springframework.stereotype.Component;
import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import org.json.*;

import org.com.model.Task;

@Component
public class ReturnTasks {

    private static JSONObject sortedByParentTasks = null;
    private static JSONArray tasksTree = null;
    private static JSONObject taskChildrenObject;

    /**
     * Generates JSON String to return in the modelAndView
     * @param events
     * @return
     * @throws JSONException 
     * @throws IOException 
     * @throws JsonMappingException 
     * @throws JsonGenerationException 
     */

    public static String mapOK(List<Task> events) throws JSONException, JsonGenerationException, JsonMappingException, IOException{
        tasksTree = null;
        tasksTree = new JSONArray();
        sortedByParentTasks = null;
        sortedByParentTasks = new JSONObject();
        tasksTree = makeTree(events);

        return tasksTree.toString();
    }

    private static JSONArray makeTree(List<Task> list) throws JSONException, JsonGenerationException, JsonMappingException, IOException{

        Iterator<Task> listIterator = list.iterator();
        String parentId;

        while(listIterator.hasNext()){
            Task task = listIterator.next();
            JSONArray equalParentId;
            parentId = ""+task.getParentId();
            String json = new ObjectMapper().writeValueAsString(task);
            JSONObject taskJSON = new JSONObject(json);

            if (sortedByParentTasks.has(parentId)){
                sortedByParentTasks.accumulate(parentId, taskJSON);
            } else {
                equalParentId = new JSONArray();
                equalParentId.put(taskJSON);
                sortedByParentTasks.put(parentId, equalParentId);
            }
        }

        addNodes(sortedByParentTasks.getJSONArray("null"));

        return tasksTree;
    }

    private static void addNodes(JSONArray nodes) throws JSONException{
        for(int i=0, l=nodes.length(); i<l; i++){
            taskChildrenObject = nodes.getJSONObject(i);
            listHierarchy(taskChildrenObject);
            tasksTree.put(taskChildrenObject);
        }
    }

    private static void listHierarchy(JSONObject task) throws JSONException{
        JSONArray childrenArray = new JSONArray();
        JSONArray childNodes = new JSONArray();

        try {
            childNodes = sortedByParentTasks.getJSONArray(""+task.get("Id"));
        }catch(JSONException e){} 

        if (childNodes.length() > 0){
            for (int i=0, l=childNodes.length(); i<l; i++) {
                JSONObject childObject = childNodes.getJSONObject(i);
                childrenArray.put(childObject);
                try{
                    task.put("children", childrenArray);
                    task.put("leaf", false);
                }catch(JSONException e){}

                listHierarchy(childObject);
            }           
        }
    }

    /**
     * Generates modelMap to return in the modelAndView in case
     * of exception
     * @param msg message
     * @return
     */
    public static String mapError(String msg){

        Map<String,Object> modelMap = new HashMap<String,Object>(2);
        modelMap.put("message", msg);
        modelMap.put("success", false);

        return modelMap.toString();
    } 
} 
```

# c - C：如何知道当前输入中是否有 \b

> ID：13907077
> 
> 赞同：0
> 
> 时间：2012-12-17T01:00:22.323
> 
> 标签：c, input

美好的一天，您如何知道输入字符串中是否有退格符 (\b)？因为据我所知，我只是将光标移回，擦掉最近写入 \b 的字符。我怎么知道那里有一个 \b ？肿瘤坏死因子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:04:12.243

您可以使用 查找字符串中的任何字符`strchr`。也就是说，您通常不会在输入中看到退格键，因为您的终端（tty）将处于*熟*模式（而不是*原始*模式），这意味着内核将在一行内处理退格键等内容，直到您点击返回，然后整个（编辑的）字符串将被传递给您的程序。

像你的 shell 这样的程序将 tty 置于原始模式，以便他们可以进行更广泛的编辑（通常是完整的 Emacs 或类似 vi 的编辑）。当您从 shell 启动程序（例如您自己的程序）时，它首先将其放回熟化模式。

# c# - 我是否以正确的方式使用 mongodb 驱动程序执行此删除代码？

> ID：13907078
> 
> 赞同：1
> 
> 时间：2012-12-17T01:00:30.373
> 
> 标签：c#, mongodb, exception, getlasterror

我阅读了 MongoDB 文档，但我不太了解！我需要知道以下代码是否正确！如果操作成功执行，我需要得到确认。需要调用 getLastError 还是 try-catch 就足够了？

```
 public override bool DeleteUser(string username, bool deleteAllRelatedData)
        {
            WriteConcernResult result = null;
            try
            {
                result = this.users.Remove(Query.And(Query.EQ("ApplicationName",
                    this.ApplicationName), Query.EQ("Username", username)), RemoveFlags.Single,
                    WriteConcern.Acknowledged);

                if (result.HasLastErrorMessage)
                {
                    return false;
                }

                return (result.DocumentsAffected == 1);
            }
            catch (Exception ex)
            {
                return false;
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T16:42:47.027

因为您使用的是 WriteConcern.Acknowledged，所以 try/catch 就足够了。WriteConcern.Acknowledged 将为您执行 getLastError。

# ios - 在 UIScrollView 内以编程方式调整 UITableView 的大小并避免自动布局约束

> ID：13907079
> 
> 赞同：6
> 
> 时间：2012-12-17T01:00:50.670
> 
> 标签：ios, uitableview, uiscrollview, resize, autolayout

我有一个 UIScrollView，其中包含一些组件。其中一个控件是 UITableView，它用于显示电影的时间表列表，最多大约 7 行。

我将 UITableView 设置为不允许任何形式的移动，并以编程方式更改其大小以适应其内容，并增加 UIScrollView 的内容大小，使其可以平滑滚动。

一旦视图显示在屏幕上，调整大小就可以正常工作，但是当我滚动 UIScrollView 以查看下方时，UITableView 会恢复到以前的大小。

查看下一张图片：[http ://d.pr/i/rKzb](http://d.pr/i/rKzb)

我使用 Storyboard AutoLayout 来设计界面，UITableView 有以下限制：

[http://i.stack.imgur.com/GowOG.png](http://i.stack.imgur.com/GowOG.png)

这是我调整控件大小的方式：

```
- (void) resizeViews {
    //
    // Synopsis
    //
    CGRect synopsisNewFrame = [Utilities adjustLabel:_movieSynopsis frameForText:_movieSynopsis.text];
    [_movieSynopsis setFrame:  synopsisNewFrame];

    //
    // Schedules
    //
    CGRect schedulesNewFrame = CGRectMake(self.tableView.frame.origin.x,
                                      _movieSynopsis.frame.origin.y + _movieSynopsis.frame.size.height + 4,
                                      self.tableView.frame.size.width,
                                      self.tableView.contentSize.height);

    [self.tableView setFrame: schedulesNewFrame];

    //
    // Scroll View
    //

    CGSize scrollSize = CGSizeMake(292, self.tableView.frame.origin.y + self.tableView.frame.size.height + 10);

    [_scrollView setTranslatesAutoresizingMaskIntoConstraints:NO];
    [_tableView setTranslatesAutoresizingMaskIntoConstraints:NO];

    [self.tableView setContentSize: scrollSize];
    [self.tableView setContentOffset:CGPointMake(0, 0)];

} 
```

这里是我调用 resizeView 的地方（在 ViewController 中）：

```
- (void) viewDidAppear:(BOOL)animated {
    [self resizeViews];
} 
```

有什么办法可以避免这种情况发生吗？

我很确定问题是具有 UITableView 的约束。

让我在使用 AutoLayout 时提出解决方案来防止这种情况发生。

在此先感谢您的帮助。

（抱歉我不能发图片）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T20:55:48.360

如果您想设置与您在情节提要中所做的内容相匹配的滚动视图的 contentSize，请在您的 viewDidAppear 中执行此操作。

```
 [self.scrollView setContentOffset:CGPointZero animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:31:25.227

我今天遇到了同样的问题。正如您所怀疑的，这是 AutoLayout 问题。我现在不确定如何正确解决它。但是，如果您禁用 AutoLayout，那就没问题了。为此，您可以打开 XIB 文件选择 File Inspector 选项卡，然后取消选中 Use AutoLayout

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T03:04:33.607

由于您使用 AutoLayout，因此您需要调整高度约束。

请参阅这篇文章[动态更改 UITableView 高度](https://stackoverflow.com/questions/14223931/change-uitableview-height-dynamically)

# css - 使用 Masonry 将一组图像居中

> ID：13907080
> 
> 赞同：4
> 
> 时间：2012-12-17T01:00:51.463
> 
> 标签：css, layout, jquery-masonry, centering

我在一组图像上使用 Masonry.js 并试图使整个组居中。当我指定容器网格的宽度并设置时，我已经让组居中`margin:0 auto`，但我希望使用更流畅的网格或百分比来居中。（我意识到我可以使用媒体查询来更改固定宽度，但要寻找更无缝的选项。）

[这是一个具有固定宽度的代码示例](http://bit.ly/RyxVix)，它可以很好地居中。

这[是一个](http://bit.ly/VKBnBP)更流畅的例子，我试图集中但`margin:0 auto`没有工作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-17T01:36:36.340

`isFitWidth`您可以使用参数居中砌体布局：http: [//masonry.desandro.com/demos/centered.html](http://masonry.desandro.com/demos/centered.html)

```
$('.container').masonry({ isFitWidth: true }); 
```

此参数将`width`在容器上设置值，这将允许您使用 CSS 将容器居中：

```
.container {
  margin: 0 auto;
} 
```

# r - tune() function e1071 / libsvm -error with rpart

> ID：13907087
> 
> 赞同：1
> 
> 时间：2012-12-17T01:02:20.013
> 
> 标签：r, rpart

我正在尝试调整`rpart`。我已经将我的数据拆分为训练集和简历集。`tune.rpart`便利功能似乎没有办法指定 cv 集。所以我正在使用常规`tune()`功能。

我的数据集中有 595 个潜在变量，所以我不想使用公式来指定。执行此操作时出现以下错误

```
Error in tune(rpart, train.x = trainset[, -1], train.y = trainset[, 1],  : 
Dependent variable has wrong type!
In addition: Warning message:
In if (y) ans$y <- Y :
the condition has length > 1 and only the first element will be used 
```

代码：

```
load('train.dat')
load('cv.dat')
trainset$class<-factor(trainset$class)
cvset$class<-factor(cvset$class)

rpart.tune<-tune(rpart,train.x= trainset[,-1], train.y=trainset[,1],
           validation.x=cvset[,-1], validation.y=cvset[,1],
             ranges = list(
               cp = c(0.002,0.005,0.01,0.015,0.02,0.03)),
           tunecontrol = tune.control(sampling = "fix")) 
```

数据位于： [https ://docs.google.com/folder/d/0B2_rKFnvrjMAM3FGbnFvZm5laUk/edit](https://docs.google.com/folder/d/0B2_rKFnvrjMAM3FGbnFvZm5laUk/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:55:21.423

您必须检查您正在使用的分类器的预测输出。`tune()`期望（用于分类）收到以下之一：

```
(is.logical(true.y) || is.factor(true.y)) && (is.logical(pred) || is.factor(pred) || is.character(pred)) 
```

例如，预测`rpart`会产生一个矩阵作为输出。您可以尝试`svm`处理该权利或尝试仅提供两个类。

# java - 静态方法什么都不返回？（试图返回一个tostring）

> ID：13907090
> 
> 赞同：3
> 
> 时间：2012-12-17T01:02:31.557
> 
> 标签：java

我试图在这个静态方法中返回一个对象：

```
public static Account Consolidate(Account acct1, Account acct2){
        String name1 = acct1.getName();
        String name2 = acct2.getName();
        double acctNum1 = acct1.getAcctNumber();
        double acctNum2 = acct2.getAcctNumber();
        double balance1 = acct1.getBalance();
        double balance2 = acct2.getBalance();
        double balance3;
        Account acct3 = new Account(name1);

        if ((name1.equalsIgnoreCase(name2)) &&  (acctNum1 != acctNum2)){
            balance3 = balance1 + balance2;
            acct1.close();
            acct2.close();              
            System.out.println("Consolidation successful!");        
            return (acct3);                     
        }
        else 
             System.out.println("These accounts cannot be consolidated.");          
             return null;
        } 
```

但它什么也没返回，我不知道如何解决它。如中，

这是驱动程序：

```
 import java.util.Scanner;

public class Consolidates{
    public static void main(String[] args){
    String name1;
    String name2;
    String name3;

    Scanner scan = new Scanner(System.in);

    System.out.println("Enter the name of the first account holder");
    name1 = scan.next();
    System.out.println("Enter the name of the second account holder");
    name2 = scan.next();
    System.out.println("Enter the name of the third account holder");
    name3 = scan.next();
    System.out.println();
    Account acct1 = new Account(100, name1, 333333);
    Account acct2 = new Account(100, name2, 555555);
    Account acct3 = new Account(100, name3, 777777);
    System.out.println(acct1);
    System.out.println(acct2);
    System.out.println(acct3);
    System.out.println();
    System.out.println("Closing account 1...");
    System.out.println();
    acct1.close();  
    System.out.println();
    System.out.println("Attempting to consolidate accounts 2 and 3...");
    Account.Consolidate(acct2, acct3);
    System.out.println();
    System.out.println("Printing original 3 accounts");
    System.out.println(acct1);
    System.out.println(acct2);
    System.out.println(acct3);
    }
} 
```

最后，这是输出：

```
Enter the name of the first account holder
rick
Enter the name of the second account holder
james
Enter the name of the third account holder
james

Name: rick
Account Number: 333333
Balance: 100.0
Name: james
Account Number: 555555
Balance: 100.0
Name: james
Account Number: 777777
Balance: 100.0

Closing account 1...

Attempting to consolidate accounts 2 and 3...
Consolidation successful!

Printing original 3 accounts
Name: CLOSED
Account Number: 333333
Balance: 0.0
Name: CLOSED
Account Number: 555555
Balance: 0.0
Name: CLOSED
Account Number: 777777
Balance: 0.0 
```

如您所见，它*确实*打印了合并成功消息，表明它正确地通过了循环，它只是没有返回帐户摘要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T01:04:52.087

您实际上从未对返回值做任何事情：

```
Account.Consolidate(acct2, acct3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:11:40.793

除了其他答案确定的问题外：

*   您没有在创建的新帐户中设置余额`consolidate`。

*   使用 a`double`作为帐号有点奇怪。

*   将 a`double`用于帐户余额是不正确的。一个帐户应始终持有准确数量的美分或便士或其他任何东西。（去检查*你的*银行对账单......或询问会计学生。）这需要你使用整数类型......因为涉及浮点类型的算术很容易受到舍入错误的影响。

*   方法名称应以小写字母开头；例如`Consolidate`->`consolidate`

# r - RH2：使用 R 无法连接到我的 H2 数据库

> ID：13907092
> 
> 赞同：0
> 
> 时间：2012-12-17T01:02:33.973
> 
> 标签：r, h2

我在 CRAN 上阅读了 RH2 的文档，但是当我尝试连接到我的 H2 数据库时，我收到了这个错误：

```
> library(RH2)
Loading required package: chron
Loading required package: RJDBC
Loading required package: DBI
Loading required package: rJava
> con <- dbConnect(H2(), "jdbc:h2:mem:test")
Error in .local(drv, ...) : could not find function ".verify.JDBC.result" 
```

我哪里错了？

# actionscript-3 - AS3：单击并在鼠标单击时停止

> ID：13907099
> 
> 赞同：0
> 
> 时间：2012-12-17T01:04:17.377
> 
> 标签：actionscript-3

我想创建一个跟随并在鼠标单击时停止的对象。我设法通过旋转来实现它，但问题是每当我点击空舞台时，对象就会向它移动并继续移动。它不会停在鼠标位置。任何人都知道我该怎么做。下面是我的代码：

```
package 
{
    import flash.display.MovieClip;
    import flash.events.Event;
    import flash.events.MouseEvent;

    public class Guest extends MovieClip
    {
        var walkSpeed:Number = 5;

        public function Guest()
        {
            stage.addEventListener(MouseEvent.CLICK, walk);
        }

        function walk(event:MouseEvent):void
        {
            var dx = parent.mouseX - x;
            var dy = parent.mouseY - y;
            var angle = Math.atan2(dy,dx) / Math.PI * 180;
            rotation = angle;

            stage.addEventListener(Event.ENTER_FRAME, loop);
        }

        function loop(event:Event):void
        {
            x = x+Math.cos(rotation/180*Math.PI)*walkSpeed;
            y = y+Math.sin(rotation/180*Math.PI)*walkSpeed;
            stage.removeEventListener(Event.ENTER_FRAME, loop);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:02:00.410

您的代码有点奇怪，在这里您永远不会移动超过一帧的位置，因为您在循环完成后立即删除事件侦听器。

这是一些修复移动然后停止问题的代码。但是，我强烈建议您使用某种“补间库”来执行此操作，然后我将展示一个使用[Caurina Transitions](http://code.google.com/p/tweener/)执行此操作的示例。

```
function walk(e:MouseEvent):void {
    targetX = parent.mouseX; //targetX created as a member variable
    targetY = parent.mouseY; //targetY created as a member variable
    var dx = parent.mouseX - x;
    var dy = parent.mouseY - y;
    var angle = Math.atan2(dy,dx) / Math.PI * 180;
    rotation = angle;

    stage.addEventListener(Event.ENTER_FRAME, loop);
}

function loop(e:Event):void {
    var newX:Number = x + Math.cos(rotation / 180 * Math.PI) * walkSpeed;
    var newY:Number = y + Math.sin(rotation / 180 * Math.PI) * walkSpeed;

    var atTarget:Boolean = true;
    if (Math.abs(targetX - newX) > walkSpeed) {
        x = newX;
        atTarget = false;
    }
    if(Math.abs(targetY - y) > walkSpeed) {
        y = newY;
        atTarget = false;
    }

    if (atTarget) {
        stage.removeEventListener(Event.ENTER_FRAME, loop);
    }
} 
```

这是与 caurina 相同的行为。

```
package
{
    import caurina.transitions.Tweener;
    import flash.display.MovieClip;
    import flash.events.MouseEvent;

    public class TransitionExample extends MovieClip
    {
        private var targetX:Number;
        private var targetY:Number;
        var walkSpeed:Number = 5;

        public function TransitionExample()
        {
            trace("ctor()");
            stage.addEventListener(MouseEvent.CLICK, walk);
        }

        private function walk(e:MouseEvent):void {
            targetX = parent.mouseX;
            targetY = parent.mouseY;

            var dx = targetX - x;
            var dy = targetY - y;
            var angle = Math.atan2(dy,dx) / Math.PI * 180;
            rotation = angle;

            var tweenDone:Function = function():void {
                trace("tween is finished");
            }
            //modify time to be dependant on the "walkspeed" and the distance travelled etc...
            Tweener.addTween(this, { x:targetX, y:targetY, time:0.458, transition:"linear", onComplete:tweenDone});
        }
    }
} 
```

# google-maps-api-3 - 单击循环中的侦听器 - 数组和闭包

> ID：13907103
> 
> 赞同：0
> 
> 时间：2012-12-17T01:05:09.063
> 
> 标签：google-maps-api-3, closures, clicklistener

我意识到我正在如履薄冰地打开另一个关闭问题，但我已经搜索并找不到我的问题的答案。我有一个 Google Maps API v3 页面，它从一个代码块生成两张地图 - 一张以用户当前位置为中心的小地图和一张更大的地图，显示整个区域，用户的位置标记在哪里，中心与否。地图顶部是一个由 14 个矩形组成的矩形层。为了生成这两个地图，我必须将矩形放在二维数组中，矩形 [1] 用于“地图”，矩形 [2] 用于“地图2”：

```
var rectangles = [0,1,2,3,4,5,6,7,8,9,10,11,12,13];

rectangles[1][0]=new google.maps.Rectangle({
bounds:new google.maps.LatLngBounds(new google.maps.LatLng(a, b), new google.maps.LatLng(x, y)),
map:map,
fillColor:'red',
fillOpacity: 0.3,
strokeOpacity: 0,
url: 'http://example.com',
clickable: true
});

rectangles[2][0]=new google.maps.Rectangle({
bounds:new google.maps.LatLngBounds(new google.maps.LatLng(a, b), new google.maps.LatLng(x, y)),
map:map2,
fillColor:'red',
fillOpacity: 0.3,
strokeOpacity: 0,
url: 'http://example.com',
clickable: true
}); 
```

...等等。一切正常，显示两张地图并且地理位置有效。现在我想为每个矩形添加一个点击监听器，但我不确定谁来引用这个数组。这就是我现在所拥有的：

```
for ( i = 0; i < rectangles[1].length; i++ ){
google.maps.event.addListener(rectangles[1][i], 'click', function() {
window.location.href = this.url;
});
}
for ( x = 0; x < rectangles[2].length; x++ ){
google.maps.event.addListener(rectangles[2][x], 'click', function() {
window.location.href = this.url;
});
} 
```

这显然行不通。我已经看到了关闭问题的各种解决方案，但我不确定在引用两个矩形数组时我是否朝着正确的方向前进 - 或者我什至需要定义两组不同的点击侦听器。如果有人能指出我正确的方向，我将非常感激 - 如果这只是越过看起来很明显的旧领域，我很抱歉。总是有一个新的学习者正在努力追赶。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:07:13.043

```
//First, set up `rectangles` as an array containing two arrays.
var rectangles = [];
rectangles[0] = [];
rectangles[1] = [];

//As `google.maps.Rectangle` doesn't accept a `url` option, 
//its url needs to be defined separately from the rectangle itself,
//but in such a way that the two are associated with each other.
//For this we can use a javascript plain object. 
rectangles[0][0] = {
    rect: new google.maps.Rectangle({
        bounds: new google.maps.LatLngBounds(new google.maps.LatLng(a, b), new google.maps.LatLng(x, y)),
        map: map,
        fillColor: 'red',
        fillOpacity: 0.3,
        strokeOpacity: 0,
        clickable: true
    }),
    url: 'http://example.com'
};
rectangles[1][0] = new google.maps.Rectangle({
    ...
});
rectangles[0][1] = new google.maps.Rectangle({
    ...
});
rectangles[1][1] = new google.maps.Rectangle({
    ...
});
rectangles[0][2] = new google.maps.Rectangle({
    ...
});
rectangles[1][2] = new google.maps.Rectangle({
    ...
});

//Now to attach the click listeners.

//First we define a function that adds a click listener.
//By doing this in its own function, a closure is formed,
//trapping the formal variable `rectObj` and making `rectObj.url` 
//accessible to the listener when it is called in response to future clicks.
function addClickListener(rectObj) {
    google.maps.event.addListener(rectObj.rect, 'click', function() {
        window.location.href = rectObj.url;
    });
}

//Now, we can loop through the `rectangles` arrays, adding listeners.
for ( i = 0; i < 2; i++ ) {
    for ( j = 0; j < 14; j++ ) {
        if(rectangles[i][j]) {//safety
            addClickListener(rectangles[i][j]);
        }
    }
} 
```

# scala - 使用 Shapeless 解决函数 args 以驱动列表处理的问题

> ID：13907108
> 
> 赞同：11
> 
> 时间：2012-12-17T01:05:58.307
> 
> 标签：scala, shapeless

以下要点包含我正在玩的一个想法的代码

```
package com.test1

import scala.language.implicitConversions
import shapeless._
import FromTraversable._
import Traversables._
import Nat._
import Tuples._

trait ToArity[P, N <: Nat]

object ToArity {
  implicit def prod1[P <: Product1[_]] = new ToArity[P, _1] {}
  implicit def prod2[P <: Product2[_, _]] = new ToArity[P, _2] {}
  // ad nauseum...
}

trait SizedHListAux[A, N <: Nat, T <: HList]

object SizedHListAux {
  implicit def base[A, H <: HList] = new SizedHListAux[A, _0, HNil] {}
  implicit def induct[A, H <: HList, N <: Nat, P <: Nat](implicit r: PredAux[N,P], k: SizedHListAux[A, P, H]) = new SizedHListAux[A, N, A :: H] {}
}

trait SomeFun {
  type Result
  def apply(): Result
}

// I want to abstract over A, the contained type in the List
// over P the Product type which is the arg notably its arity
// This means we need to recover arity of the Product type and render it in value space
// and also means that we need to compute the type of the intermediate HList
object SomeFun {
  def produce(m: SomeFun): m.Result = m()

  implicit def fromF1[T, A, P <: Product, N <: Nat, H <: HList](f1: (P => T, List[A]))(implicit k: ToArity[P, N], toI: ToInt[N], l: SizedHListAux[A, N, H], toHL: FromTraversable[H], tp: TuplerAux[H, P]) =
    new SomeFun {
      type Result = (T, List[A])
      def apply(): Result = {
        val (f, as) = f1
        val (ts, rest) = (as.take(toI()), as.drop(toI()))
        f((toHL(ts).get).tupled) -> rest
      }
    }
  // Debug Arity checker
  def printArity[P <: Product, N <: Nat](p: P)(implicit k: ToArity[P, N], toI: ToInt[N]) = println("Arity: " + toI())
}

object Test {
  val thedata = List("foo", "bar", "baz", "bob")
  val tfn = (x: (String, String)) => println("%s and %s".format(x._1, x._2))
  def foo = SomeFun.printArity("a" -> "b")
  //def doit = SomeFun.produce((tfn, thedata)) // Adding this line does not compile
} 
```

这个想法是您使用函数的参数 arity，在本例中是 Product 类型的 arity，来驱动关联 List[A] 的解析。有点像使用胶带从石墨上剥离石墨烯层，即功能的类型将事物从列表中拉出。这只是一个使用单一包含类型的草图，但我想它可以被概括。重要的方面是函数本身不知道 List 处理。

然而......当试图解决 ToArity[P,N] 隐式时，这个概念似乎失败了。如 printArity() 所示，ToArity 本身是可解析的。

有人可以解释为什么这在 fromF1 的上下文中无法解决吗？是不是它不能解决所有依赖的隐式，然后用第一个来注册错误，即找不到满足 ToArity、ToInt 和 SizedHListAux 的 N？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T04:06:38.567

更新：我刚刚看到您的编辑，这意味着您已经解决了这里前几段中提到的问题，但我希望其余的内容有用。

问题是您的`SizedHListAux`实例没有被推断：

```
scala> implicitly[SizedHListAux[String, _1, String :: HNil]]
<console>:25: error: could not find implicit value for parameter e... 
```

幸运的是，这是一个简单的解决方法：

```
object SizedHListAux {
  implicit def base[A] = new SizedHListAux[A, _0, HNil] {}
  implicit def induct[A, H <: HList, N <: Nat, P <: Nat](implicit
    r: PredAux[N, P],
    k: SizedHListAux[A, P, H]
  ) = new SizedHListAux[A, N, A :: H] {}
} 
```

我刚刚删除了`R <: PredAux[N, P]`类型参数并`r`正确键入。我还删除了`H`on 上未使用的类型参数`base`，即使它没有引起问题——它只是没有做任何事情。

这几乎就是全部了——现在所有的实例都`fromF1`被推断出来了：

```
scala> SomeFun.fromF1((tfn, thedata))
res0: SomeFun{type Result = (Unit, List[String])} = SomeFun$$anon$1@7eacbeb 
```

但是，您仍然无法从 to 的类型中获得`(tfn, thedata)`视图`SomeFun`。考虑以下简化示例：

```
scala> trait Foo
defined trait Foo

scala> trait Bar[A, B]
defined trait Bar

scala> implicit def toInt[F <: Foo, X](f: F)(implicit ev: Bar[F, X]) = 42
toInt: [F <: Foo, X](f: F)(implicit ev: Bar[F,X])Int

scala> implicit object fooBar extends Bar[Foo, String]
defined module fooBar

scala> toInt(new Foo {})
res0: Int = 42

scala> implicitly[Foo => Int]
<console>:12: error: No implicit view available from Foo => Int.
              implicitly[Foo => Int] 
```

因此，即使我们在作用域中有一个隐式方法可以将 a`Foo`转换为 an `Int`，`X`但当编译器尝试从 to 查找视图时，这会导致编译器出现`Foo`问题`Int`。

在您的情况下，我会通过跳过`SomeFun`业务并拥有一个采用 a`(P => T, List[A])`并返回 a的方法来避免此限制`(T, List[A])`。

我还将观察到这两者`ToArity`，并且似乎没有必要，因为您可以使用、和`SizedHListAux`收集相同的证据。例如：`TuplerAux``LengthAux``LUBConstraint`

```
import shapeless._

trait SomeFun {
  type Result
  def apply(): Result
}

implicit def fromF1[T, A, P <: Product, N <: Nat, H <: HList](
  f1: (P => T, List[A])
)(implicit
  tp: TuplerAux[H, P],
  hl: LengthAux[H, N],
  toHL: FromTraversable[H],
  allA: LUBConstraint[H, A],
  toI: ToInt[N]
) = new SomeFun {
  type Result = (T, List[A])
  def apply(): Result = {
    val (f, as) = f1
    val (ts, rest) = (as.take(toI()), as.drop(toI()))
    f((toHL(ts).get).tupled) -> rest
  }
} 
```

进而：

```
val tfn = (x: (String, String)) => println("%s and %s".format(x._1, x._2))
val thedata = List("foo", "bar", "baz", "bob")
val sf = fromF1((tfn, thedata)) 
```

最后：

```
scala> sf()
foo and bar
res2: (Unit, List[String]) = ((),List(baz, bob)) 
```

不需要烦人`prodN`的样板文件。

# ruby - 很难理解这个解决方案。

> ID：13907109
> 
> 赞同：0
> 
> 时间：2012-12-17T01:06:47.797
> 
> 标签：ruby, regex

我被一个问题困住了，一个朋友给我发了一个解决方案，没有时间解释。我想回到这个问题并从中学到更多。我只是想知道是否有人可以帮助我快速了解此代码的特定方面。

```
def translate phrase
  phrase.split.map do |word|
    word =~ /^([^aeiouyq]*(qu)?)(.*)$/

    first_translation = $1
    rest_of_translation = $3

    "#{rest_of_translation}#{first_translation}ay"

   end.join(" ")
end 
```

我不太了解如何替换字母的概念。我指的是单词`=~`

与此相关，我知道`$`是指我表达的部分。然而，我不太确定我知道我是如何获得它们的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:17:52.137

对于那些不熟悉它的人，这里有更多关于[Pig Latin](http://en.wikipedia.org/wiki/Pig_Latin)的内容。

此正则表达式的工作方式是查找*非*元音字符的开头字符串，*或* `qu`. （`*`and`?`是使任何一种情况都成为可选的*量词*。）代码本质上将单词的这个组件与单词的其余部分交换，并附加`ay`. 您可能已经知道，但是每个带括号的组都是“捕获的”，按照左括号的顺序编号：因此不需要`$2`，因为它包含在`$1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:15:48.013

这是一个简单的 Pig 拉丁语翻译器。该代码分几个步骤工作：

```
a = "this is a phrase".split
=> ["this", "is", "a", "phrase"] 
b = a.map {|w| w =~ /^([^aeiouyq]*(qu)?)(.*)$/; [$1, $3] }
=> [["th", "is"], ["", "is"], ["", "a"], ["phr", "ase"]] 
c = b.map {|v1,v2| "#{v2}#{v1}ay" }
=> ["isthay", "isay", "aay", "asephray"] 
c.join(" ")
=> "isthay isay aay asephray" 
```

IRB 对于分析这样的代码片段非常有帮助。

, `$1`,`$2`等`$3`变量是特殊的全局变量，用于捕获正则表达式括号中的匹配项。它们不一定会存在很长时间，所以如果你使用它们，你应该立即将它们分配给其他东西。

# c++ - -!(condition) 是从布尔值（掩码布尔值）获取全位向量的正确方法吗？

> ID：13907111
> 
> 赞同：1
> 
> 时间：2012-12-17T01:07:00.450
> 
> 标签：c++, c, logic, bit-manipulation

在从高性能代码中删除条件分支时，将真正的布尔值转换`unsigned long i = -1`为设置所有位可能很有用。

我想出了一种方法来从 a `int b`(or `bool b`) 的输入中获取这个 integer-mask-boolean ，取值`1`or `0`：

```
unsigned long boolean_mask = -(!b); 
```

要获得相反的值：

```
unsigned long boolean_mask = -b; 
```

有人见过这种建筑吗？我在做某事吗？当 -1 的 int 值（我假设`-b`或`-(!b)`确实产生）被提升为更大的 unsigned int 类型时，是否保证设置所有位？

这是上下文：

```
uint64_t ffz_flipped = ~i&~(~i-1); // least sig bit unset
// only set our least unset bit if we are not pow2-1
i |= (ffz_flipped < i) ? ffz_flipped : 0; 
```

下次问这样的问题之前，我会检查生成的 asm。听起来编译器很可能不会在这里给 CPU 增加一个分支。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T02:32:12.637

你应该问自己的问题是：如果你写：

```
int it_was_true = b > c; 
```

那么`it_was_true`将是 1 或 0。*但是那个 1 是从哪里来的呢？*

机器的指令集不包含以下形式的指令：

```
Compare R1 with R2 and store either 1 or 0 in R3 
```

或者，事实上，类似的东西。（我在这个答案的末尾写了一个关于 SSE 的注释，说明前一个陈述并不完全正确。）机器有一个内部条件寄存器，由几个条件位和比较指令 - 以及其他一些算术运算——导致以特定方式修改这些条件位。随后，您可以根据一些条件位或条件加载，有时还有其他条件操作，执行条件分支。

所以实际上，将 1 存储在变量中的效率可能比直接执行一些条件操作要低得多。可能是，但可能不是，因为编译器（或者至少是编写编译器的人）可能比你聪明，它可能只记得它应该把 1 放进去`it_was_true`，这样当你真正绕过时要检查该值，编译器可以发出适当的分支或其他任何东西。

所以，说到聪明的编译器，你应该仔细看看以下产生的汇编代码：

```
uint64_t ffz_flipped = ~i&~(~i-1); 
```

看看那个表达式，我可以数出五个运算：三个按位否定、一个按位合取 ( `and`) 和一个减法。但是您不会在汇编输出中找到五个操作（至少，如果您使用 gcc -O3）。你会找到三个。

在我们查看汇编输出之前，让我们做一些基本的代数。这是最重要的身份：

```
-X == ~X + 1 
```

你能明白为什么这是真的吗？`-X`，在 2 的补码中，只是另一种说法，其中是单词中的位数。事实上，这就是为什么它被称为“2 的补码”。怎么样？好吧，我们可以把它看作是从 2 的相应幂中减去 X 中的每一位的结果。例如，如果我们的字中有四位，并且是（即 5，或 2 ² + 2 ⁰）， then是我们可以认为的，与 完全一样。或者，换句话说：`2^n - X``n``~X``X``0101`^(^(`~X``1010``2³×(1-**0**) + 2²×(1-**1**) + 2¹×(1-**0**) + 2⁰×(1-**1**)``1111 − **0101**`))

` −X == 2^n − X`
`  ~X == (2^n−1) − X` 意思就是
`  ~X == (−X) − 1`

请记住，我们有

```
ffz_flipped = ~i&~(~i-1); 
```

但是我们现在知道我们可以将 ~(~i−1) 变成`minus`运算：

`~(~i−1)
== −(~i−1) − 1
== −(−i - 1 - 1) − 1
== (i + 2) - 1
== i + 1`

多么酷啊！我们可以这样写：

```
ffz_flipped = ~i & (i + 1); 
```

这只有三个操作，而不是五个。

现在，我不知道你是否遵循了这一点，我花了一些时间才把它弄好，但现在让我们看看 gcc 的输出：

```
 leaq    1(%rdi), %rdx     # rdx = rdi + 1 
    movq    %rdi, %rax        # rax = rdi                                        
    notq    %rax              # rax = ~rax                             
    andq    %rax, %rdx        # rdx &= rax 
```

所以 gcc 只是自己解决了所有这些问题。

* * *

关于 SSE 的承诺说明：事实证明，SSE 可以进行并行比较，甚至可以在两个 16 字节寄存器之间一次进行 16 字节比较。条件寄存器不是为此而设计的，无论如何，没有人愿意在不需要时进行分支。因此，CPU 确实将其中一个 SSE 寄存器（一个 16 字节的向量，或 8 个“字”或 4 个“双字”，无论操作怎么说）更改为一个布尔指示符向量。但它并不`1`适用于真实；相反，它使用所有`1`s 的掩码。为什么？因为很可能程序员接下来对比较结果要做的事情就是用它来屏蔽值，我认为这正是你计划用你的`-(!B)`技巧做的事情，除了在并行流版本中。

所以，请放心，它已经被覆盖了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:16:07.380

> 有人见过这种建筑吗？我在做某事吗？

很多人都看过了。它像岩石一样古老。这并不罕见，但您应该将其封装在一个内联函数中以避免混淆您的代码。

并且，验证您的编译器实际上是在旧代码上生成分支，并且配置正确，并且这种微优化实际上提高了性能。（最好记下每个优化策略减少了多少时间。）

从好的方面来说，它完全符合标准。

> 当 -1 的 int 值（我假设 -b 或 -(!b) 确实产生）被提升为更大的 unsigned int 类型时，是否保证设置所有位？

请注意`b`尚未签名。由于无符号数始终为正数，因此强制转换的结果`-1u`并不特殊，也不会被更多的数扩展。

如果您有不同的尺寸并且想要肛门，请尝试以下操作：

```
template< typename uint >
uint mask_cast( bool f )
    { return static_cast< uint >( - ! f ); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T01:57:13.943

```
struct full_mask {
  bool b;
  full_mask(bool b_):b(b_){}
  template<
    typename int_type,
    typename=typename std::enable_if<std::is_unsigned<int_type>::value>::type
  >
  operator int_type() const {
    return -b;
  }
}; 
```

利用：

```
unsigned long long_mask = full_mask(b);
unsigned char char_mask = full_mask(b);
char char_mask2 = full_mask(b); // does not compile 
```

基本上我使用该类`full_mask`来推断我们要转换的类型，并自动生成该类型的位填充无符号值。我投入了一些 SFINAE 代码来检测我要转换的类型是无符号整数类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-16T07:24:30.277

您可以通过递减将 1 / 0 转换为 0 / -1。这会反转布尔条件，但是如果您可以首先生成布尔值的倒数，或者使用掩码的倒数，那么它只是一个操作而不是两个。

# less - 可选的 mixin 参数，将默认值设置为 LESS 中另一个参数的值？

> ID：13907113
> 
> 赞同：1
> 
> 时间：2012-12-17T01:07:10.083
> 
> 标签：less

可选参数可以在 LESS 中`@font-file`获取值吗？`@font-name`没有任何 javascript 评估...

```
.font-face(@font-name, @font-file: ???) {
    font-family: '@{font-name}';
    src: url('fonts/@{font-file}.eot');
    src: url('fonts/@{font-file}.eot?#iefix') format('embedded-opentype'),
         url('fonts/@{font-file}.svg#@{font-file}') format('svg'),
         url('fonts/@{font-file}.woff') format('woff'),
         url('fonts/@{font-file}.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

抱歉，如果这是一个很无聊的问题，我现在已经用 LESS 花了大约 2 个小时 :)

**编辑**：不复制mixin：

```
.font-face(@font-file) {
    .font-face(@font-file, @font-file)
}

.font-face(@font-name, @font-file) {
  font-family: '@{font-name}';
  src: url('fonts/@{font-file}.eot');
  src: url('fonts/@{font-file}.eot?#iefix') format('embedded-opentype'),
  url('fonts/@{font-file}.svg#@{font-file}') format('svg'),
  url('fonts/@{font-file}.woff') format('woff'),
  url('fonts/@{font-file}.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:59:28.583

据我所知，答案是“不”。LESS 仅使用模式匹配和保护表达式来执行此类评估，因此无法执行另一种可能用于设置`font-file`名称的“if”条件。

根据LESS，您的“重复”混合并不是真正的“重复”，因为一个匹配只传递*一个*变量的模式，而另一个匹配传递*两个*变量的模式。因此，您的解决方案是实现您想要的正确（并且可能是最优雅）的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T17:22:10.633

您实际上可以在声明中提供默认值：

```
.border-radius(@radius: 5px) {
  -webkit-border-radius: @radius;
     -moz-border-radius: @radius;
          border-radius: @radius;
} 
```

然后在有或没有额外参数的情况下使用它：

```
#header {
  .border-radius;
} 
```

见： http: [//lesscss.org/features/#mixins-parametric-feature](http://lesscss.org/features/#mixins-parametric-feature)

# android - Android：代码中的 TableLayout 等于列

> ID：13907114
> 
> 赞同：2
> 
> 时间：2012-12-17T01:07:13.437
> 
> 标签：android, tablelayout, tablerow

我正在尝试在代码中创建一个 TableLayout。表中的每一行都应该有等间距的列。每个单元格的内容都是一样的，只是一个方形按钮（我正在尝试创建一个日历）。

如何让每列占据相等的宽度，然后占据整个表格的宽度？现在，列的宽度都相同，因为它们都具有相同的内容，但列并没有扩展以填充表格的整个宽度。

以下是我尝试过的。我正在扩展 TableLayout 类，这就是我在代码中使用“this”的原因。注释掉的行是我尝试过的没有效果的东西：

```
this.setStretchAllColumns(true);

TableRow row;
CalendarButton button;
for(int i = 0; i < 6; ++i)
{
    row = createRow();
    TableRow.LayoutParams params = new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
    //params.span = 7;
    row.setLayoutParams(params);
    //row.setWeightSum(7);

    for(int j = 0; j < 7; ++j)
    {
        button = createCalendarButton();

        TableRow.LayoutParams params = new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        params.span = 1;
        row.addView(button, params);
    }

    this.addView(row);
} 
```

# php - 使用哈希密码重定向到不同的页面不起作用

> ID：13907116
> 
> 赞同：0
> 
> 时间：2012-12-17T01:08:27.630
> 
> 标签：php

我的 php 代码对密码进行了哈希处理。如果他们是新用户，我想将用户重定向到 edit_password.php。我用他们的用户名将他们设为默认帐户，默认密码是 admin。密码是我重定向的依据。但我对如何使用我的代码制作它感到困惑，请检查我的代码，谢谢。这是我的代码：

```
<?php 

    require("common.php"); 

    $submitted_username = ''; 

    if(!empty($_POST)) 
    { 
        $query = " 
            SELECT 
                id, 
                username, 
                password, 
                salt, 
                email 
            FROM users 
            WHERE 
                username = :username 
        "; 

        $query_params = array( 
            ':username' => $_POST['username'] 
        ); 

        try 
        { 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            die("Failed to run query: " . $ex->getMessage()); 
        } 

        $login_ok = false; 

        $row = $stmt->fetch(); 
        if($row) 
        { 
            $check_password = hash('sha256', $_POST['password'] . $row['salt']); 
            for($round = 0; $round < 65536; $round++) 
            { 
                $check_password = hash('sha256', $check_password . $row['salt']); 
            } 

        if($check_password === $row['password']) // <---- i want to insert some code here like if($check_password === $row['password'] || 'admin') to redirect new users. but i dont know how to.
            { 
                $login_ok = true; 
            } 
          if($login_ok) 
        { 
            unset($row['salt']); 
            unset($row['password']); 

            $_SESSION['user'] = $row; 

            header("Location: index.php"); 
            die("Redirecting to: index.php"); 

        } 
        else 
        { 
            echo("<font color=red>Login Failed.</font>"); 

            $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8'); 
        } 
        }
    }

?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:19:44.873

```
if($login_ok) 
        { 
            unset($row['salt']); 
            unset($row['password']); 

            $_SESSION['user'] = $row; 
        if($_POST['password'] === "admin")
            {
                header(""); 
            }
            else
                {
                    header("Location: index.php"); 
                    die("Redirecting to: index.php"); 
                }
        } 
```

一旦您验证了用户，一个简单的条件检查应该可以解决问题。

# html - :Last-Child 不使用导航栏？

> ID：13907119
> 
> 赞同：1
> 
> 时间：2012-12-17T01:08:37.067
> 
> 标签：html, css

```
<div id="header"><!--start #header-->
    <img id="logo" height="80" src="../resources/CHUG-LOGO.png" />
    <ul>
        <a href="../home" title="Home"><li id="home"><h2>Home</h2></li></a>
        <a href="../about" title="About"><li id="about"><h2>About</h2></li></a>
        <a href="../store" title="Store"><li id="store"><h2>Store</h2></li></a>
        <a href="../contact" title="Contact"><li id="contact"><h2>Contact</h2></li></a>
    </ul>                    
</div><!--end #header--> 
```

```
#header ul {
    padding: 0px;
    list-style-type: none;
    margin: 0px;
    float: right;
}
#header ul li {
    text-align: center;
    display: block;
    margin: 0px;
    float: left;
    padding-top: 45px;
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0px;
    height: 65px;
    border-left: 1px solid #755b2c;
    border-right: 1px solid #b99e68;
}
#header ul li h2 {
    min-width: 105px;
    margin: 0px;
    padding: 0px;
    display: inline-block;
    color: #000;
    font-size: 20px;
    font-weight: bold;
} 
```

这是我的导航栏的代码，我正在尝试删除最后一个列表项的右边框。我知道我需要使用伪标识符：last-child，但我似乎无法让它工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:10:57.123

`li`s 在技术上不是元素的子元素`ul`，因为它们被`a`元素包裹。将 移动`a`到内部`li`并再次使用相同的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:23:24.530

```
#header ul a:last-child li {
  border-right: none
} 
```

但不要忘记最后一个：child 在 IE6、IE7 和 IE8 中不起作用：http: [//quirksmode.org/css/contents.html](http://quirksmode.org/css/contents.html)

# string - 如何在数组上使用字符串标记器？

> ID：13907123
> 
> 赞同：0
> 
> 时间：2012-12-17T01:09:01.703
> 
> 标签：string, tokenize

我看到你不能在数组上使用字符串标记器，因为你不能转换`String()`为`String[]`. 一段时间后，我意识到如果 inputFromFile 方法逐行读取它，我可以逐行标记它。我只是不知道该怎么做才能返回它的标记化版本。

我假设`line=in.ReadLine();`我应该把`StringTokenizer token = new StringTokenizer(line,",")`..放在行中，但它似乎不起作用。

有什么帮助吗？（我必须标记逗号）。

```
public class Project1 {

    private static int inputFromFile(String filename, String[] wordArray) {
        TextFileInput in = new TextFileInput(filename);
        int lengthFilled = 0;
        String line = in.readLine();
        while (lengthFilled < wordArray.length && line != null) {
            wordArray[lengthFilled++] = line;
            line = in.readLine();
        }// while
        if (line != null) {
            System.out.println("File contains too many Strings.");
            System.out.println("This program can process only "
                    + wordArray.length + " Strings.");
            System.exit(1);
        } // if
        in.close();
        return lengthFilled;
    } // method inputFromFile

    public static void main(String[] args) {
        String[] numArray = new String[100];
        inputFromFile("input1.txt", numArray);
        for (int i = 0; i < numArray.length; i++) {
            if (numArray[i] == null) {
                break;
            }
            System.out.println(numArray[i]);
        }// for

        for (int i=0;i<numArray.length;i++)
        {
            Integer.parseInt(numArray[i]);
        }

    }// main
}// project1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:46:45.393

这就是我的意思：

```
while (lengthFilled < wordArray.length && line != null) {
            String[] tokens = line.split(",");
            if(tokens == null || tokens.length == 0) {
                 //line without required token, add whole line as it is
                 wordArray[lengthFilled++] = line;
            } else {
                 //add each token into wordArray
                 for(int i=0; i<tokens.length;i++) {
                     wordArray[lengthFilled++] = tokens[i];
                 }
            }

            line = in.readLine();
}// while 
```

也可以有其他方法。例如，您可以使用 StringBuilder 将所有内容读取为一个大字符串，然后将其拆分为所需的标记等。上述逻辑只是为您指明正确的方向。

# plc - PLC 的信号处理或算法编程

> ID：13907129
> 
> 赞同：1
> 
> 时间：2012-12-17T01:10:06.367
> 
> 标签：plc

我有一个应用程序，它将电压和温度作为模拟输入，并使用涉及信号处理的算法进行一些处理，例如低通滤波、指数平滑和其他通常可以用高级编程语言完成的步骤，例如C 或 C++。

我很好奇如何使用 PLC，尤其是 Allen-Bradley Control-Logix 系统来执行这些相同的步骤？在我看来，带有梯形逻辑的指令集对此太有限了。我可以使用结构化文本执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T05:00:10.787

梯形逻辑可以很好地完成计算，尽管它不是世界上最好的编程语言。它具有完整的条件、算术、数组等。

您真正的问题是使您的计算适合大多数梯形逻辑引擎（和 Control Logix）运行的循环执行模型：在控件中从上到下重复执行程序，每个梯级或计算每次扫描仅执行一次。

如果您需要在生成结果之前重复循环一组值，您可能难以解决梯形图引擎每次扫描“只执行一次”所有内容的愿望，并且您需要执行循环以生成结果。事实上，我相信有 FOR 循环运算符可以像传统循环一样重复一段梯形代码；您需要确保在循环/算法中花费的时间不会对扫描速率产生重大影响。

对您来说，让扫描率作为您的循环之一可能会奏效；通常，您通过将新值接受到数组中然后在该数组上计算结果来计算过滤器。由于无论如何您基本上不能接受比每个扫描周期更快的值，因此您可以在每个扫描周期计算最多一个过滤器结果而不会丢失任何精度。如果您的数组大小适中（例如，10 个值），您实际上可以简单地将数组上的多项式编码为一个方程以产生您的过滤器结果，然后将该多项式（klunkily 但直接）编码为梯形逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T23:21:37.413

Control Logix PLC 不必执行循环扫描。我现在没有 RSLogix 5000，但是在定义项目时，您需要创建一个循环扫描执行的程序。但是您可以创建其他没有的程序。您还可以通过触发器（对常规输入扫描无用）或固定计时器（对输入扫描非常有用）运行它们。请记住，将输入扫描计时器设置得比仪器更新更快是没有意义的——现代 PLC 经常执行扫描的速度比仪表更新数据的速度要快得多。

我为此使用的一项好技术是创建一个名为 one-second 或类似名称的程序。该程序将扫描您的所有输入，并执行所有信号处理，然后写入缓冲内存位置。程序的其余部分查看那些缓冲的内存位置，从不直接监视输入。您可以将输入缓冲程序设置为尽可能快地执行您的过程，直到 PLC 在出现故障之前可以处理的任何内容。

将信号处理函数本身编写为附加指令也是一个好主意，然后使用您需要的任何参数调用它们。

因此，您可以拥有一个具有如下调用接口的 AOI：

```
input-1_buffered := input_smooth (low_pass, input-1); 
```

这将调用您的 input_smooth 函数，使用 input-1 作为值，使用 input-1_buffered 作为最终位置。low_pass 将在 input_smooth 函数中用于跳转到适当的逻辑。

然后，您可以在结构化文本中编写实际的平滑逻辑，而无需任何人理解，因为它只会存在于那个 AOI 中。

# c++ - OpenCV Formatter 类和 Mat 对象的 cout 产生链接器错误：体系结构 x86_64 的未定义符号：libopencv_core.2.4.3.dylib

> ID：13907130
> 
> 赞同：0
> 
> 时间：2012-12-17T01:10:24.283
> 
> 标签：c++, opencv, xcode4.5

我刚刚开始使用 OpenCV，并且在收到链接错误时正在浏览一些基本的示例程序。一切都应该是核心库 libopencv_core.2.4.3.dylib 的一部分，它是适当链接的（Mat 对象没有问题，只是操作.hpp 中的格式化程序类）。

另外，如果行： cout << format(M,"C") << endl; 被排除在外，那么代码编译得很好，但有一个奇怪的行为。一旦 M Mat 对象被发送到 cout，对象中包含的值就不会打印出来，随后对 cout 的调用也不会产生任何结果，即使代码运行完成。

其他人遇到过这个问题吗？

来自 macports、xcode 4.5.2、os x Lion 10.7.5 的 openCV 2.4.3

代码：（实际上是来自 openCV 示例代码的 cout_mat.cpp 片段）

```
 #include "/usr/local/include/opencv2/opencv.hpp"
    #include "/usr/local/include/opencv2/core/operations.hpp"
    #include <iostream>

    using namespace cv;
    using namespace std;

int main(int,char**)
{

    Mat M = Mat::eye(4, 4, CV_64F);
    M.at<double>(0,0) = CV_PI;

    // print out val at 0,0
    cout << "M(0,0) = " << M.at<double>(0,0) << endl;

    // test serial out capabilities of cv::Mat (yields no output beyond M=)
    cout << "M = " << endl << M << endl;
    // try to print M(0,0) to screen again to demonstrate that cout no longer prints to screen
    cout << "M(0,0) = " << M.at<double>(0,0) << endl;
    // Try to format the output with 'c-style',  Note: if included in program this line yields linker error
    cout << format(M,"C") << endl;

    return 0;
} 
```

调试器中的输出：带有行“cout << format(M,"C") << endl;" 注释掉

```
M(0,0) = 3.14159
M = 
```

M= 为空以及额外的 cout：M(0,0) = 3.14159

"cout << format(M,"C") << endl;" 行出错 包括：

```
Undefined symbols for architecture x86_64:
  "cv::Formatted::Formatted(cv::Mat const&, cv::Formatter const*, std::__1::vector<int, std::__1::allocator<int> > const&)", referenced from:
      __ZN2cvL6formatERKNS_3MatEPKcRKNSt3__16vectorIiNS5_9allocatorIiEEEE in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:31:18.173

tomriddle_1234 的建议解决了我的两个问题。

在 Project -> Build Settings -> Build Options -> Compiler for c++/objective-c/c 下：选择 LLVM gcc 4.2 代替 Apple LLVM 4.1。

现在，cout 可以正确显示所有条目，并且 format 函数也可以正常工作，而不会出现链接器错误。

# javascript - 如何使用jQuery定位变量中的类

> ID：13907133
> 
> 赞同：0
> 
> 时间：2012-12-17T01:11:19.747
> 
> 标签：javascript, jquery, variables, targeting

不确定我是否正确地表达了这个问题，但我试图在另一个类中定位一个类，但我已将父类声明为变量。

```
<div class="parent">
  <p class="child">hello world</p>
</div>

var a = $('.parent');
var b = $('.parent .child'); 
```

有没有更好的方法/约定来声明变量'b'？还是针对变量“a”中的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T01:13:09.713

如果要定位内部元素，`a`可以使用：

```
var b = a.find('.child'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T01:14:21.977

由于 'a' 现在是一个 jquery 对象，您可以使用 'children' 方法来查找匹配节点：

var b = a.children('p.child'); 或 var b = a.children('p');

# header - WP 响应式主题的标题在滚动时不会正确保持在顶部；position:fixed 和 width:any% 让它失控

> ID：13907137
> 
> 赞同：0
> 
> 时间：2012-12-17T01:12:06.587
> 
> 标签：header, responsive-design, css-position, always-on-top

我正在研究的 WP 响应式主题：

[http://www.wpexplorer.me/俄罗斯方块/](http://www.wpexplorer.me/tetris/)

在弄乱实际文件之前，我使用 Firebug for Firefox 浏览器插件来进行更改。因此，如果您有它或类似的东西，您将通过添加 position:fixed; 来看到它。到#header 部分，标题宽度缩小了其原始大小的一半以上，并且导航菜单在新的缩小空间内被顶起。

我在 #header 部分添加了其他代码片段，例如 width:100%;, width:959px; 和其他百分比和像素，这会弄乱布局；尤其是当您将窗口大小调整到您认为适用于平板电脑和移动设备的大小时 - 一切都失控了。我无法让这个主题的粘性标题起作用或做对。哦，我还添加了 z-index:200; 到#header部分和margin：160px 0；到#main-content；这些不给我问题。

添加宽度：; #main-content 的代码似乎也无济于事（我在网上某处读到这是宽度代码所在的位置）。

无论如何，有谁知道我需要什么代码才能使这个主题的标题向上滚动，直到它到达页面顶部，它在任何时候都变得粘/静态/固定/在顶部（无论它的真正术语是什么） ? 而且，当窗口的大小一直调整到移动设备的大小时，你能否让它与布局保持一致？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:37:09.217

这应该工作

```
#header-wrap{position:fixed;top:0;z-index:999;}
#pre-header{margin:20px 0 15px;width:960px;}
#main-content{margin:215px 0 30px;} 
```

该位置使用 0 和 z-index:999 固定在顶部，然后您需要将内部容器前标头的宽度设置为 960px 以匹配其余部分。

您需要为已设置的其他尺寸设置媒体查询。轻松，享受。

如果您希望菜单本身而不是社交图标成为没有社交图标的顶部固定栏，那么您需要进行 jquery 滚动 CSS 更改，以便 #header 成为固定位置。

它使用固定的标题和社交：

![WP响应主题](../Images/8405aff1aa7aad766246a9edbd1771ed.png)

使用 Jquery Scroll CSS 更改在没有社交栏的情况下工作的图示：

![俄罗斯方块 WP 响应式主题](../Images/98b6edbdead272366368ed0dcd9e7087.png)

这就是我要做的方式，我会将菜单向下移动，并将社交图标添加到菜单本身。（下面是我的意思的截图，社交图标减少到75%）

![固定菜单社交栏 WP 响应主题](../Images/5897340bde876e7098467f6bb56a8364.png)

PS。社交图标非常突出，所以我会添加一个 CSS3 灰度，当访问者将鼠标悬停在它们上方时，它会打开带有过渡效果的颜色。希望这可以帮助 ;）

# html - 设置绝对定位链接的高度，其中显示：块

> ID：13907138
> 
> 赞同：0
> 
> 时间：2012-12-17T01:12:33.053
> 
> 标签：html, css

希望关于 CSS 问题的一些建议 - 我有一个布局，我绝对将链接文本定位在背景图像之上，但无法让链接扩展到容器的高度（在 IEx 中，在 Chrome 中工作正常）

```
<div>
    <img />
    <a />            
</div> 
```

包含的 div 具有背景颜色，并且图像的不透明度降低 - 悬停图像时，不透明度进一步降低，泄漏更多的背景颜色。同时，链接的不透明度从 0 变为 100。我也使用了一些 CSS 过渡，只是为了美化它。

我知道定位链接绝对会将其从流程中删除，因此将高度设置为 100% 将不起作用，但我不应该能够明确设置它吗？这样做适用于 Chrome，但不适用于 IE。问题与图像有关，因为如果删除链接，链接会正常运行。

示例：http://jsfiddle.net/thSCJ/8/（包括足够的细节来突出我的问题。在 IE 中，悬停在图像的左上角会显示链接。在 Chrome 中，任何悬停在图像上都会显示链接） .

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:26:28.620

您需要让`<a>`标签包裹图像和文本：

```
<a href="#">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR6kpJ562NTt7Vkya4ocQ3Aq7mVqNB04ccB9XNCr-b4mPdYU6Y5Yg" width=200 height=200/>
    <span>Link text</span>
</a>​ 
```

这是CSS：

```
a {
    width:200px;
    height:200px;
    background:#cccccc;
}

a:hover > span {
    display: inline;
}

span {
    display: none;
    position:absolute;
    top:0;
    left:0;
    width:200px;
    height:200px;
    color:red;      
} 
```

​</p>

小提琴：http: [//jsfiddle.net/thSCJ/12/](http://jsfiddle.net/thSCJ/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:47:07.590

无需更改不透明度，只需更改`font-size`属性并将整个内容放入`<a>`标签中即可。

[请参阅此 JSFiddle。](http://jsfiddle.net/thSCJ/11/)

# jquery - 如果输入为空，请使用 jQuery 检查

> ID：13907148
> 
> 赞同：0
> 
> 时间：2012-12-17T01:13:14.690
> 
> 标签：jquery, forms, input

如果输入为空，如何签入 jQuery？

我试过：

```
$('#location').keydown(function(event) {
  if($("#location").val().length == 0 ) { $("#finalSearch").attr('disabled', 'true'); }
  if($("#location").val().length != 0 ) { $("#finalSearch").removeAttr('disabled'); }
}); 
```

但是，即使我的领域没有任何内容，我也希望弹出警报。

我想做的事：

*   什么都没有：错误消息。

*   有一封信：没有错误信息。

*   我删除了这封信：错误消息。

*   如果该字段是填充但另一个功能：没有错误消息。

感谢帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T01:21:48.657

您应该使用`keyup`事件而不是`keydown`- on key *down*字段尚未更新，因此`value`此时测试不会给您正确的结果。

`blur`如果用户通过“编辑”菜单或拖放或其他方式更改字段，也可以进行相同的测试。

此外，除非使用真正旧版本的 jQuery，否则使用该`.prop()`方法而不是`.attr()`设置禁用状态：

```
$('#location').on('keyup blur', function(event) {
   $("#finalSearch").prop('disabled', this.value.length === 0);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:21:01.020

你几乎已经在那里了，不确定问题出在哪里；但这有效。

```
$('#location').on('keyup', function() {
    console.log($(this).val().length);
    if($(this).val().length == 0) {
        $('#finalSearch').prop('disabled', true);
    }else{
        $('#finalSearch').prop('disabled',false);
    }
});​ 
```

**[jsFiddle](http://jsfiddle.net/aB7q3/)**

# android - 如何在 Android 中获取 MediaController 按钮的 id

> ID：13907151
> 
> 赞同：0
> 
> 时间：2012-12-17T01:13:48.840
> 
> 标签：android, button, mediacontroller

我想获取媒体控制器中按钮的 ID（播放、暂停、下一个、上一个）。按照这段代码，我能够成功地为 seekbar 做到这一点：

`final int topContainerId = getResources().getIdentifier("mediacontroller_progress", "id", "android");`

按钮呢？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:37:02.197

如果你想自定义 MediaController，这是可能的，但它是一个很长的镜头。您必须重新编写 MediaController 类，以扩展您可以自定义的 FrameLayout。
我试图这样做，但它太复杂了。
我建议您使用[MediaPlayer 类](http://developer.android.com/reference/android/media/MediaPlayer.html)，构建自己的布局。那要容易得多。

# java - 多线程服务器/每个线程上的新对象

> ID：13907152
> 
> 赞同：-1
> 
> 时间：2012-12-17T01:13:54.410
> 
> 标签：java, multithreading, object

在我的项目中，我有一个服务器来处理连接到它的多个客户端。每次连接客户端时，都会在新线程上创建一个特定于该客户端的新“吉他”。每个“吉他”是一个由 12 根吉他弦组成的数组，当在客户端窗口中按下与一根弦相对应的键时，该吉他的弦就会被拨动。

我的 Guitar 类中有一个名为 notePlayed(char key) 的方法，它“弹奏”字符串并将所有“弹奏”添加到要播放的组合音频中。但是，只要调用它，我就会遇到此错误：

```
key pressedj
Exception in thread "Thread-4" java.lang.NullPointerException
notePlayed accessed
at Guitar.notePlayed(Guitar.java:29)
at GuitarListener.run(GuitarServer.java:33)
at java.lang.Thread.run(Thread.java:680) 
```

我的吉他服务器如下所示：

```
class GuitarListener implements Runnable {
private Socket sock;
private GuitarListenerGui gui;
private Guitar guitar;

public GuitarListener(Socket s, GuitarListenerGui g, Guitar gt) {
    this.sock = s;
    this.gui = g;
    this.guitar = gt;
}

public void run() {
    boolean loop=true;
    try {
        //setting up printwriters and bufferedreaders removed
        System.out.println("key pressed" + key);
        Guitar.notePlayed(key);
        } 
```

在 GuitarServer 类中创建的新吉他和线程进一步向下

```
String keyboard ="qwertyuiop[]";
            GuitarString[] gStrings = new GuitarString[keyboard.length()];
            Guitar guitar = new Guitar(gStrings, keyboard);
            GuitarListener job = new GuitarListener(serverSocket.accept(), gui, guitar);

            // start a new thread to handle the connection
            Thread t = new Thread(job);
            t.start(); 
```

我的吉他课看起来像这样：

```
public class Guitar {

private static String keyboard;;
private static GuitarString[] gStrings; 

public Guitar (GuitarString[] gStrings, String keyboard){
    this.keyboard=keyboard;
    this.gStrings=gStrings;
} 
```

使用 for 循环在此处导致错误：

```
 public static void notePlayed (char key){
  double sample=0.0;
               for (int i=0; i<keyboard.length(); i++){//adds all of the strings to sample to be played
                   sample+=gStrings[i].sample(); 
```

很抱歉帖子的长度，但有人能指出我正确的方向或让我知道我离我有多远吗？提前致谢。我很乐意回答您可能有的任何问题。

在吉他的主要功能中，我用这个循环初始化吉他弦：

```
for(int i=0;i<keyboard.length();i++){
        double iNote = 440.0* Math.pow(2, i/12.0);//puts the correct frequency with each string
        System.out.println(iNote);
        gStrings[i] = new GuitarString(iNote);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:28:35.043

```
 GuitarString[] gStrings = new GuitarString[keyboard.length()]; 
```

将产生一个 GuitarString 对象数组，其大小为`keyboard.length()`所有已初始化的`null`值。您必须先初始化数组中的每个 GuitarString 对象，然后才能在该行的 for 循环中使用它`sample+=gStrings[i].sample();`

# javascript - javascript 表单编号

> ID：13907153
> 
> 赞同：2
> 
> 时间：2012-12-17T01:14:03.410
> 
> 标签：javascript, forms, numbers

我使用 Javascript 的第一天，我非常困惑。我将从表单返回的数字传递给函数，但结果与应有的不一致。我的测试还有很多不足之处，但希望以下内容有意义。

该函数`g`计算序列的总和。

```
 <form name="gaussform">
    <input name="min" 
           type="number"
           min="1"
           value="1">
    <input name="max" 
           type="number"
           min="2"
           value="10">
    <input name="step" 
           type="number"
           min="1"
           value="1">
    <input onclick="alert_g()"
           type="submit"
           value="calculate">
  </form>

  <script type="text/javascript">

    function g(min,max,step) {
    var actualmax = max - ((max - min) % step)
    return (min + actualmax) * ((1 + ((actualmax - min) / step)) / 2)
    }

    function alert_g() {
    var frm = document.forms["gaussform"]
    var min = frm["min"].value
    var max = frm["max"].value
    var step = frm["step"].value
    if (min == 1) {
    alert("min is 1")}
    if (max == 10) {
    alert("max is 10")}
    if (step == 1) {
    alert("step is 1")}
    alert(g(min,max,step))
    // below returns the desired result
    alert(g(1,10,1))}
  </script> 
```

if 语句只是为了让我能理解发生了什么！

因此，如果用户输入 1,10,1（默认值），结果应该是 55。

`alert(g(1,10,1))`-> 55

`alert(g(min,max,step)`-> 550

`alert(g(1,100,2))`-> 2500

`alert(g(min,max,step)`-> 4975（显然 min,max,step == 1,100,2）

该函数`g`是正确的，但我不明白传递给它的值发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:16:05.437

这个表情...

```
min + actualmax 
```

……是问题所在。

你可能想让那个...

```
+min + +actualmax 
```

...或使用`parseFloat()`，`parseInt()`或任何适合您的要求将这些字符串变成实际的`Number`.

[js小提琴](http://jsfiddle.net/EVgGn/)。

JavaScript 的`+`运算符被重载用于算术加法和字符串连接。因为用户输入*始终*是字符串，所以您正在执行字符串连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T01:20:29.667

您在函数中使用的值是字符串（表单返回的每个值都是字符串）。您需要将它们转换为数字才能获得良好的结果。这可以通过`parseFloat`函数来​​完成。

```
parseFloat('5') // return 5 
```

`parseInt`如果您想要整数（没有浮点数，例如：），也可以使用`1.3`，但请务必设置 radix 参数以始终获得一致的结果。

```
parseInt('5', 10) // return 5 
```

这可能会令人困惑，因为 Javascript 使用`+`符号来添加和连接字符串（`.`例如，在 PHP 中是符号）。因此，javascript 引擎很难知道一个值是如何被转换的。

顺便说一句，您始终可以使用`typeof`运算符来检查变量的类型。例如：

```
typeof '5' // ouput: String
typeof 5   // output: Number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T01:20:39.320

`alert(g(parseInt(min),parseInt(max),parseInt(step)))`已经解决了！

但显然这是不好的形式。看评论...

`alert(g(parseInt(min,10),parseInt(max,10),parseInt(step,10)))`也许？

# ios - UIActivityViewController 需要很长时间才能呈现

> ID：13907156
> 
> 赞同：23
> 
> 时间：2012-12-17T01:14:41.913
> 
> 标签：ios, objective-c, uipopovercontroller, uiactivityviewcontroller

我为 iPhone 制作了一个应用程序。现在，我正在为 iPad 重新创建它。

当用户选择工具栏中的操作按钮时，弹出框应显示为`UIActivityViewController`，但由于某种原因，它第一次显示大约需要 10 秒。在 iPhone 上，大约需要一秒钟。除了弹出框外，它是相同的代码。

我尝试禁用弹出框，但仍然需要大约 10 秒才能显示。

这是代码：

```
-(IBAction)Actions:(UIBarButtonItem*)sender 
{
    if ([activityPopover isPopoverVisible] == YES) 
    {
        [activityPopover dismissPopoverAnimated:YES];
        return;
    }
    UIWebView *currentWebView = ((TabView *)self.tabs[self.currentTabIndex]).webViewObject;

    NSString *currentURL = (NSString*)[currentWebView request].mainDocumentURL;
    if (currentURL == NULL) return;

    BookmarkActivity *bookmarkActivity = [[BookmarkActivity alloc] init];

    UIActivityViewController *sharing = [[UIActivityViewController alloc] initWithActivityItems:[NSArray arrayWithObject:currentURL] applicationActivities:@[bookmarkActivity]];

    activityPopover = [[UIPopoverController alloc] initWithContentViewController:sharing];
    [activityPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];    
} 
```

我已经在我的 iPad 3 和 iPad mini 上进行了测试，都需要一段时间来展示这一点。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-11-23T16:25:19.137

好问题，我刚遇到同样的问题。这并不是真正可以解决的。但是，您可以通过创建活动指示器然后将 UIActivityViewController 的初始化发送到后台来改善用户体验：

```
-(void)openIn:(id)sender
{
    // start activity indicator
    [self.activityIndicator startAnimating];

    // create new dispatch queue in background
    dispatch_queue_t queue = dispatch_queue_create("openActivityIndicatorQueue", NULL);

    // send initialization of UIActivityViewController in background
    dispatch_async(queue, ^{
        NSArray *dataToShare = @[@"MyData"];
        UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:dataToShare applicationActivities:nil];

        // when UIActivityViewController is finally initialized, 
        // hide indicator and present it on main thread
        dispatch_async(dispatch_get_main_queue(), ^{
            [self.activityIndicator stopAnimating];
            [self presentViewController:activityViewController animated:YES completion:nil];
        });
    });
} 
```

它就像一个魅力。当用户触摸按钮时，活动指示器开始动画化，从而表明该过程需要一段时间。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-20T05:29:19.263

我在 iOS 7 上遇到了同样的问题。但是，当我`UIActivityTypeAirDrop`从允许的活动类型中删除时，控制器几乎立即出现。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-15T16:40:15.027

虽然这些调用已经来自主线程，但从 iOS 7 开始，将其中一些表示调用包装在一个调度块中似乎可以大大减少延迟

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self presentViewController:activityViewController animated:YES completion:nil];
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-27T18:02:25.350

最近自己也有这个问题。有时会需要将近 4 或 5 秒才能弹出，这是一生！不过也只是第一次。随后的电话很快。

几年前也有类似的问题，键盘出现缓慢，有人生成了几行代码添加到预加载键盘的 appdelegate 以解决这个问题。

我在这里使用了类似的方法通过在启动时将它放在 AppDelegate 中来预加载 UIActivityViewController。这绝对是一个不必要的黑客，但我找不到任何其他选择。

```
let lagfreeAVC:UIActivityViewController = UIActivityViewController(activityItems:  ["start"], applicationActivities: nil)
lagfreeAVC.becomeFirstResponder()
lagfreeAVC.resignFirstResponder() 
```

# ruby-on-rails - 如何将数据从一个模型标记到 ROR 中的单独控制器？

> ID：13907159
> 
> 赞同：1
> 
> 时间：2012-12-17T01:15:14.860
> 
> 标签：ruby-on-rails, ruby, model, tags, seed

问题：我正在尝试创建一个应用程序，人们可以通过该应用程序“单击”具有不同运动偏好的标签按钮（即：“跑步”、“涉及蝙蝠”），每个按钮都被标记为某些运动。因此，如果用户选择标签“Involves Bats”，则应用程序将生成所有相关的运动项目，例如“Baseball”，其中会将“Involves Bats”作为预构建标签。

到目前为止我所做的：我添加了acts_as_taggable gem，我为“Sports”创建了一个没有控制器的模型。我在seeds.rb 中创建了带有每项运动名称的“运动”模型。我有一个用户控制器，有人可以在其中提交电子邮件，将他们带到他们的用户页面。

剩下什么我需要将所有偏好（即“跑步”）标记为所有潜在的“运动”。我很难做到这一点。我还需要在用户页面上显示可供选择的标签（“正在运行”）。我需要让用户选择标签，然后根据关联的标签生成 Sports 的推荐

我知道这是一个相当复杂的问题，但我相信这是一个相当常见/基本的应用程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T13:26:27.503

您应该查看 Railscast 第 382 集关于标记的内容：它准确显示了您的需求！ [http://railscasts.com/episodes/382-tagging](http://railscasts.com/episodes/382-tagging)

# .net - 在 PictureBox (VB NET) 上以矢量模式组合两个或多个图像

> ID：13907160
> 
> 赞同：0
> 
> 时间：2012-12-17T01:15:28.497
> 
> 标签：.net, vb.net, visual-studio-2008

在这里，我做了一个描述，以便您理解我的意思。在 vb.net 中，我们可以使用 PictureBox 来显示图像。

现在，我想将它们与 PNG 图像格式结合起来。我尝试将它们组合起来，但如果我将一些相邻的图片框放在坐标上，它看起来根本不是 PNG 格式。然而，它们如jpg格式它们相互重叠，以至于我们看不到它们。所以主要问题，我猜如何根据png格式设置图片框。

好吧，让我们看看下面的图片：

![http://i1353.photobucket.com/albums/q671/rizkay/cb_zpsa52ecf4a.png](../Images/e086aaf6439980e87223d85f5065602a.png)

# kineticjs - 未完全显示的图层上的 toImage

> ID：13907165
> 
> 赞同：0
> 
> 时间：2012-12-17T01:16:18.557
> 
> 标签：kineticjs

我正在使用 kineticJS 为我经常玩的电脑游戏（X3AP，fwiw）构建地图。

该地图是从 XML 作为一系列动态图像对象构建的。在我的第一个原型构建中，我直接将扇区的各种图像添加到 Universe 层（即左、右、上和下每个链接的黑框，扇区本身的正方形，名称的文本，a动态图像，以确定它是否包含一个音符）。所有扇区都被绘制到一个层（最终得到一个比舞台大得多的层），并且该层被绘制到舞台上。

当我在该图层上实现拖动时，拖动是滞后的。

我的第一个想法是不要将这些东西直接添加到代表宇宙地图的图层中，而是将它们全部添加到局部变量图层中，使用该图层的 toImage 并在处理函数中，将生成的图像添加到我用于地图的图层中. 图像返回空白（用 Firefox 的萤火虫检查）。

我想这可能是因为在任何时候都没有将本地图层绘制到舞台上，所以没有什么可以想象的，所以我尝试按原样绘制整个图层并在其上运行 toImage *，*但这次我得到了一个更小的图像超出了我的预期（类似于此[http://jsfiddle.net/3tUj7/5/](http://jsfiddle.net/3tUj7/5/)）。

我可以克隆地图图层并将其添加到第二个画布对象，该对象的属性设置为真实大小，以获取整个图像。这是合适的方式吗？

```
var layer;
$(
    function()
    {
        var stage = new Kinetic.Stage({
            width:100,
            height:100,
            container:'canvas'
        });
        layer = new Kinetic.Layer({
            width:200,
            height:200,
            draggable:true
        });
        stage.add(layer);

        layer.add(
            new Kinetic.Rect({
                fill:'black',
                x:0,
                y:0,
                width:200,
                height:200
            })
        );

        for(var i = 0; i < 100; i++)
        {
            var x = parseInt(Math.random()*190);
            var y = parseInt(Math.random()*190);
            layer.add(
                new Kinetic.Rect({
                    x:x,
                    y:y,
                    width:10,
                    height:10,
                    fill:'red',
                    stroke:'black',
                    strokeWidth:1
                })
            );
        }
        layer.draw();
        // only returns the image of the *shown* part of the layer
        layer.toImage({
            callback:function(img)
            {
                $('#canvasImg').attr('src', img.src);
            }
        });
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:10:52.357

我最终使用了一个组，而不是一个层，在位置 0,0 和宽度和高度 110 处添加了组。所有项目都添加到该组中，就好像它被放置在瓷砖需要的位置一样在正确的位置（所以在 0 到大约 110 之间）。

toImage 按预期在该组上工作，使我能够避免生成图层大小的图像。

# android - “workqueue_trust”这个线程是做什么的？

> ID：13907167
> 
> 赞同：1
> 
> 时间：2012-12-17T01:16:31.957
> 
> 标签：android, linux-kernel

当屏幕关闭时播放 mp3 时，我看到一个名为“workqueue_trust”的线程在后台运行。这个线程是做什么的？这个线程似乎每 100 毫秒唤醒一次......有没有办法找出这个线程的作用？我使用了 ftrace，但是，我在跟踪中没有看到太多关于这个“workqueue_trust”线程的信息......

# javascript - 使用 Javascript/JQuery 将 div 移到另一个上方？

> ID：13907168
> 
> 赞同：1
> 
> 时间：2012-12-17T01:16:44.883
> 
> 标签：javascript, jquery, google-chrome, html

我已经看到很多关于在 CSS 中执行此操作（远非理想），但我正在考虑构建一个 Chrome 扩展，它要求在另一个之前插入一个 div（为了澄清，我的意思是在测试扩展时我需要使用 Chrome 开发工具将 div 拖到另一个上方）。有没有办法在页面加载时使用 Javascript/JQuery（或其他可以通过 Chrome 扩展完成的方式）来执行此操作？

在以前的尝试中，我尝试过使用`insertAfter()`/`insertBefore()`并且`before()`没有运气（尽管我可能会遗漏一些明显的东西），所以我想另一个问题是这些是否需要在 Chrome 扩展中以某种方式使用？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T01:31:04.687

[这](http://jsfiddle.net/purmou/GmZ5V/)是一个小演示。

正在使用的`insertBefore`代码是这样的：

```
$("<div>").prop("id","between").insertBefore("#blah"); 
```

前两个 jQuery 函数只是创建`div`元素。如果要移动现有的：

```
$("#existingDiv").insertBefore("#otherDiv"); 
```

这应该是不言自明的。

对于插件，异步加载 jQuery。这样的事情应该做：

```
(function(){
    var s = document.createElement('script');
    s.src = 'http://code.jquery.com/jquery-1.8.2.min.js';
    document.getElementsByTagName('head')[0].appendChild( s );
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T01:25:16.897

jQuery 有一种非常简单的方法可以将一个节点移到另一个节点之前，您在问题中提到了该方法：

前：

`<div id="first"></div> <div id="second"></div>`

```
$("#second").insertBefore("#first"); 
```

后：

`<div id="second"></div> <div id="first"></div>`

* * *

就 Chrome 而言，您可能需要进行一些挖掘以查看在您拨打电话时是否已加载 jQuery

# .net - 为什么 Trace 方法不尊重 TraceSwitch？

> ID：13907173
> 
> 赞同：0
> 
> 时间：2012-12-17T01:17:19.097
> 
> 标签：.net, trace

你会认为 Trace.TraceInformation/Warning/Error 会尊重 TraceSwitch 中设置的级别

调查显示，可以有任意数量的 TraceSwitch 实例，因此不清楚应该由哪个实例来管理行为。有*一种*方法可以使 TraceSwitch 实例从配置中获取其级别 - 您只需在创建实例时指定一个匹配的名称。

如果我设计了一些东西，Trace 类将有一个静态属性 TraceSwitch，它将由配置中的第一个跟踪开关定义设置，并且 TraceInfo 等方法的行为如下

```
 public static void TraceInformation(string message, params object[] p)
    {
      if (TraceSwitch.TraceInfo)
        //base behaviour
    } 
```

这并不难作为包装来生产。

```
namespace System.Diagnostics
{
  public static class TraceEx
  {
    private static TraceSwitch __traceSwitch;
    public static TraceSwitch TraceSwitch
    {
      get { return __traceSwitch; }
      set { __traceSwitch = value; }
    }
    static TraceEx()
    {
      __traceSwitch = new TraceSwitch("Default", "Default trace level is Off");
    }
    public static void TraceError(string message, params object[] p)
    {
      if (TraceSwitch.TraceError)
        Trace.TraceError(message, p);
    }
    public static void TraceInformation(string message, params object[] p)
    {
      if (TraceSwitch.TraceInfo)
        Trace.TraceInformation(message, p);
    }
    public static void TraceWarning(string message, params object[] p)
    {
      if (TraceSwitch.TraceWarning)
        Trace.TraceWarning(message, p);
    }
    public static void Write(string message, params object[] p)
    {
      if (TraceSwitch.TraceVerbose)
        Trace.Write(string.Format(message, p));
    }
    public static void WriteLine(string message, params object[] p)
    {
      Write(message + "\r\n", p);
    }
  }
} 
```

将它放在同一个命名空间中意味着我所要做的就是引用该项目并将 Trace 重命名为 TraceEx。我提出的问题是：为什么微软不这样做？有没有我没见过的隐隐约约的陷阱？

* * *

好吧，这是出乎意料的（请参阅已接受的答案）。这只表明我怀疑我没有理解宏伟的设计是正确的。以上都变成了这样：

```
<userSettings>
    <TraceFilterExperiment.Properties.Settings>
        <setting name="TraceLevel" serializeAs="String">
            <value>Warning</value>
        </setting>
    </TraceFilterExperiment.Properties.Settings>
</userSettings>

var eventTypeFilter = new EventTypeFilter(Properties.Settings.Default.TraceLevel);
foreach (TraceListener L in Trace.Listeners) 
  L.Filter = eventTypeFilter; 
```

但我仍然不清楚TraceSwitch究竟会*做什么。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:17:32.143

您建议的行为已经存在，尽管形式有所不同：您修改侦听器以启用不同的错误级别。

根据您建议的行为，将不同级别发送到不同位置（例如，将详细信息发送到日志文件，但仅将严重错误发送到控制台）将需要将默认跟踪开关设置为“允许一切”，就像使用现有的行为。换句话说，如果程序员想要按预期使用跟踪开关，他将必须创建一个允许一切的虚拟跟踪开关，并以某种方式确保它是第一个定义的跟踪开关。很可能，例如，开关是在其他配置文件中定义的（即不是 application.exe.config），并且无法保证加载配置文件的顺序。

`Trace`班级本身不是执行您建议的政策的地方。`Trace`的存在是为了提供一个通用接口和一个可以发送和分发跟踪消息的集中点。确定（通过跟踪开关）发送什么信息是应用程序的工作，而侦听器的工作是确定是否输出该信息。

您建议的行为使 Trace 的一个特定应用程序变得更容易。它使所有其他应用程序变得混乱、更加困难并且可能不一致。

# php - php中的块和模板存储方法

> ID：13907174
> 
> 赞同：0
> 
> 时间：2012-12-17T01:17:24.680
> 
> 标签：php, mysql, sql, database

由于加载时间太长，我写了这个问题。我有一个 php 脚本，其中包含多个模板和一些`side`和`center`块。每个块都包含一个小的 php 代码，用于打印一些统计信息或随机新闻。

在我的控制面板中，我可以在不打开文件的情况下打开这些文件并开始编辑。现在有人想和我分享脚本，我正在寻找最好的存储方法来存储我的模板和块内容。

# 第一种方法

*   将每个块和模板文件存储在数据库中。
*   每个块都包含位置、内容和标题。
*   每个模板包含 20 个内容文件，例如`css`、`header`、`fotter`、和.`index``block``contact_us page`
*   在主页中：
    *   从中获取默认主题`database`。[20 个文件]。
    *   获取将使用`block.php`默认主题生成的所有块和每个块布局。

真正的问题是，当我尝试编辑和我的页面时，获取块的`20` `mediumtext`+`20` `text`太大了。`RELOAD`

# 第二种方法

*   就是将所有这些文件保存在服务器中，并使用打开的文件流进行读取、编辑和保存。

# 第三种方法？

* * *

***我的问题是：存储和获取此类文件的最佳方法是什么。***

# c# - C# DataGridColumnStyle.Edit() 不能被调用

> ID：13907176
> 
> 赞同：0
> 
> 时间：2012-12-17T01:17:43.837
> 
> 标签：c#, winforms

我`DataGridColumnStyle` 从 MSDN 派生了一个重写的类，它说如果我放入我正在使用的 DataGrid 样式，`Edit()`就会调用它。`DataGrid.onMouseClick()``DataGridColumnStyle`

但是当我创建自己的类时，`DataGridColumnStyle`可以正常构造，但是当我对其`Edit()`函数设置断点时（也被覆盖）。`onMouseClick()`永远不要触发这个函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:46:49.220

已解决并感谢您的帮助。我的问题很简单。`DataGridTableStyle.MappingName`当它定位到错误的源时，当然会出现错误的输出，因此不会添加任何`DataGridColumnStyle`内容，因此不会触发 Edit()。

# c# - 控制某人何时尝试打印

> ID：13907186
> 
> 赞同：0
> 
> 时间：2012-12-17T01:20:11.267
> 
> 标签：c#

是否有可能知道有人在 Windows 中使用 c# 和任何 Visual Studio 库打印文件？我不知道它是否可能以及从哪里开始......

我想做的是：每次有人尝试在 Windows 中打印文件时，我的 c# 程序都会执行并更新数据库中的一些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:33:41.840

你可以看看[PrintSpooler](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162861%28v=vs.85%29.aspx#printer_functions) 下面是一些使用它的例子：

*   [PrintMonitor – AC# 后台打印监视器](http://blogs.msdn.com/b/martijnh/archive/2009/08/05/printmonitor-a-c-print-spooler-monitor.aspx?wa=wsignin1.0)
*   [监控打印机队列中的作业 (.NET)](http://www.codeproject.com/Articles/51085/Monitor-jobs-in-a-printer-queue-NET)

您也可以将它作为 Windows 服务运行，因此它始终在后台运行并在系统启动时启动。

# php - 隐藏的输入值未通过表单传递到新 URL

> ID：13907189
> 
> 赞同：0
> 
> 时间：2012-12-17T01:20:28.757
> 
> 标签：php, html, forms

我有一个在网站框架中工作的小 html 文件。它当前请求一个邮政编码，然后调用一个 php 页面来查询数据库。iframe 从父页面获取 id 号，然后从自己的页面获取邮政编码。这是代码片段。

```
<script>
pid = window.location.search;
pid = pid.substring(11,16)
htmlout = '<input type = "hidden" name = "productid" id = "productid" value = "' + pid + '">';
</script>
<body style="margin: 0px; background-color: #ECECEC;">

<form action="https://www.net10wirelessphones.com/Mini-zip-Lookup.html" style="text-align: left" method = "get">
<script>
document.write(htmlout);
</script><span style="font-size: 9pt"><span style="font-family: Arial, Helvetica, sans-serif; color: #444444">Verify coverage in your area. Enter your Zip Code: 
</span>&nbsp;     
</span>
<input name="zip" size="5" type="text" />
<input type="submit" value="GO" />&nbsp;</form> 
```

但是，当我输入邮政编码 00631 时，它只会转到网站 [http://www.net10wirelessphones.com/Mini-zip-Lookup.html?zip=00631](http://www.net10wirelessphones.com/Mini-zip-Lookup.html?zip=00631)

它似乎从形式中切断了隐藏的价值。关于我可能做错了什么的任何建议？

编辑：对于那些想要尝试的人，请使用邮政编码 00631 和产品 ID 17637 进行尝试。它应该接受此选项并直接进入 zipsuccess 页面。

编辑：另外，如果您想从一开始就看到它，请转到页面[https://www.net10wirelessphones.com/zipstart.html?productid=17637](https://www.net10wirelessphones.com/zipstart.html?productid=17637)。对不起，我忘了把它包括在那些已经尝试过的人身上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:27:33.940

你不需要这样做。这是一个更好的选择

```
<script>
pid = window.location.search;
pid = pid.substring(11,16)

//here is the changes
document.getElementById("productid").value = pid;
</script>

<form action="https://www.net10wirelessphones.com/Mini-zip-Lookup.html" style="text-align: left" method = "get">
<input type = "hidden" name = "productid" id = "productid" value = "" />

<span style="font-size: 9pt"><span style="font-family: Arial, Helvetica, sans-serif; color: #444444">Verify coverage in your area. Enter your Zip Code: 
</span>&nbsp;     
</span>
<input name="zip" size="5" type="text" />
<input type="submit" value="GO" />&nbsp;</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:47:52.503

我手动`productid`将作为 GET 参数提供给您的`zipfail.html`页面。它将值放入隐藏的输入字段中就好了。它也`Mini-zip-lookup.html`毫无缺陷地传递它。似乎：

1.  您没有`productid`在框架的网址中提供。
2.  或者该页面上的相关代码与`zipfail.html`

确保 iframe 的 url`?productid=?<number>`在末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:03:10.977

我得到了程序的工作。事实证明，问题出在发送到此页面的另一种形式中。我不得不对名称属性稍作更改..

这：

```
<input name="id" id="productid" type="hidden" value="" /> 
```

变成：

```
 <input name="productid" type="hidden" id="productid" value="" /> 
```

它工作得很好。谢谢大家帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T21:34:16.447

我有一个非常相似的问题，并且如上所述更改名称修复了它......到了一定程度。我认为包含实际问题可能会很有用。我的变量被向后设置。`$_POST`我每次都用空白值重置变量。我试图将这些`$_POST`值添加到一个数组中并因此得到它：

```
$_POST['varname'] = $my_array['varname']; 
```

一旦我将其更改为：

```
$my_array['varname'] = $_POST['varname']; 
```

它工作得很好。希望我花时间盯着这个愚蠢的错误可以避免其他人做同样的事情。

# php - PHP 通过电子邮件发送 PDF 文件

> ID：13907194
> 
> 赞同：0
> 
> 时间：2012-12-17T01:20:48.160
> 
> 标签：php, email

我现在正在使用以下代码将表单数据写入 PDF 文件，如何使用简单的 PHP 代码作为附件通过电子邮件发送该 PDF 文件？

```
<?php
require('fpdf.php');

$pdf = new FPDF();
$pdf->AddPage();
$pdf->SetFont('Arial', 'B', 16);
$pdf->Cell(40, 10, $_POST['first_name']);
$pdf->Output();

mail('me@mydomain.com','subject','message')
?> 
```

此代码用于下载 PDF，但我需要将文件作为附件通过电子邮件发送。

# ios - iOS UIImagePickerController vs AV基础：希望通过叠加实现图像捕获，哪个最好？

> ID：13907195
> 
> 赞同：5
> 
> 时间：2012-12-17T01:20:48.727
> 
> 标签：ios, xcode, camera

我希望在 iOS 应用程序中构建功能，允许用户拍照或从他们的库中抓取一张照片，将叠加层应用于图像，然后将图像与叠加层一起保存。似乎有两种方法可以进行图像捕获，使用 UIImagePickerController 或 AV 基础。

从我读过的内容来看， UIImagePickerController 似乎很容易实现，但可定制性较低。这是我应该用来做这件事的东西吗？还是我应该研究 AV Foundation？对此不熟悉，正在寻找一些提示或任何可能有帮助的教程链接。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T09:30:31.240

UIImage 选择器要简单得多，但会给你更少的选择。根据我的经验，AV Foundation 更加复杂，在过去的 2 周里，我遇到了和你类似的情况，并且对这两种情况都进行了实验。对于叠加，我觉得 UIImage 选择器很容易，因为您可以覆盖 Void CGrect 方法并完成它，但是对于裁剪或捕获图像点击器的一部分等复杂的事情，AVfoundation 效果更好。最良好的祝愿！！

# android - 使用适用于 Android 的 Facebook SDK 3 以额外权限登录

> ID：13907199
> 
> 赞同：8
> 
> 时间：2012-12-17T01:21:15.167
> 
> 标签：android, facebook, facebook-authentication, facebook-android-sdk

[我按照https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)上的“使用 Facebook 登录创建新的 Android 项目”部分的步骤进行操作，登录过程很好。因为我想使用原生 Android 按钮让用户登录，所以我稍微修改了代码，将以下代码移动到原生 Android 按钮的 View.OnClickListener() 中。以下是监听器中的代码：

```
Session.openActiveSession(MainActivity.this, true, new Session.StatusCallback() {
    // callback when session changes state
    @Override
    public void call(Session session,SessionState state, Exception exception) {
        if (session.isOpened()) {                           
            // make request to the /me API
            Request.executeMeRequestAsync(session,new Request.GraphUserCallback() {

                // callback after Graph API
                // response with user object
                @Override
                public void onCompleted(GraphUser user,Response response) {
                    if (user != null) {
                        Toast.makeText(getApplicationContext(), "Hello " + user.getName() +" "+user.getId()+"!", Toast.LENGTH_LONG).show();
                    }
                }
            });
        }
    }
}); 
```

onActivityResult() 和 AndroidManifest.xml 和教程一样

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
} 
```

但是，我想在用户成功登录时请求获取“read_friendlists”。[我在https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/](https://developers.facebook.com/docs/tutorials/androidsdk/3.0/scrumptious/authenticate/)阅读了教程，但它使用 Facebook SDK 自定义按钮。如何使用像上面显示的代码一样的原生 Android 按钮实现相同的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T04:43:23.413

我刚刚在另一篇文章中回答了类似的问题。我的解决方案允许您使用本机按钮并在用户首次登录时请求额外的读取权限。在此处查看[使用 3.0 SDK 请求更多权限](https://stackoverflow.com/a/13926065/703910)

# java - 将组件添加到 JFrame 内的 JPanel

> ID：13907202
> 
> 赞同：2
> 
> 时间：2012-12-17T01:21:45.973
> 
> 标签：java, swing, jframe, jpanel, layout-manager

由于我是一个初学者并且我不想参与布局管理器，所以我只是在我的主 JFrame 中添加了一个 JPanel，并为面板中的每个组件提供了特定的位置。但不知何故，输出似乎太错误了..

```
frame = new JFrame(email + " (Offline)");
    frame.setSize(400, 400);
    frame.setLocation(0, 0);
    frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    frame.setLayout(new FlowLayout());
    frame.addWindowListener(new WindowAdapter()
    {
        public void windowClosing(WindowEvent e)
        {
            // out.println("BYE");
            // out.flush();
            frame.dispose();
            thread.stop();
        }
    });
    panel = new JPanel();
    frame.add(panel);
    chat = new JTextArea();
    chat.setSize(400, 200);
    chat.setLocation(0, 0);
    chat.setEditable(false);
    panel.add(chat);
    panel.validate();
    JLabel you = new JLabel("You:");
    you.setSize(you.getPreferredSize());
    you.setLocation(0, 210);
    panel.add(you);
    panel.validate();
    input = new JTextArea();
    input.setSize(200, 200);
    input.setLocation(0, 220 + chat.getSize().height);
    panel.add(input);
    panel.validate();
    send = new JButton("Send");
    send.setSize(send.getPreferredSize());
    send.setLocation(210, 220 + chat.getSize().height);
    panel.add(send);
    panel.validate();
    frame.setVisible(true); 
```

这个框架的结果是文本区域是不可见的，中间有一个 You: 标签，右边是按钮。我在这里缺少什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T02:22:20.490

同样，不要使用空布局，因为它会使更新和维护您的 GUI 比应有的困难得多，并且如果您计划让它们在多个平台上运行，可能会导致丑陋的 GUI。反而

*   使用多个 JPanel，每个 JPanel 包含一组核心组件，每个都使用其最佳布局管理器
*   将这些 JPanel 嵌套在使用最佳布局管理器显示它们的其他 JPanel 中
*   这将使您的 GUI 无需额外代码即可调整大小。
*   将您的 JTextAreas 放在 JScrollPanes 中，这样即使超出文本区域，您也可以看到所有文本。
*   永远不要设置 JTextArea 的大小，因为这将不允许它滚动。而是设置其列和行。

作为一个非常简单的例子，运行它来看看我的意思：

```
import java.awt.*;
import javax.swing.*;

public class FooSwing2 {
   public static void main(String[] args) {
      JTextArea chatArea = new JTextArea(8, 40);
      chatArea.setEditable(false);
      chatArea.setFocusable(false);
      JScrollPane chatScroll = new JScrollPane(chatArea);
      JPanel chatPanel = new JPanel(new BorderLayout());
      chatPanel.add(new JLabel("Chat:", SwingConstants.LEFT), BorderLayout.PAGE_START);
      chatPanel.add(chatScroll);

      JTextField inputField = new JTextField(40);
      JButton sendBtn = new JButton("Send");
      JPanel inputPanel = new JPanel();
      inputPanel.setLayout(new BoxLayout(inputPanel, BoxLayout.LINE_AXIS));
      inputPanel.add(inputField);
      inputPanel.add(sendBtn);

      JPanel youLabelPanel = new JPanel(new FlowLayout(FlowLayout.LEFT, 0, 0));
      youLabelPanel.add(new JLabel("You:"));

      JPanel mainPanel = new JPanel();
      mainPanel.setLayout(new BoxLayout(mainPanel, BoxLayout.PAGE_AXIS));
      mainPanel.add(chatPanel);
      mainPanel.add(Box.createVerticalStrut(10));
      mainPanel.add(youLabelPanel);
      mainPanel.add(inputPanel);

      JFrame frame = new JFrame("Foo");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.add(mainPanel);
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }
} 
```

这将产生一个简单的（无法运行的）GUI，如下所示：
![在此处输入图像描述](../Images/c9a22640edd7e60ec12edce64de94a8c.png)

现在假设您要更改它并添加另一个按钮，即在发送 JButton 右侧的“退出”JButton。如果您使用空布局，则必须调整 GUI 的大小，必须将发送按钮移到左侧并确保您的数学没有错误等。如果您使用布局管理器，则需要只需两行新代码（更改显示，当然不是功能）：

```
 JTextField inputField = new JTextField(40);
  JButton sendBtn = new JButton("Send");
  JButton exitBtn = new JButton("Exit"); // ***** added
  JPanel inputPanel = new JPanel();
  inputPanel.setLayout(new BoxLayout(inputPanel, BoxLayout.LINE_AXIS));
  inputPanel.add(inputField);
  inputPanel.add(sendBtn);
  inputPanel.add(exitBtn);  // ***** added 
```

就是这样，这将显示：
![在此处输入图像描述](../Images/a844966d2a0f00f661cf6a0020a22eaf.png)

# android - 不同屏幕尺寸/分辨率的字体大小问题

> ID：13907204
> 
> 赞同：0
> 
> 时间：2012-12-17T01:21:50.157
> 
> 标签：android

我知道这已在其他问题中得到解答，但对我没有任何帮助。我有一个文本视图，我希望文本在各种密度/屏幕尺寸组合中显示相同的大小。我试过指定

```
android:textSize="30dp" 
```

和

```
android:textSize="30sp" 
```

并且还使用过

```
TextView text = (TextView) findViewById(R.id.text);
text.setTextSize(30 * (getResources().getDisplayMetrics().density)); 
```

****30 是我的字体大小*** ********

 **文本无法正确缩放。在较低密度和屏幕尺寸增加时，它变得太小了。我可以使用其他技术来缩放我的字体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:04:34.213

创建 layout-large、layout-small、layout-xlarge 等版本的布局 xml 文件。

您可以在每个中设置不同的大小，以便字体在各种屏幕尺寸上看起来都正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:29:35.183

经过多年在不同设备上不断地让一切都略微偏离，我最近发现尺寸的英寸和厘米测量值就是字面意思。

因此，即使在 160dp 不是一英寸的设备上，指定 1 英寸也会在所有设备上准确显示，即使它们具有自定义缩放的 ROM。

我现在指定任何我想要非常严格控制的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-05T07:51:56.763

如果您只想为不同的屏幕设置不同的字体大小，您也可以在 value.xml 中为 sw600dp 和 sw720dp 文件夹创建尺寸，并在其中放置不同的值。如果您只需要更改字体大小，则无需为每个单独创建 xml 布局。**

# objective-c - 将 NSDictionaries 和数组的复杂嵌套解析为更简单的 NSDictionary

> ID：13907207
> 
> 赞同：0
> 
> 时间：2012-12-17T01:22:00.060
> 
> 标签：objective-c, json, nsdictionary

我在这里有点过头了（实际上很多）。我有一个已转换为 NSDictionary 的 JSON 响应。这是数组中的字典内的嵌套数组和字典的混乱，等等......我不知道如何处理它。我想做的是为每个“项目”制作一个简单的 NSDictionary，并使用这些属性来驱动 UITableView。我不知道如何访问几个级别的对象。我已经做了一些搜索，我发现有几种方法可以解决它（快速枚举、块等），但在我开始旋转我的轮子之前，我很想知道什么最适合我的特殊情况。为了便于阅读，我将 NSDictionary 保存为 plist。我会在这里发布：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>search_result</key>
    <dict>
        <key>latitude</key>
        <string>51.508129</string>
        <key>longitude</key>
        <string>-0.128005</string>
        <key>page</key>
        <string>1</string>
        <key>per_page</key>
        <integer>3</integer>
        <key>results</key>
        <array>
            <dict>
                <key>result</key>
                <dict>
                    <key>description_short</key>
                    <string>Experience the history and mystery of the most famous sites in the South of England!</string>
                    <key>flex_reference</key>
                    <string>FLX-LON-77B-D2F-5ED5</string>
                    <key>geocoded_latitude</key>
                    <string>51.5081289</string>
                    <key>geocoded_longitude</key>
                    <string>-0.128005</string>
                    <key>name</key>
                    <string>Stonehenge, Glastonbury, Avebury and Chalice Well</string>
                    <key>primary_image</key>
                    <string>http://media.****.com/FLX-LON-77B-D2F-5ED5-image_original-56.jpg</string>
                    <key>product_categories</key>
                    <array>
                        <dict>
                            <key>product_category</key>
                            <dict>
                                <key>kind</key>
                                <string>type</string>
                                <key>name</key>
                                <string>Sightseeing Tours</string>
                            </dict>
                        </dict>
                        <dict>
                            <key>product_category</key>
                            <dict>
                                <key>kind</key>
                                <string>category</string>
                                <key>name</key>
                                <string>Excursion</string>
                            </dict>
                        </dict>
                        <dict>
                            <key>product_category</key>
                            <dict>
                                <key>kind</key>
                                <string>type</string>
                                <key>name</key>
                                <string>Attractions</string>
                            </dict>
                        </dict>
                    </array>
                </dict>
            </dict>
            <dict>
                <key>result</key>
                <dict>
                    <key>description_short</key>
                    <string>Experience some of the most famous landmarks in English history, University City of Oxford, rolling countryside and honey stoned cottages of the Cotswolds and Stratford upon Avon home of the famous English plyright, William Shakespeare.</string>
                    <key>flex_reference</key>
                    <string>FLX-LON-2AD-267-38AB</string>
                    <key>geocoded_latitude</key>
                    <string>51.5081289</string>
                    <key>geocoded_longitude</key>
                    <string>-0.128005</string>
                    <key>name</key>
                    <string>Oxford, Stratford and the Cotswolds Villages</string>
                    <key>primary_image</key>
                    <string>http://media.*****.com/FLX-LON-2AD-267-38AB-image_original-AF.jpg</string>
                    <key>product_categories</key>
                    <array>
                        <dict>
                            <key>product_category</key>
                            <dict>
                                <key>kind</key>
                                <string>type</string>
                                <key>name</key>
                                <string>Sightseeing Tours</string>
                            </dict>
                        </dict>
                        <dict>
                            <key>product_category</key>
                            <dict>
                                <key>kind</key>
                                <string>category</string>
                                <key>name</key>
                                <string>Excursion</string>
                            </dict>
                        </dict>
                        <dict>
                            <key>product_category</key>
                            <dict>
                                <key>kind</key>
                                <string>type</string>
                                <key>name</key>
                                <string>Attractions</string>
                            </dict>
                        </dict>
                    </array>
                </dict>
            </dict>
            <dict>
                <key>result</key>
                <dict>
                    <key>description_short</key>
                    <string>The must see attractions of the United Kingdom, World Heritage sites, Stonehenge and the Roman Baths.</string>
                    <key>flex_reference</key>
                    <string>FLX-LON-65D-AC0-B08E</string>
                    <key>geocoded_latitude</key>
                    <string>51.5081289</string>
                    <key>geocoded_longitude</key>
                    <string>-0.128005</string>
                    <key>name</key>
                    <string>Stonehenge and Bath</string>
                    <key>primary_image</key>
                    <string>http://media.****.com/FLX-LON-65D-AC0-B08E-image_original-2E.jpg</string>
                    <key>product_categories</key>
                    <array>
                        <dict>
                            <key>product_category</key>
                            <dict>
                                <key>kind</key>
                                <string>type</string>
                                <key>name</key>
                                <string>Sightseeing Tours</string>
                            </dict>
                        </dict>
                        <dict>
                            <key>product_category</key>
                            <dict>
                                <key>kind</key>
                                <string>category</string>
                                <key>name</key>
                                <string>Excursion</string>
                            </dict>
                        </dict>
                    </array>
                </dict>
            </dict>
        </array>
        <key>total_pages</key>
        <integer>18</integer>
        <key>total_results</key>
        <integer>54</integer>
    </dict>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:31:58.127

检索字典：

```
NSDictionary* dict= jsonDict[@"search_results"]; 
```

键“结果”的值是一个数组：

```
NSArray* results = dict[@"results"]; 
```

在第一个索引有一个字典：

```
NSDictionary* dict2= results[0]; 
```

对于关键的“结果”，还有另一本字典：

```
NSDictionary* dict3= dict2[@"result"]; 
```

从此字典中，您可以检索所需的值：

```
NSString* name= dict3[@"name"];
NSString* primaryImage= dict3[@"primary_image"]; 
```

无论你有多少字典和数组，你可以读取一个然后你可以读取它们。为了更容易做到这一点，只需将它们想象成数据包中的数据包，并用对象绘制图表。

**编辑**

我没有指定 dict 是什么，添加了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T02:39:31.870

```
NSDictionary *jsonResponse = /* get your dictionary from wherever */
NSDictionary *searchResults = [jsonResponse objectForKey:@"search_result"];
NSArray *allResults = [searchResults objectForKey:@"results"];

for (NSDictionary *result in allResults)
{
    NSDictionary *resultDetails = [result objectForKey:@"result"];

    NSString *name = [resultDetails objectForKey:@"name"];
    NSURL *imageURL = [NSURL URLWithString:[resultDetails objectForKey:@"primary_image"]];

    NSLog(@"Name: %@\n URL: %@", name, imageURL);
} 
```

# c# - 未找到 ArrayList.Item 属性。使用 NET Framework 4.0 和 Visual Studio 2010

> ID：13907209
> 
> 赞同：-2
> 
> 时间：2012-12-17T01:22:16.760
> 
> 标签：c#, visual-studio-2010, .net-4.0, arraylist

出于某种原因，Visual Studio 具有 ArrayList 的所有属性和方法，除了 Item 属性（它不会出现在自动完成框中）。无论如何，当我使用它时它不会编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T01:23:45.600

C# 中的`Item`属性可通过方括号运算符访问。例如，如果 for 的文档[`List<T>`说一个类公开`Item`了接受 a`int`并返回 a 的`T`](http://msdn.microsoft.com/en-us/library/0ebtbkkc.aspx)属性。你可以像这样使用它：

```
var res = myList[123]; 
```

# django - Django 中的 GenericForeignKey 和 Admin

> ID：13907211
> 
> 赞同：11
> 
> 时间：2012-12-17T01:23:02.010
> 
> 标签：django, django-models, django-admin

假设我有一个 Post 对象，它可以包含图像、视频和其他媒体类型。我可以使用 a`GenericForeignKey`将它们链接在一起。就像是：

```
class Post(models.Model):
  title = models.CharField(...)
  text = models.TextField(...)

class AudioMedia(models.Model):
  ...

class VideoMedia(models.Model):
  ...

class ImageMedia(models.Model):
  ...

class MediaObject(models.Model):
  post = models.ForeignKey(Post)
  order = models.IntegerField()

  content_type_media = models.ForeignKey(
    ContentType, limit_choices_to={
      'model__in': (
        'audiomedia',
        'imagemedia',
        'videomedia')
  })

  object_id_media = models.PositiveIntegerField()
  obj = generic.GenericForeignKey('content_type_media', 'object_id_media') 
```

现在我可以轻松地创建一个管理界面，例如：

```
class MediaObjectAdminInLine(admin.StackedInline):
  model = MediaObject
  ct_field = "content_type_media"
  ct_fk_field = "object_id_media"
  extra = 0

class PostAdmin(admin.ModelAdmin):
  inlines = [MediaObjectAdminInLine] 
```

现在的问题:) 在 admin/ 中，我可以轻松地创建一个新帖子。在帖子中，我可以轻松添加更多 MediaObject。在面板中，我有一个下拉菜单来选择类型（音频、视频……），但我必须*手动*输入要与 Post 链接的对象的 ID。

我尝试了各种扩展，包括 grappelli。有些提供了在此处*查找*要链接的对象 ID 的功能。我希望能够在此处*添加*对象，例如添加 AudioMedia、VideoMedia、ImageMedia，具体取决于我从下拉列表中选择的内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:18:50.067

你需要做很多工作才能做到这一点。

*   您要求管理员根据您从下拉列表中选择的模型类型动态显示模型表单。
*   Django 的管理员不这样做（也没有任何已知的扩展）。

要完成这项工作，您必须：

1.  编写一个自定义 JavaScript 事件处理程序，该处理程序捕获模型选择下拉列表的 onchange。
2.  然后调用 Django 的管理员并请求该模型的内联模型表单。
3.  使用该模型表单更新当前 HTML 页面。
4.  然后你需要拦截父模型的modelform的save()方法，找出它正在处理的子modelform，并正确地将它保存到数据库中。
5.  然后你需要理清如何让父模型的modelform根据子模型正确显示适当的子模型的modelform。

听起来很吓人？这是。

这是一个更简单的方法：

只有一个“媒体”模型。您将在模型上有一些仅对您的一种类型有效的字段（尽管有很多交叉）。

使用该媒体类型的前缀命名特定于单个媒体类型的任何字段，即`image_size', or`video_title`。

将 JavaScript 处理程序附加到您的 ModelAdmin，该处理程序根据媒体类型的下拉菜单选择性地显示和隐藏字段。像这样的东西：

```
class MediaAdmin(admin.ModelAdmin):
    class Meta:
        js = ["js/media-types.js",]

    // media-type.js
(function($) {
    $(document).ready(function(){
        $('.module[id^=module] .row').hide();
        $('.module[id^=module] .row.module').show();
        $('.module[id^=module] .row.module select').each(function(){
            if ($(this).val() != '') 
            {
                var group = $(this).parent().parent().parent().parent();
                var field = $(this).parent().parent().parent();
                var mtype = $(this).val().toLowerCase();
                if (mtype != '') 
                {               
                    $('.row', group).not(field).slideUp('fast');
                    $('.row[class*="'+mtype+'"]', group).slideDown('fast');
                    $('.row[class*="all"]', group).slideDown('fast');
                }
                else
                {
                    $('.row', group).not(field).slideUp('fast');
                }
            }
        });
        $('.module[id^=module] .row.module select').change(function(){
            var group = $(this).parent().parent().parent().parent();
            var field = $(this).parent().parent().parent();
            var mtype = $(this).val().toLowerCase();
            if (mtype != '') 
            {
                $('.row', group).not(field).slideUp('fast');
                $('.row[class*="'+mtype+'"]', group).slideDown('fast');
                $('.row[class*="all"]', group).slideDown('fast');
            }
            else
            {
                $('.row', group).not(field).slideUp('fast');
            }
        });
    });
})(django.jQuery); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-02T10:35:14.097

django-admin-genericfk 不适用于 Django 1.9。

除此之外，我只找到了以下模块：

[https://github.com/lexich/genericrelationview](https://github.com/lexich/genericrelationview)

看起来维护得很好。不幸的是，它的 JS 代码不能很好地与 Django CMS 设置 jQuery（noConflict jQuery）配合使用，所以它似乎不是我的选择。但如果不是在 Django CMS 页面中使用，而是在常规 Django Admin 中使用，它应该没问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-24T10:04:47.407

我意识到这已经很老了，但这仍然是搜索时的第一个结果。

[django-admin-genericfk](https://github.com/bendavis78/django-admin-genericfk)完全符合您的需要。

# jquery - jQuery Image Slider CSS不在iPad上调整大小但切断

> ID：13907216
> 
> 赞同：0
> 
> 时间：2012-12-17T01:23:29.360
> 
> 标签：jquery, css

我在两个站点上使用相同的 jQuery 图像滑块，一个站点正确调整大小，而另一个站点在 iPad/Safari 浏览器上查看时将滑块关闭。我试图模拟工作站点的 CSS，但仍然无法弄清楚。有任何想法吗？

照片滑块在这里工作：http: [//tinyurl.com/42ww9c6](http://tinyurl.com/42ww9c6)

在这里打破：http: [//tinyurl.com/creb29o](http://tinyurl.com/creb29o)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:23:46.447

从我可以从您的`style.css`,中推断出的`#content-sidebar-wrap`内容被覆盖。
当我在 Safari 中使用它时，我发现执行以下操作可以解决问题：

```
#content-sidebar-wrap {
float: left;
width: 947px !important; 
} 
```

我曾经`!important`防止它被覆盖。

# vb.net - 在 Visual Basic 中使用结构进行测试

> ID：13907217
> 
> 赞同：1
> 
> 时间：2012-12-17T01:23:36.913
> 
> 标签：vb.net, testing, import, visual-studio-2012, structure

我有一个 VS2012 Visual Basic.NET 应用程序，我想为这个应用程序创建一些单元测试。

在我的应用程序中，我有一个包含以下结构的模块：

```
<Serializable()> Public Structure MediaItem
    Dim longMediaID As Long
    Dim MediaObject As WMPLib.IWMPMedia
    Dim FileInfoObject As FileInfo
    Dim stringGenre As String
    Dim stringMediaDuration As String
    Dim doubleMediaLength As Double
End Structure 
```

如何“导入”上述 MediaItem 结构，以便可以使用此结构进行一些单元测试？目前，TestClass 不能“看到”这个结构。

**更新**

这个结构是我自己定制的。它实际上不在一个类中，它在一个模块中。

**更新 2**

这是模块代码：

```
Imports System.IO

Namespace modCanMediaStructures

Module modCanMediaStructures

    <Serializable()> Public Structure MediaItem
        Dim longMediaID As Long
        Dim MediaObject As WMPLib.IWMPMedia
        Dim FileInfoObject As FileInfo
        Dim stringGenre As String
        Dim stringMediaDuration As String
        Dim doubleMediaLength As Double
    End Structure

    <Serializable()> Public Structure MediaPlayList
        Dim stringMediaPlayListName As String
        Dim stringMediaPlayListDescription As String
        Dim stringMediaPlayListComments As String
        Dim mediaItemList As List(Of MediaItem)
        Dim stringPlayListDuration As String
        Dim doublePlayListDuration As Double
        Dim booleanShuffle As Boolean
        Dim booleanLoop As Boolean
    End Structure

    Public Structure genreItem
        Dim stringGenreName As String
        Dim longGenreCount As Long
        Dim doubleGenreDuration As Double
    End Structure

    <Serializable()> Public Structure ScheduleItem
        Dim stringItemName As String
        Dim stringItemPlaylist As String
        Dim stringItemDuration As String
        Dim stringItemComments As String
        Dim doubleItemDuration As Double
        Dim booleanStartDateIsDerivedFromEndOfOtherScheduleItem As Boolean
        Dim stringScheduleItemThatStartDateIsDerivedFrom As String
        Dim dateItemStartDateTime As Date
        Dim dateItemEndDateTime As Date
        Dim booleanEndDateIsDerivedFromPlayListDuration As Boolean
    End Structure

End Module

End Namespace 
```

在我的主要形式中，我声明了一个变量，如下所示：

```
Dim testMediaItem As modCanMediaStructures.MediaItem 
```

导入以下语句后：

```
Imports modCanMediaStructures 
```

这行得通。但是，当我在 UnitTest 测试中执行相同的语句时，会出现以下错误：

> 未定义类型“modCanMediaStructures.MediaItem”

这是我的代码：

```
Imports System.Text
Imports Microsoft.VisualStudio.TestTools.UnitTesting
Imports CanMediaPlayer
Imports modCanMediaStructures

<TestClass()> Public Class MediaListTests

<TestMethod()> Public Sub TestaddMediaItemToList()

    Dim myStructure As New modCanMediaStructures.MediaItem

End Sub

End Class 
```

我相信这是因为 UnitTest 项目实际上无法“看到”其他解决方案文件中的代码。

我可以帮忙吗？

# mongodb - 带有 MongoDB、对象 ID 和脚手架的 Grails

> ID：13907221
> 
> 赞同：2
> 
> 时间：2012-12-17T01:24:29.943
> 
> 标签：mongodb, grails, scaffold, objectid

我有使用集成测试和 Grails 脚手架将数据写入 mongoDB 数据库的问题。尝试从“列表”类型页面选择域实例时，我收到错误“[domain name] not found with id null”。

我确信这是因为 Grails url [controller]/[action]/[id]。此 id 是一个字符串，需要将其转换为 ObjectId 以用于 Grails 查询。

有没有办法做到这一点，以便它影响指定的域，甚至更好的是，一次影响所有域？

我想当我正在编写我的应用程序时，我可以将它从 action 方法中转换为 ObjectId，但我希望让脚手架工作或提供一个全局解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-14T10:08:56.413

我相信这是因为 show() 方法（Grails 脚手架功能作为操作生成）接受 Long 类型的 id 参数，即。

```
def show(Long id) {
    def suiteInstance = Suite.get(id)
    if (!suiteInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'suite.label', default: 'MyDomainClass'), id])
        redirect(action: "list")
        return
    }

    [suiteInstance: suiteInstance]
} 
```

它将 id 参数绑定到参数。由于 ObjectId 无法转换为 Long，它最终为 null，因此对 MyDomainClass.get(id) 的调用失败并显示错误消息。

您可以通过覆盖脚手架控制器中的 show() 操作来解决此问题，以便它需要 ObjectId 或 String，但我会说正确的解决方法是更新 Grails 脚手架插件，使其在它接受的 ID 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T11:30:37.787

我也有这个问题。您可以将域对象 id 保留为 ObjectId 并按如下方式更新控制器：

域对象：

```
import org.bson.types.ObjectId;

class DomainObject {
        ObjectId id
        // Add other member variables...
} 
```

控制器：

```
def show(String id) {
    def domainObjectInstance = domainObject.get(new ObjectId(id))
    if (!domainObjectInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'domainObject.label', default: 'DomainObject'), id])
        redirect(action: "list")
        return
    }

    [domainObjectInstance: domainObjectInstance]
} 
```

您还需要更新使用 id 的其他控制器方法，例如编辑、更新等。

此外，如果您希望 grails 默认控制器生成对您的所有域对象都像这样工作，您可以按照 coderLMN 的建议更新模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:44:47.837

show() 方法中的 get(params.id) 调用不会将 params.id String 转换为 ObjectId 对象，因此域实例将为空，然后以下代码将带您列出带有错误消息的操作：

> ```
> if (!exampleInstance) {
>     flash.message = message(code: 'default.not.found.message', args: [message(code: 'example.label', default: 'Example'), params.id])
>     redirect(action: "list")
>     return
> } 
> ```

可能的解决方案：

1.  可以运行“grails install-template”命令，修改src/templates/scaffolding/目录下的脚手架模板。然后你就有了新的脚手架，可以为你的所有域类生成定制的控制器、视图和测试。

2.  一个更简单的解决方案是将 id 属性定义为 String 而不是 ObjectId。String id 将等于 objectId.toString()，在这种情况下，您的脚手架将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-04T17:20:46.320

在域类中，将您的 id 类型保持为 ObjectId，并为所有相应的控制器保持支架 = true。

在域类中：

```
ObjectId id 
```

在各自的控制器中：

```
static scaffold = true 
```

从 Mongo 清除所有现有集合

考虑到您已正确配置 mongo-plugin，我想这足以让 Grails-Mongo 应用程序启动并运行

# javascript - Javascript 条件字段 (Zendesk Lotus)

> ID：13907222
> 
> 赞同：1
> 
> 时间：2012-12-17T01:24:34.700
> 
> 标签：javascript, forms, conditional, field, zendesk

我正在尝试配置一些 javascript 代码以在 Zendesk Lotus 中制作条件字段应用程序。下面是 javascipt 模板和我当前的 html。有人可以给我一个示例，说明如何更改 java 模板以适合我的 html 吗？当从第一个下拉列表（ticket_fields_21013678）中选择选项“qa”时，我只想显示第二个下拉表单字段（ticket_fields_21552756）。一旦有人告诉我如何做到这一点，我就可以自己做剩下的事情:)

**PS，javascript必须保持以下格式**。

在此先感谢您的帮助！

**Javascript：**

```
 (function(){
  var projectRequest = ['280865'],
      otherHelpesk = ['279466'],
      hideAll = [].concat(projectRequest, otherHelpesk),
      moodFieldMap = {
        cat:[].concat(projectRequest),
        dog:[].concat(otherHelpesk),
        dolphin: [].concat(projectRequest, otherHelpesk)
      };

  return {
    appID:  'https://github.com/zendesk/widgets/tree/master/ConditionalFieldsApp',
    defaultState: 'loading',
    type2thing: '',

    events: {
      'app.activated': 'setValue',
      'ticket.custom_field_21631456.changed': 'typeII'
    }, //end events

    typeII: function(){
      this.hide(hideAll);
      this.type2thing = this.ticket().customField('custom_field_21631456');
      //console.log('control field value: ' + this.type2thing);
      if (this.type2thing != null) {
       this.show(moodFieldMap[this.type2thing]);
      }
    },

    setValue: function() {
      //console.log('activated', arguments);
      this.typeII();
    },

    hide: function(fields){
      fields.forEach(function(field) {
        this.ticketFields('custom_field_' + field).hide();
      }, this);
    },

    show: function(fields) {
      fields.forEach(function(field) {
        this.ticketFields('custom_field_' + field).show();
      }, this);
    }
  };
}()); 
```

**我的 HTML：**

```
<select id="ticket_fields_21013678" name="ticket[fields][21013678]" tabindex="8"><option value="">-</option>
<option value="depreqaccount_management">Account Management</option>
<option value="ce_vp">CE/VP</option>
<option value="city_management">City Management</option>
<option value="city_planning">City Planning</option>
<option value="customer_service">Customer Service</option>
<option value="depreq_images">Images</option>
<option value="partner_management">Partner Management</option>
<option value="production">Production</option>
<option value="qa">QA</option>
<option value="senior_management">Senior Management</option>
<option value="depreq_writers">Writers</option>
<option value="depreq_bdm">BDM</option></select>

<select id="ticket_fields_21552756" name="ticket[fields][21552756]" tabindex="9"><option value="">-</option>
<option value="responsibility_account_manager">Account Manager</option>
<option value="responsibility_bdm">BDM</option>
<option value="responsibility_ce_vp">CE/VP</option>
<option value="responsibility_city_manager">City Manager</option>
<option value="responsibility_city_planner">City Planner</option>
<option value="responsibility_customer_service">Customer Service</option>
<option value="responsibility_image_designer">Images</option>
<option value="responsibility_merchant">Merchant</option>
<option value="responsibility_partner_manager">Partner Manager</option>
<option value="responsibility_producer">Producer</option>
<option value="responsibility_qa">QA</option>
<option value="responsibility_writer">Writer</option></select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T16:23:14.087

[您可以在https://github.com/zendesklabs/conditional_fields_app](https://github.com/zendesklabs/conditional_fields_app)看到最新版本的新 Zendesk 代理界面

# php - 登录表单不起作用？

> ID：13907225
> 
> 赞同：1
> 
> 时间：2012-12-17T01:24:48.623
> 
> 标签：php, pdo

我正在尝试将我的应用程序从`mysql_*`Functions 迁移到`PDO API`正在工作的登录框；已停止将详细信息转发到`user_check.php`文件中..

我的代码如下：

```
<?php
session_start();

if (isset($_SESSION['real_name'])){

include "member_area.php";
die("-");

}
include "Database.php";
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="css/style_002.css">
<link rel="stylesheet" href="css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Billing Area</title>
<link rel="stylesheet" href="css/tooltip.css" type="text/css">

<div id="indexcpcenter">
 <div class="indexcpcenterbox">

   <form method="post" action="user_check.php">
Member Login <Br>
Email Address:<br>
<input type="text" name="username" type="text">
<br>
Password:<br><input type="password" name="password" type="text"></td>
<br><input type="submit" name="Submit" value="Login">
<br><i>Produced By <a href="http://www.slayer-productions.com">Slayer-Productions</a> Copyright 2012-2015 Slayer-Productions.com
</form>

</div>
</div> 

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="js/slideshow.js"></script>
<script type="text/javascript" src="js/tooltip.js"></script>
 <div style="position: absolute; margin: 0px; top: 384px; left: 351.5px;" id="popup"><div id="popup_title"></div><div id="popup_body">Seems like this was empty</div> <div id="popup_bottom"></div></div>

 <div id="dp_swf_engine"><object style="position: absolute; top: -1000000px; left: -1000000px;" id="_dp_swf_engine" data="swf/dealply_swf_engine.swf" type="application/x-shockwave-flash" height="1" width="1"><param value="always" name="allowscriptaccess"></object></div>

 </body></html> 
```

此处提供了更易于阅读的版本：http: [//pastebin.com/5GQ8Nnud](http://pastebin.com/5GQ8Nnud)

我不知道为什么它没有将详细信息转发到`user_check.php`文件中，有人有想法吗？

**根据要求：Database.php**

```
$hostname = "mysql:dbname=alltables;host=127.0.0.1";
$username = "root";
$password = "xxx";

try
{
    $Con = new PDO ($hostname, $username, $password);
}catch (PDOException $e){
    echo 'Connection failed: ' . $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:34:44.890

user_check.php 是否收到 POST 数据？

```
<pre>
print_r($_POST)
</pre> 
```

如果是这样，身份验证类/文件是什么样的？

你已经尝试了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T01:41:43.650

问题出在我的`member_area.php`文件上。该文件的原始内容是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="css/style_002.css">
<link rel="stylesheet" href="css/style.css">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Billing Area</title>
<link rel="stylesheet" href="css/tooltip.css" type="text/css">

Success!

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="js/slideshow.js"></script>
<script type="text/javascript" src="js/tooltip.js"></script>
 <div style="position: absolute; margin: 0px; top: 384px; left: 351.5px;" id="popup"><div id="popup_title"></div><div id="popup_body">Seems like this was empty</div> <div id="popup_bottom"></div></div>

 <div id="dp_swf_engine"><object style="position: absolute; top: -1000000px; left: -1000000px;" id="_dp_swf_engine" data="swf/dealply_swf_engine.swf" type="application/x-shockwave-flash" height="1" width="1"><param value="always" name="allowscriptaccess"></object></div>

 </body></html> 
```

我将所述文件更改为只是`success` 并且从页面重新定向`index.php`有效。奇怪的！

# php - php: 如何缩短许多 $_POST[];

> ID：13907226
> 
> 赞同：0
> 
> 时间：2012-12-17T01:24:50.353
> 
> 标签：php

我正在处理一个包含许多插入字段的页面。如何缩短以下代码？

```
$title_1 = $_POST['title_1'];
$content_1 = $_POST['content_1'];
$link_1 = $_POST['link_1'];
$img_link_1 = $_POST['img_link_1'];

$title_2 = $_POST['title_2'];
$content_2 = $_POST['content_2'];
$link_2 = $_POST['link_2'];
$img_link_2 = $_POST['img_link_2'];

$title_3 = $_POST['title_3'];
$content_3 = $_POST['content_3'];
$link_3 = $_POST['link_3'];
$img_link_3 = $_POST['img_link_3']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:34:46.670

我会做：

```
$howmany = 3; // How many sets of fields are submitted.

for($i=0;$i<$howmany;$i++){
  $field[$i]['title'] = $_POST['title_'.$i];
  $field[$i]['content'] = $_POST['content_'.$i];
  $field[$i]['link'] = $_POST['link_'.$i];
  $field[$i]['img_link'] = $_POST['img_link_'.$i];
} 
```

然后您可以访问`$field[1]['title']`表单中的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:38:43.630

您可以像这样遍历 $_POST 数组：

```
foreach ($_POST as $key => $value) {
    ${$key} = $value;
} 
```

这将使您的帖子变量`$_POST['title_1']`像`$title_1`

请记住，您的帖子名称必须是您希望引用变量的确切名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:15:50.547

您不必更改名称，只需将其设置为数组即可；

```
<input type="text" name="title[]" />
<input type="text" name="content[]" />
<input type="text" name="link[]" />
<input type="text" name="image_link[]" />

<input type="text" name="title[]" />
<input type="text" name="content[]" />
<input type="text" name="link[]" />
<input type="text" name="image_link[]" />

<input type="text" name="title[]" />
<input type="text" name="content[]" />
<input type="text" name="link[]" />
<input type="text" name="image_link[]" /> 
```

PHP：

```
extract($_POST);
$count=count($title);

for($i=0;$i<$count;$i++) {

//You can perform your any function on this loop, to get title use $title[$i]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T02:47:44.020

最简洁的方法是使用 PHP 的 POST 数据处理功能为您完成工作。

考虑使用您的 HTML 表单名称，如下所示：

```
<form action="{url}" method="post">

    <input type="text" name="data[0][title]" />
    <input type="text" name="data[0][content]" />
    <input type="text" name="data[0][link]" />
    <input type="text" name="data[0][image_link]" />

    <input type="text" name="data[1][title]" />
    <input type="text" name="data[1][content]" />
    <input type="text" name="data[1][link]" />
    <input type="text" name="data[1][image_link]" />

    ...

</form> 
```

在 PHP 中提取数据如下：

```
$data = $_POST['data']; 
```

这会将您的 PHP 代码缩短为一行。`data`该语句将直接为您提供表单输入的 PHP 数组。A`var_dump`将如下所示：

```
array (
    0 => array('title'=>'...','content'=>'...','link'=>'...','image_link'=>'...'),
    1 => array('title'=>'...','content'=>'...','link'=>'...','image_link'=>'...'),
    ...
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T01:30:00.170

在你编辑你的帖子后，我重新做了这个答案。使用可变变量。

```
foreach ($_POST as $key => $val)
{
    if (preg_match('/^(([a-z]+_)+\d)$/', $key, $match)
    {
        $$match[0] = $val;
    }
} 
```

使用`[a-z0-9]`或`[a-zA-Z0-9]`作为替代品。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T01:34:48.537

您可以使用提取（http://php.net/manual/en/function.extract.php）：`extract($_POST)`

但是你应该小心——如果客户端 POST user_id 或其他什么？至少，您应该指定 $_POST 值不会覆盖已定义的变量：`extract($_POST, EXTR_SKIP)`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-17T01:39:17.000

```
<?php
$key_prefixes = array (
    'title',
    'content',
    'link',
    'img_link'
);

$i = 1;
while (true) {
    $post_values_missing = 0;
    foreach ($key_prefixes as $key_prefix) {
        $key = $key_prefix . '_' . $i;
        if (!isset($_POST[$key])) {
            $post_values_missing += 1;
            continue;
        };
        $val = $_POST[$key];
        // do something with $val
    }

    // did you get any values through this iteration?
    $post_values_exist_bool = (count($key_prefixes) !== $post_values_missing);

    // if not, you must've gotten them all
    if (false === $post_values_exist_bool) {  
        break;
    }

    $i += 1;
} 
```

# session - Symfony2 中的并发前端和后端会话

> ID：13907227
> 
> 赞同：3
> 
> 时间：2012-12-17T01:25:15.440
> 
> 标签：session, symfony, config, frontend, factories

是否可以在 Symfony2 中为前端接口和后端接口创建两个不同的会话。

目前，如果我从后端注销，它会一起破坏我的前端和后端会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T10:50:05.033

这应该可以通过两个不同的防火墙条目来实现，每个条目都有不同的安全提供程序。

# jquery - 从 form.submit 调用 JQuery 小部件函数

> ID：13907230
> 
> 赞同：0
> 
> 时间：2012-12-17T01:25:38.380
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-widgets

我试图从 form.submit 调用我的 jquery 小部件 api 的公共方法，但我没有成功。谁能帮我？

```
_cleanFormFields: function() {
  console.log("ok");
},

_addFormListener: function(map, marker) {
    var form = $(".add-form").clone().show();
    form.submit(function (event){
       event.preventDefault();
       _cleanFormFields();
    }
} 
```

为什么这不起作用？浏览器的控制台引发“Uncaught ReferenceError: _cleanFormFields is not defined”异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:28:45.760

`_cleanFormFields`是某个对象的属性，对吗？所以你不能直接调用它，你需要通过你的对象来引用它：

```
yourObject._cleanFormFields(); 
```

或者，根据`_addFormListener()`调用方式，您可能可以使用`this`. 但是您需要保留`this`from的引用，`_addFormListener()`因为在`.submit()`回调`this`中将是有问题的表单元素：

```
_addFormListener: function(map, marker) {
    var form = $(".add-form").clone().show(),
        self = this;
    form.submit(function (event){
       event.preventDefault();
       self._cleanFormFields();
    }
} 
```

# ocaml - 如何在 ocamlnet 的 netclient 中设置 Http_client 的用户代理？

> ID：13907231
> 
> 赞同：2
> 
> 时间：2012-12-17T01:25:55.697
> 
> 标签：ocaml

也许我遗漏了一些明显的东西，但[文档](http://projects.camlcity.org/projects/dl/ocamlnet-3.6.1/doc/html-main/Http_client.html)并没有向我透露任何东西。

解决方案或解决方法将非常有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T06:57:36.847

使用方法`set_req_header : string -> string -> unit`：

```
let req = new Http_client.get (Neturl.string_of_url some_url) in
    req#set_req_header "User-Agent" "Your user agent"; 
```

而不是提出你的要求。

# javascript - 创建一个 div 浮动在页面前面的效果（如常规应用程序）

> ID：13907232
> 
> 赞同：0
> 
> 时间：2012-12-17T01:26:04.153
> 
> 标签：javascript, css, web

我能给出的关于这种效果的最佳示例网站是 Facebook。当你点击一张照片时，你会得到一个 div 浮动在所有内容的顶部，放大照片并提供额外的信息。它有点类似于您在传统应用程序中找到的东西——比如子视图之类的东西。

[http://img.photobucket.com/albums/v282/Ace_of_Spades01/fb_zps2047caf8.png](http://img.photobucket.com/albums/v282/Ace_of_Spades01/fb_zps2047caf8.png)

是否有框架或其他预先构建的解决方案，或者我必须自己推出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:28:59.213

您描述的功能称为灯箱。

如果你使用 jQuery，你可以使用类似 fancybox - [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

如果没有，如果你谷歌“灯箱”，还有很多选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T01:29:31.100

Shadowbox 让你做到这一点。它可以显示 HTML 并且易于实现。

[http://www.shadowbox-js.com/usage.html](http://www.shadowbox-js.com/usage.html)

# java - 在java中与字符串相乘

> ID：13907233
> 
> 赞同：0
> 
> 时间：2012-12-17T01:26:04.763
> 
> 标签：java

我有一个字符串，想将该字符串乘以 0.174。

我有`String strNumber = numberText.getText();`。我该如何从这里开始？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T01:27:52.967

使用or等​​将字符串转换为任何合适的数字数据类型（`long`如果是大数字，`float`/`double`表示小数等）。然后您可以简单地将这两个数字相乘。例子：`Long.parseLong(String)``Integer.parseInteger(String)`

```
String string1 = ".5";//Double in a string
String string2 = "6"; //Integer in a string
double multiplied = Double.parseDouble(string1) * Integer.parseInt(string2) * 3; //.5 * 6 * 3 = 9.0; number form (not string) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T01:28:48.570

在对数字进行任何操作之前，您必须将值转换为浮点值。您可以使用以下方法：

```
double num = Double.parseDouble(numberText.getText()) 
```

然后你可以执行你的乘法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T06:32:20.133

这可能会有所帮助。

```
String strNumber = numberText.getText();;
    if (strNumber.contains(".")) {
        System.out.println(Double.parseDouble(strNumber) * 174);
    } else {
        System.out.println(Integer.parseInt(strNumber) * 174);
    } 
```

# ruby-on-rails - 为什么这个对象 respond_to :each 但是 object.method(:each) 会引发错误

> ID：13907235
> 
> 赞同：1
> 
> 时间：2012-12-17T01:26:58.277
> 
> 标签：ruby-on-rails, ruby

我继承了一个项目，其中 ActiveRecord 模型给了我奇怪的行为。到目前为止，这是唯一一个这样做的模型。

```
car = Car.first
car.respond_to?(:each) # true 
```

我找不到任何`each`定义的方法。`Car`

我在[另一篇文章](https://stackoverflow.com/questions/175655/how-to-find-where-a-method-is-defined-at-runtime)中读到，您可以找出谁注入了该方法，所以我试了一下：

```
car.method(:each) # raises "undefined method `each' for class `Car' 
```

我想`Car`与[draper](https://github.com/jcasimir/draper)一起使用，但是因为我的实例的行为类似于 Enumerable，所以 draper 将其视为这样。然而，德雷珀不是问题。

我该怎么做才能弄清楚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:20:13.903

对我的问题的评论帮助我找到了它！我使用 Dmitry 的二进制搜索来找出导致它的原因，并在模型使用的 gem 中发现了问题。宝石 Mark Reed 覆盖`respond_to`. 所以教训是：如果`responds_to`是时髦的，也许它在某个地方被覆盖了。

# google-analytics - 谷歌解析跟踪事件如何处理？

> ID：13907236
> 
> 赞同：1
> 
> 时间：2012-12-17T01:27:03.593
> 
> 标签：google-analytics

使用参数跟踪 onclick 事件：

```
 <input name="submit" type="button" onclick="_gaq.push([‘_trackEvent’, ‘Widget Tab’, ‘Click’, ‘Hotels’]);">Submit</input> 
```

有人知道这个代码不起作用吗？

我已阅读[此处](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)的文档，并且可以找到任何文档。

# actionscript - 在 ActionScript 中使用带有“if”语句的 hitTestObject

> ID：13907243
> 
> 赞同：-1
> 
> 时间：2012-12-17T01:28:21.717
> 
> 标签：actionscript, if-statement, drag-and-drop, hittest, statements

我正在尝试使用 hitTestObject 和 enter_frame 创建一个“测试”页面，用户将“答案框”拖到另一个框，如果答案正确，它会显示“正确”一词，如果不是“错误”，但我有四个问题（q1）和4个答案（a1），并且在输入第一个答案后，它不会做任何其他事情，除非我将方块移出正确答案。

如何让它工作并忽略以前的响应？我也在使用拖放命令。

-

```
finalTest.addEventListener(Event.ENTER_FRAME, detectCollision);

function detectCollision (evt: Event) : void {
    if(a1.hitTestObject(q1)) {
        finalTest.checkText.text = "Correct answer";
    }
    else if(a1.hitTestObject(q2)) {
        finalTest.checkText.text = "wrong";
    }
    else if(a1.hitTestObject(q3)) {
        finalTest.checkText.text = "wrong";
    }
    else if(a1.hitTestObject(q4)) {
        finalTest.checkText.text = "wrong";
    }

    else if(a2.hitTestObject(q2)) {
        finalTest.checkText.text = "Correct answer";
    }
    else if(a2.hitTestObject(q1)) {
        finalTest.checkText.text = "wrong";
    }
    else if(a2.hitTestObject(q3)) {
        finalTest.checkText.text = "wrong";
    }
    else if(a2.hitTestObject(q4)) {
        finalTest.checkText.text = "wrong";
    }

    else if(a3.hitTestObject(q3)) {
        finalTest.checkText.text = "Correct answer";
    }
    else if(a3.hitTestObject(q1)) {
        finalTest.checkText.text = "wrong";
    }
    else if(a3.hitTestObject(q2)) {
        finalTest.checkText.text = "wrong";
    }
    else if(a3.hitTestObject(q4)) {
        finalTest.checkText.text = "wrong";
    }

    else if(a4.hitTestObject(q4)) {
        finalTest.checkText.text = "Correct answer";
    }
    else if(a4.hitTestObject(q1)) {
        finalTest.checkText.text = "wrong";
    }
    else if(a4.hitTestObject(q2)) {
        finalTest.checkText.text = "wrong";
    }
    else if(a4.hitTestObject(q3)) {
        finalTest.checkText.text = "wrong";
    }
    else {
        finalTest.checkText.text = " ";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:05:01.727

也许这应该有所帮助：

```
var questionArray:Array = new Array(q1,q2,q3,q4);
var answerArray:Array = new Array(a1,a2,a3,a4);

var checkId:int = 0;

for(var i:int = 0; i<answerArray.length; i++) {
     answerArray[i].ids = i;
     answerArray[i].addEventListener(MouseEvent.MOUSE_DOWN, onDragHandler);
     answerArray[i].addEventListener(MouseEvent.MOUSE_UP, onReleaseHandler);
}

function onDragHandler(e:MouseEvent) {
     e.currentTarget.startDrag();
     checkId = e.currentTarget.ids;
}

function onReleaseHandler(e:MouseEvent) {
    e.currentTarget.stopDrag();
    if(e.currentTarget.hitTestObject(questionArray[checkId])) {
        finalTest.checkText.text = "Correct Answer";
    } else {
        finalTest.checkText.text = "Wrong";
    }
} 
```

我将问题和答案整理成数组。而且我没用`ENTER_FRAME`..

# objective-c - 使用 ARC，我还需要遵循旧的保留发布风格吗？

> ID：13907244
> 
> 赞同：0
> 
> 时间：2012-12-17T01:28:31.830
> 
> 标签：objective-c, cocoa-touch, memory-management, automatic-ref-counting

在 ARC 之前，这是您为属性设置值以避免内存泄漏的方式：

```
NSDictionary *tempDict = [[NSDictionary alloc]init];
self.dictionary = tempDict;
[tempDict release]; 
```

但是现在有了 arc，我们还需要使用 2 行样式，还是可以只使用单行设置器？

```
self.dictionary = [[NSDictionary alloc]init]; 
```

相对

```
NSDictionary *tempDict = [[NSDictionary alloc]init];
self.dictionary = tempDict; 
```

此外，在一般 iOS 开发人员中，大多数时候只使用属性是否安全，不再直接使用实例变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:32:41.767

您可以使用单线样式。

也许我不知道您所说的“安全”是什么意思。在 ARC 下，无论您使用属性、实例变量还是混合使用，您都可以确保对象将被正确保留和释放。

如果没有 ARC，总是使用属性设置器来确保正确保留和释放对象通常更安全（例如，不太容易出现人为错误）。

# sql-server - 将数据库名称传递给表时，使用 SQL 检查表是否存在

> ID：13907249
> 
> 赞同：0
> 
> 时间：2012-12-17T01:28:51.937
> 
> 标签：sql-server

我正在编写一个存储过程，旨在针对许多类似的表运行。由于我们每年都归档数据库，因此它不仅需要表名参数，还需要数据库名参数。

问题是，我想检查表是否存在，但我事先不知道数据库名称。通常我可以这样做：

```
IF  EXISTS (
SELECT * 
FROM [Database].sys.objects 
WHERE object_id = OBJECT_ID(@TableName)
 AND type in (N'U')) 
```

但是将 DB 名称作为变量传递给它意味着我很确定 sys.objects 会对我产生影响。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T01:44:21.853

你需要动态sql。注意每个新语句之前的空格，就像换行一样

```
declare @db varchar(50) = 'mydbname'
declare @TableName varchar(50) = 'mytablename'
declare @sql varchar(max)

set @sql = 'use '+@db

set @sql = @sql + ' IF  EXISTS (SELECT * FROM sys.objects 
WHERE object_id = OBJECT_ID('''+@TableName+''') AND type in (''U''))  
begin 
     select 1 
end'

exec (@sql) 
```

# css - 溢出的内联元素在 FF 和 chrome 中的行为不同

> ID：13907251
> 
> 赞同：0
> 
> 时间：2012-12-17T01:29:01.813
> 
> 标签：css

我只是在阅读 Apache 的 css 设计模式并且有一个关于块元素中溢出的内联元素的问题。这里是链接

[http://www.cssdesignpatterns.com/Chapter%2004%20-%20BOX%20MODELS/Inline%20Box/example.html](http://www.cssdesignpatterns.com/Chapter%2004%20-%20BOX%20MODELS/Inline%20Box/example.html)

您可以看到带有“box”类的内联元素在 chrome 中保持在同一个行框中，但在 firefox 中转到下一行，而所需的行为是 firefox 所做的。谁能帮我解释一下为什么firefox和chrome有区别？？？

这是html：

```
<div class="container">
  <span class="default">BEFORE</span>  
  <span class="box">← Left &nbsp; ↑ Top &nbsp; 
                      Bottom ↓ &nbsp; Right → </span>  
  <span class="default">AFTER</span>  
</div>​ 
```

这是CSS

```
.container {
  border: 1px solid gray;
}

.default {
  line-height: normal;
  width: auto;
  height: auto;
  overflow: visible;
  visibility: visible;
  margin: 0;
  padding: 0;
  border: none;
  background-color: gold;
}

.box {
  line-height: 100px;
  margin-left: 100px;
  margin-right: 100px;
  padding: 20px 120px;
  border-left: 5px solid gray;
  border-right: 5px solid black;
  border-top: 5px solid gray;
  border-bottom: 5px solid black;
  background-color: gold;
  overflow: scroll;
  width: 99999px;
  height: 99999px;
  margin-top: 99999px;
  margin-bottom: 99999px;
}

.default {
  line-height: normal;
  width: auto;
  height: auto;
  overflow: visible;
  visibility: visible;
  margin: 0;
  padding: 0;
  border: none;
  background-color: gold;
}​ 
```

这是小提琴链接

[http://jsfiddle.net/GRwUp/](http://jsfiddle.net/GRwUp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:33:47.673

尝试给容器一个宽度和填充：

```
.container {
    border: 1px solid gray;
    width: 350px;
} 
```

这是一个小提琴：http: [//jsfiddle.net/GRwUp/1/](http://jsfiddle.net/GRwUp/1/)

# c++ - 内联 constexpr 函数定义是否合法？gcc (ok) vs clang (error)

> ID：13907252
> 
> 赞同：16
> 
> 时间：2012-12-17T01:29:05.913
> 
> 标签：c++, c++11, clang, language-lawyer

我当前的程序被clang拒绝，但用gcc编译得很好。它归结为以下简化示例：

```
struct A {
  static constexpr inline int one();
};

inline constexpr int A::one() { return 1; }

int main() {
  return 0;
} 
```

g++ 4.7.2 编译它没有错误（`g++ -std=c++11 -Wall -g -o main example.cpp`）。clang++ 3.1 拒绝它：

```
$ clang++ -std=c++11 -Wall -g -o main example.cpp 
example.cpp:6:25: error: conflicting types for 'one'
inline constexpr int A::one() { return 1; }
                        ^
example.cpp:3:31: note: previous declaration is here
  static constexpr inline int one();
                              ^
1 error generated. 
```

我敢打赌 gcc 是对的，而 clang 是错的？该程序应该是合法的 C++11。

有趣的旁注。如果`one`在结构中实现，clang 不再抱怨：

```
struct A {
  static constexpr inline int one() { return 1; }
} 
```

gcc 也接受这个变体。据我了解，根据标准，两个版本应该是相同的。这是一个clang错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-05T18:02:51.797

这是一个 Clang 错误（在 Clang 3.2 中修复）。`const`问题在于，在确定函数的重新声明是否与先前的声明匹配时，Clang 没有正确处理隐式性的影响。考虑：

```
struct A {
  int f();                  // #1
  constexpr int f() const;  // #2 (const is implicit in C++11 and can be omitted)
  static constexpr int g(); // #3
};

int A::f() { return 1; }           // #4, matches #1
constexpr int A::f() { return 1; } // #5, matches #2, implicitly const
constexpr int A::g() { return 1; } // #6, matches #3, not implicitly const 
```

在将类外声明 # `A`5`A::f`与 如果`A::f`是非静态成员函数，则其类型为`int () const`，如果是静态成员函数，则其类型为`int ()`（无隐式`const`）。

Clang 3.1 并没有完全正确：它假设如果一个`constexpr`函数是一个成员函数，那么`constexpr`它会隐式地生成它`const`，这允许 #4 和 #5 工作，但会破坏 #6。Clang 3.2 通过两次实现`constexpr`-implies-`const`规则来解决这个问题：一次是在重新声明匹配中（这样 #5 被认为重新声明了 #2 而不是 #1，即使它还没有隐式地`const`），然后再次在先前的声明中被选中（将隐式常量添加到#5）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-17T11:11:40.960

尽管该标准没有明确提及是否`constexpr`允许将静态成员函数的定义与其声明分开，但它`constexpr`在 7.1.5p1 下提供了以下构造函数单独定义的示例：

```
struct pixel {
  int x;
  int y;
  constexpr pixel(int); // OK: declaration
};
constexpr pixel::pixel(int a)
  : x(square(a)), y(square(a)) // OK: definition
  { } 
```

所以很明显，`constexpr`函数可以有单独的声明和定义。同样在 7.1.5p1 中：

> 如果函数或函数模板的任何声明具有`constexpr`说明符，则其所有声明都应包含说明`constexpr` 符。

这意味着一个`constexpr`函数可以有（多个）非定义声明。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T04:54:03.863

我很确定 g++ 是正确的。事实上，这曾经是 g++ 中的一个[错误](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=43947)。我在标准中找不到明确说明您可以将静态 constexpr 声明与定义分开的地方，但是如果您查看第 7.1.5 节讨论 constexpr 说明符（[在此处总结](http://en.cppreference.com/w/cpp/language/constexpr)），它不会排除它，这通常意味着它是允许的。

# vba - 错误excel vba“方法范围对象_global失败”

> ID：13907254
> 
> 赞同：0
> 
> 时间：2012-12-17T01:29:23.553
> 
> 标签：vba, excel, excel-2007

这是我的代码

```
Sub rangking()
Dim mulai As Integer
Dim akhir As Integer
Dim i As Integer
Application.CutCopyMode = False
mulai = 0
akhir = 60
For i = akhir To mulai Step -1
If Range("data!AC" & i).Value > 90 Then
Range("data!AO" & i).Value = "mumtaz"
ElseIf Range("data!AC" & i).Value > 80 Then Range("data!AO" & i).Value = "jayid jiddan"
ElseIf Range("data!AC" & i).Value > 70 Then Range("data!AO" & i).Value = "jayid"
ElseIf Range("data!AC" & i).Value > 60 Then Range("data!AO" & i).Value = "hasan"
ElseIf Range("data!AC" & i).Value > 50 Then Range("data!AO" & i).Value = "kaaf"
ElseIf Range("data!AC" & i).Value > 45 Then Range("data!AO" & i).Value = "makbul"
Else: Range("data!AO" & i).Value = "rosib"
End If

Next i

End Sub 
```

我在行中有错误“对象'_global'上的方法'范围'失败”

```
If Range("data!AC" & i).Value > 90 Then 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:16:35.280

```
Range("data!AC" & i) 
```

不是您需要单独定义工作表的范围，例如：

```
Sheets("data").Range("AC" & i) 
```

# mongodb - 在猫鼬中验证其父级范围内的嵌入文档的唯一性

> ID：13907257
> 
> 赞同：5
> 
> 时间：2012-12-17T01:29:31.613
> 
> 标签：mongodb, mongoose

我在猫鼬中有以下模式：

```
UserSchema = new Schema
    username: {type: String, required: true}

GameSchema = new Schema
    identifier: String
    users: [UserSchema] 
```

我想确保游戏中的每个用户都有一个唯一的用户名。但是，如果我添加

```
unique: true 
```

对于用户名定义，它似乎在所有游戏中强制执行唯一性，而不仅仅是在用户所在的游戏中。另外，如果我有超过 1 个没有用户的游戏，那么我会收到以下错误：

```
games.$users.username_1  dup key: { : null } 
```

我尝试将自定义验证器添加到用户名字段以手动检查该用户名是否已经在父游戏的范围内，但是在猫鼬中验证器函数只接收用户名的实际字符串，所以我没有任何办法检查用户名在游戏中是否唯一，因为我无法在验证器函数中获得对父游戏文档的引用。

有没有办法在猫鼬中完成这种验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T02:03:52.420

正如您所发现的，向数组的字段添加唯一索引不会强制数组内的唯一性，它确保集合中没有两个*文档*在数组中包含相同的字段值。

取而代之的是，将[`$addToSet`](http://docs.mongodb.org/manual/reference/operator/update/addToSet/#up._S_addToSet)数组运算符视为一种仅在数组中还没有值的情况下自动将值添加到数组的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-07T05:15:47.450

这很容易通过执行以下操作来实现：

```
doc.array.addToSet(4,5); 
```

您可以通过以下方式删除它们：

```
doc.array.pull(4,5);
doc.array.remove(4,5); //alias of .pull() 
```

[http://mongoosejs.com/docs/api.html#types_array_MongooseArray-addToSet](http://mongoosejs.com/docs/api.html#types_array_MongooseArray-addToSet) [http://mongoosejs.com/docs/api.html#types_array_MongooseArray-pull](http://mongoosejs.com/docs/api.html#types_array_MongooseArray-pull)

# php - spl_autoload_register 与其他自动加载冲突

> ID：13907262
> 
> 赞同：0
> 
> 时间：2012-12-17T01:31:01.800
> 
> 标签：php

我在文件中有以下代码

文件一有这个

```
spl_autoload_register(function($class){
    $class = str_replace('\\', '/', $class);
    require_once('' . $class . '.php');
}); 
```

文件二有这个

```
require_once('Autoload.php'); 
```

文件 3 像这样调用文件 1 和 2

```
include_once('file1.php');

//some codes
include('file2.php') 
```

现在由于某种原因，当我运行 file3.php 时，它给了我这个错误

无法打开流：第 26 行需要打开失败的“Autoload.php”/home/public_html/folder/file1.php

现在我对 sp1_autoload_register 做了一些研究，似乎 $class 可能已在 file2 中定义，这会触发未找到的错误，我怀疑 file2 的 autoload.php 中还有另一个 sp1_autoload_register，但其中包含的文件是 ioncubed。我怎么知道编码文件中是否有额外的 sp1_autoload_register 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:48:14.650

这可以检查任何 sp1_autoload_register 函数

```
spl_autoload_register(function($class){
$class = str_replace('\\', '/', $class);
if (stream_resolve_include_path($class))
    require_once('' . $class . '.php');
}) 
```

# asp.net - 如何路由到 URL *with* 扩展

> ID：13907265
> 
> 赞同：1
> 
> 时间：2012-12-17T01:31:05.913
> 
> 标签：asp.net, routing, sitemap, asp.net-webpages

我正在尝试提供由 Razor 视图生成的博客的 sitemap.xml 文件，就像在我的 _AppStart.cshtml 文件中一样：

```
//sitemap
RouteTable.Routes.MapWebPageRoute("sitemap.xml", "~/pages/shared/sitemap.cshtml"); 
```

由于某种原因，这条路线被忽略了，我得到一个 404。如果我将它路由到“/sitemap”，它工作正常，但是当我包含文件扩展名时它会中断。我假设 IIS 在 ASP.NET 获取它之前对请求进行了处理，但我不确定该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T17:35:27.327

尝试使扩展成为参数：

```
RouteTable.Routes.MapWebPageRoute(
    "sitemap.{extension}", // route pattern
    "~/pages/shared/sitemap.cshtml", // physical file
    defaultValues: new {extension = "xml"}, // defaults
    constraints: new {extension = "xml"}); // constraints (regex) 
```

# android - 旋转轮半离屏android

> ID：13907266
> 
> 赞同：0
> 
> 时间：2012-12-17T01:31:19.580
> 
> 标签：android, image, screen-size

我需要一个旋转轮图形，它位于屏幕底部的一半，然后在用户采取行动时动画（旋转）。

我可以通过调用将车轮图形从屏幕上移开：

```
 Animation animation = new TranslateAnimation(Animation.ABSOLUTE,0,Animation.ABSOLUTE, 0,Animation.ABSOLUTE,wheelPos, Animation.ABSOLUTE, wheelPos);
    animation.setDuration(1);
    animation.setFillAfter(true);
    wheel.startAnimation(animation); 
```

没关系，我可以通过 LayoutParams 将宽度设置为我想要的任何值。

但是我怎样才能使不同屏幕尺寸的轮子尺寸相同呢？例如，我需要将车轮 Y 像素放置在屏幕之外（wheelPos 变量），但在 Nexus S 与 Nexus 7 上，我如何计算合适的 Y 值？

宽度也是如此，如何计算宽度以使其看起来完全相同？

我注意到 Catch android 应用程序[https://catch.com/](https://catch.com/) - 如果我扩展他们的滚轮菜单，它的大小在 Nexus S 和 Nexus 7 上是*相同*的 - 他们是如何做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:40:16.223

Catch 的开发者在这里。感谢您在此处向我们指出您的问题的电子邮件。

对于我们的滚轮菜单，其宽度和位置在 XML 布局文件中指定，使用`dp`/ `dip`（与密度无关的像素）。对于给定的尺寸，例如`300dp`，它在任何 Android 设备上都会显示为相同的尺寸；系统将根据设备的屏幕是低、中、高、xhigh 等密度来缩放该值。

所以，设置你的宽度和 Y 偏移`dp`，你应该很高兴。如果您愿意，您可以完全以编程方式完成：

```
final int wheelWidth = 300;
final int wheelYoffset = 64;

DisplayMetrics dm = getResources().getDisplayMetrics();

final float scaledWheelWidth = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, wheelWidth, dm);
final float scaledWheelYoffset = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, wheelYoffset, dm); 
```

我个人发现将我的所有 UI 维度作为资源来维护要容易得多。我`res/values/dimens.xml`要补充：

```
<dimen name="wheel_width">300dp</dimen>
<dimen name="wheel_y_offset">64dp</dimen> 
```

然后，如果我需要在代码中使用这些维度，我可以用一条线来抓取它们：

```
final float scaledWheelWidth = getResources().getDimensionPixelSize(R.dimen.wheel_width);
final float scaledWheelYoffset = getResources().getDimensionPixelOffset(R.dimen.wheel_y_offset); 
```

使用`dp`布局是使 Android UI 能够很好地扩展到不同设备的关键原则之一，对于您希望用户触摸/交互的任何东西都特别重要，因为您可以在开发过程中调整命中目标并放心无论您的应用在什么设备上运行，它们的物理尺寸都将相似。

# c++ - 为什么 glGenFramebuffers 不适用于 OpenGL 3.2？

> ID：13907270
> 
> 赞同：-1
> 
> 时间：2012-12-17T01:32:27.020
> 
> 标签：c++, opengl

当我使用 OpenGL 3.1 运行我的程序时，它可以正常工作，但是当我使用 OpenGL 3.2 时，`glGenFramebuffers`会出现段错误。我尝试使用`glewExperimental = GL_TRUE`，这允许程序运行而不会出现错误，但屏幕完全是黑色的。我还应该提到我正在使用 CG Toolkit 3.1 版。有什么想法可能会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T09:50:54.513

根据定义，glGenX 函数不应该崩溃——它们所做的只是给你一个可以在之后使用的空闲句柄。

因此，这听起来像是 GLEW 的问题。你有没有进入它看看你没有调用空指针函数？

# sql-server-2008 - tsql DATEDIFF 以分钟为单位调用，不四舍五入秒

> ID：13907274
> 
> 赞同：2
> 
> 时间：2012-12-17T01:32:42.603
> 
> 标签：sql-server-2008, tsql, datetime, datediff

我在 SQL Server 2008 中进行 DATEDIFF() 调用作为存储过程的一部分，它可能会返回小至 3 秒或更短的值。我希望格式为 MM:SS（即 3 秒时的 00:03）。我最初是在几分钟内使用这个电话：

`DATEDIFF(mi, SELECT MAX(startDate) FROM myTable , SELECT MAX(EndDate) FROM myTable)`

但是，这是四舍五入到最接近的分钟，因此会删除秒值。如何使用 DATEDIFF 实现上述指定的格式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T01:44:17.797

精确到秒：

```
DATEDIFF(ss, SELECT MAX(startDate) FROM myTable, SELECT MAX(EndDate) FROM myTable) 
```

[参考](http://msdn.microsoft.com/en-us/library/ms189794%28v=sql.105%29.aspx)。

注意：`DATEDIFF`不会给你一个“格式”。它只返回一个整数。所以你需要适当地转换/格式化。

我怀疑您最容易获得的最接近的是使用`CAST`格式`108`：

```
select convert(char(8), dateadd(ss, DATEDIFF(ss, SELECT MAX(startDate) FROM myTable, 
                                                 SELECT MAX(EndDate) FROM myTable)), 
               cast(0 as DateTime)) , 108) 
```

例如

```
select convert(char(8), dateadd(ss, DATEDIFF(ss, '2012-12-16 12:00:00', 
                                                 '2012-12-16 12:13:09'), 
                                cast(0 as DateTime)), 108) 
```

返回：

> ```
> 00:13:09 
> ```

[注意：如果要四舍五入到最近的 3 秒，可以修改：[TSQL：四舍五入到最近的 15 分钟间隔](http://mitch-wheat.blogspot.com.au/2011/02/tsql-round-to-nearest-15-minute.html)]

# ios - MPMmoviPlayerView 控制器导航栏中的 Backbarbutton 项

> ID：13907275
> 
> 赞同：0
> 
> 时间：2012-12-17T01:32:44.343
> 
> 标签：ios, uinavigationbar, mpmovieplayercontroller, uinavigationitem, backbarbuttonitem

我以编程方式向 MPMoviePlayerViewController 添加了一个导航栏。如何在导航栏中添加后退按钮项以导航到上一个视图控制器？

```
-(IBAction)playA1{

NSURL * urlA1 = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"A1"ofType:@"mp4"]]; 

MPMoviePlayerViewController *playercontrollerA1 = [[MPMoviePlayerViewController alloc] initWithContentURL:urlA1];
 playercontrollerA1.moviePlayer.repeatMode = MPMovieRepeatModeOne;
//    [self presentMoviePlayerViewControllerAnimated:playercontrollerA1]; //comment out if navigation bar code is added
playercontrollerA1.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

// ADD UI NAVIGATION BAR in EMBEDDED CONTROL STYLE

playercontrollerA1.moviePlayer.controlStyle = MPMovieControlStyleEmbedded;
UINavigationController *movieNavController = [[UINavigationController alloc] initWithRootViewController:playercontrollerA1];
playercontrollerA1.navigationItem.title=@"APone";
playercontrollerA1.navigationController.navigationBar.tintColor = [UIColor blackColor];

UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(favouriteButtonClicked:)];
playercontrollerA1.navigationItem.rightBarButtonItem = button;
[self presentViewController:movieNavController animated:YES completion:nil]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:55:48.547

我认为您使用 UINavigationController 作为错误的方法。当您调用 presentViewController 并将 UINavigationController 作为 ViewController 传递时，您不是在“导航”。你只是要求显示一个视图控制器。

“self”是 UIViewController 对吗？如果是，请将其更改为 UINavigationController 并调用 pushViewController 而不是 UIViewController 的 presentViewController 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:09:37.473

看一眼

*   [将自定义按钮添加到 UINavigationItem LeftBarButtonItem](https://stackoverflow.com/questions/13903939/adding-a-custom-button-to-a-uinavigationitem-leftbarbuttonitem/13904639#13904639)
*   [将返回按钮添加到导航栏](https://stackoverflow.com/questions/2846539/adding-back-button-to-navigation-bar?rq=1)

但我认为您提出问题的方式表明您可能对navigationController、navigationBar 和关联的viewController 的角色感到困惑。

您尚未将导航栏添加到 MPMoviePlayerViewController，而是相反 - 您已将 MPMoviePlayerViewController 添加到导航控制器 (movieNavController)，因为它是 rootViewController。MovieNavController 呈现导航栏

标准的后退栏按钮项目由导航栏中的 navController 提供，以通过包含的 viewController 堆栈导航您返回 - 以您的 rootViewController（导航堆栈中的第一个 viewController）结束。所以当你在栈上只有一个 rootViewController 时，没有什么可以返回，也没有 backBarButtonItem 出现。

如果您想从 navigationController 回到最初呈现它的实体，通常会在呈现对象中找到该控件。例如，您可能有一组包含在 UITabBarController 中的导航控制器 - 在这种情况下，从一个导航控制器到另一个导航控制器的导航是通过 UITabBarController 控制的。

如果您*确实*想向导航栏添加自定义按钮以使您从该导航控制器返回，那么上面链接的问题应该会给您一个良好的开端。

`[self presentViewController:movieNavController animated:YES completion:nil]`正如里卡多指出的那样，在这种情况下似乎没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T16:03:02.080

以下代码对我有用。

```
NSURL * urlA1 = [NSURL fileURLWithPath:[[NSBundle mainBundle]    pathForResource:@"A1"ofType:@"mp4"]];
MPMoviePlayerViewController *playercontrollerA1 = [[MPMoviePlayerViewController alloc] initWithContentURL:urlA1];
playercontrollerA1.moviePlayer.repeatMode = MPMovieRepeatModeOne;
playercontrollerA1.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
playercontrollerA1.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
playercontrollerA1.moviePlayer.controlStyle = MPMovieControlStyleNone;
playercontrollerA1.navigationItem.title=@"APone";
playercontrollerA1.navigationController.navigationBar.tintColor = [UIColor blackColor];
[self.navigationController pushViewController:playercontrollerA1 animated:YES]; 
```

# php - 我正在尝试获取当前工作目录中的所有照片。

> ID：13907276
> 
> 赞同：0
> 
> 时间：2012-12-17T01:32:45.313
> 
> 标签：php, foreach, gallery, jpeg, glob

我正在尝试在我的页面上为照相亭制作一个简单的画廊脚本。我有一个系留相机，它将图片放入由 MAMP 托管的本地站点上的文件夹中。每个文件夹是不同的组照片。照片的路径是 ('/images/ ****** ')。第一页搜索我的图像目录中的文件夹，并仅将第一张图像作为缩略图/链接返回到包含该组人的所有图像的所有文件夹。

我的结构如下。

第一页是：

```
$i = 1;
foreach (glob('images/*') as $dir) {
echo '<div id="strip' . $i . '" class="polaroid">';
// One div per directory                    
$p = 1;
foreach (glob($dir."/*.jpg") as $img) {
$p++;   
if ($p <= 2) {
echo "<a href='$dir'><img  src='$img'/></a>";       
} else {
}}
echo "</div>\n";
$i++; 
```

这部分工作并将用户带到其中包含 jpegs 的目录。其中还包含一个带有以下代码的 index.php 文件：

```
$dir = 'images/'.basename('/'.getcwd()).'/';
foreach (glob($dir."/*.jpg") as $img) 
echo $img;
{
echo "<img  src='$img'/>";      
} 
```

这就是失败的地方。当我回显 $dir 时，它显示当前的相对路径，但 foreach 语句中的 $dir 似乎返回空。这只是返回一个空的 img 标签。我出错的任何意见。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:48:05.687

如果要列出当前目录中的文件，则必须设置

```
$dir = '.'; 
```

您确实设置`$dir`为，`/images/225652/`但您已经在此目录中

# c - 如何在单击后不冻结处理信息的 GTK 按钮？

> ID：13907278
> 
> 赞同：1
> 
> 时间：2012-12-17T01:33:01.323
> 
> 标签：c, linux, ubuntu, gtk2

我猜我需要做线程，但在我教自己一些不好的做法之前，我想确保我以正确的方式去做。

基本上我有一个“聊天”应用程序，可以告诉它监听或 ping 收件人的 ip 地址：端口（在我目前的情况下只是 127.0.0.1:1300）。当我打开我的应用程序两次（第一个监听，第二个发送 ping）时，我选择一个并告诉它监听（这是一个 While 语句，它一直在监听直到它收到一个 ping 消息）和另一个会ping通它。它很有效**！**

问题是当我单击“侦听 ping”按钮时，它将进入胶合“向下”模式并“视觉”冻结，但是它将 UDP 数据包消息打印到控制台，所以我知道它实际上并没有被冻结。所以我的问题是如何制作它，以便我可以单击“收听”按钮并让它“收听”，同时有一个“工作”取消按钮，以便用户可以取消该过程，如果它花费的时间太长？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:34:29.227

这很可能是因为您使用了同步（阻塞）套接字 IO。您的服务器应用程序很可能会阻塞`recv()`/ `read()`，这会阻塞线程的执行，直到某些数据到达；然后它处理数据并返回阻塞状态。因此，您的按钮在按下时由 GTK 呈现。

基本上，有两种通用的方法来解决这个问题。第一个是线程。但我建议在更简单的应用程序中反对它；这种方法通常容易出错，并且很难正确实施。

第二种方法是异步 IO。首先，您可以使用`select()`/`poll()`函数等待多个 FD 之一发出信号（在诸如“收到数据”、“发送数据”、“接受连接”之类的事件上）。但是在主循环不能立即使用的 GUI 应用程序中（我不确定 GTK，但在许多 GUI 工具包中都是这种情况），这通常是不可能的。在这种情况下，您可以使用通用异步 IO 库（如**boost asio**）。使用 GLIB、IIRC，您可以为套接字交互创建通道 ( `g_io_channel_unix_new()`)，然后为它们分配回调 ( `g_io_add_watch()`)，当有趣的事情发生时将调用它们。

异步 IO 背后的想法非常简单：您要求操作系统做某事（发送数据、等待事件），然后您做其他重要的事情（GUI 交互等），直到您请求的事情完成（您必须能够接收此类事件的通知）。

因此，这就是您接下来可能要学习的内容：

*   `select()`/ `poll()`（后者一般比较好用）
*   提升 asio 库
*   GLIB 通道和异步 IO

# streaming - OpenAL 中的循环缓冲区

> ID：13907289
> 
> 赞同：2
> 
> 时间：2012-12-17T01:34:56.140
> 
> 标签：streaming, openal, soundbuffer

在 DirectSound 中，有一个非常独特的[循环缓冲区概念](http://books.google.ca/books?id=0TAE5me0GhwC&pg=PA135&lpg=PA135&dq=directsound+circular+buffer&source=bl&ots=_6JyGW_VOW&sig=vrhu57_gGQIUlu9yQKAmUZRG8cU&hl=en&sa=X&ei=Z3DOUOqeEqigyAGYsoD4Cw&ved=0CDUQ6AEwAQ#v=onepage&q=directsound%20circular%20buffer&f=false)

特别是有一个当前的读取位置、一个当前的写入位置，以及 GetPosition 和锁定缓冲区并开始写入的 clear 方法。

![在此处输入图像描述](../Images/cc9b924a1192329d3c84c0f813666520.png)

我正在 OpenAL 中寻找类似的概念，但我能找到的只是循环`AL_STREAMING`缓冲区，并使用`AL_SAMPLE_OFFSET`它来确定当前的读取位置（然后再写 15 个样本？）

OpenAL 文档现在已关闭，但可[在此处](http://web.archive.org/web/20110513043311/http://connect.creativelabs.com/openal/Documentation/OpenAL_Programmers_Guide.pdf)访问。

*声明应用程序在播放*时写入的声音缓冲区的安全方法是什么？我对使用循环流缓冲区是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:40:46.630

实际上，OpenAL 中的循环缓冲区与 DirectSound 有很大不同。

在 OpenAL 中，您必须一个接一个地对声音缓冲区进行**排队。**那时你真的只需要 2 个声音缓冲区，你只需不断地调用 alSourceQueueBuffers 和 alSourceUnqueueBuffers。

> 在源上排队缓冲区 要从源连​​续流式传输音频而不会中断，需要缓冲区排队。要使用缓冲区队列，缓冲区和源以正常方式生成，但不使用 alSourcei 将缓冲区附加到源。相反，使用函数 alSourceQueueBuffers 和 alSourceUnqueueBuffers。该程序可以使用 alSourceQueueBuffers 将缓冲区或一组缓冲区附加到源，然后在该源上调用 alSourcePlay。当源正在播放时，可以调用 alSourceUnqueueBuffers 来删除已经播放的缓冲区。然后可以用新数据填充这些缓冲区或丢弃这些缓冲区。然后可以使用 alSourceQueueBuffers 将新的或重新填充的缓冲区附加到播放源。只要队列中总是有新的缓冲区要播放，源就会继续播放。

# ruby-on-rails - rake 资产：由于看似正常的 database.yml 文件，预编译中止

> ID：13907290
> 
> 赞同：0
> 
> 时间：2012-12-17T01:35:01.123
> 
> 标签：ruby-on-rails, asset-pipeline

我试图预编译资产，但我得到了一个错误，我查了一下，它说要更改我的 database.yml 文件。美好的。现在我得到了这个：

```
$ bin/rake assets:clean
rake aborted!
(<unknown>): found character that cannot start any token while scanning for the next token at line 9 column 1
-- etc -- 
```

数据库.yml

```
default: &default
  adapter: postgresql
  encoding: unicode
  pool: 5
  username: username
  password:

development:
  <<: *default
  database: db/username_dev

test: &test
  <<: *default
  database: db/username_test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:35:01.123

当我将代码粘贴到问题中时想出了答案。问题是有标签缩进，这打破了它。

故事的寓意：对`database.yml`文件使用软制表符（2 个空格）。

# sql - 一行中最小和最大行的 SQL 值

> ID：13907301
> 
> 赞同：2
> 
> 时间：2012-12-17T01:36:19.967
> 
> 标签：sql, sql-server, database, tsql

我有一张价格变化的表格，我需要获得初始价格和最新价格。换句话说，我想在一行中为每个产品显示 min(StartDate) 和 max(StartDate) 的价格值。

表结构很简单：

```
ProductID, StartDate, Price 
```

期望的结果是

```
ProductId, StartDate, InitialPrice, LatestDate, LatestPrice 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T02:00:01.580

```
WITH latestPrice AS
(
   SELECT ProductID, StartDate, Price,
          ROW_NUMBER() OVER (PArtition BY ProductID ORDER BY StartDate DESC) rn
   FROM TableName
)
, initalPrice AS
(
  SELECT ProductID, StartDate, Price,
         ROW_NUMBER() OVER (PArtition BY ProductID ORDER BY StartDate ASC) rn
  FROM TableName  
)
SELECT  a.ProductID,
        b.StartDate, 
        b.Price InitalPrice, 
        c.StartDate LatestDate, 
        c.Price LatestPrice
FROM    (SELECT DISTINCT ProductID FROM tableName) a
        INNER JOIN initalPrice b
          ON a.ProductID = b.ProductID AND b.rn = 1
        INNER JOIN latestprice c
          ON a.ProductID = c.ProductID AND c.rn = 1 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/8c47c/18)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:14:51.730

```
(SELECT x.ProductId, x.MinStartDate, x.MinPrice, y.MaxStartDate, y.MaxPrice FROM (SELECT a.ProductId, a.MinStartDate, b.Price AS MinPrice FROM (SELECT ProductId, MIN(StartDate) AS MinStartDate FROM Products GROUP BY ProductId) a INNER JOIN Products b ON a.ProductId = b.ProductId AND a.MinStartDate = b.StartDate) x INNER JOIN (SELECT a.ProductId, a.MaxStartDate, b.Price AS MaxPrice FROM (SELECT ProductId, MAX(StartDate) AS MaxStartDate FROM Products GROUP BY ProductId) a INNER JOIN Products b ON a.ProductId = b.ProductId AND a.MaxStartDate = b.StartDate) y ON x.ProductId = y.ProductId 
```

免责声明：这是凭记忆，如果这不完全准确，我深表歉意。并且它假定 StartDate 是一个日期时间或不为每个 productId 重复。

希望这可以帮助。

# android - Android 和 MySQL 服务器通信

> ID：13907304
> 
> 赞同：-3
> 
> 时间：2012-12-17T01:36:52.853
> 
> 标签：android, mysql, ajax, json, web-services

我是 Android 编程的新手，目前我想开发一个 Android 应用程序，它需要能够将图片等数据和其他一些信息输入到数据库表中。

我已经阅读了关于 json 和 Webservices 的信息，但我仍然对此感到困惑。使用哪一个或如何启动它？我真的很高兴你们中的任何一个人能够就任何教程或期刊提出任何想法或建议，我可以在这些教程或期刊中使用它们来在这个项目上占得先机？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:03:28.230

您可以结合使用 jSON 和您的 web 服务来从您的 android 应用程序中完成 MySQL 通信，我目前使用了很多，因为我喜欢将我的网站本质上链接到同一个数据库。这是 jSON、MySQL 和php 后端你可能会觉得有用，让我知道它是否有用[MySQL 指南](http://www.anddev.org/networking-database-problems-f29/connecting-to-mysql-database-t50063.html)

# java - 为十六进制到二进制到十进制转换器组织 GUI？（爪哇）

> ID：13907308
> 
> 赞同：-2
> 
> 时间：2012-12-17T01:37:11.947
> 
> 标签：java, user-interface, layout, converter

我正在尝试编写一个将十六进制转换为二进制到十进制的程序，并且最多可以转换为 5 位十六进制数。转换是完全不同的事情，现在我坚持组织 GUI。该接口的标准是它必须具有：一个窗口（一个文本框）用于输入十六进制数，一个窗口输出等效的十进制数，并排成一排的5个窗口用于输出二进制数。每个十六进制数字的二进制等值必须排列在一个数组中，十六进制数可能是数组的第二维，十进制数必须使用“常用算法”计算。我查看了示例和教程，我想出的是基于华氏到摄氏度的转换器。我到目前为止的代码是：

```
package finalConverter;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Converter extends JFrame {

    private JTextField textField;
    private JButton convert;
    private JLabel hexadecimal, binary, decimal; 

    public Converter() {
        setTitle("Converter");
        setSize(400,400);
        setLocationRelativeTo(null);
        setResizable(false);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        getContentPane().add(new ConverterPanel());
    }

    protected class ConverterPanel extends JPanel{
        public ConverterPanel(){
            setLayout(new GridLayout(3,5));
            textField = new JTextField();
            convert = new JButton ("Convert");
            hexadecimal = new JLabel("Hexadecimal");
            binary = new JLabel ("Binary");
            decimal = new JLabel ("Decimal");
            add(hexadecimal);
            add(textField);
            add(convert);
            add(binary);
            add(decimal);
        }
    }
    protected class EventHandler implements ActionListener{
        public void actionPerformed(ActionEvent ev){
            if(ev.getSource() == convert){
                double result = ()
            }
        }
    }
    public static void main(String[] args) {
        new Converter().setVisible(true);
    }
} 
```

当我运行它时，它给了我一个有两列和三行的窗口。这不是我想要的，修改 newGridLayout 中的数字似乎并没有改变任何东西。我应该使用一些不同的布局来获得我想要的结果吗？还是因为我缺少文本字段及其输出二进制数的区域？我尝试使用 pack(); 在转换器窗口中：它只返回了一个较小的两列乘三行 GUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:23:11.227

您将需要使用为您提供更多灵活性的布局管理器...

![在此处输入图像描述](../Images/b95298e2ea160fb594f554ed0d9f92fe.png)

因为，`GridBagLayout`您可能还想考虑`MigLayout`或 JGoodies `FormLayout`。

```
public class TestConverter {

    public static void main(String[] args) {
        new TestConverter();
    }

    public TestConverter() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new ConverterPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class ConverterPane extends JPanel {

        private JTextField textField;
        private JButton convert;
        private JLabel[] binary;
        private JLabel decimal;

        public ConverterPane() {
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.anchor = GridBagConstraints.WEST;

            add(new JLabel("Hexadecimal"), gbc);
            gbc.gridy++;
            add(new JLabel("Decimal"), gbc);
            gbc.gridy++;
            add(new JLabel("Binary"), gbc);

            gbc.gridx++;
            gbc.gridy = 0;
            gbc.fill = GridBagConstraints.HORIZONTAL;
            gbc.gridwidth = 5;

            textField = new JTextField();
            textField.setHorizontalAlignment(JTextField.RIGHT);
            decimal = new JLabel("0");
            decimal.setHorizontalAlignment(JLabel.RIGHT);
            binary = new JLabel[]{
                new JLabel("00000000"),
                new JLabel("00000000"),
                new JLabel("00000000"),
                new JLabel("00000000"),
                new JLabel("00000000")
            };

            add(textField, gbc);
            gbc.gridy++;
            add(decimal, gbc);
            gbc.gridy++;
            gbc.fill = GridBagConstraints.NONE;
            gbc.gridwidth = 1;
            for (JLabel label : binary) {
                add(label, gbc);
                gbc.gridx++;
            }

            convert = new JButton("Convert");
            gbc.gridy++;
            gbc.gridx = 0;
            gbc.gridwidth = GridBagConstraints.REMAINDER;
            gbc.anchor = GridBagConstraints.CENTER;
            add(convert, gbc);
        }
    }
} 
```

# wordpress - Wordpress：按自定义字段过滤搜索结果

> ID：13907309
> 
> 赞同：1
> 
> 时间：2012-12-17T01:37:30.170
> 
> 标签：wordpress

我想按自定义字段过滤搜索结果

我有一个自定义字段 cp_city，我希望用户按城市过滤他们的结果，所以我在搜索框旁边添加了一个城市下拉菜单并更改查询以更改结果，但由于某些原因它不起作用。

这是我尝试过的

```
 <?php
        $city = isset($_GET['city']) ? trim($_GET['city']) : '';
        $s = $_GET['s'];

        $paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;
        query_posts( array('s' => $s, 'scat' => $scat, 'post_type' => 'ads', 'ignore_sticky_posts' => 1, 'meta_key' => 'cp_state', 'meta_value' => $city, 'meta_compare' => 'LIKE', 'paged' => $paged, 'orderby' => 'rand') );
        ?> 
```

我也试过

```
function SearchFilter($query) {
if ($query->is_search) {
    $query->set('meta_key','cp_state');
$query->set('meta_value','london');
}
return $query;
}

add_filter('pre_get_posts','SearchFilter'); 
```

但两次尝试都失败了。任何人都可以找出正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T14:53:51.150

你应该这样做：

```
<?php
$city = isset($_GET['city']) ? trim($_GET['city']) : '';
$s = $_GET['s'];

$paged = ( get_query_var('paged') ) ? get_query_var('paged') : 1;
query_posts( 
    array(
        's' => $s, 
        'scat' => $scat, 
        'post_type' => 'ads', 
        'ignore_sticky_posts' => 1, 
        'meta_query' = > array(
            'key' => 'cp_city', 
            'value' => $city, 
            'compare' => 'LIKE' 
        ),
        'paged' => $paged, 
        'orderby' => 'rand') 
    ); 
```

?>

# python - 试图制作一个简单的素数检查器，不会让我使用平方根。蟒蛇 3.2

> ID：13907315
> 
> 赞同：1
> 
> 时间：2012-12-17T01:39:22.897
> 
> 标签：python, numbers, primes, square-root

我有一个函数来检查一个数字是否是平方根：

```
def primeness(n):
    for x in range(2, (n**0.5) + 1):
        if n % x == 0:
            return False
    return True
def main():
    n = input('Type a digit \n')
    if primeness(n):
        print(n, 'is a prime number')
    else:
        print(n, 'is not a prime number')
main() 
```

但是，每当我运行它时，我都会收到此错误：

```
Traceback (most recent call last):
  File "C:/Users/Matt/Desktop/Python Stuff/test.py", line 12, in <module>
main()
  File "C:/Users/Matt/Desktop/Python Stuff/test.py", line 8, in main
if primeness(n):
  File "C:/Users/Matt/Desktop/Python Stuff/test.py", line 2, in primeness
for x in range(2, (n**0.5) + 1):
TypeError: unsupported operand type(s) for ** or pow(): 'str' and 'float' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T01:41:33.067

在 python3 中，`input`相当于旧的`raw_input`. 因此，您需要执行强制转换并将其转换为整数。

```
def main():
    n = int(input('Type a digit \n')) #right here
    if primeness(n):
        print(n, 'is a prime number')
    else:
        print(n, 'is not a prime number') 
```

如果您不能保证字符串是整数，则需要进行一些转换，例如`int(float(input()))`或使用`try-except`块来处理问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T01:45:11.497

您必须将输入字符串转换为 int

您也可能会遇到问题

```
for x in range(2, (n**0.5) + 1): 
```

`n ** 0.5`可能返回一个浮点数，而范围需要一个整数。通过舍入或将其转换为 int 来修复它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T04:16:11.500

您不需要计算*n*的平方根；您可以改为计算*x*的平方：

```
def primeness(n):
    x = 2
    while x * x <= n:
        if x % n == 0:
            return False
        x = x + 1
    return True 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T01:41:37.907

`input`返回一个字符串。不是一个整数。你需要先转换它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T02:27:27.373

```
python 3.2

#change this line:
for x in range(2, int(n**0.5) + 1): 
```

# objective-c - 从 Plist 中读取特定行

> ID：13907317
> 
> 赞同：0
> 
> 时间：2012-12-17T01:39:35.947
> 
> 标签：objective-c, string, random, plist

嗨，我一直在寻找，似乎无法找到我的问题的答案。我几乎没有编程经验，尤其是 Objective-C。
在我的应用程序中有一个`plist`带有一定数量的字符串。当用户点击一个按钮时，程序会计算 plist 中字符串的数量，在该范围内创建一个随机数，并应该读取 plist 中具有该特定数字的行。假设 plist 中有 20 个字符串，并且应用程序生成了数字 5，那么应用程序应该读取 plist 中的第 5 个字符串。

有没有办法做这样的事情，还是有另一种更有效的方法来完成这个？任何帮助是极大的赞赏。谢谢。

编辑：在我的 .h 文件中，我有

```
NSMutableArray* myArray;
int plistCount;
int randomNumber; 
}
@property (nonatomic, retain) NSMutableArray* myArray; 
```

在我的 .m 文件中，我有

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"myplist" ofType:@"plist"];
    NSMutableArray* tmpArray = [[NSMutableArray alloc] initWithContentsOfFile:path];
    self.myArray = tmpArray;
plistCount=[self.resorts count];
randomNumber=arc4random() % plistCount; 
```

我不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:05:24.917

```
NSString * randomString = self.myArray[arc4random_uniform(self.myArray.count)]; 
```

上面的代码是从 中选择一个随机元素`self.myArray`。

`arc4random_uniform`生成一个介于 0 和参数（排除）之间的数字，因此将`self.myArray.count`其用作边界，您将获得数组的有效随机索引。

**笔记**

您必须明确检查该数组永远不会为空，以使上述代码能够正常工作，因为 `arc4random_uniform(0)`返回`0`，因此如果为空数组，它将生成一个`NSRangeException`.

# r - R 有多少元素满足一个条件？

> ID：13907320
> 
> 赞同：12
> 
> 时间：2012-12-17T01:40:14.177
> 
> 标签：r

有没有更好的方法来计算结果中有多少元素满足条件？

```
a <- c(1:5, 1:-3, 1, 2, 3, 4, 5)
b <- c(6:-8)
u <- a > b
length(u[u == TRUE])
## [1] 7 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T01:42:38.967

sum 直接执行此操作，计算逻辑向量中 TRUE 值的数量：

```
sum(u, na.rm=TRUE) 
```

当然，没有必要为此构造 u ：

```
sum(a > b, na.rm=TRUE) 
```

也可以。 如果任何值是.`sum`将默认返回。 忽略总和中的值（对于逻辑或数字）。`NA``NA``na.rm=TRUE``NA`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-17T03:22:49.707

我一直为此使用表格：

```
a <- c(1:5, 1:-3, 1, 2, 3, 4, 5)
b <- c(6:-8)
table(a>b)
FALSE  TRUE 
    8     7 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-11-10T02:30:50.977

如果`z`仅由`TRUE`or组成`FALSE`，则只需

```
length(which(z)) 
```

# php - 使用电子邮件搜索linkedin个人资料

> ID：13907326
> 
> 赞同：2
> 
> 时间：2012-12-17T01:42:04.533
> 
> 标签：php, email, linkedin

我阅读了 LinkedIn API 并发现我们无法仅使用电子邮件地址进行搜索。还有另一种方法可以做到这一点吗？我尝试使用 Google 搜索搜索我的 LinkedIn 个人资料，但没有结果。我使用这种格式尝试了不同的电子邮件地址：`<firstname>.<lastname>@gmail.com`幸运的是我得到了结果。

我打算在 PHP 上执行此操作并嵌入到我的网站中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:03:22.130

这是因为在网上找到了**firstname.lastname 。**也许您正在寻找的东西尚不可用。

# javascript - 在 javascript 中将 cp1251 解码为 UTF-8

> ID：13907328
> 
> 赞同：3
> 
> 时间：2012-12-17T01:42:29.760
> 
> 标签：javascript, cp1251

如何在javascript中`cp-1251`解码`UTF-8`？

来自`cp-1251`数据源，需要从 js 客户端解码。

无法更改服务器端输出，因为它与第 3 方有关，并且由于某种原因，我不会使用任何服务器端编程将数据馈送转换为另一个数据馈送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-03T20:26:20.197

（假设您所说的“UTF-8”指的是 JS 字符串的原生编码......）

根据您的“cp-1251”数据的格式以及您需要支持的浏览器，您可以选择：

*   [TextDecoder.decode() API](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder/decode)（解码来自类型化数组的八位字节序列，例如`Uint8Array`） - 如果您使用 Web 套接字，则可以从中获取 ArrayBuffer 进行解码。
*   [https://github.com/mathiasbynens/windows-1251](https://github.com/mathiasbynens/windows-1251)对它称为“字节字符串”的东西进行操作（JS`String`由诸如 之类的字符组成`\u00XY`，其中 0xXY 是编码字节。
*   自己构建解码表（[示例](https://stackoverflow.com/a/41451528/1026)）

请注意，在大多数情况下（虽然不像 websocket 那样低级），在它最终成为 JS 字符串之前以正确的编码读取数据可能更容易（例如，您[甚至可以强制 XMLHttpRequest 使用某种编码如果服务器误报编码](https://stackoverflow.com/questions/8645170/is-there-a-cross-browser-alternative-to-the-xhr-overridemimetype-function)）。

# c# - 如何删除指定的图钉？

> ID：13907333
> 
> 赞同：2
> 
> 时间：2012-12-17T01:43:57.483
> 
> 标签：c#, bing-maps, pushpin

我将图钉动态添加到 Bing 地图。我还想删除某些（基于嵌入在其 Tag 属性中的值）。为了做到这一点，我是否需要识别图钉的 MapOverlay，如果需要，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T05:25:19.297

我不确定您在谈论哪个环境，但它看起来不像 Windows 8。

所以这里是windows phone 7.1的一些代码。这假设您的地图的子集合中只有图钉。如果您还有其他 UI 元素，则必须在使用 Tag 属性之前将其过滤掉；）

```
 Pushpin t1 = new Pushpin();
        t1.Tag = "t1";
        map1.Children.Add(t1);

        Pushpin t2 = new Pushpin();
        t2.Tag = "t2";
        map1.Children.Add(t2);

        Pushpin t3 = new Pushpin();
        t3.Tag = "t3";
        map1.Children.Add(t3);

        // LINQ query syntax
        var ps = from p in map1.Children 
                 where ((string)((Pushpin)p).Tag) == "t1" 
                 select p;
        var psa= ps.ToArray();
        for (int i = 0; i < psa.Count();i++ )
        {
            map1.Children.Remove(psa[i]);
        }
        // or using method syntax
        var psa2= map1.Children.Where(y => ((string)((Pushpin)y).Tag) == "t2").ToArray();
        for (int i = 0; i < psa2.Count(); i++)
        {
            map1.Children.Remove(psa2[i]);
        } 
```

map1 在应用程序主页中定义；像这样的 XAML：

```
 <my:Map  HorizontalAlignment="Stretch"  Name="map1" VerticalAlignment="Stretch"  /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T23:31:17.057

我认为这可能有效：

```
var pushPins = SOs_Classes.SOs_Utils.FindVisualChildren<Pushpin>(bingMap);
foreach (var pushPin in pushPins)
{
    if (pushPin.Tag is SOs_Locations)
    {
        SOs_Locations locs = (SOs_Locations) pushPin.Tag;
        if (locs.GroupName == groupToAddOrRemove)
        {
            bingMap.Children.Remove(pushPin);
        }
    }
} 
```

// 我从某个地方的某个人那里得到了这个，但忘记注明谁/在哪里

```
public static IEnumerable<T> FindVisualChildren<T>(DependencyObject depObj) where T : DependencyObject
{
    if (depObj == null)
    {
        yield break;
    }

    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObj); i++)
    {
        var child = VisualTreeHelper.GetChild(depObj, i);
        if (child != null && child is T)
        {
            yield return (T)child;
        }

        foreach (var childOfChild in FindVisualChildren<T>(child))
        {
            yield return childOfChild;
        }
    }
} 
```

# assembly - popf x86 组件

> ID：13907334
> 
> 赞同：2
> 
> 时间：2012-12-17T01:43:59.887
> 
> 标签：assembly, x86

指令中弹出多少字节：

```
 popf 
```

? Oracle 的文档指出，大小应指定为单词或长，方法是在指令末尾附加 w 或 l，但我正在查看的反汇编中不存在此类字母。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:47:19.883

> POPF/POPFD 弹出堆栈顶部的字或双字并将值存储在标志寄存器中。如果指令的操作数大小属性是 16 位，则弹出一个字并将值存储在 FLAGS 中。如果操作数大小属性为 32 位，则弹出一个双字并将值存储在 EFLAGS 中。

[来源](http://www.fermi.mn.it/linux/quarta/x86/popf.htm)

# ios - 尝试删除包含拒绝辞职的第一响应者的行

> ID：13907335
> 
> 赞同：6
> 
> 时间：2012-12-17T01:44:12.480
> 
> 标签：ios, uitableview, uitextfield, first-responder

我有一个基于 iOS 6 的项目，它实现了`UITableView`. 表格视图中的每个单元格都包含一个`UITextField`允许用户输入信息的单元格。如果用户清除文本字段，或从该字段中删除所有输入，（即`[textfield length] == 0`）当他们点击另一个单元格（文本字段）时，它会从表格视图中删除前一个单元格（文本字段），因为它是空的 - 这避免了空在表格视图中累积的单元格。

这一切都是使用一个名为的方法完成的，该方法`-textFieldEditingDidEnd:`会触发`UIControlEventEditingDidEnd`文本字段的事件：

```
- (void)textFieldEditingDidEnd:(UITextField *)textField {

    NSIndexPath *indexPath = // Index path of the row in the table view

    if ([textField.text length] == 0) {
        // Delete the cell from the table view
        [self.tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    }

} 
```

但是，当代码被触发时，应用程序崩溃并在控制台上显示以下消息：

`*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Attempt to delete row containing first responder that refused to resign'`

我以前从未见过这条消息，在网上搜索时似乎也没有特别多的引用。我将不胜感激有关如何解决此问题的任何建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T01:50:58.493

我以前从未见过该消息，但如果我看到它，我的直接冲动是：尝试延迟性能。即使像这样简单的事情也可能是一个有趣的实验：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [self.tableView deleteRowsAtIndexPaths:@[indexPath] 
     withRowAnimation:UITableViewRowAnimationAutomatic];
}); 
```

我的想法是，当文本字段仍在报告时（即`textFieldEditingDidEnd`仍在运行时），我们不要尝试删除行；让我们给 runloop 一个机会来完成它的循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-26T08:55:08.153

我也面临同样的问题。当键盘存在时，您需要先调用，`resignFirstResponder`然后再调用`UITableview`reload 方法

```
(void)textFieldDidEndEditing:(UITextField *)textField 
```

委托方法执行或内部：

```
(void)textFieldDidEndEditing:(UITextField *)textField{
    [tableview reloadData];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-13T18:52:21.843

我的崩溃`UIWebView`来自`UICollectionViewCell`. 以下修复了它：

`[self.view endEditing:YES]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-26T09:29:40.173

我也遇到了同样的问题。即使调用 "resignFirstResponer" 和 "endEditing" 后，发现它崩溃了。

当我尝试使用@matt 的方法时，它运行良好。谢谢马特。

似乎因为我们将“deleteRowsAtIndexPaths:”添加到 GCD 队列中，队列将确保队列中的前一个任务完成，然后只启动 main_queue 中的下一个任务。因此无需添加任何延迟。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-21T06:20:51.257

我遇到了同样的`NSInternalInconsistencyException`例外。我的解决方案如下：

```
textView.selectedTextRange = nil;    // clear the selected text
[textView resignFirstResponder]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-22T22:58:47.483

从键盘隐藏通知中删除`UITableViewCell`包含 的时出现此错误。`UITextView``UIKeyboardWillHideNotification`

修复是将逻辑移入`UIKeyboardDidHideNotification`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-10-29T17:26:46.210

当我的方法 textFieldShouldEndEditing 在某些情况下返回 NO 时，我遇到了这个问题

# php - header.tpl 的 IF/ELSE

> ID：13907340
> 
> 赞同：1
> 
> 时间：2012-12-17T01:44:38.920
> 
> 标签：php, if-statement, smarty

我正在一个对 SEO 不友好的网站上工作。具体来说，header.tpl 会自动插入到每个页面中，无法根据页面内容更改它。即，类别 = 浴室还是类别 = 厨房等。

所以我需要一个 if/else 命令，但在这种情况下很难弄清楚，加上随之而来的变化。

在portfolio_category.php页面上的代码如下，需要根据vf_category改变的是parts/header.tpl（我可以创建Bathroomheader.tpl、Kitchensheader.tpl等让相关的tpl有相关的Title和Description标签页面）。

```
<?php
$vc_root_friendly = '.'; 
$vc_root_site = '.'; 
include_once("$vc_root_site/config.php");

include_once("$vc_includes_folder/IT.php");
$template_body = new HTML_Template_IT();
$template_body->loadTemplateFile("tpl_portfolio_category.html");

include_once("$vc_includes_folder/images.php");

if(!isset($_REQUEST['vf_category'])){
header("location:portfolio.php");
die();
}

//Show header
$template_header = new HTML_Template_IT();
$template_header->loadTemplateFile("parts/header.tpl",true,false);
$template_body->setVariable('header', $template_header->get());

//Show footer
$template_footer = new HTML_Template_IT();
$template_footer->loadTemplateFile("parts/footer.tpl",true,false);
$template_body->setVariable('footer', $template_footer->get());

$template_body->setVariable("image_category", $_REQUEST['vf_category']);

//Select photos for this category
etc. 
```

使事情复杂化的是上面代码中引用了另一个页面：

```
tpl_portfolio_category.html 
```

这个页面也有自己的 header.tpl 包括：

```
<? include_once 'parts/header.tpl'; ?>
{header} 
<table width="100%" cellspacing="0" cellpadding="0" border="0">
<tr> 
<td  class="main"><h1><span class="firstLetter">{image_category}</span></h1>
  <p>
  </p>
  <table height="89" border="0" align="center" cellpadding="0" cellspacing="0">
    <tr> 
      <td colspan="7">&nbsp;</td>
    </tr>
    <!-- BEGIN block_thumb -->
    <tr> 
      <td width='180' height="120" background="./images/thumb-bg.gif"> <div             

align="center">{thumb1}</div></td>
      <td width="10">&nbsp;</td>
      <td width='180' background="./images/thumb-bg.gif"> <div align="center">{thumb2}    

</div></td>
      <td width="10">&nbsp;</td>
      <td width='180' background="./images/thumb-bg.gif"> <div align="center">{thumb3}

</div></td>
      <td width="10">&nbsp;</td>

    <td width='180' background="./images/thumb-bg.gif"> <div align="center">{thumb4}  
  </div></td>
    </tr>
    <tr valign="bottom"> 
      <td height="3"></td>
      <td height="3"></td>
      <td height="3"></td>
      <td height="3"></td>
      <td height="3"></td>
      <td height="3"></td>
      <td height="3"></td>
    </tr>
    <!-- END block_thumb -->
  </table>
  <br> 
  <img src="images/spacer.gif"></td>
  </tr>
  </table>
  {footer} 
```

任何指导将不胜感激！我只是想根据从数据库中提取的 vf_category 将parts/header.tpl 更改为parts/Bathroomheader.tpl 或parts/Kitchenheader.tpl。但这让我发疯。

在此先感谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:04:28.060

有几种方法可以做到这一点，但为了最大限度地减少您要更改的文件数量，我建议您： a) 从数据库中提取变量并将其分配给 smarty，在您的第一个 php 文件中，对于两者标题和正文：

```
//Assuming you have retrieved $vf_category from your database;
$template_header->setVariable('vf_category', $vf_category);
$template_body->setVariable('vf_category', $vf_category); 
```

b) 编辑您的文件 header.tpl 并在顶部附加以下代码：

```
{if 'vf_category' == 'some_value'}
    {include file="parts/Kitchenheader.tpl"};
{elseif 'vf_category' == 'other_value'}
    {include file="parts/Bathroomheader.tpl"};
{else}
    //the rest of the header.tpl code goes here
{/if} 
```

# scala - 如何在 scala XML 解析中处理 nil？

> ID：13907344
> 
> 赞同：2
> 
> 时间：2012-12-17T01:45:11.170
> 
> 标签：scala, scala-xml, xml-nil

我有一个代表我需要解析并保存在数据库中的模型的 XML 文档。在某些字段中，它可能具有由 xsi:nil 指示的 NULL 值。像这样

```
<quantity xsi:nil="true"/> 
```

对于解析，我使用 scala.xml DSL。问题是我找不到任何方法来确定某事是否为零。这： (elem \ "quantity") 只是返回一个空字符串，然后当我尝试将其转换为数字时它会爆炸。用 Option 包装也无济于事。

有没有办法从那个 XML 片段中获取 None、Nil 甚至 null？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T02:02:37.807

在这种情况下，您可以将命名空间 URI 与 XML with`attribute`方法一起使用，以获取“xsi:nil”属性中的文本。

这是一个工作示例：

```
scala> val xml = <quantity xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
xml: scala.xml.Elem = <quantity xsi:nil="true" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"></quantity>

scala> xml.attribute("http://www.w3.org/2001/XMLSchema-instance", "nil")
res0: Option[Seq[scala.xml.Node]] = Some(true) 
```

如果您认为空节点是 None，那么您甚至不需要打扰该属性。只需过滤掉其中没有任何文本的节点，并使用它`headOption`来获取值。

```
scala> val s1 = <quantity xsi:nil="true">12</quantity>
s1: scala.xml.Elem = <quantity xsi:nil="true">12</quantity>

scala> val s2 = <quantity xsi:nil="true"/>
s2: scala.xml.Elem = <quantity xsi:nil="true"></quantity>

scala> s1.filterNot(_.text.isEmpty).headOption.map(_.text.toInt)
res10: Option[Int] = Some(12)

scala> s2.filterNot(_.text.isEmpty).headOption.map(_.text.toInt)
res11: Option[Int] = None 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-12T18:05:32.867

如果您使用[xtract](https://github.com/lucidsoftware/xtract)，您可以结合使用 filter 和 otpional：

```
(__ \ "quantity").read[Node]
  .filter(_.attribute("http://www.w3.org/2001/XMLSchema-instance", "nil").isEmpty)
  .map(_.toDouble).optional 
```

请参阅[https://www.lucidchart.com/techblog/2016/07/12/introducing-xtract-a-new-xml-deserialization-library-for-scala/](https://www.lucidchart.com/techblog/2016/07/12/introducing-xtract-a-new-xml-deserialization-library-for-scala/)

免责声明：我在 Lucid Software 工作，并且是 xtract 的贡献者。

# jquery - 如何将此方法附加到新附加的元素？

> ID：13907349
> 
> 赞同：0
> 
> 时间：2012-12-17T01:46:18.393
> 
> 标签：jquery, jquery-mobile, append, swipe

因此，当我将它附加到元素时，此方法`$('#swipeMe li').swipeDelete();`可以正常工作，但是当我使用附加新列表项时

```
$('.submitAsset').click(function(){
    var asset = $('#asset_number').val();
    $('.accounts  #swipeMe').append('<li data-swipeurl="#"><a href="#">' + asset + '</a></li>');
    $(this).swipeDelete();
    $('#assetForm').slideUp();    
}); 
```

它没有生效。如何正确附加此插件，以便添加到列表中的项目也可以滑动删除？谢谢。

到目前为止，没有一个答案有效。我一定是解释错了。这是我的html：

```
<div class="accounts">
<h2>CC Acounts </h2>
<div id="CreditCards">
        <ul id="swipeMe">
            <li ><a href="#">This works</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>
            <li data-swipeurl="#"><a href="#">This works<</a></li>                
            <li >This doesn't</li>      
        </ul>
</div> 
```

和 JS：

```
 $('#swipeMe li').swipeDelete();

    $('#swipeMe li').on('click', function(){
    $(this).trigger('swiperight')
        }); 
```

同样，html 中所有添加的元素都运行良好，但没有一个附加元素具有 swipeDelete 功能。

这是整个插件：

```
/*
Name: jquery.swipeButton.js
Author: Andy andyMatthews
Website: http://andyMatthews.net
Version: 1.2.1
*/
(function($){

$.fn.swipeDelete = function(o){

    o = $.extend( {}, $.fn.swipeDelete.defaults, o );

    return this.filter('[data-swipeurl]').each(function(i, el){
        var $e = $(el);
        var $parent = $(el).parent('ul');

        $e.on(o.direction, function ( e ) {

            // reference the current item
            var $li = $(this);
            var cnt = $('.ui-btn', $li).length;

            // remove all currently displayed buttons
            $('div.ui-btn, .' + o.btnClass, $parent).animate({ width: 'toggle' }, 200, function(e) {
                $(this).remove();
            });

            // if there's an existing button we simply delete it, then stop
            if (!cnt) {
                // create button
                var $swipeBtn = $('<a>' + o.btnLabel + '</a>').attr({
                                    'data-role': 'button',
                                    'data-mini': true,
                                    'data-inline': 'true',
                                    'class': (o.btnClass === 'aSwipeBtn') ? o.btnClass : o.btnClass + ' aSwipeBtn',
                                    'data-theme': o.btnTheme,
                                    'href': $li.data('swipeurl')
                                })
                                .on('click tap', o.click);

                // slide insert button into list item
                $swipeBtn.prependTo($li).button();
                $li.find('.ui-btn').hide().animate({ width: 'toggle' }, 200);

                // override row click
                $('div a:not(' + o.btnClass + ')', $li).on('click.swipe', function(e){
                    e.stopPropagation();
                    e.preventDefault();
                    $(this).off('click.swipe');
                    $li.removeClass('ui-btn-active').find('div.ui-btn').remove();
                });

            }

        });

    });
};

$.fn.swipeDelete.defaults = {
    direction: 'swiperight',
    btnLabel: 'niko',
    btnTheme: 'e',
    btnClass: 'aSwipeBtn',
    click: function(e){
        e.preventDefault();
        $(this).parents('li').slideUp();
    }
};

 }(jQuery)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T01:51:43.857

在您的`click()`处理程序`this`中是单击的项目，因此`$(this).swipeDelete();`将方法应用于`.submitAsset`元素，而不是新添加的 li 元素。要调用`.swipeDelete()`您要附加的项目，请执行以下操作：

```
$('.submitAsset').click(function(){
    var asset = $('#asset_number').val();
    $('<li data-swipeurl="#"><a href="#">' + asset + '</a></li>')
        .appendTo('#swipeMe').swipeDelete();
    $('#assetForm').slideUp();    
}); 
```

我没有先选择`#swipeMe`元素并使用`.append()`，而是将其更改为先创建新的 li 元素，然后再创建`.appendTo()`，因为这样您就可以引用新元素并可以调用`.swipeDelete()`它。

请注意，您可能会将`'.accounts #swipeMe'`选择器更改为 just `'#swipeMe'`，因为应该只有一个具有该 id 的元素（除非您希望代码无效，除非该元素在一个`.accounts`元素中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T01:53:02.680

您将需要定位新创建的元素。您正在尝试定位`this`哪个元素是您点击的触发新元素创建的元素

代替：

```
$(this).swipeDelete(); 
```

和

```
$('#swipeMe li').last().swipeDelete(); 
```

# java - JAVA 中的单词回文（StringIndexOutOfBoundsException）

> ID：13907352
> 
> 赞同：-2
> 
> 时间：2012-12-17T01:47:03.847
> 
> 标签：java, loops, for-loop

我想知道是否缺少某些东西。如果我输入“race car”，它必须显示回文，如果我输入“string beans”，它必须不显示回文，但是当我运行代码时它有一个错误。

> 线程“主”java.lang.StringIndexOutOfBoundsException 中的异常：字符串索引超出范围：praktis.Palindrome.main(Palindrome.java:11) 的 java.lang.String.charAt(String.java:686) 的 3

```
 public static void main (String args[]) {
        String word = JOptionPane.showInputDialog("Enter a String:");
        String finalword = word.replaceAll(" ","").toLowerCase();

        for (int x = word.length(); x >= word.length()-1; x--) {
        //this is my line 11 // 
                 finalword.charAt(x);
       }
            if(word.equals(finalword)) {
                JOptionPane.showMessageDialog(null, "Palindrome");
            }
            else {
                JOptionPane.showMessageDialog(null, "Not a Palindrome");
            }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T01:49:45.063

`for (x = word.length()-1; x >= 0; x--)`

编辑：

 ````
String word = JOptionPane.showInputDialog("Enter a String:");
        String finalword = "";
        int x;
        for (x = word.length()-1; x >= 0; x--) {
            finalword = finalword + word.charAt(x);
        }
        if (word.equals(finalword)) {
            JOptionPane.showMessageDialog(null, "Palindrome");
        } else {
            JOptionPane.showMessageDialog(null, "Not a Palindrome");
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T01:49:25.703

出现问题是因为您正在索引长度；你应该从零索引到长度减一：

```
for (x = word.length()-1; x >= 0 ; x--)
    .... 
```

此外，调用`charAt(x)`不会更改字符串（事实上，您在字符串上调用的任何方法都无法更改它：Java 中的字符串是不可变的）。如果您要反向组合单词，请考虑使用`StringBuilder`，并在反向迭代原始单词时向其附加字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T01:53:29.483

由于空格被替换，您正在使用`word.length()`在`finalword`when`finalword`将具有不同长度的字符。此外， a`String`的索引从 0 到`length - 1`- 与数组完全一样，因此将其索引`length()`为超出范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T01:48:43.667

由于 charAt() 是 0 索引的，因此 charAt(word.length()) 将是字符串末尾的一个字符。只需从 word.length()-1 开始 x。希望有帮助！`

# php - while 循环中的复选框作为数组和 $_POST

> ID：13907355
> 
> 赞同：1
> 
> 时间：2012-12-17T01:47:22.113
> 
> 标签：php, html

我已经浏览了帖子并搜索了几个小时，但我找不到解决方案。

表单处于`while`循环中（从数据库中提取数据）。对于每个结果，都会在表格中形成一个“行”。每行有多个输入和表单（更新、删除等）。现在每一行都有一个复选框。复选框表单是最后一个，所以我可以放置：

```
<input type="submit" value="Delete Selected">
</form> 
```

在 while 循环之外，因此按钮本身不会循环。

复选框：

```
<input type="checkbox" name="chkdel[<?=$i?>]" value="<?=$accnt[userId]?>"> 
```

是在同一个循环中`$i`。`++$i``while`

此复选框的形式：

```
<form method="post" action="<?=$PHP_SELF?>?gm=<?=$gm?>&amp;act=deleteselected"> 
```

该动作用于`$_REQUEST`为任务使用特定的 if 表达式（更新、删除等）。

然而`$_POST`，数组中只有一个值。该值与`$i`应有的值一致。

此外，如果选中的复选框是生成的行列表中的最后一个，它只会发布一个值。

```
Array ( [chkdel] => Array ( [3] => bonaxcel03 ) ) 
```

我如何让它发布所有选定的复选框值而不是最后一个？

```
 <tr>
        <form method="post" action="?gm=edit_account&amp;page=1&amp;src=bonaxcel&amp;src_cdn=Account&amp;filter=&amp;act=confirm">
        <input type="hidden" name="usernum" value="150229">
        <input type="hidden" name="userid" value="bonaxcel02">
        <td class="alt1" style="padding: 4px;" width="15%">bonaxcel02</td>
        <td class="alt1" style="padding: 4px; text-align: center;" width="15%">
        <input class="smallinput" type="text" name="userpwd" value="09462921792a"></td>
        <td class="alt1" style="padding: 4px; text-align: center;" width="15%">
        <input class="smallinput" type="text" name="uilock_pw" value="71134744a"></td>
        <td class="alt1" style="padding: 4px; text-align: center;" width="15%">
        <input class="smallinput" type="text" name="usercash" value="5"></td>
        <td class="alt1" style="padding: 4px; text-align: center;" width="20%">2012-12-10 07:11:19           </td>
        <td class="alt1" style="padding: 4px; text-align: center;" width="10%">
        <input type="submit" value="Update" class="btn_list_update"></td></form>

        <td class="alt1" style="padding: 4px; text-align: center;" width="10%">         
        <form method="post" action="?gm=edit_account&amp;page=1&amp;src=bonaxcel&amp;src_cdn=Account&amp;filter=&amp;act=delete">
        <input type="hidden" name="userid" value="bonaxcel02">
        <input type="submit" value="Delete" class="btn_list_delete">
        </form>
        <form method="post" action="?gm=edit_account&amp;page=1&amp;src=bonaxcel&amp;src_cdn=Account&amp;filter=&amp;act=deleteselected">
        <input type="checkbox" name="chkdel[2]" value="bonaxcel02">

        </td>

    </tr>

        <input type="submit" value="Delete Selected">
        </form> 
```

此表单将针对每个 while 结果重复（在几页上可能有数千个，带有过滤选项）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:04:55.557

如果您不需要根据结果的密钥，请使用`chkdel[]`insted of`chkdel[<?=$i?>]`

# iphone - iOS：如何在 iPhone 上触发用户强制退出崩溃？

> ID：13907356
> 
> 赞同：1
> 
> 时间：2012-12-17T01:47:42.937
> 
> 标签：iphone, ios, crash

WWDC 视频（WWDC 2010 Session 317 - Understanding Crash Reports on iPhone OS）说崩溃日志中的错误代码 0xdeadfa11 表示用户强制退出崩溃，但我从未见过这个错误代码。如何触发用户强制退出崩溃？

编辑：我想知道手动方式和编程方式：P

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-21T19:41:10.273

显然没有编程方法可以做到这一点，因为异常类型是基于用户活动的。

为了模拟崩溃，苹果文档说如下

> 异常代码 0xdeadfa11 表示应用程序已被用户强制退出。当用户首先按住开/关按钮直到出现“滑动关机”，然后按住主页按钮时，会发生强制退出。可以合理地假设用户这样做是因为应用程序没有响应，但不能保证 - 强制退出将适用于任何应用程序。

我已经在 iphone 5 (iOS 7) 设备上模拟了这个并且工作正常。

![在此处输入图像描述](../Images/f3875530188e19e66a852572e7e85803.png)

# session - 从标准输入读取时防止 vim 加载会话

> ID：13907358
> 
> 赞同：4
> 
> 时间：2012-12-17T01:47:52.300
> 
> 标签：session, vim, stdin

我最近一直在定制我的很多东西，并且喜欢它给我`.vimrc`的力量和便利。`:mksession`我目前在我`.vimrc`的自动加载会话中有以下内容：

```
function! LoadSession()                                                              
  if argc() == 0 && ! &diff                                                                                                                                                                                                                
    let g:sessiondir = $HOME . "/.vim/sessions" . getcwd()                           
    let g:sessionfile = g:sessiondir . "/session.vim"                                
    if (filereadable(g:sessionfile))                                                 
      exe 'source ' g:sessionfile                                                    
    else                                                                             
      echo "No session loaded." + argc() + argv()                                    
    endif                                                                            
  else                                                                               
    let g:sessionfile = ""                                                           
    let g:sessiondir = ""                                                            
    call ResCur()                                                                    
  endif                                                                              
endfunction 
```

然后我用`au VimEnter * nested :call LoadSession()`. 这适用于大多数情况，除非 vim 从`stdin`. 在这种情况下，会话仍在加载，但是我想防止这种情况发生。我原以为`argc() == 0`条件就足够了，但似乎`-`正在调用该 vim 来读取`stdin`原因`argc()`而不返回 0。大便！;]

我已经尝试了各种各样的事情`argv(0)`（在这种情况下它是空的 - 为什么？），试图找到识别 vim 正在读取的方法`stdin`（它显示了它正在这样做的消息，但我无法弄清楚如何利用它）等，但到目前为止还没有运气。

我确定我在这里遗漏了一些非常明显的东西，但是谷歌和 vim`:help`并没有让我到任何地方，所以我希望这里的某个善良的灵魂可以为我阐明这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-31T11:12:14.217

我发现的作品有

```
autocmd StdinReadPre * let g:my_is_stdin = 1 
```

在你的`.vimrc`，然后`exists("g:my_is_stdin")`在你的会话保存/加载功能中测试。请注意，这些也必须通过`autocmd`事件运行`VimLeave`/`VimEnter`才能使该方案起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T02:07:19.820

我使用的[session.vim 插件提供了扩展的会话处理。](http://www.vim.org/scripts/script.php?script_id=3150)其中，它询问是否应该在 Vim 启动时恢复以前保存的会话。

但是，除非您需要插件的其他功能，否则您使用映射触发还原的解决方法也可能很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T14:25:43.583

在 Vim 启动时我一直在摆弄加载会话，最终认为这不是一个好主意，主要是因为它不适用于插件。

我最终添加了一些用于保存和恢复会话的映射。这样做的好处是，当您进行快速编辑时，您不必在会话中搞乱。

```
map <leader>ss :call CustomSessionSave()<CR>
map <leader>sl :call CustomSessionRestore()<CR>
map <leader>sd :call CustomSessionDelete()<CR> 
```

也许这有帮助

# python - 在 Django-ORM 中更正 latin-1 编码的 UTF-8

> ID：13907359
> 
> 赞同：2
> 
> 时间：2012-12-17T01:47:53.637
> 
> 标签：python, mysql, django, django-orm

我在遗留 MySQL 数据库之上设置了一个 django-admin。

数据库声明它是 latin-1 编码的。数据库中输入的一些数据确实是 latin-1，但有些实际上是 UTF-8。这显示为损坏的字符，例如： Ã© â‚¬ Ã¤ Ã¶

遗留应用程序做了一些黑魔法来隐藏这些错误，我无法修改数据库。

我找到了一个 Python 库`ftfy`，可以将 latin-1 损坏的 UTF-8 转换为真正的 UTF-8，例如上面的字符被翻译为“é € ä ö”。我想在从数据库加载的所有数据`django.db.models.CharField`上使用它。`django.db.models.TextField`怎么做？

我试图子类化`django.db.models.CharField`，`django.db.models.TextField`但不知道从哪里截取数据库中的数据。最佳解决方案类似于`FTFYCharField`始终纠正从数据库中获取的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:53:30.597

我知道这可能是关闭...但也许可以防止一些头痛

在您进行任何与“unicode”相关的更改之前，请先了解 unicode 的含义，并注意您所写的“Ã¶”==ö 仅在 unicode 由 UTF-8 方法编码时才是正确的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T02:11:23.600

假设只读，我认为您正在寻找的是[编写自定义模型字段](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/)。特别是，请查看[将数据库值转换为 Python 对象](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#converting-database-values-to-python-objects)部分。在该`.to_python()`方法中，您可以对从数据库读取的任何/所有字段执行任何操作。

如果您还需要编写（并保持怪异），请参阅[保存前预处理值](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#preprocessing-values-before-saving)部分。

# c# - c#退格模拟器 - 删除整个单词而不仅仅是一个字母？

> ID：13907362
> 
> 赞同：1
> 
> 时间：2012-12-17T01:48:30.613
> 
> 标签：c#

我正在编写一个简单的 C# 程序，当我按下“ctrl+g”时，我希望我的程序自动删除任何程序中光标左侧的字符（例如：chrome 浏览器、word 文档、powerpoint 文档等... ）。我已经为“ctrl+g”安装了一个全局钩子，它工作正常。我正在使用从 codeproject 中找到的键盘模拟器：http: [//www.codeproject.com/Articles/28064/Global-Mouse-and-Keyboard-Library](http://www.codeproject.com/Articles/28064/Global-Mouse-and-Keyboard-Library) 我的问题是，当我像这样模拟退格时：

```
KeyboardSimulator.KeyPress(Keys.Back); 
```

整个单词被删除，而不仅仅是光标左侧的字符。例如，如果我在一个带有以下文本行的 Microsoft Word 文档中：“Happy new year”，如果我的光标位于“year”的末尾并且按 ctrl+g，我的程序会删除“year”并将光标就在“new”的右边，而不是只删除“year”的字母“r”。我也尝试过其他模拟器，结果相同。有没有人有解决方案或知道我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T01:55:50.480

显然，Ctrl+Backspace 通常意味着在 Windows 中删除整个单词。当您按下 Ctrl+g 并且您的钩子模拟退格键时，程序会看到 Ctrl+Backspace，因为 Ctrl 已按下。

# opengl - 当 width%4 == 0 时，OpenGL glReadPixels 不返回？

> ID：13907363
> 
> 赞同：2
> 
> 时间：2012-12-17T01:48:40.927
> 
> 标签：opengl

我正在使用 glReadPixels 进行一些工作，它的行为很奇怪。特别是，我运行以下测试：

```
unsigned char pixels[ 512 * 512 * 4 ];

int mid = 0;
while (mid < 512) {
  printf("Test %d : ", mid);
  memset(pixels, 0, 512*512*4);
  pixels[1] = 0x42;
  glReadPixels( 0, 0, mid, 511, GL_RGBA, GL_UNSIGNED_BYTE, pixels);
  printf(" %x ", pixels[1]);
  if (pixels[0] == 0) {
    printf("0\n");
  } else {
    printf("1\n");
  }
  mid++;
} 
```

带输出：

```
Test 0 :  42 0
Test 1 :  67 1
Test 2 :  67 1
Test 3 :  67 1
Test 4 :  42 0
Test 5 :  67 1
Test 6 :  67 1
Test 7 :  67 1
Test 8 :  42 0
Test 9 :  67 1
Test 10 :  67 1
Test 11 :  67 1 
```

我已经在整个屏幕上绘制了数据（0x67 是我正在绘制的颜色的正确字节）所以我不确定这里发生了什么。

我真正想要的主要事情是在我无法在 GPU 上访问的数组中获取当前屏幕上每个像素的副本。我不确定这是否是获取它的“正确”方式，但这是我所知道的唯一方式。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:45:23.793

您可以使用此代码首先创建一个空纹理（在更新循环之前只使用一次）：

```
GLuint texID;

GLubyte *data = (GLubyte*)malloc(width*height*4*sizeof(GLubyte));
ZeroMemory(data,width*height*4*sizeof(GLubyte));

glGenTextures(1, (GLuint*)texID);
glBindTexture(GL_TEXTURE_2D, texID);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_NEAREST);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_NEAREST);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, data); 
```

然后使用以下命令将当前缓冲区复制到您的纹理（在每个更新循环结束时使用它，就在交换缓冲区之前）：

```
glBindTexture(GL_TEXTURE_2D,texID);
glCopyTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 0, 0, width, height, 0); 
```

最后用它来检索一个带有 RGBA 像素数据的数组（就在前一位之后）：

```
GLubyte *pixels = (GLubyte*)malloc(width*height*4*sizeof(GLubyte));
glBindTexture(GL_TEXTURE_2D,texID);
glGetTexImage(GL_TEXTURE_2D, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixels); 
```

当然，这完全取决于你想用这个像素数据做什么。这可能对你没有帮助，但我希望它会;)。

# ios - 如何在IOS程序上以后台模式关闭音乐？

> ID：13907365
> 
> 赞同：0
> 
> 时间：2012-12-17T01:49:10.210
> 
> 标签：ios, background-music

我制作了一个 iOS 程序来使用`AVAudioPlayer`在后台播放音乐。但我不知道如何在一段时间后关闭音乐。我尝试`UILocalNotification`在方法中使用停止音乐：

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notification 
```

但该方式只有在用户收到通知并点击关闭后才有效！

如何在一定时间后自动停止音乐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:22:29.650

如果您使用 AVPlayer 而不是 AVAudioPlayer 您可以使用 `addBoundaryTimeObserverForTimes:queue:usingBlock:`

我已经用 AVQueuePlayer （它是 AVPlayer 的子类）尝试过这个并且它有效。

尝试这样的事情：

```
id observer = [avPlayer addBoundaryTimeObserverForTimes:[NSArray arrayWithObject:[NSValue valueWithCMTime:CMTimeMake(60, 1)]] queue:NULL usingBlock:^{
        [avPlayer pause];
    }]; 
```

稍后的某个地方：

```
[avPlayer removeTimeObserver:observer]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:14:53.710

我很想被证明是错误的，但我相信你要求做的事情可能是不可能的。我的印象是，如果用户真的点击 Home 按钮将你的应用程序发送到后台，它就不能作为“睡眠定时器”，因为你不能运行定时器。苹果自己的应用程序可以做这种事情，但他们有特权。

例如，看看这个应用程序：

[https://itunes.apple.com/us/app/music-sleep-timer/id320583424?mt=8](https://itunes.apple.com/us/app/music-sleep-timer/id320583424?mt=8)

看看他是怎么说的，“记得把这个应用程序放在前台！” 显然这是因为一旦应用程序处于后台，计时器就会停止工作。

您最好建议用户使用 Apple 时钟应用程序中的倒数计时器。它可以关闭您的音乐并使设备进入睡眠状态。

# javascript - 使用 jQuery UI Widget Factory 删除销毁事件的推荐方法

> ID：13907368
> 
> 赞同：2
> 
> 时间：2012-12-17T01:49:43.357
> 
> 标签：javascript, jquery-ui, jquery, jquery-ui-widget-factory

我正在使用 jQuery UI Widget Factory 来构建一个 jQuery 插件。

我的插件将自定义事件绑定到窗口...

```
_subscribe: function() {
  $(window).on("dragger.started", function() { ... });
} 
```

我想知道当插件的特定实例被破坏时如何删除这些事件。如果我用...

```
destroy: function() {
  $(window).off("dragger.started");
} 
```

...那么这会弄乱页面上插件的任何其他实例，因为它将删除所有“dragger.started”事件。

仅销毁与插件实例关联的那些事件的推荐方法是什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:28:57.490

您可以在一个事件中绑定多个命名空间。所以给你的实例分配一个像

```
//this.id = 'dragger_' + guid_or_static_count
$(window).on("dragger.started." + this.id, function() { ... }); 
```

然后

```
$(window).off('dragger.' + this.id); 
```

看到这个[小提琴](http://jsfiddle.net/U89tw/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:01:53.033

你用什么来摆脱实例？我相信 jQuery remove() 将删除绑定事件。

# php - PHP登录脚本会话不存在

> ID：13907370
> 
> 赞同：0
> 
> 时间：2012-12-17T01:50:03.120
> 
> 标签：php, login, mysqli

我在尝试创建一个简单的登录系统时遇到问题。这是我的设置：

索引.php

```
<?php if(!isset($_SESSION['username'])){
session_start();
//present login form with action=login.php
} else {
//display actual page
}
?> 
```

登录.php

```
<?php
if(!empty($_SESSION['username'])){
    echo $_SESSION['username'];
} else {
$username=$_POST['username'];
$password=sha1($_POST['password']);
$link=mysqli_connect("localhost","root","password","database",3306,"/tmp/mysql.sock");
$query="SELECT * FROM login WHERE `name`='".$username."' AND `passwordhash`='".$password."' LIMIT 1";
$result=mysqli_query($link,$query);
if(mysqli_num_rows($result)==1){
            session_start();
    $_SESSION['username']=$username;
    $row=mysqli_fetch_assoc($result);
    $_SESSION['firstname']=$row['firstname'];
    $_SESSION['lastname']=$row['lastname'];
    echo "Username: ". $_SESSION['username']." Name: ".$_SESSION['firstname']." ".$_SESSION['lastname']; //this is just here as POC. If I redirect to index.php (using header()), it shows the login form (claims $_SESSION['username'] is unset).
}
}
?> 
```

一旦我登录，它会在 login.php 上显示我的用户名和名字和姓氏（不是数据库问题）。但是如果我重定向到 index.php，它会立即显示登录表单。有什么问题？编辑：即使在将 session_start() 添加到 login.php 之后，也会产生相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:53:02.003

使 session_start() 成为文件的第一行，它必须包含在所有使用会话变量的文件中

# asp.net - 将转发器绑定到记录？

> ID：13907372
> 
> 赞同：0
> 
> 时间：2012-12-17T01:50:33.590
> 
> 标签：asp.net, vb.net, linq

我需要将转发器与一些只有一条记录的结构绑定。数据表已填充。我试图将它与数据行或数据行视图绑定，但它不允许这样做。请问有什么建议吗？

我可以使用 Linq 查询吗？如果可以，请指导我选择第一行数据表的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:08:54.753

尝试这个

```
 Dim drList As New List(Of DataRow)
   drList.Add(myDataTable.Rows(0))  'add the first row in the datatable

   myRepeater.DataSource = drList 
```

# flyway - 适用于 Linux 和 Windows 的 flyway

> ID：13907379
> 
> 赞同：0
> 
> 时间：2012-12-17T01:51:38.037
> 
> 标签：flyway

我可以同时使用 linux 和 windows 版本管理相同的数据库架构吗？我很好奇当我从 Windows 运行 flyway 时，是否会识别来自 linux 的 schwma_version（例如 db/v_10_1__test.sql）中添加的元数据，这本来应该是“db\v_10_1_test.sql”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:24:32.497

是的。代码是相同的，并且在将位置存储在元数据表中之前，会将它们标准化为通用格式。

# twitter - Twitter 和 Reverse Auth - 获得身份验证信息后验证它

> ID：13907385
> 
> 赞同：1
> 
> 时间：2012-12-17T01:53:09.087
> 
> 标签：twitter, twitter-oauth

我已经使用 iOS 应用程序和 .NET Web 服务成功实现了 Reverse Auth。我正在使用将应用程序密钥存储在服务器上的混合模型（因此不需要将其存储在应用程序中）

我的最终目的是知道登录的用户是特定的 twitter 用户，因此我不必自己管理身份。我会将他们的用户 ID 连同他们的个人资料一起存储在我的数据库中。

我目前正在采取的步骤是

*   第 1 步：从我的 Web 服务请求一个 oauth 访问令牌
*   第 2 步：使用登录到 iOS 应用程序的访问令牌和 Twitter 帐户从 iOS 设备执行反向身份验证
*   第 3 步：将第 2 步的结果发送到我的 Web 服务

我的问题是这样的：

当我的 Web 服务收到来自第 3 步的响应时，接下来的步骤是什么？

然后，Web 服务是否需要通过调用 twitter 并验证给出的结果与 twitter 应用标识符和密钥匹配来验证这些凭据是否正确？

# ios - ios sqlite3，查询未应用的条件

> ID：13907387
> 
> 赞同：1
> 
> 时间：2012-12-17T01:53:50.940
> 
> 标签：ios, sqlite

```
 sqlite3_stmt *statement;
    NSString *query = [NSString stringWithFormat:@"SELECT * FROM voiceMemoTable WHERE folder_number = %d ORDER BY file_date, file_time DESC", [currentFolderNumber integerValue]];

    NSLog(@"query : %s", [query UTF8String]);

    if(sqlite3_prepare_v2(database, [query UTF8String], -1, &statement, NULL) == SQLITE_OK)
    {
        while(sqlite3_step(statement) == SQLITE_ROW)
        {
            NSString *fileName = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 2)];
            NSString *filePath = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement, 3)];

            VoiceMemo *currentVoiceMemo = [[VoiceMemo alloc]initWithName:fileName Path:filePath];
            [currentFolder addObject:currentVoiceMemo];
        }

        NSLog(@"### STATUS : success to get current folder %@ from database", currentFolderNumber);

        NSLog(@"current folder %@", currentFolder);
    }
    else
    {
        NSLog(@"@@@ ERROR : failed to prepare statement in getFolderFromDatabase.   ERROR CODE : %s", sqlite3_errmsg(database));
    } 
```

这是代码。和，

```
2012-12-14 17:45:05.409 Rivo Recorder[9927:907] query : SELECT * FROM voiceMemoTable WHERE folder_number = 0 ORDER BY file_date, file_time DESC
2012-12-14 17:45:05.416 Rivo Recorder[9927:907] ### STATUS : success to get current folder 0 from database
2012-12-14 17:45:05.423 Rivo Recorder[9927:907] current folder (
) 
```

这是日志。

我不知道为什么 where 查询不适用。数据库没有错。它具有正确的 folder_number 列数据，值为 0。

我对查询的语法错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:47:54.790

看起来没问题，但你为什么不使用一些 sqlite3 框架来减少你的问题呢？[https://github.com/ccgus/fmdb](https://github.com/ccgus/fmdb)是一个不错的选择。

否则，您可以尝试在 iOS 模拟器上运行您的应用程序并直接访问数据库。

# php - 使用 javascript 和 php

> ID：13907405
> 
> 赞同：1
> 
> 时间：2012-12-17T01:58:36.900
> 
> 标签：php, javascript

我有一个购物网站，我正在使用 javascript 将商品添加到购物车。每次我单击添加到购物车时，它都会将项目的名称放在代表购物车的 div 中。我想在每个页面上保留购物车的内容，所以我所做的是：

```
$("#cartlink").attr("href", "cart.php?app="+tab+"") 
```

其中“tab”是一个包含购物车中所有商品的数组。然后，我使用 GET 检索 cart.php 页面上的购物车元素。但我的问题是因为我使用 JS 在购物车中添加项目，如果用户更改页面而不点击 cart.php?app 链接，标签将被删除，我无法恢复“标签”。如果用户单击 cart.php 链接，我可以使用 GET 并将内容存储到会话中，然后在每个页面上使用它。

因此，如果用户决定不单击 cart.php，我需要一种方法来记住购物车内容。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:00:51.727

您可以使用`localStorage`JavaScript 存储购物车状态，并在用户确认订单时将其提交给服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:10:12.837

我建议使用插件，例如[http://www.jstorage.info/](http://www.jstorage.info/)

它将为您提供一种在客户端存储/检索数据的简单方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T02:12:16.813

我不确定我是否完全理解您在做什么，但听起来您可以将侦听器绑定到窗口`beforeunload`事件，该事件在页面卸载（位置更改）之前调用。这就是网站（弹出式广告）实现“您确定要离开”对话框的方式。

一个例子：

```
window.document.addEventListener('beforeunload', function(event) {
  $.ajax({ url: '/saveCart.php', data: tab, 
      success: function(){
      }, 
      error: function(data) { 
      }
    });
}, false); 
```

请注意，由于您无法取消`beforeunload`事件，因此仅更新 cookie 而不是进行 ajax 调用可能更安全，因为如果 HTTP 请求由于某种原因失败，页面仍将继续卸载。[这是关于设置 cookie 的非常好的入门指南](http://www.quirksmode.org/js/cookies.html)。

一个非常简单的解决方案是在`beforeunload`侦听器中返回一个字符串，这将创建一个确认对话框，可能会说“您的购物车将不会被保存。请通过单击“保存购物车”来保存”等。不是最好的用户体验虽然。

# javascript - Javascript 在从 iOS 输入和离开选择标签时显示/隐藏固定元素

> ID：13907408
> 
> 赞同：0
> 
> 时间：2012-12-17T01:59:43.903
> 
> 标签：javascript, html, ios, css

javascript 使用什么函数来识别何时在 iOS 上点击了选择或输入标签并从本机底部视图中退出？我需要隐藏我的固定元素，这样当原生底部视图升起时它不会妨碍它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:05:05.120

您可以使用该`onchange`方法检查它何时被修改

```
var select = document.getElementById("elementId");

// runs everytime the selection is changed.
select.onchange = function () {
   // do stuff.
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:09:43.417

您最好使用 jQuery mobile，以便获得跨浏览器支持。

**[jQuery 移动](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)**

# c# - C# 自定义记录器 - 捕获发送对象的最佳方式

> ID：13907409
> 
> 赞同：2
> 
> 时间：2012-12-17T01:59:49.050
> 
> 标签：c#, object, logging, system.diagnostics

我正在尝试构建（出于学习目的）我自己的事件记录器；我对使用非 .net 框架而不是构建自己的框架不感兴趣，因为我这样做是为了更好地理解 .net。

这个想法是有一个事件系统，我可以将其写入日志文件和/或在程序内部提取。为此，我正在创建一个`LogEvent`将存储在`Queue<LogEvent>`.

我计划在`LogEvent`课堂上使用以下字段：

```
private EventLogEntryType _eventType //enum: error, info, warning...
private string _eventMessage
private Exception _exception
private DateTime _eventTime 
```

我不确定是捕获导致事件被调用的对象的最佳方法。我想过只是做一个`private Object _eventObject;`，但我认为这不是线程安全的。

任何关于如何最好地存储调用事件的对象的建议将不胜感激。我也愿意接受您可能提出的任何其他建议。

谢谢，托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:25:33.877

首先，自己写没有错。我们那里有一些很好的框架，但有时你会遇到一些奇怪的要求让你自己动手，反正我去过那里......
我认为你不应该使用短信。在几个项目中进行了这种类型的日志记录之后，我得出的结论是，最好的方法是拥有一组带有某种额外信息字段的事件类型（整数 ID）。你应该有一个`LogEvetTypes`看起来像这样的枚举：

```
public enum LogEventTypes
{
    //1xxx WS Errors
    ThisOrThatWebServiceError = 1001,

    //2xxx DB access error

    //etc...
} 
```

根据我的经验，这将使您在尝试使用您记录的信息时更轻松。您还可以添加一个`ExtraInformation`字段以提供事件实例的特定信息。

至于导致事件的对象，我会使用类似`typeof(YourClass).ToString();`. 如果这是您创建的自定义类，您还可以实现一个`ToString`覆盖，该覆盖将在您的日志记录上下文中命名。

**编辑：**我在评论中添加了一些我写的细节，因为我认为它们很重要。通过 ref 将不可变的对象传递给服务方法通常不是一个好主意。您可能会在循环中重新分配相同的变量（例如）并创建一个几乎不可能找到的错误。另外，我建议现在做一些额外的工作，将日志基础设施与应用程序的实现细节分离，因为以后这样做会导致很多痛苦。我是根据我自己非常痛苦的经历这么说的。

# java - 碱基之间转换的算法是如何工作的？

> ID：13907412
> 
> 赞同：-2
> 
> 时间：2012-12-17T02:00:14.877
> 
> 标签：java, binary

```
void convert(int bTen) {
    System.out.println("Base 10 = " + bTen);
    int bTwo = 0;
    int leftOver = bTen;
    while (leftOver > 0) {
        int i = 0;
        int remains = 0;
        while (remains >= 0) {
            remains = leftOver - (int)Math.pow(2, i);
            i++;
        }
        bTwo += Math.pow(10, i - 2);
        leftOver = leftOver - (int)Math.pow(2, i - 2);
    }
    System.out.println("Base 2 = " + bTwo);
} 
```

我想知道为什么上面的代码可以将base-10中的数字转换为base-2。我知道如何编写一个程序来将 base-2 转换为 base-10，但我似乎不明白如何做相反的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:14:32.243

首先，我认为这种转换是不合理的，不应该这样做。

Base-10 或 Base-2 只是相同数字的文本表示。但是，您的逻辑是将数字 (A) 更改为另一个数字 (B)，如果您在 base-10 中读取 B，它将看起来与 A 的 base-2 相同。

无论如何，引用代码的逻辑思想是这样的：

```
loop until input is not zero (i.e. loop until all binary digits processed)
  find the position (i) of the most significant bit that is 1
  set position of i of result being 1
  subtract 2^i from input
end loop 
```

# php - 由于某种原因，标头（位置）技巧没有按预期工作

> ID：13907416
> 
> 赞同：0
> 
> 时间：2012-12-17T02:00:53.250
> 
> 标签：php, html, apache

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

## 环境

*   阿帕奇 2.2.22
*   PHP 5.4.4
*   MAC OSX 狮子

## 免责声明

我对 PHP 和整个社区都很陌生，所以我仍在学习我的方式。

## 客观的

重定向到一个非常具体的 URL。

## 代码

我已经构建了自己的 MVC 处理程序，我已将其包含在下面，并且我正在尝试处理我目前所处的特定情况，`user/login`但我想在登录后重定向回主页，所以我想转到`home/index`. 为此，***我认为***，正确的重定向方法（经过大量搜索后）是发出以下命令：

```
header("Location: http://$host$uri/$controllerName/$action"); 
```

我已经验证了 URL 是正确的（例如，如果我将 URL 放在地址栏中它会起作用），但由于某种原因浏览器没有响应。

有人可以指出我正确的方向吗？

## 更新

以下是我收到的错误。

> 警告：无法修改标头信息 - 标头已由第 70 行 /Applications/MAMP/htdocs/test/core/bootstrap.php 中的（输出开始于 /Applications/MAMP/htdocs/test/core/bootstrap.php:66）发送

这是第 66 行：

```
if ($_SERVER['DEBUG']) { echo "<br/>$url ..."; } 
```

所以，在尝试它出现之前我无法输出任何东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:06:21.543

您只能在任何输出开始之前修改标题信息。尝试将标题更改放在脚本的顶部，它将起作用（假设已设置这些变量）。

在第 66 行，您可能有一个`echo`命令或一些 HTML。

来自 PHP 手册：

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。使用 include 或 require 函数或其他文件访问函数读取代码并在调用 header() 之前输出空格或空行是一个非常常见的错误。使用单个 PHP/HTML 文件时也存在同样的问题。

# postgresql - 如何在c代码中调用postgis-1.5.dll的一个函数

> ID：13907418
> 
> 赞同：0
> 
> 时间：2012-12-17T02:01:31.083
> 
> 标签：postgresql, dll, postgis, postgresql-9.1, postgresql-9.0

我正在使用 Postgis Point 的 c 中创建一个 Postgresql 扩展。当我在加载后尝试调用 postgis-1.5.dll 的函数时，它失败并且我没有收到错误消息这是我代码的一小部分：

```
 Point *pt =(Point*) palloc(sizeof(Point));
    bool test;
    HINSTANCE DLLHandle;
typedef bool(*ST_empty)(Point*);

ST_emptyPtr ST_empty;

    pt->x = 0.2;
    pt->y = 0.9;
DLLHandle = LoadLibrary(L"postgis-1.5.dll");
ST_empty = (ST_emptyPtr)GetProcAddress(DLLHandle,"LWGEOM_isempty"); 
if (DLLHandle != NULL){
   if(!ST_empty)
     elog(ERROR,"null ehhhh");

   test = ST_empty(p);
       elog(ERROR,"not empty");
    } 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:22:58.833

查看源代码可能会有所帮助： [来自 PostGIS Trunk 的 lwgeom_is_empty](http://postgis.refractions.net/documentation/postgis-doxygen/d3/dc8/lwgeom_8c-source.html#l01105)

你确定它失败了？上面的代码不测试函数调用的返回值。以下是做什么的？

```
if (!ST_empty(p))
  elog(ERROR,"not empty"); 
```

布赖恩

# asp.net - 何时使用 Request.RegisterForDispose？

> ID：13907425
> 
> 赞同：5
> 
> 时间：2012-12-17T02:03:21.920
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

对于 ASP.NET Web API，我一直在研究自己的实现，`IHttpControllerActivator`并且想知道何时（或为什么？）使用`HttpRequestMessage`扩展方法“ `RegisterForDispose`”。

我看到这样的例子，我可以看到其中的相关性，因为 IHttpController 不继承 IDisposable，并且 IHttpController 的实现不保证它自己的处置逻辑。

```
public IHttpController Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)
{
    var 控制器 = (IHttpController) _kernel.Get(controllerType);
    request.RegisterForDispose(new Release(()=> _kernel.Release(controller)));
    返回控制器；
}
```

但后来我看到这样的事情并开始怀疑：

```
公共 IHttpController 创建（
    HttpRequestMessage 请求，
    HttpControllerDescriptor 控制器描述符，
    类型控制器类型）
{
    if (controllerType == typeof(RootController))
    {
        var 一次性查询 = 新的 DisposableStatusQuery();
        request.RegisterForDispose(disposableQuery);
        返回新的 RootController(disposableQuery);
    }
    返回空值；
}
```

在这种情况下，RootController 没有在这里注册处置，大概是因为它是 ApiController 或 MVC 控制器？- 因此会自行处置。

DisposableStatusQuery 的实例已注册处置，因为它是一次性对象，但为什么控制器不能处置实例本身呢？RootController 了解一次性查询（或者更确切地说，它是接口或抽象基础），因此会知道它是一次性的。

我什么时候真正*需要*使用 HttpRequestMessage.RegisterForDispose？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-09T14:15:57.690

我发现它对一种场景很有用：用于自定义 ActionFilter。

因为属性被缓存/重用，属性中的项目不应该依赖于控制器来处理（据我的理解 - 并且可能有警告）......所以为了创建一个自定义属性而不是绑定到特定的控制器类型/实现，您可以使用此技术来清理您的东西。就我而言，它用于环境 DbContextScope 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-09T15:57:27.510

`RegisterForDispose`它是一个钩子，在处理请求时将被调用。这通常与“一些”依赖注入容器一起使用。

例如，某些容器（如 Castle.Windsor）默认情况下会**跟踪**它们解析的所有依赖项。这是根据 Windsor ReleasePolicy`LifecycledComponentsReleasePolicy`规定的，该政策声明它将跟踪创建的所有组件。换句话说，如果您的容器仍在跟踪您的组件，您的垃圾收集器将无法清理。这将导致内存泄漏。

因此，例如，当您定义自己的`IHttpControllerActivator`以将其与依赖注入容器一起使用时，它是为了解析具体控制器及其所有依赖项。在请求结束时，您需要释放容器创建的所有依赖项，否则将以大内存泄漏告终。你有这个机会`RegisterForDispose`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T09:49:38.247

有人可能想在请求的生命周期中挂钩代码，该请求 (1) 与控制器无关，并且 (2) 不子类化请求类型。

例如，我会想象这种代码的惯用形式采用扩展方法的形式`HttpRequestMessage`。如果代码分配了可支配资源，则需要将处置代码与*某物*挂钩。我对 ASP.NET 管道的各种扩展点不太熟悉，但我认为挂钩代码只是为了在请求处理阶段结束时处理资源很常见，足以证明可使用资源的专用注册机制（如与更普遍地订阅要执行的代码相反）。

既然您要问，我在[这个示例](https://aspnet.codeplex.com/SourceControl/changeset/view/643f51f6de9ccb009c0a0692c8836c094a55f30c#Samples/WebApi/OData/v3/ODataEFBatchSample/ODataEFBatchSample/Extensions/HttpRequestMessageExtensions.cs)中找到了一个很好的示例场景。在这里，实体框架上下文被设置为请求的属性，并且必须正确处理。虽然此属性旨在供控制器使用，但它们并不特定于任何控制器或控制器超类，因此在我看来这是一个非常明智的设计选择。如果您好奇为什么，这是因为这些请求是“OData 批处理请求”，并且控制器操作将在每个请求的生命周期内多次调用（每个“操作”一次）。某些操作被分组到原子“变更集”中，这些“变更集”必须包装在比控制器更高级别的事务中（使用专用机制：`ODataBatchHandler`，这样控制器本身就不会注意到这一点）。因此，仅控制器是不够的，因为在这种情况下不能让它们自己处理上下文。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T04:55:13.993

我将 RegisterForDispose 与 DI 容器一起使用。根据[博客文章](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)，我已经实现在每次请求后处理容器（嵌套容器），以便清除我创建的所有对象。

# php - 多个while循环？

> ID：13907430
> 
> 赞同：0
> 
> 时间：2012-12-17T02:04:24.277
> 
> 标签：php

试图找出一种体面的方法来让多个 while 循环正常工作。

我一直在使用的是：

```
$x = "0";
$y = "0";

while($x <= "7"){

while($y <= "7"){

echo $x . "-" . $y ."<br />"; 

$y++;
}
$x++;
} 
```

试图让它显示：

1-1 1-2 1-3 ... 1-7 2-1 2-2

ETC

任何人都可以提供一个快速的片段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T02:08:17.187

您需要在退出 while 循环后重置 y：

```
$x = "0";
$y = "0";

while($x <= "7"){

    while($y <= "7"){

        echo $x . "-" . $y ."<br />"; 

        $y++;
    }

    $y = "1";
    $x++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T02:08:47.847

您应该在第一个循环内初始化`$y`为 1 。`while`

```
$x = "0";

while($x <= "7") {
    $y = "1";
    while($y <= "7"){
        echo $x . "-" . $y ."<br />"; 
        $y++;
    }
    $x++;
} 
```

更好的方法是使用`for`循环来做到这一点。

```
for ($x=1; $x<=7; $x++) {
    for ($y=1; $y<=7; $y++) {
        echo $x . "-" . $y ."<br />"; 
    }
} 
```

# c# - 在 MVC ASP.NET 中未正确接收 HttpWebRequest

> ID：13907431
> 
> 赞同：2
> 
> 时间：2012-12-17T02:04:31.733
> 
> 标签：c#, asp.net-mvc, url-rewriting, httpwebrequest

这是我公开记录我的错误，这样如果我或任何人再次犯错，他们就不必花 3 个小时扯头发来试图解决这样一个简单的问题。

# 语境

我正在从一个 C# MVC ASP.NET 应用程序向另一个应用程序发送一个 HttpRequest。应用程序需要 HTTPS 连接，我们使用 URLRewrite 将 HTTP 请求重定向到 HTTPS url。

一个应用程序正在发送一个带有一些 JSON 数据的 POST 请求，这是非常标准的东西。另一个应用程序设置为使用 MVC 控制器类（分别用于 GET 和 POST 的 CollectionAction 和 Insert 方法）接收此数据。

# 问题的症状

接收应用程序正在运行 GET 方法 (CollectionAction) 而不是 POST 操作 (ItemAction)。原因是进入应用程序的请求实际上是一个 GET 请求，最重要的是，JSON 数据也丢失了。

我发送了标头“x-http-method”以覆盖从 GET 到 POST 的请求方法（我已经将请求 httpmethod 设置为 POST，但这被忽略了）。这有效，但我仍然没有发送数据。

所以现在我被困住了，因为我可以看到一个包含内容长度和数据的 POST 请求正在发送，并且我有一个没有数据或内容长度的 GET 请求（但标题被保留）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:04:31.733

原来我正在使用 UriBuilder 获取基本 URL 并将资源路径应用到它。例如，我的 web.config 中会有“google.com”，然后 UriBuilder 会采用 Pages 之类的资源并构造 url“google.com/Pages”。不幸的是，我没有使用基本 URL 初始化 UriBuilder，而是使用第二个 UriBuilder 来提取主机并将其添加到路径中，如下所示：

```
public Uri GetResourceUri(string resourceName)
    {
        var domain = new UriBuilder(GetBaseUrl());
        var uribuilder = new UriBuilder()
        {
            Path = domain.Path.TrimEnd('/') + "/" + resourceName.TrimStart('/'),
            Host = domain.Host
        };
        var resourceUri = uribuilder.Uri;
        return resourceUri;
    } 
```

这段代码的问题是该方案被忽略（HTTP:// vs HTTPS://）并且它默认为 HTTP。所以我的客户将请求发送到 HTTP url 而不是所需的 HTTPS url。这是有趣的部分，URLRewrite 开始说我们需要转到一个 HTTPS url，所以它把我们重定向到那里。但在这样做时，它忽略了 Http-Method 和 POST 数据，这些数据只是设置为默认的 GET 和 null。这是第二个应用程序可以在接收端看到的内容。

因此必须将函数重写为此解决了问题：

```
public Uri GetResourceUri(string resourceName)
    {
        var baseUrl = GetBaseUrl();
        var domain = new UriBuilder(baseUrl);
        var uribuilder = new UriBuilder(baseUrl)
        {
            Path = domain.Path.TrimEnd('/') + "/" + resourceName.TrimStart('/'),
        };
        var resourceUri = uribuilder.Uri;
        return resourceUri;
    } 
```

# c++ - GLfloats之间的比较

> ID：13907434
> 
> 赞同：1
> 
> 时间：2012-12-17T02:04:42.563
> 
> 标签：c++, opengl, types

所以，我正在为 opengl 做一个小代码，它选择一个正方形的颜色并在他的值上求和 0.01，所以颜色会更闪亮。我有一个数组中每个正方形的颜色值，并且我得到一个变量，它保存颜色的最大一个元素的值，在这种情况下，这个值为一。这是功能的一部分

```
for(GLint i = 0; i < 3; i++) {
      if(colors[selectedSquare][i] > 0) {
            colors[selectedSquare][i] += 0.01;
            if(colors[selectedSquare][i] == maxColor) {
                flag = false;
            }                
      }
 } 
```

我在 glutTimerFunc 中调用了这个函数，每次将颜色的值提高到 0.01。当颜色值等于 1（maxColor）时，我开始减少函数其他部分的颜色。这里的问题是比较

```
 (colors[selectedSquare][i] == maxColor) 
```

永远不会成真，我做了一些输出来检查，这就是我得到的

```
colors[selectedSquare][i] value = 0.99   size = 4
maxColor value = 1   size = 4
(colors[selectedSquare][i] == maxColor) is 0

colors[selectedSquare][i] value = 1   size = 4
maxColor value = 1   size = 4
(colors[selectedSquare][i] == maxColor) is 0

colors[selectedSquare][i] value = 1.01   size = 4
maxColor value = 1   size = 4
(colors[selectedSquare][i] == maxColor) is 0

colors[selectedSquare][i] value = 1.02   size = 4
maxColor value = 1   size = 4
(colors[selectedSquare][i] == maxColor) = 0 
```

但是有趣的事情从这里开始，当我将比较更改为

```
((int)colors[selectedSquare][i] == maxColor) 
```

我得到这个输出

```
colors[selectedSquare][i] value = 0.99   size = 4
maxColor value = 1   size = 4
(colors[selectedSquare][i] == maxColor) is 0

colors[selectedSquare][i] value = 1   size = 4
maxColor value = 1   size = 4
(colors[selectedSquare][i] == maxColor) is 0

colors[selectedSquare][i] value = 1.01   size = 4
maxColor value = 1   size = 4
(colors[selectedSquare][i] == maxColor) is 1

colors[selectedSquare][i] value = 1.02   size = 4
maxColor value = 1   size = 4
(colors[selectedSquare][i] == maxColor) is 1 
```

我用sizeof()测量大小，colors和maxColor的声明就是这样

```
GLfloat (Memoria::colors)[9][3] = {
{ 0.80, 0.80, 0.00 },
{ 0.00, 0.80, 0.80 },
{ 0.80, 0.00, 0.00 },
{ 0.00, 0.80, 0.00 },
{ 0.00, 1.00, 1.00 },
{ 1.00, 0.00, 0.00 },
{ 1.00, 0.00, 1.00 },
{ 1.00, 1.00, 0.00 },
{ 1.00, 1.00, 1.00 },
};

const GLfloat maxColor; 
```

两者属于同一类，但颜色是静态的。希望有人知道这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T07:15:12.710

直接比较双打是个坏主意。您可以使用 >= 而不是 == 或执行类似的操作

```
if(fabs(colors[selectedSquare][i] - maxColor) > delta) 
```

其中 delta 是您要使用的精度。

您的问题是 - 双打永远不会*完全*按照您的预期存储。远远超出逗号分隔部分的数字末尾总是有波动。

# javascript - 跨域使用 postMessage 到父级的 iframe

> ID：13907435
> 
> 赞同：1
> 
> 时间：2012-12-17T02:05:04.120
> 
> 标签：javascript, windows, iframe, postmessage

我在使用 postMessage 时遇到了问题，即使在阅读了在线和本网站上的其他帖子后也是如此。

我有一个使用 var abc_iframe = document.createElement('iframe') 生成的 iframe。据我了解，我想在此附加一个事件侦听器以侦听 iframe 中的消息。我试过了：

```
1\. abc_iframe.addEventListener("message", function(e){ console.log(e.data); }, false);
2\. document.frames['id_iframe'].addEventListener("message", function(e){ console.log(e.data); }, false); 
(id_iframe right here being the id of the iframe)
3\. WinJS.Application.addEventListener("message", function(e){ console.log(e.data); }, false); 
```

这些都没有奏效。我正在使用 iframe 从 iframe 中发送 postMessage

```
1\. parent.postMessage("message", "ms-appx://" + document.location.host);
2\. window.parent.postMessage("message", "ms-appx://" + document.location.host); 
```

iframe 内容托管在另一个域（不是本地）上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:28:28.170

您需要附加到窗口对象，而不是 iframe，才能从 iframe 接收消息。

```
window.addEventListener(function(e) {})); 
```

在您发送的消息中，您应该包含让父级识别发送消息的 iframe 的信息，因为来自所有窗口的所有消息都将由此事件处理程序处理。

另请注意， addEventListener 仅适用于某些浏览器。较旧的 IE 版本使用 attachEvent。

# php - SQL 尝试使用 LIKE 返回字段的行

> ID：13907445
> 
> 赞同：0
> 
> 时间：2012-12-17T02:06:54.733
> 
> 标签：php, sql, database, mysqli

我有一个数据库，我查询以选择列 devicetoken 并返回所有类似于字符串的行我有一个数组。查询在数组中的每个值的循环中发生。SQL 语法没有做我想要的。我没有使用通配符，因为我不希望它返回我正在寻找的字符串的子字符串。

这里的 SQL 语法：

```
$result = $mysqli->query("SELECT devicetoken FROM `department devices` WHERE unit LIKE $unitsarray[$i]"); 
```

我的测试的单位数组包括：

```
--- Units row 0 = 121
--- Units row 1 = 125 
--- Units row 2 = BR171 
--- Units row 3 = C1 
--- Units row 4 = C120 
--- Units row 5 = D2INV 
--- Units row 6 = E03 
--- Units row 7 = E05 
--- Units row 8 = E17 
--- Units row 9 = E173 
--- Units row 10 = HFPIO 
--- Units row 11 = MW70 
--- Units row 12 = T05 
--- Units row 13 = TIMERW 
--- Units row 14 = WT01 
--- Units row 15 = WT13 
--- Units row 16 = WT17 
```

我的数据库看起来像这样：

```
device_id    devicetoken                                           unit
T05 ipad     773f5436825a7115417d3d1e036da20e806efeef547b7c3fe4    E17, E03, E05
E05 ipad     773f5436825a7115417d3d1e036da20e806efeef547b7c3fe4    E01, E62, E67 
```

所以，我在循环中的事件应该被调用三次，一次是当它通过并找到 E17 时，一次是为了 E03，一次是为了 E05。那么如何设置 LIKE 以在每次循环循环时获取这些字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:21:44.927

您对数据库设计有任何灵活性吗？规范化理论说你应该将这些值存储在一个单独的表中（如果你不熟悉这个，你可以在[这里](http://www.tomjewett.com/dbdesign/dbdesign.php?page=hobbies.php)找到一个例子）。否则，您将面临每行的文本搜索问题，这可能会随着表的增长而显着降低性能。

现在，如果您有这种设计的库存，则可以扩展您的查询，以防每行有固定数量的项目。例如[，这个问题](https://stackoverflow.com/questions/5611715/where-value-in-column-containing-comma-delimited-values)显示了一个可能的解决方案：

```
WHERE
      MyColumn LIKE '%,' + @search + ',%' --middle
      OR
      MyColumn LIKE @search + ',%' --start
      OR
      MyColumn LIKE '%,' + @search --end
      OR 
      MyColumn =  @search --single 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:10:04.697

尝试这样的事情：

```
<?php
    $query = "SELECT `devicetoken` FROM `department devices` WHERE unit LIKE ";
    for($1 =0; $i<count($unitsarray); $i++)
        if(count($unitsarray)-1 < $i)
            $query .= "%" . $unitsarray[$i]; ."% OR ";
        else
            $query .= "%" . $unitsarray[$i] . "%";

    $result = $mysqli->query($query);

   // Do something with the result. This'll give you 1 query
   // To fetch all rows at once. while($row = $result->fetch_assoc())
   // foreach($row as $value) etc.
?> 
```

# asp.net-mvc-4 - 如何为 MVC4 OAuth 设置 Twitter 和 Facebook

> ID：13907448
> 
> 赞同：0
> 
> 时间：2012-12-17T02:07:46.653
> 
> 标签：asp.net-mvc-4, twitter-oauth, facebook-oauth

我正在尝试将 OAuth 与 MVC4 应用程序一起使用。在 AuthConfig 中有一个链接 ( [http://go.microsoft.com/fwlink/?LinkID=252166](http://go.microsoft.com/fwlink/?LinkID=252166) ) 但信息似乎已过时。它声明单击“创建应用程序”链接，但我没有看到 Facebook 或 Twitter 的链接。谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:30:50.767

**Facebook** - 登录 facebook - 转到[https://developers.facebook.com/apps](https://developers.facebook.com/apps)，您应该会在右上角看到一个带有“创建新应用程序”的按钮。

**Twitter** - 登录 Twitter - 转到[https://dev.twitter.com/apps](https://dev.twitter.com/apps)单击创建新应用程序按钮

![Facebook](../Images/8fef3c18811a343858d87631ab3ca52b.png) ![推特](../Images/073080b5642a602c79f6ab5072522381.png)

# html - HTML5 - Javascript Sqlite 嵌套事务

> ID：13907449
> 
> 赞同：0
> 
> 时间：2012-12-17T02:08:00.780
> 
> 标签：html, sqlite, web-applications, jquery-mobile, transactions

这是我在这里的第一篇文章，我很高兴收到你的来信:-)

这是我的问题，拜托。在我的 JqueryMobile Web 应用程序中，我创建了类别和记录。每个类别都有不同的记录。

我想打印给用户的是每个类别中存在的记录数。

为了选择类别，我进行了正常交易

```
function getAll() {
db.transaction(function (transaction) {
    transaction.executeSql(("SELECT * FROM tags"), [], getAllSuccess, errorCB);
});
}

function getAllSuccess(tx, result) {
$('#bags_ul').empty();
var output = '';
$.each(result.rows, function (index) {
    var row = result.rows.item(index);
    output += '<li><a href="#" class="link_to_tag" data-tagnome="' + row['tagnome'] + '" data-tagtipo="' + row['tagtipo'] + '" data-tagid="' + row['tagid'] + '" >' + row['tagnome'] + '</a></li>';
});

$('#bags_ul').html(output);
$('#bags_ul').listview();
$('#bags_ul').listview('refresh'); 
```

}

在我的示例中，函数 getAll 进行查询，如果获取成功则执行 getAllSuccess 函数，该函数填充我列表的 LI 字段。

问题是我需要在 $.each() 中创建一个查询来获取该类别的记录。

我试图在其中执行另一个事务，我可以通过 console.log 函数成功获取记录数，**但问题是我不知道如何将它传递给事实上的“母亲”函数将 HTML 推送到页面。**

请你帮助我好吗？正如你所理解的，我需要知道这背后的“逻辑”。我真的非常感谢你的帮助。

马可

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:38:47.370

您可以自己链接回调或使用[JQuery Deferred](http://api.jquery.com/category/deferred-object/)。

# javascript - 如何创建从 url 编码字符到字符 ASCII 码的转换表？

> ID：13907458
> 
> 赞同：0
> 
> 时间：2012-12-17T02:09:10.693
> 
> 标签：javascript, url-rewriting, ascii

我尝试使用一些基本的字符代码手动创建：

```
 /*       0  1  2  3   4  5  6  7   8  9  A  B   C  D  E  F */
    /* 0 */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* 1 */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* 2 */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* 3 */  0, 1, 2, 3,  4, 5, 6, 7,  8, 9,-1,-1, -1,-1,-1,-1,

    /* 4 */ -1,10,11,12, 13,14,15,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* 5 */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* 6 */ -1,10,11,12, 13,14,15,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* 7 */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,

    /* 8 */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* 9 */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* A */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* B */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,

    /* C */ -1,-1,-1,-1, -1, -1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* D */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* E */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1,
    /* F */ -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1, -1,-1,-1,-1 
```

但想知道如何使用 javascript 以自动方式创建填充表（我找到了很好[的 ASCII 代码示例](https://stackoverflow.com/a/9539389/1056328)，但我不知道如何迭代 url 编码符号）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:10:24.263

为什么需要一张桌子？解码和编码一样，是内置的：

```
var decoded = decodeURIComponent(encoded); 
```

（如果您实际上并没有尝试解码 URL 编码的字符串，而是绝对需要该表，那么您可以通过`decodeURIComponent`在前面加上. 来迭代和使用`%`。）

# mysql - 为什么在搜索整数时不应该包含数字？

> ID：13907462
> 
> 赞同：1
> 
> 时间：2012-12-17T02:09:46.143
> 
> 标签：mysql, sql

在 user_id 为 INT 的表上

为什么是：

```
SELECT * FROM tableName where user_id = 63 
```

推荐而不是

```
SELECT * FROM tableName where user_id = '63' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:12:06.230

在某些情况下，至少在以前的 mysql 版本中，有时会发生 mysql 将表达式的左侧部分（列）转换为字符串，而不是将右侧转换为整数。

这会导致意外的全扫描，而不是使用索引。

我什至没有提到这毫无意义。

# javascript - 使用 Scrapy 和 Selenium 抓取需要登录的页面并使用 javascript 加载数据

> ID：13907464
> 
> 赞同：3
> 
> 时间：2012-12-17T02:09:58.170
> 
> 标签：javascript, authentication, selenium, scrapy

我正在尝试使用 javascript 抓取需要登录和加载数据的页面。目前我可以使用scrapy成功登录。但是我的蜘蛛无法看到我需要的数据，因为数据是使用 javascript 加载的。

我做了一些搜索，发现 Selenium 可能是一个可能的解决方案。我想使用 selenium 创建浏览器并查看页面。看来我应该使用 selenium webdriver 工具。但我不知道该怎么做。有谁知道我应该在哪里以及如何向我的蜘蛛添加硒代码？

非常感谢。

```
#My spider looks like

from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http import Request, FormRequest

from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor

from selenium import selenium
import time

from login.items import SummaryItem

class titleSpider(BaseSpider):
    name = "titleSpider"
    allowed_domains = ["domain.com"]
    start_urls = ["https://www.domain.com/login"]

    # Authentication
    def parse(self, response):
        return [FormRequest.from_response(response,
                formdata={'session_key': 'myusername', 'session_password': 'mypassword'},
                callback=self.after_login)]

    # Request the webpage
    def after_login(self, response):
        # check login succeed before going on
        if "Error" in response.body:
            print "Login failed"
        else:
            print "Login successfully"
            return Request(url="https://www.domain.com/result1",
               callback=self.parse_page) # this page has some data loaded using javascript

    def __init__(self):
        CrawlSpider.__init__(self)
        self.verificationErrors = []
        # How can I know selenium passes authentication? 
        self.selenium = selenium("localhost", 4444, "*firefox", "https://www.domain.com/result1")
        print "Starting the Selenium Server!"
        self.selenium.start()
        print "Successfully, Started the Selenium Server!"

    def __del__(self):
        self.selenium.stop()
        print self.verificationErrors
        CrawlSpider.__del__(self)

    # Parse the page
    def parse_page(self, response):

        item = SummaryItem()
        hxs = HtmlXPathSelector(response)
        item['name']=hxs.select('//span[@class="name"]/text()').extract() # my spider cannot see the name.

        # Should I add selenium codes here? Can it load the page that requires authentication?
        sel= self.selenium
        sel.open(response.url)
        time.sleep(4)
        item['name']=sel.select('//span[@class="name"]/text()').extract() # 

        return item 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:32:52.523

你可以试试这样的

```
def __init__(self):
    BaseSpider.__init__(self)
    self.selenium = webdriver.Firefox()

def __del__(self):
    self.selenium.quit()
    print self.verificationErrors

def parse(self, response):

    # Initialize the webdriver, get login page
    sel = self.selenium
    sel.get(response.url)
    sleep(3) 
```

# backbone.js - Backbone & Underscore：无法将模型传递给模板进行评估

> ID：13907469
> 
> 赞同：0
> 
> 时间：2012-12-17T02:10:37.727
> 
> 标签：backbone.js, underscore.js

我在将模型数据从主干视图传递到下划线中的模板时遇到问题。我想将一个数组传递到模板中，以便我可以使用`_.each`. 我的代码如下：

**模板设置**

```
_.templateSettings = {
    interpolate: /\{\{(.+?)\}\}/g,
    evaluate: /\{\{([\s\S]+?)\}\}/g
}; 
```

插值 is `{{ }}` 和评估 is `{[ ]}`。除非我的正则表达式不正确

**看法**

```
el: $('#assasinationBackbone'),
events: {
    'click #newHitJob': 'addNewHitJob'
},
initialize: function() {
},

addNewHitJob: function() {
    var hitMen = new HitManList();
    var template = _.template($('#newHitJobTemplate').html());
    hitMen.fetch({
        success: function() {
            $('#newHitJobForm').html(template(hitMen.toJSON()));
            return hitMen; //CANNOT REMEMBER WHY I PUT THIS HERE (NO SIDE EFFECTS)
        }
    });
}); 
```

我没有在视图中将模板定义为`template:` ，而是在`addNewHitJob`属性中定义了它。 **1\. 这是正确的吗？**我这样做是因为我将拥有多个模板。上述模板如下

**模板（在 Jade 中），如果需要，我可以翻译成 html**

```
.span4#newHitJobForm
    script#newHitJobTemplate(type="text/template")
        select#names                
        {[ _.each(hitman, function(name) { ]}
        option(value="{{ name._id }}") {{ name.name }}
        {[ }); ]} 
```

**2.据我所见，我的问题是**传递`hitman`给模板，但我不确定。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:23:57.740

您的`evaluate`正则表达式不正确，您想要：

```
evaluate: /\{\[(.+?)\]\}/g 
```

你的`evaluate`正则表达式相当于你的`interpolate`因为`[\S\s]`应该匹配任何东西`.`。

当你调用一个下划线模板时，你需要给它一个包含模板名称和值的对象，只是给它一个数组（`hitMen.toJSON()`）不会做任何有用的事情；您需要给您的序列化`hitMen`一个名称，以便模板可以引用它们：

```
$('#newHitJobForm').html(template({ hitMen: hitMen.toJSON() })); 
```

然后在模板中：

```
{[ _.each(hitMen, function(hitMan) { ]}
option(value="{{ hitMan.cat._id }}") {{ hitMan.name }}
{[ }); ]} 
```

我不得不猜测这`hitMan.cat._id`部分。

# c++ - 你会创建一个私有类成员来消除多级函数调用吗？

> ID：13907470
> 
> 赞同：2
> 
> 时间：2012-12-17T02:11:00.653
> 
> 标签：c++, oop, refactoring

虽然我用 C++ 编写了这个示例，但这个代码重构问题也适用于任何支持 OO 的语言，例如 Java。

基本上我有一个A类

```
class A
{
public:
  void f1();
  void f2();
  //..
private:
  m_a;
};

void A::f1()
{
  assert(m_a);
  m_a->h1()->h2()->GetData();
  //..
}

void A::f2()
{
  assert(m_a);
  m_a->h1()->h2()->GetData();
  //..
} 
```

你们会创建一个`m_f`持有指针的新私有数据成员`m_a->h1()->h2()`吗？我可以看到的好处是它有效地消除了多级函数调用，这确实大大简化了代码。

但是从另一个角度来看，它创建了一个“不必要的”数据成员，可以从另一个现有的数据成员中推导出来`m_a`，这有点多余？

我只是在这里进退两难。到目前为止，我无法说服自己使用其中一个。

大家更喜欢哪一个，有什么理由吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T02:15:22.620

这种技术的花哨的词是*缓存*：你计算一次两个距离的引用，并将它*缓存*在对象中。一般来说，缓存可以让你用计算机内存“付费”来加速你的计算。

如果分析器告诉您，您的代码在重复调用 时花费了大量时间`m_a->h1()->h2()`，这可能是一种合理的优化，前提是`h1`and的返回值`h2`永远不会改变。但是，在没有先进行分析的情况下进行这样的优化几乎总是过早优化的不良信号。

如果性能不是问题，一个好的规则是远离存储可以从存储在对象中的其他成员计算的成员。如果您想提高清晰度，您可以引入一个命名良好的方法（成员函数）来计算两路引用而不存储它。存储仅在对性能至关重要的极少数情况下才有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:19:26.407

我不会。我同意这只是你人为的例子中的事情，但那是因为`m_a->h1()->h2()`没有内在的意义。在一个设计良好的应用程序中，所使用的方法名称应该可以告诉您关于所进行调用的一些定性信息，这应该是自记录代码的一部分。我认为，在正确设计的代码中，`m_a->h1()->h2()`应该比重定向到为您调用它的私有方法*更容易阅读和理解。*

现在，如果`m_a->h1()->h2()`是一个昂贵的调用，需要花费大量时间来计算结果，那么您可能有一个缓存参数，正如@dasblinkenlight 所建议的那样。但是为了几个按键而放弃方法调用的描述性是不好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:09:02.390

Whenever I have something like this I usually store m_a->h1() into a variable with a meaningful name at function scope since it's likely to be used again later in function's body.

# linux - Linux 帧缓冲图形和 VSync

> ID：13907471
> 
> 赞同：4
> 
> 时间：2012-12-16T14:10:16.543
> 
> 标签：linux, graphics, framebuffer

我正在用 C 语言制作一个适用于 linux 帧缓冲区的游戏。到目前为止，我有一个红色的 100x100 正方形，它与鼠标一起移动，就像一个指针一样。我已经实现了双缓冲并且它工作正常（正方形不闪烁）。问题是，横向发生了很多撕裂。我的意思是，当正方形在x轴上移动时，就像它被水平分割，它的一部分比另一部分进展得更快。如果我继续移动，这个“裂口”会在广场上从上到下缓慢传播。

我相信这是因为硬件在我将双缓冲区复制到主缓冲区的那一刻读取帧缓冲区。

我试图用 FBIO_WAITFORVSYNC ioctl 解决这个问题，但没有成功。

有什么想法可以在帧缓冲区上进行 VSync 吗？请在您的解释中添加详细信息，因为这是我第一次在基于 Linux 的操作系统上编写此类内容，因此我可能无法理解。

这是我的代码： http: [//pastebin.com/KJ4iaVEL](http://pastebin.com/KJ4iaVEL)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-29T04:53:34.093

这不是进行双缓冲的正确方法。您在后台缓冲区上进行所有绘制是正确的，但随后您执行 memcpy 将数据传输到前台。在复制过程中很容易发生屏幕刷新。

要正确执行此操作，您只需*切换指向数据的指针*；不复制数据本身。对于 Linux 帧缓冲设备，这是通过拥有一个两倍于物理屏幕的“虚拟”屏幕并使用偏移变量来设置您是显示上半部分还是下半部分来完成的。`FBIOGET_VSCREENINFO`您可以使用、`FBIOPUT_VSCREENINFO`和`FBIOPAN_DISPLAY` `ioctl`调用查询大小并设置偏移量。

此页面简要介绍了有关此的一些详细信息：[http ://www.ummon.eu/Linux/API/Devices/framebuffer.html](http://www.ummon.eu/Linux/API/Devices/framebuffer.html)

所有相关的数据结构都在`linux/fb.h`头文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-07T16:38:03.653

不幸的是，我已经了解到@Steven Bell 的答案不太正确。尽管他是正确的，在 memcpy 期间很容易发生屏幕刷新，但正确的分辨率不是创建一个两倍于屏幕大小的虚拟帧缓冲区，并在它们之间平移，正如许多线程所暗示的那样。尝试此解决方案的任何人都会收到此处描述的错误：[在 fb_var_screeninfo 中设置 yres_virtual 时出现无效参数错误](https://stackoverflow.com/questions/15071583/invalid-argument-error-when-setting-yres-virtual-in-fb-var-screeninfo/49709514#49709514)。

每个线程：[https](https://forum.odroid.com/viewtopic.php?f=55&t=8741) ://forum.odroid.com/viewtopic.php?f=55&t= 8741 不太可能真正双缓冲帧缓冲区（/dev/fb0，尽管我听说树莓派可能是此规则的一个例外）。但这并不意味着没有办法在 linux 中使用低级图形来加倍缓冲区。

这里真正的解决方案是使用 libdrm (/dev/dri/card0) 将低级图形绘制到屏幕上。这里有一个很好的例子来说明如何做到这一点：[https](https://github.com/dvdhrm/docs/blob/master/drm-howto/modeset-vsync.c) ://github.com/dvdhrm/docs/blob/master/drm-howto/modeset-vsync.c我在尝试解决这个问题时使用了自己.

无论如何，我希望我已经拯救了我在未来解决这个问题时必须经历的令人惊讶的头痛。

# android - android 读取手机状态

> ID：13907472
> 
> 赞同：0
> 
> 时间：2012-12-17T02:11:16.230
> 
> 标签：android, email

我需要有关应用程序（或服务？）的帮助，基本上我只是在胡闹，并决定看看如果我的应用程序检测到我的手机正在响铃，我是否可以让我的应用程序发送电子邮件。（我知道这看起来很愚蠢，但它对我来说更像是一个概念证明。我在我的应用程序中创建了自定义类（没有默认的主要活动）我认为它没有被执行。我设置了一个 toast 消息，当应用程序正在运行，但我从来没有看到一个出现。所以，我想我需要做一些事情来让我的类像默认的一样执行，如果是这样，我将如何去做？在 android 清单中，我添加的唯一内容是 read_phone_state 和互联网的权限（以防需要发送电子邮件）

我的问题是我需要改变什么（不需要调试它）才能让它工作？我需要在清单文件中添加额外信息吗？我是否需要更改应用程序首次启动时执行“callservice”类的设置？请，谢谢。

```
public class MainActivity extends Activity {

    PhoneStateListener listener;
    TelephonyManager tm;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Toast.makeText(getApplicationContext(), "Service has started", Toast.LENGTH_LONG).show();
        listener = new MyphoneStateListener();
        tm = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
        tm.listen(listener, PhoneStateListener.LISTEN_CALL_STATE);

    }

    public class MyphoneStateListener extends PhoneStateListener
    {
        public void onCallStateChanged(int state, String incomingNumber)
        {
             switch (state) {  
                case TelephonyManager.CALL_STATE_IDLE:   
                    break;  
                case TelephonyManager.CALL_STATE_RINGING: 
                   sendemail(); 
                    break;  
                case TelephonyManager.CALL_STATE_OFFHOOK:  
                default:  
                    break;  
                }  
                super.onCallStateChanged(state, incomingNumber);  
            }
        }

        private void sendemail()
        {
            Intent i = new Intent(Intent.ACTION_SEND);
            i.setType("message/rfc822");
            i.putExtra(Intent.EXTRA_EMAIL , new String[]{"random@gmail.com"});
            i.putExtra(Intent.EXTRA_SUBJECT , "phone is ringing");
            i.putExtra(Intent.EXTRA_TEXT , "email successfully sent");
            startActivity(Intent.createChooser(i, "send mail..."));
            Toast.makeText(getApplicationContext(), "Email has been sent", Toast.LENGTH_LONG).show();

                try
                {
                    startActivity(Intent.createChooser(i, "Send Email..."));
                }
                catch(android.content.ActivityNotFoundException ex)
                {

                }
        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:23:34.283

正如在文档[onCallStateChanged](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#onCallStateChanged%28int,%20java.lang.String%29)`int state`中，第一个和第二个是 两个参数，`String incomingNumber`但是在您当前的代码中，您只是将单个参数传递给它意味着您没有覆盖 PhoneStateListener 的 onCallStateChanged 方法，[将](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)您的代码更改为工作：

```
class MyPhoneStateListener extends PhoneStateListener{  

        @Override  
        public void onCallStateChanged(int state, String incomingNumber) {  
            switch (state) {  
            case TelephonyManager.CALL_STATE_IDLE:   
                break;  
            case TelephonyManager.CALL_STATE_RINGING: 
               sendemail(); 
                break;  
            case TelephonyManager.CALL_STATE_OFFHOOK:  
            default:  
                break;  
            }  
            super.onCallStateChanged(state, incomingNumber);  
        }  

    } 
```

# javascript - onClick 功能在 IE 中不起作用。有任何想法吗？

> ID：13907473
> 
> 赞同：0
> 
> 时间：2012-12-17T02:11:19.933
> 
> 标签：javascript, html, internet-explorer

下面的代码适用于所有其他浏览器栏 IE。代码基本上看起来让用户选择一张卡片，如果有，它选择另一张没有被挑选的卡片，然后将它添加到一个数组中。不幸的是，它在 IE 中不起作用。没有控制台错误。

有没有人有任何想法？

谢谢

```
 function getCard(clicked_id)
{

$("#frontCard").animate({
    height:"-=600",
    width:"-=250",        
},1000,'easeOutElastic');
$("#frontCard").css("opacity",0);
clicked_id = "#" + clicked_id;

        $(clicked_id).animate({ opacity: 0, left: "700px" }, 'slow');

$("#frontCard").animate({
    height:"+=400",
    width:"+=250", 

},1000,'easeOutElastic');
$("#frontCard").css("opacity",1);
var newCard= Math.floor((Math.random()*13)+1);

var newSuit= Math.floor((Math.random()*4)+1);
var currentCard;
var x=document.getElementById("pick");
var rules=document.getElementById("rules");
var kings=document.getElementById("kings");
var currentCards=document.getElementById("currentCard");

if (cardsPicked.indexOf(numbers[newCard-1] + " " + suits[newSuit-1])== -1){

if (numbers[newCard-1]=="K" && king<4){
king=king+1;
}
if(king==4){
king= "All kings found!";
alert("Fourth king picked. Down the jug!");
}
cardsPicked.push(numbers[newCard-1] + " " + suits[newSuit-1] );
for (count=0; count<cardsPicked.length; count++)
currentRule = cardRules[newCard-1];

   x.innerHTML=cardsPicked;
   currentCards.innerHTML=numbers[newCard-1] + " " + suits[newSuit-1];
   rules.innerHTML=currentRule;
   kings.innerHTML=king;

}else{

getCard();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:13:06.250

```
{
    height:"-=600",
    width:"-=250",        
}

{
    height:"+=400",
    width:"+=250", 

} 
```

删除`,`Objects 中每个逗号分隔值的尾随。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T14:43:19.600

我没有看到点击事件。但可能有帮助：永远不要用 innerHTML 覆盖正在运行的事件（在 IE <10 中）。

# jquery-mobile - 显示 ajax 获取的 html 文档的第二个“页面”

> ID：13907477
> 
> 赞同：0
> 
> 时间：2012-12-17T02:11:49.460
> 
> 标签：jquery-mobile

我有一个名为 index.html 的第一页，其中有两个链接“红色水果”和“黄色水果”。

然后我有“fruits.html”，它有两个 id 为“redFruits”、“yellowFruits”的 jquery 页面。

当有人点击 index.html 上的“黄色水果”链接时，我需要显示 fruits.html 的第二个“页面”。默认情况下，jquery mobile 显示“fruits.html”的第一页。

关于如何链接到 ajax 获取文档的随机页面的任何想法。

**“索引.html”**

```
<div data-role="content">
        <a href="fruitsList.html" data-role="button">List of red fruits</a>
        <a href="fruitsList.html" data-role="button">List of yellow fruits</a>
    </div> 
```

**水果.html**

```
....
<div data-role="page" id="redFruits">
....
       <p data-role="content">
        <ul>
            <li>apple 1</li>
            <li>apple 2</li>
            <li>apple 3</li>
        </ul>
    </p>
.....
</div>
<div data-role="page" id="yellowFruits">
    .....
    <p data-role="content">
        <ul>
            <li>lemon</li>
            <li>papaya</li>
            <li>yellow fig</li>
        </ul>
    </p>
         .....
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:23:16.850

您可以通过哈希标签引用多页文档中的子页面：

```
<a href="fruitsList.html#redFruits" rel="external" data-role="button">List of red fruits</a>
<a href="fruitsList.html#yellowFruits" rel="external" data-role="button">List of yellow fruits</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:14:24.967

您可以使用[`pageparams`](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)插件将数据发送到第二个页面 - 在这种情况下是`#id`要显示的页面。在您可以检查传递的参数并`pagebeforeshow`相应地检查。`page2``changePage()`

# mysql - 如何配置 Yii 框架以通过 SSH 连接 MySQL？

> ID：13907484
> 
> 赞同：3
> 
> 时间：2012-12-17T02:13:15.377
> 
> 标签：mysql, yii

我有本地 MySql 服务器并希望 Yii 通过 SSH 连接到它。我尝试配置 config/main.php 但失败了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:17:27.130

你需要将远程服务器的 3306 端口转发到本地机器，然后设置 Yii 连接到本地主机上的转发端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:36:21.347

正如 hd1 所说：这是您需要在 PHP 之外做的事情。最好的方法是创建一个 SSH 隧道，以便您在本地服务器上有一个可以与之通信的端口，该端口连接到您的实际数据库服务器。Yii 论坛上有一个关于这个的讨论，你可以在[这里找到](http://www.yiiframework.com/forum/index.php/topic/30678-mysql-through-ssh-tunnel/)

您可能还想看看 AutoSSH。

# parallel-processing - ifort 不并行化代码

> ID：13907485
> 
> 赞同：0
> 
> 时间：2012-12-17T02:14:25.047
> 
> 标签：parallel-processing, fortran, intel-fortran

为什么 ifort 不并行化这段代码？它一直说“循环未并行化：存在并行依赖”。我不明白依赖在哪里。gfortran 会生成并行代码，但速度提升不是很高。

```
PROGRAM erat
IMPLICIT NONE

INTEGER*8 :: i, rm, sn=1000000000
LOGICAL*1 , ALLOCATABLE, DIMENSION(:) :: nums

rm = INT( DBLE(sn)**0.5) + 1

ALLOCATE(nums(sn))
nums = .TRUE.                       !This line not parallelized

PRINT *, 'Doing initial sieve...'
nums(1) = .FALSE.
DO i = 2,rm
    nums(i**2:sn:i) = .FALSE.       !This line not parallelized
END DO
END PROGRAM erat 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:03:19.717

根据 DO 语句报告该诊断。作为一个具体的例子：

*   当 i 为 2 时，循环将 num(8) 设置为 false。

*   当 i 为 4 时，循环还将 num(8) 设置为 false。

这是写入同一内​​存位置的循环的两次不同迭代。

（相关的英特尔论坛是提出可能涉及其编译器行为细节的问题的更好场所。）

# javascript - 如何确保循环完成后执行语句？

> ID：13907495
> 
> 赞同：3
> 
> 时间：2012-12-17T02:15:54.097
> 
> 标签：javascript, node.js, asynchronous, express

下面是来自 routes/index.js 的代码快照

```
exports.index = function(req, res){
    var results=new Array();
    for(var i=0; i<1000;i++){
        //do database query or time intensive task here based on i 
        // add each result to the results array
    }
    res.render('index', { title: 'Home !' , results:results });
}; 
```

如果我运行这段代码，由于 javascript 的异步特性，最后一行在循环被完全处理之前被执行。因此我的网页没有结果。我如何构建这种方式，以便在查询完成后加载页面？

* * *

## 更新

在循环内部，我有如下数据库代码（ Redis ） -

```
client.hgetall("game:" +i, function(err, reply) {

           results.push(reply.name);
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T02:22:08.697

使用[异步库](https://github.com/caolan/async)：

```
exports.index = function(req, res){
    var results=new Array();
    async.forEach(someArray, function(item, callback){
        // call this callback when any asynchronous processing is done and
        // this iteration of the loop can be considered complete
        callback();
    // function to run after loop has completed
    }, function(err) {
        if ( !err) res.render('index', { title: 'Home !' , results:results });
    });
}; 
```

如果循环内的任务之一是异步的，则需要向异步任务传递一个回调，该回调调用`callback()`. 如果您没有要在 in 中使用的数组`forEach`，只需使用 1-1000 的整数填充一个。

*编辑*：鉴于您的最新代码，只需`async` `callback()`在`responses.push(reply.name)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T19:06:34.297

```
exports.index = function(req, res) {
  var events = require("events");
  var e = new events.EventEmitter();
  e.expected = 1000;
  e.finished = 0;
  e.results = [];

  e.on("finishedQuery", (function(err, r) {
    this.finished += 1;
    this.results.push(r && r.name);
    if (this.finished === this.expected) {
       res.render('index', { title: 'Home !' , results:this.results });
    };
  }).bind(e));

  for (var i = 0; i < e.expected; i++) {
    client.hgetall("game:" + i, function(err, reply) {
      e.emit("finishedQuery", err, reply);
    });
  };
}; 
```

当然，上面的代码不处理 [1 或多个] 错误。您需要添加仅响应 (1) 第一个错误或 (2) 如果没有发生错误的逻辑。

# sql-server - 从一组 T-SQL 中选择一个随机值

> ID：13907507
> 
> 赞同：5
> 
> 时间：2012-12-17T02:17:39.377
> 
> 标签：sql-server, tsql

> **可能重复：**
> [简单的​​更新语句，以便为所有行分配不同的值](https://stackoverflow.com/questions/12922202/simple-update-statement-so-that-all-rows-are-assigned-a-different-value)

有没有办法从子查询中选择一个随机值（如颜色）？这是我尝试过的，但每次运行都获得相同的值：

```
SELECT TOP (100) ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) AS ID,--Sequential number from 1 to ..
                 (SELECT TOP 1 color
                  FROM   ( VALUES (0, 'Red'),
                                  (1, 'Green'),
                                  (2, 'Yellow') ) colors(id, color)
                  ORDER  BY NEWID() )                        AS RandomColor
FROM   sys.all_columns ac1
       CROSS JOIN sys.all_columns ac2 
```

但如果我单独运行这件作品，我会得到不同的颜色：

```
SELECT TOP 1 color
FROM   ( VALUES (0, 'Red'),
                (1, 'Green'),
                (2, 'Yellow') ) colors(id, color)
ORDER  BY NEWID() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T08:00:44.480

可能是这样的

```
select ac1.ID, r.color from
(SELECT TOP (100)
-- changed because it didn't work in mssql 2012
--ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) as ID,
ROW_NUMBER() OVER (ORDER BY newid()) as ID,
ROW_NUMBER() OVER (ORDER BY newid()) as dummy
FROM sys.all_columns
order by id
) ac1
cross apply
(SELECT top 1 color FROM ( VALUES (0,'Red'),(1,'Green'),(2,'Yellow') ) colors(id,color) 
where id = dummy % 3
) r 
```

# mongodb - 如何将文件保存到 MongoDB？

> ID：13907509
> 
> 赞同：29
> 
> 时间：2012-12-17T02:18:44.950
> 
> 标签：mongodb, file-upload

我想将用户选择的文件保存到 MongoDB。如何正确地将文件添加到 BSON 对象以将其添加到 MongoDB？如果我的方法不正确，请指出正确的方向。

下面是客户端代码。这个 jQuery 函数在每个输入字段上收集文本（文件部分需要帮助）并将其作为 BSON 对象发送到服务器。

```
$('#add').click(function()
            {
                console.log('Creating JSON object...');
                var classCode = $('#classCode').val();
                var professor = $('#professor').val();
                var description = $('#description').val();
                var file = $('#file').val();

                var document = 
                {
                    'classCode':classCode,
                    'professor':professor,
                    'description':description,
                    'file':file,
                    'dateUploaded':new Date(),
                    'rating':0 
                };
                console.log('Adding document.');
                socket.emit('addDocument', document);
            }); 
```

表单的 HTML：

```
 <form>
        <input type = 'text' placeholder = 'Class code' id = 'classCode'/>
        <input type = 'text' placeholder = 'Document description' id = 'description'/>
        <input type = 'text' placeholder = 'Professor' id = 'professor'/>
        <input type = 'file' id = 'file'/>
        <input type = 'submit' id = 'add'/>
    </form> 
```

CoffeeScript 中的服务器端代码：

```
#Uploads a document to the server. documentData is sent via javascript from submit.html
            socket.on 'addDocument', (documentData) ->
                console.log 'Adding document: ' + documentData
                db.collection 'documents', (err, collection) ->
                    collection.insert documentData, safe:false
                    return 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-17T23:05:05.910

如果您的文件*足够小*（小于 16 兆字节），您可以将文件嵌入到 BSON 文档中，而不是增加 GridFS 的复杂性。

BSON 具有二进制数据类型，任何驱动程序都应提供对其的访问权限。

如果您的文件是文本文件，您可以将其存储为 UTF8 字符串。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-12-17T02:47:54.340

要将文件存储在 MongoDB 中，您应该尝试使用[GridFS](https://docs.mongodb.org/manual/applications/gridfs)。
您可以找到一些关于使用 GridFS 的教程（[示例](https://mongodb.github.io/node-mongodb-native/api-articles/nodekoarticle2.html)）。
检查您的 MongoDB 驱动程序的 API 并尝试在您的项目中实现它

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-03-12T11:29:20.797

# 何时使用 GridFS

> 来自官方文档：[https ://docs.mongodb.com/manual/core/gridfs/#when-to-use-gridfs](https://docs.mongodb.com/manual/core/gridfs/#when-to-use-gridfs)

在 MongoDB 中，使用 GridFS 存储大于 16 MB 的文件。

在某些情况下，在 MongoDB 数据库中存储大文件可能比在系统级文件系统中更有效。

*   如果您的文件系统限制了目录中的文件数量，您可以使用 GridFS 存储所需数量的文件。

*   当您想从大文件的一部分中访问信息而不必将整个文件加载到内存中时，您可以使用 GridFS 来调用文件的部分而不将整个文件读入内存。

*   当您希望在多个系统和设施中自动同步和部署文件和元数据时，可以使用 GridFS。当使用地理分布的副本集时，MongoDB 可以自动将文件及其元数据分发到许多 mongod 实例和设施。

如果您需要以原子方式更新整个文件的内容，请不要使用 GridFS。作为替代方案，您可以存储每个文件的多个版本并在元数据中指定文件的当前版本。您可以在上传文件的新版本后在原子更新中更新指示“最新”状态的元数据字段，并在以后根据需要删除以前的版本。

> 此外，如果您的文件都小于 16 MB BSON 文档大小限制，请考虑将文件手动存储在单个文档中，而不是使用 GridFS。您可以使用 BinData 数据类型来存储二进制数据。有关使用 BinData 的详细信息，请参阅您的驱动程序文档。

# php - 如何使用Javascript捕获后退和前进按钮并刷新？

> ID：13907511
> 
> 赞同：0
> 
> 时间：2012-12-17T02:19:25.497
> 
> 标签：php, javascript

这是针对在线考试的：我应该让用户使用浏览器的后退和前进按钮，并在用户已经参加考试时刷新页面。提前感谢您的回答和回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T02:55:02.017

我认为解决方案不应该依赖客户端代码，因为它可以由客户端修改。我认为对于某种可以阻止客户端进入开发人员模式的受控环境来说可能没问题。

在可以控制环境的情况下，限制键盘快捷键，右键单击并提供全屏模式的浏览器应该足以确保客户端正确完成任务。

否则，依赖于客户端和服务器之间的键/值令牌的系统应该完成这项工作。一些安全的在线服务依赖于这样的系统，如果您接受破坏“后退”和“前进”功能以及刷新页面，它会很好地工作。当客户端调用此类损坏的功能时，您当然可以模拟回调。

在某些情况下，仅在 JavaScript 上确保页面显示很有用。比如生成随机标识符和随机所以页面永远不一样等。

在任何情况下（IMO），出于安全目的完全依赖 JavaScript 都不是（也永远不是）一个好主意。

**编辑：**

这是一个概念验证：

服务器生成一个 uniqid，客户端使用 html5 本地存储功能存储该值。使用本地存储作为键/值注册表，我们可以存储页面阶段并将每次重新加载与存储的键与服务器新生成的键进行比较。

这非常简单，并且用作服务器生成的令牌可以随机化很多，防止任何人猜测它。

一个足够长的服务器生成的令牌甚至可以为客户端本地存储注册表提供一个很好的一次性加密密钥。

代码：

```
<?php   
    $stamp = uniqid();
?>
<!DOCTYPE html>
<html>
<head>
<script src="//cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="https://raw.github.com/andris9/jStorage/master/jstorage.js"></script>
    <style>
        body{background-color:blue;}
        p{margin-left:auto;margin-right:auto;width:800px;background-color:gray;font-weight:bolder;padding:1em;}
    </style>
    <script>
    // display nice messages
    var err_reloaded_page = "page reloaded";

    var keeper = '<?php echo $stamp; ?>';
    var current = $.jStorage.get('state');
        // first initialization, Exception
        if(current ==  null){
            $.jStorage.set('state',keeper);
            current = $.jStorage.get('state');
        }

        if(current != keeper){
            alert(err_reloaded_page);
        }
    </script>
</head>
<body>
    <p>
        Proof of concept<br/>
        Can detect page reload by comparing a stamp created server-side, stored on the local storage and compared on each page reload.
    </p>
</body>
</html> 
```

# django - Django 如何知道要在测试数据库中放入什么值

> ID：13907514
> 
> 赞同：0
> 
> 时间：2012-12-17T02:20:29.017
> 
> 标签：django, testing

我知道它不使用我的开发数据库，​​因为我删除了所有违规案例，那么 Django 是如何做到的呢？它只是插入随机值，还是以某种方式理解我编写的测试用例并试图使其失败？就该功能而言，是否保证通过测试意味着我的代码完美无缺？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:43:24.577

Django 对具有相同模式的空白数据库进行设置/拆卸，作为开发人员，*您*可以自己提供足够的测试数据，主要是通过使用[fixtures](https://docs.djangoproject.com/en/dev/topics/testing/#fixture-loading)。

测试绝不意味着你的代码是**完美无缺**的，单元测试只是和你写的一样好。

参考：
[https ://docs.djangoproject.com/en/dev/topics/testing/](https://docs.djangoproject.com/en/dev/topics/testing/)

# xaml - 使用 Visual State Manager 处理代码中的 Current_SizeChanged 事件的好处（WinRT、XAML）

> ID：13907517
> 
> 赞同：3
> 
> 时间：2012-12-17T02:21:06.970
> 
> 标签：xaml, windows-8, winrt-xaml, visualstatemanager

我正在用 C#/XAML 托管代码为 Windows 8 编写我的第一个 WinRT 应用程序，显然我必须处理可能出现的不同大小和方向的 UI（FullScreenLandscape、FullScreenPortrait、Filled 和 Snapped）。

大多数人似乎建议通过 XAML 中的可视状态管理器处理 UI 更改，但是我更喜欢编写代码隐藏而不是 XAML，我想我会简单地处理 Current_SizeChanged 事件，每个状态都有一个 switch 语句.

我尝试了两种方法，似乎都对我有用（尽管 VSM 显然更有用——至少对我来说）。

有人能告诉我为什么我应该使用 VSM 而不是代码，或者我会得到什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:10:54.633

这是一个很好的问题，在开始 WPF 和 WinRT 开发时肯定会进入我的脑海。多年来为 C# 项目编写代码后，开始在 Xaml 中构建 UI 逻辑似乎是一个奇怪的概念（这通常比 C# 多行，但也更具声明性）。

实际上（如果您不介意我说的话）我认为我们可以将您的问题抽象为“通过 C#/VB.net 在 Xaml 中编写 UI 代码有什么好处吗？”。

让我举个例子，在工作中，我在一个项目团队中，有几个开发人员和几个图形设计师。设计人员非常擅长布置 Xaml，并为应用程序创建一致的感觉（我不能说我会那么擅长） - 但在编写 Web 服务和数据访问时几乎不知道层 - 这是我们作为开发人员的工作。这应该是正确的吗？

好吧，每当你开始写**很多东西时**C#.net 中的 View/UI 相关逻辑，这可能会导致各种问题。设计人员一下子就不能专注于手头的 Xaml，必须跟上 OO 编程的步伐。在我们的项目中，这并不是什么大问题，因为设计师实际上是非常称职的开发人员（一定是我去年强迫他们理解的所有 UI 代码 :)）但我认为它归结为“工作描述级别的关注点分离。如果我们采用与 WPF 相关的范式，我认为数据绑定“引导”开发人员走上他们创建分离的道路，

所以，回到你的问题 - 不，我不认为有任何直接的好处，如果你来自主要的 .Net 背景来写很多这些东西，Xaml 可能有点棘手。但是，如果您在一个团队中 - 或者如果您发现最佳实践是开发中非常重要的因素，那么在 Xaml 中编写与视图相关的代码（例如视觉状态管理器配置）是不错的选择。

最后一点 - 你会注意到我经常使用术语“查看相关逻辑”。这是因为人们普遍认为，在代码隐藏中编写**与 UI 相关**的代码是可以接受的（如果不是最佳实践的话），但有时由于 WPF 或 WinRT 框架的性质，您会因为某些功能而被拖下这条路线。但是，如果您在代码隐藏的 UI 文件中编写业务逻辑，这将被视为一个特殊的禁忌。这打破了“关注点分离”，并使测试变得非常困难。如果您遵循 MVVM 模式（正如许多 WPF 或 WinRT 项目所做的那样），那么这就是 ViewModel 的职责。

# android - 为什么以及如何使用 Canvas.saveLayer 做 alpha 动画或获得性能

> ID：13907520
> 
> 赞同：2
> 
> 时间：2012-12-17T02:21:32.883
> 
> 标签：android, android-canvas, graphics2d

我是 android java 中的图形新手。我遇到过`Canvas.saveLayer(...)` `Canvas.restore(...)`，这些操作的有用性（就性能而言）完全让我无法理解。图层是否因此在随后**的 lockCanvas ~ unlockCanvasAndPost**周期中保存？或者，为每一帧保存和恢复“缓冲位图”有什么意义？

有些人还提到使用这些图层来制作 alpha 动画（重新合成???），但我似乎也没有找到一个明确的例子来说明如何做到这一点......

或者

我在这里完全和绝对地吠叫错误的树吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T04:41:19.043

Canvas.saveLayer 允许您将渲染重新定位到屏幕外缓冲区。缓冲区可以是位图或 GPU 纹理，具体取决于您如何设置视图的图层类型 - 软件或硬件渲染（即 LAYER_TYPE_SOFTWARE 或 LAYER_TYPE_HARDWARE，请参阅[此](http://developer.android.com/guide/topics/graphics/hardware-accel.html)）

当您调用相应的 restoreToCount 时，此缓冲区会合成到上一个目标中。因此，这允许您进行各种视觉效果，如淡入淡出（即 alpha 动画）。

理想情况下，您希望使用硬件层来制作 alpha 动画，因为 alpha 可以是硬件加速的。

您很少直接调用 canvas.setLayer 来设置或设置 alpha 动画。您要么使用 view.setAlpha，要么使用动画然后使用 view.animate().alpha(0)，两者在内部最终都会在画布上调用 setAlphaLayer。

因此，您唯一要做的就是确保在开始 alpha 动画之前将层类型设置为 View.LAYER_TYPE_HARDWARE（如果设备支持，否则软件层通过 LAYER_TYPE_SOFTWARE），然后在动画结束时将其删除。

在 4.0 中，您可以执行以下操作：

```
view.setLayerType(LAYER_TYPE_HARDWARE, null);
view.animate().alpha(0).setListener (new AnimationListener() {
             public void onAnimationEnd (Animator animation) {
                   view.setLayerType(LAYER_TYPE_NONE, null);
             }
}); 
```

在 4.1 中，这被简化为： `view.animate().alpha(0).withLayer();`

# c++ - 如何使子方法被调用：虚拟关键字不起作用？

> ID：13907522
> 
> 赞同：3
> 
> 时间：2012-12-17T02:21:53.987
> 
> 标签：c++, object-slicing

以下是我的代码，

```
#include<iostream>
#include<string>

using namespace std;

class TestClass
{
  public:
    virtual void test(string st1, string st2);

};

class ExtendedTest: public TestClass
{
  public:
    virtual void test(string st1, string st2);
};

void TestClass::test(string st1, string st2="st2")
{
     cout << st1 << endl;
     cout << st2 << endl;
}

void ExtendedTest::test(string st1, string st2="st2")
{
     cout << "Extended: " << st1 << endl;
     cout << "Extended: " << st2 << endl;
}

void pass(TestClass t)
{
    t.test("abc","def");
}

int main()
{
   ExtendedTest et;
   pass(et);
   return 0;
} 
```

当我运行代码时，会调用基类的方法（'test'）。但我希望调用 child 的方法，因为我将方法指定为虚函数。

那我怎样才能调用子类的方法呢？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T02:24:18.430

```
void pass(TestClass t)
{
    t.test("abc","def");
} 
```

当你这样做时，你传递的对象[被分割成](http://en.wikipedia.org/wiki/Object_slicing)a`TestClass`并且它的身份丢失了，所以它现在表现得像 a`TestClass`并相应地调用方法。

要解决此问题，您希望`t`按照@Nick 的建议通过引用传递，或者（不推荐）通过指针传递。它现在将保留其身份并调用适当的函数，只要`test`标记为虚拟

编辑：固定拼接->切片..太多生化奇兵..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T02:23:18.867

您需要更改引用（或指针）的参数

```
void pass(TestClass &t) 
```

这样，将使用原始对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T05:27:16.967

如上所述，这是“切片”的结果。具体发生情况如下：

当参数按值传递时，参数的副本将传递给函数。发生这种情况时，通过调用复制构造函数来构造一个新对象。

对于您的示例，复制构造函数的签名如下：

```
TestClass::TestClass(const TestClass&); 
```

因此，真正发生的情况如下（再次以您的示例为例）：

```
ExtendedTest et();
pass(et);
{ // entering scope of pass function ...
  TestClass t = TestClass(t_orig); // inserted by the compiler
  // evaluation of pass function ...
  // ...
} // leaving scope of pass function, t is destroyed. 
```

显然，由于变量 t 被实例化为一个 TestClass，任何成员函数调用都将来自 TestClass（而不是 ExtendedTest）。

最后一点，在使用继承时，您应该始终声明虚拟析构函数。这将避免在对象被销毁时进行切片。

# c++ - 使用 istreambuf_iterator 迭代后重新使用字符串流

> ID：13907528
> 
> 赞同：1
> 
> 时间：2012-12-17T02:22:24.903
> 
> 标签：c++, visual-c++, stringstream, streambuf

如果我将 a`istreambuf_iterator`周围的包装器传递`stringstream`给需要这种迭代器的函数，我如何在函数返回后重新使用（覆盖）流的现有缓冲区，而不触发堆分配？
（`clear`插入新字符时似乎会导致重新分配。）

# android - “拒绝许可：接收意图”的原因

> ID：13907529
> 
> 赞同：2
> 
> 时间：2012-12-17T02:22:56.090
> 
> 标签：android, android-intent, android-c2dm

我成功地使这些 c2dm 实现在我的应用程序上运行。

当设备突然没有收到 c2dm 消息时，我遇到了问题。这次它给了我许可拒绝，我对此感到困惑：

> 权限拒绝：接收 Intent {
> act=com.google.android.c2dm.intent.REGISTRATION cat=[myapp.android] (has extras) } 到 myapp.android 需要 myapp.android.permission.C2D_MESSAGE 由于发件人 com.google。 android.location (uid 10037)

现在第二次发生在我身上，我不能只是告诉我的用户，当他们没有收到任何命令时他们需要执行恢复出厂设置。这里有没有人遇到过类似的问题？任何帮助或见解和原因将不胜感激。

manifest.xml 按要求

* * *

```
 <receiver
        android:name="myapp.EmBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="myapp" />
        </intent-filter>
    </receiver> 
```

...

```
<uses-permission android:name="myapp.android.permission.C2D_MESSAGE" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-26T14:08:27.377

对我来说，它在我将其定义如下之后起作用：

```
<permission android:name="mypkg.permission.C2D_MESSAGE" android:protectionLevel="signature"/>
<uses-permission android:name="mypkg.permission.C2D_MESSAGE"/> 
```

其中 mypkg = 是我的应用程序包

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T03:41:53.520

您还需要像这样在清单中定义权限，因为它不是系统权限，而是特定于您的应用程序的权限：

```
<permission android:name="myapp.android.gms.permission.C2D_MESSAGE" /> 
```

如果您已经拥有，则可能是特定设备中的错误或相关 Google 库的旧版本等。在这种情况下，您无能为力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T06:26:32.233

即使我在清单中定义了权限，我也遇到了同样的问题。

这似乎与 protectionLevel="signature" 以及在使用生产与调试密钥重新安装应用程序时权限的定义损坏有关。

为我解决的问题是暂时设置 protectionLevel="normal"，然后重新安装应用程序，然后改回“签名”并再次重新安装。

# python - 是否有任何手动方式将项目发送到scrapy中的管道

> ID：13907533
> 
> 赞同：2
> 
> 时间：2012-12-17T02:23:29.390
> 
> 标签：python, scrapy

由于我的请求正在通过多个功能，因此我在通过管道发送我的项目时遇到了一些问题。

我只是希望有任何手动方式将项目对象发送到scrapy管道。因为我不知道scrapy的内部细节。

假设我有调用的函数

```
def parseDetails(self, response):

  item = DmozItem()
  item['test'] = "mytest"

  sendToPiepline(piplineName , item) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T13:04:29.863

[scrapy/commands/parse.py](https://github.com/scrapy/scrapy/blob/master/scrapy/commands/parse.py#L179)：

```
def parseDetails(self, response):
  item = DmozItem()
  item['test'] = "mytest"

  # Call pipeline.
  itemproc = self.crawler.engine.scraper.itemproc
  itemproc.process_item(item, self)

  return item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-21T20:22:47.147

如果您直接委托给`ItemPipelineManager`，您将在管理器中引发未处理的异常：

```
[2018-07-21 20:00:02] CRITICAL - Unhandled error in Deferred:

[2018-07-21 20:00:02] CRITICAL -
Traceback (most recent call last):
  File "/home/vagrant/.local/share/virtualenvs/vagrant-gKDsaKU3/lib/python3.6/site-packages/twisted/internet/defer.py", line 654, in _runCallbacks
    current.result = callback(current.result, *args, **kw)
  File "/vagrant/monitor/pipelines/filter.py", line 24, in process_item
    raise DropItem()
scrapy.exceptions.DropItem 
```

这也*可能*无意中改变管道的状态并影响处理。

我认为更好的方法是获取`Pipeline`您要查找的实例，然后直接调用它：

```
try:
    # Manually call the filter
    f = utils.get_pipeline_instance(self, FilterPipeline)
    f.process_item(p, self)
except DropItem:
    pass 
```

使用辅助函数：

```
def get_pipeline_instance(spider, pipeline_class):
    manager = spider.crawler.engine.scraper.itemproc
    for pipe in manager.middlewares:
        if isinstance(pipe, pipeline_class):
            return pipe
    else:
        raise NotConfigured('Invalid pipeline') 
```

# iphone - -[__NSCFArray objectAtIndex:]：索引（1）越界（1）

> ID：13907537
> 
> 赞同：0
> 
> 时间：2012-12-17T02:23:53.267
> 
> 标签：iphone, ios, ios6, plist

首先，在我添加第 1 项和第 2 项之前，我的 plist 可以正常使用下面的代码。

然后随着项目的进展，我必须在我的 plist 中添加几个项目。然后发生错误。

问题是，我有一个“根”plist，其中包含项目 0、项目 1 和项目 2 作为字典，如下所述：

顺便说一下，除了省的字符串之外，plist 具有相同的数据。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>Province</key>
        <string>Metro Manila</string>
        <key>Cities</key>
        <array>
            <dict>
                <key>Places</key>
                <string>Chowking</string>
            </dict>
        </array>
    </dict>
    <dict>
        <key>Province</key>
        <string>Pampanga</string>
        <key>Cities</key>
        <array>
            <dict>
                <key>Places</key>
                <string>Jollibee</string>
            </dict>
            <dict>
                <key>Places</key>
                <string>McDonald's</string>
            </dict>
            <dict>
                <key>Places</key>
                <string>Pizza Hut</string>
            </dict>
        </array>
    </dict>
    <dict>
        <key>Province</key>
        <string>Pangasinan</string>
        <key>Cities</key>
        <array>
            <dict>
                <key>Places</key>
                <string>Jollibee</string>
            </dict>
            <dict>
                <key>Places</key>
                <string>McDonald's</string>
            </dict>
        </array>
    </dict>
</array>
</plist> 
```

这是我的 Controller.m 的代码

```
//
//  RootViewController.m
//  TableView
//
//  Created by OSX on 10/10/12.
//  Copyright (c) 2012 OSX. All rights reserved.
//

#import "RootViewController.h"
#import "CityViewController.h"

@interface RootViewController ()

@end

@implementation RootViewController {
    NSArray * luzonRegion;
    NSArray * visayasRegion;
    NSArray * mindanaoRegion;
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.title = @"Region";

    [self loadRegionPlist];
}

- (void)loadRegionPlist
{
    NSString *plistLuzon    = [[NSBundle mainBundle] pathForResource: @"luzonPlist" ofType: @"plist"];
    luzonRegion   = [[NSArray alloc] initWithContentsOfFile: plistLuzon];
    NSString *plistVisayas  = [[NSBundle mainBundle] pathForResource: @"visayasPlist" ofType: @"plist"];
    visayasRegion = [[NSArray alloc] initWithContentsOfFile: plistVisayas];
    NSString *plistMindanao = [[NSBundle mainBundle] pathForResource: @"mindanaoPlist" ofType: @"plist"];
    mindanaoRegion = [[NSArray alloc] initWithContentsOfFile: plistMindanao];

    NSLog(@"%@", luzonRegion);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 3;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    switch (section) {
        case 0:
            return [luzonRegion count];
            break;

        case 1:
            return [visayasRegion count];
            break;

        case 2:
            return [mindanaoRegion count];
            break;

        default:
            break;
    }

    return section;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    // Configure the cell...
    NSDictionary *luzonDictionary    = [luzonRegion    objectAtIndex:indexPath.row];
    NSDictionary *visayasDictionary  = [visayasRegion  objectAtIndex:indexPath.row];
    NSDictionary *mindanaoDictionary = [mindanaoRegion objectAtIndex:indexPath.row];

    switch (indexPath.section) {
        case 0:
            cell.textLabel.text = [luzonDictionary    objectForKey: @"Province"];
            break;

        case 1:
            cell.textLabel.text = [visayasDictionary  objectForKey: @"Province"];
            break;

        case 2:
            cell.textLabel.text = [mindanaoDictionary objectForKey: @"Province"];
            break;

        default:
            break;
    }

    [cell setAccessoryType: UITableViewCellAccessoryDisclosureIndicator];
    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    switch (section) {
        case 0:
            return @"Luzon";
            break;

        case 1:
            return @"Visayas";
            break;

        case 2:
            return @"Mindanao";
            break;

        default:
            break;
    }
    return nil;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    CityViewController *cityViewController = [[CityViewController alloc] initWithStyle:UITableViewStylePlain];

    NSDictionary *luzonDictionary    = [luzonRegion    objectAtIndex:indexPath.row];
    NSDictionary *visayasDictionary  = [visayasRegion  objectAtIndex:indexPath.row];
    NSDictionary *mindanaoDictionary = [mindanaoRegion objectAtIndex:indexPath.row];
    switch (indexPath.section) {
        case 0:
            cityViewController.title  = [luzonDictionary   objectForKey: @"Province"];
            cityViewController.Cities = [luzonDictionary   objectForKey: @"Cities"];
            break;

        case 1:
            cityViewController.title  = [visayasDictionary  objectForKey: @"Province"];
            cityViewController.Cities = [visayasDictionary  objectForKey: @"Cities"];
            break;

        case 2:
            cityViewController.title  = [mindanaoDictionary objectForKey: @"Province"];
            cityViewController.Cities = [mindanaoDictionary objectForKey: @"Cities"];
            break;

        default:
            break;
    }

    [self.navigationController pushViewController:cityViewController animated:YES];
}

@end 
```

NSLog 和调试区域输出：

```
2012-12-17 11:24:21.023 TableViewPlist[24315:c07] (
        {
        Cities =         (
                        {
                Places = Chowking;
            }
        );
        Province = "Metro Manila";
    },
        {
        Cities =         (
                        {
                Places = Jollibee;
            },
                        {
                Places = "McDonald's";
            },
                        {
                Places = "Pizza Hut";
            }
        );
        Province = Pampanga;
    },
        {
        Cities =         (
                        {
                Places = Jollibee;
            },
                        {
                Places = "McDonald's";
            }
        );
        Province = Pangasinan;
    }
)

2012-12-17 11:24:21.043 TableViewPlist[24315:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (1) beyond bounds (1)'
*** First throw call stack:
(0x1c94012 0x10d1e7e 0x1c93deb 0x1c887e0 0x36aa 0xd3f4b 0xd401f 0xbc80b 0xcd19b 0x6992d 0x10e56b0 0x2290fc0 0x228533c 0x2290eaf 0x1088cd 0x511a6 0x4fcbf 0x4fbd9 0x4ee34 0x4ec6e 0x4fa29 0x52922 0xfcfec 0x49bc4 0x49dbf 0x49f55 0xc472d84 0x52f67 0x2cb2 0x167b7 0x16da7 0x17fab 0x29315 0x2a24b 0x1bcf8 0x1befdf9 0x1befad0 0x1c09bf5 0x1c09962 0x1c3abb6 0x1c39f44 0x1c39e1b 0x177da 0x1965c 0x293d 0x2865 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:22:54.880

问题似乎在这里：

```
NSDictionary *luzonDictionary    = [luzonRegion    objectAtIndex:indexPath.row];
NSDictionary *visayasDictionary  = [visayasRegion  objectAtIndex:indexPath.row];
NSDictionary *mindanaoDictionary = [mindanaoRegion objectAtIndex:indexPath.row]; 
```

如果其中一个区域不会包含与其他区域一样多的项目，则此操作将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T17:25:21.820

我找到了！在 cellForRowAtIndexPath 中，就像 Nickolay O. 所说的那样！

我将其更改为：

```
switch (indexPath.section) {
    case 0:
        cell.textLabel.text = [[luzonRegion objectAtIndex: indexPath.row] objectForKey: @"Province"];
        break;

    case 1:
        cell.textLabel.text = [[visayasRegion objectAtIndex: indexPath.row] objectForKey: @"Province"];
        break;

    case 2:
        cell.textLabel.text = [[mindanaoRegion objectAtIndex: indexPath.row] objectForKey: @"Province"];
        break;

    default:
        break;
} 
```

# ios - SVG/iOS - 如何使用 SVGKit？

> ID：13907544
> 
> 赞同：0
> 
> 时间：2012-12-17T02:24:26.887
> 
> 标签：ios, ios4, svg

我正在尝试将 SVGKit (https://github.com/SVGKit/SVGKit) 包含到一个测试项目中。

我收到消息：“找不到 libxml/parser.h 文件”

我检查了该文件确实不存在于项目文件夹下的文件系统中。尽管如此，提供的演示工作正常。

有人可以告诉我发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:37:01.663

我认为您需要将 libxml 链接到您的项目。如您链接到的 github 页面上“跨平台库构建”的步骤 10 和 11 中所述，只需转到 Xcode 中的构建设置，搜索“标题搜索路径”，双击它，按“+”按钮在弹出窗口中，键入“/usr/include/libxml2”并确保在弹出按钮中选择了“递归”，因为我认为所有内容都在另一个子目录中。 ![标头搜索路径](../Images/9d5b45b27ab2b275cac3aaa66896ccf5.png)

然后将框架“libxml2.dylib”添加到“Linked Frameworks and Libraries”。 ![libxml2](../Images/49865190ea4884092f47133361696d41.png)

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:32:30.750

首先将 libxml2.dylib 添加到您的框架中然后转到 Project -> Build Settings 并搜索“Header Search Paths”键并添加此值：“${SDK_DIR}”/usr/include/libxml2 不要忘记选择“all”用于构建设置

# github - 将 Github pull-request 转换为 issue

> ID：13907553
> 
> 赞同：6
> 
> 时间：2012-12-17T02:25:54.763
> 
> 标签：github

[使用hub 命令](https://github.com/defunkt/hub)很容易将问题转换为拉取请求：

```
hub pull-request -i 123 
```

但是你如何反其道而行之，将拉取请求转换回问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:14:22.060

您无法将拉取请求转换回问题。`hub`通过[github api](http://developer.github.com/v3/pulls/#alternative-input)转换为拉取请求。api中没有反向功能。

但是，如果您的意图是从拉取请求中删除提交，那么您想要更改拉取请求所基于的分支并执行`git push -f`.

合并请求将仅包括合并时分支中的提交。但是，您不能完全隐藏这些旧提交。它们仍然可以在拉取请求的历史记录/评论中看到。

* * *

您可以在 github 上删除功能分支。拉取请求将包含最后已知的提交。如果合并了拉取请求，则之后功能分支中的更改对请求没有影响。

* * *

[github-cli使用](http://github-cli.readthedocs.org/)[github api](http://developer.github.com/v3/pulls/#alternative-input)安装一个名为`ghi`从命令行处理 github 问题的工具。但是，由于 api 不提供对问题的拉取请求的“降级”，因此该工具也不提供。

# android - overridePendingTransition() 在 TimerTask 中不起作用

> ID：13907557
> 
> 赞同：0
> 
> 时间：2012-12-17T02:27:08.870
> 
> 标签：android

我想在 satrtactivity 或完成时显示活动动画，但它可能在 TimerTask 线程中无效（我知道它在 UI 线程中工作）

```
Timer timer = new Timer();
timer.schedule(new TimerTask() {
            @Override
            public void run() {
                startActivity(new Intent(myActionAnimation.this,activitytest.class));
                overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);
            }
        }, 100); 
```

任何人都可以解释一下吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-23T06:27:25.613

你只需使用这个：

```
 Handler h = new Handler();
    h.postDelayed(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            startActivity(new Intent(myActionAnimation.this,
                    activitytest.class));
            myActionAnimation.this.overridePendingTransition(
                    android.R.anim.slide_in_left, android.R.anim.slide_out_right);
            finish();
        }
    }, 5000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T06:05:11.320

我也遇到过这个问题，经过一些研究，我找到了一个解决方案并且它正在工作你应该使用 Handler 来解决这个问题

```
 Handler handler=new Handler(){
    public void handleMessage(android.os.Message msg) {

        startActivity(new Intent(myActionAnimation.this,
                activitytest.class));
        myActionAnimation.this.overridePendingTransition(
                android.R.anim.slide_in_left, android.R.anim.slide_out_right);
        finish();

    };
}; 
```

在线程中你需要这样调用

```
 Timer timer = new Timer();
   timer.schedule(new TimerTask() {
        @Override
        public void run() {
          handler.sendMessage(new Message());
        }
    }, 100); 
```

我认为它可以帮助你快乐编码

# java - 在新窗口中打开 JList 的内容

> ID：13907559
> 
> 赞同：-1
> 
> 时间：2012-12-17T02:27:26.157
> 
> 标签：java, swing, jlist

我对 Java 很陌生。

我创建了两个`JLists`，您可以在其中添加和删除“购物车”项目。

一旦用户添加了他们的所有项目，他们可以单击一个`submit`按钮在新窗口中查看他们选择的项目。

我的第一个列表是`itemList`（填充了数组中的项目），第二个列表是`shoppinglist`填充了用户使用`JButton`.

创建额外的数组来处理将项目移入和移出的按钮的操作`JLists`。我已经尝试了一些事情，但未能成功显示被选中的项目并在被击中`shopinglist`后显示在新窗口`submit`中。

任何帮助深表感谢。

```
//Create itemList
itemList = new JList(shopping);
contentPane.add(itemList);
itemList.setVisibleRowCount(10);
    itemList.setFixedCellHeight(20);
    itemList.setFixedCellWidth(140);
    itemList.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

    //Add JScrollPane to maintain size
    JScrollPane list1 = new JScrollPane(itemList);
    //contentPane.add(list1);

    //Create shoppingList
    shoppingList = new JList(items);
    contentPane.add(shoppingList);
    shoppingList.setVisibleRowCount(10);
    shoppingList.setFixedCellHeight(20);
    shoppingList.setFixedCellWidth(140);
    shoppingList.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);

    //Add JScrollPane to maintain size
    JScrollPane list2 = new JScrollPane(shoppingList);

    JPanel buttonPanel = new JPanel();

    //contentPane.add(list2);

    Buttonin = new JButton(">>");
    //Buttonin.setBounds(144, 46, 60, 23);
    Buttonin.addActionListener(this);
    buttonPanel.add(Buttonin);

    ButtonOut = new JButton("<<");
    //ButtonOut.setBounds(144, 80, 60, 23);
    ButtonOut.addActionListener(this);
    buttonPanel.add(ButtonOut);

    JPanel submitPanel = new JPanel();

    submitButton = new JButton("Submit");
    submitPanel.add(submitButton);

    submitButton.addActionListener(new ActionListener(){
        @Override
        public void actionPerformed(ActionEvent az) {
            JFrame frame = new JFrame ("Go Shopping!");
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.getContentPane().add(new MyPanel2());
            frame.pack();
            frame.setVisible(true);

        }
    });

    contentPane.add(list1);
    contentPane.add(buttonPanel);
    contentPane.add(list2);
    contentPane.setOpaque(true);
    contentPane.add(submitPanel);
    return contentPane;

}

public void actionPerformed(ActionEvent e) 
{
    int i = 0;

    //When in buttonin is pressed index and value of selected item is output to array

    if (e.getSource() == Buttonin)
    {

        int[] fromindex = itemList.getSelectedIndices();
        Object[] from = itemList.getSelectedValues();

        //add items to the shoppingList
        for (i = 0; i < from.length; i++)
        {
            items.addElement(from[i]);

        }
        //Must remove items that are selected from the itemList
        for (i = (fromindex.length-1); i >= 0; i--)
        {
            shopping.remove(fromindex[i]);
        }

    }   

    //When out button is pressed index and value of selected item is output to new array

    else if (e.getSource() == ButtonOut)
    {
        Object[] to = shoppingList.getSelectedValues();
        int [] toindex = shoppingList.getSelectedIndices();

        //add items to previous list
           for(i = 0; i < to.length; i++)
            {
                shopping.addElement(to[i]);
            }
         //Must remove what's deselected
           for (i = (toindex.length-1); i >= 0; i--)
            {
                items.remove(toindex[i]);
            }
    } 
```

好的，请耐心等待（对java来说非常新）这是我将如何设置构造函数来引用 ProfileFrame 对象吗？如果是这样，我该如何更改我的 main 以反映新的构造函数？

```
public class GoShopping extends JPanel {

private JList shopList;

public GoShopping(ProfileFrame slist) {
//construct components

shopList = new JList(slist.getListModel());
shopList.setBounds(6, 6, 123, 166);//don't worry I'm changing the layout
add(shopList);
}

public static void main (String[] args) {
JFrame frame = new JFrame ("MyPanel");
frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

//I need new GoShopping to reflect the new constructor, but not sure how to make it    work
frame.getContentPane().add (new GoShopping());
frame.pack();
frame.setVisible (true);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T12:52:37.530

您正在 MyPanel2 构造函数中创建一个新的 ProfileFrame 对象，并且由于这与可视化的 ProfileFrame 对象不同，因此其 JList 的模型将为空。一个不好的解决方案是使用静态变量——请不要这样做。更好的解决方案是将对真实可视化 ProfileFrame 对象的引用传递到您的 MyPanel2 构造函数中，并从该实例中调用公共方法。

再一次，不要使用空布局和`setBounds(...)`，而是使用布局管理器，除非你喜欢让事情变得比他们需要的更困难。

# regex - 如何使用正则表达式（perl）在特定/静态字符串之后查找值？

> ID：13907561
> 
> 赞同：3
> 
> 时间：2012-12-17T02:27:38.060
> 
> 标签：regex, perl, parsing

我仍在学习正则表达式，还有很长的路要走，所以希望各位有更多正则表达式经验的人提供帮助。我正在研究一个 perl 脚本来解析多个日志文件，并解析某些值。在这种情况下，我试图获取用户名列表。

这是我的日志文件的样子：

```
 [date timestamp]UserName = Joe_Smith
  [date timestamp]IP Address = 10.10.10.10 
```

..

只是测试，我已经能够使用 将其拉出`\UserName\s\=\s\w+`，但是我只想要实际的 UserName 值，而不包括 'UserName =' 部分。理想情况下，如果我可以让它工作，我应该能够应用相同的逻辑来提取 IP 地址等，但只是希望暂时获得用户名列表。

此外，用户名始终采用 上面的格式`Firstname_Lastname`，所以我相信 \w+ 应该总是得到我需要的一切。

感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T03:04:31.887

您应该在正则表达式中使用括号*捕获您感兴趣的匹配字符串部分。*

如果匹配成功，则内置变量等中的捕获可用`$1`，`$2`按正则表达式中左括号出现的顺序编号。

在这种情况下，您只需要一次捕获，因此您只需要查看`$1`.

请注意，在使用捕获变量中的值之前，您应该*始终*检查正则表达式匹配是否成功，因为它们会保留*上次成功*匹配的值，而失败的匹配不会重置它们。

```
use strict;
use warnings;

my $str = '[date timestamp]UserName = Joe_Smith';

if ($str =~ /UserName = (\w+)/) {
  print $1, "\n";
} 
```

**输出**

```
Joe_Smith 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T03:21:12.837

另一种方法：

```
my ($username) = $str =~ /UserName\s\=\s(\w+)/
    or warn "no username parsed from '$str'\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T02:35:11.717

您应该将正则表达式设为`\UserName\s\=\s(\w+)$`And 之后，括号中的部分将在变量中可用`$1`。我的 perl 有点生锈，所以如果它不能正常工作，请查看[http://www.troubleshooters.com/codecorn/littperl/perlreg.htm#StringSelections](http://www.troubleshooters.com/codecorn/littperl/perlreg.htm#StringSelections)

# html - 将文本与大元素的底部对齐

> ID：13907564
> 
> 赞同：0
> 
> 时间：2012-12-17T02:28:09.757
> 
> 标签：html, css

 如何将文本与`<a>`div 内大元素的右下角对齐？

这是我所拥有的，但我想要框底部的文本。我进行了很多搜索，但没有任何东西对我有用：

```
<div class="thumbnail">
   <a href="http://link.com">Link to somewhere</a>
</div>​ 
```

使用以下CSS：

```
.thumbnail{
  width: 200px;
  height: 200px;}

.thumbnail a{
  display: block;
  height: 100%;
  width: 100%;
  text-align: right;
  background-color: lightgrey;}​ 
``` 

[http://jsfiddle.net/8JsPV/](http://jsfiddle.net/8JsPV/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:40:23.497

如果您相应地更改 HTML，这应该会有所帮助：

```
.thumbnail{
  position: absolute;
  bottom: 0;
  right: 0;
}

a{
  display: block;
  position: relative;
  width: 200px;
  height: 200px;
  background-color: lightgrey;
}​ 
```

HTML：

```
<a href="http://link.com"><div class="thumbnail">Link to somewhere</div></a>​ 
```

[更新的小提琴](http://jsfiddle.net/8JsPV/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T02:45:16.767

我更改了您的 HTML 并将整个内容放在一个`<a>`标签中，以便所有内容都可以点击。[jsFiddle 这里](http://jsfiddle.net/8JsPV/2/)。

HTML：

```
<a href="#"><div class="thumbnail"><span>Link to somewhere</span></div>​&lt;/a>​​​​​​​​ 
```

CSS：

```
 .thumbnail{
  width: 200px;
  height: 200px;
  position: relative;
  background-color: lightgrey;
}

.thumbnail span{
  display: block;
  position: absolute;
  bottom: 0;
  right: 0;
}​ 
```

编辑：

要做到这一点而不把 div 放在里面`<a>`，试试[这个](http://jsfiddle.net/8JsPV/4/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T02:42:59.157

试试这个

```
.thumbnail
    {
        position: relative;
        width: 200px;
        height: 200px;
        background-color: Orange;
        display: block;

    }

    .thumbnail span
    {
        position: absolute;
        right: 0px;
        bottom: 0px;
        display: block;
        text-align: right;
        background-color: Gray;
    } 
```

并像这样更改HTML

```
<a class="thumbnail" href="#"><img
   src="http://www.healthfiend.com/wp-content/uploads/2011/01/Facial-Exercises.jpg"
   alt="face" /><span>Link to somewhere</span></a> 
```

这使得整个内容可点击并将文本与右下角对齐。我用 img 标签替换了你的 div，因为我假设缩略图实际上是你最终可能想要的。对？

# xaml - VirtualizingStackPanel CanVerticallyScroll 属性

> ID：13907567
> 
> 赞同：1
> 
> 时间：2012-12-17T02:28:39.353
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime, windows-store-apps

我正在玩 Windows 8 Store Application 的布局，并注意到`VirtualizingStackPanel.CanVerticallyScroll`Property 使我的应用程序崩溃，但该属性应该可以通过[this page](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.canverticallyscroll(v=vs.110).aspx)工作。 ![在此处输入图像描述](../Images/651c312afa018d40a1f97ed2f2a6b3f8.png)

很奇怪，即使是 Visual Studio 也能正确渲染： ![在此处输入图像描述](../Images/07a41ceb0bfdf776c506b8102db8f3b3.png)

我的 XAML 代码：

```
<common:LayoutAwarePage
    x:Name="pageRoot"
    x:Class="App5.GroupedItemsPage"
    DataContext="{Binding DefaultViewModel, RelativeSource={RelativeSource Self}}"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App5"
    xmlns:data="using:App5.Data"
    xmlns:common="using:App5.Common"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Page.Resources>
        <CollectionViewSource
            x:Name="groupedItemsViewSource"
            Source="{Binding Items}"
            IsSourceGrouped="false"
            ItemsPath="Items"
            d:Source="{Binding Items, Source={d:DesignInstance Type=data:DataGroup, IsDesignTimeCreatable=True}}"/>
    </Page.Resources>

    <Grid Style="{StaticResource LayoutRootStyle}">
        <GridView
            x:Name="itemGridView"
            AutomationProperties.AutomationId="ItemGridView"
            AutomationProperties.Name="Grouped Items"
            ItemsSource="{Binding Source={StaticResource groupedItemsViewSource}}"
            ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
            SelectionMode="None"
            IsSwipeEnabled="false"
            IsItemClickEnabled="True"
            ItemClick="ItemView_ItemClick">

            <GridView.ItemsPanel>
                <ItemsPanelTemplate>                        
                    <VirtualizingStackPanel Orientation="Vertical" CanVerticallyScroll="False"/>
                </ItemsPanelTemplate>
            </GridView.ItemsPanel>
        </GridView>
    </Grid>
</common:LayoutAwarePage> 
```

我想要实现的目标：Gridview 没有任何组和项目站在 2-3 行中，并且向右滚动。

```
------------
|1|4|7|10|
------------
|2|5|8|11|
------------
|3|6|9|12|
------------ 
```

# json - WSO2 ESB 无法响应 json 消息

> ID：13907572
> 
> 赞同：1
> 
> 时间：2012-12-17T02:29:40.370
> 
> 标签：json, wso2, wso2esb

我有一个服务响应是：

```
<Response>
    <BackUrl>www.hao123.com</url>
    <resultCode>0</resultCode>
</Response> 
```

我设置`messageType:"application/json"`。回应是：

```
{Response:{"BackUrl":"coship.com","resultCode":"0";}}. 
```

但我需要将此消息转换为 json 字符串，例如：

```
{"BackUrl":"http://www.coship.com","resultCode":"0"} 
```

如何删除节点“响应”。我尝试`mc.setPayloadJSON`在 ESB 4.5.1 中使用脚本。但是发生了错误。

```
https://wso2.org/jira/browse/ESBJAVA-1618?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel#issue-tabs 
```

任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:14:48.370

如前所述，报告了一个问题，但尚未解决。但是，您可以将消息类型设置为

```
<property name="messageType" value="application/json" scope="axis2"/> 
```

并检查？

这是一个可能对你有用的[帖子](http://vvratha.blogspot.com/2012/10/rest-support-in-wso2esb-handling-json.html)

# c++ - 如何确定 cv::Mat 是否为零矩阵？

> ID：13907574
> 
> 赞同：16
> 
> 时间：2012-12-17T02:30:12.063
> 
> 标签：c++, opencv, matrix, compare

我有一个根据以下代码动态更改的矩阵；

```
 for( It=all_frames.begin(); It != all_frames.end(); ++It)
{
    ItTemp = *It;

    subtract(ItTemp, Base, NewData);

    cout << "The size of the new data for ";
    cout << " is \n" << NewData.rows << "x" << NewData.cols << endl;
    cout << "The New Data is: \n" << NewData << endl << endl;

    NewData_Vector.push_back(NewData.clone());

} 
```

我想要做的是确定 cv::Mat NewData 是零矩阵的帧。我尝试使用 cv::compare() 函数和简单的运算符（即 NewData == NoData）将它与大小相同的零矩阵进行比较，但我什至无法编译程序。

是否有一种简单的方法可以确定 cv::Mat 何时填充零？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-17T05:50:10.107

我用了

```
if (countNonZero(NewData) < 1) 
{
    cout << "Eye contact occurs in this frame" << endl;
} 
```

这是一种非常简单（如果可能不是最优雅）的方法。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-17T03:01:07.933

要检查 mat 是否为空，请使用`empty()`，如果 NewData 是 cv::Mat，如果 NewData 中`NewData.empty()`没有元素，则返回 true。

要检查它是否全为零，简单地说，`NewData == Mat::zeros(NewData.size(), NewData.type())`.

**更新：**

检查 OpenCV 源代码后，您实际上`NewData == 0`可以检查所有元素是否等于 0。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-10T09:33:41.607

countNonZero(Mat) 将在 mat 中给出 u 个非零

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T03:25:01.817

这个怎么样..

```
Mat img = Mat::zeros(cvSize(1024, 1024), CV_8UC3);
bool flag = true;

MatConstIterator_<double> it = img.begin<double>();
MatConstIterator_<double> it_end = img.end<double>();
for(; it != it_end; ++it)
{
    if(*it != 0)
    {
        flag = false;
        break;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-24T13:19:06.403

Mat 对象有一个[空](https://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a17d0777aef52a7cfbdb8d04d189fa5c3)属性，所以你可以让 Mat 告诉你它是否有东西或者它是空的。结果将是`true`或`false`。

# jquery - jquery下拉显示隐藏tr

> ID：13907575
> 
> 赞同：0
> 
> 时间：2012-12-17T02:30:25.970
> 
> 标签：jquery

如果我想在选择 1 时表将仅显示 tr 1 而当我选择 2 时它将显示 tr 2 等，如何实现 jquery？

```
<select name="select_main_table">
<option value="1" selected="selected">Show line 1</option>
<option value="2" >Show line 2</option>
<option value="3" >Show line 3</option>
</select>

<table id="main_table">
 <tr id="show1"><td>line 1</td><td<line 1/td></tr>
 <tr id="show2"><td>line 2</td><td<line 2/td></tr>
 <tr id="show3"><td>line 2</td><td<line 2/td></tr> 
</table> 
```

提前致谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:32:38.110

也许有点像这样：

```
$(document).ready(function() {
   $('select[name="select_main_table"]').change(function() {
      $("#main_table tr").show().slice(this.value).hide();
   }).change();
}); 
```

​演示：http: [//jsfiddle.net/kms8k/](http://jsfiddle.net/kms8k/)

**编辑：**我认为我最初的答案是基于对您的要求的误解 - 我认为您的意思是选择“2”意味着“显示前两行”。要仅显示指定的行，请执行以下操作：

```
$(document).ready(function() {
   $('select[name="select_main_table"]').change(function() {
      $("#main_table tr").hide().eq(this.value-1).show();
      // OR
      $("#show" + this.value).show().siblings().hide();
   }).change();
}); 
```

演示：http: [//jsfiddle.net/kms8k/1/](http://jsfiddle.net/kms8k/1/)

请注意，您可以在不使用 tr 元素的属性的情况下使其工作`id`，如果您希望通过根本不包含该属性来简化您的 html...

我使用的所有 jQuery 方法都有[很好的文档记录](http://api.jquery.com/)。

# javascript - 计算日期时的时间数学问题

> ID：13907576
> 
> 赞同：1
> 
> 时间：2012-12-17T02:30:45.923
> 
> 标签：javascript, jquery, html, date, time

我[这里](http://donutdev.com/countdown/)有一个倒计时，倒计时到新年的罚款。但是，由于某种原因，当我输入不同的日期时，完全相同的代码无法在[这里工作；](http://donutdev.com/countdown/christmas/)正好是 1 个月的假期。

为什么会这样？

具体来说，这是我用来获取日期、时间等的代码：

```
christmas = new Date(new Date().getFullYear(), 12, 25);

seconds = Math.floor((christmas - (new Date()))/1000);
minutes = Math.floor(seconds/60);
hours = Math.floor(minutes/60);
days = Math.floor(hours/24);

hours = hours-(days*24);
minutes = minutes-(days*24*60)-(hours*60);
seconds = seconds-(days*24*60*60)-(hours*60*60)-(minutes*60); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T02:34:25.563

你的问题在这里：

```
> christmas = new Date(new Date().getFullYear(), 12, 25); 
```

Javascript 月份索引为零：

```
var christmas = new Date(new Date().getFullYear(), 11, 25); 
```

# linux - 防止 cronjobs 重叠

> ID：13907577
> 
> 赞同：1
> 
> 时间：2012-12-17T02:30:50.487
> 
> 标签：linux, cron, queue, spool

我在 crontab 中设置了 3 个不同的作业（称它们为 jobA、jobB、jobC），它们以不同的时间间隔运行并在一天中的不同时间开始。例如，jobA 在每小时 5 分钟运行一次，jobB 在每小时 9 和 39 分钟运行一次，jobB 每 30 分钟运行一次，jobC 每 15 分钟运行一次。它们不相互依赖，但由于各种原因，它们不能同时运行。

问题是有时其中一个作业需要很长时间才能运行，而另一个作业在第一个作业完成之前就开始了，这会导致问题。

是否有某种方法可以对这些作业进行排队或假脱机，以便在当前运行的作业完成之前不会启动？我尝试使用[此解决方案](https://stackoverflow.com/questions/1058047/wait-for-any-process-to-finish)，但这并不能保证挂起的作业将按照它们应该开始的相同顺序恢复。最好有一个队列，但我找不到任何关于如何做到这一点的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:58:05.867

您不能使用`cron`. Cron 用于在特定时间运行特定命令。您可以通过您提出的解决方案来做到这一点，但这会增加更多的复杂性。

我建议，用高级语言编写/编码要求，`java`并使用多线程程序来实现你所需要的。

`Control-m`是另一个调度软件，还有很多其他的功能。您将能够将上述用例集成到其中。

# java - Java 中的 SocketServer 积压测试

> ID：13907578
> 
> 赞同：0
> 
> 时间：2012-12-17T02:31:03.917
> 
> 标签：java, networking

在 CI 中可以选择/轮询绑定的套接字文件描述符以检查等待连接。现在我正在学习 java 套接字，我所发现的只是一个等价的线程循环，它不断尝试接受并等待接受超时或客户端连接。

除了在接受命令上尝试和超时之外，还有其他方法可以测试 SocketServer 类的待处理连接吗？我正在寻找制作单线程服务器的方法，而无需不断等待接受超时超时。

# php - PDF的PHP新行和文本标题

> ID：13907583
> 
> 赞同：0
> 
> 时间：2012-12-17T02:32:13.407
> 
> 标签：php, forms, fpdf

我正在使用 FPDF 选项，我对 PHP 和 FPDF 也很陌生。我下面的代码正在将文本写入 PDF 文件，但它被重叠了。相反，如何使文本在每一行中打印，而且我需要在发布数据之前有一个标题。

我的代码是

```
$pdf->Cell(40, 10, $_POST['textfield2']);
$pdf->Cell(40, 10, $_POST['textfield3']);
$pdf->Cell(40, 10, $_POST['textfield4']);
$pdf->Cell(40, 10, $_POST['textfield5']);
$pdf->Cell(40, 10, $_POST['textfield6']);
$pdf->Cell(40, 10, $_POST['textfield7']);
$pdf->Cell(40, 10, $_POST['textfield8']);
$pdf->Cell(40, 10, $_POST['textfield9']);
$pdf->Cell(40, 10, $_POST['textfield10']); 
```

电流输出：`Test Test Test Test Test`

我需要输出为

```
First name : Test
Last name : Test
Profession : Test 
```

以这种方式..

我怎样才能做到这一点？

# ruby-on-rails - Rails - 删除 public/index.html - 现在浏览器显示目录结构

> ID：13907584
> 
> 赞同：1
> 
> 时间：2012-12-17T02:32:28.753
> 
> 标签：ruby-on-rails, apache

我最近在我的 Windows 7 上安装了 Ruby on Rails。

```
ruby --version
ruby 1.9.3p327 (2012-11-10) [i386-mingw32]
rails --version
Rails 3.2.9 
```

我正在使用 apache，并使用以下内容编辑了我的 httpd.conf 文件：

```
Listen 3000
DocumentRoot "C:/Users/username/Documents/GitHub/blog/public"

<Directory "C:/Users/username/Documents/GitHub/blog/public">
    Options Indexes +FollowSymLinks Includes ExecCGI
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

当我转到 localhost:3000 时，我得到默认的 Welcome aboard 你正在使用 Ruby on Rails！信息。所以我运行了以下命令：

```
$ rails generate controller home index 
```

这创建了我所期望的所有文件。然后我编辑了 routes.rb 以具有以下行：

```
root :to => 'home#index' 
```

当我重新加载浏览器时，它不会将我定向到我的 /app/views/home 文件夹中的 index.html 文件，而是显示我的 /public 文件夹的目录结构。

有谁知道我可能错过了哪一步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:46:20.250

也许你想删除`Indexes`或添加`-`这样的`-Indexes` [http://httpd.apache.org/docs/2.2/en/mod/core.html#options](http://httpd.apache.org/docs/2.2/en/mod/core.html#options)

# javascript - 扩大联系箱

> ID：13907590
> 
> 赞同：1
> 
> 时间：2012-12-17T02:33:33.620
> 
> 标签：javascript, html, css

所以我正在尝试制作一个扩展的联系人框，但在使用 javascript 时遇到了问题。当前这是我的代码：

```
 function openTab() {

            var tab = document.getElementById('contact_body');

            if(tab.style.display = 'none') {
                tab.style.display = 'block';
            } else if(tab.style.display = 'block') {
                tab.style.display = 'none';
            }

        } 
```

我正在这样做，以便当您单击下面的选项卡时，它会打开（这部分有效），然后当您再次单击它时，它会关闭（这不起作用）。

关闭：

![在此处输入图像描述](../Images/90342c9e4b61f01ff8267cdad12a2d87.png)

打开：

![在此处输入图像描述](../Images/6cbff61a3f5e09289d8603cb40b9e193.png)

标签可以打开，但不能关闭，为什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T02:34:53.330

它应该是两个“等于”符号，

```
if(tab.style.display == 'none') 
```

# ruby-on-rails - Apotomo 小部件中的 Kaminari，链接搞砸了

> ID：13907593
> 
> 赞同：0
> 
> 时间：2012-12-17T02:34:00.127
> 
> 标签：ruby-on-rails, kaminari, apotomo

我在 apotomo 小部件中有 Kaminari 分页。分页链接按预期呈现，直到触发 apotomo 事件。然后分页链接使用一个 href 呈现，该 href 似乎是上一个 apotomo 事件的 url：

```
transactions/render_event_response?...various parameters.... 
```

这让我发疯了。apotomo 和 kaminari 之间的 url_for_event 方法是否存在一些混淆？

Rails 3.2.3 Apotomo 1.2.3 Kaminari 0.14.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T00:09:14.267

这是 Kaminari 的一个问题，我在我的代码中添加了一个修复程序，该修复程序从 Kaminari 在从 apotomo 事件呈现的视图中添加的 url 中删除了不需要的数据。

在 application_helper.rb 中：

```
 def strip_apotomo_data_from_kaminari_url(url)
    url.gsub!('/render_event_response', '')
    if url =~ /\?/
      param_list = url.split('?')[1].split('&')
      param_list.reject!{ |p| p.start_with?('source', 'type') }

      url = url.split('?')[0] # strips all params
      url += '?'+ param_list.join('&')
    end
    url
  end 
```

然后我调用这个助手来更新来自 5 Kaminari 分页链接部分的 url：_page.html.erb、_first_page.html.erb 和 _last_page.html.erb、_prev_page.html.erb 和 _next_page.html.erb。[（请参阅附加到分页链接](https://stackoverflow.com/questions/6327917/unwanted-form-parameters-being-appended-to-pagination-links)的不需要的表单参数的答案）。

感谢 apotomo 的 Nick Sutterer 为我指明了正确的方向[https://groups.google.com/forum/?fromgroups=#!topic/cells-and-apotomo/vekawcXAHN0](https://groups.google.com/forum/?fromgroups=#!topic/cells-and-apotomo/vekawcXAHN0)

Kaminari 错误是：[https ://github.com/amatsuda/kaminari/issues/131](https://github.com/amatsuda/kaminari/issues/131)

# java - 启动时的 MySQL ExceptionInInitializerError Java JDBC

> ID：13907598
> 
> 赞同：0
> 
> 时间：2012-12-17T02:34:52.007
> 
> 标签：java, database, security, jdbc, applet

我正在制作一个使用 SQL 数据库的简单小程序。
当我在 Netbeans 上本地使用这个小程序时，它运行良好，没有问题，但是当我将它部署到 Web 时，我遇到了一个奇怪的错误。
我在本地使用 Java 1.6，而我部署的服务器正在运行 Java 1.6
我使用的是 J2BC 5.1.22。
这是我得到的错误：

```
java.lang.ExceptionInInitializerError
at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:315)
at java.sql.DriverManager.getConnection(Unknown Source)
at java.sql.DriverManager.getConnection(Unknown Source)
at FinalProject.DBConnect.<init>(DBConnect.java:29)
at FinalProject.TriviaApplet.init(TriviaApplet.java:61)
at com.sun.deploy.uitoolkit.impl.awt.AWTAppletAdapter.init(Unknown Source)
at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
    Caused by: java.security.AccessControlException: access denied
    ("java.util.PropertyPermission" "file.encoding" "read")
at java.security.AccessControlContext.checkPermission(Unknown Source)
at java.security.AccessController.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPermission(Unknown Source)
at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
at java.lang.System.getProperty(Unknown Source)
at com.mysql.jdbc.StringUtils.<clinit>(StringUtils.java:70) 
```

我用来初始化驱动程序的代码是：

```
 Class.forName("com.mysql.jdbc.Driver");
        connection = DriverManager.getConnection(connectionURL, "db", "pw"); 
```

有没有人知道为什么会发生这种情况？

补充一点，我的小程序从另一个类中获取所有信息。^ 以上来自 DBConnect 类。创建了这个类的一个实例，这个类完成了所有的数据库工作。这是作为小程序完成的要求。我已经签署了我的 jar 和包含 JDBC 驱动程序的 lib jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:40:59.100

这是由于网络安全问题。您的 JDBC 驱动程序如何部署到客户端？你给他们足够的许可吗？实际上，在applet中使用JDBC来访问数据库是无值的。

1.  它要求所有客户端都必须安装 JRE 和 CLASSPATH 中的 JDBC 驱动程序，您可以尝试将 JDBC 驱动程序与您的小程序打包在同一个 JAR 中。

2.  它需要通过在每个本地 JRE 中授予套接字连接来修改策略。

`permission java.net.SocketPermission "10.6.1.16:1521", "connect, resolve";`

这使得这个解决方案几乎没用..

# actionscript-3 - 如何在 Box2D / AS3 中制作鼠标控制的物理对象？

> ID：13907601
> 
> 赞同：1
> 
> 时间：2012-12-17T02:35:10.040
> 
> 标签：actionscript-3, box2d

我最近使用自己的基本物理学创建了这个网球游戏：http: [//martywallace.com/sandbox/tennis/](http://martywallace.com/sandbox/tennis/)

![在此处输入图像描述](../Images/97a116786461666c26dbcff9fcc43808.png)

基本上，网球拍粘在鼠标上，您就可以向上击打网球。

物理效果不是很好，我想在 Flash 中制作一个更有趣的游戏版本，其中包含里程碑和关卡。我打算使用 Box2D，因为我对它有一定的经验。

我不知道如何去创建球拍——据我了解 Box2D，球拍需要一个速度来影响你击球时球的速度（这样你就可以向上或更软地击球以保持它们向上）。话虽如此，我假设我不能只拥有一个将其位置设置为鼠标的运动体，因为它不会像预期的那样影响球的速度。

我还考虑过将速度设置为每帧球拍位置和鼠标之间的差异，但我担心这不会提供准确的定位，并且我还认为如果移动鼠标，速度最终可能会非常大迅速地。

将物理对象锁定到鼠标但同时使其在最后一帧中的位移（从它到鼠标的位置）影响球的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:02:17.083

如果你尝试你提到的关于设置运动体速度的方法，我想你会发现它工作得很好。您需要设置速度，以便球拍在一个时间步内移动到正确的位置。

# command-line - 如何从命令行运行 QTP 测试？

> ID：13907603
> 
> 赞同：4
> 
> 时间：2012-12-17T02:35:11.457
> 
> 标签：command-line, batch-file, qtp, automated-tests

在某些情况下，我需要从命令提示符启动和运行 QTP 测试。例如，我想使用 Windows 任务计划程序在整个晚上的不同时间运行 QTP 测试，但是（似乎）没有我可以使用的标志来打开 QTP.exe 并运行测试。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T02:35:11.457

确实，使用 QuickTest Pro，您不能通过调用 All hope is not lost来*直接*运行测试，但是。`C:\Program Files (x86)\HP\QuickTest Professional\bin\QTPro.exe "C:\Some Test\"`
有一种方法可以创建一个小的 VBS 文件，该文件可以在调用该 VBS 文件时运行任意 QTP 测试。**这比为每个测试创建一个批处理文件要好得多。**

```
'*******************************************************************
'RunThisTest
'by Michael Innes
'November 2012

testResourcePath = "C:\Test Logs and Results\"

'Getting the test path
Dim objArgs
Set objArgs = wscript.Arguments
testPath = objArgs(0)

'Determining that the test does exist
Dim objFSO
Set objFSO = CreateObject("Scripting.FileSystemObject")
DoesFolderExist = objFSO.FolderExists(testPath)
Set objFSO = Nothing

If DoesFolderExist Then
    Dim qtApp 'Declare the Application object variable
    Dim qtTest 'Declare a Test object variable
    Set qtApp = CreateObject("QuickTest.Application") 'Create the Application object
    qtApp.Launch 'Start QuickTest
    qtApp.Visible = True 'Make the QuickTest application visible
    qtApp.Open testPath, False 'Open the test in read-only mode
    Set qtTest = qtApp.Test

    'Set qtResultsOpt = CreateObject("QuickTest.RunResultsOptions") ' Create the Run Results Options object
    'qtResultsOpt.ResultsLocation = testResourcePath ' Specify the location to save the test results.
    'qtTest.Run qtResultsOpt,True 'Run the test and wait until end of the test run

    qtTest.Run 'Run the test
    qtTest.Close 'Close the test
    qtApp.Quit
Else
    'Couldn't find the test folder. That's bad. Guess we'll have to report on how we couldn't find the test.
    'Insert reporting mechanism here.
End If 
```

要使用上面的代码，请执行如下命令：`cscript.exe "C:\RunThisTest.vbs" "L:\Test Path\The Test Itself\"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T08:44:00.300

多线程驱动程序工具可以为您执行脚本。

```
> mdrv.exe -usr "c:\test\foo.usr" 
```

# mysql - 如何将此准备语句转换为在 Wordpress $wpdb 中使用占位符？

> ID：13907607
> 
> 赞同：1
> 
> 时间：2012-12-17T02:36:35.310
> 
> 标签：mysql, wordpress

在 Wordpress 3.5 之前，我有一个完美运行的 wpdb prepare 语句。这是我的线：

```
$post_id = $wpdb->get_var($wpdb->prepare( "SELECT a.post_id
        FROM $metatable AS a
        JOIN $metatable AS b ON a.post_id = b.post_id
        WHERE a.meta_value = '$valuex1' AND b.meta_value = '$valuex2'")); 
```

现在使用 Wordpress 3.5，这会返回一个警告，因为它没有被完全清理。我已按照 Wordpress 的建议对其进行了修改以使用占位符：

```
$post_id = $wpdb->get_var($wpdb->prepare("SELECT a.post_id FROM $metatable AS a JOIN $metatable AS b ON a.post_id = b.post_id WHERE a.meta_value =%d AND b.meta_value =%s",$valuex1,$valuex2)); 
```

但是，它不再从数据库中检索正确的信息。我修改后的查询有问题吗？如何更改它以使其再次工作？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T03:09:04.920

我的错，这太简单了！Wordpress 使用两个占位符 %s 和 %d。

将字符串传递给数据库时应使用 %s

尽管：

%d 应该用于整数。

我上面的问题是我把它们弄混了，我用 %d 表示字符串或用 %s 表示整数。因此，通过为您的特定数据类型使用正确的占位符来解决问题。问题解决了。

例如，如果您使用带有 php 变量 $id 的 id 查询数据库，则占位符应该是 %d，因为它是整数，否则对于字符串（例如名称等）使用 %s。

# javascript - 无法使用 Express 和 MongoDB/Mongoose 设置 Passport - 示例代码？

> ID：13907612
> 
> 赞同：3
> 
> 时间：2012-12-17T02:37:04.513
> 
> 标签：javascript, node.js, express, passport.js

我是 Node.js 的新手。尝试设置用户帐户创建并使用 Passport 登录。

我选择 Passport 是因为它很受欢迎，但是我似乎无法根据 Passport 网站上的文档拼凑出一个有效的身份验证过程。

有谁知道设置这个的教程？最好是可以下载源代码的地方。

我将分享我的 app.js 文件，也许这会揭示缺少的内容。

```
var express = require('express')
  , routes = require('./routes')
  , home = require('./routes/home')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path')
  , passport = require('passport')
  , LocalStrategy = require('passport-local').Strategy
  , flash = require('connect-flash');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ cookie: { maxAge: 60000 }, secret: 'keyboard cat' }));
  app.use(flash());
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

passport.serializeUser(function(user, done) {
  done(null, user);
});

passport.deserializeUser(function(obj, done) {
  done(null, obj);
});

passport.use(new LocalStrategy({
    usernameField: 'email',
    passwordField: 'password'
  },
  function(username, password, done) {
    User.findOne({ username: username }, function(err, user) {
      if (err) { 
        return done(err); 
      }
      if (!user) {
        return done(null, false, { message: 'Incorrect username.' });
      }
      if (!user.validPassword(password)) {
        return done(null, false, { message: 'Incorrect password.' });
      }
      return done(null, user);
    });
  }
));

app.get('/', routes.index);
app.post('/login',
  passport.authenticate('local', {
    successRedirect: '/home',
    failureRedirect: '/',
    failureFlash: true
  })
);
app.get('/home', home.dashboard);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

注意：此代码只是在尝试登录时将我返回到根页面。我意识到此时我没有任何实际的用户帐户，但是我希望至少可以使用假用户成功登录。我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T05:15:32.487

```
var express = require('express')
  , routes = require('./routes')
  , home = require('./routes/home')
  , user = require('./routes/user')
  , http = require('http')
  , mongodb = require('mongodb')
  , mongoose = require('mongoose')
  , path = require('path')
  , passport = require('passport')
  , LocalStrategy = require('passport-local').Strategy
  , flash = require('connect-flash')
  ;

var app = express();

mongoose.connect('mongodb://localhost/test');
var db = mongoose.connection;
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function callback () {
  console.log('Connected to DB');
});
var userSchema = mongoose.Schema({
    username: String,
    password: String
});
userSchema.methods.validPassword = function (password) {
  if (password === this.password) {
    return true; 
  } else {
    return false;
  }
}
var User = mongoose.model('User', userSchema);
var user = new User({ username: 'andrew', password: 'secret' });
user.save();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ cookie: { maxAge: 60000 }, secret: 'keyboard cat' }));
  app.use(flash());
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

passport.serializeUser(function(user, done) {
  done(null, user);
});

passport.deserializeUser(function(obj, done) {
  done(null, obj);
});

passport.use(new LocalStrategy(function(username, password, done) {
    User.findOne({ username: username }, function(err, user) {
      if (err) { 
        return done(err); 
      }
      if (!user) {
        return done(null, false, { message: 'Incorrect username.' });
      }
      if (!user.validPassword(password)) {
        return done(null, false, { message: 'Incorrect password.' });
      }
      return done(null, user);
    });
  }
));

app.get('/', routes.index);
app.post('/login',
  passport.authenticate('local', {
    successRedirect: '/home',
    failureRedirect: '/',
    failureFlash: true
  })
);
app.get('/home', home.dashboard);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:12:10.743

有一个示例使用`passport-local`with`Express`作为[passport-local source](https://github.com/jaredhanson/passport-local/tree/master/examples/express3)的一部分。`failureRedirect`设置对页面的`passport.authenticate`调用`login`并将必要的代码添加到您的登录视图模板以显示 Flash 消息可能会有所帮助，请参阅链接源。如果您需要更多帮助，请查看其他护照模块的来源。

看来问题可能出在`LocalStrategy`. 该`User`模型似乎不是必需的。

# android - Android NDK 和 C++ STL

> ID：13907613
> 
> 赞同：4
> 
> 时间：2012-12-17T02:37:43.463
> 
> 标签：android, c++, android-ndk, java-native-interface

在为 iOS 项目编译我的 C++ 时，一切正常。但是，我在 Android 上遇到了困难。

我的 Application.mk 内容如下：

```
APP_ABI := armeabi armeabi-v7a
APP_PLATFORM := android-11
APP_STL := stlport_shared 
```

所有 LOCAL_SRC_FILES 都已定义。

当我尝试构建我的模块时，我收到以下编译器错误：

```
jni/Game.hpp: In member function 'const std::pair<pos, Obj*>* MyEnumerator::next()':
jni/Game.hpp:126:23: error: expected type-specifier
jni/Game.hpp:126:23: error: cannot convert 'int*' to 'std::pair<pos, Obj*>*' in assignment
jni/Game.hpp:126:23: error: expected ';' 
```

上面提到的代码行是：

```
this->ptr = new pair<pos, Obj*>::pair(it->first, it->second); 
```

在这里，`ptr`是类型`pair<pos, Obj*>*`并且`pos`是结构。我已经声明了`using std::pair;`。

关于什么是错误的以及尝试什么的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T03:04:31.823

尝试将行更改为：

`this->ptr = new std::pair<pos, Obj*>(it->first, it->second);`

恕我直言，丢失 using 指令并使用完全限定名称。它干净、精确，并且不允许命名冲突。如果你必须使用它们，不要在头文件中使用它们，只在你的实现文件中使用它们。

# php - 在 MySQL 中处理具有多个用户 ID 和列的每周数据

> ID：13907614
> 
> 赞同：0
> 
> 时间：2012-12-17T02:37:45.563
> 
> 标签：php, mysql, database

我有一个每周运行的 cron，它从 API 中获取数据并将这些数据存储在数据库中。我想将不同的数据保存在不同的列中，但能够查看分组到第 #x 周或其他内容的每组数据。存储此数据的最佳方法是什么，以便我可以在该数据库中查看每周数据（按周分组的多列值），其中每一行都是具有唯一 ID 的不同用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:22:37.673

您只需为星期一的日期添加一个特殊列，然后可以在星期一之前获取每周数据。

```
ID
your data
monday (YYYYMMDD or Timestamp)
create_date
update_date 
```

# javascript - 为按 Id 排序的 each() 元素运行一个函数，而不是 dom 位置

> ID：13907616
> 
> 赞同：0
> 
> 时间：2012-12-17T02:38:07.583
> 
> 标签：javascript, jquery

我有一个可以在 dom 中重新排列的单词列表，我需要按特定顺序抓取它们中的每一个。我已经（有点）计算了我需要它们的顺序，并使用 jQuery 将该数字用作它们的 ID。

我的问题是如何从编号最低的 ID 开始并以最高编号结束它们中的每一个？

html 看起来像这样：

```
<span class="chosenword" id="577.9848041534424" style="position: absolute; top: 320px; left: 442.9999694824219px; z-index: 1;">Word!</span> 
```

JS是这样的：

```
 $('.chosenword').each(function(){
   var position = $(this).position();
   var id = ((position.left) * (position.top));
   $(this).attr('id', id);
  var chosenword =  $(this).html();

   $('#chosenwords').append(chosenword);
   $('#chosenwords').append(" ");
    }); 
```

请注意，我实际上并没有抓取具有 Id 的环绕 Span，因此在抓取它们之后我无法真正重新排列它们，至少我不想这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:44:46.963

[`.sort()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)首先它们，然后`.each()`像​​你已经在做的那样循环：

```
$($('.chosenword').toArray().sort(function(a,b){return +a.id - b.id;})).each(function(){
   // your existing code here
}); 
```

或者，如果您缓存 jQuery 对象，您可以对其进行排序，这样您就不必在排序后创建另一个 jQuery 对象：

```
var $chosen = $('.chosenword');
[].sort.call($chosen, function(a,b){return +a.id - b.id;});
$chosen.each(function() {
    // your existing code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T03:04:39.593

2件事：

尽量不要在 id 处使用数字。一般来说，标识符以字母或下划线开头是最好的。

```
<div><span class="chosenword" order="1">Word 1</span> - 
<span class="chosenword" order="550">Word 550</span> - 
<span class="chosenword" order="57">Word 57</span>
</div> - 
<div id="chosenwords"></div>​ 
```

尝试对数组进行排序，然后在设置它们的顺序后遍历它们中的每一个

```
$('.chosenword').each(function(){
    var position = $(this).position();
    var order = ((position.left) * (position.top));
    $(this).attr('order', order);
});

$('.chosenword').sort(sortByOrderAttr).each(function() {
   var chosenword = $(this).html() + " - ";
    $('#chosenwords').append(chosenword);
});

function sortByOrderAttr(a, b) {
    var idA = parseInt($(a).attr('order'));
    var idB = parseInt($(b).attr('order'));
    if (idA < idB) {
        return -1;
    } else {
        return 1
    }
}​ 
```

# javascript - 测试元素是否在前面的简单方法？

> ID：13907617
> 
> 赞同：5
> 
> 时间：2012-12-17T02:38:09.090
> 
> 标签：javascript, jquery, z-index

页面中的两个元素具有相同的 z-index...

```
<div id="one" style="position: absolute; z-index: 1; top: 0px; left: 0px;"></div>
<div id="two" style="position: absolute; z-index: 1; top: 0px; left: 0px;"></div> 
```

div 2 出现在前面，因为它在源中的 div 1 之后。

在 jQuery 中是否有一种简单的方法来测试一个元素是否在另一个元素的前面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:26:49.843

这可能会有所帮助：我正在获取传递元素的偏移量并将其与从 elementFromPoint 收到的元素进行比较。

```
function checkClickable(id){
    var element = document.getElementById(id);
    var newElement = document.elementFromPoint(element.offsetLeft, element.offsetTop);
    if(newElement){
        if(newElement.id == id)
            return true;
    }
    return false;
} 
```

您可以将其用作基础。

# android - EditText 中的 drawableLeft 和 drawableStart 有什么区别？

> ID：13907618
> 
> 赞同：15
> 
> 时间：2012-12-17T02:38:13.107
> 
> 标签：android

起初我以为当我将系统语言更改为阿拉伯语时，drawableStart 会自动更改图标的位置，这是一种从右到左书写的语言。但是当我这样做时，什么也没发生。所以我猜他们是一样的？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-06-24T20:57:21.407

我不确定上面的答案是否正确。根据我的实验，除非您更改语言并启用 RTL 支持，否则图标始终会出现在同一个位置。

`drawableStart`并且只有在 API 级别 17 及更高版本中[启用 RTL 支持](http://android-developers.blogspot.com/2013/03/native-rtl-support-in-android-42.html)`drawableEnd`时才开始切换。

> 将应用的所有“左/右”布局属性更改为新的“开始/结束”等效项。
> 
> *   如果您将应用程序定位到 Android 4.2（应用程序的 targetSdkVersion 或 minSdkVersion 为 17 或更高版本），那么您应该
>     使用“start”和“end”而不是“left”和“right”。例如，
>     android:paddingLeft 应该变成 android:paddingStart。
>     
>     
> *   如果您希望您的应用程序使用低于 Android 4.2 的版本（应用程序的 targetSdkVersion 或 minSdkVersion 为 16 或更低），那么您应该在“left”和“right”之外添加“start”和 end”。例如，您将同时使用 android:paddingLeft 和 android:paddingStart。

# css - IE7 有非常奇怪的 z-index 问题

> ID：13907620
> 
> 赞同：1
> 
> 时间：2012-12-17T02:38:51.810
> 
> 标签：css, position, z-index, internet-explorer-7

我已经盯着这个看了好几个小时，阅读了几十篇讨论 IE7 中 z-index 怪癖的帖子，我似乎无法摆脱这个错误。也许与我一直盯着这段代码持续 10 个小时的事实有关：)

如果你在 IE7 中打开下面的地址，这个 bug 就很明显了。当页面加载时，将鼠标悬停在主导航上的菜单项上，您会注意到下拉菜单被强制放在标题幻灯片图像后面。我似乎已经尝试了所有方法，但当然在某个地方有一个解决方案......

我计划禁用 IE6 站点，并弹出一个提示用户考虑进入这十年的弹出框，但对于 IE7，我希望它能够工作。

[http://demo.curotec.net/bridge/](http://demo.curotec.net/bridge/)

任何帮助都是极好的！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:10:43.137

只在 IE7 上试试这个

.homeslider.topslideshowwrapper{位置：相对；z-index:-1;}

# mpmovieplayercontroller - 什么应该是更好的方法，MPMoviePlayerController 或 AVFoundation

> ID：13907623
> 
> 赞同：1
> 
> 时间：2012-12-17T02:39:47.987
> 
> 标签：mpmovieplayercontroller, avfoundation

我想制作一个可以播放本地视频文件以及 HTTP 流的播放器，播放器应该有自定义的 ui 控件，在视频屏幕顶部手动呈现的字幕，在播放器顶部具有透明背景显示的自定义内容。

我应该有什么更简单的方法来实现这样的播放器、MPMoviePlayerController 或 AV Foundation？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:20:31.623

由于您需要显示字幕，因此最好使用`AVPlayer`，不幸的是 MPMoviePlayer 播放类中缺少此功能。这显然很烦人，您应该考虑向 Apple 提交功能请求。您可以改用`AVPlayer`该类，将其用作`.closedCaptionDisplayEnabled`属性：缺点是使用起来有些复杂，并且仅在 iOS 4.0+ 上可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T19:41:05.030

我会选择 MPMoviePlayerController。它的级别更高一些，因此实现起来需要的工作更少。

MPMoviePlayerController 提供了一个 UIView 来显示视频，你可以将任何你喜欢的内容添加到这个视图中。文档说：

```
You can add subviews to the view in this property. You might do this
in cases where you want to display custom playback controls or add
other custom content that is relevant to your app. 
```

如果您愿意，也可以使用 MPMoviePlayerViewController 来显示视图，或者只是将视图添加到现有视图之一。

它将为您显示控件，但您可以轻松关闭此功能并显示您自己的自定义控件。您必须使用 AVPlayer 来执行此操作，因为它不提供任何用户控件。

我不确定@MilKyWaY 的意思是“由于您需要显示字幕，因此最好使用 AVPlayer，不幸的是 MPMoviePlayer 播放类中缺少此功能。” 这正是 MPMoviePlayerController 的 view 属性的用途。AVPlayer 没有提供更好的显示自定义标签的功能，尽管您也可以这样做。

# asp.net-mvc - 为什么我的下拉列表的初始值没有显示？

> ID：13907624
> 
> 赞同：0
> 
> 时间：2012-12-17T02:39:49.063
> 
> 标签：asp.net-mvc, drop-down-menu

为什么我的下拉列表的初始值没有显示？我在用着：

```
@Html.DropDownList("DropDownValues", new SelectList(ViewBag.sellectedSubjectsId, "Initial Value")); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:49:00.837

尽量避免使用动态的东西，比如在动作方法`ViewBag`和`ViewData`视图之间传输数据。使用强类型视图模型。

假设您的视图是创建一门新课程，用户必须从主题列表中选择一个主题，创建这样的视图模型

```
public class CourseVM
{
  public List<SelectListItem> Subjects { set;get;}
  public int SelectedSubject { set;get;}
  public CourseVM()
  {
    Subjects=new List<SelectListItem>();
  }
} 
```

在您的`GET`操作中，创建视图模型的对象并填充 Subjects 属性。

```
public ActionResult Create()
{
  var vm=new CourseVM();
  //the below is for demo. replace with database data
  vm.Subjects.Add(new SelectListItem{ Value="1", Text="Maths"});
  vm.Subjects.Add(new SelectListItem{ Value="2", Text="English"});
  return View(vm);
} 
```

现在在您的视图中，这对您的视图模型是强类型的。

```
@model CourseVM
@using (Html.BeginForm())
{
 //Other form elements as well
 @Html.DropdownListFor(x=>x.SelectedSubject,
                     new SelectList(Subjects,"Value","Text"),"Select one")
  <input type="submit" />
} 
```

# javascript - 元素的内部行为

ID：13907625

赞同：5

时间：2012-12-17T02:40:19.890

标签：javascript, html, extjs

# xcode - SimpleAudioEngine：手机休眠后没有音乐

> ID：13907631
> 
> 赞同：0
> 
> 时间：2012-12-17T02:41:24.507
> 
> 标签：xcode, cocos2d-iphone, audio, simpleaudioengine

我只想问是否可以在设备休眠时停止播放音乐？

我`SimpleAudioEngine`用来播放音乐。一位用户声称当他的手机睡觉时音乐停止播放，从设置中打开和关闭声音（有一个开/关功能）并没有解决问题。

我试图重现这个错误，但我无法重现它。有没有人遇到过这种问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:30:05.693

在 appDelegate:----

```
void AppDelegate::applicationWillEnterForeground()
{
    CCDirector::sharedDirector()->resume();
    CCDirector::sharedDirector()->startAnimation();

    // if you use SimpleAudioEngine, it must resume here
     SimpleAudioEngine::sharedEngine()->resumeBackgroundMusic();
} 
```

# ruby-on-rails - Rails Dreamhost SQL 服务器 VPS

> ID：13907635
> 
> 赞同：0
> 
> 时间：2012-12-17T02:42:15.647
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, dreamhost

我遵循了以下教程：[http](http://wiki.dreamhost.com/RVM) ://wiki.dreamhost.com/RVM 。现在，如果我像使用 SQLite3 一样跟随它，它会很好用。虽然如果我尝试通过放入 gem 文件来更改为 mysql 数据库

```
gem "mysql2" 
```

然后在数据库中安装一个database.yml，如下所示

```
production:
 adapter: mysql2  
 encoding: utf8  
 host: localhost
 database: test-mysql2_production  
 pool: 5  
 username: test_user
 password:  
 socket: /tmp/mysql.sock 
```

我在 vps 上添加 database.yml 的原因是它没有创建一个。我仍然发现自己有问题，因为我尝试创建命令 rake db:create 并收到以下错误

找不到数据库，没有找到带密码的用户。有什么我想念的吗？或者因为它是一个实时服务器，我不应该这样做并以不同的方式创建我的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:15:09.300

你有没有从他们的cpanel 在dreamhost 上创建一个mysql 数据库？

那么您需要一个有权访问数据库的用户。

在尝试从 Rails 连接到它之前，请尝试直接从命令行连接到 mysql db 以确保它正常工作。这应该有帮助：[http ://www.cyberciti.biz/faq/how-do-i-access-mysql-server-from-the-shell-prompt-command-line/](http://www.cyberciti.biz/faq/how-do-i-access-mysql-server-from-the-shell-prompt-command-line/)

是的，与为您创建一个的 heroku 不同，您需要一份 database.yml

# javascript - jQuery动画链接在运行时改变动画速度

> ID：13907636
> 
> 赞同：2
> 
> 时间：2012-12-17T02:42:31.693
> 
> 标签：javascript, jquery, jquery-animate

我正在尝试使用 jQuery animate 方法对对象进行一些翻译。

考虑以下代码段：

```
$(function() {
$('#camion').animate({ top: 120, left: 180}, $('#vitesse').val());
$('#camion').animate({ top: 180, left: 180}, $('#vitesse').val());
$('#camion').animate({ top: 220, left: 180}, $('#vitesse').val());
$('#camion').animate({ top: 330, left: 180}, $('#vitesse').val());
}); 
```

现在，$('#vitesse') 是一个文本框。$('#camion') 元素是需要在页面中动画到 4 个检查点的图像。我想要实现的是能够在每个检查点之后改变动画的速度。因此，如果我在第一个和第二个动画之间更新文本框，第三个动画会更快或更慢，具体取决于我写的内容。

我已经尝试过`$.fn.delay`  但`setTimeout`不太能够做到这一点，它仍然使用文本框中的第一个值，并且从不使用其他任何东西。

我应该怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:00:32.247

由于 javascript 是异步的，因此您的所有动画都在同时运行。因此，`$('#vitesse').val()`一旦调用该函数，您在所有 4 个调用中的值都是相同的。您可以通过在动画调用中使用回调函数来解决此问题。

```
var txtBox = $('#vitesse'),
    camion = $('#camion');

camion.animate({ top: 120, left: 180}, txtBox.val(), function() {
    camion.animate({ top: 180, left: 180 }, txtBox.val(), function() {
        // keep going or write this recursively.
    });
}); 
```

# javascript - 这有多安全？

> ID：13907638
> 
> 赞同：0
> 
> 时间：2012-12-17T02:42:40.790
> 
> 标签：javascript, html, security

我希望能够让特定用户严格访问我的网页，而不是通过 IP；但通过 Javascript 和 HTML。

获取安全字符串有多容易？

```
function fc4me(srvstr) {

   if(!document.pleazfc4me.email.value || !document.pleazfc4me.securitystring.value) {
      alert("Please fill in all the required fields!");
      return false;
   }
   if(document.pleazfc4me.securitystring.value != hexMD5("\x73\x73"+srvstr)) {
      alert("Registration Authorization String not accepted! Try Harder! ");
      return false;
    } else {
      document.pleazfc4me.submit();
    }

} 
```

和另一页？

```
Security String<font color="orange">*</font>:
<input type="text" name="securitystring" size="35">
<input onClick="var srvstr='foo';fc4me(srvstr);document.pleazfc4me.securitystring.value='';return false;" name="submit" type="image" src="images/button-submit.png" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:47:12.883

只有那些不够聪明，无法查看您的源代码的人才安全。哎呀，关闭 JavaScript 并提交表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T02:48:36.583

在客户端做任何事情*都不*安全。您应该对服务器端进行身份验证检查。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T02:49:14.153

没关系。`document.pleazfc4me.submit();`在控制台中，您完全绕过检查。

我可以轻松地完全关闭 JS，表单将作为默认行为提交。

您可以根据需要使用尽可能多的混淆，但除非您在**服务器端**代码中进行一些检查以拒绝未经授权的用户，否则任何人都可以绕过它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T03:22:52.970

您在 javascript 中所做的只是字段验证，实际上并没有增加页面的安全性。在开始处理请求之前，您始终可以检查您提交到的页面中的参数。这将减少回旋时间。

如果您想在同一页面本身显示消息，您甚至可以使用 AJAX 来验证字段。

# java - Java：Spring MVC 3\. 尝试将查询字符串参数映射到方法参数时出现 404 错误

> ID：13907639
> 
> 赞同：1
> 
> 时间：2012-12-17T02:42:53.477
> 
> 标签：java, spring-mvc

**背景**

我来自 .NET 背景，Spring MVC 对我来说是新的。一般来说，我对Java不是很好，所以请以即使是Java新手也容易理解的方式回答。

**问题**

我正在尝试构建一个简单的 CRUD 控制器。我让主页正常工作（查看全部），但是在我使用 @RequestParam 尝试将查询字符串值映射到方法参数的页面上，我不断收到 404 错误。

**主视图**

```
<html>
    <head>
        <title>Users - KSC Technology & Sciences</title>
        <jsp:include page="../headParts.jsp" />
    </head>
    <body>
        <jsp:include page="../topMenu.jsp" />
        <div id="body" class="container-fluid">
            <div class="row-fluid">
                <div class="span3">
                    <jsp:include page="../leftMenu.jsp" />
                </div>
                <div class="span9">
                    <div class="row-fluid">
                        <a href="/users/create" class="btn btn-primary">Create</a>
                        <hr />
                        <table class="table table-bordered table-striped">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>User Name</th>
                                    <th>E-mail</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <c:forEach var="row" items="${records}">
                                    <tr>
                                        <td><c:out value="${row.id}" /></td>
                                        <td><c:out value="${row.userName}" /></td>
                                        <td><c:out value="${row.email}" /></td>
                                        <td>
                                            <a href="/users/edit?id=${row.getId()}" class="btn">Edit</a>
                                            <a href="/users/delete?id=${row.getId()}" class="btn btn-danger">Delete</a>
                                        </td>
                                    </tr>
                                </c:forEach>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <hr />
        <jsp:include page="../footer.jsp" />
    </body>
</html> 
```

**控制器**

```
@Controller
public class UserController {

    @EJB(mappedName="java:global/KSC/UserService!com.ksc.services.UserService")
    private UserService service;

    @RequestMapping(value = "/users")
    public String index(ModelMap model) {
        model.addAttribute("records", service.findAll());
        return "user/index";
    }

    @RequestMapping(value = "/users/create")
    public String create(ModelMap model) {
        model.addAttribute("record", new KCSUser());
        return "user/edit";
    }

    @RequestMapping(value = "/users/edit")
    public String edit(ModelMap model, @RequestParam(value="id") String id) {
        int userId = Integer.parseInt(id);
        model.addAttribute("record", service.find(userId));
        return "user/edit";
    }

    @RequestMapping(value = "/users/delete")
    public String delete(ModelMap model, @RequestParam(value="id") String id) {
        int userId = Integer.parseInt(id);
        KCSUser user = service.find(userId);
        service.remove(user);

        return index(model);
    }
} 
```

我可以访问主视图，但是当单击编辑（例如）时，我得到一个 404。我做错了什么？

**编辑**

目录结构：

![在此处输入图像描述](../Images/249e1c64ae0f44da5f8ee396cd3fc229.png)

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/dispatcher-servlet.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>/</welcome-file>
    </welcome-file-list>
</web-app> 
```

调度程序-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <context:component-scan base-package="com.ksc.controllers" />
    <mvc:annotation-driven />
</beans> 
```

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">
</beans> 
```

现在我想起来了，我确实不得不稍微破解 web.xml 和 dispatcher-servlet.xml 文件，因为 Netbeans 生成的文件不起作用..所以我从一些在线资源中复制了它。我没有更改applicationContext.xml，但我看到它针对的是Spring 2.5 ..我很困惑..有人可以给我Spring 3.1的工作配置文件吗？也许这就是这里的问题？

**编辑 2**

感谢@RC，它可以正常工作。我必须改变他的回答的唯一一件事就是`@RequestMapping`从课堂上删除并只让它们出现在方法上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:10:23.957

问题是`@RequestParam`这个注释告诉spring MVC在请求中寻找参数（即带有名称的表单元素）。最好在这里使用模板：

```
@Controller
@RequestMapping("/users")
public class UserController {

    @EJB(mappedName="java:global/KSC/UserService!com.ksc.services.UserService")
    private UserService service;

    @RequestMapping(value = "")
    public String index(ModelMap model) {
        model.addAttribute("records", service.findAll());
        return "user/index";
    }

    @RequestMapping(value = "/create")
    public String create(ModelMap model) {
        model.addAttribute("record", new KCSUser());
        return "user/edit";
    }

    @RequestMapping(value = "/edit/{id}")
    public String edit(ModelMap model, @PathVariable("id") int userId) {
        KCSUser user = service.find(userId);
        // Assert.notNull(user, "user was not found");
        model.addAttribute("record", user);
        return "user/edit";
    }

    @RequestMapping(value = "/delete/{id}")
    public String delete(ModelMap model, @PathVariable("id") int userId) {
        KCSUser user = service.find(userId);
        // Assert.notNull(user, "user was not found");
        service.remove(user);

        return index(model);
    }
} 
```

*文档[`here`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)*

在主视图中：

```
<a href="${pageContext.request.contextPath}/users/create" class="btn btn-primary">Create</a>
<!-- ... -->
<a href="${pageContext.request.contextPath}/users/edit/${row.id}" class="btn">Edit</a>
<a href="${pageContext.request.contextPath}/users/delete/${row.id}" class="btn btn-danger">Delete</a> 
```

**编辑：**

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd>
</beans> 
```

您的问题是我认为您使用的映射器，您可以删除并重`<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>`试吗？

# macos - Zinc (4.x) 应用程序无法从 CD 打开，但可以从 Mac 的桌面打开

> ID：13907642
> 
> 赞同：2
> 
> 时间：2012-12-17T02:43:05.827
> 
> 标签：macos, flash, cd, mdm-zinc, zinc-4

我编译了一个失败的简单应用程序，它只加载图像、文本并通过 mdm.System 打开一些 pdf

它在 Windows 上完全按照预期工作，但在 Mac 上，它甚至不会尝试在它在光盘上时启动，而是在复制到任何它会的地方时。swf 在 Flash Player 8 下使用它，因为它使用的是 AS2。此外，Zinc 上使用的 Flash 播放器的“捆绑”版本是 10。测试的 mac 是 OSX 10.6.8。

最后，为了提供上下文，CD 上的应用程序图标显示为默认值（引擎的东西），但是当从 CD 中复制出来时，它又变回了我的自定义图标……这很奇怪。

这是系统的某种限制吗？或者数据是否以某种方式损坏？

我认为如果有办法将 mdm 插件“附加”到定期创建的 mac 投影仪中（例如，仅使用 Adob​​e Flash），它可以解决

谢谢你的阅读。

# python - 装饰器模块 vs functools.wraps

> ID：13907644
> 
> 赞同：11
> 
> 时间：2012-12-17T02:43:23.190
> 
> 标签：python, python-3.x, decorator

[`decorator`模块](http://micheles.googlecode.com/hg/decorator/documentation3.html)的功能与此密切[`functools.wraps`](http://docs.python.org/3.4/library/functools.html#functools.wraps)相关。两者之间有什么区别（从 Python 3.3 / 3.4 开始）？

我知道一个区别：[3 多年前](https://stackoverflow.com/questions/308999/what-does-functools-wraps-do#comment1685921_309000)，`decorator`支持帮助，而`wraps`没有（另请参阅[此](https://stackoverflow.com/questions/1782843/python-decorator-problem-with-docstrings/1782888#comment1670277_1782888)）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T03:22:06.450

您链接到的文档中列出了主要区别之一：`decorator`保留包装函数的签名，而`wraps`没有。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-14T09:22:37.230

根据与 BrenBarn 的讨论，现在`functools.wraps`还保留了包装函数的签名。恕我直言，这使得`decorator`装饰器几乎过时了。

```
from inspect import signature
from functools import wraps

def dec(func):
    def wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return wrapper

def dec2(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return wrapper

def foo(a: int, b):
    pass

print(signature(dec(foo)))
print(signature(dec2(foo)))

# Prints:
# (*args, **kwargs)
# (a:int, b) 
```

请注意，必须使用`signature`而不是`getargspec`. 用 python 3.4 测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-26T17:27:53.797

有两个区别：

*   `decorator`**即使在 python 3.7**中，也能真正保留签名而`functools.wraps`不会。通过签名，我的意思是当然，而且包装器在不执行的情况下提出正确的，*以防*用户提供错误的参数。正如[这篇文章](https://stackoverflow.com/a/55102697/7262247)中所解释的，*似乎*保留了签名，但并没有真正保留它。**`help()``signature()``__dict__``TypeError` *`functools.wraps`***

*****   当参数不是 var-positional 时，`decorator`您总是会收到参数`kwargs`- 这使得实现包装器变得更加容易。由于`functools.wraps`根据名称获取参数值要困难得多，因为它可能在 in `*args`、 in`**kwargs`或无处（如果它是可选参数并且不是由用户提供的）**** 

 ****由于我非常喜欢`functool.wraps`API 但又想解决以上两个问题，所以我创建了[`makefun`](https://smarie.github.io/python-makefun/). 它提出了一个泛化`@wraps`，使用与 完全相同的技巧`decorator`，甚至支持签名修改，例如添加和删除参数。它已经被多个项目使用，请不要犹豫尝试一下！****

# reportbuilder3.0 - 报表生成器 3.0。图形的背景 PatternType 自动？

> ID：13907645
> 
> 赞同：1
> 
> 时间：2012-12-17T02:43:33.807
> 
> 标签：reportbuilder3.0

是否可以将背景图案样式设置为自动。如果客户想要以黑白打印报告，这将非常有用。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T11:16:15.063

`@auto`如果您希望客户在公司的 lou 中指定自动背景，您将需要一个参数，我建议您使用 的布尔值。

由于背景颜色是文本字段`Automatic`，因此是您想要的文本。

在表达式字段中使用以下公式：

```
=IIf(@auto, "Automatic", "Corporate") 
```

# ubuntu - tar a .tgz 但 autoconf 配置不正确

> ID：13907657
> 
> 赞同：0
> 
> 时间：2012-12-17T02:46:16.180
> 
> 标签：ubuntu, tar, configure, autoconf

使用 Ubuntu，有文件`clhep-2.1.2.4.tgz` 说明说“解开源代码 tar 球和 autoconf 和 automake 将已经运行。” 然后它说要执行标准的“/configure --prefix=[path]”、“make”、“make install”...

所以我做了

```
$tar -xvzf clhep-2.1.2.4.tgz 
```

然后在结果内部`2.1.2.4/CLHEP/`是我应该做的地方`./configure part`......但是`./configure`不在那里，只有我从一些研究中学到的 ./configure.ac 应该产生`./configure`......问题是当我运行时`./configure.ac`我得到：

```
./configure.ac: line 11: syntax error near unexpected token '2.59'

./configure.ac: line 11: 'AC_PREREQ(2.59)' 
```

我很肯定我有`autoconf2.59`并且我已经运行了我所有的更新和升级，但是我对如何解决这个问题一无所知，因为我没有编写脚本并且我不知道为什么它是一个语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T12:27:29.160

好像`configure`还没有制作脚本。您可以通过以下方式生成它：

```
$ autoreconf -fis 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T16:47:05.977

看来这个包的文档有点老了（网站文档只带你安装 2.0 版的 infor）。我认为这与对 Cmake 的更改有关。您应该在 中找到正确的说明`INSTALL.autoconf`来帮助生成配置文件，或者使用 cmake 安装说明`INSTALL.cmake`

这两个文件都在 CLHEP 目录中。无论如何，似乎缺少的是一个电话`./bootstrap`

# actionscript-3 - AS3 - 显示启动画面，直到加载所有代码

> ID：13907661
> 
> 赞同：0
> 
> 时间：2012-12-17T02:46:52.887
> 
> 标签：actionscript-3, air

我正在开发一个 adobe air 移动应用程序，启动它后，如果我立即单击按钮，声音不会播放。如果我等待几秒钟，按钮会正常工作。如何在所有内容加载之前在顶部显示电影剪辑/启动画面，这样我就没有这个问题？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:21:17.493

您的声音是嵌入在应用程序中还是在运行时加载它们？我假设是嵌入式的，但在这种情况下，它们不应该花时间才可用。

如果在运行时加载声音，只需响应 Event.COMPLETE 即可隐藏启动画面。如果您没有要响应的事件，或者使用 setTimeout 适当的延迟：

```
//wait 5000ms
setTimeout(hideSplashScreenFunction, 5000);
....
function hideSplashScreen():void
{
    //hide splash screen
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:07:43.797

您可以设置`splashScreenMinimumDisplayTime`可以实现的属性。像这样

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
            splashScreenImage="@Embed('assets/icons/chrome/logo.png')"
            splashScreenMinimumDisplayTime="4000" splashScreenScaleMode="none"> 
```

希望它会帮助你。

# html - 标题上的固定 div 不应在提交时刷新

> ID：13907664
> 
> 赞同：1
> 
> 时间：2012-12-17T02:47:24.137
> 
> 标签：html, form-submit

我在顶部创建了一个固定的 Div。

**css**

```
#header {
position: fixed;
top: 0px;
height: 20px;
width: 100%;
background: green;
} 
```

我希望，当我提交页面时，标题上的固定 div 不应该刷新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:57:05.217

如果您只想加载 HTML 页面的一部分，那么 AJAX 是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T03:48:25.523

如果您希望页面的一部分保持不变（如网站徽标）并且主要内容可导航，请使用框架。

# sql - Oracle 数据库行检查点

> ID：13907666
> 
> 赞同：0
> 
> 时间：2012-12-17T02:47:53.433
> 
> 标签：sql, database, oracle, row, checkpoint

我正在尝试从 oracle 数据库表中爬取数据，并想要一个解决方案来为行创建检查点。

*   基本上，爬虫最多爬500行，然后停止应用程序处理数据。2 分钟后，爬虫必须从最后一行（检查点）继续。

*   目前，我正在使用带有 rownumber 的解决方案，但结果表明缺少某些行。

这可能是一个基本问题，但缺乏处理数据库的经验。我只是找不到可接受的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:07:12.700

通常，您不会以这种方式设计系统。通常，您的应用程序会简单地打开一个游标，获取 500 行，在应用程序中处理这些行，获取接下来的 500 行，等等。只要您不关闭游标，Oracle 将继续返回系统的结果打开光标时更改编号 (SCN)。游标打开后添加的行不返回，游标打开后删除的行将返回。由于读取器不会阻止 Oracle 中的写入器，因此这种方法不会阻止任何其他应用程序使用该表（这在其他数据库中通常是一个问题）。

如果您真的想按照您描述的方式设计一个系统，您需要有一个列（或一组列），您可以一致地对其进行排序。这必须类似于单调递增的主键（例如，序列生成的主键）。然后你可以做类似的事情

```
SELECT *
  FROM( SELECT a.*,
               rownum rn
          FROM( SELECT *
                  FROM table_name
                 ORDER BY some_key ) a
         WHERE rownum <= MAX_ROW)
 WHERE rn >= MIN_ROW 
```

当然，使用这种分页查询，当您接近表格的“末尾”时，您的过程将变得越来越慢。获取前 500 行将相当有效，因为您只需对前 500 行进行排序。当您获取第 9,500 到 10,000 行时，您将排序 20 倍的数据，因此查询可能会慢一个数量级。如果您的表很大，这通常会导致性能很差。您可以（稍微）通过在内部查询中添加翻转顺序的逻辑来提高性能，并在您获取一半页面后开始获取“早期”页面。

这种方法也可能会丢失行。例如，如果插入`ID`502 的事务提交，那么您获取第 501-550 行，然后插入“ID” 501 的事务提交，您将看到第 502 行，但看不到第 501 行。

# sql - 事务脚本也是 NoSQL 数据库的反模式吗？

> ID：13907673
> 
> 赞同：1
> 
> 时间：2012-12-17T02:49:33.450
> 
> 标签：sql, mongodb, performance, design-patterns, nosql

[http://martinfowler.com/articles/dblogic.html](http://martinfowler.com/articles/dblogic.html)

使用上述文章的术语，在处理 SQL 数据库时，编码的事务脚本模式显然是一种反模式。

NoSQL 数据库（如 MongoDB）也一样吗？假设 nosql 查询将使用的列都已适当索引。

我问这个问题的原因是：MongoDB 中的查询执行返回一个可以迭代的游标。我不知道的是，是否存在与之相关的性能损失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:41:31.247

该文章将“事务脚本”描述为

> [a] 过程读取它可能需要的所有数据，然后在内存中进行选择和操作以确定需要哪些 [数据库条目]。

每个 NoSQL 数据库都是不同的，因此您不能为“NoSQL”一概而论。但是在几乎每个数据库系统中，尽可能多地对数据库进行操作是个好主意。

1.  只要你使用数据库的查询语法，它至少在理论上可以使用索引来加速某些操作，但是一旦返回结果集，索引信息就会丢失，这使得这些操作更加昂贵。
2.  当您从数据库中获得大量结果集，然后在应用层对其进行过滤时，您必须通过网络传递所有这些数据。根据您的网络基础设施的工作情况，这可能会成为性能瓶颈（假设您的数据库位于不同的物理服务器上——它通常应该在生产环境中）。传输庞大的数据集也与数据库的任何缓冲系统或数据库驱动程序有关。

当您专门询问 MongoDB 时：MongoDB 数据库的设计并不像 SQL 数据库那样“智能”。该设计假设 SQL 数据库自己解决的许多问题都在应用层解决（约束、级联删除、连接、事务......）。查询语法也没有 SQL 发展 40 年积累的所有功能强大。这意味着您通常不会在应用层上进行过滤。但是当查询语法可以解决问题时，您通常应该尝试这样做。

# c++ - 如何使用 MingW for Windows 为 Arm 处理器编译程序？

> ID：13907676
> 
> 赞同：2
> 
> 时间：2012-12-17T02:49:38.517
> 
> 标签：c++, c, arm, mingw

我有一个运行 Arm(Risc) CPU 的设备，我喜欢为它编写程序。将二进制文件传输到此设备很容易，但我不能简单地将在 windows 中编译的 com/exe 文件放入此设备中。

我不知道如何编译程序以生成 Risc 处理器 bin 文件（字节顺序、堆栈和内存架构）。

我正在用 C/C++ 编写代码，我想知道如何为 Arm/Risc 编译？

此设备从文件的位置 0 开始运行 bin 文件（我相信它就像 MS-Dos 的 com 文件）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:18:42.137

您可能想查看[GNU Arm](http://www.gnuarm.com/files.html)网站。它具有用于在 Windows 平台上为 ARM 处理器编译的二进制文件。但是，正如 Matteo 在评论中解释的那样，您将需要一个工具来更改`ELF format`为您想要的原始格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T13:35:08.107

较新版本的 MS Visual Studio 提供了 ARM 编译器。但是库集非常有限（静态 CRT 和 MSVCRT）。此外，win32 标头可能会错过 ARM 特定的定义。这是一个讨论如何在 VS 中启用 ARM 支持的线程：[http://www.betaarchive.com/forum/viewtopic.php?t=25956](http://www.betaarchive.com/forum/viewtopic.php?t=25956) 如果你想编译简单的命令行应用程序，你可能很幸运，对于 GUI 应用程序，您将需要创建自己的库并可能修改标头或使用您自己的标头集。你可以看看 ReactOS，它提供了基本的 ARM 支持（使用 VS11+ 命令行）。您也许可以使用它来生成所需的导入库。对于缺少 ARM 特定的标头定义等，您可以随时联系 ReactOS 开发人员，如果幸运的话，他们会抽出时间来修复它 :)

# r - r中其他列的数字复制

> ID：13907678
> 
> 赞同：3
> 
> 时间：2012-12-17T02:50:05.610
> 
> 标签：r, replication, rep

在以下情况下如何使用复制功能：

```
mydata <- data.frame (var1 = 1:4, replication = c(3, 5, 3, 7))

mydata
  var1 replication
1    1           3
2    2           5
3    3           3
4    4           7 
```

我想要这样的结果：

```
1,1,1, 2,2,2,2,2,  3,3,3,  4,4,4,4,4,4,4 
```

1重复3次，2重复5次，依此类推

我尝试了应用功能，没有做任何好事。

```
apply (mydata,2,rep ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T02:54:07.327

你在正确的轨道上：`rep`是工作的功能。但试试这个：

```
with(mydata, rep(var1, replication)) 
```

您在`apply`此处使用的方式`rep`是在每个列上单独调用。这就像调用`rep(1:4)`, then`rep(c(3,5,3,7))`并将结果组合成`matrix`.

~~`apply`熟悉是一个很棒的功能，但它不是这项工作的工具。事实上，这种使用的解决方案`apply`会非常难看：~~

 ~~```
unlist(apply(mydata, 1, function(var1.rep) do.call(rep, unname(as.list(var1.rep))))) 
```~~  ~~@MatthewLundberg`apply`在评论中演示了执行此操作的适当方法。~~

# php - 故障排除建议：无法在本地查看站点、路径已损坏、站点运行良好

> ID：13907679
> 
> 赞同：-2
> 
> 时间：2012-12-17T02:50:11.323
> 
> 标签：php, less, local, filepath

首先，如果我的问题不适合这个论坛，我深表歉意，但我处于松散状态，非常感谢一些解决此问题的提示。我已经尝试了一段时间，但似乎无法解决。

我有一个正常运行的现场网站，我帮助整理了 [http://www.chrisdonaldson.com.au/](http://www.chrisdonaldson.com.au/) 虽然我的主要贡献是样式和排版的 css 调整，包含所有内容但并没有真正参与后端开发。这方面基本上是由另一个我无法再得到帮助的人处理的。

我的问题是我**无法再让该站点在本地查看以进行修改**。也就是说，如果我尝试在浏览器（firefox、chrome、safari 等）上查看 html 页面，则只会出现 html 文本，而没有任何 css 格式或任何 js 功能。这显然与文件路径有关，但自从我上一个版本以来，我在这方面没有改变任何东西，也想不出在我自己的系统上会改变的任何东西（没有改变用户、权限等） .

### 一般信息。

*   我在 Mac OS X 10.6.8 上，我是这台机器上唯一的用户。
*   我能够在本地环境中查看和开发我正在开发的其他网站。
*   大约 1 个月左右前，我能够调整网站的内容，在本地环境中查看没有问题。
*   我已经尝试在本地文件上使用 firebug 来查看哪里出了问题，但我不知道我是否正在使用 firebug 来发挥它的全部能力，尽管我至少可以判断 css 和 js 文件没有被访问。

### 其他信息：

*   该网站使用 css.less
*   有一个 php 文件调用了 head.html 和 index.html，但我对 php 一无所知，也许这就是问题所在？如果需要，我可以提供此代码。

就我自己的测试而言，我只是从它的实时状态下载站点，并且不做任何调整，尝试在本地查看。基本上我将 html 页面直接传递到浏览器中，或者通过 aptana studio 进行预览，并且页面显示为未格式化且没有 js 功能。

我注意到的是，更正一个路径，比如 from: `<img src="/img/galleries/australiana/thumb/a_question_of_balance.jpg"/>` to: `<img src="../img/galleries/australiana/thumb/a_question_of_balance.jpg"/>` 至少会解决有问题的图像路径。**但是为什么这会突然成为一个问题，而以前没有呢？对 .less 或 .js 文件的相同调整似乎并不能解决它们的路径。**

我意识到没有人会从我提供的信息中确切地知道问题是什么——但如果在这里问是合适的，并且有人愿意提供帮助——我应该提供什么信息以进一步解决问题？这主要是关于故障排除，如果有人对如何解决这个问题有一些建议，我将非常感激。

还是有其他更合适的地方寻求建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:08:00.490

底线是图像、css 和 javascript 文件的相对和绝对路径。当您将站点从主机传输到本地服务器时，您也会继承所有路径。带有指向“../path/to/img.jpg”的链接的 index.php OR index.html 文件实际上意味着无论 index.php/index.html 文件在哪里，它都通过回溯一个目录来访问图像并转到 /path/to/img.jpg。

这只是修复相对和绝对路径的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T03:47:05.033

现在问题解决了

安装 MAMP 后，我基本上需要设置一个虚拟主机并为相关站点设置一个新的 Web 根文件夹。我按照这里的教程[http://foundationphp.com/tutorials/vhosts_mamp.php](http://foundationphp.com/tutorials/vhosts_mamp.php) - 在这个教程中不需要终端，对于像我这样的普通人来说很容易遵循。

基本上我在主机文件中添加了一个虚拟主机（Macintosh HD：private：etc：hosts）然后取消注释“虚拟主机”下的行#Include /Applications/MAMP/conf/apache/extra/httpd-vhosts.conf

然后，我没有编辑 Applications:MAMP:con:apache:httpd.conf 文件，如第 6 步所述，我添加了以下内容：

```
<VirtualHost *:80> DocumentRoot "/Applications/MAMP/htdocs"  ServerName localhost </VirtualHost>
<VirtualHost *:80> "DocumentRoot "/Users/username/Sites/mysitename" ServerName mysitename </VirtualHost> 
```

到 /Applications/MAMP/conf/apache/extra/httpd-vhosts.conf 文件。

无论如何，现在基本上所有路径都正确解析，我可以为新工作设置新的网络根

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:05:54.760

您在网站中同时使用相对路径和绝对路径。假设您的网站位于名为“app”的文件夹中的“your_domain.com”上

在文件 'http://your_domain.com/app/index.html' 当你说 1) '/some_picture.png' 表示在[http://your_domain.com/some_picture.png](http://your_domain.com/some_picture.png)找到的图片- 它转到网站域（http://your_domain.com），然后添加路径 /some_picture.png

2) 'some_picture.png' 表示在[http://your_domain.com/app/some_picture.png](http://your_domain.com/app/some_picture.png)找到的图片- 它采用当前路径 (http://your_domain.com/app/) 并添加文件 some_picture。 .png

3) '../some_picture.png' 表示在[http://your_domain.com/some_picture.png](http://your_domain.com/some_picture.png)找到的图片- 它采用当前路径 (http://your_domain.com/app/) 并添加并添加'../some_picture.png'。'..' 是父目录，所以[http://your_domain.com/](http://your_domain.com/)和它的广告 some_picture.png

我怀疑你在做什么是你现在想从一个文件夹访问网站（而不是像你的虚拟主机上的整个域）。而不是使用 local.webroot/yourdomain.com/ 尝试定义 local.yourdomain.com 让它再次工作。

# api - 根据 Fliptop 或 fullcontact 等电子邮件获取 twitter id

> ID：13907680
> 
> 赞同：3
> 
> 时间：2012-12-17T02:50:13.683
> 
> 标签：api, email, twitter, user-profile, fullcontact

这些 API 如何使用电子邮件来获取不公开的 twitter id？

例如，

```
http://www.fliptop.com/peoplegraph
http://www.fullcontact.com/developer/docs/person/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:10:08.617

Kipp 在这里，来自 FullContact。为了获取我们的数据，我们结合了来自数百个公共网站、社交网络、API 和可信赖合作伙伴的信息。从本质上讲，我们采用大量不同的数据点并通过算法对其进行处理，以建立干净准确的联系记录。

更多信息：[FullContact 如何工作？](http://support.fullcontact.com/customer/portal/articles/643510-how-does-fullcontact-work-)

# java - 使用多个提供程序的 Java SPI 失败 (Java Sound)

> ID：13907681
> 
> 赞同：1
> 
> 时间：2012-12-17T02:50:21.647
> 
> 标签：java, javasound

我有一个需要播放 mp3 和 aac 文件的 java 项目。我创建了一个 MediaPlayer 类，它使用通用代码通过 Java Sound API 播放声音文件。我的 CLASSPATH 中有两个注册为 Java Sound SPI 的 audo 解码库。（MP3SPI 和 JAAD）。

问题是 MP3SPI 似乎优先于 JAAD。这意味着当我播放 AAC 文件时，MP3SPI 会引发异常并且（显然）不会播放我的歌曲。当我从 CLASSPATH 中删除 MP3SPI 时，会调用正确的 SPI (JAAD)，并且我的 AAC 文件可以正常播放。

由于这个问题可能更笼统地表示，我希望有人有解决这个问题的经验。

如何同时支持 MP3 和 AAC 解码/播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-26T13:15:35.137

听起来 MP3SPI 行为不端并且没有按照规范播放，即在应该抛出错误异常或不抛出异常时。

你基本上只有两个选择：

1.  破解 MP3SPI 并修复它（查看它的`AudioFileReader`实现并验证它们的行为方式是否符合 javadocs 中指定的方式）。
2.  使用不同的 mp3 服务提供商（例如[这一个](https://stackoverflow.com/questions/5667454/playing-mp3-using-java-sound-api#5668510)或[其中之一](http://www.tagtraum.com/sampledsp.html)）。

祝你好运。

# svn - 有没有办法从 TortoiseSVN Explorer 图标装饰中排除 {ignore-on-commit} 更改？

> ID：13907683
> 
> 赞同：6
> 
> 时间：2012-12-17T02:50:33.680
> 
> 标签：svn, tortoisesvn, explorer

TortoiseSVN 在 Windows 资源管理器中显示图标装饰，显示特定目录树中是否有任何未提交的更改。例如：

![TortoiseSVN 图标装饰](../Images/e445a8c891bd2941819519858bde18a0.png)

上图显示在目录树的某处`Trunk`有一个更改的文件。

但是，我经常使用`ignore-on-commit`更改列表来保存我不想提交的`Web.config`更改——例如与连接字符串相关的更改。

我不能依赖图标装饰让我知道我是否有更改，因为即使只有更改，它们也会显示为红色 (!) `Web.config`。这给资源管理器增加了不必要的噪音。

有没有办法改变这一点，以便只有我*想*提交的更改被标记为资源管理器中的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T03:53:06.450

> 有没有办法改变这个

不，图标覆盖工作

*   对于**所有**文件
*   以**同样**的方式
*   **总是**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-03T21:34:35.460

我最近升级到[TortoiseSVN 版本 1.8.3](http://tortoisesvn.net/downloads.html)（我之前使用的是 1.7.x），现在似乎有一个选项可以做到这一点！它完美地工作。

![在此处输入图像描述](../Images/91bdb51374923a669c4c9eed24dc47be.png)

# c - scanf() 在 malloc 结构成员中不起作用

> ID：13907684
> 
> 赞同：3
> 
> 时间：2012-12-17T02:50:45.680
> 
> 标签：c, struct, malloc, scanf

我定义了一个结构数据类型：

```
typedef struct LinkNode LinkNode;
struct LinkNode {
    char *name;
    LinkNode *next;
}; 
```

并在 main() 中调用它： `Example1:`

```
int main()
{
    LinkNode *pnode = (LinkNode *) malloc(sizeof(LinkNode));

    scanf("%s", pnode->name);
    ...
    free(pnode);
    return 0;
} 
```

它不起作用，除非添加一行：`Example 2`

```
int main()
{
    LinkNode *pnode = (LinkNode *) malloc(sizeof(LinkNode));
    pnode->name = (char *) malloc(sizeof(char));

    scanf("%s", pnode->name);
    ...
    free(pnode);
    return 0;
} 
```

但以下代码有效：`Example 3`

```
int main()
{
    LinkNode *pnode = (LinkNode *) malloc(sizeof(LinkNode));

    pnode->name = "Jim";
    ...
    free(pnode);
    return 0;
} 
```

所以有什么问题？我已将内存分配给 pnode，为什么 scanf() 不起作用？我正在使用VS2010。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:02:08.783

当你使用 时`scanf`，你需要一个分配的内存块来写入。当您为它分配内存时`name`，`malloc`即使您只是分配一个字节（如@billz 指出的那样），因为您现在有一个有效的内存地址。但是你必须分配足够的内存，否则你迟早会覆盖一些东西并造成麻烦。

```
pnode->name = (char *) malloc(sizeof(char) * <max size of input>); 
```

当您将字符串文字分配给指针`name`( `pnode->name = "Jim";`) 时，您只是将其设置为内存中硬编码字符串的地址。如果你试图修改它，就会发生不好的事情，所以除非你使用 const 指针，否则永远不要这样做。

底线，`name`只是一个指针，用它做任何事情，你需要它指向一些有效的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T03:07:06.967

当您为结构分配内存时，它只会为整个节点创建内存，但不会为其中使用的指针（名称）创建内存。所以你必须明确地为它分配内存。1\. 你为 pnode->name 做了一个 malloc，分配内存，然后尝试写入它 2\. pnode->name = "some string"，通过这样做你分配内存并将值存储在其中。因此，这些片段有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T03:08:46.593

`scanf()`已经存在了几十年。你认为是什么问题？你的代码还是scanf？:)。

在第一个示例中，`LinkNode *pnode = (LinkNode *) malloc(sizeof(LinkNode));`分配一个`LinkNode`对象，但不初始化`char *name`. 因此，由于它是一个内存位置，它包含一个垃圾地址，直到它被分配。

```
There are three correct ways to assign a `char*`:
1\. Create dynamic memory space and then assign it to the `char *`
2\. Assign it to a constant string such as "Jim" in your example
3\. Assign the pointer to another pointer that has been created by either 1 or 2 
```

这正是你所做的。在您的第二个示例中，您为字符串数据创建空间，然后将其分配给`pnode->name`.

在您的第三个示例中，您分配`pnode->name`给一个常量字符串。

这就是 C 指针的工作方式。

现在来`scanf()`：它将读取输入，直到遇到空格，并将其格式化，分配给字符数组缓冲区。因此，您将需要一个堆栈初始化的字符数组，或动态创建的字符数组（使用`malloc`）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T06:11:30.873

由于您可以使用 C++，我想建议 C++ 方式。查看我的示例代码和评论

```
#include <string>
struct LinkNode {
    std::string name;    // let string manage dynamic memory instead of raw pointer
    LinkNode *next;
};     

int main()
{
  LinkNode *pNode = new LinkNode;  // use new instead of malloc
  std::cin >> pNode->name;         // use std::cin instead of scanf    
  delete pNode;
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T03:09:52.773

`LinkNode`由两个指针组成。在 32 位架构中，`sizeof(LinkNode)`等于 8 个字节（每个指针 4 个字节）。

当您为结构获取内存时，您将为两个指针获得足够的空间，但它指向的任何数据都必须分配其单独的内存。因此，做你想做的事情的正确方法是做两个`malloc`s。一个用于结构，一个用于内部字符串缓冲区。

你也可以通过做一个静态缓冲区

```
typedef struct LinkNode LinkNode;
struct LinkNode {
    char name[256];
    LinkNode *next;
}; 
```

在这种情况下，为 , 分配内存`LinkNode`也会为内部缓冲区获得足够的内存。

# c# - 使用 ManipulationDelta 事件在 C# 中生成图像控件

> ID：13907687
> 
> 赞同：0
> 
> 时间：2012-12-17T02:51:47.880
> 
> 标签：c#, image, xaml, windows-runtime

我在处理事件时遇到问题。基本上该程序生成图像但具有相同的事件。

```
 private Image MakeImage(string filename)
 {
     Uri uri = new Uri("ms-appx:///CategoryData/" + filename+".png");
     BitmapImage bitmap = new BitmapImage(uri);
     Image image = new Image()
     {
         Height = 100,
         Width = 100,
         Stretch = Stretch.Uniform,
         MaxHeight = 250,
         MaxWidth  = 250,
         HorizontalAlignment = HorizontalAlignment.Left,
         VerticalAlignment = VerticalAlignment.Top,
         Name = filename+"Img",
         ManipulationMode = ManipulationModes.TranslateX | ManipulationModes.TranslateY,
     };
     image.Source = bitmap;
     image.ManipulationDelta += image_ManipulationDelta;
     return image;
 }

 void image_ManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
 {
     Image image = sender as Image;
     CompositeTransform ct = image.RenderTransform as CompositeTransform;
     ct.TranslateX += e.Delta.Translation.X;
     ct.TranslateY += e.Delta.Translation.Y;
     //throw new NotImplementedException();
 } 
```

并且在“”上发生异常`ct.TranslateX += e.Delta.Translation.X;`。你调用的对象是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:53:47.267

检查你的演员`CompositeTransform`表，因为它可能是错误的类型——导致`ct`存在`null`，因此进入你的异常。

编辑：添加了一个例子。

```
CompositeTransform ct = image.RenderTransform as CompositeTransform;
if (ct == null) image.RenderTransform = ct = new CompositeTransform();
ct.TranslateX += e.Delta.Translation.X;
ct.TranslateY += e.Delta.Translation.Y; 
```

`TranslateTransform`此外，如果您只需要翻译图像，为什么不使用 a呢？

# windows - 如何在本地 Web 服务器上捕获流量？

> ID：13907691
> 
> 赞同：3
> 
> 时间：2012-12-17T02:52:31.117
> 
> 标签：windows, localhost, capture

我使用的是 Windows XP，并且部署了一个 Apache Web 服务器，它正在侦听端口 8080，地址为 192.168.2.83。注意我电脑的ip地址是192.168.2.83。我可以使用浏览器访问 192.168.2.83:8080，但我不知道如何捕获该访问。当我使用wireshark时，我看不到任何数据包。

当我在互联网上搜索时，我发现了一些技巧，例如“设置虚拟环回适配器”或“使用 RawCap 在 localhost 上捕获”。但这对我不起作用。我已经设置了 lp​​ 适配器，但在wireshark 中看不到它。我试过 RawCap 但我不在本地主机上工作。我认为 localhost(=127.0.0.1) 与我的地址 (=192.168.2.83) 不同。

所以我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:05:48.357

在您的情况下*127.0.0.1与**192.168.2.83*相同

 *> 在现代计算机系统上，localhost 作为主机名转换为 127.0.0.0/8（环回）网络块中的 IPv4 地址，通常是 127.0.0.1，或 IPv6 中的 ::1。

参考：[维基百科](http://en.wikipedia.org/wiki/Localhost)

因此，*wireshark*或*RawCap*将为*127.0.0.1*捕获或显示的任何内容实际上只是您的机器流量，即*localhost:8080*或 192.168.2.83:8080

此外，您可以检查*Apache*访问日志，其中记录了服务器处理的所有请求，如果有帮助的话。*

# c# - Producer/Consumer，BlockingCollection，等待变化

> ID：13907692
> 
> 赞同：1
> 
> 时间：2012-12-17T02:52:34.550
> 
> 标签：c#, concurrency, queue, task-parallel-library, blockingcollection

我正试图解决 BlockingCollection 和我的生产者/消费者问题。

我想要实现的目标如下：

*   一种线程安全队列，以 FIFO 方式保存对象列表（“作业”）。
*   第二个线程安全队列，也以 FIFO 方式保存这些作业的结果列表。

换句话说：

```
Inbound "Job" Data, can come at any time from multiple threads 
   ==> Thread-Safe FIFO Queue 1 "FQ1"
      ==> Async Processing of data in FQ1 (and remove item from FQ1)
         ==> Callback/Results into Thread-Safe FIFO Queue 2 "FQ2"
            ==> Async Processing of data in FQ2 (and remove item from FQ2)
               ==> Done 
```

到目前为止，我卑微的尝试是：

```
private BlockingCollection<InboundObject> fq1;
private BlockingCollection<ResultObject> fq2;

(...)

Task.Factory.StartNew(() =>
{
    foreach (InboundObject a in fq1.GetConsumingEnumerable())
       a.DoWork(result => fq2.Add(result)); //a.DoWork spits out an Action<ResultObject>
} 
```

我选择 BlockingCollection 的原因之一是因为我想将负载保持在最低限度，这意味着只有当项目实际上在集合内时才工作（而不处理等待/睡眠）。我不确定 foreach 是否是正确的方法。

请让我知道这是否正确或是否有更好的方法。谢谢！

**编辑** 我可以从单元测试中看出，任务中的工作实际上是同步的。新版本如下：

```
Task.Factory.StartNew(() =>
{
    foreach (InboundObject a in fq1.GetConsumingEnumerable())
       Task.Factory.StartNew(async () => { fq2.Add(await a.DoWork()); });
} 
```

非常感谢输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:35:57.590

> 我选择 BlockingCollection 的原因之一是因为我想将负载保持在最低限度，这意味着仅当项目实际上在集合内时才工作（而不处理等待/睡眠）。我不确定 foreach 是否是正确的方法。

这是正确的方法，`foreach`将被阻塞，直到将新项目添加到队列或`CompleteAdding`调用方法。不对的是你想用 BlockingCollection 实现异步处理。BlockingCollection 是一个简单的生产者/消费者队列，当您需要维护作业和作业结果的处理顺序时必须使用它。因为它是同步的。作业将按照添加的顺序进行处理。

如果您只需要异步执行，则不需要队列。在这种情况下，您可以使用 TPL，只需为每个作业生成一个新任务，它们将由 TPL 在内部排队，并将使用您的系统可以有效处理的尽可能多的操作系统线程。例如，您的工作可以产生自己的任务。这是更灵活的方法。

此外，生产者/消费者队列可用于组织作业的管道执行。在这种情况下，作业必须分成几个步骤。每个步骤都必须由专用线程执行。在每个作业步骤线程中，我们必须从一个队列中读取作业，执行该作业，然后将其排入下一个队列。

```
interface IJob
{
    void Step1();
    void Step2();
    ...
}

var step1 = new BlockingCollection<IJob>();
var step2 = new BlockingCollection<IJob>();
...

Task.Factory.StartNew(() =>
    {
        foreach(var step in step1.GetConsumingEnumerable()) {
            step.Step1();
            step2.Add(step);
        }
    });

Task.Factory.StartNew(() =>
    {
        foreach(var step in step2.GetConsumingEnumerable()) {
            // while performing Step2, another thread can execute Step1
            // of the next job
            step.Step2();
            step3.Add(step);
        }
    }); 
```

在这种情况下，作业将按 FIFO 顺序但并行执行。但是如果要做流水线处理，首先要考虑负载均衡。如果其中一个步骤花费了太多时间，它的队列会变大，而其他线程大部分时间都会处于空闲状态。

# android - 得到错误：引起：android.database.sqlite.SQLiteException：靠近“of”

> ID：13907694
> 
> 赞同：2
> 
> 时间：2012-12-17T02:52:46.803
> 
> 标签：android, runtime-error

我收到此错误：“原因：android.database.sqlite.SQLiteException：靠近“of”：语法错误：CREATE TABLE List of Notes（_idINTEGER PRIMARY KEY AUTOINCREMENT，notes_nameTEXT NOT NULL notes_contentTEXT NOT NULL notes_timeTEXT NOT NULL）；“

我正在使用这段代码：

```
 db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
                        KEY_ROWID + "INTEGER PRIMARY KEY AUTOINCREMENT, " +
                        KEY_NAME + "TEXT NOT NULL " + 
                        KEY_CONTENT + "TEXT NOT NULL " +
                        KEY_TIME + "TEXT NOT NULL);"

                        ); 
```

这是我的日志：

```
 12-17 08:58:15.998: I/Database(515): sqlite returned: error code = 1, msg = near "of": syntax error
    12-17 08:58:15.998: E/Database(515): Failure 1 (near "of": syntax error) on 0x22ddf8 when preparing 'CREATE TABLE List of Notes (_idINTEGER PRIMARY KEY AUTOINCREMENT, notes_nameTEXT NOT NULL, notes_contentTEXT NOT NULL, notes_timeTEXT NOT NULL);'.
    12-17 08:58:16.060: D/AndroidRuntime(515): Shutting down VM
    12-17 08:58:16.068: W/dalvikvm(515): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
    12-17 08:58:16.088: E/AndroidRuntime(515): FATAL EXCEPTION: main
    12-17 08:58:16.088: E/AndroidRuntime(515): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.compilationofnotes.pragya/com.compilationofnotes.pragya.NotesView}: android.database.sqlite.SQLiteException: near "of": syntax error: CREATE TABLE List of Notes (_idINTEGER PRIMARY KEY AUTOINCREMENT, notes_nameTEXT NOT NULL, notes_contentTEXT NOT NULL, notes_timeTEXT NOT NULL);
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.os.Handler.dispatchMessage(Handler.java:99)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.os.Looper.loop(Looper.java:123)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.app.ActivityThread.main(ActivityThread.java:4627)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at java.lang.reflect.Method.invokeNative(Native Method)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at java.lang.reflect.Method.invoke(Method.java:521)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at dalvik.system.NativeStart.main(Native Method)
    12-17 08:58:16.088: E/AndroidRuntime(515): Caused by: android.database.sqlite.SQLiteException: near "of": syntax error: CREATE TABLE List of Notes (_idINTEGER PRIMARY KEY AUTOINCREMENT, notes_nameTEXT NOT NULL, notes_contentTEXT NOT NULL, notes_timeTEXT NOT NULL);
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1727)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at com.compilationofnotes.pragya.SqlDatabase$DbHelper.onCreate(SqlDatabase.java:41)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at com.compilationofnotes.pragya.SqlDatabase.open(SqlDatabase.java:62)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at com.compilationofnotes.pragya.NotesView.onCreate(NotesView.java:23)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    12-17 08:58:16.088: E/AndroidRuntime(515):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    12-17 08:58:16.088: E/AndroidRuntime(515):  ... 11 more
    12-17 08:58:18.848: I/Process(515): Sending signal. PID: 515 SIG: 9 
```

这是我的新日志：

```
12-17 09:27:25.535: D/AndroidRuntime(357): Shutting down VM
12-17 09:27:25.535: W/dalvikvm(357): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
12-17 09:27:25.578: E/AndroidRuntime(357): FATAL EXCEPTION: main
12-17 09:27:25.578: E/AndroidRuntime(357): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.compilationofnotes.pragya/com.compilationofnotes.pragya.NewNote}: java.lang.NullPointerException
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.os.Looper.loop(Looper.java:123)
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-17 09:27:25.578: E/AndroidRuntime(357):  at java.lang.reflect.Method.invokeNative(Native Method)
12-17 09:27:25.578: E/AndroidRuntime(357):  at java.lang.reflect.Method.invoke(Method.java:521)
12-17 09:27:25.578: E/AndroidRuntime(357):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-17 09:27:25.578: E/AndroidRuntime(357):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-17 09:27:25.578: E/AndroidRuntime(357):  at dalvik.system.NativeStart.main(Native Method)
12-17 09:27:25.578: E/AndroidRuntime(357): Caused by: java.lang.NullPointerException
12-17 09:27:25.578: E/AndroidRuntime(357):  at com.compilationofnotes.pragya.NewNote.onCreate(NewNote.java:28)
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
12-17 09:27:25.578: E/AndroidRuntime(357):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
12-17 09:27:25.578: E/AndroidRuntime(357):  ... 11 more 
```

请帮忙。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T02:55:17.103

将您的创建表查询更改为：

```
 String CREATE_DATABASE_TABLE = "CREATE TABLE " + DATABASE_TABLE + "("
            + KEY_ROWID + " INTEGER PRIMARY KEY," +
              KEY_NAME  + " TEXT NOT NULL,"
            + KEY_CONTENT + " TEXT NOT NULL," 
            + KEY_TIME + " TEXT NOT NULL"
             + ")";

 db.execSQL(CREATE_DATABASE_TABLE); 
```

您没有在 create table 语句的每一列之后加上**“，”**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T03:22:51.370

除了另一个答案中的好建议之外。

```
CREATE TABLE List of Notes ( 
```

表名必须是一个单词。考虑`ListOfNames`,`List_of_Names`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-19T04:30:14.123

在代码中使用逗号分隔

```
 db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" + 
                    KEY_ROWID + "INTEGER PRIMARY KEY AUTOINCREMENT, " +
                    KEY_NAME + "TEXT NOT NULL, " + 
                    KEY_CONTENT + "TEXT NOT NULL, " +
                    KEY_TIME + "TEXT NOT NULL);"

                    ); 
```

# python - 在列表的连续元素中放置奇数：Python 3.2

> ID：13907696
> 
> 赞同：1
> 
> 时间：2012-12-17T02:53:10.403
> 
> 标签：python, list, function, numbers

我正在上 Python 入门课程。我正在参加练习期末考试，但我不知道该怎么回答一个问题。它问：

完成以下方法，将在字符串 s 中找到的奇数放入列表 x 的连续元素中。

```
def assign(s):
    length = _____
    x = _____*[0]
    index = 0
    for j in range(_____):
        digit = int(s[j])  #convert to int digit
        if _____: #test for odd number
            x[_____] = digit
            __________
    print("The odd numbers are")
    for j in range(index):
        print(x[j]) 
```

我不知道这是否是它的措辞方式，但我不知道如何回答这个问题。我最好的猜测是：

```
def assign(s):
    length = len(s)
    x = length*[0]
    index = 0
    for j in range(s):
        digit = int(s[j])  #convert to int digit
        if _____: #test for odd number
            x[_____] = digit
            __________
    print("The odd numbers are")
    for j in range(index):
        print(x[j]) 
```

我不知道如何继续，或者我什至是否正确地开始它。我无法更改已经存在的任何内容，我只能填写空白，而且它们都必须填写。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T02:58:04.743

这是解决方案：

```
def assign(s):
    length = len(s)
    x = length*[0]
    index = 0
    for j in range(length):
        digit = int(s[j])  #convert to int digit
        if digit % 2: #test for odd number
            x[index] = digit
            index += 1

    print("The odd numbers are")
    for j in range(index):
        print(x[j]) 
```

你的开头是对的。一个关键点是 variable`index`指向下一个应该添加到 list 的奇数`x`。

* * *

但是请注意，提供给您的模板很糟糕：它完全违背了 Python 的精神。看起来像 C 代码被迫进入 Python；这不是一个好的做法，因为 Python 提供了比 C 更强大的数据结构。这是**一个 Pythonic 版本**：

```
def assign(input_string):
    odd_digits = []
    for char in input_string:
        digit = int(char)  # Convert to integer
        if digit % 2:  # If the digit is odd
            odd_digits.append(digit)
    print("The odd digits are", *odd_digits, sep='\n')  # or: ("The odd digits are", odd_digits) 
```

主要区别在于您*的变量更少*：代码更清晰，阅读代码时必须记住更少的变量。消失的变量本质上是索引：它们通常是不需要的（索引在 C 中很重要，因为 C “接近金属”：它接近于需要索引的机器语言）。因此，不再需要跟踪`length`输入字符串。

你也有更少的麻烦：在原始版本中，列表`x`包含许多`0`本质上无用的（更慢的代码，也更难理解）。本质上，*Python 列表* `x`被迫类似于*C 数组*：字符串中奇数位的可变数量调用列表（可变大小），而不是数组（固定大小）。

此外，代码更短的事实使得阅读和编写更快！

* * *

正如 Jon 所建议的，一个**更加 Pythonic 的版本**包括使用列表推导：

```
def assign(input_string):
    odd_digits = [char for char in input_string if int(char) % 2]  # or: if char in '13579'
    print("The odd digits are", *odd_digits, sep='\n')  # or: ("The odd digits are", odd_digits) 
```

这是一个很好的例子，说明为什么 Python 代码的读写速度比 C 代码快得多。

# jquery - SharePoint：jQuery 切换删除所有 SharePoint 顶部 div，在网页底部留下空间？

> ID：13907697
> 
> 赞同：0
> 
> 时间：2012-12-17T02:53:21.293
> 
> 标签：jquery, jquery-ui, sharepoint, toggle, margin

因此，我在 SharePoint 2010 页面的按钮上有一个 jquery 切换事件。如果单击它只会隐藏 SharePoint 构造：

```
$('#s4-topheader2,#s4-titlerow,#RibbonContainer,#s4-ribbonrow').toggle(500); 
```

工作正常，但使用后网页不再到达页面底部？只有在顶部 div 被带回后。所以我猜我可以添加一点来解决这个问题？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:40:56.803

您的代码在 IE 和 Chrome 中对我来说很好，但如果您想手动调整 s4-workspace 的大小，您应该在动画完成后重新调整大小，例如：

```
$('#s4-topheader2,#s4-titlerow,#RibbonContainer,#s4-ribbonrow').toggle(500, function(){
    $('#s4-workspace').height($(window).height());
}); 
```

# c# - 如何在 c# 中使用 List 创建我的替代数据库？

> ID：13907699
> 
> 赞同：0
> 
> 时间：2012-12-17T02:53:46.407
> 
> 标签：c#, winforms, datagridview, treeview

在连接到我们的数据库之前，我想创建一个临时数据库来测试我的应用程序。我想从 Treeview 和 Datagridview 中的替代数据库中填充这些数据。我的树视图看起来像这样：

行政人员

*   团体
    *   用户
        *   演示
        *   居住
*   经理

每次我单击一个节点，相应的数据都会出现在我的 Datagridview 中。就像当我点击“组”时，它下面的数据，如“用户”等，会出现相应的帐户，如“演示”和“直播”。而当我点击“Demo”时，它对应的账户也会出现。如何在 c# 中使用 List 做我的替代数据库？非常感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:02:43.983

像这样创建一个类

```
public class TreeItem
{
  public int ID { set;get;}
  public string Name { set;get;}
  public List<TreeItem> Children {set;get;}
} 
```

现在你可以像这样创建一棵树

```
var tree=new TreeItem();
tree.ID=1;
tree.Name="Group";

tree.Childrens=new List<TreeItem>();
var childUser=new TreeItem { ID=2, Name="User"};
tree.Childrens.Add(childUser);

childUser.Childrens=new List<TreeItem>();
var childDemo=new TreeItem { ID=3, Name="Demo"};
childUser.Childrens.Add(childDemo);

var childLive=new TreeItem { ID=4, Name="Live"};
childUser.Childrens.Add(childLive); 
```

这只是对所有内容进行硬编码！理想情况下，您应该在 XML 中拥有这些分层数据，然后将您的 XML 加载到这些类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:29:45.790

尽管[@Shyju](https://stackoverflow.com/a/13907753/13198)描述的手动解决方案适用于少量项目。

更好的选择是使用像[AutoPoco](http://autopoco.codeplex.com/)这样的库。Scott Hanselmann 不久前在[这篇博客文章](http://www.hanselman.com/blog/TheWeeklySourceCode58GeneratingDatabaseTestDataWithAutoPocoAndEntityFrameworkCodeFirst.aspx)中描述了关于其使用的非常好的介绍。

`Impose`以下示例是从 Scott 的博客文章中提取的代码的略微修改版本（无约束）：

```
public void MakeTestData()
{
    IGenerationSessionFactory factory = AutoPocoContainer.Configure(x =>
    {
        x.Conventions(c => { c.UseDefaultConventions(); });
        x.AddFromAssemblyContainingType<SimpleUser>();
    });

    IGenerationSession session = factory.CreateSession();

    IList<SimpleUser> users = session.List<SimpleUser>(1000).Get();

} 
```

现在`IList<SimpleUser> users`包含 1000 个`SimpleUser`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:26:49.950

看起来您正在这里寻找模式。

[复合模式](http://www.dofactory.com/Patterns/PatternComposite.aspx)似乎是最好的搭配！

示例代码（未编译）：

```
public interface IComponent{
    string Name{get;}
    IEnumerable<IComponent> Childrens{get;}
}
public class Group : IComponent{
    private List<User> _users;
    ---
    IEnumerable<IComponent> Childerns{ get{ return _users;}}
}
public class User : IComponent {
    private List<Demo> _demos;
    private List<Live> _lives;

    IEnumerable<IComponent> Childresn { get { return _demos.Cast<IComponent>().Union(_lives.Cast<IComponent>()); }}
}
public class Demo : IComponent{..}
public class Live : IComponent {..} 
```

# c# - Convert.ChangeType 可以在未经检查的上下文中运行吗？

> ID：13907702
> 
> 赞同：4
> 
> 时间：2012-12-17T02:54:20.250
> 
> 标签：c#, reflection, casting

我有一个自定义消息协议的有效反序列化类。这个类使用反射来检查类的属性和协议映射的属性。这工作正常，除非该值是无符号整数（32 或 64）并且被强制转换为整数（32 或 64）。

我可以测试（例如`if x is int`）属性类型并为这些数字类型分支代码以在一个`unchecked`块中执行强制转换，但我更愿意保持代码简单并找到一种使用现有`Convert.ChangeType(value, convertToType)`逻辑的方法。有没有办法让这个转换器忽略数字溢出？或者有没有使用仅在运行时已知的类型进行强制转换的替代方法？

注意：我意识到这里有一个根本原因需要修复，但我们目前无法更改数据源、传输类型或消息传递协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:14:23.647

我想这是开发人员的本能，不想打开`is`关键字，我自己去过那里。我建议无论如何都要这样做。如果您没有使用反射，我会理解引入它时的深思熟虑，但如果您已经在使用反射......

如果您知道（或猜测）uint 不会大于 int.MaxValue，那么您可以使用`Convert.ToInt32`. 您还应该捕获“溢出异常”，以防万一。

# java - 多生产者/一消费者 Java 多线程

> ID：13907703
> 
> 赞同：0
> 
> 时间：2012-12-17T02:54:30.470
> 
> 标签：java, multithreading

我有一个产生新线程的 ServerClass。

每个线程都有一个数据块进行处理。每个线程处理“x”块数据并将一些值返回给 ServerClass。ServerClass 平均收集的值并将其传递给线程。线程使用平均值恢复工作。重复相同的过程，直到线程处理完整个数据。

我写了这个，每次执行它都会得到不同的输出。有人可以解释我做错了什么。

```
ServerClass

public synchronized void put(double[] weight)
{

        //System.out.println(Counter);      

        weights.add(weight);

        if(Counter+1 == NoOfThreads)

        {           

            averageWeights();

            notifyAll();

            Counter =0;

        } else

            try {

                Counter++;

                wait();

            } catch (InterruptedException e) {

    e.printStackTrace();

        }

}

Threads Class

refer // ServerClass Reference

updatedweights // Averaged Value

int slots = data.size() / batchCount;

            for(int i=0; i<slots;i++)

            {

                double[] p = Algo(data,i*batchCount, (i+1)*batchCount, ServerClass.stepSize, labelIndex, refer.updatedweights);

                refer.put(p);

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:39:43.337

```
public void put(double[] weight, Threads t)
{
     updatingWVector(weight);
        if(checkCondition())
        {            
            averageWeights();               
            Counter =0;
            synchronized(lock) {
                //System.out.println(t.getId());
                  lock.notifyAll();
            }
        } else
        {

                try {
                    updateCounter();
                    synchronized(lock) {
                        System.out.println(t.getId());
                        lock.wait();
                    }
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
        }
} 
```

Rest在哪里代码`lock`中 `private final Object lock = new Object();` 的所有方法都在`synchronized`块中。

# javascript - 如何将两个数组压缩到coffeescript中的一个对象中？

> ID：13907705
> 
> 赞同：1
> 
> 时间：2012-12-17T02:54:45.743
> 
> 标签：javascript, hash, coffeescript

我有以下代码

```
class A

  constructor: (@message) ->

  parse: (paramNames...) ->
    params = @message.split(/\s/)
    for value, i in params
      @[paramNames[i]] = value

a = new A('foo bar dim sum')
a.parse 'first', 'second', 'third', 'fourth'
console.log a 
```

输出

```
{
  message: 'foo bar dim sum',
  first: 'foo',
  second: 'bar',
  third: 'dim',
  fourth: 'sum'
} 
```

一切正常，我只是觉得该`parse`方法可以做得更干净一些。好像我做错了什么：S

`parse()`永远不会被用户调用；它仅在我正在编写的库内部使用。可以安全地假设`paramNames.length`并且`params.length`将**永远是 equal**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:14:21.047

Underscore 的[`object`](http://underscorejs.org/#object)功能正是您想要的。将其与[`_.extend`](http://underscorejs.org/#extend)：

```
class A

  constructor: (@message) ->

  parse: (paramNames...) ->
    params = @message.split(/\s/)
    _.extend @, (_.object paramNames, params) 
```

如果您不使用下划线，我认为您当前的解决方案已经非常清晰和简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:28:23.993

您可以使用字符串替换功能，如下所示：

```
parse : (paramNames...) ->
    keyCount = 0
    @message.replace( /(\b\w+\b)/g , (match)->
        @[paramNames[keyCount++]] = match
    ) 
```

它比你在代码中使用的 split 方法和 for 迭代更有效。只要确保我使用的 RegExp 满足您的需求，您就可以将其更改为您需要的任何内容。

# module - 为什么我的扩展在使用 magento 2.0 连接上传时显示其他扩展？

> ID：13907706
> 
> 赞同：0
> 
> 时间：2012-12-17T02:54:52.373
> 
> 标签：module, magento

为什么我的扩展在安装之前使用 magento connect 时会显示这些其他扩展？顺便说一句，我的是 Beckin_DropDownShipping 扩展。

community Beckin_DropDownShipping 1.2.0 (stable) 准备安装

community Mage_Core_Modules 1.7.0.2 (stable) 已安装

community Lib_Varien 1.7.0.0 (stable) 已安装

community Lib_Google_Checkout 1.5.0.0 (stable) 已安装

community Lib_Js_Calendar 1.51.1.1 (stable) 已安装

community Lib_Js_Mage 1.7.0.1 (stable) 已安装

community Lib_Phpseclib 1.5.0.0 (stable) 已安装

community Mage_Locale_en_US 1.7.0.1 (stable) 已安装

community Lib_Mage 1.7.0.1 (stable) 已安装

community Lib_ZF 1.11.1.0 (stable) 已安装

community Lib_Js_Prototype 1.7.0.0.3 (stable) 已安装

community Lib_ZF_Locale 1.11.1.0 (stable) 已安装

这是我在包文件中设置的依赖项。

```
<dependencies>
<required>
<php><min>5.1.0</min><max>6.0.0</max></php>
<package>
<name>Mage_Core_Modules</name>
<channel>community</channel>
<min>1.6.0.0</min><max>1.7.0.2</max>
</package>
</required>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:03:22.100

Magento Connect 提供了通过 Magento Connect 更新 Magento 本身的能力。11个包

```
Lib_Google_Checkout
Lib_Js_Calendar
Lib_Js_Mage
Lib_Js_Prototype
Lib_Mage
Lib_Phpseclib
Lib_Varien
Lib_ZF
Lib_ZF_Locale
Mage_Core_Modules
Mage_Locale_en_US 
```

是安装 Magento 所需的基础。

请记住，Magento 2 仍在积极开发中并且处于测试阶段。这是一个**硬**测试版，而不是 Googley 测试版。如果您尝试通过 connect 更新这 11 个基本模块，看起来您将在 Magento 2 之上安装旧版本的 Magento。这将使 Bad Things™ 发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:48:34.603

我发现了问题。我删除了除 php 版本之外的所有依赖项，现在扩展不会拉出其他模块:)

# gtk - Cairo / GTK 示例代码在窗口太大或最大化时崩溃

> ID：13907708
> 
> 赞同：0
> 
> 时间：2012-12-17T02:54:52.827
> 
> 标签：gtk, mingw, cairo, gtk2, pixmap

我已经复制并编译了标题为“完整源代码”部分的源代码。

[http://cairographics.org/threaded_animation_with_cairo/](http://cairographics.org/threaded_animation_with_cairo/)

我将此代码修改为我正在处理的项目，结果发现当我将窗口设置得太大时应用程序会崩溃。回到最初的示例代码，当窗口太大（> 1000x1000 左右）时它也会崩溃。

我在示例中缩小了这一行似乎是负责任的：

pixmap = gdk_pixmap_new(window->window,500,500,-1);

其中 pixmap 的类型为 GdkPixmap*。调整窗口大小会用与窗口大小相同的新像素图覆盖像素图。

我在 32 位 Windows Vista 的 Eclipse Juno 中执行此操作。我的编译器是 MinGW 版本 0.5-beta-20120426-1。我的 GTK+ 版本是 2.24.10，显然 Cairo 是 1.10.2 我添加了 GTK 的所有包含和库，还添加了编译器开关 -mms-bitfields。

像素图的大小有限制吗？我只是从 GTK 开始，所以如果这个例子不起作用，我不知道该去哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:00:07.300

在 Debian 上尝试使用 GTK 2.24.10 和 cairo 1.12.2，它可以工作（没有崩溃），在 1280x1024 显示器上具有最大化的窗口。但是，我知道[GTK for Windows 上存在内存泄漏](http://bugzilla.gnome.org/show_bug.cgi?id=685959)，自 GTK 2.24.14 以来[已修复。](http://git.gnome.org/browse/gtk+/commit/?h=gtk-2-24&id=bb867e9406ee0d9e6109bfc4c33a38585c76a242)你的崩溃是很快发生的，还是再过一段时间？如果很快就崩溃了，那就是另一个问题，否则就看一下内存消耗。

Compiling GTK with debug symbols would also help to narrow down the bug...

BTW, is `window->window` valid at the time the crash happens?

# eclipse - 将 eclipse 颜色主题转换为 sublime text 2 主题

> ID：13907713
> 
> 赞同：2
> 
> 时间：2012-12-17T02:55:45.603
> 
> 标签：eclipse, themes, sublimetext2, sublimetext, color-scheme

我真的很喜欢我在 eclipse 网站上找到的主题，我想将它与 sublime text 一起使用。如何将该主题转换为崇高的文本主题？

主题链接： [http ://eclipsecolorthemes.org/?view=theme&id=7822](http://eclipsecolorthemes.org/?view=theme&id=7822)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T15:04:01.553

I couldn't find a convertor but maybe with a little bit of time and my [visual sublime color scheme editor](http://tmtheme-editor.herokuapp.com/) you could make it happen.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:08:39.213

查看[http://eclipsecolorthemes.org/?view=theme&id=66](http://eclipsecolorthemes.org/?view=theme&id=66)模仿 Sublime Text 2 的 Eclipse 主题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T06:02:23.360

[您可以在这里http://tmtheme-editor.herokuapp.com/#/Eclipse](http://tmtheme-editor.herokuapp.com/#/Eclipse)获得 Eclipse 主题 forsublime 。下载 xml 并保留文件“package/color-default”文件夹。现在转到 sublime editor > Preference > Color Scheme > [Choose the Eclipse]。而已。

# c++ - 访问 C++ 结构的各个元素

> ID：13907715
> 
> 赞同：1
> 
> 时间：2012-12-17T02:56:04.450
> 
> 标签：c++, struct

这是我遇到的问题，如果我解释得不好或者代码质量不好，请不要打我——到目前为止，我只完成了大约 2 周的 C++。

**说明：**我想构建一个结构（一个结构可能不是最好的决定，但我必须从某个地方开始），它将包含一组点的坐标（仅 x 和 y）（我们称该集合为弧），设置id（可能还有其他字段）。每个集合（弧）可以包含不同数量的点。我已将集合（弧）中的每个点实现为类，然后我的弧结构在向量中包含此类的各种实例（以及其他内容）。

**弧形结构示例：**

*结构1：*

标识（整数）1

xY（向量） (0;0) (1;1) (2;2)

*结构2：*

ID（整数）2

xY (向量) (1;1) (4;4)

**问题：** 我不知道如何访问我的弧结构中的元素：例如，如果我需要访问 ID 为 1 的 struc 中第二个点的坐标，我想要`Struc1.xY[1]`，但是这不能作为我的代码工作（下）立场。我发现[这篇文章](https://stackoverflow.com/questions/2758937/printing-values-of-all-fields-in-c-structure)解释了如何在结构中打印值，但我需要访问这些元素以（稍后）有条件地编辑这些坐标。这怎么可能被实施？

**我的尝试：（已编辑）**

```
#include <cmath>
#include <vector>
#include <cstdlib> 
#include <stdio.h>
#include <iostream>

using namespace std;

class Point
  {
  public:
      Point();
      ~Point(){ }

      void setX (int pointX) {x = pointX; }
      void setY (int pointY) {y = pointY; }
      int getX() { return x; }
      int getY() { return y; }

  private:
      int x;
      int y;
  }; 

Point::Point()
    {
        x = 0;
    y = 0;
    }

struct arc {
  int id;
  vector<Point> xY;
};

int main(){

  arc arcStruc;
  vector<Point> pointClassVector;
  int Id;
  int X;
  int Y;
  // other fields go here

  arc *a;

  int m = 2; // Just create two arcs for now
  int k = 3; // each with three points in it
  for (int n=0; n<m; n++){    
    a = new arc;
    Id = n+1;
    arcStruc.id = Id;
    Point pt;
    for (int j=0; j<k; j++){            
      X = n-1;
      Y = n+1;      
      pt.setX(X);
      pt.setY(Y);
      arcStruc.xY.push_back(pt);

    }
  }

for (vector<Point>::iterator it = arcStruc.xY.begin(); it != arcStruc.xY.end(); ++it)
  {
    cout << arcStruc.id.at(it);
    cout << arcStruc.xY.at(it);
  }

  delete a;  
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:14:15.257

几个建议：

*   不要打扰单独的`pointClassVector`，只需创建 Point 对象，然后使用`arcStruc.xY.push_back()`. 该行`arcStruc.xY = pointClassVector`触发整个向量的副本，这有点浪费CPU周期。
*   绝对没有必要尝试`Point`在堆上创建对象，所做的只是增加复杂性。只需`Point pt;`在其上使用和调用 set 函数 - 虽然我个人会完全取消 set 函数并直接操作 Point 中的数据，但不需要 getter/setter，它们不会给你买任何东西。如果这是我的代码，我会编写点构造函数以将 x 和 y 作为参数，这样可以为您节省大量不必要的代码。您也不需要为析构函数提供实现，编译器生成的就可以了。

如果您想遍历向量，您可能应该使用迭代器而不是尝试对容器进行索引。无论哪种方式，您都可以访问`arcStruc.xY`以获取其大小，然后使用`[]`运算符或使用迭代器单独访问元素，如下所示：

```
 for (vector<Point>::iterator it = arcStruc.xY.begin(); it != arcStruc.xY.end(), ++it)
 {
    ... do something with it here, it can be derefernced to get at the Point structure ...
 } 
```

# javascript - 根据长度在 div 之间拆分内容

> ID：13907718
> 
> 赞同：0
> 
> 时间：2012-12-17T02:56:27.270
> 
> 标签：javascript, jquery, html, css

我有以下布局，其样式显示为写字台上的一张打印纸：

```
<div class="paper">
    <div class="header">
        [stuff]
    </div>
    <div class="content">
        [long stuff]
    </div>
    <div class="footer">
        [stuff]
    </div>
</div> 
```

我希望能够在几个 div 之间拆分 div“内容”的内容，以便看起来内容实际上是在几张纸上分页的，每张纸的高度约为 1000 像素。

```
<div class="paper">
    <div class="header">
        [stuff]
    </div>
    <div class="content">
        [part 1 of long stuff]
    </div>
</div>
<div class="paper">
    <div class="content">
        [part 2 of long stuff]
    </div>
</div>
<div class="paper">
    <div class="content">
        [part 3 of long stuff]
    </div>
    <div class="footer">
        [stuff]
    </div>
</div> 
```

这样做有多可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T08:03:17.710

如果是这种情况，可行的选项可能是在追加 HTML 中的数据时跟踪 div 的高度。

```
<div class="content" id="content_1"> 
```

为每个页面使用一个 ID，例如 content_1、content_2。并使用 jquery 像：

```
$("#content_1").append("some text"); 
if($("#content_1").height() >= 1000) {
    $("#content_1").parent().append('<div class="content" id="content_2"></div>');
} 
```

像这样循环执行此操作

```
index = 0;
$("#content_" + index) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:49:35.547

如上所述，您可以使用 CSS3 列属性。这是一个快速而肮脏的[jsFiddle](http://jsfiddle.net/trevanhetzel/ev4KV/)，可以帮助您入门，代码如下：

**CSS**

```
.content {
    -moz-column-count: 3; 
    -moz-column-width: 100px; 
    -webkit-column-width: 100px;
    -moz-column-gap: 20px; 
    -webkit-column-count: 3; 
    -webkit-column-gap: 20px; 
    height: 1000px;
    margin: 25px;
}​ 
```

**HTML**

```
<div class="header">
    <strong>HEADER STUFF</strong>
</div>

<div class="content">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris id libero est. Integer porttitor consectetur adipiscing. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec id ipsum non tortor dapibus imperdiet quis in lacus. Aliquam erat volutpat. Pellentesque malesuada arcu at magna suscipit condimentum. Integer congue pretium nunc at pretium. Vestibulum vel turpis in turpis gravida pretium. 
</div>

<div class="footer">
<strong>FOOTER STUFF</strong>
</div>​ 
```

然后你必须让你的背景图像（假设这是你正在使用的）或者重复 3 次（或者你想要多少张纸）或者在一个图像文件中只有 3 张纸，间隔你如何想要它。

# java - 简单（Twitter + Streaming API + Java + OAuth）示例

> ID：13907719
> 
> 赞同：2
> 
> 时间：2012-12-17T02:56:59.773
> 
> 标签：java, api, twitter, oauth, streaming

为了创建一个简单的 Java 程序来从 Twitter 的流 API 中提取推文，我修改了这个 ( [http://cotdp.com/dl/TwitterConsumer.java](http://cotdp.com/dl/TwitterConsumer.java) ) 代码片段以使用 OAuth 方法。结果是下面的代码，在执行时会引发 Connection Refused Exception。

我知道[Twitter4J](http://twitter4j.org/en/index.html)但是我想创建一个最少依赖其他 API 的程序。

我已经完成了我的研究，看起来 oauth.signpost 库适合 Twitter 的流 API。我还确保我的身份验证详细信息是正确的。我的 Twitter 访问级别是“只读”。

任何指导表示赞赏。抱歉，如果以前已经回答过此类问题，但我找不到一个简单的 Java 示例来说明如何在不依赖 Twitter4j 的情况下使用流 API。

问候

AHL

 `````
import java.io.BufferedReader;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import oauth.signpost.OAuthConsumer;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;

/**
 * A hacky little class illustrating how to receive and store Twitter streams
 * for later analysis, requires Apache Commons HTTP Client 4+. Stores the data
 * in 64MB long JSON files.
 * 
 * Usage:
 * 
 * TwitterConsumer t = new TwitterConsumer("username", "password",
 *      "http://stream.twitter.com/1/statuses/sample.json", "sample");
 * t.start();
 */
public class TwitterConsumer extends Thread {
    //
    static String STORAGE_DIR = "/tmp";
    static long BYTES_PER_FILE = 64 * 1024 * 1024;
    //
    public long Messages = 0;
    public long Bytes = 0;
    public long Timestamp = 0;

    private String accessToken = "";
    private String accessSecret = "";
    private String consumerKey = "";
    private String consumerSecret = ""; 

    private String feedUrl;
    private String filePrefix;
    boolean isRunning = true;
    File file = null;
    FileWriter fw = null;
    long bytesWritten = 0;

    public static void main(String[] args) {
        TwitterConsumer t = new TwitterConsumer(
            "XXX", 
            "XXX",
            "XXX",
            "XXX",
            "http://stream.twitter.com/1/statuses/sample.json", "sample");
        t.start();
    }

    public TwitterConsumer(String accessToken, String accessSecret, String consumerKey, String consumerSecret, String url, String prefix) {
        this.accessToken = accessToken;
        this.accessSecret = accessSecret;
        this.consumerKey = consumerKey;
        this.consumerSecret = consumerSecret;
        feedUrl = url;
        filePrefix = prefix;
        Timestamp = System.currentTimeMillis();
    }

    /**
     * @throws IOException
     */
    private void rotateFile() throws IOException {
        // Handle the existing file
        if (fw != null)
            fw.close();
        // Create the next file
        file = new File(STORAGE_DIR, filePrefix + "-"
                + System.currentTimeMillis() + ".json");
        bytesWritten = 0;
        fw = new FileWriter(file);
        System.out.println("Writing to " + file.getAbsolutePath());
    }

    /**
     * @see java.lang.Thread#run()
     */
    public void run() {
        // Open the initial file
        try { rotateFile(); } catch (IOException e) { e.printStackTrace(); return; }
        // Run loop
        while (isRunning) {
            try {

                OAuthConsumer consumer = new CommonsHttpOAuthConsumer(consumerKey, consumerSecret);
                consumer.setTokenWithSecret(accessToken, accessSecret);
                HttpGet request = new HttpGet(feedUrl);
                consumer.sign(request);

                DefaultHttpClient client = new DefaultHttpClient();
                HttpResponse response = client.execute(request);
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(response.getEntity().getContent()));
                while (true) {
                    String line = reader.readLine();
                    if (line == null)
                        break;
                    if (line.length() > 0) {
                        if (bytesWritten + line.length() + 1 > BYTES_PER_FILE)
                            rotateFile();
                        fw.write(line + "\n");
                        bytesWritten += line.length() + 1;
                        Messages++;
                        Bytes += line.length() + 1;
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
            System.out.println("Sleeping before reconnect...");
            try { Thread.sleep(15000); } catch (Exception e) { }
        }
    }
}
} 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-16T10:56:27.020

我尝试模拟代码，发现错误很简单。您应该在 url 中使用 https 而不是 http :)``

# java - 进行网络服务调用时出错

> ID：13907723
> 
> 赞同：2
> 
> 时间：2012-12-17T02:57:27.053
> 
> 标签：java, axis2, webservices-client

我正在访问由其他人作为客户端使用的 Web服务，`axis2`并且我为 abcStub .java （通过运行一些批处理生成的存根 java 文件）创建了一个包装方法，并尝试在包装 java 文件中实例化存根文件。但我收到以下错误：

```
    信息：错误 org.apache.struts.actions.DispatchAction - Dispatch[/remittanceTransaction] 到方法“remTransApprove”返回异常
    java.lang.reflect.InvocationTargetException
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 java.lang.reflect.Method.invoke(Method.java:601)
    引起：java.lang.NoSuchMethodError: org.apache.neethi.PolicyEngine.getPolicy(Ljava/lang/Object;)Lorg/apache/neethi/Policy;
    在 org.tempuri.MIRSRemittanceServicesStub.getPolicy(MIRSRemittanceServicesStub.java:3558)
    在 org.tempuri.MIRSRemittanceServicesStub.populateAxisService（MIRSRemittanceServicesStub.java:57）
    在 org.tempuri.MIRSRemittanceServicesStub.(MIRSRemittanceServicesStub.java:268)
    在 org.tempuri.MIRSRemittanceServicesStub.(MIRSRemittanceServicesStub.java:257)
    在 org.tempuri.MIRSRemittanceServicesStub.(MIRSRemittanceServicesStub.java:305)
    信息：g.tempuri.MIRSRemittanceServicesStub.(MIRSRemittanceServicesStub.java:297)
    在 com.mtmrs.webservice.MIRSRemittanceTransactionManagerImpl.getAppDeclWrapper(MIRSRemittanceTransactionManagerImpl.java:201)
    在 com.mtmrs.business.backoffice.impl.RemittanceTransactionManagerImpl.remTransApprove(RemittanceTransactionManagerImpl.java:1417)
    在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    在 com.mtmrs.application.backoffice.action.RemittanceTransactionAction.remTransApprove(RemittanceTransactionAction.java:1409)
    ... 78 更多
    信息：警告 org.apache.struts.action.RequestProcessor - 抛出未处理的异常：类 javax.servlet.ServletException
     警告：StandardWrapperValve [action]：PWC1406：Servlet 操作的 Servlet.service() 引发异常
    java.lang.NoSuchMethodError: org.apache.neethi.PolicyEngine.getPolicy(Ljava/lang/Object;)Lorg/apache/neethi/Policy;
    在 org.tempuri.MIRSRemittanceServicesStub.getPolicy(MIRSRemittanceServicesStub.java:3558)
    在 org.tempuri.MIRSRemittanceServicesStub.populateAxisService（MIRSRemittanceServicesStub.java:57）
    在 org.tempuri.MIRSRemittanceServicesStub.(MIRSRemittanceServicesStub.java:268)

```

我认为这一定有问题

```
org.apache.neethi.PolicyEngine.getPolicy(Ljava/lang/Object;)Lorg/apache/neethi/Policy; 
```

或者我可能错了。无论哪种方式，不知道如何解决。如果有人知道以前面对/解决过这个问题，那将会有很大帮助。

我在拨打以下电话时得到了这个：

`public String getAppDeclWrapper(String session, String parentAgent, String mirsTxnNo, String strReason, String isApprove, String modifiedBY){ String returnString = null;
try {`

 ````
 mtmrsLogger.info("Entering into Approve Decline procedure, Starting to send Status to MIRS");
               MIRSRemittanceServicesStub stub  = new MIRSRemittanceServicesStub(); //Error occurs at this line

               ApproveDecline approvedEcline = new ApproveDecline();
               ApproveDeclineResponse approveResponse =  new ApproveDeclineResponse();
               approvedEcline.setCParentAgent(parentAgent);
               approvedEcline.setMirsSession(session);
               approvedEcline.setModifiedBy(modifiedBY);
               approvedEcline.setRefNo(mirsTxnNo);
               approvedEcline.setStrReason(strReason);
               approvedEcline.setIsApprove(isApprove); 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:33:59.047

我的猜测是您的类路径上有多个版本（或无效版本）的 PolicyEngine。我认为您在 servlet 引擎中运行。尝试以下代码来确定此版本的存储位置并修复它：

```
org.apache.neethi.PolicyEngine.class.getProtectionDomain().getCodeSource().getLo‌​cation() 
````

# django - 更新整数字段计数的模型方法

> ID：13907726
> 
> 赞同：0
> 
> 时间：2012-12-17T02:58:10.810
> 
> 标签：django, django-models, django-forms

所以我有一个 PickupSchedule 模型，它有一个字段`current_count`。当捐赠被提交时，current_count 会增加。当捐赠被重新安排时，它会减少，而新的路线会增加。还有一个豁免程序可以做同样的事情。为了避免重复代码，我希望执行以下操作，但它不起作用（属性错误 - `'PickupSchedule' object has no attribute 'decrease_current_count'`）。我知道我可以 += 保存表单中的字段，但我希望将它放在一个位置而不是两个单独的表单。

模型.py

```
class PickupSchedule(models.Model):

    current_count= models.IntegerField(blank=True, default=0)

    def __unicode__(self):
        return self.route 

    def decrease_current_count(self):
        self.current_count -= 1
        self.save()

    def increase_current_count(self):
        self.current_count += 1
        self.save() 
```

forms.py 保存

```
def save(self,force_insert=False, force_update=False,commit=True):

    donor = super(RescheduleForm,self).save(commit=False)

    # Update the old route current count
    old_route = self.old_route
    old_route.decrease_current_count()

    # Update the new route current count
    new_route = PickupSchedule.objects.get(pickup_id = self.new_id)
    new_route.increase_current_count()

    if commit:
        donor.save()

    return donor 
```

# webdriver - 如何使用 selenium webdriver 在同一浏览器中并行运行测试？

> ID：13907727
> 
> 赞同：1
> 
> 时间：2012-12-17T02:58:47.503
> 
> 标签：webdriver, selenium-webdriver, testng

我们已经在 2000 年左右设置了一套自动化测试用例，我们需要每天在每个出现的新版本上运行它们。目前在一台机器上完成测试需要 4 个小时。为了减少这种情况，我们计划通过启动多个相同类型的浏览器在同一台机器上分批运行测试（每批 500 个）。假设每个测试套件有 4 个 Firefox 浏览器会话。所以它可以在 1 小时内完成。是否可以使用 selenium webdriver 和 testng 来实现？请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:24:06.947

可以使用 Selenium Grid 和 TestNG。Grid 可以帮助您根据需要在各种机器或浏览器实例上分发您的测试。要开始，请参考：[Grid2](http://code.google.com/p/selenium/wiki/Grid2) 我认为您可能需要稍微更改驱动程序实例化代码以包含 RemoteWebDriver 而不是具体的驱动程序，但如果您的框架中的驱动程序实例化代码是隔离的，那就没问题了。如果您的测试编写良好以支持并行执行，TestNG 和 Grid 可以提供帮助。对于TestNG，你可以参考，[TestNG 中的并行运行。](http://testng.org/doc/documentation-main.html#parallel-running)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:24:18.467

如果您使用的是 Python - 最好的方法是使用[py.test](http://pytest.org/latest/)来驱动测试。要分发测试，可以使用[pytest-xdist 插件。](http://pypi.python.org/pypi/pytest-xdist)

无论如何，对于 Java 和 Python，您都可以使用[Jenkins](http://jenkins-ci.org/)来运行/分发您的测试（使用[Selenium 插件](https://wiki.jenkins-ci.org/display/JENKINS/Selenium+Plugin)）

# iphone - 使用 xcode 在 iphone 应用程序开发中创建和使用音量滑块的代码

> ID：13907730
> 
> 赞同：1
> 
> 时间：2012-12-17T02:59:07.377
> 
> 标签：iphone, ios6, mpmovieplayercontroller, xcode4.5, avplayer

我正在使用 xcode 4.2 在 iphone 中创建一个广播流媒体应用程序。我已经使用 Mpmovieplayercontroller 来实现从流式 URL 流式传输，并将播放和暂停作为单独的按钮。我想要代码来实现音量滑块，使用单个按钮播放和暂停（在播放到暂停和暂停到播放之间转换）。有没有其他框架可以用来完成任务？请帮助我，以便我可以很容易地完成我的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:11:32.277

我认为当您实现 Mpmovieplayercontroller 时，音量滑块会自动进入

控制器。&还有一个暂停/恢复按钮。

# c# - Windows Phone WebBrowser 控件中的 Greasemonkey 脚本

ID：13907733

赞同：0

时间：2012-12-17T02:59:52.417

标签：c#, javascript, windows-phone-7, webbrowser-control, greasemonkey

# ios - Apple 商店应用程序 - 外部链接/网址规则

> ID：13907734
> 
> 赞同：2
> 
> 时间：2012-12-17T02:59:53.197
> 
> 标签：ios, iphone, app-store

我对外部链接/网址的规则有点困惑。我正在制作一个本机应用程序。它是一个免费的应用程序。我想把它放在苹果商店。

它是一个带有食谱和教学视频的烹饪应用程序。该应用程序链接到有关如何烹饪您选择的菜肴的 youtube 说明视频。

示例：他们按下按钮。他们将离开应用程序并直接访问我的 youtube 烹饪视频。（我是编程新手，我认为这可能是最简单的方法）

他们会因为我链接到我的 youtube 视频而拒绝我的应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:01:16.623

**不，这绝对是允许的。** 您可以在 a 中打开页面，`UIWebView`使其保留在应用程序中，或者在 Safari 浏览器中打开页面。

您可以链接到任意数量的网站，只要您没有以某种方式侵犯版权（您没有）或链接到不适当的网站。

如果我可以提出建议，如果您还没有了解该`UIWebView`课程，您应该对此进行研究。它允许您从应用程序中加载网页。这对您来说会好很多，因为用户可以在观看您的 youtube 烹饪视频时留在您的应用程序中。网上有很多教程，官方文档在[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)。

# javascript - 加速 Jquery 心跳

> ID：13907736
> 
> 赞同：0
> 
> 时间：2012-12-17T03:00:45.590
> 
> 标签：javascript, jquery, heartbeat

我是一个非常新的程序员，他制作了一个应用程序，它每 3 秒向 php 页面发送一次心跳并返回一个值，该值决定了要显示的表单元素。我对结果相当满意，但我想让我的 jquery 尽可能快和高效（目前有点慢）。我很确定 SO 已经有一些关于加快心跳的有用答案，但我[搜索](https://stackoverflow.com/search?q=speed%20up%20heartbeats)并找不到任何答案。

所以这是我的代码（只是 jquery，但如果需要，我可以发布 php 和 html，以及任何需要帮助的人）：

```
<script type="text/javascript">
$(document).ready(function() {  
  setInterval(function(){

    $('.jcontainer').each(function() {
        var $e = $(this);
        var dataid = $e.data("param").split('_')[1] ;
        $.ajax({
            url: 'heartbeat.php',
            method: 'POST',
            contentType: "application/json",
            cache: true,
            data: { "dataid": dataid },
            success: function(data){

                var msg = $.parseJSON(data);

                if (msg == ""){ //after reset or after new patient that is untouched is added, show checkin
                    $e.find('.checkIn').show();
                    $e.find('.locationSelect').hide();
                    $e.find('.finished').hide();
                    $e.find('.reset').hide();
                }
                if ((msg < 999) && (msg > 0)){ // after hitting "Check In", Checkin button is hidden, and locationSelect is shown
                    $e.find('.checkIn').hide();
                    $e.find('.locationSelect').show();
                    $e.find('.finished').hide();
                    $e.find('.reset').hide();
                    $e.find('.locationSelect').val(msg);
                }
                if (msg == 1000){ //after hitting "Checkout", Option to reset is shown and "Finished!"
                    $e.find('.checkIn').hide();
                    $e.find('.locationSelect').hide();
                    $e.find('.finished').show();
                    $e.find('.reset').show();
                }

            }
       });

    });
  },3000);

$('.checkIn').click(function() {
    var $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of button  (1 for the first button)
    // You can map this to the corresponding button in database...
    $.ajax({
        type: "POST",
        url: "checkin.php",
        // Data used to set the values in Database
        data: { "checkIn" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.hide();
            var $container = $e.closest("div.jcontainer");
            // Get the immediate form for the button
            // find the select inside it and show...
            $container.find('.locationSelect').show();
            $container.find('.locationSelect').val(1);
        }
    });
});
$('.reset').click(function() {
    var $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of button  (1 for the first button)
    // You can map this to the corresponding button in database...
    $.ajax({
        type: "POST",
        url: "reset.php",
        // Data used to set the values in Database
        data: { "reset" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.hide();
            var $container = $e.closest("div.jcontainer");
            // Get the immediate form for the button
            // find the select inside it and show...
            $container.find('.checkIn').show();
        }
    });
});
$('.locationSelect').change(function(e) {
  if($(this).children(":selected").val() === "CheckOut") {
    $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    $.ajax({
        type: "POST",
        url: "checkout.php",
        // Data used to set the values in Database
        data: { "checkOut" : $(this).val(), "buttonId" : data},
        success: function() {
            // Hide the current Button clicked
            $e.hide();
            var $container = $e.closest("div.jcontainer");
            // Get the immediate form for the button
            // find the select inside it and show...
            $container.find('.finished').show();
            $container.find('reset').show();
        }
    });
  }
  else{
    $e = $(this);
    var data = $e.data("param").split('_')[1] ;
    // gets the id  of select (1 for the first select)
    // You can map this to the corresponding select in database...
    $.ajax({
        type: "POST",
        url: "changeloc.php",
        data: { "locationSelect" : $(this).val(), "selectid" : data},
        success: function() {
            // Do something here
        }
    });
  }
 });
});
</script> 
```

感谢所有和任何帮助！请询问您是否需要更多详细信息！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:52:26.147

很多因素可能导致缓慢。需要考虑的一些事项：

*   心跳的速度不仅仅取决于您的客户端 JavaScript 代码。您的服务器端 php 代码可能存在问题。

*   此外，每三秒心跳一次*非常*频繁，也许过于频繁。检查浏览器的开发人员调试工具，每个请求实际上都在下一个 3 秒间隔*之前返回响应。*可能是您的服务器响应缓慢，并且您的请求正在“积压”。

*   你可以通过简化你的 DOM 操作来加速你的 jQuery，例如：

    ```
    if (msg == "") 
    {
        $e.find('.checkIn').show();
        $e.find('.locationSelect, .finished, .reset').hide();
    } 
    ```

# jquery - .link() 函数属于哪里以及来自属性的数据是什么

> ID：13907737
> 
> 赞同：-1
> 
> 时间：2012-12-17T03:00:46.390
> 
> 标签：jquery, html, jquery-templates

我想知道以下流程以及他们使用的插件是什么？

我尝试了各种工具和所有调试，有人可以解释一下吗

不要求任何代码，如果你能告诉我插件就足够了。

json对象

```
 var movies = [
        { Name: "English2", ReleaseYear: "1998" },
        { Name: "English3", ReleaseYear: "1999" },
        { Name: "The Inheritance", ReleaseYear: "1976" }
    ];

<table id="tableID">
</table> 
```

// 这个链接是什么，你能告诉我 .link() 属于什么插件吗？我签入了 jquery 并且它在那里可用。

```
$("#tableID").link(movies, "#rowTemplate"); 
```

//什么是属性data-getfrom？？？

```
<script id="rowTemplate" type="text/x-jquery-tmpl">
  <tr>
    <td data-getfrom="[Name]"></td>
    <td data-getfrom="[ReleaseYear]"></td>
  </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:08:45.363

每个人都可以制作一个插件并具有一个名为 的功能`link`，但是从您的内容来看，我认为这就是您所发现的。

[http://api.jquery.com/link/](http://api.jquery.com/link/)

# html - 如何到达由 htmlLoader 加载的页面顶部

> ID：13907739
> 
> 赞同：1
> 
> 时间：2012-12-17T03:01:04.303
> 
> 标签：html, actionscript-3, apache-flex, load, loader

我使用 Flash Builder 4.6 (Flex 4.6) 编写了一个 AIR 应用程序，由各种 SWF 模块调用。使用包含 URL 和窗口大小的参数调用 AIR 应用程序。该应用程序大部分是成功的，但我很难尝试做我认为简单的事情 - 加载后转到页面顶部。例如 - 我加载一个网页，当点击页面中的链接时，该网页又可以加载另一个网页。当加载新页面时，我确实处理了（第二个）onLoad 事件，但我无法到达新加载页面的顶部。

当我从第一个加载页面的顶部向下滚动并单击一个链接时，就会出现问题 - 新页面已加载但verticalScrollPosition 没有改变 - 它设置为第一个加载页面滚动到的位置。

我尝试了以下方法：

```
...htmlLoader.window.document.body.clientHeight

...htmlLoader.window.document.body.height

...browserInsideFlex.height 
```

（以上是ID **它加载了以下语句： **browserInsideFlex.location = URLin;****

 **也使用**了 scroller.height**

一切都无济于事。

所以我的问题是 - 我该如何：

1) 获取加载 URL 的正确高度 2) 在新加载后到达先前滚动窗口的顶部

我已经通过 FB 4.6 调试器查看了所有**verticalScrollPosition**数字，但它们都是 0 - 即使在我滚动之后也是如此。我是否需要使用**ExternalInterface**来允许 javascript 完成工作？

非常感谢您的任何帮助/指导。**

# javascript - 在 phonegap 应用程序中加载基本的身份验证保护图像

> ID：13907744
> 
> 赞同：5
> 
> 时间：2012-12-17T03:01:24.820
> 
> 标签：javascript, ajax, image, cordova, basic-authentication

我有一个 phonegap 应用程序，它与使用 HTTP Basic Auth 保护的 web api 通信。该 api 返回带有 img 标签的 html，这些标签引用了同样位于安全服务器上的图像。不知何故，我需要我的应用程序能够请求和加载这些图像。将基本身份验证凭据注入 src（即 src=http://username:password@MySecuredServer.com/...）将不起作用。此外，我不控制服务器，因此无法以 base64 格式发送图像。

我目前的方法是使用 $.ajax 请求图像，设置 Authorization 标头，然后将图像从缓存加载到 DOM（因为图像由 ajax 调用缓存）。理想情况下，我应该能够使用 $.ajax 请求每个图像一次，然后将图像从缓存加载到页面上。如果页面被重新加载（因为图像已经被缓存），这种方法有效，但在第一次发出请求时不会加载图像（即使我正在等待请求完成）。请注意，我的 phonegap 应用程序只有一个页面（从 html DOM 的角度来看），其内容是动态加载和卸载的，因此永远不会重新加载主页面。这是我目前正在尝试的：

```
$.ajax({
       url: 'http://MySecuredServer.com/images/example.png',
       beforeSend: function(req){
           req.setHeader('Authorization', 'Basic ' + base64UserCredentials);
       },
       cache: true,
       complete: function(){
            var img = document.createElement('img');
            img.src = 'http://MySecuredServer.com/images/example.png';
            $('#target').append(img);
       }
       }); 
```

我也尝试过类似的东西

```
complete: function(){
    var img = new Image();
    img.src = http://.....
    $(img).on('load', function(){
          $('#target').append(img);
    });
} 
```

那么问题来了：如何将受保护的图像放入我的应用程序中？这是正确的方法吗？如果是，我做错了什么？如果没有，那么我如何请求这些安全图像？对于一般概念或特定场景的任何帮助都会非常棒。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:08:24.467

我最终使用 NiKo[在此处](https://stackoverflow.com/questions/7370943/retrieving-binary-file-content-using-javascript-base64-encode-it-and-reverse-de)提供的解决方案将二进制数据转换为 base64 ，并在标头中设置了 Auth 凭据。

```
//request image
var xhr = new XMLHttpRequest();
xhr.open('GET', url, false);
xhr.responseType = 'arraybuffer';
xhr.setRequestHeader('Authorization', 'Basic ' + encodedCredentials);
xhr.onload = function(e) {
    $("#target").attr('src', 'data:' + type + ';base64,' + base64ArrayBuffer(e.currentTarget.response));
};
xhr.send(); 
```

其中base64ArrayBuffer是NiKo给出的函数。

# javascript - 错误：无法获取属性“长度：”对象的值为 null 或未定义

> ID：13907745
> 
> 赞同：1
> 
> 时间：2012-12-17T03:01:28.810
> 
> 标签：javascript, vb.net, winforms, visual-studio-2010, browser

我有这个错误`WebBrowser`

> 错误：无法获取属性“长度：”对象的值为 null 或未定义

![在此处输入图像描述](../Images/a033e81dd39361bd6e87afb199b9c182.png)

即使我有这个代码：

```
CType(TabControl1.SelectedTab.Controls.Item(0), WebBrowser).ScriptErrorsSuppressed = True 
```

为什么我会得到这个，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:51:57.547

如果您是动态创建 Webbrowser 组件，我建议您`ScriptErrorsSurpressed = True`在此设置。

```
Dim wb as New WebBrowser
wb.ScriptErrorsSurpressed = True
'Other declarations... 
```

如果它不是动态创建的，那么我建议您转到控件并`True`在设计视图中手动将设置更改为。

如果这不起作用，请参阅我对您原始帖子的请求/评论。

编辑 1

这是你的代码：

```
Dim Browser As New WebBrowser 
TabControl1.TabPages.Add("New Page") 
Browser.Name = "Web Browser" 
Browser.Dock = DockStyle.Fill 
TabControl1.SelectedTab.Controls.Add(Browser) 
AddHandler Browser.ProgressChanged, AddressOf Loading 
AddHandler Browser.DocumentCompleted, AddressOf Done 
int = int + 1 
CType(TabControl1.SelectedTab.Controls.Item(0), WebBrowser).GoHome()
CType(TabControl1.SelectedTab.Controls.Item(0), WebBrowser).ScriptErrorsSuppressed = True 
```

我会这样写：

```
Dim Browser As New WebBrowser 
Browser.Name = "Web Browser" 
Browser.Dock = DockStyle.Fill 
AddHandler Browser.ProgressChanged, AddressOf Loading 
AddHandler Browser.DocumentCompleted, AddressOf Done 
TabControl1.TabPages.Add("New Page") 
TabControl1.SelectedTab.Controls.Add(Browser)
int = int + 1 
Browser.GoHome()
Browser.ScriptErrorsSurpressed = True 
```

我认为根本不需要`CType()`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T03:48:57.607

[您收到错误是因为 yts/bin 文件夹中http://s.ytimg.com](http://s.ytimg.com)服务器上的 javascript 文件 (www-home-vflVATumV.js)有错误，或者发现任何 LENGTH 属性的动态错误它试图评估的对象。

# java - 通过修改覆盖解决 ConcurrentModificationException

> ID：13907747
> 
> 赞同：1
> 
> 时间：2012-12-17T03:01:37.533
> 
> 标签：java, android, debugging, concurrency

我一直在尝试修复导致间歇性 ConcurrentModificationException 的错误。发生的事情是，我有大量的地理点与 ItemizedOverlay 一起显示。然而，当地图移动时，我试图清除所有当前的覆盖项目（地理点）并将它们替换为适合新视图窗口的新点。

因此，我有一个回调函数，可以清除旧的叠加层并用新的叠加层替换它们。我*认为*我的错误源于多个线程试图同时执行此操作。相关部分如下。我对覆盖和此类工作如何在低级别上的理解非常有限，所以我想知道是否有人可以确认（或反驳）这可能会导致问题。

```
//first clear out the old overlays
List<Overlay> mapOverlays = mapView.getOverlays();
mapOverlays.clear();

//create the new overlays, each initialized with appropriate Drawables
MenuOverlay lowOverlay = new MenuOverlay(this, lowRisk);//(all valid Drawables)
MenuOverlay medOverlay = new MenuOverlay(this, medRisk);
MenuOverlay highOverlay = new MenuOverlay(this, highRisk);

//populate the overlays

//add the new overlays into the list of overlays
mapOverlays.add(lowOverlay);
mapOverlays.add(medOverlay);
mapOverlays.add(highOverlay);

//make the map refresh; this operation has to be pushed to another thread
Runnable runnable = new Runnable() {
    public void run() {
        mapView.invalidate();
    }
};
runOnUiThread(runnable); 
```

我尝试制作此方法`synchronized`，但错误仍然发生。这可能是由于在前一个可运行对象终止之前将新的可运行对象推送到 UI 线程而引起的吗？我已经看到提到填充是比无效更好的方法，尽管我不完全确定它们有何不同。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T01:00:47.317

修改覆盖集应始终在 UI 线程上完成。返回的由 拥有`List`，它可以随时决定查看或操作列表。`getOverlays()``MapView`

由于您正在处理大量地理点，因此您的后台线程可能正在清除（或添加）覆盖，同时在`MapView`UI 线程上对其进行迭代。这将触发 a`ConcurrentModificationException`因为迭代器在其底层覆盖集更改时无效。有时更改不会立即对 UI 线程可见，因此崩溃是间歇性的。

设置叠加层通常是此类工作流程中较慢的部分。为避免并发修改，您可以在后台线程中设置叠加层，`clear()`然后`add()`在`Runnable`. （另一种选择是使用`AsyncTask`.）

例如：

```
// Slow setup steps
final MenuOverlay lowOverlay = new MenuOverlay(this, lowRisk);
final MenuOverlay medOverlay = new MenuOverlay(this, medRisk);
final MenuOverlay highOverlay = new MenuOverlay(this, highRisk);

Runnable runnable = new Runnable() {
    public void run() {
        // Anything that touches UI widgets (map, overlay set, views, etc.)
        List<Overlay> mapOverlays = mapView.getOverlays();
        mapOverlays.clear();

        mapOverlays.add(lowOverlay);
        mapOverlays.add(medOverlay);
        mapOverlays.add(highOverlay);

        mapView.invalidate();
    }
};

runOnUiThread(runnable); 
```

# java - 有人有 Android 的cropImage 示例吗？

> ID：13907749
> 
> 赞同：-1
> 
> 时间：2012-12-17T03:02:07.080
> 
> 标签：java, android, nullpointerexception, crop

我有一个我一直在开发的 Android 应用程序，我一直在使用内置的裁剪图像意图（使用图库）来裁剪图片。我需要允许用户将图像裁剪为正方形 (1:1)，然后我将稍后处理图像。这是我的问题：出于某种原因，我完全无法理解应用程序强制关闭并返回 NullPointerException ......有时。尝试从新创建的（裁剪的）图像中检索 URI 时会发生这种情况。它发生在如此随机的时间，它开始让我怀疑它是否只是一个 OME 以一种奇怪的方式表现出来。无论如何，我完全迷失了，并且已经问过这个问题而没有真正的答案（除了 NullPointerException 是什么），这没有帮助。我在这里发布了我的问题：[链接到以前提出的问题](https://stackoverflow.com/questions/12356942/android-programming-null-pointer-exception-on-result "NullPointerException 问题")

如果您能回答任何很棒的建议，否则我将放弃标准的 Gallery Crop 并编写自己的裁剪方法。我对编程相当陌生，所以如果你们能提出任何“自定义裁剪活动”的示例或代码片段，那将是非常棒的。

PS。我正在寻找一种类似于 Instagram 裁剪方法的方法。您认为这是像我这样的新手可以做的事情吗？还是需要很多专业知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:37:42.517

这将打开选择窗口，询问您需要从哪种图库中获取图像（将向您显示可用的选项和应用程序），一旦您选择一个，它将向您显示裁剪屏幕。

我希望它有帮助！...

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT, null);

Uri imageUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/yourTempDirectory/"));
intent.setData(imageUri);
intent.setType("image/*.");
intent.putExtra("crop", "true");
intent.putExtra("aspectX", 1);
intent.putExtra("aspectY", 1);
intent.putExtra("outputX", 200); 
intent.putExtra("outputY", 200);
intent.putExtra("scale", true);
intent.putExtra("return-data", true);

try {       
    startActivityForResult(intent, GALLERY_CAPTURE);
}catch (ActivityNotFoundException e) {
    Log.e("ERROR!!!! :  ",""+e);
} 
```

重要的！你必须声明

```
final int GALLERY_CAPTURE = 1; 
```

如果您需要任何帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T12:44:40.707

有一个运行良好的开源 Android 库，它叫做[CropImage](https://github.com/alecio/cropimage)，试试看。

# ios5 - NSManagedObjectContext performBlock 和 dispatch_group_t

> ID：13907751
> 
> 赞同：1
> 
> 时间：2012-12-17T03:02:14.257
> 
> 标签：ios5, core-data, grand-central-dispatch, nsmanagedobjectcontext

问题是我需要修改（更新/创建/删除）从 0 到 10000 个 NSManagedObject 的子类。当然，如果它 <= 1000 一切正常。我正在使用这段代码：

```
+ (void)saveDataInBackgroundWithBlock:(void (^)(NSManagedObjectContext *))saveBlock completion:(void (^)(void))completion {
    NSManagedObjectContext *tempContext = [self newMergableBackgroundThreadContext];
    [tempContext performBlock:^{

        if (saveBlock) {
            saveBlock(tempContext);
        }

        if ([tempContext hasChanges]) {
            [tempContext saveWithCompletion:completion];
        } else {
            dispatch_async(dispatch_get_main_queue(), ^{
                if (completion) {
                    completion();
                }
            });
        }
    }]; 
}

- (void)saveWithCompletion:(void(^)(void))completion {
    [self performBlock:^{
        NSError *error = nil;
        if ([self save:&error]) {
            NSNumber *contextID = [self.userInfo objectForKey:@"contextID"];
            if (contextID.integerValue == VKCoreDataManagedObjectContextIDMainThread) {
                dispatch_async(dispatch_get_main_queue(), ^{
                    if (completion) {
                        completion();
                    }
                });
            }
            [[self class] logContextSaved:self];
            if (self.parentContext) {
                [self.parentContext saveWithCompletion:completion];
            }
        } else {
            [VKCoreData handleError:error];
            dispatch_async(dispatch_get_main_queue(), ^{
                if (completion) {
                    completion();
                }
            });
        }
    }];
} 
```

只有在保存主线程上下文时才会触发完成。这个解决方案非常完美，但是

当我从服务器获取超过 1000 个实体时，我想并行处理对象，导致更新操作花费太多时间（例如，4500 更新大约 90 秒，不到 1/3 的时间需要 JSON 接收过程，所以大约 60秒我只是钻 NSManagedObjects）。如果没有 CoreData，使用 dispatch_group_t 将数据划分为子数组并同时在不同的线程中处理它非常容易，但是......有人知道如何使用 CoreData 和 NSManagedObjectContexts 制作类似的东西吗？是否可以在没有 performBlock: 的情况下使用 NSManagedObjectContext 和 NSPrivateQueueConcurrencyType（iOS 5 风格）？保存和合并大约 10 个上下文的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T13:16:48.463

根据您的描述，您似乎正在抓住救命稻草来恢复表现。

Core Data 文件 I/O 性能主要由 SQLite 的单线程特性决定。有多个上下文在同一个商店协调器上跳动不会让事情进展得更快。

为了提高性能，您需要以不同的方式做事。例如，您可以将后台写入批处理到更大的操作中。（怎么做？你需要在保存之前在每个 GCD 块中做更多的事情。）你可以使用 Core Data 的调试工具来查看你的获取和保存发出了什么样的 SQL。（有很多方法可以提高 CD 获取性能，但很少有提高节省的方法。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T16:50:28.137

好的，在我完成我想要的一切后，我发现了以下内容：

dispatch_group_t 具有不同的 PrivateQueues 和 NSManagedObjectContexts 结果：

格式是“实体数/秒”：

*   333 /6
*   1447/27
*   3982/77

单个后台线程（NSManagedObjectContext + NSPrivateQueueConcurrencyType + performBlock :)

*   333 /1
*   1447/8
*   3982/47

所以认为我不应该再试一次，还有很多其他问题，比如在合并大量上下文（即使在后台）时应用程序冻结。我会尝试其他方法来提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:33:05.437

您可以创建多个上下文并在每个上下文上处理一部分数据......？

# database - 如何将没有索引键的excel.cvs文件导入phpmyadmin

> ID：13907756
> 
> 赞同：0
> 
> 时间：2012-12-17T03:03:10.307
> 
> 标签：database, excel, import, multiple-columns

我的问题是我无法将 excel.cvs 文件导入我的 sql 数据库，因为它没有索引键。

这是数据库结构：

```
+-----+------+-----+-----+---------+------+-------+----+
|from | to   |cont |desc |date_time| total| amount| id |
+-----+------+-----+-----+---------+------+-------+----+ 
```

id 是具有自动增量的主要。

cvs文件内容：

```
12345678910 17071234569 UNITED STATES OF AMERICA    California  12/15/2012 2:41   4:00  0.04536
12345678910 17861234569 UNITED STATES OF AMERICA    Florida     12/15/2012 2:41   4:00  0.076 
```

记事本++中的简历：

```
12345678910,17071234569,UNITED STATES OF AMERICA,California,12/15/2012 2:41,4:00,0.04536
12345678910,17861234569,UNITED STATES OF AMERICA,Florida,12/15/2012 2:41,4:00,0.076 
```

当我将 cvs 导入我的数据库时，它总是说我缺少 1 个作为 ID 的列，但是当我创建一个 ID 列时，它总是说该列上没有数据，并且当我在 ID 上输入一个值时CVS 文件中的列中，我的数据库上的 ID 混淆了。

前任：

```
+---+
|ID |
+---+
|1  |
+---+
|   |
+---+
|1  |
+---+
|2  | 
```

这里有什么解决方案，这样即使没有 ID 列，我也可以导入我的 cvs，并且导入到数据库的文件将自动获得一个 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:21:24.683

让我简单地解释一下。您的表需要 8 个参数，而您只给它 7 个。当您使用 insert 语句插入记录时，这是可能的。在导入的情况下，您必须提供所有列详细信息。即使它是自动递增的，您也不能离开一列。所以你必须自己给 ID 列。

这是我的建议：我不知道你是如何得到 CSV 文件的，但你可以在 MS-Excel 中打开 CSV 文件。现在您知道在那里添加一列是多么容易，并且只需多次单击即可在那里生成序列。

在表中插入记录后，您可以知道您有多少行。现在在 SQL 提示符中使用此命令，或者您始终可以在 PHPMyAdmin 中找到一个 SQL 提示符：

```
ALTER TABLE t AUTO_INCREMENT = <number_of_rows+1>; 
```

# python - Python中的深奥解释器

> ID：13907759
> 
> 赞同：0
> 
> 时间：2012-12-17T03:03:44.893
> 
> 标签：python, esoteric-languages

与[如何运行 Esoteric Language ZOMBIE中的问题相关](https://stackoverflow.com/questions/3210165/how-to-run-esoteric-language-zombie)

我意识到有一个解释器（[http://esolangs.org/wiki/User:Marinus/ZOMBIE_interpreter](http://esolangs.org/wiki/User:Marinus/ZOMBIE_interpreter)）可以在 python 环境中运行 ZOMBIE 语言，我不明白如何使用解释器（或任何解释器）一般的）。

我是否将其保存在 .py 文件中并使用导入命令？还是执行文件？然后只在 ZOMBIE 中编写代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:15:14.730

这个解释器是用 Python 写的，所以保存为`zombie.py`. 将您的 ZOMBIE 程序写在一个单独的文件中，例如`myzombiefile.z`. 如果您在 Windows 上运行它，则需要使用 python 运行它，如下所示：

```
python zombie.py myzombiefile.z 
```

如果你在 Linux 上运行，你可以`zombie.py`使用 chmod 来执行：

```
chmod +x zombie.py 
```

然后让它使用以下命令解释您的 ZOMBIE 程序：

```
zombie.py myzombiefile.z 
```

# ios - csv 到核心数据方法错误 2012

> ID：13907760
> 
> 赞同：0
> 
> 时间：2012-12-17T03:03:58.470
> 
> 标签：ios, core-data, csv

我已经阅读了一些帖子并找到了一种方法。我将它改编为我的应用程序，但是在 [self saveContext]; 我收到一个错误的指令错误。

请让我知道原因，以及这种方法是否有意义。我也使用 \r 因为在 csv 中，每个项目都在自己的行中。

先感谢您

```
-(void)addData{
    NSString *paths = [[NSBundle mainBundle] resourcePath];
    NSString *bundlePath = [paths stringByAppendingPathComponent:@"coredatainfo.csv"];
    NSString *dataFile = [[NSString alloc] initWithContentsOfFile:bundlePath];
    NSArray *dataRows = [dataFile componentsSeparatedByString:@"\r"];
    [dataFile release];
    FirstCDitem *myItem;

    for (int i = 0 ; i < [dataRows count] ; i++)
    {
        NSArray *dataElements = [[dataRows objectAtIndex:i] componentsSeparatedByString:@","];
        NSLog(@"Added: %d %@",i,dataElements);
        myItem = (FirstCDitem *)[NSEntityDescription insertNewObjectForEntityForName:@"FirstCDitem" inManagedObjectContext:[self managedObjectContext]];
        [FirstCDitem setTitle:[dataElements objectAtIndex:i]];
        [self saveContext];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:14:22.140

此代码行有两个问题：

```
[FirstCDitem setTitle:[dataElements objectAtIndex:i]]; 
```

*   `i`是当前*行号*，因此将其用作`dataElements`数组的索引可能没有意义。也许您想要行中的第一个元素？
*   `setTitle`必须发送到实例`myItem`，而不是类`FirstCDItem`。

所以这条线应该是这样的：

```
[myItem setTitle:[dataElements objectAtIndex:0]]; 
```

# database - Akka Actors：在不丢失数据的情况下处理数据库故障

> ID：13907764
> 
> 赞同：11
> 
> 时间：2012-12-17T03:04:47.350
> 
> 标签：database, scala, akka, actor

**场景**
应用程序的数据库已关闭。这会导致任何负责将重要数据提交到数据库的参与者无法获得连接

**首选行为重要数据***在将来某个时间*
恢复时被写入数据库。

 ***当前实现**
Actor 捕获 DBException，将数据包装在 DBWriteFailed 案例类中，并将消息发送给其主管。然后，主管使用 system.scheduler.scheduleOnce(...) 安排在未来某个时间（例如 1 分钟）进行另一次写入，这样我们就不会在等待数据库恢复时绕圈子太多。

这个实现当然有效，但我觉得可能有更好的方法。

*   当提交参与者在成功提交后必须响应原始发送者时，协议会变得有点混乱。
*   发送到提交参与者的常规消息流不会以任何方式受到限制，并且参与者将愉快地处理新消息，可能无法为每条消息连接到数据库。
*   如果消息在此重试循环中被捕获的时间过长，提交参与者的邮箱将开始膨胀。提交这些数据很重要，但如果应用程序由于内存使用过多而停止或崩溃，这些都无关紧要。

我是一个 akka 新手，在主管策略方面我基本上没有经验，但我觉得我可以利用其中一个来处理一些重试逻辑。

akka 中是否有解决此类问题的通用方法？我是在正确的轨道上还是应该朝着不同的方向前进？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T08:53:06.103

您可以使用[Akka 断路器](http://doc.akka.io/docs/akka/2.1.0-RC6/common/circuitbreaker.html)来减少连接尝试。我不会使用调度程序作为重试队列，而是在actor内部使用一个缓冲区（具有最大大小限制），并在断路器再次关闭时重试（onClose回调应该向自身actor发送消息）。另一种方法是将断路器与[存储邮箱](http://doc.akka.io/docs/akka/2.1.0-RC6/scala/actors.html#Stash)结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T08:07:05.257

**如果您计划在您的应用程序中实施完全故障转移**

不。

不要将数据库故障转移责任冒泡到应用层。就您的应用程序而言，数据库应该刚刚启动并准备好接受读取和写入。

如果您的数据库经常出现故障，请花时间使您的数据库更加健壮（网络上已经有大量资源用于此：在网络上搜索“复制”、“高可用性”、“负载平衡”和“集群”等术语'，并从[highscalability.com](http://highscalability.com/)上其他人的战争故事中学习）。这完全取决于您的数据库中断的原因是什么（例如，我曾经将数据库主机上的 NIC 用尽，并通过在线上启用 GZIP 间歇性地“修复”了问题）。

如果你走这条路，你会很高兴你坚持关注点分离。

**如果您计划实施奇怪的重试逻辑并处理 DB 掉电**

如果您不希望您的应用程序成为替代数据库，那么[Patrik 的回答](https://stackoverflow.com/a/13910955/51280)是最好的选择。*

# css - 当内容不同时，一排设置大小的 div 不对齐

> ID：13907765
> 
> 赞同：0
> 
> 时间：2012-12-17T03:05:17.003
> 
> 标签：css, html, position

我有 3 个 div，都设置了高度和宽度。middel 有一条额外的线，但它仍然在父 div 的 250px 内。然而，它会导致两侧的两个 div 向下移动一点。有人可以解释为什么要这样做，以便我可以理解前进吗？

```
<div id="eventListBox">

    <div class="eventListItemBox"> 
        <img src="./icons/bluedude.png" />
        <h1>Test Item 1</h1>
        <h2>Jan 6th, 2012</h2>
        <h2>5/11</h2>
    </div>

    <div class="eventListItemBox"> 
        <img src="./icons/cookies.png" />
        <h1>Very long title to cause wrap on line</h1>
        <h2>Jan 15th, 2012</h2>
        <h2>2/9</h2>
    </div>

    <div class="eventListItemBox"> 
        <img src="./icons/cookies.png" />
        <h1>Test item 3</h1>
        <h2>Jan 15th, 2012</h2>
        <h2>2/9</h2>
    </div>

</div> 
```

CSS：

```
#eventListBox{
    margin: 0px;
    padding: 0px;
    position: absolute;
    top: 150px;
    left: 75px;
    right: 75px;
    text-align: center;
    background-color: rgba(0,0,0,0.25);
}

.eventListItemBox{
    display: inline-block;
    margin: 0px;
    padding: 0px;
    width: 250px;
    height: 250px;
    background-color: rgba(0,0,0,0.25);
}

.eventListItemBox h1{
    margin: 0px;
    padding: 0px;
    font-size: 1.5em;
    font-weight: normal;
}

.eventListItemBox h2{
    margin: 0px;
    padding: 0px;
    font-size: 1.2em;
    font-weight: normal;
} 
```

![例子](../Images/539963a8916e565b96aa73663e7b795e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:30:00.160

由于您的 div 是内联显示的，因此您的框对齐不均匀，因此需要“告诉”它们如何在行框中垂直对齐，您可以使用该`vertical-align`属性来做到这一点。默认情况下，所有内联元素的`vertical-align`值为`baseline`，这就是为什么你的左右 div 都粘在底部的原因，所以要解决这个问题，你需要告诉它们粘在顶部，正确对齐所有 div，你可以通过覆盖默认`vertical-align`值并将其设置为 来做到这一点`top`，如下所示：

**CSS**

```
.eventListItemBox {
    vertical-align:top;
} 
```

[您可以在本文](http://css-tricks.com/what-is-vertical-align/)中找到关于为什么会发生这种情况的更详细解释（带有示例）。

# javascript - 无法在 Express 中呈现 swig 模板

> ID：13907767
> 
> 赞同：5
> 
> 时间：2012-12-17T03:05:37.850
> 
> 标签：javascript, node.js, express, swig-template

因此，我尝试使用[consolidate.js](https://github.com/visionmedia/consolidate.js)来使用 express 呈现[swig 模板](https://github.com/paularmstrong/swig)，但是当我尝试从另一个模板“扩展”一个模板时出现以下错误：

```
Error: ENOENT, no such file or directory '//one.html 
```

在我的`app.js`文件中，我将 swig 设置为我的渲染引擎（仅包括相关代码）：

```
var consolidate = require('consolidate');

app.set('view engine', 'html');
app.set('views', __dirname + '/views');
app.engine('.html', consolidate.swig);

app.get('/test', function(req, res) {
    res.render('two');
}); 
```

我有一个基本模板`one.html`：

```
<h3>My Site</h3>
{% block content %}
    Welcome
{% endblock %} 
```

然后是一个继承模板，`two.html`：

```
{% extends 'one.html' %}

{% block content %}
    This is an inner page.
{% endblock %} 
```

那么为什么 swig 会寻找`one.html`路径`//one.html`（如上面的错误？）感谢您的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T03:29:52.600

[在查看 swig 文档（特别是关于使用 Express](http://paularmstrong.github.com/swig/docs/#api-express)的部分）后想通了。我所要做的就是初始化 swig，并告诉它在哪里寻找“扩展”模板：

```
var consolidate = require('consolidate'),
    swig = require('swig');

app.set('view engine', 'html');
app.set('views', __dirname + '/views');
app.engine('.html', consolidate.swig);

app.get('/test', function(req, res) {
    res.render('two');
});

/* Tell swig where to look for templates when one extends another. */
swig.init({ root: __dirname + '/views' }); 
```

# javascript - Javascript：是否有这样的语法

> ID：13907770
> 
> 赞同：0
> 
> 时间：2012-12-17T03:06:17.803
> 
> 标签：javascript

> **可能重复：**
> [javascript字符串连接](https://stackoverflow.com/questions/5656484/javascript-string-concatenation)

在 php 中，我们可以使用这种语法在字符串变量中添加字符串

```
$string += 'foo'; 
```

在 javascript 中，是否接受上述语法。

```
var strFoo;
strFoo += ' another Foo.'; 
```

请帮我解决这个简单的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:08:21.590

是的，JavaScript 支持[增强赋值](https://en.wikipedia.org/wiki/Augmented_assignment)，包括`+=`运算符。

# objective-c - 如何获得周末的日期？

> ID：13907776
> 
> 赞同：0
> 
> 时间：2012-12-17T03:07:46.623
> 
> 标签：objective-c, ios, nsdate

我想使用周末的日期在 NSLocalNotification 中使用它，但我不知道如何得到它，我试图用数学方法来做，但有时我得到的数字大于一个月中的天数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:02:37.357

请注意，iOS 支持多个日历，我不确定是否所有使用这些日历的文化都有周末的概念，并且它们是否总是意味着有两天。

您还需要处理一些事情：即使在使用公历的国家，一周也可能从星期一或星期日开始。

但是，如果我们假设周末相当于周六和周日，这可能对您有所帮助：

```
NSDate *referenceDate = [NSDate date];
NSDate *startOfThisWeek;
NSDate *saturday;

NSUInteger backupStartWeekday = [[NSCalendar currentCalendar] firstWeekday];
[[NSCalendar currentCalendar] setFirstWeekday:1]; // ensure week begins at sunday

[[NSCalendar currentCalendar] rangeOfUnit:NSWeekCalendarUnit
                                startDate:&startOfThisWeek
                                 interval:NULL
                                  forDate:referenceDate];

NSDateComponents *components = [[NSDateComponents alloc] init];
components.day = [[NSCalendar currentCalendar] maximumRangeOfUnit:NSWeekdayCalendarUnit].length; //the start of the next week

components.day = components.day - 2;
saturday = [[NSCalendar currentCalendar] dateByAddingComponents:components
                                                         toDate:startOfThisWeek
                                                        options:0];

[[NSCalendar currentCalendar] setFirstWeekday:backupStartWeekday]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:35:33.290

关于获取日期的第一个问题可以解决为：

```
NSCalendar *calender=[NSCalendar currentCalendar];
NSRange daysRange=[calender rangeOfUnit:NSDayCalendarUnit inUnit:NSMonthCalendarUnit forDate:[NSDate date]];
NSUInteger numberOfDaysInMonth=daysRange.length;
//NSLog(@"num of days in current month : %ld",numberOfDaysInMonth);

NSDateComponents *dateComponents = [calender components:NSWeekdayCalendarUnit fromDate:[NSDate date]];
NSInteger dayCount=[dateComponents weekday];
//if today itself is saturday what you want to display? today or upcoming one... then do small changes here, for sat & sun.

NSInteger daysForSaturday=7-dayCount;

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd"];
NSUInteger todaysDate = [[formatter stringFromDate:[NSDate date]]integerValue];

// NSLog(@"Today is : %@",todaysDate);

NSUInteger comingSaturday=todaysDate+daysForSaturday;    
if (comingSaturday>numberOfDaysInMonth) {
    comingSaturday-=numberOfDaysInMonth;
}
NSUInteger comingSunday=comingSaturday+1;

NSLog(@"Coming.. Sat is : %ld, Sun in : %ld",comingSaturday, comingSunday); 
```

# php - PHP 看不到远程套接字断开连接

> ID：13907777
> 
> 赞同：0
> 
> 时间：2012-12-17T03:07:54.613
> 
> 标签：php, sockets, network-programming, disconnect

我有一个监听多个套接字的 PHP 套接字服务器。
在我的客户端上，如果我暂停机器，则不会向 PHP 服务器发送断开连接消息。如何确定哪个客户端仍然连接或未连接，或获取这些断开连接事件？
在 PHP 中，我使用 socket_select 来监听我所有的套接字。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:30:46.243

如果远程套接字正确关闭，那么您的套接字将变得可读，但接收调用将不返回任何数据。如果通信出现错误，下一次接收或发送操作将返回错误。

但是，如果连接只是空闲，那么您将不知道另一端是否还活着。您可以设置一个套接字选项 ( `SO_KEEPALIVE`) 来自动让系统发送“keep-alive”消息并发现是否有任何问题。问题`SO_KEEPALIVE`在于默认时间是两个小时。如果您需要更短的时间（您很可能会这样做），那么您最好的选择是将您自己的保持活动消息作为协议的一部分实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:15:08.353

如果有错误，socket_read 将返回 false，如果没有数据，则返回空字符串。这些东西不会触发事件，你必须测试连接是否仍然存在。

# jsf - 未找到 jsf 2.0 托管 bean 的属性

> ID：13907783
> 
> 赞同：5
> 
> 时间：2012-12-17T03:08:36.500
> 
> 标签：jsf, jsf-2

JSF 错误：`/fstation/search.jspx(24,62) '#{vManager.fStations}' Property 'fStations' not found on type vm.beans.VisitorManagertype`

vManager 是我管理的：

* * *

搜索.jspx

```
<h:form>
     <h:dataTable value="#{vManager.fStations}" var="row">
          <h:column>
              <f:facet name="header"><h:outputText value="ID"/></f:facet>
              <h:outputText value="#{row.id}"/>
          </h:column>
          <h:column>
               <f:facet name="header"><h:outputText value="NAME"/></f:facet>
              <h:outputText value="#{row.name}"/>
          </h:column>
     </h:dataTable>
</h:form> 
```

* * *

管理代码如下：

```
package vm.beans;
import vm.model.DataManager;
import java.util.ArrayList;
import java.util.List;

public class VisitorManager {

    private List<FireStation> fStations;
    private DataManager dataManager = new DataManager();
    private String fireStationName;

    public String searchFireStation(){
        //String fName =fStation.getName();
        System.out.println("this is "+fireStationName);
        return null;
    }

    public void deleteStation(){    
    }

    /*
    * getter and setter
    */

    public String getFireStationName(){
        return fireStationName;
    }

    public void setFireStationName(String name1){
        this.fireStationName=name1;
    }

    public List<FireStation> getFStations(){
        //return dataManager.getFireStations();
        fStations = new ArrayList<FireStation>();
        fStations.add(new FireStation("001", "a1"));
        fStations.add(new FireStation("002", "a2"));
        fStations.add(new FireStation("003", "a3"));
        return fStations;
    }

    public void setFStations(List<FireStation> fs){
        this.fStations = fs;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T11:11:34.870

如果一个属性名称以两个或多个大写字符开头，那么它将被假定为正是这种情况。getter`getFStations()`指示属性名称`FStations`，因此您应该这样访问它：

```
<h:dataTable value="#{vManager.FStations}" var="row"> 
```

这在[JavaBeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)的第 8.8 章中有规定：

> ## 8.8 推断名称的大写。
> 
> ...
> 
> 因此，当我们从现有 Java 名称的中间提取属性或事件名称时，我们通常将第一个字符转换为小写。然而，为了支持偶尔使用所有大写名称，**我们检查名称的前两个字符是否都是大写的，如果是，则不管它**。例如，
> 
> *   “FooBah”变成“fooBah”</li>
> *   “Z”变成“z”</li>
> *   “网址”变成了“网址”</li>
> 
> 我们提供了一种[`Introspector.decapitalize`](http://docs.oracle.com/javase/6/docs/api/java/beans/Introspector.html#decapitalize%28java.lang.String%29)实现此转换规则的方法。

请注意，属性名称是根据 getter 方法名称而不是私有字段名称定义/解析的。

* * *

**与具体问题无关**，但我强烈建议不要像这样缩写属性名称。您的代码是这种方式不是自我记录的。不要偷懒，把单词写完整：

```
<h:dataTable value="#{visitorManager.fireStations}" var="fireStation"> 
```

或许：

```
<h:dataTable value="#{visitor.fireStations}" var="fireStation"> 
```

# scala - Scala：如何指定集合包含有序元素？

> ID：13907786
> 
> 赞同：0
> 
> 时间：2012-12-17T03:08:59.527
> 
> 标签：scala, types, red-black-tree

我想定义一个包含可以比较的元素的红黑树，但我似乎无法获得正确的类型。此代码的最后一行“x < data”无法编译：“value < is not a member of type parameter T”。有没有规范的方法来做到这一点？我还看到了一些示例，其中传递了一个隐式参数以进行从 T 到 Ordered[T] 的转换，但我也无法在这段代码中编译它。

```
object Color extends Enumeration {
  val Red, Black = Value
}

abstract class RedblackTree[+T <: Ordered[T]] {
  def isEmpty: Boolean
  def member[T](x: T): Boolean
}

case object Empty extends RedblackTree[Nothing] {
  override def isEmpty = true
  override def member[T](x: T) = false
}

final case class Tree[T <: Ordered[T]](
    color: Color.Value,
    leftSubTree: RedblackTree[T],
    data: T,
    rightSubTree: RedblackTree[T]
    ) extends RedblackTree[T] {
  override def isEmpty = false
  override def member[T](x: T) = x < data 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T03:49:06.267

当你定义时`member`，你包含了一个类型参数`T`，隐藏了`T`in `Tree`。由于原始`T`版本不一定与新版本兼容，因此返回了错误。要解决该错误，只需删除成员上的类型参数，如下所示：

```
... def member(x: T) ... 
```

# javascript - 将 innerHTML 更改为附近的文档

> ID：13907787
> 
> 赞同：1
> 
> 时间：2012-12-17T03:09:02.397
> 
> 标签：javascript, include, innerhtml

我希望通过单击按钮来更改网页内容的一部分。但是，我希望更改的内容包括格式本身，并且我希望将内容放在单独的文档中。

我希望它看起来像这样，但我可以接受任何解决方案：

```
<html>
<head>
<script type="text/javascript">
function swap() {
  document.getElementById('toChange').innerHTML = '<!--#include virtual="../newContent.htm"-->';
}
</script>
</head>
<body>
<span id="toChange">Temp Text</span>
<input type="button" onclick="swap()" value="Change" />
</body>
</html> 
```

问题显然出在 swap() 中的 include 语句上，但我不知道如何适当地更改它。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:16:29.597

基本上服务器端包含在这种情况下不起作用；您将不得不求助于 AJAX 请求。

您没有用[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")标记您的问题，但您可以阅读它在幕后的作用：

```
function swap() {
    $('#toChange').load('../newContent.htm');
} 
```

[`jQuery.load()`](http://api.jquery.com/load/)使用 AJAX 调用读取内容`../newContent.htm`，然后将该 HTML 存储在`toChange`span 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:12:49.270

据我所知，您的请求可能需要 JSON 和 AJAX。我知道在不发出新请求的情况下更改数据内容是 JSON 和 AJAX 的主要用途。它将动态更新页面而无需重新加载。JSON 是 Javascript 内置的，因此您实际上是在正确的道路上。希望它有所帮助。

# java - 使用apache-poi在excel中画一条线

> ID：13907788
> 
> 赞同：1
> 
> 时间：2012-12-17T03:09:02.570
> 
> 标签：java, android, excel, line, apache-poi

谁能给我写几行代码，展示如何使用 apache poi 在 excel 的单元格中写一行？！在普通的 Excel 中，我会去插入 - 形状 - 线条。基本上，制作这样的代码：

```
Workbook wb = new HSSFWorkbook();
Sheet sheet = wb.createSheet();
Row row=sheet.createRow(0);
Cell cell = row.createCell(0); 
```

现在，缺少的代码会在这里。当我在网上搜索时，我应该使用 HSSFSimpleShape 类和 OBJECT_TYPE_LINE。但我不知道如何在我的代码中实现它:(

我想我应该有我想在其中画线的单元格或一些像素作为坐标或其他东西。

帮助 ！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T16:36:10.243

看看这个例子：

```
Workbook wb = new HSSFWorkbook();
Sheet sheet = wb.createSheet();
HSSFPatriarch patriarch = (HSSFPatriarch) sheet.createDrawingPatriarch();

/* Here is the thing: the line will go from top left in cell (0,0) to down left 
of cell (0,1) */
HSSFClientAnchor anchor = new HSSFClientAnchor(
  0, 0, 0, 255, (short) 0, 0,(short) 1, 0);

HSSFSimpleShape shape = patriarch.createSimpleShape(anchor);
shape.setShapeType(HSSFSimpleShape.OBJECT_TYPE_LINE);
shape.setLineStyleColor(10, 10, 10);
shape.setFillColor(90, 10, 200);
shape.setLineWidth(HSSFShape.LINEWIDTH_ONE_PT);
shape.setLineStyle(HSSFShape.LINESTYLE_SOLID);

// you don't even need the cell, but if you also want to write anything...
Row row = sheet.createRow(0);
Cell cell = row.createCell(0);
cell.setCellValue("Test"); 
```

我还建议看看[HSSFClientAnchor Javadoc](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFClientAnchor.html)

# java - 用于验证的正则表达式

> ID：13907789
> 
> 赞同：1
> 
> 时间：2012-12-17T03:09:06.940
> 
> 标签：java, regex

我需要使用 Java 验证密码字符串。这是验证的要求：

*   至少 1 个号码
*   至少 1 个字母字符
*   集合中至少 1 个字符 !@#$%^&*()_+=-~`][{};':"/.>?,<
*   8 到 20 个字符

在扭来扭去把我的头撞到墙上几次之后，我想出了这个正则表达式

```
if (!password.matches("^(?=.+[0-9])(?=.+[a-zA-Z])(?=.+[\\x21-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\x7E])[0-9a-zA-Z\\x21-\\x2F\\x3A-\\x40\\x5B-\\x60\\x7B-\\x7E]{8,20}$")) {

} 
```

这看起来太可怕和疯狂了。有没有更好的方法来完成这个使命？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:28:28.800

我建议将正则表达式用于他们最擅长的事情，但将代码用于正则表达式做得不好的事情。像这样的东西。（对不起，我没有测试过这段代码，但即使我犯了错误，它也应该给出这个想法并且它不会运行。）

```
Pattern special_chars = Pattern.compile("[!@#$%^&*()_+=-~`\][{};':\"/.>?,<]");
Pattern number_chars = Pattern.compile("[0-9]");
Pattern letter_chars = Pattern.compile("[a-zA-Z]");

boolean valid;

valid = (special_chars.matcher(password).find() &&
        number_chars.matcher(password).find() &&
        letter_chars.matcher(password).find() &&
        8 <= password.length() && password.length() <= 20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T03:38:50.443

用番石榴[`CharMatcher`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/base/CharMatcher.html#method_summary)。

```
// at least 1 number
CharMatcher.inRange('0', '9').countIn(password) >= 1 && 
// at least 1 alphabet character
CharMatcher.inRange('a', 'z').or(inRange('A', 'Z')).countIn(password) >= 1 && 
// at least 1 character from set !@#$%^&*()_+=-~`][{};':"/.>?,<
CharMatcher.anyOf("!@#$%^&*()_+=-~`][{};':\"/.>?,<").countIn(password) >= 1 && 
// 8 to 20 characters
password.length() >= 8 && password.length() <= 20 
```

这假设你想要拉丁字母

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:28:05.397

我相信这已经得到了回答。

[密码验证的正则表达式](https://stackoverflow.com/questions/2370015/regular-expression-for-password-validation)

但我可以建议您将验证分为各个类别吗？这样可能会更容易，您将能够准确地告诉用户他们缺少什么。

# ruby-on-rails - 从资产管道中排除文件类型

> ID：13907791
> 
> 赞同：0
> 
> 时间：2012-12-17T03:09:32.587
> 
> 标签：ruby-on-rails, asset-pipeline

我的图像文件夹中存储了几个 PSD 文件。将这些文件保留在那里以供开发很好，但我不希望它们被提供。是否有某个配置可以让我防止文件类型被预编译？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:20:04.960

您最好的选择可能是在部署期间排除这些文件。例如，使用 Heroku，如果您将`.slugignore`文件添加到项目的根目录，您可以排除某些文件。这还有一个额外的好处，那就是减少 Heroku 的启动时间。一个示例配置是：

```
*.psd
*.pdf
doc 
```

你应该可以用 Capistrano 做类似的事情。

**编辑：**

这篇文章展示了如何为 Capistrano 部署做类似的事情：

[使用 Capistrano 排除文件部署，同时仍使用 Git 进行版本控制](https://stackoverflow.com/questions/2558249/excluding-files-from-being-deployed-with-capistrano-while-still-under-version-co)

# php - preg_match - 需要从 url 中获取字符串

> ID：13907793
> 
> 赞同：2
> 
> 时间：2012-12-17T03:09:41.170
> 
> 标签：php, regex, preg-match

我需要从一些看起来像这样的 youtube url 中获取一个字符串：

```
http://www.youtube.com/embed/WJlfVjGt6Hg?list=EC1512BD72E7C9FFCA&amp;hl=en_US 
```

我需要获取“../embed/”和“?list=..”（-> **WJlfVjGt6Hg**）之间的变量。

其他 youtube 网址的代码如下所示：

```
// Checks for YouTube iframe, the new standard since at least 2011
if ( !isset( $matches[1] ) ) {
    preg_match( '#https?://www\.youtube(?:\-nocookie)?\.com/embed/([A-Za-z0-9\-_]+)#', $markup, $matches );} 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:14:16.077

它是来自您的 url 的路径的基本名称：

```
$url = 'http://www.youtube.com/embed/WJlfVjGt6Hg?list=EC1512BD72E7C9FFCA&amp;hl=en_US';
echo basename(parse_url($url, PHP_URL_PATH));
// WJlfVjGt6Hg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T04:04:12.663

不要使用正则表达式。并非所有涉及字符串的问题都最好用正则表达式解决。

使用`parse_url()`PHP 内置的函数为您分解各个部分。

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)是它的手册页。以下是你如何使用它：

```
$url = 'http://www.youtube.com/embed/WJlfVjGt6Hg?list=EC1512BD72E7C9FFCA&amp;hl=en_US';

$parts = parse_url( $url );
print_r( $parts );

$path_parts = explode( '/', $parts['path'] );
print_r( $path_parts );

$last_part = $path_parts[count($path_parts)-1];

print "Youtube video ID = $last_part\n"; 
```

当你运行它时，你会得到这个：

```
Array
(
    [scheme] => http
    [host] => www.youtube.com
    [path] => /embed/WJlfVjGt6Hg
    [query] => list=EC1512BD72E7C9FFCA&amp;hl=en_US
)
Array
(
    [0] => 
    [1] => embed
    [2] => WJlfVjGt6Hg
)
Youtube video ID = WJlfVjGt6Hg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:22:53.250

您好，您可以使用以下正则表达式：

```
/embed\/([^\?]+)/ 
```

一个简短的解释 - 这匹配 'embed/' 之后不是问号的所有字符，直到它找到一个问号。

这是一个示例脚本，它向您显示您正在寻找的输出：

```
<?php

$test="http://www.youtube.com/embed/WJlfVjGt6Hg?list=EC1512BD72E7C9FFCA&amp;hl=en_US";

$matches = array();
preg_match('/embed\/([^\?]+)/', $test, $matches);
print_r($matches);
// The value we're looking for is in index 1 of the array
echo $matches[1]; 
```

输出是：

```
Array
(
[0] => embed/WJlfVjGt6Hg
[1] => WJlfVjGt6Hg
)
WJlfVjGt6Hg 
```

# windows - 保护局域网中的访问电脑

> ID：13907794
> 
> 赞同：-1
> 
> 时间：2012-12-17T03:09:49.277
> 
> 标签：windows, networking

我使用的是 Windows 7 操作系统。我的 PC 与带有域的本地网络连接。现在任何人都可以访问我的电脑驱动器，例如`\\192.168.20.19\e$`. 我怎样才能保护这样访问我的电脑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T06:37:50.993

首先右键单击**我的电脑**。转到**管理**查看电梯侧面板并单击**共享文件夹**并选择**共享**并右键单击 e$ 并**停止共享**

# opencart - OpenCart - 删除选项值

> ID：13907796
> 
> 赞同：-3
> 
> 时间：2012-12-17T03:09:55.150
> 
> 标签：opencart

我希望我知道在哪里可以找到使后端 OpenCart 删除选项值的位置 - 产品/选项 - 表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:06:51.787

如果您的意思是当您编辑产品时哪些文件选项会被删除并重新生成，那么文件就是`admin/model/catalog/product.php`方法，方法就是`editProduct()`方法。你会注意到那里有这两行

```
$this->db->query("DELETE FROM " . DB_PREFIX . "product_option WHERE product_id = '" . (int)$product_id . "'");
$this->db->query("DELETE FROM " . DB_PREFIX . "product_option_value WHERE product_id = '" . (int)$product_id . "'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T09:52:42.863

您可以尝试将 php.ini 中的 max_input_vars 值设置为 2000 并重新启动 apache。这似乎解决了我的问题，即即使仅从产品更新页面更新了产品名称，也删除了选项值。

# r - 'R谷歌趋势'

> ID：13907797
> 
> 赞同：0
> 
> 时间：2012-12-17T03:10:24.070
> 
> 标签：r

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T03:20:45.087

Whilst it may not be available via `install.package('RGoogleTrends', repos = "http://www.omegahat.org/R", type = "source")`, you can download the package tar file [http://www.omegahat.org/RGoogleTrends/RGoogleTrends_0.2-1.tar.gz](http://www.omegahat.org/RGoogleTrends/RGoogleTrends_0.2-1.tar.gz) and install from the downloaded file, something like

`install.packages("~/Downloads/RGoogleTrends_0.2-1.tar.gz", repos = NULL, type = "source")`

replacing the path with the path on your system.

Note that RGoogleTrends imports the packages

RCurl, RSQLite, DBI

You may need to separately install these packages (with repos set to an appropriate non NULL value)

# c# - 如何对大量 Linq to Sql 对象执行状态验证

> ID：13907800
> 
> 赞同：1
> 
> 时间：2012-12-17T03:11:01.803
> 
> 标签：c#, linq, linq-to-sql

我想为数百或数千个 linq to sql 对象执行状态验证。例如，只有`Status A`&`B`可以更改为`Status C`，然后`C`可以更改为`D`, ...

考虑到性能和可扩展性，最好的解决方案是什么？
“DetectChanges”是否适合我的场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:18:56.190

您需要的是在代码中简单实现**状态机概念**。

由于它是软件工程中众所周知的概念，我将提供有用的资源和示例来遵循和实现这个概念。

这里有资源：

*   [使用无状态的基本状态机设置](https://stackoverflow.com/q/9117487/1437962)
*   [使用 C# 中的静态类通过事件通知其他订阅者的简单状态机](https://stackoverflow.com/q/2411803/1437962)

# flexigrid - jquery flexigrid编辑数组而不读取数据库表

> ID：13907802
> 
> 赞同：0
> 
> 时间：2012-12-17T03:11:06.303
> 
> 标签：flexigrid

我直接在 flexigrid 中添加内容（请参阅[Flexigrid 从本地 json 对象加载数据](https://stackoverflow.com/questions/10664406/flexigrid-loading-data-from-local-json-object)或[使用数组填充 Flexigrid 或通过代码填充它](https://stackoverflow.com/questions/9209926/populate-flexigrid-with-an-array-or-populate-it-by-code)）

以及如何在不通过 << $("#flex1").flexigrid({ url: >> function 的情况下编辑我被推入的数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:44:58.930

通过 DOM 找到了解决方案

[https://groups.google.com/forum/?fromgroups=#!topic/flexigrid/0oRmeJRAnpc](https://groups.google.com/forum/?fromgroups=#!topic/flexigrid/0oRmeJRAnpc)

```
function getSelectedRow() {
    var arrReturn        = [];
    $('.trSelected').each(function() {
            var arrRow                = [];
            $(this).find('div').each(function() {
                    arrRow.push( $(this).html() );
            });
            arrReturn.push(arrRow);
    });
    return arrReturn; 
```

读为数组

# hyphen - 处理用户生成的 URL 中的连字符

> ID：13907807
> 
> 赞同：2
> 
> 时间：2012-12-17T03:11:55.753
> 
> 标签：hyphen, hyphenation

我有一个应用程序，我需要通过他们的名字链接到用户。他们可能有空格，所以我只是用连字符替换空格。我现在面临的困境是，如果这个人的名字中有连字符会发生什么。我该如何处理。数据库中有两列，一列用于剥离，一列用于显示？有任何想法吗？

# jquery - 如何修改以下 jQuery 代码使其适用于每个 li 元素？

> ID：13907808
> 
> 赞同：1
> 
> 时间：2012-12-17T03:12:06.610
> 
> 标签：jquery

我有以下内容：

```
$ul = $('#wpbdp-categories > .wpbdp-categories > li.cat-item > ul');
$('#wpbdp-categories > .wpbdp-categories > li.cat-item > ul').remove();
$('#wpbdp-categories > .wpbdp-categories > li.cat-item').wrapInner('<span>');
$('#wpbdp-categories > .wpbdp-categories > li.cat-item').append($ul); 
```

基本上有时会变成这样：

```
<li>
  <a></a>
  (10)
  <ul></ul>
</li> 
```

进入这个：

```
<li>
  <span>
    <a></a>
    (10)
  </span>
  <ul></ul>
</li> 
```

问题是页面有很多`<li></li>`.

如何做到这一点，以便代码仅应用于每个`li`而不干扰其余部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:17:42.057

迭代`li`元素并执行相对于当前元素的单独更改：

```
$("li").each(function() {
    var content = $(this).clone(true),
    ul = content.children('ul').remove();

    $(this).html($('<span />').append(content.contents()).append(ul));        
}); 
```

**更新：**使我的答案适应编辑后的代码：

```
$('#wpbdp-categories > .wpbdp-categories > li.cat-item').each(function() {
    var $this = $(this);
    var $ul = $this.children("ul");
    $this.children("ul").remove()
    $this.wrapInner('<span>')
    $this.append(#ul);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T03:21:58.753

[`.each`](http://api.jquery.com/each/)允许您迭代每个选定的元素，然后您可以将操作应用于每个元素：

```
$('#wpbdp-categories > .wpbdp-categories > li.cat-item').each(function() {
    $(this).contents().filter(function() {
        return this.nodeName !== 'UL';
    }).wrapAll('<span />');
}); 
```

通过正确使用 jQuery 方法，您还可以保存一些显式的 DOM 操作。

# image - 让 RMagick 以正确的格式将图像转换为 PDF

> ID：13907815
> 
> 赞同：2
> 
> 时间：2012-12-17T03:12:36.677
> 
> 标签：image, imagemagick, pdf-generation, rmagick

我正在将一些 PNG 图像转换为多页 PDF 格式，并且无法在 PDF 输出中获得正确的大小。

我的输入是 825 x 1125 像素的 PNG，当正确打印为 2.75" x 3.75" 时，它应该是 300 dpi。PDF 每页一张图片，PDF 中每张图片的大小应为 2.75" x 3.75"。尺寸是我无法工作的部分。这是代码：

```
#!/usr/bin/ruby
require "RMagick"
include Magick

images = Dir["input_dir/*.png"]
pdf_image_list = ::Magick::ImageList.new
pdf_image_list.read(*images) 

pdf_image_list.write("output_dir/output.pdf") 
```

输出 PDF 的每页大小约为。11 1/2" x 15 1/2"，太大了。我尝试在 PDF 上设置页面大小选项（http://www.imagemagick.org/RMagick/doc/info.html#page），如下所示：

```
pdf_image_list.write("output_dir/output.pdf") {
  self.page = "825x1125"
} 
```

但它们似乎没有效果。我也没有设置任何其他尺寸选项。

# drupal-7 - 选择按城市排序的列表

> ID：13907817
> 
> 赞同：1
> 
> 时间：2012-12-17T03:12:45.807
> 
> 标签：drupal-7, geolocation, drupal-views

希望按照 kijiji.ca 和 redflagdeals.com 如何根据所选位置管理其内容的方式做一些事情。我正在尝试使用 getlocation 模块，但我无法确定这是否是正确的尝试。我希望通过 ip 地址自动检索默认位置，然后为用户提供更改城市的选项，这将与内容的更改相对应。

只是想找人引导我朝着正确的方向前进，因为我似乎无法弄清楚这一点……谢谢！

# php - Javascript 中的角色创建者

> ID：13907820
> 
> 赞同：-3
> 
> 时间：2012-12-17T03:13:34.997
> 
> 标签：php, javascript, jquery

我有一个网站的想法，并且想要一个角色创建者。

一种可以选择不同的眼睛、嘴巴、头发等。

然后将该人选择的选项提交到他们的 wordpress 帐户照片。

实现这一目标的最佳方法是什么？

任何帮助是极大的赞赏！:)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:19:05.007

假设您需要做的只是覆盖这些部分，您可以简单地将一堆`img`元素绝对定位在一个容器中，并且当用户为特定部分选择不同的东西时，您可以更改适当`img`的`src`. 当他们想要应用它时，您可以发送他们为每个事物选择的内容，PHP 可以使用[GD 图像函数](http://us2.php.net/manual/en/ref.image.php)在服务器端合成这些片段并将其用作帐户图像。

# flash - 在 Flash CS6 中对多个图层进行操作

> ID：13907829
> 
> 赞同：1
> 
> 时间：2012-12-17T03:14:41.207
> 
> 标签：flash, animation, adobe, flash-cs5, flash-cs6

我是 Flash 新手，我在 Flash CS6 中制作了一些 Flash 动画，但是我经常使用的一些功能令人难以置信地重复，因为我根本无法找到一种方法来一次在多个图层上执行它们。

1.  有没有办法一次压缩/扩展多个补间动画？我可以一次增加某个图层上某个补间的长度，但是我希望能够简单地选择多个图层并拖动它们，这样我就可以同时压缩/展开所有图层。它们都排列在同一个框架上。

2.  有没有办法一次复制/粘贴多个属性？我经常右键单击一个框架-> 复制属性/粘贴属性，以帮助循环等。问题是这必须为单个图层单独完成，尽管我所有图层的所有关键帧都排列在同一帧上。

3.  如何一次调整多个图层的关键帧？当我在我的 Flash 动画中选择多个元件时，我经常希望将它们拖动到它们所在的位置，所有这些图层都会在时间轴上获得一个新的关键帧，从而将它们自己补间到那个位置。然而，一半时间它只是移动我的整个补间的基本位置，另一半它按预期工作，但是我不知道是什么属性控制它是否真的有效。我该如何控制？

4.  我可以一次反转多个图层的关键帧吗？

5.  是否有可能以更自然的方式制作我的动画循环？不是让所有图层在同一位置开始和结束（通常通过艰苦的复制属性/粘贴属性来实现），我是否可以告诉 flash 简单地将自身补间到 x 帧上的第 1 帧？

# shell - 在 shell 脚本中使用 curl 替换变量

> ID：13907832
> 
> 赞同：3
> 
> 时间：2012-12-17T03:15:22.160
> 
> 标签：shell, curl

嗨，我正在尝试在 shell 脚本中使用 curl ，如下所示，但我无法替换 CURL 中的变量 $line 。请建议

```
while read line
do
    echo "allowing mac $line"
    curl -X POST -d '{"src-mac": "$line"}' http://localhost:8080/wm/firewall/rules/json
    curl -X POST -d '{"dst-mac": "$line"}' http://localhost:8080/wm/firewall/rules/json
done < /home/floodlight/allowedmacs 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T03:17:26.687

单引号中没有变量替换。在扩展周围切换到双倍，如下所示：

```
curl -X POST -d '{"src-mac": "'"$line"'"}' http://localhost:8080/wm/firewall/rules/json
curl -X POST -d '{"dst-mac": "'"$line"'"}' http://localhost:8080/wm/firewall/rules/json 
```

或者你可以在整个事情周围使用双引号并转义内部的：

```
curl -X POST -d "{\"src-mac\": \"$line\"}" http://localhost:8080/wm/firewall/rules/json
curl -X POST -d "{\"dst-mac\": \"$line\"}" http://localhost:8080/wm/firewall/rules/json 
```

`$line`无论哪种方式，如果你想扩展它，当你到达时不能在单引号内。

# c++ - 如何在不强制转换的情况下从双端队列中提取？

> ID：13907834
> 
> 赞同：1
> 
> 时间：2012-12-17T03:15:36.140
> 
> 标签：c++, inheritance, data-structures, deque

我有 5 个称为操作符的类：

```
 * Enter(x)
 * Exit(x)
 * Push(b,x,y)
 * TurnOn(x)
 * TurnOff(x) 
```

还有 3 个称为 Predicates 的类：

```
 * At(x,y) - example : At(Robot,Room3) , At(Box1,Room1) , At(Box3,Corridor)
 * SwithOn(x) - SwitchOn(Room2)
 * SwitchOff(x) - SwitchOff(Room1) , SwitchOff(Room4) 
```

而且我希望有良好的数据结构来存储它们。

起初，我创建了两个基类并使用了继承：

*   为, 和`Predicate`_`At(x,y)``SwithOn(x)``SwitchOff(x)`

*   `Operator`, `Enter(x)`, `Exit(x)`, `Push(b,x,y)`,`TurnOn(x)`的类`TurnOff(x)`。

我添加了两个双端队列：

```
std::deque<Operator> operators;
std::deque<Predicate> predicates; 
```

然后，当我创建例如一个`Exit`运算符时：

```
Exit myExit ; 
```

并将其推入双端队列：

```
operators.push_back(myExit); // this works fine 
```

但是当我尝试从`operators`deuqe 中提取某种元素时，我必须使用某种 cast 。

1.  是否有可能拥有可以存储多个（**不同类型**）对象的数据结构？

2.  我还处于规划阶段，您能否建议一些其他类型的设计，这样我在提取元素时不会遇到问题？我能想到的最好的事情是多态性......

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:24:23.053

对于您的特定要求，我会考虑使 Operator 具有多态性并将数据存储在诸如 ptr_vector 之类的 boost 指针容器中。毕竟，各种具体的操作都有一个共同点，那就是它们都是操作符。

您当前使用基本 std::deque<> 的实现将导致对象切片，因为您只存储基类，所以这不起作用。在这种需要多态性的特殊情况下，您确实需要能够存储指向对象的指针。在您的情况下，您可能想要使用

```
boost::ptr_vector<Operator> something; 
```

如果您不能使用 boost，另一种选择是使用带有 std::shared_ptr 之类的标准容器，例如：

```
std::deque<std::shared_ptr<Operator> > something; 
```

您不想将原始指针存储在 std::vector 中，因为这会导致各种有趣的生命周期管理问题，这些问题很容易避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T03:25:17.547

> 是否有可能拥有可以存储多个对象的数据结构？

是的，它被称为*结构*。如果您一次只想存储一种类型，请使用`union`创建一个*Variant*。对于您所描述的内容，两者都不是一个好主意。

> 我还处于规划阶段，您能否建议一些其他类型的设计，这样我在提取元素时不会遇到问题？我能想到的最好的事情是多态性......

在我看来，您需要多态性。您不能只使用强制转换将一种类型从基本类型转换为另一种类型。好吧，你可以，但你会丢失数据。您现在拥有的是有效地将您的子类转换为它们的基类，然后按值复制到`deque`.

要利用多态性，只需将指针（`Opererator*`或`Predicate*`）存储在双端队列（或使用`std::auto_ptr`）中。

# c# - 写重应用的架构设计

> ID：13907836
> 
> 赞同：6
> 
> 时间：2012-12-17T03:15:58.777
> 
> 标签：c#, asp.net, sql-server, database-design, architecture

我正在处理实时跟踪系统，其中一台设备每年可以推送大约 200 万个 GPS 点（即每 5 秒 1 个点，在 365 天内运行 8 小时）。如果这在全球范围内使用数千台设备运行，则每年会产生数十亿条记录。

我知道 SQL Server 可以处理它。但我需要能够对数千台执行并发写入的设备进行实时跟踪。它适用于一些设备，但是当我打开许多跟踪站点时，我可以看到这是 CPU 密集型的。

我打算尝试：

*   蒙哥数据库
*   带有 kazzing 的套接字方法。

有什么替代建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:23:14.413

鉴于您发布的信息，您的架构没有任何问题。魔鬼在细节中。一方面，很大程度上取决于您的数据库设计得有多好。这取决于查询的编写程度、数据库索引、触发器等...

此外，如果这是任何类型的移动设备，则不应使用传统的基于套接字的连接器。您不能依赖与远程服务器的稳定 tcp 连接。您应该使用像 REST 这样的无状态架构来为您公开/写入数据。REST 在 .NET 中很容易实现 btw 这应该将规模难度从 db 转移到 Web 服务器。

最后，为了尽量减少在服务器上完成的工作，我将实施某种缓存或缓冲池系统来维护每个设备上的数据以供读取，并创建一个写入缓存以将数据发送到中央服务器。写缓存将至关重要，因为您不能依赖稳定的 tcp 连接和来自服务器的事务管理。您需要维护要写入的数据的缓存，即（队列）并在您从服务器确认它已收到您写入的数据时弹出队列。只要有数据和数据连接，就应该弹出队列。但是，在我可以肯定地说或提供更多详细信息之前，我需要更多地了解您的要求。

# ruby-on-rails - 如何将会话变量从一个 rails 3.2.8 引擎传递到另一个引擎？

> ID：13907840
> 
> 赞同：3
> 
> 时间：2012-12-17T03:17:12.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-engines

在我们的 rails 3.2.8 应用程序中，有一个可安装的引擎 authentify，它处理用户的身份验证并为整个应用程序生成会话变量。当我们将 authentify 与另一个 Rails 引擎 rfqx 集成时，引擎 rfqx 需要访问引擎 authentify 生成的会话变量。问题是会话变量在引擎 rfqx 中不可用并且为零。

在 rfqx 的 routes.rb 中，authentify 的挂载方式如下：

```
 mount Authentify::Engine => "/authentify" 
```

我们如何使会话变量在引擎 rfqx 中可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-22T09:56:19.690

来自[Rails Edge 指南](http://edgeguides.rubyonrails.org/engines.html)：

**4.3.2 使用应用程序提供的控制器**

因为 Rails 控制器通常共享用于身份验证和访问会话变量之类的代码，默认情况下它们继承自 ApplicationController。然而，Rails 引擎的作用域是独立于主应用程序运行，因此每个引擎都有一个作用域 ApplicationController。此命名空间可防止代码冲突，但引擎控制器通常应该访问主应用程序的 ApplicationController 中的方法。提供此访问权限的一种简单方法是将引擎的作用域 ApplicationController 更改为从主应用程序的 ApplicationController 继承。对于我们的 Blorgh 引擎，这将通过将 app/controllers/blorgh/application_controller.rb 更改为如下所示来完成：

```
class Blorgh::ApplicationController < ApplicationController
end 
```

默认情况下，引擎的控制器继承自 Blorgh::ApplicationController。因此，在进行此更改后，他们将可以访问主应用程序 ApplicationController，就好像它们是主应用程序的一部分一样。

此更改确实需要从具有 ApplicationController 的 Rails 应用程序运行引擎。

# python - 在 Python 中实现 OpenSSL AES 加密

> ID：13907841
> 
> 赞同：5
> 
> 时间：2012-12-17T03:17:16.127
> 
> 标签：python, openssl, aes, pycrypto, m2crypto

我正在尝试在 Python 中实现以下内容： openssl enc -e -aes-256-cbc -base64 -k "Secret Passphrase" -in plaintext.txt -out ciphertext.txt

openssl enc -d -aes-256-cbc -base64 -k "秘密密码" -in ciphertext.txt -out verification.txt

我尝试了几个不同的模块，PyCrypto、M2Crypto 等，但似乎无法获得将密码更改为正确大小的密钥和正确编码所有内容的正确组合。我找到了[https://github.com/nvie/SimpleAES](https://github.com/nvie/SimpleAES)但它基本上在命令行上运行 OpenSSL，我宁愿避免。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T22:12:51.793

Base 64 编码和解码可以通过标准`base64`模块轻松处理。

PyCrypto 和 M2Crypto 都支持 CBC 模式下的 AES-256 解密和加密。

唯一非标准（也是最困难的）部分是从密码中推导 IV 和密钥。OpenSSL 通过它自己的`EVP_BytesToKey`函数来完成它，这[在本手册页](http://www.openssl.org/docs/crypto/EVP_BytesToKey.html)中有描述。

Python 等价物是：

```
def EVP_BytesToKey(password, salt, key_len, iv_len):
    """
    Derive the key and the IV from the given password and salt.
    """
    from hashlib import md5
    dtot =  md5(password + salt).digest()
    d = [ dtot ]
    while len(dtot)<(iv_len+key_len):
        d.append( md5(d[-1] + password + salt).digest() )
        dtot += d[-1]
    return dtot[:key_len], dtot[key_len:key_len+iv_len] 
```

其中`key_len`是 32，`iv_len`对于 AES-256 是 16。该函数返回可用于解密有效负载的密钥和 IV。

OpenSSL 将盐放在加密负载的前 8 个字节中。

最后，CBC 模式下的 AES 只能处理与 16 字节边界对齐的数据。使用的默认填充是 PKCS#7。

因此，加密的步骤是：

1.  生成 8 字节的随机数据作为盐。
2.  使用步骤 1 中的盐从密码中派生 AES 密钥和 IV。
3.  使用 PKCS#7 填充输入数据。
4.  使用 CBC 模式下的 AES-256 加密填充，使用步骤 2 中的密钥和 IV。
5.  在 Base64 中编码并输出步骤 1 中的盐。
6.  在 Base64 中编码并输出步骤 4 中的加密数据。

解密的步骤是相反的：

1.  将 Base64 中的输入数据解码为二进制字符串。
2.  将解码数据的前 8 个字节视为盐。
3.  使用步骤 1 中的盐从密码中派生 AES 密钥和 IV。
4.  使用步骤 3 中的 AES 密钥和 IV 解密剩余的解码数据。
5.  验证并从结果中删除 PKCS#7 填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-02T08:06:06.363

因为现在 base64 标准已被弃用并且 pbkdf2-hashing 是最先进的，所以答案是正确的，但已经过时了。我正在使用这篇文章，因为它作为 DDG 上的第一个结果弹出。为了让你像我一样花几天时间来解决这个问题，这是我**加密**数据的工作代码，如 openssl。

以下代码类似于`echo <in> | openssl aes-256-cbc -pbkdf2 -k <key> -out <out>`：

```
def encrypt(self, password, input):
    bs = AES.block_size
    salt = urandom(bs - len(b'Salted__'))
    pbk = pbkdf2_hmac('sha256', password.encode('utf8'), salt, 10000, 48)
    key = pbk[:32]
    iv = pbk[32:48]
    cipher = AES.new(key, AES.MODE_CBC, iv)
    result = (b'Salted__' + salt)
    finished = False
    while not finished:
        chunk = input.read(1024 * bs).encode()
        if len(chunk) == 0 or len(chunk) % bs != 0:
            padding_length = (bs - len(chunk) % bs) or bs
            chunk += (padding_length * chr(padding_length)).encode()
            finished = True
        result += cipher.encrypt(chunk)
    return result 
```

提及/澄清一些事情：

*   您需要在哈希的开头添加字节“Salted__”（因此盐只有 8 个字节而不是 16 个字节）
*   iv 派生自 pbkdf2 哈希（您经常会发现人们将 iv 添加到结果中。这会导致在解密结果的开头出现随机的、神秘的字符 - 加密的 iv。它是人类可读的，但请记住它们是随机字节和可以破坏一切！通过密码哈希的推导，一切正常。）
*   openssl 目前的标准值为：md=sha256, iter=10000
*   您需要填充所有内容，以便加密有效（while 循环）
*   如果您愿意，您也可以在 base64 中加密所有内容。为此，不要*返回 result*，*返回 base64.b64enode(result)*。它等于上面添加了*-base64*标志的 openssl 命令。

要使用 openssl 解密所有内容，请使用以下命令：`openssl aes-256-cbc -pbkdf2 -d -k <key> -in <in> -out <out>`

# android - 是否可以将 ViewPager 添加到 DialogFragment 中？

> ID：13907843
> 
> 赞同：2
> 
> 时间：2012-12-17T03:17:19.933
> 
> 标签：android, android-viewpager

我的代码：

```
 public class CustomDialogFragment extends SherlockDialogFragment {
            /** The system calls this to get the DialogFragment's layout, regardless
                of whether it's being displayed as a dialog or an embedded fragment. */
            @Override
            public View onCreateView(LayoutInflater inflater, ViewGroup container,
                    Bundle savedInstanceState) {
                View v = inflater.inflate(R.layout.p_product_gallery, container, false);
                ImageView tttiv=(ImageView)v.findViewById(R.id.test_image);
                tttiv.setImageResource(R.drawable.baozi);
                return v;
            }

            /** The system calls this only when creating the layout in a dialog. */
            @Override
            public Dialog onCreateDialog(Bundle savedInstanceState) {
                // The only reason you might override this method when using onCreateView() is
                // to modify any dialog characteristics. For example, the dialog includes a
                // title by default, but your custom layout might not need it. So here you can
                // remove the dialog title, but you must call the superclass to get the Dialog.
                mDialog = super.onCreateDialog(savedInstanceState);
                mDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
                mDialog.getWindow().setBackgroundDrawable((new ColorDrawable(0x0f000000)));
                mPager = (ViewPager) mDialog.findViewById(R.id.aa_pager);
                mPager.setAdapter(mAdapter);            

                mAdapter = new ProductGalleryAdapter(getSupportFragmentManager());

                return mDialog;
            }
        } 
```

“mPager”始终为空。任何人都可以提供一个例子吗？tkx！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:40:29.837

除非您使用的是 Android 4.2（和 Android 支持库 rev 11），否则片段中不支持片段...

[片段中的片段](https://stackoverflow.com/questions/6847460/fragments-within-fragments)

# wpf - 模板绑定到本身绑定到 XPath 的父内容 - 内容不显示

> ID：13907849
> 
> 赞同：0
> 
> 时间：2012-12-17T03:18:37.920
> 
> 标签：wpf, xaml, data-binding, styles

我有一个 ItemsControl，它的 ItemsSource 绑定到一个 XML 数据提供程序。代码看起来像这样。

```
<ItemsControl Grid.Row="1" Margin="30"
              ItemsSource="{Binding Source={StaticResource VideosXML}, 
              XPath=TutorialVideo}" >
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <WrapPanel/>
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <Button Style="{StaticResource StyleMetroVideoButton}" 
              Content="{Binding XPath=@Name}"
              ToolTip="{Binding XPath=Description}"/>
    </DataTemplate>
  </ItemsControl.ItemTemplate>                        
</ItemsControl> 
```

VideosXML 是一个引用外部 XML 文件的 XML 数据提供程序。如您所见，Name 属性适用于按钮的内容，而 xml 文件中的 Description 元素适用于按钮的工具提示。下面是按钮样式的代码。它基本上是一个文本块，顶部有一个褪色的“播放”按钮。

```
<Style TargetType="{x:Type Button}" x:Key="StyleMetroVideoButton">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid Name="PlayGrid" Background="#FF323236">
                        <TextBlock TextWrapping="Wrap" Text="{TemplateBinding Content}" VerticalAlignment="Top" HorizontalAlignment="Center"/>
                        <Image Name="Play" Source="{StaticResource BtnVideoPlayHoverPNG}"  Opacity="0.0" Stretch="None"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Opacity" Value="0.6" TargetName="Play"/>
                            <Setter Property="Background" Value="#8D8D94" TargetName="PlayGrid"/>
                        </Trigger>
                        <Trigger Property="IsPressed" Value="True">
                            <Setter Property="Source" Value="{StaticResource BtnVideoPlayClickPNG}" TargetName="Play"/>
                            <Setter Property="Opacity" Value="0.6" TargetName="Play"/>
                            <Setter Property="Background" Value="#8D8D94" TargetName="PlayGrid"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="False">
                            <Setter Property="Opacity" Value="0.0" TargetName="Play"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Setter Property="Width" Value="90" />
        <Setter Property="Height" Value="80" />
        <Setter Property="Margin" Value="5,5,5,5"/>
    </Style> 
```

从样式可以看出TextBlock中的“Text”是绑定到按钮本身的内容的：Text="{TemplateBinding Content}"，从第一段代码中可以看出按钮的Content绑定到了一个XML通过 XPath 的元素。但是，根本没有显示任何文本。如果我在按钮中硬编码一些内容，比如 Content="A Button" ，它就会显示出来。工具提示也工作正常，所以我知道它从 XML 文件中读取数据。那么是什么让绑定到 XPath 与硬编码一个值不同呢？

提前感谢您查看我的问题！

**编辑**：示例 XML

```
<?xml version="1.0" encoding="utf-8" ?>
<Videos xmlns="">
  <TutorialVideo Name="Video 1">
    <Description>A video to watch</Description>
    <Filepath>video1.wmv</Filepath>
  </TutorialVideo>
</Videos> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:47:54.707

好的，我发现了问题，由于某种原因，该`Content`属性正在传递整个 xml 元素，将内容绑定设置为`Content="{Binding XPath=@Name, Path=Value}"`应该可以解决问题

这可能有一个合乎逻辑的解释，谷歌会知道

```
<ItemsControl Grid.Row="1" Margin="30"
              ItemsSource="{Binding Source={StaticResource VideosXML}, 
              XPath=TutorialVideo}" >
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapPanel/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Button Style="{StaticResource StyleMetroVideoButton}"  
                            Content="{Binding XPath=@Name, Path=Value}"  
                            ToolTip="{Binding XPath=Description}"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

# facebook - 有没有办法导出代码生成器 TOTP 密钥以与 Google Authenticator 应用程序一起使用？

> ID：13907852
> 
> 赞同：2
> 
> 时间：2012-12-17T03:18:55.877
> 
> 标签：facebook, security

我已启用 FB 代码生成器（用于在新设备上安全登录的一次性密码）。我已经在 Google Authenticator 中设置了 5 个其他帐户，所以如果我可以导出我的 FB otp 密钥以用于该应用程序，那就太好了。

在模拟器、浏览器和测试设备之间，我实际上必须经常使用它。有点烦人，我必须启动 FB 应用程序，点击菜单，滚动到巨大列表的底部，然后点击代码生成器（冷启动后至少 5 秒）......当我可以拉起谷歌身份验证器时应用程序大约半秒。

除非能够导出密钥，是否至少有某种方法可以通过 API 或其他方式设置我的 TOTP 密钥？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-27T17:58:53.020

是的。Facebook 使用标准 TOTP 算法，并且需要适应您没有移动互联网访问权限的用例（因此无法获取密钥/种子）。

寻找“有麻烦？” 设置代码生成器时，浏览器中弹出对话框中的链接，它将引导您进入种子/密钥。只需将其输入您的 Google Authenticator 并验证第一个代码，它应该可以工作:)

# jquery - 更改输入焦点上的标签背景颜色

> ID：13907854
> 
> 赞同：1
> 
> 时间：2012-12-17T03:19:17.237
> 
> 标签：jquery, html, css, forms

因此，我正在尝试更改表 td 元素的背景颜色，该元素包含输入项的标签。输入项本身位于行中的以下 td 元素中。我试图在输入项的焦点上强制改变背景颜色。到目前为止，以下是我编写的代码。在这一点上它无法工作。

```
$(".input_field").child("input").focus(function() {
    $(this).parent("td").sibling("td").css("background","#cf4f92");
});

<tr>
    <td class="label_name"><label for="email">Email</label></td>
    <td class="input_field"><input type="text" name="email" maxlength="28" /></td>
</tr>

td.label_name {
    background:#dc95ba;
    color:#fff;
    font-size:16px; font-weight:bold; line-height:16px;
    padding:2px;
    text-align:right; text-transform:uppercase;
}
td.label_name label {
    margin:0 10px;
    max-width:150px; width:auto;
}
td.input_field {
    margin:0; padding:0;
}
td.input_field input {
    border:1px solid #dc95ba;
    color:#e1a4c4;
    font-weight:bold;
    margin:0 0 0 -2px; padding:2px 2px 2px 10px;
    width:200px;
}
td.input_field input:focus {
    border:1px solid #cf4f92;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:26:14.287

解决方案在这里。[http://jsfiddle.net/J9bWE/1/](http://jsfiddle.net/J9bWE/1/)

我在 tr 上添加了一个类。

```
<tr class="EntryRow">
    <td class="label_name"><label for="email">Email</label></td>
    <td class="input_field"><input type="text" name="email" maxlength="28" /></td>
</tr> 
```

别拿我怎么称呼 tr

```
$(".input_field input").focus(function() {
    $(this).closest(".EntryRow").find(".label_name").css("background","#cf4f92");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T03:37:50.457

尝试这个。有用

```
$(".input_field > input").focus(function() {
    $(this).closest("tr").children("td:first").css("background","#cf4f92");
});​ 
```

# sql - Firebird 在 where 和 order by 子句上的表现

> ID：13907857
> 
> 赞同：3
> 
> 时间：2012-12-17T03:19:52.790
> 
> 标签：sql, database, firebird

我有一个查询，它基本上可以在特定日期范围内找到特定项目的 lastcost。

```
select first 1 lastcost from stock 
where itemid = :itemid and date > :startdate and date < :enddate 
order by date desc 
```

此查询需要几秒钟才能完成数百万条记录，因为“>”不使用索引。如果我按年/月拆分查询并迭代直到它到达开始日期（假设每月有 1 百万条记录）会更快吗？

```
while (endate > startdate) do
begin
  var_year = extract(year from :endate);
  var_month = extract(month from :endate);
  select first 1 lastcost from stock 
  where itemid = :itemid and year=:var_year and month=:var_month
  order by date desc
  enddate = dateadd (-1 month to enddate);
end 
```

这几天我无法使用firebird，所以我自己也无法尝试。

提前致谢

问候，

雷纳尔迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T20:57:40.860

如果可用于 >、<、>=、<= 和运算符之间，Firebird 会使用索引。

在用这张表发布之前，我做了一个测试：

```
SQL> show table stock2;
ITEMID                          INTEGER Not Null
STOCKDATE                       TIMESTAMP Not Null
LASTCOST                        DOUBLE PRECISION Nullable 
```

用一些数据填充它（不是每月数百万，但足以测试性能）

```
SQL> select extract(year from stockdate),
CON>        extract(month from stockdate), count(*)
CON>   from stock2
CON>  group by 1, 2
CON>  order by 1, 2;

EXTRACT EXTRACT        COUNT
======= ======= ============
   2012       1       706473
   2012       2       628924
   2012       3       670038
   2012       4       649411
   2012       5       671512
   2012       6       648878
   2012       7       671182
   2012       8       671212
   2012       9       649312
   2012      10       671881
   2012      11       648815
   2012      12       671579 
```

我运行了您的查询，首先没有任何索引（需要几秒钟），然后仅索引 itemid 列，证明了更好的计划和更好的性能，最后使用了 itemid 和 date 的索引，其中性能要好得多。显示计划允许您查看引擎默认使用索引。

```
SQL> set plan on;
SQL>
SQL> select first 1 lastcost
CON>   from stock2
CON>  where itemid = 127
CON>    and stockdate > '2012-01-15'
CON>    and stockdate < '2012-03-27'
CON> order by stockdate desc;

PLAN SORT ((STOCK2 INDEX (IDX_STOCK2IDDATE)))

               LASTCOST
=======================
      149.7170031070709

SQL> 
```

我使用的索引定义是：

```
create index idx_stock2id on stock2 (itemid);
create index idx_stock2iddate on stock2 (itemid, stockdate); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:17:26.093

您可能需要日期的升序和降序索引。

此外，您可以使用“ [BETWEEN](http://www.janus-software.com/fbmanual/manual.php?book=psql&topic=80) ”语法：

```
select first 1 lastcost from stock 
where itemid = :itemid and date between :startdate and :enddate 
order by date desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T06:58:42.807

不，循环迭代总是比传统`SELECT`语句慢。

如果可以，'<' 或 '>' 将使用索引；看看在索引中添加“itemid”是否有帮助

# javascript - 使用 jQuery 获取数据属性

> ID：13907858
> 
> 赞同：1
> 
> 时间：2012-12-17T03:19:53.870
> 
> 标签：javascript, jquery, css, html

一个`<img />`元素有一个`data-id`我想使用 jQuery 检索的属性。我相信该`.data()`功能可以做到这一点。

```
$('.photo').get(0).data('id') 
```

**问题：**当我尝试使用`.data('id')`来检索属性时，我收到错误：

```
Uncaught TypeError: Object #<HTMLImageElement> has no method 'data' 
```

我哪里做错了？

**jsfiddle：http:** [//jsfiddle.net/KLG3R/](http://jsfiddle.net/KLG3R/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T03:25:49.110

就像其他人说的那样，您的问题是`.get(0)`返回 HTML 元素本身，而不是 jquery 对象。要获取某个元素，请使用`:eq`伪选择器，例如：

[http://jsfiddle.net/gunderson/KLG3R/2/](http://jsfiddle.net/gunderson/KLG3R/2/)

```
$('#result').html( $('.photo:eq(0)').data('id') ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:21:16.100

您需要对 jquery 对象使用数据，并且 get(0) 将返回该元素。

```
$('#result').html( $('.photo').data('id') ); 
```

检查下面的小提琴

[http://jsfiddle.net/KLG3R/1/](http://jsfiddle.net/KLG3R/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:21:24.897

`$('.photo').get(0)`将返回`HTMLImageElement`，而不是 jQuery 对象，因此它没有方法`.data`。

你应该这样做：`$('.photo').data('id')`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T03:22:09.380

使用 .attr() 函数。像

```
$('#result').html( $('.photo').attr('data-id') ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T03:35:02.703

在这种情况下，`.get()`您需要使用 jQuery 。`.eq()`还有你的 using `.data()`which 用于在 dom 上存储数据。您需要使用`.attr()`which 可以访问元素的属性。

```
$(function () {
    var photos = $('.photo');
    $('#result').html(photos.eq(0).attr('data-id'));
}); 
```

这现在应该对你有用：http: [//jsfiddle.net/KLG3R/4/](http://jsfiddle.net/KLG3R/4/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-09T15:33:22.720

1.  有两种类型的元素。即DOM对象和jQuery对象；
2.  jQuery 对象有`data()`方法，而像你这样的 DOM 对象`xx..get(0)`没有方法`data();`
3.  因此，如果要使用`data()`方法，则必须确保对象是 jQuery 对象。

# ajax - 尝试使用来自 AJAX 请求的 JSON 数据加载 Ext 存储返回错误

> ID：13907860
> 
> 赞同：1
> 
> 时间：2012-12-17T03:20:17.080
> 
> 标签：ajax, extjs, view, store

我正在尝试使用 Ext 4.0.7 加载和 Ext Store。

当我在 AJAX 请求的成功回调中调用 store 上的 loadRawData 方法时，它返回一个*Object 不支持此属性或方法错误。*

这是我正在加载的数据：

```
{
    "data": [
    {
        "id": 1,
        "source": "1445261",
        "target": "1437043",
        "sourceType": "user",
        "redirectUrl": "http://www.google.co.uk",
        "message": "this is a notification message",
        "targetType": "user",
        "messageType": "notification",
        "sentDate": "1354758001",
        "notificationType": "notification",
        "parameters": "null",
        "read": "false",
        "readDate": 1354758001
    }, 
    {
        "id": 2,
        "source": "1445261",
        "target": "1437043",
        "sourceType": "user",
        "redirectUrl": "http://www.google.co.uk",
        "message": "this is a notification message",
        "targetType": "user",
        "messageType": "notification",
        "sentDate": "1354758001",
        "notificationType": "notification",
        "parameters": "null",
        "read": "false",
        "readDate": 1354758001
    },  
    {
        "id": 3,
        "source": "1445261",
        "target": "1437043",
        "sourceType": "user",
        "redirectUrl": "http://www.google.co.uk",
        "message": "this is a notification message",
        "targetType": "user",
        "messageType": "notification",
        "sentDate": "1354758001",
        "notificationType": "notification",
        "parameters": "null",
        "read": "false",
        "readDate": 1354758001
    } 
    ]
} 
```

这是商店代码和ajax请求：

```
var infoStagingStore = Ext.create('Ext.data.Store', {
    model: 'SCB.RMWB.InfoBar.Model.Message',
    storeId: 'Staging',
    autoLoad: false,
    pageSize: 10,
    proxy: {
        type: 'pagingmemory',
        reader: {
            type: 'json',
            root: 'data'
        }
    },
    listeners: {
        load: function(){
            console.log('loaded');
        }
    }   
});

Ext.Ajax.request({
    url: '/rmwb/resources/js/app/infoBar/data/data.json',
    timeout: 60000,
    method: 'GET',
    scope: this,
    params: '',
    success: function(resp) {
        console.log(resp.responseText);
        var store = Ext.data.StoreManager.lookup('Staging');
        store.loadRawData(resp.responseText, true);
    },
    failure: function(resp, opts) {

    },
    callback: function(options, success, resp) {
    }
}); 
```

不太明白为什么这会返回错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T09:14:15.517

看到你已经将你的商店分配给一个名为的变量`infoStagingStore`，你不能只在你的 ajax 调用中引用那个目录吗？

```
Ext.Ajax.request({
    url: '/rmwb/resources/js/app/infoBar/data/data.json',
    timeout: 60000,
    method: 'GET',
    scope: this,
    params: '',
    success: function(resp) {
        console.log(resp.responseText);
        //var store = Ext.data.StoreManager.lookup('Staging');
        infoStagingStore.loadRawData(resp.responseText, true);
    },
    ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T13:02:38.710

正如我的评论，您不需要分页内存存储。您需要的是 ajax 存储，因为 pagingstore 用于允许对内存中的数据进行分页，但没有理由使用它来满足您的要求。

因此，如果您使用标准的 ajax 代理，您将能够以正常方式加载它（使用 .load() 方法）。然后，当您需要从服务器**添加**更多记录时，您只需再次调用 load 方法，但使用**addRecords**选项。

例如（未经测试的样本）：

```
// load store with historical data
infoStagingStore.load(); 

// load more records to the store from a different resource
infoStagingStore.load({
    url: '/rmwb/resources/js/app/infoBar/data/data.json',
    addRecords: true
}); 
```

# jquery - jquery：绑定到节点创建

> ID：13907861
> 
> 赞同：1
> 
> 时间：2012-12-17T03:20:26.770
> 
> 标签：jquery, binding

当动态添加分类为“媒体模式”的节点时，有没有办法观看文档并绑定事件？

顺便说一句，我无权访问触发节点创建的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:32:10.367

我收回我的评论，您可以观看`DOMNodeInserted`突变事件并针对添加的元素的类名运行引用。

```
$(document).on('DOMNodeInserted', function(e){
    if(e.srcElement.className == 'media-modal'){
        alert(e.srcElement.className);
    }else{
        alert('not media-modal');   
    }
}); 
```

您实际上可以通过绑定到最近的静态父元素来节省一些性能。

你可以在这里看到一个[工作的 jsFiddle](http://jsfiddle.net/G4AmJ/)

# php - 使用 .htaccess 禁用子目录 php/access

> ID：13907864
> 
> 赞同：2
> 
> 时间：2012-12-17T03:20:50.093
> 
> 标签：php, .htaccess, security

我正在制作一个网站，人们可以在其中将文件上传到特定的子目录。以防万一有人能够绕过过滤器上传潜在的恶意（可能是 php）文件，我想知道是否有可能使恶意代码无法访问。我正在研究两种不同的方法。

首先是看看是否有办法让它通过在浏览器中输入文件 url (www.example.com/images/blahblah.jpg) 来访问子目录中的任何文件，但文件仍然存在链接到时正确显示`<img src=images/blahblah.jpg />`

实现此目的的第二种方法是使用 .htaccess 文件禁用子目录中的 php。我试过了`php_admin_flag engine off`，

`php_flag engine off`,

`RemoveHandler .php RemoveType .php php_flag engine off Options -ExecCGI`

但每次尝试要么什么都不做，要么禁用目录中的所有内容。这些不起作用是有原因的吗？禁用 php 或使用 .htaccess 保护目录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:10:21.613

您可以将有关上传文件的元数据保存在 Db 中，并将内容存储在自定义扩展文本文件中。例如，上传的所有内容都可以存储为 1.ext 或 file.my 或根本没有扩展名。当文件被请求时，您只需读取并转储其内容。添加到此将重命名所有上传的文件。

您还可以将原始文件保留在文档根目录（及其子目录）之外，并在 .htaccess 的帮助下将所有请求转发到单个文件让我们调用 entry.php 然后该 php 文件将简单地读取文件并转储其内容如果未找到或不允许类型，则发出 404。

希望能帮助到你。

# c# - 当构造函数需要一个对象时，如何与 ninject 绑定？

> ID：13907880
> 
> 赞同：1
> 
> 时间：2012-12-17T03:22:54.943
> 
> 标签：c#, ninject

我的工作对象单元有 2 个依赖项，一个连接和一个事务。事务需要一个连接才能被绑定。不确定如何处理这种情况。

```
public class UnitOfWork : IUnitOfWork
{
    public IDbConnection Connection { get; set; }
    public IDbTransaction Transaction { get; set; }

    public UnitOfWork(IDbConnection connection, IDbTransaction transaction)
    {
        this.Connection = connection;
        // In order to create the transaction, it needs the passed in IDbConnection.
    }

    public void Commit()
    {

    }

    public void Rollback()
    {

    }
} 
```

我将如何处理这种情况？

```
Bind<IDbTransaction>().To<SqlTransaction>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:03:23.017

你可以像这样绑定它。IDbTransaction 将与 IDbConnection 绑定。

```
var kernel = new StandardKernel();
kernel.Bind<IDbConnection>()
      .To<SqlConnection>()
      .WithConstructorArgument("connectionString", connectionString);
kernel.Bind<IDbTransaction>()
      .ToMethod(x => x.Kernel.Get<IDbConnection>().BeginTransaction()); 
```

但我看不出你为什么要那样做。您可以简单地`Connection.BeginTransaction()`在您的内部使用并从构造函数`UnitOfWork`中删除该依赖项。`IDbTransaction`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:47:03.173

您可以尝试按照以下示例进行操作，以使其正常工作。

```
private void RegisterDependencyResolver()
        {
            var kernel = new StandardKernel();         
            var connectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
            kernel.Bind(typeof(DataContext)).ToMethod(context => new DataContext(connectionString));
            kernel.Bind(typeof(IRepository<>)).To(typeof(Repository<>));            
            DependencyResolver.SetResolver(new NinjectDependencyResolver(kernel));
        } 
```

这是另一个相关的讨论，作为额外的资源来查看 - [**Ninject、Repository 和 DAL**](https://stackoverflow.com/q/10008923/1437962)

# c# - .Net System.Web.Caching 过期问题

> ID：13907883
> 
> 赞同：0
> 
> 时间：2012-12-17T03:23:27.097
> 
> 标签：c#, asp.net, .net

假设我有一个缓存将在一分钟后过期。

```
Cache.Insert("tryin", 0, null, DateTime.Now.AddSeconds(60), Cache.NoSlidingExpiration); 
```

每 5 秒我有一个计时器将缓存值增加 1，但问题来了。如果我使用以下语法来更新缓存的值，

```
Cache["tryin"] = Convert.ToInt16(Cache["tryin"]) + 1; 
```

它将覆盖缓存并使用 NoSlidingExpiration 和 NoAbsoluteExpiration 创建一个 Cache["tryin"]，但我希望该缓存在一分钟后过期。我还尝试使用以下语法，

```
Cache.Insert("tryin", Convert.ToInt16(Cache["tryin"]) + 1, null, DateTime.Now.AddSeconds(60), Cache.NoSlidingExpiration); 
```

但在这种情况下，我最终将创建一个缓存，该缓存将在每 5 秒后一分钟过期，这使其不会过期。

所以我正在寻找一种在不更改缓存过期时间的情况下更新缓存值的方法，或者获取缓存的剩余过期时间，以便我可以根据剩余过期时间创建另一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:30:44.673

我认为这里的问题在于缓存项是一种值类型。您可以将整数包装在一个类中：

```
public class ValueHolder
{
  public int Value = 0;
}

Cache.Insert("tryin", new ValueHolder(){Value = 0}, null, DateTime.Now.AddSeconds(60), Cache.NoSlidingExpiration); 
```

然后

```
ValueHolder vh = (ValueHolder)Cache["tryin"];
if (vh != null)
  vh.Value = vh.Value + 1; 
```

# javascript - 如何使用异步功能解决以下问题

> ID：13907884
> 
> 赞同：0
> 
> 时间：2012-12-17T03:23:41.283
> 
> 标签：javascript, asynchronous

我有一个 javascript 数组。我需要处理这个数组的每个元素，然后将整个数组存储到对象存储中。我对元素进行的处理应该是异步的。如以下方法所示。

```
var x = [ele1,ele2,ele3] ; 

x.forEach(function(ele,index){

if(ele == "some specific object"){
MyAPI.process("command",function(result){ 

x[index] = result; 
});

database.store(x); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:28:24.300

异步计算时的问题是元素没有按顺序处理。关键是要跟踪已经处理的结果数量，然后才调用 store 方法。最有效的方法是将对 store 方法的调用移到回调中。这样，您可以在检查最后一个元素成功后直接调用它，而不必在检查标志条件时进行忙碌/等待。另一种可能性是在处理最后一个元素时引发一个事件，并在事件处理程序（或类似的东西）中进行存储。

```
var x = [ele1,ele2,ele3] ; 
var expectedResults = 0;
var results = 0;

x.forEach(x,function(ele,index) {
     if (ele == "some specific object") {
         ++expectedResults;
     }
});

x.forEach(x,function(ele,index){

    if (ele == "some specific object"){
        MyAPI.process("command",function(result){ 
           x[index] = result;
           if (++results == expectedResults) {
              database.store(x);
           }
        });
    }
}); 
```

# javascript - 不缓存网络摄像头图像的javascript幻灯片

> ID：13907886
> 
> 赞同：0
> 
> 时间：2012-12-17T03:24:17.360
> 
> 标签：javascript, slideshow, webcam

我的网络摄像头每 10 秒将图像上传到我的网站并将其命名为 live.jpg ...我正在寻找一种方法来每 10 秒刷新一次图像（以显示最新图像），但图像正在被缓存而不是更新. 这是我正在使用的旧javascript不起作用....是否可以对其进行简单的修改以绕过缓存图像？非常感谢您的任何建议：

```
<script type="text/javascript">
// (C) 2000 www.CodeLifter.com
// http://www.codelifter.com
// Free for all users, but leave in this  header
// NS4-6,IE4-6
// Fade effect only in IE; degrades gracefully

// =======================================
// set the following variables
// =======================================

// Set slideShowSpeed (milliseconds)
var slideShowSpeed = 10000

// Duration of crossfade (seconds)
var crossFadeDuration = 1

// Specify the image files
var Pic = new Array() // don't touch this
// to add more images, just continue
// the pattern, adding to the array below

Pic[0] = 'http://www.examplesite.com/live.jpg'

// =======================================
// do not edit anything below this line
// =======================================

var t
var j = 0
var p = Pic.length

var preLoad = new Array()
for (i = 0; i < p; i++){
   preLoad[i] = new Image()
   preLoad[i].src = Pic[i]
}

function runSlideShow(){
   if (document.all){
      document.images.SlideShow.style.filter="blendTrans(duration=2)"
      document.images.SlideShow.style.filter="blendTrans(duration=crossFadeDuration)"
      document.images.SlideShow.filters.blendTrans.Apply()
   }
   document.images.SlideShow.src = preLoad[j].src
   if (document.all){
      document.images.SlideShow.filters.blendTrans.Play()
   }
   j = j + 1
   if (j > (p-1)) j=0
   t = setTimeout('runSlideShow()', slideShowSpeed)
}
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:30:13.120

将更改参数添加到图像 URL，例如时间戳：

```
document.images.SlideShow.src = preLoad[j].src+'?'+new Date().getTime(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:30:43.783

我认为您应该使用时间戳在 preLoad 中缓存图像，而不是将时间戳添加到 Slideshow 的源中

# hadoop - 如何在Hadoop中根据集群大小设置reduce任务

> ID：13907887
> 
> 赞同：1
> 
> 时间：2012-12-17T03:24:20.810
> 
> 标签：hadoop

我想将**减少任务的**数量设置为与一项作业中可用的减少插槽数量完全相同。

默认情况下，reduce 任务被计算为可用的 reduce slot 数的约 1.75 倍（在 Elastic Mapreduce 上）。我注意到我的作业非常均匀地完成了 reduce 任务，因此最好在作业中的每个 reduce 槽运行 1 个 reducer。

但是**如何**从我的作业配置中识别集群指标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:43:08.073

您可以使用[ClusterMetrics](http://people.apache.org/~tomwhite/MAPREDUCE-1623/docs/api/org/apache/hadoop/mapreduce/ClusterMetrics.html)类获取有关 Map-Reduce 集群当前状态的状态信息，如集群大小、列入黑名单和停用的跟踪器数量、集群的 Slot 容量、当前占用/保留的 map & reduce 的数量插槽等

# jquery - 总是转到上一页的顶部？

> ID：13907891
> 
> 赞同：3
> 
> 时间：2012-12-17T03:24:56.237
> 
> 标签：jquery, scroll, history, back

是否可以使脚本滚动到上一页的顶部？现在脚本返回到上一页，并在链接所在的正文中间。

```
$(document).ready(function(){
    $('a.back').click(function(){
    parent.history.back();
    return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T20:26:36.880

如果您在谈论任何页面，即使在您的网站/应用程序之外，也是不可能的。

由于您无法控制上一页，因此您无法在那里运行任何代码。添加`#top`或哈希然后返回该页面将不起作用。

如果我们只在您控制的网站内谈论，当然您可以使用 JS 来控制它。

# jquery - 如何在 HTML、Jquery 中创建类似屏幕的屏幕保护程序

> ID：13907894
> 
> 赞同：-5
> 
> 时间：2012-12-17T03:25:06.403
> 
> 标签：jquery, html, redirect, screensaver, kiosk

我创建了一个 Web 应用程序 KIOSK。但我的问题是假设用户使用 KIOSK 应用程序，并且在使用此应用程序后用户离开了屏幕。另一个用户来了，用户将看不到主页。

所以我想创建一个系统，在使用这个应用程序后，应用程序等待用户交互。如果没有发生交互，应用程序会在特定时间后自动重定向到主屏幕或主页。如何执行此操作。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:49:06.053

```
$(document).ready(function(){
    var timeout;
    $(document).on("mousemove keydown click", function() {
        clearTimeout(timeout);
        timeout = setTimeout(function() {
             window.location = "homePage.htm";
        }, 2 * 60 * 1000);
    }).click();
}); 
```

上面使用的所有函数都在[jQuery 站点](http://api.jquery.com)或[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)中有详细记录。

**编辑**- 解释这是如何工作的：它设置一个计时器在两分钟后重定向。（显然这个时间是可以调整的。）如果用户移动鼠标、点击或输入，则清除计时器并设置一个新计时器。当页面首次加载以启动第一个计时器时触发此处理程序一次。

因此，如果用户在 2 分钟内未触发处理程序，则会发生重定向。

# c++ - .CAB 中的.EXE 无法从 Win7、IE8 安装

> ID：13907903
> 
> 赞同：0
> 
> 时间：2012-12-17T03:26:39.480
> 
> 标签：c++, windows-7, browser-plugin

我制作了一个浏览器插件并尝试从 IE 中的 .cab 文件部署它。它是按用户安装的。我的问题是在 Windows XP 中，安装在不同的用户中运行良好。但是，在 Windows 7 中，当打开包含 .cab 的页面时，会下载并解压 .cab 文件，但是当我单击“安装”按钮时，没有任何反应。

这是 .inf 文件：

```
[version]
Signature="$CHICAGO$"
AdvancedINF=2.0

[Deployment]
InstallScope=user

[Setup Hooks]
hook1=hook1

[hook1]
run=%EXTRACT_DIR%\MyPlugin.exe 
```

“MyPlugin.exe”也在 .cab 文件中。

注意代码中有一个 [Deployment] 段，我是从[MSDN](http://msdn.microsoft.com/en-us/library/dd433049%28VS.85%29.aspx)得到的，如果删除这个段，它可以安装在 Win7 中，但是 UAC 弹出，我需要输入管理员密码。但是我制作的浏览器插件是针对每个用户的，我认为这里不需要管理员权限。

**更新：** 现在我发现IE只在从内网浏览页面时才请求管理员权限，否则如果从互联网浏览它仍然会请求管理员权限，所以我怀疑IE会强制使用管理员权限执行钩子安装.exe 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T07:04:45.297

如果您的 %EXTRACT_DIR% 位于 \users\%user%\ 或任何子目录之外的任何位置，则需要管理员密码：即。程序文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:22:45.400

您可能没有在**HKEY_CURRENT_USER**下注册插件，以便在 Windows 7 上没有正确弹出 UAC 弹出窗口的情况下进行部署。根据 MSDN，您的插件需要在 HKEY_CURRENT_USER 下注册：`On both Windows XP and Windows Vista, non-administrators are prevented from installing any ActiveX on their own. But now an **ActiveX registered under the HKEY_CURRENT_USER** hive is now fully supported by Internet Explorer within the context of a user's privilege level.`

# php - 使用 PHP 将文本文件中的数据加载到 HIGHCHART 图形中

> ID：13907908
> 
> 赞同：1
> 
> 时间：2012-12-17T03:27:49.267
> 
> 标签：php, jquery, highcharts

我需要从有很多行加载到 highchart 的文本文件中读取数据，但如果我把它放多行，它会显示凌乱的文本，[请看这个链接](http://www.unitead.pro/kama/stats/pmta/Emetteur/PMTA4.php)。我不希望这样，我希望如果文本文件中有超过 20 行，应该显示 2 或 3 个高图图形以使文本易于查看。我有如下的 PHP 代码和脚本代码：

```
<?php
            $PMTA_DATE = date("Y-m-d");
            $PMTA_FILE = file_get_contents("../stats_domain_emetteur.switchcall.com.".$PMTA_DATE.".txt");
            $lineFromText = explode("\n", $PMTA_FILE);
            //$number_bar_charts = 12;
            $row = 0;
            $cate = "";
            $total ="";
            $fail = "";
            $mailSuc = "";
            $title = "";
            foreach($lineFromText as $line){
                   // if($row < $number_bar_charts){
                    $words = explode(";",$line);
                     $dateTime .= ','.$words[0];
                     if($title == ""){
                         $title = $words[0];
                     }
                     $cate .= ','."'$words[5]'";
                     $total .= ','.$words[6];
                     $fail .= ','.$words[7];
                     $mailSuc .= ','.((int)$words[6] -   (int)$words[7]);                           
                     $row++;
      // }   
     }

?>
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Colunm Stack Percent Chat</title>
    <script type="text/javascript" src="js/jquery.min.js"></script>        
<script type="text/javascript">     
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'PMTA4',
            type: 'column'
        },
        title: {
            text: 'PMTA4 - Unitead.info -<?php echo $title;?>'
        },
        xAxis: {
            categories: [<?php echo substr($cate,1);?>]
        },
        yAxis: {
            min: 0,
            title: {
                text: '% envoi'
            }
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.series.name +': '+ this.y +' ('+ Math.round(this.percentage) +'%)';
            }
        },
        plotOptions: {
            column: {
                stacking: 'percent'
            }
        },
            series: [{
            name: 'Total mail succesful',
            data: [<?php echo substr($mailSuc,1);?>]
        }, {
            name: 'Total mail fail',
            data: [<?php echo substr($fail,1);?>]
        }]
    });
});

});
    </script>

</head>
<body>
<script src="js/highcharts.js"></script>
<script src="js/modules/exporting.js"></script>

<div id="PMTA4" style="min-width: 400px; height: 200px; margin-top:10px;"></div>

</body>

</html> 
```

我不知道如何解决这个问题，请任何人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:45:57.533

如果您查看参考资料，您会发现**您可以设置标签样式**。

`staggerLines`用于在多行中显示标签，但这不是一个好方法，您可以在我的演示中看到原因。

```
xAxys: {
    labels: {
        staggerLines: 10
    }
} 
```

[**演示**](http://jsfiddle.net/wavje/1/)

或者你可以试试`rotate`他们。

```
xAxys: {
    labels: {
        rotate: 90, // you can use 45 or 60 for a better readability
        align: 'left'
    }
} 
```

[**演示**](http://jsfiddle.net/wavje/)

参考：

*   [http://api.highcharts.com/highstock#xAxis.labels.staggerLines](http://api.highcharts.com/highstock#xAxis.labels.staggerLines)

# android - 使用回车键提交带有 android / phonegap 数字键盘的表单

> ID：13907913
> 
> 赞同：3
> 
> 时间：2012-12-17T03:28:24.960
> 
> 标签：android, html, cordova

我的 android/phonegap 应用程序上的软“NUMERIC”键盘出现问题。

我的目标：在 html5 页面上创建一个简单的表单（我将与 phonegap 一起使用），其中用户使用 0-9 个字符输入一个数字。为此，我使用了 type = number 的输入字段，这会在我的 android 手机上生成正确的软键盘。

不幸的是，当我在数字键盘上按下回车键时，我感到非常沮丧。通常按下时，键盘不会提交表单，而是消失。但是，如果我将输入的类型更改为“文本”，则输入键按预期工作并提交表单。

如何使用数字键盘重现表单提交？

**参考见：http: [//jsfiddle.net/Ua9yw/13/](http://jsfiddle.net/Ua9yw/13/)**

工作输入提交行为：

```
<form> <input type="text"/> </form>

<form id="form1">
    <input type="text"/>
    <input type="submit"/>
</form> 
```

不工作输入按钮行为：

```
<form> <input type="number"/> </form>
<form id="form1">
    <input type="number"/>
    <input type="submit"/>
</form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-27T21:46:15.300

您可以`next`通过在 JQuery 中使用以下绑定来检测键盘按下：

```
$('input').on('keydown', function(e){
    if(e.which === 9) {
        //your code here
    }
}); 
```

该`next`按钮模拟`tab`键盘上的 keypress 事件，即键码 9。不幸的是，`keypress`事件`keyup`不会检测到下一个键事件，因此您需要将其绑定到`keydown`.

# spring - applicationContext 可能无法解析路径

> ID：13907917
> 
> 赞同：0
> 
> 时间：2012-12-17T03:28:40.013
> 
> 标签：spring

当我在我的 spring 简单数据库连接代码中定义 applicationContext 时，我收到了这个错误。

但是当我将 applicationContext 放置在 java (DatabaseTestConnection.java) 所在的位置时，它可以毫无问题地连接。

> 线程“主”org.springframework.beans.factory.BeanDefinitionStoreException 中的异常：IOException 从类路径资源 [applicationContext.xml] 解析 XML 文档；嵌套异常是 java.io.FileNotFoundException: 类路径资源 [applicationContext.xml] 无法打开，因为它不存在

## 来源

**应用程序上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

<!--bean id="propertyConfigurer"
      class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"
      p:location="/WEB-INF/jdbc.properties" />

<bean id="dataSource"
class="org.springframework.jdbc.datasource.DriverManagerDataSource"
p:driverClassName="${jdbc.driverClassName}"
p:url="${jdbc.url}"
p:username="${jdbc.username}"
p:password="${jdbc.password}" /-->

<bean id="databaseTestConnection" class="DatabaseTestConnection">
<property name="dataSource" ref="externalDataSource"/>
</bean>

<bean id="externalDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource" scope="singleton"     destroy-method="close">
<property name="driverClassName" value="sun.jdbc.odbc.JdbcOdbcDriver"/>
<property name="url" value="jdbc:odbc:;DRIVER=Microsoft Access Driver (*.mdb, *.accdb);DBQ=C://Users//gopc//Documents//odbc_sql.accdb"/>
<property name="username" value=""/>
<property name="password" value=""/>
</bean>

<!-- ADD PERSISTENCE SUPPORT HERE (jpa, hibernate, etc) -->

</beans> 
```

**数据库测试连接.java**

```
import java.util.*;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.core.io.ClassPathResource;

import javax.sql.DataSource;
import org.springframework.jdbc.core.JdbcTemplate;

public class DatabaseTestConnection {

private JdbcTemplate jt;

public void setDataSource(DataSource dataSource) {
    this.jt = new JdbcTemplate(dataSource);
}

/**
 * @param args the command line arguments
 */
public static void main(String[] args) {
    XmlBeanFactory bf = new XmlBeanFactory(new ClassPathResource("applicationContext.xml"));
    DatabaseTestConnection bn = (DatabaseTestConnection) bf.getBean("databaseTestConnection");
    int count = bn.jt.queryForInt("select count(*) from log_entry");
    System.out.println("cgk count:" + count);

    List <Map <String,Object> > ob = bn.jt.queryForList("select * from log_entry", args);
    System.out.println("cgk size:" + ob.size());
    for (Map<String,Object> entry: ob )
    {
        System.out.println("ID:" + entry.get("ID"));
        System.out.println("DateCol:" + entry.get("DateCol"));
        System.out.println("Completed:" + entry.get("Completed"));
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:53:08.980

无论如何，您只是在本地进行测试，因此您可以这样做以从上下文路径加载

```
ApplicationContext ctx = new FileSystemXmlApplicationContext("C:\\workspace\\src\\main\\webapp\\WEB-INF\\applicationContext.xml"); // in your case path to your applicationContext.xml file in your local. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T05:07:21.660

该`applicationContext.xml`文件应位于`WEB-INF/classes`文件夹内。

您的配置表明该`applicationContext.xml`文件位于`classpath`. 类路径引用`WEB-INF/classes`servlet 应用程序中的目录。

# javascript - javascript $ 后跟花括号

> ID：13907924
> 
> 赞同：4
> 
> 时间：2012-12-17T03:30:07.693
> 
> 标签：javascript, jquery

我读了一本名为“Javascript web application”的书，它有以下代码行：

> 下面的示例包含视图内部的逻辑，是您不应该做的事情：

```
<div>
<script>
function formatDate(date) {
/* ... */
};
</script>
${ formatDate(this.date) }
</div> 
```

我不明白 { formatDate(this.date) } 在 javascript 中的含义，即使在 jQuery 中我也从未见过它（将对象放入 jQuery 函数中，然后我已经看到了，但上面的代码并非如此）。你能解释一下它的含义吗？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T03:43:17.727

`${}`是一个模板标签，由[jQuery Template Plugin](http://api.jquery.com/template-tag-equal/)使用。

> **${} 模板标签**
> 
> 用于在呈现的模板中插入数据值。评估当前数据项的指定字段（属性）或指定的 JavaScript 函数或表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-29T08:55:13.033

它实际上不止于此：确实，jQuery 模板插件曾经有这种语法`${}`。然而，目前，这是 ES 6（又名 EcmaScript 2015）标准的一部分。

参考：[http ://exploringjs.com/es6/ch_template-literals.html](http://exploringjs.com/es6/ch_template-literals.html)

# opengl - 如何正确定义 OpenGL 扩展？

> ID：13907926
> 
> 赞同：2
> 
> 时间：2012-12-17T03:30:37.477
> 
> 标签：opengl

我使用 wglGetProcAddress 获得 OpenGL 扩展。但在不同的机器上，它使用不同的参数：例如，对于使用 glDrawArrays，我应该用“glDrawArrays”或“glDrawArraysEXT”调用 wglGetProcAddress。如何定义使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T09:35:18.183

有两个非常好的 OpenGL 扩展加载库—— [Glee](http://glew.sourceforge.net/)和[GLEW](http://elf-stone.com/glee.php)。GLEW 目前比 GLee 更先进。即使你不想使用它们中的任何一个，它们都是开源的，所以你可以做的比看看它们是如何做的更糟糕。

您可能还想查看[http://www.opengl.org/sdk/](http://www.opengl.org/sdk/)，这是一个不错的在线 OpenGL 文档集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T09:49:13.040

> “glDrawArrays”或“glDrawArraysEXT”

两个都！即使它们的名称相似，并且过程签名和令牌值通常相同，*它们也是不同的*扩展，其中细节可能非常不同。

最终由程序员决定使用哪些函数。如果程序使用`…EXT`函数的变体，那么即使可能存在`…ARB`同名的或核心函数，也必须加载该函数；它们的签名和/或使用的令牌和状态可能不同，因此您不能盲目地将一个替换为另一个。

# javascript - 如何在颜色框中做滚动顶部？

> ID：13907932
> 
> 赞同：0
> 
> 时间：2012-12-17T03:31:22.373
> 
> 标签：javascript, scroll, colorbox, scrolltop

基本上我有很多内容要显示在彩盒插件中，我想通过程序滚动到某个部分。

彩盒部分工作正常。简化的代码如下所示（这里没什么特别的）：

```
$.colorbox({href: '#my_content', inline:true, onComplete(){go_there()}}); 
```

滚动部分，如果不使用颜色框，也可以正常工作。代码如下所示：

```
$('html,body').animate({scrollTop: 1234}, 100); // 1234 here is just example 
```

结合以上两部分时，不会发生滚动。然后我想我需要将'html，body'字符串更改为其他内容，所以我立即尝试了 $("#my_content").animate(...) 但没有运气，然后我尝试了 "#cboxContent"， “#cboxWrapper”、“#colorbox”。它们都不起作用。

（我会尽快提供答案。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:31:22.373

在搜索了类似的代码片段之后，我意识到一种模式，即 scrollTop 只能应用于您的一个具有溢出：自动样式的内容包装器！

找到了正确的方向，我很快检查了 colorbox.css 并确定了想要的容器。它是“#cboxLoadedContent”。所以这个就像一个魅力：

```
$('#cboxLoadedContent').animate({scrollTop: 1234}, 100); 
```

原理可能很简单，但我确实花了一些时间才弄清楚。所以希望这篇文章可以帮助像我这样的人。

# python - Pymongo 在使用“$gte”和“$lte”时返回错误

> ID：13907935
> 
> 赞同：3
> 
> 时间：2012-12-17T03:31:56.990
> 
> 标签：python, mongodb, datetime, pymongo, epoch

我正在尝试从 mongo 中进行选择（使用 pymongo），查询纪元时间戳。我的数据库中的一个样本是（为简洁起见）：

```
{
    "_id": "",
    "tweet": {
        "iso_language_code": "en",
        "to_user_name": null,
        "timestamp": 1355325948,
        "created_at": "Wed, 12 Dec 2012 15:25:48 +0000"
    }
} 
```

查询，在代码中和 python 控制台中：

```
<console>
db.tweets.find({
    "tweet.timestamp":{'$gte':1355391000},
    "tweet.timestamp":{'$lte':1355414400}
})

<code>
cursor = db.tweets.find({"tweet.timestamp":{'$gte':startEpoch},
                         "tweet.timestamp":{'$lte':endEpoch}}) 
```

分别是 *2012 年 12 月 13 日星期四 09:30:00 GMT*和2012*年 12 月 13 日星期四 16:00:00 GMT*。

应该说，让我所有推文*gte this int*和*lte this other int*。然而，它返回一切——它似乎根本没有限制这些值。

例如，返回此条目，时间戳为：*1355325948*，即：*Wed, 12 Dec 2012 15:25:48 GMT*

另外，我的理解是带有参数列表的 find(...) 是一个隐含的 AND。

蒂亚！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T03:52:09.173

您的查询对象中不能有两个具有相同名称的键。您必须将它们组合成一个值，如下所示：

```
cursor = db.tweets.find({"tweet.timestamp":{'$gte':startEpoch, '$lte':endEpoch}}) 
```

# android - 适用于 Android 的 Atheros 蓝牙 4.0 支持 API

> ID：13907936
> 
> 赞同：0
> 
> 时间：2012-12-17T03:32:02.107
> 
> 标签：android, bluetooth, driver

我参与了一个使用蓝牙 4.0 连接传感器的 Android 项目。AFAIK android 不支持蓝牙 4.0。我尝试使用我的笔记本电脑蓝牙 4.0。我尝试使用 Broadcom 使用[它](http://code.google.com/p/broadcom-ble/)。后来我知道我的笔记本电脑蓝牙 4.0 是 Atheros 蓝牙 4.0，后来我使用 android 手机和平板电脑搜索了 Atheros 蓝牙 4.0 API。我看到高通拥有蓝牙 4.0 平板电脑。我想知道，Atheros 是否为 Android SDK 提供蓝牙 4.0 API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T03:38:28.600

最后，经过漫长的搜索，我发现直到今天（23/12/12），Atheros 都没有为开发人员提供蓝牙 API。但他们正在为音频、相机、设备信息和传感器（移动抖动）提供其他 API。所以，也不能在笔记本电脑上试用。Dgel 评论和链接对我帮助很大，让我得出结论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:25:46.780

Android 蓝牙（和其他）API 并不特定于硬件（或软件堆栈）。

它们是通用且相当高级的，是的，它们包括蓝牙 4.0。

对 BT 4 的实际支持取决于设备。最近的 Nexus 设备只要有 Android 4.2 更新就支持 BT4（硬件和软件）。

如果您对设备进行 root，您可以访问“原始”供应商 API，但我不知道 BT4 是什么样的，或者是否已发布任何内容。在大多数情况下，它是基于 Broadcom，而不是 Atheros。

编辑：我刚看到这个： [http](http://code.google.com/p/broadcom-ble/) ://code.google.com/p/broadcom-ble/ 我对此并不熟悉，但我怀疑这只是将 BT4 添加到官方 Android 之前的权宜之计4.1 中的 API。

# django - Django URL conf 和 Backbone.js 路由器

> ID：13907939
> 
> 赞同：6
> 
> 时间：2012-12-17T03:32:13.317
> 
> 标签：django, backbone.js, django-urls, marionette

我有一个用路由器设置的主干.js 单页应用程序（好吧，实际上是一个带有 Backbone.Marionette AppRouter 的 Backbone.Marionette 应用程序，但尽管如此）。但是，后端基于 Django，我没有 URL conf 指向已经在主干.js 路由中的所有 URL 的视图。

基于 Django URL conf 中的现有 URL，Backbone.js 将为骨干路由提供服务，而不管 Django conf 中列出的内容 - 似乎有些东西，任何东西都需要在那里。

我是否需要拥有适当的 Django 视图才能为旧版浏览器/SEO 提供后备方案？

协调 Django URL conf 和 Backbone.js 路由器的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T01:39:52.377

我发现一个帖子很好地解决了这个问题：

[http://duganchen.ca/single-page-web-app-architecture-done-right/](http://duganchen.ca/single-page-web-app-architecture-done-right/)

简而言之，我包含后备的理由是出于非 JavaScript 浏览器和 SEO 的原因。在撰写本文时，非 JavaScript 浏览器占用户的约 1.4%（在我所阅读的所有内容中不到 2%），这使得 SEO 成为主要考虑因素。同样，SEO 可能与阅读这篇文章的每个人都不相关，在这种情况下，可以跳过。

我发现 Thomas Davis 的使用[phantom.js](http://phantomjs.org/)的教程很有帮助。[http://backbonetutorials.com/seo-for-single-page-apps/](http://backbonetutorials.com/seo-for-single-page-apps/)

然而，我需要考虑的另一个问题是历史 API，除了最新的 IE 浏览器之外，所有的浏览器都忽略了它。考虑到我客户的用户，其中大约 15% 使用 IE <= 9，这也是一个问题。

最后，我还需要使用[history.js](https://github.com/balupton/History.js/)。总而言之，更新一个原本非常简单的网站需要做很多工作。然而，我从这次磨难中学到了很多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:32:55.060

在我看来，如果您的主干应用程序确实是一个页面，那么您就不需要任何 django 视图。您可以将 index.html 作为静态文件提供（在生产中，甚至不是由 django 提供），然后让骨干网的路由器处理您的 url 配置，就像您已经在做的那样。您可以使用主干的历史记录并导航到虚假网址、添加网址参数等，以获取应用程序中的资源。

# c# - 获取记录之间的日期差异/时间跨度

> ID：13907941
> 
> 赞同：0
> 
> 时间：2012-12-17T03:32:16.743
> 
> 标签：c#, asp.net, timespan, datediff, nested-repeater

假设我有一个基本的 asp.net C# Web 应用程序，我可以在其中输入不同事件的日期，例如换油。我想为不同的车辆跟踪这个。然后我想计算换油天数的差异。

因此，对于最近的换油，日期差异/时间跨度将从今天开始计算。但是对于以前的换油，我希望在记录集中的每个先前记录之间计算 datediff/timespan。我想，我可以创建一个字段来输入天数，但我认为以编程方式应该很容易，不是吗？

现在，在经典的 ASP 中，我会做这样的事情（事实上，这是我在这个小应用程序的先前版本中所做的）：

```
<%set rs=conn.Execute("select vehiclename,changedate from oilchange order by changedate desc")
do until rs.EOF
dim recordchk,record
recordchk = record
date2=date1
date1=rs("changedate")
if record <> rs("vehcilename") then
record = rs("vehiclename")

end if%>

<%
if record <> recordchk then  
%>

<tr><td colspan="9"><hr color="black"/></td></tr>

<tr><td colspan="9"><b><%=rs("vehiclename") %></b></td></tr>
<tr><td valign="top" width="15%"><%=rs("changedate") %>&nbsp;<i>(<%=datediff("d",rs("changedate"),date()) %> days)</i></td>
</tr>

<%else%>

<tr><td valign="top" width="15%"><%=rs("changedate") %>&nbsp;<i>(<%=datediff("d",rs("changedate"),date2) %> days)</i></td>
</tr>

<%end if%>

<%rs.MoveNext
loop
rs.Close
%> 
```

但是我很难过如何在 ASP.NET 中做

对于不同的车辆，我有一个中继器，然后我在里面嵌套了一个中继器来遍历该车辆的换油记录。浏览换油清单就好了，但我不知道如何计算才能让我换油之间的天数。

所以，这是我的代码隐藏......（你可以看到这不是换油，而是吉他弦的变化。）

```
protected void guitarrepeateritemdatabound(object sender, RepeaterItemEventArgs e)
    {
        stringsEntities db = new stringsEntities();

        if ((e.Item.ItemType == ListItemType.Item) || (e.Item.ItemType == ListItemType.AlternatingItem))
        {
            Repeater StringChangeRepeater = (Repeater)e.Item.FindControl("StringChangeRepeater");

            HiddenField guitarIDfield = (HiddenField)e.Item.FindControl("guitarIDint");
            int guitarIDint = Convert.ToInt32(guitarIDfield.Value);
            Label changedate = (Label)e.Item.FindControl("changedate");

            TimeSpan timeBetweenChanges = (DateTime.Now - Convert.ToDateTime(changedate));

            var qrystringchangesview = (from s in db.stringchange_view
                                        where s.guitarid == guitarIDint
                                        orderby s.changedate descending
                                        select new
                                        {
                                            guitarID2 = s.guitarid,
                                            s.guitarname,
                                            s.stringname,
                                            s.changedate,
                                            s.gauge

                                        });

            StringChangeRepeater.DataSource = qrystringchangesview;
            StringChangeRepeater.DataBind(); 
```

然后是我的 aspx 页面：

```
 <asp:Repeater ID="GuitarRepeater" runat="server"  OnItemDataBound="guitarrepeateritemdatabound">
<ItemTemplate>
 <tr>
  <td valign="top">
  <asp:HiddenField ID="guitarIDint" runat="server" Value='<%# Eval("guitarID") %>' />

   <asp:LinkButton OnClick="clicktheinstrument" ID="guitarname" runat="server" Font-Bold="true" CommandArgument='<%#Eval ("guitarID") %>' Text='<%# Eval("guitarname") %>' />

   <asp:Repeater runat="server" ID="StringChangeRepeater">
    <ItemTemplate>
    <table><tr><td style="width:100px">
    <asp:Label ID="changedate" runat="server" Text='<%# Eval("changedate","{0:MM/dd/yyyy}") %>'></asp:Label> 
      (<asp:Label ID="timeBetweenChangesLabel" runat="server"></asp:Label>)
       </td><td style="width:200px">
       <asp:Label ID="stringname" runat="server" Text='<%# Eval("stringname") %>'></asp:Label>
       </td><td style="width:100px">
       <asp:Label ID="gauge" runat="server" Text='<%# Eval("gauge") %>'></asp:Label>
       </td></tr></table>
      </ItemTemplate>
      </asp:Repeater>
       </td>
      </tr>
       </ItemTemplate>
       <AlternatingItemTemplate>
       <tr style="background-color: #F7F7F7">
       <td valign="top">
       <asp:HiddenField ID="guitarIDint" runat="server" Value='<%# Eval("guitarID") %>' />

       <asp:LinkButton OnClick="clicktheinstrument" ID="guitarname" runat="server" Font-Bold="true" CommandArgument='<%#Eval ("guitarID") %>' Text='<%# Eval("guitarname") %>' />

       <asp:Repeater runat="server" ID="StringChangeRepeater">
       <ItemTemplate>
       <table><tr><td style="width:100px">
       <asp:Label ID="changedate" runat="server" Text='<%# Eval("changedate","{0:MM/dd/yyyy}") %>'></asp:Label>
       (<asp:Label ID="timeBetweenChangesLabel" runat="server"></asp:Label>)
       </td><td style="width:200px">
      <asp:Label ID="stringname" runat="server" Text='<%# Eval("stringname") %>'></asp:Label>
       </td><td style="width:100px">
       <asp:Label ID="gauge" runat="server" Text='<%# Eval("gauge") %>'></asp:Label>
       </td></tr></table>
        </ItemTemplate>
        </asp:Repeater>
        </td>
        </tr>
       </AlternatingItemTemplate>
        </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T16:30:58.903

好吧，我在 asp.net 论坛上得到了答案......我想我会在这里发布它以帮助其他正在做类似事情的人。

```
foreach (RepeaterItem item in StringChangeRepeater.Items)
            {
                if (item.ItemType == ListItemType.Item || (item.ItemType == ListItemType.AlternatingItem))
                {
                    HiddenField stringchangeIDHidden = item.FindControl("stringchangeID") as HiddenField;
                    int stringchangeID = Convert.ToInt32(stringchangeIDHidden.Value);

                    var getcurrentrecord = (from s in db.stringchange_view
                                            where s.ID == stringchangeID
                                            select new
                                            {
                                                s.changedate

                                            }).First();

                    Label timeBetweenChangesLabel = item.FindControl("timeBetweenChangesLabel") as Label;
                    DateTime changedate1 = Convert.ToDateTime(getcurrentrecord.changedate);
                    TimeSpan changedateSpan = changedateX - changedate1;
                    TimeSpan changedateSpan2 = changedate1 - Convert.ToDateTime(getcurrentrecord.changedate);
                    timeBetweenChangesLabel.Text = changedateSpan.Days.ToString();

                    changedateX = changedate1;

                }

            } 
```

# javascript - 在Javascript中的另一个页面中传输进度条？

> ID：13907942
> 
> 赞同：0
> 
> 时间：2012-12-17T03:32:19.620
> 
> 标签：javascript, progress-bar

我有一个显示进度条的 Javascript 函数？

```
<script type="text/javascript">
Counter = 10;
function DoCounter()
{
    SlideParent = document.getElementById("SliderParent");
    Slide = document.getElementById("Slider");
    Slide.style.width = Counter + "%";
    Slide.innerHTML = Counter + "%";
    if(Counter <25)
    {
        SlideParent.style.borderColor = "green";
        Slide.style.backgroundColor = "green";
    }
    else if(Counter >= 25 && Counter < 50)
    {
        SlideParent.style.borderColor = "blue";
        Slide.style.backgroundColor = "blue";
    }
    else if(Counter >= 50 && Counter < 75)
    {
        SlideParent.style.borderColor = "orange";
        Slide.style.backgroundColor = "orange";
    }
    else
    {
        SlideParent.style.borderColor = "red";
        Slide.style.backgroundColor = "red";
    }
    if(Counter++ < 100)
    {
        setTimeout("DoCounter()",100);
    }
}

</script> 
```

这就是我在正文标签中的内容：

```
<div id="sync"><input type="submit" onclick="DoCounter();" /></div>
<div id="SliderParent" style="width:100%;">
    <div id="Slider" style="width:0%; border-width:0px; background-color:red; color:white">
        0%  
    </div>
</div> 
```

当用户单击提交时，进度条会加载到同一页面中。我希望进度条加载到同一页面，但我删除了所有内容。`document.write("Uploading..Please Wait")`这样做。我想删除所有内容并在`Uploading ..Please Wait`下面添加进度条。我怎样才能做到这一点？

# mysql - 如何避免 sql 注入？

> ID：13907948
> 
> 赞同：2
> 
> 时间：2012-12-17T03:33:10.407
> 
> 标签：mysql, ruby-on-rails, sql-injection

我正在做一个查询：

```
 @results = RubyGem.where(
    'name LIKE ?', "%#{searchphrase}%"
    ).paginate(
        :page => params[:page], 
        :per_page => 50, 
        :group => "name", 
        :order => [
            "CASE WHEN name like '#{searchphrase}%' THEN 0 
            WHEN name like '% %#{searchphrase}% %' THEN 1 
            WHEN name like '%#{searchphrase}' THEN 2 
            ELSE 3 END, name"
        ]
    ) 
```

但我很确定这很容易被注射......有人可以解决这个问题，所以它不是，同时保持功能相同？我正在使用 Ruby on Rails 和 MySQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T05:08:20.217

```
@results = RubyGem.where(
    'name LIKE ?', "%#{searchphrase}%"
).paginate(
     :page => params[:page], 
     :per_page => 50, 
     :group => "name", 
     :order => [
       "CASE WHEN name like ? THEN 0 WHEN name like  THEN 1 WHEN name like '%#{searchphrase}' THEN 2 ELSE 3 END, name", "#{searchphrase}%", "% %#{searchphrase}% %"
     ]
) 
```

# python - TypeError：“NoneType”对象没有属性“__getitem__”

> ID：13907949
> 
> 赞同：28
> 
> 时间：2012-12-17T03:33:28.800
> 
> 标签：python, typeerror

我遇到了问题，我不知道为什么会发生这种情况以及如何解决它。我正在使用 python 和 pygame 开发视频游戏，但出现此错误：

```
 File "/home/matt/Smoking-Games/sg-project00/project00/GameModel.py", line 15, in Update 
   self.imageDef=self.values[2]
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

编码：

```
import pygame,components
from pygame.locals import *

class Player(components.Entity):

    def __init__(self,images):
        components.Entity.__init__(self,images)
        self.values=[]

    def Update(self,events,background):
        move=components.MoveFunctions()
        self.values=move.CompleteMove(events)
        self.imageDef=self.values[2]
        self.isMoving=self.values[3]

    def Animation(self,time):
        if(self.isMoving and time==1):
            self.pos+=1
            if (self.pos>(len(self.anim[self.imageDef])-1)):
                self.pos=0
        self.image=self.anim[self.imageDef][self.pos] 
```

你能向我解释这个错误是什么意思以及为什么会发生这样我就可以修复它吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-17T04:32:56.543

布伦巴恩是正确的。该错误意味着您尝试执行类似`None[5]`. 在回溯中，它说`self.imageDef=self.values[2]`，这意味着你`self.values`是`None`。

您应该检查所有更新的功能，`self.values`并确保您考虑了所有极端情况。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T09:57:14.103

`move.CompleteMove()` does not return a value (perhaps it just prints something). Any method that does not return a value returns `None`, and you have assigned `None` to `self.values`.

Here is an example of this:

```
>>> def hello(x):
...    print x*2
...
>>> hello('world')
worldworld
>>> y = hello('world')
worldworld
>>> y
>>> 
```

You'll note `y` doesn't print anything, because its `None` (the only value that doesn't print anything on the interactive prompt).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:53:53.033

您在类中使用的函数`move.CompleteMove(events)`可能不包含`return`语句。所以没有返回`self.values`（==> None）。使用`return`in`move.CompleteMove(events)`返回您想要存储的任何内容`self.values`，它应该可以工作。希望这可以帮助。

# python - 如何编写一个函数，将列表中除最大值之外的所有元素复制到另一个列表中？蟒蛇 3.2

> ID：13907950
> 
> 赞同：0
> 
> 时间：2012-12-17T03:33:34.583
> 
> 标签：python, list, function, copy

我试图在练习测试中回答这个问题：

编写一个函数 def Elimination(x, y)，它将列表 x 中除最大值之外的所有元素复制到列表 y 中。

我能想到的最好的事情是：

```
def eliminate(x, y):
    print(x)
    y = x
    big = max(y)
    y.remove(big)
    print(y)
def main():
    x = [1, 3, 5, 6, 7, 9]
    y = [0]
    eliminate(x, y)
main() 
```

如果在我的期末考试中出现这样的问题，我认为这不会解决问题，而且我很确定我不应该用它编写 main 函数，而只是消除一个。那么我该如何回答呢？（请记住，这是一门入门课程，我不应该使用更高级的编码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:53:27.237

我可能会这样做：

```
def eliminate(x, y):
    largest = max(x)
    y[:] = [elem for elem in x if elem != largest] 
```

这将填充`y`所有元素，`x`除了最大的元素。例如：

```
>>> x = [1,2,3]
>>> y = []
>>> eliminate(x, y)
>>> y
[1, 2]
>>> x = [7,10,10,3,4]
>>> eliminate(x, y)
>>> y
[7, 3, 4] 
```

这假设通过“副本”问题要求`y`替换的内容。如果要将 的非最大元素`x`附加到`y`，则可以`y.extend`改用。

请注意，您的版本不处理存在多个具有最大值的元素（例如`[1,2,2]`）的情况——`.remove()`只删除一个参数，而不是全部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:38:25.027

为了在列表中找到最大的数字，您需要遍历该列表并在此过程中跟踪最大元素。有几种方法可以实现这一点。

所以这段代码回答了这个问题：

```
y.extend([n for n in x if n != max(x)]) 
```

但我担心它可能无法解决您的问题，即了解它的工作原理和原因。这是将代码扩展为仅使用 for 循环和 if 语句的非常直接的方式。

```
def trasfer_all_but_largest(transfer_from_list, transfer_to_list):

    current_index = 0
    index_of_current_largest_element = 0
    largest_element_so_far = None

    for element in transfer_from_list:
        if current_index == 0:
            largest_element_so_far = element
        else:
            if element > largest_element_so_far:
                largest_element_so_far = element
                index_of_current_largest_element = current_index
        current_index = current_index + 1

    index_of_largest_element = index_of_current_largest_element

    current_index = 0 # reset our index counter

    for element in transfer_from_list:
        if current_index == index_of_largest_element:
            continue # continue means keep going through the list
        else:
            transfer_to_list = transfer_to_list + [element]

        current_index = current_index + 1

    return transfer_to_list

list_with_large_number = [1, 2, 100000]
list_were_transfering_to = [40, 50]

answer_list = trasfer_all_but_largest(list_with_large_number, list_were_transfering_to)
print(answer_list) 
```

# cassandra - Cassandra 行键以

> ID：13907954
> 
> 赞同：0
> 
> 时间：2012-12-17T03:33:55.247
> 
> 标签：cassandra, hector, astyanax

> **可能重复：**
> [Cassandra 查询键的一部分](https://stackoverflow.com/questions/13857471/cassandra-querying-on-a-part-of-a-key)

我有一个 cassandra 列族，它有一个像 2012-09-30-05-42-00:30:5856869 这样的行键

我需要查询一些类似的东西

select * from cf where key like %2012-09-30-05-42-00:30:% 目前我正在使用 Astyanax ，在 astyanax 中也是如此。如果不是，哪个实现会支持它。

# rss - 使用来自不同网站的 RSS 自动在您的网站上发布他们的帖子？

> ID：13907956
> 
> 赞同：-2
> 
> 时间：2012-12-17T03:34:22.853
> 
> 标签：rss, publish

有什么方法可以让您使用网站上的 RSS 并自动在您的网站上发布他们的帖子？或者类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T03:38:09.053

试试： http: [//pipes.yahoo.com/pipes/](http://pipes.yahoo.com/pipes/)

这项服务使您可以很容易地完成您的要求。

# python - Python字符串替换字典：跳过键和离开格式化程序

> ID：13907960
> 
> 赞同：0
> 
> 时间：2012-12-17T03:34:53.010
> 
> 标签：python, string, string-formatting, string-substitution

我是一个需要几个值的字符串替代品，我想知道是否可以跳过一个键并将其留在那里，而不是用空格填充它？

```
s='%(name)s has a %(animal)s that is %(animal_age)s years old'

#skip the animal value
s = s % {'name': 'Dolly', 'animal': 'bird'}#, 'animal_age': 10}

print s 
```

### 预期输出：

```
Dolly has a bird that is %(animal_age)s years old 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T04:40:17.693

您可以`%%`在字符串中使用两个来跳过字符串格式。：

```
In [169]: s='%(name)s has a %(animal)s that is %%(animal_age)s years old'

In [170]: s % {'name': 'Dolly', 'animal': 'bird', 'animal_age': 10}

Out[170]: 'Dolly has a bird that is %(animal_age)s years old' 
```

或使用`string.format()`：

```
In [172]: s='{name} has a {animal} that is %(animal_age)s years old'

In [173]: dic = {'animal': 'bird', 'animal_age': 10, 'name': 'Dolly'}

In [174]: s.format(**dic)
Out[174]: 'Dolly has a bird that is %(animal_age)s years old' 
```

# objective-c - 何时使用 self.propertyname 和 _propertyname

> ID：13907964
> 
> 赞同：0
> 
> 时间：2012-12-17T03:36:25.433
> 
> 标签：objective-c, properties

> **可能重复：**
> [可可objective-c 类中变量前面的下划线如何工作？](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)
> [self.ivar 和 ivar 之间的区别？](https://stackoverflow.com/questions/4142177/difference-between-self-ivar-and-ivar)
> [带下划线前缀的综合属性和变量：这是什么意思？](https://stackoverflow.com/questions/6049269/synthesized-property-and-variable-with-underscore-prefix-what-does-this-mean)

要在对象 c 中使用属性，我有两种选择，我应该使用哪一种？

选择1：self.property = xxxx；

选择2：_property = xxx

例如：

```
//.h file

@interface ViewController : UIViewController

    @property (retain, nonatomic) NSArray *myArray;

@end

//.m file

@interfaceViewController ()

@end

@implementation ViewController

- (void)doing {

    _myArray = [[NSArray alloc] init]; //choice one
    self.myArray = [[NSArray alloc] init]; //choice two
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:50:29.593

你正在做两件完全不同的事情。

```
_myVar = [[NSArray alloc] init]; 
```

在上面的代码中，您直接访问变量。

```
self.myVar = [[NSArray alloc] init]; 
```

在上面的代码中，您调用的是 setter 方法，相当于

```
[self setMyVar:[[NSArray alloc] init]]; 
```

通常 setter（连同 getter）提供内存管理和同步功能，因此使用它更可取且通常更安全，而不是直接访问 ivar。

下划线语法只是一个约定，不要混淆 ivar 和属性，因为一个典型的错误是错误地使用它并意外使用`myVar`代替`self.myVar`. 使用下划线语法是为了阻止这种不良做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:50:12.760

我知道这个问题很常见，但无论如何我都会回答。

下划线语法访问支持属性的实例变量，而点语法只是附属方法的包装器：

```
object.property == [object property]
object.property = x == [object setProperty:x] 
```

因此，您应该尽可能使用点语法或附件方法，以确保一切都得到照顾。例如非 ARC 应用程序中的垃圾收集。您必须将实例变量用于初始化、解除分配或自定义附件方法等事情，但这些都是特殊情况。要获得详细的概述，请阅读 Objective-C 手册中关于属性的章节：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/ doc/uid/TP40011210-CH5-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW1)

# python - Python，wxPython 错误

> ID：13907966
> 
> 赞同：0
> 
> 时间：2012-12-17T03:37:34.233
> 
> 标签：python, wxpython, pywin

任何人都可以帮我弄清楚我做错了什么我对GUI几乎没有经验。代码：

```
import wx
    class bucky(wx.Frame):
            #constructor
        def __init__(self,parent,id):
            wx.Frame.__init__(self,parent,id,'Frame aka window',size=(300,200))
            panel=wx.Panel(self)
            button=wx.Button(panel,label="exit",pos=(130,10),size=(60,60))
            self.Bind(wx.EVT_BUTTON, self.closebutton,button)
            self.Bind(wx.EVT_CLOSE, self.closewindow)
        def closebutton(self,event):
            self.close(True)
        def closewindow(self,event):
            self.Destroy()
    if __name__=='__main__':
        app=wx.PySimpleApp()
        frame=bucky(parent=None,id=-1)
        frame.Show()
        app.MainLoop() 
```

错误：

```
PyNoAppError: The wx.App object must be created first!

win32ui.error: Error in Command Message handler for command ID 36864, Code 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:12:25.163

此代码在带有 wxPython 2.8.12.1 和 Python 2.6.6 的 Windows 7 上为我运行。您使用的是什么操作系统和 Python 版本？当我在 IDLE 中运行我的代码时，我不时看到此错误消息。如果你正在这样做，那就不要这样做。Tkinter 的主循环（这是 IDLE 的组成部分）会干扰其他 GUI 工具包的主循环​​。

closebutton 方法存在一个问题，它调用了一个不存在的“关闭”方法。

# testing - sbt 不识别测试

> ID：13907967
> 
> 赞同：2
> 
> 时间：2012-12-17T03:37:43.050
> 
> 标签：testing, sbt, junit4

我很难让 sbt（版本 0.12.1）识别 src/test/scala 中的任何测试。

我已经尝试过 JUnit 样式测试和 scalatest 样式测试，但没有 avial

让事情变得简单

*   我已将测试移至根包 (src/test/scala)

*   我在 build.sbt libraryDependencies ++= List( "org.scalatest" %% "scalatest" % "1.8" % "test", "com.novocode" % "junit-接口"%"0.8"%"测试->默认")

*   我使测试尽可能简单：

*   最大规模的例子

    导入 org.scalatest.FunSuite 导入 scala.collection.mutable.Stack

    类 ExampleSuite 扩展 FunSuite {

    test("数学仍然有效") { assert(1+1 == 2) } }

*   junit 测试示例：import org.junit.Assert._ import org.junit.Test

    类简单测试 {

    @Test def testPass() { assertEquals(1+1, 2) }

    }

*   我的测试结构是：src/test/scala

    ├── FunSuiteExample.scala

    └── SimpleTest.scala

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T22:31:53.837

根据以下说明：

[https://github.com/szeiger/junit-interface](https://github.com/szeiger/junit-interface)

修改过的`build.sbt`

*   从`"junit" % "junit" % "4.10" % "test"`build.sbt中删除
*   添加`"com.novocode" % "junit-interface" % "0.11" % "test"`

将测试放在 src/test/scala

```
import org.junit._
import org.junit.Assert._

class SimpleTeset {

  @Test
  def testTrue() {
    assertEquals(1+1, 2)
  }
} 
```

# html - CSS IE 兼容性问题

> ID：13907975
> 
> 赞同：0
> 
> 时间：2012-12-17T03:39:08.290
> 
> 标签：html, css, internet-explorer

我是一般编程的新手，尤其是 CSS。我目前正在为火车爱好者开发一个新网站。我是从头开始做的，这样我就可以在 HTML、CSS、PHP、MySQL 等方面获得一些经验。

无论如何，我遇到了一个问题。我在 Google 上搜索过解决方案，但一直没有找到。我的 CSS 似乎与市场上的所有网络浏览器都兼容，除了 Internet Explorer。除非您自己检查一下，否则我真的不知道如何解释这个问题。好像我的标题和左侧菜单是唯一样式化的元素，但我的内容和右侧菜单被推到右侧并且没有样式化。分别在 IE 和其他浏览器中查看[此链接。](http://www.railsightings.com/)你会看到区别。

所以我的问题是：我该如何解决？我知道它一定是一个 IE 错误，因为它适用于所有其他浏览器，但我不知道它可能是什么！如果我需要发布我的 CSS 脚本，请告诉我。提前感谢你们可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:10:42.750

在您的样式表中，您有一个多余`width:100%`的 div 元素（块级元素自然具有填充其容器的宽度）。IE 将此 100% 解释为`#container`. `width:100%`您可以通过在 styles.css 的第 119 行删除它来纠正 IE7 中的样式问题（理论上） 。我认为这是由 IE7 的解释方式造成的`display:inline-block`

但是，我必须警告您，确保与 IE 7 及更低版本的兼容性是一件令人头疼的事情，而且完全不值得。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:43:16.800

你用哪个版本的IE来测试它？我在 Firefox、IE9、8 和 7 上检查过。在 IE8 和 IE9 上看起来不错。虽然 7 的问题很少。您可以使用条件注释来修复 7 中的问题。专门为 IE7 创建一个新的 css 文件，然后在标题中使用如下代码

```
<!--[if IE 7]>
<link rel="stylesheet" href="css/ie7.css" type="text/css" />
<![endif]--> 
```

现在玩 ie7.css 直到事情看起来更好。这种方法的好处是您可以在不干扰其他浏览器呈现的情况下修复 IE 中的问题。您还可以使用“ietester”和调试栏来确定究竟是什么错误。我现在无法找到确切的链接，但谷歌应该提供帮助。

您可以在此处阅读有关条件评论的更多信息[http://www.quirksmode.org/css/condcom.html](http://www.quirksmode.org/css/condcom.html)

# android - 删除sqlite数据库中的行

> ID：13907976
> 
> 赞同：0
> 
> 时间：2012-12-17T03:39:11.677
> 
> 标签：android, sqlite, delete-row

我有一个存储不同的多个用户数据的 sqlite 数据库。我想问一下如何删除数据库中的特定行？我不太熟悉数据库类型的东西。目前我有一个删除功能，用于删除数据库中的用户信息之一。但我不确定如何删除整行。（我的数据库中有 emailid、名字和姓氏和 ssid。）

```
 public void delete_user(String ssid) {
    Log.i(TAG,"delete_user ssid["+ssid+"]...");

    String[] valuesWhere = new String[1];
    valuesWhere[0] = ssid;

    this.getWritableDatabase().delete("user", "ssid=?", valuesWhere);
} 
```

我应该声明我想删除的每个值吗？我想知道是否有另一种方法可以删除特定的数据行。任何意见将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:45:46.267

> 我应该声明我想删除的每个值吗？我想知道是否有另一种方法可以删除特定的数据行。

您当前的代码将删除与`ssid`传递给匹配的每一行`delete_user(ssid)`。如果`ssid`是唯一列（没有重复值），它最多会删除一行。

> 但我不确定如何删除整行。

了解`SQLiteDatabase#delete()`永远不会部分删除一行。

# java - 创建对象时使用带有“new”的变量

> ID：13907977
> 
> 赞同：13
> 
> 时间：2012-12-17T03:39:13.657
> 
> 标签：java

我正在设计一个虚拟水族馆。我有一个类：我继承的鱼以创建不同物种的类。用户可以在组合框中选择物种，然后单击按钮将鱼放入鱼缸。我使用以下代码来创建鱼：

```
 switch(s){
        case "Keegan" :
            stock.add(new Keegan(this, x,y));
            break;
        case "GoldenBarb" :
            stock.add(new GoldenBarb(this, x,y)); 
```

“stock”是一个 LinkedList，“s”是在 Jcombobox 中选择的字符串。就目前而言，当我添加一堆不同的物种时，我将不得不创建一个长开关。我希望代码看起来像：

```
stock.add(new s(this,x,y)); 
```

并省去开关，这样我所要做的就是创建类并将其名称添加到组合框中并让它工作。有没有办法这样做？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T04:05:50.963

你想使用一堆工厂对象，存储在`Map`你在`switch`.

**这些是您应该已经拥有的各种鱼的类。**

```
abstract class FishBase {}

class Keegan extends FishBase {
    Keegan(Object _this, int x, int y) {
        // ...
    }
}
class GoldenBarb extends FishBase {
    GoldenBarb(Object _this, int x, int y) {
        // ...
    }
} 
```

**所有鱼类工厂的界面。**鱼工厂代表了一种制造某种鱼的方法。你没有提到构造函数签名是什么所以我只是选择了一些类型。

```
interface IFishFactory {
    FishBase newFish(Object _this, int x, int y);
} 
```

**为每种鱼种建立一个工厂。**这些显然不需要是匿名类，我正在使用它们来减少混乱。

```
Map<String, IFishFactory> fishFactories = new HashMap<>();

fishFactories.put("Keegan", new IFishFactory() {
    public FishBase newFish(Object _this, int x, int y) {
        return new Keegan(_this, x, y);
    }
});

fishFactories.put("GoldenBarb", new IFishFactory() {
    public FishBase newFish(Object _this, int x, int y) {
        return new GoldenBarb(_this, x, y);
    }
}); 
```

**然后只需`Map`使用您已有的字符串从工厂中选择工厂。**您可能想要检查给定名称的工厂是否存在。

```
stock.add(fishFactories.get(s).newFish(this, x, y)); 
```

* * *

现在，如果您的所有鱼类都具有**完全相同的**构造函数签名，您可以创建一个可以使用反射处理所有鱼的工厂类，并摆脱一些样板。

```
class ReflectionFishFactory implements IFishFactory {
    Constructor<? extends FishBase> fishCtor;
    public ReflectionFishFactory(Class<? extends FishBase> fishClass) 
            throws NoSuchMethodException {

        // Find the constructor with the parameters (Object, int, int)
        fishCtor = fishClass.getConstructor(Object.class, 
                                            Integer.TYPE, 
                                            Integer.TYPE);
    }

    @Override
    public FishBase newFish(Object _this, int x, int y) {
        try {
            return fishCtor.newInstance(_this, x, y);
        } catch (InstantiationException
                | InvocationTargetException
                | IllegalAccessException e) {
            // this is terrible error handling
            throw new RuntimeException(e);
        }
    }
} 
```

**然后为每个适用的子类注册它。**

```
for (Class<? extends FishBase> fishClass : 
        Arrays.asList(Keegan.class,GoldenBarb.class)) {
    fishFactories.put(fishClass.getSimpleName(), 
                      new ReflectionFishFactory(fishClass));
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T03:45:49.050

我认为[反射](http://en.wikipedia.org/wiki/Reflection_%28computer_programming%29#Java)可能是您正在寻找的。这使您可以避免 switch 语句，这是您所要求的。

反射（除其他外）允许您仅使用字符串运行方法。所以在Java中，你通常会调用这样的方法：

```
new Foo().hello(); 
```

使用反射，您可以使用字符串来调用方法，如下所示：

```
Class<?> clazz = Class.forName("Foo");
clazz.getMethod("hello").invoke(clazz.newInstance()); 
```

[Java 构造函数反射示例](http://tutorials.jenkov.com/java-reflection/constructors.html)。

* * *

关于工厂模式（现在参考其他答案），据我了解，这只是封装 switch 语句（或您选择使用的任何方法）。工厂模式本身并不是一种避免 switch 语句的方法。工厂模式是一件好事，但不是您所要求的。（在任何情况下，您都可能希望使用工厂模式）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-17T04:21:32.700

让我们一步一步来，看看你想走多远。

首先，你可以在FishFactory中抽象出fish的创建，这样你原来做switch语句的地方就可以简单的改成

```
stock.add(fishFactory.createFish(s, x, y)); 
```

然后开关盒去工厂：

```
public class SimpleFishFactory {
    @Override
    public Fish createFish(String fishType, int x, int y) {
        switch(s){
            case "Keegan" :
                return new Keegan(this, x,y);
                break;
            case "GoldenBarb" :
                return new GoldenBarb(this, x,y);
            //....
         }
    }
} 
```

（我假设您所有的鱼都具有与 Fish 相同的接口/基类）

如果想让创作看起来更优雅，有两种常见的方式可供选择：

**反思** 理念很简单。首先设置一个字符串与鱼类（或构造函数）的查找表，每个`createFish()`都通过反射创建鱼的新实例

```
public class ReflectionFishFactory {

    private Map<String, Class<? extends Fish>> fishClasses = new HashMap<...>();

    public ReflectionFishFactory() {
        //set up fishClasses with name vs corresponding classes.
        // you may read it from file, or hard coded or whatever

        fishClasses.put("Keegan", Keegan.class);
        fishClasses.put("GoldenBarb", GoldenBarb.class);
    }

    @Override
    public Fish createFish(String fishType, int x, int y) {
        Class<?> fishClass = fishClasses.get(fishType);
        // use reflection to create new instance of fish by 
        // by using fishClass
    }
} 
```

**Prototype Pattern** 出于某种原因，您可能不想使用反射（可能是由于反射速度慢，或者不同的鱼有非常不同的创建方式），您可以查看 GoF 的 Prototype Pattern。

```
public class PrototypeFishFactory {

    private Map<String, Fish> fishes = new HashMap<...>();

    public ReflectionFishFactory() {
        //set up fishClasses with name vs corresponding classes.
        // you may read it from file, or hard coded or whatever

        fishClasses.put("Keegan", new Keegan(....) );
        fishClasses.put("GoldenBarb", new GoldenBarb(....) );
    }

    @Override
    public Fish createFish(String fishType, int x, int y) {
        return fishes.get(fishType).cloneNewInstance(x, y);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T04:11:17.907

枚举和工厂策略的组合可用于一种简单的、类型安全的从字符串创建对象实例的方法，并用于提供一组字符串（或数组）。

举个例子——

```
import java.util.HashMap;
import java.util.Map;

public enum FishType {

    BLUE_FISH(BlueFish.class, new FactoryStrategy<BlueFish>(){
        public BlueFish createFish(int x, int y) {
            return new BlueFish(x, y);
        }}),

    RED_FISH(RedFish.class, new FactoryStrategy<RedFish>(){
        public RedFish createFish(int x, int y) {
            //an example of the increased flexibility of the factory pattern - different types can have different constructors, etc.
            RedFish fish = new RedFish();
            fish.setX(x);
            fish.setY(y);
            fish.init();
            return fish;
        }});

    private static final Map<Class<? extends Fish>, FactoryStrategy> FACTORY_STRATEGY_MAP = new HashMap<Class<? extends Fish>, FactoryStrategy>();
    private static final String[] NAMES;

    private FactoryStrategy factoryStrategy;
    private Class<? extends Fish> fishClass;

    static {
        FishType[] types = FishType.values();
        int numberOfTypes = types.length;
        NAMES = new String[numberOfTypes];
        for (int i = 0; i < numberOfTypes; i++) {
            FishType type = types[i];
            FACTORY_STRATEGY_MAP.put(type.fishClass, type.factoryStrategy);
            NAMES[i] = type.name();
        }
    }

    <F extends Fish> FishType(Class<F> fishClass, FactoryStrategy<F> factoryStrategy) {
        this.fishClass = fishClass;
        this.factoryStrategy = factoryStrategy;
    }

    public Fish create(int x, int y) {
        return factoryStrategy.createFish(x, y);
    }

    public Class<? extends Fish> getFishClass() {
        return fishClass;
    }

    public interface FactoryStrategy<F extends Fish> {
        F createFish(int x, int y);
    }

    @SuppressWarnings("unchecked")
    public static <F extends Fish> FactoryStrategy<F> getFactory(Class<F> fishClass) {
        return FACTORY_STRATEGY_MAP.get(fishClass);
    }

    public static String[] names() {
        return NAMES;
    }
} 
```

然后可以通过以下方式使用此枚举 -

```
Fish fish = FishType.valueOf("BLUE_FISH").create(0, 0); 
```

或者

```
Fish fish = FishType.RED_FISH.create(0, 0); 
```

或者，如果您需要知道创建的鱼的类型，您可以使用此调用 -

```
BlueFish fish = FishType.getFactory(BlueFish.class).createFish(0, 0); 
```

要填充菜单中的项目或出于任何其他原因获取所有鱼类类型，您可以使用 names() 方法 -

```
String[] names = FishType.names(); 
```

要添加新类型，唯一需要编辑的代码是添加一个新的枚举声明，例如

```
GREEN_FISH(GreenFish.class, new FactoryStrategy<GreenFish>(){
        public GreenFish createFish(int x, int y) {
            return new GreenFish(x, y);
        }}), 
```

它可能看起来有很多代码，但它已经编写好了，它提供了一个干净的 API 来从其他代码调用，它提供了很好的类型安全性，允许 fish 实现灵活地拥有他们想要的任何构造函数或构建器，它应该是快速执行的，并且它不需要您传递任意字符串值。

* * *

如果您真的想保持简洁，您还可以在枚举中使用模板方法 -

公共枚举 FishType {

```
BLUE_FISH(){
    public BlueFish create(int x, int y) {
        return new BlueFish(x, y);
    }
},

RED_FISH(){
    public RedFish create(int x, int y) {
        return new RedFish();
    }
};

public abstract <F extends Fish> F create(int x, int y); 
```

}

有了这个，您仍然可以获得许多相同的功能，例如

```
Fish fish = FishType.valueOf("BLUE_FISH").create(0, 0); 
```

和

```
Fish fish = FishType.RED_FISH.create(0, 0); 
```

乃至

```
RedFish fish = FishType.RED_FISH.create(0, 0); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T03:43:23.303

研究工厂设计模式。这基本上就是你在这里所做的，但如果你明确地使用它会更干净一点。

它并不总是一个巨大的 switch 语句。例如，您可能有一个动态加载程序集和/或类型的表，每个程序集都有一个名为“GetTypeName”的函数和另一个名为“CreateInstance”的函数。您可以将字符串传递给工厂对象，工厂对象将在表中查找该类型名并返回对该工厂对象的 CreateInstance 函数的结果。

不，这不是反思，早在 Java 出现之前人们就已经这样做了。例如，这就是 COM 的工作方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T19:16:41.390

反射似乎是解决这个问题的最佳解决方案，我很高兴在我的工具箱中拥有这种技术。这是有效的代码：

```
public void addFish(String s, int qt){
    try{
        Class<?> theClass = Class.forName("ftank." + s);
        Class[] ctorArgs = {ftank.FishTank.class};
        Constructor ctor = theClass.getDeclaredConstructor(ctorArgs);
        for(int i=0;i<qt;i++){stock.add((Fish)ctor.newInstance(this));}
    } catch (ClassNotFoundException e) {... 
```

我必须将包名称作为类字符串的一部分。我还必须公开构造函数。我无法在构造函数中使用 int 参数来实现这个解决方案，但我设法找到了一种使用它们的方法，无论如何它更干净。现在唯一的问题是，每次添加新种类的鱼时，我都必须更新 JComboBox 中使用的字符串数组。如果有人知道让 java 生成从给定基类继承的包中所有类的名称列表的方法，那将很有帮助。到目前为止，您的建议非常有帮助，我很感激。

# c++ - C++ 中 Mathematica 的 Range[] 函数等价于什么？

> ID：13907978
> 
> 赞同：8
> 
> 时间：2012-12-17T03:39:18.220
> 
> 标签：c++

*Mathematica*有一个名为的函数`Range[]`，它执行以下操作：

```
Range[0, 10]
Range[-10, 0] 
```

蚂蚁打印：

```
{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
{-10, -9, -8, -7, -6, -5, -4, -3, -2, -1, 0} 
```

C++有这样的功能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T03:44:21.737

标准库中没有，但来自`boost::range`：

```
#include <iostream>
#include <iterator>
#include <boost/range/irange.hpp>
#include <boost/range/algorithm/copy.hpp>

int main()
{
    boost::copy(boost::irange(0, 11), 
                std::ostream_iterator<int>(std::cout, " "));
} 
```

输出：0 1 2 3 4 5 6 7 8 9 10

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-17T03:43:22.560

似乎很容易创建一个。

```
std::vector<int> range(int from, int to) {
    std::vector<int> result;
    result.reserve(to-from+1);
    for (int i = from; i <= to; ++i) {
        result.push_back(i);
    }
    return result;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-17T04:07:08.363

为了完整起见，以下是使用 C++11 标准库和*lambdas*的方法：

```
vector<int> v;
int counter = -3;    // The initial value
generate_n(
    back_inserter(v) // Where to insert
,   10               // how many items
,   [&counter] () -> int { return counter++; }); 
```

这是一个[带有演示的 ideone 链接](http://ideone.com/qpZSn6)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T07:02:02.220

只有两个库提供**惰性**和**O(1)**内存数值范围：

*   [Boost irange](http://www.boost.org/doc/libs/1_52_0/libs/range/doc/html/range/reference/ranges/irange.html) - 只有积分；没有负步骤（？）；不能分配给其他容器。
*   [RO numeric_range](http://volnitsky.com/project/ro/#_numeric_range) - 需要 C++11

使用[SCC](http://volnitsky.com/project/scc) (C++ REPL) 和 RO：

```
scc 'range(0,10)'
{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10}

scc 'range(-10,0)'
{-10, -9, -8, -7, -6, -5, -4, -3, -2, -1, 0} 
```

# android - 如何防止手机上安装的APK应用被轻易提取

> ID：13907979
> 
> 赞同：9
> 
> 时间：2012-12-17T03:39:30.677
> 
> 标签：android, copy-protection, apk

*通过应用程序管理器（如Astro* ）很容易从手机中提取 apk 应用程序。

谷歌有一个基础保护已被放弃，取而代之的是更有效的许可证管理，但是旧的保护使得在 Google Play 市场之外的 apk 的不分青红皂白的份额更加复杂。

*LVL*有一个开源库，但我没有找到任何关于实现 GooglePlay 基础反 apk 复制保护的信息。

除了许可证管理保护之外，类似的解决方案也会很有用。

我已经看到一些应用程序仍然以与旧的 Google Play 保护相同的方式阻止 apk 复制。

是否有人知道反 apk-copy 的工作原理，或者是否有类似的开源保护库？

有人问这种操作应该是什么原因。

原因有很多：

*- 避免APK通过未经授权的渠道肆意传播*

*- 避免第一个简单地用 winzip 打开你的 APK 的菜鸟可以轻松提取所有资源（如 PNG 图像、按钮、纹理、数据库等）供他使用*

*-提高一般安全性*

附言

**我知道对于每一种保护，总会有一种解决方法来破坏它，但这并不意味着留下非常简单的方法来滥用你的工作总是最好的选择。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:14:15.383

我认为很难防止有人从设备中复制文件。但是你为什么要实现这个目标？如果您只是出于安全原因，还有其他一些方法。

基本上你可以采取 proguard 来掩盖代码。如果这还不够，我知道在 java 中有一种机制可以加密 .jar 文件并使用自定义 ClassLoader 来解密文件并加载类。

这也可以在android中使用。

1.  使用 c 和 jni 提供加密/解密 api。（反编译 .so 文件更复杂。）
2.  将核心打包到 jar 文件中。加密 jar 并将其放入 assets/.
3.  使用新的 DexClassLoader 替换默认的。尝试解密 .jar 文件并加载类。

# ios - 设备通知或数值变化，在其他设备中查找

> ID：13907981
> 
> 赞同：1
> 
> 时间：2012-12-17T03:39:40.520
> 
> 标签：ios, bluetooth, nsnotificationcenter, cfnetwork

我正在开发一些应用程序，它应该将我当前的设备值通知到特定区域内的其他设备中。假设我有应用程序，在其他 3 台设备上安装了相同的应用程序。当我在我的设备中更改某些内容时，应该在其他设备中通知。就像，我正在选择一个按钮，该按钮选择也应该在其他 3 台设备上。

是否可以不使用 Web 服务，iOS 中是否有任何特定的框架来执行此任务。其区域内的蓝牙搜索设备。它应该在房间内，没有任何互联网或无线网络。

谁能帮我找到解决方案。

谢谢，

# c++ - Xcode 中的 C++ 内存访问行为与 eclipse 不同

> ID：13907983
> 
> 赞同：0
> 
> 时间：2012-12-17T03:40:11.707
> 
> 标签：c++, ios

在编写本机 c++ 代码时，我看到相同的程序在 xcode(iOS) 中运行良好，但在 eclipse(android) 中崩溃。我可以找到问题代码，这是由于内存访问错误。我想知道为什么 xcode(iOS) 没有遇到同样的错误访问因此崩溃。

实际上我创建了一个类说“class_A”，它继承了其他类说class_B。稍后在代码中，我创建了相同的类实例指针并分配了函数 foo() 的返回对象（属于 class_B），该对象返回超类类型的对象，即 class_B。

代码片段...

```
class class_A : public class_B
{
public:

};

class_A *tempPart = (class_A *)class_A::foo("abc.png"); 

if(tempPart)
                {

                    -------------------
                   --------------------

 } 
```

现在，在访问 _tempPart 时，程序在 android (eclipse) 上崩溃，但是 xcode(iOS) 总是可以正常工作。我可以弄清楚，因为 fn foo() 返回了 class_B 类型的对象，因此我将一个超类（较小的对象）class_B 的对象分配给了继承的类（一个较大的对象）Class_A 的对象，因此它导致了错误的内存访问。

但我不明白为什么在 xcode(iOS) 上没有看到同样的问题。我是 xcode 和 c++ 的新手，所以请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:44:14.123

未定义的行为是未定义的。

访问无效内存之类的操作会导致 C++ 中出现未定义的行为。结果可能经常是崩溃，但 C++ 不保证这样的事情。相反，程序可能只是表现得很奇怪，甚至完全按照您的预期行事，而没有任何错误迹象。不同的实现可能会做不同的事情。

这里有一些信息可能有助于解释为什么 C++ 具有未定义的行为（与 Java 等语言相反，它们非常努力地排除未定义的行为）。

*每个 C 程序员都应该知道的关于未定义行为的知识*

*   [第1部分](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html)
*   [第2部分](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_14.html)
*   [第 3 部分](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_21.html)

* * *

从您的描述中还不能完全清楚到底出了什么问题。您说将较大的对象分配给较小的对象会导致错误的内存访问，但这不是 C++ 中的分配方式，并且示例代码无论如何都使用指针。以下代码完全合法且定义明确，例如：

```
struct B {};
struct D : B {
  int i;
  void foo() { i = 100; }
};

B b = D(); // works fine, does not overwrite anything outside b. Slicing occurs.

B *bar() {
  return new D;
}

D *d = (D*)bar(); // works fine because the dynamic type matches. 
```

出现问题的地方是：

```
B *baz() { return new B; }

D *d = (D*)baz(); // not okay, undefined behavior. Anything can happen now, later, or even before this point.
d->foo(); // might crash, might not. 
```

因此，假设这是您的程序正在执行的操作，Java 中的相同错误被明确定义为导致异常。在 Objective-C 中，消息传递机制将尝试在运行时为选择器找到一个实现，如果它没有找到任何东西，则会发生“无法识别的选择器”异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:49:16.833

正如@Bames53 所回答的，这是未定义的行为。一个快速的解决方法是制作`class_B::foo`一个模板函数并将其重写如下

```
template <class ReturnClassType>
ReturnClassType *foo(std::string str){ 
```

然后，您将其称为

```
class_A::foo<class_A>("abc.png"); 
```

如果您使用公共/受保护的函数来初始化返回的对象，这应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T03:51:35.720

您不能安全地将 B 向上转换为 A。B 没有 _useShader 成员。反之亦然：B* = A*，但不能 A* = B*。您可能想为 A 对象创建一个单独的工厂方法。

# javascript - 以编程方式在 jQuery Mobile 中添加导航栏元素

> ID：13907984
> 
> 赞同：0
> 
> 时间：2012-12-17T03:40:19.460
> 
> 标签：javascript, jquery-mobile, dynamic, toolbar, navbar

我可以使用以下代码片段在 jQuery 移动页面中创建一个 2 项导航栏：

```
<div id="nav-bar" data-role="navbar">
    <ul id="nav-list">
        <li><a id="link1" href="#">Nav 1</a></li>
        <li><a id="link2" href="#">Nav 2</a></li>
    </ul>
</div> 
```

我正在尝试使用以下代码的各种版本以编程方式添加第三个导航栏元素：

```
$("#nav-list").append("<li><a id='newElement' href='link3'>Nav 3</a></li>");
$("#nav-bar").navbar();
//$("#pageName").page();
//$("#pageName").trigger("create");
//$("#nav-list").listview("refresh"); 
```

当我执行此操作时，我看到“Nav 3”链接出现，但它不采用其他链接的 jQuery 移动格式。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:11:19.900

您应该在 JQM 的增强功能开始之前将您的`HTML`in 添加到处理程序中。`pagebeforecreate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:36:32.680

因为这个问题，我失去了理智。.navbar() 曾经在以前的版本中工作，由于某种原因不再起作用。

我做了一个函数，它的工作是添加一个新元素，然后重建导航栏。其中一部分取自其他人，因此我不能对这段代码（用于样式剥离的方法）承担全部责任。

这是工作示例：http: [//jsfiddle.net/Gajotres/V6nHp/](http://jsfiddle.net/Gajotres/V6nHp/)

这是使用的一种方法：

```
var navbarHandler = {
    addNewNavBarElement:function(navBarID, newElementID, newElementText) {
        var navbar = $("#" + navBarID);

        var li = $("<li></li>");        
        var a  = $("<a></a>");
        a.attr("id", newElementID).text(newElementText);
        li.append(a);

        navbar = navbarHandler.clearNavBarStyle(navbar);

        navbar.navbar("destroy");
        li.appendTo($("#" + navBarID + " ul"));
        navbar.navbar();
    },
    clearNavBarStyle:function(navbar){
        navbar.find("*").andSelf().each(function(){
            $(this).removeClass(function(i, cn){
                var matches = cn.match (/ui-[\w\-]+/g) || [];
                return (matches.join (' '));
            });
            if ($(this).attr("class") == "") {
                $(this).removeAttr("class");
            }
        });
        return navbar;   
    }
} 
```

# mysql - MySQL ALBUM <- ALBUM_PHOTO -> PHOTO 数据库模型，带触发器的外键，谁是第一个？

> ID：13907986
> 
> 赞同：0
> 
> 时间：2012-12-17T03:40:39.107
> 
> 标签：mysql, triggers

我试图用 MySQL创建一个`ALBUM`<- `ALBUM_PHOTO`->数据库模型。`PHOTO`

当然，我想同步更新这 3 个表，比如当我 insert into 时`ALBUM_PHOTO`，也插入到`ALBUM`并`PHOTO`具有相应的值。但是当我添加触发器时，它们的顺序让我感到困惑，最后我得到了这个方法，如下所示：

```
-- --------------------------------------------------------

--
-- TABLE `user_album`
--

CREATE TABLE IF NOT EXISTS `user_album` (
  `album_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `album_name` varchar(45) NOT NULL,
  `cover_id` int(11) NOT NULL,
  `numbers_of_photo` int(11) NOT NULL,
  `album_desc` varchar(45) DEFAULT NULL,
  `album_path` varchar(45) DEFAULT NULL,
  `addtime` datetime NOT NULL,
  PRIMARY KEY (`album_id`,`user_id`),
  KEY `fk_album_user_id_idx` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- TRIGGER `user_album`
--
DROP TRIGGER IF EXISTS `tg_album_insert`;
DELIMITER //
CREATE TRIGGER `tg_album_insert` AFTER INSERT ON `user_album`
 FOR EACH ROW BEGIN
UPDATE USER_ALBUM SET NUMBERS_OF_PHOTO = 0
WHERE ALBUM_ID = NEW.ALBUM_ID;
END
//
DELIMITER ;
DROP TRIGGER IF EXISTS `tg_album_update_then_delete`;
DELIMITER //
CREATE TRIGGER `tg_album_update_then_delete` AFTER UPDATE ON `user_album`
 FOR EACH ROW BEGIN
DELETE FROM USER_ALBUM
WHERE ALBUM_ID = NEW.ALBUM_ID AND NEW.NUMBERS_OF_PHOTO <= 0;
END
//
DELIMITER ;

-- --------------------------------------------------------

--
-- TABLE `user_photo`
--

CREATE TABLE IF NOT EXISTS `user_photo` (
  `photo_id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `thumbnail_id` int(11) NOT NULL,
  `photo_name` varchar(45) DEFAULT NULL,
  `addtime` datetime NOT NULL,
  `photo_path` varchar(45) NOT NULL,
  PRIMARY KEY (`photo_id`),
  KEY `fk_photo_user_id_idx` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

-- --------------------------------------------------------

--
-- TABLE `user_album_photo`
--

CREATE TABLE IF NOT EXISTS `user_album_photo` (
  `photo_id` int(11) NOT NULL AUTO_INCREMENT,
  `album_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `photo_name` varchar(45) DEFAULT NULL,
  `desc` varchar(45) DEFAULT NULL,
  `tag` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`photo_id`),
  KEY `fk_album_photo_photo_id_idx` (`photo_id`),
  KEY `fk_album_photo_album_id_idx` (`album_id`),
  KEY `fk_album_photo_user_id_idx` (`user_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

--
-- TRIGGER `user_album_photo`
--
DROP TRIGGER IF EXISTS `tg_album_photo_delete`; 
DELIMITER //
CREATE TRIGGER `tg_album_photo_delete` AFTER DELETE ON `user_album_photo`
 FOR EACH ROW BEGIN
DELETE FROM USER_PHOTO WHERE PHOTO_ID = OLD.PHOTO_ID;
UPDATE USER_ALBUM SET NUMBERS_OF_PHOTO = NUMBERS_OF_PHOTO-1
WHERE ALBUM_ID=OLD.ALBUM_ID;
END
//
DELIMITER ;
DROP TRIGGER IF EXISTS `tg_album_photo_insert`;
DELIMITER //
CREATE TRIGGER `tg_album_photo_insert` AFTER INSERT ON `user_album_photo`
 FOR EACH ROW BEGIN
IF NOT EXISTS (SELECT * FROM `user_album` WHERE ALBUM_ID = NEW.ALBUM_ID) THEN
INSERT INTO USER_ALBUM VALUES(NEW.ALBUM_ID, UEW.USER_ID);
ELSE 
UPDATE USER_ALBUM SET NUMBERS_OF_PHOTO=NUMBERS_OF_PHOTO+1
WHERE ALBUM_ID = NEW.ALBUM_ID;
END IF;
INSERT INTO USER_PHOTO VALUES(NEW.PHOTO_ID, NEW.USER_ID);
END
//
DELIMITER ; 
```

但是现在的问题是，我在TABLE中添加了外键约束，但是在插入记录时，当其他2个表中没有相应`USER_ALBUM_PHOTO`的记录时，首先插入它。`USER_ALBUM_PHOTO`

那么，我是否需要将约束添加到其他 2 个表中，而不是`USER_ALBUM_PHOTO`像`PHOTO`>- `ALBUM_PHOTO`<-一样`ALBUM`？

或者必须有某事。我的触发器错了。

谢谢！

# wpf - 为什么调用 PictureDecoder.DecodeJpeg() 需要在主 UI 线程中？

> ID：13907988
> 
> 赞同：0
> 
> 时间：2012-12-17T03:41:21.457
> 
> 标签：wpf, wpf-controls

我想调用 PictureDecoder.DecodeJpeg() 来解码图像流，但似乎我必须在主 UI 线程中调用它，否则它会引发“无效的跨线程访问”。例外。

```
Stream imageStream = serivce.GetPicture();
WriteableBitmap bitmap = PictureDecoder.DecodeJpeg(imageStream);
... 
```

我必须将它移动到 Dispatcher 主体，如下所示，在这里我认为我的代码中没有涉及 UI 控件，这就是为什么？

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
{
    Stream imageStream = serivce.GetPicture();
    WriteableBitmap bitmap = PictureDecoder.DecodeJpeg(imageStream);
    ...
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:26:22.267

`DispatcherObject`由于在类层次结构中，几乎所有与图像相关的事情都应该在 UI 线程中完成。这是 Silverlight 框架设计的问题。可能人们没有时间正确移植 WPF。

# ios - RestKit 0.2 连接到无效的 HTTPS 安全证书

> ID：13907990
> 
> 赞同：3
> 
> 时间：2012-12-17T03:41:44.637
> 
> 标签：ios, restkit, restkit-0.20

在 RestKit 0.2 中，如何允许我的应用连接到具有无效 https 安全证书的服务器？从 AFNetworking 文档看来，我所要做的就是 #define _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 。但是，我已将该命令添加到我的 pch 文件、Build Settings > Preprocessor Macros 以及我的 App Delegate 中。所有这些都不允许连接。有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T17:34:58.050

似乎接受无效证书的唯一方法是转到 RestKit 子项目，转到 Build Settings > Preprocessor Macros 并添加值 _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 。然后，您需要清理您的项目。

我猜是因为 RestKit 子项目包含 AFNetworking 某种预编译正在进行，在您的主项目中无法逆转。因此，如果您在 RestKit 构建设置中有标志，RestKit 将在支持无效证书的情况下进行编译。否则，默认情况下不会。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-19T01:27:45.363

选择 Pods 项目 > Build Settings > Preprocessor Macros 并将 _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 添加到 Debug 条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-12T10:27:30.520

如果您使用 Pod，请确保将 _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 添加到 AFNetworking 子项目中，而不是 RestKit。此外，您可能需要在 .plist 文件中修复 NSAppTransportSecurity 设置

# javascript - 选择排序在 javascript 中不起作用

> ID：13907992
> 
> 赞同：0
> 
> 时间：2012-12-17T03:42:16.933
> 
> 标签：javascript

我正在尝试对 javascript 使用选择排序，但它似乎不起作用，有人可以帮助我吗？我创建一个函数来对数组进行排序，然后从文本框中获取值，并将其存储在名为 inputString 的数组中，然后用逗号分割数组，并将其存储在名为 inputNumbers 的数组中 如果在我的文本框中不存在数字，将显示错误，否则显示排序值。

```
function sortNow(form) {
    var nanExists = false;
    var inputString = document.getElementById("numberID").value;
    var inputNumbers = inputString.split(",");
    for (var a = 0; a < inputNumbers.length; a++) {
        inputNumbers[a] = parseInt(inputNumbers[a], 10);
        if (isNaN(inputNumbers[a])) {
            nanExists = true;
            break;
        }
    }

    inputNumbers = selectionSort(inputNumbers); //sort the array inputNumbers

    if (nanExists)
        form.answers.value = "Invalid Input";
    else
    {
        for(var b=0; b < inputNumbers.length; b++)
        {
            form.answers.value += inputNumbers[b];
        }
    }
    }
/* function to sort an array */
    function selectionSort(inputArray) {
    for(var i=0; i<inputArray.length; i++)
    {
        var currentMin = inputArray[i];
        var currentMinIndex = i;    
        for(var j=i+1; j<inputArray.length; j++)
        {
            if(currentMin > inputArray[j])
            {
                currentMin = inputArray[j];
                currentMinIndex = j;
            }
            if(currentMinIndex != i)
            {
                inputArray[currentMinIndex] = inputArray[i];
                inputArray[i] = currentMin;
            }
        }
    }
    return inputArray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T04:41:00.390

在您的代码中，请将以下代码段从内循环 (j) 移动到外循环 (i)。

```
 if(currentMinIndex != i)
        {
            inputArray[currentMinIndex] = inputArray[i];
            inputArray[i] = currentMin;
        } 
```

查看[演示](http://jsbin.com/ipuhiy/4/watch)

请像这样对 inputArray 进行排序：

```
inputArray.sort(function(a,b) {
  return (a > b) ? 1 : ((a == b) ? 0 : -1);
}); 
```

您需要为 Array.sort 提供自定义排序函数，因为 Array.sort() 根据每个元素的字符串转换按字典顺序（按字典顺序）对数组进行排序。

[在此处](http://jsbin.com/ipuhiy/3/watch)查看工作演示

阅读[MDN:Array.sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)

# c# - 为什么禁用的按钮可以点击？

> ID：13907996
> 
> 赞同：3
> 
> 时间：2012-12-17T03:43:20.557
> 
> 标签：c#, wpf, button, mouseevent

本例使用 C# WPF。我想在单击按钮后立即禁用它，以防止在短时间内连续单击两次。我禁用了按钮，`OnClick_Event`但仍然可以点击。

部分来源如下。

```
private void Button_Click_UpdateBurndownChart(object sender, RoutedEventArgs e)
{
   if(threadNotWorking)
   {
      updateButton.IsEnabled = false;
      startWorkThread();
   }
}

private void startWorkThread()
{
     ... ...
    //after finish required process
    updateButton.IsEnabled = true;
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:55:39.117

您可能想要使用调度程序，可能存在线程问题（在单独线程上运行的回调函数并尝试访问在另一个线程上运行的 ui）。尝试这个 。.

```
updateButton.Dispatcher.BeginInvoke(
    new ThreadStart(() => updateButton.IsEnabled = false), 
    System.Windows.Threading.DispatcherPriority.Input, null); 
```

代替

```
updateButton.IsEnabled = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:39:27.677

如果您改为更改事件的顺序，会发生什么情况：

```
 updateButton.IsEnabled = false;
  startWorkThread(); 
```

至

```
 startWorkThread();
  updateButton.IsEnabled = false; 
```

让我知道这是怎么回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T05:04:36.803

看起来你正在启动你的线程，然后在你的线程完成之前立即启用你的按钮。您最好使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)并在 RunWorkerCompleted 事件中启用您的 Button。尽管您可以通过在流程结束时使用 BeginInvoke 启用按钮来做类似的事情。

```
public void doWork()
{
    System.Threading.Thread.Sleep(10000); //Simulating your Process
    Dispatcher.BeginInvoke(new System.Threading.ThreadStart(delegate() { updateButton.IsEnabled = true; }), System.Windows.Threading.DispatcherPriority.Background);
} 
```

**BackgroundWorker 示例**

```
using System.ComponentModel;

public partial class MainWindow : Window
{
    BackgroundWorker bgw;
    public MainWindow()
    {
        InitializeComponent();
        bgw = new BackgroundWorker();
        bgw.DoWork += new DoWorkEventHandler(bgw_DoWork);
        bgw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bgw_RunWorkerCompleted);

    }

    void bgw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        updateButton.IsEnabled = true;
    }

    void bgw_DoWork(object sender, DoWorkEventArgs e)
    {
        System.Threading.Thread.Sleep(10000); //Simulating your work
    }

    private void startWorkThread()
    {
        bgw.RunWorkerAsync();
    }

    private void updateButton_Click(object sender, RoutedEventArgs e)
    {
        if (bgw.IsBusy != true)
        {
            updateButton.IsEnabled = false;
            startWorkThread();
        }
    }
} 
```