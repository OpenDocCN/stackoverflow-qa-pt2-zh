# StackOverflow 问答 14127000-14127999

# javascript - 为什么 $1...$9 属性 (RegExp) 不适用于 IE10？

> ID：14127011
> 
> 赞同：2
> 
> 时间：2013-01-02T18:11:39.057
> 
> 标签：javascript, regex, internet-explorer-10

我有一个旧脚本，它曾经与 IE 一起使用，但我不知道为什么它不能仅与 IE10 一起使用，有人对此有所了解吗？

```
String.Format = function (a) {
    var b = Array.prototype.slice.call(arguments, 1);
    return a.replace(/{(\d+)}/g, function () { return b[RegExp.$1] });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:18:56.880

根据[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Deprecated_and_obsolete_features?redirectlocale=en-US&redirectslug=JavaScript%2FReference%2FDeprecated_Features#RegExp_Properties)，这些`RegExp.$n`属性已被弃用。

试试这个：

```
return a.replace(/{(\d+)}/g, function (match) { 
    // match will include the {} so we strip all non-digits
    return b[match.replace(/\D/g, '')];
}); 
```

或者使用第一个带括号的匹配来避免额外的`replace`调用：

```
return a.replace(/{(\d+)}/g, function (match, p1) { 
    return b[p1];
}); 
```

[资源](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)

[工作示例](http://jsfiddle.net/sjxkD/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:18:31.853

这些属性已被弃用。请参阅此处：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Deprecated_and_obsolete_features#RegExp_Properties) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Deprecated_and_obsolete_features#RegExp_Properties 。

# c++ - 当给定一个有效的 struct tm 时，mktime 返回 -1

> ID：14127013
> 
> 赞同：9
> 
> 时间：2013-01-02T18:12:00.937
> 
> 标签：c++, time

```
#include <stdio.h>
#include <time.h>

int main(int argc, char* argv[])
{
    struct tm stm;
    stm.tm_sec = 27;
    stm.tm_min = 5;
    stm.tm_hour = 18;
    stm.tm_mday = 2;
    stm.tm_mon = 0;
    stm.tm_year = 43;
    stm.tm_wday = 0;
    stm.tm_yday = 0;
    printf("%d\n", mktime(&stm));
    getchar();
    return 0;
} 
```

打印 -1

我有什么误解？

[+edit] 这是使用带有 32 位目标的 Visual Studio 2012。我想后续问题是“存储任意日期/时间值（即可能在 1900 年之前的那些）的推荐方法是什么？”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T18:16:00.393

在您的情况下，43（1943）被视为无效年份。原因是`mktime`返回一个`time_t`类型。这种类型并不是真正标准化的。文件说的是什么：

> 该`time_t`类型是一个整数值，表示自 1970 年 1 月 1 日 00:00 UTC 以来经过的秒数。tm_year 是自 1900 年以来的年数

这个链接[最终的 time_t typedef 是什么？](https://stackoverflow.com/questions/471248/what-is-ultimately-a-time-t-typedef-to)说：

> `time_t`表示自 Unix 纪元开始以来的秒数：1970 年 1 月 1 日午夜 UTC（不包括闰秒）。一些系统正确处理负时间值，而其他系统**则不能**。

如果我们认为这`time_t`是一个有符号的 32 位整数，在最好的情况下，您可以在 ~ 13/12/1901 和 19/1/2038 之间创建日期

**但是**在您的情况下，实现不使用 的负数部分`time_t`，因此您不能使用 1970 之前创建日期`mktime`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:38:07.803

`time_t`是您系统上的 64 位整数，并且您使用错误的格式标志说明符将其打印出来。您需要使用`ll`修饰符来指示它是 64 位：

```
time_t t = mktime(&stm);
printf("%lld", (int64_t)t);  // This will be correct if time_t is 32 or 64 bits 
```

由于时间在纪元（1970 年 1 月 1 日）之前，因此时间是一个负值，如 -851910873，即 0xffffffffcd38df27 十六进制作为 64 位整数。当您尝试将其打印为 32 位整数时，您会得到高 32 位，即 0xffffffff 或 -1（尽管从技术上讲，根据 C 标准，这是未定义的行为，所以不要依赖它）。

正如其他人所提到的，`time_t`没有指定实际大小，所以你不应该对它做任何假设。如果您真的需要知道它有多大，最安全的做法是始终将其扩大到 64 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:26:40.693

您试图表示日期“1943 年 1 月 2 日”。
在 Unix/Linux 系统上，此日期无法以`time_t`值表示，因为这些系统使用“1970 年 1 月 1 日”作为参考日期。

更新：
POSIX 指定[mktime](http://pubs.opengroup.org/onlinepubs/009696799/functions/mktime.html)以“自纪元以来的秒数”返回时间（其中纪元 = 01-01-1970 00:00:00）。在严格的解释中，因此不能表示 1970 年 1 月 1 日之前的日期，因为“秒后”本质上是一个正数。

ANSI/ISO C 不太清楚`mktime`.

# javascript - 有没有办法使用命令行工具来查看网页的 JavaScript 解释源？

> ID：14127018
> 
> 赞同：7
> 
> 时间：2012-12-29T00:20:19.730
> 
> 标签：javascript, html, curl

是否有命令行工具可以让您获取网页的 JavaScript 解释源文本，类似于在 FireFox 上的 FireBug 中查看解释代码的方式？

我想使用 CURL 或类似工具来请求网页。问题是我想查看代码是如何被 JavaScript 修改的。例如，如果 dom 已更改或元素已被修改，我想查看修改后的版本。我知道 FireBug 为 FireFox 执行此操作，但我正在寻找一种方法来编写该过程的脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:17:28.053

你有没有看过像[PhantomJS](http://phantomjs.org/)这样的工具来运行测试？它们中的许多都支持运行“无头”浏览器，它允许您渲染页面并针对渲染的页面运行 JS，而无需实际运行浏览器。它不使用`curl`，但我不明白为什么这应该是一个要求。

例如：

```
$ phantomjs save_page.js http://example.com 
```

使用 save_page.js：

```
var system = require('system');
var page = require('webpage').create();

page.open(system.args[1], function()
{
    console.log(page.content);
    phantom.exit();
}); 
```

# postgresql - 在 Plone 中存储大量数字数据并从中生成报告

> ID：14127023
> 
> 赞同：1
> 
> 时间：2013-01-02T18:12:41.207
> 
> 标签：postgresql, plone, zope

我刚刚安装了 plone 4，将学习如何将我当前的 xhtml/css 站点迁移到它。但是，我也有不同的需要来存储客户数字数据（很多情况下很多），他们可以远程访问并使用这些数据来生成报告。zopedb 会适应这个，还是我可以使用 postgres 作为后端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T18:22:45.200

对于表格数据，请使用数据库。您可以从 Plone 访问 Postgres，使用 Zope 的（老年人和老化的）ZSQLMethods，或者使用 python 代码和自定义代码。

后者并不难或令人生畏，但它确实需要您阅读如何为 Plone 创建自定义包。就个人而言，我会使用 SQLAlchemy 将数据库集成到 Plone 视图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:40:31.607

这是一个示例案例，我们如何做到这一点。

我们运行一个拥有 4000 名用户和 80000 条数据记录（内容项）的大型 Plone 站点。数据主要存储在 ZODB 中。只要 ZODB 适合您的服务器内存，您就可以轻松扩展它。如果您的数据集 < 32 GB，则当前硬件没有问题。

出于报告目的，ZODB 并不好，因为所有报告工具都假定 (My)SQL 后端。因此，我们在修改事件的原型内容上有从 Plone 到 MySQL 的重复数据。然后报告在 Plone 中完成了视图，它使用 Python 和 R 报告语言，没有太多绑定到 Plone（它是通用 Python 代码，不是特定于 Plone）。

但是，由于权限、角色和 Plone + ZODB 为您自动处理的此类问题，主要数据存储仍然是 ZODB。

复制到 MySQL 可以手动处理或使用[http://pypi.python.org/pypi/ore.contentmirror之类的附加组件](http://pypi.python.org/pypi/ore.contentmirror)

# asp.net - 当我使用@Scripts.Render 时，JS 函数永远不会被触发。正常通话工作正常

> ID：14127027
> 
> 赞同：0
> 
> 时间：2013-01-02T18:13:04.340
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

**这段代码：**

```
PDFJS.getDocument(parameters).then(
  function getDocumentCallback(pdfDocument) {          
    self.load(pdfDocument, scale);
    self.loading = false;
  } 
```

应该调用这个函数：

```
PDFJS.getDocument = function getDocument(source) {
return alert('never gets here');
 var workerInitializedPromise, workerReadyPromise, transport;
if (typeof source === 'string') {
  source = { url: source };
  return alert('string');
} else if (isArrayBuffer(source)) {
  source = { data: source };
  return alert('data');
} else if (typeof source !== 'object') {
  return alert('erro');
error('Invalid parameter in getDocument, need either Uint8Array, ' +
      'string or a parameter object');
}

 if (!source.url && !source.data) {
  error('Invalid parameter array, need either .data or .url');
  return alert('erro 2');
}

// copy/use all keys as is except 'url' -- full path is required
var params = {};
for (var key in source) {      
  if (key === 'url' && typeof window !== 'undefined') {
  params[key] = combineUrl(window.location.href, source[key]);
  continue;
}
params[key] = source[key];

}
 workerInitializedPromise = new PDFJS.Promise();
    workerReadyPromise = new PDFJS.Promise();
  transport = new WorkerTransport(workerInitializedPromise, workerReadyPromise);
 workerInitializedPromise.then(function transportInitialized() {
    transport.fetchDocument(params);
    });
    return workerReadyPromise;
  }; 
```

虽然如果我使用

```
@Scripts.Render("~/PDF/js") 
```

调用脚本而不是使用

```
<script type="text/javascript" src="Url.Content("~/pdf.js/api.js")"> </script> 
```

该功能`PDFJS.getDocument`永远不会被触发。

我错过了什么吗？

**编辑：**两种情况下都加载了 js 文件。只是函数没有被调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:19:51.703

您在相应的`~/PDF/js`捆绑包中有什么？您是否确保所有必要的脚本都包含在正确的顺序中？

```
bundles.Add(
    new ScriptBundle("~/PDF/js").Include("~/pdf/api.js")
); 
```

另请查看该`@Script.Render`方法在生成的 HTML 页面中输出了什么。由于包没有缩小，也没有在调试模式下组合，您应该能够看到对`<script>`您需要的每个文件的引用。现在将这些引用与您通常在没有任何捆绑包甚至 ASP.NET MVC 的情况下使用的那些引用进行比较。它们有何不同？

此外，我注意到您在 Url.Content 助手中使用了一条非常奇怪的路径：`~/pdf.js/api.js`。你确定这行得通吗？

# c# - 将 SpriteBatch.Draw 中指定的颜色与自定义着色器一起使用

> ID：14127029
> 
> 赞同：3
> 
> 时间：2013-01-02T18:13:13.347
> 
> 标签：c#, xna, shader, spritebatch

通常，当您这样做时，`SpriteBatch.Draw`您可以指定颜色。但这就是问题所在。如果我使用自定义着色器，它们会忽略通过`SpriteBatch.Draw`...

我如何考虑到这一点？我的意思是如何准确`SpriteBatch.Draw`传递颜色？如果我知道它，我可以在我的着色器中使用它。

到目前为止我所拥有的（相关部分）：

```
float4 NoEffects(float2 coords: TEXCOORD0) : COLOR0
{
    return tex2D(s0, coords);
}

technique Default
{
    pass Pass1
    {
        PixelShader = compile ps_2_0 NoEffects();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:46:37.177

您需要检索通过顶点着色器的颜色并在计算最终输出时使用它：

```
float4 NoEffects(float4 color : COLOR0, float2 coords : TEXCOORD0) : COLOR0
{
    return tex2D(s0, coords) * color;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:34:31.237

您可以使用 EffectParameter 将值传递给您的效果。

[http://msdn.microsoft.com/en-us/library/bb976060.aspx](http://msdn.microsoft.com/en-us/library/bb976060.aspx)

# c# - 无法得到正确的结果

> ID：14127038
> 
> 赞同：1
> 
> 时间：2013-01-02T18:13:36.890
> 
> 标签：c#, linq

我相信我在这里遗漏了一些简单的东西，但我就是想不通。任何形式的帮助将不胜感激。

**问题**： 最终在`resultsWithMedia`数组中的结果仅包含与中的第一项匹配的结果`mediaTypesList`。我试过使用`Exists()`,`Find()`和`Contains()`，但没有运气。我每次都会得到同样的行为。

**例如**：如果`mediaTypesList`包含`{"video", "link", "photo"}`值，`resultsWithMedia`则将只保存类型为 的结果`video`。

我想要实现的是`resultsWithMedia`保持`type`与`mediaTypesList`.

**代码**：

```
 public void GetPostsWithMedia(string from, string before, string mediaTypes)
    {
        // ... some variable declarations

        List<string> mediaTypesList = new List<string>();

        if (!string.IsNullOrEmpty(mediaTypes))
        {
            var list = mediaTypes.Split(',');

            foreach (var type in list)
            {
                mediaTypesList.Add(type);
            }
        }

        // ... some more code 

        // Note: r.Data is a Dictionary that contains strings as it's values
        var resultsWithMedia = (from r in response.Results
                                where r.Data.ContainsKey("Type") && mediaTypesList.Exists(t => t == r.Data["Type"]) 
                                select new 
                                {
                                    // ... different variables
                                }).ToArray();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:30:30.357

我已经重写了你的代码。

```
var mediaTypesList = mediaTypes.Split(',').Select(e => e.Trim()).ToList();

var resultsWithMedia = response.Results.Data.Where(e => e.ContainsKey("Type") && mediaTypesList.Contains(e["Type"]))
            .Select(a => new {
                              // ... different variables
                              }).ToArray(); 
```

对我来说看起来更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:13:14.283

您可以在一个查询中获得带有媒体的结果：

```
var query = from r in response.Results.Where(x => x.Data.ContainsKey("Type"))
            join m in mediaTypes.Split(',')
                 on r.Data["Type"] equals m
            select new {
                ...
            }; 
```

如果您需要对媒体类型和数据进行不区分大小写的比较，请应用 ToLower(): `on r.Data["Type"].ToLower() equals m.ToLower()`。`m.Trim()`如果在拆分字符串后媒体类型名称中有空格（如 Euphoric 建议的那样），也可以考虑申请。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:19:54.257

`mediaTypes`检查前后的空格`,`

最好改变

```
mediaTypesList.Add(type.Trim()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-02T18:38:42.370

如果我理解正确，您想按第一个元素进行匹配。 [Enumerable.First()](http://msdn.microsoft.com/en-us/library/bb535050.aspx)可以解决问题：

```
 var resultsWithMedia = (from r in response.Results
                            where r.Data.ContainsKey("Type") && 
                            mediaTypesList.First(t => t == r.Data["Type"]) 
                            select new 
                            {
                                // ... different variables
                            }).ToArray(); 
```

# algorithm - 黄色和黑色边缘的最短路径

> ID：14127039
> 
> 赞同：0
> 
> 时间：2013-01-02T18:13:51.033
> 
> 标签：algorithm, graph, graph-theory, shortest-path

给定有向加权图 G=(V,E)。
没有负加权边缘。
每个边缘都有颜色（黑色或黄色）。

我需要找到一种算法来找到给定 s ∈ V 的最短路径，而每条路径都必须遵循以下规则：color(vi [,] vi [+1] )=color(vi [+3] ,vi [+4] ), ∀i :1 ≤ i ≤ k-4 而路径是 v [1] → ... → v [k]。该算法需要在 O(|V|+|E|log(|V|)) 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:57:29.433

作为提示：尝试修改 Dijkstra 的算法以存储两个不同的优先级队列：一个包含从起始节点到以黄色边缘结束的目标节点的路径成本，以及从起始节点到目的地的路径成本以黑边结束的节点。然后，更新逻辑以找到下一个节点以选择考虑两个队列，并更改减少键逻辑以确保您使用正确的信息更新正确的队列。这可以通过普通 Dijkstra 算法的常数因子开销来完成，因此需要时间 O(|E| + |V| log |V|)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T13:44:17.063

您可以像 templatetypedef 建议的那样修改 Dijkstra 的算法，或者修改图形以适应约束。

[您可以使用DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)识别颜色约束，并将其与您的加权图结合以获得可以应用未修改的 Dijkstra 的图，从而实现典型的 Dijkstra 运行时。

约束的确切开销取决于 DFA 的大小，但它是恒定的，因为 DFA 不依赖于输入。

# functional-programming - 计算器语法中给括号加优先级

> ID：14127041
> 
> 赞同：3
> 
> 时间：2013-01-02T18:14:00.660
> 
> 标签：functional-programming, grammar, sml, smlnj, parentheses

我正在用 SML 编写一个简单的计算器，我的代码需要支持 3 种括号：

```
( ) 

[ ] 

{ } 
```

里面的什么地方`{ }`，都能出现`{ } , [ ] , ( )`表情，

里面`[ ]`，会出现`[ ] , ( )`表情，

而在里面`( )`，只能出现`( )`表情。

意思是，它`{ }`具有最高优先级，the `[ ]`-middle priority，并且`( )`具有最低优先级。

实现这一目标的最佳方法是什么？

我编写了一个大方法，其中包含在不同情况下运行的太多循环和递归，但我认为这不是最好的方法。

任何建议将不胜感激

问候

**编辑 ：**

相关代码：

```
signature CalculatorOperation = sig
  datatype token = 
                    (* paranthesis *)

                   Lpar3             (* { *)
                 | Rpar3             (* } *)
                 | Lpar2             (* [ *)
                 | Rpar2             (* ] *)  
                 | Lpar              (* ( *)
                 | Rpar              (* ) *) 
```

结构 ：

```
structure CalculatorOperation : CalculatorOperation = struct 
  datatype token =
                    (* paranthesis *)

                   Lpar3             (* { *)
                 | Rpar3             (* } *)
                 | Lpar2             (* [ *)
                 | Rpar2             (* ] *)  
                 | Lpar              (* ( *)
                 | Rpar              (* ) *) 
```

扫描仪：

```
 fun stringScanner s [] = (toToken s,[])
    | stringScanner s (c::l)
      = case c::l of
          #" "::r => if s = "" then (stringScanner "" l) else (toToken s,l)
        (* paranthesis *)

        | #"{"::r => if s = "" then (Lpar3,r) else (toToken s,c::l)
        | #"}"::r => if s = "" then (Rpar3,r) else (toToken s,c::l)     
        | #"["::r => if s = "" then (Lpar2,r) else (toToken s,c::l)
        | #"]"::r => if s = "" then (Rpar2,r) else (toToken s,c::l)
        | #"("::r => if s = "" then (Lpar,r) else (toToken s,c::l)
        | #")"::r => if s = "" then (Rpar,r) else (toToken s,c::l) 
```

解析器：

```
structure CalculatorParser : CalculatorParser = struct
  open CalculatorOperation

  exception CalculatorParser

  datatype expr = NumNode of int
               | UminusNode of expr
               | MultiplyNode of expr * expr
               | DivNode of expr * expr
               | PlusNode of expr * expr
               | MinusNode of expr * expr
               | ModuloNode of expr * expr
               | PowerNode of expr * expr                          

  fun parserBrackets l = parserHelper2 l
  and parserHelper l
      = case l of 
          (Num n)::l1 => (NumNode n,l1)
        | Lpar3::l1 => let val (en,l2) = parserBrackets l1  in case l2 of Rpar3::l3 => (en,l3)
        | _ => raise CalculatorParser end

        | Lpar2::l1 => let val (en,l2) = parserBrackets l1 in case l2 of Rpar2::l3 => (en,l3)
        | _ => raise CalculatorParser end   

        | Lpar::l1 => let val (en,l2) = parserBrackets l1 in case l2 of Rpar::l3 => (en,l3)
        | _ => raise CalculatorParser end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:01:22.823

我不是 SML 专家，但根据您的描述，我了解到您正在寻找的语法规则可以用 BNF 表示如下：

```
<expr1> ::= '{' ( <expr1> | <expr2> ) '}'

<expr2> ::= '[' ( <expr2> | <expr3> ) ']'

<expr3> ::= '(' ( <expr3> | <expr> ) ')' 
```

当我查看您对数据类型 expr 的定义时，在我看来您可以为 expr1、expr2 和 expr3 定义类似的类型，如下所示：

```
datatype expr3 = E3Node of expr3
              | ENode of expr

datatype expr2 = E2Node of expr2
              | E3Node of expr3

datatype expr1 = E1Node of expr1
              | E2Node of expr2 
```

老实说，我什至不知道这是否是有效的 SML，但我相信你能够解决这个问题......并填补空白。

# powershell - PowerShell Remoting 给出“访问被拒绝”错误

> ID：14127050
> 
> 赞同：28
> 
> 时间：2013-01-02T18:14:43.817
> 
> 标签：powershell, powershell-2.0, remoting, powershell-remoting

我正在尝试使用 PowerShell Remoting 从远程域中的服务器检查某些磁盘大小，但我正在运行的命令无法正常工作。

情况是这样的：

*   源服务器在域 A
*   目标服务器在域 B 中
*   这些域之间没有信任

域 B 中的服务器正在运行 Exchange 2010，我可以使用以下命令从服务器 A 对它运行 Exchange 2010 特定命令：

```
$Session = New-PSSession -ConfigurationName Microsoft.Exchange –ConnectionUri $ConnectionURI -Credential $Credentials -Authentication Basic
Import-PSSession $Session 
```

问题是我无法使用此会话对此服务器运行任何非 Exchange 命令，如果我尝试，它会说它无法理解这些命令。我已经检查并使用 Invoke-Command 运行 Get-Command，并且设置为我已建立会话的 -Session 变量仅返回 Exchange 命令。

所以我想我会尝试使用 Invoke-Command 和相关的计算机名称、身份验证类型和凭据，但这失败了：

```
Invoke-Command -ScriptBlock {Get-Service} -ComputerName "Servername.destination.com" -Credential $Credentials -Authentication "Basic" 
```

这是错误：

```
[servername.destination.com] Connecting to remote server failed with the following error message : The WinRM client can
not process the request. The authentication mechanism requested by the client is not supported by the server or unencry
pted traffic is disabled in the service configuration. Verify the unencrypted traffic setting in the service configurat
ion or specify one of the authentication mechanisms supported by the server.  To use Kerberos, specify the computer nam
e as the remote destination. Also verify that the client computer and the destination computer are joined to a domain.
To use Basic, specify the computer name as the remote destination, specify Basic authentication and provide user name a
nd password. Possible authentication mechanisms reported by server:     Negotiate Kerberos For more information, see th
e about_Remote_Troubleshooting Help topic.
    + CategoryInfo          : OpenError: (:) [], PSRemotingTransportException
    + FullyQualifiedErrorId : PSSessionStateBroken 
```

所以我进入目标服务器上的 WSMAN 配置并设置相关设置以允许基本身份验证和未加密连接：

```
cd WSMan:\localhost\Service
Set-Item AllowUnencrypted $True
cd .\Auth
Set-Item Basic $True 
```

我还将目标服务器添加到源域服务器的受信任主机中：

```
cd WSMan:\localhost\Client
Set-Item TrustedHosts servername.destination.com 
```

这样做之后，错误发生了变化，但它不是很有帮助：

```
PS WSMan:\localhost\Client> Invoke-Command -ScriptBlock {Get-Service} -ComputerName "servername.destination.com" -Creden
tial $Credentials -Authentication "Basic"
[servername.destination.com] Connecting to remote server failed with the following error message : Access is denied. Fo
r more information, see the about_Remote_Troubleshooting Help topic.
+ CategoryInfo          : OpenError: (:) [], PSRemotingTransportException
+ FullyQualifiedErrorId : PSSessionStateBroken 
```

我也尝试过通过 -Credential (Get-Credential) 使用域管理员凭据，但这因同样的问题而失败。

我尝试使用的用户是相关服务器上本地管理员用户的成员，因此应该已经在 PSSessionConfiguration 容器上设置了权限。

我希望有任何进一步的指示！我只会使用 WMI，但目前还没有通过防火墙启用它。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-04-02T15:36:32.623

最近有类似的问题。建议您仔细检查您正在连接的用户是否在远程计算机上具有适当的授权。

您可以使用以下命令查看权限。

```
Set-PSSessionConfiguration -ShowSecurityDescriptorUI -Name Microsoft.PowerShell 
```

在此处找到此提示（更新链接，感谢“unbob”）：

[https://devblogs.microsoft.com/scripting/configure-remote-security-settings-for-windows-powershell/](https://devblogs.microsoft.com/scripting/configure-remote-security-settings-for-windows-powershell/)

它为我修好了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-13T20:20:17.663

以管理员身份运行命令提示符或 Powershell ISE 为我解决了这个问题。

# ninject - Ninject 和静态构造方法

> ID：14127051
> 
> 赞同：0
> 
> 时间：2013-01-02T18:14:52.243
> 
> 标签：ninject

我正在使用 Ninject 并面临使用静态构造函数而不是常规构造函数的库的问题：

```
 Kernel.Bind<IDocumentService>().ToMethod(
    x => CoDocumentService.Create(x.Kernel.Get<IMessage>(),x.Kernel.Get<IClientChannel>())
  ).InRequestScope(); 
```

现在的问题是，根据（即`IMessage`，）的种类，`IClientChannel`实现方式略有不同。但是，我无法区分/的上下文。我需要一种能够知道在哪里使用这样的实例的方法。`Service``IDocumentService``IAccountService``IMessage``IClientChannel`

```
this.Kernel
  .Bind<IClientChannel>()
  .To<Something>()
  .WithPropertyValue("Something",x => {"Depends on where this instance is going to be used"}); 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:43:02.103

Ninject 具有简单的约束解析：[*命名绑定*](https://github.com/ninject/ninject/wiki/Contextual-Binding)。使用此功能，您可以多次为同一服务类型注册类型绑定：

```
kernel
    .Bind<IClientChannel>()
    .To<UniversalClientChannel>()
    .Named("IClientChannel") // named binding
    .WithPropertyValue("Number",x => 42) 
```

然后直接解析服务的命名实例：

```
x.Kernel.Get<IClientChannel>("IAccountService") 
```

那么静态构造函数的映射将如下所示：

```
kernel
    .Bind<IDocumentService>()
    .ToMethod(x => CoDocumentService.Create(
                       x.Kernel.Get<IMessage>(),
                       // named instance will be resolved
                       x.Kernel.Get<IClientChannel>("IClientChannel")))
    .InTransientScope(); 
```

**ps**：[完整示例可在 gist.github 获得](https://gist.github.com/4437787)

# javascript - 当应用大约一半透明度的 alpha 时，我将使用什么代码来获取颜色的十六进制值？

> ID：14127060
> 
> 赞同：1
> 
> 时间：2013-01-02T18:16:32.640
> 
> 标签：javascript, actionscript-3, graphics, colors, hex

如果我有一个视觉元素（可以是带有颜色填充的文本或 div，没关系）并且颜色设置为黑色**0x000000**，并且它的 alpha 设置为**.4**或**.5**并且背景是纯**白色****0xFFFFFF**，结果将是灰色。我们可以在 Photoshop 中进行测试。

我想知道的是我将使用什么代码来获得该结果？

我正在寻找诸如方程式之类的东西：

```
newColor = foregroundColor * alpha * backgroundColor 
```

或者类似 JavaScript、ActionScript 或 VBScript 中的内容：

```
var color:uint = (0x888888 * .5) * 0x000000; 
```

解决这个问题的部分困难在于对十六进制以及它与颜色的关系缺乏充分的理解，无法自行解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:23:00.647

您可以使用维基百科中的这个[Alpha Blending](http://en.wikipedia.org/wiki/Alpha_compositing#Alpha_blending)算法：

> ![在此处输入图像描述](../Images/d17a1f1f95926d20c41d01d35c495d9c.png)

# objective-c - cocos2d 2.0如何支持iPhone5

> ID：14127064
> 
> 赞同：0
> 
> 时间：2013-01-02T18:16:52.827
> 
> 标签：objective-c, cocos2d-iphone, resolution

> **可能重复：**
> [cocos2d iphone 5 4 inch display support](https://stackoverflow.com/questions/12501292/cocos2d-iphone-5-4-inch-display-support)

我是 Cocos 2d 的新手。我创建了新的 Xcode 项目，`AppDelegate`当我得到：

```
[[UIScreen mainScreen] bounds]] 
```

结果是320x480。应该是 320x568。问题出在哪里？我应该在哪里进行更改以支持 iPhone5？我在 stackoverflow 上看到关于 iPhone5 和 Cocos2d 的重复，但我没有看到正确的答案。

从控制台登录：

```
2013-01-02 19:19:23.505 XXX[4963:907] cocos2d: surface size: 960x640 
```

# javascript - D3流图图层淡入淡出功能

> ID：14127065
> 
> 赞同：1
> 
> 时间：2013-01-02T18:16:55.310
> 
> 标签：javascript, d3.js, transition, fade, stream-graph

我最近发现了这个 Streamgraph [http://bl.ocks.org/1963983](http://bl.ocks.org/1963983)：

![在此处输入图像描述](../Images/1bb3e8f9cb36239d1a4134c398975177.png)

我正在尝试将该示例中的淡入淡出功能实现到我自己的流图中，但没有成功。

我的显然比那个例子中的复杂得多。任何意见或建议将不胜感激！

谢谢。

```
 var customPalette = [
           "#ff7f0e",  "#2ca02c", "#00FFFF", "#d62728", "#9467bd",
          "#8c564b", "#e377c2", "#7f7f7f", "#bcbd22", "#17becf"
        ];

        var format = d3.time.format("%y");

        //creating margins around the graph
        var margin = {top: 20, right: 30, bottom: 30, left: 200},
            width = 1200 - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        //OUTPUT RANGE
        var x = d3.time.scale()
            .range([0, width]);

        //OUTPUT RANGE
        var y = d3.scale.linear()
            .range([height, 0]);

        //assining custom colors to layers
        var colours = d3.scale.ordinal().range(customPalette);

        var xAxis = d3.svg.axis()
            .scale(x)
            .orient("top")
            .ticks(d3.time.years);

        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left");

        //ctreate stack layout
        var stack = d3.layout.stack()
            .offset("wiggle")
            .order("reverse")
            .values(function(d) { return d.values; })
            .x(function(d) { return d.date; })
            .y(function(d) { return d.amount; });

        //creates array of datya elements for stacked bar graph
        var nest = d3.nest()
            .key(function(d) { return d.age; });

        //create area
        var area = d3.svg.area()
            //adds curviture
            .interpolate("monotone")
            .x(function(d) { return x(d.date); })
            .y0(function(d) { return y(d.y0); })
            .y1(function(d) { return y(d.y0 + d.y); });

        var svg = d3.select("body").append("svg")
            //defines length of x-axis
            .attr("width", width + margin.left + margin.right)
            //defines height of y-axis
            .attr("height", height + margin.top + margin.bottom)
          .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

        d3.csv("data6.csv", function(data) {
          data.forEach(function(d) {
            // Convert strings to numbers
            d.date = format.parse(d.date);
            d.amount = +d.amount;
          });

          //returns an array of objects with a key feild (0-20yrs....)
          //and a value array which contains associated records
          var layers = stack(nest.entries(data));

          //.extent() returns min and max values of argument
          x.domain(d3.extent(data, function(d) { return d.date; }));
          //
          y.domain([0, d3.max(data, function(d) { return d.y0 + d.y; })]);

          svg.selectAll(".layer")
              .data(layers)
            .enter().append("path")
              .attr("class", "layer")
              .attr("d", function(d) { return area(d.values); })
              .style("fill", function(d, i) { return colours(i); });

        svg.append("g")
              .attr("class", "x axis")
              .attr("transform", "translate(0," + 0 + ")")
              .call(xAxis);

        svg.append("g")
              .attr("class", "y axis")
              .call(yAxis);

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:44:31.017

我终于让它工作了！我在这里找到了这个方便的代码 [http://bl.ocks.org/3480186](http://bl.ocks.org/3480186)

我剪掉了淡化效果的块。很高兴。

```
svg.selectAll(".layer").attr("opacity", 1)
.on("mouseover", function(d, i) {
    svg.selectAll(".layer").transition()
      .duration(500)
      .attr("opacity", function(d, j) {
        return j != i ? 0.2 : 1;
      });
  d3.select(this)
    .classed("hover", true);
})
.on("mouseout", function(d, i) {
  svg.selectAll(".layer")
    .transition()
      .duration(500)
      .attr("opacity", 1);
  d3.select(this)
    .classed("hover", false);
}); 
```

# xaml - 用重复的纹理填充 WinRT 控件

> ID：14127066
> 
> 赞同：1
> 
> 时间：2013-01-02T18:17:01.767
> 
> 标签：xaml, windows-runtime, winrt-xaml

是否有任何本机 WinRT 工具用于使用重复图像填充控件。我不想让它缩放到父母的宽度，只是重复它适合 X 方向的次数。我读过它似乎是 WinRT`ImageBrush`类的缺失部分。WPF 属性是否被`TileMode`其他工具取代？

[在这里](http://www.robfe.com/tag/winrt/)，我找到了一个外部解决方案。此外我看到它可以通过与CSS合作来处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:34:58.463

我使用了一种类似于您链接的方法（将多个图像控件平铺在面板中），这可能是您现在可以做的最好的。除了手动将平铺图像blitting 到WriteableBitmap 或使用DirectX 互操作来渲染平铺图像之外，没有任何内置功能。

另一种选择是使用一些图像编辑应用程序简单地保存平铺图像并简单地将其缩放（例如，使用 Stretch="UniformToFill"）到屏幕大小。如果您只是以原始屏幕分辨率平铺它 - 像素将保持清晰，但在更高分辨率的屏幕上您可能会开始注意到图案，这可能会破坏效果。

# android - Play 商店说我的手机不支持我自己的应用程序？

> ID：14127073
> 
> 赞同：7
> 
> 时间：2013-01-02T18:17:47.263
> 
> 标签：android

我的清单中有这些 android 权限。

```
 android.permission.INTERNET
 android.permission.ACCESS_NETWORK_STATE
 android.permission.ACCESS_FINE_LOCATION
 android.permission.CAMERA, android.permission.WRITE_EXTERNAL_STORAGE
 android.permission.SEND_SMS, android.permission.SYSTEM_ALERT_WINDOW
 android.permission.READ_EXTERNAL_STORAGE 
```

我有一台 Sony Xperia Tipo 手机 (Sony ST21i)。应用页面显示我的应用不支持我的手机。我的手机具有上述所有功能，并且我的应用程序在我的手机上运行良好。

尽管我没有在清单中明确定义任何使用功能标签，但谷歌开发者网站将以下内容作为必需的功能。

```
This application is only available to devices with these features, as defined in your application manifest.

Screen layouts: SMALL NORMAL LARGE XLARGE
Required device features
android.hardware.camera
android.hardware.camera.autofocus
android.hardware.location
android.hardware.location.gps
android.hardware.telephony
android.hardware.touchscreen 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T18:48:06.640

android.permission.CAMERA 的使用意味着 android.hardware.camera 和 android.hardware.camera.autofocus 如 Android 文档中所述（参见本页最后一个表格：http: [//developer.android.com/guide/topics/manifest /uses-feature-element.html](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)）。

由于您的设备没有自动对焦功能，因此无法下载您的应用程序。您应该添加：

```
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:31:39.280

检查您是否需要自动对焦功能。大多数手机都被过滤掉了。

# security - CA 公钥与服务器公钥：我应该使用什么来建立 HTTPS 连接？

> ID：14127078
> 
> 赞同：0
> 
> 时间：2013-01-02T18:18:01.517
> 
> 标签：security, ssl, https, public-key-encryption

我需要创建一个客户端库来通过 HTTPS 与单个服务（比如 google.com）通信。我希望图书馆附带验证服务所需的所有数据（证书或密钥）。

我很困惑这些数据应该是什么。它应该是签署 google.com 证书的证书颁发机构的公钥吗？还是应该是 google.com 的公钥？

在我见过的所有示例中，证书颁发机构的公钥都用于验证连接。但这似乎没有必要。如果我的图书馆只与 google.com 对话，我是否可以通过安全通道（浏览器）获取并保存 google.com 公钥，然后直接使用此密钥建立经过身份验证的连接，而无需再次使用 CA 密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:23:01.490

您需要使用服务器的密钥对，而不是 CA。建立 HTTPS 连接时，数据将在提供的公钥下加密。为了解密该数据，服务器将需要访问相应的私钥，如果您拥有 CA 的私钥，那就太糟糕了*。*

CA 的目的是让客户端可以通过一些受信任的第三方来验证服务器的证书。您的客户端将需要 CA 证书来正确验证服务器，但可能已经拥有并信任该 CA。

根据您的评论进行编辑：

发送 CA 证书而不仅仅是服务器证书还有更多优势。

主要原因是如果服务器的私钥被泄露，您不需要向所有客户端分发新证书。由于 CA 应该比您的服务器受到更好的保护，因此 CA 可以简单地颁发一个新证书，客户端无需任何额外工作即可信任该证书。

如果您发送了服务器的证书，则需要一种方法来安全地更新每个客户端上的证书。

# apache-flex - Adobe Flex AIR - 检测到 shift 键已经按下？

> ID：14127080
> 
> 赞同：0
> 
> 时间：2013-01-02T18:18:07.007
> 
> 标签：apache-flex, air, key, app-startup

我想允许用户覆盖持久配置标志以自动启动并在完成时自动关闭。一种习惯用法是在启动时检测 Shift 键向下。

如何检测 shift 键向下？

我尝试在应用程序初始化中添加键盘按下事件处理程序，但似乎根本没有被调用。

# java - 升级弹簧集成

> ID：14127081
> 
> 赞同：1
> 
> 时间：2013-01-02T18:18:11.347
> 
> 标签：java, spring, spring-integration

我们正在尝试升级我们的应用程序以使用最新的 spring 框架库。我有一个在最新的 spring 集成 jar（即 2.2.x）中不可用（或以这种方式出现）的类。它在我们目前使用的 1.0.4 中可用。导入 org.springframework.integration.channel.MessageChannelTemplate；

这个罐子刚刚被移动或移除了吗？我似乎无法找到有关此的任何细节。我们现在应该改用别的东西吗？

这是我正在查看[的迁移指南的链接。](http://www.springsource.org/spring-integration)

任何信息或指导都会很棒-谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:28:53.290

就是现在`org.springframework.integration.core.MessagingTemplate`

# regex - Nginx 在匹配之前是否取消引用/取消转义 URL 字符？

> ID：14127087
> 
> 赞同：5
> 
> 时间：2013-01-02T18:18:29.240
> 
> 标签：regex, nginx

当我想匹配带有空格的 URL 时，空格可能被编码为`%20`或`+`。为了在 Nginx 正则表达式中匹配这个，我需要使用什么模式？

Nginx 是否按原样传递 URL？

`(?:%20|\+| )`

或者，Nginx 会先做一些取消引用或取消转义吗？

`(?:\+| )`

还是`+`归一化？

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:12:17.833

虽然我没有快速浏览 Nginx 文档中的任何参考资料，但从我的测试来看，Nginx 将 HTTP 代码标准化为 unicode，使得 '%20' 与 '\s' 匹配。'+' 已经在 unicode 中，不需要进行规范化。

例如。`/route/the%20test`

应与`(?:\s)`

但是，我倾向于倾向于更安全的一面并使用类似的东西：`(?:(\s|\%20))``

# boto - Boto Glacier - 使用分段上传上传大于 4 GB 的文件

> ID：14127095
> 
> 赞同：4
> 
> 时间：2013-01-02T18:18:52.520
> 
> 标签：boto, amazon-glacier

我定期使用 boto 将文件上传到 AWS Glacier，如下所示：

```
# Import boto's layer2
import boto.glacier.layer2

# Create a Layer2 object to connect to Glacier
l = boto.glacier.layer2.Layer2(aws_access_key_id=awsAccess, aws_secret_access_key=awsSecret)

# Get a vault based on vault name (assuming you created it already)
v = l.get_vault(vaultName)

# Create an archive from a local file on the vault
archiveID = v.create_archive_from_file(fileName) 
```

但是，对于大于 4 GB 的文件，这将失败。

我假设这是因为如[Amazon Glacier 常见问题解答](http://aws.amazon.com/glacier/faqs/)中所述：“可以在单个上传请求中上传的最大存档为 4 GB。对于大于 100 MB 的项目，客户应考虑使用分段上传功能。”

如何将分段上传功能与 boto 和 AWS Glacier 结合使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-01-16T14:03:51.457

我刚刚查看了来源，似乎**boto.glacier.vault.Vault.upload_archive()**自动完成了所有的魔法：

> 将档案添加到保管库。对于大于 100MB 的档案，将使用分段上传。

```
def upload_archive(self, filename, description=None):
    if os.path.getsize(filename) > self.SingleOperationThreshold:
        return self.create_archive_from_file(filename, description=description)
    return self._upload_archive_single_operation(filename, description) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T02:43:06.350

Amazon Glacier 使用术语存档来描述文件。换句话说，您不能将大于 4GB 的文件上传到 Glacier。如果您仍然想尝试分段上传器，请查看 vault.concurrent_create_archive_from_file 或 vault.create_archive_writer

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-04T11:23:55.280

[冰川文档](http://docs.aws.amazon.com/amazonglacier/latest/dev/uploading-an-archive.html)明确指出：

根据您上传的数据大小，Amazon Glacier 提供以下选项：

*   **一次操作上传档案**— 在一次操作中，您可以上传大小从 1 字节到最多 4 GB 的档案。但是，我们鼓励 Amazon Glacier 客户使用分段上传来上传大于 100 MB 的档案。

*   **分段上传**档案—使用分段上传 API，您可以上传大型档案，最高可达 40,000 GB (10,000 * 4 GB)。

    Multipart Upload API 调用旨在改善大型档案的上传体验。您可以分段上传档案。这些部分可以按任意顺序独立上传，也可以并行上传。如果部分上传失败，您只需要再次上传该部分而不是整个存档。您可以对大小从 1 字节到大约 40,000 GB 的档案使用分段上传。

在`boto`第 2 层中，这意味着您必须使用以下方法之一`boto.glacier.vault.Vault`

*   `concurrent_create_archive_from_file`
*   `create_archive_writer`
*   `upload_archive`

# c++ - QtWebView -- C++ -- 如何获取从 linkClicked 事件返回的 javascript 字符串

> ID：14127098
> 
> 赞同：0
> 
> 时间：2013-01-02T18:19:24.000
> 
> 标签：c++, qt4, qwebview, qwebkit, qwebpage

我一直无法为我的问题找到明确的答案。

我目前有一个 QWebView 控件加载我硬盘驱动器上的 html 文件，该文件使用 javascript 操作实现矢量地图。html 文件加载 jvectormap 美国各州地图。任何状态的点击动作都会触发与 showCities 函数相关联的 onRegionClick 动作，该函数的事件和代码参数由 jquery-jvectormap.js 文件中实现的 onRegionClick 方法处理。html文件如下：

```
<!DOCTYPE html>

<html lang="en">
<head>

    <link rel="stylesheet" href="styles/style2.css" type="text/css"/>

    <link rel="stylesheet" media="all" href="styles/jquery-jvectormap.css"/>
    <script src="js/jquery.tools.min.js"></script>
    <script src="js/jquery-jvectormap.js"></script>
    <script src="js/jquery-jvectormap-us-en.js"></script>
    <script>
        $(function() {
            $('.map').vectorMap({
                map: 'us_en',
                color: 'green',
                hoverColor: 'blue',
                onRegionClick: showCities
            });
        });
        function showCities(event, code) {
            return code;

        }

    </script>
</head>

<body>

    <div id="front">

        <div class="map"></div>

        </div>

</body>
</html> 
```

以及Qt中的mainwindow.h头文件信息：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QUrl>
namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:

    void on_webView_linkClicked(const QUrl &arg1);

private:
    Ui::MainWindow *ui;

};

#endif // MAINWINDOW_H 
```

然后是 MainWindow.cpp 文件：

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QMessageBox>
#include <QtGui>
#include <QtCore>
#include <QDebug>
#include <QtWebKit>
#include <QWebSettings>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
   ui->setupUi(this);
   ui->webView->page()->setLinkDelegationPolicy(QWebPage::DelegateAllLinks);
   ui->webView->settings()->setAttribute(QWebSettings::JavascriptEnabled, true);
   connect(ui->webView,SIGNAL(linkClicked(QUrl)),this,SLOT(on_webView_linkClicked(QUrl)));

}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_webView_linkClicked(const QUrl &arg1)
{
    QMessageBox::information(this,"Title","Test");

} 
```

当我单击任何特定区域时，不会触发/触发 on_webView_linkClicked 函数。单击的任何区域都旨在返回一个字符串。当我在网页上尝试此操作时，例如[http://www.google.com](http://www.google.com)， on_WebView_linkClicked 函数中的 QMessageBox 实际上会触发/触发一个显示 QMessageBox 的事件。

这里的目标是让函数 showCities 的 html 文件中返回的 javascript 字符串显示在 on_webView_linkClicked 事件中。显然，linkClicked 操作没有将 javascript 返回识别为链接，因此在使用 jquery 矢量地图时它保持沉默。

我已经到处搜索了这个，我能得到的唯一答案是，如果矢量图中的这些区域附加了 url 链接，它可能会起作用，但是我在这些区域中嵌入的虚拟链接不会导致 on_webView_linkClicked 事件触发。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:06:19.700

您可以将 QObject（例如您的 MainWindow）注入 JavaScript。一旦您的 JavaScript 函数被调用，您就可以将该调用转移到注入的对象。

不是完整的代码，但给出一个想法：

**主窗口.h**

```
class MainWindow : public QMainWindow
{
    Q_OBJECT

    ...

public slots:

    void jsInjection();

    void showCities(const QString &code);
} 
```

**主窗口.cpp**

```
MainWindow::MainWindow()
{
    ...

    connect(ui->webView->page()->mainFrame(), SIGNAL(javaScriptWindowObjectCleared()),
            this, SLOT(jsInjection()));
}

void MainWindow::jsInjection()
{
    ui->webView->page()->mainFrame()->addToJavaScriptWindowObject("qtMainWindow", this);
}

void MainWindow::showCities(const QString &code)
{
    // Do smth with code...
} 
```

**在 HTML JS**

```
function showCities(event, code) {
    qtMainWindow.showCities(code);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T09:29:14.330

恕我直言，以下解决方案更简单：

主窗口.h

```
protected slots:
    void showCities(); 
```

主窗口.cpp

```
//in constructor
//make sure that page already loaded
webView->page()->mainFrame()->addToJavaScriptWindowObject("qt", this);

// implement function
void MainWindow::showCities()
{
    // do what you want to do
} 
```

abc.js

```
qt.showCities(); 
```

# django - 我可以在另一个内部启动一个 Django 模型对象吗

> ID：14127099
> 
> 赞同：1
> 
> 时间：2013-01-02T18:19:32.977
> 
> 标签：django, django-models, django-forms, django-views

```
from django.db import models
import datetime

class User (models.Model):
    user_name = models.CharField(max_length=200)
    email = models.EmailField(blank=True, null=True)
    url = models.URLField(blank=True, null=True)
    joined_on = models.DateTimeField(default = datetime.datetime.now)

    def __unicode__(self):
        return self.user_name

class Note (models.Model):
    msg = models.TextField(max_length=2000)
    user = models.ForeignKey(User)
    pub_date = models.DateTimeField(default = datetime.datetime.now )

    def __unicode__(self):
        return self.msg[:40] 
```

这些是我的 Django 模型。

现在，我使用 Django 表单获取模型的数据。我想做的就是将它们推入数据库。下面是我正在做的代码。

```
u = User(user_name="my name")
n = Note(msg="hi", user=u)
n.save() 
```

现在，我遇到了`IntegrityError: note_note.user_id may not be NULL`错误。

但是，我只是`u.save()`没有显示此错误（日期时间仍然存在 RuntimeError 警告）

这就是我想要构建的：

1.  创建一个联系表单，其中 user_name、email、url、msg 是字段（email、url 不是强制性的）

2.  将数据推送到数据库。

我哪里出错了以及如何解决它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:22:26.307

新对象的 ID 在保存之前不会定义。首先保存 User 对象，然后保存 Note 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:11:34.647

空白的：

如果为 True，则该字段允许为空。默认为假。

请注意，这与 null 不同。null 纯粹与数据库相关，而空白与验证相关。如果一个字段有空白=真，表单验证将允许输入一个空值。如果某个字段的空白=False，则该字段将是必需的。

[https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.blank](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.Field.blank)

# javascript - 在 Chrome 中解析 SVG 路径日志消息时出错

> ID：14127103
> 
> 赞同：1
> 
> 时间：2013-01-02T18:20:14.630
> 
> 标签：javascript, google-chrome, svg

我正在尝试在 javascript 中实现一个简单的绘画工具，用于在 SVG 上徒手绘制。对于自由手，我在绘图时使用折线，一旦绘图完成，我会尝试用它制作一条曲线，就像谷歌绘图一样平滑曲线。当然，到目前为止，我还没有设计出一个很好的平滑逻辑，甚至没有尝试过。我目前使用的是在折线的每四个点中取一个来创建一条曲线。这可能是一个不好的方法，但这是我认为值得尝试的第一件事。

`<path stroke="black" opacity="1" stroke-width="10" shape-rendering="geometric-precision" fill="none" d="M 1452 559 C 1452 556 1317 518 1308 521 1296 528 1289 537 1281 542 1277 549 1272 559 1267 566 1265 578 1265 585 1263 592 1263 599 1260 606 1258 616 1253 627 1248 639 1244 656"> </path>`

但是在 chrome 中我收到了这个错误 `Problem parsing d="M 1452 559 C 1452 ...` 但它正在渲染 SVG 上的所有内容。我只想知道为什么会这样，而且只在 chrome 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T09:47:35.240

这不是铬的错误。贝塞尔曲线需要 2 个控制点和终点，即除起点外最少有 3 个点，对于曲线序列，点数应为 3 的倍数，以曲线的起点为终点以前的。
当点不是 3 的倍数时，chrome 会抛出错误但仍会渲染它。

# debugging - 使用lldb调试时如何使当前堆栈帧返回？

> ID：14127104
> 
> 赞同：1
> 
> 时间：2013-01-02T18:20:27.547
> 
> 标签：debugging, lldb

> **可能重复：**
> [在步进时从方法“返回”？](https://stackoverflow.com/questions/12872167/return-from-method-while-stepping)

当使用 gdb 调试进程并且目标被挂起时，return 命令使 gdb 立即从当前堆栈帧返回（不执行当前函数的其余部分）。

如何在 lldb 中达到相同的效果？

我试过'return'和'frame return'，但lldb只是告诉我这些不是'已知'命令。我正在使用 Xcode 4.5.1 (LLDB-167.4) 中集成的 lldb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:42:28.853

根据[https://stackoverflow.com/a/12876959/118854](https://stackoverflow.com/a/12876959/118854)，这可以通过从 HEAD 构建的 lldb （使用新命令`thread return`）实现，但在 Xcode 4.5.x 版本中是不可能的。

# optimization - 优化和正则化

> ID：14127111
> 
> 赞同：3
> 
> 时间：2013-01-02T18:20:49.213
> 
> 标签：optimization, image-processing, regularized

我正在尝试对图像重建问题使用总变异最小化。本质上，我试图惩罚重建图像中两个像素的强度不同。

为此，我最小化`|Ax-b|+ \lambda |F(X)| where F(x)= (x_i - x_i+1)^2`是一个二次函数，它惩罚两个最近像素的差异强度。

但是，我无法决定如何确定`\lambda`（正则化强度）的值。在文献中，我找到`\lambda`了使用拉格朗日乘数找到范数正则化情况的方法。但是，我无法找到/制定一种方法来找到最`\lambda`适合这种情况的方法。

任何人都知道如何处理它？

有谁知道是否存在优化的分析形式`\lambda`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:00:09.437

正则化方法。他们在计算机视觉领域有着悠久的历史。一个很好的评论开始（特别是它提供的参考）是这个：

[http://yaroslavvb.com/papers/chen-on.pdf](http://yaroslavvb.com/papers/chen-on.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-19T19:20:14.227

除非您想满足其他一些约束，否则没有最佳 lambda。

根据您的应用程序是什么，简单地查看图像并确定您是否喜欢您所看到的可能是一个好主意。

或者，如果您真的在压缩 - 出于性能或存储原因 - 调整 lambda 以在满足您的性能要求的同时留下尽可能多的细节，或者在必要时给您一点回旋余地。

# api - 贝宝定期付款 API

> ID：14127113
> 
> 赞同：0
> 
> 时间：2013-01-02T18:21:10.433
> 
> 标签：api, paypal, payment, recurring

我现在正在使用 PayPal Recurring Payments API。但碰巧我需要一个特定的功能。让我们考虑以下场景，

*   我的客户在我的网站上有个人资料，他每月支付 100 美元，但在特定月份，他必须在下个月支付税款。

有没有办法只在下个月加税，而不是像 TAXAMT 那样，适用于所有周期。另一方面，也许我只想给下一次付款打折，而不是整个周期。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:47:41.343

Recurring Payments profiles are meant to be setup with a single amount that will be charged on a regular basis. You can adjust the amount, but then you'd have to adjust it back when/if necessary. Also, if using Recurring Payments with Express Checkout you can only increase the amount by 20% every 90 days (or it might even be 120 days).

If you need to process additional charges every now and then I would recommend running an Authorization through Express Checkout or Payments Pro depending on what you're using. You could simply authorize the person's credit card or account using a [card verification / $0 authorization](https://developer.paypal.com/docs/classic/paypal-payments-pro/integration-guide/WPWebsitePaymentsPro/#cardverifications).

From then on you can process additional payments of variable amounts using Reference Transactions ([DoReferenceTransaction](https://www.x.com/developers/paypal/documentation-tools/api/doreferencetransaction-api-operation-nvp)).

You might also be interested in checking out [Adaptive Payments](https://www.x.com/sites/default/files/pp_adaptiveaccounts.pdf), specifically [Preapproval](https://www.x.com/developers/paypal/documentation-tools/api/preapproval-api-operation) / [Pay](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation). This allows users to preapprove payments amounts based on criteria specified in the Preapproval request. You can then submit payments on their behalf at any time as long as they fall within that preapproval profile.

# python - Python 2.6 urllib2 超时问题

> ID：14127115
> 
> 赞同：5
> 
> 时间：2013-01-02T18:21:24.373
> 
> 标签：python, timeout, urllib2

似乎我无法`urllib2`考虑超时。我确实阅读了 - 我想 - 所有与该主题相关的帖子，看来我没有做错任何事情。我对么？非常感谢您的帮助。

**设想：**

在继续执行剩余的脚本之前，我需要检查 Internet 连接。然后我编写了一个函数 (Net_Access)，如下所示。

*   当我在连接 LAN 或 Wifi 接口并检查现有主机名的情况下执行此代码时：一切都很好，因为没有错误或问题，因此没有超时。
*   如果我拔下 LAN 连接器或检查不存在的主机名，超时值似乎被忽略。请问我的代码有什么问题？

**一些信息：**

*   Ubuntu 10.04.4 LTS（运行到 VirtualBox v4.2.6 VM，主机操作系统是 MAC OS X Lion）
*   `cat /proc/sys/kernel/osrelease: 2.6.32-42-generic`
*   Python 2.6.5

**我的代码：**

```
#!/usr/bin/env python

import socket
import urllib2

myhost = 'http://www.google.com'
timeout = 3

socket.setdefaulttimeout(timeout)
req = urllib2.Request(myhost)

try:
    handle = urllib2.urlopen(req, timeout = timeout)
except urllib2.URLError as e:
    socket.setdefaulttimeout(None)
    print ('[--- Net_Access() --- No network access')
else:
    print ('[--- Net_Access() --- Internet Access OK') 
```

1) 工作，插入 LAN 连接器

```
$ $ time ./Net_Access 
[--- Net_Access() --- Internet Access OK

real    0m0.223s
user    0m0.060s
sys 0m0.032s 
```

2) 超时不起作用，拔掉 LAN 连接器

```
$ time ./Net_Access 
[--- Net_Access() --- No network access

real    1m20.235s
user    0m0.048s
sys 0m0.060s 
```

**添加到原始帖子：测试结果（使用 IP 而不是 FQDN）**

正如@unutbu（见评论）所建议的那样，用 IP 地址替换 myhost 中的 FQDN 可以解决问题：超时生效。

LAN 连接器插入...
$ time ./Net_Access [--- Net_Access() --- Internet Access OK

```
real    0m0.289s
user    0m0.036s
sys 0m0.040s 
```

LAN 连接器已拔出...
$ time ./Net_Access [--- Net_Access() --- 无网络访问

```
real    0m3.082s
user    0m0.052s
sys 0m0.024s 
```

这很好，但这意味着超时只能用于 IP 而不能用于 FQDN。诡异的...

是否有人找到了使用 urllib2 超时而不进入预 DNS 解析并将 IP 传递给函数的方法，或者您是否首先使用套接字测试连接，然后在确定可以到达目标时触发 urllib2？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T19:36:45.460

如果您的问题是在没有网络连接的情况下，DNS 查找需要永远（或只是太长时间）超时，那么是的，这是一个已知问题，您无法在其内部做任何事情`urllib2`来解决这个问题。

那么，所有的希望都落空了吗？嗯，不一定。

首先，让我们看看发生了什么。最终，`urlopen`依赖`getaddrinfo`，它（连同它的亲戚一样`gethostbyname`）是众所周知的套接字 API 的一个关键部分，它不能异步运行或中断（在某些平台上，它甚至不是线程安全的）。如果你想自己追溯源头，[`urllib2`](http://hg.python.org/cpython/file/2.7/Lib/urllib2.py)请按照[`httplib`](http://hg.python.org/cpython/file/2.7/Lib/httplib.py)创建连接，调用`create_connection`on [`socket`](http://hg.python.org/cpython/file/2.7/Lib/socket.py)，调用`socket_getaddrinfo`on [`_socket`](http://hg.python.org/cpython/file/2.7/Modules/socketmodule.c)，最终调用真正的`getaddrinfo`函数。这是一个臭名昭著的问题，它影响着世界上用每种语言编写的每个网络客户端或服务器，并且没有好的、简单的解决方案。

一种选择是使用已经解决了这个问题的不同的高级库。我相信[`requests`](http://python-requests.org)依赖于[`urllib3`](https://github.com/shazow/urllib3)最终有同样的问题，但[`pycurl`](http://pycurl.sourceforge.net)依赖于[`libcurl`](http://curl.haxx.se/libcurl/)，如果用 构建[`c-ares`](http://c-ares.haxx.se)，它会异步进行名称查找，因此可以超时。

或者，当然，您可以使用类似`twisted`或`tornado`其他异步网络库之类的东西。但显然重写所有代码以使用`twisted`HTTP 客户端而`urllib2`不是完全不简单。

`urllib2`另一种选择是通过猴子补丁标准库来“修复” 。如果你想这样做，有两个步骤。

首先，您必须提供一个 timeoutable `getaddrinfo`。您可以通过 binding`c-ares`或使用`ctypes`来访问特定于平台的 API（如 linux's ）来做到这一点`getaddrinfo_a`，甚至可以查找名称服务器并直接与它们通信。但真正简单的方法是使用线程。如果你做很多这些，你会想要使用单个线程或小线程池，但对于小规模使用，只需为每个调用分离一个线程。一个非常快速和肮脏（阅读：糟糕）的实现是：

```
def getaddrinfo_async(*args):
    result = None
    t = threading.Thread(target=lambda: result=socket.getaddrinfo(*args))
    t.start()
    t.join(timeout)
    if t.isAlive():
        raise TimeoutError(blahblahblah)
    return result 
```

接下来，您必须获取您关心的所有库才能使用它。根据您希望补丁的普遍性（和危险性），您可以替换`socket.getaddrinfo`它自己，或者只是`socket.create_connection`，或者只是在`httplib`甚至`urllib2`.

最后一个选择是在更高的层次上解决这个问题。如果您的网络内容发生在后台线程上，您可以在整个事情上抛出更高级别的超时，如果花费超过`timeout`几秒钟来确定它是否超时，您就知道它已经超时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:32:05.230

也许试试这个：

```
import urllib2

def get_header(url):
    req = urllib2.Request(url)
    req.get_method = lambda : 'HEAD'
    try:
        response = urllib2.urlopen(req)
    except urllib2.URLError:
        # urllib2.URLError: <urlopen error [Errno -2] Name or service not known>
        return False
    return True

url = 'http://www.kernel.org/pub/linux/kernel/v3.0/linux-3.7.1.tar.bz2'
print(get_header(url)) 
```

当我拔下我的网络适配器时，它几乎立即打印 False，而在正常情况下，它打印 True。

我不确定为什么与您的原始代码相比，它的工作速度如此之快（即使不需要设置超时参数），但也许它也适用于您。

* * *

我今天早上做了一个实验，结果确实`get_header`没有立即返回。我在关闭路由器的情况下启动了计算机。然后路由器就开机了。然后通过 Ubuntu GUI 启用网络和无线。这未能建立有效的连接。在这个阶段，`get_header`未能立即返回。

因此，这是一个重量级的解决方案，它`get_header`使用`multiprocessing.Pool`. 返回的对象`pool.apply_async`有一个`get`带有超时参数的方法。`get_header`如果在 指定的持续时间内没有返回结果`timeout`，则终止子进程。

因此，`check_http`在任何情况下都应该在大约 1 秒内返回结果。

```
import multiprocessing as mp
import urllib2

def timeout_function(cmd, timeout = None, args = (), kwds = {}):
    pool = mp.Pool(processes = 1)
    result = pool.apply_async(cmd, args = args, kwds = kwds)
    try:
        retval = result.get(timeout = timeout)
    except mp.TimeoutError as err:
        pool.terminate()
        pool.join()
        raise
    else:
        return retval

def get_header(url):
    req = urllib2.Request(url)
    req.get_method = lambda : 'HEAD'
    try:
        response = urllib2.urlopen(req)
    except urllib2.URLError:
        return False
    return True

def check_http(url):
    try:
        response = timeout_function(
            get_header,
            args = (url, ),
            timeout = 1)
        return response
    except mp.TimeoutError:
        return False

print(check_http('http://www.google.com')) 
```

# php - php表单发布，不刷新

> ID：14127117
> 
> 赞同：-2
> 
> 时间：2013-01-02T18:21:32.547
> 
> 标签：php, html, forms, refresh

我的问题是我的 html/php 表单在发布时没有“刷新”。我一直在通过“元刷新”来解决这个问题，但最近在我想要回显某些内容时遇到了一个问题，并且由于“元刷新”而从未出现过，我尝试了一些没有运气的事情，在这里是代码。

```
<?php //SESSION START
    session_start();
    if ($_SESSION['username']){
        //grant access
    }else{
        header('Location: login.html');
    }
    if(session_is_registered(username)){
        $username = $_SESSION['username'];
        if ($username!==Administrator){
            //grant access
        }else{
            header('Location: index.php');
        }
    }
?>

<html>
    <head>
        <meta charset=UTF-8 />
        <link rel="stylesheet" type="text/css" href="css/main_style.css" />
        <title>XYZ Car Rental - Rent a Car</title>
        <link rel="icon" href="favicon.ico" />
    </head>

    <body>
        <div id="container">
            <div id="header">
                <span style="color:#38C0CC;">XYZ</span> Car Rental
            </div>
            <div id="banner"><?php echo "Welcome ".$_SESSION['username'].". "?></div>
            <!--Greets user with "Welcome 'username'"-->
            <div id="navbar">
                <?php //navigation bar privaledges
                    if(session_is_registered(username)){//if logged in
                        $username = $_SESSION['username'];//creates variable: username
                        if ($username==Administrator){//if the username is equal to 'Administrator' show the following navigation
                ?>
                <a href="index.php"><div class="button"><img src="images/home.jpg" /></div></a>
                <a href="add_car.php"><div class="button"><img src="images/insert_car.jpg" /></div></a>
                <a href="remove_car.php"><div class="button"><img src="images/remove_car.jpg" /></div></a>
                <a href="update_car.php"><div class="button"><img src="images/update_car.jpg" /></div></a>
                <a href="view_car.php"><div class="button"><img src="images/view_cars.jpg" /></div></a>
                <div class="seperator"></div>
                <a href="add_user.php"><div class="button"><img src="images/add_user.jpg" /></div></a>
                <a href="remove_user.php"><div class="button"><img src="images/remove_user.jpg" /></div></a>
                <a href="update_user.php"><div class="button"><img src="images/update_user.jpg" /></div></a>
                <a href="view_user.php"><div class="button"><img src="images/view_users.jpg" /></div></a>
                <div class="seperator"></div>
                <a href="logout.php"><div class="button"><img src="images/logout.jpg" /></div></a>
                <?php }else{ //else, show the navigation bar for a user ?>
                <a href="index.php"><div class="button"><img src="images/home.jpg" /></div></a>
                <a href="rent_car.php"><div class="button"><img src="images/rent_car_s.jpg" /></div></a>
                <a href="return_car.php"><div class="button"><img src="images/return_car.jpg" /></div></a>
                <a href="view_car.php"><div class="button"><img src="images/view_cars.jpg" /></div></a>
                <div class="seperator"></div>
                <a href="logout.php"><div class="button"><img src="images/logout.jpg" /></div></a>
                <?php
                        }
                    }
                //close if's
                ?>
            </div>
            <div id="content">
                <span style="font-size:28px;">Rent Cars</span>
                <hr />
                <?php
                    $link = mysql_connect ("localhost", "root", "password");//connect to database
                    mysql_select_db ("cardatabase");//select database
                    $query = "SELECT * from cars";//select all from table, cars
                    $result = mysql_query ($query, $link);//result = query

                    $available = $_POST[available];
                    //$available = the posted available

                    if (isset($_POST['submit'])){//if submit is pressed, execute

                        if($available>0){//if there is a car avaialble of that type
                            //add one of those cars to the table, rentedcars
                            //include the name of the users session for extra purposes
                            mysql_query("INSERT INTO rentedcars(REAL_ID,ID,CARMAKE,CARMODEL,FUELTYPE,TRANSMISSION,ENGINESIZE,DOORS,DATEADDED,USERNAME) SELECT '',id,carmake,carmodel,fueltype,transmission,enginesize,doors,dateadded,'$username' FROM cars WHERE id='$_POST[hidden]'");
                            //after it has been added, run another query to reduce the 'available' by 1
                            //available = available - 1
                            mysql_query ("UPDATE cars SET available=available-1 WHERE id='$_POST[hidden]'");
                            //echo "<meta http-equiv='refresh' content='0;url=rent_car.php'/>";
                            //refresh the page after it is complete
                            $success = "Car Rented.";

                        }else{//if the 'available' == 0
                            $error = "There is no more cars of that type available.";
                            //creates a variable, to be printed in a different div
                            //all of that type are no longer available
                            //stops renting cars below 0
                        }
                    }

                    //echos the table & titles
                    echo "<table cellspacing=3 border=1 style='font-size:13px;background-color:white;'>
                        <tr style='background-color:#38C0CC;'>
                        <td>ID</td>
                        <td>Make</td>
                        <td>Model</td>
                        <td>Fuel Type</td>
                        <td>Transmission</td>
                        <td>Engine Size</td>
                        <td>Doors</td>
                        <td>Amount</td>
                        <td>Available</td>
                        <td>Date Added</td>
                        <td></td>
                        <td>Rent</td>
                        </tr>";

                    //while loop to display data from the database into a form
                    while($row = mysql_fetch_array($result))
                    {
                        echo "<form action=rent_car.php method=post>";
                        echo "<tr>";
                        echo "<td>"."<input type=text name=id value=".$row['ID'].">"." </td>";//value = database value
                        echo "<td>"."<input type=text name=carmake value=".$row['CARMAKE'].">"." </td>";//value = database value
                        echo "<td>"."<input type=text name=carmodel value=".$row['CARMODEL'].">"." </td>";//value = database value
                        echo "<td>"."<input type=text name=fueltype value=".$row['FUELTYPE'].">"." </td>";//value = database value
                        echo "<td>"."<input type=text name=transmission value=".$row['TRANSMISSION'].">" . " </td>";//value = database value
                        echo "<td>"."<input type=text name=enginesize value=".$row['ENGINESIZE'].">" . " </td>";//value = database value
                        echo "<td>"."<input type=text name=doors value=".$row['DOORS'].">"." </td>";//value = database value
                        echo "<td>"."<input type=text name=amount value=".$row['AMOUNT'].">"." </td>";//value = database value
                        echo "<td>"."<input type=text name=available value=".$row['AVAILABLE'].">"." </td>";//value = database value
                        echo "<td>"."<input type=text name=dateadded value=".$row['DATEADDED'].">"." </td>";//value = database value
                        echo "<td>"."<input type=hidden name=hidden value=".$row['ID'].">"." </td>";//hidden value
                        //hidden value helps target the ID value when it is not available
                        echo "<td>"."<input type=submit name=submit value=Rent>"." </td>";//submit
                        echo "</tr>";
                        echo "</form>";
                    }
                    //close while loop
                    echo "</table>";
                    //close table
                ?>
                <div id="errorbox">
                    <?php echo $error; ?>
                    <!--echos the error-->
                    <!--no more cars available-->
                </div>

                <div id="successbox">
                    <?php echo $success; ?>
                    <!--echos the success-->
                    <!car has been rented-->
                </div>
            </div>

            <br style="clear:both;" />
            <!--clears the float-->
            <div id="footer">
                XYZ Car Rental™
            </div>
        </div>
    </body>
</html> 
```

我知道代码有点让人头疼，任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:25:57.680

这里有很多问题。

首先，当您应该使用 PDO 或 MySQLi 时，您正在使用 mysql_*。见[这里](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

第二，

```
echo "<form action=rent_car.php method=post>"; 
```

应该：

```
echo "<form action='rent_car.php' method='POST'>"; 
```

第三，您使用的是常量而不是字符串：

```
if ($username!==Administrator){ 
```

应该

```
if ($username!=='Administrator'){ 
```

第四，您容易受到 SQLi 攻击：

```
mysql_query ("UPDATE cars SET available=available-1 WHERE id='$_POST[hidden]'");
mysql_query("INSERT INTO rentedcars(REAL_ID,ID,CARMAKE,CARMODEL,FUELTYPE,TRANSMISSION,ENGINESIZE,DOORS,DATEADDED,USERNAME) SELECT '',id,carmake,carmodel,fueltype,transmission,enginesize,doors,dateadded,'$username' FROM cars WHERE id='$_POST[hidden]'"); 
```

您在更多地方也缺少报价。

您必须再次刷新页面以查看更新内容的原因是因为您在更新之前获取数据。反过来做。先更新数据，然后获取：

所以有这个：

```
$result = mysql_query ($query, $link);//result = query 
```

在您下方`if`检查是否已发布任何内容：

```
 if (isset($_POST['submit'])){//if submit is pressed, execute 
```

在该 IF 下方进行选择查询。那应该可以解决当前的问题。但是，请不要忽略所有其他人。

# node.js - 使用 jasmine-node 和 jquery-jasmine 测试客户端 JavaScript

> ID：14127120
> 
> 赞同：1
> 
> 时间：2013-01-02T18:21:42.880
> 
> 标签：node.js, testing, bdd, jasmine-jquery, jasmine-node

我正在尝试使用`jasmine-node`and编写一些 JavaScript 单元测试`jquery-jasmine`，但遇到了配置问题。目前，这是我试图运行的唯一“测试”：

```
describe("A suite", function() {
    it("contains spec with an expectation", function() {
        loadFixtures('blah.html');
        expect(true).toBe(true);
    });
}); 
```

尝试运行测试时出现以下错误：

```
 Failures:

      1) A suite contains spec with an expectation
       Message:
         ReferenceError: loadFixtures is not defined
       Stacktrace:
         ReferenceError: loadFixtures is not defined
        at [object Object].<anonymous> (/home/chris/Source/www/projects/wash/spec/javascripts/blah.spec.js:6:9)
        at [object Object].execute (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:1001:15)
        at [object Object].next_ (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:1790:31)
        at [object Object].start (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:1743:8)
        at [object Object].execute (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:2070:14)
        at [object Object].next_ (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:1790:31)
        at [object Object].start (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:1743:8)
        at [object Object].execute (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:2215:14)
        at [object Object].next_ (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:1790:31)
        at [object Object].start (/usr/local/lib/node_modules/jasmine-node/lib/jasmine-node/jasmine-2.0.0.rc1.js:1743:8)

Finished in 0.006 seconds
1 test, 1 assertion, 1 failure 
```

当我在测试中注释掉该`loadFixtures`行时，它工作正常。

我认为`jasmine-jquery`加载不正确，但我不确定该怎么做。`nodejs`（我对or的经验很少`npm`。）

如果它具有诊断价值，那么当我运行时`which jasmine-node`（在 bash 内）我会得到一个结果，但是当我运行时`which jasmine-jquery`，我不会。我认为这是因为前者是可执行的，而后者不是，但我不想做任何假设。（`npm show`表示两个软件包都已安装。）

我究竟做错了什么？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:02:41.257

您可能只需要在使用它之前要求它;-)

```
var $ = require("jasmine-jquery");
describe("A suite", function() { ... 
```

# asp.net - PropertyName 必须设置为 ControlParameter 'SubcategoryId' 中名为 'ListOfPosts' 的控件的有效属性名称

> ID：14127122
> 
> 赞同：0
> 
> 时间：2013-01-02T18:21:47.217
> 
> 标签：asp.net, webforms

您好我正在尝试使用具有查询字符串值的参数创建一个 SQLDataSource，但我不断收到一条错误消息：

PropertyName 必须设置为 ControlParameter 'SubcategoryId' 中名为 'ListOfPosts' 的控件的有效属性名称

我似乎无法理解 propertyName 应该是什么。这是我的代码：

```
<asp:SqlDataSource ID="ListOfPosts" runat="server" 
    ConnectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\ASPNETDB.MDF;Integrated Security=True;User Instance=True" 
    ProviderName="System.Data.SqlClient" 
    SelectCommand="SELECT [forum_posts].[PostTitle], [forum_posts].[PostContent], [forum_posts].[PostDate],
    aspnet_Users.Username , forum_subcategories.SubCategoryName
    FROM [forum_posts]
    JOIN aspnet_Users ON [forum_posts].UserId = aspnet_Users.UserId
    JOIN forum_subcategories on forum_posts.SubcategoryId = forum_subcategories.SubCategoryID
    WHERE [forum_posts].SubcategoryId = @SubcategoryId">
    <SelectParameters>
        <asp:ControlParameter Name="SubcategoryId" ControlID="ListOfPosts" Type="String" DefaultValue='<%= Request.QueryString["post"] %>'/>
    </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:44:22.297

`asp:QueryStringParameter`您可以使用它来代替。旨在与您页面中的`asp:ControlParameter`控件一起使用，如果此类控件不存在，您将收到您遇到的错误

```
<SelectParameters>
    <asp:QueryStringParameter Name="SubcategoryId" Type="String" querystringfield="post"/>
</SelectParameters> 
```

*   [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.querystringparameter.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.querystringparameter.aspx)

其他是 ControlParameter、CookieParameter、FormParameter、ProfileParameter、SessionParameter

# ios - 具有嵌套资源的 AFRESTClient pathForEntity？

> ID：14127123
> 
> 赞同：2
> 
> 时间：2013-01-02T18:22:03.747
> 
> 标签：ios, afnetworking, afincrementalstore

我正在尝试使用嵌套资源 URL 获取相册中的照片，例如：

```
GET http://www.myapi.com/albums/:album_id/photos 
```

似乎最简单的方法是在我的 AFRESTClient 子类中覆盖 pathForEntity 函数。但是，我无权访问专辑对象，因此无法返回包含专辑 ID 的 URL。我应该如何覆盖/扩展来实现这一点？请参阅下文了解我是如何尝试执行此操作的，请注意我无法提供专辑 ID 的问号：

```
- (NSString *)pathForEntity:(NSEntityDescription *)entity {

  NSString *path = AFPluralizedString(entity.name);

  if ([entity.name isEqualToString:@"Photo"]) {
    path = [NSString stringWithFormat:@"albums/%d/photos", ??];
  }

  return path;
} 
```

更高的堆栈，我在 PhotosViewController -viewDidLoad 中有这个

```
- (void)viewDidLoad
{
  [super viewDidLoad];

  self.title = self.currentAlbum.name;

  NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Photo"];
  fetchRequest.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"createdAt" ascending:NO]];

  NSPredicate *predicate = [NSPredicate predicateWithFormat:@"album == %@", self.currentAlbum];
  fetchRequest.predicate = predicate;

  self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:nil];
  self.fetchedResultsController.delegate = self;
  [self.fetchedResultsController performFetch:nil];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T02:54:10.890

我们有一个类似的层次结构，最终在我们的 AFRESTClient 子类中实现了 pathForRelationship:forObject: 方法。在您的相册和照片的情况下，我想它会是这样的：

```
- (NSString *)pathForRelationship:(NSRelationshipDescription *)relationship
                        forObject:(NSManagedObject *)object
{
    if ([object isKindOfClass:[Album class]] && [relationship.name isEqualToString:@"photos"]) {
        Album *album = (Album*)object;
        return [NSString stringWithFormat:@"/albums/%@/photos", album.album_id];
    }
    return [super pathForRelationship:relationship forObject:object];
} 
```

这是假设您的模型中有 toMany 关系设置。

# python - 将字典写入 CSV 文件

> ID：14127124
> 
> 赞同：0
> 
> 时间：2013-01-02T18:22:06.290
> 
> 标签：python, csv, dictionary

> **可能重复：**
> [从 CSV 文件创建字典](https://stackoverflow.com/questions/14091387/creating-a-dictionary-from-a-csv-file)

尝试将字典打印到 CSV 文件时遇到问题。该字典目前有 4 列，但所有 4 列都打印在 1 列中。可能是我用来写入 CSV 文件的 for 循环是罪魁祸首，但我不太确定。我正在尝试在每一列中打印字典。

样本数据：

```
 Date        First Name     Last Name     Score
12/28/2012 15:15        John          Smith        20
12/29/2012 15:15        Alex          Jones        38
12/30/2012 15:15      Michael       Carpenter      25 
```

以下是一些代码摘录：

```
import csv

csvWriter = csv.writer(open("C:\\Users\\Chris\\Desktop\\test_out.csv", 'w'), delimiter=' ', quotechar=' ', quoting=csv.QUOTE_MINIMAL) 
```

在上面的 CSV 文件中读取循环：

对于阅读器中的行：

```
for k, v in row.items():

    if not k in mydict:
        mydict[k] = [v]
    else:
        mydict[k].append(v) 
```

For 循环将字典键打印到 CSV 文件。

```
for item in mydict.keys():
    csvWriter.writerow(item) 
```

当前输出（列标题）：

```
D a t e

F i r s t    N a m e

L a s t      N a m e

S c o r e 
```

想要的输出（列标题）：

```
Date      First Name       Last Name       Score 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:34:10.373

现在我更好地理解了你的结构，试试这个：

```
#first write column headers
csvWriter.writerow(list(mydict.keys())

#now data, assuming each column has the same # of values
for i in xrange(len(mydict['Date'])):
    csvWriter.writerow([mydict[k][i] for k in mydict.keys()]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:39:56.197

蟒蛇2：

```
csvWriter.writerow(mydict.keys()) 
```

蟒蛇 3：

```
csvWriter.writerow(list(mydict.keys())) 
```

# flash - 移动网站中的 Flash

> ID：14127126
> 
> 赞同：0
> 
> 时间：2013-01-02T18:22:22.460
> 
> 标签：flash

有人告诉我，为了让网站“移动友好”，您需要确保网站上没有使用 Flash。我不确定为什么会这样，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:32:17.317

主要是因为 iOS 本身不支持 Flash。

您可以使用 Flash 为 iOS 设备开发应用程序，并使用 Flash CS5 中的 iPhone 打包程序发布它们。Apple 在 2010 年宣布，他们不允许使用 3rd 方开发工具（例如 Unity 和 Flash）构建的应用程序通过 App Store 分发，但他们已经取消了这些限制。

但 iOS 设备中的网络浏览器仍然无法播放 Flash 内容。

苹果为什么要阻止 Flash 内容是一个有强烈意见的问题，但最终答案很简单：因为苹果相信从长远来看，他们会通过禁止 Flash 内容来赚更多的钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:28:43.350

Flash 是第 3 方插件，与大多数移动环境不兼容，例如 iOS 和更新的 Android 设备（截至 4.1 版）。HTML5 正在成为 Flash 的替代技术。

Steve Job 的[关于 Flash](http://www.apple.com/hotnews/thoughts-on-flash/)的思考是关于 Apple 选择不在其移动设备上支持它的一些很好的读物。

# php - Outlook 中的 PHP 表单和变音符号

> ID：14127130
> 
> 赞同：0
> 
> 时间：2013-01-02T18:22:28.217
> 
> 标签：php, forms, outlook, diacritics

我在网页上有一个 php 表单，它将邮件发送到我指定的某个地址。如果我在 gmail、hotmail 和任何在线邮件服务中查看该邮件，一切都会正常工作。变音符号没有问题，你可以看到`šđžćč`就好了。

但是，如果我将一个配置为进入我的 Outlook 的邮件地址，任何变音符号都会显示为一些奇怪的符号`ĹžÄĹĄĹžÄ`。

我什至尝试将邮件从 gmail 转发到我的 Outlook 的地址，同样的事情发生了！我什至将 Outlook 中的字符编码设置`UTF-8`为 ，我的表单也是如此。

这是 Outlook 中的一些奇怪故障还是我在表单中做错了什么？

任何帮助表示赞赏。

编辑：

我的 html 中有一个表单：

```
<?php
//If the form is submitted
if(isset($_POST['submit'])) {

    //Check to make sure that the name field is not empty
    if(trim($_POST['contactname']) == '') {
        $hasError = true;
    } else {
        $name = trim($_POST['contactname']);
    }

    //Check to make sure that the subject field is not empty
    if(trim($_POST['subject']) == '') {
        $hasError = true;
    } else {
        $subject = trim($_POST['subject']);
    }

    if(trim($_POST['goaddress']) == '') {
        $hasError = true;
    } else {
        $goaddress = trim($_POST['goaddress']);
    }

     if(trim($_POST['toaddress']) == '') {
        $hasError = true;
    } else {
        $toaddress = trim($_POST['toaddress']);
    }

    if(trim($_POST['date']) == '') {
        $hasError = true;
    } else {
        $date = trim($_POST['date']);
    }

     if(trim($_POST['time']) == '') {
        $hasError = true;
    } else {
        $time = trim($_POST['time']);
    }

    //Check to make sure sure that a valid email address is submitted
    if(trim($_POST['email']) == '')  {
        $hasError = true;
    } else if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email']))) {
        $hasError = true;
    } else {
        $email = trim($_POST['email']);
    }

    //If there is no error, send the email
    if(!isset($hasError)) {
        $emailTo = 'random.mail@gmail.com'; //Put your own email address here
        $body = "Ime i prezime: $name \n\nEmail: $email \n\nTelefon: $subject \n\nPolazišna adresa: $goaddress \n\nOdredišna adresa: $toaddress \n\nDatum: $date \n\nVrijeme: $time";
        $headers = 'From: RANDOM NAME <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

        mail($emailTo, $subject, $body, $headers);
        $emailSent = true;
    }
}
?> 
```

我有一个单独的 .php 文件，名为 form.php，我在每个页面（下拉表单）上调用我的 html，其中包含以下元素：

```
<div class="float-form">
<div class="slideToggler2" style="float;left; z-index: 100;position: absolute; cursor:pointer;">
    <img style="pointer:cursor;" src="../images/naruci_en.png"  />
</div>
    <div class="slideContent2" style="display:none; z-index: 10;position: absolute;top:20px; ">

<div class="wrapp">
    <div id="contactWrapper_en" role="form" >

        <?php if(isset($hasError)) { //If errors are found ?>
            <p class="error">Please check if you have filled out all the fields, and try again. Thank you.</p>
        <?php } ?>

        <?php if(isset($emailSent) && $emailSent == true) { //If email is sent ?>
            <div class="success">
                <p><strong>Email sent successfully!</strong></p>
                <p>One of our agents will contact you in a little while.</p>
            </div>
        <?php } ?>

        <form method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>" id="contactform">
            <div class="stage clear">
                <label for="name"><strong>Full name: <em>*</em></strong></label>
                <input type="text" name="contactname" id="contactname" value="" class="required" role="input" aria-required="true" />
            </div>

            <div class="stage clear">
                <label for="email"><strong>Email: <em>*</em></strong></label>
                <input type="text" name="email" id="email" value="" class="required email" role="input" aria-required="true" />
            </div>

            <div class="stage clear">
                <label for="subject"><strong>Telephone: <em>*</em></strong></label>
                <input type="text" name="subject" id="subject" value="" class="required" role="input" aria-required="true" />
            </div>
            <div class="stage clear">
                <label for="goaddress"><strong>Starting address: <em>*</em></strong></label>
                <input type="text" name="goaddress" id="goaddress" value="" class="required" role="input" aria-required="true" />
            </div>
            <div class="stage clear">
                <label for="toaddress"><strong>Destination: <em>*</em></strong></label>
                <input type="text" name="toaddress" id="toaddress" value="" class="required" role="input" aria-required="true" />
            </div>
             <div class="stage clear">
                <label for="date"><strong>Date of departure: <em>*</em></strong></label>
                <input type="text" name="date" id="date" value="" class="required" role="input" aria-required="true" />
            </div>
             <div class="stage clear">
                <label for="time"><strong>Time of departure: <em>*</em></strong></label>
                <input type="text" name="time" id="time" value="" class="required" role="input" aria-required="true" />
            </div>

            <p class="requiredNote"><em>*</em> Required</p>

            <input type="submit" value="Send Message" name="submit" id="submitButton_en" title="Send the order!" />

        </form>

    </div>

</div>
</div>
</div> 
```

还有一个验证 jquery 注册表单...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:00:02.497

您无需设置字符编码或担心 MIME 在该电子邮件正文中的想法。这是灾难的秘诀。

[使用Swiftmailer](http://swiftmailer.org/)之类的东西来修复它，它允许您简单轻松地构建 MIME 块。正确[设置字符编码](http://swiftmailer.org/docs/messages.html#setting-the-character-set)应该可以解决大部分问题。

# django - Nginx Webhook 允许 IP Django

> ID：14127131
> 
> 赞同：0
> 
> 时间：2013-01-02T18:22:36.680
> 
> 标签：django, configuration, nginx, ip, webhooks

我是 Nginx 的新手，在允许 webhook 访问服务器时遇到了一些问题。每当 webhook 尝试向我的 Django 服务器发送 POST 时，我都会在访问日志中看到：

54.234.20.81 - - [02/Jan/2013:18:11:57 +0000] "POST /contracts/events HTTP/1.1" 403 2319 "-" "-" 54.234.20.81 - - [02/Jan/2013: 18:11:58 +0000] "POST /contracts/events HTTP/1.1" 403 2319 "-" "-" 54.234.20.81 - - [02/Jan/2013:18:11:58 +0000] "POST /contracts /事件 HTTP/1.1" 403 2319 "-" "-"

我不确定如何授予对该 IP 的访问权限，以免被禁止。我在 Ramhost 上托管，Nginx 目录似乎是 /etc/nginx/。该目录有一个 nginx.conf，还有一个站点可用文件夹和一个站点启用文件夹。

这是 sites-available 中的配置文件（在 sites-enabled 中有一个符号链接到此文件）：

```
upstream djangoserv {
server 127.0.0.1:8080;
}

server {
    listen 80;
    server_name nameblr.com www.nameblr.com;
    access_log /home/yorango/yorangosite/logs/yorangosite-access.log;
    error_log /home/yorango/yorangosite/logs/yorangosite-error.log;

    location /static/ {
        alias /home/yorango/yorangosite/static/;
        expires 30d;
    }

    location /media/ {
        alias /home/yorango/yorangosite/static/;
        expires 30d;
    }

    location / {
        # host and port to fastcgi server
        allow 54.242.81.184;
        include fastcgi_params;
        fastcgi_pass 127.0.0.1:8080;
        fastcgi_param PATH_INFO $fastcgi_script_name;
        fastcgi_param REQUEST_METHOD $request_method;
        fastcgi_param QUERY_STRING $query_string;
        fastcgi_param SERVER_NAME $server_name;
        fastcgi_param SERVER_PORT $server_port;
        fastcgi_param SERVER_PROTOCOL $server_protocol;
        fastcgi_param CONTENT_TYPE $content_type;
        fastcgi_param CONTENT_LENGTH $content_length;
        fastcgi_pass_header Authorization;
        fastcgi_intercept_errors off;
        fastcgi_split_path_info ^()(.*)$;
    }
} 
```

这是 nginx.conf 文件，它位于 /etc/nginx/ 文件夹中。

```
user www-data;
worker_processes  1;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
    # multi_accept on;
}

http {
    include       /etc/nginx/mime.types;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;
    tcp_nodelay        on;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

我不确定“允许 54.242.81.184;”是否 是在正确的位置，或者sites-available 中的文件如何与nginx.conf 一起工作，但感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:40:37.927

你确定问题是 Nginx 吗？您是否为您的 Django 项目启用了 CSRF 保护？我很确定当 CSRF 检查失败时 Django 会发出 403。

查看这个问题以获取更多信息：[Django CSRF check failed with an Ajax POST request](https://stackoverflow.com/questions/5100539/django-csrf-check-failing-with-an-ajax-post-request)

# php - 重新加载 php 图片（验证码）

> ID：14127132
> 
> 赞同：7
> 
> 时间：2013-01-02T18:22:44.267
> 
> 标签：php, javascript, jquery, html

这是一个带有链接的验证码图像，如果用户需要，它将重新加载图片。此代码仅适用于 Google Chrome。如何让它在其他浏览器中工作？

```
<img id="captcha" src="captcha.php">

<a id='reload'>Refresh now</a>

$('#reload').click(function(){
    $('#captcha').attr('src','captcha.php')
}) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T18:26:45.660

其他浏览器可能会缓存图像。尝试以下操作：

```
$("#captcha").attr("src", "captcha.php?"+(new Date()).getTime()); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T18:26:02.773

尝试不使用缓存方法（顺便说一句，标签需要设置 href 属性）：

```
<a id='reload' href='#'>Refresh now</a>

    $('#reload').click(function(){
        var timestamp = new Date().getTime();
        $('#captcha').attr('src','captcha.php?'+timestamp)
    }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T18:26:48.750

它可能是浏览器缓存。换句话说，浏览器看到它已经加载`captcha.php`，所以它不需要再次加载它。

尝试将查询字符串附加到包含当前时间的图像源。由于图像源现在将是浏览器在尝试重新加载之前尚未加载的 URL。

```
<img id="captcha" src="captcha.php">

<a id='reload'>Refresh now</a>

$('#reload').click(function(){
    $('#captcha').attr('src','captcha.php?' + (new Date()).getTime());
}); 
```

更好的是，设置 HTTP 标头`captcha.php`以确保浏览器不会缓存它。

```
<?php
  // Set headers to NOT cache a page
  header("Cache-Control: no-cache, must-revalidate"); //HTTP 1.1
  header("Pragma: no-cache"); //HTTP 1.0
  header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past
?> 
```

来源：[https ://stackoverflow.com/a/4485194/284685](https://stackoverflow.com/a/4485194/284685)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T18:28:57.613

尝试这个：

**DOM**

```
<div id="captcha-container">
    <img src="captcha.php" id="captcha">
</div> 
```

**jQuery**

```
$('#reload').click(function() {
    $('#captcha').remove();
    $('#captcha-container').html('<img src="captcha.php" id="captcha">');
}); 
```

**网络日志**

每次我单击重新加载时，都会发出一个新请求。

```
GET captcha.php 
200 OK
127.0.0.1:80

GET captcha.php 
200 OK
127.0.0.1:80

GET captcha.php 
200 OK
127.0.0.1:80 
```

添加新的 img 元素将导致浏览器重新加载它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-25T23:22:59.210

由于到目前为止所有的答案都使用[jQuery](http://jquery.com/)，我想我会发布我的，它只使用纯 Javascript。

```
// Helper function to attach event listener functions to HTML elements.
function attach(el, event, fun) {
  if (el.addEventListener) {
    el.addEventListener(event, fun);
  }
  else {
    el.attachEvent("on"+event, fun);
  }
}

// Find the <a id='reload'> element.
var id_reload = document.getElementById("reload");
if (null !== id_reload) {
  // Find the <img id='captcha'> element. We assume this works, so no check against null.
  var id_captcha = document.getElementById("captcha");
  attach(id_reload, "click", function() {
    id_captcha.src = "captcha.php?" + (new Date()).getTime();
  });
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-31T05:51:51.853

如果图像的 src 保持不变，浏览器将不会向服务器发送新的 HTTP 请求。所以通过添加一个无用的时间戳来更改 src。

在浏览器 JavaScript 中：

```
var capImage = document.getElementById("captcha-image");  
capImage.addEventListener("click", function () {  
    capImage.src = "/captcha?timestamp=" + (new Date()).getTime();  
}); 
```

这是一个刷新验证码图像的演示。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-16T21:25:10.210

您还需要删除时间戳，因为它总是与之前的源 URL 连接。当用户多次单击重新加载按钮时，您可能会遇到问题。因此，最好在添加新时间戳之前从 url 中删除之前的时间戳。

```
$('#reload').on('click', function(){
    var img=$('#captchaimage');
    var src=img.attr('src');
    var i=src.indexOf('?dummy=');
    src=i!=-1?src.substring(0,i):src;
    d = new Date();
    img.attr('src',src+'?dummy='+d.getTime());
}); 
```

# java - 文本视图到字符串

> ID：14127134
> 
> 赞同：2
> 
> 时间：2013-01-02T18:22:51.333
> 
> 标签：java, android, string, textview

我正在尝试将 TextView 转换为字符串，但我不确定我是否以正确的方式进行操作，下面是我认为可以工作的代码，但我不断收到错误。

```
TextView test1 = (TextView)findViewById(R.id.result1);
String testA = test1.getText().toString(); 
```

这是执行此操作的正确方法还是有其他方法？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T18:25:24.917

你的代码是正确的。请注意，它只会`onCreate`在被调用并且您的`contentView`设置已设置后才起作用。

# c# - 将 javascript 条件转换为 C# ASP.Net 解决方案

> ID：14127136
> 
> 赞同：0
> 
> 时间：2013-01-02T18:22:59.240
> 
> 标签：c#, asp.net, vb.net

我有一个用 JavaScript 编写的条件语句，但我在 asp.net 中使用 Gridview，需要帮助将其转换为 C# 或 VB。此外，如果您能帮助我在哪里使用页面实现代码，我们将不胜感激。

下面的代码将“scheduledTime”变量（TIMESTAMP）与“currentTime”（系统时钟）进行比较，并将返回该行的背景。

```
var currentTime = new Date(); /* not sure if this is the correct time object to use */
var scheduledTime = scheduledTime();

if (scheduledTime >= 15mins) {
return 'background-color:red;'
} else if (scheduledTime > 15mins <= 30mins) {
return 'background-color:yellow;'
} else if (scheduledTime > 30mins <= 2hours) {
return 'background-color:green;'
} else if (scheduledTime > 2hours) {
return 'background-color:none;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:37:06.010

这应该是等效版本：

```
protected void grid_RowDataBound(Object sender, GridViewRowEventArgs e)
{

 if(e.Row.RowType == DataControlRowType.DataRow)
 {
   if((DateTime.Now - DateTime.Parse((e.Row.DataItem as DataRowView)["scheduledTime "])).TotalMinutes<=15)
       e.Row.BackColor = System.Drawing.Color.Red;
   else if  //... etc
 } 
```

在您的 Gridview 标记中，只需添加一个 OnRowDataBound 处理程序：

```
<asp:gridview runat="server" id="yourGrid" OnRowDataBound="grid_RowDataBound" ...> 
```

# machine-learning - 如何在 matlab 中使用 svmpredict？

> ID：14127145
> 
> 赞同：0
> 
> 时间：2013-01-02T18:23:26.767
> 
> 标签：machine-learning, label, svm, libsvm, predict

[predicted_label, accuracy, decision_values/prob_estimates] = svmpredict(testing_label_vector, testing_instance_matrix, model [, 'libsvm_options']);

**1.我在matlab中使用libsvm进行图像分类。testing_label_vector、testing_instance_matrix、decision_values/prob_estimates，最重要的是，“svmpredict”中的准确性是什么意思？**

**2\. 如果我用它来测试以获得准确度值，我是否必须知道 testing_label_vector 的值？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:27:36.440

(1)

*   `testing_label`：是您要测试的数据的真实标签
*   `testing_instance_matrix`: 是您要测试的数据，每行一个。每个数据点的标签都在 testing_label 中。
*   `decision_values`: 是决策值
*   `accuracy`：预测标签与真实标签的百分比是多少

(2)

是的。您当然需要基本事实来计算准确性。

# compiler-errors - 编译cydia时出现错误1

> ID：14127146
> 
> 赞同：0
> 
> 时间：2013-01-02T18:23:29.497
> 
> 标签：compiler-errors, terminal, cydia

当我尝试编译 cydia（来自 git://git.saurik.com/cydia.git，只需将其复制并粘贴到浏览器栏中）终端给我这个：

```
Leos-MacBook-Pro:cydia leogalli$ make
[cycc] SDURLCache/SDURLCache.m
[cycc] Menes/invocationWithSelector.mm
[cycc] Menes/radixSortWithSelector.mm
[cycc] Menes/yieldToSelector.mm
[cycc] CyteKit/MFMailComposeViewController-MailToURL.mm
[cycc] CyteKit/TableViewCell.mm
[cycc] CyteKit/ViewController.mm
[cycc] CyteKit/WebScriptObject-Cyte.mm
[cycc] CyteKit/WebView.mm
[cycc] CyteKit/WebViewController.mm
[cycc] CyteKit/WebViewTableViewCell.mm
[cycc] CyteKit/dispatchEvent.mm
[cycc] CyteKit/stringWithUTF8Bytes.mm
[cycc] Cydia/LoadingView.mm
[cycc] Cydia/LoadingViewController.mm
[cycc] Cydia/MIMEAddress.mm
[cycc] MobileCydia.mm
[cycc] Version.mm
[cycc] Sources.mm
[cycc] lookup3.c
[link] SDURLCache/SDURLCache.o Menes/invocationWithSelector.o Menes/radixSortWithSelector.o Menes/yieldToSelector.o CyteKit/MFMailComposeViewController-MailToURL.o CyteKit/TableViewCell.o CyteKit/ViewController.o CyteKit/WebScriptObject-Cyte.o CyteKit/WebView.o CyteKit/WebViewController.o CyteKit/WebViewTableViewCell.o CyteKit/dispatchEvent.o CyteKit/stringWithUTF8Bytes.o Cydia/LoadingView.o Cydia/LoadingViewController.o Cydia/MIMEAddress.o MobileCydia.o Version.o Sources.o lookup3.o
ld: file is universal (4 slices) but does not contain a(n) armv6 slice: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.o for architecture armv6
collect2: ld returned 1 exit status
make: *** [MobileCydia] Error 1
Leos-MacBook-Pro:cydia leogalli$ make
[link] SDURLCache/SDURLCache.o Menes/invocationWithSelector.o Menes/radixSortWithSelector.o Menes/yieldToSelector.o CyteKit/MFMailComposeViewController-MailToURL.o CyteKit/TableViewCell.o CyteKit/ViewController.o CyteKit/WebScriptObject-Cyte.o CyteKit/WebView.o CyteKit/WebViewController.o CyteKit/WebViewTableViewCell.o CyteKit/dispatchEvent.o CyteKit/stringWithUTF8Bytes.o Cydia/LoadingView.o Cydia/LoadingViewController.o Cydia/MIMEAddress.o MobileCydia.o Version.o Sources.o lookup3.o
ld: file is universal (4 slices) but does not contain a(n) armv6 slice: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.o for architecture armv6
collect2: ld returned 1 exit status
make: *** [MobileCydia] Error 1 
```

那么这是什么意思？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:35:53.623

> ld：文件是通用的（4 片），但不包含（n）armv6 片：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib /crt1.o 用于架构 armv6

此错误意味着 makefile 中的链接器命令请求二进制文件与 armv6 CPU 兼容，但这在 Xcode 4.5 中是不可能的，因为 iOS 6 SDK 不再支持 armv6。

解决方案是从 Apple 下载 Xcode 4.4.1 DMG，将其 Xcode.app 复制到 /Applications/Xcode441.app，然后`xcode-select`：

```
sudo xcode-select --switch /Applications/Xcode441.app/Contents/Developer 
```

# twitter-bootstrap - 为什么 bootstrap 在 .span 上使用浮点数而不是 display: inline-block？

> ID：14127150
> 
> 赞同：15
> 
> 时间：2013-01-02T18:23:54.310
> 
> 标签：twitter-bootstrap, grid, css-float, css

我正在修改自定义**网格**，想看看其他人是如何创建他们的网格系统的。由于 twitter 的**引导程序**似乎很受欢迎，我查看了它的代码。现在我想知道**他们为什么要使用花车？**我会使用`display: inline-block;`html 元素，`display: inline;`或者`display: block;`我会尽量避免浮动。但出于某种原因，引导程序创建者决定使用浮点数。首先，我认为他们使用它们具有向后兼容性，因为 ie6 不支持`display: inline-block;`而 ie7 仅在`display: inline;`默认情况下支持元素。但是 ie6 或多或少退出了游戏，因为他们使用使用 *zoom: 1;的[micro clearfix hack 。](http://nicolasgallagher.com/micro-clearfix-hack/)**以ie6+** IMO为目标，他们可以复制相同的`display: inline-block;``*display: inline; *zoom: 1;`所以最后一个问题**为什么浮动在显示内联块上**？他们试图解决我上面没有提到的任何问题吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-27T13:00:25.200

内联块可以识别空白，具有实际内容的自动宽度，并按照它们在 HTML 中的顺序堆叠。浮点数不是但需要 clearfix 方法，并且基于块元素。这些元素在水平可用空间上具有自动宽度。纯粹从语义上讲，内联块的语义较少，因为空格感知格式和顺序的重要性。但是纯粹从功能的角度来看，两者都不是为网格而设计的。如果不是伪 CSS，我们也会有非语义的 HTML 标签 clearfixe。所以在我看来，他们都不是赢家。但是当 flexbox 将在未来几年成为强制性时，暂时没有其他选择。

使用内联块：

```
<div>
    <div style="display:inline-block; width:30%;">col1
    </div><div style="display:inline-block; width:70%;">col2</div>
</div> 
```

标签必须粘在一起/附加，以消除任何排水沟。容器 div 是强制项目成为单独行的一部分所必需的。

带花车：

```
<div class="clearfix">
    <div style="float:left; width:30%;">col1</div>
    <div style="float:left; width:70%;">col2</div>
</div> 
```

Clearfix 是强制“行”所必需的（在浮动后消除任何正常的流程项目问题或浮动）

是否使用其中一种取决于您的目标（和品味）。我必须说我喜欢 inline-blocks 多于浮动，只要你知道 col 宽度或使用相对大小 (%)。我认为它比带有 clearfix 的浮动更直观和可预测，如果按照应该如何使用它来解决甚至不是问题的问题，那么它的修复。只有内联块的空白意识会迫使你使用一些时髦的 html ，这是一个缺点。

具有讽刺意味的是，表格完全可以完成所有这些（甚至是高度和垂直对齐），没有任何问题。由于必须按顺序放置内联块，因此这里有一个讨论的动机。

如果我们谈论的是响应式的，表格会“丢失”内联块。假设您在台式机上有 4 个 cols，而您希望在平板电脑上有 2 个 cols，而在移动设备上有 1 个 cols。使用内联块，您“只是”为 cols 提供其他宽度尺寸，并且它们希望包裹得很好（注意它们折叠时的边距）。使用表格，您必须绑定到实际的行，这可能非常顽固。Flexbox 用了很久，看起来很漂亮。您可以在某些情况下灵活调整布局。

Bootstrap 可以很方便地了解他们是如何做某事的。只需阅读 3.0，他们正在使用相对网格大小。这给嵌套网格和对齐带来了问题。

```
----  --a-  ----  ----
---b------
....  ..c. 
```

Col a 是一个正常的父 col。Col c 是 b 的子嵌套 col。除非您使用填充和边框模型，否则很难将 c 与具有相对大小的 a 对齐，因为装订线对于容器是可变的。但是那样你会失去很多灵活性。当您希望 col 具有一些背景和填充时，您会弄乱网格系统，因此您必须使用您设置样式的容器，这会使代码混乱。我还没有研究他们是否找到了解决方案。我还没有。我使用了固定像素，但这意味着在响应式设计中你只能有几个固定宽度，并且对于移动设备周围的一切都使用相对网格。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-16T18:49:25.430

我更喜欢使用`display: inline-block;`而不是的网格系统`float`，例如[Pure](http://purecss.io/grids/ "纯的")（以前的 Yahoo YUI Grid），因为它们在没有额外样式的情况下实现了国际化；将文本方向更改为从右到左，布局自动反转；花车不这样做。浮动还引入了*清除*和其他跨浏览器奇怪的需要。正如 Pure 所证明的那样，任何`inline-block`可能出现的错误都可以得到纠正。至于不*应该*用于布局`float`的批评，也许跨浏览器中心也应该禁止使用。我也会质疑*语义网这个词是否*`display: inline-block;`*`display: table;`*确实适用于 CSS，因为该术语主要关注 HTML 并使用其元素和属性来赋予机器可读的含义；CSS 的全部意义在于按照人们的意愿彻底地设置语义 HTML 的样式，因此是*CSS Zen Garden*等经典网站。**

 **我说只要该技术没有利用漏洞，没有阻碍用户和设备的内容并且得到足够的支持，那么它是可以接受的。没有理由不能以非正统但受支持的方式使用 CSS，就像 Stu Nicholls 的 CSSPlay。

有趣的是，[Flexible Box](http://www.w3.org/TR/css3-flexbox/ "软盒")也被合并到 Pure grids 中，这是一种与现代浏览器（≥IE10 和等效浏览器）兼容的高级布局系统。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-03T22:25:39.593

在语义网的术语中，`display: inline-block`当我们想要`<img>`在文本行中放置块级元素时应该使用。我们不应该使用内联布局来制作页面的主要布局。with 的元素也会从父元素的和等`display: inline-block`属性中生效。这会降低页面布局的准确性。您最好养成使用而不是在制作页面主布局时的习惯。`font-size``line-height``float``inline-block`**

# c# - ADODB.Recordset 从 C# dll 返回为 null

> ID：14127152
> 
> 赞同：0
> 
> 时间：2013-01-02T18:24:03.190
> 
> 标签：c#, ms-access-2007, adodb

我创建了一个用于 MS Access 的 C# dll。在我的开发机器上一切正常。C# dll 具有返回类型为`ADODB.Recordset`. 我已将返回的记录集与 MS Access 表单绑定，它在我的开发机器上运行良好。

问题是当我在另一台机器上使用安装程序安装 dll 并运行 MS Access 应用程序时。没有错误，但它总是返回一个`null`记录集。我检查了 MS Access 中的引用，它引用了我的自定义 dll 和 Microsoft ActiveX 数据对象 2.1 库，调用 C# 方法没有错误。返回数组和字符串的其他方法工作正常，只有`ADODB.Recordset`作为返回类型的方法有这个问题。

我的开发机器：Windows Vista Service Pack Service Pack 2 测试机器：Windows 7 Professional Edition

C#dll中将datatable转为ADOD.Recordset的代码如下，

```
private Recordset ConvertToRecordset(DataTable inTable)
{
    ADODB.Recordset result = new ADODB.Recordset();
    result.CursorLocation = ADODB.CursorLocationEnum.adUseClient;

    ADODB.Fields resultFields = result.Fields;
    System.Data.DataColumnCollection inColumns = inTable.Columns;

    foreach (DataColumn inColumn in inColumns)
    {
        resultFields.Append(inColumn.ColumnName
              , TranslateType(inColumn.DataType)
              , inColumn.MaxLength
              , inColumn.AllowDBNull ? ADODB.FieldAttributeEnum.adFldIsNullable :
                                         ADODB.FieldAttributeEnum.adFldUnspecified
              , null);
    }

    result.Open(System.Reflection.Missing.Value
              , System.Reflection.Missing.Value
              , ADODB.CursorTypeEnum.adOpenStatic
              , ADODB.LockTypeEnum.adLockOptimistic, 0);

    foreach (DataRow dr in inTable.Rows)
    {
        result.AddNew(System.Reflection.Missing.Value,
                      System.Reflection.Missing.Value);

        for (int columnIndex = 0; columnIndex < inColumns.Count; columnIndex++)
        {
            resultFields[columnIndex].Value = dr[columnIndex];
        }
    }

    return result;
}

private DataTypeEnum TranslateType(Type columnType)
{
    switch (columnType.UnderlyingSystemType.ToString())
    {
        case "System.Boolean":
            return ADODB.DataTypeEnum.adBoolean;

        case "System.Byte":
            return ADODB.DataTypeEnum.adUnsignedTinyInt;

        case "System.Char":
            return ADODB.DataTypeEnum.adChar;

        case "System.DateTime":
            return ADODB.DataTypeEnum.adDate;

        case "System.Decimal":
            return ADODB.DataTypeEnum.adCurrency;

        case "System.Double":
            return ADODB.DataTypeEnum.adDouble;

        case "System.Int16":
            return ADODB.DataTypeEnum.adSmallInt;

        case "System.Int32":
            return ADODB.DataTypeEnum.adInteger;

        case "System.Int64":
            return ADODB.DataTypeEnum.adBigInt;

        case "System.SByte":
            return ADODB.DataTypeEnum.adTinyInt;

        case "System.Single":
            return ADODB.DataTypeEnum.adSingle;

        case "System.UInt16":
            return ADODB.DataTypeEnum.adUnsignedSmallInt;

        case "System.UInt32":
            return ADODB.DataTypeEnum.adUnsignedInt;

        case "System.UInt64":
            return ADODB.DataTypeEnum.adUnsignedBigInt;

        case "System.String":
        default:
            return ADODB.DataTypeEnum.adVarChar;
    }
} 
```

我像这样将 DataTable 传递给上述方法并返回结果：

```
ADODB.Recordset instanceRS = ConvertToRecordset(instancesDT);
return instanceRS; 
```

再来一次：在我的开发机器上返回的数据集很好，并且所有记录都已填充，但在测试机器上它始终为空。我在某处读到 Microsoft ActiveX Data Objects 2.1 Library for Windows 7 必须对其进行处理，但我找不到更具体的内容。这是正确的吗？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:38:22.293

这是一个 ActiveX 控件吗？如果是这样，您确定您的安装程序正在注册activex dll吗？

您需要在本地机器上注册activex dll。

（例如，[谷歌搜索](https://www.google.com/search?q=registering%20activex%20dll)显示了[这一点](http://www.cknotes.com/?p=361)）

# java - 即使使用 javap 验证了类路径和 .class 文件，Java 也找不到符号错误

> ID：14127154
> 
> 赞同：3
> 
> 时间：2013-01-02T18:24:11.400
> 
> 标签：java, jar, classpath

我正在使用 Maven 构建并得到一个看似无害的“未找到符号”错误 - 问题是我已经用我知道的所有较低级别的 Java 工具验证了构建是正确的，而且它看起来很密封。我用这个命令行构建：

```
javac -d /home/dan/EmailClient/Initial-Client/target/classes -classpath <many jars>:
/thepath/Common/1.0-SNAPSHOT/Common-1.0-SNAPSHOT.jar  /* I need this one */
-sourcepath /thepath/src/main/java: <the files> 
-s /thepath/target/generated-sources/annotations 
-g -nowarn -target 1.7 -source 1.7 -encoding UTF-8 
```

得到这个错误：

```
Launcher.java:119: error: cannot find symbol
    return Promise.onPool(getterPool).continueWith(new Transformer<Void, Promise<List<Void>>>() { 
```

（错误指向`onPool`）

并运行`jar xf Common-1.0-SNAPSHOT.jar`（`cd`通过在命令行中复制和粘贴目录），然后

```
javap Promise.class 
```

这表明

```
 public static me.unroll.functional.Promise<java.lang.Void> onPool(java.util.concurrent.Executor); 
```

所以这在我看来是无懈可击的——我缺少什么调试步骤？

此外，这可以在单独的机器上正常构建，并且可以在 Eclipse 中正常运行，并打开所有相关的源文件，而不是从我的实际构建机器上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:44:00.690

我建议您检查`<many jars>`类路径中的部分，您可能会在其中找到旧版本的 Maven 构建的 jar，它正在赢得类名解析游戏。

# macos - 在 SSH 中使用 unzip 命令与 Mac 终端不工作

> ID：14127155
> 
> 赞同：0
> 
> 时间：2013-01-02T18:24:17.587
> 
> 标签：macos, ssh, terminal, unzip

我从 Mac Terminal Bash Shell 登录到我的服务器，但 unzip 命令不起作用，我不断收到以下消息：

```
bash: unzip: command not found 
```

我可以从 Mac 终端通过 SSH 解压缩文件吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T18:39:41.643

该程序`unzip`应位于`/usr/bin`：

```
$ type unzip
unzip is /usr/bin/unzip 
```

最坏的情况，你总是可以“按名字要求”：

```
$ /usr/bin/unzip foo.zip 
```

你应该检查你的`PATH`变量，因为它通常应该包括`/usr/bin`：

```
$ echo $PATH
$ PATH=/bin:/usr/bin:$PATH
$ export PATH 
```

确保您已为终端选择了**登录 shell**。`PATH`这将在 shell 启动时为变量设置一个好的值。

# unix-timestamp - IAR-timestamp 上的 C 编程转换为可读格式

> ID：14127158
> 
> 赞同：0
> 
> 时间：2013-01-02T18:24:37.247
> 
> 标签：unix-timestamp

我正在使用 Z-stack-CC2530-2.5 来开发基于 Zigbee 的应用程序。我遇到了时间图转换问题。

我正在使用 osal_ConvertUTCTime 方法将 uint32 时间戳值转换为 timestampStruct，如下所示：

```
osal_ConvertUTCTime(& timestampStruct, timestamp); 
```

结构定义如下：

```
typedef struct{
uint8 seconds;
uint8 min;
uint8 hour;
uint8 day;
uint8 month;
uint16 year;
} UTCTimeStruct 
```

我的问题：

如何将 Struct 的内容以人类可读的格式写入 UART 端口？

例子：

```
HalUARTWrite (Port0, timestampStruct, len)     // Output: 22/1/2013 12:05:45 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T01:51:25.693

我目前没有函数 HalUartWrite 的原型，但我用谷歌搜索了它，有人这样使用它：

```
HalUARTWrite(DEBUG_UART_PORT, "12345", 6); 
```

所以我猜第二个参数一定是一个指向char的指针。您不能只将 struct UTCTimeStruct 变量传递给第二个参数。如果只需要将原始数据输出到串口。您需要将结构转换为 char * 以使编译器满意。但一般来说，这是不好的做法。在您的情况下，这可能不是问题，因为您在所有结构字段都是 char 或 short 的 8 位处理器中工作。一般来说，如果你将一个结构转换成一个 char * 并打印出来，由于结构填充，你会在结构字段之间得到很多无意义的字符。

好的。有点跑题了。回到您的问题，您需要自己将结构转换为友好的字符串。因为您知道您的输出字符串的格式为“22/1/2013 12:05:45”，它具有固定长度，所以您可以简单地声明一个该长度的 char[]。并通过位操作 uint32 时间戳值手动填写数字。之后，您可以将 char[] 传递给第二个参数，并将确切的长度传递给第三个参数。

# c++ - 使用 QPixmap::load( ) 读取 GeoTiff 时的 TIFFReadDirectory 警告

> ID：14127160
> 
> 赞同：4
> 
> 时间：2013-01-02T18:24:51.693
> 
> 标签：c++, qt, tiff, geotiff

我有一个 geotiff 文件，我正在使用 QPixmap::load() 将其加载到 QPixmap 中。我多次收到以下警告打印到控制台。但是，直接使用 libtiff 会在没有警告的情况下打开它。

关于如何减轻 QT 中这些难看的警告的任何想法？

```
TIFFReadDirectory: Warning, foo: unknown field with tag 33550 (0x830e) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 33922 (0x8482) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 34735 (0x87af) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 34736 (0x87b0) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 34737 (0x87b1) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 33550 (0x830e) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 33922 (0x8482) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 34735 (0x87af) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 34736 (0x87b0) encountered.
TIFFReadDirectory: Warning, foo: unknown field with tag 34737 (0x87b1) encountered. 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:45:59.467

These are custom tags which can be defined with the libtiff library:
[http://www.remotesensing.org/libtiff/addingtags.html](http://www.remotesensing.org/libtiff/addingtags.html)

They are probably EXIF tags:
[http://www.awaresystems.be/imaging/tiff/tifftags/privateifd/exif.html](http://www.awaresystems.be/imaging/tiff/tifftags/privateifd/exif.html)

These are the known tags to libtiff:
[http://trac.imagemagick.org/browser/tiff/trunk/libtiff/tiff.h#L148](http://trac.imagemagick.org/browser/tiff/trunk/libtiff/tiff.h#L148)

Since the new definitions include type and count, you may guess, what these tags mean. Also you can run exiftool to examine unknown TIFF tags:
$ exiftool -htmldump sample.tif > /tmp/dump.html; firefox /tmp/dump.html

# grails - Cobertura 没有在 grails 中分析项目

> ID：14127165
> 
> 赞同：0
> 
> 时间：2013-01-02T18:25:08.787
> 
> 标签：grails, junit, asmx, code-coverage, cobertura

我正在使用 grails 1.3.7。我安装了代码覆盖插件。并将 cobertura 1.9.4.jar 和 asm2.2.3.jar 放在 STS 工作区的项目 lib 文件夹中。使用`grails test-app -coverage`命令运行。当我这样做时运行整个 Junit 测试用例，它在目标的 Cobertura 文件夹中生成报告。但在生成的 HTML 代码中，它显示零类，所有其他类都为零。

最后在控制台中，它在运行测试用例后显示 0 个类加载和 0 个类保存。

我也尝试在 BuildConfig.groovy 中添加，

```
coverage { sourceInclusions = ['grails-app/target*'] } 
```

它没有解决路径

那么我该如何解决这个问题以获得正确的 cobertura 报告..？

当我使用上述命令运行时，代码覆盖率（cobertura）会自动检测类还是手动我们不得不说..??

我通过注释行文档浏览了 cobertura 仪器参考。`cobertura-instrumented.bat --destination ...`如果使用这些注释，他们会使用这些注释`cobertura-instrumented.bat is not internal or external command`，例如这个错误即将到来。

如何纠正这个问题并使这个插件正确工作以获得正确的结果而不是 0%..??

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:34:00.980

在我将 lib jar 更改为 asm2.2.1 到 asm3.1 以及添加了 asm-util.jar 和 oro.jar 之后，代码覆盖率正确显示了输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:13:26.167

确保您的应用程序没有在您运行测试套件的同时运行。Cobertura 需要检测您编译的代码，如果应用程序正在运行，它可能会干扰它。

# msmq - 移动存储文件夹时出错

> ID：14127168
> 
> 赞同：1
> 
> 时间：2013-01-02T18:25:28.303
> 
> 标签：msmq

我有 Windows 2008 R2 服务器。而且我刚刚安装了一个全新的 msmq 服务，队列中没有旧消息。

默认存储文件夹是`C:\Windows\System32\msmq\storage`，我想把它移到`D:\Data\msms\storage`. 所以我打开计算机管理-> 服务和应用程序-> 消息队列，右键单击它并选择属性，切换到存储选项卡。我在所有 3 个文本框中输入了 D:\Data\msmq\storage。新文件夹根本不存在，当我单击 Apply button system prompt`The folder d:\Data\msmq\storage does not exist. Do you want to create it now?`时，我单击 Yes 按钮。现在我看到的下一个屏幕是`The folder d:\Data\msmq\storage cannot be created. Error: The system cannot find the path specified.`

有什么解决办法吗？

# wpf - 如何防止子/从网格视图上的验证错误停止应用程序

> ID：14127170
> 
> 赞同：0
> 
> 时间：2013-01-02T18:25:35.473
> 
> 标签：wpf, xaml, wpfdatagrid

我有 master-slave `DataGrid`，而 master 包含不同的客户对象。当在主中选择特定客户时，子显示该客户的订单。（每个客户都有一个`ObservableCollection<order>`orders 属性。订单有一个送货地址和一个数量。我使用以下 XML

```
<StackPanel DataContext="{StaticResource Customers1}" Orientation="Horizontal">
    <DataGrid ItemsSource="{Binding}" AutoGenerateColumns="False" 
   IsSynchronizedWithCurrentItem="True">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}"/>
        </DataGrid.Columns>
    </DataGrid>
    <DataGrid ItemsSource="{Binding /orders}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Delivery Adress">
                <DataGridTextColumn.Binding>
                    <Binding Path="deliveryAddress"></Binding>
                </DataGridTextColumn.Binding>
            </DataGridTextColumn>
            <DataGridTextColumn Header="Quantity">
                <DataGridTextColumn.Binding>
                    <Binding Path="quantity">
                        <Binding.ValidationRules>
           <local:PositiveDoubleValidationRule></local:PositiveDoubleValidationRule>
                        </Binding.ValidationRules>
                    </Binding>
                </DataGridTextColumn.Binding>
            </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid>
</StackPanel> 
```

交货日期和数量是可编辑的。我添加了一个自定义验证规则，以确保数量解析为正数，否则会导致验证错误。![在此处输入图像描述](../Images/70a9c688a0b317f85dfbd8190b0a2ccd.png)

这可行，但是当我选择另一个客户 (Robert) 而当前客户 (Mark) 的订单中仍然存在验证错误，然后再次选择输入错误的客户 (Mark) 时，应用程序将停止工作。（弹出说明：[应用程序名称]已停止工作）。

当 master 为`ComboBox`. 然而，奇怪的是，当孩子是一个简单的 时，它不会发生`TextBox`。

无论如何，我试图想出解决这个问题的解决方案，但到目前为止我还没有想出一些像样的东西。什么是好的选择？

编辑：我的班级订单执行如下：

```
class Order
{

    public string deliveryAddress
    {
        get;
        set;
    }

    public double quantity
    {
        get;
        set;
    }

    public Order()
    {

    }
} 
```

客户是一个`ObservableCollection<customer>`，并且每个客户都包含一个订单类型的属性 `ObservableCollection<Order>`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:06:54.487

它有帮助的可能性很小，但不要使用集合同步，而是尝试直接绑定到选定的项目。就像是：

```
<StackPanel DataContext="{StaticResource Customers1}" Orientation="Horizontal">
    <DataGrid x:Name="MasterGrid" ItemsSource="{Binding}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Name" Binding="{Binding Path=Name}"/>
        </DataGrid.Columns>
    </DataGrid>
    <DataGrid ItemsSource="{Binding SelectedItem.orders, ElementName=MasterGrid}" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Delivery Adress">
                <DataGridTextColumn.Binding>
                    <Binding Path="deliveryAddress"></Binding>
                </DataGridTextColumn.Binding>
            </DataGridTextColumn>
            <DataGridTextColumn Header="Quantity">
                <DataGridTextColumn.Binding>
                    <Binding Path="quantity">
                        <Binding.ValidationRules>
                           <local:PositiveDoubleValidationRule></local:PositiveDoubleValidationRule>
                        </Binding.ValidationRules>
                    </Binding>
                </DataGridTextColumn.Binding>
        </DataGridTextColumn>
    </DataGrid.Columns>
</DataGrid> 
```

最好在视图模型上为所选项目提供一个属性，而不是与元素名称绑定，但它可以用于测试。

# java - 如何在没有java utils的情况下比较两个字符串数组

> ID：14127173
> 
> 赞同：3
> 
> 时间：2013-01-02T18:25:55.530
> 
> 标签：java, arrays, compare

检查数组 arr1 是否包含与 arr2 相同的元素，在 java 中的顺序相同。

例如：

```
 isTheSame({"1", "2", "3"}, {"1", "2", "3"}) → true
    isTheSame({"1", "2", "3"}, {"2", "1", "1"}) → false
    isTheSame({"1", "2", "3"}, {"3", "1", "2"}) → false 
```

到目前为止我有

```
public boolean isTheSame(String[] arr1, String[] arr2)
{
   if (arr1.length == arr2.length)
   {
      for (int i = 0; i < arr1.length; i++)
       {
          if (arr1[i] == arr2[i])
          {
            return true;
          }
       }
    }
    return false;  
 } 
```

问题在于它只比较两个数组的第一个元素。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T18:28:59.717

您一直在迭代，直到找到匹配项。你应该寻找一个不匹配的字符串，你应该使用`equals` not`==`

```
// same as Arrays.equals()
public boolean isTheSame(String[] arr1, String[] arr2) {
    if (arr1.length != arr2.length) return false;
    for (int i = 0; i < arr1.length; i++)
        if (!arr1[i].equals(arr2[i]))
            return false;
    return true;
} 
```

仅供参考，这就是 Arrays.equals 所做的，因为它也处理`null`值。

```
public static boolean equals(Object[] a, Object[] a2) {
    if (a==a2)
        return true;
    if (a==null || a2==null)
        return false;

    int length = a.length;
    if (a2.length != length)
        return false;

    for (int i=0; i<length; i++) {
        Object o1 = a[i];
        Object o2 = a2[i];
        if (!(o1==null ? o2==null : o1.equals(o2)))
            return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:29:46.580

```
public boolean isTheSame(String[] arr1, String[] arr2)
{
    if (arr1.length == arr2.length)
    {
         for (int i = 0; i < arr1.length; i++)
          {
             if ((arr1[i] != null && arr2[i] != null && !arr1[i].equals(arr2[i]))
                 || (arr1[i] != null && arr2[i] == null) || 
                 (arr2[i] != null && arr1[i] == null))
              {
                return false;
              }
          }
    } else {
         return false;  
    }
    return true;  
 } 
```

但这是非常不理想的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T18:31:26.110

是的，它只会比较第一个元素。看看它在做什么：

```
public boolean isTheSame(String[] arr1, String[] arr2)
{
    if (arr1.length == arr2.length)
    {
         for (int i = 0; i < arr1.length; i++)
          {
             // if the elements are equal ..
             // (NOTE: this will only be true for INTERNED strings!!)
             if (arr1[i] == arr2[i]) // fixed typo
              {
                // .. then STOP LOOKING and RETURN TRUE
                // wait- WHY?
                return true;
              }
          }
          // searched everything- but still RETURN FALSE??
    }
    return false;  
 } 
```

虽然`==`由于字符串实习，提供的示例数据的使用不是问题，但它总有一天*会*咬你的真实数据。*除非需要身份相等*，否则不要`==`用于对象。

# google-maps - 隐藏谷歌地图平面图

> ID：14127179
> 
> 赞同：6
> 
> 时间：2013-01-02T18:26:12.943
> 
> 标签：google-maps, google-maps-api-3, google-maps-styled

当使用 Google Map API v3 并使用样式化的地图类型时，我无法隐藏放大时出现的平面图。有许多“MapTypeStyleFeatureType”选项，这些选项都不能帮助隐藏平面图。

[https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType](https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType)

API v3 文档似乎没有包含有关平面图的任何内容。为了清楚起见，这是一个平面图的示例：

[http://maps.googleapis.com/maps/api/staticmap?center=51.496643,-0.172192&zoom=18&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:administrative|visibility:off](http://maps.googleapis.com/maps/api/staticmap?center=51.496643,-0.172192&zoom=18&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:administrative|visibility:off)

任何帮助或指示将不胜感激。

谢谢，乔恩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T12:13:38.757

好的，经过更多的实验，这就是我解决的问题....在第一种样式中将所有颜色设置为灰色（或您希望平面图采用的任何颜色），然后在以下样式中重新着色您想要的所有颜色。这导致平面图显示为单个颜色块。

```
var styles = [
        {
            featureType: "all",
            stylers: [
                { color: "#505050" }
            ]
        },
        {
            featureType: "road",
            elementType: "geometry",
            stylers: [
                { visibility: "simplified" },
                { color: '#505050' }
            ]
        },
        {
            featureType: "all",
            elementType: "labels",
            stylers: [
                { visibility: "off" }
            ]
        },
        {
            featureType: "administrative",
            stylers: [
                { visibility: "off" }
            ]
        },
        {
            featureType: "transit",
            stylers: [
                { visibility: "off" }
            ]
        },
        {
            featureType: "poi",
            stylers: [
                { visibility: "off" }
            ]
        },
        {
            featureType: "landscape",
            stylers: [
                { color: '#FF0000' }
            ]
        },
        {
            featureType: "landscape.man_made",
            stylers: [
                { color: '#393939' }
            ]
        },
        {
            featureType: "landscape.natural",
            stylers: [
                { color: '#393939' }
            ]
        },
        {
            featureType: "water",
            stylers: [
                { color: '#252525' }
            ]
        }
    ]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:57:04.233

似乎“全部”选项是唯一会关闭标签的选项：

[http://maps.googleapis.com/maps/api/staticmap?center=51.496643,-0.172192&zoom=18&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:all|element:labels|visibility:off](http://maps.googleapis.com/maps/api/staticmap?center=51.496643,-0.172192&zoom=18&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:all|element:labels|visibility:off)

虽然 poi.attraction 似乎确实关闭了博物馆的名称，但不是平面图

[http://maps.googleapis.com/maps/api/staticmap?center=51.496643,-0.172192&zoom=18&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:poi.attraction|element:labels|visibility:off](http://maps.googleapis.com/maps/api/staticmap?center=51.496643,-0.172192&zoom=18&format=png&sensor=false&size=640x480&maptype=roadmap&style=feature:poi.attraction|element:labels|visibility:off)

# c# - 来自 VB6 的 C# 版本的 Base64 编码

> ID：14127180
> 
> 赞同：2
> 
> 时间：2013-01-02T18:26:19.577
> 
> 标签：c#, encoding, vb6, base64

我需要使用 Base64 对字符串进行编码。我有一个 VB6 算法，我需要准确地编写一个 C# 版本。我能够做到 99%，但最后一个字符是错误的，我不确定到底出了什么问题。

这是要编码的字符串：

> ¼9ÀPÊ¨!Œaøc4vøÝFãgïÒ_£¡˜è/[t•Ôý56wBpïcÃ.Cð`

VB6 编码给出以下字符串：

> vDnAUMqoFiGMYfhjNHb43UbjZ+/SX6MBoZjoL1t0ldT9NTZ3QnDvYwMTww4uQ/Ag

C# 编码给出以下字符串：

> vDnAUMqoFiGMYfhjNHb43UbjZ+/SX6MBoZjoL1t0ldT9NTZ3QnDvYwMTww4uQ/Ax

正如你所看到的，除了最后一个字母外，一切都是一样的。

VB6 算法：

```
Const sBASE_64_CHARACTERS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"

Function Base64encode(ByVal asContents)
    Dim lnPosition
    Dim lsResult
    Dim Char1
    Dim Char2
    Dim Char3
    Dim Char4
    Dim Byte1
    Dim Byte2
    Dim Byte3
    Dim SaveBits1
    Dim SaveBits2
    Dim lsGroupBinary
    Dim lsGroup64

    If Len(asContents) Mod 3 > 0 Then asContents = asContents & String(3 - (Len(asContents) Mod 3), " ")
    lsResult = ""

    For lnPosition = 1 To Len(asContents) Step 3
        lsGroup64 = ""
        lsGroupBinary = Mid(asContents, lnPosition, 3)

        Byte1 = Asc(Mid(lsGroupBinary, 1, 1)): SaveBits1 = Byte1 And 3
        Byte2 = Asc(Mid(lsGroupBinary, 2, 1)): SaveBits2 = Byte2 And 15
        Byte3 = Asc(Mid(lsGroupBinary, 3, 1))

        Char1 = Mid(sBASE_64_CHARACTERS, ((Byte1 And 252) \ 4) + 1, 1)
        Char2 = Mid(sBASE_64_CHARACTERS, (((Byte2 And 240) \ 16) Or (SaveBits1 * 16) And &HFF) + 1, 1)
        Char3 = Mid(sBASE_64_CHARACTERS, (((Byte3 And 192) \ 64) Or (SaveBits2 * 4) And &HFF) + 1, 1)
        Char4 = Mid(sBASE_64_CHARACTERS, (Byte3 And 63) + 1, 1)
        lsGroup64 = Char1 & Char2 & Char3 & Char4

        lsResult = lsResult + lsGroup64
    Next

    Base64encode = lsResult
End Function 
```

这是 C# 等价物：

```
public const string sBASE_64_CHARACTERS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
    public static string Base64encode(string asContents)
    {
        int lnPosition;
        string lsResult;
        string Char1;
        string Char2;
        string Char3;
        string Char4;
        int Byte1;
        int Byte2;
        int Byte3;
        int SaveBits1;
        int SaveBits2;
        string lsGroupBinary = null;
        string lsGroup64 = null;

        if (Microsoft.VisualBasic.Strings.Len(asContents) % 3 > 0)
            asContents = asContents + (3 - (Microsoft.VisualBasic.Strings.Len(asContents) % 3));
        lsResult = "";

        for (lnPosition = 1; lnPosition <= Microsoft.VisualBasic.Strings.Len(asContents); lnPosition += 3)
        {
            lsGroup64 = "";
            lsGroupBinary = Microsoft.VisualBasic.Strings.Mid(asContents, lnPosition, 3);

            Byte1 = Microsoft.VisualBasic.Strings.Asc(Microsoft.VisualBasic.Strings.Mid(lsGroupBinary, 1, 1));
            SaveBits1 = Byte1 & 3;
            Byte2 = Microsoft.VisualBasic.Strings.Asc(Microsoft.VisualBasic.Strings.Mid(lsGroupBinary, 2, 1));
            SaveBits2 = Byte2 & 15;
            Byte3 = Microsoft.VisualBasic.Strings.Asc(Microsoft.VisualBasic.Strings.Mid(lsGroupBinary, 3, 1));

            Char1 = Microsoft.VisualBasic.Strings.Mid(sBASE_64_CHARACTERS, ((Byte1 & 252) / 4) + 1, 1);
            Char2 = Microsoft.VisualBasic.Strings.Mid(sBASE_64_CHARACTERS, (((Byte2 & 240) / 16) | (SaveBits1 * 16) & 0xff) + 1, 1);
            Char3 = Microsoft.VisualBasic.Strings.Mid(sBASE_64_CHARACTERS, (((Byte3 & 192) / 64) | (SaveBits2 * 4) & 0xff) + 1, 1);
            Char4 = Microsoft.VisualBasic.Strings.Mid(sBASE_64_CHARACTERS, (Byte3 & 63) + 1, 1);
            lsGroup64 = Char1 + Char2 + Char3 + Char4;

            lsResult = lsResult + lsGroup64;
        }

        return lsResult;
    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T18:40:13.090

原始代码用空格填充字符串，使得长度是 3 的整数倍。翻译后的代码不能正确执行此操作。此行未正确翻译：

```
If Len(asContents) Mod 3 > 0 Then asContents = asContents & String(3 - (Len(asContents) Mod 3), " ") 
```

你有它作为

```
if (Microsoft.VisualBasic.Strings.Len(asContents) % 3 > 0)
    asContents = asContents + (3 - (Microsoft.VisualBasic.Strings.Len(asContents) % 3)); 
```

但应该是

```
if (Microsoft.VisualBasic.Strings.Len(asContents) % 3 > 0)
    asContents = asContents + Microsoft.VisualBasic.Strings.String(3 - (Microsoft.VisualBasic.Strings.Len(asContents) % 3), " "); 
```

您拥有的代码不是附加空格，而是附加一个数字。

# javascript - 带有服务器端 JSON（自定义对象）的数据表

> ID：14127182
> 
> 赞同：2
> 
> 时间：2013-01-02T18:26:39.130
> 
> 标签：javascript, jquery, datatables

我正在尝试使用 DataTables 从内部 API 快速创建简单的结果显示。API 以以下结构返回 JSON：

```
obj { 
    status: 1,
    results: 100,
    offset: 25,
    limit: 25,
    data: [
        [1]: {
           title: "Blah blah one",
           description: "Doesn't really matter",
           misc: "Yadda yadda"
        },
        [2]: {
           title: "Blah blah two",
           description: "Doesn't really matter",
           misc: "Yadda yadda"
        },
    ]
} 
```

我不能/不想仅仅因为 DataTables 使用奇怪的结构而更改 API 结构，但我想访问用于分页、动态加载等的内置功能。DataTables 似乎允许自定义数据对象，并且我已经让表格加载以下内容：

```
$(document).ready(function() {
    $('#example').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "http://api.oursite.com/api?limit=100",
        "fnServerData": function( sUrl, aoData, fnCallback, oSettings ) {
            oSettings.jqXHR = $.ajax( {
                "url": sUrl,
                "data": aoData,
                "success": fnCallback,
                "dataType": "jsonp",
                "cache": false
            } );
        },
        "sAjaxDataProp": "data",
        "aoColumns": [
            { "mData": "title" },
            { "mData": "description" },
            { "mData": "misc" },
        ]
    } );
}); 
```

但是，分页或排序功能都不起作用。我认为这是因为 DataTables 需要对象中的结果计数和分页变量——“iTotalRecords”和“iTotalDisplayRecords”。这个对吗？有什么方法可以使用 api 变量吗？提前致谢。**我目前在开发控制台中没有收到任何错误，所以如果它出错，它会默默地这样做......**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T20:14:02.483

在初始化数据表时，您可以将 aaData 设置为 javascript 函数，而不是直接将源分配给 Ajaxsource，您可以在其中操作以仅返回 obj.data。您需要手动处理一些事情。

```
 $('#tblExample').dataTable({
        "bJqueryUI": true,
        "bDestroy":true,
        "bSortable": false,
        "sAjaxSource": "",
        "aaData":GetData(),
        "aoColumns": [
                    {   
                      "sTitle":"Index","mDataProp": null, "sWidth": "20px", "sDefaultContent": "<span class='ui-icon ui-icon-circle-close' onclick='RemoveActiveItem(this);'></span>", "bSortable": false},
                    {   "mDataProp": "Year"},
                    {   "mDataProp": "Month"},
                    {   "mDataProp": "Savings"}         
        ]
    }); 
```

# java - 读取对象时出现 ClassNotFoundException

> ID：14127188
> 
> 赞同：0
> 
> 时间：2013-01-02T18:27:21.770
> 
> 标签：java, scala, serialization, classnotfoundexception

我正在尝试`Seq[(Seq[DenseMatrix[Double]], DenseMatrix[Double])]`从文件中读取 scala 对象（类型为），我的类路径中有类，但我仍然得到一个神秘的 ClassNotFoundException。DenseMatrix 专门用于 Double，这可能是问题吗？

这是堆栈跟踪：

```
java.lang.ClassNotFoundException: breeze.linalg.DenseMatrix
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at java.io.ObjectInputStream.resolveClass(ObjectInputStream.java:621)
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1592)
at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1513)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1749)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1346)
at java.io.ObjectInputStream.readArray(ObjectInputStream.java:1684)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1340)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1963)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1887)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1770)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1346)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1963)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1887)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1770)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1346)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:368)
at scala.collection.immutable.$colon$colon.readObject(List.scala:435)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:988)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1865)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1770)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1346)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:368)
    at .<init>(<console>:39)
at .<clinit>(<console>)
at $anonfun$1.apply(<console>:11)
at $anonfun$1.apply(<console>:10)
at scala.tools.nsc.symtab.SymbolTable.atPhase(SymbolTable.scala:95)
at scala.tools.nsc.interpreter.Phased$class.atCurrent(Phased.scala:72)
at scala.tools.nsc.interpreter.Power$$anon$2.atCurrent(Power.scala:391)
at .<init>(<console>:10)
at .<clinit>(<console>)
at $print(<console>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at scala.tools.nsc.interpreter.IMain$ReadEvalPrint.call(IMain.scala:704)
at scala.tools.nsc.interpreter.IMain$Request.loadAndRun(IMain.scala:914)
at scala.tools.nsc.interpreter.IMain.loadAndRunReq$1(IMain.scala:546)
at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:577)
at scala.tools.nsc.interpreter.IMain.interpret(IMain.scala:543)
at scala.tools.nsc.interpreter.ILoop.reallyInterpret$1(ILoop.scala:694)
at scala.tools.nsc.interpreter.ILoop.interpretStartingWith(ILoop.scala:745)
at scala.tools.nsc.interpreter.ILoop.command(ILoop.scala:651)
at scala.tools.nsc.interpreter.ILoop.processLine$1(ILoop.scala:542)
at scala.tools.nsc.interpreter.ILoop.loop(ILoop.scala:550)
at scala.tools.nsc.interpreter.ILoop.process(ILoop.scala:822)
at scala.tools.nsc.interpreter.ILoop.main(ILoop.scala:851)
at xsbt.ConsoleInterface.run(ConsoleInterface.scala:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at sbt.compiler.AnalyzingCompiler.call(AnalyzingCompiler.scala:73)
at sbt.compiler.AnalyzingCompiler.console(AnalyzingCompiler.scala:64)
at sbt.Console.console0$1(Console.scala:23)
at sbt.Console$$anonfun$apply$2$$anonfun$apply$1.apply$mcV$sp(Console.scala:24)
at sbt.TrapExit$.executeMain$1(TrapExit.scala:33)
at sbt.TrapExit$$anon$1.run(TrapExit.scala:42) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:31:51.987

我有同样的问题。我通过将类文件放在项目文件夹中的 libs 文件夹中来解决它，然后再次将它们添加到类路径中。

# jslint - 尝试使用非 ascii 字符对 javascript 代码进行 lint

> ID：14127189
> 
> 赞同：1
> 
> 时间：2013-01-02T18:27:24.173
> 
> 标签：jslint

编辑：*对于那些说：不要这样做的人，我最恭敬地指出 1\. 这是 javascript 允许的，更重要的是，2\. 这是我出于教学原因需要做的事情。*

我想用 jslint（或 jshint ... 或类似的东西）“验证”我的 javascript 代码，但不幸的是，由于标识符中存在非 ascii 字符，它失败了。有人知道像 jslint 这样的验证器在标识符中接受非 ascii 字符吗？

我知道部分解决方法，即使用类似

```
this["andré"] 
```

代替

```
this.andré 
```

但不知道类似的等效解决方法

```
var andré = ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T07:33:31.227

JSHint 1.0.0 版将添加对标识符中的 unicode 字符的支持。目前，这是一个发布候选版本，您可以[在 GitHub 上下载](https://github.com/jshint/jshint/tags)。来自[JSHint 博客](http://www.jshint.com/blog/2012-12-29/1-0-0-rc1/)：

> 此版本**增加了对 Unicode 标识符的支持**！
> 
> ```
>  var π = 3.1415; 
> ```

# f# - F# MSIL 混淆

> ID：14127190
> 
> 赞同：5
> 
> 时间：2013-01-02T18:27:40.310
> 
> 标签：f#, obfuscation, disassembly

两个混淆相关的问题：

1) 是否有任何工具可以将 F# 从 MSIL 目标形式反汇编回其源形式或接近它的形式？这不是试图通过默默无闻来确保安全，但我想保护一些源代码不被“盗窃”。

2) 我简要查看了一些 F# 编译器输出，一般来说，与反汇编 C# 编译代码相比，它看起来很乱，大概是因为 C# 更接近 MSIL 中间表示。我从 C# 编译器中看到的唯一部分损坏的代码是迭代器（从 C# 5.0 开始可能是异步的）。

到目前为止，我的印象是 F# 编译的代码被合理地“混淆”了，但这是真的吗？（我意识到这是一个有点主观的问题。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T20:56:21.320

1.  我还没有听说过这样的事情；但是，我认为这样的工具很可能会在不久的将来出现。
2.  F# 编译器生成的程序集（即 MSIL 和相关元数据）不会以任何方式混淆。但是，它生成的一些代码与 C# 或 VB.NET 编译器生成的代码大不相同，因此逆向工程不会那么容易（仅仅是因为没有这样做的工具）。当然，正如@Craig Stuntz 所说，这对于有经验的、积极的攻击者来说并不能提供太多保护。

如果您真的很偏执，您可能会考虑在发布之前对已编译的程序集使用混淆工具。自 2010 年底以来，我一直在将[{SmartAssembly}](http://www.red-gate.com/products/dotnet-development/smartassembly/)与 F# 一起使用，所以我知道它可以与 F# 一起使用；如果您使用其他工具，请确保在购买之前针对一些相当复杂的 F# 程序集对其进行测试——当时我正在寻找一个混淆器，其中许多无法正常（或根本）无法与 F# 程序集一起使用。

如果您想阅读更多信息，我不久前写了一些关于混淆 F# 程序集的笔记：[在 F# 程序集上使用 .NET 混淆器的任何经验？](http://fpish.net/topic/None/74105#comment-74121)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-19T13:37:17.107

F# 是 .NET 语言的一部分，因此可以反编译。如果你想花钱，你可以看看 RedGate 的 Reflector 或者 0xd4d 的 dnSpy（是的，它和著名的反混淆器 De4Dot 是同一个开发者）。反编译代码非常接近硬编码代码，逻辑还是一样的，你可以复制/粘贴源代码。

如果你想保护 F# 应用程序，你可以考虑使用混淆器，目前它们几乎都由 De4Dot 处理，因此很难明智地选择，虽然[.NETGuard](http://netguard.io/)非常强大，它可以处理 F# 应用程序，它可以产生原生输出& 它有一些强大的持续保护，De4Dot 无法处理它。

# jquery - 自动完成不能等到来自服务器的 JSON 加载

> ID：14127192
> 
> 赞同：0
> 
> 时间：2013-01-02T18:28:07.413
> 
> 标签：jquery, jquery-autocomplete

正如我在主题中提到的，服务器加载大约需要 200-1000 毫秒（来自调试日志），但我必须再按一个键才能显示结果。即使我使自动完成延迟更长，它仍然无法显示结果，我仍然必须按一个键。

```
var timer;
//to wait for x ms until some chars typed
$("#keyword").bind("keyup", function(e) {
    if ($(this).val().length > 2)
    {
        window.clearTimeout(timer);
        timer = window.setTimeout(function(){               
            var datax = "";
            $(function () {
                $.getJSON("URI", ({"search":$("#keyword").val()}),function(datax){  
                    $("#keyword").autocomplete({
                        minLength: 3,
                        delay: 2000,
                        source: datax,
                        focus: function(event,ui){
                            $("#keyword").val( ui.item.nama);
                            return false;
                        },
                        select: function(event,ui){
                            $("#keyword").val( ui.item.nama);
                            $("#btnCariMainHeader").click();
                            return false;
                        }
                    })
                    .data("autocomplete")._renderItem = function(ul,item){
                            return $("<li>")
                            .data( "item.autocomplete",item)
                            .append("<a><table width='100%'><tr><td width='60px'>"+"<img height='60px' src='/thumb/" + item.value + ".jpg'/>"+"</td><td><b>"+item.nama+"</b><br><span class='suffix'>"+item.value+" "+item.bu+"</span><br><span class='suffix'>"+item.pos+"</span></td></tr></table></a>")
                            .appendTo(ul);
                    };
                });
            });
         },2000); 
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:47:03.300

在您的代码中，您将在获得 JSON 结果后创建一个 jQuery 自动完成功能。

但请注意，jQuery 自动完成不需要编写所有这些复杂的代码。您可以直接使用远程数据源（JSON 格式）作为自动完成的输入。也不需要绑定 keyup 事件来显示建议，这将由插件自动完成。

```
$("#birds").autocomplete({
    source: "search.php", // This is the url that returns the JSON list
    minLength: 2,
    select: function(event, ui) {
        log(ui.item ? "Selected: " + ui.item.value + " aka " + ui.item.id : "Nothing selected, input was " + this.value);
    } }); 
```

您可以在[此处找到完整的文档和示例](http://jqueryui.com/autocomplete/#remote)。

# ruby - ruby 中带有多行字符串的空格

> ID：14127193
> 
> 赞同：9
> 
> 时间：2013-01-02T18:28:10.250
> 
> 标签：ruby, string, multiline

我有一个多行字符串的空格问题。

我在生成一些 SQL 的代码中有类似的东西。

```
def generate_sql
   <<-EOQ
      UPDATE page
         SET view_count = 10;
   EOQ
end 
```

但后来我的 SQL 缩进全搞砸了，我真的不想要。

```
"       UPDATE page\n          SET view_count = 10;\n" 
```

我可以

```
 def generate_sql
<<-EOQ
UPDATE page
   SET view_count = 10;
EOQ
    end 
```

哪个输出正是我想要的

```
"UPDATE page\n   SET view_count = 10;\n" 
```

但是后来我的代码缩进都搞砸了，我真的不想要。

关于如何最好地实现我所追求的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-31T18:22:10.220

Ruby 2.3.0 使用[squiggly heredoc](https://infinum.co/the-capsized-eight/articles/multiline-strings-ruby-2-3-0-the-squiggly-heredoc)很好地解决了这个问题。请注意示例之间的波浪号/连字符的区别。

```
hyphen_heredoc = <<-MULTILINE_STRING
                    One line
                    Second line
                      Indented two spaces
                    MULTILINE_STRING

squiggly_heredoc = <<~MULTILINE_STRING_WITH_TILDE
                      One line
                      Second line
                        Indented two spaces
                      MULTILINE_STRING_WITH_TILDE

2.3.0 :001 > puts hyphen_heredoc
                      One line
                      Second line
                        Indented two spaces
2.3.0 :002 > puts squiggly_heredoc
One line
Second line
  Indented two spaces 
```

使用波浪形的heredoc，**最小缩进行的缩进**将从内容的每一行中删除。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T18:31:20.640

有这样的图书馆[`ruby-dedent`](https://github.com/cespare/ruby-dedent)可以让你做

```
require 'dedent'

def generate_sql
   <<-EOQ.dedent
      UPDATE page
         SET view_count = 10;
   EOQ
end 
```

这导致

```
"UPDATE page\n   SET view_count = 10;" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T18:44:25.400

这需要更多空间（并且可能不太漂亮）但效果很好：

```
def generate_sql
   text = <<-EOQ
      UPDATE page
         SET view_count = 10;
   EOQ
   text.gsub(/^#{text.match(/^\s*/)[0]}/, '')
end 
```

给

```
"UPDATE page\n   SET view_count = 10;\n" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T18:31:38.907

这样的事情应该这样做：

```
def generate_sql
  <<-EOQ.gsub("\n", " ").strip
    UPDATE page
      SET ...
  EOQ
end 
```

尽管在这种情况下，您的数据库将忽略空格，因此可能不值得麻烦。

# sql-server - 根据sql server中的数字拆分字符串

> ID：14127194
> 
> 赞同：1
> 
> 时间：2013-01-02T18:28:21.603
> 
> 标签：sql-server, string, split, numbers

在 sql Server 中，我需要根据数字拆分字符串。什么是最好的方法。例如，我需要在字符串下面拆分

1.  我正在寻找这个查询。2\. 你能帮忙吗？3\. 我真的很感激。

我正在寻找的结果是

1.  我正在寻找这个答案。
2.  你能帮忙吗？
3.  我真的很感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:21:10.937

又快又脏，但它有效。如果您愿意，有足够的优化空间

```
DECLARE @str AS VARCHAR(MAX);
SET @str = '1\. I am looking for this query. 2\. Can you please help. 3\. I would really appreciate that.';

DECLARE @counter INT;
DECLARE @table TABLE ([Text] VARCHAR(MAX));
DECLARE @currentPattern VARCHAR(5);
DECLARE @nextPattern VARCHAR(5);

SET @counter = 1;
WHILE 1=1
BEGIN
    -- Set the current and next pattern to look for (ex. "1\. ", "2\. ", etc.)
    SET @currentPattern = '%' + CAST(@counter AS VARCHAR(4)) + '. %';
    SET @nextPattern = '%' + CAST(@counter + 1 AS VARCHAR(4)) + '. %';

    -- Check if the current pattern exists.
    IF (SELECT PATINDEX(@currentPattern, @str)) > 0
    BEGIN
        -- Check if the next pattern exists.
        IF (SELECT PATINDEX(@nextPattern, @str)) > 0
        BEGIN
            -- There is another pattern, so only get the text for the current one.
            INSERT INTO @table VALUES (SUBSTRING(@str, 1, PATINDEX(@nextPattern, @str) - 1));
            SET @str = SUBSTRING(@str, PATINDEX(@nextPattern, @str), LEN(@str) - PATINDEX(@nextPattern, @str) + 1);
        END
        ELSE
        BEGIN
            -- No other patterns exist, so just insert the variable text.
            INSERT INTO @table VALUES (@str);
        END
    END
    ELSE
    BEGIN
        -- Current pattern does not exist; break out of loop.
        BREAK;
    END

    SET @counter = @counter + 1;
END
SELECT * FROM @table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:32:53.177

我建议您使用 Jeff Moden 出色的“CSV Splitter”，它可以在[http://www.sqlservercentral.com/articles/Tally+Table/72993/](http://www.sqlservercentral.com/articles/Tally+Table/72993/)找到。Jeff 在 SQL Server 社区的一些良好反馈下确实优化了这种操作。

# javascript - 多词谷歌搜索不返回任何结果

> ID：14127199
> 
> 赞同：1
> 
> 时间：2013-01-02T18:28:45.053
> 
> 标签：javascript, html

我们刚刚向我们的网站添加了一个新的 Google 自定义搜索，但它不处理多字搜索。如果您输入一个单词，它可以正常工作，如果您输入两个或多个单词，它会返回“No Results”

此外，当它返回结果时，搜索字段会显示类似“Word%20Word%20Word”的搜索词

这是谷歌给我们使用的代码：

```
<!-- The following javascript appears before the closing </head> tag. -->
<script>
(function() {
var cx = '012938749785999463601:bae5a4ajf2q';
var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
})();
</script>

<!-- This tag is inserted where the search box should render -->
 <gcse:searchbox-only></gcse:searchbox-only> 
```

您可以在以下网址看到搜索功能：

[http://amazingribs.com/search_results.html](http://amazingribs.com/search_results.html)

好的，我发现了这个问题，但我不知道如何解决它。如果是 Google 内部问题，我可能无法修复它。

我注意到的是，如果你在搜索字段中输入两个或更多的词——比如“Corned Beef”——你会得到“No Results”，但是当你检查 URL 时，你会注意到搜索词显示为“ Corned%2520牛肉”。搜索功能在术语中插入一个额外的“25”，而不是简单的 %20。如果手动删除 URL 中的“25”，多词搜索正常返回结果。

这可以在上面显示的脚本中修复吗？或者，这是 Google 内部的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:28:09.243

似乎解决不良结果的方法是将“www”从 Google 控制面板中结果页面的目标 URL 中删除。

对我来说听起来很愚蠢，但是，嘿，它奏效了。

因此，如果其他人遇到同样的问题，请检查您的结果页面“目标 URL”并从中删除“www”

所以现在，而不是：[http ://www.amazingribs.com/search_results.html](http://www.amazingribs.com/search_results.html)

我们使用：[http ://amazingribs.com/search_results.html](http://amazingribs.com/search_results.html)

然后，它起作用了！当然，此信息不在 Google 帮助页面上的任何位置或控制面板说明中。

感谢任何看过这个问题的人。现在一切正常。

# npapi - 无法在 Chrome 浏览器中加载 npapi helloworld 插件作为扩展

> ID：14127205
> 
> 赞同：2
> 
> 时间：2013-01-02T18:29:07.800
> 
> 标签：npapi

[从https://github.com/axgle/npapi-chrome-plugin-helloworld](https://github.com/axgle/npapi-chrome-plugin-helloworld)下载了 NPAPI hello-world 插件，并使用 Chrome 开发者模式将其打包为 chrome 扩展 (crx)。

在 chrome 浏览器中加载了上述扩展，并尝试在 chrome 浏览器中打开 test.html（上述插件提供）。但它说“无法加载插件”

下面是test.html的源代码

```
<doctype html>
<html>
<head>
<script>
window.onload = function(){
    test = document.getElementById("pluginObj");
    alert(test.sayHello());
}
</script>
</head>
<embed id="pluginObj" type="application/x-helloworld"> 
<body></body>
</html> 
```

根据我的验证，插件正在嵌入（因为在更改测试时它提供了 HTML 文档对象）但无法调用插件的 sayHello 方法。

但是，当我尝试在另一台 PC 中加载上述扩展时，它会正确加载并且能够调用插件的 sayHello 方法。两个系统都有相同的操作系统（Windows XP + SP3）并且都使用相同版本的 chrome 浏览器（23.0.1271.97 m）

感谢这方面的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T03:45:22.513

当您将其添加到 CRX 时，您是否将其标记为公开？如果您不这样做，它将在扩展程序之外不可见。

请参阅[相关文档](http://developer.chrome.com/extensions/npapi.html)

这是另一个相关问题：[Google Chrome Extensions and NPAPI](https://stackoverflow.com/questions/4164526/google-chrome-extensions-and-npapi)

# java - 创建 TableLayout 并从另一个类调用它 - Android

> ID：14127209
> 
> 赞同：0
> 
> 时间：2013-01-02T18:29:27.233
> 
> 标签：java, android, sqlite, tablelayout

我正在我的 DatabaseHelper 类中创建一个数据库。我在这个类中创建了 textview、tablerows 和 tablelayout。我还将 textviews 添加到 tablerows 并将 tablerows 添加到 tablelayout。

我的问题是如何从另一个类中调用此表格布局并将其显示在活动中。我进行了一些研究，似乎他们希望我编写我在下面注释掉的代码行。从被注释掉的那行来看，我似乎无法实现它，因为这个类没有活动/xml 文件。

希望我解释得足够好。

```
public class DatabaseHelper extends SQLiteOpenHelper { 

    Context context;    
    DatabaseHelper dh;
    SQLiteDatabase db;

    private static final int DATABASE_VERSION = 1; 
    private static final String DB_NAME = "test3"; 
    private static final String DB_PATH = "/data/data/com.example.test/databases/";
    private static final String TABLE = "HighscoresList"; 

    // Table columns names. 
    private static final String RANK = "_id"; 
    private static final String SCORE = "score"; 
    private static final String PERCENTAGE = "percentage";

    TableLayout table;
    TableRow rowHeader, row1, row2, row3, row4, row5, row6, row7, row8, row9, row10;
    TextView rank, percentage, score;

    public DatabaseHelper(Context context) { 
        super(context, DB_NAME, null, DATABASE_VERSION); 
        db = getWritableDatabase();

        TableRow rowHeader = new TableRow(context);
        TableRow row1 = new TableRow(context);
        TableRow row2 = new TableRow(context);
        TableRow row3 = new TableRow(context);
        TableRow row4 = new TableRow(context);
        TableRow row5 = new TableRow(context);
        TableRow row6 = new TableRow(context);
        TableRow row7 = new TableRow(context);
        TableRow row8 = new TableRow(context);
        TableRow row9 = new TableRow(context);
        TableRow row10 = new TableRow(context);

        TextView rank = new TextView(context);
        TextView percentage = new TextView(context);
        TextView score = new TextView(context);
        TextView r1r = new TextView(context);
        TextView r1p = new TextView(context);
        TextView r1s = new TextView(context);

        Cursor c_percentage = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + ";", null);
        Cursor c_score = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + ";", null);

        rank.setText("TEST - COLUMN RANK");
        percentage.setText("TEST - COLUMN PERCENTAGE");
        score.setText("TEST - COLUMN SCORE");
        r1r.setText("test..rank");
        r1p.setText("teset...percentage");
        r1s.setText("test...scoree");

        rowHeader.addView(rank);
        rowHeader.addView(percentage);
        rowHeader.addView(score);

        row1.addView(r1r);
        row1.addView(r1p);
        row1.addView(r1s);

        table.addView(rowHeader);
        table.addView(row1);
        table.addView(row2);
        table.addView(row3);
        table.addView(row4);
        table.addView(row5);
        table.addView(row6);
        table.addView(row7);
        table.addView(row8);
        table.addView(row9);
        table.addView(row10); 

              //table = (TableLayout)contextActivity.findViewById(R.id.tableLayout);
    }

          //more methods and code below...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:50:34.593

您的 TableLayout 是一个视图，只能在 Activity 中使用（用于显示）。因此，将与您的 TableLayout 相关的所有代码放在您要在其中显示此表的活动中。使用您的 DatabaseHelper 类（顾名思义）仅用于帮助访问数据库。像这样：

```
public class DatabaseHelper extends SQLiteOpenHelper {
    DatabaseHelper dh;

    private static final int DATABASE_VERSION = 1; 
    private static final String DB_NAME = "test3"; 
    private static final String DB_PATH = "/data/data/com.example.test/databases/";
    private static final String TABLE = "HighscoresList"; 

    // Table columns names. 
    private static final String RANK = "_id"; 
    private static final String SCORE = "score"; 
    private static final String PERCENTAGE = "percentage";

    public DatabaseHelper(Context context) { 
        super(context, DB_NAME, null, DATABASE_VERSION);
    }

    public SQLiteDatabase openDb() {
      return this.getReadableDatabase(); // Use Readable because you're not actually writing any values into your db
    }

    public void closeDb(SQLiteDatabase db) {
      db.close();
    }

    public Cursor getScore(SQLiteDatabase db) {
      return db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + ";", null);
    }

    public Cursor getPercentage(SQLiteDatabase db) {
      return db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + ";", null);
    }
} 
```

现在从您的活动中，您可以执行以下操作：

```
public class Blah extends Activity {
  ...
  public void drawTable() {
    TableLayout table = (TableLayout)findViewById(R.id.tableLayout);
    ... // initialize all views as before
    DatabaseHelper helper = new DatabaseHelper(this);
    SQLiteDatabase db = helper.openDb();

    Cursor scores = helper.getScore(db);
    Cursor percentages = helper.getPercentage(db);
    ... // do something with the Cursors
    ..
    // finally
    scores.close();
    percentages.close();
    helper.closeDb(db);
  }
  ...
} 
```

# linux - udevadm 解决有什么用？

> ID：14127210
> 
> 赞同：14
> 
> 时间：2013-01-02T18:29:42.447
> 
> 标签：linux, udev

我已经看到了使用 udevadm 解决命令的方法。在 init 脚本中这样的命令有什么用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-02T20:01:46.263

内核启动后，`udevd`用于为所有检测到的设备创建设备节点。这是一个相对耗时的任务，*必须*完成引导过程才能继续，否则存在由于缺少设备节点而导致服务失败的风险。

`udevadm settle`等待`udevd`处理所有硬件设备的设备创建事件，从而确保在继续之前已成功创建任何设备节点。

# dart - 有没有办法在 unittest.dart 中编写异步 setUp 和 tearDown 函数？

> ID：14127213
> 
> 赞同：4
> 
> 时间：2013-01-02T18:30:00.013
> 
> 标签：dart

我需要为一些测试启动一个外部进程，它需要一些异步调用。现在我可以在每个测试中启动和停止该过程，但是在失败时我真的需要一个适当的`tearDown`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T01:03:53.507

几周前添加了从 setUp 和 tearDown 返回 Futures 的功能，并且今天提交了从测试函数返回 Futures 的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T03:16:23.657

贾斯汀，你要的东西不存在。我看到你已经创建了这个错误（http://code.google.com/p/dart/issues/detail?id=7670&q=async%20setup&colspec=ID%20Type%20Status%20Priority%20Area%20Milestone%20Owner% 20摘要#makechanges）。这是我们目前能做的最好的事情。

# iphone - 修复 iPhone 水平方向缩放

> ID：14127214
> 
> 赞同：1
> 
> 时间：2013-01-02T18:30:03.117
> 
> 标签：iphone, mobile, orientation, mobile-safari, zooming

我的问题是将 iPhone 的方向从纵向更改为横向时发生的缩放。我认为这是一个众所周知的问题，并且似乎有很多关于它的文档，但到目前为止，没有一个解决方案对我有用。

这是我的代码..

```
 <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

我仍然遇到缩放问题，即使我已经看到人们发布此代码作为问题的解决方案，并且他们似乎得到了预期的结果，但我没有。

我的目标是禁用缩放，将其缩放为 1.0，当然，还要防止在更改方向时发生缩放。

我也想避免使用javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:37:48.270

根据这个[站点](http://www.javascriptkit.com/dhtmltutors/cssmediaqueries2.shtml)，设备宽度始终是纵向宽度。换句话说，iPhone 上的设备宽度始终为 320。

在您发布的元标记中，您需要设置`width=device-height`以获得横向的预期结果。

虽然我自己还没有解决这个问题，但根据同一个链接，您似乎需要使用带有方向的媒体查询。

# java - 未正确更新的按钮值

> ID：14127215
> 
> 赞同：0
> 
> 时间：2013-01-02T18:30:09.690
> 
> 标签：java, android, arraylist

我有一个整数`ArrayList`和几个按钮。每个按钮对应一个索引，`ArrayList`我想将每个按钮对应索引的值显示为它的文本。我的一切都与按钮行为等有关。问题是当我将一个按钮的值（索引值）与另一个交换时，它会开始为我交换的每个值显示 0。我总是会用其他东西交换 0。

因此，如果我有按钮：b1、b2、b3 的值分别为 0、1、2，我交换 b1 和 b2 的值。结果变为 0, 0, 2。这是交换函数：

```
public static void swap(ArrayList<Integer> list, int firstInd, int secondInd) {
    int temp = list.get(firstInd);
    list.set(firstInd, list.get(secondInd));
    list.set(secondInd, temp);
} 
```

这种交换方法有效，我已经使用打印语句等独立地对其进行了测试，并且没有重复的 0，并且所有其余数字都保留在列表中。

以下是相关代码：

```
// class declaration
static ArrayList<Integer> numList = new ArrayList<Integer>();

// onCreate
// initialize ArrayList
// displays initial values on buttons

@Override
public void onClick(View v) {
    switch(v.getId()) {
        case R.id.first: {
            switchButtonValues(R.id.first);
            b1.setText(String.valueOf(numList.get(0)));
            updateButtonStates();
            break;
        }
        case R.id.second: {
            switchButtonValues(R.id.second);
            b2.setText(String.valueOf(numList.get(1)));
            updateButtonStates();
            break;
        }
// etc for all buttons

public static void switchButtonValues(int buttonNum) {
    switch(buttonNum) {
        case R.id.first: {
            if(numList.get(1) == 0) {
                swap(numList, 0, 1);
            } else if (numList.get(3) == 0) {
                swap(numList, 0, 3);
            } else {

            }

            break;
        }
        case R.id.second: {
// etc. for the buttons 
```

显示初始值的按钮是正确的。所以我知道 ArrayList 正在正确初始化。发生交换时会出现问题。所有的值都以某种方式被 0 覆盖。

即使 0 覆盖了其他值，按钮行为也能正常工作，因为它知道“真正的”0 在哪里。我也清理了项目。

为什么会这样？有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:24:51.740

我做了一个例子，我希望它接近你的期望：

```
package br.com.bertan.swap.buttons;

import java.util.ArrayList;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class SwapButtonsActivity extends Activity {

    // class declaration
    static ArrayList<Integer> numList = new ArrayList<Integer>();

    static ArrayList<Button> btnList = new ArrayList<Button>();

    public static void swap(ArrayList<Integer> list, int firstInd, int secondInd) {
        int temp = list.get(firstInd);
        list.set(firstInd, list.get(secondInd));
        list.set(secondInd, temp);
    }

    private void updateButtonStates(){

        int index_0 = -1;

        int index_up = -1;
        int index_down = -1;
        int index_left = -1;
        int index_right = -1;

        for(int i = 0; i < 16; i++){
            if(index_0 >= 0){   
                if(i != index_up
                   && i != index_down
                   && i != index_left
                   && i != index_right
//                 && i != index_0
                   ){
                    btnList.get(i).setEnabled(false);
                } else {
                    btnList.get(i).setEnabled(true);
                }
            } else {
                if(numList.get(i) == 0){
                    index_0 = i;

                    if(index_0 > 3){
                        index_up = index_0 - 4;
                    }

                    if(index_0 < 12){
                        index_down = index_0 + 4;
                    }

                    if(index_0 != 0
                       && index_0 != 4
                       && index_0 != 8
                       && index_0 != 12){
                        index_left = index_0 - 1;
                    }

                    if(index_0 != 3
                       && index_0 != 7
                       && index_0 != 11
                       && index_0 != 15){
                        index_right = index_0 + 1;
                    }

                    i = -1;
                }
            }
        }
    }

    public static void switchButtonValues(int buttonNum) {
        int index_0 = -1;
        int index_btn = -1;

        for(int i = 0; i < 16; i++){
            if(index_0 < 0){
                if(numList.get(i) == 0){
                    index_0 = i;
                }
            }

            if(index_btn < 0){
                if(buttonNum == btnList.get(i).getId()){
                    index_btn = i;
                }
            }

            if(index_0 >= 0 && index_btn >=0){
                break;
            }
        }

        btnList.get(index_0).setText(btnList.get(index_btn).getText().toString());
        btnList.get(index_btn).setText("0");

        numList.set(index_0, numList.get(index_btn));
        numList.set(index_btn, 0);
    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // initialize ArrayList
        for(int i = 0; i < 16; i++){
            numList.add(i);
        }

        final Button btn_01 = (Button) findViewById(R.id.btn_01);
        final Button btn_02 = (Button) findViewById(R.id.btn_02);
        final Button btn_03 = (Button) findViewById(R.id.btn_03);
        final Button btn_04 = (Button) findViewById(R.id.btn_04);
        final Button btn_05 = (Button) findViewById(R.id.btn_05);
        final Button btn_06 = (Button) findViewById(R.id.btn_06);
        final Button btn_07 = (Button) findViewById(R.id.btn_07);
        final Button btn_08 = (Button) findViewById(R.id.btn_08);
        final Button btn_09 = (Button) findViewById(R.id.btn_09);
        final Button btn_10 = (Button) findViewById(R.id.btn_10);
        final Button btn_11 = (Button) findViewById(R.id.btn_11);
        final Button btn_12 = (Button) findViewById(R.id.btn_12);
        final Button btn_13 = (Button) findViewById(R.id.btn_13);
        final Button btn_14 = (Button) findViewById(R.id.btn_14);
        final Button btn_15 = (Button) findViewById(R.id.btn_15);
        final Button btn_16 = (Button) findViewById(R.id.btn_16);

        btnList.add(btn_01);
        btnList.add(btn_02);
        btnList.add(btn_03);
        btnList.add(btn_04);
        btnList.add(btn_05);
        btnList.add(btn_06);
        btnList.add(btn_07);
        btnList.add(btn_08);
        btnList.add(btn_09);
        btnList.add(btn_10);
        btnList.add(btn_11);
        btnList.add(btn_12);
        btnList.add(btn_13);
        btnList.add(btn_14);
        btnList.add(btn_15);
        btnList.add(btn_16);

        OnClickListener click_listener = new OnClickListener() {            
            @Override
            public void onClick(View v) {
                switch(v.getId()) {
                    case R.id.btn_01: {
                        switchButtonValues(R.id.btn_01);
                        btn_01.setText(String.valueOf(numList.get(0)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_02: {
                        switchButtonValues(R.id.btn_02);
                        btn_02.setText(String.valueOf(numList.get(1)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_03: {
                        switchButtonValues(R.id.btn_03);
                        btn_03.setText(String.valueOf(numList.get(2)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_04: {
                        switchButtonValues(R.id.btn_04);
                        btn_04.setText(String.valueOf(numList.get(3)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_05: {
                        switchButtonValues(R.id.btn_05);
                        btn_05.setText(String.valueOf(numList.get(4)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_06: {
                        switchButtonValues(R.id.btn_06);
                        btn_06.setText(String.valueOf(numList.get(5)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_07: {
                        switchButtonValues(R.id.btn_07);
                        btn_07.setText(String.valueOf(numList.get(6)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_08: {
                        switchButtonValues(R.id.btn_08);
                        btn_08.setText(String.valueOf(numList.get(7)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_09: {
                        switchButtonValues(R.id.btn_09);
                        btn_09.setText(String.valueOf(numList.get(8)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_10: {
                        switchButtonValues(R.id.btn_10);
                        btn_10.setText(String.valueOf(numList.get(9)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_11: {
                        switchButtonValues(R.id.btn_11);
                        btn_11.setText(String.valueOf(numList.get(10)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_12: {
                        switchButtonValues(R.id.btn_12);
                        btn_12.setText(String.valueOf(numList.get(11)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_13: {
                        switchButtonValues(R.id.btn_13);
                        btn_13.setText(String.valueOf(numList.get(12)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_14: {
                        switchButtonValues(R.id.btn_14);
                        btn_14.setText(String.valueOf(numList.get(13)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_15: {
                        switchButtonValues(R.id.btn_15);
                        btn_15.setText(String.valueOf(numList.get(14)));
                        updateButtonStates();
                        break;
                    }
                    case R.id.btn_16: {
                        switchButtonValues(R.id.btn_16);
                        btn_16.setText(String.valueOf(numList.get(15)));
                        updateButtonStates();
                        break;
                    }
                    default:
                        break;
                }
            }
        };

        // displays initial values on buttons
        for(int i = 0; i < 16; i++){
            btnList.get(i).setText(String.valueOf(numList.get(i)));
            btnList.get(i).setOnClickListener(click_listener);
        }

        updateButtonStates();
    }
} 
```

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:orientation="vertical">
    <TableLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TableRow 
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:orientation="horizontal">
            <Button 
                android:id="@+id/btn_01"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="0"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_02"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="1"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_03"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="2"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_04"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="3"
                android:textSize="50dip"
                android:textStyle="bold"
            />
        </TableRow>
        <TableRow 
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:orientation="horizontal">
            <Button 
                android:id="@+id/btn_05"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="4"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_06"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="5"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_07"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="6"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_08"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="7"
                android:textSize="50dip"
                android:textStyle="bold"
            />
        </TableRow>
        <TableRow 
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:orientation="horizontal">
            <Button 
                android:id="@+id/btn_09"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="8"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_10"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="9"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_11"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="10"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_12"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="11"
                android:textSize="50dip"
                android:textStyle="bold"
            />
        </TableRow>
        <TableRow 
            android:layout_width="fill_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:orientation="horizontal">
            <Button 
                android:id="@+id/btn_13"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="12"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_14"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="13"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_15"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="14"
                android:textSize="50dip"
                android:textStyle="bold"
            />
            <Button 
                android:id="@+id/btn_16"
                android:layout_width="0dip"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:text="15"
                android:textSize="50dip"
                android:textStyle="bold"
            />
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

这工作得很好，当你把地方洗牌并试着把它们整理好时真的很有趣……呵呵

这很简单，是游戏的一个好主意：D（我会做一些这种类型的，让我们看看会发生什么）

我认为这可以改善代码，我怀疑您的这部分代码：

```
case R.id.btn_01: {
    switchButtonValues(R.id.btn_01);
    btn_01.setText(String.valueOf(numList.get(0)));
    updateButtonStates();
    break;
} 
```

我以为您切换了值，然后将文本设置为该位置的 numList 值，但是，您已更改为 0，不是吗？也许这是你的问题，尝试将设置文本的行放在开关之前......

赛亚，伯坦。

# sharepoint - 以编程方式确定 Word 文档是否经过数字签名

> ID：14127216
> 
> 赞同：0
> 
> 时间：2013-01-02T18:30:10.853
> 
> 标签：sharepoint, ms-word, digital-signature

是否可以以编程方式确定 Microsoft Word 文档是否经过数字签名？将文档上传到 SharePoint 时，我们希望能够更新文档列表项以确定它是否经过数字签名。理想情况下，我们希望能够查询文件以确定 WHO 签署了它。我们没有使用像 CoSign 这样的证书颁发机构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:12:00.343

[请检查此项](http://social.msdn.microsoft.com/Forums/en-US/worddev/thread/8b020f91-acc5-4d33-a928-bf06bef8c6a9)以检查文档是否经过数字签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:13:49.660

据我所知，您可以使用一些 MS Word 自动化，但这不是服务器上的选项。

在代码中，您可以使用我们 SecureBlackbox 产品的[OfficeBlackbox](http://www.eldos.com/sbb/desc-office.php)包来验证 MS Office 或 OpenOffice/LibreOffice 文档的签名，并提取、验证和检查用于制作签名的证书。OfficeBlackbox 适用于任何主要开发工具的 .NET、Java、VCL 和 SecureBlackbox 库版本。

# xslt - 仅在本地发生的 SAXParseException。在 Web 服务器上工作

> ID：14127218
> 
> 赞同：0
> 
> 时间：2013-01-02T18:30:22.820
> 
> 标签：xslt, junit, xalan, saxparseexception

我正在编写一个测试和旧代码的junit测试。此代码适用于我们的 iplanet 网络服务器和我们的本地 Tomcat 服务器，并且可以正常运行。但是，当由 JUNIT 测试运行时，我得到了这个异常。

背景：它从 JAR 中提取 XSL 文件，然后使用从资源文件中读取的 xml 文档对其进行转换。

我尝试过更改变压器工厂，更改编码，并使用十六进制编辑器检查所有文件的空字符。有任何想法吗？

[致命错误]：2251:46：在属性“test”的值中发现无效的 XML 字符（Unicode：0x0），元素为“xsl:when”。系统 ID 未知；第 2251 行；第 46 列；org.xml.sax.SAXParseException；行号：2251；列号：46；在属性“test”的值中发现无效的 XML 字符（Unicode：0x0），元素为“xsl:when”。

*** *更新我发现，如果我使用保存 XSL 的项目的类文件夹并将其移动到 jar 的依赖关系中它可以工作，但是如果它使用 jar 中的 xsl 它会中断

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:51:37.563

建议：

1）确保您的库版本都匹配。

2）我怀疑“找到了一个无效的 XML 字符（Unicode：0x0）”可能是由几个完全不同的事情中的任何一个引起的。你应该调查他们中的每一个。

3）首先，最明显的 - 检查您的输入是否有空字符:)

4) 其次，检查你的*编码*——也许你的发件人写的是 UTF-16，但你的读者期待的是 UTF-8。这是一个很好的链接：

> * [关于 Java 上无效 XML 字符的错误](https://stackoverflow.com/questions/2362302/error-about-invalid-xml-characters-on-java)
> 
> 这是一个编码问题。要么您将输入流读取为 UTF8，但它不是，或者相反。
> 
> 您应该在阅读内容时明确指定编码。例如通过
> 
> `new InputStreamReader(getInputStream(), "UTF-8")`
> 
> 另一个问题可能是tomcat。尝试`URIEncoding="UTF-8"`在 server.xml 文件中添加你的 tomcat 的连接器设置

5) 根本原因也可能是读取失败或某种对象丢失。也许是一个缺失的定义。

问：什么是“SystemId”？什么可能导致它“失踪”？

6）一种可能性是“resolveEntity（）”失败：

`InputSource resolveEntity(String publicId, String systemId)`

以下是有关该问题的几个链接：

*   [Java SAX 解析器引发 UnknownHostException](https://stackoverflow.com/questions/295766/java-sax-parser-raises-unknownhostexception)

*   [如何在运行时在 java 的 xpath 中禁用 dtd？](https://stackoverflow.com/questions/243728/how-to-disable-dtd-at-runtime-in-javas-xpath)

7) 这两个链接都表明“resolveEntity() 可能失败，因为您无法连接到指定的*主机*。检查 XML 中列出的网络主机名，并确保您可以“ping”它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:03:45.290

如果它到达第 2251 行，则强烈表明该位置周围的文件内容有问题。如果该位置的文件没有问题，我的下一个建议是解析器有问题。我知道这听起来很疯狂，但是 JDK 中内置的 XML 解析器存在严重错误，如果您在其位置安装 Apache 版本的 Xerces，我会检查问题是否消失。在许多情况下，这只是将相关 JAR 文件放在 JDK 安装的 lib/endorsed 目录中的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T20:30:15.520

这是因为我尝试转换的 XSL 文件仍在 JAR 中。我必须先让 Maven 将文件提取到目标目录中。

# ruby-on-rails - Ransack 搜索结果 - to_xls?

> ID：14127222
> 
> 赞同：3
> 
> 时间：2013-01-02T18:30:39.720
> 
> 标签：ruby-on-rails, ransack

我有一个运行良好的搜索表单，我想为用户添加一个导出，以将结果集的内容发送到 XLS 文件。

我也成功地实现了 to_xls，但是它给了我正在搜索的对象的最大可能范围，而不是视图中显示的过滤结果。

```
def index

  @search = Expense.search(params[:q])
  @expense_list = @search.result.sort_by(&:expense_date) 

    respond_to do |format|
      format.html
      format.xml { render :xml => @expense_list }
      format.xls { send_data @expense_list.to_xls, :filename => '123.xls'}
    end

end 
```

与ransack如何使用GET方法有关吗？任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T09:25:05.340

我知道这是一个黑客，在花了很多小时没有得到它之后，我还是使用了它。

```
<a href="/expenses.xls?<%= request.fullpath.split("?")[1]  %>">make xls</a> 
```

所以基本上它在？之后使用搜索路径，然后将其添加到你的 model.xls 输出路径中，然后它就可以工作了。我自己讨厌它，必须有更好的方法，但期限。

这里有一个很好的[链接](http://www.savagevines.com/post/2011/9/15/export_data_as_csv_with_rails_3_and_ruby_192/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T09:58:48.447

[Ronin](https://stackoverflow.com/users/729622/ronin)为这个相关问题提供了一个简单的解决方案[，但使用 CSV 而不是 XLS](https://stackoverflow.com/a/17113976/1877184)。就我而言，使用 Ronin 的回答，我只是重写了使用 XLS 的链接，如下所示

```
<%= link_to "Download Excel", reports_path(params.merge(format: "xls")) %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-25T20:44:02.147

```
%= link_to "Download Excel", yours_controller_path(params.merge(format: "xls")) %> 
```

# android - 当我输入编辑文本时，每个字母都会立即添加到 android 的文本视图中

> ID：14127223
> 
> 赞同：2
> 
> 时间：2013-01-02T18:30:41.267
> 
> 标签：android, android-edittext

如何让在文本框中键入的字符在键入后立即显示在单独的文本视图中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:32:31.723

添加 [TextWatcher](http://developer.android.com/reference/android/text/TextWatcher.html)以在用户输入任何单词时`EditText`进行更新`TextView`

```
public void onTextChanged(CharSequence s, int start, int before, int end) {

  yourtextview.append(s.toString());

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:33:19.197

你需要一个`TextWatcher`

```
 editText.addTextChangedListener(new TextWatcher() {
                @Override
                public void onTextChanged(CharSequence s, int start, int before, int count) {

                }

                @Override
                public void beforeTextChanged(CharSequence s, int start, int count, int after) {

                }

                @Override
                public void afterTextChanged(Editable s) {

                }
            }); 
```

# ruby-on-rails - Rails，根据环境填充变量

> ID：14127225
> 
> 赞同：0
> 
> 时间：2013-01-02T18:30:47.040
> 
> 标签：ruby-on-rails

我想根据使用的环境填充变量。例如，`username`必须在环境中进行测试，而在`development`环境中进行其他测试`production`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:36:05.497

现在我明白了你的问题，你应该简单地创建一个 yml 文件。

请参阅[此 Railscast](http://railscasts.com/episodes/85-yaml-configuration-file)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:38:14.497

看看这些选项。

1.  YAML 配置。还有相关视频（[Railscasts 视频](http://railscasts.com/episodes/85-yaml-configuration-file)）

2.  配置器（[Github 配置器](https://github.com/markbates/configatron)）

还有[相关答案](https://stackoverflow.com/questions/110078/what-is-the-best-way-to-store-app-specific-configuration-in-rails)

# asp.net - 如何在 MVC4 中使用 AJAX 导航到下一页？

> ID：14127227
> 
> 赞同：0
> 
> 时间：2013-01-02T18:31:05.970
> 
> 标签：asp.net, ajax, asp.net-mvc, jquery, asp.net-mvc-4

我没有太多在 MVC 应用程序中使用 AJAX 的经验，实际上是我第一次面对。请检查下图并注意矩形。

![在此处输入图像描述](../Images/0dae3a3f8511beb0e542ae64696b2af2.png)

该图像只是我从互联网上获取的一个示例。

最大的矩形是我的应用程序中的一个局部视图，当用户按下 Continue 或 Continuar 按钮时我必须渲染它。应用程序应在不刷新页面的情况下将当前视图替换为另一个视图。

这是我正在测试的代码，首先请注意我正在传递列表的第一个元素，但是当用户按下按钮时，使用下一个元素索引 = 2 呈现视图。

```
 public ActionResult DoTest()
    {

        if (!Request.IsAjaxRequest())
        { }

        List<Worksheet> worksheets = new List<Worksheet>()
        {
            new Worksheet("Hoja 1", ...),
            new Worksheet("Hoja 2", ...)
        };
        return View(worksheets[0]);
    } 
```

可以让我稍微了解一下如何实现这个功能吗？我只知道我需要使用 Ajax。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:36:18.707

有许多不同的方法可以实现这一目标。一种方法是编写一个自定义分页助手（HtmlHelper），它在发布事件时接受新内容。您可以在此处查看有关 Helpers 的所有信息：[自定义 HTML Helpers](http://www.asp.net/mvc/tutorials/older-versions/views/creating-custom-html-helpers-cs)

另一种方法是使用部分页面渲染来实现发布事件后的部分页面更新。

如果我是你，我会将部分视图与 jquery 函数结合起来更新内容。你可以在这里查看一些帮助：[使用 Jquery 更改潜水内容](http://frinity.blogspot.com/2008/06/change-div-content-with-jquery.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:13:25.127

看看[这里](http://awesome.codeplex.com/)的教程和示例。网络上还有很多其他材料，其中包含有关此主题的信息。

# javascript - 阻止 div 在每次点击时添加

> ID：14127239
> 
> 赞同：0
> 
> 时间：2013-01-02T18:31:44.217
> 
> 标签：javascript, toggle

我有一个带有背景图像的表格，单击该表格时，会显示其他图像供用户选择。这是有效的，并在点击事件上出现或隐藏。但是，当用户单击以添加第二张图像时，图像菜单会再次出现（应该如此）但两次。我已经注释掉了我尝试过的解决方案。我以为第一次点击我可以显示`my_div`然后删除它`allImages.onclick`。这在 Chrome 中引发了一个 null 错误，这可能是可以理解的。[这里](https://stackoverflow.com/questions/9384957/add-div-on-click-then-toggle-it-on-every-click-after-that)的问题是类似的。希望我正确添加了链接。无论如何，建议或帮助表示赞赏。

```
function addImage(col) {
    var img = new Image();
    img.src = "../www/images/TEST.png";
    col.appendChild(img);
    img.onclick = function () {
        var myImages = new Array();
        myImages[0] = "../www/images/TEST3.png";
        myImages[1] = "../www/images/TEST2.png";
        myImages[2] = "../www/images/TEST4.png";

        for (var i = 0; i < myImages.length; i++) {
            var allImages = new Image();
            allImages.src = myImages[i];

            var newList = document.createElement("ul");
            newList.appendChild(allImages);
            my_div = document.getElementById("showPics");
            my_div.appendChild(newList);
            my_div.style.display = 'block';

            allImages.onclick = function (e) {
                img.src = e.target.src;
                my_div.style.display = 'none';
                //var element = document.getElementById("showPics");
                //element.parentNode.removeChild(element);
            };
        }
    };
};
for (r = 0; r < howOften; r++) {
    row = table.insertRow(-1);
    for (c = 0; c < numDays; c++) {
        col = row.insertCell(-1);
        addImage(col);
    }
}
document.getElementById('holdTable').appendChild(table); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:23:29.503

我修改了您的代码，添加了 ul 来保存所有 img。它有效，但可能会更好。

```
 function addImage(col) {

        var img = new Image();
        img.src = "../www/images/TEST.png";
        col.appendChild(img);

        var myImages = new Array();
        myImages[0] = "../www/images/TEST1.png";
        myImages[1] = "../www/images/TEST2.png";
        myImages[2] = "../www/images/TEST3.png";

        var container = document.createElement("ul");  //ul to simplify hide/show
        container.style.display = "none";

        for (var i = 0; i < myImages.length; i++) {

            var newList = document.createElement("li");
            var im = document.createElement("img");
            im.src = myImages[i];
            newList.appendChild(im);

            im.onclick = function () {
                img.src = this.src;
            };
            container.appendChild(newList);
        }

        col.appendChild(container);

        col.onclick = function () {
            if (container.style.display == "none")
                container.style.display = "block";
            else
                container.style.display = "none";
        };
    } 
```

# android - Android 4.0.3 默认浏览器上的奇怪 CSS 问题

> ID：14127243
> 
> 赞同：4
> 
> 时间：2013-01-02T18:32:02.700
> 
> 标签：android

我创建了一个移动网站，它有一个带有覆盖文本和项目符号导航的内容滑块 + 页面底部的固定广告横幅。覆盖文本和导航按钮 arr 放置在单独的 div 元素和 div 元素 css 位置被设置为绝对。并且页面底部的固定广告横幅放置在另一个div中，其css位置设置为固定。

在 Android 4.0.3 默认浏览器上，我遇到了一个奇怪的问题，在任何其他浏览器或移动平台上都不存在。我正在使用三星 Galaxy SII 进行测试。

问题：每当出现固定横幅时，上述所有绝对定位的 div 元素都不可见。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T09:17:58.153

看看这个问题：[http](http://code.google.com/p/android/issues/detail?id=31862) ://code.google.com/p/android/issues/detail?id=31862 我也有很多股票浏览器的问题。

# regex - excel正则表达式行尾

> ID：14127246
> 
> 赞同：0
> 
> 时间：2013-01-02T18:32:18.877
> 
> 标签：regex, vba, excel, replace

我正在寻找 excel 2007 的正则表达式，它可以仅在字符串末尾替换**-3的所有实例，完全没有替换它（删除它）。**整个字符串中有 -3 的实例，但是我只需要删除最后的那些。这已集成到宏中，因此首选使用单个正则表达式进行查找和替换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:36:01.860

请尝试以下方法：-

根据 OP 的评论进行编辑：

```
Sub mymacro()
Dim myString as String
 //'--do stuff
 //'-- you could just do this or save the returning 
 //'-- string to another string for further processing :)
 MsgBox replaceAllNeg3s(myString)
End Sub

Function replaceAllNeg3s(ByRef urstring As String) As String
Dim regex As Object
Dim strtxt As String

  strtxt = urstring
  Set regex = CreateObject("VBScript.RegExp")

  With regex
    //'-- replace all -3s at the end of the String
    .Pattern = "[(-3)]+$"
    .Global = True
    If .test(strtxt) Then
      //'-- ContainsAMatch = Left(strText,Len(strText)-2)
      //'-- infact you can use replace
      replaceAllNeg3s = Trim(.Replace(strText,""))
    Else
      replaceAllNeg3s = strText
    End If
  End With

End Function

//'-- tested for 
//'-- e.g. thistr25ing is -3-3-3-3
//'-- e.g. 25this-3stringis25someting-3-3
//'-- e.g. this-3-3-3stringis25something-5
//'-- e.g. -3this-3-3-3stringis25something-3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:06:08.600

您可以在不`Regex`使用 VBA`Instr`函数的情况下执行此操作。这是代码：

```
Sub ReplaceIt()

Dim myRng As Range
myRange = Range("A1") ' change as needed

If InStr(Len(myRange.Text) - 2, myRange.Text, "-3") > 0 Then

    myRange.Value = Left(myRange, Len(myRange) - 2)

End If

End Sub 
```

**更新**

根据 Juri 在下面的评论，将 If 语句更改为 this 也可以，而且更简洁一些。

```
If Right (MyRange, 2) = "-3" Then MyRange=Left(MyRange, Len(MyRange)-2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T07:22:53.960

除非它是更大宏的一部分，否则这里不需要 VBA！只需使用这个公式，你就会得到结果：

```
=IF(右(A1,2)="-3",左(A1,LEN(A1)-2),A1)

```

（假设您的文本在单元格中`A1`）

# java - 用于读取“创建表”sql 语句的正则表达式

> ID：14127247
> 
> 赞同：2
> 
> 时间：2013-01-02T18:32:22.350
> 
> 标签：java, regex

我目前正在使用从文件中读取的行手动编写此文件，并尝试读取表开始的所有表 ddls`a_`

一个输入：

```
Other stuff: 

Other stuff: 
create table a_table1 (
    id number(10,0) not null,
    timestamp number(19,0) not null,
    primary key (id)
)
stuff
create table a_table2 (
    id number(10,0) not null,
    primary key (id)
)

Other stuff: 
create table b_table1 (
    id number(10,0) not null,
    timestamp number(19,0) not null,
    primary key (id)
)
other stuff 

other stuff 
```

应该只输出这个

```
create table a_table1 (
    id number(10,0) not null,
    timestamp number(19,0) not null,
    primary key (id)
)
create table a_table2 (
    id number(10,0) not null,
    primary key (id)
) 
```

目前我正在使用 LineReaders 并记住我何时看到`create table`然后阅读所有内容直到我看到`)`

这是最有效的方法吗？我可以使用一些花哨的 reg ex 吗？

我尝试了以下 reg ex 但这不起作用，因为它只是再次返回整个字符串。也许新的线路正在打破它

```
"^.*create.*a_(.*?)\\).*$", "$1") 
```

任何意见，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:28:51.090

尝试这样的事情：

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();

    IOUtils.copyLarge(getClass().getClassLoader().getResourceAsStream("input.txt"), baos);
    String org = baos.toString();

    final Pattern compile = Pattern.compile("(?s)(create table a_.*?\n\\)\n)");
    final Matcher matcher = compile.matcher(org);
    while (matcher.find()) {
        System.out.println(matcher.group());
    } 
```

**输入.txt**

```
Other stuff:

Other stuff:
create table a_table1 (
    id number(10,0) not null,
    timestamp number(19,0) not null,
    primary key (id)
)
stuff
create table a_table2 (
    id number(10,0) not null,
    primary key (id)
)

Other stuff:
create table b_table1 (
    id number(10,0) not null,
    timestamp number(19,0) not null,
    primary key (id)
)
other stuff 
```

**输出**

```
create table a_table1 (
    id number(10,0) not null,
    timestamp number(19,0) not null,
    primary key (id)
)
create table a_table2 (
    id number(10,0) not null,
    primary key (id)
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T19:53:28.523

只要在 create table sql 语句中只有 2 级括号嵌套，以下基于正则表达式的代码就可以工作：

```
String sql = "Other stuff: \n\nOther stuff: \ncreate table a_table1 (\nid number(10,0) not null,\ntimestamp number(19,0) not null,\nprimary key (id)\n)\nstuff\ncreate table a_table2 (\nid number(10,0) not null,\nprimary key (id)\n)\n\nOther stuff: \ncreate table b_table1 (\nid number(10,0) not null,\ntimestamp number(19,0) not null,\nprimary key (id)\n)\nother stuff \n\nother stuff\n\n";
Pattern p = Pattern.compile(
   "(?i)create\\s+table\\s+a_\\w+\\s+\\((?:[^()]+|\\([^()]+\\))*\\)"
);
Matcher m = p.matcher(sql);
while (m.find()) {
    System.out.println(m.group());
} 
```

### 输出

```
create table a_table1 (
   id number(10,0) not null,
   timestamp number(19,0) not null,
   primary key (id)
)
create table a_table2 (
   id number(10,0) not null,
   primary key (id)
) 
```

# jquery - 显示对应于日期选择器选择的 DIV

> ID：14127248
> 
> 赞同：0
> 
> 时间：2013-01-02T18:32:26.180
> 
> 标签：jquery, html, user-interface, datepicker

使用最新版本的 jquery ui 日期选择器，我想根据所选日期显示一个隐藏的 div。

这个想法是让日期选择器内联显示，当用户选择一个日期时，将显示一个与该日期对应的隐藏 div。

这是我到目前为止所得到的......我认为我需要使用 onSelect 但我无法根据其他 stackoverflow 问题将它放在一起。

```
 $("#inlinedatepicker").datepicker({
    onSelect: function(date) {
        $('.tohide').hide();
        $('#date' + date).show();
    },
    inline: true,
    minDate: new Date(currentYear),
    beforeShowDay: function(date) {
        if (date.getDay() == 0 || date.getDay() == 1 || date.getDay() == 2 || date.getDay() == 3) {
            return [false, ''];
        } else {
            return [true, ''];
        }
    }
}); 
```

因此，如果您选择 2013 年 1 月 1 日，则会显示 ID= date01/01/2013 的 div。我认为斜线不被接受，那么有没有办法解决这个问题？

2013 年 1 月 1 日 div 的 HTML 如下所示...

```
<div id="date01/01/2013">...</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:51:04.140

问题之一可能是传递到 onSelect 事件处理程序的“日期”是格式为“01/18/2013”​​的字符串（取决于浏览器的文化设置）。看起来您正在使用此字符串（附加日期）来选择 div。但是 jQuery 选择器在遇到像“/”这样的特殊字符时会抛出异常。一种解决方法是使用

```
document.getElementById('date' + date).style.display = "block"; // this works  
                                                                // with "date01/18/2013" 
```

您还可以设置不带斜杠的选择器 ID，然后在 onSelect 事件处理程序中从字符串中删除斜杠，并在 jquery 选择器中使用它。

# eclipse - Eclipse 生成的war文件在JBoss中无效

> ID：14127251
> 
> 赞同：1
> 
> 时间：2013-01-02T18:32:38.707
> 
> 标签：eclipse, jboss

我在部署到 JBoss 时遇到了 Eclipse 生成的战争文件的问题。我已经在 Eclipse 中配置了一个 JBoss 5.1.0 实例并将 Eclipse 部署到 JBoss。启动时，JBosss 抱怨它无法读取 zip 文件（我假设它是 war 文件，因为它没有告诉我任何其他信息）。错误是这样的：

```
13:27:08,824 错误 [ProfileDeployAction] 无法添加部署：test.war
org.jboss.deployers.spi.DeploymentException：错误确定结构：test.war
    在 org.jboss.deployers.spi.DeploymentException.rethrowAsDeploymentException(DeploymentException.java:49)
    在 org.jboss.web.deployers.WARStructure.determineStructure(WARStructure.java:248)
    在 org.jboss.deployers.vfs.plugins.structure.StructureDeployerWrapper.determineStructure(StructureDeployerWrapper.java:73)
    在 org.jboss.deployers.vfs.plugins.structure.VFSStructuralDeployersImpl.doDetermineStructure(VFSStructuralDeployersImpl.java:196)
    在 org.jboss.deployers.vfs.plugins.structure.VFSStructuralDeployersImpl.determineStructure(VFSStructuralDeployersImpl.java:221)
    在 org.jboss.deployers.structure.spi.helpers.AbstractStructuralDeployers.determineStructure（AbstractStructuralDeployers.java:77）
    在 org.jboss.deployers.plugins.main.MainDeployerImpl.determineStructure(MainDeployerImpl.java:1004)
    在 org.jboss.deployers.plugins.main.MainDeployerImpl.determineDeploymentContext(MainDeployerImpl.java:440)
    在 org.jboss.deployers.plugins.main.MainDeployerImpl.addDeployment(MainDeployerImpl.java:390)
    在 org.jboss.deployers.plugins.main.MainDeployerImpl.addDeployment(MainDeployerImpl.java:300)
    在 org.jboss.system.server.profileservice.repository.MainDeployerAdapter.addDeployment(MainDeployerAdapter.java:86)
    在 org.jboss.system.server.profileservice.repository.ProfileDeployAction.install(ProfileDeployAction.java:61)
    在 org.jboss.system.server.profileservice.repository.AbstractProfileAction.install(AbstractProfileAction.java:53)
    在 org.jboss.system.server.profileservice.repository.AbstractProfileService.install(AbstractProfileService.java:361)
    在 org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    在 org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1631)
    在 org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    在 org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1082)
    在 org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    在 org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    在 org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    在 org.jboss.system.server.profileservice.repository.AbstractProfileService.activateProfile(AbstractProfileService.java:306)
    在 org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:271)
    在 org.jboss.bootstrap.AbstractServerImpl.start（AbstractServerImpl.java:461）
    在 org.jboss.Main.boot(Main.java:221)
    在 org.jboss.Main$1.run(Main.java:556)
    在 java.lang.Thread.run(Thread.java:662)
引起：java.lang.RuntimeException：java.util.zip.ZipException：打开zip文件时出错
    在 org.jboss.virtual.plugins.context.AbstractExceptionHandler.handleZipEntriesInitException(AbstractExceptionHandler.java:39)
    在 org.jboss.virtual.plugins.context.helpers.NamesExceptionHandler.handleZipEntriesInitException(NamesExceptionHandler.java:63)
    在 org.jboss.virtual.plugins.context.zip.ZipEntryContext.ensureEntries(ZipEntryContext.java:626)
    在 org.jboss.virtual.plugins.context.zip.ZipEntryContext.checkIfModified(ZipEntryContext.java:773)
    在 org.jboss.virtual.plugins.context.zip.ZipEntryContext.getChild(ZipEntryContext.java:817)
    在 org.jboss.virtual.plugins.context.zip.ZipEntryHandler.createChildHandler(ZipEntryHandler.java:191)
    在 org.jboss.virtual.plugins.context.AbstractVirtualFileHandler.structuredFindChild(AbstractVirtualFileHandler.java:684)
    在 org.jboss.virtual.plugins.context.zip.ZipEntryHandler.getChild(ZipEntryHandler.java:165)
    在 org.jboss.virtual.plugins.context.DelegatingHandler.getChild(DelegatingHandler.java:107)
    在 org.jboss.virtual.plugins.context.AbstractVirtualFileHandler.structuredFindChild(AbstractVirtualFileHandler.java:689)
    在 org.jboss.virtual.plugins.context.zip.ZipEntryHandler.getChild(ZipEntryHandler.java:165)
    在 org.jboss.virtual.plugins.context.DelegatingHandler.getChild(DelegatingHandler.java:107)
    在 org.jboss.virtual.VirtualFile.getChild(VirtualFile.java:481)
    在 org.jboss.deployers.vfs.spi.structure.helpers.AbstractStructureDeployer.applyMetadataPaths(AbstractStructureDeployer.java:481)
    在 org.jboss.deployers.vfs.spi.structure.helpers.AbstractStructureDeployer.createContext(AbstractStructureDeployer.java:455)
    在 org.jboss.web.deployers.WARStructure.determineStructure(WARStructure.java:204)
    ... 25 更多
原因：java.util.zip.ZipException：打开 zip 文件时出错
    在 java.util.zip.ZipFile.open（本机方法）
    在 java.util.zip.ZipFile.(ZipFile.java:127)
    在 java.util.zip.ZipFile.(ZipFile.java:143)
    在 org.jboss.virtual.plugins.context.zip.ZipFileWrapper.ensureZipFile(ZipFileWrapper.java:175)
    在 org.jboss.virtual.plugins.context.zip.ZipFileWrapper.acquire(ZipFileWrapper.java:245)
    在 org.jboss.virtual.plugins.context.zip.ZipEntryContext.initEntries(ZipEntryContext.java:484)
    在 org.jboss.virtual.plugins.context.zip.ZipEntryContext.ensureEntries(ZipEntryContext.java:619)
    ... 38 更多

```

我检查了war文件，如果我提取war文件并用7zip压缩其内容，它看起来不错，令人惊讶的是，JBoss启动正常。我对 Eclipse 如何创建 JBoss 无法读取的 war 文件感到困惑。相同的战争文件适用于 Tomcat。

有没有人见过这个？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:38:34.893

所以在调试之后，我发现其中一个库 jar 文件的大小为零。jar 大小为零的项目是空的，eclipse 为它生成了一个大小为零的 jar 文件（无论出于何种原因）。我不确定以前可以通过什么组合将war文件部署到jboss，但这绝对是主要问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:02:02.830

[正如另一篇 SO 文章](https://stackoverflow.com/questions/325202/java-util-zip-zipexception-error-in-opening-zip-file)中所指出的，一个可能的问题是 JVM 正在尝试解压缩到它无法写入的临时目录。尝试确定它试图解压缩到的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T07:25:56.370

可能是你的 web.xml 文件问题，我也面临同样的问题，经过很多不同的尝试，我正打算继续讨论另一篇关于 web.xml 和 web-app 3.0 的文章。这让我开始思考，我检查了我的 web.xml。果然，下面一行就在顶部。

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0"> 
```

我改用 2.5 web-app 规范。WAR 和 EAR 都不会部署。

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5"> 
```

# macos - 删除 .git/index.lock'：权限被拒绝

> ID：14127255
> 
> 赞同：41
> 
> 时间：2013-01-02T18:32:56.107
> 
> 标签：macos, git

我完全不知道为什么我的 git 完全将我拒之门外。我有一台笔记本电脑，可以在工作和在家时使用。对于这两个帐户，我都广泛使用 git，并且它们都位于不同的路径中。今天我上班了，我什么都做不了，我看到的是：

```
/Applications/MAMP/htdocs/my_site/.git/index.lock': Permission denied 
```

我只关心我所在的分支可以被删除。我试过删除分支，检查任何其他分支，删除 index.lock 文件（如网站上其他用户的建议）。我只打开了终端窗口，没有其他可能使用 git 的程序（据我所知，活动窗口中没有任何明显的内容）。我已将计算机直接重新启动到我的工作帐户中，但仍然没有运气。我怎样才能解除这个锁？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2015-01-26T21:45:30.720

我有完全相同的问题想将我的更改提交给 git，并以这种方式解决了它：

*   我需要更改我的`.git`文件夹组及其内容：

    `sudo chown -R <owner>:<group> .git`

*   需要更改此文件夹的权限：

    `sudo chmod -R 775 .git`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-01-02T18:37:46.013

检查哪个用户拥有 git lock：

```
ls -la /Applications/MAMP/htdocs/my_site/.git/index.lock 
```

然后你可以用`sudo`它来删除它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-27T11:54:43.817

更新 xcode 后，您可能会被要求同意新许可证。

> 混帐初始化
> 
> 同意 Xcode/iOS 许可证需要管理员权限，请通过 sudo 以 root 身份重新运行。

当你这样做时

> 须藤 git 初始化

你会得到一个 root 用户 .git 目录

> drwxr-xr-x 10 根 XXXX 340 9 月 25 日 12:40 .git

如果您调用其他创建文件的 git 命令，这些文件也会为 root 用户创建。

如果您还不需要，请更改权限或删除 .git。

**=> 永远不要用 sudo 调用 git ！！！如果你被要求只在一个空目录上调用 git**

> mkdir foo
> 
> 光盘
> 
> 须藤 git 初始化

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-02-20T10:01:53.340

我在运行以下命令时遇到了这个问题 `sudo git fetch && git checkout<branch>`

请注意，第二个 sudo 丢失了。运行以下解决了这个问题： `sudo git fetch && sudo git checkout<branch>`

运行 sudo 时，您不必更改 .git 目录的所有者。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-07-13T12:57:17.173

我在尝试更新我的 repo 的子模块时遇到了同样的问题：

```
$ git submodule update
fatal: Unable to create '.../.git/modules/deps/luajit/index.lock': 
   Permission denied
Unable to checkout '04dc64b558025e76a820f89a8e41840bf8269f32' in
   submodule path 'deps/luajit' 
```

似乎问题在于子模块属于不同的用户，所以我将所有权归还给我：

```
cd .git/modules/
chown -R user.group * 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-18T10:33:51.387

我的电脑系统是Windows。当我在此路径中打开 WSL 远程 vscode 和本地 vscode 时，系统显示此错误。我关闭了远程 vscode WSL，它解决了这个问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-06T15:51:27.693

将 /.git 文件夹的权限从 root 更改为当前用户

```
sudo chown username .git 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-04T19:48:47.770

检查许可肯定是方法。使用错误的帐户登录时遇到此错误。所以，根据我的个人经验，答案是：

“确保您使用正确的帐户登录”。

# asp.net - NServiceBus 在 Web/MVC4 + SQL 架构中有用吗？

> ID：14127261
> 
> 赞同：4
> 
> 时间：2013-01-02T18:33:05.723
> 
> 标签：asp.net, ajax, asp.net-mvc-3, nservicebus

鉴于 Web 是一种非常单向的同步架构，使用 MVC4 启用 NSB 的 Web 应用程序有什么好处吗？

我喜欢 NSB 带来的容错性和易于开发，但由于该技术都是关于单向异步消息传递的，我如何围绕它设计我的应用程序，使用户不会（经常）注意到他们的回发发生时命令尚未完成？在设计我的 UI 以自然地适应 NServiceBus 的曲率时，我应该采用什么范式？

事实上，NSB 似乎是网站与其 SQL 存储之间不必要的复杂性，因为用户总是认为当他们的浏览器完成刷新时“工作”已经完成。在这方面我错了吗？

编辑：我见过其他解决方案，其中每个命令处理程序在 NSB 服务完成工作时发布一个事件，并且 ASP.NET 项目上的事件处理程序将创建启用 Java 脚本的页面不断的“存根文件”轮询以指示操作已完成。这是弥合单向同步和异步平台之间差距的唯一方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:15:40.637

NServiceBus 非常适合任何 Web 前端。您只需要了解异步消息处理如何影响您的 UI。在大多数情况下，可以简单地向用户表明请求已被接受并将被处理。但在其他情况下，您可能需要放弃最终一致性以立即保持一致。

例如，对于用户注册，我通常检查用户名的可用性，然后立即注册用户，但我发送一个命令以通过电子邮件发送激活消息，这样用户就不必等待。用户最终*会*收到他们的电子邮件。因此会显示一条消息，指示将发送一封电子邮件，并且他们需要单击激活链接，即使该邮件可能仅在 5 分钟内发送。

另一个示例是用户可以将各种文档格式转换为 TIFF 的应用程序。请求将被发送，Web 前端将轮询以等待转换结果，然后显示转换后的页面。

所以它会影响你的 UI/UX 的工作方式。它绝对仍然有用，并且在某些情况下可以让您的生活变得更轻松。

就我而言，我使用了 FOSS Shuttle Service Bus：[http](http://shuttle.codeplex.com/) ://shuttle.codeplex.com/ --- 但这些概念仍然适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T12:00:59.767

NServiceBus 与典型的 MVC Web 应用程序有挂钩，允许您使用户的回发等待响应通过总线到达。请参阅 AsyncPages 示例以了解它是如何完成的。

# bash - 对所有打开的文件使用 VIM 命令

> ID：14127263
> 
> 赞同：10
> 
> 时间：2013-01-02T18:33:27.417
> 
> 标签：bash, vim, vi

我有一个使用此命令在 VIM 中打开的文件列表：

```
vim `cat list.txt` 
```

我希望在所有打开的文件上运行此命令：

```
:99,104 norm i# 
```

（从第 99 行到第 104 行，插入注释“#”）<--简单，有效

当我运行上述命令插入时，它在当前文件上按预期工作。如何让 VIM 在所有打开的文件上运行完全相同的命令？我试过了`:argdo`，`:windo`但`:bufdo`没有任何运气。

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T18:36:14.340

如果您之前有（允许更改缓冲区而不保存） ，我想[`bufdo`](http://vimdoc.sourceforge.net/htmldoc/windows.html#%3abufdo)会起作用：[`set hidden`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27hidden%27)`bufdo`

```
:set hidden
:bufdo 99,104 norm i# 
```

`:bufdo! w`然后用或保存所有文件`:wa`。

（注：`set hidden`也可以替换[`set autowrite`](http://vimdoc.sourceforge.net/htmldoc/options.html#%27autowrite%27)为。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:39:14.823

如果您可以使用它，我认为 sed 将是一个更好的选择。sed 是一个命令行编辑器，而不是像 vim 这样的交互式编辑器。

```
sed -i '99,104s/^/#/' list of files 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T01:07:20.000

因为您提供了所有文件作为参数，`:argdo`所以是正确的命令。（除非您打开其他文件，否则也可以`:bufdo`。）如果您不想`:set hidden`（如另一个答案中所示），您必须立即通过`:update`. 因为您使用的是`:normal`命令，所以必须将其括起来`:execute`才能连接另一个 Ex 命令：

```
:argdo 99,104 execute 'norm i#' | update 
```

# android - 在android中改变颜色亮度

> ID：14127264
> 
> 赞同：2
> 
> 时间：2013-01-02T18:33:34.320
> 
> 标签：android, brightness

我想改变颜色的亮度

我实现了这个...

```
Settings.System.putInt(context.getContentResolver(),android.provider.Settings.System.SCREEN_BRIGHTNESS, 200); 
```

这将改变我设备在黑白模式下的亮度。

![在此处输入图像描述](../Images/365f4341445589288b36c5a23992b0b9.png)![在此处输入图像描述](../Images/3dfd90c4f81e09d781228f5bbd0b9bdf.png)

像上面的图片，我可以改变亮度，但我怎样才能给颜色？还有其他我不知道的参数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-09-19T04:42:51.157

这可以使用 TYPE_SYSTEM_ALERT 类型的窗口来完成。这个想法是即使服务也可以有一个窗口；因此您可以使用一个服务，该服务创建一个视图并使用视图和布局参数调用 WindowManager#addView()。在您的情况下，视图将仅具有带有 alpha 值的背景颜色。您可以尝试不同的布局参数以达到所需的效果。

这也是 Facebook 聊天头的工作方式。查看此链接以了解有关实施细节的更多信息：[http](http://www.piwai.info/chatheads-basics/) ://www.piwai.info/chatheads-basics/这将使您了解如何实施这种类型的屏幕覆盖。

# windows-phone-8 - 将图像从 BG 任务保存到隔离存储

> ID：14127266
> 
> 赞同：2
> 
> 时间：2013-01-02T18:33:39.143
> 
> 标签：windows-phone-8, background-process, isolatedstorage

我正在尝试将图像从网络保存到后台任务的隔离存储中，但它会抛出

```
An unhandled exception of type 'System.UnauthorizedAccessException' occurred in System.Windows.ni.dll 
```

我正在使用这段代码

```
 using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            if (myIsolatedStorage.FileExists(tempJPEG))
            {
                myIsolatedStorage.DeleteFile(tempJPEG);
            }

            IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(tempJPEG);

            StreamResourceInfo sri = null;
            Uri uri = new Uri(tempJPEG, UriKind.Relative);
            sri = Application.GetResourceStream(uri);

            BitmapImage bitmap = new BitmapImage();
            bitmap.SetSource(e.Result);
            WriteableBitmap wb = new WriteableBitmap(bitmap);

            // Encode WriteableBitmap object to a JPEG stream.
            Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 100);

            //wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
            fileStream.Close();
        } 
```

当它从应用程序运行时，它可以 100% 工作，但不能从后台任务运行。有关如何保存图像的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:23:14.470

您需要调用此代码 Dispatcher.BeginInvoke() 因为 WriteableBitmap 需要在 UI 线程而不是后台线程上执行。见@http [://codeblog.vurdalakov.net/2012/02/solution-wp7-unauthorizedaccessexceptio.html](http://codeblog.vurdalakov.net/2012/02/solution-wp7-unauthorizedaccessexceptio.html)

# python - 模拟 django 设置以从数据库中检索，值被缓存

> ID：14127280
> 
> 赞同：1
> 
> 时间：2013-01-02T18:35:29.770
> 
> 标签：python, django

我正在尝试模拟 django 的设置文件。我已经建立了一个模型来托管一些可以由管理员更改的设置。这些概念工作正常，但是当值更改时它的行为很奇怪，代码没有接受新的更改。

这是我的 core_settings

```
class CoreSettings(object):
    def __getattr__(self, item):
        try:
            return Configuration.objects.get(key=item).value
        except Configuration.DoesNotExist :
            return getattr(settings, item)

core_settings = CoreSettings() 
```

我基本上使用上面的如下

```
SF_PUBLICATION_PAGINATION_PP = int(getattr(core_settings, 'SF_PUBLICATION_PAGINATION_PP')) 
```

SF_PUBLICATION_PAGINATION_PP 从配置模型中获取正确的值，但是当我更新字段值时它没有反映。仅当我更改文件导致它重新编译时，在哪里得到更改..

有任何想法吗？

* * *

更新：

似乎只有在刷新运行服务器时才能看到更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:49:36.130

是的，您的设置的值不会被刷新，因为它的值是在您的 settings.py 被“加载”时设置的，例如，当您在开发环境中执行“运行服务器”时会发生这种情况。

所以，你可以处理，做这样的事情：

```
def get_live_setting(key):
try:
    return Configuration.objects.get(key=key).value
except Configuration.DoesNotExist :
    return getattr(settings, key)

# get SF_PUBLICATION_PAGINATION_PP's value
get_live_setting('SF_PUBLICATION_PAGINATION_PP') 
```

有了这个，你可以解决你的问题，但正确的方法是使用惰性评估，[这里](https://stackoverflow.com/questions/8976103/how-is-lazy-evaluation-implemented-in-orms-for-example)有一些示例，[这里](http://theorangeduck.com/page/lazy-python)有一篇关于“lazy-python”的有趣帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:59:05.987

使用为此目的设计的包怎么样？

看一下：[`django-livesettings`](http://django-livesettings.readthedocs.org/en/latest/about.html)

即使您决定不使用它，您也可以随时查看它是如何完成的！

* * *

关于你的具体问题。你如何更新字段值？您确定该值是从数据库中检索的，而不是从您的`except`子句中检索的吗？

# regex - 在 perl 中使用正则表达式从最后一次出现匹配

> ID：14127282
> 
> 赞同：12
> 
> 时间：2013-01-02T18:35:36.890
> 
> 标签：regex, perl

我有这样的文字：

```
hello world /* select a from table_b
*/ some other text with new line cha
racter and there are some blocks of 
/* any string */ select this part on
ly 
////RESULT rest string 
```

文本是多行的，我需要从最后一次出现的“*/”中提取直到“////RESULT”。在这种情况下，结果应该是：

```
 select this part on
ly 
```

如何在 perl 中实现这一点？

我已经尝试过`\\\*/(.|\n)*////RESULT`，但这将从第一个“*/”开始

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-02T19:00:13.427

在这种情况下，一个有用的技巧是在正则表达式前面加上贪婪模式`.*`，这将在其余模式匹配之前尝试匹配尽可能多的字符。所以：

```
my ($match) = ($string =~ m!^.*\*/(.*?)////RESULT!s); 
```

让我们把这个模式分解成它的组件：

*   `^.*`从字符串的开头开始并匹配尽可能多的字符。（`s`修饰符`.`甚至允许匹配换行符。）字符串开头的锚点`^`并不是绝对必要的，但它确保了正则表达式引擎在匹配失败时不会浪费太多时间回溯。

*   `\*/`只匹配文字字符串`*/`。

*   `(.*?)`匹配并捕获任意数量的字符；这`?`使它变得不贪心，因此它更喜欢匹配尽可能少的字符，以防正则表达式的其余部分可以匹配的位置不止一个。

*   最后，`////RESULT`只匹配自己。

由于该模式包含很多斜线，并且因为我想避免[倾斜牙签综合症](http://en.wikipedia.org/wiki/Leaning_toothpick_syndrome)，我决定使用替代正则表达式分隔符。感叹号 ( `!`) 是一种流行的选择，因为它们不会与任何正常的正则表达式语法发生冲突。

* * *

**编辑：**根据下面与 ikegami 的讨论，我想我应该注意，如果你想在更长的正则表达式中使用这个正则表达式作为子模式，并且如果你想保证匹配的字符串`(.*?)`永远*不会*包含`////RESULT`，那么你应该将正则表达式的这些部分包装在一个[独立的`(?>)`子表达式](http://perldoc.perl.org/perlre.html#(%3f%3epattern))中，如下所示：

```
my $regexp = qr!\*/(?>(.*?)////RESULT)!s;
...
my $match = ($string =~ /^.*$regexp$some_other_regexp/s); 
```

这`(?>)`会导致其中的模式失败，而不是接受次优匹配（即超出第一个子字符串匹配的匹配`////RESULT`），即使这意味着正则表达式的其余部分将无法匹配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-02T18:57:52.113

```
(?:(?!STRING).)* 
```

匹配任意数量的不包含`STRING`. 就像`[^a]`，但用于字符串而不是字符。

如果您知道不会遇到某些输入（如 Kenosis 和 Ilmari Karonen 所做的），您可以采取捷径，但这与您指定的内容相匹配：

```
my ($segment) = $string =~ m{
    \*/
    ( (?: (?! \*/ ). )* )
    ////RESULT
    (?: (?! \*/ ). )*
    \z
}xs; 
```

如果您不在乎是否`*/`出现在 之后`////RESULT`，以下是最安全的：

```
my ($segment) = $string =~ m{
    \*/
    ( (?: (?! \*/ ). )* )
    ////RESULT
}xs; 
```

`////RESULT`如果最后一个 后面有两个，您没有指定应该发生什么`*/`。以上匹配直到最后一个。如果你想匹配到第一个，你会使用

```
my ($segment) = $string =~ m{
    \*/
    ( (?: (?! \*/ | ////RESULT ). )* )
    ////RESULT
}xs; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-02T18:44:05.670

这是一个选项：

```
use strict;
use warnings;

my $string = <<'END';
hello world /* select a from table_b
*/ some other text with new line cha
racter and there are some blocks of 
/* any string */ select this part on
ly 
////RESULT
END

my ($segment) = $string =~ m!\*/([^/]+)////RESULT$!s;

print $segment; 
```

输出：

```
 select this part on
ly 
```

# ruby-on-rails - 当 default_url_options trailing_slash 为 true 时，Rails root_url 有两个正斜杠

> ID：14127283
> 
> 赞同：5
> 
> 时间：2013-01-02T18:35:45.633
> 
> 标签：ruby-on-rails, actioncontroller

在 application.rb 文件中设置此行时：

```
config.action_controller.default_url_options = { trailing_slash: true} 
```

包含两个正`root_url`斜杠：

**www.example.com//**

没有那条线，我们得到：

**www.example.com**

我们这样做的原因是出于 SEO 的目的，该网站是从 php 转换而来的，我们希望保持一致性。

**问题：**有什么办法可以去掉双斜杠？它最近才开始这样做......也许是 Rails 最近的变化？（我们总是更新到最新的。）

**更新：**能够使用默认应用程序进行复制。（导轨 3.2.8）[https://github.com/silasj/rails_test_forward_slash](https://github.com/silasj/rails_test_forward_slash)

Gihub 问题：[https ://github.com/rails/rails/issues/8700](https://github.com/rails/rails/issues/8700)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:28:14.927

这是一个轨道错误。我追踪了它并提交了一个 PR 来解决问题[https://github.com/rails/rails/pull/8701](https://github.com/rails/rails/pull/8701)

我认为我们可以在不久的将来将其合并。我会尝试将补丁向后移植到，`3-2-stable`以便在下一个`3.2.x`版本中可用。

编辑： PR 合并到 rails/master 和 rails/3-2-stable。可悲的是，3.2.10 有点延迟，需要等待下一个版本；）。

# core-data - 无法将数据保存到 Core Data 第二个相关实体

> ID：14127284
> 
> 赞同：0
> 
> 时间：2013-01-02T18:35:51.890
> 
> 标签：core-data, xcode4.5, magicalrecord

我有一个 iPad 应用程序，使用 XCode 4.5、Storyboard、Core Data（使用 MagicalRecord）和 iOS 6 构建。我有两个实体，每个实体都有多个属性。第一个实体与第二个实体具有一对多的关系。

在 MagicalRecord 文档中，我看不到如何将数据保存到第二个实体；我在某处读到 Core Data 生成它自己的键和索引。我从过去使用 SQLite 中知道，我需要从第一个实体设置密钥才能访问第二个实体。

**[更新]**这是修改后的代码，但它也不起作用。我之前在另一个类的 didSelectRowAtIndexedPath 中选择了一行。我假设设置 localContext。任何想法为什么这不起作用？

```
- (IBAction)saveAppointment:(UIButton *)sender {

    AppointmentInfo *newAppointment = [AppointmentInfo MR_createInContext:localContext];  //  create the entity

    newAppointment.aStartTime = selectedStartDate;
    newAppointment.aEndTime= selectedEndDate;

    [localContext MR_saveNestedContexts];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:11:22.453

我发现了问题...似乎我的商店设置不正确...我从 AppointmentInfo 中删除了父指针并添加了“类”信息。现在像冠军一样工作......谢谢你的时间，tho'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:09:25.270

您需要在适当的（即 localContext）上下文中创建您的实体：

```
[AppointmentInfo MR_createInContext:localContext]; 
```

# svn - 如何查找 VisualSVN 服务器的版本号？

> ID：14127287
> 
> 赞同：10
> 
> 时间：2013-01-02T18:36:06.617
> 
> 标签：svn, visualsvn-server

有没有办法在服务器网站上查看 VisualSVN 服务器软件的版本号（例如：）`https://MyVisualSvnServer/svn`？

如果没有，我在哪里可以找到服务器本身的版本号？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-09-24T17:19:58.877

导航`https://MyVisualSvnServer/svn`并查看页面的 HTML 源代码。
您将在根`<svn>`标记的版本属性中找到版本号。

例子：
`<svn version="1.7.8 (r1419691)...`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-02T21:12:03.090

在我的实例中，当我在服务器上打开 VisualSVN Server 时，主窗口底部有一个包含版本号的链接。当您单击它时，它会提供更多信息：

![VisualSVN 服务器版本](../Images/557b122faec900c113b5fd3ccc5d773f.png)

我不相信您可以通过客户端软件获得该版本 - 它必须从服务器中检索。

这就是你所追求的吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T05:20:32.123

出于安全原因，VisualSVN Server 不会在 Web 界面中显示版本号。版本号显示在 VisualSVN 服务器管理器的仪表板上。您可以单击它以查看详细的版本信息。

# email - 带有 2 个文件夹的 IMAP 帐户，分别用于“已删除”和“已删除邮件”

> ID：14127289
> 
> 赞同：0
> 
> 时间：2013-01-02T18:36:11.030
> 
> 标签：email, imap

是否有一个通用名称应该用于“垃圾”消息？

例如，在 Thunderbird、Outlook 和 iPhone 上测试相同的电子邮件帐户时。删除消息时，他们都会将其移动到不同的命名文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:27:16.970

不，IMAP 标准没有规定文件夹的名称。一些服务器（尤其是 GMail 的 XLIST）使用了一些扩展来帮助解决这个问题。

大多数电子邮件客户端可以重新配置为使用不同的文件夹。例如，在 Thunderbird 的帐户设置中，您可以更改选项“将已删除的邮件移动到 [文件夹]”。Apple Mail 有一个“将此文件夹用于垃圾箱”菜单项。

# sql - SQL max 多列

> ID：14127290
> 
> 赞同：1
> 
> 时间：2013-01-02T18:36:12.810
> 
> 标签：sql, oracle, max, multiple-columns

我正在尝试显示特定值的最大值，以及该值的相应时间戳。我的命令正常工作，但不幸的是，如果该值在超过一个时间段内处于最大值，它会显示所有时间戳。这对于多个目标也可能很麻烦。这是我现在使用的：

```
select target_name,value,collection_timestamp 
from (select target_name,value,collection_timestamp,
             max(value) over (partition by target_name) max_value
      from mgmt$metric_details 
      where target_type='host' and metric_name='TotalDiskUsage' 
        and column_label='Total Disk Utilized (%) (across all local filesystems)'
     )
where value=max_value; 
```

我想使用相同类型的命令（由于带宽不足，试图避免内部连接等）....但每个 target_name 只显示 1 个最大值/时间戳。有没有办法在不破坏它的情况下将 group by 或 limit 函数协调到其中？我对 SQL 有点陌生，所以这是全新的领域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T18:41:02.663

你的查询是如此接近。而不是做的`max`，做一个`row_number()`：

```
select target_name,value,collection_timestamp 
from (select target_name,value,collection_timestamp,
             row_number() over (partition by target_name order by value desc) as seqnum
      from mgmt$metric_details 
      where target_type='host' and metric_name='TotalDiskUsage' 
        and column_label='Total Disk Utilized (%) (across all local filesystems)'
     )
where seqnum = 1 
```

这会按值对分区中的所有内容进行排序。您想要一个最大值，因此按降序排列并取序列中的第一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T18:44:15.203

在窗口中使用`ROW_NUMBER()`函数而不是`MAX()`适当`ORDER BY`的来解决关系：

```
select target_name,value,collection_timestamp 
from (select target_name,value,collection_timestamp,
             ROW_NUMBER() OVER (partition by target_name
                                ORDER BY value DESC, 
                                         collection_timestamp DESC )
                 AS rn
      from mgmt$metric_details 
      where target_type='host' and metric_name='TotalDiskUsage' 
        and column_label='Total Disk Utilized (%) (across all local filesystems)'
     )
where rn = 1 ; 
```

# c# - ravendb 中的级联不起作用

> ID：14127293
> 
> 赞同：1
> 
> 时间：2013-01-02T18:36:31.197
> 
> 标签：c#, model-view-controller, ravendb, cascading-deletes

我一直在尝试在我的 MVC 应用程序中实现级联。似乎一切都已正确设置，但子文档并未被删除。父级元数据是否假设有一个“Id”列表？如果是这样，这就是我所拥有的。另外我怎么知道我是否在使用插件（我可以在 Raven Studio 中知道）？谢谢你的帮助。

```
public class Album
{//What property is the meta data looking for to delete the children?
 public Guid ID {get;set;}
public string Id{get;set;}
public string AlbumName{get;set;}
}
public class Photo
{
public Guid ID{get;set;}
public string Id{get;set;}
public string photoName{get;set}
public string AlbumID{get;set}//Was told to add this so cascading would work
public Album{get;set;}
} 
```

复制

1.  下载最新版本的 Raven 并解压
2.  在文件夹的根目录中运行启动 cmd（确保级联 dll 在捆绑文件夹中）
3.  创建了专辑文档
4.  创建了照片文档
5.  第 4 步在专辑文档元数据中创建了一个关系键（如下所示）
6.  删除相册文件（应该删除照片文件但没有）

METADATA（Photos/449 是照片文档的 ID）

```
{
  "Content-Type": "application/json; charset=utf-8",
  "Raven-Entity-Name": "Albums",
  "Raven-Clr-Type": "Declarations.Entities.Album, Declarations",
  "Raven-Cascade-Delete-Documents": [
    "Photos/449"
  ]
} 
```

注意：我确实有一个 ID 属性，它是父母和孩子的 Guid，这会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:06:14.697

我缺少服务器文件夹中的子文件夹插件。

# asp.net-mvc - 使用 MVC3 EF4.1 的“实体对象不能被多个 IEntityChangeTracker 实例引用”的持续问题

> ID：14127298
> 
> 赞同：0
> 
> 时间：2013-01-02T18:37:09.143
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework-4

我之前发布了这个问题，它非常彻底地解释了我正在做的事情： [ASP.NET MVC3 and Entity Framework v4.1 with error An entity object cannot be referenced by multiple instances of IEntityChangeTracker](https://stackoverflow.com/questions/12117072/asp-net-mvc3-and-entity-framework-v4-1-with-error-an-entity-object-cannot-be-ref)

问题是，在我解决了上述问题中的这个特定问题后，这个问题已经多次出现在迷你购物车、丢失的购物车、结帐页面等。其他问题与此相关，但不一定容易识别，并且需要花费大量时间进行故障排除、查找和修复。与其发布我最新的具体问题，不如找出我是否做错了什么。通过将作为实体的购物车存储在 Session 中，或者通过更好的方式将其分离（如下所示的分离方法），或者是否有更简单的方法来调试这些类型的问题？这是我的分离方法的更新：

```
 public void DetachCart(Cart cart)
    {
        var objectContext = ((IObjectContextAdapter)context).ObjectContext;
        if (cart.Customer != null)
        { objectContext.Detach(cart.Customer); }
        if (cart.ShipFromAddress != null)
        {
            var shipFromAddress = cart.ShipFromAddress;
            objectContext.Detach(cart.ShipFromAddress);
            cart.ShipFromAddress = shipFromAddress;
        }
        if (cart.ShipToAddress != null)
        {
            var shipToAddress = cart.ShipToAddress;
            objectContext.Detach(cart.ShipToAddress);
            cart.ShipToAddress = shipToAddress;
        }
        if (cart.Lines != null && cart.Lines.Count > 0)
        {
            List<CartLine> lines = new List<CartLine>();
            foreach (var item in cart.Lines.ToList())
            { 
                objectContext.Detach(item);
                lines.Add(item);
            }
            cart.Lines = lines;
        }
        objectContext.Detach(cart);
    } 
```

感谢您在此问题上提供的任何见解。这是一条漫长的痛苦之路。

**更新** 似乎我的很多麻烦都源于`CartModelBinder`使购物车处于连接状态而不是分离状态的事实。通过改变它，它消除了我当前的问题并删除了我必须分离以避免这个问题的几个地方。但是，我的问题“是否有一种更简单的方法来分离所有问题，或者有一种方法来调试/跟踪这些问题”仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:14:07.657

有一种解决方案 - 不要在视图或模型绑定器中使用实体。仅当您将数据保存到数据库时才使用视图模型并将它们转换为实体。它可以使您的应用程序更加复杂，但在解决泄漏上下文、附加和分离问题时，它将为您节省大量时间。

# windows-8 - 快速切换选择时 ListView 崩溃

> ID：14127300
> 
> 赞同：0
> 
> 时间：2013-01-02T18:37:13.683
> 
> 标签：windows-8

我使用 ListView 来显示一个选择，当在选项之间有一段时间切换可能性时，一切正常，但是当我快速切换（少于 1 秒）时，它会崩溃。我得到的错误在文件“app.gics”中。
发件人是应用程序，错误是“{”值不在预期范围内。”}”
谢谢
（我已经清理并重建了项目，没有帮助）

# jquery - 带有负整数的 jQuery 掩码输入

> ID：14127301
> 
> 赞同：2
> 
> 时间：2013-01-02T18:37:36.463
> 
> 标签：jquery, maskedinput

如何使用 jQuery Masked Input 插件在我的掩码中允许负数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:48:03.033

首先转到插件的“文档”页面。 [http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

然后参考以“您现在可以提供自己的掩码定义”开头的部分。

```
jQuery(function($){
   $.mask.definitions['~']='[+-]';
   $("#eyescript").mask("~9.99 ~9.99 999");
}); 
```

* * *

所以你可能想要类似......

```
jQuery(function($){
   $.mask.definitions['~']='[+-]?';
   $("#eyescript").mask("~999999999");
}); 
```

我假设末尾有问号“[+-]？” 将对正则表达式片段按预期工作。

# javascript - 如何使用剑道验证器验证日期格式为 yyyy-MM-dd？

> ID：14127305
> 
> 赞同：5
> 
> 时间：2013-01-02T18:38:06.727
> 
> 标签：javascript, validation, kendo-ui, datepicker, telerik

我有一个剑道日期选择器，其构造如下：

```
$("#date").kendoDatePicker({
    format: "yyyy-MM-dd",
    footer: " ",
    parseFormats: ["MM/dd/yyyy", "dd/MM/yyyy"]
  }); 
```

我想使用剑道验证器来验证日期是否包含格式为 yyyy-MM-dd 的有效日期。我试过这个：

```
<input type="date" id="date" placeholder="yyyy-mm-dd" name="date" required data-required-msg="Please enter a date." data-date-msg="Please enter a valid date."/> 
```

虽然验证器确实正确验证了“必需”条件，但它似乎没有验证日期格式是否正确或是否有效。例如，“abc”作为有效日期传递，2013-18-85 也是如此。如何使用验证器确保格式正确的有效日期？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-03T00:20:35.677

如果你想要`validate`一个`date`你需要定义一个规则（没有内置规则）。

尝试定义：

```
$("#date").kendoValidator({
    rules: {
        date: function (input) {
            var d = kendo.parseDate(input.val(), "yyyy-MM-dd");
            return d instanceof Date;
        }
    }
}); 
```

**注意：**请记住，KendoUI 首先使用`parseFormats`选项解析日期，然后将其转换为`format`选项，最后运行验证。这就是为什么我在验证中使用`yyyy-MM-dd`而不是`["MM/dd/yyyy", "dd/MM/yyyy"]`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-19T21:38:28.153

答案是：

```
<script src="@Url.Content("~/Scripts/kendo/2015.2.805/kendo.aspnetmvc.min.js")"></script>
<script type="text/javascript">
    kendo.ui.validator.rules.mvcdate = function (input) {
        //use the custom date format here
        //kendo.parseDate - http://docs.telerik.com/kendo-ui/api/javascript/kendo#methods-parseDate
        return !input.is("[data-val-date]") || input.val() === "" || kendo.parseDate(input.val(), "@(MvcApplication.AppCulture.DateTimeFormat.ShortDatePattern)") !== null;
    };
</script> 
```

这里有更多信息：[http ://docs.telerik.com/kendo-ui/aspnet-mvc/validation](http://docs.telerik.com/kendo-ui/aspnet-mvc/validation)

干杯

# sql - 关系代数 - 笛卡尔积与自然连接？

> ID：14127306
> 
> 赞同：9
> 
> 时间：2013-01-02T18:38:08.567
> 
> 标签：sql, database-design, relational, relation, relational-algebra

我正在为考试而学习，但未能找到一个可靠的标准来确定是`x`使用笛卡尔积还是使用自然连接`|X|`。

我想出了一个粗略的指南：

***“如果您需要投影与要连接的表中的属性同名的属性，您必须使用`x`并说明要投影的表名称：`tableA.colname1 = tableB.colname1`”***

然而，这并没有遵循我笔记中的一些解决方案，我的讲师似乎使用`x`上述约定或`|x|`互换使用。

有没有人可以遵循一个规则来定义一个在另一个之上的使用？

* * *

以这个模式为例（仅与为简洁起见引用的问题相关的模式）：

```
takes(ID, course_id, sec_id, semester, year, grade)
student(ID, name, dept_name, tot_cred)
```

Q) 找出所有参加过 2011 年春季或 2011 年秋季课程的学生的姓名。

我的回答尝试：

```
π name(σ semester="Spring" ^ year=2011(takes ⋈ student)) ∪ π name(σ semester="Autumn" ^ year=2011(takes ⋈ student))
```

实际答案：

```
π name(σ semester="Spring" ^ year=2011 ^ takes.ID=student.ID(takes x student)) ∪ π name(σ semester="Autumn" ^ year=2011 ^ takes.ID=student.ID(takes x student))
```

任何人都可以提供一个理由吗？

在我看来，自然加入会处理`takes.ID=student.ID`?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T18:55:04.137

据我了解，自然连接是投影的过滤笛卡尔积：

*   你取笛卡尔积，然后
*   选择它，使同名列中的值具有相同的值，并且
*   投影它，以便所有列都有不同的名称。

在这种假设下，您的答案与实际答案同构。

要看到这一点，您可能希望将自然连接扩展到上述运算符序列，并使用关系代数定律将它们浮动。您会看到由于投影到 ，投影消失了`name`，并且选择标准与上面的选择融合在一起。即使您从未改变自己答案的含义，您最终也会得到与实际答案完全相同的树！

* * *

我可以想到您的讲师可以互换使用这些概念的一个原因：您的讲师希望您了解这些概念*可以*互换使用，因为“自然连接只是一条捷径”（尽管这是有争议的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-27T18:59:51.183

笛卡尔积只是自然连接的一种特殊情况，其中连接关系没有任何共同的属性名称。在 Codd 的原始代数中，重命名完全是一个单独的操作。要获得具有某些共同属性的两个关系的真正笛卡尔积，您必须在进行（自然）连接之前重命名这些属性。

为简洁起见，有时会在书面示例中省略重命名，而是使用产品符号。不幸的是，这掩盖了重要的一点，即只有一种连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-02-23T21:29:16.273

我认为有两种极端情况：

1.  内连接中没有重复的行：内连接等于相交（我的意思只是结果）。不同的内连接〜相交

2.  内连接没有共同的特点：内连接等于笛卡尔积。

# c# - 分页后DataPager丢失数据？

> ID：14127307
> 
> 赞同：0
> 
> 时间：2013-01-02T18:38:12.750
> 
> 标签：c#, asp.net, linq, ef-code-first

我有一个`DataPager`用于浏览搜索结果的页面。我的 DataPager 在我点击并分页其中一些后丢失了结果，例如，如果我翻页 2-3 次，我将只得到 ID 等标签而没有数据。

**标记**：

```
 <asp:ListView runat="server" ID="LVCAdmin">
     <!-- Templates here -->
 </asp:ListView>

<asp:DataPager ID="DataPager1" PagedControlID="LVCAdmin" runat="server">

     <Fields>
         <asp:NextPreviousPagerField ButtonType="Button" 
         ShowFirstPageButton="True" ShowNextPageButton="False"
         ShowPreviousPageButton="False" />

         <asp:NumericPagerField />

         <asp:NextPreviousPagerField ButtonType="Button"
             ShowLastPageButton="True" ShowNextPageButton="False"
             ShowPreviousPageButton="False" />
      </Fields>

</asp:DataPager> 
```

**代码隐藏**：

```
protected void btnSubmit_Click(object sender, EventArgs e)
{
    string keyword = txtSearch.Text.Trim();

    List<dynamic> Cresults = AdminSearchAll(keyword);

    if (Cresults.Count != 0)
    {    
        LVCAdmin.DataSource = Cresults;
        LVCAdmin.DataBind();

        NoResults.Visible = false;
        LVCAdmin.Visible = true;
    }
    else
    {
        NoResults.Visible = true;

        LVCAdmin.Visible = false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T23:47:53.563

我想到了。我`OnPreRender="Pager_PreRender"`在我的 DataPager 控件中添加了一个。下面是方法。到目前为止，它已按预期工作。

```
 protected void Pager_PreRender(object sender, EventArgs e)
        {
            if (IsPostBack)
            {
                   string keyword = txtSearch.Text.Trim();

                    List<dynamic> Cresults = AdminSearchAll(keyword);

                    if (Cresults.Count != 0)
                    {

                        LVCAdmin.DataSource = Cresults;
                        LVCAdmin.DataBind();

                        NoResults.Visible = false;
                        LVCAdmin.Visible = true;
                    }
                    else
                    {

                        NoResults.Visible = true;

                        LVCAdmin.Visible = false;

                    }

                }

        } 
```

# html - 如何隔离文本中的文本 标记为粗体而不改变剩余段落的格式

> ID：14127311
> 
> 赞同：4
> 
> 时间：2013-01-02T18:38:21.513
> 
> 标签：html, css

我有自己的三个文本部分，`<p></p>`我需要在每个段落中加粗几个单词。所以我的问题是如何正确地加粗“CLX Exchange Accommodators, Inc.”。使用 CSS，但后面的文本不会出现在粗体文本下方。我问这个的原因是因为每当我尝试隔离我想在另一个 div 或 p 标签中加粗的文本时，剩余的文本就会出现在加粗文本的下方。

这是我的html

```
<div id="content">
   <p class="copy"> CLX Exchange Accommodators, Inc. have been proudly serving real estate investors nationwide since 1991.</p>

</div>
<!--End of content--> 
```

这是我目前在 codepen 上的项目，如果它有助于[http://codepen.io/Austin-Davis/pen/IpDLu](http://codepen.io/Austin-Davis/pen/IpDLu)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T18:40:00.837

要加粗段落中的某些文本，您可以使用`<b>`,`<strong>`标记或`<span>`带有样式集的 a。这些选项如下所示：

```
I want to <b>bold</b> a word.

This word is <strong>bolded</strong>.

The following word is <span style="font-weight: bold;">bolded</span>. 
```

请注意，您选择的标签具有*语义*含义。随着 HTML5 的发展，出现了一种趋势，即使您正在使用的标签具有意义，而不仅仅是为了显示目的而将它们放在那里。[你可以在这里阅读一些相关的含义。](http://html5doctor.com/i-b-em-strong-element/)

虽然我在上面的代码片段中使用了内联样式来设置跨度的样式，但我可能会使用样式表来设置实际网页上的样式。将 HTML 标记和样式分开是一种很好的做法。

哦，还有最后一件事：将文本放在 ap 或 div 标签中的原因是因为这些元素默认设置为`display: block;`. 如果您想使用其中一个标签（出于语义原因不应该这样做），您可以将它们设置为`display: inline;`or `display: inline-block;`。[在此处阅读有关显示属性的所有信息。](http://css-tricks.com/almanac/properties/d/display/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:43:18.707

这可以通过 STRONG 标签来实现，但我更喜欢使用 SPAN 来保持它的灵活性。您可以在 CSS 中设置 SPAN（或就此而言为 STRONG）的样式。

```
<style>
#content p.copy span {font-weight: bold;}
</style>
<div id="content">
<p class="copy"> <span>CLX Exchange Accommodators, Inc.</span> have been proudly serving real estate investors nationwide since 1991.</p>

</div>
<!--End of content--> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:44:04.463

```
 <p class= "copy"> <b>CLX Exchange Accommodators, Inc.</b> have been proudly serving real estate investors nationwide since 1991.</p>

.copy b 
{
  font-weight:bold;
} 
```

尝试这个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-02T18:45:59.253

你有理由想用 CSS 做吗？最简单的方法是`<b> </b>`在 CLX Exchange Accommodators, Inc. 周围放置标签。

```
<div id="content">
   <p class="copy"> <b>CLX Exchange Accommodators, Inc.</b> have been proudly serving real estate investors nationwide since 1991.</p>

</div>
<!--End of content--> 
```

您也可以使用`<strong> </strong>`标签，但它也可能会在某些较旧的浏览器中使文本变为斜体

# jquery - 带有无限滚动和 window.resize 的 Twitter 引导词缀

> ID：14127316
> 
> 赞同：20
> 
> 时间：2013-01-02T18:38:34.247
> 
> 标签：jquery, twitter-bootstrap, infinite-scroll, window-resize

通过阅读一些相关的问题，我意识到 twitter 引导词缀组件根本没有`$.affix('refresh')`可用的方法 - 我的问题虽然相关，但可能只是刷新之间的额外步骤，让我尝试解释一下。

我有一个带有标准引导导航栏的页面。在其下方，一旦用户滚动经过 x 像素，我将附加一个“固定”的子导航（在我的情况下，导航栏的高度为 41 像素，因此在 41 像素时，词缀会启动并通过将 .affix 类更改为`.affix {top:41px}`all 很好)

所以对于第一个词缀，我可以使用 html-only 属性。

在页面的下方（本质上可以被认为是“第二页”）我有另一条导航，一旦用户滚动到某个位置，它应该“附加”并替换第一个子导航 - 考虑到第二个的位置由于内容我使用 js 计算第一页的高度并`offset: {top:xxx}`根据我得到的内容设置页面/词缀是可变的。

这也很有效/正如预期的那样，用户向下滚动一点，第一个子导航词缀启动，如果他继续滚动并到达页面下方的第二个子导航，它会启动并替换第一个附加的子-nav （实际上它本身并没有取代它，而是用更高的 z-index 覆盖）

从这里开始，我有两个问题我无法找到解决方案：

1.  当用户重新调整窗口大小时，第一页的内容当然会变长，这会改变我在页面下方粘贴的原始偏移顶部尺寸。首先，我认为一个简单的调用`.affix('refresh')`将/可能是解决方案，但当然这种方法甚至在组件上都不可用。接下来，我想我可以再次手动重新计算高度并重新创建`$('.my-second-affix').affix({offset: {top:x-new-offset}});`- 但由于某种原因，这似乎根本不起作用，我不知道为什么:(

2.  下一个要解决的问题是我也在使用 jquery infinitescroll 来加载越来越多的页面......每个页面可能在各个阶段都有其他子导航，我想添加和替换最后一个词缀是现在在顶部。

**请注意**，我还想确保如果用户向后滚动另一个方向，则先前附加的子导航会向后重新附加自己（我怀疑只要附加偏移正确，它们就可以了）

希望这个解释足以突出我的问题，并且有人之前已经处理过这个问题，或者可以为解决方案提供一些指导。我试图让 offset 成为一个从顶部返回当前偏移量的函数（如另一个问题[Twitter bootstrap change affix offset](https://stackoverflow.com/questions/12181136/twitter-bootstrap-change-affix-offset)中所述），但由于某种原因，它也不能按预期工作。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-25T21:19:45.457

这个问题很老了，但因为没有其他人回答过......

我在词缀上遇到了类似的问题。这是我解决它的方法。

```
$('.affixed-elements').each(function() {
   var topOffset = 0; //calculate your top offset here
   var $container = //Set this to the element's container;
   $(this).affix({
      offset: {
         top: function() {
            return $container.offset().top - topOffset;
         },
         bottom: function() {
            return $('body').height() - ($container.offset().top+$container.outerHeight());
        }
      }
   });
}); 
```

即使在窗口调整大小后，这些设置也应将附加元素保持在其容器的边界内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-13T07:14:58.483

你有没有试过`$('#myAffix').affix('checkPosition')`。这在 Bootstrap3.0 中可用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-21T12:18:05.083

如果我理解正确，您将需要计算调整大小的偏移量。这个例子是使用 Jquery 类似的东西：

```
$(window).resize(calcOffset);

    function calcOffset() 
         {
            var location = $("myElement").offset();
            var top = location.top;
         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-12T15:59:55.067

我会建议您像这样在代码本身中使用偏移量`<div class="col-md-offset-6">`。

# jquery - CoffeeScript 和 Rails：设置和获取全局变量

> ID：14127317
> 
> 赞同：0
> 
> 时间：2013-01-02T18:38:34.167
> 
> 标签：jquery, ruby-on-rails, coffeescript

刚刚进入我的第一个 rails 应用程序的 CoffeeScript 部分；以前从未做过任何 JS/CoffeeScript，所以有很多问题。从...开始：

在我的应用程序中，用户可以“声称”（拥有）任务（或想法，我称之为）。每个用户在任何给定时间最多可以有 3 个想法。所以：

1）我当前的代码如下所示：

```
$ ->
  exports = this
  exports.claimedCount = 0
  $('.claim').bind 'ajax:success', ->
    $(this).text("Claimed")
    $(this).addClass("btn-success")
    claimedCount++
    alert(claimedCount) 
```

这*应该*做的是声明一个全局变量`claimedCount`并在每次用户声明一个想法时递增它。*实际上*什么都没有：`Uncaught ReferenceError: claimedCount is not defined`

这是为什么？我应该如何真正定义变量？我什至需要一个全局变量来完成我想要做的事情？（每个想法都有自己的声明按钮）。

2）用户可能会在他们已经拥有一些想法时呈现页面。因此，我需要`claimedCount`在第一次渲染页面时设置 using Rails。对此的任何指针将不胜感激（我应该将我的`.js.coffee`文件重命名`.js.coffee.erb`并在那里执行吗？这样的 js 初始化代码的常见位置是什么？）

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:09:56.317

我同意 Khaled 对第一个问题的回答。

在第二个中，我宁愿将文件重命名为**.js.coffee.erb**以便首先使用 erb 对其进行预处理并编写如下内容：

```
window.claimedCount = <%= @user.claims.count %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:51:53.057

如果您将代码带到[js2coffee.com](http://js2coffee.org/)并将其转换为 js，您将看到您的变量不是全局变量，因为它位于函数内部。

您可以查看[有关](https://stackoverflow.com/questions/4214731/coffeescript-global-variables)如何在咖啡脚本中声明全局变量的问题（主要是您使用`window.myvariable`）

关于第二个问题，您可以将值放在 html 中的隐藏字段中，然后使用 jquery 选择器获取它。

`<input type="hidden" id="claimsCount" value=<%= @user.claims.count %>>`

然后在你的js中

`$('#claimsCount').val()`

# html - dl、dt 和 dd 元素的 CSS，使它们显示为居中并作为键排列：值

> ID：14127318
> 
> 赞同：0
> 
> 时间：2013-01-02T18:38:39.630
> 
> 标签：html, css, layout

我想要这样列出键/值：

```
Username: myhandle
Password: lalalalalala
     Key: somevalue 
```

我为此使用`dl`,`dt`和`dd`html5 元素，并试图提出 CSS 来正确显示这些元素。我已经这样做了：http: [//jsfiddle.net/njm84/1/](http://jsfiddle.net/njm84/1/)

看起来不错，除了我必须为左侧设置 50% 的宽度。问题是如果值很长，即使所有内容都向左移动，即使有足够的空间，它也会不必要地被切断。例如：

```
 a: some-long-value-that-extends-far-to-the-right-even-though-there's-lots-of-space-on-left
                                    b: another-value-to-the-right-even-though-there's-lots-of-space-on-left 
```

理想情况下，它对元素使用一种表格布局 CSS，以便将上面的内容向左移动，以便一切都适合。诀窍是我不能添加任何额外的 html 元素。所以我不能`dl`用`<div class="table">`.

***更新***：这是另一个版本的 jsfiddle，如果其中一个值很长，我希望键/值列表看起来像：http: [//jsfiddle.net/njm84/4/](http://jsfiddle.net/njm84/4/)

我必须手动更改宽度（分别为 15%、5% 和 80%）来解释那个长值，否则它会被包裹起来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:05:46.940

我不能从你的问题中完全确定你在寻找什么，但接近[这个](http://jsfiddle.net/robertc/njm84/16/)或[这个](http://jsfiddle.net/robertc/njm84/17/)？这是我使用的 CSS：

```
body {
    display: table;
    margin: 0 auto;
}
dt {
    text-align: right;
    font-weight: bold;
}
dt:after {
    content: ":";
}
dd {
    text-align: left;
    padding-left: 1em;
}
dl {
    display: table-row;
}
dt, dd {
    display: table-cell;
} 
```

几点注意事项：这取决于您可以应用的父元素`display: table`，它不一定是，`body`但这是您的 JSFiddle 中唯一可用的元素。另一件会破坏它的事情是，如果您有任何标记，其中一个有多个`dd`元素`dt`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-25T11:33:00.603

另一种方法是使用`flex`：

```
dl {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: flex-start;
  margin: 0;
  word-break: break-word;
}

dt {
  width: 50%;
  text-align: right;
}

dt:after {
  content: ":";
}

dd {
  box-sizing: border-box;
  width: 50%;
  padding-left: 1rem;
} 
```

[http://jsfiddle.net/0jt2uz79/1/](http://jsfiddle.net/0jt2uz79/1/)

注意：此示例使用多个`dt`&`dd`包含在一个中`dl`- 如果数据彼此相关（如原始“登录详细信息”示例中所示），则更具语义。这是一个定义**列表**，它允许多个项目。

# r - 如何在 RMarkdown 中隐藏代码，并可选择查看

> ID：14127321
> 
> 赞同：39
> 
> 时间：2013-01-02T18:38:44.230
> 
> 标签：r, markdown, code-snippets, rstudio

我正在编写一个 RMarkdown[文档](http://rpubs.com/RobinLovelace/3380)，我想在其中重新运行一些块（5 到 9）。没有必要再次显示这些块，所以我考虑使用

```
```{r echo=FALSE} 
```

使重新运行的块不可见，如另一个[stackoverflow 问题](https://stackoverflow.com/questions/13091112/hiding-the-r-code-in-rmarkdown-knit-and-just-showing-the-results)中所述。这很好，并输出所需的结果（改进了第二次迭代的拟合 - 请参阅[此处](http://rpubs.com/RobinLovelace/3383)实施的此解决方案）。

然而，在理想的世界中，代码将是可扩展的，因此如果用户出于教育目的和清晰的目的（例如，请参阅[此处](https://stackapps.com/questions/2574/click-to-expand-code-regions)的 Greasemonkey 解决方案链接），则可以准确地看到正在发生的事情，而不是像我的第二个 rpubs 示例中那样隐藏。解决方案可能看起来像这样，但周围的盒子较短，以避免分心：

```
for (i in 1:nrow(all.msim)){ # Loop creating aggregate values (to be repeated later)
  USd.agg[i,]   <- colSums(USd.cat * weights0[,i])
}

for (j in 1:nrow(all.msim)){
weights1[which(USd$age <= 30),j] <- all.msim[j,1] /USd.agg[j,1] 
weights1[which(USd$age >= 31 & USd$age <= 50),j] <- all.msim[j,2] /USd.agg[j,2] 
weights1[which(USd$age >= 51),j] <- all.msim[j,3] /USd.agg[j,3] ## 
}
# Aggregate the results for each zone
for (i in 1:nrow(all.msim)){
  USd.agg1[i,]   <- colSums(USd.cat * weights0[,i] * weights1[,i])
}
# Test results 
for (j in 1:nrow(all.msim)){
weights2[which(USd$sex == "m"),j] <- all.msim[j,4] /USd.agg1[j,4]  
weights2[which(USd$sex == "f"),j] <- all.msim[j,5] /USd.agg1[j,5] 
}

for (i in 1:nrow(all.msim)){
USd.agg2[i,]   <- colSums(USd.cat * weights0[,i] * weights1[,i] * weights2[,i])
}

for (j in 1:nrow(all.msim)){
weights3[which(USd$mode == "bicycle"),j] <- all.msim[j,6] /USd.agg2[j,6]  
weights3[which(USd$mode == "bus"),j] <- all.msim[j,7] /USd.agg2[j,7] 
weights3[which(USd$mode == "car.d"),j] <- all.msim[j,8] /USd.agg2[j,8]  
weights3[which(USd$mode == "car.p"),j] <- all.msim[j,9] /USd.agg2[j,9]
weights3[which(USd$mode == "walk"),j] <- all.msim[j,10] /USd.agg2[j,10]
}
weights4 <- weights0 * weights1 * weights2 * weights3
for (i in 1:nrow(all.msim)){
USd.agg3[i,]   <- colSums(USd.cat * weights4[,i])
}
# Test results 
plot(as.vector(as.matrix(all.msim)), as.vector(as.matrix(USd.agg3)),
     xlab = "Constraints", ylab = "Model output")
abline(a=0, b=1)
cor(as.vector(as.matrix(all.msim)), as.vector(as.matrix(USd.agg3)))
#rowSums(USd.agg3[,1:3]) # The total population modelled for each zone, constraint 1
#rowSums(USd.agg3[,4:5])
#rowSums(USd.agg3[,6:10]) 
```

我对`echo=F`解决方案很满意，但对可扩展的代码片段更满意。

**编辑：除了第一个示例之外的所有 RPubs 示例现在都已删除，以避免使用基本相同的文档阻塞其出色的发布系统。**

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2016-04-04T16:30:52.427

使用三年前不存在的[**rmarkdown**](https://rmarkdown.rstudio.com)软件包，这变得更加容易。基本上你只需打开“代码折叠”：[https](https://bookdown.org/yihui/rmarkdown/html-document.html#code-folding) ://bookdown.org/yihui/rmarkdown/html-document.html#code-folding 。您不再需要编写任何 JavaScript。

例如

```
---
title: "Habits"
output:
  html_document:
    code_folding: hide
--- 
```

另请参阅[https://bookdown.org/yihui/rmarkdown-cookbook/fold-show.html](https://bookdown.org/yihui/rmarkdown-cookbook/fold-show.html)以更好地控制要折叠或展开的代码块。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-02T20:40:47.023

如果你在你的代码之前添加一个 html 标签，你可以使用 CSS 选择器对输出的一些部分做一些聪明的事情——markdown 可以轻松地传递 HTML：

```
<style>
div.hidecode + pre {display: none}
</style>

<div class="hidecode"></div>
```{r}
summary(cars)
``` 
```

在这里，我的 CSS 样式规则匹配`<pre>`a 之后的第一个标记`<div class=hidecode>`并将其设置为不可见。Markdown 用两个标签写入 R 块`<pre>`- 一个用于 R，一个用于输出，此 CSS 捕获第一个。

现在您知道如何在 CSS 中匹配代码和输出块，您可以在 Javascript 中用它们做各种聪明的事情。您可以在`<div class=hidecode>`标签中添加一些内容并添加一个切换可见性的点击事件：

```
<style>
div.hidecode + pre {display: none}
</style>
<script>
doclick=function(e){
e.nextSibling.nextSibling.style.display="block";
}
</script>

<div class="hidecode" onclick="doclick(this);">[Show Code]</div>
```{r}
summary(cars)
``` 
```

复杂性的下一步是使动作切换，但是您不妨使用`jQuery`并获得真正的时髦。或者使用这个简单的方法。让我们用一个按钮来做，但你还需要一个 div 来让你的钩子进入 R 命令 PRE 块，并且遍历变得有点复杂：

```
<style>
div.hideme + pre {display: none}
</style>
<script>
doclick=function(e){
code = e.parentNode.nextSibling.nextSibling.nextSibling.nextSibling
if(code.style.display=="block"){
 code.style.display='none';
 e.textContent="Show Code"
}else{
 code.style.display="block";
 e.textContent="Hide Code"
}
}
</script>

<button class="hidecode" onclick="doclick(this);">Show Code</button>
<div class="hideme"></div>
```{r}
summary(cars)
``` 
```

（注意：我认为您可以将 R 块包装在`<div>`标签中：

```
<div class="dosomething">
```{r}
summary(cars) 
``` 
</div> 
```

但这失败了——有人知道为什么吗？）

# excel - 路径名中的变量和获取路径未找到错误

> ID：14127322
> 
> 赞同：0
> 
> 时间：2013-01-02T18:38:58.283
> 
> 标签：excel, vba

我正在拔头发。mkdir 适用于年份（整数），但不适用于添加的月份（字符串）。

```
year = 2013
month = MonthName(1)

'I have also tried just putting "January" in there as well 
```

这有效：

```
Path1 = "\\TEST\" & year & "\" 
```

但这不会：

```
Path1 = "\\TEST\" & year & "\" & month & "\" 
```

建议？谢谢！

最终修复：

将 Path1 拆分为：

```
Path1: "\\TEST\" & year & "\"

Path2:  "\\TEST\" & year & "\" & month & "\" 
```

通过检查：

```
If Len(Dir(Path1, vbDirectory)) = 0 Then
        MkDir Path1
End If
If Len(Dir(Path2, vbDirectory)) = 0 Then
        MkDir Path2
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:57:19.500

除非已经存在，否则`"\\TEST\" & year & "\" & month & "\"`不能通过[MkDir](http://msdn.microsoft.com/en-us/library/office/gg264553.aspx)创建。`"\\TEST\" & year & "\"`

因此，扩展您发布的代码，您可以这样做：

```
Path1 = "\\TEST\" & year & "\"
If DIR$(Path1, vbDirectory) <> "" then mkdir Path1
Path1 = "\\TEST\" & year & "\" & month & "\"
If DIR$(Path1, vbDirectory) <> "" then mkdir Path1 
```

# ms-access - 循环遍历表，更改字段值

> ID：14127325
> 
> 赞同：1
> 
> 时间：2013-01-02T18:39:11.333
> 
> 标签：ms-access, vba

我正在尝试编写一段代码，该代码将通过一个表运行，并将具有某个值的每个字段替换为另一个值。

```
Private Sub Form_Load()

Dim db As DAO.Database
Dim rst As DAO.Recordset
Dim strSQL As String

Set db = CurrentDb()

strSQL = "SELECT Profile3 FROM Bank WHERE 'AB'"

Set rst = db.OpenRecordset(strSQL, dbOpenDynaset)

Do Until rst.EOF

With rst

If .RecordCount > 0 Then

  .MoveFirst
  .Edit
  !Profile3 = "AA"
  .Update     
  .MoveNext

End If

End With

Loop

End Sub 
```

这就是我目前正在使用的，但是，当它运行时它会严重崩溃。我知道基本代码有效，因为当我拉出循环时它有效，但仅在第一个条目上有效。

就像我似乎在使用 VBA 时遇到的大多数问题一样，这可能是我忽略的一个荒谬的简单修复。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:42:10.167

你总是先行动。你需要在某个阶段继续前进。只需摆脱 MoveFirst。

```
Do Until rst.EOF
    With rst
      .Edit
      !Profile3 = "AA"
      .Update     
      .MoveNext
    End With
Loop 
```

另外，我猜你的意思是 WHERE somefield：

```
strSQL = "SELECT Profile3 FROM Bank WHERE somefield='AB'" 
```

但是，在这种情况下，我怀疑您需要的是：

```
strSQL = "UPDATE Bank SET Profile3 ='AA' WHERE Profile3 ='AB'"
CurrentDB.Execute strSQL, dbFailOnError 
```

# php - 无法多次打开 jquery 对话框

> ID：14127329
> 
> 赞同：0
> 
> 时间：2013-01-02T18:39:38.490
> 
> 标签：php, javascript, jquery, html, ajax

我有一个 jquery 对话框，其中有：

```
$(document).ready(function() {
if( window.location.href.indexOf( '#product' ) != -1 ) {
    var productID = window.location.href.split('-');
    showDialog(productID[1]);
}

});

function showDialog(productID)
{
    $( "#dialog-modal_"+productID ).html( "<iframe src='index.php?act=showProduct&amp;id="+productID+"' width='100%' height='100%' frameborder='0' scrolling='no'></iframe>" );
    $( "#dialog-modal_"+productID ).dialog({
    width: 790,
    height: 590,
    modal: true,
    open: function(event, ui)
    {

    }
    });

} 
```

当我打开它时它工作正常，但如果我关闭该窗口并尝试重新打开它 - 它没有响应。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:50:22.133

下面是 jQuery UI 对话框代码应该如何显示的示例。请记住，您需要一种打开对话框的方法。`showDialog`因此，创建一个再次调用该模态的函数。一个按钮或链接就可以了。

**jQuery UI 代码**

```
function showDialog(productID)
{
    var container = $('#dialog-modal_'+productID).html('<blah blah>');
    container.dialog({
        autoOpen: false,
        modal: true,
        width: 790,
        height: 590
    });
    container
        .dialog('option', 'title', 'Your Title')
        .dialog('option', 'buttons', {
            Close: function() {
                $(this).dialog('close');
            }
        })
        .dialog('open');
        //do open event work here
} 
```

**打开按钮的 DOM**

```
<a href="#null" id="open">Open My Modal</a> 
```

**用于打开按钮的 jQuery**

```
$('a#open').click(function(e) {
    e.preventDefault();
    showDialog(<your id>);
}); 
```

# java - 加密发送到 MySQL 数据库的 Android 应用数据

> ID：14127331
> 
> 赞同：2
> 
> 时间：2013-01-02T18:39:41.817
> 
> 标签：java, android, security, amazon

我已经向亚马逊提交了一个应用程序以供批准，他们回复了这个：

*“这个应用程序似乎正在发送未加密的敏感信息。在这种情况下，电子邮件和密码是以明文形式发送的。请更新应用程序以加密所有敏感信息。”*

在服务器端，我使用 sha1() PHP 方法（非常标准）加密数据库中的密码。我假设他们希望在传输到 Web 服务时对 Java 传递的密码/电子邮件字符串进行加密。我假设？如果是这种情况，我需要解密数据（特别是电子邮件，因为这需要以纯文本形式存储在我的数据库中。

有人看过这个亚马逊查询吗？我对它的解释是否正确？如果是这样，Java*中*有没有办法在传输过程中临时加密数据？

这是我如何做的一个示例：

```
insertParam = new ArrayList<NameValuePair>();
            insertParam.add(new BasicNameValuePair("Email", Email));
            insertParam.add(new BasicNameValuePair("Password", Password));
            insertParam.add(new BasicNameValuePair("Username", Username));

            try {
                HttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url_select);

                httpPost.setEntity(new UrlEncodedFormEntity(insertParam));
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();

                is = httpEntity.getContent();

            } 
```

**编辑：**

看起来HTTPS是要走的路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:51:06.963

Amazon 的要求似乎有些保守，但最好通过 HTTPS 而不是未加密的 HTTP 连接到您的 Web 服务来满足。这正是另一个 StackOverflow 用户最后所做的：[亚马逊 AppStore 提交失败：“密码等敏感信息以明文形式回显，无需加密”](https://stackoverflow.com/questions/6919952/amazon-appstore-submission-failed-sensitive-information-like-password-is-echoe)

虽然您可以加密应用程序中的数据，通过 Internet 发送数据，然后使用共享密钥在您的服务器上对其进行解密，但这很容易受到反编译您的应用程序以获取密钥的攻击者的攻击。

或者，您可以生成一个密钥对，在应用程序中包含公钥并用它加密数据，通过互联网发送，然后使用服务器上的私钥解密传入的数据，但您基本上只是重新- 手动实现 HTTPS。

归根结底，实现亚马逊要求的“正确”方式是使用 HTTPS。其他任何事情都可能难以安全地实施。

# ruby-on-rails - 如何使用 Devise 为 Omniauth 制作自定义登录表单？

> ID：14127333
> 
> 赞同：4
> 
> 时间：2013-01-02T18:39:49.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, omniauth

我使用 Omniauth 作为我唯一的身份验证，`:database_authentication`我的模型上没有。我想使用这个 gem 通过 Atlassian Crowd 登录：[https ://github.com/robdimarco/omniauth_crowd](https://github.com/robdimarco/omniauth_crowd)

该 gem 使用标准的 Crowd 登录表单，这是我不想要的。我想制作一个行为相同的自定义表单，但完全代替登录页面（没有“使用 Crowd 登录”）或类似的东西，只是一个登录 Crowd 的表单。

为此，我`config.omniauth`在 devise.rb 的行中添加了这个选项：

```
:form => Devise::SessionsController.actions(:new) 
```

从我在网上看到的情况来看，它将使用该 Rack 端点来显示自定义表单。我已将 app/views/devise/sessions/new.html.erb 中的 html 更改为 new.html.haml，其中包含以下表单：

```
= simple_form_for @user, :url => user_omniauth_authorize_path(:crowd) do |f|
  = f.input :username, :input_html => { :name => 'username' }
  = f.input :password, :input_html => { :name => 'password' }
  = f.button :submit 
```

我希望模仿默认的 OmniAuth 表单。问题是，当我使用`:form`devise.rb 中的选项访问 users/auth/crowd 时，我收到错误消息：

```
Could not find devise mapping for path "/users/auth/crowd". 
```

在使用 Devise 时，有没有办法像这样为 OmniAuth 提供自定义表单？

编辑：以下是路线：

```
devise_for :users, :controllers => { :omniauth_callbacks => 'users/omniauth' } do
  get 'login', :to => 'devise/sessions#new', :as => :new_user_session
  get 'logout', :to => 'devise/sessions#destroy', :as => :destroy_user_session
end

devise_scope :user do
  get '/users/auth/:provider', :to => 'users/omniauth#passthru'
  match '/users/auth/failure', :to => 'users/omniauth#failure'
end

resources :users 
```

我在这里尝试了几件事，但我尝试过的都没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-11T20:58:29.163

我知道这可能会迟到，但我需要做同样的事情，也许这会在未来对其他人有所帮助。就我而言，我正在开发一个内部应用程序，该应用程序需要使用与我们自己的人群服务器上的帐户相同的帐户。据我所知，没有任何安全问题，因为我们只与我们自己的内部人群服务器交谈。我想设置登录页面的样式以匹配应用程序的美感。

添加 omniauth_crowd gem 并使用 Devise 对其进行配置后，您应该有一个如下所示的路由：

```
user_omniauth_authorize    GET|POST    /users/auth/:provider(.:format)    authentication#passthru {:provider=>/crowd/} 
```

我所要做的就是创建一个自定义设计会话表单，该表单模仿默认的 omniauth_crowd 的工作方式。基本上它只是将用户名和密码参数发布到您的服务器。[在https://github.com/plataformatec/devise#configuring-views](https://github.com/plataformatec/devise#configuring-views)中描述了创建自定义设计视图

我的表格如下所示：

```
<%= form_tag user_omniauth_authorize_path(:crowd) do %>
  <div><%= label_tag :username, "Username" %><br />
  <%= text_field_tag :username %></div>

  <div><%= label_tag :password, "Password" %><br />
  <%= password_field_tag :password %></div>

  <div><%= submit_tag "Sign in" %></div>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T18:05:14.460

我完全理解你想要做什么。但是有很多原因，我建议你不要这样做。作为

1.  omn​​iauth 的基本概念是人们可以相信他们是从他们熟悉的网站登录的。
2.  如果您删除该页面并添加您自己的页面，那么用户可能会认为您有一些恶意的理由来做同样的事情。

# 我没有足够的回购评论这就是为什么我写这个作为答案

# php - 数组中的分层下拉菜单？

> ID：14127335
> 
> 赞同：0
> 
> 时间：2013-01-02T18:39:55.720
> 
> 标签：php, html, arrays, forms, drop-down-menu

我有以下代码从我的数据库中获取字段并将它们放入 html 表单的格式下拉菜单中。以目前的形式，我从我的数据库中获取了 3 次，代码的工作原理在代码的注释中进行了解释：

```
$getSolos = $wpdb->get_results($wpdb->prepare("
        SELECT * FROM wp_terms p 
        LEFT OUTER JOIN wp_term_taxonomy t ON p.term_id = t.term_id
        WHERE t.taxonomy = 'format'
        AND t.parent = 0
        AND t.term_id NOT IN (SELECT parent FROM wp_term_taxonomy WHERE taxonomy = 'format' AND parent > 0)
        ORDER BY t.parent
        "));  // This fetches all rows that do not have children or parents.

$getParents = $wpdb->get_results($wpdb->prepare("
        SELECT * FROM wp_terms p 
        LEFT OUTER JOIN wp_term_taxonomy t ON p.term_id = t.term_id
        WHERE t.taxonomy = 'format'
        AND t.parent = 0
        AND t.term_id IN (SELECT parent FROM wp_term_taxonomy WHERE taxonomy = 'format' AND parent > 0)
        "));    // This fetches all rows that have children

$getChildren = $wpdb->get_results($wpdb->prepare("
        SELECT * FROM wp_terms p 
        LEFT OUTER JOIN wp_term_taxonomy t ON p.term_id = t.term_id
        WHERE t.taxonomy = 'format'
        AND t.parent > 0
        ORDER BY t.parent
        AND p.name
        "));    //This fetches all rows that ARE children

<select name="format">  //start the dropdown
    <option value="empty"></option>  //default field is empty
        <?php 
            foreach ($getSolos as $solo) {  //start loop through solos for output
                echo "<option value='".$solo->name."'>".$solo->name."</option>"; // output solos as options in the dropdown
            }
            foreach ($getParents as $parent) { //start loop through parents for output
                echo "<optgroup label='".$parent->name."'>"; // Spit out parent as an optgroup
                foreach ($getChildren as $child) { //Start loop through children for output
                    if ($child->parent == $parent->term_id) { // if child's parent value matches the ID of the parent
                        echo "<option value='".$child->name."'>    ".$child->name."</option>"; //Spit out the child as an option
                    }
                }
                echo "</optgroup>"; //close the optgroup
            }
        ?>
    </select> // end the dropdown 
```

输出如下：

```
Entry Form
Twitter
Facebook
 - Entry Form
 - Page 
```

数据库中的组合表如下所示：

```
term_id       name           slug                 taxonomy     parent
1             Entry Form     entry-form           format       0
2             Page           page                 format       3
3             Facebook       facebook             format       0
4             Entry Form     facebook-entry-form  format       3
5             Twitter        twitter              format       0 
```

然而，这种方法存在一个问题。

1）3次访问数据库效率低下。

2）如果一个孩子也有一个孩子是无效的。虽然 children 的孩子都进入 $getChildren，但代码只会吐出 1 级孩子并忽略其余部分。

出于演示目的，如果我有第 6 行：

```
term_id       name          slug                  taxonomy     parent
6             Single        single                format       2 
```

然后代码会这样做：

```
Entry Form
Twitter
Facebook
 - Entry Form
 - Page 
```

请注意， Single 被完全忽略，尽管它包含在 $getChildren 数组中。

那么如何才能使这段代码变得更好呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T19:13:13.480

第 6 行有一个值为 2 的父级。虽然 term_id 为 2 的行有一个值为 3 的父级，因此不包含在您的父级对象中。

我可能会使用一个函数来实现这一点；

```
$getTerms = $wpdb->get_results($wpdb->prepare("
              SELECT * FROM wp_terms p 
              WHERE t.taxonomy = 'format'
              ORDER BY p.name ASC"));

$terms = array();              
foreach($getTerms as $key => $term){
  $terms[$term->parent][$term->term_id] = $term;
} 

function printTerms($terms, $parent = 0, $deep = 0){
  if(count($terms[$parent]) > 0){

    $indent = "";
    for($i = 0; $i < $deep; $i++){
      $indent .= "&nbsp;&nbsp;&nbsp;";
    }

    foreach($terms[$parent] as $key => $term){

      if(count($terms[$term->term_id]) > 0){

        if($deep == 0){
          echo "<optgroup label='".$term->name."'></optgroup>";
        } else {
          echo "<option value='".$term->name."'>".$indent.$term->name."</option>";
        }

        printTerms($terms, $term->term_id, ($deep+1));

      } else {

        echo "<option value='".$term->name."'>".$indent.$term->name."</option>";

      }

    }
  }
}

?>    

<select name="format">
   <option value="empty"></option>
   <?php printTerms($terms); ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:24:38.270

没有测试它，但我会首先创建一个包含所有 ID 的分层数组：

```
$items = array();
$ids   = array();
foreach ($getFormats as $format) {
    $items[$format->term_id] = $format;
    if (isset($format->parent)) {
        $ids[$format->parent->term_id][] = $format->term_id;
    } else $ids[$format->term_id] = null;
} 
```

然后很容易遍历这个数组并创建 HTML 代码：

```
foreach ($ids as $id => $subIds) {
    if (!empty($subIds)) {
        echo '<optgroup label="' . $items[$id]->name . '">';
        foreach ($subIds as $subId) 
            echo '<option value="' . $items[$subId]->name . '">' . $items[$subId]->name . '</option>';
        echo '</optgroup>';
    } else {
        echo '<option value="' . $items[$id]->name . '">' . $items[$id]->name . '</option>';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:33:07.953

您需要将输出设置为像这样显示以在选择中创建标题：

```
 <select>
  <optgroup label="Swedish Cars">
    <option value="volvo">Volvo</option>
    <option value="saab">Saab</option>
  </optgroup>
  <optgroup label="German Cars">
    <option value="mercedes">Mercedes</option>
    <option value="audi">Audi</option>
  </optgroup>
</select> 
```

这意味着您需要以某种方式识别哪些输出应该是标签，哪些应该是选项。

# linux - 在 Unixy 文件系统中，放置您正在开发的软件的常规位置在哪里？

> ID：14127336
> 
> 赞同：4
> 
> 时间：2013-01-02T18:39:56.310
> 
> 标签：linux, unix, conventions, directory-structure

这是一个非常愚蠢的问题，但我不知道答案。提前道歉。

我想从 GitHub 下载别人的代码仓库来处理它。在 Unix-y 文件系统中，最常规的放置位置在哪里？

我一直在阅读[维基百科上的标准目录结构，](http://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard#Directory_structure)看起来下面`opt`可能是最合适的地方。那是对的吗？

我使用的是 MacOS，因此我可以在`/Users/me`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:45:29.353

这取决于您的使用计划。如果这是您想要破解的代码，通常您的主目录是正确的位置，因为这是您的 unix 用户私有的。我个人创建了一个“开发”子目录并将代码放在那里（我的或其他人的，通过 github）。

如果您希望在系统范围内安装此软件，答案会因系统而略有不同。在大多数情况下，/opt 是一个合理的选择，/usr/local 也是如此。

# ruby - 为什么 Ruby 中的 Dir.glob 看不到以方括号命名的文件夹中的文件？

> ID：14127343
> 
> 赞同：2
> 
> 时间：2013-01-02T18:40:09.260
> 
> 标签：ruby, linux

我有这棵树：

```
.
├── folders
│   ├── foo
│   │   └── fuu.flac
│   ├── foo [bar]
│   │   └── fuu.flac
│   └── foo[bar]
│       └── fuu.flac
└── test.rb 
```

这个代码：

```
#!/bin/env ruby
## encoding: utf-8

Dir.glob('./folders/*').each do |path|
  puts "Contents of #{path} :"
  Dir.glob(File.join(path, '*')).each do |file_path|
    puts "\t #{file_path}"
  end
end 
```

我希望看到我的三个 fuu.flac 文件。但是，该脚本不会显示名称中带有方括号的文件夹中的文件。

这是输出：

```
Contents of ./folders/foo [bar] :
Contents of ./folders/foo[bar] :
Contents of ./folders/foo :
     ./folders/foo/fuu.flac 
```

这是Ruby的正常行为，还是我错过了什么？

（我在 Ubuntu 12.10 下使用 Ruby 1.9.3）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:43:13.697

方括号在 shell globbing 的上下文中具有[特殊的含义](http://en.wikipedia.org/wiki/Glob_%28programming%29#Syntax)。`foo[bar]`匹配`foob`，`fooa`或`foor`，但显然不是`foo[bar]`。如果您真的想动态生成这样的模式，您至少需要`\?{}[].`使用反斜杠转义字符：

```
def escape_glob(s)
  s.gsub(/[\\\{\}\[\]\*\?]/) { |x| "\\"+x }
end

# ...
Dir.glob("#{escape_glob(path)}/*").each do |file_path|
  # ...
end 
```

# php - 无法将单选按钮值存储在表中

> ID：14127347
> 
> 赞同：1
> 
> 时间：2013-01-02T18:40:36.400
> 
> 标签：php, sql, forms

我正在尝试将单选按钮的值保存在我的数据库表中`choice`。我收到消息`Data saved successfully`，但表中没有存储任何值。

形式：

```
 <form id="myForm" method="post" action="">
<div  data-role="fieldcontain">
                <fieldset data-role="controlgroup">
                    <center<legend>Choose in which category you'd like to be included</legend></center>
                    <p><input type="radio" name="choice[]" value="player" id="player" class="custom" />
                    <label for="player">Player</label>
                    <input type="radio" name="choice[]" value="coach" id="coach" class="custom" />
                    <label for="coach">Coach</label>
                    <input type="radio" name="choice[]" value="supporter" id="supporter" class="custom" />
                    <label for="supporter">Supporter</label>
                    <input type="radio" name="choice[]" value="sponsor" id="sponsor" class="custom" />
                    <label for="sponsor">Sponsor</label>
                    <input type="radio" name="choice[]" value="alumni" id="alumni" class="custom" />
                    <label for="alumni">Alumni</label>
                    <input type="radio" name="choice[]" value="other" id="o" class="custom" />
                    <label for="o">Other</label>

                </fieldset>
            </div>
<div data-role="fieldcontain">
    <label for="name">Please enter your name:</label>
    <input type="text" name="name" id="name" class="required" value="" autocomplete="off" /><br />
    <label for="email">Please enter your e-mail:</label>
    <input type="text" name="email" id="email" value="" class="required" autocomplete="off"  /><br />
    <label for="phone">Please enter your phone number:</label>
    <input type="number" name="phone" id="phone" value="" class="required" autocomplete="off"  />

<br><br>    
<label for="other">Other comments</label>
<textarea name="other" id="other" autocomplete="off" placeholder="Anything else you'd like to add?">
</textarea>
<p><strong id="error"></strong></p>
<br><br>
<input type="submit" id="save" name="save" value="Submit Form" />
<p id="response"></p>
</form>
</body>
</html> 
```

PHP：

```
<?php 
$mysqli = new mysqli('localhost', 'root', '', 'E-mail list');
/* check connection */
if ($mysqli->connect_errno) {
printf("Connect failed: %s\n", $mysqli->connect_error);
exit();
}
if(isset($_POST['save']))
{
$name = $mysqli->real_escape_string($_POST['name']);
$email = $mysqli->real_escape_string($_POST['email']);
$phone = $mysqli->real_escape_string($_POST['phone']);
$other = $mysqli->real_escape_string($_POST['other']);
$choice = $mysqli->real_escape_string($_POST['choice']);
$query = "INSERT INTO Players (`name`,`email`,`phone`,`other`,`choice`) VALUES ('".$name."','".$email."','".$phone."','".$other."','".$choice."')";
if($mysqli->query($query))
{
echo 'Data Saved Successfully.';
}
else
{
echo 'Cannot save data.';
}
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:43:36.053

`var_dump($_POST)`确定涌入的数据。

还有一件事要检查它是保存还是提交？在`$_POST['save']`

**编辑**

获得完整表格后 - 错误在于您的`center`标签

更改`<center<legend>`为`<center><legend>`

此标签中的错误 - ↑

# java - Java ChangeListener 多次触发

> ID：14127354
> 
> 赞同：2
> 
> 时间：2013-01-02T18:41:06.907
> 
> 标签：java, swing, jslider, changelistener

我在滑块上有一个简单的更改监听器。谁能解释为什么当我点击一个新位置时它会被触发 3 次。在我编写代码以将先前的值保存在某个地方以查看它是否真的改变之前，我想知道是否有另一种方法来解决它。第一个跳跳机显示它原来的样子，下一个显示新值，最后一个重复新值。

```
 slider_1 = new JSlider();
    slider_1.addChangeListener(new ChangeListener() {
        public void stateChanged(ChangeEvent arg0) {
            if (fullyInitialized == 1) {
                if (comboBox_1.getSelectedIndex() < 1) {
                    SendData2Device(1);     
                }       
            }
        }
    });
    slider_1.setOrientation(SwingConstants.VERTICAL); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T18:52:36.083

您需要检查更改是否为值调整。

完整教程链接： http: [//docs.oracle.com/javase/tutorial/uiswing/components/slider.html](http://docs.oracle.com/javase/tutorial/uiswing/components/slider.html)

但这是重要的一点：

```
public void stateChanged(ChangeEvent e) {
    JSlider source = (JSlider)e.getSource();
    if (!source.getValueIsAdjusting()) {
        // Do what needs to occur here.
    }
} 
```

基本上当 getValueIsAdjusting() 返回 false 时，用户已经停止移动滑块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:56:06.747

a 中有 3 个事件作为链的一部分，`ChangeListener`即和更改本身。`mouseDown``mouseUp`

更改完成后，您可以使用以下命令对事件采取行动`getValueIsAdjusting`：

```
JSlider source = (JSlider)e.getSource();
if (!source.getValueIsAdjusting()) {
   ...
} 
```

请参阅：[如何编写更改侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/changelistener.html)

# json - mongo 查询引发 BSONElement: bad type 65

> ID：14127356
> 
> 赞同：4
> 
> 时间：2013-01-02T18:41:20.557
> 
> 标签：json, mongodb, bson, mongodump

我们遇到了这样一种情况，即无法查询存在于 MongoDB 中的文档而不会导致：

```
db.collection.find({"_id":ObjectId("50d393be70a580280b117ea5")})
Wed Jan  2 12:30:44 Assertion: 10320:BSONElement: bad type 65
0x6073f1 0x5d1aa9 0x4b0d98 0x5c17a6 0x6b3f35 0x6b6a2c 0x69be0a 0x6aa13f 0x668e46 0x668ec2 0x66a2ce 0x5cbcc4 0x4a4a14 0x4a67e6 0x7f2223434c4d 0x49f669 
 mongo(_ZN5mongo15printStackTraceERSo+0x21) [0x6073f1]
 mongo(_ZN5mongo11msgassertedEiPKc+0x99) [0x5d1aa9]
 mongo(_ZNK5mongo11BSONElement4sizeEv+0x1d8) [0x4b0d98]
 mongo(_ZN5mongo16resolveBSONFieldEP9JSContextP8JSObjectljPS3_+0x146) [0x5c17a6]
 mongo(js_LookupPropertyWithFlags+0x3f5) [0x6b3f35]
 mongo(js_GetProperty+0x7c) [0x6b6a2c]
 mongo(js_Interpret+0x10ea) [0x69be0a]
 mongo(js_Execute+0x36f) [0x6aa13f]
 mongo(JS_EvaluateUCScriptForPrincipals+0x66) [0x668e46]
 mongo(JS_EvaluateUCScript+0x22) [0x668ec2]
 mongo(JS_EvaluateScript+0x6e) [0x66a2ce]
 mongo(_ZN5mongo7SMScope4execERKNS_10StringDataERKSsbbbi+0x144) [0x5cbcc4]
 mongo(_Z5_mainiPPc+0x26c4) [0x4a4a14]
 mongo(main+0x26) [0x4a67e6]
 /lib/libc.so.6(__libc_start_main+0xfd) [0x7f2223434c4d]
 mongo(__gxx_personality_v0+0x2a1) [0x49f669] 
```

我可以运行该特定记录的 mongodump，然后当我将 bson 转换为 json 时，我得到：

```
$ bsondump server1_collection.bson > server1_collection.json
terminate called after throwing an instance of 'std::length_error'
  what():  basic_string::_S_create
Aborted 
```

看起来可能存在 UTF-8 字符和/或 base64 编码字符串导致存储无效 BSON 的问题：- [https://jira.mongodb.org/browse/SERVER-7769](https://jira.mongodb.org/browse/SERVER-7769)

听起来像前进我可以用 --objcheck 启动 mongod 以确保不会插入无效数据（不确定性能损失）。

不知道如何轻松清理旧数据并删除这些无效记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-20T21:48:43.203

[这是相关的问答](https://stackoverflow.com/questions/15296088/assertion-10320-bsonelement-bad-type-113-when-querying-profile-collection-db-s)。您可能应该修复数据库损坏。

您可以验证是否有任何错误（使用 mongo shell）：

```
db.getSiblingDB("your_base").oplog.rs.validate(true) 
```

然后尝试使用：`db.repairDatabase()` 注意，它只影响[当前数据库](https://docs.mongodb.org/v3.0/reference/method/db.repairDatabase/)。

或者从`mongod --repair`.

数据中的空终止符号也可能是问题（[主题](https://groups.google.com/forum/#!topic/mongodb-user/p7h-HXuM9uQ)）。

[有时，修复 db 是不可能的](https://stackoverflow.com/a/11969198/1566267)：而不是从副本或早期转储中恢复数据。

# c++ - 延迟函数模板实例化

> ID：14127360
> 
> 赞同：3
> 
> 时间：2013-01-02T18:41:54.160
> 
> 标签：c++, templates, c++11, function-templates

在这个相当人为的示例中，我试图将*函数模板*传递给我的函数，并希望我的函数在内部实例化*函数模板*。本质上，我不希望用户知道我的函数的类型和工作原理，而只是能够传递一个*函数模板*让我实例化自己。自包含示例（不编译）：

```
#include <iostream>
#include <vector>
#include <iterator>
#include <algorithm>

template <template <typename InputIt, typename OutputIt> class CopyFunc>
void transferWith( CopyFunc<std::vector<int>::const_iterator,
                            std::back_insert_iterator<std::vector<int>>> const& func )
{
    std::vector<int> source{1, 2, 3, 4, 5, 6, 7};
    std::vector<int> sink;

    func(source.begin(), source.end(), std::back_inserter(sink));

    for (auto&& e : sink)
    {
        std::cout << e << std::endl;
    }
}

int main(int argc, char const *argv[])
{

    // I want to pass just the function template in,
    // and instantiate it internally
    transferWith(std::copy);

    return 0;
} 
```

这无法按预期在 gcc-4.7.2 上编译，并出现以下错误：

```
main.cpp|25 col 27 error| no matching function for call to ‘transferWith(<unresolved overloaded function type>)’
main.cpp|8 col 6 error| note: template<template<class InputIt, class OutputIt> class CopyFunc> void transferWith(const CopyFunc<__gnu_cxx::__normal_iterator<const int*, std::vector<int> >, std::back_insert_iterator<std::vector<int> > >&)
main.cpp|25 col 27 error| note:   couldn't deduce template parameter ‘template<class InputIt, class OutputIt> class CopyFunc’ 
```

是否有任何技巧或间接可以解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:24:39.263

> 是否有任何技巧或间接可以解决这个问题？

是的。使用 template 传递一个仿函数对象`operator()()`。

该代码看起来与[Bart 的答案](https://stackoverflow.com/a/14127785/103167)中的版本完全相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:53:46.707

为了完整起见，这里是仿函数方法的一个示例：

```
#include <algorithm>
#include <vector>
#include <iostream>

struct Copy {
  template <typename InputIter, typename OutputIter>
  OutputIter operator()(InputIter i1, InputIter i2, OutputIter o1) {
    return std::copy(i1, i2, o1);
  }
};

template <typename CopyFunctor> 
void foo(CopyFunctor cf) {
  std::vector<int> v1 = {3, 1, 4}; 
  std::vector<int> v2(v1.size());

  cf(v1.begin(), v1.end(), v2.begin());

  for (auto i : v2) {
    std::cout << i << ' ';
  }
}

int main() {
  foo(Copy());  // displays "3 1 4"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:58:44.347

会有一些类似的东西

```
template <template <typename InputIt, typename OutputIt> class CopyFunc> void transferWith()
{
    std::vector<int> source{1, 2, 3, 4, 5, 6, 7};
    std::vector<int> sink;

    CopyFunc<std::vector<int>::const_iterator, std::vector<int>::iterator>(source.begin(), source.end(), std::back_inserter(sink));

    for (auto&& e : sink)
    {
        std::cout << e << std::endl;
    }
} 
```

称为：

```
transferWith<std::copy>(); 
```

做？

我不保证这会开箱即用......

# mysql - 如何在登录表单 VB.NET/MYSQL 中检查用户权限级别

> ID：14127363
> 
> 赞同：0
> 
> 时间：2013-01-02T18:42:07.283
> 
> 标签：mysql, vb.net

仅供参考，我有表权限和用户。在我的 Users 表中，它有 4 列，即：user_id、username、password、authority_id，在授权表中，它有 2 列：authority_id、authority_level。

我的登录表单要求用户输入他们的用户名和密码。在给出正确的参数后，它应该验证用户是管理员 = 1、护士 = 2 还是医生 = 2。

这是我到目前为止所尝试的：

```
Private Sub btnLogin_Click(sender As System.Object, e As System.EventArgs) Handles btnLogin.Click

    If txtUsername.Text = "" Or txtPassword.Text = "" Then
        MsgBox("Enter UserName and Password Moron")
    Else
        'SQL Query To Get The Details
        Dim myAdapter As New MySqlDataAdapter
        Dim sqlquerry = "Select * From users where username = '" + txtUsername.Text + "' And password= '" + txtPassword.Text + "'"
        Dim myCommand As New MySqlCommand()
        myCommand.Connection = SQLConnection
        myCommand.CommandText = sqlquerry
        'Starting The Query
        myAdapter.SelectCommand = myCommand
        Dim mydata As MySqlDataReader
        mydata = myCommand.ExecuteReader
        'To check the Username and password and to validate the login a
        If mydata.HasRows = 0 Then
            MsgBox("Invalid Login")
        Else
            MsgBox("Welcome " + txtUsername.Text + "!")
            If authority Then
                frmMain.Show()
            Else
                frmMainNurse.Show()
            End If
            Me.Hide()
        End If
    End If
End Sub 
```

请注意，我没有在这一行中添加任何内容：

```
If authority Then 
```

我不知道如何在 vb.net 中做到这一点。因此，如果有人知道如何做到这一点，我将非常感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:53:06.013

在你的 else 部分执行此操作

```
Else
    Dim authorityid = 0
    While mydata.Read()
        authorityid = mydata.GetInt32("authority_id")   
    End While
    MsgBox("Welcome " + txtUsername.Text + "!")
    If authorityid = 1 Then
       frmMain.Show()
    Else
       frmMainNurse.Show()
    End If
    Me.Hide()
End If 
```

# scala - 为什么 SBT 只编译最后一个子项目？

> ID：14127367
> 
> 赞同：3
> 
> 时间：2013-01-02T18:42:19.640
> 
> 标签：scala, sbt

我快疯了，真的:-(

鉴于以下 SBT 构建文件...

```
import sbt._
import sbt.Keys._

object BrixBuild extends Build {

  lazy val buildSettings = Project.defaultSettings ++ Seq(
    organization := "com.mycompany",
    version := "0.1-SNAPSHOT",
    scalaVersion := "2.10.0-RC3",
    scalacOptions in Compile ++= Seq("-encoding", "UTF-8", "-deprecation", "-feature", "-unchecked"),
    resolvers += Resolvers.typesafe,
    target := file("target")
  )

  lazy val util = Project(
    id = "brix-util",
    base = file("brix-util"),
    settings = buildSettings ++ Seq(
      libraryDependencies ++= Dependencies.util
    )
  )

  lazy val slick = Project(
    id = "brix-slick",
    base = file("brix-slick"),
    settings = buildSettings ++ Seq(
      libraryDependencies ++= Dependencies.slick
    )
  )
}

object Resolvers {

  val typesafe = "Typesafe Releases" at "http://repo.typesafe.com/typesafe/releases"
}

object Dependencies {

  private object Compile {
    val commonsCodec = "commons-codec" % "commons-codec" % "1.7"
    val slick = "com.typesafe" %% "slick" % "1.0.0-RC1"
  }

  private object Test {
    val specs2 = "org.specs2" %% "specs2" % "1.12.3" % "test"
    val slf4j = "org.slf4j" % "slf4j-nop" % "1.6.4" % "test"
    val h2 = "com.h2database" % "h2" % "1.3.166" % "test"
  }

  val util = Seq(Compile.commonsCodec, Test.specs2, Test.slf4j)
  val slick = Seq(Compile.slick, Test.specs2, Test.slf4j, Test.h2)
} 
```

...只有最后一个子项目被编译。为什么？我错过了什么吗？

任何帮助将非常感激。德克萨斯州。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:00:47.113

您应该定义一个聚合子项目的“父”项目。有关示例，请参见[https://github.com/typesafehub/scalalogging/blob/master/project/Build.scala](https://github.com/typesafehub/scalalogging/blob/master/project/Build.scala)。

# objective-c - 在 NSTableView 的运行时计算组行

> ID：14127368
> 
> 赞同：2
> 
> 时间：2013-01-02T18:42:37.143
> 
> 标签：objective-c, macos, cocoa, nstableview

我有一个`NSTableView`，充满了歌曲标题。

歌曲按艺术家排序，因此我可以将艺术家姓名显示为行视图。

![在此处输入图像描述](../Images/e5c3d05e86206dce13c971b575aeea39.png)

* * *

## 代码

到目前为止，我必须遍历表数据并手动将艺术家添加到数组中。

```
NSMutableArray *songsAndArtists = [NSMutableArray array];

Artist *artist;
for (Song *song in self.songs) {
    if (artist != song.artist) {
        artist = song.artist;
        [songsAndArtists addObject:artist];
    }

    [songsAndArtists addObject:song];
} 
```

* * *

如果您有 1'000 - 5'000 首歌曲，这可能会非常慢。
我还没有真正想出如何加快这个过程。

有人知道如何在运行时计算这个吗？

* * *

## 编辑

我将尝试澄清我的意思：

`NSTableView`支持**组行**。我的表格视图显示了 CoreData 中的所有歌曲。我想使用组行来显示歌曲的艺术家，就像我在上面添加的打印屏幕一样。

为此，我必须提供一个包含艺术家的数组，然后是歌曲，然后是下一位艺术家，依此类推。

上面的代码显示了如何插入艺术家，但这是一个非常耗时的过程。

所以我的问题是，我怎样才能加快速度？

* * *

## 暗示

就像[nielsbot](https://stackoverflow.com/users/210171/nielsbot)和[Feloneous Cat](https://stackoverflow.com/users/742584/feloneous-cat)所建议的那样，遍历所有艺术家对我不起作用。

用户还可以选择通过图书馆进行搜索。因此，并非所有歌曲都应实际出现在列表中。

* * *

## 解决方案

我只是想让你知道问题出在哪里：

问题是，我实际上`NSString`在以前的版本中比较过。
相当愚蠢的错误...

它需要大约**0.1 秒或更短**的时间，这很棒：

```
tableData = [self addGroupRowsToArray:[self allSongs] withKeyPath:@"artist"];

- (NSArray *)addGroupRowsToArray:(NSArray *)array withKeyPath:(NSString *)keyPath {
    NSMutableArray *mixedArray = [NSMutableArray array];

    id groupRowItem;
    for (id arrayItem in array) {
        if (groupRowItem != [arrayItem valueForKeyPath:keyPath]) {
            groupRowItem = [arrayItem valueForKeyPath:keyPath];
            [mixedArray addObject:groupRowItem];
        }

        [mixedArray addObject:arrayItem];
    }

    return mixedArray;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:26:09.797

所以，让我们备份并看看你真正拥有什么。您已经拥有歌曲中所需的所有信息。为什么你在本质上复制它只是为了打破艺术家？

这样想，如果你有以下歌曲（歌曲/艺术​​家）

```
(0)    "Death Eater", "Raging Machine Code"
(1)    "Interrupt",   "Raging Machine Code"
(2)    "Panic",       "Times Square Revolution"
(3)    "New Years",   "Times Square Revolution"
(4)    "Toast",       "Ed & Billy's Time Machine"
(5)    "Surge",       "Quiet Cat"
(6)    "Surveil",     "Quiet Cat" 
```

这张照片有什么问题？我们有相同的信息重复。理想情况下，我们希望有这样的东西：

```
"Raging Machine Code"     -> has an  array that contains
                             "Death Eater"
                             "Interrupt"
"Times Square Revolution" -> has an array that contains
                             "Panic"
                             "New Years"
"Ed & Billy's Time Machine" -> array that contains
                             "Toast"
"Quiet Cat"               -> array that contains
                             "Surge"
                             "Surveil" 
```

对于 UITableView，这让事情变得微不足道——我们告诉它有多少个部分（四个）以及每个部分有多少首歌曲。为了生成单元格，我们得到一个 NSIndexPath，它告诉我们部分和行（部分是艺术家，行是该艺术家的歌曲）。

NSTableView 不这样做。它给了我们一行。但是，如果我们在前端（即歌曲列表）做一些工作，那么我们可以保证生活会美丽而快速（或至少更快）。关键是预先计算每个艺术家的歌曲数量并存储起来。

所以假设我们被要求显示第 5 行。“Raging Machine Code”是 0-2（艺术家、歌曲、歌曲）。“时代广场革命”是3-5。啊! 5是最后一首歌，所以我们显示“新年”！

尝试另一个，假设我们要显示第 6 行。“Raging...”是 0-2，“Times...”是 3-5，“Ed & Billy's”是 6-7。宾果游戏，我们需要展示艺术家“Ed & Billy's Time Machine”！

这个想法是，我们在实际显示数据之前做了大量的准备工作。循环播放艺术家将比循环播放所有歌曲快得多。另外，现在你只做简单的数学运算——不需要移动东西。

有时，您如何存储数据意味着成功与失败之间的区别。每当您看到自己必须“重新定义数据结构”时，这通常意味着您的数据结构有问题——这可能很简单，但会带来更多的努力。

希望这会有所帮助，并且最终不会成为“TLTR”（阅读时间过长）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T21:20:39.737

这更快吗？

```
-(NSArray*)songsAndArtists:(NSArray*)allArtists
{
    NSMutableArray * result = [ NSMutableArray array ] ;
    for( Artist * artist in allArtists )
    {
        [ result addObject:artist ] ;
        [ result addObjectsFromArray:artist.songs ] ;
    }
    return result ;
} 
```

如果您从 Core Data 获取“所有艺术家”，您可以告诉它预取歌曲关系中的对象，这将进一步加快速度。

```
-(NSArray*)allArtists
{
    NSFetchRequest * request = [ NSFetchRequest fetchRequestWithEntityName:@"Artist" ] ;
    [ request setRelationshipKeyPathsForPrefetching:@[ @"songs" ] ] ;
    ...
    return results ;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T00:11:10.313

好吧，我试图重现你的问题。我不知道你从哪里得到数据，所以我伪造它们只是为了进行性能测试。我还在 iPod 4gen 上测试了代码，它运行起来没有任何延迟。（尝试了 50000 行，它只在启动时挂起，然后完美运行）

一般来说，我的方法与您的数据结构不同。所以你使用数组，我使用字典。我仍然认为，如果我使用数组，无论如何应该没有问题。也许我弄错了你问的问题？

尽管如此，我的方法似乎更适合搜索工作（对不起，我太费心去尝试实现它）。确实，现在要进行搜索，可能会在不检查歌曲的情况下排除整个部分，除非您当然需要搜索歌曲，无论如何这提供了更大的灵活性。

好的，这是一个链接：[https ://github.com/igorpakushin/BigList](https://github.com/igorpakushin/BigList)

很高兴在这里提供一些反馈，谢谢

问候，伊戈尔

# netbeans - 在 NetBeans 中添加 Java ME 平台

> ID：14127373
> 
> 赞同：5
> 
> 时间：2013-01-02T18:43:00.560
> 
> 标签：netbeans, java-me, platform

我安装了带有 JDK 7 的 NetBeans 7.2.1 和插件 - Java ME SDK 3.2（里面有 Wireles Toolkit 2.5.2）。

我尝试通过单击**File/New Project/Java ME/Mobile Application**创建新项目。然后我点击**下一步**。在下一个窗口中，消息：

> 每个 CLDC 项目都需要分配有 CLDC 兼容的 SDK/平台/模拟器。

按**Install SDK/Platform/Emulator**按钮打开平台安装向导，允许您“添加平台”。

![在此处输入图像描述](../Images/ca90a90fa667a36891d21df854716459.png)

我尝试单击**Install SDK/Platform/Emulator**按钮，然后尝试指示安装 Java ME 3.2 的文件夹。可以识别模拟器，但是项目无法启动。

![在此处输入图像描述](../Images/c0f67a6248e904ec1a949f193fca16ac.png)

选择之后，会出现几个选项。新版本如何制作？互联网上的大部分东西都连接到旧版本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T23:52:55.593

您是否尝试过[在线使用此 Oracle 教程](https://blogs.oracle.com/javamesdk/entry/how_to_integrate_java_me1)？这是相当最新的（2012 年 9 月）。还有一个更新的[刚刚发布在这里](https://blogs.oracle.com/javamesdk/entry/installing_java_me_sdk_plugin)。

如果您以这种方式安装 Java ME SDK，那么您应该已经拥有适当的**Java 平台**。很难阅读您的屏幕截图，但看起来并不存在合适的 Java 平台。我会按照我提供的链接中的步骤再试一次。

我刚刚使用 NetBeans 7.2.1 和 Java ME SDK 3.2 进行了尝试。我使用的 NetBeans 版本来自[这个下载页面](http://netbeans.org/downloads/)，是**Java EE**版本。

以下步骤中容易遗漏的一件事是，在[此下载页面上](http://www.oracle.com/technetwork/java/javame/javamobile/download/sdk/index.html)，您需要同时下载**Java** ME SDK**和**适用于 Netbeans 的 Java ME SDK 插件。不仅仅是插件。这适用于我上面发布的两个链接中的任何一个中的安装说明。 **安装 SDK**，而不仅仅是插件。

* * *

如果该链接稍后更改/失效，请执行以下重要步骤：

## 如何将 Java ME SDK 3.2 与 NetBeans 集成

作者：SungmoonCho 2012 年 9 月 25 日

许多人喜欢将 Java ME SDK 与 IDE 一起使用。我们通过下载页面和发行说明提供了有关如何将 SDK 与 NetBeans 集成的说明，但是，让我在这里再用一些屏幕截图来解释一下。

1.  从这里下载 Java ME SDK**和**NetBeans 插件。

2.  首先安装 Java ME SDK。您将在您的机器上拥有模拟器和运行时。还请在某处取消归档 NetBeans 插件。

3.  启动 NetBeans。

4.  转到“工具”-“插件”。

5.  查看“已安装”选项卡。选中“显示详细信息”。如果您看到之前版本的 Java ME SDK Tools 已经安装。检查那些以卸载它们。

6.  转到“设置”选项卡。

7.  单击“添加”，并提供 NetBeans 插件的位置。就我而言，它是“file:/C:/Users/sungcho/Downloads/nb-me-sdk-plugins-uc/updates.xml”。不要忘记在最后添加“updates.xml”。

8.  点击“确定”

9.  单击“可用插件”选项卡。

10.  如果向下滚动，您将看到三个 Java ME SDK 工具。检查“Java ME SDK 工具”插件。还可以根据需要检查其他人。

11.  按照说明安装它们。

12.  重新启动 NetBeans

13.  这就对了。完毕。现在，您将在 Java 平台列表中看到 Oracle Java ME SDK 3.2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T15:01:30.387

Finally, I configured it. I had plug-in without SDK:). I uninstalled plug-in. I installed Java ME SDK 3.2, then I installed plug-in. I installed SDK not in the default path. I indicated platform using "Add platform" button. I indicated 2 platforms and now the project can be run in the emulator.

Here are platforms:): ![enter image description here](../Images/17f6e2e9c54b9371d648b8b12249e7b5.png)

# r - R caret / rfe / bayesglm 特征选择

> ID：14127374
> 
> 赞同：2
> 
> 时间：2013-01-02T18:43:02.287
> 
> 标签：r, r-caret, rfe, bayesglm

我正在使用`bayesglm`逻辑回归问题。这是一个包含 150 行和 2000 个变量的数据集。我正在尝试进行变量选择，通常会查看`glmnet`. `caret::rfe`但是没有方法`bayesglm`。

无论如何要手动定义一个方法`rfe`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T22:20:52.450

至于我只能想到重写`lmFuncs$fit`函数的问题，例如：

```
lmFuncs$fit<-function (x, y, first, last, ...){   
     tmp <- as.data.frame(x)   
     tmp$y <- y   
 bayesglm (y ~ ., family = gaussian, data = tmp)
} 
```

然后做你`rfe.fit`的`rfeControl(functions = lmFuncs)`

# ruby - 如何漂亮地打印到变量而不是 STDOUT？

> ID：14127375
> 
> 赞同：5
> 
> 时间：2013-01-02T18:43:05.210
> 
> 标签：ruby

我想使用 Ruby`pp`来“打印”到变量而不是 STDOUT。这是怎么做的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T18:47:04.903

```
require 'pp'
result = PP.pp(some_variable, "") 
```

# jquery - Froogaloop 和 jQuery 的多个播放按钮和 vimeo

> ID：14127378
> 
> 赞同：1
> 
> 时间：2013-01-02T18:43:19.190
> 
> 标签：jquery, twitter-bootstrap, vimeo, froogaloop

我在启动包含 vimeo 视频的 twitter 引导模式的页面上有多个播放按钮。不幸的是，我无法获得播放特定视频的播放按钮。它全部播放。有没有办法将每个播放按钮绑定到单个视频？

我在这里加载了一个示例[http://jsfiddle.net/pmeissner/WdMu8/](http://jsfiddle.net/pmeissner/WdMu8/)

**JAVASCRIPT：**

```
jQuery(document).ready(function() {

// Enable the API on each Vimeo video
jQuery('iframe.vimeo').each(function() {
    Froogaloop(this).addEvent('ready', ready);
});

function ready(player_id) {
    // Keep a reference to Froogaloop for this player
    var player = $f(player_id),
        playButton = $('.video-play'),
        pauseButton = $('.video-pause');

    playButton.click(function() {
        player.api('play');
    });
    pauseButton.click(function() {
        player.api('pause');
    });
}

});    ​ 
```

**HTML：**

```
<html>
<head>
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
<script src="http://a.vimeocdn.com/js/froogaloop2.min.js"></script> 
</head>
<body>
<div class="container">
   <p><a href="#myModal1" class="btn video-play" id="play_video_1" data-toggle="modal">Play Video 1</a>
       <a href="#myModal2" class="btn video-play" id="play_video_2" data-toggle="modal">Play Video 2</a></p>
   <p>Press X in the modal to stop the videos</p>
</div>
<div id="myModal1" class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close video-pause" data-dismiss="modal">×</button>
    <h3>Video 1</h3>
  </div>
  <div class="modal-body">
    <iframe src="http://player.vimeo.com/video/51230259?api=1&amp;player_id=video_1" width="500" height="281" class="vimeo" id="video_1"></iframe>
  </div>
</div>
<div id="myModal2" class="modal hide fade">
  <div class="modal-header">
    <button type="button" class="close video-pause" data-dismiss="modal">×</button>
    <h3>Video 1</h3>
  </div>
  <div class="modal-body">
    <iframe src="http://player.vimeo.com/video/39863899?api=1&amp;player_id=video_2" width="500" height="281" class="vimeo" id="video_2"></iframe>
  </div>
</div>

</body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:45:05.053

所以答案很简单。我在模态启动链接中添加了一个 onlick。

```
<a href="#" onclick="$f('put the id# of the player you want to play').api('play');">Play</a> 
```

# c++ - const 是否意味着 C++11 中的线程安全？

> ID：14127379
> 
> 赞同：125
> 
> 时间：2013-01-02T18:43:20.413
> 
> 标签：c++, c++11, thread-safety, constants, c++-faq

我听说这`const`意味着*C++11*中的*线程安全*。真的吗？

 *这是否意味着`const`现在相当于*Java*的`synchronized`？

他们用完了*关键字*吗？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-01-02T18:43:20.413

> ### 我听说这`const`意味着*C++11*中的*线程安全*。真的吗？

 *这**有点**真实……

这就是*标准语言*对线程安全的看法：

> ***[1.10/4]***如果其中一个修改了内存位置 (1.7) 而另一个访问或修改了相同的内存位置，则 两个表达式求值*会发生冲突。*
> 
> ***[1.10/21]*** 如果程序的执行包含不同线程中的两个冲突操作，则程序的执行包含*数据竞争*，其中至少一个不是原子的，并且两者都不会在另一个之前发生。任何此类数据竞争都会导致未定义的行为。

这只不过是发生*数据竞争*的充分条件：

1.  对给定事物同时执行两个或多个动作；和
2.  其中至少有一个是写的。

*标准库*以此为基础，走得更远：

> ***[17.6.5.9/1]*** 本节规定了实现应满足的要求，以防止数据竞争 (1.10)。除非另有说明，否则每个标准库函数都应满足每个要求。实施可能会在下面指定的情况以外的情况下防止数据竞争。
> 
> ***[17.6.5.9/3]*** C++ 标准库函数不得直接或间接修改可由当前线程以外的线程访问的对象 (1.10)，除非通过函数的非**const**参数直接或间接访问对象，包括`this`.

简而言之，它希望对`const`对象的操作是*线程安全的*。这意味着只要对您自己类型的对象进行操作，*标准库就不会引入数据竞争*`const`

1.  完全由读取组成——也就是说，没有写入——；或者
2.  在内部同步写入。

如果这种期望不适用于您的一种类型，那么直接或间接与*标准库*的任何组件一起使用它可能会导致*数据竞争*。总之，从*标准库*的角度来看，`const`确实意味着*线程安全。*重要的是要注意这只是一个*合同*，编译器不会强制执行它，如果你破坏它，你会得到*未定义的行为*并且你自己。是否存在不会影响代码生成——至少不会影响*数据竞争*——。***`const`***

 ***> ### 这是否意味着`const`现在相当于*Java*的`synchronized`？

**没有**。一点也不...

考虑以下表示矩形的过度简化的类：

```
class rect {
    int width = 0, height = 0;

public:
    /*...*/
    void set_size( int new_width, int new_height ) {
        width = new_width;
        height = new_height;
    }
    int area() const {
        return width * height;
    }
}; 
```

*成员函数* `area`是*线程安全*的；不是因为它`const`，而是因为它完全由读取操作组成。不涉及写入，并且至少涉及一次写入是发生*数据竞争*所必需的。这意味着您可以`area`从任意数量的线程中调用，并且您将始终获得正确的结果。

请注意，这并不意味着它`rect`是*线程安全的*。事实上，很容易看出，如果在调用给定`area`的同时发生调用，那么最终可能会根据旧的宽度和新的高度（甚至是乱码）计算其结果.`set_size``rect``area`

但这没关系，`rect`不是这样的，毕竟`const`它甚至不应该是*线程安全的。*`const rect`另一方面，声明的对象将是*线程安全的*，因为不可能进行写入（如果您正在考虑-`const_cast`最初声明的内容`const`，那么您会得到*undefined-behavior*就是这样）。

> ### 那么这意味着什么呢？

让我们假设——为了争论——乘法运算非常昂贵，我们最好尽可能避免它们。我们可以仅在请求时计算该区域，然后将其缓存以防将来再次请求它：

```
class rect {
    int width = 0, height = 0;

    mutable int cached_area = 0;
    mutable bool cached_area_valid = true;

public:
    /*...*/
    void set_size( int new_width, int new_height ) {
        cached_area_valid = ( width == new_width && height == new_height );
        width = new_width;
        height = new_height;
    }
    int area() const {
        if( !cached_area_valid ) {
            cached_area = width;
            cached_area *= height;
            cached_area_valid = true;
        }
        return cached_area;
    }
}; 
```

[如果这个例子看起来太人为，你可以`int`用一个*非常大的动态分配的整数*来替换它，它本质上是非*线程安全*的，并且乘法非常昂贵。]

*成员函数* `area`不再是*线程安全的*，它现在正在写入并且内部没有同步。这是个问题吗？调用`area`可能作为另一个对象的*复制构造函数的一部分发生，这样的**构造函数*可能已由*标准容器*上的某些操作调用，此时*标准库希望此操作在**数据竞争*方面表现为*读取*. 但我们正在写！

 *一旦我们将 a`rect`放入*标准容器中*——直接或间接地——我们就与*标准库签订了**合同*。为了在遵守合约的同时继续在函数中进行写入，我们需要在内部同步这些写入：*`const`*

 *```
class rect {
    int width = 0, height = 0;

    mutable std::mutex cache_mutex;
    mutable int cached_area = 0;
    mutable bool cached_area_valid = true;

public:
    /*...*/
    void set_size( int new_width, int new_height ) {
        if( new_width != width || new_height != height )
        {
            std::lock_guard< std::mutex > guard( cache_mutex );

            cached_area_valid = false;
        }
        width = new_width;
        height = new_height;
    }
    int area() const {
        std::lock_guard< std::mutex > guard( cache_mutex );

        if( !cached_area_valid ) {
            cached_area = width;
            cached_area *= height;
            cached_area_valid = true;
        }
        return cached_area;
    }
}; 
```

请注意，我们创建了`area`函数*thread-safe*，但`rect`仍然不是*thread-safe*。在调用`area`的同时发生的调用`set_size`可能最终仍会计算错误的值，因为对`width`和的分配`height`不受互斥锁的保护。

如果我们真的想要一个*线程安全的* `rect`，我们会使用同步原语来保护*非线程安全的* `rect`。

> ### 他们用完了*关键字*吗？

对，他们是。从第一天开始，他们就已经用完了*关键字*。

* * *

*资料来源*：[你不知道`const`和`mutable`](http://isocpp.org/blog/2012/12/you-dont-know-const-and-mutable-herb-sutter)- *Herb Sutter*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-21T18:17:52.800

*这是对 K-ballo 答案的补充。*

在这种情况下，术语*线程安全*被滥用。正确的措辞是：如[Herb Sutter](https://channel9.msdn.com/posts/C-and-Beyond-2012-Herb-Sutter-You-dont-know-blank-and-blank) (29:43) 本人所述，**const 函数意味着~~线程安全的~~按位 const*或*内部同步**

同时从多个线程调用 const 函数应该是线程安全的，**而**不是在另一个线程中同时调用*非常量函数。*

因此，一个 const 函数不应该（并且在大多数情况下也不会）是真正的线程安全的，因为它可能会读取可能被另一个*非常量函数*更改的内存（没有内部同步） 。通常，这不是线程安全的，因为即使只有一个线程正在写入（而另一个线程正在读取数据），也会发生数据竞争。*******

# java - 无需大写的 IntelliJ IDEA 12 代码完成

> ID：14127381
> 
> 赞同：92
> 
> 时间：2013-01-02T18:43:24.277
> 
> 标签：java, intellij-idea

在 Eclipse 4.2 中，我可以输入：

```
joptionpane 
```

然后按**`CTRL`+`SPACE`**，它会变成：

```
JOptionPane 
```

有没有办法对 intelliJ IDEA 做同样的事情？我试过按**`CTRL`+`SPACE`**和**`ALT`+`/`**。但是，由于某种原因，它只是不起作用。

如果有人能告诉我如何做到这一点，我将不胜感激。

我只是在试用 IDEA 的第 12 版，因为我的一些朋友告诉我它是一个更好的 IDE 并且具有更好的代码完成（他们的意见）。

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2013-01-02T19:32:07.857

您可以在设置菜单中禁用代码完成的区分大小写：

文件 -> 设置 -> 编辑器 -> 代码完成 -> 区分大小写的完成

![在此处输入图像描述](../Images/8e34212405e2efd859e593de2d801f5a.png)

如果您随后键入“jo”并按 TAB，它将扩展为 JOptionPane。

# IntelliJ 15 的更新屏幕截图

[![在此处输入图像描述](../Images/38e7e2cb45824e10178f2488884dfc56.png)](https://i.stack.imgur.com/qex2m.png)

# 更新 IntelliJ 2018 的屏幕截图

[![在此处输入图像描述](../Images/a9cbf6c3f266f9bdd64e556351e312b8.png)](https://i.stack.imgur.com/dLTqK.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:45:47.120

IDEA 对大小写非常敏感，所以我怀疑 ti 会忽略它。您可以键入`JOP+<tab>`，它会给您 JOptionPane。

# php - Mysql - PHP - 创建触发器或事务？- 需要澄清

> ID：14127384
> 
> 赞同：0
> 
> 时间：2013-01-02T18:43:38.883
> 
> 标签：php, mysql, transactions, triggers, pdo

请先阅读编辑2，谢谢！

我一直在处理一个名为“inoffice.php”的页面，该页面显示学生等待被看到，目前正在被看到的页面视图如下：

![inoffice.php的页面视图](../Images/9fa0c484dcf77c65c8e51e08ffcd7b88.png)

现在几乎我刚刚使用上面的同一张表来获取第二张表，但是我添加了一个左连接，以便显示与学生一起工作的辅导员（在本例中为 Dawne）以及学生被辅导员接受的时间.

该项目的那部分非常困难，但我仍然能够度过难关。现在对我来说困难的部分是这个（这也是我的问题）：

**1）我怎样才能让被看见的桌子（正在等待的第二张桌子）是空的，除非辅导员（或工作人员）点击按钮“开始会话”（不是一个 php 会话，而是一个实际的现实生活中的会议学生和辅导员之间）**

**2）一旦辅导员（工作人员）点击“开始会议”按钮，我怎样才能使第一张桌子（等待）失去一个条目。**

我的数据库架构如下：

1.  用户 - 持有员工凭证
2.  Waiting - 包含 ID(PK)、anum（这是一个学生 ID 号）、first、last、why、comments、signintime
3.  辅导员 - 这包含 ID（PK 和 FK 等待在加入中使用）、辅导员姓名、辅导员开始时间
4.  评论 - ID（等待中的 PK 和 FK），评论（对于辅导员评论，大约 varchar 50）
5.  完成 - ID（等待中的 PK 和 FK），以及辅导员与学生结束时的时间戳

因此，希望通过我提供的信息，有人可以详细说明我应该如何/是否应该使用触发器或事务来完成此操作。或者，如果它是 PHP 的“东西”——因为没有更好的词。

谢谢你，愤怒

**编辑 2：删除旧的不工作代码，用新代码更新帖子并删除过时的屏幕截图！包括更新的一个！：**

```
<php
require('core/init.php');

    if(!isset($_SESSION['LoggedIn'])){
        die("You must <a href='index.php'><bold>login</bold></a> before you can see that page!");
    }

//Begin the select statements
try 
    {
$query = $dbh->prepare("SELECT * FROM waiting WHERE counselorname IS NULL ");
$query->bindParam(':null', $null);
$query->execute();
$result = $query->fetchall();
    }
        catch (PDOException $e) {
        error_log($e->getMessage());
        die($e->getMessage());
        }

    echo "Return to <a href='login_success.php'><bold>Home Page</bold></a>";

echo "<br />";
echo "Waiting";

echo 
    "<table border='2'>
    <tr>
    <th>ID</th>
    <th>A Number</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Why</th>
    <th>Comments</th>
    <th>Signintime</th>
    <th>Staff Member</th>
    <th>Click if ready!</th>
    </tr>"
    ;

    foreach($result as $row)
    {
  echo "<tr>";
  echo "<td>" . $row['id'] . "</td>";
  echo "<td><a href=Student.php?student=" . $row['anum'] . ">" .$row['anum'] . " </a></td>";
  echo "<td>" . $row['first'] . "</td>";
  echo "<td>" . $row['last'] . "</td>";
  echo "<td>" . $row['why'] . "</td>";  
  echo "<td>" . $row['comments'] . "</td>";
  echo "<td>" . $row['signintime'] . "</td>";
  echo "
        <td>    <form action='counselor.php?id=" . $row['id'] . "' method='post' target='_new'>
                    <select name='namedrop'>
                        <option value=''>Counselor Name</option> 
                        <option value='Admin-John'>Admin - John</option>
                        <option value='Admin-Christine'>Admin - Christine</option>
                        <option value='Admin-Dawne'>Admin - Dawne</option>
                        <option value='Counselor-Cherie'>Counselor - Cherie</option>
                        <option value='Counselor-Tootie'>Counselor - Tootie</option>
                        <option value='Counselor-Debbie'>Counselor - Debbi</option>
                        <option value='FrontDesk-Delores'>Front Desk - Delores</option>
                        <option value='FrontDesk-Kiana'>Front Desk - Kiana</option>
                    </select>
            </td>

            <td> <input type='submit' name='submit' value='Start Session'></td>
            </form> </td>";
}

  echo "</tr>";
  echo "</table>";

echo "<br />";
echo "<br />";

try 
    {
    $query2 = $dbh->prepare("SELECT * FROM waiting WHERE counselorname is NOT NULL");
    $query2->execute();
    $result2 = $query2->fetchall();
    }
        catch (PDOException $e) {
        error_log($e->getMessage());
        die($e->getMessage());
        }

echo "Return to <a href='login_success.php'><bold>Home Page</bold></a>";

echo "<br />";
echo "Being seen";

echo 
    "<table border='2'>
    <tr>
    <th>ID</th>
    <th>A Number</th>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Why</th>
    <th>Comments</th>
    <th>Signintime</th>
    <th>Staff Member</th>
    <th>Counselor Start Time</th>
    </tr>"
    ;

    foreach($result2 as $row2)
    {
  echo "<tr>";
  echo "<td>" . $row2['id'] . "</td>";
  echo "<td><a href=Student.php?student=" . $row2['anum'] . ">" .$row2['anum'] . " </a></td>";
  echo "<td>" . $row2['first'] . "</td>";
  echo "<td>" . $row2['last'] . "</td>";
  echo "<td>" . $row2['why'] . "</td>"; 
  echo "<td>" . $row2['comments'] . "</td>";
  echo "<td>" . $row2['signintime'] . "</td>";
  echo "<td>" . $row2['counselorname'] . "</td>";
  echo "<td>" . $row2['counselor_time'] . "</td>";
}

?> 
```

![新预览](../Images/9fa0c484dcf77c65c8e51e08ffcd7b88.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:49:41.607

*两个*呈现的 HTML 表应该有*一个 SQL 表*（具有任何规范化的依赖项） 。

 *即使显示的**HTML 表格代表*相同信息*的*不同视图。***

 *现在，发布的模式*大多*允许这样做，但有一个问题使它无法实现：

辅导员表包含的信息 ( `start time`) 不是功能依赖——也就是说，它与“成为辅导员”无关！这会导致两个问题：

1.  辅导员可能只有一个`start time`，并且；
2.  不可能代表`start time`所有事件。

解决方法是将该`start time`列从“辅导员”表中移出，并将其放入“时间表”表中，因为`start time`（就像`finish`时间一样）取决于特定的日程安排。

* * *

> 1）我怎样才能让被看见的桌子（正在等待的第二张桌子）是空的，除非辅导员（或工作人员）点击按钮“开始会话”（不是一个 php 会话，而是一个实际的现实生活中的会议学生和辅导员之间）

查询（查看信息）：

```
select * from Schedules
where startTime not null   -- only show started events 
```

> 2）一旦辅导员（工作人员）点击“开始会议”按钮，我怎样才能使第一张桌子（等待）失去一个条目。

查询（查看信息）：

```
select * from Schedules
where startTime is null    -- it does not 'lose' item, but it is not shown 
```

否则，如果坚持使用单独的表，您将不得不记账：每次手动插入/删除或设置触发器来做同样的事情。这增加了额外的工作，可能不需要。**

# python - 通过密钥流进行异或时的数组错误

> ID：14127386
> 
> 赞同：0
> 
> 时间：2013-01-02T18:43:52.763
> 
> 标签：python, xor

我正在尝试使用密钥流（key.bin）对文件（encoded_data.bin）进行异或，并不断收到错误“数组索引超出范围”。密钥文件比数据文件长。任何帮助表示赞赏。顺便说一句，我对 python 还很陌生——如果它还不明显的话。

```
import array
k=open("key.bin", "rb")
s=open("encoded_data.bin", "rb")
t=k.read()
r=s.read()
a1 = array.array('B', (t))
a2 = array.array('B', (r))
for i in range(len(a1)):
   a1[i] ^= a2[i]

   print a1.tostring()

   k.close
   s.close 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:46:45.447

发生这种情况是因为密钥文件更长，正如您所说，并且您正在循环密钥文件中的每个字节：

```
for i in range(len(a1)):
    a1[i] ^= a2[i] 
```

一旦`i`等于，`len(a2)`当您尝试 fetch 时，您将获得此异常`a2[i]`，因为`i`超出了数组的范围。

根据您的问题，目前尚不清楚正确的解决方案是什么，但是如果您知道数据将始终小于密钥，则只需使用数据的长度即可：

```
for i in range(len(a2)): 
```

如果您的目标是在数据大于密钥时重复密钥，则解决方案将涉及更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:55:27.340

如果您的数据比您的密钥长（当然，这是一个主要的加密禁忌！），这样的解决方案将适用于您的情况：

```
def xorloop(l, xors):
    return [l[i] ^ xors[i % len(xors)] for i in xrange(len(l))] 
```

它需要可异或的值的迭代，如下所示：

```
>>> xorloop([1, 2, 3, 4, 5], [6, 7, 8])
[7, 5, 11, 2, 2] 
```

`array`您可以使用示例中的方法轻松地将其调整为字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:49:38.933

您实际上可以使用内置`zip`函数。它允许您一次循环两个迭代，这适合您的情况。

```
plaintext = []
for key_byte, ciphertext_byte in zip(a1, a2):
    plaintext.append(chr(ord(key_byte) ^ ord(ciphertext_byte)))

print ''.join(plaintext) 
```

如果密文中有多余的字节，它们将被忽略。如果密钥中有额外的字节，它们将不会被使用。

* * *

我认为您正在实施一次性垫。让我建议你在这里使用[`bytearray`s](http://docs.python.org/2/library/functions.html#bytearray)：

```
key = byterray(k.read())
ciphertext = bytearray(s.read())
plaintext = bytearray()

for key_byte, ciphertext_byte in zip(key, ciphertext):
    plaintext.append(key_byte ^ ciphertext_byte)

print plaintext 
```

# opengl - 无法让 GLEW 与 VS2012 一起使用

> ID：14127393
> 
> 赞同：1
> 
> 时间：2013-01-02T18:44:05.243
> 
> 标签：opengl, linker, sfml, glew

我一直试图解决这个问题几个小时但没有运气：

```
error LNK2019: unresolved external symbol _imp_glBegin@4 referenced in function _main
error LNK2019: unresolved external symbol _imp_glEnd@4 referenced in function _main
error LNK2019: unresolved external symbol _imp_glFlush@4 referenced in function _main
error LNK1120: 3 unresolved externals 
```

链接的标准错误非常标准，但不幸的是，我尝试了所有想到的事情，但没有运气。

我的设置如下：

*   SFML 2.0 作为窗口管理器
*   GLEW 1.90 作为 OpenGL 扩展管理器
*   SFML 正在工作，因此它已正确链接等...
*   我已包含 GLEW 包含和库目录，我还将 glew32d.lib 添加到 Additional Dependencies + 将 glew32d.dll 添加到 Debug 文件夹（.exe 所在的位置）
*   我还从源代码构建了 GLEW，所以它应该可以工作：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:59:02.923

GLEW 代表“OpenGL 扩展牧马人库”。它没有定义核心 OpenGL 函数，例如`glBegin()`和`glEnd()`。您是否还包括您的`opengl32.lib`、、`glu32.lib`和`glut32.lib`库？

# http - 无效数据和数据冲突的 Http 响应码

> ID：14127395
> 
> 赞同：4
> 
> 时间：2013-01-02T18:44:14.923
> 
> 标签：http, rest, http-status-codes

> **可能重复：**
> [无效数据的 REST 响应代码](https://stackoverflow.com/questions/6123425/rest-response-code-for-invalid-data)

具有以下 REST 资源：

```
发布 /user/{primary_key}

```

该资源旨在像“添加/更新”操作一样工作。这意味着它可以用于：

*   创建一个新用户
*   更新现有用户的信息

如果客户想创建一个新用户，需要一些信息：

```
POST 用户/{pimary_key}
有效载荷：
 - 用户名 - （必须是唯一的）
 - 密码

```

如果客户端想要简单地更新现有用户，则调用只需要包含主键和新的/更改的信息。例如：

```
POST 用户/{pimary_key}
有效载荷：
 - 最喜欢的汉堡类型

```

这种情况可能会导致来自客户端的多个无效请求：

*   CONFLICT - 客户端更新现有用户，试图将其更改`username`为已被其他用户使用的值。
*   缺少信息 - 客户端尝试创建新用户，但未包含必要的信息，例如用户名和密码。

在这些情况下要返回的正确 HTTP 响应代码是什么？

非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T19:33:05.987

1.  创建用户的代码201，很明显
2.  输入参数不正确的400最合适，google API用它
3.  似乎 409 最适合像你这样的冲突情况

我只建议将创建和编辑分开，并为它们使用不同的方法 - POST 来创建，PUT 来更新。如果用户要修改某些内容，但有错字怎么办？最好显示错误

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T18:51:20.397

这是对 RESTful 操作的“典型” [HTTP 响应](http://www.infoq.com/articles/designing-restful-http-apps-roth)的一个很好的表格。

从该表中，以下是 POST 操作的建议：

```
200 (OK) - if an existing resource has been updated
201 (created) - if a new resource is created
202 (accepted) - accepted for processing but not been completed (Async processing)

301 (Moved Permanently) - the resource URI has been updated
303 (See Other) - e.g. load balancing

400 (bad request) - indicates a bad request
404 (not found) - the resource does not exits
406 (not acceptable) - the server does not support the required representation
409 (conflict) - general conflict     
412 (Precondition Failed) e.g. conflict by performing conditional update
415 (unsupported media type) - received representation is not supported

500 (internal server error) - generic error response
503 (Service Unavailable) - The server is currently unable to handle the request 
```

# objective-c - 如何操作另一个类的变量

> ID：14127404
> 
> 赞同：1
> 
> 时间：2013-01-02T18:45:00.640
> 
> 标签：objective-c

我正在编写 QTMovieView 的功能。我想双击 QTMovieView 使其退出全屏模式。QTMovieView 由 AppController.m 控制，我在 AppController 中编写了退出全屏模式功能。因为我想捕获双击 QTMovieView 的事件。所以我必须重写 mouseDown 事件。Override函数写在“QTMovieView+TFOverrideDrag.h”

QTMovieView+TFOverrideDrag.m

```
#import "QTMovieView+TFOverrideDrag.h"
#include "AppController.h"

@implementation QTMovieView (TFOverrideDrag)

- (void)mouseDown:(NSEvent *)theEvent
{
   [self.superview becomeFirstResponder];
    NSInteger clickCount = [theEvent clickCount];
    if (2 == clickCount) {
        [AppController exitFullScreen:self];

        NSLog(@"SS");
    }
    NSLog(@"MDown");
} 
```

并且此功能成功覆盖。但 exitFullScreen 功能失败。我该如何解决？谢谢

更新

应用控制器.h

```
#import <Cocoa/Cocoa.h>
#import <Carbon/Carbon.h>
#import <QTKit/QTKit.h>

@interface AppController : NSDocument
{
    QTMovie     *qtmovie;
    QTMovieView *_movieView;
}

@property (assign)  IBOutlet    QTMovieView *movieView;

- (IBAction)toggleFullscreen:(id)sender;
+(IBAction)exitFullScreen:(id)sender;

@end 
```

应用控制器.m

```
#import "AppController.h"

@implementation AppController
@synthesize movieView=_movieView;

- (IBAction)toggleFullscreen:(id)sender
{

    _movieView=_movieView;
    NSDictionary *fullScreenOptions = [[NSDictionary dictionaryWithObject:[NSNumber     numberWithBool:YES]forKey:NSFullScreenModeSetting] retain];

    [_movieView enterFullScreenMode:[[NSScreen mainScreen] retain] withOptions:fullScreenOptions];

}

+(void)exitFullScreen:(id)sender
{
    _movieView=_movieView;
    NSLog(@"exitFullscreen");

    NSDictionary *fullScreenOptions = [[NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES]forKey:NSFullScreenModeSetting] retain];
    [_movieView exitFullScreenModeWithOptions:fullScreenOptions];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:36:33.073

问题解决了！！！我通过这个解决了这个问题：

```
- (void)mouseDown:(NSEvent *)theEvent
{
   [self.superview becomeFirstResponder];
    NSInteger clickCount = [theEvent clickCount];
    if (2 == clickCount) {
        NSDictionary *fullScreenOptions = [[NSDictionary dictionaryWithObject:[NSNumber     numberWithBool:YES]forKey:NSFullScreenModeSetting] retain];
        [super enterFullScreenMode:[[NSScreen mainScreen] retain] withOptions:fullScreenOptions];
        NSLog(@"SS");
    }
    NSLog(@"MDown");
} 
```

关键是“超级”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:04:34.720

你确定`AppController`声明一个类方法`+(void)exitFullScreen:`吗？如果不是，那么您将需要将您的实例方法更改为类方法（使用 a`+`而不是 a `-`）或子类化`QTMovieView`该类并将实例传递`AppController`给实例。

# javascript - 停止侦听或删除 Image() 对象 onload 事件的事件

> ID：14127405
> 
> 赞同：0
> 
> 时间：2013-01-02T18:45:04.400
> 
> 标签：javascript, html, events, event-handling

我制作了一个画布，可以将许多小图像拼接成一个大图像。

我写它来监听一个事件，它是一个加载的单个图像对象，然后将其绘制到画布中，加载下一张将再次触发事件的图像后，它将按用户指定的数字停止此递归。

所以在达到用户指定的数字后，我想停止监听我的图像对象的“加载”事件，如何让我的图像对象（即“img”）停止监听“加载”事件？

// 这里调试

网页：[https ://dl.dropbox.com/u/2321732/stitch_images/index.html](https://dl.dropbox.com/u/2321732/stitch_images/index.html)

Javascript：[https ://dl.dropbox.com/u/2321732/stitch_images/script/main.js](https://dl.dropbox.com/u/2321732/stitch_images/script/main.js)

//为了方便编辑

JSBin：http: [//jsbin.com/acakif/1/](http://jsbin.com/acakif/1/)

注意：我怎么知道活动仍在进行

1.转到网页检查器，javascript控制台

2. `img.src = "https://dl.dropbox.com/u/2321732/stitch_images/images/0_3.jpg"`

3.它不应该记录“东西已经加载”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:18:35.657

在您的代码中，我看到：

`img.addEventListener("load", drawStitch, true);`

但是，您像这样删除侦听器：

`img.removeEventListener("load", drawStitch);`

简单地说，如果你想删除一个监听器，你必须将你传递给的所有参数传递`addEventListener`给`removeEventListener`。

所以在你的例子中是这样的：

`img.removeEventListener("load", drawStitch, true);`

我已经在 Firefox/Firebug 中对其进行了测试，并且 step.2 不再触发该事件:)

# flash - Flash 表单错误 - 没有名为“提交”的方法

> ID：14127408
> 
> 赞同：0
> 
> 时间：2013-01-02T18:45:28.073
> 
> 标签：flash, coldfusion, cfform

我是 ColdFusion 的新手，我正在努力弄清楚如何做一些我可以在 MS Access 中轻松完成的简单功能。

我不断收到错误消息：没有名称为“提交”的方法。此错误仅因表单格式为 flash 而发生。

任何帮助将不胜感激。

```
 <html>
<cfparam name="form.state" default="">
<cfparam name="form.lastname" default="">

<!---Grid Source---> 
<cfquery name="getArtists" datasource="cfartgallery">
    SELECT A.*
    FROM ARTISTS A
    WHERE
        1=1
    AND STATE like <cfqueryparam value="%#form.state#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
    AND LASTNAME like <cfqueryparam value="%#form.lastname#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
    ORDER BY A.LASTNAME, A.FIRSTNAME
</cfquery>

<head>
</head>
<body style="padding:20px;">

<cfform action="TEST.cfm" method="post" format="flash">

<cfformgroup type="horizontal" style="backgroundAlpha:0;font-size:12;color:##000;">
    <cfformgroup type="vertical" width="100">

<!---Query for STATE--->
<cfquery name="getState" datasource="cfartgallery">
    SELECT A.STATE   
    FROM ARTISTS A
    WHERE
        1=1
        AND LASTNAME like <cfqueryparam value="%#form.lastname#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
</cfquery>

<!---STATE Dropdown---> 
<cfselect name="state" query="getState" queryposition="below" 
    label="State:"
    value="STATE"
    display="STATE"  
    required="no"
    selected="#form.state#"
    onchange="submit();"
    style="backgroundAlpha:0;" width="125">
    <option></option>
</cfselect>

    </cfformgroup>
    <cfformgroup type="vertical" width="100">

<!---Query for LastName--->
<cfquery name="getLast" datasource="cfartgallery">
    SELECT A.LASTNAME   
    FROM ARTISTS A
    WHERE
        1=1
        AND STATE like <cfqueryparam value="%#form.state#%" cfsqltype="CF_SQL_VARCHAR" maxlength="255">
</cfquery>

<!---LastName Dropdown---> 
<cfselect name="lastname" query="getLast" queryposition="below" 
    label="Last Name:"  value="LASTNAME" display="LASTNAME"  
    selected="#form.lastname#"
    required="no" 
    onchange="submit();"
    style="backgroundAlpha:0;" width="125">
    <option></option>
</cfselect>

    <a href="TEST.cfm"><input type="button" value="Reset"></a>
    </cfformgroup>
    </cfformgroup>

     <cfformitem type="spacer" height="20"/>

<!---Grid---> 
        <cfgrid name="myGrid" query="getArtists" format="html">
            <cfgridcolumn name="ARTISTID" header="ARTISTID" width="75" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="FIRSTNAME" header="FIRSTNAME" width="100" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="LASTNAME" header="LASTNAME" width="75" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="ADDRESS" header="ADDRESS" width="100" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="CITY" header="CITY" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="STATE" header="STATE" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="POSTALCODE" header="POSTALCODE" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="EMAIL" header="EMAIL" width="125" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="PHONE" header="PHONE" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="FAX" header="FAX" headeralign="center" dataalign="center"/>
            <cfgridcolumn name="THEPASSWORD" header="THEPASSWORD" headeralign="center" dataalign="center"/>
         </cfgrid>

    </cfform>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:28:52.430

Dan 提出了一个很好的观点，我最初的答案是基于 HTML 表单，而不是 Flash 表单。所以原来的答案是无效的。但是，我确实发现 ColdFusion 中的 Flash 表单使用的是 ActionScript，而不是 JavaScript。请参阅此处[在 Flash 表单中使用 ActionScript](http://help.adobe.com/en_US/ColdFusion/10.0/Developing/WSc3ff6d0ea77859461172e0811cbec10372-7ff0.html)的参考。该页面还提到所有表单控件可用于重置或提交表单的自定义 ActionScript 函数是`resetForm()`和`submitForm()`. 因此，请尝试将您的`onchange`活动从以下更改`submit();`为`submitForm()`：

```
 onchange="submitForm()" 
```

我不知道 ActionScript 是否需要分号。

*** --- 以下为历史目的的原始答案 --- ***

当您收到错误“没有名称为'提交'的方法”时，您没有说。查看您提供的代码，我假设您从表单的州或姓氏下拉框中选择某些内容时会出现错误。当这些选择中的任何一个发生更改时，您是否尝试提交表单？如果我的假设是正确的，那么您可以尝试给您的表单一个`id`然后限定您的提交声明。像这样的东西：

给你的表格一个`id`

```
<cfform id="yourformid" action="TEST.cfm" method="post" format="flash"> 
```

限定您的提交语句

```
<cfselect ...
    onchange="document.getElementById("yourformid").submit();" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:00:49.140

在这种情况下不会生成 HTML 表单。因此你不能使用 JavaScript/DOM

注意：里面的一切`<cfsavecontent>`都是 ActionScript：

```
<cfsavecontent variable="astest">
if(_global.arrMembers == undefined) _global.arrMembers = data.dataProvider.slice(0);
    var arrMembers = _global.arrMembers;
var arrDisplay:Array = [];

for(var i = 0; i < arrMembers.length; i++)
 {
    if(arrMembers[i].dept == myselect1.value || myselect1.value == 'All')
    {
        arrDisplay.push(arrMembers[i]);
    }
}
    data.dataProvider = arrDisplay;

</cfsavecontent> 
```

然后后来：

```
<cfselect ... onChange="#astest#"> 
```

参考： [http ://www.asfusion.com/examples/item/filtering-records-on-a-cfform-grid](http://www.asfusion.com/examples/item/filtering-records-on-a-cfform-grid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:23:16.927

这个，

```
onchange="submit();" 
```

将会

```
onchange="this.form.submit();" 
```

如果你有一个 html 表单。我不确定闪存表格。

# node.js - 在 Express.js 中使用一个路由作为另一个路由的别名

> ID：14127411
> 
> 赞同：15
> 
> 时间：2013-01-02T18:45:42.827
> 
> 标签：node.js, routes, express, alias

我正在用 Express.js 写一个基本的博客。假设我有这样的路线结构：

```
/blog/page/:page 
```

我还想要一条`/blog`本质上是`/blog/page/1`. 如何在 Express 中轻松处理这个问题？

所有路线的定义如下：

```
app.get('/path', function(req, res) {
    //logic
}); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-02T19:03:26.417

用于[`res.redirect`](http://expressjs.com/en/4x/api.html#res.redirect)告诉浏览器重定向到`/blog/page/1`：

```
app.get('/blog', function(req, res) {
    res.redirect('/blog/page/1');
});

app.get('/blog/page/:page', function(req, res) {
    //logic
}); 
```

`page`如果未传递参数，则使用共享路由处理程序并默认为第 1 页：

```
function blogPageHandler(req, res) {
    var page = req.params.page || 1;
    //logic
}

// Define separate routes
app.get('/blog/page/:page', blogPageHandler);
app.get('/', blogPage);

// or combined, by passing an array
app.get(['/', '/blog/page/:page'], blogPageHandler);

// or using optional regex matching (this is not recommended)
app.get('/:_(blog/)?:_(page/)?:page([0-9]+)?', blogPageHandler); 
```

# jquery - 如何使用 jQuery Accordian 动态移动制表符位置？

> ID：14127417
> 
> 赞同：-3
> 
> 时间：2013-01-02T18:46:03.433
> 
> 标签：jquery

在 Accordion jQuery 功能中，如何在不使用 UI 插件的情况下使用左、右、上和下动态移动选项卡位置？

示例：有一个包含四个值的下拉列表，它们是 1.top 2.bottom 3.left 和 4.right

```
If i click on top -    Tabs should display top to bottom direction
If i click on bottom - Tabs should display bottom to top direction
If i click on left -   Tabs should display left to right direction
If i click on left -   Tabs should display right to left direction 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:07:10.373

你可以试试下面的代码。请注意，此代码不完整。您需要添加所有案例...

```
$("select").change(function() {
    var str = "";
    $("select option:selected").each(function() {
        str += $(this).text() + " ";
    });

    switch (str) {
    case 'top':
        $("#tabs").addClass("ui-tabs-vertical ui-helper-clearfix");
        $("#tabs li").removeClass("ui-corner-top").addClass("ui-corner-left");
        break;

    case 'bottom':
        // fix the classes
        $( ".tabs-bottom .ui-tabs-nav, .tabs-bottom .ui-tabs-nav > *" )
            .removeClass( "ui-corner-all ui-corner-top" )
            .addClass( "ui-corner-bottom" );

        // move the nav to the bottom
        $( ".tabs-bottom .ui-tabs-nav" ).appendTo( ".tabs-bottom" );
        break;

    case 'left':
        // change the required classes
        break;

    case 'right':
        // change the required classes
        break;
    }
}); 
```

# scribe - Scribe 和 Atlassian 休息

> ID：14127418
> 
> 赞同：2
> 
> 时间：2013-01-02T18:46:26.200
> 
> 标签：scribe

我正在尝试使用 Scribe 使用此处的示例来使用 Atlassian Jira：

[https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+OAuth+authentication](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Example+-+OAuth+authentication)

有人有运气吗？

这是我得到的：

```
public class JiraAPI extends DefaultApi10a {

static final String BASE = "http://xasdf:8080/plugins/servlet";

 @Override
 public String getAccessTokenEndpoint()
 {
   return BASE + "/oauth/access-token";
 }

 @Override
 public String getAuthorizationUrl(Token requestToken)
 {
   return BASE + "/oauth/authorize?oauth_token="+requestToken.getToken();
 }

 @Override
 public String getRequestTokenEndpoint()
 {
   return BASE + "/oauth/request-token";
 }

 @Override
 public SignatureService getSignatureService() {
    return new RSASha1SignatureService(getPrivateKey());
 }

private static PrivateKey getPrivateKey()
  {
    String str = "MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAMPQ5BCMxlUq2TYy\n"+
                 "iRIoEUsz6HGTJhHuasS2nx1Se4Co3lxwxyubVdFj8AuhHNJSmJvjlpbTsGOjLZpr\n"+
                 "HyDEDdJmf1Fensh1MhUnBZ4a7uLrZrKzFHHJdamX9pxapB89vLeHlCot9hVXdrZH\n"+
                 "nNtg6FdmRKH/8gbs8iDyIayFvzYDAgMBAAECgYA+c9MpTBy9cQsR9BAvkEPjvkx2\n"+
                 "XL4ZnfbDgpNA4Nuu7yzsQrPjPomiXMNkkiAFHH67yVxwAlgRjyuuQlgNNTpKvyQt\n"+
                 "XcHxffnU0820VmE23M+L7jg2TlB3+rUnEDmDvCoyjlwGDR6lNb7t7Fgg2iR+iaov\n"+
                 "0iVzz+l9w0slRlyGsQJBAPWXW2m3NmFgqfDxtw8fsKC2y8o17/cnPjozRGtWb8LQ\n"+
                 "g3VCb8kbOFHOYNGazq3M7+wD1qILF2h/HecgK9eQrZ0CQQDMHXoJMfKKbrFrTKgE\n"+
                 "zyggO1gtuT5OXYeFewMEb5AbDI2FfSc2YP7SHij8iQ2HdukBrbTmi6qxh3HmIR58\n"+
                 "I/AfAkEA0Y9vr0tombsUB8cZv0v5OYoBZvCTbMANtzfb4AOHpiKqqbohDOevLQ7/\n"+
                 "SpvgVCmVaDz2PptcRAyEBZ5MCssneQJAB2pmvaDH7Ambfod5bztLfOhLCtY5EkXJ\n"+
                 "n6rZcDbRaHorRhdG7m3VtDKOUKZ2DF7glkQGV33phKukErVPUzlHBwJAScD9TqaG\n"+
                 "wJ3juUsVtujV23SnH43iMggXT7m82STpPGam1hPfmqu2Z0niePFo927ogQ7H1EMJ\n"+
                 "UHgqXmuvk2X/Ww==";

    try
    {
      KeyFactory fac = KeyFactory.getInstance("RSA");
      PKCS8EncodedKeySpec privKeySpec = new PKCS8EncodedKeySpec(Base64.decodeBase64(str.getBytes()));
      return fac.generatePrivate(privKeySpec);
    }
    catch (Exception e)
    {
      throw new RuntimeException(e);
    }
  }
} 
```

与其他基于 OAuth 的提供程序一起使用 Scribe 一直很容易，但此提供程序在调试时总是“oauth_problem=signature_invalid”：

generating signature... base string is: POST&http%3A%2F%2Fxasdf%3A8080%2Fplugins%2Fservlet%2Foauth%2Frequest-token&oauth_callback%3Doob%26oauth_consumer_key%3Dhardcoded-consumer%26oauth_nonce%3D1556398454%26oauth_signature_method%3DRSA-SHA1%26oauth_timestamp%3D1357151719 %26oauth_version%3D1.0 signature is: AJugUeZGup5dZvjNjx6bec6OrAszZVK+pMrTzahZbbzKzGkbli7okBy2KO5ww+OtqqnHWRgyzfWnQ0k6R5U0JzjR4QiOANJuwV8Un1NTZsrK32daefCp2uZ6W2d2Y/fmIl3toyCjAx41c3oJ78572vVFmBGihHUTUOYTlFP1X3M= appended additional OAuth parameters: { oauth_callback -> oob , oauth_signature -> AJugUeZGup5dZvjNjx6bec6OrAszZVK+pMrTzahZbbzKzGkbli7okBy2KO5ww+OtqqnHWRgyzfWnQ0k6R5U0JzjR4QiOANJuwV8Un1NTZsrK32daefCp2uZ6W2d2Y/fmIl3toyCjAx41c3oJ78572vVFmBGihHUTUOYTlFP1X3M= , oauth_version -> 1.0 , oauth_nonce -> 1556398454 , oauth_signature_method -> RSA-SHA1 ,oauth_consumer_key -> 硬编码消费者，oauth_timestamp -> 1357151719 }

使用 Http Header 签名发送请求...响应状态码：401

线程“主”org.scribe.exceptions.OAuthException 中的异常：响应正文不正确。Can't extract token and secret from this: 'oauth_signature=AJugUeZGup5dZvjNjx6bec6OrAszZVK%2BpMrTzahZbbzKzGkbli7okBy2KO5ww%2BOtqqnHWRgyzfWnQ0k6R5U0JzjR4QiOANJuwV8Un1NTZsrK32daefCp2uZ6W2d2Y%2FfmIl3toyCjAx41c3oJ78572vVFmBGihHUTUOYTlFP1X3M%3D&oauth_signature_base_string=POST%26http%253A%252F%252Ftracker%253A8080%252Fplugins%252Fservlet%252Foauth%252Frequest-token%26oauth_callback%253Doob%2526oauth_consumer_key %253Dhardcoded-consumer%2526oauth_nonce%253D1556398454%2526oauth_signature_method%253DRSA-SHA1%2526oauth_timestamp%253D1357151719%2526oauth_version%253D1.0&oauth_problem=signature_method_invalid&1'auth_sign 响应：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T12:54:13.840

据我所知，您不能将 Scribe 与 JIRA/Atlassian OAuth 一起使用，因为 Scribe 不支持 RSA-SHA1 签名，但这是 Atlassian OAuth 提供程序中唯一可用的签名。

我能找到的唯一支持此方法的 Java 库是问题中链接的示例代码中使用的库 - net.oauth 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T04:39:29.610

我使用提供的 scribe 1.3.6 进行此工作`RSASha1SignatureService`，这是我提取私钥的方式（从 PKCS#8 PEM 文件，带有`BEGIN PRIVATE KEY`标题的文件，而不是`BEGIN RSA PRIVATE KEY`SSLeay 格式的文件）

```
package com.company.client.api;

import java.security.KeyFactory;
import java.security.PrivateKey;
import java.security.spec.PKCS8EncodedKeySpec;
import java.util.Base64;

import org.scribe.builder.api.DefaultApi10a;
import org.scribe.builder.api.DefaultApi20;
import org.scribe.model.OAuthConfig;
import org.scribe.model.Token;
import org.scribe.services.RSASha1SignatureService;
import org.scribe.services.SignatureService;

public class JiraApi extends DefaultApi10a {

    private static final String AUTHORIZE_URL = "http://localhost:8080/plugins/servlet/oauth/authorize?oauth_token=%s";
    private static final String REQUEST_TOKEN_RESOURCE = "http://localhost:8080/plugins/servlet/oauth/request-token";
    private static final String ACCESS_TOKEN_RESOURCE = "http://localhost:8080/plugins/servlet/oauth/access-token";

    @Override
    public String getAccessTokenEndpoint() {
        return ACCESS_TOKEN_RESOURCE;
    }

    @Override
    public String getRequestTokenEndpoint() {
        return REQUEST_TOKEN_RESOURCE;
    }

    @Override
    public String getAuthorizationUrl(Token requestToken) {
        return String.format(AUTHORIZE_URL, requestToken.getToken());
    }

    @Override
    public SignatureService getSignatureService() {
        return new RSASha1SignatureService(getPrivateKey());
    }

    private PrivateKey getPrivateKey() {
        try {
            byte[] key = Base64.getDecoder().decode(JiraClientImpl.privateKey); // this is the PEM encoded PKCS#8 private key 
            PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(key);
            KeyFactory kf = KeyFactory.getInstance("RSA");
            return kf.generatePrivate(keySpec);
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }

} 
```

# haskell - 酸状态查询的意外返回类型（Happstack）

> ID：14127421
> 
> 赞同：4
> 
> 时间：2013-01-02T18:46:37.927
> 
> 标签：haskell, happstack, acid-state

我正在尝试使用一些附加功能扩展[Happstack 速成课程](http://www.happstack.com/docs/crashcourse/index.html)博客：在主页上显示所有标签的列表。

我的博客记录是这样的：

```
data Blog = Blog
    { nextPostId :: PostId
    , posts      :: IxSet Post
    , allTags    :: [Text] 
    }
    deriving (Data, Typeable) 
```

我通过以下方式通过 id 获取博客文章（从速成课程中复制粘贴）：

```
-- Models.hs

postById :: PostId -> Query Blog (Maybe Post)
postById pid =
     do Blog{..} <- ask
        return $ getOne $ posts @= pid

-- Controller.hs

viewPage :: AcidState Blog -> ServerPart Response
viewPage acid = 
     do pid <- PostId <$> lookRead "id"
        mPost <- query' acid (PostById pid)
        ...
        -- mPost has type Maybe Post here
        ... 
```

它工作正常。

当我尝试以类似方式查询所有标签时：

```
-- Models.hs 

getTags :: Query Blog [Text]
getTags = 
    do Blog{..} <- ask
       return allTags

-- Controller.hs

serveTags :: AcidState Blog -> [Text]
serveTags acid = query' acid GetTags 
```

它行不通。错误堆栈跟踪是：

```
Blog/Controllers.hs:154:18:
   Couldn't match type `[Text]' with `Text'
   Expected type: [Text]
   Actual type: [acid-state-0.8.1:Data.Acid.Common.EventResult
                                       GetTags]
   In the return type of a call of query'
   In the expression: query' acid GetTags 
```

我不知道为什么返回类型`query'`是`[EventResult GetTags]`，而应该是`[Text]`。

这个错误的原因是什么？有没有办法解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T20:49:03.627

问题是您在函数上的类型签名`serveTags`，它应该是一元的：

```
serveTags :: MonadIO m => AcidState Blog -> m [Text]
serveTags acid = query' acid GetTags 
```

`EventResult`是一个在这里解析为的类型族`[Text]`。由于`query'`是单子，您的类型签名已解析为列表单子，即列表单子`m Text`在哪里`m`，因此会出现令人困惑的错误消息。

# ios - UITableView - 手动显示删除按钮

> ID：14127424
> 
> 赞同：0
> 
> 时间：2013-01-02T18:46:58.800
> 
> 标签：ios

当您向右滑动时，您会看到删除按钮。漂亮的。
我想在向左滑动时获得相同的功能。可能的？

我已经实现了向后滑动，它正在捕捉动作，它只是让它显示删除按钮。

非常感
谢格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T16:34:29.750

这是我为自己创建的一个问题，默认情况下，向左滑动会弹出删除按钮。我遇到麻烦的地方是我的目标是向右滑动以增加数字并向左滑动以减少，但如果是 1，我想提供删除单元格的选项。仅当计数大于 1 时才附加 UISwipeGestureRecognizer（左）的解决方案。

感谢大家的评论。

# java - 逻辑电路仿真

> ID：14127426
> 
> 赞同：3
> 
> 时间：2013-01-02T18:47:03.327
> 
> 标签：java, logic, simulation

我做了一个计算逻辑电路真值表的小程序。在我选择的表示中（出于无知，我没有受过这门学科的教育），我使用 Circuit 类和 Connector 类来表示“电路”（包括基本门，例如 NOT、OR...）和接线.

工厂类用于“焊接引脚和电线”，语句如下所示

```
factory.addCircuit("OR0", CircuitFactory.OR);
factory.addConnector("N0OUT", "NOT0", 0, "AND1", 1); 
```

当电路完成时

```
factory.createTruthTable(); 
```

计算电路的真值表。输入 OR NOT 和 AND 的真值表，代码链接了 XOR、1/2 ADDER、ADDER 和 4 位 ADDER 的创建，在每一步重用上一步的真值表。

对于一个下午的工作来说，这一切都很好而且很花哨，但它显然会在循环中中断（例如，人字拖）。有谁知道用循环表示逻辑电路的便捷方法？理想的情况是它可以用一个表来表示，也许是一个包含先前状态、新状态和延迟的表。

将我指向描述这种表示的文献也可以。一个小时的互联网搜索只带来了一篇博士论文，有点超出我的理解。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:50:24.370

任何循环都必须包含至少一个具有“状态”的节点，其中触发器（或寄存器）是基本构建块。一种有效的方法是将所有有状态的节点拆分为两个节点；一个充当数据*源*，另一个充当数据接收*器*。所以你现在没有循环了。^*

为了模拟，在每个时钟周期，^(**)您以前馈方式将数据值从源传播到接收器。然后更新有状态的源（从它们相应的接收器），为下一个周期做好准备。

* * *

[* 如果此时仍有回路，则说明电路图无效。]

[** 我假设您想模拟*同步*逻辑，即您有一个时钟，并且状态仅在时钟边缘更新。如果您想模拟*异步*逻辑，那么事情会变得更加棘手，因为您需要开始对传播延迟等进行建模。]

# magento - Magento 索引问题 - 无法重新索引

> ID：14127430
> 
> 赞同：17
> 
> 时间：2013-01-02T18:47:20.953
> 
> 标签：magento, indexing, magento-1.6

我的 Magento 1.6.2.0 商店中的索引管理有问题。基本上我不能让他们更新。状态说`Processing`，但它现在这样说已经超过 3 周了。

当我尝试重新索引时，我收到了这条消息`Stock Status Index process is working now. Please try run this process later`，但现在是 3 周？所以看起来这个过程被冻结了，但我不知道如何重新启动。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-02T20:53:05.597

每当您启动索引过程时，Magento 都会将锁定文件写入文件`var/locks`夹。

```
$ cd /path/to/magento
$ ls var/locks
index_process_1.lock    index_process_4.lock    index_process_7.lock
index_process_2.lock    index_process_5.lock    index_process_8.lock
index_process_3.lock    index_process_6.lock    index_process_9.lock 
```

锁定文件可防止其他用户启动索引进程。但是，如果索引请求在完成之前超时或失败，则锁定文件将处于锁定状态。这可能就是发生在你身上的事情。我建议您检查锁定文件的最后修改日期，以确保其他人现在没有运行重新索引器，然后删除锁定文件。这将清除您的

> 股票状态指数流程正在运行。请稍后尝试运行此进程

错误。之后，一次运行一个索引器以确保每个都完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T05:18:36.353

您好，如果没有，您是否手动调用脚本然后在您的根文件夹中创建一个文件并将此代码写入其中

```
require_once 'app/Mage.php';
umask( 0 );
Mage :: app( "default" );
$process = Mage::getSingleton('index/indexer')->getProcessByCode('catalog_product_flat');
$process->reindexAll(); 
```

此代码有时会手动为您的 magento 建立索引，如果您的 magento 商店包含大量产品，那么它需要大量时间来重新索引产品，因此当您可以从管理员进入索引管理时，它会显示一些索引**处理阶段**，所以这段代码可能会帮助您将处理阶段删除到索引的就绪阶段。

或者，如果您有权限，也可以使用 SSH 进行索引。索引也更快

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-02T16:24:34.517

对于新版本的 magento ，即 2.1.3 我不得不使用这个解决方案： [http ://www.elevateweb.co.uk/magento-ecommerce/magento-error-sqlstatehy000-general-error-1205-lock-wait-timeout - 超过](http://www.elevateweb.co.uk/magento-ecommerce/magento-error-sqlstatehy000-general-error-1205-lock-wait-timeout-exceeded)

如果您正在运行大量自定义脚本并在数据库连接有机会关闭之前终止脚本，则可能会发生这种情况

如果您从 CLI 登录 MySQL 并运行命令

显示处理程序；

你会得到以下输出

+———+——————–+——————-+———–+———+——+——-+——————+———–+ —————+———–+

| 身份证 | 用户 | 主持人 | 分贝 | 命令 | 时间 | 状态 | 信息 | 行_发送 | 行检查 | 行阅读 |

+———+——————–+——————-+———–+———+——+——-+——————+———–+ —————+———–+

| | 6794372 | 数据库用户| 111.11.0.65:21532 | 数据库名称| 睡眠 | 3800 | | 空 | 0 | 0 | 0
| | 6794475 | 数据库用户| 111.11.0.65:27488 | 数据库名称| 睡眠 | 3757 | | 空 | 0 | 0 | 0
| | 6794550 | 数据库用户| 111.11.0.65:32670 | 数据库名称| 睡眠 | 3731 | | 空 | 0 | 0 | 0
| | 6794797 | 数据库用户| 111.11.0.65:47424 | 数据库名称 | 睡眠 | 3639 | | 空 | 0 | 0 | 0
| | 6794909 | 数据库用户| 111.11.0.65:56029 | 数据库名称| 睡眠 | 3591 | | 空 | 0 | 0 | 0
| | 6794981 | 数据库用户| 111.11.0.65:59201 | 数据库名称| 睡眠 | 3567 | | 空 | 0 | 0 | 0
| | 6795096 | 数据库用户| 111.11.0.65:2390 | 数据库名称| 睡眠 | 3529 | | 空 | 0 | 0 | 0
| | 6795270 | 数据库用户| 111.11.0.65:10125 | 数据库名称 | 睡眠 | 3473 | | 空 | 0 | 0 | 0
| | 6795402 | 数据库用户| 111.11.0.65:18407 | 数据库名称| 睡眠 | 3424 | | 空 | 0 | 0 | 0
| | 6795701 | 数据库用户| 111.11.0.65:35679 | 数据库名称| 睡眠 | 3330 | | 空 | 0 | 0 | 0
| | 6800436 | 数据库用户| 111.11.0.65:57815 | 数据库名称| 睡眠 | 1860 | | 空 | 0 | 0 | 0
| | 6806227 | 数据库用户| 111.11.0.67:20650 | 数据库名称| 睡眠 | 188 | | 空 | 1 | 0 | 0
+———+——————–+——————-+——————–+———+——+———-+——————+———– +——————+———–+

15 行一组（0.00 秒）

您可以看到作为示例 6794372 命令是 sleep 并且时间是 3800。这是防止其他操作这些进程应该使用命令 1 1 被杀死。

杀死 6794372; 一旦你杀死了所有的睡眠连接，事情应该会重新开始正常工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-30T10:56:51.967

你需要做两个步骤：

1.  授予 var/locks 文件夹 777 许可
2.  删除 var/locks 文件夹的所有文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-28T08:26:35.800

每当您启动索引过程时，Magento 都会将锁定文件写入 var/locks 文件夹。所以你需要做两个步骤：

1.  授予 777 对 var/locks 文件夹的权限
2.  删除 var/locks 文件夹的所有文件。

现在刷新管理面板中的索引管理页面。享受！！

# iphone - OpenCV中奇怪的无与伦比的花括号

> ID：14127431
> 
> 赞同：4
> 
> 时间：2013-01-02T18:47:21.283
> 
> 标签：iphone, objective-c, opencv

我正在使用 iPhone 的 OpenCV 版本，我遇到了一个有点奇怪的错误。在使用拼接器时，一些导入的标头现在抱怨此行上的“{”不匹配：

```
enum { NO, FEATHER, MULTI_BAND }; 
```

`NO`是来自 objc.h 的宏，定义为

```
#define NO              __objc_no 
```

并且编译器期望一个 '}' 来匹配枚举的开头，即使稍后会有一个。怎么了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T08:34:30.467

我已经有同样的问题很长时间了，我刚刚发现了一个解决方法。正如您所说的正确，这是 UIKit 中 NO-makro 定义的问题。您需要做的是转到您的 .pch 文件并替换

```
#ifdef __cplusplus
#import <opencv2/opencv.hpp>
#endif 
```

和

```
#ifdef __cplusplus
#import <opencv2/opencv.hpp>
#import <opencv2/stitching/detail/blenders.hpp>
#import <opencv2/stitching/detail/exposure_compensate.hpp>
#endif 
```

因此，您生成的 .pch 应如下所示：

```
//
// Prefix header for all source files of the 'Project' target in the 'Project' project
//

#import <Availability.h>

#ifndef __IPHONE_3_0
#warning "This project uses features only available in iOS SDK 3.0 and later."
#endif

#ifdef __cplusplus
#import <opencv2/opencv.hpp>
#import <opencv2/stitching/detail/blenders.hpp>
#import <opencv2/stitching/detail/exposure_compensate.hpp>
#endif

#ifdef __OBJC__
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#endif 
```

这样，blenders.hpp 和 exposure_compensate.hpp 中的 NO 枚举在 UIKit 中的 NO-makro 之前定义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-11T02:44:00.857

Swift：在您的 .mm 文件中，您只需在调用任何 OpenCV 标头之前从 UIKit 取消定义“NO”宏。

```
#import "OpenCVWrapper.h"
#undef NO
#import <opencv2/opencv.hpp> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-27T06:34:27.030

我更改代码 -

```
//    enum { NO, FEATHER, MULTI_BAND };
    enum { NO_EXPOSURE_COMPENSATOR =  0, FEATHER, MULTI_BAND }; 
```

这个对我有用。谢谢。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-07T21:54:10.343

我为 Swift 用户使用了一个更简单的修复程序。

在我的`.mm`文件中，我将`.h`导入 移动到`#import<opencv2/opencv.hpp>`.

希望这可以帮助！

# android - 使用列表视图从表中删除特定行

> ID：14127432
> 
> 赞同：0
> 
> 时间：2013-01-02T18:47:23.963
> 
> 标签：android, sql, sqlite

我有一个表'itemsDataTable'，当我删除一行时：

```
public void deleteExpense(long idToDelete){ // Delete Expense
    Log.d(TAG, "Expense deleted with id: " + idToDelete);
    db.delete(TABLE, COLUMN_ID + " = " + idToDelete, null);
} 
```

它搞砸了。我从列表视图中选择一个项目，然后在新屏幕中我可以选择删除该行。该行的 _id 仍在表中，但该行中的所有详细信息均为空。列表视图的位置没有用，因为如果我多次删除，位置不正确。

结果是这样的：

```
_id  some_title
1    blabla
2    blabla
3
4    blabla
5
6    blabla 
```

任何想法如何解决所有这些混乱？

我的列表视图：

```
ListView lvItemsHistory=(ListView)findViewById(R.id.listView1);
        final ArrayList<Expense>expensesList=new ArrayList<Expense>();
        Cursor sortCurser=MainActivity.itemsDataBase.query();

        while (sortCurser.moveToNext()) {
            expensesList.add( new Expense(
                    sortCurser.getString(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_DESCRIPTION)),
                    sortCurser.getInt(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_PRICE)),
                    sortCurser.getString(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_PAYMENT_OPTION)),
                    sortCurser.getString(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_ITEM_CATEGORY)),
                    sortCurser.getString(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_PHOTO_URL)),
                    sortCurser.getString(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_LOCATION)),
                    sortCurser.getString(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_DATE)),
                    sortCurser.getString(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_TIME)),
                    sortCurser.getString(sortCurser.getColumnIndex(ItemsDataBase.COLUMN_VOICE_RECORD_URL))));
        }

        ArrayAdapter<Expense>itemsAdapter=new ArrayAdapter<Expense>(this, android.R.layout.simple_list_item_1, expensesList);
        lvItemsHistory.setAdapter(itemsAdapter);
        lvItemsHistory.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
                Log.d(ItemsDataBase.TAG, "Position = " + (position + 1));
                Expense item=expensesList.get(position);
                Intent intent=new Intent(HistoryExpense.this, ShowExpense.class);
                intent.putExtra("itemName", item);
                intent.putExtra("positionExpense", position + 1);
                finish();
                startActivity(intent);
            }

        }); 
```

显示费用：

```
public class ShowExpense extends Activity {

    protected int expenseID;

    private boolean isPlay;
    private MediaPlayer mediaPlayer;
    Facebook facebook;

    private TextView tvDescription, tvPrice, tvPaymentOption, tvCategory, tvLocation, tvDate, tvTime, tvIsAudioNote;
    private ImageButton btnPlayRecordedNote, shareButton, btnShareToTwitter;
    private Button btnDeleteItem, btnExportToPDF;
    private ImageView ivItemPhoto;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.show_item_activity);

        isPlay = true; // Reset so we can play the audio

        tvDescription = (TextView)findViewById(R.id.textView2);
        tvPrice = (TextView)findViewById(R.id.textView4);
        tvPaymentOption = (TextView)findViewById(R.id.textView6);
        tvCategory=(TextView)findViewById(R.id.textView8);
        tvLocation=(TextView)findViewById(R.id.textView10);
        tvDate=(TextView)findViewById(R.id.textView12);
        tvTime=(TextView)findViewById(R.id.textView14);
        ivItemPhoto=(ImageView)findViewById(R.id.imageView1);
        btnDeleteItem=(Button)findViewById(R.id.button1);
        btnExportToPDF=(Button)findViewById(R.id.button3);
        btnPlayRecordedNote=(ImageButton)findViewById(R.id.imageButton1);
        tvIsAudioNote=(TextView)findViewById(R.id.textView15);
        shareButton = (ImageButton)findViewById(R.id.imageButton2);
        btnShareToTwitter = (ImageButton) findViewById(R.id.imageButtonTwitter);

        Bundle bundle=getIntent().getExtras();
        final Expense item=(Expense)bundle.getSerializable("itemName");

        Bundle positionExpenseBundle = getIntent().getExtras();
        final int expensePosition = positionExpenseBundle.getInt("positionExpense");

        if (item.isAudioNote.equals("null") || item.isAudioNote.isEmpty()) {
            tvIsAudioNote.setText("No recorded audio note.");
        }
        else {
            tvIsAudioNote.setText("Recorded audio note saved to " + item.isAudioNote);
        }

        tvDescription.setText(item.strDescription);
        tvPrice.setText(item.strPrice+"");
        tvPaymentOption.setText(item.paymentOption);
        tvCategory.setText(item.productCategory);
        tvLocation.setText(item.isLocation);
        tvDate.setText(item.isDate);
        tvTime.setText(item.isTime);

        final String PHOTO_URL=item.photoURL+"";
        Log.i(ItemsDataBase.TAG, PHOTO_URL+"");

        if (PHOTO_URL.isEmpty() || PHOTO_URL.equals("null") || PHOTO_URL.equals(null)) {
            Log.d(ItemsDataBase.TAG, "There is no photo. Default photo will be presented.");
            int defaultImageID=R.drawable.default_item_photo;
            ivItemPhoto.setImageResource(defaultImageID);
        }
        else {

            File file=new File(PHOTO_URL);
            Log.i(ItemsDataBase.TAG, file.toString());
            if (file.exists()) {
                Log.d(ItemsDataBase.TAG, "File photo url exists");
                Bitmap bmp=BitmapFactory.decodeFile(file.getAbsolutePath());
                Log.i(ItemsDataBase.TAG, "File absolute path="+file.getAbsolutePath());
                ivItemPhoto.setImageBitmap(bmp);
            }
            else {
                Log.d(ItemsDataBase.TAG, "File photo url does not exists");
            }
        }

        btnDeleteItem.setOnClickListener(new View.OnClickListener() { // Delete Income

            @Override
            public void onClick(View v) {

                MainActivity.itemsDataBase.deleteExpense(expensePosition);
                runOnUiThread(new Runnable() {

                    public void run() {

                        AlertDialog.Builder builder=new AlertDialog.Builder(ShowExpense.this); //Notify user all is OK
                        AlertDialog completeOK=builder.setTitle("Information").setMessage("Expense deleted with id: " + (expensePosition)).setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                Log.d(ItemsDataBase.TAG, "Expense deleted with id: " + expensePosition);

                                finish();
                            }
                        }).create();
                        completeOK.show();
                    }
                });
            }
        });

        btnExportToPDF.setOnClickListener(new View.OnClickListener() { // Export to pdf

            @Override
            public void onClick(View v) {

                idanUtils idanUtils=new idanUtils();
                final String filename="/"+"EXPENSE_"+idanUtils.getDateAndTimeStamp()+".pdf";
                String deviceStorage=Environment.getExternalStorageDirectory().getAbsolutePath().toString();
                Log.d(ItemsDataBase.TAG, deviceStorage+filename);

                File myDir = new File(deviceStorage + "/My Wallet");
                myDir.mkdirs();
                File file=new File(myDir, filename);

                Document document=new Document();

                try {
                    PdfWriter.getInstance(document, new FileOutputStream(file));
                    document.open();
                    document.add(new Paragraph("Item description: "+item.strDescription));
                    document.add(new Paragraph("Paid by: "+item.paymentOption));
                    document.add(new Paragraph("Category: "+item.productCategory));
                    document.add(new Paragraph("Price: "+item.strPrice));
                    document.add(new Paragraph("Bught at: "+item.isLocation));
                    document.add(new Paragraph("Dated: "+item.isDate));
                    document.add(new Paragraph("Time: "+item.isTime));

                    if (PHOTO_URL.isEmpty() || PHOTO_URL.equals("null")) {
                        document.add(new Paragraph("No image available"));
                        Log.i(ItemsDataBase.TAG, "No image available");
                    } else {
                        Image image=Image.getInstance(item.photoURL);
                        image.scaleAbsolute(200f, 200f);
                        document.add(image);
                    }

                } catch (Exception e) {
                    String error=(e.getMessage()==null)?"Error adding information to PDF document":e.getMessage();
                    Log.e(ItemsDataBase.TAG, error);
                }
                document.close();

                runOnUiThread(new Runnable() {

                    public void run() {

                        AlertDialog.Builder builder=new AlertDialog.Builder(ShowExpense.this); //Notify user all is OK
                        AlertDialog completeOK=builder.setTitle("Information").setMessage(filename+" saved to /My Wallet folder on your internal storage.").setCancelable(false).setPositiveButton("OK", new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                Log.d(ItemsDataBase.TAG, filename+" saved to /My Wallet folder on your internal storage.");
                            }
                        }).create();
                        completeOK.show();
                    }
                });
            }
        });

        btnPlayRecordedNote.setOnClickListener(new View.OnClickListener() { // Play recorded audio note

            @Override
            public void onClick(View v) {

                if (isPlay) { // Play
                    mediaPlayer=new MediaPlayer();
                    try {
                        mediaPlayer.setDataSource(item.isAudioNote);
                        mediaPlayer.prepare();
                        mediaPlayer.start();
                    } catch (IllegalArgumentException e) {
                        Log.e(ItemsDataBase.TAG, e.getMessage());
                    } catch (IllegalStateException e) {
                        Log.e(ItemsDataBase.TAG, e.getMessage());
                    } catch (IOException e) {
                        Log.e(ItemsDataBase.TAG, e.getMessage());
                    }
                    isPlay = false;
                } else{ // Stop
                    mediaPlayer.stop();
                    mediaPlayer.release();
                    isPlay = true;
                }

                //              MediaPlayer mediaPlayer=new MediaPlayer();
                //              try {
                //                  mediaPlayer.setDataSource(item.isAudioNote);
                //                  mediaPlayer.prepare();
                //                  mediaPlayer.start();
                //              } catch (IllegalArgumentException e) {
                //                  Log.e(ItemsDataBase.TAG, e.getMessage());
                //              } catch (IllegalStateException e) {
                //                  Log.e(ItemsDataBase.TAG, e.getMessage());
                //              } catch (IOException e) {
                //                  Log.e(ItemsDataBase.TAG, e.getMessage());
                //              }
                // TODO - On Key Press Back - STOP PLAY THE AUDIO NOTE
                //              mediaPlayer.stop();
                //              mediaPlayer.release();
            }
        });

        btnShareToTwitter.setOnClickListener(new View.OnClickListener() { // Share to Twitter

            @Override
            public void onClick(View v) {

                String tweetUrl = "https://twitter.com/intent/tweet?text=";
                String text = "Hi, just twitting from My Wallet app! I just spent " + item.strPrice + " to buy " + item.strDescription;
                Uri uri = Uri.parse(tweetUrl + text);
                startActivity(new Intent(Intent.ACTION_VIEW, uri));
            }
        });

        shareButton.setOnClickListener(new View.OnClickListener() { // Share on Facebook

            @Override
            public void onClick(View v) {
                FacebookConnect.message = "Hi! Just saying hello from My Wallet app! I just spent " + item.strPrice + "$ to buy " + item.strDescription + "!";
                FacebookConnect.postStatusUpdate();
                Intent fbIntent = new Intent(ShowExpense.this, FacebookConnect.class);
                startActivity(fbIntent);
                Log.d(ItemsDataBase.TAG, FacebookConnect.message);
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.show_item_activity, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:00:23.017

尝试像这样传递 ID：

```
db.delete(TABLE, COLUMN_ID + " =?", new String[] { idToDelete }); 
```

如果 idToDelete 是一个 int/Integer：

```
db.delete(TABLE, COLUMN_ID + " =?", new String[] { String.valueOf( idToDelete ) } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:55:01.827

[给定一列值删除数据库表中的行 - 这是一个字符串](https://stackoverflow.com/questions/3314176/delete-row-in-database-table-given-one-column-value-which-is-a-string)

# oracle - Oracle 数据库按波兰语字符排序

> ID：14127437
> 
> 赞同：2
> 
> 时间：2013-01-02T18:47:48.363
> 
> 标签：oracle, oracle11g, sql-order-by

我对包含波兰字符（如 ą、Ą）的 varchar 进行排序时遇到问题。

例如，我们有以下名称：

```
Aaaa
BBcvx
Ąccc
Ddde
ądcc 
```

以下查询：

```
select * from something order by lower(name); 
```

返回结果如下：

```
Aaaa
BBcvx
Ddde
ądcc
Ąccc 
```

如您所见，波兰语字符被忽略并放在最后。它应该是：

```
Aaaa
ądcc
Ąccc
BBcvx
Ddde 
```

可能是什么问题？数据库编码？我的是：

```
SELECT * FROM NLS_DATABASE_PARAMETERS WHERE PARAMETER = 'NLS_CHARACTERSET';

Result:
EE8MSWIN1250 
```

可以在不更改数据库编码的情况下解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T18:57:04.597

您需要查看[NLS_SORT](http://docs.oracle.com/cd/E11882_01/server.112/e25513/initparams153.htm#REFRN10127)参数，特别是[语言排序](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch5lingsort.htm)。您可以使用此参数来指定[您想要排序的语言](http://docs.oracle.com/cd/E11882_01/server.112/e10729/applocaledata.htm#i637232)。我怀疑在你的情况下它会是`POLISH`。

像这样的东西

```
select *
  from something
 order by nls_lower(name, 'NLS_SORT' = 'POLISH') 
```

[`NLS_LOWER()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions111.htm#SQLRF00677)以与普通 相同的方式返回小写字符`LOWER()`。

您也可以在会话级别执行此操作，这将更改会话期间的默认排序参数。

```
alter session set nls_sort = POLISH; 
```

如果您想*始终*使用这种类型；这是在创建数据库时在数据库级别完成的。

# c++ - 使用 QObject 属性的指针

> ID：14127438
> 
> 赞同：4
> 
> 时间：2013-01-02T18:47:54.293
> 
> 标签：c++, qt, pointers, qobject

自从我学习 Qt 以来，我一直对以下事实感到困惑：在我读过的文档和书籍中，它们使用作为 QObject 子类实例的属性的指针，例如小部件。

我知道 QObjects 会删除他们的孩子，但我们不应该避免使用指针，除非真的有必要吗？

这是一个我不使用指针的工作示例：

小部件.h 文件：

```
#include <QSlider>
#include <QLabel>
#include <QVBoxLayout>

class Widget : public QWidget
{
    Q_OBJECT

public:
    Widget(QWidget *parent = 0);

public slots:
    void change(int);
private:
    QSlider m_slider;
    QLabel m_label;
    QVBoxLayout m_layout;
}; 
```

和 Widget.cpp 文件：

```
#include "Widget.h"

Widget::Widget(QWidget *parent)
    : QWidget(parent)
    , m_slider(Qt::Horizontal)
    , m_label("0")
    , m_layout(this)
{
    m_layout.addWidget(&m_slider);
    m_layout.addWidget(&m_label);

    connect(&m_slider, SIGNAL(valueChanged(int)), this, SLOT(change(int)));
}

void Widget::change(int n){
    m_label.setText(QString::number(n));
} 
```

这里唯一的区别是我必须在 Widget.h 文件中包含标题，这会是使用指针的原因吗？

我想补充一点，我在 StackOverflow 上看到了一些类似的问题，但答案是小部件应该存在于函数调用之间，但是当将它们用作属性时，这是在这里实现的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:14:53.003

这里似乎对同一个问题进行了相当长的讨论：
[类成员：指针还是变量？](http://qt-project.org/forums/viewthread/10160)

此链接中的一些要点谈到：

*   长寿命与短寿命对象
*   堆与堆栈
*   基于对象上设置的父级保证析构函数的顺序

似乎这里的要点是没有硬性规定，而是逐案处理。由于我目前也在从 PyQt -> Qt 迁移并开始使用我的 C++，因此到目前为止，我的有限观点是我总是将指针用于作为 QObject 子类的类成员。我只是觉得我知道它们只会被 Qt parent->child 销毁过程销毁。

同样，这是一个有限的观点。我相信具有丰富 C++ 经验的人可以提供更好的答案。但我提到的链接确实包括非常有经验的 Qt 程序员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:58:09.987

也许只是使用与默认构造函数不同的构造函数？

# css - 如何验证scss

> ID：14127439
> 
> 赞同：9
> 
> 时间：2013-01-02T18:47:54.017
> 
> 标签：css, ruby, validation, sass

我有一个 scss 文件，我使用 scss 将它编译成一个 css 文件。scss to css编译器检测到scss文件中的错误，但似乎太宽容了。也就是说，即使我错误地输入了样式属性的名称，它也可以毫无错误地编译。当scss文件中的样式属性在css3或导入的功能中不存在时，有没有办法让它返回错误？也有可能为样式写入无效值，但我知道这更复杂，我不是要求这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:45:39.947

[W3C CSS Validator](http://jigsaw.w3.org/css-validator/)周围有一个[Ruby 包装](https://github.com/alexdunae/w3c_validators)器，因此您可以编写一个简单的脚本来检查来自 scss 的输出 css。

我还发现[了与](https://github.com/chriseppstein/compass-validator)[Compass](http://compass-style.org/)的集成，因此如果您使用[Compass](http://compass-style.org/)编译您的 scss，它可能会有所帮助。我没有使用过它，所以我不确定它是如何工作的，但我对[W3C CSS Validator](http://jigsaw.w3.org/css-validator/)有很好的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-25T10:26:01.497

我建议，如果你想要一个内置到 NodeJS 开发中的验证器（可能还有其他用于不同语言的验证器，但这是我发现的），scss-validator：[https ://www.npmjs.com/package/scss -验证器](https://www.npmjs.com/package/scss-validator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-08T15:06:41.057

我真的很想以某种方式将相同的东西内置到 Rails 或我的开发环境中。

我发现这个在线工具非常有用（它会发现错误，但也会提示我正在做的可能导致意外结果的事情）

[http://beautifytools.com/scss-compiler.php](http://beautifytools.com/scss-compiler.php)

将粘贴`.scss`文件复制到左侧，然后单击“编译 SCSS”

# java - 使用具有未指定数量元素的一维 Java 数组时遇到问题

> ID：14127443
> 
> 赞同：-5
> 
> 时间：2013-01-02T18:48:16.093
> 
> 标签：java, arrays

我有一个一维 Java 数组：

```
 //Array with the thread of each client
    private Client_Procesor_Thread Client_Thread_List[]; 
```

当我想使用它时，我会这样做：

```
 Client_Thread_List[Next_Client] = new Client_Procesor_Thread(); 
```

您可能会注意到，在创建线程之前，我必须像这样创建数组：

```
 Client_Thread_List = new Client_Procesor_Thread[15]; 
```

但是，我无法创建数组，因为我不知道我将拥有多少个线程。这是一个服务器，我不知道我会有多少客户。

我知道在 Visual Basic.NET 等其他语言中，例如，我可以创建一个包含 15 个元素的数组，然后在需要时将其调整为更大的数组，而不会丢失存储的元素。

¿ 我将如何继续使用 Java？

谢谢大家，比特币

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T18:50:23.697

如果您需要一种*增长数组，请使用`ArrayList`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:08:48.420

```
private List<Client_Thread> client_Thread_List = new LinkedList<Client_Thread>(); 
```

see [http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html) example [http://www.cs.washington.edu/education/courses/cse341/06au/java/LinkedListExample.java](http://www.cs.washington.edu/education/courses/cse341/06au/java/LinkedListExample.java)

# c - 将 32 位 ARM 代码迁移到 64 位开发环境

> ID：14127452
> 
> 赞同：0
> 
> 时间：2013-01-02T18:49:45.577
> 
> 标签：c, linux, arm

我有一个基于 GTK 的 ARM 项目，该项目历史上是在 32 位 Ubuntu 虚拟机上开发的。目前，我正在尝试将其迁移到一个新的 64 位 Arch Linux 开发盒。我不确定如何处理我采取的两条路线产生的错误。

如果我告诉链接器使用 /usr/lib 编译将停止告诉我

```
/usr/lib/librt.so: file not recognized: File format not recognized 
```

因此，假设这是一个 32 位与 64 位的问题，我将 gcc 指向 /usr/lib32 并收到以下内容

```
/usr/bin/arm-linux-gnueabi - ld: skipping incompatible /usr/lib32/librt.so when searching for -lrt
/usr/bin/arm-linux-gnueabi - ld: skipping incompatible /usr/lib32/librt.a when searching for -lrt
/usr/bin/arm-linux-gnueabi - ld: skipping incompatible /usr/lib32/libpthread.so when searching for -lpthread
/usr/bin/arm-linux-gnueabi - ld: skipping incompatible /usr/lib32/libpthread.a when searching for -lpthread
/usr/bin/arm-linux-gnueabi - ld: cannot find -lz
/usr/bin/arm-linux-gnueabi - ld: cannot find -lsqlite3
/usr/bin/arm-linux-gnueabi - ld: cannot find -lusb-1.0
/usr/bin/arm-linux-gnueabi - ld: cannot find -lssl 
```

等等。我尝试从 Arch 存储库安装 lib32-sqlite 无济于事。

对于任何一个目录，我都会多次收到以下警告，我也不确定

```
/usr/include/pthread.h:672:6: warning: '__regparm__' attribute directive ignored [-Wattributes]
/usr/include/pthread.h:684:3: warning: '__regparm__' attribute directive ignored [-Wattributes]
/usr/include/pthread.h:729:6: warning: '__regparm__' attribute directive ignored [-Wattributes] 
```

我不确定这是否只是针对最新库编译的过时代码的工件或其他东西，但这是我想在不久之后解决的问题。

编辑：我的目标架构是 ARM926EJ-S / i.MX27

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T19:05:16.197

我将冒险猜测并说您的交叉编译环境没有引用正确的库/头文件。也就是说，他们引用的是构建库/头文件（i586？），而不是 ARM 的交叉编译库/头文件`arm-linux-gnueabi`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:52:59.230

您不能编译 64 位程序然后与 lib32 库链接。

您有 2 个解决方案：

*   生成与 lib32 链接的 32 位程序
*   生成与 64 位库链接的完全 64 位程序

# ios - 如何将“method_getImplementation”和“method_setImplementation”移植到 MonoTouch？

> ID：14127453
> 
> 赞同：6
> 
> 时间：2013-01-02T18:49:49.827
> 
> 标签：ios, xamarin.ios

从我的问题来看：[没有子类化 UIView 或 UIViewController：如果添加了子视图，是否可以捕获？](https://stackoverflow.com/questions/14124810/without-subclassing-a-uiview-or-uiviewcontroller-possible-to-catch-if-a-subview/14126040#14126040)

我想知道如何将代码从答案移植到 MonoTouch。它基本上是用一个新方法替换一个方法，然后在没有子类化的情况下调用旧方法。是否有可能让这个指针在 MonoTouch 中工作？

```
//Makes views announce their change of superviews
Method method = class_getInstanceMethod([UIView class], @selector(willMoveToSuperview:));
IMP originalImp = method_getImplementation(method);

void (^block)(id, UIView*) = ^(id _self, UIView* superview) {
    [_self willChangeValueForKey:@"superview"];
    originalImp(_self, @selector(willMoveToSuperview:), superview);
    [_self didChangeValueForKey:@"superview"];
};

IMP newImp = imp_implementationWithBlock((__bridge void*)block);
method_setImplementation(method, newImp); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T03:08:18.863

对于我们来说，这看起来是一个很好的候选者，可以提供一个通用的机制来劫持方法。这是一个纯 C# 代码的实现，您可以同时使用：

```
 [DllImport ("/usr/lib/libobjc.dylib")]
    extern static IntPtr class_getInstanceMethod (IntPtr classHandle, IntPtr Selector);
    [DllImport ("/usr/lib/libobjc.dylib")]
    extern static Func<IntPtr,IntPtr,IntPtr> method_getImplementation (IntPtr method);
    [DllImport ("/usr/lib/libobjc.dylib")]
    extern static IntPtr imp_implementationWithBlock (ref BlockLiteral block);
    [DllImport ("/usr/lib/libobjc.dylib")]
    extern static void method_setImplementation (IntPtr method, IntPtr imp);

    static Func<IntPtr,IntPtr,IntPtr> original_impl;

    void HijackWillMoveToSuperView ()
    {
        var method = class_getInstanceMethod (new UIView ().ClassHandle, new Selector ("willMoveToSuperview:").Handle);
        original_impl = method_getImplementation (method);
        var block_value = new BlockLiteral ();
        CaptureDelegate d = MyCapture;
        block_value.SetupBlock (d, null);
        var imp = imp_implementationWithBlock (ref block_value);
        method_setImplementation (method, imp);
    }

    delegate void CaptureDelegate (IntPtr block, IntPtr self, IntPtr uiView);

    [MonoPInvokeCallback (typeof (CaptureDelegate))]
    static void MyCapture (IntPtr block, IntPtr self, IntPtr uiView)
    {
        Console.WriteLine ("Moving to: {0}", Runtime.GetNSObject (uiView));
        original_impl (self, uiView);
        Console.WriteLine ("Added");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-17T20:07:23.673

我必须对 Miguel 的示例进行以下更改才能使其在设备上运行。

```
 [DllImport("/usr/lib/libobjc.dylib")]
        extern static IntPtr class_getInstanceMethod(IntPtr classHandle, IntPtr Selector);

        [DllImport("/usr/lib/libobjc.dylib")]
        extern static IntPtr method_getImplementation(IntPtr method);

        [DllImport("/usr/lib/libobjc.dylib")]
        extern static IntPtr imp_implementationWithBlock(ref BlockLiteral block);

        [DllImport("/usr/lib/libobjc.dylib")]
        extern static void method_setImplementation(IntPtr method, IntPtr imp);

        static IntPtr original_impl;

        [MonoNativeFunctionWrapper]
        public delegate void OriginalDelegate(IntPtr one,IntPtr two);

        static void HijackWillMoveToSuperView()
        {
            var method = class_getInstanceMethod(new UIView().ClassHandle, new Selector("willMoveToSuperview:").Handle);
            original_impl = method_getImplementation(method);
            var block_value = new BlockLiteral();
            CaptureDelegate d = MyCapture;
            block_value.SetupBlock(d, null);
            var imp = imp_implementationWithBlock(ref block_value);
            method_setImplementation(method, imp);
        }

        delegate void CaptureDelegate(IntPtr block,IntPtr self,IntPtr uiView);

        [MonoPInvokeCallback(typeof(CaptureDelegate))]
        static void MyCapture(IntPtr block, IntPtr self, IntPtr uiView)
        {
            Console.WriteLine("Moving to: {0}", Runtime.GetNSObject(uiView));

            var del = (OriginalDelegate) Marshal.GetDelegateForFunctionPointer (original_impl,typeof(OriginalDelegate));
            del (self, uiView);

            Console.WriteLine("Added");
        } 
```

# linq-to-sql - LINQ ChangeConflictException 问题/自定义属性

> ID：14127454
> 
> 赞同：0
> 
> 时间：2013-01-02T18:49:51.887
> 
> 标签：linq-to-sql, optimistic-concurrency

我有一个包含项目任务的数据库表。每个任务都基于一个任务模板，该模板存储在同一个表中。除非另有说明，否则任务从其关联的任务模板记录继承属性/字段。我已经在这个表的数据模型中创建了一个自引用关联——TaskTemplateId 指向模板的 ID。

我有很多问题。即使我没有更改表中的任何数据，我也会在更新时收到 ChangeConflicException。

从理论上讲，我是否以正确的方式解决这个问题？有没有人遇到过这两个问题？

> 列名 X 在结果列列表中出现多次。

这是一个示例属性：

```
 public int NumberOfUnits
    {
        get
        {
            //If this is a task template return the actual database value
            if (IsTaskTemplate)
                return NumberOfUnitsPrivate;
            //If there is a task template override and NumberOfUnits has a value return that
            else if (IsTemplateOverride && NumberOfUnitsPrivate != 0)
                return NumberOfUnitsPrivate;

            //Else return the value in the task template record.
            if (TaskTemplateRecord != null)
                return TaskTemplateRecord.NumberOfUnitsPrivate;
            return 0;
        }
        set { NumberOfUnitsPrivate = value; }
    } 
```

一些注意事项：

*   我已将此表的所有非 PK 列上的 UpdateCheck 设置为从不。

编辑：所以，这是 LINQ 发送到服务器的更新语句：

```
exec sp_executesql N'UPDATE [dbo].[ProjectTasks]
SET [NarrativeSourceTypeId] = @p0, [BillNarrative] = @p1
WHERE 0 = 1',N'@p0 nvarchar(4000),@p1 nvarchar(4000)',@p0=N'',@p1=N'' 
```

这不奇怪吗？其中 0 = 1？下面的代码是从服务器获取项目任务；它在该更新语句之后触发此代码四次。

```
exec sp_executesql N'SELECT [t0].[Id], [t0].[IsActive], [t0].[CmsMatterUno], [t0].[ProjectCategoryId], [t0].[ProjectStatusTypeId], [t0].[ProjectTemplateId], [t0].[Code], [t0].[Description], [t0].[StartDate], [t0].[FinishDate], [t0].[CreatedDate], [t0].[CreatedBy], [t0].[ModifiedDate], [t0].[ModifiedBy], [t1].[Id] AS [Id2], [t1].[IsActive] AS [IsActive2], [t1].[OrderBy], [t1].[ProjectTemplateId] AS [ProjectTemplateId2], [t1].[ProjectId], [t1].[ParentTaskId], [t1].[ProjectCategoryId] AS [ProjectCategoryId2], [t1].[IsTaskTemplate], [t1].[TaskTemplateId], [t1].[UnitTypeId] AS [UnitTypeIdPrivate], [t1].[DescriptionQualifierTypeId], [t1].[NarrativeSourceTypeId] AS [NarrativeSourceTypeIdPrivate], [t1].[CmsPhTaskUno] AS [CmsPhTaskUnoPrivate], [t1].[CmsBillTranUno], [t1].[Code] AS [Code2], [t1].[Description] AS [Description2], [t1].[IsPricingLevel], [t1].[IsCostingLevel], [t1].[NumberOfUnits] AS [NumberOfUnitsPrivate], [t1].[UnitPrice] AS [UnitPricePrivate], [t1].[StartDate] AS [StartDate2], [t1].[CompletionDate], [t1].[BillNarrative] AS [BillNarrativePrivate], [t1].[IsTemplateOverride], [t1].[BillingDate], [t1].[IsApprovalRequired], [t1].[IsTimeAssigned], [t1].[IsSummTimeOnBill], [t1].[IsAllowTime], [t1].[IsAllowBill], [t1].[IsAllowDisb], [t1].[CreatedDate] AS [CreatedDate2], [t1].[CreatedBy] AS [CreatedBy2], [t1].[ModifiedDate] AS [ModifiedDate2], [t1].[ModifiedBy] AS [ModifiedBy2], (
    SELECT COUNT(*)
    FROM [dbo].[ProjectTasks] AS [t2]
    WHERE [t2].[ProjectId] = [t0].[Id]
    ) AS [value]
FROM [dbo].[Projects] AS [t0]
LEFT OUTER JOIN [dbo].[ProjectTasks] AS [t1] ON [t1].[ProjectId] = [t0].[Id]
WHERE [t0].[CmsMatterUno] = @x2
ORDER BY [t0].[Id], [t1].[Id]',N'@x1 int,@x2 int',@x1=360930,@x2=536674 
```

更新语句由 UserControl 中的 LinqDataSource 触发。一切都发生在标记中，除了自定义属性，其示例位于顶部。

一如既往，感谢您的帮助。

# .net - 如何删除 cecil 指令

> ID：14127456
> 
> 赞同：1
> 
> 时间：2013-01-02T18:49:56.597
> 
> 标签：.net, mono, mono.cecil

我有这个方法：

```
public int Test()
{
    ExternalClass cls = new ExternalClass();
    return cls.ExternalMethod();
} 
```

我需要使用 IL Injection 对其进行更改，以便可以将类型作为参数传递并删除直接对象创建，如下所示：

```
public int Test(ExternalClass cls)
{

    return cls.ExternalMethod();
} 
```

我可以使用 <>.Parameters.Add( ***_* ___** ) 添加额外的参数并生成新的程序集。

问题是我无法删除创建新对象的指令。下面是我用来删除它的行。

```
ILProcessor ilProcessor = <<MethodDefinition>>.Body.GetILProcessor();
ilProcessor.Remove(<<newobj instruction>>); 
```

一旦我尝试调用修改后的汇编方法，如下所示，它会抛出错误“公共语言运行时检测到无效程序”。

```
ExternalClass ext = new ExternalClass();
int i = prg1.Test(ext); 
```

我知道我可能也需要处理与内存分配相关的事情。如果有人能够提供要在此处实施的其他步骤，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T18:55:39.487

您不能只删除`newobj`指令；正如运行时告诉你的那样，你留下了一个无效的程序。以下是原始方法如何转换为 IL 的大致过程：

```
public Int32 Test()
{
    .local ExternalClass 0;

    // ExternalClass cls = new ExternalClass();
    newobj class ExternalClass();
    stloc.0;

    // return cls.ExternalMethod();
    ldloc.0;
    callvirt Int32 class ExternalClass:ExternalMethod();
    ret;
} 
```

如果仅删除`newobj`指令，则该`stloc`指令在堆栈中将没有任何内容可以存储在本地。你需要把方法变成这样：

```
public Int32 Test(ExternalClass cls)
{
    // return cls.ExternalMethod();
    ldarg.1;
    callvirt Int32 class ExternalClass:ExternalMethod();
    ret;
} 
```

所以你需要做三件事：

1.  将参数添加到方法签名中，
2.  删除*包括*`ldloc`指令在内的所有内容。
3.  `ldarg.1`在方法的开头插入一条指令。

或者，您也可以删除`ExternalClass`本地。（这将被 JIT 编译器优化掉，但会使 IL 映像膨胀。）

# xcode - 有没有办法确定代码是通过 Xcode 还是通过 XCodeBuild 编译的？

> ID：14127460
> 
> 赞同：1
> 
> 时间：2013-01-02T18:50:29.363
> 
> 标签：xcode, xcodebuild

我有一小段条件代码（用于测试目的），我希望根据代码是否通过 Xcode 构建到是否通过 XCodeBuild 构建（即代码是否由开发人员构建）来改变行为而不是由构建系统构建）。

有没有办法确定这一点？

# exception - 创建了 HtmlHelper 扩展，但收到“不允许子操作执行重定向操作”异常

> ID：14127462
> 
> 赞同：0
> 
> 时间：2013-01-02T18:50:34.043
> 
> 标签：exception, asp.net-mvc-4, extension-methods

我创建了一个 HtmlHelper 扩展调用 ActionButton，它将吐出一个 jQuery 按钮，该按钮将调用一个动作而不是使用 ActionLink。但是，我在下一行的扩展方法中收到了一个异常（它只是一个代码示例，会引发我看到的异常）：

```
 MvcHtmlString str = helper.Action(actionName, controllerName, routeValues); 
```

这是完整的方法，但使用 UrlHelper 创建操作 URL（对我有用）。我也有`using System.Web.Mvc`和`using System.Web.Mvc.Html`。

```
 public static HtmlString ActionButton(this HtmlHelper helper, string linkText, string actionName, string controllerName, object routeValues)
    {
        TagBuilder tag = new TagBuilder("a");
        UrlHelper urlHelper = new UrlHelper(helper.ViewContext.RequestContext);
        tag.MergeAttribute("href", urlHelper.Action(actionName, controllerName, routeValues));

        // the next line causes the exception, not really being used other than to 
        // raise the exception and illustrate the call I was making
        MvcHtmlString str = helper.Action(actionName, controllerName, routeValues);

        tag.MergeAttribute("rel", "external");
        tag.MergeAttribute("data-role", "button");
        tag.MergeAttribute("data-mini", "true");
        tag.MergeAttribute("data-inline", "true");
        tag.MergeAttribute("data-icon", "arrow-r");
        tag.MergeAttribute("data-iconpos", "right");
        tag.MergeAttribute("data-theme", "b");

        tag.SetInnerText(linkText);
        HtmlString html = new HtmlString(tag.ToString(TagRenderMode.Normal));
        return html;
    } 
```

我想知道为什么调用`helper.Action(...)`会引发异常。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:53:21.467

这是因为你打电话`helper.Action`（那是`HtmlHelper`）而不是`urlHelper.Action`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:53:26.543

`HtmlHelper.Action()`将立即调用您传递的操作方法，并返回其结果。
那不是你想要的。

You want `UrlHelper.Action()`，它返回操作的 URL。

# jquery - kendo AutoComplete的jquery select事件中获取Html.TextBox的ID/Name

> ID：14127468
> 
> 赞同：0
> 
> 时间：2013-01-02T18:51:13.317
> 
> 标签：jquery, asp.net-mvc-3, kendo-ui

我有一个剃须刀页面，其中有一个 Kendo AutoComplete 控件，并且在其更改事件中我需要得到两件事：

1.  该剑道自动完成控件的 ID
2.  最近的文本框 ID

因为会有这两个控件的克隆。

这是我的代码：

```
function autocomplete_select(e) {
      var dataItem = this.dataItem(e.item.index());
      var txtbx = $(this).closest("input[type='text']");
      alert("Name==" + txtbx.attr('name'));
      alert("ID==" + txtbx.attr('id'));
      var tmp = $(this).closest("div.mf_form_field").find("input[type='text']").attr('id');
      alert(tmp);
      }

@(Html.Kendo().AutoComplete()
 .Name("ACDD")
 .BindTo((IEnumerable<String>)strActionCodes)
 .Events(e => e.Select("autocomplete_select")))
  </div>
<div>@Html.Label("Action Value")</div>
<div>@Html.TextBox("Value",null, new { style = "width : 105px"})</div> 
```

这里没有返回文本框 ID 的警报，我无法获得剑道自动完成的名称/ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:51:56.703

自动完成的 id 是这样检索的：

```
function onChange(e){
    alert(this.element.attr('id'))
} 
```

可以像这样检索最接近文本框的（在您的情况下不是**最接近的**，而是**下一个**- 检查 jQuery 文档以了解这两者之间的区别）。

```
function onChange(e){
    alert(this.wrapper.next('input[type="text"]').attr('id'))
} 
```

# ruby - RoR 教程的未定义方法“主体”错误

> ID：14127470
> 
> 赞同：0
> 
> 时间：2013-01-02T18:51:20.870
> 
> 标签：ruby, methods, comments

ROR 新手，正在阅读本教程：[http](http://guides.rubyonrails.org/getting_started.html) : //guides.rubyonrails.org/getting_started.html，在添加评论部分时，我在 app/views/posts/show.html 文件中收到“未定义方法”的错误'body'。这是确切的错误：

```
undefined method `body' for #<Comment:0x4157430>

Extracted source (around line #37):

34:     </div>
35:     <div class="field">
36:         <%= f.label :body %><br />
37:         <%= f.text_area :body %>
38:     </div>
39:     <div class="actions">
40:         <%= f.submit %> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:02:34.737

您收到此异常是因为 Comment 没有 body 属性。这可能是由于以下原因之一：

*   您创建的数据库表 Comment 没有名为“body”的列
*   您没有运行迁移来创建表 Comment
*   您没有运行迁移以在正确的数据库上创建表 Comment

# c# - 使用 MailMessage 的多部分电子邮件

> ID：14127475
> 
> 赞同：6
> 
> 时间：2013-01-02T18:51:43.353
> 
> 标签：c#, email, mime-types, content-type

我有一封要从 C# 发送的电子邮件，其中包含一个 vCalendar 和一个 HTML 正文部分。

我创建了一个`MailMessage`，并设置了 2 个备用视图：

```
AlternateView avCal  = new AlternateView("VCALENDAR:...", null, "text/calendar");
AlternateView avHtml = new AlternateView("<p>some html</p>", null, "text/html");

mailMessage.AlternateViews.Add(avCal);
mailMessage.AlternateViews.Add(avHtml); 
```

这给了我一条带有`Content-Type`of的消息`multipart/alternative`。

这将在我的网络邮件上显示日历约会和 HTML 部分，但不显示 Outlook。

如何显示具有不同内容类型的两个不同部分？我正在寻找的更像是`Content-Type: multipart/mixed`两个“替代视图”都出现的地方。

**编辑**

当我使用@Chris Haas 的方法时，我很接近但没有呈现标记。好像无视`MailMessage.IsBodyHtml = true`

![html不显示](../Images/1aee0a8c7a82c6c7ea26de0b45010838.png)

不太确定如何在 Outlook 中查看原始内容，但只是标题...

```
Return-Path: <*****@****.com>
X-Footer: ZWJyaWRnZS5jb20=
Received: from localhost ([127.0.0.1])
    by mail.foo.com
    for *****@****.com;
    Wed, 2 Jan 2013 17:20:14 -0500
MIME-Version: 1.0
From: "George Washington" <*****@****.com>
To: "George Washington" <*****@****.com>
Date: 2 Jan 2013 17:29:14 -0500
Subject: To-Do: test test - test
Content-Type: multipart/mixed; 
boundary=--boundary_0_4fbc08b4-2198-45b1-bf2e-9659179aad84 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T20:18:03.607

尝试将 VCALENDAR 作为属性设置`Attachment`为：`Inline``true`

```
using (MailMessage mm = new MailMessage("...", "...", "Subject here", "Body here")) //Pick whatever constructor you want
{
    using (Attachment a = new Attachment("c:\\test.ics", "text/calendar")) //Either load from disk or use a MemoryStream bound to the bytes of a String
    {
        a.Name = "meeting.ics";                         //Filename, possibly not required
        a.ContentDisposition.Inline = true;             //Mark as inline
        mm.Attachments.Add(a);                          //Add it to the message
        using (SmtpClient s = new SmtpClient("..."))    //Send using normal
        {
            s.Send(mm);
        }
    }
} 
```

**编辑**

好的，我已将代码更新为不依赖文件，因此我们使用的是完全相同的 ICS 文件。更新顶部的字符串和`SmtpClient`必要时的字符串，否则保持代码不变。ICS 来自[本页](http://blogs.msdn.com/b/webdav_101/archive/2008/02/26/building-vcalendar-and-ical-is-not-supported-by-ms.aspx)的中间。

```
 String mailFrom = "xyz@example.com";
  String mailTo = "xyz@example.com";
  String mailSubject = "This is a test";
  String mailBody = "<p><strong>Hello</strong> world</p>";
  String smtpServer = "mail.example.com";

  using (var mm = new MailMessage()) //Pick whatever constructor you want
  {
      mm.To.Add(mailFrom);
      mm.From = new MailAddress(mailTo);
      mm.Subject = mailSubject;
      mm.Body = mailBody;
      mm.IsBodyHtml = true;
      String t = "BEGIN:VCALENDAR\r\n" +
                 "METHOD:REQUEST\r\n" +
                 "BEGIN:VEVENT\r\n" +
                 "DTSTAMP:20080325T202857Z\r\n" +
                 "DTSTART:20080325T200000Z\r\n" +
                 "DTEND:20080325T220000Z\r\n" +
                 "SUMMARY:Test meeting request\r\n" +
                 "UID:040000008200E00074C5B7101A82E00800000000B2BB07349575C80100000000000000001000000019BF8D0149C50643A81325C54140C093\r\n" +
                 "ATTENDEE;ROLE=REQ-PARTICIPANT;PARTSTAT=NEEDS-ACTION;RSVP=TRUE;CN=\"Dan\":MAIL\r\n" +
                 " TO:myuser@mydom.com\r\n" +
                 "ORGANIZER;CN=\"Administrator\":MAILTO:administrator@mydom.com\r\n" +
                 "LOCATION: Here\r\n" +
                 "DESCRIPTION:Test Request\r\n" +
                 "SEQUENCE:0\r\n" +
                 "PRIORITY:5\r\n" +
                 "CLASS:\r\n" +
                 "CREATED:20080321T190958Z\r\n" +
                 "STATUS:CONFIRMED\r\n" +
                 "TRANSP:OPAQUE\r\n" +
                 "END:VEVENT\r\n" +
                 "END:VCALENDAR";
      Byte[] bytes = System.Text.Encoding.ASCII.GetBytes(t);
      using (var ms = new System.IO.MemoryStream(bytes))
      {
          using (var a = new Attachment(ms, "meeting.ics", "text/calendar")) //Either load from disk or use a MemoryStream bound to the bytes of a String
          {
              a.ContentDisposition.Inline = true;             //Mark as inline
              mm.Attachments.Add(a);                          //Add it to the message
              using (SmtpClient s = new SmtpClient(smtpServer))    //Send using normal
              {
                  s.Send(mm);
              }
          }
      }

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:15:27.733

我相信您必须将 vCalendar (*.vcs) 或 iCalendar (*.ics) 文件作为附件发送，以便 Outlook 知道如何处理它。

*   [http://support.microsoft.com/kb/287625](http://support.microsoft.com/kb/287625)
*   [http://blogs.msdn.com/b/webdav_101/archive/2008/02/26/building-vcalendar-and-ical-is-not-supported-by-ms.aspx](http://blogs.msdn.com/b/webdav_101/archive/2008/02/26/building-vcalendar-and-ical-is-not-supported-by-ms.aspx)

然后收件人需要在 Outlook 中打开电子邮件并双击附件将其导入 Outlook/Exchange 日历。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T16:12:08.157

我遇到过同样的问题; 在不显示标签的情况下，我无法获得显示 HTML 的邀请。我能够用类似的东西解决这个问题（变量 f 包含所有“BEGIN：VCALENDAR”的东西）：

```
System.Net.Mime.ContentType calendarType = new System.Net.Mime.ContentType("text/calendar");
AlternateView ICSview = AlternateView.CreateAlternateViewFromString(f.ToString(), calendarType);
AlternateView HTMLV = AlternateView.CreateAlternateViewFromString(body, new System.Net.Mime.ContentType("text/html"));
MailMessage email = new MailMessage("from@example.com", "to@example.com", "subject", "body");
email.AlternateViews.Add(ICSview);
email.AlternateViews.Add(HTMLV);
SmtpClient client = new SmtpClient();
client.Send(email); 
```

我相信代码可以整理...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-20T04:33:33.027

我有同样的问题。

尝试向 MailMessage 添加两个 AlternateView，一个具有内容类型文本/日历，具有 ics 文件，一个具有内容类型文本/html，具有电子邮件正文。

为我工作:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-23T09:47:19.323

这些建议都不适合我。

到目前为止，我最接近的是附加一个带有“文本/日历”作为 MIME 类型的 MemoryStream。但是，GMail 无法识别此文件，因为它不显示 .ICS 文件中的摘要，也不允许我“添加到日历”。

但是，当我在 GMail 上将完全相同的电子邮件转发给自己（或其他人）时，GMail 会显示 .ICS 内容。我在这里疯了，试图测试不同的解决方案。

# android - 未找到 DDMS 文件错误

> ID：14127476
> 
> 赞同：9
> 
> 时间：2013-01-02T18:51:42.977
> 
> 标签：android, eclipse, sdk

我遇到了一些**`DDMS files not found...`**问题。

我通过确保在 Eclipse 中正确设置了 Android SDK 路径（在我的机器上是**C:\Program Files\Android\android-sdk ）来修复它。**

这可以在**Eclipse->Windows->Preferences->Android->SDK Location 中完成。**

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-02T13:07:07.770

根本原因：

1.  Android 可能没有安装，只有获取可能已经在 Eclipse 中完成。

2.  在eclipse windows->preferences->android中查看android安装的位置（安装路径可能不正确）。

解决方案：

1.  在 windows -> 首选项 -> android 中给出正确的 android 安装路径。

2.  如果找不到路径，最好卸载并重新安装android。

适用于 Windows 的 Android 下载链接：

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-14T06:47:16.213

你首先重新启动你的eclipse并检查它。

*   如果再次抛出相同的错误，请尝试此步骤

*   我有同样的问题并使用以下链接修复它

[未找到 DDMS 文件：SDK_HOME/tools/traceview：Eclipse](https://stackoverflow.com/questions/43094017/ddms-files-not-found-sdk-home-tools-traceview-eclipse/43147964#43147964)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T22:59:58.237

在较新版本的 android studio 中，DDMS 已被弃用，但您可以选择其他选项

[https://developer.android.com/studio/profile/monitor](https://developer.android.com/studio/profile/monitor)

引用：

> Android Device Monitor 在 Android Studio 3.1 中已弃用，并从 Android Studio 3.2 中移除。您可以通过 Android 设备监视器使用的功能已被新功能取代。下表可帮助您确定应使用哪些功能来代替这些已弃用和删除的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-20T18:45:48.173

我认为，您在*android-sdk文件夹中的文件夹**“工具”*不完整。也许，在更新您的下载损坏或没有足够的空间，更新停止。 任何。 您只能从 android sdk 下载工具。你在这里找到它： [https ://developer.android.com/studio/index.html#command-tools](https://developer.android.com/studio/index.html#command-tools)

 **并将工具*的内容复制到您的*android-sdk*文件夹中，该文件夹*工具*包含所有必要的文件和文件夹。*

# java - 如何获取 Arraylist 值并存储到另一个数组列表中

> ID：14127478
> 
> 赞同：-3
> 
> 时间：2013-01-02T18:51:51.257
> 
> 标签：java, android, android-intent

> 我知道这很愚蠢，但我遇到了这个问题。我尝试过但没有得到想要的结果，所以我问这个问题：我的问题是

场景：1

```
 ArrayList<String> f = new ArrayList<String>();
        f.add("a");
        f.add("b");
        f.add("c");

        ArrayList<String> s = new ArrayList<String>();
        s.add("a");
        s.add("a");
        s.add("a");
        s.add("b");
        s.add("b");
        s.add("b");
        s.add("c");
        s.add("c");
    s.add("c"); 
```

> 现在我想要第一个数组列表和第二个数组列表的共同值我想要的结果是：

```
ArrayList<String> temp = new ArrayList<String>();//this is temp arraylist to store but here i didt use it 
```

> ```
>  ___
>     a
>    ___
>     a
>     a
>     a
>    ___
>     b
>    ___
>     b
>     b
>     b
>    ___
>     c
>    ___
>     c
>     c
>     c 
> ```

看到这样。我怎么能解决这个朋友提前谢谢朋友。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:55:38.457

```
temp.addAll(f);
temp.addAll(s);
Collections.sort(temp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:00:10.653

```
for(int i=0;i<arraylist.size();i++){
templist.add(arraylist.get(i));
} 
```

应该这样做

# ruby-on-rails - ElasticSearch / Tire - 查询未过滤构面？

> ID：14127480
> 
> 赞同：0
> 
> 时间：2013-01-02T18:51:53.740
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我有一个附加了方面的 ElasticSearch / Tire 查询。似乎方面 a 使用全局范围，而不是查询范围和过滤器。

这是我的定义。我不确定如何限定它以使用过滤器。

```
 def self.facets_for(keyword_array, fasit, opts = {})
    keyword_array = [keyword_array] if keyword_array.is_a?(String)
    tire.search(per_page: opts[:per_page], page: opts[:page] ) do 
      query do 
        boolean { should { string '*' }}
      end
      filter :terms, :keyword => keyword_array

      facet "phrases" do terms :phrases, :size => 20 end if fasit.include?("phrases")
      facet "sentiment" do terms :sentiment end if fasit.include?("sentiment")
      facet "lang" do terms :lang end if fasit.include?("lang")
      facet "provider" do terms :provider end if fasit.include?("provider")

    end # tire search
  end 
```

现在，这将返回范围内“全局”的方面，即它们没有被过滤器过滤（或者如果有更复杂的查询，则查询）。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:00:21.363

方面默认*情况*下由发出的查询绑定（限制）：请参阅[轮胎集成测试用例](https://github.com/karmi/tire/blob/master/test/integration/facets_test.rb#L11-L23)。

相反，过滤器*不*限制方面，使“分面导航”成为可能（再次参见[集成测试用例](https://github.com/karmi/tire/blob/master/test/integration/filters_test.rb#L59-L69)）。

请注意，在您的示例中，您的查询实际上是一个`match_all`查询，因此不能限制方面。

* * *

在 Ruby 方面，一个更安全的结构`keyword_array`是：

```
keyword_array = Array(keyword_array) 
```

# android - 将三星 Galaxy Tab 7'' 视为手机？

> ID：14127483
> 
> 赞同：0
> 
> 时间：2013-01-02T18:52:01.900
> 
> 标签：android

在 out 项目中，我们有一堆针对各种设备尺寸和密度的自定义样式。一个问题是三星 Galaxy 从`large-hdpi`文件夹中挑选样式，看起来很丑。此文件夹中的样式确实针对 Nexus 7 或类似设备。

所以问题是，我将如何为这个特定的设备应用一个特定的样式（我可以为这个选项卡创建一个单独的样式）？我知道如何检测我们的应用程序在其上运行，但不确定在这种情况下是否可以使用特定样式。

谢谢。

# ruby - 我无法从 Nokogiri 解析的字符串中删除空格

> ID：14127484
> 
> 赞同：7
> 
> 时间：2013-01-02T18:52:01.447
> 
> 标签：ruby, nokogiri, whitespace, mechanize, mechanize-ruby

我无法从字符串中删除空格。

我的 HTML 是：

```
<p class='your-price'>
Cena pro Vás: <strong>139&nbsp;<small>Kč</small></strong>
</p> 
```

我的代码是：

```
#encoding: utf-8
require 'rubygems'
require 'mechanize'

agent = Mechanize.new
site  = agent.get("http://www.astratex.cz/podlozky-pod-raminka/doplnky")
price = site.search("//p[@class='your-price']/strong/text()")

val = price.first.text  => "139 "
val.strip               => "139 "
val.gsub(" ", "")       => "139 " 
```

`gsub`,`strip`等不工作。为什么，我该如何解决这个问题？

```
val.class      => String
val.dump       => "\"139\\u{a0}\""      !
val.encoding   => #<Encoding:UTF-8>

__ENCODING__               => #<Encoding:UTF-8>
Encoding.default_external  => #<Encoding:UTF-8> 
```

我使用的是 Ruby 1.9.3，所以 Unicode 应该不是问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-02T19:24:35.343

`strip`仅删除 ASCII 空格，而您在此处获得的字符是 Unicode 不间断空格。

删除角色很容易。您可以`gsub`通过提供带有字符代码的正则表达式来使用：

```
gsub(/\u00a0/, '') 
```

你也可以打电话

```
gsub(/[[:space:]]/, '') 
```

删除所有 Unicode 空格。有关详细信息，请查看[Regexp 文档](http://www.ruby-doc.org/core-1.9.3/Regexp.html#label-Character+Classes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-14T02:08:15.943

如果我想删除不间断空格`"\u00A0"`AKA `&nbsp;`，我会执行以下操作：

```
require 'nokogiri'

doc = Nokogiri::HTML("&nbsp;")

s = doc.text # => " "

# s is the NBSP
s.ord.to_s(16)                   # => "a0"

# and here's the translate changing the NBSP to a SPACE
s.tr("\u00A0", ' ').ord.to_s(16) # => "20" 
```

所以`tr("\u00A0", ' ')`让你到达你想去的地方，在这一点上，NBSP 现在是一个空间：

[`tr`](https://ruby-doc.org/core-2.7.0/String.html#method-i-tr)非常快速且易于使用。

`&nbsp;`另一种方法是在从 HTML 中提取实际编码字符“”之前对其进行预处理。这是简化的，但它适用于整个 HTML 文件以及字符串中的单个实体：

```
s = "&nbsp;"

s.gsub('&nbsp;', ' ') # => " " 
```

对目标使用固定字符串比使用正则表达式更快：

```
s = "&nbsp;" * 10000

require 'fruity'

compare do
  fixed { s.gsub('&nbsp;', ' ') }
  regex { s.gsub(/&nbsp;/, ' ') }
 end

# >> Running each test 4 times. Test will take about 1 second.
# >> fixed is faster than regex by 2x ± 0.1 
```

如果您需要正则表达式的功能，它们会很有用，但它们会大大降低代码速度。

# c++ - 从队列中删除 unique_ptr

> ID：14127487
> 
> 赞同：60
> 
> 时间：2013-01-02T18:52:13.547
> 
> 标签：c++, c++11, unique-ptr

我试图弄清楚如何/是否可以`unique_ptr`在`queue`.

```
// create queue
std::queue<std::unique_ptr<int>> q;

// add element
std::unique_ptr<int> p (new int{123});
q.push(std::move(p));

// try to grab the element
auto p2 = foo_queue.front();
q.pop(); 
```

我明白为什么上面的代码不起作用。由于`front`&`pop`是 2 个单独的步骤，因此无法移动元素。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-02T18:55:03.673

您应该明确表示要将*指针*移出*队列*。像这样：

```
std::unique_ptr<int> p2 = std::move(q.front());
q.pop(); 
```

# android - Android：将背景颜色状态列表设置为 ListActivitiy

> ID：14127488
> 
> 赞同：2
> 
> 时间：2013-01-02T18:52:17.393
> 
> 标签：android, colors, android-listview

我有一个 Activity `extends ListActivity`。

ListView 使用默认主题的颜色。如何将我自己的颜色状态列表资源设置为 ListView？

我试过这个`onCreate()`：

```
getListView().setBackgroundResource(R.drawable.background_listview); 
```

这是 background_listview

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true"
          android:color="#ff000000"/> <!-- pressed -->
    <item android:state_focused="true"
          android:color="#ff000000"/> <!-- focused -->
    <item android:color="#ff000000"/> <!-- default -->
</selector> 
```

但我只得到错误

```
Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #4: <item> tag
requires a 'drawable' attribute or child tag defining a drawable. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:57:29.917

您必须创建自己的自定义适配器，该适配器将从 ListAdapter 扩展，并在覆盖的 getView() 方法中为每个列表项膨胀您的自定义布局。在此布局中，您应该将选择器设置为背景。实际上你的选择器看起来不错。

**UDPATE：**

看看这个简单的代码：

**活动：**

```
public class YourActivity extends Activity {
    private CustomAdapter customAdapter;
    private ArrayList<ExampleObject> listObjects;
    private ListView listView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_layout);

        listView = (ListView) findViewById(R.id.activity_listview);
        listObjects = new ArrayList<ExampleObjects>();
        customAdapter = new CustomAdapter(this, R.layout.list_item, listObjects);
        listView.setAdapter(customAdapter);
    } 
```

**适配器：**

```
public class CustomAdapter extends ArrayAdapter<ExampleObject> {

    private LayoutInflater inflater;

    public NoteAdapter(Context context, int textViewResourceId, List<ExampleObject> objects) {
        super(context, textViewResourceId, objects);
        inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        return inflater.inflate(R.layout.list_item, parent, false);
    }
} 
```

**你的 list_item.xml ：**

```
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
    android:background="@drawable/your_selector">

</RelativeLayout> 
```

我希望，它会对你有所帮助。可能是我犯了错误，因为我编写了没有编译器的代码。

**再次更新：**

对于您的情况更改`android:color="#ff000000"`为`android:drawable="#ff000000"`. 我希望这会有所帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:38:54.473

无需创建自己的，但在选择器中`Adapter`换掉并确保使用正确的方法进行设置。`android:color``android:drawable`

*   [`setSelector(int)`](http://developer.android.com/reference/android/widget/AbsListView.html#setSelector%28int%29)

因此，不要将选择器设置为 的背景`ListView`，而是按如下方式提供它，以便资源在 中的项目上工作`ListView`：

```
getListView().setSelector(R.drawable.background_listview); 
```

# ios5 - 情节提要中的标签栏，带有重用的 ViewController IOS5

> ID：14127490
> 
> 赞同：2
> 
> 时间：2013-01-02T18:52:19.437
> 
> 标签：ios5, tabs, storyboard

我的程序由带有 5 个标签的标签栏组成。选项卡 1、2 和 3 的用户界面是相同的，唯一的区别在于内容表示的逻辑，例如 new、top ... 我在情节提要中有一个 ViewController 链，我的问题是如何重用我的 ViewController？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:54:28.563

您想重用视图控制器代码文件 .m 和 .h 还是希望重用具有 UI 的情节提要对象？

重用代码很容易实现。每个故事板对象都可以与一个自定义类相关联。它在身份右侧的对象检查器上。您可以将相同的视图控制器类分配给一个或多个故事板对象 - 允许您重用您的代码。

如果您想重用您在情节提要中创建的视图布局并重用相同的情节提要但具有不同的视图控制器类 - 以管理不同的功能 - 目前是不可能的。

一个潜在的解决方法是通过添加 xib 文件并将用户界面放入其中来定义自定义 UIView。然后创建一个自定义 UIView 子类并分配它。然后在您的故事板中，您可以初始化自定义视图并将其添加为子视图。您将引用自定义类来管理 UI。

除非您的 UI 非常复杂，否则通常更容易在单独的故事板上重新创建 UI 并为它们分配适当的视图控制器。您可以使用 cmd-d 复制情节提要，或者简单地复制和粘贴。您应该在将 UI 对象连接到任何代码之前执行此操作，因为有时复制和粘贴会继承旧的引用。

因此，设置您的标签栏控制器，将单独的导航控制器连接到每个标签，然后将视图控制器（视图或表格视图或页面控制器等）作为根视图连接到每个导航控制器。然后设置您的 UI，然后分配您的自定义子类，然后将 UI 连接到子类中的属性。请记住，您可以跨故事板中的多个视图控制器重用您的子类，因为每个故事板都会创建该子类的新实例。您可能只需要一些额外的逻辑来正确管理每个选项卡功能上的内容。

好吧，没有代码，只是我的 .02 新年快乐。

# php - usort array of arrays - 按字母顺序列出歌曲

> ID：14127492
> 
> 赞同：0
> 
> 时间：2013-01-02T18:52:26.457
> 
> 标签：php, sorting, usort

所以我有一组我写的函数，它们将采用下面的数组并按字母顺序对所有歌曲进行排序。问题是它所做的只是按照他们在数组中的相同顺序吐出艺术家的歌曲。

**功能**

```
function arraySort($a, $b){
    return $a['title'] > $b['title'];
}

function sortSongs($artist){
    $count = count($artist);
    if($count == 2){
        foreach($artist as $album=>$trackListing){
            sortSongs($artist[$album]);
        }
    }else{
       foreach($artist as $key=>&$value){
           usort($artist[$key], 'arraySort');
           print_r($artist);
       }
    }

}

sortSongs($music['Creed']); 
```

**阵列**

```
$music = array(
    'Creed' => array(
        'Human Clay' => array(
            array(
                'title' => 'Are You Ready'
            ),
            array(
                'title' => 'What If'
            ),
            array(
                'title' => 'Beautiful'
            ),
            array(
                'title' => 'Say I'
            ),
        ),
        'Full Circle' => array(
            array(
                'title' => 'Overcome'
            ),
            array(
                'title' => 'Bread of Shame'
            ),
            array(
                'title' => 'A Thousand Faces'
            ),
            array(
                'title' => 'Suddenly'
            ),
            array(
                'title' => 'Rain'
            ),
            array(
                'title' => 'Away in Silence'
            ),
        ),
    ), 
); 
```

**注意：**出于阅读目的，我缩短了数组。

所以我所做的只是说，如果我传入的艺术家有 2 张专辑，那么我们将专辑名称传入，然后在该专辑的歌曲上使用 usort ......我得到的只是与我完全相同的数组向您展示，未分类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:12:34.153

这是非常疯狂的代码。但是由于您有这么多嵌套数组，因此如果不遍历所有内容，我真的看不到更好的方法。一探究竟。理想情况下，你可以从中得到你想要的。如果你花更多的时间在这个概念上，你可以制作一些非常好的 array_walk 函数或类似的函数来更整洁地完成工作。

主要功能：

[`natsort`](http://php.net/natsort)

[`ksort`](http://php.net/ksort)

**PHP**

```
arraySort('Creed', $music);
echo '<pre>';
print_r($music);
echo '</pre>';

function arraySort($artist, &$music) {
    // Validate we have an array
    if(is_array($music[$artist])) {
        // Sort the albums the best we can (natsort not natually available for keys)
        ksort($music[$artist]);
        // Loop through the artists albums
        foreach($music[$artist] as $album_name => $album) {
            // Loop through the songs
            foreach($album as $songs)
            {
                // Let's build a new helper array of songs
                $new_array = array();
                foreach($music[$artist][$album_name] as $title)
                {
                    $new_array[] = $title['title'];
                }
                // Natural sort the songs
                natsort($new_array);

                // Reset the Songs array
                $music[$artist][$album_name] = array();

                // Replace the songs as they're sorted back into the music array
                foreach($new_array as $stitle)
                {
                    $music[$artist][$album_name][] = array('title' => $stitle);
                }
            }
        }
    }
} 
```

**输出**

```
Array
(
    [Creed] => Array
        (
            [Full Circle] => Array
                (
                    [0] => Array
                        (
                            [title] => A Thousand Faces
                        )

                    [1] => Array
                        (
                            [title] => Away in Silence
                        )

                    [2] => Array
                        (
                            [title] => Bread of Shame
                        )

                    [3] => Array
                        (
                            [title] => Overcome
                        )

                    [4] => Array
                        (
                            [title] => Rain
                        )

                    [5] => Array
                        (
                            [title] => Suddenly
                        )

                )

            [Human Clay] => Array
                (
                    [0] => Array
                        (
                            [title] => Are You Ready
                        )

                    [1] => Array
                        (
                            [title] => Beautiful
                        )

                    [2] => Array
                        (
                            [title] => Say I
                        )

                    [3] => Array
                        (
                            [title] => What If
                        )

                )

        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:13:27.053

看起来您正在向 usort 传递一个包含 1 个项目的数组，即 usort(array('title' => 'Rain'), arraySort);

所以你得到了相同的数组，因为你实际上是在告诉它什么都不排序。

要纠正这个问题，您应该尝试将整个专辑数组发送给它，所以不要传递艺术家 [$key]，而是只传递 $artist。

作为一个警告，您的递归基本案例似乎非常挑剔，这不是测试是否递归的好方法。测试计数 2 基本上仅在您拥有与您提供的数组相同的数组的情况下才有效，这不是一般的基本情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:15:16.800

你在那里是正确的，只是不需要 foreach 那里的专辑。

```
function sortSongs($artist){
$count = count($artist);
if($count == 2){
    foreach($artist as $album=>$trackListing){
        sortSongs($artist[$album]);
    }
}else{
       usort($artist, 'arraySort');
       print_r($artist);
} 
```

}

# php - 网站文件位置。父母与孩子

> ID：14127497
> 
> 赞同：1
> 
> 时间：2013-01-02T18:52:42.970
> 
> 标签：php, html, web

我正在建立一个网站，并想询问有关在不同文件夹中拥有页面时的最佳做法。

就我而言，我想要一个页面，`../store/`我将其命名为 index.php。

此页面加载外部内容，例如，`../`与其他一些页面一起存储在父目录中的 Header。这些加载的页面被位于其他子文件夹中的其他页面使用。

问题是：将标题（例如）复制到存储页面并将使用它的每个子文件夹中是否更好？

这意味着我将标题称为`header.php`. 还是在父级中只有一个标头并每次都将其调用为更好`../header.php`？

- - - - - - 更新

在我的站点中，我`index.php`在父目录中有一个。这`index.php`有一个调用添加的包含`commonItems/header.php`。同时这个header.php有一个`<?php include("commonItems/menu.php"); ?>`添加菜单。

然后在父文件夹中有一个被调用的文件夹`store/`，我在其中还有另一个文件夹，`index.php`它也添加了`../commonItems/header.php`. 但是，在这种情况下，标头已正确添加，但 menu.php 未显示....

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:11:59.643

在不同的文件夹中拥有多个具有相同内容的页面是没有意义的`php`，尤其是当您要在整个网站上使用它们时。

如果发生更改/可维护性，您必须对这些文件所在的所有文件夹进行更改，这将使其非常难以维护。

因此，如果您在各个页面上使用文件，不妨将它放在一个地方并从整个网站调用它。

要调用它们，我通常更喜欢定义一个常量并使用它，所以：

```
define('COMMON', $_SERVER['DOCUMENT_ROOT'] . 'common/');
...
require COMMON . 'header.php'; 
```

# visual-studio-2008 - TFS 2008 工作区删除灾难

> ID：14127498
> 
> 赞同：1
> 
> 时间：2013-01-02T18:52:44.787
> 
> 标签：visual-studio-2008

今天早上我打开VS2008并连接到TFS。作为新的一年的开始，我决定做一些清理工作。首先是删除我拥有的所有未使用的工作区（即，我早已离开的旧开发工作站中仍然存在的工作区）。

所以，我去了 File->Source Control->Workspaces，然后选择了我想摆脱的工作空间，然后按下删除按钮。我收到一条警告，我的本地计算机上的任何未决更改都将丢失。由于我没有待处理的更改，我继续删除。

在那之后，我和团队中的任何其他人都无法在 TFS 中看到任何源。他们丢失了映射；并且除了他们签出的任何文件之外......他们不再有权访问 TFS 控制下的任何文件；各种项目分支不再出现在团队资源管理器窗格中的源代码控制下；就好像我删除我的工作区删除了整个团队的所有工作区。TFS 管理员可以看到各个分支，并且（我可能在这里使用的术语不正确） - 但他发现如果他创建了一个新的“组”，从旧的“组”中删除了用户，然后将他们添加到新的“组”中，人们可以再次看到他们的源代码。无论如何，决定从备份中恢复。

我显然绝不是 TFS 管理员，但我一直认为工作区是 TFS 和我的工作站之间的映射，如果我要删除工作区，那只是意味着我可以重新连接到 TFS，重新映射到我的本地驱动器，获取最新信息并重新开始工作。

不幸的是，在这种情况下，我关闭了整个团队，等待系统管理员从备份中恢复 TFS 存储库。

我是否对工作空间的概念有根本的误解，或者在某处可能存在一些不应该按原样设置的配置设置，或者......？

我在网上搜索了很多次，但我发现的所有内容都让我相信，移除工作区并不是什么大不了的事，并且不会对团队的其他成员产生任何影响。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:41:06.090

正如谷歌搜索所指出的那样，删除 TFS 工作区*并不是*什么大不了的事，并且不会对团队的其他成员产生任何影响。我无法解释您看到的行为 - 除非您在从备份恢复之前保留日志文件 - 否则无法诊断。

但是，您指出的症状*并不*反映工作空间的变化，而是*权限*的变化。您的用户在源代码管理资源管理器中缺乏对源代码树的可见性，这表明他们缺乏对源代码树的读取权限。

我最好的猜测是 TFS 管理员不小心删除了一组用户的读取权限，或者 Active Directory 管理员从 AD 组中删除了用户，这与您的工作区删除完全无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:59:41.073

请检查您的权限。我认为这是一个许可问题，因此没有人可以看到项目和每件事。

在团队项目集合设置中将人员（根据您的要求或开发人员）添加到贡献者。

`important note`：请将它们添加到团队项目集合设置（贡献者）中，然后再次添加到团队项目设置（贡献者）中。

然后看到变化。之后，您可以根据需要管理您的权限！！！

# ruby-on-rails-3.2 - Jbuilder gem独立不渲染任何东西

> ID：14127500
> 
> 赞同：0
> 
> 时间：2013-01-02T18:52:52.317
> 
> 标签：ruby-on-rails-3.2, jbuilder

Jbuilder Standalone 不会渲染任何东西。我需要一个配置参数才能让它在 Rails 3.2.8 中工作吗？

```
1.9.2p320 :257 > Jbuilder
 => Jbuilder 
1.9.2p320 :258 > Jbuilder.new {|json| json.foo 'bar'}.target!
 => "{}" 
```

太感谢了。

更新

编码方法有效。

```
1.9.2p320 :016 > Jbuilder.encode {|json| json.foo 'bar'}
 => "{\"Foo\":\"bar\"}" 
```

但我想使用嵌套的 Jbuilder 对象来构造更复杂的 JSON。文档说我应该能够取回构建器对象并调用目标！获取json字符串。我真的很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T06:55:23.377

哎呀。我在 Github 上使用文档，但在 ruby​​gems.org 上使用 gem 的版本

替换：

```
gem 'jbuilder' 
```

和：

```
gem 'jbuilder', :git => "https://github.com/rails/jbuilder.git", :tag => "v0.9.1" 
```

在我的 Gemfile 中解决了这个问题。

# git - 如何解释 git 创建模式消息

> ID：14127501
> 
> 赞同：2
> 
> 时间：2013-01-02T18:52:53.377
> 
> 标签：git, msysgit

> **可能重复：**
> [如何读取 git-ls-tree 输出的模式字段](https://stackoverflow.com/questions/737673/how-to-read-the-mode-field-of-git-ls-trees-output)
> ['git commit' 是什么意思，当它在标准输出上说“创建模式......”时？](https://stackoverflow.com/questions/8521938/what-does-git-commit-mean-when-it-says-create-mode-on-stdout)

我已经向 git 添加了一些文件，并收到以下消息：

```
create mode 100644 file.txt 
```

显然，644是unix文件的权限。100 部分是什么意思？

# c# - 无法访问项目根目录中的类

> ID：14127507
> 
> 赞同：0
> 
> 时间：2013-01-02T18:53:30.763
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, c#-5.0

我有一个配置类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace VCProjectHost
{
    public static class Configs
    {
        public static string SiteName { get; set; }

        static Configs()
        {
            SiteName = "Ahmadali Shafiee's Projects Host";
        }
    }
} 
```

这是我的一部分`_Layout.cshtml`

```
<title>
    @{
        Write(ViewBag.Title);
        if (ViewBag.Title != null)
        {
            Write(" | ");
        }
        Write(VCProjectHost.Configs.SiteName);
    }
</title> 
```

但`Write(VCProjectHost.Configs.SiteName);`抛出一个错误，`Configs`说不存在！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:11:59.980

我认为这里的问题是你没有在你的类上指定可见性修饰符，因此默认情况下它是`internal`. 尝试将其更改为：

```
public static class Configs
{
   ...
} 
```

**更新**

看看你尝试过的所有事情，我很难看出问题可能是什么。作为临时解决方法，您可以将站点名称作为 ViewBag 的一部分传递（就像您已经在使用标题一样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:36:34.953

会不会因为某种原因该课程没有出现在网站上？如果在单独的项目中，请确保该项目生成的DLL文件存在于您的bin目录中。如果它在同一个项目中，请确保其构建操作在项目文件属性中设置为“编译”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:53:18.840

确保您的类文件的“构建操作”设置为“编译”（在解决方案资源管理器中右键单击文件并选择属性）。

# elm - Elm 的邮政编码示例中的 `keepIf` 的目的是什么？

> ID：14127508
> 
> 赞同：1
> 
> 时间：2013-01-02T18:53:38.290
> 
> 标签：elm

在[邮政编码示例](https://github.com/evancz/elm-lang.org/blob/5aa6e364df8eb234c4e3ad48904d769f1b516f94/public/examples/Reactive/ZipCodes.elm)中，有一行：

```
responses = sendGet (fromMaybe "" <~ keepIf isJust Nothing realInput) 
```

哪里`realInput :: Maybe String`。在我看来，这可以简化为：

```
responses = sendGet (fromMaybe "" <~ realInput) 
```

有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:53:48.897

你是对的，这两个版本完全一样。的第二个参数`keepIf`是“默认值”，如果给定条件不成立，则发出信号。因此，如果信号是 Just，则信号将是其自身，如果是 Nothing，则信号将是 Nothing。:) 我已经提交了拉取请求：[https ://github.com/evancz/elm-lang.org/pull/18](https://github.com/evancz/elm-lang.org/pull/18)

# scala - 在 tomcat 容器中启动 REPL

> ID：14127509
> 
> 赞同：2
> 
> 时间：2013-01-02T18:53:50.677
> 
> 标签：scala, wicketstuff

我正在尝试在 tomcat 容器中启动 scala REPL (2.9.1) 并收到以下错误

```
Failed to initialize compiler: object scala not found.
Note that as of 2.8 scala does not assume use of the java classpath.
For the old behavior pass -usejavacp to scala, or if using a Settings
object programatically, settings.usejavacp.value = true. 
```

我尝试了多种解决方案，例如 settings.usejavacp.value = true 等，类路径设置，但仍然遇到相同的错误。有人可以建议解决这个问题吗？

从 wicketstuff 控制台项目启动 scala 解释器也会给出相同的错误（[scala-console-issue-ref](https://github.com/wicketstuff/core/issues/28)）。

# c# - 如何编写可以按月获取数据的查询？

> ID：14127521
> 
> 赞同：0
> 
> 时间：2013-01-02T18:54:43.377
> 
> 标签：c#, mysql

我想获取所有记录，这些记录按第 6 个月保存，所有记录按日期保存。我的日期列数据类型是“日期”并命名为“Emissao”

```
month = 6 and year =2012;
query.Append(" SELECT NOTA,OPERADOR,EMISSAO,ORIGEM,TOTAL,ESPECIE,EMISSAO,HORA,DATA_IMPRESSAO,HORA_IMPRESSAO,CANCELADO ");
query.AppendFormat(" FROM VENDAS WHERE Month(EMISSAO)='{0}' and Year(EMISSAO)='{1}' ", Convert.ToInt32(month), Convert.ToInt32(year));
cmd.CommandText = query.ToString(); 
```

但我有“托坎未知月”的例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:00:42.363

如果没有魔术索引，您最好执行以下查询：

```
SELECT ... FROM VENDAS WHERE EMISSAO >= '06/01/2012' AND EMISSAO < '07/01/2012' 
```

注意第一部分的 >= 和第二部分的 <。我只建议这样做，因为（大多数情况下）找出“下个月”的第一天（需要了解 12 月/1 月的细节）比找出一个月的最后一天更容易。

但是，如果您有实用程序可以快速为您提供该信息，那就可以了。

您想这样做是因为您可以更轻松地利用日期的索引。如果您按日期的某个组件进行查询，那么您将对表进行表扫描的几率非常高（通常不是您想要的），除非您做一些特殊的索引。

# mysql - MYSQL 使用 LOAD DATA INFILE 从 csv 导入数据

> ID：14127529
> 
> 赞同：127
> 
> 时间：2013-01-02T18:55:23.043
> 
> 标签：mysql, csv, import, load-data-infile

我正在将一些 20000 行的数据从 CSV 文件导入 Mysql。

CSV 中的列与 MySQL 表的列的顺序不同。如何自动分配Mysql表列对应的列？

当我执行

```
LOAD DATA INFILE'abc.csv' INTO TABLE abc 
```

此查询将所有数据添加到第一列。

请建议将数据导入 Mysql 的自动语法。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2013-01-03T05:52:52.070

您可以使用**LOAD DATA INFILE**命令将**csv**文件导入表中。

检查此链接[**MySQL-LOAD DATA INFILE**](http://dev.mysql.com/doc/refman/5.7/en/load-data.html)。

```
LOAD DATA LOCAL INFILE 'abc.csv' INTO TABLE abc
FIELDS TERMINATED BY ',' 
ENCLOSED BY '"' 
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES
(col1, col2, col3, col4, col5...); 
```

**对于 MySQL 8.0 用户：**

使用`LOCAL`关键字 hold 安全风险，从 MySQL 8.0 开始，该`LOCAL`功能`False`默认设置为。您可能会看到以下错误：

> 错误 1148：此 MySQL 版本不允许使用的命令

[您可以按照文档中](https://dev.mysql.com/doc/refman/8.0/en/load-data-local.html)的说明覆盖它。请注意，这种覆盖并不能解决安全问题，而只是承认您意识到并愿意承担风险。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2013-01-03T05:14:36.867

您可能需要设置`FIELDS TERMINATED BY ','`分隔符或任何分隔符。

对于 CSV 文件，您的语句应如下所示：

```
LOAD DATA INFILE 'data.csv' INTO TABLE tbl_name
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES; 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2015-09-16T09:49:19.530

在导入文件之前，您必须准备以下内容：

*   将文件中的数据导入到的数据库表。
*   一个 CSV 文件，其数据与表的列数和每列中的数据类型相匹配。
*   连接到 MySQL 数据库服务器的帐户具有 FILE 和 INSERT 权限。

假设我们有下表：

[![在此处输入图像描述](../Images/5d97ca28514b189b66d94bf09faa46a4.png)](https://i.stack.imgur.com/d3Rh9.png)

使用以下查询创建表：

```
CREATE TABLE IF NOT EXISTS `survey` (
  `projectId` bigint(20) NOT NULL,
  `surveyId` bigint(20) NOT NULL,
  `views` bigint(20) NOT NULL,
  `dateTime` datetime NOT NULL
); 
```

> 您的 CSV 文件必须正确格式化，例如，请参见下图：

[![在此处输入图像描述](../Images/687d0d745e57a705d0d9e843635a1523.png)](https://i.stack.imgur.com/ktAIW.png)

如果一切正常。请执行以下查询以从 CSV 文件加载数据：

> 注意：请添加 CSV 文件的绝对路径

```
LOAD DATA INFILE '/var/www/csv/data.csv' 
INTO TABLE survey 
FIELDS TERMINATED BY ',' 
ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES; 
```

如果一切都完成了。您已成功将数据从 CSV 导出到表格

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2016-10-20T13:14:26.983

句法：

```
LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL]
INFILE 'file_name' INTO TABLE `tbl_name`
CHARACTER SET [CHARACTER SET charset_name]
FIELDS [{FIELDS | COLUMNS}[TERMINATED BY 'string']] 
[LINES[TERMINATED BY 'string']] 
[IGNORE number {LINES | ROWS}] 
```

请参阅此示例：

```
LOAD DATA LOCAL INFILE
'E:\\wamp\\tmp\\customer.csv' INTO TABLE `customer`
CHARACTER SET 'utf8'
FIELDS TERMINATED BY ',' ENCLOSED BY '"'
LINES TERMINATED BY '\r\n'
IGNORE 1 LINES; 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2017-02-17T06:34:07.180

1分钟内在数据库中批量插入超过7000000条记录（带计算的超快速查询）

```
 LOAD DATA LOCAL INFILE "'.$file.'"
    INTO TABLE tablename
    FIELDS TERMINATED by \',\'
    LINES TERMINATED BY \'\n\'
    IGNORE 1 LINES
    (isbn10,isbn13,price,discount,free_stock,report,report_date)
     SET RRP = IF(discount = 0.00,price-price * 45/100,IF(discount = 0.01,price,IF(discount != 0.00,price-price * discount/100,@RRP))),
         RRP_nl = RRP * 1.44 + 8,
         ID = NULL 
```

RRP 和 RRP_bl 不在 csv 中，但我们是在插入之后计算出来的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-07T18:00:26.943

假设您正在使用 xampp 和 phpmyadmin

你有文件名 'ratings.txt' 表名 'ratings' 和数据库名 'movies'

如果您的 xampp 安装在“C:\xampp\”中

将“ratings.txt”文件复制到“C:\xampp\mysql\data\movies”文件夹中

```
LOAD DATA INFILE 'ratings.txt' INTO TABLE ratings FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES; 
```

如果您在 localhost 上执行此操作，希望这可以帮助您省略错误

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-06T23:13:20.523

如果您`LOAD DATA LOCAL INFILE`从 windows shell 运行，并且需要使用`OPTIONALLY ENCLOSED BY '"'`，则必须执行以下操作才能正确转义字符：

```
"C:\Program Files\MySQL\MySQL Server 5.6\bin\mysql" -u root --password=%password% -e "LOAD DATA LOCAL INFILE '!file!' INTO TABLE !table! FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"^""' LINES TERMINATED BY '\n' IGNORE 1 LINES" --verbose --show-warnings > mysql_!fname!.out 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-11-13T17:17:00.130

到现在（2019 年底）我更喜欢使用像[http://www.convertcsv.com/csv-to-sql.htm](http://www.convertcsv.com/csv-to-sql.htm)这样的工具， 我有很多行可以运行分区块，当 csv 来自最终用户电子表格。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-11-26T06:57:04.543

您可以尝试像这样插入：

```
LOAD DATA INFILE '/tmp/filename.csv' replace INTO TABLE [table name] FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n' (field1,field2,field3); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-30T02:37:24.640

我收到错误代码：1290。MySQL 服务器正在使用 --secure-file-priv 选项运行，因此它无法执行此语句

这在使用 wampserver 3.0.6 64 位的 Windows 8.1 64 位上对我有用。

从 C:\wamp64\bin\mysql\mysql5.7.14 编辑 my.ini 文件

删除条目 secure_file_priv c:\wamp64\tmp\ （或您在此处拥有的任何目录）

停止一切 - 退出 wamp 等 - 并重新启动一切；然后将我的 cvs 文件放在 C:\wamp64\bin\mysql\mysql5.7.14\data\u242349266_recur 上（最后一个目录是我的数据库名称）

执行 LOAD DATA INFILE 'myfile.csv'

INTO表校友

以“，”结尾的字段

由'"'包围

以“\r\n”结尾的行

忽略 1 行

……瞧！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-06T03:09:44.933

您可以从 csv 或文本文件加载数据。如果您有一个包含表中记录的文本文件，您可以在表中加载这些记录。例如，如果您有一个文本文件，其中每一行都是包含每列值的记录，您可以通过这种方式加载记录。

# 表.sql

```
id //field 1

name //field2 
```

# 表.txt

```
1,peter

2,daniel

... 
```

--windows上的例子

```
LOAD DATA LOCAL INFILE 'C:\\directory_example\\table.txt'
INTO TABLE Table
CHARACTER SET UTF8
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\r\n'; 
```

# google-cloud-sql - 检索自动 Google Cloud SQL 备份

> ID：14127532
> 
> 赞同：12
> 
> 时间：2013-01-02T18:55:28.087
> 
> 标签：google-cloud-sql

我的团队要求我们能够检索数据库的备份（托管在 Google Cloud SQL 上）并将该数据库恢复到本地托管的 MySQL 实例。

我知道 Google Cloud SQL 能够安排备份，但这些似乎无法在任何地方下载。

我也知道我们能够将我们的数据库“导出”到谷歌云存储，但我们希望能够安排“导出”。

这里的最终目标是在某种管理脚本中执行以下步骤：

1.  自动备份托管在 Google Cloud SQL 上的数据库。
2.  将备份下载到本地（非云）服务器。
3.  将备份还原到 MySQL 的本地实例。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-02-29T18:05:57.853

gcloud sdk 命令现在提供导入/导出功能：

```
gcloud sql export sql <DATABASE_INSTANCE> \
    gs://<CLOUD_STORAGE_BUCKET>/cloudsql/export.sql.gz \
    --database <DATABASE_NAME> 
```

可以使用 下载此导出`gsutil`。也可以使用导入`mysqlimport`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-09T18:54:04.783

这就是我遇到的问题，我的解决方案是：

1.  转到[IAM 服务账户管理](https://console.cloud.google.com/iam-admin/serviceaccounts/)
2.  创建一个新的服务帐户（我称之为`sql-backuper`），以 JSON 格式下载它的访问密钥
3.  在主 IAM 页面上授予查看者、存储对象创建者角色（目前 GCloud 没有单独的 SQL 只读角色）
4.  在将进行备份的机器上进行设置：（ `gcloud auth activate-service-account sql-backuper@project-name-123.iam.gserviceaccount.com --key-file /home/backuper/gcloud-service-account.json`gcloud [auth 文档](https://cloud.google.com/sdk/gcloud/reference/auth/activate-service-account)）
5.  [在GCloud 存储浏览器](https://console.cloud.google.com/storage/browser/)中创建一个新存储桶
6.  现在在您的备份机器上，您可以运行：`gcloud sql instances export [sql-instance-name] gs://[bucket-name]/[file-name].gz --database [your-db-name]`（[gcloud sql 文档](https://cloud.google.com/sdk/gcloud/reference/sql/instances/export)）和 `gsutil cp gs://[bucket-name]/[file-name].gz [local-file-name].gz`（[gsutil cp 文档](https://cloud.google.com/storage/docs/gsutil/commands/cp)）
7.  你有一个本地数据库副本，现在可以随意使用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-05T07:21:30.977

[请注意，您现在可以使用Cloud SQL REST API](https://developers.google.com/cloud-sql/docs/admin-api/v1beta3/instances/export)触发`Export`操作。

因此，您的管理脚本可以执行此操作，然后从 Cloud Storage 下载备份（不过，您需要等到导出操作完成）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T19:37:44.510

抱歉，Cloud SQL 目前没有此功能。我们希望将来更容易做到这一点。同时，您可以将 Selenium（或其他一些 UI 脚本框架）与 cron 作业结合使用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-09T16:03:21.287

如果要下载备份（手动或自动），可以启动另一个 CloudSQL 实例，然后：

1.  单击备份实例中的备份选项（恢复）
2.  选择在之前启动的实例上恢复
3.  从新恢复的 CloudSQL 导出数据
4.  获取 Cloud Storage 上的 .sql 或 .csv

# asp.net - Azure MVC4 应用：在 System.Web.Security.Membership.GetCurrentUserName() 中获取 NullReferenceException

> ID：14127536
> 
> 赞同：0
> 
> 时间：2013-01-02T18:55:42.940
> 
> 标签：asp.net, asp.net-mvc, azure, asp.net-mvc-4, azure-web-roles

我已经为我的网站实现了一个自定义成员资格和角色提供程序，在使用 Azure 模拟器在本地运行时可以正常工作，但是一旦部署到云中，我在打开网站时会遇到以下异常：

`[NullReferenceException: Object reference not set to an instance of an object.] System.Web.Security.Membership.GetCurrentUserName() +60`

以下 SO 问题阐明了 GetCurrentUserName 的实现： [为什么我从 Membership.GetCurrentUserName 获得 NullReferenceException？](https://stackoverflow.com/questions/663018/why-am-i-getting-a-nullreferenceexception-from-membership-getcurrentusername)

有没有人知道为什么一旦部署到云上就会发生这种情况？

# c# - 提交后视图模型中的标签消失

> ID：14127537
> 
> 赞同：0
> 
> 时间：2013-01-02T18:55:47.340
> 
> 标签：c#, asp.net-mvc, razor, html-post

为什么`TextFromDb`提交后标签消失了？我如何解决它？我在帖子上看到它不在VM中。

控制器：

```
 public ActionResult Index()
    {
        var vm = new TestLabelVM();
        vm.TextFromDb = "Text from database";
        return View(vm);
    }

    [HttpPost]
    public ActionResult Index(TestLabelVM vm)
    {
        SaveToDb(vm.TextOpinion); 

        return View(vm);
    } 
```

我的视图模型：

```
public class TestLabelVM
{
    public string TextFromDb { get; set; }
    public string TextOpinion { get; set; }
} 
```

我的网页`Index.cshtml`：

```
@model TestLabelVM
@using (Html.BeginForm("Index", "TestLabel"))
{
    @Html.EditorFor(m => m.TextOpinion)
    <br/>
    @Model.TextFromDb
    <br/>
    <input type="submit" />    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:03:32.057

添加

```
@Html.HiddenFor(m => m.TextFromDb) 
```

在你的表格里面。这将允许 mvc 的模型绑定...等待它...将值绑定到模型并随后在 post 操作呈现视图时显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:57:22.197

这是因为您永远不会将该文本保存在任何地方。只有浏览器回传到服务器的东西（即输入）才能被模型绑定器自动加载。

在您的帖子处理程序中再次从数据库中获取文本。

# c# - 子对象的 PropertyInfo.SetValue？

> ID：14127542
> 
> 赞同：1
> 
> 时间：2013-01-02T18:56:30.087
> 
> 标签：c#, reflection

我有这样的方法：

```
var foo = new Foo();
MapObject(myMap, foo);

private void MapObject(Dictionary<string, PropertyInfo> map, object myObject)
{
  foreach(var key in map.Keys)
  {
    int someValue = myDataSet.GetValue(key);

    PropertyInfo pInfo = map[key];
    pInfo.SetValue(myObject, someValue, null);
  }
} 
```

问题是有时，PropertyInfo 指的是 myObject 的子类中的属性。例如：

```
class Foo
{
  Bar b { get; set; }
}

class Bar
{
  string Test { get; set; }
} 
```

发生这种情况时，PropertyInfo.SetValue 会引发类型异常，因为它无法在对象 Foo 上设置属性 Test。我无法知道当前 PropertyInfo 属于哪个类（它是奇怪的自定义 ORM 的一部分）。有没有办法知道 PropertyInfo 是从哪个对象派生的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:59:51.910

如果您的目标是设置`Bar.Test`为`null`，那么您将调用它：

```
pInfo.SetValue(myObject.Bar, 100, null); 
```

这在语义上等价于：

```
myObject.Bar.Test = null; 
```

当然，在您的示例中，这将引发异常，因为`myObject.Bar`will be `null`。

# php - 刷新 DIV 标记的内容，其中包括 PHP 函数调用

> ID：14127547
> 
> 赞同：1
> 
> 时间：2013-01-02T18:56:39.007
> 
> 标签：php, jquery, html, reload

问题的核心是我试图使用 HTML 下拉菜单的值来调用 php 函数，而无需重新加载整个页面。鉴于 PHP 是一种服务器端语言，我已经合并了 JQuery 来处理 onChange 事件，希望只重新加载页面的一部分。我要调用的 PHP 函数（即 wp_cart-button_for_product）会打印出添加到购物车按钮，但与添加到购物车按钮相关的变量最终取决于下拉菜单。我要重新加载的 div 标记（即按钮重新加载）在当前页面上，但 URL 会根据产品而变化。我已经尝试过 load 和 html 方法，但没有运气。

```
<script type = "text/javascript">
  function productchange() 
  {
      var currentrow = $('#productcategory1').val();
      $("#jsvar").val(currentrow);
      $.ajax({
        type: "GET",
        url: "http://www.example.com/wp-content/themes/themeX/storevar.php",
        data: {'jsvar': currentrow},
        complete: function(){
              $('#button-reload').load("http://www.example.com/wp-content/themes/themeX/printbutton.php #button-reload > *");
      //      $('#button-reload').html($('#button-reload',data).html);
      //      $('#button-reload').load(location.href "#button-reload > *");
            }});      
      return false;
  }
  </script>

<div id = "button-reload">
      <?php echo print_wp_cart_button_for_product($products[$_SESSION['currentrow']]["Product"], $products[$_SESSION['currentrow']]["Price"]); ?>
  </div>

  <form method="get" action="http://www.example.com/wp-content/themes/themeX/storevar.php">
      <input type="hidden" name="jsvar" id="jsvar" value="" />
  </form> 
```

存储变量.php

```
<?php
    session_start();
    $currentrow = $_GET['jsvar'];
    echo "Current Row = $currentrow";
    $_SESSION['currentrow'] = $currentrow;
    echo "Session Currentrow =".$_SESSION['currentrow'];
?> 
```

打印按钮.php

```
<div id="button-reload">
    <?php echo print_wp_cart_button_for_product($products[$_SESSION['currentrow']]["Product"], $products[$_SESSION['currentrow']]["Price"]); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:04:05.863

```
function productchange() 
{
var currentrow = $('#productcategory1').val();
$('#button-reload').load("http://www.example.com/wp-content/themes/themeX/printbutton.php", {jsvar: currentrow});
} 
```

应该足够了。

您正在执行一个 ajax 请求，然后在成功回调中调用 load。检查 jquery 文档[http://api.jquery.com/load/](http://api.jquery.com/load/)

*编辑*您缺少“session_start();” 在您的 printbutton.php 中。您还可以在其中添加您的存储代码，这样您只需要进行一次 ajax 调用。

打印按钮.php

```
<?php
    session_start();
    $currentrow = $_GET['jsvar'];
    echo "Current Row = $currentrow";
    $_SESSION['currentrow'] = $currentrow;
?>
<div id="button-reload">
    <?php echo print_wp_cart_button_for_product($products[$_SESSION['currentrow']]["Product"], $products[$_SESSION['currentrow']]["Price"]); ?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T07:44:49.197

经过数小时的实验：

```
 <script type = "text/javascript">
 function productchange() 
  {
      var currentrow = $('#productcategory1').val();
      alert(currentrow);
      $("#jsvar").val(currentrow);
      $.ajax({
         type: "GET",
         url: "http://example.com/wp-content/themes/themeX/storevar.php",
         data: {'jsvar': currentrow},
         success: function(response){
              alert(response);
              var pathname = window.location.href;
              alert(pathname);
              $('#button-reload').load(pathname + " #button-reload", function(responseTxt, statusTxt, xhr){
              if(statusTxt=="success")
                alert("Content loaded successfully!");
                if(statusTxt=="error")
                  alert("Error: "+xhr.status+": "+xhr.statusTxt);
                  });
  return false;
  }
  </script> 
```

# regex - 如何使用 str1 和 str2 行 grep 文件

> ID：14127551
> 
> 赞同：1
> 
> 时间：2013-01-02T18:57:04.083
> 
> 标签：regex, grep

我有一个看起来很简单的操作，但找不到解决方案。我需要在目录中搜索包含`str1` *AND* `str2`行的文件。有几个例子，`str1|str2`例如 grep -r " `str1|str2`" 。但没有`str1` *AND* `str2`。任何人都可以提供解决方案。这应该是一个普遍的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:00:36.490

您可以执行以下操作：

```
egrep 'str1.*str2|str2.*str1' FILES 
```

与`egrep`. 或使用积极的前瞻/后向正则表达式。阅读手册。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T21:26:45.393

这是一个常见的问题，这里是常见的解决方案：

```
awk '/str1/&&/str2/' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T23:05:10.293

你没有问这个，但是如果你想要包含 str1 和 str2 但不在同一行的文件：

```
grep str2 $(grep -l str1) 
```

# visual-studio-2010 - 多个人究竟是如何一起完成一个项目的？

> ID：14127552
> 
> 赞同：0
> 
> 时间：2013-01-02T18:57:06.213
> 
> 标签：visual-studio-2010, tfs

我已经在一个项目上独自工作了很长一段时间，并且正在达到让另一个开发人员参与该项目会有所帮助的地步。我是一个应届大学毕业生，所以我只是一个人编程，从来没有需要使用任何版本控制软件。

由于我将使用`Visual Studio`，因此我想[`Team Foundation`](http://en.wikipedia.org/wiki/Team_Foundation_Server)用于版本控制。

一个软件的生命周期是什么样的`Team Foundation`？

*   代码存储在哪里
*   建造时，它在哪里建造？
*   分支/合并如何工作？

错误如何处理？例如，如果我提交了一段损坏的代码？

*   其他开发人员还能正常工作吗？
*   它会使用先前版本的损坏文件构建吗？

编辑：这可能是一个幼稚的问题，但是项目解决方案文件是否也作为版本控制的一部分进行了备份？据我所知，这个文件负责了解项目还需要哪些其他文件，并在解决方案资源管理器中打开它们。它还有其他用途吗？其他开发人员如何获取此文件以及将新文件添加到项目时会发生什么？

任何额外的信息将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:06:55.283

我与一个由大约十几个编码员组成的团队一起工作。

我们使用 Visual Studio 2010 和带有[**TortoiseSVN的**](http://tortoisesvn.net)[**SVN**](http://subversion.tigris.org/)作为源代码控制客户端。我们还使用[**AnkhSVN**](http://ankhsvn.net)让我们在 VS 的解决方案资源管理器中轻松访问 SVN。[](http://tortoisesvn.net)**[](http://ankhsvn.net)**

 ****我们在网络上维护我们的代码存储库，并使用[**CruiseControl**](http://cruisecontrol.net)进行持续集成，以便在提交后重建单独的项目。对于修补程序或主要版本，我们将代码从主干分支；个别开发人员会将单独的任务分支到他们自己的分支，并在它们在多个版本中持续存在时维护它们（例如，合并升级到生产的代码更改，这些更改恰好与他们正在处理的内容重叠）。

[我们有某些项目（主要是库和 WCF 客户端）与我们在某些项目中作为外部](http://svnbook.red-bean.com/en/1.0/ch07s03.html)引用的其他部门共享。

如果有人破坏了构建，CruiseControl 会定期向我们的小组发送一封电子邮件，通知他们破坏的项目以及谁最后提交了更改。

一般来说，只要你意识到影响你自己的变化，以及影响其他人的变化，你就可以很好地应对并保持相当敏捷和灵活的设置。****

# java - 让 Netbeans 平台注解在 Eclipse 中工作

> ID：14127553
> 
> 赞同：1
> 
> 时间：2013-01-02T18:57:18.937
> 
> 标签：java, eclipse, annotations, netbeans-platform, annotation-processing

Netbeans 平台最近引入了[基于注释](http://platform.netbeans.org/whatsnew/70.html "Netbeans 平台 7.0")的资源文件生成，例如包和 layer.xml 文件。

在 Netbeans 中拥有一个基于 Maven 的 Netbeans 平台项目（这些注释工作的地方）可以很容易地将相同的项目导入 Eclipse。

但是由于某种原因，即使项目被正确导入（或者至少它似乎被正确导入<--下载了必要的库等），上面提到的注释也不会被 Eclipse 执行。

症状缺少在使用这些注释的类中导入的生成类。

例子：

```
import org.netbeans.api.settings.ConvertAsProperties;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.windows.TopComponent;
import org.openide.util.NbBundle.Messages;

/**
 * Top component which displays something.
 */
@ConvertAsProperties(
    dtd = "-//org.something.ui//Exp//EN",
autostore = false)
@TopComponent.Description(
    preferredID = "ExpTopComponent",
//iconBase="SET/PATH/TO/ICON/HERE", 
persistenceType = TopComponent.PERSISTENCE_ALWAYS)
@TopComponent.Registration(mode = "output", openAtStartup = true)
@ActionID(category = "Window", id = "ExpTopComponent")
@ActionReference(path = "Menu/Window" /*, position = 333 */)
@TopComponent.OpenActionRegistration(
    displayName = "#CTL_ExpAction",
preferredID = "ExpTopComponent")
@Messages({
  "CTL_ExpAction=Example",
  "CTL_ExpTopComponent=Example Window",
  "HINT_ExpTopComponent=This is a Example window"
})
public final class ExpTopComponent extends TopComponent {

  public ExpTopComponent() {
    initComponents();
    setName(Bundle.CTL_ExpTopComponent());
    setToolTipText(Bundle.HINT_ExpTopComponent());
    putClientProperty(TopComponent.PROP_CLOSING_DISABLED, Boolean.TRUE);

  }

  private void initComponents() {
    setLayout(new java.awt.BorderLayout());

    outlineView1 = new org.openide.explorer.view.OutlineView();
    add(outlineView1, java.awt.BorderLayout.CENTER);
  }

  private org.openide.explorer.view.OutlineView outlineView1;
  @Override
  public void componentOpened() {
    // TODO add custom code on component opening
  }

  @Override
  public void componentClosed() {
    // TODO add custom code on component closing
  }

  void writeProperties(java.util.Properties p) {
    p.setProperty("version", "1.0");
    // TODO store your settings
  }

  void readProperties(java.util.Properties p) {
    String version = p.getProperty("version");
    // TODO read your settings according to their version
  }
} 
```

如上面的示例所示，注释被广泛使用但未被 Eclipse 处理，这导致以下行无法编译，因为 Bundle（应自动生成）未被识别为已知类。

```
 setName(Bundle.CTL_ExpTopComponent());
    setToolTipText(Bundle.HINT_ExpTopComponent()); 
```

更多信息：

使用的 Eclipse 是 Juno，并且在项目属性中启用了注释处理。

有人知道如何在 Eclipse 中进行这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-12T21:37:57.320

事实证明，您还必须指定包含 netbeans 注释的注释处理器的库，这至少可以说是乏味的（无论如何，eclipse 中的注释处理似乎违反直觉）。

最有效的方法是在注释发生更改时在项目上运行一个简单的 maven 构建，并且一切顺利。

# mysql - Mysql查询选择加入前的位置

> ID：14127557
> 
> 赞同：0
> 
> 时间：2013-01-02T18:57:25.263
> 
> 标签：mysql, inner-join

我的两张桌子看起来像这样

网站表

```
| id | website | etc. | 
```

网站统计表

```
| id | website_id | etc. | 
```

我想将统计表与网站表的结果连接起来。在我需要使用该 id 获取 website_statistics 之后，第一条记录是通过网站名称获取的。像这样的东西。

```
SELECT * FROM websites WHERE websites.website = 'google.com'
INNER JOIN websites_statistics ON website.id = websites_statistics.website_id
LIMIT 0,1 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:01:42.003

尝试这个

```
SELECT * FROM websites 
INNER JOIN websites_statistics ON website.id =  websites_statistics.website_id
WHERE websites.website = 'google.com'    
LIMIT 0,1 
```

# visual-studio-2012 - 如何在 Visual Studio 2012 中为灯光开关项目定义构建事件（前或后）

> ID：14127562
> 
> 赞同：1
> 
> 时间：2013-01-02T18:57:45.820
> 
> 标签：visual-studio-2012, visual-studio-lightswitch

一定有一些明显的东西我遗漏了，但我找不到为灯光开关项目定义构建前和构建后事件的方法。通常，您转到项目属性屏幕并查看“构建事件”选项卡并访问构建事件前和构建事件后的命令行。

当我在解决方案资源管理器中进入根 lightswitch 节点的属性时，我看不到那里的构建事件，如果我进入客户端、公共或服务器的属性，情况也是如此。

有人可以澄清这里的问题吗？

谢谢，

贾斯普雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:07:14.167

显然，Visual Studio 2012 不支持 Lightswitch 项目的构建前和构建后事件，至少不直接来自项目属性。[我在Lightswitch 论坛](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/35cc34c7-d3d8-4499-86f6-7c601bef3c85/#1a3c16fe-24fa-4dc1-84ec-47a9c4dee57d)上问了同样的问题，并且按照 Yann 的建议，我提出了[User Voice 建议](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3512037-add-pre-and-post-build-events-to-lightswitch-proje)。如果您关心此功能，可以对其进行投票。

# javascript - 通过jquery加载时隐藏东西不起作用propper

> ID：14127563
> 
> 赞同：0
> 
> 时间：2013-01-02T18:57:50.297
> 
> 标签：javascript, jquery, html, ajax, loading

在我的网站[http://boxcomp.111mb.de/luxus/html9](http://boxcomp.111mb.de/luxus/html9)

我使用 jquery 来隐藏内容直到它被加载并在它加载时淡入它。这样它看起来更干净，更平滑。我用 AJAX 加载内容。问题是，它不能正常工作。当连接速度很慢时，内容会在加载之前出现。不应该是这样。这是我使用的代码：

```
<script>
$(document).ready(function() {
    $('#home').click(function() {
        $('#content-shown , #pics').animate({opacity: 0}, 250, function() {
            $('.content-loading').fadeIn(250, function() {
                $('#navigation_all , #content-shown').css("height", "1500px");
                $('#pics').load('content.html #home-bild').animate({opacity: 1}, 250);
                $('#content-shown').load('content.html #home', function() {
                    $('.content-loading').fadeOut(250, function() {
                        $('#content-shown').animate({opacity: 1}, 250);
                    });
                });
            });
        });
    });
});​
</script> 
```

单击对象时，我会淡出实际内容，在内容加载（但不可见）时淡入“请稍候”文本（.loading），然后在加载内容时，.loading 淡出并且内容淡出在。但有时它会在一切都完全加载之前出现。

我怎样才能确保它在加载时淡入？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:07:10.623

我唯一看到的是在这一行：

```
$('#pics').load('content.html #home-bild').animate({opacity:1},250); 
```

您可能需要将该`animate`函数移动到加载的回调函数，而不仅仅是链接它。例子：

```
$('#pics').load('content.html #home-bild', function(){
  $('#pics').animate({opacity:1},250)
}); 
```

或`opacity:'show'`改用：

```
 $('#pics').load('content.html #home-bild', function(){
      $('#pics').animate({opacity:'show'},250)
    }); 
```

# iphone - UIPageViewController 中的页码

> ID：14127565
> 
> 赞同：1
> 
> 时间：2013-01-02T18:57:52.483
> 
> 标签：iphone, objective-c, uipageviewcontroller

我一直在关注[这个](https://stackoverflow.com/questions/10621318/uipageviewcontroller-page-number-on-toolbar)线程来获取我的 UIPageViewController 的计数器。

它就像一个魅力，除了当我到达第一页或最后一页时，页码停留在前一页。幸运的是，内容至少发生了变化。

这是一些代码：

```
if(pageController.viewControllers.count != 0){
    ViewPostController *vpc = [pageController.viewControllers objectAtIndex:0];
    NSUInteger retreivedIndex = [self indexOfViewController:vpc];
    self.title = [NSString stringWithFormat:@"%d of %d", retreivedIndex+1, [pageImageContent count]];
} 
```

和

```
- (NSUInteger)indexOfViewController:(ViewPostController *)viewController
{
NSLog(@"indexex %d", [pageNumberArray indexOfObject:viewController.pageNumber]);
return [pageNumberArray indexOfObject:viewController.pageNumber];
} 
```

有谁知道为什么计数器不会“到达”外部数字？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T15:09:38.923

这是一个老问题，我的回答甚至可能无法直接解决困扰汤姆的问题，但也许这些信息会对某人有所帮助。UIPageViewController 困扰了我好几天。我的错误是假设这些方法只在翻页时被调用：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController 
```

实际上，它们似乎在翻页期间被多次调用。我`currentPage`在主视图控制器中有一个变量，每当调用这两种方法时我都会递增/递减它，但它会产生类似于 Tom 描述的奇怪行为。我仍然使用这些方法（你必须这样做），但是以不同的方法进行递增/递减。这些方法如下所示：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    if (self.currentPage==0) {
        return nil;
    }
    else {
        return [[self pageArray] objectAtIndex:self.currentPage-1];
    }
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    if (self.currentPage==self.pageArray.count-1)
    {
        return nil;
    }
    else
    {
        return [[self pageArray] objectAtIndex:self.currentPage+1];
    }
} 
```

的增量/减量`currentPage`发生在此方法中：

```
- (void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed
{
    if (completed)
    {
        int currentIndex = ((UIViewController *)[self.pageViewController.viewControllers objectAtIndex:0]).view.tag;
        self.currentPage = currentIndex;
    }
} 
```

要使用此方法，您必须添加两个协议

```
<UIPageViewControllerDataSource, UIPageViewControllerDelegate> 
```

不只是数据源，并将委托设置为 self

```
self.pageViewController.delegate=self; 
```

否则不会调用该方法。我使用视图标签来确定每个页面的索引，但还有其他方法可以获得这个数字。有关获取当前页面索引的方法的讨论，请参阅本文：

[UIPageViewController：返回当前可见视图](https://stackoverflow.com/q/8400870/1359088)

我在网上找到的 UIPageViewController 教程都显示了对每个页面重复使用的单个视图控制器的使用，这对我没有帮助，因为我为每个页面都有一个单独的视图控制器。

# html - 使用 CSS 堆叠 3 个 DIV 以填充屏幕，中间 DIV 具有固定高度

> ID：14127566
> 
> 赞同：0
> 
> 时间：2013-01-02T18:57:53.447
> 
> 标签：html, css, layout

我有一个由 3 个 DIV 组成的简单网页。我需要一个可以执行以下操作的下降 CSS 样式：

顶部和底部 div 必须具有固定的最小宽度（例如 20 像素，如果不可能，则降至 0 像素）。

中间 div 应该是固定宽度，例如 1000 x 700 像素。

当我为每个 div 设置固定宽度/高度时，一切都很好，除了屏幕没有拉伸。如果我将顶部和底部 div 的高度设置为自动，我将第二个（固定大小）div 附加到屏幕的顶部，顶部 div 大小为 0，底部大小 di 也是奇怪的大小。

具有所有 CSS 属性的 HTML 代码：

```
<body style="background-color:#030303; margin:0px; padding:0px;">
<!--head-->
<div style="margin:0 auto; width:100%; height:auto; border:0px solid red; background-color:#181818; position:relative;">
 (some images)
</div>
<!--gallery-->
<div id="galleria" style="height:700px;width:1000px; margin:0 auto; border:1px solid green;   ">
    <a href="img/img1.jpg"><img src="img/thumb1.jpg" data-title="My title" data-description="My description"></a>
    <a href="img/img2.jpg"><img src="img/thumb2.jpg" data-title="Another title" data-description="My <em>HTML</em> description"></a>
</div>
<!--footer-->
<div style="  margin:0 auto; top:0px; width:100%; height:auto; position:relative; border:1px solid red; line-height:128px; background-color:#181818">
    <div align="center" >
     (some images)
     </div>

</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:10:39.483

首先让我们从 HTML 中获取样式并转换为适当的 CSS 格式。接下来，我将 HTML 简化为一个简单的表单，以便您更好地定义您的问题：

[http://jsfiddle.net/HF6Cc/](http://jsfiddle.net/HF6Cc/)

**HTML：**

```
<body>

<!--head-->
<div class="head">header</div>

<!--gallery-->
<div id="galleria" class="middle">
    <a href="img/img1.jpg"><img src="img/thumb1.jpg" data-title="My title" data-description="My description"></a>
    <a href="img/img2.jpg"><img src="img/thumb2.jpg" data-title="Another title" data-description="My <em>HTML</em> description"></a>
</div>

<!--footer-->
<div class="footer">footer</div>

</body>​ 
```

CSS

```
body { width:1000px; margin:0; padding:0; }

.head { margin:0 auto; background-color:orange; }

.middle { margin:0 auto; background-color:lime; }

.footer { margin:0 auto; background-color:yellow; } 
```

现在，你到底想用这个布局做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:11:26.070

您的问题有点令人困惑（当您说宽度时，您是指高度吗？）。如果我理解正确，您希望三个 div 加起来等于视口的总高度。我知道有两种方法可以做到这一点——绝对定位或显示：表格样式。以我的经验，第一个效率更高。

```
<div id="topbar">Top</div>
<div id="mainarea">Middle</div>
<div id="footbar">Botton</div>

#topbar, #mainarea, #footbar { position: absolute; overflow: auto; }
#topbar { height: 20px; top: 0; left: 0; right: 0; }
#mainarea { top: 20px; left: 0; right: 0; bottom: 20px; }
#footbar { height: 20px; left: 0; right: 0; bottom: 0; } 
```

如果您也想实际分配宽度，那么摆脱“正确”样式并为所有三个分配相同的宽度（不过，通常不明智地对人强制宽度）。

# erp - 在 OFBiz 中哪里最适合创建公司范围的群组？

> ID：14127567
> 
> 赞同：0
> 
> 时间：2013-01-02T18:57:57.170
> 
> 标签：erp, ofbiz

我正在尝试在 Ofbiz 中创建一家公司的分支机构（然后希望是分支机构内的团队）。我查看了 HR 应用程序，虽然它确实在主视图中列出了一家公司和一些部门以及其他内容，但我无法找到修改此组织树以删除或添加它的方法。我唯一能想到的是删除/修改数据库中的这些信息，但我宁愿不诉诸这种修补（如果确实可以这样做的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T17:34:15.617

这可以通过 Partymanager 应用程序中的关系来完成。（查看`https://localhost:8443/partymgr/control/EditPartyRelationships?partyId=Company`您是否正在运行本地默认安装）

# jquery - Mouseout 和 mouseleave 不起作用

> ID：14127568
> 
> 赞同：0
> 
> 时间：2013-01-02T18:58:07.653
> 
> 标签：jquery

嗨，我正在使用`mouseout`和`mouseleave`方法，但两者都不起作用。我试图修复它，但找不到解决方案。我的代码看起来不错，没有错误，所以我想知道它为什么不起作用。这是示例代码[链接](http://jsfiddle.net/Dpp8a/)

```
$(".chzn-select").chosen()
$(function(){
    $('a').click(function(){
        $('.mydiv').addClass('redbrd')
    })

    $('.redbrd').live('mouseover', function(){
        var htm= '<div id="mmt">some text</div>'
        $('body').append(htm)
    })
    $('.redbrd').live('mouseout', function(){
        $('#mmt').remove()
    })
}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:16:00.023

查看您的小提琴页面，由于除了这部分之外的代码的复杂性，检测到鼠标事件可能存在一些问题，但是使用它应该可以让您大部分时间到达那里：

```
$(function() {
    $(".chzn-select").chosen();

    $('a').click(function() {
        $('.mydiv').removeClass().addClass('redbrd mydiv');// NOTE this is in case your other question comes into play with this one.
    });
    $('body').on('mouseenter', '.redbrd', function() {
       $('body').append('<div class="mmt">some text</div>');
    });
    $('body').on('mouseleave', '.redbrd', function() {
        $('.mmt').remove();
    });
}); 
```

编辑：经过审核，您在选择的内容之后将 li 添加到页面。

这应该适用于：

```
$(".chzn-select").chosen();
$(function() {
    $('a').click(function() {
        $('.mydiv').addClass('redbrd');

        $('.redbrd').on('mouseover', 'li', function(e) {
            var $target = $(e.target);
            if ($('#mmt').length === 0) {
                var htm = '<div id="mmt">' + $target.text() + ' some text</div>';
                $('body').append(htm);
            }
        });
        $('.redbrd').on('mouseout', function() {
            $('#mmt').remove();
        });
    });
}); 
```

在这里更新了你的小提琴：http: [//jsfiddle.net/JtQHY/1/](http://jsfiddle.net/JtQHY/1/)所以你可以测试它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T20:01:53.550

问题是事件没有被捕获，因为它们没有完全正确地冒泡。

直播取决于事件的适当冒泡。我认为选择的插件打破了冒泡

尝试这个：

```
$(".chzn-select").chosen()
$(function(){
    $('a').click(function(){
        $('.mydiv').addClass('redbrd')

        $('.redbrd').live('mouseover',function(){
            if($('#mmt').length == 0){
                var htm= '<div id="mmt">some text</div>';
                $('body').append(htm);        
            }    

        }); 
        $('.redbrd').live('mouseout',function(){
            $('#mmt').remove();
        });          

    })        
}) 
```

添加CSS：

```
.mydiv{padding:10px;} 
```

这使得您鼠标悬停的 div 足够大，以至于您不会立即进入和退出它。要在您当前的示例中看到这一点，请慢慢接近红色边框的右下角，直到您在 select 和 div 之间的微小空白中“输入”div。然后搬出去。您会看到它按预期工作。

[我将我提到的更改添加到小提琴中。](http://jsfiddle.net/JtQHY/)你可以看到它在那里工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:23:37.700

我没有使用 live 将事件绑定到函数，而是使用 jQuery 方法`mouseover`和`mouseout`. `span`在此示例中，我在包含内容中设置了一个`div`，当您的鼠标进入时显示`div`并在您离开时隐藏`div`。

您可以将其更改为`span`您想要使用的任何元素，并根据需要使用 CSS 对其进行样式/定位。

这是解决您的问题的可行解决方案吗？

[http://jsfiddle.net/Dpp8a/4/](http://jsfiddle.net/Dpp8a/4/)

# java - 为什么我在这个数组中得到负数？

> ID：14127572
> 
> 赞同：1
> 
> 时间：2013-01-02T18:58:27.863
> 
> 标签：java, arrays

我刚开始学习数组，所以如果可以的话，请用外行的术语解释一下。

在数组的第 50 项左右，负数开始出现，考虑到代码，这似乎很荒谬。我正在使用 eclipse（截至 12/19 的最新版本）运行它。

```
public class Array1
{
    /*
    * @param args
    */
    public static void main(String[] args)
    {
        // TODO Auto-generated method stub
        int[] tree = new int[1000];
        tree[0] = 1;
        tree[1] = 2;

        int j = 0;

        for (j = 1; j<999; j++)
        {
            tree[j+1] = tree[j] + tree[j-1];
        }

        for (int i=1; i<=150; i++)
        {
            System.out.println(tree[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:02:01.290

您正在计算的是斐波那契数列，这些数列会呈指数增长。因此，您最终会溢出您的 int，这会导致它变为负数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T19:03:13.660

**Integer overflow** computing fibonacci numbers.

[Read this article](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

**int:** The int data type is a 32-bit signed two's complement integer. It has a minimum value of -2,147,483,648 and a maximum value of 2,147,483,647 (inclusive).

# memory-management - CUDA：来自 CPU 的不同结果

> ID：14127574
> 
> 赞同：2
> 
> 时间：2013-01-02T18:58:44.280
> 
> 标签：memory-management, cuda, thread-safety

关于CUDA的一些问题。

1）我注意到，在每个示例代码中，在全局函数中执行的非并行操作（即标量的计算）总是在指定某个线程时完成。例如，在这个点积的简单代码中，线程 0 执行求和：

```
 __global__ void dot( int *a, int *b, int *c )
    {
       // Shared memory for results of multiplication   
       __shared__ int temp[N]; 
       temp[threadIdx.x] = a[threadIdx.x] * b[threadIdx.x];

       // Thread 0 sums the pairwise products
       if( 0 == threadIdx.x ) 
       {
       int sum = 0;
       for( int i = 0; i < N; i++ )
           sum += temp[i];

       *c = sum;
       }
    } 
```

这对我来说很好；但是，在我编写的代码中，我没有为非并行操作指定线程，它仍然有效：因此，是否必须定义线程？特别是，我要执行的非并行操作如下：

```
 if (epsilon == 1)
        {
            V[0] = B*(Exp - 1 - b);
        }
        else
        {
            V[0] = B*(Exp - 1 + a);
        } 
```

各种变量作为全局函数的参数传递。我的第二个问题来了。

`V[0]`2) 我用 CUDA 中的一个程序和 CPU 上的另一个序列计算了 的值，得到了**不同的结果。**显然我认为 CUDA 中的问题可能是我没有指定线程，但是，即使这样，结果也没有改变，而且它仍然（很多）比串行的大：6.71201e+22 vs -2908.05 . 问题可能出在哪里？在全局函数中执行的其他计算如下：

```
int tid = threadIdx.x;

if ( tid != 0 && tid < N )
{
    {Various stuff which does not involve V or the variables used to compute V[0]}

    V[tid] = B*(1/(1+alpha[tid]*alpha[tid])*(One_G[tid]*Exp - Cos - alpha[tid]*Sin) + kappa[tid]*Sin);
} 
```

如您所见，在我的情况下，我避免考虑这种情况`tid == 0`。

3）最后一个问题：通常在示例代码中我注意到，如果你想在 GPU 内存上分配和计算的 CPU 值上使用，你应该将这些值复制到 CPU 上（例如，使用 command `cudaMemcpy`，指定`cudaMemcpyDeviceToHost`） . 但是我设法直接在主代码（CPU）中使用这些值而没有任何问题。这可能是我的 GPU（或我安装的 CUDA）有问题的线索，这也导致了以前的奇怪事情吗？

感谢您的帮助。

== 1 月 5 日添加 ==

抱歉我的回复晚了。在调用内核之前，需要计算数组的所有内存分配（相当多）。特别是，我的问题中涉及的数组的代码是：

```
float * V;
cudaMalloc( (void**)&V, N * sizeof(float) ); 
```

在我写的代码的最后：

```
float V_ [N];
cudaMemcpy( &V_, V, N * sizeof(float), cudaMemcpyDeviceToHost );

cudaFree(V);

cout << V_[0] << endl; 
```

再次感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T22:11:34.977

如果您的代码中没有任何`cudaMemcpy`内容，那就是问题所在。;-) GPU 正在访问它自己的内存（显卡上的 RAM），而 CPU 正在访问主板上的 RAM。您需要先使用 分配和复制 alpha、kappa、One_g 和所有其他数组到您的 GPU `cudaMemcpy`，然后运行您的内核，然后将结果复制回 CPU。另外，不要忘记在两边分配内存。

至于非并行的东西：如果结果总是一样的，那么所有线程都会写同样的东西，所以结果是完全一样的，只是效率低了一点，因为它们都试图访问相同的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T20:17:47.383

那是您使用的确切代码吗？关于问题 1，在分配给共享内存 temp 之后，您应该有一个 __syncthreads()。否则，您将获得一个竞争条件，其中线程 0 可以在 temp 完全填充之前开始求和。

至于您关于指定线程的其他问题，如果您有

```
if (epsilon == 1)
{
    V[0] = B*(Exp - 1 - b);
}
else
{
    V[0] = B*(Exp - 1 + a);
} 
```

然后每个线程都会执行该代码；例如，如果您有 X 个线程正在执行，并且所有线程的 epsilon 为 1，那么所有 X 个线程将评估同一行：

```
V[0] = B*(Exp - 1 - b); 
```

因此您将遇到另一个竞争条件，因为您将让所有 X 线程写入 V[0]。如果所有线程的 B*(Exp - 1 - b) 值相同，那么您可能不会注意到差异，而如果它们具有不同的值，那么您每次都可能得到不同的结果，具体取决于线程的顺序线程到达

# javascript - 从 javascript 访问我的对象属性并使用 MVC razor Url.Action

> ID：14127575
> 
> 赞同：0
> 
> 时间：2013-01-02T18:58:46.620
> 
> 标签：javascript, asp.net-mvc-3, razor

我正在混合 Javascript 和 Razor 代码以重定向到发送几个参数的页面。这是我尝试过的代码。

```
function insertSuccess(data) {
       $('#NewCategoryGroup').dialog('close');
       var  myId = data.Object.GroupCatId;
       var  myName = data.Object.ItemCategoryGroup;
        window.location.replace("@Url.Action("CatGroupDetails","TaxRules",new { id = myId, name = myName })");
    } 
```

我可以更换`Id = 1`并且`name = "test"`它有效。但是当我尝试使用变量时，它不会让我这样做。我是否必须以旧方式编写我的 URL——“http://www.someweb.com/5?Name=test”。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:02:49.837

我认为在 myId 和 myName 上面的代码中是 javascript 变量，但您正试图在 C-Sharp 范围内使用它们。Url.Action 在这里是一个 C# 函数。

# ios - 使用 iTunes 11 安装 IPA

> ID：14127576
> 
> 赞同：51
> 
> 时间：2013-01-02T18:58:47.960
> 
> 标签：ios, xcode, itunes, ipa, app-distribution

我有一个为临时分发而签署的 IPA。我可以通过将它拖到设备上来使用 Xcode Organizer 很好地安装它。它还可以通过拖到设备名称上与 iTunes <=10 一起使用。不过，我想通过 iTunes 11 安装它。将其拖到设备名称上，否则应用部分不起作用。知道现在该怎么做吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-01-04T16:49:20.473

在 iTunes 11 中，您可以转到视图菜单和“显示边栏”，这将为您提供边栏，您可以拖放到该边栏。

您将拖放到侧边栏底部附近的开放区域（我通常使用 IPA 和配置文件来执行此操作）。完成此操作后，边栏中将出现一个应用程序菜单，其中包含您的应用程序。单击它，您将在主视图中看到您的应用程序。然后，您可以将您的应用程序从那里拖到您的设备上。请在下面找到一个视频（它是私人的，因此您需要 URL），它直观地概述了这些步骤：http: [//youtube.com/watch ?v=0ACq4CRpEJ8&feature=youtu.be](http://youtube.com/watch?v=0ACq4CRpEJ8&feature=youtu.be)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-06T13:45:55.027

对于 iTunes 11：

1.  通过查看 -> 显示侧边栏打开您的 iTunes “侧边栏”
2.  将 mobileprovision 和 ipa 文件拖到 LIBRARY 下的 iTunes“应用程序”中
3.  从 DEVICES 打开您的设备应用程序并单击应用程序的安装并等待 iTunes 同步

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-02T19:21:40.740

为此，我总是使用 iPhone 配置实用程序。允许更多控制并且速度更快 - 您不必同步整个设备。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-12-09T12:34:31.703

**适用于 OS X Yosemite 及更高版本，以及 Xcode 6+**

打开 Xcode > 窗口 > 设备

选择您的设备。您可以查看已安装的应用程序列表并通过点击添加一个新的应用程序列表`+`

[![Xcode 设备的屏幕截图](../Images/221a22f79e7eeafc36ea6d02f1137ba2.png)](https://i.stack.imgur.com/smjCB.png)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-10-23T13:24:49.430

对于 iTunes 12 及更高版本（优胜美地），双击 IPA 然后浏览您的 iOS 设备，在应用列表中您将看到该应用，单击在项目上安装。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-02T07:58:46.690

iTunes 11 及以上版本：

通过转到查看 -> 显示侧边栏打开您的 iTunes“侧边栏”，将 mobileprovision 和 ipa 文件拖到 LIBRARY 下的 iTunes“应用程序”，然后单击您的设备。从 DEVICES 打开您的设备应用程序并单击应用程序的安装并等待 iTunes 同步

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-10-30T16:24:59.787

对于 iTunes 12，将 .ipa 文件从 Finder 拖到不在设备内部的应用程序区域（在 iTunes 中）...或者，您只需双击 Finder 中的 .ipa。

重要提示：您必须更改版本和/或内部版本号。否则，您根本不会收到 iTunes 的通知...

然后在 iTunes 中切换到您的设备，并安装或更新应用程序。

然后点击同步。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-05T11:54:52.087

对于 osX Mavericks 用户，您可以使用[Apple Configurator](https://itunes.apple.com/us/app/apple-configurator/id434433123?mt=12)安装 ipa 文件。（而不是在 OSX 10.9 上崩溃的 iPhone 配置实用程序）

# .net - 为什么 UIElement.MoveFocus() 不将焦点移动到 ListBox 中的下一个同级元素？

> ID：14127577
> 
> 赞同：4
> 
> 时间：2013-01-02T18:58:58.180
> 
> 标签：.net, wpf, keyboard-events

我有以下视觉树：

```
<DockPanel>
    <TextBox Name="ElementWithFocus" DockPanel.Dock="Left" />
    <ListBox DockPanel.Dock="Left" Width="200" KeyUp="handleListBoxKeyUp">
        <ListBoxItem>1</ListBoxItem>
        <ListBoxItem>4</ListBoxItem>
        <ListBoxItem>3</ListBoxItem>
        <ListBoxItem>2</ListBoxItem>
    </ListBox>
    <TextBox DockPanel.Dock="Left" />
</DockPanel> 
```

`handleListBoxKeyUp`如下：

```
private void handleListBoxKeyUp(object sender, KeyEventArgs e)
{
    if (e.Key == Key.Enter)
    {
        ((UIElement)sender).MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));
    }
} 
```

当`ListBox`具有键盘焦点时（`ListBoxItem`我猜真的是这样），按下`Enter`会将焦点移动到中的第一项`ListBox`而不是下一项`TextBox`。为什么会发生这种情况，我怎样才能获得`Enter`像这里一样行事的钥匙`Tab`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T19:26:35.450

而不是调用`MoveFocus`发送者，您应该在事件 args 中找到的原始源调用它。

参数将`sender`始终是它`ListBox`本身，调用`MoveFocus`with`FocusNavigationDirection.Next`将转到树中的下一个控件，即 first `ListBoxItem`。

路由事件的原始来源将是 selected `ListBoxItem`，之后的下一个控件是`TextBox`您想要获得焦点的控件。

```
((UIElement)e.OriginalSource).MoveFocus(new TraversalRequest(FocusNavigationDirection.Next)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:21:34.593

另一种让代码转到下一个文本框的方法是手动引发选项卡事件。用以下代码替换 if 语句中的代码对我有用：

```
KeyEventArgs args = new KeyEventArgs(Keyboard.PrimaryDevice, Keyboard.PrimaryDevice.ActiveSource, 0, Key.Tab);
args.RoutedEvent = Keyboard.KeyDownEvent;
InputManager.Current.ProcessInput(args); 
```

# java - 如何分配从 .txt 文件中读取的值？

> ID：14127583
> 
> 赞同：2
> 
> 时间：2013-01-02T18:59:23.627
> 
> 标签：java, text, input, output

我正在开发一个程序来从 .txt 文件中读取 Wikipedia 页面视图统计文件，到目前为止，我有一个读取该文件的加载方法，如下所示：

```
public void loadPVSF(String x) throws FileNotFoundException, IOException {

        FileInputStream f = new FileInputStream(x);   //obtains bytes from an input file
        DataInputStream in = new DataInputStream(f);  //reads primitive java types
        BufferedReader br = new BufferedReader(new InputStreamReader(in));

        while ((temp = br.readLine()) != null) {

            tempArray = temp.split("\n");   //adds each line to an array tempArray

            for (String st : tempArray) //puts each element of tempArray through String st
            {    
                MainArray = st.split(" ");   //adds each string after a " " to MainArray

                for (String str : MainArray) {

                    if(linecounter<5){
                        linecounter++;

                        System.out.println(linecounter + ": " + str); 
```

运行它，这是以下命令行输出的示例：

```
1: commons.m 
2: Category:Gracie_Gold 
3: 1 
4: 7406
1: commons.m
2: Category:Grad_Maribor
3: 1
4: 7324
1: commons.m
2: Category:Grade_II*_listed_houses_in_Cheshire
3: 1
4: 7781 
```

基本上每组四行是：

```
1 - Language/Project
2 - Article Title
3 - Number of Page views
4 - Size of the Page (bytes) 
```

我需要知道如何正确分配这些读入行中的每一行。本质上，我最终需要的是一个哈希表，它将存储文章标题列表及其相应的查看次数，以便我可以确定哪个查看次数最多。

任何提示或建议将不胜感激。

输入 .txt 文件的示例：

nl Andreas_(apostel) 7 103145 nl Andreas_Baader 4 46158 nl Andreas_Bjelland 2 28288 nl Andreas_Burnier 2 11545 nl Andreas_Charles_van_Braam_Houckgeest 1 10373 nl Andreas_Eschbach 1 365 nl Andreas_Grassl 1 36

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:14:51.357

你可以有一个简单的类，比如

```
class Page {

String languageOrProject ;
String articleTitle;
int views;
int size ; 

} 
```

然后您可以使用比较器进行排序。或者，如果您只需要最大页面浏览量，请将其添加到`TreeMap`key 作为 Views 和 value 作为 pageTitle。最后，您将能够获得最少阅读页面`map.firstKey()`和最大阅读页面`map.lastKey()`

# python - 使用 reduce mul 在空白列表中返回 1 而不是 None

> ID：14127584
> 
> 赞同：0
> 
> 时间：2013-01-02T18:59:25.537
> 
> 标签：python, list, reduce

当我传递一个空列表时，我试图返回 1 而不是 None `reduce(mul, a)`。我的代码：

```
from operator import mul
def product_list(a):
    for b in a:
        b = reduce(mul, a)
        if b == None:
            return 1
        return b

print product_list([]) 
```

无论我将 if 语句放在哪里来捕获一个空白列表，我仍然会收到 None 作为输出。我仍在学习基础知识，但这对我来说毫无意义。我什至试过

```
from operator import mul
def product_list(a):
    if a == None:
        return 1
    else:
        for b in a:
            b = reduce(mul, a)
            if b == None or a == None:
                return 1
            return b

print product_list([]) 
```

只是想看看它是否会捕获 None 并返回 1。 reduce() 是否没有按照我认为的方式运行，或者我的代码中是否存在明显的错误，禁止返回 1 并强制返回 None？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T19:02:36.433

When`a`是一个空列表，您的函数不返回任何内容，默认返回值为`None`.

测试顶部的空列表：

```
if not a:
    return 1 
```

在您的第二个函数中，您只测试`if a == None`，但一个空列表`[]`永远不会等于`None`。请注意，测试的惯用方法`None`是使用`is`对象身份测试：

```
if a is None: 
```

相反，通过测试`not a`，您可以同时捕获`a`空列表*和*存在的情况`None`。

否则，您的代码毫无意义。您循环`a`但在第一次迭代中返回并退出该函数：

```
for b in a:
    b = reduce(mul, a)
    if b == None:
        return 1
    return b  # exit the function here, having only looked at the first element in `a`. 
```

但是，我必须修复您帖子中的缩进，并且可能误解了这些`return`语句的缩进，在这种情况下，`NameError`当您传入一个空列表时，您会得到 a 而不是。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T19:51:06.897

您可以将第三个值传递给`reduce`，用作起始值。

```
In [6]: reduce(mul, [], 1)
Out[6]: 1 
```

这是处理空列表的最佳方式。这个案例`None`真的应该在别处处理，因为它是另一种错误：程序的语义没有错，这是因为其他人给了你错误的数据。你应该明确地抓住它，例如

```
if not isinstance(..., collections.Iterable):
   # do something 
```

当然，`reduce`如果你传递一些不可迭代的东西，会引发错误，这对你来说可能就足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T19:07:56.143

请注意，您并没有像您所说的那样传递一个空列表来减少。尝试一下：

```
>>> reduce(operator.mul, [])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: reduce() of empty sequence with no initial value 
```

我想也许你不明白这个功能`reduce`。不过，我们不能反对你——它在 python 代码中的使用并不多。

也许你想定义一个这样的函数：

```
from operator import mul
def product_list(a):
    try:
        return reduce(mul,a)
    except TypeError:
        return 1 
```

现在你可以试试：

```
print product_list([1,2,3,4]) #24
print product_list([])  #1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T19:03:04.237

```
if a is None or len(a) == 0:
    return 1 
```

如上所述检查空列表条件。

# xpath - Xpath：通过父节点的多个属性定位节点

> ID：14127588
> 
> 赞同：2
> 
> 时间：2013-01-02T18:59:50.023
> 
> 标签：xpath

这是代码：

```
<li class="abc">
    <div class="abc">
         <input type="checkbox">
    </div>

    <div class="xyz">
        <div class="headline">Mongo like candy</div>
    <div>
</li>

<li class="abc">
    <div class="abc">
        <input type="checkbox">
    </div>

    <div class="xyz">
        <div class="headline">Candygram for mongo</div>
    <div>
</li> 
```

Xpath 挑战。我想找到包含标题“Mongo like candy”的 li 复选框，以便我可以使用 Selenium 选择它。换句话说，你如何从这里找到复选框：

```
li//div[@class='abc']//input[@type='checkbox'] 
```

但在同一父节点中使用不同的属性对其进行限定：

```
li//div[@headline][contains(text(),"Mongo like candy")] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:32:12.010

基本思想是用谓词限定最终路径，即

```
li[/*predicate here*/]//div[@class='abc']//input[@type='checkbox'] 
```

谓词表示您想要的 li 条件：

```
.//div[@class='headline' and contains(text(), "Mongo like candy")] 
```

将它们放在一起产生：

```
li[.//div[@class='headline' and contains(text(), "Mongo like candy")]]//div[@class='abc']//input[@type='checkbox'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:05:03.633

就像是

> li[div[@class='xyz']//div[@class='headline' and contains(text(),"Mongo like candy"))]]//input[@type='checkbox']

除非我弄乱了括号。（也就是说，您不仅选择`li`，而且选择正确的`li`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T21:34:32.813

即使这样也有效：

```
//li[1]/div[1]/input[@type='checkbox'] 
```

如果页面中引入了更多的 div 标签，它可能会失败。

# c# - 事件和事件日志有什么区别？

> ID：14127591
> 
> 赞同：2
> 
> 时间：2013-01-02T18:59:53.833
> 
> 标签：c#, .net, event-log, event-viewer

与以通常方式创建和读​​取条目的传统方法相比，使用`EventLogReader`命名空间中的更新有什么好处？`System.Diagnostics.Eventing.Reader``EventLog`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T07:52:55.377

传统方法的问题是您必须将所有条目加载到内存中，然后在客户端上过滤它们 -[`EventLog.Entries`](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.entries.aspx)集合将所有内容加载到内存中。

使用新方法，事件将不会加载到客户端。您可以[`write queries`](http://msdn.microsoft.com/en-us/library/bb671200.aspx)只检索您对客户端感兴趣的事件。

因此，如果您使用新类，您将消耗更少的内存，并且您的代码可能会运行得更快。

# android - Add picture to wall post using Facebook SDK 3.0?

> ID：14127595
> 
> 赞同：0
> 
> 时间：2013-01-02T19:00:33.303
> 
> 标签：android, facebook, facebook-graph-api

I want to post a message on my wall, adding a PNG image (*not* a URL), as shown below. Everything works except that no image is posted. Is this even supported? Is there a size limit?

```
Bundle params = new Bundle();
params.putString("access_token", session.getAccessToken());
params.putString("description", message);
params.putString("caption", caption);
params.putString("name", name);
params.putString("link", link);

// Does not work:
// params.putByteArray("photo", pngByteArray);
// params.putByteArray("picture", pngByteArray);

WebDialog feedDialog = (new WebDialog.FeedDialogBuilder(this,
   Session.getActiveSession(),
   params)) /* ... */ 
```

As you can see, I'm using the `FeedDialogBuilder` class to let the user confirm the wall post.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:05:12.977

This code is working for me:

```
Bundle params = new Bundle();
params.putString("access_token", session.getAccessToken());
params.putString("description", message);
params.putString("caption", caption);
params.putString("name", name);
bundle.putByteArray("picture", byte);
String response = facebook.request("me/photos",bundle,"POST"); 
```

hope it will help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T03:56:52.623

You need one more field in it,

params.putString("app_id", "Your_App_ID_Required");

it worked for me after I added this field..

# jquery - 停止 .animate 重新计算 .scroll 位置

> ID：14127601
> 
> 赞同：0
> 
> 时间：2013-01-02T19:01:02.317
> 
> 标签：jquery

如果您在传递 div id "one" 时查看此[jsfiddle](http://jsfiddle.net/7bdkB/60/)，然后在它移动完整 190px 之前再次滚动，则动画将在您滚动时停止。我希望动画继续移动到 190 像素，即使你再次滚动，当它返回 -100 像素时也是如此。

```
var $test = $(".test2");
$(window).scroll(function () {
if ($(this).scrollTop() > $('#one').position().top) {
$test.stop().animate({left: "190px"}, 1000);
} else {
$test.stop().animate({left: "-100px"}, 1000);
}
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:20:41.583

我认为您需要一个指示动画正在运行的变量，然后在动画完成时将其重置：

```
var $test2 = $(".test2");
var running = false;
$(window).scroll(function () {
    if (running)
        return;
    if ($(this).scrollTop() > 100) {
        running = true;
        $test2.stop().animate({left: "200px"}, 
                              300,
                              function() {
                                  running = false;
                              }
                             );
    } else {
        running = true;
        $test2.stop().animate({left: "-90px"},
                              300,
                              function() {
                                  running = false;
                              }
                             );
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:06:40.557

我可能不理解您正在寻找的功能，但如果您希望动画完成而不管用户向上滚动的事实，您可以`.stop()`从您的事件函数中删除。

[小提琴](http://jsfiddle.net/VYwXH/)

**JS**

```
var $test = $(".test2");

$(window).scroll(function () {
  if ($(this).scrollTop() > $('#one').position().top) {
    $test.animate({left: "190px"}, 1000);

  } else {
    $test.animate({left: "-100px"}, 1000);
  }

}) 
```

# asp.net - 无法加载 Bing 地图：“已加载'脚本代码 (Windows Internet Explorer)'”错误

> ID：14127604
> 
> 赞同：0
> 
> 时间：2013-01-02T19:01:29.913
> 
> 标签：asp.net, webforms, maps, bing-maps

我正在学习如何在网页上使用 Bing Maps AJAX 控件 7.0，当我根据[文档](http://msdn.microsoft.com/en-us/library/gg427611.aspx)处理示例时遇到了这个错误：

```
'iexplore.exe' (Script): Loaded 'Script Code (Windows Internet Explorer)'. 
Exception was thrown at line 1, column 3756 in http://ecn.dev.virtualearth.net/mapcontrol/v7.0/7.0.20121212140046.38/js/en-us/veapicore.js
0x800a139e - JavaScript runtime error: SyntaxError 
```

我的页面由一个带有地图的面板、一个用于查找位置的面板（正在进行中）和一个用于通过纬度和经度以及缩放和视图样式显示位置的面板组成。我的aspx中的代码是这样的：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="CSASPNETBingMaps.Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
    <script type="text/javascript">
        var map = null;
        var style = Microsoft.Maps.MapTypeId.road;

        function LoadMap() {
            // Create a new instance of the Map Class
            // pnlBingMap is the ID of the Panel

            // Show on map user's current location

            var mapOptions = { credentials: "bing map key", mapTypeId: style };
            var map = new Microsoft.Maps.Map(document.getElementById('pnlBingMap', mapOptions));
            var geoLocationProvider = new Microsoft.Maps.GeoLocationProvider(map);
            geoLocationProvider.getCurrentPosition();

        }

        function SetMap() {
            // Set the latitude value
            var lat = document.getElementById("txtLatitude").value;

            // Set the longitude value
            var lng = document.getElementById("txtLongitude").value;

            // Check if both of the latitude and longitude have been set
            if (lng == "" | lat == "") {
                alert("You need to input both Latitude and Longitude first.");
                return;
            }

            // Set the zoom level
            var ddlzoom = document.getElementById("ddlZoomLevel");
            var zoom = ddlzoom.options[ddlzoom.selectedIndex].value;

            // Reset the map instance
            var options = map.getOptions();
            options.mapTypeId = style;
            options.zoom = zoom;
            options.center = new Microsoft.Maps.Location(lat, lng);
            map.setView(options);
            // put a pin on the location
            var pin = new Microsoft.Maps.Pushpin(options.center);
            map.entities.push(pin);
        }

        function FindLoc() {
           //something will go here
        }

        function SetStyle(s) {
            if (s == "r") {
                style = Microsoft.Maps.MapTypeId.road;
            }
            else {
                style = Microsoft.Maps.MapTypeId.aerial;
            }
        }

    </script>
    <style type="text/css">
        .map
        {
            position: absolute;
            width: 700px;
            height: 500px;
            border: #555555 2px solid;
        }
    </style>
</head>
<body onload="LoadMap();">
    <form id="form1" runat="server">
    <div>
        <table>
            <tr>
                <td style="width: 740px; vertical-align: text-top">
                    <b>Bing Maps</b>
                    <br />
                    <asp:Panel ID="pnlBingMap" CssClass="map" runat="server">
                    </asp:Panel>
                </td>
                <td>
                    <asp:Panel ID="pnlSearch" runat="server" DefaultButton="btnLocation">
                        <b>Find a Location:</b><br />
                        Location:
                        <asp:TextBox ID="txtLocation" runat="server"></asp:TextBox>
                        <br />
                        <asp:Button ID="btnLocation" runat="server" Text="Submit" OnClientClick="FindLoc();return false;" />
                    </asp:Panel>
                    <br />
                    <asp:Panel ID="pnlDisplayOption" runat="server">
                        <b>Show a Map:</b>
                        <br />
                        View Style:
                        <asp:RadioButtonList ID="rdlViewStyle" runat="server" RepeatDirection="Horizontal"
                            RepeatLayout="Flow">
                            <asp:ListItem Selected="True" onclick="SetStyle('r')">Road</asp:ListItem>
                            <asp:ListItem onclick="SetStyle('a')">Aerial</asp:ListItem>
                        </asp:RadioButtonList>
                        <br />
                        Zoom Level:
                        <asp:DropDownList ID="ddlZoomLevel" runat="server">
                            <asp:ListItem>1</asp:ListItem>
                            <asp:ListItem>2</asp:ListItem>
                            <asp:ListItem>3</asp:ListItem>
                            <asp:ListItem>4</asp:ListItem>
                            <asp:ListItem>5</asp:ListItem>
                            <asp:ListItem>6</asp:ListItem>
                            <asp:ListItem>7</asp:ListItem>
                            <asp:ListItem>8</asp:ListItem>
                            <asp:ListItem>9</asp:ListItem>
                            <asp:ListItem>10</asp:ListItem>
                            <asp:ListItem>11</asp:ListItem>
                            <asp:ListItem Selected="True">12</asp:ListItem>
                            <asp:ListItem>13</asp:ListItem>
                            <asp:ListItem>14</asp:ListItem>
                            <asp:ListItem>15</asp:ListItem>
                            <asp:ListItem>16</asp:ListItem>
                            <asp:ListItem>17</asp:ListItem>
                            <asp:ListItem>18</asp:ListItem>
                            <asp:ListItem>19</asp:ListItem>
                        </asp:DropDownList>
                        <br />
                        <asp:Panel ID="pnlLatLng" runat="server" DefaultButton="btnLatLng">
                            Lat:
                            <asp:TextBox ID="txtLatitude" runat="server" Text="34.0540"></asp:TextBox>
                            <br />
                            Lng:
                            <asp:TextBox ID="txtLongitude" runat="server" Text="-118.2370"></asp:TextBox>
                            <br />
                            <asp:Button ID="btnLatLng" runat="server" Text="Submit" OnClientClick="SetMap();return false;" />
                        </asp:Panel>
                    </asp:Panel>
                    <br />
                </td>
            </tr>
        </table>
        <br />
        <br />
    </div>
    </form>
</body>
</html> 
```

我已经在 IE 10 和 Google Chrome 上测试了该页面，但在这两个地图上都显示如下： ![错误](../Images/f2a174116860f7a1c212b49d0c93cab0.png)

它说我的凭据无效，但我刚刚创建了 Bing Map 密钥。

我错过了什么？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:11:01.267

```
var mapOptions = { credentials: "bing map key", mapTypeId: style }; 
```

该字符串`"bing map key"`不是有效的 Bing Map 键。把真正的钥匙放在那里。

# javascript - 解密一个简短的 javascript 代码

> ID：14127607
> 
> 赞同：-2
> 
> 时间：2013-01-02T19:01:44.817
> 
> 标签：javascript

我搜索了我找不到解密 javascript 代码的好方法，这是一个示例：

```
var _6505=/[\x41\x42\x43\x44\x45\x46]/ 
```

我访问了一些网站进行解密，但它要求我提供密钥，而我没有任何密钥，

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T19:03:56.263

这不是真正的“加密”。它只是一串以十六进制数字表示的 ASCII 字符。`\x41\`是“A”，`\x42`是“B”，以此类推。你真正看到的是：

```
var _6505 = /[ABCDEF]/; 
```

考虑到它在正斜杠之间的定义方式，该`_6505`变量可能在某处用作正则表达式。

# c# - TreeView - 保存对数据库表的更改

> ID：14127608
> 
> 赞同：0
> 
> 时间：2013-01-02T19:01:46.403
> 
> 标签：c#, winforms, treeview

我有一个 C# winforms 应用程序表单，`TreeView`上面有一个。填充`TreeView`是使用数据库中的存储过程和视图（不是表）完成的。

这很好用，因为它将信息`TreeView`作为所有根节点放入。我为用户提供了拖放功能，`TreeView`因此他们可以移动节点并拥有`parent/child/grandchild/`等。但是，需要很多。这也很好用。

我正在努力解决的问题（更像是感到沮丧）是将用户的`TreeView`更改保存回数据库表。我考虑过每次移动都进行更改，但决定在所有移动完成后使用按钮单击事件。

我正在提供到目前为止我拥有的代码。请记住，这不是单击事件的最终外观，因为按钮未命名，并且还需要进行一些其他清理，并且`sqlUpdate`实际上将成为存储过程。

中`sqlUpdate`列出了 2 个参数；`@parentid`和`@industryid`。如果我要使用数字（例如：1 和 4）对它们进行硬编码，则更新将起作用并将表中的更改更改为正确的行业 ID。`TreeView`填充后，它使用表中的三 (3) 个字段；`IndustryID`, `ParentID`, `IndustryItem`. 这些进入数据表和`TreeView`.

我感到沮丧的是得到了`@parentid`，`@industryid`这就是我在这里发帖寻求帮助的原因。我已经做了很多次更新、删除、插入，但由于某种原因，这使得画一片空白。

我确实意识到我需要在代码中指定参数，但我认为这就是问题所在。这是2行；

```
command.Parameters.AddWithValue("@parentid", ?????);
command.Parameters.AddWithValue("@industryid", ?????); 
```

这是点击处理程序：

```
private void button6_Click(object sender, EventArgs e)
{
    using (SqlConnection conn = new SqlConnection(connStr))
    {
        SqlCommand command = new SqlCommand();
        {
            string sqlUpdate = "UPDATE tblIndustry SET IndustryItemParentID = @parentid WHERE IndustryID = @industryid";

            try
            {
                conn.Open();
                command.Connection = conn;

                command.CommandType = CommandType.Text;
                command.CommandText = sqlUpdate;
                command.ExecuteNonQuery();

                MessageBox.Show("Done");
            }

            catch (Exception ex)
            {
                MessageBox.Show("There is an error." + '\r' + '\n' + '\r' + '\n' + ex.ToString(), "NOTICE", MessageBoxButtons.OK);
            }

            finally
            {
                conn.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:32:57.783

这是一种方法：

对于 @industryid，在数据库中使用自动递增的 id 列。填充树视图时，将该值分配给树视图节点标签。然后使用treeview.parent.tag 的值作为@parentid。

# cocoa-touch - 解析需要格式化的长数字的算术表达式

> ID：14127611
> 
> 赞同：0
> 
> 时间：2013-01-02T19:02:24.827
> 
> 标签：cocoa-touch, expression, number-formatting

我正在尝试制作一个简单的计算器应用程序。目前，该应用程序运行良好。一个问题：将结果更改为格式化数字（800000 = 800,000）很聪明，但不是完整的表达式（200*600/21000 = 200*600/21,000）。

我希望能够有一种方法，我可以输入一个字符串并返回一个格式正确的数字字符串，操作仍在字符串内。

例子：

我喂方法 30000/80^2。方法返回 30,000/80^2。

编辑：人们似乎误解了这个问题（或者我可能误解了答案！）我希望能够将数字分开 - 60000/200000 将分成 60000 和 200000。我可以从那里做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:03:50.583

查找[NSNumberFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfNumberFormatting10_4.html)。这不仅会处理数字格式，还会根据用户的语言环境来处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:06:51.777

嗯，有什么问题？你显然可以解析整个表达式（你说计算器有效），你可以格式化单个数字（你说你可以格式化结果）。

您唯一需要做的就是解析表达式，格式化所有数字并重新组合表达式......

**编辑**：有一个更简单的解决方案。对于格式化，您不需要将表达式解析为树。你只需要找到数字。

我建议创建所有运算符的字符集

```
NSCharacterSet* operators = [NSCharacterSet characterSetWithCharactersInString:@"+*-/^()"];
NSCharacterSet* whitespaces = [NSCharacterSet whitespaceCharacterSet]; 
```

然后使用此集合拆分表达式：

```
NSString* expression = [...];
NSMutableString* formattedExpression = [NSMutableString string];
NSRange numberRange = NSMakeRange(0, 0);

for (NSUInteger i = 0; i < expression.length; i++) {
   unichar character = [expression characterAtIndex:i];

   if ([whitespaces characterIsMember:character] || [operators characterIsMember:character]) {
        if (numberRange.length > 0) {
            NSString* number = [expression substringWithRange:numberRange];
            NSString* formattedNumber = [self formatNumber:number];
            [formattedExpression appendString:number];

            numberRange.length = 0;
        }
   }
   else if (numberRange.length == 0) {
       numberRange.location = i;
       numberRange.length = 1;
   }
   else {
       numberRange.length++;
   }

   if ([operators characterIsMember:character]) {
       [formattedExpression appendFormat:@"%C", character];
   }
}

if (numberRange.length > 0) {
    NSString* number = [expression substringWithRange:numberRange];
    NSString* formattedNumber = [self formatNumber:number];
    [formattedExpression appendString:number];
} 
```

请注意，即使对于以符号为前缀的数字，这也应该有效。我忽略了所有的空格，因为如果你想要一个漂亮的表达式，你可能想要以不同的方式处理空格（例如，在 (、+/- 之前的空格、之后的空格 - 仅当它不是数字符号时...)。通常，对于处理空格，将表达式解析为树会简化问题。还要注意，中缀表达式不是明确的 - 这意味着您有时应该添加括号。但是，如果不解析为树，就无法做到这一点。

# image - Firefox 中的颗粒状图像，但 Chrome 中没有

> ID：14127612
> 
> 赞同：0
> 
> 时间：2013-01-02T19:02:30.147
> 
> 标签：image, google-chrome, firefox

我们在我们的主站点上使用 png 图像作为我们的徽标。图像约为 85x57 像素。每当我们在 Chrome 上查看网站时，图像看起来都很流畅。但是，在 Firefox 上，图像是颗粒状的，可以区分每个像素。这是 Chrome 的常见浏览器问题吗？或者有没有快速解决这个问题的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:06:26.267

如本文所述，“颗粒状外观”可能是由于 Firefox 中的错误造成[的](https://stackoverflow.com/questions/5918595/why-is-firefox-so-bad-at-resizing-images)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:04:55.917

浏览器在不以原始大小渲染时有不同的插值方法。

最佳建议：以原始尺寸渲染图像。

# menu - 出现在许多网页顶部的菜单术语

> ID：14127618
> 
> 赞同：-4
> 
> 时间：2013-01-02T19:02:51.463
> 
> 标签：menu, terminology

许多网页右上角出现的菜单的术语是什么？这里有两个例子： ![在此处输入图像描述](../Images/c61bb72bc3583ace9e297c23b917854d.png) ![在此处输入图像描述](../Images/f597b70cf0c056395172ec8dce56d040.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:07:09.607

可能：标题、顶部栏、导航栏、顶部菜单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:08:55.803

虽然我不完全确定它是否有任何具体名称。它可以称为“固定菜单”或“导航菜单”。

就其位置而言的名称。这真的取决于。对我来说，我会说它是一个固定导航菜单，因为它保留了页面之间的位置并提供导航。它不在网页的侧面，因此它不是侧面菜单，也不在页脚上，因此它不是页脚导航菜单。

# c - 如何检测 utf8 中使用的字母是什么？

> ID：14127620
> 
> 赞同：1
> 
> 时间：2013-01-02T19:03:10.910
> 
> 标签：c, unicode, utf-8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:23:04.643

我建议查看[Unicode "Script" property](http://www.unicode.org/reports/tr24/)。最新的数据库可以在[这里](http://www.unicode.org/Public/UNIDATA/Scripts.txt)找到。

为了快速而肮脏的实现，我会尝试扫描目标文本中的所有字符并查找每个字符的脚本名称。选择具有最多字符的脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:26:02.107

使用 N-gram 模型，然后给出足够大的训练数据集。描述此技术的完整示例可在此页面中找到，其中包括：

[http://phpir.com/language-detection-with-n-grams/](http://phpir.com/language-detection-with-n-grams/)

虽然本文假设您是用 PHP 实现的，并且“语言”是指英语、意大利语等...如果您需要，可以用 C 语言实现描述，而不是像英语等那样使用“语言” . 对于培训，只需使用您的“字母表”概念进行培训。例如，一起查看所有“拉丁字母”字符串，并考虑它们的 n-gram 为 n=2：

卓悦：“Bo”、“on”、“nj”、“jo”、“ou”、“ur”

你好：“他”、“el”、“ll”、“lo”

有了足够的训练数据，您会发现可能适用于所有拉丁文本的主要组合，例如，“Bo”和“el”可能很可能适用于用“拉丁字母”书写的文本。同样，这些组合在以“平假名字母”书写的文本中可能非常罕见。对于您可以提供足够训练数据的任何其他字母分类，也会有类似的发现。

这种技术也称为隐马尔可夫模型或马尔可夫链；搜索这些关键字将为实施提供更多想法。对于“又快又脏”，我会使用 n=2 并收集足够的训练数据，以便每个字母表中最不常见的字母至少遇到一次......例如至少一个“z”和至少一个“ぅ”*小平假名u

编辑：

对于比 N-Grams 更简单的解决方案，仅使用基本统计测试（最小值、最大值和平均值）来比较您的输入（用户给出的字符串）和字母表（您使用的一个字母表中的所有字符的字符串）感兴趣）。

步骤 1\. 将 Alphabet 的所有数值（例如 utf8 代码）放入一个数组中。例如，如果要测试的字母是“Basic Latin”，则创建一个数组 DEF := {32, 33, 34, ..., 122}。

步骤 2\. 将 Input 的所有数值放入一个数组中，例如，制作一个数组 INP := {73, 102, 32, ...}。

步骤 3\. 根据 INP 和 DEF 计算输入的分数。如果 INP 真的来自与 DEF 相同的字母表，那么我希望以下陈述是正确的：

*   最小（INP）>= 最小（DEF）
*   最大值（INP）<=最大值（DEF）
*   avg(INP) - avg(DEF) < EPS，其中 EPS 是一个合适的常数

如果所有陈述都是正确的，那么分数应该接近 1.0。如果全部为假，则分数应接近 0.0。在定义了这个“分数”例程之后，剩下的就是在您感兴趣的每个字母表上重复它，并选择一个给定输入的最高分数。

# ipad - Strange Node.JS error

> ID：14127626
> 
> 赞同：3
> 
> 时间：2013-01-02T19:03:29.663
> 
> 标签：ipad, node.js, express

I have running in my Mac a **Node.JS** server, and, I access to it from other computer, the server doesn't crash, but, I don't know why, the application crashes when I access from my iPad. If I access from Safari, the server works, but, with Chrome for iPad, the app crash!

This is the error: `TypeError: Cannot read property 'following' of null`. Why this happens?

EDITED:

```
app.get('/home', middleware.yeses, function (req, res){

 console.log(req.session.user + "\n\n");

 UserModel.find({ user: req.session.user }, function (err, user){

      console.log(user);

      res.render('home.ejs', {

         username: req.session.user,
         avatar: user[0].avatar,            
         following: user[0].following.length,
         followers: user[0].followers.length

      }); 

  });

}); 
```

EDITED:

I changed the `console.log(user);` to this `console.log(user[0].following)`. And there's no problem. I don't know why, there's a problem with it in the locals.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:09:11.797

发生这种情况是因为 JavaScript 正在引发异常。在代码中的某处，分配了一个变量，并且正在访问该变量上`null`的属性。`following`此操作引发异常。

```
var obj = null;
obj.following; // exception thrown! 
```

无法为您提供更多帮助。使用您提供的信息和代码（两者都很少）。但是寻找您在哪里访问`following`属性并从那里进行调试。

* * *

**更新：**

看来`user[0]`是`null`。为什么？不知道。这取决于您尚未发布的其他代码。在哪里`user`声明和填充？它是一个数组吗？因为这对于名为`user`.

# python-2.7 - 尝试使用 python 和 re 获取 reddit.com 的所有图像链接

> ID：14127633
> 
> 赞同：2
> 
> 时间：2013-01-02T19:04:21.707
> 
> 标签：python-2.7

我查看了其他帖子，并尝试将他们所说的内容实现到我的代码中，但我仍然遗漏了一些东西。

我想要做的是从网站上获取所有图像链接，特别是 reddit.com，一旦我获得在浏览器中显示图像或下载它们并通过 Windows Image Viewer 显示它们的链接。我只是想练习和拓宽我的 Python 技能。

我一直在获取链接并选择如何显示图像。我现在拥有的是：

```
import urllib2
import re
links=urllib2.urlopen("http://www.reddit.com").read()
found=re.findall("http://imgur.com/+\w+.jpg", links)
print found #Just for testing purposes, to see what links are found 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:09:28.753

`imgur.com`reddit 上的链接*没有*任何`.jpg`扩展名，因此您的正则表达式不会匹配任何内容。您应该寻找`i.imgur.com`域。

匹配`re.findall("http://i.imgur.com/\w+.jpg", links)`确实返回结果：

```
>>> re.findall("http://i.imgur.com/\w+.jpg", links)
['http://i.imgur.com/PMNZ2.jpg', 'http://i.imgur.com/akg4l.jpg', 'http://i.imgur.com/dAHtq.jpg', 'http://i.imgur.com/dAHtq.jpg', 'http://i.imgur.com/nT73r.jpg', 'http://i.imgur.com/nT73r.jpg', 'http://i.imgur.com/z2wIl.jpg', 'http://i.imgur.com/z2wIl.jpg'] 
```

您可以将其扩展为其他文件扩展名：

```
>>> re.findall("http://i.imgur.com/\w+.(?:jpg|gif|png)", links)
['http://i.imgur.com/PMNZ2.jpg', 'http://i.imgur.com/akg4l.jpg', 'http://i.imgur.com/dAHtq.jpg', 'http://i.imgur.com/dAHtq.jpg', 'http://i.imgur.com/rsIfN.png', 'http://i.imgur.com/rsIfN.png', 'http://i.imgur.com/nT73r.jpg', 'http://i.imgur.com/nT73r.jpg', 'http://i.imgur.com/bPs5N.gif', 'http://i.imgur.com/z2wIl.jpg', 'http://i.imgur.com/z2wIl.jpg'] 
```

您可能想要使用适当的 HTML 解析器而不是正则表达式；我可以推荐[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)和[`lxml`](http://lxml.de). 这将使查找所有`<img />`使用这些工具链接的标签变得更加容易`i.imgur.com`，包括`.gif`和`.png`文件，如果有的话。

# angularjs - 如何以编程方式构建视图内容

> ID：14127644
> 
> 赞同：1
> 
> 时间：2013-01-02T19:05:27.763
> 
> 标签：angularjs

我正在尝试在 AngularJS 视图中构造一个句子。例如，对于 variables `{overdue: 5, name: "Kasper"}`，我想拥有`"{{overdue}} days overdue. Employee: {{name}}"`.

我尝试使用一个函数：

```
function renderLine() {
    var results = new Array();
    if (overdue) {
        result.push("{{overdue}} days overdue");
    }
    if (overdue) {
        result.push("{{points}} points");
    }
    /* combine into a string */
    var result = "";
    for (var i = 0; i < results.length; i+=1) {
        if (result.length != 0) {
            result += ", ";
        }
        result += results[i];
    }
    if (result.length > 0) {
        result += ". ";
    }
    /* add name */
    result += "Name: {{name}}";
    return result,
} 
```

更具体地说，我的问题是：如何在以编程方式构造并有角度处理指令的字符串中使用像 {{variable}} 这样的角度指令？我不想在不使用指令的情况下构造字符串，因为字符串被翻译成不同的语言，其中变量在句子中的位置可能会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:28:09.997

我最终创建了一个角度指令。`ui-if`和指令是 DOM 操作指令的`ngRepeat`良好起点。有一些修改指令的代码：

```
angular.module("hk").directive("myDirective", 
[       "$interpolate", "$log",
function($interpolate,   $log) {
    return {
        transclude: 'element',
        replace: false,
        restrict: 'A',
        terminal: true,
        compile: function(tElement, tAttrs, linker) {
            return function(scope, elem, attr) {
                var lastElement;
                var lastScope;
                var expression = attr.myDirective;
                scope.$watch(expression, function (item) {
                    if (lastElement) {
                        lastElement.remove();
                        lastElement = null;
                    }
                    if (lastScope) {
                        lastScope.$destroy();
                        lastScope = null;
                    }
                    lastScope = scope.$new();
                    lastScope.item = item;
                    linker(lastScope, function (clone) {
                        lastElement = clone;
                        var results = [];
                        if (item.isactive) {
                            results.push("++{{item.createdtime | age}} active");
                            if (item.status == 'started') {
                                results.push("++{{item.startedtime | age}} started: {{item.startedby_displayname}}");
                            }
                        }
                        if (item.islate) {
                            results.push("++{{item.latetime | age}} past due");
                        }
                        var result = "";
                        for (var i = 0; i < results.length; i+=1) {
                            if (result.length != 0) {
                                result += ", ";
                            }
                            result += results[i];
                        }
                        if (result.length > 0) {
                            result += ". ";
                        }
                        if (!item.startedby_displayname) {
                            if (item.assignedto_displayname) {
                                result += "++Assigned to {{item.assignedto_displayname}}.";
                            }
                        }
                        var interpolated = $interpolate(result)(lastScope);
                        elem.after(interpolated);
                    });
                });
            };
        }
    };
}]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:43:07.563

我认为您可以将`$scope.$eval`其用于您的目的。[看到这个小提琴](http://jsfiddle.net/iweinfuld/yx37f/1/)

在您可以创建这样的消息：

```
$scope.$eval('"Hello "+name'); 
```

然后让要评估的字符串根据语言进行更改。

```
{de: '"Hallo " + name', it: '"Buon giorno "+ name', fr: '"Salut " +name'} 
```

或者类似的东西（当然你会想要检查这些翻译）。

您还可以创建一个[指令并使用 $compile](http://docs.angularjs.org/api/ng.%24compile)来保留您现在正在使用的确切字符串。

# javascript - Rails 完成请求后动态推送内容

> ID：14127646
> 
> 赞同：1
> 
> 时间：2013-01-02T19:05:37.323
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

目前，我正在使用 Ruby on Rails 构建网站。

问题：我的网站使用不同的外国 API 来获取数据，例如亚马逊产品广告 API。如果我一次加载例如 10 个对象，则需要花费时间。它可以加载每个特定的对象吗？（如果一个请求完成后在页面上使用 javascript 推送它，或类似的东西）用户应该能够在后台加载其余内容时读取第一个对象。

简单的例子：

```
list.each do |object|
  result << AmazonRequest.getItem(object)
  [And now push the changed result list to the view]
end 
```

这可能吗？如果是，如何？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:15:07.783

我真的不知道 RoR，但是如果您不需要在发送它们之前在服务器上拥有所有不同的 API 结果（似乎是这种情况），您可以发出多个 ajax 请求并显示来自不同的API 独立。

# ruby-on-rails - 将会话控制器分解为 3 个单独的控制器？

> ID：14127647
> 
> 赞同：1
> 
> 时间：2013-01-02T19:05:42.183
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个带有 3 个动作的 session_controller：

```
new
create
destroy 
```

但我认为如果我为每个操作创建单独的控制器会更清楚，每个控制器只做一件事（sessions#new 对我来说不如 login#new 清楚）：

```
signup
login
logout 
```

本质上是在文件级别而不是函数级别分解操作。

有理由做一个而不是另一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:20:32.203

虽然您当然可以将它们分解为单独的控制器，但我认为没有必要，这会使您的生活变得更加艰难。

听起来您需要利用[`routes.rb`](http://guides.rubyonrails.org/routing.html)将请求与控制器匹配。这将使您的会话逻辑保持分组，同时使您的路径更有意义。

# visual-c++ - Sandcastle、/doc 和非托管 C++

> ID：14127648
> 
> 赞同：3
> 
> 时间：2013-01-02T19:05:43.417
> 
> 标签：visual-c++, doxygen, unmanaged, sandcastle, shfb

我从事一个使用非托管可视化 C++ 和少量 C# 的项目。我们正在尝试想出一种方法来记录我们的项目，包括 API 参考以及一些额外的概念文档。理想情况下，所有文档都放在一个 .chm 文件中，我们可以将其与我们的产品一起分发。

作为一名长期的 C++ 开发人员，我已经熟悉 Doxygen。有人建议我也研究一下 Sandcastle，但我遇到了一些障碍。

从许多其他来源，包括本网站上的其他帖子，众所周知，sandcastle 不支持非托管 C++。我确实找到了一篇似乎表明您仍然可以通过将 API 参考添加为概念主题来将 C++ 文档塞进沙堡的帖子。

使用 Visual Studio 2010，您可以在非托管 C++ 项目的项目设置中打开 /doc 选项。这会生成 .XDC 文件，然后 Studio 会将其编译为与您的 lib/dll/exe 一起使用的 .xml 文件。我被卡住的地方是不清楚你可以用这个 xml 文件做什么。我在网上找到的一些页面建议您可以将此文件用于智能感知，但我从未见过在非托管 C++ 中使用该文件。我希望我能够以某种方式在 Sandcastle Help File Builder 中使用这个 .xml 文件，但是我找不到任何关于如何在线完成的示例，而且我对 SHFB 所做的每一次尝试都失败了。如果我想添加现有的概念帮助文件，它似乎只需要 MAML 或 HTML 文件。

所以我的问题：

1.  有没有办法让我的 /doc 生成的 .xml 文件进入我的 SHFB 帮助解决方案？
2.  如果不是，非托管 C++ 的 /doc 选项有什么意义？
3.  是否可以对我的 /doc 生成的 .xml 文件进行某种转换以生成 HTML 或 MAML，然后我可以通过 SHFB 导入这些文件？

这可以工作，还是我应该回到 Doxygen？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T02:54:32.140

理论上，Sandcastle 可用于记录非托管代码，但它需要一个工具来生成当前由 MRefBuilder.exe 工具为托管代码程序集生成的等效反射数据文件。到目前为止，据我所知，没有人这样做过。

由于我不再使用它，因此我无法评论未管理的 C++ 缺乏 IntelliSense。猜测一下，假设使用相同的编译器但带有一些额外的命令行选项，/doc 可能用于托管代码输出。

使用 XSL 将 XML 注释转换为 MAML 是一种可能，但同样，我不知道有人在追求这种选择。我的猜测是，在这种情况下，大多数人选择使用 Doxygen，因为它是一个成熟的解决方案。

埃里克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-03T15:38:12.853

我也有类似的情况。我的 C++/CLI 绑定中需要 XML 文档，以便 .NET 代码可以通过 Intellisense 看到它们。但仅供参考，Visual Studio 2010 不支持原生代码中的 XML 文档：

[https://msdn.microsoft.com/en-us/library/ms177226(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/ms177226(v=vs.100).aspx)

> Visual Studio 2010
> 在 Visual C++ 中，您可以将 XML 文档（三斜杠）注释添加到源代码并指示编译器将它们输出到 .xml 文件。然后可以将该文件输入到为代码中的类创建文档的过程中。**此版本的 Visual C++ IDE 不支持 Intellisense 中的 XML 注释。**

Visual Studio 2013 中删除了该限制。但是，如果您在本机代码中使用模板（例如 Boost 库），它仍然是一个令人讨厌的生态系统：

> 在当前版本中，不会对模板或包含模板类型的任何内容（例如，将参数作为模板的函数）处理代码注释。添加此类注释将导致未定义的行为。

I found your question while searching for a way to temporarily disable the XML comment parser with a `#pragma` or `#define` when including such libraries.

# php - 如何插入数据并能够检索 id (mysqli/php)

> ID：14127649
> 
> 赞同：3
> 
> 时间：2013-01-02T19:05:51.680
> 
> 标签：php, sql, mysqli

我正在努力插入数据并能够从数据库中选择一个 AnswerId。这就是我想要做的：

以下是我目前拥有的表格作为示例：

![在此处输入图像描述](../Images/19f106deffe6de40c807195213c1e81f.png)

我从下面的查询中获取上述详细信息的详细信息（“每个答案的分数”列除外）：

```
 $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, an.Answer, q.QuestionMarks 
   FROM Session s 
   INNER JOIN Question q ON s.SessionId = q.SessionId
   JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
   WHERE s.SessionName = ?
   ORDER BY q.QuestionId, an.Answer
   "; 
```

查询结果：

![在此处输入图像描述](../Images/f570817e4ae11b5beb695e0749b304b0.png)

上面查询结果中的每个答案实际上在“答案”表中都有自己的 AnswerId，结果如下：

![在此处输入图像描述](../Images/43e00d154d92f148f2154b90045d77fb.png)

下面是显示上表是如何制作的视图源代码：

```
<table border='1' id='markstbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='questionth'>Question</th>
<th class='answerth'>Answer</th>
<th class='answermarksth'>Marks per Answer</th>
<th class='totalmarksth'>Total Marks</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>

<tr class="questiontd">
        <td class="questionnumtd q1_qnum" name="numQuestion" rowspan="3">1 <input type="hidden" name="q1_ans_org" class="q1_ans_org" value="4"><input type="hidden" name="q1_ans" class="q1_ans" value="4"></td>
    <td class="questioncontenttd" rowspan="3">Here are 3 answers </td>
    <td class="answertd" name="answers[]">B</td>
<td class="answermarkstd">
<input class="individualMarks q1_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="1" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
<td class="totalmarkstd" rowspan="3">4</td>
<td class="noofmarkstd q1_ans_text"  q_group="1" rowspan="3"><strong>4</strong></td>
</tr>

<tr class="questiontd">
    <td class="answertd" name="answers[]">D</td>
<td class="answermarkstd">
<input class="individualMarks q1_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="1" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
</tr>

<tr class="questiontd">
    <td class="answertd" name="answers[]">F</td>
<td class="answermarkstd">
<input class="individualMarks q1_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="1" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
</tr>

<tr class="questiontd">
        <td class="questionnumtd q2_qnum" name="numQuestion" rowspan="2">2 <input type="hidden" name="q2_ans_org" class="q2_ans_org" value="6"><input type="hidden" name="q2_ans" class="q2_ans" value="6"></td>
    <td class="questioncontenttd" rowspan="2">What 2 speeds can you do in a carriageway (single and dual) </td>
    <td class="answertd" name="answers[]">A</td>
<td class="answermarkstd">
<input class="individualMarks q2_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="2" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
<td class="totalmarkstd" rowspan="2">6</td>
<td class="noofmarkstd q2_ans_text"  q_group="1" rowspan="2"><strong>6</strong></td>
</tr>

<tr class="questiontd">
    <td class="answertd" name="answers[]">C</td>
<td class="answermarkstd">
<input class="individualMarks q2_mark"  q_group="1" name="answerMarks[]" type="text" data-type="qmark" data-qnum="2" onkeypress="return isNumberKey(event)" maxlength="3" />
</td>
</tr>
</tbody>
</table>

<p>
<input type='hidden' id='num_groups' name='num_groups' value='2'>
<input id="submitBtn" name="submitMarks" type="submit" value="Submit Marks" />
</p>

</form> 
```

我遇到的问题是我的插入。我想将数据插入到“Individual_Answer”表中的“AnswerId”和“AnswerMarks”表中，这样我们就知道每个答案值多少分。因此，在提交顶层表并插入后，数据库表应如下所示：

Individual_Answer 表：

```
AnswerId  AnswerMarks
295       2
296       1
297       1
298       3
299       3 
```

我似乎无法弄清楚如何首先为每个答案检索“AnswerId”，然后才能将数据插入数据库。下面是我的尝试，但我的问题是有人可以修复下面的代码以便能够检索“AnswerId”然后正确插入数据吗？

下面是我的尝试（我使用 mysqli/php）：

```
 <?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

var_dump($_POST);  

 $answersql = "INSERT INTO Individual_Answer (AnswerId, AnswerMarks) 
    VALUES (?, ?)";

if (!$insertanswer = $mysqli->prepare($answersql)) {
    // Handle errors with prepare operation here
    echo __LINE__.': '.$mysqli->error;
}

//make sure both prepared statements succeeded before proceeding
if($insertanswer)
{
    $sessid =  $_SESSION['id'] . ($_SESSION['initial_session'] > 1 ? $_SESSION['sessionCounting'] : '');
   $c = count($_POST['numQuestion']);

    for($i = 0;  $i < $c; $i++ )
    {

$answerquery = "SELECT AnswerId FROM Answer WHERE (SessionId = ? AND QuestionId = ? and Answer = ?)";

    if (!$answerstmt = $mysqli->prepare($answerquery)) {
  // Handle errors with prepare operation here
  echo __LINE__.': '.$mysqli->error;
}

// Bind parameter for statement
$answerstmt->bind_param("iis", $sessid, $_POST['numQuestion'][$i], $_POST['answers'][$i]);

// Execute the statement
$answerstmt->execute();

            if ($answerstmt->errno) 
            {
                // Handle query error here
                echo __LINE__.': '.$answerstmt->error;
                break 1;
            }

// This is what matters. With MySQLi you have to bind result fields to
// variables before calling fetch()
$answerstmt->bind_result($dbAnswerId);

// This populates $optionid
$answerstmt->fetch();

$answersql->bind_param('ii', $dbAnswerId, $_POST['answers'][$i]);

    $answerstmt->close();

}
    //close your statements at the end

    $insertanswer->close();
}

?> 
```

var_dump($_POST) 在下面显示：

```
array(7) { 
["q1_ans_org"]=> string(1) "4" 
["q1_ans"]=> string(1) "0" 
["answerMarks"]=> array(5) 
{ 
[0]=> string(1) "2" 
[1]=> string(1) "1" 
[2]=> string(1) "1" 
[3]=> string(1) "3" 
[4]=> string(1) "3" } 
["q2_ans_org"]=> string(1) "6" 
["q2_ans"]=> string(1) "0" 
["num_groups"]=> string(1) "2" 
["submitMarks"]=> string(12) "Submit Marks" 
} 
Notice: Undefined index: numQuestion in ... on line 55 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:15:28.307

您没有将值绑定到以下查询，

```
$answersql = "INSERT INTO Individual_Answer (AnswerId, AnswerMarks) 
VALUES (?, ?, ?)"; 
```

**编辑：**这是[手册](http://php.net/manual/en/mysqli-stmt.bind-param.php)。应该是这样的

```
$answersql->bind_param('ii', $value1, $value2); //Value1, value2 are the values to be inserted. 
```

# opera - Selenium 远程 webdriver 不接受所需的功能

> ID：14127651
> 
> 赞同：0
> 
> 时间：2013-01-02T19:05:53.230
> 
> 标签：opera, selenium-webdriver

我正在尝试使用 remoteWebdriver 启动一个operaDriver，我的代码是：

```
static private IWebDriver driver;
DesiredCapabilities capability = DesiredCapabilities.Opera();
driver = new RemoteWebDriver("http://localhost:9515", capability); 
```

但是，这给了我 RemoteDriver has invalid arguments 的错误，它指定 RemoteDriver 将 OpenQA.Selenium.ICapabilities 类型作为参数，这在我的代码中被违反了。

我在这里很困惑。有人可以分享一些灯吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T06:06:35.113

我想你可以试试这个

就像在java中一样。您可以在 C# 中尝试 URL 类

```
grid_url =  new URL("http://localhost:9515/wd/hub");
   driver = new RemoteWebDriver(grid_url, capability); 
```

# .net - SQL Server 2012 Date DateTime 数据类型：从 .NET 传递参数：静默转换？

> ID：14127652
> 
> 赞同：1
> 
> 时间：2013-01-02T19:05:56.973
> 
> 标签：.net, date, datetime, parameters, sql-server-2012

SQL Server 2012 中的存储过程需要**Date**数据类型

```
create proc foo
@invoicedate date
as
begin
end 
```

编辑：只要时间组件不相关，应用程序服务器端就会使用 Date 。例如，日记，其中只需要年月日。

客户端，.NET中的参数定义如下：

```
// at this point in the code, caldate is an Object
// that can be cast to DateTime

SqlParameter p2 = new SqlParameter();
p2.SqlDbType = System.Data.SqlClient.SqlDbType.Date;
p2.ParameterName = "@invoicedate";
p2.Value = (DateTime) caldate;
cmd.Parameters.Add(p2); 
```

`caldate`当值绑定到参数的`.Value`属性时，.NET SqlClient 数据库是否会自动（静默）从参数值客户端剥离时间分量`p2`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:10:11.563

很确定您想改用`DateTime`or `SmallDateTime`，根据[此信息](http://msdn.microsoft.com/en-us/library/system.data.sqldbtype.aspx) `Date`仅存储日期。

# ms-access - 在 Access 2010 中将复选框值与表中的布尔列进行比较的语法

> ID：14127653
> 
> 赞同：1
> 
> 时间：2013-01-02T19:06:01.423
> 
> 标签：ms-access, ms-access-2007

我正在尝试将是/否布尔字段与查询中表单上的复选框值进行比较。有人可以告诉我在 Access 中比较这些值的表达式的语法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:16:56.297

如果您有一个未绑定的复选框，它可能有一个空值，这与表布尔值（是/否）不同，它必须是真或假（是或否，-1 或 0）。如果检查未完成，您可以使用它跳过检查。

```
If Not IsNull(Me.CheckBox) Then
   sWhere = " And MyYesNo=" & Me.CheckBox
End If 
```

对于查询，您可以说：

```
SELECT AYesNo
FROM Table1 
WHERE AYesNo Like
  IIf(IsNull([forms]![myform]![CheckBox]),"*",[forms]![myform]![CheckBox]) 
```

# objective-c - 为什么我的导航栏控制器不处理导航栏视图上的 touchesEnded 事件？

> ID：14127656
> 
> 赞同：0
> 
> 时间：2013-01-02T19:06:12.110
> 
> 标签：objective-c, ios, uinavigationcontroller, uinavigationbar, touch-event

[这个问题](https://stackoverflow.com/questions/6727043/touchesended-event)最接近描述我的问题，但我在一般过程中遗漏了一些东西，答案最终变成“没关系，我想出了一个没有描述的不同解决方案”。

就我而言，我有一个带有导航栏及其控制器的 XIB。对于类字段，我已经填写了我的自定义类名。这是显示 XIB 的屏幕截图，因为我认为这应该是一个相对简单直接的设置...

![导航栏及其控制器。](../Images/8d93487238807ef97bdb30e471f5f6c6.png)

我想要的（就像开头的链接一样）是触发 touchesEnded 事件，以便我可以做一些事情。这适用于“视图”；我可以以编程方式写入事件，设置断点，然后查看断点是否被命中。但是，我更高级别的目标是在那时将一个新视图推送到应用程序上——这是我不应该在视图功能中做的事情，而且我无论如何也做不到，因为我的视图无权访问导航控制器（除非我做了一些诡计来检索控制器，但我想干净地做到这一点）。

即使它以编程方式为视图工作，touchesEnded 事件也不会被导航视图的控制器击中。我将它设置为委托，如下图所示，我怀疑这可能只是我需要做的一部分。

![我设置了导航栏的代表](../Images/23afccca7aa419c7161d4a45f13e1387.png)

所以现在我已经设置了委托，并且已经看到 touchesEnded 事件被视图击中，为什么我的导航栏视图控制器没有接收到 touchesEnded 事件？我是不是弄错了，应该弄清楚如何从导航栏的视图中推送一个新视图，因为我已经看到 THAT touchesEnded 事件被击中了？这似乎是我应该在导航栏视图的控制器中处理的事情，但我无法获得该控制器的 touchesEnded 事件命中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:53:10.227

从您的帖子中不清楚，但看起来您正在明确地向您的应用程序添加导航栏，这是真的吗？如果您的控制器嵌入在导航控制器中，则无需这样做。您可以将视图添加到导航栏，并将 UIImage 视图添加为子视图。如果您将用户交互设置为开启，并在图像视图中添加轻击手势识别器，您应该能够获得您想要的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:42:14.720

然后你必须重写 UINavigationBar，并重写 becomeFirstResponder，返回 YES。

# javascript - 在按钮单击时添加或减去变量值？

> ID：14127660
> 
> 赞同：-3
> 
> 时间：2013-01-02T19:06:23.913
> 
> 标签：javascript, variables, buttonclick

我对javascript很陌生，所以如果这实际上是一件疯狂的简单事情，请原谅我，但我一直在谷歌搜索并浏览我所有的参考网站，但没有运气。我要做的是显示变量的值，并在用户单击适当的按钮时将变量的值更改为 +1 或 -1 -[像这样](http://i.stack.imgur.com/RaFz9.png)。

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:50:25.723

以下是您可以使用的示例。这是一个完整的 HTML 页面，您可以在网络浏览器中打开它来查看实际情况。将其复制并粘贴到文本文件中，然后将其另存为`example.html`. 在记事本或类似的东西中打开它来编辑它。

这只是一个简单的例子——有很多方法可以做这样的事情。谷歌一下，看看例子，然后和他们一起玩，一点一点地，它会很有意义。

虽然它很旧，而且并不总是完美的，但如果您想了解更多[，W3C 的示例可能仍然是一个不错的起点。](http://www.w3schools.com/js/default.asp)

```
<html>
<head>
    <script type="text/javascript">
        var currentValue = 0;
        var add = function(valueToAdd){
            alert("adding: " + valueToAdd);
            currentValue += valueToAdd;
            document.getElementById('number').innerHTML = currentValue;
        };
    </script>

    </head>
    <body>
        <div id="text">Number of eggs:<span id="number">0</span><div>
        <a href="javascript:add(1)">Plus 1</a>
        <a href="javascript:add(-1)">Minus 1</a>

    </body>
</html> 
```

更新：一点补充：如果您想要一本关于 Javascript 的相当新的好书，并且想“正确地”学习它，那么[JavaScript: The Good Parts](http://shop.oreilly.com/product/9780596517748.do)可能就是您想要的书。它不是一本大书（如果我没记错的话，不到 100 页），但对这门语言提供了一个很好的概述。

# sql-server - Sqoop 连接到 MS SQL 超时

> ID：14127663
> 
> 赞同：1
> 
> 时间：2013-01-02T19:06:37.203
> 
> 标签：sql-server, sqoop

我正在尝试使用 Sqoop 连接到 Microsoft SQL Server。我按照[Sqoop Connector](http://www.microsoft.com/en-us/download/details.aspx?id=27584)和[JDBC Driver](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=21599)的说明安装了 Microsoft 的 JDBC 驱动程序。接下来我尝试列出服务器上的数据库。我尝试了以下命令：

```
sqoop list-databases --connect 'jdbc:sqlserver://<HOST>' --username <USER> --password <PASS>
sqoop list-databases --connect 'jdbc:sqlserver://<HOST>;username=<USER>;password=<PASS>'
sqoop list-databases --connect 'jdbc:sqlserver://<HOST>;username=<USER>;password=<PASS>' --username <USER> --password <PASS> 
```

这些命令中的每一个都会产生相同的错误消息。

```
 13/01/02 10:44:52 ERROR sqoop.ConnFactory: Error loading ManagerFactory information from file <MY SQOOP DIRECTORY>/conf/managers.d/mssqoop-sqlserver: java.io.IOException: the content of connector file must be in form of key=value
at org.apache.sqoop.ConnFactory.addManagersFromFile(ConnFactory.java:219)
at org.apache.sqoop.ConnFactory.loadManagersFromConfDir(ConnFactory.java:294)
at org.apache.sqoop.ConnFactory.instantiateFactories(ConnFactory.java:85)
at org.apache.sqoop.ConnFactory.<init>(ConnFactory.java:62)
at com.cloudera.sqoop.ConnFactory.<init>(ConnFactory.java:36)
at org.apache.sqoop.tool.BaseSqoopTool.init(BaseSqoopTool.java:200)
at org.apache.sqoop.tool.ListDatabasesTool.run(ListDatabasesTool.java:44)
at org.apache.sqoop.Sqoop.run(Sqoop.java:145)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:181)
at org.apache.sqoop.Sqoop.runTool(Sqoop.java:220)
at org.apache.sqoop.Sqoop.runTool(Sqoop.java:229)
at org.apache.sqoop.Sqoop.main(Sqoop.java:238)
at com.cloudera.sqoop.Sqoop.main(Sqoop.java:57)

13/01/02 10:45:08 ERROR manager.CatalogQueryManager: Failed to list databases
com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host <HOST>, port 1433 has failed. Error: "connect timed out. Verify the connection properties, check that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port, and that no firewall is blocking TCP connections to the port.".
at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:171)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:1033)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:817)
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:700)
at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:842)
at java.sql.DriverManager.getConnection(DriverManager.java:579)
at java.sql.DriverManager.getConnection(DriverManager.java:221)
at org.apache.sqoop.manager.SqlManager.makeConnection(SqlManager.java:665)
at org.apache.sqoop.manager.GenericJdbcManager.getConnection(GenericJdbcManager.java:52)
at org.apache.sqoop.manager.CatalogQueryManager.listDatabases(CatalogQueryManager.java:56)
at org.apache.sqoop.tool.ListDatabasesTool.run(ListDatabasesTool.java:49)
at org.apache.sqoop.Sqoop.run(Sqoop.java:145)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:181)
at org.apache.sqoop.Sqoop.runTool(Sqoop.java:220)
at org.apache.sqoop.Sqoop.runTool(Sqoop.java:229)
at org.apache.sqoop.Sqoop.main(Sqoop.java:238)
at com.cloudera.sqoop.Sqoop.main(Sqoop.java:57) 
```

我已经使用 Microsoft SQL Server Management Studio 连接到数据库，以确保数据库正在运行并且主机/用户名/密码都正确。此外，我已确保端口已打开，并且 MSSQL 位于另一侧，如下所示。

```
sudo nmap -sS -p 1433 <HOST>

Starting Nmap 5.21 ( http://nmap.org ) at 2013-01-02 11:04 PST
Nmap scan report for <HOST> (<HOST IP>)
Host is up (0.00070s latency).
rDNS record for <HOST IP: <HOST FQDN>
PORT     STATE    SERVICE
1433/tcp filtered ms-sql-s

Nmap done: 1 IP address (1 host up) scanned in 0.33 seconds 
```

关于我应该从这里去哪里的任何建议？我无法找到有关此错误的任何文档。谢谢

我目前正在尝试使用 FreeTDS 中的 OSQL 来验证 SQL 服务器是否可以访问。将用我的发现更新这篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:27:09.617

经过大量搜索并与许多人交谈后，我确定此问题是由端口被阻止引起的。我仍然不能 100% 确定为什么会发生这个错误。如果我尝试使用无效的用户名或密码，它会成功告诉我它们无效。只有在进行实际查询时才会限制端口。很可能使用了不同的端口。

# perl - 如何从子文件夹中复制文件？（文件名列表在文本文件中）使用命令行和 perl

> ID：14127664
> 
> 赞同：0
> 
> 时间：2013-01-02T19:06:37.140
> 
> 标签：perl, batch-file, copy, cmd, subdirectory

我想搜索文件夹及其子文件夹中的文件列表，并将结果复制到不同的文件夹。

我目前正在使用：

```
for /F "delims==" %i in (listimagescopy.txt) do copy "V:\Photo Library\%i.jpg" "V:\Current Library\Work Zone" 
```

“照片库”中有子文件夹，我需要命令行也应该在子文件夹中查找“listimagescopy.txt”中列出的文件

*在子文件夹中也*可能有 2 个同名文件 - 我需要能够指定在文件夹中查找列表中的文件时，它应该返回每个文件的较新版本（或者如果这很复杂使用 cmd 进行操作，如果在复制文件时它们的名称不同 ex file1 file2) 也可以

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:54:32.060

**批量解决方案：**

您可以使用[FOR /R](http://ss64.com/nt/for_r.html)列出所有子文件夹：

```
FOR /R "V:\Photo Library" %G in (.) do @echo %G 
```

并为每个文件夹启动稍作修改的命令：

```
FOR /R "V:\Photo Library" %G in (.) do for /F "delims=" %i in (listimagescopy.txt) do xcopy "%G\%i.jpg" "V:\Current Library\Work Zone" /D /Y 
```

xcopy /D 将仅复制较新的文件， /Y 将覆盖而无需确认。在批处理文件中，检查源是否存在，您可以使用：

```
@echo off
FOR /R "V:\Photo Library" %%G in (.) do (
  for /F "delims=" %%i in (listimagescopy.txt) do (
    if exist "%%G\%%i.jpg" xcopy "%%G\%%i.jpg" "V:\Current Library\Work Zone" /D /Y
  )
) 
```

**Perl 解决方案：**

```
use strict; 
use warnings;
use File::Find;
use File::Copy;

#filenames to match
my $filenames = join '|', map "\Q$_\E", split "\n", <<END;
filename1
otherfilename
another_one
etc
END

my $src_path = "V:\\Photo Library";
my $dst_path = "V:\\Current Library\\Work Zone";

find({ wanted => \&process_file, no_chdir => 1 }, $src_path);

sub process_file {
  if (-f $_) {
    # it's a file
    if (/\/($filenames).jpg$/) {
      # it matches one of the rows
      if ((stat($_))[9] > ((stat("$dst_path/$1.jpg"))[9] // 0)) {
        # it's newer than the file in the destination
        # or destination file does't exist
        print "copying $_ ...\n";
        copy($_, $dst_path) or die "File $_ cannot be copied.";
      }
    }
  }
} 
```

# android - 覆盖xml

> ID：14127666
> 
> 赞同：2
> 
> 时间：2013-01-02T19:06:43.113
> 
> 标签：android, xml, android-layout

是否可以在标签中覆盖 xml 中的属性？

父.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <include  
        layout="@layout/button"
         android:text="HAHAHAH"
         />
</TableLayout> 
```

按钮.xml：

```
 <?xml version="1.0" encoding="utf-8"?>
   <TextView  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="some string" /> 
```

是否可以将“some string”更改为“HAHAHA”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:15:28.190

是和否 :) “是”，因为您通常可以覆盖 XML 中的属性，“否”是因为在这种情况下，只有更改`android:layout_*`属性才会生效：

> 您还可以`android:layout_*` 通过在标签中指定它们来覆盖包含布局的根视图的所有布局参数（任何属性）。例如：

```
<include android:id=”@+id/news_title”
         android:layout_width=”match_parent”
         android:layout_height=”match_parent”
         layout=”@layout/title”/> 
```

> 但是，如果要使用标签覆盖布局属性，则必须同时覆盖 android:layout_height 和 android:layout_width 才能使其他布局属性生效。

[http://developer.android.com/training/improving-layouts/reusing-layouts.html#Include](http://developer.android.com/training/improving-layouts/reusing-layouts.html#Include)

# c# - 运行时确定类型的非默认构造函数

> ID：14127669
> 
> 赞同：0
> 
> 时间：2013-01-02T19:06:55.740
> 
> 标签：c#, reflection, constructor

> **可能重复：**
> [Activator.CreateInstance - 如何创建具有参数化构造函数的类的实例](https://stackoverflow.com/questions/1288310/activator-createinstance-how-to-create-instances-of-classes-that-have-paramete)

我想知道如何在不使用默认构造函数的情况下创建在运行时确定的类型的对象。

也就是说，我有`BaseClass`各种子类。

```
Type type; //this variable will be one of the child classes
BaseClass base = Activator.CreateInstance(type); 
```

这允许我使用默认构造函数创建一个子类对象，但我想调用一个特定的构造函数。我知道所有的子类都有一个带有某些参数的构造函数，所以我不担心那个构造函数不存在。我发现[了这个](https://stackoverflow.com/questions/1722491/how-to-generate-an-instance-of-an-unknown-type-at-runtime)问题，但我能得到的最好的结果是一个字符串参数。这是可行的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:11:03.917

三个选项：

*   使用[`Type.GetConstructor`](http://msdn.microsoft.com/en-us/library/system.type.getconstructor.aspx)然后[`ConstructorInfo.Invoke`](http://msdn.microsoft.com/en-us/library/6ycw1y17.aspx)
*   使用带参数[的重载之一。`Activator.CreateInstance`](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)
*   如果您事先已经知道所有可能的类型，请创建一个`Dictionary<Type, Func<string, string, YourBaseType>>`或任何合适的

当然，第三个选项要求您在每次添加新类型时更改工厂代码 - 但它只有一行。

我个人喜欢第一个选项，因为它为您提供了最大的控制权（而不是依赖于`Activator.CreateInstance`在执行时找到最佳匹配的构造函数） - 如果这是对性能敏感的代码，您可以在执行时通过发现来构建委托字典构造函数，然后使用表达式树。（据我所知，您不能使用构造函数构建委托`Delegate.CreateDelegate`，这有点烦人。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:08:30.590

您可以使用`Activator.CreateInstance(Type, Object[])`重载来执行此操作。它会根据提供的参数调用最合适的构造函数。

例如：

```
public class Test{
 public Test(){
    Console.WriteLine("Defaul ctor");
 }

 public Test(int i){
    Console.WriteLine("Test(int)");
 }

 public  Test(int i, string s){
    Console.WriteLine("Test(int, string)");
 }
}

public static void Main()
{
    var o1 = Activator.CreateInstance(typeof(Test));
    var o2 = Activator.CreateInstance(typeof(Test), 1);
    var o3 = Activator.CreateInstance(typeof(Test), 1, "test");
} 
```

# wpf - 应用程序窗口关闭时如何中止线程

> ID：14127671
> 
> 赞同：1
> 
> 时间：2013-01-02T19:07:03.727
> 
> 标签：wpf, multithreading, abort

我有一个带有线程的 WPF 应用程序。关闭应用程序时如何中止所有线程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:40:47.073

创建线程后，将[`IsBackground`](http://msdn.microsoft.com/en-us/library/system.threading.thread.isbackground.aspx)属性设置为`true`。

```
Thread th = new Thread(new ThreadStart(Start));
th.IsBackground = true;
th.Start(); 
```

# iphone - 是否可以在我的应用程序中添加 gps 语音导航？

> ID：14127676
> 
> 赞同：0
> 
> 时间：2013-01-02T19:07:21.260
> 
> 标签：iphone, ios6, gps

随着 IOS 6 语音指示的到来。我想知道是否可以将此功能添加到我的应用程序中

谢谢，亚辛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:28:01.590

Cloudmade [http://cloudmade.com/products/navi-studio](http://cloudmade.com/products/navi-studio)有一些工具可以帮助你。

它们提供了一种服务，该服务返回包含转弯信息的路线的 XML 表示。您可以将此文本输入文本到语音引擎。

# javascript - 是否可以在不使用 isNaN 的情况下检测 NaN？

> ID：14127678
> 
> 赞同：4
> 
> 时间：2013-01-02T19:07:32.040
> 
> 标签：javascript, nan

我可以用 JavaScript 写一个 isNan() 函数吗？JavaScript 可以检查变量是否`NaN`没有本机`isNaN`函数吗？

这是一道面试题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T19:15:56.047

如果它是一个数字，并且不等于它自己，它就是 NaN。

注意：正如@pst 所指出的，数字约束是不必要的。`NaN`似乎是 JS != 本身的唯一值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T06:15:06.630

这个问题的完整解决方案：

```
var is_NaN = function(n) {

  return (n !== n);  
}

is_NaN(1/'a'); // true
isNaN(1/'a'); // true 
```

因为在 JavaScript`NaN`中不等于自身。表达式`NaN === NaN`总是返回`false`

第二种解决方案：

您可以使用内置`isFinite`功能。`isFinite`检查输入是否是**既不是** `Infinity` **也不** `NaN`是的数字。

```
isFinite(NaN) // false
isFinite(Infinity) // false
isFinite(1) // true
isFinite(true) // true, because argument true is equal to 1
isFinite('a') // false
isFinite(1/'a') // false 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-25T09:05:57.363

ECMA 6

```
Number.isNaN(42) === false
Number.isNaN(NaN) === true 
```

[http://es6-features.org/#NumberTypeChecking](http://es6-features.org/#NumberTypeChecking)

# c# - 链接我的实体结果的不良做法

> ID：14127679
> 
> 赞同：1
> 
> 时间：2013-01-02T19:07:45.410
> 
> 标签：c#, asp.net, linq, entity-framework

当我尝试访问我的数据库上下文时，我可以通过我的结果访问其他表：

```
MyEntities myEnt = new MyEntities();
    var comments = myEnt.Comments.Where(x=>x.UserName == UserName);
    foreach(Comment comment in comments){
        string FirstName = comment.UserProfile.FirstName;
    } 
```

我的智能感知提取外键映射并允许我访问连接的表`UserProfile`。这是一种不好的做法，以这种方式“链接”我的结果，而不是像这样使用连接进行标准 linq 查询：

```
var query = from comments in myEnt.Comments
join up in myEnt.UserProfiles on comments.UserId equals up.UserId
select new {...} 
```

更新

另外，如果我进一步跟踪怎么办，例如：

`comment.aspnet_Users.UserProfiles.UserRatings.ToList()`

我尝试了类似的方法，当我在第二次尝试这种方法时，查询似乎花费了更长的时间。智能感知让您可以跟踪相关表格，如果我像这样链接多个表格，这会影响速度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:41:28.903

我建议研究[MiniProfiler](http://miniprofiler.com/)

根据您的问题，底层提供者有可能在循环期间导致[N+1问题，这在 ORM 世界中被认为是一种不好的做法。](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)

`foreach(Comment comment in comments){ string FirstName = comment.UserProfile.FirstName; }`

您还可以在执行 where 语句时使用包含在每个结果中急切地加载 UserProfiles：

`var comments = myEnt.Comments.Where(x=>x.UserName == UserName);`像这样：

`var comments = myEnt.Comments.Include('UserProfile').Where(x=>x.UserName == UserName);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:10:28.937

只要访问扩展属性的代码保持在当前创建的上下文中，我认为这不会有什么不同。当实体离开上下文并且代码进一步访问这些属性之一时。如果他们这样做了，并且上下文已关闭，则最终将引发错误。如果你的数据模型会改变，这两个例子都会在编译时抛出错误，所以我认为这是一个洗牌。

# database - 海量图片数据的存储和快速访问

> ID：14127684
> 
> 赞同：0
> 
> 时间：2013-01-02T19:07:56.113
> 
> 标签：database, image, image-processing, concurrency, blob

我目前正在设计一个人脸匹配系统，我们必须处理超过 300 万张图像。但我对如何存储这些图像并以足够快的速度访问它们以实现尽可能高的性能有一个模糊的想法。

**MySQL服务器：**

这很容易，因为我熟悉它。但怀疑性能将无法接受。当然我没试过。正如我所读到的，有一种名为*filestream*的新数据类型，我们可以在其中存储图像并更快地访问它们。另一种选择是，我可以将文件路径存储在数据库中，并在查询图像路径后访问图像。

**其他** 我也有`NoSQL`解决方案的想法。我没有这方面的经验。发现 MongoDB 是最流行的一个不错的选择`NoSQL`，也可以用作文件结构。

我正在考虑使用大量的*并发*，这也应该增加更高的并发数据访问。

有人可以就这个问题和最好的数据库技术给我一个提示吗？

**编辑：** 用例：用户提供一个人的图像作为输入，系统必须在数据库中提供一组最可能匹配的面部图像。

我考虑将图像分别处理为图像在不同队列中排队的数量或核心（X），这些队列将被应用程序用于图像处理。

提前致谢。

# javascript - 响应式、多句柄 HTML 5 或 javascript 范围滑块

> ID：14127689
> 
> 赞同：7
> 
> 时间：2013-01-02T19:08:42.540
> 
> 标签：javascript, html, range, responsive-design

我目前正在开发一个响应式站点，并希望使用多手柄范围滑块。我使用过一些运行良好但没有响应的 JavaScript 解决方案。

我已经考虑了两个 html5 范围输入的选项，它们可以优雅地降级为旧浏览器上的文本输入。但是，我想知道是否有人遇到过用于具有多个句柄的范围滑块的 javascript 解决方案，该解决方案适用于响应式环境。有什么想法或提示吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-13T07:22:59.323

你可以看看[noUiSlider](https://refreshless.com/nouislider/)。

它支持大量设备上的触摸，并且适用于响应式设计。没有对 jQuery 等的依赖。

**披露：**我做到了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-12-02T16:46:42.047

查看我不久前为个人使用而编写的[滑块。](https://github.com/maslick/radiaSlider)它同时具有[线性](https://maslick.neocities.org/slider-linear/)（水平/垂直）和[圆形](https://maslick.neocities.org/slider-circular/)实现，适用于桌面和移动设备，它是轻量级的（~5Kb）并且完全可定制。

[![在此处输入图像描述](../Images/fe9d3035e78eb0369b93d50e9e405b94.png)](https://i.stack.imgur.com/yIStY.png) [![在此处输入图像描述](../Images/e1b4b648fed418d0fb4f2624d61e863c.png)](https://i.stack.imgur.com/LomOY.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T19:12:45.213

试试 jQuery 范围滑块：http: [//jqueryui.com/slider/#range](http://jqueryui.com/slider/#range)。

它在不同的浏览器中得到很好的支持。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-06T09:43:57.287

这些看起来真的很漂亮，但我还没有尝试过：

[http://ghusse.github.io/jQRangeSlider/demo.html](http://ghusse.github.io/jQRangeSlider/demo.html)

[http://razorfish.github.io/JS-Range-Slider/](http://razorfish.github.io/JS-Range-Slider/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T19:16:08.427

我使用了[fd-slider polyfill](https://github.com/freqdec/fd-slider) / 和modernizr-loader，它可以在 ipad 上使用。其他设备没有测试，因为小屏幕版本没有使用它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-03T04:42:30.030

[由 2 个本机输入组成的多手柄滑块，](http://leaverou.github.io/multirange/)由 Lea Verou 提供

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-02T15:19:01.390

对于那些仍然在这里，四处寻找选择的人，我遇到了这个：

[http://vanderlee.github.io/limitslider/](http://vanderlee.github.io/limitslider/)

它允许您传递一组值，甚至可以通过一组选项设置间隔。

# ios - 将子实体加载到 coredata 中的 mangedobject

> ID：14127690
> 
> 赞同：0
> 
> 时间：2013-01-02T19:08:50.590
> 
> 标签：ios, core-data, nsmanagedobject

我认为这是错误的，它只加载一个汽车零件：此方法采用两个数组，一个带有汽车名称，一个带有零件，创建一辆新汽车，并将汽车零件添加到其中，然后将汽车保存到核心数据中。（目前不以这种方式工作）

```
for (int i=0; i<[massiveArray count]; i++) {
    //create a new car and part
        Car*newCar =(Car*)[NSEntityDescription insertNewObjectForEntityForName:@"Car" inManagedObjectContext:[self managedObjectContext]];
        CarPart *part =[NSEntityDescription insertNewObjectForEntityForName:@"CarPart" inManagedObjectContext:[self managedObjectContext]];

//set car title to string title in array of titles
        [newCar setValue:[massiveArray objectAtIndex:i] forKey:@"name"];
        //go through car parts array and add all new parts for that specific car
        for (int i=0; i<[partNamesArray count]; i++) {
            [part setValue:[partNamesArray objectAtIndex:i] forKey:@"name"];
            [newCar addToCarPartObject:part];
//save each part??? I think this is wrong
            [self.managedObjectContext save:nil];
        }
//Save new car
        [self.managedObjectContext save:nil];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:25:08.487

我知道这里发生了什么。

您需要将新的零件对象插入到每个零件的核心数据中。就像现在一样，您只制作一个部分对象，然后在 for 循环中覆盖它。您的代码应该类似于此...

```
for (int i=0; i<[massiveArray count]; i++) {
    //create a new car and part
    Car *newCar = [NSEntityDescription insertNewObjectForEntityForName:@"Car" inManagedObjectContext:[self managedObjectContext]];

    //set car title to string title in array of titles
    [newCar setValue:[massiveArray objectAtIndex:i] forKey:@"name"];

    //go through car parts array and add all new parts for that specific car
    for (int i=0; i<[partNamesArray count]; i++) {
        CarPart *part =[NSEntityDescription insertNewObjectForEntityForName:@"CarPart" inManagedObjectContext:[self managedObjectContext]];
        [part setValue:[partNamesArray objectAtIndex:i] forKey:@"name"];
        [newCar addToCarPartObject:part];
    }
}
//Save the entire context (all pending changes to cars and their parts)
[self.managedObjectContext save:nil]; 
```

正如我在上面的评论中所说，我建议将保存移到循环之外。

另一个更容易阅读代码的建议。在简单的 for 循环中枚举数组时，尝试类似...

```
for (NSString *carTitle in massiveArray) {
    /* Now do your stuff in here... 'carTitle' will be different during 
     * each pass of the loop. No need to increment an i variable or grab 
     * the object from the array on each pass. 
     */
} 
```

# jquery - jQuery 和 PHP - 它将一个奇怪的值保存到数据库中

> ID：14127694
> 
> 赞同：0
> 
> 时间：2013-01-02T19:08:58.000
> 
> 标签：jquery

我有这个脚本。

```
<script type='text/javascript' charset='utf-8'>
    $(window).load(function(){
        window.loadIframe = function(frame) {
           var link = $(frame).attr('src');
           $.post('link.php', {'link': link}, function (txt) {});
        }
    });
</script> 
```

如果我替换它`$.post('a.php', {'link': link}, function (txt) {});`会显示一个链接： **example**`alert(link)` (http://www.example.com/123-abcdef-0 )，好的。

 **然后，在 link.php 我有这个代码：

```
<? 
...
$link = filter_input(INPUT_POST, 'link', FILTER_SANITIZE_NUMBER_INT); 
    mysql_query("insert into prueba values ('', '$link')"); 
...
?> 
```

当我检查数据库时，插入的值不是完整链接，是 123--------0

哪里有问题？非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:16:17.217

这是因为你正在使用`FILTER_SANITIZE_NUMBER_INT`. 从[文档](http://php.net/manual/en/filter.filters.sanitize.php)：

> 删除除数字、加号和减号之外的所有字符。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T19:11:32.570

发送的 post 值低于`link.php`。

使用`$_POST['link.php']`.

另外[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。**

# c# - 读取 XML 文件的属性

> ID：14127696
> 
> 赞同：-1
> 
> 时间：2013-01-02T19:09:08.453
> 
> 标签：c#, xml

我有这个 XML 文件，我可以读取所有节点

```
<?xml version="1.0" encoding="UTF-8"?>
<cteProc xmlns="http://www.portalfiscal.inf.br/cte" versao="1.04">
    <CTe xmlns="http://www.portalfiscal.inf.br/cte">
        <infCte versao="1.04" ID="CTe3512110414557000014604"></infCte>
    </CTe>
</cteProc> 
```

我曾尝试使用 C# 阅读此内容

```
string chavecte;        
string CaminhoDoArquivo = @"C:\Separados\13512004-procCTe.xml";
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(CaminhoDoArquivo); //Carregando o arquivo
chavecte = xmlDoc.SelectSingleNode("infCTe")
                    .Attributes.GetNamedItem("Id").ToString(); 
```

但这段代码有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:20:03.743

如果你想使用 Linq To Xml

```
var xDoc = XDocument.Load(CaminhoDoArquivo);
XNamespace ns = "http://www.portalfiscal.inf.br/cte";
var chavecte = xDoc.Descendants(ns+"infCte").First().Attribute("id").Value; 
```

PS：我假设你的 xml 的无效行是

```
<infCte versao="1.04" id="CTe3512110414557000014604"></infCte> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:12:32.997

代替

```
chavecte = xmlDoc.SelectSingleNode("infCTe").Attributes.GetNamedItem("Id").Value; 
```

和

```
XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmlDoc.NameTable);
nsmgr.AddNamespace("ab", "http://www.portalfiscal.inf.br/cte");

chavecte = xmlDoc.SelectSingleNode("//ab:infCte", nsmgr)
                 .Attributes.GetNamedItem("Id").Value; 
```

我还注意到`infCte`您的 xml 中没有正确定义 ID 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T18:42:04.057

另一种可能的解决方案是：

```
string CaminhoDoArquivo = @"C:\Separados\13512004-procCTe.xml";
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(CaminhoDoArquivo); //Carregando o arquivo

// Select the node you're interested in
XmlNode node = xmlDoc.SelectSingleNode("/cteProc/CTe/infCte");
// Read the value of the attribute "ID" of that node
string chavecte = node.Attributes["ID"].Value; 
```

# javascript - 异步 JavaScript - 回调与延迟/承诺

> ID：14127703
> 
> 赞同：51
> 
> 时间：2013-01-02T19:09:25.007
> 
> 标签：javascript, jquery-deferred, commonjs

> **可能重复：**
> [Javascript 中的 Deferred、Promise 和 Future 有什么区别？](https://stackoverflow.com/questions/6801283/what-are-the-differences-between-deferred-promise-and-future-in-javascript)

最近我一直在努力提高我的 JavaScript 应用程序的质量。

我采用的一种模式是使用单独的“数据上下文”对象为我的应用程序加载数据（以前我直接在我的视图模型中执行此操作）。

以下示例返回在客户端初始化的数据：

```
var mockData = (function($, undefined) {

    var fruit = [
        "apple",
        "orange",
        "banana",
        "pear"
        ];

    var getFruit = function() {
        return fruit;
    };

    return {
        getFruit: getFruit
    }
})(jQuery); 
```

在大多数情况下，我们将从服务器加载数据，因此我们无法立即返回响应。对于我们如何在 API 中处理这个问题，我似乎有两种选择：

1.  使用回调
2.  回报[承诺](http://api.jquery.com/promise/)。

以前我总是使用回调方法：

```
var getFruit = function(onFruitReady) {
    onFruitReady(fruit);
};

// ...

var FruitModel = function(dataContext, $) {
    return {
        render: function() {
            dataContext.getFruit(function(fruit) {
                // do something with fruit
            });
        }
    };
}; 
```

但是，我可以看到最终可能会陷入回调地狱，尤其是在构建复杂的 JavaScript 应用程序时。

然后我遇到了 Promises 设计模式。我没有要求调用者提供回调，而是返回一个可以观察到的“承诺”：

```
var getFruit = function() {
    return $.Deferred().resolve(fruit).promise();
};

// ...
dataContext.getFruit().then(function(fruit) {
    // do something with fruit
}); 
```

我可以看到使用这种模式的明显好处，特别是因为我可以`wait`处理多个延迟对象，这在为单页应用程序加载初始化数据时非常有用。

但是，在我开始使用任何一种模式之前，我很想了解每种模式的优缺点。我也对这是否是其他库的发展方向感兴趣。jQuery 似乎就是这种情况。

这是我用于测试的小提琴的[链接。](http://jsfiddle.net/benfosterdev/yenGc/3/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-02T19:26:37.957

Promise 也依赖于幕后的回调，所以它并不是真正的一对一。

回调的好处是它们很容易用纯 JavaScript 实现（例如在 ajax 调用中）。

Promise 需要一个额外的抽象层，这通常意味着您将依赖一个库（在您的情况下这不是问题，因为您已经在使用 jQuery）。当您并行处理多个异步调用时，它们是完美的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T19:35:01.573

从阅读 @Pointy 链接到的[jQuery 文档](http://api.jquery.com/jQuery.ajax/#jqXHR)，听起来不同之处在于 Deferred API 允许您指定在请求完成时要调用的多个函数：

> 从 jQuery 1.5 开始，错误（失败）、成功（完成）和完成（始终，从 jQuery 1.6 开始）回调挂钩是先进先出的托管队列。这意味着您可以为每个挂钩分配多个回调。请参阅延迟对象方法，这些方法是在内部为这些 $.ajax() 回调挂钩实现的。

参见：[deferred.then()](http://api.jquery.com/deferred.then/)

# asp.net - 使用 mysql 数据库的 asp.net 日期转换

> ID：14127704
> 
> 赞同：-2
> 
> 时间：2013-01-02T19:09:26.767
> 
> 标签：asp.net

哪个更好地通过数据库或 c# 转换日期以将其绑定到网格事件 rowDataBound ？，以及为什么和我们何时使用 this 或 this ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:19:11.643

如果要将日期转换为其他日期，则在 C# 中进行转换并为数据库保存一些处理会更有效。

如果您尝试*格式化*日期，请在绑定字段上使用[DataFormatString 。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:00:00.190

您不会在您描述的场景中“转换”日期；您只需根据需要对其进行格式化。日期在数据库端应该是日期类型，在表现层，不管是什么，都可以根据自己的需要来显示。例如，在 asp.net 中，您可以在 GridView 上按如下方式格式化您的日期：

```
<asp:boundfield datafield="SomeDate" DataFormatString="{0:MM/dd/yyyy}" /> 
```

或者

```
<asp:boundfield datafield="SomeDate" DataFormatString="{0:dd/MM/yy}" /> 
```

# mysql - 是否有通用的解决方法来表达 Oracle（和 MySQL）中的派生列列表？

> ID：14127707
> 
> 赞同：18
> 
> 时间：2013-01-02T19:09:43.383
> 
> 标签：mysql, sql, oracle

许多 SQL 数据库支持 SQL 标准所称的`<derived column list>`. 此类数据库至少包括 CUBRID、Derby、Firebird、HSQLDB、Postgres、SQL Server 和 Sybase SQL Anywhere。SQL:2008 规范中的（简化的）摘录

```
7.6 <table reference>

Format
<table reference> ::=
    <table or query name> [ [ AS ] <correlation name>
      [ <left paren> <derived column list> <right paren> ] ]
  | <derived table> [ AS ] <correlation name>
      [ <left paren> <derived column list> <right paren> ] 
```

这意味着，我可以表达这样的事情（例如在 Postgres 中，它非常符合标准）

```
-- Rename a <table or query name> to u(b)
with t(a) as (select 1)
select * from t as u(b)

-- Rename a <derived table> to u(b)
select * from (select 1) as u(b) 
```

现在，根据[Oracle 文档](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_10002.htm#sthref9391)，我无法使用`<derived column list>`规范重命名列。我当然可以分别重命名表和列，如下所示：

```
-- Rename a <table or query name> to u(b)
with t(a) as (select 1 from dual)
select u.a b from t u;

-- Rename a <derived table> to u(b)
select u.a b from (select 1 a from dual) u; 
```

但这比以前的语法需要更多关于派生表（实际列名）的知识。此外，重命名的列仅在投影之后可用（例如在`ORDER BY`子句中），而不是在任何其他子句中，包括投影本身。

在 Oracle（以及 MySQL）中，是否有更通用的方法来按照 SQL 标准建议的方式重命名表和列？特别是，这对于数组取消嵌套、透视表/取消透视表重命名、内联复杂子查询、重命名表函数的结果等可能很有用。

注意：请不要过分关注上面的例子。他们真的只是为了说明问题。现实世界的查询要复杂得多，所以我正在寻找一种非常通用的方法来实现重命名为`u(b)`

**注意**：我仍在寻找适用于 MySQL 等数据库的解决方案。一个相关问题：
[如何从子选择中选择无别名的数字文字](https://stackoverflow.com/q/6669088/521799)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T21:24:53.717

对于 MySQL 解决方案，您可以使用 a`UNION`设置零行查询项中所有列的名称，然后查询更复杂的内容：

```
SELECT null AS a, null AS b, null AS c FROM dual WHERE false
UNION ALL
SELECT <expr>, <expr>, <expr>
FROM <realtable>... 
```

只有 UNION 的第一个查询词定义了整个查询的列名。后续查询词中的列名（或缺少列名）不会影响最终的列名。

您确实需要知道列*数*，但是将两个查询词分开应该很容易。据我所知，它适用于 Oracle 和 MySQL（但是，我只在 MySQL 中测试过它，而不是在 Oracle 中）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-03T13:47:31.470

由于您必须知道列数，但不一定知道列名，您可以使用 WITH 子句根据需要重命名这些列。例如（WITH 适用于 Oracle 和 SQL Server，手边没有 MySQL 实例）：

```
WITH t(x,y,z) as (select * from TABLE(fn_returning_xcols(3)))
select * from t; 
```

这里我们不知道内部选择中的列名，但我们可以在外部 WITH 子句中重命名它们。

在 Oracle 中使用 PIVOT 的另一个示例：

```
WITH t(a,b,c,d,e) as 
(
 select * from 
 (
  select level as levl from dual connect by level <= 5
 )
 PIVOT(max(levl) as l for levl in (1,2,3,4,5))
)
select * from t; 
```

同样，我们不关心内部选择列名是什么（内部枢轴创建了一些奇怪的列名），我们只需要知道有多少列就可以重命名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T18:13:10.550

正如用户[tbone 在这里](https://stackoverflow.com/a/14140167/521799)所建议的那样，公用表表达式是我的问题的一个很好的解决方案，至少对于 Oracle 而言。为了完整起见，这是我在 Oracle 中使用 CTE 编写的示例查询

```
-- Rename a <derived table> to u(b) with Oracle
with u(b) as (select 1 from dual) 
select u.b from u

-- Rename a <derived table> to u(b) with H2, which only knows recursive CTEs
-- Thanks to a comment by user a_horse_with_no_name
with recursive u(b) as (
  select 1
  union all
  select null where false
)
select u.b from u 
```

# android - 更改 EditText 错误信息的背景

> ID：14127710
> 
> 赞同：34
> 
> 时间：2013-01-02T19:09:55.083
> 
> 标签：android, input, popup, android-edittext, drawable

我想要做的是更改使用`setError()`方法后显示的弹出错误消息的背景颜色（设置自定义可绘制）。

目前，它看起来像这样：

![在此处输入图像描述](../Images/3d0483a86ec9a1a3d868fdb71bc6cba9.png)

我发现Android有两个文件：

*   `popup_inline_error.9.png`
*   `popup_inline_above_error.9.png`

你应该能够使用两个属性来设置它们：

*   `errorMessageBackground`
*   `errorMessageAboveBackground`

但是当我尝试将它们设置在我的主题中时，我得到的只是：

```
<item name="errorMessageBackground">@drawable/popup_inline_error_holo_light</item>
<item name="errorMessageAboveBackground">@drawable/popup_inline_error_above_holo_light</item>

error: Error: No resource found that matches the given name: attr 'errorMessageBackground'. 
```

（是一样的`with android:errorMessageBackground`）

我把这个问题放在这里，因为我已经没有想法了——也许有人已经设法做到了？

**编辑：** 我正在使用的主题的标题：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style
        name="Theme.MyThemeName"
        parent="@style/Theme.Sherlock.Light"> 
```

**另一个编辑：** 呃，我发现我的问题是重复的： [android:errorMessageBackground getting no resource found error in styles.xml](https://stackoverflow.com/questions/13874197/androiderrormessagebackground-getting-no-resource-found-error-in-styles-xml)

**另一个编辑：** 这是一个已知问题，请查看此链接：[https ://code.google.com/p/android/issues/detail?id=55879](https://code.google.com/p/android/issues/detail?id=55879)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-01-29T11:58:29.573

我建议使用[@Codeversed 解决方案](https://stackoverflow.com/a/34780309/2308720)，但如果由于某种原因它不适合您，您可以使用我的自定义`EditText`实现。

通常的 EditText 表示： [![在此处输入图像描述](../Images/847e91a77aac93b5cb61a4d8f298c28f.png)](https://i.stack.imgur.com/EiQwn.png)

EditText 有错误： [![在此处输入图像描述](../Images/dc6d012cb4d09f6fd6db0fcedca2c937.png)](https://i.stack.imgur.com/kDqL5.png)

简而言之：我为错误显示创建了自定义 xml 状态。请参阅下面的相关代码：

**输入编辑文本.java：**

```
import android.annotation.TargetApi;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.os.Build;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.AttributeSet;
import android.widget.EditText;

import com.example.oleksandr.inputedittext.R;

/**
 * Input EditText which allows define custom drawable for error state
 */
public class InputEditText extends EditText {

    private static final int[] STATE_ERROR = {R.attr.state_error};

    private boolean mIsError = false;

    public InputEditText(Context context) {
        this(context, null, 0);
        init();
    }

    public InputEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public InputEditText(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init();
    }

    @TargetApi(Build.VERSION_CODES.LOLLIPOP)
    public InputEditText(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);
        init();
    }

    private void init() {
        addTextChangedListener(new TextWatcher() {
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
                // empty
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                setError(null);
            }

            @Override
            public void afterTextChanged(Editable s) {
                // empty
            }
        });
    }

    @Override
    public void setError(CharSequence error) {
        mIsError = error != null;
        super.setError(error);
        refreshDrawableState();
    }

    @Override
    public void setError(CharSequence error, Drawable icon) {
        mIsError = error != null;
        super.setError(error, icon);
        refreshDrawableState();
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (mIsError) {
            mergeDrawableStates(drawableState, STATE_ERROR);
        }
        return drawableState;
    }
} 
```

**可绘制/edittext_bg_error.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    android:id="@+id/listview_background_shape"
    xmlns:android="http://schemas.android.com/apk/res/android"
    >
    <stroke
        android:width="2dp"
        android:color="#f00"
        />
    <padding
        android:bottom="2dp"
        android:left="2dp"
        android:right="2dp"
        android:top="2dp"
        />
    <corners android:radius="5dp"/>
    <solid android:color="#ffffffff"/>
</shape> 
```

**可绘制/edittext_bg_selector.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto">

    <!-- custom error state drawable -->
    <item android:drawable="@drawable/edittext_bg_error" app:state_error="true"/>

    <!-- Do whatever you want for all other states -->
    <item android:drawable="@android:drawable/editbox_background_normal"/>
</selector> 
```

添加到您的**attrs.xml**

```
<attr name="errorColor" format="reference"/> 
```

和**styleables.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="error">
        <attr name="state_error" format="boolean"/>
    </declare-styleable>
</resources> 
```

并且用法非常简单：

```
<com.example.oleksandr.inputedittext.views.InputEditText
    android:id="@id/edittext"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/edittext_bg_selector"
    android:inputType="text"
    android:text="@string/hello_world"
    /> 
```

[编辑]：

**刚刚意识到，原来的答案是关于改变错误弹出颜色，而不是 EditText 背景颜色。无论如何，希望这可以帮助某人。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-14T01:42:05.063

您将需要包括这些依赖项：

```
compile 'com.android.support:appcompat-v7:23.1.1'
compile 'com.android.support:design:23.1.1' 
```

这是一个关于如何使用它的示例：

```
<android.support.design.widget.TextInputLayout
        android:id="@+id/input_layout_password"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <EditText
            android:id="@+id/input_password"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="@string/hint_email" />

</android.support.design.widget.TextInputLayout> 
```

这将为您提供您正在寻找的材料设计，以提供表单验证以及标签的漂亮动画效果。

[![在此处输入图像描述](../Images/eed11f62069f40de1bf3ebc2862dcf2d.png)](https://i.stack.imgur.com/xgAqQ.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-04T13:14:42.650

```
private EditText adTitle;
// ....
adTitle.setError(Html.fromHtml("<font color='red'>hello</font>")); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-09T08:13:06.927

您可以使用此方法只需传递 msg 文本，您的 edittext id

```
 public static void setErrorMsg(String msg,EditText viewId)
{
    //Osama ibrahim 10/5/2013
    int ecolor = Color.WHITE; // whatever color you want
    String estring = msg;
    ForegroundColorSpan fgcspan = new ForegroundColorSpan(ecolor);
    SpannableStringBuilder ssbuilder = new SpannableStringBuilder(estring);
    ssbuilder.setSpan(fgcspan, 0, estring.length(), 0);
    viewId.setError(ssbuilder);

} 
```

# php - symfony 创建缺少唯一的实体

> ID：14127719
> 
> 赞同：0
> 
> 时间：2013-01-02T19:10:45.257
> 
> 标签：php, symfony, symfony-2.1

Symfony 没有将电子邮件字段标记为唯一。我可以在validation.yml 中设置它，但不是一个好方法。任何人都知道为什么 symfony 没有将电子邮件字段标记为唯一？

我运行以从现有数据库创建实体的命令：

```
php app/console doctrine:mapping:convert xml ./src/Frontend/AccountBundle/Resources/config/doctrine/metadata/orm --from-database --force
php app/console doctrine:mapping:import FrontendAccountBundle annotation
php app/console doctrine:generate:entities FrontendAccountBundle 
```

我的桌子：

```
CREATE TABLE `user` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `email` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
   PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=22 ; 
```

在 config/...../User.orm.xml 中：

```
<field name="email" type="string" column="email" length="255" nullable="false"/> 
```

在实体/User.php

```
/**
 * @var string
 *
 * @ORM\Column(name="email", type="string", length=255, nullable=false)
 */
private $email; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:23:14.830

您需要指定该列必须包含这样的唯一值：

```
@ORM\Column(name="email", type="string", unique=true, length=255, nullable=false)
                                         ^^^^^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:25:59.243

@ORM\Column(name="username", type="string", length=25, unique=true)

# jquery - 我可以将Class直接添加到容器中的img标签吗？

> ID：14127725
> 
> 赞同：0
> 
> 时间：2013-01-02T19:11:32.603
> 
> 标签：jquery, html, css

我正在使用 Jquery 开发 iTunes 风格的封面流程。我不经常使用 Jquery 框架。我不想使用插件，它们中的大多数对于我想要的东西来说似乎都是多余的。[http://jsfiddle.net/zorikii/cL63y/](http://jsfiddle.net/zorikii/cL63y/)

目前，我只是想从 img 元素中删除活动标签。

```
$(".imgFrame img").removeClass(function(index, currentClass) {
    var removedClass;
    if ( currentClass === "active" ) {
        removedClass= "active";
    }
    return removedClass;
}); 
```

这些类声明如下：

```
.imgFrame
.imgFrame > img
.imgFrame.active > img 
```

编辑：HTML：

```
<div class="imgFrame active">
    <img src="http://placehold.it/50x75"/>
</div>
<div class="imgFrame">
    <img src="http://placehold.it/50x75"/>
</div> 
```

我有一种感觉`$(".imgFrame img")`不是我想要的，尽管我以前在不同的上下文中看到过类似的 Jquery 对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:35:39.810

您只需要添加`$('.imgFrame').addClass('active');`和`$('.imgFrame.active').removeClass('active');`删除这些类。但是，如果您想做一些更深入的事情，例如检查 next() item 元素是否可用于 addClass，您可以执行以下操作：

```
$('#btnNext').on('click', function() {
    var $curImg = $('.imgFrame.active'),
        $nextImg = $curImg.next();
    if ($nextImg.length) {
        $nextImg.addClass('active');
    } else {
        $('.imgFrame').first().addClass('active');
    }
    $curImg.removeClass('active');
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/psyon001/cL63y/4/)示例，其中包含您小提琴中的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:14:51.523

如果您只是想`active`从`img`元素中删除类，您可以简单地将代码改为：

```
$('.imgFrame img').removeClass('active'); 
```

传递给该方法的函数的检查是多余的，因为 jQuery 无论如何都会在内部执行此操作。

为了帮助改进您使用的选择器，我需要查看您拥有的 HTML 代码。

# asp.net - 如何在 Web 服务之间共享类型

> ID：14127729
> 
> 赞同：0
> 
> 时间：2013-01-02T19:11:37.533
> 
> 标签：asp.net, web-services

团队 A 创建 WebServiceA。它将使用 Person 类型。当在 WebServiceA 中通过调用注册人员时，还必须通知其他系统（通过调用由团队 B 创建的 WebServiceB 传递注册人员）。

然后，当在系统 B 中编辑人员时，必须将修改迁移到系统 A（通过调用 WebServiceA 传递修改的人员）。

问题是如何让两个 WebServices 使用相同的类型？我们可以将 xml 作为字符串发送，然后将其序列化/反序列化为每个 WebService 端的对象，这样我们就不必使用 xml，但我很好奇它是否更简单。

我想要这个：

```
WebServiceA
Webmethod - RegisterPerson(Person person)
    calls WebServiceB.PersonRegistered(person)
WebMethod - PersonModified(Person person)

WebSericeB
WebMethod - PersonRegistered(Person person)
WebMethod - ModifyPerson(Person person)
    calls WebServiceA.PersonModified(person) 
```

而不是这个

```
WebServiceA
Webmethod - RegisterPerson(Person person)
    calls WebServiceB.PersonRegistered(person.SerializeToXml())
WebMethod - PersonModified(string person) - deserialize to WebServiceA.Person

WebSericeB
WebMethod - PersonRegistered(string person) - deserialize to WebServiceB.Person
WebMethod - ModifyPerson(Person person)
    calls WebServiceA.PersonModified(person.SerializeToXml()) 
```

我们在团队 A 中使用 ASP.NET WebService，而团队 B 使用 Java。如果两个团队都使用 .NET，它会改变什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:25:14.597

如果两个团队都使用 .NET，您可以在一个类库项目中定义您的数据对象，并且两个团队将共享同一个库 (DLL)。当您在 .NET 项目中创建对服务的引用时，这几乎就是 Windows Communication Foundation 在幕后所做的事情。因此，就像在您的第一个示例中一样，将对象作为参数传递变得很简单。

由于您有两种语言，因此您肯定需要共同点，这就是 json 或 xml 出现的地方（这是您的第二个示例）。您可以添加某种转换器类来捕获字符串，返回您的对象并将其作为参数传递给您的方法，实现取决于您使用的框架（Spring 让这变得轻而易举）

# c++ - Eigen：稀疏密集乘积到普通 C++ 数组

> ID：14127731
> 
> 赞同：1
> 
> 时间：2013-01-02T19:11:56.427
> 
> 标签：c++, matrix, product, eigen

我有这种情况：m 是一个 NxN 稀疏矩阵，而 p 是纯 C++ 向量，它包含一个 NxN 矩阵。我想制作产品 m*p 并将结果存储在一个普通的 C++ 数组中，当然，以密集的格式。

```
 SparseMatrix  m; 
  double*p;
  Map mp(p,dim1,dim2);
  SparseTimeDenseProduct< Eigen::SparseMatrix, Eigen::Map< Eigen::Matrix< double, -1, -1> > > r = m*mp; 
```

我有这个代码，但我不知道是否正确。如果是正确的，我不知道如何“提取” SparseTimeDenseProduct 的普通数组。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:34:11.043

无需处理 Eigen 的内部类。只需这样做：

```
SparseMatrix<double> A(dim1,dim2);
double* p, res;
Map<const MatrixXd> mp(p,dim2,dim3);
Map<MatrixXd> mres(res,dim1,dim3);
mres = A * mp; 
```

# stdvector - 使用 std::vector 而不是 libav 编码/解码示例中的 fread()

> ID：14127735
> 
> 赞同：0
> 
> 时间：2013-01-02T19:12:11.043
> 
> 标签：stdvector, libavcodec, libav

我正在尝试使用使用 fread 读取文件的 api-example.c 来代替使用 memcpy （或类似的），因为我已将我希望解码和编码的文件加载到`std::vector<char>`. （由于我将它从压缩存档读取到内存中）。关于如何实现这一目标的任何建议或示例？

原始 api-example [http://svn.perian.org/ffmpeg/libavcodec/api-example.c](http://svn.perian.org/ffmpeg/libavcodec/api-example.c)

我目前的“进展” [http://pastebin.com/Ag0KfEsg](http://pastebin.com/Ag0KfEsg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:13:55.953

在这里得到了解决方案[http://pastebin.com/HsDUX8jp](http://pastebin.com/HsDUX8jp)

```
void AudioLibav::DecodeAudio(std::vector<char> *inputAudio)
{

//Wasteful?
avcodec_register_all();

unsigned int audioVectorPosition = 0;

AVCodec *codec;
AVCodecContext *codecContext = NULL;
int length;
FILE *memoutfile;
uint8_t memBuffer[AUDIO_INBUF_SIZE + FF_INPUT_BUFFER_PADDING_SIZE];
AVPacket memPkt;
AVFrame *decoded_frame_mem = NULL;

av_init_packet(&memPkt);

printf("Audio decoding\n");

/* find the mpeg audio decoder */
codec = avcodec_find_decoder(AV_CODEC_ID_PCM_S16LE);
if (!codec)
{
    fprintf(stderr, "codec not found\n");
    exit(1);
}

codecContext = avcodec_alloc_context3(codec);

#warning Bad assumption
codecContext->channels = 2;

/* open it */
if (avcodec_open2(codecContext, codec, NULL) < 0) {
    fprintf(stderr, "could not open codec\n");
    exit(1);
}

memoutfile = fopen("testrawmem", "wb");
if (!memoutfile) {
    av_free(codecContext);
    exit(1);
}

/* decode until eof */
memPkt.data = memBuffer;
memPkt.size = AUDIO_INBUF_SIZE;
memcpy(memBuffer, &inputAudio->at(0), AUDIO_INBUF_SIZE);

inputAudioVectorPosition = AUDIO_INBUF_SIZE;

while (memPkt.size > 0)
{
    int got_frame_mem = 0;

    if(!decoded_frame_mem)
    {
        if (!(decoded_frame_mem = avcodec_alloc_frame()))
        {
            fprintf(stderr, "out of memory\n");
            exit(1);
        }
    }
    else
    {
                    avcodec_get_frame_defaults(decoded_frame_mem);
    }

    length = avcodec_decode_audio4(codecContext, decoded_frame_mem, &got_frame_mem, &memPkt);

    if (length < 0)
    {
        fprintf(stderr, "Error while decoding\n");
        exit(1);
    }
    if(got_frame_mem )
    {
        int data_size_mem = av_samples_get_buffer_size(NULL, codecContext->channels, decoded_frame_mem->nb_samples, codecContext->sample_fmt, 1);

        fwrite(decoded_frame_mem->data[0], 1, data_size_mem, memoutfile);
    }

    memPkt.size -= length;
    memPkt.data += length;

    if(memPkt.size < AUDIO_REFILL_THRESH)
    {
        memmove(memBuffer, memPkt.data, memPkt.size);
        memPkt.data = memBuffer;
        //std::cout << "Mempacket data: " << memPkt.data << "   MemPacket size: " << memPkt.size << "    memAUDIO BUFF - size: " << AUDIO_INBUF_SIZE - memPkt.size;
        if((inputAudio->size() - inputAudioVectorPosition) < (AUDIO_INBUF_SIZE - memPkt.size))
        {
            memcpy( (memPkt.data + memPkt.size) , &inputAudio->at(inputAudioVectorPosition), (inputAudio->size() - inputAudioVectorPosition));
            inputAudioVectorPosition = inputAudio->size() - 1;
            #warning Bad Assumption?
            //memlen = AUDIO_INBUF_SIZE - memPkt.size;
            length = 0;
        }
        else
        {
            memcpy( (memPkt.data + memPkt.size) , &inputAudio->at(inputAudioVectorPosition), AUDIO_INBUF_SIZE - memPkt.size);
            inputAudioVectorPosition = inputAudioVectorPosition + (AUDIO_INBUF_SIZE - memPkt.size);
            length = AUDIO_INBUF_SIZE - memPkt.size;
        }

        if(length > 0)
        {
            memPkt.size += length;
        }

    }

}

fclose(memoutfile);

avcodec_close(codecContext);
av_free(codecContext);
avcodec_free_frame(&decoded_frame_mem); 
```

}

# java - 在单击之前，JTextBox 不会显示在 JFrame 中。为什么？

> ID：14127736
> 
> 赞同：1
> 
> 时间：2013-01-02T19:12:15.323
> 
> 标签：java, swing, jtextfield

我正在制作一个程序，我需要`JTextField`在`JPanel`我的`JFrame`. 一切都设置为可见。我可以看到`JLabel`相同`JPanel`但不是我的`JTextField`.

当我启动下面的代码`JTextField`时，仅在单击时才显示。当我将光标移到它上面时，它变为我知道它在那里。但这就像我的`JFrame`背景颜色。

```
import java.awt.Dimension;
import javax.swing.JTextField;

public class HomeSourceTextBox extends JTextField {

private static final long serialVersionUID = -3387184252168604673L;
Dimension d = new Dimension(600, 20);

public HomeSourceTextBox() {
    setSize(d);
    setEnabled(true);
    setText("Text");

    setVisible(true);
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:37:30.143

我不确定你在做什么，但我认为你正在努力让`JTextField` *更长*的时间。

要为您`JTextField`提供默认数量的列，请使用[JTextField(int columns)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#JTextField%28int%29)构造函数，如下所示：

```
JTextField jtf=new JTextField(10); 
```

正如其他人建议的那样，请发布[SSCCE](http://sscce.org)，以便我们查看具体问题。

作为一般说明，尽管它总是更好地覆盖`get|Minimum|Maximum| Preferred |Size`or `set|Minimum|Maximum| Preferred |Size`，因此`LayoutManager`无法更改大小（如果您不使用 a`Layout`我强烈建议您这样做）。

我更喜欢`getPreferredSize()`并且文档同意 - [`JTextField`文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html#getPreferredSize%28%29)

> `getPreferredSize()`
> 
> *返回此 TextField 所需的首选大小尺寸。如果已设置非零列数，则宽度设置为列乘以列宽。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:40:18.403

如果设置适当的长度不能解决问题......

您可以尝试（重新）验证放置文本框的容器。听起来对象树在那里，但画布没有被更新。在容器（在您的情况下为 JPanel）上调用 repaint() 或 validate() （*也调用 repaint()*）会强制重新绘制。

# import - Google Calendar API - 导入活动：所有者必须是组织者或参与者

> ID：14127743
> 
> 赞同：3
> 
> 时间：2013-01-02T19:13:00.433
> 
> 标签：import, google-calendar-api, owner

我正在为我的一个项目使用 Google Calendar API。

我想从我的应用程序将事件导入 Google 日历，并将它们锁定，以便最终用户无法在 Google 日历中修改它们。

到目前为止，该 API 运行良好，但是，当我尝试**导入**事件时，我收到此错误：

> 日历的所有者必须是导入事件的组织者或参与者。

即使我将组织者设置为日历的所有者之一。

这是来自 API 控制台的 POST 示例：

```
POST https://www.googleapis.com/calendar/v3/calendars/_my_calendar_id%40group.calendar.google.com/events/import?key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer ya29.AHES6ZTdiWGywGp2LLSUlc8BV-dVIwJET5azIkNekjNgRjHRWc_Ojg
X-JavaScript-User-Agent:  Google APIs Explorer

{
 "end": {
  "dateTime": "2013-01-02T16:22:00+00:00"
 },
 "iCalUID": "123456789",
 "start": {
  "dateTime": "2013-01-02T14:22:00+00:00"
 },
 "organizer": {
  "email": "_this_is_the_owner@gmail.com",
  "displayName": "Owner Guy"
 },
 "attendees": [
  {
   "email": "_this_is_the_owner@gmail.com"
  }
 ]
} 
```

重现步骤：

*   创建一个日历并获取 ID 或使用“主要”作为您的主日历。
*   与某人分享，或让某人成为所有者。
*   转到 Calendar API Reference/events/import -> “试试看！”，并在提交 POST 之前使用 oAuth 进行身份验证。
*   填写必填字段（开始、结束、icaluid 等）
*   尝试将组织者或任何与会者设置为日历的所有者之一。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-09T08:38:08.580

关于错误信息：

> 日历的所有者必须是导入事件的组织者或参与者。

恕我直言，`The owner`实际上不是指 Google 用户，而是您正在处理**的类似电子邮件的日历 ID 。**这解释了为什么某些情况下仅适用于`primary`日历，因为主日历与其所有者用户 (xxx@gmail.com) 具有相同的 ID。

所以，你可以试试这些：

1.  不要设置任何与组织者相关的字段。然后 Google 为这些字段设置适当的值（或者`attendees[].organizer`或`organizer`）。
2.  将日历 ID 设置为`attendee[].email`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-04T15:21:49.357

根据我的实验（我不知道这在任何地方都有记录），您只能将参与者的活动“导入”到帐户中的“主要”日历（而不是子日历）。我不知道这是为什么。另请注意，“导入”会生成事件的私人副本，并且对事件的更改不会传播给其他与会者（尽管可能会是与会者状态）。

# java - 禁止对 XML 的一部分进行验证

> ID：14127752
> 
> 赞同：2
> 
> 时间：2013-01-02T19:14:12.063
> 
> 标签：java, xml-parsing, dtd

我们有一个沼泽标准`javax.xml.*`解析器，它会抓取一个大的 XML 文件并尝试根据自定义 DTD 对其进行验证。DTD 存储在本地，我们正在使用几年前[的这篇文章中的转换器进行验证。](https://stackoverflow.com/questions/1096365/validate-an-xml-file-against-local-dtd-file-with-java)

所有这些都有效。我们现在看到的问题是这种文件的 XML 格式是魔鬼写的。我不是在开玩笑; 该规范超过 750 页，署名“爱，撒旦”。

具体来说，部分 XML 如下所示：

```
<KnownTag>
    <ArbitraryTag> ... text ... </ArbitraryTag>
    <Whatever>     ... text ... </Whatever>
    <fj9e8jer23tj> ... text ... </fj9e8jer23tj>
    ....
</KnownTag> 
```

内部标签是平衡的——在这一点上，原始语法被认为是格式良好的 XML——但元素名称本身是完全任意的和不可预测的。（是的，就是这么邪恶。最初发布这个规范的公司早就倒闭了，因为他们的产品出了名的不可靠。去想一想。）

我们的自定义 DTD 可以指定`<!ELEMENT KnownTag ANY>`，但我们已经适应了内容。显然，验证解析器在遇到第一个用户指定的元素名称时会立即给出错误（*必须声明元素类型“ArbitraryTag”*），显然我们不能从纯粹的解析上下文中真正“验证”该块内的任何内容。我希望找到某种方法来抑制 XML 的那一部分的错误。

*   解析器的错误处理接口[ErrorHandler](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/ErrorHandler.html)指定了 3 个回调；`error()`在这种情况下调用它。[如果我能从传入的实际异常中](http://docs.oracle.com/javase/7/docs/api/org/xml/sax/SAXParseException.html)找出我们在一个`KnownTag`块内，那么我可以放心地忽略该错误并继续前进。这对 Java SE 实现安全吗？

*   之后获取任意元素应该不成问题，因为此时 XML 解析器本身已经构建了一个 DOM 文档。

*   `javax.xml.parsers.DocumentBuilder[Factory]`用于和`javax.xml.transform.Transformer`似乎不允许`DocumentBuilderFactory#setValidating()`在解析中途切换的 API 。如果是这样的话，那就不足为奇了，但我希望我只是错过了一些东西。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T16:48:16.110

DTD 没有跳过对格式良好的 XML 的特定子树进行验证的机制；这是 DTD 和后来的模式语言（如 XSD 和 Relax NG）之间的区别之一，后者引入了通配符，可以说诸如“`KnownTag`元素可以包含任意 XML”（或者：不在特定命名空间中的任意元素，或在任何一组特定的命名空间，或...）。

您的解析器是否具有关闭特定子树中错误报告的功能完全是特定于解析器的；您需要描述您正在使用的许多基于 Java 的 XML 解析器中的哪一个。机会很渺茫；解析器拥有这样的功能并非不可能，但乍一看，它听起来不像符合规范的行为。（这也不是我听说过的基于 DTD 的验证器具有的功能，但这实际上并不能证明太多。）

# css - 带切割三角形的矩形

> ID：14127753
> 
> 赞同：1
> 
> 时间：2013-01-02T19:14:18.237
> 
> 标签：css

如何在css中制作类似的东西？

![https://www.dropbox.com/s/6ol23la6ey373gt/example.png](../Images/7891f2da6ae529a81efd240a70427ba6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:26:04.880

您可以在 .up 中添加边框图像以查看上图的完整克隆效果！

[小提琴](http://jsfiddle.net/vRC4Q/)

```
div.wrapper {
    background:#d89043;
    width:400px;
    height:300px;
    position:relative;
}
div.up {
  width:0px; 
  height:0px; 
  border-left:50px solid transparent;  /* left arrow slant */
  border-right:50px solid transparent; /* right arrow slant */
  border-bottom:50px solid #fff; /* bottom, add background color here */
  font-size:0px;
  line-height:0px;
  position:absolute;
  bottom:0;
  margin-left:40%;
}​ 
```

# html - 如何从 Dreamweaver 的代码视图跳转到 .css 文件中的 CSS 类/ID？

> ID：14127754
> 
> 赞同：6
> 
> 时间：2013-01-02T19:14:25.120
> 
> 标签：html, css, dreamweaver

这是情况。我在 Dreamweaver 中工作。假设我有 5 个不同的 .css 文件，其中包含各种类和 ID。假设我正在代码视图（基本上只是一个文本编辑器）中编辑 index.html。然后假设我在代码中找到了一个我想查看代码的 CSS 类。或者换句话说，我想“跳转到”或“转到”该类在它的 .css 页面中的声明。

在 Dreamweaver 中有没有办法做到这一点？现在在代码视图中看到类名非常烦人，然后必须单击每个 .css 页面，然后手动搜索该类以找出它所在的位置以便对其进行编辑。

我也对其他类似于 Dreamweaver 的软件包持开放态度，这些软件包使这更容易。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:19:24.160

Alt+单击类以打开“代码导航器”弹出窗口。在那里您可以看到应用于单击元素的样式。单击弹出窗口中的选择器会打开您要调查的选择器的 css 源文件。

另一种方法是单击具有 ID 或类的元素，然后按 Shift+F11。这将打开“CSS 样式”窗口。在“选择摘要”标题下有一个规则列表。

# python - 带有 Apache 虚拟主机重定向错误的烧瓶登录？

> ID：14127758
> 
> 赞同：0
> 
> 时间：2013-01-02T19:14:37.810
> 
> 标签：python, apache, flask, flask-login

我有一个烧瓶应用程序，它需要使用烧瓶登录进行登录身份验证来进行会话处理。该应用程序在 apache 中使用 VirtualHost，例如根 url `/myapp`。当我点击需要登录的 URL（例如`/myapp/admin`）时，我得到了所需的登录表单和页面，但随后它重定向到`/login`而不是，`/myapp/login`我得到一个 404 错误 URL 未找到。

如果我将应用程序托管在`/`而不是`/myapp`在 apache 配置中，那么一切都会按预期工作。是否有可以解决此问题的烧瓶登录设置或其他解决方法？

我的设置和登录视图如下：

```
 login_manager.login_view = "login" 
```

```
 @app.route("/login", methods=['GET', 'POST'])
def login():
    form = LoginForm()
    if form.validate():
       #do login stuff
    else:
        flash("Bad username and/or password!")
        return render_template("login.html", form=form) 
```

这是 apache 的 VirtualHost 指令：

```
<VirtualHost *:80>
    #ServerAdmin webmaster@mydomain
    WSGIScriptReloading On
    WSGIScriptAlias /myapp /envs/myApp/myapp/myapp.wsgi
    WSGIDaemonProcess myapp threads=5 user=user1 group=user1
    <Directory "/envs/MyApp/myapp/">
            WSGIProcessGroup myapp
            WSGIApplicationGroup %{GLOBAL}
            Order allow,deny
            Allow from all
    </Directory>
</VirtualHost> 
```

# winforms - 使用 Ninject 和实体框架在 WinForms 中进行依赖注入

> ID：14127763
> 
> 赞同：19
> 
> 时间：2013-01-02T19:14:55.507
> 
> 标签：winforms, entity-framework, dependency-injection, ninject

我目前正在开展一个项目，我们正在将旧的 DataSet、存储过程 WinForm 应用程序转换为使用实体框架，以便新网站可以访问相同的对象模型和存储库。

无论如何，我正在尝试在表单中实现依赖注入，以便我们可以使用模拟存储库进行单元测试。我使用 Ninject 的原因很简单，因为我之前在 MVC 网站中使用过它，但是至少可以说，尝试在 WinForm 应用程序中实现这一点被证明是有问题的，由于 WinForms 中缺乏关于 DI 的信息而更加受阻网络。

到目前为止，我已经创建了 Ninject Factory 和存储库，但我没有太多运气将存储库注入表单。

因此，任何人都可以帮助我或提出任何建议吗？

下面我的部分代码可能会有所帮助：

忍者工厂：

```
public class NinjectFactory : NinjectModule
{
    private IKernel _ninjectKernel;

    public NinjectFactory()
    {
        _ninjectKernel = new StandardKernel();
    }

    public override void Load()
    {
        _ninjectKernel.Bind(typeof(IRepository<>)).To(typeof(GenericRepository<>));
        _ninjectKernel.Bind(typeof(IProductionRepository)).To(typeof(ProductionRepository));
    }
} 
```

带有存储库的表单：

```
Public Class TaskForm
    Inherits BaseBusinessDialogForm

    Private _repository As TaskRepository
    Private _task As Production.Task = Nothing

    Public Sub New(ByVal task As Production.Task)

        InitializeComponent()

        _repository = New TaskRepository(ConnectString)

        If task.TaskID = 0 Then
            _task = task
        Else
            _task = _repository.GetByID(task.TaskID)
        End If

        MyBase.BusinessObject = _task
        Me.TaskBindingSource.DataSource = MyBase.BusinessObject

    End Sub 
```

启动包含上述表单的 MDI 表单的类：

```
Dim kernel As IKernel = New StandardKernel(New NinjectFactory())
''Dim kernel As IKernel = New StandardKernel(New NinjectFactoryTest())
mfrmMDI = kernel.Get(Of Forms.MDI)()

Application.DoEvents()
mfrmMDI.ShowDialog() 
```

我知道我的问题有点含糊，但我不确定问题出在哪里或我需要完成什么。

非常感谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-04T12:41:51.347

您创建组合根作为您的解决方案的一个入口点。您将 INjectModule 作为参数传递，以便您可以对其进行配置以进行不同的测试。Composition Root 的好处之一是，并非所有程序集都依赖于 NInject，并且您将有一个单点来更改解析逻辑。当您将来可能会更改 IoC 容器或引入一些动态拦截时，这确实是一个很酷的模式。

```
public class CompositionRoot
{
    private static IKernel _ninjectKernel;

    public static void Wire(INinjectModule module)
    {
        _ninjectKernel = new StandardKernel(module);
    }

    public static T Resolve<T>()
    {
        return _ninjectKernel.Get<T>();
    }
} 
```

你的模块看起来像这样

```
public class ApplicationModule : NinjectModule
{
    public override void Load()
    {
        Bind(typeof(IRepository<>)).To(typeof(GenericRepository<>));
    }
} 
```

`ApplicationModule`在 main 方法中，您作为参数传递并解析`Form1`并启动它。

```
[STAThread]
static void Main()
{
    CompositionRoot.Wire(new ApplicationModule());

    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);

    Application.Run(CompositionRoot.Resolve<Form1>());
} 
```

在`Form1`构造函数中，您使用特定的封闭通用参数传递所需的存储库

```
public partial class Form1 : Form
{
    private IRepository<Process> _processRepository;

    public Form1(IRepository<Process> productionRepository)
    {
        this._processRepository = productionRepository;        
        InitializeComponent();
    }  

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show(_processRepository.ToString());
    }
} 
```

您的存储库可能非常复杂，但我不会向它们添加任何功能，而不是`ToString()`方法，以便我们可以查看是否正确解析了依赖项。请注意，存储库上没有任何属性。

```
public interface IRepository<T>
{
}

public class GenericRepository<T> : IRepository<T>
{
    public override string ToString()
    {
        return "MyRepository with type : "+typeof(T).Name;
    }
} 
```

现在，当您运行您的应用程序时，您会看到所有内容都已连接好，并且消息框显示一个封闭的类型为`Process`

![在此处输入图像描述](../Images/fb75510be65c336a67c6e0d71962e652.png)

# vba - VBA删除查询未执行

> ID：14127773
> 
> 赞同：3
> 
> 时间：2013-01-02T19:15:29.190
> 
> 标签：vba, ms-access

我的 Access 应用程序有一个无法调试的问题。我有一个表单，它基本上可以插入“已完成”表并从“待处理”表中删除。抛开设计偏好不谈，这就是我的做法，而不是拥有某种“状态”列。

我将用相关行总结我的代码。

首先它插入到已完成的表中，然后是简单的删除：

```
 qr = "DELETE * FROM tblPendingClasses WHERE ((tblPendingClasses.ID = " & curr         & "));" 'build the query
    Debug.Print qr
    MsgBox (qr)
    dbMine.Execute qr, dbFailOnExecute

     Form.Refresh 'refresh,requery
     Form.Requery
     MsgBox ("Class review complete.")
     docmd.close 
```

查询从调试语句和 msgbox 构建得很好，但它什么也没做。我查看表中的待定课程，而我要删除的具有 ID 的课程就坐在那里。没有有意义的错误，什么都没有。这曾经有效，有时有效，但目前无效。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:26:28.987

如果您的模块包含`Option Explicit`，您应该在此行收到编译错误“未定义变量”：

```
dbMine.Execute qr, dbFailOnExecute 
```

可能您打算`dbFailOnError`而不是`dbFailOnExecute`作为该`.Execute`方法的选项。添加`Option Explicit`到代码模块的声明部分，以便 VBA 编译器在您尝试使用不存在的常量名称时提醒您 ( `dbFailOnExecute`)。然后编译并修复编译器抱怨的任何其他问题。

*Database.Execute Method*帮助主题建议：
“ ... 在使用 Execute 方法运行更新或删除查询时，*始终使用 dbFailOnError 选项。如果有任何记录，此选项会生成运行时错误并回滚所有成功的更改受影响的已锁定，无法更新或删除。* ”

所以`dbFailOnExecute`会给你运行时错误消息，解释为什么没有发生预期的删除。

进行这些更改后，如果您仍然没有删除任何行并且没有错误消息，请确保您没有`SetWarnings`关闭。

```
DoCmd.SetWarnings True 
```

# java - WSO2 ESB JSON 到 SOAP

> ID：14127775
> 
> 赞同：6
> 
> 时间：2013-01-02T19:15:31.573
> 
> 标签：java, rest, soap, wso2, wso2esb

当前的大多数文档都参考了 SOAP-to-JSON，我希望在使用 WSO2 ESB 将 JSON 响应对象转换为 SOAP 服务时是否有任何参考资料或教程。提前致谢。

示例服务： [http ://api.statsfc.com/premier-league/table.json?key=free](http://api.statsfc.com/premier-league/table.json?key=free)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T16:44:46.697

您可以使用类似于以下的配置来实现此目的；（我们必须将“messageType”属性设置为“text/xml”以在响应客户端时使用 SOAP 消息构建器。）

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="JSONToSOAPService" transports="https,http">
   <target>
      <outSequence>
         <log level="full"/>
         <property name="messageType" value="text/xml" scope="axis2"/>
         <send/>
      </outSequence>
      <endpoint>
         <address uri="http://api.statsfc.com/premier-league/table.json?key=free"/>
      </endpoint>
   </target>
   <description></description>
</proxy> 
```

但是，如果您的 JSON 响应对象与您从提供的示例服务中获得的对象完全相同（即，如果它是一组匿名对象），那么 ESB 将减少响应以仅包含第一个元素（参见下面的 SOAP 响应）。

```
<?xml version='1.0' encoding='UTF-8'?>
<soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
    <soapenv:Body>
        <position>1</position>
        <team_id>10260</team_id>
        <team>Manchester United</team>
        <played>21</played>
        <won>17</won>
        <drawn>1</drawn>
        <lost>3</lost>
        <for>54</for>
        <against>28</against>
        <difference>26</difference>
        <points>52</points>
        <info>championsleague</info>
    </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T17:53:57.293

我可以通过 ESB 4.5.0 中的以下步骤来转换完整的 JSON 有效负载。这些步骤涉及更改 application/json 内容类型的消息构建器和消息格式化程序。

更改 JSON 的消息生成器、格式化程序；在 CARBON_HOME/repository/conf/axis2/axis2.xml 文件中，通过注释掉以下几行来取消默认消息生成器和消息格式化程序，

```
<messageBuilder contentType="application/json" class="org.apache.axis2.json.JSONBuilder"/>
<messageFormatter contentType="application/json" class="org.apache.axis2.json.JSONMessageFormatter"/> 
```

通过取消注释以下行来使用 JSONStreamBuilder 和 JSONStreamFormatter，

```
<messageFormatter contentType="application/json" class="org.apache.axis2.json.JSONStreamFormatter"/>
<messageBuilder contentType="application/json" class="org.apache.axis2.json.JSONStreamBuilder"/> 
```

编写一个 Javascript 函数来转换和构建新的 XML 有效负载。

```
function transformRequest(mc) {
    var array = mc.getPayloadJSON();
    var payload = <games/>;

    for (i = 0; i < array.length; ++i) {
        var elem = array[i];
        payload.game += <game>
            <position>{elem.position}</position>
            <team_id>{elem.team_id}</team_id>
            <team>{elem.team}</team>
            <played>{elem.played}</played>
            <won>{elem.won}</won>
            <drawn>{elem.drawn}</drawn>
            <lost>{elem.lost}</lost>
            <for>{elem["for"]}</for>
            <against>{elem.against}</against>
            <difference>{elem.difference}</difference>
            <points>{elem.points}</points>
            <info>{elem.info}</info>
        </game>
    }
    mc.setPayloadXML(payload);
} 
```

修改 outSequence 以对传入的 JSON 有效负载执行转换。

```
<outSequence>
    <script language="js" key="conf:/repository/esb/scripts/transformrequest.js" function="transformRequest"/>
    <property name="messageType" value="text/xml" scope="axis2"/>
    <send/>
</outSequence> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-03T04:56:55.137

AFAIU 你想调用一个带有 json 内容的soap服务并得到一个 json 响应。如果这是您的要求，[此](http://docs.wso2.org/wiki/display/ESB450/Sample+440%3a+Exposing+a+SOAP+Service+Over+JSON)示例将为您提供帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T11:40:24.257

如果您想允许 SOAP 客户端通过 WSO2ESB 访问 REST 服务，这是可能的。看看这个示例：[http ://docs.wso2.org/wiki/display/ESB451/Sample+152%3A+Switching+Transports+and+Message+Format+from+SOAP+to+REST+POX](http://docs.wso2.org/wiki/display/ESB451/Sample+152%3A+Switching+Transports+and+Message+Format+from+SOAP+to+REST+POX)

您可以做的是创建一个位于 REST 服务前面的 SOAP 代理服务。然后，此代理服务将接收 SOAP 请求，将请求转换为 REST 请求并转发到 REST 服务。然后它可以将 JSON 格式的 REST 响应转换为 SOAP 响应并返回给 SOAP 客户端。

# sql - 使用 VB .NET 将数据插入 SQL Server

> ID：14127777
> 
> 赞同：2
> 
> 时间：2013-01-02T19:15:46.227
> 
> 标签：sql, sql-server, vb.net

我正在尝试将一些示例数据插入到 sql server 中。

我正在使用 Visual Basic 2010 Express。

这是代码：

```
Public Sub insert()

    Dim myconnect As New SqlClient.SqlConnection
    myconnect.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\DATABASE_NUOVO.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"

    Dim mycommand As SqlClient.SqlCommand = New SqlClient.SqlCommand()
    mycommand.Connection = myconnect
    mycommand.CommandText = "INSERT INTO utenti (nome) VALUES ('mario')"
    myconnect.Open()

    Try
        mycommand.ExecuteNonQuery()
    Catch ex As System.Data.SqlClient.SqlException
        MsgBox(ex.Message)
    End Try
    myconnect.Close()
    MsgBox("Success")

End Sub 
```

代码似乎运行正确，但是当我在运行调试后查看数据库时，我没有看到示例数据。

哪里有问题？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T20:46:44.070

As I've said before on this site - the whole *User Instance and AttachDbFileName=* approach is flawed - at best! Visual Studio will be copying around the `.mdf` file and **most likely**, your `INSERT` works just fine - but you're just looking at the **wrong .mdf file** in the end!

If you want to stick with this approach, then try putting a breakpoint on the `myConnection.Close()` call - and then inspect the `.mdf` file with SQL Server Mgmt Studio Express - I'm almost certain your data is there.

The **real solution** in my opinion would be to

1.  install SQL Server Express (and you've already done that anyway)

2.  install SQL Server Management Studio Express

3.  create your database in **SSMS Express**, give it a logical name (e.g. `Database_Nuovo`)

4.  connect to it using its logical **database name** (given when you create it on the server) - and don't mess around with physical database files and user instances. In that case, your connection string would be something like:

    ```
    Data Source=.\\SQLEXPRESS;Database=Database_Nuovo;Integrated Security=True 
    ```

    and everything else is **exactly** the same as before...

Also: check what the value of the `Copy to Output Directory` property is on your `DATABASE_NUOVO.mdf` file in the `App_Data` directory (find it inside your Visual Studio Solution Explorer).

What might happen (and does, more often than not):

*   when Visual Studio starts your app for debugging, it copies `Database_Nuovo.mdf` to the output directory where the app is running (your `.\debug\bin` directory)
*   your `INSERT` then runs against this **copy** of the `.mdf` file and works just fine
*   you stop debugging and go check the database file again - but this time, you're looking at the `Database_Nuovo.mdf` in the `App_Data` directory --> and **of course** your inserted data **isn't there** since it was inserted into a different file!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:32:55.933

尝试更改`Try..Catch`代码以处理更多错误类型，而不仅仅是 SqlExceptions。像这样：

```
 Try
        mycommand.ExecuteNonQuery()
    Catch ex As System.Data.SqlClient.SqlException
        MsgBox(ex.Message, , "Sql Exception")
    Catch ex As System.Exception
        MsgBox(ex.Message, , "General Exception")
    End Try 
```

SqlExceptions 不是这里唯一可以抛出的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:47:20.563

试试吧。。

```
Dim con As New SqlConnection
Dim cmd As New SqlCommand
Try
con.ConnectionString = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\DATABASE_NUOVO.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True" //check your connection string carefully whether it points right directory
con.Open()
cmd.Connection = con
cmd.CommandText = "INSERT INTO table([field1], [field2]) VALUES([Value1], [Value2])" //make sure here your table and column name is exactly like as your database
cmd.ExecuteNonQuery()

Catch ex As Exception
MessageBox.Show("Error while inserting record on table...");
Finally
con.Close()
End Try 
```

# javascript - Backbone：是否可以一次进行多次提取

> ID：14127781
> 
> 赞同：1
> 
> 时间：2013-01-02T19:16:01.363
> 
> 标签：javascript, backbone.js

我试图`fetch()`一次调用多个，目前当我运行这个时：

```
function notWorking(){
    collection1.fetch()
    collection2.fetch()
    collection3.fetch()
    collection4.fetch()
} 
```

如果我只有`fetch()`一个并且在其他 3 上返回 500 内部错误`fetch()` 但是，如果我运行这个：

```
function working(){
    collection1.fetch({
       success:function(){
            collection2.fetch({
               success:function(){
                    collection3.fetch({
                       success:function(){
                            collection4.fetch()
                       }
                    })
               }
            })
       }
    })
} 
```

有效，但似乎是一种可怕的做法，一次拉多个是更好的方法`fetch()`吗？

（后端是使用带有 sinatra 和 datamapper 的 ruby​​ 来评估它的价值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:50:30.890

正如 voithos 所建议的，您的核心问题是服务器端问题。Backbone（甚至在 jQuery 中）中没有任何东西可以阻止您一次进行多次提取。

话虽如此，如果您坚持使用服务器端实现，您至少可以通过利用 Backbone 的 fetch 返回 jQuery 的 ajax 返回结果（它本身是一个“延迟”对象）这一事实来清理您的代码):

```
function working(){
    collection4.fetch().complete(
        collection3.fetch().complete(
            collection2.fetch().complete(
                collection.fetch()));
} 
```

或者，您实际上可以通过 fetch 将适当的选项传递给 jQuery，从而使 AJAX 请求同步，如下所示：

```
function working(){
    collection.fetch({async: false});
    collection2.fetch({async: false});
    collection3.fetch({async: false});
    collection4.fetch({async: false});
} 
```

# django - django模型help_text中的反向url

> ID：14127782
> 
> 赞同：1
> 
> 时间：2013-01-02T19:16:01.343
> 
> 标签：django, models, urlconf

我想在`help_text`django model_field 的属性中添加条款和条件的链接，基本上我想编写如下代码：

```
 class UserRegisterData(models.Model):

    accepted_terms = models.BooleanField(
           ...
           help_text = u""Terms and conditions are avilable on <a href="{reg}">this iste</a> stronie""".format(reg = reverse("terms"))
     ) 
```

whis 显然失败了，因为在实例化模型时 urlconfs 没有准备好。

我什至试图包裹`help_test`，`SimpleLazyObject`但它仍然没有工作。

我宁愿不碰模板代码。有没有办法在字符串或设置中不硬编码 url 来实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T19:21:38.260

我认为这就是[`django.core.urlresolvers.reverse_lazy`](https://github.com/django/django/blob/master/django/core/urlresolvers.py#L498)它的意义所在。
有关信息：它是在 1.4 中添加到 django 的，因此如果您使用的是早期版本，则需要升级。

* * *

正如评论中提到的，您仍然需要绕过打破 URL 反向“懒惰”的字符串格式：

```
from django.utils.translation import string_concat

# ...

help_text = string_concat( # Happens to be lazy!
                u'Terms and conditions are available on <a href="', 
                reverse_lazy("terms"),
                u'">this site</a>"',
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-18T07:31:54.147

从`Django`2.1开始，在早期版本中`django.utils.translation.string_concat()` [已被删除](https://docs.djangoproject.com/en/2.1/releases/2.1/#features-removed-in-2-1)并标记为已弃用。

为了以`str.format()`类似的语法评估惰性对象，您现在必须[`format_lazy()`](https://docs.djangoproject.com/en/2.1/ref/utils/#django.utils.text.format_lazy)改用它。

例子：

```
my_field = forms.BooleanField(
        # ...
        help_text=format_lazy(
            '''
            Please click <a href='{}'>here</a>.
            ''',
            reverse_lazy('my-viewname')
        )
) 
```

请注意，`help_text`出于 HTML 输出目的，您可能必须明确将内容标记为安全。一个可能的解决方案可能是在模板内和[安全过滤器](https://docs.djangoproject.com/en/2.1/ref/templates/builtins/#safe)的帮助下：

```
{{ my_field|safe }} 
```

# javascript - 搜索字符串中的通配符

> ID：14127787
> 
> 赞同：0
> 
> 时间：2013-01-02T19:16:10.937
> 
> 标签：javascript

我正在尝试构建一个函数来检查搜索字符串中是否使用通配符。

例子。

```
%name% var search_type = "LIKE"

%name var search_type = "LIKE"

name% var search_type = "LIKE"

name   var search_type = "EQUALS" 
```

如何编写 javascript 正则表达式来证实这 4 种类型的示例？

```
<html>

<head>

<script type="text/javascript">

function test() {

var name = document.getElementById("search").value

}

</script>

</head>

<body>

<input type="text" id="search">

<input onclick="test()" type="submit" value="Submit">

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:22:36.977

这是一个[演示](http://jsbin.com/idevef/1/edit)

```
function test() {
    var name = document.getElementById("search").value;
    var search_type = '';

    if (name.indexOf('%') > -1) {
        search_type = 'like';
    } else {
        search_type = 'equals';
    }
    alert(search_type);
    return search_type;
} 
```

**更新**

`%`无论符号在文本中的位置如何，上述代码都将起作用。如果您对它**应该**在开始或结束或两者都感兴趣，请使用以下代码。
[演示在这里](http://jsbin.com/idevef/2/edit)

```
function test() {
    var name = document.getElementById("search").value;
    var position = name.indexOf('%');
    var search_type = '';

    if (position === 0 || position === name.length) {
        search_type = 'like';
    } else {
        search_type = 'equals';
    }

    alert(search_type);
    return search_type;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:22:50.380

根据您的示例，唯一的指示`search_type`应该`LIKE`是该值是否包含百分比符号，`%`. 在这种情况下，您可以使用`indexOf('%')`它来检查它是否有：

```
var search_type = (someValue.indexOf('%') > -1) ? 'LIKE' : 'EQUALS'; 
```

使用您当前的代码：

```
function test() {
    var search_type = (document.getElementById("search").value.indexOf('%') > -1) ? 'LIKE' : 'EQUALS';
    // any other processing required...
    return search_type;
} 
```

此外，如果您想明确表示`%`必须在字符串的开头、结尾或开头+结尾，并且将为每个字符串使用*不同*的修饰符，您可以使用递增标志：

```
var search_flag = 0;
var value = document.getElementById('search').value;
if (value.substring(0, 1) == '%') search_flag += 1;
if (value.substring(value.length - 1) == '%') search_flag += 2;

var search_type = (search_flag == 0) ? 'EQUALS' : 'LIKE';
if (search_flag == 1) {
    // % is at beginning of string
    // do stuff...
} else if (search_flag == 2) {
    // % is at end of string
    // do stuff...
} else if (search_flag == 3) {
    // % is at beginning and end of string
    // do stuff...
} 
```

如果您只需要一个简单的检查，这完全没有必要`EQUALS/LIKE`- 但如果您需要特定的通配符位置，则可以扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:31:42.400

```
function test() {
    var name = document.getElementById("search").value;
    if( name.substring(0,1) == "%" || name.substring(name.length - 1, name.length) == "%"){
        var search_type = "LIKE";
    }
    else {
        var search_type = "EQUALS";
    }
} 
```

# mysql - Mysql - 在同一行中分组和加权平均

> ID：14127797
> 
> 赞同：0
> 
> 时间：2013-01-02T19:17:10.127
> 
> 标签：mysql

我在 MySQL 中制定查询时遇到了一些问题。

这就是我在我的数据库中拥有的

```
Part #    Desc.  Tracking #   EquivalentKey  Qty    PriceEach
A         aa      123         1               2     .30
B         dd      342         1               10    1.40
C         dfd     2343        2               100   3
D         awe     43455       3               90    6
E         dffd    5643        2               10    5 
```

所以给定这些数据，这是我想要的输出

```
Part#      Equivalent Part # 1       Total Qty    Weighted Avg Price
A          B                         12           1.358 
```

... 等等

基本上我想按 PN 分组，然后按等效 PN 分组，并在同一行中显示所有 PN，添加 tot 知道如何做到这一点吗？我确实尝试了 Group By 功能，但它给了我另一行等效 PN

非常感谢您提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:34:14.707

如果您没有，`GROUP_CONCAT()`那么您可以使用以下假设每个 EquivalentKey 仅包含两个部件号：

```
select min(partno) PartNo, 
  max(partno) EquivalentPartNo,
  TotalQty,
  WeighedAvgPrice
from yourtable t1
left join
(
  select EquivalentKey,
    sum(qty) TotalQty, 
    sum(qty * priceeach) / sum(qty) WeighedAvgPrice
  from yourtable
  group by EquivalentKey
) src
  on t1.EquivalentKey = src.EquivalentKey
group by TotalQty, WeighedAvgPrice; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f391a/13)

或者没有子查询：

```
select min(partno) PartNo, 
  max(partno) EquivalentPartNo,
  sum(qty) TotalQty,
  sum(qty * priceeach) / sum(qty) WeighedAvgPrice
from yourtable t1
group by EquivalentKey; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f391a/15)

如果您有权访问，`GROUP_CONCAT()`那么您将使用：

```
select GROUP_CONCAT(partno) PartNo, 
  sum(qty) TotalQty,
  sum(qty * priceeach) / sum(qty) WeighedAvgPrice
from yourtable t1
group by EquivalentKey; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f391a/16)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:22:44.193

你可以做的是：

```
SELECT 
    GROUP_CONCAT(Part) AS Parts
  , EquivalentKey
  , SUM(Qty) AS Total_Qty
  , SUM(Qty * PriceEach) / SUM(Qty)
        AS Weighted_Avg_Price
FROM 
    table
GROUP BY 
    EquivalentKey ; 
```

# qt - Qt 在库中使用 QApplication

> ID：14127799
> 
> 赞同：0
> 
> 时间：2013-01-02T19:17:15.603
> 
> 标签：qt

我需要基于 Qt 创建具有某些功能的动态库，例如 GetValue。此函数应使用 QLineEdit 调用对话框并返回输入值。我创建了没有 Qt 类的结构。源代码编译成功，我得到了 dll。

但是当我添加 Qt 对象时，我得到如下链接错误：

*guilib2.obj：错误 LNK2019：无法解析的外部符号“__declspec(dllimport) public: virtual _ *thiscall QApplication::~QApplication(void)”(* _imp_??1QApplication@@UAE@XZ) 在函数“void __cdecl GetValue(void)”中引用" (?GetValue@@YAXXZ)*

*guilib2.obj : 错误 LNK2019: 函数中引用的未解析的外部符号“__declspec(dllimport) public: __thiscall QApplication::QApplication(int &,char * *,int)” (_ *imp* ??0QApplication@@QAE@AAHPAPADH@Z) "void __cdecl GetValue(void)" (?GetValue@@YAXXZ)*

如何解决这个问题呢？

源代码如下：

guilib2.h

```
 #ifndef GUILIB2_H
  #define GUILIB2_H

  #include "GUILib2_global.h"

  GUILIB2SHARED_EXPORT void GetValue();

  #endif // GUILIB2_H 
```

GUILib2_Global.h

```
 #ifndef GUILIB2_GLOBAL_H
  #define GUILIB2_GLOBAL_H

  #include <QtCore/qglobal.h>

  #if defined(GUILIB2_LIBRARY)
  #  define GUILIB2SHARED_EXPORT Q_DECL_EXPORT
  #else
  #  define GUILIB2SHARED_EXPORT Q_DECL_IMPORT
  #endif

  #endif // GUILIB2_GLOBAL_H 
```

guilib2.cpp

```
 #include "guilib2.h"
  #include <QtGui>
  #include <QtWidgets/QApplication>

  void GetValue()
  {
      int argc =1;
      char *argv[1];
      argv[0]="guilib2.dll";
      QApplication a(argc,argv);
  } 
```

GUILib2.pro

```
 TARGET = GUILib2
  TEMPLATE = lib
  QT += gui
  DEFINES += GUILIB2_LIBRARY

  SOURCES += guilib2.cpp

  HEADERS += guilib2.h\
          GUILib2_global.h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-05T01:52:55.980

您应该在 .pro 文件中添加此语句：

```
QT += widgets 
```

# ruby - 局部变量、实例变量和类变量有什么区别？

> ID：14127805
> 
> 赞同：1
> 
> 时间：2013-01-02T19:17:56.197
> 
> 标签：ruby, instance-variables, local-variables, class-variables

> **可能重复：**
> [类变量和类实例变量之间的区别？](https://stackoverflow.com/questions/3802540/difference-between-class-variables-and-class-instance-variables)

在阅读 Ruby 书籍时，我似乎错过了变量章节。现在我似乎无法理解以下内容：

1.  什么是实例变量？
2.  什么是类实例变量？
3.  `variable`a和`@instance_var`有什么区别`@class_instance_var`？

我试图阅读不同博客中的一些帖子，但我仍然不明白。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:35:10.793

> 什么是实例变量？

它是一个具有与该类实例相关的独立值的变量。例如，一个`Person`类可以有`@name`和`@age`作为实例变量。所有的实例`Person`都有一个名字和年龄，但是每个实例对于这些东西都有不同的值。

* * *

> 什么是类实例变量？

这有点奇怪，但你必须意识到这个`Person`类本身就是`Class`. 所以它也可以有实例变量。这通常用于配置类。就像向一个类添加一个 API 密钥，以便可以使用该数据创建所有实例。

```
class PersonFetcher

  # class method can set class instance variables
  def self.set_api_key(key)
    @api_key = key
  end

  # instance method sets instance variables
  def set_name(name)
    @name = name
  end

end 
```

* * *

> 变量@instance_var 和@class_instance_var 有什么区别？

它是如何持续存在的。

`variable`是本地的。它只是对对象的引用。一旦没有代码或对象引用此值，它就会通过垃圾收集被销毁。只有继续使用它才会持续存在。

`@instance_var`持续存在于实例上。只要实例存在，它所拥有的实例变量也会存在。只要`Person`实例存在，该实例就会有一个`@name`.

`@class_instance_var`持续存在于类对象上（记住是 的一个实例`Class`）。因此它将永远存在于类对象中，因为您永远无法真正摆脱已声明的类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T20:04:13.227

## 变量类型影响范围

网络上有很多规范的解释，在 SO 的其他地方也有一些深入的解释，但我将与您分享另一种看待它的方式：变量范围。

### 局部变量

局部变量通常用于方法中，并且仅具有局部范围。例如：

```
def foo
  # bar is only in scope within #foo.
  bar = true
end 
```

每当方法返回时，*bar*变量就会超出范围。

### 实例变量

实例变量可用于绑定到对象实例的任何方法。作为一个实际问题，这通常会在某个实例化的类对象中赋予它范围。例如：

```
class Foo
  def bar
    @quux = true
  end

  def baz
    @quux == true
  end
end

foo = Foo.new 
```

*虽然@quux 并不是真正的全局，但它对绑定到我们实例化的foo*对象的所有方法都是可见的，而无需将其作为参数显式传递。

### 类变量

类变量在类的所有实例之间共享。这意味着如果您从实例 foo 更改 @@bar，那么实例 bar 的值也会更改。

```
class Foo
  @@bar = true

  def show_class_variable
    @@bar
  end

  def bar= value
    @@bar = value
  end
end

foo = Foo.new
bar = Foo.new

foo.show_class_variable # => true
bar.show_class_variable # => true

foo.bar = false
foo.show_class_variable # => false
bar.show_class_variable # => false 
```

请注意更改 @@bar 如何同时影响两个实例。这就是类变量的美妙之处（也是可怕之处）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T19:28:33.197

变量是方法的局部变量，因此应该在此方法中定义，实例变量是为给定类的对象（实例）定义的变量，并且**每个**对象都有一个值。类实例变量用`@@`（与您提到的单个变量相反）表示，并在类的**所有**`@`实例之间共享，如果其中一个实例更改其值，则所有实例都将看到新值。类实例变量等价于 c++ 和 java 的静态成员变量，实例变量等价于非静态变量。

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T19:34:09.880

实例变量是在类被实例化时定义的。假设你有一个 class `Point`，它定义了一些局部变量和方法。

```
class Point
  def initialize(x,y)
     @x, @y = x, y
  end

  def add(other)
     Point.new(@x + other, @y + other)
  end
end 
```

当您实例化定义的类并将其分配给一个变量时，您正在实例化该类：

```
point = Point.new(2,2) 
```

..这是实例变量。

Ruby 中的类是对象，并且可以像其他对象一样具有实例变量。在定义内部`class`但在实例方法定义外部定义的实例变量称为**类实例变量**。

例子：

```
class Point 
  @n = 0
  @total_x = 0
  @total_y = 0

  def initialize(x,y)
     @x,@y = x,y
  end
end 
```

还有第三种，即`class variable`。类变量对类方法和类的实例方法是可见的，并由其共享。与实例变量一样，类变量可以被类的实现使用，但它们对类的用户是不可见的。类变量以`@@`. 实例变量总是参考 评估`self`。这与类变量有很大的不同，类变量总是参考由封闭`class`定义语句创建的类对象进行评估。使用相同的示例，我们可以重写代码如下：

```
class Point
   @@n = 0
   @@total_x = 0
   @@total_y = 0

   def initialize(x,y)
      @x,@y = x, y
      @@n += 1
   end

   def self.report
      puts "Number of points: #{@@n.to_s}"
   end
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T19:35:02.907

您可以通过简单的谷歌搜索找到很多文章：

[http://blog.codegram.com/2011/4/understanding-class-instance-variables-in-ruby](http://blog.codegram.com/2011/4/understanding-class-instance-variables-in-ruby)

[http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/](http://railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)**

# iis - 如何阻止用户停止绕过负载均衡器

> ID：14127807
> 
> 赞同：1
> 
> 时间：2013-01-02T19:18:08.007
> 
> 标签：iis, load-balancing, hosts

我们在 3 台服务器 Server1
Server2 Server3 上部署了应用程序的 asp 应用程序存在问题

应用程序应该通过 URL 访问`http://app1.us.testdomain/testapp/` 目前我们有用户通过传递负载均衡器 url 并直接在单个服务器上访问应用程序，例如 `http://Server1/testapp/default.asp` `http://Server2/testapp/default.asp` 导致服务器之间的负载分布不一致。

是否可以在 IIS 或负载平衡器级别为用户防止这种情况。

# sql - 在单列中选择父项和子项

> ID：14127808
> 
> 赞同：0
> 
> 时间：2013-01-02T19:18:28.007
> 
> 标签：sql, select, db2

我目前有这个输出：

```
ID     Name             Seq
---    -----            ----
82     Morris, Allan    1
82     Morris, Allan    2
82     Morris, Allan    3
82     Morris, Cynthia  1
82     Morris, Shaun    2
82     Morris, Sarah    3 
```

但这是所需的输出：

```
ID     Name             Seq
---    -----            ----
82     Morris, Allan    0
82     Morris, Cynthia  1
82     Morris, Shaun    2
82     Morris, Sarah    3 
```

这是我当前的查询：

```
SELECT C.ID AS ID, C.Name AS Name, COALESCE(D.Seq, 0) AS Seq
FROM CMSTR C
LEFT JOIN DMSTR D ON D.ID = C.ID
UNION
SELECT C.ID AS ID, D.Name AS Name, COALESCE(D.Seq, 0) AS Seq
FROM CMSTR C
LEFT JOIN DMSTR D ON D.ID = C.ID 
```

以下是表结构：

**CMSTR**

```
ID     Name
---    -----
82     Morris, Allan 
```

**DMSTR**

```
ID     Name             Seq
---    -----            ----
82     Morris, Cynthia  1
82     Morris, Shaun    2
82     Morris, Sarah    3 
```

这似乎应该是一个非常简单的查询，但我无法弄清楚如何实现所需的输出。请帮忙！

****编辑****

我最初尝试使用以下查询：

```
SELECT C.ID, (CASE WHEN D.Seq = 0 OR D.Seq IS NULL
                   THEN C.Name
                   ELSE C.Name
              END) AS Name,
       COALESCE(D.Seq, 0) AS Seq
FROM CMSTR C
LEFT JOIN DMSTR D ON D.ID = C.ID 
```

不幸的是，使用上述仅返回依赖名称，完全不包括父名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T21:45:00.497

如果我正确理解了您的结构（CMSTR 每个 ID 只有 1 个条目，并且 DMSTR 的 Seq 始终从给定 ID 的 1 开始），这应该有效：

```
SELECT ID, Name, 0 AS Seq FROM CMSTR
UNION
SELECT ID, Name, Seq FROM DMSTR
-- ORDER BY ID, Seq - if you want 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:25:16.220

如果我理解正确（我真的不知道我是否理解），这个查询应该给你你想要的：

```
SELECT  C.ID AS ID, 
        C.Name AS Name, 
        COALESCE(D.Seq-1, 0) AS Seq
FROM CMSTR C
LEFT JOIN ( SELECT ID, MIN(Seq) Seq
            FROM DMSTR
            GROUP BY ID) D 
    ON D.ID = C.ID
UNION
SELECT  ID, 
        Name, 
        Seq
FROM DMSTR 
```

# c# - 检查 Internet 连接 InternetGetConnectedState 始终为真

> ID：14127810
> 
> 赞同：3
> 
> 时间：2013-01-02T19:18:36.073
> 
> 标签：c#, compact-framework

如果我的 Compact Framework 应用程序有互联网连接，我需要检查它。

所以环顾四周，我找到了这个`InternetGetConnectedState`方法，但就我而言，每次我检查我是否有互联网连接时，它都会返回 true，即使我处于离线状态。

这是代码：

```
[DllImport("wininet.dll", CharSet = CharSet.Auto)]
private extern static bool InternetGetConnectedState(ref InternetConnectionState_e lpdwFlags, int dwReserved);

[Flags]enum InternetConnectionState_e : int
{
    INTERNET_CONNECTION_MODEM = 0x01,
    INTERNET_CONNECTION_LAN = 0x02,
    INTERNET_CONNECTION_PROXY = 0x04,
    INTERNET_RAS_INSTALLED = 0x10,
    INTERNET_CONNECTION_OFFLINE = 0x20,
    INTERNET_CONNECTION_CONFIGURED = 0x40
}

public Form1()
{
    InitializeComponent();
    verify();
}

private void verify()
{
    // In function for checking internet
    InternetConnectionState_e flags = 0;
    bool isConnected = InternetGetConnectedState(ref flags, 0);
    textBox1.Text = "Con: " + isConnected.ToString();
    textBox1.Text += "\r\nDescr: " + flags.ToString();
}

private void button1_Click(object sender, EventArgs e)
{
    verify();
}

private void button2_Click(object sender, EventArgs e)
{
    this.Close();
} 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:13:44.680

看起来您的[P/Invoke internetgetconnectedstate](http://www.pinvoke.net/default.aspx/wininet/internetgetconnectedstate.html)签名可能有点偏离。

从上面的链接复制，签名似乎寻找一个`int`作为第一个参数：

```
[DllImport("wininet.dll", SetLastError=true)]
extern static bool InternetGetConnectedState( out int lpdwFlags Description, int dwReserved );

[Flags]
enum ConnectionStates
{
    Modem = 0x1,
    LAN = 0x2,
    Proxy = 0x4,
    RasInstalled = 0x10,
    Offline = 0x20,
    Configured = 0x40,
} 
```

示例代码用法看起来很简单：

```
using System;
using System.Runtime.InteropServices;

namespace ConsoleApplication2
{
  internal class Program
  {
   [DllImport("wininet.dll", SetLastError = true)]
   private static extern bool InternetGetConnectedState(out int lpdwFlags, int dwReserved);

   private static void Main(string[] args)
   {
    int flags;
    bool isConnected = InternetGetConnectedState(out flags, 0);
    Console.WriteLine(string.Format("Is connected :{0} Flags:{1}", isConnected, flags));
   }
  }
} 
```

你得到什么错误？您总是可以将方法包装`InternetGetConnectedState`在一个`try...catch`块中：

```
 private static void Main(string[] args)
   {
    int flags;
    bool isConnected = false;
    try
    {
      isConnected = InternetGetConnectedState(out flags, 0);
    } catch (Exception err)
    {
      Console.WriteLine(err.Message);
    }
    Console.WriteLine(string.Format("Is connected :{0} Flags:{1}", isConnected, flags));
   }
  } 
```

希望有帮助。

**更新**根据您的`flags = 18`结果：

`flags`被定义为`int`，所以 18 是十进制表示。

在二进制中，这将是`0001 0010`，这将映射到`LAN (0x2) | RasInstalled (0x10)`。

所以，我猜你是通过局域网连接的，但这并不能保证局域网可以访问互联网。要对此进行测试，您需要尝试浏览到已知的良好站点。

**RAS**我不确定。[远程访问服务](http://en.wikipedia.org/wiki/RAS)？

请记住：支架/停靠在充电器中的设备也可以注册为`Connected`。

# actionscript-3 - 如何使用文档类导入东西 rom 库？

> ID：14127816
> 
> 赞同：0
> 
> 时间：2013-01-02T19:18:49.433
> 
> 标签：actionscript-3, flash

我刚开始在 Flash 中使用文档类……但我已经遇到问题了……我的库中有一个按钮，需要放在我尝试使用的舞台上

addChild (play_button);

但它没有导入它可以有人解释我如何使用文档类将对象添加到舞台上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:25:32.373

您首先需要为库符号设置链接，您可以通过右键单击库中的符号并选择属性来实现。

接下来，选中“Export for ActionScript”复选框并确保也选中“Export in frame 1”。

您将看到一个标有 Class 的输入框。这将默认为符号的名称，但您可以将其更改为您想要的任何名称。这是可用于在代码中创建实例的类名。

这是您将如何做到的：

```
// if the class name of your symbol in the library is play_button
var playButton:SimpleButton = new play_button;
addChild(playButton); 
```

# java - 安装 portmidi 库

> ID：14127821
> 
> 赞同：3
> 
> 时间：2013-01-02T19:19:27.650
> 
> 标签：java

我正在尝试安装 portmidi 库：http: [//sourceforge.net/apps/trac/portmedia/wiki/Installing%20portmidi%20on%20Linux](http://sourceforge.net/apps/trac/portmedia/wiki/Installing%20portmidi%20on%20Linux)

我已按照说明进行操作，但是当我执行“制作”时，我会在下面收到此消息。我尝试了不同的 Javapaths，我不知道它是否现在。有人可以告诉我这里出了什么问题吗？

```
natanael@natanael-iMac:~/workspace/portmidi$ make
-- JAVA_JVM_LIB_PATH is 
-- JAVA_INCLUDE_PATH is /usr/lib/jvm/java-6-openjdk/include
-- JAVA_INCLUDE_PATH2 is /usr/lib/jvm/java-6-openjdk/include/linux
-- JAVA_JVM_LIBRARY is /usr/lib/jvm/java-6-openjdk/jre/lib/i386/client/libjvm.so
-- Configuring done
-- Generating done
-- Build files have been written to: /home/natanael/workspace/portmidi
[ 93%] Built target pmjni
[ 93%] Built target portmidi-static
[ 93%] Built target latency
[ 93%] Built target midiclock
[ 93%] Built target midithread
[ 93%] Built target midithru
[ 93%] Built target mm
[ 93%] Built target qtest
[ 93%] Built target sysex
[ 93%] Built target test
[ 93%] Built target portmidi-dynamic
[ 93%] Generating pmdefaults/PmDefaults.class
/bin/sh: 1: cd: can't cd to /home/natanael/workspace/portmidi/pm_java/pm_java
make[2]: *** [pm_java/pmdefaults/PmDefaults.class] Fehler 2
make[1]: *** [pm_java/CMakeFiles/pmdefaults_target.dir/all] Fehler 2
make: *** [all] Fehler 2
natanael@natanael-iMac:~/workspace/portmidi$ 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T23:45:46.527

Apparently, one of the `Makefile`s generated by `ccmake` is broken. I was able to fix the issue by running

```
sed -i 's/pm_java\/pm_java/pm_java/' build.make 
```

in the `pm_java/CMakeFiles/pmdefaults_target.dir/` subdirectory of the project *after* running `ccmake .` (on Ubuntu, though). (The `sed` command replaces all occurrences of `pm_java/pm_java` by `pm_java`.)

Everything compiles, and I can even run `pmdefaults` from the `Release` directory using

```
java -Djava.library.path=. -jar pmdefaults.jar 
```

# javascript - 参数内的双引号

> ID：14127823
> 
> 赞同：0
> 
> 时间：2013-01-02T19:19:39.183
> 
> 标签：javascript, jquery, html, quotations

尝试以编程方式在表格内添加链接。

```
$("#p"+col).append("<a href='#' id='tablep"+col+"' class='ui-link-inherit' onClick='tableSelect('p"+col+"')'></a>"); 
```

注意 ...'tableSelect('p"+col+"')'>... 是如何用单引号括起来的，但它的参数也必须用引号括起来。因此，当它运行时，它会`tableSelect(`像这样切断并`p1)`在其他地方抛出或抛出任何数字。

这是它在控制台中的样子：

```
<a id="tablep1" class="ui-link-inherit" p1')'="" onclick="tableSelect(" href="#"></a> 
```

明白了吗？无论如何，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:23:03.283

使用 jQuery 构建元素有一种更简洁的方法：

```
$("#p"+col).append($("<a>", {
  href: '#',
  id: 'tablep' + col,
  "class": 'ui-link-inherit',
  click: function() { tableSelect('p' + col); }
})); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T19:22:31.987

`onclick`属性是一种非常过时的附加事件的方法。当您使用 jQuery 插入 HTML 时，为什么不使用它来绑定您的事件呢？尝试这个：

```
var $a = $("<a href='#' id='tablep" + col + "' class='ui-link-inherit'></a>").click(function() {
    tableSelect(this);
});
$("#p" + col).append($a);

function tableSelect(obj) {
    // do something with the clicked object
} 
```

还值得注意的是，使用增量`id`或`class`属性是维护的巨大痛苦，并将阻碍未来的发展。更好的方法是使用类和 DOM 遍历来查找所需的特定元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T19:25:20.743

您正在使用 jQuery，不要通过字符串连接构建 HTML。

```
var newAnchor = $('<a>')
    .attr('id', 'tablep' + col)
    .addClass('ui-link-inherit')
    .click(function () {
        tableSelect('p' +col);
    })
    .appendTo($("#p"+col)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T19:22:03.727

您应该使用反斜杠[转义字符串内的引号：](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Escaping_characters)

```
"\"";

'\''; 
```

# ads - Cocos2dx 中的 Revmob

> ID：14127825
> 
> 赞同：0
> 
> 时间：2013-01-02T19:19:43.763
> 
> 标签：ads, cocos2d-x, revmob

我正在用 cocos2d-x 开发一个游戏，因为它对我来说似乎是最好的选择。虽然我处于开发的早期阶段，但我正在做一些研究并正在考虑使用 Revmob 广告网络。我没有在任何地方找到任何帮助，在 cocos2d-x 论坛上询问但没有得到任何回应。有没有人在他们的应用程序或 cocos2d-x 游戏中实现了 revmob？

[http://sdk.revmob.com/](http://sdk.revmob.com/) 到他们的 sdk 的快速链接。

他们支持 iphone、android 但我不知道我是否可以让它们与 cocos2d-x 或 android NDK 一起工作。任何帮助将不胜感激。

非常感谢您阅读它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T13:40:18.890

RevMob 现在有一个 Cocos2d-x 的 SDK：[http ://sdk.revmob.com/cocos2dx.html](http://sdk.revmob.com/cocos2dx.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T22:02:58.740

几乎所有的广告库提供商都只提供原生代码（Android/iOS）。要在 Cocos2dX 中执行此操作，您需要在 Revmob API 的顶部编写一个 C++ Wrapper。

有人为 Flurry 做过这件事，这会给你一些提示如何做到这一点

> [https://github.com/diwu/AnalyticX](https://github.com/diwu/AnalyticX)

还有一个人写了完整的故事，他是如何完成这种事情的。见下文

> [http://blog.molioapp.com/2011/11/openfeint-and-admob-integrated-with.html](http://blog.molioapp.com/2011/11/openfeint-and-admob-integrated-with.html)

只是为了让你往下走是你至少需要知道/做的事情。简而言之，请委托代表来回电。为 ObjectiveC 和 Java 制作一个单一的@interface。但是对于 java，您还需要创建一个 JNI 类。请注意，我之所以写 Singleton，是因为在 90% 的情况下，我们只需要显示 1 个广告，并且它位于屏幕顶部。

如果您从头开始，请参阅以下课程。因为我知道 Objective-C，所以我只会打电话给这部分。有关详细信息，您可以探索上述线程。

1.  ReveMobCWrapperDelegate.h 制作纯虚方法，即

    ```
    virtual void didAddSuccss() = 0;
    virtual void didAddFailed() = 0; 
    ```

2.  RevMobCWrapper.h 使其可在 Android/iOS 上使用。在最好的情况下，它应该是适用于 iOS 和 Android 的单个文件。例如考虑方法`void showAdd(ccPoint pos);`

3.  RevmobCBinding.h 将是 Objective C 的@interface，但是它将包含 (1) RevMobCWrapperDelegate.h 的委托变量，以便在收到 Add 后抛出回调。为方便起见，使其成为单例。请注意，此实现将是 C 和 Objective C 的混合，并且将使用 Revmob API 的方法，还要小心提供 C++ 和 Objective C 实现，您需要将此扩展名为“.mm”，如 RevmobCBiniding.mm。

4.  要编写 RevMobCWrapper 的实现，您可以使用 RevmobCBinding.mm 或创建一个新文件 RevMobCWrapper.mm

# c - 将参数作为 void 指针传递给 OS-iii 中的新线程

> ID：14127826
> 
> 赞同：1
> 
> 时间：2013-01-02T19:19:54.293
> 
> 标签：c, multithreading, embedded

一些背景知识：我正在阅读 Micrium 的 uC/OS-III 用户手册，并按照该指南使用 IAR Embedded Workbench IDE 使用 C 语言进行编程。

该代码来自为 uC-Eval-STM32F107 开发板编写的书中提供的一些示例。它正在创建一个新线程，并通过 void 指针传递参数。我熟悉 void 指针并将参数传递给线程。

调用内核函数来创建一个新线程：

```
OSTaskCreate( ... ); 
```

然后在函数定义中，他们做了一些我不知道如何描述的事情：

```
static  void  AppTaskStart (void *p_arg)
{
    CPU_INT32U  cpu_clk_freq;
    CPU_INT32U  cnts;
    OS_ERR      err;
    CPU_TS  ts;

   p_arg = p_arg;

    ...
} 
```

或者我还在其他示例中看到代码如下所示：

```
(void *)p_arg; 
```

他们在做什么，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:29:56.650

```
 p_arg = p_arg; 
```

或者

```
(void *)p_arg; 
```

被放在那里以抑制有关未使用变量的警告`p_arg`。

# php - 在 Laravel 中使用 Mongor 包时找不到类“Mongo”

> ID：14127828
> 
> 赞同：1
> 
> 时间：2013-01-02T19:20:09.413
> 
> 标签：php, mongodb, laravel, mongor

**问题：**当使用`mongor`Laravel 的 bundle 时，我得到一个错误`Class 'Mongo' not found`。任何想法出了什么问题？

我安装了 mongodb 并启动了 mongodb 服务。接下来我安装了[mongor 包](http://bundles.laravel.com/bundle/mongor)并创建/更新了以下文件。

```
php artisan bundle:install mongor 
```

**捆绑包.php**

```
return array(
    'docs' => array('handles' => 'docs'),
    'mongor' => array('auto' => true),
); 
```

**数据库.php**

```
'default' => 'mongor',

'mongor' => array(
    'hostname'   => 'localhost',
    'connect'    => true,
    'timeout'    => '',
    'replicaSet' => '',
    'db'         => 'test',
    'username'   => '',
    'password'   => '',
), 
```

**用户.php**

```
<?php

class User extends Mongor\Model {} 
```

**路由.php**

```
Route::get('test', function() {
    $user = User::find(1);
}); 
```

**错误**

```
Class 'Mongo' not found
Location: /var/www/test/bundles/mongor/mongodb.php on line 85 
```

**导致错误的行**

```
$this->_connection = new \Mongo($conn, $options); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:10:20.137

问题是您没有安装驱动程序。

为了连接到 MongoDB，您必须拥有 PHP 驱动程序，该驱动程序允许您与 MongoDBs 接口进行通信。

您可以在 PHP 手册 ( [http://php.net/manual/en/mongo.installation.php](http://php.net/manual/en/mongo.installation.php) ) 或 MongoDB 网站 ( [http://docs.mongodb.org/ecosystem/drivers/php ) 中找到安装指南/](http://docs.mongodb.org/ecosystem/drivers/php/)）。

确保在您的案例中关闭 auth 的情况下启动 MongoDB。

# magento - Magento 捆绑产品：子选项排序顺序问题

> ID：14127829
> 
> 赞同：1
> 
> 时间：2013-01-02T19:20:21.937
> 
> 标签：magento, bundle, product, transactional

我遇到了一个问题，其中捆绑产品的子选项/产品在交易电子邮件中没有正确排序。

在这种情况下，排序顺序很重要，因为产品型号是选项之一，需要首先显示。

在**template/bundle/email/order/items/order/default.phtml**中，我们有视图逻辑来吐出产品详细信息：

```
<?php $_item = $this->getItem() ?>
<?php $_order=$this->getOrder() ?>

<?php $parentItem = $this->getItem() ?>
<?php $items = array_merge(array($parentItem), $parentItem->getChildrenItems()); ?>

<?php foreach ($items as $_item): ?>

// etc... 
```

像往常一样，子产品的排序顺序在管理员中定义，并在产品视图、购物车、结帐等中正常显示……但在电子邮件中显示期间，订单被修改了。

奇怪的是顺序也不是按字母顺序排列的。事实上，这似乎有点武断——奇怪……

无论如何，我应该如何对`$items`数组进行排序以匹配预期的排序顺序？

注意 = 这是在**admin->catalog->product->bundle items->position**中设置的值。

* * *

### 更新

这是我最终确定的辅助方法：

```
/**
 * @codepool   Local
 * @package    Namespace
 * @module     Module
 */

class Namespace_Module_Helper_Product_Sort extends Mage_Core_Helper_Abstract
{

    /*
    * @param $item : bundle product 
    * @return array
    */
    public function sortBundleChildrenByPosition( $item )
    {
        $sorted = array();
        $sorted[] = $item;

        //Mage::log('Namespace_Module_Helper_Product_Bundle::sortChildrenByPosition /n'.print_r($item->debug(), true));

        // grab the product (bundle parent)
        $_product = $item->getProduct();

        // grab child order items
        $_children = $item->getChildrenItems();

        // grab sort order for options
        $optionCollection = $_product->getTypeInstance(true)->getOptionsCollection($_product);

        // iterate over options, comparing title / label, if they match, toss into return array
        foreach ($optionCollection as $option){

            //Mage::log('$option:'.print_r($option->debug(), true));
            $title = $option['default_title'];

            foreach ($_children as $child){
                $prodOption = $child->getProductOptions();
                $bundleSelectionAttributes = unserialize($prodOption['bundle_selection_attributes']);
                //Mage::log('$_children=>$child:product_options[bundle_selection_attributes]'.print_r($bundleSelectionAttributes, true));

                if ($bundleSelectionAttributes['option_label'] == $title){
                    //Mage::log('$bundleSelectionAttributes[option_label] == '.$title.'. $sorted[] ='. print_r($child->debug(), true) );
                    $sorted[] = $child;
                    continue; 
                }
            }

        }

        return $sorted;
    }

} 
```

我在**template/bundle/email/order/items/order/default.phtml**中调用它（或任何需要排序的捆绑包）：

```
<?php 
    $_item = $this->getItem(); 
    $_order=$this->getOrder(); 

    $parentItem = $this->getItem(); 

    //$items = array_merge( array($parentItem), $parentItem->getChildrenItems()); 

    $items = $this->helper('Namespace_Module/Product_Sort')->sortBundleChildrenByPosition( $_item );
?> 
```

...我1000％肯定有一些内置的方法可以做到这一点，而且可能更干净。但经过几个小时的搜寻，我找不到它。

这行得通。就这些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:56:02.973

一种解决方法：

*   遍历所有`$items`并创建一个带有id（作为键）和名称（作为值）的数组让我们假设它被称为$sortedPrd。
*   对新数组的 ($sortedPrd) 值进行排序（按字母顺序）
*   循环`$sortedPrd`并使用 it's key 从中提取给定的产品`$items`

**更新**

这是一些获取捆绑选项（子产品）位置的代码：

```
$optionCollection = $_product->getTypeInstance(true)->getOptionsCollection($_product);
foreach ($optionCollection as $prdOptions){

  $position = $prdOptions->getPosition();
} 
```

有关更多信息，请参阅此问题：[Magento：如何在管理中使用产品时沿其所有数据加载产品](https://stackoverflow.com/questions/7763296/magento-how-to-load-product-along-its-all-data-as-it-is-used-in-admin)

# ios - AFNetworking 设计模式

> ID：14127830
> 
> 赞同：1
> 
> 时间：2013-01-02T19:20:24.777
> 
> 标签：ios, afnetworking, reachability

因此，我将 AFNetworking 用于 iOS 应用程序，并且我只是进行了一些重构以包含一些网络可达性代码。我之前对请求等参数进行编组的设计模式是创建特定于服务的请求参数，然后使用这些参数创建一个 NSURL，然后创建一个 NSURLRequest。

我连接的服务无处不在——有些需要签名请求、访问令牌、混乱的苦涩等等（Twitter、Foursquare、Instagram、Tumblr 等）。

对于每个服务，基于通用的、与服务无关的协议，我有能够检索状态、检索用户配置文件数据等的方法。在这些方法中，我创建了一个 AFHTTPClient 并且工作正常。

但是，现在我添加了一些应用程序语义 [AFHTTPClient setReachabilityStatusChangeBlock:] 我想知道是否应该为处理各种服务请求的类的每个实例创建一个 AFHTTPClient，而不是为该类中的每个方法创建一个处理服务请求？定义可达性状态更改块

有人对在这种情况下使用的良好设计模式有什么建议吗？我的意思是——我可以解决一些问题，但我想知道是否存在“最佳实践”/“从经验中构建”模式？

通常，我处理来自特定服务的请求的类是长期存在的。在运行时登录的每个“用户”都有一个，尽管用户的数量通常很少——几十个。

我想我要问的是——一般来说，人们通常在哪里定义他们的 AFHTTPClient，他们通常有网络可达性状态更改块做什么？（本能说：取消操作，如果状态表明互联网已消失，则提醒用户，当然——但任何巧妙的“重试”语义等？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T11:07:50.547

在我的应用程序中，坚持“每个 API 服务器一个 APIClient”的规则。当向每个 APIClient 添加不同的位和技巧时，这很方便。它们可能因授权类型和加密而异。

关于可达性。您是否尝试过`NSNotificationCenter`为此目的使用。这就是创建的目的 - 填充广泛使用的事件。您可以检查[可达性](https://github.com/tonymillion/Reachability)库及其示例。

# django - Django HTTP GET 安全性

> ID：14127835
> 
> 赞同：1
> 
> 时间：2013-01-02T19:20:42.930
> 
> 标签：django

在我的主页上，我对每个访问者进行了随机投票。加载主页后，自动 HTTP GET 会触发我的视图为该轮询生成唯一的会话 ID。这是为了确保用户确实在对我在我看来为他们随机生成的投票进行投票，而不是仅仅手动构建他们自己的 HTTP POST 来对他们想要的投票进行投票。

但是，使用初始 HTTP GET，我还将唯一 id 保存到我的数据库中，以便我可以验证他们未来的 POST。如果用户使用 HTTP GET 向我的主页发送垃圾邮件以触发多个数据库写入，这是否会产生安全问题？

我知道 HTTP GET 不应该改变我的应用程序的状态，但现在是否适合 HTTP GET 这样做？如果没有，我将如何解决这个困境？

当我使用 HTTP GET 跨越我的服务器时，我收到以下错误。此错误是来自对我的数据库的过多写入还是其他原因？

```
Traceback (most recent call last):
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 86, in run
    self.finish_response()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 127, in finish_response
    self.write(data)
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 210, in write
    self.send_headers()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 268, in send_headers
    self.send_preamble()
  File "/usr/lib/python2.7/wsgiref/handlers.py", line 195, in send_preamble
    self._write('Server: %s\r\n' % self.server_software)
  File "/usr/lib/python2.7/socket.py", line 324, in write
    self.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 104] Connection reset by peer
----------------------------------------
Exception happened during processing of request from ('127.0.0.1', 58092)
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 582, in process_request_thread
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/local/lib/python2.7/dist-packages/django/core/servers/basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "/usr/lib/python2.7/SocketServer.py", line 640, in __init__
    self.finish()
  File "/usr/lib/python2.7/SocketServer.py", line 693, in finish
    self.wfile.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:11:47.583

如果这对您来说是一个问题，那么您可以将会话[配置](https://docs.djangoproject.com/en/dev/topics/http/sessions/#configuring-the-session-engine)为不使用数据库。您还有其他选择：基于 cookie、基于文件（可能并不比使用数据库好多少）和缓存（内存，在这种情况下这不是一个好的选择）。基于 Cookie 的会话将数据存储在用户的机器上，如果您担心垃圾邮件攻击会用会话数据填充您的服务器，这很好，但如果您担心 cookie 操纵攻击，那就不好了。但是，django cookie 是经过签名的并使用密钥。希望这可以帮助！

# hook - GetMessage(WM_CHAR) 覆盖？确保所有其他 Window Hooks 激活

> ID：14127837
> 
> 赞同：2
> 
> 时间：2013-01-02T19:20:57.183
> 
> 标签：hook, code-injection, autohotkey, keyboard-layout, getmessage

我正在寻找一种方法来拦截外部进程中对**WM_CHAR的****GetMessage()**调用（具体来说，只有活动窗口）。我对使用**SetWindowsHookEx()**犹豫不决- 我想绝对确保可能修改键盘输入的最广泛的程序有机会首先触发。有没有人有什么建议？

 ******语境：**我正在构建一个应用程序，旨在生成当前键盘布局的视觉效果。但是，我希望使其尽可能与第三方键盘重新映射软件（包括用户制作的 AutoHotkey 脚本等）兼容。当通过热键触发时，我的程序将按键发送到活动窗口（扫描码 + 适当的虚拟键），它应该由其窗口过程处理......从而触发任何基于系统范围挂钩的重映射软件和具有被编程为仅重新映射活动应用程序中的键......然后我的程序将拦截生成的 WM_CHAR / WM_UNICHAR / WM_DEADCHAR 消息，从中重建键盘布局。实际上，字符消息不应该到达输出的活动窗口。

**PS**抱歉，这可能是一种糟糕的礼仪——注册后首先发布一个问题——但我已经研究这个问题很多个晚上了，但我仍然没有找到最佳解决方案！我主要从 AutoHotkey 工作，我完全愿意分享我考虑过的其他方法来获得真正的当前键盘布局，但它们都有其局限性：与重新映射软件玩得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T03:35:37.503

将“~”（不带引号）放在热键之前。

这将运行您为热键设置的任何代码，*并*允许击键失败。

例子：

```
~^a::
MsgBox, 你按下了 Ctrl+a
返回

```****

# javascript - HTML 表格单元格切换

> ID：14127841
> 
> 赞同：-1
> 
> 时间：2013-01-02T19:21:14.260
> 
> 标签：javascript, html

我不知道如何做到这一点...

我在表格中有一个要堆叠的单元格，以便当有人在文本框中输入数字时会显示图像，但如果他们输入另一个数字，则文本会显示在同一单元格中而不是图像中。我知道这也可能涉及一些 java 脚本。类似这样的东西：

```
if textinbox = 1
    CellInTable = Image
    Hide xyzText

if textinbox = 2
    Hide image
    CellInTable = xyzText 
```

*（伪代码）*

文本框位于表格的不同单元格中，而不是同一个单元格，我的 90% 的 JS 是从另一个文件调用的。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:02:27.873

我为你写了一个小代码，我认为这就是你的意思，因为你的描述不是那么清楚......

**的HTML：**

```
<table style='border:grey 1px solid; background-color:silver; width:200px;' cellspacing="0" cellpadding="0">
<tr>
    <td><input type="text" id="number" style='width:100px' /></td>
    <td id="cell"></td>
</tr>
</table>​ 
```

**Javascript** *（使用 jquery）*：

```
$("#number").keyup(function() {
    var img;
    switch($("#number").val()) {
        case "1":
            img = "http://upload.wikimedia.org/wikipedia/commons/2/26/Smile.png";
            break;
        case "2": 
            img = "http://upload.wikimedia.org/wikipedia/commons/7/72/Teeth.png";
            break;
        case "3":
            img = "http://upload.wikimedia.org/wikipedia/commons/5/5c/Angry.png";
            break;
        default:
            img = false;
            break;
    }
    if (img) {
        $("#cell").html("<img src='"+img+"' />");
    } else {
        $("#cell").html("");
    }
}); 
```

看到它工作：http: [//jsfiddle.net/M8E5f/3/](http://jsfiddle.net/M8E5f/3/)

# asp.net - 如何在 web.config 中仅为我的管理员使用身份验证和授权标签，而不使用 asp.net 中的登录控件

> ID：14127844
> 
> 赞同：0
> 
> 时间：2013-01-02T19:21:26.323
> 
> 标签：asp.net

我是 asp.net 的新手，我有一个问题。在我的 asp.net web 目录中，我有一些用户页面和一个管理员文件夹，我想在我的 web.config 文件中使用一些标签，如身份验证和授权来确定我的管理员用户名和密码，并确定只有管理员可以使用页面在管理文件夹中，但我的问题是我没有在我的网络中使用任何登录控件让我的用户登录。我使用一些文本框来提供用户信息，然后我连接到我在数据库中的表并检查他们的信息，我想知道在这种情况下我该怎么做？如果有人帮助我，我会变得非常感激。用户使用他们的电子邮件和密码登录，这是我的代码：

```
 <tr>
        <td>
            &nbsp;Email :
        </td>
        <td class="style1">
            &nbsp;<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
            <br />

        </td>

    </tr>
     <tr>
        <td>
            &nbsp;
        </td>
        <td class="style1">
            &nbsp; <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                ErrorMessage="please enter your email!" 
                ControlToValidate="TextBox1" 
                Display="Dynamic" ForeColor="#CC0000" ValidationGroup="SignIn"></asp:RequiredFieldValidator>
            <br />
            <asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ErrorMessage="incorrect format!" ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*"  Display="Dynamic"  ForeColor="#CC0000" ControlToValidate="TextBox1" ValidationGroup="SignIn"></asp:RegularExpressionValidator>
           <br />

        </td>

    </tr>
    <tr>
        <td>
            &nbsp;password:
        </td>
        <td class="style1">
            &nbsp;<asp:TextBox ID="TextBox2" runat="server" TextMode="Password" ></asp:TextBox>
           <br />
        </td>

    </tr>
     <tr>
        <td>
            &nbsp;
        </td>
        <td class="style1">
         &nbsp;
            <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" ErrorMessage="Enter your password" ControlToValidate="TextBox2"  Display="Dynamic" ForeColor="#CC0000" ValidationGroup="SignIn" ></asp:RequiredFieldValidator>

        </td>

    </tr>
    <tr>
        <td>
            &nbsp;
        </td>
        <td class="style1">
            &nbsp;<asp:Button ID="Button2" runat="server" Text="enter" 
                Width="123px" onclick="Button2_Click" ValidationGroup="SignIn" />
        </td> 
```

> 我已经改变了它：

```
 protected void Button2_click(object sender, EventArgs e)
   {
     if (Membership.ValidateUser(TextBox1.Text.Trim(), TextBox2.Text.Trim()))
    {
        if (Roles.IsUserInRole(TextBox1.Text.Trim(), "Admin"))
        {
            Response.Redirect("Admin/Default.aspx");
            Session["user"] = "admin";
        }
       // ad.Text = "admin";
    }
    else
    {
      int c = -1;
    SqlConnection cn2 = new SqlConnection();
    cn2.ConnectionString = "server = . ; database = mobile_store ; Trusted_Connection=true";
    DataTable tb = new  DataTable();

    SqlCommand cmd2 = new SqlCommand();
    cmd2.Connection = cn2;
    cmd2.CommandType = CommandType.StoredProcedure;
    cmd2.CommandText = "Check_Email_Pass";
    cmd2.Parameters.AddWithValue("@mail", TextBox1.Text.Trim());
    cmd2.Parameters.AddWithValue("@pass", TextBox2.Text.Trim());
    cmd2.Parameters.Add("@res", SqlDbType.Int);    
    cmd2.Parameters["@res"].Direction = ParameterDirection.Output;

    SqlDataAdapter da = new SqlDataAdapter(cmd2);
    da.Fill(tb);
    try
    {
        cn2.Open();
        cmd2.ExecuteNonQuery();
        c = Convert.ToInt32(cmd2.Parameters["@res"].Value);

        switch (c)
        {
            case 1:
                {

                    Session["user"] = tb.Rows[0][0].ToString() + " " + tb.Rows[0][1].ToString();
                    Session["authenticate"] = true;
                    Session["id"] = Convert.ToInt32( tb.Rows[0][2]);

                    ((MasterPage)this.Master).lable2Visible = Session["user"].ToString();
                    Label2.Text = "Welcome" + " " + tb.Rows[0][0].ToString() + " " + tb.Rows[0][1].ToString();
                    TextBox1.Text = null;
                    if (Session["pagesource"] != null)
                    {
                        Response.Redirect((string)Session["pagesource"]);
                    }
                    else
                    {
                        Response.Redirect("~/user_page.aspx");
                    }

                }
                break;
            case 0:
                {
                    Label2.Text = "your password is wrong";

                }
                break;
            case 2:
                {

                    Label2.Text = "this email has registered before <br/> please sign up first";
                    TextBox3.Text = TextBox1.Text.Trim();
                }
                break;
            default:
                break;
        }

      }
    }

    catch (Exception ex)
    {
        Label1.Text = ex.ToString();

    }
    finally { cn2.Close(); }
   } 
```

> 在我的 web.config 文件中

```
 <system.Web>
    <authentication mode="Forms">
        <forms  timeout="20" slidingExpiration="true" cookieless="AutoDetect" protection="All" requireSSL="false" enableCrossAppRedirects="false" loginUrl="entrance_before_paying.aspx" >
            <credentials passwordFormat="Clear">
                <user name="elmiragolshanff@yahoo.com" password="elmira" />
            </credentials>
        </forms>
    </authentication>
    </system.web>     

        <location path="Admin">
    <system.web>
        <authorization>
            <allow users="elmiragolshanff@yahoo.com" roles="Admin" />              
        </authorization>

</location>

    </system.web> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:44:12.437

埃尔迈拉，

有几种方法可以做到这一点；不过，@SLaks 对他的担忧是正确的。这是一篇可能在这方面对您有所帮助的帖子，“C# 中的哈希和盐密码”。

[C# 中的哈希和盐密码](https://stackoverflow.com/questions/2138429/hash-and-salt-passwords-in-c-sharp)

也就是说，我认为您会从阅读有关 ASP.NET 用户管理的内容中受益：“通过使用成员资格管理用户”。

[http://msdn.microsoft.com/en-us/library/tw292whz(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/tw292whz(v=vs.100).aspx)

它将允许您完全按照自己的意愿行事 - 根据配置文件限制对资源（页面）的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:45:50.330

我改变了它。现在它工作正常 web.configfile：

```
<authentication mode="Forms">
        <forms  timeout="30" loginUrl="~/entrance_before_paying.aspx" defaultUrl="Admin/Default.aspx" name=".ASPXFORMSDEMO"  cookieless="AutoDetect" protection="All"   >

        <credentials passwordFormat="Clear">
                <user name="elmiragolshanff@yahoo.com"  password="elmira" />
            </credentials>
        </forms>
    </authentication> 
```

我在 entry_before_paying.aspx 页面中的 button_click 事件：

```
if (FormsAuthentication.Authenticate(TextBox1.Text.Trim(), TextBox2.Text.Trim()))
   {

           Response.Redirect("Admin/Default.aspx");
            Session["user"] = "admin";     

   }
 else{ //I wrote the code to authenticate users ....} 
```

# html - 在混合宽度导航元素上从右侧滑入背景图像

> ID：14127848
> 
> 赞同：1
> 
> 时间：2013-01-02T19:21:38.240
> 
> 标签：html, css, css-transitions

`<ul>`我的网站侧边栏上有一些导航元素。这是相关的标记和 CSS 样式：

```
<ul>
    <li><a href="">Blog</a></li>
    <li><a href="">Work</a></li>
    <li><a href="">About</a></li>
    <li><a href="">Contact</a></li>
</ul>

#sidebar ul {
    list-style-type: none;
    float: right;
    position: relative;
    right: -10px;
}

#sidebar ul li a {
    display: inline-block;
    line-height: 30px;
    text-decoration: none;
    padding: 0px 10px;
    color: #555555;
}

#sidebar ul li a:hover {
    background: url('images/nav-hover.png') no-repeat;
    color: #f0f0f0;
} 
```

当用户将鼠标悬停在导航元素（`<a>`标签）上时，我希望背景`nav-hover.png`使用 CSS 过渡从右侧滑入。我试过这个，但它似乎不起作用：

```
#sidebar ul li a {
    background: none;
    transition-property: background;
    transition-duration: 1s;
    display: inline-block;
    line-height: 30px;
    text-decoration: none;
    padding: 0px 10px;
    color: #555555;
}

#sidebar ul li a:hover {
    background: url('images/nav-hover.png') no-repeat;
    color: #f0f0f0;
    border-top-left-radius: 4px;
    border-bottom-left-radius: 4px;
} 
```

我怎样才能做到这一点？

JSFiddle 链接：http: [//jsfiddle.net/2EfYa/](http://jsfiddle.net/2EfYa/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:41:07.727

您需要为`background-position`：

[http://jsfiddle.net/vQgEd/](http://jsfiddle.net/vQgEd/) - 可能只适用于 webkit

```
ul li a {
    background: url('http://lorempixel.com/400/200') -100% 0px no-repeat;
    transition: background-position 1s;
    -webkit-transition: background-position 1s;
    display: inline-block;
    line-height: 30px;
    text-decoration: none;
    padding: 0px 10px;
    color: #555555;
}

ul li a:hover {
    background-position:left top;
    color: #f0f0f0;
}​ 
```

# entity-framework - 缺少使用 ADO.NET 实体数据模型的自动生成方法

> ID：14127850
> 
> 赞同：0
> 
> 时间：2013-01-02T19:21:42.143
> 
> 标签：entity-framework, visual-studio-2012, ado.net-entity-data-model

我正在尝试学习实体框架。在我使用的书中，它指导我创建一个 C# 类库来容纳实体框架模型。在这个类库中，我被指示添加一个新项目并从现有数据库 (.NET 4) 生成一个 ADO.NET 实体数据模型。

生成类后，我注意到 EntityObject 类缺少方法（如 OnCustomerIDChanged、OnDueDateChanged 等）。这些类只有属性访问器和导航属性。我确实注意到一些带有 .tt 扩展名的文件。看起来在实体框架中有一种处理对象的新方法，但由于我仍在学习 EF，我想知道是否有办法让它重新生成缺失的方法？在此先感谢您的帮助。

顺便说一句，我尝试使用 Visual Studio 2010，它确实创建了我上面提到的方法。但是，我想知道是否有可能让 Visual Studio 2012 做同样的事情，因为我已经成长为喜欢 VS 2012。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:06:56.980

如果你想学习这本书，你应该使用 VS 2010。EF 已经发展，`EntityObject`基于实体的实体被认为是过时的。

无论如何，如果您想强制 VS 2012 以与 VS 2010 相同的方式运行，请打开您的 EDMX 并在*属性窗口中将**代码生成策略*更改为*默认*并保存您的 EDMX 文件。之后，您可以删除所有 .tt 文件。您的所有实体都将在单个 .Designer.cs 文件中生成。

# java - 是否可以计算正则表达式前瞻的字符？

> ID：14127855
> 
> 赞同：0
> 
> 时间：2013-01-02T19:22:25.823
> 
> 标签：java, regex, lookahead

我正在尝试验证与此类似的表达式：

```
SEN 3 00000001 HT 12.60 39.50 
```

使用模式`SEN \\d{1} \\w{8} \\w{1,2} ([-+]?[0-9]*\\.?[0-9]*){1,2}`。该模式大多有效。返回的组是

```
SEN 3 00000001 HT 12.60 
```

与`39.50`迷失者。我认为原因是因为`{1,2}`我的模式中的最后一个数量条件 () 只满足`12.60`.

有没有办法根据使用前瞻`([-+]?[0-9]*\\.?[0-9]*)`的字符数量来设置需要满足的数量？`\\w{1,2}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:27:27.370

你几乎明白了：）

您所犯的错误是将空间留在最后重复的组之外。由于 12.60 和 39.50 之间有一个空格，因此除了 12.60 之外没有其他匹配项。

试试这个正则表达式：

```
SEN \\d{1} \\w{8} \\w{1,2}( [-+]?[0-9]*\\.?[0-9]*){1,2} 
```

一些优化：

*   将 () 替换为 (?:) 因为它会在量化时被覆盖，除非这是设计使然
*   将 \d{1} 替换为 \d，它们是一样的。

演示+说明：[http ://regex101.com/r/jQ7sP2](http://regex101.com/r/jQ7sP2)

# android - 保存和加载对象 Android

> ID：14127860
> 
> 赞同：1
> 
> 时间：2013-01-02T19:22:43.473
> 
> 标签：android, sharedpreferences

以下是代码。

**将对象存储到共享首选项中**

```
public void saveObject()
    {
        AccountVO accountVO1 = new AccountVO("1", "scott", "password", "scott@mail.com", "Scott", "Stanford");

        accountsSharedPreference = context.getSharedPreferences("AccountsPrefsFile",Context.MODE_WORLD_PRIVATE);
        accountsPreferenceEdit = accountsSharedPreference.edit();

        accountsPreferenceEdit.putString("accountObject", accountVO1.toString());
        accountsPreferenceEdit.commit();
} 
```

**从相同的共享首选项中检索对象**

```
public AccountVO loadObject()
    {
        AccountVO accountVO1 = null;

        accountsSharedPreference = context.getSharedPreferences("AccountsPrefsFile",context.MODE_PRIVATE);

        String accounntsObjectString = accountsSharedPreference.getString("accountObject", "");

        //My issue ? --- How to retreive the AccountVO object from "accountObject" String here????

        return accountVO1;
} 
```

我的 AccountVO 类代码如下：

```
 public class AccountVO
    {

        private String id;
        private String username;
        private String password;
        private String email;
        private String firstName;
        private String lastName;

public AccountVO(String tempID, String tempUserName, String tempPassword, String tempEmail, String tempFirstName, String tempLastName)
    {
            this.id = tempID;
            this.username = tempUserName;
            this.password = tempPassword;
            this.email = tempEmail;
            this.firstName = tempFirstName;
            this.lastName = tempLastName;   
        }
        public String getId()
        {
            return id;
        }
        public String getUserName()
        {
            return username;
        }
        public String getEmail()
        {
            return email;
        }
        public String getFirstName()
        {
            return firstName;
        }
        public String getLastName()
        {
            return lastName;
        }
    } 
```

**任何人都告诉我如何从 loadObject 方法中的 accountObject 字符串中检索 AccountVO 对象。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:31:04.133

您不能使用该`toString()`属性构造对象。`Object.toString()`只返回对象的哈希值表示，而不是内存地址或其他任何东西。这意味着多个对象可以从`toString()`. 例如： `new Byte(10).toString()`和`"10".toString()`

要将您的对象存储在 SharedPreferences 中，我建议您将它们存储为键值对，因为您知道 AccountVO 对象的确切格式。（在该类中添加一个助手可能会为您返回一个键值对映射）

**或者**

覆盖 AccountVO 类中的 toString 方法以返回一个字符串，稍后您可以在稍后从 SharedPreferences 检索时轻松破译该字符串。像这样：

```
@Override
public String toString() {
  return id+"<delim>"+username+"<delim>"+password+"<delim>"+email+"<delim>"+firstName+"<delim>"+lastName;
} 
```

然后在您的`loadObject()`方法中，使用以下方法重建对象：

```
public AccountVO loadObject()
{
    AccountVO accountVO1 = null;

    accountsSharedPreference = context.getSharedPreferences("AccountsPrefsFile",context.MODE_PRIVATE);

    String accounntsObjectString = accountsSharedPreference.getString("accountObject", "");

    String[] parts = accounntsObjectString.split("<delim>");

    return new accountVO1(parts[0], parts[1], parts[2], parts[3], parts[4], parts[5]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:57:26.953

这是将对象保存到`SharedPreferences`. 谷歌的 GSON 很棒。

[使用GSON](http://code.google.com/p/google-gson/)将您的对象转换为[JSON](http://www.json.org/)字符串，然后将其保存到：`SharedPreferences`

```
AccountVO accountVO1 = new AccountVO("1", "scott", "password", "scott@mail.com", "Scott", "Stanford");

accountsSharedPreference = context.getSharedPreferences("AccountsPrefsFile",Context.MODE_WORLD_PRIVATE);
accountsPreferenceEdit = accountsSharedPreference.edit();

Gson gson = new Gson();
String objStr = gson.toJson(accountV01);

accountsPreferenceEdit.putString("accountObject", objStr);
accountsPreferenceEdit.commit(); 
```

要检索您保存的对象，请执行以下操作：

```
Gson gson = new Gson();
accountsSharedPreference = context.getSharedPreferences("AccountsPrefsFile",Context.MODE_WORLD_PRIVATE);
String savedObjStr = accountsSharedPreference.getString("accountObject", null);
if(savedObjStr != null) {
    AccountVO accountVO1 = gson.fromJson(savedObjStr, AccountVO.class);
} 
```

# hadoop - Hadoop 辅助 NameNode IP 地址

> ID：14127863
> 
> 赞同：0
> 
> 时间：2013-01-02T19:22:49.717
> 
> 标签：hadoop

我需要编写一个 java 代码来获取给定集群的辅助 Namenode 的 IP 地址。给定集群的 Namenode 的 IP 地址。

我能够获取 Datanodes 和 Namenode 的报告，但找不到获取辅助 Namenode 的 IP 地址的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:48:39.023

You can do this

String hostURL = conf.get(new String("dfs.secondary.http.address"));

where conf is a configuration object and hostURL will be hostname:portnumber port number will be 50090 by default

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:09:36.043

如果您有配置文件的副本（如@debarshi 的答案中所述），那么您可以使用它来提取地址，否则名称节点不知道辅助名称节点 - 更重要的是辅助名称节点联系名称节点获取图像和编辑，合并它们，然后将它们发布回来。

我想您可以检查正在运行/已运行的作业的 job.xml，并解析出配置值。

# apache-flex - 工作人员内的弹性负载策略

> ID：14127868
> 
> 赞同：0
> 
> 时间：2013-01-02T19:23:09.780
> 
> 标签：apache-flex, sockets

我正在尝试使用弹性工作者来管理我的套接字连接，因为在接收大量数据时，它会冻结 UI。

但是由于端口 843 未打开，我遇到了政策问题。所以我尝试使用其他端口加载策略，但我仍然遇到安全错误，表明应用程序正在尝试访问端口 843 上的策略文件。

这是我在工作人员内部用来加载策略的内容：

```
Security.loadPolicyFile("xmlsocket://myServer:8888"); 
```

我尝试使用 java 应用程序来提供策略：

```
public static void main(String[] args)
{

    String policy = "<?xml version=\"1.0\"?><!DOCTYPE cross-domain-policy SYSTEM \"http://www.adobe.com/xml/dtds/cross-domain-policy.dtd\">";
    policy += "<cross-domain-policy>"; 
    policy += "<allow-access-from domain=\"*\" to-ports=\"*\"/>";
    policy += "</cross-domain-policy>";

    ServerSocket s;
    try
    {
        s = new ServerSocket(8888);

    while(true)
    {
        try
        {
            Socket cli = s.accept();
            BufferedReader in = new BufferedReader(new InputStreamReader(cli.getInputStream()));
            OutputStreamWriter out = new OutputStreamWriter(cli.getOutputStream());

            System.out.println(in.read());

            out.write(policy+"\0");
            out.flush();
            cli.shutdownInput();
            cli.shutdownOutput();
            cli.close();
            System.out.println("Policy response sent");
            System.out.println(policy);
            System.out.println("Waiting for new request");

        }
        catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    }
    catch (IOException e1)
    {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

} 
```

我不知道出了什么问题，是我做错了什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T14:55:03.860

为了使它正常工作，我只是将“ *out* ”类型更改为 PrintWriter。

这是工作代码：

```
public class FlexPolicy extends Thread {

private ServerSocket s;

private StringBuffer policyBuffer = new StringBuffer();
public static final String POLICY_REQUEST = "policy-file-request";

private Logger log = Logger.getLogger(FlexPolicy.class);

public FlexPolicy()
{
    String allowedPorts = MyConfig.getInstance().getValue("ports");
    policyBuffer.append("<?xml version=\"1.0\"?><cross-domain-policy>");
    policyBuffer.append("<allow-access-from domain=\"*\" to-ports=\""+allowedPorts+"\" />");
    policyBuffer.append("</cross-domain-policy>");
}

@Override
public void run()
{
    try
    {
        s = new ServerSocket(Integer.parseInt(MyConfig.getInstance().getValue("socket")));

        while(true)
        {
            log.debug("Waiting for policy request");
            Socket cli = s.accept();
            BufferedReader in = new BufferedReader(new InputStreamReader(cli.getInputStream()));
            PrintWriter out = new PrintWriter(cli.getOutputStream());

            String request = receive(in);
            log.debug("received request : |"+request+"| |"+POLICY_REQUEST+"|");
            log.debug(request.indexOf(POLICY_REQUEST));

            if(request.indexOf(POLICY_REQUEST)!=-1)
            {
                log.debug("policy matches");
                sendPolicy(out);
            }

            try
            {
                cli.shutdownInput();
                cli.shutdownOutput();
                cli.close();
            }
            catch (Exception e)
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }

    }
    catch(Exception e)
    {

    }
}

public void sendPolicy(PrintWriter out)
{
    out.println(policyBuffer.toString()+"\0");
    out.flush();
    log.debug("Policy sent");
}

public String receive(BufferedReader input) throws Exception
{
    String requete = "";
    int taille = 0;
    char[] cbuf = new char[1000];

    taille = input.read(cbuf, 0, cbuf.length);
    if (taille == -1)
    {
        return null;
    }
    else
    {
        requete += new String(cbuf).substring(0, taille);
        return requete;
    }
}
} 
```

# javascript - 在 angularjs 中编写应用程序，我有一个 sintaxis 错误？

> ID：14127870
> 
> 赞同：2
> 
> 时间：2013-01-02T19:23:35.557
> 
> 标签：javascript, jquery, html, angularjs

在此[示例](http://jsfiddle.net/bgrimes/58wqH/)中，代码有效

但是当我尝试在我的服务器上传递它时出现错误

```
ReferenceError: _ is not defined 
```

这是js代码

```
// Declare app level module which depends on filters, and services
var app = angular.module('myApp', []);

function RegisterCtrl($scope, $location) 
{

  $scope.steps = [
    'Step 1: Team Info',
    'Step 2: Campaign Info',
    'Step 3: Campaign Media'
  ];
  $scope.selection = $scope.steps[0];

  $scope.getCurrentStepIndex = function()
  {
    // Get the index of the current step given selection
    return _.indexOf($scope.steps, $scope.selection);
  };

  // Go to a defined step index
  $scope.goToStep = function(index) 
  {
    if ( !_.isUndefined($scope.steps[index]) )
    {
      $scope.selection = $scope.steps[index];
    }
  };

  $scope.hasNextStep = function(){
    var stepIndex = $scope.getCurrentStepIndex();
    var nextStep = stepIndex + 1;
    // Return true if there is a next step, false if not
    return !_.isUndefined($scope.steps[nextStep]);
  };

  $scope.hasPreviousStep = function(){
    var stepIndex = $scope.getCurrentStepIndex();
    var previousStep = stepIndex - 1;
    // Return true if there is a next step, false if not
    return !_.isUndefined($scope.steps[previousStep]);
  };

  $scope.incrementStep = function() {
    if ( $scope.hasNextStep() )
    {
      var stepIndex = $scope.getCurrentStepIndex();
      var nextStep = stepIndex + 1;
      $scope.selection = $scope.steps[nextStep];
    }
  };

  $scope.decrementStep = function() {
    if ( $scope.hasPreviousStep() )
    {
      var stepIndex = $scope.getCurrentStepIndex();
      var previousStep = stepIndex - 1;
      $scope.selection = $scope.steps[previousStep];
    }
  };
} 
```

的作用是什么

```
$scope.goToStep = function(index) 
  {
    if ( !_.isUndefined($scope.steps[index]) )
    {
      $scope.selection = $scope.steps[index];
    }
  }; 
```

为什么是错误？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:29:10.997

您需要将下划线库包含在 html 文件的 head 部分中，或者如果它是节点应用程序，则将其作为模块。

`<script src="http://underscorejs.org/underscore-min.js"></script>`

或者如果它的服务器端代码，请`npm install underscore`在您的项目根目录中执行，然后您可以执行

`var _ = require('underscore');`

# shell - 使用 LFTP 获取最新文件的 shell 脚本

> ID：14127872
> 
> 赞同：0
> 
> 时间：2013-01-02T19:23:40.243
> 
> 标签：shell, ftp, lftp

我试图运行一个脚本来获取在我的 FTP 服务器中创建的最新文件。

```
file=`ls -t -r | tail -n 1`

sudo lftp <<FTP
open $hostname
user $username $password
cd $folder
get $file
bye
FTP 
```

但是文件变量中的 ls 命令在我的本地机器上执行。怎么了？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T09:10:08.357

使用`cls`而不是`ls`会有所帮助。更改`get $file`为

```
cls -1t|sed -n 1s/^/get\\ /p>/tmp/get
source /tmp/get 
```

请注意，这使用文件`/tmp/get`并且不适合并发操作。

# paypal - 贝宝按使用付费

> ID：14127873
> 
> 赞同：0
> 
> 时间：2013-01-02T19:23:41.700
> 
> 标签：paypal, paypal-subscriptions

只是想知道有没有人能够为 PayPal 计费实现按使用付费？我正在尝试让客户选择存储计划。

客户已经决定了他们想要的计划，他们将收取初始费用。然后他们按月收取实际使用的存储费用，以及他们对该计划的使用层的定价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:44:01.530

[自适应付款](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)将允许您完全按照您的意愿行事，特别是[Preapproval](https://www.x.com/developers/paypal/documentation-tools/api/preapproval-api-operation) / [Pay](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)。

# python - 在 Python 中快速插入大量 SQS 消息的最佳方法是什么？

> ID：14127875
> 
> 赞同：3
> 
> 时间：2013-01-02T19:23:57.973
> 
> 标签：python, boto, amazon-sqs

现在我有一个 Python 脚本，它使用 Boto 将一些消息插入到 SQS 中——大约 100,000 到 200,000。简单地遍历循环而不创建 SQS 消息大约需要 3 分钟。对于 SQS 消息，它的速度非常慢。

加快速度的最佳方法是什么？我应该创建一个 SQS 连接池并线程插入消息吗？我应该分割消息列表以插入和生成多个进程，每个进程都有自己的列表份额吗？

有经验的 Boto 用户推荐什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:41:59.890

并发性很重要，无论是通过线程还是多处理，还是通过 gevent。任你选。还有，你在用`send_message_batch`吗？这使您可以一次发送 10 条消息，并且也很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T19:43:05.733

您可以通过使用带有 boto 的 eventlet 来尝试更多的并发性。看看这个 SO 答案：[Fastest way to download 300 万个对象 from a S3 bucket](https://stackoverflow.com/a/4721264/234901)。同样的策略也适用于 SQS。

但是，您可能希望确保没有其他更愚蠢的问题。你是从 EC2 实例测试这个吗？如果不是，您可能希望在与 SQS 端点相同的区域中启动一个实例，并在那里进行测试以查看是否只是您的网络速度较慢。如果这没有帮助，那么也许尝试 eventlet。

# android - Android - 较小的 ActionBar 选项卡

> ID：14127884
> 
> 赞同：2
> 
> 时间：2013-01-02T19:24:39.323
> 
> 标签：android, android-layout, tabs, styles, android-actionbar

我想要更小的`ActionBar Tabs`. 在顶部有`ActionBar`和在下一行的选项卡，具有相同的高度`ActionBar`。如何更改标签的高度？我敢肯定`style`...

我目前的尝试，没有成功：

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">

<!-- THEMES -->
<style name="actionBarTabTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    <item name="@android:attr/actionBarTabTextStyle">@style/actionBarTabTextStyle</item>
    <item name="@android:attr/actionBarTabBarStyle">@style/actionBarTabBarStyle</item>
    <item name="@android:attr/actionBarTabStyle">@style/actionBarTabStyle</item>
</style>

<!-- STYLES -->
<style name="actionBarTabTextStyle" parent="android:Widget.Holo.Light.ActionBar.TabText.Inverse">
    <item name="android:textColor">@color/main</item>
    <item name="android:textSize">14sp</item>
    <item name="android:padding">0dp</item>
</style>

<style name="actionBarTabBarStyle">
    <item name="android:background">@color/white</item>
    <item name="android:padding">0dp</item>
    <item name="android:height">3dp</item>
</style>

<style name="actionBarTabStyle"> <!-- This style kills the design --> 
    <item name="android:height">3dp</item>
</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:42:21.023

用这个：

```
<style name="actionBarTabTheme" parent="android:Theme.Holo.Light.DarkActionBar">
    <item name="android:actionBarTabTextStyle">@style/actionBarTabTextStyle</item>
    <item name="android:actionBarTabBarStyle">@style/actionBarTabBarStyle</item>
    <item name="android:actionBarTabStyle">@style/actionBarTabStyle</item>
</style> 

<style name="actionBarTabBarStyle" parent="@android:style/Widget.Holo.Light.ActionBar.TabView">
    <item name="android:background">@color/white</item>
    <item name="android:padding">0dp</item>
    <item name="android:height">3dp</item>
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:01:04.883

也许你应该给这些风格的父母

```
<style name="actionBarTabBarStyle" parent="android:style/Widget.Holo.Light.ActionBar.TabBar">
    <item name="android:background">@color/white</item>
    <item name="android:padding">0dp</item>
    <item name="android:height">3dp</item>
</style>

<style name="actionBarTabStyle" parent="android:style/Widget.Holo.Light.Tab"> <!-- This style kills the design --> 
    <item name="android:height">3dp</item>
</style> 
```

# opengl - 使用顶点数组对象需要什么？

> ID：14127886
> 
> 赞同：0
> 
> 时间：2013-01-02T19:24:48.747
> 
> 标签：opengl, glut, glew, vertex-array, vao

我正在尝试在我的一个程序中使用顶点数组对象，但我的电脑似乎不支持此功能。

当我执行这个函数`glewIsSupported("GL_ARB_vertex_array_object")`时，它返回 false。

如果我尝试更新我的视频驱动程序，这可以使顶点数组对象可用吗？

如何检查我的显卡支持的 OpenGL？

从 OpenGL 3.0 开始可以使用顶点数组对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:40:22.000

VAO - 根据规范：[http](http://www.opengl.org/registry/specs/ARB/vertex_array_object.txt) ://www.opengl.org/registry/specs/ARB/vertex_array_object.txt是针对 OpenGL 2.1 编写的。

在 OpenGL 3.0 中，它在官方规范中，所以当 GPU 支持 OGL 3.0 时，肯定会支持 VAO。

您可以使用[http://www.ozone3d.net/gpu_caps_viewer/](http://www.ozone3d.net/gpu_caps_viewer/)检查所有 OGL 扩展。

你有什么GPU？

如您所见，Via chrome 将不支持 OpenGL 3.0 的新功能

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-02T20:03:22.710

这是 GPU Caps 的结果，我认为我的 GPU 无法支持 Vertex Array Objects =/

[![一只忙碌的猫](../Images/065c7c682d6cc6e6e37b6ba6003f7b9a.png)](https://i.stack.imgur.com/kBltS.png)

# javascript - JavaScript 可以向 Web 容器 Servlet 发送 HTTP 请求吗？

> ID：14127888
> 
> 赞同：1
> 
> 时间：2013-01-02T19:24:54.003
> 
> 标签：javascript, http, servlets

我有一个 Web 应用程序，它当前在网页中托管一个小程序。小程序连接到 Tomcat Servlet 并发送请求。如果我的解决方案可以在客户端使用 Javascript 而不是 Java 小程序，那么对于某些环境会更方便。但这需要 Javascript 向 Tomcat Servlet 发送 POST。

网页由同一个 Web 服务器提供服务 - 实际上是同一个 Tomcat 实例。但是小程序将请求发送到不同的 Servlet。

Javascript 基本上需要定期查询 Servlet，并根据响应调用 javascript 函数。

那可能吗？

如果是这样，有关如何开始的任何指示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:29:36.113

**是的，JavaScript 可以向任意 Web 服务器发送 POST 请求。**`access-control-allow-origin`如果您可以控制 servlet，则可以通过设置属性来避免所有跨站点脚本限制。

AJAX 是 Web 社区中的一个术语，指的是 JavaScript + HTTP 请求。我推荐 MDN 的这个[AJAX 教程](https://developer.mozilla.org/en-US/docs/AJAX)。我还推荐[jQuery 的 AJAX 库](http://api.jquery.com/jQuery.ajax/)。

* * *

即使服务器设置正确，某些版本的 Internet Explorer 也会给您带来麻烦。这是我用来覆盖所有浏览器的 JS 函数：

```
/**
 * Wraps jQuery's AJAX, adds X-Domain support for IE
 */
function xDomainAJAX (url, settings) {
  if ($.browser.msie && parseInt($.browser.version, 10) >= 8 && XDomainRequest) {
    // use ms xdr
    var xdr = new XDomainRequest();
    xdr.open(settings.type, url + '?' + $.param(settings.data));
    xdr.onprogress = function() {};
    xdr.onload = function() {
      settings.success(xdr.responseText);
    };
    xdr.onerror = settings.error;
    xdr.send();
  } else {
    // use jQuery ajax
    $.ajax(url, settings);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:30:27.830

支持“CORS”服务器[跨域资源共享](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)，让浏览器端脚本调用其他服务器。

还有一些较旧的方法，如 JSONP 或在主页的 IFrame 中在目标域上设置页面，并通过 window.PostMessage / IFrame 名称在 2 个页面之间进行通信。

如果您不需要响应 - 可以对任何域执行 POST 或 GET。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:31:03.537

这绝对是可能的。我建议使用 jQuery，因为它具有易于使用的功能：[http](http://api.jquery.com/jQuery.post/) ://api.jquery.com/jQuery.post/ 。请注意，此链接包含使用 $.post() 和 $.ajax() 的示例。两者都是有效的，$.post 只是 $.ajax 的简写版本。

请注意，在这两个示例中，您都给它一个回调函数来处理响应。

# java - 在 Java 中具有自签名证书的 PHP SoapClient

> ID：14127891
> 
> 赞同：2
> 
> 时间：2013-01-02T19:25:10.540
> 
> 标签：java, php, web-services, ssl, openssl

我们需要连接的 WS 之一有 PHP 中的示例代码。他们为我们签署了 CSR ......所以我们现在有 PRIVATE KEY 和 CERTIFICATE 进行身份验证。

他们建议将 PRIVATE KEY 和 signed CERTIFICATE 都放入一个 .pem 文件中，并在 PHP 中使用如下代码：

```
$client = new SoapClient('https://www.example.com/api/server.php?wsdl', array('local_cert' => "custom-pc.pem", "trace"=>1));
$result = $client->Login(); 
```

这很好用。

但是我们使用的是 Java，这里没有 PHP 专家——所以我将 PRIVATE KEY 和 CERTIFICATE 都导入了 cacerts（导出到 PKCS12，然后合并了密钥库）。

```
openssl pkcs12 -export -in signed.pem -inkey server.key -out signed.p12 -name custom -CAfile ca.crt -caname root
sudo keytool -importkeystore -deststorepass changeit -destkeypass changeit -destkeystore /Library/Java/JavaVirtualMachines/jdk1.7.0_06.jdk/Contents/Home/jre/lib/security/cacerts -srckeystore signed.p12 -srcstoretype PKCS12 -srcstorepass changeit -alias custom 
```

但是，没有运气:(

一直都有例外：

```
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
    at sun.security.ssl.Alerts.getSSLException(Alerts.java:154)
    at sun.security.ssl.SSLSocketImpl.recvAlert(SSLSocketImpl.java:1977)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:1093)
    at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:884)
    at sun.security.ssl.AppInputStream.read(AppInputStream.java:102) 
```

知道我们做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:37:52.310

`javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure`
当服务器无法访问时，通常会遇到这种情况。也许是防火墙问题？
您可以运行您的客户端`java -Djavax.net.debug=ssl`或通过wireshark查看握手，以了解问题出在哪里

# python-3.x - PyCrypto 不适用于 Python 3.2

> ID：14127892
> 
> 赞同：0
> 
> 时间：2013-01-02T19:25:14.007
> 
> 标签：python-3.x, pycrypto

我有 PyCrypto 2.6 版，我从更新日志中读到 PyCrypto 2.4 或更高版本支持 Python 3。我尝试使用安装它

```
 # python3 setup.py install 
```

**但它给了我这个错误**

```
 running install
running build
running build_py
running build_ext
running build_configure
warning: GMP or MPIR library not found; Not building Crypto.PublicKey._fastmath.
building 'Crypto.Hash._MD2' extension
gcc -pthread -fwrapv -Wall -Wstrict-prototypes -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security -Werror=format-security -fPIC -std=c99 -O3 -fomit-frame-pointer -Isrc/ -I/usr/include/python3.2mu -c src/MD2.c -o build/temp.linux-x86_64-3.2/src/MD2.o
src/MD2.c:31:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: command 'gcc' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T18:41:44.820

我在 Ubuntu 13.04 上的 python3.3 上遇到了类似的 pycrypto 问题。

安装`python3.3-dev`包解决了这个问题。

根据您的发行版尝试安装 python3.2-dev 或类似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T21:49:36.590

我通过以下步骤解决了这个问题：

1.  。/配置
2.  python setup.py 构建
3.  python setup.py 安装

希望对你有帮助 ！对我来说很好

# sql - sql聚合函数使用

> ID：14127895
> 
> 赞同：2
> 
> 时间：2013-01-02T19:25:15.737
> 
> 标签：sql, aggregation

DB中有几个表：

```
Product(maker, model, type)
PC(code, model, speed, ram, hd, cd, price)
Laptop(code, model, speed, ram, hd, price, screen)
Printer(code, model, color, type, price) 
```

我需要找到

查找价格最高的产品（PC、笔记本电脑或打印机）的型号。结果集：模型。

我设法编写了以下查询：

```
select model from 
(select model, price from PC
union
select model, price from Laptop
union
select model, price from Printer) G 
```

现在我需要从集合 G 中绘制模型/模型，它有一个最高价格

我可以通过添加到选择子句来轻松选择最高价格 - max(G.price)，但我需要模型并且只有模型......

什么语法是正确的？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:30:09.623

只有最高价？

```
select model
from
(select 
   model, 
   rank() over (order by max(price) desc) as [rank] 
from 
  (select model, price from PC
   union
   select model, price from Laptop
   union
   select model, price from Printer) u
   group by model) g
where g.rank = 1 
```

抱歉，我目前无法测试我们是否可以在 rank() 中使用 MAX()。如果没有，请添加另一个子查询。首先确定最大（价格），然后确定排名。

因此， RANK() 内部的 MAX() 正在工作......另一种方法，语法简单：

```
select top 1 with ties 
  g.model
from
(select 
   u.model, 
   max(u.price) as [maxPrice] 
from 
  (select model, price from PC
   union
   select model, price from Laptop
   union
   select model, price from Printer) u
   group by model) g
order by g.maxPrice desc 
```

*   编辑 1：添加了“前 1”，因为只需要一条记录
*   编辑 2：删除“前 1”，添加排名
*   编辑 3：使用 sqlfiddle 后删除了“按模型分区”。谢谢@bluefeet！
*   编辑 4：添加了替代“与领带”。再次感谢@bluefeet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T14:14:45.417

这是有效的解决方案..

从电脑选择型号，其中价格 >= 全部（从电脑联合选择最大（价格）从笔记本电脑联合选择最大（价格）从打印机）

联盟

SELECT model FROM laptop WHERE price >= ALL(SELECT MAX(price) FROM pc UNION SELECT MAX(price) FROM laptop UNION SELECT MAX(price) FROM printer)

联盟

SELECT model FROM printer WHERE price >= ALL(SELECT MAX(price) FROM pc UNION SELECT MAX(price) FROM laptop UNION SELECT MAX(price) FROM printer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:45:24.123

基于 Jacco 的回答，

```
select model
from
(select model, max(price) as maxPrice 
from 
  (select model, price from PC
   union
   select model, price from Laptop
   union
   select model, price from Printer) u
   group by model) g
where maxPrice = max(maxPrice) 
```

更改为限制 1 而不是 mysql。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T20:01:38.073

```
SELECT
    model
FROM 
    (
    SELECT model, price, ROW_NUMBER() OVER(ORDER BY price DESC) AS seq FROM PC
    UNION
    SELECT model, price, ROW_NUMBER() OVER(ORDER BY price DESC) AS seq FROM Laptop
    UNION
    SELECT model, price, ROW_NUMBER() OVER(ORDER BY price DESC) AS seq FROM Printer
) final
WHERE
    seq = 1 
```

# gprs - 通过 GPRS 与设备通信

> ID：14127898
> 
> 赞同：0
> 
> 时间：2013-01-02T19:25:31.327
> 
> 标签：gprs, remote-client

我需要从服务器应用程序向启用了 GRPS 连接的设备发送命令。即认为安装在火车/公共汽车等上的远程收费设备

用例是管理员使用服务器软件向设备发送软件更新或查询远程设备状态。

我的理解是启用 GPRS 的设备没有静态 IP 地址。在这种情况下，如果服务器需要发起请求，通信如何发生？

我听说过像叫醒电话一样向设备发送短信，这样 GPRS 设备就会向服务器发起请求，但这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:29:46.010

您的设备是否具有静态 IP 地址取决于您的服务提供商，我怀疑许多通用 GSM 计划（他们出售给消费者的那种）会为移动设备提供静态 IP。具有特殊应用程序特殊计划的服务提供商可能会提供它们，因此可能值得四处询问。

通过让您的设备在连接到网络时公布其 IP 地址（就像动态 DNS 一样），您可以在没有 SMS 的情况下使您的事情正常工作。但是，如果您要使用一般服务提供商，您应该确保他们允许传入流量到设备 - 我实际上已经看到 GSM 服务提供商根本不允许任何传入流量进入 GPRS 设备，任何港口。

# eclipse - 使用本机库导出 Eclipse 项目

> ID：14127900
> 
> 赞同：0
> 
> 时间：2013-01-02T19:25:47.803
> 
> 标签：eclipse, jar, native, runnable

我想导出我的 eclipse 项目来创建一个可运行的 jar 文件。问题是，我使用的是本机库（* .so 文件）。

如何使用这个库导出我的项目？此外，jar 文件应该可以在 windows 和 linux 中执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:07:56.797

不要认为这是可能的。跨平台可运行 JAR 文件（双击开始）很容易，即使包含所有引用的库，即其他 JAR（参见[One-JAR](http://one-jar.sourceforge.net/)）。

但是，您如何期望 Unix 本机库在 Windows 上可用？需要先对其进行反编译，然后再针对 Windows 进行交叉编译。当然，如果您的 Windows 的 DDL 与 Unix 的 *.so 相同，那就另当别论了。然后，您只需使用 One-JAR 将两者打包到 JAR 中。

# mongodb - 地图降低适用性

> ID：14127901
> 
> 赞同：1
> 
> 时间：2013-01-02T19:25:59.040
> 
> 标签：mongodb, mapreduce

我有一个关于 map/reduce 的问题，以及它是否适合我正在尝试完成的任务。我仍处于设计阶段，因此如果需要，我可以更改数据的结构。

想象一下，我有两个这样的文件：

```
{ "_id" : ObjectId( "50231b4f8be6e5f1f2e7e24g" ),
  "customer" : "50bac36bb4e54678170002e6",
  "display" : "Motorola Canopy 100",
  "description" : "a radio" }

{ "_id" : ObjectId( "50232fac8be6e4f1f2e7e259" ),
  "display" : "Motorola POE",
  "description" : "a power injector",
  "device" : "50231b4f8be6e4f1f2e7e24g" } 
```

在一个文档中，有一个客户 ID 引用（“customer”：“50bac36bb4e54678170002e6”），在另一个文档中有一个设备 ID 引用（“device”：“50231b4f8be6e4f1f2e7e24g”）。这两个文件都代表某种设备。该设备将与客户相关（也称为分配）或与另一设备相关。例如，客户将获得一台收音机，并将按原样分配，但电源注入器将分配给收音机本身，而不是客户。我这样做是为了更好地理解设备之间的操作依赖关系。维护这种分层关联模式很有用，如果可能的话，我想保留它。

我目前运行一系列查询，首先查找所有设备，然后对于找到的每个设备，运行另一个查询以查找关联设备。这是一种递归操作，可以在与任何给定设备的关联中运行得尽可能深。

我很想知道这个问题是否适合 map/reduce 操作。我应该坚持我当前的递归操作还是这对 map/reduce 来说是一个很好/完美的选择？

## 编辑 1

从评论中提出的问题进一步澄清：

1.  所有这些文档都在同一个集合中是真的吗？ ***是*** 的，只有一个“设备”集合。但是，客户 ID 来自不同的集合。不过，出于此查询的目的，我仅使用该 ID 对来自设备集合的结果进行分组。借用一个 sql 术语，没有“连接”已经完成，也不需要它们。将客户密钥和设备密钥视为应该排序的属性。
2.  您还说您运行查询以“查找所有设备”。您的意思是“找到所有给定客户 ID 的设备”？***是的***：执行的第一个查询基于一个键，即客户 ID。基本上是这样的：db.devices.find({"customer" : "50bac36bb4e54678170002e6"})。然后我获取该结果并遍历它，使用直接的 javascript 对哈希进行排序并触发子查询。然后我剩下一些要运行的新查询，基本上所有使用第一个查询捕获的 _ids 都会使用以下内容进行查询：db.devices.find({_id:"50bac36bb4e54678170002e6"})。该查询将产生在第一次查询期间未发现的新文档。我继续这个子查询步骤，直到 db.devices.find 没有产生任何新结果。然后我在这些结果上运行更多的 javascript 并将它们合并到第一个中，构建一个哈希树。这就是我知道如何构建树的方式。
3.  每个设备都“向上”流向一个客户是真的吗？***是的***
4.  设备是否可能属于多个父设备或客户？***不***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T06:25:40.203

MapReduce 最适用于没有依赖关系的文档。如果您的数据结构只是一个有向无环图 (DAG)，其中每个客户都是一个根节点，并且每个设备可能有多个父节点。由于依赖关系，Map/Reduce 不适用于大多数 DAG 操作。

但是，由于您的数据是树状的（没有多个父项），您可以[添加一个祖先数组，如 MongoDB 文档示例中所示](http://docs.mongodb.org/manual/tutorial/model-tree-structures-with-ancestors-array/)。在这种情况下，MR 可能非常适合某些操作。

如果我了解您的查询策略，我会担心在每个递归级别的内部循环中执行大量查询操作的效率。为了帮助实现这一点，理想情况下，“设备”应该是 ObjectId 类型而不是字符串，并且应该被索引。索引的替代方法也可以[将子 ObjectId 存储为每个 MongoDB 文档示例的子引用](http://docs.mongodb.org/manual/tutorial/model-tree-structures-with-child-references/)。在这两种情况下，为每个递归级别运行 MR 或“$group”聚合操作可能会有所帮助，但我怀疑在大多数情况下，它只会将计算从 DB 客户端转移到 DB 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T02:53:57.697

我不认为 map/reduce 在这里是一个好的解决方案，因为数据是相互依赖的，这使得并发无效。或者，您可以使用[dbRef](http://docs.mongodb.org/manual/applications/database-references/)嵌入相关设备，以便可以直接从相关设备文档中访问它。

# web-services - Play 2.0 中的 WebService (WS) POST - Scala

> ID：14127904
> 
> 赞同：4
> 
> 时间：2013-01-02T19:26:12.170
> 
> 标签：web-services, scala, post, playframework, playframework-2.0

当我尝试将 Map 传递给帖子时，出现此错误：

> 无法将 scala.collection.immutable.Map[java.lang.String,java.lang.String] 的实例写入 HTTP 响应。尝试定义一个 Writeable[scala.collection.immutable.Map[java.lang.String,java.lang.String]]

这是我的帖子示例：

```
WS.url("http://mysql/endpoint")
  .post(Map("email" -> "juju@juju.com")).map { response =>
    Logger.logger.debug("response: " + response.body)
  } 
```

怎么了？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T21:22:16.367

这里是提示：你必须发送[Map[String, Seq[String]]](https://github.com/playframework/Play20/blob/master/framework/src/play/src/main/scala/play/api/http/Writeable.scala#L73)

```
WS.url("http://mysql/endpoint")
  .post(Map("email" -> Seq("juju@juju.com"))).map { response =>
    Logger.logger.debug("response: " + response.body)
  } 
```

# javascript - 如何知道输入何时更改了其类

> ID：14127911
> 
> 赞同：0
> 
> 时间：2013-01-02T19:27:01.743
> 
> 标签：javascript, jquery

我有一个功能是删除类并将其添加到输入标签中，我想当我们添加或删除类时，一个功能应该提醒您已进行更改。

```
<head>
    <script type="text/javascript">
        $(function() {
            $('a').click(function() {
                $('input').removeClass()
                var cl = $(this).attr('class')
                $('input').addClass(cl)
            })
        })

        function activitydone() {
            alert('class change')
        }
    </script>

    <style>
        .first { border:solid 1px #F00 }
        .second { border:solid 1px #0F0 }
        .third { border:solid 1px #00F }
    </style>
</head>

<body>
    <input type="text" onchange="activitydone()" />

    <a href="#" class="first">first</a>
    <a href="#" class="second">second</a>
    <a href="#" class="third">third</a>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T19:30:14.293

除非我遗漏了一些明显的东西，否则只需将代码放在类更改之后：

```
$('a').click(function(){
    $('input').removeClass();
    var cl= $(this).attr('class');
    $('input').addClass(cl);

    alert('class change');
}); 
```

还有，[分号](http://cjihrig.com/blog/the-dangers-of-javascripts-automatic-semicolon-insertion/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T19:30:43.617

除非这是一个不完整的例子......

```
<script type="text/javascript">
    $(function() {
        $('a').click(function() {
            $('input').removeClass()
            var cl = $(this).attr('class')
            $('input').addClass(cl)
            activitydone(); // <-- Do this?
        })
    })

    function activitydone() {
        alert('class change')
    }
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T19:36:20.300

您可以触发自定义事件并处理它：

```
$(function() {
    $('a').click(function() {
        $('input').removeClass();
        var cl = $(this).attr('class');
        $('input').addClass(cl);
        $('input').trigger('classChange');
    });
    $('input').on('classChange', function() {
        activitydone(this);
    });
})

function activitydone() {
    alert('class change');
}; 
```

编辑注意：从您的标记中删除它：`onchange="activitydone()"`

这是一个小提琴页面，您可能会发现结合您的两个问题（至少部分）有用 [http://jsfiddle.net/ekKG3/](http://jsfiddle.net/ekKG3/)

# vb.net - Case 语句 VB.NET 中的异常处理

> ID：14127916
> 
> 赞同：0
> 
> 时间：2013-01-02T19:27:14.697
> 
> 标签：vb.net

在下面的方法中，当我们有 case 'Else' 时，它应该抛出一个异常，但由于某种原因，这个异常根本没有被记录。您能指出下面编写的代码中的任何问题吗？我们可以在 Select 和 Case 语句中捕获异常吗？

```
 Private Sub Country(ByVal Row As Input0Buffer)
        mColumnName = "BORR1_MAILCOUNTRY_CD"
        Dim errmsg As String = String.Empty

        If Row.outBORR1MAILTOADDRSUBPROP = "Y" Then
            ' Property country is a manual-entry field and can have junk
            Dim outCountry As String = String.Empty
            Dim inCountry As String = GetSafeParsedString(Row.inPROPCOUNTRY)
            inCountry = inCountry.Replace(".", String.Empty)
            inCountry = inCountry.Replace(" ", String.Empty)
            inCountry = inCountry.ToUpper()

            Select Case GetSafeParsedString(inCountry)
                Case "USA"
                    outCountry = "US"
                Case "US"
                    outCountry = "US"
                Case "UNITED STATES"
                    outCountry = "US"
                Case "MEXICO"
                    outCountry = "MX"
                Case "MX"
                    outCountry = "MX"
                Case "CANADA"
                    outCountry = "CA"
                Case "CA"
                    outCountry = "CA"
                Case "CAN"
                    outCountry = "CA"
                Case String.Empty
                    outCountry = String.Empty
                Case Else
                    errmsg = String.Format("Can not map country.MailToSubProp is 'Y' but property country was input as  {0}", inCountry)
                    Throw New Exception(errmsg)
                    Return
            End Select

        END IF 
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:40:20.310

我认为您不需要捕获异常，否则无需首先抛出异常

```
 Case Else
        errmsg = String.Format("Can not map country.MailToSubProp is 'Y' but property country was input as  {0}", inCountry)
     Try
        Throw New Exception(errmsg)
     Catch ex As Exception
         'Log exception here
     End Catch
 End Select 
```

# c# - Windows Phone c#，如何在按下状态下更改按钮图像？

> ID：14127920
> 
> 赞同：1
> 
> 时间：2013-01-02T19:27:25.087
> 
> 标签：c#, button, background, windows-phone, blend

对于 C# Windows Phone 应用程序，如何拥有一个具有 .png 背景的按钮，然后在按下时背景发生变化？换个说法，我怎样才能改变按钮按下状态的背景图像？

我有一个按钮，我通过混合将背景设置为 png 图像。当我去混合时，右键单击按钮并单击编辑模板的副本，我单击按下状态，它变为红色，表示正在录制。然后我去更改背景图像，但它周围有一个黄色边框。我无法改变它。如果我重置该值以使边框消失，我会收到一条警告说我破坏了动画。如果我忽略它并设置它，它会将“按下”图像设置为默认图像，并且所有状态现在都有该图像。

我不知道如何使这个按钮成为一个图像，然后在按下时显示不同的图像，并在未按下时返回原始图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:18:34.003

这就是当有人从我的屏幕控制板上按下我的四个箭头图像之一时，我以编程方式创建“眨眼”效果的方法（我重新加载相同的图像，您可以加载其他图像）：

```
private void imLeft_MouseEnter(object sender, System.Windows.Input.MouseEventArgs e)
{
    _wormDirection = Direction.Left;
    ((Image)sender).Source = null;
}

private void imLeft_MouseLeave(object sender, System.Windows.Input.MouseEventArgs e)
{
    System.Threading.Thread.Sleep(25);
    ((Image)sender).Source = imLeftImageSource;
} 
```

# visual-studio-2010 - Visual Studio 2010：如何在签入之前修改新添加的项目？

> ID：14127922
> 
> 赞同：0
> 
> 时间：2013-01-02T19:27:29.183
> 
> 标签：visual-studio-2010, version-control, tfs, projects-and-solutions

我正在开发**Visual Studio 2010**解决方案的开发人员团队中工作。我们正在使用**TFS**和随之而来的**源代码控制。**

我无法签入无法编译的内容。

我需要**将一些现有项目从另一个解决方案添加到解决方案中**。首先，我需要将它们添加到此解决方案中，然后修复一些引用和命名空间，以便解决方案能够编译，然后将所有这些作为已完成的工作单元检查回**Source Control**。

我首先将现有项目的文件夹复制到解决方案的文件夹中（在操作系统中，而不是在 VS 中）。

发生的事情是，当我将现有项目添加到解决方案时，它只为项目添加一个节点，并带有**Source Control**的*加号图标*。它在编译中忽略这些项目。*添加的项目的代码文件实际上尚未包含在解决方案中。*我现在无法解决任何问题。

 ***似乎**Visual Studio**让我继续进行的唯一方法是将新添加的项目签入到**Source Control**，然后进行修复，然后再次签入修复。

这并不酷，因为它会破坏**源代码管理**中的解决方案和我的队友的代码。加上签入创建一个自动构建。这是一件大事。

有解决办法吗？谢谢！

编辑：我通过将 csproj 文件从操作系统拖放到**解决方案资源管理器**中来添加项目。它们显示为文件名，而不是项目名称，以及 .csproj 文件扩展名。就好像**Visual Studio**认为我想添加文件，而不是项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:20:08.797

我强烈建议您与现有团队成员交谈，以获得有关如何将现有项目附加到您的解决方案的帮助。

虽然有一些一般性：

> 我首先将现有项目的文件夹复制到解决方案的文件夹中（在操作系统中，而不是在 VS 中）。

通常，这不是做事的方式。通常，您不只是将另一个项目文件夹复制到您的文件夹中。您可以简单地将该项目从其现有位置附加到您的解决方案，或者将其分支到您自己的解决方案结构中。无论哪种方式复制它都会破坏源代码控制链接，这通常不是所需的行为。

> 编辑：我通过将 csproj 文件从操作系统拖放到解决方案资源管理器中来添加项目。它们显示为文件名，而不是项目名称，以及 .csproj 文件扩展名。就好像 Visual Studio 认为我想添加文件，而不是项目。

要将现有项目添加到您的解决方案，请右键单击解决方案并选择添加 -> 现有项目...您所做的只是将一个没有意义的文件添加到您的项目中；那是行不通的。

> 似乎 Visual Studio 让我继续进行的唯一方法是将新添加的项目签入源代码管理，然后进行修复，然后再次签入修复。

我不知道你为什么这么认为。解决方案要么编译，要么不编译。将其签入源代码管理不会对此产生影响。编译问题很可能是由于我在上面确定的问题。

无论哪种方式，请与现有的团队成员（或经理）交谈，以帮助您正确设置解决方案。这将是最简单的方法。我知道，如果我的一个人在使用 TFS 时遇到问题，我宁愿他们尽早与我交谈，以便我可以向他们展示它是如何工作的。***

# resources - Modx Revolution - 如何调用资源文档

> ID：14127923
> 
> 赞同：0
> 
> 时间：2013-01-02T19:27:30.110
> 
> 标签：resources, document, modx

使用 ModX Revolution，我可以设置一组电视来创建可编辑的幻灯片，并将电视分配给我想要的任何模板资源。（选中）

问题是，如果我想在不同的文档上运行幻灯片，幻灯片的值必须在电视分配到的每个文档上设置，这很麻烦，因为我的目标是创建一组电视和一次值已设置，此值（图像、文本、w/e）应该出现在每个文档（模板、页面等）上，但相反，我必须在每个文档上输入相同的重复数据。

然后我想到了这个。如果我可以只为幻灯片创建一个资源文档，然后将此文档调用到我想要的页面怎么办？这个想法对我来说听起来不错，因为它允许我在单个文档上编辑 TV 值并将其显示在我想要的任何位置，但问题是我根本不知道如何调用资源文档。

它是这样的。

*   创建一个包含滑块模板的块 [[$slider]]。
*   创建一组电视。（每个图像之一）[[*slider1]]、[[*slider2]] 等。
*   将电视放在滑块块内，并用电视替换图像链接。这允许通过简单地将图像上传到相册并在电视中调用图像来轻松更改图像。
*   将 [[$slider]] 块放在我希望它出现的模板中，然后在另一个文档中调用该模板文档。

我希望这是一个足够清楚的解释。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:38:38.357

这是我的做法：

1.  通过包管理安装[MIGX 。](http://rtfm.modx.com/display/ADDON/MIGX)MIGX 不是使用一些静态电视来保存您的图像，而是允许用户潜在地添加无限数量，并带有用于标题、alt 标签等的额外字段。
2.  遵循 Mark Hamstra 关于[使用 MIGX 管理画廊](https://www.markhamstra.com/modx-blog/2012/04/managing-galleries-with-migx/)的优秀教程。在您的主页或专用的“滑块”资源上进行设置

完成此操作后，您需要进行一些调整以在多个页面上使用**parseMIGXtoGallery代码段：**

```
$output = array();
$sliderID = $modx->getOption('sliderRes');
$sliderRes = $modx->getObject('modResource',$sliderID);
if ($sliderRes) {
    $sliderTV = $sliderRes->getTVValue('nameOfSliderTV');
    $input = $modx->fromJSON($sliderTV);
    if (!$input || empty($tpl)) return 'no stuff';
    foreach ($input as $row) {
      if (isset($set) && !empty($set) && ($set != $row['set'])) continue;
      $output[] = $modx->getChunk($tpl, $row);
    }
}
return implode("\n", $output); 
```

您需要`nameOfSliderTV`用...替换您的滑盖电视的名称。

然后，不要使用`input`片段上的选项，而是将其添加`&sliderRes`并设置为滑块资源的 id（假设它是 6）：

```
[[mh.parseMIGXToGallery? 
  &tpl=`mh.images.gallery.tpl` 
  &sliderRes=`6` 
  &set=`name of the set`
]] 
```

请注意，通过这种方式，您实际上可以使用 Set 在幻灯片资源上设置多个幻灯片。

# node.js - 为某些需要切换 node-dev

> ID：14127926
> 
> 赞同：2
> 
> 时间：2013-01-02T19:27:42.210
> 
> 标签：node.js, watch, fs, node-dev

有没有办法使用 node-dev 或类似的方法来为某些文件切换重启 nodejs？

我已经看过了，似乎 require.extensions 是一个包含要重新启动的扩展名的对象，尽管删除它似乎没有任何作用。

我想要的是能够像往常一样使用node-dev，但是不需要重新启动某些文件，所以我可以手动观看它们并重新加载它们而无需重新启动所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:11:53.977

Hot-(re)loading modules is a *hot potato*, to say the least. Modules assume that when they are loaded, they are done so into a clean environment, and hot-loading changes that. It opens up for all kinds of scary bugs such as memory leaks and broken memory pointers and is in my honest opinion not worth the hassle. [Here's a similar question with a good answer](https://stackoverflow.com/questions/13523263/hot-code-push-nodejs).

Quite relevant to the subject, one of the projects I am working on right now: [overseer](https://github.com/mekwall/overseer)

It's an experimental cluster manager that wraps your workers and gives you the ability to watch for file system changes and do rolling restarts of the workers (restart them one by one), so there's no experienced downtime.

However, there's currently no way to attach a client to a specific worker, so in a worst case scenario the client will be dealing with two or more workers that are running different versions of your app. Not the most ideal of situations :)

# hadoop - Amazon EC2 和 S3：如何读取和写入数据

> ID：14127940
> 
> 赞同：4
> 
> 时间：2013-01-02T19:29:00.453
> 
> 标签：hadoop, amazon-s3, amazon-ec2, hbase

我刚刚遵循本指南：[http](http://rogueleaderr.tumblr.com/post/32768181371/set-up-and-run-a-fully-distributed-hadoop-hbase-cluster) : //rogueleaderr.tumblr.com/post/32768181371/set-up-and-run-a-fully-distributed-hadoop-hbase-cluster 在 Amazon EC2 上设置集群hadoop 和 hbase 正在运行。

我现在想知道的是，我如何才能在集群上运行的 hbase 中获取我的数据？我是否需要将其加载到 S3 中，然后将其加载到我的 hbase 集群中？

是否有加载/提取数据的最佳实践？任何类型的指针都会受到赞赏，因为我是 EC2 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T19:53:12.163

您需要将 SSH 连接到您的一个节点，然后您可以使用以下方式将数据复制到 HDFS：

> hadoop fs -copyFromLocal 数据/sample_rdf.nt 输入/sample_rdf.nt

这会将文件从本地计算机复制到 HDFS。当然，这假设您已经在您的机器上获得了该文件，因此您必须先将其上传到 EC2，或者让您的 EC2 节点从某个地方下载它。

将您的文件上传到 S3 并使用 s3cmd 将其从 S3 复制到您的机器是有意义的，这取决于您破坏节点的频率以及您是否希望保留文件以供以后使用。

（在您遵循的教程中还有一些示例，在第三部分。）

# visual-studio-2010 - Windows Azure：用于测试的本地缓存

> ID：14127942
> 
> 赞同：0
> 
> 时间：2013-01-02T19:29:12.230
> 
> 标签：visual-studio-2010, caching, azure

我是 Windows Azure 平台的新手。
我在云（生产）中创建了共享缓存，但是可以在本地模拟共享缓存吗？（在我的开发机器上）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:08:07.527

不，共享缓存没有本地模拟器。但是您可以建立一个 Windows Server AppFabric 缓存。它使用几乎相同的配置和代码结构。请参考[http://msdn.microsoft.com/en-us/library/ff383731(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/ff383731(v=azure.10).aspx)

但我强烈建议您使用新的云服务缓存。它比共享缓存具有更高的性能、更低的成本。并且它有充分的开发模拟器支持。有关更多信息，请参阅[http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)

# rest - 如何实现显示 ASP.NET Web API OData 服务可用的所有方法的页面？

> ID：14127943
> 
> 赞同：2
> 
> 时间：2013-01-02T19:29:28.687
> 
> 标签：rest, asp.net-web-api, odata

我希望实现一个 ASP.net Web API REST 服务来包装复杂的对象类型，并通过 OData 协议使它们可用，以补充我们现有的 WCF 数据服务项目，这些项目可以轻松地从实体模型公开数据库表。

在 Web API 服务上提供可从浏览器查看的所有可用“方法”列表的最简单方法是什么？（基本上是在导航到 .svc 页面时复制 WCF 数据服务所做的 OOTB。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T00:32:43.073

您可以访问 $metadata url 即 '~/$metadata' 来获取此信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T22:53:14.817

您将需要查看 ApiExplorer 类。

[这里](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-help-page-for-a-web-api)有一个最近的教程。

下一个版本的项目模板中应该有一个帮助页面在[这里](http://blogs.msdn.com/b/yaohuang1/archive/2012/10/31/asp-net-web-api-help-page-is-now-part-of-the-web-api-project-template.aspx)。

[在那之前，这里](http://nuget.org/packages/Microsoft.AspNet.WebApi.HelpPage)有一个 Nuget 版本。

# asp.net - 如何将数据保存在 MVC 控制器的内存中？

> ID：14127947
> 
> 赞同：7
> 
> 时间：2013-01-02T19:29:41.417
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

请看下面的动作。当用户第一次导航时，创建一个对象，然后当他在页面中导航时，再次访问 Action，但通过 Ajax 请求和数据消散器（工作表 = null）。

```
 private static List<Worksheet> worksheets;
    public ActionResult DoTest()
    {
        if (Request.IsAjaxRequest())
        {
            return PartialView("_Problems", worksheets[1]);
        }

        // first time
        worksheets = new List<Worksheet>()
        {
            new Worksheet("Hoja 1", ...),
            new Worksheet("Hoja 2", ...)
        };
        return View(worksheets[0]);
    } 
```

我的第一个解决方案是将变量工作表设置为静态，但我认为这不是一个好习惯。我做得很好还是还有其他 tweeks？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T19:34:58.233

远离静态变量，尤其是在数据依赖于用户的情况下。您可以利用[ASP.NET Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)对象。

这可以通过将工作表字段更改为将其值存储在 Session 对象中的属性来轻松完成。这样，**它将在后续调用中可用**。例子：

```
 private List<Worksheet> worksheets
  {
    get{ return Session["worksheets"] as List<Worksheet>;}
    set{ Session["worksheets"] = value; }
  }

  public ActionResult DoTest()
  {
      if (Request.IsAjaxRequest())
      {
        return PartialView("_Problems", worksheets[1]);
      }

      // first time
      worksheets = new List<Worksheet>()
      {
          new Worksheet("Hoja 1", ...),
          new Worksheet("Hoja 2", ...)
      };
      return View(worksheets[0]);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:36:09.610

您的控制器的实例不会在请求之间持续存在（这就是为什么使工作表静态工作，但保持非静态不会 - 由于您的 if 语句，该对象仅在非 AJAX 请求中填充）。

一种选择是无论请求如何进入都填充对象，然后使用 if 语句来决定返回哪个项目。正如 Ulises 所提到的，另一个（可能更好）的解决方案是使用会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-31T08:34:01.163

在 ASP.NET Core Session 不支持通用数据类型中，您需要添加此扩展

```
using Microsoft.AspNetCore.Http;
using Newtonsoft.Json;

public static class SessionExtensions
{
    public static void Set<T>(this ISession session, string key, T value)
    {
        session.SetString(key, JsonConvert.SerializeObject(value));
    }

    public static T Get<T>(this ISession session,string key)
    {
        var value = session.GetString(key);
        return value == null ? default(T) : JsonConvert.DeserializeObject<T>(value);
    }
} 
```

并使用它：

```
public IActionResult SetDate()
{
    // Requires you add the Set extension method mentioned in the article.
    HttpContext.Session.Set<DateTime>(SessionKeyDate, DateTime.Now);
    return RedirectToAction("GetDate");
}

public IActionResult GetDate()
{
    // Requires you add the Get extension method mentioned in the article.
    var date = HttpContext.Session.Get<DateTime>(SessionKeyDate);
    var sessionTime = date.TimeOfDay.ToString();
    var currentTime = DateTime.Now.TimeOfDay.ToString();

    return Content($"Current time: {currentTime} - "
                 + $"session time: {sessionTime}");
} 
```

# jquery - 来自 init 的 javascript 原型访问选项 - 有可能吗？

> ID：14127948
> 
> 赞同：0
> 
> 时间：2013-01-02T19:29:42.603
> 
> 标签：jquery, plugins

在 javascript 原型中，方法是否可以访问其他方法的属性，例如：如何使 open 方法可以使用选项？

```
function Plugin(element, options) {
    Modal = this;
    Modal.options = $.extend({}, defaults, options);
    Modal._defaults = defaults;
    Modal.init(Modal.element, Modal.options);
}

Plugin.prototype = {
    init: function(element, options) {
        console.log(options);
    },
    open: function() {
        //Does this function have access to options?
        //how to modify so that 'open' function has access to options
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:31:12.623

在第一种方法中将其存储为 this._options 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:31:13.010

不。

但是，您已经将它们放入`this`，因此您可以编写`this.options`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:38:19.540

首先，`Modal`是一个隐含的全局，我怀疑这不是故意的。用于`var`将其限制在本地范围内。

```
function Plugin(element, options) {
    var Modal = this;
    Modal.options = $.extend({}, defaults, options);
    Modal._defaults = defaults;
    Modal.init(Modal.element, Modal.options);
} 
```

其次，由于`options`已经被构造函数添加为实例的属性，你可以在原型方法中访问它：

```
open: function() {
    console.log(options);
} 
```

# iphone - 应用程序在 iOS 6 上运行，但在 iOS 5 上不运行

> ID：14127952
> 
> 赞同：1
> 
> 时间：2013-01-02T19:29:48.610
> 
> 标签：iphone, objective-c, ios, xcode, ios5

> **可能重复：**
> [presentViewController：在 iOS <6 (AutoLayout) 上崩溃](https://stackoverflow.com/questions/11198981/presentviewcontroller-crash-on-ios-6-autolayout)
> [如何在 iOS 6 中使用 NSLayoutConstraint？](https://stackoverflow.com/questions/12687979/how-to-use-nslayoutconstraint-in-ios-6)
> [应用加载失败](https://stackoverflow.com/questions/12876780/app-failing-to-load)

我刚开始在 iOS6 SDK 中开发一个应用程序，它在 iOS 6 设备和 iOS 6 模拟器上运行流畅，但在 iOS 5 或 iOS 5 模拟器上无法运行。我已将部署目标设置为：5.0

这是它尝试打开但失败时给我的错误...

```
2013-01-02 14:22:57.075 MyApp[34956:c07] *** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint'
*** First throw call stack:
(0x14a5052 0xea5d0a 0x144da78 0x144d9e9 0x3327d7 0x3329af 0x3326b7 0x23336d 0xdae2c 0xdb3a9 0xdb5cb 0x3ba73 0x3bce2 0x3bea8 0x42d9a 0x2845 0x139d6 0x148a6 0x23743 0x241f8 0x17aa9 0x138ffa9 0x14791c5 0x13de022 0x13dc90a 0x13dbdb4 0x13dbccb 0x142a7 0x15a9b 0x257d 0x24a5)
terminate called throwing an exception(lldb) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:30:42.337

您正在使用 AutoLayout，这是一项仅在 iOS6 中可用的功能。您需要将您的 iOS 版本限制为 iOS6，或者您需要通过进入 .xib 或故事板并禁用它来禁用 AutoLayout。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:34:12.737

不幸的是，将您的部署目标设置为以前的操作系统版本实际上并不会阻止您使用仅在更高版本中可用的 API（或者在这种情况下为 Interface Builder 功能）。

# javascript - 已设置不透明度样式的 DIV 上的 Jquery fadeIn()

> ID：14127961
> 
> 赞同：0
> 
> 时间：2013-01-02T19:30:13.543
> 
> 标签：javascript, jquery, css

我有一个 DIV，它是在 javascript 代码中动态创建的，具有以下样式集：

```
-ms-filter: progid:DXImageTransform.Microsoft.Alpha(Opacity=0);
-moz-opacity: 0;
-khtml-opacity: 0;
opacity: 0; 
```

我想使用 Jquery 淡入 DIV，但它不起作用。DIV 仍然有 opacity:0。我不能在 div 上使用 fadeOut，因为它是动态创建的，我需要在 DIV 中的图像加载后立即淡入。

有没有解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:54:20.757

只需手动重置 CSS，然后将其淡入：

```
$("#myDiv").css({"-ms-filter": "progid:DXImageTransform.Microsoft.Alpha(Opacity=1)", "-moz-opacity": 1, "-khtml-opacity": 1, "opacity": 1, "visibility": hidden}).fadeOut(0, function(){

     $(this).css({"visibility": "visible"}).fadeIn();
}) 
```

我经常使用它来处理我需要开始隐藏然后淡入的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:31:12.120

改为使用`animate`。

```
$('#your_div_id').animate({opacity: 1}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:36:42.957

您可以尝试加载图像`display: none`而不是弄乱不透明度，然后将其淡入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T19:37:07.377

您可以使用 liveQuery（jquery 插件）：[https ://github.com/brandonaaron/livequery](https://github.com/brandonaaron/livequery)

“Live Query 通过绑定事件或自动触发匹配元素的回调来利用 jQuery 选择器的强大功能，即使在页面已加载且 DOM 更新后也是如此。”

```
$('.someClass').livequery(function() { 
    /*a .someClass is created*/
    $(this).fadeIn();
}); 
```

liveQuery 很好用！

# php - 在 php 中查询 - 如果没有可用数据，告诉系统该怎么做

> ID：14127962
> 
> 赞同：-2
> 
> 时间：2013-01-02T19:30:15.683
> 
> 标签：php, mysql

我有一个查询检查表中的一些数据（名称和与之关联的数字）并返回我需要设置为变量的其中一个。

但是，当我需要考虑尚未在表中的项目（新来者）时，我遇到了麻烦，因为它们应该被视为具有 0 作为数据，但很明显它们在数据库中没有。

脚本如下：

```
 $jQuery = mysql_query("SELECT team, points FROM DCO_standings_teams WHERE competition='1' AND team='$teamname' AND year='$lastyear'");
{
    $points="$row[1]";
    $pointsmult = $points*50;
    $pointsoffer = $wage_offer/100;
    $bid_total = $pointsoffer+$pointsmult+$loyaltybonus;
} 
```

在这种情况下，假设 A 队从去年获得 12 分。它将“12”设置为 $points 并继续进行所有其他计算。

我需要告诉网站，如果在 DCO_standings_teams 表中没有找到记录，那么它应该将 $points 设置为 0。

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:43:17.860

你可以这样做：

```
$result = mysql_query("SELECT team, points FROM DCO_standings_teams WHERE competition='1' AND team='{$teamname}' AND year='{$lastyear}'");

if(mysql_num_rows($result)) {
  $row = mysql_fetch_row($result);
  $points = $row[1];
}
else {
  $points = 0;
}

$pointsmult = $points*50;
$pointsoffer = $wage_offer/100;
$bid_total = $pointsoffer+$pointsmult+$loyaltybonus; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:33:42.787

你已经这样做了...

```
if($points === null){
    $points = 0;
} 
```

* * *

侧点：

`$points="$row[1]";`没有意义....只是做：`$points = $row[1];`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:34:20.973

我会将值转换为整数。像这样：

```
$points = (int) $row[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T19:39:56.510

让我们想想你在做什么：

当您查询数据库时，您会得到结果。如果你没有结果，那么你一定有你说的“新人”。

所以，让我们在继续代码之前计算“点”的数量，不是吗？

正如其他人所暗示的那样，您应该使用 mysql_* 以外的其他函数，但这不是我关心的问题。

```
$jQuery = mysql_query("SELECT team, points FROM DCO_standings_teams WHERE competition='1' AND team='$teamname' AND year='$lastyear'");
$points = $row[1];
if($points == null) { // if there are no points (not 0, because that means there are 0 points)
     die("You are a newcomer."); 
     // do newcomer logic here 
} elseif($points > 0) { 
     //do other logic here
} 
```

# c# - 串行通信 C#

> ID：14127964
> 
> 赞同：0
> 
> 时间：2013-01-02T19:30:28.617
> 
> 标签：c#, oop, serial-port

我正在编写一个 C# 应用程序以通过串行与微控制器进行通信。我有几个关于如何处理收到的消息的问题。下面是我目前使用的代码，它接收到的消息非常好，但我无法更新表单，或将数据存储在此方法之外的任何地方（因为它在另一个线程中）。

```
com.DataReceived += new SerialDataReceivedEventHandler(OnReceived);

public void OnReceived(object sender, SerialDataReceivedEventArgs c) // This is started in another thread...
    {
        com.DiscardOutBuffer();
        try
        {
            test = com.ReadExisting();
            MessageBox.Show(test);       
        }
        catch (Exception exc) 
        {
            MessageBox.Show(exc.ToString());
        }
    } 
```

当我尝试更改表单或从此处调用另一个方法时，这是我收到的错误消息：“Cross Thead 操作无效”。

我希望能够在其他地方显示信息，或者甚至更好地将其放入数组中，以便以后存储为文件。有什么办法可以做到这一点吗？

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:33:32.433

您需要使用`Invoke`or调用主线程`BeginInvoke`：

```
public void OnReceived(object sender, SerialDataReceivedEventArgs c)
{
    if (this.InvokeRequired)
    {
        this.BeginInvoke(new EventHandler<SerialDataReceivedEventArgs>(OnReceived), sender, c);
        return;
    }

    com.DiscardOutBuffer();
    try
    {
        test = com.ReadExisting();
        MessageBox.Show(test);       
    }
    catch (Exception exc) 
    {
        MessageBox.Show(exc.ToString());
    }
} 
```

或者，您可以提取事件处理程序的一部分（例如显示消息框）并调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:34:51.527

您遇到的问题是您正在尝试从非 ui 线程更新 UI。您需要做的是`MessageBox`在 UI 线程上调用您的调用。

就像是：

```
public void OnReceived(object sender, SerialDataReceivedEventArgs c) // This is started in another thread...
{
    com.DiscardOutBuffer();
    try
    {
        test = com.ReadExisting();
        SetValue(test);       
    }
    catch (Exception exc) 
    {
        SetValue(exc.ToString());
    }
}

delegate void valueDelegate(string value);

private void SetValue(string value)
{   
    if (this.InvokeRequired)
    {
        this.Invoke(new valueDelegate(SetValue),value);
    }
    else
    {
        MessageBox.Show(value);
    }
} 
```

# php - 使用正确的汇率更新表格

> ID：14127967
> 
> 赞同：0
> 
> 时间：2013-01-02T19:30:31.767
> 
> 标签：php, mysql, sql

我正在尝试将 1 英镑兑换成其他货币，目前我正在将 1 欧元兑换成其他货币。例如 1 Eur = 0.81400 GBP，我可以将其反转并通过除以每个给我 1.228501228501229 的汇率得到 1 GBP 到 Eur。

我希望所有货币都使用这个，目前我正在使用 php 脚本来获取汇率。如何更改我的 Stock_currency 表并将 GBP 划分为所有货币并将它们存储回 Stock_currency 表

这是我的 PHPscript

```
<?php
class CurrencyConverter {

   var $xml_file = "www.ecb.int/stats/eurofxref/eurofxref-daily.xml";
   var $localhost, $sirnur, $abc123, $mohamed, $stock_currency;
   var $exchange_rates = array();

   //Load Currency Rates

   function CurrencyConverter($host,$user,$pass,$db,$tb) {

      $this->localhost = $host;
      $this->sirnur = $user;
      $this->abc123 = $pass;
      $this->mohamed = $db;
      $this->stock_currency = $tb;

      $this->checkLastUpdated();

      $conn = mysql_connect($this->localhost,$this->sirnur,$this->abc123);

      $rs = mysql_select_db($this->mohamed,$conn);

      $sql = "SELECT * FROM ".$this->stock_currency;

      $rs =  mysql_query($sql,$conn);

      while($row = mysql_fetch_array($rs)) {

         $this->exchange_rates[$row['currency']] = $row['rate'];
      }

   }

   /* Perform the actual conversion, defaults to £1.00 GBP to USD */
   function convert($amount=1,$from="USD",$to="GBP",$decimals=2) {

      return(number_format(($amount/$this->exchange_rates[$from])*$this->exchange_rates[$to],$decimals));
   }

   /* Check to see how long since the data was last updated */
   function checkLastUpdated() {
      $conn = mysql_connect($this->localhost,$this->sirnur,$this->abc123);

      $rs = mysql_select_db($this->mohamed,$conn);

      $sql = "SHOW TABLE STATUS FROM ".$this->mohamed." LIKE '".$this->stock_currency."'";

      $rs =  mysql_query($sql,$conn);

      if(mysql_num_rows($rs) == 0 ) {

         $this->createTable();
      } else {
         $row = mysql_fetch_array($rs);
         if(time() > (strtotime($row["Update_time"])+(12*60*60)) ) {

            $this->downloadExchangeRates();
         }
      }
   }

   /* Download xml file, extract exchange rates and store values in database */

   function downloadExchangeRates() {
      $currency_domain = substr($this->xml_file,0,strpos($this->xml_file,"/"));
      $currency_file = substr($this->xml_file,strpos($this->xml_file,"/"));
      $fp = @fsockopen($currency_domain, 80, $errno, $errstr, 10);
      if($fp) {

         $out = "GET ".$currency_file." HTTP/1.1\r\n";
         $out .= "Host: ".$currency_domain."\r\n";
         $out .= "User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8) Gecko/20051111 Firefox/1.5\r\n";
         $out .= "Connection: Close\r\n\r\n";
         fwrite($fp, $out);
         while (!feof($fp)) {

            $buffer .= fgets($fp, 128);
         }
         fclose($fp);

         $pattern = "{<Cube\s*currency='(\w*)'\s*rate='([\d\.]*)'/>}is";
         preg_match_all($pattern,$buffer,$xml_rates);
         array_shift($xml_rates);

         for($i=0;$i<count($xml_rates[0]);$i++) {

            $exchange_rate[$xml_rates[0][$i]] = $xml_rates[1][$i];
         }

         $conn = mysql_connect($this->localhost,$this->sirnur,$this->abc123);

         $rs = mysql_select_db($this->mohamed,$conn);

         foreach($exchange_rate as $currency=>$rate) {

            if((is_numeric($rate)) && ($rate != 0)) {

               $sql = "SELECT * FROM ".$this->stock_currency." WHERE currency='".$currency."'";
               $rs =  mysql_query($sql,$conn) or die(mysql_error());
               if(mysql_num_rows($rs) > 0) {

                  $sql = "UPDATE ".$this->stock_currency." SET rate=".$rate." WHERE currency='".$currency."'";
               } else {

                  $sql = "INSERT INTO ".$this->stock_currency." VALUES('".$currency."',".$rate.")";
               }

               $rs =  mysql_query($sql,$conn) or die(mysql_error());
            }

         }
      }
   }

   /* Create the currency exchange table */
   function createTable() {

      $conn = mysql_connect($this->localhost,$this->sirnur,$this->abc123);

      $rs = mysql_select_db($this->mohamed,$conn);

      $sql = "CREATE TABLE ".$this->stock_currency." ( currency char(3) NOT NULL default '', rate float NOT NULL default '0', PRIMARY KEY(currency) ) ENGINE=MyISAM";

      $rs =  mysql_query($sql,$conn) or die(mysql_error());

      $sql = "INSERT INTO ".$this->stock_currency." VALUES('EUR',1)";

      $rs =  mysql_query($sql,$conn) or die(mysql_error());

      $this->downloadExchangeRates();
   }

} 
```

包含文件

```
<?php
   include('CurrencyConverter.php');
   $x = new CurrencyConverter('localhost','root','root','mohamed','Stock_Currency');

//  mysql_query("ALTER TABLE Stock_currency  add column We_sell varchar (20) ; ") or die(mysql_error());
//  mysql_query("ALTER TABLE Stock_currency  add column We_buy varchar (20) ; ") or die(mysql_error());  

   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:27:08.103

执行您想要的操作的 SQL 查询类似于：

```
select c.ccy, c.rate/EuroGBP.rate as GBPExchangeRate
from Currency c cross join
     (select rate from Currency c where c.ccy = 'GPB') EuroGBP 
```

# maple - Maple 16：缺少运算符或';'

> ID：14127971
> 
> 赞同：0
> 
> 时间：2013-01-02T19:30:51.400
> 
> 标签：maple

首先，对不起，如果我的英语不好：我是法国人。

这是我的问题：我有以下代码：

```
#Méthode de l'interpolation de Hermite
hermite:=proc(x,a,b,n,f)

local i,q,p,pl1,p2,dq,dp1,df,pl2;

#pl = polynôme de lagrange, p = polynôme
q:=t-x[1];

#création du polynôme q (méthode de la double résolution de lagrange)
for i from 2 to n by 1 do
    q:=q*(t-x[i]);
od
dq:=diff(q,t);

#p1 est en fait interp(x,map(f,x),t)
pl1:=interp(x,map(f,x),t);
dpl1:=diff(p1,t);

#on créé les zi, qui sont en réalité f'(xi)
df:=diff(f(t),t);

#on créé p2(xi)
for i from 1 to n by 1 do
p2[i]:=(df(x(k))-dpl1(x[i]))/dq(x[i]);
od

#on créé pl2(t) à partir du polynôme obtenu p2(xi);
pl2:=interp(x,p2,t);

#affichage des résultats
p:=t->pl1+q*pl2;
print("Interpolation de Hermite par double résolution de Lagrange :");
print(plot[p(t),f(t)],t=a..b);

#MANQUE A FAIT LA QUESTION 3.2

end; 
```

而且我有以下错误：`"Error, missing operator or ;"`这表示问题可能就在`"q:=q*(t-x[i]);",`之前的这个确切部分`x`，但我就是不明白为什么。

谢谢，如果你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:09:22.797

我会

1.  结束程序`end proc;`
2.  用分号关闭2个循环`od;`

那时应该工作

# garbage-collection - 如何禁用在 WebSphere 中触发堆转储时发生的系统 GC？

> ID：14127975
> 
> 赞同：2
> 
> 时间：2013-01-02T19:31:05.020
> 
> 标签：garbage-collection, jvm, websphere, heap-dump

我想捕获在生成堆转储时发生的系统 GC 期间收集的对象。有没有办法禁用该系统 GC？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T11:21:20.367

您可以生成“系统转储”而不是“堆转储”。我还没有找到任何文档，但我只是尝试过，似乎“系统转储”不会触发“系统 GC”。

可以使用`generateSystemDump`JMX 操作请求“系统转储”。如果您更喜欢使用`kill -3`命令，那么您可能需要向 JVM 添加一个环境变量：

```
JAVA_DUMP_OPTS=ONDUMP(SYSDUMP) 
```

`jextract`在加载到 Eclipse MAT 之前，需要使用工具处理“系统转储” 。系统转储也比堆转储大得多，主要是因为它不仅包含对象树，还包含实际的对象数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T08:31:38.433

在 IBM JRE 中，您可以通过添加`-Xdisableexplicitgc`为 JVM 参数来禁用显式 GC。然而，基于[这篇文章](https://www.ibm.com/developerworks/mydeveloperworks/blogs/troubleshootingjava/entry/when_is_a_system_gc_not_a_system_gc2?lang=en)，这个论点似乎无济于事。

也许 PMR 到 IBM 支持会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T21:40:55.897

考虑到 Hotspot，在转储堆时没有影响 VM 行为的参数。通常，在转储堆之前触发 GC 收集。

您至少可以在 Full GC 之前/之后启用类直方图打印 - 这样您将看到收集了哪些对象。( `XX:+PrintClassHistogramBeforeFullGC -XX:+PrintClassHistogramAfterFullGC`)

您也可以尝试`-XX:+DisableExplicitGC`，但我认为这不会有帮助。当我收集堆转储时，我总是注意到正在收集一些对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-26T08:41:38.003

刚刚看到这篇文章，我想我应该把我的两个 bob 放进去。您可以通过 WebSphere Adminconsole 生成一个系统核心：导航到故障排除 > Java 转储和核心。选择要从中收集转储的服务器。单击 System Dump 以生成系统核心。

如果您只需要在 MAT 中进行堆内存分析，您也不需要提取系统内核。系统核心也有比堆转储更多有用的诊断数据，大多数时候你可以看到正在泄漏堆内存的线程堆栈

# objective-c - 将 uiscrollview 添加到现有的 uiview - 无法滚动内容

> ID：14127982
> 
> 赞同：1
> 
> 时间：2013-01-02T19:31:56.457
> 
> 标签：objective-c, uiscrollview, scroll, subview

我一直在 XCode 4.5.2 中从事一个项目，并设置了各种 uiviews，并按照我想要的方式查看它们并使其正常工作。

在一个视图中，我现在需要添加一个 uiscrollview，因为内容将大于页面，并且需要垂直滚动。

我在 viewdidload 中添加了一个 uiscrollview，并设置了内容大小等

```
[scrollView setScrollEnabled:(YES)];
[scrollView setContentSize:CGSizeMake(320,650)]; 
```

当我运行它并尝试垂直滚动时，我可以看到滚动条出现，因此 uiscrollview 正在工作并滚动，但我已经添加到我的 uiview 的所有内容都保持静止并且不会移动。

我尝试以编程方式向滚动视图添加一个小的快速测试图像

```
CGRect imageViewFrame = CGRectMake(10,10,10,10);
UIImageView *imageView = [[UIImageView alloc] initWithFrame:imageViewFrame];
imageView.image = [UIImage imageNamed:@"1001_a.jpg"];
[scrollView addSubview:imageView]; 
```

这个小图像可以正常工作并与滚动视图一起滚动，但是所有其他先前添加的内容、标签、图像等，都仍然停留在它们原来的位置并且根本不动。

我假设这与子视图有关，并且我以前所有的现有内容都不是滚动视图的子视图 - 但我该如何纠正呢？

我已经在界面生成器中布置了我的页面和 uiview，并且不想像使用小测试图像那样以编程方式删除所有内容并添加所有内容。

我需要在 viewdidload 中做些什么来将现有内容设置为 uiscrollview 的子视图吗？

```
[scrollView addSubview:???]; 
```

非常感谢您提前提供的任何提示或建议 - 这让我发疯了！

如果您需要任何屏幕截图或更多代码，请附上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:36:47.910

问题是你所有的东西都被添加到 UIView，而不是滚动视图。滚动滚动视图只会滚动它的孩子，这就是你的测试图像滚动的原因。如果您在 nib 中构建它，您只需将所有需要在滚动视图内滚动的内容拖动即可。您还可以将控制器 UIView 更改为 UIScrollView 本身。那在实用程序右侧栏中的第三个选项卡上，其中显示自定义类，将其更改为 UIScrollView。这样做会失去一些多功能性，但这是最快的方法。

# javascript - Javascript 令牌转换

> ID：14127983
> 
> 赞同：1
> 
> 时间：2013-01-02T19:31:57.800
> 
> 标签：javascript, regex, token, replace

希望获得一个 JS 替换函数来将 [[ ... ]] 更改为 myFunction('...')。

```
"player.email = '[[UserID]]@email.com';" 
```

成为：

```
"player.email = '" + myGetterFunction('userid') + "@email.com';" 
```

[[ ]] 变为 myFunction('') 并且 [[]] 中的值变为小写

**假设**：

*   整个字符串将用双引号括起来
*   只有单引号和转义引号将在里面
*   值“UserID”将始终更改，并且可以包含空格和除 [[ 和 ]] 对之外的其他非 alpaNumeric 字符。

任何人都可以为我指出一个最通用的设置方向吗？难倒我的部分是将 [[]] 的内容小写而不做一些疯狂的拆分。确定一些 Ninja Regex 已经存在用于令牌替换（到目前为止我看到的样本正在替换为每个令牌的*特定*值，我只想转换令牌和包装器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:36:12.527

您可以使用替换函数来处理捕获的组：

```
str.replace(/\[\[(.*?)\]\]/g, function(text) {
    return myGetterFunction(text.toLowerCase());
}); 
```

`/\[\[(.*?)\]\]/g`可能看起来很复杂，但实际上只是一堆转义的方括号。`(.*?)`是一个非贪婪的捕获组。

# android - iOS 的 Android 资产文件夹的模拟？

> ID：14127989
> 
> 赞同：4
> 
> 时间：2013-01-02T19:32:12.557
> 
> 标签：android, ios

我正在学习来自 Android 的 iOS。

在 Android 中有一个特殊的`assets`文件夹。一个人在编码期间将一些文件放在那里，然后一个人能够在程序运行时以数据流的形式访问这些文件。

我想知道iOS是否有类似的机制。到目前为止，我所读到的只是关于如何在 iOS 中保存数据，但这并不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T19:42:45.200

我通常会创建一个文件夹“assets”并确保其中的文件包含在 Build Phases/Copy Bundle Resources 中。完成后，我可以按如下方式访问它们：

```
NSString *path = [[NSBundle mainbundle] pathForResource:@"picture" ofType:@"png"];
.... 
```

# c# - 如何在 SQL Server CE 插入后检索 ID 主键值？

> ID：14127992
> 
> 赞同：1
> 
> 时间：2013-01-02T19:32:30.763
> 
> 标签：c#, sql-server-ce, azure-mobile-services

我想将数据本地存储在 SQL Server CE 表和云中（WAMS 或 ZUMO 表）。

我`storedInCloud`在 SQL Server CE 表中有一个 bool 列，它首先设置为 false，然后，当插入云表成功时，更新为 true。这样我就可以继续尝试“播种云”，直到成功。

不过，要做到这一点，我需要 SQL Server CE 表中的主 ID 键*，这样我就知道要更新哪个表。我想要的伪代码是：

```
int locID = App.TaSLs_SQLCE_LocationDataContext._taSLs_SQLCE_Location.InsertOnSubmit(newLocation);
locDB.SubmitChanges();
if (InsertRecordToCloud(newLocation))
{
    //Update SQL Server CE table, setting storedInCloud to true for record where LocationID = locID
} 
```

...但这不起作用，因为 SQL Server CE`InsertOnSubmit`实际上并没有插入记录，因此不会`ID`生成 val。`SubmitChanges()`确实插入，但它可能是提交的多个记录/更改。

那么有没有办法，实际上，循环并一次提交一个更改，取回主键 val（`LocationID`，下面）？

```
*[Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
        public int LocationId
    . . . 
```

再想一想，我想我可以颠倒表提交/提交的顺序，这样我就可以这样做：

```
if (CommitToCloudSucceeds)
{
    // insert into SQL Server CE, setting storedInCloud to true
}
else
{
    // insert into SQL Server CE, setting storedInCloud to false
} 
```

...然后定期循环遍历 SQL Server CE 表，为那些记录在哪里调用上面的代码`storedInCloud = false`。

# php - 不同div中的jquery显示加载器

> ID：14127996
> 
> 赞同：0
> 
> 时间：2013-01-02T19:33:09.997
> 
> 标签：php, jquery

大家好，新年快乐，

好吧，我有一些 div，每个 div 都有 2 个 href，它们在 php 文件中发送一些属性。

第一个 href 有一个类 voteu，当它被按下时，我正在使用下面的代码：

```
<script type="text/javascript">
$(document).ready(function() {

$(".voteu").click(function() 
{

var id = $(this).attr("id");
var uip = $(this).attr("uip");
var up = $(this).attr("up");
var vn = $(this).attr("vn");

var dataString = 'id='+ id + '&uip='+ uip + '&vn='+ vn;
var parent = $(this);

$('#myloader').fadeIn("fast");

$.ajax({
   type: "POST",
   url: "up_vote.php",
   data: dataString,
   cache: false,

   success: function(html)
   {
   $('#myloader').fadeOut("fast");
   }

   });

});
});
</script> 
```

我的问题是包含加载图像的加载程序 div 仅适用于第一个 div。

如果我使用类 voteu 按第二个或第三个等 href 加载程序 div 仅出现在第一个 div 中。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:37:20.823

请参阅此[示例](http://jsfiddle.net/yGWGj/7/)

用这个：

```
$('.voteu').on('click', function(e){
     $('#myloader').fadeIn("fast");   
     $('#myloader').appendTo(this)    
     // Process ajax
     $('#myloader').fadeOut("fast");
});​ 
```

我希望能帮助你。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:38:49.703

如果没有看到标记，我无法确定，但您似乎正在使用 id 为“myloader”的 html 元素，并且您希望它出现在您单击的元素附近。但是，您没有任何代码可以将 div 移动到您想要的位置。

也许您可以尝试以下方法：

```
$('#myloader').appendTo(this) 
```

在你这样做之前：

```
$('#myloader').fadeIn("fast"); 
```

我没有对此进行测试，因为我没有任何标记，但我认为它应该可以工作。如果不是，它应该为您指明正确的方向。

# mysql - 在单个查询中按值获取行数

> ID：14127998
> 
> 赞同：1
> 
> 时间：2013-01-02T19:33:19.790
> 
> 标签：mysql, join

我的意思是说：

想象一下这些表：

```
Table article_status:             Table users:

userid  | article | status        id | name
--------+---------+-------        ---+------
 1      | 1       | 1              1 | Peter
 1      | 2       | 2              2 | Bob
 2      | 3       | 1
 2      | 4       | 1
 2      | 5       | 2
 2      | 6       | 2
 2      | 7       | 3 
```

我想要得到的是按用户状态编号分组的所有项目的计数。可能的状态值的数量是已知的 (4)。

示例结果`users.id = 2`：

```
userid | name | s1_count | s2_count | s3_count | s4_count |
-------+------+----------+----------+----------+----------+
 2     | Bob  | 2        | 2        | 1        | 0        | 
```

我试过的：

```
SELECT 
  u.id AS userid
, u.name
, COUNT(s1.status) AS s1_count
, COUNT(s2.status) AS s2_count
, COUNT(s3.status) AS s3_count
, COUNT(s4.status) AS s4_count
FROM users AS u
INNER JOIN article_status AS s1 ON s1.userid = u.id AND s1.status = 1 
INNER JOIN article_status AS s2 ON s2.userid = u.id AND s2.status = 2 
INNER JOIN article_status AS s3 ON s3.userid = u.id AND s3.status = 3 
INNER JOIN article_status AS s4 ON s4.userid = u.id AND s4.status = 4 
WHERE u.id = :uid
LIMIT 1 
```

但这不起作用（为什么？）而且看起来非常不理想。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:38:50.143

这被称为*旋转*您的数据...一种方法是使用`CASE`语句：

```
SELECT 
  u.id
, u.name
, COUNT(CASE WHEN a_s.status = 1 THEN 1 END) AS s1_count
, COUNT(CASE WHEN a_s.status = 2 THEN 1 END) AS s2_count
, COUNT(CASE WHEN a_s.status = 3 THEN 1 END) AS s3_count
, COUNT(CASE WHEN a_s.status = 4 THEN 1 END) AS s4_count
FROM users AS u
INNER JOIN article_status AS a_s ON a_s.userid = u.id 
WHERE u.id = :uid
GROUP BY u.id, u.name
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T19:55:03.830

您可以使用带有 a 的聚合函数`CASE`来获取结果：

```
SELECT 
  u.id,
  u.name,
  sum(CASE WHEN a.status = 1 THEN 1 else 0 END) s1_count,
  sum(CASE WHEN a.status = 2 THEN 1 else 0 END) s2_count,
  sum(CASE WHEN a.status = 3 THEN 1 else 0 END) s3_count,
  sum(CASE WHEN a.status = 4 THEN 1 else 0 END) s4_count
FROM users u
INNER JOIN article_status a 
  ON u.id = a.userid
GROUP BY u.id, u.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ece92/11)

或者你可以使用很多子查询来返回数据：

```
select u.id,
  u.name,
  coalesce(s1_count, 0) s1_count,
  coalesce(s2_count, 0) s2_count,
  coalesce(s3_count, 0) s3_count,
  coalesce(s4_count, 0) s4_count
from users u
left join
(
  select count(*) s1_count, userid
  from article_status
  where status = 1
  group by userid
) s1
  on u.id = s1.userid
left join
(
  select count(*) s2_count, userid
  from article_status
  where status = 2
  group by userid
) s2
  on u.id = s2.userid
left join
(
  select count(*) s3_count, userid
  from article_status
  where status = 3
  group by userid
) s3
  on u.id = s3.userid
left join
(
  select count(*) s4_count, userid
  from article_status
  where status = 4
  group by userid
) s4
  on u.id = s4.userid 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/ece92/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T19:36:29.703

不要做类似 COUNT(s1.status) 的事情，试试下面的

```
COUNT(DISTINCT(CONCAT(s1.article, '-', s1.status))) 
```

这只是我的一个理论，因为它将明显依赖于状态和文章。告诉我它是否有效！